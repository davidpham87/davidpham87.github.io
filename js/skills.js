(function(){
shadow$provide[549]=function(la,K,na,U){Object.defineProperty(U,"__esModule",{value:!0});U["default"]=void 0;U["default"]={SYMBOLS:{CIRCLE:"circle",CROSS:"cross",DIAMOND:"diamond",SQUARE:"square",STAR:"star",TRIANGLE:"triangle",WYE:"wye"}}};
shadow$provide[550]=function(la,K,na,U){function a(G,C){var q=Object.keys(G);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(G);C&&(n=n.filter(function(m){return Object.getOwnPropertyDescriptor(G,m).enumerable}));q.push.apply(q,n)}return q}Object.defineProperty(U,"__esModule",{value:!0});U["default"]=void 0;la=function(G){for(var C=1;C<arguments.length;C++){var q=null!=arguments[C]?arguments[C]:{};C%2?a(Object(q),!0).forEach(function(n){var m=q[n];n in G?Object.defineProperty(G,
n,{value:m,enumerable:!0,configurable:!0,writable:!0}):G[n]=m}):Object.getOwnPropertyDescriptors?Object.defineProperties(G,Object.getOwnPropertyDescriptors(q)):a(Object(q)).forEach(function(n){Object.defineProperty(G,n,Object.getOwnPropertyDescriptor(q,n))})}return G}({COORDS_SEPARATOR:",",FORCE_X:.06,FORCE_Y:.06,GRAPH_CONTAINER_ID:"graph-container-zoomable",GRAPH_WRAPPER_ID:"graph-wrapper",KEYWORDS:{SAME:"SAME"},LINK_CLASS_NAME:"link",NODE_CLASS_NAME:"node",TTL_DOUBLE_CLICK_IN_MS:300},function(G){return G&&
G.__esModule?G:{"default":G}}(K(549))["default"]);U["default"]=la};
shadow$provide[551]=function(la,K,na,U){Object.defineProperty(U,"__esModule",{value:!0});U["default"]=void 0;U["default"]={automaticRearrangeAfterDropNode:!1,collapsible:!1,directed:!1,focusAnimationDuration:.75,focusZoom:1,height:400,highlightDegree:1,highlightOpacity:1,linkHighlightBehavior:!1,maxZoom:8,minZoom:.1,initialZoom:null,nodeHighlightBehavior:!1,panAndZoom:!1,staticGraph:!1,staticGraphWithDragAndDrop:!1,width:800,d3:{alphaTarget:.05,gravity:-100,linkLength:100,linkStrength:1,disableLinkForce:!1},
node:{color:"#d3d3d3",fontColor:"black",fontSize:8,fontWeight:"normal",highlightColor:"SAME",highlightFontSize:8,highlightFontWeight:"normal",highlightStrokeColor:"SAME",highlightStrokeWidth:"SAME",labelProperty:"id",labelPosition:null,mouseCursor:"pointer",opacity:1,renderLabel:!0,size:200,strokeColor:"none",strokeWidth:1.5,svg:"",symbolType:"circle",viewGenerator:null},link:{color:"#d3d3d3",fontColor:"black",fontSize:8,fontWeight:"normal",highlightColor:"SAME",highlightFontSize:8,highlightFontWeight:"normal",
labelProperty:"label",mouseCursor:"pointer",opacity:1,renderLabel:!1,semanticStrokeWidth:!1,strokeWidth:1.5,markerHeight:6,markerWidth:6,type:"STRAIGHT"}}};
shadow$provide[552]=function(la,K,na,U){Object.defineProperty(U,"__esModule",{value:!0});U["default"]=void 0;U["default"]={GRAPH_NO_ID_PROP:"id prop not defined! id property is mandatory and it should be unique.",INSUFFICIENT_LINKS:"you are passing invalid data to react-d3-graph. You must include a links array, even if empty, in the data object you're passing down to the \x3cGraph\x3e component.",INVALID_LINKS:"you provided a invalid links data structure. Links source and target attributes must point to an existent node",
INSUFFICIENT_DATA:"you have not provided enough data for react-d3-graph to render something. You need to provide at least one node",INVALID_LINK_VALUE:"links 'value' attribute must be of type number"}};
shadow$provide[553]=function(la,K,na,U){function a(e){"@babel/helpers - typeof";a="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(h){return typeof h}:function(h){return h&&"function"===typeof Symbol&&h.constructor===Symbol&&h!==Symbol.prototype?"symbol":typeof h};return a(e)}function G(e,h){return!!e&&Object.prototype.hasOwnProperty.call(e,h)&&"object"===a(e[h])&&null!==e[h]&&!q(e[h])}function C(e,h){var l=2<arguments.length&&void 0!==arguments[2]?arguments[2]:0,c=[];if(0===
l&&e===h)return!0;if(q(e)&&!q(h)||!q(e)&&q(h))return!1;var g=Object.keys(e),d=Object.keys(h);if(g.length!==d.length)return!1;for(d=0;d<g.length;d++){var p=g[d];if(G(e,p)&&G(h,p)&&l<k)c.push(C(e[p],h[p],l+1));else if(p=q(e[p])&&q(h[p])||Object.prototype.hasOwnProperty.call(h,p)&&h[p]===e[p],c.push(p),!p)break}return-1===c.indexOf(!1)}function q(e){return!!e&&"object"===a(e)&&!Object.keys(e).length}function n(e){for(var h=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{},l=2<arguments.length&&
void 0!==arguments[2]?arguments[2]:0,c=0,g=Object.keys(e);c<g.length;c++){var d=g[c],p=G(e,d);h[d]=p&&l<k?n(e[d],{},l+1):e[d]}return h}function m(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{},h=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{},l=2<arguments.length&&void 0!==arguments[2]?arguments[2]:0,c={};if(0===Object.keys(e||{}).length)return h&&!q(h)?h:{};for(var g=0,d=Object.keys(e);g<d.length;g++){var p=d[g];h[p]&&"object"===a(h[p])&&"object"===a(e[p])&&l<k?function(){var r=
m(e[p],h[p],l+1);c[p]=Object.prototype.hasOwnProperty.call(e[p],"length")&&Object.prototype.hasOwnProperty.call(h[p],"length")?Object.keys(r).map(function(t){return r[t]}):r}():c[p]=Object.prototype.hasOwnProperty.call(h,p)?h[p]:e[p]}return c}function f(e){return(1<arguments.length&&void 0!==arguments[1]?arguments[1]:[]).reduce(function(h,l){Object.prototype.hasOwnProperty.call(e,l)&&(h[l]=e[l]);return h},{})}function b(){var e=1<arguments.length&&void 0!==arguments[1]?arguments[1]:"N/A";return"react-d3-graph :: ".concat(0<
arguments.length&&void 0!==arguments[0]?arguments[0]:"N/A"," :: ").concat(e)}Object.defineProperty(U,"__esModule",{value:!0});U.isDeepEqual=C;U.isEmptyObject=q;U.deepClone=n;U.merge=m;U.pick=f;U.antiPick=function(e){var h=1<arguments.length&&void 0!==arguments[1]?arguments[1]:[],l=Object.keys(e).filter(function(c){return!h.includes(c)});return f(e,l)};U.throwErr=function(e,h){throw Error(b(e,h));};U.logError=function(e,h){console.error(b(e,h))};U.logWarning=function(e,h){e="react-d3-graph :: ".concat(e,
" :: ").concat(h);console.warn(e)};var k=20};
shadow$provide[554]=function(la,K,na,U){function a(z){return z&&z.__esModule?z:{"default":z}}function G(z,F){var D=Object.keys(z);if(Object.getOwnPropertySymbols){var u=Object.getOwnPropertySymbols(z);F&&(u=u.filter(function(B){return Object.getOwnPropertyDescriptor(z,B).enumerable}));D.push.apply(D,u)}return D}function C(z){for(var F=1;F<arguments.length;F++){var D=null!=arguments[F]?arguments[F]:{};F%2?G(Object(D),!0).forEach(function(u){q(z,u,D[u])}):Object.getOwnPropertyDescriptors?Object.defineProperties(z,
Object.getOwnPropertyDescriptors(D)):G(Object(D)).forEach(function(u){Object.defineProperty(z,u,Object.getOwnPropertyDescriptor(D,u))})}return z}function q(z,F,D){F in z?Object.defineProperty(z,F,{value:D,enumerable:!0,configurable:!0,writable:!0}):z[F]=D;return z}function n(z,F,D){z=(0,g.forceX)(z/2).strength(d["default"].FORCE_X);F=(0,g.forceY)(F/2).strength(d["default"].FORCE_Y);return(0,g.forceSimulation)().force("charge",(0,g.forceManyBody)().strength(D)).force("x",z).force("y",F)}function m(z,
F){return z.reduce(function(D,u){var B=c(u.source),I=c(u.target);D[B]||(D[B]={});D[I]||(D[I]={});u=F.collapsible&&u.isHidden?0:u.value||1;D[B][I]=u;F.directed||(D[I][B]=u);return D},{})}function f(z){for(var F={},D=z.length,u=0;u<D;u++){var B=z[u];B.highlighted=!1;Object.prototype.hasOwnProperty.call(B,"x")||(B.x=0);Object.prototype.hasOwnProperty.call(B,"y")||(B.y=0);F[B.id.toString()]=B}return F}function b(z,F){var D=3<arguments.length?arguments[3]:void 0,u=4<arguments.length&&void 0!==arguments[4]?
arguments[4]:{},B=(2<arguments.length&&void 0!==arguments[2]?arguments[2]:[]).find(function(J){return J.source.id===z.source&&J.target.id===z.target});B=B&&(0,t.pick)(B,y);var I=(0,t.antiPick)(z,["source","target"]);return B?(u=u.config&&Object.prototype.hasOwnProperty.call(u.config,"directed")&&D.directed!==u.config.directed,B=C({index:F},B,{},I),u?C({},B,{isHidden:!1}):D.collapsible?B:C({},B,{isHidden:!1})):C({index:F,source:{id:z.source,highlighted:!1},target:{id:z.target,highlighted:!1}},I)}function k(z,
F){return Object.keys(z).reduce(function(D,u){var B=(0,w.computeNodeDegree)(u,F),I=B.outDegree,J=z[u];B=0===B.inDegree&&0===I?C({},J,{_orphan:!0}):J;D[u]=B;return D},{})}function e(z){z.nodes&&z.nodes.length||(0,t.throwErr)("Graph",r["default"].INSUFFICIENT_DATA);z.links||((0,t.logWarning)("Graph",r["default"].INSUFFICIENT_LINKS),z.links=[]);for(var F=z.links.length,D=function(B){var I=z.links[B];z.nodes.find(function(J){return J.id===I.source})||(0,t.throwErr)("Graph","".concat(r["default"].INVALID_LINKS,
' - "').concat(I.source,'" is not a valid source node id'));z.nodes.find(function(J){return J.id===I.target})||(0,t.throwErr)("Graph","".concat(r["default"].INVALID_LINKS,' - "').concat(I.target,'" is not a valid target node id'));I&&void 0!==I.value&&"number"!==typeof I.value&&(0,t.throwErr)("Graph","".concat(r["default"].INVALID_LINK_VALUE,' - found in link with source "').concat(I.source,'" and target "').concat(I.target,'"'))},u=0;u<F;u++)D(u)}function h(z){return(0,t.pick)(z,["id"])}function l(z){return(0,
t.pick)(z,["source","target"])}function c(z){return void 0!==z.id&&null!==z.id?z.id:z}Object.defineProperty(U,"__esModule",{value:!0});U.checkForGraphConfigChanges=function(z,F){var D=z.config||{};z=D&&!(0,t.isEmptyObject)(D)&&!(0,t.isDeepEqual)(D,F.config);F=D&&D.d3&&!(0,t.isDeepEqual)(D.d3,F.config.d3);return{configUpdated:z,d3ConfigUpdated:F}};U.checkForGraphElementsChanges=function(z,F){var D=z.data.nodes.map(function(I){return(0,t.antiPick)(I,A)});z=z.data.links;var u=F.d3Nodes.map(function(I){return(0,
t.antiPick)(I,A)}),B=F.d3Links.map(function(I){return{source:c(I.source),target:c(I.target)}});F=!((0,t.isDeepEqual)(D,u)&&(0,t.isDeepEqual)(z,B));D=D.length!==u.length||z.length!==B.length||!(0,t.isDeepEqual)(D.map(h),u.map(h))||!(0,t.isDeepEqual)(z.map(l),B.map(l));return{graphElementsUpdated:F,newGraphElements:D}};U.getCenterAndZoomTransformation=function(z,F){if(z){var D=F.height,u=F.focusZoom;return"\n        translate(".concat(F.width/2,", ").concat(D/2,")\n        scale(").concat(u,")\n        translate(").concat(-z.x,
", ").concat(-z.y,")\n    ")}};U.getId=c;U.initializeGraphState=function(z,F){var D=z.data,u=z.id,B=z.config;e(D);var I=F&&F.nodes?{nodes:D.nodes.map(function(S){return F.nodes[S.id]?C({},S,{},(0,t.pick)(F.nodes[S.id],x)):C({},S)}),links:D.links.map(function(S,R){return b(S,R,F&&F.d3Links,B,F)})}:{nodes:D.nodes.map(function(S){return C({},S)}),links:D.links.map(function(S){return C({},S)})};z=C({},(0,t.merge)(p["default"],B||{}));D=m(I.links,z);var J=k(f(I.nodes),D),N=I.nodes;I=I.links;u=u.replace(/ /g,
"_");var M=n(z.width,z.height,z.d3&&z.d3.gravity),E=z.minZoom,L=z.maxZoom,Q=z.focusZoom;Q>L?z.focusZoom=L:Q<E&&(z.focusZoom=E);return{id:u,config:z,links:D,d3Links:I,nodes:J,d3Nodes:N,highlightedNode:"",simulation:M,newGraphElements:!1,configUpdated:!1,transform:1,draggedNode:null}};U.updateNodeHighlightedValue=function(z,F,D,u){var B=4<arguments.length&&void 0!==arguments[4]?arguments[4]:!1,I=B?u:"",J=C({},z[u],{highlighted:B}),N=C({},z,q({},u,J));F[u]&&0!==D.highlightDegree&&(N=Object.keys(F[u]).reduce(function(M,
E){var L=C({},N[E],{highlighted:B});M[E]=L;return M},N));return{nodes:N,highlightedNode:I}};U.getNormalizedNodeCoordinates=function(z,F,D,u){var B,I,J=z.source;J=void 0===J?{}:J;z=z.target;var N=void 0===z?{}:z;if(null===(I=D.node)||void 0===I?0:I.viewGenerator)return{source:J,target:N};I=J.x;z=J.y;var M=N.x;N=N.y;switch(null===(B=D.node)||void 0===B?void 0:B.symbolType){case d["default"].SYMBOLS.CIRCLE:var E;B=M-I;var L=N-z;var Q=Math.sqrt(Math.pow(B,2)+Math.pow(L,2));B/=Q;L/=Q;u*=Math.min(D.link.markerWidth,
D.link.markerHeight);F=(null===F||void 0===F?void 0:null===(E=F[J])||void 0===E?void 0:E.size)||D.node.size;F=.95*Math.sqrt(F/Math.PI);I+=F*B;z+=F*L;M-=(F+(D.directed?u:0))*B;N-=(F+(D.directed?u:0))*L}return{source:{x:I,y:z},target:{x:M,y:N}}};var g=K(535),d=a(K(550)),p=a(K(551)),r=a(K(552)),t=K(553),w=K(555),x="id highlighted x y index vy vx".split(" "),y=["index","source","target","isHidden"],A=["x","y","vx","vy","index"]};
shadow$provide[555]=function(la,K,na,U){function a(f,b){var k=Object.keys(f);if(Object.getOwnPropertySymbols){var e=Object.getOwnPropertySymbols(f);b&&(e=e.filter(function(h){return Object.getOwnPropertyDescriptor(f,h).enumerable}));k.push.apply(k,e)}return k}function G(f){for(var b=1;b<arguments.length;b++){var k=null!=arguments[b]?arguments[b]:{};b%2?a(Object(k),!0).forEach(function(e){var h=k[e];e in f?Object.defineProperty(f,e,{value:h,enumerable:!0,configurable:!0,writable:!0}):f[e]=h}):Object.getOwnPropertyDescriptors?
Object.defineProperties(f,Object.getOwnPropertyDescriptors(k)):a(Object(k)).forEach(function(e){Object.defineProperty(f,e,Object.getOwnPropertyDescriptor(k,e))})}return f}function C(f,b){return 1>=f&&1>b}function q(f,b){return 1>=f&&1>=b}function n(f){var b=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{};return Object.keys(b).reduce(function(k,e){return b[e]?Object.keys(b[e]).reduce(function(h,l){f===e&&(h.outDegree+=b[f][l]);f===l&&(h.inDegree+=b[e][f]);return h},k):k},{inDegree:0,outDegree:0})}
Object.defineProperty(U,"__esModule",{value:!0});U.computeNodeDegree=n;U.getTargetLeafConnections=function(f){var b=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{},k=(2<arguments.length?arguments[2]:void 0).directed;return(b[f]?Object.keys(b[f]):[]).reduce(function(e,h){var l=n(h,b);(k?C:q)(l.inDegree,l.outDegree)&&e.push({source:f,target:h});return e},[])};U.isNodeVisible=function(f,b,k){if(!b[f])return!1;if(b[f]._orphan)return!0;f=n(f,k);b=f.outDegree;return 0<f.inDegree||0<b};U.toggleLinksConnections=
function(f,b){return f.map(function(k){var e=k.source,h=k.target;e=(0,m.getId)(e);h=(0,m.getId)(h);return G({},k,{isHidden:!(b&&b[e]&&b[e][h])})})};U.toggleLinksMatrixConnections=function(f,b,k){var e=k.directed;return b.reduce(function(h,l){h[l.source]||(h[l.source]={});h[l.source][l.target]||(h[l.source][l.target]=0);var c=0===h[l.source][l.target]?1:0;h[l.source][l.target]=c;e||(h[l.target][l.source]=c);return h},G({},f))};var m=K(554);K(553)};
shadow$provide[556]=function(la,K,na,U){Object.defineProperty(U,"__esModule",{value:!0});U.HIGHLIGHTED="H";U.MARKER_SMALL_SIZE=16;U.MARKER_MEDIUM_OFFSET=2;U.MARKER_LARGE_OFFSET=4;U.MARKERS={MARKER_S:"marker-small",MARKER_SH:"marker-small-highlighted",MARKER_M:"marker-medium",MARKER_MH:"marker-medium-highlighted",MARKER_L:"marker-large",MARKER_LH:"marker-large-highlighted"};U.SIZES={S:"S",M:"M",L:"L"}};
shadow$provide[557]=function(la,K,na,U){function a(l){"@babel/helpers - typeof";a="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(c){return typeof c}:function(c){return c&&"function"===typeof Symbol&&c.constructor===Symbol&&c!==Symbol.prototype?"symbol":typeof c};return a(l)}function G(){G=Object.assign||function(l){for(var c=1;c<arguments.length;c++){var g=arguments[c],d;for(d in g)Object.prototype.hasOwnProperty.call(g,d)&&(l[d]=g[d])}return l};return G.apply(this,arguments)}
function C(l,c){for(var g=0;g<c.length;g++){var d=c[g];d.enumerable=d.enumerable||!1;d.configurable=!0;"value"in d&&(d.writable=!0);Object.defineProperty(l,d.key,d)}}function q(l,c,g){c&&C(l.prototype,c);g&&C(l,g);return l}function n(l,c){return!c||"object"!==a(c)&&"function"!==typeof c?f(l):c}function m(l){m=Object.setPrototypeOf?Object.getPrototypeOf:function(c){return c.__proto__||Object.getPrototypeOf(c)};return m(l)}function f(l){if(void 0===l)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");
return l}function b(l,c){if("function"!==typeof c&&null!==c)throw new TypeError("Super expression must either be null or a function");l.prototype=Object.create(c&&c.prototype,{constructor:{value:l,writable:!0,configurable:!0}});c&&k(l,c)}function k(l,c){k=Object.setPrototypeOf||function(g,d){g.__proto__=d;return g};return k(l,c)}function e(l,c,g){c in l?Object.defineProperty(l,c,{value:g,enumerable:!0,configurable:!0,writable:!0}):l[c]=g;return l}Object.defineProperty(U,"__esModule",{value:!0});U["default"]=
void 0;var h=function(l){return l&&l.__esModule?l:{"default":l}}(K(5));la=function(l){function c(){var g;if(!(this instanceof c))throw new TypeError("Cannot call a class as a function");for(var d=arguments.length,p=Array(d),r=0;r<d;r++)p[r]=arguments[r];var t=n(this,(g=m(c)).call.apply(g,[this].concat(p)));e(f(t),"handleOnClickLink",function(){return t.props.onClickLink&&t.props.onClickLink(t.props.source,t.props.target)});e(f(t),"handleOnRightClickLink",function(w){return t.props.onRightClickLink&&
t.props.onRightClickLink(w,t.props.source,t.props.target)});e(f(t),"handleOnMouseOverLink",function(){return t.props.onMouseOverLink&&t.props.onMouseOverLink(t.props.source,t.props.target)});e(f(t),"handleOnMouseOutLink",function(){return t.props.onMouseOutLink&&t.props.onMouseOutLink(t.props.source,t.props.target)});return t}b(c,l);q(c,[{key:"render",value:function(){var g={className:this.props.className,d:this.props.d,onClick:this.handleOnClickLink,onContextMenu:this.handleOnRightClickLink,onMouseOut:this.handleOnMouseOutLink,
onMouseOver:this.handleOnMouseOverLink,style:{strokeWidth:this.props.strokeWidth,stroke:this.props.stroke,opacity:this.props.opacity,fill:"none",cursor:this.props.mouseCursor}};this.props.markerId&&(g.markerEnd="url(#".concat(this.props.markerId,")"));var d=this.props,p=d.label;d=d.id;var r={dy:-1,style:{fill:this.props.fontColor,fontSize:this.props.fontSize,fontWeight:this.props.fontWeight}};return h["default"].createElement("g",null,h["default"].createElement("path",G({},g,{id:d})),p&&h["default"].createElement("text",
G({style:{textAnchor:"middle"}},r),h["default"].createElement("textPath",{href:"#".concat(d),startOffset:"50%"},p)))}}]);return c}(h["default"].Component);U["default"]=la};
shadow$provide[558]=function(la,K,na,U){function a(C){return C&&C.__esModule?C:{"default":C}}function G(C,q){var n=Object.keys(C);if(Object.getOwnPropertySymbols){var m=Object.getOwnPropertySymbols(C);q&&(m=m.filter(function(f){return Object.getOwnPropertyDescriptor(C,f).enumerable}));n.push.apply(n,m)}return n}Object.defineProperty(U,"__esModule",{value:!0});U["default"]=void 0;la=a(K(551));K=a(K(549));K=function(C){for(var q=1;q<arguments.length;q++){var n=null!=arguments[q]?arguments[q]:{};q%2?
G(Object(n),!0).forEach(function(m){var f=n[m];m in C?Object.defineProperty(C,m,{value:f,enumerable:!0,configurable:!0,writable:!0}):C[m]=f}):Object.getOwnPropertyDescriptors?Object.defineProperties(C,Object.getOwnPropertyDescriptors(n)):G(Object(n)).forEach(function(m){Object.defineProperty(C,m,Object.getOwnPropertyDescriptor(n,m))})}return C}({ARC:{START_ANGLE:0,END_ANGLE:2*Math.PI},DEFAULT_NODE_SIZE:la["default"].node.size,NODE_LABEL_DX:".90em",NODE_LABEL_DY:".35em"},K["default"]);U["default"]=
K};
shadow$provide[559]=function(la,K,na,U){function a(q){switch(q){case C["default"].SYMBOLS.CIRCLE:return G.symbolCircle;case C["default"].SYMBOLS.CROSS:return G.symbolCross;case C["default"].SYMBOLS.DIAMOND:return G.symbolDiamond;case C["default"].SYMBOLS.SQUARE:return G.symbolSquare;case C["default"].SYMBOLS.STAR:return G.symbolStar;case C["default"].SYMBOLS.TRIANGLE:return G.symbolTriangle;case C["default"].SYMBOLS.WYE:return G.symbolWye;default:return G.symbolCircle}}Object.defineProperty(U,"__esModule",
{value:!0});U["default"]=void 0;var G=K(545),C=function(q){return q&&q.__esModule?q:{"default":q}}(K(558));U["default"]={buildSvgSymbol:function(){var q=0<arguments.length&&void 0!==arguments[0]?arguments[0]:C["default"].DEFAULT_NODE_SIZE,n=1<arguments.length&&void 0!==arguments[1]?arguments[1]:C["default"].SYMBOLS.CIRCLE;return(0,G.symbol)().size(function(){return q}).type(function(){return a(n)})()},getLabelPlacementProps:function(q,n){switch(n){case "right":return{dx:q?"".concat(q):C["default"].NODE_LABEL_DX,
dy:"0",dominantBaseline:"middle",textAnchor:"start"};case "left":return{dx:q?"".concat(-q):"-".concat(C["default"].NODE_LABEL_DX),dy:"0",dominantBaseline:"middle",textAnchor:"end"};case "top":return{dx:"0",dy:q?"".concat(-q):"-".concat(C["default"].NODE_LABEL_DX),dominantBaseline:"baseline",textAnchor:"middle"};case "bottom":return{dx:"0",dy:q?"".concat(q):C["default"].NODE_LABEL_DX,dominantBaseline:"hanging",textAnchor:"middle"};case "center":return{dx:"0",dy:"0",dominantBaseline:"middle",textAnchor:"middle"};
default:return{dx:q?"".concat(q):C["default"].NODE_LABEL_DX,dy:C["default"].NODE_LABEL_DY}}}}};
shadow$provide[560]=function(la,K,na,U){function a(t){return t&&t.__esModule?t:{"default":t}}function G(){G=Object.assign||function(t){for(var w=1;w<arguments.length;w++){var x=arguments[w],y;for(y in x)Object.prototype.hasOwnProperty.call(x,y)&&(t[y]=x[y])}return t};return G.apply(this,arguments)}function C(t){"@babel/helpers - typeof";C="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(w){return typeof w}:function(w){return w&&"function"===typeof Symbol&&w.constructor===Symbol&&
w!==Symbol.prototype?"symbol":typeof w};return C(t)}function q(t,w){var x=Object.keys(t);if(Object.getOwnPropertySymbols){var y=Object.getOwnPropertySymbols(t);w&&(y=y.filter(function(A){return Object.getOwnPropertyDescriptor(t,A).enumerable}));x.push.apply(x,y)}return x}function n(t){for(var w=1;w<arguments.length;w++){var x=null!=arguments[w]?arguments[w]:{};w%2?q(Object(x),!0).forEach(function(y){c(t,y,x[y])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(x)):
q(Object(x)).forEach(function(y){Object.defineProperty(t,y,Object.getOwnPropertyDescriptor(x,y))})}return t}function m(t,w){for(var x=0;x<w.length;x++){var y=w[x];y.enumerable=y.enumerable||!1;y.configurable=!0;"value"in y&&(y.writable=!0);Object.defineProperty(t,y.key,y)}}function f(t,w,x){w&&m(t.prototype,w);x&&m(t,x);return t}function b(t,w){return!w||"object"!==C(w)&&"function"!==typeof w?e(t):w}function k(t){k=Object.setPrototypeOf?Object.getPrototypeOf:function(w){return w.__proto__||Object.getPrototypeOf(w)};
return k(t)}function e(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function h(t,w){if("function"!==typeof w&&null!==w)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(w&&w.prototype,{constructor:{value:t,writable:!0,configurable:!0}});w&&l(t,w)}function l(t,w){l=Object.setPrototypeOf||function(x,y){x.__proto__=y;return x};return l(t,w)}function c(t,w,x){w in t?Object.defineProperty(t,
w,{value:x,enumerable:!0,configurable:!0,writable:!0}):t[w]=x;return t}Object.defineProperty(U,"__esModule",{value:!0});U["default"]=void 0;var g=a(K(5)),d=a(K(559)),p=a(K(558)),r=K(553);la=function(t){function w(){var x;if(!(this instanceof w))throw new TypeError("Cannot call a class as a function");for(var y=arguments.length,A=Array(y),z=0;z<y;z++)A[z]=arguments[z];var F=b(this,(x=k(w)).call.apply(x,[this].concat(A)));c(e(F),"handleOnClickNode",function(){return F.props.onClickNode&&F.props.onClickNode(F.props.id)});
c(e(F),"handleOnRightClickNode",function(D){return F.props.onRightClickNode&&F.props.onRightClickNode(D,F.props.id)});c(e(F),"handleOnMouseOverNode",function(){return F.props.onMouseOverNode&&F.props.onMouseOverNode(F.props.id)});c(e(F),"handleOnMouseOutNode",function(){return F.props.onMouseOut&&F.props.onMouseOut(F.props.id)});return F}h(w,t);f(w,[{key:"render",value:function(){var x={cursor:this.props.cursor,onClick:this.handleOnClickNode,onContextMenu:this.handleOnRightClickNode,onMouseOut:this.handleOnMouseOutNode,
onMouseOver:this.handleOnMouseOverNode,opacity:this.props.opacity},y=n({},d["default"].getLabelPlacementProps(this.props.dx,this.props.labelPosition),{fill:this.props.fontColor,fontSize:this.props.fontSize,fontWeight:this.props.fontWeight,opacity:this.props.opacity}),A=this.props.size,z="object"!==C(A),F=this.props.cx,D=this.props.cy;if(this.props.svg||this.props.viewGenerator){var u=z?A/10:A.height/10,B=z?A/10:A.width/10;A=B/2;z=u/2;var I="translate(".concat(A,",").concat(z,")");y=g["default"].createElement("text",
G({},y,{transform:I}),this.props.label);x=this.props.viewGenerator&&!this.props.overrideGlobalViewGenerator?g["default"].createElement("svg",G({},x,{width:B,height:u}),g["default"].createElement("foreignObject",{x:"0",y:"0",width:"100%",height:"100%"},g["default"].createElement("section",{style:{height:u,width:B,backgroundColor:"transparent"}},this.props.viewGenerator(this.props)))):g["default"].createElement("image",G({},x,{href:this.props.svg,width:B,height:u}));F-=A;D-=z}else z||((0,r.logWarning)("node.size should be a number when not using custom nodes."),
A=p["default"].DEFAULT_NODE_SIZE),x.d=d["default"].buildSvgSymbol(A,this.props.type),x.fill=this.props.fill,x.stroke=this.props.stroke,x.strokeWidth=this.props.strokeWidth,y=g["default"].createElement("text",y,this.props.label),x=g["default"].createElement("path",x);F={className:this.props.className,cx:this.props.cx,cy:this.props.cy,id:this.props.id,transform:"translate(".concat(F,",").concat(D,")")};return g["default"].createElement("g",F,x,this.props.renderLabel&&y)}}]);return w}(g["default"].Component);
U["default"]=la};
shadow$provide[561]=function(la,K,na,U){function a(b){"@babel/helpers - typeof";a="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(k){return typeof k}:function(k){return k&&"function"===typeof Symbol&&k.constructor===Symbol&&k!==Symbol.prototype?"symbol":typeof k};return a(b)}function G(b,k){for(var e=0;e<k.length;e++){var h=k[e];h.enumerable=h.enumerable||!1;h.configurable=!0;"value"in h&&(h.writable=!0);Object.defineProperty(b,h.key,h)}}function C(b,k,e){k&&G(b.prototype,k);
e&&G(b,e);return b}function q(b){q=Object.setPrototypeOf?Object.getPrototypeOf:function(k){return k.__proto__||Object.getPrototypeOf(k)};return q(b)}function n(b,k){if("function"!==typeof k&&null!==k)throw new TypeError("Super expression must either be null or a function");b.prototype=Object.create(k&&k.prototype,{constructor:{value:b,writable:!0,configurable:!0}});k&&m(b,k)}function m(b,k){m=Object.setPrototypeOf||function(e,h){e.__proto__=h;return e};return m(b,k)}Object.defineProperty(U,"__esModule",
{value:!0});U["default"]=void 0;var f=function(b){return b&&b.__esModule?b:{"default":b}}(K(5));la=function(b){function k(){if(!(this instanceof k))throw new TypeError("Cannot call a class as a function");var e=q(k).apply(this,arguments);if(!e||"object"!==a(e)&&"function"!==typeof e){if(void 0===this)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");e=this}return e}n(k,b);C(k,[{key:"render",value:function(){return f["default"].createElement("marker",{className:"marker",
id:this.props.id,viewBox:"0 -5 10 10",refX:this.props.refX,refY:"0",markerWidth:this.props.markerWidth,markerHeight:this.props.markerHeight,orient:"auto",fill:this.props.fill},f["default"].createElement("path",{d:"M0,-5L10,0L0,5"}))}}]);return k}(f["default"].Component);U["default"]=la};
shadow$provide[562]=function(la,K,na,U){Object.defineProperty(U,"__esModule",{value:!0});U.LINE_TYPES={STRAIGHT:"STRAIGHT",CURVE_SMOOTH:"CURVE_SMOOTH",CURVE_FULL:"CURVE_FULL"}};
shadow$provide[563]=function(la,K,na,U){function a(n,m,f){m in n?Object.defineProperty(n,m,{value:f,enumerable:!0,configurable:!0,writable:!0}):n[m]=f;return n}Object.defineProperty(U,"__esModule",{value:!0});U.buildLinkPathDefinition=function(n){var m=n.source,f=void 0===m?{}:m;m=n.target;var b=void 0===m?{}:m;m=f.x;f=f.y;var k=b.x;b=b.y;var e=(q[G.LINE_TYPES[1<arguments.length&&void 0!==arguments[1]?arguments[1]:G.LINE_TYPES.STRAIGHT]||G.LINE_TYPES.STRAIGHT]||q[G.LINE_TYPES.STRAIGHT])(m,f,k,b);
return"M".concat(m,",").concat(f,"A").concat(e,",").concat(e," 0 0,1 ").concat(k,",").concat(b)};var G=K(562),C,q=(C={},a(C,G.LINE_TYPES.STRAIGHT,function(){return 0}),a(C,G.LINE_TYPES.CURVE_SMOOTH,function(n,m,f,b){n=f-n;m=b-m;return Math.sqrt(n*n+m*m)}),a(C,G.LINE_TYPES.CURVE_FULL,function(){return 1}),C)};
shadow$provide[564]=function(la,K,na,U){Object.defineProperty(U,"__esModule",{value:!0});U.getMarkerSize=function(C){var q=a.MARKER_SMALL_SIZE,n=q+a.MARKER_MEDIUM_OFFSET*C.maxZoom/3,m=q+a.MARKER_LARGE_OFFSET*C.maxZoom/3;if(C.node&&!C.node.viewGenerator)switch(C.node.symbolType){case G["default"].SYMBOLS.CIRCLE:m=n=q=0}return{small:q,medium:n,large:m}};U.getMarkerId=void 0;var a=K(556),G=function(C){return C&&C.__esModule?C:{"default":C}}(K(550));la=function(){var C={};return function(q,n,m){var f=
m.maxZoom;m="".concat(q,";").concat(n,";").concat(f);if(C[m])return C[m];var b=f/4;q=q?a.HIGHLIGHTED:"";n="MARKER_".concat(n<b?a.SIZES.S:n>=b&&n<f/2?a.SIZES.M:a.SIZES.L).concat(q);n=a.MARKERS[n];return C[m]=n}}();U.getMarkerId=la};
shadow$provide[565]=function(la,K,na,U){function a(b,k){var e=Object.keys(b);if(Object.getOwnPropertySymbols){var h=Object.getOwnPropertySymbols(b);k&&(h=h.filter(function(l){return Object.getOwnPropertyDescriptor(b,l).enumerable}));e.push.apply(e,h)}return e}function G(b){for(var k=1;k<arguments.length;k++){var e=null!=arguments[k]?arguments[k]:{};k%2?a(Object(e),!0).forEach(function(h){var l=e[h];h in b?Object.defineProperty(b,h,{value:l,enumerable:!0,configurable:!0,writable:!0}):b[h]=l}):Object.getOwnPropertyDescriptors?
Object.defineProperties(b,Object.getOwnPropertyDescriptors(e)):a(Object(e)).forEach(function(h){Object.defineProperty(b,h,Object.getOwnPropertyDescriptor(e,h))})}return b}function C(b){"@babel/helpers - typeof";C="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(k){return typeof k}:function(k){return k&&"function"===typeof Symbol&&k.constructor===Symbol&&k!==Symbol.prototype?"symbol":typeof k};return C(b)}Object.defineProperty(U,"__esModule",{value:!0});U.buildLinkProps=function(b,
k,e,h,l,c,g,d){var p,r,t,w,x=b.source,y=b.target,A=(null===k||void 0===k?void 0:null===(p=k[x])||void 0===p?void 0:p.x)||0;p=(null===k||void 0===k?void 0:null===(r=k[x])||void 0===r?void 0:r.y)||0;r=(null===k||void 0===k?void 0:null===(t=k[y])||void 0===t?void 0:t.x)||0;t=(null===k||void 0===k?void 0:null===(w=k[y])||void 0===w?void 0:w.y)||0;w=b.type||h.link.type;var z=!1;switch(h.highlightDegree){case 0:break;case 2:z=!0;break;default:z=x===c||y===c}var F=x===(g&&g.source)&&y===(g&&g.target);F=
z&&k[x].highlighted&&k[y].highlighted||F;z=b.opacity||h.link.opacity;if(c||g&&g.source)z=F?h.link.opacity:h.highlightOpacity;c=b.color||h.link.color;F&&(c=h.link.highlightColor===q["default"].KEYWORDS.SAME?h.link.color:h.link.highlightColor);g=1/d*(b.strokeWidth||h.link.strokeWidth);h.link.semanticStrokeWidth&&(g+=(e[x][y]||e[y][x]||1)*g/10);e=h.directed?(0,m.getMarkerId)(F,d,h):null;d=1/d;var D=null,u=null,B=null,I=null;h.link.renderLabel&&(I="function"===typeof h.link.labelProperty?h.link.labelProperty(b):
b[h.link.labelProperty],D=b.fontSize||h.link.fontSize,u=b.fontColor||h.link.fontColor,B=F?h.link.highlightFontWeight:h.link.fontWeight);b=(0,f.getNormalizedNodeCoordinates)({source:{x:A,y:p},target:{x:r,y:t}},k,h,g);b=(0,n.buildLinkPathDefinition)(b,w);return{className:q["default"].LINK_CLASS_NAME,d:b,fontColor:u,fontSize:D*d,fontWeight:B,label:I,markerId:e,mouseCursor:h.link.mouseCursor,opacity:z,source:x,stroke:c,strokeWidth:g,target:y,onClickLink:l.onClickLink,onMouseOutLink:l.onMouseOutLink,onMouseOverLink:l.onMouseOverLink,
onRightClickLink:l.onRightClickLink}};U.buildNodeProps=function(b,k){var e=2<arguments.length&&void 0!==arguments[2]?arguments[2]:{},h=4<arguments.length?arguments[4]:void 0,l=5<arguments.length?arguments[5]:void 0,c=b.highlighted||b.id===(h&&h.source)||b.id===(h&&h.target);var g=b.highlighted||b.id===(h&&h.source)||b.id===(h&&h.target);h=h&&h.source&&h.target;g=(h=!!(3<arguments.length&&arguments[3]||h))&&0===k.highlightDegree?g?k.node.opacity:k.highlightOpacity:h?g?k.node.opacity:k.highlightOpacity:
b.opacity||k.node.opacity;h=b.color||k.node.color;c&&k.node.highlightColor!==q["default"].KEYWORDS.SAME&&(h=k.node.highlightColor);var d=b.strokeColor||k.node.strokeColor;c&&k.node.highlightStrokeColor!==q["default"].KEYWORDS.SAME&&(d=k.node.highlightStrokeColor);var p=b[k.node.labelProperty]||b.id;"function"===typeof k.node.labelProperty&&(p=k.node.labelProperty(b));var r=b.labelPosition||k.node.labelPosition,t=b.strokeWidth||k.node.strokeWidth;c&&k.node.highlightStrokeWidth!==q["default"].KEYWORDS.SAME&&
(t=k.node.highlightStrokeWidth);l=1/l;var w=b.size||k.node.size,x,y="object"!==C(w);y?x=w:"top"===r||"bottom"===r?x=w.height:w.width;var A=c?k.node.highlightFontSize:k.node.fontSize,z=b.svg||k.node.svg,F=b.fontColor||k.node.fontColor,D=k.node.renderLabel;void 0!==b.renderLabel&&"boolean"===typeof b.renderLabel&&(D=b.renderLabel);return G({},b,{className:q["default"].NODE_CLASS_NAME,cursor:k.node.mouseCursor,cx:(null===b||void 0===b?void 0:b.x)||"0",cy:(null===b||void 0===b?void 0:b.y)||"0",dx:A*l+
x/100+1.5,fill:h,fontColor:F,fontSize:A*l,fontWeight:c?k.node.highlightFontWeight:k.node.fontWeight,id:b.id,label:p,labelPosition:r,opacity:g,overrideGlobalViewGenerator:!b.viewGenerator&&b.svg,renderLabel:D,size:y?w*l:{height:w.height*l,width:w.width*l},stroke:d,strokeWidth:t*l,svg:z,type:b.symbolType||k.node.symbolType,viewGenerator:b.viewGenerator||k.node.viewGenerator,onClickNode:e.onClickNode,onMouseOut:e.onMouseOut,onMouseOverNode:e.onMouseOverNode,onRightClickNode:e.onRightClickNode})};var q=
function(b){return b&&b.__esModule?b:{"default":b}}(K(550)),n=K(563),m=K(564),f=K(554)};
shadow$provide[566]=function(la,K,na,U){function a(t){return t&&t.__esModule?t:{"default":t}}function G(){G=Object.assign||function(t){for(var w=1;w<arguments.length;w++){var x=arguments[w],y;for(y in x)Object.prototype.hasOwnProperty.call(x,y)&&(t[y]=x[y])}return t};return G.apply(this,arguments)}function C(t,w){var x=Object.keys(t);if(Object.getOwnPropertySymbols){var y=Object.getOwnPropertySymbols(t);w&&(y=y.filter(function(A){return Object.getOwnPropertyDescriptor(t,A).enumerable}));x.push.apply(x,
y)}return x}function q(t){for(var w=1;w<arguments.length;w++){var x=null!=arguments[w]?arguments[w]:{};w%2?C(Object(x),!0).forEach(function(y){var A=x[y];y in t?Object.defineProperty(t,y,{value:A,enumerable:!0,configurable:!0,writable:!0}):t[y]=A}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(x)):C(Object(x)).forEach(function(y){Object.defineProperty(t,y,Object.getOwnPropertyDescriptor(x,y))})}return t}function n(t,w,x,y,A,z,F,D){y.collapsible&&(w=w.filter(function(u){return!u.isHidden}));
return w.map(function(u){var B=u.source,I=u.target;B=(0,g.getId)(B);var J=(0,g.getId)(I);I="".concat(B).concat(b["default"].COORDS_SEPARATOR).concat(J);u=(0,c.buildLinkProps)(q({},u,{source:"".concat(B),target:"".concat(J)}),t,x,y,A,"".concat(z),F,D);return f["default"].createElement(e["default"],G({key:I,id:I},u))})}function m(t,w,x,y,A,z,F){var D=Object.keys(t);x.collapsible&&(D=D.filter(function(u){return(0,d.isNodeVisible)(u,t,F)}));return D.map(function(u){var B=(0,c.buildNodeProps)(q({},t[u],
{id:"".concat(u)}),x,w,y,A,z);return f["default"].createElement(h["default"],G({key:u},B))})}Object.defineProperty(U,"__esModule",{value:!0});U.renderGraph=function(t,w,x,y,A,z,F,D,u){return{nodes:m(t,w,z,F,D,u,y),links:n(t,x,y,z,A,F,D,u),defs:r(z)}};var f=a(K(5)),b=a(K(550)),k=K(556),e=a(K(557)),h=a(K(560)),l=a(K(561)),c=K(565),g=K(554),d=K(555),p=K(564),r=function(){var t;return function(w){if(t)return t;var x=(0,p.getMarkerSize)(w),y=x.small,A=x.medium;x=x.large;var z={markerWidth:w.link.markerWidth,
markerHeight:w.link.markerHeight};return t=f["default"].createElement("defs",null,f["default"].createElement(l["default"],G({id:k.MARKERS.MARKER_S,refX:y,fill:w.link.color},z)),f["default"].createElement(l["default"],G({id:k.MARKERS.MARKER_SH,refX:y,fill:w.link.highlightColor},z)),f["default"].createElement(l["default"],G({id:k.MARKERS.MARKER_M,refX:A,fill:w.link.color},z)),f["default"].createElement(l["default"],G({id:k.MARKERS.MARKER_MH,refX:A,fill:w.link.highlightColor},z)),f["default"].createElement(l["default"],
G({id:k.MARKERS.MARKER_L,refX:x,fill:w.link.color},z)),f["default"].createElement(l["default"],G({id:k.MARKERS.MARKER_LH,refX:x,fill:w.link.highlightColor},z)))}}()};
shadow$provide[567]=function(la,K,na,U){function a(u){return u&&u.__esModule?u:{"default":u}}function G(u){"@babel/helpers - typeof";G="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(B){return typeof B}:function(B){return B&&"function"===typeof Symbol&&B.constructor===Symbol&&B!==Symbol.prototype?"symbol":typeof B};return G(u)}function C(){C=Object.assign||function(u){for(var B=1;B<arguments.length;B++){var I=arguments[B],J;for(J in I)Object.prototype.hasOwnProperty.call(I,
J)&&(u[J]=I[J])}return u};return C.apply(this,arguments)}function q(u,B){var I=Object.keys(u);if(Object.getOwnPropertySymbols){var J=Object.getOwnPropertySymbols(u);B&&(J=J.filter(function(N){return Object.getOwnPropertyDescriptor(u,N).enumerable}));I.push.apply(I,J)}return I}function n(u){for(var B=1;B<arguments.length;B++){var I=null!=arguments[B]?arguments[B]:{};B%2?q(Object(I),!0).forEach(function(J){c(u,J,I[J])}):Object.getOwnPropertyDescriptors?Object.defineProperties(u,Object.getOwnPropertyDescriptors(I)):
q(Object(I)).forEach(function(J){Object.defineProperty(u,J,Object.getOwnPropertyDescriptor(I,J))})}return u}function m(u,B){return!B||"object"!==G(B)&&"function"!==typeof B?b(u):B}function f(u){f=Object.setPrototypeOf?Object.getPrototypeOf:function(B){return B.__proto__||Object.getPrototypeOf(B)};return f(u)}function b(u){if(void 0===u)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return u}function k(u,B){for(var I=0;I<B.length;I++){var J=B[I];J.enumerable=
J.enumerable||!1;J.configurable=!0;"value"in J&&(J.writable=!0);Object.defineProperty(u,J.key,J)}}function e(u,B,I){B&&k(u.prototype,B);I&&k(u,I);return u}function h(u,B){if("function"!==typeof B&&null!==B)throw new TypeError("Super expression must either be null or a function");u.prototype=Object.create(B&&B.prototype,{constructor:{value:u,writable:!0,configurable:!0}});B&&l(u,B)}function l(u,B){l=Object.setPrototypeOf||function(I,J){I.__proto__=J;return I};return l(u,B)}function c(u,B,I){B in u?
Object.defineProperty(u,B,{value:I,enumerable:!0,configurable:!0,writable:!0}):u[B]=I;return u}Object.defineProperty(U,"__esModule",{value:!0});U["default"]=void 0;var g=a(K(5)),d=K(521),p=K(535),r=K(520),t=K(547),w=a(K(550)),x=a(K(551)),y=a(K(552)),A=K(555),z=K(554),F=K(566),D=K(553);la=function(u){function B(I){if(!(this instanceof B))throw new TypeError("Cannot call a class as a function");var J=m(this,f(B).call(this,I));c(b(J),"_generateFocusAnimationProps",function(){var N=J.state.focusedNodeId;
J.state.enableFocusAnimation&&(J.focusAnimationTimeout&&clearTimeout(J.focusAnimationTimeout),J.focusAnimationTimeout=setTimeout(function(){return J.setState({enableFocusAnimation:!1})},1E3*J.state.config.focusAnimationDuration));return{style:{transitionDuration:"".concat(J.state.enableFocusAnimation?J.state.config.focusAnimationDuration:0,"s")},transform:N?J.state.focusTransformation:null}});c(b(J),"_onDragEnd",function(){J.isDraggingNode=!1;J.state.draggedNode&&(J.onNodePositionChange(J.state.draggedNode),
J._tick({draggedNode:null}));!J.state.config.staticGraph&&J.state.config.automaticRearrangeAfterDropNode&&J.state.simulation.alphaTarget(J.state.config.d3.alphaTarget).restart()});c(b(J),"_onDragMove",function(N,M,E){N=E[M].id;J.state.config.staticGraph||(N=J.state.nodes[N],N.oldX=N.x,N.oldY=N.y,N.x+=r.event.dx,N.y+=r.event.dy,N.fx=N.x,N.fy=N.y,J._tick({draggedNode:N}))});c(b(J),"_onDragStart",function(){J.isDraggingNode=!0;J.pauseSimulation();J.state.enableFocusAnimation&&J.setState({enableFocusAnimation:!1})});
c(b(J),"_setNodeHighlightedValue",function(N){var M=1<arguments.length&&void 0!==arguments[1]?arguments[1]:!1;return J._tick((0,z.updateNodeHighlightedValue)(J.state.nodes,J.state.links,J.state.config,N,M))});c(b(J),"_tick",function(){var N=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{},M=1<arguments.length?arguments[1]:void 0;return M?J.setState(N,M):J.setState(N)});c(b(J),"_zoomConfig",function(){var N=(0,r.select)("#".concat(J.state.id,"-").concat(w["default"].GRAPH_WRAPPER_ID)),M=(0,
t.zoom)().scaleExtent([J.state.config.minZoom,J.state.config.maxZoom]).on("zoom",J._zoomed);null!==J.state.config.initialZoom&&M.scaleTo(N,J.state.config.initialZoom);N.call(M).on("dblclick.zoom",null)});c(b(J),"_zoomed",function(){var N=r.event.transform;(0,r.selectAll)("#".concat(J.state.id,"-").concat(w["default"].GRAPH_CONTAINER_ID)).attr("transform",N);J.state.config.panAndZoom&&J.setState({transform:N.k})});c(b(J),"onClickGraph",function(N){var M,E,L;J.state.enableFocusAnimation&&J.setState({enableFocusAnimation:!1});
var Q=N.target&&N.target.tagName,S=null===N||void 0===N?void 0:null===(M=N.target)||void 0===M?void 0:null===(E=M.attributes)||void 0===E?void 0:null===(L=E.name)||void 0===L?void 0:L.value;M="svg-container-".concat(J.state.id);"SVG"===Q.toUpperCase()&&S===M&&J.props.onClickGraph&&J.props.onClickGraph(N)});c(b(J),"onClickNode",function(N){if(J.state.config.collapsible){var M=(0,A.getTargetLeafConnections)(N,J.state.links,J.state.config),E=(0,A.toggleLinksMatrixConnections)(J.state.links,M,J.state.config),
L=(0,A.toggleLinksConnections)(J.state.d3Links,E);M=null===M||void 0===M?void 0:M["0"];var Q=!1;M&&(Q=1===E[M.source][M.target]);J._tick({links:E,d3Links:L},function(){J.props.onClickNode&&J.props.onClickNode(N);Q&&J._graphNodeDragConfig()})}else J.nodeClickTimer?(J.props.onDoubleClickNode&&J.props.onDoubleClickNode(N),J.nodeClickTimer=clearTimeout(J.nodeClickTimer)):J.nodeClickTimer=setTimeout(function(){J.props.onClickNode&&J.props.onClickNode(N);J.nodeClickTimer=null},w["default"].TTL_DOUBLE_CLICK_IN_MS)});
c(b(J),"onMouseOverNode",function(N){J.isDraggingNode||(J.props.onMouseOverNode&&J.props.onMouseOverNode(N),J.state.config.nodeHighlightBehavior&&J._setNodeHighlightedValue(N,!0))});c(b(J),"onMouseOutNode",function(N){J.isDraggingNode||(J.props.onMouseOutNode&&J.props.onMouseOutNode(N),J.state.config.nodeHighlightBehavior&&J._setNodeHighlightedValue(N,!1))});c(b(J),"onMouseOverLink",function(N,M){J.props.onMouseOverLink&&J.props.onMouseOverLink(N,M);J.state.config.linkHighlightBehavior&&J._tick({highlightedLink:{source:N,
target:M}})});c(b(J),"onMouseOutLink",function(N,M){J.props.onMouseOutLink&&J.props.onMouseOutLink(N,M);J.state.config.linkHighlightBehavior&&J._tick({highlightedLink:void 0})});c(b(J),"onNodePositionChange",function(N){if(J.props.onNodePositionChange)J.props.onNodePositionChange(N.id,N.x,N.y)});c(b(J),"pauseSimulation",function(){return J.state.simulation.stop()});c(b(J),"resetNodesPositions",function(){if(!J.state.config.staticGraph){for(var N in J.state.nodes){var M=J.state.nodes[N];M.fx&&M.fy&&
(Reflect.deleteProperty(M,"fx"),Reflect.deleteProperty(M,"fy"))}J.state.simulation.alphaTarget(J.state.config.d3.alphaTarget).restart();J._tick()}});c(b(J),"restartSimulation",function(){return!J.state.config.staticGraph&&J.state.simulation.restart()});J.props.id||(0,D.throwErr)(J.constructor.name,y["default"].GRAPH_NO_ID_PROP);J.focusAnimationTimeout=null;J.nodeClickTimer=null;J.isDraggingNode=!1;J.state=(0,z.initializeGraphState)(J.props,J.state);return J}h(B,u);e(B,[{key:"_graphLinkForceConfig",
value:function(){var I=(0,p.forceLink)(this.state.d3Links).id(function(J){return J.id}).distance(this.state.config.d3.linkLength).strength(this.state.config.d3.linkStrength);this.state.simulation.force(w["default"].LINK_CLASS_NAME,I)}},{key:"_graphNodeDragConfig",value:function(){var I=(0,d.drag)().on("start",this._onDragStart).on("drag",this._onDragMove).on("end",this._onDragEnd);(0,r.select)("#".concat(this.state.id,"-").concat(w["default"].GRAPH_WRAPPER_ID)).selectAll(".node").call(I)}},{key:"_graphBindD3ToReactComponent",
value:function(){this.state.config.d3.disableLinkForce||(this.state.simulation.nodes(this.state.d3Nodes).on("tick",this._tick),this._graphLinkForceConfig());this._graphNodeDragConfig()}}]);e(B,[{key:"UNSAFE_componentWillReceiveProps",value:function(I){var J=(0,z.checkForGraphElementsChanges)(I,this.state),N=J.newGraphElements;J=J.graphElementsUpdated?(0,z.initializeGraphState)(I,this.state):this.state;var M=I.config||{},E=(0,z.checkForGraphConfigChanges)(I,this.state),L=E.configUpdated;E=E.d3ConfigUpdated;
var Q=L?(0,D.merge)(x["default"],M):this.state.config;N&&this.pauseSimulation();M=M.panAndZoom!==this.state.config.panAndZoom?1:this.state.transform;var S=I.data.focusedNodeId,R=this.state.d3Nodes.find(function(O){return"".concat(O.id)==="".concat(S)});R=(0,z.getCenterAndZoomTransformation)(R,this.state.config);this.setState(n({},J,{config:Q,configUpdated:L,d3ConfigUpdated:E,newGraphElements:N,transform:M,focusedNodeId:S,enableFocusAnimation:this.props.data.focusedNodeId!==I.data.focusedNodeId,focusTransformation:R}))}},
{key:"componentDidUpdate",value:function(){(this.state.config.staticGraph||this.state.config.staticGraphWithDragAndDrop)&&this.pauseSimulation();this.state.config.staticGraph||!this.state.newGraphElements&&!this.state.d3ConfigUpdated?this.state.configUpdated&&this._graphNodeDragConfig():(this._graphBindD3ToReactComponent(),this.state.config.staticGraphWithDragAndDrop||this.restartSimulation(),this.setState({newGraphElements:!1,d3ConfigUpdated:!1}));this.state.configUpdated&&(this._zoomConfig(),this.setState({configUpdated:!1}))}},
{key:"componentDidMount",value:function(){this.state.config.staticGraph||this._graphBindD3ToReactComponent();this._zoomConfig()}},{key:"componentWillUnmount",value:function(){this.pauseSimulation();this.nodeClickTimer&&(clearTimeout(this.nodeClickTimer),this.nodeClickTimer=null);this.focusAnimationTimeout&&(clearTimeout(this.focusAnimationTimeout),this.focusAnimationTimeout=null)}},{key:"render",value:function(){var I=(0,F.renderGraph)(this.state.nodes,{onClickNode:this.onClickNode,onDoubleClickNode:this.onDoubleClickNode,
onRightClickNode:this.props.onRightClickNode,onMouseOverNode:this.onMouseOverNode,onMouseOut:this.onMouseOutNode},this.state.d3Links,this.state.links,{onClickLink:this.props.onClickLink,onRightClickLink:this.props.onRightClickLink,onMouseOverLink:this.onMouseOverLink,onMouseOutLink:this.onMouseOutLink},this.state.config,this.state.highlightedNode,this.state.highlightedLink,this.state.transform),J=I.nodes,N=I.links;I=I.defs;var M={height:this.state.config.height,width:this.state.config.width},E=this._generateFocusAnimationProps();
return g["default"].createElement("div",{id:"".concat(this.state.id,"-").concat(w["default"].GRAPH_WRAPPER_ID)},g["default"].createElement("svg",{name:"svg-container-".concat(this.state.id),style:M,onClick:this.onClickGraph},I,g["default"].createElement("g",C({id:"".concat(this.state.id,"-").concat(w["default"].GRAPH_CONTAINER_ID)},E),N,J)))}}]);return B}(g["default"].Component);U["default"]=la};
shadow$provide[568]=function(la,K,na,U){function a(n){return n&&n.__esModule?n:{"default":n}}Object.defineProperty(U,"__esModule",{value:!0});Object.defineProperty(U,"Graph",{enumerable:!0,get:function(){return G["default"]}});Object.defineProperty(U,"Node",{enumerable:!0,get:function(){return C["default"]}});Object.defineProperty(U,"Link",{enumerable:!0,get:function(){return q["default"]}});var G=a(K(567)),C=a(K(560)),q=a(K(557))};
shadow$provide[569]=function(la,K,na,U){function a(){if("function"!==typeof WeakMap)return null;var p=new WeakMap;a=function(){return p};return p}function G(p){"@babel/helpers - typeof";G="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(r){return typeof r}:function(r){return r&&"function"===typeof Symbol&&r.constructor===Symbol&&r!==Symbol.prototype?"symbol":typeof r};return G(p)}function C(p,r){for(var t=0;t<r.length;t++){var w=r[t];w.enumerable=w.enumerable||!1;w.configurable=
!0;"value"in w&&(w.writable=!0);Object.defineProperty(p,w.key,w)}}function q(p,r,t){r&&C(p.prototype,r);t&&C(p,t);return p}function n(p,r){if("function"!==typeof r&&null!==r)throw new TypeError("Super expression must either be null or a function");p.prototype=Object.create(r&&r.prototype,{constructor:{value:p,writable:!0,configurable:!0}});r&&m(p,r)}function m(p,r){m=Object.setPrototypeOf||function(t,w){t.__proto__=w;return t};return m(p,r)}function f(p){var r=k();return function(){var t=e(p);if(r){var w=
e(this).constructor;t=Reflect.construct(t,arguments,w)}else t=t.apply(this,arguments);t=!t||"object"!==G(t)&&"function"!==typeof t?b(this):t;return t}}function b(p){if(void 0===p)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return p}function k(){if("undefined"===typeof Reflect||!Reflect.construct||Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(p){return!1}}
function e(p){e=Object.setPrototypeOf?Object.getPrototypeOf:function(r){return r.__proto__||Object.getPrototypeOf(r)};return e(p)}Object.defineProperty(U,"__esModule",{value:!0});U["default"]=function(p){var r=function(t){function w(y){if(!(this instanceof w))throw new TypeError("Cannot call a class as a function");y=x.call(this,y);y.p=Promise.resolve();y.resizeHandler=null;y.handlers={};y.syncWindowResize=y.syncWindowResize.bind(b(y));y.syncEventHandlers=y.syncEventHandlers.bind(b(y));y.attachUpdateEvents=
y.attachUpdateEvents.bind(b(y));y.getRef=y.getRef.bind(b(y));y.handleUpdate=y.handleUpdate.bind(b(y));y.figureCallback=y.figureCallback.bind(b(y));y.updatePlotly=y.updatePlotly.bind(b(y));return y}n(w,t);var x=f(w);q(w,[{key:"updatePlotly",value:function(y,A,z){var F=this;this.p=this.p.then(function(){if(!F.unmounting){if(!F.el)throw Error("Missing element reference");return p.react(F.el,{data:F.props.data,layout:F.props.layout,config:F.props.config,frames:F.props.frames})}}).then(function(){F.unmounting||
(F.syncWindowResize(y),F.syncEventHandlers(),F.figureCallback(A),z&&F.attachUpdateEvents())})["catch"](function(D){if(F.props.onError)F.props.onError(D)})}},{key:"componentDidMount",value:function(){this.unmounting=!1;this.updatePlotly(!0,this.props.onInitialized,!0)}},{key:"componentDidUpdate",value:function(y){this.unmounting=!1;var A=y.frames&&y.frames.length?y.frames.length:0,z=this.props.frames&&this.props.frames.length?this.props.frames.length:0,F=void 0!==y.revision,D=y.revision!==this.props.revision;
(y.layout!==this.props.layout||y.data!==this.props.data||y.config!==this.props.config||z!==A||F&&(!F||D))&&this.updatePlotly(!1,this.props.onUpdate,!1)}},{key:"componentWillUnmount",value:function(){this.unmounting=!0;this.figureCallback(this.props.onPurge);this.resizeHandler&&d&&(window.removeEventListener("resize",this.resizeHandler),this.resizeHandler=null);this.removeUpdateEvents();p.purge(this.el)}},{key:"attachUpdateEvents",value:function(){var y=this;this.el&&this.el.removeListener&&g.forEach(function(A){y.el.on(A,
y.handleUpdate)})}},{key:"removeUpdateEvents",value:function(){var y=this;this.el&&this.el.removeListener&&g.forEach(function(A){y.el.removeListener(A,y.handleUpdate)})}},{key:"handleUpdate",value:function(){this.figureCallback(this.props.onUpdate)}},{key:"figureCallback",value:function(y){if("function"===typeof y){var A=this.el;y({data:A.data,layout:A.layout,frames:this.el._transitionData?this.el._transitionData._frames:null},this.el)}}},{key:"syncWindowResize",value:function(y){var A=this;d&&(this.props.useResizeHandler&&
!this.resizeHandler?(this.resizeHandler=function(){return p.Plots.resize(A.el)},window.addEventListener("resize",this.resizeHandler),y&&this.resizeHandler()):!this.props.useResizeHandler&&this.resizeHandler&&(window.removeEventListener("resize",this.resizeHandler),this.resizeHandler=null))}},{key:"getRef",value:function(y){this.el=y;this.props.debug&&d&&(window.gd=this.el)}},{key:"syncEventHandlers",value:function(){var y=this;c.forEach(function(A){var z=y.props["on"+A],F=y.handlers[A],D=!!F;z&&!D?
y.addEventHandler(A,z):!z&&D?y.removeEventHandler(A):z&&D&&z!==F&&(y.removeEventHandler(A),y.addEventHandler(A,z))})}},{key:"addEventHandler",value:function(y,A){this.handlers[y]=A;this.el.on(this.getPlotlyEventName(y),this.handlers[y])}},{key:"removeEventHandler",value:function(y){this.el.removeListener(this.getPlotlyEventName(y),this.handlers[y]);delete this.handlers[y]}},{key:"getPlotlyEventName",value:function(y){return"plotly_"+y.toLowerCase()}},{key:"render",value:function(){return h["default"].createElement("div",
{id:this.props.divId,style:this.props.style,ref:this.getRef,className:this.props.className})}}]);return w}(h.Component);r.propTypes={data:l["default"].arrayOf(l["default"].object),config:l["default"].object,layout:l["default"].object,frames:l["default"].arrayOf(l["default"].object),revision:l["default"].number,onInitialized:l["default"].func,onPurge:l["default"].func,onError:l["default"].func,onUpdate:l["default"].func,debug:l["default"].bool,style:l["default"].object,className:l["default"].string,
useResizeHandler:l["default"].bool,divId:l["default"].string};c.forEach(function(t){r.propTypes["on"+t]=l["default"].func});r.defaultProps={debug:!1,useResizeHandler:!1,data:[],style:{position:"relative",display:"inline-block"}};return r};var h=function(p){if(p&&p.__esModule)return p;if(null===p||"object"!==G(p)&&"function"!==typeof p)return{"default":p};var r=a();if(r&&r.has(p))return r.get(p);var t={},w=Object.defineProperty&&Object.getOwnPropertyDescriptor,x;for(x in p)if(Object.prototype.hasOwnProperty.call(p,
x)){var y=w?Object.getOwnPropertyDescriptor(p,x):null;y&&(y.get||y.set)?Object.defineProperty(t,x,y):t[x]=p[x]}t["default"]=p;r&&r.set(p,t);return t}(K(5)),l=function(p){return p&&p.__esModule?p:{"default":p}}(K(47)),c="AfterExport AfterPlot Animated AnimatingFrame AnimationInterrupted AutoSize BeforeExport ButtonClicked Click ClickAnnotation Deselect DoubleClick Framework Hover LegendClick LegendDoubleClick Relayout Relayouting Restyle Redraw Selected Selecting SliderChange SliderEnd SliderStart SunburstClick Transitioning TransitionInterrupted Unhover".split(" "),
g="plotly_restyle plotly_redraw plotly_relayout plotly_relayouting plotly_doubleclick plotly_animated plotly_sunburstclick".split(" "),d="undefined"!==typeof window};
shadow$provide[570]=function(la,K,na,U){(function(a){"object"===typeof U&&"undefined"!==typeof na?na.exports=a():"function"===typeof define&&define.amd?define([],a):("undefined"!==typeof window?window:"undefined"!==typeof la?la:"undefined"!==typeof self?self:this).Plotly=a()})(function(){return function(){function a(G,C,q){function n(b,k){if(!C[b]){if(!G[b]){var e="function"==typeof K&&K;if(!k&&e)return e(b,!0);if(m)return m(b,!0);k=Error("Cannot find module '"+b+"'");throw k.code="MODULE_NOT_FOUND",
k;}k=C[b]={exports:{}};G[b][0].call(k.exports,function(h){return n(G[b][1][h]||h)},k,k.exports,a,G,C,q)}return C[b].exports}for(var m="function"==typeof K&&K,f=0;f<q.length;f++)n(q[f]);return n}return a}()({1:[function(a,G,C){a=a("../src/lib");G={"X,X div":"direction:ltr;font-family:'Open Sans', verdana, arial, sans-serif;margin:0;padding:0;","X input,X button":"font-family:'Open Sans', verdana, arial, sans-serif;","X input:focus,X button:focus":"outline:none;","X a":"text-decoration:none;","X a:hover":"text-decoration:none;",
"X .crisp":"shape-rendering:crispEdges;","X .user-select-none":"-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;-o-user-select:none;user-select:none;","X svg":"overflow:hidden;","X svg a":"fill:#447adb;","X svg a:hover":"fill:#3c6dc5;","X .main-svg":"position:absolute;top:0;left:0;pointer-events:none;","X .main-svg .draglayer":"pointer-events:all;","X .cursor-default":"cursor:default;","X .cursor-pointer":"cursor:pointer;","X .cursor-crosshair":"cursor:crosshair;","X .cursor-move":"cursor:move;",
"X .cursor-col-resize":"cursor:col-resize;","X .cursor-row-resize":"cursor:row-resize;","X .cursor-ns-resize":"cursor:ns-resize;","X .cursor-ew-resize":"cursor:ew-resize;","X .cursor-sw-resize":"cursor:sw-resize;","X .cursor-s-resize":"cursor:s-resize;","X .cursor-se-resize":"cursor:se-resize;","X .cursor-w-resize":"cursor:w-resize;","X .cursor-e-resize":"cursor:e-resize;","X .cursor-nw-resize":"cursor:nw-resize;","X .cursor-n-resize":"cursor:n-resize;","X .cursor-ne-resize":"cursor:ne-resize;","X .cursor-grab":"cursor:-webkit-grab;cursor:grab;",
"X .modebar":"position:absolute;top:2px;right:2px;","X .ease-bg":"-webkit-transition:background-color 0.3s ease 0s;-moz-transition:background-color 0.3s ease 0s;-ms-transition:background-color 0.3s ease 0s;-o-transition:background-color 0.3s ease 0s;transition:background-color 0.3s ease 0s;","X .modebar--hover\x3e:not(.watermark)":"opacity:0;-webkit-transition:opacity 0.3s ease 0s;-moz-transition:opacity 0.3s ease 0s;-ms-transition:opacity 0.3s ease 0s;-o-transition:opacity 0.3s ease 0s;transition:opacity 0.3s ease 0s;",
"X:hover .modebar--hover .modebar-group":"opacity:1;","X .modebar-group":"float:left;display:inline-block;box-sizing:border-box;padding-left:8px;position:relative;vertical-align:middle;white-space:nowrap;","X .modebar-btn":"position:relative;font-size:16px;padding:3px 4px;height:22px;cursor:pointer;line-height:normal;box-sizing:border-box;","X .modebar-btn svg":"position:relative;top:2px;","X .modebar.vertical":"display:flex;flex-direction:column;flex-wrap:wrap;align-content:flex-end;max-height:100%;",
"X .modebar.vertical svg":"top:-1px;","X .modebar.vertical .modebar-group":"display:block;float:none;padding-left:0px;padding-bottom:8px;","X .modebar.vertical .modebar-group .modebar-btn":"display:block;text-align:center;","X [data-title]:before,X [data-title]:after":"position:absolute;-webkit-transform:translate3d(0, 0, 0);-moz-transform:translate3d(0, 0, 0);-ms-transform:translate3d(0, 0, 0);-o-transform:translate3d(0, 0, 0);transform:translate3d(0, 0, 0);display:none;opacity:0;z-index:1001;pointer-events:none;top:110%;right:50%;",
"X [data-title]:hover:before,X [data-title]:hover:after":"display:block;opacity:1;","X [data-title]:before":"content:'';position:absolute;background:transparent;border:6px solid transparent;z-index:1002;margin-top:-12px;border-bottom-color:#69738a;margin-right:-6px;","X [data-title]:after":"content:attr(data-title);background:#69738a;color:white;padding:8px 10px;font-size:12px;line-height:12px;white-space:nowrap;margin-right:-18px;border-radius:2px;","X .vertical [data-title]:before,X .vertical [data-title]:after":"top:0%;right:200%;",
"X .vertical [data-title]:before":"border:6px solid transparent;border-left-color:#69738a;margin-top:8px;margin-right:-30px;","X .select-outline":"fill:none;stroke-width:1;shape-rendering:crispEdges;","X .select-outline-1":"stroke:white;","X .select-outline-2":"stroke:black;stroke-dasharray:2px 2px;",Y:"font-family:'Open Sans', verdana, arial, sans-serif;position:fixed;top:50px;right:20px;z-index:10000;font-size:10pt;max-width:180px;","Y p":"margin:0;","Y .notifier-note":"min-width:180px;max-width:250px;border:1px solid #fff;z-index:3000;margin:0;background-color:#8c97af;background-color:rgba(140,151,175,0.9);color:#fff;padding:10px;overflow-wrap:break-word;word-wrap:break-word;-ms-hyphens:auto;-webkit-hyphens:auto;hyphens:auto;",
"Y .notifier-close":"color:#fff;opacity:0.8;float:right;padding:0 5px;background:none;border:none;font-size:20px;font-weight:bold;line-height:20px;","Y .notifier-close:hover":"color:#444;text-decoration:none;cursor:pointer;"};for(var q in G)C=q.replace(/^,/," ,").replace(/X/g,".js-plotly-plot .plotly").replace(/Y/g,".plotly-notifier"),a.addStyleRule(C,G[q])},{"../src/lib":750}],2:[function(a,G,C){G.exports=a("../src/transforms/aggregate")},{"../src/transforms/aggregate":1336}],3:[function(a,G,C){G.exports=
a("../src/traces/bar")},{"../src/traces/bar":900}],4:[function(a,G,C){G.exports=a("../src/traces/barpolar")},{"../src/traces/barpolar":913}],5:[function(a,G,C){G.exports=a("../src/traces/box")},{"../src/traces/box":923}],6:[function(a,G,C){G.exports=a("../src/components/calendars")},{"../src/components/calendars":613}],7:[function(a,G,C){G.exports=a("../src/traces/candlestick")},{"../src/traces/candlestick":932}],8:[function(a,G,C){G.exports=a("../src/traces/carpet")},{"../src/traces/carpet":951}],
9:[function(a,G,C){G.exports=a("../src/traces/choropleth")},{"../src/traces/choropleth":965}],10:[function(a,G,C){G.exports=a("../src/traces/choroplethmapbox")},{"../src/traces/choroplethmapbox":972}],11:[function(a,G,C){G.exports=a("../src/traces/cone")},{"../src/traces/cone":978}],12:[function(a,G,C){G.exports=a("../src/traces/contour")},{"../src/traces/contour":993}],13:[function(a,G,C){G.exports=a("../src/traces/contourcarpet")},{"../src/traces/contourcarpet":1004}],14:[function(a,G,C){G.exports=
a("../src/core")},{"../src/core":727}],15:[function(a,G,C){G.exports=a("../src/traces/densitymapbox")},{"../src/traces/densitymapbox":1012}],16:[function(a,G,C){G.exports=a("../src/transforms/filter")},{"../src/transforms/filter":1337}],17:[function(a,G,C){G.exports=a("../src/traces/funnel")},{"../src/traces/funnel":1022}],18:[function(a,G,C){G.exports=a("../src/traces/funnelarea")},{"../src/traces/funnelarea":1031}],19:[function(a,G,C){G.exports=a("../src/transforms/groupby")},{"../src/transforms/groupby":1338}],
20:[function(a,G,C){G.exports=a("../src/traces/heatmap")},{"../src/traces/heatmap":1044}],21:[function(a,G,C){G.exports=a("../src/traces/heatmapgl")},{"../src/traces/heatmapgl":1054}],22:[function(a,G,C){G.exports=a("../src/traces/histogram")},{"../src/traces/histogram":1066}],23:[function(a,G,C){G.exports=a("../src/traces/histogram2d")},{"../src/traces/histogram2d":1072}],24:[function(a,G,C){G.exports=a("../src/traces/histogram2dcontour")},{"../src/traces/histogram2dcontour":1076}],25:[function(a,
G,C){G.exports=a("../src/traces/image")},{"../src/traces/image":1084}],26:[function(a,G,C){C=a("./core");C.register([a("./bar"),a("./box"),a("./heatmap"),a("./histogram"),a("./histogram2d"),a("./histogram2dcontour"),a("./contour"),a("./scatterternary"),a("./violin"),a("./funnel"),a("./waterfall"),a("./image"),a("./pie"),a("./sunburst"),a("./treemap"),a("./funnelarea"),a("./scatter3d"),a("./surface"),a("./isosurface"),a("./volume"),a("./mesh3d"),a("./cone"),a("./streamtube"),a("./scattergeo"),a("./choropleth"),
a("./scattergl"),a("./splom"),a("./pointcloud"),a("./heatmapgl"),a("./parcoords"),a("./parcats"),a("./scattermapbox"),a("./choroplethmapbox"),a("./densitymapbox"),a("./sankey"),a("./indicator"),a("./table"),a("./carpet"),a("./scattercarpet"),a("./contourcarpet"),a("./ohlc"),a("./candlestick"),a("./scatterpolar"),a("./scatterpolargl"),a("./barpolar")]);C.register([a("./aggregate"),a("./filter"),a("./groupby"),a("./sort")]);C.register([a("./calendars")]);G.exports=C},{"./aggregate":2,"./bar":3,"./barpolar":4,
"./box":5,"./calendars":6,"./candlestick":7,"./carpet":8,"./choropleth":9,"./choroplethmapbox":10,"./cone":11,"./contour":12,"./contourcarpet":13,"./core":14,"./densitymapbox":15,"./filter":16,"./funnel":17,"./funnelarea":18,"./groupby":19,"./heatmap":20,"./heatmapgl":21,"./histogram":22,"./histogram2d":23,"./histogram2dcontour":24,"./image":25,"./indicator":27,"./isosurface":28,"./mesh3d":29,"./ohlc":30,"./parcats":31,"./parcoords":32,"./pie":33,"./pointcloud":34,"./sankey":35,"./scatter3d":36,"./scattercarpet":37,
"./scattergeo":38,"./scattergl":39,"./scattermapbox":40,"./scatterpolar":41,"./scatterpolargl":42,"./scatterternary":43,"./sort":44,"./splom":45,"./streamtube":46,"./sunburst":47,"./surface":48,"./table":49,"./treemap":50,"./violin":51,"./volume":52,"./waterfall":53}],27:[function(a,G,C){G.exports=a("../src/traces/indicator")},{"../src/traces/indicator":1092}],28:[function(a,G,C){G.exports=a("../src/traces/isosurface")},{"../src/traces/isosurface":1098}],29:[function(a,G,C){G.exports=a("../src/traces/mesh3d")},
{"../src/traces/mesh3d":1103}],30:[function(a,G,C){G.exports=a("../src/traces/ohlc")},{"../src/traces/ohlc":1108}],31:[function(a,G,C){G.exports=a("../src/traces/parcats")},{"../src/traces/parcats":1117}],32:[function(a,G,C){G.exports=a("../src/traces/parcoords")},{"../src/traces/parcoords":1127}],33:[function(a,G,C){G.exports=a("../src/traces/pie")},{"../src/traces/pie":1138}],34:[function(a,G,C){G.exports=a("../src/traces/pointcloud")},{"../src/traces/pointcloud":1147}],35:[function(a,G,C){G.exports=
a("../src/traces/sankey")},{"../src/traces/sankey":1153}],36:[function(a,G,C){G.exports=a("../src/traces/scatter3d")},{"../src/traces/scatter3d":1191}],37:[function(a,G,C){G.exports=a("../src/traces/scattercarpet")},{"../src/traces/scattercarpet":1198}],38:[function(a,G,C){G.exports=a("../src/traces/scattergeo")},{"../src/traces/scattergeo":1206}],39:[function(a,G,C){G.exports=a("../src/traces/scattergl")},{"../src/traces/scattergl":1219}],40:[function(a,G,C){G.exports=a("../src/traces/scattermapbox")},
{"../src/traces/scattermapbox":1229}],41:[function(a,G,C){G.exports=a("../src/traces/scatterpolar")},{"../src/traces/scatterpolar":1237}],42:[function(a,G,C){G.exports=a("../src/traces/scatterpolargl")},{"../src/traces/scatterpolargl":1244}],43:[function(a,G,C){G.exports=a("../src/traces/scatterternary")},{"../src/traces/scatterternary":1252}],44:[function(a,G,C){G.exports=a("../src/transforms/sort")},{"../src/transforms/sort":1340}],45:[function(a,G,C){G.exports=a("../src/traces/splom")},{"../src/traces/splom":1261}],
46:[function(a,G,C){G.exports=a("../src/traces/streamtube")},{"../src/traces/streamtube":1269}],47:[function(a,G,C){G.exports=a("../src/traces/sunburst")},{"../src/traces/sunburst":1277}],48:[function(a,G,C){G.exports=a("../src/traces/surface")},{"../src/traces/surface":1286}],49:[function(a,G,C){G.exports=a("../src/traces/table")},{"../src/traces/table":1294}],50:[function(a,G,C){G.exports=a("../src/traces/treemap")},{"../src/traces/treemap":1303}],51:[function(a,G,C){G.exports=a("../src/traces/violin")},
{"../src/traces/violin":1315}],52:[function(a,G,C){G.exports=a("../src/traces/volume")},{"../src/traces/volume":1323}],53:[function(a,G,C){G.exports=a("../src/traces/waterfall")},{"../src/traces/waterfall":1331}],54:[function(a,G,C){function q(k,e){this._controllerNames=Object.keys(k);this._controllerList=this._controllerNames.map(function(h){return k[h]});this._mode=e;this._active=k[e];this._active||(this._mode="turntable",this._active=k.turntable);this.modes=this._controllerNames;this.computedMatrix=
this._active.computedMatrix;this.computedEye=this._active.computedEye;this.computedUp=this._active.computedUp;this.computedCenter=this._active.computedCenter;this.computedRadius=this._active.computedRadius}G.exports=function(k){k=k||{};var e=k.eye||[0,0,1],h=k.center||[0,0,0],l=k.up||[0,1,0],c=k.distanceLimits||[0,Infinity];k=k.mode||"turntable";var g=n(),d=m(),p=f();g.setDistanceLimits(c[0],c[1]);g.lookAt(0,e,h,l);d.setDistanceLimits(c[0],c[1]);d.lookAt(0,e,h,l);p.setDistanceLimits(c[0],c[1]);p.lookAt(0,
e,h,l);return new q({turntable:g,orbit:d,matrix:p},k)};var n=a("turntable-camera-controller"),m=a("orbit-camera-controller"),f=a("matrix-camera-controller"),b=q.prototype;[["flush",1],["idle",1],["lookAt",4],["rotate",4],["pan",4],["translate",4],["setMatrix",2],["setDistanceLimits",2],["setDistance",2]].forEach(function(k){for(var e=k[0],h=[],l=0;l<k[1];++l)h.push("a"+l);k="var cc\x3dthis._controllerList;for(var i\x3d0;i\x3ccc.length;++i){cc[i]."+k[0]+"("+h.join()+")}";b[e]=Function.apply(null,h.concat(k))});
b.recalcMatrix=function(k){this._active.recalcMatrix(k)};b.getDistance=function(k){return this._active.getDistance(k)};b.getDistanceLimits=function(k){return this._active.getDistanceLimits(k)};b.lastT=function(){return this._active.lastT()};b.setMode=function(k){if(k!==this._mode){var e=this._controllerNames.indexOf(k);if(!(0>e)){var h=this._active;e=this._controllerList[e];var l=Math.max(h.lastT(),e.lastT());h.recalcMatrix(l);e.setMatrix(l,h.computedMatrix);this._active=e;this._mode=k;this.computedMatrix=
this._active.computedMatrix;this.computedEye=this._active.computedEye;this.computedUp=this._active.computedUp;this.computedCenter=this._active.computedCenter;this.computedRadius=this._active.computedRadius}}};b.getMode=function(){return this._mode}},{"matrix-camera-controller":454,"orbit-camera-controller":475,"turntable-camera-controller":553}],55:[function(a,G,C){(function(q,n){"object"===typeof C&&"undefined"!==typeof G?n(C,a("d3-array"),a("d3-collection"),a("d3-shape"),a("elementary-circuits-directed-graph")):
n(q.d3=q.d3||{},q.d3,q.d3,q.d3,null)})(this,function(q,n,m,f,b){function k(sa){return sa.target.depth}function e(sa,ma){return sa.sourceLinks.length?sa.depth:ma-1}function h(sa){return function(){return sa}}function l(sa,ma){return g(sa.source,ma.source)||sa.index-ma.index}function c(sa,ma){return g(sa.target,ma.target)||sa.index-ma.index}function g(sa,ma){return sa.partOfCycle===ma.partOfCycle?sa.y0-ma.y0:"top"===sa.circularLinkType||"bottom"===ma.circularLinkType?-1:1}function d(sa){return sa.value}
function p(sa){return(sa.y0+sa.y1)/2}function r(sa){return p(sa.source)}function t(sa){return p(sa.target)}function w(sa){return sa.index}function x(sa){return sa.nodes}function y(sa){return sa.links}function A(sa,ma){sa=sa.get(ma);if(!sa)throw Error("missing: "+ma);return sa}function z(sa,ma,ra){var qa=0;if(null===ra){var Y=[];for(ma=0;ma<sa.links.length;ma++){var pa=sa.links[ma],oa=pa.source.index;pa=pa.target.index;Y[oa]||(Y[oa]=[]);Y[pa]||(Y[pa]=[]);-1===Y[oa].indexOf(pa)&&Y[oa].push(pa)}Y=b(Y);
Y.sort(function(ya,ja){return ya.length-ja.length});var ua={};for(ma=0;ma<Y.length;ma++)oa=Y[ma].slice(-2),ua[oa[0]]||(ua[oa[0]]={}),ua[oa[0]][oa[1]]=!0;sa.links.forEach(function(ya){var ja=ya.target.index,za=ya.source.index;ja===za||ua[za]&&ua[za][ja]?(ya.circular=!0,ya.circularLinkID=qa,qa+=1):ya.circular=!1})}else sa.links.forEach(function(ya){ya.source[ra]<ya.target[ra]?ya.circular=!1:(ya.circular=!0,ya.circularLinkID=qa,qa+=1)})}function F(sa,ma){var ra=0,qa=0;sa.links.forEach(function(Y){Y.circular&&
(Y.circularLinkType=Y.source.circularLinkType||Y.target.circularLinkType?Y.source.circularLinkType?Y.source.circularLinkType:Y.target.circularLinkType:ra<qa?"top":"bottom","top"==Y.circularLinkType?ra+=1:qa+=1,sa.nodes.forEach(function(pa){if(ma(pa)==ma(Y.source)||ma(pa)==ma(Y.target))pa.circularLinkType=Y.circularLinkType}))});sa.links.forEach(function(Y){Y.circular&&(Y.source.circularLinkType==Y.target.circularLinkType&&(Y.circularLinkType=Y.source.circularLinkType),ka(Y,ma)&&(Y.circularLinkType=
Y.source.circularLinkType))})}function D(sa){return Math.atan(Math.abs(sa.target.x0-sa.source.x1)/Math.abs(sa.y1-sa.y0))}function u(sa,ma){var ra=0;sa.sourceLinks.forEach(function(Y){ra=Y.circular&&!ka(Y,ma)?ra+1:ra});var qa=0;sa.targetLinks.forEach(function(Y){qa=Y.circular&&!ka(Y,ma)?qa+1:qa});return ra+qa}function B(sa){var ma=0;sa.source.sourceLinks.forEach(function(qa){ma=qa.circular?ma+1:ma});var ra=0;sa.target.targetLinks.forEach(function(qa){ra=qa.circular?ra+1:ra});return 1<ma||1<ra?!1:!0}
function I(sa,ma,ra){sa.sort(N);sa.forEach(function(qa,Y){var pa=0;if(!ka(qa,ra)||!B(qa)){var oa=0;for(oa;oa<Y;oa++){var ua=sa[Y];var ya=sa[oa];ua=ua.source.column<ya.target.column?!1:ua.target.column>ya.source.column?!1:!0;ua&&(ua=sa[oa].circularPathData.verticalBuffer+sa[oa].width/2+ma,pa=ua>pa?ua:pa)}}qa.circularPathData.verticalBuffer=pa+qa.width/2});return sa}function J(sa,ma,ra,qa){var Y=n.min(sa.links,function(oa){return oa.source.y0});sa.links.forEach(function(oa){oa.circular&&(oa.circularPathData=
{})});var pa=sa.links.filter(function(oa){return"top"==oa.circularLinkType});I(pa,ma,qa);pa=sa.links.filter(function(oa){return"bottom"==oa.circularLinkType});I(pa,ma,qa);sa.links.forEach(function(oa){if(oa.circular){oa.circularPathData.arcRadius=oa.width+10;oa.circularPathData.leftNodeBuffer=5;oa.circularPathData.rightNodeBuffer=5;oa.circularPathData.sourceWidth=oa.source.x1-oa.source.x0;oa.circularPathData.sourceX=oa.source.x0+oa.circularPathData.sourceWidth;oa.circularPathData.targetX=oa.target.x0;
oa.circularPathData.sourceY=oa.y0;oa.circularPathData.targetY=oa.y1;if(ka(oa,qa)&&B(oa))oa.circularPathData.leftSmallArcRadius=10+oa.width/2,oa.circularPathData.leftLargeArcRadius=10+oa.width/2,oa.circularPathData.rightSmallArcRadius=10+oa.width/2,oa.circularPathData.rightLargeArcRadius=10+oa.width/2,"bottom"==oa.circularLinkType?(oa.circularPathData.verticalFullExtent=oa.source.y1+25+oa.circularPathData.verticalBuffer,oa.circularPathData.verticalLeftInnerExtent=oa.circularPathData.verticalFullExtent-
oa.circularPathData.leftLargeArcRadius,oa.circularPathData.verticalRightInnerExtent=oa.circularPathData.verticalFullExtent-oa.circularPathData.rightLargeArcRadius):(oa.circularPathData.verticalFullExtent=oa.source.y0-25-oa.circularPathData.verticalBuffer,oa.circularPathData.verticalLeftInnerExtent=oa.circularPathData.verticalFullExtent+oa.circularPathData.leftLargeArcRadius,oa.circularPathData.verticalRightInnerExtent=oa.circularPathData.verticalFullExtent+oa.circularPathData.rightLargeArcRadius);
else{var ua=oa.source.column,ya=oa.circularLinkType,ja=sa.links.filter(function(Ba){return Ba.source.column==ua&&Ba.circularLinkType==ya});"bottom"==oa.circularLinkType?ja.sort(E):ja.sort(M);var za=0;ja.forEach(function(Ba,Ma){Ba.circularLinkID==oa.circularLinkID&&(oa.circularPathData.leftSmallArcRadius=10+oa.width/2+za,oa.circularPathData.leftLargeArcRadius=10+oa.width/2+Ma*ma+za);za+=Ba.width});ua=oa.target.column;ja=sa.links.filter(function(Ba){return Ba.target.column==ua&&Ba.circularLinkType==
ya});"bottom"==oa.circularLinkType?ja.sort(Q):ja.sort(L);za=0;ja.forEach(function(Ba,Ma){Ba.circularLinkID==oa.circularLinkID&&(oa.circularPathData.rightSmallArcRadius=10+oa.width/2+za,oa.circularPathData.rightLargeArcRadius=10+oa.width/2+Ma*ma+za);za+=Ba.width});"bottom"==oa.circularLinkType?(oa.circularPathData.verticalFullExtent=Math.max(ra,oa.source.y1,oa.target.y1)+25+oa.circularPathData.verticalBuffer,oa.circularPathData.verticalLeftInnerExtent=oa.circularPathData.verticalFullExtent-oa.circularPathData.leftLargeArcRadius,
oa.circularPathData.verticalRightInnerExtent=oa.circularPathData.verticalFullExtent-oa.circularPathData.rightLargeArcRadius):(oa.circularPathData.verticalFullExtent=Y-25-oa.circularPathData.verticalBuffer,oa.circularPathData.verticalLeftInnerExtent=oa.circularPathData.verticalFullExtent+oa.circularPathData.leftLargeArcRadius,oa.circularPathData.verticalRightInnerExtent=oa.circularPathData.verticalFullExtent+oa.circularPathData.rightLargeArcRadius)}oa.circularPathData.leftInnerExtent=oa.circularPathData.sourceX+
oa.circularPathData.leftNodeBuffer;oa.circularPathData.rightInnerExtent=oa.circularPathData.targetX-oa.circularPathData.rightNodeBuffer;oa.circularPathData.leftFullExtent=oa.circularPathData.sourceX+oa.circularPathData.leftLargeArcRadius+oa.circularPathData.leftNodeBuffer;oa.circularPathData.rightFullExtent=oa.circularPathData.targetX-oa.circularPathData.rightLargeArcRadius-oa.circularPathData.rightNodeBuffer}oa.circular?oa.path="top"==oa.circularLinkType?"M"+oa.circularPathData.sourceX+" "+oa.circularPathData.sourceY+
" L"+oa.circularPathData.leftInnerExtent+" "+oa.circularPathData.sourceY+" A"+oa.circularPathData.leftLargeArcRadius+" "+oa.circularPathData.leftSmallArcRadius+" 0 0 0 "+oa.circularPathData.leftFullExtent+" "+(oa.circularPathData.sourceY-oa.circularPathData.leftSmallArcRadius)+" L"+oa.circularPathData.leftFullExtent+" "+oa.circularPathData.verticalLeftInnerExtent+" A"+oa.circularPathData.leftLargeArcRadius+" "+oa.circularPathData.leftLargeArcRadius+" 0 0 0 "+oa.circularPathData.leftInnerExtent+" "+
oa.circularPathData.verticalFullExtent+" L"+oa.circularPathData.rightInnerExtent+" "+oa.circularPathData.verticalFullExtent+" A"+oa.circularPathData.rightLargeArcRadius+" "+oa.circularPathData.rightLargeArcRadius+" 0 0 0 "+oa.circularPathData.rightFullExtent+" "+oa.circularPathData.verticalRightInnerExtent+" L"+oa.circularPathData.rightFullExtent+" "+(oa.circularPathData.targetY-oa.circularPathData.rightSmallArcRadius)+" A"+oa.circularPathData.rightLargeArcRadius+" "+oa.circularPathData.rightSmallArcRadius+
" 0 0 0 "+oa.circularPathData.rightInnerExtent+" "+oa.circularPathData.targetY+" L"+oa.circularPathData.targetX+" "+oa.circularPathData.targetY:"M"+oa.circularPathData.sourceX+" "+oa.circularPathData.sourceY+" L"+oa.circularPathData.leftInnerExtent+" "+oa.circularPathData.sourceY+" A"+oa.circularPathData.leftLargeArcRadius+" "+oa.circularPathData.leftSmallArcRadius+" 0 0 1 "+oa.circularPathData.leftFullExtent+" "+(oa.circularPathData.sourceY+oa.circularPathData.leftSmallArcRadius)+" L"+oa.circularPathData.leftFullExtent+
" "+oa.circularPathData.verticalLeftInnerExtent+" A"+oa.circularPathData.leftLargeArcRadius+" "+oa.circularPathData.leftLargeArcRadius+" 0 0 1 "+oa.circularPathData.leftInnerExtent+" "+oa.circularPathData.verticalFullExtent+" L"+oa.circularPathData.rightInnerExtent+" "+oa.circularPathData.verticalFullExtent+" A"+oa.circularPathData.rightLargeArcRadius+" "+oa.circularPathData.rightLargeArcRadius+" 0 0 1 "+oa.circularPathData.rightFullExtent+" "+oa.circularPathData.verticalRightInnerExtent+" L"+oa.circularPathData.rightFullExtent+
" "+(oa.circularPathData.targetY+oa.circularPathData.rightSmallArcRadius)+" A"+oa.circularPathData.rightLargeArcRadius+" "+oa.circularPathData.rightSmallArcRadius+" 0 0 1 "+oa.circularPathData.rightInnerExtent+" "+oa.circularPathData.targetY+" L"+oa.circularPathData.targetX+" "+oa.circularPathData.targetY:(ja=f.linkHorizontal().source(function(Ba){return[Ba.source.x0+(Ba.source.x1-Ba.source.x0),Ba.y0]}).target(function(Ba){return[Ba.target.x0,Ba.y1]}),oa.path=ja(oa))})}function N(sa,ma){return S(sa)==
S(ma)?"bottom"==sa.circularLinkType?E(sa,ma):M(sa,ma):S(ma)-S(sa)}function M(sa,ma){return sa.y0-ma.y0}function E(sa,ma){return ma.y0-sa.y0}function L(sa,ma){return sa.y1-ma.y1}function Q(sa,ma){return ma.y1-sa.y1}function S(sa){return sa.target.column-sa.source.column}function R(sa,ma){var ra=D(sa);ma=(ma.target.x0-ma.source.x1)/Math.tan(ra);return"up"==aa(sa)?sa.y1+ma:sa.y1-ma}function O(sa,ma){var ra=D(sa);ma=(ma.target.x0-ma.source.x1)/Math.tan(ra);return"up"==aa(sa)?sa.y1-ma:sa.y1+ma}function T(sa,
ma,ra,qa){sa.links.forEach(function(Y){if(!Y.circular&&1<Y.target.column-Y.source.column){var pa=Y.source.column+1,oa=Y.target.column-1,ua=1,ya=oa-pa+1;for(ua=1;pa<=oa;pa++,ua++)sa.nodes.forEach(function(ja){if(ja.column==pa){var za=ua/(ya+1),Ba=Math.pow(1-za,3)*Y.y0+3*za*Math.pow(1-za,2)*Y.y0+3*Math.pow(za,2)*(1-za)*Y.y1+Math.pow(za,3)*Y.y1;za=Ba-Y.width/2;Ba+=Y.width/2;if(za>ja.y0&&za<ja.y1){var Ma=ja.y1-za+10;Ma="bottom"==ja.circularLinkType?Ma:-Ma;ja=V(ja,Ma,ma,ra);sa.nodes.forEach(function(Oa){qa(Oa)!=
qa(ja)&&Oa.column==ja.column&&(ja.y0>Oa.y0&&ja.y0<Oa.y1||ja.y1>Oa.y0&&ja.y1<Oa.y1||ja.y0<Oa.y0&&ja.y1>Oa.y1)&&V(Oa,Ma,ma,ra)})}else Ba>ja.y0&&Ba<ja.y1?(Ma=Ba-ja.y0+10,ja=V(ja,Ma,ma,ra),sa.nodes.forEach(function(Oa){qa(Oa)!=qa(ja)&&Oa.column==ja.column&&Oa.y0<ja.y1&&Oa.y1>ja.y1&&V(Oa,Ma,ma,ra)})):za<ja.y0&&Ba>ja.y1&&(Ma=Ba-ja.y0+10,ja=V(ja,Ma,ma,ra),sa.nodes.forEach(function(Oa){qa(Oa)!=qa(ja)&&Oa.column==ja.column&&Oa.y0<ja.y1&&Oa.y1>ja.y1&&V(Oa,Ma,ma,ra)}))}})}})}function V(sa,ma,ra,qa){sa.y0+ma>=
ra&&sa.y1+ma<=qa&&(sa.y0+=ma,sa.y1+=ma,sa.targetLinks.forEach(function(Y){Y.y1+=ma}),sa.sourceLinks.forEach(function(Y){Y.y0+=ma}));return sa}function X(sa,ma,ra,qa){sa.nodes.forEach(function(Y){qa&&Y.y+(Y.y1-Y.y0)>ma&&(Y.y-=Y.y+(Y.y1-Y.y0)-ma);var pa=sa.links.filter(function(ya){return ra(ya.source)==ra(Y)}),oa=pa.length;1<oa&&pa.sort(function(ya,ja){if(!ya.circular&&!ja.circular)if(ya.target.column!=ja.target.column&&aa(ya)==aa(ja)){if(ya.target.column>ja.target.column)return ja=O(ja,ya),ya.y1-
ja;if(ja.target.column>ya.target.column)return O(ya,ja)-ja.y1}else return ya.y1-ja.y1;if(ya.circular&&!ja.circular)return"top"==ya.circularLinkType?-1:1;if(ja.circular&&!ya.circular)return"top"==ja.circularLinkType?1:-1;if(ya.circular&&ja.circular)return ya.circularLinkType===ja.circularLinkType&&"top"==ya.circularLinkType?ya.target.column===ja.target.column?ya.target.y1-ja.target.y1:ja.target.column-ya.target.column:ya.circularLinkType===ja.circularLinkType&&"bottom"==ya.circularLinkType?ya.target.column===
ja.target.column?ja.target.y1-ya.target.y1:ya.target.column-ja.target.column:"top"==ya.circularLinkType?-1:1});var ua=Y.y0;pa.forEach(function(ya){ya.y0=ua+ya.width/2;ua+=ya.width});pa.forEach(function(ya,ja){if("bottom"==ya.circularLinkType){ja+=1;var za=0;for(ja;ja<oa;ja++)za+=pa[ja].width;ya.y0=Y.y1-za-ya.width/2}})})}function ba(sa,ma,ra){sa.nodes.forEach(function(qa){var Y=sa.links.filter(function(ua){return ra(ua.target)==ra(qa)}),pa=Y.length;1<pa&&Y.sort(function(ua,ya){if(!ua.circular&&!ya.circular)if(ua.source.column!=
ya.source.column&&aa(ua)==aa(ya)){if(ya.source.column<ua.source.column)return ya=R(ya,ua),ua.y0-ya;if(ua.source.column<ya.source.column)return R(ua,ya)-ya.y0}else return ua.y0-ya.y0;if(ua.circular&&!ya.circular)return"top"==ua.circularLinkType?-1:1;if(ya.circular&&!ua.circular)return"top"==ya.circularLinkType?1:-1;if(ua.circular&&ya.circular)return ua.circularLinkType===ya.circularLinkType&&"top"==ua.circularLinkType?ua.source.column===ya.source.column?ua.source.y1-ya.source.y1:ua.source.column-ya.source.column:
ua.circularLinkType===ya.circularLinkType&&"bottom"==ua.circularLinkType?ua.source.column===ya.source.column?ua.source.y1-ya.source.y1:ya.source.column-ua.source.column:"top"==ua.circularLinkType?-1:1});var oa=qa.y0;Y.forEach(function(ua){ua.y1=oa+ua.width/2;oa+=ua.width});Y.forEach(function(ua,ya){if("bottom"==ua.circularLinkType){ya+=1;var ja=0;for(ya;ya<pa;ya++)ja+=Y[ya].width;ua.y1=qa.y1-ja-ua.width/2}})})}function aa(sa){return 0<sa.y0-sa.y1?"up":"down"}function ka(sa,ma){return ma(sa.source)==
ma(sa.target)}function ha(sa,ma,ra){var qa=sa.nodes;sa=sa.links;var Y=!1,pa=!1;sa.forEach(function(ja){"top"==ja.circularLinkType?Y=!0:"bottom"==ja.circularLinkType&&(pa=!0)});if(0==Y||0==pa){var oa=n.min(qa,function(ja){return ja.y0}),ua=n.max(qa,function(ja){return ja.y1}),ya=(ra-ma)/(ua-oa);qa.forEach(function(ja){var za=(ja.y1-ja.y0)*ya;ja.y0=(ja.y0-oa)*ya;ja.y1=ja.y0+za});sa.forEach(function(ja){ja.y0=(ja.y0-oa)*ya;ja.y1=(ja.y1-oa)*ya;ja.width*=ya})}}b=b&&b.hasOwnProperty("default")?b["default"]:
b;var ca="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(sa){return typeof sa}:function(sa){return sa&&"function"===typeof Symbol&&sa.constructor===Symbol&&sa!==Symbol.prototype?"symbol":typeof sa};q.sankeyCircular=function(){function sa(){var Ua={nodes:Fa.apply(null,arguments),links:Na.apply(null,arguments)};ma(Ua);z(Ua,Ia,Ka);ra(Ua);pa(Ua);F(Ua,Ia);oa(Ua,$a,Ia);ua(Ua);for(var Ea=0;4>Ea;Ea++)X(Ua,Ba,Ia),ba(Ua,Ba,Ia),T(Ua,ja,Ba,Ia),X(Ua,Ba,Ia),ba(Ua,Ba,Ia);ha(Ua,ja,Ba);J(Ua,
cb,Ba,Ia);return Ua}function ma(Ua){Ua.nodes.forEach(function(Ya,ab){Ya.index=ab;Ya.sourceLinks=[];Ya.targetLinks=[]});var Ea=m.map(Ua.nodes,Ia);Ua.links.forEach(function(Ya,ab){Ya.index=ab;ab=Ya.source;var Wa=Ya.target;"object"!==("undefined"===typeof ab?"undefined":ca(ab))&&(ab=Ya.source=A(Ea,ab));"object"!==("undefined"===typeof Wa?"undefined":ca(Wa))&&(Wa=Ya.target=A(Ea,Wa));ab.sourceLinks.push(Ya);Wa.targetLinks.push(Ya)});return Ua}function ra(Ua){Ua.nodes.forEach(function(Ea){Ea.partOfCycle=
!1;Ea.value=Math.max(n.sum(Ea.sourceLinks,d),n.sum(Ea.targetLinks,d));Ea.sourceLinks.forEach(function(Ya){Ya.circular&&(Ea.partOfCycle=!0,Ea.circularLinkType=Ya.circularLinkType)});Ea.targetLinks.forEach(function(Ya){Ya.circular&&(Ea.partOfCycle=!0,Ea.circularLinkType=Ya.circularLinkType)})})}function qa(Ua){var Ea=0,Ya=0,ab=0,Wa=0,Ja=n.max(Ua.nodes,function(Sa){return Sa.column});Ua.links.forEach(function(Sa){Sa.circular&&("top"==Sa.circularLinkType?Ea+=Sa.width:Ya+=Sa.width,0==Sa.target.column&&
(Wa+=Sa.width),Sa.source.column==Ja&&(ab+=Sa.width))});Ea=0<Ea?Ea+25+10:Ea;Ya=0<Ya?Ya+25+10:Ya;ab=0<ab?ab+25+10:ab;Wa=0<Wa?Wa+25+10:Wa;return{top:Ea,bottom:Ya,left:Wa,right:ab}}function Y(Ua,Ea){var Ya=n.max(Ua.nodes,function(Ja){return Ja.column}),ab=za-ya,Wa=Ba-ja;ab/=ab+Ea.right+Ea.left;Wa/=Wa+Ea.top+Ea.bottom;ya=ya*ab+Ea.left;za=0==Ea.right?za:za*ab;ja=ja*Wa+Ea.top;Ba*=Wa;Ua.nodes.forEach(function(Ja){Ja.x0=ya+(za-ya-Ma)/Ya*Ja.column;Ja.x1=Ja.x0+Ma});return Wa}function pa(Ua){var Ea;var Ya=Ua.nodes;
var ab=[];for(Ea=0;Ya.length;++Ea,Ya=ab,ab=[])Ya.forEach(function(Wa){Wa.depth=Ea;Wa.sourceLinks.forEach(function(Ja){0>ab.indexOf(Ja.target)&&!Ja.circular&&ab.push(Ja.target)})});Ya=Ua.nodes;ab=[];for(Ea=0;Ya.length;++Ea,Ya=ab,ab=[])Ya.forEach(function(Wa){Wa.height=Ea;Wa.targetLinks.forEach(function(Ja){0>ab.indexOf(Ja.source)&&!Ja.circular&&ab.push(Ja.source)})});Ua.nodes.forEach(function(Wa){Wa.column=Math.floor(Pa.call(null,Wa,Ea))})}function oa(Ua,Ea,Ya){function ab(fb,nb){var Ha=Ja.length;
Ja.forEach(function(Ca){var Qa=Ca.length,gb=Ca[0].depth;Ca.forEach(function(Va){if((Va.sourceLinks.length||Va.targetLinks.length)&&!(Va.partOfCycle&&0<u(Va,nb)))if(0==gb&&1==Qa){var db=Va.y1-Va.y0;Va.y0=Ba/2-db/2;Va.y1=Ba/2+db/2}else if(gb==Ha-1&&1==Qa)db=Va.y1-Va.y0,Va.y0=Ba/2-db/2,Va.y1=Ba/2+db/2;else{db=n.mean(Va.sourceLinks,t);var qb=n.mean(Va.targetLinks,r);db=((db&&qb?(db+qb)/2:db||qb)-p(Va))*fb;Va.y0+=db;Va.y1+=db}})})}function Wa(){Ja.forEach(function(fb){var nb=ja,Ha=fb.length,Ca;fb.sort(g);
for(Ca=0;Ca<Ha;++Ca){var Qa=fb[Ca];var gb=nb-Qa.y0;0<gb&&(Qa.y0+=gb,Qa.y1+=gb);nb=Qa.y1+Oa}gb=nb-Oa-Ba;if(0<gb)for(nb=Qa.y0-=gb,Qa.y1-=gb,Ca=Ha-2;0<=Ca;--Ca)Qa=fb[Ca],gb=Qa.y1+Oa-nb,0<gb&&(Qa.y0-=gb,Qa.y1-=gb),nb=Qa.y0})}var Ja=m.nest().key(function(fb){return fb.column}).sortKeys(n.ascending).entries(Ua.nodes).map(function(fb){return fb.values});(function(fb){if(mb){var nb=Infinity;Ja.forEach(function(gb){gb=Ba*mb/(gb.length+1);nb=gb<nb?gb:nb});Oa=nb}var Ha=n.min(Ja,function(gb){return(Ba-ja-(gb.length-
1)*Oa)/n.sum(gb,d)});Ha*=.3;Ua.links.forEach(function(gb){gb.width=gb.value*Ha});var Ca=qa(Ua),Qa=Y(Ua,Ca);Ha*=Qa;Ua.links.forEach(function(gb){gb.width=gb.value*Ha});Ja.forEach(function(gb){var Va=gb.length;gb.forEach(function(db,qb){db.depth==Ja.length-1&&1==Va?db.y0=Ba/2-db.value*Ha:0==db.depth&&1==Va?db.y0=Ba/2-db.value*Ha:db.partOfCycle?0==u(db,fb)?db.y0=Ba/2+qb:db.y0="top"==db.circularLinkType?ja+qb:Ba-db.value*Ha-qb:db.y0=0==Ca.top||0==Ca.bottom?(Ba-ja)/Va*qb:(Ba-ja)/2-Va/2+qb;db.y1=db.y0+
db.value*Ha})})})(Ya);Wa();for(var Sa=1;0<Ea;--Ea)ab(Sa*=.99,Ya),Wa()}function ua(Ua){Ua.nodes.forEach(function(Ea){Ea.sourceLinks.sort(c);Ea.targetLinks.sort(l)});Ua.nodes.forEach(function(Ea){var Ya=Ea.y0,ab=Ya,Wa=Ea.y1,Ja=Wa;Ea.sourceLinks.forEach(function(Sa){Sa.circular?(Sa.y0=Wa-Sa.width/2,Wa-=Sa.width):(Sa.y0=Ya+Sa.width/2,Ya+=Sa.width)});Ea.targetLinks.forEach(function(Sa){Sa.circular?(Sa.y1=Ja-Sa.width/2,Ja-=Sa.width):(Sa.y1=ab+Sa.width/2,ab+=Sa.width)})})}var ya=0,ja=0,za=1,Ba=1,Ma=24,Oa,
Ia=w,Pa=e,Fa=x,Na=y,$a=32,cb=2,mb,Ka=null;sa.nodeId=function(Ua){return arguments.length?(Ia="function"===typeof Ua?Ua:h(Ua),sa):Ia};sa.nodeAlign=function(Ua){return arguments.length?(Pa="function"===typeof Ua?Ua:h(Ua),sa):Pa};sa.nodeWidth=function(Ua){return arguments.length?(Ma=+Ua,sa):Ma};sa.nodePadding=function(Ua){return arguments.length?(Oa=+Ua,sa):Oa};sa.nodes=function(Ua){return arguments.length?(Fa="function"===typeof Ua?Ua:h(Ua),sa):Fa};sa.links=function(Ua){return arguments.length?(Na=
"function"===typeof Ua?Ua:h(Ua),sa):Na};sa.size=function(Ua){return arguments.length?(ya=ja=0,za=+Ua[0],Ba=+Ua[1],sa):[za-ya,Ba-ja]};sa.extent=function(Ua){return arguments.length?(ya=+Ua[0][0],za=+Ua[1][0],ja=+Ua[0][1],Ba=+Ua[1][1],sa):[[ya,ja],[za,Ba]]};sa.iterations=function(Ua){return arguments.length?($a=+Ua,sa):$a};sa.circularLinkGap=function(Ua){return arguments.length?(cb=+Ua,sa):cb};sa.nodePaddingRatio=function(Ua){return arguments.length?(mb=+Ua,sa):mb};sa.sortNodes=function(Ua){return arguments.length?
(Ka=Ua,sa):Ka};sa.update=function(Ua){F(Ua,Ia);ua(Ua);Ua.links.forEach(function(Ea){Ea.circular&&(Ea.circularLinkType=Ea.y0+Ea.y1<Ba?"top":"bottom",Ea.source.circularLinkType=Ea.circularLinkType,Ea.target.circularLinkType=Ea.circularLinkType)});X(Ua,Ba,Ia,!1);ba(Ua,Ba,Ia);J(Ua,cb,Ba,Ia);return Ua};return sa};q.sankeyCenter=function(sa){return sa.targetLinks.length?sa.depth:sa.sourceLinks.length?n.min(sa.sourceLinks,k)-1:0};q.sankeyLeft=function(sa){return sa.depth};q.sankeyRight=function(sa,ma){return ma-
1-sa.height};q.sankeyJustify=e;Object.defineProperty(q,"__esModule",{value:!0})})},{"d3-array":156,"d3-collection":157,"d3-shape":165,"elementary-circuits-directed-graph":179}],56:[function(a,G,C){(function(q,n){"object"===typeof C&&"undefined"!==typeof G?n(C,a("d3-array"),a("d3-collection"),a("d3-shape")):n(q.d3=q.d3||{},q.d3,q.d3,q.d3)})(this,function(q,n,m,f){function b(F){return F.target.depth}function k(F,D){return F.sourceLinks.length?F.depth:D-1}function e(F){return function(){return F}}function h(F,
D){return c(F.source,D.source)||F.index-D.index}function l(F,D){return c(F.target,D.target)||F.index-D.index}function c(F,D){return F.y0-D.y0}function g(F){return F.value}function d(F){return(F.y0+F.y1)/2}function p(F){return d(F.source)*F.value}function r(F){return d(F.target)*F.value}function t(F){return F.index}function w(F){return F.nodes}function x(F){return F.links}function y(F,D){F=F.get(D);if(!F)throw Error("missing: "+D);return F}function A(F){return[F.source.x1,F.y0]}function z(F){return[F.target.x0,
F.y1]}q.sankey=function(){function F(){var aa={nodes:T.apply(null,arguments),links:V.apply(null,arguments)};D(aa);u(aa);B(aa);I(aa,X);J(aa);return aa}function D(aa){aa.nodes.forEach(function(ha,ca){ha.index=ca;ha.sourceLinks=[];ha.targetLinks=[]});var ka=m.map(aa.nodes,R);aa.links.forEach(function(ha,ca){ha.index=ca;ca=ha.source;var sa=ha.target;"object"!==typeof ca&&(ca=ha.source=y(ka,ca));"object"!==typeof sa&&(sa=ha.target=y(ka,sa));ca.sourceLinks.push(ha);sa.targetLinks.push(ha)})}function u(aa){aa.nodes.forEach(function(ka){ka.value=
Math.max(n.sum(ka.sourceLinks,g),n.sum(ka.targetLinks,g))})}function B(aa){var ka;var ha=aa.nodes;var ca=[];for(ka=0;ha.length;++ka,ha=ca,ca=[])ha.forEach(function(ma){ma.depth=ka;ma.sourceLinks.forEach(function(ra){0>ca.indexOf(ra.target)&&ca.push(ra.target)})});ha=aa.nodes;ca=[];for(ka=0;ha.length;++ka,ha=ca,ca=[])ha.forEach(function(ma){ma.height=ka;ma.targetLinks.forEach(function(ra){0>ca.indexOf(ra.source)&&ca.push(ra.source)})});var sa=(E-N-Q)/(ka-1);aa.nodes.forEach(function(ma){ma.x1=(ma.x0=
N+Math.max(0,Math.min(ka-1,Math.floor(O.call(null,ma,ka))))*sa)+Q})}function I(aa){function ka(qa){sa.forEach(function(Y){Y.forEach(function(pa){if(pa.targetLinks.length){var oa=(n.sum(pa.targetLinks,p)/n.sum(pa.targetLinks,g)-d(pa))*qa;pa.y0+=oa;pa.y1+=oa}})})}function ha(qa){sa.slice().reverse().forEach(function(Y){Y.forEach(function(pa){if(pa.sourceLinks.length){var oa=(n.sum(pa.sourceLinks,r)/n.sum(pa.sourceLinks,g)-d(pa))*qa;pa.y0+=oa;pa.y1+=oa}})})}function ca(){sa.forEach(function(qa){var Y=
M,pa=qa.length,oa;qa.sort(c);for(oa=0;oa<pa;++oa){var ua=qa[oa];var ya=Y-ua.y0;0<ya&&(ua.y0+=ya,ua.y1+=ya);Y=ua.y1+S}ya=Y-S-L;if(0<ya)for(Y=ua.y0-=ya,ua.y1-=ya,oa=pa-2;0<=oa;--oa)ua=qa[oa],ya=ua.y1+S-Y,0<ya&&(ua.y0-=ya,ua.y1-=ya),Y=ua.y0})}var sa=m.nest().key(function(qa){return qa.x0}).sortKeys(n.ascending).entries(aa.nodes).map(function(qa){return qa.values});(function(){var qa=n.max(sa,function(pa){return pa.length});qa=ba*(L-M)/(qa-1);S>qa&&(S=qa);var Y=n.min(sa,function(pa){return(L-M-(pa.length-
1)*S)/n.sum(pa,g)});sa.forEach(function(pa){pa.forEach(function(oa,ua){oa.y1=(oa.y0=ua)+oa.value*Y})});aa.links.forEach(function(pa){pa.width=pa.value*Y})})();ca();for(var ma=1,ra=X;0<ra;--ra)ha(ma*=.99),ca(),ka(ma),ca()}function J(aa){aa.nodes.forEach(function(ka){ka.sourceLinks.sort(l);ka.targetLinks.sort(h)});aa.nodes.forEach(function(ka){var ha=ka.y0,ca=ha;ka.sourceLinks.forEach(function(sa){sa.y0=ha+sa.width/2;ha+=sa.width});ka.targetLinks.forEach(function(sa){sa.y1=ca+sa.width/2;ca+=sa.width})})}
var N=0,M=0,E=1,L=1,Q=24,S=8,R=t,O=k,T=w,V=x,X=32,ba=2/3;F.update=function(aa){J(aa);return aa};F.nodeId=function(aa){return arguments.length?(R="function"===typeof aa?aa:e(aa),F):R};F.nodeAlign=function(aa){return arguments.length?(O="function"===typeof aa?aa:e(aa),F):O};F.nodeWidth=function(aa){return arguments.length?(Q=+aa,F):Q};F.nodePadding=function(aa){return arguments.length?(S=+aa,F):S};F.nodes=function(aa){return arguments.length?(T="function"===typeof aa?aa:e(aa),F):T};F.links=function(aa){return arguments.length?
(V="function"===typeof aa?aa:e(aa),F):V};F.size=function(aa){return arguments.length?(N=M=0,E=+aa[0],L=+aa[1],F):[E-N,L-M]};F.extent=function(aa){return arguments.length?(N=+aa[0][0],E=+aa[1][0],M=+aa[0][1],L=+aa[1][1],F):[[N,M],[E,L]]};F.iterations=function(aa){return arguments.length?(X=+aa,F):X};return F};q.sankeyCenter=function(F){return F.targetLinks.length?F.depth:F.sourceLinks.length?n.min(F.sourceLinks,b)-1:0};q.sankeyLeft=function(F){return F.depth};q.sankeyRight=function(F,D){return D-1-
F.height};q.sankeyJustify=k;q.sankeyLinkHorizontal=function(){return f.linkHorizontal().source(A).target(z)};Object.defineProperty(q,"__esModule",{value:!0})})},{"d3-array":156,"d3-collection":157,"d3-shape":165}],57:[function(a,G,C){G.exports=a("./quad")},{"./quad":58}],58:[function(a,G,C){function q(d,p){var r=p[0],t=p[1],w=1/(p[2]-r);p=1/(p[3]-t);for(var x=Array(d.length),y=0,A=d.length/2;y<A;y++)x[2*y]=m((d[2*y]-r)*w,0,1),x[2*y+1]=m((d[2*y+1]-t)*p,0,1);return x}var n=a("binary-search-bounds"),
m=a("clamp"),f=a("parse-rect"),b=a("array-bounds"),k=a("pick-by-alias"),e=a("defined"),h=a("flatten-vertex-data"),l=a("is-obj"),c=a("dtype"),g=a("math-log2");G.exports=function(d,p){function r(E,L,Q,S,R,O){if(!S.length)return null;var T=D[R]||(D[R]=[]),V=B[R]||(B[R]=[]),X=u[R]||(u[R]=[]),ba=T.length;R++;if(R>x||1073741824<O){for(E=0;E<S.length;E++)T.push(S[E]),V.push(O),X.push(null,null,null,null);return ba}T.push(S[0]);V.push(O);if(1>=S.length)return X.push(null,null,null,null),ba;T=.5*Q;V=E+T;Q=
L+T;for(var aa=[],ka=[],ha=[],ca=[],sa=1,ma=S.length;sa<ma;sa++){var ra=S[sa],qa=A[2*ra+1];A[2*ra]<V?qa<Q?aa.push(ra):ka.push(ra):qa<Q?ha.push(ra):ca.push(ra)}O<<=2;X.push(r(E,L,T,aa,R,O),r(E,Q,T,ka,R,O+1),r(V,L,T,ha,R,O+2),r(V,Q,T,ca,R,O+3));return ba}function t(E,L,Q,S,R){for(var O=[],T=0;T<R;T++){var V=B[T],X=I[T][0],ba=w(E,L,T),aa=w(Q,S,T);ba=n.ge(V,ba);V=n.gt(V,aa,ba,V.length-1);O[T]=[ba+X,V+X]}return O}function w(E,L,Q){for(var S=1,R=.5,O=.5,T=.5,V=0;V<Q;V++)S<<=2,S+=E<R?L<O?0:1:L<O?2:3,T*=
.5,R+=E<R?-T:T,O+=L<O?-T:T;return S}p||(p={});d=h(d,"float64");p=k(p,{bounds:"range bounds dataBox databox",maxDepth:"depth maxDepth maxdepth level maxLevel maxlevel levels",dtype:"type dtype format out dst output destination"});var x=e(p.maxDepth,255),y=e(p.bounds,b(d,2));y[0]===y[2]&&y[2]++;y[1]===y[3]&&y[3]++;var A=q(d,y),z=d.length>>>1;p.dtype||(p.dtype="array");if("string"===typeof p.dtype)var F=new (c(p.dtype))(z);else p.dtype&&(F=p.dtype,Array.isArray(F)&&(F.length=z));for(p=0;p<z;++p)F[p]=
p;var D=[],u=[],B=[],I=[];r(0,0,1,F,0,1);for(p=z=0;p<D.length;p++){var J=D[p];if(F.set)F.set(J,z);else for(var N=0,M=J.length;N<M;N++)F[N+z]=J[N];J=z+D[p].length;I[p]=[z,J];z=J}F.range=function(){function E(ma,ra,qa,Y,pa,oa){if(null!==pa&&null!==oa&&!(X>ma+qa||ba>ra+qa||aa<ma||ka<ra||Y>=ha||pa===oa)){var ua=D[Y];void 0===oa&&(oa=ua.length);for(var ya=pa;ya<oa;ya++){var ja=ua[ya],za=d[2*ja],Ba=d[2*ja+1];za>=R&&za<=T&&Ba>=O&&Ba<=V&&sa.push(ja)}za=u[Y];oa=za[4*pa];ua=za[4*pa+1];ya=za[4*pa+2];ja=za[4*
pa+3];a:{Ba=null;for(var Ma=0;null===Ba;)if(Ba=za[4*(pa+1)+Ma],Ma++,Ma>za.length){pa=null;break a}pa=Ba}qa*=.5;Y+=1;E(ma,ra,qa,Y,oa,ua||ya||ja||pa);E(ma,ra+qa,qa,Y,ua,ya||ja||pa);E(ma+qa,ra,qa,Y,ya,ja||pa);E(ma+qa,ra+qa,qa,Y,ja,pa)}}for(var L=[],Q=arguments.length;Q--;)L[Q]=arguments[Q];if(l(L[L.length-1])){var S=L.pop();L.length||null==S.x&&null==S.l&&null==S.left||(L=[S],Q={});Q=k(S,{level:"level maxLevel",d:"d diam diameter r radius px pxSize pixel pixelSize maxD size minSize",lod:"lod details ranges offsets"})}else Q=
{};L.length||(L=y);L=f.apply(void 0,L);L=[Math.min(L.x,L.x+L.width),Math.min(L.y,L.y+L.height),Math.max(L.x,L.x+L.width),Math.max(L.y,L.y+L.height)];var R=L[0],O=L[1],T=L[2],V=L[3];L=q([R,O,T,V],y);var X=L[0],ba=L[1],aa=L[2],ka=L[3],ha=e(Q.level,D.length);if(null!=Q.d){if("number"===typeof Q.d)var ca=[Q.d,Q.d];else Q.d.length&&(ca=Q.d);ha=Math.min(Math.max(Math.ceil(-g(Math.abs(ca[0])/(y[2]-y[0]))),Math.ceil(-g(Math.abs(ca[1])/(y[3]-y[1])))),ha)}ha=Math.min(ha,D.length);if(Q.lod)return t(X,ba,aa,
ka,ha);var sa=[];E(0,0,1,0,0,1);return sa};return F}},{"array-bounds":70,"binary-search-bounds":96,clamp:120,defined:170,dtype:175,"flatten-vertex-data":244,"is-obj":442,"math-log2":453,"parse-rect":478,"pick-by-alias":485}],59:[function(a,G,C){function q(f){var b=0;if(f&&0<f.length){b+=Math.abs(n(f[0]));for(var k=1;k<f.length;k++)b-=Math.abs(n(f[k]))}return b}function n(f){var b,k=0,e=f.length;if(2<e){for(b=0;b<e;b++){if(b===e-2){var h=e-2;var l=e-1;var c=0}else b===e-1?(h=e-1,l=0,c=1):(h=b,l=b+
1,c=b+2);h=f[h];l=f[l];c=f[c];k+=(c[0]*Math.PI/180-h[0]*Math.PI/180)*Math.sin(l[1]*Math.PI/180)}k=40680631590769*k/2}return k}Object.defineProperty(C,"__esModule",{value:!0});var m=a("@turf/meta");C.default=function(f){return m.geomReduce(f,function(b,k){a:{var e=0,h;switch(k.type){case "Polygon":k=q(k.coordinates);break a;case "MultiPolygon":for(h=0;h<k.coordinates.length;h++)e+=q(k.coordinates[h]);k=e;break a}k=0}return b+k},0)}},{"@turf/meta":63}],60:[function(a,G,C){Object.defineProperty(C,"__esModule",
{value:!0});var q=a("@turf/meta");C.default=function(n){var m=[Infinity,Infinity,-Infinity,-Infinity];q.coordEach(n,function(f){m[0]>f[0]&&(m[0]=f[0]);m[1]>f[1]&&(m[1]=f[1]);m[2]<f[0]&&(m[2]=f[0]);m[3]<f[1]&&(m[3]=f[1])});return m}},{"@turf/meta":63}],61:[function(a,G,C){Object.defineProperty(C,"__esModule",{value:!0});var q=a("@turf/meta"),n=a("@turf/helpers");C.default=function(m,f){void 0===f&&(f={});var b=0,k=0,e=0;q.coordEach(m,function(h){b+=h[0];k+=h[1];e++});return n.point([b/e,k/e],f.properties)}},
{"@turf/helpers":62,"@turf/meta":63}],62:[function(a,G,C){function q(p,r,t){void 0===t&&(t={});var w={type:"Feature"};if(0===t.id||t.id)w.id=t.id;t.bbox&&(w.bbox=t.bbox);w.properties=r||{};w.geometry=p;return w}function n(p,r,t){void 0===t&&(t={});return q({type:"Point",coordinates:p},r,t)}function m(p,r,t){void 0===t&&(t={});for(var w=0;w<p.length;w++){var x=p[w];if(4>x.length)throw Error("Each LinearRing of a Polygon must have 4 or more Positions.");for(var y=0;y<x[x.length-1].length;y++)if(x[x.length-
1][y]!==x[0][y])throw Error("First and last Position are not equivalent.");}return q({type:"Polygon",coordinates:p},r,t)}function f(p,r,t){void 0===t&&(t={});if(2>p.length)throw Error("coordinates must be an array of two or more positions");return q({type:"LineString",coordinates:p},r,t)}function b(p,r){void 0===r&&(r={});var t={type:"FeatureCollection"};r.id&&(t.id=r.id);r.bbox&&(t.bbox=r.bbox);t.features=p;return t}function k(p,r,t){void 0===t&&(t={});return q({type:"MultiLineString",coordinates:p},
r,t)}function e(p,r,t){void 0===t&&(t={});return q({type:"MultiPoint",coordinates:p},r,t)}function h(p,r,t){void 0===t&&(t={});return q({type:"MultiPolygon",coordinates:p},r,t)}function l(p,r){void 0===r&&(r="kilometers");var t=C.factors[r];if(!t)throw Error(r+" units is invalid");return p*t}function c(p,r){void 0===r&&(r="kilometers");var t=C.factors[r];if(!t)throw Error(r+" units is invalid");return p/t}function g(p){return p%(2*Math.PI)*180/Math.PI}function d(p){return!isNaN(p)&&null!==p&&!Array.isArray(p)&&
!/^\s*$/.test(p)}Object.defineProperty(C,"__esModule",{value:!0});C.earthRadius=6371008.8;C.factors={centimeters:100*C.earthRadius,centimetres:100*C.earthRadius,degrees:C.earthRadius/111325,feet:3.28084*C.earthRadius,inches:39.37*C.earthRadius,kilometers:C.earthRadius/1E3,kilometres:C.earthRadius/1E3,meters:C.earthRadius,metres:C.earthRadius,miles:C.earthRadius/1609.344,millimeters:1E3*C.earthRadius,millimetres:1E3*C.earthRadius,nauticalmiles:C.earthRadius/1852,radians:1,yards:C.earthRadius/1.0936};
C.unitsFactors={centimeters:100,centimetres:100,degrees:1/111325,feet:3.28084,inches:39.37,kilometers:.001,kilometres:.001,meters:1,metres:1,miles:1/1609.344,millimeters:1E3,millimetres:1E3,nauticalmiles:1/1852,radians:1/C.earthRadius,yards:1/1.0936};C.areaFactors={acres:2.47105E-4,centimeters:1E4,centimetres:1E4,feet:10.763910417,inches:1550.003100006,kilometers:1E-6,kilometres:1E-6,meters:1,metres:1,miles:3.86E-7,millimeters:1E6,millimetres:1E6,yards:1.195990046};C.feature=q;C.geometry=function(p,
r,t){switch(p){case "Point":return n(r).geometry;case "LineString":return f(r).geometry;case "Polygon":return m(r).geometry;case "MultiPoint":return e(r).geometry;case "MultiLineString":return k(r).geometry;case "MultiPolygon":return h(r).geometry;default:throw Error(p+" is invalid");}};C.point=n;C.points=function(p,r,t){void 0===t&&(t={});return b(p.map(function(w){return n(w,r)}),t)};C.polygon=m;C.polygons=function(p,r,t){void 0===t&&(t={});return b(p.map(function(w){return m(w,r)}),t)};C.lineString=
f;C.lineStrings=function(p,r,t){void 0===t&&(t={});return b(p.map(function(w){return f(w,r)}),t)};C.featureCollection=b;C.multiLineString=k;C.multiPoint=e;C.multiPolygon=h;C.geometryCollection=function(p,r,t){void 0===t&&(t={});return q({type:"GeometryCollection",geometries:p},r,t)};C.round=function(p,r){void 0===r&&(r=0);if(r&&!(0<=r))throw Error("precision must be a positive number");r=Math.pow(10,r||0);return Math.round(p*r)/r};C.radiansToLength=l;C.lengthToRadians=c;C.lengthToDegrees=function(p,
r){return g(c(p,r))};C.bearingToAzimuth=function(p){p%=360;0>p&&(p+=360);return p};C.radiansToDegrees=g;C.degreesToRadians=function(p){return p%360*Math.PI/180};C.convertLength=function(p,r,t){void 0===r&&(r="kilometers");void 0===t&&(t="kilometers");if(!(0<=p))throw Error("length must be a positive number");return l(c(p,r),t)};C.convertArea=function(p,r,t){void 0===r&&(r="meters");void 0===t&&(t="kilometers");if(!(0<=p))throw Error("area must be a positive number");r=C.areaFactors[r];if(!r)throw Error("invalid original units");
t=C.areaFactors[t];if(!t)throw Error("invalid final units");return p/r*t};C.isNumber=d;C.isObject=function(p){return!!p&&p.constructor===Object};C.validateBBox=function(p){if(!p)throw Error("bbox is required");if(!Array.isArray(p))throw Error("bbox must be an Array");if(4!==p.length&&6!==p.length)throw Error("bbox must be an Array of 4 or 6 numbers");p.forEach(function(r){if(!d(r))throw Error("bbox must only contain numbers");})};C.validateId=function(p){if(!p)throw Error("id is required");if(-1===
["string","number"].indexOf(typeof p))throw Error("id must be a number or a string");};C.radians2degrees=function(){throw Error("method has been renamed to `radiansToDegrees`");};C.degrees2radians=function(){throw Error("method has been renamed to `degreesToRadians`");};C.distanceToDegrees=function(){throw Error("method has been renamed to `lengthToDegrees`");};C.distanceToRadians=function(){throw Error("method has been renamed to `lengthToRadians`");};C.radiansToDistance=function(){throw Error("method has been renamed to `radiansToLength`");
};C.bearingToAngle=function(){throw Error("method has been renamed to `bearingToAzimuth`");};C.convertDistance=function(){throw Error("method has been renamed to `convertLength`");}},{}],63:[function(a,G,C){function q(l,c,g){if(null!==l){var d,p=0,r;var t=l.type;for(var w="FeatureCollection"===t,x="Feature"===t,y=w?l.features.length:1,A=0;A<y;A++){var z=(r=(d=w?l.features[A].geometry:x?l.geometry:l)?"GeometryCollection"===d.type:!1)?d.geometries.length:1;for(var F=0;F<z;F++){var D=0,u=0;var B=r?d.geometries[F]:
d;if(null!==B){var I=B.coordinates;var J=B.type;var N=!g||"Polygon"!==J&&"MultiPolygon"!==J?0:1;switch(J){case null:break;case "Point":if(!1===c(I,p,A,D,u))return!1;p++;break;case "LineString":case "MultiPoint":for(t=0;t<I.length;t++){if(!1===c(I[t],p,A,D,u))return!1;p++;"MultiPoint"===J&&D++}break;case "Polygon":case "MultiLineString":for(t=0;t<I.length;t++){for(B=0;B<I[t].length-N;B++){if(!1===c(I[t][B],p,A,D,u))return!1;p++}"MultiLineString"===J&&D++;"Polygon"===J&&u++}break;case "MultiPolygon":for(t=
0;t<I.length;t++){for(B=u=0;B<I[t].length;B++){for(J=0;J<I[t][B].length-N;J++){if(!1===c(I[t][B][J],p,A,D,u))return!1;p++}u++}D++}break;case "GeometryCollection":for(t=0;t<B.geometries.length;t++)if(!1===q(B.geometries[t],c,g))return!1;break;default:throw Error("Unknown Geometry Type");}}}}}}function n(l,c){var g;switch(l.type){case "FeatureCollection":for(g=0;g<l.features.length&&!1!==c(l.features[g].properties,g);g++);break;case "Feature":c(l.properties,0)}}function m(l,c){if("Feature"===l.type)c(l,
0);else if("FeatureCollection"===l.type)for(var g=0;g<l.features.length&&!1!==c(l.features[g],g);g++);}function f(l,c){var g,d,p,r,t=0,w="FeatureCollection"===l.type,x="Feature"===l.type,y=w?l.features.length:1;for(g=0;g<y;g++){var A=w?l.features[g].geometry:x?l.geometry:l;var z=w?l.features[g].properties:x?l.properties:{};var F=w?l.features[g].bbox:x?l.bbox:void 0;var D=w?l.features[g].id:x?l.id:void 0;var u=(r=A?"GeometryCollection"===A.type:!1)?A.geometries.length:1;for(p=0;p<u;p++){var B=r?A.geometries[p]:
A;if(null===B){if(!1===c(null,t,z,F,D))return!1}else switch(B.type){case "Point":case "LineString":case "MultiPoint":case "Polygon":case "MultiLineString":case "MultiPolygon":if(!1===c(B,t,z,F,D))return!1;break;case "GeometryCollection":for(d=0;d<B.geometries.length;d++)if(!1===c(B.geometries[d],t,z,F,D))return!1;break;default:throw Error("Unknown Geometry Type");}}t++}}function b(l,c){f(l,function(g,d,p,r,t){var w=null===g?null:g.type;switch(w){case null:case "Point":case "LineString":case "Polygon":if(!1===
c(h.feature(g,p,{bbox:r,id:t}),d,0))return!1;return}switch(w){case "MultiPoint":var x="Point";break;case "MultiLineString":x="LineString";break;case "MultiPolygon":x="Polygon"}for(r=0;r<g.coordinates.length;r++)if(!1===c(h.feature({type:x,coordinates:g.coordinates[r]},p),d,r))return!1})}function k(l,c){b(l,function(g,d,p){var r=0;if(g.geometry){var t=g.geometry.type;if("Point"!==t&&"MultiPoint"!==t){var w,x=0,y=0,A=0;if(!1===q(g,function(z,F,D,u,B){if(void 0===w||d>x||u>y||B>A)w=z,x=d,y=u,A=B,r=0;
else{F=h.lineString([w,z],g.properties);if(!1===c(F,d,p,B,r))return!1;r++;w=z}}))return!1}}})}function e(l,c){if(!l)throw Error("geojson is required");b(l,function(g,d,p){if(null!==g.geometry){var r=g.geometry.coordinates;switch(g.geometry.type){case "LineString":if(!1===c(g,d,p,0,0))return!1;break;case "Polygon":for(var t=0;t<r.length;t++)if(!1===c(h.lineString(r[t],g.properties),d,p,t))return!1}}})}Object.defineProperty(C,"__esModule",{value:!0});var h=a("@turf/helpers");C.coordEach=q;C.coordReduce=
function(l,c,g,d){var p=g;q(l,function(r,t,w,x,y){p=0===t&&void 0===g?r:c(p,r,t,w,x,y)},d);return p};C.propEach=n;C.propReduce=function(l,c,g){var d=g;n(l,function(p,r){d=0===r&&void 0===g?p:c(d,p,r)});return d};C.featureEach=m;C.featureReduce=function(l,c,g){var d=g;m(l,function(p,r){d=0===r&&void 0===g?p:c(d,p,r)});return d};C.coordAll=function(l){var c=[];q(l,function(g){c.push(g)});return c};C.geomEach=f;C.geomReduce=function(l,c,g){var d=g;f(l,function(p,r,t,w,x){d=0===r&&void 0===g?p:c(d,p,
r,t,w,x)});return d};C.flattenEach=b;C.flattenReduce=function(l,c,g){var d=g;b(l,function(p,r,t){d=0===r&&0===t&&void 0===g?p:c(d,p,r,t)});return d};C.segmentEach=k;C.segmentReduce=function(l,c,g){var d=g,p=!1;k(l,function(r,t,w,x,y){d=!1===p&&void 0===g?r:c(d,r,t,w,x,y);p=!0});return d};C.lineEach=e;C.lineReduce=function(l,c,g){var d=g;e(l,function(p,r,t,w){d=0===r&&void 0===g?p:c(d,p,r,t,w)});return d};C.findSegment=function(l,c){c=c||{};if(!h.isObject(c))throw Error("options is invalid");var g=
c.featureIndex||0,d=c.multiFeatureIndex||0,p=c.geometryIndex||0,r=c.segmentIndex||0,t=c.properties;switch(l.type){case "FeatureCollection":0>g&&(g=l.features.length+g);t=t||l.features[g].properties;l=l.features[g].geometry;break;case "Feature":t=t||l.properties;l=l.geometry;break;case "Point":case "MultiPoint":return null;case "LineString":case "Polygon":case "MultiLineString":case "MultiPolygon":break;default:throw Error("geojson is invalid");}if(null===l)return null;g=l.coordinates;switch(l.type){case "Point":case "MultiPoint":return null;
case "LineString":return 0>r&&(r=g.length+r-1),h.lineString([g[r],g[r+1]],t,c);case "Polygon":return 0>p&&(p=g.length+p),0>r&&(r=g[p].length+r-1),h.lineString([g[p][r],g[p][r+1]],t,c);case "MultiLineString":return 0>d&&(d=g.length+d),0>r&&(r=g[d].length+r-1),h.lineString([g[d][r],g[d][r+1]],t,c);case "MultiPolygon":return 0>d&&(d=g.length+d),0>p&&(p=g[d].length+p),0>r&&(r=g[d][p].length-r-1),h.lineString([g[d][p][r],g[d][p][r+1]],t,c)}throw Error("geojson is invalid");};C.findPoint=function(l,c){c=
c||{};if(!h.isObject(c))throw Error("options is invalid");var g=c.featureIndex||0,d=c.multiFeatureIndex||0,p=c.geometryIndex||0,r=c.coordIndex||0,t=c.properties;switch(l.type){case "FeatureCollection":0>g&&(g=l.features.length+g);t=t||l.features[g].properties;l=l.features[g].geometry;break;case "Feature":t=t||l.properties;l=l.geometry;break;case "Point":case "MultiPoint":return null;case "LineString":case "Polygon":case "MultiLineString":case "MultiPolygon":break;default:throw Error("geojson is invalid");
}if(null===l)return null;g=l.coordinates;switch(l.type){case "Point":return h.point(g,t,c);case "MultiPoint":return 0>d&&(d=g.length+d),h.point(g[d],t,c);case "LineString":return 0>r&&(r=g.length+r),h.point(g[r],t,c);case "Polygon":return 0>p&&(p=g.length+p),0>r&&(r=g[p].length+r),h.point(g[p][r],t,c);case "MultiLineString":return 0>d&&(d=g.length+d),0>r&&(r=g[d].length+r),h.point(g[d][r],t,c);case "MultiPolygon":return 0>d&&(d=g.length+d),0>p&&(p=g[d].length+p),0>r&&(r=g[d][p].length-r),h.point(g[d][p][r],
t,c)}throw Error("geojson is invalid");}},{"@turf/helpers":62}],64:[function(a,G,C){C="undefined"===typeof WeakMap?a("weak-map"):WeakMap;var q=a("gl-buffer"),n=a("gl-vao"),m=new C;G.exports=function(f){var b=m.get(f),k=b&&(b._triangleBuffer.handle||b._triangleBuffer.buffer);k&&f.isBuffer(k)||(k=q(f,new Float32Array([-1,-1,-1,4,4,-1])),b=n(f,[{buffer:k,type:f.FLOAT,size:2}]),b._triangleBuffer=k,m.set(f,b));b.bind();f.drawArrays(f.TRIANGLES,0,3);b.unbind()}},{"gl-buffer":258,"gl-vao":332,"weak-map":574}],
65:[function(a,G,C){G.exports=function(q){var n=0,m=0,f=0,b=0;return q.map(function(k){k=k.slice();var e=k[0],h=e.toUpperCase();if(e!=h)switch(k[0]=h,e){case "a":k[6]+=f;k[7]+=b;break;case "v":k[1]+=b;break;case "h":k[1]+=f;break;default:for(e=1;e<k.length;)k[e++]+=f,k[e++]+=b}switch(h){case "Z":f=n;b=m;break;case "H":f=k[1];break;case "V":b=k[1];break;case "M":f=n=k[1];b=m=k[2];break;default:f=k[k.length-2],b=k[k.length-1]}return k})}},{}],66:[function(a,G,C){var q=a("pad-left");G.exports=function(n,
m,f){m="number"===typeof m?m:1;f=f||": ";n=n.split(/\r?\n/);var b=String(n.length+m-1).length;return n.map(function(k,e){e+=m;return q(e,b-String(e).length)+f+k}).join("\n")}},{"pad-left":476}],67:[function(a,G,C){G.exports=function(n){var m=n.length;if(0===m)return[];if(1===m)return[0];for(var f=n[0].length,b=[n[0]],k=[0],e=1;e<m;++e){b.push(n[e]);a:{var h=b;for(var l=f,c=Array(l+1),g=0;g<h.length;++g)c[g]=h[g];for(g=0;g<=h.length;++g){for(var d=h.length;d<=l;++d){for(var p=Array(l),r=0;r<l;++r)p[r]=
Math.pow(d+1-g,r);c[d]=p}if(q.apply(void 0,c)){h=!0;break a}}h=!1}if(h){if(k.push(e),k.length===f+1)break}else b.pop()}return k};var q=a("robust-orientation")},{"robust-orientation":520}],68:[function(a,G,C){G.exports=function(m,f){return q(f).filter(function(b){for(var k=Array(b.length),e=0;e<b.length;++e)k[e]=f[b[e]];return 1>n(k)*m})};var q=a("delaunay-triangulate"),n=a("circumradius")},{circumradius:119,"delaunay-triangulate":171}],69:[function(a,G,C){G.exports=function(m,f){return n(q(m,f))};
var q=a("alpha-complex"),n=a("simplicial-complex-boundary")},{"alpha-complex":68,"simplicial-complex-boundary":527}],70:[function(a,G,C){G.exports=function(q,n){if(!q||null==q.length)throw Error("Argument should be an array");n=null==n?1:Math.floor(n);for(var m=Array(2*n),f=0;f<n;f++){for(var b=-Infinity,k=Infinity,e=f,h=q.length;e<h;e+=n)q[e]>b&&(b=q[e]),q[e]<k&&(k=q[e]);m[f]=k;m[n+f]=b}return m}},{}],71:[function(a,G,C){var q=a("array-bounds");G.exports=function(n,m,f){if(!n||null==n.length)throw Error("Argument should be an array");
null==m&&(m=1);null==f&&(f=q(n,m));for(var b=0;b<m;b++){var k=f[m+b],e=f[b],h,l=n.length;if(Infinity===k&&-Infinity===e)for(h=b;h<l;h+=m)n[h]=n[h]===k?1:n[h]===e?0:.5;else if(Infinity===k)for(h=b;h<l;h+=m)n[h]=n[h]===k?1:0;else if(-Infinity===e)for(h=b;h<l;h+=m)n[h]=n[h]===e?0:1;else for(k-=e,h=b;h<l;h+=m)isNaN(n[h])||(n[h]=0===k?.5:(n[h]-e)/k)}return n}},{"array-bounds":70}],72:[function(a,G,C){G.exports=function(q,n){var m="number"===typeof q,f="number"===typeof n;m&&!f?(n=q,q=0):m||f||(n=q=0);
q|=0;n=(n|0)-q;if(0>n)throw Error("array length must be positive");m=Array(n);for(f=0;f<n;f++,q++)m[f]=q;return m}},{}],73:[function(a,G,C){(function(q){function n(I,J){if(I===J)return 0;for(var N=I.length,M=J.length,E=0,L=Math.min(N,M);E<L;++E)if(I[E]!==J[E]){N=I[E];M=J[E];break}return N<M?-1:M<N?1:0}function m(I){return q.Buffer&&"function"===typeof q.Buffer.isBuffer?q.Buffer.isBuffer(I):!(null==I||!I._isBuffer)}function f(I){return m(I)||"function"!==typeof q.ArrayBuffer?!1:"function"===typeof ArrayBuffer.isView?
ArrayBuffer.isView(I):I?I instanceof DataView||I.buffer&&I.buffer instanceof ArrayBuffer?!0:!1:!1}function b(I){if(y.isFunction(I))return F?I.name:(I=I.toString().match(u))&&I[1]}function k(I,J){return"string"===typeof I?I.length<J?I:I.slice(0,J):I}function e(I){if(F||!y.isFunction(I))return y.inspect(I);I=b(I);return"[Function"+(I?": "+I:"")+"]"}function h(I,J,N,M,E){throw new D.AssertionError({message:N,actual:I,expected:J,operator:M,stackStartFunction:E});}function l(I,J){I||h(I,!0,J,"\x3d\x3d",
D.ok)}function c(I,J,N,M){if(I===J)return!0;if(m(I)&&m(J))return 0===n(I,J);if(y.isDate(I)&&y.isDate(J))return I.getTime()===J.getTime();if(y.isRegExp(I)&&y.isRegExp(J))return I.source===J.source&&I.global===J.global&&I.multiline===J.multiline&&I.lastIndex===J.lastIndex&&I.ignoreCase===J.ignoreCase;if(null!==I&&"object"===typeof I||null!==J&&"object"===typeof J){if(!f(I)||!f(J)||Object.prototype.toString.call(I)!==Object.prototype.toString.call(J)||I instanceof Float32Array||I instanceof Float64Array){if(m(I)!==
m(J))return!1;M=M||{actual:[],expected:[]};var E=M.actual.indexOf(I);if(-1!==E&&E===M.expected.indexOf(J))return!0;M.actual.push(I);M.expected.push(J);return d(I,J,N,M)}return 0===n(new Uint8Array(I.buffer),new Uint8Array(J.buffer))}return N?I===J:I==J}function g(I){return"[object Arguments]"==Object.prototype.toString.call(I)}function d(I,J,N,M){if(null===I||void 0===I||null===J||void 0===J)return!1;if(y.isPrimitive(I)||y.isPrimitive(J))return I===J;if(N&&Object.getPrototypeOf(I)!==Object.getPrototypeOf(J))return!1;
var E=g(I),L=g(J);if(E&&!L||!E&&L)return!1;if(E)return I=z.call(I),J=z.call(J),c(I,J,N);E=B(I);var Q=B(J);if(E.length!==Q.length)return!1;E.sort();Q.sort();for(L=E.length-1;0<=L;L--)if(E[L]!==Q[L])return!1;for(L=E.length-1;0<=L;L--)if(Q=E[L],!c(I[Q],J[Q],N,M))return!1;return!0}function p(I,J,N){c(I,J,!0)&&h(I,J,N,"notDeepStrictEqual",p)}function r(I,J){if(!I||!J)return!1;if("[object RegExp]"==Object.prototype.toString.call(J))return J.test(I);try{if(I instanceof J)return!0}catch(N){}return Error.isPrototypeOf(J)?
!1:!0===J.call({},I)}function t(I,J,N,M){if("function"!==typeof J)throw new TypeError('"block" argument must be a function');"string"===typeof N&&(M=N,N=null);try{J()}catch(S){var E=S}J=E;M=(N&&N.name?" ("+N.name+").":".")+(M?" "+M:".");I&&!J&&h(J,N,"Missing expected exception"+M);E="string"===typeof M;var L=!I&&y.isError(J),Q=!I&&J&&!N;(L&&E&&r(J,N)||Q)&&h(J,N,"Got unwanted exception"+M);if(I&&J&&N&&!r(J,N)||!I&&J)throw J;}function w(I,J){I||h(I,!0,J,"\x3d\x3d",w)}var x=a("object-assign"),y=a("util/"),
A=Object.prototype.hasOwnProperty,z=Array.prototype.slice,F=function(){return"foo"===function(){}.name}(),D=G.exports=l,u=/\s*function\s+([^\(\s]*)\s*/;D.AssertionError=function(I){this.name="AssertionError";this.actual=I.actual;this.expected=I.expected;this.operator=I.operator;I.message?(this.message=I.message,this.generatedMessage=!1):(this.message=k(e(this.actual),128)+" "+this.operator+" "+k(e(this.expected),128),this.generatedMessage=!0);var J=I.stackStartFunction||h;Error.captureStackTrace?
Error.captureStackTrace(this,J):(I=Error(),I.stack&&(I=I.stack,J=b(J),J=I.indexOf("\n"+J),0<=J&&(J=I.indexOf("\n",J+1),I=I.substring(J+1)),this.stack=I))};y.inherits(D.AssertionError,Error);D.fail=h;D.ok=l;D.equal=function(I,J,N){I!=J&&h(I,J,N,"\x3d\x3d",D.equal)};D.notEqual=function(I,J,N){I==J&&h(I,J,N,"!\x3d",D.notEqual)};D.deepEqual=function(I,J,N){c(I,J,!1)||h(I,J,N,"deepEqual",D.deepEqual)};D.deepStrictEqual=function(I,J,N){c(I,J,!0)||h(I,J,N,"deepStrictEqual",D.deepStrictEqual)};D.notDeepEqual=
function(I,J,N){c(I,J,!1)&&h(I,J,N,"notDeepEqual",D.notDeepEqual)};D.notDeepStrictEqual=p;D.strictEqual=function(I,J,N){I!==J&&h(I,J,N,"\x3d\x3d\x3d",D.strictEqual)};D.notStrictEqual=function(I,J,N){I===J&&h(I,J,N,"!\x3d\x3d",D.notStrictEqual)};D.throws=function(I,J,N){t(!0,I,J,N)};D.doesNotThrow=function(I,J,N){t(!1,I,J,N)};D.ifError=function(I){if(I)throw I;};D.strict=x(w,D,{equal:D.strictEqual,deepEqual:D.deepStrictEqual,notEqual:D.notStrictEqual,notDeepEqual:D.notDeepStrictEqual});D.strict.strict=
D.strict;var B=Object.keys||function(I){var J=[],N;for(N in I)A.call(I,N)&&J.push(N);return J}}).call(this,"undefined"!==typeof la?la:"undefined"!==typeof self?self:"undefined"!==typeof window?window:{})},{"object-assign":473,"util/":76}],74:[function(a,G,C){G.exports="function"===typeof Object.create?function(q,n){q.super_=n;q.prototype=Object.create(n.prototype,{constructor:{value:q,enumerable:!1,writable:!0,configurable:!0}})}:function(q,n){q.super_=n;var m=function(){};m.prototype=n.prototype;
q.prototype=new m;q.prototype.constructor=q}},{}],75:[function(a,G,C){G.exports=function(q){return q&&"object"===typeof q&&"function"===typeof q.copy&&"function"===typeof q.fill&&"function"===typeof q.readUInt8}},{}],76:[function(a,G,C){(function(q,n){function m(E,L){var Q={seen:[],stylize:b};3<=arguments.length&&(Q.depth=arguments[2]);4<=arguments.length&&(Q.colors=arguments[3]);r(L)?Q.showHidden=L:L&&C._extend(Q,L);x(Q.showHidden)&&(Q.showHidden=!1);x(Q.depth)&&(Q.depth=2);x(Q.colors)&&(Q.colors=
!1);x(Q.customInspect)&&(Q.customInspect=!0);Q.colors&&(Q.stylize=f);return e(Q,E,Q.depth)}function f(E,L){return(L=m.styles[L])?"["+m.colors[L][0]+"m"+E+"["+m.colors[L][1]+"m":E}function b(E,L){return E}function k(E){var L={};E.forEach(function(Q,S){L[Q]=!0});return L}function e(E,L,Q){if(E.customInspect&&L&&D(L.inspect)&&L.inspect!==C.inspect&&(!L.constructor||L.constructor.prototype!==L)){var S=L.inspect(Q,E);w(S)||(S=e(E,S,Q));return S}if(S=h(E,L))return S;var R=Object.keys(L),O=k(R);E.showHidden&&
(R=Object.getOwnPropertyNames(L));if(F(L)&&(0<=R.indexOf("message")||0<=R.indexOf("description")))return l(L);if(0===R.length){if(D(L))return E.stylize("[Function"+(L.name?": "+L.name:"")+"]","special");if(y(L))return E.stylize(RegExp.prototype.toString.call(L),"regexp");if(z(L))return E.stylize(Date.prototype.toString.call(L),"date");if(F(L))return l(L)}S="";var T=!1,V=["{","}"];p(L)&&(T=!0,V=["[","]"]);D(L)&&(S=" [Function"+(L.name?": "+L.name:"")+"]");y(L)&&(S=" "+RegExp.prototype.toString.call(L));
z(L)&&(S=" "+Date.prototype.toUTCString.call(L));F(L)&&(S=" "+l(L));if(0===R.length&&(!T||0==L.length))return V[0]+S+V[1];if(0>Q)return y(L)?E.stylize(RegExp.prototype.toString.call(L),"regexp"):E.stylize("[Object]","special");E.seen.push(L);R=T?c(E,L,Q,O,R):R.map(function(X){return g(E,L,Q,O,X,T)});E.seen.pop();return d(R,S,V)}function h(E,L){if(x(L))return E.stylize("undefined","undefined");if(w(L))return L="'"+JSON.stringify(L).replace(/^"|"$/g,"").replace(/'/g,"\\'").replace(/\\"/g,'"')+"'",E.stylize(L,
"string");if(t(L))return E.stylize(""+L,"number");if(r(L))return E.stylize(""+L,"boolean");if(null===L)return E.stylize("null","null")}function l(E){return"["+Error.prototype.toString.call(E)+"]"}function c(E,L,Q,S,R){for(var O=[],T=0,V=L.length;T<V;++T)Object.prototype.hasOwnProperty.call(L,String(T))?O.push(g(E,L,Q,S,String(T),!0)):O.push("");R.forEach(function(X){X.match(/^\d+$/)||O.push(g(E,L,Q,S,X,!0))});return O}function g(E,L,Q,S,R,O){var T,V;L=Object.getOwnPropertyDescriptor(L,R)||{value:L[R]};
L.get?V=L.set?E.stylize("[Getter/Setter]","special"):E.stylize("[Getter]","special"):L.set&&(V=E.stylize("[Setter]","special"));Object.prototype.hasOwnProperty.call(S,R)||(T="["+R+"]");V||(0>E.seen.indexOf(L.value)?(V=null===Q?e(E,L.value,null):e(E,L.value,Q-1),-1<V.indexOf("\n")&&(V=O?V.split("\n").map(function(X){return"  "+X}).join("\n").substr(2):"\n"+V.split("\n").map(function(X){return"   "+X}).join("\n"))):V=E.stylize("[Circular]","special"));if(x(T)){if(O&&R.match(/^\d+$/))return V;T=JSON.stringify(""+
R);T.match(/^"([a-zA-Z_][a-zA-Z_0-9]*)"$/)?(T=T.substr(1,T.length-2),T=E.stylize(T,"name")):(T=T.replace(/'/g,"\\'").replace(/\\"/g,'"').replace(/(^"|"$)/g,"'"),T=E.stylize(T,"string"))}return T+": "+V}function d(E,L,Q){var S=0;return 60<E.reduce(function(R,O){S++;0<=O.indexOf("\n")&&S++;return R+O.replace(/\u001b\[\d\d?m/g,"").length+1},0)?Q[0]+(""===L?"":L+"\n ")+" "+E.join(",\n  ")+" "+Q[1]:Q[0]+L+" "+E.join(", ")+" "+Q[1]}function p(E){return Array.isArray(E)}function r(E){return"boolean"===typeof E}
function t(E){return"number"===typeof E}function w(E){return"string"===typeof E}function x(E){return void 0===E}function y(E){return A(E)&&"[object RegExp]"===Object.prototype.toString.call(E)}function A(E){return"object"===typeof E&&null!==E}function z(E){return A(E)&&"[object Date]"===Object.prototype.toString.call(E)}function F(E){return A(E)&&("[object Error]"===Object.prototype.toString.call(E)||E instanceof Error)}function D(E){return"function"===typeof E}function u(E){return 10>E?"0"+E.toString(10):
E.toString(10)}function B(){var E=new Date,L=[u(E.getHours()),u(E.getMinutes()),u(E.getSeconds())].join(":");return[E.getDate(),M[E.getMonth()],L].join(" ")}var I=/%[sdj%]/g;C.format=function(E){if(!w(E)){for(var L=[],Q=0;Q<arguments.length;Q++)L.push(m(arguments[Q]));return L.join(" ")}Q=1;var S=arguments,R=S.length;L=String(E).replace(I,function(T){if("%%"===T)return"%";if(Q>=R)return T;switch(T){case "%s":return String(S[Q++]);case "%d":return Number(S[Q++]);case "%j":try{return JSON.stringify(S[Q++])}catch(V){return"[Circular]"}default:return T}});
for(var O=S[Q];Q<R;O=S[++Q])L=null!==O&&A(O)?L+(" "+m(O)):L+(" "+O);return L};C.deprecate=function(E,L){if(x(n.process))return function(){return C.deprecate(E,L).apply(this,arguments)};if(!0===q.noDeprecation)return E;var Q=!1;return function(){if(!Q){if(q.throwDeprecation)throw Error(L);q.traceDeprecation?console.trace(L):console.error(L);Q=!0}return E.apply(this,arguments)}};var J={},N;C.debuglog=function(E){x(N)&&(N=q.env.NODE_DEBUG||"");E=E.toUpperCase();if(!J[E])if((new RegExp("\\b"+E+"\\b",
"i")).test(N)){var L=q.pid;J[E]=function(){var Q=C.format.apply(C,arguments);console.error("%s %d: %s",E,L,Q)}}else J[E]=function(){};return J[E]};C.inspect=m;m.colors={bold:[1,22],italic:[3,23],underline:[4,24],inverse:[7,27],white:[37,39],grey:[90,39],black:[30,39],blue:[34,39],cyan:[36,39],green:[32,39],magenta:[35,39],red:[31,39],yellow:[33,39]};m.styles={special:"cyan",number:"yellow","boolean":"yellow",undefined:"grey","null":"bold",string:"green",date:"magenta",regexp:"red"};C.isArray=p;C.isBoolean=
r;C.isNull=function(E){return null===E};C.isNullOrUndefined=function(E){return null==E};C.isNumber=t;C.isString=w;C.isSymbol=function(E){return"symbol"===typeof E};C.isUndefined=x;C.isRegExp=y;C.isObject=A;C.isDate=z;C.isError=F;C.isFunction=D;C.isPrimitive=function(E){return null===E||"boolean"===typeof E||"number"===typeof E||"string"===typeof E||"symbol"===typeof E||"undefined"===typeof E};C.isBuffer=a("./support/isBuffer");var M="Jan Feb Mar Apr May Jun Jul Aug Sep Oct Nov Dec".split(" ");C.log=
function(){console.log("%s - %s",B(),C.format.apply(C,arguments))};C.inherits=a("inherits");C._extend=function(E,L){if(!L||!A(L))return E;for(var Q=Object.keys(L),S=Q.length;S--;)E[Q[S]]=L[Q[S]];return E}}).call(this,a("_process"),"undefined"!==typeof la?la:"undefined"!==typeof self?self:"undefined"!==typeof window?window:{})},{"./support/isBuffer":75,_process:500,inherits:74}],77:[function(a,G,C){G.exports=function(q){return atob(q)}},{}],78:[function(a,G,C){function q(m){for(var f=0,b=0;b<m.length;++b)f+=
m[b];return f}G.exports=function(m,f){for(var b=f.length,k=Array(b+1),e=0;e<b;++e){for(var h=Array(b+1),l=0;l<=b;++l)h[l]=m[l][e];k[e]=h}k[b]=Array(b+1);for(e=0;e<=b;++e)k[b][e]=1;m=Array(b+1);for(e=0;e<b;++e)m[e]=f[e];m[b]=1;f=n(k,m);k=q(f[b+1]);0===k&&(k=1);m=Array(b+1);for(e=0;e<=b;++e)m[e]=q(f[e])/k;return m};var n=a("robust-linear-solve")},{"robust-linear-solve":519}],79:[function(a,G,C){function q(k){var e=k.length;if(0<e%4)throw Error("Invalid string. Length must be a multiple of 4");k=k.indexOf("\x3d");
-1===k&&(k=e);return[k,k===e?0:4-k%4]}function n(k,e,h){for(var l=[],c=e;c<h;c+=3)e=(k[c]<<16&16711680)+(k[c+1]<<8&65280)+(k[c+2]&255),l.push(m[e>>18&63]+m[e>>12&63]+m[e>>6&63]+m[e&63]);return l.join("")}C.byteLength=function(k){k=q(k);var e=k[1];return 3*(k[0]+e)/4-e};C.toByteArray=function(k){var e=q(k);var h=e[0];e=e[1];var l=new b(3*(h+e)/4-e),c=0,g=0<e?h-4:h,d;for(d=0;d<g;d+=4)h=f[k.charCodeAt(d)]<<18|f[k.charCodeAt(d+1)]<<12|f[k.charCodeAt(d+2)]<<6|f[k.charCodeAt(d+3)],l[c++]=h>>16&255,l[c++]=
h>>8&255,l[c++]=h&255;2===e&&(h=f[k.charCodeAt(d)]<<2|f[k.charCodeAt(d+1)]>>4,l[c++]=h&255);1===e&&(h=f[k.charCodeAt(d)]<<10|f[k.charCodeAt(d+1)]<<4|f[k.charCodeAt(d+2)]>>2,l[c++]=h>>8&255,l[c++]=h&255);return l};C.fromByteArray=function(k){for(var e=k.length,h=e%3,l=[],c=0,g=e-h;c<g;c+=16383)l.push(n(k,c,c+16383>g?g:c+16383));1===h?(k=k[e-1],l.push(m[k>>2]+m[k<<4&63]+"\x3d\x3d")):2===h&&(k=(k[e-2]<<8)+k[e-1],l.push(m[k>>10]+m[k>>4&63]+m[k<<2&63]+"\x3d"));return l.join("")};var m=[],f=[],b="undefined"!==
typeof Uint8Array?Uint8Array:Array;for(a=0;64>a;++a)m[a]="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/"[a],f["ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/".charCodeAt(a)]=a;f[45]=62;f[95]=63},{}],80:[function(a,G,C){var q=a("./lib/rationalize");G.exports=function(n,m){return q(n[0].mul(m[1]).add(m[0].mul(n[1])),n[1].mul(m[1]))}},{"./lib/rationalize":90}],81:[function(a,G,C){G.exports=function(q,n){return q[0].mul(n[1]).cmp(n[0].mul(q[1]))}},{}],82:[function(a,
G,C){var q=a("./lib/rationalize");G.exports=function(n,m){return q(n[0].mul(m[1]),n[1].mul(m[0]))}},{"./lib/rationalize":90}],83:[function(a,G,C){function q(h,l){if(n(h))return l?e(h,q(l)):[h[0].clone(),h[1].clone()];var c=0;if(m(h))h=h.clone();else if("string"===typeof h)h=b(h);else{if(0===h)return[f(0),f(1)];if(h!==Math.floor(h))for(;h!==Math.floor(h);)h*=Math.pow(2,256),c-=256;h=f(h)}if(n(l))h.mul(l[1]),l=l[0].clone();else if(m(l))l=l.clone();else if("string"===typeof l)l=b(l);else if(l){if(l!==
Math.floor(l))for(;l!==Math.floor(l);)l*=Math.pow(2,256),c+=256;l=f(l)}else l=f(1);0<c?h=h.ushln(c):0>c&&(l=l.ushln(-c));return k(h,l)}var n=a("./is-rat"),m=a("./lib/is-bn"),f=a("./lib/num-to-bn"),b=a("./lib/str-to-bn"),k=a("./lib/rationalize"),e=a("./div");G.exports=q},{"./div":82,"./is-rat":84,"./lib/is-bn":88,"./lib/num-to-bn":89,"./lib/rationalize":90,"./lib/str-to-bn":91}],84:[function(a,G,C){var q=a("./lib/is-bn");G.exports=function(n){return Array.isArray(n)&&2===n.length&&q(n[0])&&q(n[1])}},
{"./lib/is-bn":88}],85:[function(a,G,C){var q=a("bn.js");G.exports=function(n){return n.cmp(new q(0))}},{"bn.js":99}],86:[function(a,G,C){var q=a("./bn-sign");G.exports=function(n){var m=n.length,f=n.words,b=0;if(1===m)b=f[0];else if(2===m)b=f[0]+67108864*f[1];else for(var k=0;k<m;k++)b+=f[k]*Math.pow(67108864,k);return q(n)*b}},{"./bn-sign":85}],87:[function(a,G,C){var q=a("double-bits"),n=a("bit-twiddle").countTrailingZeros;G.exports=function(m){var f=n(q.lo(m));if(32>f)return f;m=n(q.hi(m));return 20<
m?52:m+32}},{"bit-twiddle":97,"double-bits":173}],88:[function(a,G,C){a("bn.js");G.exports=function(q){return q&&"object"===typeof q&&!!q.words}},{"bn.js":99}],89:[function(a,G,C){var q=a("bn.js"),n=a("double-bits");G.exports=function(m){var f=n.exponent(m);return 52>f?new q(m):(new q(m*Math.pow(2,52-f))).ushln(f-52)}},{"bn.js":99,"double-bits":173}],90:[function(a,G,C){var q=a("./num-to-bn"),n=a("./bn-sign");G.exports=function(m,f){var b=n(m),k=n(f);if(0===b)return[q(0),q(1)];if(0===k)return[q(0),
q(0)];0>k&&(m=m.neg(),f=f.neg());b=m.gcd(f);return b.cmpn(1)?[m.div(b),f.div(b)]:[m,f]}},{"./bn-sign":85,"./num-to-bn":89}],91:[function(a,G,C){var q=a("bn.js");G.exports=function(n){return new q(n)}},{"bn.js":99}],92:[function(a,G,C){var q=a("./lib/rationalize");G.exports=function(n,m){return q(n[0].mul(m[0]),n[1].mul(m[1]))}},{"./lib/rationalize":90}],93:[function(a,G,C){var q=a("./lib/bn-sign");G.exports=function(n){return q(n[0])*q(n[1])}},{"./lib/bn-sign":85}],94:[function(a,G,C){var q=a("./lib/rationalize");
G.exports=function(n,m){return q(n[0].mul(m[1]).sub(n[1].mul(m[0])),n[1].mul(m[1]))}},{"./lib/rationalize":90}],95:[function(a,G,C){var q=a("./lib/bn-to-num"),n=a("./lib/ctz");G.exports=function(m){var f=m[0];m=m[1];if(0===f.cmpn(0))return 0;var b=f.abs().divmod(m.abs()),k=q(b.div);b=b.mod;f=f.negative!==m.negative?-1:1;if(0===b.cmpn(0))return f*k;if(k){var e=n(k)+4;m=q(b.ushln(e).divRound(m));return f*(k+m*Math.pow(2,-e))}k=m.bitLength()-b.bitLength()+53;m=q(b.ushln(k).divRound(m));if(1023>k)return f*
m*Math.pow(2,-k);m*=Math.pow(2,-1023);return f*m*Math.pow(2,1023-k)}},{"./lib/bn-to-num":86,"./lib/ctz":87}],96:[function(a,G,C){function q(m,f,b,k,e){m=["function ",m,"(a,l,h,",k.join(","),"){",e?"":"var i\x3d",b?"l-1":"h+1",";while(l\x3c\x3dh){var m\x3d(l+h)\x3e\x3e\x3e1,x\x3da[m]"];e?0>f.indexOf("c")?m.push(";if(x\x3d\x3d\x3dy){return m}else if(x\x3c\x3dy){"):m.push(";var p\x3dc(x,y);if(p\x3d\x3d\x3d0){return m}else if(p\x3c\x3d0){"):m.push(";if(",f,"){i\x3dm;");b?m.push("l\x3dm+1}else{h\x3dm-1}"):
m.push("h\x3dm-1}else{l\x3dm+1}");m.push("}");e?m.push("return -1};"):m.push("return i};");return m.join("")}function n(m,f,b,k){return(new Function([q("A","x"+m+"y",f,["y"],k),q("P","c(x,y)"+m+"0",f,["y","c"],k),"function dispatchBsearch",b,"(a,y,c,l,h){if(typeof(c)\x3d\x3d\x3d'function'){return P(a,(l\x3d\x3d\x3dvoid 0)?0:l|0,(h\x3d\x3d\x3dvoid 0)?a.length-1:h|0,y,c)}else{return A(a,(c\x3d\x3d\x3dvoid 0)?0:c|0,(l\x3d\x3d\x3dvoid 0)?a.length-1:l|0,y)}}return dispatchBsearch",b].join("")))()}G.exports=
{ge:n("\x3e\x3d",!1,"GE"),gt:n("\x3e",!1,"GT"),lt:n("\x3c",!0,"LT"),le:n("\x3c\x3d",!0,"LE"),eq:n("-",!0,"EQ",!0)}},{}],97:[function(a,G,C){function q(m){var f=32;(m&=-m)&&f--;m&65535&&(f-=16);m&16711935&&(f-=8);m&252645135&&(f-=4);m&858993459&&(f-=2);m&1431655765&&--f;return f}"use restrict";C.INT_BITS=32;C.INT_MAX=2147483647;C.INT_MIN=-2147483648;C.sign=function(m){return(0<m)-(0>m)};C.abs=function(m){var f=m>>31;return(m^f)-f};C.min=function(m,f){return f^(m^f)&-(m<f)};C.max=function(m,f){return m^
(m^f)&-(m<f)};C.isPow2=function(m){return!(m&m-1)&&!!m};C.log2=function(m){var f=(65535<m)<<4;m>>>=f;var b=(255<m)<<3;m>>>=b;f|=b;b=(15<m)<<2;m>>>=b;f|=b;b=(3<m)<<1;return f|b|m>>>b>>1};C.log10=function(m){return 1E9<=m?9:1E8<=m?8:1E7<=m?7:1E6<=m?6:1E5<=m?5:1E4<=m?4:1E3<=m?3:100<=m?2:10<=m?1:0};C.popCount=function(m){m-=m>>>1&1431655765;m=(m&858993459)+(m>>>2&858993459);return 16843009*(m+(m>>>4)&252645135)>>>24};C.countTrailingZeros=q;C.nextPow2=function(m){m+=0===m;--m;m|=m>>>1;m|=m>>>2;m|=m>>>
4;m|=m>>>8;return(m|m>>>16)+1};C.prevPow2=function(m){m|=m>>>1;m|=m>>>2;m|=m>>>4;m|=m>>>8;m|=m>>>16;return m-(m>>>1)};C.parity=function(m){m^=m>>>16;m^=m>>>8;return 27030>>>((m^m>>>4)&15)&1};var n=Array(256);(function(m){for(var f=0;256>f;++f){var b=f,k=f,e=7;for(b>>>=1;b;b>>>=1)k<<=1,k|=b&1,--e;m[f]=k<<e&255}})(n);C.reverse=function(m){return n[m&255]<<24|n[m>>>8&255]<<16|n[m>>>16&255]<<8|n[m>>>24&255]};C.interleave2=function(m,f){m&=65535;m=(m|m<<8)&16711935;m=(m|m<<4)&252645135;m=(m|m<<2)&858993459;
f&=65535;f=(f|f<<8)&16711935;f=(f|f<<4)&252645135;f=(f|f<<2)&858993459;return(m|m<<1)&1431655765|((f|f<<1)&1431655765)<<1};C.deinterleave2=function(m,f){m=m>>>f&1431655765;m=(m|m>>>1)&858993459;m=(m|m>>>2)&252645135;m=(m|m>>>4)&16711935;return((m|m>>>16)&65535)<<16>>16};C.interleave3=function(m,f,b){m&=1023;m=(m|m<<16)&4278190335;m=(m|m<<8)&251719695;m=(m|m<<4)&3272356035;f&=1023;f=(f|f<<16)&4278190335;f=(f|f<<8)&251719695;f=(f|f<<4)&3272356035;b&=1023;b=(b|b<<16)&4278190335;b=(b|b<<8)&251719695;
b=(b|b<<4)&3272356035;return(m|m<<2)&1227133513|((f|f<<2)&1227133513)<<1|((b|b<<2)&1227133513)<<2};C.deinterleave3=function(m,f){m=m>>>f&1227133513;m=(m|m>>>2)&3272356035;m=(m|m>>>4)&251719695;m=(m|m>>>8)&4278190335;return((m|m>>>16)&1023)<<22>>22};C.nextCombination=function(m){var f=m|m-1;return f+1|(~f&-~f)-1>>>q(m)+1}},{}],98:[function(a,G,C){function q(b,k,e,h,l,c,g){for(var d=0;d<k;d++){for(var p=0;p<e;p++)h[p]=b[p*k+d];n(h,l,c,g,e);for(p=0;p<e;p++)b[p*k+d]=l[p]}for(p=0;p<e;p++){for(d=0;d<k;d++)h[d]=
b[p*k+d];n(h,l,c,g,k);for(d=0;d<k;d++)b[p*k+d]=Math.sqrt(l[d])}}function n(b,k,e,h,l){e[0]=0;h[0]=-f;h[1]=+f;for(var c=1,g=0;c<l;c++){for(var d=(b[c]+c*c-(b[e[g]]+e[g]*e[g]))/(2*c-2*e[g]);d<=h[g];)g--,d=(b[c]+c*c-(b[e[g]]+e[g]*e[g]))/(2*c-2*e[g]);g++;e[g]=c;h[g]=d;h[g+1]=+f}for(g=c=0;c<l;c++){for(;h[g+1]<c;)g++;k[c]=(c-e[g])*(c-e[g])+b[e[g]]}}var m=a("clamp");G.exports=function(b,k){k||(k={});var e=null==k.cutoff?.25:k.cutoff,h=null==k.radius?8:k.radius,l=k.channel||0;if(ArrayBuffer.isView(b)||Array.isArray(b)){if(!k.width||
!k.height)throw Error("For raw data width and height should be provided by options");var c=k.width;var g=k.height;var d=b;var p=k.stride?k.stride:Math.floor(b.length/c/g)}else window.HTMLCanvasElement&&b instanceof window.HTMLCanvasElement?(g=b,d=g.getContext("2d"),c=g.width,g=g.height,d=d.getImageData(0,0,c,g),d=d.data,p=4):window.CanvasRenderingContext2D&&b instanceof window.CanvasRenderingContext2D?(g=b.canvas,c=g.width,g=g.height,d=b.getImageData(0,0,c,g),d=d.data,p=4):window.ImageData&&b instanceof
window.ImageData&&(c=b.width,g=b.height,d=b.data,p=4);var r=Math.max(c,g);if(window.Uint8ClampedArray&&d instanceof window.Uint8ClampedArray||window.Uint8Array&&d instanceof window.Uint8Array){var t=d;d=Array(c*g);b=0;for(k=t.length;b<k;b++)d[b]=t[b*p+l]/255}else if(1!==p)throw Error("Raw data can have only 1 value per pixel");l=Array(c*g);p=Array(c*g);t=Array(r);var w=Array(r),x=Array(r+1);r=Array(r);b=0;for(k=c*g;b<k;b++){var y=d[b];l[b]=1===y?0:0===y?f:Math.pow(Math.max(0,.5-y),2);p[b]=1===y?f:
0===y?0:Math.pow(Math.max(0,y-.5),2)}q(l,c,g,t,w,r,x);q(p,c,g,t,w,r,x);d=window.Float32Array?new Float32Array(c*g):Array(c*g);b=0;for(k=c*g;b<k;b++)d[b]=m(1-((l[b]-p[b])/h+e),0,1);return d};var f=1E20},{clamp:120}],99:[function(a,G,C){(function(q,n){function m(u,B){if(!u)throw Error(B||"Assertion failed");}function f(u,B){u.super_=B;var I=function(){};I.prototype=B.prototype;u.prototype=new I;u.prototype.constructor=u}function b(u,B,I){if(b.isBN(u))return u;this.negative=0;this.words=null;this.length=
0;this.red=null;if(null!==u){if("le"===B||"be"===B)I=B,B=10;this._init(u||0,B||10,I||"be")}}function k(u,B,I){var J=0;for(I=Math.min(u.length,I);B<I;B++){var N=u.charCodeAt(B)-48;J<<=4;J=49<=N&&54>=N?J|N-49+10:17<=N&&22>=N?J|N-17+10:J|N&15}return J}function e(u,B,I,J){var N=0;for(I=Math.min(u.length,I);B<I;B++){var M=u.charCodeAt(B)-48;N*=J;N=49<=M?N+(M-49+10):17<=M?N+(M-17+10):N+M}return N}function h(u,B,I){I.negative=B.negative^u.negative;var J=u.length+B.length|0;I.length=J;J=J-1|0;var N=u.words[0]|
0,M=B.words[0]|0;N*=M;var E=N/67108864|0;I.words[0]=N&67108863;for(var L=1;L<J;L++){var Q=E>>>26,S=E&67108863;E=Math.min(L,B.length-1);for(var R=Math.max(0,L-u.length+1);R<=E;R++)N=u.words[L-R|0]|0,M=B.words[R]|0,N=N*M+S,Q+=N/67108864|0,S=N&67108863;I.words[L]=S|0;E=Q|0}0!==E?I.words[L]=E|0:I.length--;return I.strip()}function l(u,B){this.x=u;this.y=B}function c(u,B){this.name=u;this.p=new b(B,16);this.n=this.p.bitLength();this.k=(new b(1)).iushln(this.n).isub(this.p);this.tmp=this._tmp()}function g(){c.call(this,
"k256","ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe fffffc2f")}function d(){c.call(this,"p224","ffffffff ffffffff ffffffff ffffffff 00000000 00000000 00000001")}function p(){c.call(this,"p192","ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff")}function r(){c.call(this,"25519","7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed")}function t(u){"string"===typeof u?(u=b._prime(u),this.m=u.p,this.prime=u):(m(u.gtn(1),"modulus must be greater than 1"),this.m=u,
this.prime=null)}function w(u){t.call(this,u);this.shift=this.m.bitLength();0!==this.shift%26&&(this.shift+=26-this.shift%26);this.r=(new b(1)).iushln(this.shift);this.r2=this.imod(this.r.sqr());this.rinv=this.r._invmp(this.m);this.minv=this.rinv.mul(this.r).isubn(1).div(this.m);this.minv=this.minv.umod(this.r);this.minv=this.r.sub(this.minv)}"object"===typeof q?q.exports=b:n.BN=b;b.BN=b;b.wordSize=26;try{var x=a("buffer").Buffer}catch(u){}b.isBN=function(u){return u instanceof b?!0:null!==u&&"object"===
typeof u&&u.constructor.wordSize===b.wordSize&&Array.isArray(u.words)};b.max=function(u,B){return 0<u.cmp(B)?u:B};b.min=function(u,B){return 0>u.cmp(B)?u:B};b.prototype._init=function(u,B,I){if("number"===typeof u)return this._initNumber(u,B,I);if("object"===typeof u)return this._initArray(u,B,I);"hex"===B&&(B=16);m(B===(B|0)&&2<=B&&36>=B);u=u.toString().replace(/\s+/g,"");var J=0;"-"===u[0]&&J++;16===B?this._parseHex(u,J):this._parseBase(u,B,J);"-"===u[0]&&(this.negative=1);this.strip();"le"===I&&
this._initArray(this.toArray(),B,I)};b.prototype._initNumber=function(u,B,I){0>u&&(this.negative=1,u=-u);67108864>u?(this.words=[u&67108863],this.length=1):4503599627370496>u?(this.words=[u&67108863,u/67108864&67108863],this.length=2):(m(9007199254740992>u),this.words=[u&67108863,u/67108864&67108863,1],this.length=3);"le"===I&&this._initArray(this.toArray(),B,I)};b.prototype._initArray=function(u,B,I){m("number"===typeof u.length);if(0>=u.length)return this.words=[0],this.length=1,this;this.length=
Math.ceil(u.length/3);this.words=Array(this.length);for(B=0;B<this.length;B++)this.words[B]=0;var J=0;if("be"===I)for(B=u.length-1,I=0;0<=B;B-=3){var N=u[B]|u[B-1]<<8|u[B-2]<<16;this.words[I]|=N<<J&67108863;this.words[I+1]=N>>>26-J&67108863;J+=24;26<=J&&(J-=26,I++)}else if("le"===I)for(I=B=0;B<u.length;B+=3)N=u[B]|u[B+1]<<8|u[B+2]<<16,this.words[I]|=N<<J&67108863,this.words[I+1]=N>>>26-J&67108863,J+=24,26<=J&&(J-=26,I++);return this.strip()};b.prototype._parseHex=function(u,B){this.length=Math.ceil((u.length-
B)/6);this.words=Array(this.length);for(var I=0;I<this.length;I++)this.words[I]=0;var J,N=0;I=u.length-6;for(J=0;I>=B;I-=6){var M=k(u,I,I+6);this.words[J]|=M<<N&67108863;this.words[J+1]|=M>>>26-N&4194303;N+=24;26<=N&&(N-=26,J++)}I+6!==B&&(M=k(u,B,I+6),this.words[J]|=M<<N&67108863,this.words[J+1]|=M>>>26-N&4194303);this.strip()};b.prototype._parseBase=function(u,B,I){this.words=[0];this.length=1;for(var J=0,N=1;67108863>=N;N*=B)J++;J--;N=N/B|0;var M=u.length-I,E=M%J;M=Math.min(M,M-E)+I;for(var L=I;L<
M;L+=J)I=e(u,L,L+J,B),this.imuln(N),67108864>this.words[0]+I?this.words[0]+=I:this._iaddn(I);if(0!==E){J=1;I=e(u,L,u.length,B);for(L=0;L<E;L++)J*=B;this.imuln(J);67108864>this.words[0]+I?this.words[0]+=I:this._iaddn(I)}};b.prototype.copy=function(u){u.words=Array(this.length);for(var B=0;B<this.length;B++)u.words[B]=this.words[B];u.length=this.length;u.negative=this.negative;u.red=this.red};b.prototype.clone=function(){var u=new b(null);this.copy(u);return u};b.prototype._expand=function(u){for(;this.length<
u;)this.words[this.length++]=0;return this};b.prototype.strip=function(){for(;1<this.length&&0===this.words[this.length-1];)this.length--;return this._normSign()};b.prototype._normSign=function(){1===this.length&&0===this.words[0]&&(this.negative=0);return this};b.prototype.inspect=function(){return(this.red?"\x3cBN-R: ":"\x3cBN: ")+this.toString(16)+"\x3e"};var y=" 0 00 000 0000 00000 000000 0000000 00000000 000000000 0000000000 00000000000 000000000000 0000000000000 00000000000000 000000000000000 0000000000000000 00000000000000000 000000000000000000 0000000000000000000 00000000000000000000 000000000000000000000 0000000000000000000000 00000000000000000000000 000000000000000000000000 0000000000000000000000000".split(" "),
A=[0,0,25,16,12,11,10,9,8,8,7,7,7,7,6,6,6,6,6,6,6,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5],z=[0,0,33554432,43046721,16777216,48828125,60466176,40353607,16777216,43046721,1E7,19487171,35831808,62748517,7529536,11390625,16777216,24137569,34012224,47045881,64E6,4084101,5153632,6436343,7962624,9765625,11881376,14348907,17210368,20511149,243E5,28629151,33554432,39135393,45435424,52521875,60466176];b.prototype.toString=function(u,B){u=u||10;B=B|0||1;if(16===u||"hex"===u){var I="";for(var J=u=0,N=0;N<this.length;N++){var M=
this.words[N],E=((M<<u|J)&16777215).toString(16);J=M>>>24-u&16777215;I=0!==J||N!==this.length-1?y[6-E.length]+E+I:E+I;u+=2;26<=u&&(u-=26,N--)}for(0!==J&&(I=J.toString(16)+I);0!==I.length%B;)I="0"+I;0!==this.negative&&(I="-"+I);return I}if(u===(u|0)&&2<=u&&36>=u){J=A[u];N=z[u];I="";M=this.clone();for(M.negative=0;!M.isZero();)E=M.modn(N).toString(u),M=M.idivn(N),I=M.isZero()?E+I:y[J-E.length]+E+I;for(this.isZero()&&(I="0"+I);0!==I.length%B;)I="0"+I;0!==this.negative&&(I="-"+I);return I}m(!1,"Base should be between 2 and 36")};
b.prototype.toNumber=function(){var u=this.words[0];2===this.length?u+=67108864*this.words[1]:3===this.length&&1===this.words[2]?u+=4503599627370496+67108864*this.words[1]:2<this.length&&m(!1,"Number can only safely store up to 53 bits");return 0!==this.negative?-u:u};b.prototype.toJSON=function(){return this.toString(16)};b.prototype.toBuffer=function(u,B){m("undefined"!==typeof x);return this.toArrayLike(x,u,B)};b.prototype.toArray=function(u,B){return this.toArrayLike(Array,u,B)};b.prototype.toArrayLike=
function(u,B,I){var J=this.byteLength();I=I||Math.max(1,J);m(J<=I,"byte array longer than desired length");m(0<I,"Requested array length \x3c\x3d 0");this.strip();var N="le"===B;u=new u(I);B=this.clone();if(N){for(N=0;!B.isZero();N++)J=B.andln(255),B.iushrn(8),u[N]=J;for(;N<I;N++)u[N]=0}else{for(N=0;N<I-J;N++)u[N]=0;for(N=0;!B.isZero();N++)J=B.andln(255),B.iushrn(8),u[I-N-1]=J}return u};b.prototype._countBits=Math.clz32?function(u){return 32-Math.clz32(u)}:function(u){var B=0;4096<=u&&(B+=13,u>>>=
13);64<=u&&(B+=7,u>>>=7);8<=u&&(B+=4,u>>>=4);2<=u&&(B+=2,u>>>=2);return B+u};b.prototype._zeroBits=function(u){if(0===u)return 26;var B=0;0===(u&8191)&&(B+=13,u>>>=13);0===(u&127)&&(B+=7,u>>>=7);0===(u&15)&&(B+=4,u>>>=4);0===(u&3)&&(B+=2,u>>>=2);0===(u&1)&&B++;return B};b.prototype.bitLength=function(){var u=this._countBits(this.words[this.length-1]);return 26*(this.length-1)+u};b.prototype.zeroBits=function(){if(this.isZero())return 0;for(var u=0,B=0;B<this.length;B++){var I=this._zeroBits(this.words[B]);
u+=I;if(26!==I)break}return u};b.prototype.byteLength=function(){return Math.ceil(this.bitLength()/8)};b.prototype.toTwos=function(u){return 0!==this.negative?this.abs().inotn(u).iaddn(1):this.clone()};b.prototype.fromTwos=function(u){return this.testn(u-1)?this.notn(u).iaddn(1).ineg():this.clone()};b.prototype.isNeg=function(){return 0!==this.negative};b.prototype.neg=function(){return this.clone().ineg()};b.prototype.ineg=function(){this.isZero()||(this.negative^=1);return this};b.prototype.iuor=
function(u){for(;this.length<u.length;)this.words[this.length++]=0;for(var B=0;B<u.length;B++)this.words[B]|=u.words[B];return this.strip()};b.prototype.ior=function(u){m(0===(this.negative|u.negative));return this.iuor(u)};b.prototype.or=function(u){return this.length>u.length?this.clone().ior(u):u.clone().ior(this)};b.prototype.uor=function(u){return this.length>u.length?this.clone().iuor(u):u.clone().iuor(this)};b.prototype.iuand=function(u){var B=this.length>u.length?u:this;for(var I=0;I<B.length;I++)this.words[I]&=
u.words[I];this.length=B.length;return this.strip()};b.prototype.iand=function(u){m(0===(this.negative|u.negative));return this.iuand(u)};b.prototype.and=function(u){return this.length>u.length?this.clone().iand(u):u.clone().iand(this)};b.prototype.uand=function(u){return this.length>u.length?this.clone().iuand(u):u.clone().iuand(this)};b.prototype.iuxor=function(u){if(this.length>u.length)var B=this;else B=u,u=this;for(var I=0;I<u.length;I++)this.words[I]=B.words[I]^u.words[I];if(this!==B)for(;I<
B.length;I++)this.words[I]=B.words[I];this.length=B.length;return this.strip()};b.prototype.ixor=function(u){m(0===(this.negative|u.negative));return this.iuxor(u)};b.prototype.xor=function(u){return this.length>u.length?this.clone().ixor(u):u.clone().ixor(this)};b.prototype.uxor=function(u){return this.length>u.length?this.clone().iuxor(u):u.clone().iuxor(this)};b.prototype.inotn=function(u){m("number"===typeof u&&0<=u);var B=Math.ceil(u/26)|0;u%=26;this._expand(B);0<u&&B--;for(var I=0;I<B;I++)this.words[I]=
~this.words[I]&67108863;0<u&&(this.words[I]=~this.words[I]&67108863>>26-u);return this.strip()};b.prototype.notn=function(u){return this.clone().inotn(u)};b.prototype.setn=function(u,B){m("number"===typeof u&&0<=u);var I=u/26|0;u%=26;this._expand(I+1);this.words[I]=B?this.words[I]|1<<u:this.words[I]&~(1<<u);return this.strip()};b.prototype.iadd=function(u){if(0!==this.negative&&0===u.negative)return this.negative=0,this.isub(u),this.negative^=1,this._normSign();if(0===this.negative&&0!==u.negative){u.negative=
0;var B=this.isub(u);u.negative=1;return B._normSign()}if(this.length>u.length)var I=this;else I=u,u=this;for(var J=B=0;J<u.length;J++)B=(I.words[J]|0)+(u.words[J]|0)+B,this.words[J]=B&67108863,B>>>=26;for(;0!==B&&J<I.length;J++)B=(I.words[J]|0)+B,this.words[J]=B&67108863,B>>>=26;this.length=I.length;if(0!==B)this.words[this.length]=B,this.length++;else if(I!==this)for(;J<I.length;J++)this.words[J]=I.words[J];return this};b.prototype.add=function(u){if(0!==u.negative&&0===this.negative){u.negative=
0;var B=this.sub(u);u.negative^=1;return B}return 0===u.negative&&0!==this.negative?(this.negative=0,B=u.sub(this),this.negative=1,B):this.length>u.length?this.clone().iadd(u):u.clone().iadd(this)};b.prototype.isub=function(u){if(0!==u.negative){u.negative=0;var B=this.iadd(u);u.negative=1;return B._normSign()}if(0!==this.negative)return this.negative=0,this.iadd(u),this.negative=1,this._normSign();B=this.cmp(u);if(0===B)return this.negative=0,this.length=1,this.words[0]=0,this;if(0<B)var I=this;
else I=u,u=this;for(var J=0,N=0;N<u.length;N++)B=(I.words[N]|0)-(u.words[N]|0)+J,J=B>>26,this.words[N]=B&67108863;for(;0!==J&&N<I.length;N++)B=(I.words[N]|0)+J,J=B>>26,this.words[N]=B&67108863;if(0===J&&N<I.length&&I!==this)for(;N<I.length;N++)this.words[N]=I.words[N];this.length=Math.max(this.length,N);I!==this&&(this.negative=1);return this.strip()};b.prototype.sub=function(u){return this.clone().isub(u)};var F=function(u,B,I){var J=u.words,N=B.words,M=I.words,E=0,L=J[0]|0,Q=L&8191,S=L>>>13,R=J[1]|
0;L=R&8191;var O=R>>>13,T=J[2]|0;R=T&8191;var V=T>>>13,X=J[3]|0;T=X&8191;var ba=X>>>13,aa=J[4]|0;X=aa&8191;var ka=aa>>>13,ha=J[5]|0;aa=ha&8191;var ca=ha>>>13,sa=J[6]|0;ha=sa&8191;var ma=sa>>>13,ra=J[7]|0;sa=ra&8191;var qa=ra>>>13,Y=J[8]|0;ra=Y&8191;Y>>>=13;var pa=J[9]|0;J=pa&8191;pa>>>=13;var oa=N[0]|0,ua=oa&8191,ya=oa>>>13,ja=N[1]|0;oa=ja&8191;var za=ja>>>13,Ba=N[2]|0;ja=Ba&8191;var Ma=Ba>>>13,Oa=N[3]|0;Ba=Oa&8191;var Ia=Oa>>>13,Pa=N[4]|0;Oa=Pa&8191;var Fa=Pa>>>13,Na=N[5]|0;Pa=Na&8191;var $a=Na>>>
13,cb=N[6]|0;Na=cb&8191;var mb=cb>>>13,Ka=N[7]|0;cb=Ka&8191;var Ua=Ka>>>13,Ea=N[8]|0;Ka=Ea&8191;Ea>>>=13;var Ya=N[9]|0;N=Ya&8191;Ya>>>=13;I.negative=u.negative^B.negative;I.length=19;var ab=Math.imul(Q,ua);u=Math.imul(Q,ya);u=u+Math.imul(S,ua)|0;B=Math.imul(S,ya);var Wa=(E+ab|0)+((u&8191)<<13)|0;E=(B+(u>>>13)|0)+(Wa>>>26)|0;Wa&=67108863;ab=Math.imul(L,ua);u=Math.imul(L,ya);u=u+Math.imul(O,ua)|0;B=Math.imul(O,ya);ab=ab+Math.imul(Q,oa)|0;u=u+Math.imul(Q,za)|0;u=u+Math.imul(S,oa)|0;B=B+Math.imul(S,za)|
0;var Ja=(E+ab|0)+((u&8191)<<13)|0;E=(B+(u>>>13)|0)+(Ja>>>26)|0;Ja&=67108863;ab=Math.imul(R,ua);u=Math.imul(R,ya);u=u+Math.imul(V,ua)|0;B=Math.imul(V,ya);ab=ab+Math.imul(L,oa)|0;u=u+Math.imul(L,za)|0;u=u+Math.imul(O,oa)|0;B=B+Math.imul(O,za)|0;ab=ab+Math.imul(Q,ja)|0;u=u+Math.imul(Q,Ma)|0;u=u+Math.imul(S,ja)|0;B=B+Math.imul(S,Ma)|0;var Sa=(E+ab|0)+((u&8191)<<13)|0;E=(B+(u>>>13)|0)+(Sa>>>26)|0;Sa&=67108863;ab=Math.imul(T,ua);u=Math.imul(T,ya);u=u+Math.imul(ba,ua)|0;B=Math.imul(ba,ya);ab=ab+Math.imul(R,
oa)|0;u=u+Math.imul(R,za)|0;u=u+Math.imul(V,oa)|0;B=B+Math.imul(V,za)|0;ab=ab+Math.imul(L,ja)|0;u=u+Math.imul(L,Ma)|0;u=u+Math.imul(O,ja)|0;B=B+Math.imul(O,Ma)|0;ab=ab+Math.imul(Q,Ba)|0;u=u+Math.imul(Q,Ia)|0;u=u+Math.imul(S,Ba)|0;B=B+Math.imul(S,Ia)|0;var fb=(E+ab|0)+((u&8191)<<13)|0;E=(B+(u>>>13)|0)+(fb>>>26)|0;fb&=67108863;ab=Math.imul(X,ua);u=Math.imul(X,ya);u=u+Math.imul(ka,ua)|0;B=Math.imul(ka,ya);ab=ab+Math.imul(T,oa)|0;u=u+Math.imul(T,za)|0;u=u+Math.imul(ba,oa)|0;B=B+Math.imul(ba,za)|0;ab=
ab+Math.imul(R,ja)|0;u=u+Math.imul(R,Ma)|0;u=u+Math.imul(V,ja)|0;B=B+Math.imul(V,Ma)|0;ab=ab+Math.imul(L,Ba)|0;u=u+Math.imul(L,Ia)|0;u=u+Math.imul(O,Ba)|0;B=B+Math.imul(O,Ia)|0;ab=ab+Math.imul(Q,Oa)|0;u=u+Math.imul(Q,Fa)|0;u=u+Math.imul(S,Oa)|0;B=B+Math.imul(S,Fa)|0;var nb=(E+ab|0)+((u&8191)<<13)|0;E=(B+(u>>>13)|0)+(nb>>>26)|0;nb&=67108863;ab=Math.imul(aa,ua);u=Math.imul(aa,ya);u=u+Math.imul(ca,ua)|0;B=Math.imul(ca,ya);ab=ab+Math.imul(X,oa)|0;u=u+Math.imul(X,za)|0;u=u+Math.imul(ka,oa)|0;B=B+Math.imul(ka,
za)|0;ab=ab+Math.imul(T,ja)|0;u=u+Math.imul(T,Ma)|0;u=u+Math.imul(ba,ja)|0;B=B+Math.imul(ba,Ma)|0;ab=ab+Math.imul(R,Ba)|0;u=u+Math.imul(R,Ia)|0;u=u+Math.imul(V,Ba)|0;B=B+Math.imul(V,Ia)|0;ab=ab+Math.imul(L,Oa)|0;u=u+Math.imul(L,Fa)|0;u=u+Math.imul(O,Oa)|0;B=B+Math.imul(O,Fa)|0;ab=ab+Math.imul(Q,Pa)|0;u=u+Math.imul(Q,$a)|0;u=u+Math.imul(S,Pa)|0;B=B+Math.imul(S,$a)|0;var Ha=(E+ab|0)+((u&8191)<<13)|0;E=(B+(u>>>13)|0)+(Ha>>>26)|0;Ha&=67108863;ab=Math.imul(ha,ua);u=Math.imul(ha,ya);u=u+Math.imul(ma,ua)|
0;B=Math.imul(ma,ya);ab=ab+Math.imul(aa,oa)|0;u=u+Math.imul(aa,za)|0;u=u+Math.imul(ca,oa)|0;B=B+Math.imul(ca,za)|0;ab=ab+Math.imul(X,ja)|0;u=u+Math.imul(X,Ma)|0;u=u+Math.imul(ka,ja)|0;B=B+Math.imul(ka,Ma)|0;ab=ab+Math.imul(T,Ba)|0;u=u+Math.imul(T,Ia)|0;u=u+Math.imul(ba,Ba)|0;B=B+Math.imul(ba,Ia)|0;ab=ab+Math.imul(R,Oa)|0;u=u+Math.imul(R,Fa)|0;u=u+Math.imul(V,Oa)|0;B=B+Math.imul(V,Fa)|0;ab=ab+Math.imul(L,Pa)|0;u=u+Math.imul(L,$a)|0;u=u+Math.imul(O,Pa)|0;B=B+Math.imul(O,$a)|0;ab=ab+Math.imul(Q,Na)|
0;u=u+Math.imul(Q,mb)|0;u=u+Math.imul(S,Na)|0;B=B+Math.imul(S,mb)|0;var Ca=(E+ab|0)+((u&8191)<<13)|0;E=(B+(u>>>13)|0)+(Ca>>>26)|0;Ca&=67108863;ab=Math.imul(sa,ua);u=Math.imul(sa,ya);u=u+Math.imul(qa,ua)|0;B=Math.imul(qa,ya);ab=ab+Math.imul(ha,oa)|0;u=u+Math.imul(ha,za)|0;u=u+Math.imul(ma,oa)|0;B=B+Math.imul(ma,za)|0;ab=ab+Math.imul(aa,ja)|0;u=u+Math.imul(aa,Ma)|0;u=u+Math.imul(ca,ja)|0;B=B+Math.imul(ca,Ma)|0;ab=ab+Math.imul(X,Ba)|0;u=u+Math.imul(X,Ia)|0;u=u+Math.imul(ka,Ba)|0;B=B+Math.imul(ka,Ia)|
0;ab=ab+Math.imul(T,Oa)|0;u=u+Math.imul(T,Fa)|0;u=u+Math.imul(ba,Oa)|0;B=B+Math.imul(ba,Fa)|0;ab=ab+Math.imul(R,Pa)|0;u=u+Math.imul(R,$a)|0;u=u+Math.imul(V,Pa)|0;B=B+Math.imul(V,$a)|0;ab=ab+Math.imul(L,Na)|0;u=u+Math.imul(L,mb)|0;u=u+Math.imul(O,Na)|0;B=B+Math.imul(O,mb)|0;ab=ab+Math.imul(Q,cb)|0;u=u+Math.imul(Q,Ua)|0;u=u+Math.imul(S,cb)|0;B=B+Math.imul(S,Ua)|0;var Qa=(E+ab|0)+((u&8191)<<13)|0;E=(B+(u>>>13)|0)+(Qa>>>26)|0;Qa&=67108863;ab=Math.imul(ra,ua);u=Math.imul(ra,ya);u=u+Math.imul(Y,ua)|0;B=
Math.imul(Y,ya);ab=ab+Math.imul(sa,oa)|0;u=u+Math.imul(sa,za)|0;u=u+Math.imul(qa,oa)|0;B=B+Math.imul(qa,za)|0;ab=ab+Math.imul(ha,ja)|0;u=u+Math.imul(ha,Ma)|0;u=u+Math.imul(ma,ja)|0;B=B+Math.imul(ma,Ma)|0;ab=ab+Math.imul(aa,Ba)|0;u=u+Math.imul(aa,Ia)|0;u=u+Math.imul(ca,Ba)|0;B=B+Math.imul(ca,Ia)|0;ab=ab+Math.imul(X,Oa)|0;u=u+Math.imul(X,Fa)|0;u=u+Math.imul(ka,Oa)|0;B=B+Math.imul(ka,Fa)|0;ab=ab+Math.imul(T,Pa)|0;u=u+Math.imul(T,$a)|0;u=u+Math.imul(ba,Pa)|0;B=B+Math.imul(ba,$a)|0;ab=ab+Math.imul(R,Na)|
0;u=u+Math.imul(R,mb)|0;u=u+Math.imul(V,Na)|0;B=B+Math.imul(V,mb)|0;ab=ab+Math.imul(L,cb)|0;u=u+Math.imul(L,Ua)|0;u=u+Math.imul(O,cb)|0;B=B+Math.imul(O,Ua)|0;ab=ab+Math.imul(Q,Ka)|0;u=u+Math.imul(Q,Ea)|0;u=u+Math.imul(S,Ka)|0;B=B+Math.imul(S,Ea)|0;var gb=(E+ab|0)+((u&8191)<<13)|0;E=(B+(u>>>13)|0)+(gb>>>26)|0;gb&=67108863;ab=Math.imul(J,ua);u=Math.imul(J,ya);u=u+Math.imul(pa,ua)|0;B=Math.imul(pa,ya);ab=ab+Math.imul(ra,oa)|0;u=u+Math.imul(ra,za)|0;u=u+Math.imul(Y,oa)|0;B=B+Math.imul(Y,za)|0;ab=ab+Math.imul(sa,
ja)|0;u=u+Math.imul(sa,Ma)|0;u=u+Math.imul(qa,ja)|0;B=B+Math.imul(qa,Ma)|0;ab=ab+Math.imul(ha,Ba)|0;u=u+Math.imul(ha,Ia)|0;u=u+Math.imul(ma,Ba)|0;B=B+Math.imul(ma,Ia)|0;ab=ab+Math.imul(aa,Oa)|0;u=u+Math.imul(aa,Fa)|0;u=u+Math.imul(ca,Oa)|0;B=B+Math.imul(ca,Fa)|0;ab=ab+Math.imul(X,Pa)|0;u=u+Math.imul(X,$a)|0;u=u+Math.imul(ka,Pa)|0;B=B+Math.imul(ka,$a)|0;ab=ab+Math.imul(T,Na)|0;u=u+Math.imul(T,mb)|0;u=u+Math.imul(ba,Na)|0;B=B+Math.imul(ba,mb)|0;ab=ab+Math.imul(R,cb)|0;u=u+Math.imul(R,Ua)|0;u=u+Math.imul(V,
cb)|0;B=B+Math.imul(V,Ua)|0;ab=ab+Math.imul(L,Ka)|0;u=u+Math.imul(L,Ea)|0;u=u+Math.imul(O,Ka)|0;B=B+Math.imul(O,Ea)|0;ab=ab+Math.imul(Q,N)|0;u=u+Math.imul(Q,Ya)|0;u=u+Math.imul(S,N)|0;B=B+Math.imul(S,Ya)|0;Q=(E+ab|0)+((u&8191)<<13)|0;E=(B+(u>>>13)|0)+(Q>>>26)|0;Q&=67108863;ab=Math.imul(J,oa);u=Math.imul(J,za);u=u+Math.imul(pa,oa)|0;B=Math.imul(pa,za);ab=ab+Math.imul(ra,ja)|0;u=u+Math.imul(ra,Ma)|0;u=u+Math.imul(Y,ja)|0;B=B+Math.imul(Y,Ma)|0;ab=ab+Math.imul(sa,Ba)|0;u=u+Math.imul(sa,Ia)|0;u=u+Math.imul(qa,
Ba)|0;B=B+Math.imul(qa,Ia)|0;ab=ab+Math.imul(ha,Oa)|0;u=u+Math.imul(ha,Fa)|0;u=u+Math.imul(ma,Oa)|0;B=B+Math.imul(ma,Fa)|0;ab=ab+Math.imul(aa,Pa)|0;u=u+Math.imul(aa,$a)|0;u=u+Math.imul(ca,Pa)|0;B=B+Math.imul(ca,$a)|0;ab=ab+Math.imul(X,Na)|0;u=u+Math.imul(X,mb)|0;u=u+Math.imul(ka,Na)|0;B=B+Math.imul(ka,mb)|0;ab=ab+Math.imul(T,cb)|0;u=u+Math.imul(T,Ua)|0;u=u+Math.imul(ba,cb)|0;B=B+Math.imul(ba,Ua)|0;ab=ab+Math.imul(R,Ka)|0;u=u+Math.imul(R,Ea)|0;u=u+Math.imul(V,Ka)|0;B=B+Math.imul(V,Ea)|0;ab=ab+Math.imul(L,
N)|0;u=u+Math.imul(L,Ya)|0;u=u+Math.imul(O,N)|0;B=B+Math.imul(O,Ya)|0;L=(E+ab|0)+((u&8191)<<13)|0;E=(B+(u>>>13)|0)+(L>>>26)|0;L&=67108863;ab=Math.imul(J,ja);u=Math.imul(J,Ma);u=u+Math.imul(pa,ja)|0;B=Math.imul(pa,Ma);ab=ab+Math.imul(ra,Ba)|0;u=u+Math.imul(ra,Ia)|0;u=u+Math.imul(Y,Ba)|0;B=B+Math.imul(Y,Ia)|0;ab=ab+Math.imul(sa,Oa)|0;u=u+Math.imul(sa,Fa)|0;u=u+Math.imul(qa,Oa)|0;B=B+Math.imul(qa,Fa)|0;ab=ab+Math.imul(ha,Pa)|0;u=u+Math.imul(ha,$a)|0;u=u+Math.imul(ma,Pa)|0;B=B+Math.imul(ma,$a)|0;ab=ab+
Math.imul(aa,Na)|0;u=u+Math.imul(aa,mb)|0;u=u+Math.imul(ca,Na)|0;B=B+Math.imul(ca,mb)|0;ab=ab+Math.imul(X,cb)|0;u=u+Math.imul(X,Ua)|0;u=u+Math.imul(ka,cb)|0;B=B+Math.imul(ka,Ua)|0;ab=ab+Math.imul(T,Ka)|0;u=u+Math.imul(T,Ea)|0;u=u+Math.imul(ba,Ka)|0;B=B+Math.imul(ba,Ea)|0;ab=ab+Math.imul(R,N)|0;u=u+Math.imul(R,Ya)|0;u=u+Math.imul(V,N)|0;B=B+Math.imul(V,Ya)|0;R=(E+ab|0)+((u&8191)<<13)|0;E=(B+(u>>>13)|0)+(R>>>26)|0;R&=67108863;ab=Math.imul(J,Ba);u=Math.imul(J,Ia);u=u+Math.imul(pa,Ba)|0;B=Math.imul(pa,
Ia);ab=ab+Math.imul(ra,Oa)|0;u=u+Math.imul(ra,Fa)|0;u=u+Math.imul(Y,Oa)|0;B=B+Math.imul(Y,Fa)|0;ab=ab+Math.imul(sa,Pa)|0;u=u+Math.imul(sa,$a)|0;u=u+Math.imul(qa,Pa)|0;B=B+Math.imul(qa,$a)|0;ab=ab+Math.imul(ha,Na)|0;u=u+Math.imul(ha,mb)|0;u=u+Math.imul(ma,Na)|0;B=B+Math.imul(ma,mb)|0;ab=ab+Math.imul(aa,cb)|0;u=u+Math.imul(aa,Ua)|0;u=u+Math.imul(ca,cb)|0;B=B+Math.imul(ca,Ua)|0;ab=ab+Math.imul(X,Ka)|0;u=u+Math.imul(X,Ea)|0;u=u+Math.imul(ka,Ka)|0;B=B+Math.imul(ka,Ea)|0;ab=ab+Math.imul(T,N)|0;u=u+Math.imul(T,
Ya)|0;u=u+Math.imul(ba,N)|0;B=B+Math.imul(ba,Ya)|0;T=(E+ab|0)+((u&8191)<<13)|0;E=(B+(u>>>13)|0)+(T>>>26)|0;T&=67108863;ab=Math.imul(J,Oa);u=Math.imul(J,Fa);u=u+Math.imul(pa,Oa)|0;B=Math.imul(pa,Fa);ab=ab+Math.imul(ra,Pa)|0;u=u+Math.imul(ra,$a)|0;u=u+Math.imul(Y,Pa)|0;B=B+Math.imul(Y,$a)|0;ab=ab+Math.imul(sa,Na)|0;u=u+Math.imul(sa,mb)|0;u=u+Math.imul(qa,Na)|0;B=B+Math.imul(qa,mb)|0;ab=ab+Math.imul(ha,cb)|0;u=u+Math.imul(ha,Ua)|0;u=u+Math.imul(ma,cb)|0;B=B+Math.imul(ma,Ua)|0;ab=ab+Math.imul(aa,Ka)|
0;u=u+Math.imul(aa,Ea)|0;u=u+Math.imul(ca,Ka)|0;B=B+Math.imul(ca,Ea)|0;ab=ab+Math.imul(X,N)|0;u=u+Math.imul(X,Ya)|0;u=u+Math.imul(ka,N)|0;B=B+Math.imul(ka,Ya)|0;X=(E+ab|0)+((u&8191)<<13)|0;E=(B+(u>>>13)|0)+(X>>>26)|0;X&=67108863;ab=Math.imul(J,Pa);u=Math.imul(J,$a);u=u+Math.imul(pa,Pa)|0;B=Math.imul(pa,$a);ab=ab+Math.imul(ra,Na)|0;u=u+Math.imul(ra,mb)|0;u=u+Math.imul(Y,Na)|0;B=B+Math.imul(Y,mb)|0;ab=ab+Math.imul(sa,cb)|0;u=u+Math.imul(sa,Ua)|0;u=u+Math.imul(qa,cb)|0;B=B+Math.imul(qa,Ua)|0;ab=ab+Math.imul(ha,
Ka)|0;u=u+Math.imul(ha,Ea)|0;u=u+Math.imul(ma,Ka)|0;B=B+Math.imul(ma,Ea)|0;ab=ab+Math.imul(aa,N)|0;u=u+Math.imul(aa,Ya)|0;u=u+Math.imul(ca,N)|0;B=B+Math.imul(ca,Ya)|0;aa=(E+ab|0)+((u&8191)<<13)|0;E=(B+(u>>>13)|0)+(aa>>>26)|0;aa&=67108863;ab=Math.imul(J,Na);u=Math.imul(J,mb);u=u+Math.imul(pa,Na)|0;B=Math.imul(pa,mb);ab=ab+Math.imul(ra,cb)|0;u=u+Math.imul(ra,Ua)|0;u=u+Math.imul(Y,cb)|0;B=B+Math.imul(Y,Ua)|0;ab=ab+Math.imul(sa,Ka)|0;u=u+Math.imul(sa,Ea)|0;u=u+Math.imul(qa,Ka)|0;B=B+Math.imul(qa,Ea)|
0;ab=ab+Math.imul(ha,N)|0;u=u+Math.imul(ha,Ya)|0;u=u+Math.imul(ma,N)|0;B=B+Math.imul(ma,Ya)|0;ha=(E+ab|0)+((u&8191)<<13)|0;E=(B+(u>>>13)|0)+(ha>>>26)|0;ha&=67108863;ab=Math.imul(J,cb);u=Math.imul(J,Ua);u=u+Math.imul(pa,cb)|0;B=Math.imul(pa,Ua);ab=ab+Math.imul(ra,Ka)|0;u=u+Math.imul(ra,Ea)|0;u=u+Math.imul(Y,Ka)|0;B=B+Math.imul(Y,Ea)|0;ab=ab+Math.imul(sa,N)|0;u=u+Math.imul(sa,Ya)|0;u=u+Math.imul(qa,N)|0;B=B+Math.imul(qa,Ya)|0;sa=(E+ab|0)+((u&8191)<<13)|0;E=(B+(u>>>13)|0)+(sa>>>26)|0;sa&=67108863;ab=
Math.imul(J,Ka);u=Math.imul(J,Ea);u=u+Math.imul(pa,Ka)|0;B=Math.imul(pa,Ea);ab=ab+Math.imul(ra,N)|0;u=u+Math.imul(ra,Ya)|0;u=u+Math.imul(Y,N)|0;B=B+Math.imul(Y,Ya)|0;ra=(E+ab|0)+((u&8191)<<13)|0;E=(B+(u>>>13)|0)+(ra>>>26)|0;ra&=67108863;ab=Math.imul(J,N);u=Math.imul(J,Ya);u=u+Math.imul(pa,N)|0;B=Math.imul(pa,Ya);S=(E+ab|0)+((u&8191)<<13)|0;E=(B+(u>>>13)|0)+(S>>>26)|0;M[0]=Wa;M[1]=Ja;M[2]=Sa;M[3]=fb;M[4]=nb;M[5]=Ha;M[6]=Ca;M[7]=Qa;M[8]=gb;M[9]=Q;M[10]=L;M[11]=R;M[12]=T;M[13]=X;M[14]=aa;M[15]=ha;M[16]=
sa;M[17]=ra;M[18]=S&67108863;0!==E&&(M[19]=E,I.length++);return I};Math.imul||(F=h);b.prototype.mulTo=function(u,B){var I=this.length+u.length;if(10===this.length&&10===u.length)u=F(this,u,B);else if(63>I)u=h(this,u,B);else if(1024>I){B.negative=u.negative^this.negative;B.length=this.length+u.length;for(var J=0,N=I=0;N<B.length-1;N++){var M=I;I=0;J&=67108863;for(var E=Math.min(N,u.length-1),L=Math.max(0,N-this.length+1);L<=E;L++){var Q=(this.words[N-L]|0)*(u.words[L]|0),S=Q&67108863;M=M+(Q/67108864|
0)|0;S=S+J|0;J=S&67108863;M=M+(S>>>26)|0;I+=M>>>26;M&=67108863}B.words[N]=J;J=M}0!==J?B.words[N]=J:B.length--;u=B.strip()}else u=(new l).mulp(this,u,B);return u};l.prototype.makeRBT=function(u){for(var B=Array(u),I=b.prototype._countBits(u)-1,J=0;J<u;J++)B[J]=this.revBin(J,I,u);return B};l.prototype.revBin=function(u,B,I){if(0===u||u===I-1)return u;for(var J=I=0;J<B;J++)I|=(u&1)<<B-J-1,u>>=1;return I};l.prototype.permute=function(u,B,I,J,N,M){for(var E=0;E<M;E++)J[E]=B[u[E]],N[E]=I[u[E]]};l.prototype.transform=
function(u,B,I,J,N,M){this.permute(M,u,B,I,J,N);for(u=1;u<N;u<<=1){B=u<<1;M=Math.cos(2*Math.PI/B);for(var E=Math.sin(2*Math.PI/B),L=0;L<N;L+=B)for(var Q=M,S=E,R=0;R<u;R++){var O=I[L+R],T=J[L+R],V=I[L+R+u],X=J[L+R+u],ba=Q*V-S*X;X=Q*X+S*V;V=ba;I[L+R]=O+V;J[L+R]=T+X;I[L+R+u]=O-V;J[L+R+u]=T-X;R!==B&&(ba=M*Q-E*S,S=M*S+E*Q,Q=ba)}}};l.prototype.guessLen13b=function(u,B){u=Math.max(B,u)|1;B=u&1;var I=0;for(u=u/2|0;u;u>>>=1)I++;return 1<<I+1+B};l.prototype.conjugate=function(u,B,I){if(!(1>=I))for(var J=0;J<
I/2;J++){var N=u[J];u[J]=u[I-J-1];u[I-J-1]=N;N=B[J];B[J]=-B[I-J-1];B[I-J-1]=-N}};l.prototype.normalize13b=function(u,B){for(var I=0,J=0;J<B/2;J++)I=8192*Math.round(u[2*J+1]/B)+Math.round(u[2*J]/B)+I,u[J]=I&67108863,I=67108864>I?0:I/67108864|0;return u};l.prototype.convert13b=function(u,B,I,J){for(var N=0,M=0;M<B;M++)N+=u[M]|0,I[2*M]=N&8191,N>>>=13,I[2*M+1]=N&8191,N>>>=13;for(M=2*B;M<J;++M)I[M]=0;m(0===N);m(0===(N&-8192))};l.prototype.stub=function(u){for(var B=Array(u),I=0;I<u;I++)B[I]=0;return B};
l.prototype.mulp=function(u,B,I){var J=2*this.guessLen13b(u.length,B.length),N=this.makeRBT(J),M=this.stub(J),E=Array(J),L=Array(J),Q=Array(J),S=Array(J),R=Array(J),O=Array(J),T=I.words;T.length=J;this.convert13b(u.words,u.length,E,J);this.convert13b(B.words,B.length,S,J);this.transform(E,M,L,Q,J,N);this.transform(S,M,R,O,J,N);for(E=0;E<J;E++)S=L[E]*R[E]-Q[E]*O[E],Q[E]=L[E]*O[E]+Q[E]*R[E],L[E]=S;this.conjugate(L,Q,J);this.transform(L,Q,T,M,J,N);this.conjugate(T,M,J);this.normalize13b(T,J);I.negative=
u.negative^B.negative;I.length=u.length+B.length;return I.strip()};b.prototype.mul=function(u){var B=new b(null);B.words=Array(this.length+u.length);return this.mulTo(u,B)};b.prototype.mulf=function(u){var B=new b(null);B.words=Array(this.length+u.length);return(new l).mulp(this,u,B)};b.prototype.imul=function(u){return this.clone().mulTo(u,this)};b.prototype.imuln=function(u){m("number"===typeof u);m(67108864>u);for(var B=0,I=0;I<this.length;I++){var J=(this.words[I]|0)*u,N=(J&67108863)+(B&67108863);
B>>=26;B+=J/67108864|0;B+=N>>>26;this.words[I]=N&67108863}0!==B&&(this.words[I]=B,this.length++);return this};b.prototype.muln=function(u){return this.clone().imuln(u)};b.prototype.sqr=function(){return this.mul(this)};b.prototype.isqr=function(){return this.imul(this.clone())};b.prototype.pow=function(u){for(var B=Array(u.bitLength()),I=0;I<B.length;I++){var J=I%26;B[I]=(u.words[I/26|0]&1<<J)>>>J}if(0===B.length)return new b(1);u=this;for(I=0;I<B.length&&0===B[I];I++,u=u.sqr());if(++I<B.length)for(J=
u.sqr();I<B.length;I++,J=J.sqr())0!==B[I]&&(u=u.mul(J));return u};b.prototype.iushln=function(u){m("number"===typeof u&&0<=u);var B=u%26;u=(u-B)/26;var I=67108863>>>26-B<<26-B,J;if(0!==B){var N=0;for(J=0;J<this.length;J++){var M=this.words[J]&I;this.words[J]=(this.words[J]|0)-M<<B|N;N=M>>>26-B}N&&(this.words[J]=N,this.length++)}if(0!==u){for(J=this.length-1;0<=J;J--)this.words[J+u]=this.words[J];for(J=0;J<u;J++)this.words[J]=0;this.length+=u}return this.strip()};b.prototype.ishln=function(u){m(0===
this.negative);return this.iushln(u)};b.prototype.iushrn=function(u,B,I){m("number"===typeof u&&0<=u);var J=u%26,N=Math.min((u-J)/26,this.length);u=67108863^67108863>>>J<<J;B=Math.max(0,(B?(B-B%26)/26:0)-N);if(I){for(var M=0;M<N;M++)I.words[M]=this.words[M];I.length=N}if(0!==N)if(this.length>N)for(this.length-=N,M=0;M<this.length;M++)this.words[M]=this.words[M+N];else this.words[0]=0,this.length=1;N=0;for(M=this.length-1;0<=M&&(0!==N||M>=B);M--){var E=this.words[M]|0;this.words[M]=N<<26-J|E>>>J;N=
E&u}I&&0!==N&&(I.words[I.length++]=N);0===this.length&&(this.words[0]=0,this.length=1);return this.strip()};b.prototype.ishrn=function(u,B,I){m(0===this.negative);return this.iushrn(u,B,I)};b.prototype.shln=function(u){return this.clone().ishln(u)};b.prototype.ushln=function(u){return this.clone().iushln(u)};b.prototype.shrn=function(u){return this.clone().ishrn(u)};b.prototype.ushrn=function(u){return this.clone().iushrn(u)};b.prototype.testn=function(u){m("number"===typeof u&&0<=u);var B=u%26;u=
(u-B)/26;return this.length<=u?!1:!!(this.words[u]&1<<B)};b.prototype.imaskn=function(u){m("number"===typeof u&&0<=u);var B=u%26;u=(u-B)/26;m(0===this.negative,"imaskn works only with positive numbers");if(this.length<=u)return this;0!==B&&u++;this.length=Math.min(u,this.length);0!==B&&(this.words[this.length-1]&=67108863^67108863>>>B<<B);return this.strip()};b.prototype.maskn=function(u){return this.clone().imaskn(u)};b.prototype.iaddn=function(u){m("number"===typeof u);m(67108864>u);if(0>u)return this.isubn(-u);
if(0!==this.negative){if(1===this.length&&(this.words[0]|0)<u)return this.words[0]=u-(this.words[0]|0),this.negative=0,this;this.negative=0;this.isubn(u);this.negative=1;return this}return this._iaddn(u)};b.prototype._iaddn=function(u){this.words[0]+=u;for(u=0;u<this.length&&67108864<=this.words[u];u++)this.words[u]-=67108864,u===this.length-1?this.words[u+1]=1:this.words[u+1]++;this.length=Math.max(this.length,u+1);return this};b.prototype.isubn=function(u){m("number"===typeof u);m(67108864>u);if(0>
u)return this.iaddn(-u);if(0!==this.negative)return this.negative=0,this.iaddn(u),this.negative=1,this;this.words[0]-=u;if(1===this.length&&0>this.words[0])this.words[0]=-this.words[0],this.negative=1;else for(u=0;u<this.length&&0>this.words[u];u++)this.words[u]+=67108864,--this.words[u+1];return this.strip()};b.prototype.addn=function(u){return this.clone().iaddn(u)};b.prototype.subn=function(u){return this.clone().isubn(u)};b.prototype.iabs=function(){this.negative=0;return this};b.prototype.abs=
function(){return this.clone().iabs()};b.prototype._ishlnsubmul=function(u,B,I){var J;this._expand(u.length+I);var N=0;for(J=0;J<u.length;J++){var M=(this.words[J+I]|0)+N;N=(u.words[J]|0)*B;M-=N&67108863;N=(M>>26)-(N/67108864|0);this.words[J+I]=M&67108863}for(;J<this.length-I;J++)M=(this.words[J+I]|0)+N,N=M>>26,this.words[J+I]=M&67108863;if(0===N)return this.strip();m(-1===N);for(J=N=0;J<this.length;J++)M=-(this.words[J]|0)+N,N=M>>26,this.words[J]=M&67108863;this.negative=1;return this.strip()};b.prototype._wordDiv=
function(u,B){var I=this.clone(),J=u,N=J.words[J.length-1]|0;u=26-this._countBits(N);0!==u&&(J=J.ushln(u),I.iushln(u),N=J.words[J.length-1]|0);var M=I.length-J.length;if("mod"!==B){var E=new b(null);E.length=M+1;E.words=Array(E.length);for(var L=0;L<E.length;L++)E.words[L]=0}L=I.clone()._ishlnsubmul(J,1,M);0===L.negative&&(I=L,E&&(E.words[M]=1));for(--M;0<=M;M--){L=67108864*(I.words[J.length+M]|0)+(I.words[J.length+M-1]|0);L=Math.min(L/N|0,67108863);for(I._ishlnsubmul(J,L,M);0!==I.negative;)L--,I.negative=
0,I._ishlnsubmul(J,1,M),I.isZero()||(I.negative^=1);E&&(E.words[M]=L)}E&&E.strip();I.strip();"div"!==B&&0!==u&&I.iushrn(u);return{div:E||null,mod:I}};b.prototype.divmod=function(u,B,I){m(!u.isZero());if(this.isZero())return{div:new b(0),mod:new b(0)};var J;if(0!==this.negative&&0===u.negative){var N=this.neg().divmod(u,B);"mod"!==B&&(J=N.div.neg());if("div"!==B){var M=N.mod.neg();I&&0!==M.negative&&M.iadd(u)}return{div:J,mod:M}}return 0===this.negative&&0!==u.negative?(N=this.divmod(u.neg(),B),"mod"!==
B&&(J=N.div.neg()),{div:J,mod:N.mod}):0!==(this.negative&u.negative)?(N=this.neg().divmod(u.neg(),B),"div"!==B&&(M=N.mod.neg(),I&&0!==M.negative&&M.isub(u)),{div:N.div,mod:M}):u.length>this.length||0>this.cmp(u)?{div:new b(0),mod:this}:1===u.length?"div"===B?{div:this.divn(u.words[0]),mod:null}:"mod"===B?{div:null,mod:new b(this.modn(u.words[0]))}:{div:this.divn(u.words[0]),mod:new b(this.modn(u.words[0]))}:this._wordDiv(u,B)};b.prototype.div=function(u){return this.divmod(u,"div",!1).div};b.prototype.mod=
function(u){return this.divmod(u,"mod",!1).mod};b.prototype.umod=function(u){return this.divmod(u,"mod",!0).mod};b.prototype.divRound=function(u){var B=this.divmod(u);if(B.mod.isZero())return B.div;var I=0!==B.div.negative?B.mod.isub(u):B.mod,J=u.ushrn(1);u=u.andln(1);I=I.cmp(J);return 0>I||1===u&&0===I?B.div:0!==B.div.negative?B.div.isubn(1):B.div.iaddn(1)};b.prototype.modn=function(u){m(67108863>=u);for(var B=67108864%u,I=0,J=this.length-1;0<=J;J--)I=(B*I+(this.words[J]|0))%u;return I};b.prototype.idivn=
function(u){m(67108863>=u);for(var B=0,I=this.length-1;0<=I;I--)B=(this.words[I]|0)+67108864*B,this.words[I]=B/u|0,B%=u;return this.strip()};b.prototype.divn=function(u){return this.clone().idivn(u)};b.prototype.egcd=function(u){m(0===u.negative);m(!u.isZero());var B=this,I=u.clone();B=0!==B.negative?B.umod(u):B.clone();u=new b(1);for(var J=new b(0),N=new b(0),M=new b(1),E=0;B.isEven()&&I.isEven();)B.iushrn(1),I.iushrn(1),++E;for(var L=I.clone(),Q=B.clone();!B.isZero();){for(var S=0,R=1;0===(B.words[0]&
R)&&26>S;++S,R<<=1);if(0<S)for(B.iushrn(S);0<S--;){if(u.isOdd()||J.isOdd())u.iadd(L),J.isub(Q);u.iushrn(1);J.iushrn(1)}S=0;for(R=1;0===(I.words[0]&R)&&26>S;++S,R<<=1);if(0<S)for(I.iushrn(S);0<S--;){if(N.isOdd()||M.isOdd())N.iadd(L),M.isub(Q);N.iushrn(1);M.iushrn(1)}0<=B.cmp(I)?(B.isub(I),u.isub(N),J.isub(M)):(I.isub(B),N.isub(u),M.isub(J))}return{a:N,b:M,gcd:I.iushln(E)}};b.prototype._invmp=function(u){m(0===u.negative);m(!u.isZero());var B=this,I=u.clone();B=0!==B.negative?B.umod(u):B.clone();for(var J=
new b(1),N=new b(0),M=I.clone();0<B.cmpn(1)&&0<I.cmpn(1);){for(var E=0,L=1;0===(B.words[0]&L)&&26>E;++E,L<<=1);if(0<E)for(B.iushrn(E);0<E--;)J.isOdd()&&J.iadd(M),J.iushrn(1);E=0;for(L=1;0===(I.words[0]&L)&&26>E;++E,L<<=1);if(0<E)for(I.iushrn(E);0<E--;)N.isOdd()&&N.iadd(M),N.iushrn(1);0<=B.cmp(I)?(B.isub(I),J.isub(N)):(I.isub(B),N.isub(J))}B=0===B.cmpn(1)?J:N;0>B.cmpn(0)&&B.iadd(u);return B};b.prototype.gcd=function(u){if(this.isZero())return u.abs();if(u.isZero())return this.abs();var B=this.clone();
u=u.clone();B.negative=0;for(var I=u.negative=0;B.isEven()&&u.isEven();I++)B.iushrn(1),u.iushrn(1);do{for(;B.isEven();)B.iushrn(1);for(;u.isEven();)u.iushrn(1);var J=B.cmp(u);if(0>J)J=B,B=u,u=J;else if(0===J||0===u.cmpn(1))break;B.isub(u)}while(1);return u.iushln(I)};b.prototype.invm=function(u){return this.egcd(u).a.umod(u)};b.prototype.isEven=function(){return 0===(this.words[0]&1)};b.prototype.isOdd=function(){return 1===(this.words[0]&1)};b.prototype.andln=function(u){return this.words[0]&u};
b.prototype.bincn=function(u){m("number"===typeof u);var B=u%26;u=(u-B)/26;B=1<<B;if(this.length<=u)return this._expand(u+1),this.words[u]|=B,this;for(;0!==B&&u<this.length;u++){var I=this.words[u]|0;I+=B;B=I>>>26;I&=67108863;this.words[u]=I}0!==B&&(this.words[u]=B,this.length++);return this};b.prototype.isZero=function(){return 1===this.length&&0===this.words[0]};b.prototype.cmpn=function(u){var B=0>u;if(0!==this.negative&&!B)return-1;if(0===this.negative&&B)return 1;this.strip();1<this.length?u=
1:(B&&(u=-u),m(67108863>=u,"Number is too big"),B=this.words[0]|0,u=B===u?0:B<u?-1:1);return 0!==this.negative?-u|0:u};b.prototype.cmp=function(u){if(0!==this.negative&&0===u.negative)return-1;if(0===this.negative&&0!==u.negative)return 1;u=this.ucmp(u);return 0!==this.negative?-u|0:u};b.prototype.ucmp=function(u){if(this.length>u.length)return 1;if(this.length<u.length)return-1;for(var B=0,I=this.length-1;0<=I;I--){var J=this.words[I]|0,N=u.words[I]|0;if(J!==N){J<N?B=-1:J>N&&(B=1);break}}return B};
b.prototype.gtn=function(u){return 1===this.cmpn(u)};b.prototype.gt=function(u){return 1===this.cmp(u)};b.prototype.gten=function(u){return 0<=this.cmpn(u)};b.prototype.gte=function(u){return 0<=this.cmp(u)};b.prototype.ltn=function(u){return-1===this.cmpn(u)};b.prototype.lt=function(u){return-1===this.cmp(u)};b.prototype.lten=function(u){return 0>=this.cmpn(u)};b.prototype.lte=function(u){return 0>=this.cmp(u)};b.prototype.eqn=function(u){return 0===this.cmpn(u)};b.prototype.eq=function(u){return 0===
this.cmp(u)};b.red=function(u){return new t(u)};b.prototype.toRed=function(u){m(!this.red,"Already a number in reduction context");m(0===this.negative,"red works only with positives");return u.convertTo(this)._forceRed(u)};b.prototype.fromRed=function(){m(this.red,"fromRed works only with numbers in reduction context");return this.red.convertFrom(this)};b.prototype._forceRed=function(u){this.red=u;return this};b.prototype.forceRed=function(u){m(!this.red,"Already a number in reduction context");return this._forceRed(u)};
b.prototype.redAdd=function(u){m(this.red,"redAdd works only with red numbers");return this.red.add(this,u)};b.prototype.redIAdd=function(u){m(this.red,"redIAdd works only with red numbers");return this.red.iadd(this,u)};b.prototype.redSub=function(u){m(this.red,"redSub works only with red numbers");return this.red.sub(this,u)};b.prototype.redISub=function(u){m(this.red,"redISub works only with red numbers");return this.red.isub(this,u)};b.prototype.redShl=function(u){m(this.red,"redShl works only with red numbers");
return this.red.shl(this,u)};b.prototype.redMul=function(u){m(this.red,"redMul works only with red numbers");this.red._verify2(this,u);return this.red.mul(this,u)};b.prototype.redIMul=function(u){m(this.red,"redMul works only with red numbers");this.red._verify2(this,u);return this.red.imul(this,u)};b.prototype.redSqr=function(){m(this.red,"redSqr works only with red numbers");this.red._verify1(this);return this.red.sqr(this)};b.prototype.redISqr=function(){m(this.red,"redISqr works only with red numbers");
this.red._verify1(this);return this.red.isqr(this)};b.prototype.redSqrt=function(){m(this.red,"redSqrt works only with red numbers");this.red._verify1(this);return this.red.sqrt(this)};b.prototype.redInvm=function(){m(this.red,"redInvm works only with red numbers");this.red._verify1(this);return this.red.invm(this)};b.prototype.redNeg=function(){m(this.red,"redNeg works only with red numbers");this.red._verify1(this);return this.red.neg(this)};b.prototype.redPow=function(u){m(this.red&&!u.red,"redPow(normalNum)");
this.red._verify1(this);return this.red.pow(this,u)};var D={k256:null,p224:null,p192:null,p25519:null};c.prototype._tmp=function(){var u=new b(null);u.words=Array(Math.ceil(this.n/13));return u};c.prototype.ireduce=function(u){do{this.split(u,this.tmp);u=this.imulK(u);u=u.iadd(this.tmp);var B=u.bitLength()}while(B>this.n);B=B<this.n?-1:u.ucmp(this.p);0===B?(u.words[0]=0,u.length=1):0<B?u.isub(this.p):u.strip();return u};c.prototype.split=function(u,B){u.iushrn(this.n,0,B)};c.prototype.imulK=function(u){return u.imul(this.k)};
f(g,c);g.prototype.split=function(u,B){for(var I=Math.min(u.length,9),J=0;J<I;J++)B.words[J]=u.words[J];B.length=I;if(9>=u.length)u.words[0]=0,u.length=1;else{I=u.words[9];B.words[B.length++]=I&4194303;for(J=10;J<u.length;J++)B=u.words[J]|0,u.words[J-10]=(B&4194303)<<4|I>>>22,I=B;I>>>=22;u.words[J-10]=I;u.length=0===I&&10<u.length?u.length-10:u.length-9}};g.prototype.imulK=function(u){u.words[u.length]=0;u.words[u.length+1]=0;u.length+=2;for(var B=0,I=0;I<u.length;I++){var J=u.words[I]|0;B+=977*J;
u.words[I]=B&67108863;B=64*J+(B/67108864|0)}0===u.words[u.length-1]&&(u.length--,0===u.words[u.length-1]&&u.length--);return u};f(d,c);f(p,c);f(r,c);r.prototype.imulK=function(u){for(var B=0,I=0;I<u.length;I++){B=19*(u.words[I]|0)+B;var J=B&67108863;B>>>=26;u.words[I]=J}0!==B&&(u.words[u.length++]=B);return u};b._prime=function(u){if(D[u])return D[u];if("k256"===u)var B=new g;else if("p224"===u)B=new d;else if("p192"===u)B=new p;else if("p25519"===u)B=new r;else throw Error("Unknown prime "+u);return D[u]=
B};t.prototype._verify1=function(u){m(0===u.negative,"red works only with positives");m(u.red,"red works only with red numbers")};t.prototype._verify2=function(u,B){m(0===(u.negative|B.negative),"red works only with positives");m(u.red&&u.red===B.red,"red works only with red numbers")};t.prototype.imod=function(u){return this.prime?this.prime.ireduce(u)._forceRed(this):u.umod(this.m)._forceRed(this)};t.prototype.neg=function(u){return u.isZero()?u.clone():this.m.sub(u)._forceRed(this)};t.prototype.add=
function(u,B){this._verify2(u,B);u=u.add(B);0<=u.cmp(this.m)&&u.isub(this.m);return u._forceRed(this)};t.prototype.iadd=function(u,B){this._verify2(u,B);u=u.iadd(B);0<=u.cmp(this.m)&&u.isub(this.m);return u};t.prototype.sub=function(u,B){this._verify2(u,B);u=u.sub(B);0>u.cmpn(0)&&u.iadd(this.m);return u._forceRed(this)};t.prototype.isub=function(u,B){this._verify2(u,B);u=u.isub(B);0>u.cmpn(0)&&u.iadd(this.m);return u};t.prototype.shl=function(u,B){this._verify1(u);return this.imod(u.ushln(B))};t.prototype.imul=
function(u,B){this._verify2(u,B);return this.imod(u.imul(B))};t.prototype.mul=function(u,B){this._verify2(u,B);return this.imod(u.mul(B))};t.prototype.isqr=function(u){return this.imul(u,u.clone())};t.prototype.sqr=function(u){return this.mul(u,u)};t.prototype.sqrt=function(u){if(u.isZero())return u.clone();var B=this.m.andln(3);m(1===B%2);if(3===B)return B=this.m.add(new b(1)).iushrn(2),this.pow(u,B);for(var I=this.m.subn(1),J=0;!I.isZero()&&0===I.andln(1);)J++,I.iushrn(1);m(!I.isZero());B=(new b(1)).toRed(this);
var N=B.redNeg(),M=this.m.subn(1).iushrn(1),E=this.m.bitLength();for(E=(new b(2*E*E)).toRed(this);0!==this.pow(E,M).cmp(N);)E.redIAdd(N);M=this.pow(E,I);N=this.pow(u,I.addn(1).iushrn(1));u=this.pow(u,I);for(I=J;0!==u.cmp(B);){E=u;for(J=0;0!==E.cmp(B);J++)E=E.redSqr();m(J<I);M=this.pow(M,(new b(1)).iushln(I-J-1));N=N.redMul(M);M=M.redSqr();u=u.redMul(M);I=J}return N};t.prototype.invm=function(u){u=u._invmp(this.m);return 0!==u.negative?(u.negative=0,this.imod(u).redNeg()):this.imod(u)};t.prototype.pow=
function(u,B){if(B.isZero())return(new b(1)).toRed(this);if(0===B.cmpn(1))return u.clone();var I=Array(16);I[0]=(new b(1)).toRed(this);I[1]=u;for(var J=2;J<I.length;J++)I[J]=this.mul(I[J-1],u);u=I[0];var N=0,M=0,E=B.bitLength()%26;0===E&&(E=26);for(J=B.length-1;0<=J;J--){var L=B.words[J];for(--E;0<=E;E--){var Q=L>>E&1;u!==I[0]&&(u=this.sqr(u));if(0===Q&&0===N)M=0;else if(N<<=1,N|=Q,M++,4===M||0===J&&0===E)u=this.mul(u,I[N]),N=M=0}E=26}return u};t.prototype.convertTo=function(u){var B=u.umod(this.m);
return B===u?B.clone():B};t.prototype.convertFrom=function(u){u=u.clone();u.red=null;return u};b.mont=function(u){return new w(u)};f(w,t);w.prototype.convertTo=function(u){return this.imod(u.ushln(this.shift))};w.prototype.convertFrom=function(u){u=this.imod(u.mul(this.rinv));u.red=null;return u};w.prototype.imul=function(u,B){if(u.isZero()||B.isZero())return u.words[0]=0,u.length=1,u;u=u.imul(B);B=u.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m);B=u=u.isub(B).iushrn(this.shift);
0<=u.cmp(this.m)?B=u.isub(this.m):0>u.cmpn(0)&&(B=u.iadd(this.m));return B._forceRed(this)};w.prototype.mul=function(u,B){if(u.isZero()||B.isZero())return(new b(0))._forceRed(this);u=u.mul(B);B=u.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m);B=u=u.isub(B).iushrn(this.shift);0<=u.cmp(this.m)?B=u.isub(this.m):0>u.cmpn(0)&&(B=u.iadd(this.m));return B._forceRed(this)};w.prototype.invm=function(u){return this.imod(u._invmp(this.m).mul(this.r2))._forceRed(this)}})("undefined"===typeof G||
G,this)},{buffer:108}],100:[function(a,G,C){G.exports=function(q){var n,m,f,b=q.length;for(n=m=0;n<b;++n)m+=q[n].length;var k=Array(m),e=0;for(n=0;n<b;++n){var h=q[n],l=h.length;for(m=0;m<l;++m){var c=k[e++]=Array(l-1),g=0;for(f=0;f<l;++f)f!==m&&(c[g++]=h[f]);m&1&&(f=c[1],c[1]=c[0],c[0]=f)}}return k}},{}],101:[function(a,G,C){function q(h,l,c,g){for(var d=0,p=0,r=0,t=h.length;r<t;++r){var w=h[r],x;a:{for(x=0;x<l;++x)if(!(w[x]<=w[x+l])){x=!0;break a}x=!1}if(!x){for(x=0;x<2*l;++x)c[d++]=w[x];g[p++]=
r}}return p}function n(h,l,c,g){var d=h.length,p=l.length;if(!(0>=d||0>=p)){var r=h[0].length>>>1;if(!(0>=r)){var t=f.mallocDouble(2*r*d),w=f.mallocInt32(d);d=q(h,r,t,w);if(0<d){if(1===r&&g){b.init(d);var x=b.sweepComplete(r,c,0,d,t,w,0,d,t,w)}else{h=f.mallocDouble(2*r*p);var y=f.mallocInt32(p);p=q(l,r,h,y);0<p&&(b.init(d+p),x=1===r?b.sweepBipartite(r,c,0,d,t,w,0,p,h,y):k(r,c,g,d,t,w,p,h,y),f.free(h),f.free(y))}f.free(t);f.free(w)}return x}}}function m(h,l){e.push([h,l])}G.exports=function(h,l,c){switch(arguments.length){case 1:return e=
[],n(h,h,m,!0),e;case 2:if("function"===typeof l)return n(h,h,l,!0);e=[];n(h,l,m,!1);return e;case 3:return n(h,l,c,!1);default:throw Error("box-intersect: Invalid arguments");}};var f=a("typedarray-pool"),b=a("./lib/sweep"),k=a("./lib/intersect"),e},{"./lib/intersect":103,"./lib/sweep":107,"typedarray-pool":567}],102:[function(a,G,C){function q(m){function f(l,c){var g="bruteForce"+(l?"Red":"Blue")+(c?"Flip":"")+(m?"Full":""),d=["function ",g,"(",n.join(),"){","var ","es","\x3d2*","d",";"],p="for(var j\x3dbs,bp\x3des*bs;j\x3cbe;++j,bp+\x3des){var y0\x3dbb[ax+bp],"+
(m?"y1\x3dbb[ax+bp+d],":"")+"yi\x3dbi[j];";l?d.push("for(var i\x3drs,rp\x3des*rs;i\x3cre;++i,rp+\x3des){var x0\x3drb[ax+rp],x1\x3drb[ax+rp+d],xi\x3dri[i];","Q",":",p):d.push(p,"Q",":","for(var i\x3drs,rp\x3des*rs;i\x3cre;++i,rp+\x3des){var x0\x3drb[ax+rp],x1\x3drb[ax+rp+d],xi\x3dri[i];");m?d.push("if(y1\x3cx0||x1\x3cy0)continue;"):c?d.push("if(y0\x3c\x3dx0||x1\x3cy0)continue;"):d.push("if(y0\x3cx0||x1\x3cy0)continue;");d.push("for(var k\x3dax+1;k\x3cd;++k){var r0\x3drb[k+rp],r1\x3drb[k+d+rp],b0\x3dbb[k+bp],b1\x3dbb[k+d+bp];if(r1\x3cb0||b1\x3cr0)continue Q;}var rv\x3dvv(");
c?d.push("yi,xi"):d.push("xi,yi");d.push(");if(rv!\x3d\x3dvoid 0)return rv;}}}");l=d.join("");k.push(l);h.push("return "+g+"("+n.join()+");")}var b="bruteForce"+(m?"Full":"Partial"),k=[],e=n.slice();m||e.splice(3,0,"fp");var h=["function "+b+"("+e.join()+"){"];h.push("if(re-rs\x3ebe-bs){");m?(f(!0,!1),h.push("}else{"),f(!1,!1)):(h.push("if(fp){"),f(!0,!0),h.push("}else{"),f(!0,!1),h.push("}}else{if(fp){"),f(!1,!0),h.push("}else{"),f(!1,!1),h.push("}"));h.push("}}return "+b);b=k.join("")+h.join("");
return(new Function(b))()}var n="d ax vv rs re rb ri bs be bb bi".split(" ");C.partial=q(!1);C.full=q(!0)},{}],103:[function(a,G,C){function q(F,D,u,B,I,J,N,M,E){var L=x*F;A[L]=D;A[L+1]=u;A[L+2]=B;A[L+3]=I;A[L+4]=J;A[L+5]=N;F*=y;z[F]=M;z[F+1]=E}G.exports=function(F,D,u,B,I,J,N,M,E){var L=8*m.log2(B+N+1)*(F+1)|0,Q=m.nextPow2(x*L);A.length<Q&&(n.free(A),A=n.mallocInt32(Q));L=m.nextPow2(y*L);z.length<L&&(n.free(z),z=n.mallocDouble(L));L=0;Q=2*F;q(L++,0,0,B,0,N,u?16:0,-Infinity,Infinity);for(u||q(L++,
0,0,N,0,B,1,-Infinity,Infinity);0<L;){--L;u=L*x;var S=A[u];N=A[u+1];var R=A[u+2],O=A[u+3],T=A[u+4];u=A[u+5];B=L*y;var V=z[B],X=z[B+1],ba=u&1,aa=!!(u&16),ka=I,ha=J,ca=M;B=E;ba&&(ka=M,ha=E,ca=I,B=J);if(u&2&&(R=p(F,S,N,R,ka,ha,X),N>=R))continue;if(u&4&&(N=r(F,S,N,R,ka,ha,V),N>=R))continue;u=R-N;var sa=T-O;if(aa){if(F*u*(u+sa)<c){var ma=k.scanComplete(F,S,D,N,R,ka,ha,O,T,ca,B);if(void 0!==ma)return ma;continue}}else if(F*Math.min(u,sa)<h){ma=f(F,S,D,ba,N,R,ka,ha,O,T,ca,B);if(void 0!==ma)return ma;continue}else if(F*
u*sa<l){ma=k.scanBipartite(F,S,D,ba,N,R,ka,ha,O,T,ca,B);if(void 0!==ma)return ma;continue}u=g(F,S,N,R,ka,ha,V,X);if(N<u)if(F*(u-N)<h){if(ma=b(F,S+1,D,N,u,ka,ha,O,T,ca,B),void 0!==ma)return ma}else if(S===F-2){if(ma=ba?k.sweepBipartite(F,D,O,T,ca,B,N,u,ka,ha):k.sweepBipartite(F,D,N,u,ka,ha,O,T,ca,B),void 0!==ma)return ma}else q(L++,S+1,N,u,O,T,ba,-Infinity,Infinity),q(L++,S+1,O,T,N,u,ba^1,-Infinity,Infinity);if(u<R)if(N=e(F,S,O,T,ca,B),ma=ca[Q*N+S],sa=d(F,S,N,T,ca,B,ma),sa<T&&q(L++,S,u,R,sa,T,(ba|
4)+(aa?16:0),ma,X),O<N&&q(L++,S,u,R,O,N,(ba|2)+(aa?16:0),V,ma),N+1===sa){if(aa)a:{O=F;T=D;B=B[N];ba=2*O;N*=ba;V=ca[N+S];X=u;u*=ba;b:for(;X<R;++X,u+=ba)if(aa=ha[X],aa!==B&&(sa=ka[u+S],ma=ka[u+S+O],!(V<sa||ma<V))){for(var ra=S+1;ra<O;++ra){sa=ka[u+ra];ma=ka[u+ra+O];var qa=ca[N+ra+O];if(ma<ca[N+ra]||qa<sa)continue b}aa=T(aa,B);if(void 0!==aa){ma=aa;break a}}ma=void 0}else a:{O=F;T=D;B=B[N];V=2*O;N*=V;X=ca[N+S];aa=u;u*=V;b:for(;aa<R;++aa,u+=V)if(sa=ka[u+S],ma=ka[u+S+O],!(X<sa||ma<X||ba&&X===sa)){ra=ha[aa];
for(qa=S+1;qa<O;++qa){sa=ka[u+qa];ma=ka[u+qa+O];var Y=ca[N+qa+O];if(ma<ca[N+qa]||Y<sa)continue b}sa=ba?T(B,ra):T(ra,B);if(void 0!==sa){ma=sa;break a}}ma=void 0}if(void 0!==ma)return ma}else if(N<sa)if(aa){if(R=t(F,S,u,R,ka,ha,ma),u<R)if(O=d(F,S,u,R,ka,ha,ma),S===F-2){if(u<O&&(ma=k.sweepComplete(F,D,u,O,ka,ha,N,sa,ca,B),void 0!==ma)||O<R&&(ma=k.sweepBipartite(F,D,O,R,ka,ha,N,sa,ca,B),void 0!==ma))return ma}else u<O&&q(L++,S+1,u,O,N,sa,16,-Infinity,Infinity),O<R&&(q(L++,S+1,O,R,N,sa,0,-Infinity,Infinity),
q(L++,S+1,N,sa,O,R,1,-Infinity,Infinity))}else R=ba?w(F,S,u,R,ka,ha,ma):t(F,S,u,R,ka,ha,ma),u<R&&(S===F-2?ba?k.sweepBipartite(F,D,N,sa,ca,B,u,R,ka,ha):k.sweepBipartite(F,D,u,R,ka,ha,N,sa,ca,B):(q(L++,S+1,u,R,N,sa,ba,-Infinity,Infinity),q(L++,S+1,N,sa,u,R,ba^1,-Infinity,Infinity)))}};var n=a("typedarray-pool"),m=a("bit-twiddle");G=a("./brute");var f=G.partial,b=G.full,k=a("./sweep"),e=a("./median");a=a("./partition");var h=128,l=4194304,c=4194304,g=a("!(lo\x3e\x3dp0)\x26\x26!(p1\x3e\x3dhi)",["p0",
"p1"]),d=a("lo\x3d\x3d\x3dp0",["p0"]),p=a("lo\x3cp0",["p0"]),r=a("hi\x3c\x3dp0",["p0"]),t=a("lo\x3c\x3dp0\x26\x26p0\x3c\x3dhi",["p0"]),w=a("lo\x3cp0\x26\x26p0\x3c\x3dhi",["p0"]),x=6,y=2,A=n.mallocInt32(1024),z=n.mallocDouble(1024)},{"./brute":102,"./median":104,"./partition":105,"./sweep":107,"bit-twiddle":97,"typedarray-pool":567}],104:[function(a,G,C){G.exports=function(m,f,b,k,e,h){if(k<=b+1)return b;var l=b,c=k;k=k+b>>>1;for(var g=2*m,d,p;l<c;){if(c-l<n){d=f;p=e;for(var r=h,t=2*m,w=t*(l+1)+d,
x=l+1;x<c;++x,w+=t)for(var y=p[w],A=x,z=t*(x-1);A>l&&p[z+d]>y;--A,z-=t){for(var F=z,D=z+t,u=0;u<t;++u,++F,++D){var B=p[F];p[F]=p[D];p[D]=B}F=r[A];r[A]=r[A-1];r[A-1]=F}break}w=c-l;d=Math.random()*w+l|0;p=e[g*d+f];t=Math.random()*w+l|0;r=e[g*t+f];x=Math.random()*w+l|0;w=e[g*x+f];p<=r?w>=r?(d=t,p=r):p>=w||(d=x,p=w):r>=w?(d=t,p=r):w>=p||(d=x,p=w);r=g*(c-1);t=g*d;for(w=0;w<g;++w,++r,++t)x=e[r],e[r]=e[t],e[t]=x;r=h[c-1];h[c-1]=h[d];h[d]=r;d=q(m,f,l,c-1,e,h,p);r=g*(c-1);t=g*d;for(w=0;w<g;++w,++r,++t)x=e[r],
e[r]=e[t],e[t]=x;r=h[c-1];h[c-1]=h[d];h[d]=r;if(k<d){for(c=d-1;l<c&&e[g*(c-1)+f]===p;)--c;c+=1}else if(d<k)for(l=d+1;l<c&&e[g*l+f]===p;)l+=1;else break}return q(m,f,b,k,e,h,e[g*k+f])};var q=a("./partition")("lo\x3cp0",["p0"]),n=8},{"./partition":105}],105:[function(a,G,C){G.exports=function(n,m){m="abcdef".split("").concat(m);var f=[];0<=n.indexOf("lo")&&f.push("lo\x3de[k+n]");0<=n.indexOf("hi")&&f.push("hi\x3de[k+o]");m.push(q.replace("_",f.join()).replace("$",n));return Function.apply(void 0,m)};
var q="for(var j\x3d2*a,k\x3dj*c,l\x3dk,m\x3dc,n\x3db,o\x3da+b,p\x3dc;d\x3ep;++p,k+\x3dj){var _;if($)if(m\x3d\x3d\x3dp)m+\x3d1,l+\x3dj;else{for(var s\x3d0;j\x3es;++s){var t\x3de[k+s];e[k+s]\x3de[l],e[l++]\x3dt}var u\x3df[p];f[p]\x3df[m],f[m++]\x3du}}return m"},{}],106:[function(a,G,C){function q(l,c,g){for(var d=2*(l+1),p=l+1;p<=c;++p){for(var r=g[d++],t=g[d++],w=p,x=d-2;w-- >l;){var y=g[x-2],A=g[x-1];if(y<r)break;else if(y===r&&A<t)break;g[x]=y;g[x+1]=A;x-=2}g[x]=r;g[x+1]=t}}function n(l,c,g){l*=
2;c*=2;var d=g[l],p=g[l+1];g[l]=g[c];g[l+1]=g[c+1];g[c]=d;g[c+1]=p}function m(l,c,g){l*=2;c*=2;g[l]=g[c];g[l+1]=g[c+1]}function f(l,c,g,d,p){l*=2;c*=2;p[l]=p[c];p[c]=g;p[l+1]=p[c+1];p[c+1]=d}function b(l,c,g){l*=2;c*=2;var d=g[l],p=g[c];return d<p?!1:d===p?g[l+1]>g[c+1]:!0}function k(l,c,g,d){l*=2;var p=d[l];return p<c?!0:p===c?d[l+1]<g:!1}function e(l,c,g){var d=(c-l+1)/6|0,p=l+d,r=c-d,t=l+c>>1,w=t-d,x=t+d,y=p,A=w,z=t,F=x,D=r;d=l+1;var u=c-1;if(b(y,A,g)){var B=y;y=A;A=B}b(F,D,g)&&(B=F,F=D,D=B);b(y,
z,g)&&(B=y,y=z,z=B);b(A,z,g)&&(B=A,A=z,z=B);b(y,F,g)&&(B=y,y=F,F=B);b(z,F,g)&&(B=z,z=F,F=B);b(A,D,g)&&(B=A,A=D,D=B);b(A,z,g)&&(B=A,A=z,z=B);b(F,D,g)&&(B=F,F=D,D=B);B=g[2*A];A=g[2*A+1];var I=g[2*F];F=g[2*F+1];y*=2;z*=2;D*=2;p*=2;t*=2;r*=2;for(var J=0;2>J;++J){var N=g[z+J],M=g[D+J];g[p+J]=g[y+J];g[t+J]=N;g[r+J]=M}m(w,l,g);m(x,c,g);for(w=d;w<=u;++w)if(k(w,B,A,g))w!==d&&n(w,d,g),++d;else if(!k(w,I,F,g))for(;;)if(k(u,I,F,g)){k(u,B,A,g)?(x=w,r=d,t=u,y=g,x*=2,r*=2,t*=2,p=y[x],z=y[x+1],y[x]=y[r],y[x+1]=y[r+
1],y[r]=y[t],y[r+1]=y[t+1],y[t]=p,y[t+1]=z,++d):n(w,u,g);--u;break}else if(--u<w)break;f(l,d-1,B,A,g);f(c,u+1,I,F,g);d-2-l<=h?q(l,d-2,g):e(l,d-2,g);c-(u+2)<=h?q(u+2,c,g):e(u+2,c,g);u-d<=h?q(d,u,g):e(d,u,g)}G.exports=function(l,c){c<=4*h?q(0,c-1,l):e(0,c-1,l)};var h=32},{}],107:[function(a,G,C){function q(p,r,t,w){w=r[w];t=p[t-1];p[w]=t;r[t]=w}G.exports={init:function(p){p=m.nextPow2(p);k.length<p&&(n.free(k),k=n.mallocInt32(p));e.length<p&&(n.free(e),e=n.mallocInt32(p));h.length<p&&(n.free(h),h=n.mallocInt32(p));
l.length<p&&(n.free(l),l=n.mallocInt32(p));c.length<p&&(n.free(c),c=n.mallocInt32(p));g.length<p&&(n.free(g),g=n.mallocInt32(p));p*=8;d.length<p&&(n.free(d),d=n.mallocDouble(p))},sweepBipartite:function(p,r,t,w,x,y,A,z,F,D){var u=0,B=2*p;--p;for(var I=B-1;t<w;++t){var J=y[t],N=B*t;d[u++]=x[N+p];d[u++]=-(J+1);d[u++]=x[N+I];d[u++]=J}for(t=A;t<z;++t)J=D[t]+b,w=B*t,d[u++]=F[w+p],d[u++]=-J,d[u++]=F[w+I],d[u++]=J;z=u>>>1;f(d,z);for(t=D=F=0;t<z;++t)if(u=d[2*t+1]|0,u>=b)u=u-b|0,q(h,l,D--,u);else if(0<=u)q(k,
e,F--,u);else if(u<=-b){u=-u-b|0;for(B=0;B<F;++B)if(w=r(k[B],u),void 0!==w)return w;B=l;w=D++;h[w]=u;B[u]=w}else{u=-u-1|0;for(B=0;B<D;++B)if(w=r(u,h[B]),void 0!==w)return w;B=e;w=F++;k[w]=u;B[u]=w}},sweepComplete:function(p,r,t,w,x,y,A,z,F,D){var u=0,B=2*p;--p;for(var I=B-1;t<w;++t){var J=y[t]+1<<1,N=B*t;d[u++]=x[N+p];d[u++]=-J;d[u++]=x[N+I];d[u++]=J}for(t=A;t<z;++t)J=D[t]+1<<1,w=B*t,d[u++]=F[w+p],d[u++]=-J|1,d[u++]=F[w+I],d[u++]=J|1;z=u>>>1;f(d,z);for(t=u=D=F=0;t<z;++t)if(B=d[2*t+1]|0,w=B&1,t<z-
1&&B>>1===d[2*t+3]>>1&&(w=2,t+=1),0>B){B=-(B>>1)-1;for(x=0;x<u;++x)if(y=r(c[x],B),void 0!==y)return y;if(0!==w)for(x=0;x<F;++x)if(y=r(k[x],B),void 0!==y)return y;if(1!==w)for(x=0;x<D;++x)if(y=r(h[x],B),void 0!==y)return y;0===w?(w=e,x=F++,k[x]=B,w[B]=x):1===w?(w=l,x=D++,h[x]=B,w[B]=x):2===w&&(w=g,x=u++,c[x]=B,w[B]=x)}else B=(B>>1)-1,0===w?q(k,e,F--,B):1===w?q(h,l,D--,B):2===w&&q(c,g,u--,B)},scanBipartite:function(p,r,t,w,x,y,A,z,F,D,u,B){var I=0,J=2*p,N=r+p,M=1,E=1;for(w?E=b:M=b;x<y;++x){var L=x+
M,Q=J*x;d[I++]=A[Q+r];d[I++]=-L;d[I++]=A[Q+N];d[I++]=L}for(x=F;x<D;++x)L=x+E,y=J*x,d[I++]=u[y+r],d[I++]=-L;D=I>>>1;f(d,D);for(x=I=0;x<D;++x)if(L=d[2*x+1]|0,0>L)if(L=-L,L>=b?(E=!w,L-=b):(E=!!w,--L),E)E=e,y=I++,k[y]=L,E[L]=y;else a:for(E=B[L],L*=J,y=u[L+r+1],F=u[L+r+1+p],N=0;N<I;++N){Q=k[N];var S=J*Q;if(!(F<A[S+r+1]||A[S+r+1+p]<y)){for(var R=r+2;R<p;++R)if(u[L+R+p]<A[S+R]||A[S+R+p]<u[L+R])continue a;Q=z[Q];Q=w?t(E,Q):t(Q,E);if(void 0!==Q)return Q}}else q(k,e,I--,L-M)},scanComplete:function(p,r,t,w,
x,y,A,z,F,D,u){for(var B=0,I=2*p,J=r+p;w<x;++w){var N=w+b,M=I*w;d[B++]=y[M+r];d[B++]=-N;d[B++]=y[M+J];d[B++]=N}for(w=z;w<F;++w)N=w+1,x=I*w,d[B++]=D[x+r],d[B++]=-N;F=B>>>1;f(d,F);for(w=B=0;w<F;++w)if(x=d[2*w+1]|0,0>x)if(N=-x,N>=b)k[B++]=N-b;else a:for(--N,x=u[N],N*=I,J=D[N+r+1],M=D[N+r+1+p],z=0;z<B;++z){var E=k[z],L=A[E];if(L===x)break;E*=I;if(!(M<y[E+r+1]||y[E+r+1+p]<J)){for(var Q=r+2;Q<p;++Q)if(D[N+Q+p]<y[E+Q]||y[E+Q+p]<D[N+Q])continue a;L=t(L,x);if(void 0!==L)return L}}else{N=x-b;for(z=B-1;0<=z;--z)if(k[z]===
N){for(Q=z+1;Q<B;++Q)k[Q-1]=k[Q];break}--B}}};var n=a("typedarray-pool"),m=a("bit-twiddle"),f=a("./sort"),b=268435456,k=n.mallocInt32(1024),e=n.mallocInt32(1024),h=n.mallocInt32(1024),l=n.mallocInt32(1024),c=n.mallocInt32(1024),g=n.mallocInt32(1024),d=n.mallocDouble(8192)},{"./sort":106,"bit-twiddle":97,"typedarray-pool":567}],108:[function(a,G,C){},{}],109:[function(a,G,C){arguments[4][108][0].apply(C,arguments)},{dup:108}],110:[function(a,G,C){function q(){this._events&&Object.prototype.hasOwnProperty.call(this,
"_events")||(this._events=g(null),this._eventsCount=0);this._maxListeners=this._maxListeners||void 0}function n(w,x,y,A){var z;if("function"!==typeof y)throw new TypeError('"listener" argument must be a function');if(z=w._events){z.newListener&&(w.emit("newListener",x,y.listener?y.listener:y),z=w._events);var F=z[x]}else z=w._events=g(null),w._eventsCount=0;F?("function"===typeof F?F=z[x]=A?[y,F]:[F,y]:A?F.unshift(y):F.push(y),F.warned||(y=void 0===w._maxListeners?q.defaultMaxListeners:w._maxListeners)&&
0<y&&F.length>y&&(F.warned=!0,y=Error("Possible EventEmitter memory leak detected. "+F.length+' "'+String(x)+'" listeners added. Use emitter.setMaxListeners() to increase limit.'),y.name="MaxListenersExceededWarning",y.emitter=w,y.type=x,y.count=F.length,"object"===typeof console&&console.warn&&console.warn("%s: %s",y.name,y.message))):(z[x]=y,++w._eventsCount);return w}function m(){if(!this.fired)switch(this.target.removeListener(this.type,this.wrapFn),this.fired=!0,arguments.length){case 0:return this.listener.call(this.target);
case 1:return this.listener.call(this.target,arguments[0]);case 2:return this.listener.call(this.target,arguments[0],arguments[1]);case 3:return this.listener.call(this.target,arguments[0],arguments[1],arguments[2]);default:for(var w=Array(arguments.length),x=0;x<w.length;++x)w[x]=arguments[x];this.listener.apply(this.target,w)}}function f(w,x,y){w={fired:!1,wrapFn:void 0,target:w,type:x,listener:y};x=p.call(m,w);x.listener=y;return w.wrapFn=x}function b(w,x,y){w=w._events;if(!w)return[];x=w[x];if(!x)return[];
if("function"===typeof x)return y?[x.listener||x]:[x];if(y)for(y=Array(x.length),w=0;w<y.length;++w)y[w]=x[w].listener||x[w];else y=e(x,x.length);return y}function k(w){var x=this._events;if(x){w=x[w];if("function"===typeof w)return 1;if(w)return w.length}return 0}function e(w,x){for(var y=Array(x),A=0;A<x;++A)y[A]=w[A];return y}function h(w){var x=function(){};x.prototype=w;return new x}function l(w){var x=[],y;for(y in w)Object.prototype.hasOwnProperty.call(w,y)&&x.push(y);return y}function c(w){var x=
this;return function(){return x.apply(w,arguments)}}var g=Object.create||h,d=Object.keys||l,p=Function.prototype.bind||c;G.exports=q;q.EventEmitter=q;q.prototype._events=void 0;q.prototype._maxListeners=void 0;var r=10;try{a={};Object.defineProperty&&Object.defineProperty(a,"x",{value:0});var t=0===a.x}catch(w){t=!1}t?Object.defineProperty(q,"defaultMaxListeners",{enumerable:!0,get:function(){return r},set:function(w){if("number"!==typeof w||0>w||w!==w)throw new TypeError('"defaultMaxListeners" must be a positive number');
r=w}}):q.defaultMaxListeners=r;q.prototype.setMaxListeners=function(w){if("number"!==typeof w||0>w||isNaN(w))throw new TypeError('"n" argument must be a positive number');this._maxListeners=w;return this};q.prototype.getMaxListeners=function(){return void 0===this._maxListeners?q.defaultMaxListeners:this._maxListeners};q.prototype.emit=function(w){var x,y,A;var z="error"===w;if(A=this._events)z=z&&null==A.error;else if(!z)return!1;if(z){1<arguments.length&&(x=arguments[1]);if(x instanceof Error)throw x;
A=Error('Unhandled "error" event. ('+x+")");A.context=x;throw A;}x=A[w];if(!x)return!1;A="function"===typeof x;var F=arguments.length;switch(F){case 1:if(A)x.call(this);else for(A=x.length,x=e(x,A),z=0;z<A;++z)x[z].call(this);break;case 2:z=arguments[1];if(A)x.call(this,z);else for(A=x.length,x=e(x,A),F=0;F<A;++F)x[F].call(this,z);break;case 3:z=arguments[1];F=arguments[2];if(A)x.call(this,z,F);else for(A=x.length,x=e(x,A),y=0;y<A;++y)x[y].call(this,z,F);break;case 4:z=arguments[1];F=arguments[2];
y=arguments[3];if(A)x.call(this,z,F,y);else{A=x.length;x=e(x,A);for(var D=0;D<A;++D)x[D].call(this,z,F,y)}break;default:z=Array(F-1);for(y=1;y<F;y++)z[y-1]=arguments[y];if(A)x.apply(this,z);else for(A=x.length,x=e(x,A),F=0;F<A;++F)x[F].apply(this,z)}return!0};q.prototype.addListener=function(w,x){return n(this,w,x,!1)};q.prototype.on=q.prototype.addListener;q.prototype.prependListener=function(w,x){return n(this,w,x,!0)};q.prototype.once=function(w,x){if("function"!==typeof x)throw new TypeError('"listener" argument must be a function');
this.on(w,f(this,w,x));return this};q.prototype.prependOnceListener=function(w,x){if("function"!==typeof x)throw new TypeError('"listener" argument must be a function');this.prependListener(w,f(this,w,x));return this};q.prototype.removeListener=function(w,x){var y;if("function"!==typeof x)throw new TypeError('"listener" argument must be a function');var A=this._events;if(!A)return this;var z=A[w];if(!z)return this;if(z===x||z.listener===x)0===--this._eventsCount?this._events=g(null):(delete A[w],
A.removeListener&&this.emit("removeListener",w,z.listener||x));else if("function"!==typeof z){var F=-1;for(y=z.length-1;0<=y;y--)if(z[y]===x||z[y].listener===x){var D=z[y].listener;F=y;break}if(0>F)return this;if(0===F)z.shift();else{y=F+1;for(var u=z.length;y<u;F+=1,y+=1)z[F]=z[y];z.pop()}1===z.length&&(A[w]=z[0]);A.removeListener&&this.emit("removeListener",w,D||x)}return this};q.prototype.removeAllListeners=function(w){var x=this._events;if(!x)return this;if(!x.removeListener)return 0===arguments.length?
(this._events=g(null),this._eventsCount=0):x[w]&&(0===--this._eventsCount?this._events=g(null):delete x[w]),this;if(0===arguments.length){var y=d(x);for(x=0;x<y.length;++x){var A=y[x];"removeListener"!==A&&this.removeAllListeners(A)}this.removeAllListeners("removeListener");this._events=g(null);this._eventsCount=0;return this}y=x[w];if("function"===typeof y)this.removeListener(w,y);else if(y)for(x=y.length-1;0<=x;x--)this.removeListener(w,y[x]);return this};q.prototype.listeners=function(w){return b(this,
w,!0)};q.prototype.rawListeners=function(w){return b(this,w,!1)};q.listenerCount=function(w,x){return"function"===typeof w.listenerCount?w.listenerCount(x):k.call(w,x)};q.prototype.listenerCount=k;q.prototype.eventNames=function(){return 0<this._eventsCount?Reflect.ownKeys(this._events):[]}},{}],111:[function(a,G,C){(function(q){function n(E){if(2147483647<E)throw new RangeError('The value "'+E+'" is invalid for option "size"');E=new Uint8Array(E);E.__proto__=q.prototype;return E}function q(E,L,Q){if("number"===
typeof E){if("string"===typeof L)throw new TypeError('The "string" argument must be of type string. Received type number');return b(E)}return m(E,L,Q)}function m(E,L,Q){if("string"===typeof E){var S=L;if("string"!==typeof S||""===S)S="utf8";if(!q.isEncoding(S))throw new TypeError("Unknown encoding: "+S);L=l(E,S)|0;Q=n(L);E=Q.write(E,S);E!==L&&(Q=Q.slice(0,E));return Q}if(ArrayBuffer.isView(E))return k(E);if(null==E)throw TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+
typeof E);if(B(E,ArrayBuffer)||E&&B(E.buffer,ArrayBuffer)){if(0>L||E.byteLength<L)throw new RangeError('"offset" is outside of buffer bounds');if(E.byteLength<L+(Q||0))throw new RangeError('"length" is outside of buffer bounds');E=void 0===L&&void 0===Q?new Uint8Array(E):void 0===Q?new Uint8Array(E,L):new Uint8Array(E,L,Q);E.__proto__=q.prototype;return E}if("number"===typeof E)throw new TypeError('The "value" argument must not be of type number. Received type number');S=E.valueOf&&E.valueOf();if(null!=
S&&S!==E)return q.from(S,L,Q);if(S=e(E))return S;if("undefined"!==typeof Symbol&&null!=Symbol.toPrimitive&&"function"===typeof E[Symbol.toPrimitive])return q.from(E[Symbol.toPrimitive]("string"),L,Q);throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof E);}function f(E){if("number"!==typeof E)throw new TypeError('"size" argument must be of type number');if(0>E)throw new RangeError('The value "'+E+'" is invalid for option "size"');
}function b(E){f(E);return n(0>E?0:h(E)|0)}function k(E){for(var L=0>E.length?0:h(E.length)|0,Q=n(L),S=0;S<L;S+=1)Q[S]=E[S]&255;return Q}function e(E){if(q.isBuffer(E)){var L=h(E.length)|0,Q=n(L);if(0===Q.length)return Q;E.copy(Q,0,0,L);return Q}if(void 0!==E.length)return(L="number"!==typeof E.length)||(L=E.length,L=L!==L),L?n(0):k(E);if("Buffer"===E.type&&Array.isArray(E.data))return k(E.data)}function h(E){if(2147483647<=E)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+
(2147483647).toString(16)+" bytes");return E|0}function l(E,L){if(q.isBuffer(E))return E.length;if(ArrayBuffer.isView(E)||B(E,ArrayBuffer))return E.byteLength;if("string"!==typeof E)throw new TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+typeof E);var Q=E.length,S=2<arguments.length&&!0===arguments[2];if(!S&&0===Q)return 0;for(var R=!1;;)switch(L){case "ascii":case "latin1":case "binary":return Q;case "utf8":case "utf-8":return F(E).length;case "ucs2":case "ucs-2":case "utf16le":case "utf-16le":return 2*
Q;case "hex":return Q>>>1;case "base64":return I.toByteArray(z(E)).length;default:if(R)return S?-1:F(E).length;L=(""+L).toLowerCase();R=!0}}function c(E,L,Q){var S=!1;if(void 0===L||0>L)L=0;if(L>this.length)return"";if(void 0===Q||Q>this.length)Q=this.length;if(0>=Q)return"";Q>>>=0;L>>>=0;if(Q<=L)return"";for(E||(E="utf8");;)switch(E){case "hex":E=L;L=Q;Q=this.length;if(!E||0>E)E=0;if(!L||0>L||L>Q)L=Q;S="";for(Q=E;Q<L;++Q)E=S,S=this[Q],S=16>S?"0"+S.toString(16):S.toString(16),S=E+S;return S;case "utf8":case "utf-8":return r(this,
L,Q);case "ascii":E="";for(Q=Math.min(this.length,Q);L<Q;++L)E+=String.fromCharCode(this[L]&127);return E;case "latin1":case "binary":E="";for(Q=Math.min(this.length,Q);L<Q;++L)E+=String.fromCharCode(this[L]);return E;case "base64":return L=0===L&&Q===this.length?I.fromByteArray(this):I.fromByteArray(this.slice(L,Q)),L;case "ucs2":case "ucs-2":case "utf16le":case "utf-16le":L=this.slice(L,Q);Q="";for(E=0;E<L.length;E+=2)Q+=String.fromCharCode(L[E]+256*L[E+1]);return Q;default:if(S)throw new TypeError("Unknown encoding: "+
E);E=(E+"").toLowerCase();S=!0}}function g(E,L,Q){var S=E[L];E[L]=E[Q];E[Q]=S}function d(E,L,Q,S,R){if(0===E.length)return-1;"string"===typeof Q?(S=Q,Q=0):2147483647<Q?Q=2147483647:-2147483648>Q&&(Q=-2147483648);Q=+Q;Q!==Q&&(Q=R?0:E.length-1);0>Q&&(Q=E.length+Q);if(Q>=E.length){if(R)return-1;Q=E.length-1}else if(0>Q)if(R)Q=0;else return-1;"string"===typeof L&&(L=q.from(L,S));if(q.isBuffer(L))return 0===L.length?-1:p(E,L,Q,S,R);if("number"===typeof L)return L&=255,"function"===typeof Uint8Array.prototype.indexOf?
R?Uint8Array.prototype.indexOf.call(E,L,Q):Uint8Array.prototype.lastIndexOf.call(E,L,Q):p(E,[L],Q,S,R);throw new TypeError("val must be string, number or Buffer");}function p(E,L,Q,S,R){function O(ba,aa){return 1===T?ba[aa]:ba.readUInt16BE(aa*T)}var T=1,V=E.length,X=L.length;if(void 0!==S&&(S=String(S).toLowerCase(),"ucs2"===S||"ucs-2"===S||"utf16le"===S||"utf-16le"===S)){if(2>E.length||2>L.length)return-1;T=2;V/=2;X/=2;Q/=2}if(R)for(S=-1;Q<V;Q++)if(O(E,Q)===O(L,-1===S?0:Q-S)){if(-1===S&&(S=Q),Q-
S+1===X)return S*T}else-1!==S&&(Q-=Q-S),S=-1;else for(Q+X>V&&(Q=V-X);0<=Q;Q--){V=!0;for(S=0;S<X;S++)if(O(E,Q+S)!==O(L,S)){V=!1;break}if(V)return Q}return-1}function r(E,L,Q){Q=Math.min(E.length,Q);for(var S=[];L<Q;){var R=E[L],O=null,T=239<R?4:223<R?3:191<R?2:1;if(L+T<=Q)switch(T){case 1:128>R&&(O=R);break;case 2:var V=E[L+1];128===(V&192)&&(R=(R&31)<<6|V&63,127<R&&(O=R));break;case 3:V=E[L+1];var X=E[L+2];128===(V&192)&&128===(X&192)&&(R=(R&15)<<12|(V&63)<<6|X&63,2047<R&&(55296>R||57343<R)&&(O=R));
break;case 4:V=E[L+1];X=E[L+2];var ba=E[L+3];128===(V&192)&&128===(X&192)&&128===(ba&192)&&(R=(R&15)<<18|(V&63)<<12|(X&63)<<6|ba&63,65535<R&&1114112>R&&(O=R))}null===O?(O=65533,T=1):65535<O&&(O-=65536,S.push(O>>>10&1023|55296),O=56320|O&1023);S.push(O);L+=T}E=S.length;if(E<=N)S=String.fromCharCode.apply(String,S);else{Q="";for(L=0;L<E;)Q+=String.fromCharCode.apply(String,S.slice(L,L+=N));S=Q}return S}function t(E,L,Q){if(0!==E%1||0>E)throw new RangeError("offset is not uint");if(E+L>Q)throw new RangeError("Trying to access beyond buffer length");
}function w(E,L,Q,S,R,O){if(!q.isBuffer(E))throw new TypeError('"buffer" argument must be a Buffer instance');if(L>R||L<O)throw new RangeError('"value" argument is out of bounds');if(Q+S>E.length)throw new RangeError("Index out of range");}function x(E,L,Q,S,R,O){if(Q+S>E.length)throw new RangeError("Index out of range");if(0>Q)throw new RangeError("Index out of range");}function y(E,L,Q,S,R){L=+L;Q>>>=0;R||x(E,L,Q,4,3.4028234663852886E38,-3.4028234663852886E38);J.write(E,L,Q,S,23,4);return Q+4}function A(E,
L,Q,S,R){L=+L;Q>>>=0;R||x(E,L,Q,8,1.7976931348623157E308,-1.7976931348623157E308);J.write(E,L,Q,S,52,8);return Q+8}function z(E){E=E.split("\x3d")[0];E=E.trim().replace(M,"");if(2>E.length)return"";for(;0!==E.length%4;)E+="\x3d";return E}function F(E,L){L=L||Infinity;for(var Q,S=E.length,R=null,O=[],T=0;T<S;++T){Q=E.charCodeAt(T);if(55295<Q&&57344>Q){if(!R){if(56319<Q){-1<(L-=3)&&O.push(239,191,189);continue}else if(T+1===S){-1<(L-=3)&&O.push(239,191,189);continue}R=Q;continue}if(56320>Q){-1<(L-=
3)&&O.push(239,191,189);R=Q;continue}Q=(R-55296<<10|Q-56320)+65536}else R&&-1<(L-=3)&&O.push(239,191,189);R=null;if(128>Q){if(0>--L)break;O.push(Q)}else if(2048>Q){if(0>(L-=2))break;O.push(Q>>6|192,Q&63|128)}else if(65536>Q){if(0>(L-=3))break;O.push(Q>>12|224,Q>>6&63|128,Q&63|128)}else if(1114112>Q){if(0>(L-=4))break;O.push(Q>>18|240,Q>>12&63|128,Q>>6&63|128,Q&63|128)}else throw Error("Invalid code point");}return O}function D(E){for(var L=[],Q=0;Q<E.length;++Q)L.push(E.charCodeAt(Q)&255);return L}
function u(E,L,Q,S){for(var R=0;R<S&&!(R+Q>=L.length||R>=E.length);++R)L[R+Q]=E[R];return R}function B(E,L){return E instanceof L||null!=E&&null!=E.constructor&&null!=E.constructor.name&&E.constructor.name===L.name}var I=a("base64-js"),J=a("ieee754");C.Buffer=q;C.SlowBuffer=function(E){+E!=E&&(E=0);return q.alloc(+E)};C.INSPECT_MAX_BYTES=50;C.kMaxLength=2147483647;q.TYPED_ARRAY_SUPPORT=function(){try{var E=new Uint8Array(1);E.__proto__={__proto__:Uint8Array.prototype,foo:function(){return 42}};return 42===
E.foo()}catch(L){return!1}}();q.TYPED_ARRAY_SUPPORT||"undefined"===typeof console||"function"!==typeof console.error||console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support.");Object.defineProperty(q.prototype,"parent",{enumerable:!0,get:function(){if(q.isBuffer(this))return this.buffer}});Object.defineProperty(q.prototype,"offset",{enumerable:!0,get:function(){if(q.isBuffer(this))return this.byteOffset}});
"undefined"!==typeof Symbol&&null!=Symbol.species&&q[Symbol.species]===q&&Object.defineProperty(q,Symbol.species,{value:null,configurable:!0,enumerable:!1,writable:!1});q.poolSize=8192;q.from=function(E,L,Q){return m(E,L,Q)};q.prototype.__proto__=Uint8Array.prototype;q.__proto__=Uint8Array;q.alloc=function(E,L,Q){f(E);E=0>=E?n(E):void 0!==L?"string"===typeof Q?n(E).fill(L,Q):n(E).fill(L):n(E);return E};q.allocUnsafe=function(E){return b(E)};q.allocUnsafeSlow=function(E){return b(E)};q.isBuffer=function(E){return null!=
E&&!0===E._isBuffer&&E!==q.prototype};q.compare=function(E,L){B(E,Uint8Array)&&(E=q.from(E,E.offset,E.byteLength));B(L,Uint8Array)&&(L=q.from(L,L.offset,L.byteLength));if(!q.isBuffer(E)||!q.isBuffer(L))throw new TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(E===L)return 0;for(var Q=E.length,S=L.length,R=0,O=Math.min(Q,S);R<O;++R)if(E[R]!==L[R]){Q=E[R];S=L[R];break}return Q<S?-1:S<Q?1:0};q.isEncoding=function(E){switch(String(E).toLowerCase()){case "hex":case "utf8":case "utf-8":case "ascii":case "latin1":case "binary":case "base64":case "ucs2":case "ucs-2":case "utf16le":case "utf-16le":return!0;
default:return!1}};q.concat=function(E,L){if(!Array.isArray(E))throw new TypeError('"list" argument must be an Array of Buffers');if(0===E.length)return q.alloc(0);var Q;if(void 0===L)for(Q=L=0;Q<E.length;++Q)L+=E[Q].length;L=q.allocUnsafe(L);var S=0;for(Q=0;Q<E.length;++Q){var R=E[Q];B(R,Uint8Array)&&(R=q.from(R));if(!q.isBuffer(R))throw new TypeError('"list" argument must be an Array of Buffers');R.copy(L,S);S+=R.length}return L};q.byteLength=l;q.prototype._isBuffer=!0;q.prototype.swap16=function(){var E=
this.length;if(0!==E%2)throw new RangeError("Buffer size must be a multiple of 16-bits");for(var L=0;L<E;L+=2)g(this,L,L+1);return this};q.prototype.swap32=function(){var E=this.length;if(0!==E%4)throw new RangeError("Buffer size must be a multiple of 32-bits");for(var L=0;L<E;L+=4)g(this,L,L+3),g(this,L+1,L+2);return this};q.prototype.swap64=function(){var E=this.length;if(0!==E%8)throw new RangeError("Buffer size must be a multiple of 64-bits");for(var L=0;L<E;L+=8)g(this,L,L+7),g(this,L+1,L+6),
g(this,L+2,L+5),g(this,L+3,L+4);return this};q.prototype.toString=function(){var E=this.length;return 0===E?"":0===arguments.length?r(this,0,E):c.apply(this,arguments)};q.prototype.toLocaleString=q.prototype.toString;q.prototype.equals=function(E){if(!q.isBuffer(E))throw new TypeError("Argument must be a Buffer");return this===E?!0:0===q.compare(this,E)};q.prototype.inspect=function(){var E=C.INSPECT_MAX_BYTES;var L=this.toString("hex",0,E).replace(/(.{2})/g,"$1 ").trim();this.length>E&&(L+=" ... ");
return"\x3cBuffer "+L+"\x3e"};q.prototype.compare=function(E,L,Q,S,R){B(E,Uint8Array)&&(E=q.from(E,E.offset,E.byteLength));if(!q.isBuffer(E))throw new TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+typeof E);void 0===L&&(L=0);void 0===Q&&(Q=E?E.length:0);void 0===S&&(S=0);void 0===R&&(R=this.length);if(0>L||Q>E.length||0>S||R>this.length)throw new RangeError("out of range index");if(S>=R&&L>=Q)return 0;if(S>=R)return-1;if(L>=Q)return 1;L>>>=0;Q>>>=0;S>>>=
0;R>>>=0;if(this===E)return 0;var O=R-S,T=Q-L,V=Math.min(O,T);S=this.slice(S,R);E=E.slice(L,Q);for(L=0;L<V;++L)if(S[L]!==E[L]){O=S[L];T=E[L];break}return O<T?-1:T<O?1:0};q.prototype.includes=function(E,L,Q){return-1!==this.indexOf(E,L,Q)};q.prototype.indexOf=function(E,L,Q){return d(this,E,L,Q,!0)};q.prototype.lastIndexOf=function(E,L,Q){return d(this,E,L,Q,!1)};q.prototype.write=function(E,L,Q,S){if(void 0===L)S="utf8",Q=this.length,L=0;else if(void 0===Q&&"string"===typeof L)S=L,Q=this.length,L=
0;else if(isFinite(L))L>>>=0,isFinite(Q)?(Q>>>=0,void 0===S&&(S="utf8")):(S=Q,Q=void 0);else throw Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");var R=this.length-L;if(void 0===Q||Q>R)Q=R;if(0<E.length&&(0>Q||0>L)||L>this.length)throw new RangeError("Attempt to write outside buffer bounds");S||(S="utf8");for(R=!1;;)switch(S){case "hex":a:{L=Number(L)||0;S=this.length-L;Q?(Q=Number(Q),Q>S&&(Q=S)):Q=S;S=E.length;Q>S/2&&(Q=S/2);for(S=0;S<Q;++S){R=parseInt(E.substr(2*
S,2),16);if(R!==R){E=S;break a}this[L+S]=R}E=S}return E;case "utf8":case "utf-8":return u(F(E,this.length-L),this,L,Q);case "ascii":return u(D(E),this,L,Q);case "latin1":case "binary":return u(D(E),this,L,Q);case "base64":return u(I.toByteArray(z(E)),this,L,Q);case "ucs2":case "ucs-2":case "utf16le":case "utf-16le":S=E;R=this.length-L;for(var O=[],T=0;T<S.length&&!(0>(R-=2));++T){var V=S.charCodeAt(T);E=V>>8;V%=256;O.push(V);O.push(E)}return u(O,this,L,Q);default:if(R)throw new TypeError("Unknown encoding: "+
S);S=(""+S).toLowerCase();R=!0}};q.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};var N=4096;q.prototype.slice=function(E,L){var Q=this.length;E=~~E;L=void 0===L?Q:~~L;0>E?(E+=Q,0>E&&(E=0)):E>Q&&(E=Q);0>L?(L+=Q,0>L&&(L=0)):L>Q&&(L=Q);L<E&&(L=E);E=this.subarray(E,L);E.__proto__=q.prototype;return E};q.prototype.readUIntLE=function(E,L,Q){E>>>=0;L>>>=0;Q||t(E,L,this.length);Q=this[E];for(var S=1,R=0;++R<L&&(S*=256);)Q+=this[E+R]*S;return Q};q.prototype.readUIntBE=
function(E,L,Q){E>>>=0;L>>>=0;Q||t(E,L,this.length);Q=this[E+--L];for(var S=1;0<L&&(S*=256);)Q+=this[E+--L]*S;return Q};q.prototype.readUInt8=function(E,L){E>>>=0;L||t(E,1,this.length);return this[E]};q.prototype.readUInt16LE=function(E,L){E>>>=0;L||t(E,2,this.length);return this[E]|this[E+1]<<8};q.prototype.readUInt16BE=function(E,L){E>>>=0;L||t(E,2,this.length);return this[E]<<8|this[E+1]};q.prototype.readUInt32LE=function(E,L){E>>>=0;L||t(E,4,this.length);return(this[E]|this[E+1]<<8|this[E+2]<<
16)+16777216*this[E+3]};q.prototype.readUInt32BE=function(E,L){E>>>=0;L||t(E,4,this.length);return 16777216*this[E]+(this[E+1]<<16|this[E+2]<<8|this[E+3])};q.prototype.readIntLE=function(E,L,Q){E>>>=0;L>>>=0;Q||t(E,L,this.length);Q=this[E];for(var S=1,R=0;++R<L&&(S*=256);)Q+=this[E+R]*S;Q>=128*S&&(Q-=Math.pow(2,8*L));return Q};q.prototype.readIntBE=function(E,L,Q){E>>>=0;L>>>=0;Q||t(E,L,this.length);Q=L;for(var S=1,R=this[E+--Q];0<Q&&(S*=256);)R+=this[E+--Q]*S;R>=128*S&&(R-=Math.pow(2,8*L));return R};
q.prototype.readInt8=function(E,L){E>>>=0;L||t(E,1,this.length);return this[E]&128?-1*(255-this[E]+1):this[E]};q.prototype.readInt16LE=function(E,L){E>>>=0;L||t(E,2,this.length);E=this[E]|this[E+1]<<8;return E&32768?E|4294901760:E};q.prototype.readInt16BE=function(E,L){E>>>=0;L||t(E,2,this.length);E=this[E+1]|this[E]<<8;return E&32768?E|4294901760:E};q.prototype.readInt32LE=function(E,L){E>>>=0;L||t(E,4,this.length);return this[E]|this[E+1]<<8|this[E+2]<<16|this[E+3]<<24};q.prototype.readInt32BE=
function(E,L){E>>>=0;L||t(E,4,this.length);return this[E]<<24|this[E+1]<<16|this[E+2]<<8|this[E+3]};q.prototype.readFloatLE=function(E,L){E>>>=0;L||t(E,4,this.length);return J.read(this,E,!0,23,4)};q.prototype.readFloatBE=function(E,L){E>>>=0;L||t(E,4,this.length);return J.read(this,E,!1,23,4)};q.prototype.readDoubleLE=function(E,L){E>>>=0;L||t(E,8,this.length);return J.read(this,E,!0,52,8)};q.prototype.readDoubleBE=function(E,L){E>>>=0;L||t(E,8,this.length);return J.read(this,E,!1,52,8)};q.prototype.writeUIntLE=
function(E,L,Q,S){E=+E;L>>>=0;Q>>>=0;S||w(this,E,L,Q,Math.pow(2,8*Q)-1,0);S=1;var R=0;for(this[L]=E&255;++R<Q&&(S*=256);)this[L+R]=E/S&255;return L+Q};q.prototype.writeUIntBE=function(E,L,Q,S){E=+E;L>>>=0;Q>>>=0;S||w(this,E,L,Q,Math.pow(2,8*Q)-1,0);S=Q-1;var R=1;for(this[L+S]=E&255;0<=--S&&(R*=256);)this[L+S]=E/R&255;return L+Q};q.prototype.writeUInt8=function(E,L,Q){E=+E;L>>>=0;Q||w(this,E,L,1,255,0);this[L]=E&255;return L+1};q.prototype.writeUInt16LE=function(E,L,Q){E=+E;L>>>=0;Q||w(this,E,L,2,
65535,0);this[L]=E&255;this[L+1]=E>>>8;return L+2};q.prototype.writeUInt16BE=function(E,L,Q){E=+E;L>>>=0;Q||w(this,E,L,2,65535,0);this[L]=E>>>8;this[L+1]=E&255;return L+2};q.prototype.writeUInt32LE=function(E,L,Q){E=+E;L>>>=0;Q||w(this,E,L,4,4294967295,0);this[L+3]=E>>>24;this[L+2]=E>>>16;this[L+1]=E>>>8;this[L]=E&255;return L+4};q.prototype.writeUInt32BE=function(E,L,Q){E=+E;L>>>=0;Q||w(this,E,L,4,4294967295,0);this[L]=E>>>24;this[L+1]=E>>>16;this[L+2]=E>>>8;this[L+3]=E&255;return L+4};q.prototype.writeIntLE=
function(E,L,Q,S){E=+E;L>>>=0;S||(S=Math.pow(2,8*Q-1),w(this,E,L,Q,S-1,-S));S=0;var R=1,O=0;for(this[L]=E&255;++S<Q&&(R*=256);)0>E&&0===O&&0!==this[L+S-1]&&(O=1),this[L+S]=(E/R>>0)-O&255;return L+Q};q.prototype.writeIntBE=function(E,L,Q,S){E=+E;L>>>=0;S||(S=Math.pow(2,8*Q-1),w(this,E,L,Q,S-1,-S));S=Q-1;var R=1,O=0;for(this[L+S]=E&255;0<=--S&&(R*=256);)0>E&&0===O&&0!==this[L+S+1]&&(O=1),this[L+S]=(E/R>>0)-O&255;return L+Q};q.prototype.writeInt8=function(E,L,Q){E=+E;L>>>=0;Q||w(this,E,L,1,127,-128);
0>E&&(E=255+E+1);this[L]=E&255;return L+1};q.prototype.writeInt16LE=function(E,L,Q){E=+E;L>>>=0;Q||w(this,E,L,2,32767,-32768);this[L]=E&255;this[L+1]=E>>>8;return L+2};q.prototype.writeInt16BE=function(E,L,Q){E=+E;L>>>=0;Q||w(this,E,L,2,32767,-32768);this[L]=E>>>8;this[L+1]=E&255;return L+2};q.prototype.writeInt32LE=function(E,L,Q){E=+E;L>>>=0;Q||w(this,E,L,4,2147483647,-2147483648);this[L]=E&255;this[L+1]=E>>>8;this[L+2]=E>>>16;this[L+3]=E>>>24;return L+4};q.prototype.writeInt32BE=function(E,L,Q){E=
+E;L>>>=0;Q||w(this,E,L,4,2147483647,-2147483648);0>E&&(E=4294967295+E+1);this[L]=E>>>24;this[L+1]=E>>>16;this[L+2]=E>>>8;this[L+3]=E&255;return L+4};q.prototype.writeFloatLE=function(E,L,Q){return y(this,E,L,!0,Q)};q.prototype.writeFloatBE=function(E,L,Q){return y(this,E,L,!1,Q)};q.prototype.writeDoubleLE=function(E,L,Q){return A(this,E,L,!0,Q)};q.prototype.writeDoubleBE=function(E,L,Q){return A(this,E,L,!1,Q)};q.prototype.copy=function(E,L,Q,S){if(!q.isBuffer(E))throw new TypeError("argument should be a Buffer");
Q||(Q=0);S||0===S||(S=this.length);L>=E.length&&(L=E.length);L||(L=0);0<S&&S<Q&&(S=Q);if(S===Q||0===E.length||0===this.length)return 0;if(0>L)throw new RangeError("targetStart out of bounds");if(0>Q||Q>=this.length)throw new RangeError("Index out of range");if(0>S)throw new RangeError("sourceEnd out of bounds");S>this.length&&(S=this.length);E.length-L<S-Q&&(S=E.length-L+Q);var R=S-Q;if(this===E&&"function"===typeof Uint8Array.prototype.copyWithin)this.copyWithin(L,Q,S);else if(this===E&&Q<L&&L<S)for(S=
R-1;0<=S;--S)E[S+L]=this[S+Q];else Uint8Array.prototype.set.call(E,this.subarray(Q,S),L);return R};q.prototype.fill=function(E,L,Q,S){if("string"===typeof E){"string"===typeof L?(S=L,L=0,Q=this.length):"string"===typeof Q&&(S=Q,Q=this.length);if(void 0!==S&&"string"!==typeof S)throw new TypeError("encoding must be a string");if("string"===typeof S&&!q.isEncoding(S))throw new TypeError("Unknown encoding: "+S);if(1===E.length){var R=E.charCodeAt(0);if("utf8"===S&&128>R||"latin1"===S)E=R}}else"number"===
typeof E&&(E&=255);if(0>L||this.length<L||this.length<Q)throw new RangeError("Out of range index");if(Q<=L)return this;L>>>=0;Q=void 0===Q?this.length:Q>>>0;E||(E=0);if("number"===typeof E)for(S=L;S<Q;++S)this[S]=E;else{R=q.isBuffer(E)?E:q.from(E,S);var O=R.length;if(0===O)throw new TypeError('The value "'+E+'" is invalid for argument "value"');for(S=0;S<Q-L;++S)this[S+L]=R[S%O]}return this};var M=/[^+/0-9A-Za-z-_]/g}).call(this,a("buffer").Buffer)},{"base64-js":79,buffer:111,ieee754:416}],112:[function(a,
G,C){function q(h){return[Math.min(h[0],h[1]),Math.max(h[0],h[1])]}function n(h,l){return h[0]-l[0]||h[1]-l[1]}function m(h,l,c){return l in h?h[l]:c}var f=a("./lib/monotone"),b=a("./lib/triangulation"),k=a("./lib/delaunay"),e=a("./lib/filter");G.exports=function(h,l,c){Array.isArray(l)?(c=c||{},l=l||[]):(c=l||{},l=[]);var g=!!m(c,"delaunay",!0),d=!!m(c,"interior",!0),p=!!m(c,"exterior",!0);c=!!m(c,"infinity",!1);if(!d&&!p||0===h.length)return[];var r=f(h,l);if(g||d!==p||c){l=b(h.length,l.map(q).sort(n));
for(var t=0;t<r.length;++t){var w=r[t];l.addTriangle(w[0],w[1],w[2])}g&&k(h,l);return p?d?c?e(l,0,c):l.cells():e(l,1,c):e(l,-1)}return r}},{"./lib/delaunay":113,"./lib/filter":114,"./lib/monotone":115,"./lib/triangulation":116}],113:[function(a,G,C){function q(m,f,b,k,e,h){var l=f.opposite(k,e);if(!(0>l)){if(e<k){var c=k;k=e;e=c;c=h;h=l;l=c}f.isConstraint(k,e)||0>n(m[k],m[e],m[h],m[l])&&b.push(k,e)}}var n=a("robust-in-sphere")[4];a("binary-search-bounds");G.exports=function(m,f){for(var b=[],k=m.length,
e=f.stars,h=0;h<k;++h)for(var l=e[h],c=1;c<l.length;c+=2){var g=l[c];if(!(g<h||f.isConstraint(h,g))){for(var d=l[c-1],p=-1,r=1;r<l.length;r+=2)if(l[r-1]===g){p=l[r];break}0>p||0>n(m[h],m[g],m[d],m[p])&&b.push(h,g)}}for(;0<b.length;){g=b.pop();h=b.pop();p=d=-1;l=e[h];for(k=1;k<l.length;k+=2)c=l[k-1],r=l[k],c===g?p=r:r===g&&(d=c);0>d||0>p||0<=n(m[h],m[g],m[d],m[p])||(f.flip(h,g),q(m,f,b,d,h,p),q(m,f,b,h,p,d),q(m,f,b,p,g,d),q(m,f,b,g,d,p))}}},{"binary-search-bounds":96,"robust-in-sphere":518}],114:[function(a,
G,C){function q(f,b,k,e,h,l,c){this.cells=f;this.neighbor=b;this.flags=e;this.constraint=k;this.active=h;this.next=l;this.boundary=c}function n(f,b){return f[0]-b[0]||f[1]-b[1]||f[2]-b[2]}var m=a("binary-search-bounds");G.exports=function(f,b,k){for(var e=f.cells(),h=e.length,l=0;l<h;++l){var c=e[l],g=c[0],d=c[1],p=c[2];d<p?d<g&&(c[0]=d,c[1]=p,c[2]=g):p<g&&(c[0]=p,c[1]=g,c[2]=d)}e.sort(n);var r=Array(h);for(l=0;l<r.length;++l)r[l]=0;var t=[],w=[],x=Array(3*h),y=Array(3*h),A=null;k&&(A=[]);p=new q(e,
x,y,r,t,w,A);for(l=0;l<h;++l){c=e[l];for(var z=0;3>z;++z){g=c[z];d=c[(z+1)%3];var F=x[3*l+z]=p.locate(d,g,f.opposite(d,g)),D=y[3*l+z]=f.isConstraint(g,d);0>F&&(D?w.push(l):(t.push(l),r[l]=1),k&&A.push([d,g,-1]))}}if(0===b)return k?p.cells.concat(p.boundary):p.cells;h=1;l=p.active;c=p.next;f=p.flags;e=p.cells;g=p.constraint;for(d=p.neighbor;0<l.length||0<c.length;){for(;0<l.length;)if(r=l.pop(),f[r]!==-h)for(f[r]=h,t=0;3>t;++t)w=d[3*r+t],0<=w&&0===f[w]&&(g[3*r+t]?c.push(w):(l.push(w),f[w]=h));r=c;
c=l;l=r;c.length=0;h=-h}for(l=h=0;l<e.length;++l)f[l]===b&&(e[h++]=e[l]);e.length=h;return k?e.concat(p.boundary):e};q.prototype.locate=function(){var f=[0,0,0];return function(b,k,e){var h=b,l=k,c=e;k<e?k<b&&(h=k,l=e,c=b):e<b&&(h=e,l=b,c=k);if(0>h)return-1;f[0]=h;f[1]=l;f[2]=c;return m.eq(this.cells,f,n)}}()},{"binary-search-bounds":96}],115:[function(a,G,C){function q(h,l,c,g,d){this.a=h;this.b=l;this.idx=c;this.lowerIds=g;this.upperIds=d}function n(h,l,c,g){this.a=h;this.b=l;this.type=c;this.idx=
g}function m(h,l){var c=h.a[0]-l.a[0]||h.a[1]-l.a[1]||h.type-l.type;return c||0!==h.type&&(c=e(h.a,h.b,l.b))?c:h.idx-l.idx}function f(h,l){return e(h.a,h.b,l)}function b(h,l){var c;return(c=h.a[0]<l.a[0]?e(h.a,h.b,l.a):e(l.b,l.a,h.a))?c:(c=l.b[0]<h.b[0]?e(h.a,h.b,l.b):e(l.b,l.a,h.b))||h.idx-l.idx}var k=a("binary-search-bounds"),e=a("robust-orientation")[3];G.exports=function(h,l){for(var c=h.length,g=l.length,d=[],p=0;p<c;++p)d.push(new n(h[p],null,0,p));for(p=0;p<g;++p){var r=l[p];c=h[r[0]];r=h[r[1]];
c[0]<r[0]?d.push(new n(c,r,2,p),new n(r,c,1,p)):c[0]>r[0]&&d.push(new n(r,c,2,p),new n(c,r,1,p))}d.sort(m);p=d[0].a[0]-(1+Math.abs(d[0].a[0]))*Math.pow(2,-52);l=[new q([p,1],[p,0],-1,[],[],[],[])];g=[];p=0;for(c=d.length;p<c;++p){var t=d[p];r=t.type;if(0===r){r=g;var w=l,x=h,y=t.a;t=t.idx;for(var A=k.lt(w,y,f),z=k.gt(w,y,f);A<z;++A){for(var F=w[A],D=F.lowerIds,u=D.length;1<u&&0<e(x[D[u-2]],x[D[u-1]],y);)r.push([D[u-1],D[u-2],t]),--u;D.length=u;D.push(t);F=F.upperIds;for(u=F.length;1<u&&0>e(x[F[u-
2]],x[F[u-1]],y);)r.push([F[u-2],F[u-1],t]),--u;F.length=u;F.push(t)}}else 2===r?(r=l,w=t,x=k.le(r,w,b),y=r[x],t=y.upperIds,z=t[t.length-1],y.upperIds=[z],r.splice(x+1,0,new q(w.a,w.b,w.idx,[z],t))):(r=l,w=t,x=w.a,w.a=w.b,w.b=x,w=k.eq(r,w,b),r[w-1].upperIds=r[w].upperIds,r.splice(w,1))}return g}},{"binary-search-bounds":96,"robust-orientation":520}],116:[function(a,G,C){function q(f,b){this.stars=f;this.edges=b}function n(f,b,k){for(var e=1,h=f.length;e<h;e+=2)if(f[e-1]===b&&f[e]===k){f[e-1]=f[h-
2];f[e]=f[h-1];f.length=h-2;break}}var m=a("binary-search-bounds");G.exports=function(f,b){for(var k=Array(f),e=0;e<f;++e)k[e]=[];return new q(k,b)};a=q.prototype;a.isConstraint=function(){function f(k,e){return k[0]-e[0]||k[1]-e[1]}var b=[0,0];return function(k,e){b[0]=Math.min(k,e);b[1]=Math.max(k,e);return 0<=m.eq(this.edges,b,f)}}();a.removeTriangle=function(f,b,k){var e=this.stars;n(e[f],b,k);n(e[b],k,f);n(e[k],f,b)};a.addTriangle=function(f,b,k){var e=this.stars;e[f].push(b,k);e[b].push(k,f);
e[k].push(f,b)};a.opposite=function(f,b){b=this.stars[b];for(var k=1,e=b.length;k<e;k+=2)if(b[k]===f)return b[k-1];return-1};a.flip=function(f,b){var k=this.opposite(f,b),e=this.opposite(b,f);this.removeTriangle(f,b,k);this.removeTriangle(b,f,e);this.addTriangle(f,e,k);this.addTriangle(b,k,e)};a.edges=function(){for(var f=this.stars,b=[],k=0,e=f.length;k<e;++k)for(var h=f[k],l=0,c=h.length;l<c;l+=2)b.push([h[l],h[l+1]]);return b};a.cells=function(){for(var f=this.stars,b=[],k=0,e=f.length;k<e;++k)for(var h=
f[k],l=0,c=h.length;l<c;l+=2){var g=h[l],d=h[l+1];k<Math.min(g,d)&&b.push([k,g,d])}return b}},{"binary-search-bounds":96}],117:[function(a,G,C){G.exports=function(q){for(var n=1,m=1;m<q.length;++m)for(var f=0;f<m;++f)if(q[m]<q[f])n=-n;else if(q[f]===q[m])return 0;return n}},{}],118:[function(a,G,C){function q(k,e){for(var h=0,l=k.length,c=0;c<l;++c)h+=k[c]*e[c];return h}function n(k){var e=k.length;if(0===e)return[];for(var h=f([k.length+1,k.length+1],1),l=f([k.length+1],1),c=h[e][e]=0;c<e;++c){for(var g=
0;g<=c;++g)h[g][c]=h[c][g]=2*q(k[c],k[g]);l[c]=q(k[c],k[c])}k=b(h,l);h=0;l=k[e+1];for(c=0;c<l.length;++c)h+=l[c];var d=Array(e);for(c=0;c<e;++c){l=k[c];var p=0;for(g=0;g<l.length;++g)p+=l[g];d[c]=p/h}return d}function m(k){if(0===k.length)return[];for(var e=k[0].length,h=f([e]),l=n(k),c=0;c<k.length;++c)for(var g=0;g<e;++g)h[g]+=k[c][g]*l[c];return h}var f=a("dup"),b=a("robust-linear-solve");m.barycenetric=n;G.exports=m},{dup:176,"robust-linear-solve":519}],119:[function(a,G,C){G.exports=function(n){for(var m=
q(n),f=0,b=0;b<n.length;++b)for(var k=n[b],e=0;e<m.length;++e)f+=Math.pow(k[e]-m[e],2);return Math.sqrt(f/n.length)};var q=a("circumcenter")},{circumcenter:118}],120:[function(a,G,C){G.exports=function(q,n,m){return n<m?q<n?n:q>m?m:q:q<m?m:q>n?n:q}},{}],121:[function(a,G,C){function q(z){z=w(z);return[y(z,-Infinity),y(z,Infinity)]}function n(z){for(var F=Array(z.length),D=0;D<z.length;++D){var u=z[D];F[D]=[y(u[0],-Infinity),y(u[1],-Infinity),y(u[0],Infinity),y(u[1],Infinity)]}return F}function m(z,
F,D){var u=[];d(D,function(B,I){var J=F[B],N=F[I];J[0]!==N[0]&&J[0]!==N[1]&&J[1]!==N[0]&&J[1]!==N[1]&&p(z[J[0]],z[J[1]],z[N[0]],z[N[1]])&&u.push([B,I])});return u}function f(z,F,D,u){var B=[];d(D,u,function(I,J){var N=F[I];if(N[0]!==J&&N[1]!==J){var M=z[J];p(z[N[0]],z[N[1]],M,M)&&B.push([I,J])}});return B}function b(z,F,D,u,B){var I,J=z.map(function(O){return[r(O[0]),r(O[1])]});for(I=0;I<D.length;++I){var N=D[I];var M=N[0];N=N[1];var E=F[M],L=F[N];if(E=A(x(z[E[0]]),x(z[E[1]]),x(z[L[0]]),x(z[L[1]])))L=
z.length,z.push([w(E[0]),w(E[1])]),J.push(E),u.push([M,L],[N,L])}u.sort(function(O,T){if(O[0]!==T[0])return O[0]-T[0];O=J[O[1]];T=J[T[1]];return t(O[0],T[0])||t(O[1],T[1])});for(I=u.length-1;0<=I;--I){N=u[I];M=N[0];E=F[M];L=E[0];D=E[1];var Q=z[L],S=z[D];0>(Q[0]-S[0]||Q[1]-S[1])&&(Q=L,L=D,D=Q);E[0]=L;L=E[1]=N[1];var R;for(B&&(R=E[2]);0<I&&u[I-1][0]===M;)N=u[--I],N=N[1],B?F.push([L,N,R]):F.push([L,N]),L=N;B?F.push([L,D,R]):F.push([L,D])}return J}function k(z,F,D){D=F.length;for(var u=new g(D),B=[],
I=0;I<F.length;++I){var J=F[I],N=q(J[0]);J=q(J[1]);B.push([y(N[0],-Infinity),y(J[0],-Infinity),y(N[1],Infinity),y(J[1],Infinity)])}d(B,function(M,E){u.link(M,E)});N=!0;F=Array(D);for(I=0;I<D;++I)B=u.find(I),B!==I&&(N=!1,z[B]=[Math.min(z[I][0],z[B][0]),Math.min(z[I][1],z[B][1])]);if(N)return null;for(I=N=0;I<D;++I)B=u.find(I),B===I?(F[I]=N,z[N++]=z[I]):F[I]=-1;z.length=N;for(I=0;I<D;++I)0>F[I]&&(F[I]=F[u.find(I)]);return F}function e(z,F){return z[0]-F[0]||z[1]-F[1]}function h(z,F){var D=z[0]-F[0]||
z[1]-F[1];return D?D:z[2]<F[2]?-1:z[2]>F[2]?1:0}function l(z,F,D){if(0!==z.length){if(F)for(var u=0;u<z.length;++u){var B=z[u],I=F[B[0]],J=F[B[1]];B[0]=Math.min(I,J);B[1]=Math.max(I,J)}else for(u=0;u<z.length;++u)B=z[u],I=B[0],J=B[1],B[0]=Math.min(I,J),B[1]=Math.max(I,J);D?z.sort(h):z.sort(e);for(u=F=1;u<z.length;++u)if(B=z[u-1],I=z[u],I[0]!==B[0]||I[1]!==B[1]||D&&I[2]!==B[2])z[F++]=I;z.length=F}}function c(z,F,D){for(var u=Array(F.length),B=0;B<F.length;++B){var I=F[B],J=z[I[0]];I=z[I[1]];u[B]=[y(Math.min(J[0],
I[0]),-Infinity),y(Math.min(J[1],I[1]),-Infinity),y(Math.max(J[0],I[0]),Infinity),y(Math.max(J[1],I[1]),Infinity)]}B=m(z,F,u);J=n(z);u=f(z,F,u,J);I=b(z,F,B,u,D);z=k(z,I,J);l(F,z,D);return z?!0:0<B.length||0<u.length}G.exports=function(z,F,D){if(D){var u=F;for(var B=Array(F.length),I=0;I<F.length;++I){var J=F[I];B[I]=[J[0],J[1],D[I]]}F=B}I=F;J=!!D;B=k(z,[],n(z));l(I,B,J);for(B=!!B;c(z,F,!!D);)B=!0;if(D&&B)for(u.length=0,I=D.length=0;I<F.length;++I)J=F[I],u.push([J[0],J[1]]),D.push(J[2]);return B};
var g=a("union-find"),d=a("box-intersect"),p=a("robust-segment-intersect"),r=a("big-rat"),t=a("big-rat/cmp"),w=a("big-rat/to-float"),x=a("rat-vec"),y=a("nextafter"),A=a("./lib/rat-seg-intersect")},{"./lib/rat-seg-intersect":122,"big-rat":83,"big-rat/cmp":81,"big-rat/to-float":95,"box-intersect":101,nextafter:470,"rat-vec":504,"robust-segment-intersect":523,"union-find":568}],122:[function(a,G,C){function q(l,c){return f(n(l[0],c[1]),n(l[1],c[0]))}G.exports=function(l,c,g,d){c=k(c,l);var p=k(d,g);
d=q(c,p);if(0===b(d))return null;g=k(l,g);g=q(p,g);g=m(g,d);c=h(c,g);return e(l,c)};var n=a("big-rat/mul"),m=a("big-rat/div"),f=a("big-rat/sub"),b=a("big-rat/sign"),k=a("rat-vec/sub"),e=a("rat-vec/add"),h=a("rat-vec/muls")},{"big-rat/div":82,"big-rat/mul":92,"big-rat/sign":93,"big-rat/sub":94,"rat-vec/add":503,"rat-vec/muls":505,"rat-vec/sub":506}],123:[function(a,G,C){function q(m,f){null==f&&(f=!0);var b=m[0],k=m[1],e=m[2];m=m[3];null==m&&(m=f?1:255);f&&(b*=255,k*=255,e*=255,m*=255);b=n(b,0,255)&
255;k=n(k,0,255)&255;e=n(e,0,255)&255;m=n(m,0,255)&255;return 16777216*b+(k<<16)+(e<<8)+m}var n=a("clamp");G.exports=q;G.exports.to=q;G.exports.from=function(m,f){m=+m;var b=m>>>24,k=(m&16711680)>>>16,e=(m&65280)>>>8;m&=255;return!1===f?[b,k,e,m]:[b/255,k/255,e/255,m/255]}},{clamp:120}],124:[function(a,G,C){G.exports={aliceblue:[240,248,255],antiquewhite:[250,235,215],aqua:[0,255,255],aquamarine:[127,255,212],azure:[240,255,255],beige:[245,245,220],bisque:[255,228,196],black:[0,0,0],blanchedalmond:[255,
235,205],blue:[0,0,255],blueviolet:[138,43,226],brown:[165,42,42],burlywood:[222,184,135],cadetblue:[95,158,160],chartreuse:[127,255,0],chocolate:[210,105,30],coral:[255,127,80],cornflowerblue:[100,149,237],cornsilk:[255,248,220],crimson:[220,20,60],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],darkgoldenrod:[184,134,11],darkgray:[169,169,169],darkgreen:[0,100,0],darkgrey:[169,169,169],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,
50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkseagreen:[143,188,143],darkslateblue:[72,61,139],darkslategray:[47,79,79],darkslategrey:[47,79,79],darkturquoise:[0,206,209],darkviolet:[148,0,211],deeppink:[255,20,147],deepskyblue:[0,191,255],dimgray:[105,105,105],dimgrey:[105,105,105],dodgerblue:[30,144,255],firebrick:[178,34,34],floralwhite:[255,250,240],forestgreen:[34,139,34],fuchsia:[255,0,255],gainsboro:[220,220,220],ghostwhite:[248,248,255],gold:[255,215,0],goldenrod:[218,165,32],gray:[128,
128,128],green:[0,128,0],greenyellow:[173,255,47],grey:[128,128,128],honeydew:[240,255,240],hotpink:[255,105,180],indianred:[205,92,92],indigo:[75,0,130],ivory:[255,255,240],khaki:[240,230,140],lavender:[230,230,250],lavenderblush:[255,240,245],lawngreen:[124,252,0],lemonchiffon:[255,250,205],lightblue:[173,216,230],lightcoral:[240,128,128],lightcyan:[224,255,255],lightgoldenrodyellow:[250,250,210],lightgray:[211,211,211],lightgreen:[144,238,144],lightgrey:[211,211,211],lightpink:[255,182,193],lightsalmon:[255,
160,122],lightseagreen:[32,178,170],lightskyblue:[135,206,250],lightslategray:[119,136,153],lightslategrey:[119,136,153],lightsteelblue:[176,196,222],lightyellow:[255,255,224],lime:[0,255,0],limegreen:[50,205,50],linen:[250,240,230],magenta:[255,0,255],maroon:[128,0,0],mediumaquamarine:[102,205,170],mediumblue:[0,0,205],mediumorchid:[186,85,211],mediumpurple:[147,112,219],mediumseagreen:[60,179,113],mediumslateblue:[123,104,238],mediumspringgreen:[0,250,154],mediumturquoise:[72,209,204],mediumvioletred:[199,
21,133],midnightblue:[25,25,112],mintcream:[245,255,250],mistyrose:[255,228,225],moccasin:[255,228,181],navajowhite:[255,222,173],navy:[0,0,128],oldlace:[253,245,230],olive:[128,128,0],olivedrab:[107,142,35],orange:[255,165,0],orangered:[255,69,0],orchid:[218,112,214],palegoldenrod:[238,232,170],palegreen:[152,251,152],paleturquoise:[175,238,238],palevioletred:[219,112,147],papayawhip:[255,239,213],peachpuff:[255,218,185],peru:[205,133,63],pink:[255,192,203],plum:[221,160,221],powderblue:[176,224,
230],purple:[128,0,128],rebeccapurple:[102,51,153],red:[255,0,0],rosybrown:[188,143,143],royalblue:[65,105,225],saddlebrown:[139,69,19],salmon:[250,128,114],sandybrown:[244,164,96],seagreen:[46,139,87],seashell:[255,245,238],sienna:[160,82,45],silver:[192,192,192],skyblue:[135,206,235],slateblue:[106,90,205],slategray:[112,128,144],slategrey:[112,128,144],snow:[255,250,250],springgreen:[0,255,127],steelblue:[70,130,180],tan:[210,180,140],teal:[0,128,128],thistle:[216,191,216],tomato:[255,99,71],turquoise:[64,
224,208],violet:[238,130,238],wheat:[245,222,179],white:[255,255,255],whitesmoke:[245,245,245],yellow:[255,255,0],yellowgreen:[154,205,50]}},{}],125:[function(a,G,C){var q=a("color-rgba"),n=a("dtype");G.exports=function(m,f){"float"!==f&&f||(f="array");"uint"===f&&(f="uint8");"uint_clamped"===f&&(f="uint8_clamped");var b=new (n(f))(4);f="uint8"!==f&&"uint8_clamped"!==f;m.length&&"string"!==typeof m||(m=q(m),m[0]/=255,m[1]/=255,m[2]/=255);var k=m;k=k instanceof Uint8Array||k instanceof Uint8ClampedArray?
!0:Array.isArray(k)&&(1<k[0]||0===k[0])&&(1<k[1]||0===k[1])&&(1<k[2]||0===k[2])&&(!k[3]||1<k[3])?!0:!1;if(k)return b[0]=m[0],b[1]=m[1],b[2]=m[2],b[3]=null!=m[3]?m[3]:255,f&&(b[0]/=255,b[1]/=255,b[2]/=255,b[3]/=255),b;f?(b[0]=m[0],b[1]=m[1],b[2]=m[2],b[3]=null!=m[3]?m[3]:1):(b[0]=Math.min(Math.max(Math.floor(255*m[0]),0),255),b[1]=Math.min(Math.max(Math.floor(255*m[1]),0),255),b[2]=Math.min(Math.max(Math.floor(255*m[2]),0),255),b[3]=null==m[3]?255:Math.min(Math.max(Math.floor(255*m[3]),0),255));return b}},
{"color-rgba":127,dtype:175}],126:[function(a,G,C){var q=a("color-name");G.exports=function(m){var f,b=[],k=1;if("string"===typeof m)if(q[m]){b=q[m].slice();var e="rgb"}else if("transparent"===m)k=0,e="rgb",b=[0,0,0];else if(/^#[A-Fa-f0-9]+$/.test(m)){var h=m.slice(1),l=h.length;k=1;4>=l?(b=[parseInt(h[0]+h[0],16),parseInt(h[1]+h[1],16),parseInt(h[2]+h[2],16)],4===l&&(k=parseInt(h[3]+h[3],16)/255)):(b=[parseInt(h[0]+h[1],16),parseInt(h[2]+h[3],16),parseInt(h[4]+h[5],16)],8===l&&(k=parseInt(h[6]+h[7],
16)/255));b[0]||(b[0]=0);b[1]||(b[1]=0);b[2]||(b[2]=0);e="rgb"}else(f=/^((?:rgb|hs[lvb]|hwb|cmyk?|xy[zy]|gray|lab|lchu?v?|[ly]uv|lms)a?)\s*\(([^\)]*)\)/.exec(m))?(m=f[1],k="rgb"===m,e=h=m.replace(/a$/,""),l="cmyk"===h?4:"gray"===h?1:3,b=f[2].trim().split(/\s*[,\/]\s*|\s+/).map(function(c,g){if(/%$/.test(c)){if(g===l)return parseFloat(c)/100;if("rgb"===h)return 255*parseFloat(c)/100}else if("h"===h[g]&&!/deg$/.test(c)&&void 0!==n[c])return n[c];return parseFloat(c)}),m===h&&b.push(1),k=k?1:void 0===
b[l]?1:b[l],b=b.slice(0,l)):10<m.length&&/[0-9](?:\s|\/)/.test(m)&&(b=m.match(/([0-9]+)/g).map(function(c){return parseFloat(c)}),e=m.match(/([a-z])/ig).join("").toLowerCase());else isNaN(m)?Array.isArray(m)||m.length?(b=[m[0],m[1],m[2]],e="rgb",k=4===m.length?m[3]:1):m instanceof Object&&(null!=m.r||null!=m.red||null!=m.R?(e="rgb",b=[m.r||m.red||m.R||0,m.g||m.green||m.G||0,m.b||m.blue||m.B||0]):(e="hsl",b=[m.h||m.hue||m.H||0,m.s||m.saturation||m.S||0,m.l||m.lightness||m.L||m.b||m.brightness]),k=
m.a||m.alpha||m.opacity||1,null!=m.opacity&&(k/=100)):(e="rgb",b=[m>>>16,(m&65280)>>>8,m&255]);return{space:e,values:b,alpha:k}};var n={red:0,orange:60,yellow:120,green:180,blue:240,purple:300}},{"color-name":124}],127:[function(a,G,C){var q=a("color-parse"),n=a("color-space/hsl");G.exports=function(m){Array.isArray(m)&&m.raw&&(m=String.raw.apply(null,arguments));var f=q(m);if(!f.space)return[];var b=Array(3);b[0]=Math.min(Math.max(f.values[0],0),255);b[1]=Math.min(Math.max(f.values[1],0),255);b[2]=
Math.min(Math.max(f.values[2],0),255);"h"===f.space[0]&&(b=n.rgb(b));b.push(Math.min(Math.max(f.alpha,0),1));return b}},{"color-parse":126,"color-space/hsl":128}],128:[function(a,G,C){a=a("./rgb");G.exports={name:"hsl",min:[0,0,0],max:[360,100,100],channel:["hue","saturation","lightness"],alias:["HSL"],rgb:function(q){var n=q[0]/360,m=q[1]/100;q=q[2]/100;if(0===m){var f=255*q;return[f,f,f]}m=.5>q?q*(1+m):q+m-q*m;q=2*q-m;var b=[0,0,0];for(var k=0;3>k;k++)f=n+1/3*-(k-1),0>f?f++:1<f&&f--,f=1>6*f?q+6*
(m-q)*f:1>2*f?m:2>3*f?q+(m-q)*(2/3-f)*6:q,b[k]=255*f;return b}};a.hsl=function(q){var n=q[0]/255,m=q[1]/255,f=q[2]/255;q=Math.min(n,m,f);var b=Math.max(n,m,f),k=b-q,e;b===q?e=0:n===b?e=(m-f)/k:m===b?e=2+(f-n)/k:f===b&&(e=4+(n-m)/k);e=Math.min(60*e,360);0>e&&(e+=360);n=(q+b)/2;return[e,100*(b===q?0:.5>=n?k/(b+q):k/(2-b-q)),100*n]}},{"./rgb":129}],129:[function(a,G,C){G.exports={name:"rgb",min:[0,0,0],max:[255,255,255],channel:["red","green","blue"],alias:["RGB"]}},{}],130:[function(a,G,C){G.exports=
{jet:[{index:0,rgb:[0,0,131]},{index:.125,rgb:[0,60,170]},{index:.375,rgb:[5,255,255]},{index:.625,rgb:[255,255,0]},{index:.875,rgb:[250,0,0]},{index:1,rgb:[128,0,0]}],hsv:[{index:0,rgb:[255,0,0]},{index:.169,rgb:[253,255,2]},{index:.173,rgb:[247,255,2]},{index:.337,rgb:[0,252,4]},{index:.341,rgb:[0,252,10]},{index:.506,rgb:[1,249,255]},{index:.671,rgb:[2,0,253]},{index:.675,rgb:[8,0,253]},{index:.839,rgb:[255,0,251]},{index:.843,rgb:[255,0,245]},{index:1,rgb:[255,0,6]}],hot:[{index:0,rgb:[0,0,0]},
{index:.3,rgb:[230,0,0]},{index:.6,rgb:[255,210,0]},{index:1,rgb:[255,255,255]}],cool:[{index:0,rgb:[0,255,255]},{index:1,rgb:[255,0,255]}],spring:[{index:0,rgb:[255,0,255]},{index:1,rgb:[255,255,0]}],summer:[{index:0,rgb:[0,128,102]},{index:1,rgb:[255,255,102]}],autumn:[{index:0,rgb:[255,0,0]},{index:1,rgb:[255,255,0]}],winter:[{index:0,rgb:[0,0,255]},{index:1,rgb:[0,255,128]}],bone:[{index:0,rgb:[0,0,0]},{index:.376,rgb:[84,84,116]},{index:.753,rgb:[169,200,200]},{index:1,rgb:[255,255,255]}],copper:[{index:0,
rgb:[0,0,0]},{index:.804,rgb:[255,160,102]},{index:1,rgb:[255,199,127]}],greys:[{index:0,rgb:[0,0,0]},{index:1,rgb:[255,255,255]}],yignbu:[{index:0,rgb:[8,29,88]},{index:.125,rgb:[37,52,148]},{index:.25,rgb:[34,94,168]},{index:.375,rgb:[29,145,192]},{index:.5,rgb:[65,182,196]},{index:.625,rgb:[127,205,187]},{index:.75,rgb:[199,233,180]},{index:.875,rgb:[237,248,217]},{index:1,rgb:[255,255,217]}],greens:[{index:0,rgb:[0,68,27]},{index:.125,rgb:[0,109,44]},{index:.25,rgb:[35,139,69]},{index:.375,rgb:[65,
171,93]},{index:.5,rgb:[116,196,118]},{index:.625,rgb:[161,217,155]},{index:.75,rgb:[199,233,192]},{index:.875,rgb:[229,245,224]},{index:1,rgb:[247,252,245]}],yiorrd:[{index:0,rgb:[128,0,38]},{index:.125,rgb:[189,0,38]},{index:.25,rgb:[227,26,28]},{index:.375,rgb:[252,78,42]},{index:.5,rgb:[253,141,60]},{index:.625,rgb:[254,178,76]},{index:.75,rgb:[254,217,118]},{index:.875,rgb:[255,237,160]},{index:1,rgb:[255,255,204]}],bluered:[{index:0,rgb:[0,0,255]},{index:1,rgb:[255,0,0]}],rdbu:[{index:0,rgb:[5,
10,172]},{index:.35,rgb:[106,137,247]},{index:.5,rgb:[190,190,190]},{index:.6,rgb:[220,170,132]},{index:.7,rgb:[230,145,90]},{index:1,rgb:[178,10,28]}],picnic:[{index:0,rgb:[0,0,255]},{index:.1,rgb:[51,153,255]},{index:.2,rgb:[102,204,255]},{index:.3,rgb:[153,204,255]},{index:.4,rgb:[204,204,255]},{index:.5,rgb:[255,255,255]},{index:.6,rgb:[255,204,255]},{index:.7,rgb:[255,153,255]},{index:.8,rgb:[255,102,204]},{index:.9,rgb:[255,102,102]},{index:1,rgb:[255,0,0]}],rainbow:[{index:0,rgb:[150,0,90]},
{index:.125,rgb:[0,0,200]},{index:.25,rgb:[0,25,255]},{index:.375,rgb:[0,152,255]},{index:.5,rgb:[44,255,150]},{index:.625,rgb:[151,255,0]},{index:.75,rgb:[255,234,0]},{index:.875,rgb:[255,111,0]},{index:1,rgb:[255,0,0]}],portland:[{index:0,rgb:[12,51,131]},{index:.25,rgb:[10,136,186]},{index:.5,rgb:[242,211,56]},{index:.75,rgb:[242,143,56]},{index:1,rgb:[217,30,30]}],blackbody:[{index:0,rgb:[0,0,0]},{index:.2,rgb:[230,0,0]},{index:.4,rgb:[230,210,0]},{index:.7,rgb:[255,255,255]},{index:1,rgb:[160,
200,255]}],earth:[{index:0,rgb:[0,0,130]},{index:.1,rgb:[0,180,180]},{index:.2,rgb:[40,210,40]},{index:.4,rgb:[230,230,50]},{index:.6,rgb:[120,70,20]},{index:1,rgb:[255,255,255]}],electric:[{index:0,rgb:[0,0,0]},{index:.15,rgb:[30,0,100]},{index:.4,rgb:[120,0,100]},{index:.6,rgb:[160,90,0]},{index:.8,rgb:[230,200,0]},{index:1,rgb:[255,250,220]}],alpha:[{index:0,rgb:[255,255,255,0]},{index:1,rgb:[255,255,255,1]}],viridis:[{index:0,rgb:[68,1,84]},{index:.13,rgb:[71,44,122]},{index:.25,rgb:[59,81,139]},
{index:.38,rgb:[44,113,142]},{index:.5,rgb:[33,144,141]},{index:.63,rgb:[39,173,129]},{index:.75,rgb:[92,200,99]},{index:.88,rgb:[170,220,50]},{index:1,rgb:[253,231,37]}],inferno:[{index:0,rgb:[0,0,4]},{index:.13,rgb:[31,12,72]},{index:.25,rgb:[85,15,109]},{index:.38,rgb:[136,34,106]},{index:.5,rgb:[186,54,85]},{index:.63,rgb:[227,89,51]},{index:.75,rgb:[249,140,10]},{index:.88,rgb:[249,201,50]},{index:1,rgb:[252,255,164]}],magma:[{index:0,rgb:[0,0,4]},{index:.13,rgb:[28,16,68]},{index:.25,rgb:[79,
18,123]},{index:.38,rgb:[129,37,129]},{index:.5,rgb:[181,54,122]},{index:.63,rgb:[229,80,100]},{index:.75,rgb:[251,135,97]},{index:.88,rgb:[254,194,135]},{index:1,rgb:[252,253,191]}],plasma:[{index:0,rgb:[13,8,135]},{index:.13,rgb:[75,3,161]},{index:.25,rgb:[125,3,168]},{index:.38,rgb:[168,34,150]},{index:.5,rgb:[203,70,121]},{index:.63,rgb:[229,107,93]},{index:.75,rgb:[248,148,65]},{index:.88,rgb:[253,195,40]},{index:1,rgb:[240,249,33]}],warm:[{index:0,rgb:[125,0,179]},{index:.13,rgb:[172,0,187]},
{index:.25,rgb:[219,0,170]},{index:.38,rgb:[255,0,130]},{index:.5,rgb:[255,63,74]},{index:.63,rgb:[255,123,0]},{index:.75,rgb:[234,176,0]},{index:.88,rgb:[190,228,0]},{index:1,rgb:[147,255,0]}],cool:[{index:0,rgb:[125,0,179]},{index:.13,rgb:[116,0,218]},{index:.25,rgb:[98,74,237]},{index:.38,rgb:[68,146,231]},{index:.5,rgb:[0,204,197]},{index:.63,rgb:[0,247,146]},{index:.75,rgb:[0,255,88]},{index:.88,rgb:[40,255,8]},{index:1,rgb:[147,255,0]}],"rainbow-soft":[{index:0,rgb:[125,0,179]},{index:.1,rgb:[199,
0,180]},{index:.2,rgb:[255,0,121]},{index:.3,rgb:[255,108,0]},{index:.4,rgb:[222,194,0]},{index:.5,rgb:[150,255,0]},{index:.6,rgb:[0,255,55]},{index:.7,rgb:[0,246,150]},{index:.8,rgb:[50,167,222]},{index:.9,rgb:[103,51,235]},{index:1,rgb:[124,0,186]}],bathymetry:[{index:0,rgb:[40,26,44]},{index:.13,rgb:[59,49,90]},{index:.25,rgb:[64,76,139]},{index:.38,rgb:[63,110,151]},{index:.5,rgb:[72,142,158]},{index:.63,rgb:[85,174,163]},{index:.75,rgb:[120,206,163]},{index:.88,rgb:[187,230,172]},{index:1,rgb:[253,
254,204]}],cdom:[{index:0,rgb:[47,15,62]},{index:.13,rgb:[87,23,86]},{index:.25,rgb:[130,28,99]},{index:.38,rgb:[171,41,96]},{index:.5,rgb:[206,67,86]},{index:.63,rgb:[230,106,84]},{index:.75,rgb:[242,149,103]},{index:.88,rgb:[249,193,135]},{index:1,rgb:[254,237,176]}],chlorophyll:[{index:0,rgb:[18,36,20]},{index:.13,rgb:[25,63,41]},{index:.25,rgb:[24,91,59]},{index:.38,rgb:[13,119,72]},{index:.5,rgb:[18,148,80]},{index:.63,rgb:[80,173,89]},{index:.75,rgb:[132,196,122]},{index:.88,rgb:[175,221,162]},
{index:1,rgb:[215,249,208]}],density:[{index:0,rgb:[54,14,36]},{index:.13,rgb:[89,23,80]},{index:.25,rgb:[110,45,132]},{index:.38,rgb:[120,77,178]},{index:.5,rgb:[120,113,213]},{index:.63,rgb:[115,151,228]},{index:.75,rgb:[134,185,227]},{index:.88,rgb:[177,214,227]},{index:1,rgb:[230,241,241]}],"freesurface-blue":[{index:0,rgb:[30,4,110]},{index:.13,rgb:[47,14,176]},{index:.25,rgb:[41,45,236]},{index:.38,rgb:[25,99,212]},{index:.5,rgb:[68,131,200]},{index:.63,rgb:[114,156,197]},{index:.75,rgb:[157,
181,203]},{index:.88,rgb:[200,208,216]},{index:1,rgb:[241,237,236]}],"freesurface-red":[{index:0,rgb:[60,9,18]},{index:.13,rgb:[100,17,27]},{index:.25,rgb:[142,20,29]},{index:.38,rgb:[177,43,27]},{index:.5,rgb:[192,87,63]},{index:.63,rgb:[205,125,105]},{index:.75,rgb:[216,162,148]},{index:.88,rgb:[227,199,193]},{index:1,rgb:[241,237,236]}],oxygen:[{index:0,rgb:[64,5,5]},{index:.13,rgb:[106,6,15]},{index:.25,rgb:[144,26,7]},{index:.38,rgb:[168,64,3]},{index:.5,rgb:[188,100,4]},{index:.63,rgb:[206,
136,11]},{index:.75,rgb:[220,174,25]},{index:.88,rgb:[231,215,44]},{index:1,rgb:[248,254,105]}],par:[{index:0,rgb:[51,20,24]},{index:.13,rgb:[90,32,35]},{index:.25,rgb:[129,44,34]},{index:.38,rgb:[159,68,25]},{index:.5,rgb:[182,99,19]},{index:.63,rgb:[199,134,22]},{index:.75,rgb:[212,171,35]},{index:.88,rgb:[221,210,54]},{index:1,rgb:[225,253,75]}],phase:[{index:0,rgb:[145,105,18]},{index:.13,rgb:[184,71,38]},{index:.25,rgb:[186,58,115]},{index:.38,rgb:[160,71,185]},{index:.5,rgb:[110,97,218]},{index:.63,
rgb:[50,123,164]},{index:.75,rgb:[31,131,110]},{index:.88,rgb:[77,129,34]},{index:1,rgb:[145,105,18]}],salinity:[{index:0,rgb:[42,24,108]},{index:.13,rgb:[33,50,162]},{index:.25,rgb:[15,90,145]},{index:.38,rgb:[40,118,137]},{index:.5,rgb:[59,146,135]},{index:.63,rgb:[79,175,126]},{index:.75,rgb:[120,203,104]},{index:.88,rgb:[193,221,100]},{index:1,rgb:[253,239,154]}],temperature:[{index:0,rgb:[4,35,51]},{index:.13,rgb:[23,51,122]},{index:.25,rgb:[85,59,157]},{index:.38,rgb:[129,79,143]},{index:.5,
rgb:[175,95,130]},{index:.63,rgb:[222,112,101]},{index:.75,rgb:[249,146,66]},{index:.88,rgb:[249,196,65]},{index:1,rgb:[232,250,91]}],turbidity:[{index:0,rgb:[34,31,27]},{index:.13,rgb:[65,50,41]},{index:.25,rgb:[98,69,52]},{index:.38,rgb:[131,89,57]},{index:.5,rgb:[161,112,59]},{index:.63,rgb:[185,140,66]},{index:.75,rgb:[202,174,88]},{index:.88,rgb:[216,209,126]},{index:1,rgb:[233,246,171]}],"velocity-blue":[{index:0,rgb:[17,32,64]},{index:.13,rgb:[35,52,116]},{index:.25,rgb:[29,81,156]},{index:.38,
rgb:[31,113,162]},{index:.5,rgb:[50,144,169]},{index:.63,rgb:[87,173,176]},{index:.75,rgb:[149,196,189]},{index:.88,rgb:[203,221,211]},{index:1,rgb:[254,251,230]}],"velocity-green":[{index:0,rgb:[23,35,19]},{index:.13,rgb:[24,64,38]},{index:.25,rgb:[11,95,45]},{index:.38,rgb:[39,123,35]},{index:.5,rgb:[95,146,12]},{index:.63,rgb:[152,165,18]},{index:.75,rgb:[201,186,69]},{index:.88,rgb:[233,216,137]},{index:1,rgb:[255,253,205]}],cubehelix:[{index:0,rgb:[0,0,0]},{index:.07,rgb:[22,5,59]},{index:.13,
rgb:[60,4,105]},{index:.2,rgb:[109,1,135]},{index:.27,rgb:[161,0,147]},{index:.33,rgb:[210,2,142]},{index:.4,rgb:[251,11,123]},{index:.47,rgb:[255,29,97]},{index:.53,rgb:[255,54,69]},{index:.6,rgb:[255,85,46]},{index:.67,rgb:[255,120,34]},{index:.73,rgb:[255,157,37]},{index:.8,rgb:[241,191,57]},{index:.87,rgb:[224,220,93]},{index:.93,rgb:[218,241,142]},{index:1,rgb:[227,253,198]}]}},{}],131:[function(a,G,C){function q(k){return[k[0]/255,k[1]/255,k[2]/255,k[3]]}function n(k){for(var e,h="#",l=0;3>
l;++l)e=k[l],e=e.toString(16),h+=("00"+e).substr(e.length);return h}function m(k){return"rgba("+k.join(",")+")"}var f=a("./colorScale"),b=a("lerp");G.exports=function(k){var e,h;k||(k={});var l=(k.nshades||72)-1;var c=k.format||"hex";(e=k.colormap)||(e="jet");if("string"===typeof e){e=e.toLowerCase();if(!f[e])throw Error(e+" not a supported colorscale");var g=f[e]}else if(Array.isArray(e))g=e.slice();else throw Error("unsupported colormap option",e);if(g.length>l+1)throw Error(e+" map requires nshades to be at least size "+
g.length);var d=Array.isArray(k.alpha)?2!==k.alpha.length?[1,1]:k.alpha.slice():"number"===typeof k.alpha?[k.alpha,k.alpha]:[1,1];k=g.map(function(A){return Math.round(A.index*l)});d[0]=Math.min(Math.max(d[0],0),1);d[1]=Math.min(Math.max(d[1],0),1);var p=g.map(function(A,z){A=g[z].index;z=g[z].rgb.slice();if(4===z.length&&0<=z[3]&&1>=z[3])return z;z[3]=d[0]+(d[1]-d[0])*A;return z});var r=[];for(h=0;h<k.length-1;++h){var t=k[h+1]-k[h];e=p[h];var w=p[h+1];for(var x=0;x<t;x++){var y=x/t;r.push([Math.round(b(e[0],
w[0],y)),Math.round(b(e[1],w[1],y)),Math.round(b(e[2],w[2],y)),b(e[3],w[3],y)])}}r.push(g[g.length-1].rgb.concat(d[1]));"hex"===c?r=r.map(n):"rgbaString"===c?r=r.map(m):"float"===c&&(r=r.map(q));return r}},{"./colorScale":130,lerp:446}],132:[function(a,G,C){function q(e,h,l){var c=f(e[0],-h[0]);e=f(e[1],-h[1]);var g=f(l[0],-h[0]);h=f(l[1],-h[1]);c=k(b(c,g),b(e,h));return 0<=c[c.length-1]}G.exports=function(e,h,l,c){var g=n(h,l,c);if(0===g){g=m(n(e,h,l));var d=m(n(e,h,c));return g===d?0===g&&(l=q(e,
h,l),e=q(e,h,c),l!==e)?l?1:-1:0:0===d?0<g?-1:q(e,h,c)?-1:1:0===g?0<d?1:q(e,h,l)?1:-1:m(d-g)}d=n(e,h,l);return 0<d?0<g&&0<n(e,h,c)?1:-1:0>d?0<g||0<n(e,h,c)?1:-1:0<n(e,h,c)?1:q(e,h,l)?1:-1};var n=a("robust-orientation"),m=a("signum"),f=a("two-sum"),b=a("robust-product"),k=a("robust-sum")},{"robust-orientation":520,"robust-product":521,"robust-sum":525,signum:526,"two-sum":555}],133:[function(a,G,C){function q(m,f){return m-f}G.exports=function(m,f){var b=m.length,k=m.length-f.length;if(k)return k;switch(b){case 0:return 0;
case 1:return m[0]-f[0];case 2:return m[0]+m[1]-f[0]-f[1]||n(m[0],m[1])-n(f[0],f[1]);case 3:b=m[0]+m[1];var e=f[0]+f[1];if(k=b+m[2]-(e+f[2]))return k;k=n(m[0],m[1]);var h=n(f[0],f[1]);return n(k,m[2])-n(h,f[2])||n(k+m[2],b)-n(h+f[2],e);case 4:k=m[0];b=m[1];e=m[2];m=m[3];h=f[0];var l=f[1],c=f[2];f=f[3];return k+b+e+m-(h+l+c+f)||n(k,b,e,m)-n(h,l,c,f,h)||n(k+b,k+e,k+m,b+e,b+m,e+m)-n(h+l,h+c,h+f,l+c,l+f,c+f)||n(k+b+e,k+b+m,k+e+m,b+e+m)-n(h+l+c,h+l+f,h+c+f,l+c+f);default:m=m.slice().sort(q);f=f.slice().sort(q);
for(e=0;e<b;++e)if(k=m[e]-f[e])return k;return 0}};var n=Math.min},{}],134:[function(a,G,C){var q=a("compare-cell"),n=a("cell-orientation");G.exports=function(m,f){return q(m,f)||n(m)-n(f)}},{"cell-orientation":117,"compare-cell":133}],135:[function(a,G,C){var q=a("./lib/ch1d"),n=a("./lib/ch2d"),m=a("./lib/chnd");G.exports=function(f){var b=f.length;if(0===b)return[];if(1===b)return[[0]];b=f[0].length;return 0===b?[]:1===b?q(f):2===b?n(f):m(f,b)}},{"./lib/ch1d":136,"./lib/ch2d":137,"./lib/chnd":138}],
136:[function(a,G,C){G.exports=function(q){for(var n=0,m=0,f=1;f<q.length;++f)q[f][0]<q[n][0]&&(n=f),q[f][0]>q[m][0]&&(m=f);return n<m?[[n],[m]]:n>m?[[m],[n]]:[[n]]}},{}],137:[function(a,G,C){G.exports=function(n){n=q(n);var m=n.length;if(2>=m)return[];for(var f=Array(m),b=n[m-1],k=0;k<m;++k){var e=n[k];f[k]=[b,e];b=e}return f};var q=a("monotone-convex-hull-2d")},{"monotone-convex-hull-2d":456}],138:[function(a,G,C){G.exports=function(m,f){try{return q(m,!0)}catch(d){var b=n(m);if(b.length<=f)return[];
f=m.length;for(var k=Array(f),e=0;e<b.length;++e)k[e]=m[b[e]];var h=b.length;for(e=0;e<f;++e)0>b.indexOf(e)&&(k[h++]=m[e]);m=q(k,!0);f=m.length;k=b.length;for(e=0;e<f;++e){h=m[e];for(var l=0;l<h.length;++l){var c=h[l];if(c<k)h[l]=b[c];else{c-=k;for(var g=0;g<k;++g)c>=b[g]&&(c+=1);h[l]=c}}}return m}};var q=a("incremental-convex-hull"),n=a("affine-hull")},{"affine-hull":67,"incremental-convex-hull":433}],139:[function(a,G,C){G.exports={AFG:"afghan",ALA:"\\b\\wland",ALB:"albania",DZA:"algeria",ASM:"^(?\x3d.*americ).*samoa",
AND:"andorra",AGO:"angola",AIA:"anguill?a",ATA:"antarctica",ATG:"antigua",ARG:"argentin",ARM:"armenia",ABW:"^(?!.*bonaire).*\\baruba",AUS:"australia",AUT:"^(?!.*hungary).*austria|\\baustri.*\\bemp",AZE:"azerbaijan",BHS:"bahamas",BHR:"bahrain",BGD:"bangladesh|^(?\x3d.*east).*paki?stan",BRB:"barbados",BLR:"belarus|byelo",BEL:"^(?!.*luxem).*belgium",BLZ:"belize|^(?\x3d.*british).*honduras",BEN:"benin|dahome",BMU:"bermuda",BTN:"bhutan",BOL:"bolivia",BES:"^(?\x3d.*bonaire).*eustatius|^(?\x3d.*carib).*netherlands|\\bbes.?islands",
BIH:"herzegovina|bosnia",BWA:"botswana|bechuana",BVT:"bouvet",BRA:"brazil",IOT:"british.?indian.?ocean",BRN:"brunei",BGR:"bulgaria",BFA:"burkina|\\bfaso|upper.?volta",BDI:"burundi",CPV:"verde",KHM:"cambodia|kampuchea|khmer",CMR:"cameroon",CAN:"canada",CYM:"cayman",CAF:"\\bcentral.african.republic",TCD:"\\bchad",CHL:"\\bchile",CHN:"^(?!.*\\bmac)(?!.*\\bhong)(?!.*\\btai)(?!.*\\brep).*china|^(?\x3d.*peo)(?\x3d.*rep).*china",CXR:"christmas",CCK:"\\bcocos|keeling",COL:"colombia",COM:"comoro",COG:"^(?!.*\\bdem)(?!.*\\bd[\\.]?r)(?!.*kinshasa)(?!.*zaire)(?!.*belg)(?!.*l.opoldville)(?!.*free).*\\bcongo",
COK:"\\bcook",CRI:"costa.?rica",CIV:"ivoire|ivory",HRV:"croatia",CUB:"\\bcuba",CUW:"^(?!.*bonaire).*\\bcura(c|ç)ao",CYP:"cyprus",CSK:"czechoslovakia",CZE:"^(?\x3d.*rep).*czech|czechia|bohemia",COD:"\\bdem.*congo|congo.*\\bdem|congo.*\\bd[\\.]?r|\\bd[\\.]?r.*congo|belgian.?congo|congo.?free.?state|kinshasa|zaire|l.opoldville|drc|droc|rdc",DNK:"denmark",DJI:"djibouti",DMA:"dominica(?!n)",DOM:"dominican.rep",ECU:"ecuador",EGY:"egypt",SLV:"el.?salvador",GNQ:"guine.*eq|eq.*guine|^(?\x3d.*span).*guinea",
ERI:"eritrea",EST:"estonia",ETH:"ethiopia|abyssinia",FLK:"falkland|malvinas",FRO:"faroe|faeroe",FJI:"fiji",FIN:"finland",FRA:"^(?!.*\\bdep)(?!.*martinique).*france|french.?republic|\\bgaul",GUF:"^(?\x3d.*french).*guiana",PYF:"french.?polynesia|tahiti",ATF:"french.?southern",GAB:"gabon",GMB:"gambia",GEO:"^(?!.*south).*georgia",DDR:"german.?democratic.?republic|democratic.?republic.*germany|east.germany",DEU:"^(?!.*east).*germany|^(?\x3d.*\\bfed.*\\brep).*german",GHA:"ghana|gold.?coast",GIB:"gibraltar",
GRC:"greece|hellenic|hellas",GRL:"greenland",GRD:"grenada",GLP:"guadeloupe",GUM:"\\bguam",GTM:"guatemala",GGY:"guernsey",GIN:"^(?!.*eq)(?!.*span)(?!.*bissau)(?!.*portu)(?!.*new).*guinea",GNB:"bissau|^(?\x3d.*portu).*guinea",GUY:"guyana|british.?guiana",HTI:"haiti",HMD:"heard.*mcdonald",VAT:"holy.?see|vatican|papal.?st",HND:"^(?!.*brit).*honduras",HKG:"hong.?kong",HUN:"^(?!.*austr).*hungary",ISL:"iceland",IND:"india(?!.*ocea)",IDN:"indonesia",IRN:"\\biran|persia",IRQ:"\\biraq|mesopotamia",IRL:"(^ireland)|(^republic.*ireland)",
IMN:"^(?\x3d.*isle).*\\bman",ISR:"israel",ITA:"italy",JAM:"jamaica",JPN:"japan",JEY:"jersey",JOR:"jordan",KAZ:"kazak",KEN:"kenya|british.?east.?africa|east.?africa.?prot",KIR:"kiribati",PRK:"^(?\x3d.*democrat|people|north|d.*p.*.r).*\\bkorea|dprk|korea.*(d.*p.*r)",KWT:"kuwait",KGZ:"kyrgyz|kirghiz",LAO:"\\blaos?\\b",LVA:"latvia",LBN:"lebanon",LSO:"lesotho|basuto",LBR:"liberia",LBY:"libya",LIE:"liechtenstein",LTU:"lithuania",LUX:"^(?!.*belg).*luxem",MAC:"maca(o|u)",MDG:"madagascar|malagasy",MWI:"malawi|nyasa",
MYS:"malaysia",MDV:"maldive",MLI:"\\bmali\\b",MLT:"\\bmalta",MHL:"marshall",MTQ:"martinique",MRT:"mauritania",MUS:"mauritius",MYT:"\\bmayotte",MEX:"\\bmexic",FSM:"fed.*micronesia|micronesia.*fed",MCO:"monaco",MNG:"mongolia",MNE:"^(?!.*serbia).*montenegro",MSR:"montserrat",MAR:"morocco|\\bmaroc",MOZ:"mozambique",MMR:"myanmar|burma",NAM:"namibia",NRU:"nauru",NPL:"nepal",NLD:"^(?!.*\\bant)(?!.*\\bcarib).*netherlands",ANT:"^(?\x3d.*\\bant).*(nether|dutch)",NCL:"new.?caledonia",NZL:"new.?zealand",NIC:"nicaragua",
NER:"\\bniger(?!ia)",NGA:"nigeria",NIU:"niue",NFK:"norfolk",MNP:"mariana",NOR:"norway",OMN:"\\boman|trucial",PAK:"^(?!.*east).*paki?stan",PLW:"palau",PSE:"palestin|\\bgaza|west.?bank",PAN:"panama",PNG:"papua|new.?guinea",PRY:"paraguay",PER:"peru",PHL:"philippines",PCN:"pitcairn",POL:"poland",PRT:"portugal",PRI:"puerto.?rico",QAT:"qatar",KOR:"^(?!.*d.*p.*r)(?!.*democrat)(?!.*people)(?!.*north).*\\bkorea(?!.*d.*p.*r)",MDA:"moldov|b(a|e)ssarabia",REU:"r(e|é)union",ROU:"r(o|u|ou)mania",RUS:"\\brussia|soviet.?union|u\\.?s\\.?s\\.?r|socialist.?republics",
RWA:"rwanda",BLM:"barth(e|é)lemy",SHN:"helena",KNA:"kitts|\\bnevis",LCA:"\\blucia",MAF:"^(?\x3d.*collectivity).*martin|^(?\x3d.*france).*martin(?!ique)|^(?\x3d.*french).*martin(?!ique)",SPM:"miquelon",VCT:"vincent",WSM:"^(?!.*amer).*samoa",SMR:"san.?marino",STP:"\\bs(a|ã)o.?tom(e|é)",SAU:"\\bsa\\w*.?arabia",SEN:"senegal",SRB:"^(?!.*monte).*serbia",SYC:"seychell",SLE:"sierra",SGP:"singapore",SXM:"^(?!.*martin)(?!.*saba).*maarten",SVK:"^(?!.*cze).*slovak",SVN:"slovenia",SLB:"solomon",SOM:"somali",ZAF:"south.africa|s\\\\..?africa",
SGS:"south.?georgia|sandwich",SSD:"\\bs\\w*.?sudan",ESP:"spain",LKA:"sri.?lanka|ceylon",SDN:"^(?!.*\\bs(?!u)).*sudan",SUR:"surinam|dutch.?guiana",SJM:"svalbard",SWZ:"swaziland",SWE:"sweden",CHE:"switz|swiss",SYR:"syria",TWN:"taiwan|taipei|formosa|^(?!.*peo)(?\x3d.*rep).*china",TJK:"tajik",THA:"thailand|\\bsiam",MKD:"macedonia|fyrom",TLS:"^(?\x3d.*leste).*timor|^(?\x3d.*east).*timor",TGO:"togo",TKL:"tokelau",TON:"tonga",TTO:"trinidad|tobago",TUN:"tunisia",TUR:"turkey",TKM:"turkmen",TCA:"turks",TUV:"tuvalu",
UGA:"uganda",UKR:"ukrain",ARE:"emirates|^u\\.?a\\.?e\\.?$|united.?arab.?em",GBR:"united.?kingdom|britain|^u\\.?k\\.?$",TZA:"tanzania",USA:"united.?states\\b(?!.*islands)|\\bu\\.?s\\.?a\\.?\\b|^\\s*u\\.?s\\.?\\b(?!.*islands)",UMI:"minor.?outlying.?is",URY:"uruguay",UZB:"uzbek",VUT:"vanuatu|new.?hebrides",VEN:"venezuela",VNM:"^(?!.*republic).*viet.?nam|^(?\x3d.*socialist).*viet.?nam",VGB:"^(?\x3d.*\\bu\\.?\\s?k).*virgin|^(?\x3d.*brit).*virgin|^(?\x3d.*kingdom).*virgin",VIR:"^(?\x3d.*\\bu\\.?\\s?s).*virgin|^(?\x3d.*states).*virgin",
WLF:"futuna|wallis",ESH:"western.sahara",YEM:"^(?!.*arab)(?!.*north)(?!.*sana)(?!.*peo)(?!.*dem)(?!.*south)(?!.*aden)(?!.*\\bp\\.?d\\.?r).*yemen",YMD:"^(?\x3d.*peo).*yemen|^(?!.*rep)(?\x3d.*dem).*yemen|^(?\x3d.*south).*yemen|^(?\x3d.*aden).*yemen|^(?\x3d.*\\bp\\.?d\\.?r).*yemen",YUG:"yugoslavia",ZMB:"zambia|northern.?rhodesia",EAZ:"zanzibar",ZWE:"zimbabwe|^(?!.*northern).*rhodesia"}},{}],140:[function(a,G,C){G.exports="xx-small x-small small medium large x-large xx-large larger smaller".split(" ")},
{}],141:[function(a,G,C){G.exports="normal condensed semi-condensed extra-condensed ultra-condensed expanded semi-expanded extra-expanded ultra-expanded".split(" ")},{}],142:[function(a,G,C){G.exports=["normal","italic","oblique"]},{}],143:[function(a,G,C){G.exports="normal bold bolder lighter 100 200 300 400 500 600 700 800 900".split(" ")},{}],144:[function(a,G,C){G.exports={parse:a("./parse"),stringify:a("./stringify")}},{"./parse":146,"./stringify":147}],145:[function(a,G,C){var q=a("css-font-size-keywords");
G.exports={isSize:function(n){return/^[\d\.]/.test(n)||-1!==n.indexOf("/")||-1!==q.indexOf(n)}}},{"css-font-size-keywords":140}],146:[function(a,G,C){function q(d){if("string"!==typeof d)throw Error("Font argument must be a string.");if(g[d])return g[d];if(""===d)throw Error("Cannot parse an empty string.");if(-1!==b.indexOf(d))return g[d]={system:d};for(var p={style:"normal",variant:"normal",weight:"normal",stretch:"normal",lineHeight:"normal",size:"1rem",family:["serif"]},r=l(d,/\s+/),t;t=r.shift();){if(-1!==
f.indexOf(t))return["style","variant","weight","stretch"].forEach(function(x){p[x]=t}),g[d]=p;if(-1!==e.indexOf(t))p.style=t;else if("normal"===t||"small-caps"===t)p.variant=t;else if(-1!==h.indexOf(t))p.stretch=t;else if(-1!==k.indexOf(t))p.weight=t;else{if(c(t)){var w=l(t,"/");p.size=w[0];null!=w[1]?p.lineHeight=n(w[1]):"/"===r[0]&&(r.shift(),p.lineHeight=n(r.shift()));if(!r.length)throw Error("Missing required font-family.");p.family=l(r.join(" "),/\s*,\s*/).map(m);return g[d]=p}throw Error("Unknown or unsupported font token: "+
t);}}throw Error("Missing required font-size.");}function n(d){var p=parseFloat(d);return p.toString()===d?p:d}var m=a("unquote"),f=a("css-global-keywords"),b=a("css-system-font-keywords"),k=a("css-font-weight-keywords"),e=a("css-font-style-keywords"),h=a("css-font-stretch-keywords"),l=a("string-split-by"),c=a("./lib/util").isSize;G.exports=q;var g=q.cache={}},{"./lib/util":145,"css-font-stretch-keywords":141,"css-font-style-keywords":142,"css-font-weight-keywords":143,"css-global-keywords":148,"css-system-font-keywords":149,
"string-split-by":540,unquote:570}],147:[function(a,G,C){function q(d,p){if(d&&!p[d]&&!b[d])throw Error("Unknown keyword `"+d+"`");return d}function n(d){for(var p={},r=0;r<d.length;r++)p[d[r]]=1;return p}var m=a("pick-by-alias"),f=a("./lib/util").isSize,b=n(a("css-global-keywords")),k=n(a("css-system-font-keywords")),e=n(a("css-font-weight-keywords")),h=n(a("css-font-style-keywords")),l=n(a("css-font-stretch-keywords")),c={normal:1,"small-caps":1},g={serif:1,"sans-serif":1,monospace:1,cursive:1,
fantasy:1,"system-ui":1};G.exports=function(d){d=m(d,{style:"style fontstyle fontStyle font-style slope distinction",variant:"variant font-variant fontVariant fontvariant var capitalization",weight:"weight w font-weight fontWeight fontweight",stretch:"stretch font-stretch fontStretch fontstretch width",size:"size s font-size fontSize fontsize height em emSize",lineHeight:"lh line-height lineHeight lineheight leading",family:"font family fontFamily font-family fontfamily type typeface face",system:"system reserved default global"});
if(d.system)return d.system&&q(d.system,k),d.system;q(d.style,h);q(d.variant,c);q(d.weight,e);q(d.stretch,l);null==d.size&&(d.size="1rem");"number"===typeof d.size&&(d.size+="px");if(!f)throw Error("Bad size value `"+d.size+"`");d.family||(d.family="serif");Array.isArray(d.family)&&(d.family.length||(d.family=["serif"]),d.family=d.family.map(function(r){return g[r]?r:'"'+r+'"'}).join(", "));var p=[];p.push(d.style);d.variant!==d.style&&p.push(d.variant);d.weight!==d.variant&&d.weight!==d.style&&p.push(d.weight);
d.stretch!==d.weight&&d.stretch!==d.variant&&d.stretch!==d.style&&p.push(d.stretch);p.push(d.size+(null==d.lineHeight||"normal"===d.lineHeight||"1"===d.lineHeight+""?"":"/"+d.lineHeight));p.push(d.family);return p.filter(Boolean).join(" ")}},{"./lib/util":145,"css-font-stretch-keywords":141,"css-font-style-keywords":142,"css-font-weight-keywords":143,"css-global-keywords":148,"css-system-font-keywords":149,"pick-by-alias":485}],148:[function(a,G,C){G.exports=["inherit","initial","unset"]},{}],149:[function(a,
G,C){G.exports="caption icon menu message-box small-caption status-bar".split(" ")},{}],150:[function(a,G,C){G.exports=function(q,n,m,f,b,k){var e=b-1,h=b*b,l=e*e,c=(1+2*b)*l;l*=b;b=h*(3-2*b);e*=h;if(q.length){k||(k=Array(q.length));for(h=q.length-1;0<=h;--h)k[h]=c*q[h]+l*n[h]+b*m[h]+e*f[h];return k}return c*q+l*n+b*m+e*f};G.exports.derivative=function(q,n,m,f,b,k){var e=6*b*b-6*b,h=3*b*b-4*b+1,l=-6*b*b+6*b;b=3*b*b-2*b;if(q.length){k||(k=Array(q.length));for(var c=q.length-1;0<=c;--c)k[c]=e*q[c]+
h*n[c]+l*m[c]+b*f[c];return k}return e*q+h*n+l*m[c]+b*f}},{}],151:[function(a,G,C){function q(){this.argTypes=[];this.shimArgs=[];this.arrayArgs=[];this.arrayBlockIndices=[];this.scalarArgs=[];this.offsetArgs=[];this.offsetArgIndex=[];this.indexArgs=[];this.shapeArgs=[];this.funcName="";this.post=this.body=this.pre=null;this.debug=!1}var n=a("./lib/thunk.js");G.exports=function(m){var f=new q;f.pre=m.pre;f.body=m.body;f.post=m.post;var b=m.args.slice(0);f.argTypes=b;for(var k=0;k<b.length;++k){var e=
b[k];if("array"===e||"object"===typeof e&&e.blockIndices){f.argTypes[k]="array";f.arrayArgs.push(k);f.arrayBlockIndices.push(e.blockIndices?e.blockIndices:0);f.shimArgs.push("array"+k);if(k<f.pre.args.length&&0<f.pre.args[k].count)throw Error("cwise: pre() block may not reference array args");if(k<f.post.args.length&&0<f.post.args[k].count)throw Error("cwise: post() block may not reference array args");}else if("scalar"===e)f.scalarArgs.push(k),f.shimArgs.push("scalar"+k);else if("index"===e){f.indexArgs.push(k);
if(k<f.pre.args.length&&0<f.pre.args[k].count)throw Error("cwise: pre() block may not reference array index");if(k<f.body.args.length&&f.body.args[k].lvalue)throw Error("cwise: body() block may not write to array index");if(k<f.post.args.length&&0<f.post.args[k].count)throw Error("cwise: post() block may not reference array index");}else if("shape"===e){f.shapeArgs.push(k);if(k<f.pre.args.length&&f.pre.args[k].lvalue)throw Error("cwise: pre() block may not write to array shape");if(k<f.body.args.length&&
f.body.args[k].lvalue)throw Error("cwise: body() block may not write to array shape");if(k<f.post.args.length&&f.post.args[k].lvalue)throw Error("cwise: post() block may not write to array shape");}else if("object"===typeof e&&e.offset)f.argTypes[k]="offset",f.offsetArgs.push({array:e.array,offset:e.offset}),f.offsetArgIndex.push(k);else throw Error("cwise: Unknown argument type "+b[k]);}if(0>=f.arrayArgs.length)throw Error("cwise: No array arguments specified");if(f.pre.args.length>b.length)throw Error("cwise: Too many arguments in pre() block");
if(f.body.args.length>b.length)throw Error("cwise: Too many arguments in body() block");if(f.post.args.length>b.length)throw Error("cwise: Too many arguments in post() block");f.debug=!!m.printCode||!!m.debug;f.funcName=m.funcName||"cwise";f.blockSize=m.blockSize||64;return n(f)}},{"./lib/thunk.js":153}],152:[function(a,G,C){function q(k,e,h){var l=k.length,c=e.arrayArgs.length;e=0<e.indexArgs.length;var g=[],d=[],p=0,r,t;for(r=0;r<l;++r)d.push(["i",r,"\x3d0"].join(""));for(t=0;t<c;++t)for(r=0;r<
l;++r){var w=p;p=k[r];0===r?d.push(["d",t,"s",r,"\x3dt",t,"p",p].join("")):d.push(["d",t,"s",r,"\x3d(t",t,"p",p,"-s",w,"*t",t,"p",w,")"].join(""))}0<d.length&&g.push("var "+d.join(","));for(r=l-1;0<=r;--r)p=k[r],g.push(["for(i",r,"\x3d0;i",r,"\x3cs",p,";++i",r,"){"].join(""));g.push(h);for(r=0;r<l;++r){w=p;p=k[r];for(t=0;t<c;++t)g.push(["p",t,"+\x3dd",t,"s",r].join(""));e&&(0<r&&g.push(["index[",w,"]-\x3ds",w].join("")),g.push(["++index[",p,"]"].join("")));g.push("}")}return g.join("\n")}function n(k,
e,h,l){for(var c=e.length,g=h.arrayArgs.length,d=h.blockSize,p=0<h.indexArgs.length,r=[],t=0;t<g;++t)r.push(["var offset",t,"\x3dp",t].join(""));for(t=k;t<c;++t)r.push(["for(var j"+t+"\x3dSS[",e[t],"]|0;j",t,"\x3e0;){"].join("")),r.push(["if(j",t,"\x3c",d,"){"].join("")),r.push(["s",e[t],"\x3dj",t].join("")),r.push(["j",t,"\x3d0"].join("")),r.push(["}else{s",e[t],"\x3d",d].join("")),r.push(["j",t,"-\x3d",d,"}"].join("")),p&&r.push(["index[",e[t],"]\x3dj",t].join(""));for(t=0;t<g;++t){d=["offset"+
t];for(p=k;p<c;++p)d.push(["j",p,"*t",t,"p",e[p]].join(""));r.push(["p",t,"\x3d(",d.join("+"),")"].join(""))}r.push(q(e,h,l));for(t=k;t<c;++t)r.push("}");return r.join("\n")}function m(k,e,h){for(var l=k.body,c=[],g=[],d=0;d<k.args.length;++d){var p=k.args[d];if(!(0>=p.count)){var r=new RegExp(p.name,"g"),t="",w=e.arrayArgs.indexOf(d);switch(e.argTypes[d]){case "offset":var x=e.offsetArgIndex.indexOf(d);w=e.offsetArgs[x].array;t="+q"+x;case "array":t="p"+w+t;var y="l"+d;x="a"+w;if(0===e.arrayBlockIndices[w])1===
p.count?"generic"===h[w]?p.lvalue?(c.push(["var ",y,"\x3d",x,".get(",t,")"].join("")),l=l.replace(r,y),g.push([x,".set(",t,",",y,")"].join(""))):l=l.replace(r,[x,".get(",t,")"].join("")):l=l.replace(r,[x,"[",t,"]"].join("")):"generic"===h[w]?(c.push(["var ",y,"\x3d",x,".get(",t,")"].join("")),l=l.replace(r,y),p.lvalue&&g.push([x,".set(",t,",",y,")"].join(""))):(c.push(["var ",y,"\x3d",x,"[",t,"]"].join("")),l=l.replace(r,y),p.lvalue&&g.push([x,"[",t,"]\x3d",y].join("")));else{r=[p.name];p=[t];for(t=
0;t<Math.abs(e.arrayBlockIndices[w]);t++)r.push("\\s*\\[([^\\]]+)\\]"),p.push("$"+(t+1)+"*t"+w+"b"+t);r=new RegExp(r.join(""),"g");t=p.join("+");if("generic"===h[w])throw Error("cwise: Generic arrays not supported in combination with blocks!");l=l.replace(r,[x,"[",t,"]"].join(""))}break;case "scalar":l=l.replace(r,"Y"+e.scalarArgs.indexOf(d));break;case "index":l=l.replace(r,"index");break;case "shape":l=l.replace(r,"shape")}}}return[c.join("\n"),l,g.join("\n")].join("\n").trim()}function f(k){for(var e=
Array(k.length),h=!0,l=0;l<k.length;++l){var c=k[l],g=c.match(/\d+/);g=g?g[0]:"";0===c.charAt(0)?e[l]="u"+c.charAt(1)+g:e[l]=c.charAt(0)+g;0<l&&(h=h&&e[l]===e[l-1])}return h?e[0]:e.join("")}var b=a("uniq");G.exports=function(k,e){for(var h=e[1].length-Math.abs(k.arrayBlockIndices[0])|0,l=Array(k.arrayArgs.length),c=Array(k.arrayArgs.length),g=0;g<k.arrayArgs.length;++g)c[g]=e[2*g],l[g]=e[2*g+1];var d=[],p=[],r=[],t=[],w=[];for(g=0;g<k.arrayArgs.length;++g){0>k.arrayBlockIndices[g]?(r.push(0),t.push(h),
d.push(h),p.push(h+k.arrayBlockIndices[g])):(r.push(k.arrayBlockIndices[g]),t.push(k.arrayBlockIndices[g]+h),d.push(0),p.push(k.arrayBlockIndices[g]));for(var x=[],y=0;y<l[g].length;y++)r[g]<=l[g][y]&&l[g][y]<t[g]&&x.push(l[g][y]-r[g]);w.push(x)}p=["SS"];t=["'use strict'"];x=[];for(y=0;y<h;++y)x.push(["s",y,"\x3dSS[",y,"]"].join(""));for(g=0;g<k.arrayArgs.length;++g){p.push("a"+g);p.push("t"+g);p.push("p"+g);for(y=0;y<h;++y)x.push(["t",g,"p",y,"\x3dt",g,"[",r[g]+y,"]"].join(""));for(y=0;y<Math.abs(k.arrayBlockIndices[g]);++y)x.push(["t",
g,"b",y,"\x3dt",g,"[",d[g]+y,"]"].join(""))}for(g=0;g<k.scalarArgs.length;++g)p.push("Y"+g);0<k.shapeArgs.length&&x.push("shape\x3dSS.slice(0)");if(0<k.indexArgs.length){y=Array(h);for(g=0;g<h;++g)y[g]="0";x.push(["index\x3d[",y.join(","),"]"].join(""))}for(g=0;g<k.offsetArgs.length;++g){d=k.offsetArgs[g];r=[];for(y=0;y<d.offset.length;++y)0!==d.offset[y]&&(1===d.offset[y]?r.push(["t",d.array,"p",y].join("")):r.push([d.offset[y],"*t",d.array,"p",y].join("")));0===r.length?x.push("q"+g+"\x3d0"):x.push(["q",
g,"\x3d",r.join("+")].join(""))}g=b([].concat(k.pre.thisVars).concat(k.body.thisVars).concat(k.post.thisVars));x=x.concat(g);0<x.length&&t.push("var "+x.join(","));for(g=0;g<k.arrayArgs.length;++g)t.push("p"+g+"|\x3d0");3<k.pre.body.length&&t.push(m(k.pre,k,c));g=m(k.body,k,c);a:for(y=0,x=w[0].length;y<x;){for(d=1;d<w.length;++d)if(w[d][y]!==w[0][y])break a;++y}y<h?t.push(n(y,w[0],k,g)):t.push(q(w[0],k,g));3<k.post.body.length&&t.push(m(k.post,k,c));k.debug&&console.log("-----Generated cwise routine for ",
e,":\n"+t.join("\n")+"\n----------");k=[k.funcName||"unnamed","_cwise_loop_",l[0].join("s"),"m",y,f(c)].join("");return(new Function(["function ",k,"(",p.join(","),"){",t.join("\n"),"} return ",k].join("")))()}},{uniq:569}],153:[function(a,G,C){var q=a("./compile.js");G.exports=function(n){var m=["'use strict'","var CACHED\x3d{}"],f=[];m.push(["return function ",n.funcName+"_cwise_thunk","(",n.shimArgs.join(","),"){"].join(""));for(var b=[],k=[],e=[["array",n.arrayArgs[0],".shape.slice(",Math.max(0,
n.arrayBlockIndices[0]),0>n.arrayBlockIndices[0]?","+n.arrayBlockIndices[0]+")":")"].join("")],h=[],l=[],c=0;c<n.arrayArgs.length;++c){var g=n.arrayArgs[c];f.push(["t",g,"\x3darray",g,".dtype,r",g,"\x3darray",g,".order"].join(""));b.push("t"+g);b.push("r"+g);k.push("t"+g);k.push("r"+g+".join()");e.push("array"+g+".data");e.push("array"+g+".stride");e.push("array"+g+".offset|0");0<c&&(h.push("array"+n.arrayArgs[0]+".shape.length\x3d\x3d\x3darray"+g+".shape.length+"+(Math.abs(n.arrayBlockIndices[0])-
Math.abs(n.arrayBlockIndices[c]))),l.push("array"+n.arrayArgs[0]+".shape[shapeIndex+"+Math.max(0,n.arrayBlockIndices[0])+"]\x3d\x3d\x3darray"+g+".shape[shapeIndex+"+Math.max(0,n.arrayBlockIndices[c])+"]"))}1<n.arrayArgs.length&&(m.push("if (!("+h.join(" \x26\x26 ")+")) throw new Error('cwise: Arrays do not all have the same dimensionality!')"),m.push("for(var shapeIndex\x3darray"+n.arrayArgs[0]+".shape.length-"+Math.abs(n.arrayBlockIndices[0])+"; shapeIndex--\x3e0;) {"),m.push("if (!("+l.join(" \x26\x26 ")+
")) throw new Error('cwise: Arrays do not all have the same shape!')"),m.push("}"));for(c=0;c<n.scalarArgs.length;++c)e.push("scalar"+n.scalarArgs[c]);f.push(["type\x3d[",k.join(","),"].join()"].join(""));f.push("proc\x3dCACHED[type]");m.push("var "+f.join(","));m.push(["if(!proc){CACHED[type]\x3dproc\x3dcompile([",b.join(","),"])}return proc(",e.join(","),")}"].join(""));n.debug&&console.log("-----Generated thunk:\n"+m.join("\n")+"\n----------");return(new Function("compile",m.join("\n")))(q.bind(void 0,
n))}},{"./compile.js":152}],154:[function(a,G,C){var q=a("type/value/is"),n=a("type/value/ensure"),m=a("type/plain-function/ensure"),f=a("es5-ext/object/copy"),b=a("es5-ext/object/normalize-options"),k=a("es5-ext/object/map"),e=Function.prototype.bind,h=Object.defineProperty,l=Object.prototype.hasOwnProperty;var c=function(g,d,p){var r=n(d)&&m(d.value);var t=f(d);delete t.writable;delete t.value;t.get=function(){if(!p.overwriteDefinition&&l.call(this,g))return r;d.value=e.call(r,p.resolveContext?
p.resolveContext(this):this);h(this,g,d);return this[g]};return t};G.exports=function(g,d){var p=b(d);q(p.resolveContext)&&m(p.resolveContext);return k(g,function(r,t){return c(t,r,p)})}},{"es5-ext/object/copy":196,"es5-ext/object/map":204,"es5-ext/object/normalize-options":205,"type/plain-function/ensure":561,"type/value/ensure":565,"type/value/is":566}],155:[function(a,G,C){var q=a("type/value/is"),n=a("type/plain-function/is"),m=a("es5-ext/object/assign"),f=a("es5-ext/object/normalize-options"),
b=a("es5-ext/string/#/contains");(G.exports=function(k,e){if(2>arguments.length||"string"!==typeof k){var h=e;e=k;k=null}else h=arguments[2];if(q(k)){var l=b.call(k,"c");var c=b.call(k,"e");var g=b.call(k,"w")}else l=g=!0,c=!1;l={value:e,configurable:l,enumerable:c,writable:g};return h?m(f(h),l):l}).gs=function(k,e,h,l){"string"!==typeof k&&(l=h,h=e,e=k,k=null);q(e)?n(e)?q(h)?n(h)||(l=h,h=void 0):h=void 0:(l=e,e=h=void 0):e=void 0;if(q(k)){var c=b.call(k,"c");k=b.call(k,"e")}else c=!0,k=!1;e={get:e,
set:h,configurable:c,enumerable:k};return l?m(f(l),e):e}},{"es5-ext/object/assign":193,"es5-ext/object/normalize-options":205,"es5-ext/string/#/contains":212,"type/plain-function/is":562,"type/value/is":566}],156:[function(a,G,C){(function(q,n){"object"===typeof C&&"undefined"!==typeof G?n(C):n(q.d3=q.d3||{})})(this,function(q){function n(M,E){return M<E?-1:M>E?1:M>=E?0:NaN}function m(M){1===M.length&&(M=f(M));return{left:function(E,L,Q,S){null==Q&&(Q=0);null==S&&(S=E.length);for(;Q<S;){var R=Q+S>>>
1;0>M(E[R],L)?Q=R+1:S=R}return Q},right:function(E,L,Q,S){null==Q&&(Q=0);null==S&&(S=E.length);for(;Q<S;){var R=Q+S>>>1;0<M(E[R],L)?S=R:Q=R+1}return Q}}}function f(M){return function(E,L){return n(M(E),L)}}function b(M,E){return[M,E]}function k(M){return null===M?NaN:+M}function e(M,E){var L=M.length,Q=0,S=-1,R=0,O,T=0;if(null==E)for(;++S<L;){if(!isNaN(O=k(M[S]))){var V=O-R;R+=V/++Q;T+=V*(O-R)}}else for(;++S<L;)isNaN(O=k(E(M[S],S,M)))||(V=O-R,R+=V/++Q,T+=V*(O-R));if(1<Q)return T/(Q-1)}function h(M,
E){return(M=e(M,E))?Math.sqrt(M):M}function l(M,E){var L=M.length,Q=-1,S,R,O;if(null==E)for(;++Q<L;){if(null!=(S=M[Q])&&S>=S)for(R=O=S;++Q<L;)null!=(S=M[Q])&&(R>S&&(R=S),O<S&&(O=S))}else for(;++Q<L;)if(null!=(S=E(M[Q],Q,M))&&S>=S)for(R=O=S;++Q<L;)null!=(S=E(M[Q],Q,M))&&(R>S&&(R=S),O<S&&(O=S));return[R,O]}function c(M){return function(){return M}}function g(M){return M}function d(M,E,L){M=+M;E=+E;L=2>(S=arguments.length)?(E=M,M=0,1):3>S?1:+L;for(var Q=-1,S=Math.max(0,Math.ceil((E-M)/L))|0,R=Array(S);++Q<
S;)R[Q]=M+Q*L;return R}function p(M,E,L){E=(E-M)/Math.max(0,L);M=Math.floor(Math.log(E)/Math.LN10);E/=Math.pow(10,M);return 0<=M?(E>=I?10:E>=J?5:E>=N?2:1)*Math.pow(10,M):-Math.pow(10,-M)/(E>=I?10:E>=J?5:E>=N?2:1)}function r(M,E,L){var Q=Math.abs(E-M)/Math.max(0,L);L=Math.pow(10,Math.floor(Math.log(Q)/Math.LN10));Q/=L;Q>=I?L*=10:Q>=J?L*=5:Q>=N&&(L*=2);return E<M?-L:L}function t(M){return Math.ceil(Math.log(M.length)/Math.LN2)+1}function w(M,E,L){null==L&&(L=k);if(Q=M.length){if(0>=(E=+E)||2>Q)return+L(M[0],
0,M);if(1<=E)return+L(M[Q-1],Q-1,M);var Q;E*=Q-1;Q=Math.floor(E);var S=+L(M[Q],Q,M);M=+L(M[Q+1],Q+1,M);return S+(M-S)*(E-Q)}}function x(M,E){var L=M.length,Q=-1,S,R;if(null==E)for(;++Q<L;){if(null!=(S=M[Q])&&S>=S)for(R=S;++Q<L;)null!=(S=M[Q])&&R>S&&(R=S)}else for(;++Q<L;)if(null!=(S=E(M[Q],Q,M))&&S>=S)for(R=S;++Q<L;)null!=(S=E(M[Q],Q,M))&&R>S&&(R=S);return R}function y(M){if(!(R=M.length))return[];for(var E=-1,L=x(M,A),Q=Array(L);++E<L;)for(var S=-1,R,O=Q[E]=Array(R);++S<R;)O[S]=M[S][E];return Q}
function A(M){return M.length}var z=m(n),F=z.right;z=z.left;var D=Array.prototype,u=D.slice,B=D.map,I=Math.sqrt(50),J=Math.sqrt(10),N=Math.sqrt(2);q.bisect=F;q.bisectRight=F;q.bisectLeft=z;q.ascending=n;q.bisector=m;q.cross=function(M,E,L){var Q=M.length,S=E.length,R=Array(Q*S),O,T,V;null==L&&(L=b);for(O=V=0;O<Q;++O){var X=M[O];for(T=0;T<S;++T,++V)R[V]=L(X,E[T])}return R};q.descending=function(M,E){return E<M?-1:E>M?1:E>=M?0:NaN};q.deviation=h;q.extent=l;q.histogram=function(){function M(S){var R,
O=S.length,T=Array(O);for(R=0;R<O;++R)T[R]=E(S[R],R,S);R=L(T);var V=R[0],X=R[1],ba=Q(T,V,X);Array.isArray(ba)||(ba=r(V,X,ba),ba=d(Math.ceil(V/ba)*ba,X,ba));for(var aa=ba.length;ba[0]<=V;)ba.shift(),--aa;for(;ba[aa-1]>X;)ba.pop(),--aa;var ka=Array(aa+1);for(R=0;R<=aa;++R){var ha=ka[R]=[];ha.x0=0<R?ba[R-1]:V;ha.x1=R<aa?ba[R]:X}for(R=0;R<O;++R)ha=T[R],V<=ha&&ha<=X&&ka[F(ba,ha,0,aa)].push(S[R]);return ka}var E=g,L=l,Q=t;M.value=function(S){return arguments.length?(E="function"===typeof S?S:c(S),M):E};
M.domain=function(S){return arguments.length?(L="function"===typeof S?S:c([S[0],S[1]]),M):L};M.thresholds=function(S){return arguments.length?(Q="function"===typeof S?S:Array.isArray(S)?c(u.call(S)):c(S),M):Q};return M};q.thresholdFreedmanDiaconis=function(M,E,L){M=B.call(M,k).sort(n);return Math.ceil((L-E)/(2*(w(M,.75)-w(M,.25))*Math.pow(M.length,-1/3)))};q.thresholdScott=function(M,E,L){return Math.ceil((L-E)/(3.5*h(M)*Math.pow(M.length,-1/3)))};q.thresholdSturges=t;q.max=function(M,E){var L=M.length,
Q=-1,S,R;if(null==E)for(;++Q<L;){if(null!=(S=M[Q])&&S>=S)for(R=S;++Q<L;)null!=(S=M[Q])&&S>R&&(R=S)}else for(;++Q<L;)if(null!=(S=E(M[Q],Q,M))&&S>=S)for(R=S;++Q<L;)null!=(S=E(M[Q],Q,M))&&S>R&&(R=S);return R};q.mean=function(M,E){var L=M.length,Q=L,S=-1,R,O=0;if(null==E)for(;++S<L;)isNaN(R=k(M[S]))?--Q:O+=R;else for(;++S<L;)isNaN(R=k(E(M[S],S,M)))?--Q:O+=R;if(Q)return O/Q};q.median=function(M,E){var L=M.length,Q=-1,S,R=[];if(null==E)for(;++Q<L;)isNaN(S=k(M[Q]))||R.push(S);else for(;++Q<L;)isNaN(S=k(E(M[Q],
Q,M)))||R.push(S);return w(R.sort(n),.5)};q.merge=function(M){var E=M.length;var L=-1;for(var Q=0,S,R;++L<E;)Q+=M[L].length;for(S=Array(Q);0<=--E;)for(R=M[E],L=R.length;0<=--L;)S[--Q]=R[L];return S};q.min=x;q.pairs=function(M,E){null==E&&(E=b);for(var L=0,Q=M.length-1,S=M[0],R=Array(0>Q?0:Q);L<Q;)R[L]=E(S,S=M[++L]);return R};q.permute=function(M,E){for(var L=E.length,Q=Array(L);L--;)Q[L]=M[E[L]];return Q};q.quantile=w;q.range=d;q.scan=function(M,E){if(L=M.length){var L,Q=0,S=0,R,O=M[S];for(null==
E&&(E=n);++Q<L;)if(0>E(R=M[Q],O)||0!==E(O,O))O=R,S=Q;if(0===E(O,O))return S}};q.shuffle=function(M,E,L){L=(null==L?M.length:L)-(E=null==E?0:+E);for(var Q,S;L;)S=Math.random()*L--|0,Q=M[L+E],M[L+E]=M[S+E],M[S+E]=Q;return M};q.sum=function(M,E){var L=M.length,Q=-1,S,R=0;if(null==E)for(;++Q<L;){if(S=+M[Q])R+=S}else for(;++Q<L;)if(S=+E(M[Q],Q,M))R+=S;return R};q.ticks=function(M,E,L){var Q,S=-1,R;E=+E;M=+M;L=+L;if(M===E&&0<L)return[M];if(Q=E<M){var O=M;M=E;E=O}if(0===(R=p(M,E,L))||!isFinite(R))return[];
if(0<R)for(M=Math.ceil(M/R),E=Math.floor(E/R),E=Array(O=Math.ceil(E-M+1));++S<O;)E[S]=(M+S)*R;else for(M=Math.floor(M*R),E=Math.ceil(E*R),E=Array(O=Math.ceil(M-E+1));++S<O;)E[S]=(M-S)/R;Q&&E.reverse();return E};q.tickIncrement=p;q.tickStep=r;q.transpose=y;q.variance=e;q.zip=function(){return y(arguments)};Object.defineProperty(q,"__esModule",{value:!0})})},{}],157:[function(a,G,C){(function(q,n){"object"===typeof C&&"undefined"!==typeof G?n(C):n(q.d3=q.d3||{})})(this,function(q){function n(){}function m(g,
d){var p=new n;if(g instanceof n)g.each(function(x,y){p.set(y,x)});else if(Array.isArray(g)){var r=-1,t=g.length,w;if(null==d)for(;++r<t;)p.set(r,g[r]);else for(;++r<t;)p.set(d(w=g[r],r,g),w)}else if(g)for(r in g)p.set(r,g[r]);return p}function f(){return{}}function b(g,d,p){g[d]=p}function k(){return m()}function e(g,d,p){g.set(d,p)}function h(){}function l(g,d){var p=new h;if(g instanceof h)g.each(function(w){p.add(w)});else if(g){var r=-1,t=g.length;if(null==d)for(;++r<t;)p.add(g[r]);else for(;++r<
t;)p.add(d(g[r],r,g))}return p}n.prototype=m.prototype={constructor:n,has:function(g){return"$"+g in this},get:function(g){return this["$"+g]},set:function(g,d){this["$"+g]=d;return this},remove:function(g){g="$"+g;return g in this&&delete this[g]},clear:function(){for(var g in this)"$"===g[0]&&delete this[g]},keys:function(){var g=[],d;for(d in this)"$"===d[0]&&g.push(d.slice(1));return g},values:function(){var g=[],d;for(d in this)"$"===d[0]&&g.push(this[d]);return g},entries:function(){var g=[],
d;for(d in this)"$"===d[0]&&g.push({key:d.slice(1),value:this[d]});return g},size:function(){var g=0,d;for(d in this)"$"===d[0]&&++g;return g},empty:function(){for(var g in this)if("$"===g[0])return!1;return!0},each:function(g){for(var d in this)"$"===d[0]&&g(this[d],d.slice(1),this)}};var c=m.prototype;h.prototype=l.prototype={constructor:h,has:c.has,add:function(g){g+="";this["$"+g]=g;return this},remove:c.remove,clear:c.clear,values:c.keys,size:c.size,empty:c.empty,each:c.each};q.nest=function(){function g(y,
A,z,F){if(A>=p.length)return null!=t&&y.sort(t),null!=w?w(y):y;for(var D=-1,u=y.length,B=p[A++],I,J,N=m(),M,E=z();++D<u;)(M=N.get(I=B(J=y[D])+""))?M.push(J):N.set(I,[J]);N.each(function(L,Q){F(E,Q,g(L,A,z,F))});return E}function d(y,A){if(++A>p.length)return y;var z=r[A-1];if(null!=w&&A>=p.length)var F=y.entries();else F=[],y.each(function(D,u){F.push({key:u,values:d(D,A)})});return null!=z?F.sort(function(D,u){return z(D.key,u.key)}):F}var p=[],r=[],t,w,x;return x={object:function(y){return g(y,
0,f,b)},map:function(y){return g(y,0,k,e)},entries:function(y){return d(g(y,0,k,e),0)},key:function(y){p.push(y);return x},sortKeys:function(y){r[p.length-1]=y;return x},sortValues:function(y){t=y;return x},rollup:function(y){w=y;return x}}};q.set=l;q.map=m;q.keys=function(g){var d=[],p;for(p in g)d.push(p);return d};q.values=function(g){var d=[],p;for(p in g)d.push(g[p]);return d};q.entries=function(g){var d=[],p;for(p in g)d.push({key:p,value:g[p]});return d};Object.defineProperty(q,"__esModule",
{value:!0})})},{}],158:[function(a,G,C){(function(q,n){"object"===typeof C&&"undefined"!==typeof G?n(C):(q=q||self,n(q.d3=q.d3||{}))})(this,function(q){function n(ua,ya,ja){ua.prototype=ya.prototype=ja;ja.constructor=ua}function m(ua,ya){ua=Object.create(ua.prototype);for(var ja in ya)ua[ja]=ya[ja];return ua}function f(){}function b(){return this.rgb().formatHex()}function k(){return this.rgb().formatRgb()}function e(ua){var ya,ja;ua=(ua+"").trim().toLowerCase();return(ya=T.exec(ua))?(ja=ya[1].length,
ya=parseInt(ya[1],16),6===ja?h(ya):3===ja?new d(ya>>8&15|ya>>4&240,ya>>4&15|ya&240,(ya&15)<<4|ya&15,1):8===ja?l(ya>>24&255,ya>>16&255,ya>>8&255,(ya&255)/255):4===ja?l(ya>>12&15|ya>>8&240,ya>>8&15|ya>>4&240,ya>>4&15|ya&240,((ya&15)<<4|ya&15)/255):null):(ya=V.exec(ua))?new d(ya[1],ya[2],ya[3],1):(ya=X.exec(ua))?new d(255*ya[1]/100,255*ya[2]/100,255*ya[3]/100,1):(ya=ba.exec(ua))?l(ya[1],ya[2],ya[3],ya[4]):(ya=aa.exec(ua))?l(255*ya[1]/100,255*ya[2]/100,255*ya[3]/100,ya[4]):(ya=ka.exec(ua))?w(ya[1],ya[2]/
100,ya[3]/100,1):(ya=ha.exec(ua))?w(ya[1],ya[2]/100,ya[3]/100,ya[4]):ca.hasOwnProperty(ua)?h(ca[ua]):"transparent"===ua?new d(NaN,NaN,NaN,0):null}function h(ua){return new d(ua>>16&255,ua>>8&255,ua&255,1)}function l(ua,ya,ja,za){0>=za&&(ua=ya=ja=NaN);return new d(ua,ya,ja,za)}function c(ua){ua instanceof f||(ua=e(ua));if(!ua)return new d;ua=ua.rgb();return new d(ua.r,ua.g,ua.b,ua.opacity)}function g(ua,ya,ja,za){return 1===arguments.length?c(ua):new d(ua,ya,ja,null==za?1:za)}function d(ua,ya,ja,za){this.r=
+ua;this.g=+ya;this.b=+ja;this.opacity=+za}function p(){return"#"+t(this.r)+t(this.g)+t(this.b)}function r(){var ua=this.opacity;ua=isNaN(ua)?1:Math.max(0,Math.min(1,ua));return(1===ua?"rgb(":"rgba(")+Math.max(0,Math.min(255,Math.round(this.r)||0))+", "+Math.max(0,Math.min(255,Math.round(this.g)||0))+", "+Math.max(0,Math.min(255,Math.round(this.b)||0))+(1===ua?")":", "+ua+")")}function t(ua){ua=Math.max(0,Math.min(255,Math.round(ua)||0));return(16>ua?"0":"")+ua.toString(16)}function w(ua,ya,ja,za){0>=
za?ua=ya=ja=NaN:0>=ja||1<=ja?ua=ya=NaN:0>=ya&&(ua=NaN);return new A(ua,ya,ja,za)}function x(ua){if(ua instanceof A)return new A(ua.h,ua.s,ua.l,ua.opacity);ua instanceof f||(ua=e(ua));if(!ua)return new A;if(ua instanceof A)return ua;ua=ua.rgb();var ya=ua.r/255,ja=ua.g/255,za=ua.b/255,Ba=Math.min(ya,ja,za),Ma=Math.max(ya,ja,za),Oa=NaN,Ia=Ma-Ba,Pa=(Ma+Ba)/2;Ia?(Oa=ya===Ma?(ja-za)/Ia+6*(ja<za):ja===Ma?(za-ya)/Ia+2:(ya-ja)/Ia+4,Ia/=.5>Pa?Ma+Ba:2-Ma-Ba,Oa*=60):Ia=0<Pa&&1>Pa?0:Oa;return new A(Oa,Ia,Pa,ua.opacity)}
function y(ua,ya,ja,za){return 1===arguments.length?x(ua):new A(ua,ya,ja,null==za?1:za)}function A(ua,ya,ja,za){this.h=+ua;this.s=+ya;this.l=+ja;this.opacity=+za}function z(ua,ya,ja){return 255*(60>ua?ya+(ja-ya)*ua/60:180>ua?ja:240>ua?ya+(ja-ya)*(240-ua)/60:ya)}function F(ua){if(ua instanceof u)return new u(ua.l,ua.a,ua.b,ua.opacity);if(ua instanceof L)return Q(ua);ua instanceof d||(ua=c(ua));var ya=N(ua.r),ja=N(ua.g),za=N(ua.b),Ba=B(.2225045*ya+.7168786*ja+.0606169*za);if(ya===ja&&ja===za)var Ma=
ya=Ba;else Ma=B((.4360747*ya+.3850649*ja+.1430804*za)/.96422),ya=B((.0139322*ya+.0971045*ja+.7141733*za)/.82521);return new u(116*Ba-16,500*(Ma-Ba),200*(Ba-ya),ua.opacity)}function D(ua,ya,ja,za){return 1===arguments.length?F(ua):new u(ua,ya,ja,null==za?1:za)}function u(ua,ya,ja,za){this.l=+ua;this.a=+ya;this.b=+ja;this.opacity=+za}function B(ua){return ua>pa?Math.pow(ua,1/3):ua/Y+ra}function I(ua){return ua>qa?ua*ua*ua:Y*(ua-ra)}function J(ua){return 255*(.0031308>=ua?12.92*ua:1.055*Math.pow(ua,
1/2.4)-.055)}function N(ua){return.04045>=(ua/=255)?ua/12.92:Math.pow((ua+.055)/1.055,2.4)}function M(ua){if(ua instanceof L)return new L(ua.h,ua.c,ua.l,ua.opacity);ua instanceof u||(ua=F(ua));if(0===ua.a&&0===ua.b)return new L(NaN,0<ua.l&&100>ua.l?0:NaN,ua.l,ua.opacity);var ya=Math.atan2(ua.b,ua.a)*ma;return new L(0>ya?ya+360:ya,Math.sqrt(ua.a*ua.a+ua.b*ua.b),ua.l,ua.opacity)}function E(ua,ya,ja,za){return 1===arguments.length?M(ua):new L(ua,ya,ja,null==za?1:za)}function L(ua,ya,ja,za){this.h=+ua;
this.c=+ya;this.l=+ja;this.opacity=+za}function Q(ua){if(isNaN(ua.h))return new u(ua.l,0,0,ua.opacity);var ya=ua.h*sa;return new u(ua.l,Math.cos(ya)*ua.c,Math.sin(ya)*ua.c,ua.opacity)}function S(ua,ya,ja,za){if(1===arguments.length){var Ba=ua;if(Ba instanceof R)Ba=new R(Ba.h,Ba.s,Ba.l,Ba.opacity);else{Ba instanceof d||(Ba=c(Ba));var Ma=Ba.g/255,Oa=Ba.b/255,Ia=(oa*Oa+Ba.r/255*-1.7884503806-3.5172982438*Ma)/(oa+-1.7884503806-3.5172982438);Oa-=Ia;var Pa=(1.97294*(Ma-Ia)- -.29227*Oa)/-.90649;Oa=(Ma=Math.sqrt(Pa*
Pa+Oa*Oa)/(1.97294*Ia*(1-Ia)))?Math.atan2(Pa,Oa)*ma-120:NaN;Ba=new R(0>Oa?Oa+360:Oa,Ma,Ia,Ba.opacity)}}else Ba=new R(ua,ya,ja,null==za?1:za);return Ba}function R(ua,ya,ja,za){this.h=+ua;this.s=+ya;this.l=+ja;this.opacity=+za}var O=1/.7,T=/^#([0-9a-f]{3,8})$/,V=/^rgb\(\s*([+-]?\d+)\s*,\s*([+-]?\d+)\s*,\s*([+-]?\d+)\s*\)$/,X=/^rgb\(\s*([+-]?\d*\.?\d+(?:[eE][+-]?\d+)?)%\s*,\s*([+-]?\d*\.?\d+(?:[eE][+-]?\d+)?)%\s*,\s*([+-]?\d*\.?\d+(?:[eE][+-]?\d+)?)%\s*\)$/,ba=/^rgba\(\s*([+-]?\d+)\s*,\s*([+-]?\d+)\s*,\s*([+-]?\d+)\s*,\s*([+-]?\d*\.?\d+(?:[eE][+-]?\d+)?)\s*\)$/,
aa=/^rgba\(\s*([+-]?\d*\.?\d+(?:[eE][+-]?\d+)?)%\s*,\s*([+-]?\d*\.?\d+(?:[eE][+-]?\d+)?)%\s*,\s*([+-]?\d*\.?\d+(?:[eE][+-]?\d+)?)%\s*,\s*([+-]?\d*\.?\d+(?:[eE][+-]?\d+)?)\s*\)$/,ka=/^hsl\(\s*([+-]?\d*\.?\d+(?:[eE][+-]?\d+)?)\s*,\s*([+-]?\d*\.?\d+(?:[eE][+-]?\d+)?)%\s*,\s*([+-]?\d*\.?\d+(?:[eE][+-]?\d+)?)%\s*\)$/,ha=/^hsla\(\s*([+-]?\d*\.?\d+(?:[eE][+-]?\d+)?)\s*,\s*([+-]?\d*\.?\d+(?:[eE][+-]?\d+)?)%\s*,\s*([+-]?\d*\.?\d+(?:[eE][+-]?\d+)?)%\s*,\s*([+-]?\d*\.?\d+(?:[eE][+-]?\d+)?)\s*\)$/,ca={aliceblue:15792383,
antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,
darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,
indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,
magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,
palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,
turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};n(f,e,{copy:function(ua){return Object.assign(new this.constructor,this,ua)},displayable:function(){return this.rgb().displayable()},hex:b,formatHex:b,formatHsl:function(){return x(this).formatHsl()},formatRgb:k,toString:k});n(d,g,m(f,{brighter:function(ua){ua=null==ua?O:Math.pow(O,ua);return new d(this.r*ua,this.g*ua,this.b*ua,this.opacity)},darker:function(ua){ua=null==ua?.7:
Math.pow(.7,ua);return new d(this.r*ua,this.g*ua,this.b*ua,this.opacity)},rgb:function(){return this},displayable:function(){return-.5<=this.r&&255.5>this.r&&-.5<=this.g&&255.5>this.g&&-.5<=this.b&&255.5>this.b&&0<=this.opacity&&1>=this.opacity},hex:p,formatHex:p,formatRgb:r,toString:r}));n(A,y,m(f,{brighter:function(ua){ua=null==ua?O:Math.pow(O,ua);return new A(this.h,this.s,this.l*ua,this.opacity)},darker:function(ua){ua=null==ua?.7:Math.pow(.7,ua);return new A(this.h,this.s,this.l*ua,this.opacity)},
rgb:function(){var ua=this.h%360+360*(0>this.h),ya=isNaN(ua)||isNaN(this.s)?0:this.s,ja=this.l;ya=ja+(.5>ja?ja:1-ja)*ya;ja=2*ja-ya;return new d(z(240<=ua?ua-240:ua+120,ja,ya),z(ua,ja,ya),z(120>ua?ua+240:ua-120,ja,ya),this.opacity)},displayable:function(){return(0<=this.s&&1>=this.s||isNaN(this.s))&&0<=this.l&&1>=this.l&&0<=this.opacity&&1>=this.opacity},formatHsl:function(){var ua=this.opacity;ua=isNaN(ua)?1:Math.max(0,Math.min(1,ua));return(1===ua?"hsl(":"hsla(")+(this.h||0)+", "+100*(this.s||0)+
"%, "+100*(this.l||0)+"%"+(1===ua?")":", "+ua+")")}}));var sa=Math.PI/180,ma=180/Math.PI,ra=4/29,qa=6/29,Y=3*qa*qa,pa=qa*qa*qa;n(u,D,m(f,{brighter:function(ua){return new u(this.l+18*(null==ua?1:ua),this.a,this.b,this.opacity)},darker:function(ua){return new u(this.l-18*(null==ua?1:ua),this.a,this.b,this.opacity)},rgb:function(){var ua=(this.l+16)/116,ya=isNaN(this.a)?ua:ua+this.a/500,ja=isNaN(this.b)?ua:ua-this.b/200;ya=.96422*I(ya);ua=1*I(ua);ja=.82521*I(ja);return new d(J(3.1338561*ya-1.6168667*
ua-.4906146*ja),J(-.9787684*ya+1.9161415*ua+.033454*ja),J(.0719453*ya-.2289914*ua+1.4052427*ja),this.opacity)}}));n(L,E,m(f,{brighter:function(ua){return new L(this.h,this.c,this.l+18*(null==ua?1:ua),this.opacity)},darker:function(ua){return new L(this.h,this.c,this.l-18*(null==ua?1:ua),this.opacity)},rgb:function(){return Q(this).rgb()}}));var oa=1.78277*-.29227-.1347134789;n(R,S,m(f,{brighter:function(ua){ua=null==ua?O:Math.pow(O,ua);return new R(this.h,this.s,this.l*ua,this.opacity)},darker:function(ua){ua=
null==ua?.7:Math.pow(.7,ua);return new R(this.h,this.s,this.l*ua,this.opacity)},rgb:function(){var ua=isNaN(this.h)?0:(this.h+120)*sa,ya=+this.l,ja=isNaN(this.s)?0:this.s*ya*(1-ya),za=Math.cos(ua);ua=Math.sin(ua);return new d(255*(ya+ja*(-.14861*za+1.78277*ua)),255*(ya+ja*(-.29227*za+-.90649*ua)),255*(ya+1.97294*ja*za),this.opacity)}}));q.color=e;q.cubehelix=S;q.gray=function(ua,ya){return new u(ua,0,0,null==ya?1:ya)};q.hcl=E;q.hsl=y;q.lab=D;q.lch=function(ua,ya,ja,za){return 1===arguments.length?
M(ua):new L(ja,ya,ua,null==za?1:za)};q.rgb=g;Object.defineProperty(q,"__esModule",{value:!0})})},{}],159:[function(a,G,C){(function(q,n){"object"===typeof C&&"undefined"!==typeof G?n(C):(q=q||self,n(q.d3=q.d3||{}))})(this,function(q){function n(){for(var e=0,h=arguments.length,l={},c;e<h;++e){if(!(c=arguments[e]+"")||c in l||/[\s.]/.test(c))throw Error("illegal type: "+c);l[c]=[]}return new m(l)}function m(e){this._=e}function f(e,h){return e.trim().split(/^|\s+/).map(function(l){var c="",g=l.indexOf(".");
0<=g&&(c=l.slice(g+1),l=l.slice(0,g));if(l&&!h.hasOwnProperty(l))throw Error("unknown type: "+l);return{type:l,name:c}})}function b(e,h,l){for(var c=0,g=e.length;c<g;++c)if(e[c].name===h){e[c]=k;e=e.slice(0,c).concat(e.slice(c+1));break}null!=l&&e.push({name:h,value:l});return e}var k={value:function(){}};m.prototype=n.prototype={constructor:m,on:function(e,h){var l=this._,c=f(e+"",l),g,d=-1,p=c.length;if(2>arguments.length)for(;++d<p;){var r;if(r=g=(e=c[d]).type){a:{r=l[g];for(var t=0,w=r.length;t<
w;++t)if((g=r[t]).name===e.name){g=g.value;break a}g=void 0}r=g}if(r)return g}else{if(null!=h&&"function"!==typeof h)throw Error("invalid callback: "+h);for(;++d<p;)if(g=(e=c[d]).type)l[g]=b(l[g],e.name,h);else if(null==h)for(g in l)l[g]=b(l[g],e.name,null);return this}},copy:function(){var e={},h=this._,l;for(l in h)e[l]=h[l].slice();return new m(e)},call:function(e,h){if(0<(g=arguments.length-2))for(var l=Array(g),c=0,g,d;c<g;++c)l[c]=arguments[c+2];if(!this._.hasOwnProperty(e))throw Error("unknown type: "+
e);d=this._[e];c=0;for(g=d.length;c<g;++c)d[c].value.apply(h,l)},apply:function(e,h,l){if(!this._.hasOwnProperty(e))throw Error("unknown type: "+e);e=this._[e];for(var c=0,g=e.length;c<g;++c)e[c].value.apply(h,l)}};q.dispatch=n;Object.defineProperty(q,"__esModule",{value:!0})})},{}],160:[function(a,G,C){(function(q,n){"object"===typeof C&&"undefined"!==typeof G?n(C,a("d3-quadtree"),a("d3-collection"),a("d3-dispatch"),a("d3-timer")):n(q.d3=q.d3||{},q.d3,q.d3,q.d3,q.d3)})(this,function(q,n,m,f,b){function k(t){return function(){return t}}
function e(){return 1E-6*(Math.random()-.5)}function h(t){return t.x+t.vx}function l(t){return t.y+t.vy}function c(t){return t.index}function g(t,w){t=t.get(w);if(!t)throw Error("missing: "+w);return t}function d(t){return t.x}function p(t){return t.y}var r=Math.PI*(3-Math.sqrt(5));q.forceCenter=function(t,w){function x(){var A,z=y.length,F=0,D=0;for(A=0;A<z;++A){var u=y[A];F+=u.x;D+=u.y}F=F/z-t;D=D/z-w;for(A=0;A<z;++A)u=y[A],u.x-=F,u.y-=D}var y;null==t&&(t=0);null==w&&(w=0);x.initialize=function(A){y=
A};x.x=function(A){return arguments.length?(t=+A,x):t};x.y=function(A){return arguments.length?(w=+A,x):w};return x};q.forceCollide=function(t){function w(){function u(R,O,T,V,X){var ba=R.data;R=R.r;var aa=L+R;if(ba)ba.index>N.index&&(O=M-ba.x-ba.vx,T=E-ba.y-ba.vy,V=O*O+T*T,V<aa*aa&&(0===O&&(O=e(),V+=O*O),0===T&&(T=e(),V+=T*T),V=(aa-(V=Math.sqrt(V)))/V*F,N.vx+=(O*=V)*(aa=(R*=R)/(Q+R)),N.vy+=(T*=V)*aa,ba.vx-=O*(aa=1-aa),ba.vy-=T*aa));else return O>M+aa||V<M-aa||T>E+aa||X<E-aa}for(var B,I=A.length,
J,N,M,E,L,Q,S=0;S<D;++S)for(J=n.quadtree(A,h,l).visitAfter(x),B=0;B<I;++B)N=A[B],L=z[N.index],Q=L*L,M=N.x+N.vx,E=N.y+N.vy,J.visit(u)}function x(u){if(u.data)return u.r=z[u.data.index];for(var B=u.r=0;4>B;++B)u[B]&&u[B].r>u.r&&(u.r=u[B].r)}function y(){if(A){var u,B=A.length;z=Array(B);for(u=0;u<B;++u){var I=A[u];z[I.index]=+t(I,u,A)}}}var A,z,F=1,D=1;"function"!==typeof t&&(t=k(null==t?1:+t));w.initialize=function(u){A=u;y()};w.iterations=function(u){return arguments.length?(D=+u,w):D};w.strength=
function(u){return arguments.length?(F=+u,w):F};w.radius=function(u){return arguments.length?(t="function"===typeof u?u:k(+u),y(),w):t};return w};q.forceLink=function(t){function w(E){for(var L=0,Q=t.length;L<M;++L)for(var S=0,R,O,T,V,X;S<Q;++S)R=t[S],O=R.source,R=R.target,T=R.x+R.vx-O.x-O.vx||e(),V=R.y+R.vy-O.y-O.vy||e(),X=Math.sqrt(T*T+V*V),X=(X-B[S])/X*E*D[S],T*=X,V*=X,R.vx-=T*(X=N[S]),R.vy-=V*X,O.vx+=T*(X=1-X),O.vy+=V*X}function x(){if(I){var E=I.length,L=t.length,Q=m.map(I,z);var S=0;for(J=Array(E);S<
L;++S)E=t[S],E.index=S,"object"!==typeof E.source&&(E.source=g(Q,E.source)),"object"!==typeof E.target&&(E.target=g(Q,E.target)),J[E.source.index]=(J[E.source.index]||0)+1,J[E.target.index]=(J[E.target.index]||0)+1;S=0;for(N=Array(L);S<L;++S)E=t[S],N[S]=J[E.source.index]/(J[E.source.index]+J[E.target.index]);D=Array(L);y();B=Array(L);A()}}function y(){if(I)for(var E=0,L=t.length;E<L;++E)D[E]=+F(t[E],E,t)}function A(){if(I)for(var E=0,L=t.length;E<L;++E)B[E]=+u(t[E],E,t)}var z=c,F=function(E){return 1/
Math.min(J[E.source.index],J[E.target.index])},D,u=k(30),B,I,J,N,M=1;null==t&&(t=[]);w.initialize=function(E){I=E;x()};w.links=function(E){return arguments.length?(t=E,x(),w):t};w.id=function(E){return arguments.length?(z=E,w):z};w.iterations=function(E){return arguments.length?(M=+E,w):M};w.strength=function(E){return arguments.length?(F="function"===typeof E?E:k(+E),y(),w):F};w.distance=function(E){return arguments.length?(u="function"===typeof E?E:k(+E),A(),w):u};return w};q.forceManyBody=function(){function t(N){var M=
A.length,E=n.quadtree(A,d,p).visitAfter(x);F=N;for(N=0;N<M;++N)z=A[N],E.visit(y)}function w(){if(A){var N,M=A.length;u=Array(M);for(N=0;N<M;++N){var E=A[N];u[E.index]=+D(E,N,A)}}}function x(N){var M=0,E,L,Q=0,S,R,O;if(N.length){for(S=R=O=0;4>O;++O)(E=N[O])&&(L=Math.abs(E.value))&&(M+=E.value,Q+=L,S+=L*E.x,R+=L*E.y);N.x=S/Q;N.y=R/Q}else{E=N;E.x=E.data.x;E.y=E.data.y;do M+=u[E.data.index];while(E=E.next)}N.value=M}function y(N,M,E,L){if(!N.value)return!0;E=N.x-z.x;var Q=N.y-z.y;M=L-M;L=E*E+Q*Q;if(M*
M/J<L)return L<I&&(0===E&&(E=e(),L+=E*E),0===Q&&(Q=e(),L+=Q*Q),L<B&&(L=Math.sqrt(B*L)),z.vx+=E*N.value*F/L,z.vy+=Q*N.value*F/L),!0;if(!(N.length||L>=I)){if(N.data!==z||N.next)0===E&&(E=e(),L+=E*E),0===Q&&(Q=e(),L+=Q*Q),L<B&&(L=Math.sqrt(B*L));do N.data!==z&&(M=u[N.data.index]*F/L,z.vx+=E*M,z.vy+=Q*M);while(N=N.next)}}var A,z,F,D=k(-30),u,B=1,I=Infinity,J=.81;t.initialize=function(N){A=N;w()};t.strength=function(N){return arguments.length?(D="function"===typeof N?N:k(+N),w(),t):D};t.distanceMin=function(N){return arguments.length?
(B=N*N,t):Math.sqrt(B)};t.distanceMax=function(N){return arguments.length?(I=N*N,t):Math.sqrt(I)};t.theta=function(N){return arguments.length?(J=N*N,t):Math.sqrt(J)};return t};q.forceRadial=function(t,w,x){function y(B){for(var I=0,J=z.length;I<J;++I){var N=z[I],M=N.x-w||1E-6,E=N.y-x||1E-6,L=Math.sqrt(M*M+E*E);L=(u[I]-L)*D[I]*B/L;N.vx+=M*L;N.vy+=E*L}}function A(){if(z){var B,I=z.length;D=Array(I);u=Array(I);for(B=0;B<I;++B)u[B]=+t(z[B],B,z),D[B]=isNaN(u[B])?0:+F(z[B],B,z)}}var z,F=k(.1),D,u;"function"!==
typeof t&&(t=k(+t));null==w&&(w=0);null==x&&(x=0);y.initialize=function(B){z=B;A()};y.strength=function(B){return arguments.length?(F="function"===typeof B?B:k(+B),A(),y):F};y.radius=function(B){return arguments.length?(t="function"===typeof B?B:k(+B),A(),y):t};y.x=function(B){return arguments.length?(w=+B,y):w};y.y=function(B){return arguments.length?(x=+B,y):x};return y};q.forceSimulation=function(t){function w(){x();M.call("tick",z);F<D&&(N.stop(),M.call("end",z))}function x(E){var L,Q=t.length;
void 0===E&&(E=1);for(var S=0;S<E;++S)for(F+=(B-F)*u,J.each(function(O){O(F)}),L=0;L<Q;++L){var R=t[L];null==R.fx?R.x+=R.vx*=I:(R.x=R.fx,R.vx=0);null==R.fy?R.y+=R.vy*=I:(R.y=R.fy,R.vy=0)}return z}function y(){for(var E=0,L=t.length,Q;E<L;++E){Q=t[E];Q.index=E;null!=Q.fx&&(Q.x=Q.fx);null!=Q.fy&&(Q.y=Q.fy);if(isNaN(Q.x)||isNaN(Q.y)){var S=10*Math.sqrt(E),R=E*r;Q.x=S*Math.cos(R);Q.y=S*Math.sin(R)}if(isNaN(Q.vx)||isNaN(Q.vy))Q.vx=Q.vy=0}}function A(E){E.initialize&&E.initialize(t);return E}var z,F=1,
D=.001,u=1-Math.pow(D,1/300),B=0,I=.6,J=m.map(),N=b.timer(w),M=f.dispatch("tick","end");null==t&&(t=[]);y();return z={tick:x,restart:function(){return N.restart(w),z},stop:function(){return N.stop(),z},nodes:function(E){return arguments.length?(t=E,y(),J.each(A),z):t},alpha:function(E){return arguments.length?(F=+E,z):F},alphaMin:function(E){return arguments.length?(D=+E,z):D},alphaDecay:function(E){return arguments.length?(u=+E,z):+u},alphaTarget:function(E){return arguments.length?(B=+E,z):B},velocityDecay:function(E){return arguments.length?
(I=1-E,z):1-I},force:function(E,L){return 1<arguments.length?(null==L?J.remove(E):J.set(E,A(L)),z):J.get(E)},find:function(E,L,Q){var S,R=t.length;Q=null==Q?Infinity:Q*Q;for(S=0;S<R;++S){var O=t[S];var T=E-O.x;var V=L-O.y;T=T*T+V*V;if(T<Q){var X=O;Q=T}}return X},on:function(E,L){return 1<arguments.length?(M.on(E,L),z):M.on(E)}}};q.forceX=function(t){function w(D){for(var u=0,B=A.length,I;u<B;++u)I=A[u],I.vx+=(F[u]-I.x)*z[u]*D}function x(){if(A){var D,u=A.length;z=Array(u);F=Array(u);for(D=0;D<u;++D)z[D]=
isNaN(F[D]=+t(A[D],D,A))?0:+y(A[D],D,A)}}var y=k(.1),A,z,F;"function"!==typeof t&&(t=k(null==t?0:+t));w.initialize=function(D){A=D;x()};w.strength=function(D){return arguments.length?(y="function"===typeof D?D:k(+D),x(),w):y};w.x=function(D){return arguments.length?(t="function"===typeof D?D:k(+D),x(),w):t};return w};q.forceY=function(t){function w(D){for(var u=0,B=A.length,I;u<B;++u)I=A[u],I.vy+=(F[u]-I.y)*z[u]*D}function x(){if(A){var D,u=A.length;z=Array(u);F=Array(u);for(D=0;D<u;++D)z[D]=isNaN(F[D]=
+t(A[D],D,A))?0:+y(A[D],D,A)}}var y=k(.1),A,z,F;"function"!==typeof t&&(t=k(null==t?0:+t));w.initialize=function(D){A=D;x()};w.strength=function(D){return arguments.length?(y="function"===typeof D?D:k(+D),x(),w):y};w.y=function(D){return arguments.length?(t="function"===typeof D?D:k(+D),x(),w):t};return w};Object.defineProperty(q,"__esModule",{value:!0})})},{"d3-collection":157,"d3-dispatch":159,"d3-quadtree":164,"d3-timer":168}],161:[function(a,G,C){(function(q,n){"object"===typeof C&&"undefined"!==
typeof G?n(C):(q=q||self,n(q.d3=q.d3||{}))})(this,function(q){function n(Y,pa){return Y.parent===pa.parent?1:2}function m(Y,pa){return Y+pa.x}function f(Y,pa){return Math.max(Y,pa.y)}function b(Y){for(var pa;pa=Y.children;)Y=pa[0];return Y}function k(Y){for(var pa;pa=Y.children;)Y=pa[pa.length-1];return Y}function e(Y){var pa=0,oa=Y.children,ua=oa&&oa.length;if(ua)for(;0<=--ua;)pa+=oa[ua].value;else pa=1;Y.value=pa}function h(Y,pa){var oa=new d(Y);Y=+Y.value&&(oa.value=Y.value);var ua,ya=[oa],ja,
za,Ba,Ma;for(null==pa&&(pa=l);ua=ya.pop();)if(Y&&(ua.value=+ua.data.value),(za=pa(ua.data))&&(Ma=za.length))for(ua.children=Array(Ma),Ba=Ma-1;0<=Ba;--Ba)ya.push(ja=ua.children[Ba]=new d(za[Ba])),ja.parent=ua,ja.depth=ua.depth+1;return oa.eachBefore(g)}function l(Y){return Y.children}function c(Y){Y.data=Y.data.data}function g(Y){var pa=0;do Y.height=pa;while((Y=Y.parent)&&Y.height<++pa)}function d(Y){this.data=Y;this.depth=this.height=0;this.parent=null}function p(Y){var pa=0;Y=ca.call(Y);for(var oa=
Y.length,ua,ya;oa;)ya=Math.random()*oa--|0,ua=Y[oa],Y[oa]=Y[ya],Y[ya]=ua;oa=Y.length;ua=[];for(var ja;pa<oa;)if(ya=Y[pa],ja&&t(ja,ya))++pa;else{a:if(pa=ua,w(ya,pa))pa=[ya];else{for(ua=0;ua<pa.length;++ua)if(r(ya,pa[ua])&&w(x(pa[ua],ya),pa)){pa=[pa[ua],ya];break a}for(ua=0;ua<pa.length-1;++ua)for(ja=ua+1;ja<pa.length;++ja)if(r(x(pa[ua],pa[ja]),ya)&&r(x(pa[ua],ya),pa[ja])&&r(x(pa[ja],ya),pa[ua])&&w(y(pa[ua],pa[ja],ya),pa)){pa=[pa[ua],pa[ja],ya];break a}throw Error();}a:{pa=ua=pa;switch(pa.length){case 1:pa=
pa[0];pa={x:pa.x,y:pa.y,r:pa.r};break a;case 2:pa=x(pa[0],pa[1]);break a;case 3:pa=y(pa[0],pa[1],pa[2]);break a}pa=void 0}ja=pa;pa=0}return ja}function r(Y,pa){var oa=Y.r-pa.r,ua=pa.x-Y.x;Y=pa.y-Y.y;return 0>oa||oa*oa<ua*ua+Y*Y}function t(Y,pa){var oa=Y.r-pa.r+1E-6,ua=pa.x-Y.x;Y=pa.y-Y.y;return 0<oa&&oa*oa>ua*ua+Y*Y}function w(Y,pa){for(var oa=0;oa<pa.length;++oa)if(!t(Y,pa[oa]))return!1;return!0}function x(Y,pa){var oa=Y.x,ua=Y.y;Y=Y.r;var ya=pa.x,ja=pa.y;pa=pa.r;var za=ya-oa,Ba=ja-ua,Ma=pa-Y,Oa=
Math.sqrt(za*za+Ba*Ba);return{x:(oa+ya+za/Oa*Ma)/2,y:(ua+ja+Ba/Oa*Ma)/2,r:(Oa+Y+pa)/2}}function y(Y,pa,oa){var ua=Y.x,ya=Y.y;Y=Y.r;var ja=pa.x,za=pa.y,Ba=pa.r,Ma=oa.x,Oa=oa.y,Ia=oa.r;oa=ua-ja;pa=ua-Ma;var Pa=ya-za,Fa=ya-Oa,Na=Ba-Y,$a=Ia-Y,cb=ua*ua+ya*ya-Y*Y;za=cb-ja*ja-za*za+Ba*Ba;Oa=cb-Ma*Ma-Oa*Oa+Ia*Ia;Ma=pa*Pa-oa*Fa;ja=(Pa*Oa-Fa*za)/(2*Ma)-ua;Pa=(Fa*Na-Pa*$a)/Ma;Fa=(pa*za-oa*Oa)/(2*Ma)-ya;oa=(oa*$a-pa*Na)/Ma;pa=Pa*Pa+oa*oa-1;Na=2*(Y+ja*Pa+Fa*oa);Y=ja*ja+Fa*Fa-Y*Y;Y=-(pa?(Na+Math.sqrt(Na*Na-4*pa*
Y))/(2*pa):Y/Na);return{x:ua+ja+Pa*Y,y:ya+Fa+oa*Y,r:Y}}function A(Y,pa,oa){var ua=Y.x-pa.x,ya=Y.y-pa.y,ja=ua*ua+ya*ya;if(ja){var za=pa.r+oa.r;za*=za;var Ba=Y.r+oa.r;Ba*=Ba;if(za>Ba){var Ma=(ja+Ba-za)/(2*ja);za=Math.sqrt(Math.max(0,Ba/ja-Ma*Ma));oa.x=Y.x-Ma*ua-za*ya;oa.y=Y.y-Ma*ya+za*ua}else Ma=(ja+za-Ba)/(2*ja),za=Math.sqrt(Math.max(0,za/ja-Ma*Ma)),oa.x=pa.x+Ma*ua-za*ya,oa.y=pa.y+Ma*ya+za*ua}else oa.x=pa.x+oa.r,oa.y=pa.y}function z(Y,pa){var oa=Y.r+pa.r-1E-6,ua=pa.x-Y.x;Y=pa.y-Y.y;return 0<oa&&oa*
oa>ua*ua+Y*Y}function F(Y){var pa=Y._,oa=Y.next._,ua=pa.r+oa.r;Y=(pa.x*oa.r+oa.x*pa.r)/ua;pa=(pa.y*oa.r+oa.y*pa.r)/ua;return Y*Y+pa*pa}function D(Y){this._=Y;this.previous=this.next=null}function u(Y){if(!(oa=Y.length))return 0;var pa,oa;var ua=Y[0];ua.x=0;ua.y=0;if(!(1<oa))return ua.r;var ya=Y[1];ua.x=-ya.r;ya.x=ua.r;ya.y=0;if(!(2<oa))return ua.r+ya.r;A(ya,ua,pa=Y[2]);ua=new D(ua);ya=new D(ya);pa=new D(pa);ua.next=pa.previous=ya;ya.next=ua.previous=pa;pa.next=ya.previous=ua;var ja=3;a:for(;ja<oa;++ja){A(ua._,
ya._,pa=Y[ja]);pa=new D(pa);var za=ya.next;var Ba=ua.previous;var Ma=ya._.r;var Oa=ua._.r;do if(Ma<=Oa){if(z(za._,pa._)){ya=za;ua.next=ya;ya.previous=ua;--ja;continue a}Ma+=za._.r;za=za.next}else{if(z(Ba._,pa._)){ua=Ba;ua.next=ya;ya.previous=ua;--ja;continue a}Oa+=Ba._.r;Ba=Ba.previous}while(za!==Ba.next);pa.previous=ua;pa.next=ya;ua.next=ya.previous=ya=pa;for(za=F(ua);(pa=pa.next)!==ya;)(Ba=F(pa))<za&&(ua=pa,za=Ba);ya=ua.next}ua=[ya._];for(pa=ya;(pa=pa.next)!==ya;)ua.push(pa._);pa=p(ua);for(ja=0;ja<
oa;++ja)ua=Y[ja],ua.x-=pa.x,ua.y-=pa.y;return pa.r}function B(Y){if("function"!==typeof Y)throw Error();return Y}function I(){return 0}function J(Y){return function(){return Y}}function N(Y){return Math.sqrt(Y.value)}function M(Y){return function(pa){pa.children||(pa.r=Math.max(0,+Y(pa)||0))}}function E(Y,pa){return function(oa){if(ua=oa.children){var ua,ya,ja=ua.length,za=Y(oa)*pa||0;if(za)for(ya=0;ya<ja;++ya)ua[ya].r+=za;var Ba=u(ua);if(za)for(ya=0;ya<ja;++ya)ua[ya].r-=za;oa.r=Ba+za}}}function L(Y){return function(pa){var oa=
pa.parent;pa.r*=Y;oa&&(pa.x=oa.x+Y*pa.x,pa.y=oa.y+Y*pa.y)}}function Q(Y){Y.x0=Math.round(Y.x0);Y.y0=Math.round(Y.y0);Y.x1=Math.round(Y.x1);Y.y1=Math.round(Y.y1)}function S(Y,pa,oa,ua,ya){var ja=Y.children,za=-1,Ba=ja.length;for(ua=Y.value&&(ua-pa)/Y.value;++za<Ba;)Y=ja[za],Y.y0=oa,Y.y1=ya,Y.x0=pa,Y.x1=pa+=Y.value*ua}function R(Y){return Y.id}function O(Y){return Y.parentId}function T(Y,pa){return Y.parent===pa.parent?1:2}function V(Y){var pa=Y.children;return pa?pa[0]:Y.t}function X(Y){var pa=Y.children;
return pa?pa[pa.length-1]:Y.t}function ba(Y,pa){this._=Y;this.A=this.children=this.parent=null;this.a=this;this.s=this.c=this.m=this.z=0;this.t=null;this.i=pa}function aa(Y){Y=new ba(Y,0);for(var pa,oa=[Y],ua,ya,ja;pa=oa.pop();)if(ya=pa._.children)for(pa.children=Array(ua=ya.length),ja=ua-1;0<=ja;--ja)oa.push(ua=pa.children[ja]=new ba(ya[ja],ja)),ua.parent=pa;(Y.parent=new ba(null,0)).children=[Y];return Y}function ka(Y,pa,oa,ua,ya){var ja=Y.children,za=-1,Ba=ja.length;for(ya=Y.value&&(ya-oa)/Y.value;++za<
Ba;)Y=ja[za],Y.x0=pa,Y.x1=ua,Y.y0=oa,Y.y1=oa+=Y.value*ya}function ha(Y,pa,oa,ua,ya,ja){for(var za=[],Ba=pa.children,Ma,Oa,Ia=Ma=0,Pa=Ba.length,Fa,Na=pa.value,$a,cb,mb,Ka,Ua,Ea;Ma<Pa;){pa=ya-oa;Fa=ja-ua;do $a=Ba[Ia++].value;while(!$a&&Ia<Pa);cb=mb=$a;Ea=Math.max(Fa/pa,pa/Fa)/(Na*Y);Ka=$a*$a*Ea;for(Ua=Math.max(mb/Ka,Ka/cb);Ia<Pa;++Ia){$a+=Oa=Ba[Ia].value;Oa<cb&&(cb=Oa);Oa>mb&&(mb=Oa);Ka=$a*$a*Ea;Ka=Math.max(mb/Ka,Ka/cb);if(Ka>Ua){$a-=Oa;break}Ua=Ka}za.push(Ma={value:$a,dice:pa<Fa,children:Ba.slice(Ma,
Ia)});Ma.dice?S(Ma,oa,ua,ya,Na?ua+=Fa*$a/Na:ja):ka(Ma,oa,ua,Na?oa+=pa*$a/Na:ya,ja);Na-=$a;Ma=Ia}return za}d.prototype=h.prototype={constructor:d,count:function(){return this.eachAfter(e)},each:function(Y){var pa,oa=[this],ua;do{var ya=oa.reverse();for(oa=[];pa=ya.pop();)if(Y(pa),pa=pa.children){var ja=0;for(ua=pa.length;ja<ua;++ja)oa.push(pa[ja])}}while(oa.length);return this},eachAfter:function(Y){for(var pa,oa=[this],ua=[],ya,ja;pa=oa.pop();)if(ua.push(pa),pa=pa.children)for(ya=0,ja=pa.length;ya<
ja;++ya)oa.push(pa[ya]);for(;pa=ua.pop();)Y(pa);return this},eachBefore:function(Y){for(var pa,oa=[this],ua;pa=oa.pop();)if(Y(pa),pa=pa.children)for(ua=pa.length-1;0<=ua;--ua)oa.push(pa[ua]);return this},sum:function(Y){return this.eachAfter(function(pa){for(var oa=+Y(pa.data)||0,ua=pa.children,ya=ua&&ua.length;0<=--ya;)oa+=ua[ya].value;pa.value=oa})},sort:function(Y){return this.eachBefore(function(pa){pa.children&&pa.children.sort(Y)})},path:function(Y){var pa=this;var oa=pa;var ua=Y;if(oa!==ua){var ya=
oa.ancestors(),ja=ua.ancestors(),za=null;oa=ya.pop();for(ua=ja.pop();oa===ua;)za=oa,oa=ya.pop(),ua=ja.pop();oa=za}for(ua=[pa];pa!==oa;)pa=pa.parent,ua.push(pa);for(pa=ua.length;Y!==oa;)ua.splice(pa,0,Y),Y=Y.parent;return ua},ancestors:function(){for(var Y=this,pa=[Y];Y=Y.parent;)pa.push(Y);return pa},descendants:function(){var Y=[];this.each(function(pa){Y.push(pa)});return Y},leaves:function(){var Y=[];this.eachBefore(function(pa){pa.children||Y.push(pa)});return Y},links:function(){var Y=this,pa=
[];Y.each(function(oa){oa!==Y&&pa.push({source:oa.parent,target:oa})});return pa},copy:function(){return h(this).eachBefore(c)}};var ca=Array.prototype.slice,sa={depth:-1},ma={};ba.prototype=Object.create(d.prototype);var ra=(1+Math.sqrt(5))/2,qa=function oa(pa){function ua(ya,ja,za,Ba,Ma){ha(pa,ya,ja,za,Ba,Ma)}ua.ratio=function(ya){return oa(1<(ya=+ya)?ya:1)};return ua}(ra);ra=function ua(oa){function ya(ja,za,Ba,Ma,Oa){if((Ia=ja._squarify)&&Ia.ratio===oa)for(var Ia,Pa,Fa,Na=-1,$a,cb=Ia.length,mb=
ja.value;++Na<cb;){ja=Ia[Na];Pa=ja.children;Fa=ja.value=0;for($a=Pa.length;Fa<$a;++Fa)ja.value+=Pa[Fa].value;ja.dice?S(ja,za,Ba,Ma,Ba+=(Oa-Ba)*ja.value/mb):ka(ja,za,Ba,za+=(Ma-za)*ja.value/mb,Oa);mb-=ja.value}else ja._squarify=Ia=ha(oa,ja,za,Ba,Ma,Oa),Ia.ratio=oa}ya.ratio=function(ja){return ua(1<(ja=+ja)?ja:1)};return ya}(ra);q.cluster=function(){function oa(Ba){var Ma,Oa=0;Ba.eachAfter(function($a){var cb=$a.children;if(cb){var mb=cb.reduce(m,0)/cb.length;$a.x=mb;$a.y=1+cb.reduce(f,0)}else $a.x=
Ma?Oa+=ua($a,Ma):0,$a.y=0,Ma=$a});var Ia=b(Ba),Pa=k(Ba),Fa=Ia.x-ua(Ia,Pa)/2,Na=Pa.x+ua(Pa,Ia)/2;return Ba.eachAfter(za?function($a){$a.x=($a.x-Ba.x)*ya;$a.y=(Ba.y-$a.y)*ja}:function($a){$a.x=($a.x-Fa)/(Na-Fa)*ya;$a.y=(1-(Ba.y?$a.y/Ba.y:1))*ja})}var ua=n,ya=1,ja=1,za=!1;oa.separation=function(Ba){return arguments.length?(ua=Ba,oa):ua};oa.size=function(Ba){return arguments.length?(za=!1,ya=+Ba[0],ja=+Ba[1],oa):za?null:[ya,ja]};oa.nodeSize=function(Ba){return arguments.length?(za=!0,ya=+Ba[0],ja=+Ba[1],
oa):za?[ya,ja]:null};return oa};q.hierarchy=h;q.pack=function(){function oa(Ba){Ba.x=ya/2;Ba.y=ja/2;ua?Ba.eachBefore(M(ua)).eachAfter(E(za,.5)).eachBefore(L(1)):Ba.eachBefore(M(N)).eachAfter(E(I,1)).eachAfter(E(za,Ba.r/Math.min(ya,ja))).eachBefore(L(Math.min(ya,ja)/(2*Ba.r)));return Ba}var ua=null,ya=1,ja=1,za=I;oa.radius=function(Ba){return arguments.length?(ua=null==Ba?null:B(Ba),oa):ua};oa.size=function(Ba){return arguments.length?(ya=+Ba[0],ja=+Ba[1],oa):[ya,ja]};oa.padding=function(Ba){return arguments.length?
(za="function"===typeof Ba?Ba:J(+Ba),oa):za};return oa};q.packEnclose=p;q.packSiblings=function(oa){u(oa);return oa};q.partition=function(){function oa(Ma){var Oa=Ma.height+1;Ma.x0=Ma.y0=za;Ma.x1=ya;Ma.y1=ja/Oa;Ma.eachBefore(ua(ja,Oa));Ba&&Ma.eachBefore(Q);return Ma}function ua(Ma,Oa){return function(Ia){Ia.children&&S(Ia,Ia.x0,Ma*(Ia.depth+1)/Oa,Ia.x1,Ma*(Ia.depth+2)/Oa);var Pa=Ia.x0,Fa=Ia.y0,Na=Ia.x1-za,$a=Ia.y1-za;Na<Pa&&(Pa=Na=(Pa+Na)/2);$a<Fa&&(Fa=$a=(Fa+$a)/2);Ia.x0=Pa;Ia.y0=Fa;Ia.x1=Na;Ia.y1=
$a}}var ya=1,ja=1,za=0,Ba=!1;oa.round=function(Ma){return arguments.length?(Ba=!!Ma,oa):Ba};oa.size=function(Ma){return arguments.length?(ya=+Ma[0],ja=+Ma[1],oa):[ya,ja]};oa.padding=function(Ma){return arguments.length?(za=+Ma,oa):za};return oa};q.stratify=function(){function oa(ja){var za,Ba=ja.length,Ma=Array(Ba),Oa,Ia={};for(za=0;za<Ba;++za){var Pa=ja[za];var Fa=Ma[za]=new d(Pa);null!=(Oa=ua(Pa,za,ja))&&(Oa+="")&&(Pa="$"+(Fa.id=Oa),Ia[Pa]=Pa in Ia?ma:Fa)}for(za=0;za<Ba;++za)if(Fa=Ma[za],Oa=ya(ja[za],
za,ja),null!=Oa&&(Oa+="")){Pa=Ia["$"+Oa];if(!Pa)throw Error("missing: "+Oa);if(Pa===ma)throw Error("ambiguous: "+Oa);Pa.children?Pa.children.push(Fa):Pa.children=[Fa];Fa.parent=Pa}else{if(Na)throw Error("multiple roots");var Na=Fa}if(!Na)throw Error("no root");Na.parent=sa;Na.eachBefore(function($a){$a.depth=$a.parent.depth+1;--Ba}).eachBefore(g);Na.parent=null;if(0<Ba)throw Error("cycle");return Na}var ua=R,ya=O;oa.id=function(ja){return arguments.length?(ua=B(ja),oa):ua};oa.parentId=function(ja){return arguments.length?
(ya=B(ja),oa):ya};return oa};q.tree=function(){function oa(Ia){var Pa=aa(Ia);Pa.eachAfter(ua);Pa.parent.m=-Pa.z;Pa.eachBefore(ya);if(Oa)Ia.eachBefore(ja);else{var Fa=Ia,Na=Ia,$a=Ia;Ia.eachBefore(function(Ua){Ua.x<Fa.x&&(Fa=Ua);Ua.x>Na.x&&(Na=Ua);Ua.depth>$a.depth&&($a=Ua)});Pa=Fa===Na?1:za(Fa,Na)/2;var cb=Pa-Fa.x,mb=Ba/(Na.x+Pa+cb),Ka=Ma/($a.depth||1);Ia.eachBefore(function(Ua){Ua.x=(Ua.x+cb)*mb;Ua.y=Ua.depth*Ka})}return Ia}function ua(Ia){var Pa=Ia.children,Fa=Ia.parent.children,Na=Ia.i?Fa[Ia.i-
1]:null;if(Pa){for(var $a=0,cb=0,mb=Ia.children,Ka=mb.length,Ua;0<=--Ka;)Ua=mb[Ka],Ua.z+=$a,Ua.m+=$a,$a+=Ua.s+(cb+=Ua.c);Pa=(Pa[0].z+Pa[Pa.length-1].z)/2;Na?(Ia.z=Na.z+za(Ia._,Na._),Ia.m=Ia.z-Pa):Ia.z=Pa}else Na&&(Ia.z=Na.z+za(Ia._,Na._));Pa=Ia.parent;Fa=Ia.parent.A||Fa[0];if(Na){cb=$a=Ia;mb=$a.parent.children[0];Ka=$a.m;Ua=cb.m;for(var Ea=Na.m,Ya=mb.m,ab;Na=X(Na),$a=V($a),Na&&$a;){mb=V(mb);cb=X(cb);cb.a=Ia;ab=Na.z+Ea-$a.z-Ka+za(Na._,$a._);if(0<ab){var Wa=Na.a.parent===Ia.parent?Na.a:Fa,Ja=Ia,Sa=
ab,fb=Sa/(Ja.i-Wa.i);Ja.c-=fb;Ja.s+=Sa;Wa.c+=fb;Ja.z+=Sa;Ja.m+=Sa;Ka+=ab;Ua+=ab}Ea+=Na.m;Ka+=$a.m;Ya+=mb.m;Ua+=cb.m}Na&&!X(cb)&&(cb.t=Na,cb.m+=Ea-Ua);$a&&!V(mb)&&(mb.t=$a,mb.m+=Ka-Ya,Fa=Ia)}Pa.A=Fa}function ya(Ia){Ia._.x=Ia.z+Ia.parent.m;Ia.m+=Ia.parent.m}function ja(Ia){Ia.x*=Ba;Ia.y=Ia.depth*Ma}var za=T,Ba=1,Ma=1,Oa=null;oa.separation=function(Ia){return arguments.length?(za=Ia,oa):za};oa.size=function(Ia){return arguments.length?(Oa=!1,Ba=+Ia[0],Ma=+Ia[1],oa):Oa?null:[Ba,Ma]};oa.nodeSize=function(Ia){return arguments.length?
(Oa=!0,Ba=+Ia[0],Ma=+Ia[1],oa):Oa?[Ba,Ma]:null};return oa};q.treemap=function(){function oa($a){$a.x0=$a.y0=0;$a.x1=za;$a.y1=Ba;$a.eachBefore(ua);Ma=[0];ja&&$a.eachBefore(Q);return $a}function ua($a){var cb=Ma[$a.depth],mb=$a.x0+cb,Ka=$a.y0+cb,Ua=$a.x1-cb,Ea=$a.y1-cb;Ua<mb&&(mb=Ua=(mb+Ua)/2);Ea<Ka&&(Ka=Ea=(Ka+Ea)/2);$a.x0=mb;$a.y0=Ka;$a.x1=Ua;$a.y1=Ea;$a.children&&(cb=Ma[$a.depth+1]=Oa($a)/2,mb+=Na($a)-cb,Ka+=Ia($a)-cb,Ua-=Pa($a)-cb,Ea-=Fa($a)-cb,Ua<mb&&(mb=Ua=(mb+Ua)/2),Ea<Ka&&(Ka=Ea=(Ka+Ea)/2),
ya($a,mb,Ka,Ua,Ea))}var ya=qa,ja=!1,za=1,Ba=1,Ma=[0],Oa=I,Ia=I,Pa=I,Fa=I,Na=I;oa.round=function($a){return arguments.length?(ja=!!$a,oa):ja};oa.size=function($a){return arguments.length?(za=+$a[0],Ba=+$a[1],oa):[za,Ba]};oa.tile=function($a){return arguments.length?(ya=B($a),oa):ya};oa.padding=function($a){return arguments.length?oa.paddingInner($a).paddingOuter($a):oa.paddingInner()};oa.paddingInner=function($a){return arguments.length?(Oa="function"===typeof $a?$a:J(+$a),oa):Oa};oa.paddingOuter=
function($a){return arguments.length?oa.paddingTop($a).paddingRight($a).paddingBottom($a).paddingLeft($a):oa.paddingTop()};oa.paddingTop=function($a){return arguments.length?(Ia="function"===typeof $a?$a:J(+$a),oa):Ia};oa.paddingRight=function($a){return arguments.length?(Pa="function"===typeof $a?$a:J(+$a),oa):Pa};oa.paddingBottom=function($a){return arguments.length?(Fa="function"===typeof $a?$a:J(+$a),oa):Fa};oa.paddingLeft=function($a){return arguments.length?(Na="function"===typeof $a?$a:J(+$a),
oa):Na};return oa};q.treemapBinary=function(oa,ua,ya,ja,za){function Ba(Na,$a,cb,mb,Ka,Ua,Ea){if(Na>=$a-1)Na=Ma[Na],Na.x0=mb,Na.y0=Ka,Na.x1=Ua,Na.y1=Ea;else{for(var Ya=Fa[Na],ab=cb/2+Ya,Wa=Na+1,Ja=$a-1;Wa<Ja;){var Sa=Wa+Ja>>>1;Fa[Sa]<ab?Wa=Sa+1:Ja=Sa}ab-Fa[Wa-1]<Fa[Wa]-ab&&Na+1<Wa&&--Wa;Ya=Fa[Wa]-Ya;ab=cb-Ya;Ua-mb>Ea-Ka?(cb=(mb*ab+Ua*Ya)/cb,Ba(Na,Wa,Ya,mb,Ka,cb,Ea),Ba(Wa,$a,ab,cb,Ka,Ua,Ea)):(cb=(Ka*ab+Ea*Ya)/cb,Ba(Na,Wa,Ya,mb,Ka,Ua,cb),Ba(Wa,$a,ab,mb,cb,Ua,Ea))}}var Ma=oa.children,Oa,Ia=Ma.length,
Pa,Fa=Array(Ia+1);for(Fa[0]=Pa=Oa=0;Oa<Ia;++Oa)Fa[Oa+1]=Pa+=Ma[Oa].value;Ba(0,Ia,oa.value,ua,ya,ja,za)};q.treemapDice=S;q.treemapResquarify=ra;q.treemapSlice=ka;q.treemapSliceDice=function(oa,ua,ya,ja,za){(oa.depth&1?ka:S)(oa,ua,ya,ja,za)};q.treemapSquarify=qa;Object.defineProperty(q,"__esModule",{value:!0})})},{}],162:[function(a,G,C){(function(q,n){"object"===typeof C&&"undefined"!==typeof G?n(C,a("d3-color")):(q=q||self,n(q.d3=q.d3||{},q.d3))})(this,function(q,n){function m(oa,ua,ya,ja,za){var Ba=
oa*oa,Ma=Ba*oa;return((1-3*oa+3*Ba-Ma)*ua+(4-6*Ba+3*Ma)*ya+(1+3*oa+3*Ba-3*Ma)*ja+Ma*za)/6}function f(oa){var ua=oa.length-1;return function(ya){var ja=0>=ya?ya=0:1<=ya?(ya=1,ua-1):Math.floor(ya*ua),za=oa[ja],Ba=oa[ja+1];return m((ya-ja/ua)*ua,0<ja?oa[ja-1]:2*za-Ba,za,Ba,ja<ua-1?oa[ja+2]:2*Ba-za)}}function b(oa){var ua=oa.length;return function(ya){var ja=Math.floor((0>(ya%=1)?++ya:ya)*ua);return m((ya-ja/ua)*ua,oa[(ja+ua-1)%ua],oa[ja%ua],oa[(ja+1)%ua],oa[(ja+2)%ua])}}function k(oa){return function(){return oa}}
function e(oa,ua){return function(ya){return oa+ya*ua}}function h(oa,ua,ya){return oa=Math.pow(oa,ya),ua=Math.pow(ua,ya)-oa,ya=1/ya,function(ja){return Math.pow(oa+ja*ua,ya)}}function l(oa,ua){var ya=ua-oa;return ya?e(oa,180<ya||-180>ya?ya-360*Math.round(ya/360):ya):k(isNaN(oa)?ua:oa)}function c(oa){return 1===(oa=+oa)?g:function(ua,ya){return ya-ua?h(ua,ya,oa):k(isNaN(ua)?ya:ua)}}function g(oa,ua){var ya=ua-oa;return ya?e(oa,ya):k(isNaN(oa)?ua:oa)}function d(oa){return function(ua){var ya=ua.length,
ja=Array(ya),za=Array(ya),Ba=Array(ya),Ma;for(Ma=0;Ma<ya;++Ma){var Oa=n.rgb(ua[Ma]);ja[Ma]=Oa.r||0;za[Ma]=Oa.g||0;Ba[Ma]=Oa.b||0}ja=oa(ja);za=oa(za);Ba=oa(Ba);Oa.opacity=1;return function(Ia){Oa.r=ja(Ia);Oa.g=za(Ia);Oa.b=Ba(Ia);return Oa+""}}}function p(oa,ua){ua||(ua=[]);var ya=oa?Math.min(ua.length,oa.length):0,ja=ua.slice(),za;return function(Ba){for(za=0;za<ya;++za)ja[za]=oa[za]*(1-Ba)+ua[za]*Ba;return ja}}function r(oa){return ArrayBuffer.isView(oa)&&!(oa instanceof DataView)}function t(oa,ua){var ya=
ua?ua.length:0,ja=oa?Math.min(ya,oa.length):0,za=Array(ja),Ba=Array(ya),Ma;for(Ma=0;Ma<ja;++Ma)za[Ma]=D(oa[Ma],ua[Ma]);for(;Ma<ya;++Ma)Ba[Ma]=ua[Ma];return function(Oa){for(Ma=0;Ma<ja;++Ma)Ba[Ma]=za[Ma](Oa);return Ba}}function w(oa,ua){var ya=new Date;return oa=+oa,ua=+ua,function(ja){return ya.setTime(oa*(1-ja)+ua*ja),ya}}function x(oa,ua){return oa=+oa,ua=+ua,function(ya){return oa*(1-ya)+ua*ya}}function y(oa,ua){var ya={},ja={},za;if(null===oa||"object"!==typeof oa)oa={};if(null===ua||"object"!==
typeof ua)ua={};for(za in ua)za in oa?ya[za]=D(oa[za],ua[za]):ja[za]=ua[za];return function(Ba){for(za in ya)ja[za]=ya[za](Ba);return ja}}function A(oa){return function(){return oa}}function z(oa){return function(ua){return oa(ua)+""}}function F(oa,ua){var ya=S.lastIndex=R.lastIndex=0,ja,za,Ba,Ma=-1,Oa=[],Ia=[];oa+="";for(ua+="";(ja=S.exec(oa))&&(za=R.exec(ua));)(Ba=za.index)>ya&&(Ba=ua.slice(ya,Ba),Oa[Ma]?Oa[Ma]+=Ba:Oa[++Ma]=Ba),(ja=ja[0])===(za=za[0])?Oa[Ma]?Oa[Ma]+=za:Oa[++Ma]=za:(Oa[++Ma]=null,
Ia.push({i:Ma,x:x(ja,za)})),ya=R.lastIndex;ya<ua.length&&(Ba=ua.slice(ya),Oa[Ma]?Oa[Ma]+=Ba:Oa[++Ma]=Ba);return 2>Oa.length?Ia[0]?z(Ia[0].x):A(ua):(ua=Ia.length,function(Pa){for(var Fa=0,Na;Fa<ua;++Fa)Oa[(Na=Ia[Fa]).i]=Na.x(Pa);return Oa.join("")})}function D(oa,ua){var ya=typeof ua,ja;return null==ua||"boolean"===ya?k(ua):("number"===ya?x:"string"===ya?(ja=n.color(ua))?(ua=ja,E):F:ua instanceof n.color?E:ua instanceof Date?w:r(ua)?p:Array.isArray(ua)?t:"function"!==typeof ua.valueOf&&"function"!==
typeof ua.toString||isNaN(ua)?y:x)(oa,ua)}function u(oa,ua,ya,ja,za,Ba){var Ma,Oa,Ia;if(Ma=Math.sqrt(oa*oa+ua*ua))oa/=Ma,ua/=Ma;if(Ia=oa*ya+ua*ja)ya-=oa*Ia,ja-=ua*Ia;if(Oa=Math.sqrt(ya*ya+ja*ja))ya/=Oa,ja/=Oa,Ia/=Oa;oa*ja<ua*ya&&(oa=-oa,ua=-ua,Ia=-Ia,Ma=-Ma);return{translateX:za,translateY:Ba,rotate:Math.atan2(ua,oa)*O,skewX:Math.atan(Ia)*O,scaleX:Ma,scaleY:Oa}}function B(oa,ua,ya,ja){function za(Pa){return Pa.length?Pa.pop()+" ":""}function Ba(Pa,Fa,Na,$a,cb,mb){Pa!==Na||Fa!==$a?(cb=cb.push("translate(",
null,ua,null,ya),mb.push({i:cb-4,x:x(Pa,Na)},{i:cb-2,x:x(Fa,$a)})):(Na||$a)&&cb.push("translate("+Na+ua+$a+ya)}function Ma(Pa,Fa,Na,$a){Pa!==Fa?(180<Pa-Fa?Fa+=360:180<Fa-Pa&&(Pa+=360),$a.push({i:Na.push(za(Na)+"rotate(",null,ja)-2,x:x(Pa,Fa)})):Fa&&Na.push(za(Na)+"rotate("+Fa+ja)}function Oa(Pa,Fa,Na,$a){Pa!==Fa?$a.push({i:Na.push(za(Na)+"skewX(",null,ja)-2,x:x(Pa,Fa)}):Fa&&Na.push(za(Na)+"skewX("+Fa+ja)}function Ia(Pa,Fa,Na,$a,cb,mb){Pa!==Na||Fa!==$a?(cb=cb.push(za(cb)+"scale(",null,",",null,")"),
mb.push({i:cb-4,x:x(Pa,Na)},{i:cb-2,x:x(Fa,$a)})):1===Na&&1===$a||cb.push(za(cb)+"scale("+Na+","+$a+")")}return function(Pa,Fa){var Na=[],$a=[];Pa=oa(Pa);Fa=oa(Fa);Ba(Pa.translateX,Pa.translateY,Fa.translateX,Fa.translateY,Na,$a);Ma(Pa.rotate,Fa.rotate,Na,$a);Oa(Pa.skewX,Fa.skewX,Na,$a);Ia(Pa.scaleX,Pa.scaleY,Fa.scaleX,Fa.scaleY,Na,$a);Pa=Fa=null;return function(cb){for(var mb=-1,Ka=$a.length,Ua;++mb<Ka;)Na[(Ua=$a[mb]).i]=Ua.x(cb);return Na.join("")}}}function I(oa){return((oa=Math.exp(oa))+1/oa)/
2}function J(oa){return function(ua,ya){var ja=oa((ua=n.hsl(ua)).h,(ya=n.hsl(ya)).h),za=g(ua.s,ya.s),Ba=g(ua.l,ya.l),Ma=g(ua.opacity,ya.opacity);return function(Oa){ua.h=ja(Oa);ua.s=za(Oa);ua.l=Ba(Oa);ua.opacity=Ma(Oa);return ua+""}}}function N(oa){return function(ua,ya){var ja=oa((ua=n.hcl(ua)).h,(ya=n.hcl(ya)).h),za=g(ua.c,ya.c),Ba=g(ua.l,ya.l),Ma=g(ua.opacity,ya.opacity);return function(Oa){ua.h=ja(Oa);ua.c=za(Oa);ua.l=Ba(Oa);ua.opacity=Ma(Oa);return ua+""}}}function M(oa){return function ja(ya){function za(Ba,
Ma){var Oa=oa((Ba=n.cubehelix(Ba)).h,(Ma=n.cubehelix(Ma)).h),Ia=g(Ba.s,Ma.s),Pa=g(Ba.l,Ma.l),Fa=g(Ba.opacity,Ma.opacity);return function(Na){Ba.h=Oa(Na);Ba.s=Ia(Na);Ba.l=Pa(Math.pow(Na,ya));Ba.opacity=Fa(Na);return Ba+""}}ya=+ya;za.gamma=ja;return za}(1)}var E=function ya(ua){function ja(Ba,Ma){var Oa=za((Ba=n.rgb(Ba)).r,(Ma=n.rgb(Ma)).r),Ia=za(Ba.g,Ma.g),Pa=za(Ba.b,Ma.b),Fa=g(Ba.opacity,Ma.opacity);return function(Na){Ba.r=Oa(Na);Ba.g=Ia(Na);Ba.b=Pa(Na);Ba.opacity=Fa(Na);return Ba+""}}var za=c(ua);
ja.gamma=ya;return ja}(1),L=d(f),Q=d(b),S=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,R=new RegExp(S.source,"g"),O=180/Math.PI,T={translateX:0,translateY:0,rotate:0,skewX:0,scaleX:1,scaleY:1},V,X,ba,aa,ka=B(function(ua){if("none"===ua)return T;V||(V=document.createElement("DIV"),X=document.documentElement,ba=document.defaultView);V.style.transform=ua;ua=ba.getComputedStyle(X.appendChild(V),null).getPropertyValue("transform");X.removeChild(V);ua=ua.slice(7,-1).split(",");return u(+ua[0],+ua[1],+ua[2],
+ua[3],+ua[4],+ua[5])},"px, ","px)","deg)"),ha=B(function(ua){if(null==ua)return T;aa||(aa=document.createElementNS("http://www.w3.org/2000/svg","g"));aa.setAttribute("transform",ua);if(!(ua=aa.transform.baseVal.consolidate()))return T;ua=ua.matrix;return u(ua.a,ua.b,ua.c,ua.d,ua.e,ua.f)},", ",")",")"),ca=Math.SQRT2,sa=J(l),ma=J(g),ra=N(l),qa=N(g),Y=M(l),pa=M(g);q.interpolate=D;q.interpolateArray=function(ua,ya){return(r(ya)?p:t)(ua,ya)};q.interpolateBasis=f;q.interpolateBasisClosed=b;q.interpolateCubehelix=
Y;q.interpolateCubehelixLong=pa;q.interpolateDate=w;q.interpolateDiscrete=function(ua){var ya=ua.length;return function(ja){return ua[Math.max(0,Math.min(ya-1,Math.floor(ja*ya)))]}};q.interpolateHcl=ra;q.interpolateHclLong=qa;q.interpolateHsl=sa;q.interpolateHslLong=ma;q.interpolateHue=function(ua,ya){var ja=l(+ua,+ya);return function(za){za=ja(za);return za-360*Math.floor(za/360)}};q.interpolateLab=function(ua,ya){var ja=g((ua=n.lab(ua)).l,(ya=n.lab(ya)).l),za=g(ua.a,ya.a),Ba=g(ua.b,ya.b),Ma=g(ua.opacity,
ya.opacity);return function(Oa){ua.l=ja(Oa);ua.a=za(Oa);ua.b=Ba(Oa);ua.opacity=Ma(Oa);return ua+""}};q.interpolateNumber=x;q.interpolateNumberArray=p;q.interpolateObject=y;q.interpolateRgb=E;q.interpolateRgbBasis=L;q.interpolateRgbBasisClosed=Q;q.interpolateRound=function(ua,ya){return ua=+ua,ya=+ya,function(ja){return Math.round(ua*(1-ja)+ya*ja)}};q.interpolateString=F;q.interpolateTransformCss=ka;q.interpolateTransformSvg=ha;q.interpolateZoom=function(ua,ya){var ja=ua[0],za=ua[1],Ba=ua[2];ua=ya[2];
var Ma=ya[0]-ja,Oa=ya[1]-za,Ia=Ma*Ma+Oa*Oa;if(1E-12>Ia){var Pa=Math.log(ua/Ba)/ca;ua=function($a){return[ja+$a*Ma,za+$a*Oa,Ba*Math.exp(ca*$a*Pa)]}}else{var Fa=Math.sqrt(Ia);ya=(ua*ua-Ba*Ba+4*Ia)/(4*Ba*Fa);ua=(ua*ua-Ba*Ba-4*Ia)/(4*ua*Fa);var Na=Math.log(Math.sqrt(ya*ya+1)-ya);Pa=(Math.log(Math.sqrt(ua*ua+1)-ua)-Na)/ca;ua=function($a){$a*=Pa;var cb=I(Na),mb=ca*$a+Na;var Ka=((mb=Math.exp(2*mb))-1)/(mb+1);var Ua=Na;mb=((Ua=Math.exp(Ua))-1/Ua)/2;Ka=Ba/(2*Fa)*(cb*Ka-mb);return[ja+Ka*Ma,za+Ka*Oa,Ba*cb/I(ca*
$a+Na)]}}ua.duration=1E3*Pa;return ua};q.piecewise=function(ua,ya){for(var ja=0,za=ya.length-1,Ba=ya[0],Ma=Array(0>za?0:za);ja<za;)Ma[ja]=ua(Ba,Ba=ya[++ja]);return function(Oa){var Ia=Math.max(0,Math.min(za-1,Math.floor(Oa*=za)));return Ma[Ia](Oa-Ia)}};q.quantize=function(ua,ya){for(var ja=Array(ya),za=0;za<ya;++za)ja[za]=ua(za/(ya-1));return ja};Object.defineProperty(q,"__esModule",{value:!0})})},{"d3-color":158}],163:[function(a,G,C){(function(q,n){"object"===typeof C&&"undefined"!==typeof G?n(C):
(q=q||self,n(q.d3=q.d3||{}))})(this,function(q){function n(){this._x0=this._y0=this._x1=this._y1=null;this._=""}function m(){return new n}var f=Math.PI,b=2*f,k=b-1E-6;n.prototype=m.prototype={constructor:n,moveTo:function(e,h){this._+="M"+(this._x0=this._x1=+e)+","+(this._y0=this._y1=+h)},closePath:function(){null!==this._x1&&(this._x1=this._x0,this._y1=this._y0,this._+="Z")},lineTo:function(e,h){this._+="L"+(this._x1=+e)+","+(this._y1=+h)},quadraticCurveTo:function(e,h,l,c){this._+="Q"+ +e+","+ +h+
","+(this._x1=+l)+","+(this._y1=+c)},bezierCurveTo:function(e,h,l,c,g,d){this._+="C"+ +e+","+ +h+","+ +l+","+ +c+","+(this._x1=+g)+","+(this._y1=+d)},arcTo:function(e,h,l,c,g){e=+e;h=+h;l=+l;c=+c;g=+g;var d=this._x1,p=this._y1,r=l-e,t=c-h,w=d-e,x=p-h,y=w*w+x*x;if(0>g)throw Error("negative radius: "+g);if(null===this._x1)this._+="M"+(this._x1=e)+","+(this._y1=h);else if(1E-6<y)if(1E-6<Math.abs(x*r-t*w)&&g){l-=d;c-=p;var A=r*r+t*t;p=Math.sqrt(A);d=Math.sqrt(y);y=g*Math.tan((f-Math.acos((A+y-(l*l+c*
c))/(2*p*d)))/2);d=y/d;y/=p;1E-6<Math.abs(d-1)&&(this._+="L"+(e+d*w)+","+(h+d*x));this._+="A"+g+","+g+",0,0,"+ +(x*l>w*c)+","+(this._x1=e+y*r)+","+(this._y1=h+y*t)}else this._+="L"+(this._x1=e)+","+(this._y1=h)},arc:function(e,h,l,c,g,d){e=+e;h=+h;l=+l;d=!!d;var p=l*Math.cos(c),r=l*Math.sin(c),t=e+p,w=h+r,x=1^d;c=d?c-g:g-c;if(0>l)throw Error("negative radius: "+l);if(null===this._x1)this._+="M"+t+","+w;else if(1E-6<Math.abs(this._x1-t)||1E-6<Math.abs(this._y1-w))this._+="L"+t+","+w;l&&(0>c&&(c=c%
b+b),c>k?this._+="A"+l+","+l+",0,1,"+x+","+(e-p)+","+(h-r)+"A"+l+","+l+",0,1,"+x+","+(this._x1=t)+","+(this._y1=w):1E-6<c&&(this._+="A"+l+","+l+",0,"+ +(c>=f)+","+x+","+(this._x1=e+l*Math.cos(g))+","+(this._y1=h+l*Math.sin(g))))},rect:function(e,h,l,c){this._+="M"+(this._x0=this._x1=+e)+","+(this._y0=this._y1=+h)+"h"+ +l+"v"+ +c+"h"+-l+"Z"},toString:function(){return this._}};q.path=m;Object.defineProperty(q,"__esModule",{value:!0})})},{}],164:[function(a,G,C){(function(q,n){"object"===typeof C&&
"undefined"!==typeof G?n(C):(q=q||self,n(q.d3=q.d3||{}))})(this,function(q){function n(c,g,d,p){if(isNaN(g)||isNaN(d))return c;var r,t=c._root;p={data:p};var w=c._x0,x=c._y0,y=c._x1,A=c._y1,z,F,D,u;if(!t)return c._root=p,c;for(;t.length;)if((D=g>=(z=(w+y)/2))?w=z:y=z,(u=d>=(F=(x+A)/2))?x=F:A=F,r=t,!(t=t[D|=u<<1]))return r[D]=p,c;var B=+c._x.call(null,t.data);var I=+c._y.call(null,t.data);if(g===B&&d===I)return p.next=t,r?r[D]=p:c._root=p,c;do r=r?r[D]=Array(4):c._root=Array(4),(D=g>=(z=(w+y)/2))?
w=z:y=z,(u=d>=(F=(x+A)/2))?x=F:A=F;while((D|=u<<1)===(u=(I>=F)<<1|B>=z));return r[u]=t,r[D]=p,c}function m(c,g,d,p,r){this.node=c;this.x0=g;this.y0=d;this.x1=p;this.y1=r}function f(c){return c[0]}function b(c){return c[1]}function k(c,g,d){g=new e(null==g?f:g,null==d?b:d,NaN,NaN,NaN,NaN);return null==c?g:g.addAll(c)}function e(c,g,d,p,r,t){this._x=c;this._y=g;this._x0=d;this._y0=p;this._x1=r;this._y1=t;this._root=void 0}function h(c){for(var g={data:c.data},d=g;c=c.next;)d=d.next={data:c.data};return g}
var l=k.prototype=e.prototype;l.copy=function(){var c=new e(this._x,this._y,this._x0,this._y0,this._x1,this._y1),g=this._root,d,p;if(!g)return c;if(!g.length)return c._root=h(g),c;for(d=[{source:g,target:c._root=Array(4)}];g=d.pop();)for(var r=0;4>r;++r)if(p=g.source[r])p.length?d.push({source:p,target:g.target[r]=Array(4)}):g.target[r]=h(p);return c};l.add=function(c){var g=+this._x.call(null,c),d=+this._y.call(null,c);return n(this.cover(g,d),g,d,c)};l.addAll=function(c){var g,d,p=c.length,r,t,
w=Array(p),x=Array(p),y=Infinity,A=Infinity,z=-Infinity,F=-Infinity;for(d=0;d<p;++d)isNaN(r=+this._x.call(null,g=c[d]))||isNaN(t=+this._y.call(null,g))||(w[d]=r,x[d]=t,r<y&&(y=r),r>z&&(z=r),t<A&&(A=t),t>F&&(F=t));if(y>z||A>F)return this;this.cover(y,A).cover(z,F);for(d=0;d<p;++d)n(this,w[d],x[d],c[d]);return this};l.cover=function(c,g){if(isNaN(c=+c)||isNaN(g=+g))return this;var d=this._x0,p=this._y0,r=this._x1,t=this._y1;if(isNaN(d))r=(d=Math.floor(c))+1,t=(p=Math.floor(g))+1;else{for(var w=r-d,
x=this._root,y,A;d>c||c>=r||p>g||g>=t;)switch(A=(g<p)<<1|c<d,y=Array(4),y[A]=x,x=y,w*=2,A){case 0:r=d+w;t=p+w;break;case 1:d=r-w;t=p+w;break;case 2:r=d+w;p=t-w;break;case 3:d=r-w,p=t-w}this._root&&this._root.length&&(this._root=x)}this._x0=d;this._y0=p;this._x1=r;this._y1=t;return this};l.data=function(){var c=[];this.visit(function(g){if(!g.length){do c.push(g.data);while(g=g.next)}});return c};l.extent=function(c){return arguments.length?this.cover(+c[0][0],+c[0][1]).cover(+c[1][0],+c[1][1]):isNaN(this._x0)?
void 0:[[this._x0,this._y0],[this._x1,this._y1]]};l.find=function(c,g,d){var p=this._x0,r=this._y0,t,w,x,y,A=this._x1,z=this._y1,F=[],D=this._root,u;D&&F.push(new m(D,p,r,A,z));null==d?d=Infinity:(p=c-d,r=g-d,A=c+d,z=g+d,d*=d);for(;u=F.pop();)if(!(!(D=u.node)||(t=u.x0)>A||(w=u.y0)>z||(x=u.x1)<p||(y=u.y1)<r))if(D.length){u=(t+x)/2;var B=(w+y)/2;F.push(new m(D[3],u,B,x,y),new m(D[2],t,B,u,y),new m(D[1],u,w,x,B),new m(D[0],t,w,u,B));if(D=(g>=B)<<1|c>=u)u=F[F.length-1],F[F.length-1]=F[F.length-1-D],F[F.length-
1-D]=u}else if(u=c-+this._x.call(null,D.data),B=g-+this._y.call(null,D.data),u=u*u+B*B,u<d){var I=Math.sqrt(d=u);p=c-I;r=g-I;A=c+I;z=g+I;I=D.data}return I};l.remove=function(c){if(isNaN(y=+this._x.call(null,c))||isNaN(A=+this._y.call(null,c)))return this;var g,d=this._root,p,r=this._x0,t=this._y0,w=this._x1,x=this._y1,y,A,z,F,D,u;if(!d)return this;if(d.length)for(;;){(D=y>=(z=(r+w)/2))?r=z:w=z;(u=A>=(F=(t+x)/2))?t=F:x=F;if(!(g=d,d=d[D|=u<<1]))return this;if(!d.length)break;if(g[D+1&3]||g[D+2&3]||
g[D+3&3]){var B=g;var I=D}}for(;d.data!==c;)if(!(p=d,d=d.next))return this;(c=d.next)&&delete d.next;if(p)return c?p.next=c:delete p.next,this;if(!g)return this._root=c,this;c?g[D]=c:delete g[D];(d=g[0]||g[1]||g[2]||g[3])&&d===(g[3]||g[2]||g[1]||g[0])&&!d.length&&(B?B[I]=d:this._root=d);return this};l.removeAll=function(c){for(var g=0,d=c.length;g<d;++g)this.remove(c[g]);return this};l.root=function(){return this._root};l.size=function(){var c=0;this.visit(function(g){if(!g.length){do++c;while(g=
g.next)}});return c};l.visit=function(c){var g=[],d,p=this._root,r,t,w,x;for(p&&g.push(new m(p,this._x0,this._y0,this._x1,this._y1));d=g.pop();)if(!c(p=d.node,t=d.x0,w=d.y0,x=d.x1,d=d.y1)&&p.length){var y=(t+x)/2,A=(w+d)/2;(r=p[3])&&g.push(new m(r,y,A,x,d));(r=p[2])&&g.push(new m(r,t,A,y,d));(r=p[1])&&g.push(new m(r,y,w,x,A));(r=p[0])&&g.push(new m(r,t,w,y,A))}return this};l.visitAfter=function(c){var g=[],d=[],p;for(this._root&&g.push(new m(this._root,this._x0,this._y0,this._x1,this._y1));p=g.pop();){var r=
p.node;if(r.length){var t,w=p.x0,x=p.y0,y=p.x1,A=p.y1,z=(w+y)/2,F=(x+A)/2;(t=r[0])&&g.push(new m(t,w,x,z,F));(t=r[1])&&g.push(new m(t,z,x,y,F));(t=r[2])&&g.push(new m(t,w,F,z,A));(t=r[3])&&g.push(new m(t,z,F,y,A))}d.push(p)}for(;p=d.pop();)c(p.node,p.x0,p.y0,p.x1,p.y1);return this};l.x=function(c){return arguments.length?(this._x=c,this):this._x};l.y=function(c){return arguments.length?(this._y=c,this):this._y};q.quadtree=k;Object.defineProperty(q,"__esModule",{value:!0})})},{}],165:[function(a,G,
C){(function(q,n){"object"===typeof C&&"undefined"!==typeof G?n(C,a("d3-path")):(q=q||self,n(q.d3=q.d3||{},q.d3))})(this,function(q,n){function m(lb){return function(){return lb}}function f(lb){return 1<=lb?Ja:-1>=lb?-Ja:Math.asin(lb)}function b(lb){return lb.innerRadius}function k(lb){return lb.outerRadius}function e(lb){return lb.startAngle}function h(lb){return lb.endAngle}function l(lb){return lb&&lb.padAngle}function c(lb,vb,Ub,Sb,Ab,Eb,Fb){var xb=lb-Ub,Jb=vb-Sb;Fb=(Fb?Eb:-Eb)/ab(xb*xb+Jb*Jb);
Jb*=Fb;xb*=-Fb;var tb=lb+Jb,Lb=vb+xb,Ib=Ub+Jb,lc=Sb+xb;Ub=(tb+Ib)/2;Sb=(Lb+lc)/2;vb=Ib-tb;lb=lc-Lb;Fb=vb*vb+lb*lb;Eb=Ab-Eb;lc=tb*lc-Ib*Lb;var $b=(0>lb?-1:1)*ab(Ua(0,Eb*Eb*Fb-lc*lc));tb=(lc*lb-vb*$b)/Fb;Lb=(-lc*vb-lb*$b)/Fb;Ib=(lc*lb+vb*$b)/Fb;vb=(-lc*vb+lb*$b)/Fb;lb=tb-Ub;Fb=Lb-Sb;Ub=Ib-Ub;Sb=vb-Sb;lb*lb+Fb*Fb>Ub*Ub+Sb*Sb&&(tb=Ib,Lb=vb);return{cx:tb,cy:Lb,x01:-Jb,y01:-xb,x11:tb*(Ab/Eb-1),y11:Lb*(Ab/Eb-1)}}function g(lb){this._context=lb}function d(lb){return new g(lb)}function p(lb){return lb[0]}
function r(lb){return lb[1]}function t(){function lb(xb){var Jb,tb=xb.length,Lb,Ib=!1,lc;null==Ab&&(Fb=Eb(lc=n.path()));for(Jb=0;Jb<=tb;++Jb)!(Jb<tb&&Sb(Lb=xb[Jb],Jb,xb))===Ib&&((Ib=!Ib)?Fb.lineStart():Fb.lineEnd()),Ib&&Fb.point(+vb(Lb,Jb,xb),+Ub(Lb,Jb,xb));if(lc)return Fb=null,lc+""||null}var vb=p,Ub=r,Sb=m(!0),Ab=null,Eb=d,Fb=null;lb.x=function(xb){return arguments.length?(vb="function"===typeof xb?xb:m(+xb),lb):vb};lb.y=function(xb){return arguments.length?(Ub="function"===typeof xb?xb:m(+xb),
lb):Ub};lb.defined=function(xb){return arguments.length?(Sb="function"===typeof xb?xb:m(!!xb),lb):Sb};lb.curve=function(xb){return arguments.length?(Eb=xb,null!=Ab&&(Fb=Eb(Ab)),lb):Eb};lb.context=function(xb){return arguments.length?(null==xb?Ab=Fb=null:Fb=Eb(Ab=xb),lb):Ab};return lb}function w(){function lb(Lb){var Ib,lc,$b=Lb.length,nc,xc=!1,Bc,Rc=Array($b),pd=Array($b);null==xb&&(tb=Jb(Bc=n.path()));for(Ib=0;Ib<=$b;++Ib){if(!(Ib<$b&&Fb(nc=Lb[Ib],Ib,Lb))===xc)if(xc=!xc){var Vc=Ib;tb.areaStart();
tb.lineStart()}else{tb.lineEnd();tb.lineStart();for(lc=Ib-1;lc>=Vc;--lc)tb.point(Rc[lc],pd[lc]);tb.lineEnd();tb.areaEnd()}xc&&(Rc[Ib]=+Ub(nc,Ib,Lb),pd[Ib]=+Ab(nc,Ib,Lb),tb.point(Sb?+Sb(nc,Ib,Lb):Rc[Ib],Eb?+Eb(nc,Ib,Lb):pd[Ib]))}if(Bc)return tb=null,Bc+""||null}function vb(){return t().defined(Fb).curve(Jb).context(xb)}var Ub=p,Sb=null,Ab=m(0),Eb=r,Fb=m(!0),xb=null,Jb=d,tb=null;lb.x=function(Lb){return arguments.length?(Ub="function"===typeof Lb?Lb:m(+Lb),Sb=null,lb):Ub};lb.x0=function(Lb){return arguments.length?
(Ub="function"===typeof Lb?Lb:m(+Lb),lb):Ub};lb.x1=function(Lb){return arguments.length?(Sb=null==Lb?null:"function"===typeof Lb?Lb:m(+Lb),lb):Sb};lb.y=function(Lb){return arguments.length?(Ab="function"===typeof Lb?Lb:m(+Lb),Eb=null,lb):Ab};lb.y0=function(Lb){return arguments.length?(Ab="function"===typeof Lb?Lb:m(+Lb),lb):Ab};lb.y1=function(Lb){return arguments.length?(Eb=null==Lb?null:"function"===typeof Lb?Lb:m(+Lb),lb):Eb};lb.lineX0=lb.lineY0=function(){return vb().x(Ub).y(Ab)};lb.lineY1=function(){return vb().x(Ub).y(Eb)};
lb.lineX1=function(){return vb().x(Sb).y(Ab)};lb.defined=function(Lb){return arguments.length?(Fb="function"===typeof Lb?Lb:m(!!Lb),lb):Fb};lb.curve=function(Lb){return arguments.length?(Jb=Lb,null!=xb&&(tb=Jb(xb)),lb):Jb};lb.context=function(Lb){return arguments.length?(null==Lb?xb=tb=null:tb=Jb(xb=Lb),lb):xb};return lb}function x(lb,vb){return vb<lb?-1:vb>lb?1:vb>=lb?0:NaN}function y(lb){return lb}function A(lb){this._curve=lb}function z(lb){function vb(Ub){return new A(lb(Ub))}vb._curve=lb;return vb}
function F(lb){var vb=lb.curve;lb.angle=lb.x;delete lb.x;lb.radius=lb.y;delete lb.y;lb.curve=function(Ub){return arguments.length?vb(z(Ub)):vb()._curve};return lb}function D(){return F(t().curve(fb))}function u(){var lb=w().curve(fb),vb=lb.curve,Ub=lb.lineX0,Sb=lb.lineX1,Ab=lb.lineY0,Eb=lb.lineY1;lb.angle=lb.x;delete lb.x;lb.startAngle=lb.x0;delete lb.x0;lb.endAngle=lb.x1;delete lb.x1;lb.radius=lb.y;delete lb.y;lb.innerRadius=lb.y0;delete lb.y0;lb.outerRadius=lb.y1;delete lb.y1;lb.lineStartAngle=
function(){return F(Ub())};delete lb.lineX0;lb.lineEndAngle=function(){return F(Sb())};delete lb.lineX1;lb.lineInnerRadius=function(){return F(Ab())};delete lb.lineY0;lb.lineOuterRadius=function(){return F(Eb())};delete lb.lineY1;lb.curve=function(Fb){return arguments.length?vb(z(Fb)):vb()._curve};return lb}function B(lb,vb){return[(vb=+vb)*Math.cos(lb-=Math.PI/2),vb*Math.sin(lb)]}function I(lb){return lb.source}function J(lb){return lb.target}function N(lb){function vb(){var xb,Jb=nb.call(arguments),
tb=Ub.apply(this,Jb),Lb=Sb.apply(this,Jb);Fb||(Fb=xb=n.path());lb(Fb,+Ab.apply(this,(Jb[0]=tb,Jb)),+Eb.apply(this,Jb),+Ab.apply(this,(Jb[0]=Lb,Jb)),+Eb.apply(this,Jb));if(xb)return Fb=null,xb+""||null}var Ub=I,Sb=J,Ab=p,Eb=r,Fb=null;vb.source=function(xb){return arguments.length?(Ub=xb,vb):Ub};vb.target=function(xb){return arguments.length?(Sb=xb,vb):Sb};vb.x=function(xb){return arguments.length?(Ab="function"===typeof xb?xb:m(+xb),vb):Ab};vb.y=function(xb){return arguments.length?(Eb="function"===
typeof xb?xb:m(+xb),vb):Eb};vb.context=function(xb){return arguments.length?(Fb=null==xb?null:xb,vb):Fb};return vb}function M(lb,vb,Ub,Sb,Ab){lb.moveTo(vb,Ub);lb.bezierCurveTo(vb=(vb+Sb)/2,Ub,vb,Ab,Sb,Ab)}function E(lb,vb,Ub,Sb,Ab){lb.moveTo(vb,Ub);lb.bezierCurveTo(vb,Ub=(Ub+Ab)/2,Sb,Ub,Sb,Ab)}function L(lb,vb,Ub,Sb,Ab){var Eb=B(vb,Ub);vb=B(vb,Ub=(Ub+Ab)/2);Ub=B(Sb,Ub);Sb=B(Sb,Ab);lb.moveTo(Eb[0],Eb[1]);lb.bezierCurveTo(vb[0],vb[1],Ub[0],Ub[1],Sb[0],Sb[1])}function Q(){}function S(lb,vb,Ub){lb._context.bezierCurveTo((2*
lb._x0+lb._x1)/3,(2*lb._y0+lb._y1)/3,(lb._x0+2*lb._x1)/3,(lb._y0+2*lb._y1)/3,(lb._x0+4*lb._x1+vb)/6,(lb._y0+4*lb._y1+Ub)/6)}function R(lb){this._context=lb}function O(lb){this._context=lb}function T(lb){this._context=lb}function V(lb,vb){this._basis=new R(lb);this._beta=vb}function X(lb,vb,Ub){lb._context.bezierCurveTo(lb._x1+lb._k*(lb._x2-lb._x0),lb._y1+lb._k*(lb._y2-lb._y0),lb._x2+lb._k*(lb._x1-vb),lb._y2+lb._k*(lb._y1-Ub),lb._x2,lb._y2)}function ba(lb,vb){this._context=lb;this._k=(1-vb)/6}function aa(lb,
vb){this._context=lb;this._k=(1-vb)/6}function ka(lb,vb){this._context=lb;this._k=(1-vb)/6}function ha(lb,vb,Ub){var Sb=lb._x1,Ab=lb._y1,Eb=lb._x2,Fb=lb._y2;if(1E-12<lb._l01_a){var xb=2*lb._l01_2a+3*lb._l01_a*lb._l12_a+lb._l12_2a,Jb=3*lb._l01_a*(lb._l01_a+lb._l12_a);Sb=(Sb*xb-lb._x0*lb._l12_2a+lb._x2*lb._l01_2a)/Jb;Ab=(Ab*xb-lb._y0*lb._l12_2a+lb._y2*lb._l01_2a)/Jb}1E-12<lb._l23_a&&(xb=2*lb._l23_2a+3*lb._l23_a*lb._l12_a+lb._l12_2a,Jb=3*lb._l23_a*(lb._l23_a+lb._l12_a),Eb=(Eb*xb+lb._x1*lb._l23_2a-vb*
lb._l12_2a)/Jb,Fb=(Fb*xb+lb._y1*lb._l23_2a-Ub*lb._l12_2a)/Jb);lb._context.bezierCurveTo(Sb,Ab,Eb,Fb,lb._x2,lb._y2)}function ca(lb,vb){this._context=lb;this._alpha=vb}function sa(lb,vb){this._context=lb;this._alpha=vb}function ma(lb,vb){this._context=lb;this._alpha=vb}function ra(lb){this._context=lb}function qa(lb,vb,Ub){var Sb=lb._x1-lb._x0;vb-=lb._x1;var Ab=(lb._y1-lb._y0)/(Sb||0>vb&&-0);lb=(Ub-lb._y1)/(vb||0>Sb&&-0);return((0>Ab?-1:1)+(0>lb?-1:1))*Math.min(Math.abs(Ab),Math.abs(lb),.5*Math.abs((Ab*
vb+lb*Sb)/(Sb+vb)))||0}function Y(lb,vb){var Ub=lb._x1-lb._x0;return Ub?(3*(lb._y1-lb._y0)/Ub-vb)/2:vb}function pa(lb,vb,Ub){var Sb=lb._x0,Ab=lb._x1,Eb=lb._y1,Fb=(Ab-Sb)/3;lb._context.bezierCurveTo(Sb+Fb,lb._y0+Fb*vb,Ab-Fb,Eb-Fb*Ub,Ab,Eb)}function oa(lb){this._context=lb}function ua(lb){this._context=new ya(lb)}function ya(lb){this._context=lb}function ja(lb){this._context=lb}function za(lb){var vb,Ub=lb.length-1,Sb=Array(Ub),Ab=Array(Ub),Eb=Array(Ub);Sb[0]=0;Ab[0]=2;Eb[0]=lb[0]+2*lb[1];for(vb=1;vb<
Ub-1;++vb)Sb[vb]=1,Ab[vb]=4,Eb[vb]=4*lb[vb]+2*lb[vb+1];Sb[Ub-1]=2;Ab[Ub-1]=7;Eb[Ub-1]=8*lb[Ub-1]+lb[Ub];for(vb=1;vb<Ub;++vb){var Fb=Sb[vb]/Ab[vb-1];Ab[vb]-=Fb;Eb[vb]-=Fb*Eb[vb-1]}Sb[Ub-1]=Eb[Ub-1]/Ab[Ub-1];for(vb=Ub-2;0<=vb;--vb)Sb[vb]=(Eb[vb]-Sb[vb+1])/Ab[vb];Ab[Ub-1]=(lb[Ub]+Sb[Ub-1])/2;for(vb=0;vb<Ub-1;++vb)Ab[vb]=2*lb[vb+1]-Sb[vb+1];return[Sb,Ab]}function Ba(lb,vb){this._context=lb;this._t=vb}function Ma(lb,vb){if(1<(Fb=lb.length))for(var Ub=1,Sb,Ab,Eb=lb[vb[0]],Fb,xb=Eb.length;Ub<Fb;++Ub)for(Ab=
Eb,Eb=lb[vb[Ub]],Sb=0;Sb<xb;++Sb)Eb[Sb][1]+=Eb[Sb][0]=isNaN(Ab[Sb][1])?Ab[Sb][0]:Ab[Sb][1]}function Oa(lb){lb=lb.length;for(var vb=Array(lb);0<=--lb;)vb[lb]=lb;return vb}function Ia(lb,vb){return lb[vb]}function Pa(lb){var vb=lb.map(Fa);return Oa(lb).sort(function(Ub,Sb){return vb[Ub]-vb[Sb]})}function Fa(lb){for(var vb=-1,Ub=0,Sb=lb.length,Ab,Eb=-Infinity;++vb<Sb;)(Ab=+lb[vb][1])>Eb&&(Eb=Ab,Ub=vb);return Ub}function Na(lb){var vb=lb.map($a);return Oa(lb).sort(function(Ub,Sb){return vb[Ub]-vb[Sb]})}
function $a(lb){for(var vb=0,Ub=-1,Sb=lb.length,Ab;++Ub<Sb;)if(Ab=+lb[Ub][1])vb+=Ab;return vb}var cb=Math.abs,mb=Math.atan2,Ka=Math.cos,Ua=Math.max,Ea=Math.min,Ya=Math.sin,ab=Math.sqrt,Wa=Math.PI,Ja=Wa/2,Sa=2*Wa;g.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){(this._line||0!==this._line&&1===this._point)&&this._context.closePath();this._line=1-this._line},point:function(lb,vb){lb=+lb;vb=+vb;switch(this._point){case 0:this._point=
1;this._line?this._context.lineTo(lb,vb):this._context.moveTo(lb,vb);break;case 1:this._point=2;default:this._context.lineTo(lb,vb)}}};var fb=z(d);A.prototype={areaStart:function(){this._curve.areaStart()},areaEnd:function(){this._curve.areaEnd()},lineStart:function(){this._curve.lineStart()},lineEnd:function(){this._curve.lineEnd()},point:function(lb,vb){this._curve.point(vb*Math.sin(lb),vb*-Math.cos(lb))}};var nb=Array.prototype.slice,Ha={draw:function(lb,vb){vb=Math.sqrt(vb/Wa);lb.moveTo(vb,0);
lb.arc(0,0,vb,0,Sa)}},Ca={draw:function(lb,vb){vb=Math.sqrt(vb/5)/2;lb.moveTo(-3*vb,-vb);lb.lineTo(-vb,-vb);lb.lineTo(-vb,-3*vb);lb.lineTo(vb,-3*vb);lb.lineTo(vb,-vb);lb.lineTo(3*vb,-vb);lb.lineTo(3*vb,vb);lb.lineTo(vb,vb);lb.lineTo(vb,3*vb);lb.lineTo(-vb,3*vb);lb.lineTo(-vb,vb);lb.lineTo(-3*vb,vb);lb.closePath()}},Qa=Math.sqrt(1/3),gb=2*Qa,Va={draw:function(lb,vb){vb=Math.sqrt(vb/gb);var Ub=vb*Qa;lb.moveTo(0,-vb);lb.lineTo(Ub,0);lb.lineTo(0,vb);lb.lineTo(-Ub,0);lb.closePath()}},db=Math.sin(Wa/10)/
Math.sin(7*Wa/10),qb=Math.sin(Sa/10)*db,Kb=-Math.cos(Sa/10)*db;db={draw:function(lb,vb){vb=Math.sqrt(.8908130915292852*vb);var Ub=qb*vb,Sb=Kb*vb;lb.moveTo(0,-vb);lb.lineTo(Ub,Sb);for(var Ab=1;5>Ab;++Ab){var Eb=Sa*Ab/5,Fb=Math.cos(Eb);Eb=Math.sin(Eb);lb.lineTo(Eb*vb,-Fb*vb);lb.lineTo(Fb*Ub-Eb*Sb,Eb*Ub+Fb*Sb)}lb.closePath()}};var Ob={draw:function(lb,vb){vb=Math.sqrt(vb);var Ub=-vb/2;lb.rect(Ub,Ub,vb,vb)}},cc=Math.sqrt(3),kc={draw:function(lb,vb){vb=-Math.sqrt(vb/(3*cc));lb.moveTo(0,2*vb);lb.lineTo(-cc*
vb,-vb);lb.lineTo(cc*vb,-vb);lb.closePath()}},qc=Math.sqrt(3)/2,Pc=1/Math.sqrt(12),Qc=3*(Pc/2+1),cd={draw:function(lb,vb){var Ub=Math.sqrt(vb/Qc);vb=Ub/2;var Sb=Ub*Pc;Ub=Ub*Pc+Ub;var Ab=-vb;lb.moveTo(vb,Sb);lb.lineTo(vb,Ub);lb.lineTo(Ab,Ub);lb.lineTo(-.5*vb-qc*Sb,qc*vb+-.5*Sb);lb.lineTo(-.5*vb-qc*Ub,qc*vb+-.5*Ub);lb.lineTo(-.5*Ab-qc*Ub,qc*Ab+-.5*Ub);lb.lineTo(-.5*vb+qc*Sb,-.5*Sb-qc*vb);lb.lineTo(-.5*vb+qc*Ub,-.5*Ub-qc*vb);lb.lineTo(-.5*Ab+qc*Ub,-.5*Ub-qc*Ab);lb.closePath()}},gd=[Ha,Ca,Va,Ob,db,kc,
cd];R.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN;this._point=0},lineEnd:function(){switch(this._point){case 3:S(this,this._x1,this._y1);case 2:this._context.lineTo(this._x1,this._y1)}(this._line||0!==this._line&&1===this._point)&&this._context.closePath();this._line=1-this._line},point:function(lb,vb){lb=+lb;vb=+vb;switch(this._point){case 0:this._point=1;this._line?this._context.lineTo(lb,vb):this._context.moveTo(lb,
vb);break;case 1:this._point=2;break;case 2:this._point=3,this._context.lineTo((5*this._x0+this._x1)/6,(5*this._y0+this._y1)/6);default:S(this,lb,vb)}this._x0=this._x1;this._x1=lb;this._y0=this._y1;this._y1=vb}};O.prototype={areaStart:Q,areaEnd:Q,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._y0=this._y1=this._y2=this._y3=this._y4=NaN;this._point=0},lineEnd:function(){switch(this._point){case 1:this._context.moveTo(this._x2,this._y2);this._context.closePath();break;case 2:this._context.moveTo((this._x2+
2*this._x3)/3,(this._y2+2*this._y3)/3);this._context.lineTo((this._x3+2*this._x2)/3,(this._y3+2*this._y2)/3);this._context.closePath();break;case 3:this.point(this._x2,this._y2),this.point(this._x3,this._y3),this.point(this._x4,this._y4)}},point:function(lb,vb){lb=+lb;vb=+vb;switch(this._point){case 0:this._point=1;this._x2=lb;this._y2=vb;break;case 1:this._point=2;this._x3=lb;this._y3=vb;break;case 2:this._point=3;this._x4=lb;this._y4=vb;this._context.moveTo((this._x0+4*this._x1+lb)/6,(this._y0+
4*this._y1+vb)/6);break;default:S(this,lb,vb)}this._x0=this._x1;this._x1=lb;this._y0=this._y1;this._y1=vb}};T.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN;this._point=0},lineEnd:function(){(this._line||0!==this._line&&3===this._point)&&this._context.closePath();this._line=1-this._line},point:function(lb,vb){lb=+lb;vb=+vb;switch(this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=
3;var Ub=(this._x0+4*this._x1+lb)/6,Sb=(this._y0+4*this._y1+vb)/6;this._line?this._context.lineTo(Ub,Sb):this._context.moveTo(Ub,Sb);break;case 3:this._point=4;default:S(this,lb,vb)}this._x0=this._x1;this._x1=lb;this._y0=this._y1;this._y1=vb}};V.prototype={lineStart:function(){this._x=[];this._y=[];this._basis.lineStart()},lineEnd:function(){var lb=this._x,vb=this._y,Ub=lb.length-1;if(0<Ub)for(var Sb=lb[0],Ab=vb[0],Eb=lb[Ub]-Sb,Fb=vb[Ub]-Ab,xb=-1,Jb;++xb<=Ub;)Jb=xb/Ub,this._basis.point(this._beta*
lb[xb]+(1-this._beta)*(Sb+Jb*Eb),this._beta*vb[xb]+(1-this._beta)*(Ab+Jb*Fb));this._x=this._y=null;this._basis.lineEnd()},point:function(lb,vb){this._x.push(+lb);this._y.push(+vb)}};var kd=function Ub(vb){function Sb(Ab){return 1===vb?new R(Ab):new V(Ab,vb)}Sb.beta=function(Ab){return Ub(+Ab)};return Sb}(.85);ba.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN;this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x2,
this._y2);break;case 3:X(this,this._x1,this._y1)}(this._line||0!==this._line&&1===this._point)&&this._context.closePath();this._line=1-this._line},point:function(vb,Ub){vb=+vb;Ub=+Ub;switch(this._point){case 0:this._point=1;this._line?this._context.lineTo(vb,Ub):this._context.moveTo(vb,Ub);break;case 1:this._point=2;this._x1=vb;this._y1=Ub;break;case 2:this._point=3;default:X(this,vb,Ub)}this._x0=this._x1;this._x1=this._x2;this._x2=vb;this._y0=this._y1;this._y1=this._y2;this._y2=Ub}};var Cb=function Sb(Ub){function Ab(Eb){return new ba(Eb,
Ub)}Ab.tension=function(Eb){return Sb(+Eb)};return Ab}(0);aa.prototype={areaStart:Q,areaEnd:Q,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._x5=this._y0=this._y1=this._y2=this._y3=this._y4=this._y5=NaN;this._point=0},lineEnd:function(){switch(this._point){case 1:this._context.moveTo(this._x3,this._y3);this._context.closePath();break;case 2:this._context.lineTo(this._x3,this._y3);this._context.closePath();break;case 3:this.point(this._x3,this._y3),this.point(this._x4,this._y4),
this.point(this._x5,this._y5)}},point:function(Ub,Sb){Ub=+Ub;Sb=+Sb;switch(this._point){case 0:this._point=1;this._x3=Ub;this._y3=Sb;break;case 1:this._point=2;this._context.moveTo(this._x4=Ub,this._y4=Sb);break;case 2:this._point=3;this._x5=Ub;this._y5=Sb;break;default:X(this,Ub,Sb)}this._x0=this._x1;this._x1=this._x2;this._x2=Ub;this._y0=this._y1;this._y1=this._y2;this._y2=Sb}};var ic=function Ab(Sb){function Eb(Fb){return new aa(Fb,Sb)}Eb.tension=function(Fb){return Ab(+Fb)};return Eb}(0);ka.prototype=
{areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN;this._point=0},lineEnd:function(){(this._line||0!==this._line&&3===this._point)&&this._context.closePath();this._line=1-this._line},point:function(Sb,Ab){Sb=+Sb;Ab=+Ab;switch(this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3;this._line?this._context.lineTo(this._x2,this._y2):this._context.moveTo(this._x2,this._y2);
break;case 3:this._point=4;default:X(this,Sb,Ab)}this._x0=this._x1;this._x1=this._x2;this._x2=Sb;this._y0=this._y1;this._y1=this._y2;this._y2=Ab}};var sc=function Eb(Ab){function Fb(xb){return new ka(xb,Ab)}Fb.tension=function(xb){return Eb(+xb)};return Fb}(0);ca.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN;this._l01_a=this._l12_a=this._l23_a=this._l01_2a=this._l12_2a=this._l23_2a=this._point=
0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x2,this._y2);break;case 3:this.point(this._x2,this._y2)}(this._line||0!==this._line&&1===this._point)&&this._context.closePath();this._line=1-this._line},point:function(Ab,Eb){Ab=+Ab;Eb=+Eb;if(this._point){var Fb=this._x2-Ab,xb=this._y2-Eb;this._l23_a=Math.sqrt(this._l23_2a=Math.pow(Fb*Fb+xb*xb,this._alpha))}switch(this._point){case 0:this._point=1;this._line?this._context.lineTo(Ab,Eb):this._context.moveTo(Ab,Eb);break;case 1:this._point=
2;break;case 2:this._point=3;default:ha(this,Ab,Eb)}this._l01_a=this._l12_a;this._l12_a=this._l23_a;this._l01_2a=this._l12_2a;this._l12_2a=this._l23_2a;this._x0=this._x1;this._x1=this._x2;this._x2=Ab;this._y0=this._y1;this._y1=this._y2;this._y2=Eb}};var wb=function Fb(Eb){function xb(Jb){return Eb?new ca(Jb,Eb):new ba(Jb,0)}xb.alpha=function(Jb){return Fb(+Jb)};return xb}(.5);sa.prototype={areaStart:Q,areaEnd:Q,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._x5=this._y0=this._y1=
this._y2=this._y3=this._y4=this._y5=NaN;this._l01_a=this._l12_a=this._l23_a=this._l01_2a=this._l12_2a=this._l23_2a=this._point=0},lineEnd:function(){switch(this._point){case 1:this._context.moveTo(this._x3,this._y3);this._context.closePath();break;case 2:this._context.lineTo(this._x3,this._y3);this._context.closePath();break;case 3:this.point(this._x3,this._y3),this.point(this._x4,this._y4),this.point(this._x5,this._y5)}},point:function(Eb,Fb){Eb=+Eb;Fb=+Fb;if(this._point){var xb=this._x2-Eb,Jb=this._y2-
Fb;this._l23_a=Math.sqrt(this._l23_2a=Math.pow(xb*xb+Jb*Jb,this._alpha))}switch(this._point){case 0:this._point=1;this._x3=Eb;this._y3=Fb;break;case 1:this._point=2;this._context.moveTo(this._x4=Eb,this._y4=Fb);break;case 2:this._point=3;this._x5=Eb;this._y5=Fb;break;default:ha(this,Eb,Fb)}this._l01_a=this._l12_a;this._l12_a=this._l23_a;this._l01_2a=this._l12_2a;this._l12_2a=this._l23_2a;this._x0=this._x1;this._x1=this._x2;this._x2=Eb;this._y0=this._y1;this._y1=this._y2;this._y2=Fb}};var zb=function xb(Fb){function Jb(tb){return Fb?
new sa(tb,Fb):new aa(tb,0)}Jb.alpha=function(tb){return xb(+tb)};return Jb}(.5);ma.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN;this._l01_a=this._l12_a=this._l23_a=this._l01_2a=this._l12_2a=this._l23_2a=this._point=0},lineEnd:function(){(this._line||0!==this._line&&3===this._point)&&this._context.closePath();this._line=1-this._line},point:function(Fb,xb){Fb=+Fb;xb=+xb;if(this._point){var Jb=
this._x2-Fb,tb=this._y2-xb;this._l23_a=Math.sqrt(this._l23_2a=Math.pow(Jb*Jb+tb*tb,this._alpha))}switch(this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3;this._line?this._context.lineTo(this._x2,this._y2):this._context.moveTo(this._x2,this._y2);break;case 3:this._point=4;default:ha(this,Fb,xb)}this._l01_a=this._l12_a;this._l12_a=this._l23_a;this._l01_2a=this._l12_2a;this._l12_2a=this._l23_2a;this._x0=this._x1;this._x1=this._x2;this._x2=Fb;this._y0=this._y1;this._y1=
this._y2;this._y2=xb}};var Tb=function Jb(xb){function tb(Lb){return xb?new ma(Lb,xb):new ka(Lb,0)}tb.alpha=function(Lb){return Jb(+Lb)};return tb}(.5);ra.prototype={areaStart:Q,areaEnd:Q,lineStart:function(){this._point=0},lineEnd:function(){this._point&&this._context.closePath()},point:function(xb,Jb){xb=+xb;Jb=+Jb;this._point?this._context.lineTo(xb,Jb):(this._point=1,this._context.moveTo(xb,Jb))}};oa.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=
this._x1=this._y0=this._y1=this._t0=NaN;this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x1,this._y1);break;case 3:pa(this,this._t0,Y(this,this._t0))}(this._line||0!==this._line&&1===this._point)&&this._context.closePath();this._line=1-this._line},point:function(xb,Jb){var tb=NaN;xb=+xb;Jb=+Jb;if(xb!==this._x1||Jb!==this._y1){switch(this._point){case 0:this._point=1;this._line?this._context.lineTo(xb,Jb):this._context.moveTo(xb,Jb);break;case 1:this._point=2;
break;case 2:this._point=3;pa(this,Y(this,tb=qa(this,xb,Jb)),tb);break;default:pa(this,this._t0,tb=qa(this,xb,Jb))}this._x0=this._x1;this._x1=xb;this._y0=this._y1;this._y1=Jb;this._t0=tb}}};(ua.prototype=Object.create(oa.prototype)).point=function(xb,Jb){oa.prototype.point.call(this,Jb,xb)};ya.prototype={moveTo:function(xb,Jb){this._context.moveTo(Jb,xb)},closePath:function(){this._context.closePath()},lineTo:function(xb,Jb){this._context.lineTo(Jb,xb)},bezierCurveTo:function(xb,Jb,tb,Lb,Ib,lc){this._context.bezierCurveTo(Jb,
xb,Lb,tb,lc,Ib)}};ja.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=[];this._y=[]},lineEnd:function(){var xb=this._x,Jb=this._y,tb=xb.length;if(tb)if(this._line?this._context.lineTo(xb[0],Jb[0]):this._context.moveTo(xb[0],Jb[0]),2===tb)this._context.lineTo(xb[1],Jb[1]);else for(var Lb=za(xb),Ib=za(Jb),lc=0,$b=1;$b<tb;++lc,++$b)this._context.bezierCurveTo(Lb[0][lc],Ib[0][lc],Lb[1][lc],Ib[1][lc],xb[$b],Jb[$b]);(this._line||0!==this._line&&
1===tb)&&this._context.closePath();this._line=1-this._line;this._x=this._y=null},point:function(xb,Jb){this._x.push(+xb);this._y.push(+Jb)}};Ba.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=this._y=NaN;this._point=0},lineEnd:function(){0<this._t&&1>this._t&&2===this._point&&this._context.lineTo(this._x,this._y);(this._line||0!==this._line&&1===this._point)&&this._context.closePath();0<=this._line&&(this._t=1-this._t,this._line=1-this._line)},
point:function(xb,Jb){xb=+xb;Jb=+Jb;switch(this._point){case 0:this._point=1;this._line?this._context.lineTo(xb,Jb):this._context.moveTo(xb,Jb);break;case 1:this._point=2;default:if(0>=this._t)this._context.lineTo(this._x,Jb),this._context.lineTo(xb,Jb);else{var tb=this._x*(1-this._t)+xb*this._t;this._context.lineTo(tb,this._y);this._context.lineTo(tb,Jb)}}this._x=xb;this._y=Jb}};q.arc=function(){function xb(){var Bc,Rc=+Jb.apply(this,arguments),pd=+tb.apply(this,arguments),Vc=lc.apply(this,arguments)-
Ja,xd=$b.apply(this,arguments)-Ja,sd=cb(xd-Vc),Yc=xd>Vc;xc||(xc=Bc=n.path());if(pd<Rc){var Hc=pd;pd=Rc;Rc=Hc}if(1E-12<pd)if(sd>Sa-1E-12)xc.moveTo(pd*Ka(Vc),pd*Ya(Vc)),xc.arc(0,0,pd,Vc,xd,!Yc),1E-12<Rc&&(xc.moveTo(Rc*Ka(xd),Rc*Ya(xd)),xc.arc(0,0,Rc,xd,Vc,Yc));else{var Cd=Vc,Kd=xd;Hc=Vc;var Ld=xd,kb=sd,De=sd,Hd=nc.apply(this,arguments)/2,oe=1E-12<Hd&&(Ib?+Ib.apply(this,arguments):ab(Rc*Rc+pd*pd)),Ge=Ea(cb(pd-Rc)/2,+Lb.apply(this,arguments)),Fd=Ge,ge=Ge;if(1E-12<oe){var ff=f(oe/Rc*Ya(Hd));Hd=f(oe/pd*
Ya(Hd));1E-12<(kb-=2*ff)?(ff*=Yc?1:-1,Hc+=ff,Ld-=ff):(kb=0,Hc=Ld=(Vc+xd)/2);1E-12<(De-=2*Hd)?(Hd*=Yc?1:-1,Cd+=Hd,Kd-=Hd):(De=0,Cd=Kd=(Vc+xd)/2)}Vc=pd*Ka(Cd);xd=pd*Ya(Cd);ff=Rc*Ka(Ld);Hd=Rc*Ya(Ld);if(1E-12<Ge){var Vd=pd*Ka(Kd),Pd=pd*Ya(Kd),Ed=Rc*Ka(Hc),ke=Rc*Ya(Hc);if(sd=sd<Wa){var Xd=Ed-Vc;sd=ke-xd;oe=ff-Vd;var Ve=Hd-Pd,Yd=Ve*Xd-oe*sd;1E-12>Yd*Yd?Xd=void 0:(Yd=(oe*(xd-Pd)-Ve*(Vc-Vd))/Yd,Xd=[Vc+Yd*Xd,xd+Yd*sd]);sd=Xd}sd&&(Fd=Vc-Xd[0],ge=xd-Xd[1],sd=Vd-Xd[0],oe=Pd-Xd[1],Fd=(Fd*sd+ge*oe)/(ab(Fd*Fd+ge*
ge)*ab(sd*sd+oe*oe)),ge=1/Ya((1<Fd?0:-1>Fd?Wa:Math.acos(Fd))/2),Xd=ab(Xd[0]*Xd[0]+Xd[1]*Xd[1]),Fd=Ea(Ge,(Rc-Xd)/(ge-1)),ge=Ea(Ge,(pd-Xd)/(ge+1)))}1E-12<De?1E-12<ge?(Cd=c(Ed,ke,Vc,xd,pd,ge,Yc),Kd=c(Vd,Pd,ff,Hd,pd,ge,Yc),xc.moveTo(Cd.cx+Cd.x01,Cd.cy+Cd.y01),ge<Ge?xc.arc(Cd.cx,Cd.cy,ge,mb(Cd.y01,Cd.x01),mb(Kd.y01,Kd.x01),!Yc):(xc.arc(Cd.cx,Cd.cy,ge,mb(Cd.y01,Cd.x01),mb(Cd.y11,Cd.x11),!Yc),xc.arc(0,0,pd,mb(Cd.cy+Cd.y11,Cd.cx+Cd.x11),mb(Kd.cy+Kd.y11,Kd.cx+Kd.x11),!Yc),xc.arc(Kd.cx,Kd.cy,ge,mb(Kd.y11,Kd.x11),
mb(Kd.y01,Kd.x01),!Yc))):(xc.moveTo(Vc,xd),xc.arc(0,0,pd,Cd,Kd,!Yc)):xc.moveTo(Vc,xd);1E-12<Rc&&1E-12<kb?1E-12<Fd?(Cd=c(ff,Hd,Vd,Pd,Rc,-Fd,Yc),Kd=c(Vc,xd,Ed,ke,Rc,-Fd,Yc),xc.lineTo(Cd.cx+Cd.x01,Cd.cy+Cd.y01),Fd<Ge?xc.arc(Cd.cx,Cd.cy,Fd,mb(Cd.y01,Cd.x01),mb(Kd.y01,Kd.x01),!Yc):(xc.arc(Cd.cx,Cd.cy,Fd,mb(Cd.y01,Cd.x01),mb(Cd.y11,Cd.x11),!Yc),xc.arc(0,0,Rc,mb(Cd.cy+Cd.y11,Cd.cx+Cd.x11),mb(Kd.cy+Kd.y11,Kd.cx+Kd.x11),Yc),xc.arc(Kd.cx,Kd.cy,Fd,mb(Kd.y11,Kd.x11),mb(Kd.y01,Kd.x01),!Yc))):xc.arc(0,0,Rc,Ld,
Hc,Yc):xc.lineTo(ff,Hd)}else xc.moveTo(0,0);xc.closePath();if(Bc)return xc=null,Bc+""||null}var Jb=b,tb=k,Lb=m(0),Ib=null,lc=e,$b=h,nc=l,xc=null;xb.centroid=function(){var Bc=(+Jb.apply(this,arguments)+ +tb.apply(this,arguments))/2,Rc=(+lc.apply(this,arguments)+ +$b.apply(this,arguments))/2-Wa/2;return[Ka(Rc)*Bc,Ya(Rc)*Bc]};xb.innerRadius=function(Bc){return arguments.length?(Jb="function"===typeof Bc?Bc:m(+Bc),xb):Jb};xb.outerRadius=function(Bc){return arguments.length?(tb="function"===typeof Bc?
Bc:m(+Bc),xb):tb};xb.cornerRadius=function(Bc){return arguments.length?(Lb="function"===typeof Bc?Bc:m(+Bc),xb):Lb};xb.padRadius=function(Bc){return arguments.length?(Ib=null==Bc?null:"function"===typeof Bc?Bc:m(+Bc),xb):Ib};xb.startAngle=function(Bc){return arguments.length?(lc="function"===typeof Bc?Bc:m(+Bc),xb):lc};xb.endAngle=function(Bc){return arguments.length?($b="function"===typeof Bc?Bc:m(+Bc),xb):$b};xb.padAngle=function(Bc){return arguments.length?(nc="function"===typeof Bc?Bc:m(+Bc),
xb):nc};xb.context=function(Bc){return arguments.length?(xc=null==Bc?null:Bc,xb):xc};return xb};q.area=w;q.areaRadial=u;q.curveBasis=function(xb){return new R(xb)};q.curveBasisClosed=function(xb){return new O(xb)};q.curveBasisOpen=function(xb){return new T(xb)};q.curveBundle=kd;q.curveCardinal=Cb;q.curveCardinalClosed=ic;q.curveCardinalOpen=sc;q.curveCatmullRom=wb;q.curveCatmullRomClosed=zb;q.curveCatmullRomOpen=Tb;q.curveLinear=d;q.curveLinearClosed=function(xb){return new ra(xb)};q.curveMonotoneX=
function(xb){return new oa(xb)};q.curveMonotoneY=function(xb){return new ua(xb)};q.curveNatural=function(xb){return new ja(xb)};q.curveStep=function(xb){return new Ba(xb,.5)};q.curveStepAfter=function(xb){return new Ba(xb,1)};q.curveStepBefore=function(xb){return new Ba(xb,0)};q.line=t;q.lineRadial=D;q.linkHorizontal=function(){return N(M)};q.linkRadial=function(){var xb=N(L);xb.angle=xb.x;delete xb.x;xb.radius=xb.y;delete xb.y;return xb};q.linkVertical=function(){return N(E)};q.pie=function(){function xb(nc){var xc,
Bc=nc.length;var Rc=0;var pd=Array(Bc),Vc=Array(Bc),xd=+Ib.apply(this,arguments);var sd=Math.min(Sa,Math.max(-Sa,lc.apply(this,arguments)-xd));var Yc=Math.min(Math.abs(sd)/Bc,$b.apply(this,arguments)),Hc=Yc*(0>sd?-1:1),Cd;for(xc=0;xc<Bc;++xc)0<(Cd=Vc[pd[xc]=xc]=+Jb(nc[xc],xc,nc))&&(Rc+=Cd);null!=tb?pd.sort(function(Ld,kb){return tb(Vc[Ld],Vc[kb])}):null!=Lb&&pd.sort(function(Ld,kb){return Lb(nc[Ld],nc[kb])});xc=0;for(sd=Rc?(sd-Bc*Hc)/Rc:0;xc<Bc;++xc,xd=Kd){Rc=pd[xc];Cd=Vc[Rc];var Kd=xd+(0<Cd?Cd*sd:
0)+Hc;Vc[Rc]={data:nc[Rc],index:xc,value:Cd,startAngle:xd,endAngle:Kd,padAngle:Yc}}return Vc}var Jb=y,tb=x,Lb=null,Ib=m(0),lc=m(Sa),$b=m(0);xb.value=function(nc){return arguments.length?(Jb="function"===typeof nc?nc:m(+nc),xb):Jb};xb.sortValues=function(nc){return arguments.length?(tb=nc,Lb=null,xb):tb};xb.sort=function(nc){return arguments.length?(Lb=nc,tb=null,xb):Lb};xb.startAngle=function(nc){return arguments.length?(Ib="function"===typeof nc?nc:m(+nc),xb):Ib};xb.endAngle=function(nc){return arguments.length?
(lc="function"===typeof nc?nc:m(+nc),xb):lc};xb.padAngle=function(nc){return arguments.length?($b="function"===typeof nc?nc:m(+nc),xb):$b};return xb};q.pointRadial=B;q.radialArea=u;q.radialLine=D;q.stack=function(){function xb(lc){var $b=Jb.apply(this,arguments),nc,xc=lc.length,Bc=$b.length,Rc=Array(Bc);for(nc=0;nc<Bc;++nc){for(var pd=$b[nc],Vc=Rc[nc]=Array(xc),xd=0,sd;xd<xc;++xd)Vc[xd]=sd=[0,+Ib(lc[xd],pd,xd,lc)],sd.data=lc[xd];Vc.key=pd}nc=0;for($b=tb(Rc);nc<Bc;++nc)Rc[$b[nc]].index=nc;Lb(Rc,$b);
return Rc}var Jb=m([]),tb=Oa,Lb=Ma,Ib=Ia;xb.keys=function(lc){return arguments.length?(Jb="function"===typeof lc?lc:m(nb.call(lc)),xb):Jb};xb.value=function(lc){return arguments.length?(Ib="function"===typeof lc?lc:m(+lc),xb):Ib};xb.order=function(lc){return arguments.length?(tb=null==lc?Oa:"function"===typeof lc?lc:m(nb.call(lc)),xb):tb};xb.offset=function(lc){return arguments.length?(Lb=null==lc?Ma:lc,xb):Lb};return xb};q.stackOffsetDiverging=function(xb,Jb){if(0<(xc=xb.length))for(var tb,Lb=0,
Ib,lc,$b,nc,xc,Bc=xb[Jb[0]].length;Lb<Bc;++Lb)for(tb=$b=nc=0;tb<xc;++tb)0<(lc=(Ib=xb[Jb[tb]][Lb])[1]-Ib[0])?(Ib[0]=$b,Ib[1]=$b+=lc):0>lc?(Ib[1]=nc,Ib[0]=nc+=lc):(Ib[0]=0,Ib[1]=lc)};q.stackOffsetExpand=function(xb,Jb){if(0<(Lb=xb.length)){for(var tb,Lb,Ib=0,lc=xb[0].length,$b;Ib<lc;++Ib){for($b=tb=0;tb<Lb;++tb)$b+=xb[tb][Ib][1]||0;if($b)for(tb=0;tb<Lb;++tb)xb[tb][Ib][1]/=$b}Ma(xb,Jb)}};q.stackOffsetNone=Ma;q.stackOffsetSilhouette=function(xb,Jb){if(0<(Ib=xb.length)){for(var tb=0,Lb=xb[Jb[0]],Ib,lc=
Lb.length;tb<lc;++tb){for(var $b=0,nc=0;$b<Ib;++$b)nc+=xb[$b][tb][1]||0;Lb[tb][1]+=Lb[tb][0]=-nc/2}Ma(xb,Jb)}};q.stackOffsetWiggle=function(xb,Jb){if(0<($b=xb.length)&&0<(lc=(Ib=xb[Jb[0]]).length)){for(var tb=0,Lb=1,Ib,lc,$b;Lb<lc;++Lb){for(var nc=0,xc=0,Bc=0;nc<$b;++nc){var Rc=xb[Jb[nc]],pd=Rc[Lb][1]||0;Rc=(pd-(Rc[Lb-1][1]||0))/2;for(var Vc=0;Vc<nc;++Vc){var xd=xb[Jb[Vc]];Rc+=(xd[Lb][1]||0)-(xd[Lb-1][1]||0)}xc+=pd;Bc+=Rc*pd}Ib[Lb-1][1]+=Ib[Lb-1][0]=tb;xc&&(tb-=Bc/xc)}Ib[Lb-1][1]+=Ib[Lb-1][0]=tb;
Ma(xb,Jb)}};q.stackOrderAppearance=Pa;q.stackOrderAscending=Na;q.stackOrderDescending=function(xb){return Na(xb).reverse()};q.stackOrderInsideOut=function(xb){var Jb=xb.length,tb=xb.map($a),Lb=Pa(xb),Ib=0,lc=0,$b=[],nc=[];for(xb=0;xb<Jb;++xb){var xc=Lb[xb];Ib<lc?(Ib+=tb[xc],$b.push(xc)):(lc+=tb[xc],nc.push(xc))}return nc.reverse().concat($b)};q.stackOrderNone=Oa;q.stackOrderReverse=function(xb){return Oa(xb).reverse()};q.symbol=function(){function xb(){var Ib;Lb||(Lb=Ib=n.path());Jb.apply(this,arguments).draw(Lb,
+tb.apply(this,arguments));if(Ib)return Lb=null,Ib+""||null}var Jb=m(Ha),tb=m(64),Lb=null;xb.type=function(Ib){return arguments.length?(Jb="function"===typeof Ib?Ib:m(Ib),xb):Jb};xb.size=function(Ib){return arguments.length?(tb="function"===typeof Ib?Ib:m(+Ib),xb):tb};xb.context=function(Ib){return arguments.length?(Lb=null==Ib?null:Ib,xb):Lb};return xb};q.symbolCircle=Ha;q.symbolCross=Ca;q.symbolDiamond=Va;q.symbolSquare=Ob;q.symbolStar=db;q.symbolTriangle=kc;q.symbolWye=cd;q.symbols=gd;Object.defineProperty(q,
"__esModule",{value:!0})})},{"d3-path":163}],166:[function(a,G,C){(function(q,n){"object"===typeof C&&"undefined"!==typeof G?n(C,a("d3-time")):(q=q||self,n(q.d3=q.d3||{},q.d3))})(this,function(q,n){function m(Va){if(0<=Va.y&&100>Va.y){var db=new Date(-1,Va.m,Va.d,Va.H,Va.M,Va.S,Va.L);db.setFullYear(Va.y);return db}return new Date(Va.y,Va.m,Va.d,Va.H,Va.M,Va.S,Va.L)}function f(Va){if(0<=Va.y&&100>Va.y){var db=new Date(Date.UTC(-1,Va.m,Va.d,Va.H,Va.M,Va.S,Va.L));db.setUTCFullYear(Va.y);return db}return new Date(Date.UTC(Va.y,
Va.m,Va.d,Va.H,Va.M,Va.S,Va.L))}function b(Va,db,qb){return{y:Va,m:db,d:qb,H:0,M:0,S:0,L:0}}function k(Va){function db(Fb,xb){return function(Jb){var tb=[],Lb=-1,Ib=0,lc=Fb.length,$b,nc;for(Jb instanceof Date||(Jb=new Date(+Jb));++Lb<lc;)if(37===Fb.charCodeAt(Lb)){tb.push(Fb.slice(Ib,Lb));null!=(Ib=Sa[$b=Fb.charAt(++Lb)])?$b=Fb.charAt(++Lb):Ib="e"===$b?" ":"0";if(nc=xb[$b])$b=nc(Jb,Ib);tb.push($b);Ib=Lb+1}tb.push(Fb.slice(Ib,Lb));return tb.join("")}}function qb(Fb,xb){return function(Jb){var tb=b(1900,
void 0,1);if(Kb(tb,Fb,Jb+="",0)!=Jb.length)return null;if("Q"in tb)return new Date(tb.Q);if("s"in tb)return new Date(1E3*tb.s+("L"in tb?tb.L:0));!xb||"Z"in tb||(tb.Z=0);"p"in tb&&(tb.H=tb.H%12+12*tb.p);void 0===tb.m&&(tb.m="q"in tb?tb.q:0);if("V"in tb){if(1>tb.V||53<tb.V)return null;"w"in tb||(tb.w=1);if("Z"in tb){Jb=f(b(tb.y,0,1));var Lb=Jb.getUTCDay();Jb=4<Lb||0===Lb?n.utcMonday.ceil(Jb):n.utcMonday(Jb);Jb=n.utcDay.offset(Jb,7*(tb.V-1));tb.y=Jb.getUTCFullYear();tb.m=Jb.getUTCMonth();tb.d=Jb.getUTCDate()+
(tb.w+6)%7}else Jb=m(b(tb.y,0,1)),Lb=Jb.getDay(),Jb=4<Lb||0===Lb?n.timeMonday.ceil(Jb):n.timeMonday(Jb),Jb=n.timeDay.offset(Jb,7*(tb.V-1)),tb.y=Jb.getFullYear(),tb.m=Jb.getMonth(),tb.d=Jb.getDate()+(tb.w+6)%7}else if("W"in tb||"U"in tb)"w"in tb||(tb.w="u"in tb?tb.u%7:"W"in tb?1:0),Lb="Z"in tb?f(b(tb.y,0,1)).getUTCDay():m(b(tb.y,0,1)).getDay(),tb.m=0,tb.d="W"in tb?(tb.w+6)%7+7*tb.W-(Lb+5)%7:tb.w+7*tb.U-(Lb+6)%7;return"Z"in tb?(tb.H+=tb.Z/100|0,tb.M+=tb.Z%100,f(tb)):m(tb)}}function Kb(Fb,xb,Jb,tb){for(var Lb=
0,Ib=xb.length,lc=Jb.length,$b;Lb<Ib;){if(tb>=lc)return-1;$b=xb.charCodeAt(Lb++);if(37===$b){if($b=xb.charAt(Lb++),$b=Eb[$b in Sa?xb.charAt(Lb++):$b],!$b||0>(tb=$b(Fb,Jb,tb)))return-1}else if($b!=Jb.charCodeAt(tb++))return-1}return tb}var Ob=Va.dateTime,cc=Va.date,kc=Va.time,qc=Va.periods,Pc=Va.days,Qc=Va.shortDays,cd=Va.months,gd=Va.shortMonths,kd=l(qc),Cb=c(qc),ic=l(Pc),sc=c(Pc),wb=l(Qc),zb=c(Qc),Tb=l(cd),lb=c(cd),vb=l(gd),Ub=c(gd),Sb={a:function(Fb){return Qc[Fb.getDay()]},A:function(Fb){return Pc[Fb.getDay()]},
b:function(Fb){return gd[Fb.getMonth()]},B:function(Fb){return cd[Fb.getMonth()]},c:null,d:Q,e:Q,f:V,H:S,I:R,j:O,L:T,m:X,M:ba,p:function(Fb){return qc[+(12<=Fb.getHours())]},q:function(Fb){return 1+~~(Fb.getMonth()/3)},Q:Ea,s:Ya,S:aa,u:ka,U:ha,V:ca,w:sa,W:ma,x:null,X:null,y:ra,Y:qa,Z:Y,"%":Ua},Ab={a:function(Fb){return Qc[Fb.getUTCDay()]},A:function(Fb){return Pc[Fb.getUTCDay()]},b:function(Fb){return gd[Fb.getUTCMonth()]},B:function(Fb){return cd[Fb.getUTCMonth()]},c:null,d:pa,e:pa,f:za,H:oa,I:ua,
j:ya,L:ja,m:Ba,M:Ma,p:function(Fb){return qc[+(12<=Fb.getUTCHours())]},q:function(Fb){return 1+~~(Fb.getUTCMonth()/3)},Q:Ea,s:Ya,S:Oa,u:Ia,U:Pa,V:Fa,w:Na,W:$a,x:null,X:null,y:cb,Y:mb,Z:Ka,"%":Ua},Eb={a:function(Fb,xb,Jb){return(xb=wb.exec(xb.slice(Jb)))?(Fb.w=zb[xb[0].toLowerCase()],Jb+xb[0].length):-1},A:function(Fb,xb,Jb){return(xb=ic.exec(xb.slice(Jb)))?(Fb.w=sc[xb[0].toLowerCase()],Jb+xb[0].length):-1},b:function(Fb,xb,Jb){return(xb=vb.exec(xb.slice(Jb)))?(Fb.m=Ub[xb[0].toLowerCase()],Jb+xb[0].length):
-1},B:function(Fb,xb,Jb){return(xb=Tb.exec(xb.slice(Jb)))?(Fb.m=lb[xb[0].toLowerCase()],Jb+xb[0].length):-1},c:function(Fb,xb,Jb){return Kb(Fb,Ob,xb,Jb)},d:F,e:F,f:N,H:u,I:u,j:D,L:J,m:z,M:B,p:function(Fb,xb,Jb){return(xb=kd.exec(xb.slice(Jb)))?(Fb.p=Cb[xb[0].toLowerCase()],Jb+xb[0].length):-1},q:A,Q:E,s:L,S:I,u:d,U:p,V:r,w:g,W:t,x:function(Fb,xb,Jb){return Kb(Fb,cc,xb,Jb)},X:function(Fb,xb,Jb){return Kb(Fb,kc,xb,Jb)},y:x,Y:w,Z:y,"%":M};Sb.x=db(cc,Sb);Sb.X=db(kc,Sb);Sb.c=db(Ob,Sb);Ab.x=db(cc,Ab);Ab.X=
db(kc,Ab);Ab.c=db(Ob,Ab);return{format:function(Fb){var xb=db(Fb+="",Sb);xb.toString=function(){return Fb};return xb},parse:function(Fb){var xb=qb(Fb+="",!1);xb.toString=function(){return Fb};return xb},utcFormat:function(Fb){var xb=db(Fb+="",Ab);xb.toString=function(){return Fb};return xb},utcParse:function(Fb){var xb=qb(Fb+="",!0);xb.toString=function(){return Fb};return xb}}}function e(Va,db,qb){var Kb=0>Va?"-":"";Va=(Kb?-Va:Va)+"";var Ob=Va.length;return Kb+(Ob<qb?Array(qb-Ob+1).join(db)+Va:Va)}
function h(Va){return Va.replace(Ha,"\\$\x26")}function l(Va){return new RegExp("^(?:"+Va.map(h).join("|")+")","i")}function c(Va){for(var db={},qb=-1,Kb=Va.length;++qb<Kb;)db[Va[qb].toLowerCase()]=qb;return db}function g(Va,db,qb){return(db=fb.exec(db.slice(qb,qb+1)))?(Va.w=+db[0],qb+db[0].length):-1}function d(Va,db,qb){return(db=fb.exec(db.slice(qb,qb+1)))?(Va.u=+db[0],qb+db[0].length):-1}function p(Va,db,qb){return(db=fb.exec(db.slice(qb,qb+2)))?(Va.U=+db[0],qb+db[0].length):-1}function r(Va,
db,qb){return(db=fb.exec(db.slice(qb,qb+2)))?(Va.V=+db[0],qb+db[0].length):-1}function t(Va,db,qb){return(db=fb.exec(db.slice(qb,qb+2)))?(Va.W=+db[0],qb+db[0].length):-1}function w(Va,db,qb){return(db=fb.exec(db.slice(qb,qb+4)))?(Va.y=+db[0],qb+db[0].length):-1}function x(Va,db,qb){return(db=fb.exec(db.slice(qb,qb+2)))?(Va.y=+db[0]+(68<+db[0]?1900:2E3),qb+db[0].length):-1}function y(Va,db,qb){return(db=/^(Z)|([+-]\d\d)(?::?(\d\d))?/.exec(db.slice(qb,qb+6)))?(Va.Z=db[1]?0:-(db[2]+(db[3]||"00")),qb+
db[0].length):-1}function A(Va,db,qb){return(db=fb.exec(db.slice(qb,qb+1)))?(Va.q=3*db[0]-3,qb+db[0].length):-1}function z(Va,db,qb){return(db=fb.exec(db.slice(qb,qb+2)))?(Va.m=db[0]-1,qb+db[0].length):-1}function F(Va,db,qb){return(db=fb.exec(db.slice(qb,qb+2)))?(Va.d=+db[0],qb+db[0].length):-1}function D(Va,db,qb){return(db=fb.exec(db.slice(qb,qb+3)))?(Va.m=0,Va.d=+db[0],qb+db[0].length):-1}function u(Va,db,qb){return(db=fb.exec(db.slice(qb,qb+2)))?(Va.H=+db[0],qb+db[0].length):-1}function B(Va,
db,qb){return(db=fb.exec(db.slice(qb,qb+2)))?(Va.M=+db[0],qb+db[0].length):-1}function I(Va,db,qb){return(db=fb.exec(db.slice(qb,qb+2)))?(Va.S=+db[0],qb+db[0].length):-1}function J(Va,db,qb){return(db=fb.exec(db.slice(qb,qb+3)))?(Va.L=+db[0],qb+db[0].length):-1}function N(Va,db,qb){return(db=fb.exec(db.slice(qb,qb+6)))?(Va.L=Math.floor(db[0]/1E3),qb+db[0].length):-1}function M(Va,db,qb){return(Va=nb.exec(db.slice(qb,qb+1)))?qb+Va[0].length:-1}function E(Va,db,qb){return(db=fb.exec(db.slice(qb)))?
(Va.Q=+db[0],qb+db[0].length):-1}function L(Va,db,qb){return(db=fb.exec(db.slice(qb)))?(Va.s=+db[0],qb+db[0].length):-1}function Q(Va,db){return e(Va.getDate(),db,2)}function S(Va,db){return e(Va.getHours(),db,2)}function R(Va,db){return e(Va.getHours()%12||12,db,2)}function O(Va,db){return e(1+n.timeDay.count(n.timeYear(Va),Va),db,3)}function T(Va,db){return e(Va.getMilliseconds(),db,3)}function V(Va,db){return T(Va,db)+"000"}function X(Va,db){return e(Va.getMonth()+1,db,2)}function ba(Va,db){return e(Va.getMinutes(),
db,2)}function aa(Va,db){return e(Va.getSeconds(),db,2)}function ka(Va){Va=Va.getDay();return 0===Va?7:Va}function ha(Va,db){return e(n.timeSunday.count(n.timeYear(Va)-1,Va),db,2)}function ca(Va,db){var qb=Va.getDay();Va=4<=qb||0===qb?n.timeThursday(Va):n.timeThursday.ceil(Va);return e(n.timeThursday.count(n.timeYear(Va),Va)+(4===n.timeYear(Va).getDay()),db,2)}function sa(Va){return Va.getDay()}function ma(Va,db){return e(n.timeMonday.count(n.timeYear(Va)-1,Va),db,2)}function ra(Va,db){return e(Va.getFullYear()%
100,db,2)}function qa(Va,db){return e(Va.getFullYear()%1E4,db,4)}function Y(Va){Va=Va.getTimezoneOffset();return(0<Va?"-":(Va*=-1,"+"))+e(Va/60|0,"0",2)+e(Va%60,"0",2)}function pa(Va,db){return e(Va.getUTCDate(),db,2)}function oa(Va,db){return e(Va.getUTCHours(),db,2)}function ua(Va,db){return e(Va.getUTCHours()%12||12,db,2)}function ya(Va,db){return e(1+n.utcDay.count(n.utcYear(Va),Va),db,3)}function ja(Va,db){return e(Va.getUTCMilliseconds(),db,3)}function za(Va,db){return ja(Va,db)+"000"}function Ba(Va,
db){return e(Va.getUTCMonth()+1,db,2)}function Ma(Va,db){return e(Va.getUTCMinutes(),db,2)}function Oa(Va,db){return e(Va.getUTCSeconds(),db,2)}function Ia(Va){Va=Va.getUTCDay();return 0===Va?7:Va}function Pa(Va,db){return e(n.utcSunday.count(n.utcYear(Va)-1,Va),db,2)}function Fa(Va,db){var qb=Va.getUTCDay();Va=4<=qb||0===qb?n.utcThursday(Va):n.utcThursday.ceil(Va);return e(n.utcThursday.count(n.utcYear(Va),Va)+(4===n.utcYear(Va).getUTCDay()),db,2)}function Na(Va){return Va.getUTCDay()}function $a(Va,
db){return e(n.utcMonday.count(n.utcYear(Va)-1,Va),db,2)}function cb(Va,db){return e(Va.getUTCFullYear()%100,db,2)}function mb(Va,db){return e(Va.getUTCFullYear()%1E4,db,4)}function Ka(){return"+0000"}function Ua(){return"%"}function Ea(Va){return+Va}function Ya(Va){return Math.floor(+Va/1E3)}function ab(Va){Ca=k(Va);q.timeFormat=Ca.format;q.timeParse=Ca.parse;q.utcFormat=Ca.utcFormat;q.utcParse=Ca.utcParse;return Ca}function Wa(Va){return Va.toISOString()}function Ja(Va){Va=new Date(Va);return isNaN(Va)?
null:Va}var Sa={"-":"",_:" ",0:"0"},fb=/^\s*\d+/,nb=/^%/,Ha=/[\\^$*+?|[\]().{}]/g,Ca;ab({dateTime:"%x, %X",date:"%-m/%-d/%Y",time:"%-I:%M:%S %p",periods:["AM","PM"],days:"Sunday Monday Tuesday Wednesday Thursday Friday Saturday".split(" "),shortDays:"Sun Mon Tue Wed Thu Fri Sat".split(" "),months:"January February March April May June July August September October November December".split(" "),shortMonths:"Jan Feb Mar Apr May Jun Jul Aug Sep Oct Nov Dec".split(" ")});var Qa=Date.prototype.toISOString?
Wa:q.utcFormat("%Y-%m-%dT%H:%M:%S.%LZ"),gb=+new Date("2000-01-01T00:00:00.000Z")?Ja:q.utcParse("%Y-%m-%dT%H:%M:%S.%LZ");q.isoFormat=Qa;q.isoParse=gb;q.timeFormatDefaultLocale=ab;q.timeFormatLocale=k;Object.defineProperty(q,"__esModule",{value:!0})})},{"d3-time":167}],167:[function(a,G,C){(function(q,n){"object"===typeof C&&"undefined"!==typeof G?n(C):(q=q||self,n(q.d3=q.d3||{}))})(this,function(q){function n(Fa,Na,$a,cb){function mb(Ka){return Fa(Ka=0===arguments.length?new Date:new Date(+Ka)),Ka}
mb.floor=function(Ka){return Fa(Ka=new Date(+Ka)),Ka};mb.ceil=function(Ka){return Fa(Ka=new Date(Ka-1)),Na(Ka,1),Fa(Ka),Ka};mb.round=function(Ka){var Ua=mb(Ka),Ea=mb.ceil(Ka);return Ka-Ua<Ea-Ka?Ua:Ea};mb.offset=function(Ka,Ua){return Na(Ka=new Date(+Ka),null==Ua?1:Math.floor(Ua)),Ka};mb.range=function(Ka,Ua,Ea){var Ya=[],ab;Ka=mb.ceil(Ka);Ea=null==Ea?1:Math.floor(Ea);if(!(Ka<Ua&&0<Ea))return Ya;do Ya.push(ab=new Date(+Ka)),Na(Ka,Ea),Fa(Ka);while(ab<Ka&&Ka<Ua);return Ya};mb.filter=function(Ka){return n(function(Ua){if(Ua>=
Ua)for(;Fa(Ua),!Ka(Ua);)Ua.setTime(Ua-1)},function(Ua,Ea){if(Ua>=Ua)if(0>Ea)for(;0>=++Ea;)for(;Na(Ua,-1),!Ka(Ua););else for(;0<=--Ea;)for(;Na(Ua,1),!Ka(Ua););})};$a&&(mb.count=function(Ka,Ua){b.setTime(+Ka);k.setTime(+Ua);Fa(b);Fa(k);return Math.floor($a(b,k))},mb.every=function(Ka){Ka=Math.floor(Ka);return isFinite(Ka)&&0<Ka?1<Ka?mb.filter(cb?function(Ua){return 0===cb(Ua)%Ka}:function(Ua){return 0===mb.count(0,Ua)%Ka}):mb:null});return mb}function m(Fa){return n(function(Na){Na.setDate(Na.getDate()-
(Na.getDay()+7-Fa)%7);Na.setHours(0,0,0,0)},function(Na,$a){Na.setDate(Na.getDate()+7*$a)},function(Na,$a){return($a-Na-6E4*($a.getTimezoneOffset()-Na.getTimezoneOffset()))/6048E5})}function f(Fa){return n(function(Na){Na.setUTCDate(Na.getUTCDate()-(Na.getUTCDay()+7-Fa)%7);Na.setUTCHours(0,0,0,0)},function(Na,$a){Na.setUTCDate(Na.getUTCDate()+7*$a)},function(Na,$a){return($a-Na)/6048E5})}var b=new Date,k=new Date,e=n(function(){},function(Fa,Na){Fa.setTime(+Fa+Na)},function(Fa,Na){return Na-Fa});
e.every=function(Fa){Fa=Math.floor(Fa);return isFinite(Fa)&&0<Fa?1<Fa?n(function(Na){Na.setTime(Math.floor(Na/Fa)*Fa)},function(Na,$a){Na.setTime(+Na+$a*Fa)},function(Na,$a){return($a-Na)/Fa}):e:null};var h=e.range,l=n(function(Fa){Fa.setTime(Fa-Fa.getMilliseconds())},function(Fa,Na){Fa.setTime(+Fa+1E3*Na)},function(Fa,Na){return(Na-Fa)/1E3},function(Fa){return Fa.getUTCSeconds()}),c=l.range,g=n(function(Fa){Fa.setTime(Fa-Fa.getMilliseconds()-1E3*Fa.getSeconds())},function(Fa,Na){Fa.setTime(+Fa+6E4*
Na)},function(Fa,Na){return(Na-Fa)/6E4},function(Fa){return Fa.getMinutes()}),d=g.range,p=n(function(Fa){Fa.setTime(Fa-Fa.getMilliseconds()-1E3*Fa.getSeconds()-6E4*Fa.getMinutes())},function(Fa,Na){Fa.setTime(+Fa+36E5*Na)},function(Fa,Na){return(Na-Fa)/36E5},function(Fa){return Fa.getHours()}),r=p.range,t=n(function(Fa){Fa.setHours(0,0,0,0)},function(Fa,Na){Fa.setDate(Fa.getDate()+Na)},function(Fa,Na){return(Na-Fa-6E4*(Na.getTimezoneOffset()-Fa.getTimezoneOffset()))/864E5},function(Fa){return Fa.getDate()-
1}),w=t.range,x=m(0),y=m(1),A=m(2),z=m(3),F=m(4),D=m(5),u=m(6),B=x.range,I=y.range,J=A.range,N=z.range,M=F.range,E=D.range,L=u.range,Q=n(function(Fa){Fa.setDate(1);Fa.setHours(0,0,0,0)},function(Fa,Na){Fa.setMonth(Fa.getMonth()+Na)},function(Fa,Na){return Na.getMonth()-Fa.getMonth()+12*(Na.getFullYear()-Fa.getFullYear())},function(Fa){return Fa.getMonth()}),S=Q.range,R=n(function(Fa){Fa.setMonth(0,1);Fa.setHours(0,0,0,0)},function(Fa,Na){Fa.setFullYear(Fa.getFullYear()+Na)},function(Fa,Na){return Na.getFullYear()-
Fa.getFullYear()},function(Fa){return Fa.getFullYear()});R.every=function(Fa){return isFinite(Fa=Math.floor(Fa))&&0<Fa?n(function(Na){Na.setFullYear(Math.floor(Na.getFullYear()/Fa)*Fa);Na.setMonth(0,1);Na.setHours(0,0,0,0)},function(Na,$a){Na.setFullYear(Na.getFullYear()+$a*Fa)}):null};var O=R.range,T=n(function(Fa){Fa.setUTCSeconds(0,0)},function(Fa,Na){Fa.setTime(+Fa+6E4*Na)},function(Fa,Na){return(Na-Fa)/6E4},function(Fa){return Fa.getUTCMinutes()}),V=T.range,X=n(function(Fa){Fa.setUTCMinutes(0,
0,0)},function(Fa,Na){Fa.setTime(+Fa+36E5*Na)},function(Fa,Na){return(Na-Fa)/36E5},function(Fa){return Fa.getUTCHours()}),ba=X.range,aa=n(function(Fa){Fa.setUTCHours(0,0,0,0)},function(Fa,Na){Fa.setUTCDate(Fa.getUTCDate()+Na)},function(Fa,Na){return(Na-Fa)/864E5},function(Fa){return Fa.getUTCDate()-1}),ka=aa.range,ha=f(0),ca=f(1),sa=f(2),ma=f(3),ra=f(4),qa=f(5),Y=f(6),pa=ha.range,oa=ca.range,ua=sa.range,ya=ma.range,ja=ra.range,za=qa.range,Ba=Y.range,Ma=n(function(Fa){Fa.setUTCDate(1);Fa.setUTCHours(0,
0,0,0)},function(Fa,Na){Fa.setUTCMonth(Fa.getUTCMonth()+Na)},function(Fa,Na){return Na.getUTCMonth()-Fa.getUTCMonth()+12*(Na.getUTCFullYear()-Fa.getUTCFullYear())},function(Fa){return Fa.getUTCMonth()}),Oa=Ma.range,Ia=n(function(Fa){Fa.setUTCMonth(0,1);Fa.setUTCHours(0,0,0,0)},function(Fa,Na){Fa.setUTCFullYear(Fa.getUTCFullYear()+Na)},function(Fa,Na){return Na.getUTCFullYear()-Fa.getUTCFullYear()},function(Fa){return Fa.getUTCFullYear()});Ia.every=function(Fa){return isFinite(Fa=Math.floor(Fa))&&
0<Fa?n(function(Na){Na.setUTCFullYear(Math.floor(Na.getUTCFullYear()/Fa)*Fa);Na.setUTCMonth(0,1);Na.setUTCHours(0,0,0,0)},function(Na,$a){Na.setUTCFullYear(Na.getUTCFullYear()+$a*Fa)}):null};var Pa=Ia.range;q.timeDay=t;q.timeDays=w;q.timeFriday=D;q.timeFridays=E;q.timeHour=p;q.timeHours=r;q.timeInterval=n;q.timeMillisecond=e;q.timeMilliseconds=h;q.timeMinute=g;q.timeMinutes=d;q.timeMonday=y;q.timeMondays=I;q.timeMonth=Q;q.timeMonths=S;q.timeSaturday=u;q.timeSaturdays=L;q.timeSecond=l;q.timeSeconds=
c;q.timeSunday=x;q.timeSundays=B;q.timeThursday=F;q.timeThursdays=M;q.timeTuesday=A;q.timeTuesdays=J;q.timeWednesday=z;q.timeWednesdays=N;q.timeWeek=x;q.timeWeeks=B;q.timeYear=R;q.timeYears=O;q.utcDay=aa;q.utcDays=ka;q.utcFriday=qa;q.utcFridays=za;q.utcHour=X;q.utcHours=ba;q.utcMillisecond=e;q.utcMilliseconds=h;q.utcMinute=T;q.utcMinutes=V;q.utcMonday=ca;q.utcMondays=oa;q.utcMonth=Ma;q.utcMonths=Oa;q.utcSaturday=Y;q.utcSaturdays=Ba;q.utcSecond=l;q.utcSeconds=c;q.utcSunday=ha;q.utcSundays=pa;q.utcThursday=
ra;q.utcThursdays=ja;q.utcTuesday=sa;q.utcTuesdays=ua;q.utcWednesday=ma;q.utcWednesdays=ya;q.utcWeek=ha;q.utcWeeks=pa;q.utcYear=Ia;q.utcYears=Pa;Object.defineProperty(q,"__esModule",{value:!0})})},{}],168:[function(a,G,C){(function(q,n){"object"===typeof C&&"undefined"!==typeof G?n(C):(q=q||self,n(q.d3=q.d3||{}))})(this,function(q){function n(){return w||(A(m),w=y.now()+x)}function m(){w=0}function f(){this._call=this._time=this._next=null}function b(z,F,D){var u=new f;u.restart(z,F,D);return u}function k(){n();
++c;for(var z=p,F;z;)0<=(F=w-z._time)&&z._call.call(null,F),z=z._next;--c}function e(){w=(t=y.now())+x;c=g=0;try{k()}finally{c=0;for(var z,F=p,D,u=Infinity;F;)F._call?(u>F._time&&(u=F._time),z=F,F=F._next):(D=F._next,F._next=null,F=z?z._next=D:p=D);r=z;l(u);w=0}}function h(){var z=y.now(),F=z-t;1E3<F&&(x-=F,t=z)}function l(z){c||(g&&(g=clearTimeout(g)),24<z-w?(Infinity>z&&(g=setTimeout(e,z-y.now()-x)),d&&(d=clearInterval(d))):(d||(t=y.now(),d=setInterval(h,1E3)),c=1,A(e)))}var c=0,g=0,d=0,p,r,t=0,
w=0,x=0,y="object"===typeof performance&&performance.now?performance:Date,A="object"===typeof window&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(z){setTimeout(z,17)};f.prototype=b.prototype={constructor:f,restart:function(z,F,D){if("function"!==typeof z)throw new TypeError("callback is not a function");D=(null==D?n():+D)+(null==F?0:+F);this._next||r===this||(r?r._next=this:p=this,r=this);this._call=z;this._time=D;l()},stop:function(){this._call&&(this._call=null,
this._time=Infinity,l())}};q.interval=function(z,F,D){var u=new f,B=F;if(null==F)return u.restart(z,F,D),u;F=+F;D=null==D?n():+D;u.restart(function N(J){J+=B;u.restart(N,B+=F,D);z(J)},F,D);return u};q.now=n;q.timeout=function(z,F,D){var u=new f;F=null==F?0:+F;u.restart(function(B){u.stop();z(B+F)},F,D);return u};q.timer=b;q.timerFlush=k;Object.defineProperty(q,"__esModule",{value:!0})})},{}],169:[function(a,G,C){!function(){function q(W){return W&&(W.ownerDocument&&W.ownerDocument.defaultView||W.document&&
W||W.defaultView)}function n(W,wa){return W<wa?-1:W>wa?1:W>=wa?0:NaN}function m(W){return null===W?NaN:+W}function f(W){return!isNaN(W)}function b(W){return{left:function(wa,Da,La,Ta){3>arguments.length&&(La=0);4>arguments.length&&(Ta=wa.length);for(;La<Ta;){var Xa=La+Ta>>>1;0>W(wa[Xa],Da)?La=Xa+1:Ta=Xa}return La},right:function(wa,Da,La,Ta){3>arguments.length&&(La=0);4>arguments.length&&(Ta=wa.length);for(;La<Ta;){var Xa=La+Ta>>>1;0<W(wa[Xa],Da)?Ta=Xa:La=Xa+1}return La}}}function k(W){return W.length}
function e(W,wa){for(var Da in wa)Object.defineProperty(W.prototype,Da,{value:wa[Da],enumerable:!1})}function h(){this._=Object.create(null)}function l(W){return"__proto__"===(W+="")||"\x00"===W[0]?"\x00"+W:W}function c(W){return"\x00"===(W+="")[0]?W.slice(1):W}function g(W){return l(W)in this._}function d(W){return(W=l(W))in this._&&delete this._[W]}function p(){var W=[],wa;for(wa in this._)W.push(c(wa));return W}function r(){var W=0,wa;for(wa in this._)++W;return W}function t(){for(var W in this._)return!1;
return!0}function w(){this._=Object.create(null)}function x(W){return W}function y(W,wa,Da){return function(){var La=Da.apply(wa,arguments);return La===wa?W:La}}function A(W,wa){if(wa in W)return wa;wa=wa.charAt(0).toUpperCase()+wa.slice(1);for(var Da=0,La=Bi.length;Da<La;++Da){var Ta=Bi[Da]+wa;if(Ta in W)return Ta}}function z(){}function F(){}function D(W){function wa(){for(var Ta=Da,Xa=-1,jb=Ta.length,eb;++Xa<jb;)(eb=Ta[Xa].on)&&eb.apply(this,arguments);return W}var Da=[],La=new h;wa.on=function(Ta,
Xa){var jb=La.get(Ta),eb;if(2>arguments.length)return jb&&jb.on;jb&&(jb.on=null,Da=Da.slice(0,eb=Da.indexOf(jb)).concat(Da.slice(eb+1)),La.remove(Ta));Xa&&Da.push(La.set(Ta,{on:Xa}));return W};return wa}function u(){Zb.event.preventDefault()}function B(){for(var W=Zb.event,wa;wa=W.sourceEvent;)W=wa;return W}function I(W){for(var wa=new F,Da=0,La=arguments.length;++Da<La;)wa[arguments[Da]]=D(wa);wa.of=function(Ta,Xa){return function(jb){try{var eb=jb.sourceEvent=Zb.event;jb.target=W;Zb.event=jb;wa[jb.type].apply(Ta,
Xa)}finally{Zb.event=eb}}};return wa}function J(W){qk(W,sf);return W}function N(W){return"function"===typeof W?W:function(){return Kk(W,this)}}function M(W){return"function"===typeof W?W:function(){return Lk(W,this)}}function E(W,wa){function Da(){this.removeAttribute(W)}function La(){this.removeAttributeNS(W.space,W.local)}function Ta(){this.setAttribute(W,wa)}function Xa(){this.setAttributeNS(W.space,W.local,wa)}function jb(){var ib=wa.apply(this,arguments);null==ib?this.removeAttribute(W):this.setAttribute(W,
ib)}function eb(){var ib=wa.apply(this,arguments);null==ib?this.removeAttributeNS(W.space,W.local):this.setAttributeNS(W.space,W.local,ib)}W=Zb.ns.qualify(W);return null==wa?W.local?La:Da:"function"===typeof wa?W.local?eb:jb:W.local?Xa:Ta}function L(W){return new RegExp("(?:^|\\s+)"+Zb.requote(W)+"(?:\\s+|$)","g")}function Q(W,wa){function Da(){for(var Xa=-1;++Xa<Ta;)W[Xa](this,wa)}function La(){for(var Xa=-1,jb=wa.apply(this,arguments);++Xa<Ta;)W[Xa](this,jb)}W=(W+"").trim().split(/^|\s+/).map(S);
var Ta=W.length;return"function"===typeof wa?La:Da}function S(W){var wa=L(W);return function(Da,La){if(Ta=Da.classList)return La?Ta.add(W):Ta.remove(W);var Ta=Da.getAttribute("class")||"";La?(wa.lastIndex=0,wa.test(Ta)||Da.setAttribute("class",(Ta+" "+W).trim().replace(/\s+/g," "))):Da.setAttribute("class",Ta.replace(wa," ").trim().replace(/\s+/g," "))}}function R(W,wa,Da){function La(){this.style.removeProperty(W)}function Ta(){this.style.setProperty(W,wa,Da)}function Xa(){var jb=wa.apply(this,arguments);
null==jb?this.style.removeProperty(W):this.style.setProperty(W,jb,Da)}return null==wa?La:"function"===typeof wa?Xa:Ta}function O(W,wa){function Da(){delete this[W]}function La(){this[W]=wa}function Ta(){var Xa=wa.apply(this,arguments);null==Xa?delete this[W]:this[W]=Xa}return null==wa?Da:"function"===typeof wa?Ta:La}function T(W){function wa(){var La=this.ownerDocument,Ta=this.namespaceURI;return"http://www.w3.org/1999/xhtml"===Ta&&"http://www.w3.org/1999/xhtml"===La.documentElement.namespaceURI?
La.createElement(W):La.createElementNS(Ta,W)}function Da(){return this.ownerDocument.createElementNS(W.space,W.local)}return"function"===typeof W?W:(W=Zb.ns.qualify(W)).local?Da:wa}function V(){var W=this.parentNode;W&&W.removeChild(this)}function X(W){return function(){return rk(this,W)}}function ba(W){arguments.length||(W=n);return function(wa,Da){return wa&&Da?W(wa.__data__,Da.__data__):!wa-!Da}}function aa(W,wa){for(var Da=0,La=W.length;Da<La;Da++)for(var Ta=W[Da],Xa=0,jb=Ta.length,eb;Xa<jb;Xa++)(eb=
Ta[Xa])&&wa(eb,Xa,Da);return W}function ka(W){qk(W,zg);return W}function ha(W){var wa,Da;return function(La,Ta,Xa){La=W[Xa].update;var jb=La.length;Xa!=Da&&(Da=Xa,wa=0);for(Ta>=wa&&(wa=Ta+1);!(Ta=La[wa])&&++wa<jb;);return Ta}}function ca(W,wa,Da){function La(){var yb=this[jb];yb&&(this.removeEventListener(W,yb,yb.$),delete this[jb])}function Ta(){var yb=ib(wa,Mg(arguments));La.call(this);this.addEventListener(W,this[jb]=yb,yb.$=Da);yb._=wa}function Xa(){var yb=new RegExp("^__on([^.]+)"+Zb.requote(W)+
"$"),Gb,Qb;for(Qb in this)if(Gb=Qb.match(yb)){var Wb=this[Qb];this.removeEventListener(Gb[1],Wb,Wb.$);delete this[Qb]}}var jb="__on"+W,eb=W.indexOf("."),ib=sa;0<eb&&(W=W.slice(0,eb));var rb=$h.get(W);rb&&(W=rb,ib=ma);return eb?wa?Ta:La:wa?z:Xa}function sa(W,wa){return function(Da){var La=Zb.event;Zb.event=Da;wa[0]=this.__data__;try{W.apply(this,wa)}finally{Zb.event=La}}}function ma(W,wa){var Da=sa(W,wa);return function(La){var Ta=La.relatedTarget;Ta&&(Ta===this||Ta.compareDocumentPosition(this)&8)||
Da.call(this,La)}}function ra(W){var wa=".dragsuppress-"+ ++nh,Da="click"+wa,La=Zb.select(q(W)).on("touchmove"+wa,u).on("dragstart"+wa,u).on("selectstart"+wa,u);null==mh&&(mh="onselectstart"in W?!1:A(W.style,"userSelect"));if(mh){var Ta=(W&&(W.ownerDocument||W.document||W).documentElement).style,Xa=Ta[mh];Ta[mh]="none"}return function(jb){La.on(wa,null);mh&&(Ta[mh]=Xa);if(jb){var eb=function(){La.on(Da,null)};La.on(Da,function(){u();eb()},!0);setTimeout(eb,0)}}}function qa(W,wa){wa.changedTouches&&
(wa=wa.changedTouches[0]);var Da=W.ownerSVGElement||W;if(Da.createSVGPoint){var La=Da.createSVGPoint();if(0>lh&&(Da=q(W),Da.scrollX||Da.scrollY)){Da=Zb.select("body").append("svg").style({position:"absolute",top:0,left:0,margin:0,padding:0,border:"none"},"important");var Ta=Da[0][0].getScreenCTM();lh=!(Ta.f||Ta.e);Da.remove()}lh?(La.x=wa.pageX,La.y=wa.pageY):(La.x=wa.clientX,La.y=wa.clientY);La=La.matrixTransform(W.getScreenCTM().inverse());return[La.x,La.y]}La=W.getBoundingClientRect();return[wa.clientX-
La.left-W.clientLeft,wa.clientY-La.top-W.clientTop]}function Y(){return Zb.event.changedTouches[0].identifier}function pa(W,wa,Da){return(wa[0]-W[0])*(Da[1]-W[1])-(wa[1]-W[1])*(Da[0]-W[0])}function oa(W){return 1<W?0:-1>W?Ce:Math.acos(W)}function ua(W){return 1<W?Kf:-1>W?-Kf:Math.asin(W)}function ya(W){return((W=Math.exp(W))+1/W)/2}function ja(W){return(W=Math.sin(W/2))*W}function za(){}function Ba(W,wa,Da){return this instanceof Ba?void(this.h=+W,this.s=+wa,this.l=+Da):2>arguments.length?W instanceof
Ba?new Ba(W.h,W.s,W.l):Ya(""+W,ab,Ba):new Ba(W,wa,Da)}function Ma(W,wa,Da){function La(jb){360<jb?jb-=360:0>jb&&(jb+=360);return 60>jb?Xa+(Ta-Xa)*jb/60:180>jb?Ta:240>jb?Xa+(Ta-Xa)*(240-jb)/60:Xa}W=isNaN(W)?0:0>(W%=360)?W+360:W;wa=isNaN(wa)?0:0>wa?0:1<wa?1:wa;Da=0>Da?0:1<Da?1:Da;var Ta=.5>=Da?Da*(1+wa):Da+wa-Da*wa;var Xa=2*Da-Ta;return new Ka(Math.round(255*La(W+120)),Math.round(255*La(W)),Math.round(255*La(W-120)))}function Oa(W,wa,Da){return this instanceof Oa?void(this.h=+W,this.c=+wa,this.l=+Da):
2>arguments.length?W instanceof Oa?new Oa(W.h,W.c,W.l):W instanceof Pa?Na(W.l,W.a,W.b):Na((W=Wa((W=Zb.rgb(W)).r,W.g,W.b)).l,W.a,W.b):new Oa(W,wa,Da)}function Ia(W,wa,Da){isNaN(W)&&(W=0);isNaN(wa)&&(wa=0);return new Pa(Da,Math.cos(W*=Oe)*wa,Math.sin(W)*wa)}function Pa(W,wa,Da){return this instanceof Pa?void(this.l=+W,this.a=+wa,this.b=+Da):2>arguments.length?W instanceof Pa?new Pa(W.l,W.a,W.b):W instanceof Oa?Ia(W.h,W.c,W.l):Wa((W=Ka(W)).r,W.g,W.b):new Pa(W,wa,Da)}function Fa(W,wa,Da){W=(W+16)/116;
Da=W-Da/200;wa=$a(W+wa/500)*je;W=$a(W)*Bk;Da=$a(Da)*tg;return new Ka(mb(3.2404542*wa-1.5371385*W-.4985314*Da),mb(-.969266*wa+1.8760108*W+.041556*Da),mb(.0556434*wa-.2040259*W+1.0572252*Da))}function Na(W,wa,Da){return 0<W?new Oa(Math.atan2(Da,wa)*Jf,Math.sqrt(wa*wa+Da*Da),W):new Oa(NaN,NaN,W)}function $a(W){return.206893034<W?W*W*W:(W-4/29)/7.787037}function cb(W){return.008856<W?Math.pow(W,1/3):7.787037*W+4/29}function mb(W){return Math.round(255*(.00304>=W?12.92*W:1.055*Math.pow(W,1/2.4)-.055))}
function Ka(W,wa,Da){return this instanceof Ka?void(this.r=~~W,this.g=~~wa,this.b=~~Da):2>arguments.length?W instanceof Ka?new Ka(W.r,W.g,W.b):Ya(""+W,Ka,Ma):new Ka(W,wa,Da)}function Ua(W){return new Ka(W>>16,W>>8&255,W&255)+""}function Ea(W){return 16>W?"0"+Math.max(0,W).toString(16):Math.min(255,W).toString(16)}function Ya(W,wa,Da){var La=0,Ta=0,Xa=0,jb;if(jb=/([a-z]+)\((.*)\)/.exec(W=W.toLowerCase())){var eb=jb[2].split(",");switch(jb[1]){case "hsl":return Da(parseFloat(eb[0]),parseFloat(eb[1])/
100,parseFloat(eb[2])/100);case "rgb":return wa(Sa(eb[0]),Sa(eb[1]),Sa(eb[2]))}}if(Da=Qj.get(W))return wa(Da.r,Da.g,Da.b);null==W||"#"!==W.charAt(0)||isNaN(Da=parseInt(W.slice(1),16))||(4===W.length?(La=(Da&3840)>>4,La|=La>>4,Ta=Da&240,Ta|=Ta>>4,Xa=Da&15,Xa|=Xa<<4):7===W.length&&(La=(Da&16711680)>>16,Ta=(Da&65280)>>8,Xa=Da&255));return wa(La,Ta,Xa)}function ab(W,wa,Da){var La=Math.min(W/=255,wa/=255,Da/=255),Ta=Math.max(W,wa,Da),Xa=Ta-La,jb=(Ta+La)/2;Xa?(La=.5>jb?Xa/(Ta+La):Xa/(2-Ta-La),W=60*(W==
Ta?(wa-Da)/Xa+(wa<Da?6:0):wa==Ta?(Da-W)/Xa+2:(W-wa)/Xa+4)):(W=NaN,La=0<jb&&1>jb?0:W);return new Ba(W,La,jb)}function Wa(W,wa,Da){W=Ja(W);wa=Ja(wa);Da=Ja(Da);var La=cb((.4124564*W+.3575761*wa+.1804375*Da)/je),Ta=cb((.2126729*W+.7151522*wa+.072175*Da)/Bk);W=cb((.0193339*W+.119192*wa+.9503041*Da)/tg);return Pa(116*Ta-16,500*(La-Ta),200*(Ta-W))}function Ja(W){return.04045>=(W/=255)?W/12.92:Math.pow((W+.055)/1.055,2.4)}function Sa(W){var wa=parseFloat(W);return"%"===W.charAt(W.length-1)?Math.round(2.55*
wa):wa}function fb(W){return"function"===typeof W?W:function(){return W}}function nb(W){return function(wa,Da,La){2===arguments.length&&"function"===typeof Da&&(La=Da,Da=null);return Ha(wa,Da,W,La)}}function Ha(W,wa,Da,La){function Ta(){var yb=ib.status,Gb;if(Gb=!yb)Gb=(Gb=ib.responseType)&&"text"!==Gb?ib.response:ib.responseText;if(Gb||200<=yb&&300>yb||304===yb){try{var Qb=Da.call(Xa,ib)}catch(Wb){jb.error.call(Xa,Wb);return}jb.load.call(Xa,Qb)}else jb.error.call(Xa,ib)}var Xa={},jb=Zb.dispatch("beforesend",
"progress","load","error"),eb={},ib=new XMLHttpRequest,rb=null;!this.XDomainRequest||"withCredentials"in ib||!/^(http(s)?:)?\/\//.test(W)||(ib=new XDomainRequest);"onload"in ib?ib.onload=ib.onerror=Ta:ib.onreadystatechange=function(){3<ib.readyState&&Ta()};ib.onprogress=function(yb){var Gb=Zb.event;Zb.event=yb;try{jb.progress.call(Xa,ib)}finally{Zb.event=Gb}};Xa.header=function(yb,Gb){yb=(yb+"").toLowerCase();if(2>arguments.length)return eb[yb];null==Gb?delete eb[yb]:eb[yb]=Gb+"";return Xa};Xa.mimeType=
function(yb){if(!arguments.length)return wa;wa=null==yb?null:yb+"";return Xa};Xa.responseType=function(yb){if(!arguments.length)return rb;rb=yb;return Xa};Xa.response=function(yb){Da=yb;return Xa};["get","post"].forEach(function(yb){Xa[yb]=function(){return Xa.send.apply(Xa,[yb].concat(Mg(arguments)))}});Xa.send=function(yb,Gb,Qb){2===arguments.length&&"function"===typeof Gb&&(Qb=Gb,Gb=null);ib.open(yb,W,!0);null==wa||"accept"in eb||(eb.accept=wa+",*/*");if(ib.setRequestHeader)for(var Wb in eb)ib.setRequestHeader(Wb,
eb[Wb]);null!=wa&&ib.overrideMimeType&&ib.overrideMimeType(wa);null!=rb&&(ib.responseType=rb);if(null!=Qb)Xa.on("error",Qb).on("load",function(gc){Qb(null,gc)});jb.beforesend.call(Xa,ib);ib.send(null==Gb?null:Gb);return Xa};Xa.abort=function(){ib.abort();return Xa};Zb.rebind(Xa,jb,"on");return null==La?Xa:Xa.get(Ca(La))}function Ca(W){return 1===W.length?function(wa,Da){W(null==wa?Da:null)}:W}function Qa(W,wa,Da){var La=arguments.length;2>La&&(wa=0);3>La&&(Da=Date.now());La={c:W,t:Da+wa,n:null};Ng?
Ng.n=La:Rj=La;Ng=La;Df||(oi=clearTimeout(oi),Df=1,mj(gb));return La}function gb(){var W=Va();W=db()-W;24<W?(isFinite(W)&&(clearTimeout(oi),oi=setTimeout(gb,W)),Df=0):(Df=1,mj(gb))}function Va(){for(var W=Date.now(),wa=Rj;wa;)W>=wa.t&&wa.c(W-wa.t)&&(wa.c=null),wa=wa.n;return W}function db(){for(var W,wa=Rj,Da=Infinity;wa;)wa.c?(wa.t<Da&&(Da=wa.t),wa=(W=wa).n):wa=W?W.n=wa.n:Rj=wa.n;Ng=W;return Da}function qb(W,wa){return wa-(W?Math.ceil(Math.log(W)/Math.LN10):1)}function Kb(W){var wa=W.decimal,Da=W.thousands,
La=W.grouping,Ta=W.currency,Xa=La&&Da?function(jb,eb){for(var ib=jb.length,rb=[],yb=0,Gb=La[0],Qb=0;0<ib&&0<Gb;){Qb+Gb+1>eb&&(Gb=Math.max(1,eb-Qb));rb.push(jb.substring(ib-=Gb,ib+Gb));if((Qb+=Gb+1)>eb)break;Gb=La[yb=(yb+1)%La.length]}return rb.reverse().join(Da)}:x;return function(jb){jb=bk.exec(jb);var eb=jb[1]||" ",ib=jb[2]||"\x3e",rb=jb[3]||"-",yb=jb[4]||"",Gb=jb[5],Qb=+jb[6],Wb=jb[7],gc=jb[8],mc=jb[9],rc=1,yc="",Lc="",Tc=!1,Sc=!0;gc&&(gc=+gc.substring(1));if(Gb||"0"===eb&&"\x3d"===ib)Gb=eb="0",
ib="\x3d";switch(mc){case "n":Wb=!0;mc="g";break;case "%":rc=100;Lc="%";mc="f";break;case "p":rc=100;Lc="%";mc="r";break;case "b":case "o":case "x":case "X":"#"===yb&&(yc="0"+mc.toLowerCase());case "c":Sc=!1;case "d":Tc=!0;gc=0;break;case "s":rc=-1,mc="r"}"$"===yb&&(yc=Ta[0],Lc=Ta[1]);"r"!=mc||gc||(mc="g");if(null!=gc)if("g"==mc)gc=Math.max(1,Math.min(21,gc));else if("e"==mc||"f"==mc)gc=Math.max(0,Math.min(20,gc));mc=Hk.get(mc)||Ob;var jd=Gb&&Wb;return function(hc){var wc=Lc;if(Tc&&hc%1)return"";
var Mc=0>hc||0===hc&&0>1/hc?(hc=-hc,"-"):"-"===rb?"":rb;0>rc?(wc=Zb.formatPrefix(hc,gc),hc=wc.scale(hc),wc=wc.symbol+Lc):hc*=rc;hc=mc(hc,gc);var od=hc.lastIndexOf(".");if(0>od)if(od=Sc?hc.lastIndexOf("e"):-1,0>od){var md=hc;hc=""}else md=hc.substring(0,od),hc=hc.substring(od);else md=hc.substring(0,od),hc=wa+hc.substring(od+1);!Gb&&Wb&&(md=Xa(md,Infinity));od=yc.length+md.length+hc.length+(jd?0:Mc.length);var qd=od<Qb?Array(od=Qb-od+1).join(eb):"";jd&&(md=Xa(qd+md,qd.length?Qb-hc.length:Infinity));
Mc+=yc;hc=md+hc;return("\x3c"===ib?Mc+hc+qd:"\x3e"===ib?qd+Mc+hc:"^"===ib?qd.substring(0,od>>=1)+Mc+hc+qd.substring(od):Mc+(jd?hc:qd+hc))+wc}}}function Ob(W){return W+""}function cc(){this._=new Date(1<arguments.length?Date.UTC.apply(this,arguments):arguments[0])}function kc(W,wa,Da){function La(ib){var rb=W(ib),yb=Xa(rb,1);return ib-rb<yb-ib?rb:yb}function Ta(ib){wa(ib=W(new xf(ib-1)),1);return ib}function Xa(ib,rb){wa(ib=new xf(+ib),rb);return ib}function jb(ib,rb,yb){ib=Ta(ib);var Gb=[];if(1<yb)for(;ib<
rb;)Da(ib)%yb||Gb.push(new Date(+ib)),wa(ib,1);else for(;ib<rb;)Gb.push(new Date(+ib)),wa(ib,1);return Gb}W.floor=W;W.round=La;W.ceil=Ta;W.offset=Xa;W.range=jb;var eb=W.utc=qc(W);eb.floor=eb;eb.round=qc(La);eb.ceil=qc(Ta);eb.offset=qc(Xa);eb.range=function(ib,rb,yb){try{xf=cc;var Gb=new cc;Gb._=ib;return jb(Gb,rb,yb)}finally{xf=Date}};return W}function qc(W){return function(wa,Da){try{xf=cc;var La=new cc;La._=wa;return W(La,Da)._}finally{xf=Date}}}function Pc(W){function wa(hc){function wc(od){for(var md=
[],qd=-1,ed=0,Wd,we;++qd<Mc;)if(37===hc.charCodeAt(qd)){md.push(hc.slice(ed,qd));null!=(Wd=te[ed=hc.charAt(++qd)])&&(ed=hc.charAt(++qd));if(we=Sc[ed])ed=we(od,null==Wd?"e"===ed?" ":"0":Wd);md.push(ed);ed=qd+1}md.push(hc.slice(ed,qd));return md.join("")}var Mc=hc.length;wc.parse=function(od){var md={y:1900,m:0,d:1,H:0,M:0,S:0,L:0,Z:null};if(Da(md,hc,od,0)!=od.length)return null;"p"in md&&(md.H=md.H%12+12*md.p);od=null!=md.Z&&xf!==cc;var qd=new (od?cc:xf);"j"in md?qd.setFullYear(md.y,0,md.j):"W"in md||
"U"in md?("w"in md||(md.w="W"in md?1:0),qd.setFullYear(md.y,0,1),qd.setFullYear(md.y,0,"W"in md?(md.w+6)%7+7*md.W-(qd.getDay()+5)%7:md.w+7*md.U-(qd.getDay()+6)%7)):qd.setFullYear(md.y,md.m,md.d);qd.setHours(md.H+(md.Z/100|0),md.M+md.Z%100,md.S,md.L);return od?qd._:qd};wc.toString=function(){return hc};return wc}function Da(hc,wc,Mc,od){for(var md,qd=0,ed=wc.length,Wd=Mc.length;qd<ed;){if(od>=Wd)return-1;md=wc.charCodeAt(qd++);if(37===md){if(md=wc.charAt(qd++),md=jd[md in te?wc.charAt(qd++):md],!md||
0>(od=md(hc,Mc,od)))return-1}else if(md!=Mc.charCodeAt(od++))return-1}return od}var La=W.dateTime,Ta=W.date,Xa=W.time,jb=W.periods,eb=W.days,ib=W.shortDays,rb=W.months,yb=W.shortMonths;wa.utc=function(hc){function wc(od){try{xf=cc;var md=new xf;md._=od;return Mc(md)}finally{xf=Date}}var Mc=wa(hc);wc.parse=function(od){try{xf=cc;var md=Mc.parse(od);return md&&md._}finally{xf=Date}};wc.toString=Mc.toString;return wc};wa.multi=wa.utc.multi=Jb;var Gb=Zb.map(),Qb=cd(eb),Wb=gd(eb),gc=cd(ib),mc=gd(ib),rc=
cd(rb),yc=gd(rb),Lc=cd(yb),Tc=gd(yb);jb.forEach(function(hc,wc){Gb.set(hc.toLowerCase(),wc)});var Sc={a:function(hc){return ib[hc.getDay()]},A:function(hc){return eb[hc.getDay()]},b:function(hc){return yb[hc.getMonth()]},B:function(hc){return rb[hc.getMonth()]},c:wa(La),d:function(hc,wc){return Qc(hc.getDate(),wc,2)},e:function(hc,wc){return Qc(hc.getDate(),wc,2)},H:function(hc,wc){return Qc(hc.getHours(),wc,2)},I:function(hc,wc){return Qc(hc.getHours()%12||12,wc,2)},j:function(hc,wc){return Qc(1+
ie.dayOfYear(hc),wc,3)},L:function(hc,wc){return Qc(hc.getMilliseconds(),wc,3)},m:function(hc,wc){return Qc(hc.getMonth()+1,wc,2)},M:function(hc,wc){return Qc(hc.getMinutes(),wc,2)},p:function(hc){return jb[+(12<=hc.getHours())]},S:function(hc,wc){return Qc(hc.getSeconds(),wc,2)},U:function(hc,wc){return Qc(ie.sundayOfYear(hc),wc,2)},w:function(hc){return hc.getDay()},W:function(hc,wc){return Qc(ie.mondayOfYear(hc),wc,2)},x:wa(Ta),X:wa(Xa),y:function(hc,wc){return Qc(hc.getFullYear()%100,wc,2)},Y:function(hc,
wc){return Qc(hc.getFullYear()%1E4,wc,4)},Z:Fb,"%":function(){return"%"}},jd={a:function(hc,wc,Mc){gc.lastIndex=0;return(wc=gc.exec(wc.slice(Mc)))?(hc.w=mc.get(wc[0].toLowerCase()),Mc+wc[0].length):-1},A:function(hc,wc,Mc){Qb.lastIndex=0;return(wc=Qb.exec(wc.slice(Mc)))?(hc.w=Wb.get(wc[0].toLowerCase()),Mc+wc[0].length):-1},b:function(hc,wc,Mc){Lc.lastIndex=0;return(wc=Lc.exec(wc.slice(Mc)))?(hc.m=Tc.get(wc[0].toLowerCase()),Mc+wc[0].length):-1},B:function(hc,wc,Mc){rc.lastIndex=0;return(wc=rc.exec(wc.slice(Mc)))?
(hc.m=yc.get(wc[0].toLowerCase()),Mc+wc[0].length):-1},c:function(hc,wc,Mc){return Da(hc,Sc.c.toString(),wc,Mc)},d:lb,e:lb,H:Ub,I:Ub,j:vb,L:Eb,m:Tb,M:Sb,p:function(hc,wc,Mc){wc=Gb.get(wc.slice(Mc,Mc+=2).toLowerCase());return null==wc?-1:(hc.p=wc,Mc)},S:Ab,U:Cb,w:kd,W:ic,x:function(hc,wc,Mc){return Da(hc,Sc.x.toString(),wc,Mc)},X:function(hc,wc,Mc){return Da(hc,Sc.X.toString(),wc,Mc)},y:wb,Y:sc,Z:zb,"%":xb};return wa}function Qc(W,wa,Da){var La=0>W?"-":"";W=(La?-W:W)+"";var Ta=W.length;return La+(Ta<
Da?Array(Da-Ta+1).join(wa)+W:W)}function cd(W){return new RegExp("^(?:"+W.map(Zb.requote).join("|")+")","i")}function gd(W){for(var wa=new h,Da=-1,La=W.length;++Da<La;)wa.set(W[Da].toLowerCase(),Da);return wa}function kd(W,wa,Da){ae.lastIndex=0;return(wa=ae.exec(wa.slice(Da,Da+1)))?(W.w=+wa[0],Da+wa[0].length):-1}function Cb(W,wa,Da){ae.lastIndex=0;return(wa=ae.exec(wa.slice(Da)))?(W.U=+wa[0],Da+wa[0].length):-1}function ic(W,wa,Da){ae.lastIndex=0;return(wa=ae.exec(wa.slice(Da)))?(W.W=+wa[0],Da+wa[0].length):
-1}function sc(W,wa,Da){ae.lastIndex=0;return(wa=ae.exec(wa.slice(Da,Da+4)))?(W.y=+wa[0],Da+wa[0].length):-1}function wb(W,wa,Da){ae.lastIndex=0;if(wa=ae.exec(wa.slice(Da,Da+2))){var La=+wa[0];W=(W.y=La+(68<La?1900:2E3),Da+wa[0].length)}else W=-1;return W}function zb(W,wa,Da){return/^[+-]\d{4}$/.test(wa=wa.slice(Da,Da+5))?(W.Z=-wa,Da+5):-1}function Tb(W,wa,Da){ae.lastIndex=0;return(wa=ae.exec(wa.slice(Da,Da+2)))?(W.m=wa[0]-1,Da+wa[0].length):-1}function lb(W,wa,Da){ae.lastIndex=0;return(wa=ae.exec(wa.slice(Da,
Da+2)))?(W.d=+wa[0],Da+wa[0].length):-1}function vb(W,wa,Da){ae.lastIndex=0;return(wa=ae.exec(wa.slice(Da,Da+3)))?(W.j=+wa[0],Da+wa[0].length):-1}function Ub(W,wa,Da){ae.lastIndex=0;return(wa=ae.exec(wa.slice(Da,Da+2)))?(W.H=+wa[0],Da+wa[0].length):-1}function Sb(W,wa,Da){ae.lastIndex=0;return(wa=ae.exec(wa.slice(Da,Da+2)))?(W.M=+wa[0],Da+wa[0].length):-1}function Ab(W,wa,Da){ae.lastIndex=0;return(wa=ae.exec(wa.slice(Da,Da+2)))?(W.S=+wa[0],Da+wa[0].length):-1}function Eb(W,wa,Da){ae.lastIndex=0;return(wa=
ae.exec(wa.slice(Da,Da+3)))?(W.L=+wa[0],Da+wa[0].length):-1}function Fb(W){var wa=W.getTimezoneOffset();W=0<wa?"-":"+";var Da=Fe(wa)/60|0;wa=Fe(wa)%60;return W+Qc(Da,"0",2)+Qc(wa,"0",2)}function xb(W,wa,Da){zj.lastIndex=0;return(W=zj.exec(wa.slice(Da,Da+1)))?Da+W[0].length:-1}function Jb(W){for(var wa=W.length,Da=-1;++Da<wa;)W[Da][0]=this(W[Da][0]);return function(La){for(var Ta=0,Xa=W[Ta];!Xa[1](La);)Xa=W[++Ta];return Xa[0](La)}}function tb(){}function Lb(W,wa,Da){var La=Da.s=W+wa,Ta=La-W;Da.t=W-
(La-Ta)+(wa-Ta)}function Ib(W,wa){if(W&&pi.hasOwnProperty(W.type))pi[W.type](W,wa)}function lc(W,wa,Da){var La=-1;Da=W.length-Da;for(wa.lineStart();++La<Da;){var Ta=W[La];wa.point(Ta[0],Ta[1],Ta[2])}wa.lineEnd()}function $b(W,wa){var Da=-1,La=W.length;for(wa.polygonStart();++Da<La;)lc(W[Da],wa,1);wa.polygonEnd()}function nc(){function W(jb,eb){jb*=Oe;eb=eb*Oe/2+Ce/4;var ib=jb-La,rb=0<=ib?1:-1;ib*=rb;var yb=Math.cos(eb);eb=Math.sin(eb);var Gb=Xa*eb;Bh.add(Math.atan2(Gb*rb*Math.sin(ib),Ta*yb+Gb*Math.cos(ib)));
La=jb;Ta=yb;Xa=eb}var wa,Da,La,Ta,Xa;pf.point=function(jb,eb){pf.point=W;La=(wa=jb)*Oe;Ta=Math.cos(eb=(Da=eb)*Oe/2+Ce/4);Xa=Math.sin(eb)};pf.lineEnd=function(){W(wa,Da)}}function xc(W){var wa=W[0];W=W[1];var Da=Math.cos(W);return[Da*Math.cos(wa),Da*Math.sin(wa),Math.sin(W)]}function Bc(W,wa){return W[0]*wa[0]+W[1]*wa[1]+W[2]*wa[2]}function Rc(W,wa){return[W[1]*wa[2]-W[2]*wa[1],W[2]*wa[0]-W[0]*wa[2],W[0]*wa[1]-W[1]*wa[0]]}function pd(W,wa){W[0]+=wa[0];W[1]+=wa[1];W[2]+=wa[2]}function Vc(W,wa){return[W[0]*
wa,W[1]*wa,W[2]*wa]}function xd(W){var wa=Math.sqrt(W[0]*W[0]+W[1]*W[1]+W[2]*W[2]);W[0]/=wa;W[1]/=wa;W[2]/=wa}function sd(W){return[Math.atan2(W[1],W[0]),ua(W[2])]}function Yc(W,wa){return 1E-6>Fe(W[0]-wa[0])&&1E-6>Fe(W[1]-wa[1])}function Hc(W,wa){W*=Oe;var Da=Math.cos(wa*=Oe);Cd(Da*Math.cos(W),Da*Math.sin(W),Math.sin(wa))}function Cd(W,wa,Da){++Ei;Ug+=(W-Ug)/Ei;Di+=(wa-Di)/Ei;lg+=(Da-lg)/Ei}function Kd(){function W(Ta,Xa){Ta*=Oe;var jb=Math.cos(Xa*=Oe),eb=jb*Math.cos(Ta);Ta=jb*Math.sin(Ta);Xa=Math.sin(Xa);
var ib=Math.atan2(Math.sqrt((ib=Da*Xa-La*Ta)*ib+(ib=La*eb-wa*Xa)*ib+(ib=wa*Ta-Da*eb)*ib),wa*eb+Da*Ta+La*Xa);Aj+=ib;Mi+=ib*(wa+(wa=eb));Fi+=ib*(Da+(Da=Ta));Hh+=ib*(La+(La=Xa));Cd(wa,Da,La)}var wa,Da,La;Uh.point=function(Ta,Xa){Ta*=Oe;var jb=Math.cos(Xa*=Oe);wa=jb*Math.cos(Ta);Da=jb*Math.sin(Ta);La=Math.sin(Xa);Uh.point=W;Cd(wa,Da,La)}}function Ld(){Uh.point=Hc}function kb(){function W(jb,eb){jb*=Oe;var ib=Math.cos(eb*=Oe),rb=ib*Math.cos(jb);jb=ib*Math.sin(jb);eb=Math.sin(eb);ib=Ta*eb-Xa*jb;var yb=
Xa*rb-La*eb,Gb=La*jb-Ta*rb,Qb=Math.sqrt(ib*ib+yb*yb+Gb*Gb),Wb=La*rb+Ta*jb+Xa*eb,gc=Qb&&-oa(Wb)/Qb;Qb=Math.atan2(Qb,Wb);ai+=gc*ib;Ih+=gc*yb;li+=gc*Gb;Aj+=Qb;Mi+=Qb*(La+(La=rb));Fi+=Qb*(Ta+(Ta=jb));Hh+=Qb*(Xa+(Xa=eb));Cd(La,Ta,Xa)}var wa,Da,La,Ta,Xa;Uh.point=function(jb,eb){wa=jb;Da=eb;Uh.point=W;jb*=Oe;var ib=Math.cos(eb*=Oe);La=ib*Math.cos(jb);Ta=ib*Math.sin(jb);Xa=Math.sin(eb);Cd(La,Ta,Xa)};Uh.lineEnd=function(){W(wa,Da);Uh.lineEnd=Ld;Uh.point=Hc}}function De(W,wa){function Da(La,Ta){return La=W(La,
Ta),wa(La[0],La[1])}W.invert&&wa.invert&&(Da.invert=function(La,Ta){return La=wa.invert(La,Ta),La&&W.invert(La[0],La[1])});return Da}function Hd(){return!0}function oe(W,wa,Da,La,Ta){var Xa=[],jb=[];W.forEach(function(Gb){if(!(0>=(Qb=Gb.length-1))){var Qb,Wb=Gb[0],gc=Gb[Qb];if(Yc(Wb,gc)){Ta.lineStart();for(gc=0;gc<Qb;++gc)Ta.point((Wb=Gb[gc])[0],Wb[1]);Ta.lineEnd()}else Qb=new Fd(Wb,Gb,null,!0),Wb=new Fd(Wb,null,Qb,!1),Qb.o=Wb,Xa.push(Qb),jb.push(Wb),Qb=new Fd(gc,Gb,null,!1),Wb=new Fd(gc,null,Qb,
!0),Qb.o=Wb,Xa.push(Qb),jb.push(Wb)}});jb.sort(wa);Ge(Xa);Ge(jb);if(Xa.length){W=0;wa=Da;for(Da=jb.length;W<Da;++W)jb[W].e=wa=!wa;wa=Xa[0];for(var eb,ib;;){for(var rb=wa,yb=!0;rb.v;)if((rb=rb.n)===wa)return;eb=rb.z;Ta.lineStart();do{rb.v=rb.o.v=!0;if(rb.e){if(yb)for(W=0,Da=eb.length;W<Da;++W)Ta.point((ib=eb[W])[0],ib[1]);else La(rb.x,rb.n.x,1,Ta);rb=rb.n}else{if(yb)for(eb=rb.p.z,W=eb.length-1;0<=W;--W)Ta.point((ib=eb[W])[0],ib[1]);else La(rb.x,rb.p.x,-1,Ta);rb=rb.p}rb=rb.o;eb=rb.z;yb=!yb}while(!rb.v);
Ta.lineEnd()}}}function Ge(W){if(wa=W.length){for(var wa,Da=0,La=W[0],Ta;++Da<wa;)La.n=Ta=W[Da],Ta.p=La,La=Ta;La.n=Ta=W[0];Ta.p=La}}function Fd(W,wa,Da,La){this.x=W;this.z=wa;this.o=Da;this.e=La;this.v=!1;this.n=this.p=null}function ge(W,wa,Da,La){return function(Ta,Xa){function jb(hc,wc){var Mc=Ta(hc,wc);W(hc=Mc[0],wc=Mc[1])&&Xa.point(hc,wc)}function eb(hc,wc){hc=Ta(hc,wc);Wb.point(hc[0],hc[1])}function ib(){mc.point=eb;Wb.lineStart()}function rb(){mc.point=jb;Wb.lineEnd()}function yb(hc,wc){jd.push([hc,
wc]);hc=Ta(hc,wc);Lc.point(hc[0],hc[1])}function Gb(){Lc.lineStart();jd=[]}function Qb(){yb(jd[0][0],jd[0][1]);Lc.lineEnd();var hc=Lc.clean(),wc=yc.buffer(),Mc=wc.length;jd.pop();Sc.push(jd);jd=null;if(Mc)if(hc&1){hc=wc[0];Mc=hc.length-1;wc=-1;var od;if(0<Mc){Tc||(Xa.polygonStart(),Tc=!0);for(Xa.lineStart();++wc<Mc;)Xa.point((od=hc[wc])[0],od[1]);Xa.lineEnd()}}else 1<Mc&&hc&2&&wc.push(wc.pop().concat(wc.shift())),rc.push(wc.filter(ff))}var Wb=wa(Xa),gc=Ta.invert(La[0],La[1]),mc={point:jb,lineStart:ib,
lineEnd:rb,polygonStart:function(){mc.point=yb;mc.lineStart=Gb;mc.lineEnd=Qb;rc=[];Sc=[]},polygonEnd:function(){mc.point=jb;mc.lineStart=ib;mc.lineEnd=rb;rc=Zb.merge(rc);var hc=gc;var wc=Sc;var Mc=hc[0],od=hc[1],md=[Math.sin(Mc),-Math.cos(Mc),0],qd=0,ed=0;Bh.reset();for(var Wd=0,we=wc.length;Wd<we;++Wd){var Ke=wc[Wd],Te=Ke.length;if(Te){var Se=Ke[0],ne=Se[0];hc=Se[1]/2+Ce/4;for(var Af=Math.sin(hc),He=Math.cos(hc),uf=1;;){uf===Te&&(uf=0);hc=Ke[uf];var Ze=hc[0],vg=hc[1]/2+Ce/4,hg=Math.sin(vg);vg=Math.cos(vg);
var ki=Ze-ne,Sh=0<=ki?1:-1,Ef=Sh*ki,Bf=Ef>Ce;Af*=hg;Bh.add(Math.atan2(Af*Sh*Math.sin(Ef),He*vg+Af*Math.cos(Ef)));qd+=Bf?ki+Sh*$f:ki;Bf^ne>=Mc^Ze>=Mc&&(Se=Rc(xc(Se),xc(hc)),xd(Se),ne=Rc(md,Se),xd(ne),ne=(Bf^0<=ki?-1:1)*ua(ne[2]),od>ne||od===ne&&(Se[0]||Se[1]))&&(ed+=Bf^0<=ki?1:-1);if(!uf++)break;ne=Ze;Af=hg;He=vg;Se=hc}}}wc=(-1E-6>qd||1E-6>qd&&-1E-6>Bh)^ed&1;rc.length?(Tc||(Xa.polygonStart(),Tc=!0),oe(rc,Pd,wc,Da,Xa)):wc&&(Tc||(Xa.polygonStart(),Tc=!0),Xa.lineStart(),Da(null,null,1,Xa),Xa.lineEnd());
Tc&&(Xa.polygonEnd(),Tc=!1);rc=Sc=null},sphere:function(){Xa.polygonStart();Xa.lineStart();Da(null,null,1,Xa);Xa.lineEnd();Xa.polygonEnd()}},rc,yc=Vd(),Lc=wa(yc),Tc=!1,Sc,jd;return mc}}function ff(W){return 1<W.length}function Vd(){var W=[],wa;return{lineStart:function(){W.push(wa=[])},point:function(Da,La){wa.push([Da,La])},lineEnd:z,buffer:function(){var Da=W;W=[];wa=null;return Da},rejoin:function(){1<W.length&&W.push(W.pop().concat(W.shift()))}}}function Pd(W,wa){return(0>(W=W.x)[0]?W[1]-Kf-1E-6:
Kf-W[1])-(0>(wa=wa.x)[0]?wa[1]-Kf-1E-6:Kf-wa[1])}function Ed(W){function wa(ib,rb){return Math.cos(ib)*Math.cos(rb)>Ta}function Da(ib,rb,yb){var Gb=xc(ib),Qb=xc(rb),Wb=[1,0,0];Qb=Rc(Gb,Qb);var gc=Bc(Qb,Qb);Gb=Qb[0];var mc=gc-Gb*Gb;if(!mc)return!yb&&ib;gc=Ta*gc/mc;mc=-Ta*Gb/mc;Gb=Rc(Wb,Qb);Wb=Vc(Wb,gc);Qb=Vc(Qb,mc);pd(Wb,Qb);Qb=Bc(Wb,Gb);gc=Bc(Gb,Gb);mc=Qb*Qb-gc*(Bc(Wb,Wb)-1);if(!(0>mc)){var rc=Math.sqrt(mc);mc=Vc(Gb,(-Qb-rc)/gc);pd(mc,Wb);mc=sd(mc);if(!yb)return mc;yb=ib[0];var yc=rb[0];ib=ib[1];
rb=rb[1];if(yc<yb){var Lc=yb;yb=yc;yc=Lc}var Tc=yc-yb,Sc=1E-6>Fe(Tc-Ce);!Sc&&rb<ib&&(Lc=ib,ib=rb,rb=Lc);if(Sc||1E-6>Tc?Sc?0<ib+rb^mc[1]<(1E-6>Fe(mc[0]-yb)?ib:rb):ib<=mc[1]&&mc[1]<=rb:Tc>Ce^(yb<=mc[0]&&mc[0]<=yc))return rb=Vc(Gb,(-Qb+rc)/gc),pd(rb,Wb),[mc,sd(rb)]}}function La(ib,rb){var yb=Xa?W:Ce-W,Gb=0;ib<-yb?Gb|=1:ib>yb&&(Gb|=2);rb<-yb?Gb|=4:rb>yb&&(Gb|=8);return Gb}var Ta=Math.cos(W),Xa=0<Ta,jb=1E-6<Fe(Ta),eb=zc(W,6*Oe);return ge(wa,function(ib){var rb,yb,Gb,Qb,Wb;return{lineStart:function(){Qb=
Gb=!1;Wb=1},point:function(gc,mc){var rc=[gc,mc],yc=wa(gc,mc);mc=Xa?yc?0:La(gc,mc):yc?La(gc+(0>gc?Ce:-Ce),mc):0;!rb&&(Qb=Gb=yc)&&ib.lineStart();yc!==Gb&&(gc=Da(rb,rc),Yc(rb,gc)||Yc(rc,gc))&&(rc[0]+=1E-6,rc[1]+=1E-6,yc=wa(rc[0],rc[1]));if(yc!==Gb)Wb=0,yc?(ib.lineStart(),gc=Da(rc,rb),ib.point(gc[0],gc[1])):(gc=Da(rb,rc),ib.point(gc[0],gc[1]),ib.lineEnd()),rb=gc;else if(jb&&rb&&Xa^yc){var Lc;mc&yb||!(Lc=Da(rc,rb,!0))||(Wb=0,Xa?(ib.lineStart(),ib.point(Lc[0][0],Lc[0][1]),ib.point(Lc[1][0],Lc[1][1]),ib.lineEnd()):
(ib.point(Lc[1][0],Lc[1][1]),ib.lineEnd(),ib.lineStart(),ib.point(Lc[0][0],Lc[0][1])))}!yc||rb&&Yc(rb,rc)||ib.point(rc[0],rc[1]);rb=rc;Gb=yc;yb=mc},lineEnd:function(){Gb&&ib.lineEnd();rb=null},clean:function(){return Wb|(Qb&&Gb)<<1}}},eb,Xa?[0,-W]:[-Ce,W-Ce])}function ke(W,wa,Da,La){return function(Ta){var Xa=Ta.a,jb=Ta.b,eb=Xa.x;Xa=Xa.y;var ib=0,rb=1,yb=jb.x-eb;jb=jb.y-Xa;var Gb=W-eb;if(yb||!(0<Gb)){Gb/=yb;if(0>yb){if(Gb<ib)return;Gb<rb&&(rb=Gb)}else if(0<yb){if(Gb>rb)return;Gb>ib&&(ib=Gb)}Gb=Da-
eb;if(yb||!(0>Gb)){Gb/=yb;if(0>yb){if(Gb>rb)return;Gb>ib&&(ib=Gb)}else if(0<yb){if(Gb<ib)return;Gb<rb&&(rb=Gb)}Gb=wa-Xa;if(jb||!(0<Gb)){Gb/=jb;if(0>jb){if(Gb<ib)return;Gb<rb&&(rb=Gb)}else if(0<jb){if(Gb>rb)return;Gb>ib&&(ib=Gb)}Gb=La-Xa;if(jb||!(0>Gb)){Gb/=jb;if(0>jb){if(Gb>rb)return;Gb>ib&&(ib=Gb)}else if(0<jb){if(Gb<ib)return;Gb<rb&&(rb=Gb)}0<ib&&(Ta.a={x:eb+ib*yb,y:Xa+ib*jb});1>rb&&(Ta.b={x:eb+rb*yb,y:Xa+rb*jb});return Ta}}}}}}function Xd(W,wa,Da,La){function Ta(eb,ib){return 1E-6>Fe(eb[0]-W)?
0<ib?0:3:1E-6>Fe(eb[0]-Da)?0<ib?2:1:1E-6>Fe(eb[1]-wa)?0<ib?1:0:0<ib?3:2}function Xa(eb,ib){return jb(eb.x,ib.x)}function jb(eb,ib){var rb=Ta(eb,1),yb=Ta(ib,1);return rb!==yb?rb-yb:0===rb?ib[1]-eb[1]:1===rb?eb[0]-ib[0]:2===rb?eb[1]-ib[1]:ib[0]-eb[0]}return function(eb){function ib(md,qd,ed,Wd){var we=0,Ke=0;if(null==md||(we=Ta(md,ed))!==(Ke=Ta(qd,ed))||0>jb(md,qd)^0<ed){do Wd.point(0===we||3===we?W:Da,1<we?La:wa);while((we=(we+ed+4)%4)!==Ke)}else Wd.point(qd[0],qd[1])}function rb(md,qd){W<=md&&md<=
Da&&wa<=qd&&qd<=La&&eb.point(md,qd)}function yb(md,qd){md=Math.max(-1E9,Math.min(1E9,md));qd=Math.max(-1E9,Math.min(1E9,qd));var ed=W<=md&&md<=Da&&wa<=qd&&qd<=La;mc&&rc.push([md,qd]);if(Mc)Lc=md,Tc=qd,Sc=ed,Mc=!1,ed&&(eb.lineStart(),eb.point(md,qd));else if(ed&&wc)eb.point(md,qd);else{var Wd={a:{x:jd,y:hc},b:{x:md,y:qd}};Wb(Wd)?(wc||(eb.lineStart(),eb.point(Wd.a.x,Wd.a.y)),eb.point(Wd.b.x,Wd.b.y),ed||eb.lineEnd(),od=!1):ed&&(eb.lineStart(),eb.point(md,qd),od=!1)}jd=md;hc=qd;wc=ed}var Gb=eb,Qb=Vd(),
Wb=ke(W,wa,Da,La),gc,mc,rc,yc={point:rb,lineStart:function(){yc.point=yb;mc&&mc.push(rc=[]);Mc=!0;wc=!1;jd=hc=NaN},lineEnd:function(){gc&&(yb(Lc,Tc),Sc&&wc&&Qb.rejoin(),gc.push(Qb.buffer()));yc.point=rb;wc&&eb.lineEnd()},polygonStart:function(){eb=Qb;gc=[];mc=[];od=!0},polygonEnd:function(){eb=Gb;gc=Zb.merge(gc);var md=[W,La];for(var qd=0,ed=mc.length,Wd=md[1],we=0;we<ed;++we)for(var Ke=1,Te=mc[we],Se=Te.length,ne=Te[0],Af;Ke<Se;++Ke)Af=Te[Ke],ne[1]<=Wd?Af[1]>Wd&&0<pa(ne,Af,md)&&++qd:Af[1]<=Wd&&0>
pa(ne,Af,md)&&--qd,ne=Af;md=0!==qd;qd=od&&md;ed=gc.length;if(qd||ed)eb.polygonStart(),qd&&(eb.lineStart(),ib(null,null,1,eb),eb.lineEnd()),ed&&oe(gc,Xa,md,ib,eb),eb.polygonEnd();gc=mc=rc=null}},Lc,Tc,Sc,jd,hc,wc,Mc,od;return yc}}function Ve(W){var wa=0,Da=Ce/3,La=oc(W);W=La(wa,Da);W.parallels=function(Ta){return arguments.length?La(wa=Ta[0]*Ce/180,Da=Ta[1]*Ce/180):[wa/Ce*180,Da/Ce*180]};return W}function Yd(W,wa){function Da(jb,eb){eb=Math.sqrt(Ta-2*La*Math.sin(eb))/La;return[eb*Math.sin(jb*=La),
Xa-eb*Math.cos(jb)]}W=Math.sin(W);var La=(W+Math.sin(wa))/2,Ta=1+W*(2*La-W),Xa=Math.sqrt(Ta)/La;Da.invert=function(jb,eb){eb=Xa-eb;return[Math.atan2(jb,eb)/La,ua((Ta-(jb*jb+eb*eb)*La*La)/(2*La))]};return Da}function yf(){function W(Xa,jb){dk+=Ta*Xa-La*jb;La=Xa;Ta=jb}var wa,Da,La,Ta;mi.point=function(Xa,jb){mi.point=W;wa=La=Xa;Da=Ta=jb};mi.lineEnd=function(){W(wa,Da)}}function Lf(){function W(ib,rb){jb.push("M",ib,",",rb,Xa)}function wa(ib,rb){jb.push("M",ib,",",rb);eb.point=Da}function Da(ib,rb){jb.push("L",
ib,",",rb)}function La(){eb.point=W}function Ta(){jb.push("Z")}var Xa=Cf(4.5),jb=[],eb={point:W,lineStart:function(){eb.point=wa},lineEnd:La,polygonStart:function(){eb.lineEnd=Ta},polygonEnd:function(){eb.lineEnd=La;eb.point=W},pointRadius:function(ib){Xa=Cf(ib);return eb},result:function(){if(jb.length){var ib=jb.join("");jb=[];return ib}}};return eb}function Cf(W){return"m0,"+W+"a"+W+","+W+" 0 1,1 0,"+-2*W+"a"+W+","+W+" 0 1,1 0,"+2*W+"z"}function tc(W,wa){Ug+=W;Di+=wa;++lg}function Fc(){function W(La,
Ta){var Xa=La-wa,jb=Ta-Da;Xa=Math.sqrt(Xa*Xa+jb*jb);Mi+=Xa*(wa+La)/2;Fi+=Xa*(Da+Ta)/2;Hh+=Xa;tc(wa=La,Da=Ta)}var wa,Da;Wh.point=function(La,Ta){Wh.point=W;tc(wa=La,Da=Ta)}}function Wc(){Wh.point=tc}function hd(){function W(Xa,jb){var eb=Xa-La,ib=jb-Ta;eb=Math.sqrt(eb*eb+ib*ib);Mi+=eb*(La+Xa)/2;Fi+=eb*(Ta+jb)/2;Hh+=eb;eb=Ta*Xa-La*jb;ai+=eb*(La+Xa);Ih+=eb*(Ta+jb);li+=3*eb;tc(La=Xa,Ta=jb)}var wa,Da,La,Ta;Wh.point=function(Xa,jb){Wh.point=W;tc(wa=La=Xa,Da=Ta=jb)};Wh.lineEnd=function(){W(wa,Da)}}function be(W){function wa(ib,
rb){W.moveTo(ib+jb,rb);W.arc(ib,rb,jb,0,$f)}function Da(ib,rb){W.moveTo(ib,rb);eb.point=La}function La(ib,rb){W.lineTo(ib,rb)}function Ta(){eb.point=wa}function Xa(){W.closePath()}var jb=4.5,eb={point:wa,lineStart:function(){eb.point=Da},lineEnd:Ta,polygonStart:function(){eb.lineEnd=Xa},polygonEnd:function(){eb.lineEnd=Ta;eb.point=wa},pointRadius:function(ib){jb=ib;return eb},result:z};return eb}function pe(W){function wa(ib){return(eb?La:Da)(ib)}function Da(ib){return Be(ib,function(rb,yb){rb=W(rb,
yb);ib.point(rb[0],rb[1])})}function La(ib){function rb(Wd,we){Wd=W(Wd,we);ib.point(Wd[0],Wd[1])}function yb(){wc=NaN;ed.point=Gb;ib.lineStart()}function Gb(Wd,we){var Ke=xc([Wd,we]);we=W(Wd,we);Ta(wc,Mc,hc,od,md,qd,wc=we[0],Mc=we[1],hc=Wd,od=Ke[0],md=Ke[1],qd=Ke[2],eb,ib);ib.point(wc,Mc)}function Qb(){ed.point=rb;ib.lineEnd()}function Wb(){yb();ed.point=gc;ed.lineEnd=mc}function gc(Wd,we){Gb(rc=Wd,we);yc=wc;Lc=Mc;Tc=od;Sc=md;jd=qd;ed.point=Gb}function mc(){Ta(wc,Mc,hc,od,md,qd,yc,Lc,rc,Tc,Sc,jd,
eb,ib);ed.lineEnd=Qb;Qb()}var rc,yc,Lc,Tc,Sc,jd,hc,wc,Mc,od,md,qd,ed={point:rb,lineStart:yb,lineEnd:Qb,polygonStart:function(){ib.polygonStart();ed.lineStart=Wb},polygonEnd:function(){ib.polygonEnd();ed.lineStart=yb}};return ed}function Ta(ib,rb,yb,Gb,Qb,Wb,gc,mc,rc,yc,Lc,Tc,Sc,jd){var hc=gc-ib,wc=mc-rb,Mc=hc*hc+wc*wc;if(Mc>4*Xa&&Sc--){var od=Gb+yc,md=Qb+Lc,qd=Wb+Tc,ed=Math.sqrt(od*od+md*md+qd*qd),Wd=Math.asin(qd/=ed),we=1E-6>Fe(Fe(qd)-1)||1E-6>Fe(yb-rc)?(yb+rc)/2:Math.atan2(md,od),Ke=W(we,Wd);Wd=
Ke[0];Ke=Ke[1];var Te=Wd-ib,Se=Ke-rb,ne=wc*Te-hc*Se;if(ne*ne/Mc>Xa||.3<Fe((hc*Te+wc*Se)/Mc-.5)||Gb*yc+Qb*Lc+Wb*Tc<jb)Ta(ib,rb,yb,Gb,Qb,Wb,Wd,Ke,we,od/=ed,md/=ed,qd,Sc,jd),jd.point(Wd,Ke),Ta(Wd,Ke,we,od,md,qd,gc,mc,rc,yc,Lc,Tc,Sc,jd)}}var Xa=.5,jb=Math.cos(30*Oe),eb=16;wa.precision=function(ib){if(!arguments.length)return Math.sqrt(Xa);eb=0<(Xa=ib*ib)&&16;return wa};return wa}function ce(W){var wa=pe(function(Da,La){return W([Da*Jf,La*Jf])});return function(Da){return vc(wa(Da))}}function de(W){this.stream=
W}function Be(W,wa){return{point:wa,sphere:function(){W.sphere()},lineStart:function(){W.lineStart()},lineEnd:function(){W.lineEnd()},polygonStart:function(){W.polygonStart()},polygonEnd:function(){W.polygonEnd()}}}function Ue(W){return oc(function(){return W})()}function oc(W){function wa(Mc){Mc=eb(Mc[0]*Oe,Mc[1]*Oe);return[Mc[0]*rb+yc,Lc-Mc[1]*rb]}function Da(Mc){return(Mc=eb.invert((Mc[0]-yc)/rb,(Lc-Mc[1])/rb))&&[Mc[0]*Jf,Mc[1]*Jf]}function La(){eb=De(jb=$c(gc,mc,rc),Xa);var Mc=Xa(Qb,Wb);yc=yb-
Mc[0]*rb;Lc=Gb+Mc[1]*rb;return Ta()}function Ta(){wc&&(wc.valid=!1,wc=null);return wa}var Xa,jb,eb,ib=pe(function(Mc,od){Mc=Xa(Mc,od);return[Mc[0]*rb+yc,Lc-Mc[1]*rb]}),rb=150,yb=480,Gb=250,Qb=0,Wb=0,gc=0,mc=0,rc=0,yc,Lc,Tc=Vh,Sc=x,jd=null,hc=null,wc;wa.stream=function(Mc){wc&&(wc.valid=!1);wc=vc(Tc(jb,ib(Sc(Mc))));wc.valid=!0;return wc};wa.clipAngle=function(Mc){if(!arguments.length)return jd;Tc=null==Mc?(jd=Mc,Vh):Ed((jd=+Mc)*Oe);return Ta()};wa.clipExtent=function(Mc){if(!arguments.length)return hc;
Sc=(hc=Mc)?Xd(Mc[0][0],Mc[0][1],Mc[1][0],Mc[1][1]):x;return Ta()};wa.scale=function(Mc){if(!arguments.length)return rb;rb=+Mc;return La()};wa.translate=function(Mc){if(!arguments.length)return[yb,Gb];yb=+Mc[0];Gb=+Mc[1];return La()};wa.center=function(Mc){if(!arguments.length)return[Qb*Jf,Wb*Jf];Qb=Mc[0]%360*Oe;Wb=Mc[1]%360*Oe;return La()};wa.rotate=function(Mc){if(!arguments.length)return[gc*Jf,mc*Jf,rc*Jf];gc=Mc[0]%360*Oe;mc=Mc[1]%360*Oe;rc=2<Mc.length?Mc[2]%360*Oe:0;return La()};Zb.rebind(wa,ib,
"precision");return function(){Xa=W.apply(this,arguments);wa.invert=Xa.invert&&Da;return La()}}function vc(W){return Be(W,function(wa,Da){W.point(wa*Oe,Da*Oe)})}function Zc(W,wa){return[W,wa]}function ld(W,wa){return[W>Ce?W-$f:W<-Ce?W+$f:W,wa]}function $c(W,wa,Da){return W?wa||Da?De(ad(W),Jc(wa,Da)):ad(W):wa||Da?Jc(wa,Da):ld}function Oc(W){return function(wa,Da){return wa+=W,[wa>Ce?wa-$f:wa<-Ce?wa+$f:wa,Da]}}function ad(W){var wa=Oc(W);wa.invert=Oc(-W);return wa}function Jc(W,wa){function Da(eb,ib){var rb=
Math.cos(ib),yb=Math.cos(eb)*rb;eb=Math.sin(eb)*rb;ib=Math.sin(ib);rb=ib*La+yb*Ta;return[Math.atan2(eb*Xa-rb*jb,yb*La-ib*Ta),ua(rb*Xa+eb*jb)]}var La=Math.cos(W),Ta=Math.sin(W),Xa=Math.cos(wa),jb=Math.sin(wa);Da.invert=function(eb,ib){var rb=Math.cos(ib),yb=Math.cos(eb)*rb;eb=Math.sin(eb)*rb;ib=Math.sin(ib);rb=ib*Xa-eb*jb;return[Math.atan2(eb*Xa+ib*jb,yb*La+rb*Ta),ua(rb*La-yb*Ta)]};return Da}function zc(W,wa){var Da=Math.cos(W),La=Math.sin(W);return function(Ta,Xa,jb,eb){var ib=jb*wa;if(null!=Ta){if(Ta=
Dc(Da,Ta),Xa=Dc(Da,Xa),0<jb?Ta<Xa:Ta>Xa)Ta+=jb*$f}else Ta=W+jb*$f,Xa=W-.5*ib;for(var rb;0<jb?Ta>Xa:Ta<Xa;Ta-=ib)eb.point((rb=sd([Da,-La*Math.cos(Ta),-La*Math.sin(Ta)]))[0],rb[1])}}function Dc(W,wa){wa=xc(wa);wa[0]-=W;xd(wa);W=oa(-wa[1]);return((0>-wa[2]?-W:W)+2*Math.PI-1E-6)%(2*Math.PI)}function Gc(W,wa,Da){var La=Zb.range(W,wa-1E-6,Da).concat(wa);return function(Ta){return La.map(function(Xa){return[Ta,Xa]})}}function ud(W,wa,Da){var La=Zb.range(W,wa-1E-6,Da).concat(wa);return function(Ta){return La.map(function(Xa){return[Xa,
Ta]})}}function Od(W){return W.source}function Gd(W){return W.target}function $d(W,wa,Da,La){var Ta=Math.cos(wa),Xa=Math.sin(wa),jb=Math.cos(La),eb=Math.sin(La),ib=Ta*Math.cos(W),rb=Ta*Math.sin(W),yb=jb*Math.cos(Da),Gb=jb*Math.sin(Da),Qb=2*Math.asin(Math.sqrt(ja(La-wa)+Ta*jb*ja(Da-W))),Wb=1/Math.sin(Qb);Da=Qb?function(gc){var mc=Math.sin(gc*=Qb)*Wb;gc=Math.sin(Qb-gc)*Wb;var rc=gc*ib+mc*yb,yc=gc*rb+mc*Gb;return[Math.atan2(yc,rc)*Jf,Math.atan2(gc*Xa+mc*eb,Math.sqrt(rc*rc+yc*yc))*Jf]}:function(){return[W*
Jf,wa*Jf]};Da.distance=Qb;return Da}function zd(W,wa){function Da(La,Ta){var Xa=Math.cos(Ta),jb=W(Math.cos(La)*Xa);return[jb*Xa*Math.sin(La),jb*Math.sin(Ta)]}Da.invert=function(La,Ta){var Xa=Math.sqrt(La*La+Ta*Ta),jb=wa(Xa),eb=Math.sin(jb);return[Math.atan2(La*eb,Xa*Math.cos(jb)),Math.asin(Xa&&Ta*eb/Xa)]};return Da}function Le(W,wa){function Da(jb,eb){0<Xa?eb<-Kf+1E-6&&(eb=-Kf+1E-6):eb>Kf-1E-6&&(eb=Kf-1E-6);eb=Xa/Math.pow(Math.tan(Ce/4+eb/2),Ta);return[eb*Math.sin(Ta*jb),Xa-eb*Math.cos(Ta*jb)]}var La=
Math.cos(W),Ta=W===wa?Math.sin(W):Math.log(La/Math.cos(wa))/Math.log(Math.tan(Ce/4+wa/2)/Math.tan(Ce/4+W/2)),Xa=La*Math.pow(Math.tan(Ce/4+W/2),Ta)/Ta;if(!Ta)return gf;Da.invert=function(jb,eb){eb=Xa-eb;return[Math.atan2(jb,eb)/Ta,2*Math.atan(Math.pow(Xa/((0<Ta?1:0>Ta?-1:0)*Math.sqrt(jb*jb+eb*eb)),1/Ta))-Kf]};return Da}function Xe(W,wa){function Da(jb,eb){eb=Xa-eb;return[eb*Math.sin(Ta*jb),Xa-eb*Math.cos(Ta*jb)]}var La=Math.cos(W),Ta=W===wa?Math.sin(W):(La-Math.cos(wa))/(wa-W),Xa=La/Ta+W;if(1E-6>Fe(Ta))return Zc;
Da.invert=function(jb,eb){eb=Xa-eb;return[Math.atan2(jb,eb)/Ta,Xa-(0<Ta?1:0>Ta?-1:0)*Math.sqrt(jb*jb+eb*eb)]};return Da}function gf(W,wa){return[W,Math.log(Math.tan(Ce/4+wa/2))]}function Me(W){var wa=Ue(W),Da=wa.scale,La=wa.translate,Ta=wa.clipExtent,Xa;wa.scale=function(){var jb=Da.apply(wa,arguments);return jb===wa?Xa?wa.clipExtent(null):wa:jb};wa.translate=function(){var jb=La.apply(wa,arguments);return jb===wa?Xa?wa.clipExtent(null):wa:jb};wa.clipExtent=function(jb){var eb=Ta.apply(wa,arguments);
if(eb===wa){if(Xa=null==jb){var ib=Ce*Da(),rb=La();Ta([[rb[0]-ib,rb[1]-ib],[rb[0]+ib,rb[1]+ib]])}}else Xa&&(eb=null);return eb};return wa.clipExtent(null)}function hf(W,wa){return[Math.log(Math.tan(Ce/4+wa/2)),-W]}function Uf(W){return W[0]}function eh(W){return W[1]}function Fg(W){for(var wa=W.length,Da=[0,1],La=2,Ta=2;Ta<wa;Ta++){for(;1<La&&0>=pa(W[Da[La-2]],W[Da[La-1]],W[Ta]);)--La;Da[La++]=Ta}return Da.slice(0,La)}function si(W,wa){return W[0]-wa[0]||W[1]-wa[1]}function Lh(W,wa,Da){return(Da[0]-
wa[0])*(W[1]-wa[1])<(Da[1]-wa[1])*(W[0]-wa[0])}function di(W,wa,Da,La){var Ta=W[0],Xa=Da[0],jb=wa[0]-Ta,eb=La[0]-Xa;W=W[1];Da=Da[1];wa=wa[1]-W;La=La[1]-Da;Xa=(eb*(W-Da)-La*(Ta-Xa))/(La*jb-eb*wa);return[Ta+Xa*jb,W+Xa*wa]}function rh(W){var wa=W[0];W=W[W.length-1];return!(wa[0]-W[0]||wa[1]-W[1])}function Gg(){Bg(this);this.edge=this.site=this.circle=null}function ti(W){var wa=pg.pop()||new Gg;wa.site=W;return wa}function eg(W){sh(W);Nj.remove(W);pg.push(W);Bg(W)}function Qf(W,wa){var Da=W.site,La=Da.x,
Ta=Da.y,Xa=Ta-wa;if(!Xa)return La;W=W.P;if(!W)return-Infinity;Da=W.site;W=Da.x;Da=Da.y;wa=Da-wa;if(!wa)return W;var jb=W-La,eb=1/Xa-1/wa,ib=jb/wa;return eb?(-ib+Math.sqrt(ib*ib-2*eb*(jb*jb/(-2*wa)-Da+wa/2+Ta-Xa/2)))/eb+La:(La+W)/2}function Rf(W){this.site=W;this.edges=[]}function Of(W,wa){return wa.angle-W.angle}function Ii(){Bg(this);this.x=this.y=this.arc=this.site=this.cy=null}function Yg(W){var wa=W.P,Da=W.N;if(wa&&Da){var La=wa.site;wa=W.site;var Ta=Da.site;if(La!==Ta){Da=wa.x;var Xa=wa.y,jb=
La.x-Da,eb=La.y-Xa;La=Ta.x-Da;Ta=Ta.y-Xa;var ib=2*(jb*Ta-eb*La);if(!(-1E-12<=ib)){var rb=jb*jb+eb*eb,yb=La*La+Ta*Ta;eb=(Ta*rb-eb*yb)/ib;jb=(jb*yb-La*rb)/ib;Ta=jb+Xa;Xa=dl.pop()||new Ii;Xa.arc=W;Xa.site=wa;Xa.x=eb+Da;Xa.y=Ta+Math.sqrt(eb*eb+jb*jb);Xa.cy=Ta;W.circle=Xa;W=null;for(wa=ek._;wa;)if(Xa.y<wa.y||Xa.y===wa.y&&Xa.x<=wa.x)if(wa.L)wa=wa.L;else{W=wa.P;break}else if(wa.R)wa=wa.R;else{W=wa;break}ek.insert(W,Xa);W||(Mk=Xa)}}}}function sh(W){var wa=W.circle;wa&&(wa.P||(Mk=wa.N),ek.remove(wa),dl.push(wa),
Bg(wa),W.circle=null)}function Vi(W,wa){var Da=W.b;if(Da)return!0;var La=W.a;Da=wa[0][0];var Ta=wa[1][0],Xa=wa[0][1];wa=wa[1][1];var jb=W.l,eb=W.r,ib=jb.x;jb=jb.y;var rb=eb.x;eb=eb.y;var yb=(ib+rb)/2;if(eb===jb){if(yb<Da||yb>=Ta)return;if(ib>rb){if(!La)La={x:yb,y:Xa};else if(La.y>=wa)return;Da={x:yb,y:wa}}else{if(!La)La={x:yb,y:wa};else if(La.y<Xa)return;Da={x:yb,y:Xa}}}else{var Gb=(ib-rb)/(eb-jb);yb=(jb+eb)/2-Gb*yb;if(-1>Gb||1<Gb)if(ib>rb){if(!La)La={x:(Xa-yb)/Gb,y:Xa};else if(La.y>=wa)return;Da=
{x:(wa-yb)/Gb,y:wa}}else{if(!La)La={x:(wa-yb)/Gb,y:wa};else if(La.y<Xa)return;Da={x:(Xa-yb)/Gb,y:Xa}}else if(jb<eb){if(!La)La={x:Da,y:Gb*Da+yb};else if(La.x>=Ta)return;Da={x:Ta,y:Gb*Ta+yb}}else{if(!La)La={x:Ta,y:Gb*Ta+yb};else if(La.x<Da)return;Da={x:Da,y:Gb*Da+yb}}}W.a=La;W.b=Da;return!0}function th(W,wa){this.l=W;this.r=wa;this.a=this.b=null}function Hg(W,wa,Da,La){var Ta=new th(W,wa);Mj.push(Ta);Da&&ei(Ta,W,wa,Da);La&&ei(Ta,wa,W,La);tj[W.i].edges.push(new uh(Ta,W,wa));tj[wa.i].edges.push(new uh(Ta,
wa,W));return Ta}function Mh(W,wa,Da){W=new th(W,null);W.a=wa;W.b=Da;Mj.push(W);return W}function ei(W,wa,Da,La){W.a||W.b?W.l===Da?W.b=La:W.a=La:(W.a=La,W.l=wa,W.r=Da)}function uh(W,wa,Da){var La=W.a,Ta=W.b;this.edge=W;this.site=wa;this.angle=Da?Math.atan2(Da.y-wa.y,Da.x-wa.x):W.l===wa?Math.atan2(Ta.x-La.x,La.y-Ta.y):Math.atan2(La.x-Ta.x,Ta.y-La.y)}function jf(){this._=null}function Bg(W){W.U=W.C=W.L=W.R=W.P=W.N=null}function Nh(W,wa){var Da=wa.R,La=wa.U;La?La.L===wa?La.L=Da:La.R=Da:W._=Da;Da.U=La;
wa.U=Da;wa.R=Da.L;wa.R&&(wa.R.U=wa);Da.L=wa}function Oh(W,wa){var Da=wa.L,La=wa.U;La?La.L===wa?La.L=Da:La.R=Da:W._=Da;Da.U=La;wa.U=Da;wa.L=Da.R;wa.L&&(wa.L.U=wa);Da.R=wa}function Wi(W){for(;W.L;)W=W.L;return W}function ui(W,wa){var Da=W.sort(Ji).pop(),La;Mj=[];tj=Array(W.length);Nj=new jf;for(ek=new jf;;){var Ta=Mk;if(Da&&(!Ta||Da.y<Ta.y||Da.y===Ta.y&&Da.x<Ta.x)){if(Da.x!==La||Da.y!==Xa){tj[Da.i]=new Rf(Da);var Xa=La=void 0;Ta=Da;for(var jb=Ta.x,eb=Ta.y,ib=Nj._;ib;){var rb=Qf(ib,eb)-jb;if(1E-6<rb)ib=
ib.L;else{var yb=ib;var Gb=eb;var Qb=yb.N;Qb?Gb=Qf(Qb,Gb):(yb=yb.site,Gb=yb.y===Gb?yb.x:Infinity);Gb=jb-Gb;if(1E-6<Gb){if(!ib.R){Xa=ib;break}ib=ib.R}else{-1E-6<rb?(Xa=ib.P,La=ib):-1E-6<Gb?(Xa=ib,La=ib.N):Xa=La=ib;break}}}rb=ti(Ta);Nj.insert(Xa,rb);if(Xa||La)if(Xa===La)sh(Xa),La=ti(Xa.site),Nj.insert(rb,La),rb.edge=La.edge=Hg(Xa.site,rb.site),Yg(Xa),Yg(La);else if(La){sh(Xa);sh(La);jb=Xa.site;ib=jb.x;Gb=jb.y;yb=Ta.x-ib;Qb=Ta.y-Gb;eb=La.site;var Wb=eb.x-ib,gc=eb.y-Gb,mc=2*(yb*gc-Qb*Wb),rc=yb*yb+Qb*
Qb,yc=Wb*Wb+gc*gc;ib={x:(gc*rc-Qb*yc)/mc+ib,y:(yb*yc-Wb*rc)/mc+Gb};ei(La.edge,jb,eb,ib);rb.edge=Hg(jb,Ta,null,ib);La.edge=Hg(Ta,eb,null,ib);Yg(Xa);Yg(La)}else rb.edge=Hg(Xa.site,rb.site);La=Da.x;Xa=Da.y}Da=W.pop()}else if(Ta){eb=Ta.arc;Ta=eb.circle;jb=Ta.x;ib=Ta.cy;Ta={x:jb,y:ib};yb=eb.P;Gb=eb.N;rb=[eb];eg(eb);for(eb=yb;eb.circle&&1E-6>Fe(jb-eb.circle.x)&&1E-6>Fe(ib-eb.circle.cy);)yb=eb.P,rb.unshift(eb),eg(eb),eb=yb;rb.unshift(eb);sh(eb);for(yb=Gb;yb.circle&&1E-6>Fe(jb-yb.circle.x)&&1E-6>Fe(ib-yb.circle.cy);)Gb=
yb.N,rb.push(yb),eg(yb),yb=Gb;rb.push(yb);sh(yb);ib=rb.length;for(jb=1;jb<ib;++jb)yb=rb[jb],eb=rb[jb-1],ei(yb.edge,eb.site,yb.site,Ta);eb=rb[0];yb=rb[ib-1];yb.edge=Hg(eb.site,yb.site,null,Ta);Yg(eb);Yg(yb)}else break}if(wa){W=Mj;Da=ke(wa[0][0],wa[0][1],wa[1][0],wa[1][1]);for(La=W.length;La--;)if(Xa=W[La],!Vi(Xa,wa)||!Da(Xa)||1E-6>Fe(Xa.a.x-Xa.b.x)&&1E-6>Fe(Xa.a.y-Xa.b.y))Xa.a=Xa.b=null,W.splice(La,1);W=wa[0][0];Da=wa[1][0];La=wa[0][1];wa=wa[1][1];jb=tj;for(eb=jb.length;eb--;)if((ib=jb[eb])&&ib.prepare())for(yb=
ib.edges,Qb=yb.length,Gb=0;Gb<Qb;)if(Wb=yb[Gb].end(),Ta=Wb.x,rb=Wb.y,gc=yb[++Gb%Qb].start(),Xa=gc.x,gc=gc.y,1E-6<Fe(Ta-Xa)||1E-6<Fe(rb-gc))yb.splice(Gb,0,new uh(Mh(ib.site,Wb,1E-6>Fe(Ta-W)&&1E-6<wa-rb?{x:W,y:1E-6>Fe(Xa-W)?gc:wa}:1E-6>Fe(rb-wa)&&1E-6<Da-Ta?{x:1E-6>Fe(gc-wa)?Xa:Da,y:wa}:1E-6>Fe(Ta-Da)&&1E-6<rb-La?{x:Da,y:1E-6>Fe(Xa-Da)?gc:La}:1E-6>Fe(rb-La)&&1E-6<Ta-W?{x:1E-6>Fe(gc-La)?Xa:W,y:La}:null),ib.site,null)),++Qb}wa={cells:tj,edges:Mj};Nj=ek=Mj=tj=null;return wa}function Ji(W,wa){return wa.y-
W.y||wa.x-W.x}function fi(W){return W.x}function fh(W){return W.y}function Ph(){return{leaf:!0,nodes:[],point:null,x:null,y:null}}function Qh(W,wa,Da,La,Ta,Xa){if(!W(wa,Da,La,Ta,Xa)){var jb=.5*(Da+Ta),eb=.5*(La+Xa);wa=wa.nodes;wa[0]&&Qh(W,wa[0],Da,La,jb,eb);wa[1]&&Qh(W,wa[1],jb,La,Ta,eb);wa[2]&&Qh(W,wa[2],Da,eb,jb,Xa);wa[3]&&Qh(W,wa[3],jb,eb,Ta,Xa)}}function vi(W,wa,Da,La,Ta,Xa,jb){var eb=Infinity,ib;(function mc(yb,Gb,Qb,Wb,gc){if(!(Gb>Xa||Qb>jb||Wb<La||gc<Ta)){if(rc=yb.point){var rc,yc=wa-yb.x,
Lc=Da-yb.y;yc=yc*yc+Lc*Lc;yc<eb&&(yc=Math.sqrt(eb=yc),La=wa-yc,Ta=Da-yc,Xa=wa+yc,jb=Da+yc,ib=rc)}rc=yb.nodes;yc=.5*(Gb+Wb);Lc=.5*(Qb+gc);for(var Tc=(Da>=Lc)<<1|wa>=yc,Sc=Tc+4;Tc<Sc;++Tc)if(yb=rc[Tc&3])switch(Tc&3){case 0:mc(yb,Gb,Qb,yc,Lc);break;case 1:mc(yb,yc,Qb,Wb,Lc);break;case 2:mc(yb,Gb,Lc,yc,gc);break;case 3:mc(yb,yc,Lc,Wb,gc)}}})(W,La,Ta,Xa,jb);return ib}function vh(W,wa){W=Zb.rgb(W);wa=Zb.rgb(wa);var Da=W.r,La=W.g,Ta=W.b,Xa=wa.r-Da,jb=wa.g-La,eb=wa.b-Ta;return function(ib){return"#"+Ea(Math.round(Da+
Xa*ib))+Ea(Math.round(La+jb*ib))+Ea(Math.round(Ta+eb*ib))}}function Qg(W,wa){var Da={},La={},Ta;for(Ta in W)Ta in wa?Da[Ta]=Zg(W[Ta],wa[Ta]):La[Ta]=W[Ta];for(Ta in wa)Ta in W||(La[Ta]=wa[Ta]);return function(Xa){for(Ta in Da)La[Ta]=Da[Ta](Xa);return La}}function Pf(W,wa){W=+W;wa=+wa;return function(Da){return W*(1-Da)+wa*Da}}function Xi(W,wa){var Da=dj.lastIndex=Vk.lastIndex=0,La,Ta,Xa,jb=-1,eb=[],ib=[];W+="";for(wa+="";(La=dj.exec(W))&&(Ta=Vk.exec(wa));)(Xa=Ta.index)>Da&&(Xa=wa.slice(Da,Xa),eb[jb]?
eb[jb]+=Xa:eb[++jb]=Xa),(La=La[0])===(Ta=Ta[0])?eb[jb]?eb[jb]+=Ta:eb[++jb]=Ta:(eb[++jb]=null,ib.push({i:jb,x:Pf(La,Ta)})),Da=Vk.lastIndex;Da<wa.length&&(Xa=wa.slice(Da),eb[jb]?eb[jb]+=Xa:eb[++jb]=Xa);return 2>eb.length?ib[0]?(wa=ib[0].x,function(rb){return wa(rb)+""}):function(){return wa}:(wa=ib.length,function(rb){for(var yb=0,Gb;yb<wa;++yb)eb[(Gb=ib[yb]).i]=Gb.x(rb);return eb.join("")})}function Zg(W,wa){for(var Da=Zb.interpolators.length,La;0<=--Da&&!(La=Zb.interpolators[Da](W,wa)););return La}
function hi(W,wa){var Da=[],La=[],Ta=W.length,Xa=wa.length,jb=Math.min(W.length,wa.length),eb;for(eb=0;eb<jb;++eb)Da.push(Zg(W[eb],wa[eb]));for(;eb<Ta;++eb)La[eb]=W[eb];for(;eb<Xa;++eb)La[eb]=wa[eb];return function(ib){for(eb=0;eb<jb;++eb)La[eb]=Da[eb](ib);return La}}function wi(W){return function(wa){return 0>=wa?0:1<=wa?1:W(wa)}}function Rg(W){return function(wa){return 1-W(1-wa)}}function zf(W){return function(wa){return.5*(.5>wa?W(2*wa):2-W(2-2*wa))}}function ii(W){return W*W}function gh(W){return W*
W*W}function wh(W){if(0>=W)return 0;if(1<=W)return 1;var wa=W*W,Da=wa*W;return 4*(.5>W?Da:3*(W-wa)+Da-.75)}function tf(W){return 1-Math.cos(W*Kf)}function cf(W){return Math.pow(2,10*(W-1))}function gg(W){return 1-Math.sqrt(1-W*W)}function Mf(W){return W<1/2.75?7.5625*W*W:W<2/2.75?7.5625*(W-=1.5/2.75)*W+.75:W<2.5/2.75?7.5625*(W-=2.25/2.75)*W+.9375:7.5625*(W-=2.625/2.75)*W+.984375}function ji(W,wa){wa-=W;return function(Da){return Math.round(W+wa*Da)}}function Zi(W){var wa=[W.a,W.b],Da=[W.c,W.d],La=
kj(wa),Ta=wa[0]*Da[0]+wa[1]*Da[1],Xa=-Ta;Da[0]+=Xa*wa[0];Da[1]+=Xa*wa[1];Xa=kj(Da)||0;wa[0]*Da[1]<Da[0]*wa[1]&&(wa[0]*=-1,wa[1]*=-1,La*=-1,Ta*=-1);this.rotate=(La?Math.atan2(wa[1],wa[0]):Math.atan2(-Da[0],Da[1]))*Jf;this.translate=[W.e,W.f];this.scale=[La,Xa];this.skew=Xa?Math.atan2(Ta,Xa)*Jf:0}function kj(W){var wa=Math.sqrt(W[0]*W[0]+W[1]*W[1]);wa&&(W[0]/=wa,W[1]/=wa);return wa}function xh(W){return W.length?W.pop()+",":""}function hh(W,wa,Da,La){W[0]!==wa[0]||W[1]!==wa[1]?(Da=Da.push("translate(",
null,",",null,")"),La.push({i:Da-4,x:Pf(W[0],wa[0])},{i:Da-2,x:Pf(W[1],wa[1])})):(wa[0]||wa[1])&&Da.push("translate("+wa+")")}function wg(W,wa,Da,La){W!==wa?(180<W-wa?wa+=360:180<wa-W&&(W+=360),La.push({i:Da.push(xh(Da)+"rotate(",null,")")-2,x:Pf(W,wa)})):wa&&Da.push(xh(Da)+"rotate("+wa+")")}function zh(W,wa,Da,La){W!==wa?La.push({i:Da.push(xh(Da)+"skewX(",null,")")-2,x:Pf(W,wa)}):wa&&Da.push(xh(Da)+"skewX("+wa+")")}function Zj(W,wa,Da,La){W[0]!==wa[0]||W[1]!==wa[1]?(Da=Da.push(xh(Da)+"scale(",null,
",",null,")"),La.push({i:Da-4,x:Pf(W[0],wa[0])},{i:Da-2,x:Pf(W[1],wa[1])})):1===wa[0]&&1===wa[1]||Da.push(xh(Da)+"scale("+wa+")")}function Sf(W,wa){var Da=[],La=[];W=Zb.transform(W);wa=Zb.transform(wa);hh(W.translate,wa.translate,Da,La);wg(W.rotate,wa.rotate,Da,La);zh(W.skew,wa.skew,Da,La);Zj(W.scale,wa.scale,Da,La);W=wa=null;return function(Ta){for(var Xa=-1,jb=La.length,eb;++Xa<jb;)Da[(eb=La[Xa]).i]=eb.x(Ta);return Da.join("")}}function Jg(W,wa){wa=(wa-=W=+W)||1/wa;return function(Da){return(Da-
W)/wa}}function Sg(W,wa){wa=(wa-=W=+W)||1/wa;return function(Da){return Math.max(0,Math.min(1,(Da-W)/wa))}}function Rh(W){var wa=W.source;W=W.target;var Da=W;if(wa===Da)var La=wa;else{La=pb(wa);Da=pb(Da);for(var Ta=La.pop(),Xa=Da.pop(),jb=null;Ta===Xa;)jb=Ta,Ta=La.pop(),Xa=Da.pop();La=jb}for(Da=[wa];wa!==La;)wa=wa.parent,Da.push(wa);for(wa=Da.length;W!==La;)Da.splice(wa,0,W),W=W.parent;return Da}function pb(W){for(var wa=[],Da=W.parent;null!=Da;)wa.push(W),W=Da,Da=Da.parent;wa.push(W);return wa}function Bb(W){W.fixed|=
2}function Pb(W){W.fixed&=-7}function bc(W){W.fixed|=4;W.px=W.x;W.py=W.y}function pc(W){W.fixed&=-5}function dd(W,wa,Da){var La=0,Ta=0;W.charge=0;if(!W.leaf)for(var Xa=W.nodes,jb=Xa.length,eb=-1,ib;++eb<jb;)ib=Xa[eb],null!=ib&&(dd(ib,wa,Da),W.charge+=ib.charge,La+=ib.charge*ib.cx,Ta+=ib.charge*ib.cy);W.point&&(W.leaf||(W.point.x+=Math.random()-.5,W.point.y+=Math.random()-.5),wa*=Da[W.point.index],W.charge+=W.pointCharge=wa,La+=wa*W.point.x,Ta+=wa*W.point.y);W.cx=La/W.charge;W.cy=Ta/W.charge}function id(W,
wa){Zb.rebind(W,wa,"sort","children","value");W.nodes=W;W.links=td;return W}function Xc(W,wa){for(var Da=[W];null!=(W=Da.pop());)if(wa(W),(Ta=W.children)&&(La=Ta.length))for(var La,Ta;0<=--La;)Da.push(Ta[La])}function fd(W,wa){for(var Da=[W],La=[];null!=(W=Da.pop());)if(La.push(W),(Xa=W.children)&&(Ta=Xa.length)){W=-1;for(var Ta,Xa;++W<Ta;)Da.push(Xa[W])}for(;null!=(W=La.pop());)wa(W)}function rd(W){return W.children}function Id(W){return W.value}function yd(W,wa){return wa.value-W.value}function td(W){return Zb.merge(W.map(function(wa){return(wa.children||
[]).map(function(Da){return{source:wa,target:Da}})}))}function Jd(W){return W.x}function Rd(W){return W.y}function Md(W,wa,Da){W.y0=wa;W.y=Da}function Ne(W){return Zb.range(W.length)}function xe(W){var wa=-1;W=W[0].length;for(var Da=[];++wa<W;)Da[wa]=0;return Da}function ve(W){for(var wa=1,Da=0,La=W[0][1],Ta,Xa=W.length;wa<Xa;++wa)(Ta=W[wa][1])>La&&(Da=wa,La=Ta);return Da}function Bd(W){return W.reduce(Td,0)}function Td(W,wa){return W+wa[1]}function Zd(W,wa){return kf(W,Math.ceil(Math.log(wa.length)/
Math.LN2+1))}function kf(W,wa){var Da=-1,La=+W[0];W=(W[1]-La)/wa;for(var Ta=[];++Da<=wa;)Ta[Da]=W*Da+La;return Ta}function of(W){return[Zb.min(W),Zb.max(W)]}function qf(W,wa){return W.value-wa.value}function We(W,wa){var Da=W._pack_next;W._pack_next=wa;wa._pack_prev=W;wa._pack_next=Da;Da._pack_prev=wa}function af(W,wa){W._pack_next=wa;wa._pack_prev=W}function Gf(W,wa){var Da=wa.x-W.x,La=wa.y-W.y;W=W.r+wa.r;return.999*W*W>Da*Da+La*La}function mg(W){function wa(yc){La=Math.min(yc.x-yc.r,La);Ta=Math.max(yc.x+
yc.r,Ta);Xa=Math.min(yc.y-yc.r,Xa);jb=Math.max(yc.y+yc.r,jb)}if((Da=W.children)&&(yb=Da.length)){var Da,La=Infinity,Ta=-Infinity,Xa=Infinity,jb=-Infinity,eb,ib,rb,yb;Da.forEach(If);var Gb=Da[0];Gb.x=-Gb.r;Gb.y=0;wa(Gb);if(1<yb){var Qb=Da[1];Qb.x=Qb.r;Qb.y=0;wa(Qb);if(2<yb){var Wb=Da[2];df(Gb,Qb,Wb);wa(Wb);We(Gb,Wb);Gb._pack_prev=Wb;We(Wb,Qb);Qb=Gb._pack_next;for(eb=3;eb<yb;eb++){df(Gb,Qb,Wb=Da[eb]);var gc=0,mc=1,rc=1;for(ib=Qb._pack_next;ib!==Qb;ib=ib._pack_next,mc++)if(Gf(ib,Wb)){gc=1;break}if(1==
gc)for(rb=Gb._pack_prev;rb!==ib._pack_prev&&!Gf(rb,Wb);rb=rb._pack_prev,rc++);gc?(mc<rc||mc==rc&&Qb.r<Gb.r?af(Gb,Qb=ib):af(Gb=rb,Qb),eb--):(We(Gb,Wb),Qb=Wb,wa(Wb))}}}Gb=(La+Ta)/2;Qb=(Xa+jb)/2;for(eb=ib=0;eb<yb;eb++)Wb=Da[eb],Wb.x-=Gb,Wb.y-=Qb,ib=Math.max(ib,Wb.r+Math.sqrt(Wb.x*Wb.x+Wb.y*Wb.y));W.r=ib;Da.forEach(cj)}}function If(W){W._pack_next=W._pack_prev=W}function cj(W){delete W._pack_next;delete W._pack_prev}function ee(W,wa,Da,La){var Ta=W.children;W.x=wa+=La*W.x;W.y=Da+=La*W.y;W.r*=La;if(Ta){W=
-1;for(var Xa=Ta.length;++W<Xa;)ee(Ta[W],wa,Da,La)}}function df(W,wa,Da){var La=W.r+Da.r,Ta=wa.x-W.x,Xa=wa.y-W.y;if(La&&(Ta||Xa)){var jb=wa.r+Da.r,eb=Ta*Ta+Xa*Xa;jb*=jb;La*=La;wa=.5+(La-jb)/(2*eb);jb=Math.sqrt(Math.max(0,2*jb*(La+eb)-(La-=eb)*La-jb*jb))/(2*eb);Da.x=W.x+wa*Ta+jb*Xa;Da.y=W.y+wa*Xa-jb*Ta}else Da.x=W.x+La,Da.y=W.y}function ng(W,wa){return W.parent==wa.parent?1:2}function Yf(W){var wa=W.children;return wa.length?wa[0]:W.t}function yh(W){var wa=W.children,Da;return(Da=wa.length)?wa[Da-
1]:W.t}function Tg(W){return 1+Zb.max(W,function(wa){return wa.y})}function aj(W){return W.reduce(function(wa,Da){return wa+Da.x},0)/W.length}function Jk(W){var wa=W.children;return wa&&wa.length?Jk(wa[0]):W}function Th(W){var wa=W.children,Da;return wa&&(Da=wa.length)?Th(wa[Da-1]):W}function Vf(W){return{x:W.x,y:W.y,dx:W.dx,dy:W.dy}}function Yi(W,wa){var Da=W.x+wa[3],La=W.y+wa[0],Ta=W.dx-wa[1]-wa[3];W=W.dy-wa[0]-wa[2];0>Ta&&(Da+=Ta/2,Ta=0);0>W&&(La+=W/2,W=0);return{x:Da,y:La,dx:Ta,dy:W}}function oj(W){var wa=
W[0];W=W[W.length-1];return wa<W?[wa,W]:[W,wa]}function Eg(W){return W.rangeExtent?W.rangeExtent():oj(W.range())}function dh(W,wa,Da,La){var Ta=Da(W[0],W[1]),Xa=La(wa[0],wa[1]);return function(jb){return Xa(Ta(jb))}}function qh(W,wa){var Da=0,La=W.length-1,Ta=W[Da],Xa=W[La];if(Xa<Ta){var jb=Da;Da=La;La=jb;jb=Ta;Ta=Xa;Xa=jb}W[Da]=wa.floor(Ta);W[La]=wa.ceil(Xa);return W}function Vj(W){return W?{floor:function(wa){return Math.floor(wa/W)*W},ceil:function(wa){return Math.ceil(wa/W)*W}}:Hi}function Fj(W,
wa,Da,La){var Ta=[],Xa=[],jb=0,eb=Math.min(W.length,wa.length)-1;W[eb]<W[0]&&(W=W.slice().reverse(),wa=wa.slice().reverse());for(;++jb<=eb;)Ta.push(Da(W[jb-1],W[jb])),Xa.push(La(wa[jb-1],wa[jb]));return function(ib){var rb=Zb.bisect(W,ib,1,eb)-1;return Xa[rb](Ta[rb](ib))}}function Db(W,wa,Da,La){function Ta(){var ib=2<Math.min(W.length,wa.length)?Fj:dh,rb=La?Sg:Jg;jb=ib(W,wa,rb,Da);eb=ib(wa,W,rb,Zg);return Xa}function Xa(ib){return jb(ib)}var jb,eb;Xa.invert=function(ib){return eb(ib)};Xa.domain=
function(ib){if(!arguments.length)return W;W=ib.map(Number);return Ta()};Xa.range=function(ib){if(!arguments.length)return wa;wa=ib;return Ta()};Xa.rangeRound=function(ib){return Xa.range(ib).interpolate(ji)};Xa.clamp=function(ib){if(!arguments.length)return La;La=ib;return Ta()};Xa.interpolate=function(ib){if(!arguments.length)return Da;Da=ib;return Ta()};Xa.ticks=function(ib){return Zb.range.apply(Zb,da(W,ib))};Xa.tickFormat=function(ib,rb){return ta(W,ib,rb)};Xa.nice=function(ib){fa(W,ib);return Ta()};
Xa.copy=function(){return Db(W,wa,Da,La)};return Ta()}function Z(W,wa){return Zb.rebind(W,wa,"range","rangeRound","interpolate","clamp")}function fa(W,wa){qh(W,Vj(da(W,wa)[2]));qh(W,Vj(da(W,wa)[2]));return W}function da(W,wa){null==wa&&(wa=10);W=oj(W);var Da=W[1]-W[0],La=Math.pow(10,Math.floor(Math.log(Da/wa)/Math.LN10));wa=wa/Da*La;.15>=wa?La*=10:.35>=wa?La*=5:.75>=wa&&(La*=2);W[0]=Math.ceil(W[0]/La)*La;W[1]=Math.floor(W[1]/La)*La+.5*La;W[2]=La;return W}function ta(W,wa,Da){W=da(W,wa);if(Da){wa=
bk.exec(Da);wa.shift();if("s"===wa[8]){var La=Zb.formatPrefix(Math.max(Fe(W[0]),Fe(W[1])));wa[7]||(wa[7]="."+Ga(La.scale(W[2])));wa[8]="f";Da=Zb.format(wa.join(""));return function(Ta){return Da(La.scale(Ta))+La.symbol}}wa[7]||(wa[7]="."+Za(wa[8],W));Da=wa.join("")}else Da=",."+Ga(W[2])+"f";return Zb.format(Da)}function Ga(W){return-Math.floor(Math.log(W)/Math.LN10+.01)}function Za(W,wa){var Da=Ga(wa[2]);return W in ph?Math.abs(Da-Ga(Math.max(Fe(wa[0]),Fe(wa[1]))))+ +("e"!==W):Da-2*("%"===W)}function hb(W,
wa,Da,La){function Ta(eb){return(Da?Math.log(0>eb?0:eb):-Math.log(0<eb?0:-eb))/Math.log(wa)}function Xa(eb){return Da?Math.pow(wa,eb):-Math.pow(wa,-eb)}function jb(eb){return W(Ta(eb))}jb.invert=function(eb){return Xa(W.invert(eb))};jb.domain=function(eb){if(!arguments.length)return La;Da=0<=eb[0];W.domain((La=eb.map(Number)).map(Ta));return jb};jb.base=function(eb){if(!arguments.length)return wa;wa=+eb;W.domain(La.map(Ta));return jb};jb.nice=function(){var eb=qh(La.map(Ta),Da?Math:Ch);W.domain(eb);
La=eb.map(Xa);return jb};jb.ticks=function(){var eb=oj(La),ib=[],rb=eb[0];eb=eb[1];var yb=Math.floor(Ta(rb)),Gb=Math.ceil(Ta(eb)),Qb=wa%1?2:wa;if(isFinite(Gb-yb)){if(Da){for(;yb<Gb;yb++)for(var Wb=1;Wb<Qb;Wb++)ib.push(Xa(yb)*Wb);ib.push(Xa(yb))}else for(ib.push(Xa(yb));yb++<Gb;)for(Wb=Qb-1;0<Wb;Wb--)ib.push(Xa(yb)*Wb);for(yb=0;ib[yb]<rb;yb++);for(Gb=ib.length;ib[Gb-1]>eb;Gb--);ib=ib.slice(yb,Gb)}return ib};jb.tickFormat=function(eb,ib){if(!arguments.length)return Kg;2>arguments.length?ib=Kg:"function"!==
typeof ib&&(ib=Zb.format(ib));var rb=Math.max(1,wa*eb/jb.ticks().length);return function(yb){var Gb=yb/Xa(Math.round(Ta(yb)));Gb*wa<wa-.5&&(Gb*=wa);return Gb<=rb?ib(yb):""}};jb.copy=function(){return hb(W.copy(),wa,Da,La)};return Z(jb,W)}function ub(W,wa,Da){function La(jb){return W(Ta(jb))}var Ta=Rb(wa),Xa=Rb(1/wa);La.invert=function(jb){return Xa(W.invert(jb))};La.domain=function(jb){if(!arguments.length)return Da;W.domain((Da=jb.map(Number)).map(Ta));return La};La.ticks=function(jb){return Zb.range.apply(Zb,
da(Da,jb))};La.tickFormat=function(jb,eb){return ta(Da,jb,eb)};La.nice=function(jb){return La.domain(fa(Da,jb))};La.exponent=function(jb){if(!arguments.length)return wa;Ta=Rb(wa=jb);Xa=Rb(1/wa);W.domain(Da.map(Ta));return La};La.copy=function(){return ub(W.copy(),wa,Da)};return Z(La,W)}function Rb(W){return function(wa){return 0>wa?-Math.pow(-wa,W):Math.pow(wa,W)}}function Yb(W,wa){function Da(eb){return Xa[((Ta.get(eb)||("range"===wa.t?Ta.set(eb,W.push(eb)):NaN))-1)%Xa.length]}function La(eb,ib){return Zb.range(W.length).map(function(rb){return eb+
ib*rb})}var Ta,Xa,jb;Da.domain=function(eb){if(!arguments.length)return W;W=[];Ta=new h;for(var ib=-1,rb=eb.length,yb;++ib<rb;)Ta.has(yb=eb[ib])||Ta.set(yb,W.push(yb));return Da[wa.t].apply(Da,wa.a)};Da.range=function(eb){if(!arguments.length)return Xa;Xa=eb;jb=0;wa={t:"range",a:arguments};return Da};Da.rangePoints=function(eb,ib){2>arguments.length&&(ib=0);var rb=eb[0],yb=eb[1];yb=2>W.length?(rb=(rb+yb)/2,0):(yb-rb)/(W.length-1+ib);Xa=La(rb+yb*ib/2,yb);jb=0;wa={t:"rangePoints",a:arguments};return Da};
Da.rangeRoundPoints=function(eb,ib){2>arguments.length&&(ib=0);var rb=eb[0],yb=eb[1],Gb=2>W.length?(rb=yb=Math.round((rb+yb)/2),0):(yb-rb)/(W.length-1+ib)|0;Xa=La(rb+Math.round(Gb*ib/2+(yb-rb-(W.length-1+ib)*Gb)/2),Gb);jb=0;wa={t:"rangeRoundPoints",a:arguments};return Da};Da.rangeBands=function(eb,ib,rb){2>arguments.length&&(ib=0);3>arguments.length&&(rb=ib);var yb=eb[1]<eb[0],Gb=eb[yb-0],Qb=(eb[1-yb]-Gb)/(W.length-ib+2*rb);Xa=La(Gb+Qb*rb,Qb);yb&&Xa.reverse();jb=Qb*(1-ib);wa={t:"rangeBands",a:arguments};
return Da};Da.rangeRoundBands=function(eb,ib,rb){2>arguments.length&&(ib=0);3>arguments.length&&(rb=ib);var yb=eb[1]<eb[0],Gb=eb[yb-0],Qb=eb[1-yb],Wb=Math.floor((Qb-Gb)/(W.length-ib+2*rb));Xa=La(Gb+Math.round((Qb-Gb-(W.length-ib)*Wb)/2),Wb);yb&&Xa.reverse();jb=Math.round(Wb*(1-ib));wa={t:"rangeRoundBands",a:arguments};return Da};Da.rangeBand=function(){return jb};Da.rangeExtent=function(){return oj(wa.a[0])};Da.copy=function(){return Yb(W,wa)};return Da.domain(W)}function dc(W,wa){function Da(){var Xa=
0,jb=wa.length;for(Ta=[];++Xa<jb;)Ta[Xa-1]=Zb.quantile(W,Xa/jb);return La}function La(Xa){if(!isNaN(Xa=+Xa))return wa[Zb.bisect(Ta,Xa)]}var Ta;La.domain=function(Xa){if(!arguments.length)return W;W=Xa.map(m).filter(f).sort(n);return Da()};La.range=function(Xa){if(!arguments.length)return wa;wa=Xa;return Da()};La.quantiles=function(){return Ta};La.invertExtent=function(Xa){Xa=wa.indexOf(Xa);return 0>Xa?[NaN,NaN]:[0<Xa?Ta[Xa-1]:W[0],Xa<Ta.length?Ta[Xa]:W[W.length-1]]};La.copy=function(){return dc(W,
wa)};return Da()}function Ac(W,wa,Da){function La(eb){return Da[Math.max(0,Math.min(jb,Math.floor(Xa*(eb-W))))]}function Ta(){Xa=Da.length/(wa-W);jb=Da.length-1;return La}var Xa,jb;La.domain=function(eb){if(!arguments.length)return[W,wa];W=+eb[0];wa=+eb[eb.length-1];return Ta()};La.range=function(eb){if(!arguments.length)return Da;Da=eb;return Ta()};La.invertExtent=function(eb){eb=Da.indexOf(eb);eb=0>eb?NaN:eb/Xa+W;return[eb,eb+1/Xa]};La.copy=function(){return Ac(W,wa,Da)};return Ta()}function Ec(W,
wa){function Da(La){if(La<=La)return wa[Zb.bisect(W,La)]}Da.domain=function(La){if(!arguments.length)return W;W=La;return Da};Da.range=function(La){if(!arguments.length)return wa;wa=La;return Da};Da.invertExtent=function(La){La=wa.indexOf(La);return[W[La-1],W[La]]};Da.copy=function(){return Ec(W,wa)};return Da}function uc(W){function wa(Da){return+Da}wa.invert=wa;wa.domain=wa.range=function(Da){if(!arguments.length)return W;W=Da.map(wa);return wa};wa.ticks=function(Da){return Zb.range.apply(Zb,da(W,
Da))};wa.tickFormat=function(Da,La){return ta(W,Da,La)};wa.copy=function(){return uc(W)};return wa}function Xb(){return 0}function fc(W){return W.innerRadius}function Cc(W){return W.outerRadius}function bd(W){return W.startAngle}function nd(W){return W.endAngle}function Nc(W){return W&&W.padAngle}function vd(W,wa,Da,La){return 0<(W-Da)*wa-(wa-La)*W?0:1}function Ad(W,wa,Da,La,Ta){var Xa=W[0]-wa[0],jb=W[1]-wa[1];Ta=(Ta?La:-La)/Math.sqrt(Xa*Xa+jb*jb);jb*=Ta;Xa*=-Ta;var eb=W[0]+jb,ib=W[1]+Xa,rb=wa[0]+
jb,yb=wa[1]+Xa;W=(eb+rb)/2;wa=(ib+yb)/2;Ta=rb-eb;var Gb=yb-ib,Qb=Ta*Ta+Gb*Gb;La=Da-La;yb=eb*yb-rb*ib;var Wb=(0>Gb?-1:1)*Math.sqrt(Math.max(0,La*La*Qb-yb*yb));eb=(yb*Gb-Ta*Wb)/Qb;ib=(-yb*Ta-Gb*Wb)/Qb;rb=(yb*Gb+Ta*Wb)/Qb;Ta=(-yb*Ta+Gb*Wb)/Qb;Gb=eb-W;Qb=ib-wa;W=rb-W;wa=Ta-wa;Gb*Gb+Qb*Qb>W*W+wa*wa&&(eb=rb,ib=Ta);return[[eb-jb,ib-Xa],[eb*Da/La,ib*Da/La]]}function le(W){function wa(ib){function rb(){yb.push("M",Xa(W(Gb),eb))}for(var yb=[],Gb=[],Qb=-1,Wb=ib.length,gc,mc=fb(Da),rc=fb(La);++Qb<Wb;)Ta.call(this,
gc=ib[Qb],Qb)?Gb.push([+mc.call(this,gc,Qb),+rc.call(this,gc,Qb)]):Gb.length&&(rb(),Gb=[]);Gb.length&&rb();return yb.length?yb.join(""):null}var Da=Uf,La=eh,Ta=Hd,Xa=Ud,jb=Xa.key,eb=.7;wa.x=function(ib){if(!arguments.length)return Da;Da=ib;return wa};wa.y=function(ib){if(!arguments.length)return La;La=ib;return wa};wa.defined=function(ib){if(!arguments.length)return Ta;Ta=ib;return wa};wa.interpolate=function(ib){if(!arguments.length)return jb;jb="function"===typeof ib?Xa=ib:(Xa=Dk.get(ib)||Ud).key;
return wa};wa.tension=function(ib){if(!arguments.length)return eb;eb=ib;return wa};return wa}function Ud(W){return 1<W.length?W.join("L"):W+"Z"}function Sd(W){return W.join("L")+"Z"}function fe(W){for(var wa=0,Da=W.length,La=W[0],Ta=[La[0],",",La[1]];++wa<Da;)Ta.push("V",(La=W[wa])[1],"H",La[0]);return Ta.join("")}function ue(W){for(var wa=0,Da=W.length,La=W[0],Ta=[La[0],",",La[1]];++wa<Da;)Ta.push("H",(La=W[wa])[0],"V",La[1]);return Ta.join("")}function Ee(W,wa){if(1>wa.length||W.length!=wa.length&&
W.length!=wa.length+2)return Ud(W);var Da=W.length!=wa.length,La="",Ta=W[0],Xa=W[1],jb=wa[0],eb=jb,ib=1;Da&&(La+="Q"+(Xa[0]-2*jb[0]/3)+","+(Xa[1]-2*jb[1]/3)+","+Xa[0]+","+Xa[1],Ta=W[1],ib=2);if(1<wa.length)for(eb=wa[1],Xa=W[ib],ib++,La+="C"+(Ta[0]+jb[0])+","+(Ta[1]+jb[1])+","+(Xa[0]-eb[0])+","+(Xa[1]-eb[1])+","+Xa[0]+","+Xa[1],Ta=2;Ta<wa.length;Ta++,ib++)Xa=W[ib],eb=wa[Ta],La+="S"+(Xa[0]-eb[0])+","+(Xa[1]-eb[1])+","+Xa[0]+","+Xa[1];Da&&(W=W[ib],La+="Q"+(Xa[0]+2*eb[0]/3)+","+(Xa[1]+2*eb[1]/3)+","+
W[0]+","+W[1]);return La}function Re(W,wa){var Da=[];wa=(1-wa)/2;for(var La,Ta=W[0],Xa=W[1],jb=1,eb=W.length;++jb<eb;)La=Ta,Ta=Xa,Xa=W[jb],Da.push([wa*(Xa[0]-La[0]),wa*(Xa[1]-La[1])]);return Da}function lf(W){if(3>W.length)return Ud(W);var wa=1,Da=W.length,La=W[0],Ta=La[0],Xa=La[1],jb=[Ta,Ta,Ta,(La=W[1])[0]],eb=[Xa,Xa,Xa,La[1]];Ta=[Ta,",",Xa,"L",he(nj,jb),",",he(nj,eb)];for(W.push(W[Da-1]);++wa<=Da;)La=W[wa],jb.shift(),jb.push(La[0]),eb.shift(),eb.push(La[1]),ef(Ta,jb,eb);W.pop();Ta.push("L",La);
return Ta.join("")}function he(W,wa){return W[0]*wa[0]+W[1]*wa[1]+W[2]*wa[2]+W[3]*wa[3]}function ef(W,wa,Da){W.push("C",he(Xg,wa),",",he(Xg,Da),",",he(Gk,wa),",",he(Gk,Da),",",he(nj,wa),",",he(nj,Da))}function mf(W,wa){return(wa[1]-W[1])/(wa[0]-W[0])}function Ae(W){for(var wa,Da=-1,La=W.length,Ta,Xa;++Da<La;)wa=W[Da],Ta=wa[0],Xa=wa[1]-Kf,wa[0]=Ta*Math.cos(Xa),wa[1]=Ta*Math.sin(Xa);return W}function $e(W){function wa(Qb){function Wb(){gc.push("M",eb(W(rc),Gb),yb,rb(W(mc.reverse()),Gb),"Z")}for(var gc=
[],mc=[],rc=[],yc=-1,Lc=Qb.length,Tc,Sc=fb(Da),jd=fb(Ta),hc=Da===La?function(){return Mc}:fb(La),wc=Ta===Xa?function(){return od}:fb(Xa),Mc,od;++yc<Lc;)jb.call(this,Tc=Qb[yc],yc)?(mc.push([Mc=+Sc.call(this,Tc,yc),od=+jd.call(this,Tc,yc)]),rc.push([+hc.call(this,Tc,yc),+wc.call(this,Tc,yc)])):mc.length&&(Wb(),mc=[],rc=[]);mc.length&&Wb();return gc.length?gc.join(""):null}var Da=Uf,La=Uf,Ta=0,Xa=eh,jb=Hd,eb=Ud,ib=eb.key,rb=eb,yb="L",Gb=.7;wa.x=function(Qb){if(!arguments.length)return La;Da=La=Qb;return wa};
wa.x0=function(Qb){if(!arguments.length)return Da;Da=Qb;return wa};wa.x1=function(Qb){if(!arguments.length)return La;La=Qb;return wa};wa.y=function(Qb){if(!arguments.length)return Xa;Ta=Xa=Qb;return wa};wa.y0=function(Qb){if(!arguments.length)return Ta;Ta=Qb;return wa};wa.y1=function(Qb){if(!arguments.length)return Xa;Xa=Qb;return wa};wa.defined=function(Qb){if(!arguments.length)return jb;jb=Qb;return wa};wa.interpolate=function(Qb){if(!arguments.length)return ib;ib="function"===typeof Qb?eb=Qb:(eb=
Dk.get(Qb)||Ud).key;rb=eb.reverse||eb;yb=eb.closed?"M":"L";return wa};wa.tension=function(Qb){if(!arguments.length)return Gb;Gb=Qb;return wa};return wa}function vf(W){return W.radius}function nf(W){return[W.x,W.y]}function Fh(W){return function(){var wa=W.apply(this,arguments),Da=wa[0];wa=wa[1]-Kf;return[Da*Math.cos(wa),Da*Math.sin(wa)]}}function sg(){return 64}function Vg(){return"circle"}function jg(W){W=Math.sqrt(W/Ce);return"M0,"+W+"A"+W+","+W+" 0 1,1 0,"+-W+"A"+W+","+W+" 0 1,1 0,"+W+"Z"}function Yh(W){return function(){var wa,
Da,La;(wa=this[W])&&(La=wa[Da=wa.active])&&(La.timer.c=null,La.timer.t=NaN,--wa.count?delete wa[Da]:delete this[W],wa.active+=.5,La.event&&La.event.interrupt.call(this,this.__data__,La.index))}}function wf(W,wa,Da){qk(W,Ff);W.namespace=wa;W.id=Da;return W}function pj(W,wa,Da,La){var Ta=W.id,Xa=W.namespace;return aa(W,"function"===typeof Da?function(jb,eb,ib){jb[Xa][Ta].tween.set(wa,La(Da.call(jb,jb.__data__,eb,ib)))}:(Da=La(Da),function(jb){jb[Xa][Ta].tween.set(wa,Da)}))}function og(W){null==W&&(W=
"");return function(){this.textContent=W}}function Zf(W){return null==W?"__transition__":"__transition_"+W+"__"}function Qe(W,wa,Da,La,Ta){function Xa(mc){var rc=rb.delay;gc.t=rc+Wb;if(rc<=mc)return jb(mc-rc);gc.c=jb}function jb(mc){var rc=ib.active,yc=ib[rc];yc&&(yc.timer.c=null,yc.timer.t=NaN,--ib.count,delete ib[rc],yc.event&&yc.event.interrupt.call(W,W.__data__,yc.index));for(var Lc in ib)+Lc<La&&(rc=ib[Lc],rc.timer.c=null,rc.timer.t=NaN,--ib.count,delete ib[Lc]);gc.c=eb;Qa(function(){gc.c&&eb(mc||
1)&&(gc.c=null,gc.t=NaN);return 1},0,Wb);ib.active=La;rb.event&&rb.event.start.call(W,W.__data__,wa);Qb=[];rb.tween.forEach(function(Tc,Sc){(Sc=Sc.call(W,W.__data__,wa))&&Qb.push(Sc)});Gb=rb.ease;yb=rb.duration}function eb(mc){mc/=yb;for(var rc=Gb(mc),yc=Qb.length;0<yc;)Qb[--yc].call(W,rc);if(1<=mc)return rb.event&&rb.event.end.call(W,W.__data__,wa),--ib.count?delete ib[La]:delete W[Da],1}var ib=W[Da]||(W[Da]={active:0,count:0}),rb=ib[La],yb,Gb,Qb;if(!rb){var Wb=Ta.time;var gc=Qa(Xa,0,Wb);rb=ib[La]=
{tween:new h,time:Wb,timer:gc,delay:Ta.delay,duration:Ta.duration,ease:Ta.ease,index:wa};Ta=null;++ib.count}}function Tf(W,wa,Da){W.attr("transform",function(La){var Ta=wa(La);return"translate("+(isFinite(Ta)?Ta:Da(La))+",0)"})}function xg(W,wa,Da){W.attr("transform",function(La){var Ta=wa(La);return"translate(0,"+(isFinite(Ta)?Ta:Da(La))+")"})}function kg(W){return W.toISOString()}function Gh(W,wa,Da){function La(Xa){return W(Xa)}function Ta(Xa,jb){var eb=(Xa[1]-Xa[0])/jb,ib=Zb.bisect(Yj,eb);return ib==
Yj.length?[wa.year,da(Xa.map(function(rb){return rb/31536E6}),jb)[2]]:ib?wa[eb/Yj[ib-1]<Yj[ib]/eb?ib-1:ib]:[ok,da(Xa,jb)[2]]}La.invert=function(Xa){return ah(W.invert(Xa))};La.domain=function(Xa){if(!arguments.length)return W.domain().map(ah);W.domain(Xa);return La};La.nice=function(Xa,jb){function eb(yb){return!isNaN(yb)&&!Xa.range(yb,ah(+yb+1),jb).length}var ib=La.domain(),rb=oj(ib);if(rb=null==Xa?Ta(rb,10):"number"===typeof Xa&&Ta(rb,Xa))Xa=rb[0],jb=rb[1];return La.domain(qh(ib,1<jb?{floor:function(yb){for(;eb(yb=
Xa.floor(yb));)yb=ah(yb-1);return yb},ceil:function(yb){for(;eb(yb=Xa.ceil(yb));)yb=ah(+yb+1);return yb}}:Xa))};La.ticks=function(Xa,jb){var eb=oj(La.domain()),ib=null==Xa?Ta(eb,10):"number"===typeof Xa?Ta(eb,Xa):!Xa.range&&[{range:Xa},jb];ib&&(Xa=ib[0],jb=ib[1]);return Xa.range(eb[0],ah(+eb[1]+1),1>jb?1:jb)};La.tickFormat=function(){return Da};La.copy=function(){return Gh(W.copy(),wa,Da)};return Z(La,W)}function ah(W){return new Date(W)}function fj(W){return JSON.parse(W.responseText)}function zk(W){var wa=
yg.createRange();wa.selectNode(yg.body);return wa.createContextualFragment(W.responseText)}var Zb={version:"3.5.17"},Zh=[].slice,Mg=function(W){return Zh.call(W)},yg=this.document;if(yg)try{Mg(yg.documentElement.childNodes)[0].nodeType}catch(W){Mg=function(wa){for(var Da=wa.length,La=Array(Da);Da--;)La[Da]=wa[Da];return La}}Date.now||(Date.now=function(){return+new Date});if(yg)try{yg.createElement("DIV").style.setProperty("opacity",0,"")}catch(W){var dg=this.Element.prototype,Qi=dg.setAttribute,
Pi=dg.setAttributeNS,Oi=this.CSSStyleDeclaration.prototype,Li=Oi.setProperty;dg.setAttribute=function(wa,Da){Qi.call(this,wa,Da+"")};dg.setAttributeNS=function(wa,Da,La){Pi.call(this,wa,Da,La+"")};Oi.setProperty=function(wa,Da,La){Li.call(this,wa,Da+"",La)}}Zb.ascending=n;Zb.descending=function(W,wa){return wa<W?-1:wa>W?1:wa>=W?0:NaN};Zb.min=function(W,wa){var Da=-1,La=W.length,Ta;if(1===arguments.length){for(;++Da<La;)if(null!=(Ta=W[Da])&&Ta>=Ta){var Xa=Ta;break}for(;++Da<La;)null!=(Ta=W[Da])&&Xa>
Ta&&(Xa=Ta)}else{for(;++Da<La;)if(null!=(Ta=wa.call(W,W[Da],Da))&&Ta>=Ta){Xa=Ta;break}for(;++Da<La;)null!=(Ta=wa.call(W,W[Da],Da))&&Xa>Ta&&(Xa=Ta)}return Xa};Zb.max=function(W,wa){var Da=-1,La=W.length,Ta;if(1===arguments.length){for(;++Da<La;)if(null!=(Ta=W[Da])&&Ta>=Ta){var Xa=Ta;break}for(;++Da<La;)null!=(Ta=W[Da])&&Ta>Xa&&(Xa=Ta)}else{for(;++Da<La;)if(null!=(Ta=wa.call(W,W[Da],Da))&&Ta>=Ta){Xa=Ta;break}for(;++Da<La;)null!=(Ta=wa.call(W,W[Da],Da))&&Ta>Xa&&(Xa=Ta)}return Xa};Zb.extent=function(W,
wa){var Da=-1,La=W.length,Ta,Xa;if(1===arguments.length){for(;++Da<La;)if(null!=(Ta=W[Da])&&Ta>=Ta){var jb=Xa=Ta;break}for(;++Da<La;)null!=(Ta=W[Da])&&(jb>Ta&&(jb=Ta),Xa<Ta&&(Xa=Ta))}else{for(;++Da<La;)if(null!=(Ta=wa.call(W,W[Da],Da))&&Ta>=Ta){jb=Xa=Ta;break}for(;++Da<La;)null!=(Ta=wa.call(W,W[Da],Da))&&(jb>Ta&&(jb=Ta),Xa<Ta&&(Xa=Ta))}return[jb,Xa]};Zb.sum=function(W,wa){var Da=0,La=W.length,Ta,Xa=-1;if(1===arguments.length)for(;++Xa<La;)isNaN(Ta=+W[Xa])||(Da+=Ta);else for(;++Xa<La;)isNaN(Ta=+wa.call(W,
W[Xa],Xa))||(Da+=Ta);return Da};Zb.mean=function(W,wa){var Da=0,La=W.length,Ta,Xa=-1,jb=La;if(1===arguments.length)for(;++Xa<La;)isNaN(Ta=m(W[Xa]))?--jb:Da+=Ta;else for(;++Xa<La;)isNaN(Ta=m(wa.call(W,W[Xa],Xa)))?--jb:Da+=Ta;if(jb)return Da/jb};Zb.quantile=function(W,wa){var Da=(W.length-1)*wa+1;wa=Math.floor(Da);var La=+W[wa-1];return(Da-=wa)?La+Da*(W[wa]-La):La};Zb.median=function(W,wa){var Da=[],La=W.length,Ta,Xa=-1;if(1===arguments.length)for(;++Xa<La;)isNaN(Ta=m(W[Xa]))||Da.push(Ta);else for(;++Xa<
La;)isNaN(Ta=m(wa.call(W,W[Xa],Xa)))||Da.push(Ta);if(Da.length)return Zb.quantile(Da.sort(n),.5)};Zb.variance=function(W,wa){var Da=W.length,La=0,Ta,Xa=0,jb=-1,eb=0;if(1===arguments.length)for(;++jb<Da;){if(!isNaN(Ta=m(W[jb]))){var ib=Ta-La;La+=ib/++eb;Xa+=ib*(Ta-La)}}else for(;++jb<Da;)isNaN(Ta=m(wa.call(W,W[jb],jb)))||(ib=Ta-La,La+=ib/++eb,Xa+=ib*(Ta-La));if(1<eb)return Xa/(eb-1)};Zb.deviation=function(){var W=Zb.variance.apply(this,arguments);return W?Math.sqrt(W):W};var Ki=b(n);Zb.bisectLeft=
Ki.left;Zb.bisect=Zb.bisectRight=Ki.right;Zb.bisector=function(W){return b(1===W.length?function(wa,Da){return n(W(wa),Da)}:W)};Zb.shuffle=function(W,wa,Da){3>(La=arguments.length)&&(Da=W.length,2>La&&(wa=0));for(var La=Da-wa,Ta,Xa;La;)Xa=Math.random()*La--|0,Ta=W[La+wa],W[La+wa]=W[Xa+wa],W[Xa+wa]=Ta;return W};Zb.permute=function(W,wa){for(var Da=wa.length,La=Array(Da);Da--;)La[Da]=W[wa[Da]];return La};Zb.pairs=function(W){for(var wa=0,Da=W.length-1,La=W[0],Ta=Array(0>Da?0:Da);wa<Da;)Ta[wa]=[La,La=
W[++wa]];return Ta};Zb.transpose=function(W){if(!(Xa=W.length))return[];for(var wa=-1,Da=Zb.min(W,k),La=Array(Da);++wa<Da;)for(var Ta=-1,Xa,jb=La[wa]=Array(Xa);++Ta<Xa;)jb[Ta]=W[Ta][wa];return La};Zb.zip=function(){return Zb.transpose(arguments)};Zb.keys=function(W){var wa=[],Da;for(Da in W)wa.push(Da);return wa};Zb.values=function(W){var wa=[],Da;for(Da in W)wa.push(W[Da]);return wa};Zb.entries=function(W){var wa=[],Da;for(Da in W)wa.push({key:Da,value:W[Da]});return wa};Zb.merge=function(W){var wa=
W.length;var Da=-1;for(var La=0,Ta,Xa;++Da<wa;)La+=W[Da].length;for(Ta=Array(La);0<=--wa;)for(Xa=W[wa],Da=Xa.length;0<=--Da;)Ta[--La]=Xa[Da];return Ta};var Fe=Math.abs;Zb.range=function(W,wa,Da){3>arguments.length&&(Da=1,2>arguments.length&&(wa=W,W=0));if(Infinity===(wa-W)/Da)throw Error("infinite range");var La=[];var Ta=Fe(Da);for(var Xa=1;Ta*Xa%1;)Xa*=10;Ta=Xa;Xa=-1;var jb;W*=Ta;wa*=Ta;Da*=Ta;if(0>Da)for(;(jb=W+Da*++Xa)>wa;)La.push(jb/Ta);else for(;(jb=W+Da*++Xa)<wa;)La.push(jb/Ta);return La};
Zb.map=function(W,wa){var Da=new h;if(W instanceof h)W.forEach(function(jb,eb){Da.set(jb,eb)});else if(Array.isArray(W)){var La=-1,Ta=W.length,Xa;if(1===arguments.length)for(;++La<Ta;)Da.set(La,W[La]);else for(;++La<Ta;)Da.set(wa.call(W,Xa=W[La],La),Xa)}else for(La in W)Da.set(La,W[La]);return Da};e(h,{has:g,get:function(W){return this._[l(W)]},set:function(W,wa){return this._[l(W)]=wa},remove:d,keys:p,values:function(){var W=[],wa;for(wa in this._)W.push(this._[wa]);return W},entries:function(){var W=
[],wa;for(wa in this._)W.push({key:c(wa),value:this._[wa]});return W},size:r,empty:t,forEach:function(W){for(var wa in this._)W.call(this,c(wa),this._[wa])}});Zb.nest=function(){function W(eb,ib,rb){if(rb>=La.length)return jb?jb.call(Da,ib):Xa?ib.sort(Xa):ib;for(var yb=-1,Gb=ib.length,Qb=La[rb++],Wb,gc,mc=new h,rc;++yb<Gb;)(rc=mc.get(Wb=Qb(gc=ib[yb])))?rc.push(gc):mc.set(Wb,[gc]);eb?(gc=eb(),ib=function(yc,Lc){gc.set(yc,W(eb,Lc,rb))}):(gc={},ib=function(yc,Lc){gc[yc]=W(eb,Lc,rb)});mc.forEach(ib);
return gc}function wa(eb,ib){if(ib>=La.length)return eb;var rb=[],yb=Ta[ib++];eb.forEach(function(Gb,Qb){rb.push({key:Gb,values:wa(Qb,ib)})});return yb?rb.sort(function(Gb,Qb){return yb(Gb.key,Qb.key)}):rb}var Da={},La=[],Ta=[],Xa,jb;Da.map=function(eb,ib){return W(ib,eb,0)};Da.entries=function(eb){return wa(W(Zb.map,eb,0),0)};Da.key=function(eb){La.push(eb);return Da};Da.sortKeys=function(eb){Ta[La.length-1]=eb;return Da};Da.sortValues=function(eb){Xa=eb;return Da};Da.rollup=function(eb){jb=eb;return Da};
return Da};Zb.set=function(W){var wa=new w;if(W)for(var Da=0,La=W.length;Da<La;++Da)wa.add(W[Da]);return wa};e(w,{has:g,add:function(W){this._[l(W+="")]=!0;return W},remove:d,values:p,size:r,empty:t,forEach:function(W){for(var wa in this._)W.call(this,c(wa))}});Zb.behavior={};Zb.rebind=function(W,wa){for(var Da=1,La=arguments.length,Ta;++Da<La;)W[Ta=arguments[Da]]=y(W,wa,wa[Ta]);return W};var Bi="webkit ms moz Moz o O".split(" ");Zb.dispatch=function(){for(var W=new F,wa=-1,Da=arguments.length;++wa<
Da;)W[arguments[wa]]=D(W);return W};F.prototype.on=function(W,wa){var Da=W.indexOf("."),La="";0<=Da&&(La=W.slice(Da+1),W=W.slice(0,Da));if(W)return 2>arguments.length?this[W].on(La):this[W].on(La,wa);if(2===arguments.length){if(null==wa)for(W in this)if(this.hasOwnProperty(W))this[W].on(La,null);return this}};Zb.event=null;Zb.requote=function(W){return W.replace(Ri,"\\$\x26")};var Ri=/[\\\^\$\*\+\?\|\[\]\(\)\.\{\}]/g,qk={}.__proto__?function(W,wa){W.__proto__=wa}:function(W,wa){for(var Da in wa)W[Da]=
wa[Da]},Kk=function(W,wa){return wa.querySelector(W)},Lk=function(W,wa){return wa.querySelectorAll(W)},rk=function(W,wa){var Da=W.matches||W[A(W,"matchesSelector")];rk=function(La,Ta){return Da.call(La,Ta)};return rk(W,wa)};"function"===typeof Sizzle&&(Kk=function(W,wa){return Sizzle(W,wa)[0]||null},Lk=Sizzle,rk=Sizzle.matchesSelector);Zb.selection=function(){return Zb.select(yg.documentElement)};var sf=Zb.selection.prototype=[];sf.select=function(W){var wa=[],Da,La,Ta,Xa;W=N(W);for(var jb=-1,eb=
this.length;++jb<eb;){wa.push(Da=[]);Da.parentNode=(Ta=this[jb]).parentNode;for(var ib=-1,rb=Ta.length;++ib<rb;)(Xa=Ta[ib])?(Da.push(La=W.call(Xa,Xa.__data__,ib,jb)),La&&"__data__"in Xa&&(La.__data__=Xa.__data__)):Da.push(null)}return J(wa)};sf.selectAll=function(W){var wa=[],Da,La;W=M(W);for(var Ta=-1,Xa=this.length;++Ta<Xa;)for(var jb=this[Ta],eb=-1,ib=jb.length;++eb<ib;)if(La=jb[eb])wa.push(Da=Mg(W.call(La,La.__data__,eb,Ta))),Da.parentNode=La;return J(wa)};var Ak={svg:"http://www.w3.org/2000/svg",
xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};Zb.ns={prefix:Ak,qualify:function(W){var wa=W.indexOf(":"),Da=W;0<=wa&&"xmlns"!==(Da=W.slice(0,wa))&&(W=W.slice(wa+1));return Ak.hasOwnProperty(Da)?{space:Ak[Da],local:W}:W}};sf.attr=function(W,wa){if(2>arguments.length){if("string"===typeof W){var Da=this.node();W=Zb.ns.qualify(W);return W.local?Da.getAttributeNS(W.space,W.local):Da.getAttribute(W)}for(wa in W)this.each(E(wa,
W[wa]));return this}return this.each(E(W,wa))};sf.classed=function(W,wa){if(2>arguments.length){if("string"===typeof W){var Da=this.node(),La=(W=(W+"").trim().split(/^|\s+/)).length,Ta=-1;if(wa=Da.classList)for(;++Ta<La;){if(!wa.contains(W[Ta]))return!1}else for(wa=Da.getAttribute("class");++Ta<La;)if(!L(W[Ta]).test(wa))return!1;return!0}for(wa in W)this.each(Q(wa,W[wa]));return this}return this.each(Q(W,wa))};sf.style=function(W,wa,Da){var La=arguments.length;if(3>La){if("string"!==typeof W){2>La&&
(wa="");for(Da in W)this.each(R(Da,W[Da],wa));return this}if(2>La)return La=this.node(),q(La).getComputedStyle(La,null).getPropertyValue(W);Da=""}return this.each(R(W,wa,Da))};sf.property=function(W,wa){if(2>arguments.length){if("string"===typeof W)return this.node()[W];for(wa in W)this.each(O(wa,W[wa]));return this}return this.each(O(W,wa))};sf.text=function(W){return arguments.length?this.each("function"===typeof W?function(){var wa=W.apply(this,arguments);this.textContent=null==wa?"":wa}:null==
W?function(){this.textContent=""}:function(){this.textContent=W}):this.node().textContent};sf.html=function(W){return arguments.length?this.each("function"===typeof W?function(){var wa=W.apply(this,arguments);this.innerHTML=null==wa?"":wa}:null==W?function(){this.innerHTML=""}:function(){this.innerHTML=W}):this.node().innerHTML};sf.append=function(W){W=T(W);return this.select(function(){return this.appendChild(W.apply(this,arguments))})};sf.insert=function(W,wa){W=T(W);wa=N(wa);return this.select(function(){return this.insertBefore(W.apply(this,
arguments),wa.apply(this,arguments)||null)})};sf.remove=function(){return this.each(V)};sf.data=function(W,wa){function Da(yb,Gb){var Qb,Wb=yb.length,gc=Gb.length,mc=Math.min(Wb,gc),rc=Array(gc),yc=Array(gc),Lc=Array(Wb),Tc,Sc;if(wa){mc=new h;var jd=Array(Wb),hc;for(Qb=-1;++Qb<Wb;)if(Tc=yb[Qb])mc.has(hc=wa.call(Tc,Tc.__data__,Qb))?Lc[Qb]=Tc:mc.set(hc,Tc),jd[Qb]=hc;for(Qb=-1;++Qb<gc;)(Tc=mc.get(hc=wa.call(Gb,Sc=Gb[Qb],Qb)))?!0!==Tc&&(rc[Qb]=Tc,Tc.__data__=Sc):yc[Qb]={__data__:Sc},mc.set(hc,!0);for(Qb=
-1;++Qb<Wb;)Qb in jd&&!0!==mc.get(jd[Qb])&&(Lc[Qb]=yb[Qb])}else{for(Qb=-1;++Qb<mc;)Tc=yb[Qb],Sc=Gb[Qb],Tc?(Tc.__data__=Sc,rc[Qb]=Tc):yc[Qb]={__data__:Sc};for(;Qb<gc;++Qb)yc[Qb]={__data__:Gb[Qb]};for(;Qb<Wb;++Qb)Lc[Qb]=yb[Qb]}yc.update=rc;yc.parentNode=rc.parentNode=Lc.parentNode=yb.parentNode;eb.push(yc);ib.push(rc);rb.push(Lc)}var La=-1,Ta=this.length,Xa,jb;if(!arguments.length){for(W=Array(Ta=(Xa=this[0]).length);++La<Ta;)if(jb=Xa[La])W[La]=jb.__data__;return W}var eb=ka([]),ib=J([]),rb=J([]);if("function"===
typeof W)for(;++La<Ta;)Da(Xa=this[La],W.call(Xa,Xa.parentNode.__data__,La));else for(;++La<Ta;)Da(Xa=this[La],W);ib.enter=function(){return eb};ib.exit=function(){return rb};return ib};sf.datum=function(W){return arguments.length?this.property("__data__",W):this.property("__data__")};sf.filter=function(W){var wa=[],Da,La,Ta;"function"!==typeof W&&(W=X(W));for(var Xa=0,jb=this.length;Xa<jb;Xa++){wa.push(Da=[]);Da.parentNode=(La=this[Xa]).parentNode;for(var eb=0,ib=La.length;eb<ib;eb++)(Ta=La[eb])&&
W.call(Ta,Ta.__data__,eb,Xa)&&Da.push(Ta)}return J(wa)};sf.order=function(){for(var W=-1,wa=this.length;++W<wa;)for(var Da=this[W],La=Da.length-1,Ta=Da[La],Xa;0<=--La;)if(Xa=Da[La])Ta&&Ta!==Xa.nextSibling&&Ta.parentNode.insertBefore(Xa,Ta),Ta=Xa;return this};sf.sort=function(W){W=ba.apply(this,arguments);for(var wa=-1,Da=this.length;++wa<Da;)this[wa].sort(W);return this.order()};sf.each=function(W){return aa(this,function(wa,Da,La){W.call(wa,wa.__data__,Da,La)})};sf.call=function(W){var wa=Mg(arguments);
W.apply(wa[0]=this,wa);return this};sf.empty=function(){return!this.node()};sf.node=function(){for(var W=0,wa=this.length;W<wa;W++)for(var Da=this[W],La=0,Ta=Da.length;La<Ta;La++){var Xa=Da[La];if(Xa)return Xa}return null};sf.size=function(){var W=0;aa(this,function(){++W});return W};var zg=[];Zb.selection.enter=ka;Zb.selection.enter.prototype=zg;zg.append=sf.append;zg.empty=sf.empty;zg.node=sf.node;zg.call=sf.call;zg.size=sf.size;zg.select=function(W){for(var wa=[],Da,La,Ta,Xa,jb,eb=-1,ib=this.length;++eb<
ib;){Ta=(Xa=this[eb]).update;wa.push(Da=[]);Da.parentNode=Xa.parentNode;for(var rb=-1,yb=Xa.length;++rb<yb;)(jb=Xa[rb])?(Da.push(Ta[rb]=La=W.call(Xa.parentNode,jb.__data__,rb,eb)),La.__data__=jb.__data__):Da.push(null)}return J(wa)};zg.insert=function(W,wa){2>arguments.length&&(wa=ha(this));return sf.insert.call(this,W,wa)};Zb.select=function(W){if("string"===typeof W){var wa=[Kk(W,yg)];wa.parentNode=yg.documentElement}else wa=[W],wa.parentNode=W&&(W.ownerDocument||W.document||W).documentElement;
return J([wa])};Zb.selectAll=function(W){"string"===typeof W?(W=Mg(Lk(W,yg)),W.parentNode=yg.documentElement):(W=Mg(W),W.parentNode=null);return J([W])};sf.on=function(W,wa,Da){var La=arguments.length;if(3>La){if("string"!==typeof W){2>La&&(wa=!1);for(Da in W)this.each(ca(Da,W[Da],wa));return this}if(2>La)return(La=this.node()["__on"+W])&&La._;Da=!1}return this.each(ca(W,wa,Da))};var $h=Zb.map({mouseenter:"mouseover",mouseleave:"mouseout"});yg&&$h.forEach(function(W){"on"+W in yg&&$h.remove(W)});
var mh,nh=0;Zb.mouse=function(W){return qa(W,B())};var lh=this.navigator&&/WebKit/.test(this.navigator.userAgent)?-1:0;Zb.touch=function(W,wa,Da){3>arguments.length&&(Da=wa,wa=B().changedTouches);if(wa)for(var La=0,Ta=wa.length,Xa;La<Ta;++La)if((Xa=wa[La]).identifier===Da)return qa(W,Xa)};Zb.behavior.drag=function(){function W(){this.on("mousedown.drag",Ta).on("touchstart.drag",Xa)}function wa(jb,eb,ib,rb,yb){return function(){var Gb=Zb.event.target.correspondingElement||Zb.event.target,Qb=this.parentNode,
Wb=Da.of(this,arguments),gc=0,mc=jb(),rc=".drag"+(null==mc?"":"-"+mc),yc=Zb.select(ib(Gb)).on(rb+rc,function(){var jd=eb(Qb,mc);if(jd){var hc=jd[0]-Tc[0];var wc=jd[1]-Tc[1];gc|=hc|wc;Tc=jd;Wb({type:"drag",x:jd[0]+Sc[0],y:jd[1]+Sc[1],dx:hc,dy:wc})}}).on(yb+rc,function(){eb(Qb,mc)&&(yc.on(rb+rc,null).on(yb+rc,null),Lc(gc),Wb({type:"dragend"}))}),Lc=ra(Gb),Tc=eb(Qb,mc);if(La){var Sc=La.apply(this,arguments);Sc=[Sc.x-Tc[0],Sc.y-Tc[1]]}else Sc=[0,0];Wb({type:"dragstart"})}}var Da=I(W,"drag","dragstart",
"dragend"),La=null,Ta=wa(z,Zb.mouse,q,"mousemove","mouseup"),Xa=wa(Y,Zb.touch,x,"touchmove","touchend");W.origin=function(jb){if(!arguments.length)return La;La=jb;return W};return Zb.rebind(W,Da,"on")};Zb.touches=function(W,wa){2>arguments.length&&(wa=B().touches);return wa?Mg(wa).map(function(Da){var La=qa(W,Da);La.identifier=Da.identifier;return La}):[]};var Ce=Math.PI,$f=2*Ce,ik=$f-1E-6,Kf=Ce/2,Oe=Ce/180,Jf=180/Ce,hk=Math.SQRT2;Zb.interpolateZoom=function(W,wa){var Da=W[0],La=W[1],Ta=W[2];W=wa[2];
var Xa=wa[0]-Da,jb=wa[1]-La,eb=Xa*Xa+jb*jb;if(1E-12>eb){var ib=Math.log(W/Ta)/hk;W=function(Gb){return[Da+Gb*Xa,La+Gb*jb,Ta*Math.exp(hk*Gb*ib)]}}else{var rb=Math.sqrt(eb);wa=(W*W-Ta*Ta+4*eb)/(4*Ta*rb);W=(W*W-Ta*Ta-4*eb)/(4*W*rb);var yb=Math.log(Math.sqrt(wa*wa+1)-wa);ib=(Math.log(Math.sqrt(W*W+1)-W)-yb)/hk;W=function(Gb){Gb*=ib;var Qb=ya(yb),Wb=hk*Gb+yb;var gc=((Wb=Math.exp(2*Wb))-1)/(Wb+1);var mc=yb;Wb=((mc=Math.exp(mc))-1/mc)/2;gc=Ta/(2*rb)*(Qb*gc-Wb);return[Da+gc*Xa,La+gc*jb,Ta*Qb/ya(hk*Gb+yb)]}}W.duration=
1E3*ib;return W};Zb.behavior.zoom=function(){function W(ed){ed.on("mousedown.zoom",rb).on(gj+".zoom",Gb).on("dblclick.zoom",Qb).on("touchstart.zoom",yb)}function wa(ed){return[(ed[0]-Wb.x)/Wb.k,(ed[1]-Wb.y)/Wb.k]}function Da(ed){Wb.k=Math.max(Lc[0],Math.min(Lc[1],ed))}function La(ed,Wd){Wd=[Wd[0]*Wb.k+Wb.x,Wd[1]*Wb.k+Wb.y];Wb.x+=ed[0]-Wd[0];Wb.y+=ed[1]-Wd[1]}function Ta(ed,Wd,we,Ke){ed.__chart__={x:Wb.x,y:Wb.y,k:Wb.k};Da(Math.pow(2,Ke));La(mc=Wd,we);ed=Zb.select(ed);0<Tc&&(ed=ed.transition().duration(Tc));
ed.call(W.event)}function Xa(){od&&od.domain(Mc.range().map(function(ed){return(ed-Wb.x)/Wb.k}).map(Mc.invert));qd&&qd.domain(md.range().map(function(ed){return(ed-Wb.y)/Wb.k}).map(md.invert))}function jb(ed){Sc++||ed({type:"zoomstart"})}function eb(ed){Xa();ed({type:"zoom",scale:Wb.k,translate:[Wb.x,Wb.y]})}function ib(ed){--Sc||(ed({type:"zoomend"}),mc=null)}function rb(){var ed=this,Wd=wc.of(ed,arguments),we=0,Ke=Zb.select(q(ed)).on("mousemove.zoom",function(){we=1;La(Zb.mouse(ed),Te);eb(Wd)}).on("mouseup.zoom",
function(){Ke.on("mousemove.zoom",null).on("mouseup.zoom",null);Se(we);ib(Wd)}),Te=wa(Zb.mouse(ed)),Se=ra(ed);tk.call(ed);jb(Wd)}function yb(){function ed(){var Ef=Zb.touches(Te);He=Wb.k;Ef.forEach(function(Bf){Bf.identifier in ne&&(ne[Bf.identifier]=wa(Bf))});return Ef}function Wd(){var Ef=Zb.event.target;Zb.select(Ef).on(Ze,we).on(vg,Ke);hg.push(Ef);Ef=Zb.event.changedTouches;for(var Bf=0,Ig=Ef.length;Bf<Ig;++Bf)ne[Ef[Bf].identifier]=null;Bf=ed();Ig=Date.now();1===Bf.length?(500>Ig-hc&&(Ef=Bf[0],
Ta(Te,Ef,ne[Ef.identifier],Math.floor(Math.log(Wb.k)/Math.LN2)+1),u()),hc=Ig):1<Bf.length&&(Ef=Bf[0],Ig=Bf[1],Bf=Ef[0]-Ig[0],Ef=Ef[1]-Ig[1],Af=Bf*Bf+Ef*Ef)}function we(){var Ef=Zb.touches(Te),Bf;tk.call(Te);for(var Ig=0,ak=Ef.length;Ig<ak;++Ig,Bf=null){var $i=Ef[Ig];if(Bf=ne[$i.identifier]){if(ye)break;var lj=$i;var ye=Bf}}if(Bf){var Ah=(Ah=$i[0]-lj[0])*Ah+(Ah=$i[1]-lj[1])*Ah;Ef=Af&&Math.sqrt(Ah/Af);lj=[(lj[0]+$i[0])/2,(lj[1]+$i[1])/2];ye=[(ye[0]+Bf[0])/2,(ye[1]+Bf[1])/2];Da(Ef*He)}hc=null;La(lj,
ye);eb(Se)}function Ke(){if(Zb.event.touches.length){for(var Ef=Zb.event.changedTouches,Bf=0,Ig=Ef.length;Bf<Ig;++Bf)delete ne[Ef[Bf].identifier];for(var ak in ne)return void ed()}Zb.selectAll(hg).on(uf,null);ki.on("mousedown.zoom",rb).on("touchstart.zoom",yb);Sh();ib(Se)}var Te=this,Se=wc.of(Te,arguments),ne={},Af=0,He,uf=".zoom-"+Zb.event.changedTouches[0].identifier,Ze="touchmove"+uf,vg="touchend"+uf,hg=[],ki=Zb.select(Te),Sh=ra(Te);Wd();jb(Se);ki.on("mousedown.zoom",null).on("touchstart.zoom",
Wd)}function Gb(){var ed=wc.of(this,arguments);jd?clearTimeout(jd):(tk.call(this),gc=wa(mc=rc||Zb.mouse(this)),jb(ed));jd=setTimeout(function(){jd=null;ib(ed)},50);u();Da(Math.pow(2,.002*Pj())*Wb.k);La(mc,gc);eb(ed)}function Qb(){var ed=Zb.mouse(this),Wd=Math.log(Wb.k)/Math.LN2;Ta(this,ed,wa(ed),Zb.event.shiftKey?Math.ceil(Wd)-1:Math.floor(Wd)+1)}var Wb={x:0,y:0,k:1},gc,mc,rc,yc=[960,500],Lc=Rk,Tc=250,Sc=0,jd,hc,wc=I(W,"zoomstart","zoom","zoomend"),Mc,od,md,qd;gj||(gj="onwheel"in yg?(Pj=function(){return-Zb.event.deltaY*
(Zb.event.deltaMode?120:1)},"wheel"):"onmousewheel"in yg?(Pj=function(){return Zb.event.wheelDelta},"mousewheel"):(Pj=function(){return-Zb.event.detail},"MozMousePixelScroll"));W.event=function(ed){ed.each(function(){var Wd=wc.of(this,arguments),we=Wb;bi?Zb.select(this).transition().each("start.zoom",function(){Wb=this.__chart__||{x:0,y:0,k:1};jb(Wd)}).tween("zoom:zoom",function(){var Ke=yc[0],Te=yc[1],Se=mc?mc[0]:Ke/2,ne=mc?mc[1]:Te/2,Af=Zb.interpolateZoom([(Se-Wb.x)/Wb.k,(ne-Wb.y)/Wb.k,Ke/Wb.k],
[(Se-we.x)/we.k,(ne-we.y)/we.k,Ke/we.k]);return function(He){He=Af(He);var uf=Ke/He[2];this.__chart__=Wb={x:Se-He[0]*uf,y:ne-He[1]*uf,k:uf};eb(Wd)}}).each("interrupt.zoom",function(){ib(Wd)}).each("end.zoom",function(){ib(Wd)}):(this.__chart__=Wb,jb(Wd),eb(Wd),ib(Wd))})};W.translate=function(ed){if(!arguments.length)return[Wb.x,Wb.y];Wb={x:+ed[0],y:+ed[1],k:Wb.k};Xa();return W};W.scale=function(ed){if(!arguments.length)return Wb.k;Wb={x:Wb.x,y:Wb.y,k:null};Da(+ed);Xa();return W};W.scaleExtent=function(ed){if(!arguments.length)return Lc;
Lc=null==ed?Rk:[+ed[0],+ed[1]];return W};W.center=function(ed){if(!arguments.length)return rc;rc=ed&&[+ed[0],+ed[1]];return W};W.size=function(ed){if(!arguments.length)return yc;yc=ed&&[+ed[0],+ed[1]];return W};W.duration=function(ed){if(!arguments.length)return Tc;Tc=+ed;return W};W.x=function(ed){if(!arguments.length)return od;od=ed;Mc=ed.copy();Wb={x:0,y:0,k:1};return W};W.y=function(ed){if(!arguments.length)return qd;qd=ed;md=ed.copy();Wb={x:0,y:0,k:1};return W};return Zb.rebind(W,wc,"on")};var Rk=
[0,Infinity],Pj,gj;Zb.color=za;za.prototype.toString=function(){return this.rgb()+""};Zb.hsl=Ba;var Hj=Ba.prototype=new za;Hj.brighter=function(W){W=Math.pow(.7,arguments.length?W:1);return new Ba(this.h,this.s,this.l/W)};Hj.darker=function(W){W=Math.pow(.7,arguments.length?W:1);return new Ba(this.h,this.s,W*this.l)};Hj.rgb=function(){return Ma(this.h,this.s,this.l)};Zb.hcl=Oa;var Ij=Oa.prototype=new za;Ij.brighter=function(W){return new Oa(this.h,this.c,Math.min(100,this.l+qj*(arguments.length?W:
1)))};Ij.darker=function(W){return new Oa(this.h,this.c,Math.max(0,this.l-qj*(arguments.length?W:1)))};Ij.rgb=function(){return Ia(this.h,this.c,this.l).rgb()};Zb.lab=Pa;var qj=18,je=.95047,Bk=1,tg=1.08883,oh=Pa.prototype=new za;oh.brighter=function(W){return new Pa(Math.min(100,this.l+qj*(arguments.length?W:1)),this.a,this.b)};oh.darker=function(W){return new Pa(Math.max(0,this.l-qj*(arguments.length?W:1)),this.a,this.b)};oh.rgb=function(){return Fa(this.l,this.a,this.b)};Zb.rgb=Ka;var sk=Ka.prototype=
new za;sk.brighter=function(W){W=Math.pow(.7,arguments.length?W:1);var wa=this.r,Da=this.g,La=this.b;if(!wa&&!Da&&!La)return new Ka(30,30,30);wa&&30>wa&&(wa=30);Da&&30>Da&&(Da=30);La&&30>La&&(La=30);return new Ka(Math.min(255,wa/W),Math.min(255,Da/W),Math.min(255,La/W))};sk.darker=function(W){W=Math.pow(.7,arguments.length?W:1);return new Ka(W*this.r,W*this.g,W*this.b)};sk.hsl=function(){return ab(this.r,this.g,this.b)};sk.toString=function(){return"#"+Ea(this.r)+Ea(this.g)+Ea(this.b)};var Qj=Zb.map({aliceblue:15792383,
antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,
darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,
indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,
magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,
palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,
turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074});Qj.forEach(function(W,wa){Qj.set(W,new Ka(wa>>16,wa>>8&255,wa&255))});Zb.functor=fb;Zb.xhr=nb(x);Zb.dsv=function(W,wa){function Da(rb,yb,Gb){3>arguments.length&&(Gb=yb,yb=null);var Qb=Ha(rb,wa,null==yb?La:Ta(yb),Gb);Qb.row=function(Wb){return arguments.length?Qb.response(null==(yb=Wb)?La:Ta(Wb)):yb};return Qb}function La(rb){return Da.parse(rb.responseText)}function Ta(rb){return function(yb){return Da.parse(yb.responseText,
rb)}}function Xa(rb){return rb.map(jb).join(W)}function jb(rb){return eb.test(rb)?'"'+rb.replace(/"/g,'""')+'"':rb}var eb=new RegExp('["'+W+"\n]"),ib=W.charCodeAt(0);Da.parse=function(rb,yb){var Gb;return Da.parseRows(rb,function(Qb,Wb){if(Gb)return Gb(Qb,Wb-1);var gc=new Function("d","return {"+Qb.map(function(mc,rc){return JSON.stringify(mc)+": d["+rc+"]"}).join(",")+"}");Gb=yb?function(mc,rc){return yb(gc(mc),rc)}:gc})};Da.parseRows=function(rb,yb){function Gb(){if(rc>=mc)return Wb;if(Tc)return Tc=
!1,Qb;var jd=rc;if(34===rb.charCodeAt(jd)){for(var hc=jd;hc++<mc;)if(34===rb.charCodeAt(hc)){if(34!==rb.charCodeAt(hc+1))break;++hc}rc=hc+2;var wc=rb.charCodeAt(hc+1);13===wc?(Tc=!0,10===rb.charCodeAt(hc+2)&&++rc):10===wc&&(Tc=!0);return rb.slice(jd+1,hc).replace(/""/g,'"')}for(;rc<mc;){wc=rb.charCodeAt(rc++);hc=1;if(10===wc)Tc=!0;else if(13===wc)Tc=!0,10===rb.charCodeAt(rc)&&(++rc,++hc);else if(wc!==ib)continue;return rb.slice(jd,rc-hc)}return rb.slice(jd)}for(var Qb={},Wb={},gc=[],mc=rb.length,
rc=0,yc=0,Lc,Tc;(Lc=Gb())!==Wb;){for(var Sc=[];Lc!==Qb&&Lc!==Wb;)Sc.push(Lc),Lc=Gb();yb&&null==(Sc=yb(Sc,yc++))||gc.push(Sc)}return gc};Da.format=function(rb){if(Array.isArray(rb[0]))return Da.formatRows(rb);var yb=new w,Gb=[];rb.forEach(function(Qb){for(var Wb in Qb)yb.has(Wb)||Gb.push(yb.add(Wb))});return[Gb.map(jb).join(W)].concat(rb.map(function(Qb){return Gb.map(function(Wb){return jb(Qb[Wb])}).join(W)})).join("\n")};Da.formatRows=function(rb){return rb.map(Xa).join("\n")};return Da};Zb.csv=
Zb.dsv(",","text/csv");Zb.tsv=Zb.dsv("\t","text/tab-separated-values");var Rj,Ng,Df,oi,mj=this[A(this,"requestAnimationFrame")]||function(W){setTimeout(W,17)};Zb.timer=function(){Qa.apply(this,arguments)};Zb.timer.flush=function(){Va();db()};Zb.round=function(W,wa){return wa?Math.round(W*(wa=Math.pow(10,wa)))/wa:Math.round(W)};var zi="y z a f p n µ m  k M G T P E Z Y".split(" ").map(function(W,wa){var Da=Math.pow(10,3*Fe(8-wa));return{scale:8<wa?function(La){return La/Da}:function(La){return La*Da},
symbol:W}});Zb.formatPrefix=function(W,wa){var Da=0;if(W=+W)0>W&&(W*=-1),wa&&(W=Zb.round(W,qb(W,wa))),Da=1+Math.floor(1E-12+Math.log(W)/Math.LN10),Da=Math.max(-24,Math.min(24,3*Math.floor((Da-1)/3)));return zi[8+Da/3]};var bk=/(?:([^{])?([<>=^]))?([+\- ])?([$#])?(0)?(\d+)?(,)?(\.-?\d+)?([a-z%])?/i,Hk=Zb.map({b:function(W){return W.toString(2)},c:function(W){return String.fromCharCode(W)},o:function(W){return W.toString(8)},x:function(W){return W.toString(16)},X:function(W){return W.toString(16).toUpperCase()},
g:function(W,wa){return W.toPrecision(wa)},e:function(W,wa){return W.toExponential(wa)},f:function(W,wa){return W.toFixed(wa)},r:function(W,wa){return(W=Zb.round(W,qb(W,wa))).toFixed(Math.max(0,Math.min(20,qb(W*(1+1E-15),wa))))}}),ie=Zb.time={},xf=Date;cc.prototype={getDate:function(){return this._.getUTCDate()},getDay:function(){return this._.getUTCDay()},getFullYear:function(){return this._.getUTCFullYear()},getHours:function(){return this._.getUTCHours()},getMilliseconds:function(){return this._.getUTCMilliseconds()},
getMinutes:function(){return this._.getUTCMinutes()},getMonth:function(){return this._.getUTCMonth()},getSeconds:function(){return this._.getUTCSeconds()},getTime:function(){return this._.getTime()},getTimezoneOffset:function(){return 0},valueOf:function(){return this._.valueOf()},setDate:function(){Wg.setUTCDate.apply(this._,arguments)},setDay:function(){Wg.setUTCDay.apply(this._,arguments)},setFullYear:function(){Wg.setUTCFullYear.apply(this._,arguments)},setHours:function(){Wg.setUTCHours.apply(this._,
arguments)},setMilliseconds:function(){Wg.setUTCMilliseconds.apply(this._,arguments)},setMinutes:function(){Wg.setUTCMinutes.apply(this._,arguments)},setMonth:function(){Wg.setUTCMonth.apply(this._,arguments)},setSeconds:function(){Wg.setUTCSeconds.apply(this._,arguments)},setTime:function(){Wg.setTime.apply(this._,arguments)}};var Wg=Date.prototype;ie.year=kc(function(W){W=ie.day(W);W.setMonth(0,1);return W},function(W,wa){W.setFullYear(W.getFullYear()+wa)},function(W){return W.getFullYear()});ie.years=
ie.year.range;ie.years.utc=ie.year.utc.range;ie.day=kc(function(W){var wa=new xf(2E3,0);wa.setFullYear(W.getFullYear(),W.getMonth(),W.getDate());return wa},function(W,wa){W.setDate(W.getDate()+wa)},function(W){return W.getDate()-1});ie.days=ie.day.range;ie.days.utc=ie.day.utc.range;ie.dayOfYear=function(W){var wa=ie.year(W);return Math.floor((W-wa-6E4*(W.getTimezoneOffset()-wa.getTimezoneOffset()))/864E5)};"sunday monday tuesday wednesday thursday friday saturday".split(" ").forEach(function(W,wa){wa=
7-wa;var Da=ie[W]=kc(function(La){(La=ie.day(La)).setDate(La.getDate()-(La.getDay()+wa)%7);return La},function(La,Ta){La.setDate(La.getDate()+7*Math.floor(Ta))},function(La){var Ta=ie.year(La).getDay();return Math.floor((ie.dayOfYear(La)+(Ta+wa)%7)/7)-(Ta!==wa)});ie[W+"s"]=Da.range;ie[W+"s"].utc=Da.utc.range;ie[W+"OfYear"]=function(La){var Ta=ie.year(La).getDay();return Math.floor((ie.dayOfYear(La)+(Ta+wa)%7)/7)}});ie.week=ie.sunday;ie.weeks=ie.sunday.range;ie.weeks.utc=ie.sunday.utc.range;ie.weekOfYear=
ie.sundayOfYear;var te={"-":"",_:" ",0:"0"},ae=/^\s*\d+/,zj=/^%/;Zb.locale=function(W){return{numberFormat:Kb(W),timeFormat:Pc(W)}};var Ci=Zb.locale({decimal:".",thousands:",",grouping:[3],currency:["$",""],dateTime:"%a %b %e %X %Y",date:"%m/%d/%Y",time:"%H:%M:%S",periods:["AM","PM"],days:"Sunday Monday Tuesday Wednesday Thursday Friday Saturday".split(" "),shortDays:"Sun Mon Tue Wed Thu Fri Sat".split(" "),months:"January February March April May June July August September October November December".split(" "),
shortMonths:"Jan Feb Mar Apr May Jun Jul Aug Sep Oct Nov Dec".split(" ")});Zb.format=Ci.numberFormat;Zb.geo={};tb.prototype={s:0,t:0,add:function(W){Lb(W,this.t,rj);Lb(rj.s,this.s,this);this.s?this.t+=rj.t:this.s=rj.t},reset:function(){this.s=this.t=0},valueOf:function(){return this.s}};var rj=new tb;Zb.geo.stream=function(W,wa){if(W&&ih.hasOwnProperty(W.type))ih[W.type](W,wa);else Ib(W,wa)};var ih={Feature:function(W,wa){Ib(W.geometry,wa)},FeatureCollection:function(W,wa){W=W.features;for(var Da=
-1,La=W.length;++Da<La;)Ib(W[Da].geometry,wa)}},pi={Sphere:function(W,wa){wa.sphere()},Point:function(W,wa){W=W.coordinates;wa.point(W[0],W[1],W[2])},MultiPoint:function(W,wa){for(var Da=W.coordinates,La=-1,Ta=Da.length;++La<Ta;)W=Da[La],wa.point(W[0],W[1],W[2])},LineString:function(W,wa){lc(W.coordinates,wa,0)},MultiLineString:function(W,wa){W=W.coordinates;for(var Da=-1,La=W.length;++Da<La;)lc(W[Da],wa,0)},Polygon:function(W,wa){$b(W.coordinates,wa)},MultiPolygon:function(W,wa){W=W.coordinates;
for(var Da=-1,La=W.length;++Da<La;)$b(W[Da],wa)},GeometryCollection:function(W,wa){W=W.geometries;for(var Da=-1,La=W.length;++Da<La;)Ib(W[Da],wa)}};Zb.geo.area=function(W){Sj=0;Zb.geo.stream(W,pf);return Sj};var Sj,Bh=new tb,pf={sphere:function(){Sj+=4*Ce},point:z,lineStart:z,lineEnd:z,polygonStart:function(){Bh.reset();pf.lineStart=nc},polygonEnd:function(){var W=2*Bh;Sj+=0>W?4*Ce+W:W;pf.lineStart=pf.lineEnd=pf.point=z}};Zb.geo.bounds=function(){function W(hc,wc){Tc.push(Sc=[yb=hc,Qb=hc]);wc<Gb&&
(Gb=wc);wc>Wb&&(Wb=wc)}function wa(hc,wc){var Mc=xc([hc*Oe,wc*Oe]);if(yc){var od=Rc(yc,Mc);od=Rc([od[1],-od[0],0],od);xd(od);od=sd(od);var md=hc-gc,qd=0<md?1:-1,ed=od[0]*Jf*qd;md=180<Fe(md);md^(qd*gc<ed&&ed<qd*hc)?(wc=od[1]*Jf,wc>Wb&&(Wb=wc)):(ed=(ed+360)%360-180,md^(qd*gc<ed&&ed<qd*hc))?(wc=-od[1]*Jf,wc<Gb&&(Gb=wc)):(wc<Gb&&(Gb=wc),wc>Wb&&(Wb=wc));md?hc<gc?eb(yb,hc)>eb(yb,Qb)&&(Qb=hc):eb(hc,Qb)>eb(yb,Qb)&&(yb=hc):Qb>=yb?(hc<yb&&(yb=hc),hc>Qb&&(Qb=hc)):hc>gc?eb(yb,hc)>eb(yb,Qb)&&(Qb=hc):eb(hc,Qb)>
eb(yb,Qb)&&(yb=hc)}else W(hc,wc);yc=Mc;gc=hc}function Da(){jd.point=wa}function La(){Sc[0]=yb;Sc[1]=Qb;jd.point=W;yc=null}function Ta(hc,wc){if(yc){var Mc=hc-gc;Lc+=180<Fe(Mc)?Mc+(0<Mc?360:-360):Mc}else mc=hc,rc=wc;pf.point(hc,wc);wa(hc,wc)}function Xa(){pf.lineStart()}function jb(){Ta(mc,rc);pf.lineEnd();1E-6<Fe(Lc)&&(yb=-(Qb=180));Sc[0]=yb;Sc[1]=Qb;yc=null}function eb(hc,wc){return 0>(wc-=hc)?wc+360:wc}function ib(hc,wc){return hc[0]-wc[0]}function rb(hc,wc){return wc[0]<=wc[1]?wc[0]<=hc&&hc<=wc[1]:
hc<wc[0]||wc[1]<hc}var yb,Gb,Qb,Wb,gc,mc,rc,yc,Lc,Tc,Sc,jd={point:W,lineStart:Da,lineEnd:La,polygonStart:function(){jd.point=Ta;jd.lineStart=Xa;jd.lineEnd=jb;Lc=0;pf.polygonStart()},polygonEnd:function(){pf.polygonEnd();jd.point=W;jd.lineStart=Da;jd.lineEnd=La;0>Bh?(yb=-(Qb=180),Gb=-(Wb=90)):1E-6<Lc?Wb=90:-1E-6>Lc&&(Gb=-90);Sc[0]=yb;Sc[1]=Qb}};return function(hc){Wb=Qb=-(yb=Gb=Infinity);Tc=[];Zb.geo.stream(hc,jd);if(hc=Tc.length){Tc.sort(ib);for(var wc=1,Mc=Tc[0],od,md=[Mc];wc<hc;++wc)od=Tc[wc],rb(od[0],
Mc)||rb(od[1],Mc)?(eb(Mc[0],od[1])>eb(Mc[0],Mc[1])&&(Mc[1]=od[1]),eb(od[0],Mc[1])>eb(Mc[0],Mc[1])&&(Mc[0]=od[0])):md.push(Mc=od);var qd=-Infinity,ed;hc=md.length-1;wc=0;for(Mc=md[hc];wc<=hc;Mc=od,++wc)od=md[wc],(ed=eb(Mc[1],od[0]))>qd&&(qd=ed,yb=od[0],Qb=Mc[1])}Tc=Sc=null;return Infinity===yb||Infinity===Gb?[[NaN,NaN],[NaN,NaN]]:[[yb,Gb],[Qb,Wb]]}}();Zb.geo.centroid=function(W){Ei=Aj=Ug=Di=lg=Mi=Fi=Hh=ai=Ih=li=0;Zb.geo.stream(W,Uh);W=ai;var wa=Ih,Da=li,La=W*W+wa*wa+Da*Da;return 1E-12>La&&(W=Mi,wa=
Fi,Da=Hh,1E-6>Aj&&(W=Ug,wa=Di,Da=lg),La=W*W+wa*wa+Da*Da,1E-12>La)?[NaN,NaN]:[Math.atan2(wa,W)*Jf,ua(Da/Math.sqrt(La))*Jf]};var Ei,Aj,Ug,Di,lg,Mi,Fi,Hh,ai,Ih,li,Uh={sphere:z,point:Hc,lineStart:Kd,lineEnd:Ld,polygonStart:function(){Uh.lineStart=kb},polygonEnd:function(){Uh.lineStart=Kd}},Vh=ge(Hd,function(W){var wa=NaN,Da=NaN,La=NaN,Ta;return{lineStart:function(){W.lineStart();Ta=1},point:function(Xa,jb){var eb=0<Xa?Ce:-Ce,ib=Fe(Xa-wa);if(1E-6>Fe(ib-Ce))W.point(wa,Da=0<(Da+jb)/2?Kf:-Kf),W.point(La,
Da),W.lineEnd(),W.lineStart(),W.point(eb,Da),W.point(Xa,Da),Ta=0;else if(La!==eb&&ib>=Ce){1E-6>Fe(wa-La)&&(wa-=1E-6*La);1E-6>Fe(Xa-eb)&&(Xa-=1E-6*eb);ib=wa;var rb=Da,yb=Xa,Gb,Qb,Wb=Math.sin(ib-yb);Da=1E-6<Fe(Wb)?Math.atan((Math.sin(rb)*(Qb=Math.cos(jb))*Math.sin(yb)-Math.sin(jb)*(Gb=Math.cos(rb))*Math.sin(ib))/(Gb*Qb*Wb)):(rb+jb)/2;W.point(La,Da);W.lineEnd();W.lineStart();W.point(eb,Da);Ta=0}W.point(wa=Xa,Da=jb);La=eb},lineEnd:function(){W.lineEnd();wa=Da=NaN},clean:function(){return 2-Ta}}},function(W,
wa,Da,La){null==W?(Da*=Kf,La.point(-Ce,Da),La.point(0,Da),La.point(Ce,Da),La.point(Ce,0),La.point(Ce,-Da),La.point(0,-Da),La.point(-Ce,-Da),La.point(-Ce,0),La.point(-Ce,Da)):1E-6<Fe(W[0]-wa[0])?(W=W[0]<wa[0]?Ce:-Ce,Da=Da*W/2,La.point(-W,Da),La.point(0,Da),La.point(W,Da)):La.point(wa[0],wa[1])},[-Ce,-Ce/2]);Zb.geo.clipExtent=function(){var W,wa,Da,La,Ta,Xa,jb={stream:function(eb){Ta&&(Ta.valid=!1);Ta=Xa(eb);Ta.valid=!0;return Ta},extent:function(eb){if(!arguments.length)return[[W,wa],[Da,La]];Xa=Xd(W=
+eb[0][0],wa=+eb[0][1],Da=+eb[1][0],La=+eb[1][1]);Ta&&(Ta.valid=!1,Ta=null);return jb}};return jb.extent([[0,0],[960,500]])};(Zb.geo.conicEqualArea=function(){return Ve(Yd)}).raw=Yd;Zb.geo.albers=function(){return Zb.geo.conicEqualArea().rotate([96,0]).center([-.6,38.7]).parallels([29.5,45.5]).scale(1070)};Zb.geo.albersUsa=function(){function W(rb){var yb=rb[0];rb=rb[1];Ta=null;(jb(yb,rb),Ta)||(eb(yb,rb),Ta)||ib(yb,rb);return Ta}var wa=Zb.geo.albers(),Da=Zb.geo.conicEqualArea().rotate([154,0]).center([-2,
58.5]).parallels([55,65]),La=Zb.geo.conicEqualArea().rotate([157,0]).center([-3,19.9]).parallels([8,18]),Ta,Xa={point:function(rb,yb){Ta=[rb,yb]}},jb,eb,ib;W.invert=function(rb){var yb=wa.scale(),Gb=wa.translate(),Qb=(rb[0]-Gb[0])/yb;yb=(rb[1]-Gb[1])/yb;return(.12<=yb&&.234>yb&&-.425<=Qb&&-.214>Qb?Da:.166<=yb&&.234>yb&&-.214<=Qb&&-.115>Qb?La:wa).invert(rb)};W.stream=function(rb){var yb=wa.stream(rb),Gb=Da.stream(rb),Qb=La.stream(rb);return{point:function(Wb,gc){yb.point(Wb,gc);Gb.point(Wb,gc);Qb.point(Wb,
gc)},sphere:function(){yb.sphere();Gb.sphere();Qb.sphere()},lineStart:function(){yb.lineStart();Gb.lineStart();Qb.lineStart()},lineEnd:function(){yb.lineEnd();Gb.lineEnd();Qb.lineEnd()},polygonStart:function(){yb.polygonStart();Gb.polygonStart();Qb.polygonStart()},polygonEnd:function(){yb.polygonEnd();Gb.polygonEnd();Qb.polygonEnd()}}};W.precision=function(rb){if(!arguments.length)return wa.precision();wa.precision(rb);Da.precision(rb);La.precision(rb);return W};W.scale=function(rb){if(!arguments.length)return wa.scale();
wa.scale(rb);Da.scale(.35*rb);La.scale(rb);return W.translate(wa.translate())};W.translate=function(rb){if(!arguments.length)return wa.translate();var yb=wa.scale(),Gb=+rb[0],Qb=+rb[1];jb=wa.translate(rb).clipExtent([[Gb-.455*yb,Qb-.238*yb],[Gb+.455*yb,Qb+.238*yb]]).stream(Xa).point;eb=Da.translate([Gb-.307*yb,Qb+.201*yb]).clipExtent([[Gb-.425*yb+1E-6,Qb+.12*yb+1E-6],[Gb-.214*yb-1E-6,Qb+.234*yb-1E-6]]).stream(Xa).point;ib=La.translate([Gb-.205*yb,Qb+.212*yb]).clipExtent([[Gb-.214*yb+1E-6,Qb+.166*
yb+1E-6],[Gb-.115*yb-1E-6,Qb+.234*yb-1E-6]]).stream(Xa).point;return W};return W.scale(1070)};var kk,dk,mi={point:z,lineStart:z,lineEnd:z,polygonStart:function(){dk=0;mi.lineStart=yf},polygonEnd:function(){mi.lineStart=mi.lineEnd=mi.point=z;kk+=Fe(dk/2)}},Jj,Kj,ni,Lj,sj={point:function(W,wa){W<Jj&&(Jj=W);W>ni&&(ni=W);wa<Kj&&(Kj=wa);wa>Lj&&(Lj=wa)},lineStart:z,lineEnd:z,polygonStart:z,polygonEnd:z},Wh={point:tc,lineStart:Fc,lineEnd:Wc,polygonStart:function(){Wh.lineStart=hd},polygonEnd:function(){Wh.point=
tc;Wh.lineStart=Fc;Wh.lineEnd=Wc}};Zb.geo.path=function(){function W(ib){ib&&("function"===typeof Da&&jb.pointRadius(+Da.apply(this,arguments)),eb&&eb.valid||(eb=Xa(jb)),Zb.geo.stream(ib,eb));return jb.result()}function wa(){eb=null;return W}var Da=4.5,La,Ta,Xa,jb,eb;W.area=function(ib){kk=0;Zb.geo.stream(ib,Xa(mi));return kk};W.centroid=function(ib){Ug=Di=lg=Mi=Fi=Hh=ai=Ih=li=0;Zb.geo.stream(ib,Xa(Wh));return li?[ai/li,Ih/li]:Hh?[Mi/Hh,Fi/Hh]:lg?[Ug/lg,Di/lg]:[NaN,NaN]};W.bounds=function(ib){ni=
Lj=-(Jj=Kj=Infinity);Zb.geo.stream(ib,Xa(sj));return[[Jj,Kj],[ni,Lj]]};W.projection=function(ib){if(!arguments.length)return La;Xa=(La=ib)?ib.stream||ce(ib):x;return wa()};W.context=function(ib){if(!arguments.length)return Ta;jb=null==(Ta=ib)?new Lf:new be(ib);"function"!==typeof Da&&jb.pointRadius(Da);return wa()};W.pointRadius=function(ib){if(!arguments.length)return Da;Da="function"===typeof ib?ib:(jb.pointRadius(+ib),+ib);return W};return W.projection(Zb.geo.albersUsa()).context(null)};Zb.geo.transform=
function(W){return{stream:function(wa){wa=new de(wa);for(var Da in W)wa[Da]=W[Da];return wa}}};de.prototype={point:function(W,wa){this.stream.point(W,wa)},sphere:function(){this.stream.sphere()},lineStart:function(){this.stream.lineStart()},lineEnd:function(){this.stream.lineEnd()},polygonStart:function(){this.stream.polygonStart()},polygonEnd:function(){this.stream.polygonEnd()}};Zb.geo.projection=Ue;Zb.geo.projectionMutator=oc;(Zb.geo.equirectangular=function(){return Ue(Zc)}).raw=Zc.invert=Zc;
Zb.geo.rotation=function(W){function wa(Da){Da=W(Da[0]*Oe,Da[1]*Oe);return Da[0]*=Jf,Da[1]*=Jf,Da}W=$c(W[0]%360*Oe,W[1]*Oe,2<W.length?W[2]*Oe:0);wa.invert=function(Da){Da=W.invert(Da[0]*Oe,Da[1]*Oe);return Da[0]*=Jf,Da[1]*=Jf,Da};return wa};ld.invert=Zc;Zb.geo.circle=function(){function W(){var Xa="function"===typeof wa?wa.apply(this,arguments):wa,jb=$c(-Xa[0]*Oe,-Xa[1]*Oe,0).invert,eb=[];Ta(null,null,1,{point:function(ib,rb){eb.push(ib=jb(ib,rb));ib[0]*=Jf;ib[1]*=Jf}});return{type:"Polygon",coordinates:[eb]}}
var wa=[0,0],Da,La=6,Ta;W.origin=function(Xa){if(!arguments.length)return wa;wa=Xa;return W};W.angle=function(Xa){if(!arguments.length)return Da;Ta=zc((Da=+Xa)*Oe,La*Oe);return W};W.precision=function(Xa){if(!arguments.length)return La;Ta=zc(Da*Oe,(La=+Xa)*Oe);return W};return W.angle(90)};Zb.geo.distance=function(W,wa){var Da=(wa[0]-W[0])*Oe,La=W[1]*Oe,Ta=wa[1]*Oe;wa=Math.cos(Da);W=Math.sin(La);La=Math.cos(La);var Xa=Math.sin(Ta);Ta=Math.cos(Ta);var jb;return Math.atan2(Math.sqrt((jb=Ta*Math.sin(Da))*
jb+(jb=La*Xa-W*Ta*wa)*jb),W*Xa+La*Ta*wa)};Zb.geo.graticule=function(){function W(){return{type:"MultiLineString",coordinates:wa()}}function wa(){return Zb.range(Math.ceil(Xa/Qb)*Qb,Ta,Qb).map(rc).concat(Zb.range(Math.ceil(rb/Wb)*Wb,ib,Wb).map(yc)).concat(Zb.range(Math.ceil(La/yb)*yb,Da,yb).filter(function(Tc){return 1E-6<Fe(Tc%Qb)}).map(gc)).concat(Zb.range(Math.ceil(eb/Gb)*Gb,jb,Gb).filter(function(Tc){return 1E-6<Fe(Tc%Wb)}).map(mc))}var Da,La,Ta,Xa,jb,eb,ib,rb,yb=10,Gb=yb,Qb=90,Wb=360,gc,mc,rc,
yc,Lc=2.5;W.lines=function(){return wa().map(function(Tc){return{type:"LineString",coordinates:Tc}})};W.outline=function(){return{type:"Polygon",coordinates:[rc(Xa).concat(yc(ib).slice(1),rc(Ta).reverse().slice(1),yc(rb).reverse().slice(1))]}};W.extent=function(Tc){return arguments.length?W.majorExtent(Tc).minorExtent(Tc):W.minorExtent()};W.majorExtent=function(Tc){if(!arguments.length)return[[Xa,rb],[Ta,ib]];Xa=+Tc[0][0];Ta=+Tc[1][0];rb=+Tc[0][1];ib=+Tc[1][1];Xa>Ta&&(Tc=Xa,Xa=Ta,Ta=Tc);rb>ib&&(Tc=
rb,rb=ib,ib=Tc);return W.precision(Lc)};W.minorExtent=function(Tc){if(!arguments.length)return[[La,eb],[Da,jb]];La=+Tc[0][0];Da=+Tc[1][0];eb=+Tc[0][1];jb=+Tc[1][1];La>Da&&(Tc=La,La=Da,Da=Tc);eb>jb&&(Tc=eb,eb=jb,jb=Tc);return W.precision(Lc)};W.step=function(Tc){return arguments.length?W.majorStep(Tc).minorStep(Tc):W.minorStep()};W.majorStep=function(Tc){if(!arguments.length)return[Qb,Wb];Qb=+Tc[0];Wb=+Tc[1];return W};W.minorStep=function(Tc){if(!arguments.length)return[yb,Gb];yb=+Tc[0];Gb=+Tc[1];
return W};W.precision=function(Tc){if(!arguments.length)return Lc;Lc=+Tc;gc=Gc(eb,jb,90);mc=ud(La,Da,Lc);rc=Gc(rb,ib,90);yc=ud(Xa,Ta,Lc);return W};return W.majorExtent([[-180,-89.999999],[180,89.999999]]).minorExtent([[-180,-80.000001],[180,80.000001]])};Zb.geo.greatArc=function(){function W(){return{type:"LineString",coordinates:[Da||wa.apply(this,arguments),Ta||La.apply(this,arguments)]}}var wa=Od,Da,La=Gd,Ta;W.distance=function(){return Zb.geo.distance(Da||wa.apply(this,arguments),Ta||La.apply(this,
arguments))};W.source=function(Xa){if(!arguments.length)return wa;wa=Xa;Da="function"===typeof Xa?null:Xa;return W};W.target=function(Xa){if(!arguments.length)return La;La=Xa;Ta="function"===typeof Xa?null:Xa;return W};W.precision=function(){return arguments.length?W:0};return W};Zb.geo.interpolate=function(W,wa){return $d(W[0]*Oe,W[1]*Oe,wa[0]*Oe,wa[1]*Oe)};Zb.geo.length=function(W){Gi=0;Zb.geo.stream(W,hj);return Gi};var Gi,hj={sphere:z,point:z,lineStart:function(){function W(Ta,Xa){var jb=Math.sin(Xa*=
Oe);Xa=Math.cos(Xa);var eb=Fe((Ta*=Oe)-wa),ib=Math.cos(eb);Gi+=Math.atan2(Math.sqrt((eb=Xa*Math.sin(eb))*eb+(eb=La*jb-Da*Xa*ib)*eb),Da*jb+La*Xa*ib);wa=Ta;Da=jb;La=Xa}var wa,Da,La;hj.point=function(Ta,Xa){wa=Ta*Oe;Da=Math.sin(Xa*=Oe);La=Math.cos(Xa);hj.point=W};hj.lineEnd=function(){hj.point=hj.lineEnd=z}},lineEnd:z,polygonStart:z,polygonEnd:z},Uk=zd(function(W){return Math.sqrt(2/(1+W))},function(W){return 2*Math.asin(W/2)});(Zb.geo.azimuthalEqualArea=function(){return Ue(Uk)}).raw=Uk;var Ck=zd(function(W){return(W=
Math.acos(W))&&W/Math.sin(W)},x);(Zb.geo.azimuthalEquidistant=function(){return Ue(Ck)}).raw=Ck;(Zb.geo.conicConformal=function(){return Ve(Le)}).raw=Le;(Zb.geo.conicEquidistant=function(){return Ve(Xe)}).raw=Xe;var ij=zd(function(W){return 1/W},Math.atan);(Zb.geo.gnomonic=function(){return Ue(ij)}).raw=ij;gf.invert=function(W,wa){return[W,2*Math.atan(Math.exp(wa))-Kf]};(Zb.geo.mercator=function(){return Me(gf)}).raw=gf;var lk=zd(function(){return 1},Math.asin);(Zb.geo.orthographic=function(){return Ue(lk)}).raw=
lk;var Cj=zd(function(W){return 1/(1+W)},function(W){return 2*Math.atan(W)});(Zb.geo.stereographic=function(){return Ue(Cj)}).raw=Cj;hf.invert=function(W,wa){return[-wa,2*Math.atan(Math.exp(W))-Kf]};(Zb.geo.transverseMercator=function(){var W=Me(hf),wa=W.center,Da=W.rotate;W.center=function(La){return La?wa([-La[1],La[0]]):(La=wa(),[La[1],-La[0]])};W.rotate=function(La){return La?Da([La[0],La[1],2<La.length?La[2]+90:90]):(La=Da(),[La[0],La[1],La[2]-90])};return Da([0,0,90])}).raw=hf;Zb.geom={};Zb.geom.hull=
function(W){function wa(Ta){if(3>Ta.length)return[];var Xa=fb(Da),jb=fb(La),eb,ib=Ta.length,rb=[],yb=[];for(eb=0;eb<ib;eb++)rb.push([+Xa.call(this,Ta[eb],eb),+jb.call(this,Ta[eb],eb),eb]);rb.sort(si);for(eb=0;eb<ib;eb++)yb.push([rb[eb][0],-rb[eb][1]]);Xa=Fg(rb);yb=Fg(yb);jb=yb[0]===Xa[0];ib=yb[yb.length-1]===Xa[Xa.length-1];var Gb=[];for(eb=Xa.length-1;0<=eb;--eb)Gb.push(Ta[rb[Xa[eb]][2]]);for(eb=+jb;eb<yb.length-ib;++eb)Gb.push(Ta[rb[yb[eb]][2]]);return Gb}var Da=Uf,La=eh;if(arguments.length)return wa(W);
wa.x=function(Ta){return arguments.length?(Da=Ta,wa):Da};wa.y=function(Ta){return arguments.length?(La=Ta,wa):La};return wa};Zb.geom.polygon=function(W){qk(W,Bj);return W};var Bj=Zb.geom.polygon.prototype=[];Bj.area=function(){for(var W=-1,wa=this.length,Da,La=this[wa-1],Ta=0;++W<wa;)Da=La,La=this[W],Ta+=Da[1]*La[0]-Da[0]*La[1];return.5*Ta};Bj.centroid=function(W){var wa=-1,Da=this.length,La=0,Ta=0,Xa=this[Da-1];for(arguments.length||(W=-1/(6*this.area()));++wa<Da;){var jb=Xa;Xa=this[wa];var eb=jb[0]*
Xa[1]-Xa[0]*jb[1];La+=(jb[0]+Xa[0])*eb;Ta+=(jb[1]+Xa[1])*eb}return[La*W,Ta*W]};Bj.clip=function(W){for(var wa,Da=rh(W),La=-1,Ta=this.length-rh(this),Xa,jb,eb=this[Ta-1],ib,rb,yb;++La<Ta;){wa=W.slice();W.length=0;ib=this[La];rb=wa[(jb=wa.length-Da)-1];for(Xa=-1;++Xa<jb;)yb=wa[Xa],Lh(yb,eb,ib)?(Lh(rb,eb,ib)||W.push(di(rb,yb,eb,ib)),W.push(yb)):Lh(rb,eb,ib)&&W.push(di(rb,yb,eb,ib)),rb=yb;Da&&W.push(W[0]);eb=ib}return W};var Mj,tj,Nj,pg=[],Mk,ek,dl=[];Rf.prototype.prepare=function(){for(var W=this.edges,
wa=W.length,Da;wa--;)Da=W[wa].edge,Da.b&&Da.a||W.splice(wa,1);W.sort(Of);return W.length};uh.prototype={start:function(){return this.edge.l===this.site?this.edge.a:this.edge.b},end:function(){return this.edge.l===this.site?this.edge.b:this.edge.a}};jf.prototype={insert:function(W,wa){var Da;if(W){wa.P=W;if(wa.N=W.N)W.N.P=wa;W.N=wa;if(W.R){for(W=W.R;W.L;)W=W.L;W.L=wa}else W.R=wa;var La=W}else this._?(W=Wi(this._),wa.P=null,wa.N=W,W.P=W.L=wa,La=W):(wa.P=wa.N=null,this._=wa,La=null);wa.L=wa.R=null;wa.U=
La;wa.C=!0;for(W=wa;La&&La.C;)wa=La.U,La===wa.L?(Da=wa.R)&&Da.C?(La.C=Da.C=!1,wa.C=!0,W=wa):(W===La.R&&(Nh(this,La),W=La,La=W.U),La.C=!1,wa.C=!0,Oh(this,wa)):(Da=wa.L)&&Da.C?(La.C=Da.C=!1,wa.C=!0,W=wa):(W===La.L&&(Oh(this,La),W=La,La=W.U),La.C=!1,wa.C=!0,Nh(this,wa)),La=W.U;this._.C=!1},remove:function(W){W.N&&(W.N.P=W.P);W.P&&(W.P.N=W.N);W.N=W.P=null;var wa=W.U,Da=W.L,La=W.R;var Ta=Da?La?Wi(La):Da:La;wa?wa.L===W?wa.L=Ta:wa.R=Ta:this._=Ta;if(Da&&La){var Xa=Ta.C;Ta.C=W.C;Ta.L=Da;Da.U=Ta;Ta!==La?(wa=
Ta.U,Ta.U=W.U,W=Ta.R,wa.L=W,Ta.R=La,La.U=Ta):(Ta.U=wa,wa=Ta,W=Ta.R)}else Xa=W.C,W=Ta;W&&(W.U=wa);if(!Xa)if(W&&W.C)W.C=!1;else{do{if(W===this._)break;if(W===wa.L){if(W=wa.R,W.C&&(W.C=!1,wa.C=!0,Nh(this,wa),W=wa.R),W.L&&W.L.C||W.R&&W.R.C){W.R&&W.R.C||(W.L.C=!1,W.C=!0,Oh(this,W),W=wa.R);W.C=wa.C;wa.C=W.R.C=!1;Nh(this,wa);W=this._;break}}else if(W=wa.L,W.C&&(W.C=!1,wa.C=!0,Oh(this,wa),W=wa.L),W.L&&W.L.C||W.R&&W.R.C){W.L&&W.L.C||(W.R.C=!1,W.C=!0,Nh(this,W),W=wa.L);W.C=wa.C;wa.C=W.L.C=!1;Oh(this,wa);W=
this._;break}W.C=!0;W=wa;wa=wa.U}while(!W.C);W&&(W.C=!1)}}};Zb.geom.voronoi=function(W){function wa(ib){var rb=Array(ib.length),yb=eb[0][0],Gb=eb[0][1],Qb=eb[1][0],Wb=eb[1][1];ui(Da(ib),eb).cells.forEach(function(gc,mc){var rc=gc.edges;gc=gc.site;(rb[mc]=rc.length?rc.map(function(yc){yc=yc.start();return[yc.x,yc.y]}):gc.x>=yb&&gc.x<=Qb&&gc.y>=Gb&&gc.y<=Wb?[[yb,Wb],[Qb,Wb],[Qb,Gb],[yb,Gb]]:[]).point=ib[mc]});return rb}function Da(ib){return ib.map(function(rb,yb){return{x:1E-6*Math.round(Xa(rb,yb)/
1E-6),y:1E-6*Math.round(jb(rb,yb)/1E-6),i:yb}})}var La=Uf,Ta=eh,Xa=La,jb=Ta,eb=uj;if(W)return wa(W);wa.links=function(ib){return ui(Da(ib)).edges.filter(function(rb){return rb.l&&rb.r}).map(function(rb){return{source:ib[rb.l.i],target:ib[rb.r.i]}})};wa.triangles=function(ib){var rb=[];ui(Da(ib)).cells.forEach(function(yb,Gb){var Qb=yb.site;yb=yb.edges.sort(Of);var Wb=-1,gc=yb.length,mc=yb[gc-1].edge;for(mc=mc.l===Qb?mc.r:mc.l;++Wb<gc;){var rc=mc;mc=yb[Wb].edge;mc=mc.l===Qb?mc.r:mc.l;Gb<rc.i&&Gb<mc.i&&
0>(Qb.x-mc.x)*(rc.y-Qb.y)-(Qb.x-rc.x)*(mc.y-Qb.y)&&rb.push([ib[Gb],ib[rc.i],ib[mc.i]])}});return rb};wa.x=function(ib){return arguments.length?(Xa=fb(La=ib),wa):La};wa.y=function(ib){return arguments.length?(jb=fb(Ta=ib),wa):Ta};wa.clipExtent=function(ib){if(!arguments.length)return eb===uj?null:eb;eb=null==ib?uj:ib;return wa};wa.size=function(ib){return arguments.length?wa.clipExtent(ib&&[[0,0],ib]):eb===uj?null:eb&&eb[1]};return wa};var uj=[[-1E6,-1E6],[1E6,1E6]];Zb.geom.delaunay=function(W){return Zb.geom.voronoi().triangles(W)};
Zb.geom.quadtree=function(W,wa,Da,La,Ta){function Xa(rb){function yb(od,md,qd,ed,Wd,we,Ke,Te){if(!isNaN(qd)&&!isNaN(ed))if(od.leaf){var Se=od.x,ne=od.y;if(null!=Se){if(!(.01>Fe(Se-qd)+Fe(ne-ed))){var Af=od.point;od.x=od.y=od.point=null;Gb(od,Af,Se,ne,Wd,we,Ke,Te)}Gb(od,md,qd,ed,Wd,we,Ke,Te)}else od.x=qd,od.y=ed,od.point=md}else Gb(od,md,qd,ed,Wd,we,Ke,Te)}function Gb(od,md,qd,ed,Wd,we,Ke,Te){var Se=.5*(Wd+Ke),ne=.5*(we+Te),Af=qd>=Se,He=ed>=ne,uf=He<<1|Af;od.leaf=!1;od=od.nodes[uf]||(od.nodes[uf]=
Ph());Af?Wd=Se:Ke=Se;He?we=ne:Te=ne;yb(od,md,qd,ed,Wd,we,Ke,Te)}var Qb=fb(jb),Wb=fb(eb),gc;if(null!=wa){var mc=wa;var rc=Da;var yc=La;var Lc=Ta}else{yc=Lc=-(mc=rc=Infinity);var Tc=[];var Sc=[];var jd=rb.length;if(ib)for(gc=0;gc<jd;++gc){var hc=rb[gc];hc.x<mc&&(mc=hc.x);hc.y<rc&&(rc=hc.y);hc.x>yc&&(yc=hc.x);hc.y>Lc&&(Lc=hc.y);Tc.push(hc.x);Sc.push(hc.y)}else for(gc=0;gc<jd;++gc){var wc=+Qb(hc=rb[gc],gc);hc=+Wb(hc,gc);wc<mc&&(mc=wc);hc<rc&&(rc=hc);wc>yc&&(yc=wc);hc>Lc&&(Lc=hc);Tc.push(wc);Sc.push(hc)}}wc=
yc-mc;hc=Lc-rc;wc>hc?Lc=rc+wc:yc=mc+hc;var Mc=Ph();Mc.add=function(od){yb(Mc,od,+Qb(od,++gc),+Wb(od,gc),mc,rc,yc,Lc)};Mc.visit=function(od){Qh(od,Mc,mc,rc,yc,Lc)};Mc.find=function(od){return vi(Mc,od[0],od[1],mc,rc,yc,Lc)};gc=-1;if(null==wa){for(;++gc<jd;)yb(Mc,rb[gc],Tc[gc],Sc[gc],mc,rc,yc,Lc);--gc}else rb.forEach(Mc.add);Tc=Sc=rb=hc=null;return Mc}var jb=Uf,eb=eh,ib;if(ib=arguments.length)return jb=fi,eb=fh,3===ib&&(Ta=Da,La=wa,Da=wa=0),Xa(W);Xa.x=function(rb){return arguments.length?(jb=rb,Xa):
jb};Xa.y=function(rb){return arguments.length?(eb=rb,Xa):eb};Xa.extent=function(rb){if(!arguments.length)return null==wa?null:[[wa,Da],[La,Ta]];null==rb?wa=Da=La=Ta=null:(wa=+rb[0][0],Da=+rb[0][1],La=+rb[1][0],Ta=+rb[1][1]);return Xa};Xa.size=function(rb){if(!arguments.length)return null==wa?null:[La-wa,Ta-Da];null==rb?wa=Da=La=Ta=null:(wa=Da=0,La=+rb[0],Ta=+rb[1]);return Xa};return Xa};Zb.interpolateRgb=vh;Zb.interpolateObject=Qg;Zb.interpolateNumber=Pf;Zb.interpolateString=Xi;var dj=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,
Vk=new RegExp(dj.source,"g");Zb.interpolate=Zg;Zb.interpolators=[function(W,wa){var Da=typeof wa;return("string"===Da?Qj.has(wa.toLowerCase())||/^(#|rgb\(|hsl\()/i.test(wa)?vh:Xi:wa instanceof za?vh:Array.isArray(wa)?hi:"object"===Da&&isNaN(wa)?Qg:Pf)(W,wa)}];Zb.interpolateArray=hi;var vj=function(){return x},nl=Zb.map({linear:vj,poly:function(W){return function(wa){return Math.pow(wa,W)}},quad:function(){return ii},cubic:function(){return gh},sin:function(){return tf},exp:function(){return cf},circle:function(){return gg},
elastic:function(W,wa){2>arguments.length&&(wa=.45);if(arguments.length)var Da=wa/$f*Math.asin(1/W);else W=1,Da=wa/4;return function(La){return 1+W*Math.pow(2,-10*La)*Math.sin((La-Da)*$f/wa)}},back:function(W){W||(W=1.70158);return function(wa){return wa*wa*((W+1)*wa-W)}},bounce:function(){return Mf}}),Nk=Zb.map({"in":x,out:Rg,"in-out":zf,"out-in":function(W){return zf(Rg(W))}});Zb.ease=function(W){var wa=W.indexOf("-"),Da=0<=wa?W.slice(0,wa):W;wa=0<=wa?W.slice(wa+1):"in";Da=nl.get(Da)||vj;wa=Nk.get(wa)||
x;return wi(wa(Da.apply(null,Zh.call(arguments,1))))};Zb.interpolateHcl=function(W,wa){W=Zb.hcl(W);wa=Zb.hcl(wa);var Da=W.h,La=W.c,Ta=W.l,Xa=wa.h-Da,jb=wa.c-La,eb=wa.l-Ta;isNaN(jb)&&(jb=0,La=isNaN(La)?wa.c:La);isNaN(Xa)?(Xa=0,Da=isNaN(Da)?wa.h:Da):180<Xa?Xa-=360:-180>Xa&&(Xa+=360);return function(ib){return Ia(Da+Xa*ib,La+jb*ib,Ta+eb*ib)+""}};Zb.interpolateHsl=function(W,wa){W=Zb.hsl(W);wa=Zb.hsl(wa);var Da=W.h,La=W.s,Ta=W.l,Xa=wa.h-Da,jb=wa.s-La,eb=wa.l-Ta;isNaN(jb)&&(jb=0,La=isNaN(La)?wa.s:La);
isNaN(Xa)?(Xa=0,Da=isNaN(Da)?wa.h:Da):180<Xa?Xa-=360:-180>Xa&&(Xa+=360);return function(ib){return Ma(Da+Xa*ib,La+jb*ib,Ta+eb*ib)+""}};Zb.interpolateLab=function(W,wa){W=Zb.lab(W);wa=Zb.lab(wa);var Da=W.l,La=W.a,Ta=W.b,Xa=wa.l-Da,jb=wa.a-La,eb=wa.b-Ta;return function(ib){return Fa(Da+Xa*ib,La+jb*ib,Ta+eb*ib)+""}};Zb.interpolateRound=ji;Zb.transform=function(W){var wa=yg.createElementNS(Zb.ns.prefix.svg,"g");return(Zb.transform=function(Da){if(null!=Da){wa.setAttribute("transform",Da);var La=wa.transform.baseVal.consolidate()}return new Zi(La?
La.matrix:Sk)})(W)};Zi.prototype.toString=function(){return"translate("+this.translate+")rotate("+this.rotate+")skewX("+this.skew+")scale("+this.scale+")"};var Sk={a:1,b:0,c:0,d:1,e:0,f:0};Zb.interpolateTransform=Sf;Zb.layout={};Zb.layout.bundle=function(){return function(W){for(var wa=[],Da=-1,La=W.length;++Da<La;)wa.push(Rh(W[Da]));return wa}};Zb.layout.chord=function(){function W(){var Gb={},Qb=[],Wb=Zb.range(jb),gc=[],mc,rc;La=[];Ta=[];var yc=0;for(mc=-1;++mc<jb;){var Lc=0;for(rc=-1;++rc<jb;)Lc+=
Xa[mc][rc];Qb.push(Lc);gc.push(Zb.range(jb));yc+=Lc}ib&&Wb.sort(function(od,md){return ib(Qb[od],Qb[md])});rb&&gc.forEach(function(od,md){od.sort(function(qd,ed){return rb(Xa[md][qd],Xa[md][ed])})});yc=($f-eb*jb)/yc;Lc=0;for(mc=-1;++mc<jb;){var Tc=Lc;for(rc=-1;++rc<jb;){var Sc=Wb[mc],jd=gc[Sc][rc],hc=Xa[Sc][jd],wc=Lc,Mc=Lc+=hc*yc;Gb[Sc+"-"+jd]={index:Sc,subindex:jd,startAngle:wc,endAngle:Mc,value:hc}}Ta[Sc]={index:Sc,startAngle:Tc,endAngle:Lc,value:Qb[Sc]};Lc+=eb}for(mc=-1;++mc<jb;)for(rc=mc-1;++rc<
jb;)Wb=Gb[mc+"-"+rc],gc=Gb[rc+"-"+mc],(Wb.value||gc.value)&&La.push(Wb.value<gc.value?{source:gc,target:Wb}:{source:Wb,target:gc});yb&&wa()}function wa(){La.sort(function(Gb,Qb){return yb((Gb.source.value+Gb.target.value)/2,(Qb.source.value+Qb.target.value)/2)})}var Da={},La,Ta,Xa,jb,eb=0,ib,rb,yb;Da.matrix=function(Gb){if(!arguments.length)return Xa;jb=(Xa=Gb)&&Xa.length;La=Ta=null;return Da};Da.padding=function(Gb){if(!arguments.length)return eb;eb=Gb;La=Ta=null;return Da};Da.sortGroups=function(Gb){if(!arguments.length)return ib;
ib=Gb;La=Ta=null;return Da};Da.sortSubgroups=function(Gb){if(!arguments.length)return rb;rb=Gb;La=null;return Da};Da.sortChords=function(Gb){if(!arguments.length)return yb;yb=Gb;La&&wa();return Da};Da.chords=function(){La||W();return La};Da.groups=function(){Ta||W();return Ta};return Da};Zb.layout.force=function(){function W(Sc){return function(jd,hc,wc,Mc){if(jd.point!==Sc){wc=jd.cx-Sc.x;var od=jd.cy-Sc.y;hc=Mc-hc;Mc=wc*wc+od*od;if(hc*hc/gc<Mc)return Mc<Qb&&(hc=jd.charge/Mc,Sc.px-=wc*hc,Sc.py-=od*
hc),!0;jd.point&&Mc&&Mc<Qb&&(hc=jd.pointCharge/Mc,Sc.px-=wc*hc,Sc.py-=od*hc)}return!jd.charge}}function wa(Sc){Sc.px=Zb.event.x;Sc.py=Zb.event.y;Da.resume()}var Da={},La=Zb.dispatch("start","tick","end"),Ta,Xa=[1,1],jb,eb,ib=.9,rb=Tj,yb=Si,Gb=-30,Qb=Og,Wb=.1,gc=.64,mc=[],rc=[],yc,Lc,Tc;Da.tick=function(){if(.005>(eb*=.99))return Ta=null,La.end({type:"end",alpha:eb=0}),!0;var Sc=mc.length,jd=rc.length,hc,wc;for(hc=0;hc<jd;++hc){var Mc=rc[hc];var od=Mc.source;var md=Mc.target;var qd=md.x-od.x;var ed=
md.y-od.y;if(wc=qd*qd+ed*ed)wc=eb*Lc[hc]*((wc=Math.sqrt(wc))-yc[hc])/wc,qd*=wc,ed*=wc,md.x-=qd*(wc=od.weight+md.weight?od.weight/(od.weight+md.weight):.5),md.y-=ed*wc,od.x+=qd*(wc=1-wc),od.y+=ed*wc}if(wc=eb*Wb)if(qd=Xa[0]/2,ed=Xa[1]/2,hc=-1,wc)for(;++hc<Sc;)Mc=mc[hc],Mc.x+=(qd-Mc.x)*wc,Mc.y+=(ed-Mc.y)*wc;if(Gb)for(dd(jd=Zb.geom.quadtree(mc),eb,Tc),hc=-1;++hc<Sc;)(Mc=mc[hc]).fixed||jd.visit(W(Mc));for(hc=-1;++hc<Sc;)Mc=mc[hc],Mc.fixed?(Mc.x=Mc.px,Mc.y=Mc.py):(Mc.x-=(Mc.px-(Mc.px=Mc.x))*ib,Mc.y-=(Mc.py-
(Mc.py=Mc.y))*ib);La.tick({type:"tick",alpha:eb})};Da.nodes=function(Sc){if(!arguments.length)return mc;mc=Sc;return Da};Da.links=function(Sc){if(!arguments.length)return rc;rc=Sc;return Da};Da.size=function(Sc){if(!arguments.length)return Xa;Xa=Sc;return Da};Da.linkDistance=function(Sc){if(!arguments.length)return rb;rb="function"===typeof Sc?Sc:+Sc;return Da};Da.distance=Da.linkDistance;Da.linkStrength=function(Sc){if(!arguments.length)return yb;yb="function"===typeof Sc?Sc:+Sc;return Da};Da.friction=
function(Sc){if(!arguments.length)return ib;ib=+Sc;return Da};Da.charge=function(Sc){if(!arguments.length)return Gb;Gb="function"===typeof Sc?Sc:+Sc;return Da};Da.chargeDistance=function(Sc){if(!arguments.length)return Math.sqrt(Qb);Qb=Sc*Sc;return Da};Da.gravity=function(Sc){if(!arguments.length)return Wb;Wb=+Sc;return Da};Da.theta=function(Sc){if(!arguments.length)return Math.sqrt(gc);gc=Sc*Sc;return Da};Da.alpha=function(Sc){if(!arguments.length)return eb;Sc=+Sc;eb?0<Sc?eb=Sc:(Ta.c=null,Ta.t=NaN,
Ta=null,La.end({type:"end",alpha:eb=0})):0<Sc&&(La.start({type:"start",alpha:eb=Sc}),Ta=Qa(Da.tick));return Da};Da.start=function(){function Sc(ed,Wd){if(!md){md=Array(hc);for(Ke=0;Ke<hc;++Ke)md[Ke]=[];for(Ke=0;Ke<wc;++Ke){var we=rc[Ke];md[we.source.index].push(we.target);md[we.target.index].push(we.source)}}we=md[jd];for(var Ke=-1,Te=we.length,Se;++Ke<Te;)if(!isNaN(Se=we[Ke][ed]))return Se;return Math.random()*Wd}var jd,hc=mc.length,wc=rc.length,Mc=Xa[0],od=Xa[1],md,qd;for(jd=0;jd<hc;++jd)(qd=mc[jd]).index=
jd,qd.weight=0;for(jd=0;jd<wc;++jd)qd=rc[jd],"number"==typeof qd.source&&(qd.source=mc[qd.source]),"number"==typeof qd.target&&(qd.target=mc[qd.target]),++qd.source.weight,++qd.target.weight;for(jd=0;jd<hc;++jd)qd=mc[jd],isNaN(qd.x)&&(qd.x=Sc("x",Mc)),isNaN(qd.y)&&(qd.y=Sc("y",od)),isNaN(qd.px)&&(qd.px=qd.x),isNaN(qd.py)&&(qd.py=qd.y);yc=[];if("function"===typeof rb)for(jd=0;jd<wc;++jd)yc[jd]=+rb.call(this,rc[jd],jd);else for(jd=0;jd<wc;++jd)yc[jd]=rb;Lc=[];if("function"===typeof yb)for(jd=0;jd<wc;++jd)Lc[jd]=
+yb.call(this,rc[jd],jd);else for(jd=0;jd<wc;++jd)Lc[jd]=yb;Tc=[];if("function"===typeof Gb)for(jd=0;jd<hc;++jd)Tc[jd]=+Gb.call(this,mc[jd],jd);else for(jd=0;jd<hc;++jd)Tc[jd]=Gb;return Da.resume()};Da.resume=function(){return Da.alpha(.1)};Da.stop=function(){return Da.alpha(0)};Da.drag=function(){jb||(jb=Zb.behavior.drag().origin(x).on("dragstart.force",Bb).on("drag.force",wa).on("dragend.force",Pb));if(!arguments.length)return jb;this.on("mouseover.force",bc).on("mouseout.force",pc).call(jb)};return Zb.rebind(Da,
La,"on")};var Tj=20,Si=1,Og=Infinity;Zb.layout.hierarchy=function(){function W(Ta){var Xa=[Ta],jb=[],eb;for(Ta.depth=0;null!=(eb=Xa.pop());)if(jb.push(eb),(rb=Da.call(W,eb,eb.depth))&&(ib=rb.length)){for(var ib,rb,yb;0<=--ib;)Xa.push(yb=rb[ib]),yb.parent=eb,yb.depth=eb.depth+1;La&&(eb.value=0);eb.children=rb}else La&&(eb.value=+La.call(W,eb,eb.depth)||0),delete eb.children;fd(Ta,function(Gb){var Qb,Wb;wa&&(Qb=Gb.children)&&Qb.sort(wa);La&&(Wb=Gb.parent)&&(Wb.value+=Gb.value)});return jb}var wa=yd,
Da=rd,La=Id;W.sort=function(Ta){if(!arguments.length)return wa;wa=Ta;return W};W.children=function(Ta){if(!arguments.length)return Da;Da=Ta;return W};W.value=function(Ta){if(!arguments.length)return La;La=Ta;return W};W.revalue=function(Ta){La&&(Xc(Ta,function(Xa){Xa.children&&(Xa.value=0)}),fd(Ta,function(Xa){var jb;Xa.children||(Xa.value=+La.call(W,Xa,Xa.depth)||0);if(jb=Xa.parent)jb.value+=Xa.value}));return Ta};return W};Zb.layout.partition=function(){function W(Xa,jb,eb,ib){var rb=Xa.children;
Xa.x=jb;Xa.y=Xa.depth*ib;Xa.dx=eb;Xa.dy=ib;if(rb&&(Gb=rb.length)){var yb=-1,Gb,Qb;for(eb=Xa.value?eb/Xa.value:0;++yb<Gb;)W(Qb=rb[yb],jb,Xa=Qb.value*eb,ib),jb+=Xa}}function wa(Xa){Xa=Xa.children;var jb=0;if(Xa&&(ib=Xa.length))for(var eb=-1,ib;++eb<ib;)jb=Math.max(jb,wa(Xa[eb]));return 1+jb}function Da(Xa,jb){Xa=La.call(this,Xa,jb);W(Xa[0],0,Ta[0],Ta[1]/wa(Xa[0]));return Xa}var La=Zb.layout.hierarchy(),Ta=[1,1];Da.size=function(Xa){if(!arguments.length)return Ta;Ta=Xa;return Da};return id(Da,La)};Zb.layout.pie=
function(){function W(jb){var eb=jb.length,ib=jb.map(function(yc,Lc){return+wa.call(W,yc,Lc)}),rb=+("function"===typeof La?La.apply(this,arguments):La),yb=("function"===typeof Ta?Ta.apply(this,arguments):Ta)-rb,Gb=Math.min(Math.abs(yb)/eb,+("function"===typeof Xa?Xa.apply(this,arguments):Xa)),Qb=Gb*(0>yb?-1:1),Wb=Zb.sum(ib),gc=Wb?(yb-eb*Qb)/Wb:0;eb=Zb.range(eb);var mc=[],rc;null!=Da&&eb.sort(Da===bh?function(yc,Lc){return ib[Lc]-ib[yc]}:function(yc,Lc){return Da(jb[yc],jb[Lc])});eb.forEach(function(yc){mc[yc]=
{data:jb[yc],value:rc=ib[yc],startAngle:rb,endAngle:rb+=rc*gc+Qb,padAngle:Gb}});return mc}var wa=Number,Da=bh,La=0,Ta=$f,Xa=0;W.value=function(jb){if(!arguments.length)return wa;wa=jb;return W};W.sort=function(jb){if(!arguments.length)return Da;Da=jb;return W};W.startAngle=function(jb){if(!arguments.length)return La;La=jb;return W};W.endAngle=function(jb){if(!arguments.length)return Ta;Ta=jb;return W};W.padAngle=function(jb){if(!arguments.length)return Xa;Xa=jb;return W};return W};var bh={};Zb.layout.stack=
function(){function W(eb,ib){if(!(Qb=eb.length))return eb;var rb=eb.map(function(rc,yc){return wa.call(W,rc,yc)}),yb=rb.map(function(rc){return rc.map(function(yc,Lc){return[Xa.call(W,yc,Lc),jb.call(W,yc,Lc)]})}),Gb=Da.call(W,yb,ib);rb=Zb.permute(rb,Gb);yb=Zb.permute(yb,Gb);ib=La.call(W,yb,ib);Gb=rb[0].length;var Qb,Wb,gc,mc;for(gc=0;gc<Gb;++gc)for(Ta.call(W,rb[0][gc],mc=ib[gc],yb[0][gc][1]),Wb=1;Wb<Qb;++Wb)Ta.call(W,rb[Wb][gc],mc+=yb[Wb-1][gc][1],yb[Wb][gc][1]);return eb}var wa=x,Da=Ne,La=xe,Ta=
Md,Xa=Jd,jb=Rd;W.values=function(eb){if(!arguments.length)return wa;wa=eb;return W};W.order=function(eb){if(!arguments.length)return Da;Da="function"===typeof eb?eb:Dj.get(eb)||Ne;return W};W.offset=function(eb){if(!arguments.length)return La;La="function"===typeof eb?eb:Uj.get(eb)||xe;return W};W.x=function(eb){if(!arguments.length)return Xa;Xa=eb;return W};W.y=function(eb){if(!arguments.length)return jb;jb=eb;return W};W.out=function(eb){if(!arguments.length)return Ta;Ta=eb;return W};return W};
var Dj=Zb.map({"inside-out":function(W){var wa=W.length,Da=W.map(ve),La=W.map(Bd),Ta=Zb.range(wa).sort(function(yb,Gb){return Da[yb]-Da[Gb]}),Xa=0,jb=0,eb=[],ib=[];for(W=0;W<wa;++W){var rb=Ta[W];Xa<jb?(Xa+=La[rb],eb.push(rb)):(jb+=La[rb],ib.push(rb))}return ib.reverse().concat(eb)},reverse:function(W){return Zb.range(W.length).reverse()},"default":Ne}),Uj=Zb.map({silhouette:function(W){var wa=W.length,Da=W[0].length,La=[],Ta=0,Xa,jb,eb,ib=[];for(jb=0;jb<Da;++jb){for(eb=Xa=0;Xa<wa;Xa++)eb+=W[Xa][jb][1];
eb>Ta&&(Ta=eb);La.push(eb)}for(jb=0;jb<Da;++jb)ib[jb]=(Ta-La[jb])/2;return ib},wiggle:function(W){var wa=W.length,Da=W[0],La=Da.length,Ta,Xa,jb,eb,ib,rb,yb,Gb=[];Gb[0]=rb=yb=0;for(Xa=1;Xa<La;++Xa){for(jb=Ta=0;Ta<wa;++Ta)jb+=W[Ta][Xa][1];var Qb=Ta=0;for(ib=Da[Xa][0]-Da[Xa-1][0];Ta<wa;++Ta){var Wb=0;for(eb=(W[Ta][Xa][1]-W[Ta][Xa-1][1])/(2*ib);Wb<Ta;++Wb)eb+=(W[Wb][Xa][1]-W[Wb][Xa-1][1])/ib;Qb+=eb*W[Ta][Xa][1]}Gb[Xa]=rb-=jb?Qb/jb*ib:0;rb<yb&&(yb=rb)}for(Xa=0;Xa<La;++Xa)Gb[Xa]-=yb;return Gb},expand:function(W){var wa=
W.length,Da=W[0].length,La=1/wa,Ta,Xa,jb,eb=[];for(Xa=0;Xa<Da;++Xa){for(jb=Ta=0;Ta<wa;Ta++)jb+=W[Ta][Xa][1];if(jb)for(Ta=0;Ta<wa;Ta++)W[Ta][Xa][1]/=jb;else for(Ta=0;Ta<wa;Ta++)W[Ta][Xa][1]=La}for(Xa=0;Xa<Da;++Xa)eb[Xa]=0;return eb},zero:xe});Zb.layout.histogram=function(){function W(Xa,jb){var eb=[],ib=Xa.map(Da,this),rb=La.call(this,ib,jb),yb=Ta.call(this,rb,ib,jb);jb=-1;for(var Gb=ib.length,Qb=yb.length-1,Wb=wa?1:1/Gb;++jb<Qb;){var gc=eb[jb]=[];gc.dx=yb[jb+1]-(gc.x=yb[jb]);gc.y=0}if(0<Qb)for(jb=
-1;++jb<Gb;)gc=ib[jb],gc>=rb[0]&&gc<=rb[1]&&(gc=eb[Zb.bisect(yb,gc,1,Qb)-1],gc.y+=Wb,gc.push(Xa[jb]));return eb}var wa=!0,Da=Number,La=of,Ta=Zd;W.value=function(Xa){if(!arguments.length)return Da;Da=Xa;return W};W.range=function(Xa){if(!arguments.length)return La;La=fb(Xa);return W};W.bins=function(Xa){if(!arguments.length)return Ta;Ta="number"===typeof Xa?function(jb){return kf(jb,Xa)}:fb(Xa);return W};W.frequency=function(Xa){if(!arguments.length)return wa;wa=!!Xa;return W};return W};Zb.layout.pack=
function(){function W(Xa,jb){Xa=wa.call(this,Xa,jb);jb=Xa[0];var eb=La[0],ib=La[1],rb=null==Ta?Math.sqrt:"function"===typeof Ta?Ta:function(){return Ta};jb.x=jb.y=0;fd(jb,function(Gb){Gb.r=+rb(Gb.value)});fd(jb,mg);if(Da){var yb=Da*(Ta?1:Math.max(2*jb.r/eb,2*jb.r/ib))/2;fd(jb,function(Gb){Gb.r+=yb});fd(jb,mg);fd(jb,function(Gb){Gb.r-=yb})}ee(jb,eb/2,ib/2,Ta?1:1/Math.max(2*jb.r/eb,2*jb.r/ib));return Xa}var wa=Zb.layout.hierarchy().sort(qf),Da=0,La=[1,1],Ta;W.size=function(Xa){if(!arguments.length)return La;
La=Xa;return W};W.radius=function(Xa){if(!arguments.length)return Ta;Ta=null==Xa||"function"===typeof Xa?Xa:+Xa;return W};W.padding=function(Xa){if(!arguments.length)return Da;Da=+Xa;return W};return id(W,wa)};Zb.layout.tree=function(){function W(rb,yb){rb=Xa.call(this,rb,yb);yb=rb[0];var Gb=wa(yb);fd(Gb,Da);Gb.parent.m=-Gb.z;Xc(Gb,La);if(ib)Xc(yb,Ta);else{var Qb=yb,Wb=yb,gc=yb;Xc(yb,function(Lc){Lc.x<Qb.x&&(Qb=Lc);Lc.x>Wb.x&&(Wb=Lc);Lc.depth>gc.depth&&(gc=Lc)});var mc=jb(Qb,Wb)/2-Qb.x,rc=eb[0]/(Wb.x+
jb(Wb,Qb)/2+mc),yc=eb[1]/(gc.depth||1);Xc(yb,function(Lc){Lc.x=(Lc.x+mc)*rc;Lc.y=Lc.depth*yc})}return rb}function wa(rb){rb={A:null,children:[rb]};for(var yb=[rb],Gb;null!=(Gb=yb.pop());)for(var Qb=Gb.children,Wb,gc=0,mc=Qb.length;gc<mc;++gc)yb.push((Qb[gc]=Wb={_:Qb[gc],parent:Gb,children:(Wb=Qb[gc].children)&&Wb.slice()||[],A:null,a:null,z:0,m:0,c:0,s:0,t:null,i:gc}).a=Wb);return rb.children[0]}function Da(rb){var yb=rb.children,Gb=rb.parent.children,Qb=rb.i?Gb[rb.i-1]:null;if(yb.length){for(var Wb=
0,gc=0,mc=rb.children,rc=mc.length,yc;0<=--rc;)yc=mc[rc],yc.z+=Wb,yc.m+=Wb,Wb+=yc.s+(gc+=yc.c);yb=(yb[0].z+yb[yb.length-1].z)/2;Qb?(rb.z=Qb.z+jb(rb._,Qb._),rb.m=rb.z-yb):rb.z=yb}else Qb&&(rb.z=Qb.z+jb(rb._,Qb._));yb=rb.parent;Gb=rb.parent.A||Gb[0];if(Qb){gc=Wb=rb;mc=Wb.parent.children[0];rc=Wb.m;yc=gc.m;for(var Lc=Qb.m,Tc=mc.m,Sc;Qb=yh(Qb),Wb=Yf(Wb),Qb&&Wb;){mc=Yf(mc);gc=yh(gc);gc.a=rb;Sc=Qb.z+Lc-Wb.z-rc+jb(Qb._,Wb._);if(0<Sc){var jd=Qb.a.parent===rb.parent?Qb.a:Gb,hc=rb,wc=Sc,Mc=wc/(hc.i-jd.i);hc.c-=
Mc;hc.s+=wc;jd.c+=Mc;hc.z+=wc;hc.m+=wc;rc+=Sc;yc+=Sc}Lc+=Qb.m;rc+=Wb.m;Tc+=mc.m;yc+=gc.m}Qb&&!yh(gc)&&(gc.t=Qb,gc.m+=Lc-yc);Wb&&!Yf(mc)&&(mc.t=Wb,mc.m+=rc-Tc,Gb=rb)}yb.A=Gb}function La(rb){rb._.x=rb.z+rb.parent.m;rb.m+=rb.parent.m}function Ta(rb){rb.x*=eb[0];rb.y=rb.depth*eb[1]}var Xa=Zb.layout.hierarchy().sort(null).value(null),jb=ng,eb=[1,1],ib=null;W.separation=function(rb){if(!arguments.length)return jb;jb=rb;return W};W.size=function(rb){if(!arguments.length)return ib?null:eb;ib=null==(eb=rb)?
Ta:null;return W};W.nodeSize=function(rb){if(!arguments.length)return ib?eb:null;ib=null==(eb=rb)?null:Ta;return W};return id(W,Xa)};Zb.layout.cluster=function(){function W(Xa,jb){Xa=wa.call(this,Xa,jb);var eb=Xa[0],ib,rb=0;fd(eb,function(Wb){var gc=Wb.children;gc&&gc.length?(Wb.x=aj(gc),Wb.y=Tg(gc)):(Wb.x=ib?rb+=Da(Wb,ib):0,Wb.y=0,ib=Wb)});jb=Jk(eb);var yb=Th(eb),Gb=jb.x-Da(jb,yb)/2,Qb=yb.x+Da(yb,jb)/2;fd(eb,Ta?function(Wb){Wb.x=(Wb.x-eb.x)*La[0];Wb.y=(eb.y-Wb.y)*La[1]}:function(Wb){Wb.x=(Wb.x-Gb)/
(Qb-Gb)*La[0];Wb.y=(1-(eb.y?Wb.y/eb.y:1))*La[1]});return Xa}var wa=Zb.layout.hierarchy().sort(null).value(null),Da=ng,La=[1,1],Ta=!1;W.separation=function(Xa){if(!arguments.length)return Da;Da=Xa;return W};W.size=function(Xa){if(!arguments.length)return Ta?null:La;Ta=null==(La=Xa);return W};W.nodeSize=function(Xa){if(!arguments.length)return Ta?La:null;Ta=null!=(La=Xa);return W};return id(W,wa)};Zb.layout.treemap=function(){function W(gc,mc){for(var rc=-1,yc=gc.length,Lc,Tc;++rc<yc;)Tc=(Lc=gc[rc]).value*
(0>mc?0:mc),Lc.area=isNaN(Tc)||0>=Tc?0:Tc}function wa(gc){var mc=gc.children;if(mc&&mc.length){var rc=rb(gc),yc=[],Lc=mc.slice(),Tc=Infinity,Sc,jd="slice"===Qb?rc.dx:"dice"===Qb?rc.dy:"slice-dice"===Qb?gc.depth&1?rc.dy:rc.dx:Math.min(rc.dx,rc.dy);W(Lc,rc.dx*rc.dy/gc.value);for(yc.area=0;0<(gc=Lc.length);){yc.push(gc=Lc[gc-1]);yc.area+=gc.area;if(!(gc="squarify"!==Qb)){gc=jd;for(var hc=yc.area,wc=0,Mc=Infinity,od=-1,md=yc.length;++od<md;)if(Sc=yc[od].area)Sc<Mc&&(Mc=Sc),Sc>wc&&(wc=Sc);hc*=hc;gc*=gc;
gc=(Sc=hc?Math.max(gc*wc*Wb/hc,hc/(gc*Mc*Wb)):Infinity)<=Tc}gc?(Lc.pop(),Tc=Sc):(yc.area-=yc.pop().area,La(yc,jd,rc,!1),jd=Math.min(rc.dx,rc.dy),yc.length=yc.area=0,Tc=Infinity)}yc.length&&(La(yc,jd,rc,!0),yc.length=yc.area=0);mc.forEach(wa)}}function Da(gc){var mc=gc.children;if(mc&&mc.length){var rc=rb(gc),yc=mc.slice(),Lc=[];W(yc,rc.dx*rc.dy/gc.value);for(Lc.area=0;gc=yc.pop();)Lc.push(gc),Lc.area+=gc.area,null!=gc.z&&(La(Lc,gc.z?rc.dx:rc.dy,rc,!yc.length),Lc.length=Lc.area=0);mc.forEach(Da)}}
function La(gc,mc,rc,yc){var Lc=-1,Tc=gc.length,Sc=rc.x,jd=rc.y,hc=mc?jb(gc.area/mc):0;if(mc==rc.dx){if(yc||hc>rc.dy)hc=rc.dy;for(;++Lc<Tc;){var wc=gc[Lc];wc.x=Sc;wc.y=jd;wc.dy=hc;Sc+=wc.dx=Math.min(rc.x+rc.dx-Sc,hc?jb(wc.area/hc):0)}wc.z=!0;wc.dx+=rc.x+rc.dx-Sc;rc.y+=hc;rc.dy-=hc}else{if(yc||hc>rc.dx)hc=rc.dx;for(;++Lc<Tc;)wc=gc[Lc],wc.x=Sc,wc.y=jd,wc.dx=hc,jd+=wc.dy=Math.min(rc.y+rc.dy-jd,hc?jb(wc.area/hc):0);wc.z=!1;wc.dy+=rc.y+rc.dy-jd;rc.x+=hc;rc.dx-=hc}}function Ta(gc){gc=Gb||Xa(gc);var mc=
gc[0];mc.x=mc.y=0;mc.value?(mc.dx=eb[0],mc.dy=eb[1]):mc.dx=mc.dy=0;Gb&&Xa.revalue(mc);W([mc],mc.dx*mc.dy/mc.value);(Gb?Da:wa)(mc);yb&&(Gb=gc);return gc}var Xa=Zb.layout.hierarchy(),jb=Math.round,eb=[1,1],ib=null,rb=Vf,yb=!1,Gb,Qb="squarify",Wb=.5*(1+Math.sqrt(5));Ta.size=function(gc){if(!arguments.length)return eb;eb=gc;return Ta};Ta.padding=function(gc){function mc(Lc){var Tc=gc.call(Ta,Lc,Lc.depth);return null==Tc?Vf(Lc):Yi(Lc,"number"===typeof Tc?[Tc,Tc,Tc,Tc]:Tc)}function rc(Lc){return Yi(Lc,
gc)}if(!arguments.length)return ib;var yc;rb=null==(ib=gc)?Vf:"function"===(yc=typeof gc)?mc:"number"===yc?(gc=[gc,gc,gc,gc],rc):rc;return Ta};Ta.round=function(gc){if(!arguments.length)return jb!=Number;jb=gc?Math.round:Number;return Ta};Ta.sticky=function(gc){if(!arguments.length)return yb;yb=gc;Gb=null;return Ta};Ta.ratio=function(gc){if(!arguments.length)return Wb;Wb=gc;return Ta};Ta.mode=function(gc){if(!arguments.length)return Qb;Qb=gc+"";return Ta};return id(Ta,Xa)};Zb.random={normal:function(W,
wa){var Da=arguments.length;2>Da&&(wa=1);1>Da&&(W=0);return function(){do{var La=2*Math.random()-1;var Ta=2*Math.random()-1;Ta=La*La+Ta*Ta}while(!Ta||1<Ta);return W+wa*La*Math.sqrt(-2*Math.log(Ta)/Ta)}},logNormal:function(){var W=Zb.random.normal.apply(Zb,arguments);return function(){return Math.exp(W())}},bates:function(W){var wa=Zb.random.irwinHall(W);return function(){return wa()/W}},irwinHall:function(W){return function(){for(var wa=0,Da=0;Da<W;Da++)wa+=Math.random();return wa}}};Zb.scale={};
var Hi={floor:x,ceil:x};Zb.scale.linear=function(){return Db([0,1],[0,1],Zg,!1)};var ph={s:1,g:1,p:1,r:1,e:1};Zb.scale.log=function(){return hb(Zb.scale.linear().domain([0,1]),10,!0,[1,10])};var Kg=Zb.format(".0e"),Ch={floor:function(W){return-Math.ceil(-W)},ceil:function(W){return-Math.floor(-W)}};Zb.scale.pow=function(){return ub(Zb.scale.linear(),1,[0,1])};Zb.scale.sqrt=function(){return Zb.scale.pow().exponent(.5)};Zb.scale.ordinal=function(){return Yb([],{t:"range",a:[[]]})};Zb.scale.category10=
function(){return Zb.scale.ordinal().range(Jh)};Zb.scale.category20=function(){return Zb.scale.ordinal().range(ch)};Zb.scale.category20b=function(){return Zb.scale.ordinal().range(Ti)};Zb.scale.category20c=function(){return Zb.scale.ordinal().range(qi)};var Jh=[2062260,16744206,2924588,14034728,9725885,9197131,14907330,8355711,12369186,1556175].map(Ua),ch=[2062260,11454440,16744206,16759672,2924588,10018698,14034728,16750742,9725885,12955861,9197131,12885140,14907330,16234194,8355711,13092807,12369186,
14408589,1556175,10410725].map(Ua),Ti=[3750777,5395619,7040719,10264286,6519097,9216594,11915115,13556636,9202993,12426809,15186514,15190932,8666169,11356490,14049643,15177372,8077683,10834324,13528509,14589654].map(Ua),qi=[3244733,7057110,10406625,13032431,15095053,16616764,16625259,16634018,3253076,7652470,10607003,13101504,7695281,10394312,12369372,14342891,6513507,9868950,12434877,14277081].map(Ua);Zb.scale.quantile=function(){return dc([],[])};Zb.scale.quantize=function(){return Ac(0,1,[0,1])};
Zb.scale.threshold=function(){return Ec([.5],[0,1])};Zb.scale.identity=function(){return uc([0,1])};Zb.svg={};Zb.svg.arc=function(){function W(){var rb=Math.max(0,+Da.apply(this,arguments)),yb=Math.max(0,+La.apply(this,arguments)),Gb=jb.apply(this,arguments)-Kf,Qb=eb.apply(this,arguments)-Kf,Wb=Math.abs(Qb-Gb),gc=Gb>Qb?0:1;if(yb<rb){var mc=yb;yb=rb;rb=mc}if(Wb>=ik)return wa(yb,gc)+(rb?wa(rb,1-gc):"")+"Z";var rc,yc=0,Lc=0,Tc=[];if(rc=(+ib.apply(this,arguments)||0)/2){var Sc=Xa===mk?Math.sqrt(rb*rb+
yb*yb):+Xa.apply(this,arguments);gc||(Lc*=-1);yb&&(Lc=ua(Sc/yb*Math.sin(rc)));rb&&(yc=ua(Sc/rb*Math.sin(rc)))}if(yb){Sc=yb*Math.cos(Gb+Lc);rc=yb*Math.sin(Gb+Lc);var jd=yb*Math.cos(Qb-Lc);var hc=yb*Math.sin(Qb-Lc);var wc=Math.abs(Qb-Gb-2*Lc)<=Ce?0:1;Lc&&vd(Sc,rc,jd,hc)===gc^wc&&(jd=(Gb+Qb)/2,Sc=yb*Math.cos(jd),rc=yb*Math.sin(jd),jd=hc=null)}else Sc=rc=0;if(rb){Lc=rb*Math.cos(Qb-yc);var Mc=rb*Math.sin(Qb-yc);var od=rb*Math.cos(Gb+yc);var md=rb*Math.sin(Gb+yc);var qd=Math.abs(Gb-Qb+2*yc)<=Ce?0:1;yc&&
vd(Lc,Mc,od,md)===1-gc^qd&&(od=(Gb+Qb)/2,Lc=rb*Math.cos(od),Mc=rb*Math.sin(od),od=md=null)}else Lc=Mc=0;1E-6<Wb&&.001<(mc=Math.min(Math.abs(yb-rb)/2,+Ta.apply(this,arguments)))?(wc=rb<yb^gc?0:1,qd=Gb=mc,Wb<Ce&&(Wb=null==od?[Lc,Mc]:null==jd?[Sc,rc]:di([Sc,rc],[od,md],[jd,hc],[Lc,Mc]),qd=Sc-Wb[0],Gb=rc-Wb[1],Qb=jd-Wb[0],yc=hc-Wb[1],Gb=1/Math.sin(Math.acos((qd*Qb+Gb*yc)/(Math.sqrt(qd*qd+Gb*Gb)*Math.sqrt(Qb*Qb+yc*yc)))/2),Wb=Math.sqrt(Wb[0]*Wb[0]+Wb[1]*Wb[1]),qd=Math.min(mc,(rb-Wb)/(Gb-1)),Gb=Math.min(mc,
(yb-Wb)/(Gb+1))),null!=jd?(Wb=Ad(null==od?[Lc,Mc]:[od,md],[Sc,rc],yb,Gb,gc),Qb=Ad([jd,hc],[Lc,Mc],yb,Gb,gc),mc===Gb?Tc.push("M",Wb[0],"A",Gb,",",Gb," 0 0,",wc," ",Wb[1],"A",yb,",",yb," 0 ",1-gc^vd(Wb[1][0],Wb[1][1],Qb[1][0],Qb[1][1]),",",gc," ",Qb[1],"A",Gb,",",Gb," 0 0,",wc," ",Qb[0]):Tc.push("M",Wb[0],"A",Gb,",",Gb," 0 1,",wc," ",Qb[0])):Tc.push("M",Sc,",",rc),null!=od?(yb=Ad([Sc,rc],[od,md],rb,-qd,gc),jd=Ad([Lc,Mc],null==jd?[Sc,rc]:[jd,hc],rb,-qd,gc),mc===qd?Tc.push("L",jd[0],"A",qd,",",qd," 0 0,",
wc," ",jd[1],"A",rb,",",rb," 0 ",gc^vd(jd[1][0],jd[1][1],yb[1][0],yb[1][1]),",",1-gc," ",yb[1],"A",qd,",",qd," 0 0,",wc," ",yb[0]):Tc.push("L",jd[0],"A",qd,",",qd," 0 0,",wc," ",yb[0])):Tc.push("L",Lc,",",Mc)):(Tc.push("M",Sc,",",rc),null!=jd&&Tc.push("A",yb,",",yb," 0 ",wc,",",gc," ",jd,",",hc),Tc.push("L",Lc,",",Mc),null!=od&&Tc.push("A",rb,",",rb," 0 ",qd,",",1-gc," ",od,",",md));Tc.push("Z");return Tc.join("")}function wa(rb,yb){return"M0,"+rb+"A"+rb+","+rb+" 0 1,"+yb+" 0,"+-rb+"A"+rb+","+rb+
" 0 1,"+yb+" 0,"+rb}var Da=fc,La=Cc,Ta=Xb,Xa=mk,jb=bd,eb=nd,ib=Nc;W.innerRadius=function(rb){if(!arguments.length)return Da;Da=fb(rb);return W};W.outerRadius=function(rb){if(!arguments.length)return La;La=fb(rb);return W};W.cornerRadius=function(rb){if(!arguments.length)return Ta;Ta=fb(rb);return W};W.padRadius=function(rb){if(!arguments.length)return Xa;Xa=rb==mk?mk:fb(rb);return W};W.startAngle=function(rb){if(!arguments.length)return jb;jb=fb(rb);return W};W.endAngle=function(rb){if(!arguments.length)return eb;
eb=fb(rb);return W};W.padAngle=function(rb){if(!arguments.length)return ib;ib=fb(rb);return W};W.centroid=function(){var rb=(+Da.apply(this,arguments)+ +La.apply(this,arguments))/2,yb=(+jb.apply(this,arguments)+ +eb.apply(this,arguments))/2-Kf;return[Math.cos(yb)*rb,Math.sin(yb)*rb]};return W};var mk="auto";Zb.svg.line=function(){return le(x)};var Dk=Zb.map({linear:Ud,"linear-closed":Sd,step:function(W){for(var wa=0,Da=W.length,La=W[0],Ta=[La[0],",",La[1]];++wa<Da;)Ta.push("H",(La[0]+(La=W[wa])[0])/
2,"V",La[1]);1<Da&&Ta.push("H",La[0]);return Ta.join("")},"step-before":fe,"step-after":ue,basis:lf,"basis-open":function(W){if(4>W.length)return Ud(W);for(var wa=[],Da=-1,La=W.length,Ta,Xa=[0],jb=[0];3>++Da;)Ta=W[Da],Xa.push(Ta[0]),jb.push(Ta[1]);wa.push(he(nj,Xa)+","+he(nj,jb));for(--Da;++Da<La;)Ta=W[Da],Xa.shift(),Xa.push(Ta[0]),jb.shift(),jb.push(Ta[1]),ef(wa,Xa,jb);return wa.join("")},"basis-closed":function(W){for(var wa,Da=-1,La=W.length,Ta=La+4,Xa,jb=[],eb=[];4>++Da;)Xa=W[Da%La],jb.push(Xa[0]),
eb.push(Xa[1]);wa=[he(nj,jb),",",he(nj,eb)];for(--Da;++Da<Ta;)Xa=W[Da%La],jb.shift(),jb.push(Xa[0]),eb.shift(),eb.push(Xa[1]),ef(wa,jb,eb);return wa.join("")},bundle:function(W,wa){var Da=W.length-1;if(Da)for(var La=W[0][0],Ta=W[0][1],Xa=W[Da][0]-La,jb=W[Da][1]-Ta,eb=-1,ib,rb;++eb<=Da;)ib=W[eb],rb=eb/Da,ib[0]=wa*ib[0]+(1-wa)*(La+rb*Xa),ib[1]=wa*ib[1]+(1-wa)*(Ta+rb*jb);return lf(W)},cardinal:function(W,wa){return 3>W.length?Ud(W):W[0]+Ee(W,Re(W,wa))},"cardinal-open":function(W,wa){return 4>W.length?
Ud(W):W[1]+Ee(W.slice(1,-1),Re(W,wa))},"cardinal-closed":function(W,wa){return 3>W.length?Sd(W):W[0]+Ee((W.push(W[0]),W),Re([W[W.length-2]].concat(W,[W[1]]),wa))},monotone:function(W){if(3>W.length)W=Ud(W);else{var wa=W[0],Da=[],La;var Ta=0;var Xa=W.length-1;var jb=[];var eb=W[1];for(La=jb[0]=mf(W[0],eb);++Ta<Xa;)jb[Ta]=(La+(La=mf(eb,eb=W[Ta+1])))/2;jb[Ta]=La;for(var ib=-1,rb=W.length-1;++ib<rb;)Ta=mf(W[ib],W[ib+1]),1E-6>Fe(Ta)?jb[ib]=jb[ib+1]=0:(Xa=jb[ib]/Ta,eb=jb[ib+1]/Ta,La=Xa*Xa+eb*eb,9<La&&(La=
3*Ta/Math.sqrt(La),jb[ib]=La*Xa,jb[ib+1]=La*eb));for(ib=-1;++ib<=rb;)La=(W[Math.min(rb,ib+1)][0]-W[Math.max(0,ib-1)][0])/(6*(1+jb[ib]*jb[ib])),Da.push([La||0,jb[ib]*La||0]);W=wa+Ee(W,Da)}return W}});Dk.forEach(function(W,wa){wa.key=W;wa.closed=/-closed$/.test(W)});var Xg=[0,2/3,1/3,0],Gk=[0,1/3,2/3,0],nj=[0,1/6,2/3,1/6];Zb.svg.line.radial=function(){var W=le(Ae);W.radius=W.x;delete W.x;W.angle=W.y;delete W.y;return W};fe.reverse=ue;ue.reverse=fe;Zb.svg.area=function(){return $e(x)};Zb.svg.area.radial=
function(){var W=$e(Ae);W.radius=W.x;delete W.x;W.innerRadius=W.x0;delete W.x0;W.outerRadius=W.x1;delete W.x1;W.angle=W.y;delete W.y;W.startAngle=W.y0;delete W.y0;W.endAngle=W.y1;delete W.y1;return W};Zb.svg.chord=function(){function W(ib,rb){var yb=wa(this,La,ib,rb);ib=wa(this,Ta,ib,rb);return"M"+yb.p0+Da(yb.r,yb.p1,yb.a1-yb.a0)+(yb.a0==ib.a0&&yb.a1==ib.a1?"Q 0,0 "+yb.p0:"Q 0,0 "+ib.p0+Da(ib.r,ib.p1,ib.a1-ib.a0)+("Q 0,0 "+yb.p0))+"Z"}function wa(ib,rb,yb,Gb){var Qb=rb.call(ib,yb,Gb);rb=Xa.call(ib,
Qb,Gb);yb=jb.call(ib,Qb,Gb)-Kf;ib=eb.call(ib,Qb,Gb)-Kf;return{r:rb,a0:yb,a1:ib,p0:[rb*Math.cos(yb),rb*Math.sin(yb)],p1:[rb*Math.cos(ib),rb*Math.sin(ib)]}}function Da(ib,rb,yb){return"A"+ib+","+ib+" 0 "+ +(yb>Ce)+",1 "+rb}var La=Od,Ta=Gd,Xa=vf,jb=bd,eb=nd;W.radius=function(ib){if(!arguments.length)return Xa;Xa=fb(ib);return W};W.source=function(ib){if(!arguments.length)return La;La=fb(ib);return W};W.target=function(ib){if(!arguments.length)return Ta;Ta=fb(ib);return W};W.startAngle=function(ib){if(!arguments.length)return jb;
jb=fb(ib);return W};W.endAngle=function(ib){if(!arguments.length)return eb;eb=fb(ib);return W};return W};Zb.svg.diagonal=function(){function W(Ta,Xa){var jb=wa.call(this,Ta,Xa);Ta=Da.call(this,Ta,Xa);Xa=(jb.y+Ta.y)/2;jb=[jb,{x:jb.x,y:Xa},{x:Ta.x,y:Xa},Ta];jb=jb.map(La);return"M"+jb[0]+"C"+jb[1]+" "+jb[2]+" "+jb[3]}var wa=Od,Da=Gd,La=nf;W.source=function(Ta){if(!arguments.length)return wa;wa=fb(Ta);return W};W.target=function(Ta){if(!arguments.length)return Da;Da=fb(Ta);return W};W.projection=function(Ta){if(!arguments.length)return La;
La=Ta;return W};return W};Zb.svg.diagonal.radial=function(){var W=Zb.svg.diagonal(),wa=nf,Da=W.projection;W.projection=function(La){return arguments.length?Da(Fh(wa=La)):wa};return W};Zb.svg.symbol=function(){function W(La,Ta){return(ri.get(wa.call(this,La,Ta))||jg)(Da.call(this,La,Ta))}var wa=Vg,Da=sg;W.type=function(La){if(!arguments.length)return wa;wa=fb(La);return W};W.size=function(La){if(!arguments.length)return Da;Da=fb(La);return W};return W};var ri=Zb.map({circle:jg,cross:function(W){W=
Math.sqrt(W/5)/2;return"M"+-3*W+","+-W+"H"+-W+"V"+-3*W+"H"+W+"V"+-W+"H"+3*W+"V"+W+"H"+W+"V"+3*W+"H"+-W+"V"+W+"H"+-3*W+"Z"},diamond:function(W){W=Math.sqrt(W/(2*Ag));var wa=W*Ag;return"M0,"+-W+"L"+wa+",0 0,"+W+" "+-wa+",0Z"},square:function(W){W=Math.sqrt(W)/2;return"M"+-W+","+-W+"L"+W+","+-W+" "+W+","+W+" "+-W+","+W+"Z"},"triangle-down":function(W){W=Math.sqrt(W/Kh);var wa=W*Kh/2;return"M0,"+wa+"L"+W+","+-wa+" "+-W+","+-wa+"Z"},"triangle-up":function(W){W=Math.sqrt(W/Kh);var wa=W*Kh/2;return"M0,"+
-wa+"L"+W+","+wa+" "+-W+","+wa+"Z"}});Zb.svg.symbolTypes=ri.keys();var Kh=Math.sqrt(3),Ag=Math.tan(30*Oe);sf.transition=function(W){var wa=bi||++nk;W=Zf(W);for(var Da=[],La,Ta,Xa=ci||{time:Date.now(),ease:wh,delay:0,duration:250},jb=-1,eb=this.length;++jb<eb;){Da.push(La=[]);for(var ib=this[jb],rb=-1,yb=ib.length;++rb<yb;)(Ta=ib[rb])&&Qe(Ta,rb,W,wa,Xa),La.push(Ta)}return wf(Da,W,wa)};sf.interrupt=function(W){return this.each(null==W?tk:Yh(Zf(W)))};var tk=Yh(Zf()),Ff=[],nk=0,bi,ci;Ff.call=sf.call;
Ff.empty=sf.empty;Ff.node=sf.node;Ff.size=sf.size;Zb.transition=function(W,wa){return W&&W.transition?bi?W.transition(wa):W:Zb.selection().transition(W)};Zb.transition.prototype=Ff;Ff.select=function(W){var wa=this.id,Da=this.namespace,La=[],Ta,Xa,jb;W=N(W);for(var eb=-1,ib=this.length;++eb<ib;){La.push(Ta=[]);for(var rb=this[eb],yb=-1,Gb=rb.length;++yb<Gb;)(jb=rb[yb])&&(Xa=W.call(jb,jb.__data__,yb,eb))?("__data__"in jb&&(Xa.__data__=jb.__data__),Qe(Xa,yb,Da,wa,jb[Da][wa]),Ta.push(Xa)):Ta.push(null)}return wf(La,
Da,wa)};Ff.selectAll=function(W){var wa=this.id,Da=this.namespace,La=[],Ta,Xa;W=M(W);for(var jb=-1,eb=this.length;++jb<eb;)for(var ib=this[jb],rb=-1,yb=ib.length;++rb<yb;)if(Ta=ib[rb]){var Gb=Ta[Da][wa];var Qb=W.call(Ta,Ta.__data__,rb,jb);La.push(Ta=[]);for(var Wb=-1,gc=Qb.length;++Wb<gc;)(Xa=Qb[Wb])&&Qe(Xa,Wb,Da,wa,Gb),Ta.push(Xa)}return wf(La,Da,wa)};Ff.filter=function(W){var wa=[],Da,La;"function"!==typeof W&&(W=X(W));for(var Ta=0,Xa=this.length;Ta<Xa;Ta++){wa.push(Da=[]);var jb=this[Ta];for(var eb=
0,ib=jb.length;eb<ib;eb++)(La=jb[eb])&&W.call(La,La.__data__,eb,Ta)&&Da.push(La)}return wf(wa,this.namespace,this.id)};Ff.tween=function(W,wa){var Da=this.id,La=this.namespace;return 2>arguments.length?this.node()[La][Da].tween.get(W):aa(this,null==wa?function(Ta){Ta[La][Da].tween.remove(W)}:function(Ta){Ta[La][Da].tween.set(W,wa)})};Ff.attr=function(W,wa){function Da(){this.removeAttribute(eb)}function La(){this.removeAttributeNS(eb.space,eb.local)}function Ta(ib){return null==ib?Da:(ib+="",function(){var rb=
this.getAttribute(eb),yb;return rb!==ib&&(yb=jb(rb,ib),function(Gb){this.setAttribute(eb,yb(Gb))})})}function Xa(ib){return null==ib?La:(ib+="",function(){var rb=this.getAttributeNS(eb.space,eb.local),yb;return rb!==ib&&(yb=jb(rb,ib),function(Gb){this.setAttributeNS(eb.space,eb.local,yb(Gb))})})}if(2>arguments.length){for(wa in W)this.attr(wa,W[wa]);return this}var jb="transform"==W?Sf:Zg,eb=Zb.ns.qualify(W);return pj(this,"attr."+W,wa,eb.local?Xa:Ta)};Ff.attrTween=function(W,wa){function Da(Xa,jb){var eb=
wa.call(this,Xa,jb,this.getAttribute(Ta));return eb&&function(ib){this.setAttribute(Ta,eb(ib))}}function La(Xa,jb){var eb=wa.call(this,Xa,jb,this.getAttributeNS(Ta.space,Ta.local));return eb&&function(ib){this.setAttributeNS(Ta.space,Ta.local,eb(ib))}}var Ta=Zb.ns.qualify(W);return this.tween("attr."+W,Ta.local?La:Da)};Ff.style=function(W,wa,Da){function La(){this.style.removeProperty(W)}var Ta=arguments.length;if(3>Ta){if("string"!==typeof W){2>Ta&&(wa="");for(Da in W)this.style(Da,W[Da],wa);return this}Da=
""}return pj(this,"style."+W,wa,function(Xa){return null==Xa?La:(Xa+="",function(){var jb=q(this).getComputedStyle(this,null).getPropertyValue(W),eb;return jb!==Xa&&(eb=Zg(jb,Xa),function(ib){this.style.setProperty(W,eb(ib),Da)})})})};Ff.styleTween=function(W,wa,Da){3>arguments.length&&(Da="");return this.tween("style."+W,function(La,Ta){var Xa=wa.call(this,La,Ta,q(this).getComputedStyle(this,null).getPropertyValue(W));return Xa&&function(jb){this.style.setProperty(W,Xa(jb),Da)}})};Ff.text=function(W){return pj(this,
"text",W,og)};Ff.remove=function(){var W=this.namespace;return this.each("end.transition",function(){var wa;2>this[W].count&&(wa=this.parentNode)&&wa.removeChild(this)})};Ff.ease=function(W){var wa=this.id,Da=this.namespace;if(1>arguments.length)return this.node()[Da][wa].ease;"function"!==typeof W&&(W=Zb.ease.apply(Zb,arguments));return aa(this,function(La){La[Da][wa].ease=W})};Ff.delay=function(W){var wa=this.id,Da=this.namespace;return 1>arguments.length?this.node()[Da][wa].delay:aa(this,"function"===
typeof W?function(La,Ta,Xa){La[Da][wa].delay=+W.call(La,La.__data__,Ta,Xa)}:(W=+W,function(La){La[Da][wa].delay=W}))};Ff.duration=function(W){var wa=this.id,Da=this.namespace;return 1>arguments.length?this.node()[Da][wa].duration:aa(this,"function"===typeof W?function(La,Ta,Xa){La[Da][wa].duration=Math.max(1,W.call(La,La.__data__,Ta,Xa))}:(W=Math.max(1,W),function(La){La[Da][wa].duration=W}))};Ff.each=function(W,wa){var Da=this.id,La=this.namespace;if(2>arguments.length){var Ta=ci,Xa=bi;try{bi=Da,
aa(this,function(jb,eb,ib){ci=jb[La][Da];W.call(jb,jb.__data__,eb,ib)})}finally{ci=Ta,bi=Xa}}else aa(this,function(jb){jb=jb[La][Da];(jb.event||(jb.event=Zb.dispatch("start","end","interrupt"))).on(W,wa)});return this};Ff.transition=function(){for(var W=this.id,wa=++nk,Da=this.namespace,La=[],Ta,Xa,jb,eb,ib=0,rb=this.length;ib<rb;ib++){La.push(Ta=[]);Xa=this[ib];for(var yb=0,Gb=Xa.length;yb<Gb;yb++){if(jb=Xa[yb])eb=jb[Da][W],Qe(jb,yb,Da,wa,{time:eb.time,ease:eb.ease,delay:eb.delay+eb.duration,duration:eb.duration});
Ta.push(jb)}}return wf(La,Da,wa)};Zb.svg.axis=function(){function W(rb){rb.each(function(){var yb=Zb.select(this),Gb=this.__chart__||wa,Qb=this.__chart__=wa.copy(),Wb=null==eb?Qb.ticks?Qb.ticks.apply(Qb,jb):Qb.domain():eb,gc=null==ib?Qb.tickFormat?Qb.tickFormat.apply(Qb,jb):x:ib,mc=yb.selectAll(".tick").data(Wb,Qb);Wb=mc.enter().insert("g",".domain").attr("class","tick").style("opacity",1E-6);var rc=Zb.transition(mc.exit()).style("opacity",1E-6).remove(),yc=Zb.transition(mc.order()).style("opacity",
1),Lc=Math.max(La,0)+Xa,Tc=Eg(Qb);yb=yb.selectAll(".domain").data([0]);yb=(yb.enter().append("path").attr("class","domain"),Zb.transition(yb));Wb.append("line");Wb.append("text");var Sc=Wb.select("line"),jd=yc.select("line");mc=mc.select("text").text(gc);var hc=Wb.select("text"),wc=yc.select("text"),Mc="top"===Da||"left"===Da?-1:1;if("bottom"===Da||"top"===Da){gc=Tf;var od="x";var md="y";var qd="x2";var ed="y2";mc.attr("dy",0>Mc?"0em":".71em").style("text-anchor","middle");yb.attr("d","M"+Tc[0]+","+
Mc*Ta+"V0H"+Tc[1]+"V"+Mc*Ta)}else gc=xg,od="y",md="x",qd="y2",ed="x2",mc.attr("dy",".32em").style("text-anchor",0>Mc?"end":"start"),yb.attr("d","M"+Mc*Ta+","+Tc[0]+"H0V"+Tc[1]+"H"+Mc*Ta);Sc.attr(ed,Mc*La);hc.attr(md,Mc*Lc);jd.attr(qd,0).attr(ed,Mc*La);wc.attr(od,0).attr(md,Mc*Lc);if(Qb.rangeBand){var Wd=Qb,we=Wd.rangeBand()/2;Gb=Qb=function(Ke){return Wd(Ke)+we}}else Gb.rangeBand?Gb=Qb:rc.call(gc,Qb,Gb);Wb.call(gc,Gb,Qb);yc.call(gc,Qb,Qb)})}var wa=Zb.scale.linear(),Da=Pg,La=6,Ta=6,Xa=3,jb=[10],eb=
null,ib;W.scale=function(rb){if(!arguments.length)return wa;wa=rb;return W};W.orient=function(rb){if(!arguments.length)return Da;Da=rb in jj?rb+"":Pg;return W};W.ticks=function(){if(!arguments.length)return jb;jb=Mg(arguments);return W};W.tickValues=function(rb){if(!arguments.length)return eb;eb=rb;return W};W.tickFormat=function(rb){if(!arguments.length)return ib;ib=rb;return W};W.tickSize=function(rb){var yb=arguments.length;if(!yb)return La;La=+rb;Ta=+arguments[yb-1];return W};W.innerTickSize=
function(rb){if(!arguments.length)return La;La=+rb;return W};W.outerTickSize=function(rb){if(!arguments.length)return Ta;Ta=+rb;return W};W.tickPadding=function(rb){if(!arguments.length)return Xa;Xa=+rb;return W};W.tickSubdivide=function(){return arguments.length&&W};return W};var Pg="bottom",jj={top:1,right:1,bottom:1,left:1};Zb.svg.brush=function(){function W(mc){mc.each(function(){var rc=Zb.select(this).style("pointer-events","all").style("-webkit-tap-highlight-color","rgba(0,0,0,0)").on("mousedown.brush",
Ta).on("touchstart.brush",Ta),yc=rc.selectAll(".background").data([0]);yc.enter().append("rect").attr("class","background").style("visibility","hidden").style("cursor","crosshair");rc.selectAll(".extent").data([0]).enter().append("rect").attr("class","extent").style("cursor","move");var Lc=rc.selectAll(".resize").data(gc,x);Lc.exit().remove();Lc.enter().append("g").attr("class",function(Tc){return"resize "+Tc}).style("cursor",function(Tc){return pk[Tc]}).append("rect").attr("x",function(Tc){return/[ew]$/.test(Tc)?
-3:null}).attr("y",function(Tc){return/^[ns]/.test(Tc)?-3:null}).attr("width",6).attr("height",6).style("visibility","hidden");Lc.style("display",W.empty()?"none":null);rc=Zb.transition(rc);yc=Zb.transition(yc);jb&&(Lc=Eg(jb),yc.attr("x",Lc[0]).attr("width",Lc[1]-Lc[0]),Da(rc));eb&&(Lc=Eg(eb),yc.attr("y",Lc[0]).attr("height",Lc[1]-Lc[0]),La(rc));wa(rc)})}function wa(mc){mc.selectAll(".resize").attr("transform",function(rc){return"translate("+ib[+/e$/.test(rc)]+","+rb[+/^s/.test(rc)]+")"})}function Da(mc){mc.select(".extent").attr("x",
ib[0]);mc.selectAll(".extent,.n\x3erect,.s\x3erect").attr("width",ib[1]-ib[0])}function La(mc){mc.select(".extent").attr("y",rb[0]);mc.selectAll(".extent,.e\x3erect,.w\x3erect").attr("height",rb[1]-rb[0])}function Ta(){function mc(){var Te=Zb.mouse(Lc),Se=!1;Ke&&(Te[0]+=Ke[0],Te[1]+=Ke[1]);od||(Zb.event.altKey?(qd||(qd=[(ib[0]+ib[1])/2,(rb[0]+rb[1])/2]),ed[0]=ib[+(Te[0]<qd[0])],ed[1]=rb[+(Te[1]<qd[1])]):qd=null);wc&&rc(Te,jb,0)&&(Da(jd),Se=!0);Mc&&rc(Te,eb,1)&&(La(jd),Se=!0);Se&&(wa(jd),Sc({type:"brush",
mode:od?"move":"resize"}))}function rc(Te,Se,ne){var Af=Eg(Se);Se=Af[0];var He=Af[1];Af=ed[ne];var uf=ne?rb:ib,Ze=uf[1]-uf[0];od&&(Se-=Af,He-=Ze+Af);Te=(ne?Wb:Qb)?Math.max(Se,Math.min(He,Te[ne])):Te[ne];od?Se=(Te+=Af)+Ze:(qd&&(Af=Math.max(Se,Math.min(He,2*qd[ne]-Te))),Af<Te?(Se=Te,Te=Af):Se=Af);if(uf[0]!=Te||uf[1]!=Se)return ne?Gb=null:yb=null,uf[0]=Te,uf[1]=Se,!0}function yc(){mc();jd.style("pointer-events","all").selectAll(".resize").style("display",W.empty()?"none":null);Zb.select("body").style("cursor",
null);Wd.on("mousemove.brush",null).on("mouseup.brush",null).on("touchmove.brush",null).on("touchend.brush",null).on("keydown.brush",null).on("keyup.brush",null);md();Sc({type:"brushend"})}var Lc=this,Tc=Zb.select(Zb.event.target),Sc=Xa.of(Lc,arguments),jd=Zb.select(Lc),hc=Tc.datum(),wc=!/^(n|s)$/.test(hc)&&jb,Mc=!/^(e|w)$/.test(hc)&&eb,od=Tc.classed("extent"),md=ra(Lc),qd,ed=Zb.mouse(Lc),Wd=Zb.select(q(Lc)).on("keydown.brush",function(){32==Zb.event.keyCode&&(od||(qd=null,ed[0]-=ib[1],ed[1]-=rb[1],
od=2),u())}).on("keyup.brush",function(){32==Zb.event.keyCode&&2==od&&(ed[0]+=ib[1],ed[1]+=rb[1],od=0,u())});if(Zb.event.changedTouches)Wd.on("touchmove.brush",mc).on("touchend.brush",yc);else Wd.on("mousemove.brush",mc).on("mouseup.brush",yc);jd.interrupt().selectAll("*").interrupt();if(od)ed[0]=ib[0]-ed[0],ed[1]=rb[0]-ed[1];else if(hc){var we=+/w$/.test(hc);hc=+/^n/.test(hc);var Ke=[ib[1-we]-ed[0],rb[1-hc]-ed[1]];ed[0]=ib[we];ed[1]=rb[hc]}else Zb.event.altKey&&(qd=ed.slice());jd.style("pointer-events",
"none").selectAll(".resize").style("display",null);Zb.select("body").style("cursor",Tc.style("cursor"));Sc({type:"brushstart"});mc()}var Xa=I(W,"brushstart","brush","brushend"),jb=null,eb=null,ib=[0,0],rb=[0,0],yb,Gb,Qb=!0,Wb=!0,gc=Ek[0];W.event=function(mc){mc.each(function(){var rc=Xa.of(this,arguments),yc={x:ib,y:rb,i:yb,j:Gb},Lc=this.__chart__||yc;this.__chart__=yc;bi?Zb.select(this).transition().each("start.brush",function(){yb=Lc.i;Gb=Lc.j;ib=Lc.x;rb=Lc.y;rc({type:"brushstart"})}).tween("brush:brush",
function(){var Tc=hi(ib,yc.x),Sc=hi(rb,yc.y);yb=Gb=null;return function(jd){ib=yc.x=Tc(jd);rb=yc.y=Sc(jd);rc({type:"brush",mode:"resize"})}}).each("end.brush",function(){yb=yc.i;Gb=yc.j;rc({type:"brush",mode:"resize"});rc({type:"brushend"})}):(rc({type:"brushstart"}),rc({type:"brush",mode:"resize"}),rc({type:"brushend"}))})};W.x=function(mc){if(!arguments.length)return jb;jb=mc;gc=Ek[!jb<<1|!eb];return W};W.y=function(mc){if(!arguments.length)return eb;eb=mc;gc=Ek[!jb<<1|!eb];return W};W.clamp=function(mc){if(!arguments.length)return jb&&
eb?[Qb,Wb]:jb?Qb:eb?Wb:null;jb&&eb?(Qb=!!mc[0],Wb=!!mc[1]):jb?Qb=!!mc:eb&&(Wb=!!mc);return W};W.extent=function(mc){if(!arguments.length){if(jb)if(yb){var rc=yb[0];var yc=yb[1]}else if(rc=ib[0],yc=ib[1],jb.invert&&(rc=jb.invert(rc),yc=jb.invert(yc)),yc<rc){var Lc=rc;rc=yc;yc=Lc}if(eb)if(Gb){var Tc=Gb[0];var Sc=Gb[1]}else Tc=rb[0],Sc=rb[1],eb.invert&&(Tc=eb.invert(Tc),Sc=eb.invert(Sc)),Sc<Tc&&(Lc=Tc,Tc=Sc,Sc=Lc);return jb&&eb?[[rc,Tc],[yc,Sc]]:jb?[rc,yc]:eb&&[Tc,Sc]}jb&&(rc=mc[0],yc=mc[1],eb&&(rc=
rc[0],yc=yc[0]),yb=[rc,yc],jb.invert&&(rc=jb(rc),yc=jb(yc)),yc<rc&&(Lc=rc,rc=yc,yc=Lc),rc!=ib[0]||yc!=ib[1])&&(ib=[rc,yc]);eb&&(Tc=mc[0],Sc=mc[1],jb&&(Tc=Tc[1],Sc=Sc[1]),Gb=[Tc,Sc],eb.invert&&(Tc=eb(Tc),Sc=eb(Sc)),Sc<Tc&&(Lc=Tc,Tc=Sc,Sc=Lc),Tc!=rb[0]||Sc!=rb[1])&&(rb=[Tc,Sc]);return W};W.clear=function(){W.empty()||(ib=[0,0],rb=[0,0],yb=Gb=null);return W};W.empty=function(){return!!jb&&ib[0]==ib[1]||!!eb&&rb[0]==rb[1]};return Zb.rebind(W,Xa,"on")};var pk={n:"ns-resize",e:"ew-resize",s:"ns-resize",
w:"ew-resize",nw:"nwse-resize",ne:"nesw-resize",se:"nwse-resize",sw:"nesw-resize"},Ek=["n e s w nw ne se sw".split(" "),["e","w"],["n","s"],[]],Ej=ie.format=Ci.timeFormat,Wj=Ej.utc,gi=Wj("%Y-%m-%dT%H:%M:%S.%LZ");Ej.iso=Date.prototype.toISOString&&+new Date("2000-01-01T00:00:00.000Z")?kg:gi;kg.parse=function(W){W=new Date(W);return isNaN(W)?null:W};kg.toString=gi.toString;ie.second=kc(function(W){return new xf(1E3*Math.floor(W/1E3))},function(W,wa){W.setTime(W.getTime()+1E3*Math.floor(wa))},function(W){return W.getSeconds()});
ie.seconds=ie.second.range;ie.seconds.utc=ie.second.utc.range;ie.minute=kc(function(W){return new xf(6E4*Math.floor(W/6E4))},function(W,wa){W.setTime(W.getTime()+6E4*Math.floor(wa))},function(W){return W.getMinutes()});ie.minutes=ie.minute.range;ie.minutes.utc=ie.minute.utc.range;ie.hour=kc(function(W){var wa=W.getTimezoneOffset()/60;return new xf(36E5*(Math.floor(W/36E5-wa)+wa))},function(W,wa){W.setTime(W.getTime()+36E5*Math.floor(wa))},function(W){return W.getHours()});ie.hours=ie.hour.range;ie.hours.utc=
ie.hour.utc.range;ie.month=kc(function(W){W=ie.day(W);W.setDate(1);return W},function(W,wa){W.setMonth(W.getMonth()+wa)},function(W){return W.getMonth()});ie.months=ie.month.range;ie.months.utc=ie.month.utc.range;var Yj=[1E3,5E3,15E3,3E4,6E4,3E5,9E5,18E5,36E5,108E5,216E5,432E5,864E5,1728E5,6048E5,2592E6,7776E6,31536E6],Ui=[[ie.second,1],[ie.second,5],[ie.second,15],[ie.second,30],[ie.minute,1],[ie.minute,5],[ie.minute,15],[ie.minute,30],[ie.hour,1],[ie.hour,3],[ie.hour,6],[ie.hour,12],[ie.day,1],
[ie.day,2],[ie.week,1],[ie.month,1],[ie.month,3],[ie.year,1]],ug=Ej.multi([[".%L",function(W){return W.getMilliseconds()}],[":%S",function(W){return W.getSeconds()}],["%I:%M",function(W){return W.getMinutes()}],["%I %p",function(W){return W.getHours()}],["%a %d",function(W){return W.getDay()&&1!=W.getDate()}],["%b %d",function(W){return 1!=W.getDate()}],["%B",function(W){return W.getMonth()}],["%Y",Hd]]),ok={range:function(W,wa,Da){return Zb.range(Math.ceil(W/Da)*Da,+wa,Da).map(ah)},floor:x,ceil:x};
Ui.year=ie.year;ie.scale=function(){return Gh(Zb.scale.linear(),Ui,ug)};var Xj=Ui.map(function(W){return[W[0].utc,W[1]]}),fg=Wj.multi([[".%L",function(W){return W.getUTCMilliseconds()}],[":%S",function(W){return W.getUTCSeconds()}],["%I:%M",function(W){return W.getUTCMinutes()}],["%I %p",function(W){return W.getUTCHours()}],["%a %d",function(W){return W.getUTCDay()&&1!=W.getUTCDate()}],["%b %d",function(W){return 1!=W.getUTCDate()}],["%B",function(W){return W.getUTCMonth()}],["%Y",Hd]]);Xj.year=ie.year.utc;
ie.scale.utc=function(){return Gh(Zb.scale.linear(),Xj,fg)};Zb.text=nb(function(W){return W.responseText});Zb.json=function(W,wa){return Ha(W,"application/json",fj,wa)};Zb.html=function(W,wa){return Ha(W,"text/html",zk,wa)};Zb.xml=nb(function(W){return W.responseXML});"object"===typeof G&&G.exports?G.exports=Zb:this.d3=Zb}()},{}],170:[function(a,G,C){G.exports=function(){for(var q=0;q<arguments.length;q++)if(void 0!==arguments[q])return arguments[q]}},{}],171:[function(a,G,C){function q(k,e){this.point=
k;this.index=e}function n(k,e){k=k.point;e=e.point;for(var h=k.length,l=0;l<h;++l){var c=e[l]-k[l];if(c)return c}return 0}function m(k,e,h){if(1===k)return h?[[-1,0]]:[];e=e.map(function(g,d){return[g[0],d]});e.sort(function(g,d){return g[0]-d[0]});for(var l=Array(k-1),c=1;c<k;++c)l[c-1]=[e[c-1][1],e[c][1]];h&&l.push([-1,l[0][1]],[l[k-1][1],-1]);return l}var f=a("incremental-convex-hull"),b=a("uniq");G.exports=function(k,e){var h=k.length;if(0===h)return[];var l=k[0].length;if(1>l)return[];if(1===
l)return m(h,k,e);for(var c=Array(h),g=1,d=0;d<h;++d){for(var p=k[d],r=Array(l+1),t=0,w=0;w<l;++w){var x=p[w];r[w]=x;t+=x*x}r[l]=t;c[d]=new q(r,d);g=Math.max(t,g)}b(c,n);h=c.length;k=Array(h+l+1);var y=Array(h+l+1);p=Array(l+1);for(d=0;d<=l;++d)p[d]=0;p[l]=(l+1)*(l+1)*g;k[0]=p.slice();y[0]=-1;for(d=0;d<=l;++d)r=p.slice(),r[d]=1,k[d+1]=r,y[d+1]=-1;for(d=0;d<h;++d)g=c[d],k[d+l+1]=g.point,y[d+l+1]=g.index;h=f(k,!1);h=e?h.filter(function(A){for(var z=0,F=0;F<=l;++F){var D=y[A[F]];if(0>D&&2<=++z)return!1;
A[F]=D}return!0}):h.filter(function(A){for(var z=0;z<=l;++z){var F=y[A[z]];if(0>F)return!1;A[z]=F}return!0});if(l&1)for(d=0;d<h.length;++d)g=h[d],r=g[0],g[0]=g[1],g[1]=r;return h}},{"incremental-convex-hull":433,uniq:569}],172:[function(a,G,C){function q(b,k){Array.isArray(b)&&(b=b.join(", "));var e={},h=16,l=.05;if(k)if(2===k.length&&"number"===typeof k[0])var c=n(k);else Array.isArray(k)?c=k:(k.o?c=n(k.o):k.pairs&&(c=k.pairs),k.fontSize&&(h=k.fontSize),null!=k.threshold&&(l=k.threshold));c||(c=
f);m.font=h+"px "+b;for(b=0;b<c.length;b++){k=c[b];var g=m.measureText(k[0]).width+m.measureText(k[1]).width,d=m.measureText(k).width;Math.abs(g-d)>h*l&&(e[k]=(d-g)/h*1E3)}return e}function n(b){for(var k=[],e=b[0];e<=b[1];e++)for(var h=String.fromCharCode(e),l=b[0];l<b[1];l++){var c=String.fromCharCode(l);k.push(h+c)}return k}G.exports=q;var m=(q.canvas=document.createElement("canvas")).getContext("2d"),f=n([32,126]);q.createPairs=n;q.ascii=f},{}],173:[function(a,G,C){(function(q){var n=!1;if("undefined"!==
typeof Float64Array){var m=new Float64Array(1),f=new Uint32Array(m.buffer);m[0]=1;n=!0;1072693248===f[1]?(G.exports=function(k){m[0]=k;return[f[0],f[1]]},G.exports.pack=function(k,e){f[0]=k;f[1]=e;return m[0]},G.exports.lo=function(k){m[0]=k;return f[0]},G.exports.hi=function(k){m[0]=k;return f[1]}):1072693248===f[0]?(G.exports=function(k){m[0]=k;return[f[1],f[0]]},G.exports.pack=function(k,e){f[1]=k;f[0]=e;return m[0]},G.exports.lo=function(k){m[0]=k;return f[1]},G.exports.hi=function(k){m[0]=k;
return f[0]}):n=!1}if(!n){var b=new q(8);G.exports=function(k){b.writeDoubleLE(k,0,!0);return[b.readUInt32LE(0,!0),b.readUInt32LE(4,!0)]};G.exports.pack=function(k,e){b.writeUInt32LE(k,0,!0);b.writeUInt32LE(e,4,!0);return b.readDoubleLE(0,!0)};G.exports.lo=function(k){b.writeDoubleLE(k,0,!0);return b.readUInt32LE(0,!0)};G.exports.hi=function(k){b.writeDoubleLE(k,0,!0);return b.readUInt32LE(4,!0)}}G.exports.sign=function(k){return G.exports.hi(k)>>>31};G.exports.exponent=function(k){return(G.exports.hi(k)<<
1>>>21)-1023};G.exports.fraction=function(k){var e=G.exports.lo(k);k=G.exports.hi(k);var h=k&1048575;k&2146435072&&(h+=1048576);return[e,h]};G.exports.denormalized=function(k){return!(G.exports.hi(k)&2146435072)}}).call(this,a("buffer").Buffer)},{buffer:111}],174:[function(a,G,C){var q=a("abs-svg-path"),n=a("normalize-svg-path"),m={M:"moveTo",C:"bezierCurveTo"};G.exports=function(f,b){f.beginPath();n(q(b)).forEach(function(k){var e=k[0];k=k.slice(1);f[m[e]].apply(f,k)});f.closePath()}},{"abs-svg-path":65,
"normalize-svg-path":471}],175:[function(a,G,C){G.exports=function(q){switch(q){case "int8":return Int8Array;case "int16":return Int16Array;case "int32":return Int32Array;case "uint8":return Uint8Array;case "uint16":return Uint16Array;case "uint32":return Uint32Array;case "float32":return Float32Array;case "float64":return Float64Array;case "array":return Array;case "uint8_clamped":return Uint8ClampedArray}}},{}],176:[function(a,G,C){function q(n,m,f){var b=n[f]|0;if(0>=b)return[];var k=Array(b),
e;if(f===n.length-1)for(e=0;e<b;++e)k[e]=m;else for(e=0;e<b;++e)k[e]=q(n,m,f+1);return k}G.exports=function(n,m){"undefined"===typeof m&&(m=0);switch(typeof n){case "number":if(0<n){n|=0;var f;var b=Array(n);for(f=0;f<n;++f)b[f]=m;return b}break;case "object":if("number"===typeof n.length)return q(n,m,0)}return[]}},{}],177:[function(a,G,C){function q(D,u,B){B=B||2;var I=u&&u.length,J=I?u[0]*B:D.length,N=n(D,0,J,B,!0),M=[];if(!N||N.next===N.prev)return M;var E;if(I){var L=B;I=[];var Q;var S=0;for(Q=
u.length;S<Q;S++){var R=u[S]*L;var O=S<Q-1?u[S+1]*L:D.length;R=n(D,R,O,L,!1);R===R.next&&(R.steiner=!0);I.push(l(R))}I.sort(k);for(S=0;S<I.length;S++){L=I[S];u=N;if(u=e(L,u))L=x(u,L),m(u,u.next),m(L,L.next);N=m(N,N.next)}}if(D.length>80*B){var T=E=D[0];var V=I=D[1];for(L=B;L<J;L+=B)S=D[L],u=D[L+1],S<T&&(T=S),u<V&&(V=u),S>E&&(E=S),u>I&&(I=u);E=Math.max(E-T,I-V);E=0!==E?1/E:0}f(N,M,B,T,V,E);return M}function n(D,u,B,I,J){if(J===0<F(D,u,B,I))for(J=u;J<B;J+=I)var N=y(J,D[J],D[J+1],N);else for(J=B-I;J>=
u;J-=I)N=y(J,D[J],D[J+1],N);N&&d(N,N.next)&&(A(N),N=N.next);return N}function m(D,u){if(!D)return D;u||(u=D);do{var B=!1;if(D.steiner||!d(D,D.next)&&0!==g(D.prev,D,D.next))D=D.next;else{A(D);D=u=D.prev;if(D===D.next)break;B=!0}}while(B||D!==u);return u}function f(D,u,B,I,J,N,M){if(D){if(!M&&N){var E=D,L=E;do null===L.z&&(L.z=h(L.x,L.y,I,J,N)),L.prevZ=L.prev,L=L.nextZ=L.next;while(L!==E);L.prevZ.nextZ=null;L.prevZ=null;E=L;var Q,S,R,O,T=1;do{L=E;var V=E=null;for(S=0;L;){S++;var X=L;for(Q=R=0;Q<T&&
(R++,X=X.nextZ,X);Q++);for(O=T;0<R||0<O&&X;)0!==R&&(0===O||!X||L.z<=X.z)?(Q=L,L=L.nextZ,R--):(Q=X,X=X.nextZ,O--),V?V.nextZ=Q:E=Q,Q.prevZ=V,V=Q;L=X}V.nextZ=null;T*=2}while(1<S)}for(E=D;D.prev!==D.next;){L=D.prev;X=D.next;if(N)V=b(D,I,J,N);else a:if(V=D,S=V.prev,R=V,T=V.next,0<=g(S,R,T))V=!1;else{for(Q=V.next.next;Q!==V.prev;){if(c(S.x,S.y,R.x,R.y,T.x,T.y,Q.x,Q.y)&&0<=g(Q.prev,Q,Q.next)){V=!1;break a}Q=Q.next}V=!0}if(V)u.push(L.i/B),u.push(D.i/B),u.push(X.i/B),A(D),E=D=X.next;else if(D=X,D===E){if(!M)f(m(D),
u,B,I,J,N,1);else if(1===M){D=m(D);M=u;E=B;L=D;do X=L.prev,V=L.next.next,!d(X,V)&&p(X,L,L.next,V)&&w(X,V)&&w(V,X)&&(M.push(X.i/E),M.push(L.i/E),M.push(V.i/E),A(L),A(L.next),L=D=V),L=L.next;while(L!==D);D=m(L);f(D,u,B,I,J,N,2)}else if(2===M)a:{M=D;do{for(E=M.next.next;E!==M.prev;){if(L=M.i!==E.i){L=M;X=E;if(V=L.next.i!==X.i&&L.prev.i!==X.i){b:{V=L;do{if(V.i!==L.i&&V.next.i!==L.i&&V.i!==X.i&&V.next.i!==X.i&&p(V,V.next,L,X)){V=!0;break b}V=V.next}while(V!==L);V=!1}V=!V}if(V){if(V=w(L,X)&&w(X,L)){V=L;
S=!1;R=(L.x+X.x)/2;T=(L.y+X.y)/2;do V.y>T!==V.next.y>T&&V.next.y!==V.y&&R<(V.next.x-V.x)*(T-V.y)/(V.next.y-V.y)+V.x&&(S=!S),V=V.next;while(V!==L);V=S}V=V&&(g(L.prev,L,X.prev)||g(L,X.prev,X))||d(L,X)&&0<g(L.prev,L,L.next)&&0<g(X.prev,X,X.next)}L=V}if(L){D=x(M,E);M=m(M,M.next);D=m(D,D.next);f(M,u,B,I,J,N);f(D,u,B,I,J,N);break a}E=E.next}M=M.next}while(M!==D)}break}}}}function b(D,u,B,I){var J=D.prev,N=D.next;if(0<=g(J,D,N))return!1;var M=J.x>D.x?J.x>N.x?J.x:N.x:D.x>N.x?D.x:N.x,E=J.y>D.y?J.y>N.y?J.y:
N.y:D.y>N.y?D.y:N.y,L=h(J.x<D.x?J.x<N.x?J.x:N.x:D.x<N.x?D.x:N.x,J.y<D.y?J.y<N.y?J.y:N.y:D.y<N.y?D.y:N.y,u,B,I);u=h(M,E,u,B,I);B=D.prevZ;for(I=D.nextZ;B&&B.z>=L&&I&&I.z<=u;){if(B!==D.prev&&B!==D.next&&c(J.x,J.y,D.x,D.y,N.x,N.y,B.x,B.y)&&0<=g(B.prev,B,B.next))return!1;B=B.prevZ;if(I!==D.prev&&I!==D.next&&c(J.x,J.y,D.x,D.y,N.x,N.y,I.x,I.y)&&0<=g(I.prev,I,I.next))return!1;I=I.nextZ}for(;B&&B.z>=L;){if(B!==D.prev&&B!==D.next&&c(J.x,J.y,D.x,D.y,N.x,N.y,B.x,B.y)&&0<=g(B.prev,B,B.next))return!1;B=B.prevZ}for(;I&&
I.z<=u;){if(I!==D.prev&&I!==D.next&&c(J.x,J.y,D.x,D.y,N.x,N.y,I.x,I.y)&&0<=g(I.prev,I,I.next))return!1;I=I.nextZ}return!0}function k(D,u){return D.x-u.x}function e(D,u){var B=u,I=D.x,J=D.y,N=-Infinity;do{if(J<=B.y&&J>=B.next.y&&B.next.y!==B.y){var M=B.x+(J-B.y)*(B.next.x-B.x)/(B.next.y-B.y);if(M<=I&&M>N){N=M;if(M===I){if(J===B.y)return B;if(J===B.next.y)return B.next}var E=B.x<B.next.x?B:B.next}}B=B.next}while(B!==u);if(!E)return null;if(I===N)return E;u=E;M=E.x;var L=E.y,Q=Infinity;B=E;do{if(I>=
B.x&&B.x>=M&&I!==B.x&&c(J<L?I:N,J,M,L,J<L?N:I,J,B.x,B.y)){var S=Math.abs(J-B.y)/(I-B.x);var R;if((R=w(B,D))&&!(R=S<Q)&&(R=S===Q)&&!(R=B.x>E.x)&&(R=B.x===E.x)){R=E;var O=B;R=0>g(R.prev,R,O.prev)&&0>g(O.next,R,R.next)}R&&(E=B,Q=S)}B=B.next}while(B!==u);return E}function h(D,u,B,I,J){D=32767*(D-B)*J;u=32767*(u-I)*J;D=(D|D<<8)&16711935;D=(D|D<<4)&252645135;D=(D|D<<2)&858993459;u=(u|u<<8)&16711935;u=(u|u<<4)&252645135;u=(u|u<<2)&858993459;return(D|D<<1)&1431655765|((u|u<<1)&1431655765)<<1}function l(D){var u=
D,B=D;do{if(u.x<B.x||u.x===B.x&&u.y<B.y)B=u;u=u.next}while(u!==D);return B}function c(D,u,B,I,J,N,M,E){return 0<=(J-M)*(u-E)-(D-M)*(N-E)&&0<=(D-M)*(I-E)-(B-M)*(u-E)&&0<=(B-M)*(N-E)-(J-M)*(I-E)}function g(D,u,B){return(u.y-D.y)*(B.x-u.x)-(u.x-D.x)*(B.y-u.y)}function d(D,u){return D.x===u.x&&D.y===u.y}function p(D,u,B,I){var J=t(g(D,u,B)),N=t(g(D,u,I)),M=t(g(B,I,D)),E=t(g(B,I,u));return J!==N&&M!==E||0===J&&r(D,B,u)||0===N&&r(D,I,u)||0===M&&r(B,D,I)||0===E&&r(B,u,I)?!0:!1}function r(D,u,B){return u.x<=
Math.max(D.x,B.x)&&u.x>=Math.min(D.x,B.x)&&u.y<=Math.max(D.y,B.y)&&u.y>=Math.min(D.y,B.y)}function t(D){return 0<D?1:0>D?-1:0}function w(D,u){return 0>g(D.prev,D,D.next)?0<=g(D,u,D.next)&&0<=g(D,D.prev,u):0>g(D,u,D.prev)||0>g(D,D.next,u)}function x(D,u){var B=new z(D.i,D.x,D.y),I=new z(u.i,u.x,u.y),J=D.next,N=u.prev;D.next=u;u.prev=D;B.next=J;J.prev=B;I.next=B;B.prev=I;N.next=I;I.prev=N;return I}function y(D,u,B,I){D=new z(D,u,B);I?(D.next=I.next,D.prev=I,I.next.prev=D,I.next=D):(D.prev=D,D.next=
D);return D}function A(D){D.next.prev=D.prev;D.prev.next=D.next;D.prevZ&&(D.prevZ.nextZ=D.nextZ);D.nextZ&&(D.nextZ.prevZ=D.prevZ)}function z(D,u,B){this.i=D;this.x=u;this.y=B;this.nextZ=this.prevZ=this.z=this.next=this.prev=null;this.steiner=!1}function F(D,u,B,I){for(var J=0,N=B-I;u<B;u+=I)J+=(D[N]-D[u])*(D[u+1]+D[N+1]),N=u;return J}G.exports=q;G.exports.default=q;q.deviation=function(D,u,B,I){var J=u&&u.length,N=Math.abs(F(D,0,J?u[0]*B:D.length,B));if(J){J=0;for(var M=u.length;J<M;J++)N-=Math.abs(F(D,
u[J]*B,J<M-1?u[J+1]*B:D.length,B))}for(J=u=0;J<I.length;J+=3){M=I[J]*B;var E=I[J+1]*B,L=I[J+2]*B;u+=Math.abs((D[M]-D[L])*(D[E+1]-D[M+1])-(D[M]-D[E])*(D[L+1]-D[M+1]))}return 0===N&&0===u?0:Math.abs((u-N)/N)};q.flatten=function(D){for(var u=D[0][0].length,B={vertices:[],holes:[],dimensions:u},I=0,J=0;J<D.length;J++){for(var N=0;N<D[J].length;N++)for(var M=0;M<u;M++)B.vertices.push(D[J][N][M]);0<J&&(I+=D[J-1].length,B.holes.push(I))}return B}},{}],178:[function(a,G,C){G.exports=function(n,m){var f=n.length;
if("number"!==typeof m){for(var b=m=0;b<f;++b){var k=n[b];m=Math.max(m,k[0],k[1])}m=(m|0)+1}m|=0;var e=Array(m);for(b=0;b<m;++b)e[b]=[];for(b=0;b<f;++b)k=n[b],e[k[0]].push(k[1]),e[k[1]].push(k[0]);for(n=0;n<m;++n)q(e[n],function(h,l){return h-l});return e};var q=a("uniq")},{uniq:569}],179:[function(a,G,C){var q=a("strongly-connected-components");G.exports=function(n,m){function f(y){c[y]=!1;g.hasOwnProperty(y)&&Object.keys(g[y]).forEach(function(A){delete g[y][A];c[A]&&f(A)})}function b(y){var A=
!1;l.push(y);c[y]=!0;var z;for(z=0;z<d[y].length;z++){var F=d[y][z];F===p?(A=p,A=[].concat(l).concat(A),m?m(b):h.push(A),A=!0):c[F]||(A=b(F))}if(A)f(y);else for(z=0;z<d[y].length;z++){F=d[y][z];var D=g[F];D||(D={},g[F]=D);D[F]=!0}l.pop();return A}function k(y){for(var A=0;A<n.length;A++)A<y&&(n[A]=[]),n[A]=n[A].filter(function(z){return z>=y})}function e(y){k(y);var A=q(n).components.filter(function(B){return 1<B.length});y=Infinity;for(var z,F=0;F<A.length;F++)for(var D=0;D<A[F].length;D++)A[F][D]<
y&&(y=A[F][D],z=F);var u=A[z];if(!u)return!1;z=n.map(function(B,I){return-1===u.indexOf(I)?[]:B.filter(function(J){return-1!==u.indexOf(J)})});return{leastVertex:y,adjList:z}}var h=[],l=[],c=[],g={},d=[];var p=0;for(var r=n.length;p<r;){var t=e(p);p=t.leastVertex;if(d=t.adjList){for(t=0;t<d.length;t++)for(var w=0;w<d[t].length;w++){var x=d[t][w];c[+x]=!1;g[x]={}}b(p);p+=1}else p=r}if(!m)return h}},{"strongly-connected-components":541}],180:[function(a,G,C){var q=a("../../object/valid-value");G.exports=
function(){q(this).length=0;return this}},{"../../object/valid-value":211}],181:[function(a,G,C){G.exports=a("./is-implemented")()?Array.from:a("./shim")},{"./is-implemented":182,"./shim":183}],182:[function(a,G,C){G.exports=function(){var q=Array.from;if("function"!==typeof q)return!1;var n=["raz","dwa"];q=q(n);return!(!q||q===n||"dwa"!==q[1])}},{}],183:[function(a,G,C){var q=a("es6-symbol").iterator,n=a("../../function/is-arguments"),m=a("../../function/is-function"),f=a("../../number/to-pos-integer"),
b=a("../../object/valid-callable"),k=a("../../object/valid-value"),e=a("../../object/is-value"),h=a("../../string/is-string"),l=Array.isArray,c=Function.prototype.call,g={configurable:!0,enumerable:!0,writable:!0,value:null},d=Object.defineProperty;G.exports=function(p,r,t){var w,x;p=Object(k(p));e(r)&&b(r);if(this&&this!==Array&&m(this))var y=this;else{if(!r){if(n(p)){var A=p.length;if(1!==A)return Array.apply(null,p);var z=Array(1);z[0]=p[0];return z}if(l(p)){z=Array(A=p.length);for(w=0;w<A;++w)z[w]=
p[w];return z}}z=[]}if(!l(p))if(void 0!==(w=p[q])){A=b(w).call(p);y&&(z=new y);var F=A.next();for(w=0;!F.done;)F=r?c.call(r,t,F.value,w):F.value,y?(g.value=F,d(z,w,g)):z[w]=F,F=A.next(),++w;A=w}else if(h(p)){A=p.length;y&&(z=new y);for(x=w=0;w<A;++w){F=p[w];if(w+1<A){var D=F.charCodeAt(0);55296<=D&&56319>=D&&(F+=p[++w])}F=r?c.call(r,t,F,x):F;y?(g.value=F,d(z,x,g)):z[x]=F;++x}A=x}if(void 0===A)for(A=f(p.length),y&&(z=new y(A)),w=0;w<A;++w)F=r?c.call(r,t,p[w],w):p[w],y?(g.value=F,d(z,w,g)):z[w]=F;y&&
(g.value=null,z.length=A);return z}},{"../../function/is-arguments":184,"../../function/is-function":185,"../../number/to-pos-integer":191,"../../object/is-value":200,"../../object/valid-callable":209,"../../object/valid-value":211,"../../string/is-string":215,"es6-symbol":225}],184:[function(a,G,C){var q=Object.prototype.toString,n=q.call(function(){return arguments}());G.exports=function(m){return q.call(m)===n}},{}],185:[function(a,G,C){var q=Object.prototype.toString,n=RegExp.prototype.test.bind(/^[object [A-Za-z0-9]*Function]$/);
G.exports=function(m){return"function"===typeof m&&n(q.call(m))}},{}],186:[function(a,G,C){G.exports=function(){}},{}],187:[function(a,G,C){G.exports=a("./is-implemented")()?Math.sign:a("./shim")},{"./is-implemented":188,"./shim":189}],188:[function(a,G,C){G.exports=function(){var q=Math.sign;return"function"!==typeof q?!1:1===q(10)&&-1===q(-20)}},{}],189:[function(a,G,C){G.exports=function(q){q=Number(q);return isNaN(q)||0===q?q:0<q?1:-1}},{}],190:[function(a,G,C){var q=a("../math/sign"),n=Math.abs,
m=Math.floor;G.exports=function(f){if(isNaN(f))return 0;f=Number(f);return 0!==f&&isFinite(f)?q(f)*m(n(f)):f}},{"../math/sign":187}],191:[function(a,G,C){var q=a("./to-integer"),n=Math.max;G.exports=function(m){return n(0,q(m))}},{"./to-integer":190}],192:[function(a,G,C){var q=a("./valid-callable"),n=a("./valid-value"),m=Function.prototype.bind,f=Function.prototype.call,b=Object.keys,k=Object.prototype.propertyIsEnumerable;G.exports=function(e,h){return function(l,c,g,d){l=Object(n(l));q(c);var p=
b(l);d&&p.sort("function"===typeof d?m.call(d,l):void 0);"function"!==typeof e&&(e=p[e]);return f.call(e,p,function(r,t){return k.call(l,r)?f.call(c,g,l[r],r,l,t):h})}}},{"./valid-callable":209,"./valid-value":211}],193:[function(a,G,C){G.exports=a("./is-implemented")()?Object.assign:a("./shim")},{"./is-implemented":194,"./shim":195}],194:[function(a,G,C){G.exports=function(){var q=Object.assign;if("function"!==typeof q)return!1;var n={foo:"raz"};q(n,{bar:"dwa"},{trzy:"trzy"});return"razdwatrzy"===
n.foo+n.bar+n.trzy}},{}],195:[function(a,G,C){var q=a("../keys"),n=a("../valid-value"),m=Math.max;G.exports=function(f,b){var k,e,h=m(arguments.length,2);f=Object(n(f));var l=function(c){try{f[c]=b[c]}catch(g){k||(k=g)}};for(e=1;e<h;++e)b=arguments[e],q(b).forEach(l);if(void 0!==k)throw k;return f}},{"../keys":201,"../valid-value":211}],196:[function(a,G,C){var q=a("../array/from"),n=a("./assign"),m=a("./valid-value");G.exports=function(f,b,k){var e=Object(m(f)),h=Object(k);if(e!==f&&!b)return e;
var l={};b?q(b,function(c){if(h.ensure||c in f)l[c]=f[c]}):n(l,f);return l}},{"../array/from":181,"./assign":193,"./valid-value":211}],197:[function(a,G,C){var q=Object.create,n;a("./set-prototype-of/is-implemented")()||(n=a("./set-prototype-of/shim"));G.exports=function(){if(!n||1!==n.level)return q;var m={};var f={};var b={configurable:!1,enumerable:!1,writable:!0,value:void 0};Object.getOwnPropertyNames(Object.prototype).forEach(function(k){f[k]="__proto__"===k?{configurable:!0,enumerable:!1,writable:!0,
value:void 0}:b});Object.defineProperties(m,f);Object.defineProperty(n,"nullPolyfill",{configurable:!1,enumerable:!1,writable:!1,value:m});return function(k,e){return q(null===k?m:k,e)}}()},{"./set-prototype-of/is-implemented":207,"./set-prototype-of/shim":208}],198:[function(a,G,C){G.exports=a("./_iterate")("forEach")},{"./_iterate":192}],199:[function(a,G,C){var q=a("./is-value"),n={function:!0,object:!0};G.exports=function(m){return q(m)&&n[typeof m]||!1}},{"./is-value":200}],200:[function(a,G,
C){var q=a("../function/noop")();G.exports=function(n){return n!==q&&null!==n}},{"../function/noop":186}],201:[function(a,G,C){G.exports=a("./is-implemented")()?Object.keys:a("./shim")},{"./is-implemented":202,"./shim":203}],202:[function(a,G,C){G.exports=function(){try{return Object.keys("primitive"),!0}catch(q){return!1}}},{}],203:[function(a,G,C){var q=a("../is-value"),n=Object.keys;G.exports=function(m){return n(q(m)?Object(m):m)}},{"../is-value":200}],204:[function(a,G,C){var q=a("./valid-callable"),
n=a("./for-each"),m=Function.prototype.call;G.exports=function(f,b,k){var e={};q(b);n(f,function(h,l,c,g){e[l]=m.call(b,k,h,l,c,g)});return e}},{"./for-each":198,"./valid-callable":209}],205:[function(a,G,C){var q=a("./is-value"),n=Array.prototype.forEach,m=Object.create;G.exports=function(f){var b=m(null);n.call(arguments,function(k){if(q(k)){k=Object(k);for(var e in k)b[e]=k[e]}});return b}},{"./is-value":200}],206:[function(a,G,C){G.exports=a("./is-implemented")()?Object.setPrototypeOf:a("./shim")},
{"./is-implemented":207,"./shim":208}],207:[function(a,G,C){var q=Object.create,n=Object.getPrototypeOf,m={};G.exports=function(f){var b=Object.setPrototypeOf;return"function"!==typeof b?!1:n(b((f||q)(null),m))===m}},{}],208:[function(a,G,C){var q=a("../is-object"),n=a("../valid-value"),m=Object.prototype.isPrototypeOf,f=Object.defineProperty,b={configurable:!0,enumerable:!1,writable:!0,value:void 0};var k=function(e,h){n(e);if(null===h||q(h))return e;throw new TypeError("Prototype must be null or an object");
};G.exports=function(e){if(!e)return null;if(2===e.level)if(e.set){var h=e.set;var l=function(c,g){h.call(k(c,g),g);return c}}else l=function(c,g){k(c,g).__proto__=g;return c};else l=function p(g,d){var r;k(g,d);(r=m.call(p.nullPolyfill,g))&&delete p.nullPolyfill.__proto__;null===d&&(d=p.nullPolyfill);g.__proto__=d;r&&f(p.nullPolyfill,"__proto__",b);return g};return Object.defineProperty(l,"level",{configurable:!1,enumerable:!1,writable:!1,value:e.level})}(function(){var e=Object.create(null),h={},
l=Object.getOwnPropertyDescriptor(Object.prototype,"__proto__");if(l){try{var c=l.set;c.call(e,h)}catch(g){}if(Object.getPrototypeOf(e)===h)return{set:c,level:2}}e.__proto__=h;if(Object.getPrototypeOf(e)===h)return{level:2};e={};e.__proto__=h;return Object.getPrototypeOf(e)===h?{level:1}:!1}());a("../create")},{"../create":197,"../is-object":199,"../valid-value":211}],209:[function(a,G,C){G.exports=function(q){if("function"!==typeof q)throw new TypeError(q+" is not a function");return q}},{}],210:[function(a,
G,C){var q=a("./is-object");G.exports=function(n){if(!q(n))throw new TypeError(n+" is not an Object");return n}},{"./is-object":199}],211:[function(a,G,C){var q=a("./is-value");G.exports=function(n){if(!q(n))throw new TypeError("Cannot use null or undefined");return n}},{"./is-value":200}],212:[function(a,G,C){G.exports=a("./is-implemented")()?String.prototype.contains:a("./shim")},{"./is-implemented":213,"./shim":214}],213:[function(a,G,C){G.exports=function(){return"function"!==typeof"razdwatrzy".contains?
!1:!0==="razdwatrzy".contains("dwa")&&!1==="razdwatrzy".contains("foo")}},{}],214:[function(a,G,C){var q=String.prototype.indexOf;G.exports=function(n,m){return-1<q.call(this,n,m)}},{}],215:[function(a,G,C){var q=Object.prototype.toString,n=q.call("");G.exports=function(m){return"string"===typeof m||m&&"object"===typeof m&&(m instanceof String||q.call(m)===n)||!1}},{}],216:[function(a,G,C){var q=Object.create(null),n=Math.random;G.exports=function(){do var m=n().toString(36).slice(2);while(q[m]);
return m}},{}],217:[function(a,G,C){C=a("es5-ext/object/set-prototype-of");var q=a("es5-ext/string/#/contains"),n=a("d"),m=a("es6-symbol"),f=a("./"),b=Object.defineProperty;var k=G.exports=function(e,h){if(!(this instanceof k))throw new TypeError("Constructor requires 'new'");f.call(this,e);h=h?q.call(h,"key+value")?"key+value":q.call(h,"key")?"key":"value":"value";b(this,"__kind__",n("",h))};C&&C(k,f);delete k.prototype.constructor;k.prototype=Object.create(f.prototype,{_resolve:n(function(e){return"value"===
this.__kind__?this.__list__[e]:"key+value"===this.__kind__?[e,this.__list__[e]]:e})});b(k.prototype,m.toStringTag,n("c","Array Iterator"))},{"./":220,d:155,"es5-ext/object/set-prototype-of":206,"es5-ext/string/#/contains":212,"es6-symbol":225}],218:[function(a,G,C){var q=a("es5-ext/function/is-arguments"),n=a("es5-ext/object/valid-callable"),m=a("es5-ext/string/is-string"),f=a("./get"),b=Array.isArray,k=Function.prototype.call,e=Array.prototype.some;G.exports=function(h,l,c){var g,d;b(h)||q(h)?g=
"array":m(h)?g="string":h=f(h);n(l);var p=function(){d=!0};if("array"===g)e.call(h,function(x){k.call(l,c,x,p);return d});else if("string"===g){var r=h.length;for(g=0;g<r;++g){var t=h[g];if(g+1<r){var w=t.charCodeAt(0);55296<=w&&56319>=w&&(t+=h[++g])}k.call(l,c,t,p);if(d)break}}else for(g=h.next();!g.done;){k.call(l,c,g.value,p);if(d)break;g=h.next()}}},{"./get":219,"es5-ext/function/is-arguments":184,"es5-ext/object/valid-callable":209,"es5-ext/string/is-string":215}],219:[function(a,G,C){var q=
a("es5-ext/function/is-arguments"),n=a("es5-ext/string/is-string"),m=a("./array"),f=a("./string"),b=a("./valid-iterable"),k=a("es6-symbol").iterator;G.exports=function(e){return"function"===typeof b(e)[k]?e[k]():q(e)?new m(e):n(e)?new f(e):new m(e)}},{"./array":217,"./string":222,"./valid-iterable":223,"es5-ext/function/is-arguments":184,"es5-ext/string/is-string":215,"es6-symbol":225}],220:[function(a,G,C){var q=a("es5-ext/array/#/clear");C=a("es5-ext/object/assign");var n=a("es5-ext/object/valid-callable"),
m=a("es5-ext/object/valid-value"),f=a("d"),b=a("d/auto-bind"),k=a("es6-symbol"),e=Object.defineProperty,h=Object.defineProperties,l;G.exports=l=function(c,g){if(!(this instanceof l))throw new TypeError("Constructor requires 'new'");h(this,{__list__:f("w",m(c)),__context__:f("w",g),__nextIndex__:f("w",0)});g&&(n(g.on),g.on("_add",this._onAdd),g.on("_delete",this._onDelete),g.on("_clear",this._onClear))};delete l.prototype.constructor;h(l.prototype,C({_next:f(function(){if(this.__list__){if(this.__redo__){var c=
this.__redo__.shift();if(void 0!==c)return c}if(this.__nextIndex__<this.__list__.length)return this.__nextIndex__++;this._unBind()}}),next:f(function(){return this._createResult(this._next())}),_createResult:f(function(c){return void 0===c?{done:!0,value:void 0}:{done:!1,value:this._resolve(c)}}),_resolve:f(function(c){return this.__list__[c]}),_unBind:f(function(){this.__list__=null;delete this.__redo__;this.__context__&&(this.__context__.off("_add",this._onAdd),this.__context__.off("_delete",this._onDelete),
this.__context__.off("_clear",this._onClear),this.__context__=null)}),toString:f(function(){return"[object "+(this[k.toStringTag]||"Object")+"]"})},b({_onAdd:f(function(c){c>=this.__nextIndex__||(++this.__nextIndex__,this.__redo__?(this.__redo__.forEach(function(g,d){g>=c&&(this.__redo__[d]=++g)},this),this.__redo__.push(c)):e(this,"__redo__",f("c",[c])))}),_onDelete:f(function(c){if(!(c>=this.__nextIndex__)&&(--this.__nextIndex__,this.__redo__)){var g=this.__redo__.indexOf(c);-1!==g&&this.__redo__.splice(g,
1);this.__redo__.forEach(function(d,p){d>c&&(this.__redo__[p]=--d)},this)}}),_onClear:f(function(){this.__redo__&&q.call(this.__redo__);this.__nextIndex__=0})})));e(l.prototype,k.iterator,f(function(){return this}))},{d:155,"d/auto-bind":154,"es5-ext/array/#/clear":180,"es5-ext/object/assign":193,"es5-ext/object/valid-callable":209,"es5-ext/object/valid-value":211,"es6-symbol":225}],221:[function(a,G,C){var q=a("es5-ext/function/is-arguments"),n=a("es5-ext/object/is-value"),m=a("es5-ext/string/is-string"),
f=a("es6-symbol").iterator,b=Array.isArray;G.exports=function(k){return n(k)?b(k)||m(k)||q(k)?!0:"function"===typeof k[f]:!1}},{"es5-ext/function/is-arguments":184,"es5-ext/object/is-value":200,"es5-ext/string/is-string":215,"es6-symbol":225}],222:[function(a,G,C){C=a("es5-ext/object/set-prototype-of");var q=a("d"),n=a("es6-symbol"),m=a("./"),f=Object.defineProperty;var b=G.exports=function(k){if(!(this instanceof b))throw new TypeError("Constructor requires 'new'");k=String(k);m.call(this,k);f(this,
"__length__",q("",k.length))};C&&C(b,m);delete b.prototype.constructor;b.prototype=Object.create(m.prototype,{_next:q(function(){if(this.__list__){if(this.__nextIndex__<this.__length__)return this.__nextIndex__++;this._unBind()}}),_resolve:q(function(k){k=this.__list__[k];if(this.__nextIndex__===this.__length__)return k;var e=k.charCodeAt(0);return 55296<=e&&56319>=e?k+this.__list__[this.__nextIndex__++]:k})});f(b.prototype,n.toStringTag,q("c","String Iterator"))},{"./":220,d:155,"es5-ext/object/set-prototype-of":206,
"es6-symbol":225}],223:[function(a,G,C){var q=a("./is-iterable");G.exports=function(n){if(!q(n))throw new TypeError(n+" is not iterable");return n}},{"./is-iterable":221}],224:[function(a,G,C){(function(q,n){(function(m,f){"object"===typeof C&&"undefined"!==typeof G?G.exports=f():m.ES6Promise=f()})(this,function(){function m(ra){return"function"===typeof ra}function f(){return function(){return q.nextTick(l)}}function b(){return"undefined"!==typeof L?function(){L(l)}:h()}function k(){var ra=0,qa=
new O(l),Y=document.createTextNode("");qa.observe(Y,{characterData:!0});return function(){Y.data=ra=++ra%2}}function e(){var ra=new MessageChannel;ra.port1.onmessage=l;return function(){return ra.port2.postMessage(0)}}function h(){var ra=setTimeout;return function(){return ra(l,1)}}function l(){for(var ra=0;ra<E;ra+=2)(0,V[ra])(V[ra+1]),V[ra]=void 0,V[ra+1]=void 0;E=0}function c(){try{var ra=Function("return this")().require("vertx");L=ra.runOnLoop||ra.runOnContext;return b()}catch(qa){return h()}}
function g(ra,qa){var Y=this,pa=new this.constructor(p);void 0===pa[ba]&&J(pa);var oa=Y._state;if(oa){var ua=arguments[oa-1];S(function(){return B(oa,pa,ua,Y._result)})}else D(Y,pa,ra,qa);return pa}function d(ra){if(ra&&"object"===typeof ra&&ra.constructor===this)return ra;var qa=new this(p);y(qa,ra);return qa}function p(){}function r(ra,qa,Y,pa){try{ra.call(qa,Y,pa)}catch(oa){return oa}}function t(ra,qa,Y){S(function(pa){var oa=!1,ua=r(Y,qa,function(ya){oa||(oa=!0,qa!==ya?y(pa,ya):z(pa,ya))},function(ya){oa||
(oa=!0,F(pa,ya))},"Settle: "+(pa._label||" unknown promise"));!oa&&ua&&(oa=!0,F(pa,ua))},ra)}function w(ra,qa){qa._state===ka?z(ra,qa._result):qa._state===ha?F(ra,qa._result):D(qa,void 0,function(Y){return y(ra,Y)},function(Y){return F(ra,Y)})}function x(ra,qa,Y){qa.constructor===ra.constructor&&Y===g&&qa.constructor.resolve===d?w(ra,qa):void 0===Y?z(ra,qa):m(Y)?t(ra,qa,Y):z(ra,qa)}function y(ra,qa){if(ra===qa)F(ra,new TypeError("You cannot resolve a promise with itself"));else{var Y=typeof qa;if(null===
qa||"object"!==Y&&"function"!==Y)z(ra,qa);else{Y=void 0;try{Y=qa.then}catch(pa){F(ra,pa);return}x(ra,qa,Y)}}}function A(ra){ra._onerror&&ra._onerror(ra._result);u(ra)}function z(ra,qa){ra._state===aa&&(ra._result=qa,ra._state=ka,0!==ra._subscribers.length&&S(u,ra))}function F(ra,qa){ra._state===aa&&(ra._state=ha,ra._result=qa,S(A,ra))}function D(ra,qa,Y,pa){var oa=ra._subscribers,ua=oa.length;ra._onerror=null;oa[ua]=qa;oa[ua+ka]=Y;oa[ua+ha]=pa;0===ua&&ra._state&&S(u,ra)}function u(ra){var qa=ra._subscribers,
Y=ra._state;if(0!==qa.length){for(var pa,oa,ua=ra._result,ya=0;ya<qa.length;ya+=3)pa=qa[ya],oa=qa[ya+Y],pa?B(Y,pa,oa,ua):oa(ua);ra._subscribers.length=0}}function B(ra,qa,Y,pa){var oa=m(Y),ua=void 0,ya=void 0,ja=!0;if(oa){try{ua=Y(pa)}catch(za){ja=!1,ya=za}if(qa===ua){F(qa,new TypeError("A promises callback cannot return that same promise."));return}}else ua=pa;qa._state===aa&&(oa&&ja?y(qa,ua):!1===ja?F(qa,ya):ra===ka?z(qa,ua):ra===ha&&F(qa,ua))}function I(ra,qa){try{qa(function(Y){y(ra,Y)},function(Y){F(ra,
Y)})}catch(Y){F(ra,Y)}}function J(ra){ra[ba]=ca++;ra._state=void 0;ra._result=void 0;ra._subscribers=[]}var N=void 0,M=N=Array.isArray?Array.isArray:function(ra){return"[object Array]"===Object.prototype.toString.call(ra)},E=0,L=void 0,Q=void 0,S=function(ra,qa){V[E]=ra;V[E+1]=qa;E+=2;2===E&&(Q?Q(l):X())},R=(N="undefined"!==typeof window?window:void 0)||{},O=R.MutationObserver||R.WebKitMutationObserver;R="undefined"===typeof self&&"undefined"!==typeof q&&"[object process]"==={}.toString.call(q);var T=
"undefined"!==typeof Uint8ClampedArray&&"undefined"!==typeof importScripts&&"undefined"!==typeof MessageChannel,V=Array(1E3),X=void 0;X=R?f():O?k():T?e():void 0===N&&"function"===typeof a?c():h();var ba=Math.random().toString(36).substring(2),aa=void 0,ka=1,ha=2,ca=0,sa=function(){function ra(qa,Y){this._instanceConstructor=qa;this.promise=new qa(p);this.promise[ba]||J(this.promise);M(Y)?(this._remaining=this.length=Y.length,this._result=Array(this.length),0===this.length?z(this.promise,this._result):
(this.length=this.length||0,this._enumerate(Y),0===this._remaining&&z(this.promise,this._result))):F(this.promise,Error("Array Methods must be provided an Array"))}ra.prototype._enumerate=function(qa){for(var Y=0;this._state===aa&&Y<qa.length;Y++)this._eachEntry(qa[Y],Y)};ra.prototype._eachEntry=function(qa,Y){var pa=this._instanceConstructor,oa=pa.resolve;if(oa===d){var ua=oa=void 0,ya=!1;try{oa=qa.then}catch(ja){ya=!0,ua=ja}oa===g&&qa._state!==aa?this._settledAt(qa._state,Y,qa._result):"function"!==
typeof oa?(this._remaining--,this._result[Y]=qa):pa===ma?(pa=new pa(p),ya?F(pa,ua):x(pa,qa,oa),this._willSettleAt(pa,Y)):this._willSettleAt(new pa(function(ja){return ja(qa)}),Y)}else this._willSettleAt(oa(qa),Y)};ra.prototype._settledAt=function(qa,Y,pa){var oa=this.promise;oa._state===aa&&(this._remaining--,qa===ha?F(oa,pa):this._result[Y]=pa);0===this._remaining&&z(oa,this._result)};ra.prototype._willSettleAt=function(qa,Y){var pa=this;D(qa,void 0,function(oa){return pa._settledAt(ka,Y,oa)},function(oa){return pa._settledAt(ha,
Y,oa)})};return ra}(),ma=function(){function ra(qa){this[ba]=ca++;this._result=this._state=void 0;this._subscribers=[];if(p!==qa){if("function"!==typeof qa)throw new TypeError("You must pass a resolver function as the first argument to the promise constructor");if(this instanceof ra)I(this,qa);else throw new TypeError("Failed to construct 'Promise': Please use the 'new' operator, this object constructor cannot be called as a function.");}}ra.prototype.catch=function(qa){return this.then(null,qa)};
ra.prototype.finally=function(qa){var Y=this.constructor;return m(qa)?this.then(function(pa){return Y.resolve(qa()).then(function(){return pa})},function(pa){return Y.resolve(qa()).then(function(){throw pa;})}):this.then(qa,qa)};return ra}();ma.prototype.then=g;ma.all=function(ra){return(new sa(this,ra)).promise};ma.race=function(ra){var qa=this;return M(ra)?new qa(function(Y,pa){for(var oa=ra.length,ua=0;ua<oa;ua++)qa.resolve(ra[ua]).then(Y,pa)}):new qa(function(Y,pa){return pa(new TypeError("You must pass an array to race."))})};
ma.resolve=d;ma.reject=function(ra){var qa=new this(p);F(qa,ra);return qa};ma._setScheduler=function(ra){Q=ra};ma._setAsap=function(ra){S=ra};ma._asap=S;ma.polyfill=function(){var ra=void 0;if("undefined"!==typeof n)ra=n;else if("undefined"!==typeof self)ra=self;else try{ra=Function("return this")()}catch(pa){throw Error("polyfill failed because global object is unavailable in this environment");}var qa=ra.Promise;if(qa){var Y=null;try{Y=Object.prototype.toString.call(qa.resolve())}catch(pa){}if("[object Promise]"===
Y&&!qa.cast)return}ra.Promise=ma};return ma.Promise=ma})}).call(this,a("_process"),"undefined"!==typeof la?la:"undefined"!==typeof self?self:"undefined"!==typeof window?window:{})},{_process:500}],225:[function(a,G,C){G.exports=a("./is-implemented")()?a("ext/global-this").Symbol:a("./polyfill")},{"./is-implemented":226,"./polyfill":231,"ext/global-this":238}],226:[function(a,G,C){var q=a("ext/global-this"),n={object:!0,symbol:!0};G.exports=function(){var m=q.Symbol;if("function"!==typeof m)return!1;
var f=m("test symbol");try{String(f)}catch(b){return!1}return n[typeof m.iterator]&&n[typeof m.toPrimitive]&&n[typeof m.toStringTag]?!0:!1}},{"ext/global-this":238}],227:[function(a,G,C){G.exports=function(q){return q?"symbol"===typeof q?!0:q.constructor&&"Symbol"===q.constructor.name?"Symbol"===q[q.constructor.toStringTag]:!1:!1}},{}],228:[function(a,G,C){var q=a("d");a=Object.create;var n=Object.defineProperty,m=Object.prototype,f=a(null);G.exports=function(b){for(var k=0,e,h;f[b+(k||"")];)++k;
b+=k||"";f[b]=!0;e="@@"+b;n(m,e,q.gs(null,function(l){h||(h=!0,n(this,e,q(l)),h=!1)}));return e}},{d:155}],229:[function(a,G,C){var q=a("d"),n=a("ext/global-this").Symbol;G.exports=function(m){return Object.defineProperties(m,{hasInstance:q("",n&&n.hasInstance||m("hasInstance")),isConcatSpreadable:q("",n&&n.isConcatSpreadable||m("isConcatSpreadable")),iterator:q("",n&&n.iterator||m("iterator")),match:q("",n&&n.match||m("match")),replace:q("",n&&n.replace||m("replace")),search:q("",n&&n.search||m("search")),
species:q("",n&&n.species||m("species")),split:q("",n&&n.split||m("split")),toPrimitive:q("",n&&n.toPrimitive||m("toPrimitive")),toStringTag:q("",n&&n.toStringTag||m("toStringTag")),unscopables:q("",n&&n.unscopables||m("unscopables"))})}},{d:155,"ext/global-this":238}],230:[function(a,G,C){var q=a("d"),n=a("../../../validate-symbol"),m=Object.create(null);G.exports=function(f){return Object.defineProperties(f,{for:q(function(b){return m[b]?m[b]:m[b]=f(String(b))}),keyFor:q(function(b){var k;n(b);
for(k in m)if(m[k]===b)return k})})}},{"../../../validate-symbol":232,d:155}],231:[function(a,G,C){var q=a("d"),n=a("./validate-symbol"),m=a("ext/global-this").Symbol,f=a("./lib/private/generate-name");C=a("./lib/private/setup/standard-symbols");a=a("./lib/private/setup/symbol-registry");var b=Object.create,k=Object.defineProperties,e=Object.defineProperty,h;if("function"===typeof m)try{String(m());var l=!0}catch(g){}else m=null;var c=function(g){if(this instanceof c)throw new TypeError("Symbol is not a constructor");
return h(g)};G.exports=h=function p(d){if(this instanceof p)throw new TypeError("Symbol is not a constructor");if(l)return m(d);var r=b(c.prototype);d=void 0===d?"":String(d);return k(r,{__description__:q("",d),__name__:q("",f(d))})};C(h);a(h);k(c.prototype,{constructor:q(h),toString:q("",function(){return this.__name__})});k(h.prototype,{toString:q(function(){return"Symbol ("+n(this).__description__+")"}),valueOf:q(function(){return n(this)})});e(h.prototype,h.toPrimitive,q("",function(){var d=n(this);
return"symbol"===typeof d?d:d.toString()}));e(h.prototype,h.toStringTag,q("c","Symbol"));e(c.prototype,h.toStringTag,q("c",h.prototype[h.toStringTag]));e(c.prototype,h.toPrimitive,q("c",h.prototype[h.toPrimitive]))},{"./lib/private/generate-name":228,"./lib/private/setup/standard-symbols":229,"./lib/private/setup/symbol-registry":230,"./validate-symbol":232,d:155,"ext/global-this":238}],232:[function(a,G,C){var q=a("./is-symbol");G.exports=function(n){if(!q(n))throw new TypeError(n+" is not a symbol");
return n}},{"./is-symbol":227}],233:[function(a,G,C){G.exports=a("./is-implemented")()?WeakMap:a("./polyfill")},{"./is-implemented":234,"./polyfill":236}],234:[function(a,G,C){G.exports=function(){var q;if("function"!==typeof WeakMap)return!1;try{var n=new WeakMap([[q={},"one"],[{},"two"],[{},"three"]])}catch(m){return!1}return"[object WeakMap]"!==String(n)||"function"!==typeof n.set||n.set({},1)!==n||"function"!==typeof n.delete||"function"!==typeof n.has||"one"!==n.get(q)?!1:!0}},{}],235:[function(a,
G,C){a="function"!==typeof WeakMap?!1:"[object WeakMap]"===Object.prototype.toString.call(new WeakMap);G.exports=a},{}],236:[function(a,G,C){var q=a("es5-ext/object/is-value"),n=a("es5-ext/object/set-prototype-of"),m=a("es5-ext/object/valid-object"),f=a("es5-ext/object/valid-value"),b=a("es5-ext/string/random-uniq"),k=a("d"),e=a("es6-iterator/get"),h=a("es6-iterator/for-of");C=a("es6-symbol").toStringTag;var l=a("./is-native-implemented"),c=Array.isArray,g=Object.defineProperty,d=Object.prototype.hasOwnProperty,
p=Object.getPrototypeOf,r;G.exports=r=function(t){if(!(this instanceof r))throw new TypeError("Constructor requires 'new'");var w=l&&n&&WeakMap!==r?n(new WeakMap,p(this)):this;q(t)&&(c(t)||(t=e(t)));g(w,"__weakMapData__",k("c","$weakMap$"+b()));if(!t)return w;h(t,function(x){f(x);w.set(x[0],x[1])});return w};l&&(n&&n(r,WeakMap),r.prototype=Object.create(WeakMap.prototype,{constructor:k(r)}));Object.defineProperties(r.prototype,{delete:k(function(t){return d.call(m(t),this.__weakMapData__)?(delete t[this.__weakMapData__],
!0):!1}),get:k(function(t){if(d.call(m(t),this.__weakMapData__))return t[this.__weakMapData__]}),has:k(function(t){return d.call(m(t),this.__weakMapData__)}),set:k(function(t,w){g(m(t),this.__weakMapData__,k("c",w));return this}),toString:k(function(){return"[object WeakMap]"})});g(r.prototype,C,k("c","WeakMap"))},{"./is-native-implemented":235,d:155,"es5-ext/object/is-value":200,"es5-ext/object/set-prototype-of":206,"es5-ext/object/valid-object":210,"es5-ext/object/valid-value":211,"es5-ext/string/random-uniq":216,
"es6-iterator/for-of":218,"es6-iterator/get":219,"es6-symbol":225}],237:[function(a,G,C){var q=function(){if("object"===typeof self&&self)return self;if("object"===typeof window&&window)return window;throw Error("Unable to resolve global `this`");};G.exports=function(){if(this)return this;try{Object.defineProperty(Object.prototype,"__global__",{get:function(){return this},configurable:!0})}catch(n){return q()}try{return __global__?__global__:q()}finally{delete Object.prototype.__global__}}()},{}],
238:[function(a,G,C){G.exports=a("./is-implemented")()?globalThis:a("./implementation")},{"./implementation":237,"./is-implemented":239}],239:[function(a,G,C){G.exports=function(){return"object"===typeof globalThis&&globalThis?globalThis.Array===Array:!1}},{}],240:[function(a,G,C){G.exports=function(q,n,m){n=n||0;m=m||1;return[[q[12]+q[0],q[13]+q[1],q[14]+q[2],q[15]+q[3]],[q[12]-q[0],q[13]-q[1],q[14]-q[2],q[15]-q[3]],[q[12]+q[4],q[13]+q[5],q[14]+q[6],q[15]+q[7]],[q[12]-q[4],q[13]-q[5],q[14]-q[6],
q[15]-q[7]],[n*q[12]+q[8],n*q[13]+q[9],n*q[14]+q[10],n*q[15]+q[11]],[m*q[12]-q[8],m*q[13]-q[9],m*q[14]-q[10],m*q[15]-q[11]]]}},{}],241:[function(a,G,C){var q=a("is-string-blank");G.exports=function(n){var m=typeof n;if("string"===m){if(m=n,n=+n,0===n&&q(m))return!1}else if("number"!==m)return!1;return 1>n-n}},{"is-string-blank":444}],242:[function(a,G,C){function q(k,e,h){return Math.min(e,Math.max(k,h))}function n(k,e,h){this.dimension=k.length;this.bounds=[Array(this.dimension),Array(this.dimension)];
for(var l=0;l<this.dimension;++l)this.bounds[0][l]=-Infinity,this.bounds[1][l]=Infinity;this._state=k.slice().reverse();this._velocity=e.slice().reverse();this._time=[h];this._scratch=[k.slice(),k.slice(),k.slice(),k.slice(),k.slice()]}function m(k){for(var e=Array(k),h=0;h<k;++h)e[h]=0;return e}G.exports=function(k,e,h){switch(arguments.length){case 0:return new n([0],[0],0);case 1:if("number"===typeof k){var l=m(k);return new n(l,l,0)}return new n(k,m(k.length),0);case 2:if("number"===typeof e)return l=
m(k.length),new n(k,l,+e);h=0;case 3:if(k.length!==e.length)throw Error("state and velocity lengths must match");return new n(k,e,h)}};var f=a("cubic-hermite"),b=a("binary-search-bounds");a=n.prototype;a.flush=function(k){k=b.gt(this._time,k)-1;0>=k||(this._time.splice(0,k),this._state.splice(0,k*this.dimension),this._velocity.splice(0,k*this.dimension))};a.curve=function(k){var e=this._time,h=e.length,l=b.le(e,k),c=this._scratch[0],g=this._state,d=this._velocity,p=this.dimension,r=this.bounds;if(0>
l){var t=p-1;for(e=0;e<p;++e,--t)c[e]=g[t]}else if(l>=h-1)for(t=g.length-1,k-=e[h-1],e=0;e<p;++e,--t)c[e]=g[t]+k*d[t];else{t=p*(l+1)-1;h=e[l];l=e[l+1]-h||1;var w=this._scratch[1],x=this._scratch[2],y=this._scratch[3],A=this._scratch[4],z=!0;for(e=0;e<p;++e,--t)w[e]=g[t],y[e]=d[t]*l,x[e]=g[t+p],A[e]=d[t+p]*l,z=z&&w[e]===x[e]&&y[e]===A[e]&&0===y[e];if(z)for(e=0;e<p;++e)c[e]=w[e];else f(w,y,x,A,(k-h)/l,c)}g=r[0];r=r[1];for(e=0;e<p;++e)c[e]=q(g[e],r[e],c[e]);return c};a.dcurve=function(k){var e=this._time,
h=e.length,l=b.le(e,k),c=this._scratch[0],g=this._state,d=this._velocity,p=this.dimension;if(l>=h-1)for(h=g.length-1,e=0;e<p;++e,--h)c[e]=d[h];else{h=p*(l+1)-1;var r=e[l];l=e[l+1]-r||1;var t=this._scratch[1],w=this._scratch[2],x=this._scratch[3],y=this._scratch[4],A=!0;for(e=0;e<p;++e,--h)t[e]=g[h],x[e]=d[h]*l,w[e]=g[h+p],y[e]=d[h+p]*l,A=A&&t[e]===w[e]&&x[e]===y[e]&&0===x[e];if(A)for(e=0;e<p;++e)c[e]=0;else for(f.derivative(t,x,w,y,(k-r)/l,c),e=0;e<p;++e)c[e]/=l}return c};a.lastT=function(){var k=
this._time;return k[k.length-1]};a.stable=function(){for(var k=this._velocity,e=k.length,h=this.dimension-1;0<=h;--h)if(k[--e])return!1;return!0};a.jump=function(k){var e=this.lastT(),h=this.dimension;if(!(k<e||arguments.length!==h+1)){var l=this._state,c=this._velocity,g=l.length-this.dimension,d=this.bounds,p=d[0];d=d[1];this._time.push(e,k);for(e=0;2>e;++e)for(var r=0;r<h;++r)l.push(l[g++]),c.push(0);this._time.push(k);for(r=h;0<r;--r)l.push(q(p[r-1],d[r-1],arguments[r])),c.push(0)}};a.push=function(k){var e=
this.lastT(),h=this.dimension;if(!(k<e||arguments.length!==h+1)){var l=this._state,c=this._velocity,g=l.length-this.dimension,d=k-e,p=this.bounds;e=p[0];p=p[1];d=1E-6<d?1/d:0;for(this._time.push(k);0<h;--h){var r=q(e[h-1],p[h-1],arguments[h]);l.push(r);c.push((r-l[g++])*d)}}};a.set=function(k){var e=this.dimension;if(!(k<this.lastT()||arguments.length!==e+1)){var h=this._state,l=this._velocity,c=this.bounds,g=c[0];c=c[1];for(this._time.push(k);0<e;--e)h.push(q(g[e-1],c[e-1],arguments[e])),l.push(0)}};
a.move=function(k){var e=this.lastT(),h=this.dimension;if(!(k<=e||arguments.length!==h+1)){var l=this._state,c=this._velocity,g=l.length-this.dimension,d=this.bounds,p=d[0];d=d[1];e=k-e;e=1E-6<e?1/e:0;for(this._time.push(k);0<h;--h){var r=arguments[h];l.push(q(p[h-1],d[h-1],l[g++]+r));c.push(r*e)}}};a.idle=function(k){var e=this.lastT();if(!(k<e)){var h=this.dimension,l=this._state,c=this._velocity,g=l.length-h,d=this.bounds,p=d[0];d=d[1];e=k-e;this._time.push(k);for(k=h-1;0<=k;--k)l.push(q(p[k],
d[k],l[g]+e*c[g])),c.push(0),g+=1}}},{"binary-search-bounds":243,"cubic-hermite":150}],243:[function(a,G,C){function q(m,f,b,k,e,h){m=["function ",m,"(a,l,h,",k.join(","),"){",h?"":"var i\x3d",b?"l-1":"h+1",";while(l\x3c\x3dh){var m\x3d(l+h)\x3e\x3e\x3e1,x\x3da",e?".get(m)":"[m]"];h?0>f.indexOf("c")?m.push(";if(x\x3d\x3d\x3dy){return m}else if(x\x3c\x3dy){"):m.push(";var p\x3dc(x,y);if(p\x3d\x3d\x3d0){return m}else if(p\x3c\x3d0){"):m.push(";if(",f,"){i\x3dm;");b?m.push("l\x3dm+1}else{h\x3dm-1}"):
m.push("h\x3dm-1}else{l\x3dm+1}");m.push("}");h?m.push("return -1};"):m.push("return i};");return m.join("")}function n(m,f,b,k){return(new Function([q("A","x"+m+"y",f,["y"],!1,k),q("B","x"+m+"y",f,["y"],!0,k),q("P","c(x,y)"+m+"0",f,["y","c"],!1,k),q("Q","c(x,y)"+m+"0",f,["y","c"],!0,k),"function dispatchBsearch",b,"(a,y,c,l,h){if(a.shape){if(typeof(c)\x3d\x3d\x3d'function'){return Q(a,(l\x3d\x3d\x3dundefined)?0:l|0,(h\x3d\x3d\x3dundefined)?a.shape[0]-1:h|0,y,c)}else{return B(a,(c\x3d\x3d\x3dundefined)?0:c|0,(l\x3d\x3d\x3dundefined)?a.shape[0]-1:l|0,y)}}else{if(typeof(c)\x3d\x3d\x3d'function'){return P(a,(l\x3d\x3d\x3dundefined)?0:l|0,(h\x3d\x3d\x3dundefined)?a.length-1:h|0,y,c)}else{return A(a,(c\x3d\x3d\x3dundefined)?0:c|0,(l\x3d\x3d\x3dundefined)?a.length-1:l|0,y)}}}return dispatchBsearch",
b].join("")))()}G.exports={ge:n("\x3e\x3d",!1,"GE"),gt:n("\x3e",!1,"GT"),lt:n("\x3c",!0,"LT"),le:n("\x3c\x3d",!0,"LE"),eq:n("-",!0,"EQ",!0)}},{}],244:[function(a,G,C){var q=a("dtype");G.exports=function(n,m,f){if(!n)throw new TypeError("must specify data as first parameter");f=+(f||0)|0;if(Array.isArray(n)&&n[0]&&"number"===typeof n[0][0]){var b=n[0].length,k=n.length*b;m&&"string"!==typeof m||(m=new (q(m||"float32"))(k+f));var e=m.length-f;if(k!==e)throw Error("source length "+k+" ("+b+"x"+n.length+
") does not match destination length "+e);for(k=0;k<n.length;k++)for(e=0;e<b;e++)m[f++]=null===n[k][e]?NaN:n[k][e]}else if(m&&"string"!==typeof m)m.set(n,f);else if(b=q(m||"float32"),Array.isArray(n)||"array"===m)for(m=new b(n.length+f),k=0,b=m.length;f<b;f++,k++)m[f]=null===n[k]?NaN:n[k];else 0===f?m=new b(n):(m=new b(n.length+f),m.set(n,f));return m}},{dtype:175}],245:[function(a,G,C){var q=a("css-font/stringify"),n=[32,126];G.exports=function(m){m=m||{};var f=m.shape?m.shape:m.canvas?[m.canvas.width,
m.canvas.height]:[512,512],b=m.canvas||document.createElement("canvas"),k=m.font,e="number"===typeof m.step?[m.step,m.step]:m.step||[32,32];m=m.chars||n;k&&"string"!==typeof k&&(k=q(k));if(!Array.isArray(m))m=String(m).split("");else if(2===m.length&&"number"===typeof m[0]&&"number"===typeof m[1]){for(var h=[],l=m[0],c=0;l<=m[1];l++)h[c++]=String.fromCharCode(l);m=h}f=f.slice();b.width=f[0];b.height=f[1];h=b.getContext("2d");h.fillStyle="#000";h.fillRect(0,0,b.width,b.height);h.font=k;h.textAlign=
"center";h.textBaseline="middle";h.fillStyle="#fff";k=e[0]/2;c=e[1]/2;for(l=0;l<m.length;l++)h.fillText(m[l],k,c),(k+=e[0])>f[0]-e[0]/2&&(k=e[0]/2,c+=e[1]);return b}},{"css-font/stringify":147}],246:[function(a,G,C){function q(b,k){k||(k={});if("string"===typeof b||Array.isArray(b))k.family=b;var e=Array.isArray(k.family)?k.family.join(", "):k.family;if(!e)throw Error("`family` must be defined");var h=k.size||k.fontSize||k.em||48;b=[k.style||k.fontStyle||"",k.weight||k.fontWeight||"",h].join(" ")+
"px "+e;var l=k.origin||"top";if(q.cache[e]&&h<=q.cache[e].em)return n(q.cache[e],l);var c=k.canvas||q.canvas,g=c.getContext("2d"),d=void 0!==k.upper?k.upper:"H",p=void 0!==k.lower?k.lower:"x",r=void 0!==k.descent?k.descent:"p",t=void 0!==k.ascent?k.ascent:"h",w=void 0!==k.tittle?k.tittle:"i";k=void 0!==k.overshoot?k.overshoot:"O";var x=Math.ceil(1.5*h);c.height=x;c.width=.5*x;g.font=b;b={top:0};g.clearRect(0,0,x,x);g.textBaseline="top";g.fillStyle="black";g.fillText("H",0,0);c=m(g.getImageData(0,
0,x,x));g.clearRect(0,0,x,x);g.textBaseline="bottom";g.fillText("H",0,x);var y=m(g.getImageData(0,0,x,x));b.lineHeight=b.bottom=x-y+c;g.clearRect(0,0,x,x);g.textBaseline="alphabetic";g.fillText("H",0,x);y=m(g.getImageData(0,0,x,x));y=x-y-1+c;b.baseline=b.alphabetic=y;g.clearRect(0,0,x,x);g.textBaseline="middle";g.fillText("H",0,.5*x);var A=m(g.getImageData(0,0,x,x));b.median=b.middle=x-A-1+c-.5*x;g.clearRect(0,0,x,x);g.textBaseline="hanging";g.fillText("H",0,.5*x);A=m(g.getImageData(0,0,x,x));b.hanging=
x-A-1+c-.5*x;g.clearRect(0,0,x,x);g.textBaseline="ideographic";g.fillText("H",0,x);A=m(g.getImageData(0,0,x,x));b.ideographic=x-A-1+c;d&&(g.clearRect(0,0,x,x),g.textBaseline="top",g.fillText(d,0,0),b.upper=m(g.getImageData(0,0,x,x)),b.capHeight=b.baseline-b.upper);p&&(g.clearRect(0,0,x,x),g.textBaseline="top",g.fillText(p,0,0),b.lower=m(g.getImageData(0,0,x,x)),b.xHeight=b.baseline-b.lower);w&&(g.clearRect(0,0,x,x),g.textBaseline="top",g.fillText(w,0,0),b.tittle=m(g.getImageData(0,0,x,x)));t&&(g.clearRect(0,
0,x,x),g.textBaseline="top",g.fillText(t,0,0),b.ascent=m(g.getImageData(0,0,x,x)));r&&(g.clearRect(0,0,x,x),g.textBaseline="top",g.fillText(r,0,0),b.descent=f(g.getImageData(0,0,x,x)));k&&(g.clearRect(0,0,x,x),g.textBaseline="top",g.fillText(k,0,0),g=f(g.getImageData(0,0,x,x)),b.overshoot=g-y);for(var z in b)b[z]/=h;b.em=h;q.cache[e]=b;return n(b,l)}function n(b,k){var e={};"string"===typeof k&&(k=b[k]);for(var h in b)"em"!==h&&(e[h]=b[h]-k);return e}function m(b){var k=b.height;b=b.data;for(var e=
3;e<b.length;e+=4)if(0!==b[e])return Math.floor(.25*(e-3)/k)}function f(b){var k=b.height;b=b.data;for(var e=b.length-1;0<e;e-=4)if(0!==b[e])return Math.floor(.25*(e-3)/k)}G.exports=q;q.canvas=document.createElement("canvas");q.cache={}},{}],247:[function(a,G,C){function q(d,p,r,t,w,x){this._color=d;this.key=p;this.value=r;this.left=t;this.right=w;this._count=x}function n(d){return new q(d._color,d.key,d.value,d.left,d.right,d._count)}function m(d,p){return new q(d,p.key,p.value,p.left,p.right,p._count)}
function f(d){d._count=1+(d.left?d.left._count:0)+(d.right?d.right._count:0)}function b(d,p){this._compare=d;this.root=p}function k(d,p){if(p.left){var r=k(d,p.left);if(r)return r}if(r=d(p.key,p.value))return r;if(p.right)return k(d,p.right)}function e(d,p,r,t){if(0>=p(d,t.key)){if(t.left){var w=e(d,p,r,t.left);if(w)return w}if(w=r(t.key,t.value))return w}if(t.right)return e(d,p,r,t.right)}function h(d,p,r,t,w){var x=r(d,w.key),y=r(p,w.key);if(0>=x&&(w.left&&(x=h(d,p,r,t,w.left))||0<y&&(x=t(w.key,
w.value))))return x;if(0<y&&w.right)return h(d,p,r,t,w.right)}function l(d,p){this.tree=d;this._stack=p}function c(d,p){d.key=p.key;d.value=p.value;d.left=p.left;d.right=p.right;d._color=p._color;d._count=p._count}function g(d,p){return d<p?-1:d>p?1:0}G.exports=function(d){return new b(d||g,null)};a=b.prototype;Object.defineProperty(a,"keys",{get:function(){var d=[];this.forEach(function(p,r){d.push(p)});return d}});Object.defineProperty(a,"values",{get:function(){var d=[];this.forEach(function(p,
r){d.push(r)});return d}});Object.defineProperty(a,"length",{get:function(){return this.root?this.root._count:0}});a.insert=function(d,p){for(var r=this._compare,t=this.root,w=[],x=[];t;){var y=r(d,t.key);w.push(t);x.push(y);t=0>=y?t.left:t.right}w.push(new q(0,d,p,null,null,1));for(d=w.length-2;0<=d;--d)t=w[d],w[d]=0>=x[d]?new q(t._color,t.key,t.value,w[d+1],t.right,t._count+1):new q(t._color,t.key,t.value,t.left,w[d+1],t._count+1);for(d=w.length-1;1<d;--d){x=w[d-1];t=w[d];if(1===x._color||1===t._color)break;
p=w[d-2];if(p.left===x)if(x.left===t)if((y=p.right)&&0===y._color)x._color=1,p.right=m(1,y),p._color=0,--d;else{p._color=0;p.left=x.right;x._color=1;x.right=p;w[d-2]=x;w[d-1]=t;f(p);f(x);3<=d&&(d=w[d-3],d.left===p?d.left=x:d.right=x);break}else if((y=p.right)&&0===y._color)x._color=1,p.right=m(1,y),p._color=0,--d;else{x.right=t.left;p._color=0;p.left=t.right;t._color=1;t.left=x;t.right=p;w[d-2]=t;w[d-1]=x;f(p);f(x);f(t);3<=d&&(d=w[d-3],d.left===p?d.left=t:d.right=t);break}else if(x.right===t)if((y=
p.left)&&0===y._color)x._color=1,p.left=m(1,y),p._color=0,--d;else{p._color=0;p.right=x.left;x._color=1;x.left=p;w[d-2]=x;w[d-1]=t;f(p);f(x);3<=d&&(d=w[d-3],d.right===p?d.right=x:d.left=x);break}else if((y=p.left)&&0===y._color)x._color=1,p.left=m(1,y),p._color=0,--d;else{x.left=t.right;p._color=0;p.right=t.left;t._color=1;t.right=x;t.left=p;w[d-2]=t;w[d-1]=x;f(p);f(x);f(t);3<=d&&(d=w[d-3],d.right===p?d.right=t:d.left=t);break}}w[0]._color=1;return new b(r,w[0])};a.forEach=function(d,p,r){if(this.root)switch(arguments.length){case 1:return k(d,
this.root);case 2:return e(p,this._compare,d,this.root);case 3:if(!(0<=this._compare(p,r)))return h(p,r,this._compare,d,this.root)}};Object.defineProperty(a,"begin",{get:function(){for(var d=[],p=this.root;p;)d.push(p),p=p.left;return new l(this,d)}});Object.defineProperty(a,"end",{get:function(){for(var d=[],p=this.root;p;)d.push(p),p=p.right;return new l(this,d)}});a.at=function(d){if(0>d)return new l(this,[]);for(var p=this.root,r=[];;){r.push(p);if(p.left){if(d<p.left._count){p=p.left;continue}d-=
p.left._count}if(!d)return new l(this,r);--d;if(p.right){if(d>=p.right._count)break;p=p.right}else break}return new l(this,[])};a.ge=function(d){for(var p=this._compare,r=this.root,t=[],w=0;r;){var x=p(d,r.key);t.push(r);0>=x&&(w=t.length);r=0>=x?r.left:r.right}t.length=w;return new l(this,t)};a.gt=function(d){for(var p=this._compare,r=this.root,t=[],w=0;r;){var x=p(d,r.key);t.push(r);0>x&&(w=t.length);r=0>x?r.left:r.right}t.length=w;return new l(this,t)};a.lt=function(d){for(var p=this._compare,
r=this.root,t=[],w=0;r;){var x=p(d,r.key);t.push(r);0<x&&(w=t.length);r=0>=x?r.left:r.right}t.length=w;return new l(this,t)};a.le=function(d){for(var p=this._compare,r=this.root,t=[],w=0;r;){var x=p(d,r.key);t.push(r);0<=x&&(w=t.length);r=0>x?r.left:r.right}t.length=w;return new l(this,t)};a.find=function(d){for(var p=this._compare,r=this.root,t=[];r;){var w=p(d,r.key);t.push(r);if(0===w)return new l(this,t);r=0>=w?r.left:r.right}return new l(this,[])};a.remove=function(d){return(d=this.find(d))?
d.remove():this};a.get=function(d){for(var p=this._compare,r=this.root;r;){var t=p(d,r.key);if(0===t)return r.value;r=0>=t?r.left:r.right}};a=l.prototype;Object.defineProperty(a,"valid",{get:function(){return 0<this._stack.length}});Object.defineProperty(a,"node",{get:function(){return 0<this._stack.length?this._stack[this._stack.length-1]:null},enumerable:!0});a.clone=function(){return new l(this.tree,this._stack.slice())};a.remove=function(){var d=this._stack;if(0===d.length)return this.tree;var p=
Array(d.length),r=d[d.length-1];p[p.length-1]=new q(r._color,r.key,r.value,r.left,r.right,r._count);for(var t=d.length-2;0<=t;--t)r=d[t],p[t]=r.left===d[t+1]?new q(r._color,r.key,r.value,p[t+1],r.right,r._count):new q(r._color,r.key,r.value,r.left,p[t+1],r._count);r=p[p.length-1];if(r.left&&r.right){d=p.length;for(r=r.left;r.right;)p.push(r),r=r.right;t=p[d-1];p.push(new q(r._color,t.key,t.value,r.left,r.right,r._count));p[d-1].key=r.key;p[d-1].value=r.value;for(t=p.length-2;t>=d;--t)r=p[t],p[t]=
new q(r._color,r.key,r.value,r.left,p[t+1],r._count);p[d-1].left=p[d]}r=p[p.length-1];if(0===r._color)for(t=p[p.length-2],t.left===r?t.left=null:t.right===r&&(t.right=null),p.pop(),t=0;t<p.length;++t)p[t]._count--;else if(r.left||r.right)for(r.left?c(r,r.left):r.right&&c(r,r.right),r._color=1,t=0;t<p.length-1;++t)p[t]._count--;else{if(1===p.length)return new b(this.tree._compare,null);for(t=0;t<p.length;++t)p[t]._count--;t=p[p.length-2];for(var w,x,y,A=p.length-1;0<=A;--A){d=p[A];if(0===A){d._color=
1;break}w=p[A-1];if(w.left===d){x=w.right;if(x.right&&0===x.right._color){x=w.right=n(x);y=x.right=n(x.right);w.right=x.left;x.left=w;x.right=y;x._color=w._color;d._color=1;w._color=1;y._color=1;f(w);f(x);if(1<A){var z=p[A-2];z.left===w?z.left=x:z.right=x}p[A-1]=x;break}else if(x.left&&0===x.left._color){x=w.right=n(x);y=x.left=n(x.left);w.right=y.left;x.left=y.right;y.left=w;y.right=x;y._color=w._color;w._color=1;x._color=1;d._color=1;f(w);f(x);f(y);1<A&&(z=p[A-2],z.left===w?z.left=y:z.right=y);
p[A-1]=y;break}if(1===x._color)if(0===w._color){w._color=1;w.right=m(0,x);break}else w.right=m(0,x);else x=n(x),w.right=x.left,x.left=w,x._color=w._color,w._color=0,f(w),f(x),1<A&&(z=p[A-2],z.left===w?z.left=x:z.right=x),p[A-1]=x,p[A]=w,A+1<p.length?p[A+1]=d:p.push(d),A+=2}else{x=w.left;if(x.left&&0===x.left._color){x=w.left=n(x);y=x.left=n(x.left);w.left=x.right;x.right=w;x.left=y;x._color=w._color;d._color=1;w._color=1;y._color=1;f(w);f(x);1<A&&(z=p[A-2],z.right===w?z.right=x:z.left=x);p[A-1]=x;
break}else if(x.right&&0===x.right._color){x=w.left=n(x);y=x.right=n(x.right);w.left=y.right;x.right=y.left;y.right=w;y.left=x;y._color=w._color;w._color=1;x._color=1;d._color=1;f(w);f(x);f(y);1<A&&(z=p[A-2],z.right===w?z.right=y:z.left=y);p[A-1]=y;break}if(1===x._color)if(0===w._color){w._color=1;w.left=m(0,x);break}else w.left=m(0,x);else x=n(x),w.left=x.right,x.right=w,x._color=w._color,w._color=0,f(w),f(x),1<A&&(z=p[A-2],z.right===w?z.right=x:z.left=x),p[A-1]=x,p[A]=w,A+1<p.length?p[A+1]=d:p.push(d),
A+=2}}t.left===r?t.left=null:t.right=null}return new b(this.tree._compare,p[0])};Object.defineProperty(a,"key",{get:function(){if(0<this._stack.length)return this._stack[this._stack.length-1].key},enumerable:!0});Object.defineProperty(a,"value",{get:function(){if(0<this._stack.length)return this._stack[this._stack.length-1].value},enumerable:!0});Object.defineProperty(a,"index",{get:function(){var d=0,p=this._stack;if(0===p.length)return(d=this.tree.root)?d._count:0;p[p.length-1].left&&(d=p[p.length-
1].left._count);for(var r=p.length-2;0<=r;--r)p[r+1]===p[r].right&&(++d,p[r].left&&(d+=p[r].left._count));return d},enumerable:!0});a.next=function(){var d=this._stack;if(0!==d.length){var p=d[d.length-1];if(p.right)for(p=p.right;p;)d.push(p),p=p.left;else for(d.pop();0<d.length&&d[d.length-1].right===p;)p=d[d.length-1],d.pop()}};Object.defineProperty(a,"hasNext",{get:function(){var d=this._stack;if(0===d.length)return!1;if(d[d.length-1].right)return!0;for(var p=d.length-1;0<p;--p)if(d[p-1].left===
d[p])return!0;return!1}});a.update=function(d){var p=this._stack;if(0===p.length)throw Error("Can't update empty node!");var r=Array(p.length),t=p[p.length-1];r[r.length-1]=new q(t._color,t.key,d,t.left,t.right,t._count);for(d=p.length-2;0<=d;--d)t=p[d],r[d]=t.left===p[d+1]?new q(t._color,t.key,t.value,r[d+1],t.right,t._count):new q(t._color,t.key,t.value,t.left,r[d+1],t._count);return new b(this.tree._compare,r[0])};a.prev=function(){var d=this._stack;if(0!==d.length){var p=d[d.length-1];if(p.left)for(p=
p.left;p;)d.push(p),p=p.right;else for(d.pop();0<d.length&&d[d.length-1].left===p;)p=d[d.length-1],d.pop()}};Object.defineProperty(a,"hasPrev",{get:function(){var d=this._stack;if(0===d.length)return!1;if(d[d.length-1].left)return!0;for(var p=d.length-1;0<p;--p)if(d[p-1].right===d[p])return!0;return!1}})},{}],248:[function(a,G,C){function q(f){if(0>f)return Number("0/0");for(var b=m[0],k=m.length-1;0<k;--k)b+=m[k]/(f+k);k=f+4.7421875+.5;return.5*Math.log(2*Math.PI)+(f+.5)*Math.log(k)-k+Math.log(b)-
Math.log(f)}var n=[.9999999999998099,676.5203681218851,-1259.1392167224028,771.3234287776531,-176.6150291621406,12.507343278686905,-.13857109526572012,9.984369578019572E-6,1.5056327351493116E-7],m=[.9999999999999971,57.15623566586292,-59.59796035547549,14.136097974741746,-.4919138160976202,3.399464998481189E-5,4.652362892704858E-5,-9.837447530487956E-5,1.580887032249125E-4,-2.1026444172410488E-4,2.1743961811521265E-4,-1.643181065367639E-4,8.441822398385275E-5,-2.6190838401581408E-5,3.6899182659531625E-6];
G.exports=function k(b){if(.5>b)return Math.PI/(Math.sin(Math.PI*b)*k(1-b));if(100<b)return Math.exp(q(b));--b;for(var e=n[0],h=1;9>h;h++)e+=n[h]/(b+h);h=b+7+.5;return Math.sqrt(2*Math.PI)*Math.pow(h,b+.5)*Math.exp(-h)*e};G.exports.log=q},{}],249:[function(a,G,C){G.exports=function(q,n){if("string"!==typeof q)throw new TypeError("must specify type string");n=n||{};if("undefined"===typeof document&&!n.canvas)return null;var m=n.canvas||document.createElement("canvas");"number"===typeof n.width&&(m.width=
n.width);"number"===typeof n.height&&(m.height=n.height);var f;try{var b=[q];0===q.indexOf("webgl")&&b.push("experimental-"+q);for(q=0;q<b.length;q++)if(f=m.getContext(b[q],n))return f}catch(k){f=null}return f||null}},{}],250:[function(a,G,C){function q(x,y){x[0]=y[0];x[1]=y[1];x[2]=y[2];return x}function n(x){this.gl=x;this.pixelRatio=1;this.bounds=[[-10,-10,-10],[10,10,10]];this.ticks=[[],[],[]];this.autoTicks=!0;this.tickSpacing=[1,1,1];this.tickEnable=[!0,!0,!0];this.tickFont=["sans-serif","sans-serif",
"sans-serif"];this.tickSize=[12,12,12];this.tickAngle=[0,0,0];this.tickAlign=["auto","auto","auto"];this.tickColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1]];this.tickPad=[10,10,10];this.lastCubeProps={cubeEdges:[0,0,0],axis:[0,0,0]};this.labels=["x","y","z"];this.labelEnable=[!0,!0,!0];this.labelFont="sans-serif";this.labelSize=[20,20,20];this.labelAngle=[0,0,0];this.labelAlign=["auto","auto","auto"];this.labelColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1]];this.labelPad=[10,10,10];this.lineEnable=[!0,!0,!0];this.lineMirror=
[!1,!1,!1];this.lineWidth=[1,1,1];this.lineColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1]];this.lineTickEnable=[!0,!0,!0];this.lineTickMirror=[!1,!1,!1];this.lineTickLength=[0,0,0];this.lineTickWidth=[1,1,1];this.lineTickColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1]];this.gridEnable=[!0,!0,!0];this.gridWidth=[1,1,1];this.gridColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1]];this.zeroEnable=[!0,!0,!0];this.zeroLineColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1]];this.zeroLineWidth=[2,2,2];this.backgroundEnable=[!1,!1,!1];this.backgroundColor=
[[.8,.8,.8,.5],[.8,.8,.8,.5],[.8,.8,.8,.5]];this._firstInit=!0;this._lines=this._text=null;this._background=e(x)}function m(){this.primalOffset=[0,0,0];this.primalMinor=[0,0,0];this.mirrorOffset=[0,0,0];this.mirrorMinor=[0,0,0]}function f(x,y,A,z,F){var D=x.primalOffset,u=x.primalMinor,B=x.mirrorOffset;x=x.mirrorMinor;z=z[y];for(var I=0;3>I;++I)if(y!==I){var J=D,N=B,M=u,E=x;z&1<<I&&(J=B,N=D,M=x,E=u);J[I]=A[0][I];N[I]=A[1][I];0<F[I]?(M[I]=-1,E[I]=0):(M[I]=0,E[I]=1)}}G.exports=function(x,y){x=new n(x);
x.update(y);return x};var b=a("./lib/text.js"),k=a("./lib/lines.js"),e=a("./lib/background.js"),h=a("./lib/cube.js"),l=a("./lib/ticks.js"),c=new Float32Array([1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]);a=n.prototype;a.update=function(x){function y(E,L,Q){if(Q in x){var S=x[Q],R=this[Q],O;(E?Array.isArray(S)&&Array.isArray(S[0]):Array.isArray(S))?this[Q]=O=[L(S[0]),L(S[1]),L(S[2])]:this[Q]=O=[L(S),L(S),L(S)];for(E=0;3>E;++E)if(O[E]!==R[E])return!0}return!1}x=x||{};var A=y.bind(this,!1,Number),z=y.bind(this,
!1,Boolean),F=y.bind(this,!1,String),D=y.bind(this,!0,function(E){if(Array.isArray(E)){if(3===E.length)return[+E[0],+E[1],+E[2],1];if(4===E.length)return[+E[0],+E[1],+E[2],+E[3]]}return[0,0,0,1]}),u=!1,B=!1;if("bounds"in x){var I=x.bounds,J=0;for(;2>J;++J)for(var N=0;3>N;++N)I[J][N]!==this.bounds[J][N]&&(B=!0),this.bounds[J][N]=I[J][N]}if("ticks"in x){var M=x.ticks;u=!0;this.autoTicks=!1;for(J=0;3>J;++J)this.tickSpacing[J]=0}else A("tickSpacing")&&(B=this.autoTicks=!0);this._firstInit&&("ticks"in
x||"tickSpacing"in x||(this.autoTicks=!0),u=B=!0,this._firstInit=!1);B&&this.autoTicks&&(M=l.create(this.bounds,this.tickSpacing),u=!0);if(u){for(J=0;3>J;++J)M[J].sort(function(E,L){return E.x-L.x});l.equal(M,this.ticks)?u=!1:this.ticks=M}z("tickEnable");F("tickFont")&&(u=!0);A("tickSize");A("tickAngle");A("tickPad");D("tickColor");M=F("labels");F("labelFont")&&(M=!0);z("labelEnable");A("labelSize");A("labelPad");D("labelColor");z("lineEnable");z("lineMirror");A("lineWidth");D("lineColor");z("lineTickEnable");
z("lineTickMirror");A("lineTickLength");A("lineTickWidth");D("lineTickColor");z("gridEnable");A("gridWidth");D("gridColor");z("zeroEnable");D("zeroLineColor");A("zeroLineWidth");z("backgroundEnable");D("backgroundColor");this._text?this._text&&(M||u)&&this._text.update(this.bounds,this.labels,this.labelFont,this.ticks,this.tickFont):this._text=b(this.gl,this.bounds,this.labels,this.labelFont,this.ticks,this.tickFont);this._lines&&u&&(this._lines.dispose(),this._lines=null);this._lines||(this._lines=
k(this.gl,this.bounds,this.ticks))};var g=[new m,new m,new m],d=[0,0,0],p={model:c,view:c,projection:c,_ortho:!1};a.isOpaque=function(){return!0};a.isTransparent=function(){return!1};a.drawTransparent=function(x){};var r=[0,0,0],t=[0,0,0],w=[0,0,0];a.draw=function(x){function y(Q){L=[0,0,0];L[Q]=1}function A(Q,S,R){var O=(Q+1)%3;Q=(Q+2)%3;var T=S[O];S=S[Q];var V=R[O];R=R[Q];0<T&&0<R?y(O):0<T&&0>R?y(O):0>T&&0<R?y(O):0>T&&0>R?y(O):0<S&&0<V?y(Q):0<S&&0>V?y(Q):0>S&&0<V?y(Q):0>S&&0>V&&y(Q)}x=x||p;var z=
this.gl,F=x.model||c,D=x.view||c,u=x.projection||c,B=this.bounds;x=x._ortho||!1;var I=h(F,D,u,B,x),J=I.cubeEdges;I=I.axis;x=(x?2:1)*this.pixelRatio*(u[3]*D[12]+u[7]*D[13]+u[11]*D[14]+u[15]*D[15])/z.drawingBufferHeight;for(z=0;3>z;++z)this.lastCubeProps.cubeEdges[z]=J[z],this.lastCubeProps.axis[z]=I[z];for(z=0;3>z;++z)f(g[z],z,this.bounds,J,I);z=this.gl;for(z=0;3>z;++z)d[z]=this.backgroundEnable[z]?I[z]:0;this._background.draw(F,D,u,B,d,this.backgroundColor);this._lines.bind(F,D,u,this);for(z=0;3>
z;++z){var N=[0,0,0];N[z]=0<I[z]?B[1][z]:B[0][z];for(J=0;2>J;++J){var M=(z+1+J)%3,E=(z+1+(J^1))%3;this.gridEnable[M]&&this._lines.drawGrid(M,E,this.bounds,N,this.gridColor[M],this.gridWidth[M]*this.pixelRatio)}for(J=0;2>J;++J)M=(z+1+J)%3,E=(z+1+(J^1))%3,this.zeroEnable[E]&&0>=Math.min(B[0][E],B[1][E])&&0<=Math.max(B[0][E],B[1][E])&&this._lines.drawZero(M,E,this.bounds,N,this.zeroLineColor[E],this.zeroLineWidth[E]*this.pixelRatio)}for(z=0;3>z;++z){this.lineEnable[z]&&this._lines.drawAxisLine(z,this.bounds,
g[z].primalOffset,this.lineColor[z],this.lineWidth[z]*this.pixelRatio);this.lineMirror[z]&&this._lines.drawAxisLine(z,this.bounds,g[z].mirrorOffset,this.lineColor[z],this.lineWidth[z]*this.pixelRatio);I=q(r,g[z].primalMinor);N=q(t,g[z].mirrorMinor);M=this.lineTickLength;for(J=0;3>J;++J)E=x/F[5*J],I[J]=I[J]*M[J]*E,N[J]=N[J]*M[J]*E;this.lineTickEnable[z]&&this._lines.drawAxisTicks(z,g[z].primalOffset,I,this.lineTickColor[z],this.lineTickWidth[z]*this.pixelRatio);this.lineTickMirror[z]&&this._lines.drawAxisTicks(z,
g[z].mirrorOffset,N,this.lineTickColor[z],this.lineTickWidth[z]*this.pixelRatio)}this._lines.unbind();this._text.bind(F,D,u,this.pixelRatio);for(z=0;3>z;++z){D=g[z].primalMinor;u=g[z].mirrorMinor;I=q(w,g[z].primalOffset);for(J=0;3>J;++J)this.lineTickEnable[z]&&(I[J]+=x*D[J]*Math.max(this.lineTickLength[J],0)/F[5*J]);N=[0,0,0];N[z]=1;if(this.tickEnable[z]){-3600===this.tickAngle[z]?(this.tickAngle[z]=0,this.tickAlign[z]="auto"):this.tickAlign[z]=-1;J=1;M=[this.tickAlign[z],.5,J];M[0]="auto"===M[0]?
0:parseInt(""+M[0]);var L=[0,0,0];A(z,D,u);for(J=0;3>J;++J)I[J]+=x*D[J]*this.tickPad[J]/F[5*J];this._text.drawTicks(z,this.tickSize[z],this.tickAngle[z],I,this.tickColor[z],N,L,M)}if(this.labelEnable[z]){J=0;L=[0,0,0];4<this.labels[z].length&&(y(z),J=1);M=[this.labelAlign[z],.5,J];M[0]="auto"===M[0]?0:parseInt(""+M[0]);for(J=0;3>J;++J)I[J]+=x*D[J]*this.labelPad[J]/F[5*J];I[z]+=.5*(B[0][z]+B[1][z]);this._text.drawLabel(z,this.labelSize[z],this.labelAngle[z],I,this.labelColor[z],[0,0,0],L,M)}}this._text.unbind()};
a.dispose=function(){this._text.dispose();this._lines.dispose();this._background.dispose();this.gl=this._background=this._text=this._lines=null}},{"./lib/background.js":251,"./lib/cube.js":252,"./lib/lines.js":253,"./lib/text.js":255,"./lib/ticks.js":256}],251:[function(a,G,C){function q(b,k,e,h){this.gl=b;this.buffer=k;this.vao=e;this.shader=h}G.exports=function(b){for(var k=[],e=[],h=0,l=0;3>l;++l)for(var c=(l+1)%3,g=(l+2)%3,d=[0,0,0],p=[0,0,0],r=-1;1>=r;r+=2){e.push(h,h+2,h+1,h+1,h+2,h+3);d[l]=
r;p[l]=r;for(var t=-1;1>=t;t+=2){d[c]=t;for(var w=-1;1>=w;w+=2)d[g]=w,k.push(d[0],d[1],d[2],p[0],p[1],p[2]),h+=1}t=c;c=g;g=t}k=n(b,new Float32Array(k));e=n(b,new Uint16Array(e),b.ELEMENT_ARRAY_BUFFER);e=m(b,[{buffer:k,type:b.FLOAT,size:3,offset:0,stride:24},{buffer:k,type:b.FLOAT,size:3,offset:12,stride:24}],e);h=f(b);h.attributes.position.location=0;h.attributes.normal.location=1;return new q(b,k,e,h)};var n=a("gl-buffer"),m=a("gl-vao"),f=a("./shaders").bg;a=q.prototype;a.draw=function(b,k,e,h,l,
c){for(var g=!1,d=0;3>d;++d)g=g||l[d];g&&(g=this.gl,g.enable(g.POLYGON_OFFSET_FILL),g.polygonOffset(1,2),this.shader.bind(),this.shader.uniforms={model:b,view:k,projection:e,bounds:h,enable:l,colors:c},this.vao.bind(),this.vao.draw(this.gl.TRIANGLES,36),this.vao.unbind(),g.disable(g.POLYGON_OFFSET_FILL))};a.dispose=function(){this.vao.dispose();this.buffer.dispose();this.shader.dispose()}},{"./shaders":254,"gl-buffer":258,"gl-vao":332}],252:[function(a,G,C){G.exports=function(r,t,w,x,y){n(b,t,r);
n(b,w,b);for(r=t=0;2>r;++r)for(h[2]=x[r][2],w=0;2>w;++w){h[1]=x[w][1];for(var A=0;2>A;++A){h[0]=x[A][0];for(var z=k[t],F=h,D=b,u=0;4>u;++u){z[u]=D[12+u];for(var B=0;3>B;++B)z[u]+=F[B]*D[4*B+u]}t+=1}}x=-1;for(r=0;8>r;++r){t=k[r][3];for(w=0;3>w;++w)e[r][w]=k[r][w]/t;y&&(e[r][2]*=-1);0>t&&(0>x?x=r:e[r][2]<e[x][2]&&(x=r))}if(0>x)for(r=x=0;3>r;++r){t=(r+2)%3;y=(r+1)%3;A=w=-1;for(z=0;2>z;++z)F=z<<r,D=F+(z<<t)+(1-z<<y),u=F+(1-z<<t)+(z<<y),0>f(e[F],e[D],e[u],l)||(z?w=1:A=1);if(!(0>w||0>A))for(z=0;2>z;++z){F=
z<<r;D=F+(z<<t)+(1-z<<y);u=F+(1-z<<t)+(z<<y);a:{F=[k[F],k[D],k[u],k[F+(1<<t)+(1<<y)]];for(u=0;u<c.length;++u)if(F=m.positive(F,c[u]),3>F.length){F=0;break a}u=F[0];D=u[0]/u[3];B=u[1]/u[3];var I=0;for(u=1;u+1<F.length;++u){var J=F[u],N=F[u+1];I+=Math.abs((J[0]/J[3]-D)*(N[1]/N[3]-B)-(J[1]/J[3]-B)*(N[0]/N[3]-D))}F=I}z?w=F:A=F}A>w&&(x|=1<<r)}t=7^x;z=-1;for(r=0;8>r;++r)r!==x&&r!==t&&(0>z?z=r:e[z][1]>e[r][1]&&(z=r));w=-1;for(r=0;3>r;++r)F=z^1<<r,F!==x&&F!==t&&(0>w&&(w=F),y=e[F],y[0]<e[w][0]&&(w=F));A=-1;
for(r=0;3>r;++r)F=z^1<<r,F!==x&&F!==t&&F!==w&&(0>A&&(A=F),y=e[F],y[0]>e[A][0]&&(A=F));y=g;y[0]=y[1]=y[2]=0;y[q.log2(w^z)]=z&w;y[q.log2(z^A)]=z&A;r=A^7;r===x||r===t?(r=w^7,y[q.log2(A^r)]=r&A):y[q.log2(w^r)]=r&w;y=d;for(r=0;3>r;++r)y[r]=x&1<<r?-1:1;return p};var q=a("bit-twiddle"),n=a("gl-mat4/multiply"),m=a("split-polygon"),f=a("robust-orientation"),b=Array(16),k=Array(8),e=Array(8),h=Array(3),l=[0,0,0];(function(){for(var r=0;8>r;++r)k[r]=[1,1,1,1],e[r]=[1,1,1]})();var c=[[0,0,1,0,0],[0,0,-1,1,0],
[0,-1,0,1,0],[0,1,0,1,0],[-1,0,0,1,0],[1,0,0,1,0]],g=[1,1,1],d=[0,0,0],p={cubeEdges:g,axis:d}},{"bit-twiddle":97,"gl-mat4/multiply":280,"robust-orientation":520,"split-polygon":538}],253:[function(a,G,C){function q(d){d[0]=d[1]=d[2]=0;return d}function n(d,p){d[0]=p[0];d[1]=p[1];d[2]=p[2];return d}function m(d,p,r,t,w,x,y,A){this.gl=d;this.vertBuffer=p;this.vao=r;this.shader=t;this.tickCount=w;this.tickOffset=x;this.gridCount=y;this.gridOffset=A}G.exports=function(d,p,r){var t=[];p=[0,0,0];var w=
[0,0,0],x=[0,0,0],y=[0,0,0];t.push(0,0,1,0,1,1,0,0,-1,0,0,-1,0,1,1,0,1,-1);for(var A=0;3>A;++A){for(var z=t.length/3|0,F=0;F<r[A].length;++F){var D=+r[A][F].x;t.push(D,0,1,D,1,1,D,0,-1,D,0,-1,D,1,1,D,1,-1)}D=t.length/3|0;p[A]=z;w[A]=D-z;z=t.length/3|0;for(F=0;F<r[A].length;++F)D=+r[A][F].x,t.push(D,0,1,D,1,1,D,0,-1,D,0,-1,D,1,1,D,1,-1);D=t.length/3|0;x[A]=z;y[A]=D-z}r=f(d,new Float32Array(t));t=b(d,[{buffer:r,type:d.FLOAT,size:3,stride:0,offset:0}]);A=k(d);A.attributes.position.location=0;return new m(d,
r,t,A,w,p,y,x)};var f=a("gl-buffer"),b=a("gl-vao"),k=a("./shaders").line,e=[0,0,0],h=[0,0,0],l=[0,0,0],c=[0,0,0],g=[1,1];a=m.prototype;a.bind=function(d,p,r){this.shader.bind();this.shader.uniforms.model=d;this.shader.uniforms.view=p;this.shader.uniforms.projection=r;g[0]=this.gl.drawingBufferWidth;g[1]=this.gl.drawingBufferHeight;this.shader.uniforms.screenShape=g;this.vao.bind()};a.unbind=function(){this.vao.unbind()};a.drawAxisLine=function(d,p,r,t,w){var x=q(h);this.shader.uniforms.majorAxis=
h;x[d]=p[1][d]-p[0][d];this.shader.uniforms.minorAxis=x;r=n(c,r);r[d]+=p[0][d];this.shader.uniforms.offset=r;this.shader.uniforms.lineWidth=w;this.shader.uniforms.color=t;p=q(l);p[(d+2)%3]=1;this.shader.uniforms.screenAxis=p;this.vao.draw(this.gl.TRIANGLES,6);p=q(l);p[(d+1)%3]=1;this.shader.uniforms.screenAxis=p;this.vao.draw(this.gl.TRIANGLES,6)};a.drawAxisTicks=function(d,p,r,t,w){if(this.tickCount[d]){var x=q(e);x[d]=1;this.shader.uniforms.majorAxis=x;this.shader.uniforms.offset=p;this.shader.uniforms.minorAxis=
r;this.shader.uniforms.color=t;this.shader.uniforms.lineWidth=w;p=q(l);p[d]=1;this.shader.uniforms.screenAxis=p;this.vao.draw(this.gl.TRIANGLES,this.tickCount[d],this.tickOffset[d])}};a.drawGrid=function(d,p,r,t,w,x){if(this.gridCount[d]){var y=q(h);y[p]=r[1][p]-r[0][p];this.shader.uniforms.minorAxis=y;t=n(c,t);t[p]+=r[0][p];this.shader.uniforms.offset=t;p=q(e);p[d]=1;this.shader.uniforms.majorAxis=p;p=q(l);p[d]=1;this.shader.uniforms.screenAxis=p;this.shader.uniforms.lineWidth=x;this.shader.uniforms.color=
w;this.vao.draw(this.gl.TRIANGLES,this.gridCount[d],this.gridOffset[d])}};a.drawZero=function(d,p,r,t,w,x){var y=q(h);this.shader.uniforms.majorAxis=y;y[d]=r[1][d]-r[0][d];this.shader.uniforms.minorAxis=y;t=n(c,t);t[d]+=r[0][d];this.shader.uniforms.offset=t;d=q(l);d[p]=1;this.shader.uniforms.screenAxis=d;this.shader.uniforms.lineWidth=x;this.shader.uniforms.color=w;this.vao.draw(this.gl.TRIANGLES,6)};a.dispose=function(){this.vao.dispose();this.vertBuffer.dispose();this.shader.dispose()}},{"./shaders":254,
"gl-buffer":258,"gl-vao":332}],254:[function(a,G,C){G=a("glslify");var q=a("gl-shader"),n=G(["precision highp float;\n#define GLSLIFY 1\n\nattribute vec3 position;\n\nuniform mat4 model, view, projection;\nuniform vec3 offset, majorAxis, minorAxis, screenAxis;\nuniform float lineWidth;\nuniform vec2 screenShape;\n\nvec3 project(vec3 p) {\n  vec4 pp \x3d projection * view * model * vec4(p, 1.0);\n  return pp.xyz / max(pp.w, 0.0001);\n}\n\nvoid main() {\n  vec3 major \x3d position.x * majorAxis;\n  vec3 minor \x3d position.y * minorAxis;\n\n  vec3 vPosition \x3d major + minor + offset;\n  vec3 pPosition \x3d project(vPosition);\n  vec3 offset \x3d project(vPosition + screenAxis * position.z);\n\n  vec2 screen \x3d normalize((offset - pPosition).xy * screenShape) / screenShape;\n\n  gl_Position \x3d vec4(pPosition + vec3(0.5 * screen * lineWidth, 0), 1.0);\n}\n"]),
m=G(["precision highp float;\n#define GLSLIFY 1\n\nuniform vec4 color;\nvoid main() {\n  gl_FragColor \x3d color;\n}"]);C.line=function(h){return q(h,n,m,null,[{name:"position",type:"vec3"}])};var f=G(["precision highp float;\n#define GLSLIFY 1\n\nattribute vec3 position;\n\nuniform mat4 model, view, projection;\nuniform vec3 offset, axis, alignDir, alignOpt;\nuniform float scale, angle, pixelScale;\nuniform vec2 resolution;\n\nvec3 project(vec3 p) {\n  vec4 pp \x3d projection * view * model * vec4(p, 1.0);\n  return pp.xyz / max(pp.w, 0.0001);\n}\n\nfloat computeViewAngle(vec3 a, vec3 b) {\n  vec3 A \x3d project(a);\n  vec3 B \x3d project(b);\n\n  return atan(\n    (B.y - A.y) * resolution.y,\n    (B.x - A.x) * resolution.x\n  );\n}\n\nconst float PI \x3d 3.141592;\nconst float TWO_PI \x3d 2.0 * PI;\nconst float HALF_PI \x3d 0.5 * PI;\nconst float ONE_AND_HALF_PI \x3d 1.5 * PI;\n\nint option \x3d int(floor(alignOpt.x + 0.001));\nfloat hv_ratio \x3d       alignOpt.y;\nbool enableAlign \x3d    (alignOpt.z !\x3d 0.0);\n\nfloat mod_angle(float a) {\n  return mod(a, PI);\n}\n\nfloat positive_angle(float a) {\n  return mod_angle((a \x3c 0.0) ?\n    a + TWO_PI :\n    a\n  );\n}\n\nfloat look_upwards(float a) {\n  float b \x3d positive_angle(a);\n  return ((b \x3e HALF_PI) \x26\x26 (b \x3c\x3d ONE_AND_HALF_PI)) ?\n    b - PI :\n    b;\n}\n\nfloat look_horizontal_or_vertical(float a, float ratio) {\n  // ratio controls the ratio between being horizontal to (vertical + horizontal)\n  // if ratio is set to 0.5 then it is 50%, 50%.\n  // when using a higher ratio e.g. 0.75 the result would\n  // likely be more horizontal than vertical.\n\n  float b \x3d positive_angle(a);\n\n  return\n    (b \x3c (      ratio) * HALF_PI) ? 0.0 :\n    (b \x3c (2.0 - ratio) * HALF_PI) ? -HALF_PI :\n    (b \x3c (2.0 + ratio) * HALF_PI) ? 0.0 :\n    (b \x3c (4.0 - ratio) * HALF_PI) ? HALF_PI :\n                                    0.0;\n}\n\nfloat roundTo(float a, float b) {\n  return float(b * floor((a + 0.5 * b) / b));\n}\n\nfloat look_round_n_directions(float a, int n) {\n  float b \x3d positive_angle(a);\n  float div \x3d TWO_PI / float(n);\n  float c \x3d roundTo(b, div);\n  return look_upwards(c);\n}\n\nfloat applyAlignOption(float rawAngle, float delta) {\n  return\n    (option \x3e  2) ? look_round_n_directions(rawAngle + delta, option) :       // option 3-n: round to n directions\n    (option \x3d\x3d 2) ? look_horizontal_or_vertical(rawAngle + delta, hv_ratio) : // horizontal or vertical\n    (option \x3d\x3d 1) ? rawAngle + delta :       // use free angle, and flip to align with one direction of the axis\n    (option \x3d\x3d 0) ? look_upwards(rawAngle) : // use free angle, and stay upwards\n    (option \x3d\x3d-1) ? 0.0 :                    // useful for backward compatibility, all texts remains horizontal\n                    rawAngle;                // otherwise return back raw input angle\n}\n\nbool isAxisTitle \x3d (axis.x \x3d\x3d 0.0) \x26\x26\n                   (axis.y \x3d\x3d 0.0) \x26\x26\n                   (axis.z \x3d\x3d 0.0);\n\nvoid main() {\n  //Compute world offset\n  float axisDistance \x3d position.z;\n  vec3 dataPosition \x3d axisDistance * axis + offset;\n\n  float beta \x3d angle; // i.e. user defined attributes for each tick\n\n  float axisAngle;\n  float clipAngle;\n  float flip;\n\n  if (enableAlign) {\n    axisAngle \x3d (isAxisTitle) ? HALF_PI :\n                      computeViewAngle(dataPosition, dataPosition + axis);\n    clipAngle \x3d computeViewAngle(dataPosition, dataPosition + alignDir);\n\n    axisAngle +\x3d (sin(axisAngle) \x3c 0.0) ? PI : 0.0;\n    clipAngle +\x3d (sin(clipAngle) \x3c 0.0) ? PI : 0.0;\n\n    flip \x3d (dot(vec2(cos(axisAngle), sin(axisAngle)),\n                vec2(sin(clipAngle),-cos(clipAngle))) \x3e 0.0) ? 1.0 : 0.0;\n\n    beta +\x3d applyAlignOption(clipAngle, flip * PI);\n  }\n\n  //Compute plane offset\n  vec2 planeCoord \x3d position.xy * pixelScale;\n\n  mat2 planeXform \x3d scale * mat2(\n     cos(beta), sin(beta),\n    -sin(beta), cos(beta)\n  );\n\n  vec2 viewOffset \x3d 2.0 * planeXform * planeCoord / resolution;\n\n  //Compute clip position\n  vec3 clipPosition \x3d project(dataPosition);\n\n  //Apply text offset in clip coordinates\n  clipPosition +\x3d vec3(viewOffset, 0.0);\n\n  //Done\n  gl_Position \x3d vec4(clipPosition, 1.0);\n}"]),
b=G(["precision highp float;\n#define GLSLIFY 1\n\nuniform vec4 color;\nvoid main() {\n  gl_FragColor \x3d color;\n}"]);C.text=function(h){return q(h,f,b,null,[{name:"position",type:"vec3"}])};var k=G(["precision highp float;\n#define GLSLIFY 1\n\nattribute vec3 position;\nattribute vec3 normal;\n\nuniform mat4 model, view, projection;\nuniform vec3 enable;\nuniform vec3 bounds[2];\n\nvarying vec3 colorChannel;\n\nvoid main() {\n\n  vec3 signAxis \x3d sign(bounds[1] - bounds[0]);\n\n  vec3 realNormal \x3d signAxis * normal;\n\n  if(dot(realNormal, enable) \x3e 0.0) {\n    vec3 minRange \x3d min(bounds[0], bounds[1]);\n    vec3 maxRange \x3d max(bounds[0], bounds[1]);\n    vec3 nPosition \x3d mix(minRange, maxRange, 0.5 * (position + 1.0));\n    gl_Position \x3d projection * view * model * vec4(nPosition, 1.0);\n  } else {\n    gl_Position \x3d vec4(0,0,0,0);\n  }\n\n  colorChannel \x3d abs(realNormal);\n}"]),
e=G(["precision highp float;\n#define GLSLIFY 1\n\nuniform vec4 colors[3];\n\nvarying vec3 colorChannel;\n\nvoid main() {\n  gl_FragColor \x3d colorChannel.x * colors[0] +\n                 colorChannel.y * colors[1] +\n                 colorChannel.z * colors[2];\n}"]);C.bg=function(h){return q(h,k,e,null,[{name:"position",type:"vec3"},{name:"normal",type:"vec3"}])}},{"gl-shader":312,glslify:413}],255:[function(a,G,C){(function(q){function n(l,c,g,d){this.gl=l;this.shader=c;this.buffer=g;this.vao=
d;this.tickOffset=this.tickCount=this.labelOffset=this.labelCount=null}G.exports=function(l,c,g,d,p,r){var t=m(l),w=f(l,[{buffer:t,size:3}]),x=k(l);x.attributes.position.location=0;l=new n(l,x,t,w);l.update(c,g,d,p,r);return l};var m=a("gl-buffer"),f=a("gl-vao"),b=a("vectorize-text"),k=a("./shaders").text;q=window||q.global||{};var e=q.__TEXT_CACHE||{};q.__TEXT_CACHE={};q=n.prototype;var h=[0,0];q.bind=function(l,c,g,d){this.vao.bind();this.shader.bind();var p=this.shader.uniforms;p.model=l;p.view=
c;p.projection=g;p.pixelScale=d;h[0]=this.gl.drawingBufferWidth;h[1]=this.gl.drawingBufferHeight;this.shader.uniforms.resolution=h};q.unbind=function(){this.vao.unbind()};q.update=function(l,c,g,d,p){function r(u,B,I,J,N,M){var E=e[I];E||(E=e[I]={});var L=E[B];if(!L){L=E;I={triangles:!0,font:I,textAlign:"center",textBaseline:"middle",lineSpacing:N,styletags:M};try{var Q=b(B,I)}catch(S){console.warn('error vectorizing text:"'+B+'" error:',S),Q={cells:[],positions:[]}}L=L[B]=Q}B=(J||12)/12;J=L.positions;
L=L.cells;Q=0;for(I=L.length;Q<I;++Q)for(N=L[Q],M=2;0<=M;--M)E=J[N[M]],t.push(B*E[0],-B*E[1],u)}for(var t=[],w=[0,0,0],x=[0,0,0],y=[0,0,0],A=[0,0,0],z={breaklines:!0,bolds:!0,italics:!0,subscripts:!0,superscripts:!0},F=0;3>F;++F){y[F]=t.length/3|0;r(.5*(l[0][F]+l[1][F]),c[F],g[F],12,1.25,z);A[F]=(t.length/3|0)-y[F];w[F]=t.length/3|0;for(var D=0;D<d[F].length;++D)d[F][D].text&&r(d[F][D].x,d[F][D].text,d[F][D].font||p,d[F][D].fontSize||12,1.25,z);x[F]=(t.length/3|0)-w[F]}this.buffer.update(t);this.tickOffset=
w;this.tickCount=x;this.labelOffset=y;this.labelCount=A};q.drawTicks=function(l,c,g,d,p,r,t,w){this.tickCount[l]&&(this.shader.uniforms.axis=r,this.shader.uniforms.color=p,this.shader.uniforms.angle=g,this.shader.uniforms.scale=c,this.shader.uniforms.offset=d,this.shader.uniforms.alignDir=t,this.shader.uniforms.alignOpt=w,this.vao.draw(this.gl.TRIANGLES,this.tickCount[l],this.tickOffset[l]))};q.drawLabel=function(l,c,g,d,p,r,t,w){this.labelCount[l]&&(this.shader.uniforms.axis=r,this.shader.uniforms.color=
p,this.shader.uniforms.angle=g,this.shader.uniforms.scale=c,this.shader.uniforms.offset=d,this.shader.uniforms.alignDir=t,this.shader.uniforms.alignOpt=w,this.vao.draw(this.gl.TRIANGLES,this.labelCount[l],this.labelOffset[l]))};q.dispose=function(){this.shader.dispose();this.vao.dispose();this.buffer.dispose()}}).call(this,a("_process"))},{"./shaders":254,_process:500,"gl-buffer":258,"gl-vao":332,"vectorize-text":572}],256:[function(a,G,C){function q(n,m){var f=n+"",b=f.indexOf("."),k=0;0<=b&&(k=
f.length-b-1);f=Math.pow(10,k);n=Math.round(n*m*f);m=n+"";if(0<=m.indexOf("e"))return m;m=n/f;f=n%f;0>n?(m=-Math.ceil(m)|0,f=-f|0):(m=Math.floor(m)|0,f|=0);m=""+m;0>n&&(m="-"+m);if(k){for(f=""+f;f.length<k;)f="0"+f;return m+"."+f}return m}C.create=function(n,m){for(var f=[],b=0;3>b;++b){for(var k=[],e=0;e*m[b]<=n[1][b];++e)k.push({x:e*m[b],text:q(m[b],e)});for(e=-1;e*m[b]>=n[0][b];--e)k.push({x:e*m[b],text:q(m[b],e)});f.push(k)}return f};C.equal=function(n,m){for(var f=0;3>f;++f){if(n[f].length!==
m[f].length)return!1;for(var b=0;b<n[f].length;++b){var k=n[f][b],e=m[f][b];if(k.x!==e.x||k.text!==e.text||k.font!==e.font||k.fontColor!==e.fontColor||k.fontSize!==e.fontSize||k.dx!==e.dx||k.dy!==e.dy)return!1}}return!0}},{}],257:[function(a,G,C){function q(r,t,w){this.lo=r;this.hi=t;this.pixelsPerDataUnit=w}G.exports=function(r,t,w,x,y){var A=t.model||h,z=t.view||h,F=t.projection||h;t=t._ortho||!1;r=r.bounds;y=y||f(A,z,F,r,t);y=y.axis;b(l,z,A);b(l,F,l);A=d;for(z=0;3>z;++z)A[z].lo=Infinity,A[z].hi=
-Infinity,A[z].pixelsPerDataUnit=Infinity;F=n(k(l,l));k(l,l);for(var D=0;3>D;++D){var u=(D+1)%3,B=(D+2)%3,I=p;z=0;a:for(;2>z;++z){var J=[];if(0>y[D]!==!!z){I[D]=r[z][D];for(var N=0;2>N;++N){I[u]=r[N^z][u];for(var M=0;2>M;++M)I[B]=r[M^N^z][B],J.push(I.slice())}for(N=M=t?5:4;N===M;++N){if(0===J.length)continue a;J=m.positive(J,F[N])}for(N=0;N<J.length;++N){B=J[N];M=p;var E=l;for(var L=B,Q=w,S=x,R=0;3>R;++R){for(var O=c,T=g,V=0;3>V;++V)T[V]=O[V]=L[V];T[3]=O[3]=1;T[R]+=1;e(T,T,E);0>T[3]&&(M[R]=Infinity);
--O[R];e(O,O,E);0>O[3]&&(M[R]=Infinity);V=(O[0]/O[3]-T[0]/T[3])*Q;O=(O[1]/O[3]-T[1]/T[3])*S;M[R]=.25*Math.sqrt(V*V+O*O)}E=M;for(M=0;3>M;++M)A[M].lo=Math.min(A[M].lo,B[M]),A[M].hi=Math.max(A[M].hi,B[M]),M!==D&&(A[M].pixelsPerDataUnit=Math.min(A[M].pixelsPerDataUnit,Math.abs(E[M])))}}}}return A};var n=a("extract-frustum-planes"),m=a("split-polygon"),f=a("./lib/cube.js"),b=a("gl-mat4/multiply"),k=a("gl-mat4/transpose"),e=a("gl-vec4/transformMat4"),h=new Float32Array([1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]),
l=new Float32Array(16),c=[0,0,0,1],g=[0,0,0,1],d=[new q(Infinity,-Infinity,Infinity),new q(Infinity,-Infinity,Infinity),new q(Infinity,-Infinity,Infinity)],p=[0,0,0]},{"./lib/cube.js":252,"extract-frustum-planes":240,"gl-mat4/multiply":280,"gl-mat4/transpose":289,"gl-vec4/transformMat4":403,"split-polygon":538}],258:[function(a,G,C){function q(h,l,c,g,d){this.gl=h;this.type=l;this.handle=c;this.length=g;this.usage=d}function n(h,l,c,g,d,p){var r=d.length*d.BYTES_PER_ELEMENT;if(0>p)return h.bufferData(l,
d,g),r;if(r+p>c)throw Error("gl-buffer: If resizing buffer, must not specify offset");h.bufferSubData(l,p,d);return c}function m(h,l){l=f.malloc(h.length,l);for(var c=h.length,g=0;g<c;++g)l[g]=h[g];return l}var f=a("typedarray-pool"),b=a("ndarray-ops"),k=a("ndarray"),e="uint8 uint8_clamped uint16 uint32 int8 int16 int32 float32".split(" ");a=q.prototype;a.bind=function(){this.gl.bindBuffer(this.type,this.handle)};a.unbind=function(){this.gl.bindBuffer(this.type,null)};a.dispose=function(){this.gl.deleteBuffer(this.handle)};
a.update=function(h,l){"number"!==typeof l&&(l=-1);this.bind();if("object"===typeof h&&"undefined"!==typeof h.shape){var c=h.dtype;0>e.indexOf(c)&&(c="float32");this.type===this.gl.ELEMENT_ARRAY_BUFFER&&(c=gl.getExtension("OES_element_index_uint")&&"uint16"!==c?"uint32":"uint16");var g;if(g=c===h.dtype)a:{g=h.stride;for(var d=1,p=g.length-1;0<=p;--p){if(g[p]!==d){g=!1;break a}d*=h.shape[p]}g=!0}g?this.length=0===h.offset&&h.data.length===h.shape[0]?n(this.gl,this.type,this.length,this.usage,h.data,
l):n(this.gl,this.type,this.length,this.usage,h.data.subarray(h.offset,h.shape[0]),l):(c=f.malloc(h.size,c),g=k(c,h.shape),b.assign(g,h),this.length=0>l?n(this.gl,this.type,this.length,this.usage,c,l):n(this.gl,this.type,this.length,this.usage,c.subarray(0,h.size),l),f.free(c))}else if(Array.isArray(h))c=this.type===this.gl.ELEMENT_ARRAY_BUFFER?m(h,"uint16"):m(h,"float32"),this.length=0>l?n(this.gl,this.type,this.length,this.usage,c,l):n(this.gl,this.type,this.length,this.usage,c.subarray(0,h.length),
l),f.free(c);else if("object"===typeof h&&"number"===typeof h.length)this.length=n(this.gl,this.type,this.length,this.usage,h,l);else if("number"===typeof h||void 0===h){if(0<=l)throw Error("gl-buffer: Cannot specify offset when resizing buffer");h|=0;0>=h&&(h=1);this.gl.bufferData(this.type,h|0,this.usage);this.length=h}else throw Error("gl-buffer: Invalid data type");};G.exports=function(h,l,c,g){c=c||h.ARRAY_BUFFER;g=g||h.DYNAMIC_DRAW;if(c!==h.ARRAY_BUFFER&&c!==h.ELEMENT_ARRAY_BUFFER)throw Error("gl-buffer: Invalid type for webgl buffer, must be either gl.ARRAY_BUFFER or gl.ELEMENT_ARRAY_BUFFER");
if(g!==h.DYNAMIC_DRAW&&g!==h.STATIC_DRAW&&g!==h.STREAM_DRAW)throw Error("gl-buffer: Invalid usage for buffer, must be either gl.DYNAMIC_DRAW, gl.STATIC_DRAW or gl.STREAM_DRAW");var d=h.createBuffer();h=new q(h,c,d,0,g);h.update(l);return h}},{ndarray:469,"ndarray-ops":464,"typedarray-pool":567}],259:[function(a,G,C){var q=a("gl-vec3");G.exports=function(m,f){var b=m.positions,k=m.vectors,e={positions:[],vertexIntensity:[],vertexIntensityBounds:m.vertexIntensityBounds,vectors:[],cells:[],coneOffset:m.coneOffset,
colormap:m.colormap};if(0===m.positions.length)return f&&(f[0]=[0,0,0],f[1]=[0,0,0]),e;for(var h=0,l=Infinity,c=-Infinity,g=Infinity,d=-Infinity,p=Infinity,r=-Infinity,t=null,w=null,x=[],y=Infinity,A=!1,z=0;z<b.length;z++){var F=b[z];l=Math.min(F[0],l);c=Math.max(F[0],c);g=Math.min(F[1],g);d=Math.max(F[1],d);p=Math.min(F[2],p);r=Math.max(F[2],r);var D=k[z];q.length(D)>h&&(h=q.length(D));z&&((A=2*q.distance(t,F)/(q.length(w)+q.length(D)))?(y=Math.min(y,A),A=!1):A=!0);A||(t=F,w=D);x.push(D)}z=[l,g,
p];F=[c,d,r];f&&(f[0]=z,f[1]=F);0===h&&(h=1);f=1/h;isFinite(y)||(y=1);e.vectorScale=y;z=m.coneSize||.5;m.absoluteConeSize&&(z=m.absoluteConeSize*f);e.coneScale=z;for(m=z=0;z<b.length;z++)for(F=b[z],y=F[0],h=F[1],F=F[2],c=x[z],d=q.length(c)*f,r=0;8>r;r++)e.positions.push([y,h,F,m++]),e.positions.push([y,h,F,m++]),e.positions.push([y,h,F,m++]),e.positions.push([y,h,F,m++]),e.positions.push([y,h,F,m++]),e.positions.push([y,h,F,m++]),e.vectors.push(c),e.vectors.push(c),e.vectors.push(c),e.vectors.push(c),
e.vectors.push(c),e.vectors.push(c),e.vertexIntensity.push(d,d,d),e.vertexIntensity.push(d,d,d),k=e.positions.length,e.cells.push([k-6,k-5,k-4],[k-3,k-2,k-1]);return e};var n=a("./lib/shaders");G.exports.createMesh=a("./create_mesh");G.exports.createConeMesh=function(m,f){return G.exports.createMesh(m,f,{shaders:n,traceType:"cone"})}},{"./create_mesh":260,"./lib/shaders":261,"gl-vec3":351}],260:[function(a,G,C){function q(d,p,r,t,w,x,y,A,z,F,D){this.gl=d;this.pixelRatio=1;this.cells=[];this.positions=
[];this.intensity=[];this.texture=p;this.dirty=!0;this.triShader=r;this.pickShader=t;this.trianglePositions=w;this.triangleVectors=x;this.triangleColors=A;this.triangleUVs=z;this.triangleIds=y;this.triangleVAO=F;this.triangleCount=0;this.pickId=1;this.bounds=[[Infinity,Infinity,Infinity],[-Infinity,-Infinity,-Infinity]];this.clipBounds=[[-Infinity,-Infinity,-Infinity],[Infinity,Infinity,Infinity]];this.lightPosition=[1E5,1E5,0];this.diffuseLight=this.ambientLight=.8;this.specularLight=2;this.roughness=
.5;this.fresnel=1.5;this.opacity=1;this.traceType=D;this.tubeScale=1;this.coneScale=2;this.vectorScale=1;this.coneOffset=.25;this._projection=this._view=this._model=g;this._resolution=[1,1]}function n(d){d=c({colormap:d,nshades:256,format:"rgba"});for(var p=new Uint8Array(1024),r=0;256>r;++r){for(var t=d[r],w=0;3>w;++w)p[4*r+w]=t[w];p[4*r+3]=255*t[3]}return l(p,[256,256,4],[4,0,1])}var m=a("gl-shader"),f=a("gl-buffer"),b=a("gl-vao"),k=a("gl-texture2d"),e=a("gl-mat4/multiply"),h=a("gl-mat4/invert"),
l=a("ndarray"),c=a("colormap"),g=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1];a=q.prototype;a.isOpaque=function(){return 1<=this.opacity};a.isTransparent=function(){return 1>this.opacity};a.pickSlots=1;a.setPickBase=function(d){this.pickId=d};a.update=function(d){d=d||{};var p=this.gl;this.dirty=!0;"lightPosition"in d&&(this.lightPosition=d.lightPosition);"opacity"in d&&(this.opacity=d.opacity);"ambient"in d&&(this.ambientLight=d.ambient);"diffuse"in d&&(this.diffuseLight=d.diffuse);"specular"in d&&(this.specularLight=
d.specular);"roughness"in d&&(this.roughness=d.roughness);"fresnel"in d&&(this.fresnel=d.fresnel);void 0!==d.tubeScale&&(this.tubeScale=d.tubeScale);void 0!==d.vectorScale&&(this.vectorScale=d.vectorScale);void 0!==d.coneScale&&(this.coneScale=d.coneScale);void 0!==d.coneOffset&&(this.coneOffset=d.coneOffset);d.colormap&&(this.texture.shape=[256,256],this.texture.minFilter=p.LINEAR_MIPMAP_LINEAR,this.texture.magFilter=p.LINEAR,this.texture.setPixels(n(d.colormap)),this.texture.generateMipmap());p=
d.cells;var r=d.positions,t=d.vectors;if(r&&p&&t){var w=[],x=[],y=[],A=[],z=[];this.cells=p;this.positions=r;this.vectors=t;var F=d.meshColor||[1,1,1,1],D=d.vertexIntensity,u=Infinity,B=-Infinity;if(D)if(d.vertexIntensityBounds)u=+d.vertexIntensityBounds[0],B=+d.vertexIntensityBounds[1];else for(d=0;d<D.length;++d){var I=D[d];u=Math.min(u,I);B=Math.max(B,I)}else for(d=0;d<r.length;++d)I=r[d][2],u=Math.min(u,I),B=Math.max(B,I);if(D)this.intensity=D;else{d=r.length;I=Array(d);for(var J=0;J<d;++J)I[J]=
r[J][2];this.intensity=I}this.bounds=[[Infinity,Infinity,Infinity],[-Infinity,-Infinity,-Infinity]];for(d=0;d<r.length;++d){var N=r[d];for(I=0;3>I;++I)!isNaN(N[I])&&isFinite(N[I])&&(this.bounds[0][I]=Math.min(this.bounds[0][I],N[I]),this.bounds[1][I]=Math.max(this.bounds[1][I],N[I]))}d=J=0;a:for(;d<p.length;++d){var M=p[d];switch(M.length){case 3:for(I=0;3>I;++I){var E=M[I];N=r[E];for(E=0;3>E;++E)if(isNaN(N[E])||!isFinite(N[E]))continue a}for(I=0;3>I;++I){E=M[2-I];N=r[E];w.push(N[0],N[1],N[2],N[3]);
var L=t[E];x.push(L[0],L[1],L[2],L[3]||0);L=F;3===L.length?y.push(L[0],L[1],L[2],1):y.push(L[0],L[1],L[2],L[3]);N=D?[(D[E]-u)/(B-u),0]:[(N[2]-u)/(B-u),0];A.push(N[0],N[1]);z.push(d)}J+=1}}this.triangleCount=J;this.trianglePositions.update(w);this.triangleVectors.update(x);this.triangleColors.update(y);this.triangleUVs.update(A);this.triangleIds.update(new Uint32Array(z))}};a.drawTransparent=a.draw=function(d){d=d||{};var p=this.gl,r=d.model||g,t=d.view||g,w=d.projection||g,x=[[-1E6,-1E6,-1E6],[1E6,
1E6,1E6]];for(d=0;3>d;++d)x[0][d]=Math.max(x[0][d],this.clipBounds[0][d]),x[1][d]=Math.min(x[1][d],this.clipBounds[1][d]);r={model:r,view:t,projection:w,inverseModel:g.slice(),clipBounds:x,kambient:this.ambientLight,kdiffuse:this.diffuseLight,kspecular:this.specularLight,roughness:this.roughness,fresnel:this.fresnel,eyePosition:[0,0,0],lightPosition:[0,0,0],opacity:this.opacity,tubeScale:this.tubeScale,vectorScale:this.vectorScale,coneScale:this.coneScale,coneOffset:this.coneOffset,texture:0};r.inverseModel=
h(r.inverseModel,r.model);p.disable(p.CULL_FACE);this.texture.bind(0);t=Array(16);e(t,r.view,r.model);e(t,r.projection,t);h(t,t);for(d=0;3>d;++d)r.eyePosition[d]=t[12+d]/t[15];w=t[15];for(d=0;3>d;++d)w+=this.lightPosition[d]*t[4*d+3];for(d=0;3>d;++d){x=t[12+d];for(var y=0;3>y;++y)x+=t[4*y+d]*this.lightPosition[y];r.lightPosition[d]=x/w}0<this.triangleCount&&(d=this.triShader,d.bind(),d.uniforms=r,this.triangleVAO.bind(),p.drawArrays(p.TRIANGLES,0,3*this.triangleCount),this.triangleVAO.unbind())};
a.drawPick=function(d){d=d||{};var p=this.gl,r=d.model||g,t=d.view||g;d=d.projection||g;for(var w=[[-1E6,-1E6,-1E6],[1E6,1E6,1E6]],x=0;3>x;++x)w[0][x]=Math.max(w[0][x],this.clipBounds[0][x]),w[1][x]=Math.min(w[1][x],this.clipBounds[1][x]);this._model=[].slice.call(r);this._view=[].slice.call(t);this._projection=[].slice.call(d);this._resolution=[p.drawingBufferWidth,p.drawingBufferHeight];r={model:r,view:t,projection:d,clipBounds:w,tubeScale:this.tubeScale,vectorScale:this.vectorScale,coneScale:this.coneScale,
coneOffset:this.coneOffset,pickId:this.pickId/255};t=this.pickShader;t.bind();t.uniforms=r;0<this.triangleCount&&(this.triangleVAO.bind(),p.drawArrays(p.TRIANGLES,0,3*this.triangleCount),this.triangleVAO.unbind())};a.pick=function(d){if(!d||d.id!==this.pickId)return null;d=d.value[0]+256*d.value[1]+65536*d.value[2];var p=this.cells[d],r=this.positions[p[1]].slice(0,3);r={position:r,dataCoordinate:r,index:Math.floor(p[1]/48)};"cone"===this.traceType?r.index=Math.floor(p[1]/48):"streamtube"===this.traceType&&
(r.intensity=this.intensity[p[1]],r.velocity=this.vectors[p[1]].slice(0,3),r.divergence=this.vectors[p[1]][3],r.index=d);return r};a.dispose=function(){this.texture.dispose();this.triShader.dispose();this.pickShader.dispose();this.triangleVAO.dispose();this.trianglePositions.dispose();this.triangleVectors.dispose();this.triangleColors.dispose();this.triangleUVs.dispose();this.triangleIds.dispose()};G.exports=function(d,p,r){var t=r.shaders;1===arguments.length&&(p=d,d=p.gl);var w=m(d,t.meshShader.vertex,
t.meshShader.fragment,null,t.meshShader.attributes);w.attributes.position.location=0;w.attributes.color.location=2;w.attributes.uv.location=3;w.attributes.vector.location=4;t=m(d,t.pickShader.vertex,t.pickShader.fragment,null,t.pickShader.attributes);t.attributes.position.location=0;t.attributes.id.location=1;t.attributes.vector.location=4;var x=k(d,l(new Uint8Array([255,255,255,255]),[1,1,4]));x.generateMipmap();x.minFilter=d.LINEAR_MIPMAP_LINEAR;x.magFilter=d.LINEAR;var y=f(d),A=f(d),z=f(d),F=f(d),
D=f(d),u=b(d,[{buffer:y,type:d.FLOAT,size:4},{buffer:D,type:d.UNSIGNED_BYTE,size:4,normalized:!0},{buffer:z,type:d.FLOAT,size:4},{buffer:F,type:d.FLOAT,size:2},{buffer:A,type:d.FLOAT,size:4}]);w=new q(d,x,w,t,y,A,D,z,F,u,r.traceType||"cone");w.update(p);return w}},{colormap:131,"gl-buffer":258,"gl-mat4/invert":278,"gl-mat4/multiply":280,"gl-shader":312,"gl-texture2d":327,"gl-vao":332,ndarray:469}],261:[function(a,G,C){var q=a("glslify");a=q(["precision highp float;\n\nprecision highp float;\n#define GLSLIFY 1\n\nvec3 getOrthogonalVector(vec3 v) {\n  // Return up-vector for only-z vector.\n  // Return ax + by + cz \x3d 0, a point that lies on the plane that has v as a normal and that isn't (0,0,0).\n  // From the above if-statement we have ||a|| \x3e 0  U  ||b|| \x3e 0.\n  // Assign z \x3d 0, x \x3d -b, y \x3d a:\n  // a*-b + b*a + c*0 \x3d -ba + ba + 0 \x3d 0\n  if (v.x*v.x \x3e v.z*v.z || v.y*v.y \x3e v.z*v.z) {\n    return normalize(vec3(-v.y, v.x, 0.0));\n  } else {\n    return normalize(vec3(0.0, v.z, -v.y));\n  }\n}\n\n// Calculate the cone vertex and normal at the given index.\n//\n// The returned vertex is for a cone with its top at origin and height of 1.0,\n// pointing in the direction of the vector attribute.\n//\n// Each cone is made up of a top vertex, a center base vertex and base perimeter vertices.\n// These vertices are used to make up the triangles of the cone by the following:\n//   segment + 0 top vertex\n//   segment + 1 perimeter vertex a+1\n//   segment + 2 perimeter vertex a\n//   segment + 3 center base vertex\n//   segment + 4 perimeter vertex a\n//   segment + 5 perimeter vertex a+1\n// Where segment is the number of the radial segment * 6 and a is the angle at that radial segment.\n// To go from index to segment, floor(index / 6)\n// To go from segment to angle, 2*pi * (segment/segmentCount)\n// To go from index to segment index, index - (segment*6)\n//\nvec3 getConePosition(vec3 d, float rawIndex, float coneOffset, out vec3 normal) {\n\n  const float segmentCount \x3d 8.0;\n\n  float index \x3d rawIndex - floor(rawIndex /\n    (segmentCount * 6.0)) *\n    (segmentCount * 6.0);\n\n  float segment \x3d floor(0.001 + index/6.0);\n  float segmentIndex \x3d index - (segment*6.0);\n\n  normal \x3d -normalize(d);\n\n  if (segmentIndex \x3e 2.99 \x26\x26 segmentIndex \x3c 3.01) {\n    return mix(vec3(0.0), -d, coneOffset);\n  }\n\n  float nextAngle \x3d (\n    (segmentIndex \x3e 0.99 \x26\x26  segmentIndex \x3c 1.01) ||\n    (segmentIndex \x3e 4.99 \x26\x26  segmentIndex \x3c 5.01)\n  ) ? 1.0 : 0.0;\n  float angle \x3d 2.0 * 3.14159 * ((segment + nextAngle) / segmentCount);\n\n  vec3 v1 \x3d mix(d, vec3(0.0), coneOffset);\n  vec3 v2 \x3d v1 - d;\n\n  vec3 u \x3d getOrthogonalVector(d);\n  vec3 v \x3d normalize(cross(u, d));\n\n  vec3 x \x3d u * cos(angle) * length(d)*0.25;\n  vec3 y \x3d v * sin(angle) * length(d)*0.25;\n  vec3 v3 \x3d v2 + x + y;\n  if (segmentIndex \x3c 3.0) {\n    vec3 tx \x3d u * sin(angle);\n    vec3 ty \x3d v * -cos(angle);\n    vec3 tangent \x3d tx + ty;\n    normal \x3d normalize(cross(v3 - v1, tangent));\n  }\n\n  if (segmentIndex \x3d\x3d 0.0) {\n    return mix(d, vec3(0.0), coneOffset);\n  }\n  return v3;\n}\n\nattribute vec3 vector;\nattribute vec4 color, position;\nattribute vec2 uv;\n\nuniform float vectorScale, coneScale, coneOffset;\nuniform mat4 model, view, projection, inverseModel;\nuniform vec3 eyePosition, lightPosition;\n\nvarying vec3 f_normal, f_lightDirection, f_eyeDirection, f_data, f_position;\nvarying vec4 f_color;\nvarying vec2 f_uv;\n\nvoid main() {\n  // Scale the vector magnitude to stay constant with\n  // model \x26 view changes.\n  vec3 normal;\n  vec3 XYZ \x3d getConePosition(mat3(model) * ((vectorScale * coneScale) * vector), position.w, coneOffset, normal);\n  vec4 conePosition \x3d model * vec4(position.xyz, 1.0) + vec4(XYZ, 0.0);\n\n  //Lighting geometry parameters\n  vec4 cameraCoordinate \x3d view * conePosition;\n  cameraCoordinate.xyz /\x3d cameraCoordinate.w;\n  f_lightDirection \x3d lightPosition - cameraCoordinate.xyz;\n  f_eyeDirection   \x3d eyePosition - cameraCoordinate.xyz;\n  f_normal \x3d normalize((vec4(normal, 0.0) * inverseModel).xyz);\n\n  // vec4 m_position  \x3d model * vec4(conePosition, 1.0);\n  vec4 t_position  \x3d view * conePosition;\n  gl_Position      \x3d projection * t_position;\n\n  f_color          \x3d color;\n  f_data           \x3d conePosition.xyz;\n  f_position       \x3d position.xyz;\n  f_uv             \x3d uv;\n}\n"]);
G=q(["#extension GL_OES_standard_derivatives : enable\n\nprecision highp float;\n#define GLSLIFY 1\n\nfloat beckmannDistribution(float x, float roughness) {\n  float NdotH \x3d max(x, 0.0001);\n  float cos2Alpha \x3d NdotH * NdotH;\n  float tan2Alpha \x3d (cos2Alpha - 1.0) / cos2Alpha;\n  float roughness2 \x3d roughness * roughness;\n  float denom \x3d 3.141592653589793 * roughness2 * cos2Alpha * cos2Alpha;\n  return exp(tan2Alpha / roughness2) / denom;\n}\n\nfloat cookTorranceSpecular(\n  vec3 lightDirection,\n  vec3 viewDirection,\n  vec3 surfaceNormal,\n  float roughness,\n  float fresnel) {\n\n  float VdotN \x3d max(dot(viewDirection, surfaceNormal), 0.0);\n  float LdotN \x3d max(dot(lightDirection, surfaceNormal), 0.0);\n\n  //Half angle vector\n  vec3 H \x3d normalize(lightDirection + viewDirection);\n\n  //Geometric term\n  float NdotH \x3d max(dot(surfaceNormal, H), 0.0);\n  float VdotH \x3d max(dot(viewDirection, H), 0.000001);\n  float LdotH \x3d max(dot(lightDirection, H), 0.000001);\n  float G1 \x3d (2.0 * NdotH * VdotN) / VdotH;\n  float G2 \x3d (2.0 * NdotH * LdotN) / LdotH;\n  float G \x3d min(1.0, min(G1, G2));\n  \n  //Distribution term\n  float D \x3d beckmannDistribution(NdotH, roughness);\n\n  //Fresnel term\n  float F \x3d pow(1.0 - VdotN, fresnel);\n\n  //Multiply terms and done\n  return  G * F * D / max(3.14159265 * VdotN, 0.000001);\n}\n\nbool outOfRange(float a, float b, float p) {\n  return ((p \x3e max(a, b)) || \n          (p \x3c min(a, b)));\n}\n\nbool outOfRange(vec2 a, vec2 b, vec2 p) {\n  return (outOfRange(a.x, b.x, p.x) ||\n          outOfRange(a.y, b.y, p.y));\n}\n\nbool outOfRange(vec3 a, vec3 b, vec3 p) {\n  return (outOfRange(a.x, b.x, p.x) ||\n          outOfRange(a.y, b.y, p.y) ||\n          outOfRange(a.z, b.z, p.z));\n}\n\nbool outOfRange(vec4 a, vec4 b, vec4 p) {\n  return outOfRange(a.xyz, b.xyz, p.xyz);\n}\n\nuniform vec3 clipBounds[2];\nuniform float roughness, fresnel, kambient, kdiffuse, kspecular, opacity;\nuniform sampler2D texture;\n\nvarying vec3 f_normal, f_lightDirection, f_eyeDirection, f_data, f_position;\nvarying vec4 f_color;\nvarying vec2 f_uv;\n\nvoid main() {\n  if (outOfRange(clipBounds[0], clipBounds[1], f_position)) discard;\n  vec3 N \x3d normalize(f_normal);\n  vec3 L \x3d normalize(f_lightDirection);\n  vec3 V \x3d normalize(f_eyeDirection);\n\n  if(gl_FrontFacing) {\n    N \x3d -N;\n  }\n\n  float specular \x3d min(1.0, max(0.0, cookTorranceSpecular(L, V, N, roughness, fresnel)));\n  float diffuse  \x3d min(kambient + kdiffuse * max(dot(N, L), 0.0), 1.0);\n\n  vec4 surfaceColor \x3d f_color * texture2D(texture, f_uv);\n  vec4 litColor \x3d surfaceColor.a * vec4(diffuse * surfaceColor.rgb + kspecular * vec3(1,1,1) * specular,  1.0);\n\n  gl_FragColor \x3d litColor * opacity;\n}\n"]);
var n=q(["precision highp float;\n\nprecision highp float;\n#define GLSLIFY 1\n\nvec3 getOrthogonalVector(vec3 v) {\n  // Return up-vector for only-z vector.\n  // Return ax + by + cz \x3d 0, a point that lies on the plane that has v as a normal and that isn't (0,0,0).\n  // From the above if-statement we have ||a|| \x3e 0  U  ||b|| \x3e 0.\n  // Assign z \x3d 0, x \x3d -b, y \x3d a:\n  // a*-b + b*a + c*0 \x3d -ba + ba + 0 \x3d 0\n  if (v.x*v.x \x3e v.z*v.z || v.y*v.y \x3e v.z*v.z) {\n    return normalize(vec3(-v.y, v.x, 0.0));\n  } else {\n    return normalize(vec3(0.0, v.z, -v.y));\n  }\n}\n\n// Calculate the cone vertex and normal at the given index.\n//\n// The returned vertex is for a cone with its top at origin and height of 1.0,\n// pointing in the direction of the vector attribute.\n//\n// Each cone is made up of a top vertex, a center base vertex and base perimeter vertices.\n// These vertices are used to make up the triangles of the cone by the following:\n//   segment + 0 top vertex\n//   segment + 1 perimeter vertex a+1\n//   segment + 2 perimeter vertex a\n//   segment + 3 center base vertex\n//   segment + 4 perimeter vertex a\n//   segment + 5 perimeter vertex a+1\n// Where segment is the number of the radial segment * 6 and a is the angle at that radial segment.\n// To go from index to segment, floor(index / 6)\n// To go from segment to angle, 2*pi * (segment/segmentCount)\n// To go from index to segment index, index - (segment*6)\n//\nvec3 getConePosition(vec3 d, float rawIndex, float coneOffset, out vec3 normal) {\n\n  const float segmentCount \x3d 8.0;\n\n  float index \x3d rawIndex - floor(rawIndex /\n    (segmentCount * 6.0)) *\n    (segmentCount * 6.0);\n\n  float segment \x3d floor(0.001 + index/6.0);\n  float segmentIndex \x3d index - (segment*6.0);\n\n  normal \x3d -normalize(d);\n\n  if (segmentIndex \x3e 2.99 \x26\x26 segmentIndex \x3c 3.01) {\n    return mix(vec3(0.0), -d, coneOffset);\n  }\n\n  float nextAngle \x3d (\n    (segmentIndex \x3e 0.99 \x26\x26  segmentIndex \x3c 1.01) ||\n    (segmentIndex \x3e 4.99 \x26\x26  segmentIndex \x3c 5.01)\n  ) ? 1.0 : 0.0;\n  float angle \x3d 2.0 * 3.14159 * ((segment + nextAngle) / segmentCount);\n\n  vec3 v1 \x3d mix(d, vec3(0.0), coneOffset);\n  vec3 v2 \x3d v1 - d;\n\n  vec3 u \x3d getOrthogonalVector(d);\n  vec3 v \x3d normalize(cross(u, d));\n\n  vec3 x \x3d u * cos(angle) * length(d)*0.25;\n  vec3 y \x3d v * sin(angle) * length(d)*0.25;\n  vec3 v3 \x3d v2 + x + y;\n  if (segmentIndex \x3c 3.0) {\n    vec3 tx \x3d u * sin(angle);\n    vec3 ty \x3d v * -cos(angle);\n    vec3 tangent \x3d tx + ty;\n    normal \x3d normalize(cross(v3 - v1, tangent));\n  }\n\n  if (segmentIndex \x3d\x3d 0.0) {\n    return mix(d, vec3(0.0), coneOffset);\n  }\n  return v3;\n}\n\nattribute vec4 vector;\nattribute vec4 position;\nattribute vec4 id;\n\nuniform mat4 model, view, projection;\nuniform float vectorScale, coneScale, coneOffset;\n\nvarying vec3 f_position;\nvarying vec4 f_id;\n\nvoid main() {\n  vec3 normal;\n  vec3 XYZ \x3d getConePosition(mat3(model) * ((vectorScale * coneScale) * vector.xyz), position.w, coneOffset, normal);\n  vec4 conePosition \x3d model * vec4(position.xyz, 1.0) + vec4(XYZ, 0.0);\n  gl_Position \x3d projection * view * conePosition;\n  f_id        \x3d id;\n  f_position  \x3d position.xyz;\n}\n"]);
q=q(["precision highp float;\n#define GLSLIFY 1\n\nbool outOfRange(float a, float b, float p) {\n  return ((p \x3e max(a, b)) || \n          (p \x3c min(a, b)));\n}\n\nbool outOfRange(vec2 a, vec2 b, vec2 p) {\n  return (outOfRange(a.x, b.x, p.x) ||\n          outOfRange(a.y, b.y, p.y));\n}\n\nbool outOfRange(vec3 a, vec3 b, vec3 p) {\n  return (outOfRange(a.x, b.x, p.x) ||\n          outOfRange(a.y, b.y, p.y) ||\n          outOfRange(a.z, b.z, p.z));\n}\n\nbool outOfRange(vec4 a, vec4 b, vec4 p) {\n  return outOfRange(a.xyz, b.xyz, p.xyz);\n}\n\nuniform vec3  clipBounds[2];\nuniform float pickId;\n\nvarying vec3 f_position;\nvarying vec4 f_id;\n\nvoid main() {\n  if (outOfRange(clipBounds[0], clipBounds[1], f_position)) discard;\n\n  gl_FragColor \x3d vec4(pickId, f_id.xyz);\n}"]);
C.meshShader={vertex:a,fragment:G,attributes:[{name:"position",type:"vec4"},{name:"color",type:"vec4"},{name:"uv",type:"vec2"},{name:"vector",type:"vec3"}]};C.pickShader={vertex:n,fragment:q,attributes:[{name:"position",type:"vec4"},{name:"id",type:"vec4"},{name:"vector",type:"vec3"}]}},{glslify:413}],262:[function(a,G,C){G.exports={0:"NONE",1:"ONE",2:"LINE_LOOP",3:"LINE_STRIP",4:"TRIANGLES",5:"TRIANGLE_STRIP",6:"TRIANGLE_FAN",256:"DEPTH_BUFFER_BIT",512:"NEVER",513:"LESS",514:"EQUAL",515:"LEQUAL",
516:"GREATER",517:"NOTEQUAL",518:"GEQUAL",519:"ALWAYS",768:"SRC_COLOR",769:"ONE_MINUS_SRC_COLOR",770:"SRC_ALPHA",771:"ONE_MINUS_SRC_ALPHA",772:"DST_ALPHA",773:"ONE_MINUS_DST_ALPHA",774:"DST_COLOR",775:"ONE_MINUS_DST_COLOR",776:"SRC_ALPHA_SATURATE",1024:"STENCIL_BUFFER_BIT",1028:"FRONT",1029:"BACK",1032:"FRONT_AND_BACK",1280:"INVALID_ENUM",1281:"INVALID_VALUE",1282:"INVALID_OPERATION",1285:"OUT_OF_MEMORY",1286:"INVALID_FRAMEBUFFER_OPERATION",2304:"CW",2305:"CCW",2849:"LINE_WIDTH",2884:"CULL_FACE",
2885:"CULL_FACE_MODE",2886:"FRONT_FACE",2928:"DEPTH_RANGE",2929:"DEPTH_TEST",2930:"DEPTH_WRITEMASK",2931:"DEPTH_CLEAR_VALUE",2932:"DEPTH_FUNC",2960:"STENCIL_TEST",2961:"STENCIL_CLEAR_VALUE",2962:"STENCIL_FUNC",2963:"STENCIL_VALUE_MASK",2964:"STENCIL_FAIL",2965:"STENCIL_PASS_DEPTH_FAIL",2966:"STENCIL_PASS_DEPTH_PASS",2967:"STENCIL_REF",2968:"STENCIL_WRITEMASK",2978:"VIEWPORT",3024:"DITHER",3042:"BLEND",3088:"SCISSOR_BOX",3089:"SCISSOR_TEST",3106:"COLOR_CLEAR_VALUE",3107:"COLOR_WRITEMASK",3317:"UNPACK_ALIGNMENT",
3333:"PACK_ALIGNMENT",3379:"MAX_TEXTURE_SIZE",3386:"MAX_VIEWPORT_DIMS",3408:"SUBPIXEL_BITS",3410:"RED_BITS",3411:"GREEN_BITS",3412:"BLUE_BITS",3413:"ALPHA_BITS",3414:"DEPTH_BITS",3415:"STENCIL_BITS",3553:"TEXTURE_2D",4352:"DONT_CARE",4353:"FASTEST",4354:"NICEST",5120:"BYTE",5121:"UNSIGNED_BYTE",5122:"SHORT",5123:"UNSIGNED_SHORT",5124:"INT",5125:"UNSIGNED_INT",5126:"FLOAT",5386:"INVERT",5890:"TEXTURE",6401:"STENCIL_INDEX",6402:"DEPTH_COMPONENT",6406:"ALPHA",6407:"RGB",6408:"RGBA",6409:"LUMINANCE",
6410:"LUMINANCE_ALPHA",7680:"KEEP",7681:"REPLACE",7682:"INCR",7683:"DECR",7936:"VENDOR",7937:"RENDERER",7938:"VERSION",9728:"NEAREST",9729:"LINEAR",9984:"NEAREST_MIPMAP_NEAREST",9985:"LINEAR_MIPMAP_NEAREST",9986:"NEAREST_MIPMAP_LINEAR",9987:"LINEAR_MIPMAP_LINEAR",10240:"TEXTURE_MAG_FILTER",10241:"TEXTURE_MIN_FILTER",10242:"TEXTURE_WRAP_S",10243:"TEXTURE_WRAP_T",10497:"REPEAT",10752:"POLYGON_OFFSET_UNITS",16384:"COLOR_BUFFER_BIT",32769:"CONSTANT_COLOR",32770:"ONE_MINUS_CONSTANT_COLOR",32771:"CONSTANT_ALPHA",
32772:"ONE_MINUS_CONSTANT_ALPHA",32773:"BLEND_COLOR",32774:"FUNC_ADD",32777:"BLEND_EQUATION_RGB",32778:"FUNC_SUBTRACT",32779:"FUNC_REVERSE_SUBTRACT",32819:"UNSIGNED_SHORT_4_4_4_4",32820:"UNSIGNED_SHORT_5_5_5_1",32823:"POLYGON_OFFSET_FILL",32824:"POLYGON_OFFSET_FACTOR",32854:"RGBA4",32855:"RGB5_A1",32873:"TEXTURE_BINDING_2D",32926:"SAMPLE_ALPHA_TO_COVERAGE",32928:"SAMPLE_COVERAGE",32936:"SAMPLE_BUFFERS",32937:"SAMPLES",32938:"SAMPLE_COVERAGE_VALUE",32939:"SAMPLE_COVERAGE_INVERT",32968:"BLEND_DST_RGB",
32969:"BLEND_SRC_RGB",32970:"BLEND_DST_ALPHA",32971:"BLEND_SRC_ALPHA",33071:"CLAMP_TO_EDGE",33170:"GENERATE_MIPMAP_HINT",33189:"DEPTH_COMPONENT16",33306:"DEPTH_STENCIL_ATTACHMENT",33635:"UNSIGNED_SHORT_5_6_5",33648:"MIRRORED_REPEAT",33901:"ALIASED_POINT_SIZE_RANGE",33902:"ALIASED_LINE_WIDTH_RANGE",33984:"TEXTURE0",33985:"TEXTURE1",33986:"TEXTURE2",33987:"TEXTURE3",33988:"TEXTURE4",33989:"TEXTURE5",33990:"TEXTURE6",33991:"TEXTURE7",33992:"TEXTURE8",33993:"TEXTURE9",33994:"TEXTURE10",33995:"TEXTURE11",
33996:"TEXTURE12",33997:"TEXTURE13",33998:"TEXTURE14",33999:"TEXTURE15",34E3:"TEXTURE16",34001:"TEXTURE17",34002:"TEXTURE18",34003:"TEXTURE19",34004:"TEXTURE20",34005:"TEXTURE21",34006:"TEXTURE22",34007:"TEXTURE23",34008:"TEXTURE24",34009:"TEXTURE25",34010:"TEXTURE26",34011:"TEXTURE27",34012:"TEXTURE28",34013:"TEXTURE29",34014:"TEXTURE30",34015:"TEXTURE31",34016:"ACTIVE_TEXTURE",34024:"MAX_RENDERBUFFER_SIZE",34041:"DEPTH_STENCIL",34055:"INCR_WRAP",34056:"DECR_WRAP",34067:"TEXTURE_CUBE_MAP",34068:"TEXTURE_BINDING_CUBE_MAP",
34069:"TEXTURE_CUBE_MAP_POSITIVE_X",34070:"TEXTURE_CUBE_MAP_NEGATIVE_X",34071:"TEXTURE_CUBE_MAP_POSITIVE_Y",34072:"TEXTURE_CUBE_MAP_NEGATIVE_Y",34073:"TEXTURE_CUBE_MAP_POSITIVE_Z",34074:"TEXTURE_CUBE_MAP_NEGATIVE_Z",34076:"MAX_CUBE_MAP_TEXTURE_SIZE",34338:"VERTEX_ATTRIB_ARRAY_ENABLED",34339:"VERTEX_ATTRIB_ARRAY_SIZE",34340:"VERTEX_ATTRIB_ARRAY_STRIDE",34341:"VERTEX_ATTRIB_ARRAY_TYPE",34342:"CURRENT_VERTEX_ATTRIB",34373:"VERTEX_ATTRIB_ARRAY_POINTER",34466:"NUM_COMPRESSED_TEXTURE_FORMATS",34467:"COMPRESSED_TEXTURE_FORMATS",
34660:"BUFFER_SIZE",34661:"BUFFER_USAGE",34816:"STENCIL_BACK_FUNC",34817:"STENCIL_BACK_FAIL",34818:"STENCIL_BACK_PASS_DEPTH_FAIL",34819:"STENCIL_BACK_PASS_DEPTH_PASS",34877:"BLEND_EQUATION_ALPHA",34921:"MAX_VERTEX_ATTRIBS",34922:"VERTEX_ATTRIB_ARRAY_NORMALIZED",34930:"MAX_TEXTURE_IMAGE_UNITS",34962:"ARRAY_BUFFER",34963:"ELEMENT_ARRAY_BUFFER",34964:"ARRAY_BUFFER_BINDING",34965:"ELEMENT_ARRAY_BUFFER_BINDING",34975:"VERTEX_ATTRIB_ARRAY_BUFFER_BINDING",35040:"STREAM_DRAW",35044:"STATIC_DRAW",35048:"DYNAMIC_DRAW",
35632:"FRAGMENT_SHADER",35633:"VERTEX_SHADER",35660:"MAX_VERTEX_TEXTURE_IMAGE_UNITS",35661:"MAX_COMBINED_TEXTURE_IMAGE_UNITS",35663:"SHADER_TYPE",35664:"FLOAT_VEC2",35665:"FLOAT_VEC3",35666:"FLOAT_VEC4",35667:"INT_VEC2",35668:"INT_VEC3",35669:"INT_VEC4",35670:"BOOL",35671:"BOOL_VEC2",35672:"BOOL_VEC3",35673:"BOOL_VEC4",35674:"FLOAT_MAT2",35675:"FLOAT_MAT3",35676:"FLOAT_MAT4",35678:"SAMPLER_2D",35680:"SAMPLER_CUBE",35712:"DELETE_STATUS",35713:"COMPILE_STATUS",35714:"LINK_STATUS",35715:"VALIDATE_STATUS",
35716:"INFO_LOG_LENGTH",35717:"ATTACHED_SHADERS",35718:"ACTIVE_UNIFORMS",35719:"ACTIVE_UNIFORM_MAX_LENGTH",35720:"SHADER_SOURCE_LENGTH",35721:"ACTIVE_ATTRIBUTES",35722:"ACTIVE_ATTRIBUTE_MAX_LENGTH",35724:"SHADING_LANGUAGE_VERSION",35725:"CURRENT_PROGRAM",36003:"STENCIL_BACK_REF",36004:"STENCIL_BACK_VALUE_MASK",36005:"STENCIL_BACK_WRITEMASK",36006:"FRAMEBUFFER_BINDING",36007:"RENDERBUFFER_BINDING",36048:"FRAMEBUFFER_ATTACHMENT_OBJECT_TYPE",36049:"FRAMEBUFFER_ATTACHMENT_OBJECT_NAME",36050:"FRAMEBUFFER_ATTACHMENT_TEXTURE_LEVEL",
36051:"FRAMEBUFFER_ATTACHMENT_TEXTURE_CUBE_MAP_FACE",36053:"FRAMEBUFFER_COMPLETE",36054:"FRAMEBUFFER_INCOMPLETE_ATTACHMENT",36055:"FRAMEBUFFER_INCOMPLETE_MISSING_ATTACHMENT",36057:"FRAMEBUFFER_INCOMPLETE_DIMENSIONS",36061:"FRAMEBUFFER_UNSUPPORTED",36064:"COLOR_ATTACHMENT0",36096:"DEPTH_ATTACHMENT",36128:"STENCIL_ATTACHMENT",36160:"FRAMEBUFFER",36161:"RENDERBUFFER",36162:"RENDERBUFFER_WIDTH",36163:"RENDERBUFFER_HEIGHT",36164:"RENDERBUFFER_INTERNAL_FORMAT",36168:"STENCIL_INDEX8",36176:"RENDERBUFFER_RED_SIZE",
36177:"RENDERBUFFER_GREEN_SIZE",36178:"RENDERBUFFER_BLUE_SIZE",36179:"RENDERBUFFER_ALPHA_SIZE",36180:"RENDERBUFFER_DEPTH_SIZE",36181:"RENDERBUFFER_STENCIL_SIZE",36194:"RGB565",36336:"LOW_FLOAT",36337:"MEDIUM_FLOAT",36338:"HIGH_FLOAT",36339:"LOW_INT",36340:"MEDIUM_INT",36341:"HIGH_INT",36346:"SHADER_COMPILER",36347:"MAX_VERTEX_UNIFORM_VECTORS",36348:"MAX_VARYING_VECTORS",36349:"MAX_FRAGMENT_UNIFORM_VECTORS",37440:"UNPACK_FLIP_Y_WEBGL",37441:"UNPACK_PREMULTIPLY_ALPHA_WEBGL",37442:"CONTEXT_LOST_WEBGL",
37443:"UNPACK_COLORSPACE_CONVERSION_WEBGL",37444:"BROWSER_DEFAULT_WEBGL"}},{}],263:[function(a,G,C){var q=a("./1.0/numbers");G.exports=function(n){return q[n]}},{"./1.0/numbers":262}],264:[function(a,G,C){function q(l,c,g,d){this.gl=l;this.shader=d;this.buffer=c;this.vao=g;this.pixelRatio=1;this.bounds=[[Infinity,Infinity,Infinity],[-Infinity,-Infinity,-Infinity]];this.clipBounds=[[-Infinity,-Infinity,-Infinity],[Infinity,Infinity,Infinity]];this.lineWidth=[1,1,1];this.capSize=[10,10,10];this.lineCount=
[0,0,0];this.lineOffset=[0,0,0];this.opacity=1;this.hasAlpha=!1}function n(l,c){for(var g=0;3>g;++g)l[0][g]=Math.min(l[0][g],c[g]),l[1][g]=Math.max(l[1][g],c[g])}function m(l,c,g,d){d=h[d];for(var p=0;p<d.length;++p){var r=d[p];l.push(c[0],c[1],c[2],g[0],g[1],g[2],g[3],r[0],r[1],r[2])}return d.length}G.exports=function(l){var c=l.gl,g=f(c),d=b(c,[{buffer:g,type:c.FLOAT,size:3,offset:0,stride:40},{buffer:g,type:c.FLOAT,size:4,offset:12,stride:40},{buffer:g,type:c.FLOAT,size:3,offset:28,stride:40}]),
p=k(c);p.attributes.position.location=0;p.attributes.color.location=1;p.attributes.offset.location=2;c=new q(c,g,d,p);c.update(l);return c};var f=a("gl-buffer"),b=a("gl-vao"),k=a("./shaders/index"),e=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1];a=q.prototype;a.isOpaque=function(){return!this.hasAlpha};a.isTransparent=function(){return this.hasAlpha};a.drawTransparent=a.draw=function(l){var c=this.gl,g=this.shader.uniforms;this.shader.bind();var d=g.view=l.view||e,p=g.projection=l.projection||e;g.model=l.model||
e;g.clipBounds=this.clipBounds;g.opacity=this.opacity;l=(l._ortho?2:1)*this.pixelRatio*(p[3]*d[12]+p[7]*d[13]+p[11]*d[14]+p[15]*d[15])/c.drawingBufferHeight;this.vao.bind();for(d=0;3>d;++d)c.lineWidth(this.lineWidth[d]*this.pixelRatio),g.capSize=this.capSize[d]*l,this.lineCount[d]&&c.drawArrays(c.LINES,this.lineOffset[d],this.lineCount[d]);this.vao.unbind()};var h=function(){for(var l=Array(3),c=0;3>c;++c){for(var g=[],d=1;2>=d;++d)for(var p=-1;1>=p;p+=2){var r=[0,0,0];r[(d+c)%3]=p;g.push(r)}l[c]=
g}return l}();a.update=function(l){l=l||{};"lineWidth"in l&&(this.lineWidth=l.lineWidth,Array.isArray(this.lineWidth)||(this.lineWidth=[this.lineWidth,this.lineWidth,this.lineWidth]));"capSize"in l&&(this.capSize=l.capSize,Array.isArray(this.capSize)||(this.capSize=[this.capSize,this.capSize,this.capSize]));this.hasAlpha=!1;"opacity"in l&&(this.opacity=+l.opacity,1>this.opacity&&(this.hasAlpha=!0));var c=l.color||[[0,0,0],[0,0,0],[0,0,0]],g=l.position;l=l.error;Array.isArray(c[0])||(c=[c,c,c]);if(g&&
l){var d=[],p=g.length,r=0;this.bounds=[[Infinity,Infinity,Infinity],[-Infinity,-Infinity,-Infinity]];this.lineCount=[0,0,0];for(var t=0;3>t;++t){this.lineOffset[t]=r;var w=0;a:for(;w<p;++w){for(var x=g[w],y=0;3>y;++y)if(isNaN(x[y])||!isFinite(x[y]))continue a;y=l[w];var A=c[t];Array.isArray(A[0])&&(A=c[w]);3===A.length?A=[A[0],A[1],A[2],1]:4===A.length&&(A=[A[0],A[1],A[2],A[3]],!this.hasAlpha&&1>A[3]&&(this.hasAlpha=!0));if(!isNaN(y[0][t])&&!isNaN(y[1][t])){if(0>y[0][t]){var z=x.slice();z[t]+=y[0][t];
d.push(x[0],x[1],x[2],A[0],A[1],A[2],A[3],0,0,0,z[0],z[1],z[2],A[0],A[1],A[2],A[3],0,0,0);n(this.bounds,z);r+=2+m(d,z,A,t)}0<y[1][t]&&(z=x.slice(),z[t]+=y[1][t],d.push(x[0],x[1],x[2],A[0],A[1],A[2],A[3],0,0,0,z[0],z[1],z[2],A[0],A[1],A[2],A[3],0,0,0),n(this.bounds,z),r+=2+m(d,z,A,t))}}this.lineCount[t]=r-this.lineOffset[t]}this.buffer.update(d)}};a.dispose=function(){this.shader.dispose();this.buffer.dispose();this.vao.dispose()}},{"./shaders/index":265,"gl-buffer":258,"gl-vao":332}],265:[function(a,
G,C){C=a("glslify");var q=a("gl-shader"),n=C(["precision highp float;\n#define GLSLIFY 1\n\nattribute vec3 position, offset;\nattribute vec4 color;\nuniform mat4 model, view, projection;\nuniform float capSize;\nvarying vec4 fragColor;\nvarying vec3 fragPosition;\n\nvoid main() {\n  vec4 worldPosition  \x3d model * vec4(position, 1.0);\n  worldPosition       \x3d (worldPosition / worldPosition.w) + vec4(capSize * offset, 0.0);\n  gl_Position         \x3d projection * view * worldPosition;\n  fragColor           \x3d color;\n  fragPosition        \x3d position;\n}"]),
m=C(["precision highp float;\n#define GLSLIFY 1\n\nbool outOfRange(float a, float b, float p) {\n  return ((p \x3e max(a, b)) || \n          (p \x3c min(a, b)));\n}\n\nbool outOfRange(vec2 a, vec2 b, vec2 p) {\n  return (outOfRange(a.x, b.x, p.x) ||\n          outOfRange(a.y, b.y, p.y));\n}\n\nbool outOfRange(vec3 a, vec3 b, vec3 p) {\n  return (outOfRange(a.x, b.x, p.x) ||\n          outOfRange(a.y, b.y, p.y) ||\n          outOfRange(a.z, b.z, p.z));\n}\n\nbool outOfRange(vec4 a, vec4 b, vec4 p) {\n  return outOfRange(a.xyz, b.xyz, p.xyz);\n}\n\nuniform vec3 clipBounds[2];\nuniform float opacity;\nvarying vec3 fragPosition;\nvarying vec4 fragColor;\n\nvoid main() {\n  if (\n    outOfRange(clipBounds[0], clipBounds[1], fragPosition) ||\n    fragColor.a * opacity \x3d\x3d 0.\n  ) discard;\n\n  gl_FragColor \x3d opacity * fragColor;\n}"]);
G.exports=function(f){return q(f,n,m,null,[{name:"position",type:"vec3"},{name:"color",type:"vec4"},{name:"offset",type:"vec3"}])}},{"gl-shader":312,glslify:413}],266:[function(a,G,C){function q(t){var w=t.getParameter(t.FRAMEBUFFER_BINDING),x=t.getParameter(t.RENDERBUFFER_BINDING);t=t.getParameter(t.TEXTURE_BINDING_2D);return[w,x,t]}function n(t,w){t.bindFramebuffer(t.FRAMEBUFFER,w[0]);t.bindRenderbuffer(t.RENDERBUFFER,w[1]);t.bindTexture(t.TEXTURE_2D,w[2])}function m(t){switch(t){case g:throw Error("gl-fbo: Framebuffer unsupported");
case d:throw Error("gl-fbo: Framebuffer incomplete attachment");case p:throw Error("gl-fbo: Framebuffer incomplete dimensions");case r:throw Error("gl-fbo: Framebuffer incomplete missing attachment");default:throw Error("gl-fbo: Framebuffer failed for unspecified reason");}}function f(t,w,x,y,A,z){if(!y)return null;w=l(t,w,x,A,y);w.magFilter=t.NEAREST;w.minFilter=t.NEAREST;w.mipSamples=1;w.bind();t.framebufferTexture2D(t.FRAMEBUFFER,z,t.TEXTURE_2D,w.handle,0);return w}function b(t,w,x,y,A){var z=
t.createRenderbuffer();t.bindRenderbuffer(t.RENDERBUFFER,z);t.renderbufferStorage(t.RENDERBUFFER,y,w,x);t.framebufferRenderbuffer(t.FRAMEBUFFER,A,t.RENDERBUFFER,z);return z}function k(t){var w=q(t.gl),x=t.gl,y=t.handle=x.createFramebuffer(),A=t._shape[0],z=t._shape[1],F=t.color.length,D=t._ext,u=t._useStencil,B=t._useDepth,I=t._colorType;x.bindFramebuffer(x.FRAMEBUFFER,y);for(y=0;y<F;++y)t.color[y]=f(x,A,z,I,x.RGBA,x.COLOR_ATTACHMENT0+y);0===F?(t._color_rb=b(x,A,z,x.RGBA4,x.COLOR_ATTACHMENT0),D&&
D.drawBuffersWEBGL(c[0])):1<F&&D.drawBuffersWEBGL(c[F]);(F=x.getExtension("WEBGL_depth_texture"))?u?t.depth=f(x,A,z,F.UNSIGNED_INT_24_8_WEBGL,x.DEPTH_STENCIL,x.DEPTH_STENCIL_ATTACHMENT):B&&(t.depth=f(x,A,z,x.UNSIGNED_SHORT,x.DEPTH_COMPONENT,x.DEPTH_ATTACHMENT)):B&&u?t._depth_rb=b(x,A,z,x.DEPTH_STENCIL,x.DEPTH_STENCIL_ATTACHMENT):B?t._depth_rb=b(x,A,z,x.DEPTH_COMPONENT16,x.DEPTH_ATTACHMENT):u&&(t._depth_rb=b(x,A,z,x.STENCIL_INDEX,x.STENCIL_ATTACHMENT));A=x.checkFramebufferStatus(x.FRAMEBUFFER);if(A!==
x.FRAMEBUFFER_COMPLETE){t._destroyed=!0;x.bindFramebuffer(x.FRAMEBUFFER,null);x.deleteFramebuffer(t.handle);t.handle=null;t.depth&&(t.depth.dispose(),t.depth=null);t._depth_rb&&(x.deleteRenderbuffer(t._depth_rb),t._depth_rb=null);for(y=0;y<t.color.length;++y)t.color[y].dispose(),t.color[y]=null;t._color_rb&&(x.deleteRenderbuffer(t._color_rb),t._color_rb=null);n(x,w);m(A)}n(x,w)}function e(t,w,x,y,A,z,F,D){this.gl=t;this._shape=[w|0,x|0];this._destroyed=!1;this._ext=D;this.color=Array(A);for(t=0;t<
A;++t)this.color[t]=null;this._depth_rb=this.depth=this._color_rb=null;this._colorType=y;this._useDepth=z;this._useStencil=F;var u=this;w=[w|0,x|0];Object.defineProperties(w,{0:{get:function(){return u._shape[0]},set:function(B){return u.width=B}},1:{get:function(){return u._shape[1]},set:function(B){return u.height=B}}});this._shapeVector=w;k(this)}function h(t,w,x){if(t._destroyed)throw Error("gl-fbo: Can't resize destroyed FBO");if(t._shape[0]!==w||t._shape[1]!==x){var y=t.gl,A=y.getParameter(y.MAX_RENDERBUFFER_SIZE);
if(0>w||w>A||0>x||x>A)throw Error("gl-fbo: Can't resize FBO, invalid dimensions");t._shape[0]=w;t._shape[1]=x;w=q(y);for(x=0;x<t.color.length;++x)t.color[x].shape=t._shape;t._color_rb&&(y.bindRenderbuffer(y.RENDERBUFFER,t._color_rb),y.renderbufferStorage(y.RENDERBUFFER,y.RGBA4,t._shape[0],t._shape[1]));t.depth&&(t.depth.shape=t._shape);t._depth_rb&&(y.bindRenderbuffer(y.RENDERBUFFER,t._depth_rb),t._useDepth&&t._useStencil?y.renderbufferStorage(y.RENDERBUFFER,y.DEPTH_STENCIL,t._shape[0],t._shape[1]):
t._useDepth?y.renderbufferStorage(y.RENDERBUFFER,y.DEPTH_COMPONENT16,t._shape[0],t._shape[1]):t._useStencil&&y.renderbufferStorage(y.RENDERBUFFER,y.STENCIL_INDEX,t._shape[0],t._shape[1]));y.bindFramebuffer(y.FRAMEBUFFER,t.handle);x=y.checkFramebufferStatus(y.FRAMEBUFFER);x!==y.FRAMEBUFFER_COMPLETE&&(t.dispose(),n(y,w),m(x));n(y,w)}}var l=a("gl-texture2d");G.exports=function(t,w,x,y){g||(g=t.FRAMEBUFFER_UNSUPPORTED,d=t.FRAMEBUFFER_INCOMPLETE_ATTACHMENT,p=t.FRAMEBUFFER_INCOMPLETE_DIMENSIONS,r=t.FRAMEBUFFER_INCOMPLETE_MISSING_ATTACHMENT);
var A=t.getExtension("WEBGL_draw_buffers");if(!c&&A){var z=t.getParameter(A.MAX_COLOR_ATTACHMENTS_WEBGL);c=Array(z+1);for(var F=0;F<=z;++F){for(var D=Array(z),u=0;u<F;++u)D[u]=t.COLOR_ATTACHMENT0+u;for(u=F;u<z;++u)D[u]=t.NONE;c[F]=D}}Array.isArray(w)&&(y=x,x=w[1]|0,w=w[0]|0);if("number"!==typeof w)throw Error("gl-fbo: Missing shape parameter");z=t.getParameter(t.MAX_RENDERBUFFER_SIZE);if(0>w||w>z||0>x||x>z)throw Error("gl-fbo: Parameters are too large for FBO");y=y||{};z=1;if("color"in y){z=Math.max(y.color|
0,0);if(0>z)throw Error("gl-fbo: Must specify a nonnegative number of colors");if(1<z){if(!A)throw Error("gl-fbo: Multiple draw buffer extension not supported");if(z>t.getParameter(A.MAX_COLOR_ATTACHMENTS_WEBGL))throw Error("gl-fbo: Context does not support "+z+" draw buffers");}}F=t.UNSIGNED_BYTE;D=t.getExtension("OES_texture_float");if(y.float&&0<z){if(!D)throw Error("gl-fbo: Context does not support floating point textures");F=t.FLOAT}else y.preferFloat&&0<z&&D&&(F=t.FLOAT);D=!0;"depth"in y&&(D=
!!y.depth);u=!1;"stencil"in y&&(u=!!y.stencil);return new e(t,w,x,F,z,D,u,A)};var c=null,g,d,p,r;a=e.prototype;Object.defineProperties(a,{shape:{get:function(){return this._destroyed?[0,0]:this._shapeVector},set:function(t){Array.isArray(t)||(t=[t|0,t|0]);if(2!==t.length)throw Error("gl-fbo: Shape vector must be length 2");var w=t[0]|0;t=t[1]|0;h(this,w,t);return[w,t]},enumerable:!1},width:{get:function(){return this._destroyed?0:this._shape[0]},set:function(t){t|=0;h(this,t,this._shape[1]);return t},
enumerable:!1},height:{get:function(){return this._destroyed?0:this._shape[1]},set:function(t){t|=0;h(this,this._shape[0],t);return t},enumerable:!1}});a.bind=function(){if(!this._destroyed){var t=this.gl;t.bindFramebuffer(t.FRAMEBUFFER,this.handle);t.viewport(0,0,this._shape[0],this._shape[1])}};a.dispose=function(){if(!this._destroyed){this._destroyed=!0;var t=this.gl;t.deleteFramebuffer(this.handle);this.handle=null;this.depth&&(this.depth.dispose(),this.depth=null);this._depth_rb&&(t.deleteRenderbuffer(this._depth_rb),
this._depth_rb=null);for(var w=0;w<this.color.length;++w)this.color[w].dispose(),this.color[w]=null;this._color_rb&&(t.deleteRenderbuffer(this._color_rb),this._color_rb=null)}}},{"gl-texture2d":327}],267:[function(a,G,C){var q=a("sprintf-js").sprintf,n=a("gl-constants/lookup"),m=a("glsl-shader-name"),f=a("add-line-numbers");G.exports=function(b,k,e){var h=m(k)||"of unknown name (see npm glsl-shader-name)",l="unknown type";void 0!==e&&(l=e===n.FRAGMENT_SHADER?"fragment":"vertex");e=q("Error compiling %s shader %s:\n",
l,h);h=q("%s%s",e,b);var c=b.split("\n");b={};for(l=0;l<c.length;l++){var g=c[l];if(""!==g&&"\x00"!==g){var d=parseInt(g.split(":")[2]);if(isNaN(d))throw Error(q("Could not parse error: %s",g));b[d]=g}}k=f(k).split("\n");for(l=0;l<k.length;l++)if(b[l+3]||b[l+2]||b[l+1])e+=k[l]+"\n",b[l+1]&&(c=b[l+1],c=c.substr(c.split(":",3).join(":").length+1).trim(),e+=q("^^^ %s\n\n",c));return{long:e.trim(),short:h.trim()}}},{"add-line-numbers":66,"gl-constants/lookup":263,"glsl-shader-name":405,"sprintf-js":539}],
268:[function(a,G,C){function q(l,c,g,d,p,r,t){this.plot=l;this.shader=c;this.pickShader=g;this.positionBuffer=d;this.weightBuffer=p;this.colorBuffer=r;this.idBuffer=t;this.xData=[];this.yData=[];this.shape=[0,0];this.bounds=[Infinity,Infinity,-Infinity,-Infinity];this.pickOffset=0}G.exports=function(l,c){var g=l.gl,d=b(g,e.vertex,e.fragment),p=b(g,e.pickVertex,e.pickFragment),r=k(g),t=k(g),w=k(g);g=k(g);d=new q(l,d,p,r,t,w,g);d.update(c);l.addObject(d);return d};var n=a("binary-search-bounds"),m=
a("iota-array"),f=a("typedarray-pool"),b=a("gl-shader"),k=a("gl-buffer"),e=a("./lib/shaders");a=q.prototype;var h=[0,0,1,0,0,1,1,0,1,1,0,1];a.draw=function(){var l=[1,0,0,0,1,0,0,0,1];return function(){var c=this.plot,g=this.shader,d=this.bounds,p=this.numVertices;if(!(0>=p)){var r=c.gl;c=c.dataBox;var t=d[3]-d[1],w=c[2]-c[0],x=c[3]-c[1];l[0]=2*(d[2]-d[0])/w;l[4]=2*t/x;l[6]=2*(d[0]-c[0])/w-1;l[7]=2*(d[1]-c[1])/x-1;g.bind();d=g.uniforms;d.viewTransform=l;d.shape=this.shape;g=g.attributes;this.positionBuffer.bind();
g.position.pointer();this.weightBuffer.bind();g.weight.pointer(r.UNSIGNED_BYTE,!1);this.colorBuffer.bind();g.color.pointer(r.UNSIGNED_BYTE,!0);r.drawArrays(r.TRIANGLES,0,p)}}}();a.drawPick=function(){var l=[1,0,0,0,1,0,0,0,1],c=[0,0,0,0];return function(g){var d=this.plot,p=this.pickShader,r=this.bounds,t=this.numVertices;if(!(0>=t)){var w=d.gl;d=d.dataBox;var x=r[3]-r[1],y=d[2]-d[0],A=d[3]-d[1];l[0]=2*(r[2]-r[0])/y;l[4]=2*x/A;l[6]=2*(r[0]-d[0])/y-1;l[7]=2*(r[1]-d[1])/A-1;for(r=0;4>r;++r)c[r]=g>>
8*r&255;this.pickOffset=g;p.bind();r=p.uniforms;r.viewTransform=l;r.pickOffset=c;r.shape=this.shape;p=p.attributes;this.positionBuffer.bind();p.position.pointer();this.weightBuffer.bind();p.weight.pointer(w.UNSIGNED_BYTE,!1);this.idBuffer.bind();p.pickId.pointer(w.UNSIGNED_BYTE,!1);w.drawArrays(w.TRIANGLES,0,t);return g+this.shape[0]*this.shape[1]}}}();a.pick=function(l,c,g){l=this.pickOffset;c=this.shape[0]*this.shape[1];if(g<l||g>=l+c)return null;g-=l;return{object:this,pointId:g,dataCoord:[this.xData[g%
this.shape[0]],this.yData[g/this.shape[0]|0]]}};a.update=function(l){l=l||{};var c=l.shape||[0,0],g=l.x||m(c[0]),d=l.y||m(c[1]),p=l.z||new Float32Array(c[0]*c[1]),r=!1!==l.zsmooth;this.xData=g;this.yData=d;var t=l.colorLevels||[0];l=l.colorValues||[0,0,0,1];var w=t.length,x=this.bounds;if(r){var y=x[0]=g[0];var A=x[1]=d[0];var z=x[2]=g[g.length-1];x=x[3]=d[d.length-1]}else y=x[0]=g[0]+(g[1]-g[0])/2,A=x[1]=d[0]+(d[1]-d[0])/2,z=x[2]=g[g.length-1]+(g[g.length-1]-g[g.length-2])/2,x=x[3]=d[d.length-1]+
(d[d.length-1]-d[d.length-2])/2;z=1/(z-y);x=1/(x-A);var F=c[0];c=c[1];this.shape=[F,c];var D=(r?(F-1)*(c-1):F*c)*(h.length>>>1);this.numVertices=D;var u=f.mallocUint8(4*D),B=f.mallocFloat32(2*D),I=f.mallocUint8(2*D);D=f.mallocUint32(D);for(var J=0,N=r?F-1:F,M=r?c-1:c,E=0;E<M;++E){if(r){var L=x*(d[E]-A);var Q=x*(d[E+1]-A)}else L=E<c-1?x*(d[E]-(d[E+1]-d[E])/2-A):x*(d[E]-(d[E]-d[E-1])/2-A),Q=E<c-1?x*(d[E]+(d[E+1]-d[E])/2-A):x*(d[E]+(d[E]-d[E-1])/2-A);for(var S=0;S<N;++S){if(r){var R=z*(g[S]-y);var O=
z*(g[S+1]-y)}else R=S<F-1?z*(g[S]-(g[S+1]-g[S])/2-y):z*(g[S]-(g[S]-g[S-1])/2-y),O=S<F-1?z*(g[S]+(g[S+1]-g[S])/2-y):z*(g[S]+(g[S]-g[S-1])/2-y);for(var T=0;T<h.length;T+=2){var V=h[T],X=h[T+1],ba=p[r?(E+X)*F+(S+V):E*F+S],aa=n.le(t,ba);if(0>aa){aa=l[0];ba=l[1];var ka=l[2];var ha=l[3]}else if(aa===w-1)aa=l[4*w-4],ba=l[4*w-3],ka=l[4*w-2],ha=l[4*w-1];else{ha=(ba-t[aa])/(t[aa+1]-t[aa]);var ca=1-ha,sa=4*aa,ma=4*(aa+1);aa=ca*l[sa]+ha*l[ma];ba=ca*l[sa+1]+ha*l[ma+1];ka=ca*l[sa+2]+ha*l[ma+2];ha=ca*l[sa+3]+ha*
l[ma+3]}u[4*J]=255*aa;u[4*J+1]=255*ba;u[4*J+2]=255*ka;u[4*J+3]=255*ha;B[2*J]=.5*R+.5*O;B[2*J+1]=.5*L+.5*Q;I[2*J]=V;I[2*J+1]=X;D[J]=E*F+S;J+=1}}}this.positionBuffer.update(B);this.weightBuffer.update(I);this.colorBuffer.update(u);this.idBuffer.update(D);f.free(B);f.free(u);f.free(I);f.free(D)};a.dispose=function(){this.shader.dispose();this.pickShader.dispose();this.positionBuffer.dispose();this.weightBuffer.dispose();this.colorBuffer.dispose();this.idBuffer.dispose();this.plot.removeObject(this)}},
{"./lib/shaders":269,"binary-search-bounds":96,"gl-buffer":258,"gl-shader":312,"iota-array":437,"typedarray-pool":567}],269:[function(a,G,C){a=a("glslify");G.exports={fragment:a(["precision lowp float;\n#define GLSLIFY 1\nvarying vec4 fragColor;\nvoid main() {\n  gl_FragColor \x3d vec4(fragColor.rgb * fragColor.a, fragColor.a);\n}\n"]),vertex:a(["precision mediump float;\n#define GLSLIFY 1\n\nattribute vec2 position;\nattribute vec4 color;\nattribute vec2 weight;\n\nuniform vec2 shape;\nuniform mat3 viewTransform;\n\nvarying vec4 fragColor;\n\nvoid main() {\n  vec3 vPosition \x3d viewTransform * vec3( position + (weight-.5)/(shape-1.) , 1.0);\n  fragColor \x3d color;\n  gl_Position \x3d vec4(vPosition.xy, 0, vPosition.z);\n}\n"]),
pickFragment:a(["precision mediump float;\n#define GLSLIFY 1\n\nvarying vec4 fragId;\nvarying vec2 vWeight;\n\nuniform vec2 shape;\nuniform vec4 pickOffset;\n\nvoid main() {\n  vec2 d \x3d step(.5, vWeight);\n  vec4 id \x3d fragId + pickOffset;\n  id.x +\x3d d.x + d.y*shape.x;\n\n  id.y +\x3d floor(id.x / 256.0);\n  id.x -\x3d floor(id.x / 256.0) * 256.0;\n\n  id.z +\x3d floor(id.y / 256.0);\n  id.y -\x3d floor(id.y / 256.0) * 256.0;\n\n  id.w +\x3d floor(id.z / 256.0);\n  id.z -\x3d floor(id.z / 256.0) * 256.0;\n\n  gl_FragColor \x3d id/255.;\n}\n"]),
pickVertex:a(["precision mediump float;\n#define GLSLIFY 1\n\nattribute vec2 position;\nattribute vec4 pickId;\nattribute vec2 weight;\n\nuniform vec2 shape;\nuniform mat3 viewTransform;\n\nvarying vec4 fragId;\nvarying vec2 vWeight;\n\nvoid main() {\n  vWeight \x3d weight;\n\n  fragId \x3d pickId;\n\n  vec3 vPosition \x3d viewTransform * vec3( position + (weight-.5)/(shape-1.) , 1.0);\n  gl_Position \x3d vec4(vPosition.xy, 0, vPosition.z);\n}\n"])}},{glslify:413}],270:[function(a,G,C){G=a("glslify");
var q=a("gl-shader"),n=G(["precision highp float;\n#define GLSLIFY 1\n\nattribute vec3 position, nextPosition;\nattribute float arcLength, lineWidth;\nattribute vec4 color;\n\nuniform vec2 screenShape;\nuniform float pixelRatio;\nuniform mat4 model, view, projection;\n\nvarying vec4 fragColor;\nvarying vec3 worldPosition;\nvarying float pixelArcLength;\n\nvec4 project(vec3 p) {\n  return projection * view * model * vec4(p, 1.0);\n}\n\nvoid main() {\n  vec4 startPoint \x3d project(position);\n  vec4 endPoint   \x3d project(nextPosition);\n\n  vec2 A \x3d startPoint.xy / startPoint.w;\n  vec2 B \x3d   endPoint.xy /   endPoint.w;\n\n  float clipAngle \x3d atan(\n    (B.y - A.y) * screenShape.y,\n    (B.x - A.x) * screenShape.x\n  );\n\n  vec2 offset \x3d 0.5 * pixelRatio * lineWidth * vec2(\n    sin(clipAngle),\n    -cos(clipAngle)\n  ) / screenShape;\n\n  gl_Position \x3d vec4(startPoint.xy + startPoint.w * offset, startPoint.zw);\n\n  worldPosition \x3d position;\n  pixelArcLength \x3d arcLength;\n  fragColor \x3d color;\n}\n"]),
m=G(["precision highp float;\n#define GLSLIFY 1\n\nbool outOfRange(float a, float b, float p) {\n  return ((p \x3e max(a, b)) || \n          (p \x3c min(a, b)));\n}\n\nbool outOfRange(vec2 a, vec2 b, vec2 p) {\n  return (outOfRange(a.x, b.x, p.x) ||\n          outOfRange(a.y, b.y, p.y));\n}\n\nbool outOfRange(vec3 a, vec3 b, vec3 p) {\n  return (outOfRange(a.x, b.x, p.x) ||\n          outOfRange(a.y, b.y, p.y) ||\n          outOfRange(a.z, b.z, p.z));\n}\n\nbool outOfRange(vec4 a, vec4 b, vec4 p) {\n  return outOfRange(a.xyz, b.xyz, p.xyz);\n}\n\nuniform vec3      clipBounds[2];\nuniform sampler2D dashTexture;\nuniform float     dashScale;\nuniform float     opacity;\n\nvarying vec3    worldPosition;\nvarying float   pixelArcLength;\nvarying vec4    fragColor;\n\nvoid main() {\n  if (\n    outOfRange(clipBounds[0], clipBounds[1], worldPosition) ||\n    fragColor.a * opacity \x3d\x3d 0.\n  ) discard;\n\n  float dashWeight \x3d texture2D(dashTexture, vec2(dashScale * pixelArcLength, 0)).r;\n  if(dashWeight \x3c 0.5) {\n    discard;\n  }\n  gl_FragColor \x3d fragColor * opacity;\n}\n"]),
f=G(["precision highp float;\n#define GLSLIFY 1\n\n#define FLOAT_MAX  1.70141184e38\n#define FLOAT_MIN  1.17549435e-38\n\n// https://github.com/mikolalysenko/glsl-read-float/blob/master/index.glsl\nvec4 packFloat(float v) {\n  float av \x3d abs(v);\n\n  //Handle special cases\n  if(av \x3c FLOAT_MIN) {\n    return vec4(0.0, 0.0, 0.0, 0.0);\n  } else if(v \x3e FLOAT_MAX) {\n    return vec4(127.0, 128.0, 0.0, 0.0) / 255.0;\n  } else if(v \x3c -FLOAT_MAX) {\n    return vec4(255.0, 128.0, 0.0, 0.0) / 255.0;\n  }\n\n  vec4 c \x3d vec4(0,0,0,0);\n\n  //Compute exponent and mantissa\n  float e \x3d floor(log2(av));\n  float m \x3d av * pow(2.0, -e) - 1.0;\n\n  //Unpack mantissa\n  c[1] \x3d floor(128.0 * m);\n  m -\x3d c[1] / 128.0;\n  c[2] \x3d floor(32768.0 * m);\n  m -\x3d c[2] / 32768.0;\n  c[3] \x3d floor(8388608.0 * m);\n\n  //Unpack exponent\n  float ebias \x3d e + 127.0;\n  c[0] \x3d floor(ebias / 2.0);\n  ebias -\x3d c[0] * 2.0;\n  c[1] +\x3d floor(ebias) * 128.0;\n\n  //Unpack sign bit\n  c[0] +\x3d 128.0 * step(0.0, -v);\n\n  //Scale back to range\n  return c / 255.0;\n}\n\nbool outOfRange(float a, float b, float p) {\n  return ((p \x3e max(a, b)) || \n          (p \x3c min(a, b)));\n}\n\nbool outOfRange(vec2 a, vec2 b, vec2 p) {\n  return (outOfRange(a.x, b.x, p.x) ||\n          outOfRange(a.y, b.y, p.y));\n}\n\nbool outOfRange(vec3 a, vec3 b, vec3 p) {\n  return (outOfRange(a.x, b.x, p.x) ||\n          outOfRange(a.y, b.y, p.y) ||\n          outOfRange(a.z, b.z, p.z));\n}\n\nbool outOfRange(vec4 a, vec4 b, vec4 p) {\n  return outOfRange(a.xyz, b.xyz, p.xyz);\n}\n\nuniform float pickId;\nuniform vec3 clipBounds[2];\n\nvarying vec3 worldPosition;\nvarying float pixelArcLength;\nvarying vec4 fragColor;\n\nvoid main() {\n  if (outOfRange(clipBounds[0], clipBounds[1], worldPosition)) discard;\n\n  gl_FragColor \x3d vec4(pickId/255.0, packFloat(pixelArcLength).xyz);\n}"]),
b=[{name:"position",type:"vec3"},{name:"nextPosition",type:"vec3"},{name:"arcLength",type:"float"},{name:"lineWidth",type:"float"},{name:"color",type:"vec4"}];C.createShader=function(k){return q(k,n,m,null,b)};C.createPickShader=function(k){return q(k,n,f,null,b)}},{"gl-shader":312,glslify:413}],271:[function(a,G,C){function q(r){for(var t=[[-1E6,-1E6,-1E6],[1E6,1E6,1E6]],w=0;3>w;++w)t[0][w]=Math.max(r[0][w],t[0][w]),t[1][w]=Math.min(r[1][w],t[1][w]);return t}function n(r,t,w,x){this.arcLength=r;
this.position=t;this.index=w;this.dataCoordinate=x}function m(r,t,w,x,y,A){this.gl=r;this.shader=t;this.pickShader=w;this.buffer=x;this.vao=y;this.clipBounds=[[-Infinity,-Infinity,-Infinity],[Infinity,Infinity,Infinity]];this.points=[];this.arcLength=[];this.vertexCount=0;this.bounds=[[0,0,0],[0,0,0]];this.pickId=0;this.lineWidth=1;this.texture=A;this.opacity=this.dashScale=1;this.hasAlpha=!1;this.dirty=!0;this.pixelRatio=1}G.exports=function(r){var t=r.gl||r.scene&&r.scene.gl,w=g(t);w.attributes.position.location=
0;w.attributes.nextPosition.location=1;w.attributes.arcLength.location=2;w.attributes.lineWidth.location=3;w.attributes.color.location=4;var x=d(t);x.attributes.position.location=0;x.attributes.nextPosition.location=1;x.attributes.arcLength.location=2;x.attributes.lineWidth.location=3;x.attributes.color.location=4;for(var y=f(t),A=b(t,[{buffer:y,size:3,offset:0,stride:48},{buffer:y,size:3,offset:12,stride:48},{buffer:y,size:1,offset:24,stride:48},{buffer:y,size:1,offset:28,stride:48},{buffer:y,size:4,
offset:32,stride:48}]),z=c(Array(1024),[256,1,4]),F=0;1024>F;++F)z.data[F]=255;z=k(t,z);z.wrap=t.REPEAT;t=new m(t,w,x,y,A,z);t.update(r);return t};var f=a("gl-buffer"),b=a("gl-vao"),k=a("gl-texture2d"),e=new Uint8Array(4),h=new Float32Array(e.buffer),l=a("binary-search-bounds"),c=a("ndarray");a=a("./lib/shaders");var g=a.createShader,d=a.createPickShader,p=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1];a=m.prototype;a.isTransparent=function(){return this.hasAlpha};a.isOpaque=function(){return!this.hasAlpha};a.pickSlots=
1;a.setPickBase=function(r){this.pickId=r};a.drawTransparent=a.draw=function(r){if(this.vertexCount){var t=this.gl,w=this.shader,x=this.vao;w.bind();w.uniforms={model:r.model||p,view:r.view||p,projection:r.projection||p,clipBounds:q(this.clipBounds),dashTexture:this.texture.bind(),dashScale:this.dashScale/this.arcLength[this.arcLength.length-1],opacity:this.opacity,screenShape:[t.drawingBufferWidth,t.drawingBufferHeight],pixelRatio:this.pixelRatio};x.bind();x.draw(t.TRIANGLE_STRIP,this.vertexCount);
x.unbind()}};a.drawPick=function(r){if(this.vertexCount){var t=this.gl,w=this.pickShader,x=this.vao;w.bind();w.uniforms={model:r.model||p,view:r.view||p,projection:r.projection||p,pickId:this.pickId,clipBounds:q(this.clipBounds),screenShape:[t.drawingBufferWidth,t.drawingBufferHeight],pixelRatio:this.pixelRatio};x.bind();x.draw(t.TRIANGLE_STRIP,this.vertexCount);x.unbind()}};a.update=function(r){var t;this.dirty=!0;var w=!!r.connectGaps;"dashScale"in r&&(this.dashScale=r.dashScale);this.hasAlpha=
!1;"opacity"in r&&(this.opacity=+r.opacity,1>this.opacity&&(this.hasAlpha=!0));var x=[],y=[],A=[],z=0,F=0,D=[[Infinity,Infinity,Infinity],[-Infinity,-Infinity,-Infinity]],u=r.position||r.positions;if(u){var B=r.color||r.colors||[0,0,0,1],I=r.lineWidth||1,J=!1;var N=1;a:for(;N<u.length;++N){var M=u[N-1],E=u[N];y.push(z);A.push(M.slice());for(t=0;3>t;++t){if(isNaN(M[t])||isNaN(E[t])||!isFinite(M[t])||!isFinite(E[t])){if(!w&&0<x.length){for(J=0;24>J;++J)x.push(x[x.length-12]);F+=2;J=!0}continue a}D[0][t]=
Math.min(D[0][t],M[t],E[t]);D[1][t]=Math.max(D[1][t],M[t],E[t])}if(Array.isArray(B[0])){var L=B.length>N-1?B[N-1]:0<B.length?B[B.length-1]:[0,0,0,1];var Q=B.length>N?B[N]:0<B.length?B[B.length-1]:[0,0,0,1]}else L=Q=B;3===L.length&&(L=[L[0],L[1],L[2],1]);3===Q.length&&(Q=[Q[0],Q[1],Q[2],1]);!this.hasAlpha&&1>L[3]&&(this.hasAlpha=!0);var S=Array.isArray(I)?I.length>N-1?I[N-1]:0<I.length?I[I.length-1]:[0,0,0,1]:I;var R=z;t=z;for(var O=z=0;3>O;++O){var T=M[O]-E[O];z+=T*T}z=t+Math.sqrt(z);if(J){for(t=
0;2>t;++t)x.push(M[0],M[1],M[2],E[0],E[1],E[2],R,S,L[0],L[1],L[2],L[3]);F+=2;J=!1}x.push(M[0],M[1],M[2],E[0],E[1],E[2],R,S,L[0],L[1],L[2],L[3],M[0],M[1],M[2],E[0],E[1],E[2],R,-S,L[0],L[1],L[2],L[3],E[0],E[1],E[2],M[0],M[1],M[2],z,-S,Q[0],Q[1],Q[2],Q[3],E[0],E[1],E[2],M[0],M[1],M[2],z,S,Q[0],Q[1],Q[2],Q[3]);F+=4}}this.buffer.update(x);y.push(z);A.push(u[u.length-1].slice());this.bounds=D;this.vertexCount=F;this.points=A;this.arcLength=y;if("dashes"in r){r=r.dashes.slice();r.unshift(0);for(N=1;N<r.length;++N)r[N]=
r[N-1]+r[N];w=c(Array(1024),[256,1,4]);for(N=0;256>N;++N){for(t=0;4>t;++t)w.set(N,0,t,0);l.le(r,r[r.length-1]*N/255)&1?w.set(N,0,0,0):w.set(N,0,0,255)}this.texture.setPixels(w)}};a.dispose=function(){this.shader.dispose();this.vao.dispose();this.buffer.dispose()};a.pick=function(r){if(!r||r.id!==this.pickId)return null;var t=r.value[0];var w=r.value[1];r=r.value[2];e[0]=0;e[1]=r;e[2]=w;e[3]=t;t=h[0];r=l.le(this.arcLength,t);if(0>r)return null;if(r===this.arcLength.length-1)return new n(this.arcLength[this.arcLength.length-
1],this.points[this.points.length-1].slice(),r);var x=this.points[r],y=this.points[Math.min(r+1,this.points.length-1)],A=(t-this.arcLength[r])/(this.arcLength[r+1]-this.arcLength[r]),z=1-A;w=[0,0,0];for(var F=0;3>F;++F)w[F]=z*x[F]+A*y[F];r=Math.min(.5>A?r:r+1,this.points.length-1);return new n(t,w,r,this.points[r])}},{"./lib/shaders":270,"binary-search-bounds":96,"gl-buffer":258,"gl-texture2d":327,"gl-vao":332,ndarray:469}],272:[function(a,G,C){G.exports=function(q){var n=new Float32Array(16);n[0]=
q[0];n[1]=q[1];n[2]=q[2];n[3]=q[3];n[4]=q[4];n[5]=q[5];n[6]=q[6];n[7]=q[7];n[8]=q[8];n[9]=q[9];n[10]=q[10];n[11]=q[11];n[12]=q[12];n[13]=q[13];n[14]=q[14];n[15]=q[15];return n}},{}],273:[function(a,G,C){G.exports=function(){var q=new Float32Array(16);q[0]=1;q[1]=0;q[2]=0;q[3]=0;q[4]=0;q[5]=1;q[6]=0;q[7]=0;q[8]=0;q[9]=0;q[10]=1;q[11]=0;q[12]=0;q[13]=0;q[14]=0;q[15]=1;return q}},{}],274:[function(a,G,C){G.exports=function(q){var n=q[0],m=q[1],f=q[2],b=q[3],k=q[4],e=q[5],h=q[6],l=q[7],c=q[8],g=q[9],
d=q[10],p=q[11],r=q[12],t=q[13],w=q[14];q=q[15];return(n*e-m*k)*(d*q-p*w)-(n*h-f*k)*(g*q-p*t)+(n*l-b*k)*(g*w-d*t)+(m*h-f*e)*(c*q-p*r)-(m*l-b*e)*(c*w-d*r)+(f*l-b*h)*(c*t-g*r)}},{}],275:[function(a,G,C){G.exports=function(q,n){var m=n[0],f=n[1],b=n[2];n=n[3];var k=m+m,e=f+f,h=b+b;m*=k;var l=f*k;f*=e;var c=b*k,g=b*e;b*=h;k*=n;e*=n;n*=h;q[0]=1-f-b;q[1]=l+n;q[2]=c-e;q[3]=0;q[4]=l-n;q[5]=1-m-b;q[6]=g+k;q[7]=0;q[8]=c+e;q[9]=g-k;q[10]=1-m-f;q[11]=0;q[12]=0;q[13]=0;q[14]=0;q[15]=1;return q}},{}],276:[function(a,
G,C){G.exports=function(q,n,m){var f=n[0],b=n[1],k=n[2],e=n[3],h=f+f,l=b+b,c=k+k;n=f*h;var g=f*l;f*=c;var d=b*l;b*=c;k*=c;h*=e;l*=e;e*=c;q[0]=1-(d+k);q[1]=g+e;q[2]=f-l;q[3]=0;q[4]=g-e;q[5]=1-(n+k);q[6]=b+h;q[7]=0;q[8]=f+l;q[9]=b-h;q[10]=1-(n+d);q[11]=0;q[12]=m[0];q[13]=m[1];q[14]=m[2];q[15]=1;return q}},{}],277:[function(a,G,C){G.exports=function(q){q[0]=1;q[1]=0;q[2]=0;q[3]=0;q[4]=0;q[5]=1;q[6]=0;q[7]=0;q[8]=0;q[9]=0;q[10]=1;q[11]=0;q[12]=0;q[13]=0;q[14]=0;q[15]=1;return q}},{}],278:[function(a,
G,C){G.exports=function(q,n){var m=n[0],f=n[1],b=n[2],k=n[3],e=n[4],h=n[5],l=n[6],c=n[7],g=n[8],d=n[9],p=n[10],r=n[11],t=n[12],w=n[13],x=n[14];n=n[15];var y=m*h-f*e,A=m*l-b*e,z=m*c-k*e,F=f*l-b*h,D=f*c-k*h,u=b*c-k*l,B=g*w-d*t,I=g*x-p*t,J=g*n-r*t,N=d*x-p*w,M=d*n-r*w,E=p*n-r*x,L=y*E-A*M+z*N+F*J-D*I+u*B;if(!L)return null;L=1/L;q[0]=(h*E-l*M+c*N)*L;q[1]=(b*M-f*E-k*N)*L;q[2]=(w*u-x*D+n*F)*L;q[3]=(p*D-d*u-r*F)*L;q[4]=(l*J-e*E-c*I)*L;q[5]=(m*E-b*J+k*I)*L;q[6]=(x*z-t*u-n*A)*L;q[7]=(g*u-p*z+r*A)*L;q[8]=(e*
M-h*J+c*B)*L;q[9]=(f*J-m*M-k*B)*L;q[10]=(t*D-w*z+n*y)*L;q[11]=(d*z-g*D-r*y)*L;q[12]=(h*I-e*N-l*B)*L;q[13]=(m*N-f*I+b*B)*L;q[14]=(w*A-t*F-x*y)*L;q[15]=(g*F-d*A+p*y)*L;return q}},{}],279:[function(a,G,C){var q=a("./identity");G.exports=function(n,m,f,b){var k=m[0],e=m[1];m=m[2];var h=b[0];var l=b[1];var c=b[2];var g=f[0];b=f[1];var d=f[2];if(1E-6>Math.abs(k-g)&&1E-6>Math.abs(e-b)&&1E-6>Math.abs(m-d))return q(n);f=k-g;b=e-b;g=m-d;var p=1/Math.sqrt(f*f+b*b+g*g);f*=p;b*=p;g*=p;d=l*g-c*b;c=c*f-h*g;h=h*
b-l*f;(p=Math.sqrt(d*d+c*c+h*h))?(p=1/p,d*=p,c*=p,h*=p):h=c=d=0;l=b*h-g*c;var r=g*d-f*h;var t=f*c-b*d;(p=Math.sqrt(l*l+r*r+t*t))?(p=1/p,l*=p,r*=p,t*=p):t=r=l=0;n[0]=d;n[1]=l;n[2]=f;n[3]=0;n[4]=c;n[5]=r;n[6]=b;n[7]=0;n[8]=h;n[9]=t;n[10]=g;n[11]=0;n[12]=-(d*k+c*e+h*m);n[13]=-(l*k+r*e+t*m);n[14]=-(f*k+b*e+g*m);n[15]=1;return n}},{"./identity":277}],280:[function(a,G,C){G.exports=function(q,n,m){var f=n[0],b=n[1],k=n[2],e=n[3],h=n[4],l=n[5],c=n[6],g=n[7],d=n[8],p=n[9],r=n[10],t=n[11],w=n[12],x=n[13],
y=n[14];n=n[15];var A=m[0],z=m[1],F=m[2],D=m[3];q[0]=A*f+z*h+F*d+D*w;q[1]=A*b+z*l+F*p+D*x;q[2]=A*k+z*c+F*r+D*y;q[3]=A*e+z*g+F*t+D*n;A=m[4];z=m[5];F=m[6];D=m[7];q[4]=A*f+z*h+F*d+D*w;q[5]=A*b+z*l+F*p+D*x;q[6]=A*k+z*c+F*r+D*y;q[7]=A*e+z*g+F*t+D*n;A=m[8];z=m[9];F=m[10];D=m[11];q[8]=A*f+z*h+F*d+D*w;q[9]=A*b+z*l+F*p+D*x;q[10]=A*k+z*c+F*r+D*y;q[11]=A*e+z*g+F*t+D*n;A=m[12];z=m[13];F=m[14];D=m[15];q[12]=A*f+z*h+F*d+D*w;q[13]=A*b+z*l+F*p+D*x;q[14]=A*k+z*c+F*r+D*y;q[15]=A*e+z*g+F*t+D*n;return q}},{}],281:[function(a,
G,C){G.exports=function(q,n,m,f,b,k,e){var h=1/(n-m),l=1/(f-b),c=1/(k-e);q[0]=-2*h;q[1]=0;q[2]=0;q[3]=0;q[4]=0;q[5]=-2*l;q[6]=0;q[7]=0;q[8]=0;q[9]=0;q[10]=2*c;q[11]=0;q[12]=(n+m)*h;q[13]=(b+f)*l;q[14]=(e+k)*c;q[15]=1;return q}},{}],282:[function(a,G,C){G.exports=function(q,n,m,f,b){n=1/Math.tan(n/2);var k=1/(f-b);q[0]=n/m;q[1]=0;q[2]=0;q[3]=0;q[4]=0;q[5]=n;q[6]=0;q[7]=0;q[8]=0;q[9]=0;q[10]=(b+f)*k;q[11]=-1;q[12]=0;q[13]=0;q[14]=2*b*f*k;q[15]=0;return q}},{}],283:[function(a,G,C){G.exports=function(q,
n,m,f){var b=f[0],k=f[1];f=f[2];var e=Math.sqrt(b*b+k*k+f*f);if(1E-6>Math.abs(e))return null;e=1/e;b*=e;k*=e;f*=e;var h=Math.sin(m);var l=Math.cos(m);var c=1-l;m=n[0];e=n[1];var g=n[2];var d=n[3];var p=n[4];var r=n[5];var t=n[6];var w=n[7];var x=n[8];var y=n[9];var A=n[10];var z=n[11];var F=b*b*c+l;var D=k*b*c+f*h;var u=f*b*c-k*h;var B=b*k*c-f*h;var I=k*k*c+l;var J=f*k*c+b*h;var N=b*f*c+k*h;b=k*f*c-b*h;k=f*f*c+l;q[0]=m*F+p*D+x*u;q[1]=e*F+r*D+y*u;q[2]=g*F+t*D+A*u;q[3]=d*F+w*D+z*u;q[4]=m*B+p*I+x*J;
q[5]=e*B+r*I+y*J;q[6]=g*B+t*I+A*J;q[7]=d*B+w*I+z*J;q[8]=m*N+p*b+x*k;q[9]=e*N+r*b+y*k;q[10]=g*N+t*b+A*k;q[11]=d*N+w*b+z*k;n!==q&&(q[12]=n[12],q[13]=n[13],q[14]=n[14],q[15]=n[15]);return q}},{}],284:[function(a,G,C){G.exports=function(q,n,m){var f=Math.sin(m);m=Math.cos(m);var b=n[4],k=n[5],e=n[6],h=n[7],l=n[8],c=n[9],g=n[10],d=n[11];n!==q&&(q[0]=n[0],q[1]=n[1],q[2]=n[2],q[3]=n[3],q[12]=n[12],q[13]=n[13],q[14]=n[14],q[15]=n[15]);q[4]=b*m+l*f;q[5]=k*m+c*f;q[6]=e*m+g*f;q[7]=h*m+d*f;q[8]=l*m-b*f;q[9]=
c*m-k*f;q[10]=g*m-e*f;q[11]=d*m-h*f;return q}},{}],285:[function(a,G,C){G.exports=function(q,n,m){var f=Math.sin(m);m=Math.cos(m);var b=n[0],k=n[1],e=n[2],h=n[3],l=n[8],c=n[9],g=n[10],d=n[11];n!==q&&(q[4]=n[4],q[5]=n[5],q[6]=n[6],q[7]=n[7],q[12]=n[12],q[13]=n[13],q[14]=n[14],q[15]=n[15]);q[0]=b*m-l*f;q[1]=k*m-c*f;q[2]=e*m-g*f;q[3]=h*m-d*f;q[8]=b*f+l*m;q[9]=k*f+c*m;q[10]=e*f+g*m;q[11]=h*f+d*m;return q}},{}],286:[function(a,G,C){G.exports=function(q,n,m){var f=Math.sin(m);m=Math.cos(m);var b=n[0],k=
n[1],e=n[2],h=n[3],l=n[4],c=n[5],g=n[6],d=n[7];n!==q&&(q[8]=n[8],q[9]=n[9],q[10]=n[10],q[11]=n[11],q[12]=n[12],q[13]=n[13],q[14]=n[14],q[15]=n[15]);q[0]=b*m+l*f;q[1]=k*m+c*f;q[2]=e*m+g*f;q[3]=h*m+d*f;q[4]=l*m-b*f;q[5]=c*m-k*f;q[6]=g*m-e*f;q[7]=d*m-h*f;return q}},{}],287:[function(a,G,C){G.exports=function(q,n,m){var f=m[0],b=m[1];m=m[2];q[0]=n[0]*f;q[1]=n[1]*f;q[2]=n[2]*f;q[3]=n[3]*f;q[4]=n[4]*b;q[5]=n[5]*b;q[6]=n[6]*b;q[7]=n[7]*b;q[8]=n[8]*m;q[9]=n[9]*m;q[10]=n[10]*m;q[11]=n[11]*m;q[12]=n[12];q[13]=
n[13];q[14]=n[14];q[15]=n[15];return q}},{}],288:[function(a,G,C){G.exports=function(q,n,m){var f=m[0],b=m[1];m=m[2];if(n===q)q[12]=n[0]*f+n[4]*b+n[8]*m+n[12],q[13]=n[1]*f+n[5]*b+n[9]*m+n[13],q[14]=n[2]*f+n[6]*b+n[10]*m+n[14],q[15]=n[3]*f+n[7]*b+n[11]*m+n[15];else{var k=n[0];var e=n[1];var h=n[2];var l=n[3];var c=n[4];var g=n[5];var d=n[6];var p=n[7];var r=n[8];var t=n[9];var w=n[10];var x=n[11];q[0]=k;q[1]=e;q[2]=h;q[3]=l;q[4]=c;q[5]=g;q[6]=d;q[7]=p;q[8]=r;q[9]=t;q[10]=w;q[11]=x;q[12]=k*f+c*b+r*
m+n[12];q[13]=e*f+g*b+t*m+n[13];q[14]=h*f+d*b+w*m+n[14];q[15]=l*f+p*b+x*m+n[15]}return q}},{}],289:[function(a,G,C){G.exports=function(q,n){if(q===n){var m=n[1],f=n[2],b=n[3],k=n[6],e=n[7],h=n[11];q[1]=n[4];q[2]=n[8];q[3]=n[12];q[4]=m;q[6]=n[9];q[7]=n[13];q[8]=f;q[9]=k;q[11]=n[14];q[12]=b;q[13]=e;q[14]=h}else q[0]=n[0],q[1]=n[4],q[2]=n[8],q[3]=n[12],q[4]=n[1],q[5]=n[5],q[6]=n[9],q[7]=n[13],q[8]=n[2],q[9]=n[6],q[10]=n[10],q[11]=n[14],q[12]=n[3],q[13]=n[7],q[14]=n[11],q[15]=n[15];return q}},{}],290:[function(a,
G,C){function q(f,b){for(var k=[0,0,0,0],e=0;4>e;++e)for(var h=0;4>h;++h)k[h]+=f[4*e+h]*b[e];return k}var n=a("barycentric"),m=a("polytope-closest-point/lib/closest_point_2d.js");G.exports=function(f,b,k,e,h,l){if(1===f.length)return[0,f[0].slice()];for(var c=Array(f.length),g=0;g<f.length;++g){var d=g,p=f[g],r=l;p=q(h,q(e,q(k,[p[0],p[1],p[2],1])));for(var t=0;3>t;++t)p[t]/=p[3];c[d]=[.5*r[0]*(1+p[0]),.5*r[1]*(1-p[1])]}k=0;e=Infinity;for(g=0;g<c.length;++g){for(l=h=0;2>l;++l)h+=Math.pow(c[g][l]-b[l],
2);h<e&&(e=h,k=g)}if(2===c.length){for(h=e=g=0;2>h;++h)g+=Math.pow(b[h]-c[0][h],2),e+=Math.pow(b[h]-c[1][h],2);g=Math.sqrt(g);e=Math.sqrt(e);b=1E-6>g+e?[1,0]:[e/(g+e),g/(e+g)]}else 3===c.length?(g=[0,0],m(c[0],c[1],c[2],b,g),b=n(c,g)):b=[];for(g=c=0;3>g;++g){if(-.001>b[g]||1.0001<b[g])return null;c+=b[g]}if(.001<Math.abs(c-1))return null;c=[0,0,0];for(g=0;g<f.length;++g)for(e=f[g],h=b[g],l=0;3>l;++l)c[l]+=h*e[l];return[k,c,b]}},{barycentric:78,"polytope-closest-point/lib/closest_point_2d.js":499}],
291:[function(a,G,C){var q=a("glslify");a=q(["precision highp float;\n#define GLSLIFY 1\n\nattribute vec3 position, normal;\nattribute vec4 color;\nattribute vec2 uv;\n\nuniform mat4 model\n           , view\n           , projection\n           , inverseModel;\nuniform vec3 eyePosition\n           , lightPosition;\n\nvarying vec3 f_normal\n           , f_lightDirection\n           , f_eyeDirection\n           , f_data;\nvarying vec4 f_color;\nvarying vec2 f_uv;\n\nvec4 project(vec3 p) {\n  return projection * view * model * vec4(p, 1.0);\n}\n\nvoid main() {\n  gl_Position      \x3d project(position);\n\n  //Lighting geometry parameters\n  vec4 cameraCoordinate \x3d view * vec4(position , 1.0);\n  cameraCoordinate.xyz /\x3d cameraCoordinate.w;\n  f_lightDirection \x3d lightPosition - cameraCoordinate.xyz;\n  f_eyeDirection   \x3d eyePosition - cameraCoordinate.xyz;\n  f_normal  \x3d normalize((vec4(normal, 0.0) * inverseModel).xyz);\n\n  f_color          \x3d color;\n  f_data           \x3d position;\n  f_uv             \x3d uv;\n}\n"]);
G=q(["#extension GL_OES_standard_derivatives : enable\n\nprecision highp float;\n#define GLSLIFY 1\n\nfloat beckmannDistribution(float x, float roughness) {\n  float NdotH \x3d max(x, 0.0001);\n  float cos2Alpha \x3d NdotH * NdotH;\n  float tan2Alpha \x3d (cos2Alpha - 1.0) / cos2Alpha;\n  float roughness2 \x3d roughness * roughness;\n  float denom \x3d 3.141592653589793 * roughness2 * cos2Alpha * cos2Alpha;\n  return exp(tan2Alpha / roughness2) / denom;\n}\n\nfloat cookTorranceSpecular(\n  vec3 lightDirection,\n  vec3 viewDirection,\n  vec3 surfaceNormal,\n  float roughness,\n  float fresnel) {\n\n  float VdotN \x3d max(dot(viewDirection, surfaceNormal), 0.0);\n  float LdotN \x3d max(dot(lightDirection, surfaceNormal), 0.0);\n\n  //Half angle vector\n  vec3 H \x3d normalize(lightDirection + viewDirection);\n\n  //Geometric term\n  float NdotH \x3d max(dot(surfaceNormal, H), 0.0);\n  float VdotH \x3d max(dot(viewDirection, H), 0.000001);\n  float LdotH \x3d max(dot(lightDirection, H), 0.000001);\n  float G1 \x3d (2.0 * NdotH * VdotN) / VdotH;\n  float G2 \x3d (2.0 * NdotH * LdotN) / LdotH;\n  float G \x3d min(1.0, min(G1, G2));\n  \n  //Distribution term\n  float D \x3d beckmannDistribution(NdotH, roughness);\n\n  //Fresnel term\n  float F \x3d pow(1.0 - VdotN, fresnel);\n\n  //Multiply terms and done\n  return  G * F * D / max(3.14159265 * VdotN, 0.000001);\n}\n\n//#pragma glslify: beckmann \x3d require(glsl-specular-beckmann) // used in gl-surface3d\n\nbool outOfRange(float a, float b, float p) {\n  return ((p \x3e max(a, b)) || \n          (p \x3c min(a, b)));\n}\n\nbool outOfRange(vec2 a, vec2 b, vec2 p) {\n  return (outOfRange(a.x, b.x, p.x) ||\n          outOfRange(a.y, b.y, p.y));\n}\n\nbool outOfRange(vec3 a, vec3 b, vec3 p) {\n  return (outOfRange(a.x, b.x, p.x) ||\n          outOfRange(a.y, b.y, p.y) ||\n          outOfRange(a.z, b.z, p.z));\n}\n\nbool outOfRange(vec4 a, vec4 b, vec4 p) {\n  return outOfRange(a.xyz, b.xyz, p.xyz);\n}\n\nuniform vec3 clipBounds[2];\nuniform float roughness\n            , fresnel\n            , kambient\n            , kdiffuse\n            , kspecular;\nuniform sampler2D texture;\n\nvarying vec3 f_normal\n           , f_lightDirection\n           , f_eyeDirection\n           , f_data;\nvarying vec4 f_color;\nvarying vec2 f_uv;\n\nvoid main() {\n  if (f_color.a \x3d\x3d 0.0 ||\n    outOfRange(clipBounds[0], clipBounds[1], f_data)\n  ) discard;\n\n  vec3 N \x3d normalize(f_normal);\n  vec3 L \x3d normalize(f_lightDirection);\n  vec3 V \x3d normalize(f_eyeDirection);\n\n  if(gl_FrontFacing) {\n    N \x3d -N;\n  }\n\n  float specular \x3d min(1.0, max(0.0, cookTorranceSpecular(L, V, N, roughness, fresnel)));\n  //float specular \x3d max(0.0, beckmann(L, V, N, roughness)); // used in gl-surface3d\n\n  float diffuse  \x3d min(kambient + kdiffuse * max(dot(N, L), 0.0), 1.0);\n\n  vec4 surfaceColor \x3d vec4(f_color.rgb, 1.0) * texture2D(texture, f_uv);\n  vec4 litColor \x3d surfaceColor.a * vec4(diffuse * surfaceColor.rgb + kspecular * vec3(1,1,1) * specular,  1.0);\n\n  gl_FragColor \x3d litColor * f_color.a;\n}\n"]);
var n=q(["precision highp float;\n#define GLSLIFY 1\n\nattribute vec3 position;\nattribute vec4 color;\nattribute vec2 uv;\n\nuniform mat4 model, view, projection;\n\nvarying vec4 f_color;\nvarying vec3 f_data;\nvarying vec2 f_uv;\n\nvoid main() {\n  gl_Position \x3d projection * view * model * vec4(position, 1.0);\n  f_color \x3d color;\n  f_data  \x3d position;\n  f_uv    \x3d uv;\n}"]),m=q(["precision highp float;\n#define GLSLIFY 1\n\nbool outOfRange(float a, float b, float p) {\n  return ((p \x3e max(a, b)) || \n          (p \x3c min(a, b)));\n}\n\nbool outOfRange(vec2 a, vec2 b, vec2 p) {\n  return (outOfRange(a.x, b.x, p.x) ||\n          outOfRange(a.y, b.y, p.y));\n}\n\nbool outOfRange(vec3 a, vec3 b, vec3 p) {\n  return (outOfRange(a.x, b.x, p.x) ||\n          outOfRange(a.y, b.y, p.y) ||\n          outOfRange(a.z, b.z, p.z));\n}\n\nbool outOfRange(vec4 a, vec4 b, vec4 p) {\n  return outOfRange(a.xyz, b.xyz, p.xyz);\n}\n\nuniform vec3 clipBounds[2];\nuniform sampler2D texture;\nuniform float opacity;\n\nvarying vec4 f_color;\nvarying vec3 f_data;\nvarying vec2 f_uv;\n\nvoid main() {\n  if (outOfRange(clipBounds[0], clipBounds[1], f_data)) discard;\n\n  gl_FragColor \x3d f_color * texture2D(texture, f_uv) * opacity;\n}"]),
f=q(["precision highp float;\n#define GLSLIFY 1\n\nbool outOfRange(float a, float b, float p) {\n  return ((p \x3e max(a, b)) || \n          (p \x3c min(a, b)));\n}\n\nbool outOfRange(vec2 a, vec2 b, vec2 p) {\n  return (outOfRange(a.x, b.x, p.x) ||\n          outOfRange(a.y, b.y, p.y));\n}\n\nbool outOfRange(vec3 a, vec3 b, vec3 p) {\n  return (outOfRange(a.x, b.x, p.x) ||\n          outOfRange(a.y, b.y, p.y) ||\n          outOfRange(a.z, b.z, p.z));\n}\n\nbool outOfRange(vec4 a, vec4 b, vec4 p) {\n  return outOfRange(a.xyz, b.xyz, p.xyz);\n}\n\nattribute vec3 position;\nattribute vec4 color;\nattribute vec2 uv;\nattribute float pointSize;\n\nuniform mat4 model, view, projection;\nuniform vec3 clipBounds[2];\n\nvarying vec4 f_color;\nvarying vec2 f_uv;\n\nvoid main() {\n  if (outOfRange(clipBounds[0], clipBounds[1], position)) {\n\n    gl_Position \x3d vec4(0.0, 0.0 ,0.0 ,0.0);\n  } else {\n    gl_Position \x3d projection * view * model * vec4(position, 1.0);\n  }\n  gl_PointSize \x3d pointSize;\n  f_color \x3d color;\n  f_uv \x3d uv;\n}"]),
b=q(["precision highp float;\n#define GLSLIFY 1\n\nuniform sampler2D texture;\nuniform float opacity;\n\nvarying vec4 f_color;\nvarying vec2 f_uv;\n\nvoid main() {\n  vec2 pointR \x3d gl_PointCoord.xy - vec2(0.5, 0.5);\n  if(dot(pointR, pointR) \x3e 0.25) {\n    discard;\n  }\n  gl_FragColor \x3d f_color * texture2D(texture, f_uv) * opacity;\n}"]),k=q(["precision highp float;\n#define GLSLIFY 1\n\nattribute vec3 position;\nattribute vec4 id;\n\nuniform mat4 model, view, projection;\n\nvarying vec3 f_position;\nvarying vec4 f_id;\n\nvoid main() {\n  gl_Position \x3d projection * view * model * vec4(position, 1.0);\n  f_id        \x3d id;\n  f_position  \x3d position;\n}"]),
e=q(["precision highp float;\n#define GLSLIFY 1\n\nbool outOfRange(float a, float b, float p) {\n  return ((p \x3e max(a, b)) || \n          (p \x3c min(a, b)));\n}\n\nbool outOfRange(vec2 a, vec2 b, vec2 p) {\n  return (outOfRange(a.x, b.x, p.x) ||\n          outOfRange(a.y, b.y, p.y));\n}\n\nbool outOfRange(vec3 a, vec3 b, vec3 p) {\n  return (outOfRange(a.x, b.x, p.x) ||\n          outOfRange(a.y, b.y, p.y) ||\n          outOfRange(a.z, b.z, p.z));\n}\n\nbool outOfRange(vec4 a, vec4 b, vec4 p) {\n  return outOfRange(a.xyz, b.xyz, p.xyz);\n}\n\nuniform vec3  clipBounds[2];\nuniform float pickId;\n\nvarying vec3 f_position;\nvarying vec4 f_id;\n\nvoid main() {\n  if (outOfRange(clipBounds[0], clipBounds[1], f_position)) discard;\n\n  gl_FragColor \x3d vec4(pickId, f_id.xyz);\n}"]),
h=q(["precision highp float;\n#define GLSLIFY 1\n\nbool outOfRange(float a, float b, float p) {\n  return ((p \x3e max(a, b)) || \n          (p \x3c min(a, b)));\n}\n\nbool outOfRange(vec2 a, vec2 b, vec2 p) {\n  return (outOfRange(a.x, b.x, p.x) ||\n          outOfRange(a.y, b.y, p.y));\n}\n\nbool outOfRange(vec3 a, vec3 b, vec3 p) {\n  return (outOfRange(a.x, b.x, p.x) ||\n          outOfRange(a.y, b.y, p.y) ||\n          outOfRange(a.z, b.z, p.z));\n}\n\nbool outOfRange(vec4 a, vec4 b, vec4 p) {\n  return outOfRange(a.xyz, b.xyz, p.xyz);\n}\n\nattribute vec3  position;\nattribute float pointSize;\nattribute vec4  id;\n\nuniform mat4 model, view, projection;\nuniform vec3 clipBounds[2];\n\nvarying vec3 f_position;\nvarying vec4 f_id;\n\nvoid main() {\n  if (outOfRange(clipBounds[0], clipBounds[1], position)) {\n\n    gl_Position \x3d vec4(0.0, 0.0, 0.0, 0.0);\n  } else {\n    gl_Position  \x3d projection * view * model * vec4(position, 1.0);\n    gl_PointSize \x3d pointSize;\n  }\n  f_id         \x3d id;\n  f_position   \x3d position;\n}"]),
l=q(["precision highp float;\n#define GLSLIFY 1\n\nattribute vec3 position;\n\nuniform mat4 model, view, projection;\n\nvoid main() {\n  gl_Position \x3d projection * view * model * vec4(position, 1.0);\n}"]);q=q(["precision highp float;\n#define GLSLIFY 1\n\nuniform vec3 contourColor;\n\nvoid main() {\n  gl_FragColor \x3d vec4(contourColor, 1.0);\n}\n"]);C.meshShader={vertex:a,fragment:G,attributes:[{name:"position",type:"vec3"},{name:"normal",type:"vec3"},{name:"color",type:"vec4"},{name:"uv",type:"vec2"}]};
C.wireShader={vertex:n,fragment:m,attributes:[{name:"position",type:"vec3"},{name:"color",type:"vec4"},{name:"uv",type:"vec2"}]};C.pointShader={vertex:f,fragment:b,attributes:[{name:"position",type:"vec3"},{name:"color",type:"vec4"},{name:"uv",type:"vec2"},{name:"pointSize",type:"float"}]};C.pickShader={vertex:k,fragment:e,attributes:[{name:"position",type:"vec3"},{name:"id",type:"vec4"}]};C.pointPickShader={vertex:h,fragment:e,attributes:[{name:"position",type:"vec3"},{name:"pointSize",type:"float"},
{name:"id",type:"vec4"}]};C.contourShader={vertex:l,fragment:q,attributes:[{name:"position",type:"vec3"}]}},{glslify:413}],292:[function(a,G,C){function q(u,B,I,J,N,M,E,L,Q,S,R,O,T,V,X,ba,aa,ka,ha,ca,sa,ma,ra,qa,Y,pa,oa){this.gl=u;this.pixelRatio=1;this.cells=[];this.positions=[];this.intensity=[];this.texture=B;this.dirty=!0;this.triShader=I;this.lineShader=J;this.pointShader=N;this.pickShader=M;this.pointPickShader=E;this.contourShader=L;this.trianglePositions=Q;this.triangleColors=R;this.triangleNormals=
T;this.triangleUVs=O;this.triangleIds=S;this.triangleVAO=V;this.triangleCount=0;this.lineWidth=1;this.edgePositions=X;this.edgeColors=aa;this.edgeUVs=ka;this.edgeIds=ba;this.edgeVAO=ha;this.edgeCount=0;this.pointPositions=ca;this.pointColors=ma;this.pointUVs=ra;this.pointSizes=qa;this.pointIds=sa;this.pointVAO=Y;this.pointCount=0;this.contourLineWidth=1;this.contourPositions=pa;this.contourVAO=oa;this.contourCount=0;this.contourColor=[0,0,0];this.pickVertex=this.contourEnable=!0;this.pickId=1;this.bounds=
[[Infinity,Infinity,Infinity],[-Infinity,-Infinity,-Infinity]];this.clipBounds=[[-Infinity,-Infinity,-Infinity],[Infinity,Infinity,Infinity]];this.lightPosition=[1E5,1E5,0];this.diffuseLight=this.ambientLight=.8;this.specularLight=2;this.roughness=.5;this.fresnel=1.5;this.opacity=1;this.opacityscale=this.hasAlpha=!1;this._projection=this._view=this._model=D;this._resolution=[1,1]}function n(u,B){if(!B||!B.length)return 1;for(var I=0;I<B.length&&!(2>B.length);++I){if(B[I][0]===u)return B[I][1];if(B[I][0]>
u&&0<I)return u=(B[I][0]-u)/(B[I][0]-B[I-1][0]),B[I][1]*(1-u)+u*B[I-1][1]}return 1}function m(u,B){u=d({colormap:u,nshades:256,format:"rgba"});for(var I=new Uint8Array(1024),J=0;256>J;++J){for(var N=u[J],M=0;3>M;++M)I[4*J+M]=N[M];I[4*J+3]=B?255*n(J/255,B):255*N[3]}return g(I,[256,256,4],[4,0,1])}var f=a("gl-shader"),b=a("gl-buffer"),k=a("gl-vao"),e=a("gl-texture2d"),h=a("normals"),l=a("gl-mat4/multiply"),c=a("gl-mat4/invert"),g=a("ndarray"),d=a("colormap"),p=a("simplicial-complex-contour"),r=a("typedarray-pool");
C=a("./lib/shaders");var t=a("./lib/closest-point"),w=C.meshShader,x=C.wireShader,y=C.pointShader,A=C.pickShader,z=C.pointPickShader,F=C.contourShader,D=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1];a=q.prototype;a.isOpaque=function(){return!this.hasAlpha};a.isTransparent=function(){return this.hasAlpha};a.pickSlots=1;a.setPickBase=function(u){this.pickId=u};a.highlight=function(u){if(u&&this.contourEnable){var B=p(this.cells,this.intensity,u.intensity);u=B.cells;var I=B.vertexIds;B=B.vertexWeights;for(var J=
u.length,N=r.mallocFloat32(6*J),M=0,E=0;E<J;++E)for(var L=u[E],Q=0;2>Q;++Q){var S=L[0];2===L.length&&(S=L[Q]);var R=B[S],O=1-R,T=this.positions[I[S][0]];S=this.positions[I[S][1]];for(var V=0;3>V;++V)N[M++]=R*T[V]+O*S[V]}this.contourCount=M/3|0;this.contourPositions.update(N.subarray(0,M));r.free(N)}else this.contourCount=0};a.update=function(u){u=u||{};var B=this.gl;this.dirty=!0;"contourEnable"in u&&(this.contourEnable=u.contourEnable);"contourColor"in u&&(this.contourColor=u.contourColor);"lineWidth"in
u&&(this.lineWidth=u.lineWidth);"lightPosition"in u&&(this.lightPosition=u.lightPosition);this.hasAlpha=!1;"opacity"in u&&(this.opacity=u.opacity,1>this.opacity&&(this.hasAlpha=!0));"opacityscale"in u&&(this.opacityscale=u.opacityscale,this.hasAlpha=!0);"ambient"in u&&(this.ambientLight=u.ambient);"diffuse"in u&&(this.diffuseLight=u.diffuse);"specular"in u&&(this.specularLight=u.specular);"roughness"in u&&(this.roughness=u.roughness);"fresnel"in u&&(this.fresnel=u.fresnel);u.texture?(this.texture.dispose(),
this.texture=e(B,u.texture)):u.colormap&&(this.texture.shape=[256,256],this.texture.minFilter=B.LINEAR_MIPMAP_LINEAR,this.texture.magFilter=B.LINEAR,this.texture.setPixels(m(u.colormap,this.opacityscale)),this.texture.generateMipmap());B=u.cells;var I=u.positions;if(I&&B){var J=[],N=[],M=[],E=[],L=[],Q=[],S=[],R=[],O=[],T=[],V=[],X=[],ba=[],aa=[];this.cells=B;this.positions=I;var ka=u.vertexNormals,ha=u.cellNormals,ca=void 0===u.vertexNormalsEpsilon?1E-6:u.vertexNormalsEpsilon,sa=void 0===u.faceNormalsEpsilon?
1E-6:u.faceNormalsEpsilon;u.useFacetNormals&&!ha&&(ha=h.faceNormals(B,I,sa));ha||ka||(ka=h.vertexNormals(B,I,ca));ca=u.vertexColors;sa=u.cellColors;var ma=u.meshColor||[1,1,1,1],ra=u.vertexUVs,qa=u.vertexIntensity,Y=u.cellUVs,pa=u.cellIntensity,oa=Infinity,ua=-Infinity;if(!ra&&!Y)if(qa)if(u.vertexIntensityBounds)oa=+u.vertexIntensityBounds[0],ua=+u.vertexIntensityBounds[1];else for(var ya=0;ya<qa.length;++ya){var ja=qa[ya];oa=Math.min(oa,ja);ua=Math.max(ua,ja)}else if(pa)if(u.cellIntensityBounds)oa=
+u.cellIntensityBounds[0],ua=+u.cellIntensityBounds[1];else for(ya=0;ya<pa.length;++ya)ja=pa[ya],oa=Math.min(oa,ja),ua=Math.max(ua,ja);else for(ya=0;ya<I.length;++ya)ja=I[ya][2],oa=Math.min(oa,ja),ua=Math.max(ua,ja);if(qa)this.intensity=qa;else if(pa)this.intensity=pa;else{ya=I.length;ja=Array(ya);for(var za=0;za<ya;++za)ja[za]=I[za][2];this.intensity=ja}this.pickVertex=!(pa||sa);ja=u.pointSizes;u=u.pointSize||1;this.bounds=[[Infinity,Infinity,Infinity],[-Infinity,-Infinity,-Infinity]];for(ya=0;ya<
I.length;++ya){var Ba=I[ya];for(za=0;3>za;++za)!isNaN(Ba[za])&&isFinite(Ba[za])&&(this.bounds[0][za]=Math.min(this.bounds[0][za],Ba[za]),this.bounds[1][za]=Math.max(this.bounds[1][za],Ba[za]))}var Ma=0,Oa=0,Ia=0;ya=0;a:for(;ya<B.length;++ya){var Pa=B[ya];switch(Pa.length){case 1:var Fa=Pa[0];Ba=I[Fa];for(za=0;3>za;++za)if(isNaN(Ba[za])||!isFinite(Ba[za]))continue a;T.push(Ba[0],Ba[1],Ba[2]);var Na=ca?ca[Fa]:sa?sa[ya]:ma;this.opacityscale&&qa?N.push(Na[0],Na[1],Na[2],this.opacity*n((qa[Fa]-oa)/(ua-
oa),this.opacityscale)):3===Na.length?V.push(Na[0],Na[1],Na[2],this.opacity):(V.push(Na[0],Na[1],Na[2],Na[3]*this.opacity),1>Na[3]&&(this.hasAlpha=!0));Ba=ra?ra[Fa]:qa?[(qa[Fa]-oa)/(ua-oa),0]:Y?Y[ya]:pa?[(pa[ya]-oa)/(ua-oa),0]:[(Ba[2]-oa)/(ua-oa),0];X.push(Ba[0],Ba[1]);ja?ba.push(ja[Fa]):ba.push(u);aa.push(ya);Ia+=1;break;case 2:for(za=0;2>za;++za)for(Fa=Pa[za],Ba=I[Fa],Fa=0;3>Fa;++Fa)if(isNaN(Ba[Fa])||!isFinite(Ba[Fa]))continue a;for(za=0;2>za;++za)Fa=Pa[za],Ba=I[Fa],Q.push(Ba[0],Ba[1],Ba[2]),Na=
ca?ca[Fa]:sa?sa[ya]:ma,this.opacityscale&&qa?N.push(Na[0],Na[1],Na[2],this.opacity*n((qa[Fa]-oa)/(ua-oa),this.opacityscale)):3===Na.length?S.push(Na[0],Na[1],Na[2],this.opacity):(S.push(Na[0],Na[1],Na[2],Na[3]*this.opacity),1>Na[3]&&(this.hasAlpha=!0)),Ba=ra?ra[Fa]:qa?[(qa[Fa]-oa)/(ua-oa),0]:Y?Y[ya]:pa?[(pa[ya]-oa)/(ua-oa),0]:[(Ba[2]-oa)/(ua-oa),0],R.push(Ba[0],Ba[1]),O.push(ya);Oa+=1;break;case 3:for(za=0;3>za;++za)for(Fa=Pa[za],Ba=I[Fa],Fa=0;3>Fa;++Fa)if(isNaN(Ba[Fa])||!isFinite(Ba[Fa]))continue a;
for(za=0;3>za;++za)Fa=Pa[2-za],Ba=I[Fa],J.push(Ba[0],Ba[1],Ba[2]),(Na=ca?ca[Fa]:sa?sa[ya]:ma)?this.opacityscale&&qa?N.push(Na[0],Na[1],Na[2],this.opacity*n((qa[Fa]-oa)/(ua-oa),this.opacityscale)):3===Na.length?N.push(Na[0],Na[1],Na[2],this.opacity):(N.push(Na[0],Na[1],Na[2],Na[3]*this.opacity),1>Na[3]&&(this.hasAlpha=!0)):N.push(.5,.5,.5,1),Ba=ra?ra[Fa]:qa?[(qa[Fa]-oa)/(ua-oa),0]:Y?Y[ya]:pa?[(pa[ya]-oa)/(ua-oa),0]:[(Ba[2]-oa)/(ua-oa),0],E.push(Ba[0],Ba[1]),Ba=ka?ka[Fa]:ha[ya],M.push(Ba[0],Ba[1],Ba[2]),
L.push(ya);Ma+=1}}this.pointCount=Ia;this.edgeCount=Oa;this.triangleCount=Ma;this.pointPositions.update(T);this.pointColors.update(V);this.pointUVs.update(X);this.pointSizes.update(ba);this.pointIds.update(new Uint32Array(aa));this.edgePositions.update(Q);this.edgeColors.update(S);this.edgeUVs.update(R);this.edgeIds.update(new Uint32Array(O));this.trianglePositions.update(J);this.triangleColors.update(N);this.triangleUVs.update(E);this.triangleNormals.update(M);this.triangleIds.update(new Uint32Array(L))}};
a.drawTransparent=a.draw=function(u){u=u||{};var B=this.gl,I=u.model||D,J=u.view||D,N=u.projection||D,M=[[-1E6,-1E6,-1E6],[1E6,1E6,1E6]];for(u=0;3>u;++u)M[0][u]=Math.max(M[0][u],this.clipBounds[0][u]),M[1][u]=Math.min(M[1][u],this.clipBounds[1][u]);I={model:I,view:J,projection:N,inverseModel:D.slice(),clipBounds:M,kambient:this.ambientLight,kdiffuse:this.diffuseLight,kspecular:this.specularLight,roughness:this.roughness,fresnel:this.fresnel,eyePosition:[0,0,0],lightPosition:[0,0,0],contourColor:this.contourColor,
texture:0};I.inverseModel=c(I.inverseModel,I.model);B.disable(B.CULL_FACE);this.texture.bind(0);J=Array(16);l(J,I.view,I.model);l(J,I.projection,J);c(J,J);for(u=0;3>u;++u)I.eyePosition[u]=J[12+u]/J[15];N=J[15];for(u=0;3>u;++u)N+=this.lightPosition[u]*J[4*u+3];for(u=0;3>u;++u){M=J[12+u];for(var E=0;3>E;++E)M+=J[4*E+u]*this.lightPosition[E];I.lightPosition[u]=M/N}0<this.triangleCount&&(u=this.triShader,u.bind(),u.uniforms=I,this.triangleVAO.bind(),B.drawArrays(B.TRIANGLES,0,3*this.triangleCount),this.triangleVAO.unbind());
0<this.edgeCount&&0<this.lineWidth&&(u=this.lineShader,u.bind(),u.uniforms=I,this.edgeVAO.bind(),B.lineWidth(this.lineWidth*this.pixelRatio),B.drawArrays(B.LINES,0,2*this.edgeCount),this.edgeVAO.unbind());0<this.pointCount&&(u=this.pointShader,u.bind(),u.uniforms=I,this.pointVAO.bind(),B.drawArrays(B.POINTS,0,this.pointCount),this.pointVAO.unbind());this.contourEnable&&0<this.contourCount&&0<this.contourLineWidth&&(u=this.contourShader,u.bind(),u.uniforms=I,this.contourVAO.bind(),B.drawArrays(B.LINES,
0,this.contourCount),this.contourVAO.unbind())};a.drawPick=function(u){u=u||{};var B=this.gl,I=u.model||D,J=u.view||D;u=u.projection||D;for(var N=[[-1E6,-1E6,-1E6],[1E6,1E6,1E6]],M=0;3>M;++M)N[0][M]=Math.max(N[0][M],this.clipBounds[0][M]),N[1][M]=Math.min(N[1][M],this.clipBounds[1][M]);this._model=[].slice.call(I);this._view=[].slice.call(J);this._projection=[].slice.call(u);this._resolution=[B.drawingBufferWidth,B.drawingBufferHeight];I={model:I,view:J,projection:u,clipBounds:N,pickId:this.pickId/
255};J=this.pickShader;J.bind();J.uniforms=I;0<this.triangleCount&&(this.triangleVAO.bind(),B.drawArrays(B.TRIANGLES,0,3*this.triangleCount),this.triangleVAO.unbind());0<this.edgeCount&&(this.edgeVAO.bind(),B.lineWidth(this.lineWidth*this.pixelRatio),B.drawArrays(B.LINES,0,2*this.edgeCount),this.edgeVAO.unbind());0<this.pointCount&&(J=this.pointPickShader,J.bind(),J.uniforms=I,this.pointVAO.bind(),B.drawArrays(B.POINTS,0,this.pointCount),this.pointVAO.unbind())};a.pick=function(u){if(!u||u.id!==this.pickId)return null;
for(var B=u.value[0]+256*u.value[1]+65536*u.value[2],I=this.cells[B],J=this.positions,N=Array(I.length),M=0;M<I.length;++M)N[M]=J[I[M]];M=u.coord[0];u=u.coord[1];if(!this.pickVertex){N=this.positions[I[0]];J=this.positions[I[1]];var E=this.positions[I[2]];return{_cellCenter:!0,position:[M,u],index:B,cell:I,cellId:B,intensity:this.intensity[B],dataCoordinate:[(N[0]+J[0]+E[0])/3,(N[1]+J[1]+E[1])/3,(N[2]+J[2]+E[2])/3]}}N=t(N,[M*this.pixelRatio,this._resolution[1]-u*this.pixelRatio],this._model,this._view,
this._projection,this._resolution);if(!N)return null;u=N[2];for(M=J=0;M<I.length;++M)J+=u[M]*this.intensity[I[M]];return{position:N[1],index:I[N[0]],cell:I,cellId:B,intensity:J,dataCoordinate:this.positions[I[N[0]]]}};a.dispose=function(){this.texture.dispose();this.triShader.dispose();this.lineShader.dispose();this.pointShader.dispose();this.pickShader.dispose();this.pointPickShader.dispose();this.triangleVAO.dispose();this.trianglePositions.dispose();this.triangleColors.dispose();this.triangleUVs.dispose();
this.triangleNormals.dispose();this.triangleIds.dispose();this.edgeVAO.dispose();this.edgePositions.dispose();this.edgeColors.dispose();this.edgeUVs.dispose();this.edgeIds.dispose();this.pointVAO.dispose();this.pointPositions.dispose();this.pointColors.dispose();this.pointUVs.dispose();this.pointSizes.dispose();this.pointIds.dispose();this.contourVAO.dispose();this.contourPositions.dispose();this.contourShader.dispose()};G.exports=function(u,B){1===arguments.length&&(B=u,u=B.gl);if(!(u.getExtension("OES_standard_derivatives")||
u.getExtension("MOZ_OES_standard_derivatives")||u.getExtension("WEBKIT_OES_standard_derivatives")))throw Error("derivatives not supported");var I=f(u,w.vertex,w.fragment);I.attributes.position.location=0;I.attributes.color.location=2;I.attributes.uv.location=3;I.attributes.normal.location=4;var J=f(u,x.vertex,x.fragment);J.attributes.position.location=0;J.attributes.color.location=2;J.attributes.uv.location=3;var N=f(u,y.vertex,y.fragment);N.attributes.position.location=0;N.attributes.color.location=
2;N.attributes.uv.location=3;N.attributes.pointSize.location=4;var M=f(u,A.vertex,A.fragment);M.attributes.position.location=0;M.attributes.id.location=1;var E=f(u,z.vertex,z.fragment);E.attributes.position.location=0;E.attributes.id.location=1;E.attributes.pointSize.location=4;var L=f(u,F.vertex,F.fragment);L.attributes.position.location=0;var Q=e(u,g(new Uint8Array([255,255,255,255]),[1,1,4]));Q.generateMipmap();Q.minFilter=u.LINEAR_MIPMAP_LINEAR;Q.magFilter=u.LINEAR;var S=b(u),R=b(u),O=b(u),T=
b(u),V=b(u),X=k(u,[{buffer:S,type:u.FLOAT,size:3},{buffer:V,type:u.UNSIGNED_BYTE,size:4,normalized:!0},{buffer:R,type:u.FLOAT,size:4},{buffer:O,type:u.FLOAT,size:2},{buffer:T,type:u.FLOAT,size:3}]),ba=b(u),aa=b(u),ka=b(u),ha=b(u),ca=k(u,[{buffer:ba,type:u.FLOAT,size:3},{buffer:ha,type:u.UNSIGNED_BYTE,size:4,normalized:!0},{buffer:aa,type:u.FLOAT,size:4},{buffer:ka,type:u.FLOAT,size:2}]),sa=b(u),ma=b(u),ra=b(u),qa=b(u),Y=b(u),pa=k(u,[{buffer:sa,type:u.FLOAT,size:3},{buffer:Y,type:u.UNSIGNED_BYTE,size:4,
normalized:!0},{buffer:ma,type:u.FLOAT,size:4},{buffer:ra,type:u.FLOAT,size:2},{buffer:qa,type:u.FLOAT,size:1}]),oa=b(u),ua=k(u,[{buffer:oa,type:u.FLOAT,size:3}]);I=new q(u,Q,I,J,N,M,E,L,S,V,R,O,T,X,ba,ha,aa,ka,ca,sa,Y,ma,ra,qa,pa,oa,ua);I.update(B);return I}},{"./lib/closest-point":290,"./lib/shaders":291,colormap:131,"gl-buffer":258,"gl-mat4/invert":278,"gl-mat4/multiply":280,"gl-shader":312,"gl-texture2d":327,"gl-vao":332,ndarray:469,normals:472,"simplicial-complex-contour":528,"typedarray-pool":567}],
293:[function(a,G,C){function q(b,k,e){this.plot=b;this.vbo=k;this.shader=e}G.exports=function(b){var k=b.gl,e=n(k,[0,0,0,1,1,0,1,1]);k=m(k,f.boxVert,f.lineFrag);return new q(b,e,k)};var n=a("gl-buffer"),m=a("gl-shader"),f=a("./shaders");a=q.prototype;a.bind=function(){var b=this.shader;this.vbo.bind();this.shader.bind();b.attributes.coord.pointer();b.uniforms.screenBox=this.plot.screenBox};a.drawBox=function(){var b=[0,0],k=[0,0];return function(e,h,l,c,g){var d=this.shader,p=this.plot.gl;b[0]=e;
b[1]=h;k[0]=l;k[1]=c;d.uniforms.lo=b;d.uniforms.hi=k;d.uniforms.color=g;p.drawArrays(p.TRIANGLE_STRIP,0,4)}}();a.dispose=function(){this.vbo.dispose();this.shader.dispose()}},{"./shaders":296,"gl-buffer":258,"gl-shader":312}],294:[function(a,G,C){function q(e,h,l,c){this.plot=e;this.vbo=h;this.shader=l;this.tickShader=c;this.ticks=[[],[]]}function n(e,h){return e-h}G.exports=function(e){var h=e.gl,l=m(h),c=f(h,k.gridVert,k.gridFrag);h=f(h,k.tickVert,k.gridFrag);return new q(e,l,c,h)};var m=a("gl-buffer"),
f=a("gl-shader"),b=a("binary-search-bounds"),k=a("./shaders");a=q.prototype;a.draw=function(){var e=[0,0],h=[0,0],l=[0,0];return function(){var c=this.plot,g=this.vbo,d=this.shader,p=this.ticks,r=c.gl,t=c._tickBounds,w=c.dataBox,x=c.viewBox,y=c.gridLineWidth,A=c.gridLineColor,z=c.gridLineEnable;c=c.pixelRatio;for(var F=0;2>F;++F){var D=t[F],u=.5*(w[F+2]+w[F]),B=w[F+2]-w[F];h[F]=2*(t[F+2]-D)/B;e[F]=2*(D-u)/B}d.bind();g.bind();d.attributes.dataCoord.pointer();d.uniforms.dataShift=e;d.uniforms.dataScale=
h;for(F=g=0;2>F;++F)l[0]=l[1]=0,l[F]=1,d.uniforms.dataAxis=l,d.uniforms.lineWidth=y[F]/(x[F+2]-x[F])*c,d.uniforms.color=A[F],t=6*p[F].length,z[F]&&t&&r.drawArrays(r.TRIANGLES,g,t),g+=t}}();a.drawTickMarks=function(){var e=[0,0],h=[0,0],l=[1,0],c=[0,1],g=[0,0],d=[0,0];return function(){var p=this.plot,r=this.vbo,t=this.tickShader,w=this.ticks,x=p.gl,y=p._tickBounds,A=p.dataBox,z=p.viewBox,F=p.pixelRatio,D=p.screenBox,u=D[2]-D[0];D=D[3]-D[1];for(var B=z[2]-z[0],I=z[3]-z[1],J=0;2>J;++J){var N=y[J],M=
.5*(A[J+2]+A[J]),E=A[J+2]-A[J];h[J]=2*(y[J+2]-N)/E;e[J]=2*(N-M)/E}h[0]*=B/u;e[0]*=B/u;h[1]*=I/D;e[1]*=I/D;t.bind();r.bind();t.attributes.dataCoord.pointer();r=t.uniforms;r.dataShift=e;r.dataScale=h;t=p.tickMarkLength;B=p.tickMarkWidth;p=p.tickMarkColor;J=6*w[0].length;N=Math.min(b.ge(w[0],(A[0]-y[0])/(y[2]-y[0]),n),w[0].length);M=Math.min(b.gt(w[0],(A[2]-y[0])/(y[2]-y[0]),n),w[0].length);I=6*N;N=6*Math.max(0,M-N);M=Math.min(b.ge(w[1],(A[1]-y[1])/(y[3]-y[1]),n),w[1].length);w=Math.min(b.gt(w[1],(A[3]-
y[1])/(y[3]-y[1]),n),w[1].length);y=J+6*M;w=6*Math.max(0,w-M);g[0]=2*(z[0]-t[1])/u-1;g[1]=(z[3]+z[1])/D-1;d[0]=t[1]*F/u;d[1]=B[1]*F/D;w&&(r.color=p[1],r.tickScale=d,r.dataAxis=c,r.screenOffset=g,x.drawArrays(x.TRIANGLES,y,w));g[0]=(z[2]+z[0])/u-1;g[1]=2*(z[1]-t[0])/D-1;d[0]=B[0]*F/u;d[1]=t[0]*F/D;N&&(r.color=p[0],r.tickScale=d,r.dataAxis=l,r.screenOffset=g,x.drawArrays(x.TRIANGLES,I,N));g[0]=2*(z[2]+t[3])/u-1;g[1]=(z[3]+z[1])/D-1;d[0]=t[3]*F/u;d[1]=B[3]*F/D;w&&(r.color=p[3],r.tickScale=d,r.dataAxis=
c,r.screenOffset=g,x.drawArrays(x.TRIANGLES,y,w));g[0]=(z[2]+z[0])/u-1;g[1]=2*(z[3]+t[2])/D-1;d[0]=B[2]*F/u;d[1]=t[2]*F/D;N&&(r.color=p[2],r.tickScale=d,r.dataAxis=l,r.screenOffset=g,x.drawArrays(x.TRIANGLES,I,N))}}();a.update=function(){var e=[1,1,-1,-1,1,-1],h=[1,-1,1,1,-1,-1];return function(l){var c=l.ticks;l=l.bounds;for(var g=new Float32Array(18*(c[0].length+c[1].length)),d=0,p=[[],[]],r=0;2>r;++r)for(var t=p[r],w=c[r],x=l[r],y=l[r+2],A=0;A<w.length;++A){var z=(w[A].x-x)/(y-x);t.push(z);for(var F=
0;6>F;++F)g[d++]=z,g[d++]=e[F],g[d++]=h[F]}this.ticks=p;this.vbo.update(g)}}();a.dispose=function(){this.vbo.dispose();this.shader.dispose();this.tickShader.dispose()}},{"./shaders":296,"binary-search-bounds":96,"gl-buffer":258,"gl-shader":312}],295:[function(a,G,C){function q(b,k,e){this.plot=b;this.vbo=k;this.shader=e}G.exports=function(b){var k=b.gl,e=n(k,[-1,-1,-1,1,1,-1,1,1]);k=m(k,f.lineVert,f.lineFrag);return new q(b,e,k)};var n=a("gl-buffer"),m=a("gl-shader"),f=a("./shaders");a=q.prototype;
a.bind=function(){var b=this.shader;this.vbo.bind();this.shader.bind();b.attributes.coord.pointer();b.uniforms.screenBox=this.plot.screenBox};a.drawLine=function(){var b=[0,0],k=[0,0];return function(e,h,l,c,g,d){var p=this.plot,r=this.shader,t=p.gl;b[0]=e;b[1]=h;k[0]=l;k[1]=c;r.uniforms.start=b;r.uniforms.end=k;r.uniforms.width=g*p.pixelRatio;r.uniforms.color=d;t.drawArrays(t.TRIANGLE_STRIP,0,4)}}();a.dispose=function(){this.vbo.dispose();this.shader.dispose()}},{"./shaders":296,"gl-buffer":258,
"gl-shader":312}],296:[function(a,G,C){a=a("glslify");C=a(["precision lowp float;\n#define GLSLIFY 1\nuniform vec4 color;\nvoid main() {\n  gl_FragColor \x3d vec4(color.xyz * color.w, color.w);\n}\n"]);G.exports={lineVert:a(["precision mediump float;\n#define GLSLIFY 1\n\nattribute vec2 coord;\n\nuniform vec4 screenBox;\nuniform vec2 start, end;\nuniform float width;\n\nvec2 perp(vec2 v) {\n  return vec2(v.y, -v.x);\n}\n\nvec2 screen(vec2 v) {\n  return 2.0 * (v - screenBox.xy) / (screenBox.zw - screenBox.xy) - 1.0;\n}\n\nvoid main() {\n  vec2 delta \x3d normalize(perp(start - end));\n  vec2 offset \x3d mix(start, end, 0.5 * (coord.y+1.0));\n  gl_Position \x3d vec4(screen(offset + 0.5 * width * delta * coord.x), 0, 1);\n}\n"]),
lineFrag:C,textVert:a(["#define GLSLIFY 1\nattribute vec3 textCoordinate;\n\nuniform vec2 dataScale, dataShift, dataAxis, screenOffset, textScale;\nuniform float angle;\n\nvoid main() {\n  float dataOffset  \x3d textCoordinate.z;\n  vec2 glyphOffset  \x3d textCoordinate.xy;\n  mat2 glyphMatrix \x3d mat2(cos(angle), sin(angle), -sin(angle), cos(angle));\n  vec2 screenCoordinate \x3d dataAxis * (dataScale * dataOffset + dataShift) +\n    glyphMatrix * glyphOffset * textScale + screenOffset;\n  gl_Position \x3d vec4(screenCoordinate, 0, 1);\n}\n"]),
textFrag:C,gridVert:a(["precision mediump float;\n#define GLSLIFY 1\n\nattribute vec3 dataCoord;\n\nuniform vec2 dataAxis, dataShift, dataScale;\nuniform float lineWidth;\n\nvoid main() {\n  vec2 pos \x3d dataAxis * (dataScale * dataCoord.x + dataShift);\n  pos +\x3d 10.0 * dataCoord.y * vec2(dataAxis.y, -dataAxis.x) + dataCoord.z * lineWidth;\n  gl_Position \x3d vec4(pos, 0, 1);\n}\n"]),gridFrag:C,boxVert:a(["precision mediump float;\n#define GLSLIFY 1\n\nattribute vec2 coord;\n\nuniform vec4 screenBox;\nuniform vec2 lo, hi;\n\nvec2 screen(vec2 v) {\n  return 2.0 * (v - screenBox.xy) / (screenBox.zw - screenBox.xy) - 1.0;\n}\n\nvoid main() {\n  gl_Position \x3d vec4(screen(mix(lo, hi, coord)), 0, 1);\n}\n"]),
tickVert:a(["precision mediump float;\n#define GLSLIFY 1\n\nattribute vec3 dataCoord;\n\nuniform vec2 dataAxis, dataShift, dataScale, screenOffset, tickScale;\n\nvoid main() {\n  vec2 pos \x3d dataAxis * (dataScale * dataCoord.x + dataShift);\n  gl_Position \x3d vec4(pos + tickScale*dataCoord.yz + screenOffset, 0, 1);\n}\n"])}},{glslify:413}],297:[function(a,G,C){function q(e,h,l){this.plot=e;this.vbo=h;this.shader=l;this.tickOffset=[[],[]];this.tickX=[[],[]];this.labelOffset=[0,0];this.labelCount=
[0,0]}G.exports=function(e){var h=e.gl,l=n(h);h=m(h,k.textVert,k.textFrag);return new q(e,l,h)};var n=a("gl-buffer"),m=a("gl-shader"),f=a("text-cache"),b=a("binary-search-bounds"),k=a("./shaders");a=q.prototype;a.drawTicks=function(){var e=[0,0],h=[0,0],l=[0,0];return function(c){var g=this.plot,d=this.shader,p=this.tickX[c],r=this.tickOffset[c],t=g.gl,w=g.viewBox,x=g.dataBox,y=g.screenBox,A=g.pixelRatio,z=g.tickEnable,F=g.tickPad,D=g.tickColor,u=g.tickAngle,B=g.labelEnable,I=g.labelPad,J=g.labelColor;
g=g.labelAngle;var N=this.labelOffset[c],M=this.labelCount[c],E=b.lt(p,x[c]);p=b.le(p,x[c+2]);e[0]=e[1]=0;e[c]=1;h[c]=(w[2+c]+w[c])/(y[2+c]-y[c])-1;y=2/y[2+(c^1)]-y[c^1];h[c^1]=y*w[c^1]-1;z[c]&&(h[c^1]-=y*A*F[c],E<p&&r[p]>r[E]&&(d.uniforms.dataAxis=e,d.uniforms.screenOffset=h,d.uniforms.color=D[c],d.uniforms.angle=u[c],t.drawArrays(t.TRIANGLES,r[E],r[p]-r[E])));B[c]&&M&&(h[c^1]-=y*A*I[c],d.uniforms.dataAxis=l,d.uniforms.screenOffset=h,d.uniforms.color=J[c],d.uniforms.angle=g[c],t.drawArrays(t.TRIANGLES,
N,M));h[c^1]=y*w[2+(c^1)]-1;z[c+2]&&(h[c^1]+=y*A*F[c+2],E<p&&r[p]>r[E]&&(d.uniforms.dataAxis=e,d.uniforms.screenOffset=h,d.uniforms.color=D[c+2],d.uniforms.angle=u[c+2],t.drawArrays(t.TRIANGLES,r[E],r[p]-r[E])));B[c+2]&&M&&(h[c^1]+=y*A*I[c+2],d.uniforms.dataAxis=l,d.uniforms.screenOffset=h,d.uniforms.color=J[c+2],d.uniforms.angle=g[c+2],t.drawArrays(t.TRIANGLES,N,M))}}();a.drawTitle=function(){var e=[0,0],h=[0,0];return function(){var l=this.plot,c=this.shader,g=l.gl,d=l.screenBox,p=l.titleCenter,
r=l.titleAngle,t=l.titleColor;l=l.pixelRatio;if(this.titleCount){for(var w=0;2>w;++w)h[w]=2*(p[w]*l-d[w])/(d[2+w]-d[w])-1;c.bind();c.uniforms.dataAxis=e;c.uniforms.screenOffset=h;c.uniforms.angle=r;c.uniforms.color=t;g.drawArrays(g.TRIANGLES,this.titleOffset,this.titleCount)}}}();a.bind=function(){var e=[0,0],h=[0,0],l=[0,0];return function(){var c=this.plot,g=this.shader,d=c._tickBounds,p=c.dataBox,r=c.screenBox,t=c.viewBox;g.bind();for(var w=0;2>w;++w){var x=d[w],y=.5*(p[w+2]+p[w]),A=p[w+2]-p[w],
z=t[w+2]-t[w],F=r[w+2]-r[w];h[w]=2*(d[w+2]-x)/A*z/F;e[w]=2*(x-y)/A*z/F}l[1]=2*c.pixelRatio/(r[3]-r[1]);l[0]=l[1]*(r[3]-r[1])/(r[2]-r[0]);g.uniforms.dataScale=h;g.uniforms.dataShift=e;g.uniforms.textScale=l;this.vbo.bind();g.attributes.textCoordinate.pointer()}}();a.update=function(e){var h=[],l=e.ticks,c=e.bounds,g,d;for(d=0;2>d;++d){var p=[Math.floor(h.length/3)],r=[-Infinity],t=l[d];for(g=0;g<t.length;++g){var w=t[g];var x=w.x;var y=w.text;var A=w.font||"sans-serif";w=w.fontSize||12;for(var z=1/
(c[d+2]-c[d]),F=c[d],D=y.split("\n"),u=0;u<D.length;u++){var B=f(A,D[u]).data;for(y=0;y<B.length;y+=2)h.push(B[y]*w,-B[y+1]*w-u*w*1.2,(x-F)*z)}p.push(Math.floor(h.length/3));r.push(x)}this.tickOffset[d]=p;this.tickX[d]=r}for(d=0;2>d;++d){this.labelOffset[d]=Math.floor(h.length/3);B=f(e.labelFont[d],e.labels[d],{textAlign:"center"}).data;w=e.labelSize[d];for(g=0;g<B.length;g+=2)h.push(B[g]*w,-B[g+1]*w,0);this.labelCount[d]=Math.floor(h.length/3)-this.labelOffset[d]}this.titleOffset=Math.floor(h.length/
3);B=f(e.titleFont,e.title).data;w=e.titleSize;for(g=0;g<B.length;g+=2)h.push(B[g]*w,-B[g+1]*w,0);this.titleCount=Math.floor(h.length/3)-this.titleOffset;this.vbo.update(h)};a.dispose=function(){this.vbo.dispose();this.shader.dispose()}},{"./shaders":296,"binary-search-bounds":96,"gl-buffer":258,"gl-shader":312,"text-cache":547}],298:[function(a,G,C){function q(l,c){this.gl=l;this.pickBuffer=c;this.screenBox=[0,0,l.drawingBufferWidth,l.drawingBufferHeight];this.viewBox=[0,0,0,0];this.dataBox=[-10,
-10,10,10];this.gridLineEnable=[!0,!0];this.gridLineWidth=[1,1];this.gridLineColor=[[0,0,0,1],[0,0,0,1]];this.pixelRatio=1;this.tickMarkLength=[0,0,0,0];this.tickMarkWidth=[0,0,0,0];this.tickMarkColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1],[0,0,0,1]];this.tickPad=[15,15,15,15];this.tickAngle=[0,0,0,0];this.tickEnable=[!0,!0,!0,!0];this.tickColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1],[0,0,0,1]];this.labelPad=[15,15,15,15];this.labelAngle=[0,Math.PI/2,0,3*Math.PI/2];this.labelEnable=[!0,!0,!0,!0];this.labelColor=
[[0,0,0,1],[0,0,0,1],[0,0,0,1],[0,0,0,1]];this.titleCenter=[0,0];this.titleEnable=!0;this.titleAngle=0;this.titleColor=[0,0,0,1];this.borderColor=[0,0,0,0];this.backgroundColor=[0,0,0,0];this.zeroLineEnable=[!0,!0];this.zeroLineWidth=[4,4];this.zeroLineColor=[[0,0,0,1],[0,0,0,1]];this.borderLineEnable=[!0,!0,!0,!0];this.borderLineWidth=[2,2,2,2];this.borderLineColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1],[0,0,0,1]];this.box=this.line=this.text=this.grid=null;this.objects=[];this.overlays=[];this._tickBounds=
[Infinity,Infinity,-Infinity,-Infinity];this.pickDirty=this.dirty=this.static=!1;this.pickDelay=120;this.pickRadius=10;this._pickTimeout=null;this._drawPick=this.drawPick.bind(this);this._depthCounter=0}function n(l){l=l.slice();for(var c=0;c<l.length;++c)l[c]=l[c].slice();return l}function m(l,c){return l.x-c.x}G.exports=function(l){var c=l.gl,g=f(c,[c.drawingBufferWidth,c.drawingBufferHeight]);c=new q(c,g);c.grid=b(c);c.text=k(c);c.line=e(c);c.box=h(c);c.update(l);return c};var f=a("gl-select-static"),
b=a("./lib/grid"),k=a("./lib/text"),e=a("./lib/line"),h=a("./lib/box");a=q.prototype;a.setDirty=function(){this.dirty=this.pickDirty=!0};a.setOverlayDirty=function(){this.dirty=!0};a.nextDepthValue=function(){return this._depthCounter++/65536};a.draw=function(){return function(){var l=this.gl,c=this.screenBox,g=this.viewBox,d=this.dataBox,p=this.pixelRatio,r=this.grid,t=this.line,w=this.text,x=this.objects;this._depthCounter=0;this.pickDirty&&(this._pickTimeout&&clearTimeout(this._pickTimeout),this.pickDirty=
!1,this._pickTimeout=setTimeout(this._drawPick,this.pickDelay));if(this.dirty){this.dirty=!1;l.bindFramebuffer(l.FRAMEBUFFER,null);l.enable(l.SCISSOR_TEST);l.disable(l.DEPTH_TEST);l.depthFunc(l.LESS);l.depthMask(!1);l.enable(l.BLEND);l.blendEquation(l.FUNC_ADD,l.FUNC_ADD);l.blendFunc(l.ONE,l.ONE_MINUS_SRC_ALPHA);if(this.borderColor){l.scissor(c[0],c[1],c[2]-c[0],c[3]-c[1]);var y=this.borderColor;l.clearColor(y[0]*y[3],y[1]*y[3],y[2]*y[3],y[3]);l.clear(l.COLOR_BUFFER_BIT|l.DEPTH_BUFFER_BIT)}l.scissor(g[0],
g[1],g[2]-g[0],g[3]-g[1]);l.viewport(g[0],g[1],g[2]-g[0],g[3]-g[1]);y=this.backgroundColor;l.clearColor(y[0]*y[3],y[1]*y[3],y[2]*y[3],y[3]);l.clear(l.COLOR_BUFFER_BIT);r.draw();y=this.zeroLineEnable;var A=this.zeroLineColor,z=this.zeroLineWidth;if(y[0]||y[1])for(t.bind(),r=0;2>r;++r)if(y[r]&&0>=d[r]&&0<=d[r+2]){var F=c[r]-d[r]*(c[r+2]-c[r])/(d[r+2]-d[r]);0===r?t.drawLine(F,c[1],F,c[3],z[r],A[r]):t.drawLine(c[0],F,c[2],F,z[r],A[r])}for(r=0;r<x.length;++r)x[r].draw();l.viewport(c[0],c[1],c[2]-c[0],
c[3]-c[1]);l.scissor(c[0],c[1],c[2]-c[0],c[3]-c[1]);this.grid.drawTickMarks();t.bind();c=this.borderLineEnable;d=this.borderLineWidth;x=this.borderLineColor;c[1]&&t.drawLine(g[0],g[1]-.5*d[1]*p,g[0],g[3]+.5*d[3]*p,d[1],x[1]);c[0]&&t.drawLine(g[0]-.5*d[0]*p,g[1],g[2]+.5*d[2]*p,g[1],d[0],x[0]);c[3]&&t.drawLine(g[2],g[1]-.5*d[1]*p,g[2],g[3]+.5*d[3]*p,d[3],x[3]);c[2]&&t.drawLine(g[0]-.5*d[0]*p,g[3],g[2]+.5*d[2]*p,g[3],d[2],x[2]);w.bind();for(r=0;2>r;++r)w.drawTicks(r);this.titleEnable&&w.drawTitle();
g=this.overlays;for(r=0;r<g.length;++r)g[r].draw();l.disable(l.SCISSOR_TEST);l.disable(l.BLEND);l.depthMask(!0)}}}();a.drawPick=function(){return function(){if(!this.static){var l=this.pickBuffer;this._pickTimeout=null;l.begin();for(var c=1,g=this.objects,d=0;d<g.length;++d)c=g[d].drawPick(c);l.end()}}}();a.pick=function(){return function(l,c){if(!this.static){var g=this.pixelRatio,d=this.pickPixelRatio,p=this.viewBox;l=Math.round((l-p[0]/g)*d)|0;c=Math.round((c-p[1]/g)*d)|0;g=this.pickBuffer.query(l,
c,this.pickRadius);if(!g)return null;g=g.id+(g.value[0]<<8)+(g.value[1]<<16)+(g.value[2]<<24);d=this.objects;for(p=0;p<d.length;++p){var r=d[p].pick(l,c,g);if(r)return r}return null}}}();a.setScreenBox=function(l){var c=this.screenBox,g=this.pixelRatio;c[0]=Math.round(l[0]*g)|0;c[1]=Math.round(l[1]*g)|0;c[2]=Math.round(l[2]*g)|0;c[3]=Math.round(l[3]*g)|0;this.setDirty()};a.setDataBox=function(l){var c=this.dataBox;if(c[0]!==l[0]||c[1]!==l[1]||c[2]!==l[2]||c[3]!==l[3])c[0]=l[0],c[1]=l[1],c[2]=l[2],
c[3]=l[3],this.setDirty()};a.setViewBox=function(l){var c=this.pixelRatio,g=this.viewBox;g[0]=Math.round(l[0]*c)|0;g[1]=Math.round(l[1]*c)|0;g[2]=Math.round(l[2]*c)|0;g[3]=Math.round(l[3]*c)|0;c=this.pickPixelRatio;this.pickBuffer.shape=[Math.round((l[2]-l[0])*c)|0,Math.round((l[3]-l[1])*c)|0];this.setDirty()};a.update=function(l){l=l||{};var c=this.gl,g=this.pixelRatio=l.pixelRatio||1;this.pickPixelRatio=Math.max(g,1);this.setScreenBox(l.screenBox||[0,0,c.drawingBufferWidth/g,c.drawingBufferHeight/
g]);this.setViewBox(l.viewBox||[.125*(this.screenBox[2]-this.screenBox[0])/g,.125*(this.screenBox[3]-this.screenBox[1])/g,.875*(this.screenBox[2]-this.screenBox[0])/g,.875*(this.screenBox[3]-this.screenBox[1])/g]);c=this.viewBox;var d=(c[2]-c[0])/(c[3]-c[1]);this.setDataBox(l.dataBox||[-10,-10/d,10,10/d]);this.borderColor=!1!==l.borderColor?(l.borderColor||[0,0,0,0]).slice():!1;this.backgroundColor=(l.backgroundColor||[0,0,0,0]).slice();this.gridLineEnable=(l.gridLineEnable||[!0,!0]).slice();this.gridLineWidth=
(l.gridLineWidth||[1,1]).slice();this.gridLineColor=n(l.gridLineColor||[[.5,.5,.5,1],[.5,.5,.5,1]]);this.zeroLineEnable=(l.zeroLineEnable||[!0,!0]).slice();this.zeroLineWidth=(l.zeroLineWidth||[4,4]).slice();this.zeroLineColor=n(l.zeroLineColor||[[0,0,0,1],[0,0,0,1]]);this.tickMarkLength=(l.tickMarkLength||[0,0,0,0]).slice();this.tickMarkWidth=(l.tickMarkWidth||[0,0,0,0]).slice();this.tickMarkColor=n(l.tickMarkColor||[[0,0,0,1],[0,0,0,1],[0,0,0,1],[0,0,0,1]]);this.titleCenter=(l.titleCenter||[.5*
(c[0]+c[2])/g,(c[3]+120)/g]).slice();this.titleEnable=!("titleEnable"in l)||!!l.titleEnable;this.titleAngle=l.titleAngle||0;this.titleColor=(l.titleColor||[0,0,0,1]).slice();this.labelPad=(l.labelPad||[15,15,15,15]).slice();this.labelAngle=(l.labelAngle||[0,Math.PI/2,0,3*Math.PI/2]).slice();this.labelEnable=(l.labelEnable||[!0,!0,!0,!0]).slice();this.labelColor=n(l.labelColor||[[0,0,0,1],[0,0,0,1],[0,0,0,1],[0,0,0,1]]);this.tickPad=(l.tickPad||[15,15,15,15]).slice();this.tickAngle=(l.tickAngle||[0,
0,0,0]).slice();this.tickEnable=(l.tickEnable||[!0,!0,!0,!0]).slice();this.tickColor=n(l.tickColor||[[0,0,0,1],[0,0,0,1],[0,0,0,1],[0,0,0,1]]);this.borderLineEnable=(l.borderLineEnable||[!0,!0,!0,!0]).slice();this.borderLineWidth=(l.borderLineWidth||[2,2,2,2]).slice();this.borderLineColor=n(l.borderLineColor||[[0,0,0,1],[0,0,0,1],[0,0,0,1],[0,0,0,1]]);g=l.ticks||[[],[]];c=this._tickBounds;c[0]=c[1]=Infinity;c[2]=c[3]=-Infinity;for(d=0;2>d;++d){var p=g[d].slice(0);0!==p.length&&(p.sort(m),c[d]=Math.min(c[d],
p[0].x),c[d+2]=Math.max(c[d+2],p[p.length-1].x))}this.grid.update({bounds:c,ticks:g});this.text.update({bounds:c,ticks:g,labels:l.labels||["x","y"],labelSize:l.labelSize||[12,12],labelFont:l.labelFont||["sans-serif","sans-serif"],title:l.title||"",titleSize:l.titleSize||18,titleFont:l.titleFont||"sans-serif"});this.static=!!l.static;this.setDirty()};a.dispose=function(){this.box.dispose();this.grid.dispose();this.text.dispose();this.line.dispose();for(var l=this.objects.length-1;0<=l;--l)this.objects[l].dispose();
this.objects.length=0;for(l=this.overlays.length-1;0<=l;--l)this.overlays[l].dispose();this.overlays.length=0;this.gl=null};a.addObject=function(l){0>this.objects.indexOf(l)&&(this.objects.push(l),this.setDirty())};a.removeObject=function(l){for(var c=this.objects,g=0;g<c.length;++g)if(c[g]===l){c.splice(g,1);this.setDirty();break}};a.addOverlay=function(l){0>this.overlays.indexOf(l)&&(this.overlays.push(l),this.setOverlayDirty())};a.removeOverlay=function(l){for(var c=this.overlays,g=0;g<c.length;++g)if(c[g]===
l){c.splice(g,1);this.setOverlayDirty();break}}},{"./lib/box":293,"./lib/grid":294,"./lib/line":295,"./lib/text":297,"gl-select-static":311}],299:[function(a,G,C){G.exports=function(e,h){e=e||document.body;h=h||{};var l=[.01,Infinity];"distanceLimits"in h&&(l[0]=h.distanceLimits[0],l[1]=h.distanceLimits[1]);"zoomMin"in h&&(l[0]=h.zoomMin);"zoomMax"in h&&(l[1]=h.zoomMax);var c=n({center:h.center||[0,0,0],up:h.up||[0,1,0],eye:h.eye||[0,0,10],mode:h.mode||"orbit",distanceLimits:l}),g=[0,0,0,0,0,0,0,
0,0,0,0,0,0,0,0,0],d=0,p=e.clientWidth,r=e.clientHeight,t={keyBindingMode:"rotate",enableWheel:!0,view:c,element:e,delay:h.delay||16,rotateSpeed:h.rotateSpeed||1,zoomSpeed:h.zoomSpeed||1,translateSpeed:h.translateSpeed||1,flipX:!!h.flipX,flipY:!!h.flipY,modes:c.modes,_ortho:h._ortho||h.projection&&"orthographic"===h.projection.type||!1,tick:function(){var w=q(),x=this.delay,y=w-2*x;c.idle(w-x);c.recalcMatrix(y);c.flush(w-(100+2*x));w=!0;x=c.computedMatrix;for(y=0;16>y;++y)w=w&&g[y]===x[y],g[y]=x[y];
x=e.clientWidth===p&&e.clientHeight===r;p=e.clientWidth;r=e.clientHeight;if(w)return!x;d=Math.exp(c.computedRadius[0]);return!0},lookAt:function(w,x,y){c.lookAt(c.lastT(),w,x,y)},rotate:function(w,x,y){c.rotate(c.lastT(),w,x,y)},pan:function(w,x,y){c.pan(c.lastT(),w,x,y)},translate:function(w,x,y){c.translate(c.lastT(),w,x,y)}};Object.defineProperties(t,{matrix:{get:function(){return c.computedMatrix},set:function(w){c.setMatrix(c.lastT(),w);return c.computedMatrix},enumerable:!0},mode:{get:function(){return c.getMode()},
set:function(w){var x=c.computedUp.slice(),y=c.computedEye.slice(),A=c.computedCenter.slice();c.setMode(w);"turntable"===w&&(w=q(),c._active.lookAt(w,y,A,x),c._active.lookAt(w+500,y,A,[0,0,1]),c._active.flush(w));return c.getMode()},enumerable:!0},center:{get:function(){return c.computedCenter},set:function(w){c.lookAt(c.lastT(),null,w);return c.computedCenter},enumerable:!0},eye:{get:function(){return c.computedEye},set:function(w){c.lookAt(c.lastT(),w);return c.computedEye},enumerable:!0},up:{get:function(){return c.computedUp},
set:function(w){c.lookAt(c.lastT(),null,null,w);return c.computedUp},enumerable:!0},distance:{get:function(){return d},set:function(w){c.setDistance(c.lastT(),w);return w},enumerable:!0},distanceLimits:{get:function(){return c.getDistanceLimits(l)},set:function(w){c.setDistanceLimits(w);return w},enumerable:!0}});e.addEventListener("contextmenu",function(w){w.preventDefault();return!1});t._lastX=-1;t._lastY=-1;t._lastMods={shift:!1,control:!1,alt:!1,meta:!1};t.enableMouseListeners=function(){function w(x,
y,A,z){var F=t.keyBindingMode;if(!1!==F){var D="rotate"===F,u="pan"===F;F="zoom"===F;var B=!!z.control,I=!!z.alt,J=!!z.shift,N=!!(x&1),M=!!(x&2);x=!!(x&4);var E=1/e.clientHeight,L=E*(y-t._lastX),Q=E*(A-t._lastY),S=t.flipX?1:-1,R=t.flipY?1:-1,O=Math.PI*t.rotateSpeed;E=q();-1!==t._lastX&&-1!==t._lastY&&((D&&N&&!B&&!I&&!J||N&&!B&&!I&&J)&&c.rotate(E,S*O*L,-R*O*Q,0),(u&&N&&!B&&!I&&!J||M||N&&B&&!I&&!J)&&c.pan(E,-t.translateSpeed*L*d,t.translateSpeed*Q*d,0),F&&N&&!B&&!I&&!J||x||N&&!B&&I&&!J)&&(D=-t.zoomSpeed*
Q/window.innerHeight*(E-c.lastT())*100,c.pan(E,0,0,d*(Math.exp(D)-1)));t._lastX=y;t._lastY=A;t._lastMods=z;return!0}}t.mouseListener=m(e,w);e.addEventListener("touchstart",function(x){var y=b(x.changedTouches[0],e);w(0,y[0],y[1],t._lastMods);w(1,y[0],y[1],t._lastMods);x.preventDefault()},k?{passive:!1}:!1);e.addEventListener("touchmove",function(x){var y=b(x.changedTouches[0],e);w(1,y[0],y[1],t._lastMods);x.preventDefault()},k?{passive:!1}:!1);e.addEventListener("touchend",function(x){w(0,t._lastX,
t._lastY,t._lastMods);x.preventDefault()},k?{passive:!1}:!1);t.wheelListener=f(e,function(x,y){if(!1!==t.keyBindingMode&&t.enableWheel){var A=t.flipX?1:-1,z=t.flipY?1:-1,F=q();Math.abs(x)>Math.abs(y)?c.rotate(F,0,0,-x*A*Math.PI*t.rotateSpeed/window.innerWidth):t._ortho||(x=-t.zoomSpeed*z*y/window.innerHeight*(F-c.lastT())/20,c.pan(F,0,0,d*(Math.exp(x)-1)))}},!0)};t.enableMouseListeners();return t};var q=a("right-now"),n=a("3d-view"),m=a("mouse-change"),f=a("mouse-wheel"),b=a("mouse-event-offset"),
k=a("has-passive-events")},{"3d-view":54,"has-passive-events":415,"mouse-change":457,"mouse-event-offset":458,"mouse-wheel":460,"right-now":514}],300:[function(a,G,C){C=a("glslify");var q=a("gl-shader"),n=C(["precision mediump float;\n#define GLSLIFY 1\nattribute vec2 position;\nvarying vec2 uv;\nvoid main() {\n  uv \x3d position;\n  gl_Position \x3d vec4(position, 0, 1);\n}"]),m=C(["precision mediump float;\n#define GLSLIFY 1\n\nuniform sampler2D accumBuffer;\nvarying vec2 uv;\n\nvoid main() {\n  vec4 accum \x3d texture2D(accumBuffer, 0.5 * (uv + 1.0));\n  gl_FragColor \x3d min(vec4(1,1,1,1), accum);\n}"]);
G.exports=function(f){return q(f,n,m,null,[{name:"position",type:"vec2"}])}},{"gl-shader":312,glslify:413}],301:[function(a,G,C){function q(){this.mouse=[-1,-1];this.screen=null;this.distance=Infinity;this.data=this.object=this.dataPosition=this.dataCoordinate=this.index=null}function n(w,x){var y=null;try{(y=w.getContext("webgl",x))||(y=w.getContext("experimental-webgl",x))}catch(A){return null}return y}function m(w){return"boolean"===typeof w?w:!0}var f=a("./camera.js"),b=a("gl-axes3d"),k=a("gl-axes3d/properties"),
e=a("gl-spikes3d"),h=a("gl-select-static"),l=a("gl-fbo"),c=a("a-big-triangle"),g=a("mouse-change"),d=a("gl-mat4/perspective"),p=a("gl-mat4/ortho"),r=a("./lib/shader"),t=a("is-mobile")({tablet:!0,featureDetect:!0});G.exports={createScene:function(w){function x(){if(!ha._stopped&&ha.autoResize){var ra=D.parentNode;if(ra&&ra!==document.body){var qa=ra.clientWidth;ra=ra.clientHeight}else qa=window.innerWidth,ra=window.innerHeight;var Y=Math.ceil(qa*ha.pixelRatio)|0,pa=Math.ceil(ra*ha.pixelRatio)|0;if(Y!==
D.width||pa!==D.height)D.width=Y,D.height=pa,Y=D.style,Y.position=Y.position||"absolute",Y.left="0px",Y.top="0px",Y.width=qa+"px",Y.height=ra+"px",X=!0}}function y(){for(var ra=R.length,qa=V.length,Y=0;Y<qa;++Y)T[Y]=0;Y=0;a:for(;Y<ra;++Y){var pa=R[Y],oa=pa.pickSlots;if(oa){for(var ua=0;ua<qa;++ua)if(255>T[ua]+oa){O[Y]=ua;pa.setPickBase(T[ua]+1);T[ua]+=oa;continue a}ua=h(u,ka);O[Y]=qa;V.push(ua);T.push(oa);pa.setPickBase(1);qa+=1}else O[Y]=-1}for(;0<qa&&0===T[qa-1];)T.pop(),V.pop().dispose()}function A(){if(ha.contextLost)return!0;
if(u.isContextLost()&&(ha.contextLost=!0,ha.mouseListener.enabled=!1,ha.selection.object=null,ha.oncontextloss))ha.oncontextloss()}function z(){if(!A()){x();var ra=ha.camera.tick();aa.view=ha.camera.matrix;X=X||ra;ba=ba||ra;Q.pixelRatio=ha.pixelRatio;S.pixelRatio=ha.pixelRatio;ra=R.length;var qa=sa[0],Y=sa[1];qa[0]=qa[1]=qa[2]=Infinity;Y[0]=Y[1]=Y[2]=-Infinity;for(var pa=0;pa<ra;++pa){var oa=R[pa];oa.pixelRatio=ha.pixelRatio;oa.axes=ha.axes;X=X||!!oa.dirty;ba=ba||!!oa.dirty;if(oa=oa.bounds){var ua=
oa[0],ya=oa[1];for(oa=0;3>oa;++oa)qa[oa]=Math.min(qa[oa],ua[oa]),Y[oa]=Math.max(Y[oa],ya[oa])}}ua=ha.bounds;if(ha.autoBounds)for(oa=0;3>oa;++oa)Y[oa]<qa[oa]?(qa[oa]=-1,Y[oa]=1):(qa[oa]===Y[oa]&&(--qa[oa],Y[oa]+=1),pa=.05*(Y[oa]-qa[oa]),qa[oa]-=pa,Y[oa]+=pa),ua[0][oa]=qa[oa],ua[1][oa]=Y[oa];qa=!1;for(oa=0;3>oa;++oa)qa=qa||ma[0][oa]!==ua[0][oa]||ma[1][oa]!==ua[1][oa],ma[0][oa]=ua[0][oa],ma[1][oa]=ua[1][oa];ba=ba||qa;if(X=X||qa){if(qa){qa=[0,0,0];for(pa=0;3>pa;++pa)Y=pa,oa=(ua[1][pa]-ua[0][pa])/10,ya=
Math.round(Math.log(Math.abs(oa))/Math.log(10)),0>ya?(ya=Math.round(Math.pow(10,-ya)),oa=Math.ceil(oa*ya)/ya):0<ya?(ya=Math.round(Math.pow(10,ya)),oa=Math.ceil(oa/ya)*ya):oa=Math.ceil(oa),qa[Y]=oa;Q.autoTicks?Q.update({bounds:ua,tickSpacing:qa}):Q.update({bounds:ua})}qa=u.drawingBufferWidth;Y=u.drawingBufferHeight;ka[0]=qa;ka[1]=Y;ca[0]=Math.max(qa/ha.pixelRatio,1)|0;ca[1]=Math.max(Y/ha.pixelRatio,1)|0;pa=ha;oa=pa.bounds;var ja=pa.cameraParams,za=ja.projection;ya=ja.model;var Ba=pa.zNear,Ma=pa.zFar,
Oa=pa.fovy,Ia=pa.gl.drawingBufferWidth/pa.gl.drawingBufferHeight;M?(p(za,-Ia,Ia,-1,1,Ba,Ma),ja._ortho=!0):(d(za,Oa,Ia,Ba,Ma),ja._ortho=!1);for(ja=0;16>ja;++ja)ya[ja]=0;ya[15]=1;for(ja=za=0;3>ja;++ja)za=Math.max(za,oa[1][ja]-oa[0][ja]);for(ja=0;3>ja;++ja)ya[5*ja]=pa.autoScale?pa.aspect[ja]/(oa[1][ja]-oa[0][ja]):1/za,pa.autoCenter&&(ya[12+ja]=.5*-ya[5*ja]*(oa[0][ja]+oa[1][ja]));for(pa=0;pa<ra;++pa)oa=R[pa],oa.axesBounds=ua,ha.clipToBounds&&(oa.clipBounds=ua);I.object&&(S.position=ha.snapToData?I.dataCoordinate:
I.dataPosition,S.bounds=ua);if(ba&&(ba=!1,!A()))for(u.colorMask(!0,!0,!0,!0),u.depthMask(!0),u.disable(u.BLEND),u.enable(u.DEPTH_TEST),u.depthFunc(u.LEQUAL),ua=R.length,pa=V.length,oa=0;oa<pa;++oa){ya=V[oa];ya.shape=ca;ya.begin();for(ja=0;ja<ua;++ja)O[ja]===oa&&(za=R[ja],za.drawPick&&(za.pixelRatio=1,za.drawPick(aa)));ya.end()}ha.axesPixels=k(ha.axes,aa,qa,Y);if(ha.onrender)ha.onrender();u.bindFramebuffer(u.FRAMEBUFFER,null);u.viewport(0,0,qa,Y);ha.clearRGBA();u.depthMask(!0);u.colorMask(!0,!0,!0,
!0);u.enable(u.DEPTH_TEST);u.depthFunc(u.LEQUAL);u.disable(u.BLEND);u.disable(u.CULL_FACE);ua=!1;Q.enable&&(ua=ua||Q.isTransparent(),Q.draw(aa));S.axes=Q;I.object&&S.draw(aa);u.disable(u.CULL_FACE);for(pa=0;pa<ra;++pa)oa=R[pa],oa.axes=Q,oa.pixelRatio=ha.pixelRatio,oa.isOpaque&&oa.isOpaque()&&oa.draw(aa),oa.isTransparent&&oa.isTransparent()&&(ua=!0);if(ua){J.shape=ka;J.bind();u.clear(u.DEPTH_BUFFER_BIT);u.colorMask(!1,!1,!1,!1);u.depthMask(!0);u.depthFunc(u.LESS);Q.enable&&Q.isTransparent()&&Q.drawTransparent(aa);
for(pa=0;pa<ra;++pa)oa=R[pa],oa.isOpaque&&oa.isOpaque()&&oa.draw(aa);u.enable(u.BLEND);u.blendEquation(u.FUNC_ADD);u.blendFunc(u.ONE,u.ONE_MINUS_SRC_ALPHA);u.colorMask(!0,!0,!0,!0);u.depthMask(!1);u.clearColor(0,0,0,0);u.clear(u.COLOR_BUFFER_BIT);Q.isTransparent()&&Q.drawTransparent(aa);for(pa=0;pa<ra;++pa)oa=R[pa],oa.isTransparent&&oa.isTransparent()&&oa.drawTransparent(aa);u.bindFramebuffer(u.FRAMEBUFFER,null);u.blendFunc(u.ONE,u.ONE_MINUS_SRC_ALPHA);u.disable(u.DEPTH_TEST);N.bind();J.color[0].bind(0);
N.uniforms.accumBuffer=0;c(u);u.disable(u.BLEND)}X=!1;for(pa=0;pa<ra;++pa)R[pa].dirty=!1}}}function F(){ha._stopped||ha.contextLost||(z(),requestAnimationFrame(F))}w=w||{};w.camera=w.camera||{};var D=w.canvas;D||(D=document.createElement("canvas"),w.container?w.container.appendChild(D):document.body.appendChild(D));var u=w.gl;u||(w.glOptions&&(t=!!w.glOptions.preserveDrawingBuffer),u=n(D,w.glOptions||{premultipliedAlpha:!0,antialias:!0,preserveDrawingBuffer:t}));if(!u)throw Error("webgl not supported");
var B=w.bounds||[[-10,-10,-10],[10,10,10]],I=new q,J=l(u,u.drawingBufferWidth,u.drawingBufferHeight,{preferFloat:!t}),N=r(u),M=w.cameraObject&&!0===w.cameraObject._ortho||w.camera.projection&&"orthographic"===w.camera.projection.type||!1,E={eye:w.camera.eye||[2,0,0],center:w.camera.center||[0,0,0],up:w.camera.up||[0,1,0],zoomMin:w.camera.zoomMax||.1,zoomMax:w.camera.zoomMin||100,mode:w.camera.mode||"turntable",_ortho:M},L=w.axes||{},Q=b(u,L);Q.enable=!L.disable;var S=e(u,w.spikes||{}),R=[],O=[],T=
[],V=[],X=!0,ba=!0,aa={view:null,projection:Array(16),model:Array(16),_ortho:!1};ba=!0;var ka=[u.drawingBufferWidth,u.drawingBufferHeight];E=w.cameraObject||f(D,E);var ha={gl:u,contextLost:!1,pixelRatio:w.pixelRatio||1,canvas:D,selection:I,camera:E,axes:Q,axesPixels:null,spikes:S,bounds:B,objects:R,shape:ka,aspect:w.aspectRatio||[1,1,1],pickRadius:w.pickRadius||10,zNear:w.zNear||.01,zFar:w.zFar||1E3,fovy:w.fovy||Math.PI/4,clearColor:w.clearColor||[0,0,0,0],autoResize:m(w.autoResize),autoBounds:m(w.autoBounds),
autoScale:!!w.autoScale,autoCenter:m(w.autoCenter),clipToBounds:m(w.clipToBounds),snapToData:!!w.snapToData,onselect:w.onselect||null,onrender:w.onrender||null,onclick:w.onclick||null,cameraParams:aa,oncontextloss:null,mouseListener:null,_stopped:!1,getAspectratio:function(){return{x:this.aspect[0],y:this.aspect[1],z:this.aspect[2]}},setAspectratio:function(ra){this.aspect[0]=ra.x;this.aspect[1]=ra.y;this.aspect[2]=ra.z;ba=!0},setBounds:function(ra,qa){this.bounds[0][ra]=qa.min;this.bounds[1][ra]=
qa.max},setClearColor:function(ra){this.clearColor=ra},clearRGBA:function(){this.gl.clearColor(this.clearColor[0],this.clearColor[1],this.clearColor[2],this.clearColor[3]);this.gl.clear(this.gl.COLOR_BUFFER_BIT|this.gl.DEPTH_BUFFER_BIT)}},ca=[u.drawingBufferWidth/ha.pixelRatio|0,u.drawingBufferHeight/ha.pixelRatio|0];ha.autoResize&&x();window.addEventListener("resize",x);ha.update=function(ra){ha._stopped||(ba=X=!0)};ha.add=function(ra){ha._stopped||(ra.axes=Q,R.push(ra),O.push(-1),ba=X=!0,y())};
ha.remove=function(ra){ha._stopped||(ra=R.indexOf(ra),0>ra||(R.splice(ra,1),O.pop(),ba=X=!0,y()))};ha.dispose=function(){if(!ha._stopped&&(ha._stopped=!0,window.removeEventListener("resize",x),D.removeEventListener("webglcontextlost",A),ha.mouseListener.enabled=!1,!ha.contextLost)){Q.dispose();S.dispose();for(var ra=0;ra<R.length;++ra)R[ra].dispose();J.dispose();for(ra=0;ra<V.length;++ra)V[ra].dispose();N.dispose();S=Q=u=null;R=[]}};ha._mouseRotating=!1;ha._prevButtons=0;ha.enableMouseListeners=function(){ha.mouseListener=
g(D,function(ra,qa,Y){if(!ha._stopped){var pa=V.length,oa=R.length,ua=I.object;I.distance=Infinity;I.mouse[0]=qa;I.mouse[1]=Y;I.object=null;I.screen=null;I.dataCoordinate=I.dataPosition=null;var ya=!1;if(ra&&ha._prevButtons)ha._mouseRotating=!0;else{ha._mouseRotating&&(ba=!0);ha._mouseRotating=!1;for(var ja=0;ja<pa;++ja){var za=V[ja].query(qa,ca[1]-Y-1,ha.pickRadius);if(za&&!(za.distance>I.distance))for(var Ba=0;Ba<oa;++Ba){var Ma=R[Ba];if(O[Ba]===ja){var Oa=Ma.pick(za);Oa&&(I.buttons=ra,I.screen=
za.coord,I.distance=za.distance,I.object=Ma,I.index=Oa.distance,I.dataPosition=Oa.position,I.dataCoordinate=Oa.dataCoordinate,I.data=Oa,ya=!0)}}}}ua&&ua!==I.object&&(ua.highlight&&ua.highlight(null),X=!0);I.object&&(I.object.highlight&&I.object.highlight(I.data),X=!0);if((ya=ya||I.object!==ua)&&ha.onselect)ha.onselect(I);if(ra&1&&!(ha._prevButtons&1)&&ha.onclick)ha.onclick(I);ha._prevButtons=ra}})};D.addEventListener("webglcontextlost",A);var sa=[[Infinity,Infinity,Infinity],[-Infinity,-Infinity,
-Infinity]],ma=[sa[0].slice(),sa[1].slice()];ha.enableMouseListeners();F();ha.redraw=function(){ha._stopped||(X=!0,z())};return ha},createCamera:f}},{"./camera.js":299,"./lib/shader":300,"a-big-triangle":64,"gl-axes3d":250,"gl-axes3d/properties":257,"gl-fbo":266,"gl-mat4/ortho":281,"gl-mat4/perspective":282,"gl-select-static":311,"gl-spikes3d":321,"is-mobile":441,"mouse-change":457}],302:[function(a,G,C){a=a("glslify");C.pointVertex=a(["precision mediump float;\n#define GLSLIFY 1\n\nattribute vec2 position;\n\nuniform mat3 matrix;\nuniform float pointSize;\nuniform float pointCloud;\n\nhighp float rand(vec2 co) {\n  highp float a \x3d 12.9898;\n  highp float b \x3d 78.233;\n  highp float c \x3d 43758.5453;\n  highp float d \x3d dot(co.xy, vec2(a, b));\n  highp float e \x3d mod(d, 3.14);\n  return fract(sin(e) * c);\n}\n\nvoid main() {\n  vec3 hgPosition \x3d matrix * vec3(position, 1);\n  gl_Position  \x3d vec4(hgPosition.xy, 0, hgPosition.z);\n    // if we don't jitter the point size a bit, overall point cloud\n    // saturation 'jumps' on zooming, which is disturbing and confusing\n  gl_PointSize \x3d pointSize * ((19.5 + rand(position)) / 20.0);\n  if(pointCloud !\x3d 0.0) { // pointCloud is truthy\n    // get the same square surface as circle would be\n    gl_PointSize *\x3d 0.886;\n  }\n}"]);
C.pointFragment=a(["precision mediump float;\n#define GLSLIFY 1\n\nuniform vec4 color, borderColor;\nuniform float centerFraction;\nuniform float pointCloud;\n\nvoid main() {\n  float radius;\n  vec4 baseColor;\n  if(pointCloud !\x3d 0.0) { // pointCloud is truthy\n    if(centerFraction \x3d\x3d 1.0) {\n      gl_FragColor \x3d color;\n    } else {\n      gl_FragColor \x3d mix(borderColor, color, centerFraction);\n    }\n  } else {\n    radius \x3d length(2.0 * gl_PointCoord.xy - 1.0);\n    if(radius \x3e 1.0) {\n      discard;\n    }\n    baseColor \x3d mix(borderColor, color, step(radius, centerFraction));\n    gl_FragColor \x3d vec4(baseColor.rgb * baseColor.a, baseColor.a);\n  }\n}\n"]);
C.pickVertex=a(["precision mediump float;\n#define GLSLIFY 1\n\nattribute vec2 position;\nattribute vec4 pickId;\n\nuniform mat3 matrix;\nuniform float pointSize;\nuniform vec4 pickOffset;\n\nvarying vec4 fragId;\n\nvoid main() {\n  vec3 hgPosition \x3d matrix * vec3(position, 1);\n  gl_Position  \x3d vec4(hgPosition.xy, 0, hgPosition.z);\n  gl_PointSize \x3d pointSize;\n\n  vec4 id \x3d pickId + pickOffset;\n  id.y +\x3d floor(id.x / 256.0);\n  id.x -\x3d floor(id.x / 256.0) * 256.0;\n\n  id.z +\x3d floor(id.y / 256.0);\n  id.y -\x3d floor(id.y / 256.0) * 256.0;\n\n  id.w +\x3d floor(id.z / 256.0);\n  id.z -\x3d floor(id.z / 256.0) * 256.0;\n\n  fragId \x3d id;\n}\n"]);
C.pickFragment=a(["precision mediump float;\n#define GLSLIFY 1\n\nvarying vec4 fragId;\n\nvoid main() {\n  float radius \x3d length(2.0 * gl_PointCoord.xy - 1.0);\n  if(radius \x3e 1.0) {\n    discard;\n  }\n  gl_FragColor \x3d fragId / 255.0;\n}\n"])},{glslify:413}],303:[function(a,G,C){function q(k,e,h,l,c){this.plot=k;this.offsetBuffer=e;this.pickBuffer=h;this.shader=l;this.pickShader=c;this.sizeMin=.5;this.sizeMinCap=2;this.sizeMax=20;this.areaRatio=1;this.pointCount=0;this.color=[1,0,0,1];this.borderColor=
[0,0,0,1];this.blend=!1;this.pickOffset=0;this.points=null}var n=a("gl-shader"),m=a("gl-buffer"),f=a("typedarray-pool"),b=a("./lib/shader");G.exports=function(k,e){var h=k.gl,l=m(h),c=m(h),g=n(h,b.pointVertex,b.pointFragment);h=n(h,b.pickVertex,b.pickFragment);l=new q(k,l,c,g,h);l.update(e);k.addObject(l);return l};a=q.prototype;a.dispose=function(){this.shader.dispose();this.pickShader.dispose();this.offsetBuffer.dispose();this.pickBuffer.dispose();this.plot.removeObject(this)};a.update=function(k){function e(t,
w){return t in k?k[t]:w}var h;k=k||{};this.sizeMin=e("sizeMin",.5);this.sizeMax=e("sizeMax",20);this.color=e("color",[1,0,0,1]).slice();this.areaRatio=e("areaRatio",1);this.borderColor=e("borderColor",[0,0,0,1]).slice();this.blend=e("blend",!1);var l=k.positions.length>>>1,c=k.positions instanceof Float32Array,g=k.idToIndex instanceof Int32Array&&k.idToIndex.length>=l,d=k.positions,p=c?d:f.mallocFloat32(d.length),r=g?k.idToIndex:f.mallocInt32(l);c||p.set(d);if(!g)for(p.set(d),h=0;h<l;h++)r[h]=h;this.points=
d;this.offsetBuffer.update(p);this.pickBuffer.update(r);c||f.free(p);g||f.free(r);this.pointCount=l;this.pickOffset=0};a.unifiedDraw=function(){var k=[1,0,0,0,1,0,0,0,1],e=[0,0,0,0];return function(h){var l=void 0!==h,c=l?this.pickShader:this.shader,g=this.plot.gl,d=this.plot.dataBox;if(0===this.pointCount)return h;var p=d[2]-d[0],r=d[3]-d[1],t=this.points,w=0,x=t.length>>>1,y;for(y=0;y<x;y++){var A=t[2*y],z=t[2*y+1];A>=d[0]&&A<=d[2]&&z>=d[1]&&z<=d[3]&&w++}t=this.plot.pickPixelRatio*Math.max(Math.min(this.sizeMinCap,
this.sizeMin),Math.min(this.sizeMax,this.sizeMax/Math.pow(w,.33333)));k[0]=2/p;k[4]=2/r;k[6]=-2*d[0]/p-1;k[7]=-2*d[1]/r-1;this.offsetBuffer.bind();c.bind();c.attributes.position.pointer();c.uniforms.matrix=k;c.uniforms.color=this.color;c.uniforms.borderColor=this.borderColor;c.uniforms.pointCloud=5>t;c.uniforms.pointSize=t;c.uniforms.centerFraction=Math.min(1,Math.max(0,Math.sqrt(1-this.areaRatio)));l&&(e[0]=h&255,e[1]=h>>8&255,e[2]=h>>16&255,e[3]=h>>24&255,this.pickBuffer.bind(),c.attributes.pickId.pointer(g.UNSIGNED_BYTE),
c.uniforms.pickOffset=e,this.pickOffset=h);l=g.getParameter(g.BLEND);c=g.getParameter(g.DITHER);l&&!this.blend&&g.disable(g.BLEND);c&&g.disable(g.DITHER);g.drawArrays(g.POINTS,0,this.pointCount);l&&!this.blend&&g.enable(g.BLEND);c&&g.enable(g.DITHER);return h+this.pointCount}}();a.draw=a.unifiedDraw;a.drawPick=a.unifiedDraw;a.pick=function(k,e,h){k=this.pickOffset;e=this.pointCount;if(h<k||h>=k+e)return null;h-=k;k=this.points;return{object:this,pointId:h,dataCoord:[k[2*h],k[2*h+1]]}}},{"./lib/shader":302,
"gl-buffer":258,"gl-shader":312,"typedarray-pool":567}],304:[function(a,G,C){G.exports=function(q,n,m,f){var b=n[0],k=n[1],e=n[2];n=n[3];var h=m[0],l=m[1],c=m[2];m=m[3];var g=b*h+k*l+e*c+n*m;0>g&&(g=-g,h=-h,l=-l,c=-c,m=-m);if(1E-6<1-g){var d=Math.acos(g);var p=Math.sin(d);g=Math.sin((1-f)*d)/p;f=Math.sin(f*d)/p}else g=1-f;q[0]=g*b+f*h;q[1]=g*k+f*l;q[2]=g*e+f*c;q[3]=g*n+f*m;return q}},{}],305:[function(a,G,C){G.exports=function(q){return q||0===q?q.toString():""}},{}],306:[function(a,G,C){var q=a("vectorize-text");
G.exports=function(m,f,b){var k=n[f];k||(k=n[f]={});if(m in k)return k[m];var e={textAlign:"center",textBaseline:"middle",lineHeight:1,font:f,lineSpacing:1.25,styletags:{breaklines:!0,bolds:!0,italics:!0,subscripts:!0,superscripts:!0},triangles:!0};f=q(m,e);e.triangles=!1;e=q(m,e);var h,l;if(b&&1!==b){for(h=0;h<f.positions.length;++h)for(l=0;l<f.positions[h].length;++l)f.positions[h][l]/=b;for(h=0;h<e.positions.length;++h)for(l=0;l<e.positions[h].length;++l)e.positions[h][l]/=b}b=[[Infinity,Infinity],
[-Infinity,-Infinity]];var c=e.positions.length;for(h=0;h<c;++h){var g=e.positions[h];for(l=0;2>l;++l)b[0][l]=Math.min(b[0][l],g[l]),b[1][l]=Math.max(b[1][l],g[l])}return k[m]=[f,e,b]};var n={}},{"vectorize-text":572}],307:[function(a,G,C){function q(p,r){p=n(p,r);r=p.attributes;r.position.location=0;r.color.location=1;r.glyph.location=2;r.id.location=3;return p}var n=a("gl-shader"),m=a("glslify");a=m(["precision highp float;\n#define GLSLIFY 1\n\nbool outOfRange(float a, float b, float p) {\n  return ((p \x3e max(a, b)) || \n          (p \x3c min(a, b)));\n}\n\nbool outOfRange(vec2 a, vec2 b, vec2 p) {\n  return (outOfRange(a.x, b.x, p.x) ||\n          outOfRange(a.y, b.y, p.y));\n}\n\nbool outOfRange(vec3 a, vec3 b, vec3 p) {\n  return (outOfRange(a.x, b.x, p.x) ||\n          outOfRange(a.y, b.y, p.y) ||\n          outOfRange(a.z, b.z, p.z));\n}\n\nbool outOfRange(vec4 a, vec4 b, vec4 p) {\n  return outOfRange(a.xyz, b.xyz, p.xyz);\n}\n\nattribute vec3 position;\nattribute vec4 color;\nattribute vec2 glyph;\nattribute vec4 id;\n\nuniform vec4 highlightId;\nuniform float highlightScale;\nuniform mat4 model, view, projection;\nuniform vec3 clipBounds[2];\n\nvarying vec4 interpColor;\nvarying vec4 pickId;\nvarying vec3 dataCoordinate;\n\nvoid main() {\n  if (outOfRange(clipBounds[0], clipBounds[1], position)) {\n\n    gl_Position \x3d vec4(0,0,0,0);\n  } else {\n    float scale \x3d 1.0;\n    if(distance(highlightId, id) \x3c 0.0001) {\n      scale \x3d highlightScale;\n    }\n\n    vec4 worldPosition \x3d model * vec4(position, 1);\n    vec4 viewPosition \x3d view * worldPosition;\n    viewPosition \x3d viewPosition / viewPosition.w;\n    vec4 clipPosition \x3d projection * (viewPosition + scale * vec4(glyph.x, -glyph.y, 0, 0));\n\n    gl_Position \x3d clipPosition;\n    interpColor \x3d color;\n    pickId \x3d id;\n    dataCoordinate \x3d position;\n  }\n}"]);
G=m(["precision highp float;\n#define GLSLIFY 1\n\nbool outOfRange(float a, float b, float p) {\n  return ((p \x3e max(a, b)) || \n          (p \x3c min(a, b)));\n}\n\nbool outOfRange(vec2 a, vec2 b, vec2 p) {\n  return (outOfRange(a.x, b.x, p.x) ||\n          outOfRange(a.y, b.y, p.y));\n}\n\nbool outOfRange(vec3 a, vec3 b, vec3 p) {\n  return (outOfRange(a.x, b.x, p.x) ||\n          outOfRange(a.y, b.y, p.y) ||\n          outOfRange(a.z, b.z, p.z));\n}\n\nbool outOfRange(vec4 a, vec4 b, vec4 p) {\n  return outOfRange(a.xyz, b.xyz, p.xyz);\n}\n\nattribute vec3 position;\nattribute vec4 color;\nattribute vec2 glyph;\nattribute vec4 id;\n\nuniform mat4 model, view, projection;\nuniform vec2 screenSize;\nuniform vec3 clipBounds[2];\nuniform float highlightScale, pixelRatio;\nuniform vec4 highlightId;\n\nvarying vec4 interpColor;\nvarying vec4 pickId;\nvarying vec3 dataCoordinate;\n\nvoid main() {\n  if (outOfRange(clipBounds[0], clipBounds[1], position)) {\n\n    gl_Position \x3d vec4(0,0,0,0);\n  } else {\n    float scale \x3d pixelRatio;\n    if(distance(highlightId.bgr, id.bgr) \x3c 0.001) {\n      scale *\x3d highlightScale;\n    }\n\n    vec4 worldPosition \x3d model * vec4(position, 1.0);\n    vec4 viewPosition \x3d view * worldPosition;\n    vec4 clipPosition \x3d projection * viewPosition;\n    clipPosition /\x3d clipPosition.w;\n\n    gl_Position \x3d clipPosition + vec4(screenSize * scale * vec2(glyph.x, -glyph.y), 0.0, 0.0);\n    interpColor \x3d color;\n    pickId \x3d id;\n    dataCoordinate \x3d position;\n  }\n}"]);
var f=m(["precision highp float;\n#define GLSLIFY 1\n\nbool outOfRange(float a, float b, float p) {\n  return ((p \x3e max(a, b)) || \n          (p \x3c min(a, b)));\n}\n\nbool outOfRange(vec2 a, vec2 b, vec2 p) {\n  return (outOfRange(a.x, b.x, p.x) ||\n          outOfRange(a.y, b.y, p.y));\n}\n\nbool outOfRange(vec3 a, vec3 b, vec3 p) {\n  return (outOfRange(a.x, b.x, p.x) ||\n          outOfRange(a.y, b.y, p.y) ||\n          outOfRange(a.z, b.z, p.z));\n}\n\nbool outOfRange(vec4 a, vec4 b, vec4 p) {\n  return outOfRange(a.xyz, b.xyz, p.xyz);\n}\n\nattribute vec3 position;\nattribute vec4 color;\nattribute vec2 glyph;\nattribute vec4 id;\n\nuniform float highlightScale;\nuniform vec4 highlightId;\nuniform vec3 axes[2];\nuniform mat4 model, view, projection;\nuniform vec2 screenSize;\nuniform vec3 clipBounds[2];\nuniform float scale, pixelRatio;\n\nvarying vec4 interpColor;\nvarying vec4 pickId;\nvarying vec3 dataCoordinate;\n\nvoid main() {\n  if (outOfRange(clipBounds[0], clipBounds[1], position)) {\n\n    gl_Position \x3d vec4(0,0,0,0);\n  } else {\n    float lscale \x3d pixelRatio * scale;\n    if(distance(highlightId, id) \x3c 0.0001) {\n      lscale *\x3d highlightScale;\n    }\n\n    vec4 clipCenter   \x3d projection * view * model * vec4(position, 1);\n    vec3 dataPosition \x3d position + 0.5*lscale*(axes[0] * glyph.x + axes[1] * glyph.y) * clipCenter.w * screenSize.y;\n    vec4 clipPosition \x3d projection * view * model * vec4(dataPosition, 1);\n\n    gl_Position \x3d clipPosition;\n    interpColor \x3d color;\n    pickId \x3d id;\n    dataCoordinate \x3d dataPosition;\n  }\n}\n"]),
b=m(["precision highp float;\n#define GLSLIFY 1\n\nbool outOfRange(float a, float b, float p) {\n  return ((p \x3e max(a, b)) || \n          (p \x3c min(a, b)));\n}\n\nbool outOfRange(vec2 a, vec2 b, vec2 p) {\n  return (outOfRange(a.x, b.x, p.x) ||\n          outOfRange(a.y, b.y, p.y));\n}\n\nbool outOfRange(vec3 a, vec3 b, vec3 p) {\n  return (outOfRange(a.x, b.x, p.x) ||\n          outOfRange(a.y, b.y, p.y) ||\n          outOfRange(a.z, b.z, p.z));\n}\n\nbool outOfRange(vec4 a, vec4 b, vec4 p) {\n  return outOfRange(a.xyz, b.xyz, p.xyz);\n}\n\nuniform vec3 fragClipBounds[2];\nuniform float opacity;\n\nvarying vec4 interpColor;\nvarying vec3 dataCoordinate;\n\nvoid main() {\n  if (\n    outOfRange(fragClipBounds[0], fragClipBounds[1], dataCoordinate) ||\n    interpColor.a * opacity \x3d\x3d 0.\n  ) discard;\n  gl_FragColor \x3d interpColor * opacity;\n}\n"]);
m=m(["precision highp float;\n#define GLSLIFY 1\n\nbool outOfRange(float a, float b, float p) {\n  return ((p \x3e max(a, b)) || \n          (p \x3c min(a, b)));\n}\n\nbool outOfRange(vec2 a, vec2 b, vec2 p) {\n  return (outOfRange(a.x, b.x, p.x) ||\n          outOfRange(a.y, b.y, p.y));\n}\n\nbool outOfRange(vec3 a, vec3 b, vec3 p) {\n  return (outOfRange(a.x, b.x, p.x) ||\n          outOfRange(a.y, b.y, p.y) ||\n          outOfRange(a.z, b.z, p.z));\n}\n\nbool outOfRange(vec4 a, vec4 b, vec4 p) {\n  return outOfRange(a.xyz, b.xyz, p.xyz);\n}\n\nuniform vec3 fragClipBounds[2];\nuniform float pickGroup;\n\nvarying vec4 pickId;\nvarying vec3 dataCoordinate;\n\nvoid main() {\n  if (outOfRange(fragClipBounds[0], fragClipBounds[1], dataCoordinate)) discard;\n\n  gl_FragColor \x3d vec4(pickGroup, pickId.bgr);\n}"]);
var k=[{name:"position",type:"vec3"},{name:"color",type:"vec4"},{name:"glyph",type:"vec2"},{name:"id",type:"vec4"}],e={vertex:a,fragment:b,attributes:k},h={vertex:G,fragment:b,attributes:k},l={vertex:f,fragment:b,attributes:k},c={vertex:a,fragment:m,attributes:k},g={vertex:G,fragment:m,attributes:k},d={vertex:f,fragment:m,attributes:k};C.createPerspective=function(p){return q(p,e)};C.createOrtho=function(p){return q(p,h)};C.createProject=function(p){return q(p,l)};C.createPickPerspective=function(p){return q(p,
c)};C.createPickOrtho=function(p){return q(p,g)};C.createPickProject=function(p){return q(p,d)}},{"gl-shader":312,glslify:413}],308:[function(a,G,C){function q(E,L){var Q=E[0],S=E[1],R=E[2],O=E[3];E[0]=L[0]*Q+L[4]*S+L[8]*R+L[12]*O;E[1]=L[1]*Q+L[5]*S+L[9]*R+L[13]*O;E[2]=L[2]*Q+L[6]*S+L[10]*R+L[14]*O;E[3]=L[3]*Q+L[7]*S+L[11]*R+L[15]*O;return E}function n(E,L,Q,S){q(S,S,Q);q(S,S,L);return q(S,S,E)}function m(E,L){this.index=E;this.dataCoordinate=this.position=L}function f(E){return!0===E||1<E?1:E}function b(E,
L,Q,S,R,O,T,V,X,ba,aa,ka){this.gl=E;this.pixelRatio=1;this.shader=L;this.orthoShader=Q;this.projectShader=S;this.pointBuffer=R;this.colorBuffer=O;this.glyphBuffer=T;this.idBuffer=V;this.vao=X;this.lineVertexCount=this.vertexCount=0;this.opacity=1;this.hasAlpha=!1;this.lineWidth=0;this.projectScale=[2/3,2/3,2/3];this.projectOpacity=[1,1,1];this.projectHasAlpha=!1;this.pickId=0;this.pickPerspectiveShader=ba;this.pickOrthoShader=aa;this.pickProjectShader=ka;this.points=[];this._selectResult=new m(0,
[0,0,0]);this.useOrtho=!0;this.bounds=[[Infinity,Infinity,Infinity],[-Infinity,-Infinity,-Infinity]];this.axesProject=[!0,!0,!0];this.axesBounds=[[-Infinity,-Infinity,-Infinity],[Infinity,Infinity,Infinity]];this.highlightId=[1,1,1,1];this.highlightScale=2;this.clipBounds=[[-Infinity,-Infinity,-Infinity],[Infinity,Infinity,Infinity]];this.dirty=!0}function k(E){E[0]=E[1]=E[2]=0;return E}function e(E,L){E[0]=L[0];E[1]=L[1];E[2]=L[2];E[3]=1;return E}function h(E,L,Q,S){E[0]=L[0];E[1]=L[1];E[2]=L[2];
E[Q]=S;return E}function l(E,L,Q,S,R,O,T){var V=Q.gl;if(O===Q.projectHasAlpha||T){for(var X=Q.axesProject,ba=Q.gl,aa=L.uniforms,ka=S.model||A,ha=S.view||A,ca=S.projection||A,sa=Q.axesBounds,ma=Q.clipBounds,ra=N,qa=0;2>qa;++qa)for(var Y=0;3>Y;++Y)ra[qa][Y]=Math.max(Math.min(ma[qa][Y],1E8),-1E8);ma=Q.axes&&Q.axes.lastCubeProps?Q.axes.lastCubeProps.axis:[1,1,1];z[0]=2/ba.drawingBufferWidth;z[1]=2/ba.drawingBufferHeight;L.bind();aa.view=ha;aa.projection=ca;aa.screenSize=z;aa.highlightId=Q.highlightId;
aa.highlightScale=Q.highlightScale;aa.clipBounds=ra;aa.pickGroup=Q.pickId/255;aa.pixelRatio=R;for(L=0;3>L;++L)if(X[L]){aa.scale=Q.projectScale[L];aa.opacity=Q.projectOpacity[L];qa=I;for(var pa=0;16>pa;++pa)qa[pa]=0;for(pa=0;4>pa;++pa)qa[5*pa]=1;qa[5*L]=0;qa[12+L]=0>ma[L]?sa[0][L]:sa[1][L];t(qa,ka,qa);aa.model=qa;qa=(L+1)%3;Y=(L+2)%3;var oa=k(F),ua=k(D);oa[qa]=1;ua[Y]=1;pa=n(ca,ha,ka,e(u,oa));var ya=n(ca,ha,ka,e(B,ua));if(Math.abs(pa[1])>Math.abs(ya[1])){var ja=pa;pa=ya;ya=ja;ja=oa;oa=ua;ua=ja;ja=
qa;qa=Y;Y=ja}0>pa[0]&&(oa[qa]=-1);0<ya[1]&&(ua[Y]=-1);for(pa=ja=ya=0;4>pa;++pa)ya+=Math.pow(ka[4*qa+pa],2),ja+=Math.pow(ka[4*Y+pa],2);oa[qa]/=Math.sqrt(ya);ua[Y]/=Math.sqrt(ja);aa.axes[0]=oa;aa.axes[1]=ua;aa.fragClipBounds[0]=h(J,ra[0],L,-1E8);aa.fragClipBounds[1]=h(J,ra[1],L,1E8);Q.vao.bind();Q.vao.draw(ba.TRIANGLES,Q.vertexCount);0<Q.lineWidth&&(ba.lineWidth(Q.lineWidth*R),Q.vao.draw(ba.LINES,Q.lineVertexCount,Q.vertexCount));Q.vao.unbind()}}if(O===Q.hasAlpha||T)E.bind(),E=E.uniforms,E.model=S.model||
A,E.view=S.view||A,E.projection=S.projection||A,z[0]=2/V.drawingBufferWidth,z[1]=2/V.drawingBufferHeight,E.screenSize=z,E.highlightId=Q.highlightId,E.highlightScale=Q.highlightScale,E.fragClipBounds=M,E.clipBounds=Q.axes.bounds,E.opacity=Q.opacity,E.pickGroup=Q.pickId/255,E.pixelRatio=R,Q.vao.bind(),Q.vao.draw(V.TRIANGLES,Q.vertexCount),0<Q.lineWidth&&(V.lineWidth(Q.lineWidth*R),Q.vao.draw(V.LINES,Q.lineVertexCount,Q.vertexCount)),Q.vao.unbind()}function c(E,L,Q,S){L=Array.isArray(E)?L<E.length?E[L]:
void 0:E;L=y(L);E=!0;g(L)&&(L="▼",E=!1);Q=x(L,Q,S);return{mesh:Q[0],lines:Q[1],bounds:Q[2],visible:E}}var g=a("is-string-blank"),d=a("gl-buffer"),p=a("gl-vao"),r=a("typedarray-pool"),t=a("gl-mat4/multiply"),w=a("./lib/shaders"),x=a("./lib/glyphs"),y=a("./lib/get-simple-string"),A=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1];G.exports=function(E){var L=E.gl,Q=w.createPerspective(L),S=w.createOrtho(L),R=w.createProject(L),O=w.createPickPerspective(L),T=w.createPickOrtho(L),V=w.createPickProject(L),X=d(L),ba=d(L),
aa=d(L),ka=d(L),ha=p(L,[{buffer:X,size:3,type:L.FLOAT},{buffer:ba,size:4,type:L.FLOAT},{buffer:aa,size:2,type:L.FLOAT},{buffer:ka,size:4,type:L.UNSIGNED_BYTE,normalized:!0}]);L=new b(L,Q,S,R,X,ba,aa,ka,ha,O,T,V);L.update(E);return L};a=b.prototype;a.pickSlots=1;a.setPickBase=function(E){this.pickId=E};a.isTransparent=function(){if(this.hasAlpha)return!0;for(var E=0;3>E;++E)if(this.axesProject[E]&&this.projectHasAlpha)return!0;return!1};a.isOpaque=function(){if(!this.hasAlpha)return!0;for(var E=0;3>
E;++E)if(this.axesProject[E]&&!this.projectHasAlpha)return!0;return!1};var z=[0,0],F=[0,0,0],D=[0,0,0],u=[0,0,0,1],B=[0,0,0,1],I=A.slice(),J=[0,0,0],N=[[0,0,0],[0,0,0]],M=[[-1E8,-1E8,-1E8],[1E8,1E8,1E8]];a.draw=function(E){l(this.useOrtho?this.orthoShader:this.shader,this.projectShader,this,E,this.pixelRatio,!1,!1)};a.drawTransparent=function(E){l(this.useOrtho?this.orthoShader:this.shader,this.projectShader,this,E,this.pixelRatio,!0,!1)};a.drawPick=function(E){l(this.useOrtho?this.pickOrthoShader:
this.pickPerspectiveShader,this.pickProjectShader,this,E,1,!0,!0)};a.pick=function(E){if(!E||E.id!==this.pickId)return null;var L=E.value[2]+(E.value[1]<<8)+(E.value[0]<<16);if(L>=this.pointCount||0>L)return null;E=this.points[L];var Q=this._selectResult;Q.index=L;for(L=0;3>L;++L)Q.position[L]=Q.dataCoordinate[L]=E[L];return Q};a.highlight=function(E){E?(E=E.index,this.highlightId=[(E&255)/255,(E>>8&255)/255,(E>>16&255)/255,0]):this.highlightId=[1,1,1,1]};a.update=function(E){E=E||{};"perspective"in
E&&(this.useOrtho=!E.perspective);"orthographic"in E&&(this.useOrtho=!!E.orthographic);"lineWidth"in E&&(this.lineWidth=E.lineWidth);if("project"in E)if(Array.isArray(E.project))this.axesProject=E.project;else{var L=!!E.project;this.axesProject=[L,L,L]}"projectScale"in E&&(Array.isArray(E.projectScale)?this.projectScale=E.projectScale.slice():(L=+E.projectScale,this.projectScale=[L,L,L]));this.projectHasAlpha=!1;if("projectOpacity"in E){Array.isArray(E.projectOpacity)?this.projectOpacity=E.projectOpacity.slice():
(L=+E.projectOpacity,this.projectOpacity=[L,L,L]);for(var Q=0;3>Q;++Q)this.projectOpacity[Q]=f(this.projectOpacity[Q]),1>this.projectOpacity[Q]&&(this.projectHasAlpha=!0)}this.hasAlpha=!1;"opacity"in E&&(this.opacity=f(E.opacity),1>this.opacity&&(this.hasAlpha=!0));this.dirty=!0;L=E.position;var S=E.font||"normal",R=E.alignment||[0,0];if(2===R.length){var O=R[0];var T=R[1]}else for(O=[],T=[],Q=0;Q<R.length;++Q)O[Q]=R[Q][0],T[Q]=R[Q][1];R=[Infinity,Infinity,Infinity];var V=[-Infinity,-Infinity,-Infinity],
X=E.glyph,ba=E.color,aa=E.size,ka=E.angle;E=E.lineColor;var ha=-1,ca=0,sa=0,ma=0;if(L.length)a:for(ma=L.length,Q=0;Q<ma;++Q){for(var ra=L[Q],qa=0;3>qa;++qa)if(isNaN(ra[qa])||!isFinite(ra[qa]))continue a;var Y=c(X,Q,S,this.pixelRatio),pa=Y.mesh,oa=Y.lines;ca+=3*pa.cells.length;sa+=2*oa.edges.length}Q=ca+sa;var ua=r.mallocFloat(3*Q),ya=r.mallocFloat(4*Q),ja=r.mallocFloat(2*Q),za=r.mallocUint32(Q);if(0<Q){var Ba=0,Ma=ca,Oa=[0,0,0,1],Ia=[0,0,0,1],Pa=Array.isArray(ba)&&Array.isArray(ba[0]),Fa=Array.isArray(E)&&
Array.isArray(E[0]);Q=0;a:for(;Q<ma;++Q){ha+=1;ra=L[Q];for(qa=0;3>qa;++qa){if(isNaN(ra[qa])||!isFinite(ra[qa]))continue a;V[qa]=Math.max(V[qa],ra[qa]);R[qa]=Math.min(R[qa],ra[qa])}Y=c(X,Q,S,this.pixelRatio);pa=Y.mesh;oa=Y.lines;var Na=Y.bounds;var $a=Y.visible;if($a)if(Array.isArray(ba))if(Y=Pa?Q<ba.length?ba[Q]:[0,0,0,0]:ba,3===Y.length){for(qa=0;3>qa;++qa)Oa[qa]=Y[qa];Oa[3]=1}else{if(4===Y.length){for(qa=0;4>qa;++qa)Oa[qa]=Y[qa];!this.hasAlpha&&1>Y[3]&&(this.hasAlpha=!0)}}else Oa[0]=Oa[1]=Oa[2]=
0,Oa[3]=1;else Oa=[1,1,1,0];if($a)if(Array.isArray(E))if(Y=Fa?Q<E.length?E[Q]:[0,0,0,0]:E,3===Y.length){for(qa=0;3>qa;++qa)Ia[qa]=Y[qa];Ia[qa]=1}else{if(4===Y.length){for(qa=0;4>qa;++qa)Ia[qa]=Y[qa];!this.hasAlpha&&1>Y[3]&&(this.hasAlpha=!0)}}else Ia[0]=Ia[1]=Ia[2]=0,Ia[3]=1;else Ia=[1,1,1,0];Y=.5;$a?Array.isArray(aa)?Y=Q<aa.length?+aa[Q]:12:aa?Y=+aa:this.useOrtho&&(Y=12):Y=0;ra=0;Array.isArray(ka)?ra=Q<ka.length?+ka[Q]:0:ka&&(ra=+ka);$a=Math.cos(ra);var cb=Math.sin(ra);ra=L[Q];for(qa=0;3>qa;++qa)V[qa]=
Math.max(V[qa],ra[qa]),R[qa]=Math.min(R[qa],ra[qa]);qa=0;Array.isArray(O)?qa=Q<O.length?O[Q]:0:O&&(qa=O);var mb=0;Array.isArray(T)?mb=Q<T.length?T[Q]:0:T&&(mb=T);qa*=0<qa?1-Na[0][0]:0>qa?1+Na[1][0]:1;mb*=0<mb?1-Na[0][1]:0>mb?1+Na[1][1]:1;Na=[qa,mb];mb=pa.cells||[];pa=pa.positions||[];for(qa=0;qa<mb.length;++qa)for(var Ka=mb[qa],Ua=0;3>Ua;++Ua){for(var Ea=0;3>Ea;++Ea)ua[3*Ba+Ea]=ra[Ea];for(Ea=0;4>Ea;++Ea)ya[4*Ba+Ea]=Oa[Ea];za[Ba]=ha;Ea=pa[Ka[Ua]];ja[2*Ba]=Y*($a*Ea[0]-cb*Ea[1]+Na[0]);ja[2*Ba+1]=Y*(cb*
Ea[0]+$a*Ea[1]+Na[1]);Ba+=1}mb=oa.edges;pa=oa.positions;for(qa=0;qa<mb.length;++qa)for(Ka=mb[qa],Ua=0;2>Ua;++Ua){for(Ea=0;3>Ea;++Ea)ua[3*Ma+Ea]=ra[Ea];for(Ea=0;4>Ea;++Ea)ya[4*Ma+Ea]=Ia[Ea];za[Ma]=ha;Ea=pa[Ka[Ua]];ja[2*Ma]=Y*($a*Ea[0]-cb*Ea[1]+Na[0]);ja[2*Ma+1]=Y*(cb*Ea[0]+$a*Ea[1]+Na[1]);Ma+=1}}}this.bounds=[R,V];this.points=L;this.pointCount=L.length;this.vertexCount=ca;this.lineVertexCount=sa;this.pointBuffer.update(ua);this.colorBuffer.update(ya);this.glyphBuffer.update(ja);this.idBuffer.update(za);
r.free(ua);r.free(ya);r.free(ja);r.free(za)};a.dispose=function(){this.shader.dispose();this.orthoShader.dispose();this.pickPerspectiveShader.dispose();this.pickOrthoShader.dispose();this.vao.dispose();this.pointBuffer.dispose();this.colorBuffer.dispose();this.glyphBuffer.dispose();this.idBuffer.dispose()}},{"./lib/get-simple-string":305,"./lib/glyphs":306,"./lib/shaders":307,"gl-buffer":258,"gl-mat4/multiply":280,"gl-vao":332,"is-string-blank":444,"typedarray-pool":567}],309:[function(a,G,C){a=a("glslify");
C.boxVertex=a(["precision mediump float;\n#define GLSLIFY 1\n\nattribute vec2 vertex;\n\nuniform vec2 cornerA, cornerB;\n\nvoid main() {\n  gl_Position \x3d vec4(mix(cornerA, cornerB, vertex), 0, 1);\n}\n"]);C.boxFragment=a(["precision mediump float;\n#define GLSLIFY 1\n\nuniform vec4 color;\n\nvoid main() {\n  gl_FragColor \x3d color;\n}\n"])},{glslify:413}],310:[function(a,G,C){function q(b,k,e){this.plot=b;this.boxBuffer=k;this.boxShader=e;this.enabled=!0;this.selectBox=[Infinity,Infinity,-Infinity,
-Infinity];this.borderColor=[0,0,0,1];this.innerFill=!1;this.innerColor=[0,0,0,.25];this.outerFill=!0;this.outerColor=[0,0,0,.5];this.borderWidth=10}var n=a("gl-shader"),m=a("gl-buffer"),f=a("./lib/shaders");G.exports=function(b,k){var e=b.gl,h=m(e,[0,0,0,1,1,0,1,1]);e=n(e,f.boxVertex,f.boxFragment);h=new q(b,h,e);h.update(k);b.addOverlay(h);return h};a=q.prototype;a.draw=function(){if(this.enabled){var b=this.plot,k=this.selectBox,e=this.borderWidth,h=this.innerColor,l=this.outerColor,c=this.borderColor,
g=b.box,d=b.screenBox,p=b.dataBox,r=b.viewBox,t=b.pixelRatio;b=(k[0]-p[0])*(r[2]-r[0])/(p[2]-p[0])+r[0];var w=(k[1]-p[1])*(r[3]-r[1])/(p[3]-p[1])+r[1],x=(k[2]-p[0])*(r[2]-r[0])/(p[2]-p[0])+r[0];k=(k[3]-p[1])*(r[3]-r[1])/(p[3]-p[1])+r[1];b=Math.max(b,r[0]);w=Math.max(w,r[1]);x=Math.min(x,r[2]);k=Math.min(k,r[3]);x<b||k<w||(g.bind(),r=d[2]-d[0],d=d[3]-d[1],this.outerFill&&(g.drawBox(0,0,r,w,l),g.drawBox(0,w,b,k,l),g.drawBox(0,k,r,d,l),g.drawBox(x,w,r,k,l)),this.innerFill&&g.drawBox(b,w,x,k,h),0<e&&
(e*=t,g.drawBox(b-e,w-e,x+e,w+e,c),g.drawBox(b-e,k-e,x+e,k+e,c),g.drawBox(b-e,w-e,b+e,k+e,c),g.drawBox(x-e,w-e,x+e,k+e,c)))}};a.update=function(b){b=b||{};this.innerFill=!!b.innerFill;this.outerFill=!!b.outerFill;this.innerColor=(b.innerColor||[0,0,0,.5]).slice();this.outerColor=(b.outerColor||[0,0,0,.5]).slice();this.borderColor=(b.borderColor||[0,0,0,1]).slice();this.borderWidth=b.borderWidth||0;this.selectBox=(b.selectBox||this.selectBox).slice()};a.dispose=function(){this.boxBuffer.dispose();
this.boxShader.dispose();this.plot.removeOverlay(this)}},{"./lib/shaders":309,"gl-buffer":258,"gl-shader":312}],311:[function(a,G,C){function q(e,h,l,c,g){this.coord=[e,h];this.id=l;this.value=c;this.distance=g}function n(e,h,l){this.gl=e;this.fbo=h;this.buffer=l;this._readTimeout=null;var c=this;this._readCallback=function(){c.gl&&(h.bind(),e.readPixels(0,0,h.shape[0],h.shape[1],e.RGBA,e.UNSIGNED_BYTE,c.buffer),c._readTimeout=null)}}G.exports=function(e,h){var l=h[0],c=h[1];h=m(e,l,c,{});l=f.mallocUint8(l*
c*4);return new n(e,h,l)};var m=a("gl-fbo"),f=a("typedarray-pool"),b=a("ndarray"),k=a("bit-twiddle").nextPow2;a=n.prototype;Object.defineProperty(a,"shape",{get:function(){return this.gl?this.fbo.shape.slice():[0,0]},set:function(e){if(this.gl){this.fbo.shape=e;var h=this.fbo.shape[0],l=this.fbo.shape[1];if(l*h*4>this.buffer.length){f.free(this.buffer);for(var c=this.buffer=f.mallocUint8(k(l*h*4)),g=0;g<l*h*4;++g)c[g]=255}return e}}});a.begin=function(){var e=this.gl;e&&(this.fbo.bind(),e.clearColor(1,
1,1,1),e.clear(e.COLOR_BUFFER_BIT|e.DEPTH_BUFFER_BIT))};a.end=function(){var e=this.gl;e&&(e.bindFramebuffer(e.FRAMEBUFFER,null),this._readTimeout||clearTimeout(this._readTimeout),this._readTimeout=setTimeout(this._readCallback,1))};a.query=function(e,h,l){if(!this.gl)return null;var c=this.fbo.shape.slice();e|=0;h|=0;"number"!==typeof l&&(l=1);var g=Math.min(Math.max(e-l,0),c[0])|0,d=Math.min(Math.max(e+l,0),c[0])|0;e=Math.min(Math.max(h-l,0),c[1])|0;h=Math.min(Math.max(h+l,0),c[1])|0;if(d<=g||h<=
e)return null;h=[d-g,h-e];c=b(this.buffer,[h[0],h[1],4],[4,4*c[0],1],4*(g+c[0]*e));h=c.hi(h[0],h[1],1);d=l;for(var p=1E8,r=-1,t=-1,w=h.shape[0],x=h.shape[1],y=0;y<w;y++)for(var A=0;A<x;A++){var z=h.get(y,A,0),F=h.get(y,A,1),D=h.get(y,A,2),u=h.get(y,A,3);if(255>z||255>F||255>D||255>u)z=d-y,F=l-A,z=z*z+F*F,z<p&&(p=z,r=y,t=A)}h=[r,t,p];d=h[0];l=h[1];if(0>d||Math.pow(this.radius,2)<h[2])return null;p=c.get(d,l,0);r=c.get(d,l,1);t=c.get(d,l,2);c=c.get(d,l,3);return new q(d+g|0,l+e|0,p,[r,t,c],Math.sqrt(h[2]))};
a.dispose=function(){this.gl&&(this.fbo.dispose(),f.free(this.buffer),this.gl=null,this._readTimeout&&clearTimeout(this._readTimeout))}},{"bit-twiddle":97,"gl-fbo":266,ndarray:469,"typedarray-pool":567}],312:[function(a,G,C){function q(l){this.gl=l;this.gl.lastAttribCount=0;this._vref=this._fref=this._relink=this.vertShader=this.fragShader=this.program=this.attributes=this.uniforms=this.types=null}function n(l,c){return l.name<c.name?-1:1}var m=a("./lib/create-uniforms"),f=a("./lib/create-attributes"),
b=a("./lib/reflect"),k=a("./lib/shader-cache"),e=a("./lib/runtime-reflect"),h=a("./lib/GLError");a=q.prototype;a.bind=function(){this.program||this._relink();var l,c=this.gl.getProgramParameter(this.program,this.gl.ACTIVE_ATTRIBUTES),g=this.gl.lastAttribCount;if(c>g)for(l=g;l<c;l++)this.gl.enableVertexAttribArray(l);else if(g>c)for(l=c;l<g;l++)this.gl.disableVertexAttribArray(l);this.gl.lastAttribCount=c;this.gl.useProgram(this.program)};a.dispose=function(){for(var l=this.gl.lastAttribCount,c=0;c<
l;c++)this.gl.disableVertexAttribArray(c);this.gl.lastAttribCount=0;this._fref&&this._fref.dispose();this._vref&&this._vref.dispose();this.attributes=this.types=this.vertShader=this.fragShader=this.program=this._relink=this._fref=this._vref=null};a.update=function(l,c,g,d){function p(){t.program=k.program(w,t._vref,t._fref,x,y);for(var I=0;I<g.length;++I)B[I]=w.getUniformLocation(t.program,g[I].name)}if(!c||1===arguments.length){var r=l;l=r.vertex;c=r.fragment;g=r.uniforms;d=r.attributes}var t=this,
w=t.gl;r=t._vref;t._vref=k.shader(w,w.VERTEX_SHADER,l);r&&r.dispose();t.vertShader=t._vref.shader;r=this._fref;t._fref=k.shader(w,w.FRAGMENT_SHADER,c);r&&r.dispose();t.fragShader=t._fref.shader;if(!g||!d){r=w.createProgram();w.attachShader(r,t.fragShader);w.attachShader(r,t.vertShader);w.linkProgram(r);if(!w.getProgramParameter(r,w.LINK_STATUS))throw r=w.getProgramInfoLog(r),new h(r,"Error linking program:"+r);g=g||e.uniforms(w,r);d=d||e.attributes(w,r);w.deleteProgram(r)}d=d.slice();d.sort(n);r=
[];var x=[],y=[],A;for(A=0;A<d.length;++A){var z=d[A];if(0<=z.type.indexOf("mat")){for(var F=z.type.charAt(z.type.length-1)|0,D=Array(F),u=0;u<F;++u)D[u]=y.length,x.push(z.name+"["+u+"]"),"number"===typeof z.location?y.push(z.location+u):Array.isArray(z.location)&&z.location.length===F&&"number"===typeof z.location[u]?y.push(z.location[u]|0):y.push(-1);r.push({name:z.name,type:z.type,locations:D})}else r.push({name:z.name,type:z.type,locations:[y.length]}),x.push(z.name),"number"===typeof z.location?
y.push(z.location|0):y.push(-1)}for(A=z=0;A<y.length;++A)if(0>y[A]){for(;0<=y.indexOf(z);)z+=1;y[A]=z}var B=Array(g.length);p();t._relink=p;t.types={uniforms:b(g),attributes:b(d)};t.attributes=f(w,t,r,y);Object.defineProperty(t,"uniforms",m(w,t,g,B))};G.exports=function(l,c,g,d,p){l=new q(l);l.update(c,g,d,p);return l}},{"./lib/GLError":313,"./lib/create-attributes":314,"./lib/create-uniforms":315,"./lib/reflect":316,"./lib/runtime-reflect":317,"./lib/shader-cache":318}],313:[function(a,G,C){function q(n,
m,f){this.shortMessage=m||"";this.longMessage=f||"";this.rawError=n||"";this.message="gl-shader: "+(m||n||"")+(f?"\n"+f:"");this.stack=Error().stack}q.prototype=Error();q.prototype.name="GLError";q.prototype.constructor=q;G.exports=q},{}],314:[function(a,G,C){function q(b,k,e,h,l,c){this._gl=b;this._wrapper=k;this._index=e;this._locations=h;this._dimension=l;this._constFunc=c}function n(b,k,e,h,l,c,g){for(var d=["gl","v"],p=[],r=0;r<l;++r)d.push("x"+r),p.push("x"+r);d.push("if(x0.length\x3d\x3d\x3dvoid 0){return gl.vertexAttrib"+
l+"f(v,"+p.join()+")}else{return gl.vertexAttrib"+l+"fv(v,x0)}");var t=Function.apply(null,d),w=new q(b,k,e,h,l,t);Object.defineProperty(c,g,{set:function(x){b.disableVertexAttribArray(h[e]);t(b,h[e],x);return x},get:function(){return w},enumerable:!0})}function m(b,k,e,h,l,c,g){for(var d=Array(l),p=Array(l),r=0;r<l;++r)n(b,k,e[r],h,l,d,r),p[r]=d[r];Object.defineProperty(d,"location",{set:function(x){if(Array.isArray(x))for(var y=0;y<l;++y)p[y].location=x[y];else for(y=0;y<l;++y)p[y].location=x+y;
return x},get:function(){for(var x=Array(l),y=0;y<l;++y)x[y]=h[e[y]];return x},enumerable:!0});d.pointer=function(x,y,A,z){x=x||b.FLOAT;y=!!y;A=A||l*l;z=z||0;for(var F=0;F<l;++F){var D=h[e[F]];b.vertexAttribPointer(D,l,x,y,A,z+F*l);b.enableVertexAttribArray(D)}};var t=Array(l),w=b["vertexAttrib"+l+"fv"];Object.defineProperty(c,g,{set:function(x){for(var y=0;y<l;++y){var A=h[e[y]];b.disableVertexAttribArray(A);if(Array.isArray(x[0]))w.call(b,A,x[y]);else{for(var z=0;z<l;++z)t[z]=x[l*y+z];w.call(b,
A,t)}}return x},get:function(){return d},enumerable:!0})}G.exports=function(b,k,e,h){for(var l={},c=0,g=e.length;c<g;++c){var d=e[c],p=d.name,r=d.type;d=d.locations;switch(r){case "bool":case "int":case "float":n(b,k,d[0],h,1,l,p);break;default:if(0<=r.indexOf("vec")){var t=r.charCodeAt(r.length-1)-48;if(2>t||4<t)throw new f("","Invalid data type for attribute "+p+": "+r);n(b,k,d[0],h,t,l,p)}else if(0<=r.indexOf("mat")){t=r.charCodeAt(r.length-1)-48;if(2>t||4<t)throw new f("","Invalid data type for attribute "+
p+": "+r);m(b,k,d,h,t,l,p)}else throw new f("","Unknown data type for attribute "+p+": "+r);}}return l};var f=a("./GLError");a=q.prototype;a.pointer=function(b,k,e,h){var l=this._gl,c=this._locations[this._index];l.vertexAttribPointer(c,this._dimension,b||l.FLOAT,!!k,e||0,h||0);l.enableVertexAttribArray(c)};a.set=function(b,k,e,h){return this._constFunc(this._locations[this._index],b,k,e,h)};Object.defineProperty(a,"location",{get:function(){return this._locations[this._index]},set:function(b){b!==
this._locations[this._index]&&(this._locations[this._index]=b|0,this._wrapper.program=null);return b|0}})},{"./GLError":313}],315:[function(a,G,C){function q(b){return(new Function("y","return function(){return y}"))(b)}function n(b,k){for(var e=Array(b),h=0;h<b;++h)e[h]=k;return e}var m=a("./reflect"),f=a("./GLError");G.exports=function(b,k,e,h){function l(w,x,y){switch(y){case "bool":case "int":case "sampler2D":case "samplerCube":return"gl.uniform1i(locations["+x+"],obj"+w+")";case "float":return"gl.uniform1f(locations["+
x+"],obj"+w+")";default:var A=y.indexOf("vec");if(0<=A&&1>=A&&y.length===4+A){A=y.charCodeAt(y.length-1)-48;if(2>A||4<A)throw new f("","Invalid data type");switch(y.charAt(0)){case "b":case "i":return"gl.uniform"+A+"iv(locations["+x+"],obj"+w+")";case "v":return"gl.uniform"+A+"fv(locations["+x+"],obj"+w+")";default:throw new f("","Unrecognized data type for vector "+name+": "+y);}}else{if(0===y.indexOf("mat")&&4===y.length){A=y.charCodeAt(y.length-1)-48;if(2>A||4<A)throw new f("","Invalid uniform dimension type for matrix "+
name+": "+y);return"gl.uniformMatrix"+A+"fv(locations["+x+"],false,obj"+w+")"}throw new f("","Unknown uniform data type for "+name+": "+y);}}}function c(w,x){if("object"!==typeof x)return[[w,x]];var y=[],A;for(A in x){var z=x[A],F=w;F=parseInt(A)+""===A?F+("["+A+"]"):F+("."+A);"object"===typeof z?y.push.apply(y,c(F,z)):y.push([F,z])}return y}function g(w){var x=["return function updateProperty(obj){"];w=c("",w);for(var y=0;y<w.length;++y){var A=w[y],z=A[0];A=A[1];h[A]&&x.push(l(z,A,e[A].type))}x.push("return obj}");
return(new Function("gl","locations",x.join("\n")))(b,h)}function d(w){switch(w){case "bool":return!1;case "int":case "sampler2D":case "samplerCube":return 0;case "float":return 0;default:var x=w.indexOf("vec");if(0<=x&&1>=x&&w.length===4+x){x=w.charCodeAt(w.length-1)-48;if(2>x||4<x)throw new f("","Invalid data type");return"b"===w.charAt(0)?n(x,!1):n(x,0)}if(0===w.indexOf("mat")&&4===w.length){x=w.charCodeAt(w.length-1)-48;if(2>x||4<x)throw new f("","Invalid uniform dimension type for matrix "+name+
": "+w);return n(x*x,0)}throw new f("","Unknown uniform data type for "+name+": "+w);}}function p(w,x,y){if("object"===typeof y){var A=r(y);Object.defineProperty(w,x,{get:q(A),set:g(y),enumerable:!0,configurable:!1})}else h[y]?Object.defineProperty(w,x,{get:(new Function("gl","wrapper","locations","return function(){return gl.getUniform(wrapper.program,locations["+y+"])}"))(b,k,h),set:g(y),enumerable:!0,configurable:!1}):w[x]=d(e[y].type)}function r(w){if(Array.isArray(w)){var x=Array(w.length);for(var y=
0;y<w.length;++y)p(x,y,w[y])}else for(y in x={},w)p(x,y,w[y]);return x}var t=m(e,!0);return{get:q(r(t)),set:g(t),enumerable:!0,configurable:!0}}},{"./GLError":313,"./reflect":316}],316:[function(a,G,C){G.exports=function(q,n){for(var m={},f=0;f<q.length;++f)for(var b=q[f].name.split("."),k=m,e=0;e<b.length;++e){var h=b[e].split("[");if(1<h.length){h[0]in k||(k[h[0]]=[]);k=k[h[0]];for(var l=1;l<h.length;++l){var c=parseInt(h[l]);l<h.length-1||e<b.length-1?(c in k||(k[c]=l<h.length-1?[]:{}),k=k[c]):
k[c]=n?f:q[f].type}}else e<b.length-1?(h[0]in k||(k[h[0]]={}),k=k[h[0]]):k[h[0]]=n?f:q[f].type}return m}},{}],317:[function(a,G,C){function q(f,b){if(!m){var k=Object.keys(n);m={};for(var e=0;e<k.length;++e){var h=k[e];m[f[h]]=n[h]}}return m[b]}C.uniforms=function(f,b){for(var k=f.getProgramParameter(b,f.ACTIVE_UNIFORMS),e=[],h=0;h<k;++h){var l=f.getActiveUniform(b,h);if(l){var c=q(f,l.type);if(1<l.size)for(var g=0;g<l.size;++g)e.push({name:l.name.replace("[0]","["+g+"]"),type:c});else e.push({name:l.name,
type:c})}}return e};C.attributes=function(f,b){for(var k=f.getProgramParameter(b,f.ACTIVE_ATTRIBUTES),e=[],h=0;h<k;++h){var l=f.getActiveAttrib(b,h);l&&e.push({name:l.name,type:q(f,l.type)})}return e};var n={FLOAT:"float",FLOAT_VEC2:"vec2",FLOAT_VEC3:"vec3",FLOAT_VEC4:"vec4",INT:"int",INT_VEC2:"ivec2",INT_VEC3:"ivec3",INT_VEC4:"ivec4",BOOL:"bool",BOOL_VEC2:"bvec2",BOOL_VEC3:"bvec3",BOOL_VEC4:"bvec4",FLOAT_MAT2:"mat2",FLOAT_MAT3:"mat3",FLOAT_MAT4:"mat4",SAMPLER_2D:"sampler2D",SAMPLER_CUBE:"samplerCube"},
m=null},{}],318:[function(a,G,C){function q(h,l,c,g,d,p,r){this.id=h;this.src=l;this.type=c;this.shader=g;this.count=p;this.programs=[];this.cache=r}function n(h){this.gl=h;this.shaders=[{},{}];this.programs={}}function m(h){var l=k.get(h);l||(l=new n(h),k.set(h,l));return l}C.shader=function(h,l,c){return m(h).getShaderReference(l,c)};C.program=function(h,l,c,g,d){return m(h).getProgram(l,c,g,d)};var f=a("./GLError"),b=a("gl-format-compiler-error"),k=new ("undefined"===typeof WeakMap?a("weakmap-shim"):
WeakMap),e=0;q.prototype.dispose=function(){if(0===--this.count){for(var h=this.cache,l=h.gl,c=this.programs,g=0,d=c.length;g<d;++g){var p=h.programs[c[g]];p&&(delete h.programs[g],l.deleteProgram(p))}l.deleteShader(this.shader);delete h.shaders[this.type===l.FRAGMENT_SHADER|0][this.src]}};a=n.prototype;a.getShaderReference=function(h,l){var c=this.gl,g=this.shaders[h===c.FRAGMENT_SHADER|0],d=g[l];if(d&&c.isShader(d.shader))d.count+=1;else{d=c.createShader(h);c.shaderSource(d,l);c.compileShader(d);
if(!c.getShaderParameter(d,c.COMPILE_STATUS)){c=c.getShaderInfoLog(d);try{var p=b(c,l,h)}catch(r){throw console.warn("Failed to format compiler error: "+r),new f(c,"Error compiling shader:\n"+c);}throw new f(c,p.short,p.long);}d=g[l]=new q(e++,l,h,d,[],1,this)}return d};a.getProgram=function(h,l,c,g){var d=[h.id,l.id,c.join(":"),g.join(":")].join("@"),p=this.programs[d];if(!p||!this.gl.isProgram(p)){p=this.programs;var r=this.gl,t=h.shader,w=l.shader,x=r.createProgram();r.attachShader(x,t);r.attachShader(x,
w);for(t=0;t<c.length;++t)r.bindAttribLocation(x,g[t],c[t]);r.linkProgram(x);if(!r.getProgramParameter(x,r.LINK_STATUS))throw h=r.getProgramInfoLog(x),new f(h,"Error linking program: "+h);p[d]=p=x;h.programs.push(d);l.programs.push(d)}return p}},{"./GLError":313,"gl-format-compiler-error":267,"weakmap-shim":577}],319:[function(a,G,C){function q(n){this.plot=n;this.enable=[!0,!0,!1,!1];this.width=[1,1,1,1];this.color=[[0,0,0,1],[0,0,0,1],[0,0,0,1],[0,0,0,1]];this.center=[Infinity,Infinity]}G.exports=
function(n,m){var f=new q(n);f.update(m);n.addOverlay(f);return f};a=q.prototype;a.update=function(n){n=n||{};this.enable=(n.enable||[!0,!0,!1,!1]).slice();this.width=(n.width||[1,1,1,1]).slice();this.color=(n.color||[[0,0,0,1],[0,0,0,1],[0,0,0,1],[0,0,0,1]]).map(function(m){return m.slice()});this.center=(n.center||[Infinity,Infinity]).slice();this.plot.setOverlayDirty()};a.draw=function(){var n=this.enable,m=this.width,f=this.color,b=this.center,k=this.plot,e=k.line,h=k.dataBox;k=k.viewBox;e.bind();
if(h[0]<=b[0]&&b[0]<=h[2]&&h[1]<=b[1]&&b[1]<=h[3]){var l=k[0]+(b[0]-h[0])/(h[2]-h[0])*(k[2]-k[0]);b=k[1]+(b[1]-h[1])/(h[3]-h[1])*(k[3]-k[1]);n[0]&&e.drawLine(l,b,k[0],b,m[0],f[0]);n[1]&&e.drawLine(l,b,l,k[1],m[1],f[1]);n[2]&&e.drawLine(l,b,k[2],b,m[2],f[2]);n[3]&&e.drawLine(l,b,l,k[3],m[3],f[3])}};a.dispose=function(){this.plot.removeOverlay(this)}},{}],320:[function(a,G,C){C=a("glslify");var q=a("gl-shader"),n=C(["precision mediump float;\n#define GLSLIFY 1\n\nattribute vec3 position, color;\nattribute float weight;\n\nuniform mat4 model, view, projection;\nuniform vec3 coordinates[3];\nuniform vec4 colors[3];\nuniform vec2 screenShape;\nuniform float lineWidth;\n\nvarying vec4 fragColor;\n\nvoid main() {\n  vec3 vertexPosition \x3d mix(coordinates[0],\n    mix(coordinates[2], coordinates[1], 0.5 * (position + 1.0)), abs(position));\n\n  vec4 clipPos \x3d projection * view * model * vec4(vertexPosition, 1.0);\n  vec2 clipOffset \x3d (projection * view * model * vec4(color, 0.0)).xy;\n  vec2 delta \x3d weight * clipOffset * screenShape;\n  vec2 lineOffset \x3d normalize(vec2(delta.y, -delta.x)) / screenShape;\n\n  gl_Position   \x3d vec4(clipPos.xy + clipPos.w * 0.5 * lineWidth * lineOffset, clipPos.z, clipPos.w);\n  fragColor     \x3d color.x * colors[0] + color.y * colors[1] + color.z * colors[2];\n}\n"]),
m=C(["precision mediump float;\n#define GLSLIFY 1\n\nvarying vec4 fragColor;\n\nvoid main() {\n  gl_FragColor \x3d fragColor;\n}"]);G.exports=function(f){return q(f,n,m,null,[{name:"position",type:"vec3"},{name:"color",type:"vec3"},{name:"weight",type:"float"}])}},{"gl-shader":312,glslify:413}],321:[function(a,G,C){function q(l,c,g,d){this.gl=l;this.buffer=c;this.vao=g;this.shader=d;this.pixelRatio=1;this.bounds=[[-1E3,-1E3,-1E3],[1E3,1E3,1E3]];this.position=[0,0,0];this.lineWidth=[2,2,2];this.colors=
[[0,0,0,1],[0,0,0,1],[0,0,0,1]];this.enabled=[!0,!0,!0];this.drawSides=[!0,!0,!0];this.axes=null}var n=a("gl-buffer"),m=a("gl-vao"),f=a("./shaders/index");G.exports=function(l,c){function g(w,x,y,A,z,F){w=[w,x,y,0,0,0,1];w[A+3]=1;w[A]=z;d.push.apply(d,w);w[6]=-1;d.push.apply(d,w);w[A]=F;d.push.apply(d,w);d.push.apply(d,w);w[6]=1;d.push.apply(d,w);w[A]=z;d.push.apply(d,w)}var d=[];g(0,0,0,0,0,1);g(0,0,0,1,0,1);g(0,0,0,2,0,1);g(1,0,0,1,-1,1);g(1,0,0,2,-1,1);g(0,1,0,0,-1,1);g(0,1,0,2,-1,1);g(0,0,1,0,
-1,1);g(0,0,1,1,-1,1);var p=n(l,d),r=m(l,[{type:l.FLOAT,buffer:p,size:3,offset:0,stride:28},{type:l.FLOAT,buffer:p,size:3,offset:12,stride:28},{type:l.FLOAT,buffer:p,size:1,offset:24,stride:28}]),t=f(l);t.attributes.position.location=0;t.attributes.color.location=1;t.attributes.weight.location=2;l=new q(l,p,r,t);l.update(c);return l};var b=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1];a=q.prototype;var k=[0,0,0],e=[0,0,0],h=[0,0];a.isTransparent=function(){return!1};a.drawTransparent=function(l){};a.draw=function(l){var c=
this.gl,g=this.vao,d=this.shader;g.bind();d.bind();var p=l.model||b,r=l.view||b;l=l.projection||b;if(this.axes)var t=this.axes.lastCubeProps.axis;for(var w=0;3>w;++w)t&&0>t[w]?(k[w]=this.bounds[0][w],e[w]=this.bounds[1][w]):(k[w]=this.bounds[1][w],e[w]=this.bounds[0][w]);h[0]=c.drawingBufferWidth;h[1]=c.drawingBufferHeight;d.uniforms.model=p;d.uniforms.view=r;d.uniforms.projection=l;d.uniforms.coordinates=[this.position,k,e];d.uniforms.colors=this.colors;d.uniforms.screenShape=h;for(w=0;3>w;++w)d.uniforms.lineWidth=
this.lineWidth[w]*this.pixelRatio,this.enabled[w]&&(g.draw(c.TRIANGLES,6,6*w),this.drawSides[w]&&g.draw(c.TRIANGLES,12,18+12*w));g.unbind()};a.update=function(l){l&&("bounds"in l&&(this.bounds=l.bounds),"position"in l&&(this.position=l.position),"lineWidth"in l&&(this.lineWidth=l.lineWidth),"colors"in l&&(this.colors=l.colors),"enabled"in l&&(this.enabled=l.enabled),"drawSides"in l&&(this.drawSides=l.drawSides))};a.dispose=function(){this.vao.dispose();this.buffer.dispose();this.shader.dispose()}},
{"./shaders/index":320,"gl-buffer":258,"gl-vao":332}],322:[function(a,G,C){var q=a("glslify");a=q(["precision highp float;\n\nprecision highp float;\n#define GLSLIFY 1\n\nvec3 getOrthogonalVector(vec3 v) {\n  // Return up-vector for only-z vector.\n  // Return ax + by + cz \x3d 0, a point that lies on the plane that has v as a normal and that isn't (0,0,0).\n  // From the above if-statement we have ||a|| \x3e 0  U  ||b|| \x3e 0.\n  // Assign z \x3d 0, x \x3d -b, y \x3d a:\n  // a*-b + b*a + c*0 \x3d -ba + ba + 0 \x3d 0\n  if (v.x*v.x \x3e v.z*v.z || v.y*v.y \x3e v.z*v.z) {\n    return normalize(vec3(-v.y, v.x, 0.0));\n  } else {\n    return normalize(vec3(0.0, v.z, -v.y));\n  }\n}\n\n// Calculate the tube vertex and normal at the given index.\n//\n// The returned vertex is for a tube ring with its center at origin, radius of length(d), pointing in the direction of d.\n//\n// Each tube segment is made up of a ring of vertices.\n// These vertices are used to make up the triangles of the tube by connecting them together in the vertex array.\n// The indexes of tube segments run from 0 to 8.\n//\nvec3 getTubePosition(vec3 d, float index, out vec3 normal) {\n  float segmentCount \x3d 8.0;\n\n  float angle \x3d 2.0 * 3.14159 * (index / segmentCount);\n\n  vec3 u \x3d getOrthogonalVector(d);\n  vec3 v \x3d normalize(cross(u, d));\n\n  vec3 x \x3d u * cos(angle) * length(d);\n  vec3 y \x3d v * sin(angle) * length(d);\n  vec3 v3 \x3d x + y;\n\n  normal \x3d normalize(v3);\n\n  return v3;\n}\n\nattribute vec4 vector;\nattribute vec4 color, position;\nattribute vec2 uv;\n\nuniform float vectorScale, tubeScale;\nuniform mat4 model, view, projection, inverseModel;\nuniform vec3 eyePosition, lightPosition;\n\nvarying vec3 f_normal, f_lightDirection, f_eyeDirection, f_data, f_position;\nvarying vec4 f_color;\nvarying vec2 f_uv;\n\nvoid main() {\n  // Scale the vector magnitude to stay constant with\n  // model \x26 view changes.\n  vec3 normal;\n  vec3 XYZ \x3d getTubePosition(mat3(model) * (tubeScale * vector.w * normalize(vector.xyz)), position.w, normal);\n  vec4 tubePosition \x3d model * vec4(position.xyz, 1.0) + vec4(XYZ, 0.0);\n\n  //Lighting geometry parameters\n  vec4 cameraCoordinate \x3d view * tubePosition;\n  cameraCoordinate.xyz /\x3d cameraCoordinate.w;\n  f_lightDirection \x3d lightPosition - cameraCoordinate.xyz;\n  f_eyeDirection   \x3d eyePosition - cameraCoordinate.xyz;\n  f_normal \x3d normalize((vec4(normal, 0.0) * inverseModel).xyz);\n\n  // vec4 m_position  \x3d model * vec4(tubePosition, 1.0);\n  vec4 t_position  \x3d view * tubePosition;\n  gl_Position      \x3d projection * t_position;\n\n  f_color          \x3d color;\n  f_data           \x3d tubePosition.xyz;\n  f_position       \x3d position.xyz;\n  f_uv             \x3d uv;\n}\n"]);
G=q(["#extension GL_OES_standard_derivatives : enable\n\nprecision highp float;\n#define GLSLIFY 1\n\nfloat beckmannDistribution(float x, float roughness) {\n  float NdotH \x3d max(x, 0.0001);\n  float cos2Alpha \x3d NdotH * NdotH;\n  float tan2Alpha \x3d (cos2Alpha - 1.0) / cos2Alpha;\n  float roughness2 \x3d roughness * roughness;\n  float denom \x3d 3.141592653589793 * roughness2 * cos2Alpha * cos2Alpha;\n  return exp(tan2Alpha / roughness2) / denom;\n}\n\nfloat cookTorranceSpecular(\n  vec3 lightDirection,\n  vec3 viewDirection,\n  vec3 surfaceNormal,\n  float roughness,\n  float fresnel) {\n\n  float VdotN \x3d max(dot(viewDirection, surfaceNormal), 0.0);\n  float LdotN \x3d max(dot(lightDirection, surfaceNormal), 0.0);\n\n  //Half angle vector\n  vec3 H \x3d normalize(lightDirection + viewDirection);\n\n  //Geometric term\n  float NdotH \x3d max(dot(surfaceNormal, H), 0.0);\n  float VdotH \x3d max(dot(viewDirection, H), 0.000001);\n  float LdotH \x3d max(dot(lightDirection, H), 0.000001);\n  float G1 \x3d (2.0 * NdotH * VdotN) / VdotH;\n  float G2 \x3d (2.0 * NdotH * LdotN) / LdotH;\n  float G \x3d min(1.0, min(G1, G2));\n  \n  //Distribution term\n  float D \x3d beckmannDistribution(NdotH, roughness);\n\n  //Fresnel term\n  float F \x3d pow(1.0 - VdotN, fresnel);\n\n  //Multiply terms and done\n  return  G * F * D / max(3.14159265 * VdotN, 0.000001);\n}\n\nbool outOfRange(float a, float b, float p) {\n  return ((p \x3e max(a, b)) || \n          (p \x3c min(a, b)));\n}\n\nbool outOfRange(vec2 a, vec2 b, vec2 p) {\n  return (outOfRange(a.x, b.x, p.x) ||\n          outOfRange(a.y, b.y, p.y));\n}\n\nbool outOfRange(vec3 a, vec3 b, vec3 p) {\n  return (outOfRange(a.x, b.x, p.x) ||\n          outOfRange(a.y, b.y, p.y) ||\n          outOfRange(a.z, b.z, p.z));\n}\n\nbool outOfRange(vec4 a, vec4 b, vec4 p) {\n  return outOfRange(a.xyz, b.xyz, p.xyz);\n}\n\nuniform vec3 clipBounds[2];\nuniform float roughness, fresnel, kambient, kdiffuse, kspecular, opacity;\nuniform sampler2D texture;\n\nvarying vec3 f_normal, f_lightDirection, f_eyeDirection, f_data, f_position;\nvarying vec4 f_color;\nvarying vec2 f_uv;\n\nvoid main() {\n  if (outOfRange(clipBounds[0], clipBounds[1], f_position)) discard;\n  vec3 N \x3d normalize(f_normal);\n  vec3 L \x3d normalize(f_lightDirection);\n  vec3 V \x3d normalize(f_eyeDirection);\n\n  if(gl_FrontFacing) {\n    N \x3d -N;\n  }\n\n  float specular \x3d min(1.0, max(0.0, cookTorranceSpecular(L, V, N, roughness, fresnel)));\n  float diffuse  \x3d min(kambient + kdiffuse * max(dot(N, L), 0.0), 1.0);\n\n  vec4 surfaceColor \x3d f_color * texture2D(texture, f_uv);\n  vec4 litColor \x3d surfaceColor.a * vec4(diffuse * surfaceColor.rgb + kspecular * vec3(1,1,1) * specular,  1.0);\n\n  gl_FragColor \x3d litColor * opacity;\n}\n"]);
var n=q(["precision highp float;\n\nprecision highp float;\n#define GLSLIFY 1\n\nvec3 getOrthogonalVector(vec3 v) {\n  // Return up-vector for only-z vector.\n  // Return ax + by + cz \x3d 0, a point that lies on the plane that has v as a normal and that isn't (0,0,0).\n  // From the above if-statement we have ||a|| \x3e 0  U  ||b|| \x3e 0.\n  // Assign z \x3d 0, x \x3d -b, y \x3d a:\n  // a*-b + b*a + c*0 \x3d -ba + ba + 0 \x3d 0\n  if (v.x*v.x \x3e v.z*v.z || v.y*v.y \x3e v.z*v.z) {\n    return normalize(vec3(-v.y, v.x, 0.0));\n  } else {\n    return normalize(vec3(0.0, v.z, -v.y));\n  }\n}\n\n// Calculate the tube vertex and normal at the given index.\n//\n// The returned vertex is for a tube ring with its center at origin, radius of length(d), pointing in the direction of d.\n//\n// Each tube segment is made up of a ring of vertices.\n// These vertices are used to make up the triangles of the tube by connecting them together in the vertex array.\n// The indexes of tube segments run from 0 to 8.\n//\nvec3 getTubePosition(vec3 d, float index, out vec3 normal) {\n  float segmentCount \x3d 8.0;\n\n  float angle \x3d 2.0 * 3.14159 * (index / segmentCount);\n\n  vec3 u \x3d getOrthogonalVector(d);\n  vec3 v \x3d normalize(cross(u, d));\n\n  vec3 x \x3d u * cos(angle) * length(d);\n  vec3 y \x3d v * sin(angle) * length(d);\n  vec3 v3 \x3d x + y;\n\n  normal \x3d normalize(v3);\n\n  return v3;\n}\n\nattribute vec4 vector;\nattribute vec4 position;\nattribute vec4 id;\n\nuniform mat4 model, view, projection;\nuniform float tubeScale;\n\nvarying vec3 f_position;\nvarying vec4 f_id;\n\nvoid main() {\n  vec3 normal;\n  vec3 XYZ \x3d getTubePosition(mat3(model) * (tubeScale * vector.w * normalize(vector.xyz)), position.w, normal);\n  vec4 tubePosition \x3d model * vec4(position.xyz, 1.0) + vec4(XYZ, 0.0);\n\n  gl_Position \x3d projection * view * tubePosition;\n  f_id        \x3d id;\n  f_position  \x3d position.xyz;\n}\n"]);
q=q(["precision highp float;\n#define GLSLIFY 1\n\nbool outOfRange(float a, float b, float p) {\n  return ((p \x3e max(a, b)) || \n          (p \x3c min(a, b)));\n}\n\nbool outOfRange(vec2 a, vec2 b, vec2 p) {\n  return (outOfRange(a.x, b.x, p.x) ||\n          outOfRange(a.y, b.y, p.y));\n}\n\nbool outOfRange(vec3 a, vec3 b, vec3 p) {\n  return (outOfRange(a.x, b.x, p.x) ||\n          outOfRange(a.y, b.y, p.y) ||\n          outOfRange(a.z, b.z, p.z));\n}\n\nbool outOfRange(vec4 a, vec4 b, vec4 p) {\n  return outOfRange(a.xyz, b.xyz, p.xyz);\n}\n\nuniform vec3  clipBounds[2];\nuniform float pickId;\n\nvarying vec3 f_position;\nvarying vec4 f_id;\n\nvoid main() {\n  if (outOfRange(clipBounds[0], clipBounds[1], f_position)) discard;\n\n  gl_FragColor \x3d vec4(pickId, f_id.xyz);\n}"]);
C.meshShader={vertex:a,fragment:G,attributes:[{name:"position",type:"vec4"},{name:"color",type:"vec4"},{name:"uv",type:"vec2"},{name:"vector",type:"vec4"}]};C.pickShader={vertex:n,fragment:q,attributes:[{name:"position",type:"vec4"},{name:"id",type:"vec4"},{name:"vector",type:"vec4"}]}},{glslify:413}],323:[function(a,G,C){var q=a("gl-vec3"),n=a("gl-vec4"),m="xyz xzy yxz yzx zxy zyx".split(" "),f=function(g,d,p,r){for(var t=0,w=0;w<g.length;w++)for(var x=g[w].velocities,y=0;y<x.length;y++)t=Math.max(t,
q.length(x[y]));g=g.map(function(N){var M=t,E=N.points,L=N.velocities;N=N.divergences;var Q=[],S=[],R=[],O=[],T=[],V=[],X=0;n.create();for(var ba=n.create(),aa=0;aa<E.length;aa++){var ka=E[aa],ha=L[aa],ca=N[aa];0===p&&(ca=.05*r);var sa=q.length(ha)/M;var ma=n.create();q.copy(ma,ha);ma[3]=ca;for(ha=0;8>ha;ha++)T[ha]=[ka[0],ka[1],ka[2],ha];if(0<O.length)for(ha=0;8>ha;ha++)ka=(ha+1)%8,Q.push(O[ha],T[ha],T[ka],T[ka],O[ka],O[ha]),R.push(ba,ma,ma,ma,ba,ba),V.push(X,sa,sa,sa,X,X),ka=Q.length,S.push([ka-
6,ka-5,ka-4],[ka-3,ka-2,ka-1]);X=O;O=T;T=X;ba=ma;X=sa}return{positions:Q,cells:S,vectors:R,vertexIntensity:V}});x=[];var A=[],z=[],F=[];for(w=0;w<g.length;w++){var D=g[w],u=x.length;x=x.concat(D.positions);z=z.concat(D.vectors);F=F.concat(D.vertexIntensity);for(y=0;y<D.cells.length;y++){var B=D.cells[y],I=[];A.push(I);for(var J=0;J<B.length;J++)I.push(B[J]+u)}}return{positions:x,cells:A,vectors:z,vertexIntensity:F,colormap:d}},b=function(g,d){var p=g.length,r;for(r=0;r<p;r++){var t=g[r];if(t===d)break;
else if(t>d)return r-1}return r},k=function(g,d,p){return g<d?d:g>p?p:g},e=function(g){var d=Infinity;g.sort(function(w,x){return w-x});for(var p=g.length,r=1;r<p;r++){var t=Math.abs(g[r]-g[r-1]);t<d&&(d=t)}return d},h=function(g){for(var d=[],p=[],r=[],t={},w={},x={},y=g.length,A=0;A<y;A++){var z=g[A],F=z[0],D=z[1];z=z[2];t[F]||(d.push(F),t[F]=!0);w[D]||(p.push(D),w[D]=!0);x[z]||(r.push(z),x[z]=!0)}g=e(d);p=e(p);r=e(r);r=Math.min(g,p,r);return isFinite(r)?r:1};G.exports=function(g,d){var p=g.startingPositions,
r=g.maxLength||1E3,t=g.tubeSize||1,w=g.absoluteTubeSize,x=g.gridFill||"+x+y+z",y,A,z;-1!==x.indexOf("-x")&&(y=!0);-1!==x.indexOf("-y")&&(A=!0);-1!==x.indexOf("-z")&&(z=!0);var F=m.indexOf(x.replace(/-/g,"").replace(/\+/g,""));var D=g.getVelocity||function(ra){var qa=g.vectors,Y=g.meshgrid;var pa=ra[0];var oa=ra[1],ua=ra[2];ra=Y[0].length;var ya=Y[1].length,ja=Y[2].length,za=b(Y[0],pa),Ba=b(Y[1],oa),Ma=b(Y[2],ua),Oa=za+1,Ia=Ba+1,Pa=Ma+1;za=k(za,0,ra-1);Oa=k(Oa,0,ra-1);Ba=k(Ba,0,ya-1);Ia=k(Ia,0,ya-
1);Ma=k(Ma,0,ja-1);Pa=k(Pa,0,ja-1);if(0>za||0>Ba||0>Ma||Oa>ra-1||Ia>ya-1||Pa>ja-1)pa=q.create();else{var Fa=Y[0][za],Na=Y[1][Ba],$a=Y[2][Ma];pa=(pa-Fa)/(Y[0][Oa]-Fa);oa=(oa-Na)/(Y[1][Ia]-Na);Y=(ua-$a)/(Y[2][Pa]-$a);isFinite(pa)||(pa=.5);isFinite(oa)||(oa=.5);isFinite(Y)||(Y=.5);y&&(za=ra-1-za,Oa=ra-1-Oa);A&&(Ba=ya-1-Ba,Ia=ya-1-Ia);z&&(Ma=ja-1-Ma,Pa=ja-1-Pa);switch(F){case 5:Ba*=ja;Ia*=ja;za=za*ja*ya;Oa=Oa*ja*ya;break;case 4:za*=ja;Oa*=ja;Ba=Ba*ja*ra;Ia=Ia*ja*ra;break;case 3:Ma*=ya;Pa*=ya;za=za*ya*
ja;Oa=Oa*ya*ja;break;case 2:za*=ya;Oa*=ya;Ma=Ma*ya*ra;Pa=Pa*ya*ra;break;case 1:Ma*=ra;Pa*=ra;Ba=Ba*ra*ja;Ia=Ia*ra*ja;break;default:Ba*=ra,Ia*=ra,Ma=Ma*ra*ya,Pa=Pa*ra*ya}ra=qa[za+Ba+Ma];ya=qa[za+Ba+Pa];ja=qa[za+Ia+Ma];za=qa[za+Ia+Pa];ua=qa[Oa+Ba+Ma];Ba=qa[Oa+Ba+Pa];Ma=qa[Oa+Ia+Ma];$a=qa[Oa+Ia+Pa];qa=q.create();Oa=q.create();Ia=q.create();Pa=q.create();q.lerp(qa,ra,ua,pa);q.lerp(Oa,ya,Ba,pa);q.lerp(Ia,ja,Ma,pa);q.lerp(Pa,za,$a,pa);pa=q.create();ra=q.create();q.lerp(pa,qa,Ia,oa);q.lerp(ra,Oa,Pa,oa);
oa=q.create();q.lerp(oa,pa,ra,Y);pa=oa}return pa};x=g.getDivergence||function(ra,qa){var Y=q.create();q.add(Y,ra,[1E-4,0,0]);var pa=D(Y);q.subtract(pa,pa,qa);q.scale(pa,pa,1E4);q.add(Y,ra,[0,1E-4,0]);var oa=D(Y);q.subtract(oa,oa,qa);q.scale(oa,oa,1E4);q.add(Y,ra,[0,0,1E-4]);ra=D(Y);q.subtract(ra,ra,qa);q.scale(ra,ra,1E4);q.add(Y,pa,oa);q.add(Y,Y,ra);return Y};var u=[],B=d[0][0],I=d[0][1],J=d[0][2],N=d[1][0],M=d[1][1],E=d[1][2],L=function(ra){var qa=ra[0],Y=ra[1];ra=ra[2];return!(qa<B||qa>N||Y<I||
Y>M||ra<J||ra>E)},Q=10*q.distance(d[0],d[1])/r,S=Q*Q;d=1;var R=0,O=p.length;1<O&&(d=h(p));for(var T=0;T<O;T++){var V=q.create();q.copy(V,p[T]);var X=[V],ba=[],aa=D(V),ka=V;ba.push(aa);var ha=[],ca=x(V,aa);ca=q.length(ca);isFinite(ca)&&ca>R&&(R=ca);ha.push(ca);u.push({points:X,velocities:ba,divergences:ha});for(var sa=0;sa<100*r&&X.length<r&&L(V);){sa++;var ma=q.clone(aa);aa=q.squaredLength(ma);if(0===aa)break;else aa>S&&q.scale(ma,ma,Q/Math.sqrt(aa));q.add(ma,ma,V);aa=D(ma);q.squaredDistance(ka,ma)-
S>-1E-4*S&&(X.push(ma),ka=ma,ba.push(aa),ca=x(ma,aa),ca=q.length(ca),isFinite(ca)&&ca>R&&(R=ca),ha.push(ca));V=ma}}p=f(u,g.colormap,R,d);w?p.tubeScale=w:(0===R&&(R=1),p.tubeScale=.5*t*d/R);return p};var l=a("./lib/shaders"),c=a("gl-cone3d").createMesh;G.exports.createTubeMesh=function(g,d){return c(g,d,{shaders:l,traceType:"streamtube"})}},{"./lib/shaders":322,"gl-cone3d":259,"gl-vec3":351,"gl-vec4":387}],324:[function(a,G,C){var q=a("gl-shader");a=a("glslify");var n=a(["precision highp float;\n#define GLSLIFY 1\n\nattribute vec4 uv;\nattribute vec3 f;\nattribute vec3 normal;\n\nuniform vec3 objectOffset;\nuniform mat4 model, view, projection, inverseModel;\nuniform vec3 lightPosition, eyePosition;\nuniform sampler2D colormap;\n\nvarying float value, kill;\nvarying vec3 worldCoordinate;\nvarying vec2 planeCoordinate;\nvarying vec3 lightDirection, eyeDirection, surfaceNormal;\nvarying vec4 vColor;\n\nvoid main() {\n  vec3 localCoordinate \x3d vec3(uv.zw, f.x);\n  worldCoordinate \x3d objectOffset + localCoordinate;\n  vec4 worldPosition \x3d model * vec4(worldCoordinate, 1.0);\n  vec4 clipPosition \x3d projection * view * worldPosition;\n  gl_Position \x3d clipPosition;\n  kill \x3d f.y;\n  value \x3d f.z;\n  planeCoordinate \x3d uv.xy;\n\n  vColor \x3d texture2D(colormap, vec2(value, value));\n\n  //Lighting geometry parameters\n  vec4 cameraCoordinate \x3d view * worldPosition;\n  cameraCoordinate.xyz /\x3d cameraCoordinate.w;\n  lightDirection \x3d lightPosition - cameraCoordinate.xyz;\n  eyeDirection   \x3d eyePosition - cameraCoordinate.xyz;\n  surfaceNormal  \x3d normalize((vec4(normal,0) * inverseModel).xyz);\n}\n"]),
m=a(["precision highp float;\n#define GLSLIFY 1\n\nfloat beckmannDistribution(float x, float roughness) {\n  float NdotH \x3d max(x, 0.0001);\n  float cos2Alpha \x3d NdotH * NdotH;\n  float tan2Alpha \x3d (cos2Alpha - 1.0) / cos2Alpha;\n  float roughness2 \x3d roughness * roughness;\n  float denom \x3d 3.141592653589793 * roughness2 * cos2Alpha * cos2Alpha;\n  return exp(tan2Alpha / roughness2) / denom;\n}\n\nfloat beckmannSpecular(\n  vec3 lightDirection,\n  vec3 viewDirection,\n  vec3 surfaceNormal,\n  float roughness) {\n  return beckmannDistribution(dot(surfaceNormal, normalize(lightDirection + viewDirection)), roughness);\n}\n\nbool outOfRange(float a, float b, float p) {\n  return ((p \x3e max(a, b)) || \n          (p \x3c min(a, b)));\n}\n\nbool outOfRange(vec2 a, vec2 b, vec2 p) {\n  return (outOfRange(a.x, b.x, p.x) ||\n          outOfRange(a.y, b.y, p.y));\n}\n\nbool outOfRange(vec3 a, vec3 b, vec3 p) {\n  return (outOfRange(a.x, b.x, p.x) ||\n          outOfRange(a.y, b.y, p.y) ||\n          outOfRange(a.z, b.z, p.z));\n}\n\nbool outOfRange(vec4 a, vec4 b, vec4 p) {\n  return outOfRange(a.xyz, b.xyz, p.xyz);\n}\n\nuniform vec3 lowerBound, upperBound;\nuniform float contourTint;\nuniform vec4 contourColor;\nuniform sampler2D colormap;\nuniform vec3 clipBounds[2];\nuniform float roughness, fresnel, kambient, kdiffuse, kspecular, opacity;\nuniform float vertexColor;\n\nvarying float value, kill;\nvarying vec3 worldCoordinate;\nvarying vec3 lightDirection, eyeDirection, surfaceNormal;\nvarying vec4 vColor;\n\nvoid main() {\n  if (\n    kill \x3e 0.0 ||\n    vColor.a \x3d\x3d 0.0 ||\n    outOfRange(clipBounds[0], clipBounds[1], worldCoordinate)\n  ) discard;\n\n  vec3 N \x3d normalize(surfaceNormal);\n  vec3 V \x3d normalize(eyeDirection);\n  vec3 L \x3d normalize(lightDirection);\n\n  if(gl_FrontFacing) {\n    N \x3d -N;\n  }\n\n  float specular \x3d max(beckmannSpecular(L, V, N, roughness), 0.);\n  float diffuse  \x3d min(kambient + kdiffuse * max(dot(N, L), 0.0), 1.0);\n\n  //decide how to interpolate color — in vertex or in fragment\n  vec4 surfaceColor \x3d\n    step(vertexColor, .5) * texture2D(colormap, vec2(value, value)) +\n    step(.5, vertexColor) * vColor;\n\n  vec4 litColor \x3d surfaceColor.a * vec4(diffuse * surfaceColor.rgb + kspecular * vec3(1,1,1) * specular,  1.0);\n\n  gl_FragColor \x3d mix(litColor, contourColor, contourTint) * opacity;\n}\n"]),
f=a(["precision highp float;\n#define GLSLIFY 1\n\nattribute vec4 uv;\nattribute float f;\n\nuniform vec3 objectOffset;\nuniform mat3 permutation;\nuniform mat4 model, view, projection;\nuniform float height, zOffset;\nuniform sampler2D colormap;\n\nvarying float value, kill;\nvarying vec3 worldCoordinate;\nvarying vec2 planeCoordinate;\nvarying vec3 lightDirection, eyeDirection, surfaceNormal;\nvarying vec4 vColor;\n\nvoid main() {\n  vec3 dataCoordinate \x3d permutation * vec3(uv.xy, height);\n  worldCoordinate \x3d objectOffset + dataCoordinate;\n  vec4 worldPosition \x3d model * vec4(worldCoordinate, 1.0);\n\n  vec4 clipPosition \x3d projection * view * worldPosition;\n  clipPosition.z +\x3d zOffset;\n\n  gl_Position \x3d clipPosition;\n  value \x3d f + objectOffset.z;\n  kill \x3d -1.0;\n  planeCoordinate \x3d uv.zw;\n\n  vColor \x3d texture2D(colormap, vec2(value, value));\n\n  //Don't do lighting for contours\n  surfaceNormal   \x3d vec3(1,0,0);\n  eyeDirection    \x3d vec3(0,1,0);\n  lightDirection  \x3d vec3(0,0,1);\n}\n"]),
b=a(["precision highp float;\n#define GLSLIFY 1\n\nbool outOfRange(float a, float b, float p) {\n  return ((p \x3e max(a, b)) || \n          (p \x3c min(a, b)));\n}\n\nbool outOfRange(vec2 a, vec2 b, vec2 p) {\n  return (outOfRange(a.x, b.x, p.x) ||\n          outOfRange(a.y, b.y, p.y));\n}\n\nbool outOfRange(vec3 a, vec3 b, vec3 p) {\n  return (outOfRange(a.x, b.x, p.x) ||\n          outOfRange(a.y, b.y, p.y) ||\n          outOfRange(a.z, b.z, p.z));\n}\n\nbool outOfRange(vec4 a, vec4 b, vec4 p) {\n  return outOfRange(a.xyz, b.xyz, p.xyz);\n}\n\nuniform vec2 shape;\nuniform vec3 clipBounds[2];\nuniform float pickId;\n\nvarying float value, kill;\nvarying vec3 worldCoordinate;\nvarying vec2 planeCoordinate;\nvarying vec3 surfaceNormal;\n\nvec2 splitFloat(float v) {\n  float vh \x3d 255.0 * v;\n  float upper \x3d floor(vh);\n  float lower \x3d fract(vh);\n  return vec2(upper / 255.0, floor(lower * 16.0) / 16.0);\n}\n\nvoid main() {\n  if ((kill \x3e 0.0) ||\n      (outOfRange(clipBounds[0], clipBounds[1], worldCoordinate))) discard;\n\n  vec2 ux \x3d splitFloat(planeCoordinate.x / shape.x);\n  vec2 uy \x3d splitFloat(planeCoordinate.y / shape.y);\n  gl_FragColor \x3d vec4(pickId, ux.x, uy.x, ux.y + (uy.y/16.0));\n}\n"]);
C.createShader=function(k){k=q(k,n,m,null,[{name:"uv",type:"vec4"},{name:"f",type:"vec3"},{name:"normal",type:"vec3"}]);k.attributes.uv.location=0;k.attributes.f.location=1;k.attributes.normal.location=2;return k};C.createPickShader=function(k){k=q(k,n,b,null,[{name:"uv",type:"vec4"},{name:"f",type:"vec3"},{name:"normal",type:"vec3"}]);k.attributes.uv.location=0;k.attributes.f.location=1;k.attributes.normal.location=2;return k};C.createContourShader=function(k){k=q(k,f,m,null,[{name:"uv",type:"vec4"},
{name:"f",type:"float"}]);k.attributes.uv.location=0;k.attributes.f.location=1;return k};C.createPickContourShader=function(k){k=q(k,f,b,null,[{name:"uv",type:"vec4"},{name:"f",type:"float"}]);k.attributes.uv.location=0;k.attributes.f.location=1;return k}},{"gl-shader":312,glslify:413}],325:[function(a,G,C){function q(ba,aa,ka,ha,ca){this.position=ba;this.index=aa;this.uv=ka;this.level=ha;this.dataCoordinate=ca}function n(ba,aa,ka,ha,ca,sa,ma,ra,qa,Y,pa,oa,ua,ya,ja){this.gl=ba;this.shape=aa;this.bounds=
ka;this.objectOffset=ja;this.intensityBounds=[];this._shader=ha;this._pickShader=ca;this._coordinateBuffer=sa;this._vao=ma;this._colorMap=ra;this._contourShader=qa;this._contourPickShader=Y;this._contourBuffer=pa;this._contourVAO=oa;this._contourOffsets=[[],[],[]];this._contourCounts=[[],[],[]];this._vertexCount=0;this._pickResult=new q([0,0,0],[0,0],[0,0],[0,0,0],[0,0,0]);this._dynamicBuffer=ua;this._dynamicVAO=ya;this._dynamicOffsets=[0,0,0];this._dynamicCounts=[0,0,0];this.contourWidth=[1,1,1];
this.contourLevels=[[1],[1],[1]];this.contourTint=[0,0,0];this.contourColor=[[.5,.5,.5,1],[.5,.5,.5,1],[.5,.5,.5,1]];this.showSurface=this.showContour=!0;this.enableHighlight=[!0,!0,!0];this.highlightColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1]];this.highlightTint=[1,1,1];this.highlightLevel=[-1,-1,-1];this.enableDynamic=[!0,!0,!0];this.dynamicLevel=[NaN,NaN,NaN];this.dynamicColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1]];this.dynamicTint=[1,1,1];this.dynamicWidth=[1,1,1];this.axesBounds=[[Infinity,Infinity,Infinity],
[-Infinity,-Infinity,-Infinity]];this.surfaceProject=[!1,!1,!1];this.contourProject=[[!1,!1,!1],[!1,!1,!1],[!1,!1,!1]];this.colorBounds=[!1,!1];this._field=[x(p.mallocFloat(1024),[0,0]),x(p.mallocFloat(1024),[0,0]),x(p.mallocFloat(1024),[0,0])];this.pickId=1;this.clipBounds=[[-Infinity,-Infinity,-Infinity],[Infinity,Infinity,Infinity]];this.snapToData=!1;this.opacity=this.pixelRatio=1;this.lightPosition=[10,1E4,0];this.diffuseLight=this.ambientLight=.8;this.specularLight=2;this.roughness=.5;this.fresnel=
1.5;this.vertexColor=0;this.dirty=!0}function m(ba,aa){if(!aa||!aa.length)return 1;for(var ka=0;ka<aa.length&&!(2>aa.length);++ka){if(aa[ka][0]===ba)return aa[ka][1];if(aa[ka][0]>ba&&0<ka)return ba=(aa[ka][0]-ba)/(aa[ka][0]-aa[ka-1][0]),aa[ka][1]*(1-ba)+ba*aa[ka-1][1]}return 1}function f(ba,aa){var ka,ha,ca=aa.axes&&aa.axes.lastCubeProps.axis||S,sa=aa.showSurface,ma=aa.showContour;for(ka=0;3>ka;++ka)for(sa=sa||aa.surfaceProject[ka],ha=0;3>ha;++ha)ma=ma||aa.contourProject[ka][ha];for(ka=0;3>ka;++ka){var ra=
R.projections[ka];for(ha=0;16>ha;++ha)ra[ha]=0;for(ha=0;4>ha;++ha)ra[5*ha]=1;ra[5*ka]=0;ra[12+ka]=aa.axesBounds[+(0<ca[ka])][ka];A(ra,ba.model,ra);var qa=R.clipBounds[ka];for(ra=0;2>ra;++ra)for(ha=0;3>ha;++ha)qa[ra][ha]=ba.clipBounds[ra][ha];qa[0][ka]=-1E8;qa[1][ka]=1E8}R.showSurface=sa;R.showContour=ma;return R}function b(ba,aa){ba=ba||{};aa=this.gl;aa.disable(aa.CULL_FACE);this._colorMap.bind(0);var ka=O;ka.model=ba.model||M;ka.view=ba.view||M;ka.projection=ba.projection||M;ka.lowerBound=[this.bounds[0][0],
this.bounds[0][1],this.colorBounds[0]||this.bounds[0][2]];ka.upperBound=[this.bounds[1][0],this.bounds[1][1],this.colorBounds[1]||this.bounds[1][2]];ka.objectOffset=this.objectOffset;ka.contourColor=this.contourColor[0];ka.inverseModel=z(ka.inverseModel,ka.model);for(ba=0;2>ba;++ba)for(var ha=ka.clipBounds[ba],ca=0;3>ca;++ca)ha[ca]=Math.min(Math.max(this.clipBounds[ba][ca],-1E8),1E8);ka.kambient=this.ambientLight;ka.kdiffuse=this.diffuseLight;ka.kspecular=this.specularLight;ka.roughness=this.roughness;
ka.fresnel=this.fresnel;ka.opacity=this.opacity;ka.height=0;ka.permutation=V;ka.vertexColor=this.vertexColor;ha=T;A(ha,ka.view,ka.model);A(ha,ka.projection,ha);z(ha,ha);for(ba=0;3>ba;++ba)ka.eyePosition[ba]=ha[12+ba]/ha[15];var sa=ha[15];for(ba=0;3>ba;++ba)sa+=this.lightPosition[ba]*ha[4*ba+3];for(ba=0;3>ba;++ba){var ma=ha[12+ba];for(ca=0;3>ca;++ca)ma+=ha[4*ca+ba]*this.lightPosition[ca];ka.lightPosition[ba]=ma/sa}ha=f(ka,this);if(ha.showSurface){this._shader.bind();this._shader.uniforms=ka;this._vao.bind();
this.showSurface&&this._vertexCount&&this._vao.draw(aa.TRIANGLES,this._vertexCount);for(ba=0;3>ba;++ba)this.surfaceProject[ba]&&this.vertexCount&&(this._shader.uniforms.model=ha.projections[ba],this._shader.uniforms.clipBounds=ha.clipBounds[ba],this._vao.draw(aa.TRIANGLES,this._vertexCount));this._vao.unbind()}if(ha.showContour){sa=this._contourShader;ka.kambient=1;ka.kdiffuse=0;ka.kspecular=0;ka.opacity=1;sa.bind();sa.uniforms=ka;ma=this._contourVAO;ma.bind();for(ba=0;3>ba;++ba)for(sa.uniforms.permutation=
L[ba],aa.lineWidth(this.contourWidth[ba]*this.pixelRatio),ca=0;ca<this.contourLevels[ba].length;++ca){if(ca===this.highlightLevel[ba])sa.uniforms.contourColor=this.highlightColor[ba],sa.uniforms.contourTint=this.highlightTint[ba];else if(0===ca||ca-1===this.highlightLevel[ba])sa.uniforms.contourColor=this.contourColor[ba],sa.uniforms.contourTint=this.contourTint[ba];this._contourCounts[ba][ca]&&(sa.uniforms.height=this.contourLevels[ba][ca],ma.draw(aa.LINES,this._contourCounts[ba][ca],this._contourOffsets[ba][ca]))}for(ba=
0;3>ba;++ba)for(sa.uniforms.model=ha.projections[ba],sa.uniforms.clipBounds=ha.clipBounds[ba],ca=0;3>ca;++ca)if(this.contourProject[ba][ca]){sa.uniforms.permutation=L[ca];aa.lineWidth(this.contourWidth[ca]*this.pixelRatio);for(var ra=0;ra<this.contourLevels[ca].length;++ra){if(ra===this.highlightLevel[ca])sa.uniforms.contourColor=this.highlightColor[ca],sa.uniforms.contourTint=this.highlightTint[ca];else if(0===ra||ra-1===this.highlightLevel[ca])sa.uniforms.contourColor=this.contourColor[ca],sa.uniforms.contourTint=
this.contourTint[ca];this._contourCounts[ca][ra]&&(sa.uniforms.height=this.contourLevels[ca][ra],ma.draw(aa.LINES,this._contourCounts[ca][ra],this._contourOffsets[ca][ra]))}}ma.unbind();ma=this._dynamicVAO;ma.bind();for(ba=0;3>ba;++ba)if(0!==this._dynamicCounts[ba])for(sa.uniforms.model=ka.model,sa.uniforms.clipBounds=ka.clipBounds,sa.uniforms.permutation=L[ba],aa.lineWidth(this.dynamicWidth[ba]*this.pixelRatio),sa.uniforms.contourColor=this.dynamicColor[ba],sa.uniforms.contourTint=this.dynamicTint[ba],
sa.uniforms.height=this.dynamicLevel[ba],ma.draw(aa.LINES,this._dynamicCounts[ba],this._dynamicOffsets[ba]),ca=0;3>ca;++ca)this.contourProject[ca][ba]&&(sa.uniforms.model=ha.projections[ca],sa.uniforms.clipBounds=ha.clipBounds[ca],ma.draw(aa.LINES,this._dynamicCounts[ba],this._dynamicOffsets[ba]));ma.unbind()}}function k(ba,aa){return Array.isArray(ba)?[aa(ba[0]),aa(ba[1]),aa(ba[2])]:[aa(ba),aa(ba),aa(ba)]}function e(ba){return Array.isArray(ba)?3===ba.length?[ba[0],ba[1],ba[2],1]:[ba[0],ba[1],ba[2],
ba[3]]:[0,0,0,1]}function h(ba){if(Array.isArray(ba)){if(Array.isArray(ba))return[e(ba[0]),e(ba[1]),e(ba[2])];ba=e(ba);return[ba.slice(),ba.slice(),ba.slice()]}}G.exports=function(ba){var aa=ba.gl,ka=u(aa),ha=I(aa),ca=B(aa),sa=J(aa),ma=c(aa),ra=g(aa,[{buffer:ma,size:4,stride:N,offset:0},{buffer:ma,size:3,stride:N,offset:16},{buffer:ma,size:3,stride:N,offset:28}]),qa=c(aa),Y=g(aa,[{buffer:qa,size:4,stride:20,offset:0},{buffer:qa,size:1,stride:20,offset:16}]),pa=c(aa),oa=g(aa,[{buffer:pa,size:2,type:aa.FLOAT}]),
ua=d(aa,1,Q,aa.RGBA,aa.UNSIGNED_BYTE);ua.minFilter=aa.LINEAR;ua.magFilter=aa.LINEAR;aa=new n(aa,[0,0],[[0,0,0],[0,0,0]],ka,ha,ma,ra,ua,ca,sa,qa,Y,pa,oa,[0,0,0]);ka={levels:[[],[],[]]};for(var ya in ba)ka[ya]=ba[ya];ka.colormap=ka.colormap||"jet";aa.update(ka);return aa};var l=a("bit-twiddle"),c=a("gl-buffer"),g=a("gl-vao"),d=a("gl-texture2d"),p=a("typedarray-pool"),r=a("colormap"),t=a("ndarray-ops"),w=a("ndarray-pack"),x=a("ndarray"),y=a("surface-nets"),A=a("gl-mat4/multiply"),z=a("gl-mat4/invert"),
F=a("binary-search-bounds"),D=a("ndarray-gradient");a=a("./lib/shaders");var u=a.createShader,B=a.createContourShader,I=a.createPickShader,J=a.createPickContourShader,N=40,M=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],E=[[0,0],[0,1],[1,0],[1,1],[1,0],[0,1]],L=[[0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0]];(function(){for(var ba=0;3>ba;++ba){var aa=L[ba],ka=(ba+2)%3;aa[(ba+1)%3]=1;aa[ka+3]=1;aa[ba+6]=1}})();var Q=256;a=n.prototype;a.genColormap=function(ba,aa){var ka=!1;ba=w([r({colormap:ba,nshades:Q,
format:"rgba"}).map(function(ha,ca){ca=aa?m(ca/255,aa):ha[3];1>ca&&(ka=!0);return[ha[0],ha[1],ha[2],255*ca]})]);t.divseq(ba,255);this.hasAlphaScale=ka;return ba};a.isTransparent=function(){return 1>this.opacity||this.hasAlphaScale};a.isOpaque=function(){return!this.isTransparent()};a.pickSlots=1;a.setPickBase=function(ba){this.pickId=ba};var S=[0,0,0],R={showSurface:!1,showContour:!1,projections:[M.slice(),M.slice(),M.slice()],clipBounds:[[[0,0,0],[0,0,0]],[[0,0,0],[0,0,0]],[[0,0,0],[0,0,0]]]},O=
{model:M,view:M,projection:M,inverseModel:M.slice(),lowerBound:[0,0,0],upperBound:[0,0,0],colorMap:0,clipBounds:[[0,0,0],[0,0,0]],height:0,contourTint:0,contourColor:[0,0,0,1],permutation:[1,0,0,0,1,0,0,0,1],zOffset:-1E-4,objectOffset:[0,0,0],kambient:1,kdiffuse:1,kspecular:1,lightPosition:[1E3,1E3,1E3],eyePosition:[0,0,0],roughness:1,fresnel:1,opacity:1,vertexColor:0},T=M.slice(),V=[1,0,0,0,1,0,0,0,1];a.draw=function(ba){return b.call(this,ba,!1)};a.drawTransparent=function(ba){return b.call(this,
ba,!0)};var X={model:M,view:M,projection:M,inverseModel:M,clipBounds:[[0,0,0],[0,0,0]],height:0,shape:[0,0],pickId:0,lowerBound:[0,0,0],upperBound:[0,0,0],zOffset:0,objectOffset:[0,0,0],permutation:[1,0,0,0,1,0,0,0,1],lightPosition:[0,0,0],eyePosition:[0,0,0]};a.drawPick=function(ba){ba=ba||{};var aa=this.gl;aa.disable(aa.CULL_FACE);X.model=ba.model||M;X.view=ba.view||M;X.projection=ba.projection||M;X.shape=this._field[2].shape;X.pickId=this.pickId/255;X.lowerBound=this.bounds[0];X.upperBound=this.bounds[1];
X.objectOffset=this.objectOffset;X.permutation=V;for(ba=0;2>ba;++ba)for(var ka=X.clipBounds[ba],ha=0;3>ha;++ha)ka[ha]=Math.min(Math.max(this.clipBounds[ba][ha],-1E8),1E8);ka=f(X,this);if(ka.showSurface){this._pickShader.bind();this._pickShader.uniforms=X;this._vao.bind();this._vao.draw(aa.TRIANGLES,this._vertexCount);for(ba=0;3>ba;++ba)this.surfaceProject[ba]&&(this._pickShader.uniforms.model=ka.projections[ba],this._pickShader.uniforms.clipBounds=ka.clipBounds[ba],this._vao.draw(aa.TRIANGLES,this._vertexCount));
this._vao.unbind()}if(ka.showContour){var ca=this._contourPickShader;ca.bind();ca.uniforms=X;var sa=this._contourVAO;sa.bind();for(ha=0;3>ha;++ha)for(aa.lineWidth(this.contourWidth[ha]*this.pixelRatio),ca.uniforms.permutation=L[ha],ba=0;ba<this.contourLevels[ha].length;++ba)this._contourCounts[ha][ba]&&(ca.uniforms.height=this.contourLevels[ha][ba],sa.draw(aa.LINES,this._contourCounts[ha][ba],this._contourOffsets[ha][ba]));for(ba=0;3>ba;++ba)for(ca.uniforms.model=ka.projections[ba],ca.uniforms.clipBounds=
ka.clipBounds[ba],ha=0;3>ha;++ha)if(this.contourProject[ba][ha]){ca.uniforms.permutation=L[ha];aa.lineWidth(this.contourWidth[ha]*this.pixelRatio);for(var ma=0;ma<this.contourLevels[ha].length;++ma)this._contourCounts[ha][ma]&&(ca.uniforms.height=this.contourLevels[ha][ma],sa.draw(aa.LINES,this._contourCounts[ha][ma],this._contourOffsets[ha][ma]))}sa.unbind()}};a.pick=function(ba){if(!ba||ba.id!==this.pickId)return null;var aa=this._field[2].shape,ka=this._pickResult,ha=aa[0]*(ba.value[0]+(ba.value[2]>>
4)/16)/255,ca=Math.floor(ha),sa=ha-ca;ba=aa[1]*(ba.value[1]+(ba.value[2]&15)/16)/255;var ma=Math.floor(ba),ra=ba-ma;ca+=1;ma+=1;for(var qa=ka.position,Y=qa[0]=qa[1]=qa[2]=0;2>Y;++Y)for(var pa=Y?sa:1-sa,oa=0;2>oa;++oa)for(var ua=ca+Y,ya=ma+oa,ja=pa*(oa?ra:1-ra),za=0;3>za;++za)qa[za]+=this._field[za].get(ua,ya)*ja;Y=this._pickResult.level;for(pa=0;3>pa;++pa)Y[pa]=F.le(this.contourLevels[pa],qa[pa]),0>Y[pa]?0<this.contourLevels[pa].length&&(Y[pa]=0):Y[pa]<this.contourLevels[pa].length-1&&Math.abs(this.contourLevels[pa][Y[pa]]-
qa[pa])>Math.abs(this.contourLevels[pa][Y[pa]+1]-qa[pa])&&(Y[pa]+=1);ka.index[0]=.5>sa?ca:ca+1;ka.index[1]=.5>ra?ma:ma+1;ka.uv[0]=ha/aa[0];ka.uv[1]=ba/aa[1];for(za=0;3>za;++za)ka.dataCoordinate[za]=this._field[za].get(ka.index[0],ka.index[1]);return ka};a.padField=function(ba,aa){var ka=aa.shape.slice(),ha=ba.shape.slice();t.assign(ba.lo(1,1).hi(ka[0],ka[1]),aa);t.assign(ba.lo(1).hi(ka[0],1),aa.hi(ka[0],1));t.assign(ba.lo(1,ha[1]-1).hi(ka[0],1),aa.lo(0,ka[1]-1).hi(ka[0],1));t.assign(ba.lo(0,1).hi(1,
ka[1]),aa.hi(1));t.assign(ba.lo(ha[0]-1,1).hi(1,ka[1]),aa.lo(ka[0]-1));ba.set(0,0,aa.get(0,0));ba.set(0,ha[1]-1,aa.get(0,ka[1]-1));ba.set(ha[0]-1,0,aa.get(ka[0]-1,0));ba.set(ha[0]-1,ha[1]-1,aa.get(ka[0]-1,ka[1]-1))};a.update=function(ba){ba=ba||{};this.objectOffset=ba.objectOffset||this.objectOffset;this.dirty=!0;"contourWidth"in ba&&(this.contourWidth=k(ba.contourWidth,Number));"showContour"in ba&&(this.showContour=k(ba.showContour,Boolean));"showSurface"in ba&&(this.showSurface=!!ba.showSurface);
"contourTint"in ba&&(this.contourTint=k(ba.contourTint,Boolean));"contourColor"in ba&&(this.contourColor=h(ba.contourColor));"contourProject"in ba&&(this.contourProject=k(ba.contourProject,function(Ea){return k(Ea,Boolean)}));"surfaceProject"in ba&&(this.surfaceProject=ba.surfaceProject);"dynamicColor"in ba&&(this.dynamicColor=h(ba.dynamicColor));"dynamicTint"in ba&&(this.dynamicTint=k(ba.dynamicTint,Number));"dynamicWidth"in ba&&(this.dynamicWidth=k(ba.dynamicWidth,Number));"opacity"in ba&&(this.opacity=
ba.opacity);"opacityscale"in ba&&(this.opacityscale=ba.opacityscale);"colorBounds"in ba&&(this.colorBounds=ba.colorBounds);"vertexColor"in ba&&(this.vertexColor=ba.vertexColor?1:0);"colormap"in ba&&this._colorMap.setPixels(this.genColormap(ba.colormap,this.opacityscale));var aa=ba.field||ba.coords&&ba.coords[2]||null,ka=!1;aa||(aa=this._field[2].shape[0]||this._field[2].shape[2]?this._field[2].lo(1,1).hi(this._field[2].shape[0]-2,this._field[2].shape[1]-2):this._field[2].hi(0,0));if("field"in ba||
"coords"in ba){var ha=(aa.shape[0]+2)*(aa.shape[1]+2);ha>this._field[2].data.length&&(p.freeFloat(this._field[2].data),this._field[2].data=p.mallocFloat(l.nextPow2(ha)));this._field[2]=x(this._field[2].data,[aa.shape[0]+2,aa.shape[1]+2]);this.padField(this._field[2],aa);ha=this.shape=aa.shape.slice();for(aa=0;2>aa;++aa)this._field[2].size>this._field[aa].data.length&&(p.freeFloat(this._field[aa].data),this._field[aa].data=p.mallocFloat(this._field[2].size)),this._field[aa]=x(this._field[aa].data,
[ha[0]+2,ha[1]+2]);if(ba.coords){var ca=ba.coords;if(!Array.isArray(ca)||3!==ca.length)throw Error("gl-surface: invalid coordinates for x/y");for(aa=0;2>aa;++aa){var sa=ca[aa];for(ma=0;2>ma;++ma)if(sa.shape[ma]!==ha[ma])throw Error("gl-surface: coords have incorrect shape");this.padField(this._field[aa],sa)}}else if(ba.ticks){ma=ba.ticks;if(!Array.isArray(ma)||2!==ma.length)throw Error("gl-surface: invalid ticks");for(aa=0;2>aa;++aa){ca=ma[aa];if(Array.isArray(ca)||ca.length)ca=x(ca);if(ca.shape[0]!==
ha[aa])throw Error("gl-surface: invalid tick length");sa=x(ca.data,ha);sa.stride[aa]=ca.stride[0];sa.stride[aa^1]=0;this.padField(this._field[aa],sa)}}else{for(aa=0;2>aa;++aa)ma=[0,0],ma[aa]=1,this._field[aa]=x(this._field[aa].data,[ha[0]+2,ha[1]+2],ma,0);this._field[0].set(0,0,0);for(var ma=0;ma<ha[0];++ma)this._field[0].set(ma+1,0,ma);this._field[0].set(ha[0]+1,0,ha[0]-1);this._field[1].set(0,0,0);for(ma=0;ma<ha[1];++ma)this._field[1].set(0,ma+1,ma);this._field[1].set(0,ha[1]+1,ha[1]-1)}ma=this._field;
ca=x(p.mallocFloat(6*ma[2].size),[3,ha[0]+2,ha[1]+2,2]);for(aa=0;3>aa;++aa)D(ca.pick(aa),ma[aa],"mirror");var ra=x(p.mallocFloat(3*ma[2].size),[ha[0]+2,ha[1]+2,3]);for(aa=0;aa<ha[0]+2;++aa)for(ma=0;ma<ha[1]+2;++ma){sa=ca.get(0,aa,ma,0);var qa=ca.get(0,aa,ma,1),Y=ca.get(1,aa,ma,0),pa=ca.get(1,aa,ma,1),oa=ca.get(2,aa,ma,0),ua=ca.get(2,aa,ma,1),ya=Y*ua-pa*oa;oa=oa*qa-ua*sa;ua=sa*pa-qa*Y;sa=Math.sqrt(ya*ya+oa*oa+ua*ua);1E-8>sa?(sa=Math.max(Math.abs(ya),Math.abs(oa),Math.abs(ua)),1E-8>sa?(ua=1,oa=ya=0,
sa=1):sa=1/sa):sa=1/Math.sqrt(sa);ra.set(aa,ma,0,ya*sa);ra.set(aa,ma,1,oa*sa);ra.set(aa,ma,2,ua*sa)}p.free(ca.data);var ja=[Infinity,Infinity,Infinity],za=[-Infinity,-Infinity,-Infinity],Ba=Infinity,Ma=-Infinity,Oa=p.mallocFloat(l.nextPow2((ha[0]-1)*(ha[1]-1)*60)),Ia=0;for(aa=ca=0;aa<ha[0]-1;++aa)a:for(ma=0;ma<ha[1]-1;++ma){for(ya=0;2>ya;++ya)for(oa=0;2>oa;++oa)for(sa=0;3>sa;++sa)if(qa=this._field[sa].get(1+aa+ya,1+ma+oa),isNaN(qa)||!isFinite(qa))continue a;for(sa=0;6>sa;++sa){Y=aa+E[sa][0];pa=ma+
E[sa][1];var Pa=this._field[0].get(Y+1,pa+1),Fa=this._field[1].get(Y+1,pa+1);qa=this._field[2].get(Y+1,pa+1);ya=ra.get(Y+1,pa+1,0);oa=ra.get(Y+1,pa+1,1);ua=ra.get(Y+1,pa+1,2);ba.intensity&&(Na=ba.intensity.get(Y,pa));var Na=ba.intensity?ba.intensity.get(Y,pa):qa+this.objectOffset[2];Oa[Ia++]=Y;Oa[Ia++]=pa;Oa[Ia++]=Pa;Oa[Ia++]=Fa;Oa[Ia++]=qa;Oa[Ia++]=0;Oa[Ia++]=Na;Oa[Ia++]=ya;Oa[Ia++]=oa;Oa[Ia++]=ua;ja[0]=Math.min(ja[0],Pa+this.objectOffset[0]);ja[1]=Math.min(ja[1],Fa+this.objectOffset[1]);ja[2]=Math.min(ja[2],
qa+this.objectOffset[2]);Ba=Math.min(Ba,Na);za[0]=Math.max(za[0],Pa+this.objectOffset[0]);za[1]=Math.max(za[1],Fa+this.objectOffset[1]);za[2]=Math.max(za[2],qa+this.objectOffset[2]);Ma=Math.max(Ma,Na);ca+=1}}ba.intensityBounds&&(Ba=+ba.intensityBounds[0],Ma=+ba.intensityBounds[1]);for(aa=6;aa<Ia;aa+=10)Oa[aa]=(Oa[aa]-Ba)/(Ma-Ba);this._vertexCount=ca;this._coordinateBuffer.update(Oa.subarray(0,Ia));p.freeFloat(Oa);p.free(ra.data);this.bounds=[ja,za];this.intensity=ba.intensity||this._field[2];if(this.intensityBounds[0]!==
Ba||this.intensityBounds[1]!==Ma)ka=!0;this.intensityBounds=[Ba,Ma]}if("levels"in ba){ha=ba.levels;ha=Array.isArray(ha[0])?ha.slice():[[],[],ha];for(aa=0;3>aa;++aa)ha[aa]=ha[aa].slice(),ha[aa].sort(function(Ea,Ya){return Ea-Ya});for(aa=0;3>aa;++aa)for(ma=0;ma<ha[aa].length;++ma)ha[aa][ma]-=this.objectOffset[aa];aa=0;a:for(;3>aa;++aa){if(ha[aa].length!==this.contourLevels[aa].length){ka=!0;break}for(ma=0;ma<ha[aa].length;++ma)if(ha[aa][ma]!==this.contourLevels[aa][ma]){ka=!0;break a}}this.contourLevels=
ha}if(ka){ma=this._field;ha=this.shape;ka=[];for(ba=0;3>ba;++ba){ra=this.contourLevels[ba];ua=[];ja=[];za=[0,0,0];for(aa=0;aa<ra.length;++aa){Ba=y(this._field[ba],ra[aa]);ua.push(ka.length/5|0);ma=ca=0;a:for(;ma<Ba.cells.length;++ma)for(Ma=Ba.cells[ma],sa=0;2>sa;++sa){Oa=Ba.positions[Ma[sa]];qa=Oa[0];Ia=Math.floor(qa)|0;Pa=qa-Ia;qa=Oa[1];Fa=Math.floor(qa)|0;Na=qa-Fa;var $a=!1,cb=0;b:for(;3>cb;++cb){za[cb]=0;var mb=(ba+cb+1)%3;for(ya=0;2>ya;++ya){var Ka=ya?Pa:1-Pa;Y=Math.min(Math.max(Ia+ya,0),ha[0])|
0;for(oa=0;2>oa;++oa){var Ua=oa?Na:1-Na;pa=Math.min(Math.max(Fa+oa,0),ha[1])|0;qa=2>cb?this._field[mb].get(Y,pa):(this.intensity.get(Y,pa)-this.intensityBounds[0])/(this.intensityBounds[1]-this.intensityBounds[0]);if(!isFinite(qa)||isNaN(qa)){$a=!0;break b}za[cb]+=Ka*Ua*qa}}}if($a){if(0<sa){for(sa=0;5>sa;++sa)ka.pop();--ca}continue a}else ka.push(za[0],za[1],Oa[0],Oa[1],za[2]),ca+=1}ja.push(ca)}this._contourOffsets[ba]=ua;this._contourCounts[ba]=ja}ha=p.mallocFloat(ka.length);for(aa=0;aa<ka.length;++aa)ha[aa]=
ka[aa];this._contourBuffer.update(ha);p.freeFloat(ha)}};a.dispose=function(){this._shader.dispose();this._vao.dispose();this._coordinateBuffer.dispose();this._colorMap.dispose();this._contourBuffer.dispose();this._contourVAO.dispose();this._contourShader.dispose();this._contourPickShader.dispose();this._dynamicBuffer.dispose();this._dynamicVAO.dispose();for(var ba=0;3>ba;++ba)p.freeFloat(this._field[ba].data)};a.highlight=function(ba){var aa;if(ba){for(aa=0;3>aa;++aa)this.highlightLevel[aa]=this.enableHighlight[aa]?
ba.level[aa]:-1;ba=this.snapToData?ba.dataCoordinate:ba.position;for(aa=0;3>aa;++aa)ba[aa]-=this.objectOffset[aa];if(this.enableDynamic[0]&&ba[0]!==this.dynamicLevel[0]||this.enableDynamic[1]&&ba[1]!==this.dynamicLevel[1]||this.enableDynamic[2]&&ba[2]!==this.dynamicLevel[2]){for(var ka=0,ha=this.shape,ca=p.mallocFloat(12*ha[0]*ha[1]),sa=0;3>sa;++sa)if(this.enableDynamic[sa]){this.dynamicLevel[sa]=ba[sa];var ma=this._field[(sa+1)%3],ra=this._field[(sa+2)%3];aa=y(this._field[sa],ba[sa]);var qa=aa.cells,
Y=aa.positions;this._dynamicOffsets[sa]=ka;for(aa=0;aa<qa.length;++aa)for(var pa=qa[aa],oa=0;2>oa;++oa){var ua=Y[pa[oa]],ya=+ua[0],ja=ya|0,za=Math.min(ja+1,ha[0])|0,Ba=ya-ja,Ma=1-Ba,Oa=+ua[1];ua=Oa|0;ya=Math.min(ua+1,ha[1])|0;var Ia=Oa-ua,Pa=1-Ia;Oa=Ma*Pa;Ma*=Ia;Pa*=Ba;Ia*=Ba;Ba=Oa*ma.get(ja,ua)+Ma*ma.get(ja,ya)+Pa*ma.get(za,ua)+Ia*ma.get(za,ya);ja=Oa*ra.get(ja,ua)+Ma*ra.get(ja,ya)+Pa*ra.get(za,ua)+Ia*ra.get(za,ya);if(isNaN(Ba)||isNaN(ja)){oa&&--ka;break}ca[2*ka]=Ba;ca[2*ka+1]=ja;ka+=1}this._dynamicCounts[sa]=
ka-this._dynamicOffsets[sa]}else this.dynamicLevel[sa]=NaN,this._dynamicCounts[sa]=0;this._dynamicBuffer.update(ca.subarray(0,2*ka));p.freeFloat(ca)}}else this._dynamicCounts=[0,0,0],this.dyanamicLevel=[NaN,NaN,NaN],this.highlightLevel=[-1,-1,-1]}},{"./lib/shaders":324,"binary-search-bounds":96,"bit-twiddle":97,colormap:131,"gl-buffer":258,"gl-mat4/invert":278,"gl-mat4/multiply":280,"gl-texture2d":327,"gl-vao":332,ndarray:469,"ndarray-gradient":462,"ndarray-ops":464,"ndarray-pack":465,"surface-nets":542,
"typedarray-pool":567}],326:[function(a,G,C){var q=a("css-font"),n=a("pick-by-alias"),m=a("regl"),f=a("gl-util/context");C=a("es6-weak-map");var b=a("color-normalize"),k=a("font-atlas"),e=a("typedarray-pool"),h=a("parse-rect"),l=a("is-plain-obj"),c=a("parse-unit"),g=a("to-px"),d=a("detect-kerning"),p=a("object-assign"),r=a("font-measure"),t=a("flatten-vertex-data"),w=a("bit-twiddle").nextPow2,x=new C,y=!1;document.body&&(a=document.body.appendChild(document.createElement("div")),a.style.font="italic small-caps bold condensed 16px/2 cursive",
getComputedStyle(a).fontStretch&&(y=!0),document.body.removeChild(a));var A=function(z){"function"===typeof z&&z._gl&&z.prop&&z.texture&&z.buffer?(z={regl:z},this.gl=z.regl._gl):this.gl=f(z);this.regl=(this.shader=x.get(this.gl))?this.shader.regl:z.regl||m({gl:this.gl});this.charBuffer=this.regl.buffer({type:"uint8",usage:"stream"});this.sizeBuffer=this.regl.buffer({type:"float",usage:"stream"});this.shader||(this.shader=this.createShader(),x.set(this.gl,this.shader));this.batch=[];this.fontSize=
[];this.font=[];this.fontAtlas=[];this.draw=this.shader.draw.bind(this);this.render=function(){this.regl._refresh();this.draw(this.batch)};this.canvas=this.gl.canvas;this.update(l(z)?z:{})};A.prototype.createShader=function(){var z=this.regl,F=z({blend:{enable:!0,color:[0,0,0,1],func:{srcRGB:"src alpha",dstRGB:"one minus src alpha",srcAlpha:"one minus dst alpha",dstAlpha:"one"}},stencil:{enable:!1},depth:{enable:!1},count:z.prop("count"),offset:z.prop("offset"),attributes:{charOffset:{offset:4,stride:8,
buffer:z.this("sizeBuffer")},width:{offset:0,stride:8,buffer:z.this("sizeBuffer")},char:z.this("charBuffer"),position:z.this("position")},uniforms:{atlasSize:function(D,u){return[u.atlas.width,u.atlas.height]},atlasDim:function(D,u){return[u.atlas.cols,u.atlas.rows]},atlas:function(D,u){return u.atlas.texture},charStep:function(D,u){return u.atlas.step},em:function(D,u){return u.atlas.em},color:z.prop("color"),opacity:z.prop("opacity"),viewport:z.this("viewportArray"),scale:z.this("scale"),align:z.prop("align"),
baseline:z.prop("baseline"),translate:z.this("translate"),positionOffset:z.prop("positionOffset")},primitive:"points",viewport:z.this("viewport"),vert:"\n\t\t\tprecision highp float;\n\t\t\tattribute float width, charOffset, char;\n\t\t\tattribute vec2 position;\n\t\t\tuniform float fontSize, charStep, em, align, baseline;\n\t\t\tuniform vec4 viewport;\n\t\t\tuniform vec4 color;\n\t\t\tuniform vec2 atlasSize, atlasDim, scale, translate, positionOffset;\n\t\t\tvarying vec2 charCoord, charId;\n\t\t\tvarying float charWidth;\n\t\t\tvarying vec4 fontColor;\n\t\t\tvoid main () {\n\t\t\t\t"+
(A.normalViewport?"":"vec2 positionOffset \x3d vec2(positionOffset.x,- positionOffset.y);")+"\n\n\t\t\t\tvec2 offset \x3d floor(em * (vec2(align + charOffset, baseline)\n\t\t\t\t\t+ positionOffset))\n\t\t\t\t\t/ (viewport.zw * scale.xy);\n\n\t\t\t\tvec2 position \x3d (position + translate) * scale;\n\t\t\t\tposition +\x3d offset * scale;\n\n\t\t\t\t"+(A.normalViewport?"position.y \x3d 1. - position.y;":"")+"\n\n\t\t\t\tcharCoord \x3d position * viewport.zw + viewport.xy;\n\n\t\t\t\tgl_Position \x3d vec4(position * 2. - 1., 0, 1);\n\n\t\t\t\tgl_PointSize \x3d charStep;\n\n\t\t\t\tcharId.x \x3d mod(char, atlasDim.x);\n\t\t\t\tcharId.y \x3d floor(char / atlasDim.x);\n\n\t\t\t\tcharWidth \x3d width * em;\n\n\t\t\t\tfontColor \x3d color / 255.;\n\t\t\t}",
frag:"\n\t\t\tprecision highp float;\n\t\t\tuniform sampler2D atlas;\n\t\t\tuniform float fontSize, charStep, opacity;\n\t\t\tuniform vec2 atlasSize;\n\t\t\tuniform vec4 viewport;\n\t\t\tvarying vec4 fontColor;\n\t\t\tvarying vec2 charCoord, charId;\n\t\t\tvarying float charWidth;\n\n\t\t\tfloat lightness(vec4 color) {\n\t\t\t\treturn color.r * 0.299 + color.g * 0.587 + color.b * 0.114;\n\t\t\t}\n\n\t\t\tvoid main () {\n\t\t\t\tvec2 uv \x3d gl_FragCoord.xy - charCoord + charStep * .5;\n\t\t\t\tfloat halfCharStep \x3d floor(charStep * .5 + .5);\n\n\t\t\t\t// invert y and shift by 1px (FF expecially needs that)\n\t\t\t\tuv.y \x3d charStep - uv.y;\n\n\t\t\t\t// ignore points outside of character bounding box\n\t\t\t\tfloat halfCharWidth \x3d ceil(charWidth * .5);\n\t\t\t\tif (floor(uv.x) \x3e halfCharStep + halfCharWidth ||\n\t\t\t\t\tfloor(uv.x) \x3c halfCharStep - halfCharWidth) return;\n\n\t\t\t\tuv +\x3d charId * charStep;\n\t\t\t\tuv \x3d uv / atlasSize;\n\n\t\t\t\tvec4 color \x3d fontColor;\n\t\t\t\tvec4 mask \x3d texture2D(atlas, uv);\n\n\t\t\t\tfloat maskY \x3d lightness(mask);\n\t\t\t\t// float colorY \x3d lightness(color);\n\t\t\t\tcolor.a *\x3d maskY;\n\t\t\t\tcolor.a *\x3d opacity;\n\n\t\t\t\t// color.a +\x3d .1;\n\n\t\t\t\t// antialiasing, see yiq color space y-channel formula\n\t\t\t\t// color.rgb +\x3d (1. - color.rgb) * (1. - mask.rgb);\n\n\t\t\t\tgl_FragColor \x3d color;\n\t\t\t}"});
return{regl:z,draw:F,atlas:{}}};A.prototype.update=function(z){var F=this;if("string"===typeof z)z={text:z};else if(!z)return;z=n(z,{position:"position positions coord coords coordinates",font:"font fontFace fontface typeface cssFont css-font family fontFamily",fontSize:"fontSize fontsize size font-size",text:"text texts chars characters value values symbols",align:"align alignment textAlign textbaseline",baseline:"baseline textBaseline textbaseline",direction:"dir direction textDirection",color:"color colour fill fill-color fillColor textColor textcolor",
kerning:"kerning kern",range:"range dataBox",viewport:"vp viewport viewBox viewbox viewPort",opacity:"opacity alpha transparency visible visibility opaque",offset:"offset positionOffset padding shift indent indentation"},!0);null!=z.opacity&&(Array.isArray(z.opacity)?this.opacity=z.opacity.map(function(V){return parseFloat(V)}):this.opacity=parseFloat(z.opacity));null!=z.viewport&&(this.viewport=h(z.viewport),A.normalViewport&&(this.viewport.y=this.canvas.height-this.viewport.y-this.viewport.height),
this.viewportArray=[this.viewport.x,this.viewport.y,this.viewport.width,this.viewport.height]);null==this.viewport&&(this.viewport={x:0,y:0,width:this.gl.drawingBufferWidth,height:this.gl.drawingBufferHeight},this.viewportArray=[this.viewport.x,this.viewport.y,this.viewport.width,this.viewport.height]);null!=z.kerning&&(this.kerning=z.kerning);null!=z.offset&&("number"===typeof z.offset&&(z.offset=[z.offset,0]),this.positionOffset=t(z.offset));z.direction&&(this.direction=z.direction);z.range&&(this.range=
z.range,this.scale=[1/(z.range[2]-z.range[0]),1/(z.range[3]-z.range[1])],this.translate=[-z.range[0],-z.range[1]]);z.scale&&(this.scale=z.scale);z.translate&&(this.translate=z.translate);this.scale||(this.scale=[1/this.viewport.width,1/this.viewport.height]);this.translate||(this.translate=[0,0]);this.font.length||z.font||(z.font=A.baseFontSize+"px sans-serif");var D=!1,u=!1;z.font&&(Array.isArray(z.font)?z.font:[z.font]).forEach(function(V,X){if("string"===typeof V)try{V=q.parse(V)}catch(ha){V=q.parse(A.baseFontSize+
"px "+V)}else V=q.parse(q.stringify(V));var ba=q.stringify({size:A.baseFontSize,family:V.family,stretch:y?V.stretch:void 0,variant:V.variant,weight:V.weight,style:V.style}),aa=c(V.size);aa=Math.round(aa[0]*g(aa[1]));aa!==F.fontSize[X]&&(u=!0,F.fontSize[X]=aa);if(!F.font[X]||ba!=F.font[X].baseString)if(D=!0,F.font[X]=A.fonts[ba],!F.font[X]){aa=V.family.join(", ");var ka=[V.style];V.style!=V.variant&&ka.push(V.variant);V.variant!=V.weight&&ka.push(V.weight);y&&V.weight!=V.stretch&&ka.push(V.stretch);
F.font[X]={baseString:ba,family:aa,weight:V.weight,stretch:V.stretch,style:V.style,variant:V.variant,width:{},kerning:{},metrics:r(aa,{origin:"top",fontSize:A.baseFontSize,fontStyle:ka.join(" ")})};A.fonts[ba]=F.font[X]}});(D||u)&&this.font.forEach(function(V,X){var ba=q.stringify({size:F.fontSize[X],family:V.family,stretch:y?V.stretch:void 0,variant:V.variant,weight:V.weight,style:V.style});F.fontAtlas[X]=F.shader.atlas[ba];F.fontAtlas[X]||(F.shader.atlas[ba]=F.fontAtlas[X]={fontString:ba,step:2*
Math.ceil(F.fontSize[X]*V.metrics.bottom*.5),em:F.fontSize[X],cols:0,rows:0,height:0,width:0,chars:[],ids:{},texture:F.regl.texture()});null==z.text&&(z.text=F.text)});if("string"===typeof z.text&&z.position&&2<z.position.length){for(var B=Array(.5*z.position.length),I=0;I<B.length;I++)B[I]=z.text;z.text=B}if(null!=z.text||D){this.textOffsets=[0];if(Array.isArray(z.text)){this.count=z.text[0].length;this.counts=[this.count];for(B=1;B<z.text.length;B++)this.textOffsets[B]=this.textOffsets[B-1]+z.text[B-
1].length,this.count+=z.text[B].length,this.counts.push(z.text[B].length);this.text=z.text.join("")}else this.text=z.text,this.count=this.text.length,this.counts=[this.count];var J=[];this.font.forEach(function(V,X){A.atlasContext.font=V.baseString;X=F.fontAtlas[X];for(var ba=0;ba<F.text.length;ba++){var aa=F.text.charAt(ba);null==X.ids[aa]&&(X.ids[aa]=X.chars.length,X.chars.push(aa),J.push(aa));if(null==V.width[aa]&&(V.width[aa]=A.atlasContext.measureText(aa).width/A.baseFontSize,F.kerning)){var ka=
[],ha;for(ha in V.width)ka.push(ha+aa,aa+ha);p(V.kerning,d(V.family,{pairs:ka}))}}})}if(z.position)if(2<z.position.length){B=!z.position[0].length;I=e.mallocFloat(2*this.count);for(var N=0,M=0;N<this.counts.length;N++){var E=this.counts[N];if(B)for(var L=0;L<E;L++)I[M++]=z.position[2*N],I[M++]=z.position[2*N+1];else for(L=0;L<E;L++)I[M++]=z.position[N][0],I[M++]=z.position[N][1]}this.position.call?this.position({type:"float",data:I}):this.position=this.regl.buffer({type:"float",data:I});e.freeFloat(I)}else this.position.destroy&&
this.position.destroy(),this.position={constant:z.position};if(z.text||D){B=e.mallocUint8(this.count);I=e.mallocFloat(2*this.count);this.textWidth=[];for(M=N=0;N<this.counts.length;N++){E=this.counts[N];L=this.font[N]||this.font[0];for(var Q=this.fontAtlas[N]||this.fontAtlas[0],S=0;S<E;S++){var R=this.text.charAt(M),O=this.text.charAt(M-1);B[M]=Q.ids[R];I[2*M]=L.width[R];if(S){var T=I[2*M-1]+.5*I[2*M-2]+.5*I[2*M];this.kerning&&(R=L.kerning[O+R])&&(T+=.001*R);I[2*M+1]=T}else I[2*M+1]=.5*I[2*M];M++}this.textWidth.push(I.length?
.5*I[2*M-2]+I[2*M-1]:0)}z.align||(z.align=this.align);this.charBuffer({data:B,type:"uint8",usage:"stream"});this.sizeBuffer({data:I,type:"float",usage:"stream"});e.freeUint8(B);e.freeFloat(I);J.length&&this.font.forEach(function(V,X){V=F.fontAtlas[X];X=V.step;var ba=Math.min(Math.floor(A.maxAtlasSize/X),V.chars.length),aa=Math.ceil(V.chars.length/ba),ka=w(ba*X),ha=w(aa*X);V.width=ka;V.height=ha;V.rows=aa;V.cols=ba;V.em&&V.texture({data:k({canvas:A.atlasCanvas,font:V.fontString,chars:V.chars,shape:[ka,
ha],step:[X,X]})})})}z.align&&(this.align=z.align,this.alignOffset=this.textWidth.map(function(V,X){X=Array.isArray(F.align)?1<F.align.length?F.align[X]:F.align[0]:F.align;if("number"===typeof X)return X;switch(X){case "right":case "end":return-V;case "center":case "centre":case "middle":return.5*-V}return 0}));null==this.baseline&&null==z.baseline&&(z.baseline=0);null!=z.baseline&&(this.baseline=z.baseline,Array.isArray(this.baseline)||(this.baseline=[this.baseline]),this.baselineOffset=this.baseline.map(function(V,
X){X=(F.font[X]||F.font[0]).metrics;var ba=.5*X.bottom;ba="number"===typeof V?ba+(V-X.baseline):ba+-X[V];A.normalViewport||(ba*=-1);return ba}));if(null!=z.color)if(z.color||(z.color="transparent"),"string"!==typeof z.color&&isNaN(z.color)){if("number"===typeof z.color[0]&&z.color.length>this.counts.length)for(I=z.color.length,B=e.mallocUint8(I),N=(z.color.subarray||z.color.slice).bind(z.color),M=0;M<I;M+=4)B.set(b(N(M,M+4),"uint8"),M);else for(I=z.color.length,B=e.mallocUint8(4*I),N=0;N<I;N++)B.set(b(z.color[N]||
0,"uint8"),4*N);this.color=B}else this.color=b(z.color,"uint8");if(z.position||z.text||z.color||z.baseline||z.align||z.font||z.offset||z.opacity)if(4<this.color.length||1<this.baselineOffset.length||this.align&&1<this.align.length||1<this.fontAtlas.length||2<this.positionOffset.length)for(this.batch=Array(Math.max(.5*this.position.length||0,.25*this.color.length||0,this.baselineOffset.length||0,this.alignOffset.length||0,this.font.length||0,this.opacity.length||0,.5*this.positionOffset.length||0)),
B=0;B<this.batch.length;B++)this.batch[B]={count:1<this.counts.length?this.counts[B]:this.counts[0],offset:1<this.textOffsets.length?this.textOffsets[B]:this.textOffsets[0],color:this.color?4>=this.color.length?this.color:this.color.subarray(4*B,4*B+4):[0,0,0,255],opacity:Array.isArray(this.opacity)?this.opacity[B]:this.opacity,baseline:null!=this.baselineOffset[B]?this.baselineOffset[B]:this.baselineOffset[0],align:this.align?null!=this.alignOffset[B]?this.alignOffset[B]:this.alignOffset[0]:0,atlas:this.fontAtlas[B]||
this.fontAtlas[0],positionOffset:2<this.positionOffset.length?this.positionOffset.subarray(2*B,2*B+2):this.positionOffset};else this.batch=this.count?[{count:this.count,offset:0,color:this.color||[0,0,0,255],opacity:Array.isArray(this.opacity)?this.opacity[0]:this.opacity,baseline:this.baselineOffset[0],align:this.alignOffset?this.alignOffset[0]:0,atlas:this.fontAtlas[0],positionOffset:this.positionOffset}]:[]};A.prototype.destroy=function(){};A.prototype.kerning=!0;A.prototype.position={constant:new Float32Array(2)};
A.prototype.translate=null;A.prototype.scale=null;A.prototype.font=null;A.prototype.text="";A.prototype.positionOffset=[0,0];A.prototype.opacity=1;A.prototype.color=new Uint8Array([0,0,0,255]);A.prototype.alignOffset=[0,0];A.normalViewport=!1;A.maxAtlasSize=1024;A.atlasCanvas=document.createElement("canvas");A.atlasContext=A.atlasCanvas.getContext("2d",{alpha:!1});A.baseFontSize=64;A.fonts={};G.exports=A},{"bit-twiddle":97,"color-normalize":125,"css-font":144,"detect-kerning":172,"es6-weak-map":233,
"flatten-vertex-data":244,"font-atlas":245,"font-measure":246,"gl-util/context":328,"is-plain-obj":443,"object-assign":473,"parse-rect":478,"parse-unit":480,"pick-by-alias":485,regl:512,"to-px":550,"typedarray-pool":567}],327:[function(a,G,C){function q(p){return"undefined"!=typeof HTMLCanvasElement&&p instanceof HTMLCanvasElement||"undefined"!=typeof HTMLImageElement&&p instanceof HTMLImageElement||"undefined"!=typeof HTMLVideoElement&&p instanceof HTMLVideoElement||"undefined"!=typeof ImageData&&
p instanceof ImageData}function n(p,r,t){var w=p.gl,x=w.getParameter(w.MAX_TEXTURE_SIZE);if(0>r||r>x||0>t||t>x)throw Error("gl-texture2d: Invalid texture size");p._shape=[r,t];p.bind();w.texImage2D(w.TEXTURE_2D,0,p.format,r,t,0,p.format,p.type,null);p._mipLevels=[0];return p}function m(p,r,t,w,x,y){this.gl=p;this.handle=r;this.format=x;this.type=y;this._shape=[t,w];this._mipLevels=[0];this._minFilter=this._magFilter=p.NEAREST;this._wrapT=this._wrapS=p.CLAMP_TO_EDGE;this._anisoSamples=1;var A=this;
p=[this._wrapS,this._wrapT];Object.defineProperties(p,[{get:function(){return A._wrapS},set:function(z){return A.wrapS=z}},{get:function(){return A._wrapT},set:function(z){return A.wrapT=z}}]);this._wrapVector=p;p=[this._shape[0],this._shape[1]];Object.defineProperties(p,[{get:function(){return A._shape[0]},set:function(z){return A.width=z}},{get:function(){return A._shape[1]},set:function(z){return A.height=z}}]);this._shapeVector=p}function f(p,r){return 3===p.length?1===r[2]&&r[1]===p[0]*p[2]&&
r[0]===p[2]:1===r[0]&&r[1]===p[0]}function b(p){var r=p.createTexture();p.bindTexture(p.TEXTURE_2D,r);p.texParameteri(p.TEXTURE_2D,p.TEXTURE_MIN_FILTER,p.NEAREST);p.texParameteri(p.TEXTURE_2D,p.TEXTURE_MAG_FILTER,p.NEAREST);p.texParameteri(p.TEXTURE_2D,p.TEXTURE_WRAP_S,p.CLAMP_TO_EDGE);p.texParameteri(p.TEXTURE_2D,p.TEXTURE_WRAP_T,p.CLAMP_TO_EDGE);return r}function k(p,r,t,w,x){var y=p.getParameter(p.MAX_TEXTURE_SIZE);if(0>r||r>y||0>t||t>y)throw Error("gl-texture2d: Invalid texture shape");if(x===
p.FLOAT&&!p.getExtension("OES_texture_float"))throw Error("gl-texture2d: Floating point textures not supported on this platform");y=b(p);p.texImage2D(p.TEXTURE_2D,0,w,r,t,0,w,x,null);return new m(p,y,r,t,w,x)}var e=a("ndarray"),h=a("ndarray-ops"),l=a("typedarray-pool");G.exports=function(p){if(1>=arguments.length)throw Error("gl-texture2d: Missing arguments for texture2d constructor");c||(c=[p.LINEAR,p.NEAREST_MIPMAP_LINEAR,p.LINEAR_MIPMAP_NEAREST,p.LINEAR_MIPMAP_NEAREST],g=[p.NEAREST,p.LINEAR,p.NEAREST_MIPMAP_NEAREST,
p.NEAREST_MIPMAP_LINEAR,p.LINEAR_MIPMAP_NEAREST,p.LINEAR_MIPMAP_LINEAR],d=[p.REPEAT,p.CLAMP_TO_EDGE,p.MIRRORED_REPEAT]);if("number"===typeof arguments[1])return k(p,arguments[1],arguments[2],arguments[3]||p.RGBA,arguments[4]||p.UNSIGNED_BYTE);if(Array.isArray(arguments[1]))return k(p,arguments[1][0]|0,arguments[1][1]|0,arguments[2]||p.RGBA,arguments[3]||p.UNSIGNED_BYTE);if("object"===typeof arguments[1]){var r=arguments[1],t=q(r)?r:r.raw;if(t){var w=r.width|0;r=r.height|0;var x=arguments[2]||p.RGBA,
y=arguments[3]||p.UNSIGNED_BYTE,A=b(p);p.texImage2D(p.TEXTURE_2D,0,x,x,y,t);return new m(p,A,w,r,x,y)}if(r.shape&&r.data&&r.stride){A=r;var z=A.dtype;t=A.shape.slice();r=p.getParameter(p.MAX_TEXTURE_SIZE);if(0>t[0]||t[0]>r||0>t[1]||t[1]>r)throw Error("gl-texture2d: Invalid texture size");r=f(t,A.stride.slice());"float32"===z?x=p.FLOAT:"float64"===z?(x=p.FLOAT,r=!1,z="float32"):"uint8"===z?x=p.UNSIGNED_BYTE:(x=p.UNSIGNED_BYTE,r=!1,z="uint8");if(2===t.length)y=p.LUMINANCE,t=[t[0],t[1],1],A=e(A.data,
t,[A.stride[0],A.stride[1],1],A.offset);else if(3===t.length)if(1===t[2])y=p.ALPHA;else if(2===t[2])y=p.LUMINANCE_ALPHA;else if(3===t[2])y=p.RGB;else if(4===t[2])y=p.RGBA;else throw Error("gl-texture2d: Invalid shape for pixel coords");else throw Error("gl-texture2d: Invalid shape for texture");x!==p.FLOAT||p.getExtension("OES_texture_float")||(x=p.UNSIGNED_BYTE,r=!1);var F=A.size;if(r)A=0===A.offset&&A.data.length===F?A.data:A.data.subarray(A.offset,A.offset+F);else{var D=[t[2],t[2]*t[0],1];w=l.malloc(F,
z);D=e(w,t,D,0);"float32"!==z&&"float64"!==z||x!==p.UNSIGNED_BYTE?h.assign(D,A):h.muls(D,A,255);A=w.subarray(0,F)}z=b(p);p.texImage2D(p.TEXTURE_2D,0,y,t[0],t[1],0,y,x,A);r||l.free(w);return new m(p,z,t[0],t[1],y,x)}}throw Error("gl-texture2d: Invalid arguments for texture2d constructor");};var c=null,g=null,d=null;a=m.prototype;Object.defineProperties(a,{minFilter:{get:function(){return this._minFilter},set:function(p){this.bind();var r=this.gl;this.type===r.FLOAT&&0<=c.indexOf(p)&&!r.getExtension("OES_texture_float_linear")&&
(p=r.NEAREST);if(0>g.indexOf(p))throw Error("gl-texture2d: Unknown filter mode "+p);r.texParameteri(r.TEXTURE_2D,r.TEXTURE_MIN_FILTER,p);return this._minFilter=p}},magFilter:{get:function(){return this._magFilter},set:function(p){this.bind();var r=this.gl;this.type===r.FLOAT&&0<=c.indexOf(p)&&!r.getExtension("OES_texture_float_linear")&&(p=r.NEAREST);if(0>g.indexOf(p))throw Error("gl-texture2d: Unknown filter mode "+p);r.texParameteri(r.TEXTURE_2D,r.TEXTURE_MAG_FILTER,p);return this._magFilter=p}},
mipSamples:{get:function(){return this._anisoSamples},set:function(p){var r=this._anisoSamples;this._anisoSamples=Math.max(p,1)|0;r!==this._anisoSamples&&(p=this.gl.getExtension("EXT_texture_filter_anisotropic"))&&this.gl.texParameterf(this.gl.TEXTURE_2D,p.TEXTURE_MAX_ANISOTROPY_EXT,this._anisoSamples);return this._anisoSamples}},wrapS:{get:function(){return this._wrapS},set:function(p){this.bind();if(0>d.indexOf(p))throw Error("gl-texture2d: Unknown wrap mode "+p);this.gl.texParameteri(this.gl.TEXTURE_2D,
this.gl.TEXTURE_WRAP_S,p);return this._wrapS=p}},wrapT:{get:function(){return this._wrapT},set:function(p){this.bind();if(0>d.indexOf(p))throw Error("gl-texture2d: Unknown wrap mode "+p);this.gl.texParameteri(this.gl.TEXTURE_2D,this.gl.TEXTURE_WRAP_T,p);return this._wrapT=p}},wrap:{get:function(){return this._wrapVector},set:function(p){Array.isArray(p)||(p=[p,p]);if(2!==p.length)throw Error("gl-texture2d: Must specify wrap mode for rows and columns");for(var r=0;2>r;++r)if(0>d.indexOf(p[r]))throw Error("gl-texture2d: Unknown wrap mode "+
p);this._wrapS=p[0];this._wrapT=p[1];r=this.gl;this.bind();r.texParameteri(r.TEXTURE_2D,r.TEXTURE_WRAP_S,this._wrapS);r.texParameteri(r.TEXTURE_2D,r.TEXTURE_WRAP_T,this._wrapT);return p}},shape:{get:function(){return this._shapeVector},set:function(p){if(!Array.isArray(p))p=[p|0,p|0];else if(2!==p.length)throw Error("gl-texture2d: Invalid texture shape");n(this,p[0]|0,p[1]|0);return[p[0]|0,p[1]|0]}},width:{get:function(){return this._shape[0]},set:function(p){p|=0;n(this,p,this._shape[1]);return p}},
height:{get:function(){return this._shape[1]},set:function(p){p|=0;n(this,this._shape[0],p);return p}}});a.bind=function(p){var r=this.gl;void 0!==p&&r.activeTexture(r.TEXTURE0+(p|0));r.bindTexture(r.TEXTURE_2D,this.handle);return void 0!==p?p|0:r.getParameter(r.ACTIVE_TEXTURE)-r.TEXTURE0};a.dispose=function(){this.gl.deleteTexture(this.handle)};a.generateMipmap=function(){this.bind();this.gl.generateMipmap(this.gl.TEXTURE_2D);for(var p=Math.min(this._shape[0],this._shape[1]),r=0;0<p;++r,p>>>=1)0>
this._mipLevels.indexOf(r)&&this._mipLevels.push(r)};a.setPixels=function(p,r,t,w){var x=this.gl;this.bind();Array.isArray(r)?(w=t,t=r[1]|0,r=r[0]|0):(r=r||0,t=t||0);w=w||0;var y=q(p)?p:p.raw;if(y)0>this._mipLevels.indexOf(w)?(x.texImage2D(x.TEXTURE_2D,0,this.format,this.format,this.type,y),this._mipLevels.push(w)):x.texSubImage2D(x.TEXTURE_2D,w,r,t,this.format,this.type,y);else if(p.shape&&p.stride&&p.data){if(2>p.shape.length||r+p.shape[1]>this._shape[1]>>>w||t+p.shape[0]>this._shape[0]>>>w||0>
r||0>t)throw Error("gl-texture2d: Texture dimensions are out of bounds");y=this.format;var A=this.type,z=this._mipLevels,F=p.dtype,D=p.shape.slice();if(2>D.length||3<D.length)throw Error("gl-texture2d: Invalid ndarray, must be 2d or 3d");var u=f(D,p.stride.slice());"float32"===F?F=x.FLOAT:"float64"===F?(F=x.FLOAT,u=!1):"uint8"===F?F=x.UNSIGNED_BYTE:(F=x.UNSIGNED_BYTE,u=!1);if(2===D.length){var B=x.LUMINANCE;D=[D[0],D[1],1];p=e(p.data,D,[p.stride[0],p.stride[1],1],p.offset)}else if(3===D.length)if(1===
D[2])B=x.ALPHA;else if(2===D[2])B=x.LUMINANCE_ALPHA;else if(3===D[2])B=x.RGB;else if(4===D[2])B=x.RGBA;else throw Error("gl-texture2d: Invalid shape for pixel coords");else throw Error("gl-texture2d: Invalid shape for texture");B!==x.LUMINANCE&&B!==x.ALPHA||y!==x.LUMINANCE&&y!==x.ALPHA||(B=y);if(B!==y)throw Error("gl-texture2d: Incompatible texture format for setPixels");B=p.size;var I=0>z.indexOf(w);I&&z.push(w);F===A&&u?0===p.offset&&p.data.length===B?I?x.texImage2D(x.TEXTURE_2D,w,y,D[0],D[1],0,
y,A,p.data):x.texSubImage2D(x.TEXTURE_2D,w,r,t,D[0],D[1],y,A,p.data):I?x.texImage2D(x.TEXTURE_2D,w,y,D[0],D[1],0,y,A,p.data.subarray(p.offset,p.offset+B)):x.texSubImage2D(x.TEXTURE_2D,w,r,t,D[0],D[1],y,A,p.data.subarray(p.offset,p.offset+B)):(z=A===x.FLOAT?l.mallocFloat32(B):l.mallocUint8(B),u=e(z,D,[D[2],D[2]*D[0],1]),F===x.FLOAT&&A===x.UNSIGNED_BYTE?h.muls(u,p,255):h.assign(u,p),I?x.texImage2D(x.TEXTURE_2D,w,y,D[0],D[1],0,y,A,z.subarray(0,B)):x.texSubImage2D(x.TEXTURE_2D,w,r,t,D[0],D[1],y,A,z.subarray(0,
B)),A===x.FLOAT?l.freeFloat32(z):l.freeUint8(z))}else throw Error("gl-texture2d: Unsupported data type");}},{ndarray:469,"ndarray-ops":464,"typedarray-pool":567}],328:[function(a,G,C){(function(q){function n(k){if(k.container)if(k.container==document.body)document.body.style.width||(k.canvas.width=k.width||k.pixelRatio*q.innerWidth),document.body.style.height||(k.canvas.height=k.height||k.pixelRatio*q.innerHeight);else{var e=k.container.getBoundingClientRect();k.canvas.width=k.width||e.right-e.left;
k.canvas.height=k.height||e.bottom-e.top}}function m(k){return"function"===typeof k.getContext&&"width"in k&&"height"in k}function f(){var k=document.createElement("canvas");k.style.position="absolute";k.style.top=0;k.style.left=0;return k}var b=a("pick-by-alias");G.exports=function(k){k?"string"===typeof k&&(k={container:k}):k={};k=m(k)?{container:k}:"string"===typeof k.nodeName&&"function"===typeof k.appendChild&&"function"===typeof k.getBoundingClientRect?{container:k}:"function"===typeof k.drawArrays||
"function"===typeof k.drawElements?{gl:k}:b(k,{container:"container target element el canvas holder parent parentNode wrapper use ref root node",gl:"gl context webgl glContext",attrs:"attributes attrs contextAttributes",pixelRatio:"pixelRatio pxRatio px ratio pxratio pixelratio",width:"w width",height:"h height"},!0);k.pixelRatio||(k.pixelRatio=q.pixelRatio||1);if(k.gl)return k.gl;k.canvas&&(k.container=k.canvas.parentNode);if(k.container){if("string"===typeof k.container){var e=document.querySelector(k.container);
if(!e)throw Error("Element "+k.container+" is not found");k.container=e}m(k.container)?(k.canvas=k.container,k.container=k.canvas.parentNode):k.canvas||(k.canvas=f(),k.container.appendChild(k.canvas),n(k))}else if(!k.canvas)if("undefined"!==typeof document)k.container=document.body||document.documentElement,k.canvas=f(),k.container.appendChild(k.canvas),n(k);else throw Error("Not DOM environment. Use headless-gl.");if(!k.gl)try{k.gl=k.canvas.getContext("webgl",k.attrs)}catch(h){try{k.gl=k.canvas.getContext("experimental-webgl",
k.attrs)}catch(l){k.gl=k.canvas.getContext("webgl-experimental",k.attrs)}}return k.gl}}).call(this,"undefined"!==typeof la?la:"undefined"!==typeof self?self:"undefined"!==typeof window?window:{})},{"pick-by-alias":485}],329:[function(a,G,C){G.exports=function(q,n,m){n?n.bind():q.bindBuffer(q.ELEMENT_ARRAY_BUFFER,null);n=q.getParameter(q.MAX_VERTEX_ATTRIBS)|0;if(m){if(m.length>n)throw Error("gl-vao: Too many vertex attributes");for(var f=0;f<m.length;++f){var b=m[f];if(b.buffer){var k=b.size||4,e=
b.type||q.FLOAT,h=!!b.normalized,l=b.stride||0,c=b.offset||0;b.buffer.bind();q.enableVertexAttribArray(f);q.vertexAttribPointer(f,k,e,h,l,c)}else{if("number"===typeof b)q.vertexAttrib1f(f,b);else if(1===b.length)q.vertexAttrib1f(f,b[0]);else if(2===b.length)q.vertexAttrib2f(f,b[0],b[1]);else if(3===b.length)q.vertexAttrib3f(f,b[0],b[1],b[2]);else if(4===b.length)q.vertexAttrib4f(f,b[0],b[1],b[2],b[3]);else throw Error("gl-vao: Invalid vertex attribute");q.disableVertexAttribArray(f)}}}else q.bindBuffer(q.ARRAY_BUFFER,
null),f=0;for(;f<n;++f)q.disableVertexAttribArray(f)}},{}],330:[function(a,G,C){function q(m){this.gl=m;this._attributes=this._elements=null;this._elementsType=m.UNSIGNED_SHORT}var n=a("./do-bind.js");q.prototype.bind=function(){n(this.gl,this._elements,this._attributes)};q.prototype.update=function(m,f,b){this._elements=f;this._attributes=m;this._elementsType=b||this.gl.UNSIGNED_SHORT};q.prototype.dispose=function(){};q.prototype.unbind=function(){};q.prototype.draw=function(m,f,b){b=b||0;var k=
this.gl;this._elements?k.drawElements(m,f,this._elementsType,b):k.drawArrays(m,b,f)};G.exports=function(m){return new q(m)}},{"./do-bind.js":329}],331:[function(a,G,C){function q(f,b,k,e,h,l){this.location=f;this.dimension=b;this.a=k;this.b=e;this.c=h;this.d=l}function n(f,b,k){this.gl=f;this._ext=b;this.handle=k;this._attribs=[];this._useElements=!1;this._elementsType=f.UNSIGNED_SHORT}var m=a("./do-bind.js");q.prototype.bind=function(f){switch(this.dimension){case 1:f.vertexAttrib1f(this.location,
this.a);break;case 2:f.vertexAttrib2f(this.location,this.a,this.b);break;case 3:f.vertexAttrib3f(this.location,this.a,this.b,this.c);break;case 4:f.vertexAttrib4f(this.location,this.a,this.b,this.c,this.d)}};n.prototype.bind=function(){this._ext.bindVertexArrayOES(this.handle);for(var f=0;f<this._attribs.length;++f)this._attribs[f].bind(this.gl)};n.prototype.unbind=function(){this._ext.bindVertexArrayOES(null)};n.prototype.dispose=function(){this._ext.deleteVertexArrayOES(this.handle)};n.prototype.update=
function(f,b,k){this.bind();m(this.gl,b,f);this.unbind();this._attribs.length=0;if(f)for(var e=0;e<f.length;++e){var h=f[e];"number"===typeof h?this._attribs.push(new q(e,1,h)):Array.isArray(h)&&this._attribs.push(new q(e,h.length,h[0],h[1],h[2],h[3]))}this._useElements=!!b;this._elementsType=k||this.gl.UNSIGNED_SHORT};n.prototype.draw=function(f,b,k){k=k||0;var e=this.gl;this._useElements?e.drawElements(f,b,this._elementsType,k):e.drawArrays(f,k,b)};G.exports=function(f,b){return new n(f,b,b.createVertexArrayOES())}},
{"./do-bind.js":329}],332:[function(a,G,C){function q(f){this.bindVertexArrayOES=f.bindVertexArray.bind(f);this.createVertexArrayOES=f.createVertexArray.bind(f);this.deleteVertexArrayOES=f.deleteVertexArray.bind(f)}var n=a("./lib/vao-native.js"),m=a("./lib/vao-emulated.js");G.exports=function(f,b,k,e){var h=f.createVertexArray?new q(f):f.getExtension("OES_vertex_array_object");f=h?n(f,h):m(f);f.update(b,k,e);return f}},{"./lib/vao-emulated.js":330,"./lib/vao-native.js":331}],333:[function(a,G,C){G.exports=
function(q,n,m){q[0]=n[0]+m[0];q[1]=n[1]+m[1];q[2]=n[2]+m[2];return q}},{}],334:[function(a,G,C){G.exports=function(f,b){f=q(f[0],f[1],f[2]);b=q(b[0],b[1],b[2]);n(f,f);n(b,b);b=m(f,b);return 1<b?0:Math.acos(b)};var q=a("./fromValues"),n=a("./normalize"),m=a("./dot")},{"./dot":344,"./fromValues":350,"./normalize":361}],335:[function(a,G,C){G.exports=function(q,n){q[0]=Math.ceil(n[0]);q[1]=Math.ceil(n[1]);q[2]=Math.ceil(n[2]);return q}},{}],336:[function(a,G,C){G.exports=function(q){var n=new Float32Array(3);
n[0]=q[0];n[1]=q[1];n[2]=q[2];return n}},{}],337:[function(a,G,C){G.exports=function(q,n){q[0]=n[0];q[1]=n[1];q[2]=n[2];return q}},{}],338:[function(a,G,C){G.exports=function(){var q=new Float32Array(3);q[0]=0;q[1]=0;q[2]=0;return q}},{}],339:[function(a,G,C){G.exports=function(q,n,m){var f=n[0],b=n[1];n=n[2];var k=m[0],e=m[1];m=m[2];q[0]=b*m-n*e;q[1]=n*k-f*m;q[2]=f*e-b*k;return q}},{}],340:[function(a,G,C){G.exports=a("./distance")},{"./distance":341}],341:[function(a,G,C){G.exports=function(q,n){var m=
n[0]-q[0],f=n[1]-q[1];q=n[2]-q[2];return Math.sqrt(m*m+f*f+q*q)}},{}],342:[function(a,G,C){G.exports=a("./divide")},{"./divide":343}],343:[function(a,G,C){G.exports=function(q,n,m){q[0]=n[0]/m[0];q[1]=n[1]/m[1];q[2]=n[2]/m[2];return q}},{}],344:[function(a,G,C){G.exports=function(q,n){return q[0]*n[0]+q[1]*n[1]+q[2]*n[2]}},{}],345:[function(a,G,C){G.exports=1E-6},{}],346:[function(a,G,C){G.exports=function(n,m){var f=n[0],b=n[1];n=n[2];var k=m[0],e=m[1];m=m[2];return Math.abs(f-k)<=q*Math.max(1,Math.abs(f),
Math.abs(k))&&Math.abs(b-e)<=q*Math.max(1,Math.abs(b),Math.abs(e))&&Math.abs(n-m)<=q*Math.max(1,Math.abs(n),Math.abs(m))};var q=a("./epsilon")},{"./epsilon":345}],347:[function(a,G,C){G.exports=function(q,n){return q[0]===n[0]&&q[1]===n[1]&&q[2]===n[2]}},{}],348:[function(a,G,C){G.exports=function(q,n){q[0]=Math.floor(n[0]);q[1]=Math.floor(n[1]);q[2]=Math.floor(n[2]);return q}},{}],349:[function(a,G,C){G.exports=function(n,m,f,b,k,e){m||(m=3);f||(f=0);for(b=b?Math.min(b*m+f,n.length):n.length;f<b;f+=
m)q[0]=n[f],q[1]=n[f+1],q[2]=n[f+2],k(q,q,e),n[f]=q[0],n[f+1]=q[1],n[f+2]=q[2];return n};var q=a("./create")()},{"./create":338}],350:[function(a,G,C){G.exports=function(q,n,m){var f=new Float32Array(3);f[0]=q;f[1]=n;f[2]=m;return f}},{}],351:[function(a,G,C){G.exports={EPSILON:a("./epsilon"),create:a("./create"),clone:a("./clone"),angle:a("./angle"),fromValues:a("./fromValues"),copy:a("./copy"),set:a("./set"),equals:a("./equals"),exactEquals:a("./exactEquals"),add:a("./add"),subtract:a("./subtract"),
sub:a("./sub"),multiply:a("./multiply"),mul:a("./mul"),divide:a("./divide"),div:a("./div"),min:a("./min"),max:a("./max"),floor:a("./floor"),ceil:a("./ceil"),round:a("./round"),scale:a("./scale"),scaleAndAdd:a("./scaleAndAdd"),distance:a("./distance"),dist:a("./dist"),squaredDistance:a("./squaredDistance"),sqrDist:a("./sqrDist"),length:a("./length"),len:a("./len"),squaredLength:a("./squaredLength"),sqrLen:a("./sqrLen"),negate:a("./negate"),inverse:a("./inverse"),normalize:a("./normalize"),dot:a("./dot"),
cross:a("./cross"),lerp:a("./lerp"),random:a("./random"),transformMat4:a("./transformMat4"),transformMat3:a("./transformMat3"),transformQuat:a("./transformQuat"),rotateX:a("./rotateX"),rotateY:a("./rotateY"),rotateZ:a("./rotateZ"),forEach:a("./forEach")}},{"./add":333,"./angle":334,"./ceil":335,"./clone":336,"./copy":337,"./create":338,"./cross":339,"./dist":340,"./distance":341,"./div":342,"./divide":343,"./dot":344,"./epsilon":345,"./equals":346,"./exactEquals":347,"./floor":348,"./forEach":349,
"./fromValues":350,"./inverse":352,"./len":353,"./length":354,"./lerp":355,"./max":356,"./min":357,"./mul":358,"./multiply":359,"./negate":360,"./normalize":361,"./random":362,"./rotateX":363,"./rotateY":364,"./rotateZ":365,"./round":366,"./scale":367,"./scaleAndAdd":368,"./set":369,"./sqrDist":370,"./sqrLen":371,"./squaredDistance":372,"./squaredLength":373,"./sub":374,"./subtract":375,"./transformMat3":376,"./transformMat4":377,"./transformQuat":378}],352:[function(a,G,C){G.exports=function(q,n){q[0]=
1/n[0];q[1]=1/n[1];q[2]=1/n[2];return q}},{}],353:[function(a,G,C){G.exports=a("./length")},{"./length":354}],354:[function(a,G,C){G.exports=function(q){var n=q[0],m=q[1];q=q[2];return Math.sqrt(n*n+m*m+q*q)}},{}],355:[function(a,G,C){G.exports=function(q,n,m,f){var b=n[0],k=n[1];n=n[2];q[0]=b+f*(m[0]-b);q[1]=k+f*(m[1]-k);q[2]=n+f*(m[2]-n);return q}},{}],356:[function(a,G,C){G.exports=function(q,n,m){q[0]=Math.max(n[0],m[0]);q[1]=Math.max(n[1],m[1]);q[2]=Math.max(n[2],m[2]);return q}},{}],357:[function(a,
G,C){G.exports=function(q,n,m){q[0]=Math.min(n[0],m[0]);q[1]=Math.min(n[1],m[1]);q[2]=Math.min(n[2],m[2]);return q}},{}],358:[function(a,G,C){G.exports=a("./multiply")},{"./multiply":359}],359:[function(a,G,C){G.exports=function(q,n,m){q[0]=n[0]*m[0];q[1]=n[1]*m[1];q[2]=n[2]*m[2];return q}},{}],360:[function(a,G,C){G.exports=function(q,n){q[0]=-n[0];q[1]=-n[1];q[2]=-n[2];return q}},{}],361:[function(a,G,C){G.exports=function(q,n){var m=n[0],f=n[1],b=n[2];m=m*m+f*f+b*b;0<m&&(m=1/Math.sqrt(m),q[0]=
n[0]*m,q[1]=n[1]*m,q[2]=n[2]*m);return q}},{}],362:[function(a,G,C){G.exports=function(q,n){n=n||1;var m=2*Math.random()*Math.PI,f=2*Math.random()-1,b=Math.sqrt(1-f*f)*n;q[0]=Math.cos(m)*b;q[1]=Math.sin(m)*b;q[2]=f*n;return q}},{}],363:[function(a,G,C){G.exports=function(q,n,m,f){var b=m[1];m=m[2];var k=n[1]-b,e=n[2]-m,h=Math.sin(f);f=Math.cos(f);q[0]=n[0];q[1]=b+k*f-e*h;q[2]=m+k*h+e*f;return q}},{}],364:[function(a,G,C){G.exports=function(q,n,m,f){var b=m[0];m=m[2];var k=n[0]-b,e=n[2]-m,h=Math.sin(f);
f=Math.cos(f);q[0]=b+e*h+k*f;q[1]=n[1];q[2]=m+e*f-k*h;return q}},{}],365:[function(a,G,C){G.exports=function(q,n,m,f){var b=m[0];m=m[1];var k=n[0]-b,e=n[1]-m,h=Math.sin(f);f=Math.cos(f);q[0]=b+k*f-e*h;q[1]=m+k*h+e*f;q[2]=n[2];return q}},{}],366:[function(a,G,C){G.exports=function(q,n){q[0]=Math.round(n[0]);q[1]=Math.round(n[1]);q[2]=Math.round(n[2]);return q}},{}],367:[function(a,G,C){G.exports=function(q,n,m){q[0]=n[0]*m;q[1]=n[1]*m;q[2]=n[2]*m;return q}},{}],368:[function(a,G,C){G.exports=function(q,
n,m,f){q[0]=n[0]+m[0]*f;q[1]=n[1]+m[1]*f;q[2]=n[2]+m[2]*f;return q}},{}],369:[function(a,G,C){G.exports=function(q,n,m,f){q[0]=n;q[1]=m;q[2]=f;return q}},{}],370:[function(a,G,C){G.exports=a("./squaredDistance")},{"./squaredDistance":372}],371:[function(a,G,C){G.exports=a("./squaredLength")},{"./squaredLength":373}],372:[function(a,G,C){G.exports=function(q,n){var m=n[0]-q[0],f=n[1]-q[1];q=n[2]-q[2];return m*m+f*f+q*q}},{}],373:[function(a,G,C){G.exports=function(q){var n=q[0],m=q[1];q=q[2];return n*
n+m*m+q*q}},{}],374:[function(a,G,C){G.exports=a("./subtract")},{"./subtract":375}],375:[function(a,G,C){G.exports=function(q,n,m){q[0]=n[0]-m[0];q[1]=n[1]-m[1];q[2]=n[2]-m[2];return q}},{}],376:[function(a,G,C){G.exports=function(q,n,m){var f=n[0],b=n[1];n=n[2];q[0]=f*m[0]+b*m[3]+n*m[6];q[1]=f*m[1]+b*m[4]+n*m[7];q[2]=f*m[2]+b*m[5]+n*m[8];return q}},{}],377:[function(a,G,C){G.exports=function(q,n,m){var f=n[0],b=n[1];n=n[2];var k=m[3]*f+m[7]*b+m[11]*n+m[15];k=k||1;q[0]=(m[0]*f+m[4]*b+m[8]*n+m[12])/
k;q[1]=(m[1]*f+m[5]*b+m[9]*n+m[13])/k;q[2]=(m[2]*f+m[6]*b+m[10]*n+m[14])/k;return q}},{}],378:[function(a,G,C){G.exports=function(q,n,m){var f=n[0],b=n[1],k=n[2];n=m[0];var e=m[1],h=m[2];m=m[3];var l=m*f+e*k-h*b,c=m*b+h*f-n*k,g=m*k+n*b-e*f;f=-n*f-e*b-h*k;q[0]=l*m+f*-n+c*-h-g*-e;q[1]=c*m+f*-e+g*-n-l*-h;q[2]=g*m+f*-h+l*-e-c*-n;return q}},{}],379:[function(a,G,C){G.exports=function(q,n,m){q[0]=n[0]+m[0];q[1]=n[1]+m[1];q[2]=n[2]+m[2];q[3]=n[3]+m[3];return q}},{}],380:[function(a,G,C){G.exports=function(q){var n=
new Float32Array(4);n[0]=q[0];n[1]=q[1];n[2]=q[2];n[3]=q[3];return n}},{}],381:[function(a,G,C){G.exports=function(q,n){q[0]=n[0];q[1]=n[1];q[2]=n[2];q[3]=n[3];return q}},{}],382:[function(a,G,C){G.exports=function(){var q=new Float32Array(4);q[0]=0;q[1]=0;q[2]=0;q[3]=0;return q}},{}],383:[function(a,G,C){G.exports=function(q,n){var m=n[0]-q[0],f=n[1]-q[1],b=n[2]-q[2];q=n[3]-q[3];return Math.sqrt(m*m+f*f+b*b+q*q)}},{}],384:[function(a,G,C){G.exports=function(q,n,m){q[0]=n[0]/m[0];q[1]=n[1]/m[1];q[2]=
n[2]/m[2];q[3]=n[3]/m[3];return q}},{}],385:[function(a,G,C){G.exports=function(q,n){return q[0]*n[0]+q[1]*n[1]+q[2]*n[2]+q[3]*n[3]}},{}],386:[function(a,G,C){G.exports=function(q,n,m,f){var b=new Float32Array(4);b[0]=q;b[1]=n;b[2]=m;b[3]=f;return b}},{}],387:[function(a,G,C){G.exports={create:a("./create"),clone:a("./clone"),fromValues:a("./fromValues"),copy:a("./copy"),set:a("./set"),add:a("./add"),subtract:a("./subtract"),multiply:a("./multiply"),divide:a("./divide"),min:a("./min"),max:a("./max"),
scale:a("./scale"),scaleAndAdd:a("./scaleAndAdd"),distance:a("./distance"),squaredDistance:a("./squaredDistance"),length:a("./length"),squaredLength:a("./squaredLength"),negate:a("./negate"),inverse:a("./inverse"),normalize:a("./normalize"),dot:a("./dot"),lerp:a("./lerp"),random:a("./random"),transformMat4:a("./transformMat4"),transformQuat:a("./transformQuat")}},{"./add":379,"./clone":380,"./copy":381,"./create":382,"./distance":383,"./divide":384,"./dot":385,"./fromValues":386,"./inverse":388,"./length":389,
"./lerp":390,"./max":391,"./min":392,"./multiply":393,"./negate":394,"./normalize":395,"./random":396,"./scale":397,"./scaleAndAdd":398,"./set":399,"./squaredDistance":400,"./squaredLength":401,"./subtract":402,"./transformMat4":403,"./transformQuat":404}],388:[function(a,G,C){G.exports=function(q,n){q[0]=1/n[0];q[1]=1/n[1];q[2]=1/n[2];q[3]=1/n[3];return q}},{}],389:[function(a,G,C){G.exports=function(q){var n=q[0],m=q[1],f=q[2];q=q[3];return Math.sqrt(n*n+m*m+f*f+q*q)}},{}],390:[function(a,G,C){G.exports=
function(q,n,m,f){var b=n[0],k=n[1],e=n[2];n=n[3];q[0]=b+f*(m[0]-b);q[1]=k+f*(m[1]-k);q[2]=e+f*(m[2]-e);q[3]=n+f*(m[3]-n);return q}},{}],391:[function(a,G,C){G.exports=function(q,n,m){q[0]=Math.max(n[0],m[0]);q[1]=Math.max(n[1],m[1]);q[2]=Math.max(n[2],m[2]);q[3]=Math.max(n[3],m[3]);return q}},{}],392:[function(a,G,C){G.exports=function(q,n,m){q[0]=Math.min(n[0],m[0]);q[1]=Math.min(n[1],m[1]);q[2]=Math.min(n[2],m[2]);q[3]=Math.min(n[3],m[3]);return q}},{}],393:[function(a,G,C){G.exports=function(q,
n,m){q[0]=n[0]*m[0];q[1]=n[1]*m[1];q[2]=n[2]*m[2];q[3]=n[3]*m[3];return q}},{}],394:[function(a,G,C){G.exports=function(q,n){q[0]=-n[0];q[1]=-n[1];q[2]=-n[2];q[3]=-n[3];return q}},{}],395:[function(a,G,C){G.exports=function(q,n){var m=n[0],f=n[1],b=n[2];n=n[3];var k=m*m+f*f+b*b+n*n;0<k&&(k=1/Math.sqrt(k),q[0]=m*k,q[1]=f*k,q[2]=b*k,q[3]=n*k);return q}},{}],396:[function(a,G,C){var q=a("./normalize"),n=a("./scale");G.exports=function(m,f){f=f||1;m[0]=Math.random();m[1]=Math.random();m[2]=Math.random();
m[3]=Math.random();q(m,m);n(m,m,f);return m}},{"./normalize":395,"./scale":397}],397:[function(a,G,C){G.exports=function(q,n,m){q[0]=n[0]*m;q[1]=n[1]*m;q[2]=n[2]*m;q[3]=n[3]*m;return q}},{}],398:[function(a,G,C){G.exports=function(q,n,m,f){q[0]=n[0]+m[0]*f;q[1]=n[1]+m[1]*f;q[2]=n[2]+m[2]*f;q[3]=n[3]+m[3]*f;return q}},{}],399:[function(a,G,C){G.exports=function(q,n,m,f,b){q[0]=n;q[1]=m;q[2]=f;q[3]=b;return q}},{}],400:[function(a,G,C){G.exports=function(q,n){var m=n[0]-q[0],f=n[1]-q[1],b=n[2]-q[2];
q=n[3]-q[3];return m*m+f*f+b*b+q*q}},{}],401:[function(a,G,C){G.exports=function(q){var n=q[0],m=q[1],f=q[2];q=q[3];return n*n+m*m+f*f+q*q}},{}],402:[function(a,G,C){G.exports=function(q,n,m){q[0]=n[0]-m[0];q[1]=n[1]-m[1];q[2]=n[2]-m[2];q[3]=n[3]-m[3];return q}},{}],403:[function(a,G,C){G.exports=function(q,n,m){var f=n[0],b=n[1],k=n[2];n=n[3];q[0]=m[0]*f+m[4]*b+m[8]*k+m[12]*n;q[1]=m[1]*f+m[5]*b+m[9]*k+m[13]*n;q[2]=m[2]*f+m[6]*b+m[10]*k+m[14]*n;q[3]=m[3]*f+m[7]*b+m[11]*k+m[15]*n;return q}},{}],404:[function(a,
G,C){G.exports=function(q,n,m){var f=n[0],b=n[1],k=n[2],e=m[0],h=m[1],l=m[2];m=m[3];var c=m*f+h*k-l*b,g=m*b+l*f-e*k,d=m*k+e*b-h*f;f=-e*f-h*b-l*k;q[0]=c*m+f*-e+g*-l-d*-h;q[1]=g*m+f*-h+d*-e-c*-l;q[2]=d*m+f*-l+c*-h-g*-e;q[3]=n[3];return q}},{}],405:[function(a,G,C){var q=a("glsl-tokenizer"),n=a("atob-lite");G.exports=function(m){m=Array.isArray(m)?m:q(m);for(var f=0;f<m.length;f++){var b=m[f];if("preprocessor"===b.type&&(b=b.data.match(/#define\s+SHADER_NAME(_B64)?\s+(.+)$/))&&b[2])return m=b[2],(b[1]?
n(m):m).trim()}}},{"atob-lite":77,"glsl-tokenizer":412}],406:[function(a,G,C){G.exports=function(F){function D(Y){Y.length&&T.push({type:z[Q],data:Y,position:ba,line:V,column:X})}function u(){O=O.length?[]:O;if("/"===R&&"*"===S)return ba=L+E-1,Q=h,R=S,E+1;if("/"===R&&"/"===S)return ba=L+E-1,Q=l,R=S,E+1;if("#"===S)return Q=c,ba=L+E,E;if(/\s/.test(S))return Q=x,ba=L+E,E;aa=/\d/.test(S);ka=/[^\w_]/.test(S);ba=L+E;Q=aa?d:ka?g:e;return E}function B(){if(("\r"===S||"\n"===S)&&"\\"!==R)return D(O.join("")),
Q=k,E;O.push(S);R=S;return E+1}function I(){if("."===R&&/\d/.test(S))return Q=p,E;if("/"===R&&"*"===S)return Q=h,E;if("/"===R&&"/"===S)return Q=l,E;if("."===S&&O.length){for(;J(O););Q=p;return E}if(";"===S||")"===S||"("===S){if(O.length)for(;J(O););D(S);Q=k;return E+1}var Y=2===O.length&&"\x3d"!==S;if(/[\w_\d\s]/.test(S)||Y){for(;J(O););Q=k;return E}O.push(S);R=S;return E+1}function J(Y){var pa=0;do{var oa=n.indexOf(Y.slice(0,Y.length+pa).join(""));var ua=n[oa];if(-1===oa){if(0<pa--+Y.length)continue;
ua=Y.slice(0,1).join("")}D(ua);ba+=ua.length;O=O.slice(ua.length);return O.length}while(1)}function N(){if("."===S||/[eE]/.test(S))return O.push(S),Q=p,R=S,E+1;if("x"===S&&1===O.length&&"0"===O[0])return Q=A,O.push(S),R=S,E+1;if(/[^\d]/.test(S))return D(O.join("")),Q=k,E;O.push(S);R=S;return E+1}function M(){"f"===S&&(O.push(S),R=S,E+=1);if(/[eE]/.test(S)||("-"===S||"+"===S)&&/[eE]/.test(R))return O.push(S),R=S,E+1;if(/[^\d]/.test(S))return D(O.join("")),Q=k,E;O.push(S);R=S;return E+1}var E=0,L=0,
Q=k,S,R,O=[],T=[],V=1,X=0,ba=0,aa=!1,ka=!1,ha="",ca;F=F||{};var sa=m,ma=q;"300 es"===F.version&&(sa=b,ma=f);var ra={},qa={};for(E=0;E<sa.length;E++)ra[sa[E]]=!0;for(E=0;E<ma.length;E++)qa[ma[E]]=!0;return function(Y){T=[];if(null!==Y){E=0;Y.toString&&(Y=Y.toString());ha+=Y.replace(/\r\n/g,"\n");for(ca=ha.length;S=ha[E],E<ca;){Y=E;switch(Q){case h:"/"===S&&"*"===R?(O.push(S),D(O.join("")),Q=k):(O.push(S),R=S);E+=1;break;case l:E=B();break;case c:E=B();break;case g:E=I();break;case d:E=N();break;case A:/[^a-fA-F0-9]/.test(S)?
(D(O.join("")),Q=k):(O.push(S),R=S,E+=1);break;case p:E=M();break;case e:if(/[^\d\w_]/.test(S)){var pa=O.join("");Q=qa[pa]?w:ra[pa]?t:r;D(O.join(""));Q=k}else O.push(S),R=S,E+=1;break;case x:/[^\s]/g.test(S)?(D(O.join("")),Q=k):(O.push(S),R=S,E+=1);break;case k:E=u()}if(Y!==E)switch(ha[Y]){case "\n":X=0;++V;break;default:++X}}L+=E;ha=ha.slice(E);return T}O.length&&D(O.join(""));Q=y;D("(eof)");return T}};var q=a("./lib/literals"),n=a("./lib/operators"),m=a("./lib/builtins"),f=a("./lib/literals-300es"),
b=a("./lib/builtins-300es"),k=999,e=9999,h=0,l=1,c=2,g=3,d=4,p=5,r=6,t=7,w=8,x=9,y=10,A=11,z="block-comment line-comment preprocessor operator integer float ident builtin keyword whitespace eof integer".split(" ")},{"./lib/builtins":408,"./lib/builtins-300es":407,"./lib/literals":410,"./lib/literals-300es":409,"./lib/operators":411}],407:[function(a,G,C){a=a("./builtins");a=a.slice().filter(function(q){return!/^(gl_|texture)/.test(q)});G.exports=a.concat("gl_VertexID gl_InstanceID gl_Position gl_PointSize gl_FragCoord gl_FrontFacing gl_FragDepth gl_PointCoord gl_MaxVertexAttribs gl_MaxVertexUniformVectors gl_MaxVertexOutputVectors gl_MaxFragmentInputVectors gl_MaxVertexTextureImageUnits gl_MaxCombinedTextureImageUnits gl_MaxTextureImageUnits gl_MaxFragmentUniformVectors gl_MaxDrawBuffers gl_MinProgramTexelOffset gl_MaxProgramTexelOffset gl_DepthRangeParameters gl_DepthRange trunc round roundEven isnan isinf floatBitsToInt floatBitsToUint intBitsToFloat uintBitsToFloat packSnorm2x16 unpackSnorm2x16 packUnorm2x16 unpackUnorm2x16 packHalf2x16 unpackHalf2x16 outerProduct transpose determinant inverse texture textureSize textureProj textureLod textureOffset texelFetch texelFetchOffset textureProjOffset textureLodOffset textureProjLod textureProjLodOffset textureGrad textureGradOffset textureProjGrad textureProjGradOffset".split(" "))},
{"./builtins":408}],408:[function(a,G,C){G.exports="abs acos all any asin atan ceil clamp cos cross dFdx dFdy degrees distance dot equal exp exp2 faceforward floor fract gl_BackColor gl_BackLightModelProduct gl_BackLightProduct gl_BackMaterial gl_BackSecondaryColor gl_ClipPlane gl_ClipVertex gl_Color gl_DepthRange gl_DepthRangeParameters gl_EyePlaneQ gl_EyePlaneR gl_EyePlaneS gl_EyePlaneT gl_Fog gl_FogCoord gl_FogFragCoord gl_FogParameters gl_FragColor gl_FragCoord gl_FragData gl_FragDepth gl_FragDepthEXT gl_FrontColor gl_FrontFacing gl_FrontLightModelProduct gl_FrontLightProduct gl_FrontMaterial gl_FrontSecondaryColor gl_LightModel gl_LightModelParameters gl_LightModelProducts gl_LightProducts gl_LightSource gl_LightSourceParameters gl_MaterialParameters gl_MaxClipPlanes gl_MaxCombinedTextureImageUnits gl_MaxDrawBuffers gl_MaxFragmentUniformComponents gl_MaxLights gl_MaxTextureCoords gl_MaxTextureImageUnits gl_MaxTextureUnits gl_MaxVaryingFloats gl_MaxVertexAttribs gl_MaxVertexTextureImageUnits gl_MaxVertexUniformComponents gl_ModelViewMatrix gl_ModelViewMatrixInverse gl_ModelViewMatrixInverseTranspose gl_ModelViewMatrixTranspose gl_ModelViewProjectionMatrix gl_ModelViewProjectionMatrixInverse gl_ModelViewProjectionMatrixInverseTranspose gl_ModelViewProjectionMatrixTranspose gl_MultiTexCoord0 gl_MultiTexCoord1 gl_MultiTexCoord2 gl_MultiTexCoord3 gl_MultiTexCoord4 gl_MultiTexCoord5 gl_MultiTexCoord6 gl_MultiTexCoord7 gl_Normal gl_NormalMatrix gl_NormalScale gl_ObjectPlaneQ gl_ObjectPlaneR gl_ObjectPlaneS gl_ObjectPlaneT gl_Point gl_PointCoord gl_PointParameters gl_PointSize gl_Position gl_ProjectionMatrix gl_ProjectionMatrixInverse gl_ProjectionMatrixInverseTranspose gl_ProjectionMatrixTranspose gl_SecondaryColor gl_TexCoord gl_TextureEnvColor gl_TextureMatrix gl_TextureMatrixInverse gl_TextureMatrixInverseTranspose gl_TextureMatrixTranspose gl_Vertex greaterThan greaterThanEqual inversesqrt length lessThan lessThanEqual log log2 matrixCompMult max min mix mod normalize not notEqual pow radians reflect refract sign sin smoothstep sqrt step tan texture2D texture2DLod texture2DProj texture2DProjLod textureCube textureCubeLod texture2DLodEXT texture2DProjLodEXT textureCubeLodEXT texture2DGradEXT texture2DProjGradEXT textureCubeGradEXT".split(" ")},
{}],409:[function(a,G,C){a=a("./literals");G.exports=a.slice().concat("layout centroid smooth case mat2x2 mat2x3 mat2x4 mat3x2 mat3x3 mat3x4 mat4x2 mat4x3 mat4x4 uvec2 uvec3 uvec4 samplerCubeShadow sampler2DArray sampler2DArrayShadow isampler2D isampler3D isamplerCube isampler2DArray usampler2D usampler3D usamplerCube usampler2DArray coherent restrict readonly writeonly resource atomic_uint noperspective patch sample subroutine common partition active filter image1D image2D image3D imageCube iimage1D iimage2D iimage3D iimageCube uimage1D uimage2D uimage3D uimageCube image1DArray image2DArray iimage1DArray iimage2DArray uimage1DArray uimage2DArray image1DShadow image2DShadow image1DArrayShadow image2DArrayShadow imageBuffer iimageBuffer uimageBuffer sampler1DArray sampler1DArrayShadow isampler1D isampler1DArray usampler1D usampler1DArray isampler2DRect usampler2DRect samplerBuffer isamplerBuffer usamplerBuffer sampler2DMS isampler2DMS usampler2DMS sampler2DMSArray isampler2DMSArray usampler2DMSArray".split(" "))},
{"./literals":410}],410:[function(a,G,C){G.exports="precision highp mediump lowp attribute const uniform varying break continue do for while if else in out inout float int uint void bool true false discard return mat2 mat3 mat4 vec2 vec3 vec4 ivec2 ivec3 ivec4 bvec2 bvec3 bvec4 sampler1D sampler2D sampler3D samplerCube sampler1DShadow sampler2DShadow struct asm class union enum typedef template this packed goto switch default inline noinline volatile public static extern external interface long short double half fixed unsigned input output hvec2 hvec3 hvec4 dvec2 dvec3 dvec4 fvec2 fvec3 fvec4 sampler2DRect sampler3DRect sampler2DRectShadow sizeof cast namespace using".split(" ")},
{}],411:[function(a,G,C){G.exports="\x3c\x3c\x3d \x3e\x3e\x3d ++ -- \x3c\x3c \x3e\x3e \x3c\x3d \x3e\x3d \x3d\x3d !\x3d \x26\x26 || +\x3d -\x3d *\x3d /\x3d %\x3d \x26\x3d ^^ ^\x3d |\x3d ( ) [ ] . ! ~ * / % + - \x3c \x3e \x26 ^ | ? : \x3d , ; { }".split(" ")},{}],412:[function(a,G,C){var q=a("./index");G.exports=function(n,m){m=q(m);var f=[];f=f.concat(m(n));return f=f.concat(m(null))}},{"./index":406}],413:[function(a,G,C){G.exports=function(q){"string"===typeof q&&(q=[q]);for(var n=[].slice.call(arguments,
1),m=[],f=0;f<q.length-1;f++)m.push(q[f],n[f]||"");m.push(q[f]);return m.join("")}},{}],414:[function(a,G,C){C="undefined"!==typeof la?la:"undefined"!==typeof self?self:"undefined"!==typeof window?window:{};a=a("is-browser");a="function"===typeof C.matchMedia?!C.matchMedia("(hover: none)").matches:a;G.exports=a},{"is-browser":438}],415:[function(a,G,C){function q(){var n=!1;try{var m=Object.defineProperty({},"passive",{get:function(){n=!0}});window.addEventListener("test",null,m);window.removeEventListener("test",
null,m)}catch(f){n=!1}return n}a=a("is-browser");G.exports=a&&q()},{"is-browser":438}],416:[function(a,G,C){C.read=function(q,n,m,f,b){var k=8*b-f-1;var e=(1<<k)-1,h=e>>1,l=-7;b=m?b-1:0;var c=m?-1:1,g=q[n+b];b+=c;m=g&(1<<-l)-1;g>>=-l;for(l+=k;0<l;m=256*m+q[n+b],b+=c,l-=8);k=m&(1<<-l)-1;m>>=-l;for(l+=f;0<l;k=256*k+q[n+b],b+=c,l-=8);if(0===m)m=1-h;else{if(m===e)return k?NaN:Infinity*(g?-1:1);k+=Math.pow(2,f);m-=h}return(g?-1:1)*k*Math.pow(2,m-f)};C.write=function(q,n,m,f,b,k){var e,h=8*k-b-1,l=(1<<
h)-1,c=l>>1,g=23===b?Math.pow(2,-24)-Math.pow(2,-77):0;k=f?0:k-1;var d=f?1:-1,p=0>n||0===n&&0>1/n?1:0;n=Math.abs(n);isNaN(n)||Infinity===n?(n=isNaN(n)?1:0,f=l):(f=Math.floor(Math.log(n)/Math.LN2),1>n*(e=Math.pow(2,-f))&&(f--,e*=2),n=1<=f+c?n+g/e:n+g*Math.pow(2,1-c),2<=n*e&&(f++,e/=2),f+c>=l?(n=0,f=l):1<=f+c?(n=(n*e-1)*Math.pow(2,b),f+=c):(n=n*Math.pow(2,c-1)*Math.pow(2,b),f=0));for(;8<=b;q[m+k]=n&255,k+=d,n/=256,b-=8);f=f<<b|n;for(h+=b;0<h;q[m+k]=f&255,k+=d,f/=256,h-=8);q[m+k-d]|=128*p}},{}],417:[function(a,
G,C){var q=a("./types");G.exports=function(n,m){var f,b;for(f in q)if(b=q[f].detect(n,m))return f}},{"./types":420}],418:[function(a,G,C){(function(q){function n(l,c){var g=h(l,c);if(g in e&&(l=e[g].calculate(l,c),!1!==l))return l.type=g,l;throw new TypeError("unsupported file type: "+g+" (file: "+c+")");}function m(l,c){b.open(l,"r",function(g,d){if(g)return c(g);b.fstat(d,function(p,r){if(p)return c(p);p=r.size;if(0>=p)return c(Error("File size is not greater than 0 —— "+l));p=Math.min(p,524288);
var t=q.alloc(p);b.read(d,t,0,p,0,function(w){if(w)return c(w);b.close(d,function(x){c(x,t)})})})})}function f(l){l=b.openSync(l,"r");var c=b.fstatSync(l).size;c=Math.min(c,524288);var g=q.alloc(c);b.readSync(l,g,0,c,0);b.closeSync(l);return g}var b=a("fs"),k=a("path"),e=a("./types"),h=a("./detector");G.exports=function(l,c){if(q.isBuffer(l))return n(l);if("string"!==typeof l)throw new TypeError("invalid invocation");var g=k.resolve(l);if("function"===typeof c)m(g,function(d,p){if(d)return c(d);try{var r=
n(p,g)}catch(t){d=t}c(d,r)});else return l=f(g),n(l,g)};G.exports.types=Object.keys(e)}).call(this,a("buffer").Buffer)},{"./detector":417,"./types":420,buffer:111,fs:109,path:481}],419:[function(a,G,C){G.exports=function(q,n,m,f){return q["readUInt"+n+(f?"BE":"LE")].call(q,m||0)}},{}],420:[function(a,G,C){a={bmp:a("./types/bmp"),cur:a("./types/cur"),dds:a("./types/dds"),gif:a("./types/gif"),icns:a("./types/icns"),ico:a("./types/ico"),jpg:a("./types/jpg"),png:a("./types/png"),psd:a("./types/psd"),
svg:a("./types/svg"),tiff:a("./types/tiff"),webp:a("./types/webp")};G.exports=a},{"./types/bmp":421,"./types/cur":422,"./types/dds":423,"./types/gif":424,"./types/icns":425,"./types/ico":426,"./types/jpg":427,"./types/png":428,"./types/psd":429,"./types/svg":430,"./types/tiff":431,"./types/webp":432}],421:[function(a,G,C){G.exports={detect:function(q){return"BM"===q.toString("ascii",0,2)},calculate:function(q){return{width:q.readUInt32LE(18),height:Math.abs(q.readInt32LE(22))}}}},{}],422:[function(a,
G,C){G.exports={detect:function(q){return 0!==q.readUInt16LE(0)?!1:2===q.readUInt16LE(2)},calculate:a("./ico").calculate}},{"./ico":426}],423:[function(a,G,C){G.exports={detect:function(q){return 542327876===q.readUInt32LE(0)},calculate:function(q){return{height:q.readUInt32LE(12),width:q.readUInt32LE(16)}}}},{}],424:[function(a,G,C){var q=/^GIF8[79]a/;G.exports={detect:function(n){n=n.toString("ascii",0,6);return q.test(n)},calculate:function(n){return{width:n.readUInt16LE(6),height:n.readUInt16LE(8)}}}},
{}],425:[function(a,G,C){function q(f,b){var k=b+4;return[f.toString("ascii",b,k),f.readUInt32BE(k)]}function n(f){var b=m[f];return{width:b,height:b,type:f}}var m={ICON:32,"ICN#":32,"icm#":16,icm4:16,icm8:16,"ics#":16,ics4:16,ics8:16,is32:16,s8mk:16,icp4:16,icl4:32,icl8:32,il32:32,l8mk:32,icp5:32,ic11:32,ich4:48,ich8:48,ih32:48,h8mk:48,icp6:64,ic12:32,it32:128,t8mk:128,ic07:128,ic08:256,ic13:256,ic09:512,ic14:512,ic10:1024};G.exports={detect:function(f){return"icns"===f.toString("ascii",0,4)},calculate:function(f){var b=
f.length,k=8,e=f.readUInt32BE(4),h;var l=q(f,k);var c=n(l[0]);k+=l[1];if(k===e)return c;for(h={width:c.width,height:c.height,images:[c]};k<e&&k<b;)l=q(f,k),c=n(l[0]),k+=l[1],h.images.push(c);return h}}},{}],426:[function(a,G,C){function q(m,f){m=m.readUInt8(f);return 0===m?256:m}function n(m,f){f=6+16*f;return{width:q(m,f),height:q(m,f+1)}}G.exports={detect:function(m){return 0!==m.readUInt16LE(0)?!1:1===m.readUInt16LE(2)},calculate:function(m){var f=m.readUInt16LE(4),b=n(m,0),k;if(1===f)return b;
b.images=[{width:b.width,height:b.height}];for(k=1;k<f;k+=1)b.images.push(n(m,k));return b}}},{}],427:[function(a,G,C){var q=a("../readUInt");G.exports={detect:function(n){return"ffd8"===n.toString("hex",0,2)},calculate:function(n){n=n.slice(4);for(var m,f,b;n.length;){f=n.readUInt16BE(0);if("45786966"===n.toString("hex",2,6)){m=n.slice(2,f);var k=m.toString("hex",6,8);b="4d4d"===k;k="4949"===k;if(b||k)b:{k=q(m,16,14,b);for(var e=0;e<k;e++){var h=16+12*e;var l=h+12;if(h>m.length)break;l=m.slice(h,
l);if(274===q(l,16,0,b)){if(3!==q(l,16,2,b))break;if(1!==q(l,32,4,b))break;m=q(l,16,8,b);break b}}m=void 0}else m=void 0}b=n;k=f;if(k>b.length)throw new TypeError("Corrupt JPG, exceeded buffer limits");if(255!==b[k])throw new TypeError("Invalid JPG, marker table corrupted");b=n[f+1];if(192===b||193===b||194===b)return f+=5,f={height:n.readUInt16BE(f),width:n.readUInt16BE(f+2)},m?{width:f.width,height:f.height,orientation:m}:f;n=n.slice(f+2)}throw new TypeError("Invalid JPG, no size found");}}},{"../readUInt":419}],
428:[function(a,G,C){G.exports={detect:function(q){if("PNG\r\n\n"===q.toString("ascii",1,8)){var n=q.toString("ascii",12,16);"CgBI"===n&&(n=q.toString("ascii",28,32));if("IHDR"!==n)throw new TypeError("invalid png");return!0}},calculate:function(q){return"CgBI"===q.toString("ascii",12,16)?{width:q.readUInt32BE(32),height:q.readUInt32BE(36)}:{width:q.readUInt32BE(16),height:q.readUInt32BE(20)}}}},{}],429:[function(a,G,C){G.exports={detect:function(q){return"8BPS"===q.toString("ascii",0,4)},calculate:function(q){return{width:q.readUInt32BE(18),
height:q.readUInt32BE(14)}}}},{}],430:[function(a,G,C){function q(e){if(e=/([0-9.]+)([a-z]*)/.exec(e))return Math.round(parseFloat(e[1])*(k[e[2]]||1))}var n=/<svg\s([^>"']|"[^"]*"|'[^']*')*>/,m=/\swidth=(['"])([^%]+?)\1/,f=/\sheight=(['"])([^%]+?)\1/,b=/\sviewBox=(['"])(.+?)\1/,k={cm:96/2.54,mm:96/2.54/10,m:96/2.54*100,pt:96/72,pc:96/72/12,em:16,ex:8};G.exports={detect:function(e){return n.test(e)},calculate:function(e){if(e=e.toString("utf8").match(n)){var h=e[0];e=h.match(m);var l=h.match(f);h=
h.match(b);e=e&&q(e[2]);l=l&&q(l[2]);var c;if(c=h)h=h[2].split(" "),c={width:q(h[2]),height:q(h[3])};h=c;if(e&&l)return{width:e,height:l};if(h)return c=h.width/h.height,e=e?{width:e,height:Math.floor(e/c)}:l?{width:Math.floor(l*c),height:l}:{width:h.width,height:h.height},e}throw new TypeError("invalid svg");}}},{}],431:[function(a,G,C){(function(q){var n=a("fs"),m=a("../readUInt");G.exports={detect:function(f){f=f.toString("hex",0,4);return"49492a00"===f||"4d4d002a"===f},calculate:function(f,b){if(!b)throw new TypeError("Tiff doesn't support buffer");
var k=f.toString("ascii",0,2);k="BE"===("II"===k?"LE":"MM"===k?"BE":void 0);f=m(f,32,4,k);var e=1024,h=n.statSync(b).size;f+e>h&&(e=h-f-10);h=q.alloc(e);b=n.openSync(b,"r");n.readSync(b,h,0,e,f);f=h.slice(2);b={};for(var l;f&&f.length&&(e=m(f,16,0,k),h=m(f,16,2,k),l=m(f,32,4,k),0!==e);){if(1===l&&(3===h||4===h)){h=f;l=k;var c=m(h,16,8,l);h=(m(h,16,10,l)<<16)+c;b[e]=h}f=24<f.length?f.slice(12):void 0}k=b[256];b=b[257];if(!k||!b)throw new TypeError("Invalid Tiff, missing tags");return{width:k,height:b}}}}).call(this,
a("buffer").Buffer)},{"../readUInt":419,buffer:111,fs:109}],432:[function(a,G,C){G.exports={detect:function(q){var n="RIFF"===q.toString("ascii",0,4),m="WEBP"===q.toString("ascii",8,12);q="VP8"===q.toString("ascii",12,15);return n&&m&&q},calculate:function(q){var n=q.toString("ascii",12,16);q=q.slice(20,30);if("VP8X"===n)return n=q[0],0===(n&192)&&0===(n&1)?{width:1+q.readUIntLE(4,3),height:1+q.readUIntLE(7,3)}:!1;if("VP8 "===n&&47!==q[0])return{width:q.readInt16LE(6)&16383,height:q.readInt16LE(8)&
16383};var m=q.toString("hex",3,6);return"VP8L"===n&&"9d012a"!==m?{width:1+((q[2]&63)<<8|q[1]),height:1+((q[4]&15)<<10|q[3]<<2|(q[2]&192)>>6)}:!1}}},{}],433:[function(a,G,C){function q(l,c,g){this.vertices=l;this.adjacent=c;this.boundary=g;this.lastVisited=-1}function n(l,c,g){this.vertices=l;this.cell=c;this.index=g}function m(l,c){return e(l.vertices,c.vertices)}function f(l){for(var c=["function orient(){var tuple\x3dthis.tuple;return test("],g=0;g<=l;++g)0<g&&c.push(","),c.push("tuple[",g,"]");
c.push(")}return orient");c=new Function("test",c.join(""));(l=k[l+1])||(l=k);return c(l)}function b(l,c,g){this.dimension=l;this.vertices=c;this.simplices=g;this.interior=g.filter(function(d){return!d.boundary});this.tuple=Array(l+1);for(c=0;c<=l;++c)this.tuple[c]=this.vertices[c];(c=h[l])||(c=h[l]=f(l));this.orient=c}G.exports=function(l,c){var g=l.length;if(0===g)throw Error("Must have at least d+1 points");var d=l[0].length;if(g<=d)throw Error("Must input at least d+1 points");var p=l.slice(0,
d+1),r=k.apply(void 0,p);if(0===r)throw Error("Input not in general position");for(var t=Array(d+1),w=0;w<=d;++w)t[w]=w;0>r&&(t[0]=1,t[1]=0);r=new q(t,Array(d+1),!1);var x=r.adjacent,y=Array(d+2);for(w=0;w<=d;++w){for(var A=t.slice(),z=0;z<=d;++z)z===w&&(A[z]=-1);z=A[0];A[0]=A[1];A[1]=z;A=new q(A,Array(d+1),!0);x[w]=A;y[w]=A}y[d+1]=r;for(w=0;w<=d;++w)for(A=x[w].vertices,t=x[w].adjacent,z=0;z<=d;++z){var F=A[z];if(0>F)t[z]=r;else for(var D=0;D<=d;++D)0>x[D].vertices.indexOf(F)&&(t[z]=x[D])}p=new b(d,
p,y);c=!!c;for(w=d+1;w<g;++w)p.insert(l[w],c);return p.boundary()};var k=a("robust-orientation"),e=a("simplicial-complex").compareCells;q.prototype.flip=function(){var l=this.vertices[0];this.vertices[0]=this.vertices[1];this.vertices[1]=l;l=this.adjacent[0];this.adjacent[0]=this.adjacent[1];this.adjacent[1]=l};var h=[];a=b.prototype;a.handleBoundaryDegeneracy=function(l,c){var g=this.dimension,d=this.vertices.length-1,p=this.tuple,r=this.vertices,t=[l];for(l.lastVisited=-d;0<t.length;){l=t.pop();
l=l.adjacent;for(var w=0;w<=g;++w){var x=l[w];if(x.boundary&&!(x.lastVisited<=-d)){for(var y=x.vertices,A=0;A<=g;++A){var z=y[A];p[A]=0>z?c:r[z]}y=this.orient();if(0<y)return x;x.lastVisited=-d;0===y&&t.push(x)}}}return null};a.walk=function(l,c){var g=this.vertices.length-1,d=this.dimension,p=this.vertices,r=this.tuple,t=this.interior[c?this.interior.length*Math.random()|0:this.interior.length-1];a:for(;!t.boundary;){var w=t.vertices;c=t.adjacent;for(var x=0;x<=d;++x)r[x]=p[w[x]];t.lastVisited=g;
for(x=0;x<=d;++x)if(t=c[x],!(t.lastVisited>=g)){w=r[x];r[x]=l;var y=this.orient();r[x]=w;if(0>y)continue a;else t.lastVisited=t.boundary?-g:g}return}return t};a.addPeaks=function(l,c){var g=this.vertices.length-1,d=this.dimension,p=this.vertices,r=this.tuple,t=this.interior,w=this.simplices,x=[c];c.lastVisited=g;c.vertices[c.vertices.indexOf(-1)]=g;c.boundary=!1;t.push(c);for(var y=[];0<x.length;){c=x.pop();var A=c.vertices,z=c.adjacent,F=A.indexOf(g);if(!(0>F))for(var D=0;D<=d;++D)if(D!==F){var u=
z[D];if(u.boundary&&!(u.lastVisited>=g)){var B=u.vertices;if(u.lastVisited!==-g){for(var I=0,J=0;J<=d;++J)0>B[J]?(I=J,r[J]=l):r[J]=p[B[J]];if(0<this.orient()){B[I]=g;u.boundary=!1;t.push(u);x.push(u);u.lastVisited=g;continue}else u.lastVisited=-g}J=u.adjacent;B=A.slice();var N=z.slice();I=new q(B,N,!0);w.push(I);var M=J.indexOf(c);if(!(0>M))for(J[M]=I,N[F]=u,B[D]=-1,N[D]=c,z[D]=I,I.flip(),J=0;J<=d;++J)if(u=B[J],!(0>u||u===g)){u=Array(d-1);for(M=N=0;M<=d;++M){var E=B[M];0>E||M===J||(u[N++]=E)}y.push(new n(u,
I,J))}}}}y.sort(m);for(D=0;D+1<y.length;D+=2)l=y[D],c=y[D+1],g=c.index,0>l.index||0>g||(l.cell.adjacent[l.index]=c.cell,c.cell.adjacent[c.index]=l.cell)};a.insert=function(l,c){var g=this.vertices;g.push(l);if(c=this.walk(l,c)){for(var d=this.dimension,p=this.tuple,r=0;r<=d;++r){var t=c.vertices[r];p[r]=0>t?l:g[t]}g=this.orient(p);if(!(0>g)){if(0===g&&(c=this.handleBoundaryDegeneracy(c,l),!c))return;this.addPeaks(l,c)}}};a.boundary=function(){for(var l=this.dimension,c=[],g=this.simplices,d=g.length,
p=0;p<d;++p){var r=g[p];if(r.boundary){var t=Array(l);r=r.vertices;for(var w=0,x=0,y=0;y<=l;++y)0<=r[y]?t[w++]=r[y]:x=y&1;x===(l&1)&&(r=t[0],t[0]=t[1],t[1]=r);c.push(t)}}return c}},{"robust-orientation":520,"simplicial-complex":530}],434:[function(a,G,C){function q(r,t,w,x,y){this.mid=r;this.left=t;this.right=w;this.leftPoints=x;this.rightPoints=y;this.count=(t?t.count:0)+(w?w.count:0)+x.length}function n(r,t){r.mid=t.mid;r.left=t.left;r.right=t.right;r.leftPoints=t.leftPoints;r.rightPoints=t.rightPoints;
r.count=t.count}function m(r,t){t=g(t);r.mid=t.mid;r.left=t.left;r.right=t.right;r.leftPoints=t.leftPoints;r.rightPoints=t.rightPoints;r.count=t.count}function f(r,t){var w=r.intervals([]);t=w.indexOf(t);if(0>t)return 0;w.splice(t,1);m(r,w);return 1}function b(r,t,w){for(var x=0;x<r.length&&r[x][0]<=t;++x){var y=w(r[x]);if(y)return y}}function k(r,t,w){for(var x=r.length-1;0<=x&&r[x][1]>=t;--x){var y=w(r[x]);if(y)return y}}function e(r,t){for(var w=0;w<r.length;++w){var x=t(r[w]);if(x)return x}}function h(r,
t){return r-t}function l(r,t){var w=r[0]-t[0];return w?w:r[1]-t[1]}function c(r,t){var w=r[1]-t[1];return w?w:r[0]-t[0]}function g(r){if(0===r.length)return null;for(var t=[],w=0;w<r.length;++w)t.push(r[w][0],r[w][1]);t.sort(h);t=t[t.length>>1];var x=[],y=[],A=[];for(w=0;w<r.length;++w){var z=r[w];z[1]<t?x.push(z):t<z[0]?y.push(z):A.push(z)}r=A.slice();A.sort(l);r.sort(c);return new q(t,g(x),g(y),A,r)}function d(r){this.root=r}var p=a("binary-search-bounds");G.exports=function(r){return r&&0!==r.length?
new d(g(r)):new d(null)};a=q.prototype;a.intervals=function(r){r.push.apply(r,this.leftPoints);this.left&&this.left.intervals(r);this.right&&this.right.intervals(r);return r};a.insert=function(r){var t=this.count-this.leftPoints.length;this.count+=1;if(r[1]<this.mid)this.left?4*(this.left.count+1)>3*(t+1)?(t=this.intervals([]),t.push(r),m(this,t)):this.left.insert(r):this.left=g([r]);else if(r[0]>this.mid)this.right?4*(this.right.count+1)>3*(t+1)?(t=this.intervals([]),t.push(r),m(this,t)):this.right.insert(r):
this.right=g([r]);else{t=p.ge(this.leftPoints,r,l);var w=p.ge(this.rightPoints,r,c);this.leftPoints.splice(t,0,r);this.rightPoints.splice(w,0,r)}};a.remove=function(r){var t=this.count-this.leftPoints;if(r[1]<this.mid){if(!this.left)return 0;if(4*(this.right?this.right.count:0)>3*(t-1))return f(this,r);t=this.left.remove(r);if(2===t)return this.left=null,--this.count,1;1===t&&--this.count;return t}if(r[0]>this.mid){if(!this.right)return 0;if(4*(this.left?this.left.count:0)>3*(t-1))return f(this,r);
t=this.right.remove(r);if(2===t)return this.right=null,--this.count,1;1===t&&--this.count;return t}if(1===this.count)return this.leftPoints[0]===r?2:0;if(1===this.leftPoints.length&&this.leftPoints[0]===r){if(this.left&&this.right){r=this;for(var w=this.left;w.right;)r=w,w=w.right;if(r===this)w.right=this.right;else{var x=this.left;t=this.right;r.count-=w.count;r.right=w.left;w.left=x;w.right=t}n(this,w);this.count=(this.left?this.left.count:0)+(this.right?this.right.count:0)+this.leftPoints.length}else this.left?
n(this,this.left):n(this,this.right);return 1}for(x=p.ge(this.leftPoints,r,l);x<this.leftPoints.length&&this.leftPoints[x][0]===r[0];++x)if(this.leftPoints[x]===r)for(--this.count,this.leftPoints.splice(x,1),t=p.ge(this.rightPoints,r,c);t<this.rightPoints.length&&this.rightPoints[t][1]===r[1];++t)if(this.rightPoints[t]===r)return this.rightPoints.splice(t,1),1;return 0};a.queryPoint=function(r,t){if(r<this.mid){if(this.left){var w=this.left.queryPoint(r,t);if(w)return w}return b(this.leftPoints,r,
t)}return r>this.mid?this.right&&(w=this.right.queryPoint(r,t))?w:k(this.rightPoints,r,t):e(this.leftPoints,t)};a.queryInterval=function(r,t,w){if(r<this.mid&&this.left){var x=this.left.queryInterval(r,t,w);if(x)return x}return t>this.mid&&this.right&&(x=this.right.queryInterval(r,t,w))?x:t<this.mid?b(this.leftPoints,t,w):r>this.mid?k(this.rightPoints,r,w):e(this.leftPoints,w)};a=d.prototype;a.insert=function(r){this.root?this.root.insert(r):this.root=new q(r[0],null,null,[r],[r])};a.remove=function(r){return this.root?
(r=this.root.remove(r),2===r&&(this.root=null),0!==r):!1};a.queryPoint=function(r,t){if(this.root)return this.root.queryPoint(r,t)};a.queryInterval=function(r,t,w){if(r<=t&&this.root)return this.root.queryInterval(r,t,w)};Object.defineProperty(a,"count",{get:function(){return this.root?this.root.count:0}});Object.defineProperty(a,"intervals",{get:function(){return this.root?this.root.intervals([]):[]}})},{"binary-search-bounds":435}],435:[function(a,G,C){arguments[4][243][0].apply(C,arguments)},{dup:243}],
436:[function(a,G,C){G.exports=function(q,n){n=n||Array(q.length);for(var m=0;m<q.length;++m)n[q[m]]=m;return n}},{}],437:[function(a,G,C){G.exports=function(q){for(var n=Array(q),m=0;m<q;++m)n[m]=m;return n}},{}],438:[function(a,G,C){G.exports=!0},{}],439:[function(a,G,C){function q(n){return!!n.constructor&&"function"===typeof n.constructor.isBuffer&&n.constructor.isBuffer(n)}G.exports=function(n){return null!=n&&(q(n)||"function"===typeof n.readFloatLE&&"function"===typeof n.slice&&q(n.slice(0,
0))||!!n._isBuffer)}},{}],440:[function(a,G,C){G.exports="undefined"!==typeof navigator&&(/MSIE/.test(navigator.userAgent)||/Trident\//.test(navigator.appVersion))},{}],441:[function(a,G,C){function q(f){f||(f={});var b=f.ua;b||"undefined"===typeof navigator||(b=navigator.userAgent);b&&b.headers&&"string"===typeof b.headers["user-agent"]&&(b=b.headers["user-agent"]);if("string"!==typeof b)return!1;var k=f.tablet?m.test(b):n.test(b);!k&&f.tablet&&f.featureDetect&&navigator&&1<navigator.maxTouchPoints&&
-1!==b.indexOf("Macintosh")&&-1!==b.indexOf("Safari")&&(k=!0);return k}G.exports=q;G.exports.isMobile=q;G.exports.default=q;var n=/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series[46]0|symbian|treo|up\.(browser|link)|vodafone|wap|windows (ce|phone)|xda|xiino/i,m=/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series[46]0|symbian|treo|up\.(browser|link)|vodafone|wap|windows (ce|phone)|xda|xiino|android|ipad|playbook|silk/i},
{}],442:[function(a,G,C){G.exports=function(q){var n=typeof q;return null!==q&&("object"===n||"function"===n)}},{}],443:[function(a,G,C){var q=Object.prototype.toString;G.exports=function(n){var m;return"[object Object]"===q.call(n)&&(m=Object.getPrototypeOf(n),null===m||m===Object.getPrototypeOf({}))}},{}],444:[function(a,G,C){G.exports=function(q){for(var n=q.length,m,f=0;f<n;f++)if(m=q.charCodeAt(f),(9>m||13<m)&&32!==m&&133!==m&&160!==m&&5760!==m&&6158!==m&&(8192>m||8205<m)&&8232!==m&&8233!==m&&
8239!==m&&8287!==m&&8288!==m&&12288!==m&&65279!==m)return!1;return!0}},{}],445:[function(a,G,C){G.exports=function(q){if("string"!==typeof q)return!1;q=q.trim();return/^[mzlhvcsqta]\s*[-+.0-9][^mlhvzcsqta]+/i.test(q)&&/[\dz]$/i.test(q)&&4<q.length?!0:!1}},{}],446:[function(a,G,C){G.exports=function(q,n,m){return q*(1-m)+n*m}},{}],447:[function(a,G,C){(function(q,n){"object"===typeof C&&"undefined"!==typeof G?G.exports=n():(q=q||self,q.mapboxgl=n())})(this,function(){function q(b,k){if(n)if(m){b="var sharedChunk \x3d {}; ("+
n+")(sharedChunk); ("+m+")(sharedChunk);";var e={};n(e);f=k(e);f.workerUrl=window.URL.createObjectURL(new Blob([b],{type:"text/javascript"}))}else m=k;else n=k}var n,m,f;q(["exports"],function(b){function k(v,H){return v(H={exports:{}},H.exports),H.exports}function e(v,H,P,ia){this.cx=3*v;this.bx=3*(P-v)-this.cx;this.ax=1-this.cx-this.bx;this.cy=3*H;this.by=3*(ia-H)-this.cy;this.ay=1-this.cy-this.by;this.p1x=v;this.p1y=ia;this.p2x=P;this.p2y=ia}function h(v,H){this.x=v;this.y=H}function l(v,H,P,ia){var xa=
new ve(v,H,P,ia);return function(Aa){return xa.solve(Aa)}}function c(v,H,P){return Math.min(P,Math.max(H,v))}function g(v,H,P){var ia=P-H;v=((v-H)%ia+ia)%ia+H;return v===H?P:v}function d(v){for(var H=[],P=arguments.length-1;0<P--;)H[P]=arguments[P+1];for(P=0;P<H.length;P+=1){var ia=H[P],xa;for(xa in ia)v[xa]=ia[xa]}return v}function p(){return function P(H){return H?(H^16*Math.random()>>H/4).toString(16):"10000000-1000-4000-8000-100000000000".replace(/[018]/g,P)}()}function r(v){return!!v&&/^[0-9a-f]{8}-[0-9a-f]{4}-[4][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}$/i.test(v)}
function t(v,H){v.forEach(function(P){H[P]&&(H[P]=H[P].bind(H))})}function w(v,H){return-1!==v.indexOf(H,v.length-H.length)}function x(v,H,P){var ia={},xa;for(xa in v)ia[xa]=H.call(P||this,v[xa],xa,v);return ia}function y(v,H,P){var ia={},xa;for(xa in v)H.call(P||this,v[xa],xa,v)&&(ia[xa]=v[xa]);return ia}function A(v){return Array.isArray(v)?v.map(A):"object"==typeof v&&v?x(v,A):v}function z(v){kf[v]||("undefined"!=typeof console&&console.warn(v),kf[v]=!0)}function F(v,H,P){return(P.y-v.y)*(H.x-
v.x)>(H.y-v.y)*(P.x-v.x)}function D(){return"undefined"!=typeof WorkerGlobalScope&&"undefined"!=typeof self&&self instanceof WorkerGlobalScope}function u(v){var H={};if(v.replace(/(?:^|(?:\s*,\s*))([^\x00-\x20\(\)<>@,;:\\"\/\[\]\?=\{\}\x7F]+)(?:=(?:([^\x00-\x20\(\)<>@,;:\\"\/\[\]\?=\{\}\x7F]+)|(?:"((?:[^"\\]|\\.)*)")))?/g,function(P,ia,xa,Aa){P=xa||Aa;return H[ia]=!P||P.toLowerCase(),""}),H["max-age"])v=parseInt(H["max-age"],10),isNaN(v)?delete H["max-age"]:H["max-age"]=v;return H}function B(v){if(null==
of){var H=v.navigator?v.navigator.userAgent:null;of=!!v.safari||!(!H||!(/\b(iPad|iPhone|iPod)\b/.test(H)||H.match("Safari")&&!H.match("Chrome")))}return of}function I(v){try{var H=self[v];return H.setItem("_mapbox_test_",1),H.removeItem("_mapbox_test_"),!0}catch(P){return!1}}function J(v){var H=v.createTexture();v.bindTexture(v.TEXTURE_2D,H);try{if(v.texImage2D(v.TEXTURE_2D,0,v.RGBA,v.RGBA,v.UNSIGNED_BYTE,Gf),v.isContextLost())return;ng.supported=!0}catch(P){}v.deleteTexture(H);Yf=!0}function N(v){return 0===
v.indexOf("mapbox:")}function M(v){v=v.match(Jk);if(!v)throw Error("Unable to parse URL object");return{protocol:v[1],authority:v[2],path:v[3]||"/",params:v[4]?v[4].split("\x26"):[]}}function E(v){var H=v.params.length?"?"+v.params.join("\x26"):"";return v.protocol+"://"+v.authority+v.path+H}function L(v){if(!v)return null;v=v.split(".");if(!v||3!==v.length)return null;try{return JSON.parse(decodeURIComponent(self.atob(v[1]).split("").map(function(H){return"%"+("00"+H.charCodeAt(0).toString(16)).slice(-2)}).join("")))}catch(H){return null}}
function Q(){self.caches&&!Vf&&(Vf=self.caches.open("mapbox-tiles"))}function S(v){var H=v.indexOf("?");return 0>H?v:v.slice(0,H)}function R(){return null==Z&&(Z=self.OffscreenCanvas&&(new self.OffscreenCanvas(1,1)).getContext("2d")&&"function"==typeof self.createImageBitmap),Z}function O(v,H,P){P[v]&&-1!==P[v].indexOf(H)||(P[v]=P[v]||[],P[v].push(H))}function T(v,H,P){P&&P[v]&&(H=P[v].indexOf(H),-1!==H&&P[v].splice(H,1))}function V(v){var H=v.value;return H?[new fc(v.key,H,"constants have been deprecated as of v8")]:
[]}function X(v){for(var H=[],P=arguments.length-1;0<P--;)H[P]=arguments[P+1];for(P=0;P<H.length;P+=1){var ia=H[P],xa;for(xa in ia)v[xa]=ia[xa]}return v}function ba(v){return v instanceof Number||v instanceof String||v instanceof Boolean?v.valueOf():v}function aa(v){if(Array.isArray(v))return v.map(aa);if(v instanceof Object&&!(v instanceof Number||v instanceof String||v instanceof Boolean)){var H={},P;for(P in v)H[P]=aa(v[P]);return H}return ba(v)}function ka(v,H){return{kind:"array",itemType:v,
N:H}}function ha(v){if("array"===v.kind){var H=ha(v.itemType);return"number"==typeof v.N?"array\x3c"+H+", "+v.N+"\x3e":"value"===v.itemType.kind?"array":"array\x3c"+H+"\x3e"}return v.kind}function ca(v,H){if("error"===H.kind)return null;if("array"===v.kind){if("array"===H.kind&&(0===H.N&&"value"===H.itemType.kind||!ca(v.itemType,H.itemType))&&("number"!=typeof v.N||v.N===H.N))return null}else{if(v.kind===H.kind)return null;if("value"===v.kind)for(var P=0,ia=Re;P<ia.length;P+=1)if(!ca(ia[P],H))return null}return"Expected "+
ha(v)+" but found "+ha(H)+" instead."}function sa(v,H){return H.some(function(P){return P.kind===v.kind})}function ma(v,H){return H.some(function(P){return"null"===P?null===v:"array"===P?Array.isArray(v):"object"===P?v&&!Array.isArray(v)&&"object"==typeof v:P===typeof v})}function ra(v,H,P,ia){return"number"==typeof v&&0<=v&&255>=v&&"number"==typeof H&&0<=H&&255>=H&&"number"==typeof P&&0<=P&&255>=P?void 0===ia||"number"==typeof ia&&0<=ia&&1>=ia?null:"Invalid rgba value ["+[v,H,P,ia].join(", ")+"]: 'a' must be between 0 and 1.":
"Invalid rgba value ["+("number"==typeof ia?[v,H,P,ia]:[v,H,P]).join(", ")+"]: 'r', 'g', and 'b' must be between 0 and 255."}function qa(v){if(null===v||"string"==typeof v||"boolean"==typeof v||"number"==typeof v||v instanceof he||v instanceof ef||v instanceof Ae||v instanceof $e)return!0;if(Array.isArray(v)){for(var H=0;H<v.length;H+=1)if(!qa(v[H]))return!1;return!0}if("object"==typeof v){for(H in v)if(!qa(v[H]))return!1;return!0}return!1}function Y(v){if(null===v)return nd;if("string"==typeof v)return vd;
if("boolean"==typeof v)return Ad;if("number"==typeof v)return Nc;if(v instanceof he)return le;if(v instanceof ef)return fe;if(v instanceof Ae)return ue;if(v instanceof $e)return Ee;if(Array.isArray(v)){for(var H,P=v.length,ia=0;ia<v.length;ia+=1){var xa=Y(v[ia]);if(H){if(H===xa)continue;H=Sd;break}H=xa}return ka(H||Sd,P)}return Ud}function pa(v){var H=typeof v;return null===v?"":"string"===H||"number"===H||"boolean"===H?String(v):v instanceof he||v instanceof Ae||v instanceof $e?v.toString():JSON.stringify(v)}
function oa(v,H){v[0]=Math.min(v[0],H[0]);v[1]=Math.min(v[1],H[1]);v[2]=Math.max(v[2],H[0]);v[3]=Math.max(v[3],H[1])}function ua(v,H){return!(v[0]<=H[0]||v[2]>=H[2]||v[1]<=H[1]||v[3]>=H[3])}function ya(v,H){for(var P,ia,xa,Aa,Ra,bb,ob,sb=!1,Hb=0,Vb=H.length;Hb<Vb;Hb++)for(var jc=H[Hb],ec=0,Nb=jc.length;ec<Nb-1;ec++){if(0==(Aa=(P=v)[0]-(ia=jc[ec])[0])*(ob=P[1]-(xa=jc[ec+1])[1])-(bb=P[0]-xa[0])*(Ra=P[1]-ia[1])&&0>=Aa*bb&&0>=Ra*ob)return!1;var Mb=jc[ec],ac=jc[ec+1];Mb[1]>v[1]!=ac[1]>v[1]&&v[0]<(ac[0]-
Mb[0])*(v[1]-Mb[1])/(ac[1]-Mb[1])+Mb[0]&&(sb=!sb)}return sb}function ja(v,H,P,ia){var xa=ia[0]-P[0];ia=ia[1]-P[1];v=(v[0]-P[0])*ia-xa*(v[1]-P[1]);H=(H[0]-P[0])*ia-xa*(H[1]-P[1]);return 0<v&&0>H||0>v&&0<H}function za(v,H){for(var P=0;P<v.length;++P)if(!ya(v[P],H))return!1;for(P=0;P<v.length-1;++P){var ia;a:{for(var xa=ia=void 0,Aa=void 0,Ra=void 0,bb=void 0,ob=void 0,sb=v[P],Hb=v[P+1],Vb=0,jc=H;Vb<jc.length;Vb+=1)for(var ec=jc[Vb],Nb=0;Nb<ec.length-1;++Nb)if(0!=(xa=[(Aa=ec[Nb+1])[0]-(Ra=ec[Nb])[0],
Aa[1]-Ra[1]])[0]*(ia=[(bb=Hb)[0]-(ob=sb)[0],bb[1]-ob[1]])[1]-xa[1]*ia[0]&&ja(ob,bb,Ra,Aa)&&ja(Ra,Aa,ob,bb)){ia=!0;break a}ia=!1}if(ia)return!1}return!0}function Ba(v,H,P){for(var ia=[],xa=0;xa<v.length;xa++){for(var Aa=[],Ra=0;Ra<v[xa].length;Ra++){var bb=v[xa][Ra];var ob=Math.pow(2,P.z);bb=[Math.round((180+bb[0])/360*ob*8192),Math.round((180-180/Math.PI*Math.log(Math.tan(Math.PI/4+bb[1]*Math.PI/360)))/360*ob*8192)];oa(H,bb);Aa.push(bb)}ia.push(Aa)}return ia}function Ma(v,H,P){for(var ia=[],xa=0;xa<
v.length;xa++){var Aa=Ba(v[xa],H,P);ia.push(Aa)}return ia}function Oa(v,H,P,ia){if(v[0]<P[0]||v[0]>P[2]){var xa=.5*ia,Aa=v[0]-P[0]>xa?-ia:P[0]-v[0]>xa?ia:0;0===Aa&&(Aa=v[0]-P[2]>xa?-ia:P[2]-v[0]>xa?ia:0);v[0]+=Aa}oa(H,v)}function Ia(v,H,P,ia){var xa=8192*Math.pow(2,ia.z);ia=[8192*ia.x,8192*ia.y];for(var Aa=[],Ra=0;Ra<v.length;Ra+=1)for(var bb=0,ob=v[Ra];bb<ob.length;bb+=1){var sb=ob[bb];sb=[sb.x+ia[0],sb.y+ia[1]];Oa(sb,H,P,xa);Aa.push(sb)}return Aa}function Pa(v,H,P,ia){var xa=8192*Math.pow(2,ia.z),
Aa=[8192*ia.x,8192*ia.y];ia=[];for(var Ra=0;Ra<v.length;Ra+=1){for(var bb=[],ob=0,sb=v[Ra];ob<sb.length;ob+=1){var Hb=sb[ob];Hb=[Hb.x+Aa[0],Hb.y+Aa[1]];oa(H,Hb);bb.push(Hb)}ia.push(bb)}if(H[2]-H[0]<=xa/2)for(H[0]=H[1]=1/0,H[2]=H[3]=-1/0,v=0;v<ia.length;v+=1)for(Aa=0,Ra=ia[v];Aa<Ra.length;Aa+=1)Oa(Ra[Aa],H,P,xa);return ia}function Fa(v){if(v instanceof Zf&&("get"===v.name&&1===v.args.length||"feature-state"===v.name||"has"===v.name&&1===v.args.length||"properties"===v.name||"geometry-type"===v.name||
"id"===v.name||/^filter-/.test(v.name))||v instanceof Tf)return!1;var H=!0;return v.eachChild(function(P){H&&!Fa(P)&&(H=!1)}),H}function Na(v){if(v instanceof Zf&&"feature-state"===v.name)return!1;var H=!0;return v.eachChild(function(P){H&&!Na(P)&&(H=!1)}),H}function $a(v,H){if(v instanceof Zf&&0<=H.indexOf(v.name))return!1;var P=!0;return v.eachChild(function(ia){P&&!$a(ia,H)&&(P=!1)}),P}function cb(v,H){for(var P,ia=v.length-1,xa=0,Aa=ia,Ra;xa<=Aa;)if((P=v[Ra=Math.floor((xa+Aa)/2)])<=H){if(Ra===
ia||H<v[Ra+1])return Ra;xa=Ra+1}else{if(!(P>H))throw new nf("Input is not a number.");Aa=Ra-1}return 0}function mb(v,H,P){return v*(1-P)+H*P}function Ka(v){return.008856451679035631<v?Math.pow(v,1/3):v/fj+4/29}function Ua(v){return v>6/29?v*v*v:fj*(v-4/29)}function Ea(v){return 255*(.0031308>=v?12.92*v:1.055*Math.pow(v,1/2.4)-.055)}function Ya(v){return.04045>=(v/=255)?v/12.92:Math.pow((v+.055)/1.055,2.4)}function ab(v){var H=Ya(v.r),P=Ya(v.g),ia=Ya(v.b),xa=Ka((.4124564*H+.3575761*P+.1804375*ia)/
.95047),Aa=Ka(.2126729*H+.7151522*P+.072175*ia);return{l:116*Aa-16,a:500*(xa-Aa),b:200*(Aa-Ka((.0193339*H+.119192*P+.9503041*ia)/1.08883)),alpha:v.a}}function Wa(v){var H=(v.l+16)/116,P=isNaN(v.a)?H:H+v.a/500,ia=isNaN(v.b)?H:H-v.b/200;return H=1*Ua(H),P=.95047*Ua(P),ia=1.08883*Ua(ia),new he(Ea(3.2404542*P-1.5371385*H-.4985314*ia),Ea(-.969266*P+1.8760108*H+.041556*ia),Ea(.0556434*P-.2040259*H+1.0572252*ia),v.alpha)}function Ja(v,H,P,ia){ia-=P;v-=P;return 0===ia?0:1===H?v/ia:(Math.pow(H,v)-1)/(Math.pow(H,
ia)-1)}function Sa(v,H){return"\x3d\x3d"===v||"!\x3d"===v?"boolean"===H.kind||"string"===H.kind||"number"===H.kind||"null"===H.kind||"value"===H.kind:"string"===H.kind||"number"===H.kind||"value"===H.kind}function fb(v,H,P,ia){return 0===ia.compare(H,P)}function nb(v,H,P){var ia="\x3d\x3d"!==v&&"!\x3d"!==v;return function(){function xa(Aa,Ra,bb){this.type=Ad;this.lhs=Aa;this.rhs=Ra;this.collator=bb;this.hasUntypedArgument="value"===Aa.type.kind||"value"===Ra.type.kind}return xa.parse=function(Aa,
Ra){if(3!==Aa.length&&4!==Aa.length)return Ra.error("Expected two or three arguments.");var bb=Aa[0],ob=Ra.parse(Aa[1],1,Sd);if(!ob)return null;if(!Sa(bb,ob.type))return Ra.concat(1).error('"'+bb+"\" comparisons are not supported for type '"+ha(ob.type)+"'.");var sb=Ra.parse(Aa[2],2,Sd);if(!sb)return null;if(!Sa(bb,sb.type))return Ra.concat(2).error('"'+bb+"\" comparisons are not supported for type '"+ha(sb.type)+"'.");if(ob.type.kind!==sb.type.kind&&"value"!==ob.type.kind&&"value"!==sb.type.kind)return Ra.error("Cannot compare types '"+
ha(ob.type)+"' and '"+ha(sb.type)+"'.");ia&&("value"===ob.type.kind&&"value"!==sb.type.kind?ob=new sg(sb.type,[ob]):"value"!==ob.type.kind&&"value"===sb.type.kind&&(sb=new sg(ob.type,[sb])));bb=null;if(4===Aa.length){if("string"!==ob.type.kind&&"string"!==sb.type.kind&&"value"!==ob.type.kind&&"value"!==sb.type.kind)return Ra.error("Cannot use collator to compare non-string types.");if(!(bb=Ra.parse(Aa[3],3,fe)))return null}return new xa(ob,sb,bb)},xa.prototype.evaluate=function(Aa){var Ra=this.lhs.evaluate(Aa),
bb=this.rhs.evaluate(Aa);if(ia&&this.hasUntypedArgument){var ob=Y(Ra),sb=Y(bb);if(ob.kind!==sb.kind||"string"!==ob.kind&&"number"!==ob.kind)throw new nf('Expected arguments for "'+v+'" to be (string, string) or (number, number), but found ('+ob.kind+", "+sb.kind+") instead.");}return this.collator&&!ia&&this.hasUntypedArgument&&(ob=Y(Ra),sb=Y(bb),"string"!==ob.kind||"string"!==sb.kind)?H(Aa,Ra,bb):this.collator?P(Aa,Ra,bb,this.collator.evaluate(Aa)):H(Aa,Ra,bb)},xa.prototype.eachChild=function(Aa){Aa(this.lhs);
Aa(this.rhs);this.collator&&Aa(this.collator)},xa.prototype.outputDefined=function(){return!0},xa.prototype.serialize=function(){var Aa=[v];return this.eachChild(function(Ra){Aa.push(Ra.serialize())}),Aa},xa}()}function Ha(v,H){var P=H[0],ia=H[1],xa=H[2];H=H[3];P=P.evaluate(v);ia=ia.evaluate(v);xa=xa.evaluate(v);v=H?H.evaluate(v):1;if(H=ra(P,ia,xa,v))throw new nf(H);return new he(P/255*v,ia/255*v,xa/255*v,v)}function Ca(v,H){v=H[v];return void 0===v?null:v}function Qa(v){return{result:"error",value:v}}
function gb(v){return"data-driven"===v["property-type"]||"cross-faded-data-driven"===v["property-type"]}function Va(v){return!!v.expression&&-1<v.expression.parameters.indexOf("zoom")}function db(v){return!!v.expression&&v.expression.interpolated}function qb(v){return v instanceof Number?"number":v instanceof String?"string":v instanceof Boolean?"boolean":Array.isArray(v)?"array":null===v?"null":typeof v}function Kb(v){return"object"==typeof v&&null!==v&&!Array.isArray(v)}function Ob(v){return v}
function cc(v,H,P){return void 0!==v?v:void 0!==H?H:void 0!==P?P:void 0}function kc(v,H,P,ia,xa){return cc(typeof P===xa?ia[P]:void 0,v.default,H.default)}function qc(v,H,P){if("number"!==qb(P))return cc(v.default,H.default);H=v.stops.length;if(1===H||P<=v.stops[0][0])return v.stops[0][1];if(P>=v.stops[H-1][0])return v.stops[H-1][1];P=cb(v.stops.map(function(ia){return ia[0]}),P);return v.stops[P][1]}function Pc(v,H,P){var ia=void 0!==v.base?v.base:1;if("number"!==qb(P))return cc(v.default,H.default);
var xa=v.stops.length;if(1===xa||P<=v.stops[0][0])return v.stops[0][1];if(P>=v.stops[xa-1][0])return v.stops[xa-1][1];xa=cb(v.stops.map(function(Hb){return Hb[0]}),P);var Aa=function(Hb,Vb,jc,ec){ec-=jc;Hb-=jc;return 0===ec?0:1===Vb?Hb/ec:(Math.pow(Vb,Hb)-1)/(Math.pow(Vb,ec)-1)}(P,ia,v.stops[xa][0],v.stops[xa+1][0]),Ra=v.stops[xa][1],bb=v.stops[xa+1][1],ob=ah[H.type]||Ob;if(v.colorSpace&&"rgb"!==v.colorSpace){var sb=yg[v.colorSpace];ob=function(Hb,Vb){return sb.reverse(sb.interpolate(sb.forward(Hb),
sb.forward(Vb),Aa))}}return"function"==typeof Ra.evaluate?{evaluate:function(){for(var Hb=[],Vb=arguments.length;Vb--;)Hb[Vb]=arguments[Vb];Vb=Ra.evaluate.apply(void 0,Hb);Hb=bb.evaluate.apply(void 0,Hb);if(void 0!==Vb&&void 0!==Hb)return ob(Vb,Hb,Aa)}}:ob(Ra,bb,Aa)}function Qc(v,H,P){return"color"===H.type?P=he.parse(P):"formatted"===H.type?P=Ae.fromString(P.toString()):"resolvedImage"===H.type?P=$e.fromString(P.toString()):qb(P)===H.type||"enum"===H.type&&H.values[P]||(P=void 0),cc(P,v.default,
H.default)}function cd(v){return Array.isArray(v)&&0<v.length&&"string"==typeof v[0]&&v[0]in mh}function gd(v,H){var P=kg;if(H){var ia={color:le,string:vd,number:Nc,enum:vd,boolean:Ad,formatted:ue,resolvedImage:Ee};ia="array"===H.type?ka(ia[H.value]||Sd,H.length):ia[H.type]}else ia=void 0;P=new P(mh,[],ia);return(v=P.parse(v,void 0,void 0,void 0,H&&"string"===H.type?{typeAnnotation:"coerce"}:void 0))?{result:"success",value:new nh(v,H)}:Qa(P.errors)}function kd(v,H){if("error"===(v=gd(v,H)).result)return v;
var P=v.value.expression,ia=Fa(P);if(!ia&&!gb(H))return Qa([new Cc("","data expressions not supported")]);var xa=$a(P,["zoom"]);return xa||Va(H)?(P=function bb(Ra){var ob=null;if(Ra instanceof Pi)ob=bb(Ra.result);else if(Ra instanceof Qi)for(var sb=0,Hb=Ra.args;sb<Hb.length&&!(ob=bb(Hb[sb]));sb+=1);else(Ra instanceof Gh||Ra instanceof dg)&&Ra.input instanceof Zf&&"zoom"===Ra.input.name&&(ob=Ra);return ob instanceof Cc||Ra.eachChild(function(Vb){Vb=bb(Vb);Vb instanceof Cc?ob=Vb:!ob&&Vb?ob=new Cc("",
'"zoom" expression may only be used as input to a top-level "step" or "interpolate" expression.'):ob&&Vb&&ob!==Vb&&(ob=new Cc("",'Only one zoom-based "step" or "interpolate" subexpression may be used in an expression.'))}),ob}(P))||xa?P instanceof Cc?Qa([P]):P instanceof dg&&!db(H)?Qa([new Cc("",'"interpolate" expressions cannot be used with this property')]):{result:"success",value:P?new Ce(ia?"camera":"composite",v.value,P.labels,P instanceof dg?P.interpolation:void 0):new lh(ia?"constant":"source",
v.value)}:Qa([new Cc("",'"zoom" expression may only be used as input to a top-level "step" or "interpolate" expression.')]):Qa([new Cc("","zoom expressions not supported")])}function Cb(v){var H=v.key,P=v.value,ia=v.valueSpec||{},xa=v.objectElementValidators||{},Aa=v.style;v=v.styleSpec;var Ra=[],bb=qb(P);if("object"!==bb)return[new fc(H,P,"object expected, "+bb+" found")];for(var ob in P){var sb=ob.split(".")[0];bb=ia[sb]||ia["*"];if(xa[sb])sb=xa[sb];else if(ia[sb])sb=Bc;else if(xa["*"])sb=xa["*"];
else{if(!ia["*"]){Ra.push(new fc(H,P[ob],'unknown property "'+ob+'"'));continue}sb=Bc}Ra=Ra.concat(sb({key:(H?H+".":H)+ob,value:P[ob],valueSpec:bb,style:Aa,styleSpec:v,object:P,objectKey:ob},P))}for(var Hb in ia)xa[Hb]||ia[Hb].required&&void 0===ia[Hb].default&&void 0===P[Hb]&&Ra.push(new fc(H,P,'missing required property "'+Hb+'"'));return Ra}function ic(v){var H=v.value,P=v.valueSpec,ia=v.style,xa=v.styleSpec,Aa=v.key;v=v.arrayElementValidator||Bc;if("array"!==qb(H))return[new fc(Aa,H,"array expected, "+
qb(H)+" found")];if(P.length&&H.length!==P.length)return[new fc(Aa,H,"array length "+P.length+" expected, length "+H.length+" found")];if(P["min-length"]&&H.length<P["min-length"])return[new fc(Aa,H,"array length at least "+P["min-length"]+" expected, length "+H.length+" found")];var Ra={type:P.value,values:P.values};7>xa.$version&&(Ra.function=P.function);"object"===qb(P.value)&&(Ra=P.value);P=[];for(var bb=0;bb<H.length;bb++)P=P.concat(v({array:H,arrayIndex:bb,value:H[bb],valueSpec:Ra,style:ia,
styleSpec:xa,key:Aa+"["+bb+"]"}));return P}function sc(v){var H=v.key,P=v.value;v=v.valueSpec;var ia=qb(P);return"number"===ia&&P!=P&&(ia="NaN"),"number"!==ia?[new fc(H,P,"number expected, "+ia+" found")]:"minimum"in v&&P<v.minimum?[new fc(H,P,P+" is less than the minimum value "+v.minimum)]:"maximum"in v&&P>v.maximum?[new fc(H,P,P+" is greater than the maximum value "+v.maximum)]:[]}function wb(v){function H(ec){var Nb=[],Mb=ec.value,ac=ec.key;if("array"!==qb(Mb))return[new fc(ac,Mb,"array expected, "+
qb(Mb)+" found")];if(2!==Mb.length)return[new fc(ac,Mb,"array length 2 expected, length "+Mb.length+" found")];if(Vb){if("object"!==qb(Mb[0]))return[new fc(ac,Mb,"object expected, "+qb(Mb[0])+" found")];if(void 0===Mb[0].zoom)return[new fc(ac,Mb,"object stop key must have zoom")];if(void 0===Mb[0].value)return[new fc(ac,Mb,"object stop key must have value")];if(Aa&&Aa>ba(Mb[0].zoom))return[new fc(ac,Mb[0].zoom,"stop zoom values must appear in ascending order")];ba(Mb[0].zoom)!==Aa&&(Aa=ba(Mb[0].zoom),
xa=void 0,ob={});Nb=Nb.concat(Cb({key:ac+"[0]",value:Mb[0],valueSpec:{zoom:{}},style:ec.style,styleSpec:ec.styleSpec,objectElementValidators:{zoom:sc,value:P}}))}else Nb=Nb.concat(P({key:ac+"[0]",value:Mb[0],valueSpec:{},style:ec.style,styleSpec:ec.styleSpec},Mb));return cd(aa(Mb[1]))?Nb.concat([new fc(ac+"[1]",Mb[1],"expressions are not allowed in function stops.")]):Nb.concat(Bc({key:ac+"[1]",value:Mb[1],valueSpec:Ra,style:ec.style,styleSpec:ec.styleSpec}))}function P(ec,Nb){var Mb=qb(ec.value),
ac=ba(ec.value);Nb=null!==ec.value?ec.value:Nb;if(ia){if(Mb!==ia)return[new fc(ec.key,Nb,Mb+" stop domain type must match previous stop domain type "+ia)]}else ia=Mb;return"number"!==Mb&&"string"!==Mb&&"boolean"!==Mb?[new fc(ec.key,Nb,"stop domain value must be a number, string, or boolean")]:"number"!==Mb&&"categorical"!==bb?(Mb="number expected, "+Mb+" found",gb(Ra)&&void 0===bb&&(Mb+='\nIf you intended to use a categorical function, specify `"type": "categorical"`.'),[new fc(ec.key,Nb,Mb)]):"categorical"!==
bb||"number"!==Mb||isFinite(ac)&&Math.floor(ac)===ac?"categorical"!==bb&&"number"===Mb&&void 0!==xa&&ac<xa?[new fc(ec.key,Nb,"stop domain values must appear in ascending order")]:(xa=ac,"categorical"===bb&&ac in ob?[new fc(ec.key,Nb,"stop domain values must be unique")]:(ob[ac]=!0,[])):[new fc(ec.key,Nb,"integer expected, found "+ac)]}var ia,xa,Aa,Ra=v.valueSpec,bb=ba(v.value.type),ob={},sb="categorical"!==bb&&void 0===v.value.property,Hb=!sb,Vb="array"===qb(v.value.stops)&&"array"===qb(v.value.stops[0])&&
"object"===qb(v.value.stops[0][0]),jc=Cb({key:v.key,value:v.value,valueSpec:v.styleSpec.function,style:v.style,styleSpec:v.styleSpec,objectElementValidators:{stops:function(ec){if("identity"===bb)return[new fc(ec.key,ec.value,'identity function may not have a "stops" property')];var Nb=[],Mb=ec.value;return Nb=Nb.concat(ic({key:ec.key,value:Mb,valueSpec:ec.valueSpec,style:ec.style,styleSpec:ec.styleSpec,arrayElementValidator:H})),"array"===qb(Mb)&&0===Mb.length&&Nb.push(new fc(ec.key,Mb,"array must have at least one stop")),
Nb},default:function(ec){return Bc({key:ec.key,value:ec.value,valueSpec:Ra,style:ec.style,styleSpec:ec.styleSpec})}}});return"identity"===bb&&sb&&jc.push(new fc(v.key,v.value,'missing required property "property"')),"identity"===bb||v.value.stops||jc.push(new fc(v.key,v.value,'missing required property "stops"')),"exponential"===bb&&v.valueSpec.expression&&!db(v.valueSpec)&&jc.push(new fc(v.key,v.value,"exponential functions not supported")),8<=v.styleSpec.$version&&(Hb&&!gb(v.valueSpec)?jc.push(new fc(v.key,
v.value,"property functions not supported")):sb&&!Va(v.valueSpec)&&jc.push(new fc(v.key,v.value,"zoom functions not supported"))),"categorical"!==bb&&!Vb||void 0!==v.value.property||jc.push(new fc(v.key,v.value,'"property" property is required')),jc}function zb(v){var H=("property"===v.expressionContext?kd:gd)(aa(v.value),v.valueSpec);if("error"===H.result)return H.value.map(function(P){return new fc(""+v.key+P.key,v.value,P.message)});H=H.value.expression||H.value._styleExpression.expression;if("property"===
v.expressionContext&&"text-font"===v.propertyKey&&!H.outputDefined())return[new fc(v.key,v.value,'Invalid data expression for "'+v.propertyKey+'". Output values must be contained as literals within the expression.')];if("property"===v.expressionContext&&"layout"===v.propertyType&&!Na(H))return[new fc(v.key,v.value,'"feature-state" data expressions are not supported with layout properties.')];if("filter"===v.expressionContext&&!Na(H))return[new fc(v.key,v.value,'"feature-state" data expressions are not supported with filters.')];
if(v.expressionContext&&0===v.expressionContext.indexOf("cluster")){if(!$a(H,["zoom","feature-state"]))return[new fc(v.key,v.value,'"zoom" and "feature-state" expressions are not supported with cluster properties.')];if("cluster-initial"===v.expressionContext&&!Fa(H))return[new fc(v.key,v.value,"Feature data expressions are not supported with initial expression part of cluster properties.")]}return[]}function Tb(v){var H=v.key,P=v.value;v=v.valueSpec;var ia=[];return Array.isArray(v.values)?-1===
v.values.indexOf(ba(P))&&ia.push(new fc(H,P,"expected one of ["+v.values.join(", ")+"], "+JSON.stringify(P)+" found")):-1===Object.keys(v.values).indexOf(ba(P))&&ia.push(new fc(H,P,"expected one of ["+Object.keys(v.values).join(", ")+"], "+JSON.stringify(P)+" found")),ia}function lb(v){if(!0===v||!1===v)return!0;if(!Array.isArray(v)||0===v.length)return!1;switch(v[0]){case "has":return 2<=v.length&&"$id"!==v[1]&&"$type"!==v[1];case "in":return 3<=v.length&&("string"!=typeof v[1]||Array.isArray(v[2]));
case "!in":case "!has":case "none":return!1;case "\x3d\x3d":case "!\x3d":case "\x3e":case "\x3e\x3d":case "\x3c":case "\x3c\x3d":return 3!==v.length||Array.isArray(v[1])||Array.isArray(v[2]);case "any":case "all":var H=0;for(v=v.slice(1);H<v.length;H+=1){var P=v[H];if(!lb(P)&&"boolean"!=typeof P)return!1}return!0;default:return!0}}function vb(v){if(null==v)return{filter:function(){return!0},needGeometry:!1};lb(v)||(v=Sb(v));var H=gd(v,ik);if("error"===H.result)throw Error(H.value.map(function(P){return P.key+
": "+P.message}).join(", "));return{filter:function(P,ia,xa){return H.value.evaluate(P,ia,{},xa)},needGeometry:function xa(ia){if(!Array.isArray(ia))return!1;if("within"===ia[0])return!0;for(var Aa=1;Aa<ia.length;Aa++)if(xa(ia[Aa]))return!0;return!1}(v)}}function Ub(v,H){return v<H?-1:v>H?1:0}function Sb(v){if(!v)return!0;var H,P=v[0];return 1>=v.length?"any"!==P:"\x3d\x3d"===P?Ab(v[1],v[2],"\x3d\x3d"):"!\x3d"===P?xb(Ab(v[1],v[2],"\x3d\x3d")):"\x3c"===P||"\x3e"===P||"\x3c\x3d"===P||"\x3e\x3d"===P?
Ab(v[1],v[2],P):"any"===P?(H=v.slice(1),["any"].concat(H.map(Sb))):"all"===P?["all"].concat(v.slice(1).map(Sb)):"none"===P?["all"].concat(v.slice(1).map(Sb).map(xb)):"in"===P?Eb(v[1],v.slice(2)):"!in"===P?xb(Eb(v[1],v.slice(2))):"has"===P?Fb(v[1]):"!has"===P?xb(Fb(v[1])):"within"!==P||v}function Ab(v,H,P){switch(v){case "$type":return["filter-type-"+P,H];case "$id":return["filter-id-"+P,H];default:return["filter-"+P,v,H]}}function Eb(v,H){if(0===H.length)return!1;switch(v){case "$type":return["filter-type-in",
["literal",H]];case "$id":return["filter-id-in",["literal",H]];default:return 200<H.length&&!H.some(function(P){return typeof P!=typeof H[0]})?["filter-in-large",v,["literal",H.sort(Ub)]]:["filter-in-small",v,["literal",H]]}}function Fb(v){switch(v){case "$type":return!0;case "$id":return["filter-has-id"];default:return["filter-has",v]}}function xb(v){return["!",v]}function Jb(v){return lb(aa(v.value))?zb(X({},v,{expressionContext:"filter",valueSpec:{value:"boolean"}})):function ia(P){var xa=P.value,
Aa=P.key;if("array"!==qb(xa))return[new fc(Aa,xa,"array expected, "+qb(xa)+" found")];var Ra,bb=P.styleSpec,ob=[];if(1>xa.length)return[new fc(Aa,xa,"filter array must have at least 1 element")];switch(ob=ob.concat(Tb({key:Aa+"[0]",value:xa[0],valueSpec:bb.filter_operator,style:P.style,styleSpec:P.styleSpec})),ba(xa[0])){case "\x3c":case "\x3c\x3d":case "\x3e":case "\x3e\x3d":2<=xa.length&&"$type"===ba(xa[1])&&ob.push(new fc(Aa,xa,'"$type" cannot be use with operator "'+xa[0]+'"'));case "\x3d\x3d":case "!\x3d":3!==
xa.length&&ob.push(new fc(Aa,xa,'filter array for operator "'+xa[0]+'" must have 3 elements'));case "in":case "!in":2<=xa.length&&"string"!==(Ra=qb(xa[1]))&&ob.push(new fc(Aa+"[1]",xa[1],"string expected, "+Ra+" found"));for(var sb=2;sb<xa.length;sb++)Ra=qb(xa[sb]),"$type"===ba(xa[1])?ob=ob.concat(Tb({key:Aa+"["+sb+"]",value:xa[sb],valueSpec:bb.geometry_type,style:P.style,styleSpec:P.styleSpec})):"string"!==Ra&&"number"!==Ra&&"boolean"!==Ra&&ob.push(new fc(Aa+"["+sb+"]",xa[sb],"string, number, or boolean expected, "+
Ra+" found"));break;case "any":case "all":case "none":for(Ra=1;Ra<xa.length;Ra++)ob=ob.concat(ia({key:Aa+"["+Ra+"]",value:xa[Ra],style:P.style,styleSpec:P.styleSpec}));break;case "has":case "!has":Ra=qb(xa[1]);2!==xa.length?ob.push(new fc(Aa,xa,'filter array for "'+xa[0]+'" operator must have 2 elements')):"string"!==Ra&&ob.push(new fc(Aa+"[1]",xa[1],"string expected, "+Ra+" found"));break;case "within":Ra=qb(xa[1]),2!==xa.length?ob.push(new fc(Aa,xa,'filter array for "'+xa[0]+'" operator must have 2 elements')):
"object"!==Ra&&ob.push(new fc(Aa+"[1]",xa[1],"object expected, "+Ra+" found"))}return ob}(v)}function tb(v,H){var P=v.key,ia=v.style,xa=v.styleSpec,Aa=v.value,Ra=v.objectKey,bb=xa[H+"_"+v.layerType];if(!bb)return[];var ob=Ra.match(/^(.*)-transition$/);if("paint"===H&&ob&&bb[ob[1]]&&bb[ob[1]].transition)return Bc({key:P,value:Aa,valueSpec:xa.transition,style:ia,styleSpec:xa});var sb;bb=v.valueSpec||bb[Ra];if(!bb)return[new fc(P,Aa,'unknown property "'+Ra+'"')];if("string"===qb(Aa)&&gb(bb)&&!bb.tokens&&
(sb=/^{([^}]+)}$/.exec(Aa)))return[new fc(P,Aa,'"'+Ra+'" does not support interpolation syntax\nUse an identity property function instead: `{ "type": "identity", "property": '+JSON.stringify(sb[1])+" }`.")];sb=[];return"symbol"===v.layerType&&("text-field"===Ra&&ia&&!ia.glyphs&&sb.push(new fc(P,Aa,'use of "text-field" requires a style "glyphs" property')),"text-font"===Ra&&Kb(aa(Aa))&&"identity"===ba(Aa.type)&&sb.push(new fc(P,Aa,'"text-font" does not support identity functions'))),sb.concat(Bc({key:v.key,
value:Aa,valueSpec:bb,style:ia,styleSpec:xa,expressionContext:"property",propertyType:H,propertyKey:Ra}))}function Lb(v){return tb(v,"paint")}function Ib(v){return tb(v,"layout")}function lc(v){var H=[],P=v.value,ia=v.key,xa=v.style,Aa=v.styleSpec;P.type||P.ref||H.push(new fc(ia,P,'either "type" or "ref" is required'));var Ra,bb=ba(P.type),ob=ba(P.ref);if(P.id)for(var sb=ba(P.id),Hb=0;Hb<v.arrayIndex;Hb++){var Vb=xa.layers[Hb];ba(Vb.id)===sb&&H.push(new fc(ia,P.id,'duplicate layer id "'+P.id+'", previously used at line '+
Vb.id.__line__))}"ref"in P?(["type","source","source-layer","filter","layout"].forEach(function(jc){jc in P&&H.push(new fc(ia,P[jc],'"'+jc+'" is prohibited for ref layers'))}),xa.layers.forEach(function(jc){ba(jc.id)===ob&&(Ra=jc)}),Ra?Ra.ref?H.push(new fc(ia,P.ref,"ref cannot reference another ref layer")):bb=ba(Ra.type):H.push(new fc(ia,P.ref,'ref layer "'+ob+'" not found'))):"background"!==bb&&(P.source?(sb=(xa=xa.sources&&xa.sources[P.source])&&ba(xa.type),xa?"vector"===sb&&"raster"===bb?H.push(new fc(ia,
P.source,'layer "'+P.id+'" requires a raster source')):"raster"===sb&&"raster"!==bb?H.push(new fc(ia,P.source,'layer "'+P.id+'" requires a vector source')):"vector"!==sb||P["source-layer"]?"raster-dem"===sb&&"hillshade"!==bb?H.push(new fc(ia,P.source,"raster-dem source can only be used with layer type 'hillshade'.")):"line"!==bb||!P.paint||!P.paint["line-gradient"]||"geojson"===sb&&xa.lineMetrics||H.push(new fc(ia,P,'layer "'+P.id+'" specifies a line-gradient, which requires a GeoJSON source with `lineMetrics` enabled.')):
H.push(new fc(ia,P,'layer "'+P.id+'" must specify a "source-layer"')):H.push(new fc(ia,P.source,'source "'+P.source+'" not found'))):H.push(new fc(ia,P,'missing required property "source"')));return H=H.concat(Cb({key:ia,value:P,valueSpec:Aa.layer,style:v.style,styleSpec:v.styleSpec,objectElementValidators:{"*":function(){return[]},type:function(){return Bc({key:ia+".type",value:P.type,valueSpec:Aa.layer.type,style:v.style,styleSpec:v.styleSpec,object:P,objectKey:"type"})},filter:Jb,layout:function(jc){return Cb({layer:P,
key:jc.key,value:jc.value,style:jc.style,styleSpec:jc.styleSpec,objectElementValidators:{"*":function(ec){return Ib(X({layerType:bb},ec))}}})},paint:function(jc){return Cb({layer:P,key:jc.key,value:jc.value,style:jc.style,styleSpec:jc.styleSpec,objectElementValidators:{"*":function(ec){return Lb(X({layerType:bb},ec))}}})}}}))}function $b(v){var H=v.value;v=v.key;var P=qb(H);return"string"!==P?[new fc(v,H,"string expected, "+P+" found")]:[]}function nc(v){var H=v.value,P=v.key,ia=v.styleSpec,xa=v.style;
if(!H.type)return[new fc(P,H,'"type" is required')];var Aa=ba(H.type);switch(Aa){case "vector":case "raster":case "raster-dem":return Cb({key:P,value:H,valueSpec:ia["source_"+Aa.replace("-","_")],style:v.style,styleSpec:ia,objectElementValidators:Kf});case "geojson":if(v=Cb({key:P,value:H,valueSpec:ia.source_geojson,style:xa,styleSpec:ia,objectElementValidators:Kf}),H.cluster)for(var Ra in H.clusterProperties)ia=H.clusterProperties[Ra],xa=ia[0],xa="string"==typeof xa?[xa,["accumulated"],["get",Ra]]:
xa,v.push.apply(v,zb({key:P+"."+Ra+".map",value:ia[1],expressionContext:"cluster-map"})),v.push.apply(v,zb({key:P+"."+Ra+".reduce",value:xa,expressionContext:"cluster-reduce"}));return v;case "video":return Cb({key:P,value:H,valueSpec:ia.source_video,style:xa,styleSpec:ia});case "image":return Cb({key:P,value:H,valueSpec:ia.source_image,style:xa,styleSpec:ia});case "canvas":return[new fc(P,null,"Please use runtime APIs to add canvas sources, rather than including them in stylesheets.","source.canvas")];
default:return Tb({key:P+".type",value:H.type,valueSpec:{values:"vector raster raster-dem geojson video image".split(" ")},style:xa,styleSpec:ia})}}function xc(v){var H=v.value,P=v.styleSpec,ia=P.light;v=v.style;var xa=[],Aa=qb(H);if(void 0===H)return xa;if("object"!==Aa)return xa.concat([new fc("light",H,"object expected, "+Aa+" found")]);for(var Ra in H)Aa=Ra.match(/^(.*)-transition$/),xa=xa.concat(Aa&&ia[Aa[1]]&&ia[Aa[1]].transition?Bc({key:Ra,value:H[Ra],valueSpec:P.transition,style:v,styleSpec:P}):
ia[Ra]?Bc({key:Ra,value:H[Ra],valueSpec:ia[Ra],style:v,styleSpec:P}):[new fc(Ra,H[Ra],'unknown property "'+Ra+'"')]);return xa}function Bc(v){var H=v.value,P=v.valueSpec,ia=v.styleSpec;return P.expression&&Kb(ba(H))?wb(v):P.expression&&cd(aa(H))?zb(v):P.type&&Oe[P.type]?Oe[P.type](v):Cb(X({},v,{valueSpec:P.type?ia[P.type]:P}))}function Rc(v){var H=v.value,P=v.key;v=$b(v);return v.length||(-1===H.indexOf("{fontstack}")&&v.push(new fc(P,H,'"glyphs" url must include a "{fontstack}" token')),-1===H.indexOf("{range}")&&
v.push(new fc(P,H,'"glyphs" url must include a "{range}" token'))),v}function pd(v,H){void 0===H&&(H=Xb);var P=[];return P=P.concat(Bc({key:"",value:v,valueSpec:H.$root,styleSpec:H,style:v,objectElementValidators:{glyphs:Rc,"*":function(){return[]}}})),v.constants&&(P=P.concat(V({key:"constants",value:v.constants,style:v,styleSpec:H}))),Vc(P)}function Vc(v){return[].concat(v).sort(function(H,P){return H.line-P.line})}function xd(v){return function(){for(var H=[],P=arguments.length;P--;)H[P]=arguments[P];
return Vc(v.apply(this,H))}}function sd(v,H){var P=!1;if(H&&H.length)for(var ia=0;ia<H.length;ia+=1)v.fire(new Ec(Error(H[ia].message))),P=!0;return P}function Yc(v,H,P){var ia=this.cells=[];if(v instanceof ArrayBuffer){this.arrayBuffer=v;var xa=new Int32Array(this.arrayBuffer);v=xa[0];this.d=(H=xa[1])+2*(P=xa[2]);for(var Aa=0;Aa<this.d*this.d;Aa++){var Ra=xa[3+Aa],bb=xa[3+Aa+1];ia.push(Ra===bb?null:xa.subarray(Ra,bb))}Aa=xa[3+ia.length+1];this.keys=xa.subarray(xa[3+ia.length],Aa);this.bboxes=xa.subarray(Aa);
this.insert=this._insertReadonly}else{this.d=H+2*P;for(xa=0;xa<this.d*this.d;xa++)ia.push([]);this.keys=[];this.bboxes=[]}this.n=H;this.extent=v;this.padding=P;this.scale=H/v;this.uid=0;H=P/H*v;this.min=-H;this.max=v+H}function Hc(v,H,P){void 0===P&&(P={});Object.defineProperty(H,"_classRegistryKey",{value:v,writeable:!1});Hj[v]={klass:H,omit:P.omit||[],shallow:P.shallow||[]}}function Cd(v){return v&&"undefined"!=typeof ArrayBuffer&&(v instanceof ArrayBuffer||v.constructor&&"ArrayBuffer"===v.constructor.name)}
function Kd(v,H){if(null==v||"boolean"==typeof v||"number"==typeof v||"string"==typeof v||v instanceof Boolean||v instanceof Number||v instanceof String||v instanceof Date||v instanceof RegExp)return v;if(Cd(v)||gj&&v instanceof gj)return H&&H.push(v),v;if(ArrayBuffer.isView(v))return H&&H.push(v.buffer),v;if(v instanceof Pj)return H&&H.push(v.data.buffer),v;if(Array.isArray(v)){for(var P=[],ia=0;ia<v.length;ia+=1)P.push(Kd(v[ia],H));return P}if("object"==typeof v){var xa=v.constructor;P=xa._classRegistryKey;
if(!P)throw Error("can't serialize object of unregistered class");ia=xa.serialize?xa.serialize(v,H):{};if(!xa.serialize){for(var Aa in v)!v.hasOwnProperty(Aa)||0<=Hj[P].omit.indexOf(Aa)||(xa=v[Aa],ia[Aa]=0<=Hj[P].shallow.indexOf(Aa)?xa:Kd(xa,H));v instanceof Error&&(ia.message=v.message)}if(ia.$name)throw Error("$name property is reserved for worker serialization logic.");return"Object"!==P&&(ia.$name=P),ia}throw Error("can't serialize object of type "+typeof v);}function Ld(v){if(null==v||"boolean"==
typeof v||"number"==typeof v||"string"==typeof v||v instanceof Boolean||v instanceof Number||v instanceof String||v instanceof Date||v instanceof RegExp||Cd(v)||gj&&v instanceof gj||ArrayBuffer.isView(v)||v instanceof Pj)return v;if(Array.isArray(v))return v.map(Ld);if("object"==typeof v){var H=v.$name||"Object",P=Hj[H].klass;if(!P)throw Error("can't deserialize unregistered class "+H);if(P.deserialize)return P.deserialize(v);P=Object.create(P.prototype);for(var ia=0,xa=Object.keys(v);ia<xa.length;ia+=
1){var Aa=xa[ia];if("$name"!==Aa){var Ra=v[Aa];P[Aa]=0<=Hj[H].shallow.indexOf(Aa)?Ra:Ld(Ra)}}return P}throw Error("can't deserialize object of type "+typeof v);}function kb(v){for(var H=0;H<v.length;H+=1)if(De(v[H].charCodeAt(0)))return!0;return!1}function De(v){return!(746!==v&&747!==v&&(4352>v||!(je["Bopomofo Extended"](v)||je.Bopomofo(v)||je["CJK Compatibility Forms"](v)&&!(65097<=v&&65103>=v)||je["CJK Compatibility Ideographs"](v)||je["CJK Compatibility"](v)||je["CJK Radicals Supplement"](v)||
je["CJK Strokes"](v)||!(!je["CJK Symbols and Punctuation"](v)||12296<=v&&12305>=v||12308<=v&&12319>=v||12336===v)||je["CJK Unified Ideographs Extension A"](v)||je["CJK Unified Ideographs"](v)||je["Enclosed CJK Letters and Months"](v)||je["Hangul Compatibility Jamo"](v)||je["Hangul Jamo Extended-A"](v)||je["Hangul Jamo Extended-B"](v)||je["Hangul Jamo"](v)||je["Hangul Syllables"](v)||je.Hiragana(v)||je["Ideographic Description Characters"](v)||je.Kanbun(v)||je["Kangxi Radicals"](v)||je["Katakana Phonetic Extensions"](v)||
je.Katakana(v)&&12540!==v||!(!je["Halfwidth and Fullwidth Forms"](v)||65288===v||65289===v||65293===v||65306<=v&&65310>=v||65339===v||65341===v||65343===v||65371<=v&&65503>=v||65507===v||65512<=v&&65519>=v)||!(!je["Small Form Variants"](v)||65112<=v&&65118>=v||65123<=v&&65126>=v)||je["Unified Canadian Aboriginal Syllabics"](v)||je["Unified Canadian Aboriginal Syllabics Extended"](v)||je["Vertical Forms"](v)||je["Yijing Hexagram Symbols"](v)||je["Yi Syllables"](v)||je["Yi Radicals"](v))))}function Hd(v){var H;
(H=De(v))||(H=!!(je["Latin-1 Supplement"](v)&&(167===v||169===v||174===v||177===v||188===v||189===v||190===v||215===v||247===v)||je["General Punctuation"](v)&&(8214===v||8224===v||8225===v||8240===v||8241===v||8251===v||8252===v||8258===v||8263===v||8264===v||8265===v||8273===v)||je["Letterlike Symbols"](v)||je["Number Forms"](v)||je["Miscellaneous Technical"](v)&&(8960<=v&&8967>=v||8972<=v&&8991>=v||8996<=v&&9E3>=v||9003===v||9085<=v&&9114>=v||9150<=v&&9165>=v||9167===v||9169<=v&&9179>=v||9186<=
v&&9215>=v)||je["Control Pictures"](v)&&9251!==v||je["Optical Character Recognition"](v)||je["Enclosed Alphanumerics"](v)||je["Geometric Shapes"](v)||je["Miscellaneous Symbols"](v)&&!(9754<=v&&9759>=v)||je["Miscellaneous Symbols and Arrows"](v)&&(11026<=v&&11055>=v||11088<=v&&11097>=v||11192<=v&&11243>=v)||je["CJK Symbols and Punctuation"](v)||je.Katakana(v)||je["Private Use Area"](v)||je["CJK Compatibility Forms"](v)||je["Small Form Variants"](v)||je["Halfwidth and Fullwidth Forms"](v)||8734===v||
8756===v||8757===v||9984<=v&&10087>=v||10102<=v&&10131>=v||65532===v||65533===v));return!H}function oe(v){return 1424<=v&&2303>=v||je["Arabic Presentation Forms-A"](v)||je["Arabic Presentation Forms-B"](v)}function Ge(){Qj.fire(new Ac("pluginStateChange",{pluginStatus:tg,pluginURL:oh}))}function Fd(v,H){void 0===H&&(H=1);var P=0,ia=0;return{members:v.map(function(xa){var Aa=Sj[xa.type].BYTES_PER_ELEMENT,Ra=P=ge(P,Math.max(H,Aa)),bb=xa.components||1;return ia=Math.max(ia,Aa),P+=Aa*bb,{name:xa.name,
type:xa.type,components:bb,offset:Ra}}),size:ge(P,Math.max(ia,H)),alignment:H}}function ge(v,H){return Math.ceil(v/H)*H}function ff(v,H){return 256*c(Math.floor(v),0,255)+c(Math.floor(H),0,255)}function Vd(v){var H=+v;return!isNaN(H)&&H<=Vk?H:uj(String(v))}function Pd(v,H,P){var ia=v[H];v[H]=v[P];v[P]=ia}function Ed(v){return[ff(255*v.r,255*v.g),ff(255*v.b,255*v.a)]}function ke(v,H,P){var ia={color:{source:sj,composite:Wh},number:{source:mi,composite:sj}};return(v={"line-pattern":{source:lg,composite:lg},
"fill-pattern":{source:lg,composite:lg},"fill-extrusion-pattern":{source:lg,composite:lg}}[v])&&v[P]||ia[H][P]}function Xd(v){var H=8192/v.extent;v=v.loadGeometry();for(var P=0;P<v.length;P++)for(var ia=v[P],xa=0;xa<ia.length;xa++){var Aa=ia[xa];Aa.x=Math.round(Aa.x*H);Aa.y=Math.round(Aa.y*H);(Aa.x<Ti.min||Aa.x>Ti.max||Aa.y<Ti.min||Aa.y>Ti.max)&&(z("Geometry exceeds allowed extent, reduce your vector tile buffer size"),Aa.x=c(Aa.x,Ti.min,Ti.max),Aa.y=c(Aa.y,Ti.min,Ti.max))}return v}function Ve(v,
H,P,ia,xa){v.emplaceBack(2*H+(ia+1)/2,2*P+(xa+1)/2)}function Yd(v,H){for(var P=0;P<v.length;P++)if(hd(H,v[P]))return!0;for(P=0;P<H.length;P++)if(hd(v,H[P]))return!0;return!!Cf(v,H)}function yf(v,H,P){return!!hd(v,H)||!!tc(H,v,P)}function Lf(v,H){if(1===v.length)return Wc(H,v[0]);for(var P=0;P<H.length;P++)for(var ia=H[P],xa=0;xa<ia.length;xa++)if(hd(v,ia[xa]))return!0;for(P=0;P<v.length;P++)if(Wc(H,v[P]))return!0;for(P=0;P<H.length;P++)if(Cf(v,H[P]))return!0;return!1}function Cf(v,H){if(0===v.length||
0===H.length)return!1;for(var P=0;P<v.length-1;P++)for(var ia=v[P],xa=v[P+1],Aa=0;Aa<H.length-1;Aa++){var Ra=ia,bb=xa,ob=H[Aa],sb=H[Aa+1];if(F(Ra,ob,sb)!==F(bb,ob,sb)&&F(Ra,bb,ob)!==F(Ra,bb,sb))return!0}return!1}function tc(v,H,P){P*=P;if(1===H.length)return v.distSqr(H[0])<P;for(var ia=1;ia<H.length;ia++)if(Fc(v,H[ia-1],H[ia])<P)return!0;return!1}function Fc(v,H,P){var ia=H.distSqr(P);if(0===ia)return v.distSqr(H);ia=((v.x-H.x)*(P.x-H.x)+(v.y-H.y)*(P.y-H.y))/ia;return v.distSqr(0>ia?H:1<ia?P:P.sub(H)._mult(ia)._add(H))}
function Wc(v,H){for(var P,ia,xa,Aa=!1,Ra=0;Ra<v.length;Ra++)for(var bb=0,ob=(P=v[Ra]).length-1;bb<P.length;ob=bb++)(ia=P[bb]).y>H.y!=(xa=P[ob]).y>H.y&&H.x<(xa.x-ia.x)*(H.y-ia.y)/(xa.y-ia.y)+ia.x&&(Aa=!Aa);return Aa}function hd(v,H){for(var P=!1,ia=0,xa=v.length-1;ia<v.length;xa=ia++){var Aa=v[ia];xa=v[xa];Aa.y>H.y!=xa.y>H.y&&H.x<(xa.x-Aa.x)*(H.y-Aa.y)/(xa.y-Aa.y)+Aa.x&&(P=!P)}return P}function be(v,H,P){var ia=H.paint.get(v).value;return"constant"===ia.kind?ia.value:P.programConfigurations.get(H.id).getMaxValue(v)}
function pe(v){return Math.sqrt(v[0]*v[0]+v[1]*v[1])}function ce(v,H,P,ia,xa){if(!H[0]&&!H[1])return v;H=Bd.convert(H)._mult(xa);"viewport"===P&&H._rotate(-ia);P=[];for(ia=0;ia<v.length;ia++)P.push(v[ia].sub(H));return P}function de(v){return v[0]=1,v[1]=0,v[2]=0,v[3]=0,v[4]=0,v[5]=1,v[6]=0,v[7]=0,v[8]=0,v[9]=0,v[10]=1,v[11]=0,v[12]=0,v[13]=0,v[14]=0,v[15]=1,v}function Be(v,H,P){var ia=H[0],xa=H[1],Aa=H[2],Ra=H[3],bb=H[4],ob=H[5],sb=H[6],Hb=H[7],Vb=H[8],jc=H[9],ec=H[10],Nb=H[11],Mb=H[12],ac=H[13],
Ic=H[14];H=H[15];var Uc=P[0],Kc=P[1],wd=P[2],Dd=P[3];return v[0]=Uc*ia+Kc*bb+wd*Vb+Dd*Mb,v[1]=Uc*xa+Kc*ob+wd*jc+Dd*ac,v[2]=Uc*Aa+Kc*sb+wd*ec+Dd*Ic,v[3]=Uc*Ra+Kc*Hb+wd*Nb+Dd*H,v[4]=(Uc=P[4])*ia+(Kc=P[5])*bb+(wd=P[6])*Vb+(Dd=P[7])*Mb,v[5]=Uc*xa+Kc*ob+wd*jc+Dd*ac,v[6]=Uc*Aa+Kc*sb+wd*ec+Dd*Ic,v[7]=Uc*Ra+Kc*Hb+wd*Nb+Dd*H,v[8]=(Uc=P[8])*ia+(Kc=P[9])*bb+(wd=P[10])*Vb+(Dd=P[11])*Mb,v[9]=Uc*xa+Kc*ob+wd*jc+Dd*ac,v[10]=Uc*Aa+Kc*sb+wd*ec+Dd*Ic,v[11]=Uc*Ra+Kc*Hb+wd*Nb+Dd*H,v[12]=(Uc=P[12])*ia+(Kc=P[13])*bb+(wd=
P[14])*Vb+(Dd=P[15])*Mb,v[13]=Uc*xa+Kc*ob+wd*jc+Dd*ac,v[14]=Uc*Aa+Kc*sb+wd*ec+Dd*Ic,v[15]=Uc*Ra+Kc*Hb+wd*Nb+Dd*H,v}function Ue(v,H,P){var ia=H[0],xa=H[1],Aa=H[2];H=H[3];return v[0]=P[0]*ia+P[4]*xa+P[8]*Aa+P[12]*H,v[1]=P[1]*ia+P[5]*xa+P[9]*Aa+P[13]*H,v[2]=P[2]*ia+P[6]*xa+P[10]*Aa+P[14]*H,v[3]=P[3]*ia+P[7]*xa+P[11]*Aa+P[15]*H,v}function oc(v,H){v=Ue([],[v.x,v.y,0,1],H);return new Bd(v[0]/v[3],v[1]/v[3])}function vc(v,H,P,ia){var xa=H.width;H=H.height;if(ia)if(ia instanceof Uint8ClampedArray)ia=new Uint8Array(ia.buffer);
else{if(ia.length!==xa*H*P)throw new RangeError("mismatched image size");}else ia=new Uint8Array(xa*H*P);return v.width=xa,v.height=H,v.data=ia,v}function Zc(v,H,P){var ia=H.width;H=H.height;if(ia!==v.width||H!==v.height){var xa=vc({},{width:ia,height:H},P);ld(v,xa,{x:0,y:0},{x:0,y:0},{width:Math.min(v.width,ia),height:Math.min(v.height,H)},P);v.width=ia;v.height=H;v.data=xa.data}}function ld(v,H,P,ia,xa,Aa){if(0===xa.width||0===xa.height)return H;if(xa.width>v.width||xa.height>v.height||P.x>v.width-
xa.width||P.y>v.height-xa.height)throw new RangeError("out of range source coordinates for image copy");if(xa.width>H.width||xa.height>H.height||ia.x>H.width-xa.width||ia.y>H.height-xa.height)throw new RangeError("out of range destination coordinates for image copy");for(var Ra=v.data,bb=H.data,ob=0;ob<xa.height;ob++)for(var sb=((P.y+ob)*v.width+P.x)*Aa,Hb=((ia.y+ob)*H.width+ia.x)*Aa,Vb=0;Vb<xa.width*Aa;Vb++)bb[Hb+Vb]=Ra[sb+Vb];return H}function $c(v,H){for(var P=new Uint8Array(1024),ia={},xa=0,Aa=
0;256>xa;xa++,Aa+=4){ia[H]=xa/255;var Ra=v.evaluate(ia);P[Aa+0]=Math.floor(255*Ra.r/Ra.a);P[Aa+1]=Math.floor(255*Ra.g/Ra.a);P[Aa+2]=Math.floor(255*Ra.b/Ra.a);P[Aa+3]=Math.floor(255*Ra.a)}return new Ag({width:256,height:1},P)}function Oc(v,H,P){P=P||2;var ia,xa,Aa,Ra=H&&H.length,bb=Ra?H[0]*P:v.length,ob=ad(v,0,bb,P,!0),sb=[];if(!ob||ob.next===ob.prev)return sb;if(Ra){Ra=P;var Hb,Vb=[];var jc=0;for(Hb=H.length;jc<Hb;jc++)(ia=ad(v,H[jc]*Ra,jc<Hb-1?H[jc+1]*Ra:v.length,Ra,!1))===ia.next&&(ia.steiner=!0),
Vb.push(Od(ia));Vb.sort(Dc);for(jc=0;jc<Vb.length;jc++)Gc(Vb[jc],ob),ob=Jc(ob,ob.next)}if(v.length>80*P){var ec=H=v[0];var Nb=ia=v[1];for(Ra=P;Ra<bb;Ra+=P)(xa=v[Ra])<ec&&(ec=xa),(Aa=v[Ra+1])<Nb&&(Nb=Aa),xa>H&&(H=xa),Aa>ia&&(ia=Aa);var Mb=0!==(Mb=Math.max(H-ec,ia-Nb))?1/Mb:0}return zc(ob,sb,P,ec,Nb,Mb),sb}function ad(v,H,P,ia,xa){if(xa===0<Lh(v,H,P,ia))for(xa=H;xa<P;xa+=ia)var Aa=eh(xa,v[xa],v[xa+1],Aa);else for(xa=P-ia;xa>=H;xa-=ia)Aa=eh(xa,v[xa],v[xa+1],Aa);return Aa&&Le(Aa,Aa.next)&&(Fg(Aa),Aa=
Aa.next),Aa}function Jc(v,H){if(!v)return v;H||(H=v);var P=v;do if(v=!1,P.steiner||!Le(P,P.next)&&0!==zd(P.prev,P,P.next))P=P.next;else{if(Fg(P),(P=H=P.prev)===P.next)break;v=!0}while(v||P!==H);return H}function zc(v,H,P,ia,xa,Aa,Ra){if(v){if(!Ra&&Aa){var bb=v,ob=bb;do null===ob.z&&(ob.z=ud(ob.x,ob.y,ia,xa,Aa)),ob.prevZ=ob.prev,ob=ob.nextZ=ob.next;while(ob!==bb);ob.prevZ.nextZ=null;ob.prevZ=null;bb=ob;var sb,Hb,Vb,jc,ec=1;do{ob=bb;var Nb=bb=null;for(Vb=0;ob;){Vb++;var Mb=ob;for(sb=jc=0;sb<ec&&(jc++,
Mb=Mb.nextZ);sb++);for(sb=ec;0<jc||0<sb&&Mb;)0!==jc&&(0===sb||!Mb||ob.z<=Mb.z)?(Hb=ob,ob=ob.nextZ,jc--):(Hb=Mb,Mb=Mb.nextZ,sb--),Nb?Nb.nextZ=Hb:bb=Hb,Hb.prevZ=Nb,Nb=Hb;ob=Mb}Nb.nextZ=null;ec*=2}while(1<Vb)}for(ob=v;v.prev!==v.next;){Hb=v.prev;bb=v.next;if(Aa)a:{Mb=v;ec=ia;sb=xa;var ac=Aa;Nb=Mb.prev;Vb=Mb.next;if(0<=zd(Nb,Mb,Vb))Mb=!1;else{var Ic=Nb.x>Mb.x?Nb.x>Vb.x?Nb.x:Vb.x:Mb.x>Vb.x?Mb.x:Vb.x,Uc=Nb.y>Mb.y?Nb.y>Vb.y?Nb.y:Vb.y:Mb.y>Vb.y?Mb.y:Vb.y;jc=ud(Nb.x<Mb.x?Nb.x<Vb.x?Nb.x:Vb.x:Mb.x<Vb.x?Mb.x:
Vb.x,Nb.y<Mb.y?Nb.y<Vb.y?Nb.y:Vb.y:Mb.y<Vb.y?Mb.y:Vb.y,ec,sb,ac);ec=ud(Ic,Uc,ec,sb,ac);sb=Mb.prevZ;for(ac=Mb.nextZ;sb&&sb.z>=jc&&ac&&ac.z<=ec;){if(sb!==Mb.prev&&sb!==Mb.next&&Gd(Nb.x,Nb.y,Mb.x,Mb.y,Vb.x,Vb.y,sb.x,sb.y)&&0<=zd(sb.prev,sb,sb.next)||(sb=sb.prevZ,ac!==Mb.prev&&ac!==Mb.next&&Gd(Nb.x,Nb.y,Mb.x,Mb.y,Vb.x,Vb.y,ac.x,ac.y)&&0<=zd(ac.prev,ac,ac.next))){Mb=!1;break a}ac=ac.nextZ}for(;sb&&sb.z>=jc;){if(sb!==Mb.prev&&sb!==Mb.next&&Gd(Nb.x,Nb.y,Mb.x,Mb.y,Vb.x,Vb.y,sb.x,sb.y)&&0<=zd(sb.prev,sb,sb.next)){Mb=
!1;break a}sb=sb.prevZ}for(;ac&&ac.z<=ec;){if(ac!==Mb.prev&&ac!==Mb.next&&Gd(Nb.x,Nb.y,Mb.x,Mb.y,Vb.x,Vb.y,ac.x,ac.y)&&0<=zd(ac.prev,ac,ac.next)){Mb=!1;break a}ac=ac.nextZ}Mb=!0}}else a:if(Mb=v,Nb=Mb.prev,Vb=Mb.next,0<=zd(Nb,Mb,Vb))Mb=!1;else{for(jc=Mb.next.next;jc!==Mb.prev;){if(Gd(Nb.x,Nb.y,Mb.x,Mb.y,Vb.x,Vb.y,jc.x,jc.y)&&0<=zd(jc.prev,jc,jc.next)){Mb=!1;break a}jc=jc.next}Mb=!0}if(Mb)H.push(Hb.i/P),H.push(v.i/P),H.push(bb.i/P),Fg(v),ob=v=bb.next;else if((v=bb)===ob){if(Ra)if(1===Ra){v=Jc(v);Ra=
H;Hb=P;bb=v;do ob=bb.prev,Mb=bb.next.next,!Le(ob,Mb)&&Xe(ob,bb,bb.next,Mb)&&hf(ob,Mb)&&hf(Mb,ob)&&(Ra.push(ob.i/Hb),Ra.push(bb.i/Hb),Ra.push(Mb.i/Hb),Fg(bb),Fg(bb.next),bb=v=Mb),bb=bb.next;while(bb!==v);v=Jc(bb);zc(v,H,P,ia,xa,Aa,2)}else{if(2===Ra)a:{Ra=v;do{for(Hb=Ra.next.next;Hb!==Ra.prev;){if(Ra.i!==Hb.i&&$d(Ra,Hb)){v=Uf(Ra,Hb);Ra=Jc(Ra,Ra.next);v=Jc(v,v.next);zc(Ra,H,P,ia,xa,Aa);zc(v,H,P,ia,xa,Aa);break a}Hb=Hb.next}Ra=Ra.next}while(Ra!==v)}}else zc(Jc(v),H,P,ia,xa,Aa,1);break}}}}function Dc(v,
H){return v.x-H.x}function Gc(v,H){if(H=function(P,ia){var xa=ia,Aa=P.x,Ra=P.y,bb=-1/0;do{if(Ra<=xa.y&&Ra>=xa.next.y&&xa.next.y!==xa.y){var ob=xa.x+(Ra-xa.y)*(xa.next.x-xa.x)/(xa.next.y-xa.y);if(ob<=Aa&&ob>bb){if(bb=ob,ob===Aa){if(Ra===xa.y)return xa;if(Ra===xa.next.y)return xa.next}var sb=xa.x<xa.next.x?xa:xa.next}}xa=xa.next}while(xa!==ia);if(!sb)return null;if(Aa===bb)return sb;ob=sb;var Hb=sb.x,Vb=sb.y,jc=1/0;xa=sb;do{if(Aa>=xa.x&&xa.x>=Hb&&Aa!==xa.x&&Gd(Ra<Vb?Aa:bb,Ra,Hb,Vb,Ra<Vb?bb:Aa,Ra,xa.x,
xa.y)){ia=Math.abs(Ra-xa.y)/(Aa-xa.x);var ec;if((ec=hf(xa,P))&&!(ec=ia<jc)&&(ec=ia===jc)&&!(ec=xa.x>sb.x)&&(ec=xa.x===sb.x)){ec=sb;var Nb=xa;ec=0>zd(ec.prev,ec,Nb.prev)&&0>zd(Nb.next,ec,ec.next)}ec&&(sb=xa,jc=ia)}xa=xa.next}while(xa!==ob);return sb}(v,H))v=Uf(H,v),Jc(H,H.next),Jc(v,v.next)}function ud(v,H,P,ia,xa){return 1431655765&((v=858993459&((v=252645135&((v=16711935&((v=32767*(v-P)*xa)|v<<8))|v<<4))|v<<2))|v<<1)|(1431655765&((H=858993459&((H=252645135&((H=16711935&((H=32767*(H-ia)*xa)|H<<8))|
H<<4))|H<<2))|H<<1))<<1}function Od(v){var H=v,P=v;do(H.x<P.x||H.x===P.x&&H.y<P.y)&&(P=H),H=H.next;while(H!==v);return P}function Gd(v,H,P,ia,xa,Aa,Ra,bb){return 0<=(xa-Ra)*(H-bb)-(v-Ra)*(Aa-bb)&&0<=(v-Ra)*(ia-bb)-(P-Ra)*(H-bb)&&0<=(P-Ra)*(Aa-bb)-(xa-Ra)*(ia-bb)}function $d(v,H){return v.next.i!==H.i&&v.prev.i!==H.i&&!function(P,ia){var xa=P;do{if(xa.i!==P.i&&xa.next.i!==P.i&&xa.i!==ia.i&&xa.next.i!==ia.i&&Xe(xa,xa.next,P,ia))return!0;xa=xa.next}while(xa!==P);return!1}(v,H)&&(hf(v,H)&&hf(H,v)&&function(P,
ia){var xa=P,Aa=!1,Ra=(P.x+ia.x)/2;ia=(P.y+ia.y)/2;do xa.y>ia!=xa.next.y>ia&&xa.next.y!==xa.y&&Ra<(xa.next.x-xa.x)*(ia-xa.y)/(xa.next.y-xa.y)+xa.x&&(Aa=!Aa),xa=xa.next;while(xa!==P);return Aa}(v,H)&&(zd(v.prev,v,H.prev)||zd(v,H.prev,H))||Le(v,H)&&0<zd(v.prev,v,v.next)&&0<zd(H.prev,H,H.next))}function zd(v,H,P){return(H.y-v.y)*(P.x-H.x)-(H.x-v.x)*(P.y-H.y)}function Le(v,H){return v.x===H.x&&v.y===H.y}function Xe(v,H,P,ia){var xa=Me(zd(v,H,P)),Aa=Me(zd(v,H,ia)),Ra=Me(zd(P,ia,v)),bb=Me(zd(P,ia,H));return xa!==
Aa&&Ra!==bb||!(0!==xa||!gf(v,P,H))||!(0!==Aa||!gf(v,ia,H))||!(0!==Ra||!gf(P,v,ia))||!(0!==bb||!gf(P,H,ia))}function gf(v,H,P){return H.x<=Math.max(v.x,P.x)&&H.x>=Math.min(v.x,P.x)&&H.y<=Math.max(v.y,P.y)&&H.y>=Math.min(v.y,P.y)}function Me(v){return 0<v?1:0>v?-1:0}function hf(v,H){return 0>zd(v.prev,v,v.next)?0<=zd(v,H,v.next)&&0<=zd(v,v.prev,H):0>zd(v,H,v.prev)||0>zd(v,v.next,H)}function Uf(v,H){var P=new si(v.i,v.x,v.y),ia=new si(H.i,H.x,H.y),xa=v.next,Aa=H.prev;return v.next=H,H.prev=v,P.next=
xa,xa.prev=P,ia.next=P,P.prev=ia,Aa.next=ia,ia.prev=Aa,ia}function eh(v,H,P,ia){v=new si(v,H,P);return ia?(v.next=ia.next,v.prev=ia,ia.next.prev=v,ia.next=v):(v.prev=v,v.next=v),v}function Fg(v){v.next.prev=v.prev;v.prev.next=v.next;v.prevZ&&(v.prevZ.nextZ=v.nextZ);v.nextZ&&(v.nextZ.prevZ=v.prevZ)}function si(v,H,P){this.i=v;this.x=H;this.y=P;this.nextZ=this.prevZ=this.z=this.next=this.prev=null;this.steiner=!1}function Lh(v,H,P,ia){for(var xa=0,Aa=P-ia;H<P;H+=ia)xa+=(v[Aa]-v[H])*(v[H+1]+v[Aa+1]),
Aa=H;return xa}function di(v,H,P,ia,xa){!function Vb(Ra,bb,ob,sb,Hb){for(;sb>ob;){if(600<sb-ob){var jc=sb-ob+1,ec=bb-ob+1,Nb=Math.log(jc),Mb=.5*Math.exp(2*Nb/3);Nb=.5*Math.sqrt(Nb*Mb*(jc-Mb)/jc)*(0>ec-jc/2?-1:1);Vb(Ra,bb,Math.max(ob,Math.floor(bb-ec*Mb/jc+Nb)),Math.min(sb,Math.floor(bb+(jc-ec)*Mb/jc+Nb)),Hb)}jc=Ra[bb];ec=ob;Mb=sb;rh(Ra,ob,bb);for(0<Hb(Ra[sb],jc)&&rh(Ra,ob,sb);ec<Mb;){rh(Ra,ec,Mb);ec++;for(Mb--;0>Hb(Ra[ec],jc);)ec++;for(;0<Hb(Ra[Mb],jc);)Mb--}0===Hb(Ra[ob],jc)?rh(Ra,ob,Mb):rh(Ra,++Mb,
sb);Mb<=bb&&(ob=Mb+1);bb<=Mb&&(sb=Mb-1)}}(v,H,P||0,ia||v.length-1,xa||Gg)}function rh(v,H,P){var ia=v[H];v[H]=v[P];v[P]=ia}function Gg(v,H){return v<H?-1:v>H?1:0}function ti(v,H){var P=v.length;if(1>=P)return[v];for(var ia,xa,Aa=[],Ra=0;Ra<P;Ra++){var bb=v[Ra];for(var ob=0,sb=0,Hb=bb.length,Vb=Hb-1,jc=void 0,ec=void 0;sb<Hb;Vb=sb++)ob+=((ec=bb[Vb]).x-(jc=bb[sb]).x)*(jc.y+ec.y);bb=ob;0!==bb&&(v[Ra].area=Math.abs(bb),void 0===xa&&(xa=0>bb),xa===0>bb?(ia&&Aa.push(ia),ia=[v[Ra]]):ia.push(v[Ra]))}if(ia&&
Aa.push(ia),1<H)for(v=0;v<Aa.length;v++)Aa[v].length<=H||(di(Aa[v],H,1,Aa[v].length-1,eg),Aa[v]=Aa[v].slice(0,H));return Aa}function eg(v,H){return H.area-v.area}function Qf(v,H,P){P=P.patternDependencies;for(var ia=!1,xa=0;xa<H.length;xa+=1){var Aa=H[xa].paint.get(v+"-pattern");Aa.isConstant()||(ia=!0);(Aa=Aa.constantOr(null))&&(ia=!0,P[Aa.to]=!0,P[Aa.from]=!0)}return ia}function Rf(v,H,P,ia,xa){for(var Aa=xa.patternDependencies,Ra=0;Ra<H.length;Ra+=1){var bb=H[Ra],ob=bb.paint.get(v+"-pattern").value;
if("constant"!==ob.kind){var sb=ob.evaluate({zoom:ia-1},P,{},xa.availableImages),Hb=ob.evaluate({zoom:ia},P,{},xa.availableImages);ob=ob.evaluate({zoom:ia+1},P,{},xa.availableImages);Hb=Hb&&Hb.name?Hb.name:Hb;ob=ob&&ob.name?ob.name:ob;Aa[sb=sb&&sb.name?sb.name:sb]=!0;Aa[Hb]=!0;Aa[ob]=!0;P.patterns[bb.id]={min:sb,mid:Hb,max:ob}}}return P}function Of(v,H,P,ia,xa){this.properties={};this.extent=P;this.type=0;this._pbf=v;this._geometry=-1;this._keys=ia;this._values=xa;v.readFields(Ii,this,H)}function Ii(v,
H,P){if(1==v)H.id=P.readVarint();else if(2==v)for(v=P.readVarint()+P.pos;P.pos<v;){var ia=H._keys[P.readVarint()],xa=H._values[P.readVarint()];H.properties[ia]=xa}else 3==v?H.type=P.readVarint():4==v&&(H._geometry=P.pos)}function Yg(v,H){this.version=1;this.name=null;this.extent=4096;this.length=0;this._pbf=v;this._keys=[];this._values=[];this._features=[];v.readFields(sh,this,H);this.length=this._features.length}function sh(v,H,P){15===v?H.version=P.readVarint():1===v?H.name=P.readString():5===v?
H.extent=P.readVarint():2===v?H._features.push(P.pos):3===v?H._keys.push(P.readString()):4===v&&H._values.push(function(ia){for(var xa=null,Aa=ia.readVarint()+ia.pos;ia.pos<Aa;)xa=ia.readVarint()>>3,xa=1===xa?ia.readString():2===xa?ia.readFloat():3===xa?ia.readDouble():4===xa?ia.readVarint64():5===xa?ia.readVarint():6===xa?ia.readSVarint():7===xa?ia.readBoolean():null;return xa}(P))}function Vi(v,H,P){3===v&&(v=new Wj(P,P.readVarint()+P.pos),v.length&&(H[v.name]=v))}function th(v,H,P,ia,xa,Aa,Ra,
bb){v.emplaceBack(H,P,2*Math.floor(ia*Ui)+Ra,xa*Ui*2,Aa*Ui*2,Math.round(bb))}function Hg(v,H){return v.x*H.x+v.y*H.y}function Mh(v,H){if(1===v.length){for(var P,ia=0,xa=H[ia++];!P||xa.equals(P);)if(!(P=H[ia++]))return 1/0;for(;ia<H.length;ia++){var Aa=H[ia],Ra=v[0],bb=P.sub(xa),ob=Aa.sub(xa),sb=Ra.sub(xa);Ra=Hg(bb,bb);var Hb=Hg(bb,ob),Vb=Hg(ob,ob);bb=Hg(sb,bb);ob=Hg(sb,ob);sb=Ra*Vb-Hb*Hb;Vb=(Vb*bb-Hb*ob)/sb;Ra=(Ra*ob-Hb*bb)/sb;Aa=xa.z*(1-Vb-Ra)+P.z*Vb+Aa.z*Ra;if(isFinite(Aa))return Aa}return 1/0}v=
1/0;for(P=0;P<H.length;P+=1)v=Math.min(v,H[P].z);return v}function ei(v,H){return 0<H?H+2*v:v}function uh(v,H,P){return v.sections.forEach(function(ia){var xa=ia.text;var Aa=H.layout.get("text-transform").evaluate(P,{});Aa=("uppercase"===Aa?xa=xa.toLocaleUpperCase():"lowercase"===Aa&&(xa=xa.toLocaleLowerCase()),Ng.applyArabicShaping&&(xa=Ng.applyArabicShaping(xa)),xa);ia.text=Aa}),v}function jf(v){this.buf=ArrayBuffer.isView&&ArrayBuffer.isView(v)?v:new Uint8Array(v||0);this.type=this.pos=0;this.length=
this.buf.length}function Bg(v){return v.type===jf.Bytes?v.readVarint()+v.pos:v.pos+1}function Nh(v,H,P){H=16383>=H?1:2097151>=H?2:268435455>=H?3:Math.floor(Math.log(H)/(7*Math.LN2));P.realloc(H);for(var ia=P.pos-1;ia>=v;ia--)P.buf[ia+H]=P.buf[ia]}function Oh(v,H){for(var P=0;P<v.length;P++)H.writeVarint(v[P])}function Wi(v,H){for(var P=0;P<v.length;P++)H.writeSVarint(v[P])}function ui(v,H){for(var P=0;P<v.length;P++)H.writeFloat(v[P])}function Ji(v,H){for(var P=0;P<v.length;P++)H.writeDouble(v[P])}
function fi(v,H){for(var P=0;P<v.length;P++)H.writeBoolean(v[P])}function fh(v,H){for(var P=0;P<v.length;P++)H.writeFixed32(v[P])}function Ph(v,H){for(var P=0;P<v.length;P++)H.writeSFixed32(v[P])}function Qh(v,H){for(var P=0;P<v.length;P++)H.writeFixed64(v[P])}function vi(v,H){for(var P=0;P<v.length;P++)H.writeSFixed64(v[P])}function vh(v,H){return(v[H]|v[H+1]<<8|v[H+2]<<16)+16777216*v[H+3]}function Qg(v,H,P){v[P]=H;v[P+1]=H>>>8;v[P+2]=H>>>16;v[P+3]=H>>>24}function Pf(v,H){return(v[H]|v[H+1]<<8|v[H+
2]<<16)+(v[H+3]<<24)}function Xi(v,H,P){1===v&&P.readMessage(Zg,H)}function Zg(v,H,P){if(3===v){v=P.readMessage(hi,{});P=v.width;var ia=v.height,xa=v.left,Aa=v.top,Ra=v.advance;H.push({id:v.id,bitmap:new Kh({width:P+6,height:ia+6},v.bitmap),metrics:{width:P,height:ia,left:xa,top:Aa,advance:Ra}})}}function hi(v,H,P){1===v?H.id=P.readVarint():2===v?H.bitmap=P.readBytes():3===v?H.width=P.readVarint():4===v?H.height=P.readVarint():5===v?H.left=P.readSVarint():6===v?H.top=P.readSVarint():7===v&&(H.advance=
P.readVarint())}function wi(v){for(var H=0,P=0,ia=0;ia<v.length;ia+=1){var xa=v[ia];H+=xa.w*xa.h;P=Math.max(P,xa.w)}v.sort(function(sb,Hb){return Hb.h-sb.h});P=[{x:0,y:0,w:Math.max(Math.ceil(Math.sqrt(H/.95)),P),h:1/0}];for(var Aa=xa=ia=0;Aa<v.length;Aa+=1)for(var Ra=v[Aa],bb=P.length-1;0<=bb;bb--){var ob=P[bb];if(!(Ra.w>ob.w||Ra.h>ob.h)){(Ra.x=ob.x,Ra.y=ob.y,xa=Math.max(xa,Ra.y+Ra.h),ia=Math.max(ia,Ra.x+Ra.w),Ra.w===ob.w&&Ra.h===ob.h)?(Ra=P.pop(),bb<P.length&&(P[bb]=Ra)):Ra.h===ob.h?(ob.x+=Ra.w,
ob.w-=Ra.w):Ra.w===ob.w?(ob.y+=Ra.h,ob.h-=Ra.h):(P.push({x:ob.x+Ra.w,y:ob.y,w:ob.w-Ra.w,h:Ra.h}),ob.y+=Ra.h,ob.h-=Ra.h);break}}return{w:ia,h:xa,fill:H/(ia*xa)||0}}function Rg(v,H,P,ia,xa,Aa,Ra,bb,ob,sb,Hb,Vb,jc,ec,Nb,Mb){xa=hc.fromFeature(v,xa);Vb===Sc.vertical&&xa.verticalizePunctuation();var ac=Ng.processBidirectionalText,Ic=Ng.processStyledBidirectionalText;if(ac&&1===xa.sections.length){v=[];var Uc=0;for(Aa=ac(xa.toString(),tf(xa,sb,Aa,H,ia,ec,Nb));Uc<Aa.length;Uc+=1){ec=Aa[Uc];Nb=new hc;Nb.text=
ec;Nb.sections=xa.sections;for(ac=0;ac<ec.length;ac++)Nb.sectionIndex.push(0);v.push(Nb)}}else if(Ic)for(v=[],Uc=0,Aa=Ic(xa.text,xa.sectionIndex,tf(xa,sb,Aa,H,ia,ec,Nb));Uc<Aa.length;Uc+=1)ec=Aa[Uc],Nb=new hc,Nb.text=ec[0],Nb.sectionIndex=ec[1],Nb.sections=xa.sections,v.push(Nb);else v=function(Kc,wd){for(var Dd=[],Qd=Kc.text,Nd=0,re=0;re<wd.length;re+=1){var Je=wd[re];Dd.push(Kc.substring(Nd,Je));Nd=Je}return Nd<Qd.length&&Dd.push(Kc.substring(Nd,Qd.length)),Dd}(xa,tf(xa,sb,Aa,H,ia,ec,Nb));Aa=[];
Hb={positionedLines:Aa,text:xa.toString(),top:Hb[1],bottom:Hb[1],left:Hb[0],right:Hb[0],writingMode:Vb,iconsInText:!1,verticalizable:!1};return function(Kc,wd,Dd,Qd,Nd,re,Je,Pe,ze,Ie,Ye,qe){var me=0,se=-17,rf=0,Wf=0;Pe="right"===Pe?1:"left"===Pe?0:.5;for(var jh=0,Dg=0;Dg<Nd.length;Dg+=1){var Xf=Nd[Dg];Xf.trim();var bf=Xf.getMaxScale(),ig=24*(bf-1),Lg={positionedGlyphs:[],lineOffset:0};Kc.positionedLines[jh]=Lg;var $g=Lg.positionedGlyphs,Wk=0;if(Xf.length()){for(var ej=0;ej<Xf.length();ej++){var cg=
Xf.getSection(ej),Dh=Xf.getSectionIndex(ej),uk=Xf.getCharCode(ej),Ok,Xk=null,kh=null,vk=24,qg=!(ze===Sc.horizontal||!Ye&&!De(uk)||Ye&&(wc[uk]||(Eh=uk,je.Arabic(Eh)||je["Arabic Supplement"](Eh)||je["Arabic Extended-A"](Eh)||je["Arabic Presentation Forms-A"](Eh)||je["Arabic Presentation Forms-B"](Eh))));if(cg.imageName){vk=Qd[cg.imageName];if(!vk)continue;kh=cg.imageName;Kc.iconsInText=Kc.iconsInText||!0;Xk=vk.paddedRect;var Ai=vk.displaySize;cg.scale=24*cg.scale/qe;var Nf=ig+(24-Ai[1]*cg.scale);vk=
(Ok={width:Ai[0],height:Ai[1],left:1,top:-3,advance:qg?Ai[1]:Ai[0]}).advance;Ai=qg?Ai[0]*cg.scale-24*bf:Ai[1]*cg.scale-24*bf;0<Ai&&Ai>Wk&&(Wk=Ai)}else{if((Nf=(Nf=Dd[cg.fontStack])&&Nf[uk])&&Nf.rect)Xk=Nf.rect,Ok=Nf.metrics;else{Nf=(Nf=wd[cg.fontStack])&&Nf[uk];if(!Nf)continue;Ok=Nf.metrics}Nf=24*(bf-cg.scale)}qg?(Kc.verticalizable=!0,$g.push({glyph:uk,imageName:kh,x:me,y:se+Nf,vertical:qg,scale:cg.scale,fontStack:cg.fontStack,sectionIndex:Dh,metrics:Ok,rect:Xk}),me+=vk*cg.scale+Ie):($g.push({glyph:uk,
imageName:kh,x:me,y:se+Nf,vertical:qg,scale:cg.scale,fontStack:cg.fontStack,sectionIndex:Dh,metrics:Ok,rect:Xk}),me+=Ok.advance*cg.scale+Ie)}if(0!==$g.length&&(rf=Math.max(me-Ie,rf),me=$g,$g=$g.length-1,Xf=Wk,Pe||Xf))for(ej=me[$g],ej=(me[$g].x+ej.metrics.advance*ej.scale)*Pe,cg=0;cg<=$g;cg++)me[cg].x-=ej,me[cg].y+=Xf;me=0;bf=re*bf+Wk;Lg.lineOffset=Math.max(Wk,ig);se+=bf;Wf=Math.max(bf,Wf)}else se+=re;++jh}var Eh;wd=se- -17;Dd=cf(Je);Je=Dd.horizontalAlign;Dd=Dd.verticalAlign;Pe=(Pe-Je)*rf;Nd=Wf!==
re?-wd*Dd- -17:(-Dd*Nd.length+.5)*re;re=0;for(Wf=Kc.positionedLines;re<Wf.length;re+=1)for(Qd=0,ze=Wf[re].positionedGlyphs;Qd<ze.length;Qd+=1)Ie=ze[Qd],Ie.x+=Pe,Ie.y+=Nd;Kc.top+=-Dd*wd;Kc.bottom=Kc.top+wd;Kc.left+=-Je*rf;Kc.right=Kc.left+rf}(Hb,H,P,ia,v,Ra,bb,ob,Vb,sb,jc,Mb),!function(Kc){for(var wd=0;wd<Kc.length;wd+=1)if(0!==Kc[wd].positionedGlyphs.length)return!1;return!0}(Aa)&&Hb}function zf(v,H,P,ia,xa,Aa){return H.imageName?(v=ia[H.imageName])?v.displaySize[0]*H.scale*24/Aa+xa:0:(v=(Aa=P[H.fontStack])&&
Aa[v])?v.metrics.advance*H.scale+xa:0}function ii(v,H,P,ia){var xa=Math.pow(v-H,2);return ia?v<H?xa/2:2*xa:xa+Math.abs(P)*P}function gh(v,H,P){var ia=0;return 10===v&&(ia-=1E4),P&&(ia+=150),40!==v&&65288!==v||(ia+=50),41!==H&&65289!==H||(ia+=50),ia}function wh(v,H,P,ia,xa,Aa){for(var Ra=null,bb=ii(H,P,xa,Aa),ob=0;ob<ia.length;ob+=1){var sb=ia[ob],Hb=ii(H-sb.x,P,xa,Aa)+sb.badness;Hb<=bb&&(Ra=sb,bb=Hb)}return{index:v,x:H,priorBreak:Ra,badness:bb}}function tf(v,H,P,ia,xa,Aa,Ra){if("point"!==Aa||!v)return[];
var bb;Aa=[];P=function(Nb,Mb,ac,Ic,Uc,Kc){for(var wd=0,Dd=0;Dd<Nb.length();Dd++){var Qd=Nb.getSection(Dd);wd+=zf(Nb.getCharCode(Dd),Qd,Ic,Uc,Mb,Kc)}return wd/Math.max(1,Math.ceil(wd/ac))}(v,H,P,ia,xa,Ra);for(var ob=0<=v.text.indexOf("​"),sb=0,Hb=0;Hb<v.length();Hb++){var Vb=v.getSection(Hb),jc=v.getCharCode(Hb);if(wc[jc]||(sb+=zf(jc,Vb,ia,xa,H,Ra)),Hb<v.length()-1){var ec=!(11904>(bb=jc)||!(je["Bopomofo Extended"](bb)||je.Bopomofo(bb)||je["CJK Compatibility Forms"](bb)||je["CJK Compatibility Ideographs"](bb)||
je["CJK Compatibility"](bb)||je["CJK Radicals Supplement"](bb)||je["CJK Strokes"](bb)||je["CJK Symbols and Punctuation"](bb)||je["CJK Unified Ideographs Extension A"](bb)||je["CJK Unified Ideographs"](bb)||je["Enclosed CJK Letters and Months"](bb)||je["Halfwidth and Fullwidth Forms"](bb)||je.Hiragana(bb)||je["Ideographic Description Characters"](bb)||je["Kangxi Radicals"](bb)||je["Katakana Phonetic Extensions"](bb)||je.Katakana(bb)||je["Vertical Forms"](bb)||je["Yi Radicals"](bb)||je["Yi Syllables"](bb)));
(Mc[jc]||ec||Vb.imageName)&&Aa.push(wh(Hb+1,sb,P,Aa,gh(jc,v.getCharCode(Hb+1),ec&&ob),!1))}}return function ac(Mb){return Mb?ac(Mb.priorBreak).concat(Mb.index):[]}(wh(v.length(),sb,P,Aa,0,!0))}function cf(v){var H=.5,P=.5;switch(v){case "right":case "top-right":case "bottom-right":H=1;break;case "left":case "top-left":case "bottom-left":H=0}switch(v){case "bottom":case "bottom-right":case "bottom-left":P=1;break;case "top":case "top-right":case "top-left":P=0}return{horizontalAlign:H,verticalAlign:P}}
function gg(v,H,P,ia,xa,Aa){v=v.image;if(v.content){var Ra=v.content;var bb=v.pixelRatio||1;Ra=[Ra[0]/bb,Ra[1]/bb,v.displaySize[0]-Ra[2]/bb,v.displaySize[1]-Ra[3]/bb]}var ob,sb,Hb,Vb;bb=H.left*Aa;var jc=H.right*Aa;"width"===P||"both"===P?(Vb=xa[0]+bb-ia[3],sb=xa[0]+jc+ia[1]):sb=(Vb=xa[0]+(bb+jc-v.displaySize[0])/2)+v.displaySize[0];bb=H.top*Aa;H=H.bottom*Aa;return"height"===P||"both"===P?(ob=xa[1]+bb-ia[0],Hb=xa[1]+H+ia[2]):Hb=(ob=xa[1]+(bb+H-v.displaySize[1])/2)+v.displaySize[1],{image:v,top:ob,
right:sb,bottom:Hb,left:Vb,collisionPadding:Ra}}function Mf(v,H){H=H.expression;if("constant"===H.kind)return{kind:"constant",layoutSize:H.evaluate(new Df(v+1))};if("source"===H.kind)return{kind:"source"};for(var P=H.zoomStops,ia=H.interpolationType,xa=0;xa<P.length&&P[xa]<=v;)xa++;for(var Aa=xa=Math.max(0,xa-1);Aa<P.length&&P[Aa]<v+1;)Aa++;Aa=Math.min(P.length-1,Aa);v=P[xa];P=P[Aa];return"composite"===H.kind?{kind:"composite",minZoom:v,maxZoom:P,interpolationType:ia}:{kind:"camera",minZoom:v,maxZoom:P,
minSize:H.evaluate(new Df(v)),maxSize:H.evaluate(new Df(P)),interpolationType:ia}}function ji(v,H,P){var ia=H.uSize,xa=P.lowerSize;return"source"===v.kind?xa/128:"composite"===v.kind?mb(xa/128,P.upperSize/128,H.uSizeT):ia}function Zi(v,H){var P=0,ia=0;if("constant"===v.kind)ia=v.layoutSize;else if("source"!==v.kind){var xa=v.interpolationType;H=xa?c(dg.interpolationFactor(xa,H,v.minZoom,v.maxZoom),0,1):0;"camera"===v.kind?ia=mb(v.minSize,v.maxSize,H):P=H}return{uSizeT:P,uSize:ia}}function kj(v,H,
P,ia,xa){if(void 0===H.segment)return!0;var Aa=H;H=H.segment+1;for(var Ra=0;Ra>-P/2;){if(0>--H)return!1;Ra-=v[H].dist(Aa);Aa=v[H]}Ra+=v[H].dist(v[H+1]);H++;Aa=[];for(var bb=0;Ra<P/2;){var ob=v[H],sb=v[H+1];if(!sb)return!1;var Hb=v[H-1].angleTo(ob)-ob.angleTo(sb);Hb=Math.abs((Hb+3*Math.PI)%(2*Math.PI)-Math.PI);Aa.push({distance:Ra,angleDelta:Hb});for(bb+=Hb;Ra-Aa[0].distance>ia;)bb-=Aa.shift().angleDelta;if(bb>xa)return!1;H++;Ra+=ob.dist(sb)}return!0}function xh(v){for(var H=0,P=0;P<v.length-1;P++)H+=
v[P].dist(v[P+1]);return H}function hh(v,H,P,ia,xa,Aa){xa=P?.6*xa*Aa:0;P=Math.max(P?P.right-P.left:0,ia?ia.right-ia.left:0)*Aa;var Ra=0,bb=xh(v)/2;for(ia=0;ia<v.length-1;ia++){Aa=v[ia];var ob=v[ia+1],sb=Aa.dist(ob);if(Ra+sb>bb)return bb=(bb-Ra)/sb,Ra=mb(Aa.x,ob.x,bb),bb=mb(Aa.y,ob.y,bb),ia=new od(Ra,bb,ob.angleTo(Aa),ia),ia._round(),!xa||kj(v,ia,P,xa,H)?ia:void 0;Ra+=sb}}function wg(v,H,P,ia,xa,Aa,Ra,bb,ob){xa=Math.max(ia?ia.right-ia.left:0,xa?xa.right-xa.left:0);var sb=xa*Ra,Hb=0===v[0].x||v[0].x===
ob||0===v[0].y||v[0].y===ob;return H-sb<H/4&&(H=sb+H/4),function Dd(jc,ec,Nb,Mb,ac,Ic,Uc,Kc,wd){var Qd=Ic/2,Nd=xh(jc),re=0;ec-=Nb;for(var Je=[],Pe=0;Pe<jc.length-1;Pe++){for(var ze=jc[Pe],Ie=jc[Pe+1],Ye=ze.dist(Ie),qe=Ie.angleTo(ze);ec+Nb<re+Ye;){var me=((ec+=Nb)-re)/Ye,se=mb(ze.x,Ie.x,me);me=mb(ze.y,Ie.y,me);0<=se&&se<wd&&0<=me&&me<wd&&0<=ec-Qd&&ec+Qd<=Nd&&(se=new od(se,me,qe,Pe),se._round(),Mb&&!kj(jc,se,Ic,Mb,ac)||Je.push(se))}re+=Ye}return Kc||Je.length||Uc||(Je=Dd(jc,re/2,Nb,Mb,ac,Ic,Uc,!0,wd)),
Je}(v,Hb?H/2*bb%H:(xa/2+2*Aa)*Ra*bb%H,H,ia?.6*Aa*Ra:0,P,sb,Hb,!1,ob)}function zh(v,H,P,ia,xa){for(var Aa=[],Ra=0;Ra<v.length;Ra++)for(var bb=v[Ra],ob=void 0,sb=0;sb<bb.length-1;sb++){var Hb=bb[sb],Vb=bb[sb+1];Hb.x<H&&Vb.x<H||(Hb.x<H?Hb=(new Bd(H,Hb.y+(H-Hb.x)/(Vb.x-Hb.x)*(Vb.y-Hb.y)))._round():Vb.x<H&&(Vb=(new Bd(H,Hb.y+(H-Hb.x)/(Vb.x-Hb.x)*(Vb.y-Hb.y)))._round()),Hb.y<P&&Vb.y<P||(Hb.y<P?Hb=(new Bd(Hb.x+(P-Hb.y)/(Vb.y-Hb.y)*(Vb.x-Hb.x),P))._round():Vb.y<P&&(Vb=(new Bd(Hb.x+(P-Hb.y)/(Vb.y-Hb.y)*(Vb.x-
Hb.x),P))._round()),Hb.x>=ia&&Vb.x>=ia||(Hb.x>=ia?Hb=(new Bd(ia,Hb.y+(ia-Hb.x)/(Vb.x-Hb.x)*(Vb.y-Hb.y)))._round():Vb.x>=ia&&(Vb=(new Bd(ia,Hb.y+(ia-Hb.x)/(Vb.x-Hb.x)*(Vb.y-Hb.y)))._round()),Hb.y>=xa&&Vb.y>=xa||(Hb.y>=xa?Hb=(new Bd(Hb.x+(xa-Hb.y)/(Vb.y-Hb.y)*(Vb.x-Hb.x),xa))._round():Vb.y>=xa&&(Vb=(new Bd(Hb.x+(xa-Hb.y)/(Vb.y-Hb.y)*(Vb.x-Hb.x),xa))._round()),ob&&Hb.equals(ob[ob.length-1])||Aa.push(ob=[Hb]),ob.push(Vb)))))}return Aa}function Zj(v,H,P,ia){var xa=[],Aa=v.image,Ra=Aa.pixelRatio,bb=Aa.paddedRect.w-
2,ob=Aa.paddedRect.h-2,sb=v.right-v.left,Hb=v.bottom-v.top,Vb=Aa.stretchX||[[0,bb]],jc=Aa.stretchY||[[0,ob]],ec=function(Pe,ze){return Pe+ze[1]-ze[0]},Nb=Vb.reduce(ec,0),Mb=jc.reduce(ec,0),ac=bb-Nb,Ic=ob-Mb,Uc=0,Kc=Nb,wd=0,Dd=Mb,Qd=0,Nd=ac,re=0,Je=Ic;Aa.content&&ia&&(ec=Aa.content,Uc=Sf(Vb,0,ec[0]),wd=Sf(jc,0,ec[1]),Kc=Sf(Vb,ec[0],ec[2]),Dd=Sf(jc,ec[1],ec[3]),Qd=ec[0]-Uc,re=ec[1]-wd,Nd=ec[2]-ec[0]-Kc,Je=ec[3]-ec[1]-Dd);ec=function(Pe,ze,Ie,Ye){var qe=(Pe.stretch-Uc)/Kc*sb+v.left,me=Pe.fixed-Qd-Nd*
Pe.stretch/Nb,se=(ze.stretch-wd)/Dd*Hb+v.top,rf=ze.fixed-re-Je*ze.stretch/Mb,Wf=(Ie.stretch-Uc)/Kc*sb+v.left,jh=Ie.fixed-Qd-Nd*Ie.stretch/Nb,Dg=(Ye.stretch-wd)/Dd*Hb+v.top,Xf=Ye.fixed-re-Je*Ye.stretch/Mb,bf=new Bd(qe,se);se=new Bd(Wf,se);Wf=new Bd(Wf,Dg);qe=new Bd(qe,Dg);me=new Bd(me/Ra,rf/Ra);jh=new Bd(jh/Ra,Xf/Ra);if(rf=H*Math.PI/180)Xf=Math.sin(rf),rf=Math.cos(rf),Xf=[rf,-Xf,Xf,rf],bf._matMult(Xf),se._matMult(Xf),qe._matMult(Xf),Wf._matMult(Xf);Pe=Pe.stretch+Pe.fixed;ze=ze.stretch+ze.fixed;return{tl:bf,
tr:se,bl:qe,br:Wf,tex:{x:Aa.paddedRect.x+1+Pe,y:Aa.paddedRect.y+1+ze,w:Ie.stretch+Ie.fixed-Pe,h:Ye.stretch+Ye.fixed-ze},writingMode:void 0,glyphOffset:[0,0],sectionIndex:0,pixelOffsetTL:me,pixelOffsetBR:jh,minFontScaleX:Nd/Ra/sb,minFontScaleY:Je/Ra/Hb,isSDF:P}};if(ia&&(Aa.stretchX||Aa.stretchY))for(ia=Jg(Vb,ac,Nb),jc=Jg(jc,Ic,Mb),bb=0;bb<ia.length-1;bb++)for(ob=ia[bb],Vb=ia[bb+1],Ic=0;Ic<jc.length-1;Ic++)xa.push(ec(ob,jc[Ic],Vb,jc[Ic+1]));else xa.push(ec({fixed:0,stretch:-1},{fixed:0,stretch:-1},
{fixed:0,stretch:bb+1},{fixed:0,stretch:ob+1}));return xa}function Sf(v,H,P){for(var ia=0,xa=0;xa<v.length;xa+=1){var Aa=v[xa];ia+=Math.max(H,Math.min(P,Aa[1]))-Math.max(H,Math.min(P,Aa[0]))}return ia}function Jg(v,H,P){for(var ia=[{fixed:-1,stretch:0}],xa=0;xa<v.length;xa+=1){var Aa=v[xa],Ra=Aa[0];Aa=Aa[1];var bb=ia[ia.length-1];ia.push({fixed:Ra-bb.stretch,stretch:bb.stretch});ia.push({fixed:Ra-bb.stretch,stretch:bb.stretch+(Aa-Ra)})}return ia.push({fixed:H+1,stretch:P}),ia}function Sg(v,H){return v<
H?-1:v>H?1:0}function Rh(v,H,P){void 0===H&&(H=1);void 0===P&&(P=!1);for(var ia=1/0,xa=1/0,Aa=-1/0,Ra=-1/0,bb=v[0],ob=0;ob<bb.length;ob++){var sb=bb[ob];(!ob||sb.x<ia)&&(ia=sb.x);(!ob||sb.y<xa)&&(xa=sb.y);(!ob||sb.x>Aa)&&(Aa=sb.x);(!ob||sb.y>Ra)&&(Ra=sb.y)}sb=Math.min(Aa-ia,Ra-xa);bb=sb/2;ob=new ed([],pb);if(0===sb)return new Bd(ia,xa);for(;ia<Aa;ia+=sb)for(var Hb=xa;Hb<Ra;Hb+=sb)ob.push(new Bb(ia+bb,Hb+bb,bb,v));Ra=Aa=xa=0;ia=v[0];sb=0;Hb=ia.length;for(var Vb=Hb-1;sb<Hb;Vb=sb++){var jc=ia[sb];Vb=
ia[Vb];var ec=jc.x*Vb.y-Vb.x*jc.y;Aa+=(jc.x+Vb.x)*ec;Ra+=(jc.y+Vb.y)*ec;xa+=3*ec}xa=new Bb(Aa/xa,Ra/xa,0,v);for(Aa=ob.length;ob.length;)Ra=ob.pop(),(Ra.d>xa.d||!xa.d)&&(xa=Ra,P&&console.log("found best %d after %d probes",Math.round(1E4*Ra.d)/1E4,Aa)),Ra.max-xa.d<=H||(ob.push(new Bb(Ra.p.x-(bb=Ra.h/2),Ra.p.y-bb,bb,v)),ob.push(new Bb(Ra.p.x+bb,Ra.p.y-bb,bb,v)),ob.push(new Bb(Ra.p.x-bb,Ra.p.y+bb,bb,v)),ob.push(new Bb(Ra.p.x+bb,Ra.p.y+bb,bb,v)),Aa+=4);return P&&(console.log("num probes: "+Aa),console.log("best distance: "+
xa.d)),xa.p}function pb(v,H){return H.max-v.max}function Bb(v,H,P,ia){this.p=new Bd(v,H);this.h=P;v=this.p;H=!1;P=1/0;for(var xa=0;xa<ia.length;xa++)for(var Aa=ia[xa],Ra=0,bb=Aa.length,ob=bb-1;Ra<bb;ob=Ra++){var sb=Aa[Ra];ob=Aa[ob];sb.y>v.y!=ob.y>v.y&&v.x<(ob.x-sb.x)*(v.y-sb.y)/(ob.y-sb.y)+sb.x&&(H=!H);P=Math.min(P,Fc(v,sb,ob))}this.d=(H?1:-1)*Math.sqrt(P);this.max=this.d+this.h*Math.SQRT2}function Pb(v,H){return H[1]!==Wd?function(P,ia,xa){var Aa=0,Ra=0;switch(ia=Math.abs(ia),xa=Math.abs(xa),P){case "top-right":case "top-left":case "top":Ra=
xa-7;break;case "bottom-right":case "bottom-left":case "bottom":Ra=7-xa}switch(P){case "top-right":case "bottom-right":case "right":Aa=-ia;break;case "top-left":case "bottom-left":case "left":Aa=ia}return[Aa,Ra]}(v,H[0],H[1]):function(P,ia){var xa=0,Aa=0;0>ia&&(ia=0);var Ra=ia/Math.sqrt(2);switch(P){case "top-right":case "top-left":Aa=Ra-7;break;case "bottom-right":case "bottom-left":Aa=7-Ra;break;case "bottom":Aa=7-ia;break;case "top":Aa=ia-7}switch(P){case "top-right":case "bottom-right":xa=-Ra;
break;case "top-left":case "bottom-left":xa=Ra;break;case "left":xa=ia;break;case "right":xa=-ia}return[xa,Aa]}(v,H[0])}function bc(v){switch(v){case "right":case "top-right":case "bottom-right":return"right";case "left":case "top-left":case "bottom-left":return"left"}return"center"}function pc(v,H,P,ia,xa,Aa,Ra,bb,ob,sb,Hb,Vb,jc,ec,Nb){for(var Mb=v.allowVerticalPlacement,ac=xa.layout.get("text-rotate").evaluate(Ra,{})*Math.PI/180,Ic=[],Uc=0,Kc=P.positionedLines;Uc<Kc.length;Uc+=1)for(var wd=Kc[Uc],
Dd=0,Qd=wd.positionedGlyphs;Dd<Qd.length;Dd+=1){var Nd=Qd[Dd];if(Nd.rect){var re=Nd.rect||{},Je=4,Pe=!0,ze=1,Ie=0,Ye=(Aa||Mb)&&Nd.vertical,qe=Nd.metrics.advance*Nd.scale/2;if(Mb&&P.verticalizable&&(Ie=wd.lineOffset/2-(Nd.imageName?-(24-Nd.metrics.width*Nd.scale)/2:24*(Nd.scale-1))),Nd.imageName){var me=ia[Nd.imageName];Pe=me.sdf;Je=1/(ze=me.pixelRatio)}me=Aa?[Nd.x+qe,Nd.y]:[0,0];var se=Aa?[0,0]:[Nd.x+qe+bb[0],Nd.y+bb[1]-Ie],rf=[0,0];Ye&&(rf=se,se=[0,0]);Ie=(Nd.metrics.left-Je)*Nd.scale-qe+se[0];Je=
(-Nd.metrics.top-Je)*Nd.scale+se[1];se=Ie+re.w*Nd.scale/ze;var Wf=Je+re.h*Nd.scale/ze;ze=new Bd(Ie,Je);Je=new Bd(se,Je);Ie=new Bd(Ie,Wf);se=new Bd(se,Wf);Ye&&(Ye=new Bd(-qe,qe- -17),Wf=-Math.PI/2,qe=12-qe,qe=new Bd(22-qe,-(Nd.imageName?qe:0)),rf=new (Function.prototype.bind.apply(Bd,[null].concat(rf))),ze._rotateAround(Wf,Ye)._add(qe)._add(rf),Je._rotateAround(Wf,Ye)._add(qe)._add(rf),Ie._rotateAround(Wf,Ye)._add(qe)._add(rf),se._rotateAround(Wf,Ye)._add(qe)._add(rf));ac&&(qe=Math.sin(ac),rf=Math.cos(ac),
qe=[rf,-qe,qe,rf],ze._matMult(qe),Je._matMult(qe),Ie._matMult(qe),se._matMult(qe));qe=new Bd(0,0);rf=new Bd(0,0);Ic.push({tl:ze,tr:Je,bl:Ie,br:se,tex:re,writingMode:P.writingMode,glyphOffset:me,sectionIndex:Nd.sectionIndex,isSDF:Pe,pixelOffsetTL:qe,pixelOffsetBR:rf,minFontScaleX:0,minFontScaleY:0})}}P=v.textSizeData;ia=null;"source"===P.kind?32640<(ia=[128*xa.layout.get("text-size").evaluate(Ra,{})])[0]&&z(v.layerIds[0]+': Value for "text-size" is \x3e\x3d 255. Reduce your "text-size".'):"composite"===
P.kind&&(32640<(ia=[128*ec.compositeTextSizes[0].evaluate(Ra,{},Nb),128*ec.compositeTextSizes[1].evaluate(Ra,{},Nb)])[0]||32640<ia[1])&&z(v.layerIds[0]+': Value for "text-size" is \x3e\x3d 255. Reduce your "text-size".');v.addSymbols(v.text,Ic,ia,bb,Aa,Ra,sb,H,ob.lineStartIndex,ob.lineLength,jc,Nb);for(H=0;H<Hb.length;H+=1)Vb[Hb[H]]=v.text.placedSymbolArray.length-1;return 4*Ic.length}function dd(v){for(var H in v)return v[H];return null}function id(v,H,P,ia){v=v.compareText;if(H in v)for(var xa=
v[H],Aa=xa.length-1;0<=Aa;Aa--){if(ia.dist(xa[Aa])<P)return!0}else v[H]=[];return v[H].push(ia),!1}function Xc(v,H,P,ia,xa,Aa,Ra,bb,ob,sb,Hb,Vb,jc){v.emplaceBack(H,P,Math.round(32*ia),Math.round(32*xa),Aa,Ra,((bb?Math.min(32640,Math.round(bb[0])):0)<<1)+(ob?1:0),bb?Math.min(32640,Math.round(bb[1])):0,16*sb,16*Hb,256*Vb,256*jc)}function fd(v,H,P){v.emplaceBack(H.x,H.y,P);v.emplaceBack(H.x,H.y,P);v.emplaceBack(H.x,H.y,P);v.emplaceBack(H.x,H.y,P)}function rd(v){var H=0;for(v=v.sections;H<v.length;H+=
1){a:{var P=0;for(var ia=v[H].text;P<ia.length;P+=1)if(oe(ia[P].charCodeAt(0))){P=!0;break a}P=!1}if(P)return!0}return!1}function Id(v,H,P){P=12756274*Math.PI/256/Math.pow(2,P);return[v*P-12756274*Math.PI/2,H*P-12756274*Math.PI/2]}function yd(v){return(180+v)/360}function td(v){return(180-180/Math.PI*Math.log(Math.tan(Math.PI/4+v*Math.PI/360)))/360}function Jd(v){return 360/Math.PI*Math.atan(Math.exp((180-360*v)*Math.PI/180))-90}function Rd(v,H,P,ia,xa){0>(v*=2)&&(v=-1*v-1);var Aa=1<<P;return(Aa*
Aa*v+Aa*xa+ia).toString(36)+P.toString(36)+H.toString(36)}function Md(v,H,P,ia,xa){return x(v,function(Aa,Ra){return(Aa=H instanceof Wg?H.get(Ra):null)&&Aa.evaluate?Aa.evaluate(P,ia,xa):Aa})}function Ne(v){for(var H=1/0,P=1/0,ia=-1/0,xa=-1/0,Aa=0;Aa<v.length;Aa+=1){var Ra=v[Aa];H=Math.min(H,Ra.x);P=Math.min(P,Ra.y);ia=Math.max(ia,Ra.x);xa=Math.max(xa,Ra.y)}return{minX:H,minY:P,maxX:ia,maxY:xa}}function xe(v,H){return H-v}var ve=e;e.prototype.sampleCurveX=function(v){return((this.ax*v+this.bx)*v+this.cx)*
v};e.prototype.sampleCurveY=function(v){return((this.ay*v+this.by)*v+this.cy)*v};e.prototype.sampleCurveDerivativeX=function(v){return(3*this.ax*v+2*this.bx)*v+this.cx};e.prototype.solveCurveX=function(v,H){var P,ia;void 0===H&&(H=1E-6);var xa=v;for(P=0;8>P;P++){if(ia=this.sampleCurveX(xa)-v,Math.abs(ia)<H)return xa;var Aa=this.sampleCurveDerivativeX(xa);if(1E-6>Math.abs(Aa))break;xa-=ia/Aa}if((xa=v)<(P=0))return P;if(xa>(Aa=1))return Aa;for(;P<Aa&&!(ia=this.sampleCurveX(xa),Math.abs(ia-v)<H);)v>
ia?P=xa:Aa=xa,xa=.5*(Aa-P)+P;return xa};e.prototype.solve=function(v,H){return this.sampleCurveY(this.solveCurveX(v,H))};var Bd=h;h.prototype={clone:function(){return new h(this.x,this.y)},add:function(v){return this.clone()._add(v)},sub:function(v){return this.clone()._sub(v)},multByPoint:function(v){return this.clone()._multByPoint(v)},divByPoint:function(v){return this.clone()._divByPoint(v)},mult:function(v){return this.clone()._mult(v)},div:function(v){return this.clone()._div(v)},rotate:function(v){return this.clone()._rotate(v)},
rotateAround:function(v,H){return this.clone()._rotateAround(v,H)},matMult:function(v){return this.clone()._matMult(v)},unit:function(){return this.clone()._unit()},perp:function(){return this.clone()._perp()},round:function(){return this.clone()._round()},mag:function(){return Math.sqrt(this.x*this.x+this.y*this.y)},equals:function(v){return this.x===v.x&&this.y===v.y},dist:function(v){return Math.sqrt(this.distSqr(v))},distSqr:function(v){var H=v.x-this.x;v=v.y-this.y;return H*H+v*v},angle:function(){return Math.atan2(this.y,
this.x)},angleTo:function(v){return Math.atan2(this.y-v.y,this.x-v.x)},angleWith:function(v){return this.angleWithSep(v.x,v.y)},angleWithSep:function(v,H){return Math.atan2(this.x*H-this.y*v,this.x*v+this.y*H)},_matMult:function(v){var H=v[2]*this.x+v[3]*this.y;return this.x=v[0]*this.x+v[1]*this.y,this.y=H,this},_add:function(v){return this.x+=v.x,this.y+=v.y,this},_sub:function(v){return this.x-=v.x,this.y-=v.y,this},_mult:function(v){return this.x*=v,this.y*=v,this},_div:function(v){return this.x/=
v,this.y/=v,this},_multByPoint:function(v){return this.x*=v.x,this.y*=v.y,this},_divByPoint:function(v){return this.x/=v.x,this.y/=v.y,this},_unit:function(){return this._div(this.mag()),this},_perp:function(){var v=this.y;return this.y=this.x,this.x=-v,this},_rotate:function(v){var H=Math.cos(v);v=Math.sin(v);var P=v*this.x+H*this.y;return this.x=H*this.x-v*this.y,this.y=P,this},_rotateAround:function(v,H){var P=Math.cos(v);v=Math.sin(v);var ia=H.y+v*(this.x-H.x)+P*(this.y-H.y);return this.x=H.x+
P*(this.x-H.x)-v*(this.y-H.y),this.y=ia,this},_round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this}};h.convert=function(v){return v instanceof h?v:Array.isArray(v)?new h(v[0],v[1]):v};var Td=l(.25,.1,.25,1),Zd=1,kf={},of=null,qf,We,af,Gf,mg=self.performance&&self.performance.now?self.performance.now.bind(self.performance):Date.now.bind(Date),If=self.requestAnimationFrame||self.mozRequestAnimationFrame||self.webkitRequestAnimationFrame||self.msRequestAnimationFrame,cj=
self.cancelAnimationFrame||self.mozCancelAnimationFrame||self.webkitCancelAnimationFrame||self.msCancelAnimationFrame,ee={now:mg,frame:function(v){var H=If(v);return{cancel:function(){return cj(H)}}},getImageData:function(v,H){void 0===H&&(H=0);var P=self.document.createElement("canvas"),ia=P.getContext("2d");if(!ia)throw Error("failed to create canvas 2d context");return P.width=v.width,P.height=v.height,ia.drawImage(v,0,0,v.width,v.height),ia.getImageData(-H,-H,v.width+2*H,v.height+2*H)},resolveURL:function(v){return qf||
(qf=self.document.createElement("a")),qf.href=v,qf.href},hardwareConcurrency:self.navigator.hardwareConcurrency||4,get devicePixelRatio(){return self.devicePixelRatio},get prefersReducedMotion(){return!!self.matchMedia&&(null==We&&(We=self.matchMedia("(prefers-reduced-motion: reduce)")),We.matches)}},df={API_URL:"https://api.mapbox.com",get EVENTS_URL(){return this.API_URL?0===this.API_URL.indexOf("https://api.mapbox.cn")?"https://events.mapbox.cn/events/v2":0===this.API_URL.indexOf("https://api.mapbox.com")?
"https://events.mapbox.com/events/v2":null:null},FEEDBACK_URL:"https://apps.mapbox.com/feedback",REQUIRE_ACCESS_TOKEN:!0,ACCESS_TOKEN:null,MAX_PARALLEL_IMAGE_REQUESTS:16},ng={supported:!1,testSupport:function(v){!Yf&&Gf&&(yh?J(v):af=v)}},Yf=!1,yh=!1;self.document&&((Gf=self.document.createElement("img")).onload=function(){af&&J(af);af=null;yh=!0},Gf.onerror=function(){Yf=!0;af=null},Gf.src="data:image/webp;base64,UklGRh4AAABXRUJQVlA4TBEAAAAvAQAAAAfQ//73v/+BiOh/AAA\x3d");var Tg=function(v,H){this._transformRequestFn=
v;this._customAccessToken=H;this._createSkuToken()};Tg.prototype._createSkuToken=function(){var v;var H="";for(v=0;10>v;v++)H+="0123456789abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ"[Math.floor(62*Math.random())];H=["101",H].join("");v=Date.now()+432E5;this._skuToken=H;this._skuTokenExpiresAt=v};Tg.prototype._isSkuTokenExpired=function(){return Date.now()>this._skuTokenExpiresAt};Tg.prototype.transformRequest=function(v,H){return this._transformRequestFn&&this._transformRequestFn(v,H)||{url:v}};
Tg.prototype.normalizeStyleURL=function(v,H){if(!N(v))return v;v=M(v);return v.path="/styles/v1"+v.path,this._makeAPIURL(v,this._customAccessToken||H)};Tg.prototype.normalizeGlyphsURL=function(v,H){if(!N(v))return v;v=M(v);return v.path="/fonts/v1"+v.path,this._makeAPIURL(v,this._customAccessToken||H)};Tg.prototype.normalizeSourceURL=function(v,H){if(!N(v))return v;v=M(v);return v.path="/v4/"+v.authority+".json",v.params.push("secure"),this._makeAPIURL(v,this._customAccessToken||H)};Tg.prototype.normalizeSpriteURL=
function(v,H,P,ia){var xa=M(v);return N(v)?(xa.path="/styles/v1"+xa.path+"/sprite"+H+P,this._makeAPIURL(xa,this._customAccessToken||ia)):(xa.path+=""+H+P,E(xa))};Tg.prototype.normalizeTileURL=function(v,H){if(this._isSkuTokenExpired()&&this._createSkuToken(),v&&!N(v))return v;v=M(v);v.path=v.path.replace(/(\.(png|jpg)\d*)(?=$)/,(2<=ee.devicePixelRatio||512===H?"@2x":"")+(ng.supported?".webp":"$1"));v.path=v.path.replace(/^.+\/v4\//,"/");v.path="/v4"+v.path;if(!(H=this._customAccessToken))a:{H=0;for(var P=
v.params;H<P.length;H+=1){var ia=P[H].match(/^access_token=(.*)$/);if(ia){H=ia[1];break a}}H=null}H=H||df.ACCESS_TOKEN;return df.REQUIRE_ACCESS_TOKEN&&H&&this._skuToken&&v.params.push("sku\x3d"+this._skuToken),this._makeAPIURL(v,H)};Tg.prototype.canonicalizeTileURL=function(v,H){var P=M(v);if(!P.path.match(/(^\/v4\/)/)||!P.path.match(/\.[\w]+$/))return v;v="mapbox://tiles/"+P.path.replace("/v4/","");P=P.params;return H&&(P=P.filter(function(ia){return!ia.match(/^access_token=/)})),P.length&&(v+="?"+
P.join("\x26")),v};Tg.prototype.canonicalizeTileset=function(v,H){H=!!H&&N(H);var P=[],ia=0;for(v=v.tiles||[];ia<v.length;ia+=1){var xa=v[ia];aj.test(xa)?P.push(this.canonicalizeTileURL(xa,H)):P.push(xa)}return P};Tg.prototype._makeAPIURL=function(v,H){var P=M(df.API_URL);if(v.protocol=P.protocol,v.authority=P.authority,"/"!==P.path&&(v.path=""+P.path+v.path),!df.REQUIRE_ACCESS_TOKEN)return E(v);if(!(H=H||df.ACCESS_TOKEN))throw Error("An API access token is required to use Mapbox GL. See https://www.mapbox.com/api-documentation/#access-tokens-and-token-scopes");
if("s"===H[0])throw Error("Use a public access token (pk.*) with Mapbox GL, not a secret access token (sk.*). See https://www.mapbox.com/api-documentation/#access-tokens-and-token-scopes");return v.params=v.params.filter(function(ia){return-1===ia.indexOf("access_token")}),v.params.push("access_token\x3d"+H),E(v)};var aj=/^((https?:)?\/\/)?([^\/]+\.)?mapbox\.c(n|om)(\/|\?|$)/i,Jk=/^(\w+):\/\/([^/?]*)(\/[^?]+)?\??(.+)?/,Th=function(v){this.type=v;this.anonId=null;this.eventData={};this.queue=[];this.pendingRequest=
null};Th.prototype.getStorageKey=function(v){var H,P=L(df.ACCESS_TOKEN);return H=P&&P.u?self.btoa(encodeURIComponent(P.u).replace(/%([0-9A-F]{2})/g,function(ia,xa){return String.fromCharCode(Number("0x"+xa))})):df.ACCESS_TOKEN||"",v?"mapbox.eventData."+v+":"+H:"mapbox.eventData:"+H};Th.prototype.fetchEventData=function(){var v=I("localStorage"),H=this.getStorageKey(),P=this.getStorageKey("uuid");if(v)try{var ia=self.localStorage.getItem(H);ia&&(this.eventData=JSON.parse(ia));var xa=self.localStorage.getItem(P);
xa&&(this.anonId=xa)}catch(Aa){z("Unable to read from LocalStorage")}};Th.prototype.saveEventData=function(){var v=I("localStorage"),H=this.getStorageKey(),P=this.getStorageKey("uuid");if(v)try{self.localStorage.setItem(P,this.anonId),1<=Object.keys(this.eventData).length&&self.localStorage.setItem(H,JSON.stringify(this.eventData))}catch(ia){z("Unable to write to LocalStorage")}};Th.prototype.processRequests=function(v){};Th.prototype.postEvent=function(v,H,P,ia){var xa=this;if(df.EVENTS_URL){var Aa=
M(df.EVENTS_URL);Aa.params.push("access_token\x3d"+(ia||df.ACCESS_TOKEN||""));v={event:this.type,created:(new Date(v)).toISOString(),sdkIdentifier:"mapbox-gl-js",sdkVersion:"1.10.1",skuId:"01",userId:this.anonId};H=H?d(v,H):v;Aa={url:E(Aa),headers:{"Content-Type":"text/plain"},body:JSON.stringify([H])};this.pendingRequest=ub(Aa,function(Ra){xa.pendingRequest=null;P(Ra);xa.saveEventData();xa.processRequests(ia)})}};Th.prototype.queueRequest=function(v,H){this.queue.push(v);this.processRequests(H)};
var Vf,Yi,oj=function(v){function H(){v.call(this,"map.load");this.success={};this.skuToken=""}return v&&(H.__proto__=v),(H.prototype=Object.create(v&&v.prototype)).constructor=H,H.prototype.postMapLoadEvent=function(P,ia,xa,Aa){this.skuToken=xa;(df.EVENTS_URL&&Aa||df.ACCESS_TOKEN&&Array.isArray(P)&&P.some(function(Ra){return N(Ra)||aj.test(Ra)}))&&this.queueRequest({id:ia,timestamp:Date.now()},Aa)},H.prototype.processRequests=function(P){var ia=this;if(!this.pendingRequest&&0!==this.queue.length){var xa=
this.queue.shift(),Aa=xa.id;xa=xa.timestamp;Aa&&this.success[Aa]||(this.anonId||this.fetchEventData(),r(this.anonId)||(this.anonId=p()),this.postEvent(xa,{skuToken:this.skuToken},function(Ra){Ra||Aa&&(ia.success[Aa]=!0)},P))}},H}(Th),Eg=new (function(v){function H(P){v.call(this,"appUserTurnstile");this._customAccessToken=P}return v&&(H.__proto__=v),(H.prototype=Object.create(v&&v.prototype)).constructor=H,H.prototype.postTurnstileEvent=function(P,ia){df.EVENTS_URL&&df.ACCESS_TOKEN&&Array.isArray(P)&&
P.some(function(xa){return N(xa)||aj.test(xa)})&&this.queueRequest(Date.now(),ia)},H.prototype.processRequests=function(P){var ia=this;if(!this.pendingRequest&&0!==this.queue.length){this.anonId&&this.eventData.lastSuccess&&this.eventData.tokenU||this.fetchEventData();var xa=L(df.ACCESS_TOKEN),Aa=xa?xa.u:df.ACCESS_TOKEN;xa=Aa!==this.eventData.tokenU;r(this.anonId)||(this.anonId=p(),xa=!0);var Ra=this.queue.shift();if(this.eventData.lastSuccess){var bb=new Date(this.eventData.lastSuccess),ob=new Date(Ra),
sb=(Ra-this.eventData.lastSuccess)/864E5;xa=xa||1<=sb||-1>sb||bb.getDate()!==ob.getDate()}else xa=!0;if(!xa)return this.processRequests();this.postEvent(Ra,{"enabled.telemetry":!1},function(Hb){Hb||(ia.eventData.lastSuccess=Ra,ia.eventData.tokenU=Aa)},P)}},H}(Th)),dh=Eg.postTurnstileEvent.bind(Eg),qh=new oj,Vj=qh.postMapLoadEvent.bind(qh),Fj=500,Db=50,Z,fa=1/0,da={Unknown:"Unknown",Style:"Style",Source:"Source",Tile:"Tile",Glyphs:"Glyphs",SpriteImage:"SpriteImage",SpriteJSON:"SpriteJSON",Image:"Image"};
"function"==typeof Object.freeze&&Object.freeze(da);var ta=function(v){function H(P,ia,xa){401===ia&&aj.test(xa)&&(P+=": you may have provided an invalid Mapbox access token. See https://www.mapbox.com/api-documentation/#access-tokens-and-token-scopes");v.call(this,P);this.status=ia;this.url=xa;this.name=this.constructor.name;this.message=P}return v&&(H.__proto__=v),(H.prototype=Object.create(v&&v.prototype)).constructor=H,H.prototype.toString=function(){return this.name+": "+this.message+" ("+this.status+
"): "+this.url},H}(Error),Ga=D()?function(){return self.worker&&self.worker.referrer}:function(){return("blob:"===self.location.protocol?self.parent:self).location.href},Za=function(v,H){if(!(/^file:/.test(P=v.url)||/^file:/.test(Ga())&&!/^\w+:/.test(P))){if(self.fetch&&self.Request&&self.AbortController&&self.Request.prototype.hasOwnProperty("signal"))return function(ia,xa){var Aa,Ra=new self.AbortController,bb=new self.Request(ia.url,{method:ia.method||"GET",body:ia.body,credentials:ia.credentials,
headers:ia.headers,referrer:Ga(),signal:Ra.signal}),ob=!1,sb=!1,Hb=0<(Aa=bb.url).indexOf("sku\x3d")&&aj.test(Aa);"json"===ia.type&&bb.headers.set("Accept","application/json");Aa=function(jc,ec,Nb){if(!sb){if(jc&&"SecurityError"!==jc.message&&z(jc),ec&&Nb)return Vb(ec);var Mb=Date.now();self.fetch(bb).then(function(ac){if(ac.ok){var Ic=Hb?ac.clone():null;return Vb(ac,Ic,Mb)}return xa(new ta(ac.statusText,ac.status,ia.url))}).catch(function(ac){20!==ac.code&&xa(Error(ac.message))})}};var Vb=function(jc,
ec,Nb){("arrayBuffer"===ia.type?jc.arrayBuffer():"json"===ia.type?jc.json():jc.text()).then(function(Mb){sb||(ec&&Nb&&function(ac,Ic,Uc){if(Q(),Vf){var Kc={status:Ic.status,statusText:Ic.statusText,headers:new self.Headers};Ic.headers.forEach(function(Dd,Qd){return Kc.headers.set(Qd,Dd)});var wd=u(Ic.headers.get("Cache-Control")||"");wd["no-store"]||(wd["max-age"]&&Kc.headers.set("Expires",(new Date(Uc+1E3*wd["max-age"])).toUTCString()),42E4>(new Date(Kc.headers.get("Expires"))).getTime()-Uc||function(Dd,
Qd){if(void 0===Yi)try{new Response(new ReadableStream),Yi=!0}catch(Nd){Yi=!1}Yi?Qd(Dd.body):Dd.blob().then(Qd)}(Ic,function(Dd){var Qd=new self.Response(Dd,Kc);Q();Vf&&Vf.then(function(Nd){return Nd.put(S(ac.url),Qd)}).catch(function(Nd){return z(Nd.message)})}))}}(bb,ec,Nb),ob=!0,xa(null,Mb,jc.headers.get("Cache-Control"),jc.headers.get("Expires")))}).catch(function(Mb){sb||xa(Error(Mb.message))})};return Hb?function(jc,ec){if(Q(),!Vf)return ec(null);var Nb=S(jc.url);Vf.then(function(Mb){Mb.match(Nb).then(function(ac){if(ac){var Ic=
new Date(ac.headers.get("Expires")||0);var Uc=u(ac.headers.get("Cache-Control")||"");Ic=Ic>Date.now()&&!Uc["no-cache"]}else Ic=!1;Mb.delete(Nb);Ic&&Mb.put(Nb,ac.clone());ec(null,ac,Ic)}).catch(ec)}).catch(ec)}(bb,Aa):Aa(null,null),{cancel:function(){sb=!0;ob||Ra.abort()}}}(v,H);if(D()&&self.worker&&self.worker.actor)return self.worker.actor.send("getResource",v,H,void 0,!0)}var P;return function(ia,xa){var Aa=new self.XMLHttpRequest,Ra;for(Ra in Aa.open(ia.method||"GET",ia.url,!0),"arrayBuffer"===
ia.type&&(Aa.responseType="arraybuffer"),ia.headers)Aa.setRequestHeader(Ra,ia.headers[Ra]);return"json"===ia.type&&(Aa.responseType="text",Aa.setRequestHeader("Accept","application/json")),Aa.withCredentials="include"===ia.credentials,Aa.onerror=function(){xa(Error(Aa.statusText))},Aa.onload=function(){if((200<=Aa.status&&300>Aa.status||0===Aa.status)&&null!==Aa.response){var bb=Aa.response;if("json"===ia.type)try{bb=JSON.parse(Aa.response)}catch(ob){return xa(ob)}xa(null,bb,Aa.getResponseHeader("Cache-Control"),
Aa.getResponseHeader("Expires"))}else xa(new ta(Aa.statusText,Aa.status,ia.url))},Aa.send(ia.body),{cancel:function(){return Aa.abort()}}}(v,H)},hb=function(v,H){return Za(d(v,{type:"arrayBuffer"}),H)},ub=function(v,H){return Za(d(v,{method:"POST"}),H)};var Rb=[];var Yb=0;var dc=function(v,H){if(ng.supported&&(v.headers||(v.headers={}),v.headers.accept="image/webp,*/*"),Yb>=df.MAX_PARALLEL_IMAGE_REQUESTS)return v={requestParameters:v,callback:H,cancelled:!1,cancel:function(){this.cancelled=!0}},Rb.push(v),
v;Yb++;var P=!1,ia=function(){if(!P)for(P=!0,Yb--;Rb.length&&Yb<df.MAX_PARALLEL_IMAGE_REQUESTS;){var Aa=Rb.shift();Aa.cancelled||(Aa.cancel=dc(Aa.requestParameters,Aa.callback).cancel)}},xa=hb(v,function(Aa,Ra,bb,ob){ia();Aa?H(Aa):Ra&&(R()?function(sb,Hb){sb=new self.Blob([new Uint8Array(sb)],{type:"image/png"});self.createImageBitmap(sb).then(function(Vb){Hb(null,Vb)}).catch(function(Vb){Hb(Error("Could not load image because of "+Vb.message+". Please make sure to use a supported image type such as PNG or JPEG. Note that SVGs are not supported."))})}(Ra,
H):function(sb,Hb,Vb,jc){var ec=new self.Image,Nb=self.URL;ec.onload=function(){Hb(null,ec);Nb.revokeObjectURL(ec.src)};ec.onerror=function(){return Hb(Error("Could not load image. Please make sure to use a supported image type such as PNG or JPEG. Note that SVGs are not supported."))};var Mb=new self.Blob([new Uint8Array(sb)],{type:"image/png"});ec.cacheControl=Vb;ec.expires=jc;ec.src=sb.byteLength?Nb.createObjectURL(Mb):"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAAC0lEQVQYV2NgAAIAAAUAAarVyFEAAAAASUVORK5CYII\x3d"}(Ra,
H,bb,ob))});return{cancel:function(){xa.cancel();ia()}}},Ac=function(v,H){void 0===H&&(H={});d(this,H);this.type=v},Ec=function(v){function H(P,ia){void 0===ia&&(ia={});v.call(this,"error",d({error:P},ia))}return v&&(H.__proto__=v),(H.prototype=Object.create(v&&v.prototype)).constructor=H,H}(Ac),uc=function(){};uc.prototype.on=function(v,H){return this._listeners=this._listeners||{},O(v,H,this._listeners),this};uc.prototype.off=function(v,H){return T(v,H,this._listeners),T(v,H,this._oneTimeListeners),
this};uc.prototype.once=function(v,H){return this._oneTimeListeners=this._oneTimeListeners||{},O(v,H,this._oneTimeListeners),this};uc.prototype.fire=function(v,H){"string"==typeof v&&(v=new Ac(v,H||{}));H=v.type;if(this.listens(H)){v.target=this;for(var P=0,ia=this._listeners&&this._listeners[H]?this._listeners[H].slice():[];P<ia.length;P+=1)ia[P].call(this,v);P=0;for(ia=this._oneTimeListeners&&this._oneTimeListeners[H]?this._oneTimeListeners[H].slice():[];P<ia.length;P+=1){var xa=ia[P];T(H,xa,this._oneTimeListeners);
xa.call(this,v)}(H=this._eventedParent)&&(d(v,"function"==typeof this._eventedParentData?this._eventedParentData():this._eventedParentData),H.fire(v))}else v instanceof Ec&&console.error(v.error);return this};uc.prototype.listens=function(v){return this._listeners&&this._listeners[v]&&0<this._listeners[v].length||this._oneTimeListeners&&this._oneTimeListeners[v]&&0<this._oneTimeListeners[v].length||this._eventedParent&&this._eventedParent.listens(v)};uc.prototype.setEventedParent=function(v,H){return this._eventedParent=
v,this._eventedParentData=H,this};var Xb={$version:8,$root:{version:{required:!0,type:"enum",values:[8]},name:{type:"string"},metadata:{type:"*"},center:{type:"array",value:"number"},zoom:{type:"number"},bearing:{type:"number",default:0,period:360,units:"degrees"},pitch:{type:"number",default:0,units:"degrees"},light:{type:"light"},sources:{required:!0,type:"sources"},sprite:{type:"string"},glyphs:{type:"string"},transition:{type:"transition"},layers:{required:!0,type:"array",value:"layer"}},sources:{"*":{type:"source"}},
source:"source_vector source_raster source_raster_dem source_geojson source_video source_image".split(" "),source_vector:{type:{required:!0,type:"enum",values:{vector:{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},scheme:{type:"enum",values:{xyz:{},tms:{}},default:"xyz"},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},attribution:{type:"string"},promoteId:{type:"promoteId"},"*":{type:"*"}},
source_raster:{type:{required:!0,type:"enum",values:{raster:{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},tileSize:{type:"number",default:512,units:"pixels"},scheme:{type:"enum",values:{xyz:{},tms:{}},default:"xyz"},attribution:{type:"string"},"*":{type:"*"}},source_raster_dem:{type:{required:!0,type:"enum",values:{"raster-dem":{}}},
url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},tileSize:{type:"number",default:512,units:"pixels"},attribution:{type:"string"},encoding:{type:"enum",values:{terrarium:{},mapbox:{}},default:"mapbox"},"*":{type:"*"}},source_geojson:{type:{required:!0,type:"enum",values:{geojson:{}}},data:{type:"*"},maxzoom:{type:"number",default:18},attribution:{type:"string"},
buffer:{type:"number",default:128,maximum:512,minimum:0},tolerance:{type:"number",default:.375},cluster:{type:"boolean",default:!1},clusterRadius:{type:"number",default:50,minimum:0},clusterMaxZoom:{type:"number"},clusterProperties:{type:"*"},lineMetrics:{type:"boolean",default:!1},generateId:{type:"boolean",default:!1},promoteId:{type:"promoteId"}},source_video:{type:{required:!0,type:"enum",values:{video:{}}},urls:{required:!0,type:"array",value:"string"},coordinates:{required:!0,type:"array",length:4,
value:{type:"array",length:2,value:"number"}}},source_image:{type:{required:!0,type:"enum",values:{image:{}}},url:{required:!0,type:"string"},coordinates:{required:!0,type:"array",length:4,value:{type:"array",length:2,value:"number"}}},layer:{id:{type:"string",required:!0},type:{type:"enum",values:{fill:{},line:{},symbol:{},circle:{},heatmap:{},"fill-extrusion":{},raster:{},hillshade:{},background:{}},required:!0},metadata:{type:"*"},source:{type:"string"},"source-layer":{type:"string"},minzoom:{type:"number",
minimum:0,maximum:24},maxzoom:{type:"number",minimum:0,maximum:24},filter:{type:"filter"},layout:{type:"layout"},paint:{type:"paint"}},layout:"layout_fill layout_line layout_circle layout_heatmap layout_fill-extrusion layout_symbol layout_raster layout_hillshade layout_background".split(" "),layout_background:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_fill:{"fill-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom",
"feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_circle:{"circle-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_heatmap:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},"layout_fill-extrusion":{visibility:{type:"enum",
values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_line:{"line-cap":{type:"enum",values:{butt:{},round:{},square:{}},default:"butt",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"line-join":{type:"enum",values:{bevel:{},round:{},miter:{}},default:"miter",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"line-miter-limit":{type:"number",default:2,requires:[{"line-join":"miter"}],expression:{interpolated:!0,
parameters:["zoom"]},"property-type":"data-constant"},"line-round-limit":{type:"number",default:1.05,requires:[{"line-join":"round"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_symbol:{"symbol-placement":{type:"enum",values:{point:{},line:{},
"line-center":{}},default:"point",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"symbol-spacing":{type:"number",default:250,minimum:1,units:"pixels",requires:[{"symbol-placement":"line"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"symbol-avoid-edges":{type:"boolean",default:!1,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"symbol-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom",
"feature"]},"property-type":"data-driven"},"symbol-z-order":{type:"enum",values:{auto:{},"viewport-y":{},source:{}},default:"auto",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-allow-overlap":{type:"boolean",default:!1,requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-ignore-placement":{type:"boolean",default:!1,requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},
"icon-optional":{type:"boolean",default:!1,requires:["icon-image","text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-rotation-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-size":{type:"number",default:1,minimum:0,units:"factor of the original icon size",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom",
"feature"]},"property-type":"data-driven"},"icon-text-fit":{type:"enum",values:{none:{},width:{},height:{},both:{}},default:"none",requires:["icon-image","text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-text-fit-padding":{type:"array",value:"number",length:4,default:[0,0,0,0],units:"pixels",requires:["icon-image","text-field",{"icon-text-fit":["both","width","height"]}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},
"icon-image":{type:"resolvedImage",tokens:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-rotate":{type:"number",default:0,period:360,units:"degrees",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-padding":{type:"number",default:2,minimum:0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"icon-keep-upright":{type:"boolean",
default:!1,requires:["icon-image",{"icon-rotation-alignment":"map"},{"symbol-placement":["line","line-center"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-offset":{type:"array",value:"number",length:2,default:[0,0],requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-anchor":{type:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},
default:"center",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-pitch-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-pitch-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},
"text-rotation-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-field":{type:"formatted",default:"",tokens:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-font":{type:"array",value:"string",default:["Open Sans Regular","Arial Unicode MS Regular"],requires:["text-field"],expression:{interpolated:!1,parameters:["zoom",
"feature"]},"property-type":"data-driven"},"text-size":{type:"number",default:16,minimum:0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-max-width":{type:"number",default:10,minimum:0,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-line-height":{type:"number",default:1.2,units:"ems",requires:["text-field"],expression:{interpolated:!0,
parameters:["zoom"]},"property-type":"data-constant"},"text-letter-spacing":{type:"number",default:0,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-justify":{type:"enum",values:{auto:{},left:{},center:{},right:{}},default:"center",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-radial-offset":{type:"number",units:"ems",default:0,requires:["text-field"],
"property-type":"data-driven",expression:{interpolated:!0,parameters:["zoom","feature"]}},"text-variable-anchor":{type:"array",value:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},requires:["text-field",{"symbol-placement":["point"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-anchor":{type:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},
"bottom-left":{},"bottom-right":{}},default:"center",requires:["text-field",{"!":"text-variable-anchor"}],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-max-angle":{type:"number",default:45,units:"degrees",requires:["text-field",{"symbol-placement":["line","line-center"]}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-writing-mode":{type:"array",value:"enum",values:{horizontal:{},vertical:{}},requires:["text-field",
{"symbol-placement":["point"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-rotate":{type:"number",default:0,period:360,units:"degrees",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-padding":{type:"number",default:2,minimum:0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-keep-upright":{type:"boolean",
default:!0,requires:["text-field",{"text-rotation-alignment":"map"},{"symbol-placement":["line","line-center"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-transform":{type:"enum",values:{none:{},uppercase:{},lowercase:{}},default:"none",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-offset":{type:"array",value:"number",units:"ems",length:2,default:[0,0],requires:["text-field",{"!":"text-radial-offset"}],
expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-allow-overlap":{type:"boolean",default:!1,requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-ignore-placement":{type:"boolean",default:!1,requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-optional":{type:"boolean",default:!1,requires:["text-field","icon-image"],expression:{interpolated:!1,
parameters:["zoom"]},"property-type":"data-constant"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_raster:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_hillshade:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},filter:{type:"array",value:"*"},filter_operator:{type:"enum",values:{"\x3d\x3d":{},"!\x3d":{},"\x3e":{},"\x3e\x3d":{},
"\x3c":{},"\x3c\x3d":{},in:{},"!in":{},all:{},any:{},none:{},has:{},"!has":{},within:{}}},geometry_type:{type:"enum",values:{Point:{},LineString:{},Polygon:{}}},function:{expression:{type:"expression"},stops:{type:"array",value:"function_stop"},base:{type:"number",default:1,minimum:0},property:{type:"string",default:"$zoom"},type:{type:"enum",values:{identity:{},exponential:{},interval:{},categorical:{}},default:"exponential"},colorSpace:{type:"enum",values:{rgb:{},lab:{},hcl:{}},default:"rgb"},default:{type:"*",
required:!1}},function_stop:{type:"array",minimum:0,maximum:24,value:["number","color"],length:2},expression:{type:"array",value:"*",minimum:1},expression_name:{type:"enum",values:{let:{group:"Variable binding"},var:{group:"Variable binding"},literal:{group:"Types"},array:{group:"Types"},at:{group:"Lookup"},in:{group:"Lookup"},"index-of":{group:"Lookup"},slice:{group:"Lookup"},case:{group:"Decision"},match:{group:"Decision"},coalesce:{group:"Decision"},step:{group:"Ramps, scales, curves"},interpolate:{group:"Ramps, scales, curves"},
"interpolate-hcl":{group:"Ramps, scales, curves"},"interpolate-lab":{group:"Ramps, scales, curves"},ln2:{group:"Math"},pi:{group:"Math"},e:{group:"Math"},typeof:{group:"Types"},string:{group:"Types"},number:{group:"Types"},boolean:{group:"Types"},object:{group:"Types"},collator:{group:"Types"},format:{group:"Types"},image:{group:"Types"},"number-format":{group:"Types"},"to-string":{group:"Types"},"to-number":{group:"Types"},"to-boolean":{group:"Types"},"to-rgba":{group:"Color"},"to-color":{group:"Types"},
rgb:{group:"Color"},rgba:{group:"Color"},get:{group:"Lookup"},has:{group:"Lookup"},length:{group:"Lookup"},properties:{group:"Feature data"},"feature-state":{group:"Feature data"},"geometry-type":{group:"Feature data"},id:{group:"Feature data"},zoom:{group:"Zoom"},"heatmap-density":{group:"Heatmap"},"line-progress":{group:"Feature data"},accumulated:{group:"Feature data"},"+":{group:"Math"},"*":{group:"Math"},"-":{group:"Math"},"/":{group:"Math"},"%":{group:"Math"},"^":{group:"Math"},sqrt:{group:"Math"},
log10:{group:"Math"},ln:{group:"Math"},log2:{group:"Math"},sin:{group:"Math"},cos:{group:"Math"},tan:{group:"Math"},asin:{group:"Math"},acos:{group:"Math"},atan:{group:"Math"},min:{group:"Math"},max:{group:"Math"},round:{group:"Math"},abs:{group:"Math"},ceil:{group:"Math"},floor:{group:"Math"},distance:{group:"Math"},"\x3d\x3d":{group:"Decision"},"!\x3d":{group:"Decision"},"\x3e":{group:"Decision"},"\x3c":{group:"Decision"},"\x3e\x3d":{group:"Decision"},"\x3c\x3d":{group:"Decision"},all:{group:"Decision"},
any:{group:"Decision"},"!":{group:"Decision"},within:{group:"Decision"},"is-supported-script":{group:"String"},upcase:{group:"String"},downcase:{group:"String"},concat:{group:"String"},"resolved-locale":{group:"String"}}},light:{anchor:{type:"enum",default:"viewport",values:{map:{},viewport:{}},"property-type":"data-constant",transition:!1,expression:{interpolated:!1,parameters:["zoom"]}},position:{type:"array",default:[1.15,210,30],length:3,value:"number","property-type":"data-constant",transition:!0,
expression:{interpolated:!0,parameters:["zoom"]}},color:{type:"color","property-type":"data-constant",default:"#ffffff",expression:{interpolated:!0,parameters:["zoom"]},transition:!0},intensity:{type:"number","property-type":"data-constant",default:.5,minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0}},paint:"paint_fill paint_line paint_circle paint_heatmap paint_fill-extrusion paint_symbol paint_raster paint_hillshade paint_background".split(" "),paint_fill:{"fill-antialias":{type:"boolean",
default:!0,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"fill-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-outline-color":{type:"color",
transition:!0,requires:[{"!":"fill-pattern"},{"fill-antialias":!0}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["fill-translate"],expression:{interpolated:!1,parameters:["zoom"]},
"property-type":"data-constant"},"fill-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"}},"paint_fill-extrusion":{"fill-extrusion-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"fill-extrusion-pattern"}],expression:{interpolated:!0,
parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["fill-extrusion-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-pattern":{type:"resolvedImage",
transition:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"},"fill-extrusion-height":{type:"number",default:0,minimum:0,units:"meters",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-base":{type:"number",default:0,minimum:0,units:"meters",transition:!0,requires:["fill-extrusion-height"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},
"property-type":"data-driven"},"fill-extrusion-vertical-gradient":{type:"boolean",default:!0,transition:!1,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"}},paint_line:{"line-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"line-pattern"}],expression:{interpolated:!0,
parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["line-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"line-width":{type:"number",default:1,minimum:0,transition:!0,
units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-gap-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-offset":{type:"number",default:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-blur":{type:"number",
default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-dasharray":{type:"array",value:"number",minimum:0,transition:!0,units:"line widths",requires:[{"!":"line-pattern"}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"cross-faded"},"line-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"},
"line-gradient":{type:"color",transition:!1,requires:[{"!":"line-dasharray"},{"!":"line-pattern"},{source:"geojson",has:{lineMetrics:!0}}],expression:{interpolated:!0,parameters:["line-progress"]},"property-type":"color-ramp"}},paint_circle:{"circle-radius":{type:"number",default:5,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,
parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-blur":{type:"number",default:0,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,
units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"circle-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["circle-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-pitch-scale":{type:"enum",values:{map:{},viewport:{}},default:"map",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-pitch-alignment":{type:"enum",values:{map:{},
viewport:{}},default:"viewport",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-stroke-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-stroke-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-stroke-opacity":{type:"number",
default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"}},paint_heatmap:{"heatmap-radius":{type:"number",default:30,minimum:1,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"heatmap-weight":{type:"number",default:1,minimum:0,transition:!1,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},
"heatmap-intensity":{type:"number",default:1,minimum:0,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"heatmap-color":{type:"color",default:["interpolate",["linear"],["heatmap-density"],0,"rgba(0, 0, 255, 0)",.1,"royalblue",.3,"cyan",.5,"lime",.7,"yellow",1,"red"],transition:!1,expression:{interpolated:!0,parameters:["heatmap-density"]},"property-type":"color-ramp"},"heatmap-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,
parameters:["zoom"]},"property-type":"data-constant"}},paint_symbol:{"icon-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-color":{type:"color",default:"#000000",transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-color":{type:"color",default:"rgba(0, 0, 0, 0)",
transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom",
"feature","feature-state"]},"property-type":"data-driven"},"icon-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"icon-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["icon-image","icon-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-opacity":{type:"number",default:1,
minimum:0,maximum:1,transition:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-color":{type:"color",default:"#000000",transition:!0,overridable:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-color":{type:"color",default:"rgba(0, 0, 0, 0)",transition:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom",
"feature","feature-state"]},"property-type":"data-driven"},"text-halo-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-translate":{type:"array",
value:"number",length:2,default:[0,0],transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["text-field","text-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"}},paint_raster:{"raster-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},
"property-type":"data-constant"},"raster-hue-rotate":{type:"number",default:0,period:360,transition:!0,units:"degrees",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-brightness-min":{type:"number",default:0,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-brightness-max":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},
"raster-saturation":{type:"number",default:0,minimum:-1,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-contrast":{type:"number",default:0,minimum:-1,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-resampling":{type:"enum",values:{linear:{},nearest:{}},default:"linear",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"raster-fade-duration":{type:"number",
default:300,minimum:0,transition:!1,units:"milliseconds",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},paint_hillshade:{"hillshade-illumination-direction":{type:"number",default:335,minimum:0,maximum:359,transition:!1,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-illumination-anchor":{type:"enum",values:{map:{},viewport:{}},default:"viewport",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},
"hillshade-exaggeration":{type:"number",default:.5,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-shadow-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-highlight-color":{type:"color",default:"#FFFFFF",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-accent-color":{type:"color",
default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},paint_background:{"background-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"background-pattern"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"background-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"cross-faded"},"background-opacity":{type:"number",default:1,
minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},transition:{duration:{type:"number",default:300,minimum:0,units:"milliseconds"},delay:{type:"number",default:0,minimum:0,units:"milliseconds"}},"property-type":{"data-driven":{type:"property-type"},"cross-faded":{type:"property-type"},"cross-faded-data-driven":{type:"property-type"},"color-ramp":{type:"property-type"},"data-constant":{type:"property-type"},constant:{type:"property-type"}},
promoteId:{"*":{type:"string"}}},fc=function(v,H,P,ia){this.message=(v?v+": ":"")+P;ia&&(this.identifier=ia);null!=H&&H.__line__&&(this.line=H.__line__)},Cc=function(v){function H(P,ia){v.call(this,ia);this.message=ia;this.key=P}return v&&(H.__proto__=v),(H.prototype=Object.create(v&&v.prototype)).constructor=H,H}(Error),bd=function(v,H){void 0===H&&(H=[]);this.parent=v;this.bindings={};for(v=0;v<H.length;v+=1){var P=H[v];this.bindings[P[0]]=P[1]}};bd.prototype.concat=function(v){return new bd(this,
v)};bd.prototype.get=function(v){if(this.bindings[v])return this.bindings[v];if(this.parent)return this.parent.get(v);throw Error(v+" not found in scope.");};bd.prototype.has=function(v){return!!this.bindings[v]||!!this.parent&&this.parent.has(v)};var nd={kind:"null"},Nc={kind:"number"},vd={kind:"string"},Ad={kind:"boolean"},le={kind:"color"},Ud={kind:"object"},Sd={kind:"value"},fe={kind:"collator"},ue={kind:"formatted"},Ee={kind:"resolvedImage"},Re=[nd,Nc,vd,Ad,le,ue,Ud,ka(Sd),Ee],lf=k(function(v,
H){function P(bb){return 0>(bb=Math.round(bb))?0:255<bb?255:bb}function ia(bb){return P("%"===bb[bb.length-1]?parseFloat(bb)/100*255:parseInt(bb))}function xa(bb){return 0>(ob="%"===bb[bb.length-1]?parseFloat(bb)/100:parseFloat(bb))?0:1<ob?1:ob;var ob}function Aa(bb,ob,sb){return 0>sb?sb+=1:1<sb&&--sb,1>6*sb?bb+(ob-bb)*sb*6:1>2*sb?ob:2>3*sb?bb+(ob-bb)*(2/3-sb)*6:bb}var Ra={transparent:[0,0,0,0],aliceblue:[240,248,255,1],antiquewhite:[250,235,215,1],aqua:[0,255,255,1],aquamarine:[127,255,212,1],azure:[240,
255,255,1],beige:[245,245,220,1],bisque:[255,228,196,1],black:[0,0,0,1],blanchedalmond:[255,235,205,1],blue:[0,0,255,1],blueviolet:[138,43,226,1],brown:[165,42,42,1],burlywood:[222,184,135,1],cadetblue:[95,158,160,1],chartreuse:[127,255,0,1],chocolate:[210,105,30,1],coral:[255,127,80,1],cornflowerblue:[100,149,237,1],cornsilk:[255,248,220,1],crimson:[220,20,60,1],cyan:[0,255,255,1],darkblue:[0,0,139,1],darkcyan:[0,139,139,1],darkgoldenrod:[184,134,11,1],darkgray:[169,169,169,1],darkgreen:[0,100,0,
1],darkgrey:[169,169,169,1],darkkhaki:[189,183,107,1],darkmagenta:[139,0,139,1],darkolivegreen:[85,107,47,1],darkorange:[255,140,0,1],darkorchid:[153,50,204,1],darkred:[139,0,0,1],darksalmon:[233,150,122,1],darkseagreen:[143,188,143,1],darkslateblue:[72,61,139,1],darkslategray:[47,79,79,1],darkslategrey:[47,79,79,1],darkturquoise:[0,206,209,1],darkviolet:[148,0,211,1],deeppink:[255,20,147,1],deepskyblue:[0,191,255,1],dimgray:[105,105,105,1],dimgrey:[105,105,105,1],dodgerblue:[30,144,255,1],firebrick:[178,
34,34,1],floralwhite:[255,250,240,1],forestgreen:[34,139,34,1],fuchsia:[255,0,255,1],gainsboro:[220,220,220,1],ghostwhite:[248,248,255,1],gold:[255,215,0,1],goldenrod:[218,165,32,1],gray:[128,128,128,1],green:[0,128,0,1],greenyellow:[173,255,47,1],grey:[128,128,128,1],honeydew:[240,255,240,1],hotpink:[255,105,180,1],indianred:[205,92,92,1],indigo:[75,0,130,1],ivory:[255,255,240,1],khaki:[240,230,140,1],lavender:[230,230,250,1],lavenderblush:[255,240,245,1],lawngreen:[124,252,0,1],lemonchiffon:[255,
250,205,1],lightblue:[173,216,230,1],lightcoral:[240,128,128,1],lightcyan:[224,255,255,1],lightgoldenrodyellow:[250,250,210,1],lightgray:[211,211,211,1],lightgreen:[144,238,144,1],lightgrey:[211,211,211,1],lightpink:[255,182,193,1],lightsalmon:[255,160,122,1],lightseagreen:[32,178,170,1],lightskyblue:[135,206,250,1],lightslategray:[119,136,153,1],lightslategrey:[119,136,153,1],lightsteelblue:[176,196,222,1],lightyellow:[255,255,224,1],lime:[0,255,0,1],limegreen:[50,205,50,1],linen:[250,240,230,1],
magenta:[255,0,255,1],maroon:[128,0,0,1],mediumaquamarine:[102,205,170,1],mediumblue:[0,0,205,1],mediumorchid:[186,85,211,1],mediumpurple:[147,112,219,1],mediumseagreen:[60,179,113,1],mediumslateblue:[123,104,238,1],mediumspringgreen:[0,250,154,1],mediumturquoise:[72,209,204,1],mediumvioletred:[199,21,133,1],midnightblue:[25,25,112,1],mintcream:[245,255,250,1],mistyrose:[255,228,225,1],moccasin:[255,228,181,1],navajowhite:[255,222,173,1],navy:[0,0,128,1],oldlace:[253,245,230,1],olive:[128,128,0,1],
olivedrab:[107,142,35,1],orange:[255,165,0,1],orangered:[255,69,0,1],orchid:[218,112,214,1],palegoldenrod:[238,232,170,1],palegreen:[152,251,152,1],paleturquoise:[175,238,238,1],palevioletred:[219,112,147,1],papayawhip:[255,239,213,1],peachpuff:[255,218,185,1],peru:[205,133,63,1],pink:[255,192,203,1],plum:[221,160,221,1],powderblue:[176,224,230,1],purple:[128,0,128,1],rebeccapurple:[102,51,153,1],red:[255,0,0,1],rosybrown:[188,143,143,1],royalblue:[65,105,225,1],saddlebrown:[139,69,19,1],salmon:[250,
128,114,1],sandybrown:[244,164,96,1],seagreen:[46,139,87,1],seashell:[255,245,238,1],sienna:[160,82,45,1],silver:[192,192,192,1],skyblue:[135,206,235,1],slateblue:[106,90,205,1],slategray:[112,128,144,1],slategrey:[112,128,144,1],snow:[255,250,250,1],springgreen:[0,255,127,1],steelblue:[70,130,180,1],tan:[210,180,140,1],teal:[0,128,128,1],thistle:[216,191,216,1],tomato:[255,99,71,1],turquoise:[64,224,208,1],violet:[238,130,238,1],wheat:[245,222,179,1],white:[255,255,255,1],whitesmoke:[245,245,245,
1],yellow:[255,255,0,1],yellowgreen:[154,205,50,1]};try{H.parseCSSColor=function(bb){var ob;bb=bb.replace(/ /g,"").toLowerCase();if(bb in Ra)return Ra[bb].slice();if("#"===bb[0])return 4===bb.length?0<=(ob=parseInt(bb.substr(1),16))&&4095>=ob?[(3840&ob)>>4|(3840&ob)>>8,240&ob|(240&ob)>>4,15&ob|(15&ob)<<4,1]:null:7===bb.length&&0<=(ob=parseInt(bb.substr(1),16))&&16777215>=ob?[(16711680&ob)>>16,(65280&ob)>>8,255&ob,1]:null;var sb=bb.indexOf("("),Hb=bb.indexOf(")");if(-1!==sb&&Hb+1===bb.length)switch(ob=
bb.substr(0,sb),sb=bb.substr(sb+1,Hb-(sb+1)).split(","),bb=1,ob){case "rgba":if(4!==sb.length)break;bb=xa(sb.pop());case "rgb":return 3!==sb.length?null:[ia(sb[0]),ia(sb[1]),ia(sb[2]),bb];case "hsla":if(4!==sb.length)break;bb=xa(sb.pop());case "hsl":if(3===sb.length)return ob=(parseFloat(sb[0])%360+360)%360/360,Hb=xa(sb[1]),sb=xa(sb[2]),Hb=.5>=sb?sb*(Hb+1):sb+Hb-sb*Hb,sb=2*sb-Hb,[P(255*Aa(sb,Hb,ob+1/3)),P(255*Aa(sb,Hb,ob)),P(255*Aa(sb,Hb,ob-1/3)),bb]}return null}}catch(bb){}}).parseCSSColor,he=function(v,
H,P,ia){void 0===ia&&(ia=1);this.r=v;this.g=H;this.b=P;this.a=ia};he.parse=function(v){if(v){if(v instanceof he)return v;if("string"==typeof v&&(v=lf(v)))return new he(v[0]/255*v[3],v[1]/255*v[3],v[2]/255*v[3],v[3])}};he.prototype.toString=function(){var v=this.toArray();return"rgba("+Math.round(v[0])+","+Math.round(v[1])+","+Math.round(v[2])+","+v[3]+")"};he.prototype.toArray=function(){var v=this.a;return 0===v?[0,0,0,0]:[255*this.r/v,255*this.g/v,255*this.b/v,v]};he.black=new he(0,0,0,1);he.white=
new he(1,1,1,1);he.transparent=new he(0,0,0,0);he.red=new he(1,0,0,1);var ef=function(v,H,P){this.sensitivity=v?H?"variant":"case":H?"accent":"base";this.locale=P;this.collator=new Intl.Collator(this.locale?this.locale:[],{sensitivity:this.sensitivity,usage:"search"})};ef.prototype.compare=function(v,H){return this.collator.compare(v,H)};ef.prototype.resolvedLocale=function(){return(new Intl.Collator(this.locale?this.locale:[])).resolvedOptions().locale};var mf=function(v,H,P,ia,xa){this.text=v;this.image=
H;this.scale=P;this.fontStack=ia;this.textColor=xa},Ae=function(v){this.sections=v};Ae.fromString=function(v){return new Ae([new mf(v,null,null,null,null)])};Ae.prototype.isEmpty=function(){return 0===this.sections.length||!this.sections.some(function(v){return 0!==v.text.length||v.image&&0!==v.image.name.length})};Ae.factory=function(v){return v instanceof Ae?v:Ae.fromString(v)};Ae.prototype.toString=function(){return 0===this.sections.length?"":this.sections.map(function(v){return v.text}).join("")};
Ae.prototype.serialize=function(){for(var v=["format"],H=0,P=this.sections;H<P.length;H+=1){var ia=P[H];if(ia.image)v.push(["image",ia.image.name]);else{v.push(ia.text);var xa={};ia.fontStack&&(xa["text-font"]=["literal",ia.fontStack.split(",")]);ia.scale&&(xa["font-scale"]=ia.scale);ia.textColor&&(xa["text-color"]=["rgba"].concat(ia.textColor.toArray()));v.push(xa)}}return v};var $e=function(v){this.name=v.name;this.available=v.available};$e.prototype.toString=function(){return this.name};$e.fromString=
function(v){return v?new $e({name:v,available:!1}):null};$e.prototype.serialize=function(){return["image",this.name]};var vf=function(v,H){this.type=v;this.value=H};vf.parse=function(v,H){if(2!==v.length)return H.error("'literal' expression requires exactly one argument, but found "+(v.length-1)+" instead.");if(!qa(v[1]))return H.error("invalid value");v=v[1];var P=Y(v);H=H.expectedType;return"array"!==P.kind||0!==P.N||!H||"array"!==H.kind||"number"==typeof H.N&&0!==H.N||(P=H),new vf(P,v)};vf.prototype.evaluate=
function(){return this.value};vf.prototype.eachChild=function(){};vf.prototype.outputDefined=function(){return!0};vf.prototype.serialize=function(){return"array"===this.type.kind||"object"===this.type.kind?["literal",this.value]:this.value instanceof he?["rgba"].concat(this.value.toArray()):this.value instanceof Ae?this.value.serialize():this.value};var nf=function(v){this.name="ExpressionEvaluationError";this.message=v};nf.prototype.toJSON=function(){return this.message};var Fh={string:vd,number:Nc,
boolean:Ad,object:Ud},sg=function(v,H){this.type=v;this.args=H};sg.parse=function(v,H){if(2>v.length)return H.error("Expected at least one argument.");var P=1,ia=v[0];if("array"===ia){if(2<v.length){ia=v[1];if("string"!=typeof ia||!(ia in Fh)||"object"===ia)return H.error('The item type argument of "array" must be one of string, number, boolean',1);ia=Fh[ia];P++}else ia=Sd;if(3<v.length){if(null!==v[2]&&("number"!=typeof v[2]||0>v[2]||v[2]!==Math.floor(v[2])))return H.error('The length argument to "array" must be a positive integer literal',
2);var xa=v[2];P++}xa=ka(ia,xa)}else xa=Fh[ia];for(ia=[];P<v.length;P++){var Aa=H.parse(v[P],P,Sd);if(!Aa)return null;ia.push(Aa)}return new sg(xa,ia)};sg.prototype.evaluate=function(v){for(var H=0;H<this.args.length;H++){var P=this.args[H].evaluate(v);if(!ca(this.type,Y(P)))return P;if(H===this.args.length-1)throw new nf("Expected value to be of type "+ha(this.type)+", but found "+ha(Y(P))+" instead.");}return null};sg.prototype.eachChild=function(v){this.args.forEach(v)};sg.prototype.outputDefined=
function(){return this.args.every(function(v){return v.outputDefined()})};sg.prototype.serialize=function(){var v=this.type,H=[v.kind];if("array"===v.kind){var P=v.itemType;if("string"===P.kind||"number"===P.kind||"boolean"===P.kind)H.push(P.kind),v=v.N,("number"==typeof v||1<this.args.length)&&H.push(v)}return H.concat(this.args.map(function(ia){return ia.serialize()}))};var Vg=function(v){this.type=ue;this.sections=v};Vg.parse=function(v,H){if(2>v.length)return H.error("Expected at least one argument.");
var P=v[1];if(!Array.isArray(P)&&"object"==typeof P)return H.error("First argument must be an image or text section.");P=[];for(var ia=!1,xa=1;xa<=v.length-1;++xa){var Aa=v[xa];if(ia&&"object"==typeof Aa&&!Array.isArray(Aa)){ia=!1;var Ra=null;if(Aa["font-scale"]&&!(Ra=H.parse(Aa["font-scale"],1,Nc)))return null;var bb=null;if(Aa["text-font"]&&!(bb=H.parse(Aa["text-font"],1,ka(vd))))return null;var ob=null;if(Aa["text-color"]&&!(ob=H.parse(Aa["text-color"],1,le)))return null;Aa=P[P.length-1];Aa.scale=
Ra;Aa.font=bb;Aa.textColor=ob}else{Ra=H.parse(v[xa],1,Sd);if(!Ra)return null;ia=Ra.type.kind;if("string"!==ia&&"value"!==ia&&"null"!==ia&&"resolvedImage"!==ia)return H.error("Formatted text type must be 'string', 'value', 'image' or 'null'.");ia=!0;P.push({content:Ra,scale:null,font:null,textColor:null})}}return new Vg(P)};Vg.prototype.evaluate=function(v){return new Ae(this.sections.map(function(H){var P=H.content.evaluate(v);return Y(P)===Ee?new mf("",P,null,null,null):new mf(pa(P),null,H.scale?
H.scale.evaluate(v):null,H.font?H.font.evaluate(v).join(","):null,H.textColor?H.textColor.evaluate(v):null)}))};Vg.prototype.eachChild=function(v){for(var H=0,P=this.sections;H<P.length;H+=1){var ia=P[H];v(ia.content);ia.scale&&v(ia.scale);ia.font&&v(ia.font);ia.textColor&&v(ia.textColor)}};Vg.prototype.outputDefined=function(){return!1};Vg.prototype.serialize=function(){for(var v=["format"],H=0,P=this.sections;H<P.length;H+=1){var ia=P[H];v.push(ia.content.serialize());var xa={};ia.scale&&(xa["font-scale"]=
ia.scale.serialize());ia.font&&(xa["text-font"]=ia.font.serialize());ia.textColor&&(xa["text-color"]=ia.textColor.serialize());v.push(xa)}return v};var jg=function(v){this.type=Ee;this.input=v};jg.parse=function(v,H){return 2!==v.length?H.error("Expected two arguments."):(v=H.parse(v[1],1,vd))?new jg(v):H.error("No image name provided.")};jg.prototype.evaluate=function(v){var H=this.input.evaluate(v),P=$e.fromString(H);return P&&v.availableImages&&(P.available=-1<v.availableImages.indexOf(H)),P};
jg.prototype.eachChild=function(v){v(this.input)};jg.prototype.outputDefined=function(){return!1};jg.prototype.serialize=function(){return["image",this.input.serialize()]};var Yh={"to-boolean":Ad,"to-color":le,"to-number":Nc,"to-string":vd},wf=function(v,H){this.type=v;this.args=H};wf.parse=function(v,H){if(2>v.length)return H.error("Expected at least one argument.");var P=v[0];if(("to-boolean"===P||"to-string"===P)&&2!==v.length)return H.error("Expected one argument.");P=Yh[P];for(var ia=[],xa=1;xa<
v.length;xa++){var Aa=H.parse(v[xa],xa,Sd);if(!Aa)return null;ia.push(Aa)}return new wf(P,ia)};wf.prototype.evaluate=function(v){if("boolean"===this.type.kind)return!!this.args[0].evaluate(v);if("color"===this.type.kind){for(var H,P,ia=0,xa=this.args;ia<xa.length;ia+=1){if(P=null,(H=xa[ia].evaluate(v))instanceof he)return H;if("string"==typeof H){var Aa=v.parseColor(H);if(Aa)return Aa}else if(Array.isArray(H)&&!(P=3>H.length||4<H.length?"Invalid rbga value "+JSON.stringify(H)+": expected an array containing either three or four numeric values.":
ra(H[0],H[1],H[2],H[3])))return new he(H[0]/255,H[1]/255,H[2]/255,H[3])}throw new nf(P||"Could not parse color from value '"+("string"==typeof H?H:String(JSON.stringify(H)))+"'");}if("number"===this.type.kind){H=null;P=0;for(ia=this.args;P<ia.length;P+=1){if(null===(H=ia[P].evaluate(v)))return 0;xa=Number(H);if(!isNaN(xa))return xa}throw new nf("Could not convert "+JSON.stringify(H)+" to number.");}return"formatted"===this.type.kind?Ae.fromString(pa(this.args[0].evaluate(v))):"resolvedImage"===this.type.kind?
$e.fromString(pa(this.args[0].evaluate(v))):pa(this.args[0].evaluate(v))};wf.prototype.eachChild=function(v){this.args.forEach(v)};wf.prototype.outputDefined=function(){return this.args.every(function(v){return v.outputDefined()})};wf.prototype.serialize=function(){if("formatted"===this.type.kind)return(new Vg([{content:this.args[0],scale:null,font:null,textColor:null}])).serialize();if("resolvedImage"===this.type.kind)return(new jg(this.args[0])).serialize();var v=["to-"+this.type.kind];return this.eachChild(function(H){v.push(H.serialize())}),
v};var pj=["Unknown","Point","LineString","Polygon"],og=function(){this.formattedSection=this.featureState=this.feature=this.globals=null;this._parseColorCache={};this.canonical=this.availableImages=null};og.prototype.id=function(){return this.feature&&"id"in this.feature?this.feature.id:null};og.prototype.geometryType=function(){return this.feature?"number"==typeof this.feature.type?pj[this.feature.type]:this.feature.type:null};og.prototype.geometry=function(){return this.feature&&"geometry"in this.feature?
this.feature.geometry:null};og.prototype.canonicalID=function(){return this.canonical};og.prototype.properties=function(){return this.feature&&this.feature.properties||{}};og.prototype.parseColor=function(v){var H=this._parseColorCache[v];return H||(H=this._parseColorCache[v]=he.parse(v)),H};var Zf=function(v,H,P,ia){this.name=v;this.type=H;this._evaluate=P;this.args=ia};Zf.prototype.evaluate=function(v){return this._evaluate(v,this.args)};Zf.prototype.eachChild=function(v){this.args.forEach(v)};
Zf.prototype.outputDefined=function(){return!1};Zf.prototype.serialize=function(){return[this.name].concat(this.args.map(function(v){return v.serialize()}))};Zf.parse=function(v,H){var P,ia=v[0],xa=Zf.definitions[ia];if(!xa)return H.error('Unknown expression "'+ia+'". If you wanted a literal array, use ["literal", [...]].',0);var Aa=Array.isArray(xa)?xa[0]:xa.type;xa=Array.isArray(xa)?[[xa[1],xa[2]]]:xa.overloads;for(var Ra=xa.filter(function(ac){ac=ac[0];return!Array.isArray(ac)||ac.length===v.length-
1}),bb=null,ob=0;ob<Ra.length;ob+=1){bb=Ra[ob];var sb=bb[0],Hb=bb[1];bb=new kg(H.registry,H.path,null,H.scope);for(var Vb=[],jc=!1,ec=1;ec<v.length;ec++){var Nb=v[ec],Mb=Array.isArray(sb)?sb[ec-1]:sb.type;Nb=bb.parse(Nb,1+Vb.length,Mb);if(!Nb){jc=!0;break}Vb.push(Nb)}if(!jc)if(Array.isArray(sb)&&sb.length!==Vb.length)bb.error("Expected "+sb.length+" arguments, but found "+Vb.length+" instead.");else{for(jc=0;jc<Vb.length;jc++)ec=Array.isArray(sb)?sb[jc]:sb.type,Nb=Vb[jc],bb.concat(jc+1).checkSubtype(ec,
Nb.type);if(0===bb.errors.length)return new Zf(ia,Aa,Hb,Vb)}}if(1===Ra.length)(P=H.errors).push.apply(P,bb.errors);else{P=(Ra.length?Ra:xa).map(function(ac){var Ic;return Ic=ac[0],Array.isArray(Ic)?"("+Ic.map(ha).join(", ")+")":"("+ha(Ic.type)+"...)"}).join(" | ");ia=[];for(Aa=1;Aa<v.length;Aa++){xa=H.parse(v[Aa],1+ia.length);if(!xa)return null;ia.push(ha(xa.type))}H.error("Expected arguments of type "+P+", but found ("+ia.join(", ")+") instead.")}return null};Zf.register=function(v,H){for(var P in Zf.definitions=
H,H)v[P]=Zf};var Qe=function(v,H,P){this.type=fe;this.locale=P;this.caseSensitive=v;this.diacriticSensitive=H};Qe.parse=function(v,H){if(2!==v.length)return H.error("Expected one argument.");v=v[1];if("object"!=typeof v||Array.isArray(v))return H.error("Collator options argument must be an object.");var P=H.parse(void 0!==v["case-sensitive"]&&v["case-sensitive"],1,Ad);if(!P)return null;var ia=H.parse(void 0!==v["diacritic-sensitive"]&&v["diacritic-sensitive"],1,Ad);if(!ia)return null;var xa=null;
return v.locale&&!(xa=H.parse(v.locale,1,vd))?null:new Qe(P,ia,xa)};Qe.prototype.evaluate=function(v){return new ef(this.caseSensitive.evaluate(v),this.diacriticSensitive.evaluate(v),this.locale?this.locale.evaluate(v):null)};Qe.prototype.eachChild=function(v){v(this.caseSensitive);v(this.diacriticSensitive);this.locale&&v(this.locale)};Qe.prototype.outputDefined=function(){return!1};Qe.prototype.serialize=function(){var v={};return v["case-sensitive"]=this.caseSensitive.serialize(),v["diacritic-sensitive"]=
this.diacriticSensitive.serialize(),this.locale&&(v.locale=this.locale.serialize()),["collator",v]};var Tf=function(v,H){this.type=Ad;this.geojson=v;this.geometries=H};Tf.parse=function(v,H){if(2!==v.length)return H.error("'within' expression requires exactly one argument, but found "+(v.length-1)+" instead.");if(qa(v[1]))if(v=v[1],"FeatureCollection"===v.type)for(var P=0;P<v.features.length;++P){var ia=v.features[P].geometry.type;if("Polygon"===ia||"MultiPolygon"===ia)return new Tf(v,v.features[P].geometry)}else if("Feature"===
v.type){if(P=v.geometry.type,"Polygon"===P||"MultiPolygon"===P)return new Tf(v,v.geometry)}else if("Polygon"===v.type||"MultiPolygon"===v.type)return new Tf(v,v);return H.error("'within' expression requires valid geojson object that contains polygon geometry type.")};Tf.prototype.evaluate=function(v){if(null!=v.geometry()&&null!=v.canonicalID()){if("Point"===v.geometryType())return function(H,P){var ia=[1/0,1/0,-1/0,-1/0],xa=[1/0,1/0,-1/0,-1/0],Aa=H.canonicalID();if("Polygon"===P.type){var Ra=Ba(P.coordinates,
xa,Aa),bb=Ia(H.geometry(),ia,xa,Aa);if(!ua(ia,xa))return!1;for(var ob=0;ob<bb.length;ob+=1)if(!ya(bb[ob],Ra))return!1}if("MultiPolygon"===P.type){P=Ma(P.coordinates,xa,Aa);H=Ia(H.geometry(),ia,xa,Aa);if(!ua(ia,xa))return!1;for(ia=0;ia<H.length;ia+=1){a:{xa=H[ia];Aa=P;for(Ra=0;Ra<Aa.length;Ra++)if(ya(xa,Aa[Ra])){xa=!0;break a}xa=!1}if(!xa)return!1}}return!0}(v,this.geometries);if("LineString"===v.geometryType())return function(H,P){var ia=[1/0,1/0,-1/0,-1/0],xa=[1/0,1/0,-1/0,-1/0],Aa=H.canonicalID();
if("Polygon"===P.type){var Ra=Ba(P.coordinates,xa,Aa),bb=Pa(H.geometry(),ia,xa,Aa);if(!ua(ia,xa))return!1;for(var ob=0;ob<bb.length;ob+=1)if(!za(bb[ob],Ra))return!1}if("MultiPolygon"===P.type){P=Ma(P.coordinates,xa,Aa);H=Pa(H.geometry(),ia,xa,Aa);if(!ua(ia,xa))return!1;for(ia=0;ia<H.length;ia+=1){a:{xa=H[ia];Aa=P;for(Ra=0;Ra<Aa.length;Ra++)if(za(xa,Aa[Ra])){xa=!0;break a}xa=!1}if(!xa)return!1}}return!0}(v,this.geometries)}return!1};Tf.prototype.eachChild=function(){};Tf.prototype.outputDefined=function(){return!0};
Tf.prototype.serialize=function(){return["within",this.geojson]};var xg=function(v,H){this.type=H.type;this.name=v;this.boundExpression=H};xg.parse=function(v,H){if(2!==v.length||"string"!=typeof v[1])return H.error("'var' expression requires exactly one string literal argument.");v=v[1];return H.scope.has(v)?new xg(v,H.scope.get(v)):H.error('Unknown variable "'+v+'". Make sure "'+v+'" has been bound in an enclosing "let" expression before using it.',1)};xg.prototype.evaluate=function(v){return this.boundExpression.evaluate(v)};
xg.prototype.eachChild=function(){};xg.prototype.outputDefined=function(){return!1};xg.prototype.serialize=function(){return["var",this.name]};var kg=function(v,H,P,ia,xa){void 0===H&&(H=[]);void 0===ia&&(ia=new bd);void 0===xa&&(xa=[]);this.registry=v;this.path=H;this.key=H.map(function(Aa){return"["+Aa+"]"}).join("");this.scope=ia;this.errors=xa;this.expectedType=P};kg.prototype.parse=function(v,H,P,ia,xa){return void 0===xa&&(xa={}),H?this.concat(H,P,ia)._parse(v,xa):this._parse(v,xa)};kg.prototype._parse=
function(v,H){function P(Aa,Ra,bb){return"assert"===bb?new sg(Ra,[Aa]):"coerce"===bb?new wf(Ra,[Aa]):Aa}if(null!==v&&"string"!=typeof v&&"boolean"!=typeof v&&"number"!=typeof v||(v=["literal",v]),Array.isArray(v)){if(0===v.length)return this.error('Expected an array with at least one element. If you wanted a literal array, use ["literal", []].');var ia=v[0];if("string"!=typeof ia)return this.error("Expression name must be a string, but found "+typeof ia+' instead. If you wanted a literal array, use ["literal", [...]].',
0),null;var xa=this.registry[ia];if(xa){v=xa.parse(v,this);if(!v)return null;if(this.expectedType)if(ia=this.expectedType,xa=v.type,"string"!==ia.kind&&"number"!==ia.kind&&"boolean"!==ia.kind&&"object"!==ia.kind&&"array"!==ia.kind||"value"!==xa.kind)if("color"!==ia.kind&&"formatted"!==ia.kind&&"resolvedImage"!==ia.kind||"value"!==xa.kind&&"string"!==xa.kind){if(this.checkSubtype(ia,xa))return null}else v=P(v,ia,H.typeAnnotation||"coerce");else v=P(v,ia,H.typeAnnotation||"assert");if(!(v instanceof
vf)&&"resolvedImage"!==v.type.kind&&function bb(Ra){if(Ra instanceof xg)return bb(Ra.boundExpression);if(Ra instanceof Zf&&"error"===Ra.name||Ra instanceof Qe||Ra instanceof Tf)return!1;var ob=Ra instanceof wf||Ra instanceof sg,sb=!0;return Ra.eachChild(function(Hb){sb=ob?sb&&bb(Hb):sb&&Hb instanceof vf}),!!sb&&Fa(Ra)&&$a(Ra,["zoom","heatmap-density","line-progress","accumulated","is-supported-script"])}(v)){H=new og;try{v=new vf(v.type,v.evaluate(H))}catch(Ra){return this.error(Ra.message),null}}return v}return this.error('Unknown expression "'+
ia+'". If you wanted a literal array, use ["literal", [...]].',0)}return this.error(void 0===v?"'undefined' value invalid. Use null instead.":"object"==typeof v?'Bare objects invalid. Use ["literal", {...}] instead.':"Expected an array, but found "+typeof v+" instead.")};kg.prototype.concat=function(v,H,P){v="number"==typeof v?this.path.concat(v):this.path;P=P?this.scope.concat(P):this.scope;return new kg(this.registry,v,H||null,P,this.errors)};kg.prototype.error=function(v){for(var H=[],P=arguments.length-
1;0<P--;)H[P]=arguments[P+1];H=""+this.key+H.map(function(ia){return"["+ia+"]"}).join("");this.errors.push(new Cc(H,v))};kg.prototype.checkSubtype=function(v,H){v=ca(v,H);return v&&this.error(v),v};var Gh=function(v,H,P){this.type=v;this.input=H;this.labels=[];this.outputs=[];for(v=0;v<P.length;v+=1){H=P[v];var ia=H[1];this.labels.push(H[0]);this.outputs.push(ia)}};Gh.parse=function(v,H){if(4>v.length-1)return H.error("Expected at least 4 arguments, but found only "+(v.length-1)+".");if(0!=(v.length-
1)%2)return H.error("Expected an even number of arguments.");var P=H.parse(v[1],1,Nc);if(!P)return null;var ia=[],xa=null;H.expectedType&&"value"!==H.expectedType.kind&&(xa=H.expectedType);for(var Aa=1;Aa<v.length;Aa+=2){var Ra=1===Aa?-1/0:v[Aa],bb=v[Aa+1],ob=Aa,sb=Aa+1;if("number"!=typeof Ra)return H.error('Input/output pairs for "step" expressions must be defined using literal numeric values (not computed expressions) for the input values.',ob);if(ia.length&&ia[ia.length-1][0]>=Ra)return H.error('Input/output pairs for "step" expressions must be arranged with input values in strictly ascending order.',
ob);bb=H.parse(bb,sb,xa);if(!bb)return null;xa=xa||bb.type;ia.push([Ra,bb])}return new Gh(xa,P,ia)};Gh.prototype.evaluate=function(v){var H=this.labels,P=this.outputs;if(1===H.length)return P[0].evaluate(v);var ia=this.input.evaluate(v);if(ia<=H[0])return P[0].evaluate(v);var xa=H.length;return ia>=H[xa-1]?P[xa-1].evaluate(v):P[cb(H,ia)].evaluate(v)};Gh.prototype.eachChild=function(v){v(this.input);for(var H=0,P=this.outputs;H<P.length;H+=1)v(P[H])};Gh.prototype.outputDefined=function(){return this.outputs.every(function(v){return v.outputDefined()})};
Gh.prototype.serialize=function(){for(var v=["step",this.input.serialize()],H=0;H<this.labels.length;H++)0<H&&v.push(this.labels[H]),v.push(this.outputs[H].serialize());return v};var ah=Object.freeze({__proto__:null,number:mb,color:function(v,H,P){return new he(mb(v.r,H.r,P),mb(v.g,H.g,P),mb(v.b,H.b,P),mb(v.a,H.a,P))},array:function(v,H,P){return v.map(function(ia,xa){return mb(ia,H[xa],P)})}}),fj=6/29*3*(6/29),zk=Math.PI/180,Zb=180/Math.PI,Zh={forward:ab,reverse:Wa,interpolate:function(v,H,P){return{l:mb(v.l,
H.l,P),a:mb(v.a,H.a,P),b:mb(v.b,H.b,P),alpha:mb(v.alpha,H.alpha,P)}}},Mg={forward:function(v){var H=ab(v),P=H.a,ia=H.b,xa=Math.atan2(ia,P)*Zb;return{h:0>xa?xa+360:xa,c:Math.sqrt(P*P+ia*ia),l:H.l,alpha:v.a}},reverse:function(v){var H=v.h*zk,P=v.c;return Wa({l:v.l,a:Math.cos(H)*P,b:Math.sin(H)*P,alpha:v.alpha})},interpolate:function(v,H,P){var ia=v.h,xa=H.h-ia;return{h:ia+P*(180<xa||-180>xa?xa-360*Math.round(xa/360):xa),c:mb(v.c,H.c,P),l:mb(v.l,H.l,P),alpha:mb(v.alpha,H.alpha,P)}}},yg=Object.freeze({__proto__:null,
lab:Zh,hcl:Mg}),dg=function(v,H,P,ia,xa){this.type=v;this.operator=H;this.interpolation=P;this.input=ia;this.labels=[];this.outputs=[];for(v=0;v<xa.length;v+=1)H=xa[v],P=H[1],this.labels.push(H[0]),this.outputs.push(P)};dg.interpolationFactor=function(v,H,P,ia){var xa=0;"exponential"===v.name?xa=Ja(H,v.base,P,ia):"linear"===v.name?xa=Ja(H,1,P,ia):"cubic-bezier"===v.name&&(v=v.controlPoints,xa=(new ve(v[0],v[1],v[2],v[3])).solve(Ja(H,1,P,ia)));return xa};dg.parse=function(v,H){var P=v[0],ia=v[1],xa=
v[2],Aa=v.slice(3);if(!Array.isArray(ia)||0===ia.length)return H.error("Expected an interpolation type expression.",1);if("linear"===ia[0])ia={name:"linear"};else if("exponential"===ia[0]){ia=ia[1];if("number"!=typeof ia)return H.error("Exponential interpolation requires a numeric base.",1,1);ia={name:"exponential",base:ia}}else{if("cubic-bezier"!==ia[0])return H.error("Unknown interpolation type "+String(ia[0]),1,0);ia=ia.slice(1);if(4!==ia.length||ia.some(function(jc){return"number"!=typeof jc||
0>jc||1<jc}))return H.error("Cubic bezier interpolation requires four numeric arguments with values between 0 and 1.",1);ia={name:"cubic-bezier",controlPoints:ia}}if(4>v.length-1)return H.error("Expected at least 4 arguments, but found only "+(v.length-1)+".");if(0!=(v.length-1)%2)return H.error("Expected an even number of arguments.");if(!(xa=H.parse(xa,2,Nc)))return null;v=[];var Ra=null;"interpolate-hcl"===P||"interpolate-lab"===P?Ra=le:H.expectedType&&"value"!==H.expectedType.kind&&(Ra=H.expectedType);
for(var bb=0;bb<Aa.length;bb+=2){var ob=Aa[bb],sb=Aa[bb+1],Hb=bb+3,Vb=bb+4;if("number"!=typeof ob)return H.error('Input/output pairs for "interpolate" expressions must be defined using literal numeric values (not computed expressions) for the input values.',Hb);if(v.length&&v[v.length-1][0]>=ob)return H.error('Input/output pairs for "interpolate" expressions must be arranged with input values in strictly ascending order.',Hb);sb=H.parse(sb,Vb,Ra);if(!sb)return null;Ra=Ra||sb.type;v.push([ob,sb])}return"number"===
Ra.kind||"color"===Ra.kind||"array"===Ra.kind&&"number"===Ra.itemType.kind&&"number"==typeof Ra.N?new dg(Ra,P,ia,xa,v):H.error("Type "+ha(Ra)+" is not interpolatable.")};dg.prototype.evaluate=function(v){var H=this.labels,P=this.outputs;if(1===H.length)return P[0].evaluate(v);var ia=this.input.evaluate(v);if(ia<=H[0])return P[0].evaluate(v);var xa=H.length;if(ia>=H[xa-1])return P[xa-1].evaluate(v);xa=cb(H,ia);H=dg.interpolationFactor(this.interpolation,ia,H[xa],H[xa+1]);ia=P[xa].evaluate(v);v=P[xa+
1].evaluate(v);return"interpolate"===this.operator?ah[this.type.kind.toLowerCase()](ia,v,H):"interpolate-hcl"===this.operator?Mg.reverse(Mg.interpolate(Mg.forward(ia),Mg.forward(v),H)):Zh.reverse(Zh.interpolate(Zh.forward(ia),Zh.forward(v),H))};dg.prototype.eachChild=function(v){v(this.input);for(var H=0,P=this.outputs;H<P.length;H+=1)v(P[H])};dg.prototype.outputDefined=function(){return this.outputs.every(function(v){return v.outputDefined()})};dg.prototype.serialize=function(){var v="linear"===
this.interpolation.name?["linear"]:"exponential"===this.interpolation.name?1===this.interpolation.base?["linear"]:["exponential",this.interpolation.base]:["cubic-bezier"].concat(this.interpolation.controlPoints);v=[this.operator,v,this.input.serialize()];for(var H=0;H<this.labels.length;H++)v.push(this.labels[H],this.outputs[H].serialize());return v};var Qi=function(v,H){this.type=v;this.args=H};Qi.parse=function(v,H){if(2>v.length)return H.error("Expectected at least one argument.");var P=null,ia=
H.expectedType;ia&&"value"!==ia.kind&&(P=ia);var xa=[],Aa=0;for(v=v.slice(1);Aa<v.length;Aa+=1){var Ra=H.parse(v[Aa],1+xa.length,P,void 0,{typeAnnotation:"omit"});if(!Ra)return null;P=P||Ra.type;xa.push(Ra)}H=ia&&xa.some(function(bb){return ca(ia,bb.type)});return new Qi(H?Sd:P,xa)};Qi.prototype.evaluate=function(v){for(var H,P=null,ia=0,xa=0,Aa=this.args;xa<Aa.length&&(ia++,(P=Aa[xa].evaluate(v))&&P instanceof $e&&!P.available&&(H||(H=P.name),P=null,ia===this.args.length&&(P=H)),null===P);xa+=1);
return P};Qi.prototype.eachChild=function(v){this.args.forEach(v)};Qi.prototype.outputDefined=function(){return this.args.every(function(v){return v.outputDefined()})};Qi.prototype.serialize=function(){var v=["coalesce"];return this.eachChild(function(H){v.push(H.serialize())}),v};var Pi=function(v,H){this.type=H.type;this.bindings=[].concat(v);this.result=H};Pi.prototype.evaluate=function(v){return this.result.evaluate(v)};Pi.prototype.eachChild=function(v){for(var H=0,P=this.bindings;H<P.length;H+=
1)v(P[H][1]);v(this.result)};Pi.parse=function(v,H){if(4>v.length)return H.error("Expected at least 3 arguments, but found "+(v.length-1)+" instead.");for(var P=[],ia=1;ia<v.length-1;ia+=2){var xa=v[ia];if("string"!=typeof xa)return H.error("Expected string, but found "+typeof xa+" instead.",ia);if(/[^a-zA-Z0-9_]/.test(xa))return H.error("Variable names must contain only alphanumeric characters or '_'.",ia);var Aa=H.parse(v[ia+1],ia+1);if(!Aa)return null;P.push([xa,Aa])}return(v=H.parse(v[v.length-
1],v.length-1,H.expectedType,P))?new Pi(P,v):null};Pi.prototype.outputDefined=function(){return this.result.outputDefined()};Pi.prototype.serialize=function(){for(var v=["let"],H=0,P=this.bindings;H<P.length;H+=1){var ia=P[H];v.push(ia[0],ia[1].serialize())}return v.push(this.result.serialize()),v};var Oi=function(v,H,P){this.type=v;this.index=H;this.input=P};Oi.parse=function(v,H){if(3!==v.length)return H.error("Expected 2 arguments, but found "+(v.length-1)+" instead.");var P=H.parse(v[1],1,Nc);
v=H.parse(v[2],2,ka(H.expectedType||Sd));return P&&v?new Oi(v.type.itemType,P,v):null};Oi.prototype.evaluate=function(v){var H=this.index.evaluate(v);v=this.input.evaluate(v);if(0>H)throw new nf("Array index out of bounds: "+H+" \x3c 0.");if(H>=v.length)throw new nf("Array index out of bounds: "+H+" \x3e "+(v.length-1)+".");if(H!==Math.floor(H))throw new nf("Array index must be an integer, but found "+H+" instead.");return v[H]};Oi.prototype.eachChild=function(v){v(this.index);v(this.input)};Oi.prototype.outputDefined=
function(){return!1};Oi.prototype.serialize=function(){return["at",this.index.serialize(),this.input.serialize()]};var Li=function(v,H){this.type=Ad;this.needle=v;this.haystack=H};Li.parse=function(v,H){if(3!==v.length)return H.error("Expected 2 arguments, but found "+(v.length-1)+" instead.");var P=H.parse(v[1],1,Sd);v=H.parse(v[2],2,Sd);return P&&v?sa(P.type,[Ad,vd,Nc,nd,Sd])?new Li(P,v):H.error("Expected first argument to be of type boolean, string, number or null, but found "+ha(P.type)+" instead"):
null};Li.prototype.evaluate=function(v){var H=this.needle.evaluate(v);v=this.haystack.evaluate(v);if(!v)return!1;if(!ma(H,["boolean","string","number","null"]))throw new nf("Expected first argument to be of type boolean, string, number or null, but found "+ha(Y(H))+" instead.");if(!ma(v,["string","array"]))throw new nf("Expected second argument to be of type array or string, but found "+ha(Y(v))+" instead.");return 0<=v.indexOf(H)};Li.prototype.eachChild=function(v){v(this.needle);v(this.haystack)};
Li.prototype.outputDefined=function(){return!0};Li.prototype.serialize=function(){return["in",this.needle.serialize(),this.haystack.serialize()]};var Ki=function(v,H,P){this.type=Nc;this.needle=v;this.haystack=H;this.fromIndex=P};Ki.parse=function(v,H){if(2>=v.length||5<=v.length)return H.error("Expected 3 or 4 arguments, but found "+(v.length-1)+" instead.");var P=H.parse(v[1],1,Sd),ia=H.parse(v[2],2,Sd);return P&&ia?sa(P.type,[Ad,vd,Nc,nd,Sd])?4===v.length?(v=H.parse(v[3],3,Nc))?new Ki(P,ia,v):
null:new Ki(P,ia):H.error("Expected first argument to be of type boolean, string, number or null, but found "+ha(P.type)+" instead"):null};Ki.prototype.evaluate=function(v){var H=this.needle.evaluate(v),P=this.haystack.evaluate(v);if(!ma(H,["boolean","string","number","null"]))throw new nf("Expected first argument to be of type boolean, string, number or null, but found "+ha(Y(H))+" instead.");if(!ma(P,["string","array"]))throw new nf("Expected second argument to be of type array or string, but found "+
ha(Y(P))+" instead.");return this.fromIndex?(v=this.fromIndex.evaluate(v),P.indexOf(H,v)):P.indexOf(H)};Ki.prototype.eachChild=function(v){v(this.needle);v(this.haystack);this.fromIndex&&v(this.fromIndex)};Ki.prototype.outputDefined=function(){return!1};Ki.prototype.serialize=function(){if(null!=this.fromIndex&&void 0!==this.fromIndex){var v=this.fromIndex.serialize();return["index-of",this.needle.serialize(),this.haystack.serialize(),v]}return["index-of",this.needle.serialize(),this.haystack.serialize()]};
var Fe=function(v,H,P,ia,xa,Aa){this.inputType=v;this.type=H;this.input=P;this.cases=ia;this.outputs=xa;this.otherwise=Aa};Fe.parse=function(v,H){if(5>v.length)return H.error("Expected at least 4 arguments, but found only "+(v.length-1)+".");if(1!=v.length%2)return H.error("Expected an even number of arguments.");var P;H.expectedType&&"value"!==H.expectedType.kind&&(P=H.expectedType);for(var ia={},xa=[],Aa=2;Aa<v.length-1;Aa+=2){var Ra=v[Aa],bb=v[Aa+1];Array.isArray(Ra)||(Ra=[Ra]);var ob=H.concat(Aa);
if(0===Ra.length)return ob.error("Expected at least one branch label.");for(var sb=0;sb<Ra.length;sb+=1){var Hb=Ra[sb];if("number"!=typeof Hb&&"string"!=typeof Hb)return ob.error("Branch labels must be numbers or strings.");if("number"==typeof Hb&&Math.abs(Hb)>Number.MAX_SAFE_INTEGER)return ob.error("Branch labels must be integers no larger than "+Number.MAX_SAFE_INTEGER+".");if("number"==typeof Hb&&Math.floor(Hb)!==Hb)return ob.error("Numeric branch labels must be integer values.");if(Vb){if(ob.checkSubtype(Vb,
Y(Hb)))return null}else var Vb=Y(Hb);if(void 0!==ia[String(Hb)])return ob.error("Branch labels must be unique.");ia[String(Hb)]=xa.length}bb=H.parse(bb,Aa,P);if(!bb)return null;P=P||bb.type;xa.push(bb)}Aa=H.parse(v[1],1,Sd);return Aa?(v=H.parse(v[v.length-1],v.length-1,P))?"value"!==Aa.type.kind&&H.concat(1).checkSubtype(Vb,Aa.type)?null:new Fe(Vb,P,Aa,ia,xa,v):null:null};Fe.prototype.evaluate=function(v){var H=this.input.evaluate(v);return(Y(H)===this.inputType&&this.outputs[this.cases[H]]||this.otherwise).evaluate(v)};
Fe.prototype.eachChild=function(v){v(this.input);this.outputs.forEach(v);v(this.otherwise)};Fe.prototype.outputDefined=function(){return this.outputs.every(function(v){return v.outputDefined()})&&this.otherwise.outputDefined()};Fe.prototype.serialize=function(){for(var v=this,H=["match",this.input.serialize()],P=[],ia={},xa=0,Aa=Object.keys(this.cases).sort();xa<Aa.length;xa+=1){var Ra=Aa[xa];void 0===(bb=ia[this.cases[Ra]])?(ia[this.cases[Ra]]=P.length,P.push([this.cases[Ra],[Ra]])):P[bb][1].push(Ra)}ia=
function(ob){return"number"===v.inputType.kind?Number(ob):ob};for(xa=0;xa<P.length;xa+=1){Aa=P[xa];var bb=Aa[0];bb=Aa[1];H.push(1===bb.length?ia(bb[0]):bb.map(ia));H.push(this.outputs[outputIndex$1].serialize())}return H.push(this.otherwise.serialize()),H};var Bi=function(v,H,P){this.type=v;this.branches=H;this.otherwise=P};Bi.parse=function(v,H){if(4>v.length)return H.error("Expected at least 3 arguments, but found only "+(v.length-1)+".");if(0!=v.length%2)return H.error("Expected an odd number of arguments.");
var P;H.expectedType&&"value"!==H.expectedType.kind&&(P=H.expectedType);for(var ia=[],xa=1;xa<v.length-1;xa+=2){var Aa=H.parse(v[xa],xa,Ad);if(!Aa)return null;var Ra=H.parse(v[xa+1],xa+1,P);if(!Ra)return null;ia.push([Aa,Ra]);P=P||Ra.type}return(v=H.parse(v[v.length-1],v.length-1,P))?new Bi(P,ia,v):null};Bi.prototype.evaluate=function(v){for(var H=0,P=this.branches;H<P.length;H+=1){var ia=P[H],xa=ia[1];if(ia[0].evaluate(v))return xa.evaluate(v)}return this.otherwise.evaluate(v)};Bi.prototype.eachChild=
function(v){for(var H=0,P=this.branches;H<P.length;H+=1){var ia=P[H],xa=ia[1];v(ia[0]);v(xa)}v(this.otherwise)};Bi.prototype.outputDefined=function(){return this.branches.every(function(v){return v[1].outputDefined()})&&this.otherwise.outputDefined()};Bi.prototype.serialize=function(){var v=["case"];return this.eachChild(function(H){v.push(H.serialize())}),v};var Ri=function(v,H,P,ia){this.type=v;this.input=H;this.beginIndex=P;this.endIndex=ia};Ri.parse=function(v,H){if(2>=v.length||5<=v.length)return H.error("Expected 3 or 4 arguments, but found "+
(v.length-1)+" instead.");var P=H.parse(v[1],1,Sd),ia=H.parse(v[2],2,Nc);return P&&ia?sa(P.type,[ka(Sd),vd,Sd])?4===v.length?(v=H.parse(v[3],3,Nc))?new Ri(P.type,P,ia,v):null:new Ri(P.type,P,ia):H.error("Expected first argument to be of type array or string, but found "+ha(P.type)+" instead"):null};Ri.prototype.evaluate=function(v){var H=this.input.evaluate(v),P=this.beginIndex.evaluate(v);if(!ma(H,["string","array"]))throw new nf("Expected first argument to be of type array or string, but found "+
ha(Y(H))+" instead.");return this.endIndex?(v=this.endIndex.evaluate(v),H.slice(P,v)):H.slice(P)};Ri.prototype.eachChild=function(v){v(this.input);v(this.beginIndex);this.endIndex&&v(this.endIndex)};Ri.prototype.outputDefined=function(){return!1};Ri.prototype.serialize=function(){if(null!=this.endIndex&&void 0!==this.endIndex){var v=this.endIndex.serialize();return["slice",this.input.serialize(),this.beginIndex.serialize(),v]}return["slice",this.input.serialize(),this.beginIndex.serialize()]};var qk=
nb("\x3d\x3d",function(v,H,P){return H===P},fb),Kk=nb("!\x3d",function(v,H,P){return H!==P},function(v,H,P,ia){return!fb(0,H,P,ia)}),Lk=nb("\x3c",function(v,H,P){return H<P},function(v,H,P,ia){return 0>ia.compare(H,P)}),rk=nb("\x3e",function(v,H,P){return H>P},function(v,H,P,ia){return 0<ia.compare(H,P)}),sf=nb("\x3c\x3d",function(v,H,P){return H<=P},function(v,H,P,ia){return 0>=ia.compare(H,P)}),Ak=nb("\x3e\x3d",function(v,H,P){return H>=P},function(v,H,P,ia){return 0<=ia.compare(H,P)}),zg=function(v,
H,P,ia,xa){this.type=vd;this.number=v;this.locale=H;this.currency=P;this.minFractionDigits=ia;this.maxFractionDigits=xa};zg.parse=function(v,H){if(3!==v.length)return H.error("Expected two arguments.");var P=H.parse(v[1],1,Nc);if(!P)return null;v=v[2];if("object"!=typeof v||Array.isArray(v))return H.error("NumberFormat options argument must be an object.");var ia=null;if(v.locale&&!(ia=H.parse(v.locale,1,vd)))return null;var xa=null;if(v.currency&&!(xa=H.parse(v.currency,1,vd)))return null;var Aa=
null;if(v["min-fraction-digits"]&&!(Aa=H.parse(v["min-fraction-digits"],1,Nc)))return null;var Ra=null;return v["max-fraction-digits"]&&!(Ra=H.parse(v["max-fraction-digits"],1,Nc))?null:new zg(P,ia,xa,Aa,Ra)};zg.prototype.evaluate=function(v){return(new Intl.NumberFormat(this.locale?this.locale.evaluate(v):[],{style:this.currency?"currency":"decimal",currency:this.currency?this.currency.evaluate(v):void 0,minimumFractionDigits:this.minFractionDigits?this.minFractionDigits.evaluate(v):void 0,maximumFractionDigits:this.maxFractionDigits?
this.maxFractionDigits.evaluate(v):void 0})).format(this.number.evaluate(v))};zg.prototype.eachChild=function(v){v(this.number);this.locale&&v(this.locale);this.currency&&v(this.currency);this.minFractionDigits&&v(this.minFractionDigits);this.maxFractionDigits&&v(this.maxFractionDigits)};zg.prototype.outputDefined=function(){return!1};zg.prototype.serialize=function(){var v={};return this.locale&&(v.locale=this.locale.serialize()),this.currency&&(v.currency=this.currency.serialize()),this.minFractionDigits&&
(v["min-fraction-digits"]=this.minFractionDigits.serialize()),this.maxFractionDigits&&(v["max-fraction-digits"]=this.maxFractionDigits.serialize()),["number-format",this.number.serialize(),v]};var $h=function(v){this.type=Nc;this.input=v};$h.parse=function(v,H){return 2!==v.length?H.error("Expected 1 argument, but found "+(v.length-1)+" instead."):(v=H.parse(v[1],1))?"array"!==v.type.kind&&"string"!==v.type.kind&&"value"!==v.type.kind?H.error("Expected argument of type string or array, but found "+
ha(v.type)+" instead."):new $h(v):null};$h.prototype.evaluate=function(v){v=this.input.evaluate(v);if("string"==typeof v||Array.isArray(v))return v.length;throw new nf("Expected value to be of type string or array, but found "+ha(Y(v))+" instead.");};$h.prototype.eachChild=function(v){v(this.input)};$h.prototype.outputDefined=function(){return!1};$h.prototype.serialize=function(){var v=["length"];return this.eachChild(function(H){v.push(H.serialize())}),v};var mh={"\x3d\x3d":qk,"!\x3d":Kk,"\x3e":rk,
"\x3c":Lk,"\x3e\x3d":Ak,"\x3c\x3d":sf,array:sg,at:Oi,boolean:sg,case:Bi,coalesce:Qi,collator:Qe,format:Vg,image:jg,in:Li,"index-of":Ki,interpolate:dg,"interpolate-hcl":dg,"interpolate-lab":dg,length:$h,let:Pi,literal:vf,match:Fe,number:sg,"number-format":zg,object:sg,slice:Ri,step:Gh,string:sg,"to-boolean":wf,"to-color":wf,"to-number":wf,"to-string":wf,var:xg,within:Tf};Zf.register(mh,{error:[{kind:"error"},[vd],function(v,H){throw new nf(H[0].evaluate(v));}],typeof:[vd,[Sd],function(v,H){return ha(Y(H[0].evaluate(v)))}],
"to-rgba":[ka(Nc,4),[le],function(v,H){return H[0].evaluate(v).toArray()}],rgb:[le,[Nc,Nc,Nc],Ha],rgba:[le,[Nc,Nc,Nc,Nc],Ha],has:{type:Ad,overloads:[[[vd],function(v,H){H=H[0].evaluate(v);v=v.properties();return H in v}],[[vd,Ud],function(v,H){var P=H[1];H=H[0].evaluate(v);v=P.evaluate(v);return H in v}]]},get:{type:Sd,overloads:[[[vd],function(v,H){return Ca(H[0].evaluate(v),v.properties())}],[[vd,Ud],function(v,H){var P=H[1];return Ca(H[0].evaluate(v),P.evaluate(v))}]]},"feature-state":[Sd,[vd],
function(v,H){return Ca(H[0].evaluate(v),v.featureState||{})}],properties:[Ud,[],function(v){return v.properties()}],"geometry-type":[vd,[],function(v){return v.geometryType()}],id:[Sd,[],function(v){return v.id()}],zoom:[Nc,[],function(v){return v.globals.zoom}],"heatmap-density":[Nc,[],function(v){return v.globals.heatmapDensity||0}],"line-progress":[Nc,[],function(v){return v.globals.lineProgress||0}],accumulated:[Sd,[],function(v){return void 0===v.globals.accumulated?null:v.globals.accumulated}],
"+":[Nc,{type:Nc},function(v,H){for(var P=0,ia=0;ia<H.length;ia+=1)P+=H[ia].evaluate(v);return P}],"*":[Nc,{type:Nc},function(v,H){for(var P=1,ia=0;ia<H.length;ia+=1)P*=H[ia].evaluate(v);return P}],"-":{type:Nc,overloads:[[[Nc,Nc],function(v,H){var P=H[1];return H[0].evaluate(v)-P.evaluate(v)}],[[Nc],function(v,H){return-H[0].evaluate(v)}]]},"/":[Nc,[Nc,Nc],function(v,H){var P=H[1];return H[0].evaluate(v)/P.evaluate(v)}],"%":[Nc,[Nc,Nc],function(v,H){var P=H[1];return H[0].evaluate(v)%P.evaluate(v)}],
ln2:[Nc,[],function(){return Math.LN2}],pi:[Nc,[],function(){return Math.PI}],e:[Nc,[],function(){return Math.E}],"^":[Nc,[Nc,Nc],function(v,H){var P=H[1];return Math.pow(H[0].evaluate(v),P.evaluate(v))}],sqrt:[Nc,[Nc],function(v,H){return Math.sqrt(H[0].evaluate(v))}],log10:[Nc,[Nc],function(v,H){return Math.log(H[0].evaluate(v))/Math.LN10}],ln:[Nc,[Nc],function(v,H){return Math.log(H[0].evaluate(v))}],log2:[Nc,[Nc],function(v,H){return Math.log(H[0].evaluate(v))/Math.LN2}],sin:[Nc,[Nc],function(v,
H){return Math.sin(H[0].evaluate(v))}],cos:[Nc,[Nc],function(v,H){return Math.cos(H[0].evaluate(v))}],tan:[Nc,[Nc],function(v,H){return Math.tan(H[0].evaluate(v))}],asin:[Nc,[Nc],function(v,H){return Math.asin(H[0].evaluate(v))}],acos:[Nc,[Nc],function(v,H){return Math.acos(H[0].evaluate(v))}],atan:[Nc,[Nc],function(v,H){return Math.atan(H[0].evaluate(v))}],min:[Nc,{type:Nc},function(v,H){return Math.min.apply(Math,H.map(function(P){return P.evaluate(v)}))}],max:[Nc,{type:Nc},function(v,H){return Math.max.apply(Math,
H.map(function(P){return P.evaluate(v)}))}],abs:[Nc,[Nc],function(v,H){return Math.abs(H[0].evaluate(v))}],round:[Nc,[Nc],function(v,H){v=H[0].evaluate(v);return 0>v?-Math.round(-v):Math.round(v)}],floor:[Nc,[Nc],function(v,H){return Math.floor(H[0].evaluate(v))}],ceil:[Nc,[Nc],function(v,H){return Math.ceil(H[0].evaluate(v))}],"filter-\x3d\x3d":[Ad,[vd,Sd],function(v,H){var P=H[0];H=H[1];return v.properties()[P.value]===H.value}],"filter-id-\x3d\x3d":[Ad,[Sd],function(v,H){H=H[0];return v.id()===
H.value}],"filter-type-\x3d\x3d":[Ad,[vd],function(v,H){H=H[0];return v.geometryType()===H.value}],"filter-\x3c":[Ad,[vd,Sd],function(v,H){var P=H[0];H=H[1];v=v.properties()[P.value];P=H.value;return typeof v==typeof P&&v<P}],"filter-id-\x3c":[Ad,[Sd],function(v,H){H=H[0];v=v.id();H=H.value;return typeof v==typeof H&&v<H}],"filter-\x3e":[Ad,[vd,Sd],function(v,H){var P=H[0];H=H[1];v=v.properties()[P.value];P=H.value;return typeof v==typeof P&&v>P}],"filter-id-\x3e":[Ad,[Sd],function(v,H){H=H[0];v=
v.id();H=H.value;return typeof v==typeof H&&v>H}],"filter-\x3c\x3d":[Ad,[vd,Sd],function(v,H){var P=H[0];H=H[1];v=v.properties()[P.value];P=H.value;return typeof v==typeof P&&v<=P}],"filter-id-\x3c\x3d":[Ad,[Sd],function(v,H){H=H[0];v=v.id();H=H.value;return typeof v==typeof H&&v<=H}],"filter-\x3e\x3d":[Ad,[vd,Sd],function(v,H){var P=H[0];H=H[1];v=v.properties()[P.value];P=H.value;return typeof v==typeof P&&v>=P}],"filter-id-\x3e\x3d":[Ad,[Sd],function(v,H){H=H[0];v=v.id();H=H.value;return typeof v==
typeof H&&v>=H}],"filter-has":[Ad,[Sd],function(v,H){return H[0].value in v.properties()}],"filter-has-id":[Ad,[],function(v){return null!==v.id()&&void 0!==v.id()}],"filter-type-in":[Ad,[ka(vd)],function(v,H){return 0<=H[0].value.indexOf(v.geometryType())}],"filter-id-in":[Ad,[ka(Sd)],function(v,H){return 0<=H[0].value.indexOf(v.id())}],"filter-in-small":[Ad,[vd,ka(Sd)],function(v,H){var P=H[0];return 0<=H[1].value.indexOf(v.properties()[P.value])}],"filter-in-large":[Ad,[vd,ka(Sd)],function(v,H){var P=
H[0];H=H[1];a:{v=v.properties()[P.value];P=H.value;var ia=0;for(H=H.value.length-1;ia<=H;){var xa=ia+H>>1;if(P[xa]===v){H=!0;break a}P[xa]>v?H=xa-1:ia=xa+1}H=!1}return H}],all:{type:Ad,overloads:[[[Ad,Ad],function(v,H){var P=H[1];return H[0].evaluate(v)&&P.evaluate(v)}],[{type:Ad},function(v,H){for(var P=0;P<H.length;P+=1)if(!H[P].evaluate(v))return!1;return!0}]]},any:{type:Ad,overloads:[[[Ad,Ad],function(v,H){var P=H[1];return H[0].evaluate(v)||P.evaluate(v)}],[{type:Ad},function(v,H){for(var P=
0;P<H.length;P+=1)if(H[P].evaluate(v))return!0;return!1}]]},"!":[Ad,[Ad],function(v,H){return!H[0].evaluate(v)}],"is-supported-script":[Ad,[vd],function(v,H){var P=v.globals&&v.globals.isSupportedScript;return!P||P(H[0].evaluate(v))}],upcase:[vd,[vd],function(v,H){return H[0].evaluate(v).toUpperCase()}],downcase:[vd,[vd],function(v,H){return H[0].evaluate(v).toLowerCase()}],concat:[vd,{type:Sd},function(v,H){return H.map(function(P){return pa(P.evaluate(v))}).join("")}],"resolved-locale":[vd,[fe],
function(v,H){return H[0].evaluate(v).resolvedLocale()}]});var nh=function(v,H){this.expression=v;this._warningHistory={};this._evaluator=new og;this._defaultValue=H?"color"===H.type&&Kb(H.default)?new he(0,0,0,0):"color"===H.type?he.parse(H.default)||null:void 0===H.default?null:H.default:null;this._enumValues=H&&"enum"===H.type?H.values:null};nh.prototype.evaluateWithoutErrorHandling=function(v,H,P,ia,xa,Aa){return this._evaluator.globals=v,this._evaluator.feature=H,this._evaluator.featureState=
P,this._evaluator.canonical=ia,this._evaluator.availableImages=xa||null,this._evaluator.formattedSection=Aa,this.expression.evaluate(this._evaluator)};nh.prototype.evaluate=function(v,H,P,ia,xa,Aa){this._evaluator.globals=v;this._evaluator.feature=H||null;this._evaluator.featureState=P||null;this._evaluator.canonical=ia;this._evaluator.availableImages=xa||null;this._evaluator.formattedSection=Aa||null;try{var Ra=this.expression.evaluate(this._evaluator);if(null==Ra||"number"==typeof Ra&&Ra!=Ra)return this._defaultValue;
if(this._enumValues&&!(Ra in this._enumValues))throw new nf("Expected value to be one of "+Object.keys(this._enumValues).map(function(bb){return JSON.stringify(bb)}).join(", ")+", but found "+JSON.stringify(Ra)+" instead.");return Ra}catch(bb){return this._warningHistory[bb.message]||(this._warningHistory[bb.message]=!0,"undefined"!=typeof console&&console.warn(bb.message)),this._defaultValue}};var lh=function(v,H){this.kind=v;this._styleExpression=H;this.isStateDependent="constant"!==v&&!Na(H.expression)};
lh.prototype.evaluateWithoutErrorHandling=function(v,H,P,ia,xa,Aa){return this._styleExpression.evaluateWithoutErrorHandling(v,H,P,ia,xa,Aa)};lh.prototype.evaluate=function(v,H,P,ia,xa,Aa){return this._styleExpression.evaluate(v,H,P,ia,xa,Aa)};var Ce=function(v,H,P,ia){this.kind=v;this.zoomStops=P;this._styleExpression=H;this.isStateDependent="camera"!==v&&!Na(H.expression);this.interpolationType=ia};Ce.prototype.evaluateWithoutErrorHandling=function(v,H,P,ia,xa,Aa){return this._styleExpression.evaluateWithoutErrorHandling(v,
H,P,ia,xa,Aa)};Ce.prototype.evaluate=function(v,H,P,ia,xa,Aa){return this._styleExpression.evaluate(v,H,P,ia,xa,Aa)};Ce.prototype.interpolationFactor=function(v,H,P){return this.interpolationType?dg.interpolationFactor(this.interpolationType,v,H,P):0};var $f=function(v,H){this._parameters=v;this._specification=H;X(this,function Aa(ia,xa){var Ra="color"===xa.type,bb=ia.stops&&"object"==typeof ia.stops[0][0],ob=bb||!(bb||void 0!==ia.property),sb=ia.type||(db(xa)?"exponential":"interval");if(Ra&&((ia=
X({},ia)).stops&&(ia.stops=ia.stops.map(function(ac){return[ac[0],he.parse(ac[1])]})),ia.default=he.parse(ia.default?ia.default:xa.default)),ia.colorSpace&&"rgb"!==ia.colorSpace&&!yg[ia.colorSpace])throw Error("Unknown color space: "+ia.colorSpace);if("exponential"===sb)var Hb=Pc;else if("interval"===sb)Hb=qc;else if("categorical"===sb){Hb=kc;var Vb=Object.create(null);Ra=0;for(var jc=ia.stops;Ra<jc.length;Ra+=1){var ec=jc[Ra];Vb[ec[0]]=ec[1]}var Nb=typeof ia.stops[0][0]}else{if("identity"!==sb)throw Error('Unknown function type "'+
sb+'"');Hb=Qc}if(bb){bb={};ob=[];for(sb=0;sb<ia.stops.length;sb++)Ra=ia.stops[sb],jc=Ra[0].zoom,void 0===bb[jc]&&(bb[jc]={zoom:jc,type:ia.type,property:ia.property,default:ia.default,stops:[]},ob.push(jc)),bb[jc].stops.push([Ra[0].value,Ra[1]]);var Mb=[];for(sb=0;sb<ob.length;sb+=1)Ra=ob[sb],Mb.push([bb[Ra].zoom,Aa(bb[Ra],xa)]);bb={name:"linear"};return{kind:"composite",interpolationType:bb,interpolationFactor:dg.interpolationFactor.bind(void 0,bb),zoomStops:Mb.map(function(ac){return ac[0]}),evaluate:function(ac,
Ic){ac=ac.zoom;return Pc({stops:Mb,base:ia.base},xa,ac).evaluate(ac,Ic)}}}return ob?(bb="exponential"===sb?{name:"exponential",base:void 0!==ia.base?ia.base:1}:null,{kind:"camera",interpolationType:bb,interpolationFactor:dg.interpolationFactor.bind(void 0,bb),zoomStops:ia.stops.map(function(ac){return ac[0]}),evaluate:function(ac){return Hb(ia,xa,ac.zoom,Vb,Nb)}}):{kind:"source",evaluate:function(ac,Ic){ac=Ic&&Ic.properties?Ic.properties[ia.property]:void 0;return void 0===ac?cc(ia.default,xa.default):
Hb(ia,xa,ac,Vb,Nb)}}}(this._parameters,this._specification))};$f.deserialize=function(v){return new $f(v._parameters,v._specification)};$f.serialize=function(v){return{_parameters:v._parameters,_specification:v._specification}};var ik={type:"boolean",default:!1,transition:!1,"property-type":"data-driven",expression:{interpolated:!1,parameters:["zoom","feature"]}},Kf={promoteId:function(v){var H=v.key;v=v.value;if("string"===qb(v))return $b({key:H,value:v});var P=[],ia;for(ia in v)P.push.apply(P,$b({key:H+
"."+ia,value:v[ia]}));return P}},Oe={"*":function(){return[]},array:ic,boolean:function(v){var H=v.value;v=v.key;var P=qb(H);return"boolean"!==P?[new fc(v,H,"boolean expected, "+P+" found")]:[]},number:sc,color:function(v){var H=v.key;v=v.value;var P=qb(v);return"string"!==P?[new fc(H,v,"color expected, "+P+" found")]:null===lf(v)?[new fc(H,v,'color expected, "'+v+'" found')]:[]},constants:V,enum:Tb,filter:Jb,function:wb,layer:lc,object:Cb,source:nc,light:xc,string:$b,formatted:function(v){return 0===
$b(v).length?[]:zb(v)},resolvedImage:function(v){return 0===$b(v).length?[]:zb(v)}};pd.source=xd(nc);pd.light=xd(xc);pd.layer=xd(lc);pd.filter=xd(Jb);pd.paintProperty=xd(Lb);pd.layoutProperty=xd(Ib);var Jf=pd.light,hk=pd.paintProperty,Rk=pd.layoutProperty;Yc.prototype.insert=function(v,H,P,ia,xa){this._forEachCell(H,P,ia,xa,this._insertCell,this.uid++);this.keys.push(v);this.bboxes.push(H);this.bboxes.push(P);this.bboxes.push(ia);this.bboxes.push(xa)};Yc.prototype._insertReadonly=function(){throw"Cannot insert into a GridIndex created from an ArrayBuffer.";
};Yc.prototype._insertCell=function(v,H,P,ia,xa,Aa){this.cells[xa].push(Aa)};Yc.prototype.query=function(v,H,P,ia,xa){var Aa=this.min,Ra=this.max;if(v<=Aa&&H<=Aa&&Ra<=P&&Ra<=ia&&!xa)return Array.prototype.slice.call(this.keys);Aa=[];return this._forEachCell(v,H,P,ia,this._queryCell,Aa,{},xa),Aa};Yc.prototype._queryCell=function(v,H,P,ia,xa,Aa,Ra,bb){xa=this.cells[xa];if(null!==xa)for(var ob=this.keys,sb=this.bboxes,Hb=0;Hb<xa.length;Hb++){var Vb=xa[Hb];if(void 0===Ra[Vb]){var jc=4*Vb;(bb?bb(sb[jc+
0],sb[jc+1],sb[jc+2],sb[jc+3]):v<=sb[jc+2]&&H<=sb[jc+3]&&P>=sb[jc+0]&&ia>=sb[jc+1])?(Ra[Vb]=!0,Aa.push(ob[Vb])):Ra[Vb]=!1}}};Yc.prototype._forEachCell=function(v,H,P,ia,xa,Aa,Ra,bb){for(var ob=this._convertToCellCoord(v),sb=this._convertToCellCoord(H),Hb=this._convertToCellCoord(P),Vb=this._convertToCellCoord(ia);ob<=Hb;ob++)for(var jc=sb;jc<=Vb;jc++){var ec=this.d*jc+ob;if((!bb||bb(this._convertFromCellCoord(ob),this._convertFromCellCoord(jc),this._convertFromCellCoord(ob+1),this._convertFromCellCoord(jc+
1)))&&xa.call(this,v,H,P,ia,ec,Aa,Ra,bb))return}};Yc.prototype._convertFromCellCoord=function(v){return(v-this.padding)/this.scale};Yc.prototype._convertToCellCoord=function(v){return Math.max(0,Math.min(this.d-1,Math.floor(v*this.scale)+this.padding))};Yc.prototype.toArrayBuffer=function(){if(this.arrayBuffer)return this.arrayBuffer;for(var v=this.cells,H=3+this.cells.length+1+1,P=0,ia=0;ia<this.cells.length;ia++)P+=this.cells[ia].length;P=new Int32Array(H+P+this.keys.length+this.bboxes.length);
P[0]=this.extent;P[1]=this.n;P[2]=this.padding;for(ia=0;ia<v.length;ia++){var xa=v[ia];P[3+ia]=H;P.set(xa,H);H+=xa.length}return P[3+v.length]=H,P.set(this.keys,H),P[3+v.length+1]=H+=this.keys.length,P.set(this.bboxes,H),P.buffer};var Pj=self.ImageData,gj=self.ImageBitmap,Hj={},Ij;for(Ij in Hc("Object",Object),Yc.serialize=function(v,H){v=v.toArrayBuffer();return H&&H.push(v),{buffer:v}},Yc.deserialize=function(v){return new Yc(v.buffer)},Hc("Grid",Yc),Hc("Color",he),Hc("Error",Error),Hc("ResolvedImage",
$e),Hc("StylePropertyFunction",$f),Hc("StyleExpression",nh,{omit:["_evaluator"]}),Hc("ZoomDependentExpression",Ce),Hc("ZoomConstantExpression",lh),Hc("CompoundExpression",Zf,{omit:["_evaluate"]}),mh)mh[Ij]._classRegistryKey||Hc("Expression_"+Ij,mh[Ij]);var qj=function(){this.first=!0};qj.prototype.update=function(v,H){var P=Math.floor(v);return this.first?(this.first=!1,this.lastIntegerZoom=P,this.lastIntegerZoomTime=0,this.lastZoom=v,this.lastFloorZoom=P,!0):(this.lastFloorZoom>P?(this.lastIntegerZoom=
P+1,this.lastIntegerZoomTime=H):this.lastFloorZoom<P&&(this.lastIntegerZoom=P,this.lastIntegerZoomTime=H),v!==this.lastZoom&&(this.lastZoom=v,this.lastFloorZoom=P,!0))};var je={"Latin-1 Supplement":function(v){return 128<=v&&255>=v},Arabic:function(v){return 1536<=v&&1791>=v},"Arabic Supplement":function(v){return 1872<=v&&1919>=v},"Arabic Extended-A":function(v){return 2208<=v&&2303>=v},"Hangul Jamo":function(v){return 4352<=v&&4607>=v},"Unified Canadian Aboriginal Syllabics":function(v){return 5120<=
v&&5759>=v},Khmer:function(v){return 6016<=v&&6143>=v},"Unified Canadian Aboriginal Syllabics Extended":function(v){return 6320<=v&&6399>=v},"General Punctuation":function(v){return 8192<=v&&8303>=v},"Letterlike Symbols":function(v){return 8448<=v&&8527>=v},"Number Forms":function(v){return 8528<=v&&8591>=v},"Miscellaneous Technical":function(v){return 8960<=v&&9215>=v},"Control Pictures":function(v){return 9216<=v&&9279>=v},"Optical Character Recognition":function(v){return 9280<=v&&9311>=v},"Enclosed Alphanumerics":function(v){return 9312<=
v&&9471>=v},"Geometric Shapes":function(v){return 9632<=v&&9727>=v},"Miscellaneous Symbols":function(v){return 9728<=v&&9983>=v},"Miscellaneous Symbols and Arrows":function(v){return 11008<=v&&11263>=v},"CJK Radicals Supplement":function(v){return 11904<=v&&12031>=v},"Kangxi Radicals":function(v){return 12032<=v&&12255>=v},"Ideographic Description Characters":function(v){return 12272<=v&&12287>=v},"CJK Symbols and Punctuation":function(v){return 12288<=v&&12351>=v},Hiragana:function(v){return 12352<=
v&&12447>=v},Katakana:function(v){return 12448<=v&&12543>=v},Bopomofo:function(v){return 12544<=v&&12591>=v},"Hangul Compatibility Jamo":function(v){return 12592<=v&&12687>=v},Kanbun:function(v){return 12688<=v&&12703>=v},"Bopomofo Extended":function(v){return 12704<=v&&12735>=v},"CJK Strokes":function(v){return 12736<=v&&12783>=v},"Katakana Phonetic Extensions":function(v){return 12784<=v&&12799>=v},"Enclosed CJK Letters and Months":function(v){return 12800<=v&&13055>=v},"CJK Compatibility":function(v){return 13056<=
v&&13311>=v},"CJK Unified Ideographs Extension A":function(v){return 13312<=v&&19903>=v},"Yijing Hexagram Symbols":function(v){return 19904<=v&&19967>=v},"CJK Unified Ideographs":function(v){return 19968<=v&&40959>=v},"Yi Syllables":function(v){return 40960<=v&&42127>=v},"Yi Radicals":function(v){return 42128<=v&&42191>=v},"Hangul Jamo Extended-A":function(v){return 43360<=v&&43391>=v},"Hangul Syllables":function(v){return 44032<=v&&55215>=v},"Hangul Jamo Extended-B":function(v){return 55216<=v&&
55295>=v},"Private Use Area":function(v){return 57344<=v&&63743>=v},"CJK Compatibility Ideographs":function(v){return 63744<=v&&64255>=v},"Arabic Presentation Forms-A":function(v){return 64336<=v&&65023>=v},"Vertical Forms":function(v){return 65040<=v&&65055>=v},"CJK Compatibility Forms":function(v){return 65072<=v&&65103>=v},"Small Form Variants":function(v){return 65104<=v&&65135>=v},"Arabic Presentation Forms-B":function(v){return 65136<=v&&65279>=v},"Halfwidth and Fullwidth Forms":function(v){return 65280<=
v&&65519>=v}},Bk=null,tg="unavailable",oh=null,sk=function(v){v&&"string"==typeof v&&-1<v.indexOf("NetworkError")&&(tg="error");Bk&&Bk(v)},Qj=new uc,Rj=function(){if("deferred"!==tg||!oh)throw Error("rtl-text-plugin cannot be downloaded unless a pluginURL is specified");tg="loading";Ge();oh&&hb({url:oh},function(v){v?sk(v):(tg="loaded",Ge())})},Ng={applyArabicShaping:null,processBidirectionalText:null,processStyledBidirectionalText:null,isLoaded:function(){return"loaded"===tg||null!=Ng.applyArabicShaping},
isLoading:function(){return"loading"===tg},setState:function(v){tg=v.pluginStatus;oh=v.pluginURL},isParsed:function(){return null!=Ng.applyArabicShaping&&null!=Ng.processBidirectionalText&&null!=Ng.processStyledBidirectionalText},getPluginURL:function(){return oh}},Df=function(v,H){this.zoom=v;H?(this.now=H.now,this.fadeDuration=H.fadeDuration,this.zoomHistory=H.zoomHistory,this.transition=H.transition):(this.now=0,this.fadeDuration=0,this.zoomHistory=new qj,this.transition={})};Df.prototype.isSupportedScript=
function(v){a:{for(var H=Ng.isLoaded(),P=0;P<v.length;P+=1){var ia=v[P].charCodeAt(0);if(!H&&oe(ia)||2304<=ia&&3583>=ia||3840<=ia&&4255>=ia||je.Khmer(ia)){v=!1;break a}}v=!0}return v};Df.prototype.crossFadingFactor=function(){return 0===this.fadeDuration?1:Math.min((this.now-this.zoomHistory.lastIntegerZoomTime)/this.fadeDuration,1)};Df.prototype.getCrossfadeParameters=function(){var v=this.zoom,H=v-Math.floor(v),P=this.crossFadingFactor();return v>this.zoomHistory.lastIntegerZoom?{fromScale:2,toScale:1,
t:H+(1-H)*P}:{fromScale:.5,toScale:1,t:1-(1-P)*H}};var oi=function(v,H){this.property=v;this.value=H;this.expression=function(P,ia){if(Kb(P))return new $f(P,ia);if(cd(P)){P=kd(P,ia);if("error"===P.result)throw Error(P.value.map(function(Aa){return Aa.key+": "+Aa.message}).join(", "));return P.value}var xa=P;return"string"==typeof P&&"color"===ia.type&&(xa=he.parse(P)),{kind:"constant",evaluate:function(){return xa}}}(void 0===H?v.specification.default:H,v.specification)};oi.prototype.isDataDriven=
function(){return"source"===this.expression.kind||"composite"===this.expression.kind};oi.prototype.possiblyEvaluate=function(v,H,P){return this.property.possiblyEvaluate(this,v,H,P)};var mj=function(v){this.property=v;this.value=new oi(v,void 0)};mj.prototype.transitioned=function(v,H){return new bk(this.property,this.value,H,d({},v.transition,this.transition),v.now)};mj.prototype.untransitioned=function(){return new bk(this.property,this.value,null,{},0)};var zi=function(v){this._properties=v;this._values=
Object.create(v.defaultTransitionablePropertyValues)};zi.prototype.getValue=function(v){return A(this._values[v].value.value)};zi.prototype.setValue=function(v,H){this._values.hasOwnProperty(v)||(this._values[v]=new mj(this._values[v].property));this._values[v].value=new oi(this._values[v].property,null===H?void 0:A(H))};zi.prototype.getTransition=function(v){return A(this._values[v].transition)};zi.prototype.setTransition=function(v,H){this._values.hasOwnProperty(v)||(this._values[v]=new mj(this._values[v].property));
this._values[v].transition=A(H)||void 0};zi.prototype.serialize=function(){for(var v={},H=0,P=Object.keys(this._values);H<P.length;H+=1){var ia=P[H],xa=this.getValue(ia);void 0!==xa&&(v[ia]=xa);xa=this.getTransition(ia);void 0!==xa&&(v[ia+"-transition"]=xa)}return v};zi.prototype.transitioned=function(v,H){for(var P=new Hk(this._properties),ia=0,xa=Object.keys(this._values);ia<xa.length;ia+=1){var Aa=xa[ia];P._values[Aa]=this._values[Aa].transitioned(v,H._values[Aa])}return P};zi.prototype.untransitioned=
function(){for(var v=new Hk(this._properties),H=0,P=Object.keys(this._values);H<P.length;H+=1){var ia=P[H];v._values[ia]=this._values[ia].untransitioned()}return v};var bk=function(v,H,P,ia,xa){this.property=v;this.value=H;this.begin=xa+ia.delay||0;this.end=this.begin+ia.duration||0;v.specification.transition&&(ia.delay||ia.duration)&&(this.prior=P)};bk.prototype.possiblyEvaluate=function(v,H,P){var ia=v.now||0,xa=this.value.possiblyEvaluate(v,H,P),Aa=this.prior;if(Aa){if(ia>this.end||this.value.isDataDriven())return this.prior=
null,xa;if(ia<this.begin)return Aa.possiblyEvaluate(v,H,P);ia=(ia-this.begin)/(this.end-this.begin);return this.property.interpolate(Aa.possiblyEvaluate(v,H,P),xa,function(Ra){if(0>=Ra)return 0;if(1<=Ra)return 1;var bb=Ra*Ra,ob=bb*Ra;return 4*(.5>Ra?ob:3*(Ra-bb)+ob-.75)}(ia))}return xa};var Hk=function(v){this._properties=v;this._values=Object.create(v.defaultTransitioningPropertyValues)};Hk.prototype.possiblyEvaluate=function(v,H,P){for(var ia=new Wg(this._properties),xa=0,Aa=Object.keys(this._values);xa<
Aa.length;xa+=1){var Ra=Aa[xa];ia._values[Ra]=this._values[Ra].possiblyEvaluate(v,H,P)}return ia};Hk.prototype.hasTransition=function(){for(var v=0,H=Object.keys(this._values);v<H.length;v+=1)if(this._values[H[v]].prior)return!0;return!1};var ie=function(v){this._properties=v;this._values=Object.create(v.defaultPropertyValues)};ie.prototype.getValue=function(v){return A(this._values[v].value)};ie.prototype.setValue=function(v,H){this._values[v]=new oi(this._values[v].property,null===H?void 0:A(H))};
ie.prototype.serialize=function(){for(var v={},H=0,P=Object.keys(this._values);H<P.length;H+=1){var ia=P[H],xa=this.getValue(ia);void 0!==xa&&(v[ia]=xa)}return v};ie.prototype.possiblyEvaluate=function(v,H,P){for(var ia=new Wg(this._properties),xa=0,Aa=Object.keys(this._values);xa<Aa.length;xa+=1){var Ra=Aa[xa];ia._values[Ra]=this._values[Ra].possiblyEvaluate(v,H,P)}return ia};var xf=function(v,H,P){this.property=v;this.value=H;this.parameters=P};xf.prototype.isConstant=function(){return"constant"===
this.value.kind};xf.prototype.constantOr=function(v){return"constant"===this.value.kind?this.value.value:v};xf.prototype.evaluate=function(v,H,P,ia){return this.property.evaluate(this.value,this.parameters,v,H,P,ia)};var Wg=function(v){this._properties=v;this._values=Object.create(v.defaultPossiblyEvaluatedValues)};Wg.prototype.get=function(v){return this._values[v]};var te=function(v){this.specification=v};te.prototype.possiblyEvaluate=function(v,H){return v.expression.evaluate(H)};te.prototype.interpolate=
function(v,H,P){var ia=ah[this.specification.type];return ia?ia(v,H,P):v};var ae=function(v,H){this.specification=v;this.overrides=H};ae.prototype.possiblyEvaluate=function(v,H,P,ia){return new xf(this,"constant"===v.expression.kind||"camera"===v.expression.kind?{kind:"constant",value:v.expression.evaluate(H,null,{},P,ia)}:v.expression,H)};ae.prototype.interpolate=function(v,H,P){if("constant"!==v.value.kind||"constant"!==H.value.kind)return v;if(void 0===v.value.value||void 0===H.value.value)return new xf(this,
{kind:"constant",value:void 0},v.parameters);var ia=ah[this.specification.type];return ia?new xf(this,{kind:"constant",value:ia(v.value.value,H.value.value,P)},v.parameters):v};ae.prototype.evaluate=function(v,H,P,ia,xa,Aa){return"constant"===v.kind?v.value:v.evaluate(H,P,ia,xa,Aa)};var zj=function(v){function H(){v.apply(this,arguments)}return v&&(H.__proto__=v),(H.prototype=Object.create(v&&v.prototype)).constructor=H,H.prototype.possiblyEvaluate=function(P,ia,xa,Aa){return void 0===P.value?new xf(this,
{kind:"constant",value:void 0},ia):"constant"===P.expression.kind?(xa=P.expression.evaluate(ia,null,{},xa,Aa),P="resolvedImage"===P.property.specification.type&&"string"!=typeof xa?xa.name:xa,P=this._calculate(P,P,P,ia),new xf(this,{kind:"constant",value:P},ia)):"camera"===P.expression.kind?(P=this._calculate(P.expression.evaluate({zoom:ia.zoom-1}),P.expression.evaluate({zoom:ia.zoom}),P.expression.evaluate({zoom:ia.zoom+1}),ia),new xf(this,{kind:"constant",value:P},ia)):new xf(this,P.expression,
ia)},H.prototype.evaluate=function(P,ia,xa,Aa,Ra,bb){return"source"===P.kind?(P=P.evaluate(ia,xa,Aa,Ra,bb),this._calculate(P,P,P,ia)):"composite"===P.kind?this._calculate(P.evaluate({zoom:Math.floor(ia.zoom)-1},xa,Aa),P.evaluate({zoom:Math.floor(ia.zoom)},xa,Aa),P.evaluate({zoom:Math.floor(ia.zoom)+1},xa,Aa),ia):P.value},H.prototype._calculate=function(P,ia,xa,Aa){return Aa.zoom>Aa.zoomHistory.lastIntegerZoom?{from:P,to:ia}:{from:xa,to:ia}},H.prototype.interpolate=function(P){return P},H}(ae),Ci=
function(v){this.specification=v};Ci.prototype.possiblyEvaluate=function(v,H,P,ia){if(void 0!==v.value)return"constant"===v.expression.kind?(v=v.expression.evaluate(H,null,{},P,ia),this._calculate(v,v,v,H)):this._calculate(v.expression.evaluate(new Df(Math.floor(H.zoom-1),H)),v.expression.evaluate(new Df(Math.floor(H.zoom),H)),v.expression.evaluate(new Df(Math.floor(H.zoom+1),H)),H)};Ci.prototype._calculate=function(v,H,P,ia){return ia.zoom>ia.zoomHistory.lastIntegerZoom?{from:v,to:H}:{from:P,to:H}};
Ci.prototype.interpolate=function(v){return v};var rj=function(v){this.specification=v};rj.prototype.possiblyEvaluate=function(v,H,P,ia){return!!v.expression.evaluate(H,null,{},P,ia)};rj.prototype.interpolate=function(){return!1};var ih=function(v){for(var H in this.properties=v,this.defaultPropertyValues={},this.defaultTransitionablePropertyValues={},this.defaultTransitioningPropertyValues={},this.defaultPossiblyEvaluatedValues={},this.overridableProperties=[],v){var P=v[H];P.specification.overridable&&
this.overridableProperties.push(H);var ia=this.defaultPropertyValues[H]=new oi(P,void 0);P=this.defaultTransitionablePropertyValues[H]=new mj(P);this.defaultTransitioningPropertyValues[H]=P.untransitioned();this.defaultPossiblyEvaluatedValues[H]=ia.possiblyEvaluate({})}};Hc("DataDrivenProperty",ae);Hc("DataConstantProperty",te);Hc("CrossFadedDataDrivenProperty",zj);Hc("CrossFadedProperty",Ci);Hc("ColorRampProperty",rj);var pi=function(v){function H(P,ia){if(v.call(this),this.id=P.id,this.type=P.type,
this._featureFilter={filter:function(){return!0},needGeometry:!1},"custom"!==P.type&&(this.metadata=P.metadata,this.minzoom=P.minzoom,this.maxzoom=P.maxzoom,"background"!==P.type&&(this.source=P.source,this.sourceLayer=P["source-layer"],this.filter=P.filter),ia.layout&&(this._unevaluatedLayout=new ie(ia.layout)),ia.paint)){for(var xa in this._transitionablePaint=new zi(ia.paint),P.paint)this.setPaintProperty(xa,P.paint[xa],{validate:!1});for(var Aa in P.layout)this.setLayoutProperty(Aa,P.layout[Aa],
{validate:!1});this._transitioningPaint=this._transitionablePaint.untransitioned();this.paint=new Wg(ia.paint)}}return v&&(H.__proto__=v),(H.prototype=Object.create(v&&v.prototype)).constructor=H,H.prototype.getCrossfadeParameters=function(){return this._crossfadeParameters},H.prototype.getLayoutProperty=function(P){return"visibility"===P?this.visibility:this._unevaluatedLayout.getValue(P)},H.prototype.setLayoutProperty=function(P,ia,xa){void 0===xa&&(xa={});null!=ia&&this._validate(Rk,"layers."+
this.id+".layout."+P,P,ia,xa)||("visibility"!==P?this._unevaluatedLayout.setValue(P,ia):this.visibility=ia)},H.prototype.getPaintProperty=function(P){return w(P,"-transition")?this._transitionablePaint.getTransition(P.slice(0,-11)):this._transitionablePaint.getValue(P)},H.prototype.setPaintProperty=function(P,ia,xa){if(void 0===xa&&(xa={}),null!=ia&&this._validate(hk,"layers."+this.id+".paint."+P,P,ia,xa))return!1;if(w(P,"-transition"))return this._transitionablePaint.setTransition(P.slice(0,-11),
ia||void 0),!1;var Aa=this._transitionablePaint._values[P];xa="cross-faded-data-driven"===Aa.property.specification["property-type"];var Ra=Aa.value.isDataDriven();Aa=Aa.value;this._transitionablePaint.setValue(P,ia);this._handleSpecialPaintPropertyUpdate(P);ia=this._transitionablePaint._values[P].value;return ia.isDataDriven()||Ra||xa||this._handleOverridablePaintPropertyUpdate(P,Aa,ia)},H.prototype._handleSpecialPaintPropertyUpdate=function(P){},H.prototype._handleOverridablePaintPropertyUpdate=
function(P,ia,xa){return!1},H.prototype.isHidden=function(P){return!!(this.minzoom&&P<this.minzoom)||!!(this.maxzoom&&P>=this.maxzoom)||"none"===this.visibility},H.prototype.updateTransitions=function(P){this._transitioningPaint=this._transitionablePaint.transitioned(P,this._transitioningPaint)},H.prototype.hasTransition=function(){return this._transitioningPaint.hasTransition()},H.prototype.recalculate=function(P,ia){P.getCrossfadeParameters&&(this._crossfadeParameters=P.getCrossfadeParameters());
this._unevaluatedLayout&&(this.layout=this._unevaluatedLayout.possiblyEvaluate(P,void 0,ia));this.paint=this._transitioningPaint.possiblyEvaluate(P,void 0,ia)},H.prototype.serialize=function(){var P={id:this.id,type:this.type,source:this.source,"source-layer":this.sourceLayer,metadata:this.metadata,minzoom:this.minzoom,maxzoom:this.maxzoom,filter:this.filter,layout:this._unevaluatedLayout&&this._unevaluatedLayout.serialize(),paint:this._transitionablePaint&&this._transitionablePaint.serialize()};
return this.visibility&&(P.layout=P.layout||{},P.layout.visibility=this.visibility),y(P,function(ia,xa){return!(void 0===ia||"layout"===xa&&!Object.keys(ia).length||"paint"===xa&&!Object.keys(ia).length)})},H.prototype._validate=function(P,ia,xa,Aa,Ra){return void 0===Ra&&(Ra={}),(!Ra||!1!==Ra.validate)&&sd(this,P.call(pd,{key:ia,layerType:this.type,objectKey:xa,value:Aa,styleSpec:Xb,style:{glyphs:!0,sprite:!0}}))},H.prototype.is3D=function(){return!1},H.prototype.isTileClipped=function(){return!1},
H.prototype.hasOffscreenPass=function(){return!1},H.prototype.resize=function(){},H.prototype.isStateDependent=function(){for(var P in this.paint._values){var ia=this.paint.get(P);if(ia instanceof xf&&gb(ia.property.specification)&&("source"===ia.value.kind||"composite"===ia.value.kind)&&ia.value.isStateDependent)return!0}return!1},H}(uc),Sj={Int8:Int8Array,Uint8:Uint8Array,Int16:Int16Array,Uint16:Uint16Array,Int32:Int32Array,Uint32:Uint32Array,Float32:Float32Array},Bh=function(v,H){this._structArray=
v;this._pos1=H*this.size;this._pos2=this._pos1/2;this._pos4=this._pos1/4;this._pos8=this._pos1/8},pf=function(){this.isTransferred=!1;this.capacity=-1;this.resize(0)};pf.serialize=function(v,H){return v._trim(),H&&(v.isTransferred=!0,H.push(v.arrayBuffer)),{length:v.length,arrayBuffer:v.arrayBuffer}};pf.deserialize=function(v){var H=Object.create(this.prototype);return H.arrayBuffer=v.arrayBuffer,H.length=v.length,H.capacity=v.arrayBuffer.byteLength/H.bytesPerElement,H._refreshViews(),H};pf.prototype._trim=
function(){this.length!==this.capacity&&(this.capacity=this.length,this.arrayBuffer=this.arrayBuffer.slice(0,this.length*this.bytesPerElement),this._refreshViews())};pf.prototype.clear=function(){this.length=0};pf.prototype.resize=function(v){this.reserve(v);this.length=v};pf.prototype.reserve=function(v){v>this.capacity&&(this.capacity=Math.max(v,Math.floor(5*this.capacity),128),this.arrayBuffer=new ArrayBuffer(this.capacity*this.bytesPerElement),v=this.uint8,this._refreshViews(),v&&this.uint8.set(v))};
pf.prototype._refreshViews=function(){throw Error("_refreshViews() must be implemented by each concrete StructArray layout");};var Ei=function(v){function H(){v.apply(this,arguments)}return v&&(H.__proto__=v),(H.prototype=Object.create(v&&v.prototype)).constructor=H,H.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer);this.int16=new Int16Array(this.arrayBuffer)},H.prototype.emplaceBack=function(P,ia){var xa=this.length;return this.resize(xa+1),this.emplace(xa,P,ia)},H.prototype.emplace=
function(P,ia,xa){var Aa=2*P;return this.int16[Aa+0]=ia,this.int16[Aa+1]=xa,P},H}(pf);Ei.prototype.bytesPerElement=4;Hc("StructArrayLayout2i4",Ei);var Aj=function(v){function H(){v.apply(this,arguments)}return v&&(H.__proto__=v),(H.prototype=Object.create(v&&v.prototype)).constructor=H,H.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer);this.int16=new Int16Array(this.arrayBuffer)},H.prototype.emplaceBack=function(P,ia,xa,Aa){var Ra=this.length;return this.resize(Ra+1),
this.emplace(Ra,P,ia,xa,Aa)},H.prototype.emplace=function(P,ia,xa,Aa,Ra){var bb=4*P;return this.int16[bb+0]=ia,this.int16[bb+1]=xa,this.int16[bb+2]=Aa,this.int16[bb+3]=Ra,P},H}(pf);Aj.prototype.bytesPerElement=8;Hc("StructArrayLayout4i8",Aj);var Ug=function(v){function H(){v.apply(this,arguments)}return v&&(H.__proto__=v),(H.prototype=Object.create(v&&v.prototype)).constructor=H,H.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer);this.int16=new Int16Array(this.arrayBuffer)},
H.prototype.emplaceBack=function(P,ia,xa,Aa,Ra,bb){var ob=this.length;return this.resize(ob+1),this.emplace(ob,P,ia,xa,Aa,Ra,bb)},H.prototype.emplace=function(P,ia,xa,Aa,Ra,bb,ob){var sb=6*P;return this.int16[sb+0]=ia,this.int16[sb+1]=xa,this.int16[sb+2]=Aa,this.int16[sb+3]=Ra,this.int16[sb+4]=bb,this.int16[sb+5]=ob,P},H}(pf);Ug.prototype.bytesPerElement=12;Hc("StructArrayLayout2i4i12",Ug);var Di=function(v){function H(){v.apply(this,arguments)}return v&&(H.__proto__=v),(H.prototype=Object.create(v&&
v.prototype)).constructor=H,H.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer);this.int16=new Int16Array(this.arrayBuffer)},H.prototype.emplaceBack=function(P,ia,xa,Aa,Ra,bb){var ob=this.length;return this.resize(ob+1),this.emplace(ob,P,ia,xa,Aa,Ra,bb)},H.prototype.emplace=function(P,ia,xa,Aa,Ra,bb,ob){var sb=4*P,Hb=8*P;return this.int16[sb+0]=ia,this.int16[sb+1]=xa,this.uint8[Hb+4]=Aa,this.uint8[Hb+5]=Ra,this.uint8[Hb+6]=bb,this.uint8[Hb+7]=ob,P},H}(pf);Di.prototype.bytesPerElement=
8;Hc("StructArrayLayout2i4ub8",Di);var lg=function(v){function H(){v.apply(this,arguments)}return v&&(H.__proto__=v),(H.prototype=Object.create(v&&v.prototype)).constructor=H,H.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer);this.uint16=new Uint16Array(this.arrayBuffer)},H.prototype.emplaceBack=function(P,ia,xa,Aa,Ra,bb,ob,sb,Hb,Vb){var jc=this.length;return this.resize(jc+1),this.emplace(jc,P,ia,xa,Aa,Ra,bb,ob,sb,Hb,Vb)},H.prototype.emplace=function(P,ia,xa,Aa,Ra,bb,
ob,sb,Hb,Vb,jc){var ec=9*P,Nb=18*P;return this.uint16[ec+0]=ia,this.uint16[ec+1]=xa,this.uint16[ec+2]=Aa,this.uint16[ec+3]=Ra,this.uint16[ec+4]=bb,this.uint16[ec+5]=ob,this.uint16[ec+6]=sb,this.uint16[ec+7]=Hb,this.uint8[Nb+16]=Vb,this.uint8[Nb+17]=jc,P},H}(pf);lg.prototype.bytesPerElement=18;Hc("StructArrayLayout8ui2ub18",lg);var Mi=function(v){function H(){v.apply(this,arguments)}return v&&(H.__proto__=v),(H.prototype=Object.create(v&&v.prototype)).constructor=H,H.prototype._refreshViews=function(){this.uint8=
new Uint8Array(this.arrayBuffer);this.int16=new Int16Array(this.arrayBuffer);this.uint16=new Uint16Array(this.arrayBuffer)},H.prototype.emplaceBack=function(P,ia,xa,Aa,Ra,bb,ob,sb,Hb,Vb,jc,ec){var Nb=this.length;return this.resize(Nb+1),this.emplace(Nb,P,ia,xa,Aa,Ra,bb,ob,sb,Hb,Vb,jc,ec)},H.prototype.emplace=function(P,ia,xa,Aa,Ra,bb,ob,sb,Hb,Vb,jc,ec,Nb){var Mb=12*P;return this.int16[Mb+0]=ia,this.int16[Mb+1]=xa,this.int16[Mb+2]=Aa,this.int16[Mb+3]=Ra,this.uint16[Mb+4]=bb,this.uint16[Mb+5]=ob,this.uint16[Mb+
6]=sb,this.uint16[Mb+7]=Hb,this.int16[Mb+8]=Vb,this.int16[Mb+9]=jc,this.int16[Mb+10]=ec,this.int16[Mb+11]=Nb,P},H}(pf);Mi.prototype.bytesPerElement=24;Hc("StructArrayLayout4i4ui4i24",Mi);var Fi=function(v){function H(){v.apply(this,arguments)}return v&&(H.__proto__=v),(H.prototype=Object.create(v&&v.prototype)).constructor=H,H.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer);this.float32=new Float32Array(this.arrayBuffer)},H.prototype.emplaceBack=function(P,ia,xa){var Aa=
this.length;return this.resize(Aa+1),this.emplace(Aa,P,ia,xa)},H.prototype.emplace=function(P,ia,xa,Aa){var Ra=3*P;return this.float32[Ra+0]=ia,this.float32[Ra+1]=xa,this.float32[Ra+2]=Aa,P},H}(pf);Fi.prototype.bytesPerElement=12;Hc("StructArrayLayout3f12",Fi);var Hh=function(v){function H(){v.apply(this,arguments)}return v&&(H.__proto__=v),(H.prototype=Object.create(v&&v.prototype)).constructor=H,H.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer);this.uint32=new Uint32Array(this.arrayBuffer)},
H.prototype.emplaceBack=function(P){var ia=this.length;return this.resize(ia+1),this.emplace(ia,P)},H.prototype.emplace=function(P,ia){return this.uint32[1*P]=ia,P},H}(pf);Hh.prototype.bytesPerElement=4;Hc("StructArrayLayout1ul4",Hh);var ai=function(v){function H(){v.apply(this,arguments)}return v&&(H.__proto__=v),(H.prototype=Object.create(v&&v.prototype)).constructor=H,H.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer);this.int16=new Int16Array(this.arrayBuffer);this.uint32=
new Uint32Array(this.arrayBuffer);this.uint16=new Uint16Array(this.arrayBuffer)},H.prototype.emplaceBack=function(P,ia,xa,Aa,Ra,bb,ob,sb,Hb){var Vb=this.length;return this.resize(Vb+1),this.emplace(Vb,P,ia,xa,Aa,Ra,bb,ob,sb,Hb)},H.prototype.emplace=function(P,ia,xa,Aa,Ra,bb,ob,sb,Hb,Vb){var jc=10*P;return this.int16[jc+0]=ia,this.int16[jc+1]=xa,this.int16[jc+2]=Aa,this.int16[jc+3]=Ra,this.int16[jc+4]=bb,this.int16[jc+5]=ob,this.uint32[5*P+3]=sb,this.uint16[jc+8]=Hb,this.uint16[jc+9]=Vb,P},H}(pf);
ai.prototype.bytesPerElement=20;Hc("StructArrayLayout6i1ul2ui20",ai);var Ih=function(v){function H(){v.apply(this,arguments)}return v&&(H.__proto__=v),(H.prototype=Object.create(v&&v.prototype)).constructor=H,H.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer);this.int16=new Int16Array(this.arrayBuffer)},H.prototype.emplaceBack=function(P,ia,xa,Aa,Ra,bb){var ob=this.length;return this.resize(ob+1),this.emplace(ob,P,ia,xa,Aa,Ra,bb)},H.prototype.emplace=function(P,ia,xa,
Aa,Ra,bb,ob){var sb=6*P;return this.int16[sb+0]=ia,this.int16[sb+1]=xa,this.int16[sb+2]=Aa,this.int16[sb+3]=Ra,this.int16[sb+4]=bb,this.int16[sb+5]=ob,P},H}(pf);Ih.prototype.bytesPerElement=12;Hc("StructArrayLayout2i2i2i12",Ih);var li=function(v){function H(){v.apply(this,arguments)}return v&&(H.__proto__=v),(H.prototype=Object.create(v&&v.prototype)).constructor=H,H.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer);this.float32=new Float32Array(this.arrayBuffer);this.int16=
new Int16Array(this.arrayBuffer)},H.prototype.emplaceBack=function(P,ia,xa,Aa,Ra){var bb=this.length;return this.resize(bb+1),this.emplace(bb,P,ia,xa,Aa,Ra)},H.prototype.emplace=function(P,ia,xa,Aa,Ra,bb){var ob=4*P,sb=8*P;return this.float32[ob+0]=ia,this.float32[ob+1]=xa,this.float32[ob+2]=Aa,this.int16[sb+6]=Ra,this.int16[sb+7]=bb,P},H}(pf);li.prototype.bytesPerElement=16;Hc("StructArrayLayout2f1f2i16",li);var Uh=function(v){function H(){v.apply(this,arguments)}return v&&(H.__proto__=v),(H.prototype=
Object.create(v&&v.prototype)).constructor=H,H.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer);this.float32=new Float32Array(this.arrayBuffer)},H.prototype.emplaceBack=function(P,ia,xa,Aa){var Ra=this.length;return this.resize(Ra+1),this.emplace(Ra,P,ia,xa,Aa)},H.prototype.emplace=function(P,ia,xa,Aa,Ra){var bb=12*P,ob=3*P;return this.uint8[bb+0]=ia,this.uint8[bb+1]=xa,this.float32[ob+1]=Aa,this.float32[ob+2]=Ra,P},H}(pf);Uh.prototype.bytesPerElement=12;Hc("StructArrayLayout2ub2f12",
Uh);var Vh=function(v){function H(){v.apply(this,arguments)}return v&&(H.__proto__=v),(H.prototype=Object.create(v&&v.prototype)).constructor=H,H.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer);this.uint16=new Uint16Array(this.arrayBuffer)},H.prototype.emplaceBack=function(P,ia,xa){var Aa=this.length;return this.resize(Aa+1),this.emplace(Aa,P,ia,xa)},H.prototype.emplace=function(P,ia,xa,Aa){var Ra=3*P;return this.uint16[Ra+0]=ia,this.uint16[Ra+1]=xa,this.uint16[Ra+2]=
Aa,P},H}(pf);Vh.prototype.bytesPerElement=6;Hc("StructArrayLayout3ui6",Vh);var kk=function(v){function H(){v.apply(this,arguments)}return v&&(H.__proto__=v),(H.prototype=Object.create(v&&v.prototype)).constructor=H,H.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer);this.int16=new Int16Array(this.arrayBuffer);this.uint16=new Uint16Array(this.arrayBuffer);this.uint32=new Uint32Array(this.arrayBuffer);this.float32=new Float32Array(this.arrayBuffer)},H.prototype.emplaceBack=
function(P,ia,xa,Aa,Ra,bb,ob,sb,Hb,Vb,jc,ec,Nb,Mb,ac,Ic,Uc){var Kc=this.length;return this.resize(Kc+1),this.emplace(Kc,P,ia,xa,Aa,Ra,bb,ob,sb,Hb,Vb,jc,ec,Nb,Mb,ac,Ic,Uc)},H.prototype.emplace=function(P,ia,xa,Aa,Ra,bb,ob,sb,Hb,Vb,jc,ec,Nb,Mb,ac,Ic,Uc,Kc){var wd=24*P,Dd=12*P,Qd=48*P;return this.int16[wd+0]=ia,this.int16[wd+1]=xa,this.uint16[wd+2]=Aa,this.uint16[wd+3]=Ra,this.uint32[Dd+2]=bb,this.uint32[Dd+3]=ob,this.uint32[Dd+4]=sb,this.uint16[wd+10]=Hb,this.uint16[wd+11]=Vb,this.uint16[wd+12]=jc,
this.float32[Dd+7]=ec,this.float32[Dd+8]=Nb,this.uint8[Qd+36]=Mb,this.uint8[Qd+37]=ac,this.uint8[Qd+38]=Ic,this.uint32[Dd+10]=Uc,this.int16[wd+22]=Kc,P},H}(pf);kk.prototype.bytesPerElement=48;Hc("StructArrayLayout2i2ui3ul3ui2f3ub1ul1i48",kk);var dk=function(v){function H(){v.apply(this,arguments)}return v&&(H.__proto__=v),(H.prototype=Object.create(v&&v.prototype)).constructor=H,H.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer);this.int16=new Int16Array(this.arrayBuffer);
this.uint16=new Uint16Array(this.arrayBuffer);this.uint32=new Uint32Array(this.arrayBuffer);this.float32=new Float32Array(this.arrayBuffer)},H.prototype.emplaceBack=function(P,ia,xa,Aa,Ra,bb,ob,sb,Hb,Vb,jc,ec,Nb,Mb,ac,Ic,Uc,Kc,wd,Dd,Qd,Nd,re,Je,Pe,ze,Ie,Ye){var qe=this.length;return this.resize(qe+1),this.emplace(qe,P,ia,xa,Aa,Ra,bb,ob,sb,Hb,Vb,jc,ec,Nb,Mb,ac,Ic,Uc,Kc,wd,Dd,Qd,Nd,re,Je,Pe,ze,Ie,Ye)},H.prototype.emplace=function(P,ia,xa,Aa,Ra,bb,ob,sb,Hb,Vb,jc,ec,Nb,Mb,ac,Ic,Uc,Kc,wd,Dd,Qd,Nd,re,Je,
Pe,ze,Ie,Ye,qe){var me=34*P,se=17*P;return this.int16[me+0]=ia,this.int16[me+1]=xa,this.int16[me+2]=Aa,this.int16[me+3]=Ra,this.int16[me+4]=bb,this.int16[me+5]=ob,this.int16[me+6]=sb,this.int16[me+7]=Hb,this.uint16[me+8]=Vb,this.uint16[me+9]=jc,this.uint16[me+10]=ec,this.uint16[me+11]=Nb,this.uint16[me+12]=Mb,this.uint16[me+13]=ac,this.uint16[me+14]=Ic,this.uint16[me+15]=Uc,this.uint16[me+16]=Kc,this.uint16[me+17]=wd,this.uint16[me+18]=Dd,this.uint16[me+19]=Qd,this.uint16[me+20]=Nd,this.uint16[me+
21]=re,this.uint16[me+22]=Je,this.uint32[se+12]=Pe,this.float32[se+13]=ze,this.float32[se+14]=Ie,this.float32[se+15]=Ye,this.float32[se+16]=qe,P},H}(pf);dk.prototype.bytesPerElement=68;Hc("StructArrayLayout8i15ui1ul4f68",dk);var mi=function(v){function H(){v.apply(this,arguments)}return v&&(H.__proto__=v),(H.prototype=Object.create(v&&v.prototype)).constructor=H,H.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer);this.float32=new Float32Array(this.arrayBuffer)},H.prototype.emplaceBack=
function(P){var ia=this.length;return this.resize(ia+1),this.emplace(ia,P)},H.prototype.emplace=function(P,ia){return this.float32[1*P]=ia,P},H}(pf);mi.prototype.bytesPerElement=4;Hc("StructArrayLayout1f4",mi);var Jj=function(v){function H(){v.apply(this,arguments)}return v&&(H.__proto__=v),(H.prototype=Object.create(v&&v.prototype)).constructor=H,H.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer);this.int16=new Int16Array(this.arrayBuffer)},H.prototype.emplaceBack=function(P,
ia,xa){var Aa=this.length;return this.resize(Aa+1),this.emplace(Aa,P,ia,xa)},H.prototype.emplace=function(P,ia,xa,Aa){var Ra=3*P;return this.int16[Ra+0]=ia,this.int16[Ra+1]=xa,this.int16[Ra+2]=Aa,P},H}(pf);Jj.prototype.bytesPerElement=6;Hc("StructArrayLayout3i6",Jj);var Kj=function(v){function H(){v.apply(this,arguments)}return v&&(H.__proto__=v),(H.prototype=Object.create(v&&v.prototype)).constructor=H,H.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer);this.uint32=new Uint32Array(this.arrayBuffer);
this.uint16=new Uint16Array(this.arrayBuffer)},H.prototype.emplaceBack=function(P,ia,xa){var Aa=this.length;return this.resize(Aa+1),this.emplace(Aa,P,ia,xa)},H.prototype.emplace=function(P,ia,xa,Aa){var Ra=4*P;return this.uint32[2*P]=ia,this.uint16[Ra+2]=xa,this.uint16[Ra+3]=Aa,P},H}(pf);Kj.prototype.bytesPerElement=8;Hc("StructArrayLayout1ul2ui8",Kj);var ni=function(v){function H(){v.apply(this,arguments)}return v&&(H.__proto__=v),(H.prototype=Object.create(v&&v.prototype)).constructor=H,H.prototype._refreshViews=
function(){this.uint8=new Uint8Array(this.arrayBuffer);this.uint16=new Uint16Array(this.arrayBuffer)},H.prototype.emplaceBack=function(P,ia){var xa=this.length;return this.resize(xa+1),this.emplace(xa,P,ia)},H.prototype.emplace=function(P,ia,xa){var Aa=2*P;return this.uint16[Aa+0]=ia,this.uint16[Aa+1]=xa,P},H}(pf);ni.prototype.bytesPerElement=4;Hc("StructArrayLayout2ui4",ni);var Lj=function(v){function H(){v.apply(this,arguments)}return v&&(H.__proto__=v),(H.prototype=Object.create(v&&v.prototype)).constructor=
H,H.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer);this.uint16=new Uint16Array(this.arrayBuffer)},H.prototype.emplaceBack=function(P){var ia=this.length;return this.resize(ia+1),this.emplace(ia,P)},H.prototype.emplace=function(P,ia){return this.uint16[1*P]=ia,P},H}(pf);Lj.prototype.bytesPerElement=2;Hc("StructArrayLayout1ui2",Lj);var sj=function(v){function H(){v.apply(this,arguments)}return v&&(H.__proto__=v),(H.prototype=Object.create(v&&v.prototype)).constructor=
H,H.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer);this.float32=new Float32Array(this.arrayBuffer)},H.prototype.emplaceBack=function(P,ia){var xa=this.length;return this.resize(xa+1),this.emplace(xa,P,ia)},H.prototype.emplace=function(P,ia,xa){var Aa=2*P;return this.float32[Aa+0]=ia,this.float32[Aa+1]=xa,P},H}(pf);sj.prototype.bytesPerElement=8;Hc("StructArrayLayout2f8",sj);var Wh=function(v){function H(){v.apply(this,arguments)}return v&&(H.__proto__=v),(H.prototype=
Object.create(v&&v.prototype)).constructor=H,H.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer);this.float32=new Float32Array(this.arrayBuffer)},H.prototype.emplaceBack=function(P,ia,xa,Aa){var Ra=this.length;return this.resize(Ra+1),this.emplace(Ra,P,ia,xa,Aa)},H.prototype.emplace=function(P,ia,xa,Aa,Ra){var bb=4*P;return this.float32[bb+0]=ia,this.float32[bb+1]=xa,this.float32[bb+2]=Aa,this.float32[bb+3]=Ra,P},H}(pf);Wh.prototype.bytesPerElement=16;Hc("StructArrayLayout4f16",
Wh);var Gi=function(v){function H(){v.apply(this,arguments)}v&&(H.__proto__=v);(H.prototype=Object.create(v&&v.prototype)).constructor=H;var P={anchorPointX:{configurable:!0},anchorPointY:{configurable:!0},x1:{configurable:!0},y1:{configurable:!0},x2:{configurable:!0},y2:{configurable:!0},featureIndex:{configurable:!0},sourceLayerIndex:{configurable:!0},bucketIndex:{configurable:!0},anchorPoint:{configurable:!0}};return P.anchorPointX.get=function(){return this._structArray.int16[this._pos2+0]},P.anchorPointY.get=
function(){return this._structArray.int16[this._pos2+1]},P.x1.get=function(){return this._structArray.int16[this._pos2+2]},P.y1.get=function(){return this._structArray.int16[this._pos2+3]},P.x2.get=function(){return this._structArray.int16[this._pos2+4]},P.y2.get=function(){return this._structArray.int16[this._pos2+5]},P.featureIndex.get=function(){return this._structArray.uint32[this._pos4+3]},P.sourceLayerIndex.get=function(){return this._structArray.uint16[this._pos2+8]},P.bucketIndex.get=function(){return this._structArray.uint16[this._pos2+
9]},P.anchorPoint.get=function(){return new Bd(this.anchorPointX,this.anchorPointY)},Object.defineProperties(H.prototype,P),H}(Bh);Gi.prototype.size=20;var hj=function(v){function H(){v.apply(this,arguments)}return v&&(H.__proto__=v),(H.prototype=Object.create(v&&v.prototype)).constructor=H,H.prototype.get=function(P){return new Gi(this,P)},H}(ai);Hc("CollisionBoxArray",hj);var Uk=function(v){function H(){v.apply(this,arguments)}v&&(H.__proto__=v);(H.prototype=Object.create(v&&v.prototype)).constructor=
H;var P={anchorX:{configurable:!0},anchorY:{configurable:!0},glyphStartIndex:{configurable:!0},numGlyphs:{configurable:!0},vertexStartIndex:{configurable:!0},lineStartIndex:{configurable:!0},lineLength:{configurable:!0},segment:{configurable:!0},lowerSize:{configurable:!0},upperSize:{configurable:!0},lineOffsetX:{configurable:!0},lineOffsetY:{configurable:!0},writingMode:{configurable:!0},placedOrientation:{configurable:!0},hidden:{configurable:!0},crossTileID:{configurable:!0},associatedIconIndex:{configurable:!0}};
return P.anchorX.get=function(){return this._structArray.int16[this._pos2+0]},P.anchorY.get=function(){return this._structArray.int16[this._pos2+1]},P.glyphStartIndex.get=function(){return this._structArray.uint16[this._pos2+2]},P.numGlyphs.get=function(){return this._structArray.uint16[this._pos2+3]},P.vertexStartIndex.get=function(){return this._structArray.uint32[this._pos4+2]},P.lineStartIndex.get=function(){return this._structArray.uint32[this._pos4+3]},P.lineLength.get=function(){return this._structArray.uint32[this._pos4+
4]},P.segment.get=function(){return this._structArray.uint16[this._pos2+10]},P.lowerSize.get=function(){return this._structArray.uint16[this._pos2+11]},P.upperSize.get=function(){return this._structArray.uint16[this._pos2+12]},P.lineOffsetX.get=function(){return this._structArray.float32[this._pos4+7]},P.lineOffsetY.get=function(){return this._structArray.float32[this._pos4+8]},P.writingMode.get=function(){return this._structArray.uint8[this._pos1+36]},P.placedOrientation.get=function(){return this._structArray.uint8[this._pos1+
37]},P.placedOrientation.set=function(ia){this._structArray.uint8[this._pos1+37]=ia},P.hidden.get=function(){return this._structArray.uint8[this._pos1+38]},P.hidden.set=function(ia){this._structArray.uint8[this._pos1+38]=ia},P.crossTileID.get=function(){return this._structArray.uint32[this._pos4+10]},P.crossTileID.set=function(ia){this._structArray.uint32[this._pos4+10]=ia},P.associatedIconIndex.get=function(){return this._structArray.int16[this._pos2+22]},Object.defineProperties(H.prototype,P),H}(Bh);
Uk.prototype.size=48;var Ck=function(v){function H(){v.apply(this,arguments)}return v&&(H.__proto__=v),(H.prototype=Object.create(v&&v.prototype)).constructor=H,H.prototype.get=function(P){return new Uk(this,P)},H}(kk);Hc("PlacedSymbolArray",Ck);var ij=function(v){function H(){v.apply(this,arguments)}v&&(H.__proto__=v);(H.prototype=Object.create(v&&v.prototype)).constructor=H;var P={anchorX:{configurable:!0},anchorY:{configurable:!0},rightJustifiedTextSymbolIndex:{configurable:!0},centerJustifiedTextSymbolIndex:{configurable:!0},
leftJustifiedTextSymbolIndex:{configurable:!0},verticalPlacedTextSymbolIndex:{configurable:!0},placedIconSymbolIndex:{configurable:!0},verticalPlacedIconSymbolIndex:{configurable:!0},key:{configurable:!0},textBoxStartIndex:{configurable:!0},textBoxEndIndex:{configurable:!0},verticalTextBoxStartIndex:{configurable:!0},verticalTextBoxEndIndex:{configurable:!0},iconBoxStartIndex:{configurable:!0},iconBoxEndIndex:{configurable:!0},verticalIconBoxStartIndex:{configurable:!0},verticalIconBoxEndIndex:{configurable:!0},
featureIndex:{configurable:!0},numHorizontalGlyphVertices:{configurable:!0},numVerticalGlyphVertices:{configurable:!0},numIconVertices:{configurable:!0},numVerticalIconVertices:{configurable:!0},useRuntimeCollisionCircles:{configurable:!0},crossTileID:{configurable:!0},textBoxScale:{configurable:!0},textOffset0:{configurable:!0},textOffset1:{configurable:!0},collisionCircleDiameter:{configurable:!0}};return P.anchorX.get=function(){return this._structArray.int16[this._pos2+0]},P.anchorY.get=function(){return this._structArray.int16[this._pos2+
1]},P.rightJustifiedTextSymbolIndex.get=function(){return this._structArray.int16[this._pos2+2]},P.centerJustifiedTextSymbolIndex.get=function(){return this._structArray.int16[this._pos2+3]},P.leftJustifiedTextSymbolIndex.get=function(){return this._structArray.int16[this._pos2+4]},P.verticalPlacedTextSymbolIndex.get=function(){return this._structArray.int16[this._pos2+5]},P.placedIconSymbolIndex.get=function(){return this._structArray.int16[this._pos2+6]},P.verticalPlacedIconSymbolIndex.get=function(){return this._structArray.int16[this._pos2+
7]},P.key.get=function(){return this._structArray.uint16[this._pos2+8]},P.textBoxStartIndex.get=function(){return this._structArray.uint16[this._pos2+9]},P.textBoxEndIndex.get=function(){return this._structArray.uint16[this._pos2+10]},P.verticalTextBoxStartIndex.get=function(){return this._structArray.uint16[this._pos2+11]},P.verticalTextBoxEndIndex.get=function(){return this._structArray.uint16[this._pos2+12]},P.iconBoxStartIndex.get=function(){return this._structArray.uint16[this._pos2+13]},P.iconBoxEndIndex.get=
function(){return this._structArray.uint16[this._pos2+14]},P.verticalIconBoxStartIndex.get=function(){return this._structArray.uint16[this._pos2+15]},P.verticalIconBoxEndIndex.get=function(){return this._structArray.uint16[this._pos2+16]},P.featureIndex.get=function(){return this._structArray.uint16[this._pos2+17]},P.numHorizontalGlyphVertices.get=function(){return this._structArray.uint16[this._pos2+18]},P.numVerticalGlyphVertices.get=function(){return this._structArray.uint16[this._pos2+19]},P.numIconVertices.get=
function(){return this._structArray.uint16[this._pos2+20]},P.numVerticalIconVertices.get=function(){return this._structArray.uint16[this._pos2+21]},P.useRuntimeCollisionCircles.get=function(){return this._structArray.uint16[this._pos2+22]},P.crossTileID.get=function(){return this._structArray.uint32[this._pos4+12]},P.crossTileID.set=function(ia){this._structArray.uint32[this._pos4+12]=ia},P.textBoxScale.get=function(){return this._structArray.float32[this._pos4+13]},P.textOffset0.get=function(){return this._structArray.float32[this._pos4+
14]},P.textOffset1.get=function(){return this._structArray.float32[this._pos4+15]},P.collisionCircleDiameter.get=function(){return this._structArray.float32[this._pos4+16]},Object.defineProperties(H.prototype,P),H}(Bh);ij.prototype.size=68;var lk=function(v){function H(){v.apply(this,arguments)}return v&&(H.__proto__=v),(H.prototype=Object.create(v&&v.prototype)).constructor=H,H.prototype.get=function(P){return new ij(this,P)},H}(dk);Hc("SymbolInstanceArray",lk);var Cj=function(v){function H(){v.apply(this,
arguments)}return v&&(H.__proto__=v),(H.prototype=Object.create(v&&v.prototype)).constructor=H,H.prototype.getoffsetX=function(P){return this.float32[1*P]},H}(mi);Hc("GlyphOffsetArray",Cj);var Bj=function(v){function H(){v.apply(this,arguments)}return v&&(H.__proto__=v),(H.prototype=Object.create(v&&v.prototype)).constructor=H,H.prototype.getx=function(P){return this.int16[3*P]},H.prototype.gety=function(P){return this.int16[3*P+1]},H.prototype.gettileUnitDistanceFromAnchor=function(P){return this.int16[3*
P+2]},H}(Jj);Hc("SymbolLineVertexArray",Bj);var Mj=function(v){function H(){v.apply(this,arguments)}v&&(H.__proto__=v);(H.prototype=Object.create(v&&v.prototype)).constructor=H;var P={featureIndex:{configurable:!0},sourceLayerIndex:{configurable:!0},bucketIndex:{configurable:!0}};return P.featureIndex.get=function(){return this._structArray.uint32[this._pos4+0]},P.sourceLayerIndex.get=function(){return this._structArray.uint16[this._pos2+2]},P.bucketIndex.get=function(){return this._structArray.uint16[this._pos2+
3]},Object.defineProperties(H.prototype,P),H}(Bh);Mj.prototype.size=8;var tj=function(v){function H(){v.apply(this,arguments)}return v&&(H.__proto__=v),(H.prototype=Object.create(v&&v.prototype)).constructor=H,H.prototype.get=function(P){return new Mj(this,P)},H}(Kj);Hc("FeatureIndexArray",tj);var Nj=Fd([{name:"a_pos",components:2,type:"Int16"}],4).members,pg=function(v){void 0===v&&(v=[]);this.segments=v};pg.prototype.prepareSegment=function(v,H,P,ia){var xa=this.segments[this.segments.length-1];
return v>pg.MAX_VERTEX_ARRAY_LENGTH&&z("Max vertices per segment is "+pg.MAX_VERTEX_ARRAY_LENGTH+": bucket requested "+v),(!xa||xa.vertexLength+v>pg.MAX_VERTEX_ARRAY_LENGTH||xa.sortKey!==ia)&&(xa={vertexOffset:H.length,primitiveOffset:P.length,vertexLength:0,primitiveLength:0},void 0!==ia&&(xa.sortKey=ia),this.segments.push(xa)),xa};pg.prototype.get=function(){return this.segments};pg.prototype.destroy=function(){for(var v=0,H=this.segments;v<H.length;v+=1){var P=H[v],ia;for(ia in P.vaos)P.vaos[ia].destroy()}};
pg.simpleSegment=function(v,H,P,ia){return new pg([{vertexOffset:v,primitiveOffset:H,vertexLength:P,primitiveLength:ia,vaos:{},sortKey:0}])};pg.MAX_VERTEX_ARRAY_LENGTH=Math.pow(2,16)-1;Hc("SegmentVector",pg);var Mk=Fd([{name:"a_pattern_from",components:4,type:"Uint16"},{name:"a_pattern_to",components:4,type:"Uint16"},{name:"a_pixel_ratio_from",components:1,type:"Uint8"},{name:"a_pixel_ratio_to",components:1,type:"Uint8"}]),ek=k(function(v){v.exports=function(H,P){var ia,xa,Aa;var Ra=H.length-(ia=
3&H.length);for(Aa=0;Aa<Ra;){var bb=255&H.charCodeAt(Aa)|(255&H.charCodeAt(++Aa))<<8|(255&H.charCodeAt(++Aa))<<16|(255&H.charCodeAt(++Aa))<<24;++Aa;P=27492+(65535&(xa=5*(65535&(P=(P^=461845907*(65535&(bb=(bb=3432918353*(65535&bb)+((3432918353*(bb>>>16)&65535)<<16)&4294967295)<<15|bb>>>17))+((461845907*(bb>>>16)&65535)<<16)&4294967295)<<13|P>>>19))+((5*(P>>>16)&65535)<<16)&4294967295))+((58964+(xa>>>16)&65535)<<16)}switch(bb=0,ia){case 3:bb^=(255&H.charCodeAt(Aa+2))<<16;case 2:bb^=(255&H.charCodeAt(Aa+
1))<<8;case 1:P^=461845907*(65535&(bb=(bb=3432918353*(65535&(bb^=255&H.charCodeAt(Aa)))+((3432918353*(bb>>>16)&65535)<<16)&4294967295)<<15|bb>>>17))+((461845907*(bb>>>16)&65535)<<16)&4294967295}return P^=H.length,P=2246822507*(65535&(P^=P>>>16))+((2246822507*(P>>>16)&65535)<<16)&4294967295,P=3266489909*(65535&(P^=P>>>13))+((3266489909*(P>>>16)&65535)<<16)&4294967295,(P^P>>>16)>>>0}}),dl=k(function(v){v.exports=function(H,P){var ia=H.length;P^=ia;for(var xa=0;4<=ia;){var Aa=1540483477*(65535&(Aa=255&
H.charCodeAt(xa)|(255&H.charCodeAt(++xa))<<8|(255&H.charCodeAt(++xa))<<16|(255&H.charCodeAt(++xa))<<24))+((1540483477*(Aa>>>16)&65535)<<16);P=1540483477*(65535&P)+((1540483477*(P>>>16)&65535)<<16)^(Aa=1540483477*(65535&(Aa^=Aa>>>24))+((1540483477*(Aa>>>16)&65535)<<16));ia-=4;++xa}switch(ia){case 3:P^=(255&H.charCodeAt(xa+2))<<16;case 2:P^=(255&H.charCodeAt(xa+1))<<8;case 1:P=1540483477*(65535&(P^=255&H.charCodeAt(xa)))+((1540483477*(P>>>16)&65535)<<16)}return P=1540483477*(65535&(P^=P>>>13))+((1540483477*
(P>>>16)&65535)<<16),(P^P>>>15)>>>0}}),uj=ek;uj.murmur3=ek;uj.murmur2=dl;var dj=function(){this.ids=[];this.positions=[];this.indexed=!1};dj.prototype.add=function(v,H,P,ia){this.ids.push(Vd(v));this.positions.push(H,P,ia)};dj.prototype.getPositions=function(v){v=Vd(v);for(var H=0,P=this.ids.length-1;H<P;){var ia=H+P>>1;this.ids[ia]>=v?P=ia:H=ia+1}for(P=[];this.ids[H]===v;)P.push({index:this.positions[3*H],start:this.positions[3*H+1],end:this.positions[3*H+2]}),H++;return P};dj.serialize=function(v,
H){var P=new Float64Array(v.ids);v=new Uint32Array(v.positions);return function ob(xa,Aa,Ra,bb){for(;Ra<bb;){for(var sb=xa[Ra+bb>>1],Hb=Ra-1,Vb=bb+1;;){do Hb++;while(xa[Hb]<sb);do Vb--;while(xa[Vb]>sb);if(Hb>=Vb)break;Pd(xa,Hb,Vb);Pd(Aa,3*Hb,3*Vb);Pd(Aa,3*Hb+1,3*Vb+1);Pd(Aa,3*Hb+2,3*Vb+2)}Vb-Ra<bb-Vb?(ob(xa,Aa,Ra,Vb),Ra=Vb+1):(ob(xa,Aa,Vb+1,bb),bb=Vb)}}(P,v,0,P.length-1),H&&H.push(P.buffer,v.buffer),{ids:P,positions:v}};dj.deserialize=function(v){var H=new dj;return H.ids=v.ids,H.positions=v.positions,
H.indexed=!0,H};var Vk=Math.pow(2,53)-1;Hc("FeaturePositionMap",dj);var vj=function(v,H){this.gl=v.gl;this.location=H},nl=function(v){function H(P,ia){v.call(this,P,ia);this.current=0}return v&&(H.__proto__=v),(H.prototype=Object.create(v&&v.prototype)).constructor=H,H.prototype.set=function(P){this.current!==P&&(this.current=P,this.gl.uniform1i(this.location,P))},H}(vj),Nk=function(v){function H(P,ia){v.call(this,P,ia);this.current=0}return v&&(H.__proto__=v),(H.prototype=Object.create(v&&v.prototype)).constructor=
H,H.prototype.set=function(P){this.current!==P&&(this.current=P,this.gl.uniform1f(this.location,P))},H}(vj),Sk=function(v){function H(P,ia){v.call(this,P,ia);this.current=[0,0]}return v&&(H.__proto__=v),(H.prototype=Object.create(v&&v.prototype)).constructor=H,H.prototype.set=function(P){P[0]===this.current[0]&&P[1]===this.current[1]||(this.current=P,this.gl.uniform2f(this.location,P[0],P[1]))},H}(vj),Tj=function(v){function H(P,ia){v.call(this,P,ia);this.current=[0,0,0]}return v&&(H.__proto__=v),
(H.prototype=Object.create(v&&v.prototype)).constructor=H,H.prototype.set=function(P){P[0]===this.current[0]&&P[1]===this.current[1]&&P[2]===this.current[2]||(this.current=P,this.gl.uniform3f(this.location,P[0],P[1],P[2]))},H}(vj),Si=function(v){function H(P,ia){v.call(this,P,ia);this.current=[0,0,0,0]}return v&&(H.__proto__=v),(H.prototype=Object.create(v&&v.prototype)).constructor=H,H.prototype.set=function(P){P[0]===this.current[0]&&P[1]===this.current[1]&&P[2]===this.current[2]&&P[3]===this.current[3]||
(this.current=P,this.gl.uniform4f(this.location,P[0],P[1],P[2],P[3]))},H}(vj),Og=function(v){function H(P,ia){v.call(this,P,ia);this.current=he.transparent}return v&&(H.__proto__=v),(H.prototype=Object.create(v&&v.prototype)).constructor=H,H.prototype.set=function(P){P.r===this.current.r&&P.g===this.current.g&&P.b===this.current.b&&P.a===this.current.a||(this.current=P,this.gl.uniform4f(this.location,P.r,P.g,P.b,P.a))},H}(vj),bh=new Float32Array(16),Dj=function(v){function H(P,ia){v.call(this,P,ia);
this.current=bh}return v&&(H.__proto__=v),(H.prototype=Object.create(v&&v.prototype)).constructor=H,H.prototype.set=function(P){if(P[12]!==this.current[12]||P[0]!==this.current[0])return this.current=P,void this.gl.uniformMatrix4fv(this.location,!1,P);for(var ia=1;16>ia;ia++)if(P[ia]!==this.current[ia]){this.current=P;this.gl.uniformMatrix4fv(this.location,!1,P);break}},H}(vj),Uj=function(v,H,P){this.value=v;this.uniformNames=H.map(function(ia){return"u_"+ia});this.type=P};Uj.prototype.setUniform=
function(v,H,P){v.set(P.constantOr(this.value))};Uj.prototype.getBinding=function(v,H,P){return"color"===this.type?new Og(v,H):new Nk(v,H)};var Hi=function(v,H){this.uniformNames=H.map(function(P){return"u_"+P});this.patternTo=this.patternFrom=null;this.pixelRatioTo=this.pixelRatioFrom=1};Hi.prototype.setConstantPatternPositions=function(v,H){this.pixelRatioFrom=H.pixelRatio;this.pixelRatioTo=v.pixelRatio;this.patternFrom=H.tlbr;this.patternTo=v.tlbr};Hi.prototype.setUniform=function(v,H,P,ia){(H=
"u_pattern_to"===ia?this.patternTo:"u_pattern_from"===ia?this.patternFrom:"u_pixel_ratio_to"===ia?this.pixelRatioTo:"u_pixel_ratio_from"===ia?this.pixelRatioFrom:null)&&v.set(H)};Hi.prototype.getBinding=function(v,H,P){return"u_pattern"===P.substr(0,9)?new Si(v,H):new Nk(v,H)};var ph=function(v,H,P,ia){this.expression=v;this.type=P;this.maxValue=0;this.paintVertexAttributes=H.map(function(xa){return{name:"a_"+xa,type:"Float32",components:"color"===P?2:1,offset:0}});this.paintVertexArray=new ia};ph.prototype.populatePaintArray=
function(v,H,P,ia,xa){P=this.paintVertexArray.length;H=this.expression.evaluate(new Df(0),H,{},ia,[],xa);this.paintVertexArray.resize(v);this._setPaintValue(P,v,H)};ph.prototype.updatePaintArray=function(v,H,P,ia){P=this.expression.evaluate({zoom:0},P,ia);this._setPaintValue(v,H,P)};ph.prototype._setPaintValue=function(v,H,P){if("color"===this.type)for(P=Ed(P);v<H;v++)this.paintVertexArray.emplace(v,P[0],P[1]);else{for(;v<H;v++)this.paintVertexArray.emplace(v,P);this.maxValue=Math.max(this.maxValue,
Math.abs(P))}};ph.prototype.upload=function(v){this.paintVertexArray&&this.paintVertexArray.arrayBuffer&&(this.paintVertexBuffer&&this.paintVertexBuffer.buffer?this.paintVertexBuffer.updateData(this.paintVertexArray):this.paintVertexBuffer=v.createVertexBuffer(this.paintVertexArray,this.paintVertexAttributes,this.expression.isStateDependent))};ph.prototype.destroy=function(){this.paintVertexBuffer&&this.paintVertexBuffer.destroy()};var Kg=function(v,H,P,ia,xa,Aa){this.expression=v;this.uniformNames=
H.map(function(Ra){return"u_"+Ra+"_t"});this.type=P;this.useIntegerZoom=ia;this.zoom=xa;this.maxValue=0;this.paintVertexAttributes=H.map(function(Ra){return{name:"a_"+Ra,type:"Float32",components:"color"===P?4:2,offset:0}});this.paintVertexArray=new Aa};Kg.prototype.populatePaintArray=function(v,H,P,ia,xa){P=this.expression.evaluate(new Df(this.zoom),H,{},ia,[],xa);H=this.expression.evaluate(new Df(this.zoom+1),H,{},ia,[],xa);ia=this.paintVertexArray.length;this.paintVertexArray.resize(v);this._setPaintValue(ia,
v,P,H)};Kg.prototype.updatePaintArray=function(v,H,P,ia){var xa=this.expression.evaluate({zoom:this.zoom},P,ia);P=this.expression.evaluate({zoom:this.zoom+1},P,ia);this._setPaintValue(v,H,xa,P)};Kg.prototype._setPaintValue=function(v,H,P,ia){if("color"===this.type)for(P=Ed(P),ia=Ed(ia);v<H;v++)this.paintVertexArray.emplace(v,P[0],P[1],ia[0],ia[1]);else{for(;v<H;v++)this.paintVertexArray.emplace(v,P,ia);this.maxValue=Math.max(this.maxValue,Math.abs(P),Math.abs(ia))}};Kg.prototype.upload=function(v){this.paintVertexArray&&
this.paintVertexArray.arrayBuffer&&(this.paintVertexBuffer&&this.paintVertexBuffer.buffer?this.paintVertexBuffer.updateData(this.paintVertexArray):this.paintVertexBuffer=v.createVertexBuffer(this.paintVertexArray,this.paintVertexAttributes,this.expression.isStateDependent))};Kg.prototype.destroy=function(){this.paintVertexBuffer&&this.paintVertexBuffer.destroy()};Kg.prototype.setUniform=function(v,H){H=c(this.expression.interpolationFactor(this.useIntegerZoom?Math.floor(H.zoom):H.zoom,this.zoom,this.zoom+
1),0,1);v.set(H)};Kg.prototype.getBinding=function(v,H,P){return new Nk(v,H)};var Ch=function(v,H,P,ia,xa,Aa){this.expression=v;this.type=H;this.useIntegerZoom=P;this.zoom=ia;this.layerId=Aa;this.zoomInPaintVertexArray=new xa;this.zoomOutPaintVertexArray=new xa};Ch.prototype.populatePaintArray=function(v,H,P){var ia=this.zoomInPaintVertexArray.length;this.zoomInPaintVertexArray.resize(v);this.zoomOutPaintVertexArray.resize(v);this._setPaintValues(ia,v,H.patterns&&H.patterns[this.layerId],P)};Ch.prototype.updatePaintArray=
function(v,H,P,ia,xa){this._setPaintValues(v,H,P.patterns&&P.patterns[this.layerId],xa)};Ch.prototype._setPaintValues=function(v,H,P,ia){if(ia&&P){var xa=ia[P.min],Aa=ia[P.mid];P=ia[P.max];if(xa&&Aa&&P)for(;v<H;v++)this.zoomInPaintVertexArray.emplace(v,Aa.tl[0],Aa.tl[1],Aa.br[0],Aa.br[1],xa.tl[0],xa.tl[1],xa.br[0],xa.br[1],Aa.pixelRatio,xa.pixelRatio),this.zoomOutPaintVertexArray.emplace(v,Aa.tl[0],Aa.tl[1],Aa.br[0],Aa.br[1],P.tl[0],P.tl[1],P.br[0],P.br[1],Aa.pixelRatio,P.pixelRatio)}};Ch.prototype.upload=
function(v){this.zoomInPaintVertexArray&&this.zoomInPaintVertexArray.arrayBuffer&&this.zoomOutPaintVertexArray&&this.zoomOutPaintVertexArray.arrayBuffer&&(this.zoomInPaintVertexBuffer=v.createVertexBuffer(this.zoomInPaintVertexArray,Mk.members,this.expression.isStateDependent),this.zoomOutPaintVertexBuffer=v.createVertexBuffer(this.zoomOutPaintVertexArray,Mk.members,this.expression.isStateDependent))};Ch.prototype.destroy=function(){this.zoomOutPaintVertexBuffer&&this.zoomOutPaintVertexBuffer.destroy();
this.zoomInPaintVertexBuffer&&this.zoomInPaintVertexBuffer.destroy()};var Jh=function(v,H,P,ia){this.binders={};this.layoutAttributes=ia;this._buffers=[];ia=[];for(var xa in v.paint._values)if(P(xa)){var Aa=v.paint.get(xa);if(Aa instanceof xf&&gb(Aa.property.specification)){var Ra={"text-opacity":["opacity"],"icon-opacity":["opacity"],"text-color":["fill_color"],"icon-color":["fill_color"],"text-halo-color":["halo_color"],"icon-halo-color":["halo_color"],"text-halo-blur":["halo_blur"],"icon-halo-blur":["halo_blur"],
"text-halo-width":["halo_width"],"icon-halo-width":["halo_width"],"line-gap-width":["gapwidth"],"line-pattern":["pattern_to","pattern_from","pixel_ratio_to","pixel_ratio_from"],"fill-pattern":["pattern_to","pattern_from","pixel_ratio_to","pixel_ratio_from"],"fill-extrusion-pattern":["pattern_to","pattern_from","pixel_ratio_to","pixel_ratio_from"]}[xa]||[xa.replace(v.type+"-","").replace(/-/g,"_")],bb=Aa.value,ob=Aa.property.specification.type,sb=Aa.property.useIntegerZoom;Aa=Aa.property.specification["property-type"];
Aa="cross-faded"===Aa||"cross-faded-data-driven"===Aa;if("constant"===bb.kind)this.binders[xa]=Aa?new Hi(bb.value,Ra):new Uj(bb.value,Ra,ob),ia.push("/u_"+xa);else if("source"===bb.kind||Aa){var Hb=ke(xa,ob,"source");this.binders[xa]=Aa?new Ch(bb,ob,sb,H,Hb,v.id):new ph(bb,Ra,ob,Hb);ia.push("/a_"+xa)}else Aa=ke(xa,ob,"composite"),this.binders[xa]=new Kg(bb,Ra,ob,sb,H,Aa),ia.push("/z_"+xa)}}this.cacheKey=ia.sort().join("")};Jh.prototype.getMaxValue=function(v){v=this.binders[v];return v instanceof
ph||v instanceof Kg?v.maxValue:0};Jh.prototype.populatePaintArrays=function(v,H,P,ia,xa){for(var Aa in this.binders){var Ra=this.binders[Aa];(Ra instanceof ph||Ra instanceof Kg||Ra instanceof Ch)&&Ra.populatePaintArray(v,H,P,ia,xa)}};Jh.prototype.setConstantPatternPositions=function(v,H){for(var P in this.binders){var ia=this.binders[P];ia instanceof Hi&&ia.setConstantPatternPositions(v,H)}};Jh.prototype.updatePaintArrays=function(v,H,P,ia,xa){var Aa=!1,Ra;for(Ra in v)for(var bb=0,ob=H.getPositions(Ra);bb<
ob.length;bb+=1){var sb=ob[bb],Hb=P.feature(sb.index),Vb;for(Vb in this.binders){var jc=this.binders[Vb];(jc instanceof ph||jc instanceof Kg||jc instanceof Ch)&&!0===jc.expression.isStateDependent&&(Aa=ia.paint.get(Vb),jc.expression=Aa.value,jc.updatePaintArray(sb.start,sb.end,Hb,v[Ra],xa),Aa=!0)}}return Aa};Jh.prototype.defines=function(){var v=[],H;for(H in this.binders){var P=this.binders[H];(P instanceof Uj||P instanceof Hi)&&v.push.apply(v,P.uniformNames.map(function(ia){return"#define HAS_UNIFORM_"+
ia}))}return v};Jh.prototype.getPaintVertexBuffers=function(){return this._buffers};Jh.prototype.getUniforms=function(v,H){var P=[],ia;for(ia in this.binders){var xa=this.binders[ia];if(xa instanceof Uj||xa instanceof Hi||xa instanceof Kg)for(var Aa=0,Ra=xa.uniformNames;Aa<Ra.length;Aa+=1){var bb=Ra[Aa];if(H[bb]){var ob=xa.getBinding(v,H[bb],bb);P.push({name:bb,property:ia,binding:ob})}}}return P};Jh.prototype.setUniforms=function(v,H,P,ia){for(v=0;v<H.length;v+=1){var xa=H[v],Aa=xa.name,Ra=xa.property;
this.binders[Ra].setUniform(xa.binding,ia,P.get(Ra),Aa)}};Jh.prototype.updatePaintBuffers=function(v){for(var H in this._buffers=[],this.binders){var P=this.binders[H];v&&P instanceof Ch?(P=2===v.fromScale?P.zoomInPaintVertexBuffer:P.zoomOutPaintVertexBuffer)&&this._buffers.push(P):(P instanceof ph||P instanceof Kg)&&P.paintVertexBuffer&&this._buffers.push(P.paintVertexBuffer)}};Jh.prototype.upload=function(v){for(var H in this.binders){var P=this.binders[H];(P instanceof ph||P instanceof Kg||P instanceof
Ch)&&P.upload(v)}this.updatePaintBuffers()};Jh.prototype.destroy=function(){for(var v in this.binders){var H=this.binders[v];(H instanceof ph||H instanceof Kg||H instanceof Ch)&&H.destroy()}};var ch=function(v,H,P,ia){void 0===ia&&(ia=function(){return!0});this.programConfigurations={};for(var xa=0;xa<H.length;xa+=1){var Aa=H[xa];this.programConfigurations[Aa.id]=new Jh(Aa,P,ia,v)}this.needsUpload=!1;this._featureMap=new dj;this._bufferOffset=0};ch.prototype.populatePaintArrays=function(v,H,P,ia,
xa,Aa){for(var Ra in this.programConfigurations)this.programConfigurations[Ra].populatePaintArrays(v,H,ia,xa,Aa);void 0!==H.id&&this._featureMap.add(H.id,P,this._bufferOffset,v);this._bufferOffset=v;this.needsUpload=!0};ch.prototype.updatePaintArrays=function(v,H,P,ia){for(var xa=0;xa<P.length;xa+=1){var Aa=P[xa];this.needsUpload=this.programConfigurations[Aa.id].updatePaintArrays(v,this._featureMap,H,Aa,ia)||this.needsUpload}};ch.prototype.get=function(v){return this.programConfigurations[v]};ch.prototype.upload=
function(v){if(this.needsUpload){for(var H in this.programConfigurations)this.programConfigurations[H].upload(v);this.needsUpload=!1}};ch.prototype.destroy=function(){for(var v in this.programConfigurations)this.programConfigurations[v].destroy()};Hc("ConstantBinder",Uj);Hc("CrossFadedConstantBinder",Hi);Hc("SourceExpressionBinder",ph);Hc("CrossFadedCompositeBinder",Ch);Hc("CompositeExpressionBinder",Kg);Hc("ProgramConfiguration",Jh,{omit:["_buffers"]});Hc("ProgramConfigurationSet",ch);var Ti={min:-1*
Math.pow(2,14),max:Math.pow(2,14)-1},qi=function(v){this.zoom=v.zoom;this.overscaling=v.overscaling;this.layers=v.layers;this.layerIds=this.layers.map(function(H){return H.id});this.index=v.index;this.hasPattern=!1;this.layoutVertexArray=new Ei;this.indexArray=new Vh;this.segments=new pg;this.programConfigurations=new ch(Nj,v.layers,v.zoom);this.stateDependentLayerIds=this.layers.filter(function(H){return H.isStateDependent()}).map(function(H){return H.id})};qi.prototype.populate=function(v,H,P){var ia=
this.layers[0],xa=[],Aa=null;"circle"===ia.type&&(Aa=ia.layout.get("circle-sort-key"));for(ia=0;ia<v.length;ia+=1){var Ra=v[ia],bb=Ra.feature,ob=Ra.id,sb=Ra.index;Ra=Ra.sourceLayerIndex;var Hb=this.layers[0]._featureFilter.needGeometry,Vb={type:bb.type,id:ob,properties:bb.properties,geometry:Hb?Xd(bb):[]};this.layers[0]._featureFilter.filter(new Df(this.zoom),Vb,P)&&(Hb||(Vb.geometry=Xd(bb)),Hb=Aa?Aa.evaluate(Vb,{},P):void 0,xa.push({id:ob,properties:bb.properties,type:bb.type,sourceLayerIndex:Ra,
index:sb,geometry:Vb.geometry,patterns:{},sortKey:Hb}))}Aa&&xa.sort(function(jc,ec){return jc.sortKey-ec.sortKey});for(Aa=0;Aa<xa.length;Aa+=1)ia=xa[Aa],bb=ia.geometry,ob=ia.index,sb=ia.sourceLayerIndex,Ra=v[ob].feature,this.addFeature(ia,bb,ob,P),H.featureIndex.insert(Ra,bb,ob,sb,this.index)};qi.prototype.update=function(v,H,P){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(v,H,this.stateDependentLayers,P)};qi.prototype.isEmpty=function(){return 0===this.layoutVertexArray.length};
qi.prototype.uploadPending=function(){return!this.uploaded||this.programConfigurations.needsUpload};qi.prototype.upload=function(v){this.uploaded||(this.layoutVertexBuffer=v.createVertexBuffer(this.layoutVertexArray,Nj),this.indexBuffer=v.createIndexBuffer(this.indexArray));this.programConfigurations.upload(v);this.uploaded=!0};qi.prototype.destroy=function(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy())};
qi.prototype.addFeature=function(v,H,P,ia){for(var xa=0;xa<H.length;xa+=1)for(var Aa=0,Ra=H[xa];Aa<Ra.length;Aa+=1){var bb=Ra[Aa],ob=bb.x;bb=bb.y;if(!(0>ob||8192<=ob||0>bb||8192<=bb)){var sb=this.segments.prepareSegment(4,this.layoutVertexArray,this.indexArray,v.sortKey),Hb=sb.vertexLength;Ve(this.layoutVertexArray,ob,bb,-1,-1);Ve(this.layoutVertexArray,ob,bb,1,-1);Ve(this.layoutVertexArray,ob,bb,1,1);Ve(this.layoutVertexArray,ob,bb,-1,1);this.indexArray.emplaceBack(Hb,Hb+1,Hb+2);this.indexArray.emplaceBack(Hb,
Hb+3,Hb+2);sb.vertexLength+=4;sb.primitiveLength+=2}}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,v,P,{},ia)};Hc("CircleBucket",qi,{omit:["layers"]});var mk=new ih({"circle-sort-key":new ae(Xb.layout_circle["circle-sort-key"])}),Dk={paint:new ih({"circle-radius":new ae(Xb.paint_circle["circle-radius"]),"circle-color":new ae(Xb.paint_circle["circle-color"]),"circle-blur":new ae(Xb.paint_circle["circle-blur"]),"circle-opacity":new ae(Xb.paint_circle["circle-opacity"]),
"circle-translate":new te(Xb.paint_circle["circle-translate"]),"circle-translate-anchor":new te(Xb.paint_circle["circle-translate-anchor"]),"circle-pitch-scale":new te(Xb.paint_circle["circle-pitch-scale"]),"circle-pitch-alignment":new te(Xb.paint_circle["circle-pitch-alignment"]),"circle-stroke-width":new ae(Xb.paint_circle["circle-stroke-width"]),"circle-stroke-color":new ae(Xb.paint_circle["circle-stroke-color"]),"circle-stroke-opacity":new ae(Xb.paint_circle["circle-stroke-opacity"])}),layout:mk},
Xg="undefined"!=typeof Float32Array?Float32Array:Array;Math.hypot||(Math.hypot=function(){for(var v=arguments,H=0,P=arguments.length;P--;)H+=v[P]*v[P];return Math.sqrt(H)});var Gk=new Xg(3);Xg!=Float32Array&&(Gk[0]=0,Gk[1]=0,Gk[2]=0);(function(){var v=new Xg(4);Xg!=Float32Array&&(v[0]=0,v[1]=0,v[2]=0,v[3]=0)})();var nj=(function(){var v=new Xg(2);Xg!=Float32Array&&(v[0]=0,v[1]=0)}(),function(v){function H(P){v.call(this,P,Dk)}return v&&(H.__proto__=v),(H.prototype=Object.create(v&&v.prototype)).constructor=
H,H.prototype.createBucket=function(P){return new qi(P)},H.prototype.queryRadius=function(P){return be("circle-radius",this,P)+be("circle-stroke-width",this,P)+pe(this.paint.get("circle-translate"))},H.prototype.queryIntersectsFeature=function(P,ia,xa,Aa,Ra,bb,ob,sb){P=ce(P,this.paint.get("circle-translate"),this.paint.get("circle-translate-anchor"),bb.angle,ob);Ra=this.paint.get("circle-radius").evaluate(ia,xa)+this.paint.get("circle-stroke-width").evaluate(ia,xa);xa=(ia="map"===this.paint.get("circle-pitch-alignment"))?
P:function(Nb,Mb){return Nb.map(function(ac){return oc(ac,Mb)})}(P,sb);ob=ia?Ra*ob:Ra;for(P=0;P<Aa.length;P+=1){Ra=0;for(var Hb=Aa[P];Ra<Hb.length;Ra+=1){var Vb=Hb[Ra],jc=ia?Vb:oc(Vb,sb),ec=ob;Vb=Ue([],[Vb.x,Vb.y,0,1],sb);if("viewport"===this.paint.get("circle-pitch-scale")&&"map"===this.paint.get("circle-pitch-alignment")?ec*=Vb[3]/bb.cameraToCenterDistance:"map"===this.paint.get("circle-pitch-scale")&&"viewport"===this.paint.get("circle-pitch-alignment")&&(ec*=bb.cameraToCenterDistance/Vb[3]),yf(xa,
jc,ec))return!0}}return!1},H}(pi)),ri=function(v){function H(){v.apply(this,arguments)}return v&&(H.__proto__=v),(H.prototype=Object.create(v&&v.prototype)).constructor=H,H}(qi);Hc("HeatmapBucket",ri,{omit:["layers"]});var Kh=function(v,H){vc(this,v,1,H)};Kh.prototype.resize=function(v){Zc(this,v,1)};Kh.prototype.clone=function(){return new Kh({width:this.width,height:this.height},new Uint8Array(this.data))};Kh.copy=function(v,H,P,ia,xa){ld(v,H,P,ia,xa,1)};var Ag=function(v,H){vc(this,v,4,H)};Ag.prototype.resize=
function(v){Zc(this,v,4)};Ag.prototype.replace=function(v,H){H?this.data.set(v):this.data=v instanceof Uint8ClampedArray?new Uint8Array(v.buffer):v};Ag.prototype.clone=function(){return new Ag({width:this.width,height:this.height},new Uint8Array(this.data))};Ag.copy=function(v,H,P,ia,xa){ld(v,H,P,ia,xa,4)};Hc("AlphaImage",Kh);Hc("RGBAImage",Ag);var tk={paint:new ih({"heatmap-radius":new ae(Xb.paint_heatmap["heatmap-radius"]),"heatmap-weight":new ae(Xb.paint_heatmap["heatmap-weight"]),"heatmap-intensity":new te(Xb.paint_heatmap["heatmap-intensity"]),
"heatmap-color":new rj(Xb.paint_heatmap["heatmap-color"]),"heatmap-opacity":new te(Xb.paint_heatmap["heatmap-opacity"])})},Ff=function(v){function H(P){v.call(this,P,tk);this._updateColorRamp()}return v&&(H.__proto__=v),(H.prototype=Object.create(v&&v.prototype)).constructor=H,H.prototype.createBucket=function(P){return new ri(P)},H.prototype._handleSpecialPaintPropertyUpdate=function(P){"heatmap-color"===P&&this._updateColorRamp()},H.prototype._updateColorRamp=function(){this.colorRamp=$c(this._transitionablePaint._values["heatmap-color"].value.expression,
"heatmapDensity");this.colorRampTexture=null},H.prototype.resize=function(){this.heatmapFbo&&(this.heatmapFbo.destroy(),this.heatmapFbo=null)},H.prototype.queryRadius=function(){return 0},H.prototype.queryIntersectsFeature=function(){return!1},H.prototype.hasOffscreenPass=function(){return 0!==this.paint.get("heatmap-opacity")&&"none"!==this.visibility},H}(pi),nk={paint:new ih({"hillshade-illumination-direction":new te(Xb.paint_hillshade["hillshade-illumination-direction"]),"hillshade-illumination-anchor":new te(Xb.paint_hillshade["hillshade-illumination-anchor"]),
"hillshade-exaggeration":new te(Xb.paint_hillshade["hillshade-exaggeration"]),"hillshade-shadow-color":new te(Xb.paint_hillshade["hillshade-shadow-color"]),"hillshade-highlight-color":new te(Xb.paint_hillshade["hillshade-highlight-color"]),"hillshade-accent-color":new te(Xb.paint_hillshade["hillshade-accent-color"])})},bi=function(v){function H(P){v.call(this,P,nk)}return v&&(H.__proto__=v),(H.prototype=Object.create(v&&v.prototype)).constructor=H,H.prototype.hasOffscreenPass=function(){return 0!==
this.paint.get("hillshade-exaggeration")&&"none"!==this.visibility},H}(pi),ci=Fd([{name:"a_pos",components:2,type:"Int16"}],4).members;Oc.deviation=function(v,H,P,ia){var xa=H&&H.length,Aa=Math.abs(Lh(v,0,xa?H[0]*P:v.length,P));if(xa){xa=0;for(var Ra=H.length;xa<Ra;xa++)Aa-=Math.abs(Lh(v,H[xa]*P,xa<Ra-1?H[xa+1]*P:v.length,P))}for(xa=H=0;xa<ia.length;xa+=3){Ra=ia[xa]*P;var bb=ia[xa+1]*P,ob=ia[xa+2]*P;H+=Math.abs((v[Ra]-v[ob])*(v[bb+1]-v[Ra+1])-(v[Ra]-v[bb])*(v[ob+1]-v[Ra+1]))}return 0===Aa&&0===H?
0:Math.abs((H-Aa)/Aa)};Oc.flatten=function(v){for(var H=v[0][0].length,P={vertices:[],holes:[],dimensions:H},ia=0,xa=0;xa<v.length;xa++){for(var Aa=0;Aa<v[xa].length;Aa++)for(var Ra=0;Ra<H;Ra++)P.vertices.push(v[xa][Aa][Ra]);0<xa&&P.holes.push(ia+=v[xa-1].length)}return P};Oc.default=Oc;var Pg=function(v){this.zoom=v.zoom;this.overscaling=v.overscaling;this.layers=v.layers;this.layerIds=this.layers.map(function(H){return H.id});this.index=v.index;this.hasPattern=!1;this.patternFeatures=[];this.layoutVertexArray=
new Ei;this.indexArray=new Vh;this.indexArray2=new ni;this.programConfigurations=new ch(ci,v.layers,v.zoom);this.segments=new pg;this.segments2=new pg;this.stateDependentLayerIds=this.layers.filter(function(H){return H.isStateDependent()}).map(function(H){return H.id})};Pg.prototype.populate=function(v,H,P){this.hasPattern=Qf("fill",this.layers,H);for(var ia=this.layers[0].layout.get("fill-sort-key"),xa=[],Aa=0;Aa<v.length;Aa+=1){var Ra=v[Aa],bb=Ra.feature,ob=Ra.id,sb=Ra.index;Ra=Ra.sourceLayerIndex;
var Hb=this.layers[0]._featureFilter.needGeometry,Vb={type:bb.type,id:ob,properties:bb.properties,geometry:Hb?Xd(bb):[]};this.layers[0]._featureFilter.filter(new Df(this.zoom),Vb,P)&&(Hb||(Vb.geometry=Xd(bb)),Hb=ia?ia.evaluate(Vb,{},P,H.availableImages):void 0,xa.push({id:ob,properties:bb.properties,type:bb.type,sourceLayerIndex:Ra,index:sb,geometry:Vb.geometry,patterns:{},sortKey:Hb}))}ia&&xa.sort(function(jc,ec){return jc.sortKey-ec.sortKey});for(ia=0;ia<xa.length;ia+=1)sb=xa[ia],Aa=sb.geometry,
bb=sb.index,ob=sb.sourceLayerIndex,this.hasPattern?(sb=Rf("fill",this.layers,sb,this.zoom,H),this.patternFeatures.push(sb)):this.addFeature(sb,Aa,bb,P,{}),H.featureIndex.insert(v[bb].feature,Aa,bb,ob,this.index)};Pg.prototype.update=function(v,H,P){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(v,H,this.stateDependentLayers,P)};Pg.prototype.addFeatures=function(v,H,P){v=0;for(var ia=this.patternFeatures;v<ia.length;v+=1){var xa=ia[v];this.addFeature(xa,xa.geometry,
xa.index,H,P)}};Pg.prototype.isEmpty=function(){return 0===this.layoutVertexArray.length};Pg.prototype.uploadPending=function(){return!this.uploaded||this.programConfigurations.needsUpload};Pg.prototype.upload=function(v){this.uploaded||(this.layoutVertexBuffer=v.createVertexBuffer(this.layoutVertexArray,ci),this.indexBuffer=v.createIndexBuffer(this.indexArray),this.indexBuffer2=v.createIndexBuffer(this.indexArray2));this.programConfigurations.upload(v);this.uploaded=!0};Pg.prototype.destroy=function(){this.layoutVertexBuffer&&
(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.indexBuffer2.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.segments2.destroy())};Pg.prototype.addFeature=function(v,H,P,ia,xa){var Aa=0;for(H=ti(H,500);Aa<H.length;Aa+=1){for(var Ra=H[Aa],bb=0,ob=0,sb=Ra;ob<sb.length;ob+=1)bb+=sb[ob].length;ob=this.segments.prepareSegment(bb,this.layoutVertexArray,this.indexArray);sb=ob.vertexLength;for(var Hb=[],Vb=[],jc=0,ec=Ra;jc<ec.length;jc+=1){var Nb=ec[jc];if(0!==
Nb.length){Nb!==Ra[0]&&Vb.push(Hb.length/2);var Mb=this.segments2.prepareSegment(Nb.length,this.layoutVertexArray,this.indexArray2),ac=Mb.vertexLength;this.layoutVertexArray.emplaceBack(Nb[0].x,Nb[0].y);this.indexArray2.emplaceBack(ac+Nb.length-1,ac);Hb.push(Nb[0].x);Hb.push(Nb[0].y);for(var Ic=1;Ic<Nb.length;Ic++)this.layoutVertexArray.emplaceBack(Nb[Ic].x,Nb[Ic].y),this.indexArray2.emplaceBack(ac+Ic-1,ac+Ic),Hb.push(Nb[Ic].x),Hb.push(Nb[Ic].y);Mb.vertexLength+=Nb.length;Mb.primitiveLength+=Nb.length}}Ra=
Oc(Hb,Vb);for(Hb=0;Hb<Ra.length;Hb+=3)this.indexArray.emplaceBack(sb+Ra[Hb],sb+Ra[Hb+1],sb+Ra[Hb+2]);ob.vertexLength+=bb;ob.primitiveLength+=Ra.length/3}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,v,P,xa,ia)};Hc("FillBucket",Pg,{omit:["layers","patternFeatures"]});var jj=new ih({"fill-sort-key":new ae(Xb.layout_fill["fill-sort-key"])}),pk={paint:new ih({"fill-antialias":new te(Xb.paint_fill["fill-antialias"]),"fill-opacity":new ae(Xb.paint_fill["fill-opacity"]),"fill-color":new ae(Xb.paint_fill["fill-color"]),
"fill-outline-color":new ae(Xb.paint_fill["fill-outline-color"]),"fill-translate":new te(Xb.paint_fill["fill-translate"]),"fill-translate-anchor":new te(Xb.paint_fill["fill-translate-anchor"]),"fill-pattern":new zj(Xb.paint_fill["fill-pattern"])}),layout:jj},Ek=function(v){function H(P){v.call(this,P,pk)}return v&&(H.__proto__=v),(H.prototype=Object.create(v&&v.prototype)).constructor=H,H.prototype.recalculate=function(P,ia){v.prototype.recalculate.call(this,P,ia);P=this.paint._values["fill-outline-color"];
"constant"===P.value.kind&&void 0===P.value.value&&(this.paint._values["fill-outline-color"]=this.paint._values["fill-color"])},H.prototype.createBucket=function(P){return new Pg(P)},H.prototype.queryRadius=function(){return pe(this.paint.get("fill-translate"))},H.prototype.queryIntersectsFeature=function(P,ia,xa,Aa,Ra,bb,ob){return Lf(ce(P,this.paint.get("fill-translate"),this.paint.get("fill-translate-anchor"),bb.angle,ob),Aa)},H.prototype.isTileClipped=function(){return!0},H}(pi),Ej=Fd([{name:"a_pos",
components:2,type:"Int16"},{name:"a_normal_ed",components:4,type:"Int16"}],4).members;Of.types=["Unknown","Point","LineString","Polygon"];Of.prototype.loadGeometry=function(){var v=this._pbf;v.pos=this._geometry;for(var H,P=v.readVarint()+v.pos,ia=1,xa=0,Aa=0,Ra=0,bb=[];v.pos<P;)if(0>=xa&&(xa=v.readVarint(),ia=7&xa,xa>>=3),xa--,1===ia||2===ia)Aa+=v.readSVarint(),Ra+=v.readSVarint(),1===ia&&(H&&bb.push(H),H=[]),H.push(new Bd(Aa,Ra));else{if(7!==ia)throw Error("unknown command "+ia);H&&H.push(H[0].clone())}return H&&
bb.push(H),bb};Of.prototype.bbox=function(){var v=this._pbf;v.pos=this._geometry;for(var H=v.readVarint()+v.pos,P=1,ia=0,xa=0,Aa=0,Ra=1/0,bb=-1/0,ob=1/0,sb=-1/0;v.pos<H;)if(0>=ia&&(ia=v.readVarint(),P=7&ia,ia>>=3),ia--,1===P||2===P)(xa+=v.readSVarint())<Ra&&(Ra=xa),xa>bb&&(bb=xa),(Aa+=v.readSVarint())<ob&&(ob=Aa),Aa>sb&&(sb=Aa);else if(7!==P)throw Error("unknown command "+P);return[Ra,ob,bb,sb]};Of.prototype.toGeoJSON=function(v,H,P){function ia(ob){for(var sb=0;sb<ob.length;sb++){var Hb=ob[sb];ob[sb]=
[360*(Hb.x+Aa)/xa-180,360/Math.PI*Math.atan(Math.exp((180-360*(Hb.y+Ra)/xa)*Math.PI/180))-90]}}var xa=this.extent*Math.pow(2,P),Aa=this.extent*v,Ra=this.extent*H;H=this.loadGeometry();P=Of.types[this.type];switch(this.type){case 1:var bb=[];for(v=0;v<H.length;v++)bb[v]=H[v][0];ia(H=bb);break;case 2:for(v=0;v<H.length;v++)ia(H[v]);break;case 3:for(H=function(ob){var sb=ob.length;if(1>=sb)return[ob];for(var Hb,Vb,jc=[],ec=0;ec<sb;ec++){for(var Nb,Mb=Nb=void 0,ac=ob[ec],Ic=0,Uc=0,Kc=ac.length,wd=Kc-
1;Uc<Kc;wd=Uc++)Ic+=((Nb=ac[wd]).x-(Mb=ac[Uc]).x)*(Mb.y+Nb.y);Nb=Ic;0!==Nb&&(void 0===Vb&&(Vb=0>Nb),Vb===0>Nb?(Hb&&jc.push(Hb),Hb=[ob[ec]]):Hb.push(ob[ec]))}return Hb&&jc.push(Hb),jc}(H),v=0;v<H.length;v++)for(bb=0;bb<H[v].length;bb++)ia(H[v][bb])}1===H.length?H=H[0]:P="Multi"+P;v={type:"Feature",geometry:{type:P,coordinates:H},properties:this.properties};return"id"in this&&(v.id=this.id),v};var Wj=Yg;Yg.prototype.feature=function(v){if(0>v||v>=this._features.length)throw Error("feature index out of bounds");
this._pbf.pos=this._features[v];v=this._pbf.readVarint()+this._pbf.pos;return new Of(this._pbf,v,this.extent,this._keys,this._values)};var gi={VectorTile:function(v,H){this.layers=v.readFields(Vi,{},H)},VectorTileFeature:Of,VectorTileLayer:Wj},Yj=gi.VectorTileFeature.types,Ui=Math.pow(2,13),ug=function(v){this.zoom=v.zoom;this.overscaling=v.overscaling;this.layers=v.layers;this.layerIds=this.layers.map(function(H){return H.id});this.index=v.index;this.hasPattern=!1;this.layoutVertexArray=new Ug;this.indexArray=
new Vh;this.programConfigurations=new ch(Ej,v.layers,v.zoom);this.segments=new pg;this.stateDependentLayerIds=this.layers.filter(function(H){return H.isStateDependent()}).map(function(H){return H.id})};ug.prototype.populate=function(v,H,P){this.features=[];this.hasPattern=Qf("fill-extrusion",this.layers,H);for(var ia=0;ia<v.length;ia+=1){var xa=v[ia],Aa=xa.feature,Ra=xa.id,bb=xa.index;xa=xa.sourceLayerIndex;var ob=this.layers[0]._featureFilter.needGeometry,sb={type:Aa.type,id:Ra,properties:Aa.properties,
geometry:ob?Xd(Aa):[]};this.layers[0]._featureFilter.filter(new Df(this.zoom),sb,P)&&(Ra={id:Ra,sourceLayerIndex:xa,index:bb,geometry:ob?sb.geometry:Xd(Aa),properties:Aa.properties,type:Aa.type,patterns:{}},void 0!==Aa.id&&(Ra.id=Aa.id),this.hasPattern?this.features.push(Rf("fill-extrusion",this.layers,Ra,this.zoom,H)):this.addFeature(Ra,Ra.geometry,bb,P,{}),H.featureIndex.insert(Aa,Ra.geometry,bb,xa,this.index,!0))}};ug.prototype.addFeatures=function(v,H,P){v=0;for(var ia=this.features;v<ia.length;v+=
1){var xa=ia[v];this.addFeature(xa,xa.geometry,xa.index,H,P)}};ug.prototype.update=function(v,H,P){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(v,H,this.stateDependentLayers,P)};ug.prototype.isEmpty=function(){return 0===this.layoutVertexArray.length};ug.prototype.uploadPending=function(){return!this.uploaded||this.programConfigurations.needsUpload};ug.prototype.upload=function(v){this.uploaded||(this.layoutVertexBuffer=v.createVertexBuffer(this.layoutVertexArray,
Ej),this.indexBuffer=v.createIndexBuffer(this.indexArray));this.programConfigurations.upload(v);this.uploaded=!0};ug.prototype.destroy=function(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy())};ug.prototype.addFeature=function(v,H,P,ia,xa){var Aa=0;for(H=ti(H,500);Aa<H.length;Aa+=1){for(var Ra=H[Aa],bb=0,ob=0,sb=Ra;ob<sb.length;ob+=1)bb+=sb[ob].length;ob=this.segments.prepareSegment(4,this.layoutVertexArray,
this.indexArray);sb=0;for(var Hb=Ra;sb<Hb.length;sb+=1){var Vb=Hb[sb];if(0!==Vb.length&&!((Uc=Vb).every(function(Kc){return 0>Kc.x})||Uc.every(function(Kc){return 8192<Kc.x})||Uc.every(function(Kc){return 0>Kc.y})||Uc.every(function(Kc){return 8192<Kc.y})))for(var jc=0,ec=0;ec<Vb.length;ec++){var Nb=Vb[ec];if(1<=ec){var Mb=Vb[ec-1];if(!(Nb.x===Mb.x&&(0>Nb.x||8192<Nb.x)||Nb.y===Mb.y&&(0>Nb.y||8192<Nb.y))){ob.vertexLength+4>pg.MAX_VERTEX_ARRAY_LENGTH&&(ob=this.segments.prepareSegment(4,this.layoutVertexArray,
this.indexArray));var ac=Nb.sub(Mb)._perp()._unit(),Ic=Mb.dist(Nb);32768<jc+Ic&&(jc=0);th(this.layoutVertexArray,Nb.x,Nb.y,ac.x,ac.y,0,0,jc);th(this.layoutVertexArray,Nb.x,Nb.y,ac.x,ac.y,0,1,jc);th(this.layoutVertexArray,Mb.x,Mb.y,ac.x,ac.y,0,0,jc+=Ic);th(this.layoutVertexArray,Mb.x,Mb.y,ac.x,ac.y,0,1,jc);Nb=ob.vertexLength;this.indexArray.emplaceBack(Nb,Nb+2,Nb+1);this.indexArray.emplaceBack(Nb+1,Nb+2,Nb+3);ob.vertexLength+=4;ob.primitiveLength+=2}}}}if(ob.vertexLength+bb>pg.MAX_VERTEX_ARRAY_LENGTH&&
(ob=this.segments.prepareSegment(bb,this.layoutVertexArray,this.indexArray)),"Polygon"===Yj[v.type]){Hb=[];Vb=[];sb=ob.vertexLength;jc=0;for(ec=Ra;jc<ec.length;jc+=1)if(Nb=ec[jc],0!==Nb.length)for(Nb!==Ra[0]&&Vb.push(Hb.length/2),Mb=0;Mb<Nb.length;Mb++)ac=Nb[Mb],th(this.layoutVertexArray,ac.x,ac.y,0,0,1,1,0),Hb.push(ac.x),Hb.push(ac.y);Ra=Oc(Hb,Vb);for(Hb=0;Hb<Ra.length;Hb+=3)this.indexArray.emplaceBack(sb+Ra[Hb],sb+Ra[Hb+2],sb+Ra[Hb+1]);ob.primitiveLength+=Ra.length/3;ob.vertexLength+=bb}}var Uc;
this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,v,P,xa,ia)};Hc("FillExtrusionBucket",ug,{omit:["layers","features"]});var ok={paint:new ih({"fill-extrusion-opacity":new te(Xb["paint_fill-extrusion"]["fill-extrusion-opacity"]),"fill-extrusion-color":new ae(Xb["paint_fill-extrusion"]["fill-extrusion-color"]),"fill-extrusion-translate":new te(Xb["paint_fill-extrusion"]["fill-extrusion-translate"]),"fill-extrusion-translate-anchor":new te(Xb["paint_fill-extrusion"]["fill-extrusion-translate-anchor"]),
"fill-extrusion-pattern":new zj(Xb["paint_fill-extrusion"]["fill-extrusion-pattern"]),"fill-extrusion-height":new ae(Xb["paint_fill-extrusion"]["fill-extrusion-height"]),"fill-extrusion-base":new ae(Xb["paint_fill-extrusion"]["fill-extrusion-base"]),"fill-extrusion-vertical-gradient":new te(Xb["paint_fill-extrusion"]["fill-extrusion-vertical-gradient"])})},Xj=function(v){function H(P){v.call(this,P,ok)}return v&&(H.__proto__=v),(H.prototype=Object.create(v&&v.prototype)).constructor=H,H.prototype.createBucket=
function(P){return new ug(P)},H.prototype.queryRadius=function(){return pe(this.paint.get("fill-extrusion-translate"))},H.prototype.is3D=function(){return!0},H.prototype.queryIntersectsFeature=function(P,ia,xa,Aa,Ra,bb,ob,sb){Ra=ce(P,this.paint.get("fill-extrusion-translate"),this.paint.get("fill-extrusion-translate-anchor"),bb.angle,ob);P=this.paint.get("fill-extrusion-height").evaluate(ia,xa);ia=this.paint.get("fill-extrusion-base").evaluate(ia,xa);xa=function(Hb,Vb,jc,ec){jc=[];for(ec=0;ec<Hb.length;ec+=
1){var Nb=Hb[ec];Nb=[Nb.x,Nb.y,0,1];Ue(Nb,Nb,Vb);jc.push(new Bd(Nb[0]/Nb[3],Nb[1]/Nb[3]))}return jc}(Ra,sb);Aa=function(Hb,Vb,jc,ec){var Nb=[],Mb=[],ac=ec[8]*Vb,Ic=ec[9]*Vb,Uc=ec[10]*Vb;Vb*=ec[11];var Kc=ec[8]*jc,wd=ec[9]*jc,Dd=ec[10]*jc;jc*=ec[11];for(var Qd=0;Qd<Hb.length;Qd+=1){for(var Nd=[],re=[],Je=0,Pe=Hb[Qd];Je<Pe.length;Je+=1){var ze=Pe[Je],Ie=ze.x,Ye=ze.y;ze=ec[0]*Ie+ec[4]*Ye+ec[12];var qe=ec[1]*Ie+ec[5]*Ye+ec[13],me=ec[2]*Ie+ec[6]*Ye+ec[14],se=ec[3]*Ie+ec[7]*Ye+ec[15];Ie=me+Uc;Ye=se+Vb;
var rf=ze+Kc,Wf=qe+wd;me+=Dd;se+=jc;ze=new Bd((ze+ac)/Ye,(qe+Ic)/Ye);ze.z=Ie/Ye;Nd.push(ze);ze=new Bd(rf/se,Wf/se);ze.z=me/se;re.push(ze)}Nb.push(Nd);Mb.push(re)}return[Nb,Mb]}(Aa,ia,P,sb);return function(Hb,Vb,jc){var ec=1/0;Lf(jc,Vb)&&(ec=Mh(jc,Vb[0]));for(var Nb=0;Nb<Vb.length;Nb++)for(var Mb=Vb[Nb],ac=Hb[Nb],Ic=0;Ic<Mb.length-1;Ic++){var Uc=Mb[Ic];Uc=[Uc,Mb[Ic+1],ac[Ic+1],ac[Ic],Uc];Yd(jc,Uc)&&(ec=Math.min(ec,Mh(jc,Uc)))}return ec!==1/0&&ec}(Aa[0],Aa[1],xa)},H}(pi),fg=Fd([{name:"a_pos_normal",
components:2,type:"Int16"},{name:"a_data",components:4,type:"Uint8"}],4).members,W=gi.VectorTileFeature.types,wa=Math.cos(Math.PI/180*37.5),Da=Math.pow(2,14)/.5,La=function(v){this.zoom=v.zoom;this.overscaling=v.overscaling;this.layers=v.layers;this.layerIds=this.layers.map(function(H){return H.id});this.index=v.index;this.hasPattern=!1;this.patternFeatures=[];this.layoutVertexArray=new Di;this.indexArray=new Vh;this.programConfigurations=new ch(fg,v.layers,v.zoom);this.segments=new pg;this.stateDependentLayerIds=
this.layers.filter(function(H){return H.isStateDependent()}).map(function(H){return H.id})};La.prototype.populate=function(v,H,P){this.hasPattern=Qf("line",this.layers,H);for(var ia=this.layers[0].layout.get("line-sort-key"),xa=[],Aa=0;Aa<v.length;Aa+=1){var Ra=v[Aa],bb=Ra.feature,ob=Ra.id,sb=Ra.index;Ra=Ra.sourceLayerIndex;var Hb=this.layers[0]._featureFilter.needGeometry,Vb={type:bb.type,id:ob,properties:bb.properties,geometry:Hb?Xd(bb):[]};this.layers[0]._featureFilter.filter(new Df(this.zoom),
Vb,P)&&(Hb||(Vb.geometry=Xd(bb)),Hb=ia?ia.evaluate(Vb,{},P):void 0,xa.push({id:ob,properties:bb.properties,type:bb.type,sourceLayerIndex:Ra,index:sb,geometry:Vb.geometry,patterns:{},sortKey:Hb}))}ia&&xa.sort(function(jc,ec){return jc.sortKey-ec.sortKey});for(ia=0;ia<xa.length;ia+=1)sb=xa[ia],Aa=sb.geometry,bb=sb.index,ob=sb.sourceLayerIndex,this.hasPattern?(sb=Rf("line",this.layers,sb,this.zoom,H),this.patternFeatures.push(sb)):this.addFeature(sb,Aa,bb,P,{}),H.featureIndex.insert(v[bb].feature,Aa,
bb,ob,this.index)};La.prototype.update=function(v,H,P){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(v,H,this.stateDependentLayers,P)};La.prototype.addFeatures=function(v,H,P){v=0;for(var ia=this.patternFeatures;v<ia.length;v+=1){var xa=ia[v];this.addFeature(xa,xa.geometry,xa.index,H,P)}};La.prototype.isEmpty=function(){return 0===this.layoutVertexArray.length};La.prototype.uploadPending=function(){return!this.uploaded||this.programConfigurations.needsUpload};La.prototype.upload=
function(v){this.uploaded||(this.layoutVertexBuffer=v.createVertexBuffer(this.layoutVertexArray,fg),this.indexBuffer=v.createIndexBuffer(this.indexArray));this.programConfigurations.upload(v);this.uploaded=!0};La.prototype.destroy=function(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy())};La.prototype.addFeature=function(v,H,P,ia,xa){var Aa=this.layers[0].layout,Ra=Aa.get("line-join").evaluate(v,
{}),bb=Aa.get("line-cap"),ob=Aa.get("line-miter-limit");Aa=Aa.get("line-round-limit");for(var sb=0;sb<H.length;sb+=1)this.addLine(H[sb],v,Ra,bb,ob,Aa);this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,v,P,xa,ia)};La.prototype.addLine=function(v,H,P,ia,xa,Aa){if(this.distance=0,this.scaledDistance=0,this.totalDistance=0,H.properties&&H.properties.hasOwnProperty("mapbox_clip_start")&&H.properties.hasOwnProperty("mapbox_clip_end")){this.clipStart=+H.properties.mapbox_clip_start;
this.clipEnd=+H.properties.mapbox_clip_end;for(var Ra=0;Ra<v.length-1;Ra++)this.totalDistance+=v[Ra].dist(v[Ra+1]);this.updateScaledDistance()}H="Polygon"===W[H.type];for(Ra=v.length;2<=Ra&&v[Ra-1].equals(v[Ra-2]);)Ra--;for(var bb=0;bb<Ra-1&&v[bb].equals(v[bb+1]);)bb++;if(!(Ra<(H?3:2))){"bevel"===P&&(xa=1.05);var ob,sb=16>=this.overscaling?122880/(512*this.overscaling):0,Hb=this.segments.prepareSegment(10*Ra,this.layoutVertexArray,this.indexArray),Vb=void 0,jc=void 0,ec=void 0,Nb=void 0;this.e1=this.e2=
-1;H&&(Nb=v[bb].sub(ob=v[Ra-2])._unit()._perp());for(var Mb=bb;Mb<Ra;Mb++)if(!(jc=Mb===Ra-1?H?v[bb+1]:void 0:v[Mb+1])||!v[Mb].equals(jc)){Nb&&(ec=Nb);ob&&(Vb=ob);ob=v[Mb];Nb=jc?jc.sub(ob)._unit()._perp():ec;var ac=(ec=ec||Nb).add(Nb);0===ac.x&&0===ac.y||ac._unit();var Ic=ec.x*Nb.x+ec.y*Nb.y,Uc=ac.x*Nb.x+ac.y*Nb.y,Kc=0!==Uc?1/Uc:1/0,wd=2*Math.sqrt(2-2*Uc);Uc=Uc<wa&&Vb&&jc;var Dd=0<ec.x*Nb.y-ec.y*Nb.x;if(Uc&&Mb>bb){var Qd=ob.dist(Vb);Qd>2*sb&&(Qd=ob.sub(ob.sub(Vb)._mult(sb/Qd)._round()),this.updateDistance(Vb,
Qd),this.addCurrentVertex(Qd,ec,0,0,Hb),Vb=Qd)}var Nd=Vb&&jc;Qd=Nd?P:H?"butt":ia;if(Nd&&"round"===Qd&&(Kc<Aa?Qd="miter":2>=Kc&&(Qd="fakeround")),"miter"===Qd&&Kc>xa&&(Qd="bevel"),"bevel"===Qd&&(2<Kc&&(Qd="flipbevel"),Kc<xa&&(Qd="miter")),Vb&&this.updateDistance(Vb,ob),"miter"===Qd)ac._mult(Kc),this.addCurrentVertex(ob,ac,0,0,Hb);else if("flipbevel"===Qd)100<Kc?ac=Nb.mult(-1):(Ic=Kc*ec.add(Nb).mag()/ec.sub(Nb).mag(),ac._perp()._mult(Ic*(Dd?-1:1))),this.addCurrentVertex(ob,ac,0,0,Hb),this.addCurrentVertex(ob,
ac.mult(-1),0,0,Hb);else if("bevel"===Qd||"fakeround"===Qd){Kc=-Math.sqrt(Kc*Kc-1);ac=Dd?Kc:0;Kc=Dd?0:Kc;if(Vb&&this.addCurrentVertex(ob,ec,ac,Kc,Hb),"fakeround"===Qd)for(wd=Math.round(180*wd/Math.PI/20),Qd=1;Qd<wd;Qd++){Nd=Qd/wd;if(.5!==Nd){var re=Nd-.5;Nd+=Nd*re*(Nd-1)*((1.0904+Ic*(Ic*(3.55645-1.43519*Ic)-3.2452))*re*re+(.848013+Ic*(.215638*Ic-1.06021)))}Nd=Nb.sub(ec)._mult(Nd)._add(ec)._unit()._mult(Dd?-1:1);this.addHalfVertex(ob,Nd.x,Nd.y,!1,Dd,0,Hb)}jc&&this.addCurrentVertex(ob,Nb,-ac,-Kc,Hb)}else"butt"===
Qd?this.addCurrentVertex(ob,ac,0,0,Hb):"square"===Qd?(Ic=Vb?1:-1,this.addCurrentVertex(ob,ac,Ic,Ic,Hb)):"round"===Qd&&(Vb&&(this.addCurrentVertex(ob,ec,0,0,Hb),this.addCurrentVertex(ob,ec,1,1,Hb,!0)),jc&&(this.addCurrentVertex(ob,Nb,-1,-1,Hb,!0),this.addCurrentVertex(ob,Nb,0,0,Hb)));Uc&&Mb<Ra-1&&(Uc=ob.dist(jc),Uc>2*sb&&(Uc=ob.add(jc.sub(ob)._mult(sb/Uc)._round()),this.updateDistance(ob,Uc),this.addCurrentVertex(Uc,Nb,0,0,Hb),ob=Uc))}}};La.prototype.addCurrentVertex=function(v,H,P,ia,xa,Aa){void 0===
Aa&&(Aa=!1);var Ra=H.y*ia-H.x,bb=-H.y-H.x*ia;this.addHalfVertex(v,H.x+H.y*P,H.y-H.x*P,Aa,!1,P,xa);this.addHalfVertex(v,Ra,bb,Aa,!0,-ia,xa);this.distance>Da/2&&0===this.totalDistance&&(this.distance=0,this.addCurrentVertex(v,H,P,ia,xa,Aa))};La.prototype.addHalfVertex=function(v,H,P,ia,xa,Aa,Ra){var bb=.5*this.scaledDistance;this.layoutVertexArray.emplaceBack((v.x<<1)+(ia?1:0),(v.y<<1)+(xa?1:0),Math.round(63*H)+128,Math.round(63*P)+128,1+(0===Aa?0:0>Aa?-1:1)|(63&bb)<<2,bb>>6);v=Ra.vertexLength++;0<=
this.e1&&0<=this.e2&&(this.indexArray.emplaceBack(this.e1,this.e2,v),Ra.primitiveLength++);xa?this.e2=v:this.e1=v};La.prototype.updateScaledDistance=function(){this.scaledDistance=0<this.totalDistance?(this.clipStart+(this.clipEnd-this.clipStart)*this.distance/this.totalDistance)*(Da-1):this.distance};La.prototype.updateDistance=function(v,H){this.distance+=v.dist(H);this.updateScaledDistance()};Hc("LineBucket",La,{omit:["layers","patternFeatures"]});var Ta=new ih({"line-cap":new te(Xb.layout_line["line-cap"]),
"line-join":new ae(Xb.layout_line["line-join"]),"line-miter-limit":new te(Xb.layout_line["line-miter-limit"]),"line-round-limit":new te(Xb.layout_line["line-round-limit"]),"line-sort-key":new ae(Xb.layout_line["line-sort-key"])}),Xa={paint:new ih({"line-opacity":new ae(Xb.paint_line["line-opacity"]),"line-color":new ae(Xb.paint_line["line-color"]),"line-translate":new te(Xb.paint_line["line-translate"]),"line-translate-anchor":new te(Xb.paint_line["line-translate-anchor"]),"line-width":new ae(Xb.paint_line["line-width"]),
"line-gap-width":new ae(Xb.paint_line["line-gap-width"]),"line-offset":new ae(Xb.paint_line["line-offset"]),"line-blur":new ae(Xb.paint_line["line-blur"]),"line-dasharray":new Ci(Xb.paint_line["line-dasharray"]),"line-pattern":new zj(Xb.paint_line["line-pattern"]),"line-gradient":new rj(Xb.paint_line["line-gradient"])}),layout:Ta},jb=new (function(v){function H(){v.apply(this,arguments)}return v&&(H.__proto__=v),(H.prototype=Object.create(v&&v.prototype)).constructor=H,H.prototype.possiblyEvaluate=
function(P,ia){return ia=new Df(Math.floor(ia.zoom),{now:ia.now,fadeDuration:ia.fadeDuration,zoomHistory:ia.zoomHistory,transition:ia.transition}),v.prototype.possiblyEvaluate.call(this,P,ia)},H.prototype.evaluate=function(P,ia,xa,Aa){return ia=d({},ia,{zoom:Math.floor(ia.zoom)}),v.prototype.evaluate.call(this,P,ia,xa,Aa)},H}(ae))(Xa.paint.properties["line-width"].specification);jb.useIntegerZoom=!0;var eb=function(v){function H(P){v.call(this,P,Xa)}return v&&(H.__proto__=v),(H.prototype=Object.create(v&&
v.prototype)).constructor=H,H.prototype._handleSpecialPaintPropertyUpdate=function(P){"line-gradient"===P&&this._updateGradient()},H.prototype._updateGradient=function(){this.gradient=$c(this._transitionablePaint._values["line-gradient"].value.expression,"lineProgress");this.gradientTexture=null},H.prototype.recalculate=function(P,ia){v.prototype.recalculate.call(this,P,ia);this.paint._values["line-floorwidth"]=jb.possiblyEvaluate(this._transitioningPaint._values["line-width"].value,P)},H.prototype.createBucket=
function(P){return new La(P)},H.prototype.queryRadius=function(P){var ia=ei(be("line-width",this,P),be("line-gap-width",this,P));P=be("line-offset",this,P);return ia/2+Math.abs(P)+pe(this.paint.get("line-translate"))},H.prototype.queryIntersectsFeature=function(P,ia,xa,Aa,Ra,bb,ob){P=ce(P,this.paint.get("line-translate"),this.paint.get("line-translate-anchor"),bb.angle,ob);Ra=ob/2*ei(this.paint.get("line-width").evaluate(ia,xa),this.paint.get("line-gap-width").evaluate(ia,xa));ia=this.paint.get("line-offset").evaluate(ia,
xa);return ia&&(Aa=function(sb,Hb){for(var Vb=[],jc=new Bd(0,0),ec=0;ec<sb.length;ec++){for(var Nb=sb[ec],Mb=[],ac=0;ac<Nb.length;ac++){var Ic=Nb[ac],Uc=Nb[ac+1],Kc=0===ac?jc:Ic.sub(Nb[ac-1])._unit()._perp();Uc=ac===Nb.length-1?jc:Uc.sub(Ic)._unit()._perp();Kc=Kc._add(Uc)._unit();Kc._mult(1/(Kc.x*Uc.x+Kc.y*Uc.y));Mb.push(Kc._mult(Hb)._add(Ic))}Vb.push(Mb)}return Vb}(Aa,ia*ob)),function(sb,Hb,Vb){for(var jc=0;jc<Hb.length;jc++){var ec=Hb[jc];if(3<=sb.length)for(var Nb=0;Nb<ec.length;Nb++)if(hd(sb,
ec[Nb]))return!0;a:{Nb=sb;var Mb=Vb;if(1<Nb.length){if(Cf(Nb,ec)){Nb=!0;break a}for(var ac=0;ac<ec.length;ac++)if(tc(ec[ac],Nb,Mb)){Nb=!0;break a}}for(ac=0;ac<Nb.length;ac++)if(tc(Nb[ac],ec,Mb)){Nb=!0;break a}Nb=!1}if(Nb)return!0}return!1}(P,Aa,Ra)},H.prototype.isTileClipped=function(){return!0},H}(pi),ib=Fd([{name:"a_pos_offset",components:4,type:"Int16"},{name:"a_data",components:4,type:"Uint16"},{name:"a_pixeloffset",components:4,type:"Int16"}],4),rb=Fd([{name:"a_projected_pos",components:3,type:"Float32"}],
4),yb=(Fd([{name:"a_fade_opacity",components:1,type:"Uint32"}],4),Fd([{name:"a_placed",components:2,type:"Uint8"},{name:"a_shift",components:2,type:"Float32"}])),Gb=(Fd([{type:"Int16",name:"anchorPointX"},{type:"Int16",name:"anchorPointY"},{type:"Int16",name:"x1"},{type:"Int16",name:"y1"},{type:"Int16",name:"x2"},{type:"Int16",name:"y2"},{type:"Uint32",name:"featureIndex"},{type:"Uint16",name:"sourceLayerIndex"},{type:"Uint16",name:"bucketIndex"}]),Fd([{name:"a_pos",components:2,type:"Int16"},{name:"a_anchor_pos",
components:2,type:"Int16"},{name:"a_extrude",components:2,type:"Int16"}],4)),Qb=Fd([{name:"a_pos",components:2,type:"Float32"},{name:"a_radius",components:1,type:"Float32"},{name:"a_flags",components:2,type:"Int16"}],4);Fd([{name:"triangle",components:3,type:"Uint16"}]);Fd([{type:"Int16",name:"anchorX"},{type:"Int16",name:"anchorY"},{type:"Uint16",name:"glyphStartIndex"},{type:"Uint16",name:"numGlyphs"},{type:"Uint32",name:"vertexStartIndex"},{type:"Uint32",name:"lineStartIndex"},{type:"Uint32",name:"lineLength"},
{type:"Uint16",name:"segment"},{type:"Uint16",name:"lowerSize"},{type:"Uint16",name:"upperSize"},{type:"Float32",name:"lineOffsetX"},{type:"Float32",name:"lineOffsetY"},{type:"Uint8",name:"writingMode"},{type:"Uint8",name:"placedOrientation"},{type:"Uint8",name:"hidden"},{type:"Uint32",name:"crossTileID"},{type:"Int16",name:"associatedIconIndex"}]);Fd([{type:"Int16",name:"anchorX"},{type:"Int16",name:"anchorY"},{type:"Int16",name:"rightJustifiedTextSymbolIndex"},{type:"Int16",name:"centerJustifiedTextSymbolIndex"},
{type:"Int16",name:"leftJustifiedTextSymbolIndex"},{type:"Int16",name:"verticalPlacedTextSymbolIndex"},{type:"Int16",name:"placedIconSymbolIndex"},{type:"Int16",name:"verticalPlacedIconSymbolIndex"},{type:"Uint16",name:"key"},{type:"Uint16",name:"textBoxStartIndex"},{type:"Uint16",name:"textBoxEndIndex"},{type:"Uint16",name:"verticalTextBoxStartIndex"},{type:"Uint16",name:"verticalTextBoxEndIndex"},{type:"Uint16",name:"iconBoxStartIndex"},{type:"Uint16",name:"iconBoxEndIndex"},{type:"Uint16",name:"verticalIconBoxStartIndex"},
{type:"Uint16",name:"verticalIconBoxEndIndex"},{type:"Uint16",name:"featureIndex"},{type:"Uint16",name:"numHorizontalGlyphVertices"},{type:"Uint16",name:"numVerticalGlyphVertices"},{type:"Uint16",name:"numIconVertices"},{type:"Uint16",name:"numVerticalIconVertices"},{type:"Uint16",name:"useRuntimeCollisionCircles"},{type:"Uint32",name:"crossTileID"},{type:"Float32",name:"textBoxScale"},{type:"Float32",components:2,name:"textOffset"},{type:"Float32",name:"collisionCircleDiameter"}]);Fd([{type:"Float32",
name:"offsetX"}]);Fd([{type:"Int16",name:"x"},{type:"Int16",name:"y"},{type:"Int16",name:"tileUnitDistanceFromAnchor"}]);var Wb={"!":"︕","#":"＃",$:"＄","%":"％","\x26":"＆","(":"︵",")":"︶","*":"＊","+":"＋",",":"︐","-":"︲",".":"・","/":"／",":":"︓",";":"︔","\x3c":"︿","\x3d":"＝","\x3e":"﹀","?":"︖","@":"＠","[":"﹇","\\":"＼","]":"﹈","^":"＾",_:"︳","`":"｀","{":"︷","|":"―","}":"︸","~":"～","¢":"￠","£":"￡","¥":"￥","¦":"￤","¬":"￢","¯":"￣","–":"︲","—":"︱","‘":"﹃","’":"﹄","“":"﹁","”":"﹂","…":"︙","‧":"・","₩":"￦","、":"︑",
"。":"︒","〈":"︿","〉":"﹀","《":"︽","》":"︾","「":"﹁","」":"﹂","『":"﹃","』":"﹄","【":"︻","】":"︼","〔":"︹","〕":"︺","〖":"︗","〗":"︘","！":"︕","（":"︵","）":"︶","，":"︐","－":"︲","．":"・","：":"︓","；":"︔","＜":"︿","＞":"﹀","？":"︖","［":"﹇","］":"﹈","＿":"︳","｛":"︷","｜":"―","｝":"︸","｟":"︵","｠":"︶","｡":"︒","｢":"﹁","｣":"﹂"},gc=function(v,H,P,ia,xa){var Aa=8*xa-ia-1;var Ra=(1<<Aa)-1,bb=Ra>>1,ob=-7;xa=P?xa-1:0;var sb=P?-1:1,Hb=v[H+xa];xa+=sb;P=Hb&(1<<-ob)-1;Hb>>=-ob;for(ob+=Aa;0<ob;P=256*P+v[H+xa],xa+=sb,ob-=8);Aa=P&(1<<-ob)-1;
P>>=-ob;for(ob+=ia;0<ob;Aa=256*Aa+v[H+xa],xa+=sb,ob-=8);if(0===P)P=1-bb;else{if(P===Ra)return Aa?NaN:1/0*(Hb?-1:1);Aa+=Math.pow(2,ia);P-=bb}return(Hb?-1:1)*Aa*Math.pow(2,P-ia)},mc=function(v,H,P,ia,xa,Aa){var Ra,bb,ob,sb=8*Aa-xa-1,Hb=(1<<sb)-1,Vb=Hb>>1,jc=23===xa?Math.pow(2,-24)-Math.pow(2,-77):0;Aa=ia?0:Aa-1;ia=ia?1:-1;var ec=0>H||0===H&&0>1/H?1:0;H=Math.abs(H);for(isNaN(H)||H===1/0?(bb=isNaN(H)?1:0,Ra=Hb):(Ra=Math.floor(Math.log(H)/Math.LN2),1>H*(ob=Math.pow(2,-Ra))&&(Ra--,ob*=2),2<=(H+=1<=Ra+Vb?
jc/ob:jc*Math.pow(2,1-Vb))*ob&&(Ra++,ob/=2),Ra+Vb>=Hb?(bb=0,Ra=Hb):1<=Ra+Vb?(bb=(H*ob-1)*Math.pow(2,xa),Ra+=Vb):(bb=H*Math.pow(2,Vb-1)*Math.pow(2,xa),Ra=0));8<=xa;v[P+Aa]=255&bb,Aa+=ia,bb/=256,xa-=8);Ra=Ra<<xa|bb;for(sb+=xa;0<sb;v[P+Aa]=255&Ra,Aa+=ia,Ra/=256,sb-=8);v[P+Aa-ia]|=128*ec};jf.Varint=0;jf.Fixed64=1;jf.Bytes=2;jf.Fixed32=5;var rc="undefined"==typeof TextDecoder?null:new TextDecoder("utf8");jf.prototype={destroy:function(){this.buf=null},readFields:function(v,H,P){for(P=P||this.length;this.pos<
P;){var ia=this.readVarint(),xa=ia>>3,Aa=this.pos;this.type=7&ia;v(xa,H,this);this.pos===Aa&&this.skip(ia)}return H},readMessage:function(v,H){return this.readFields(v,H,this.readVarint()+this.pos)},readFixed32:function(){var v=vh(this.buf,this.pos);return this.pos+=4,v},readSFixed32:function(){var v=Pf(this.buf,this.pos);return this.pos+=4,v},readFixed64:function(){var v=vh(this.buf,this.pos)+4294967296*vh(this.buf,this.pos+4);return this.pos+=8,v},readSFixed64:function(){var v=vh(this.buf,this.pos)+
4294967296*Pf(this.buf,this.pos+4);return this.pos+=8,v},readFloat:function(){var v=gc(this.buf,this.pos,!0,23,4);return this.pos+=4,v},readDouble:function(){var v=gc(this.buf,this.pos,!0,52,8);return this.pos+=8,v},readVarint:function(v){var H,P=this.buf;var ia=127&(H=P[this.pos++]);if(128>H)v=ia;else if(ia|=(127&(H=P[this.pos++]))<<7,128>H)v=ia;else if(ia|=(127&(H=P[this.pos++]))<<14,128>H)v=ia;else if(ia|=(127&(H=P[this.pos++]))<<21,128>H)v=ia;else{ia|=(15&P[this.pos])<<28;var xa,Aa;H=this.buf;
if((xa=(112&(Aa=H[this.pos++]))>>4,128>Aa)||(xa|=(127&(Aa=H[this.pos++]))<<3,128>Aa)||(xa|=(127&(Aa=H[this.pos++]))<<10,128>Aa)||(xa|=(127&(Aa=H[this.pos++]))<<17,128>Aa)||(xa|=(127&(Aa=H[this.pos++]))<<24,128>Aa)||(xa|=(1&(Aa=H[this.pos++]))<<31,128>Aa))v=v?4294967296*xa+(ia>>>0):4294967296*(xa>>>0)+(ia>>>0);else throw Error("Expected varint not more than 10 bytes");}return v},readVarint64:function(){return this.readVarint(!0)},readSVarint:function(){var v=this.readVarint();return 1==v%2?(v+1)/-2:
v/2},readBoolean:function(){return!!this.readVarint()},readString:function(){var v=this.readVarint()+this.pos,H=this.pos;this.pos=v;if(12<=v-H&&rc)v=rc.decode(this.buf.subarray(H,v));else{for(var P=this.buf,ia="";H<v;){var xa,Aa,Ra,bb=P[H],ob=null,sb=239<bb?4:223<bb?3:191<bb?2:1;if(H+sb>v)break;1===sb?128>bb&&(ob=bb):2===sb?128==(192&(xa=P[H+1]))&&127>=(ob=(31&bb)<<6|63&xa)&&(ob=null):3===sb?(Aa=P[H+2],128==(192&(xa=P[H+1]))&&128==(192&Aa)&&(2047>=(ob=(15&bb)<<12|(63&xa)<<6|63&Aa)||55296<=ob&&57343>=
ob)&&(ob=null)):4===sb&&(Aa=P[H+2],Ra=P[H+3],128==(192&(xa=P[H+1]))&&128==(192&Aa)&&128==(192&Ra)&&(65535>=(ob=(15&bb)<<18|(63&xa)<<12|(63&Aa)<<6|63&Ra)||1114112<=ob)&&(ob=null));null===ob?(ob=65533,sb=1):65535<ob&&(ob-=65536,ia+=String.fromCharCode(ob>>>10&1023|55296),ob=56320|1023&ob);ia+=String.fromCharCode(ob);H+=sb}v=ia}return v},readBytes:function(){var v=this.readVarint()+this.pos,H=this.buf.subarray(this.pos,v);return this.pos=v,H},readPackedVarint:function(v,H){if(this.type!==jf.Bytes)return v.push(this.readVarint(H));
var P=Bg(this);for(v=v||[];this.pos<P;)v.push(this.readVarint(H));return v},readPackedSVarint:function(v){if(this.type!==jf.Bytes)return v.push(this.readSVarint());var H=Bg(this);for(v=v||[];this.pos<H;)v.push(this.readSVarint());return v},readPackedBoolean:function(v){if(this.type!==jf.Bytes)return v.push(this.readBoolean());var H=Bg(this);for(v=v||[];this.pos<H;)v.push(this.readBoolean());return v},readPackedFloat:function(v){if(this.type!==jf.Bytes)return v.push(this.readFloat());var H=Bg(this);
for(v=v||[];this.pos<H;)v.push(this.readFloat());return v},readPackedDouble:function(v){if(this.type!==jf.Bytes)return v.push(this.readDouble());var H=Bg(this);for(v=v||[];this.pos<H;)v.push(this.readDouble());return v},readPackedFixed32:function(v){if(this.type!==jf.Bytes)return v.push(this.readFixed32());var H=Bg(this);for(v=v||[];this.pos<H;)v.push(this.readFixed32());return v},readPackedSFixed32:function(v){if(this.type!==jf.Bytes)return v.push(this.readSFixed32());var H=Bg(this);for(v=v||[];this.pos<
H;)v.push(this.readSFixed32());return v},readPackedFixed64:function(v){if(this.type!==jf.Bytes)return v.push(this.readFixed64());var H=Bg(this);for(v=v||[];this.pos<H;)v.push(this.readFixed64());return v},readPackedSFixed64:function(v){if(this.type!==jf.Bytes)return v.push(this.readSFixed64());var H=Bg(this);for(v=v||[];this.pos<H;)v.push(this.readSFixed64());return v},skip:function(v){v&=7;if(v===jf.Varint)for(;127<this.buf[this.pos++];);else if(v===jf.Bytes)this.pos=this.readVarint()+this.pos;else if(v===
jf.Fixed32)this.pos+=4;else{if(v!==jf.Fixed64)throw Error("Unimplemented type: "+v);this.pos+=8}},writeTag:function(v,H){this.writeVarint(v<<3|H)},realloc:function(v){for(var H=this.length||16;H<this.pos+v;)H*=2;H!==this.length&&(v=new Uint8Array(H),v.set(this.buf),this.buf=v,this.length=H)},finish:function(){return this.length=this.pos,this.pos=0,this.buf.subarray(0,this.length)},writeFixed32:function(v){this.realloc(4);Qg(this.buf,v,this.pos);this.pos+=4},writeSFixed32:function(v){this.realloc(4);
Qg(this.buf,v,this.pos);this.pos+=4},writeFixed64:function(v){this.realloc(8);Qg(this.buf,-1&v,this.pos);Qg(this.buf,Math.floor(1/4294967296*v),this.pos+4);this.pos+=8},writeSFixed64:function(v){this.realloc(8);Qg(this.buf,-1&v,this.pos);Qg(this.buf,Math.floor(1/4294967296*v),this.pos+4);this.pos+=8},writeVarint:function(v){268435455<(v=+v||0)||0>v?function(H,P){var ia,xa;if(0<=H?(ia=H%4294967296|0,xa=H/4294967296|0):(xa=~(-H/4294967296),4294967295^(ia=~(-H%4294967296))?ia=ia+1|0:(ia=0,xa=xa+1|0)),
1.8446744073709552E19<=H||-1.8446744073709552E19>H)throw Error("Given varint doesn't fit into 10 bytes");P.realloc(10);(function(Aa,Ra,bb){bb.buf[bb.pos++]=127&Aa|128;Aa>>>=7;bb.buf[bb.pos++]=127&Aa|128;Aa>>>=7;bb.buf[bb.pos++]=127&Aa|128;Aa>>>=7;bb.buf[bb.pos++]=127&Aa|128;bb.buf[bb.pos]=127&Aa>>>7})(ia,0,P);(function(Aa,Ra){Ra.buf[Ra.pos++]|=(7&Aa)<<4|((Aa>>>=3)?128:0);Aa&&(Ra.buf[Ra.pos++]=127&Aa|((Aa>>>=7)?128:0),Aa&&(Ra.buf[Ra.pos++]=127&Aa|((Aa>>>=7)?128:0),Aa&&(Ra.buf[Ra.pos++]=127&Aa|((Aa>>>=
7)?128:0),Aa&&(Ra.buf[Ra.pos++]=127&Aa|((Aa>>>=7)?128:0),Aa&&(Ra.buf[Ra.pos++]=127&Aa)))))})(xa,P)}(v,this):(this.realloc(4),this.buf[this.pos++]=127&v|(127<v?128:0),127>=v||(this.buf[this.pos++]=127&(v>>>=7)|(127<v?128:0),127>=v||(this.buf[this.pos++]=127&(v>>>=7)|(127<v?128:0),127>=v||(this.buf[this.pos++]=v>>>7&127))))},writeSVarint:function(v){this.writeVarint(0>v?2*-v-1:2*v)},writeBoolean:function(v){this.writeVarint(!!v)},writeString:function(v){v=String(v);this.realloc(4*v.length);this.pos++;
for(var H=this.pos,P=this.buf,ia=this.pos,xa,Aa,Ra=0;Ra<v.length;Ra++){if(55295<(xa=v.charCodeAt(Ra))&&57344>xa){if(!Aa){56319<xa||Ra+1===v.length?(P[ia++]=239,P[ia++]=191,P[ia++]=189):Aa=xa;continue}if(56320>xa){P[ia++]=239;P[ia++]=191;P[ia++]=189;Aa=xa;continue}xa=Aa-55296<<10|xa-56320|65536;Aa=null}else Aa&&(P[ia++]=239,P[ia++]=191,P[ia++]=189,Aa=null);128>xa?P[ia++]=xa:(2048>xa?P[ia++]=xa>>6|192:(65536>xa?P[ia++]=xa>>12|224:(P[ia++]=xa>>18|240,P[ia++]=xa>>12&63|128),P[ia++]=xa>>6&63|128),P[ia++]=
63&xa|128)}this.pos=ia;P=this.pos-H;128<=P&&Nh(H,P,this);this.pos=H-1;this.writeVarint(P);this.pos+=P},writeFloat:function(v){this.realloc(4);mc(this.buf,v,this.pos,!0,23,4);this.pos+=4},writeDouble:function(v){this.realloc(8);mc(this.buf,v,this.pos,!0,52,8);this.pos+=8},writeBytes:function(v){var H=v.length;this.writeVarint(H);this.realloc(H);for(var P=0;P<H;P++)this.buf[this.pos++]=v[P]},writeRawMessage:function(v,H){this.pos++;var P=this.pos;v(H,this);v=this.pos-P;128<=v&&Nh(P,v,this);this.pos=
P-1;this.writeVarint(v);this.pos+=v},writeMessage:function(v,H,P){this.writeTag(v,jf.Bytes);this.writeRawMessage(H,P)},writePackedVarint:function(v,H){H.length&&this.writeMessage(v,Oh,H)},writePackedSVarint:function(v,H){H.length&&this.writeMessage(v,Wi,H)},writePackedBoolean:function(v,H){H.length&&this.writeMessage(v,fi,H)},writePackedFloat:function(v,H){H.length&&this.writeMessage(v,ui,H)},writePackedDouble:function(v,H){H.length&&this.writeMessage(v,Ji,H)},writePackedFixed32:function(v,H){H.length&&
this.writeMessage(v,fh,H)},writePackedSFixed32:function(v,H){H.length&&this.writeMessage(v,Ph,H)},writePackedFixed64:function(v,H){H.length&&this.writeMessage(v,Qh,H)},writePackedSFixed64:function(v,H){H.length&&this.writeMessage(v,vi,H)},writeBytesField:function(v,H){this.writeTag(v,jf.Bytes);this.writeBytes(H)},writeFixed32Field:function(v,H){this.writeTag(v,jf.Fixed32);this.writeFixed32(H)},writeSFixed32Field:function(v,H){this.writeTag(v,jf.Fixed32);this.writeSFixed32(H)},writeFixed64Field:function(v,
H){this.writeTag(v,jf.Fixed64);this.writeFixed64(H)},writeSFixed64Field:function(v,H){this.writeTag(v,jf.Fixed64);this.writeSFixed64(H)},writeVarintField:function(v,H){this.writeTag(v,jf.Varint);this.writeVarint(H)},writeSVarintField:function(v,H){this.writeTag(v,jf.Varint);this.writeSVarint(H)},writeStringField:function(v,H){this.writeTag(v,jf.Bytes);this.writeString(H)},writeFloatField:function(v,H){this.writeTag(v,jf.Fixed32);this.writeFloat(H)},writeDoubleField:function(v,H){this.writeTag(v,jf.Fixed64);
this.writeDouble(H)},writeBooleanField:function(v,H){this.writeVarintField(v,!!H)}};var yc=function(v,H){var P=H.pixelRatio,ia=H.version,xa=H.stretchX,Aa=H.stretchY;H=H.content;this.paddedRect=v;this.pixelRatio=P;this.stretchX=xa;this.stretchY=Aa;this.content=H;this.version=ia},Lc={tl:{configurable:!0},br:{configurable:!0},tlbr:{configurable:!0},displaySize:{configurable:!0}};Lc.tl.get=function(){return[this.paddedRect.x+1,this.paddedRect.y+1]};Lc.br.get=function(){return[this.paddedRect.x+this.paddedRect.w-
1,this.paddedRect.y+this.paddedRect.h-1]};Lc.tlbr.get=function(){return this.tl.concat(this.br)};Lc.displaySize.get=function(){return[(this.paddedRect.w-2)/this.pixelRatio,(this.paddedRect.h-2)/this.pixelRatio]};Object.defineProperties(yc.prototype,Lc);var Tc=function(v,H){var P={},ia={};this.haveRenderCallbacks=[];var xa=[];this.addImages(v,P,xa);this.addImages(H,ia,xa);xa=wi(xa);xa=new Ag({width:xa.w||1,height:xa.h||1});for(var Aa in v){var Ra=v[Aa],bb=P[Aa].paddedRect;Ag.copy(Ra.data,xa,{x:0,y:0},
{x:bb.x+1,y:bb.y+1},Ra.data)}for(var ob in H){v=H[ob];Ra=ia[ob].paddedRect;Aa=Ra.x+1;Ra=Ra.y+1;bb=v.data.width;var sb=v.data.height;Ag.copy(v.data,xa,{x:0,y:0},{x:Aa,y:Ra},v.data);Ag.copy(v.data,xa,{x:0,y:sb-1},{x:Aa,y:Ra-1},{width:bb,height:1});Ag.copy(v.data,xa,{x:0,y:0},{x:Aa,y:Ra+sb},{width:bb,height:1});Ag.copy(v.data,xa,{x:bb-1,y:0},{x:Aa-1,y:Ra},{width:1,height:sb});Ag.copy(v.data,xa,{x:0,y:0},{x:Aa+bb,y:Ra},{width:1,height:sb})}this.image=xa;this.iconPositions=P;this.patternPositions=ia};
Tc.prototype.addImages=function(v,H,P){for(var ia in v){var xa=v[ia],Aa={x:0,y:0,w:xa.data.width+2,h:xa.data.height+2};P.push(Aa);H[ia]=new yc(Aa,xa);xa.hasRenderCallback&&this.haveRenderCallbacks.push(ia)}};Tc.prototype.patchUpdatedImages=function(v,H){for(var P in v.dispatchRenderCallbacks(this.haveRenderCallbacks),v.updatedImages)this.patchUpdatedImage(this.iconPositions[P],v.getImage(P),H),this.patchUpdatedImage(this.patternPositions[P],v.getImage(P),H)};Tc.prototype.patchUpdatedImage=function(v,
H,P){v&&H&&v.version!==H.version&&(v.version=H.version,v=v.tl,P.update(H.data,void 0,{x:v[0],y:v[1]}))};Hc("ImagePosition",yc);Hc("ImageAtlas",Tc);var Sc={horizontal:1,vertical:2,horizontalOnly:3},jd=function(){this.scale=1;this.fontStack="";this.imageName=null};jd.forText=function(v,H){var P=new jd;return P.scale=v||1,P.fontStack=H,P};jd.forImage=function(v){var H=new jd;return H.imageName=v,H};var hc=function(){this.text="";this.sectionIndex=[];this.sections=[];this.imageSectionID=null};hc.fromFeature=
function(v,H){for(var P=new hc,ia=0;ia<v.sections.length;ia++){var xa=v.sections[ia];xa.image?P.addImageSection(xa):P.addTextSection(xa,H)}return P};hc.prototype.length=function(){return this.text.length};hc.prototype.getSection=function(v){return this.sections[this.sectionIndex[v]]};hc.prototype.getSectionIndex=function(v){return this.sectionIndex[v]};hc.prototype.getCharCode=function(v){return this.text.charCodeAt(v)};hc.prototype.verticalizePunctuation=function(){for(var v=this.text,H="",P=0;P<
v.length;P++){var ia=v.charCodeAt(P+1)||null,xa=v.charCodeAt(P-1)||null;H+=ia&&Hd(ia)&&!Wb[v[P+1]]||xa&&Hd(xa)&&!Wb[v[P-1]]||!Wb[v[P]]?v[P]:Wb[v[P]]}this.text=H};hc.prototype.trim=function(){for(var v=0,H=0;H<this.text.length&&wc[this.text.charCodeAt(H)];H++)v++;H=this.text.length;for(var P=this.text.length-1;0<=P&&P>=v&&wc[this.text.charCodeAt(P)];P--)H--;this.text=this.text.substring(v,H);this.sectionIndex=this.sectionIndex.slice(v,H)};hc.prototype.substring=function(v,H){var P=new hc;return P.text=
this.text.substring(v,H),P.sectionIndex=this.sectionIndex.slice(v,H),P.sections=this.sections,P};hc.prototype.toString=function(){return this.text};hc.prototype.getMaxScale=function(){var v=this;return this.sectionIndex.reduce(function(H,P){return Math.max(H,v.sections[P].scale)},0)};hc.prototype.addTextSection=function(v,H){this.text+=v.text;this.sections.push(jd.forText(v.scale,v.fontStack||H));H=this.sections.length-1;for(var P=0;P<v.text.length;++P)this.sectionIndex.push(H)};hc.prototype.addImageSection=
function(v){v=v.image?v.image.name:"";if(0!==v.length){var H=this.getNextImageSectionCharCode();H?(this.text+=String.fromCharCode(H),this.sections.push(jd.forImage(v)),this.sectionIndex.push(this.sections.length-1)):z("Reached maximum number of images 6401")}else z("Can't add FormattedSection with an empty image.")};hc.prototype.getNextImageSectionCharCode=function(){return this.imageSectionID?63743<=this.imageSectionID?null:++this.imageSectionID:(this.imageSectionID=57344,this.imageSectionID)};var wc=
{9:!0,10:!0,11:!0,12:!0,13:!0,32:!0},Mc={10:!0,32:!0,38:!0,40:!0,41:!0,43:!0,45:!0,47:!0,173:!0,183:!0,8203:!0,8208:!0,8211:!0,8231:!0},od=function(v){function H(P,ia,xa,Aa){v.call(this,P,ia);this.angle=xa;void 0!==Aa&&(this.segment=Aa)}return v&&(H.__proto__=v),(H.prototype=Object.create(v&&v.prototype)).constructor=H,H.prototype.clone=function(){return new H(this.x,this.y,this.angle,this.segment)},H}(Bd);Hc("Anchor",od);var md=Object.freeze({__proto__:null,getSizeData:Mf,evaluateSizeForFeature:ji,
evaluateSizeForZoom:Zi,SIZE_PACK_FACTOR:128}),qd=function(v,H,P,ia,xa,Aa,Ra,bb,ob,sb){if(this.boxStartIndex=v.length,ob)H=Aa.top,P=Aa.bottom,(ia=Aa.collisionPadding)&&(H-=ia[1],P+=ia[3]),H=P-H,0<H&&(H=Math.max(10,H),this.circleDiameter=H);else{ob=Aa.top*Ra-bb;var Hb=Aa.bottom*Ra+bb,Vb=Aa.left*Ra-bb;bb=Aa.right*Ra+bb;Aa=Aa.collisionPadding;if(Aa&&(Vb-=Aa[0]*Ra,ob-=Aa[1]*Ra,bb+=Aa[2]*Ra,Hb+=Aa[3]*Ra),sb){Aa=new Bd(Vb,ob);Ra=new Bd(bb,ob);var jc=new Bd(Vb,Hb);Hb=new Bd(bb,Hb);sb=sb*Math.PI/180;Aa._rotate(sb);
Ra._rotate(sb);jc._rotate(sb);Hb._rotate(sb);Vb=Math.min(Aa.x,Ra.x,jc.x,Hb.x);bb=Math.max(Aa.x,Ra.x,jc.x,Hb.x);ob=Math.min(Aa.y,Ra.y,jc.y,Hb.y);Hb=Math.max(Aa.y,Ra.y,jc.y,Hb.y)}v.emplaceBack(H.x,H.y,Vb,ob,bb,Hb,P,ia,xa)}this.boxEndIndex=v.length},ed=function(v,H){if(void 0===v&&(v=[]),void 0===H&&(H=Sg),this.data=v,this.length=this.data.length,this.compare=H,0<this.length)for(v=(this.length>>1)-1;0<=v;v--)this._down(v)};ed.prototype.push=function(v){this.data.push(v);this.length++;this._up(this.length-
1)};ed.prototype.pop=function(){if(0!==this.length){var v=this.data[0],H=this.data.pop();return this.length--,0<this.length&&(this.data[0]=H,this._down(0)),v}};ed.prototype.peek=function(){return this.data[0]};ed.prototype._up=function(v){for(var H=this.data,P=this.compare,ia=H[v];0<v;){var xa=v-1>>1,Aa=H[xa];if(0<=P(ia,Aa))break;H[v]=Aa;v=xa}H[v]=ia};ed.prototype._down=function(v){for(var H=this.data,P=this.compare,ia=this.length>>1,xa=H[v];v<ia;){var Aa=1+(v<<1),Ra=H[Aa],bb=Aa+1;if(bb<this.length&&
0>P(H[bb],Ra)&&(Aa=bb,Ra=H[bb]),0<=P(Ra,xa))break;H[v]=Ra;v=Aa}H[v]=xa};var Wd=Number.POSITIVE_INFINITY,we=gi.VectorTileFeature.types,Ke=[{name:"a_fade_opacity",components:1,type:"Uint8",offset:0}],Te=function(v){this.layoutVertexArray=new Mi;this.indexArray=new Vh;this.programConfigurations=v;this.segments=new pg;this.dynamicLayoutVertexArray=new Fi;this.opacityVertexArray=new Hh;this.placedSymbolArray=new Ck};Te.prototype.isEmpty=function(){return 0===this.layoutVertexArray.length&&0===this.indexArray.length&&
0===this.dynamicLayoutVertexArray.length&&0===this.opacityVertexArray.length};Te.prototype.upload=function(v,H,P,ia){this.isEmpty()||(P&&(this.layoutVertexBuffer=v.createVertexBuffer(this.layoutVertexArray,ib.members),this.indexBuffer=v.createIndexBuffer(this.indexArray,H),this.dynamicLayoutVertexBuffer=v.createVertexBuffer(this.dynamicLayoutVertexArray,rb.members,!0),this.opacityVertexBuffer=v.createVertexBuffer(this.opacityVertexArray,Ke,!0),this.opacityVertexBuffer.itemSize=1),(P||ia)&&this.programConfigurations.upload(v))};
Te.prototype.destroy=function(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.dynamicLayoutVertexBuffer.destroy(),this.opacityVertexBuffer.destroy())};Hc("SymbolBuffers",Te);var Se=function(v,H,P){this.layoutVertexArray=new v;this.layoutAttributes=H;this.indexArray=new P;this.segments=new pg;this.collisionVertexArray=new Uh};Se.prototype.upload=function(v){this.layoutVertexBuffer=v.createVertexBuffer(this.layoutVertexArray,
this.layoutAttributes);this.indexBuffer=v.createIndexBuffer(this.indexArray);this.collisionVertexBuffer=v.createVertexBuffer(this.collisionVertexArray,yb.members,!0)};Se.prototype.destroy=function(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.segments.destroy(),this.collisionVertexBuffer.destroy())};Hc("CollisionBuffers",Se);var ne=function(v){this.collisionBoxArray=v.collisionBoxArray;this.zoom=v.zoom;this.overscaling=v.overscaling;this.layers=v.layers;
this.layerIds=this.layers.map(function(xa){return xa.id});this.index=v.index;this.pixelRatio=v.pixelRatio;this.sourceLayerIndex=v.sourceLayerIndex;this.hasRTLText=this.hasPattern=!1;this.sortKeyRanges=[];this.collisionCircleArray=[];this.placementInvProjMatrix=de([]);this.placementViewportMatrix=de([]);var H=this.layers[0]._unevaluatedLayout._values;this.textSizeData=Mf(this.zoom,H["text-size"]);this.iconSizeData=Mf(this.zoom,H["icon-size"]);H=this.layers[0].layout;var P=H.get("symbol-sort-key"),
ia=H.get("symbol-z-order");this.sortFeaturesByKey="viewport-y"!==ia&&void 0!==P.constantOr(1);this.sortFeaturesByY=("viewport-y"===ia||"auto"===ia&&!this.sortFeaturesByKey)&&(H.get("text-allow-overlap")||H.get("icon-allow-overlap")||H.get("text-ignore-placement")||H.get("icon-ignore-placement"));"point"===H.get("symbol-placement")&&(this.writingModes=H.get("text-writing-mode").map(function(xa){return Sc[xa]}));this.stateDependentLayerIds=this.layers.filter(function(xa){return xa.isStateDependent()}).map(function(xa){return xa.id});
this.sourceID=v.sourceID};ne.prototype.createArrays=function(){this.text=new Te(new ch(ib.members,this.layers,this.zoom,function(v){return/^text/.test(v)}));this.icon=new Te(new ch(ib.members,this.layers,this.zoom,function(v){return/^icon/.test(v)}));this.glyphOffsetArray=new Cj;this.lineVertexArray=new Bj;this.symbolInstances=new lk};ne.prototype.calculateGlyphDependencies=function(v,H,P,ia,xa){for(var Aa=0;Aa<v.length;Aa++)if(H[v.charCodeAt(Aa)]=!0,(P||ia)&&xa){var Ra=Wb[v.charAt(Aa)];Ra&&(H[Ra.charCodeAt(0)]=
!0)}};ne.prototype.populate=function(v,H,P){var ia=this.layers[0],xa=ia.layout,Aa=xa.get("text-font"),Ra=xa.get("text-field"),bb=xa.get("icon-image");Ra=("constant"!==Ra.value.kind||Ra.value.value instanceof Ae&&!Ra.value.value.isEmpty()||0<Ra.value.value.toString().length)&&("constant"!==Aa.value.kind||0<Aa.value.value.length);bb="constant"!==bb.value.kind||!!bb.value.value||0<Object.keys(bb.parameters).length;var ob=xa.get("symbol-sort-key");if(this.features=[],Ra||bb){var sb=H.iconDependencies,
Hb=H.glyphDependencies;H=H.availableImages;for(var Vb=new Df(this.zoom),jc=0;jc<v.length;jc+=1){var ec=v[jc],Nb=ec.feature,Mb=ec.id,ac=ec.index,Ic=ec.sourceLayerIndex;ec=ia._featureFilter.needGeometry;var Uc={type:Nb.type,id:Mb,properties:Nb.properties,geometry:ec?Xd(Nb):[]};if(ia._featureFilter.filter(Vb,Uc,P)){ec||(Uc.geometry=Xd(Nb));ec=void 0;if(Ra){var Kc=ia.getValueAndResolveTokens("text-field",Uc,P,H);Kc=Ae.factory(Kc);rd(Kc)&&(this.hasRTLText=!0);(!this.hasRTLText||"unavailable"===tg||this.hasRTLText&&
Ng.isParsed())&&(ec=uh(Kc,ia,Uc))}Kc=void 0;bb&&(Kc=ia.getValueAndResolveTokens("icon-image",Uc,P,H),Kc=Kc instanceof $e?Kc:$e.fromString(Kc));if(ec||Kc){var wd=this.sortFeaturesByKey?ob.evaluate(Uc,{},P):void 0;Nb={id:Mb,text:ec,icon:Kc,index:ac,sourceLayerIndex:Ic,geometry:Xd(Nb),properties:Nb.properties,type:we[Nb.type],sortKey:wd};if(this.features.push(Nb),Kc&&(sb[Kc.name]=!0),ec)for(Nb=Aa.evaluate(Uc,{},P).join(","),Mb="map"===xa.get("text-rotation-alignment")&&"point"!==xa.get("symbol-placement"),
this.allowVerticalPlacement=this.writingModes&&0<=this.writingModes.indexOf(Sc.vertical),ac=0,Uc=ec.sections;ac<Uc.length;ac+=1)Ic=Uc[ac],Ic.image?sb[Ic.image.name]=!0:(Kc=kb(ec.toString()),wd=Ic.fontStack||Nb,wd=Hb[wd]=Hb[wd]||{},this.calculateGlyphDependencies(Ic.text,wd,Mb,this.allowVerticalPlacement,Kc))}}}"line"===xa.get("symbol-placement")&&(this.features=function(Dd){function Qd(jh,Dg,Xf){var bf=Pe[jh];return delete Pe[jh],Pe[Dg]=bf,ze[bf].geometry[0].pop(),ze[bf].geometry[0]=ze[bf].geometry[0].concat(Xf[0]),
bf}function Nd(jh,Dg,Xf){var bf=Je[Dg];return delete Je[Dg],Je[jh]=bf,ze[bf].geometry[0].shift(),ze[bf].geometry[0]=Xf[0].concat(ze[bf].geometry[0]),bf}function re(jh,Dg,Xf){Dg=Xf?Dg[0][Dg[0].length-1]:Dg[0][0];return jh+":"+Dg.x+":"+Dg.y}for(var Je={},Pe={},ze=[],Ie=0,Ye=0;Ye<Dd.length;Ye++){var qe=Dd[Ye],me=qe.geometry;if(qe=qe.text?qe.text.toString():null){var se=re(qe,me),rf=re(qe,me,!0);if(se in Pe&&rf in Je&&Pe[se]!==Je[rf]){me=Nd(se,rf,me);var Wf=Qd(se,rf,ze[me].geometry);delete Je[se];delete Pe[rf];
Pe[re(qe,ze[Wf].geometry,!0)]=Wf;ze[me].geometry=null}else se in Pe?Qd(se,rf,me):rf in Je?Nd(se,rf,me):(ze.push(Dd[Ye]),Ie++,Je[se]=Ie-1,Pe[rf]=Ie-1)}else ze.push(Dd[Ye]),Ie++}return ze.filter(function(jh){return jh.geometry})}(this.features));this.sortFeaturesByKey&&this.features.sort(function(Dd,Qd){return Dd.sortKey-Qd.sortKey})}};ne.prototype.update=function(v,H,P){this.stateDependentLayers.length&&(this.text.programConfigurations.updatePaintArrays(v,H,this.layers,P),this.icon.programConfigurations.updatePaintArrays(v,
H,this.layers,P))};ne.prototype.isEmpty=function(){return 0===this.symbolInstances.length&&!this.hasRTLText};ne.prototype.uploadPending=function(){return!this.uploaded||this.text.programConfigurations.needsUpload||this.icon.programConfigurations.needsUpload};ne.prototype.upload=function(v){!this.uploaded&&this.hasDebugData()&&(this.textCollisionBox.upload(v),this.iconCollisionBox.upload(v));this.text.upload(v,this.sortFeaturesByY,!this.uploaded,this.text.programConfigurations.needsUpload);this.icon.upload(v,
this.sortFeaturesByY,!this.uploaded,this.icon.programConfigurations.needsUpload);this.uploaded=!0};ne.prototype.destroyDebugData=function(){this.textCollisionBox.destroy();this.iconCollisionBox.destroy()};ne.prototype.destroy=function(){this.text.destroy();this.icon.destroy();this.hasDebugData()&&this.destroyDebugData()};ne.prototype.addToLineVertexArray=function(v,H){var P=this.lineVertexArray.length;if(void 0!==v.segment){for(var ia=v.dist(H[v.segment+1]),xa=v.dist(H[v.segment]),Aa={},Ra=v.segment+
1;Ra<H.length;Ra++)Aa[Ra]={x:H[Ra].x,y:H[Ra].y,tileUnitDistanceFromAnchor:ia},Ra<H.length-1&&(ia+=H[Ra+1].dist(H[Ra]));for(v=v.segment||0;0<=v;v--)Aa[v]={x:H[v].x,y:H[v].y,tileUnitDistanceFromAnchor:xa},0<v&&(xa+=H[v-1].dist(H[v]));for(xa=0;xa<H.length;xa++)v=Aa[xa],this.lineVertexArray.emplaceBack(v.x,v.y,v.tileUnitDistanceFromAnchor)}return{lineStartIndex:P,lineLength:this.lineVertexArray.length-P}};ne.prototype.addSymbols=function(v,H,P,ia,xa,Aa,Ra,bb,ob,sb,Hb,Vb){xa=v.indexArray;for(var jc=v.layoutVertexArray,
ec=v.segments.prepareSegment(4*H.length,jc,xa,Aa.sortKey),Nb=this.glyphOffsetArray.length,Mb=ec.vertexLength,ac=this.allowVerticalPlacement&&Ra===Sc.vertical?Math.PI/2:0,Ic=Aa.text&&Aa.text.sections,Uc=0;Uc<H.length;Uc++){var Kc=H[Uc],wd=Kc.tl,Dd=Kc.tr,Qd=Kc.bl,Nd=Kc.br,re=Kc.tex,Je=Kc.pixelOffsetTL,Pe=Kc.pixelOffsetBR,ze=Kc.minFontScaleX,Ie=Kc.minFontScaleY,Ye=Kc.glyphOffset,qe=Kc.isSDF;Kc=Kc.sectionIndex;var me=ec.vertexLength,se=Ye[1];Xc(jc,bb.x,bb.y,wd.x,se+wd.y,re.x,re.y,P,qe,Je.x,Je.y,ze,Ie);
Xc(jc,bb.x,bb.y,Dd.x,se+Dd.y,re.x+re.w,re.y,P,qe,Pe.x,Je.y,ze,Ie);Xc(jc,bb.x,bb.y,Qd.x,se+Qd.y,re.x,re.y+re.h,P,qe,Je.x,Pe.y,ze,Ie);Xc(jc,bb.x,bb.y,Nd.x,se+Nd.y,re.x+re.w,re.y+re.h,P,qe,Pe.x,Pe.y,ze,Ie);fd(v.dynamicLayoutVertexArray,bb,ac);xa.emplaceBack(me,me+1,me+2);xa.emplaceBack(me+1,me+2,me+3);ec.vertexLength+=4;ec.primitiveLength+=2;this.glyphOffsetArray.emplaceBack(Ye[0]);Uc!==H.length-1&&Kc===H[Uc+1].sectionIndex||v.programConfigurations.populatePaintArrays(jc.length,Aa,Aa.index,{},Vb,Ic&&
Ic[Kc])}v.placedSymbolArray.emplaceBack(bb.x,bb.y,Nb,this.glyphOffsetArray.length-Nb,Mb,ob,sb,bb.segment,P?P[0]:0,P?P[1]:0,ia[0],ia[1],Ra,0,!1,0,Hb)};ne.prototype._addCollisionDebugVertex=function(v,H,P,ia,xa,Aa){return H.emplaceBack(0,0),v.emplaceBack(P.x,P.y,ia,xa,Math.round(Aa.x),Math.round(Aa.y))};ne.prototype.addCollisionDebugVertices=function(v,H,P,ia,xa,Aa,Ra){var bb=xa.segments.prepareSegment(4,xa.layoutVertexArray,xa.indexArray),ob=bb.vertexLength,sb=xa.layoutVertexArray,Hb=xa.collisionVertexArray,
Vb=Ra.anchorX;Ra=Ra.anchorY;this._addCollisionDebugVertex(sb,Hb,Aa,Vb,Ra,new Bd(v,H));this._addCollisionDebugVertex(sb,Hb,Aa,Vb,Ra,new Bd(P,H));this._addCollisionDebugVertex(sb,Hb,Aa,Vb,Ra,new Bd(P,ia));this._addCollisionDebugVertex(sb,Hb,Aa,Vb,Ra,new Bd(v,ia));bb.vertexLength+=4;v=xa.indexArray;v.emplaceBack(ob,ob+1);v.emplaceBack(ob+1,ob+2);v.emplaceBack(ob+2,ob+3);v.emplaceBack(ob+3,ob);bb.primitiveLength+=4};ne.prototype.addDebugCollisionBoxes=function(v,H,P,ia){for(;v<H;v++){var xa=this.collisionBoxArray.get(v);
this.addCollisionDebugVertices(xa.x1,xa.y1,xa.x2,xa.y2,ia?this.textCollisionBox:this.iconCollisionBox,xa.anchorPoint,P)}};ne.prototype.generateCollisionDebugBuffers=function(){this.hasDebugData()&&this.destroyDebugData();this.textCollisionBox=new Se(Ih,Gb.members,ni);this.iconCollisionBox=new Se(Ih,Gb.members,ni);for(var v=0;v<this.symbolInstances.length;v++){var H=this.symbolInstances.get(v);this.addDebugCollisionBoxes(H.textBoxStartIndex,H.textBoxEndIndex,H,!0);this.addDebugCollisionBoxes(H.verticalTextBoxStartIndex,
H.verticalTextBoxEndIndex,H,!0);this.addDebugCollisionBoxes(H.iconBoxStartIndex,H.iconBoxEndIndex,H,!1);this.addDebugCollisionBoxes(H.verticalIconBoxStartIndex,H.verticalIconBoxEndIndex,H,!1)}};ne.prototype._deserializeCollisionBoxesForSymbol=function(v,H,P,ia,xa,Aa,Ra,bb,ob){for(var sb={};H<P;){H=v.get(H);sb.textBox={x1:H.x1,y1:H.y1,x2:H.x2,y2:H.y2,anchorPointX:H.anchorPointX,anchorPointY:H.anchorPointY};sb.textFeatureIndex=H.featureIndex;break}for(;ia<xa;){ia=v.get(ia);sb.verticalTextBox={x1:ia.x1,
y1:ia.y1,x2:ia.x2,y2:ia.y2,anchorPointX:ia.anchorPointX,anchorPointY:ia.anchorPointY};sb.verticalTextFeatureIndex=ia.featureIndex;break}for(;Aa<Ra;){Aa=v.get(Aa);sb.iconBox={x1:Aa.x1,y1:Aa.y1,x2:Aa.x2,y2:Aa.y2,anchorPointX:Aa.anchorPointX,anchorPointY:Aa.anchorPointY};sb.iconFeatureIndex=Aa.featureIndex;break}for(;bb<ob;){v=v.get(bb);sb.verticalIconBox={x1:v.x1,y1:v.y1,x2:v.x2,y2:v.y2,anchorPointX:v.anchorPointX,anchorPointY:v.anchorPointY};sb.verticalIconFeatureIndex=v.featureIndex;break}return sb};
ne.prototype.deserializeCollisionBoxes=function(v){this.collisionArrays=[];for(var H=0;H<this.symbolInstances.length;H++){var P=this.symbolInstances.get(H);this.collisionArrays.push(this._deserializeCollisionBoxesForSymbol(v,P.textBoxStartIndex,P.textBoxEndIndex,P.verticalTextBoxStartIndex,P.verticalTextBoxEndIndex,P.iconBoxStartIndex,P.iconBoxEndIndex,P.verticalIconBoxStartIndex,P.verticalIconBoxEndIndex))}};ne.prototype.hasTextData=function(){return 0<this.text.segments.get().length};ne.prototype.hasIconData=
function(){return 0<this.icon.segments.get().length};ne.prototype.hasDebugData=function(){return this.textCollisionBox&&this.iconCollisionBox};ne.prototype.hasTextCollisionBoxData=function(){return this.hasDebugData()&&0<this.textCollisionBox.segments.get().length};ne.prototype.hasIconCollisionBoxData=function(){return this.hasDebugData()&&0<this.iconCollisionBox.segments.get().length};ne.prototype.addIndicesForPlacedSymbol=function(v,H){var P=v.placedSymbolArray.get(H);H=P.vertexStartIndex+4*P.numGlyphs;
for(P=P.vertexStartIndex;P<H;P+=4)v.indexArray.emplaceBack(P,P+1,P+2),v.indexArray.emplaceBack(P+1,P+2,P+3)};ne.prototype.getSortedSymbolIndexes=function(v){if(this.sortedAngle===v&&void 0!==this.symbolInstanceIndexes)return this.symbolInstanceIndexes;var H=Math.sin(v);v=Math.cos(v);for(var P=[],ia=[],xa=[],Aa=0;Aa<this.symbolInstances.length;++Aa){xa.push(Aa);var Ra=this.symbolInstances.get(Aa);P.push(0|Math.round(H*Ra.anchorX+v*Ra.anchorY));ia.push(Ra.featureIndex)}return xa.sort(function(bb,ob){return P[bb]-
P[ob]||ia[ob]-ia[bb]}),xa};ne.prototype.addToSortKeyRanges=function(v,H){var P=this.sortKeyRanges[this.sortKeyRanges.length-1];P&&P.sortKey===H?P.symbolInstanceEnd=v+1:this.sortKeyRanges.push({sortKey:H,symbolInstanceStart:v,symbolInstanceEnd:v+1})};ne.prototype.sortFeatures=function(v){var H=this;if(this.sortFeaturesByY&&this.sortedAngle!==v&&!(1<this.text.segments.get().length||1<this.icon.segments.get().length)){this.symbolInstanceIndexes=this.getSortedSymbolIndexes(v);this.sortedAngle=v;this.text.indexArray.clear();
this.icon.indexArray.clear();this.featureSortOrder=[];v=0;for(var P=this.symbolInstanceIndexes;v<P.length;v+=1){var ia=this.symbolInstances.get(P[v]);this.featureSortOrder.push(ia.featureIndex);[ia.rightJustifiedTextSymbolIndex,ia.centerJustifiedTextSymbolIndex,ia.leftJustifiedTextSymbolIndex].forEach(function(xa,Aa,Ra){0<=xa&&Ra.indexOf(xa)===Aa&&H.addIndicesForPlacedSymbol(H.text,xa)});0<=ia.verticalPlacedTextSymbolIndex&&this.addIndicesForPlacedSymbol(this.text,ia.verticalPlacedTextSymbolIndex);
0<=ia.placedIconSymbolIndex&&this.addIndicesForPlacedSymbol(this.icon,ia.placedIconSymbolIndex);0<=ia.verticalPlacedIconSymbolIndex&&this.addIndicesForPlacedSymbol(this.icon,ia.verticalPlacedIconSymbolIndex)}this.text.indexBuffer&&this.text.indexBuffer.updateData(this.text.indexArray);this.icon.indexBuffer&&this.icon.indexBuffer.updateData(this.icon.indexArray)}};Hc("SymbolBucket",ne,{omit:["layers","collisionBoxArray","features","compareText"]});ne.MAX_GLYPHS=65535;ne.addDynamicAttributes=fd;var Af=
new ih({"symbol-placement":new te(Xb.layout_symbol["symbol-placement"]),"symbol-spacing":new te(Xb.layout_symbol["symbol-spacing"]),"symbol-avoid-edges":new te(Xb.layout_symbol["symbol-avoid-edges"]),"symbol-sort-key":new ae(Xb.layout_symbol["symbol-sort-key"]),"symbol-z-order":new te(Xb.layout_symbol["symbol-z-order"]),"icon-allow-overlap":new te(Xb.layout_symbol["icon-allow-overlap"]),"icon-ignore-placement":new te(Xb.layout_symbol["icon-ignore-placement"]),"icon-optional":new te(Xb.layout_symbol["icon-optional"]),
"icon-rotation-alignment":new te(Xb.layout_symbol["icon-rotation-alignment"]),"icon-size":new ae(Xb.layout_symbol["icon-size"]),"icon-text-fit":new te(Xb.layout_symbol["icon-text-fit"]),"icon-text-fit-padding":new te(Xb.layout_symbol["icon-text-fit-padding"]),"icon-image":new ae(Xb.layout_symbol["icon-image"]),"icon-rotate":new ae(Xb.layout_symbol["icon-rotate"]),"icon-padding":new te(Xb.layout_symbol["icon-padding"]),"icon-keep-upright":new te(Xb.layout_symbol["icon-keep-upright"]),"icon-offset":new ae(Xb.layout_symbol["icon-offset"]),
"icon-anchor":new ae(Xb.layout_symbol["icon-anchor"]),"icon-pitch-alignment":new te(Xb.layout_symbol["icon-pitch-alignment"]),"text-pitch-alignment":new te(Xb.layout_symbol["text-pitch-alignment"]),"text-rotation-alignment":new te(Xb.layout_symbol["text-rotation-alignment"]),"text-field":new ae(Xb.layout_symbol["text-field"]),"text-font":new ae(Xb.layout_symbol["text-font"]),"text-size":new ae(Xb.layout_symbol["text-size"]),"text-max-width":new ae(Xb.layout_symbol["text-max-width"]),"text-line-height":new te(Xb.layout_symbol["text-line-height"]),
"text-letter-spacing":new ae(Xb.layout_symbol["text-letter-spacing"]),"text-justify":new ae(Xb.layout_symbol["text-justify"]),"text-radial-offset":new ae(Xb.layout_symbol["text-radial-offset"]),"text-variable-anchor":new te(Xb.layout_symbol["text-variable-anchor"]),"text-anchor":new ae(Xb.layout_symbol["text-anchor"]),"text-max-angle":new te(Xb.layout_symbol["text-max-angle"]),"text-writing-mode":new te(Xb.layout_symbol["text-writing-mode"]),"text-rotate":new ae(Xb.layout_symbol["text-rotate"]),"text-padding":new te(Xb.layout_symbol["text-padding"]),
"text-keep-upright":new te(Xb.layout_symbol["text-keep-upright"]),"text-transform":new ae(Xb.layout_symbol["text-transform"]),"text-offset":new ae(Xb.layout_symbol["text-offset"]),"text-allow-overlap":new te(Xb.layout_symbol["text-allow-overlap"]),"text-ignore-placement":new te(Xb.layout_symbol["text-ignore-placement"]),"text-optional":new te(Xb.layout_symbol["text-optional"])}),He={paint:new ih({"icon-opacity":new ae(Xb.paint_symbol["icon-opacity"]),"icon-color":new ae(Xb.paint_symbol["icon-color"]),
"icon-halo-color":new ae(Xb.paint_symbol["icon-halo-color"]),"icon-halo-width":new ae(Xb.paint_symbol["icon-halo-width"]),"icon-halo-blur":new ae(Xb.paint_symbol["icon-halo-blur"]),"icon-translate":new te(Xb.paint_symbol["icon-translate"]),"icon-translate-anchor":new te(Xb.paint_symbol["icon-translate-anchor"]),"text-opacity":new ae(Xb.paint_symbol["text-opacity"]),"text-color":new ae(Xb.paint_symbol["text-color"],{runtimeType:le,getOverride:function(v){return v.textColor},hasOverride:function(v){return!!v.textColor}}),
"text-halo-color":new ae(Xb.paint_symbol["text-halo-color"]),"text-halo-width":new ae(Xb.paint_symbol["text-halo-width"]),"text-halo-blur":new ae(Xb.paint_symbol["text-halo-blur"]),"text-translate":new te(Xb.paint_symbol["text-translate"]),"text-translate-anchor":new te(Xb.paint_symbol["text-translate-anchor"])}),layout:Af},uf=function(v){this.type=v.property.overrides?v.property.overrides.runtimeType:nd;this.defaultValue=v};uf.prototype.evaluate=function(v){if(v.formattedSection){var H=this.defaultValue.property.overrides;
if(H&&H.hasOverride(v.formattedSection))return H.getOverride(v.formattedSection)}return v.feature&&v.featureState?this.defaultValue.evaluate(v.feature,v.featureState):this.defaultValue.property.specification.default};uf.prototype.eachChild=function(v){this.defaultValue.isConstant()||v(this.defaultValue.value._styleExpression.expression)};uf.prototype.outputDefined=function(){return!1};uf.prototype.serialize=function(){return null};Hc("FormatSectionOverride",uf,{omit:["defaultValue"]});var Ze=function(v){function H(P){v.call(this,
P,He)}return v&&(H.__proto__=v),(H.prototype=Object.create(v&&v.prototype)).constructor=H,H.prototype.recalculate=function(P,ia){if(v.prototype.recalculate.call(this,P,ia),"auto"===this.layout.get("icon-rotation-alignment")&&(this.layout._values["icon-rotation-alignment"]="point"!==this.layout.get("symbol-placement")?"map":"viewport"),"auto"===this.layout.get("text-rotation-alignment")&&(this.layout._values["text-rotation-alignment"]="point"!==this.layout.get("symbol-placement")?"map":"viewport"),
"auto"===this.layout.get("text-pitch-alignment")&&(this.layout._values["text-pitch-alignment"]=this.layout.get("text-rotation-alignment")),"auto"===this.layout.get("icon-pitch-alignment")&&(this.layout._values["icon-pitch-alignment"]=this.layout.get("icon-rotation-alignment")),"point"===this.layout.get("symbol-placement"))if(P=this.layout.get("text-writing-mode")){ia=[];for(var xa=0;xa<P.length;xa+=1){var Aa=P[xa];0>ia.indexOf(Aa)&&ia.push(Aa)}this.layout._values["text-writing-mode"]=ia}else this.layout._values["text-writing-mode"]=
["horizontal"];this._setPaintOverrides()},H.prototype.getValueAndResolveTokens=function(P,ia,xa,Aa){xa=this.layout.get(P).evaluate(ia,{},xa,Aa);P=this._unevaluatedLayout._values[P];return P.isDataDriven()||cd(P.value)||!xa?xa:function(Ra,bb){return bb.replace(/{([^{}]+)}/g,function(ob,sb){return sb in Ra?String(Ra[sb]):""})}(ia.properties,xa)},H.prototype.createBucket=function(P){return new ne(P)},H.prototype.queryRadius=function(){return 0},H.prototype.queryIntersectsFeature=function(){return!1},
H.prototype._setPaintOverrides=function(){for(var P=0,ia=He.paint.overridableProperties;P<ia.length;P+=1){var xa=ia[P];if(H.hasPaintOverride(this.layout,xa)){var Aa=this.paint.get(xa);var Ra=new uf(Aa);Ra=new nh(Ra,Aa.property.specification);Ra="constant"===Aa.value.kind||"source"===Aa.value.kind?new lh("source",Ra):new Ce("composite",Ra,Aa.value.zoomStops,Aa.value._interpolationType);this.paint._values[xa]=new xf(Aa.property,Ra,Aa.parameters)}}},H.prototype._handleOverridablePaintPropertyUpdate=
function(P,ia,xa){return!(!this.layout||ia.isDataDriven()||xa.isDataDriven())&&H.hasPaintOverride(this.layout,P)},H.hasPaintOverride=function(P,ia){P=P.get("text-field");var xa=He.paint.properties[ia],Aa=!1,Ra=function(ob){for(var sb=0;sb<ob.length;sb+=1)if(xa.overrides&&xa.overrides.hasOverride(ob[sb]))return void(Aa=!0)};if("constant"===P.value.kind&&P.value.value instanceof Ae)Ra(P.value.value.sections);else if("source"===P.value.kind){var bb=function(ob){Aa||(ob instanceof vf&&Y(ob.value)===ue?
Ra(ob.value.sections):ob instanceof Vg?Ra(ob.sections):ob.eachChild(bb))};ia=P.value;ia._styleExpression&&bb(ia._styleExpression.expression)}return Aa},H}(pi),vg={paint:new ih({"background-color":new te(Xb.paint_background["background-color"]),"background-pattern":new Ci(Xb.paint_background["background-pattern"]),"background-opacity":new te(Xb.paint_background["background-opacity"])})},hg=function(v){function H(P){v.call(this,P,vg)}return v&&(H.__proto__=v),(H.prototype=Object.create(v&&v.prototype)).constructor=
H,H}(pi),ki={paint:new ih({"raster-opacity":new te(Xb.paint_raster["raster-opacity"]),"raster-hue-rotate":new te(Xb.paint_raster["raster-hue-rotate"]),"raster-brightness-min":new te(Xb.paint_raster["raster-brightness-min"]),"raster-brightness-max":new te(Xb.paint_raster["raster-brightness-max"]),"raster-saturation":new te(Xb.paint_raster["raster-saturation"]),"raster-contrast":new te(Xb.paint_raster["raster-contrast"]),"raster-resampling":new te(Xb.paint_raster["raster-resampling"]),"raster-fade-duration":new te(Xb.paint_raster["raster-fade-duration"])})},
Sh=function(v){function H(P){v.call(this,P,ki)}return v&&(H.__proto__=v),(H.prototype=Object.create(v&&v.prototype)).constructor=H,H}(pi),Ef=function(v){function H(P){v.call(this,P,{});this.implementation=P}return v&&(H.__proto__=v),(H.prototype=Object.create(v&&v.prototype)).constructor=H,H.prototype.is3D=function(){return"3d"===this.implementation.renderingMode},H.prototype.hasOffscreenPass=function(){return void 0!==this.implementation.prerender},H.prototype.recalculate=function(){},H.prototype.updateTransitions=
function(){},H.prototype.hasTransition=function(){},H.prototype.serialize=function(){},H.prototype.onAdd=function(P){this.implementation.onAdd&&this.implementation.onAdd(P,P.painter.context.gl)},H.prototype.onRemove=function(P){this.implementation.onRemove&&this.implementation.onRemove(P,P.painter.context.gl)},H}(pi),Bf={circle:nj,heatmap:Ff,hillshade:bi,fill:Ek,"fill-extrusion":Xj,line:eb,symbol:Ze,background:hg,raster:Sh},Ig=self.HTMLImageElement,ak=self.HTMLCanvasElement,$i=self.HTMLVideoElement,
lj=self.ImageData,ye=self.ImageBitmap,Ah=function(v,H,P,ia){this.context=v;this.format=P;this.texture=v.gl.createTexture();this.update(H,ia)};Ah.prototype.update=function(v,H,P){var ia=v.width,xa=v.height,Aa=!(this.size&&this.size[0]===ia&&this.size[1]===xa||P),Ra=this.context,bb=Ra.gl;(this.useMipmap=!(!H||!H.useMipmap),bb.bindTexture(bb.TEXTURE_2D,this.texture),Ra.pixelStoreUnpackFlipY.set(!1),Ra.pixelStoreUnpack.set(1),Ra.pixelStoreUnpackPremultiplyAlpha.set(this.format===bb.RGBA&&(!H||!1!==H.premultiply)),
Aa)?(this.size=[ia,xa],v instanceof Ig||v instanceof ak||v instanceof $i||v instanceof lj||ye&&v instanceof ye?bb.texImage2D(bb.TEXTURE_2D,0,this.format,this.format,bb.UNSIGNED_BYTE,v):bb.texImage2D(bb.TEXTURE_2D,0,this.format,ia,xa,0,this.format,bb.UNSIGNED_BYTE,v.data)):(P=P||{x:0,y:0},H=P.x,P=P.y,v instanceof Ig||v instanceof ak||v instanceof $i||v instanceof lj||ye&&v instanceof ye?bb.texSubImage2D(bb.TEXTURE_2D,0,H,P,bb.RGBA,bb.UNSIGNED_BYTE,v):bb.texSubImage2D(bb.TEXTURE_2D,0,H,P,ia,xa,bb.RGBA,
bb.UNSIGNED_BYTE,v.data));this.useMipmap&&this.isSizePowerOfTwo()&&bb.generateMipmap(bb.TEXTURE_2D)};Ah.prototype.bind=function(v,H,P){var ia=this.context.gl;ia.bindTexture(ia.TEXTURE_2D,this.texture);P!==ia.LINEAR_MIPMAP_NEAREST||this.isSizePowerOfTwo()||(P=ia.LINEAR);v!==this.filter&&(ia.texParameteri(ia.TEXTURE_2D,ia.TEXTURE_MAG_FILTER,v),ia.texParameteri(ia.TEXTURE_2D,ia.TEXTURE_MIN_FILTER,P||v),this.filter=v);H!==this.wrap&&(ia.texParameteri(ia.TEXTURE_2D,ia.TEXTURE_WRAP_S,H),ia.texParameteri(ia.TEXTURE_2D,
ia.TEXTURE_WRAP_T,H),this.wrap=H)};Ah.prototype.isSizePowerOfTwo=function(){return this.size[0]===this.size[1]&&0==Math.log(this.size[0])/Math.LN2%1};Ah.prototype.destroy=function(){this.context.gl.deleteTexture(this.texture);this.texture=null};var Tk=function(v){var H=this;this._callback=v;this._triggered=!1;"undefined"!=typeof MessageChannel&&(this._channel=new MessageChannel,this._channel.port2.onmessage=function(){H._triggered=!1;H._callback()})};Tk.prototype.trigger=function(){var v=this;this._triggered||
(this._triggered=!0,this._channel?this._channel.port1.postMessage(!0):setTimeout(function(){v._triggered=!1;v._callback()},0))};Tk.prototype.remove=function(){delete this._channel;this._callback=function(){}};var xi=function(v,H,P){this.target=v;this.parent=H;this.mapId=P;this.callbacks={};this.tasks={};this.taskQueue=[];this.cancelCallbacks={};t(["receive","process"],this);this.invoker=new Tk(this.process);this.target.addEventListener("message",this.receive,!1);this.globalScope=D()?v:self};xi.prototype.send=
function(v,H,P,ia,xa){var Aa=this;void 0===xa&&(xa=!1);var Ra=Math.round(1E18*Math.random()).toString(36).substring(0,10);P&&(this.callbacks[Ra]=P);var bb=B(this.globalScope)?void 0:[];return this.target.postMessage({id:Ra,type:v,hasCallback:!!P,targetMapId:ia,mustQueue:xa,sourceMapId:this.mapId,data:Kd(H,bb)},bb),{cancel:function(){P&&delete Aa.callbacks[Ra];Aa.target.postMessage({id:Ra,type:"\x3ccancel\x3e",targetMapId:ia,sourceMapId:Aa.mapId})}}};xi.prototype.receive=function(v){var H=v.data;!(v=
H.id)||H.targetMapId&&this.mapId!==H.targetMapId||("\x3ccancel\x3e"===H.type?(delete this.tasks[v],H=this.cancelCallbacks[v],delete this.cancelCallbacks[v],H&&H()):D()||H.mustQueue?(this.tasks[v]=H,this.taskQueue.push(v),this.invoker.trigger()):this.processTask(v,H))};xi.prototype.process=function(){if(this.taskQueue.length){var v=this.taskQueue.shift(),H=this.tasks[v];delete this.tasks[v];this.taskQueue.length&&this.invoker.trigger();H&&this.processTask(v,H)}};xi.prototype.processTask=function(v,
H){var P=this;if("\x3cresponse\x3e"===H.type){var ia=this.callbacks[v];delete this.callbacks[v];ia&&(H.error?ia(Ld(H.error)):ia(null,Ld(H.data)))}else{var xa=!1,Aa=B(this.globalScope)?void 0:[];ia=H.hasCallback?function(ob,sb){xa=!0;delete P.cancelCallbacks[v];P.target.postMessage({id:v,type:"\x3cresponse\x3e",sourceMapId:P.mapId,error:ob?Kd(ob):null,data:Kd(sb,Aa)},Aa)}:function(ob){xa=!0};var Ra=null,bb=Ld(H.data);this.parent[H.type]?Ra=this.parent[H.type](H.sourceMapId,bb,ia):this.parent.getWorkerSource?
(Ra=H.type.split("."),Ra=this.parent.getWorkerSource(H.sourceMapId,Ra[0],bb.source)[Ra[1]](bb,ia)):ia(Error("Could not find function "+H.type));!xa&&Ra&&Ra.cancel&&(this.cancelCallbacks[v]=Ra.cancel)}};xi.prototype.remove=function(){this.invoker.remove();this.target.removeEventListener("message",this.receive,!1)};var bg=function(v,H){v&&(H?this.setSouthWest(v).setNorthEast(H):4===v.length?this.setSouthWest([v[0],v[1]]).setNorthEast([v[2],v[3]]):this.setSouthWest(v[0]).setNorthEast(v[1]))};bg.prototype.setNorthEast=
function(v){return this._ne=v instanceof Hf?new Hf(v.lng,v.lat):Hf.convert(v),this};bg.prototype.setSouthWest=function(v){return this._sw=v instanceof Hf?new Hf(v.lng,v.lat):Hf.convert(v),this};bg.prototype.extend=function(v){var H,P=this._sw,ia=this._ne;if(v instanceof Hf)var xa=H=v;else{if(!(v instanceof bg))return Array.isArray(v)?4===v.length||v.every(Array.isArray)?this.extend(bg.convert(v)):this.extend(Hf.convert(v)):this;if(xa=v._ne,!(H=v._sw)||!xa)return this}return P||ia?(P.lng=Math.min(H.lng,
P.lng),P.lat=Math.min(H.lat,P.lat),ia.lng=Math.max(xa.lng,ia.lng),ia.lat=Math.max(xa.lat,ia.lat)):(this._sw=new Hf(H.lng,H.lat),this._ne=new Hf(xa.lng,xa.lat)),this};bg.prototype.getCenter=function(){return new Hf((this._sw.lng+this._ne.lng)/2,(this._sw.lat+this._ne.lat)/2)};bg.prototype.getSouthWest=function(){return this._sw};bg.prototype.getNorthEast=function(){return this._ne};bg.prototype.getNorthWest=function(){return new Hf(this.getWest(),this.getNorth())};bg.prototype.getSouthEast=function(){return new Hf(this.getEast(),
this.getSouth())};bg.prototype.getWest=function(){return this._sw.lng};bg.prototype.getSouth=function(){return this._sw.lat};bg.prototype.getEast=function(){return this._ne.lng};bg.prototype.getNorth=function(){return this._ne.lat};bg.prototype.toArray=function(){return[this._sw.toArray(),this._ne.toArray()]};bg.prototype.toString=function(){return"LngLatBounds("+this._sw.toString()+", "+this._ne.toString()+")"};bg.prototype.isEmpty=function(){return!(this._sw&&this._ne)};bg.prototype.contains=function(v){var H=
Hf.convert(v);v=H.lng;H=H.lat;var P=this._sw.lng<=v&&v<=this._ne.lng;return this._sw.lng>this._ne.lng&&(P=this._sw.lng>=v&&v>=this._ne.lng),this._sw.lat<=H&&H<=this._ne.lat&&P};bg.convert=function(v){return!v||v instanceof bg?v:new bg(v)};var Hf=function(v,H){if(isNaN(v)||isNaN(H))throw Error("Invalid LngLat object: ("+v+", "+H+")");if(this.lng=+v,this.lat=+H,90<this.lat||-90>this.lat)throw Error("Invalid LngLat latitude value: must be between -90 and 90");};Hf.prototype.wrap=function(){return new Hf(g(this.lng,
-180,180),this.lat)};Hf.prototype.toArray=function(){return[this.lng,this.lat]};Hf.prototype.toString=function(){return"LngLat("+this.lng+", "+this.lat+")"};Hf.prototype.distanceTo=function(v){var H=Math.PI/180,P=this.lat*H,ia=v.lat*H;return 6371008.8*Math.acos(Math.min(Math.sin(P)*Math.sin(ia)+Math.cos(P)*Math.cos(ia)*Math.cos((v.lng-this.lng)*H),1))};Hf.prototype.toBounds=function(v){void 0===v&&(v=0);v=360*v/40075017;var H=v/Math.cos(Math.PI/180*this.lat);return new bg(new Hf(this.lng-H,this.lat-
v),new Hf(this.lng+H,this.lat+v))};Hf.convert=function(v){if(v instanceof Hf)return v;if(Array.isArray(v)&&(2===v.length||3===v.length))return new Hf(Number(v[0]),Number(v[1]));if(!Array.isArray(v)&&"object"==typeof v&&null!==v)return new Hf(Number("lng"in v?v.lng:v.lon),Number(v.lat));throw Error("`LngLatLike` argument must be specified as a LngLat instance, an object {lng: \x3clng\x3e, lat: \x3clat\x3e}, an object {lon: \x3clng\x3e, lat: \x3clat\x3e}, or an array of [\x3clng\x3e, \x3clat\x3e]");
};var ck=1.27420176E7*Math.PI,yi=function(v,H,P){void 0===P&&(P=0);this.x=+v;this.y=+H;this.z=+P};yi.fromLngLat=function(v,H){void 0===H&&(H=0);v=Hf.convert(v);return new yi(yd(v.lng),td(v.lat),H/(ck*Math.cos(v.lat*Math.PI/180)))};yi.prototype.toLngLat=function(){return new Hf(360*this.x-180,Jd(this.y))};yi.prototype.toAltitude=function(){return this.z*ck*Math.cos(Jd(this.y)*Math.PI/180)};yi.prototype.meterInMercatorCoordinateUnits=function(){return 1/ck*(v=Jd(this.y),1/Math.cos(v*Math.PI/180));var v};
var bj=function(v,H,P){this.z=v;this.x=H;this.y=P;this.key=Rd(0,v,v,H,P)};bj.prototype.equals=function(v){return this.z===v.z&&this.x===v.x&&this.y===v.y};bj.prototype.url=function(v,H){var P,ia,xa,Aa,Ra,bb=(ia=this.y,xa=this.z,Aa=Id(256*(P=this.x),256*(ia=Math.pow(2,xa)-ia-1),xa),Ra=Id(256*(P+1),256*(ia+1),xa),Aa[0]+","+Aa[1]+","+Ra[0]+","+Ra[1]),ob;P="";for(ia=this.z;0<ia;ia--)P+=(this.x&(ob=1<<ia-1)?1:0)+(this.y&ob?2:0);ob=P;return v[(this.x+this.y)%v.length].replace("{prefix}",(this.x%16).toString(16)+
(this.y%16).toString(16)).replace("{z}",String(this.z)).replace("{x}",String(this.x)).replace("{y}",String("tms"===H?Math.pow(2,this.z)-this.y-1:this.y)).replace("{quadkey}",ob).replace("{bbox-epsg-3857}",bb)};bj.prototype.getTilePoint=function(v){var H=Math.pow(2,this.z);return new Bd(8192*(v.x*H-this.x),8192*(v.y*H-this.y))};bj.prototype.toString=function(){return this.z+"/"+this.x+"/"+this.y};var cl=function(v,H){this.wrap=v;this.canonical=H;this.key=Rd(v,H.z,H.z,H.x,H.y)},ag=function(v,H,P,ia,
xa){this.overscaledZ=v;this.wrap=H;this.canonical=new bj(P,+ia,+xa);this.key=Rd(H,v,P,ia,xa)};ag.prototype.equals=function(v){return this.overscaledZ===v.overscaledZ&&this.wrap===v.wrap&&this.canonical.equals(v.canonical)};ag.prototype.scaledTo=function(v){var H=this.canonical.z-v;return v>this.canonical.z?new ag(v,this.wrap,this.canonical.z,this.canonical.x,this.canonical.y):new ag(v,this.wrap,v,this.canonical.x>>H,this.canonical.y>>H)};ag.prototype.calculateScaledKey=function(v,H){var P=this.canonical.z-
v;return v>this.canonical.z?Rd(this.wrap*+H,v,this.canonical.z,this.canonical.x,this.canonical.y):Rd(this.wrap*+H,v,v,this.canonical.x>>P,this.canonical.y>>P)};ag.prototype.isChildOf=function(v){if(v.wrap!==this.wrap)return!1;var H=this.canonical.z-v.canonical.z;return 0===v.overscaledZ||v.overscaledZ<this.overscaledZ&&v.canonical.x===this.canonical.x>>H&&v.canonical.y===this.canonical.y>>H};ag.prototype.children=function(v){if(this.overscaledZ>=v)return[new ag(this.overscaledZ+1,this.wrap,this.canonical.z,
this.canonical.x,this.canonical.y)];v=this.canonical.z+1;var H=2*this.canonical.x,P=2*this.canonical.y;return[new ag(v,this.wrap,v,H,P),new ag(v,this.wrap,v,H+1,P),new ag(v,this.wrap,v,H,P+1),new ag(v,this.wrap,v,H+1,P+1)]};ag.prototype.isLessThan=function(v){return this.wrap<v.wrap||!(this.wrap>v.wrap)&&(this.overscaledZ<v.overscaledZ||!(this.overscaledZ>v.overscaledZ)&&(this.canonical.x<v.canonical.x||!(this.canonical.x>v.canonical.x)&&this.canonical.y<v.canonical.y))};ag.prototype.wrapped=function(){return new ag(this.overscaledZ,
0,this.canonical.z,this.canonical.x,this.canonical.y)};ag.prototype.unwrapTo=function(v){return new ag(this.overscaledZ,v,this.canonical.z,this.canonical.x,this.canonical.y)};ag.prototype.overscaleFactor=function(){return Math.pow(2,this.overscaledZ-this.canonical.z)};ag.prototype.toUnwrapped=function(){return new cl(this.wrap,this.canonical)};ag.prototype.toString=function(){return this.overscaledZ+"/"+this.canonical.x+"/"+this.canonical.y};ag.prototype.getTilePoint=function(v){return this.canonical.getTilePoint(new yi(v.x-
this.wrap,v.y))};Hc("CanonicalTileID",bj);Hc("OverscaledTileID",ag,{omit:["posMatrix"]});var Gj=function(v,H,P){if(this.uid=v,H.height!==H.width)throw new RangeError("DEM tiles must be square");if(P&&"mapbox"!==P&&"terrarium"!==P)return z('"'+P+'" is not a valid encoding type. Valid types include "mapbox" and "terrarium".');this.stride=H.height;v=this.dim=H.height-2;this.data=new Uint32Array(H.data.buffer);this.encoding=P||"mapbox";for(H=0;H<v;H++)this.data[this._idx(-1,H)]=this.data[this._idx(0,
H)],this.data[this._idx(v,H)]=this.data[this._idx(v-1,H)],this.data[this._idx(H,-1)]=this.data[this._idx(H,0)],this.data[this._idx(H,v)]=this.data[this._idx(H,v-1)];this.data[this._idx(-1,-1)]=this.data[this._idx(0,0)];this.data[this._idx(v,-1)]=this.data[this._idx(v-1,0)];this.data[this._idx(-1,v)]=this.data[this._idx(0,v-1)];this.data[this._idx(v,v)]=this.data[this._idx(v-1,v-1)]};Gj.prototype.get=function(v,H){var P=new Uint8Array(this.data.buffer);v=4*this._idx(v,H);return("terrarium"===this.encoding?
this._unpackTerrarium:this._unpackMapbox)(P[v],P[v+1],P[v+2])};Gj.prototype.getUnpackVector=function(){return"terrarium"===this.encoding?[256,1,1/256,32768]:[6553.6,25.6,.1,1E4]};Gj.prototype._idx=function(v,H){if(-1>v||v>=this.dim+1||-1>H||H>=this.dim+1)throw new RangeError("out of range source coordinates for DEM data");return(H+1)*this.stride+(v+1)};Gj.prototype._unpackMapbox=function(v,H,P){return(65536*v+256*H+P)/10-1E4};Gj.prototype._unpackTerrarium=function(v,H,P){return 256*v+H+P/256-32768};
Gj.prototype.getPixels=function(){return new Ag({width:this.stride,height:this.stride},new Uint8Array(this.data.buffer))};Gj.prototype.backfillBorder=function(v,H,P){if(this.dim!==v.dim)throw Error("dem dimension mismatch");var ia=H*this.dim,xa=H*this.dim+this.dim,Aa=P*this.dim,Ra=P*this.dim+this.dim;switch(H){case -1:ia=xa-1;break;case 1:xa=ia+1}switch(P){case -1:Aa=Ra-1;break;case 1:Ra=Aa+1}H=-H*this.dim;for(P=-P*this.dim;Aa<Ra;Aa++)for(var bb=ia;bb<xa;bb++)this.data[this._idx(bb,Aa)]=v.data[this._idx(bb+
H,Aa+P)]};Hc("DEMData",Gj);var Ik=function(v){this._stringToNumber={};this._numberToString=[];for(var H=0;H<v.length;H++){var P=v[H];this._stringToNumber[P]=H;this._numberToString[H]=P}};Ik.prototype.encode=function(v){return this._stringToNumber[v]};Ik.prototype.decode=function(v){return this._numberToString[v]};var Fk=function(v,H,P,ia,xa){this.type="Feature";this._vectorTileFeature=v;v._z=H;v._x=P;v._y=ia;this.properties=v.properties;this.id=xa},ml={geometry:{configurable:!0}};ml.geometry.get=
function(){return void 0===this._geometry&&(this._geometry=this._vectorTileFeature.toGeoJSON(this._vectorTileFeature._x,this._vectorTileFeature._y,this._vectorTileFeature._z).geometry),this._geometry};ml.geometry.set=function(v){this._geometry=v};Fk.prototype.toJSON=function(){var v={geometry:this.geometry},H;for(H in this)"_geometry"!==H&&"_vectorTileFeature"!==H&&(v[H]=this[H]);return v};Object.defineProperties(Fk.prototype,ml);var jk=function(){this.state={};this.stateChanges={};this.deletedStates=
{}};jk.prototype.updateState=function(v,H,P){H=String(H);if(this.stateChanges[v]=this.stateChanges[v]||{},this.stateChanges[v][H]=this.stateChanges[v][H]||{},d(this.stateChanges[v][H],P),null===this.deletedStates[v])for(var ia in this.deletedStates[v]={},this.state[v])ia!==H&&(this.deletedStates[v][ia]=null);else if(this.deletedStates[v]&&null===this.deletedStates[v][H])for(var xa in this.deletedStates[v][H]={},this.state[v][H])P[xa]||(this.deletedStates[v][H][xa]=null);else for(var Aa in P)this.deletedStates[v]&&
this.deletedStates[v][H]&&null===this.deletedStates[v][H][Aa]&&delete this.deletedStates[v][H][Aa]};jk.prototype.removeFeatureState=function(v,H,P){if(null!==this.deletedStates[v]){var ia=String(H);if(this.deletedStates[v]=this.deletedStates[v]||{},P&&void 0!==H)null!==this.deletedStates[v][ia]&&(this.deletedStates[v][ia]=this.deletedStates[v][ia]||{},this.deletedStates[v][ia][P]=null);else if(void 0!==H)if(this.stateChanges[v]&&this.stateChanges[v][ia])for(P in this.deletedStates[v][ia]={},this.stateChanges[v][ia])this.deletedStates[v][ia][P]=
null;else this.deletedStates[v][ia]=null;else this.deletedStates[v]=null}};jk.prototype.getState=function(v,H){var P=String(H);P=d({},(this.state[v]||{})[P],(this.stateChanges[v]||{})[P]);if(null===this.deletedStates[v])return{};if(this.deletedStates[v]){v=this.deletedStates[v][H];if(null===v)return{};for(var ia in v)delete P[ia]}return P};jk.prototype.initializeTileState=function(v,H){v.setFeatureState(this.state,H)};jk.prototype.coalesceChanges=function(v,H){var P={};for(Ra in this.stateChanges){this.state[Ra]=
this.state[Ra]||{};var ia={},xa;for(xa in this.stateChanges[Ra])this.state[Ra][xa]||(this.state[Ra][xa]={}),d(this.state[Ra][xa],this.stateChanges[Ra][xa]),ia[xa]=this.state[Ra][xa];P[Ra]=ia}for(var Aa in this.deletedStates){this.state[Aa]=this.state[Aa]||{};var Ra={};if(null===this.deletedStates[Aa])for(var bb in this.state[Aa])Ra[bb]={},this.state[Aa][bb]={};else for(var ob in this.deletedStates[Aa]){if(null===this.deletedStates[Aa][ob])this.state[Aa][ob]={};else for(ia=0,xa=Object.keys(this.deletedStates[Aa][ob]);ia<
xa.length;ia+=1)delete this.state[Aa][ob][xa[ia]];Ra[ob]=this.state[Aa][ob]}P[Aa]=P[Aa]||{};d(P[Aa],Ra)}if(this.stateChanges={},this.deletedStates={},0!==Object.keys(P).length)for(var sb in v)v[sb].setFeatureState(P,H)};var yj=function(v,H){this.tileID=v;this.x=v.canonical.x;this.y=v.canonical.y;this.z=v.canonical.z;this.grid=new Yc(8192,16,0);this.grid3D=new Yc(8192,16,0);this.featureIndexArray=new tj;this.promoteId=H};yj.prototype.insert=function(v,H,P,ia,xa,Aa){v=this.featureIndexArray.length;
this.featureIndexArray.emplaceBack(P,ia,xa);P=Aa?this.grid3D:this.grid;for(ia=0;ia<H.length;ia++){xa=H[ia];Aa=[1/0,1/0,-1/0,-1/0];for(var Ra=0;Ra<xa.length;Ra++){var bb=xa[Ra];Aa[0]=Math.min(Aa[0],bb.x);Aa[1]=Math.min(Aa[1],bb.y);Aa[2]=Math.max(Aa[2],bb.x);Aa[3]=Math.max(Aa[3],bb.y)}8192>Aa[0]&&8192>Aa[1]&&0<=Aa[2]&&0<=Aa[3]&&P.insert(v,Aa[0],Aa[1],Aa[2],Aa[3])}};yj.prototype.loadVTLayers=function(){return this.vtLayers||(this.vtLayers=(new gi.VectorTile(new jf(this.rawTileData))).layers,this.sourceLayerCoder=
new Ik(this.vtLayers?Object.keys(this.vtLayers).sort():["_geojsonTileLayer"])),this.vtLayers};yj.prototype.query=function(v,H,P,ia){var xa=this;this.loadVTLayers();var Aa=v.params||{},Ra=8192/v.tileSize/v.scale,bb=vb(Aa.filter),ob=v.queryGeometry,sb=v.queryPadding*Ra,Hb=Ne(ob),Vb=this.grid.query(Hb.minX-sb,Hb.minY-sb,Hb.maxX+sb,Hb.maxY+sb),jc=Ne(v.cameraQueryGeometry);Hb=0;for(jc=this.grid3D.query(jc.minX-sb,jc.minY-sb,jc.maxX+sb,jc.maxY+sb,function(Mb,ac,Ic,Uc){a:{var Kc=v.cameraQueryGeometry;Mb-=
sb;ac-=sb;Ic+=sb;Uc+=sb;for(var wd=0;wd<Kc.length;wd+=1){var Dd=Kc[wd];if(Mb<=Dd.x&&ac<=Dd.y&&Ic>=Dd.x&&Uc>=Dd.y){Kc=!0;break a}}Mb=[new Bd(Mb,ac),new Bd(Mb,Uc),new Bd(Ic,Uc),new Bd(Ic,ac)];if(2<Kc.length)for(ac=0;ac<Mb.length;ac+=1)if(hd(Kc,Mb[ac])){Kc=!0;break a}for(ac=0;ac<Kc.length-1;ac++){Uc=Kc[ac];Ic=Kc[ac+1];wd=Mb;Dd=wd[0];var Qd=wd[2];Uc.x<Dd.x&&Ic.x<Dd.x||Uc.x>Qd.x&&Ic.x>Qd.x||Uc.y<Dd.y&&Ic.y<Dd.y||Uc.y>Qd.y&&Ic.y>Qd.y?Uc=!1:(Dd=F(Uc,Ic,wd[0]),Uc=Dd!==F(Uc,Ic,wd[1])||Dd!==F(Uc,Ic,wd[2])||
Dd!==F(Uc,Ic,wd[3]));if(Uc){Kc=!0;break a}}Kc=!1}return Kc});Hb<jc.length;Hb+=1)Vb.push(jc[Hb]);Vb.sort(xe);var ec,Nb={};Hb=function(Mb){Mb=Vb[Mb];if(Mb!==ec){ec=Mb;Mb=xa.featureIndexArray.get(Mb);var ac=null;xa.loadMatchingFeature(Nb,Mb.bucketIndex,Mb.sourceLayerIndex,Mb.featureIndex,bb,Aa.layers,Aa.availableImages,H,P,ia,function(Ic,Uc,Kc){return ac||(ac=Xd(Ic)),Uc.queryIntersectsFeature(ob,Ic,Kc,ac,xa.z,v.transform,Ra,v.pixelPosMatrix)})}};for(jc=0;jc<Vb.length;jc++)Hb(jc);return Nb};yj.prototype.loadMatchingFeature=
function(v,H,P,ia,xa,Aa,Ra,bb,ob,sb,Hb){H=this.bucketLayerIDs[H];var Vb;if(!(Vb=!Aa))a:{for(Vb=0;Vb<Aa.length;Vb++)if(0<=H.indexOf(Aa[Vb])){Vb=!0;break a}Vb=!1}if(Vb&&(Vb=this.sourceLayerCoder.decode(P),P=this.vtLayers[Vb].feature(ia),xa.filter(new Df(this.tileID.overscaledZ),P)))for(xa=this.getId(P,Vb),Vb=0;Vb<H.length;Vb++){var jc=H[Vb];if(!(Aa&&0>Aa.indexOf(jc))){var ec=bb[jc];if(ec){var Nb={};void 0!==xa&&sb&&(Nb=sb.getState(ec.sourceLayer||"_geojsonTileLayer",xa));var Mb=ob[jc];Mb.paint=Md(Mb.paint,
ec.paint,P,Nb,Ra);Mb.layout=Md(Mb.layout,ec.layout,P,Nb,Ra);if(ec=!Hb||Hb(P,ec,Nb))Nb=new Fk(P,this.z,this.x,this.y,xa),Nb.layer=Mb,Mb=v[jc],void 0===Mb&&(Mb=v[jc]=[]),Mb.push({featureIndex:ia,feature:Nb,intersectionZ:ec})}}}};yj.prototype.lookupSymbolFeatures=function(v,H,P,ia,xa,Aa,Ra,bb){var ob={};this.loadVTLayers();xa=vb(xa);for(var sb=0;sb<v.length;sb+=1)this.loadMatchingFeature(ob,P,ia,v[sb],xa,Aa,Ra,bb,H);return ob};yj.prototype.hasLayer=function(v){for(var H=0,P=this.bucketLayerIDs;H<P.length;H+=
1)for(var ia=0,xa=P[H];ia<xa.length;ia+=1)if(v===xa[ia])return!0;return!1};yj.prototype.getId=function(v,H){var P=v.id;return this.promoteId&&"boolean"==typeof(P=v.properties["string"==typeof this.promoteId?this.promoteId:this.promoteId[H]])&&(P=Number(P)),P};Hc("FeatureIndex",yj,{omit:["rawTileData","sourceLayerCoder"]});var Cg=function(v,H){this.tileID=v;this.uid=Zd++;this.uses=0;this.tileSize=H;this.buckets={};this.expirationTime=null;this.queryPadding=0;this.hasRTLText=this.hasSymbolBuckets=!1;
this.dependencies={};this.expiredRequestCount=0;this.state="loading"};Cg.prototype.registerFadeDuration=function(v){v+=this.timeAdded;v<ee.now()||this.fadeEndTime&&v<this.fadeEndTime||(this.fadeEndTime=v)};Cg.prototype.wasRequested=function(){return"errored"===this.state||"loaded"===this.state||"reloading"===this.state};Cg.prototype.loadVectorData=function(v,H,P){if(this.hasData()&&this.unloadVectorData(),this.state="loaded",v){for(var ia in v.featureIndex&&(this.latestFeatureIndex=v.featureIndex,
v.rawTileData?(this.latestRawTileData=v.rawTileData,this.latestFeatureIndex.rawTileData=v.rawTileData):this.latestRawTileData&&(this.latestFeatureIndex.rawTileData=this.latestRawTileData)),this.collisionBoxArray=v.collisionBoxArray,this.buckets=function(bb,ob){var sb={};if(!ob)return sb;for(var Hb=function(){var ec=jc[Vb],Nb=ec.layerIds.map(function(ac){return ob.getLayer(ac)}).filter(Boolean);if(0!==Nb.length){ec.layers=Nb;ec.stateDependentLayerIds&&(ec.stateDependentLayers=ec.stateDependentLayerIds.map(function(ac){return Nb.filter(function(Ic){return Ic.id===
ac})[0]}));for(var Mb=0;Mb<Nb.length;Mb+=1)sb[Nb[Mb].id]=ec}},Vb=0,jc=bb;Vb<jc.length;Vb+=1)Hb();return sb}(v.buckets,H.style),this.hasSymbolBuckets=!1,this.buckets){var xa=this.buckets[ia];if(xa instanceof ne){if(this.hasSymbolBuckets=!0,!P)break;xa.justReloaded=!0}}if(this.hasRTLText=!1,this.hasSymbolBuckets)for(var Aa in this.buckets)if(P=this.buckets[Aa],P instanceof ne&&P.hasRTLText){this.hasRTLText=!0;Ng.isLoading()||Ng.isLoaded()||"deferred"!==tg||Rj();break}for(var Ra in this.queryPadding=
0,this.buckets)Aa=this.buckets[Ra],this.queryPadding=Math.max(this.queryPadding,H.style.getLayer(Ra).queryRadius(Aa));v.imageAtlas&&(this.imageAtlas=v.imageAtlas);v.glyphAtlasImage&&(this.glyphAtlasImage=v.glyphAtlasImage)}else this.collisionBoxArray=new hj};Cg.prototype.unloadVectorData=function(){for(var v in this.buckets)this.buckets[v].destroy();this.buckets={};this.imageAtlasTexture&&this.imageAtlasTexture.destroy();this.imageAtlas&&(this.imageAtlas=null);this.glyphAtlasTexture&&this.glyphAtlasTexture.destroy();
this.latestFeatureIndex=null;this.state="unloaded"};Cg.prototype.getBucket=function(v){return this.buckets[v.id]};Cg.prototype.upload=function(v){for(var H in this.buckets){var P=this.buckets[H];P.uploadPending()&&P.upload(v)}H=v.gl;this.imageAtlas&&!this.imageAtlas.uploaded&&(this.imageAtlasTexture=new Ah(v,this.imageAtlas.image,H.RGBA),this.imageAtlas.uploaded=!0);this.glyphAtlasImage&&(this.glyphAtlasTexture=new Ah(v,this.glyphAtlasImage,H.ALPHA),this.glyphAtlasImage=null)};Cg.prototype.prepare=
function(v){this.imageAtlas&&this.imageAtlas.patchUpdatedImages(v,this.imageAtlasTexture)};Cg.prototype.queryRenderedFeatures=function(v,H,P,ia,xa,Aa,Ra,bb,ob,sb){return this.latestFeatureIndex&&this.latestFeatureIndex.rawTileData?this.latestFeatureIndex.query({queryGeometry:ia,cameraQueryGeometry:xa,scale:Aa,tileSize:this.tileSize,pixelPosMatrix:sb,transform:bb,params:Ra,queryPadding:this.queryPadding*ob},v,H,P):{}};Cg.prototype.querySourceFeatures=function(v,H){var P=this.latestFeatureIndex;if(P&&
P.rawTileData){var ia=P.loadVTLayers(),xa=H?H.sourceLayer:"";if(ia=ia._geojsonTileLayer||ia[xa]){H=vb(H&&H.filter);var Aa=this.tileID.canonical,Ra=Aa.z,bb=Aa.x;Aa=Aa.y;for(var ob={z:Ra,x:bb,y:Aa},sb=0;sb<ia.length;sb++){var Hb=ia.feature(sb);if(H.filter(new Df(this.tileID.overscaledZ),Hb)){var Vb=P.getId(Hb,xa);Hb=new Fk(Hb,Ra,bb,Aa,Vb);Hb.tile=ob;v.push(Hb)}}}}};Cg.prototype.hasData=function(){return"loaded"===this.state||"reloading"===this.state||"expired"===this.state};Cg.prototype.patternsLoaded=
function(){return this.imageAtlas&&!!Object.keys(this.imageAtlas.patternPositions).length};Cg.prototype.setExpiryData=function(v){var H=this.expirationTime;v.cacheControl?(v=u(v.cacheControl),v["max-age"]&&(this.expirationTime=Date.now()+1E3*v["max-age"])):v.expires&&(this.expirationTime=(new Date(v.expires)).getTime());if(this.expirationTime){v=Date.now();var P=!1;this.expirationTime>v?P=!1:H?this.expirationTime<H?P=!0:(H=this.expirationTime-H)?this.expirationTime=v+Math.max(H,3E4):P=!0:P=!0;P?(this.expiredRequestCount++,
this.state="expired"):this.expiredRequestCount=0}};Cg.prototype.getExpiryTimeout=function(){if(this.expirationTime)return this.expiredRequestCount?1E3*(1<<Math.min(this.expiredRequestCount-1,31)):Math.min(this.expirationTime-(new Date).getTime(),Math.pow(2,31)-1)};Cg.prototype.setFeatureState=function(v,H){if(this.latestFeatureIndex&&this.latestFeatureIndex.rawTileData&&0!==Object.keys(v).length){var P=this.latestFeatureIndex.loadVTLayers(),ia;for(ia in this.buckets)if(H.style.hasLayer(ia)){var xa=
this.buckets[ia],Aa=xa.layers[0].sourceLayer||"_geojsonTileLayer",Ra=P[Aa];Aa=v[Aa];Ra&&Aa&&0!==Object.keys(Aa).length&&(xa.update(Aa,Ra,this.imageAtlas&&this.imageAtlas.patternPositions||{}),(Ra=H&&H.style&&H.style.getLayer(ia))&&(this.queryPadding=Math.max(this.queryPadding,Ra.queryRadius(xa))))}}};Cg.prototype.holdingForFade=function(){return void 0!==this.symbolFadeHoldUntil};Cg.prototype.symbolFadeFinished=function(){return!this.symbolFadeHoldUntil||this.symbolFadeHoldUntil<ee.now()};Cg.prototype.clearFadeHold=
function(){this.symbolFadeHoldUntil=void 0};Cg.prototype.setHoldDuration=function(v){this.symbolFadeHoldUntil=ee.now()+v};Cg.prototype.setDependencies=function(v,H){for(var P={},ia=0;ia<H.length;ia+=1)P[H[ia]]=!0;this.dependencies[v]=P};Cg.prototype.hasDependency=function(v,H){for(var P=0;P<v.length;P+=1){var ia=this.dependencies[v[P]];if(ia)for(var xa=0,Aa=H;xa<Aa.length;xa+=1)if(ia[Aa[xa]])return!0}return!1};var ea=self.performance,va=function(v){this._marks={start:[v.url,"start"].join("#"),end:[v.url,
"end"].join("#"),measure:v.url.toString()};ea.mark(this._marks.start)};va.prototype.finish=function(){ea.mark(this._marks.end);var v=ea.getEntriesByName(this._marks.measure);return 0===v.length&&(ea.measure(this._marks.measure,this._marks.start,this._marks.end),v=ea.getEntriesByName(this._marks.measure),ea.clearMarks(this._marks.start),ea.clearMarks(this._marks.end),ea.clearMeasures(this._marks.measure)),v};b.Actor=xi;b.AlphaImage=Kh;b.CanonicalTileID=bj;b.CollisionBoxArray=hj;b.Color=he;b.DEMData=
Gj;b.DataConstantProperty=te;b.DictionaryCoder=Ik;b.EXTENT=8192;b.ErrorEvent=Ec;b.EvaluationParameters=Df;b.Event=Ac;b.Evented=uc;b.FeatureIndex=yj;b.FillBucket=Pg;b.FillExtrusionBucket=ug;b.ImageAtlas=Tc;b.ImagePosition=yc;b.LineBucket=La;b.LngLat=Hf;b.LngLatBounds=bg;b.MercatorCoordinate=yi;b.ONE_EM=24;b.OverscaledTileID=ag;b.Point=Bd;b.Point$1=Bd;b.Properties=ih;b.Protobuf=jf;b.RGBAImage=Ag;b.RequestManager=Tg;b.RequestPerformance=va;b.ResourceType=da;b.SegmentVector=pg;b.SourceFeatureState=jk;
b.StructArrayLayout1ui2=Lj;b.StructArrayLayout2f1f2i16=li;b.StructArrayLayout2i4=Ei;b.StructArrayLayout3ui6=Vh;b.StructArrayLayout4i8=Aj;b.SymbolBucket=ne;b.Texture=Ah;b.Tile=Cg;b.Transitionable=zi;b.Uniform1f=Nk;b.Uniform1i=nl;b.Uniform2f=Sk;b.Uniform3f=Tj;b.Uniform4f=Si;b.UniformColor=Og;b.UniformMatrix4f=Dj;b.UnwrappedTileID=cl;b.ValidationError=fc;b.WritingMode=Sc;b.ZoomHistory=qj;b.add=function(v,H,P){return v[0]=H[0]+P[0],v[1]=H[1]+P[1],v[2]=H[2]+P[2],v};b.addDynamicAttributes=fd;b.asyncAll=
function(v,H,P){if(!v.length)return P(null,[]);var ia=v.length,xa=Array(v.length),Aa=null;v.forEach(function(Ra,bb){H(Ra,function(ob,sb){ob&&(Aa=ob);xa[bb]=sb;0==--ia&&P(Aa,xa)})})};b.bezier=l;b.bindAll=t;b.browser=ee;b.cacheEntryPossiblyAdded=function(v){++fa>Db&&(v.getActor().send("enforceCacheSizeLimit",Fj),fa=0)};b.clamp=c;b.clearTileCache=function(v){var H=self.caches.delete("mapbox-tiles");v&&H.catch(v).then(function(){return v()})};b.clipLine=zh;b.clone=function(v){var H=new Xg(16);return H[0]=
v[0],H[1]=v[1],H[2]=v[2],H[3]=v[3],H[4]=v[4],H[5]=v[5],H[6]=v[6],H[7]=v[7],H[8]=v[8],H[9]=v[9],H[10]=v[10],H[11]=v[11],H[12]=v[12],H[13]=v[13],H[14]=v[14],H[15]=v[15],H};b.clone$1=A;b.clone$2=function(v){var H=new Xg(3);return H[0]=v[0],H[1]=v[1],H[2]=v[2],H};b.collisionCircleLayout=Qb;b.config=df;b.create=function(){var v=new Xg(16);return Xg!=Float32Array&&(v[1]=0,v[2]=0,v[3]=0,v[4]=0,v[6]=0,v[7]=0,v[8]=0,v[9]=0,v[11]=0,v[12]=0,v[13]=0,v[14]=0),v[0]=1,v[5]=1,v[10]=1,v[15]=1,v};b.create$1=function(){var v=
new Xg(9);return Xg!=Float32Array&&(v[1]=0,v[2]=0,v[3]=0,v[5]=0,v[6]=0,v[7]=0),v[0]=1,v[4]=1,v[8]=1,v};b.create$2=function(){var v=new Xg(4);return Xg!=Float32Array&&(v[1]=0,v[2]=0),v[0]=1,v[3]=1,v};b.createCommonjsModule=k;b.createExpression=gd;b.createLayout=Fd;b.createStyleLayer=function(v){return"custom"===v.type?new Ef(v):new Bf[v.type](v)};b.cross=function(v,H,P){var ia=H[0],xa=H[1];H=H[2];var Aa=P[0],Ra=P[1];P=P[2];return v[0]=xa*P-H*Ra,v[1]=H*Aa-ia*P,v[2]=ia*Ra-xa*Aa,v};b.deepEqual=function ia(H,
P){if(Array.isArray(H)){if(!Array.isArray(P)||H.length!==P.length)return!1;for(var xa=0;xa<H.length;xa++)if(!ia(H[xa],P[xa]))return!1;return!0}if("object"==typeof H&&null!==H&&null!==P){if("object"!=typeof P||Object.keys(H).length!==Object.keys(P).length)return!1;for(xa in H)if(!ia(H[xa],P[xa]))return!1;return!0}return H===P};b.dot=function(H,P){return H[0]*P[0]+H[1]*P[1]+H[2]*P[2]};b.dot$1=function(H,P){return H[0]*P[0]+H[1]*P[1]+H[2]*P[2]+H[3]*P[3]};b.ease=Td;b.emitValidationErrors=sd;b.endsWith=
w;b.enforceCacheSizeLimit=function(H){Q();Vf&&Vf.then(function(P){P.keys().then(function(ia){for(var xa=0;xa<ia.length-H;xa++)P.delete(ia[xa])})})};b.evaluateSizeForFeature=ji;b.evaluateSizeForZoom=Zi;b.evaluateVariableOffset=Pb;b.evented=Qj;b.extend=d;b.featureFilter=vb;b.filterObject=y;b.fromRotation=function(H,P){var ia=Math.sin(P);P=Math.cos(P);return H[0]=P,H[1]=ia,H[2]=0,H[3]=-ia,H[4]=P,H[5]=0,H[6]=0,H[7]=0,H[8]=1,H};b.getAnchorAlignment=cf;b.getAnchorJustification=bc;b.getArrayBuffer=hb;b.getImage=
dc;b.getJSON=function(H,P){return Za(d(H,{type:"json"}),P)};b.getRTLTextPluginStatus=function(){return tg};b.getReferrer=Ga;b.getVideo=function(H,P){var ia=self.document.createElement("video");ia.muted=!0;ia.onloadstart=function(){P(null,ia)};for(var xa=0;xa<H.length;xa++){var Aa=self.document.createElement("source");var Ra=H[xa];var bb=void 0;(bb=self.document.createElement("a")).href=Ra;bb.protocol===self.document.location.protocol&&bb.host===self.document.location.host||(ia.crossOrigin="Anonymous");
Aa.src=H[xa];ia.appendChild(Aa)}return{cancel:function(){}}};b.identity=de;b.invert=function(H,P){var ia=P[0],xa=P[1],Aa=P[2],Ra=P[3],bb=P[4],ob=P[5],sb=P[6],Hb=P[7],Vb=P[8],jc=P[9],ec=P[10],Nb=P[11],Mb=P[12],ac=P[13],Ic=P[14];P=P[15];var Uc=ia*ob-xa*bb,Kc=ia*sb-Aa*bb,wd=ia*Hb-Ra*bb,Dd=xa*sb-Aa*ob,Qd=xa*Hb-Ra*ob,Nd=Aa*Hb-Ra*sb,re=Vb*ac-jc*Mb,Je=Vb*Ic-ec*Mb,Pe=Vb*P-Nb*Mb,ze=jc*Ic-ec*ac,Ie=jc*P-Nb*ac,Ye=ec*P-Nb*Ic,qe=Uc*Ye-Kc*Ie+wd*ze+Dd*Pe-Qd*Je+Nd*re;return qe?(H[0]=(ob*Ye-sb*Ie+Hb*ze)*(qe=1/qe),
H[1]=(Aa*Ie-xa*Ye-Ra*ze)*qe,H[2]=(ac*Nd-Ic*Qd+P*Dd)*qe,H[3]=(ec*Qd-jc*Nd-Nb*Dd)*qe,H[4]=(sb*Pe-bb*Ye-Hb*Je)*qe,H[5]=(ia*Ye-Aa*Pe+Ra*Je)*qe,H[6]=(Ic*wd-Mb*Nd-P*Kc)*qe,H[7]=(Vb*Nd-ec*wd+Nb*Kc)*qe,H[8]=(bb*Ie-ob*Pe+Hb*re)*qe,H[9]=(xa*Pe-ia*Ie-Ra*re)*qe,H[10]=(Mb*Qd-ac*wd+P*Uc)*qe,H[11]=(jc*wd-Vb*Qd-Nb*Uc)*qe,H[12]=(ob*Je-bb*ze-sb*re)*qe,H[13]=(ia*ze-xa*Je+Aa*re)*qe,H[14]=(ac*Kc-Mb*Dd-Ic*Uc)*qe,H[15]=(Vb*Dd-jc*Kc+ec*Uc)*qe,H):null};b.isChar=je;b.isMapboxURL=N;b.keysDifference=function(H,P){var ia=[],
xa;for(xa in H)xa in P||ia.push(xa);return ia};b.makeRequest=Za;b.mapObject=x;b.mercatorXfromLng=yd;b.mercatorYfromLat=td;b.mercatorZfromAltitude=function(H,P){return H/(ck*Math.cos(P*Math.PI/180))};b.mul=Be;b.multiply=Be;b.mvt=gi;b.normalize=function(H,P){var ia=P[0],xa=P[1],Aa=P[2];ia=ia*ia+xa*xa+Aa*Aa;return 0<ia&&(ia=1/Math.sqrt(ia)),H[0]=P[0]*ia,H[1]=P[1]*ia,H[2]=P[2]*ia,H};b.number=mb;b.offscreenCanvasSupported=R;b.ortho=function(H,P,ia,xa,Aa,Ra,bb){var ob=1/(P-ia),sb=1/(xa-Aa),Hb=1/(Ra-bb);
return H[0]=-2*ob,H[1]=0,H[2]=0,H[3]=0,H[4]=0,H[5]=-2*sb,H[6]=0,H[7]=0,H[8]=0,H[9]=0,H[10]=2*Hb,H[11]=0,H[12]=(P+ia)*ob,H[13]=(Aa+xa)*sb,H[14]=(bb+Ra)*Hb,H[15]=1,H};b.parseGlyphPBF=function(H){return(new jf(H)).readFields(Xi,[])};b.pbf=jf;b.performSymbolLayout=function(H,P,ia,xa,Aa,Ra,bb){H.createArrays();H.tilePixelRatio=8192/(512*H.overscaling);H.compareText={};H.iconsNeedLinear=!1;var ob=H.layers[0].layout,sb=H.layers[0]._unevaluatedLayout._values,Hb={};if("composite"===H.textSizeData.kind){var Vb=
H.textSizeData,jc=Vb.maxZoom;Hb.compositeTextSizes=[sb["text-size"].possiblyEvaluate(new Df(Vb.minZoom),bb),sb["text-size"].possiblyEvaluate(new Df(jc),bb)]}"composite"===H.iconSizeData.kind&&(Vb=H.iconSizeData,jc=Vb.maxZoom,Hb.compositeIconSizes=[sb["icon-size"].possiblyEvaluate(new Df(Vb.minZoom),bb),sb["icon-size"].possiblyEvaluate(new Df(jc),bb)]);Hb.layoutTextSize=sb["text-size"].possiblyEvaluate(new Df(H.zoom+1),bb);Hb.layoutIconSize=sb["icon-size"].possiblyEvaluate(new Df(H.zoom+1),bb);Hb.textMaxSize=
sb["text-size"].possiblyEvaluate(new Df(18));var ec=24*ob.get("text-line-height"),Nb="map"===ob.get("text-rotation-alignment")&&"point"!==ob.get("symbol-placement"),Mb=ob.get("text-keep-upright"),ac=ob.get("text-size");sb=function(){var Kc=Uc[Ic],wd=ob.get("text-font").evaluate(Kc,{},bb).join(","),Dd=ac.evaluate(Kc,{},bb),Qd=Hb.layoutTextSize.evaluate(Kc,{},bb),Nd=Hb.layoutIconSize.evaluate(Kc,{},bb),re={horizontal:{},vertical:void 0},Je=Kc.text,Pe=[0,0];if(Je){var ze=Je.toString(),Ie=24*ob.get("text-letter-spacing").evaluate(Kc,
{},bb),Ye=function(bf){for(var ig=0;ig<bf.length;ig+=1)if(Lg=bf[ig].charCodeAt(0),je.Arabic(Lg)||je["Arabic Supplement"](Lg)||je["Arabic Extended-A"](Lg)||je["Arabic Presentation Forms-A"](Lg)||je["Arabic Presentation Forms-B"](Lg))return!1;var Lg;return!0}(ze)?Ie:0,qe=ob.get("text-anchor").evaluate(Kc,{},bb),me=ob.get("text-variable-anchor");me||(Pe=(Ie=ob.get("text-radial-offset").evaluate(Kc,{},bb))?Pb(qe,[24*Ie,Wd]):ob.get("text-offset").evaluate(Kc,{},bb).map(function(bf){return 24*bf}));var se=
Nb?"center":ob.get("text-justify").evaluate(Kc,{},bb),rf=ob.get("symbol-placement"),Wf="point"===rf?24*ob.get("text-max-width").evaluate(Kc,{},bb):0;Ie=function(){H.allowVerticalPlacement&&kb(ze)&&(re.vertical=Rg(Je,P,ia,Aa,wd,Wf,ec,qe,"left",Ye,Pe,Sc.vertical,!0,rf,Qd,Dd))};if(!Nb&&me){me="auto"===se?me.map(function(bf){return bc(bf)}):[se];se=!1;for(var jh=0;jh<me.length;jh++){var Dg=me[jh];if(!re.horizontal[Dg])if(se)re.horizontal[Dg]=re.horizontal[0];else{var Xf=Rg(Je,P,ia,Aa,wd,Wf,ec,"center",
Dg,Ye,Pe,Sc.horizontal,!1,rf,Qd,Dd);Xf&&(re.horizontal[Dg]=Xf,se=1===Xf.positionedLines.length)}}Ie()}else"auto"===se&&(se=bc(qe)),(me=Rg(Je,P,ia,Aa,wd,Wf,ec,qe,se,Ye,Pe,Sc.horizontal,!1,rf,Qd,Dd))&&(re.horizontal[se]=me),Ie(),kb(ze)&&Nb&&Mb&&(re.vertical=Rg(Je,P,ia,Aa,wd,Wf,ec,qe,se,Ye,Pe,Sc.vertical,!1,rf,Qd,Dd))}Ie=void 0;me=!1;Kc.icon&&Kc.icon.name&&(se=xa[Kc.icon.name])&&(Ie=function(bf,ig,Lg){var $g=cf(Lg);Lg=ig[0]-bf.displaySize[0]*$g.horizontalAlign;ig=ig[1]-bf.displaySize[1]*$g.verticalAlign;
return{image:bf,top:ig,bottom:ig+bf.displaySize[1],left:Lg,right:Lg+bf.displaySize[0]}}(Aa[Kc.icon.name],ob.get("icon-offset").evaluate(Kc,{},bb),ob.get("icon-anchor").evaluate(Kc,{},bb)),me=se.sdf,void 0===H.sdfIcons?H.sdfIcons=se.sdf:H.sdfIcons!==se.sdf&&z("Style sheet warning: Cannot mix SDF and non-SDF icons in one buffer"),(se.pixelRatio!==H.pixelRatio||0!==ob.get("icon-rotate").constantOr(1))&&(H.iconsNeedLinear=!0));se=dd(re.horizontal)||re.vertical;H.iconsInText=!!se&&se.iconsInText;(se||
Ie)&&function(bf,ig,Lg,$g,Wk,ej,cg,Dh,uk,Ok,Xk){var kh=ej.textMaxSize.evaluate(ig,{});void 0===kh&&(kh=cg);var vk,qg=bf.layers[0].layout,Ai=qg.get("icon-offset").evaluate(ig,{},Xk),Nf=dd(Lg.horizontal),Eh=cg/24,Nl=bf.tilePixelRatio*Eh;kh=bf.tilePixelRatio*kh/24;var Ol=bf.tilePixelRatio*Dh,wj=bf.tilePixelRatio*qg.get("symbol-spacing"),Pl=qg.get("text-padding")*bf.tilePixelRatio,Ql=qg.get("icon-padding")*bf.tilePixelRatio;Dh=qg.get("text-max-angle")/180*Math.PI;var Rl="map"===qg.get("text-rotation-alignment")&&
"point"!==qg.get("symbol-placement"),Sl="map"===qg.get("icon-rotation-alignment")&&"point"!==qg.get("symbol-placement"),Yk=qg.get("symbol-placement"),Pk=wj/2,el=qg.get("icon-text-fit");$g&&"none"!==el&&(bf.allowVerticalPlacement&&Lg.vertical&&(vk=gg($g,Lg.vertical,el,qg.get("icon-text-fit-padding"),Ai,Eh)),Nf&&($g=gg($g,Nf,el,qg.get("icon-text-fit-padding"),Ai,Eh)));qg=function(Tl,ol){0>ol.x||8192<=ol.x||0>ol.y||8192<=ol.y||function(rg,Oj,vl,fk,wk,wl,Qk,xj,fl,pl,hl,il,zl,xl,Zk,$k,ql,El,al,rl,Ni,yl,
Fl,gk,Ul){var sl,jl,kl=rg.addToLineVertexArray(Oj,vl),tl=0,Gl=vl=0,Hl=0,ll=-1,Al=-1,xk={},Il=uj(""),Bl=0,Cl=0;if(void 0===xj._unevaluatedLayout.getValue("text-radial-offset")?(Bl=(sl=xj.layout.get("text-offset").evaluate(Ni,{},gk).map(function(ul){return 24*ul}))[0],Cl=sl[1]):(Bl=24*xj.layout.get("text-radial-offset").evaluate(Ni,{},gk),Cl=Wd),rg.allowVerticalPlacement&&fk.vertical){sl=xj.layout.get("text-rotate").evaluate(Ni,{},gk)+90;var bl=new qd(fl,Oj,pl,hl,il,fk.vertical,zl,xl,Zk,sl);Qk&&(jl=
new qd(fl,Oj,pl,hl,il,Qk,ql,El,Zk,sl))}if(wk){var yk=xj.layout.get("icon-rotate").evaluate(Ni,{});tl="none"!==xj.layout.get("icon-text-fit");ll=Zj(wk,yk,Fl,tl);Qk=Qk?Zj(Qk,yk,Fl,tl):void 0;yk=new qd(fl,Oj,pl,hl,il,wk,ql,El,!1,yk);tl=4*ll.length;ql=rg.iconSizeData;wk=null;"source"===ql.kind?32640<(wk=[128*xj.layout.get("icon-size").evaluate(Ni,{})])[0]&&z(rg.layerIds[0]+': Value for "icon-size" is \x3e\x3d 255. Reduce your "icon-size".'):"composite"===ql.kind&&(32640<(wk=[128*yl.compositeIconSizes[0].evaluate(Ni,
{},gk),128*yl.compositeIconSizes[1].evaluate(Ni,{},gk)])[0]||32640<wk[1])&&z(rg.layerIds[0]+': Value for "icon-size" is \x3e\x3d 255. Reduce your "icon-size".');rg.addSymbols(rg.icon,ll,wk,rl,al,Ni,!1,Oj,kl.lineStartIndex,kl.lineLength,-1,gk);ll=rg.icon.placedSymbolArray.length-1;Qk&&(vl=4*Qk.length,rg.addSymbols(rg.icon,Qk,wk,rl,al,Ni,Sc.vertical,Oj,kl.lineStartIndex,kl.lineLength,-1,gk),Al=rg.icon.placedSymbolArray.length-1)}for(var Jl in fk.horizontal){al=fk.horizontal[Jl];if(!Xh){Il=uj(al.text);
var Xh=xj.layout.get("text-rotate").evaluate(Ni,{},gk);Xh=new qd(fl,Oj,pl,hl,il,al,zl,xl,Zk,Xh)}rl=1===al.positionedLines.length;if(Gl+=pc(rg,Oj,al,wl,xj,Zk,Ni,$k,kl,fk.vertical?Sc.horizontal:Sc.horizontalOnly,rl?Object.keys(fk.horizontal):[Jl],xk,ll,yl,gk),rl)break}fk.vertical&&(Hl+=pc(rg,Oj,fk.vertical,wl,xj,Zk,Ni,$k,kl,Sc.vertical,["vertical"],xk,Al,yl,gk));fk=Xh?Xh.boxStartIndex:rg.collisionBoxArray.length;wl=Xh?Xh.boxEndIndex:rg.collisionBoxArray.length;xj=bl?bl.boxStartIndex:rg.collisionBoxArray.length;
fl=bl?bl.boxEndIndex:rg.collisionBoxArray.length;hl=yk?yk.boxStartIndex:rg.collisionBoxArray.length;il=yk?yk.boxEndIndex:rg.collisionBoxArray.length;xl=jl?jl.boxStartIndex:rg.collisionBoxArray.length;Zk=jl?jl.boxEndIndex:rg.collisionBoxArray.length;$k=function(ul,Kl){return ul&&ul.circleDiameter?Math.max(ul.circleDiameter,Kl):Kl};Xh=$k(Xh,-1);Xh=$k(bl,Xh);Xh=$k(yk,Xh);(bl=-1<(Xh=$k(jl,Xh))?1:0)&&(Xh*=Ul/24);rg.glyphOffsetArray.length>=ne.MAX_GLYPHS&&z("Too many glyphs being rendered in a tile. See https://github.com/mapbox/mapbox-gl-js/issues/2907");
void 0!==Ni.sortKey&&rg.addToSortKeyRanges(rg.symbolInstances.length,Ni.sortKey);rg.symbolInstances.emplaceBack(Oj.x,Oj.y,0<=xk.right?xk.right:-1,0<=xk.center?xk.center:-1,0<=xk.left?xk.left:-1,xk.vertical||-1,ll,Al,Il,fk,wl,xj,fl,hl,il,xl,Zk,pl,Gl,Hl,tl,vl,bl,0,zl,Bl,Cl,Xh)}(bf,ol,Tl,Lg,$g,Wk,vk,bf.layers[0],bf.collisionBoxArray,ig.index,ig.sourceLayerIndex,bf.index,Nl,Pl,Rl,uk,Ol,Ql,Sl,Ai,ig,ej,Ok,Xk,cg)};if("line"===Yk)for(Eh=0,Yk=zh(ig.geometry,0,0,8192,8192);Eh<Yk.length;Eh+=1){el=Yk[Eh];for(var Dl=
0,Ll=wg(el,wj,Dh,Lg.vertical||Nf,$g,24,kh,bf.overscaling,8192);Dl<Ll.length;Dl+=1){var Ml=Ll[Dl];Nf&&id(bf,Nf.text,Pk,Ml)||qg(el,Ml)}}else if("line-center"===Yk)for(wj=0,Pk=ig.geometry;wj<Pk.length;wj+=1)Eh=Pk[wj],1<Eh.length&&(Yk=hh(Eh,Dh,Lg.vertical||Nf,$g,24,kh))&&qg(Eh,Yk);else if("Polygon"===ig.type)for(Nf=0,kh=ti(ig.geometry,0);Nf<kh.length;Nf+=1)Dh=kh[Nf],wj=Rh(Dh,16),qg(Dh[0],new od(wj.x,wj.y,0));else if("LineString"===ig.type)for(Nf=0,kh=ig.geometry;Nf<kh.length;Nf+=1)Dh=kh[Nf],qg(Dh,new od(Dh[0].x,
Dh[0].y,0));else if("Point"===ig.type)for(Nf=0,kh=ig.geometry;Nf<kh.length;Nf+=1)for(Dh=0,wj=kh[Nf];Dh<wj.length;Dh+=1)Pk=wj[Dh],qg([Pk],new od(Pk.x,Pk.y,0))}(H,Kc,re,Ie,xa,Hb,Qd,Nd,Pe,me,bb)};for(var Ic=0,Uc=H.features;Ic<Uc.length;Ic+=1)sb();Ra&&H.generateCollisionDebugBuffers()};b.perspective=function(H,P,ia,xa,Aa){var Ra;P=1/Math.tan(P/2);return H[0]=P/ia,H[1]=0,H[2]=0,H[3]=0,H[4]=0,H[5]=P,H[6]=0,H[7]=0,H[8]=0,H[9]=0,H[11]=-1,H[12]=0,H[13]=0,H[15]=0,null!=Aa&&Aa!==1/0?(H[10]=(Aa+xa)*(Ra=1/(xa-
Aa)),H[14]=2*Aa*xa*Ra):(H[10]=-1,H[14]=-2*xa),H};b.pick=function(H,P){for(var ia={},xa=0;xa<P.length;xa++){var Aa=P[xa];Aa in H&&(ia[Aa]=H[Aa])}return ia};b.plugin=Ng;b.polygonIntersectsPolygon=Yd;b.postMapLoadEvent=Vj;b.postTurnstileEvent=dh;b.potpack=wi;b.refProperties="type source source-layer minzoom maxzoom filter layout".split(" ");b.register=Hc;b.registerForPluginStateChange=function(H){return H({pluginStatus:tg,pluginURL:oh}),Qj.on("pluginStateChange",H),H};b.rotate=function(H,P,ia){var xa=
P[0],Aa=P[1],Ra=P[2];P=P[3];var bb=Math.sin(ia);ia=Math.cos(ia);return H[0]=xa*ia+Ra*bb,H[1]=Aa*ia+P*bb,H[2]=xa*-bb+Ra*ia,H[3]=Aa*-bb+P*ia,H};b.rotateX=function(H,P,ia){var xa=Math.sin(ia);ia=Math.cos(ia);var Aa=P[4],Ra=P[5],bb=P[6],ob=P[7],sb=P[8],Hb=P[9],Vb=P[10],jc=P[11];return P!==H&&(H[0]=P[0],H[1]=P[1],H[2]=P[2],H[3]=P[3],H[12]=P[12],H[13]=P[13],H[14]=P[14],H[15]=P[15]),H[4]=Aa*ia+sb*xa,H[5]=Ra*ia+Hb*xa,H[6]=bb*ia+Vb*xa,H[7]=ob*ia+jc*xa,H[8]=sb*ia-Aa*xa,H[9]=Hb*ia-Ra*xa,H[10]=Vb*ia-bb*xa,H[11]=
jc*ia-ob*xa,H};b.rotateZ=function(H,P,ia){var xa=Math.sin(ia);ia=Math.cos(ia);var Aa=P[0],Ra=P[1],bb=P[2],ob=P[3],sb=P[4],Hb=P[5],Vb=P[6],jc=P[7];return P!==H&&(H[8]=P[8],H[9]=P[9],H[10]=P[10],H[11]=P[11],H[12]=P[12],H[13]=P[13],H[14]=P[14],H[15]=P[15]),H[0]=Aa*ia+sb*xa,H[1]=Ra*ia+Hb*xa,H[2]=bb*ia+Vb*xa,H[3]=ob*ia+jc*xa,H[4]=sb*ia-Aa*xa,H[5]=Hb*ia-Ra*xa,H[6]=Vb*ia-bb*xa,H[7]=jc*ia-ob*xa,H};b.scale=function(H,P,ia){var xa=ia[0],Aa=ia[1];ia=ia[2];return H[0]=P[0]*xa,H[1]=P[1]*xa,H[2]=P[2]*xa,H[3]=P[3]*
xa,H[4]=P[4]*Aa,H[5]=P[5]*Aa,H[6]=P[6]*Aa,H[7]=P[7]*Aa,H[8]=P[8]*ia,H[9]=P[9]*ia,H[10]=P[10]*ia,H[11]=P[11]*ia,H[12]=P[12],H[13]=P[13],H[14]=P[14],H[15]=P[15],H};b.scale$1=function(H,P,ia){return H[0]=P[0]*ia,H[1]=P[1]*ia,H[2]=P[2]*ia,H[3]=P[3]*ia,H};b.scale$2=function(H,P,ia){return H[0]=P[0]*ia,H[1]=P[1]*ia,H[2]=P[2]*ia,H};b.setCacheLimits=function(H,P){Fj=H;Db=P};b.setRTLTextPlugin=function(H,P,ia){if(void 0===ia&&(ia=!1),"deferred"===tg||"loading"===tg||"loaded"===tg)throw Error("setRTLTextPlugin cannot be called multiple times.");
oh=ee.resolveURL(H);tg="deferred";Bk=P;Ge();ia||Rj()};b.sphericalToCartesian=function(H){var P=H[0],ia=H[1];H=H[2];return ia+=90,ia*=Math.PI/180,H*=Math.PI/180,{x:P*Math.cos(ia)*Math.sin(H),y:P*Math.sin(ia)*Math.sin(H),z:P*Math.cos(H)}};b.sqrLen=function(H){var P=H[0];H=H[1];return P*P+H*H};b.styleSpec=Xb;b.sub=function(H,P,ia){return H[0]=P[0]-ia[0],H[1]=P[1]-ia[1],H[2]=P[2]-ia[2],H};b.symbolSize=md;b.transformMat3=function(H,P,ia){var xa=P[0],Aa=P[1];P=P[2];return H[0]=xa*ia[0]+Aa*ia[3]+P*ia[6],
H[1]=xa*ia[1]+Aa*ia[4]+P*ia[7],H[2]=xa*ia[2]+Aa*ia[5]+P*ia[8],H};b.transformMat4=Ue;b.translate=function(H,P,ia){var xa,Aa,Ra,bb,ob,sb,Hb,Vb,jc,ec,Nb,Mb,ac=ia[0],Ic=ia[1];ia=ia[2];return P===H?(H[12]=P[0]*ac+P[4]*Ic+P[8]*ia+P[12],H[13]=P[1]*ac+P[5]*Ic+P[9]*ia+P[13],H[14]=P[2]*ac+P[6]*Ic+P[10]*ia+P[14],H[15]=P[3]*ac+P[7]*Ic+P[11]*ia+P[15]):(Aa=P[1],Ra=P[2],bb=P[3],ob=P[4],sb=P[5],Hb=P[6],Vb=P[7],jc=P[8],ec=P[9],Nb=P[10],Mb=P[11],H[0]=xa=P[0],H[1]=Aa,H[2]=Ra,H[3]=bb,H[4]=ob,H[5]=sb,H[6]=Hb,H[7]=Vb,
H[8]=jc,H[9]=ec,H[10]=Nb,H[11]=Mb,H[12]=xa*ac+ob*Ic+jc*ia+P[12],H[13]=Aa*ac+sb*Ic+ec*ia+P[13],H[14]=Ra*ac+Hb*Ic+Nb*ia+P[14],H[15]=bb*ac+Vb*Ic+Mb*ia+P[15]),H};b.triggerPluginCompletionEvent=sk;b.uniqueId=function(){return Zd++};b.validateCustomStyleLayer=function(H){var P=[],ia=H.id;return void 0===ia&&P.push({message:"layers."+ia+': missing required property "id"'}),void 0===H.render&&P.push({message:"layers."+ia+': missing required method "render"'}),H.renderingMode&&"2d"!==H.renderingMode&&"3d"!==
H.renderingMode&&P.push({message:"layers."+ia+': property "renderingMode" must be either "2d" or "3d"'}),P};b.validateLight=Jf;b.validateStyle=pd;b.values=function(H){var P=[],ia;for(ia in H)P.push(H[ia]);return P};b.vectorTile=gi;b.version="1.10.1";b.warnOnce=z;b.webpSupported=ng;b.window=self;b.wrap=g});q(["./shared"],function(b){function k(Ka){var Ua=typeof Ka;if("number"===Ua||"boolean"===Ua||"string"===Ua||null==Ka)return JSON.stringify(Ka);if(Array.isArray(Ka)){Ua="[";for(var Ea=0;Ea<Ka.length;Ea+=
1)Ua+=k(Ka[Ea])+",";return Ua+"]"}Ua=Object.keys(Ka).sort();Ea="{";for(var Ya=0;Ya<Ua.length;Ya++)Ea+=JSON.stringify(Ua[Ya])+":"+k(Ka[Ua[Ya]])+",";return Ea+"}"}function e(Ka,Ua,Ea){Ua=new b.EvaluationParameters(Ua);for(var Ya=0;Ya<Ka.length;Ya+=1)Ka[Ya].recalculate(Ua,Ea)}function h(Ka,Ua){var Ea=b.getArrayBuffer(Ka.request,function(Ya,ab,Wa,Ja){Ya?Ua(Ya):ab&&Ua(null,{vectorTile:new b.vectorTile.VectorTile(new b.pbf(ab)),rawData:ab,cacheControl:Wa,expires:Ja})});return function(){Ea.cancel();Ua()}}
function l(Ka,Ua){if(0!==Ka.length){c(Ka[0],Ua);for(var Ea=1;Ea<Ka.length;Ea++)c(Ka[Ea],!Ua)}}function c(Ka,Ua){for(var Ea=0,Ya=0,ab=Ka.length,Wa=ab-1;Ya<ab;Wa=Ya++)Ea+=(Ka[Ya][0]-Ka[Wa][0])*(Ka[Wa][1]+Ka[Ya][1]);0<=Ea!=!!Ua&&Ka.reverse()}function g(Ka,Ua){this.options=Ua||{};this.features=Ka;this.length=Ka.length}function d(Ka,Ua){this.id="number"==typeof Ka.id?Ka.id:void 0;this.type=Ka.type;this.rawGeometry=1===Ka.type?[Ka.geometry]:Ka.geometry;this.properties=Ka.tags;this.extent=Ua||4096}function p(Ka){var Ua=
new b.pbf,Ea;for(Ea in Ka.layers)Ua.writeMessage(3,r,Ka.layers[Ea]);return Ua.finish()}function r(Ka,Ua){var Ea;Ua.writeVarintField(15,Ka.version||1);Ua.writeStringField(1,Ka.name||"");Ua.writeVarintField(5,Ka.extent||4096);var Ya={keys:[],values:[],keycache:{},valuecache:{}};for(Ea=0;Ea<Ka.length;Ea++)Ya.feature=Ka.feature(Ea),Ua.writeMessage(2,t,Ya);Ka=Ya.keys;for(Ea=0;Ea<Ka.length;Ea++)Ua.writeStringField(3,Ka[Ea]);Ya=Ya.values;for(Ea=0;Ea<Ya.length;Ea++)Ua.writeMessage(4,y,Ya[Ea])}function t(Ka,
Ua){var Ea=Ka.feature;void 0!==Ea.id&&Ua.writeVarintField(1,Ea.id);Ua.writeMessage(2,w,Ka);Ua.writeVarintField(3,Ea.type);Ua.writeMessage(4,x,Ea)}function w(Ka,Ua){var Ea=Ka.feature,Ya=Ka.keys,ab=Ka.values,Wa=Ka.keycache;Ka=Ka.valuecache;for(var Ja in Ea.properties){var Sa=Wa[Ja];void 0===Sa&&(Ya.push(Ja),Wa[Ja]=Sa=Ya.length-1);Ua.writeVarint(Sa);Sa=Ea.properties[Ja];var fb=typeof Sa;"string"!==fb&&"boolean"!==fb&&"number"!==fb&&(Sa=JSON.stringify(Sa));fb=fb+":"+Sa;var nb=Ka[fb];void 0===nb&&(ab.push(Sa),
Ka[fb]=nb=ab.length-1);Ua.writeVarint(nb)}}function x(Ka,Ua){var Ea=Ka.loadGeometry();Ka=Ka.type;for(var Ya=0,ab=0,Wa=Ea.length,Ja=0;Ja<Wa;Ja++){var Sa=Ea[Ja],fb=1;1===Ka&&(fb=Sa.length);Ua.writeVarint((fb<<3)+1);fb=3===Ka?Sa.length-1:Sa.length;for(var nb=0;nb<fb;nb++){1===nb&&1!==Ka&&Ua.writeVarint((fb-1<<3)+2);var Ha=Sa[nb].x-Ya,Ca=Sa[nb].y-ab;Ua.writeVarint(Ha<<1^Ha>>31);Ua.writeVarint(Ca<<1^Ca>>31);Ya+=Ha;ab+=Ca}3===Ka&&Ua.writeVarint(15)}}function y(Ka,Ua){var Ea=typeof Ka;"string"===Ea?Ua.writeStringField(1,
Ka):"boolean"===Ea?Ua.writeBooleanField(7,Ka):"number"===Ea&&(0!=Ka%1?Ua.writeDoubleField(3,Ka):0>Ka?Ua.writeSVarintField(6,Ka):Ua.writeVarintField(5,Ka))}function A(Ka,Ua,Ea,Ya){z(Ka,Ea,Ya);z(Ua,2*Ea,2*Ya);z(Ua,2*Ea+1,2*Ya+1)}function z(Ka,Ua,Ea){var Ya=Ka[Ua];Ka[Ua]=Ka[Ea];Ka[Ea]=Ya}function F(Ka,Ua){Ka=Ka.geometry.coordinates;return{x:Ka[0]/360+.5,y:B(Ka[1]),zoom:1/0,index:Ua,parentId:-1}}function D(Ka){return{type:"Feature",id:Ka.id,properties:u(Ka),geometry:{type:"Point",coordinates:[(Ya=Ka.x,
360*(Ya-.5)),(Ua=Ka.y,Ea=(180-360*Ua)*Math.PI/180,360*Math.atan(Math.exp(Ea))/Math.PI-90)]}};var Ua,Ea,Ya}function u(Ka){var Ua=Ka.numPoints,Ea=1E4<=Ua?Math.round(Ua/1E3)+"k":1E3<=Ua?Math.round(Ua/100)/10+"k":Ua;return I(I({},Ka.properties),{cluster:!0,cluster_id:Ka.id,point_count:Ua,point_count_abbreviated:Ea})}function B(Ka){Ka=Math.sin(Ka*Math.PI/180);Ka=.5-.25*Math.log((1+Ka)/(1-Ka))/Math.PI;return 0>Ka?0:1<Ka?1:Ka}function I(Ka,Ua){for(var Ea in Ua)Ka[Ea]=Ua[Ea];return Ka}function J(Ka){return Ka.x}
function N(Ka){return Ka.y}function M(Ka,Ua,Ea,Ya){Ka={id:void 0===Ka?null:Ka,type:Ua,geometry:Ea,tags:Ya,minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0};Ua=Ka.geometry;Ea=Ka.type;if("Point"===Ea||"MultiPoint"===Ea||"LineString"===Ea)E(Ka,Ua);else if("Polygon"===Ea||"MultiLineString"===Ea)for(Ea=0;Ea<Ua.length;Ea++)E(Ka,Ua[Ea]);else if("MultiPolygon"===Ea)for(Ea=0;Ea<Ua.length;Ea++)for(Ya=0;Ya<Ua[Ea].length;Ya++)E(Ka,Ua[Ea][Ya]);return Ka}function E(Ka,Ua){for(var Ea=0;Ea<Ua.length;Ea+=3)Ka.minX=Math.min(Ka.minX,
Ua[Ea]),Ka.minY=Math.min(Ka.minY,Ua[Ea+1]),Ka.maxX=Math.max(Ka.maxX,Ua[Ea]),Ka.maxY=Math.max(Ka.maxY,Ua[Ea+1])}function L(Ka,Ua,Ea,Ya){if(Ua.geometry){var ab=Ua.geometry.coordinates,Wa=Ua.geometry.type,Ja=Math.pow(Ea.tolerance/((1<<Ea.maxZoom)*Ea.extent),2),Sa=[],fb=Ua.id;if(Ea.promoteId?fb=Ua.properties[Ea.promoteId]:Ea.generateId&&(fb=Ya||0),"Point"===Wa)Q(ab,Sa);else if("MultiPoint"===Wa)for(var nb=0;nb<ab.length;nb++)Q(ab[nb],Sa);else if("LineString"===Wa)S(ab,Sa,Ja,!1);else if("MultiLineString"===
Wa){if(Ea.lineMetrics){for(nb=0;nb<ab.length;nb++)S(ab[nb],Sa=[],Ja,!1),Ka.push(M(fb,"LineString",Sa,Ua.properties));return}R(ab,Sa,Ja,!1)}else if("Polygon"===Wa)R(ab,Sa,Ja,!0);else{if("MultiPolygon"!==Wa){if("GeometryCollection"===Wa){for(nb=0;nb<Ua.geometry.geometries.length;nb++)L(Ka,{id:fb,geometry:Ua.geometry.geometries[nb],properties:Ua.properties},Ea,Ya);return}throw Error("Input data is not a valid GeoJSON object.");}for(nb=0;nb<ab.length;nb++)Ea=[],R(ab[nb],Ea,Ja,!0),Sa.push(Ea)}Ka.push(M(fb,
Wa,Sa,Ua.properties))}}function Q(Ka,Ua){Ua.push(Ka[0]/360+.5);Ua.push(O(Ka[1]));Ua.push(0)}function S(Ka,Ua,Ea,Ya){for(var ab,Wa,Ja=0,Sa=0;Sa<Ka.length;Sa++){var fb=Ka[Sa][0]/360+.5,nb=O(Ka[Sa][1]);Ua.push(fb);Ua.push(nb);Ua.push(0);0<Sa&&(Ja+=Ya?(ab*nb-fb*Wa)/2:Math.sqrt(Math.pow(fb-ab,2)+Math.pow(nb-Wa,2)));ab=fb;Wa=nb}Ka=Ua.length-3;Ua[2]=1;(function db(Ca,Qa,gb,Va){for(var qb,Kb=Va,Ob=gb-Qa>>1,cc=gb-Qa,kc=Ca[Qa],qc=Ca[Qa+1],Pc=Ca[gb],Qc=Ca[gb+1],cd=Qa+3;cd<gb;cd+=3){var gd=Ca[cd];var kd=Ca[cd+
1],Cb=kc,ic=qc,sc=Pc-Cb,wb=Qc-ic;if(0!==sc||0!==wb){var zb=((gd-Cb)*sc+(kd-ic)*wb)/(sc*sc+wb*wb);1<zb?(Cb=Pc,ic=Qc):0<zb&&(Cb+=sc*zb,ic+=wb*zb)}gd=(sc=gd-Cb)*sc+(wb=kd-ic)*wb;gd>Kb?(qb=cd,Kb=gd):gd===Kb&&(sc=Math.abs(cd-Ob),sc<cc&&(qb=cd,cc=sc))}Kb>Va&&(3<qb-Qa&&db(Ca,Qa,qb,Va),Ca[qb+2]=Kb,3<gb-qb&&db(Ca,qb,gb,Va))})(Ua,0,Ka,Ea);Ua[Ka+2]=1;Ua.size=Math.abs(Ja);Ua.start=0;Ua.end=Ua.size}function R(Ka,Ua,Ea,Ya){for(var ab=0;ab<Ka.length;ab++){var Wa=[];S(Ka[ab],Wa,Ea,Ya);Ua.push(Wa)}}function O(Ka){Ka=
Math.sin(Ka*Math.PI/180);Ka=.5-.25*Math.log((1+Ka)/(1-Ka))/Math.PI;return 0>Ka?0:1<Ka?1:Ka}function T(Ka,Ua,Ea,Ya,ab,Wa,Ja,Sa){if(Ya/=Ua,Wa>=(Ea/=Ua)&&Ja<Ya)return Ka;if(Ja<Ea||Wa>=Ya)return null;Ua=[];for(Wa=0;Wa<Ka.length;Wa++){Ja=Ka[Wa];var fb=Ja.geometry,nb=Ja.type,Ha=0===ab?Ja.minX:Ja.minY,Ca=0===ab?Ja.maxX:Ja.maxY;if(Ha>=Ea&&Ca<Ya)Ua.push(Ja);else if(!(Ca<Ea||Ha>=Ya)){Ha=[];if("Point"===nb||"MultiPoint"===nb){Ca=Ha;for(var Qa=Ea,gb=Ya,Va=ab,db=0;db<fb.length;db+=3){var qb=fb[db+Va];qb>=Qa&&
qb<=gb&&(Ca.push(fb[db]),Ca.push(fb[db+1]),Ca.push(fb[db+2]))}}else if("LineString"===nb)V(fb,Ha,Ea,Ya,ab,!1,Sa.lineMetrics);else if("MultiLineString"===nb)ba(fb,Ha,Ea,Ya,ab,!1);else if("Polygon"===nb)ba(fb,Ha,Ea,Ya,ab,!0);else if("MultiPolygon"===nb)for(Ca=0;Ca<fb.length;Ca++)Qa=[],ba(fb[Ca],Qa,Ea,Ya,ab,!0),Qa.length&&Ha.push(Qa);if(Ha.length)if(Sa.lineMetrics&&"LineString"===nb)for(Ca=0;Ca<Ha.length;Ca++)Ua.push(M(Ja.id,nb,Ha[Ca],Ja.tags));else"LineString"!==nb&&"MultiLineString"!==nb||(1===Ha.length?
(nb="LineString",Ha=Ha[0]):nb="MultiLineString"),"Point"!==nb&&"MultiPoint"!==nb||(nb=3===Ha.length?"Point":"MultiPoint"),Ua.push(M(Ja.id,nb,Ha,Ja.tags))}}return Ua.length?Ua:null}function V(Ka,Ua,Ea,Ya,ab,Wa,Ja){for(var Sa,fb,nb=X(Ka),Ha=0===ab?aa:ka,Ca=Ka.start,Qa=0;Qa<Ka.length-3;Qa+=3){var gb=Ka[Qa],Va=Ka[Qa+1],db=Ka[Qa+2],qb=Ka[Qa+3],Kb=Ka[Qa+4],Ob=0===ab?gb:Va,cc=0===ab?qb:Kb,kc=!1;Ja&&(Sa=Math.sqrt(Math.pow(gb-qb,2)+Math.pow(Va-Kb,2)));if(Ob<Ea)cc>Ea&&(fb=Ha(nb,gb,Va,qb,Kb,Ea),Ja&&(nb.start=
Ca+Sa*fb));else if(Ob>Ya)cc<Ya&&(fb=Ha(nb,gb,Va,qb,Kb,Ya),Ja&&(nb.start=Ca+Sa*fb));else{var qc=nb,Pc=Va;qc.push(gb);qc.push(Pc);qc.push(db)}cc<Ea&&Ob>=Ea&&(fb=Ha(nb,gb,Va,qb,Kb,Ea),kc=!0);cc>Ya&&Ob<=Ya&&(fb=Ha(nb,gb,Va,qb,Kb,Ya),kc=!0);!Wa&&kc&&(Ja&&(nb.end=Ca+Sa*fb),Ua.push(nb),nb=X(Ka));Ja&&(Ca+=Sa)}db=Ka.length-3;gb=Ka[db];Va=Ka[db+1];db=Ka[db+2];(Ob=0===ab?gb:Va)>=Ea&&Ob<=Ya&&(Ka=nb,Ea=db,Ka.push(gb),Ka.push(Va),Ka.push(Ea));db=nb.length-3;Wa&&3<=db&&(nb[db]!==nb[0]||nb[db+1]!==nb[1])&&(Wa=nb,
gb=nb[1],Va=nb[2],Wa.push(nb[0]),Wa.push(gb),Wa.push(Va));nb.length&&Ua.push(nb)}function X(Ka){var Ua=[];return Ua.size=Ka.size,Ua.start=Ka.start,Ua.end=Ka.end,Ua}function ba(Ka,Ua,Ea,Ya,ab,Wa){for(var Ja=0;Ja<Ka.length;Ja++)V(Ka[Ja],Ua,Ea,Ya,ab,Wa,!1)}function aa(Ka,Ua,Ea,Ya,ab,Wa){Ua=(Wa-Ua)/(Ya-Ua);return Ka.push(Wa),Ka.push(Ea+(ab-Ea)*Ua),Ka.push(1),Ua}function ka(Ka,Ua,Ea,Ya,ab,Wa){Ea=(Wa-Ea)/(ab-Ea);return Ka.push(Ua+(Ya-Ua)*Ea),Ka.push(Wa),Ka.push(1),Ea}function ha(Ka,Ua){for(var Ea=[],Ya=
0;Ya<Ka.length;Ya++){var ab=Ka[Ya],Wa=ab.type;if("Point"===Wa||"MultiPoint"===Wa||"LineString"===Wa)var Ja=ca(ab.geometry,Ua);else if("MultiLineString"===Wa||"Polygon"===Wa){Ja=[];for(var Sa=0;Sa<ab.geometry.length;Sa++)Ja.push(ca(ab.geometry[Sa],Ua))}else if("MultiPolygon"===Wa)for(Ja=[],Sa=0;Sa<ab.geometry.length;Sa++){for(var fb=[],nb=0;nb<ab.geometry[Sa].length;nb++)fb.push(ca(ab.geometry[Sa][nb],Ua));Ja.push(fb)}Ea.push(M(ab.id,Wa,Ja,ab.tags))}return Ea}function ca(Ka,Ua){var Ea=[];Ea.size=Ka.size;
void 0!==Ka.start&&(Ea.start=Ka.start,Ea.end=Ka.end);for(var Ya=0;Ya<Ka.length;Ya+=3)Ea.push(Ka[Ya]+Ua,Ka[Ya+1],Ka[Ya+2]);return Ea}function sa(Ka,Ua){if(Ka.transformed)return Ka;var Ea,Ya,ab=1<<Ka.z,Wa=Ka.x,Ja=Ka.y;for(Ea=0;Ea<Ka.features.length;Ea++){var Sa=Ka.features[Ea],fb=Sa.geometry;var nb=Sa.type;if(Sa.geometry=[],1===nb)for(nb=0;nb<fb.length;nb+=2)Sa.geometry.push([Math.round(Ua*(fb[nb]*ab-Wa)),Math.round(Ua*(fb[nb+1]*ab-Ja))]);else for(nb=0;nb<fb.length;nb++){var Ha=[];for(Ya=0;Ya<fb[nb].length;Ya+=
2)Ha.push([Math.round(Ua*(fb[nb][Ya]*ab-Wa)),Math.round(Ua*(fb[nb][Ya+1]*ab-Ja))]);Sa.geometry.push(Ha)}}return Ka.transformed=!0,Ka}function ma(Ka,Ua,Ea,Ya,ab,Wa){var Ja=Ya*Ya;if(0<Ya&&Ua.size<(ab?Ja:Ya))Ea.numPoints+=Ua.length/3;else{for(var Sa=[],fb=0;fb<Ua.length;fb+=3)(0===Ya||Ua[fb+2]>Ja)&&(Ea.numSimplified++,Sa.push(Ua[fb]),Sa.push(Ua[fb+1])),Ea.numPoints++;if(ab){Ua=Ya=0;Ea=Sa.length;for(ab=Ea-2;Ua<Ea;ab=Ua,Ua+=2)Ya+=(Sa[Ua]-Sa[ab])*(Sa[Ua+1]+Sa[ab+1]);if(0<Ya===Wa)for(Ua=0,Ea=Sa.length;Ua<
Ea/2;Ua+=2)Wa=Sa[Ua],Ya=Sa[Ua+1],Sa[Ua]=Sa[Ea-2-Ua],Sa[Ua+1]=Sa[Ea-1-Ua],Sa[Ea-2-Ua]=Wa,Sa[Ea-1-Ua]=Ya}Ka.push(Sa)}}function ra(Ka,Ua){var Ea=(Ua=this.options=function(Ya,ab){for(var Wa in ab)Ya[Wa]=ab[Wa];return Ya}(Object.create(this.options),Ua)).debug;if(Ea&&console.time("preprocess data"),0>Ua.maxZoom||24<Ua.maxZoom)throw Error("maxZoom should be in the 0-24 range");if(Ua.promoteId&&Ua.generateId)throw Error("promoteId and generateId cannot be used together.");Ka=function(Ya,ab){var Wa=[];if("FeatureCollection"===
Ya.type)for(var Ja=0;Ja<Ya.features.length;Ja++)L(Wa,Ya.features[Ja],ab,Ja);else L(Wa,"Feature"===Ya.type?Ya:{geometry:Ya},ab);return Wa}(Ka,Ua);this.tiles={};this.tileCoords=[];Ea&&(console.timeEnd("preprocess data"),console.log("index: maxZoom: %d, maxPoints: %d",Ua.indexMaxZoom,Ua.indexMaxPoints),console.time("generate tiles"),this.stats={},this.total=0);(Ka=function(Ya,ab){var Wa=ab.buffer/ab.extent,Ja=Ya,Sa=T(Ya,1,-1-Wa,Wa,0,-1,2,ab),fb=T(Ya,1,1-Wa,2+Wa,0,-1,2,ab);return(Sa||fb)&&(Ja=T(Ya,1,
-Wa,1+Wa,0,-1,2,ab)||[],Sa&&(Ja=ha(Sa,1).concat(Ja)),fb&&(Ja=Ja.concat(ha(fb,-1)))),Ja}(Ka,Ua)).length&&this.splitTile(Ka,0,0,0);Ea&&(Ka.length&&console.log("features: %d, points: %d",this.tiles[0].numFeatures,this.tiles[0].numPoints),console.timeEnd("generate tiles"),console.log("tiles generated:",this.total,JSON.stringify(this.stats)))}function qa(Ka,Ua){Ka=Ka.tileID.canonical;if(!this._geoJSONIndex)return Ua(null,null);Ka=this._geoJSONIndex.getTile(Ka.z,Ka.x,Ka.y);if(!Ka)return Ua(null,null);Ka=
new Ma(Ka.features);var Ea=Ia(Ka);0===Ea.byteOffset&&Ea.byteLength===Ea.buffer.byteLength||(Ea=new Uint8Array(Ea));Ua(null,{vectorTile:Ka,rawData:Ea.buffer})}var Y=function(Ka){this.keyCache={};Ka&&this.replace(Ka)};Y.prototype.replace=function(Ka){this._layerConfigs={};this._layers={};this.update(Ka,[])};Y.prototype.update=function(Ka,Ua){for(var Ea=this,Ya=0;Ya<Ka.length;Ya+=1){var ab=Ka[Ya];this._layerConfigs[ab.id]=ab;var Wa=this._layers[ab.id]=b.createStyleLayer(ab);Wa._featureFilter=b.featureFilter(Wa.filter);
this.keyCache[ab.id]&&delete this.keyCache[ab.id]}for(Ka=0;Ka<Ua.length;Ka+=1)Ya=Ua[Ka],delete this.keyCache[Ya],delete this._layerConfigs[Ya],delete this._layers[Ya];this.familiesBySource={};Ua=0;for(Ka=function(Sa,fb){for(var nb={},Ha=0;Ha<Sa.length;Ha++){var Ca;if(!(Ca=fb&&fb[Sa[Ha].id])){Ca=Sa[Ha];for(var Qa="",gb=0,Va=b.refProperties;gb<Va.length;gb+=1)Qa+="/"+k(Ca[Va[gb]]);Ca=Qa}fb&&(fb[Sa[Ha].id]=Ca);(Qa=nb[Ca])||(Qa=nb[Ca]=[]);Qa.push(Sa[Ha])}Sa=[];for(var db in nb)Sa.push(nb[db]);return Sa}(b.values(this._layerConfigs),
this.keyCache);Ua<Ka.length;Ua+=1)if(Ya=Ka[Ua].map(function(Sa){return Ea._layers[Sa.id]}),Wa=Ya[0],"none"!==Wa.visibility){var Ja=Wa.source||"";(ab=this.familiesBySource[Ja])||(ab=this.familiesBySource[Ja]={});Wa=Wa.sourceLayer||"_geojsonTileLayer";(Ja=ab[Wa])||(Ja=ab[Wa]=[]);Ja.push(Ya)}};var pa=function(Ka){var Ua={},Ea=[];for(nb in Ka){var Ya=Ka[nb],ab=Ua[nb]={},Wa;for(Wa in Ya){var Ja=Ya[+Wa];if(Ja&&0!==Ja.bitmap.width&&0!==Ja.bitmap.height){var Sa={x:0,y:0,w:Ja.bitmap.width+2,h:Ja.bitmap.height+
2};Ea.push(Sa);ab[Wa]={rect:Sa,metrics:Ja.metrics}}}}Ea=b.potpack(Ea);Ea=new b.AlphaImage({width:Ea.w||1,height:Ea.h||1});for(var fb in Ka){var nb=Ka[fb];for(var Ha in nb)(Ya=nb[+Ha])&&0!==Ya.bitmap.width&&0!==Ya.bitmap.height&&(ab=Ua[fb][Ha].rect,b.AlphaImage.copy(Ya.bitmap,Ea,{x:0,y:0},{x:ab.x+1,y:ab.y+1},Ya.bitmap))}this.image=Ea;this.positions=Ua};b.register("GlyphAtlas",pa);var oa=function(Ka){this.tileID=new b.OverscaledTileID(Ka.tileID.overscaledZ,Ka.tileID.wrap,Ka.tileID.canonical.z,Ka.tileID.canonical.x,
Ka.tileID.canonical.y);this.uid=Ka.uid;this.zoom=Ka.zoom;this.pixelRatio=Ka.pixelRatio;this.tileSize=Ka.tileSize;this.source=Ka.source;this.overscaling=this.tileID.overscaleFactor();this.showCollisionBoxes=Ka.showCollisionBoxes;this.collectResourceTiming=!!Ka.collectResourceTiming;this.returnDependencies=!!Ka.returnDependencies;this.promoteId=Ka.promoteId};oa.prototype.parse=function(Ka,Ua,Ea,Ya,ab){function Wa(){if(nb)return ab(nb);if(Ha&&Ca&&Qa){var Pc=new pa(Ha),Qc=new b.ImageAtlas(Ca,Qa),cd;for(cd in gb){var gd=
gb[cd];gd instanceof b.SymbolBucket?(e(gd.layers,this.zoom,Ea),b.performSymbolLayout(gd,Ha,Pc.positions,Ca,Qc.iconPositions,this.showCollisionBoxes,this.tileID.canonical)):gd.hasPattern&&(gd instanceof b.LineBucket||gd instanceof b.FillBucket||gd instanceof b.FillExtrusionBucket)&&(e(gd.layers,this.zoom,Ea),gd.addFeatures(Va,this.tileID.canonical,Qc.patternPositions))}this.status="done";ab(null,{buckets:b.values(gb).filter(function(kd){return!kd.isEmpty()}),featureIndex:fb,collisionBoxArray:this.collisionBoxArray,
glyphAtlasImage:Pc.image,imageAtlas:Qc,glyphMap:this.returnDependencies?Ha:null,iconMap:this.returnDependencies?Ca:null,glyphPositions:this.returnDependencies?Pc.positions:null})}}var Ja=this;this.status="parsing";this.data=Ka;this.collisionBoxArray=new b.CollisionBoxArray;var Sa=new b.DictionaryCoder(Object.keys(Ka.layers).sort()),fb=new b.FeatureIndex(this.tileID,this.promoteId);fb.bucketLayerIDs=[];var nb,Ha,Ca,Qa,gb={},Va={featureIndex:fb,iconDependencies:{},patternDependencies:{},glyphDependencies:{},
availableImages:Ea};Ua=Ua.familiesBySource[this.source];for(var db in Ua){var qb=Ka.layers[db];if(qb){1===qb.version&&b.warnOnce('Vector tile source "'+this.source+'" layer "'+db+'" does not use vector tile spec v2 and therefore may have some rendering errors.');for(var Kb=Sa.encode(db),Ob=[],cc=0;cc<qb.length;cc++){var kc=qb.feature(cc),qc=fb.getId(kc,db);Ob.push({feature:kc,id:qc,index:cc,sourceLayerIndex:Kb})}qb=0;for(cc=Ua[db];qb<cc.length;qb+=1)kc=cc[qb],qc=kc[0],qc.minzoom&&this.zoom<Math.floor(qc.minzoom)||
qc.maxzoom&&this.zoom>=qc.maxzoom||"none"!==qc.visibility&&(e(kc,this.zoom,Ea),(gb[qc.id]=qc.createBucket({index:fb.bucketLayerIDs.length,layers:kc,zoom:this.zoom,pixelRatio:this.pixelRatio,overscaling:this.overscaling,collisionBoxArray:this.collisionBoxArray,sourceLayerIndex:Kb,sourceID:this.source})).populate(Ob,Va,this.tileID.canonical),fb.bucketLayerIDs.push(kc.map(function(Pc){return Pc.id})))}}Ka=b.mapObject(Va.glyphDependencies,function(Pc){return Object.keys(Pc).map(Number)});Object.keys(Ka).length?
Ya.send("getGlyphs",{uid:this.uid,stacks:Ka},function(Pc,Qc){nb||(nb=Pc,Ha=Qc,Wa.call(Ja))}):Ha={};Ka=Object.keys(Va.iconDependencies);Ka.length?Ya.send("getImages",{icons:Ka,source:this.source,tileID:this.tileID,type:"icons"},function(Pc,Qc){nb||(nb=Pc,Ca=Qc,Wa.call(Ja))}):Ca={};Ka=Object.keys(Va.patternDependencies);Ka.length?Ya.send("getImages",{icons:Ka,source:this.source,tileID:this.tileID,type:"patterns"},function(Pc,Qc){nb||(nb=Pc,Qa=Qc,Wa.call(Ja))}):Qa={};Wa.call(this)};var ua=function(Ka,
Ua,Ea,Ya){this.actor=Ka;this.layerIndex=Ua;this.availableImages=Ea;this.loadVectorData=Ya||h;this.loading={};this.loaded={}};ua.prototype.loadTile=function(Ka,Ua){var Ea=this,Ya=Ka.uid;this.loading||(this.loading={});var ab=!!(Ka&&Ka.request&&Ka.request.collectResourceTiming)&&new b.RequestPerformance(Ka.request),Wa=this.loading[Ya]=new oa(Ka);Wa.abort=this.loadVectorData(Ka,function(Ja,Sa){if(delete Ea.loading[Ya],Ja||!Sa)return Wa.status="done",Ea.loaded[Ya]=Wa,Ua(Ja);var fb=Sa.rawData,nb={};Sa.expires&&
(nb.expires=Sa.expires);Sa.cacheControl&&(nb.cacheControl=Sa.cacheControl);var Ha={};ab&&(Ja=ab.finish())&&(Ha.resourceTiming=JSON.parse(JSON.stringify(Ja)));Wa.vectorTile=Sa.vectorTile;Wa.parse(Sa.vectorTile,Ea.layerIndex,Ea.availableImages,Ea.actor,function(Ca,Qa){if(Ca||!Qa)return Ua(Ca);Ua(null,b.extend({rawTileData:fb.slice(0)},Qa,nb,Ha))});Ea.loaded=Ea.loaded||{};Ea.loaded[Ya]=Wa})};ua.prototype.reloadTile=function(Ka,Ua){var Ea=this,Ya=this.loaded,ab=Ka.uid,Wa=this;if(Ya&&Ya[ab]){var Ja=Ya[ab];
Ja.showCollisionBoxes=Ka.showCollisionBoxes;Ka=function(Sa,fb){var nb=Ja.reloadCallback;nb&&(delete Ja.reloadCallback,Ja.parse(Ja.vectorTile,Wa.layerIndex,Ea.availableImages,Wa.actor,nb));Ua(Sa,fb)};"parsing"===Ja.status?Ja.reloadCallback=Ka:"done"===Ja.status&&(Ja.vectorTile?Ja.parse(Ja.vectorTile,this.layerIndex,this.availableImages,this.actor,Ka):Ka())}};ua.prototype.abortTile=function(Ka,Ua){var Ea=this.loading;Ka=Ka.uid;Ea&&Ea[Ka]&&Ea[Ka].abort&&(Ea[Ka].abort(),delete Ea[Ka]);Ua()};ua.prototype.removeTile=
function(Ka,Ua){var Ea=this.loaded;Ka=Ka.uid;Ea&&Ea[Ka]&&delete Ea[Ka];Ua()};var ya=b.window.ImageBitmap,ja=function(){this.loaded={}};ja.prototype.loadTile=function(Ka,Ua){var Ea=Ka.uid,Ya=Ka.encoding;Ka=Ka.rawImageData;Ka=ya&&Ka instanceof ya?this.getImageData(Ka):Ka;Ya=new b.DEMData(Ea,Ka,Ya);this.loaded=this.loaded||{};this.loaded[Ea]=Ya;Ua(null,Ya)};ja.prototype.getImageData=function(Ka){this.offscreenCanvas&&this.offscreenCanvasContext||(this.offscreenCanvas=new OffscreenCanvas(Ka.width,Ka.height),
this.offscreenCanvasContext=this.offscreenCanvas.getContext("2d"));this.offscreenCanvas.width=Ka.width;this.offscreenCanvas.height=Ka.height;this.offscreenCanvasContext.drawImage(Ka,0,0,Ka.width,Ka.height);Ka=this.offscreenCanvasContext.getImageData(-1,-1,Ka.width+2,Ka.height+2);return this.offscreenCanvasContext.clearRect(0,0,this.offscreenCanvas.width,this.offscreenCanvas.height),new b.RGBAImage({width:Ka.width,height:Ka.height},Ka.data)};ja.prototype.removeTile=function(Ka){var Ua=this.loaded;
Ka=Ka.uid;Ua&&Ua[Ka]&&delete Ua[Ka]};var za=b.vectorTile.VectorTileFeature.prototype.toGeoJSON,Ba=function(Ka){this._feature=Ka;this.extent=b.EXTENT;this.type=Ka.type;this.properties=Ka.tags;"id"in Ka&&!isNaN(Ka.id)&&(this.id=parseInt(Ka.id,10))};Ba.prototype.loadGeometry=function(){if(1===this._feature.type){for(var Ka=[],Ua=0,Ea=this._feature.geometry;Ua<Ea.length;Ua+=1){var Ya=Ea[Ua];Ka.push([new b.Point$1(Ya[0],Ya[1])])}return Ka}Ka=[];Ua=0;for(Ea=this._feature.geometry;Ua<Ea.length;Ua+=1){Ya=
[];for(var ab=0,Wa=Ea[Ua];ab<Wa.length;ab+=1){var Ja=Wa[ab];Ya.push(new b.Point$1(Ja[0],Ja[1]))}Ka.push(Ya)}return Ka};Ba.prototype.toGeoJSON=function(Ka,Ua,Ea){return za.call(this,Ka,Ua,Ea)};var Ma=function(Ka){this.layers={_geojsonTileLayer:this};this.name="_geojsonTileLayer";this.extent=b.EXTENT;this.length=Ka.length;this._features=Ka};Ma.prototype.feature=function(Ka){return new Ba(this._features[Ka])};var Oa=b.vectorTile.VectorTileFeature;g.prototype.feature=function(Ka){return new d(this.features[Ka],
this.options.extent)};d.prototype.loadGeometry=function(){var Ka=this.rawGeometry;this.geometry=[];for(var Ua=0;Ua<Ka.length;Ua++){for(var Ea=Ka[Ua],Ya=[],ab=0;ab<Ea.length;ab++)Ya.push(new b.Point$1(Ea[ab][0],Ea[ab][1]));this.geometry.push(Ya)}return this.geometry};d.prototype.bbox=function(){this.geometry||this.loadGeometry();for(var Ka=this.geometry,Ua=1/0,Ea=-1/0,Ya=1/0,ab=-1/0,Wa=0;Wa<Ka.length;Wa++)for(var Ja=Ka[Wa],Sa=0;Sa<Ja.length;Sa++){var fb=Ja[Sa];Ua=Math.min(Ua,fb.x);Ea=Math.max(Ea,fb.x);
Ya=Math.min(Ya,fb.y);ab=Math.max(ab,fb.y)}return[Ua,Ya,Ea,ab]};d.prototype.toGeoJSON=Oa.prototype.toGeoJSON;var Ia=p;Ia.fromVectorTileJs=p;Ia.fromGeojsonVt=function(Ka,Ua){Ua=Ua||{};var Ea={},Ya;for(Ya in Ka)Ea[Ya]=new g(Ka[Ya].features,Ua),Ea[Ya].name=Ya,Ea[Ya].version=Ua.version,Ea[Ya].extent=Ua.extent;return p({layers:Ea})};Ia.GeoJSONWrapper=g;var Pa=function(Ka){return Ka[0]},Fa=function(Ka){return Ka[1]},Na=function(Ka,Ua,Ea,Ya,ab){void 0===Ua&&(Ua=Pa);void 0===Ea&&(Ea=Fa);void 0===Ya&&(Ya=64);
void 0===ab&&(ab=Float64Array);this.nodeSize=Ya;this.points=Ka;var Wa=this.ids=new (65536>Ka.length?Uint16Array:Uint32Array)(Ka.length);ab=this.coords=new ab(2*Ka.length);for(var Ja=0;Ja<Ka.length;Ja++)Wa[Ja]=Ja,ab[2*Ja]=Ua(Ka[Ja]),ab[2*Ja+1]=Ea(Ka[Ja]);!function Va(fb,nb,Ha,Ca,Qa,gb){if(!(Qa-Ca<=Ha)){var db=Ca+Qa>>1;!function Qc(Kb,Ob,cc,kc,qc,Pc){for(;qc>kc;){if(600<qc-kc){var cd=qc-kc+1,gd=cc-kc+1,kd=Math.log(cd),Cb=.5*Math.exp(2*kd/3);kd=.5*Math.sqrt(kd*Cb*(cd-Cb)/cd)*(0>gd-cd/2?-1:1);Qc(Kb,Ob,
cc,Math.max(kc,Math.floor(cc-gd*Cb/cd+kd)),Math.min(qc,Math.floor(cc+(cd-gd)*Cb/cd+kd)),Pc)}cd=Ob[2*cc+Pc];gd=kc;Cb=qc;A(Kb,Ob,kc,cc);for(Ob[2*qc+Pc]>cd&&A(Kb,Ob,kc,qc);gd<Cb;){A(Kb,Ob,gd,Cb);gd++;for(Cb--;Ob[2*gd+Pc]<cd;)gd++;for(;Ob[2*Cb+Pc]>cd;)Cb--}Ob[2*kc+Pc]===cd?A(Kb,Ob,kc,Cb):A(Kb,Ob,++Cb,qc);Cb<=cc&&(kc=Cb+1);cc<=Cb&&(qc=Cb-1)}}(fb,nb,db,Ca,Qa,gb%2);Va(fb,nb,Ha,Ca,db-1,gb+1);Va(fb,nb,Ha,db+1,Qa,gb+1)}}(Wa,ab,Ya,0,Wa.length-1,0)};Na.prototype.range=function(Ka,Ua,Ea,Ya){for(var ab=this.ids,
Wa=this.coords,Ja=this.nodeSize,Sa,fb,nb=[0,ab.length-1,0],Ha=[];nb.length;){var Ca=nb.pop(),Qa=nb.pop(),gb=nb.pop();if(Qa-gb<=Ja)for(Ca=gb;Ca<=Qa;Ca++)fb=Wa[2*Ca+1],(Sa=Wa[2*Ca])>=Ka&&Sa<=Ea&&fb>=Ua&&fb<=Ya&&Ha.push(ab[Ca]);else{var Va=Math.floor((gb+Qa)/2);fb=Wa[2*Va+1];(Sa=Wa[2*Va])>=Ka&&Sa<=Ea&&fb>=Ua&&fb<=Ya&&Ha.push(ab[Va]);var db=(Ca+1)%2;(0===Ca?Ka<=Sa:Ua<=fb)&&(nb.push(gb),nb.push(Va-1),nb.push(db));(0===Ca?Ea>=Sa:Ya>=fb)&&(nb.push(Va+1),nb.push(Qa),nb.push(db))}}return Ha};Na.prototype.within=
function(Ka,Ua,Ea){for(var Ya=this.ids,ab=this.coords,Wa=this.nodeSize,Ja=[0,Ya.length-1,0],Sa=[],fb=Ea*Ea;Ja.length;){var nb=Ja.pop(),Ha=Ja.pop(),Ca=Ja.pop();if(Ha-Ca<=Wa)for(nb=Ca;nb<=Ha;nb++){Ca=ab[2*nb]-Ka;var Qa=ab[2*nb+1]-Ua;Ca*Ca+Qa*Qa<=fb&&Sa.push(Ya[nb])}else{Qa=Math.floor((Ca+Ha)/2);var gb=ab[2*Qa],Va=ab[2*Qa+1],db=gb-Ka,qb=Va-Ua;db*db+qb*qb<=fb&&Sa.push(Ya[Qa]);db=(nb+1)%2;(0===nb?Ka-Ea<=gb:Ua-Ea<=Va)&&(Ja.push(Ca),Ja.push(Qa-1),Ja.push(db));(0===nb?Ka+Ea>=gb:Ua+Ea>=Va)&&(Ja.push(Qa+1),
Ja.push(Ha),Ja.push(db))}}return Sa};var $a={minZoom:0,maxZoom:16,radius:40,extent:512,nodeSize:64,log:!1,generateId:!1,reduce:null,map:function(Ka){return Ka}},cb=function(Ka){this.options=I(Object.create($a),Ka);this.trees=Array(this.options.maxZoom+1)};cb.prototype.load=function(Ka){var Ua=this.options,Ea=Ua.log,Ya=Ua.minZoom,ab=Ua.maxZoom;Ua=Ua.nodeSize;Ea&&console.time("total time");var Wa="prepare "+Ka.length+" points";Ea&&console.time(Wa);this.points=Ka;for(var Ja=[],Sa=0;Sa<Ka.length;Sa++)Ka[Sa].geometry&&
Ja.push(F(Ka[Sa],Sa));this.trees[ab+1]=new Na(Ja,J,N,Ua,Float32Array);Ea&&console.timeEnd(Wa);for(Ka=ab;Ka>=Ya;Ka--)ab=+Date.now(),Ja=this._cluster(Ja,Ka),this.trees[Ka]=new Na(Ja,J,N,Ua,Float32Array),Ea&&console.log("z%d: %d clusters in %dms",Ka,Ja.length,+Date.now()-ab);return Ea&&console.timeEnd("total time"),this};cb.prototype.getClusters=function(Ka,Ua){var Ea=((Ka[0]+180)%360+360)%360-180,Ya=Math.max(-90,Math.min(90,Ka[1])),ab=180===Ka[2]?180:((Ka[2]+180)%360+360)%360-180,Wa=Math.max(-90,Math.min(90,
Ka[3]));if(360<=Ka[2]-Ka[0])Ea=-180,ab=180;else if(Ea>ab)return Ea=this.getClusters([Ea,Ya,180,Wa],Ua),Ya=this.getClusters([-180,Ya,ab,Wa],Ua),Ea.concat(Ya);Ua=this.trees[this._limitZoom(Ua)];Ka=[];var Ja=0;for(Ya=Ua.range(Ea/360+.5,B(Wa),ab/360+.5,B(Ya));Ja<Ya.length;Ja+=1)ab=Ua.points[Ya[Ja]],Ka.push(ab.numPoints?D(ab):this.points[ab.index]);return Ka};cb.prototype.getChildren=function(Ka){var Ua=this._getOriginId(Ka),Ea=this._getOriginZoom(Ka),Ya=this.trees[Ea];if(!Ya)throw Error("No cluster with the specified id.");
var ab=Ya.points[Ua];if(!ab)throw Error("No cluster with the specified id.");Ua=[];var Wa=0;for(Ea=Ya.within(ab.x,ab.y,this.options.radius/(this.options.extent*Math.pow(2,Ea-1)));Wa<Ea.length;Wa+=1)ab=Ya.points[Ea[Wa]],ab.parentId===Ka&&Ua.push(ab.numPoints?D(ab):this.points[ab.index]);if(0===Ua.length)throw Error("No cluster with the specified id.");return Ua};cb.prototype.getLeaves=function(Ka,Ua,Ea){var Ya=[];return this._appendLeaves(Ya,Ka,Ua||10,Ea||0,0),Ya};cb.prototype.getTile=function(Ka,
Ua,Ea){var Ya=this.trees[this._limitZoom(Ka)];Ka=Math.pow(2,Ka);var ab=this.options;ab=ab.radius/ab.extent;var Wa=(Ea-ab)/Ka,Ja=(Ea+1+ab)/Ka,Sa={features:[]};return this._addTileFeatures(Ya.range((Ua-ab)/Ka,Wa,(Ua+1+ab)/Ka,Ja),Ya.points,Ua,Ea,Ka,Sa),0===Ua&&this._addTileFeatures(Ya.range(1-ab/Ka,Wa,1,Ja),Ya.points,Ka,Ea,Ka,Sa),Ua===Ka-1&&this._addTileFeatures(Ya.range(0,Wa,ab/Ka,Ja),Ya.points,-1,Ea,Ka,Sa),Sa.features.length?Sa:null};cb.prototype.getClusterExpansionZoom=function(Ka){for(var Ua=this._getOriginZoom(Ka)-
1;Ua<=this.options.maxZoom;){Ka=this.getChildren(Ka);if(Ua++,1!==Ka.length)break;Ka=Ka[0].properties.cluster_id}return Ua};cb.prototype._appendLeaves=function(Ka,Ua,Ea,Ya,ab){var Wa=0;for(Ua=this.getChildren(Ua);Wa<Ua.length;Wa+=1){var Ja=Ua[Wa],Sa=Ja.properties;if(Sa&&Sa.cluster?ab+Sa.point_count<=Ya?ab+=Sa.point_count:ab=this._appendLeaves(Ka,Sa.cluster_id,Ea,Ya,ab):ab<Ya?ab++:Ka.push(Ja),Ka.length===Ea)break}return ab};cb.prototype._addTileFeatures=function(Ka,Ua,Ea,Ya,ab,Wa){for(var Ja=0;Ja<Ka.length;Ja+=
1){var Sa=Ua[Ka[Ja]],fb=Sa.numPoints,nb={type:1,geometry:[[Math.round(this.options.extent*(Sa.x*ab-Ea)),Math.round(this.options.extent*(Sa.y*ab-Ya))]],tags:fb?u(Sa):this.points[Sa.index].properties},Ha=void 0;fb?Ha=Sa.id:this.options.generateId?Ha=Sa.index:this.points[Sa.index].id&&(Ha=this.points[Sa.index].id);void 0!==Ha&&(nb.id=Ha);Wa.features.push(nb)}};cb.prototype._limitZoom=function(Ka){return Math.max(this.options.minZoom,Math.min(Ka,this.options.maxZoom+1))};cb.prototype._cluster=function(Ka,
Ua){var Ea=[],Ya=this.options,ab=Ya.reduce;Ya=Ya.radius/(Ya.extent*Math.pow(2,Ua));for(var Wa=0;Wa<Ka.length;Wa++){var Ja=Ka[Wa];if(!(Ja.zoom<=Ua)){Ja.zoom=Ua;for(var Sa=this.trees[Ua+1],fb=Sa.within(Ja.x,Ja.y,Ya),nb=Ja.numPoints||1,Ha=Ja.x*nb,Ca=Ja.y*nb,Qa=ab&&1<nb?this._map(Ja,!0):null,gb=(Wa<<5)+(Ua+1)+this.points.length,Va=0;Va<fb.length;Va+=1){var db=Sa.points[fb[Va]];if(!(db.zoom<=Ua)){db.zoom=Ua;var qb=db.numPoints||1;Ha+=db.x*qb;Ca+=db.y*qb;nb+=qb;db.parentId=gb;ab&&(Qa||(Qa=this._map(Ja,
!0)),ab(Qa,this._map(db)))}}1===nb?Ea.push(Ja):(Ja.parentId=gb,Ea.push({x:Ha/nb,y:Ca/nb,zoom:1/0,id:gb,parentId:-1,numPoints:nb,properties:Qa}))}}return Ea};cb.prototype._getOriginId=function(Ka){return Ka-this.points.length>>5};cb.prototype._getOriginZoom=function(Ka){return(Ka-this.points.length)%32};cb.prototype._map=function(Ka,Ua){if(Ka.numPoints)return Ua?I({},Ka.properties):Ka.properties;Ka=this.points[Ka.index].properties;var Ea=this.options.map(Ka);return Ua&&Ea===Ka?I({},Ea):Ea};ra.prototype.options=
{maxZoom:14,indexMaxZoom:5,indexMaxPoints:1E5,tolerance:3,extent:4096,buffer:64,lineMetrics:!1,promoteId:null,generateId:!1,debug:0};ra.prototype.splitTile=function(Ka,Ua,Ea,Ya,ab,Wa,Ja){for(var Sa=[Ka,Ua,Ea,Ya],fb=this.options,nb=fb.debug;Sa.length;){Ya=Sa.pop();Ea=Sa.pop();Ua=Sa.pop();Ka=Sa.pop();var Ha=1<<Ua,Ca=32*((1<<Ua)*Ya+Ea)+Ua,Qa=this.tiles[Ca],gb;if(gb=!Qa){1<nb&&console.time("creation");Qa=this.tiles;gb=Ka;for(var Va=fb,db=Ua===Va.maxZoom?0:Va.tolerance/((1<<Ua)*Va.extent),qb={features:[],
numPoints:0,numSimplified:0,numFeatures:0,source:null,x:Ea,y:Ya,z:Ua,transformed:!1,minX:2,minY:1,maxX:-1,maxY:0},Kb=0;Kb<gb.length;Kb++){qb.numFeatures++;var Ob=void 0,cc=qb,kc=gb[Kb],qc=db,Pc=Va,Qc=kc.geometry,cd=kc.type,gd=[];if("Point"===cd||"MultiPoint"===cd)for(var kd=0;kd<Qc.length;kd+=3)gd.push(Qc[kd]),gd.push(Qc[kd+1]),cc.numPoints++,cc.numSimplified++;else if("LineString"===cd)ma(gd,Qc,cc,qc,!1,!1);else if("MultiLineString"===cd||"Polygon"===cd)for(kd=0;kd<Qc.length;kd++)ma(gd,Qc[kd],cc,
qc,"Polygon"===cd,0===kd);else if("MultiPolygon"===cd)for(var Cb=0;Cb<Qc.length;Cb++){var ic=Qc[Cb];for(kd=0;kd<ic.length;kd++)ma(gd,ic[kd],cc,qc,!0,0===kd)}if(gd.length){qc=kc.tags||null;if("LineString"===cd&&Pc.lineMetrics){for(Ob in qc={},kc.tags)qc[Ob]=kc.tags[Ob];qc.mapbox_clip_start=Qc.start/Qc.size;qc.mapbox_clip_end=Qc.end/Qc.size}Ob={geometry:gd,type:"Polygon"===cd||"MultiPolygon"===cd?3:"LineString"===cd||"MultiLineString"===cd?2:1,tags:qc};null!==kc.id&&(Ob.id=kc.id);cc.features.push(Ob)}cc=
gb[Kb].minX;kc=gb[Kb].minY;Ob=gb[Kb].maxX;Pc=gb[Kb].maxY;cc<qb.minX&&(qb.minX=cc);kc<qb.minY&&(qb.minY=kc);Ob>qb.maxX&&(qb.maxX=Ob);Pc>qb.maxY&&(qb.maxY=Pc)}gb=(Qa=Qa[Ca]=qb,this.tileCoords.push({z:Ua,x:Ea,y:Ya}),nb)}gb&&(1<nb&&(console.log("tile z%d-%d-%d (features: %d, points: %d, simplified: %d)",Ua,Ea,Ya,Qa.numFeatures,Qa.numPoints,Qa.numSimplified),console.timeEnd("creation")),Ca="z"+Ua,this.stats[Ca]=(this.stats[Ca]||0)+1,this.total++);if(Qa.source=Ka,ab){if(Ua===fb.maxZoom||Ua===ab)continue;
Ca=1<<ab-Ua;if(Ea!==Math.floor(Wa/Ca)||Ya!==Math.floor(Ja/Ca))continue}else if(Ua===fb.indexMaxZoom||Qa.numPoints<=fb.indexMaxPoints)continue;if(Qa.source=null,0!==Ka.length)1<nb&&console.time("clipping"),Kb=.5*fb.buffer/fb.extent,cc=.5-Kb,kc=.5+Kb,Ob=1+Kb,Ca=gb=Va=db=null,qb=T(Ka,Ha,Ea-Kb,Ea+kc,0,Qa.minX,Qa.maxX,fb),Ka=T(Ka,Ha,Ea+cc,Ea+Ob,0,Qa.minX,Qa.maxX,fb),qb&&(Ca=T(qb,Ha,Ya-Kb,Ya+kc,1,Qa.minY,Qa.maxY,fb),gb=T(qb,Ha,Ya+cc,Ya+Ob,1,Qa.minY,Qa.maxY,fb)),Ka&&(Va=T(Ka,Ha,Ya-Kb,Ya+kc,1,Qa.minY,Qa.maxY,
fb),db=T(Ka,Ha,Ya+cc,Ya+Ob,1,Qa.minY,Qa.maxY,fb)),1<nb&&console.timeEnd("clipping"),Sa.push(Ca||[],Ua+1,2*Ea,2*Ya),Sa.push(gb||[],Ua+1,2*Ea,2*Ya+1),Sa.push(Va||[],Ua+1,2*Ea+1,2*Ya),Sa.push(db||[],Ua+1,2*Ea+1,2*Ya+1)}};ra.prototype.getTile=function(Ka,Ua,Ea){var Ya=this.options,ab=Ya.extent;Ya=Ya.debug;if(0>Ka||24<Ka)return null;var Wa=1<<Ka;Wa=Ua=(Ua%Wa+Wa)%Wa;Wa=32*((1<<Ka)*Ea+Wa)+Ka;if(this.tiles[Wa])return sa(this.tiles[Wa],ab);1<Ya&&console.log("drilling down to z%d-%d-%d",Ka,Ua,Ea);for(var Ja,
Sa=Ka,fb=Ua,nb=Ea;!Ja&&0<Sa;)Sa--,fb=Math.floor(fb/2),nb=Math.floor(nb/2),Ja=this.tiles[32*((1<<Sa)*nb+fb)+Sa];return Ja&&Ja.source?(1<Ya&&console.log("found parent tile z%d-%d-%d",Sa,fb,nb),1<Ya&&console.time("drilling down"),this.splitTile(Ja.source,Sa,fb,nb,Ka,Ua,Ea),1<Ya&&console.timeEnd("drilling down"),this.tiles[Wa]?sa(this.tiles[Wa],ab):null):null};var mb=function(Ka){function Ua(Ea,Ya,ab,Wa){Ka.call(this,Ea,Ya,ab,qa);Wa&&(this.loadGeoJSON=Wa)}return Ka&&(Ua.__proto__=Ka),(Ua.prototype=Object.create(Ka&&
Ka.prototype)).constructor=Ua,Ua.prototype.loadData=function(Ea,Ya){this._pendingCallback&&this._pendingCallback(null,{abandoned:!0});this._pendingCallback=Ya;this._pendingLoadDataParams=Ea;this._state&&"Idle"!==this._state?this._state="NeedsLoadData":(this._state="Coalescing",this._loadData())},Ua.prototype._loadData=function(){var Ea=this;if(this._pendingCallback&&this._pendingLoadDataParams){var Ya=this._pendingCallback,ab=this._pendingLoadDataParams;delete this._pendingCallback;delete this._pendingLoadDataParams;
var Wa=!!(ab&&ab.request&&ab.request.collectResourceTiming)&&new b.RequestPerformance(ab.request);this.loadGeoJSON(ab,function(Ja,Sa){if(Ja||!Sa)return Ya(Ja);if("object"!=typeof Sa)return Ya(Error("Input data given to '"+ab.source+"' is not a valid GeoJSON object."));!function Ca(nb,Ha){var Qa=nb&&nb.type;if("FeatureCollection"===Qa)for(Qa=0;Qa<nb.features.length;Qa++)Ca(nb.features[Qa],Ha);else if("GeometryCollection"===Qa)for(Qa=0;Qa<nb.geometries.length;Qa++)Ca(nb.geometries[Qa],Ha);else if("Feature"===
Qa)Ca(nb.geometry,Ha);else if("Polygon"===Qa)l(nb.coordinates,Ha);else if("MultiPolygon"===Qa)for(Qa=0;Qa<nb.coordinates.length;Qa++)l(nb.coordinates[Qa],Ha);return nb}(Sa,!0);try{Ea._geoJSONIndex=ab.cluster?(new cb(function(nb){var Ha=nb.superclusterOptions;nb=nb.clusterProperties;if(!nb||!Ha)return Ha;for(var Ca={},Qa={},gb={accumulated:null,zoom:0},Va={properties:null},db=Object.keys(nb),qb=0;qb<db.length;qb+=1){var Kb=db[qb],Ob=nb[Kb],cc=Ob[0];Ob=b.createExpression(Ob[1]);cc=b.createExpression("string"==
typeof cc?[cc,["accumulated"],["get",Kb]]:cc);Ca[Kb]=Ob.value;Qa[Kb]=cc.value}return Ha.map=function(kc){Va.properties=kc;kc={};for(var qc=0;qc<db.length;qc+=1){var Pc=db[qc];kc[Pc]=Ca[Pc].evaluate(gb,Va)}return kc},Ha.reduce=function(kc,qc){Va.properties=qc;for(qc=0;qc<db.length;qc+=1){var Pc=db[qc];gb.accumulated=kc[Pc];kc[Pc]=Qa[Pc].evaluate(gb,Va)}},Ha}(ab))).load(Sa.features):new ra(Sa,ab.geojsonVtOptions)}catch(nb){return Ya(nb)}Ea.loaded={};Ja={};Wa&&(Sa=Wa.finish())&&(Ja.resourceTiming={},
Ja.resourceTiming[ab.source]=JSON.parse(JSON.stringify(Sa)));Ya(null,Ja)})}},Ua.prototype.coalesce=function(){"Coalescing"===this._state?this._state="Idle":"NeedsLoadData"===this._state&&(this._state="Coalescing",this._loadData())},Ua.prototype.reloadTile=function(Ea,Ya){var ab=this.loaded;return ab&&ab[Ea.uid]?Ka.prototype.reloadTile.call(this,Ea,Ya):this.loadTile(Ea,Ya)},Ua.prototype.loadGeoJSON=function(Ea,Ya){if(Ea.request)b.getJSON(Ea.request,Ya);else{if("string"!=typeof Ea.data)return Ya(Error("Input data given to '"+
Ea.source+"' is not a valid GeoJSON object."));try{return Ya(null,JSON.parse(Ea.data))}catch(ab){return Ya(Error("Input data given to '"+Ea.source+"' is not a valid GeoJSON object."))}}},Ua.prototype.removeSource=function(Ea,Ya){this._pendingCallback&&this._pendingCallback(null,{abandoned:!0});Ya()},Ua.prototype.getClusterExpansionZoom=function(Ea,Ya){try{Ya(null,this._geoJSONIndex.getClusterExpansionZoom(Ea.clusterId))}catch(ab){Ya(ab)}},Ua.prototype.getClusterChildren=function(Ea,Ya){try{Ya(null,
this._geoJSONIndex.getChildren(Ea.clusterId))}catch(ab){Ya(ab)}},Ua.prototype.getClusterLeaves=function(Ea,Ya){try{Ya(null,this._geoJSONIndex.getLeaves(Ea.clusterId,Ea.limit,Ea.offset))}catch(ab){Ya(ab)}},Ua}(ua);Oa=function(Ka){var Ua=this;this.self=Ka;this.actor=new b.Actor(Ka,this);this.layerIndexes={};this.availableImages={};this.workerSourceTypes={vector:ua,geojson:mb};this.workerSources={};this.demWorkerSources={};this.self.registerWorkerSource=function(Ea,Ya){if(Ua.workerSourceTypes[Ea])throw Error('Worker source with name "'+
Ea+'" already registered.');Ua.workerSourceTypes[Ea]=Ya};this.self.registerRTLTextPlugin=function(Ea){if(b.plugin.isParsed())throw Error("RTL text plugin already registered.");b.plugin.applyArabicShaping=Ea.applyArabicShaping;b.plugin.processBidirectionalText=Ea.processBidirectionalText;b.plugin.processStyledBidirectionalText=Ea.processStyledBidirectionalText}};return Oa.prototype.setReferrer=function(Ka,Ua){this.referrer=Ua},Oa.prototype.setImages=function(Ka,Ua,Ea){for(var Ya in this.availableImages[Ka]=
Ua,this.workerSources[Ka]){var ab=this.workerSources[Ka][Ya],Wa;for(Wa in ab)ab[Wa].availableImages=Ua}Ea()},Oa.prototype.setLayers=function(Ka,Ua,Ea){this.getLayerIndex(Ka).replace(Ua);Ea()},Oa.prototype.updateLayers=function(Ka,Ua,Ea){this.getLayerIndex(Ka).update(Ua.layers,Ua.removedIds);Ea()},Oa.prototype.loadTile=function(Ka,Ua,Ea){this.getWorkerSource(Ka,Ua.type,Ua.source).loadTile(Ua,Ea)},Oa.prototype.loadDEMTile=function(Ka,Ua,Ea){this.getDEMWorkerSource(Ka,Ua.source).loadTile(Ua,Ea)},Oa.prototype.reloadTile=
function(Ka,Ua,Ea){this.getWorkerSource(Ka,Ua.type,Ua.source).reloadTile(Ua,Ea)},Oa.prototype.abortTile=function(Ka,Ua,Ea){this.getWorkerSource(Ka,Ua.type,Ua.source).abortTile(Ua,Ea)},Oa.prototype.removeTile=function(Ka,Ua,Ea){this.getWorkerSource(Ka,Ua.type,Ua.source).removeTile(Ua,Ea)},Oa.prototype.removeDEMTile=function(Ka,Ua){this.getDEMWorkerSource(Ka,Ua.source).removeTile(Ua)},Oa.prototype.removeSource=function(Ka,Ua,Ea){if(this.workerSources[Ka]&&this.workerSources[Ka][Ua.type]&&this.workerSources[Ka][Ua.type][Ua.source]){var Ya=
this.workerSources[Ka][Ua.type][Ua.source];delete this.workerSources[Ka][Ua.type][Ua.source];void 0!==Ya.removeSource?Ya.removeSource(Ua,Ea):Ea()}},Oa.prototype.loadWorkerSource=function(Ka,Ua,Ea){try{this.self.importScripts(Ua.url),Ea()}catch(Ya){Ea(Ya.toString())}},Oa.prototype.syncRTLPluginState=function(Ka,Ua,Ea){try{b.plugin.setState(Ua);var Ya=b.plugin.getPluginURL();if(b.plugin.isLoaded()&&!b.plugin.isParsed()&&null!=Ya){this.self.importScripts(Ya);var ab=b.plugin.isParsed();Ea(ab?void 0:Error("RTL Text Plugin failed to import scripts from "+
Ya),ab)}}catch(Wa){Ea(Wa.toString())}},Oa.prototype.getAvailableImages=function(Ka){Ka=this.availableImages[Ka];return Ka||(Ka=[]),Ka},Oa.prototype.getLayerIndex=function(Ka){var Ua=this.layerIndexes[Ka];return Ua||(Ua=this.layerIndexes[Ka]=new Y),Ua},Oa.prototype.getWorkerSource=function(Ka,Ua,Ea){var Ya=this;return this.workerSources[Ka]||(this.workerSources[Ka]={}),this.workerSources[Ka][Ua]||(this.workerSources[Ka][Ua]={}),this.workerSources[Ka][Ua][Ea]||(this.workerSources[Ka][Ua][Ea]=new this.workerSourceTypes[Ua]({send:function(ab,
Wa,Ja){Ya.actor.send(ab,Wa,Ja,Ka)}},this.getLayerIndex(Ka),this.getAvailableImages(Ka))),this.workerSources[Ka][Ua][Ea]},Oa.prototype.getDEMWorkerSource=function(Ka,Ua){return this.demWorkerSources[Ka]||(this.demWorkerSources[Ka]={}),this.demWorkerSources[Ka][Ua]||(this.demWorkerSources[Ka][Ua]=new ja),this.demWorkerSources[Ka][Ua]},Oa.prototype.enforceCacheSizeLimit=function(Ka,Ua){b.enforceCacheSizeLimit(Ua)},"undefined"!=typeof WorkerGlobalScope&&void 0!==b.window&&b.window instanceof WorkerGlobalScope&&
(b.window.worker=new Oa(b.window)),Oa});q(["./shared"],function(b){function k(Db){if(!cb)return Db[0];for(var Z=0;Z<Db.length;Z++)if(Db[Z]in cb)return Db[Z];return Db[0]}function e(Db,Z,fa,da,ta,Ga){this.fontSize=Db||24;this.buffer=void 0===Z?3:Z;this.cutoff=da||.25;this.fontFamily=ta||"sans-serif";this.fontWeight=Ga||"normal";this.radius=fa||8;Db=this.size=this.fontSize+2*this.buffer;this.canvas=document.createElement("canvas");this.canvas.width=this.canvas.height=Db;this.ctx=this.canvas.getContext("2d");
this.ctx.font=this.fontWeight+" "+this.fontSize+"px "+this.fontFamily;this.ctx.textBaseline="middle";this.ctx.fillStyle="black";this.gridOuter=new Float64Array(Db*Db);this.gridInner=new Float64Array(Db*Db);this.f=new Float64Array(Db);this.d=new Float64Array(Db);this.z=new Float64Array(Db+1);this.v=new Int16Array(Db);this.middle=Math.round(Db/2*(0<=navigator.userAgent.indexOf("Gecko/")?1.2:1))}function h(Db,Z,fa,da,ta,Ga,Za){for(var hb=0;hb<Z;hb++){for(var ub=0;ub<fa;ub++)da[ub]=Db[ub*Z+hb];l(da,ta,
Ga,Za,fa);for(ub=0;ub<fa;ub++)Db[ub*Z+hb]=ta[ub]}for(ub=0;ub<fa;ub++){for(hb=0;hb<Z;hb++)da[hb]=Db[ub*Z+hb];l(da,ta,Ga,Za,Z);for(hb=0;hb<Z;hb++)Db[ub*Z+hb]=Math.sqrt(ta[hb])}}function l(Db,Z,fa,da,ta){fa[0]=0;da[0]=-1E20;da[1]=1E20;for(var Ga=1,Za=0;Ga<ta;Ga++){for(var hb=(Db[Ga]+Ga*Ga-(Db[fa[Za]]+fa[Za]*fa[Za]))/(2*Ga-2*fa[Za]);hb<=da[Za];)Za--,hb=(Db[Ga]+Ga*Ga-(Db[fa[Za]]+fa[Za]*fa[Za]))/(2*Ga-2*fa[Za]);fa[++Za]=Ga;da[Za]=hb;da[Za+1]=1E20}for(Za=Ga=0;Ga<ta;Ga++){for(;da[Za+1]<Ga;)Za++;Z[Ga]=(Ga-
fa[Za])*(Ga-fa[Za])+Db[fa[Za]]}}function c(Db,Z,fa){var da=function(ta,Ga){if(ta)return fa(ta);Ga&&(ta=b.pick(b.extend(Ga,Db),"tiles minzoom maxzoom attribution mapbox_logo bounds scheme tileSize encoding".split(" ")),Ga.vector_layers&&(ta.vectorLayers=Ga.vector_layers,ta.vectorLayerIds=ta.vectorLayers.map(function(Za){return Za.id})),ta.tiles=Z.canonicalizeTileset(ta,Db.url),fa(null,ta))};return Db.url?b.getJSON(Z.transformRequest(Z.normalizeSourceURL(Db.url),b.ResourceType.Source),da):b.browser.frame(function(){return da(null,
Db)})}function g(Db,Z){var fa=b.identity([]);return b.translate(fa,fa,[1,1,0]),b.scale(fa,fa,[.5*Db.width,.5*Db.height,1]),b.multiply(fa,fa,Db.calculatePosMatrix(Z.toUnwrapped()))}function d(Db,Z,fa,da,ta,Ga){var Za=function(dc,Ac,Ec){if(dc)for(var uc=0;uc<dc.length;uc+=1){var Xb=Ac[dc[uc]];if(Xb&&Xb.source===Ec&&"fill-extrusion"===Xb.type)return!0}else for(uc in Ac)if(dc=Ac[uc],dc.source===Ec&&"fill-extrusion"===dc.type)return!0;return!1}(ta&&ta.layers,Z,Db.id),hb=Ga.maxPitchScaleFactor();da=Db.tilesIn(da,
hb,Za);da.sort(p);Za=[];for(var ub=0;ub<da.length;ub+=1){var Rb=da[ub];Za.push({wrappedTileID:Rb.tileID.wrapped().key,queryResults:Rb.tile.queryRenderedFeatures(Z,fa,Db._state,Rb.queryGeometry,Rb.cameraQueryGeometry,Rb.scale,ta,Ga,hb,g(Db.transform,Rb.tileID))})}Z=function(dc){for(var Ac={},Ec={},uc=0;uc<dc.length;uc+=1){var Xb=dc[uc],fc=Xb.queryResults;Xb=Xb.wrappedTileID;Xb=Ec[Xb]=Ec[Xb]||{};for(var Cc in fc)for(var bd=fc[Cc],nd=Xb[Cc]=Xb[Cc]||{},Nc=Ac[Cc]=Ac[Cc]||[],vd=0;vd<bd.length;vd+=1){var Ad=
bd[vd];nd[Ad.featureIndex]||(nd[Ad.featureIndex]=!0,Nc.push(Ad))}}return Ac}(Za);for(var Yb in Z)Z[Yb].forEach(function(dc){dc=dc.feature;var Ac=Db.getFeatureState(dc.layer["source-layer"],dc.id);dc.source=dc.layer.source;dc.layer["source-layer"]&&(dc.sourceLayer=dc.layer["source-layer"]);dc.state=Ac});return Z}function p(Db,Z){Db=Db.tileID;Z=Z.tileID;return Db.overscaledZ-Z.overscaledZ||Db.canonical.y-Z.canonical.y||Db.wrap-Z.wrap||Db.canonical.x-Z.canonical.x}function r(Db,Z){var fa=Math.abs(2*
Db.wrap)-+(0>Db.wrap),da=Math.abs(2*Z.wrap)-+(0>Z.wrap);return Db.overscaledZ-Z.overscaledZ||da-fa||Z.canonical.y-Db.canonical.y||Z.canonical.x-Db.canonical.x}function t(Db){return"raster"===Db||"image"===Db||"video"===Db}function w(){return new b.window.Worker(Fj.workerUrl)}function x(Db,Z){var fa={},da;for(da in Db)"ref"!==da&&(fa[da]=Db[da]);return b.refProperties.forEach(function(ta){ta in Z&&(fa[ta]=Z[ta])}),fa}function y(Db){Db=Db.slice();for(var Z=Object.create(null),fa=0;fa<Db.length;fa++)Z[Db[fa].id]=
Db[fa];for(fa=0;fa<Db.length;fa++)"ref"in Db[fa]&&(Db[fa]=x(Db[fa],Z[Db[fa].ref]));return Db}function A(Db,Z,fa,da,ta,Ga){for(var Za in Z=Z||{},Db=Db||{})Db.hasOwnProperty(Za)&&(b.deepEqual(Db[Za],Z[Za])||fa.push({command:Ga,args:[da,Za,Z[Za],ta]}));for(Za in Z)Z.hasOwnProperty(Za)&&!Db.hasOwnProperty(Za)&&(b.deepEqual(Db[Za],Z[Za])||fa.push({command:Ga,args:[da,Za,Z[Za],ta]}))}function z(Db){return Db.id}function F(Db,Z){return Db[Z.id]=Z,Db}function D(Db,Z,fa,da,ta){var Ga=b.create();return Z?(b.scale(Ga,
Ga,[1/ta,1/ta,1]),fa||b.rotateZ(Ga,Ga,da.angle)):b.multiply(Ga,da.labelPlaneMatrix,Db),Ga}function u(Db,Z,fa,da,ta){return Z?(Db=b.clone(Db),b.scale(Db,Db,[ta,ta,1]),fa||b.rotateZ(Db,Db,-da.angle),Db):da.glCoordMatrix}function B(Db,Z){Db=[Db.x,Db.y,0,1];S(Db,Db,Z);Z=Db[3];return{point:new b.Point(Db[0]/Z,Db[1]/Z),signedDistanceFromCamera:Z}}function I(Db,Z,fa,da,ta,Ga,Za,hb){var ub=da?Db.textSizeData:Db.iconSizeData,Rb=b.evaluateSizeForZoom(ub,fa.transform.zoom),Yb=[256/fa.width*2+1,256/fa.height*
2+1],dc=da?Db.text.dynamicLayoutVertexArray:Db.icon.dynamicLayoutVertexArray;dc.clear();for(var Ac=Db.lineVertexArray,Ec=da?Db.text.placedSymbolArray:Db.icon.placedSymbolArray,uc=fa.transform.width/fa.transform.height,Xb=!1,fc=0;fc<Ec.length;fc++){var Cc=Ec.get(fc);if(Cc.hidden||Cc.writingMode===b.WritingMode.vertical&&!Xb)Q(Cc.numGlyphs,dc);else{Xb=!1;var bd=[Cc.anchorX,Cc.anchorY,0,1];b.transformMat4(bd,bd,Z);var nd=bd[0]/bd[3],Nc=bd[1]/bd[3];if(nd>=-Yb[0]&&nd<=Yb[0]&&Nc>=-Yb[1]&&Nc<=Yb[1]){Xb=
.5+fa.transform.cameraToCenterDistance/bd[3]*.5;bd=b.evaluateSizeForFeature(ub,Rb,Cc);bd=Za?bd/Xb:bd*Xb;nd=new b.Point(Cc.anchorX,Cc.anchorY);Nc=B(nd,ta).point;var vd={},Ad=M(Cc,bd,!1,hb,Z,ta,Ga,Db.glyphOffsetArray,Ac,dc,Nc,nd,vd,uc);Xb=Ad.useVertical;(Ad.notEnoughRoom||Xb||Ad.needsFlipping&&M(Cc,bd,!0,hb,Z,ta,Ga,Db.glyphOffsetArray,Ac,dc,Nc,nd,vd,uc).notEnoughRoom)&&Q(Cc.numGlyphs,dc)}else Q(Cc.numGlyphs,dc)}}da?Db.text.dynamicLayoutVertexBuffer.updateData(dc):Db.icon.dynamicLayoutVertexBuffer.updateData(dc)}
function J(Db,Z,fa,da,ta,Ga,Za,hb,ub,Rb,Yb){var dc=hb.glyphStartIndex+hb.numGlyphs,Ac=hb.lineStartIndex,Ec=hb.lineStartIndex+hb.lineLength,uc=Z.getoffsetX(hb.glyphStartIndex);Z=Z.getoffsetX(dc-1);uc=L(Db*uc,fa,da,ta,Ga,Za,hb.segment,Ac,Ec,ub,Rb,Yb);return uc?(Db=L(Db*Z,fa,da,ta,Ga,Za,hb.segment,Ac,Ec,ub,Rb,Yb))?{first:uc,last:Db}:null:null}function N(Db,Z,fa,da){return Db===b.WritingMode.horizontal&&Math.abs(fa.y-Z.y)>Math.abs(fa.x-Z.x)*da?{useVertical:!0}:(Db===b.WritingMode.vertical?Z.y<fa.y:Z.x>
fa.x)?{needsFlipping:!0}:null}function M(Db,Z,fa,da,ta,Ga,Za,hb,ub,Rb,Yb,dc,Ac,Ec){Z/=24;var uc=Db.lineOffsetX*Z,Xb=Db.lineOffsetY*Z;if(1<Db.numGlyphs){ta=Db.glyphStartIndex+Db.numGlyphs;var fc=Db.lineStartIndex,Cc=Db.lineStartIndex+Db.lineLength,bd=J(Z,hb,uc,Xb,fa,Yb,dc,Db,ub,Ga,Ac);if(!bd)return{notEnoughRoom:!0};var nd=B(bd.first.point,Za).point;Za=B(bd.last.point,Za).point;if(da&&!fa&&(Ec=N(Db.writingMode,nd,Za,Ec)))return Ec;Ec=[bd.first];for(da=Db.glyphStartIndex+1;da<ta-1;da++)Ec.push(L(Z*
hb.getoffsetX(da),uc,Xb,fa,Yb,dc,Db.segment,fc,Cc,ub,Ga,Ac));Ec.push(bd.last)}else{if(da&&!fa&&(fc=B(dc,ta).point,Cc=Db.lineStartIndex+Db.segment+1,Cc=new b.Point(ub.getx(Cc),ub.gety(Cc)),bd=B(Cc,ta),ta=0<bd.signedDistanceFromCamera?bd.point:E(dc,Cc,fc,1,ta),Ec=N(Db.writingMode,fc,ta,Ec)))return Ec;Db=L(Z*hb.getoffsetX(Db.glyphStartIndex),uc,Xb,fa,Yb,dc,Db.segment,Db.lineStartIndex,Db.lineStartIndex+Db.lineLength,ub,Ga,Ac);if(!Db)return{notEnoughRoom:!0};Ec=[Db]}Db=0;for(fa=Ec;Db<fa.length;Db+=1)Ga=
fa[Db],b.addDynamicAttributes(Rb,Ga.point,Ga.angle);return{}}function E(Db,Z,fa,da,ta){Db=B(Db.add(Db.sub(Z)._unit()),ta).point;Db=fa.sub(Db);return fa.add(Db._mult(da/Db.mag()))}function L(Db,Z,fa,da,ta,Ga,Za,hb,ub,Rb,Yb,dc){var Ac=da?Db-Z:Db+Z;Db=0<Ac?1:-1;Z=0;da&&(Db*=-1,Z=Math.PI);0>Db&&(Z+=Math.PI);da=0<Db?hb+Za:hb+Za+1;Za=ta;var Ec=0,uc=0,Xb=Math.abs(Ac);for(Ac=[];Ec+uc<=Xb;){if((da+=Db)<hb||da>=ub)return null;if(ta=Za,Ac.push(Za),void 0===(Za=dc[da])){Za=new b.Point(Rb.getx(da),Rb.gety(da));
var fc=B(Za,Yb);0<fc.signedDistanceFromCamera?Za=dc[da]=fc.point:(fc=da-Db,Za=E(0===Ec?Ga:new b.Point(Rb.getx(fc),Rb.gety(fc)),Za,ta,Xb-Ec+1,Yb))}Ec+=uc;uc=ta.dist(Za)}hb=(Xb-Ec)/uc;Ga=Za.sub(ta);hb=Ga.mult(hb)._add(ta);hb._add(Ga._unit()._perp()._mult(fa*Db));fa=Z+Math.atan2(Za.y-ta.y,Za.x-ta.x);return Ac.push(hb),{point:hb,angle:fa,path:Ac}}function Q(Db,Z){for(var fa=0;fa<Db;fa++){var da=Z.length;Z.resize(da+4);Z.float32.set(Ve,3*da)}}function S(Db,Z,fa){var da=Z[0];Z=Z[1];return Db[0]=fa[0]*da+
fa[4]*Z+fa[12],Db[1]=fa[1]*da+fa[5]*Z+fa[13],Db[3]=fa[3]*da+fa[7]*Z+fa[15],Db}function R(Db,Z,fa){return b.EXTENT/(Db.tileSize*Math.pow(2,fa-Db.tileID.overscaledZ))*Z}function O(Db,Z,fa,da,ta){var Ga=b.getAnchorAlignment(Db);Z*=-(Ga.horizontalAlign-.5);fa*=-(Ga.verticalAlign-.5);Db=b.evaluateVariableOffset(Db,da);return new b.Point(Z+Db[0]*ta,fa+Db[1]*ta)}function T(Db,Z,fa,da,ta,Ga){var Za=Db.x1,hb=Db.x2,ub=Db.y1,Rb=Db.y2,Yb=Db.anchorPointX;Db=Db.anchorPointY;Z=new b.Point(Z,fa);return da&&Z._rotate(ta?
Ga:-Ga),{x1:Za+Z.x,y1:ub+Z.y,x2:hb+Z.x,y2:Rb+Z.y,anchorPointX:Yb,anchorPointY:Db}}function V(Db,Z,fa,da,ta){Db.emplaceBack(Z?1:0,fa?1:0,da||0,ta||0);Db.emplaceBack(Z?1:0,fa?1:0,da||0,ta||0);Db.emplaceBack(Z?1:0,fa?1:0,da||0,ta||0);Db.emplaceBack(Z?1:0,fa?1:0,da||0,ta||0)}function X(Db){if(0===Db.opacity&&!Db.placed)return 0;if(1===Db.opacity&&Db.placed)return 4294967295;var Z=Db.placed?1:0;Db=Math.floor(127*Db.opacity);return Db*be+Z*pe+Db*ce+Z*de+Db*Be+Z*Ue+Db*oc+Z}function ba(Db,Z){var fa=/#pragma mapbox: ([\w]+) ([\w]+) ([\w]+) ([\w]+)/g,
da={};return{fragmentSource:Db=Db.replace(fa,function(ta,Ga,Za,hb,ub){return da[ub]=!0,"define"===Ga?"\n#ifndef HAS_UNIFORM_u_"+ub+"\nvarying "+Za+" "+hb+" "+ub+";\n#else\nuniform "+Za+" "+hb+" u_"+ub+";\n#endif\n":"\n#ifdef HAS_UNIFORM_u_"+ub+"\n    "+Za+" "+hb+" "+ub+" \x3d u_"+ub+";\n#endif\n"}),vertexSource:Z=Z.replace(fa,function(ta,Ga,Za,hb,ub){ta="float"===hb?"vec2":"vec4";var Rb=ub.match(/color/)?"color":ta;return da[ub]?"define"===Ga?"\n#ifndef HAS_UNIFORM_u_"+ub+"\nuniform lowp float u_"+
ub+"_t;\nattribute "+Za+" "+ta+" a_"+ub+";\nvarying "+Za+" "+hb+" "+ub+";\n#else\nuniform "+Za+" "+hb+" u_"+ub+";\n#endif\n":"vec4"===Rb?"\n#ifndef HAS_UNIFORM_u_"+ub+"\n    "+ub+" \x3d a_"+ub+";\n#else\n    "+Za+" "+hb+" "+ub+" \x3d u_"+ub+";\n#endif\n":"\n#ifndef HAS_UNIFORM_u_"+ub+"\n    "+ub+" \x3d unpack_mix_"+Rb+"(a_"+ub+", u_"+ub+"_t);\n#else\n    "+Za+" "+hb+" "+ub+" \x3d u_"+ub+";\n#endif\n":"define"===Ga?"\n#ifndef HAS_UNIFORM_u_"+ub+"\nuniform lowp float u_"+ub+"_t;\nattribute "+Za+" "+
ta+" a_"+ub+";\n#else\nuniform "+Za+" "+hb+" u_"+ub+";\n#endif\n":"vec4"===Rb?"\n#ifndef HAS_UNIFORM_u_"+ub+"\n    "+Za+" "+hb+" "+ub+" \x3d a_"+ub+";\n#else\n    "+Za+" "+hb+" "+ub+" \x3d u_"+ub+";\n#endif\n":"\n#ifndef HAS_UNIFORM_u_"+ub+"\n    "+Za+" "+hb+" "+ub+" \x3d unpack_mix_"+Rb+"(a_"+ub+", u_"+ub+"_t);\n#else\n    "+Za+" "+hb+" "+ub+" \x3d u_"+ub+";\n#endif\n"})}}function aa(Db,Z,fa){var da=1/R(fa,1,Z.transform.tileZoom),ta=Math.pow(2,fa.tileID.overscaledZ);Z=fa.tileSize*Math.pow(2,Z.transform.tileZoom)/
ta;ta=Z*(fa.tileID.canonical.x+fa.tileID.wrap*ta);Z*=fa.tileID.canonical.y;return{u_image:0,u_texsize:fa.imageAtlasTexture.size,u_scale:[da,Db.fromScale,Db.toScale],u_fade:Db.t,u_pixel_coord_upper:[ta>>16,Z>>16],u_pixel_coord_lower:[65535&ta,65535&Z]}}function ka(Db,Z,fa){return Db.translatePosMatrix(Z.tileID.posMatrix,Z,fa.paint.get("line-translate"),fa.paint.get("line-translate-anchor"))}function ha(Db,Z,fa,da,ta,Ga,Za){for(var hb=Db.context,ub=hb.gl,Rb=Db.useProgram("collisionBox"),Yb=[],dc=0,
Ac=0,Ec=0;Ec<da.length;Ec++){var uc=da[Ec],Xb=Z.getTile(uc),fc=Xb.getBucket(fa);if(fc){var Cc=uc.posMatrix;0===ta[0]&&0===ta[1]||(Cc=Db.translatePosMatrix(uc.posMatrix,Xb,ta,Ga));uc=Za?fc.textCollisionBox:fc.iconCollisionBox;var bd=fc.collisionCircleArray;if(0<bd.length){var nd=b.create(),Nc=Cc;b.mul(nd,fc.placementInvProjMatrix,Db.transform.glCoordMatrix);b.mul(nd,nd,fc.placementViewportMatrix);Yb.push({circleArray:bd,circleOffset:Ac,transform:Nc,invTransform:nd});Ac=dc+=bd.length/4}uc&&Rb.draw(hb,
ub.LINES,Hd.disabled,oe.disabled,Db.colorModeForRenderPass(),Fd.disabled,Oh(Cc,Db.transform,Xb),fa.id,uc.layoutVertexBuffer,uc.indexBuffer,uc.segments,null,Db.transform.zoom,null,null,uc.collisionVertexBuffer)}}if(Za&&Yb.length){Z=Db.useProgram("collisionCircle");da=new b.StructArrayLayout2f1f2i16;da.resize(4*dc);da._trim();for(Ga=ta=0;Ga<Yb.length;Ga+=1)for(Za=Yb[Ga],Rb=0;Rb<Za.circleArray.length/4;Rb++)fc=4*Rb,Ac=Za.circleArray[fc+0],Ec=Za.circleArray[fc+1],Xb=Za.circleArray[fc+2],fc=Za.circleArray[fc+
3],da.emplace(ta++,Ac,Ec,Xb,fc,0),da.emplace(ta++,Ac,Ec,Xb,fc,1),da.emplace(ta++,Ac,Ec,Xb,fc,2),da.emplace(ta++,Ac,Ec,Xb,fc,3);if(!fi||fi.length<2*dc){dc*=2;ta=new b.StructArrayLayout3ui6;ta.resize(dc);ta._trim();for(Ga=0;Ga<dc;Ga++)Za=6*Ga,ta.uint16[Za+0]=4*Ga,ta.uint16[Za+1]=4*Ga+1,ta.uint16[Za+2]=4*Ga+2,ta.uint16[Za+3]=4*Ga+2,ta.uint16[Za+4]=4*Ga+3,ta.uint16[Za+5]=4*Ga;fi=ta}dc=hb.createIndexBuffer(fi,!0);da=hb.createVertexBuffer(da,b.collisionCircleLayout.members,!0);for(ta=0;ta<Yb.length;ta+=
1)Ga=Yb[ta],Za=Db.transform,Za={u_matrix:Ga.transform,u_inv_matrix:Ga.invTransform,u_camera_to_center_distance:Za.cameraToCenterDistance,u_viewport_size:[Za.width,Za.height]},Z.draw(hb,ub.TRIANGLES,Hd.disabled,oe.disabled,Db.colorModeForRenderPass(),Fd.disabled,Za,fa.id,da,dc,b.SegmentVector.simpleSegment(0,2*Ga.circleOffset,Ga.circleArray.length,Ga.circleArray.length/2),null,Db.transform.zoom,null,null,null);da.destroy();dc.destroy()}}function ca(Db,Z,fa,da,ta,Ga,Za,hb,ub,Rb,Yb,dc){var Ac=Db.context,
Ec=Ac.gl,uc=Db.transform,Xb="map"===hb,fc="map"===ub,Cc=Xb&&"point"!==fa.layout.get("symbol-placement"),bd=Xb&&!fc&&!Cc,nd=void 0!==fa.layout.get("symbol-sort-key").constantOr(1);ub=Db.depthModeForSublayer(0,Hd.ReadOnly);var Nc=fa.layout.get("text-variable-anchor");hb=[];for(var vd=0;vd<da.length;vd+=1){var Ad=da[vd],le=Z.getTile(Ad),Ud=le.getBucket(fa);if(Ud){var Sd=ta?Ud.text:Ud.icon;if(Sd&&Sd.segments.get().length){var fe=Sd.programConfigurations.get(fa.id),ue=ta||Ud.sdfIcons,Ee=ta?Ud.textSizeData:
Ud.iconSizeData,Re=fc||0!==uc.pitch;fe=Db.useProgram(Ud.iconsInText&&ta?"symbolTextAndIcon":ue?"symbolSDF":"symbolIcon",fe);var lf=b.evaluateSizeForZoom(Ee,uc.zoom),he=void 0,ef=[0,0],mf=void 0,Ae=void 0,$e=null,vf=void 0;ta?(mf=le.glyphAtlasTexture,Ae=Ec.LINEAR,he=le.glyphAtlasTexture.size,Ud.iconsInText&&(ef=le.imageAtlasTexture.size,$e=le.imageAtlasTexture,vf=Re||Db.options.rotating||Db.options.zooming||"composite"===Ee.kind||"camera"===Ee.kind?Ec.LINEAR:Ec.NEAREST)):(he=1!==fa.layout.get("icon-size").constantOr(0)||
Ud.iconsNeedLinear,mf=le.imageAtlasTexture,Ae=ue||Db.options.rotating||Db.options.zooming||he||Re?Ec.LINEAR:Ec.NEAREST,he=le.imageAtlasTexture.size);var nf=R(le,1,Db.transform.zoom);Re=D(Ad.posMatrix,fc,Xb,Db.transform,nf);nf=u(Ad.posMatrix,fc,Xb,Db.transform,nf);var Fh=Nc&&Ud.hasTextData();Fh="none"!==fa.layout.get("icon-text-fit")&&Fh&&Ud.hasIconData();Cc&&I(Ud,Ad.posMatrix,Db,ta,Re,nf,fc,Rb);Ad=Db.translatePosMatrix(Ad.posMatrix,le,Ga,Za);Re=Cc||ta&&Nc||Fh?Qg:Re;le=Db.translatePosMatrix(nf,le,
Ga,Za,!0);nf=ue&&0!==fa.paint.get(ta?"text-halo-width":"icon-halo-width").constantOr(1);Ud={program:fe,buffers:Sd,uniformValues:ue?Ud.iconsInText?Qh(Ee.kind,lf,bd,fc,Db,Ad,Re,le,he,ef):Ph(Ee.kind,lf,bd,fc,Db,Ad,Re,le,ta,he,!0):fh(Ee.kind,lf,bd,fc,Db,Ad,Re,le,ta,he),atlasTexture:mf,atlasTextureIcon:$e,atlasInterpolation:Ae,atlasInterpolationIcon:vf,isSDF:ue,hasHalo:nf};if(nd)for(ue=0,Sd=Sd.segments.get();ue<Sd.length;ue+=1)Ee=Sd[ue],hb.push({segments:new b.SegmentVector([Ee]),sortKey:Ee.sortKey,state:Ud});
else hb.push({segments:Sd.segments,sortKey:0,state:Ud})}}}nd&&hb.sort(function(sg,Vg){return sg.sortKey-Vg.sortKey});for(Z=0;Z<hb.length;Z+=1){da=hb[Z];ta=da.state;if(Ac.activeTexture.set(Ec.TEXTURE0),ta.atlasTexture.bind(ta.atlasInterpolation,Ec.CLAMP_TO_EDGE),ta.atlasTextureIcon&&(Ac.activeTexture.set(Ec.TEXTURE1),ta.atlasTextureIcon&&ta.atlasTextureIcon.bind(ta.atlasInterpolationIcon,Ec.CLAMP_TO_EDGE)),ta.isSDF)Ga=ta.uniformValues,ta.hasHalo&&(Ga.u_is_halo=1,sa(ta.buffers,da.segments,fa,Db,ta.program,
ub,Yb,dc,Ga)),Ga.u_is_halo=0;sa(ta.buffers,da.segments,fa,Db,ta.program,ub,Yb,dc,ta.uniformValues)}}function sa(Db,Z,fa,da,ta,Ga,Za,hb,ub){var Rb=da.context;ta.draw(Rb,Rb.gl.TRIANGLES,Ga,Za,hb,Fd.disabled,ub,fa.id,Db.layoutVertexBuffer,Db.indexBuffer,Z,fa.paint,da.transform.zoom,Db.programConfigurations.get(fa.id),Db.dynamicLayoutVertexBuffer,Db.opacityVertexBuffer)}function ma(Db,Z,fa,da,ta,Ga,Za){var hb,ub,Rb,Yb=Db.context.gl,dc=fa.paint.get("fill-pattern"),Ac=dc&&dc.constantOr(1),Ec=fa.getCrossfadeParameters();
Za?(ub=Ac&&!fa.getPaintProperty("fill-outline-color")?"fillOutlinePattern":"fillOutline",hb=Yb.LINES):(ub=Ac?"fillPattern":"fill",hb=Yb.TRIANGLES);for(var uc=0;uc<da.length;uc+=1){var Xb=da[uc];var fc=Z.getTile(Xb);if(!Ac||fc.patternsLoaded()){var Cc=fc.getBucket(fa);if(Cc){var bd=Cc.programConfigurations.get(fa.id),nd=Db.useProgram(ub,bd);Ac&&(Db.context.activeTexture.set(Yb.TEXTURE0),fc.imageAtlasTexture.bind(Yb.LINEAR,Yb.CLAMP_TO_EDGE),bd.updatePaintBuffers(Ec));if((Rb=dc.constantOr(null))&&fc.imageAtlas){var Nc=
fc.imageAtlas;var vd=Nc.patternPositions[Rb.to.toString()];Rb=Nc.patternPositions[Rb.from.toString()];vd&&Rb&&bd.setConstantPatternPositions(vd,Rb)}Nc=Db.translatePosMatrix(Xb.posMatrix,fc,fa.paint.get("fill-translate"),fa.paint.get("fill-translate-anchor"));if(Za){vd=Cc.indexBuffer2;Rb=Cc.segments2;var Ad=[Yb.drawingBufferWidth,Yb.drawingBufferHeight];fc="fillOutlinePattern"===ub&&Ac?b.extend(b.extend({u_matrix:Nc},aa(Ec,Db,fc)),{u_world:Ad}):{u_matrix:Nc,u_world:Ad}}else vd=Cc.indexBuffer,Rb=Cc.segments,
fc=Ac?b.extend({u_matrix:Nc},aa(Ec,Db,fc)):{u_matrix:Nc};nd.draw(Db.context,hb,ta,Db.stencilModeForClipping(Xb),Ga,Fd.disabled,fc,fa.id,Cc.layoutVertexBuffer,vd,Rb,fa.paint,Db.transform.zoom,bd)}}}}function ra(Db,Z,fa,da,ta,Ga,Za){for(var hb=Db.context,ub=hb.gl,Rb=fa.paint.get("fill-extrusion-pattern"),Yb=Rb.constantOr(1),dc=fa.getCrossfadeParameters(),Ac=fa.paint.get("fill-extrusion-opacity"),Ec=0;Ec<da.length;Ec+=1){var uc=da[Ec],Xb=Z.getTile(uc),fc=Xb.getBucket(fa);if(fc){var Cc=fc.programConfigurations.get(fa.id),
bd=Db.useProgram(Yb?"fillExtrusionPattern":"fillExtrusion",Cc);Yb&&(Db.context.activeTexture.set(ub.TEXTURE0),Xb.imageAtlasTexture.bind(ub.LINEAR,ub.CLAMP_TO_EDGE),Cc.updatePaintBuffers(dc));var nd=Rb.constantOr(null);if(nd&&Xb.imageAtlas){var Nc=Xb.imageAtlas,vd=Nc.patternPositions[nd.to.toString()];nd=Nc.patternPositions[nd.from.toString()];vd&&nd&&Cc.setConstantPatternPositions(vd,nd)}vd=Db.translatePosMatrix(uc.posMatrix,Xb,fa.paint.get("fill-extrusion-translate"),fa.paint.get("fill-extrusion-translate-anchor"));
nd=fa.paint.get("fill-extrusion-vertical-gradient");if(Yb){Nc=Db;var Ad=dc;Xb=b.extend(Bg(vd,Nc,nd,Ac),aa(Ad,Nc,Xb),{u_height_factor:-Math.pow(2,uc.overscaledZ)/Xb.tileSize/8})}else Xb=Bg(vd,Db,nd,Ac);bd.draw(hb,hb.gl.TRIANGLES,ta,Ga,Za,Fd.backCCW,Xb,fa.id,fc.layoutVertexBuffer,fc.indexBuffer,fc.segments,fa.paint,Db.transform.zoom,Cc)}}}function qa(Db,Z,fa,da,ta,Ga,Za){var hb=Db.context,ub=hb.gl,Rb=Z.dem;if(Rb&&Rb.data){var Yb=Rb.dim,dc=Rb.stride,Ac=Rb.getPixels();(hb.activeTexture.set(ub.TEXTURE1),
hb.pixelStoreUnpackPremultiplyAlpha.set(!1),Z.demTexture=Z.demTexture||Db.getTileTexture(dc),Z.demTexture)?(dc=Z.demTexture,dc.update(Ac,{premultiply:!1}),dc.bind(ub.NEAREST,ub.CLAMP_TO_EDGE)):(Z.demTexture=new b.Texture(hb,Ac,ub.RGBA,{premultiply:!1}),Z.demTexture.bind(ub.NEAREST,ub.CLAMP_TO_EDGE));hb.activeTexture.set(ub.TEXTURE0);Ac=Z.fbo;Ac||(dc=new b.Texture(hb,{width:Yb,height:Yb,data:null},ub.RGBA),dc.bind(ub.LINEAR,ub.CLAMP_TO_EDGE),(Ac=Z.fbo=hb.createFramebuffer(Yb,Yb,!0)).colorAttachment.set(dc.texture));
hb.bindFramebuffer.set(Ac.framebuffer);hb.viewport.set([0,0,Yb,Yb]);Db.useProgram("hillshadePrepare").draw(hb,ub.TRIANGLES,ta,Ga,Za,Fd.disabled,function(Ec,uc,Xb){var fc=uc.stride,Cc=b.create();return b.ortho(Cc,0,b.EXTENT,-b.EXTENT,0,0,1),b.translate(Cc,Cc,[0,-b.EXTENT,0]),{u_matrix:Cc,u_image:1,u_dimension:[fc,fc],u_zoom:Ec.overscaledZ,u_maxzoom:Xb,u_unpack:uc.getUnpackVector()}}(Z.tileID,Rb,da),fa.id,Db.rasterBoundsBuffer,Db.quadTriangleIndexBuffer,Db.rasterBoundsSegments);Z.needsHillshadePrepare=
!1}}function Y(Db,Z,fa,da,ta,Ga){Db=Db.context;var Za=Db.gl;Za.enable(Za.SCISSOR_TEST);Za.scissor(Z*b.browser.devicePixelRatio,fa*b.browser.devicePixelRatio,da*b.browser.devicePixelRatio,ta*b.browser.devicePixelRatio);Db.clear({color:Ga});Za.disable(Za.SCISSOR_TEST)}function pa(Db,Z){(!Db.duration||Db.duration<Z.duration)&&(Db.duration=Z.duration,Db.easing=Z.easing)}function oa(Db,Z,fa){var da=fa.maxSpeed,ta=fa.linearity,Ga=fa.deceleration;Db=b.clamp(Db*ta/(Z/1E3),-da,da);ta=Math.abs(Db)/(Ga*ta);
return{easing:fa.easing,duration:1E3*ta,amount:ta/2*Db}}function ua(Db,Z){for(var fa={},da=0;da<Db.length;da++)fa[Db[da].identifier]=Z[da];return fa}function ya(Db,Z,fa){for(var da=0;da<Db.length;da++)if(Db[da].identifier===fa)return Z[da]}function ja(Db){return Math.abs(Db.y)>Math.abs(Db.x)}function za(Db){return Db*(2-Db)}function Ba(Db){return Db.panDelta&&Db.panDelta.mag()||Db.zoomDelta||Db.bearingDelta||Db.pitchDelta}function Ma(Db){Db.parentNode&&Db.parentNode.removeChild(Db)}function Oa(Db,
Z,fa){if(Db=new b.LngLat(Db.lng,Db.lat),Z){var da=new b.LngLat(Db.lng-360,Db.lat),ta=new b.LngLat(Db.lng+360,Db.lat),Ga=fa.locationPoint(Db).distSqr(Z);fa.locationPoint(da).distSqr(Z)<Ga?Db=da:fa.locationPoint(ta).distSqr(Z)<Ga&&(Db=ta)}for(;180<Math.abs(Db.lng-fa.center.lng);){Z=fa.locationPoint(Db);if(0<=Z.x&&0<=Z.y&&Z.x<=fa.width&&Z.y<=fa.height)break;Db.lng>fa.center.lng?Db.lng-=360:Db.lng+=360}return Db}function Ia(Db,Z,fa){Db=Db.classList;for(var da in yh)Db.remove("mapboxgl-"+fa+"-anchor-"+
da);Db.add("mapboxgl-"+fa+"-anchor-"+Z)}function Pa(Db,Z,fa){var da=fa&&fa.maxWidth||100,ta=Db._container.clientHeight/2,Ga=Db.unproject([0,ta]);ta=Db.unproject([da,ta]);Ga=Ga.distanceTo(ta);fa&&"imperial"===fa.unit?(fa=3.2808*Ga,5280<fa?Fa(Z,da,fa/5280,Db._getUIString("ScaleControl.Miles")):Fa(Z,da,fa,Db._getUIString("ScaleControl.Feet"))):fa&&"nautical"===fa.unit?Fa(Z,da,Ga/1852,Db._getUIString("ScaleControl.NauticalMiles")):1E3<=Ga?Fa(Z,da,Ga/1E3,Db._getUIString("ScaleControl.Kilometers")):Fa(Z,
da,Ga,Db._getUIString("ScaleControl.Meters"))}function Fa(Db,Z,fa,da){var ta,Ga=ta=Math.pow(10,(""+Math.floor(fa)).length-1);if(10<=(ta=fa/ta))ta=10;else if(5<=ta)ta=5;else if(3<=ta)ta=3;else if(2<=ta)ta=2;else if(1<=ta)ta=1;else{var Za=Math.pow(10,Math.ceil(-Math.log(ta)/Math.LN10));ta=Math.round(ta*Za)/Za}Ga*=ta;Db.style.width=Ga/fa*Z+"px";Db.innerHTML=Ga+"\x26nbsp;"+da}var Na=b.createCommonjsModule(function(Db){function Z(ta){return!fa(ta)}function fa(ta){return"undefined"==typeof window||"undefined"==
typeof document?"not a browser":Array.prototype&&Array.prototype.every&&Array.prototype.filter&&Array.prototype.forEach&&Array.prototype.indexOf&&Array.prototype.lastIndexOf&&Array.prototype.map&&Array.prototype.some&&Array.prototype.reduce&&Array.prototype.reduceRight&&Array.isArray?Function.prototype&&Function.prototype.bind?Object.keys&&Object.create&&Object.getPrototypeOf&&Object.getOwnPropertyNames&&Object.isSealed&&Object.isFrozen&&Object.isExtensible&&Object.getOwnPropertyDescriptor&&Object.defineProperty&&
Object.defineProperties&&Object.seal&&Object.freeze&&Object.preventExtensions?"JSON"in window&&"parse"in JSON&&"stringify"in JSON?function(){if(!("Worker"in window&&"Blob"in window&&"URL"in window))return!1;var Za=new Blob([""],{type:"text/javascript"});Za=URL.createObjectURL(Za);try{var hb=new Worker(Za);var ub=!0}catch(Rb){ub=!1}return hb&&hb.terminate(),URL.revokeObjectURL(Za),ub}()?"Uint8ClampedArray"in window?ArrayBuffer.isView?function(){var Za=document.createElement("canvas");Za.width=Za.height=
1;var hb=Za.getContext("2d");return hb?(hb=hb.getImageData(0,0,1,1))&&hb.width===Za.width:!1}()?(void 0===da[Ga=ta&&ta.failIfMajorPerformanceCaveat]&&(da[Ga]=function(Za){var hb=document.createElement("canvas"),ub=Object.create(Z.webGLContextAttributes);Za=(ub.failIfMajorPerformanceCaveat=Za,hb.probablySupportsContext?hb.probablySupportsContext("webgl",ub)||hb.probablySupportsContext("experimental-webgl",ub):hb.supportsContext?hb.supportsContext("webgl",ub)||hb.supportsContext("experimental-webgl",
ub):hb.getContext("webgl",ub)||hb.getContext("experimental-webgl",ub));if(!Za)return!1;hb=Za.createShader(Za.VERTEX_SHADER);return!(!hb||Za.isContextLost())&&(Za.shaderSource(hb,"void main() {}"),Za.compileShader(hb),!0===Za.getShaderParameter(hb,Za.COMPILE_STATUS))}(Ga)),da[Ga]?void 0:"insufficient WebGL support"):"insufficient Canvas/getImageData support":"insufficient ArrayBuffer support":"insufficient Uint8ClampedArray support":"insufficient worker support":"insufficient JSON support":"insufficient Object support":
"insufficient Function support":"insufficent Array support";var Ga}Db.exports?Db.exports=Z:window&&(window.mapboxgl=window.mapboxgl||{},window.mapboxgl.supported=Z,window.mapboxgl.notSupportedReason=fa);var da={};Z.webGLContextAttributes={antialias:!1,alpha:!0,stencil:!0,depth:!0}}),$a={create:function(Db,Z,fa){Db=b.window.document.createElement(Db);return void 0!==Z&&(Db.className=Z),fa&&fa.appendChild(Db),Db},createNS:function(Db,Z){return b.window.document.createElementNS(Db,Z)}},cb=b.window.document.documentElement.style,
mb,Ka=k(["userSelect","MozUserSelect","WebkitUserSelect","msUserSelect"]);$a.disableDrag=function(){cb&&Ka&&(mb=cb[Ka],cb[Ka]="none")};$a.enableDrag=function(){cb&&Ka&&(cb[Ka]=mb)};var Ua=k(["transform","WebkitTransform"]);$a.setTransform=function(Db,Z){Db.style[Ua]=Z};var Ea=!1;try{var Ya=Object.defineProperty({},"passive",{get:function(){Ea=!0}});b.window.addEventListener("test",Ya,Ya);b.window.removeEventListener("test",Ya,Ya)}catch(Db){Ea=!1}$a.addEventListener=function(Db,Z,fa,da){void 0===da&&
(da={});Db.addEventListener(Z,fa,"passive"in da&&Ea?da:da.capture)};$a.removeEventListener=function(Db,Z,fa,da){void 0===da&&(da={});Db.removeEventListener(Z,fa,"passive"in da&&Ea?da:da.capture)};var ab=function(Db){Db.preventDefault();Db.stopPropagation();b.window.removeEventListener("click",ab,!0)};$a.suppressClick=function(){b.window.addEventListener("click",ab,!0);b.window.setTimeout(function(){b.window.removeEventListener("click",ab,!0)},0)};$a.mousePos=function(Db,Z){var fa=Db.getBoundingClientRect();
return new b.Point(Z.clientX-fa.left-Db.clientLeft,Z.clientY-fa.top-Db.clientTop)};$a.touchPos=function(Db,Z){for(var fa=Db.getBoundingClientRect(),da=[],ta=0;ta<Z.length;ta++)da.push(new b.Point(Z[ta].clientX-fa.left-Db.clientLeft,Z[ta].clientY-fa.top-Db.clientTop));return da};$a.mouseButton=function(Db){return void 0!==b.window.InstallTrigger&&2===Db.button&&Db.ctrlKey&&0<=b.window.navigator.platform.toUpperCase().indexOf("MAC")?0:Db.button};$a.remove=function(Db){Db.parentNode&&Db.parentNode.removeChild(Db)};
var Wa=function(Db){function Z(){Db.call(this);this.images={};this.updatedImages={};this.callbackDispatchedThisFrame={};this.loaded=!1;this.requestors=[];this.patterns={};this.atlasImage=new b.RGBAImage({width:1,height:1});this.dirty=!0}return Db&&(Z.__proto__=Db),(Z.prototype=Object.create(Db&&Db.prototype)).constructor=Z,Z.prototype.isLoaded=function(){return this.loaded},Z.prototype.setLoaded=function(fa){if(this.loaded!==fa&&(this.loaded=fa,fa)){fa=0;for(var da=this.requestors;fa<da.length;fa+=
1){var ta=da[fa];this._notify(ta.ids,ta.callback)}this.requestors=[]}},Z.prototype.getImage=function(fa){return this.images[fa]},Z.prototype.addImage=function(fa,da){this._validate(fa,da)&&(this.images[fa]=da)},Z.prototype._validate=function(fa,da){var ta=!0;return this._validateStretch(da.stretchX,da.data&&da.data.width)||(this.fire(new b.ErrorEvent(Error('Image "'+fa+'" has invalid "stretchX" value'))),ta=!1),this._validateStretch(da.stretchY,da.data&&da.data.height)||(this.fire(new b.ErrorEvent(Error('Image "'+
fa+'" has invalid "stretchY" value'))),ta=!1),this._validateContent(da.content,da)||(this.fire(new b.ErrorEvent(Error('Image "'+fa+'" has invalid "content" value'))),ta=!1),ta},Z.prototype._validateStretch=function(fa,da){if(!fa)return!0;for(var ta=0,Ga=0;Ga<fa.length;Ga+=1){var Za=fa[Ga];if(Za[0]<ta||Za[1]<Za[0]||da<Za[1])return!1;ta=Za[1]}return!0},Z.prototype._validateContent=function(fa,da){return!(fa&&(4!==fa.length||0>fa[0]||da.data.width<fa[0]||0>fa[1]||da.data.height<fa[1]||0>fa[2]||da.data.width<
fa[2]||0>fa[3]||da.data.height<fa[3]||fa[2]<fa[0]||fa[3]<fa[1]))},Z.prototype.updateImage=function(fa,da){da.version=this.images[fa].version+1;this.images[fa]=da;this.updatedImages[fa]=!0},Z.prototype.removeImage=function(fa){var da=this.images[fa];delete this.images[fa];delete this.patterns[fa];da.userImage&&da.userImage.onRemove&&da.userImage.onRemove()},Z.prototype.listImages=function(){return Object.keys(this.images)},Z.prototype.getImages=function(fa,da){var ta=!0;if(!this.isLoaded())for(var Ga=
0;Ga<fa.length;Ga+=1)this.images[fa[Ga]]||(ta=!1);this.isLoaded()||ta?this._notify(fa,da):this.requestors.push({ids:fa,callback:da})},Z.prototype._notify=function(fa,da){for(var ta={},Ga=0;Ga<fa.length;Ga+=1){var Za=fa[Ga];this.images[Za]||this.fire(new b.Event("styleimagemissing",{id:Za}));var hb=this.images[Za];hb?ta[Za]={data:hb.data.clone(),pixelRatio:hb.pixelRatio,sdf:hb.sdf,version:hb.version,stretchX:hb.stretchX,stretchY:hb.stretchY,content:hb.content,hasRenderCallback:!(!hb.userImage||!hb.userImage.render)}:
b.warnOnce('Image "'+Za+'" could not be loaded. Please make sure you have added the image with map.addImage() or a "sprite" property in your style. You can provide missing images by listening for the "styleimagemissing" map event.')}da(null,ta)},Z.prototype.getPixelSize=function(){var fa=this.atlasImage;return{width:fa.width,height:fa.height}},Z.prototype.getPattern=function(fa){var da=this.patterns[fa],ta=this.getImage(fa);if(!ta)return null;if(da&&da.position.version===ta.version)return da.position;
da?da.position.version=ta.version:(da={w:ta.data.width+2,h:ta.data.height+2,x:0,y:0},ta=new b.ImagePosition(da,ta),this.patterns[fa]={bin:da,position:ta});return this._updatePatternAtlas(),this.patterns[fa].position},Z.prototype.bind=function(fa){var da=fa.gl;this.atlasTexture?this.dirty&&(this.atlasTexture.update(this.atlasImage),this.dirty=!1):this.atlasTexture=new b.Texture(fa,this.atlasImage,da.RGBA);this.atlasTexture.bind(da.LINEAR,da.CLAMP_TO_EDGE)},Z.prototype._updatePatternAtlas=function(){var fa=
[];for(da in this.patterns)fa.push(this.patterns[da].bin);fa=b.potpack(fa);var da=fa.w;var ta=fa.h;fa=this.atlasImage;for(var Ga in fa.resize({width:da||1,height:ta||1}),this.patterns){ta=this.patterns[Ga].bin;da=ta.x+1;ta=ta.y+1;var Za=this.images[Ga].data,hb=Za.width,ub=Za.height;b.RGBAImage.copy(Za,fa,{x:0,y:0},{x:da,y:ta},{width:hb,height:ub});b.RGBAImage.copy(Za,fa,{x:0,y:ub-1},{x:da,y:ta-1},{width:hb,height:1});b.RGBAImage.copy(Za,fa,{x:0,y:0},{x:da,y:ta+ub},{width:hb,height:1});b.RGBAImage.copy(Za,
fa,{x:hb-1,y:0},{x:da-1,y:ta},{width:1,height:ub});b.RGBAImage.copy(Za,fa,{x:0,y:0},{x:da+hb,y:ta},{width:1,height:ub})}this.dirty=!0},Z.prototype.beginFrame=function(){this.callbackDispatchedThisFrame={}},Z.prototype.dispatchRenderCallbacks=function(fa){for(var da=0;da<fa.length;da+=1){var ta=fa[da];if(!this.callbackDispatchedThisFrame[ta]){this.callbackDispatchedThisFrame[ta]=!0;var Ga=this.images[ta],Za=Ga,hb=Za.userImage;hb&&hb.render&&hb.render()&&(Za.data.replace(new Uint8Array(hb.data.buffer)),
!0)&&this.updateImage(ta,Ga)}}},Z}(b.Evented);e.prototype.draw=function(Db){this.ctx.clearRect(0,0,this.size,this.size);this.ctx.fillText(Db,this.buffer,this.middle);Db=this.ctx.getImageData(0,0,this.size,this.size);for(var Z=new Uint8ClampedArray(this.size*this.size),fa=0;fa<this.size*this.size;fa++){var da=Db.data[4*fa+3]/255;this.gridOuter[fa]=1===da?0:0===da?1E20:Math.pow(Math.max(0,.5-da),2);this.gridInner[fa]=1===da?1E20:0===da?0:Math.pow(Math.max(0,da-.5),2)}h(this.gridOuter,this.size,this.size,
this.f,this.d,this.v,this.z);h(this.gridInner,this.size,this.size,this.f,this.d,this.v,this.z);for(fa=0;fa<this.size*this.size;fa++)Z[fa]=Math.max(0,Math.min(255,Math.round(255-255*((this.gridOuter[fa]-this.gridInner[fa])/this.radius+this.cutoff))));return Z};e.default=e;var Ja=function(Db,Z){this.requestManager=Db;this.localIdeographFontFamily=Z;this.entries={}};Ja.prototype.setURL=function(Db){this.url=Db};Ja.prototype.getGlyphs=function(Db,Z){var fa=this,da=[],ta;for(ta in Db)for(var Ga=0,Za=Db[ta];Ga<
Za.length;Ga+=1)da.push({stack:ta,id:Za[Ga]});b.asyncAll(da,function(hb,ub){var Rb=hb.stack,Yb=hb.id,dc=fa.entries[Rb];dc||(dc=fa.entries[Rb]={glyphs:{},requests:{},ranges:{}});hb=dc.glyphs[Yb];if(void 0===hb){if(hb=fa._tinySDF(dc,Rb,Yb))return dc.glyphs[Yb]=hb,void ub(null,{stack:Rb,id:Yb,glyph:hb});var Ac=Math.floor(Yb/256);if(65535<256*Ac)ub(Error("glyphs \x3e 65535 not supported"));else if(dc.ranges[Ac])ub(null,{stack:Rb,id:Yb,glyph:hb});else{var Ec=dc.requests[Ac];Ec||(Ec=dc.requests[Ac]=[],
Ja.loadGlyphRange(Rb,Ac,fa.url,fa.requestManager,function(uc,Xb){if(Xb){for(var fc in Xb)fa._doesCharSupportLocalGlyph(+fc)||(dc.glyphs[+fc]=Xb[+fc]);dc.ranges[Ac]=!0}fc=0;for(var Cc=Ec;fc<Cc.length;fc+=1)(0,Cc[fc])(uc,Xb);delete dc.requests[Ac]}));Ec.push(function(uc,Xb){uc?ub(uc):Xb&&ub(null,{stack:Rb,id:Yb,glyph:Xb[Yb]||null})})}}else ub(null,{stack:Rb,id:Yb,glyph:hb})},function(hb,ub){if(hb)Z(hb);else if(ub){hb={};for(var Rb=0;Rb<ub.length;Rb+=1){var Yb=ub[Rb],dc=Yb.stack,Ac=Yb.id;Yb=Yb.glyph;
(hb[dc]||(hb[dc]={}))[Ac]=Yb&&{id:Yb.id,bitmap:Yb.bitmap.clone(),metrics:Yb.metrics}}Z(null,hb)}})};Ja.prototype._doesCharSupportLocalGlyph=function(Db){return!!this.localIdeographFontFamily&&(b.isChar["CJK Unified Ideographs"](Db)||b.isChar["Hangul Syllables"](Db)||b.isChar.Hiragana(Db)||b.isChar.Katakana(Db))};Ja.prototype._tinySDF=function(Db,Z,fa){var da=this.localIdeographFontFamily;if(da&&this._doesCharSupportLocalGlyph(fa)){var ta=Db.tinySDF;ta||(ta="400",/bold/i.test(Z)?ta="900":/medium/i.test(Z)?
ta="500":/light/i.test(Z)&&(ta="200"),ta=Db.tinySDF=new Ja.TinySDF(24,3,8,.25,da,ta));return{id:fa,bitmap:new b.AlphaImage({width:30,height:30},ta.draw(String.fromCharCode(fa))),metrics:{width:24,height:24,left:0,top:-8,advance:24}}}};Ja.loadGlyphRange=function(Db,Z,fa,da,ta){Z*=256;var Ga=Z+255;Db=da.transformRequest(da.normalizeGlyphsURL(fa).replace("{fontstack}",Db).replace("{range}",Z+"-"+Ga),b.ResourceType.Glyphs);b.getArrayBuffer(Db,function(Za,hb){if(Za)ta(Za);else if(hb){Za={};var ub=0;for(hb=
b.parseGlyphPBF(hb);ub<hb.length;ub+=1){var Rb=hb[ub];Za[Rb.id]=Rb}ta(null,Za)}})};Ja.TinySDF=e;var Sa=function(){this.specification=b.styleSpec.light.position};Sa.prototype.possiblyEvaluate=function(Db,Z){return b.sphericalToCartesian(Db.expression.evaluate(Z))};Sa.prototype.interpolate=function(Db,Z,fa){return{x:b.number(Db.x,Z.x,fa),y:b.number(Db.y,Z.y,fa),z:b.number(Db.z,Z.z,fa)}};var fb=new b.Properties({anchor:new b.DataConstantProperty(b.styleSpec.light.anchor),position:new Sa,color:new b.DataConstantProperty(b.styleSpec.light.color),
intensity:new b.DataConstantProperty(b.styleSpec.light.intensity)}),nb=function(Db){function Z(fa){Db.call(this);this._transitionable=new b.Transitionable(fb);this.setLight(fa);this._transitioning=this._transitionable.untransitioned()}return Db&&(Z.__proto__=Db),(Z.prototype=Object.create(Db&&Db.prototype)).constructor=Z,Z.prototype.getLight=function(){return this._transitionable.serialize()},Z.prototype.setLight=function(fa,da){if(void 0===da&&(da={}),!this._validate(b.validateLight,fa,da))for(var ta in fa)da=
fa[ta],b.endsWith(ta,"-transition")?this._transitionable.setTransition(ta.slice(0,-11),da):this._transitionable.setValue(ta,da)},Z.prototype.updateTransitions=function(fa){this._transitioning=this._transitionable.transitioned(fa,this._transitioning)},Z.prototype.hasTransition=function(){return this._transitioning.hasTransition()},Z.prototype.recalculate=function(fa){this.properties=this._transitioning.possiblyEvaluate(fa)},Z.prototype._validate=function(fa,da,ta){return(!ta||!1!==ta.validate)&&b.emitValidationErrors(this,
fa.call(b.validateStyle,b.extend({value:da,style:{glyphs:!0,sprite:!0},styleSpec:b.styleSpec})))},Z}(b.Evented),Ha=function(Db,Z){this.width=Db;this.height=Z;this.nextRow=0;this.data=new Uint8Array(this.width*this.height);this.dashEntry={}};Ha.prototype.getDash=function(Db,Z){var fa=Db.join(",")+String(Z);return this.dashEntry[fa]||(this.dashEntry[fa]=this.addDash(Db,Z)),this.dashEntry[fa]};Ha.prototype.getDashRanges=function(Db,Z,fa){Z=[];var da=!0;Z.push({left:1==Db.length%2?-Db[Db.length-1]*fa:
0,right:Db[0]*fa,isDash:da,zeroLength:0===Db[0]});for(var ta=Db[0],Ga=1;Ga<Db.length;Ga++){var Za=Db[Ga];Z.push({left:ta*fa,right:(ta+=Za)*fa,isDash:da=!da,zeroLength:0===Za})}return Z};Ha.prototype.addRoundDash=function(Db,Z,fa){Z/=2;for(var da=-fa;da<=fa;da++)for(var ta=this.width*(this.nextRow+fa+da),Ga=0,Za=Db[Ga],hb=0;hb<this.width;hb++){1<hb/Za.right&&(Za=Db[++Ga]);var ub=Math.min(Math.abs(hb-Za.left),Math.abs(hb-Za.right)),Rb=da/fa*(Z+1);Za.isDash?(Rb=Z-Math.abs(Rb),ub=Math.sqrt(ub*ub+Rb*Rb)):
ub=Z-Math.sqrt(ub*ub+Rb*Rb);this.data[ta+hb]=Math.max(0,Math.min(255,ub+128))}};Ha.prototype.addRegularDash=function(Db){for(var Z=Db.length-1;0<=Z;--Z){var fa=Db[Z],da=Db[Z+1];fa.zeroLength?Db.splice(Z,1):da&&da.isDash===fa.isDash&&(da.left=fa.left,Db.splice(Z,1))}Z=Db[0];fa=Db[Db.length-1];Z.isDash===fa.isDash&&(Z.left=fa.left-this.width,fa.right=Z.right+this.width);Z=this.width*this.nextRow;fa=0;da=Db[fa];for(var ta=0;ta<this.width;ta++){1<ta/da.right&&(da=Db[++fa]);var Ga=Math.min(Math.abs(ta-
da.left),Math.abs(ta-da.right));this.data[Z+ta]=Math.max(0,Math.min(255,(da.isDash?Ga:-Ga)+128))}};Ha.prototype.addDash=function(Db,Z){var fa=Z?7:0,da=2*fa+1;if(this.nextRow+da>this.height)return b.warnOnce("LineAtlas out of space"),null;for(var ta=0,Ga=0;Ga<Db.length;Ga++)ta+=Db[Ga];0!==ta&&(Ga=this.width/ta,Db=this.getDashRanges(Db,this.width,Ga),Z?this.addRoundDash(Db,Ga,fa):this.addRegularDash(Db));Z={y:(this.nextRow+fa+.5)/this.height,height:2*fa/this.height,width:ta};return this.nextRow+=da,
this.dirty=!0,Z};Ha.prototype.bind=function(Db){Db=Db.gl;this.texture?(Db.bindTexture(Db.TEXTURE_2D,this.texture),this.dirty&&(this.dirty=!1,Db.texSubImage2D(Db.TEXTURE_2D,0,0,0,this.width,this.height,Db.ALPHA,Db.UNSIGNED_BYTE,this.data))):(this.texture=Db.createTexture(),Db.bindTexture(Db.TEXTURE_2D,this.texture),Db.texParameteri(Db.TEXTURE_2D,Db.TEXTURE_WRAP_S,Db.REPEAT),Db.texParameteri(Db.TEXTURE_2D,Db.TEXTURE_WRAP_T,Db.REPEAT),Db.texParameteri(Db.TEXTURE_2D,Db.TEXTURE_MIN_FILTER,Db.LINEAR),Db.texParameteri(Db.TEXTURE_2D,
Db.TEXTURE_MAG_FILTER,Db.LINEAR),Db.texImage2D(Db.TEXTURE_2D,0,Db.ALPHA,this.width,this.height,0,Db.ALPHA,Db.UNSIGNED_BYTE,this.data))};var Ca=function da(Z,fa){this.workerPool=Z;this.actors=[];this.currentActor=0;this.id=b.uniqueId();Z=this.workerPool.acquire(this.id);for(var ta=0;ta<Z.length;ta++){var Ga=new da.Actor(Z[ta],fa,this.id);Ga.name="Worker "+ta;this.actors.push(Ga)}};Ca.prototype.broadcast=function(Z,fa,da){b.asyncAll(this.actors,function(ta,Ga){ta.send(Z,fa,Ga)},da=da||function(){})};
Ca.prototype.getActor=function(){return this.currentActor=(this.currentActor+1)%this.actors.length,this.actors[this.currentActor]};Ca.prototype.remove=function(){this.actors.forEach(function(Z){Z.remove()});this.actors=[];this.workerPool.release(this.id)};Ca.Actor=b.Actor;var Qa=function(Z,fa,da){this.bounds=b.LngLatBounds.convert(this.validateBounds(Z));this.minzoom=fa||0;this.maxzoom=da||24};Qa.prototype.validateBounds=function(Z){return Array.isArray(Z)&&4===Z.length?[Math.max(-180,Z[0]),Math.max(-90,
Z[1]),Math.min(180,Z[2]),Math.min(90,Z[3])]:[-180,-90,180,90]};Qa.prototype.contains=function(Z){var fa=Math.pow(2,Z.z),da=Math.floor(b.mercatorXfromLng(this.bounds.getWest())*fa),ta=Math.floor(b.mercatorYfromLat(this.bounds.getNorth())*fa),Ga=Math.ceil(b.mercatorXfromLng(this.bounds.getEast())*fa);fa=Math.ceil(b.mercatorYfromLat(this.bounds.getSouth())*fa);return Z.x>=da&&Z.x<Ga&&Z.y>=ta&&Z.y<fa};var gb=function(Z){function fa(da,ta,Ga,Za){if(Z.call(this),this.id=da,this.dispatcher=Ga,this.type=
"vector",this.minzoom=0,this.maxzoom=22,this.scheme="xyz",this.tileSize=512,this.reparseOverscaled=!0,this.isTileClipped=!0,this._loaded=!1,b.extend(this,b.pick(ta,["url","scheme","tileSize","promoteId"])),this._options=b.extend({type:"vector"},ta),this._collectResourceTiming=ta.collectResourceTiming,512!==this.tileSize)throw Error("vector tile sources must have a tileSize of 512");this.setEventedParent(Za)}return Z&&(fa.__proto__=Z),(fa.prototype=Object.create(Z&&Z.prototype)).constructor=fa,fa.prototype.load=
function(){var da=this;this._loaded=!1;this.fire(new b.Event("dataloading",{dataType:"source"}));this._tileJSONRequest=c(this._options,this.map._requestManager,function(ta,Ga){da._tileJSONRequest=null;da._loaded=!0;ta?da.fire(new b.ErrorEvent(ta)):Ga&&(b.extend(da,Ga),Ga.bounds&&(da.tileBounds=new Qa(Ga.bounds,da.minzoom,da.maxzoom)),b.postTurnstileEvent(Ga.tiles,da.map._requestManager._customAccessToken),b.postMapLoadEvent(Ga.tiles,da.map._getMapId(),da.map._requestManager._skuToken,da.map._requestManager._customAccessToken),
da.fire(new b.Event("data",{dataType:"source",sourceDataType:"metadata"})),da.fire(new b.Event("data",{dataType:"source",sourceDataType:"content"})))})},fa.prototype.loaded=function(){return this._loaded},fa.prototype.hasTile=function(da){return!this.tileBounds||this.tileBounds.contains(da.canonical)},fa.prototype.onAdd=function(da){this.map=da;this.load()},fa.prototype.onRemove=function(){this._tileJSONRequest&&(this._tileJSONRequest.cancel(),this._tileJSONRequest=null)},fa.prototype.serialize=function(){return b.extend({},
this._options)},fa.prototype.loadTile=function(da,ta){function Ga(hb,ub){return delete da.request,da.aborted?ta(null):hb&&404!==hb.status?ta(hb):(ub&&ub.resourceTiming&&(da.resourceTiming=ub.resourceTiming),this.map._refreshExpiredTiles&&ub&&da.setExpiryData(ub),da.loadVectorData(ub,this.map.painter),b.cacheEntryPossiblyAdded(this.dispatcher),ta(null),void(da.reloadCallback&&(this.loadTile(da,da.reloadCallback),da.reloadCallback=null)))}var Za=this.map._requestManager.normalizeTileURL(da.tileID.canonical.url(this.tiles,
this.scheme));Za={request:this.map._requestManager.transformRequest(Za,b.ResourceType.Tile),uid:da.uid,tileID:da.tileID,zoom:da.tileID.overscaledZ,tileSize:this.tileSize*da.tileID.overscaleFactor(),type:this.type,source:this.id,pixelRatio:b.browser.devicePixelRatio,showCollisionBoxes:this.map.showCollisionBoxes,promoteId:this.promoteId};Za.request.collectResourceTiming=this._collectResourceTiming;da.actor&&"expired"!==da.state?"loading"===da.state?da.reloadCallback=ta:da.request=da.actor.send("reloadTile",
Za,Ga.bind(this)):(da.actor=this.dispatcher.getActor(),da.request=da.actor.send("loadTile",Za,Ga.bind(this)))},fa.prototype.abortTile=function(da){da.request&&(da.request.cancel(),delete da.request);da.actor&&da.actor.send("abortTile",{uid:da.uid,type:this.type,source:this.id},void 0)},fa.prototype.unloadTile=function(da){da.unloadVectorData();da.actor&&da.actor.send("removeTile",{uid:da.uid,type:this.type,source:this.id},void 0)},fa.prototype.hasTransition=function(){return!1},fa}(b.Evented),Va=
function(Z){function fa(da,ta,Ga,Za){Z.call(this);this.id=da;this.dispatcher=Ga;this.setEventedParent(Za);this.type="raster";this.minzoom=0;this.maxzoom=22;this.roundZoom=!0;this.scheme="xyz";this.tileSize=512;this._loaded=!1;this._options=b.extend({type:"raster"},ta);b.extend(this,b.pick(ta,["url","scheme","tileSize"]))}return Z&&(fa.__proto__=Z),(fa.prototype=Object.create(Z&&Z.prototype)).constructor=fa,fa.prototype.load=function(){var da=this;this._loaded=!1;this.fire(new b.Event("dataloading",
{dataType:"source"}));this._tileJSONRequest=c(this._options,this.map._requestManager,function(ta,Ga){da._tileJSONRequest=null;da._loaded=!0;ta?da.fire(new b.ErrorEvent(ta)):Ga&&(b.extend(da,Ga),Ga.bounds&&(da.tileBounds=new Qa(Ga.bounds,da.minzoom,da.maxzoom)),b.postTurnstileEvent(Ga.tiles),b.postMapLoadEvent(Ga.tiles,da.map._getMapId(),da.map._requestManager._skuToken),da.fire(new b.Event("data",{dataType:"source",sourceDataType:"metadata"})),da.fire(new b.Event("data",{dataType:"source",sourceDataType:"content"})))})},
fa.prototype.loaded=function(){return this._loaded},fa.prototype.onAdd=function(da){this.map=da;this.load()},fa.prototype.onRemove=function(){this._tileJSONRequest&&(this._tileJSONRequest.cancel(),this._tileJSONRequest=null)},fa.prototype.serialize=function(){return b.extend({},this._options)},fa.prototype.hasTile=function(da){return!this.tileBounds||this.tileBounds.contains(da.canonical)},fa.prototype.loadTile=function(da,ta){var Ga=this,Za=this.map._requestManager.normalizeTileURL(da.tileID.canonical.url(this.tiles,
this.scheme),this.tileSize);da.request=b.getImage(this.map._requestManager.transformRequest(Za,b.ResourceType.Tile),function(hb,ub){if(delete da.request,da.aborted)da.state="unloaded",ta(null);else if(hb)da.state="errored",ta(hb);else if(ub){Ga.map._refreshExpiredTiles&&da.setExpiryData(ub);delete ub.cacheControl;delete ub.expires;hb=Ga.map.painter.context;var Rb=hb.gl;da.texture=Ga.map.painter.getTileTexture(ub.width);da.texture?da.texture.update(ub,{useMipmap:!0}):(da.texture=new b.Texture(hb,ub,
Rb.RGBA,{useMipmap:!0}),da.texture.bind(Rb.LINEAR,Rb.CLAMP_TO_EDGE,Rb.LINEAR_MIPMAP_NEAREST),hb.extTextureFilterAnisotropic&&Rb.texParameterf(Rb.TEXTURE_2D,hb.extTextureFilterAnisotropic.TEXTURE_MAX_ANISOTROPY_EXT,hb.extTextureFilterAnisotropicMax));da.state="loaded";b.cacheEntryPossiblyAdded(Ga.dispatcher);ta(null)}})},fa.prototype.abortTile=function(da,ta){da.request&&(da.request.cancel(),delete da.request);ta()},fa.prototype.unloadTile=function(da,ta){da.texture&&this.map.painter.saveTileTexture(da.texture);
ta()},fa.prototype.hasTransition=function(){return!1},fa}(b.Evented),db=function(Z){function fa(da,ta,Ga,Za){Z.call(this,da,ta,Ga,Za);this.type="raster-dem";this.maxzoom=22;this._options=b.extend({type:"raster-dem"},ta);this.encoding=ta.encoding||"mapbox"}return Z&&(fa.__proto__=Z),(fa.prototype=Object.create(Z&&Z.prototype)).constructor=fa,fa.prototype.serialize=function(){return{type:"raster-dem",url:this.url,tileSize:this.tileSize,tiles:this.tiles,bounds:this.bounds,encoding:this.encoding}},fa.prototype.loadTile=
function(da,ta){function Ga(hb,ub){hb&&(da.state="errored",ta(hb));ub&&(da.dem=ub,da.needsHillshadePrepare=!0,da.state="loaded",ta(null))}var Za=this.map._requestManager.normalizeTileURL(da.tileID.canonical.url(this.tiles,this.scheme),this.tileSize);da.request=b.getImage(this.map._requestManager.transformRequest(Za,b.ResourceType.Tile),function(hb,ub){(delete da.request,da.aborted)?(da.state="unloaded",ta(null)):hb?(da.state="errored",ta(hb)):ub&&(this.map._refreshExpiredTiles&&da.setExpiryData(ub),
delete ub.cacheControl,delete ub.expires,hb=b.window.ImageBitmap&&ub instanceof b.window.ImageBitmap&&b.offscreenCanvasSupported()?ub:b.browser.getImageData(ub,1),hb={uid:da.uid,coord:da.tileID,source:this.id,rawImageData:hb,encoding:this.encoding},da.actor&&"expired"!==da.state||(da.actor=this.dispatcher.getActor(),da.actor.send("loadDEMTile",hb,Ga.bind(this))))}.bind(this));da.neighboringTiles=this._getNeighboringTiles(da.tileID)},fa.prototype._getNeighboringTiles=function(da){var ta=da.canonical,
Ga=Math.pow(2,ta.z),Za=(ta.x-1+Ga)%Ga,hb=0===ta.x?da.wrap-1:da.wrap,ub=(ta.x+1+Ga)%Ga,Rb=ta.x+1===Ga?da.wrap+1:da.wrap,Yb={};return Yb[(new b.OverscaledTileID(da.overscaledZ,hb,ta.z,Za,ta.y)).key]={backfilled:!1},Yb[(new b.OverscaledTileID(da.overscaledZ,Rb,ta.z,ub,ta.y)).key]={backfilled:!1},0<ta.y&&(Yb[(new b.OverscaledTileID(da.overscaledZ,hb,ta.z,Za,ta.y-1)).key]={backfilled:!1},Yb[(new b.OverscaledTileID(da.overscaledZ,da.wrap,ta.z,ta.x,ta.y-1)).key]={backfilled:!1},Yb[(new b.OverscaledTileID(da.overscaledZ,
Rb,ta.z,ub,ta.y-1)).key]={backfilled:!1}),ta.y+1<Ga&&(Yb[(new b.OverscaledTileID(da.overscaledZ,hb,ta.z,Za,ta.y+1)).key]={backfilled:!1},Yb[(new b.OverscaledTileID(da.overscaledZ,da.wrap,ta.z,ta.x,ta.y+1)).key]={backfilled:!1},Yb[(new b.OverscaledTileID(da.overscaledZ,Rb,ta.z,ub,ta.y+1)).key]={backfilled:!1}),Yb},fa.prototype.unloadTile=function(da){da.demTexture&&this.map.painter.saveTileTexture(da.demTexture);da.fbo&&(da.fbo.destroy(),delete da.fbo);da.dem&&delete da.dem;delete da.neighboringTiles;
da.state="unloaded";da.actor&&da.actor.send("removeDEMTile",{uid:da.uid,source:this.id})},fa}(Va),qb=function(Z){function fa(da,ta,Ga,Za){Z.call(this);this.id=da;this.type="geojson";this.minzoom=0;this.maxzoom=18;this.tileSize=512;this.reparseOverscaled=this.isTileClipped=!0;this._loaded=this._removed=!1;this.actor=Ga.getActor();this.setEventedParent(Za);this._data=ta.data;this._options=b.extend({},ta);this._collectResourceTiming=ta.collectResourceTiming;this._resourceTiming=[];void 0!==ta.maxzoom&&
(this.maxzoom=ta.maxzoom);ta.type&&(this.type=ta.type);ta.attribution&&(this.attribution=ta.attribution);this.promoteId=ta.promoteId;da=b.EXTENT/this.tileSize;this.workerOptions=b.extend({source:this.id,cluster:ta.cluster||!1,geojsonVtOptions:{buffer:(void 0!==ta.buffer?ta.buffer:128)*da,tolerance:(void 0!==ta.tolerance?ta.tolerance:.375)*da,extent:b.EXTENT,maxZoom:this.maxzoom,lineMetrics:ta.lineMetrics||!1,generateId:ta.generateId||!1},superclusterOptions:{maxZoom:void 0!==ta.clusterMaxZoom?Math.min(ta.clusterMaxZoom,
this.maxzoom-1):this.maxzoom-1,extent:b.EXTENT,radius:(ta.clusterRadius||50)*da,log:!1,generateId:ta.generateId||!1},clusterProperties:ta.clusterProperties},ta.workerOptions)}return Z&&(fa.__proto__=Z),(fa.prototype=Object.create(Z&&Z.prototype)).constructor=fa,fa.prototype.load=function(){var da=this;this.fire(new b.Event("dataloading",{dataType:"source"}));this._updateWorkerData(function(ta){ta?da.fire(new b.ErrorEvent(ta)):(ta={dataType:"source",sourceDataType:"metadata"},da._collectResourceTiming&&
da._resourceTiming&&0<da._resourceTiming.length&&(ta.resourceTiming=da._resourceTiming,da._resourceTiming=[]),da.fire(new b.Event("data",ta)))})},fa.prototype.onAdd=function(da){this.map=da;this.load()},fa.prototype.setData=function(da){var ta=this;return this._data=da,this.fire(new b.Event("dataloading",{dataType:"source"})),this._updateWorkerData(function(Ga){Ga?ta.fire(new b.ErrorEvent(Ga)):(Ga={dataType:"source",sourceDataType:"content"},ta._collectResourceTiming&&ta._resourceTiming&&0<ta._resourceTiming.length&&
(Ga.resourceTiming=ta._resourceTiming,ta._resourceTiming=[]),ta.fire(new b.Event("data",Ga)))}),this},fa.prototype.getClusterExpansionZoom=function(da,ta){return this.actor.send("geojson.getClusterExpansionZoom",{clusterId:da,source:this.id},ta),this},fa.prototype.getClusterChildren=function(da,ta){return this.actor.send("geojson.getClusterChildren",{clusterId:da,source:this.id},ta),this},fa.prototype.getClusterLeaves=function(da,ta,Ga,Za){return this.actor.send("geojson.getClusterLeaves",{source:this.id,
clusterId:da,limit:ta,offset:Ga},Za),this},fa.prototype._updateWorkerData=function(da){var ta=this;this._loaded=!1;var Ga=b.extend({},this.workerOptions),Za=this._data;"string"==typeof Za?(Ga.request=this.map._requestManager.transformRequest(b.browser.resolveURL(Za),b.ResourceType.Source),Ga.request.collectResourceTiming=this._collectResourceTiming):Ga.data=JSON.stringify(Za);this.actor.send(this.type+".loadData",Ga,function(hb,ub){ta._removed||ub&&ub.abandoned||(ta._loaded=!0,ub&&ub.resourceTiming&&
ub.resourceTiming[ta.id]&&(ta._resourceTiming=ub.resourceTiming[ta.id].slice(0)),ta.actor.send(ta.type+".coalesce",{source:Ga.source},null),da(hb))})},fa.prototype.loaded=function(){return this._loaded},fa.prototype.loadTile=function(da,ta){var Ga=this,Za=da.actor?"reloadTile":"loadTile";da.actor=this.actor;da.request=this.actor.send(Za,{type:this.type,uid:da.uid,tileID:da.tileID,zoom:da.tileID.overscaledZ,maxZoom:this.maxzoom,tileSize:this.tileSize,source:this.id,pixelRatio:b.browser.devicePixelRatio,
showCollisionBoxes:this.map.showCollisionBoxes,promoteId:this.promoteId},function(hb,ub){return delete da.request,da.unloadVectorData(),da.aborted?ta(null):hb?ta(hb):(da.loadVectorData(ub,Ga.map.painter,"reloadTile"===Za),ta(null))})},fa.prototype.abortTile=function(da){da.request&&(da.request.cancel(),delete da.request);da.aborted=!0},fa.prototype.unloadTile=function(da){da.unloadVectorData();this.actor.send("removeTile",{uid:da.uid,type:this.type,source:this.id})},fa.prototype.onRemove=function(){this._removed=
!0;this.actor.send("removeSource",{type:this.type,source:this.id})},fa.prototype.serialize=function(){return b.extend({},this._options,{type:this.type,data:this._data})},fa.prototype.hasTransition=function(){return!1},fa}(b.Evented),Kb=b.createLayout([{name:"a_pos",type:"Int16",components:2},{name:"a_texture_pos",type:"Int16",components:2}]),Ob=function(Z){function fa(da,ta,Ga,Za){Z.call(this);this.id=da;this.dispatcher=Ga;this.coordinates=ta.coordinates;this.type="image";this.minzoom=0;this.maxzoom=
22;this.tileSize=512;this.tiles={};this._loaded=!1;this.setEventedParent(Za);this.options=ta}return Z&&(fa.__proto__=Z),(fa.prototype=Object.create(Z&&Z.prototype)).constructor=fa,fa.prototype.load=function(da,ta){var Ga=this;this._loaded=!1;this.fire(new b.Event("dataloading",{dataType:"source"}));this.url=this.options.url;b.getImage(this.map._requestManager.transformRequest(this.url,b.ResourceType.Image),function(Za,hb){Ga._loaded=!0;Za?Ga.fire(new b.ErrorEvent(Za)):hb&&(Ga.image=hb,da&&(Ga.coordinates=
da),ta&&ta(),Ga._finishLoading())})},fa.prototype.loaded=function(){return this._loaded},fa.prototype.updateImage=function(da){var ta=this;return this.image&&da.url?(this.options.url=da.url,this.load(da.coordinates,function(){ta.texture=null}),this):this},fa.prototype._finishLoading=function(){this.map&&(this.setCoordinates(this.coordinates),this.fire(new b.Event("data",{dataType:"source",sourceDataType:"metadata"})))},fa.prototype.onAdd=function(da){this.map=da;this.load()},fa.prototype.setCoordinates=
function(da){var ta=this;this.coordinates=da;da=da.map(b.MercatorCoordinate.fromLngLat);this.tileID=function(Ga){for(var Za=1/0,hb=1/0,ub=-1/0,Rb=-1/0,Yb=0;Yb<Ga.length;Yb+=1){var dc=Ga[Yb];Za=Math.min(Za,dc.x);hb=Math.min(hb,dc.y);ub=Math.max(ub,dc.x);Rb=Math.max(Rb,dc.y)}Ga=Math.max(0,Math.floor(-Math.log(Math.max(ub-Za,Rb-hb))/Math.LN2));Yb=Math.pow(2,Ga);return new b.CanonicalTileID(Ga,Math.floor((Za+ub)/2*Yb),Math.floor((hb+Rb)/2*Yb))}(da);this.minzoom=this.maxzoom=this.tileID.z;da=da.map(function(Ga){return ta.tileID.getTilePoint(Ga)._round()});
return this._boundsArray=new b.StructArrayLayout4i8,this._boundsArray.emplaceBack(da[0].x,da[0].y,0,0),this._boundsArray.emplaceBack(da[1].x,da[1].y,b.EXTENT,0),this._boundsArray.emplaceBack(da[3].x,da[3].y,0,b.EXTENT),this._boundsArray.emplaceBack(da[2].x,da[2].y,b.EXTENT,b.EXTENT),this.boundsBuffer&&(this.boundsBuffer.destroy(),delete this.boundsBuffer),this.fire(new b.Event("data",{dataType:"source",sourceDataType:"content"})),this},fa.prototype.prepare=function(){if(0!==Object.keys(this.tiles).length&&
this.image){var da=this.map.painter.context,ta=da.gl,Ga;for(Ga in this.boundsBuffer||(this.boundsBuffer=da.createVertexBuffer(this._boundsArray,Kb.members)),this.boundsSegments||(this.boundsSegments=b.SegmentVector.simpleSegment(0,0,4,2)),this.texture||(this.texture=new b.Texture(da,this.image,ta.RGBA),this.texture.bind(ta.LINEAR,ta.CLAMP_TO_EDGE)),this.tiles)da=this.tiles[Ga],"loaded"!==da.state&&(da.state="loaded",da.texture=this.texture)}},fa.prototype.loadTile=function(da,ta){this.tileID&&this.tileID.equals(da.tileID.canonical)?
(this.tiles[String(da.tileID.wrap)]=da,da.buckets={},ta(null)):(da.state="errored",ta(null))},fa.prototype.serialize=function(){return{type:"image",url:this.options.url,coordinates:this.coordinates}},fa.prototype.hasTransition=function(){return!1},fa}(b.Evented),cc=function(Z){function fa(da,ta,Ga,Za){Z.call(this,da,ta,Ga,Za);this.roundZoom=!0;this.type="video";this.options=ta}return Z&&(fa.__proto__=Z),(fa.prototype=Object.create(Z&&Z.prototype)).constructor=fa,fa.prototype.load=function(){var da=
this;this._loaded=!1;var ta=this.options;this.urls=[];var Ga=0;for(ta=ta.urls;Ga<ta.length;Ga+=1)this.urls.push(this.map._requestManager.transformRequest(ta[Ga],b.ResourceType.Source).url);b.getVideo(this.urls,function(Za,hb){da._loaded=!0;Za?da.fire(new b.ErrorEvent(Za)):hb&&(da.video=hb,da.video.loop=!0,da.video.addEventListener("playing",function(){da.map.triggerRepaint()}),da.map&&da.video.play(),da._finishLoading())})},fa.prototype.pause=function(){this.video&&this.video.pause()},fa.prototype.play=
function(){this.video&&this.video.play()},fa.prototype.seek=function(da){if(this.video){var ta=this.video.seekable;da<ta.start(0)||da>ta.end(0)?this.fire(new b.ErrorEvent(new b.ValidationError("sources."+this.id,null,"Playback for this video can be set only between the "+ta.start(0)+" and "+ta.end(0)+"-second mark."))):this.video.currentTime=da}},fa.prototype.getVideo=function(){return this.video},fa.prototype.onAdd=function(da){this.map||(this.map=da,this.load(),this.video&&(this.video.play(),this.setCoordinates(this.coordinates)))},
fa.prototype.prepare=function(){if(!(0===Object.keys(this.tiles).length||2>this.video.readyState)){var da=this.map.painter.context,ta=da.gl,Ga;for(Ga in this.boundsBuffer||(this.boundsBuffer=da.createVertexBuffer(this._boundsArray,Kb.members)),this.boundsSegments||(this.boundsSegments=b.SegmentVector.simpleSegment(0,0,4,2)),this.texture?this.video.paused||(this.texture.bind(ta.LINEAR,ta.CLAMP_TO_EDGE),ta.texSubImage2D(ta.TEXTURE_2D,0,0,0,ta.RGBA,ta.UNSIGNED_BYTE,this.video)):(this.texture=new b.Texture(da,
this.video,ta.RGBA),this.texture.bind(ta.LINEAR,ta.CLAMP_TO_EDGE)),this.tiles)da=this.tiles[Ga],"loaded"!==da.state&&(da.state="loaded",da.texture=this.texture)}},fa.prototype.serialize=function(){return{type:"video",urls:this.urls,coordinates:this.coordinates}},fa.prototype.hasTransition=function(){return this.video&&!this.video.paused},fa}(Ob),kc=function(Z){function fa(da,ta,Ga,Za){Z.call(this,da,ta,Ga,Za);ta.coordinates?Array.isArray(ta.coordinates)&&4===ta.coordinates.length&&!ta.coordinates.some(function(hb){return!Array.isArray(hb)||
2!==hb.length||hb.some(function(ub){return"number"!=typeof ub})})||this.fire(new b.ErrorEvent(new b.ValidationError("sources."+da,null,'"coordinates" property must be an array of 4 longitude/latitude array pairs'))):this.fire(new b.ErrorEvent(new b.ValidationError("sources."+da,null,'missing required property "coordinates"')));ta.animate&&"boolean"!=typeof ta.animate&&this.fire(new b.ErrorEvent(new b.ValidationError("sources."+da,null,'optional "animate" property must be a boolean value')));ta.canvas?
"string"==typeof ta.canvas||ta.canvas instanceof b.window.HTMLCanvasElement||this.fire(new b.ErrorEvent(new b.ValidationError("sources."+da,null,'"canvas" must be either a string representing the ID of the canvas element from which to read, or an HTMLCanvasElement instance'))):this.fire(new b.ErrorEvent(new b.ValidationError("sources."+da,null,'missing required property "canvas"')));this.options=ta;this.animate=void 0===ta.animate||ta.animate}return Z&&(fa.__proto__=Z),(fa.prototype=Object.create(Z&&
Z.prototype)).constructor=fa,fa.prototype.load=function(){this._loaded=!0;this.canvas||(this.canvas=this.options.canvas instanceof b.window.HTMLCanvasElement?this.options.canvas:b.window.document.getElementById(this.options.canvas));this.width=this.canvas.width;this.height=this.canvas.height;this._hasInvalidDimensions()?this.fire(new b.ErrorEvent(Error("Canvas dimensions cannot be less than or equal to zero."))):(this.play=function(){this._playing=!0;this.map.triggerRepaint()},this.pause=function(){this._playing&&
(this.prepare(),this._playing=!1)},this._finishLoading())},fa.prototype.getCanvas=function(){return this.canvas},fa.prototype.onAdd=function(da){this.map=da;this.load();this.canvas&&this.animate&&this.play()},fa.prototype.onRemove=function(){this.pause()},fa.prototype.prepare=function(){var da=!1;if(this.canvas.width!==this.width&&(this.width=this.canvas.width,da=!0),this.canvas.height!==this.height&&(this.height=this.canvas.height,da=!0),!this._hasInvalidDimensions()&&0!==Object.keys(this.tiles).length){var ta=
this.map.painter.context,Ga=ta.gl,Za;for(Za in this.boundsBuffer||(this.boundsBuffer=ta.createVertexBuffer(this._boundsArray,Kb.members)),this.boundsSegments||(this.boundsSegments=b.SegmentVector.simpleSegment(0,0,4,2)),this.texture?(da||this._playing)&&this.texture.update(this.canvas,{premultiply:!0}):this.texture=new b.Texture(ta,this.canvas,Ga.RGBA,{premultiply:!0}),this.tiles)da=this.tiles[Za],"loaded"!==da.state&&(da.state="loaded",da.texture=this.texture)}},fa.prototype.serialize=function(){return{type:"canvas",
coordinates:this.coordinates}},fa.prototype.hasTransition=function(){return this._playing},fa.prototype._hasInvalidDimensions=function(){for(var da=0,ta=[this.canvas.width,this.canvas.height];da<ta.length;da+=1){var Ga=ta[da];if(isNaN(Ga)||0>=Ga)return!0}return!1},fa}(Ob),qc={vector:gb,raster:Va,"raster-dem":db,geojson:qb,video:cc,image:Ob,canvas:kc},Pc=function(Z,fa){this.max=Z;this.onRemove=fa;this.reset()};Pc.prototype.reset=function(){for(var Z in this.data)for(var fa=0,da=this.data[Z];fa<da.length;fa+=
1){var ta=da[fa];ta.timeout&&clearTimeout(ta.timeout);this.onRemove(ta.value)}return this.data={},this.order=[],this};Pc.prototype.add=function(Z,fa,da){var ta=this,Ga=Z.wrapped().key;void 0===this.data[Ga]&&(this.data[Ga]=[]);var Za={value:fa,timeout:void 0};(void 0!==da&&(Za.timeout=setTimeout(function(){ta.remove(Z,Za)},da)),this.data[Ga].push(Za),this.order.push(Ga),this.order.length>this.max)&&(fa=this._getAndRemoveByKey(this.order[0]))&&this.onRemove(fa);return this};Pc.prototype.has=function(Z){return Z.wrapped().key in
this.data};Pc.prototype.getAndRemove=function(Z){return this.has(Z)?this._getAndRemoveByKey(Z.wrapped().key):null};Pc.prototype._getAndRemoveByKey=function(Z){var fa=this.data[Z].shift();return fa.timeout&&clearTimeout(fa.timeout),0===this.data[Z].length&&delete this.data[Z],this.order.splice(this.order.indexOf(Z),1),fa.value};Pc.prototype.getByKey=function(Z){return(Z=this.data[Z])?Z[0].value:null};Pc.prototype.get=function(Z){return this.has(Z)?this.data[Z.wrapped().key][0].value:null};Pc.prototype.remove=
function(Z,fa){if(!this.has(Z))return this;Z=Z.wrapped().key;fa=void 0===fa?0:this.data[Z].indexOf(fa);var da=this.data[Z][fa];return this.data[Z].splice(fa,1),da.timeout&&clearTimeout(da.timeout),0===this.data[Z].length&&delete this.data[Z],this.onRemove(da.value),this.order.splice(this.order.indexOf(Z),1),this};Pc.prototype.setMaxSize=function(Z){for(this.max=Z;this.order.length>this.max;)(Z=this._getAndRemoveByKey(this.order[0]))&&this.onRemove(Z);return this};Pc.prototype.filter=function(Z){var fa=
[];for(Za in this.data)for(var da=0,ta=this.data[Za];da<ta.length;da+=1){var Ga=ta[da];Z(Ga.value)||fa.push(Ga)}for(Z=0;Z<fa.length;Z+=1){var Za=fa[Z];this.remove(Za.value.tileID,Za)}};var Qc=function(Z,fa,da){this.context=Z;var ta=Z.gl;this.buffer=ta.createBuffer();this.dynamicDraw=!!da;this.context.unbindVAO();Z.bindElementBuffer.set(this.buffer);ta.bufferData(ta.ELEMENT_ARRAY_BUFFER,fa.arrayBuffer,this.dynamicDraw?ta.DYNAMIC_DRAW:ta.STATIC_DRAW);this.dynamicDraw||delete fa.arrayBuffer};Qc.prototype.bind=
function(){this.context.bindElementBuffer.set(this.buffer)};Qc.prototype.updateData=function(Z){var fa=this.context.gl;this.context.unbindVAO();this.bind();fa.bufferSubData(fa.ELEMENT_ARRAY_BUFFER,0,Z.arrayBuffer)};Qc.prototype.destroy=function(){this.buffer&&(this.context.gl.deleteBuffer(this.buffer),delete this.buffer)};var cd={Int8:"BYTE",Uint8:"UNSIGNED_BYTE",Int16:"SHORT",Uint16:"UNSIGNED_SHORT",Int32:"INT",Uint32:"UNSIGNED_INT",Float32:"FLOAT"},gd=function(Z,fa,da,ta){this.length=fa.length;
this.attributes=da;this.itemSize=fa.bytesPerElement;this.dynamicDraw=ta;this.context=Z;da=Z.gl;this.buffer=da.createBuffer();Z.bindVertexBuffer.set(this.buffer);da.bufferData(da.ARRAY_BUFFER,fa.arrayBuffer,this.dynamicDraw?da.DYNAMIC_DRAW:da.STATIC_DRAW);this.dynamicDraw||delete fa.arrayBuffer};gd.prototype.bind=function(){this.context.bindVertexBuffer.set(this.buffer)};gd.prototype.updateData=function(Z){var fa=this.context.gl;this.bind();fa.bufferSubData(fa.ARRAY_BUFFER,0,Z.arrayBuffer)};gd.prototype.enableAttributes=
function(Z,fa){for(var da=0;da<this.attributes.length;da++){var ta=fa.attributes[this.attributes[da].name];void 0!==ta&&Z.enableVertexAttribArray(ta)}};gd.prototype.setVertexAttribPointers=function(Z,fa,da){for(var ta=0;ta<this.attributes.length;ta++){var Ga=this.attributes[ta],Za=fa.attributes[Ga.name];void 0!==Za&&Z.vertexAttribPointer(Za,Ga.components,Z[cd[Ga.type]],!1,this.itemSize,Ga.offset+this.itemSize*(da||0))}};gd.prototype.destroy=function(){this.buffer&&(this.context.gl.deleteBuffer(this.buffer),
delete this.buffer)};var kd=function(Z){this.gl=Z.gl;this.current=this.default=this.getDefault();this.dirty=!1};kd.prototype.get=function(){return this.current};kd.prototype.set=function(Z){};kd.prototype.getDefault=function(){return this.default};kd.prototype.setDefault=function(){this.set(this.default)};var Cb=function(Z){function fa(){Z.apply(this,arguments)}return Z&&(fa.__proto__=Z),(fa.prototype=Object.create(Z&&Z.prototype)).constructor=fa,fa.prototype.getDefault=function(){return b.Color.transparent},
fa.prototype.set=function(da){var ta=this.current;(da.r!==ta.r||da.g!==ta.g||da.b!==ta.b||da.a!==ta.a||this.dirty)&&(this.gl.clearColor(da.r,da.g,da.b,da.a),this.current=da,this.dirty=!1)},fa}(kd),ic=function(Z){function fa(){Z.apply(this,arguments)}return Z&&(fa.__proto__=Z),(fa.prototype=Object.create(Z&&Z.prototype)).constructor=fa,fa.prototype.getDefault=function(){return 1},fa.prototype.set=function(da){(da!==this.current||this.dirty)&&(this.gl.clearDepth(da),this.current=da,this.dirty=!1)},
fa}(kd),sc=function(Z){function fa(){Z.apply(this,arguments)}return Z&&(fa.__proto__=Z),(fa.prototype=Object.create(Z&&Z.prototype)).constructor=fa,fa.prototype.getDefault=function(){return 0},fa.prototype.set=function(da){(da!==this.current||this.dirty)&&(this.gl.clearStencil(da),this.current=da,this.dirty=!1)},fa}(kd),wb=function(Z){function fa(){Z.apply(this,arguments)}return Z&&(fa.__proto__=Z),(fa.prototype=Object.create(Z&&Z.prototype)).constructor=fa,fa.prototype.getDefault=function(){return[!0,
!0,!0,!0]},fa.prototype.set=function(da){var ta=this.current;(da[0]!==ta[0]||da[1]!==ta[1]||da[2]!==ta[2]||da[3]!==ta[3]||this.dirty)&&(this.gl.colorMask(da[0],da[1],da[2],da[3]),this.current=da,this.dirty=!1)},fa}(kd),zb=function(Z){function fa(){Z.apply(this,arguments)}return Z&&(fa.__proto__=Z),(fa.prototype=Object.create(Z&&Z.prototype)).constructor=fa,fa.prototype.getDefault=function(){return!0},fa.prototype.set=function(da){(da!==this.current||this.dirty)&&(this.gl.depthMask(da),this.current=
da,this.dirty=!1)},fa}(kd),Tb=function(Z){function fa(){Z.apply(this,arguments)}return Z&&(fa.__proto__=Z),(fa.prototype=Object.create(Z&&Z.prototype)).constructor=fa,fa.prototype.getDefault=function(){return 255},fa.prototype.set=function(da){(da!==this.current||this.dirty)&&(this.gl.stencilMask(da),this.current=da,this.dirty=!1)},fa}(kd),lb=function(Z){function fa(){Z.apply(this,arguments)}return Z&&(fa.__proto__=Z),(fa.prototype=Object.create(Z&&Z.prototype)).constructor=fa,fa.prototype.getDefault=
function(){return{func:this.gl.ALWAYS,ref:0,mask:255}},fa.prototype.set=function(da){var ta=this.current;(da.func!==ta.func||da.ref!==ta.ref||da.mask!==ta.mask||this.dirty)&&(this.gl.stencilFunc(da.func,da.ref,da.mask),this.current=da,this.dirty=!1)},fa}(kd),vb=function(Z){function fa(){Z.apply(this,arguments)}return Z&&(fa.__proto__=Z),(fa.prototype=Object.create(Z&&Z.prototype)).constructor=fa,fa.prototype.getDefault=function(){var da=this.gl;return[da.KEEP,da.KEEP,da.KEEP]},fa.prototype.set=function(da){var ta=
this.current;(da[0]!==ta[0]||da[1]!==ta[1]||da[2]!==ta[2]||this.dirty)&&(this.gl.stencilOp(da[0],da[1],da[2]),this.current=da,this.dirty=!1)},fa}(kd),Ub=function(Z){function fa(){Z.apply(this,arguments)}return Z&&(fa.__proto__=Z),(fa.prototype=Object.create(Z&&Z.prototype)).constructor=fa,fa.prototype.getDefault=function(){return!1},fa.prototype.set=function(da){if(da!==this.current||this.dirty){var ta=this.gl;da?ta.enable(ta.STENCIL_TEST):ta.disable(ta.STENCIL_TEST);this.current=da;this.dirty=!1}},
fa}(kd),Sb=function(Z){function fa(){Z.apply(this,arguments)}return Z&&(fa.__proto__=Z),(fa.prototype=Object.create(Z&&Z.prototype)).constructor=fa,fa.prototype.getDefault=function(){return[0,1]},fa.prototype.set=function(da){var ta=this.current;(da[0]!==ta[0]||da[1]!==ta[1]||this.dirty)&&(this.gl.depthRange(da[0],da[1]),this.current=da,this.dirty=!1)},fa}(kd),Ab=function(Z){function fa(){Z.apply(this,arguments)}return Z&&(fa.__proto__=Z),(fa.prototype=Object.create(Z&&Z.prototype)).constructor=fa,
fa.prototype.getDefault=function(){return!1},fa.prototype.set=function(da){if(da!==this.current||this.dirty){var ta=this.gl;da?ta.enable(ta.DEPTH_TEST):ta.disable(ta.DEPTH_TEST);this.current=da;this.dirty=!1}},fa}(kd),Eb=function(Z){function fa(){Z.apply(this,arguments)}return Z&&(fa.__proto__=Z),(fa.prototype=Object.create(Z&&Z.prototype)).constructor=fa,fa.prototype.getDefault=function(){return this.gl.LESS},fa.prototype.set=function(da){(da!==this.current||this.dirty)&&(this.gl.depthFunc(da),this.current=
da,this.dirty=!1)},fa}(kd),Fb=function(Z){function fa(){Z.apply(this,arguments)}return Z&&(fa.__proto__=Z),(fa.prototype=Object.create(Z&&Z.prototype)).constructor=fa,fa.prototype.getDefault=function(){return!1},fa.prototype.set=function(da){if(da!==this.current||this.dirty){var ta=this.gl;da?ta.enable(ta.BLEND):ta.disable(ta.BLEND);this.current=da;this.dirty=!1}},fa}(kd),xb=function(Z){function fa(){Z.apply(this,arguments)}return Z&&(fa.__proto__=Z),(fa.prototype=Object.create(Z&&Z.prototype)).constructor=
fa,fa.prototype.getDefault=function(){var da=this.gl;return[da.ONE,da.ZERO]},fa.prototype.set=function(da){var ta=this.current;(da[0]!==ta[0]||da[1]!==ta[1]||this.dirty)&&(this.gl.blendFunc(da[0],da[1]),this.current=da,this.dirty=!1)},fa}(kd),Jb=function(Z){function fa(){Z.apply(this,arguments)}return Z&&(fa.__proto__=Z),(fa.prototype=Object.create(Z&&Z.prototype)).constructor=fa,fa.prototype.getDefault=function(){return b.Color.transparent},fa.prototype.set=function(da){var ta=this.current;(da.r!==
ta.r||da.g!==ta.g||da.b!==ta.b||da.a!==ta.a||this.dirty)&&(this.gl.blendColor(da.r,da.g,da.b,da.a),this.current=da,this.dirty=!1)},fa}(kd),tb=function(Z){function fa(){Z.apply(this,arguments)}return Z&&(fa.__proto__=Z),(fa.prototype=Object.create(Z&&Z.prototype)).constructor=fa,fa.prototype.getDefault=function(){return this.gl.FUNC_ADD},fa.prototype.set=function(da){(da!==this.current||this.dirty)&&(this.gl.blendEquation(da),this.current=da,this.dirty=!1)},fa}(kd),Lb=function(Z){function fa(){Z.apply(this,
arguments)}return Z&&(fa.__proto__=Z),(fa.prototype=Object.create(Z&&Z.prototype)).constructor=fa,fa.prototype.getDefault=function(){return!1},fa.prototype.set=function(da){if(da!==this.current||this.dirty){var ta=this.gl;da?ta.enable(ta.CULL_FACE):ta.disable(ta.CULL_FACE);this.current=da;this.dirty=!1}},fa}(kd),Ib=function(Z){function fa(){Z.apply(this,arguments)}return Z&&(fa.__proto__=Z),(fa.prototype=Object.create(Z&&Z.prototype)).constructor=fa,fa.prototype.getDefault=function(){return this.gl.BACK},
fa.prototype.set=function(da){(da!==this.current||this.dirty)&&(this.gl.cullFace(da),this.current=da,this.dirty=!1)},fa}(kd),lc=function(Z){function fa(){Z.apply(this,arguments)}return Z&&(fa.__proto__=Z),(fa.prototype=Object.create(Z&&Z.prototype)).constructor=fa,fa.prototype.getDefault=function(){return this.gl.CCW},fa.prototype.set=function(da){(da!==this.current||this.dirty)&&(this.gl.frontFace(da),this.current=da,this.dirty=!1)},fa}(kd),$b=function(Z){function fa(){Z.apply(this,arguments)}return Z&&
(fa.__proto__=Z),(fa.prototype=Object.create(Z&&Z.prototype)).constructor=fa,fa.prototype.getDefault=function(){return null},fa.prototype.set=function(da){(da!==this.current||this.dirty)&&(this.gl.useProgram(da),this.current=da,this.dirty=!1)},fa}(kd),nc=function(Z){function fa(){Z.apply(this,arguments)}return Z&&(fa.__proto__=Z),(fa.prototype=Object.create(Z&&Z.prototype)).constructor=fa,fa.prototype.getDefault=function(){return this.gl.TEXTURE0},fa.prototype.set=function(da){(da!==this.current||
this.dirty)&&(this.gl.activeTexture(da),this.current=da,this.dirty=!1)},fa}(kd),xc=function(Z){function fa(){Z.apply(this,arguments)}return Z&&(fa.__proto__=Z),(fa.prototype=Object.create(Z&&Z.prototype)).constructor=fa,fa.prototype.getDefault=function(){var da=this.gl;return[0,0,da.drawingBufferWidth,da.drawingBufferHeight]},fa.prototype.set=function(da){var ta=this.current;(da[0]!==ta[0]||da[1]!==ta[1]||da[2]!==ta[2]||da[3]!==ta[3]||this.dirty)&&(this.gl.viewport(da[0],da[1],da[2],da[3]),this.current=
da,this.dirty=!1)},fa}(kd),Bc=function(Z){function fa(){Z.apply(this,arguments)}return Z&&(fa.__proto__=Z),(fa.prototype=Object.create(Z&&Z.prototype)).constructor=fa,fa.prototype.getDefault=function(){return null},fa.prototype.set=function(da){if(da!==this.current||this.dirty){var ta=this.gl;ta.bindFramebuffer(ta.FRAMEBUFFER,da);this.current=da;this.dirty=!1}},fa}(kd),Rc=function(Z){function fa(){Z.apply(this,arguments)}return Z&&(fa.__proto__=Z),(fa.prototype=Object.create(Z&&Z.prototype)).constructor=
fa,fa.prototype.getDefault=function(){return null},fa.prototype.set=function(da){if(da!==this.current||this.dirty){var ta=this.gl;ta.bindRenderbuffer(ta.RENDERBUFFER,da);this.current=da;this.dirty=!1}},fa}(kd),pd=function(Z){function fa(){Z.apply(this,arguments)}return Z&&(fa.__proto__=Z),(fa.prototype=Object.create(Z&&Z.prototype)).constructor=fa,fa.prototype.getDefault=function(){return null},fa.prototype.set=function(da){if(da!==this.current||this.dirty){var ta=this.gl;ta.bindTexture(ta.TEXTURE_2D,
da);this.current=da;this.dirty=!1}},fa}(kd),Vc=function(Z){function fa(){Z.apply(this,arguments)}return Z&&(fa.__proto__=Z),(fa.prototype=Object.create(Z&&Z.prototype)).constructor=fa,fa.prototype.getDefault=function(){return null},fa.prototype.set=function(da){if(da!==this.current||this.dirty){var ta=this.gl;ta.bindBuffer(ta.ARRAY_BUFFER,da);this.current=da;this.dirty=!1}},fa}(kd),xd=function(Z){function fa(){Z.apply(this,arguments)}return Z&&(fa.__proto__=Z),(fa.prototype=Object.create(Z&&Z.prototype)).constructor=
fa,fa.prototype.getDefault=function(){return null},fa.prototype.set=function(da){var ta=this.gl;ta.bindBuffer(ta.ELEMENT_ARRAY_BUFFER,da);this.current=da;this.dirty=!1},fa}(kd),sd=function(Z){function fa(da){Z.call(this,da);this.vao=da.extVertexArrayObject}return Z&&(fa.__proto__=Z),(fa.prototype=Object.create(Z&&Z.prototype)).constructor=fa,fa.prototype.getDefault=function(){return null},fa.prototype.set=function(da){this.vao&&(da!==this.current||this.dirty)&&(this.vao.bindVertexArrayOES(da),this.current=
da,this.dirty=!1)},fa}(kd),Yc=function(Z){function fa(){Z.apply(this,arguments)}return Z&&(fa.__proto__=Z),(fa.prototype=Object.create(Z&&Z.prototype)).constructor=fa,fa.prototype.getDefault=function(){return 4},fa.prototype.set=function(da){if(da!==this.current||this.dirty){var ta=this.gl;ta.pixelStorei(ta.UNPACK_ALIGNMENT,da);this.current=da;this.dirty=!1}},fa}(kd),Hc=function(Z){function fa(){Z.apply(this,arguments)}return Z&&(fa.__proto__=Z),(fa.prototype=Object.create(Z&&Z.prototype)).constructor=
fa,fa.prototype.getDefault=function(){return!1},fa.prototype.set=function(da){if(da!==this.current||this.dirty){var ta=this.gl;ta.pixelStorei(ta.UNPACK_PREMULTIPLY_ALPHA_WEBGL,da);this.current=da;this.dirty=!1}},fa}(kd),Cd=function(Z){function fa(){Z.apply(this,arguments)}return Z&&(fa.__proto__=Z),(fa.prototype=Object.create(Z&&Z.prototype)).constructor=fa,fa.prototype.getDefault=function(){return!1},fa.prototype.set=function(da){if(da!==this.current||this.dirty){var ta=this.gl;ta.pixelStorei(ta.UNPACK_FLIP_Y_WEBGL,
da);this.current=da;this.dirty=!1}},fa}(kd),Kd=function(Z){function fa(da,ta){Z.call(this,da);this.context=da;this.parent=ta}return Z&&(fa.__proto__=Z),(fa.prototype=Object.create(Z&&Z.prototype)).constructor=fa,fa.prototype.getDefault=function(){return null},fa}(kd),Ld=function(Z){function fa(){Z.apply(this,arguments)}return Z&&(fa.__proto__=Z),(fa.prototype=Object.create(Z&&Z.prototype)).constructor=fa,fa.prototype.setDirty=function(){this.dirty=!0},fa.prototype.set=function(da){if(da!==this.current||
this.dirty){this.context.bindFramebuffer.set(this.parent);var ta=this.gl;ta.framebufferTexture2D(ta.FRAMEBUFFER,ta.COLOR_ATTACHMENT0,ta.TEXTURE_2D,da,0);this.current=da;this.dirty=!1}},fa}(Kd),kb=function(Z){function fa(){Z.apply(this,arguments)}return Z&&(fa.__proto__=Z),(fa.prototype=Object.create(Z&&Z.prototype)).constructor=fa,fa.prototype.set=function(da){if(da!==this.current||this.dirty){this.context.bindFramebuffer.set(this.parent);var ta=this.gl;ta.framebufferRenderbuffer(ta.FRAMEBUFFER,ta.DEPTH_ATTACHMENT,
ta.RENDERBUFFER,da);this.current=da;this.dirty=!1}},fa}(Kd),De=function(Z,fa,da,ta){this.context=Z;this.width=fa;this.height=da;fa=this.framebuffer=Z.gl.createFramebuffer();this.colorAttachment=new Ld(Z,fa);ta&&(this.depthAttachment=new kb(Z,fa))};De.prototype.destroy=function(){var Z=this.context.gl,fa=this.colorAttachment.get();(fa&&Z.deleteTexture(fa),this.depthAttachment)&&(fa=this.depthAttachment.get())&&Z.deleteRenderbuffer(fa);Z.deleteFramebuffer(this.framebuffer)};var Hd=function(Z,fa,da){this.func=
Z;this.mask=fa;this.range=da};Hd.ReadOnly=!1;Hd.ReadWrite=!0;Hd.disabled=new Hd(519,Hd.ReadOnly,[0,1]);var oe=function(Z,fa,da,ta,Ga,Za){this.test=Z;this.ref=fa;this.mask=da;this.fail=ta;this.depthFail=Ga;this.pass=Za};oe.disabled=new oe({func:519,mask:0},0,0,7680,7680,7680);var Ge=function(Z,fa,da){this.blendFunction=Z;this.blendColor=fa;this.mask=da};Ge.disabled=new Ge(Ge.Replace=[1,0],b.Color.transparent,[!1,!1,!1,!1]);Ge.unblended=new Ge(Ge.Replace,b.Color.transparent,[!0,!0,!0,!0]);Ge.alphaBlended=
new Ge([1,771],b.Color.transparent,[!0,!0,!0,!0]);var Fd=function(Z,fa,da){this.enable=Z;this.mode=fa;this.frontFace=da};Fd.disabled=new Fd(!1,1029,2305);Fd.backCCW=new Fd(!0,1029,2305);var ge=function(Z){this.gl=Z;this.extVertexArrayObject=this.gl.getExtension("OES_vertex_array_object");this.clearColor=new Cb(this);this.clearDepth=new ic(this);this.clearStencil=new sc(this);this.colorMask=new wb(this);this.depthMask=new zb(this);this.stencilMask=new Tb(this);this.stencilFunc=new lb(this);this.stencilOp=
new vb(this);this.stencilTest=new Ub(this);this.depthRange=new Sb(this);this.depthTest=new Ab(this);this.depthFunc=new Eb(this);this.blend=new Fb(this);this.blendFunc=new xb(this);this.blendColor=new Jb(this);this.blendEquation=new tb(this);this.cullFace=new Lb(this);this.cullFaceSide=new Ib(this);this.frontFace=new lc(this);this.program=new $b(this);this.activeTexture=new nc(this);this.viewport=new xc(this);this.bindFramebuffer=new Bc(this);this.bindRenderbuffer=new Rc(this);this.bindTexture=new pd(this);
this.bindVertexBuffer=new Vc(this);this.bindElementBuffer=new xd(this);this.bindVertexArrayOES=this.extVertexArrayObject&&new sd(this);this.pixelStoreUnpack=new Yc(this);this.pixelStoreUnpackPremultiplyAlpha=new Hc(this);this.pixelStoreUnpackFlipY=new Cd(this);(this.extTextureFilterAnisotropic=Z.getExtension("EXT_texture_filter_anisotropic")||Z.getExtension("MOZ_EXT_texture_filter_anisotropic")||Z.getExtension("WEBKIT_EXT_texture_filter_anisotropic"))&&(this.extTextureFilterAnisotropicMax=Z.getParameter(this.extTextureFilterAnisotropic.MAX_TEXTURE_MAX_ANISOTROPY_EXT));
(this.extTextureHalfFloat=Z.getExtension("OES_texture_half_float"))&&(Z.getExtension("OES_texture_half_float_linear"),this.extRenderToTextureHalfFloat=Z.getExtension("EXT_color_buffer_half_float"));this.extTimerQuery=Z.getExtension("EXT_disjoint_timer_query")};ge.prototype.setDefault=function(){this.unbindVAO();this.clearColor.setDefault();this.clearDepth.setDefault();this.clearStencil.setDefault();this.colorMask.setDefault();this.depthMask.setDefault();this.stencilMask.setDefault();this.stencilFunc.setDefault();
this.stencilOp.setDefault();this.stencilTest.setDefault();this.depthRange.setDefault();this.depthTest.setDefault();this.depthFunc.setDefault();this.blend.setDefault();this.blendFunc.setDefault();this.blendColor.setDefault();this.blendEquation.setDefault();this.cullFace.setDefault();this.cullFaceSide.setDefault();this.frontFace.setDefault();this.program.setDefault();this.activeTexture.setDefault();this.bindFramebuffer.setDefault();this.pixelStoreUnpack.setDefault();this.pixelStoreUnpackPremultiplyAlpha.setDefault();
this.pixelStoreUnpackFlipY.setDefault()};ge.prototype.setDirty=function(){this.clearColor.dirty=!0;this.clearDepth.dirty=!0;this.clearStencil.dirty=!0;this.colorMask.dirty=!0;this.depthMask.dirty=!0;this.stencilMask.dirty=!0;this.stencilFunc.dirty=!0;this.stencilOp.dirty=!0;this.stencilTest.dirty=!0;this.depthRange.dirty=!0;this.depthTest.dirty=!0;this.depthFunc.dirty=!0;this.blend.dirty=!0;this.blendFunc.dirty=!0;this.blendColor.dirty=!0;this.blendEquation.dirty=!0;this.cullFace.dirty=!0;this.cullFaceSide.dirty=
!0;this.frontFace.dirty=!0;this.program.dirty=!0;this.activeTexture.dirty=!0;this.viewport.dirty=!0;this.bindFramebuffer.dirty=!0;this.bindRenderbuffer.dirty=!0;this.bindTexture.dirty=!0;this.bindVertexBuffer.dirty=!0;this.bindElementBuffer.dirty=!0;this.extVertexArrayObject&&(this.bindVertexArrayOES.dirty=!0);this.pixelStoreUnpack.dirty=!0;this.pixelStoreUnpackPremultiplyAlpha.dirty=!0;this.pixelStoreUnpackFlipY.dirty=!0};ge.prototype.createIndexBuffer=function(Z,fa){return new Qc(this,Z,fa)};ge.prototype.createVertexBuffer=
function(Z,fa,da){return new gd(this,Z,fa,da)};ge.prototype.createRenderbuffer=function(Z,fa,da){var ta=this.gl,Ga=ta.createRenderbuffer();return this.bindRenderbuffer.set(Ga),ta.renderbufferStorage(ta.RENDERBUFFER,Z,fa,da),this.bindRenderbuffer.set(null),Ga};ge.prototype.createFramebuffer=function(Z,fa,da){return new De(this,Z,fa,da)};ge.prototype.clear=function(Z){var fa=Z.color;Z=Z.depth;var da=this.gl,ta=0;fa&&(ta|=da.COLOR_BUFFER_BIT,this.clearColor.set(fa),this.colorMask.set([!0,!0,!0,!0]));
void 0!==Z&&(ta|=da.DEPTH_BUFFER_BIT,this.depthRange.set([0,1]),this.clearDepth.set(Z),this.depthMask.set(!0));da.clear(ta)};ge.prototype.setCullFace=function(Z){!1===Z.enable?this.cullFace.set(!1):(this.cullFace.set(!0),this.cullFaceSide.set(Z.mode),this.frontFace.set(Z.frontFace))};ge.prototype.setDepthMode=function(Z){Z.func!==this.gl.ALWAYS||Z.mask?(this.depthTest.set(!0),this.depthFunc.set(Z.func),this.depthMask.set(Z.mask),this.depthRange.set(Z.range)):this.depthTest.set(!1)};ge.prototype.setStencilMode=
function(Z){Z.test.func!==this.gl.ALWAYS||Z.mask?(this.stencilTest.set(!0),this.stencilMask.set(Z.mask),this.stencilOp.set([Z.fail,Z.depthFail,Z.pass]),this.stencilFunc.set({func:Z.test.func,ref:Z.ref,mask:Z.test.mask})):this.stencilTest.set(!1)};ge.prototype.setColorMode=function(Z){b.deepEqual(Z.blendFunction,Ge.Replace)?this.blend.set(!1):(this.blend.set(!0),this.blendFunc.set(Z.blendFunction),this.blendColor.set(Z.blendColor));this.colorMask.set(Z.mask)};ge.prototype.unbindVAO=function(){this.extVertexArrayObject&&
this.bindVertexArrayOES.set(null)};var ff=function(Z){function fa(da,ta,Ga){var Za=this;Z.call(this);this.id=da;this.dispatcher=Ga;this.on("data",function(hb){"source"===hb.dataType&&"metadata"===hb.sourceDataType&&(Za._sourceLoaded=!0);Za._sourceLoaded&&!Za._paused&&"source"===hb.dataType&&"content"===hb.sourceDataType&&(Za.reload(),Za.transform&&Za.update(Za.transform))});this.on("error",function(){Za._sourceErrored=!0});this._source=function(hb,ub,Rb,Yb){ub=new qc[ub.type](hb,ub,Rb,Yb);if(ub.id!==
hb)throw Error("Expected Source id to be "+hb+" instead of "+ub.id);return b.bindAll(["load","abort","unload","serialize","prepare"],ub),ub}(da,ta,Ga,this);this._tiles={};this._cache=new Pc(0,this._unloadTile.bind(this));this._timers={};this._cacheTimers={};this._maxTileCacheSize=null;this._loadedParentTiles={};this._coveredTiles={};this._state=new b.SourceFeatureState}return Z&&(fa.__proto__=Z),(fa.prototype=Object.create(Z&&Z.prototype)).constructor=fa,fa.prototype.onAdd=function(da){this._maxTileCacheSize=
(this.map=da)?da._maxTileCacheSize:null;this._source&&this._source.onAdd&&this._source.onAdd(da)},fa.prototype.onRemove=function(da){this._source&&this._source.onRemove&&this._source.onRemove(da)},fa.prototype.loaded=function(){if(this._sourceErrored)return!0;if(!this._sourceLoaded||!this._source.loaded())return!1;for(var da in this._tiles){var ta=this._tiles[da];if("loaded"!==ta.state&&"errored"!==ta.state)return!1}return!0},fa.prototype.getSource=function(){return this._source},fa.prototype.pause=
function(){this._paused=!0},fa.prototype.resume=function(){if(this._paused){var da=this._shouldReloadOnResume;this._shouldReloadOnResume=this._paused=!1;da&&this.reload();this.transform&&this.update(this.transform)}},fa.prototype._loadTile=function(da,ta){return this._source.loadTile(da,ta)},fa.prototype._unloadTile=function(da){if(this._source.unloadTile)return this._source.unloadTile(da,function(){})},fa.prototype._abortTile=function(da){if(this._source.abortTile)return this._source.abortTile(da,
function(){})},fa.prototype.serialize=function(){return this._source.serialize()},fa.prototype.prepare=function(da){for(var ta in this._source.prepare&&this._source.prepare(),this._state.coalesceChanges(this._tiles,this.map?this.map.painter:null),this._tiles){var Ga=this._tiles[ta];Ga.upload(da);Ga.prepare(this.map.style.imageManager)}},fa.prototype.getIds=function(){return b.values(this._tiles).map(function(da){return da.tileID}).sort(r).map(function(da){return da.key})},fa.prototype.getRenderableIds=
function(da){var ta=this,Ga=[],Za;for(Za in this._tiles)this._isIdRenderable(Za,da)&&Ga.push(this._tiles[Za]);return da?Ga.sort(function(hb,ub){hb=hb.tileID;ub=ub.tileID;var Rb=(new b.Point(hb.canonical.x,hb.canonical.y))._rotate(ta.transform.angle),Yb=(new b.Point(ub.canonical.x,ub.canonical.y))._rotate(ta.transform.angle);return hb.overscaledZ-ub.overscaledZ||Yb.y-Rb.y||Yb.x-Rb.x}).map(function(hb){return hb.tileID.key}):Ga.map(function(hb){return hb.tileID}).sort(r).map(function(hb){return hb.key})},
fa.prototype.hasRenderableParent=function(da){da=this.findLoadedParent(da,0);return!!da&&this._isIdRenderable(da.tileID.key)},fa.prototype._isIdRenderable=function(da,ta){return this._tiles[da]&&this._tiles[da].hasData()&&!this._coveredTiles[da]&&(ta||!this._tiles[da].holdingForFade())},fa.prototype.reload=function(){if(this._paused)this._shouldReloadOnResume=!0;else for(var da in this._cache.reset(),this._tiles)"errored"!==this._tiles[da].state&&this._reloadTile(da,"reloading")},fa.prototype._reloadTile=
function(da,ta){var Ga=this._tiles[da];Ga&&("loading"!==Ga.state&&(Ga.state=ta),this._loadTile(Ga,this._tileLoaded.bind(this,Ga,da,ta)))},fa.prototype._tileLoaded=function(da,ta,Ga,Za){if(Za)return da.state="errored",void(404!==Za.status?this._source.fire(new b.ErrorEvent(Za,{tile:da})):this.update(this.transform));da.timeAdded=b.browser.now();"expired"===Ga&&(da.refreshedUponExpiration=!0);this._setTileReloadTimer(ta,da);"raster-dem"===this.getSource().type&&da.dem&&this._backfillDEM(da);this._state.initializeTileState(da,
this.map?this.map.painter:null);this._source.fire(new b.Event("data",{dataType:"source",tile:da,coord:da.tileID}))},fa.prototype._backfillDEM=function(da){function ta(ub,Rb){ub.needsHillshadePrepare=!0;var Yb=Rb.tileID.canonical.x-ub.tileID.canonical.x,dc=Rb.tileID.canonical.y-ub.tileID.canonical.y,Ac=Math.pow(2,ub.tileID.canonical.z),Ec=Rb.tileID.key;0===Yb&&0===dc||1<Math.abs(dc)||(1<Math.abs(Yb)&&(1===Math.abs(Yb+Ac)?Yb+=Ac:1===Math.abs(Yb-Ac)&&(Yb-=Ac)),Rb.dem&&ub.dem&&(ub.dem.backfillBorder(Rb.dem,
Yb,dc),ub.neighboringTiles&&ub.neighboringTiles[Ec]&&(ub.neighboringTiles[Ec].backfilled=!0)))}for(var Ga=this.getRenderableIds(),Za=0;Za<Ga.length;Za++){var hb=Ga[Za];da.neighboringTiles&&da.neighboringTiles[hb]&&(hb=this.getTileByID(hb),ta(da,hb),ta(hb,da))}},fa.prototype.getTile=function(da){return this.getTileByID(da.key)},fa.prototype.getTileByID=function(da){return this._tiles[da]},fa.prototype._retainLoadedChildren=function(da,ta,Ga,Za){for(var hb in this._tiles){var ub=this._tiles[hb];if(!(Za[hb]||
!ub.hasData()||ub.tileID.overscaledZ<=ta||ub.tileID.overscaledZ>Ga)){for(var Rb=ub.tileID;ub&&ub.tileID.overscaledZ>ta+1;){var Yb=ub.tileID.scaledTo(ub.tileID.overscaledZ-1);(ub=this._tiles[Yb.key])&&ub.hasData()&&(Rb=Yb)}for(ub=Rb;ub.overscaledZ>ta;)if(da[(ub=ub.scaledTo(ub.overscaledZ-1)).key]){Za[Rb.key]=Rb;break}}}},fa.prototype.findLoadedParent=function(da,ta){if(da.key in this._loadedParentTiles)return(da=this._loadedParentTiles[da.key])&&da.tileID.overscaledZ>=ta?da:null;for(var Ga=da.overscaledZ-
1;Ga>=ta;Ga--){var Za=da.scaledTo(Ga);if(Za=this._getLoadedTile(Za))return Za}},fa.prototype._getLoadedTile=function(da){var ta=this._tiles[da.key];return ta&&ta.hasData()?ta:this._cache.getByKey(da.wrapped().key)},fa.prototype.updateCacheSize=function(da){da=Math.floor((Math.ceil(da.width/this._source.tileSize)+1)*(Math.ceil(da.height/this._source.tileSize)+1)*5);this._cache.setMaxSize("number"==typeof this._maxTileCacheSize?Math.min(this._maxTileCacheSize,da):da)},fa.prototype.handleWrapJump=function(da){var ta=
Math.round((da-(void 0===this._prevLng?da:this._prevLng))/360);if(this._prevLng=da,ta){da={};for(var Ga in this._tiles){var Za=this._tiles[Ga];Za.tileID=Za.tileID.unwrapTo(Za.tileID.wrap+ta);da[Za.tileID.key]=Za}for(var hb in this._tiles=da,this._timers)clearTimeout(this._timers[hb]),delete this._timers[hb];for(var ub in this._tiles)this._setTileReloadTimer(ub,this._tiles[ub])}},fa.prototype.update=function(da){var ta=this;if(this.transform=da,this._sourceLoaded&&!this._paused){var Ga;this.updateCacheSize(da);
this.handleWrapJump(this.transform.center.lng);this._coveredTiles={};this.used?this._source.tileID?Ga=da.getVisibleUnwrappedCoordinates(this._source.tileID).map(function(Cc){return new b.OverscaledTileID(Cc.canonical.z,Cc.wrap,Cc.canonical.z,Cc.canonical.x,Cc.canonical.y)}):(Ga=da.coveringTiles({tileSize:this._source.tileSize,minzoom:this._source.minzoom,maxzoom:this._source.maxzoom,roundZoom:this._source.roundZoom,reparseOverscaled:this._source.reparseOverscaled}),this._source.hasTile&&(Ga=Ga.filter(function(Cc){return ta._source.hasTile(Cc)}))):
Ga=[];da=da.coveringZoomLevel(this._source);var Za=Math.max(da-fa.maxOverzooming,this._source.minzoom),hb=Math.max(da+fa.maxUnderzooming,this._source.minzoom);Ga=this._updateRetainedTiles(Ga,da);if(t(this._source.type)){for(var ub={},Rb={},Yb=0,dc=Object.keys(Ga);Yb<dc.length;Yb+=1){var Ac=dc[Yb],Ec=Ga[Ac],uc=this._tiles[Ac];!uc||uc.fadeEndTime&&uc.fadeEndTime<=b.browser.now()||((uc=this.findLoadedParent(Ec,Za))&&(this._addTile(uc.tileID),ub[uc.tileID.key]=uc.tileID),Rb[Ac]=Ec)}for(var Xb in this._retainLoadedChildren(Rb,
da,hb,Ga),ub)Ga[Xb]||(this._coveredTiles[Xb]=!0,Ga[Xb]=ub[Xb])}for(var fc in Ga)this._tiles[fc].clearFadeHold();Xb=0;for(fc=b.keysDifference(this._tiles,Ga);Xb<fc.length;Xb+=1)da=fc[Xb],Za=this._tiles[da],Za.hasSymbolBuckets&&!Za.holdingForFade()?Za.setHoldDuration(this.map._fadeDuration):Za.hasSymbolBuckets&&!Za.symbolFadeFinished()||this._removeTile(da);this._updateLoadedParentTileCache()}},fa.prototype.releaseSymbolFadeTiles=function(){for(var da in this._tiles)this._tiles[da].holdingForFade()&&
this._removeTile(da)},fa.prototype._updateRetainedTiles=function(da,ta){for(var Ga={},Za={},hb=Math.max(ta-fa.maxOverzooming,this._source.minzoom),ub=Math.max(ta+fa.maxUnderzooming,this._source.minzoom),Rb={},Yb=0;Yb<da.length;Yb+=1){var dc=da[Yb],Ac=this._addTile(dc);Ga[dc.key]=dc;Ac.hasData()||ta<this._source.maxzoom&&(Rb[dc.key]=dc)}this._retainLoadedChildren(Rb,ta,ub,Ga);for(ub=0;ub<da.length;ub+=1)if(Rb=da[ub],Yb=this._tiles[Rb.key],!Yb.hasData()){if(ta+1>this._source.maxzoom){if(dc=Rb.children(this._source.maxzoom)[0],
(Ac=this.getTile(dc))&&Ac.hasData()){Ga[dc.key]=dc;continue}}else if(dc=Rb.children(this._source.maxzoom),Ga[dc[0].key]&&Ga[dc[1].key]&&Ga[dc[2].key]&&Ga[dc[3].key])continue;dc=Yb.wasRequested();for(Ac=Rb.overscaledZ-1;Ac>=hb;--Ac){var Ec=Rb.scaledTo(Ac);if(Za[Ec.key])break;if(Za[Ec.key]=!0,!(Yb=this.getTile(Ec))&&dc&&(Yb=this._addTile(Ec)),Yb&&(Ga[Ec.key]=Ec,dc=Yb.wasRequested(),Yb.hasData()))break}}return Ga},fa.prototype._updateLoadedParentTileCache=function(){for(var da in this._loadedParentTiles=
{},this._tiles){for(var ta=[],Ga=void 0,Za=this._tiles[da].tileID;0<Za.overscaledZ;){if(Za.key in this._loadedParentTiles){Ga=this._loadedParentTiles[Za.key];break}ta.push(Za.key);Za=Za.scaledTo(Za.overscaledZ-1);if(Ga=this._getLoadedTile(Za))break}for(Za=0;Za<ta.length;Za+=1)this._loadedParentTiles[ta[Za]]=Ga}},fa.prototype._addTile=function(da){var ta=this._tiles[da.key];if(ta)return ta;(ta=this._cache.getAndRemove(da))&&(this._setTileReloadTimer(da.key,ta),ta.tileID=da,this._state.initializeTileState(ta,
this.map?this.map.painter:null),this._cacheTimers[da.key]&&(clearTimeout(this._cacheTimers[da.key]),delete this._cacheTimers[da.key],this._setTileReloadTimer(da.key,ta)));var Ga=!!ta;return Ga||(ta=new b.Tile(da,this._source.tileSize*da.overscaleFactor()),this._loadTile(ta,this._tileLoaded.bind(this,ta,da.key,ta.state))),ta?(ta.uses++,this._tiles[da.key]=ta,Ga||this._source.fire(new b.Event("dataloading",{tile:ta,coord:ta.tileID,dataType:"source"})),ta):null},fa.prototype._setTileReloadTimer=function(da,
ta){var Ga=this;da in this._timers&&(clearTimeout(this._timers[da]),delete this._timers[da]);(ta=ta.getExpiryTimeout())&&(this._timers[da]=setTimeout(function(){Ga._reloadTile(da,"expired");delete Ga._timers[da]},ta))},fa.prototype._removeTile=function(da){var ta=this._tiles[da];ta&&(ta.uses--,delete this._tiles[da],this._timers[da]&&(clearTimeout(this._timers[da]),delete this._timers[da]),0<ta.uses||(ta.hasData()&&"reloading"!==ta.state?this._cache.add(ta.tileID,ta,ta.getExpiryTimeout()):(ta.aborted=
!0,this._abortTile(ta),this._unloadTile(ta))))},fa.prototype.clearTiles=function(){for(var da in this._shouldReloadOnResume=!1,this._paused=!1,this._tiles)this._removeTile(da);this._cache.reset()},fa.prototype.tilesIn=function(da,ta,Ga){var Za=this,hb=[],ub=this.transform;if(!ub)return hb;Ga=Ga?ub.getCameraQueryGeometry(da):da;var Rb=da.map(function(fc){return ub.pointCoordinate(fc)}),Yb=Ga.map(function(fc){return ub.pointCoordinate(fc)}),dc=this.getIds(),Ac=1/0,Ec=1/0,uc=-1/0,Xb=-1/0;for(da=0;da<
Yb.length;da+=1)Ga=Yb[da],Ac=Math.min(Ac,Ga.x),Ec=Math.min(Ec,Ga.y),uc=Math.max(uc,Ga.x),Xb=Math.max(Xb,Ga.y);da=function(fc){fc=Za._tiles[dc[fc]];if(!fc.holdingForFade()){var Cc=fc.tileID,bd=Math.pow(2,ub.zoom-fc.tileID.overscaledZ),nd=ta*fc.queryPadding*b.EXTENT/fc.tileSize/bd,Nc=[Cc.getTilePoint(new b.MercatorCoordinate(Ac,Ec)),Cc.getTilePoint(new b.MercatorCoordinate(uc,Xb))];Nc[0].x-nd<b.EXTENT&&Nc[0].y-nd<b.EXTENT&&0<=Nc[1].x+nd&&0<=Nc[1].y+nd&&(nd=Rb.map(function(vd){return Cc.getTilePoint(vd)}),
Nc=Yb.map(function(vd){return Cc.getTilePoint(vd)}),hb.push({tile:fc,tileID:Cc,queryGeometry:nd,cameraQueryGeometry:Nc,scale:bd}))}};for(Ga=0;Ga<dc.length;Ga++)da(Ga);return hb},fa.prototype.getVisibleCoordinates=function(da){var ta=this;da=this.getRenderableIds(da).map(function(hb){return ta._tiles[hb].tileID});for(var Ga=0;Ga<da.length;Ga+=1){var Za=da[Ga];Za.posMatrix=this.transform.calculatePosMatrix(Za.toUnwrapped())}return da},fa.prototype.hasTransition=function(){if(this._source.hasTransition())return!0;
if(t(this._source.type))for(var da in this._tiles){var ta=this._tiles[da];if(void 0!==ta.fadeEndTime&&ta.fadeEndTime>=b.browser.now())return!0}return!1},fa.prototype.setFeatureState=function(da,ta,Ga){this._state.updateState(da||"_geojsonTileLayer",ta,Ga)},fa.prototype.removeFeatureState=function(da,ta,Ga){this._state.removeFeatureState(da||"_geojsonTileLayer",ta,Ga)},fa.prototype.getFeatureState=function(da,ta){return this._state.getState(da||"_geojsonTileLayer",ta)},fa.prototype.setDependencies=
function(da,ta,Ga){(da=this._tiles[da])&&da.setDependencies(ta,Ga)},fa.prototype.reloadTilesForDependencies=function(da,ta){for(var Ga in this._tiles)this._tiles[Ga].hasDependency(da,ta)&&this._reloadTile(Ga,"reloading");this._cache.filter(function(Za){return!Za.hasDependency(da,ta)})},fa}(b.Evented);ff.maxOverzooming=10;ff.maxUnderzooming=3;var Vd=function(){this.active={}};Vd.prototype.acquire=function(Z){if(!this.workers)for(this.workers=[];this.workers.length<Vd.workerCount;)this.workers.push(new w);
return this.active[Z]=!0,this.workers.slice()};Vd.prototype.release=function(Z){delete this.active[Z];0===this.numActive()&&(this.workers.forEach(function(fa){fa.terminate()}),this.workers=null)};Vd.prototype.isPreloaded=function(){return!!this.active.mapboxgl_preloaded_worker_pool};Vd.prototype.numActive=function(){return Object.keys(this.active).length};var Pd;Vd.workerCount=Math.max(Math.min(Math.floor(b.browser.hardwareConcurrency/2),6),1);var Ed={setStyle:"setStyle",addLayer:"addLayer",removeLayer:"removeLayer",
setPaintProperty:"setPaintProperty",setLayoutProperty:"setLayoutProperty",setFilter:"setFilter",addSource:"addSource",removeSource:"removeSource",setGeoJSONSourceData:"setGeoJSONSourceData",setLayerZoomRange:"setLayerZoomRange",setLayerProperty:"setLayerProperty",setCenter:"setCenter",setZoom:"setZoom",setBearing:"setBearing",setPitch:"setPitch",setSprite:"setSprite",setGlyphs:"setGlyphs",setTransition:"setTransition",setLight:"setLight"},ke=function(Z,fa){this.reset(Z,fa)};ke.prototype.reset=function(Z,
fa){this.points=Z||[];this._distances=[0];for(Z=1;Z<this.points.length;Z++)this._distances[Z]=this._distances[Z-1]+this.points[Z].dist(this.points[Z-1]);this.length=this._distances[this._distances.length-1];this.padding=Math.min(fa||0,.5*this.length);this.paddedLength=this.length-2*this.padding};ke.prototype.lerp=function(Z){if(1===this.points.length)return this.points[0];Z=b.clamp(Z,0,1);for(var fa=1,da=this._distances[fa],ta=Z*this.paddedLength+this.padding;da<ta&&fa<this._distances.length;)da=
this._distances[++fa];Z=fa-1;var Ga=this._distances[Z];da-=Ga;da=0<da?(ta-Ga)/da:0;return this.points[Z].mult(1-da).add(this.points[fa].mult(da))};var Xd=function(Z,fa,da){var ta=this.boxCells=[],Ga=this.circleCells=[];this.xCellCount=Math.ceil(Z/da);this.yCellCount=Math.ceil(fa/da);for(da=0;da<this.xCellCount*this.yCellCount;da++)ta.push([]),Ga.push([]);this.circleKeys=[];this.boxKeys=[];this.bboxes=[];this.circles=[];this.width=Z;this.height=fa;this.xScale=this.xCellCount/Z;this.yScale=this.yCellCount/
fa;this.circleUid=this.boxUid=0};Xd.prototype.keysLength=function(){return this.boxKeys.length+this.circleKeys.length};Xd.prototype.insert=function(Z,fa,da,ta,Ga){this._forEachCell(fa,da,ta,Ga,this._insertBoxCell,this.boxUid++);this.boxKeys.push(Z);this.bboxes.push(fa);this.bboxes.push(da);this.bboxes.push(ta);this.bboxes.push(Ga)};Xd.prototype.insertCircle=function(Z,fa,da,ta){this._forEachCell(fa-ta,da-ta,fa+ta,da+ta,this._insertCircleCell,this.circleUid++);this.circleKeys.push(Z);this.circles.push(fa);
this.circles.push(da);this.circles.push(ta)};Xd.prototype._insertBoxCell=function(Z,fa,da,ta,Ga,Za){this.boxCells[Ga].push(Za)};Xd.prototype._insertCircleCell=function(Z,fa,da,ta,Ga,Za){this.circleCells[Ga].push(Za)};Xd.prototype._query=function(Z,fa,da,ta,Ga,Za){if(0>da||Z>this.width||0>ta||fa>this.height)return!Ga&&[];var hb=[];if(0>=Z&&0>=fa&&this.width<=da&&this.height<=ta){if(Ga)return!0;for(Z=0;Z<this.boxKeys.length;Z++)hb.push({key:this.boxKeys[Z],x1:this.bboxes[4*Z],y1:this.bboxes[4*Z+1],
x2:this.bboxes[4*Z+2],y2:this.bboxes[4*Z+3]});for(Z=0;Z<this.circleKeys.length;Z++)fa=this.circles[3*Z],da=this.circles[3*Z+1],ta=this.circles[3*Z+2],hb.push({key:this.circleKeys[Z],x1:fa-ta,y1:da-ta,x2:fa+ta,y2:da+ta});return Za?hb.filter(Za):hb}return this._forEachCell(Z,fa,da,ta,this._queryCell,hb,{hitTest:Ga,seenUids:{box:{},circle:{}}},Za),Ga?0<hb.length:hb};Xd.prototype._queryCircle=function(Z,fa,da,ta,Ga){var Za=Z-da,hb=Z+da,ub=fa-da,Rb=fa+da;if(0>hb||Za>this.width||0>Rb||ub>this.height)return!ta&&
[];var Yb=[];return this._forEachCell(Za,ub,hb,Rb,this._queryCellCircle,Yb,{hitTest:ta,circle:{x:Z,y:fa,radius:da},seenUids:{box:{},circle:{}}},Ga),ta?0<Yb.length:Yb};Xd.prototype.query=function(Z,fa,da,ta,Ga){return this._query(Z,fa,da,ta,!1,Ga)};Xd.prototype.hitTest=function(Z,fa,da,ta,Ga){return this._query(Z,fa,da,ta,!0,Ga)};Xd.prototype.hitTestCircle=function(Z,fa,da,ta){return this._queryCircle(Z,fa,da,!0,ta)};Xd.prototype._queryCell=function(Z,fa,da,ta,Ga,Za,hb,ub){var Rb=hb.seenUids,Yb=this.boxCells[Ga];
if(null!==Yb)for(var dc=this.bboxes,Ac=0;Ac<Yb.length;Ac+=1){var Ec=Yb[Ac];if(!Rb.box[Ec]){Rb.box[Ec]=!0;var uc=4*Ec;if(Z<=dc[uc+2]&&fa<=dc[uc+3]&&da>=dc[uc+0]&&ta>=dc[uc+1]&&(!ub||ub(this.boxKeys[Ec]))){if(hb.hitTest)return Za.push(!0),!0;Za.push({key:this.boxKeys[Ec],x1:dc[uc],y1:dc[uc+1],x2:dc[uc+2],y2:dc[uc+3]})}}}Ga=this.circleCells[Ga];if(null!==Ga)for(Yb=this.circles,dc=0;dc<Ga.length;dc+=1)if(Ac=Ga[dc],!Rb.circle[Ac]){Rb.circle[Ac]=!0;var Xb=3*Ac;if(this._circleAndRectCollide(Yb[Xb],Yb[Xb+
1],Yb[Xb+2],Z,fa,da,ta)&&(!ub||ub(this.circleKeys[Ac]))){if(hb.hitTest)return Za.push(!0),!0;Ec=Yb[Xb];uc=Yb[Xb+1];Xb=Yb[Xb+2];Za.push({key:this.circleKeys[Ac],x1:Ec-Xb,y1:uc-Xb,x2:Ec+Xb,y2:uc+Xb})}}};Xd.prototype._queryCellCircle=function(Z,fa,da,ta,Ga,Za,hb,ub){Z=hb.circle;hb=hb.seenUids;fa=this.boxCells[Ga];if(null!==fa)for(da=this.bboxes,ta=0;ta<fa.length;ta+=1){var Rb=fa[ta];if(!hb.box[Rb]){hb.box[Rb]=!0;var Yb=4*Rb;if(this._circleAndRectCollide(Z.x,Z.y,Z.radius,da[Yb+0],da[Yb+1],da[Yb+2],da[Yb+
3])&&(!ub||ub(this.boxKeys[Rb])))return Za.push(!0),!0}}Ga=this.circleCells[Ga];if(null!==Ga)for(fa=this.circles,da=0;da<Ga.length;da+=1)if(ta=Ga[da],!hb.circle[ta]&&(hb.circle[ta]=!0,Rb=3*ta,this._circlesCollide(fa[Rb],fa[Rb+1],fa[Rb+2],Z.x,Z.y,Z.radius)&&(!ub||ub(this.circleKeys[ta]))))return Za.push(!0),!0};Xd.prototype._forEachCell=function(Z,fa,da,ta,Ga,Za,hb,ub){for(var Rb=this._convertToXCellCoord(Z),Yb=this._convertToYCellCoord(fa),dc=this._convertToXCellCoord(da),Ac=this._convertToYCellCoord(ta);Rb<=
dc;Rb++)for(var Ec=Yb;Ec<=Ac;Ec++)if(Ga.call(this,Z,fa,da,ta,this.xCellCount*Ec+Rb,Za,hb,ub))return};Xd.prototype._convertToXCellCoord=function(Z){return Math.max(0,Math.min(this.xCellCount-1,Math.floor(Z*this.xScale)))};Xd.prototype._convertToYCellCoord=function(Z){return Math.max(0,Math.min(this.yCellCount-1,Math.floor(Z*this.yScale)))};Xd.prototype._circlesCollide=function(Z,fa,da,ta,Ga,Za){Z=ta-Z;fa=Ga-fa;da+=Za;return da*da>Z*Z+fa*fa};Xd.prototype._circleAndRectCollide=function(Z,fa,da,ta,Ga,
Za,hb){Za=(Za-ta)/2;Z=Math.abs(Z-(ta+Za));if(Z>Za+da)return!1;hb=(hb-Ga)/2;fa=Math.abs(fa-(Ga+hb));if(fa>hb+da)return!1;if(Z<=Za||fa<=hb)return!0;Ga=Z-Za;fa-=hb;return Ga*Ga+fa*fa<=da*da};var Ve=new Float32Array([-1/0,-1/0,0,-1/0,-1/0,0,-1/0,-1/0,0,-1/0,-1/0,0]),Yd=function(Z,fa,da){void 0===fa&&(fa=new Xd(Z.width+200,Z.height+200,25));void 0===da&&(da=new Xd(Z.width+200,Z.height+200,25));this.transform=Z;this.grid=fa;this.ignoredGrid=da;this.pitchfactor=Math.cos(Z._pitch)*Z.cameraToCenterDistance;
this.screenRightBoundary=Z.width+100;this.screenBottomBoundary=Z.height+100;this.gridRightBoundary=Z.width+200;this.gridBottomBoundary=Z.height+200};Yd.prototype.placeCollisionBox=function(Z,fa,da,ta,Ga){ta=this.projectAndGetPerspectiveRatio(ta,Z.anchorPointX,Z.anchorPointY);var Za=da*ta.perspectiveRatio;da=Z.x1*Za+ta.point.x;var hb=Z.y1*Za+ta.point.y,ub=Z.x2*Za+ta.point.x;Z=Z.y2*Za+ta.point.y;return!this.isInsideGrid(da,hb,ub,Z)||!fa&&this.grid.hitTest(da,hb,ub,Z,Ga)?{box:[],offscreen:!1}:{box:[da,
hb,ub,Z],offscreen:this.isOffscreen(da,hb,ub,Z)}};Yd.prototype.placeCollisionCircles=function(Z,fa,da,ta,Ga,Za,hb,ub,Rb,Yb,dc,Ac,Ec){var uc=[],Xb=new b.Point(fa.anchorX,fa.anchorY);Za=B(Xb,Za);Za=.5+this.transform.cameraToCenterDistance/Za.signedDistanceFromCamera*.5;Ga=(Yb?Ga/Za:Ga*Za)/b.ONE_EM;Yb=B(Xb,hb).point;Ga=J(Ga,ta,fa.lineOffsetX*Ga,fa.lineOffsetY*Ga,!1,Yb,Xb,fa,da,hb,{});da=fa=!1;ta=!0;if(Ga){Ac=.5*Ac*Za+Ec;hb=new b.Point(-100,-100);Xb=new b.Point(this.screenRightBoundary,this.screenBottomBoundary);
Ec=new ke;Za=Ga.first;Yb=Ga.last;Ga=[];for(var fc=Za.path.length-1;1<=fc;fc--)Ga.push(Za.path[fc]);for(Za=1;Za<Yb.path.length;Za++)Ga.push(Yb.path[Za]);Za=2.5*Ac;ub&&(Ga=Ga.map(function(Ad){return B(Ad,ub)}),Ga=Ga.some(function(Ad){return 0>=Ad.signedDistanceFromCamera})?[]:Ga.map(function(Ad){return Ad.point}));Yb=[];if(0<Ga.length){Yb=Ga[0].clone();fc=Ga[0].clone();for(var Cc=1;Cc<Ga.length;Cc++)Yb.x=Math.min(Yb.x,Ga[Cc].x),Yb.y=Math.min(Yb.y,Ga[Cc].y),fc.x=Math.max(fc.x,Ga[Cc].x),fc.y=Math.max(fc.y,
Ga[Cc].y);Yb=Yb.x>=hb.x&&fc.x<=Xb.x&&Yb.y>=hb.y&&fc.y<=Xb.y?[Ga]:fc.x<hb.x||Yb.x>Xb.x||fc.y<hb.y||Yb.y>Xb.y?[]:b.clipLine([Ga],hb.x,hb.y,Xb.x,Xb.y)}hb=0;for(Xb=Yb;hb<Xb.length;hb+=1)for(Ec.reset(Xb[hb],.25*Ac),Ga=Ec.length<=.5*Ac?1:Math.ceil(Ec.paddedLength/Za)+1,Yb=0;Yb<Ga;Yb++){Cc=Ec.lerp(Yb/Math.max(Ga-1,1));fc=Cc.x+100;Cc=Cc.y+100;uc.push(fc,Cc,Ac,0);var bd=fc-Ac,nd=Cc-Ac,Nc=fc+Ac,vd=Cc+Ac;if(ta=ta&&this.isOffscreen(bd,nd,Nc,vd),da=da||this.isInsideGrid(bd,nd,Nc,vd),!Z&&this.grid.hitTestCircle(fc,
Cc,Ac,dc)&&(fa=!0,!Rb))return{circles:[],offscreen:!1,collisionDetected:fa}}}return{circles:!Rb&&fa||!da?[]:uc,offscreen:ta,collisionDetected:fa}};Yd.prototype.queryRenderedSymbols=function(Z){if(0===Z.length||0===this.grid.keysLength()&&0===this.ignoredGrid.keysLength())return{};for(var fa=[],da=1/0,ta=1/0,Ga=-1/0,Za=-1/0,hb=0;hb<Z.length;hb+=1){var ub=Z[hb];ub=new b.Point(ub.x+100,ub.y+100);da=Math.min(da,ub.x);ta=Math.min(ta,ub.y);Ga=Math.max(Ga,ub.x);Za=Math.max(Za,ub.y);fa.push(ub)}Z={};hb={};
ub=0;for(da=this.grid.query(da,ta,Ga,Za).concat(this.ignoredGrid.query(da,ta,Ga,Za));ub<da.length;ub+=1)Ga=da[ub],ta=Ga.key,(void 0===Z[ta.bucketInstanceId]&&(Z[ta.bucketInstanceId]={}),Z[ta.bucketInstanceId][ta.featureIndex])||(Ga=[new b.Point(Ga.x1,Ga.y1),new b.Point(Ga.x2,Ga.y1),new b.Point(Ga.x2,Ga.y2),new b.Point(Ga.x1,Ga.y2)],b.polygonIntersectsPolygon(fa,Ga)&&(Z[ta.bucketInstanceId][ta.featureIndex]=!0,void 0===hb[ta.bucketInstanceId]&&(hb[ta.bucketInstanceId]=[]),hb[ta.bucketInstanceId].push(ta.featureIndex)));
return hb};Yd.prototype.insertCollisionBox=function(Z,fa,da,ta,Ga){(fa?this.ignoredGrid:this.grid).insert({bucketInstanceId:da,featureIndex:ta,collisionGroupID:Ga},Z[0],Z[1],Z[2],Z[3])};Yd.prototype.insertCollisionCircles=function(Z,fa,da,ta,Ga){fa=fa?this.ignoredGrid:this.grid;da={bucketInstanceId:da,featureIndex:ta,collisionGroupID:Ga};for(ta=0;ta<Z.length;ta+=4)fa.insertCircle(da,Z[ta],Z[ta+1],Z[ta+2])};Yd.prototype.projectAndGetPerspectiveRatio=function(Z,fa,da){fa=[fa,da,0,1];return S(fa,fa,
Z),{point:new b.Point((fa[0]/fa[3]+1)/2*this.transform.width+100,(-fa[1]/fa[3]+1)/2*this.transform.height+100),perspectiveRatio:.5+this.transform.cameraToCenterDistance/fa[3]*.5}};Yd.prototype.isOffscreen=function(Z,fa,da,ta){return 100>da||Z>=this.screenRightBoundary||100>ta||fa>this.screenBottomBoundary};Yd.prototype.isInsideGrid=function(Z,fa,da,ta){return 0<=da&&Z<this.gridRightBoundary&&0<=ta&&fa<this.gridBottomBoundary};Yd.prototype.getViewportMatrix=function(){var Z=b.identity([]);return b.translate(Z,
Z,[-100,-100,0]),Z};var yf=function(Z,fa,da,ta){this.opacity=Z?Math.max(0,Math.min(1,Z.opacity+(Z.placed?fa:-fa))):ta&&da?1:0;this.placed=da};yf.prototype.isHidden=function(){return 0===this.opacity&&!this.placed};var Lf=function(Z,fa,da,ta,Ga){this.text=new yf(Z?Z.text:null,fa,da,Ga);this.icon=new yf(Z?Z.icon:null,fa,ta,Ga)};Lf.prototype.isHidden=function(){return this.text.isHidden()&&this.icon.isHidden()};var Cf=function(Z,fa,da){this.text=Z;this.icon=fa;this.skipFade=da},tc=function(){this.invProjMatrix=
b.create();this.viewportMatrix=b.create();this.circles=[]},Fc=function(Z,fa,da,ta,Ga){this.bucketInstanceId=Z;this.featureIndex=fa;this.sourceLayerIndex=da;this.bucketIndex=ta;this.tileID=Ga},Wc=function(Z){this.crossSourceCollisions=Z;this.maxGroupID=0;this.collisionGroups={}};Wc.prototype.get=function(Z){if(this.crossSourceCollisions)return{ID:0,predicate:null};if(!this.collisionGroups[Z]){var fa=++this.maxGroupID;this.collisionGroups[Z]={ID:fa,predicate:function(da){return da.collisionGroupID===
fa}}}return this.collisionGroups[Z]};var hd=function(Z,fa,da,ta){this.transform=Z.clone();this.collisionIndex=new Yd(this.transform);this.placements={};this.opacities={};this.variableOffsets={};this.stale=!1;this.commitTime=0;this.fadeDuration=fa;this.retainedQueryData={};this.collisionGroups=new Wc(da);this.collisionCircleArrays={};(this.prevPlacement=ta)&&(ta.prevPlacement=void 0);this.placedOrientations={}};hd.prototype.getBucketParts=function(Z,fa,da,ta){var Ga=da.getBucket(fa),Za=da.latestFeatureIndex;
if(Ga&&Za&&fa.id===Ga.layerIds[0]){fa=da.collisionBoxArray;var hb=Ga.layers[0].layout,ub=Math.pow(2,this.transform.zoom-da.tileID.overscaledZ),Rb=da.tileSize/b.EXTENT,Yb=this.transform.calculatePosMatrix(da.tileID.toUnwrapped()),dc="map"===hb.get("text-pitch-alignment"),Ac="map"===hb.get("text-rotation-alignment"),Ec=R(da,1,this.transform.zoom),uc=D(Yb,dc,Ac,this.transform,Ec),Xb=null;dc&&(dc=u(Yb,dc,Ac,this.transform,Ec),Xb=b.multiply([],this.transform.labelPlaneMatrix,dc));this.retainedQueryData[Ga.bucketInstanceId]=
new Fc(Ga.bucketInstanceId,Za,Ga.sourceLayerIndex,Ga.index,da.tileID);da={bucket:Ga,layout:hb,posMatrix:Yb,textLabelPlaneMatrix:uc,labelToScreenMatrix:Xb,scale:ub,textPixelRatio:Rb,holdingForFade:da.holdingForFade(),collisionBoxArray:fa,partiallyEvaluatedTextSize:b.evaluateSizeForZoom(Ga.textSizeData,this.transform.zoom),collisionGroup:this.collisionGroups.get(Ga.sourceID)};if(ta)for(ta=0,Ga=Ga.sortKeyRanges;ta<Ga.length;ta+=1)Za=Ga[ta],Z.push({sortKey:Za.sortKey,symbolInstanceStart:Za.symbolInstanceStart,
symbolInstanceEnd:Za.symbolInstanceEnd,parameters:da});else Z.push({symbolInstanceStart:0,symbolInstanceEnd:Ga.symbolInstances.length,parameters:da})}};hd.prototype.attemptAnchorPlacement=function(Z,fa,da,ta,Ga,Za,hb,ub,Rb,Yb,dc,Ac,Ec,uc,Xb){var fc,Cc=[Ac.textOffset0,Ac.textOffset1],bd=O(Z,da,ta,Cc,Ga);fa=this.collisionIndex.placeCollisionBox(T(fa,bd.x,bd.y,Za,hb,this.transform.angle),dc,ub,Rb,Yb.predicate);if(!Xb||0!==this.collisionIndex.placeCollisionBox(T(Xb,bd.x,bd.y,Za,hb,this.transform.angle),
dc,ub,Rb,Yb.predicate).box.length)return 0<fa.box.length?(this.prevPlacement&&this.prevPlacement.variableOffsets[Ac.crossTileID]&&this.prevPlacement.placements[Ac.crossTileID]&&this.prevPlacement.placements[Ac.crossTileID].text&&(fc=this.prevPlacement.variableOffsets[Ac.crossTileID].anchor),this.variableOffsets[Ac.crossTileID]={textOffset:Cc,width:da,height:ta,anchor:Z,textBoxScale:Ga,prevAnchor:fc},this.markUsedJustification(Ec,Z,Ac,uc),Ec.allowVerticalPlacement&&(this.markUsedOrientation(Ec,uc,
Ac),this.placedOrientations[Ac.crossTileID]=uc),{shift:bd,placedGlyphBoxes:fa}):void 0};hd.prototype.placeLayerBucketPart=function(Z,fa,da){var ta=this,Ga=Z.parameters,Za=Ga.bucket,hb=Ga.layout,ub=Ga.posMatrix,Rb=Ga.textLabelPlaneMatrix,Yb=Ga.labelToScreenMatrix,dc=Ga.textPixelRatio,Ac=Ga.holdingForFade,Ec=Ga.collisionBoxArray,uc=Ga.partiallyEvaluatedTextSize,Xb=Ga.collisionGroup,fc=hb.get("text-optional"),Cc=hb.get("icon-optional"),bd=hb.get("text-allow-overlap"),nd=hb.get("icon-allow-overlap"),
Nc="map"===hb.get("text-rotation-alignment"),vd="map"===hb.get("text-pitch-alignment"),Ad="none"!==hb.get("icon-text-fit");Ga="viewport-y"===hb.get("symbol-z-order");var le=bd&&(nd||!Za.hasIconData()||Cc),Ud=nd&&(bd||!Za.hasTextData()||fc);!Za.collisionArrays&&Ec&&Za.deserializeCollisionBoxes(Ec);Ec=function(fe,ue){if(!fa[fe.crossTileID])if(Ac)ta.placements[fe.crossTileID]=new Cf(!1,!1,!1);else{var Ee,Re=!1,lf=!1,he=!0,ef=null,mf={box:null,offscreen:null},Ae={box:null,offscreen:null},$e=null,vf=null,
nf=0,Fh=0,sg=0;ue.textFeatureIndex?nf=ue.textFeatureIndex:fe.useRuntimeCollisionCircles&&(nf=fe.featureIndex);ue.verticalTextFeatureIndex&&(Fh=ue.verticalTextFeatureIndex);var Vg=ue.textBox;if(Vg){var jg=function(Qe){var Tf=b.WritingMode.horizontal;Za.allowVerticalPlacement&&!Qe&&ta.prevPlacement&&(Qe=ta.prevPlacement.placedOrientations[fe.crossTileID])&&(ta.placedOrientations[fe.crossTileID]=Qe,ta.markUsedOrientation(Za,Tf=Qe,fe));return Tf};he=function(Qe,Tf){if(Za.allowVerticalPlacement&&0<fe.numVerticalGlyphVertices&&
ue.verticalTextBox)for(var xg=0,kg=Za.writingModes;xg<kg.length&&(kg[xg]===b.WritingMode.vertical?(mf=Tf(),Ae=mf):mf=Qe(),!(mf&&mf.box&&mf.box.length));xg+=1);else mf=Qe()};if(hb.get("text-variable-anchor")){var Yh=hb.get("text-variable-anchor");if(ta.prevPlacement&&ta.prevPlacement.variableOffsets[fe.crossTileID]){var wf=ta.prevPlacement.variableOffsets[fe.crossTileID];0<Yh.indexOf(wf.anchor)&&(Yh=Yh.filter(function(Qe){return Qe!==wf.anchor})).unshift(wf.anchor)}var pj=function(Qe,Tf,xg){var kg=
Qe.x2-Qe.x1,Gh=Qe.y2-Qe.y1,ah=fe.textBoxScale;Tf=Ad&&!nd?Tf:null;for(var fj={box:[],offscreen:!1},zk=bd?2*Yh.length:Yh.length,Zb=0;Zb<zk;++Zb){var Zh=ta.attemptAnchorPlacement(Yh[Zb%Yh.length],Qe,kg,Gh,ah,Nc,vd,dc,ub,Xb,Zb>=Yh.length,fe,Za,xg,Tf);if(Zh&&(fj=Zh.placedGlyphBoxes)&&fj.box&&fj.box.length){Re=!0;ef=Zh.shift;break}}return fj};he(function(){return pj(Vg,ue.iconBox,b.WritingMode.horizontal)},function(){var Qe=ue.verticalTextBox;return Za.allowVerticalPlacement&&!(mf&&mf.box&&mf.box.length)&&
0<fe.numVerticalGlyphVertices&&Qe?pj(Qe,ue.verticalIconBox,b.WritingMode.vertical):{box:null,offscreen:null}});mf&&(Re=mf.box,he=mf.offscreen);he=jg(mf&&mf.box);!Re&&ta.prevPlacement&&(jg=ta.prevPlacement.variableOffsets[fe.crossTileID])&&(ta.variableOffsets[fe.crossTileID]=jg,ta.markUsedJustification(Za,jg.anchor,fe,he))}else{var og=function(Qe,Tf){Qe=ta.collisionIndex.placeCollisionBox(Qe,bd,dc,ub,Xb.predicate);return Qe&&Qe.box&&Qe.box.length&&(ta.markUsedOrientation(Za,Tf,fe),ta.placedOrientations[fe.crossTileID]=
Tf),Qe};he(function(){return og(Vg,b.WritingMode.horizontal)},function(){var Qe=ue.verticalTextBox;return Za.allowVerticalPlacement&&0<fe.numVerticalGlyphVertices&&Qe?og(Qe,b.WritingMode.vertical):{box:null,offscreen:null}});jg(mf&&mf.box&&mf.box.length)}}if(Re=(Ee=mf)&&Ee.box&&0<Ee.box.length,he=Ee&&Ee.offscreen,fe.useRuntimeCollisionCircles){$e=Za.text.placedSymbolArray.get(fe.centerJustifiedTextSymbolIndex);jg=b.evaluateSizeForFeature(Za.textSizeData,uc,$e);var Zf=hb.get("text-padding");$e=ta.collisionIndex.placeCollisionCircles(bd,
$e,Za.lineVertexArray,Za.glyphOffsetArray,jg,ub,Rb,Yb,da,vd,Xb.predicate,fe.collisionCircleDiameter,Zf);Re=bd||0<$e.circles.length&&!$e.collisionDetected;he=he&&$e.offscreen}if(ue.iconFeatureIndex&&(sg=ue.iconFeatureIndex),ue.iconBox)lf=function(Qe){Qe=Ad&&ef?T(Qe,ef.x,ef.y,Nc,vd,ta.transform.angle):Qe;return ta.collisionIndex.placeCollisionBox(Qe,nd,dc,ub,Xb.predicate)},lf=Ae&&Ae.box&&Ae.box.length&&ue.verticalIconBox?0<(vf=lf(ue.verticalIconBox)).box.length:0<(vf=lf(ue.iconBox)).box.length,he=he&&
vf.offscreen;jg=fc||0===fe.numHorizontalGlyphVertices&&0===fe.numVerticalGlyphVertices;Zf=Cc||0===fe.numIconVertices;if(jg||Zf?Zf?jg||(lf=lf&&Re):Re=lf&&Re:lf=Re=lf&&Re,Re&&Ee&&Ee.box&&ta.collisionIndex.insertCollisionBox(Ee.box,hb.get("text-ignore-placement"),Za.bucketInstanceId,Ae&&Ae.box&&Fh?Fh:nf,Xb.ID),lf&&vf&&ta.collisionIndex.insertCollisionBox(vf.box,hb.get("icon-ignore-placement"),Za.bucketInstanceId,sg,Xb.ID),$e&&(Re&&ta.collisionIndex.insertCollisionCircles($e.circles,hb.get("text-ignore-placement"),
Za.bucketInstanceId,nf,Xb.ID),da))for(vf=Za.bucketInstanceId,Ee=ta.collisionCircleArrays[vf],void 0===Ee&&(Ee=ta.collisionCircleArrays[vf]=new tc),vf=0;vf<$e.circles.length;vf+=4)Ee.circles.push($e.circles[vf+0]),Ee.circles.push($e.circles[vf+1]),Ee.circles.push($e.circles[vf+2]),Ee.circles.push($e.collisionDetected?1:0);ta.placements[fe.crossTileID]=new Cf(Re||le,lf||Ud,he||Za.justReloaded);fa[fe.crossTileID]=!0}};if(Ga)for(Z=Za.getSortedSymbolIndexes(this.transform.angle),Ga=Z.length-1;0<=Ga;--Ga){var Sd=
Z[Ga];Ec(Za.symbolInstances.get(Sd),Za.collisionArrays[Sd])}else for(Ga=Z.symbolInstanceStart;Ga<Z.symbolInstanceEnd;Ga++)Ec(Za.symbolInstances.get(Ga),Za.collisionArrays[Ga]);da&&Za.bucketInstanceId in this.collisionCircleArrays&&(Ec=this.collisionCircleArrays[Za.bucketInstanceId],b.invert(Ec.invProjMatrix,ub),Ec.viewportMatrix=this.collisionIndex.getViewportMatrix());Za.justReloaded=!1};hd.prototype.markUsedJustification=function(Z,fa,da,ta){fa=ta===b.WritingMode.vertical?da.verticalPlacedTextSymbolIndex:
{left:da.leftJustifiedTextSymbolIndex,center:da.centerJustifiedTextSymbolIndex,right:da.rightJustifiedTextSymbolIndex}[b.getAnchorJustification(fa)];ta=0;for(var Ga=[da.leftJustifiedTextSymbolIndex,da.centerJustifiedTextSymbolIndex,da.rightJustifiedTextSymbolIndex,da.verticalPlacedTextSymbolIndex];ta<Ga.length;ta+=1){var Za=Ga[ta];0<=Za&&(Z.text.placedSymbolArray.get(Za).crossTileID=0<=fa&&Za!==fa?0:da.crossTileID)}};hd.prototype.markUsedOrientation=function(Z,fa,da){var ta=fa===b.WritingMode.horizontal||
fa===b.WritingMode.horizontalOnly?fa:0;fa=fa===b.WritingMode.vertical?fa:0;for(var Ga=0,Za=[da.leftJustifiedTextSymbolIndex,da.centerJustifiedTextSymbolIndex,da.rightJustifiedTextSymbolIndex];Ga<Za.length;Ga+=1)Z.text.placedSymbolArray.get(Za[Ga]).placedOrientation=ta;da.verticalPlacedTextSymbolIndex&&(Z.text.placedSymbolArray.get(da.verticalPlacedTextSymbolIndex).placedOrientation=fa)};hd.prototype.commit=function(Z){this.commitTime=Z;this.zoomAtLastRecencyCheck=this.transform.zoom;var fa=this.prevPlacement,
da=!1;this.prevZoomAdjustment=fa?fa.zoomAdjustment(this.transform.zoom):0;var ta=fa?fa.symbolFadeChange(Z):1,Ga=fa?fa.opacities:{},Za=fa?fa.variableOffsets:{},hb=fa?fa.placedOrientations:{};for(dc in this.placements){var ub=this.placements[dc],Rb=Ga[dc];Rb?(this.opacities[dc]=new Lf(Rb,ta,ub.text,ub.icon),da=da||ub.text!==Rb.text.placed||ub.icon!==Rb.icon.placed):(this.opacities[dc]=new Lf(null,ta,ub.text,ub.icon,ub.skipFade),da=da||ub.text||ub.icon)}for(var Yb in Ga){var dc=Ga[Yb];this.opacities[Yb]||
(ub=new Lf(dc,ta,!1,!1),ub.isHidden()||(this.opacities[Yb]=ub,da=da||dc.text.placed||dc.icon.placed))}for(var Ac in Za)this.variableOffsets[Ac]||!this.opacities[Ac]||this.opacities[Ac].isHidden()||(this.variableOffsets[Ac]=Za[Ac]);for(var Ec in hb)this.placedOrientations[Ec]||!this.opacities[Ec]||this.opacities[Ec].isHidden()||(this.placedOrientations[Ec]=hb[Ec]);da?this.lastPlacementChangeTime=Z:"number"!=typeof this.lastPlacementChangeTime&&(this.lastPlacementChangeTime=fa?fa.lastPlacementChangeTime:
Z)};hd.prototype.updateLayerOpacities=function(Z,fa){for(var da={},ta=0;ta<fa.length;ta+=1){var Ga=fa[ta],Za=Ga.getBucket(Z);Za&&Ga.latestFeatureIndex&&Z.id===Za.layerIds[0]&&this.updateBucketOpacities(Za,da,Ga.collisionBoxArray)}};hd.prototype.updateBucketOpacities=function(Z,fa,da){var ta=this;Z.hasTextData()&&Z.text.opacityVertexArray.clear();Z.hasIconData()&&Z.icon.opacityVertexArray.clear();Z.hasIconCollisionBoxData()&&Z.iconCollisionBox.collisionVertexArray.clear();Z.hasTextCollisionBoxData()&&
Z.textCollisionBox.collisionVertexArray.clear();var Ga=Z.layers[0].layout,Za=new Lf(null,0,!1,!1,!0),hb=Ga.get("text-allow-overlap"),ub=Ga.get("icon-allow-overlap"),Rb=Ga.get("text-variable-anchor"),Yb="map"===Ga.get("text-rotation-alignment"),dc="map"===Ga.get("text-pitch-alignment"),Ac="none"!==Ga.get("icon-text-fit"),Ec=new Lf(null,0,hb&&(ub||!Z.hasIconData()||Ga.get("icon-optional")),ub&&(hb||!Z.hasTextData()||Ga.get("text-optional")),!0);!Z.collisionArrays&&da&&(Z.hasIconCollisionBoxData()||
Z.hasTextCollisionBoxData())&&Z.deserializeCollisionBoxes(da);var uc=function(Xb,fc,Cc){for(var bd=0;bd<fc/4;bd++)Xb.opacityVertexArray.emplaceBack(Cc)};da=function(Xb){var fc=Z.symbolInstances.get(Xb),Cc=fc.numHorizontalGlyphVertices,bd=fc.numVerticalGlyphVertices,nd=fc.crossTileID,Nc=ta.opacities[nd];fa[nd]?Nc=Za:Nc||(ta.opacities[nd]=Nc=Ec);fa[nd]=!0;var vd=0<fc.numIconVertices,Ad=ta.placedOrientations[fc.crossTileID],le=Ad===b.WritingMode.vertical,Ud=Ad===b.WritingMode.horizontal||Ad===b.WritingMode.horizontalOnly;
if(0<Cc||0<bd){var Sd=X(Nc.text);uc(Z.text,Cc,le?vc:Sd);uc(Z.text,bd,Ud?vc:Sd);var fe=Nc.text.isHidden();[fc.rightJustifiedTextSymbolIndex,fc.centerJustifiedTextSymbolIndex,fc.leftJustifiedTextSymbolIndex].forEach(function(ue){0<=ue&&(Z.text.placedSymbolArray.get(ue).hidden=fe||le?1:0)});0<=fc.verticalPlacedTextSymbolIndex&&(Z.text.placedSymbolArray.get(fc.verticalPlacedTextSymbolIndex).hidden=fe||Ud?1:0);(Cc=ta.variableOffsets[fc.crossTileID])&&ta.markUsedJustification(Z,Cc.anchor,fc,Ad);(Ad=ta.placedOrientations[fc.crossTileID])&&
(ta.markUsedJustification(Z,"left",fc,Ad),ta.markUsedOrientation(Z,Ad,fc))}vd&&(vd=X(Nc.icon),Ad=!(Ac&&fc.verticalPlacedIconSymbolIndex&&le),0<=fc.placedIconSymbolIndex&&(uc(Z.icon,fc.numIconVertices,Ad?vd:vc),Z.icon.placedSymbolArray.get(fc.placedIconSymbolIndex).hidden=Nc.icon.isHidden()),0<=fc.verticalPlacedIconSymbolIndex&&(uc(Z.icon,fc.numVerticalIconVertices,Ad?vc:vd),Z.icon.placedSymbolArray.get(fc.verticalPlacedIconSymbolIndex).hidden=Nc.icon.isHidden()));if(Z.hasIconCollisionBoxData()||Z.hasTextCollisionBoxData())if(Xb=
Z.collisionArrays[Xb]){fc=new b.Point(0,0);if(Xb.textBox||Xb.verticalTextBox)vd=!0,Rb&&((nd=ta.variableOffsets[nd])?(fc=O(nd.anchor,nd.width,nd.height,nd.textOffset,nd.textBoxScale),Yb&&fc._rotate(dc?ta.transform.angle:-ta.transform.angle)):vd=!1),Xb.textBox&&V(Z.textCollisionBox.collisionVertexArray,Nc.text.placed,!vd||le,fc.x,fc.y),Xb.verticalTextBox&&V(Z.textCollisionBox.collisionVertexArray,Nc.text.placed,!vd||Ud,fc.x,fc.y);Ud=!(Ud||!Xb.verticalIconBox);Xb.iconBox&&V(Z.iconCollisionBox.collisionVertexArray,
Nc.icon.placed,Ud,Ac?fc.x:0,Ac?fc.y:0);Xb.verticalIconBox&&V(Z.iconCollisionBox.collisionVertexArray,Nc.icon.placed,!Ud,Ac?fc.x:0,Ac?fc.y:0)}};for(Ga=0;Ga<Z.symbolInstances.length;Ga++)da(Ga);if(Z.sortFeatures(this.transform.angle),this.retainedQueryData[Z.bucketInstanceId]&&(this.retainedQueryData[Z.bucketInstanceId].featureSortOrder=Z.featureSortOrder),Z.hasTextData()&&Z.text.opacityVertexBuffer&&Z.text.opacityVertexBuffer.updateData(Z.text.opacityVertexArray),Z.hasIconData()&&Z.icon.opacityVertexBuffer&&
Z.icon.opacityVertexBuffer.updateData(Z.icon.opacityVertexArray),Z.hasIconCollisionBoxData()&&Z.iconCollisionBox.collisionVertexBuffer&&Z.iconCollisionBox.collisionVertexBuffer.updateData(Z.iconCollisionBox.collisionVertexArray),Z.hasTextCollisionBoxData()&&Z.textCollisionBox.collisionVertexBuffer&&Z.textCollisionBox.collisionVertexBuffer.updateData(Z.textCollisionBox.collisionVertexArray),Z.bucketInstanceId in this.collisionCircleArrays)da=this.collisionCircleArrays[Z.bucketInstanceId],Z.placementInvProjMatrix=
da.invProjMatrix,Z.placementViewportMatrix=da.viewportMatrix,Z.collisionCircleArray=da.circles,delete this.collisionCircleArrays[Z.bucketInstanceId]};hd.prototype.symbolFadeChange=function(Z){return 0===this.fadeDuration?1:(Z-this.commitTime)/this.fadeDuration+this.prevZoomAdjustment};hd.prototype.zoomAdjustment=function(Z){return Math.max(0,(this.transform.zoom-Z)/1.5)};hd.prototype.hasTransitions=function(Z){return this.stale||Z-this.lastPlacementChangeTime<this.fadeDuration};hd.prototype.stillRecent=
function(Z,fa){var da=this.zoomAtLastRecencyCheck===fa?1-this.zoomAdjustment(fa):1;return this.zoomAtLastRecencyCheck=fa,this.commitTime+this.fadeDuration*da>Z};hd.prototype.setStale=function(){this.stale=!0};var be=Math.pow(2,25),pe=Math.pow(2,24),ce=Math.pow(2,17),de=Math.pow(2,16),Be=Math.pow(2,9),Ue=Math.pow(2,8),oc=Math.pow(2,1),vc=0,Zc=function(Z){this._sortAcrossTiles="viewport-y"!==Z.layout.get("symbol-z-order")&&void 0!==Z.layout.get("symbol-sort-key").constantOr(1);this._currentPartIndex=
this._currentTileIndex=0;this._seenCrossTileIDs={};this._bucketParts=[]};Zc.prototype.continuePlacement=function(Z,fa,da,ta,Ga){for(var Za=this._bucketParts;this._currentTileIndex<Z.length;)if(fa.getBucketParts(Za,ta,Z[this._currentTileIndex],this._sortAcrossTiles),this._currentTileIndex++,Ga())return!0;for(this._sortAcrossTiles&&(this._sortAcrossTiles=!1,Za.sort(function(hb,ub){return hb.sortKey-ub.sortKey}));this._currentPartIndex<Za.length;)if(fa.placeLayerBucketPart(Za[this._currentPartIndex],
this._seenCrossTileIDs,da),this._currentPartIndex++,Ga())return!0;return!1};var ld=function(Z,fa,da,ta,Ga,Za,hb){this.placement=new hd(Z,Ga,Za,hb);this._currentPlacementIndex=fa.length-1;this._forceFullPlacement=da;this._showCollisionBoxes=ta;this._done=!1};ld.prototype.isDone=function(){return this._done};ld.prototype.continuePlacement=function(Z,fa,da){for(var ta=this,Ga=b.browser.now(),Za=function(){var Rb=b.browser.now()-Ga;return!ta._forceFullPlacement&&2<Rb};0<=this._currentPlacementIndex;){var hb=
fa[Z[this._currentPlacementIndex]],ub=this.placement.collisionIndex.transform.zoom;if("symbol"===hb.type&&(!hb.minzoom||hb.minzoom<=ub)&&(!hb.maxzoom||hb.maxzoom>ub)){if(this._inProgressLayer||(this._inProgressLayer=new Zc(hb)),this._inProgressLayer.continuePlacement(da[hb.source],this.placement,this._showCollisionBoxes,hb,Za))return;delete this._inProgressLayer}this._currentPlacementIndex--}this._done=!0};ld.prototype.commit=function(Z){return this.placement.commit(Z),this.placement};var $c=512/
b.EXTENT/2,Oc=function(Z,fa,da){this.tileID=Z;this.indexedSymbolInstances={};this.bucketInstanceId=da;for(da=0;da<fa.length;da++){var ta=fa.get(da),Ga=ta.key;this.indexedSymbolInstances[Ga]||(this.indexedSymbolInstances[Ga]=[]);this.indexedSymbolInstances[Ga].push({crossTileID:ta.crossTileID,coord:this.getScaledCoordinates(ta,Z)})}};Oc.prototype.getScaledCoordinates=function(Z,fa){var da=$c/Math.pow(2,fa.canonical.z-this.tileID.canonical.z);return{x:Math.floor((fa.canonical.x*b.EXTENT+Z.anchorX)*
da),y:Math.floor((fa.canonical.y*b.EXTENT+Z.anchorY)*da)}};Oc.prototype.findMatches=function(Z,fa,da){for(var ta=this.tileID.canonical.z<fa.canonical.z?1:Math.pow(2,this.tileID.canonical.z-fa.canonical.z),Ga=0;Ga<Z.length;Ga++){var Za=Z.get(Ga);if(!Za.crossTileID){var hb=this.indexedSymbolInstances[Za.key];if(hb)for(var ub=this.getScaledCoordinates(Za,fa),Rb=0;Rb<hb.length;Rb+=1){var Yb=hb[Rb];if(Math.abs(Yb.coord.x-ub.x)<=ta&&Math.abs(Yb.coord.y-ub.y)<=ta&&!da[Yb.crossTileID]){da[Yb.crossTileID]=
!0;Za.crossTileID=Yb.crossTileID;break}}}}};var ad=function(){this.maxCrossTileID=0};ad.prototype.generate=function(){return++this.maxCrossTileID};var Jc=function(){this.indexes={};this.usedCrossTileIDs={};this.lng=0};Jc.prototype.handleWrapJump=function(Z){var fa=Math.round((Z-this.lng)/360);if(0!==fa)for(var da in this.indexes){var ta=this.indexes[da],Ga={},Za;for(Za in ta){var hb=ta[Za];hb.tileID=hb.tileID.unwrapTo(hb.tileID.wrap+fa);Ga[hb.tileID.key]=hb}this.indexes[da]=Ga}this.lng=Z};Jc.prototype.addBucket=
function(Z,fa,da){if(this.indexes[Z.overscaledZ]&&this.indexes[Z.overscaledZ][Z.key]){if(this.indexes[Z.overscaledZ][Z.key].bucketInstanceId===fa.bucketInstanceId)return!1;this.removeBucketCrossTileIDs(Z.overscaledZ,this.indexes[Z.overscaledZ][Z.key])}for(var ta=0;ta<fa.symbolInstances.length;ta++)fa.symbolInstances.get(ta).crossTileID=0;this.usedCrossTileIDs[Z.overscaledZ]||(this.usedCrossTileIDs[Z.overscaledZ]={});ta=this.usedCrossTileIDs[Z.overscaledZ];for(var Ga in this.indexes){var Za=this.indexes[Ga];
if(Number(Ga)>Z.overscaledZ)for(var hb in Za){var ub=Za[hb];ub.tileID.isChildOf(Z)&&ub.findMatches(fa.symbolInstances,Z,ta)}else(Za=Za[Z.scaledTo(Number(Ga)).key])&&Za.findMatches(fa.symbolInstances,Z,ta)}for(Ga=0;Ga<fa.symbolInstances.length;Ga++)hb=fa.symbolInstances.get(Ga),hb.crossTileID||(hb.crossTileID=da.generate(),ta[hb.crossTileID]=!0);return void 0===this.indexes[Z.overscaledZ]&&(this.indexes[Z.overscaledZ]={}),this.indexes[Z.overscaledZ][Z.key]=new Oc(Z,fa.symbolInstances,fa.bucketInstanceId),
!0};Jc.prototype.removeBucketCrossTileIDs=function(Z,fa){for(var da in fa.indexedSymbolInstances)for(var ta=0,Ga=fa.indexedSymbolInstances[da];ta<Ga.length;ta+=1)delete this.usedCrossTileIDs[Z][Ga[ta].crossTileID]};Jc.prototype.removeStaleBuckets=function(Z){var fa=!1,da;for(da in this.indexes){var ta=this.indexes[da],Ga;for(Ga in ta)Z[ta[Ga].bucketInstanceId]||(this.removeBucketCrossTileIDs(da,ta[Ga]),delete ta[Ga],fa=!0)}return fa};var zc=function(){this.layerIndexes={};this.crossTileIDs=new ad;
this.maxBucketInstanceId=0;this.bucketsInCurrentPlacement={}};zc.prototype.addLayer=function(Z,fa,da){var ta=this.layerIndexes[Z.id];void 0===ta&&(ta=this.layerIndexes[Z.id]=new Jc);var Ga=!1,Za={};ta.handleWrapJump(da);for(da=0;da<fa.length;da+=1){var hb=fa[da],ub=hb.getBucket(Z);ub&&Z.id===ub.layerIds[0]&&(ub.bucketInstanceId||(ub.bucketInstanceId=++this.maxBucketInstanceId),ta.addBucket(hb.tileID,ub,this.crossTileIDs)&&(Ga=!0),Za[ub.bucketInstanceId]=!0)}return ta.removeStaleBuckets(Za)&&(Ga=!0),
Ga};zc.prototype.pruneUnusedLayers=function(Z){var fa={},da;for(da in Z.forEach(function(ta){fa[ta]=!0}),this.layerIndexes)fa[da]||delete this.layerIndexes[da]};var Dc=function(Z,fa){return b.emitValidationErrors(Z,fa&&fa.filter(function(da){return"source.canvas"!==da.identifier}))},Gc=b.pick(Ed,"addLayer removeLayer setPaintProperty setLayoutProperty setFilter addSource removeSource setLayerZoomRange setLight setTransition setGeoJSONSourceData".split(" ")),ud=b.pick(Ed,["setCenter","setZoom","setBearing",
"setPitch"]),Od=function(){var Z={},fa=b.styleSpec.$version,da;for(da in b.styleSpec.$root){var ta,Ga=b.styleSpec.$root[da];Ga.required&&null!=(ta="version"===da?fa:"array"===Ga.type?[]:{})&&(Z[da]=ta)}return Z}(),Gd=function(Z){function fa(da,ta){var Ga=this;void 0===ta&&(ta={});Z.call(this);this.map=da;this.dispatcher=new Ca((Pd||(Pd=new Vd),Pd),this);this.imageManager=new Wa;this.imageManager.setEventedParent(this);this.glyphManager=new Ja(da._requestManager,ta.localIdeographFontFamily);this.lineAtlas=
new Ha(256,512);this.crossTileSymbolIndex=new zc;this._layers={};this._serializedLayers={};this._order=[];this.sourceCaches={};this.zoomHistory=new b.ZoomHistory;this._loaded=!1;this._availableImages=[];this._resetUpdates();this.dispatcher.broadcast("setReferrer",b.getReferrer());var Za=this;this._rtlTextPluginCallback=fa.registerForPluginStateChange(function(hb){Za.dispatcher.broadcast("syncRTLPluginState",{pluginStatus:hb.pluginStatus,pluginURL:hb.pluginURL},function(ub,Rb){if(b.triggerPluginCompletionEvent(ub),
Rb&&Rb.every(function(dc){return dc}))for(var Yb in Za.sourceCaches)Za.sourceCaches[Yb].reload()})});this.on("data",function(hb){if("source"===hb.dataType&&"metadata"===hb.sourceDataType&&(hb=Ga.sourceCaches[hb.sourceId])&&(hb=hb.getSource())&&hb.vectorLayerIds)for(var ub in Ga._layers){var Rb=Ga._layers[ub];Rb.source===hb.id&&Ga._validateLayer(Rb)}})}return Z&&(fa.__proto__=Z),(fa.prototype=Object.create(Z&&Z.prototype)).constructor=fa,fa.prototype.loadURL=function(da,ta){var Ga=this;void 0===ta&&
(ta={});this.fire(new b.Event("dataloading",{dataType:"style"}));var Za="boolean"==typeof ta.validate?ta.validate:!b.isMapboxURL(da);da=this.map._requestManager.normalizeStyleURL(da,ta.accessToken);da=this.map._requestManager.transformRequest(da,b.ResourceType.Style);this._request=b.getJSON(da,function(hb,ub){Ga._request=null;hb?Ga.fire(new b.ErrorEvent(hb)):ub&&Ga._load(ub,Za)})},fa.prototype.loadJSON=function(da,ta){var Ga=this;void 0===ta&&(ta={});this.fire(new b.Event("dataloading",{dataType:"style"}));
this._request=b.browser.frame(function(){Ga._request=null;Ga._load(da,!1!==ta.validate)})},fa.prototype.loadEmpty=function(){this.fire(new b.Event("dataloading",{dataType:"style"}));this._load(Od,!1)},fa.prototype._load=function(da,ta){if(!ta||!Dc(this,b.validateStyle(da))){for(var Ga in this._loaded=!0,this.stylesheet=da,da.sources)this.addSource(Ga,da.sources[Ga],{validate:!1});da.sprite?this._loadSprite(da.sprite):this.imageManager.setLoaded(!0);this.glyphManager.setURL(da.glyphs);da=y(this.stylesheet.layers);
this._order=da.map(function(Za){return Za.id});this._layers={};this._serializedLayers={};for(ta=0;ta<da.length;ta+=1)Ga=da[ta],(Ga=b.createStyleLayer(Ga)).setEventedParent(this,{layer:{id:Ga.id}}),this._layers[Ga.id]=Ga,this._serializedLayers[Ga.id]=Ga.serialize();this.dispatcher.broadcast("setLayers",this._serializeLayers(this._order));this.light=new nb(this.stylesheet.light);this.fire(new b.Event("data",{dataType:"style"}));this.fire(new b.Event("style.load"))}},fa.prototype._loadSprite=function(da){var ta=
this;this._spriteRequest=function(Ga,Za,hb){function ub(){if(dc)hb(dc);else if(Rb&&Yb){var Xb=b.browser.getImageData(Yb),fc={},Cc;for(Cc in Rb){var bd=Rb[Cc],nd=bd.width,Nc=bd.height,vd=bd.x,Ad=bd.y,le=bd.sdf,Ud=bd.pixelRatio,Sd=bd.stretchX,fe=bd.stretchY;bd=bd.content;var ue=new b.RGBAImage({width:nd,height:Nc});b.RGBAImage.copy(Xb,ue,{x:vd,y:Ad},{x:0,y:0},{width:nd,height:Nc});fc[Cc]={data:ue,pixelRatio:Ud,sdf:le,stretchX:Sd,stretchY:fe,content:bd}}hb(null,fc)}}var Rb,Yb,dc,Ac=1<b.browser.devicePixelRatio?
"@2x":"",Ec=b.getJSON(Za.transformRequest(Za.normalizeSpriteURL(Ga,Ac,".json"),b.ResourceType.SpriteJSON),function(Xb,fc){Ec=null;dc||(dc=Xb,Rb=fc,ub())}),uc=b.getImage(Za.transformRequest(Za.normalizeSpriteURL(Ga,Ac,".png"),b.ResourceType.SpriteImage),function(Xb,fc){uc=null;dc||(dc=Xb,Yb=fc,ub())});return{cancel:function(){Ec&&(Ec.cancel(),Ec=null);uc&&(uc.cancel(),uc=null)}}}(da,this.map._requestManager,function(Ga,Za){if(ta._spriteRequest=null,Ga)ta.fire(new b.ErrorEvent(Ga));else if(Za)for(var hb in Za)ta.imageManager.addImage(hb,
Za[hb]);ta.imageManager.setLoaded(!0);ta._availableImages=ta.imageManager.listImages();ta.dispatcher.broadcast("setImages",ta._availableImages);ta.fire(new b.Event("data",{dataType:"style"}))})},fa.prototype._validateLayer=function(da){var ta=this.sourceCaches[da.source];if(ta){var Ga=da.sourceLayer;Ga&&(ta=ta.getSource(),("geojson"===ta.type||ta.vectorLayerIds&&-1===ta.vectorLayerIds.indexOf(Ga))&&this.fire(new b.ErrorEvent(Error('Source layer "'+Ga+'" does not exist on source "'+ta.id+'" as specified by style layer "'+
da.id+'"'))))}},fa.prototype.loaded=function(){if(!this._loaded||Object.keys(this._updatedSources).length)return!1;for(var da in this.sourceCaches)if(!this.sourceCaches[da].loaded())return!1;return!!this.imageManager.isLoaded()},fa.prototype._serializeLayers=function(da){for(var ta=[],Ga=0;Ga<da.length;Ga+=1){var Za=this._layers[da[Ga]];"custom"!==Za.type&&ta.push(Za.serialize())}return ta},fa.prototype.hasTransitions=function(){if(this.light&&this.light.hasTransition())return!0;for(var da in this.sourceCaches)if(this.sourceCaches[da].hasTransition())return!0;
for(var ta in this._layers)if(this._layers[ta].hasTransition())return!0;return!1},fa.prototype._checkLoaded=function(){if(!this._loaded)throw Error("Style is not done loading");},fa.prototype.update=function(da){if(this._loaded){var ta=this._changed;if(this._changed){var Ga=Object.keys(this._updatedLayers),Za=Object.keys(this._removedLayers);for(Rb in(Ga.length||Za.length)&&this._updateWorkerLayers(Ga,Za),this._updatedSources)Ga=this._updatedSources[Rb],"reload"===Ga?this._reloadSource(Rb):"clear"===
Ga&&this._clearSource(Rb);for(var hb in this._updateTilesForChangedImages(),this._updatedPaintProps)this._layers[hb].updateTransitions(da);this.light.updateTransitions(da);this._resetUpdates()}for(var ub in this.sourceCaches)this.sourceCaches[ub].used=!1;var Rb=0;for(hb=this._order;Rb<hb.length;Rb+=1)ub=this._layers[hb[Rb]],ub.recalculate(da,this._availableImages),!ub.isHidden(da.zoom)&&ub.source&&(this.sourceCaches[ub.source].used=!0);this.light.recalculate(da);this.z=da.zoom;ta&&this.fire(new b.Event("data",
{dataType:"style"}))}},fa.prototype._updateTilesForChangedImages=function(){var da=Object.keys(this._changedImages);if(da.length){for(var ta in this.sourceCaches)this.sourceCaches[ta].reloadTilesForDependencies(["icons","patterns"],da);this._changedImages={}}},fa.prototype._updateWorkerLayers=function(da,ta){this.dispatcher.broadcast("updateLayers",{layers:this._serializeLayers(da),removedIds:ta})},fa.prototype._resetUpdates=function(){this._changed=!1;this._updatedLayers={};this._removedLayers={};
this._updatedSources={};this._updatedPaintProps={};this._changedImages={}},fa.prototype.setState=function(da){var ta=this;if(this._checkLoaded(),Dc(this,b.validateStyle(da)))return!1;(da=b.clone$1(da)).layers=y(da.layers);var Ga=function(hb,ub){if(!hb)return[{command:Ed.setStyle,args:[ub]}];var Rb=[];try{if(!b.deepEqual(hb.version,ub.version))return[{command:Ed.setStyle,args:[ub]}];b.deepEqual(hb.center,ub.center)||Rb.push({command:Ed.setCenter,args:[ub.center]});b.deepEqual(hb.zoom,ub.zoom)||Rb.push({command:Ed.setZoom,
args:[ub.zoom]});b.deepEqual(hb.bearing,ub.bearing)||Rb.push({command:Ed.setBearing,args:[ub.bearing]});b.deepEqual(hb.pitch,ub.pitch)||Rb.push({command:Ed.setPitch,args:[ub.pitch]});b.deepEqual(hb.sprite,ub.sprite)||Rb.push({command:Ed.setSprite,args:[ub.sprite]});b.deepEqual(hb.glyphs,ub.glyphs)||Rb.push({command:Ed.setGlyphs,args:[ub.glyphs]});b.deepEqual(hb.transition,ub.transition)||Rb.push({command:Ed.setTransition,args:[ub.transition]});b.deepEqual(hb.light,ub.light)||Rb.push({command:Ed.setLight,
args:[ub.light]});var Yb={},dc=[];!function(Ec,uc,Xb,fc){for(var Cc in uc=uc||{},Ec=Ec||{})if(Ec.hasOwnProperty(Cc)&&!uc.hasOwnProperty(Cc)){var bd=Cc,nd=fc;Xb.push({command:Ed.removeSource,args:[bd]});nd[bd]=!0}for(Cc in uc)if(uc.hasOwnProperty(Cc))if(Ec.hasOwnProperty(Cc)){if(!b.deepEqual(Ec[Cc],uc[Cc])){if(bd="geojson"===Ec[Cc].type&&"geojson"===uc[Cc].type)a:{bd=void 0;nd=Ec;var Nc=uc,vd=Cc;for(bd in nd[vd])if(nd[vd].hasOwnProperty(bd)&&"data"!==bd&&!b.deepEqual(nd[vd][bd],Nc[vd][bd])){bd=!1;
break a}for(bd in Nc[vd])if(Nc[vd].hasOwnProperty(bd)&&"data"!==bd&&!b.deepEqual(nd[vd][bd],Nc[vd][bd])){bd=!1;break a}bd=!0}if(bd)Xb.push({command:Ed.setGeoJSONSourceData,args:[Cc,uc[Cc].data]});else{bd=Cc;nd=uc;Nc=Xb;vd=bd;var Ad=fc;Nc.push({command:Ed.removeSource,args:[vd]});Ad[vd]=!0;Nc.push({command:Ed.addSource,args:[bd,nd[bd]]})}}}else Xb.push({command:Ed.addSource,args:[Cc,uc[Cc]]})}(hb.sources,ub.sources,dc,Yb);var Ac=[];hb.layers&&hb.layers.forEach(function(Ec){Yb[Ec.source]?Rb.push({command:Ed.removeLayer,
args:[Ec.id]}):Ac.push(Ec)});Rb=Rb.concat(dc);(function(Ec,uc,Xb){uc=uc||[];var fc,Cc,bd,nd,Nc;var vd=(Ec=Ec||[]).map(z);var Ad=uc.map(z);Ec=Ec.reduce(F,{});var le=uc.reduce(F,{}),Ud=vd.slice(),Sd=Object.create(null);for(fc=uc=0;uc<vd.length;uc++)le.hasOwnProperty(Cc=vd[uc])?fc++:(Xb.push({command:Ed.removeLayer,args:[Cc]}),Ud.splice(Ud.indexOf(Cc,fc),1));for(fc=uc=0;uc<Ad.length;uc++)Ud[Ud.length-1-uc]!==(Cc=Ad[Ad.length-1-uc])&&(Ec.hasOwnProperty(Cc)?(Xb.push({command:Ed.removeLayer,args:[Cc]}),
Ud.splice(Ud.lastIndexOf(Cc,Ud.length-fc),1)):fc++,Xb.push({command:Ed.addLayer,args:[le[Cc],Ud[Ud.length-uc]]}),Ud.splice(Ud.length-uc,0,Cc),Sd[Cc]=!0);for(uc=0;uc<Ad.length;uc++)if(bd=Ec[Cc=Ad[uc]],nd=le[Cc],!Sd[Cc]&&!b.deepEqual(bd,nd))if(b.deepEqual(bd.source,nd.source)&&b.deepEqual(bd["source-layer"],nd["source-layer"])&&b.deepEqual(bd.type,nd.type)){for(Nc in A(bd.layout,nd.layout,Xb,Cc,null,Ed.setLayoutProperty),A(bd.paint,nd.paint,Xb,Cc,null,Ed.setPaintProperty),b.deepEqual(bd.filter,nd.filter)||
Xb.push({command:Ed.setFilter,args:[Cc,nd.filter]}),b.deepEqual(bd.minzoom,nd.minzoom)&&b.deepEqual(bd.maxzoom,nd.maxzoom)||Xb.push({command:Ed.setLayerZoomRange,args:[Cc,nd.minzoom,nd.maxzoom]}),bd)bd.hasOwnProperty(Nc)&&"layout"!==Nc&&"paint"!==Nc&&"filter"!==Nc&&"metadata"!==Nc&&"minzoom"!==Nc&&"maxzoom"!==Nc&&(0===Nc.indexOf("paint.")?A(bd[Nc],nd[Nc],Xb,Cc,Nc.slice(6),Ed.setPaintProperty):b.deepEqual(bd[Nc],nd[Nc])||Xb.push({command:Ed.setLayerProperty,args:[Cc,Nc,nd[Nc]]}));for(Nc in nd)nd.hasOwnProperty(Nc)&&
!bd.hasOwnProperty(Nc)&&"layout"!==Nc&&"paint"!==Nc&&"filter"!==Nc&&"metadata"!==Nc&&"minzoom"!==Nc&&"maxzoom"!==Nc&&(0===Nc.indexOf("paint.")?A(bd[Nc],nd[Nc],Xb,Cc,Nc.slice(6),Ed.setPaintProperty):b.deepEqual(bd[Nc],nd[Nc])||Xb.push({command:Ed.setLayerProperty,args:[Cc,Nc,nd[Nc]]}))}else Xb.push({command:Ed.removeLayer,args:[Cc]}),vd=Ud[Ud.lastIndexOf(Cc)+1],Xb.push({command:Ed.addLayer,args:[nd,vd]})})(Ac,ub.layers,Rb)}catch(Ec){console.warn("Unable to compute style diff:",Ec),Rb=[{command:Ed.setStyle,
args:[ub]}]}return Rb}(this.serialize(),da).filter(function(hb){return!(hb.command in ud)});if(0===Ga.length)return!1;var Za=Ga.filter(function(hb){return!(hb.command in Gc)});if(0<Za.length)throw Error("Unimplemented: "+Za.map(function(hb){return hb.command}).join(", ")+".");return Ga.forEach(function(hb){"setTransition"!==hb.command&&ta[hb.command].apply(ta,hb.args)}),this.stylesheet=da,!0},fa.prototype.addImage=function(da,ta){if(this.getImage(da))return this.fire(new b.ErrorEvent(Error("An image with this name already exists.")));
this.imageManager.addImage(da,ta);this._availableImages=this.imageManager.listImages();this._changed=this._changedImages[da]=!0;this.fire(new b.Event("data",{dataType:"style"}))},fa.prototype.updateImage=function(da,ta){this.imageManager.updateImage(da,ta)},fa.prototype.getImage=function(da){return this.imageManager.getImage(da)},fa.prototype.removeImage=function(da){if(!this.getImage(da))return this.fire(new b.ErrorEvent(Error("No image with this name exists.")));this.imageManager.removeImage(da);
this._availableImages=this.imageManager.listImages();this._changed=this._changedImages[da]=!0;this.fire(new b.Event("data",{dataType:"style"}))},fa.prototype.listImages=function(){return this._checkLoaded(),this.imageManager.listImages()},fa.prototype.addSource=function(da,ta,Ga){var Za=this;if(void 0===Ga&&(Ga={}),this._checkLoaded(),void 0!==this.sourceCaches[da])throw Error("There is already a source with this ID");if(!ta.type)throw Error("The type property must be defined, but the only the following properties were given: "+
Object.keys(ta).join(", ")+".");if(!(0<=["vector","raster","geojson","video","image"].indexOf(ta.type)&&this._validate(b.validateStyle.source,"sources."+da,ta,null,Ga))){this.map&&this.map._collectResourceTiming&&(ta.collectResourceTiming=!0);var hb=this.sourceCaches[da]=new ff(da,ta,this.dispatcher);hb.style=this;hb.setEventedParent(this,function(){return{isSourceLoaded:Za.loaded(),source:hb.serialize(),sourceId:da}});hb.onAdd(this.map);this._changed=!0}},fa.prototype.removeSource=function(da){if(this._checkLoaded(),
void 0===this.sourceCaches[da])throw Error("There is no source with this ID");for(var ta in this._layers)if(this._layers[ta].source===da)return this.fire(new b.ErrorEvent(Error('Source "'+da+'" cannot be removed while layer "'+ta+'" is using it.')));ta=this.sourceCaches[da];delete this.sourceCaches[da];delete this._updatedSources[da];ta.fire(new b.Event("data",{sourceDataType:"metadata",dataType:"source",sourceId:da}));ta.setEventedParent(null);ta.clearTiles();ta.onRemove&&ta.onRemove(this.map);this._changed=
!0},fa.prototype.setGeoJSONSourceData=function(da,ta){this._checkLoaded();this.sourceCaches[da].getSource().setData(ta);this._changed=!0},fa.prototype.getSource=function(da){return this.sourceCaches[da]&&this.sourceCaches[da].getSource()},fa.prototype.addLayer=function(da,ta,Ga){void 0===Ga&&(Ga={});this._checkLoaded();var Za=da.id;if(this.getLayer(Za))this.fire(new b.ErrorEvent(Error('Layer with id "'+Za+'" already exists on this map')));else{if("custom"===da.type){if(Dc(this,b.validateCustomStyleLayer(da)))return;
da=b.createStyleLayer(da)}else{if("object"==typeof da.source&&(this.addSource(Za,da.source),da=b.clone$1(da),da=b.extend(da,{source:Za})),this._validate(b.validateStyle.layer,"layers."+Za,da,{arrayIndex:-1},Ga))return;da=b.createStyleLayer(da);this._validateLayer(da);da.setEventedParent(this,{layer:{id:Za}});this._serializedLayers[da.id]=da.serialize()}Ga=ta?this._order.indexOf(ta):this._order.length;if(ta&&-1===Ga)this.fire(new b.ErrorEvent(Error('Layer with id "'+ta+'" does not exist on this map.')));
else{if(this._order.splice(Ga,0,Za),this._layerOrderChanged=!0,this._layers[Za]=da,this._removedLayers[Za]&&da.source&&"custom"!==da.type)ta=this._removedLayers[Za],delete this._removedLayers[Za],ta.type!==da.type?this._updatedSources[da.source]="clear":(this._updatedSources[da.source]="reload",this.sourceCaches[da.source].pause());this._updateLayer(da);da.onAdd&&da.onAdd(this.map)}}},fa.prototype.moveLayer=function(da,ta){if(this._checkLoaded(),this._changed=!0,this._layers[da]){if(da!==ta){var Ga=
this._order.indexOf(da);this._order.splice(Ga,1);Ga=ta?this._order.indexOf(ta):this._order.length;ta&&-1===Ga?this.fire(new b.ErrorEvent(Error('Layer with id "'+ta+'" does not exist on this map.'))):(this._order.splice(Ga,0,da),this._layerOrderChanged=!0)}}else this.fire(new b.ErrorEvent(Error("The layer '"+da+"' does not exist in the map's style and cannot be moved.")))},fa.prototype.removeLayer=function(da){this._checkLoaded();var ta=this._layers[da];if(ta){ta.setEventedParent(null);var Ga=this._order.indexOf(da);
this._order.splice(Ga,1);this._changed=this._layerOrderChanged=!0;this._removedLayers[da]=ta;delete this._layers[da];delete this._serializedLayers[da];delete this._updatedLayers[da];delete this._updatedPaintProps[da];ta.onRemove&&ta.onRemove(this.map)}else this.fire(new b.ErrorEvent(Error("The layer '"+da+"' does not exist in the map's style and cannot be removed.")))},fa.prototype.getLayer=function(da){return this._layers[da]},fa.prototype.hasLayer=function(da){return da in this._layers},fa.prototype.setLayerZoomRange=
function(da,ta,Ga){this._checkLoaded();var Za=this.getLayer(da);Za?Za.minzoom===ta&&Za.maxzoom===Ga||(null!=ta&&(Za.minzoom=ta),null!=Ga&&(Za.maxzoom=Ga),this._updateLayer(Za)):this.fire(new b.ErrorEvent(Error("The layer '"+da+"' does not exist in the map's style and cannot have zoom extent.")))},fa.prototype.setFilter=function(da,ta,Ga){void 0===Ga&&(Ga={});this._checkLoaded();var Za=this.getLayer(da);if(Za){if(!b.deepEqual(Za.filter,ta))return null==ta?(Za.filter=void 0,void this._updateLayer(Za)):
void(this._validate(b.validateStyle.filter,"layers."+Za.id+".filter",ta,null,Ga)||(Za.filter=b.clone$1(ta),this._updateLayer(Za)))}else this.fire(new b.ErrorEvent(Error("The layer '"+da+"' does not exist in the map's style and cannot be filtered.")))},fa.prototype.getFilter=function(da){return b.clone$1(this.getLayer(da).filter)},fa.prototype.setLayoutProperty=function(da,ta,Ga,Za){void 0===Za&&(Za={});this._checkLoaded();var hb=this.getLayer(da);hb?b.deepEqual(hb.getLayoutProperty(ta),Ga)||(hb.setLayoutProperty(ta,
Ga,Za),this._updateLayer(hb)):this.fire(new b.ErrorEvent(Error("The layer '"+da+"' does not exist in the map's style and cannot be styled.")))},fa.prototype.getLayoutProperty=function(da,ta){var Ga=this.getLayer(da);if(Ga)return Ga.getLayoutProperty(ta);this.fire(new b.ErrorEvent(Error("The layer '"+da+"' does not exist in the map's style.")))},fa.prototype.setPaintProperty=function(da,ta,Ga,Za){void 0===Za&&(Za={});this._checkLoaded();var hb=this.getLayer(da);hb?b.deepEqual(hb.getPaintProperty(ta),
Ga)||(hb.setPaintProperty(ta,Ga,Za)&&this._updateLayer(hb),this._changed=!0,this._updatedPaintProps[da]=!0):this.fire(new b.ErrorEvent(Error("The layer '"+da+"' does not exist in the map's style and cannot be styled.")))},fa.prototype.getPaintProperty=function(da,ta){return this.getLayer(da).getPaintProperty(ta)},fa.prototype.setFeatureState=function(da,ta){this._checkLoaded();var Ga=da.source,Za=da.sourceLayer,hb=this.sourceCaches[Ga];void 0!==hb?(Ga=hb.getSource().type,"geojson"===Ga&&Za?this.fire(new b.ErrorEvent(Error("GeoJSON sources cannot have a sourceLayer parameter."))):
"vector"!==Ga||Za?(void 0===da.id&&this.fire(new b.ErrorEvent(Error("The feature id parameter must be provided."))),hb.setFeatureState(Za,da.id,ta)):this.fire(new b.ErrorEvent(Error("The sourceLayer parameter must be provided for vector source types.")))):this.fire(new b.ErrorEvent(Error("The source '"+Ga+"' does not exist in the map's style.")))},fa.prototype.removeFeatureState=function(da,ta){this._checkLoaded();var Ga=da.source,Za=this.sourceCaches[Ga];if(void 0!==Za){Ga=Za.getSource().type;var hb=
"vector"===Ga?da.sourceLayer:void 0;"vector"!==Ga||hb?ta&&"string"!=typeof da.id&&"number"!=typeof da.id?this.fire(new b.ErrorEvent(Error("A feature id is requred to remove its specific state property."))):Za.removeFeatureState(hb,da.id,ta):this.fire(new b.ErrorEvent(Error("The sourceLayer parameter must be provided for vector source types.")))}else this.fire(new b.ErrorEvent(Error("The source '"+Ga+"' does not exist in the map's style.")))},fa.prototype.getFeatureState=function(da){this._checkLoaded();
var ta=da.source,Ga=da.sourceLayer,Za=this.sourceCaches[ta];if(void 0!==Za){if("vector"!==Za.getSource().type||Ga)return void 0===da.id&&this.fire(new b.ErrorEvent(Error("The feature id parameter must be provided."))),Za.getFeatureState(Ga,da.id);this.fire(new b.ErrorEvent(Error("The sourceLayer parameter must be provided for vector source types.")))}else this.fire(new b.ErrorEvent(Error("The source '"+ta+"' does not exist in the map's style.")))},fa.prototype.getTransition=function(){return b.extend({duration:300,
delay:0},this.stylesheet&&this.stylesheet.transition)},fa.prototype.serialize=function(){return b.filterObject({version:this.stylesheet.version,name:this.stylesheet.name,metadata:this.stylesheet.metadata,light:this.stylesheet.light,center:this.stylesheet.center,zoom:this.stylesheet.zoom,bearing:this.stylesheet.bearing,pitch:this.stylesheet.pitch,sprite:this.stylesheet.sprite,glyphs:this.stylesheet.glyphs,transition:this.stylesheet.transition,sources:b.mapObject(this.sourceCaches,function(da){return da.serialize()}),
layers:this._serializeLayers(this._order)},function(da){return void 0!==da})},fa.prototype._updateLayer=function(da){this._updatedLayers[da.id]=!0;da.source&&!this._updatedSources[da.source]&&"raster"!==this.sourceCaches[da.source].getSource().type&&(this._updatedSources[da.source]="reload",this.sourceCaches[da.source].pause());this._changed=!0},fa.prototype._flattenAndSortRenderedFeatures=function(da){for(var ta={},Ga=[],Za=this._order.length-1;0<=Za;Za--){var hb=this._order[Za];if("fill-extrusion"===
this._layers[hb].type){ta[hb]=Za;for(var ub=0,Rb=da;ub<Rb.length;ub+=1){var Yb=Rb[ub][hb];if(Yb)for(var dc=0;dc<Yb.length;dc+=1)Ga.push(Yb[dc])}}}Ga.sort(function(Ec,uc){return uc.intersectionZ-Ec.intersectionZ});Za=[];for(hb=this._order.length-1;0<=hb;hb--)if(ub=this._order[hb],"fill-extrusion"===this._layers[ub].type)for(ub=Ga.length-1;0<=ub;ub--){Rb=Ga[ub].feature;if(ta[Rb.layer.id]<hb)break;Za.push(Rb);Ga.pop()}else for(Rb=0,dc=da;Rb<dc.length;Rb+=1){var Ac=dc[Rb][ub];if(Ac)for(Yb=0;Yb<Ac.length;Yb+=
1)Za.push(Ac[Yb].feature)}return Za},fa.prototype.queryRenderedFeatures=function(da,ta,Ga){ta&&ta.filter&&this._validate(b.validateStyle.filter,"queryRenderedFeatures.filter",ta.filter,null,ta);var Za={};if(ta&&ta.layers){if(!Array.isArray(ta.layers))return this.fire(new b.ErrorEvent(Error("parameters.layers must be an Array."))),[];for(var hb=0,ub=ta.layers;hb<ub.length;hb+=1){var Rb=ub[hb],Yb=this._layers[Rb];if(!Yb)return this.fire(new b.ErrorEvent(Error("The layer '"+Rb+"' does not exist in the map's style and cannot be queried for features."))),
[];Za[Yb.source]=!0}}hb=[];for(var dc in ta.availableImages=this._availableImages,this.sourceCaches)ta.layers&&!Za[dc]||hb.push(d(this.sourceCaches[dc],this._layers,this._serializedLayers,da,ta,Ga));return this.placement&&hb.push(function(Ac,Ec,uc,Xb,fc,Cc,bd){var nd={},Nc=Cc.queryRenderedSymbols(Xb);Xb=[];Cc=0;for(var vd=Object.keys(Nc).map(Number);Cc<vd.length;Cc+=1)Xb.push(bd[vd[Cc]]);Xb.sort(p);bd=function(){var Sd=le[Ad],fe=Sd.featureIndex.lookupSymbolFeatures(Nc[Sd.bucketInstanceId],Ec,Sd.bucketIndex,
Sd.sourceLayerIndex,fc.filter,fc.layers,fc.availableImages,Ac),ue;for(ue in fe){var Ee=nd[ue]=nd[ue]||[],Re=fe[ue];Re.sort(function(he,ef){var mf=Sd.featureSortOrder;return mf?(he=mf.indexOf(he.featureIndex),mf.indexOf(ef.featureIndex)-he):ef.featureIndex-he.featureIndex});for(var lf=0;lf<Re.length;lf+=1)Ee.push(Re[lf])}};for(var Ad=0,le=Xb;Ad<le.length;Ad+=1)bd();bd=function(Sd){nd[Sd].forEach(function(fe){fe=fe.feature;var ue=uc[Ac[Sd].source].getFeatureState(fe.layer["source-layer"],fe.id);fe.source=
fe.layer.source;fe.layer["source-layer"]&&(fe.sourceLayer=fe.layer["source-layer"]);fe.state=ue})};for(var Ud in nd)bd(Ud);return nd}(this._layers,this._serializedLayers,this.sourceCaches,da,ta,this.placement.collisionIndex,this.placement.retainedQueryData)),this._flattenAndSortRenderedFeatures(hb)},fa.prototype.querySourceFeatures=function(da,ta){ta&&ta.filter&&this._validate(b.validateStyle.filter,"querySourceFeatures.filter",ta.filter,null,ta);return(da=this.sourceCaches[da])?function(Ga,Za){for(var hb=
Ga.getRenderableIds().map(function(Ec){return Ga.getTileByID(Ec)}),ub=[],Rb={},Yb=0;Yb<hb.length;Yb++){var dc=hb[Yb],Ac=dc.tileID.canonical.key;Rb[Ac]||(Rb[Ac]=!0,dc.querySourceFeatures(ub,Za))}return ub}(da,ta):[]},fa.prototype.addSourceType=function(da,ta,Ga){return fa.getSourceType(da)?Ga(Error('A source type called "'+da+'" already exists.')):(fa.setSourceType(da,ta),ta.workerSourceURL?void this.dispatcher.broadcast("loadWorkerSource",{name:da,url:ta.workerSourceURL},Ga):Ga(null,null))},fa.prototype.getLight=
function(){return this.light.getLight()},fa.prototype.setLight=function(da,ta){void 0===ta&&(ta={});this._checkLoaded();var Ga=this.light.getLight(),Za=!1,hb;for(hb in da)if(!b.deepEqual(da[hb],Ga[hb])){Za=!0;break}Za&&(Ga={now:b.browser.now(),transition:b.extend({duration:300,delay:0},this.stylesheet.transition)},this.light.setLight(da,ta),this.light.updateTransitions(Ga))},fa.prototype._validate=function(da,ta,Ga,Za,hb){return void 0===hb&&(hb={}),(!hb||!1!==hb.validate)&&Dc(this,da.call(b.validateStyle,
b.extend({key:ta,style:this.serialize(),value:Ga,styleSpec:b.styleSpec},Za)))},fa.prototype._remove=function(){for(var da in this._request&&(this._request.cancel(),this._request=null),this._spriteRequest&&(this._spriteRequest.cancel(),this._spriteRequest=null),b.evented.off("pluginStateChange",this._rtlTextPluginCallback),this._layers)this._layers[da].setEventedParent(null);for(var ta in this.sourceCaches)this.sourceCaches[ta].clearTiles(),this.sourceCaches[ta].setEventedParent(null);this.imageManager.setEventedParent(null);
this.setEventedParent(null);this.dispatcher.remove()},fa.prototype._clearSource=function(da){this.sourceCaches[da].clearTiles()},fa.prototype._reloadSource=function(da){this.sourceCaches[da].resume();this.sourceCaches[da].reload()},fa.prototype._updateSources=function(da){for(var ta in this.sourceCaches)this.sourceCaches[ta].update(da)},fa.prototype._generateCollisionBoxes=function(){for(var da in this.sourceCaches)this._reloadSource(da)},fa.prototype._updatePlacement=function(da,ta,Ga,Za,hb){void 0===
hb&&(hb=!1);for(var ub=!1,Rb=!1,Yb={},dc=0,Ac=this._order;dc<Ac.length;dc+=1){var Ec=this._layers[Ac[dc]];if("symbol"===Ec.type){if(!Yb[Ec.source]){var uc=this.sourceCaches[Ec.source];Yb[Ec.source]=uc.getRenderableIds(!0).map(function(Xb){return uc.getTileByID(Xb)}).sort(function(Xb,fc){return fc.tileID.overscaledZ-Xb.tileID.overscaledZ||(Xb.tileID.isLessThan(fc.tileID)?-1:1)})}Ec=this.crossTileSymbolIndex.addLayer(Ec,Yb[Ec.source],da.center.lng);ub=ub||Ec}}if(this.crossTileSymbolIndex.pruneUnusedLayers(this._order),
((hb=hb||this._layerOrderChanged||0===Ga)||!this.pauseablePlacement||this.pauseablePlacement.isDone()&&!this.placement.stillRecent(b.browser.now(),da.zoom))&&(this.pauseablePlacement=new ld(da,this._order,hb,ta,Ga,Za,this.placement),this._layerOrderChanged=!1),this.pauseablePlacement.isDone()?this.placement.setStale():(this.pauseablePlacement.continuePlacement(this._order,this._layers,Yb),this.pauseablePlacement.isDone()&&(this.placement=this.pauseablePlacement.commit(b.browser.now()),Rb=!0),ub&&
this.pauseablePlacement.placement.setStale()),Rb||ub)for(da=0,ta=this._order;da<ta.length;da+=1)Ga=this._layers[ta[da]],"symbol"===Ga.type&&this.placement.updateLayerOpacities(Ga,Yb[Ga.source]);return!this.pauseablePlacement.isDone()||this.placement.hasTransitions(b.browser.now())},fa.prototype._releaseSymbolFadeTiles=function(){for(var da in this.sourceCaches)this.sourceCaches[da].releaseSymbolFadeTiles()},fa.prototype.getImages=function(da,ta,Ga){this.imageManager.getImages(ta.icons,Ga);this._updateTilesForChangedImages();
(da=this.sourceCaches[ta.source])&&da.setDependencies(ta.tileID.key,ta.type,ta.icons)},fa.prototype.getGlyphs=function(da,ta,Ga){this.glyphManager.getGlyphs(ta.stacks,Ga)},fa.prototype.getResource=function(da,ta,Ga){return b.makeRequest(ta,Ga)},fa}(b.Evented);Gd.getSourceType=function(Z){return qc[Z]};Gd.setSourceType=function(Z,fa){qc[Z]=fa};Gd.registerForPluginStateChange=b.registerForPluginStateChange;var $d=b.createLayout([{name:"a_pos",type:"Int16",components:2}]),zd=ba("#ifdef GL_ES\nprecision mediump float;\n#else\n#if !defined(lowp)\n#define lowp\n#endif\n#if !defined(mediump)\n#define mediump\n#endif\n#if !defined(highp)\n#define highp\n#endif\n#endif",
"#ifdef GL_ES\nprecision highp float;\n#else\n#if !defined(lowp)\n#define lowp\n#endif\n#if !defined(mediump)\n#define mediump\n#endif\n#if !defined(highp)\n#define highp\n#endif\n#endif\nvec2 unpack_float(const float packedValue) {int packedIntValue\x3dint(packedValue);int v0\x3dpackedIntValue/256;return vec2(v0,packedIntValue-v0*256);}vec2 unpack_opacity(const float packedOpacity) {int intOpacity\x3dint(packedOpacity)/2;return vec2(float(intOpacity)/127.0,mod(packedOpacity,2.0));}vec4 decode_color(const vec2 encodedColor) {return vec4(unpack_float(encodedColor[0])/255.0,unpack_float(encodedColor[1])/255.0\n);}float unpack_mix_vec2(const vec2 packedValue,const float t) {return mix(packedValue[0],packedValue[1],t);}vec4 unpack_mix_color(const vec4 packedColors,const float t) {vec4 minColor\x3ddecode_color(vec2(packedColors[0],packedColors[1]));vec4 maxColor\x3ddecode_color(vec2(packedColors[2],packedColors[3]));return mix(minColor,maxColor,t);}vec2 get_pattern_pos(const vec2 pixel_coord_upper,const vec2 pixel_coord_lower,const vec2 pattern_size,const float tile_units_to_pixels,const vec2 pos) {vec2 offset\x3dmod(mod(mod(pixel_coord_upper,pattern_size)*256.0,pattern_size)*256.0+pixel_coord_lower,pattern_size);return (tile_units_to_pixels*pos+offset)/pattern_size;}"),
Le=ba("uniform vec4 u_color;uniform float u_opacity;void main() {gl_FragColor\x3du_color*u_opacity;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor\x3dvec4(1.0);\n#endif\n}","attribute vec2 a_pos;uniform mat4 u_matrix;void main() {gl_Position\x3du_matrix*vec4(a_pos,0,1);}"),Xe=ba("uniform vec2 u_pattern_tl_a;uniform vec2 u_pattern_br_a;uniform vec2 u_pattern_tl_b;uniform vec2 u_pattern_br_b;uniform vec2 u_texsize;uniform float u_mix;uniform float u_opacity;uniform sampler2D u_image;varying vec2 v_pos_a;varying vec2 v_pos_b;void main() {vec2 imagecoord\x3dmod(v_pos_a,1.0);vec2 pos\x3dmix(u_pattern_tl_a/u_texsize,u_pattern_br_a/u_texsize,imagecoord);vec4 color1\x3dtexture2D(u_image,pos);vec2 imagecoord_b\x3dmod(v_pos_b,1.0);vec2 pos2\x3dmix(u_pattern_tl_b/u_texsize,u_pattern_br_b/u_texsize,imagecoord_b);vec4 color2\x3dtexture2D(u_image,pos2);gl_FragColor\x3dmix(color1,color2,u_mix)*u_opacity;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor\x3dvec4(1.0);\n#endif\n}",
"uniform mat4 u_matrix;uniform vec2 u_pattern_size_a;uniform vec2 u_pattern_size_b;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform float u_scale_a;uniform float u_scale_b;uniform float u_tile_units_to_pixels;attribute vec2 a_pos;varying vec2 v_pos_a;varying vec2 v_pos_b;void main() {gl_Position\x3du_matrix*vec4(a_pos,0,1);v_pos_a\x3dget_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,u_scale_a*u_pattern_size_a,u_tile_units_to_pixels,a_pos);v_pos_b\x3dget_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,u_scale_b*u_pattern_size_b,u_tile_units_to_pixels,a_pos);}"),
gf=ba("varying vec3 v_data;\n#pragma mapbox: define highp vec4 color\n#pragma mapbox: define mediump float radius\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define highp vec4 stroke_color\n#pragma mapbox: define mediump float stroke_width\n#pragma mapbox: define lowp float stroke_opacity\nvoid main() {\n#pragma mapbox: initialize highp vec4 color\n#pragma mapbox: initialize mediump float radius\n#pragma mapbox: initialize lowp float blur\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize highp vec4 stroke_color\n#pragma mapbox: initialize mediump float stroke_width\n#pragma mapbox: initialize lowp float stroke_opacity\nvec2 extrude\x3dv_data.xy;float extrude_length\x3dlength(extrude);lowp float antialiasblur\x3dv_data.z;float antialiased_blur\x3d-max(blur,antialiasblur);float opacity_t\x3dsmoothstep(0.0,antialiased_blur,extrude_length-1.0);float color_t\x3dstroke_width \x3c 0.01 ? 0.0 : smoothstep(antialiased_blur,0.0,extrude_length-radius/(radius+stroke_width));gl_FragColor\x3dopacity_t*mix(color*opacity,stroke_color*stroke_opacity,color_t);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor\x3dvec4(1.0);\n#endif\n}",
"uniform mat4 u_matrix;uniform bool u_scale_with_map;uniform bool u_pitch_with_map;uniform vec2 u_extrude_scale;uniform lowp float u_device_pixel_ratio;uniform highp float u_camera_to_center_distance;attribute vec2 a_pos;varying vec3 v_data;\n#pragma mapbox: define highp vec4 color\n#pragma mapbox: define mediump float radius\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define highp vec4 stroke_color\n#pragma mapbox: define mediump float stroke_width\n#pragma mapbox: define lowp float stroke_opacity\nvoid main(void) {\n#pragma mapbox: initialize highp vec4 color\n#pragma mapbox: initialize mediump float radius\n#pragma mapbox: initialize lowp float blur\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize highp vec4 stroke_color\n#pragma mapbox: initialize mediump float stroke_width\n#pragma mapbox: initialize lowp float stroke_opacity\nvec2 extrude\x3dvec2(mod(a_pos,2.0)*2.0-1.0);vec2 circle_center\x3dfloor(a_pos*0.5);if (u_pitch_with_map) {vec2 corner_position\x3dcircle_center;if (u_scale_with_map) {corner_position+\x3dextrude*(radius+stroke_width)*u_extrude_scale;} else {vec4 projected_center\x3du_matrix*vec4(circle_center,0,1);corner_position+\x3dextrude*(radius+stroke_width)*u_extrude_scale*(projected_center.w/u_camera_to_center_distance);}gl_Position\x3du_matrix*vec4(corner_position,0,1);} else {gl_Position\x3du_matrix*vec4(circle_center,0,1);if (u_scale_with_map) {gl_Position.xy+\x3dextrude*(radius+stroke_width)*u_extrude_scale*u_camera_to_center_distance;} else {gl_Position.xy+\x3dextrude*(radius+stroke_width)*u_extrude_scale*gl_Position.w;}}lowp float antialiasblur\x3d1.0/u_device_pixel_ratio/(radius+stroke_width);v_data\x3dvec3(extrude.x,extrude.y,antialiasblur);}"),
Me=ba("void main() {gl_FragColor\x3dvec4(1.0);}","attribute vec2 a_pos;uniform mat4 u_matrix;void main() {gl_Position\x3du_matrix*vec4(a_pos,0,1);}"),hf=ba("uniform highp float u_intensity;varying vec2 v_extrude;\n#pragma mapbox: define highp float weight\n#define GAUSS_COEF 0.3989422804014327\nvoid main() {\n#pragma mapbox: initialize highp float weight\nfloat d\x3d-0.5*3.0*3.0*dot(v_extrude,v_extrude);float val\x3dweight*u_intensity*GAUSS_COEF*exp(d);gl_FragColor\x3dvec4(val,1.0,1.0,1.0);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor\x3dvec4(1.0);\n#endif\n}",
"uniform mat4 u_matrix;uniform float u_extrude_scale;uniform float u_opacity;uniform float u_intensity;attribute vec2 a_pos;varying vec2 v_extrude;\n#pragma mapbox: define highp float weight\n#pragma mapbox: define mediump float radius\nconst highp float ZERO\x3d1.0/255.0/16.0;\n#define GAUSS_COEF 0.3989422804014327\nvoid main(void) {\n#pragma mapbox: initialize highp float weight\n#pragma mapbox: initialize mediump float radius\nvec2 unscaled_extrude\x3dvec2(mod(a_pos,2.0)*2.0-1.0);float S\x3dsqrt(-2.0*log(ZERO/weight/u_intensity/GAUSS_COEF))/3.0;v_extrude\x3dS*unscaled_extrude;vec2 extrude\x3dv_extrude*radius*u_extrude_scale;vec4 pos\x3dvec4(floor(a_pos*0.5)+extrude,0,1);gl_Position\x3du_matrix*pos;}"),
Uf=ba("uniform sampler2D u_image;uniform sampler2D u_color_ramp;uniform float u_opacity;varying vec2 v_pos;void main() {float t\x3dtexture2D(u_image,v_pos).r;vec4 color\x3dtexture2D(u_color_ramp,vec2(t,0.5));gl_FragColor\x3dcolor*u_opacity;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor\x3dvec4(0.0);\n#endif\n}","uniform mat4 u_matrix;uniform vec2 u_world;attribute vec2 a_pos;varying vec2 v_pos;void main() {gl_Position\x3du_matrix*vec4(a_pos*u_world,0,1);v_pos.x\x3da_pos.x;v_pos.y\x3d1.0-a_pos.y;}"),eh=
ba("varying float v_placed;varying float v_notUsed;void main() {float alpha\x3d0.5;gl_FragColor\x3dvec4(1.0,0.0,0.0,1.0)*alpha;if (v_placed \x3e 0.5) {gl_FragColor\x3dvec4(0.0,0.0,1.0,0.5)*alpha;}if (v_notUsed \x3e 0.5) {gl_FragColor*\x3d.1;}}","attribute vec2 a_pos;attribute vec2 a_anchor_pos;attribute vec2 a_extrude;attribute vec2 a_placed;attribute vec2 a_shift;uniform mat4 u_matrix;uniform vec2 u_extrude_scale;uniform float u_camera_to_center_distance;varying float v_placed;varying float v_notUsed;void main() {vec4 projectedPoint\x3du_matrix*vec4(a_anchor_pos,0,1);highp float camera_to_anchor_distance\x3dprojectedPoint.w;highp float collision_perspective_ratio\x3dclamp(0.5+0.5*(u_camera_to_center_distance/camera_to_anchor_distance),0.0,4.0);gl_Position\x3du_matrix*vec4(a_pos,0.0,1.0);gl_Position.xy+\x3d(a_extrude+a_shift)*u_extrude_scale*gl_Position.w*collision_perspective_ratio;v_placed\x3da_placed.x;v_notUsed\x3da_placed.y;}"),
Fg=ba("varying float v_radius;varying vec2 v_extrude;varying float v_perspective_ratio;varying float v_collision;void main() {float alpha\x3d0.5*min(v_perspective_ratio,1.0);float stroke_radius\x3d0.9*max(v_perspective_ratio,1.0);float distance_to_center\x3dlength(v_extrude);float distance_to_edge\x3dabs(distance_to_center-v_radius);float opacity_t\x3dsmoothstep(-stroke_radius,0.0,-distance_to_edge);vec4 color\x3dmix(vec4(0.0,0.0,1.0,0.5),vec4(1.0,0.0,0.0,1.0),v_collision);gl_FragColor\x3dcolor*alpha*opacity_t;}",
"attribute vec2 a_pos;attribute float a_radius;attribute vec2 a_flags;uniform mat4 u_matrix;uniform mat4 u_inv_matrix;uniform vec2 u_viewport_size;uniform float u_camera_to_center_distance;varying float v_radius;varying vec2 v_extrude;varying float v_perspective_ratio;varying float v_collision;vec3 toTilePosition(vec2 screenPos) {vec4 rayStart\x3du_inv_matrix*vec4(screenPos,-1.0,1.0);vec4 rayEnd  \x3du_inv_matrix*vec4(screenPos, 1.0,1.0);rayStart.xyz/\x3drayStart.w;rayEnd.xyz  /\x3drayEnd.w;highp float t\x3d(0.0-rayStart.z)/(rayEnd.z-rayStart.z);return mix(rayStart.xyz,rayEnd.xyz,t);}void main() {vec2 quadCenterPos\x3da_pos;float radius\x3da_radius;float collision\x3da_flags.x;float vertexIdx\x3da_flags.y;vec2 quadVertexOffset\x3dvec2(mix(-1.0,1.0,float(vertexIdx \x3e\x3d2.0)),mix(-1.0,1.0,float(vertexIdx \x3e\x3d1.0 \x26\x26 vertexIdx \x3c\x3d2.0)));vec2 quadVertexExtent\x3dquadVertexOffset*radius;vec3 tilePos\x3dtoTilePosition(quadCenterPos);vec4 clipPos\x3du_matrix*vec4(tilePos,1.0);highp float camera_to_anchor_distance\x3dclipPos.w;highp float collision_perspective_ratio\x3dclamp(0.5+0.5*(u_camera_to_center_distance/camera_to_anchor_distance),0.0,4.0);float padding_factor\x3d1.2;v_radius\x3dradius;v_extrude\x3dquadVertexExtent*padding_factor;v_perspective_ratio\x3dcollision_perspective_ratio;v_collision\x3dcollision;gl_Position\x3dvec4(clipPos.xyz/clipPos.w,1.0)+vec4(quadVertexExtent*padding_factor/u_viewport_size*2.0,0.0,0.0);}"),
si=ba("uniform highp vec4 u_color;uniform sampler2D u_overlay;varying vec2 v_uv;void main() {vec4 overlay_color\x3dtexture2D(u_overlay,v_uv);gl_FragColor\x3dmix(u_color,overlay_color,overlay_color.a);}","attribute vec2 a_pos;varying vec2 v_uv;uniform mat4 u_matrix;uniform float u_overlay_scale;void main() {v_uv\x3da_pos/8192.0;gl_Position\x3du_matrix*vec4(a_pos*u_overlay_scale,0,1);}"),Lh=ba("#pragma mapbox: define highp vec4 color\n#pragma mapbox: define lowp float opacity\nvoid main() {\n#pragma mapbox: initialize highp vec4 color\n#pragma mapbox: initialize lowp float opacity\ngl_FragColor\x3dcolor*opacity;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor\x3dvec4(1.0);\n#endif\n}",
"attribute vec2 a_pos;uniform mat4 u_matrix;\n#pragma mapbox: define highp vec4 color\n#pragma mapbox: define lowp float opacity\nvoid main() {\n#pragma mapbox: initialize highp vec4 color\n#pragma mapbox: initialize lowp float opacity\ngl_Position\x3du_matrix*vec4(a_pos,0,1);}"),di=ba("varying vec2 v_pos;\n#pragma mapbox: define highp vec4 outline_color\n#pragma mapbox: define lowp float opacity\nvoid main() {\n#pragma mapbox: initialize highp vec4 outline_color\n#pragma mapbox: initialize lowp float opacity\nfloat dist\x3dlength(v_pos-gl_FragCoord.xy);float alpha\x3d1.0-smoothstep(0.0,1.0,dist);gl_FragColor\x3doutline_color*(alpha*opacity);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor\x3dvec4(1.0);\n#endif\n}",
"attribute vec2 a_pos;uniform mat4 u_matrix;uniform vec2 u_world;varying vec2 v_pos;\n#pragma mapbox: define highp vec4 outline_color\n#pragma mapbox: define lowp float opacity\nvoid main() {\n#pragma mapbox: initialize highp vec4 outline_color\n#pragma mapbox: initialize lowp float opacity\ngl_Position\x3du_matrix*vec4(a_pos,0,1);v_pos\x3d(gl_Position.xy/gl_Position.w+1.0)/2.0*u_world;}"),rh=ba("uniform vec2 u_texsize;uniform sampler2D u_image;uniform float u_fade;varying vec2 v_pos_a;varying vec2 v_pos_b;varying vec2 v_pos;\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp vec4 pattern_from\n#pragma mapbox: define lowp vec4 pattern_to\nvoid main() {\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize mediump vec4 pattern_from\n#pragma mapbox: initialize mediump vec4 pattern_to\nvec2 pattern_tl_a\x3dpattern_from.xy;vec2 pattern_br_a\x3dpattern_from.zw;vec2 pattern_tl_b\x3dpattern_to.xy;vec2 pattern_br_b\x3dpattern_to.zw;vec2 imagecoord\x3dmod(v_pos_a,1.0);vec2 pos\x3dmix(pattern_tl_a/u_texsize,pattern_br_a/u_texsize,imagecoord);vec4 color1\x3dtexture2D(u_image,pos);vec2 imagecoord_b\x3dmod(v_pos_b,1.0);vec2 pos2\x3dmix(pattern_tl_b/u_texsize,pattern_br_b/u_texsize,imagecoord_b);vec4 color2\x3dtexture2D(u_image,pos2);float dist\x3dlength(v_pos-gl_FragCoord.xy);float alpha\x3d1.0-smoothstep(0.0,1.0,dist);gl_FragColor\x3dmix(color1,color2,u_fade)*alpha*opacity;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor\x3dvec4(1.0);\n#endif\n}",
"uniform mat4 u_matrix;uniform vec2 u_world;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform vec3 u_scale;attribute vec2 a_pos;varying vec2 v_pos_a;varying vec2 v_pos_b;varying vec2 v_pos;\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp vec4 pattern_from\n#pragma mapbox: define lowp vec4 pattern_to\n#pragma mapbox: define lowp float pixel_ratio_from\n#pragma mapbox: define lowp float pixel_ratio_to\nvoid main() {\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize mediump vec4 pattern_from\n#pragma mapbox: initialize mediump vec4 pattern_to\n#pragma mapbox: initialize lowp float pixel_ratio_from\n#pragma mapbox: initialize lowp float pixel_ratio_to\nvec2 pattern_tl_a\x3dpattern_from.xy;vec2 pattern_br_a\x3dpattern_from.zw;vec2 pattern_tl_b\x3dpattern_to.xy;vec2 pattern_br_b\x3dpattern_to.zw;float tileRatio\x3du_scale.x;float fromScale\x3du_scale.y;float toScale\x3du_scale.z;gl_Position\x3du_matrix*vec4(a_pos,0,1);vec2 display_size_a\x3d(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b\x3d(pattern_br_b-pattern_tl_b)/pixel_ratio_to;v_pos_a\x3dget_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,fromScale*display_size_a,tileRatio,a_pos);v_pos_b\x3dget_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,toScale*display_size_b,tileRatio,a_pos);v_pos\x3d(gl_Position.xy/gl_Position.w+1.0)/2.0*u_world;}"),
Gg=ba("uniform vec2 u_texsize;uniform float u_fade;uniform sampler2D u_image;varying vec2 v_pos_a;varying vec2 v_pos_b;\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp vec4 pattern_from\n#pragma mapbox: define lowp vec4 pattern_to\nvoid main() {\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize mediump vec4 pattern_from\n#pragma mapbox: initialize mediump vec4 pattern_to\nvec2 pattern_tl_a\x3dpattern_from.xy;vec2 pattern_br_a\x3dpattern_from.zw;vec2 pattern_tl_b\x3dpattern_to.xy;vec2 pattern_br_b\x3dpattern_to.zw;vec2 imagecoord\x3dmod(v_pos_a,1.0);vec2 pos\x3dmix(pattern_tl_a/u_texsize,pattern_br_a/u_texsize,imagecoord);vec4 color1\x3dtexture2D(u_image,pos);vec2 imagecoord_b\x3dmod(v_pos_b,1.0);vec2 pos2\x3dmix(pattern_tl_b/u_texsize,pattern_br_b/u_texsize,imagecoord_b);vec4 color2\x3dtexture2D(u_image,pos2);gl_FragColor\x3dmix(color1,color2,u_fade)*opacity;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor\x3dvec4(1.0);\n#endif\n}",
"uniform mat4 u_matrix;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform vec3 u_scale;attribute vec2 a_pos;varying vec2 v_pos_a;varying vec2 v_pos_b;\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp vec4 pattern_from\n#pragma mapbox: define lowp vec4 pattern_to\n#pragma mapbox: define lowp float pixel_ratio_from\n#pragma mapbox: define lowp float pixel_ratio_to\nvoid main() {\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize mediump vec4 pattern_from\n#pragma mapbox: initialize mediump vec4 pattern_to\n#pragma mapbox: initialize lowp float pixel_ratio_from\n#pragma mapbox: initialize lowp float pixel_ratio_to\nvec2 pattern_tl_a\x3dpattern_from.xy;vec2 pattern_br_a\x3dpattern_from.zw;vec2 pattern_tl_b\x3dpattern_to.xy;vec2 pattern_br_b\x3dpattern_to.zw;float tileZoomRatio\x3du_scale.x;float fromScale\x3du_scale.y;float toScale\x3du_scale.z;vec2 display_size_a\x3d(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b\x3d(pattern_br_b-pattern_tl_b)/pixel_ratio_to;gl_Position\x3du_matrix*vec4(a_pos,0,1);v_pos_a\x3dget_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,fromScale*display_size_a,tileZoomRatio,a_pos);v_pos_b\x3dget_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,toScale*display_size_b,tileZoomRatio,a_pos);}"),
ti=ba("varying vec4 v_color;void main() {gl_FragColor\x3dv_color;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor\x3dvec4(1.0);\n#endif\n}","uniform mat4 u_matrix;uniform vec3 u_lightcolor;uniform lowp vec3 u_lightpos;uniform lowp float u_lightintensity;uniform float u_vertical_gradient;uniform lowp float u_opacity;attribute vec2 a_pos;attribute vec4 a_normal_ed;varying vec4 v_color;\n#pragma mapbox: define highp float base\n#pragma mapbox: define highp float height\n#pragma mapbox: define highp vec4 color\nvoid main() {\n#pragma mapbox: initialize highp float base\n#pragma mapbox: initialize highp float height\n#pragma mapbox: initialize highp vec4 color\nvec3 normal\x3da_normal_ed.xyz;base\x3dmax(0.0,base);height\x3dmax(0.0,height);float t\x3dmod(normal.x,2.0);gl_Position\x3du_matrix*vec4(a_pos,t \x3e 0.0 ? height : base,1);float colorvalue\x3dcolor.r*0.2126+color.g*0.7152+color.b*0.0722;v_color\x3dvec4(0.0,0.0,0.0,1.0);vec4 ambientlight\x3dvec4(0.03,0.03,0.03,1.0);color+\x3dambientlight;float directional\x3dclamp(dot(normal/16384.0,u_lightpos),0.0,1.0);directional\x3dmix((1.0-u_lightintensity),max((1.0-colorvalue+u_lightintensity),1.0),directional);if (normal.y !\x3d0.0) {directional*\x3d((1.0-u_vertical_gradient)+(u_vertical_gradient*clamp((t+base)*pow(height/150.0,0.5),mix(0.7,0.98,1.0-u_lightintensity),1.0)));}v_color.r+\x3dclamp(color.r*directional*u_lightcolor.r,mix(0.0,0.3,1.0-u_lightcolor.r),1.0);v_color.g+\x3dclamp(color.g*directional*u_lightcolor.g,mix(0.0,0.3,1.0-u_lightcolor.g),1.0);v_color.b+\x3dclamp(color.b*directional*u_lightcolor.b,mix(0.0,0.3,1.0-u_lightcolor.b),1.0);v_color*\x3du_opacity;}"),
eg=ba("uniform vec2 u_texsize;uniform float u_fade;uniform sampler2D u_image;varying vec2 v_pos_a;varying vec2 v_pos_b;varying vec4 v_lighting;\n#pragma mapbox: define lowp float base\n#pragma mapbox: define lowp float height\n#pragma mapbox: define lowp vec4 pattern_from\n#pragma mapbox: define lowp vec4 pattern_to\n#pragma mapbox: define lowp float pixel_ratio_from\n#pragma mapbox: define lowp float pixel_ratio_to\nvoid main() {\n#pragma mapbox: initialize lowp float base\n#pragma mapbox: initialize lowp float height\n#pragma mapbox: initialize mediump vec4 pattern_from\n#pragma mapbox: initialize mediump vec4 pattern_to\n#pragma mapbox: initialize lowp float pixel_ratio_from\n#pragma mapbox: initialize lowp float pixel_ratio_to\nvec2 pattern_tl_a\x3dpattern_from.xy;vec2 pattern_br_a\x3dpattern_from.zw;vec2 pattern_tl_b\x3dpattern_to.xy;vec2 pattern_br_b\x3dpattern_to.zw;vec2 imagecoord\x3dmod(v_pos_a,1.0);vec2 pos\x3dmix(pattern_tl_a/u_texsize,pattern_br_a/u_texsize,imagecoord);vec4 color1\x3dtexture2D(u_image,pos);vec2 imagecoord_b\x3dmod(v_pos_b,1.0);vec2 pos2\x3dmix(pattern_tl_b/u_texsize,pattern_br_b/u_texsize,imagecoord_b);vec4 color2\x3dtexture2D(u_image,pos2);vec4 mixedColor\x3dmix(color1,color2,u_fade);gl_FragColor\x3dmixedColor*v_lighting;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor\x3dvec4(1.0);\n#endif\n}",
"uniform mat4 u_matrix;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform float u_height_factor;uniform vec3 u_scale;uniform float u_vertical_gradient;uniform lowp float u_opacity;uniform vec3 u_lightcolor;uniform lowp vec3 u_lightpos;uniform lowp float u_lightintensity;attribute vec2 a_pos;attribute vec4 a_normal_ed;varying vec2 v_pos_a;varying vec2 v_pos_b;varying vec4 v_lighting;\n#pragma mapbox: define lowp float base\n#pragma mapbox: define lowp float height\n#pragma mapbox: define lowp vec4 pattern_from\n#pragma mapbox: define lowp vec4 pattern_to\n#pragma mapbox: define lowp float pixel_ratio_from\n#pragma mapbox: define lowp float pixel_ratio_to\nvoid main() {\n#pragma mapbox: initialize lowp float base\n#pragma mapbox: initialize lowp float height\n#pragma mapbox: initialize mediump vec4 pattern_from\n#pragma mapbox: initialize mediump vec4 pattern_to\n#pragma mapbox: initialize lowp float pixel_ratio_from\n#pragma mapbox: initialize lowp float pixel_ratio_to\nvec2 pattern_tl_a\x3dpattern_from.xy;vec2 pattern_br_a\x3dpattern_from.zw;vec2 pattern_tl_b\x3dpattern_to.xy;vec2 pattern_br_b\x3dpattern_to.zw;float tileRatio\x3du_scale.x;float fromScale\x3du_scale.y;float toScale\x3du_scale.z;vec3 normal\x3da_normal_ed.xyz;float edgedistance\x3da_normal_ed.w;vec2 display_size_a\x3d(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b\x3d(pattern_br_b-pattern_tl_b)/pixel_ratio_to;base\x3dmax(0.0,base);height\x3dmax(0.0,height);float t\x3dmod(normal.x,2.0);float z\x3dt \x3e 0.0 ? height : base;gl_Position\x3du_matrix*vec4(a_pos,z,1);vec2 pos\x3dnormal.x\x3d\x3d1.0 \x26\x26 normal.y\x3d\x3d0.0 \x26\x26 normal.z\x3d\x3d16384.0\n? a_pos\n: vec2(edgedistance,z*u_height_factor);v_pos_a\x3dget_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,fromScale*display_size_a,tileRatio,pos);v_pos_b\x3dget_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,toScale*display_size_b,tileRatio,pos);v_lighting\x3dvec4(0.0,0.0,0.0,1.0);float directional\x3dclamp(dot(normal/16383.0,u_lightpos),0.0,1.0);directional\x3dmix((1.0-u_lightintensity),max((0.5+u_lightintensity),1.0),directional);if (normal.y !\x3d0.0) {directional*\x3d((1.0-u_vertical_gradient)+(u_vertical_gradient*clamp((t+base)*pow(height/150.0,0.5),mix(0.7,0.98,1.0-u_lightintensity),1.0)));}v_lighting.rgb+\x3dclamp(directional*u_lightcolor,mix(vec3(0.0),vec3(0.3),1.0-u_lightcolor),vec3(1.0));v_lighting*\x3du_opacity;}"),
Qf=ba("#ifdef GL_ES\nprecision highp float;\n#endif\nuniform sampler2D u_image;varying vec2 v_pos;uniform vec2 u_dimension;uniform float u_zoom;uniform float u_maxzoom;uniform vec4 u_unpack;float getElevation(vec2 coord,float bias) {vec4 data\x3dtexture2D(u_image,coord)*255.0;data.a\x3d-1.0;return dot(data,u_unpack)/4.0;}void main() {vec2 epsilon\x3d1.0/u_dimension;float a\x3dgetElevation(v_pos+vec2(-epsilon.x,-epsilon.y),0.0);float b\x3dgetElevation(v_pos+vec2(0,-epsilon.y),0.0);float c\x3dgetElevation(v_pos+vec2(epsilon.x,-epsilon.y),0.0);float d\x3dgetElevation(v_pos+vec2(-epsilon.x,0),0.0);float e\x3dgetElevation(v_pos,0.0);float f\x3dgetElevation(v_pos+vec2(epsilon.x,0),0.0);float g\x3dgetElevation(v_pos+vec2(-epsilon.x,epsilon.y),0.0);float h\x3dgetElevation(v_pos+vec2(0,epsilon.y),0.0);float i\x3dgetElevation(v_pos+vec2(epsilon.x,epsilon.y),0.0);float exaggeration\x3du_zoom \x3c 2.0 ? 0.4 : u_zoom \x3c 4.5 ? 0.35 : 0.3;vec2 deriv\x3dvec2((c+f+f+i)-(a+d+d+g),(g+h+h+i)-(a+b+b+c))/ pow(2.0,(u_zoom-u_maxzoom)*exaggeration+19.2562-u_zoom);gl_FragColor\x3dclamp(vec4(deriv.x/2.0+0.5,deriv.y/2.0+0.5,1.0,1.0),0.0,1.0);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor\x3dvec4(1.0);\n#endif\n}",
"uniform mat4 u_matrix;uniform vec2 u_dimension;attribute vec2 a_pos;attribute vec2 a_texture_pos;varying vec2 v_pos;void main() {gl_Position\x3du_matrix*vec4(a_pos,0,1);highp vec2 epsilon\x3d1.0/u_dimension;float scale\x3d(u_dimension.x-2.0)/u_dimension.x;v_pos\x3d(a_texture_pos/8192.0)*scale+epsilon;}"),Rf=ba("uniform sampler2D u_image;varying vec2 v_pos;uniform vec2 u_latrange;uniform vec2 u_light;uniform vec4 u_shadow;uniform vec4 u_highlight;uniform vec4 u_accent;\n#define PI 3.141592653589793\nvoid main() {vec4 pixel\x3dtexture2D(u_image,v_pos);vec2 deriv\x3d((pixel.rg*2.0)-1.0);float scaleFactor\x3dcos(radians((u_latrange[0]-u_latrange[1])*(1.0-v_pos.y)+u_latrange[1]));float slope\x3datan(1.25*length(deriv)/scaleFactor);float aspect\x3dderiv.x !\x3d0.0 ? atan(deriv.y,-deriv.x) : PI/2.0*(deriv.y \x3e 0.0 ? 1.0 :-1.0);float intensity\x3du_light.x;float azimuth\x3du_light.y+PI;float base\x3d1.875-intensity*1.75;float maxValue\x3d0.5*PI;float scaledSlope\x3dintensity !\x3d0.5 ? ((pow(base,slope)-1.0)/(pow(base,maxValue)-1.0))*maxValue : slope;float accent\x3dcos(scaledSlope);vec4 accent_color\x3d(1.0-accent)*u_accent*clamp(intensity*2.0,0.0,1.0);float shade\x3dabs(mod((aspect+azimuth)/PI+0.5,2.0)-1.0);vec4 shade_color\x3dmix(u_shadow,u_highlight,shade)*sin(scaledSlope)*clamp(intensity*2.0,0.0,1.0);gl_FragColor\x3daccent_color*(1.0-shade_color.a)+shade_color;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor\x3dvec4(1.0);\n#endif\n}",
"uniform mat4 u_matrix;attribute vec2 a_pos;attribute vec2 a_texture_pos;varying vec2 v_pos;void main() {gl_Position\x3du_matrix*vec4(a_pos,0,1);v_pos\x3da_texture_pos/8192.0;}"),Of=ba("uniform lowp float u_device_pixel_ratio;varying vec2 v_width2;varying vec2 v_normal;varying float v_gamma_scale;\n#pragma mapbox: define highp vec4 color\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\nvoid main() {\n#pragma mapbox: initialize highp vec4 color\n#pragma mapbox: initialize lowp float blur\n#pragma mapbox: initialize lowp float opacity\nfloat dist\x3dlength(v_normal)*v_width2.s;float blur2\x3d(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha\x3dclamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);gl_FragColor\x3dcolor*(alpha*opacity);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor\x3dvec4(1.0);\n#endif\n}",
"\n#define scale 0.015873016\nattribute vec2 a_pos_normal;attribute vec4 a_data;uniform mat4 u_matrix;uniform mediump float u_ratio;uniform vec2 u_units_to_pixels;uniform lowp float u_device_pixel_ratio;varying vec2 v_normal;varying vec2 v_width2;varying float v_gamma_scale;varying highp float v_linesofar;\n#pragma mapbox: define highp vec4 color\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define mediump float gapwidth\n#pragma mapbox: define lowp float offset\n#pragma mapbox: define mediump float width\nvoid main() {\n#pragma mapbox: initialize highp vec4 color\n#pragma mapbox: initialize lowp float blur\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize mediump float gapwidth\n#pragma mapbox: initialize lowp float offset\n#pragma mapbox: initialize mediump float width\nfloat ANTIALIASING\x3d1.0/u_device_pixel_ratio/2.0;vec2 a_extrude\x3da_data.xy-128.0;float a_direction\x3dmod(a_data.z,4.0)-1.0;v_linesofar\x3d(floor(a_data.z/4.0)+a_data.w*64.0)*2.0;vec2 pos\x3dfloor(a_pos_normal*0.5);mediump vec2 normal\x3da_pos_normal-2.0*pos;normal.y\x3dnormal.y*2.0-1.0;v_normal\x3dnormal;gapwidth\x3dgapwidth/2.0;float halfwidth\x3dwidth/2.0;offset\x3d-1.0*offset;float inset\x3dgapwidth+(gapwidth \x3e 0.0 ? ANTIALIASING : 0.0);float outset\x3dgapwidth+halfwidth*(gapwidth \x3e 0.0 ? 2.0 : 1.0)+(halfwidth\x3d\x3d0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist\x3doutset*a_extrude*scale;mediump float u\x3d0.5*a_direction;mediump float t\x3d1.0-abs(u);mediump vec2 offset2\x3doffset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude\x3du_matrix*vec4(dist/u_ratio,0.0,0.0);gl_Position\x3du_matrix*vec4(pos+offset2/u_ratio,0.0,1.0)+projected_extrude;float extrude_length_without_perspective\x3dlength(dist);float extrude_length_with_perspective\x3dlength(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale\x3dextrude_length_without_perspective/extrude_length_with_perspective;v_width2\x3dvec2(outset,inset);}"),
Ii=ba("uniform lowp float u_device_pixel_ratio;uniform sampler2D u_image;varying vec2 v_width2;varying vec2 v_normal;varying float v_gamma_scale;varying highp float v_lineprogress;\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\nvoid main() {\n#pragma mapbox: initialize lowp float blur\n#pragma mapbox: initialize lowp float opacity\nfloat dist\x3dlength(v_normal)*v_width2.s;float blur2\x3d(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha\x3dclamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);vec4 color\x3dtexture2D(u_image,vec2(v_lineprogress,0.5));gl_FragColor\x3dcolor*(alpha*opacity);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor\x3dvec4(1.0);\n#endif\n}",
"\n#define MAX_LINE_DISTANCE 32767.0\n#define scale 0.015873016\nattribute vec2 a_pos_normal;attribute vec4 a_data;uniform mat4 u_matrix;uniform mediump float u_ratio;uniform lowp float u_device_pixel_ratio;uniform vec2 u_units_to_pixels;varying vec2 v_normal;varying vec2 v_width2;varying float v_gamma_scale;varying highp float v_lineprogress;\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define mediump float gapwidth\n#pragma mapbox: define lowp float offset\n#pragma mapbox: define mediump float width\nvoid main() {\n#pragma mapbox: initialize lowp float blur\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize mediump float gapwidth\n#pragma mapbox: initialize lowp float offset\n#pragma mapbox: initialize mediump float width\nfloat ANTIALIASING\x3d1.0/u_device_pixel_ratio/2.0;vec2 a_extrude\x3da_data.xy-128.0;float a_direction\x3dmod(a_data.z,4.0)-1.0;v_lineprogress\x3d(floor(a_data.z/4.0)+a_data.w*64.0)*2.0/MAX_LINE_DISTANCE;vec2 pos\x3dfloor(a_pos_normal*0.5);mediump vec2 normal\x3da_pos_normal-2.0*pos;normal.y\x3dnormal.y*2.0-1.0;v_normal\x3dnormal;gapwidth\x3dgapwidth/2.0;float halfwidth\x3dwidth/2.0;offset\x3d-1.0*offset;float inset\x3dgapwidth+(gapwidth \x3e 0.0 ? ANTIALIASING : 0.0);float outset\x3dgapwidth+halfwidth*(gapwidth \x3e 0.0 ? 2.0 : 1.0)+(halfwidth\x3d\x3d0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist\x3doutset*a_extrude*scale;mediump float u\x3d0.5*a_direction;mediump float t\x3d1.0-abs(u);mediump vec2 offset2\x3doffset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude\x3du_matrix*vec4(dist/u_ratio,0.0,0.0);gl_Position\x3du_matrix*vec4(pos+offset2/u_ratio,0.0,1.0)+projected_extrude;float extrude_length_without_perspective\x3dlength(dist);float extrude_length_with_perspective\x3dlength(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale\x3dextrude_length_without_perspective/extrude_length_with_perspective;v_width2\x3dvec2(outset,inset);}"),
Yg=ba("uniform lowp float u_device_pixel_ratio;uniform vec2 u_texsize;uniform float u_fade;uniform mediump vec3 u_scale;uniform sampler2D u_image;varying vec2 v_normal;varying vec2 v_width2;varying float v_linesofar;varying float v_gamma_scale;varying float v_width;\n#pragma mapbox: define lowp vec4 pattern_from\n#pragma mapbox: define lowp vec4 pattern_to\n#pragma mapbox: define lowp float pixel_ratio_from\n#pragma mapbox: define lowp float pixel_ratio_to\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\nvoid main() {\n#pragma mapbox: initialize mediump vec4 pattern_from\n#pragma mapbox: initialize mediump vec4 pattern_to\n#pragma mapbox: initialize lowp float pixel_ratio_from\n#pragma mapbox: initialize lowp float pixel_ratio_to\n#pragma mapbox: initialize lowp float blur\n#pragma mapbox: initialize lowp float opacity\nvec2 pattern_tl_a\x3dpattern_from.xy;vec2 pattern_br_a\x3dpattern_from.zw;vec2 pattern_tl_b\x3dpattern_to.xy;vec2 pattern_br_b\x3dpattern_to.zw;float tileZoomRatio\x3du_scale.x;float fromScale\x3du_scale.y;float toScale\x3du_scale.z;vec2 display_size_a\x3d(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b\x3d(pattern_br_b-pattern_tl_b)/pixel_ratio_to;vec2 pattern_size_a\x3dvec2(display_size_a.x*fromScale/tileZoomRatio,display_size_a.y);vec2 pattern_size_b\x3dvec2(display_size_b.x*toScale/tileZoomRatio,display_size_b.y);float aspect_a\x3ddisplay_size_a.y/v_width;float aspect_b\x3ddisplay_size_b.y/v_width;float dist\x3dlength(v_normal)*v_width2.s;float blur2\x3d(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha\x3dclamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);float x_a\x3dmod(v_linesofar/pattern_size_a.x*aspect_a,1.0);float x_b\x3dmod(v_linesofar/pattern_size_b.x*aspect_b,1.0);float y\x3d0.5*v_normal.y+0.5;vec2 texel_size\x3d1.0/u_texsize;vec2 pos_a\x3dmix(pattern_tl_a*texel_size-texel_size,pattern_br_a*texel_size+texel_size,vec2(x_a,y));vec2 pos_b\x3dmix(pattern_tl_b*texel_size-texel_size,pattern_br_b*texel_size+texel_size,vec2(x_b,y));vec4 color\x3dmix(texture2D(u_image,pos_a),texture2D(u_image,pos_b),u_fade);gl_FragColor\x3dcolor*alpha*opacity;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor\x3dvec4(1.0);\n#endif\n}",
"\n#define scale 0.015873016\n#define LINE_DISTANCE_SCALE 2.0\nattribute vec2 a_pos_normal;attribute vec4 a_data;uniform mat4 u_matrix;uniform vec2 u_units_to_pixels;uniform mediump float u_ratio;uniform lowp float u_device_pixel_ratio;varying vec2 v_normal;varying vec2 v_width2;varying float v_linesofar;varying float v_gamma_scale;varying float v_width;\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp float offset\n#pragma mapbox: define mediump float gapwidth\n#pragma mapbox: define mediump float width\n#pragma mapbox: define lowp float floorwidth\n#pragma mapbox: define lowp vec4 pattern_from\n#pragma mapbox: define lowp vec4 pattern_to\n#pragma mapbox: define lowp float pixel_ratio_from\n#pragma mapbox: define lowp float pixel_ratio_to\nvoid main() {\n#pragma mapbox: initialize lowp float blur\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize lowp float offset\n#pragma mapbox: initialize mediump float gapwidth\n#pragma mapbox: initialize mediump float width\n#pragma mapbox: initialize lowp float floorwidth\n#pragma mapbox: initialize mediump vec4 pattern_from\n#pragma mapbox: initialize mediump vec4 pattern_to\n#pragma mapbox: initialize lowp float pixel_ratio_from\n#pragma mapbox: initialize lowp float pixel_ratio_to\nfloat ANTIALIASING\x3d1.0/u_device_pixel_ratio/2.0;vec2 a_extrude\x3da_data.xy-128.0;float a_direction\x3dmod(a_data.z,4.0)-1.0;float a_linesofar\x3d(floor(a_data.z/4.0)+a_data.w*64.0)*LINE_DISTANCE_SCALE;vec2 pos\x3dfloor(a_pos_normal*0.5);mediump vec2 normal\x3da_pos_normal-2.0*pos;normal.y\x3dnormal.y*2.0-1.0;v_normal\x3dnormal;gapwidth\x3dgapwidth/2.0;float halfwidth\x3dwidth/2.0;offset\x3d-1.0*offset;float inset\x3dgapwidth+(gapwidth \x3e 0.0 ? ANTIALIASING : 0.0);float outset\x3dgapwidth+halfwidth*(gapwidth \x3e 0.0 ? 2.0 : 1.0)+(halfwidth\x3d\x3d0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist\x3doutset*a_extrude*scale;mediump float u\x3d0.5*a_direction;mediump float t\x3d1.0-abs(u);mediump vec2 offset2\x3doffset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude\x3du_matrix*vec4(dist/u_ratio,0.0,0.0);gl_Position\x3du_matrix*vec4(pos+offset2/u_ratio,0.0,1.0)+projected_extrude;float extrude_length_without_perspective\x3dlength(dist);float extrude_length_with_perspective\x3dlength(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale\x3dextrude_length_without_perspective/extrude_length_with_perspective;v_linesofar\x3da_linesofar;v_width2\x3dvec2(outset,inset);v_width\x3dfloorwidth;}"),
sh=ba("uniform lowp float u_device_pixel_ratio;uniform sampler2D u_image;uniform float u_sdfgamma;uniform float u_mix;varying vec2 v_normal;varying vec2 v_width2;varying vec2 v_tex_a;varying vec2 v_tex_b;varying float v_gamma_scale;\n#pragma mapbox: define highp vec4 color\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define mediump float width\n#pragma mapbox: define lowp float floorwidth\nvoid main() {\n#pragma mapbox: initialize highp vec4 color\n#pragma mapbox: initialize lowp float blur\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize mediump float width\n#pragma mapbox: initialize lowp float floorwidth\nfloat dist\x3dlength(v_normal)*v_width2.s;float blur2\x3d(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha\x3dclamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);float sdfdist_a\x3dtexture2D(u_image,v_tex_a).a;float sdfdist_b\x3dtexture2D(u_image,v_tex_b).a;float sdfdist\x3dmix(sdfdist_a,sdfdist_b,u_mix);alpha*\x3dsmoothstep(0.5-u_sdfgamma/floorwidth,0.5+u_sdfgamma/floorwidth,sdfdist);gl_FragColor\x3dcolor*(alpha*opacity);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor\x3dvec4(1.0);\n#endif\n}",
"\n#define scale 0.015873016\n#define LINE_DISTANCE_SCALE 2.0\nattribute vec2 a_pos_normal;attribute vec4 a_data;uniform mat4 u_matrix;uniform mediump float u_ratio;uniform lowp float u_device_pixel_ratio;uniform vec2 u_patternscale_a;uniform float u_tex_y_a;uniform vec2 u_patternscale_b;uniform float u_tex_y_b;uniform vec2 u_units_to_pixels;varying vec2 v_normal;varying vec2 v_width2;varying vec2 v_tex_a;varying vec2 v_tex_b;varying float v_gamma_scale;\n#pragma mapbox: define highp vec4 color\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define mediump float gapwidth\n#pragma mapbox: define lowp float offset\n#pragma mapbox: define mediump float width\n#pragma mapbox: define lowp float floorwidth\nvoid main() {\n#pragma mapbox: initialize highp vec4 color\n#pragma mapbox: initialize lowp float blur\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize mediump float gapwidth\n#pragma mapbox: initialize lowp float offset\n#pragma mapbox: initialize mediump float width\n#pragma mapbox: initialize lowp float floorwidth\nfloat ANTIALIASING\x3d1.0/u_device_pixel_ratio/2.0;vec2 a_extrude\x3da_data.xy-128.0;float a_direction\x3dmod(a_data.z,4.0)-1.0;float a_linesofar\x3d(floor(a_data.z/4.0)+a_data.w*64.0)*LINE_DISTANCE_SCALE;vec2 pos\x3dfloor(a_pos_normal*0.5);mediump vec2 normal\x3da_pos_normal-2.0*pos;normal.y\x3dnormal.y*2.0-1.0;v_normal\x3dnormal;gapwidth\x3dgapwidth/2.0;float halfwidth\x3dwidth/2.0;offset\x3d-1.0*offset;float inset\x3dgapwidth+(gapwidth \x3e 0.0 ? ANTIALIASING : 0.0);float outset\x3dgapwidth+halfwidth*(gapwidth \x3e 0.0 ? 2.0 : 1.0)+(halfwidth\x3d\x3d0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist\x3doutset*a_extrude*scale;mediump float u\x3d0.5*a_direction;mediump float t\x3d1.0-abs(u);mediump vec2 offset2\x3doffset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude\x3du_matrix*vec4(dist/u_ratio,0.0,0.0);gl_Position\x3du_matrix*vec4(pos+offset2/u_ratio,0.0,1.0)+projected_extrude;float extrude_length_without_perspective\x3dlength(dist);float extrude_length_with_perspective\x3dlength(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale\x3dextrude_length_without_perspective/extrude_length_with_perspective;v_tex_a\x3dvec2(a_linesofar*u_patternscale_a.x/floorwidth,normal.y*u_patternscale_a.y+u_tex_y_a);v_tex_b\x3dvec2(a_linesofar*u_patternscale_b.x/floorwidth,normal.y*u_patternscale_b.y+u_tex_y_b);v_width2\x3dvec2(outset,inset);}"),
Vi=ba("uniform float u_fade_t;uniform float u_opacity;uniform sampler2D u_image0;uniform sampler2D u_image1;varying vec2 v_pos0;varying vec2 v_pos1;uniform float u_brightness_low;uniform float u_brightness_high;uniform float u_saturation_factor;uniform float u_contrast_factor;uniform vec3 u_spin_weights;void main() {vec4 color0\x3dtexture2D(u_image0,v_pos0);vec4 color1\x3dtexture2D(u_image1,v_pos1);if (color0.a \x3e 0.0) {color0.rgb\x3dcolor0.rgb/color0.a;}if (color1.a \x3e 0.0) {color1.rgb\x3dcolor1.rgb/color1.a;}vec4 color\x3dmix(color0,color1,u_fade_t);color.a*\x3du_opacity;vec3 rgb\x3dcolor.rgb;rgb\x3dvec3(dot(rgb,u_spin_weights.xyz),dot(rgb,u_spin_weights.zxy),dot(rgb,u_spin_weights.yzx));float average\x3d(color.r+color.g+color.b)/3.0;rgb+\x3d(average-rgb)*u_saturation_factor;rgb\x3d(rgb-0.5)*u_contrast_factor+0.5;vec3 u_high_vec\x3dvec3(u_brightness_low,u_brightness_low,u_brightness_low);vec3 u_low_vec\x3dvec3(u_brightness_high,u_brightness_high,u_brightness_high);gl_FragColor\x3dvec4(mix(u_high_vec,u_low_vec,rgb)*color.a,color.a);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor\x3dvec4(1.0);\n#endif\n}",
"uniform mat4 u_matrix;uniform vec2 u_tl_parent;uniform float u_scale_parent;uniform float u_buffer_scale;attribute vec2 a_pos;attribute vec2 a_texture_pos;varying vec2 v_pos0;varying vec2 v_pos1;void main() {gl_Position\x3du_matrix*vec4(a_pos,0,1);v_pos0\x3d(((a_texture_pos/8192.0)-0.5)/u_buffer_scale )+0.5;v_pos1\x3d(v_pos0*u_scale_parent)+u_tl_parent;}"),th=ba("uniform sampler2D u_texture;varying vec2 v_tex;varying float v_fade_opacity;\n#pragma mapbox: define lowp float opacity\nvoid main() {\n#pragma mapbox: initialize lowp float opacity\nlowp float alpha\x3dopacity*v_fade_opacity;gl_FragColor\x3dtexture2D(u_texture,v_tex)*alpha;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor\x3dvec4(1.0);\n#endif\n}",
"const float PI\x3d3.141592653589793;attribute vec4 a_pos_offset;attribute vec4 a_data;attribute vec4 a_pixeloffset;attribute vec3 a_projected_pos;attribute float a_fade_opacity;uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform highp float u_camera_to_center_distance;uniform highp float u_pitch;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform float u_fade_change;uniform mat4 u_matrix;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform vec2 u_texsize;varying vec2 v_tex;varying float v_fade_opacity;\n#pragma mapbox: define lowp float opacity\nvoid main() {\n#pragma mapbox: initialize lowp float opacity\nvec2 a_pos\x3da_pos_offset.xy;vec2 a_offset\x3da_pos_offset.zw;vec2 a_tex\x3da_data.xy;vec2 a_size\x3da_data.zw;float a_size_min\x3dfloor(a_size[0]*0.5);vec2 a_pxoffset\x3da_pixeloffset.xy;vec2 a_minFontScale\x3da_pixeloffset.zw/256.0;highp float segment_angle\x3d-a_projected_pos[2];float size;if (!u_is_size_zoom_constant \x26\x26 !u_is_size_feature_constant) {size\x3dmix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant \x26\x26 !u_is_size_feature_constant) {size\x3da_size_min/128.0;} else {size\x3du_size;}vec4 projectedPoint\x3du_matrix*vec4(a_pos,0,1);highp float camera_to_anchor_distance\x3dprojectedPoint.w;highp float distance_ratio\x3du_pitch_with_map ?\ncamera_to_anchor_distance/u_camera_to_center_distance :\nu_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio\x3dclamp(0.5+0.5*distance_ratio,0.0,4.0);size*\x3dperspective_ratio;float fontScale\x3du_is_text ? size/24.0 : size;highp float symbol_rotation\x3d0.0;if (u_rotate_symbol) {vec4 offsetProjectedPoint\x3du_matrix*vec4(a_pos+vec2(1,0),0,1);vec2 a\x3dprojectedPoint.xy/projectedPoint.w;vec2 b\x3doffsetProjectedPoint.xy/offsetProjectedPoint.w;symbol_rotation\x3datan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}highp float angle_sin\x3dsin(segment_angle+symbol_rotation);highp float angle_cos\x3dcos(segment_angle+symbol_rotation);mat2 rotation_matrix\x3dmat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);vec4 projected_pos\x3du_label_plane_matrix*vec4(a_projected_pos.xy,0.0,1.0);gl_Position\x3du_coord_matrix*vec4(projected_pos.xy/projected_pos.w+rotation_matrix*(a_offset/32.0*max(a_minFontScale,fontScale)+a_pxoffset/16.0),0.0,1.0);v_tex\x3da_tex/u_texsize;vec2 fade_opacity\x3dunpack_opacity(a_fade_opacity);float fade_change\x3dfade_opacity[1] \x3e 0.5 ? u_fade_change :-u_fade_change;v_fade_opacity\x3dmax(0.0,min(1.0,fade_opacity[0]+fade_change));}"),
Hg=ba("#define SDF_PX 8.0\nuniform bool u_is_halo;uniform sampler2D u_texture;uniform highp float u_gamma_scale;uniform lowp float u_device_pixel_ratio;uniform bool u_is_text;varying vec2 v_data0;varying vec3 v_data1;\n#pragma mapbox: define highp vec4 fill_color\n#pragma mapbox: define highp vec4 halo_color\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp float halo_width\n#pragma mapbox: define lowp float halo_blur\nvoid main() {\n#pragma mapbox: initialize highp vec4 fill_color\n#pragma mapbox: initialize highp vec4 halo_color\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize lowp float halo_width\n#pragma mapbox: initialize lowp float halo_blur\nfloat EDGE_GAMMA\x3d0.105/u_device_pixel_ratio;vec2 tex\x3dv_data0.xy;float gamma_scale\x3dv_data1.x;float size\x3dv_data1.y;float fade_opacity\x3dv_data1[2];float fontScale\x3du_is_text ? size/24.0 : size;lowp vec4 color\x3dfill_color;highp float gamma\x3dEDGE_GAMMA/(fontScale*u_gamma_scale);lowp float buff\x3d(256.0-64.0)/256.0;if (u_is_halo) {color\x3dhalo_color;gamma\x3d(halo_blur*1.19/SDF_PX+EDGE_GAMMA)/(fontScale*u_gamma_scale);buff\x3d(6.0-halo_width/fontScale)/SDF_PX;}lowp float dist\x3dtexture2D(u_texture,tex).a;highp float gamma_scaled\x3dgamma*gamma_scale;highp float alpha\x3dsmoothstep(buff-gamma_scaled,buff+gamma_scaled,dist);gl_FragColor\x3dcolor*(alpha*opacity*fade_opacity);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor\x3dvec4(1.0);\n#endif\n}",
"const float PI\x3d3.141592653589793;attribute vec4 a_pos_offset;attribute vec4 a_data;attribute vec4 a_pixeloffset;attribute vec3 a_projected_pos;attribute float a_fade_opacity;uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform mat4 u_matrix;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform highp float u_pitch;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform highp float u_camera_to_center_distance;uniform float u_fade_change;uniform vec2 u_texsize;varying vec2 v_data0;varying vec3 v_data1;\n#pragma mapbox: define highp vec4 fill_color\n#pragma mapbox: define highp vec4 halo_color\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp float halo_width\n#pragma mapbox: define lowp float halo_blur\nvoid main() {\n#pragma mapbox: initialize highp vec4 fill_color\n#pragma mapbox: initialize highp vec4 halo_color\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize lowp float halo_width\n#pragma mapbox: initialize lowp float halo_blur\nvec2 a_pos\x3da_pos_offset.xy;vec2 a_offset\x3da_pos_offset.zw;vec2 a_tex\x3da_data.xy;vec2 a_size\x3da_data.zw;float a_size_min\x3dfloor(a_size[0]*0.5);vec2 a_pxoffset\x3da_pixeloffset.xy;highp float segment_angle\x3d-a_projected_pos[2];float size;if (!u_is_size_zoom_constant \x26\x26 !u_is_size_feature_constant) {size\x3dmix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant \x26\x26 !u_is_size_feature_constant) {size\x3da_size_min/128.0;} else {size\x3du_size;}vec4 projectedPoint\x3du_matrix*vec4(a_pos,0,1);highp float camera_to_anchor_distance\x3dprojectedPoint.w;highp float distance_ratio\x3du_pitch_with_map ?\ncamera_to_anchor_distance/u_camera_to_center_distance :\nu_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio\x3dclamp(0.5+0.5*distance_ratio,0.0,4.0);size*\x3dperspective_ratio;float fontScale\x3du_is_text ? size/24.0 : size;highp float symbol_rotation\x3d0.0;if (u_rotate_symbol) {vec4 offsetProjectedPoint\x3du_matrix*vec4(a_pos+vec2(1,0),0,1);vec2 a\x3dprojectedPoint.xy/projectedPoint.w;vec2 b\x3doffsetProjectedPoint.xy/offsetProjectedPoint.w;symbol_rotation\x3datan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}highp float angle_sin\x3dsin(segment_angle+symbol_rotation);highp float angle_cos\x3dcos(segment_angle+symbol_rotation);mat2 rotation_matrix\x3dmat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);vec4 projected_pos\x3du_label_plane_matrix*vec4(a_projected_pos.xy,0.0,1.0);gl_Position\x3du_coord_matrix*vec4(projected_pos.xy/projected_pos.w+rotation_matrix*(a_offset/32.0*fontScale+a_pxoffset),0.0,1.0);float gamma_scale\x3dgl_Position.w;vec2 fade_opacity\x3dunpack_opacity(a_fade_opacity);float fade_change\x3dfade_opacity[1] \x3e 0.5 ? u_fade_change :-u_fade_change;float interpolated_fade_opacity\x3dmax(0.0,min(1.0,fade_opacity[0]+fade_change));v_data0\x3da_tex/u_texsize;v_data1\x3dvec3(gamma_scale,size,interpolated_fade_opacity);}"),
Mh=ba("#define SDF_PX 8.0\n#define SDF 1.0\n#define ICON 0.0\nuniform bool u_is_halo;uniform sampler2D u_texture;uniform sampler2D u_texture_icon;uniform highp float u_gamma_scale;uniform lowp float u_device_pixel_ratio;varying vec4 v_data0;varying vec4 v_data1;\n#pragma mapbox: define highp vec4 fill_color\n#pragma mapbox: define highp vec4 halo_color\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp float halo_width\n#pragma mapbox: define lowp float halo_blur\nvoid main() {\n#pragma mapbox: initialize highp vec4 fill_color\n#pragma mapbox: initialize highp vec4 halo_color\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize lowp float halo_width\n#pragma mapbox: initialize lowp float halo_blur\nfloat fade_opacity\x3dv_data1[2];if (v_data1.w\x3d\x3dICON) {vec2 tex_icon\x3dv_data0.zw;lowp float alpha\x3dopacity*fade_opacity;gl_FragColor\x3dtexture2D(u_texture_icon,tex_icon)*alpha;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor\x3dvec4(1.0);\n#endif\nreturn;}vec2 tex\x3dv_data0.xy;float EDGE_GAMMA\x3d0.105/u_device_pixel_ratio;float gamma_scale\x3dv_data1.x;float size\x3dv_data1.y;float fontScale\x3dsize/24.0;lowp vec4 color\x3dfill_color;highp float gamma\x3dEDGE_GAMMA/(fontScale*u_gamma_scale);lowp float buff\x3d(256.0-64.0)/256.0;if (u_is_halo) {color\x3dhalo_color;gamma\x3d(halo_blur*1.19/SDF_PX+EDGE_GAMMA)/(fontScale*u_gamma_scale);buff\x3d(6.0-halo_width/fontScale)/SDF_PX;}lowp float dist\x3dtexture2D(u_texture,tex).a;highp float gamma_scaled\x3dgamma*gamma_scale;highp float alpha\x3dsmoothstep(buff-gamma_scaled,buff+gamma_scaled,dist);gl_FragColor\x3dcolor*(alpha*opacity*fade_opacity);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor\x3dvec4(1.0);\n#endif\n}",
"const float PI\x3d3.141592653589793;attribute vec4 a_pos_offset;attribute vec4 a_data;attribute vec3 a_projected_pos;attribute float a_fade_opacity;uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform mat4 u_matrix;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform highp float u_pitch;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform highp float u_camera_to_center_distance;uniform float u_fade_change;uniform vec2 u_texsize;uniform vec2 u_texsize_icon;varying vec4 v_data0;varying vec4 v_data1;\n#pragma mapbox: define highp vec4 fill_color\n#pragma mapbox: define highp vec4 halo_color\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp float halo_width\n#pragma mapbox: define lowp float halo_blur\nvoid main() {\n#pragma mapbox: initialize highp vec4 fill_color\n#pragma mapbox: initialize highp vec4 halo_color\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize lowp float halo_width\n#pragma mapbox: initialize lowp float halo_blur\nvec2 a_pos\x3da_pos_offset.xy;vec2 a_offset\x3da_pos_offset.zw;vec2 a_tex\x3da_data.xy;vec2 a_size\x3da_data.zw;float a_size_min\x3dfloor(a_size[0]*0.5);float is_sdf\x3da_size[0]-2.0*a_size_min;highp float segment_angle\x3d-a_projected_pos[2];float size;if (!u_is_size_zoom_constant \x26\x26 !u_is_size_feature_constant) {size\x3dmix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant \x26\x26 !u_is_size_feature_constant) {size\x3da_size_min/128.0;} else {size\x3du_size;}vec4 projectedPoint\x3du_matrix*vec4(a_pos,0,1);highp float camera_to_anchor_distance\x3dprojectedPoint.w;highp float distance_ratio\x3du_pitch_with_map ?\ncamera_to_anchor_distance/u_camera_to_center_distance :\nu_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio\x3dclamp(0.5+0.5*distance_ratio,0.0,4.0);size*\x3dperspective_ratio;float fontScale\x3dsize/24.0;highp float symbol_rotation\x3d0.0;if (u_rotate_symbol) {vec4 offsetProjectedPoint\x3du_matrix*vec4(a_pos+vec2(1,0),0,1);vec2 a\x3dprojectedPoint.xy/projectedPoint.w;vec2 b\x3doffsetProjectedPoint.xy/offsetProjectedPoint.w;symbol_rotation\x3datan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}highp float angle_sin\x3dsin(segment_angle+symbol_rotation);highp float angle_cos\x3dcos(segment_angle+symbol_rotation);mat2 rotation_matrix\x3dmat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);vec4 projected_pos\x3du_label_plane_matrix*vec4(a_projected_pos.xy,0.0,1.0);gl_Position\x3du_coord_matrix*vec4(projected_pos.xy/projected_pos.w+rotation_matrix*(a_offset/32.0*fontScale),0.0,1.0);float gamma_scale\x3dgl_Position.w;vec2 fade_opacity\x3dunpack_opacity(a_fade_opacity);float fade_change\x3dfade_opacity[1] \x3e 0.5 ? u_fade_change :-u_fade_change;float interpolated_fade_opacity\x3dmax(0.0,min(1.0,fade_opacity[0]+fade_change));v_data0.xy\x3da_tex/u_texsize;v_data0.zw\x3da_tex/u_texsize_icon;v_data1\x3dvec4(gamma_scale,size,interpolated_fade_opacity,is_sdf);}"),
ei=Object.freeze({__proto__:null,prelude:zd,background:Le,backgroundPattern:Xe,circle:gf,clippingMask:Me,heatmap:hf,heatmapTexture:Uf,collisionBox:eh,collisionCircle:Fg,debug:si,fill:Lh,fillOutline:di,fillOutlinePattern:rh,fillPattern:Gg,fillExtrusion:ti,fillExtrusionPattern:eg,hillshadePrepare:Qf,hillshade:Rf,line:Of,lineGradient:Ii,linePattern:Yg,lineSDF:sh,raster:Vi,symbolIcon:th,symbolSDF:Hg,symbolTextAndIcon:Mh}),uh=function(){this.boundLayoutVertexBuffer=this.boundProgram=null;this.boundPaintVertexBuffers=
[];this.vao=this.boundDynamicVertexBuffer=this.boundVertexOffset=this.boundIndexBuffer=null};uh.prototype.bind=function(Z,fa,da,ta,Ga,Za,hb,ub){this.context=Z;for(var Rb=this.boundPaintVertexBuffers.length!==ta.length,Yb=0;!Rb&&Yb<ta.length;Yb++)this.boundPaintVertexBuffers[Yb]!==ta[Yb]&&(Rb=!0);Z.extVertexArrayObject&&this.vao&&this.boundProgram===fa&&this.boundLayoutVertexBuffer===da&&!Rb&&this.boundIndexBuffer===Ga&&this.boundVertexOffset===Za&&this.boundDynamicVertexBuffer===hb&&this.boundDynamicVertexBuffer2===
ub?(Z.bindVertexArrayOES.set(this.vao),hb&&hb.bind(),Ga&&Ga.dynamicDraw&&Ga.bind(),ub&&ub.bind()):this.freshBind(fa,da,ta,Ga,Za,hb,ub)};uh.prototype.freshBind=function(Z,fa,da,ta,Ga,Za,hb){var ub=Z.numAttributes,Rb=this.context,Yb=Rb.gl;if(Rb.extVertexArrayObject)this.vao&&this.destroy(),this.vao=Rb.extVertexArrayObject.createVertexArrayOES(),Rb.bindVertexArrayOES.set(this.vao),this.boundProgram=Z,this.boundLayoutVertexBuffer=fa,this.boundPaintVertexBuffers=da,this.boundIndexBuffer=ta,this.boundVertexOffset=
Ga,this.boundDynamicVertexBuffer=Za,this.boundDynamicVertexBuffer2=hb;else{var dc=Rb.currentNumAttributes||0;for(var Ac=ub;Ac<dc;Ac++)Yb.disableVertexAttribArray(Ac)}fa.enableAttributes(Yb,Z);for(dc=0;dc<da.length;dc+=1)da[dc].enableAttributes(Yb,Z);Za&&Za.enableAttributes(Yb,Z);hb&&hb.enableAttributes(Yb,Z);fa.bind();fa.setVertexAttribPointers(Yb,Z,Ga);for(fa=0;fa<da.length;fa+=1)dc=da[fa],dc.bind(),dc.setVertexAttribPointers(Yb,Z,Ga);Za&&(Za.bind(),Za.setVertexAttribPointers(Yb,Z,Ga));ta&&ta.bind();
hb&&(hb.bind(),hb.setVertexAttribPointers(Yb,Z,Ga));Rb.currentNumAttributes=ub};uh.prototype.destroy=function(){this.vao&&(this.context.extVertexArrayObject.deleteVertexArrayOES(this.vao),this.vao=null)};var jf=function(Z,fa,da,ta,Ga){var Za=Z.gl;this.program=Za.createProgram();var hb=da?da.defines():[];Ga&&hb.push("#define OVERDRAW_INSPECTOR;");Ga=hb.concat(zd.fragmentSource,fa.fragmentSource).join("\n");hb=hb.concat(zd.vertexSource,fa.vertexSource).join("\n");fa=Za.createShader(Za.FRAGMENT_SHADER);
if(Za.isContextLost())this.failedToCreate=!0;else if(Za.shaderSource(fa,Ga),Za.compileShader(fa),Za.attachShader(this.program,fa),Ga=Za.createShader(Za.VERTEX_SHADER),Za.isContextLost())this.failedToCreate=!0;else{Za.shaderSource(Ga,hb);Za.compileShader(Ga);Za.attachShader(this.program,Ga);hb=da?da.layoutAttributes:[];for(var ub=0;ub<hb.length;ub++)Za.bindAttribLocation(this.program,ub,hb[ub].name);Za.linkProgram(this.program);Za.deleteShader(Ga);Za.deleteShader(fa);this.numAttributes=Za.getProgramParameter(this.program,
Za.ACTIVE_ATTRIBUTES);this.attributes={};fa={};for(Ga=0;Ga<this.numAttributes;Ga++)(hb=Za.getActiveAttrib(this.program,Ga))&&(this.attributes[hb.name]=Za.getAttribLocation(this.program,hb.name));Ga=Za.getProgramParameter(this.program,Za.ACTIVE_UNIFORMS);for(hb=0;hb<Ga;hb++)(ub=Za.getActiveUniform(this.program,hb))&&(fa[ub.name]=Za.getUniformLocation(this.program,ub.name));this.fixedUniforms=ta(Z,fa);this.binderUniforms=da?da.getUniforms(Z,fa):[]}};jf.prototype.draw=function(Z,fa,da,ta,Ga,Za,hb,ub,
Rb,Yb,dc,Ac,Ec,uc,Xb,fc){var Cc,bd=Z.gl;if(!this.failedToCreate){for(var nd in Z.program.set(this.program),Z.setDepthMode(da),Z.setStencilMode(ta),Z.setColorMode(Ga),Z.setCullFace(Za),this.fixedUniforms)this.fixedUniforms[nd].set(hb[nd]);uc&&uc.setUniforms(Z,this.binderUniforms,Ac,{zoom:Ec});da=(Cc={},Cc[bd.LINES]=2,Cc[bd.TRIANGLES]=3,Cc[bd.LINE_STRIP]=1,Cc)[fa];Cc=0;for(dc=dc.get();Cc<dc.length;Cc+=1)ta=dc[Cc],Ga=ta.vaos||(ta.vaos={}),(Ga[ub]||(Ga[ub]=new uh)).bind(Z,this,Rb,uc?uc.getPaintVertexBuffers():
[],Yb,ta.vertexOffset,Xb,fc),bd.drawElements(fa,ta.primitiveLength*da,bd.UNSIGNED_SHORT,ta.primitiveOffset*da*2)}};var Bg=function(Z,fa,da,ta){var Ga=fa.style.light,Za=Ga.properties.get("position");Za=[Za.x,Za.y,Za.z];var hb=b.create$1();"viewport"===Ga.properties.get("anchor")&&b.fromRotation(hb,-fa.transform.angle);b.transformMat3(Za,Za,hb);fa=Ga.properties.get("color");return{u_matrix:Z,u_lightpos:Za,u_lightintensity:Ga.properties.get("intensity"),u_lightcolor:[fa.r,fa.g,fa.b],u_vertical_gradient:+da,
u_opacity:ta}},Nh=function(Z,fa,da,ta){var Ga=Z.transform;if("map"===ta.paint.get("circle-pitch-alignment")){var Za=R(da,1,Ga.zoom);var hb=!0;Za=[Za,Za]}else hb=!1,Za=Ga.pixelsToGLUnits;return{u_camera_to_center_distance:Ga.cameraToCenterDistance,u_scale_with_map:+("map"===ta.paint.get("circle-pitch-scale")),u_matrix:Z.translatePosMatrix(fa.posMatrix,da,ta.paint.get("circle-translate"),ta.paint.get("circle-translate-anchor")),u_pitch_with_map:+hb,u_device_pixel_ratio:b.browser.devicePixelRatio,u_extrude_scale:Za}},
Oh=function(Z,fa,da){var ta=R(da,1,fa.zoom),Ga=Math.pow(2,fa.zoom-da.tileID.overscaledZ);da=da.tileID.overscaleFactor();return{u_matrix:Z,u_camera_to_center_distance:fa.cameraToCenterDistance,u_pixels_to_tile_units:ta,u_extrude_scale:[fa.pixelsToGLUnits[0]/(ta*Ga),fa.pixelsToGLUnits[1]/(ta*Ga)],u_overscale_factor:da}},Wi=function(Z,fa,da){return void 0===da&&(da=1),{u_matrix:Z,u_color:fa,u_overlay:0,u_overlay_scale:da}},ui=function(Z,fa,da,ta){return{u_matrix:Z,u_extrude_scale:R(fa,1,da),u_intensity:ta}},
Ji=function(Z,fa,da){var ta=Z.transform;return{u_matrix:ka(Z,fa,da),u_ratio:1/R(fa,1,ta.zoom),u_device_pixel_ratio:b.browser.devicePixelRatio,u_units_to_pixels:[1/ta.pixelsToGLUnits[0],1/ta.pixelsToGLUnits[1]]}},fi,fh=function(Z,fa,da,ta,Ga,Za,hb,ub,Rb,Yb){var dc=Ga.transform;return{u_is_size_zoom_constant:+("constant"===Z||"source"===Z),u_is_size_feature_constant:+("constant"===Z||"camera"===Z),u_size_t:fa?fa.uSizeT:0,u_size:fa?fa.uSize:0,u_camera_to_center_distance:dc.cameraToCenterDistance,u_pitch:dc.pitch/
360*2*Math.PI,u_rotate_symbol:+da,u_aspect_ratio:dc.width/dc.height,u_fade_change:Ga.options.fadeDuration?Ga.symbolFadeChange:1,u_matrix:Za,u_label_plane_matrix:hb,u_coord_matrix:ub,u_is_text:+Rb,u_pitch_with_map:+ta,u_texsize:Yb,u_texture:0}},Ph=function(Z,fa,da,ta,Ga,Za,hb,ub,Rb,Yb,dc){var Ac=Ga.transform;return b.extend(fh(Z,fa,da,ta,Ga,Za,hb,ub,Rb,Yb),{u_gamma_scale:ta?Math.cos(Ac._pitch)*Ac.cameraToCenterDistance:1,u_device_pixel_ratio:b.browser.devicePixelRatio,u_is_halo:+dc})},Qh=function(Z,
fa,da,ta,Ga,Za,hb,ub,Rb,Yb){return b.extend(Ph(Z,fa,da,ta,Ga,Za,hb,ub,!0,Rb,!0),{u_texsize_icon:Yb,u_texture_icon:1})},vi=function(Z,fa,da,ta,Ga,Za){return b.extend(function(hb,ub,Rb,Yb){var dc=Rb.imageManager.getPattern(hb.from.toString());hb=Rb.imageManager.getPattern(hb.to.toString());var Ac=Rb.imageManager.getPixelSize(),Ec=Math.pow(2,Yb.tileID.overscaledZ),uc=Yb.tileSize*Math.pow(2,Rb.transform.tileZoom)/Ec;Ec=uc*(Yb.tileID.canonical.x+Yb.tileID.wrap*Ec);uc*=Yb.tileID.canonical.y;return{u_image:0,
u_pattern_tl_a:dc.tl,u_pattern_br_a:dc.br,u_pattern_tl_b:hb.tl,u_pattern_br_b:hb.br,u_texsize:[Ac.width,Ac.height],u_mix:ub.t,u_pattern_size_a:dc.displaySize,u_pattern_size_b:hb.displaySize,u_scale_a:ub.fromScale,u_scale_b:ub.toScale,u_tile_units_to_pixels:1/R(Yb,1,Rb.transform.tileZoom),u_pixel_coord_upper:[Ec>>16,uc>>16],u_pixel_coord_lower:[65535&Ec,65535&uc]}}(ta,Za,da,Ga),{u_matrix:Z,u_opacity:fa})},vh={fillExtrusion:function(Z,fa){return{u_matrix:new b.UniformMatrix4f(Z,fa.u_matrix),u_lightpos:new b.Uniform3f(Z,
fa.u_lightpos),u_lightintensity:new b.Uniform1f(Z,fa.u_lightintensity),u_lightcolor:new b.Uniform3f(Z,fa.u_lightcolor),u_vertical_gradient:new b.Uniform1f(Z,fa.u_vertical_gradient),u_opacity:new b.Uniform1f(Z,fa.u_opacity)}},fillExtrusionPattern:function(Z,fa){return{u_matrix:new b.UniformMatrix4f(Z,fa.u_matrix),u_lightpos:new b.Uniform3f(Z,fa.u_lightpos),u_lightintensity:new b.Uniform1f(Z,fa.u_lightintensity),u_lightcolor:new b.Uniform3f(Z,fa.u_lightcolor),u_vertical_gradient:new b.Uniform1f(Z,fa.u_vertical_gradient),
u_height_factor:new b.Uniform1f(Z,fa.u_height_factor),u_image:new b.Uniform1i(Z,fa.u_image),u_texsize:new b.Uniform2f(Z,fa.u_texsize),u_pixel_coord_upper:new b.Uniform2f(Z,fa.u_pixel_coord_upper),u_pixel_coord_lower:new b.Uniform2f(Z,fa.u_pixel_coord_lower),u_scale:new b.Uniform3f(Z,fa.u_scale),u_fade:new b.Uniform1f(Z,fa.u_fade),u_opacity:new b.Uniform1f(Z,fa.u_opacity)}},fill:function(Z,fa){return{u_matrix:new b.UniformMatrix4f(Z,fa.u_matrix)}},fillPattern:function(Z,fa){return{u_matrix:new b.UniformMatrix4f(Z,
fa.u_matrix),u_image:new b.Uniform1i(Z,fa.u_image),u_texsize:new b.Uniform2f(Z,fa.u_texsize),u_pixel_coord_upper:new b.Uniform2f(Z,fa.u_pixel_coord_upper),u_pixel_coord_lower:new b.Uniform2f(Z,fa.u_pixel_coord_lower),u_scale:new b.Uniform3f(Z,fa.u_scale),u_fade:new b.Uniform1f(Z,fa.u_fade)}},fillOutline:function(Z,fa){return{u_matrix:new b.UniformMatrix4f(Z,fa.u_matrix),u_world:new b.Uniform2f(Z,fa.u_world)}},fillOutlinePattern:function(Z,fa){return{u_matrix:new b.UniformMatrix4f(Z,fa.u_matrix),u_world:new b.Uniform2f(Z,
fa.u_world),u_image:new b.Uniform1i(Z,fa.u_image),u_texsize:new b.Uniform2f(Z,fa.u_texsize),u_pixel_coord_upper:new b.Uniform2f(Z,fa.u_pixel_coord_upper),u_pixel_coord_lower:new b.Uniform2f(Z,fa.u_pixel_coord_lower),u_scale:new b.Uniform3f(Z,fa.u_scale),u_fade:new b.Uniform1f(Z,fa.u_fade)}},circle:function(Z,fa){return{u_camera_to_center_distance:new b.Uniform1f(Z,fa.u_camera_to_center_distance),u_scale_with_map:new b.Uniform1i(Z,fa.u_scale_with_map),u_pitch_with_map:new b.Uniform1i(Z,fa.u_pitch_with_map),
u_extrude_scale:new b.Uniform2f(Z,fa.u_extrude_scale),u_device_pixel_ratio:new b.Uniform1f(Z,fa.u_device_pixel_ratio),u_matrix:new b.UniformMatrix4f(Z,fa.u_matrix)}},collisionBox:function(Z,fa){return{u_matrix:new b.UniformMatrix4f(Z,fa.u_matrix),u_camera_to_center_distance:new b.Uniform1f(Z,fa.u_camera_to_center_distance),u_pixels_to_tile_units:new b.Uniform1f(Z,fa.u_pixels_to_tile_units),u_extrude_scale:new b.Uniform2f(Z,fa.u_extrude_scale),u_overscale_factor:new b.Uniform1f(Z,fa.u_overscale_factor)}},
collisionCircle:function(Z,fa){return{u_matrix:new b.UniformMatrix4f(Z,fa.u_matrix),u_inv_matrix:new b.UniformMatrix4f(Z,fa.u_inv_matrix),u_camera_to_center_distance:new b.Uniform1f(Z,fa.u_camera_to_center_distance),u_viewport_size:new b.Uniform2f(Z,fa.u_viewport_size)}},debug:function(Z,fa){return{u_color:new b.UniformColor(Z,fa.u_color),u_matrix:new b.UniformMatrix4f(Z,fa.u_matrix),u_overlay:new b.Uniform1i(Z,fa.u_overlay),u_overlay_scale:new b.Uniform1f(Z,fa.u_overlay_scale)}},clippingMask:function(Z,
fa){return{u_matrix:new b.UniformMatrix4f(Z,fa.u_matrix)}},heatmap:function(Z,fa){return{u_extrude_scale:new b.Uniform1f(Z,fa.u_extrude_scale),u_intensity:new b.Uniform1f(Z,fa.u_intensity),u_matrix:new b.UniformMatrix4f(Z,fa.u_matrix)}},heatmapTexture:function(Z,fa){return{u_matrix:new b.UniformMatrix4f(Z,fa.u_matrix),u_world:new b.Uniform2f(Z,fa.u_world),u_image:new b.Uniform1i(Z,fa.u_image),u_color_ramp:new b.Uniform1i(Z,fa.u_color_ramp),u_opacity:new b.Uniform1f(Z,fa.u_opacity)}},hillshade:function(Z,
fa){return{u_matrix:new b.UniformMatrix4f(Z,fa.u_matrix),u_image:new b.Uniform1i(Z,fa.u_image),u_latrange:new b.Uniform2f(Z,fa.u_latrange),u_light:new b.Uniform2f(Z,fa.u_light),u_shadow:new b.UniformColor(Z,fa.u_shadow),u_highlight:new b.UniformColor(Z,fa.u_highlight),u_accent:new b.UniformColor(Z,fa.u_accent)}},hillshadePrepare:function(Z,fa){return{u_matrix:new b.UniformMatrix4f(Z,fa.u_matrix),u_image:new b.Uniform1i(Z,fa.u_image),u_dimension:new b.Uniform2f(Z,fa.u_dimension),u_zoom:new b.Uniform1f(Z,
fa.u_zoom),u_maxzoom:new b.Uniform1f(Z,fa.u_maxzoom),u_unpack:new b.Uniform4f(Z,fa.u_unpack)}},line:function(Z,fa){return{u_matrix:new b.UniformMatrix4f(Z,fa.u_matrix),u_ratio:new b.Uniform1f(Z,fa.u_ratio),u_device_pixel_ratio:new b.Uniform1f(Z,fa.u_device_pixel_ratio),u_units_to_pixels:new b.Uniform2f(Z,fa.u_units_to_pixels)}},lineGradient:function(Z,fa){return{u_matrix:new b.UniformMatrix4f(Z,fa.u_matrix),u_ratio:new b.Uniform1f(Z,fa.u_ratio),u_device_pixel_ratio:new b.Uniform1f(Z,fa.u_device_pixel_ratio),
u_units_to_pixels:new b.Uniform2f(Z,fa.u_units_to_pixels),u_image:new b.Uniform1i(Z,fa.u_image)}},linePattern:function(Z,fa){return{u_matrix:new b.UniformMatrix4f(Z,fa.u_matrix),u_texsize:new b.Uniform2f(Z,fa.u_texsize),u_ratio:new b.Uniform1f(Z,fa.u_ratio),u_device_pixel_ratio:new b.Uniform1f(Z,fa.u_device_pixel_ratio),u_image:new b.Uniform1i(Z,fa.u_image),u_units_to_pixels:new b.Uniform2f(Z,fa.u_units_to_pixels),u_scale:new b.Uniform3f(Z,fa.u_scale),u_fade:new b.Uniform1f(Z,fa.u_fade)}},lineSDF:function(Z,
fa){return{u_matrix:new b.UniformMatrix4f(Z,fa.u_matrix),u_ratio:new b.Uniform1f(Z,fa.u_ratio),u_device_pixel_ratio:new b.Uniform1f(Z,fa.u_device_pixel_ratio),u_units_to_pixels:new b.Uniform2f(Z,fa.u_units_to_pixels),u_patternscale_a:new b.Uniform2f(Z,fa.u_patternscale_a),u_patternscale_b:new b.Uniform2f(Z,fa.u_patternscale_b),u_sdfgamma:new b.Uniform1f(Z,fa.u_sdfgamma),u_image:new b.Uniform1i(Z,fa.u_image),u_tex_y_a:new b.Uniform1f(Z,fa.u_tex_y_a),u_tex_y_b:new b.Uniform1f(Z,fa.u_tex_y_b),u_mix:new b.Uniform1f(Z,
fa.u_mix)}},raster:function(Z,fa){return{u_matrix:new b.UniformMatrix4f(Z,fa.u_matrix),u_tl_parent:new b.Uniform2f(Z,fa.u_tl_parent),u_scale_parent:new b.Uniform1f(Z,fa.u_scale_parent),u_buffer_scale:new b.Uniform1f(Z,fa.u_buffer_scale),u_fade_t:new b.Uniform1f(Z,fa.u_fade_t),u_opacity:new b.Uniform1f(Z,fa.u_opacity),u_image0:new b.Uniform1i(Z,fa.u_image0),u_image1:new b.Uniform1i(Z,fa.u_image1),u_brightness_low:new b.Uniform1f(Z,fa.u_brightness_low),u_brightness_high:new b.Uniform1f(Z,fa.u_brightness_high),
u_saturation_factor:new b.Uniform1f(Z,fa.u_saturation_factor),u_contrast_factor:new b.Uniform1f(Z,fa.u_contrast_factor),u_spin_weights:new b.Uniform3f(Z,fa.u_spin_weights)}},symbolIcon:function(Z,fa){return{u_is_size_zoom_constant:new b.Uniform1i(Z,fa.u_is_size_zoom_constant),u_is_size_feature_constant:new b.Uniform1i(Z,fa.u_is_size_feature_constant),u_size_t:new b.Uniform1f(Z,fa.u_size_t),u_size:new b.Uniform1f(Z,fa.u_size),u_camera_to_center_distance:new b.Uniform1f(Z,fa.u_camera_to_center_distance),
u_pitch:new b.Uniform1f(Z,fa.u_pitch),u_rotate_symbol:new b.Uniform1i(Z,fa.u_rotate_symbol),u_aspect_ratio:new b.Uniform1f(Z,fa.u_aspect_ratio),u_fade_change:new b.Uniform1f(Z,fa.u_fade_change),u_matrix:new b.UniformMatrix4f(Z,fa.u_matrix),u_label_plane_matrix:new b.UniformMatrix4f(Z,fa.u_label_plane_matrix),u_coord_matrix:new b.UniformMatrix4f(Z,fa.u_coord_matrix),u_is_text:new b.Uniform1i(Z,fa.u_is_text),u_pitch_with_map:new b.Uniform1i(Z,fa.u_pitch_with_map),u_texsize:new b.Uniform2f(Z,fa.u_texsize),
u_texture:new b.Uniform1i(Z,fa.u_texture)}},symbolSDF:function(Z,fa){return{u_is_size_zoom_constant:new b.Uniform1i(Z,fa.u_is_size_zoom_constant),u_is_size_feature_constant:new b.Uniform1i(Z,fa.u_is_size_feature_constant),u_size_t:new b.Uniform1f(Z,fa.u_size_t),u_size:new b.Uniform1f(Z,fa.u_size),u_camera_to_center_distance:new b.Uniform1f(Z,fa.u_camera_to_center_distance),u_pitch:new b.Uniform1f(Z,fa.u_pitch),u_rotate_symbol:new b.Uniform1i(Z,fa.u_rotate_symbol),u_aspect_ratio:new b.Uniform1f(Z,
fa.u_aspect_ratio),u_fade_change:new b.Uniform1f(Z,fa.u_fade_change),u_matrix:new b.UniformMatrix4f(Z,fa.u_matrix),u_label_plane_matrix:new b.UniformMatrix4f(Z,fa.u_label_plane_matrix),u_coord_matrix:new b.UniformMatrix4f(Z,fa.u_coord_matrix),u_is_text:new b.Uniform1i(Z,fa.u_is_text),u_pitch_with_map:new b.Uniform1i(Z,fa.u_pitch_with_map),u_texsize:new b.Uniform2f(Z,fa.u_texsize),u_texture:new b.Uniform1i(Z,fa.u_texture),u_gamma_scale:new b.Uniform1f(Z,fa.u_gamma_scale),u_device_pixel_ratio:new b.Uniform1f(Z,
fa.u_device_pixel_ratio),u_is_halo:new b.Uniform1i(Z,fa.u_is_halo)}},symbolTextAndIcon:function(Z,fa){return{u_is_size_zoom_constant:new b.Uniform1i(Z,fa.u_is_size_zoom_constant),u_is_size_feature_constant:new b.Uniform1i(Z,fa.u_is_size_feature_constant),u_size_t:new b.Uniform1f(Z,fa.u_size_t),u_size:new b.Uniform1f(Z,fa.u_size),u_camera_to_center_distance:new b.Uniform1f(Z,fa.u_camera_to_center_distance),u_pitch:new b.Uniform1f(Z,fa.u_pitch),u_rotate_symbol:new b.Uniform1i(Z,fa.u_rotate_symbol),
u_aspect_ratio:new b.Uniform1f(Z,fa.u_aspect_ratio),u_fade_change:new b.Uniform1f(Z,fa.u_fade_change),u_matrix:new b.UniformMatrix4f(Z,fa.u_matrix),u_label_plane_matrix:new b.UniformMatrix4f(Z,fa.u_label_plane_matrix),u_coord_matrix:new b.UniformMatrix4f(Z,fa.u_coord_matrix),u_is_text:new b.Uniform1i(Z,fa.u_is_text),u_pitch_with_map:new b.Uniform1i(Z,fa.u_pitch_with_map),u_texsize:new b.Uniform2f(Z,fa.u_texsize),u_texsize_icon:new b.Uniform2f(Z,fa.u_texsize_icon),u_texture:new b.Uniform1i(Z,fa.u_texture),
u_texture_icon:new b.Uniform1i(Z,fa.u_texture_icon),u_gamma_scale:new b.Uniform1f(Z,fa.u_gamma_scale),u_device_pixel_ratio:new b.Uniform1f(Z,fa.u_device_pixel_ratio),u_is_halo:new b.Uniform1i(Z,fa.u_is_halo)}},background:function(Z,fa){return{u_matrix:new b.UniformMatrix4f(Z,fa.u_matrix),u_opacity:new b.Uniform1f(Z,fa.u_opacity),u_color:new b.UniformColor(Z,fa.u_color)}},backgroundPattern:function(Z,fa){return{u_matrix:new b.UniformMatrix4f(Z,fa.u_matrix),u_opacity:new b.Uniform1f(Z,fa.u_opacity),
u_image:new b.Uniform1i(Z,fa.u_image),u_pattern_tl_a:new b.Uniform2f(Z,fa.u_pattern_tl_a),u_pattern_br_a:new b.Uniform2f(Z,fa.u_pattern_br_a),u_pattern_tl_b:new b.Uniform2f(Z,fa.u_pattern_tl_b),u_pattern_br_b:new b.Uniform2f(Z,fa.u_pattern_br_b),u_texsize:new b.Uniform2f(Z,fa.u_texsize),u_mix:new b.Uniform1f(Z,fa.u_mix),u_pattern_size_a:new b.Uniform2f(Z,fa.u_pattern_size_a),u_pattern_size_b:new b.Uniform2f(Z,fa.u_pattern_size_b),u_scale_a:new b.Uniform1f(Z,fa.u_scale_a),u_scale_b:new b.Uniform1f(Z,
fa.u_scale_b),u_pixel_coord_upper:new b.Uniform2f(Z,fa.u_pixel_coord_upper),u_pixel_coord_lower:new b.Uniform2f(Z,fa.u_pixel_coord_lower),u_tile_units_to_pixels:new b.Uniform1f(Z,fa.u_tile_units_to_pixels)}}},Qg=b.identity(new Float32Array(16)),Pf=new b.Color(1,0,0,1),Xi=new b.Color(0,1,0,1),Zg=new b.Color(0,0,1,1),hi=new b.Color(1,0,1,1),wi=new b.Color(0,1,1,1),Rg={symbol:function(Z,fa,da,ta,Ga){if("translucent"===Z.renderPass){var Za=oe.disabled,hb=Z.colorModeForRenderPass();if(da.layout.get("text-variable-anchor")){var ub=
da.layout.get("text-rotation-alignment"),Rb=da.layout.get("text-pitch-alignment"),Yb=Z.transform;ub="map"===ub;Rb="map"===Rb;for(var dc=0;dc<ta.length;dc+=1){var Ac=ta[dc],Ec=fa.getTile(Ac),uc=Ec.getBucket(da);if(uc&&uc.text&&uc.text.segments.get().length){var Xb=b.evaluateSizeForZoom(uc.textSizeData,Yb.zoom),fc=R(Ec,1,Z.transform.zoom),Cc=D(Ac.posMatrix,Rb,ub,Z.transform,fc),bd="none"!==da.layout.get("icon-text-fit")&&uc.hasIconData();if(Xb){fc=ub;var nd=Rb,Nc=Ga,vd=b.symbolSize,Ad=Yb;Ac=Ac.posMatrix;
var le=Math.pow(2,Yb.zoom-Ec.tileID.overscaledZ),Ud=Xb,Sd=bd,fe=uc.text.placedSymbolArray;Xb=uc.text.dynamicLayoutVertexArray;bd=uc.icon.dynamicLayoutVertexArray;Ec={};Xb.clear();for(var ue=0;ue<fe.length;ue++){var Ee=fe.get(ue),Re=Ee.hidden||!Ee.crossTileID||uc.allowVerticalPlacement&&!Ee.placedOrientation?null:Nc[Ee.crossTileID];if(Re){var lf=new b.Point(Ee.anchorX,Ee.anchorY),he=B(lf,nd?Ac:Cc),ef=.5+Ad.cameraToCenterDistance/he.signedDistanceFromCamera*.5,mf=vd.evaluateSizeForFeature(uc.textSizeData,
Ud,Ee)*ef/b.ONE_EM;nd&&(mf*=uc.tilePixelRatio/le);ef=Re.anchor;var Ae=Re.width,$e=Re.height,vf=Re.textOffset;Re=Re.textBoxScale;var nf=b.getAnchorAlignment(ef);Ae*=-(nf.horizontalAlign-.5);$e*=-(nf.verticalAlign-.5);ef=b.evaluateVariableOffset(ef,vf);ef=new b.Point((Ae/Re+ef[0])*mf,($e/Re+ef[1])*mf);lf=nd?B(lf.add(ef),Cc).point:he.point.add(fc?ef.rotate(-Ad.angle):ef);he=uc.allowVerticalPlacement&&Ee.placedOrientation===b.WritingMode.vertical?Math.PI/2:0;for(ef=0;ef<Ee.numGlyphs;ef++)b.addDynamicAttributes(Xb,
lf,he);Sd&&0<=Ee.associatedIconIndex&&(Ec[Ee.associatedIconIndex]={shiftedAnchor:lf,angle:he})}else Q(Ee.numGlyphs,Xb)}if(Sd){bd.clear();fc=uc.icon.placedSymbolArray;for(nd=0;nd<fc.length;nd++)if(Nc=fc.get(nd),Nc.hidden)Q(Nc.numGlyphs,bd);else if(vd=Ec[nd])for(Ad=0;Ad<Nc.numGlyphs;Ad++)b.addDynamicAttributes(bd,vd.shiftedAnchor,vd.angle);else Q(Nc.numGlyphs,bd);uc.icon.dynamicLayoutVertexBuffer.updateData(bd)}uc.text.dynamicLayoutVertexBuffer.updateData(Xb)}}}}0!==da.paint.get("icon-opacity").constantOr(1)&&
ca(Z,fa,da,ta,!1,da.paint.get("icon-translate"),da.paint.get("icon-translate-anchor"),da.layout.get("icon-rotation-alignment"),da.layout.get("icon-pitch-alignment"),da.layout.get("icon-keep-upright"),Za,hb);0!==da.paint.get("text-opacity").constantOr(1)&&ca(Z,fa,da,ta,!0,da.paint.get("text-translate"),da.paint.get("text-translate-anchor"),da.layout.get("text-rotation-alignment"),da.layout.get("text-pitch-alignment"),da.layout.get("text-keep-upright"),Za,hb);fa.map.showCollisionBoxes&&(ha(Z,fa,da,
ta,da.paint.get("text-translate"),da.paint.get("text-translate-anchor"),!0),ha(Z,fa,da,ta,da.paint.get("icon-translate"),da.paint.get("icon-translate-anchor"),!1))}},circle:function(Z,fa,da,ta){if("translucent"===Z.renderPass){var Ga=da.paint.get("circle-opacity"),Za=da.paint.get("circle-stroke-width"),hb=da.paint.get("circle-stroke-opacity"),ub=void 0!==da.layout.get("circle-sort-key").constantOr(1);if(0!==Ga.constantOr(1)||0!==Za.constantOr(1)&&0!==hb.constantOr(1)){Ga=Z.context;Za=Ga.gl;hb=Z.depthModeForSublayer(0,
Hd.ReadOnly);for(var Rb=oe.disabled,Yb=Z.colorModeForRenderPass(),dc=[],Ac=0;Ac<ta.length;Ac++){var Ec=ta[Ac],uc=fa.getTile(Ec),Xb=uc.getBucket(da);if(Xb){var fc=Xb.programConfigurations.get(da.id);Ec={programConfiguration:fc,program:Z.useProgram("circle",fc),layoutVertexBuffer:Xb.layoutVertexBuffer,indexBuffer:Xb.indexBuffer,uniformValues:Nh(Z,Ec,uc,da)};if(ub)for(uc=0,Xb=Xb.segments.get();uc<Xb.length;uc+=1)fc=Xb[uc],dc.push({segments:new b.SegmentVector([fc]),sortKey:fc.sortKey,state:Ec});else dc.push({segments:Xb.segments,
sortKey:0,state:Ec})}}ub&&dc.sort(function(Cc,bd){return Cc.sortKey-bd.sortKey});for(fa=0;fa<dc.length;fa+=1)ta=dc[fa],ub=ta.state,ub.program.draw(Ga,Za.TRIANGLES,hb,Rb,Yb,Fd.disabled,ub.uniformValues,da.id,ub.layoutVertexBuffer,ub.indexBuffer,ta.segments,da.paint,Z.transform.zoom,ub.programConfiguration)}}},heatmap:function(Z,fa,da,ta){if(0!==da.paint.get("heatmap-opacity"))if("offscreen"===Z.renderPass){var Ga=Z.context,Za=Ga.gl,hb=oe.disabled,ub=new Ge([Za.ONE,Za.ONE],b.Color.transparent,[!0,!0,
!0,!0]);!function(uc,Xb,fc){var Cc=uc.gl;uc.activeTexture.set(Cc.TEXTURE1);uc.viewport.set([0,0,Xb.width/4,Xb.height/4]);var bd=fc.heatmapFbo;if(bd)Cc.bindTexture(Cc.TEXTURE_2D,bd.colorAttachment.get()),uc.bindFramebuffer.set(bd.framebuffer);else{var nd=Cc.createTexture();Cc.bindTexture(Cc.TEXTURE_2D,nd);Cc.texParameteri(Cc.TEXTURE_2D,Cc.TEXTURE_WRAP_S,Cc.CLAMP_TO_EDGE);Cc.texParameteri(Cc.TEXTURE_2D,Cc.TEXTURE_WRAP_T,Cc.CLAMP_TO_EDGE);Cc.texParameteri(Cc.TEXTURE_2D,Cc.TEXTURE_MIN_FILTER,Cc.LINEAR);
Cc.texParameteri(Cc.TEXTURE_2D,Cc.TEXTURE_MAG_FILTER,Cc.LINEAR);fc=bd=fc.heatmapFbo=uc.createFramebuffer(Xb.width/4,Xb.height/4,!1);Cc=uc.gl;Cc.texImage2D(Cc.TEXTURE_2D,0,Cc.RGBA,Xb.width/4,Xb.height/4,0,Cc.RGBA,uc.extRenderToTextureHalfFloat?uc.extTextureHalfFloat.HALF_FLOAT_OES:Cc.UNSIGNED_BYTE,null);fc.colorAttachment.set(nd)}}(Ga,Z,da);Ga.clear({color:b.Color.transparent});for(var Rb=0;Rb<ta.length;Rb++){var Yb=ta[Rb];if(!fa.hasRenderableParent(Yb)){var dc=fa.getTile(Yb),Ac=dc.getBucket(da);if(Ac){var Ec=
Ac.programConfigurations.get(da.id);Z.useProgram("heatmap",Ec).draw(Ga,Za.TRIANGLES,Hd.disabled,hb,ub,Fd.disabled,ui(Yb.posMatrix,dc,Z.transform.zoom,da.paint.get("heatmap-intensity")),da.id,Ac.layoutVertexBuffer,Ac.indexBuffer,Ac.segments,da.paint,Z.transform.zoom,Ec)}}}Ga.viewport.set([0,0,Z.width,Z.height])}else"translucent"===Z.renderPass&&(Z.context.setColorMode(Z.colorModeForRenderPass()),function(uc,Xb){var fc=uc.context,Cc=fc.gl,bd=Xb.heatmapFbo;bd&&(fc.activeTexture.set(Cc.TEXTURE0),Cc.bindTexture(Cc.TEXTURE_2D,
bd.colorAttachment.get()),fc.activeTexture.set(Cc.TEXTURE1),(bd=Xb.colorRampTexture)||(bd=Xb.colorRampTexture=new b.Texture(fc,Xb.colorRamp,Cc.RGBA)),bd.bind(Cc.LINEAR,Cc.CLAMP_TO_EDGE),uc.useProgram("heatmapTexture").draw(fc,Cc.TRIANGLES,Hd.disabled,oe.disabled,uc.colorModeForRenderPass(),Fd.disabled,function(nd,Nc,vd,Ad){vd=b.create();b.ortho(vd,0,nd.width,nd.height,0,0,1);nd=nd.context.gl;return{u_matrix:vd,u_world:[nd.drawingBufferWidth,nd.drawingBufferHeight],u_image:0,u_color_ramp:1,u_opacity:Nc.paint.get("heatmap-opacity")}}(uc,
Xb),Xb.id,uc.viewportBuffer,uc.quadTriangleIndexBuffer,uc.viewportSegments,Xb.paint,uc.transform.zoom))}(Z,da))},line:function(Z,fa,da,ta){if("translucent"===Z.renderPass){var Ga=da.paint.get("line-opacity"),Za=da.paint.get("line-width");if(0!==Ga.constantOr(1)&&0!==Za.constantOr(1)){Ga=Z.depthModeForSublayer(0,Hd.ReadOnly);Za=Z.colorModeForRenderPass();var hb=da.paint.get("line-dasharray"),ub=da.paint.get("line-pattern"),Rb=ub.constantOr(1),Yb=da.paint.get("line-gradient"),dc=da.getCrossfadeParameters(),
Ac=Rb?"linePattern":hb?"lineSDF":Yb?"lineGradient":"line",Ec=Z.context,uc=Ec.gl,Xb=!0;if(Yb){Ec.activeTexture.set(uc.TEXTURE0);var fc=da.gradientTexture;if(!da.gradient)return;fc||(fc=da.gradientTexture=new b.Texture(Ec,da.gradient,uc.RGBA));fc.bind(uc.LINEAR,uc.CLAMP_TO_EDGE)}for(fc=0;fc<ta.length;fc+=1){var Cc=ta[fc],bd=fa.getTile(Cc);if(!Rb||bd.patternsLoaded()){var nd=bd.getBucket(da);if(nd){var Nc=nd.programConfigurations.get(da.id),vd=Z.context.program.get(),Ad=Z.useProgram(Ac,Nc);Xb=Xb||Ad.program!==
vd;var le=ub.constantOr(null);if(le&&bd.imageAtlas){var Ud=bd.imageAtlas;vd=Ud.patternPositions[le.to.toString()];le=Ud.patternPositions[le.from.toString()];vd&&le&&Nc.setConstantPatternPositions(vd,le)}if(Rb){vd=Z;le=bd;Ud=da;var Sd=dc,fe=vd.transform,ue=1/R(le,1,fe.tileZoom);vd={u_matrix:ka(vd,le,Ud),u_texsize:le.imageAtlasTexture.size,u_ratio:1/R(le,1,fe.zoom),u_device_pixel_ratio:b.browser.devicePixelRatio,u_image:0,u_scale:[ue,Sd.fromScale,Sd.toScale],u_fade:Sd.t,u_units_to_pixels:[1/fe.pixelsToGLUnits[0],
1/fe.pixelsToGLUnits[1]]}}else if(hb){vd=Z;le=bd;Ud=da;var Ee=hb;Sd=dc;fe=vd.lineAtlas;ue=1/R(le,1,vd.transform.tileZoom);var Re="round"===Ud.layout.get("line-cap"),lf=fe.getDash(Ee.from,Re);Ee=fe.getDash(Ee.to,Re);Re=lf.width*Sd.fromScale;var he=Ee.width*Sd.toScale;vd=b.extend(Ji(vd,le,Ud),{u_patternscale_a:[ue/Re,-lf.height/2],u_patternscale_b:[ue/he,-Ee.height/2],u_sdfgamma:fe.width/(256*Math.min(Re,he)*b.browser.devicePixelRatio)/2,u_image:0,u_tex_y_a:lf.y,u_tex_y_b:Ee.y,u_mix:Sd.t})}else vd=
Yb?b.extend(Ji(Z,bd,da),{u_image:0}):Ji(Z,bd,da);Rb?(Ec.activeTexture.set(uc.TEXTURE0),bd.imageAtlasTexture.bind(uc.LINEAR,uc.CLAMP_TO_EDGE),Nc.updatePaintBuffers(dc)):hb&&(Xb||Z.lineAtlas.dirty)&&(Ec.activeTexture.set(uc.TEXTURE0),Z.lineAtlas.bind(Ec));Ad.draw(Ec,uc.TRIANGLES,Ga,Z.stencilModeForClipping(Cc),Za,Fd.disabled,vd,da.id,nd.layoutVertexBuffer,nd.indexBuffer,nd.segments,da.paint,Z.transform.zoom,Nc);Xb=!1}}}}}},fill:function(Z,fa,da,ta){var Ga=da.paint.get("fill-color"),Za=da.paint.get("fill-opacity");
if(0!==Za.constantOr(1)){var hb=Z.colorModeForRenderPass(),ub=da.paint.get("fill-pattern");Ga=Z.opaquePassEnabledForLayer()&&!ub.constantOr(1)&&1===Ga.constantOr(b.Color.transparent).a&&1===Za.constantOr(0)?"opaque":"translucent";Z.renderPass===Ga&&(Ga=Z.depthModeForSublayer(1,"opaque"===Z.renderPass?Hd.ReadWrite:Hd.ReadOnly),ma(Z,fa,da,ta,Ga,hb,!1));"translucent"===Z.renderPass&&da.paint.get("fill-antialias")&&(Ga=Z.depthModeForSublayer(da.getPaintProperty("fill-outline-color")?2:0,Hd.ReadOnly),
ma(Z,fa,da,ta,Ga,hb,!0))}},"fill-extrusion":function(Z,fa,da,ta){var Ga=da.paint.get("fill-extrusion-opacity");if(0!==Ga&&"translucent"===Z.renderPass){var Za=new Hd(Z.context.gl.LEQUAL,Hd.ReadWrite,Z.depthRangeFor3D);1!==Ga||da.paint.get("fill-extrusion-pattern").constantOr(1)?(ra(Z,fa,da,ta,Za,oe.disabled,Ge.disabled),ra(Z,fa,da,ta,Za,Z.stencilModeFor3D(),Z.colorModeForRenderPass())):(Ga=Z.colorModeForRenderPass(),ra(Z,fa,da,ta,Za,oe.disabled,Ga))}},hillshade:function(Z,fa,da,ta){if("offscreen"===
Z.renderPass||"translucent"===Z.renderPass){var Ga=Z.context,Za=fa.getSource().maxzoom,hb=Z.depthModeForSublayer(0,Hd.ReadOnly),ub=Z.colorModeForRenderPass(),Rb="translucent"===Z.renderPass?Z.stencilConfigForOverlap(ta):[{},ta];ta=Rb[0];var Yb=0;for(Rb=Rb[1];Yb<Rb.length;Yb+=1){var dc=Rb[Yb],Ac=fa.getTile(dc);if(Ac.needsHillshadePrepare&&"offscreen"===Z.renderPass)qa(Z,Ac,da,Za,hb,oe.disabled,ub);else if("translucent"===Z.renderPass){var Ec=void 0,uc=void 0,Xb=void 0,fc=Z;var Cc=Ac;Ac=da;var bd=hb;
dc=ta[dc.overscaledZ];var nd=ub,Nc=fc.context,vd=Nc.gl,Ad=Cc.fbo;if(Ad){var le=fc.useProgram("hillshade");Nc.activeTexture.set(vd.TEXTURE0);vd.bindTexture(vd.TEXTURE_2D,Ad.colorAttachment.get());Ad=Ac.paint.get("hillshade-shadow-color");var Ud=Ac.paint.get("hillshade-highlight-color"),Sd=Ac.paint.get("hillshade-accent-color"),fe=Ac.paint.get("hillshade-illumination-direction")*(Math.PI/180);"viewport"===Ac.paint.get("hillshade-illumination-anchor")&&(fe-=fc.transform.angle);var ue=!fc.options.moving;
Cc={u_matrix:fc.transform.calculatePosMatrix(Cc.tileID.toUnwrapped(),ue),u_image:0,u_latrange:(Xb=Cc.tileID,uc=Math.pow(2,Xb.canonical.z),Ec=Xb.canonical.y,[(new b.MercatorCoordinate(0,Ec/uc)).toLngLat().lat,(new b.MercatorCoordinate(0,(Ec+1)/uc)).toLngLat().lat]),u_light:[Ac.paint.get("hillshade-exaggeration"),fe],u_shadow:Ad,u_highlight:Ud,u_accent:Sd};le.draw(Nc,vd.TRIANGLES,bd,dc,nd,Fd.disabled,Cc,Ac.id,fc.rasterBoundsBuffer,fc.quadTriangleIndexBuffer,fc.rasterBoundsSegments)}}}Ga.viewport.set([0,
0,Z.width,Z.height])}},raster:function(Z,fa,da,ta){if("translucent"===Z.renderPass&&0!==da.paint.get("raster-opacity")&&ta.length){var Ga=Z.context,Za=Ga.gl,hb=fa.getSource(),ub=Z.useProgram("raster"),Rb=Z.colorModeForRenderPass(),Yb=hb instanceof Ob?[{},ta]:Z.stencilConfigForOverlap(ta);ta=Yb[0];Yb=Yb[1];for(var dc=Yb[Yb.length-1].overscaledZ,Ac=!Z.options.moving,Ec=0;Ec<Yb.length;Ec+=1){var uc=Yb[Ec],Xb=Z.depthModeForSublayer(uc.overscaledZ-dc,1===da.paint.get("raster-opacity")?Hd.ReadWrite:Hd.ReadOnly,
Za.LESS),fc=fa.getTile(uc),Cc=Z.transform.calculatePosMatrix(uc.toUnwrapped(),Ac);fc.registerFadeDuration(da.paint.get("raster-fade-duration"));var bd=fa.findLoadedParent(uc,0);var nd=fc,Nc=bd,vd=fa,Ad=Z.transform;var le=da.paint.get("raster-fade-duration");if(0<le){var Ud=b.browser.now(),Sd=(Ud-nd.timeAdded)/le;le=Nc?(Ud-Nc.timeAdded)/le:-1;vd=vd.getSource();Ad=Ad.coveringZoomLevel({tileSize:vd.tileSize,roundZoom:vd.roundZoom});Ad=(Ad=!Nc||Math.abs(Nc.tileID.overscaledZ-Ad)>Math.abs(nd.tileID.overscaledZ-
Ad))&&nd.refreshedUponExpiration?1:b.clamp(Ad?Sd:1-le,0,1);le=(nd.refreshedUponExpiration&&1<=Sd&&(nd.refreshedUponExpiration=!1),Nc?{opacity:1,mix:1-Ad}:{opacity:Ad,mix:0})}else le={opacity:1,mix:0};Sd=Nc=void 0;nd="nearest"===da.paint.get("raster-resampling")?Za.NEAREST:Za.LINEAR;Ga.activeTexture.set(Za.TEXTURE0);fc.texture.bind(nd,Za.CLAMP_TO_EDGE,Za.LINEAR_MIPMAP_NEAREST);Ga.activeTexture.set(Za.TEXTURE1);bd?(bd.texture.bind(nd,Za.CLAMP_TO_EDGE,Za.LINEAR_MIPMAP_NEAREST),Nc=Math.pow(2,bd.tileID.overscaledZ-
fc.tileID.overscaledZ),Sd=[fc.tileID.canonical.x*Nc%1,fc.tileID.canonical.y*Nc%1]):fc.texture.bind(nd,Za.CLAMP_TO_EDGE,Za.LINEAR_MIPMAP_NEAREST);bd=Ad=void 0;nd=da;fc=Sd||[0,0];Nc=Nc||1;Sd=le.mix;le=le.opacity*nd.paint.get("raster-opacity");vd=nd.paint.get("raster-brightness-min");Ud=nd.paint.get("raster-brightness-max");var fe=(Ad=nd.paint.get("raster-saturation"),0<Ad?1-1/(1.001-Ad):-Ad);Ad=(bd=nd.paint.get("raster-contrast"),0<bd?1/(1-bd):1+bd);nd=nd.paint.get("raster-hue-rotate");nd*=Math.PI/
180;bd=Math.sin(nd);nd=Math.cos(nd);Cc={u_matrix:Cc,u_tl_parent:fc,u_scale_parent:Nc,u_buffer_scale:1,u_fade_t:Sd,u_opacity:le,u_image0:0,u_image1:1,u_brightness_low:vd,u_brightness_high:Ud,u_saturation_factor:fe,u_contrast_factor:Ad,u_spin_weights:[(2*nd+1)/3,(-Math.sqrt(3)*bd-nd+1)/3,(Math.sqrt(3)*bd-nd+1)/3]};hb instanceof Ob?ub.draw(Ga,Za.TRIANGLES,Xb,oe.disabled,Rb,Fd.disabled,Cc,da.id,hb.boundsBuffer,Z.quadTriangleIndexBuffer,hb.boundsSegments):ub.draw(Ga,Za.TRIANGLES,Xb,ta[uc.overscaledZ],
Rb,Fd.disabled,Cc,da.id,Z.rasterBoundsBuffer,Z.quadTriangleIndexBuffer,Z.rasterBoundsSegments)}}},background:function(Z,fa,da){fa=da.paint.get("background-color");var ta=da.paint.get("background-opacity");if(0!==ta){var Ga=Z.context,Za=Ga.gl,hb=Z.transform,ub=hb.tileSize,Rb=da.paint.get("background-pattern");if(!Z.isPatternMissing(Rb)){var Yb=!Rb&&1===fa.a&&1===ta&&Z.opaquePassEnabledForLayer()?"opaque":"translucent";if(Z.renderPass===Yb){var dc=oe.disabled;Yb=Z.depthModeForSublayer(0,"opaque"===
Yb?Hd.ReadWrite:Hd.ReadOnly);var Ac=Z.colorModeForRenderPass(),Ec=Z.useProgram(Rb?"backgroundPattern":"background");hb=hb.coveringTiles({tileSize:ub});Rb&&(Ga.activeTexture.set(Za.TEXTURE0),Z.imageManager.bind(Z.context));for(var uc=da.getCrossfadeParameters(),Xb=0;Xb<hb.length;Xb+=1){var fc=hb[Xb],Cc=Z.transform.calculatePosMatrix(fc.toUnwrapped());fc=Rb?vi(Cc,ta,Z,Rb,{tileID:fc,tileSize:ub},uc):{u_matrix:Cc,u_opacity:ta,u_color:fa};Ec.draw(Ga,Za.TRIANGLES,Yb,dc,Ac,Fd.disabled,fc,da.id,Z.tileExtentBuffer,
Z.quadTriangleIndexBuffer,Z.tileExtentSegments)}}}}},debug:function(Z,fa,da){for(var ta=0;ta<da.length;ta++){var Ga=Z,Za=fa,hb=da[ta],ub=Ga.context,Rb=ub.gl,Yb=hb.posMatrix,dc=Ga.useProgram("debug"),Ac=Hd.disabled,Ec=oe.disabled,uc=Ga.colorModeForRenderPass();ub.activeTexture.set(Rb.TEXTURE0);Ga.emptyTexture.bind(Rb.LINEAR,Rb.CLAMP_TO_EDGE);dc.draw(ub,Rb.LINE_STRIP,Ac,Ec,uc,Fd.disabled,Wi(Yb,b.Color.red),"$debug",Ga.debugBuffer,Ga.tileBorderIndexBuffer,Ga.debugSegments);uc=Za.getTileByID(hb.key).latestRawTileData;
uc=Math.floor((uc&&uc.byteLength||0)/1024);Za=Za.getTile(hb).tileSize;Za=512/Math.min(Za,512)*(hb.overscaledZ/Ga.transform.zoom)*.5;var Xb=hb.canonical.toString();hb.overscaledZ!==hb.canonical.z&&(Xb+=" \x3d\x3e "+hb.overscaledZ);hb=Xb+" "+uc+"kb";Ga.initDebugOverlayCanvas();uc=Ga.debugOverlayCanvas;Xb=Ga.context.gl;var fc=Ga.debugOverlayCanvas.getContext("2d");fc.clearRect(0,0,uc.width,uc.height);fc.shadowColor="white";fc.shadowBlur=2;fc.lineWidth=1.5;fc.strokeStyle="white";fc.textBaseline="top";
fc.font="bold 36px Open Sans, sans-serif";fc.fillText(hb,5,5);fc.strokeText(hb,5,5);Ga.debugOverlayTexture.update(uc);Ga.debugOverlayTexture.bind(Xb.LINEAR,Xb.CLAMP_TO_EDGE);dc.draw(ub,Rb.TRIANGLES,Ac,Ec,Ge.alphaBlended,Fd.disabled,Wi(Yb,b.Color.transparent,Za),"$debug",Ga.debugBuffer,Ga.quadTriangleIndexBuffer,Ga.debugSegments)}},custom:function(Z,fa,da){fa=Z.context;da=da.implementation;if("offscreen"===Z.renderPass){var ta=da.prerender;ta&&(Z.setCustomLayerDefaults(),fa.setColorMode(Z.colorModeForRenderPass()),
ta.call(da,fa.gl,Z.transform.customLayerMatrix()),fa.setDirty(),Z.setBaseState())}else"translucent"===Z.renderPass&&(Z.setCustomLayerDefaults(),fa.setColorMode(Z.colorModeForRenderPass()),fa.setStencilMode(oe.disabled),ta="3d"===da.renderingMode?new Hd(Z.context.gl.LEQUAL,Hd.ReadWrite,Z.depthRangeFor3D):Z.depthModeForSublayer(0,Hd.ReadOnly),fa.setDepthMode(ta),da.render(fa.gl,Z.transform.customLayerMatrix()),fa.setDirty(),Z.setBaseState(),fa.bindFramebuffer.set(null))}},zf=function(Z,fa){this.context=
new ge(Z);this.transform=fa;this._tileTextures={};this.setup();this.numSublayers=ff.maxUnderzooming+ff.maxOverzooming+1;this.depthEpsilon=1/Math.pow(2,16);this.crossTileSymbolIndex=new zc;this.gpuTimers={}};zf.prototype.resize=function(Z,fa){if(this.width=Z*b.browser.devicePixelRatio,this.height=fa*b.browser.devicePixelRatio,this.context.viewport.set([0,0,this.width,this.height]),this.style)for(Z=0,fa=this.style._order;Z<fa.length;Z+=1)this.style._layers[fa[Z]].resize()};zf.prototype.setup=function(){var Z=
this.context,fa=new b.StructArrayLayout2i4;fa.emplaceBack(0,0);fa.emplaceBack(b.EXTENT,0);fa.emplaceBack(0,b.EXTENT);fa.emplaceBack(b.EXTENT,b.EXTENT);this.tileExtentBuffer=Z.createVertexBuffer(fa,$d.members);this.tileExtentSegments=b.SegmentVector.simpleSegment(0,0,4,2);fa=new b.StructArrayLayout2i4;fa.emplaceBack(0,0);fa.emplaceBack(b.EXTENT,0);fa.emplaceBack(0,b.EXTENT);fa.emplaceBack(b.EXTENT,b.EXTENT);this.debugBuffer=Z.createVertexBuffer(fa,$d.members);this.debugSegments=b.SegmentVector.simpleSegment(0,
0,4,5);fa=new b.StructArrayLayout4i8;fa.emplaceBack(0,0,0,0);fa.emplaceBack(b.EXTENT,0,b.EXTENT,0);fa.emplaceBack(0,b.EXTENT,0,b.EXTENT);fa.emplaceBack(b.EXTENT,b.EXTENT,b.EXTENT,b.EXTENT);this.rasterBoundsBuffer=Z.createVertexBuffer(fa,Kb.members);this.rasterBoundsSegments=b.SegmentVector.simpleSegment(0,0,4,2);fa=new b.StructArrayLayout2i4;fa.emplaceBack(0,0);fa.emplaceBack(1,0);fa.emplaceBack(0,1);fa.emplaceBack(1,1);this.viewportBuffer=Z.createVertexBuffer(fa,$d.members);this.viewportSegments=
b.SegmentVector.simpleSegment(0,0,4,2);fa=new b.StructArrayLayout1ui2;fa.emplaceBack(0);fa.emplaceBack(1);fa.emplaceBack(3);fa.emplaceBack(2);fa.emplaceBack(0);this.tileBorderIndexBuffer=Z.createIndexBuffer(fa);fa=new b.StructArrayLayout3ui6;fa.emplaceBack(0,1,2);fa.emplaceBack(2,1,3);this.quadTriangleIndexBuffer=Z.createIndexBuffer(fa);this.emptyTexture=new b.Texture(Z,{width:1,height:1,data:new Uint8Array([0,0,0,0])},Z.gl.RGBA);Z=this.context.gl;this.stencilClearMode=new oe({func:Z.ALWAYS,mask:0},
0,255,Z.ZERO,Z.ZERO,Z.ZERO)};zf.prototype.clearStencil=function(){var Z=this.context,fa=Z.gl;this.nextStencilID=1;this.currentStencilSource=void 0;var da=b.create();b.ortho(da,0,this.width,this.height,0,0,1);b.scale(da,da,[fa.drawingBufferWidth,fa.drawingBufferHeight,0]);this.useProgram("clippingMask").draw(Z,fa.TRIANGLES,Hd.disabled,this.stencilClearMode,Ge.disabled,Fd.disabled,{u_matrix:da},"$clipping",this.viewportBuffer,this.quadTriangleIndexBuffer,this.viewportSegments)};zf.prototype._renderTileClippingMasks=
function(Z,fa){if(this.currentStencilSource!==Z.source&&Z.isTileClipped()&&fa&&fa.length){this.currentStencilSource=Z.source;Z=this.context;var da=Z.gl;256<this.nextStencilID+fa.length&&this.clearStencil();Z.setColorMode(Ge.disabled);Z.setDepthMode(Hd.disabled);var ta=this.useProgram("clippingMask");this._tileClippingMaskIDs={};for(var Ga=0;Ga<fa.length;Ga+=1){var Za=fa[Ga],hb=this._tileClippingMaskIDs[Za.key]=this.nextStencilID++;ta.draw(Z,da.TRIANGLES,Hd.disabled,new oe({func:da.ALWAYS,mask:0},
hb,255,da.KEEP,da.KEEP,da.REPLACE),Ge.disabled,Fd.disabled,{u_matrix:Za.posMatrix},"$clipping",this.tileExtentBuffer,this.quadTriangleIndexBuffer,this.tileExtentSegments)}}};zf.prototype.stencilModeFor3D=function(){this.currentStencilSource=void 0;256<this.nextStencilID+1&&this.clearStencil();var Z=this.nextStencilID++,fa=this.context.gl;return new oe({func:fa.NOTEQUAL,mask:255},Z,255,fa.KEEP,fa.KEEP,fa.REPLACE)};zf.prototype.stencilModeForClipping=function(Z){var fa=this.context.gl;return new oe({func:fa.EQUAL,
mask:255},this._tileClippingMaskIDs[Z.key],0,fa.KEEP,fa.KEEP,fa.REPLACE)};zf.prototype.stencilConfigForOverlap=function(Z){var fa=this.context.gl;Z=Z.sort(function(hb,ub){return ub.overscaledZ-hb.overscaledZ});var da=Z[Z.length-1].overscaledZ,ta=Z[0].overscaledZ-da+1;if(1<ta){this.currentStencilSource=void 0;256<this.nextStencilID+ta&&this.clearStencil();var Ga={};for(var Za=0;Za<ta;Za++)Ga[Za+da]=new oe({func:fa.GEQUAL,mask:255},Za+this.nextStencilID,255,fa.KEEP,fa.KEEP,fa.REPLACE);return this.nextStencilID+=
ta,[Ga,Z]}return[(Ga={},Ga[da]=oe.disabled,Ga),Z]};zf.prototype.colorModeForRenderPass=function(){var Z=this.context.gl;return this._showOverdrawInspector?new Ge([Z.CONSTANT_COLOR,Z.ONE],new b.Color(.125,.125,.125,0),[!0,!0,!0,!0]):"opaque"===this.renderPass?Ge.unblended:Ge.alphaBlended};zf.prototype.depthModeForSublayer=function(Z,fa,da){if(!this.opaquePassEnabledForLayer())return Hd.disabled;Z=1-((1+this.currentLayer)*this.numSublayers+Z)*this.depthEpsilon;return new Hd(da||this.context.gl.LEQUAL,
fa,[Z,Z])};zf.prototype.opaquePassEnabledForLayer=function(){return this.currentLayer<this.opaquePassCutoff};zf.prototype.render=function(Z,fa){var da=this;this.style=Z;this.options=fa;this.lineAtlas=Z.lineAtlas;this.imageManager=Z.imageManager;this.glyphManager=Z.glyphManager;this.symbolFadeChange=Z.placement.symbolFadeChange(b.browser.now());this.imageManager.beginFrame();var ta=this.style._order,Ga=this.style.sourceCaches;for(Rb in Ga){var Za=Ga[Rb];Za.used&&Za.prepare(this.context)}var hb,ub;
var Rb={};Za={};var Yb={},dc;for(dc in Ga){var Ac=Ga[dc];Rb[dc]=Ac.getVisibleCoordinates();Za[dc]=Rb[dc].slice().reverse();Yb[dc]=Ac.getVisibleCoordinates(!0).reverse()}this.opaquePassCutoff=1/0;for(dc=0;dc<ta.length;dc++)if(this.style._layers[ta[dc]].is3D()){this.opaquePassCutoff=dc;break}this.renderPass="offscreen";for(dc=0;dc<ta.length;dc+=1)if(Ac=this.style._layers[ta[dc]],Ac.hasOffscreenPass()&&!Ac.isHidden(this.transform.zoom)){var Ec=Za[Ac.source];("custom"===Ac.type||Ec.length)&&this.renderLayer(this,
Ga[Ac.source],Ac,Ec)}this.context.bindFramebuffer.set(null);this.context.clear({color:fa.showOverdrawInspector?b.Color.black:b.Color.transparent,depth:1});this.clearStencil();this._showOverdrawInspector=fa.showOverdrawInspector;this.depthRangeFor3D=[0,1-(Z._order.length+2)*this.numSublayers*this.depthEpsilon];this.renderPass="opaque";for(this.currentLayer=ta.length-1;0<=this.currentLayer;this.currentLayer--)Z=this.style._layers[ta[this.currentLayer]],fa=Ga[Z.source],dc=Rb[Z.source],this._renderTileClippingMasks(Z,
dc),this.renderLayer(this,fa,Z,dc);this.renderPass="translucent";for(this.currentLayer=0;this.currentLayer<ta.length;this.currentLayer++)Z=this.style._layers[ta[this.currentLayer]],fa=Ga[Z.source],dc=("symbol"===Z.type?Yb:Za)[Z.source],this._renderTileClippingMasks(Z,Rb[Z.source]),this.renderLayer(this,fa,Z,dc);this.options.showTileBoundaries&&(b.values(this.style._layers).forEach(function(uc){uc.source&&!uc.isHidden(da.transform.zoom)&&(uc.source!==(ub&&ub.id)&&(ub=da.style.sourceCaches[uc.source]),
(!hb||hb.getSource().maxzoom<ub.getSource().maxzoom)&&(hb=ub))}),hb&&Rg.debug(this,hb,hb.getVisibleCoordinates()));this.options.showPadding&&function(uc){var Xb=uc.transform.padding;Y(uc,0,uc.transform.height-(Xb.top||0)+1.5,uc.transform.width,3,Pf);Y(uc,0,(Xb.bottom||0)+1.5,uc.transform.width,3,Xi);Y(uc,(Xb.left||0)-1.5,0,3,uc.transform.height,Zg);Y(uc,uc.transform.width-(Xb.right||0)-1.5,0,3,uc.transform.height,hi);var fc=uc.transform.centerPoint;Xb=fc.x;fc=uc.transform.height-fc.y;Y(uc,Xb-1,fc-
10,2,20,wi);Y(uc,Xb-10,fc-1,20,2,wi);!0}(this);this.context.setDefault()};zf.prototype.renderLayer=function(Z,fa,da,ta){da.isHidden(this.transform.zoom)||("background"===da.type||"custom"===da.type||ta.length)&&(this.id=da.id,this.gpuTimingStart(da),Rg[da.type](Z,fa,da,ta,this.style.placement.variableOffsets),this.gpuTimingEnd())};zf.prototype.gpuTimingStart=function(Z){if(this.options.gpuTiming){var fa=this.context.extTimerQuery,da=this.gpuTimers[Z.id];da||(da=this.gpuTimers[Z.id]={calls:0,cpuTime:0,
query:fa.createQueryEXT()});da.calls++;fa.beginQueryEXT(fa.TIME_ELAPSED_EXT,da.query)}};zf.prototype.gpuTimingEnd=function(){if(this.options.gpuTiming){var Z=this.context.extTimerQuery;Z.endQueryEXT(Z.TIME_ELAPSED_EXT)}};zf.prototype.collectGpuTimers=function(){var Z=this.gpuTimers;return this.gpuTimers={},Z};zf.prototype.queryGpuTimers=function(Z){var fa={},da;for(da in Z){var ta=Z[da],Ga=this.context.extTimerQuery,Za=Ga.getQueryObjectEXT(ta.query,Ga.QUERY_RESULT_EXT)/1E6;Ga.deleteQueryEXT(ta.query);
fa[da]=Za}return fa};zf.prototype.translatePosMatrix=function(Z,fa,da,ta,Ga){if(!da[0]&&!da[1])return Z;var Za=Ga?"map"===ta?this.transform.angle:0:"viewport"===ta?-this.transform.angle:0;Za&&(ta=Math.sin(Za),Za=Math.cos(Za),da=[da[0]*Za-da[1]*ta,da[0]*ta+da[1]*Za]);fa=[Ga?da[0]:R(fa,da[0],this.transform.zoom),Ga?da[1]:R(fa,da[1],this.transform.zoom),0];da=new Float32Array(16);return b.translate(da,Z,fa),da};zf.prototype.saveTileTexture=function(Z){var fa=this._tileTextures[Z.size[0]];fa?fa.push(Z):
this._tileTextures[Z.size[0]]=[Z]};zf.prototype.getTileTexture=function(Z){return(Z=this._tileTextures[Z])&&0<Z.length?Z.pop():null};zf.prototype.isPatternMissing=function(Z){if(!Z)return!1;if(!Z.from||!Z.to)return!0;var fa=this.imageManager.getPattern(Z.from.toString());Z=this.imageManager.getPattern(Z.to.toString());return!fa||!Z};zf.prototype.useProgram=function(Z,fa){this.cache=this.cache||{};var da=""+Z+(fa?fa.cacheKey:"")+(this._showOverdrawInspector?"/overdraw":"");return this.cache[da]||(this.cache[da]=
new jf(this.context,ei[Z],fa,vh[Z],this._showOverdrawInspector)),this.cache[da]};zf.prototype.setCustomLayerDefaults=function(){this.context.unbindVAO();this.context.cullFace.setDefault();this.context.activeTexture.setDefault();this.context.pixelStoreUnpack.setDefault();this.context.pixelStoreUnpackPremultiplyAlpha.setDefault();this.context.pixelStoreUnpackFlipY.setDefault()};zf.prototype.setBaseState=function(){var Z=this.context.gl;this.context.cullFace.set(!1);this.context.viewport.set([0,0,this.width,
this.height]);this.context.blendEquation.set(Z.FUNC_ADD)};zf.prototype.initDebugOverlayCanvas=function(){null==this.debugOverlayCanvas&&(this.debugOverlayCanvas=b.window.document.createElement("canvas"),this.debugOverlayCanvas.width=512,this.debugOverlayCanvas.height=512,this.debugOverlayTexture=new b.Texture(this.context,this.debugOverlayCanvas,this.context.gl.RGBA))};zf.prototype.destroy=function(){this.emptyTexture.destroy();this.debugOverlayTexture&&this.debugOverlayTexture.destroy()};var ii=
function(Z,fa){this.points=Z;this.planes=fa};ii.fromInvProjectionMatrix=function(Z,fa,da){var ta=Math.pow(2,da),Ga=[[-1,1,-1,1],[1,1,-1,1],[1,-1,-1,1],[-1,-1,-1,1],[-1,1,1,1],[1,1,1,1],[1,-1,1,1],[-1,-1,1,1]].map(function(Za){return b.transformMat4([],Za,Z)}).map(function(Za){return b.scale$1([],Za,1/Za[3]/fa*ta)});da=[[0,1,2],[6,5,4],[0,3,7],[2,1,5],[3,2,6],[0,4,5]].map(function(Za){var hb=b.sub([],Ga[Za[0]],Ga[Za[1]]),ub=b.sub([],Ga[Za[2]],Ga[Za[1]]);hb=b.normalize([],b.cross([],hb,ub));Za=-b.dot(hb,
Ga[Za[1]]);return hb.concat(Za)});return new ii(Ga,da)};var gh=function(Z,fa){this.min=Z;this.max=fa;this.center=b.scale$2([],b.add([],this.min,this.max),.5)};gh.prototype.quadrant=function(Z){Z=[0==Z%2,2>Z];for(var fa=b.clone$2(this.min),da=b.clone$2(this.max),ta=0;ta<Z.length;ta++)fa[ta]=Z[ta]?this.min[ta]:this.center[ta],da[ta]=Z[ta]?this.center[ta]:this.max[ta];return da[2]=this.max[2],new gh(fa,da)};gh.prototype.distanceX=function(Z){return Math.max(Math.min(this.max[0],Z[0]),this.min[0])-Z[0]};
gh.prototype.distanceY=function(Z){return Math.max(Math.min(this.max[1],Z[1]),this.min[1])-Z[1]};gh.prototype.intersects=function(Z){for(var fa=[[this.min[0],this.min[1],0,1],[this.max[0],this.min[1],0,1],[this.max[0],this.max[1],0,1],[this.min[0],this.max[1],0,1]],da=!0,ta=0;ta<Z.planes.length;ta++){for(var Ga=Z.planes[ta],Za=0,hb=0;hb<fa.length;hb++)Za+=0<=b.dot$1(Ga,fa[hb]);if(0===Za)return 0;Za!==fa.length&&(da=!1)}if(da)return 2;for(fa=0;3>fa;fa++){da=Number.MAX_VALUE;ta=-Number.MAX_VALUE;for(Ga=
0;Ga<Z.points.length;Ga++)Za=Z.points[Ga][fa]-this.min[fa],da=Math.min(da,Za),ta=Math.max(ta,Za);if(0>ta||da>this.max[fa]-this.min[fa])return 0}return 1};var wh=function(Z,fa,da,ta){if(void 0===Z&&(Z=0),void 0===fa&&(fa=0),void 0===da&&(da=0),void 0===ta&&(ta=0),isNaN(Z)||0>Z||isNaN(fa)||0>fa||isNaN(da)||0>da||isNaN(ta)||0>ta)throw Error("Invalid value for edge-insets, top, bottom, left and right must all be numbers");this.top=Z;this.bottom=fa;this.left=da;this.right=ta};wh.prototype.interpolate=
function(Z,fa,da){return null!=fa.top&&null!=Z.top&&(this.top=b.number(Z.top,fa.top,da)),null!=fa.bottom&&null!=Z.bottom&&(this.bottom=b.number(Z.bottom,fa.bottom,da)),null!=fa.left&&null!=Z.left&&(this.left=b.number(Z.left,fa.left,da)),null!=fa.right&&null!=Z.right&&(this.right=b.number(Z.right,fa.right,da)),this};wh.prototype.getCenter=function(Z,fa){Z=b.clamp((this.left+Z-this.right)/2,0,Z);fa=b.clamp((this.top+fa-this.bottom)/2,0,fa);return new b.Point(Z,fa)};wh.prototype.equals=function(Z){return this.top===
Z.top&&this.bottom===Z.bottom&&this.left===Z.left&&this.right===Z.right};wh.prototype.clone=function(){return new wh(this.top,this.bottom,this.left,this.right)};wh.prototype.toJSON=function(){return{top:this.top,bottom:this.bottom,left:this.left,right:this.right}};var tf=function(Z,fa,da,ta,Ga){this.tileSize=512;this.maxValidLatitude=85.051129;this._renderWorldCopies=void 0===Ga||Ga;this._minZoom=Z||0;this._maxZoom=fa||22;this._minPitch=null==da?0:da;this._maxPitch=null==ta?60:ta;this.setMaxBounds();
this.height=this.width=0;this._center=new b.LngLat(0,0);this.angle=this.zoom=0;this._fov=.6435011087932844;this._pitch=0;this._unmodified=!0;this._edgeInsets=new wh;this._posMatrixCache={};this._alignedPosMatrixCache={}},cf={minZoom:{configurable:!0},maxZoom:{configurable:!0},minPitch:{configurable:!0},maxPitch:{configurable:!0},renderWorldCopies:{configurable:!0},worldSize:{configurable:!0},centerOffset:{configurable:!0},size:{configurable:!0},bearing:{configurable:!0},pitch:{configurable:!0},fov:{configurable:!0},
zoom:{configurable:!0},center:{configurable:!0},padding:{configurable:!0},centerPoint:{configurable:!0},unmodified:{configurable:!0},point:{configurable:!0}};tf.prototype.clone=function(){var Z=new tf(this._minZoom,this._maxZoom,this._minPitch,this.maxPitch,this._renderWorldCopies);return Z.tileSize=this.tileSize,Z.latRange=this.latRange,Z.width=this.width,Z.height=this.height,Z._center=this._center,Z.zoom=this.zoom,Z.angle=this.angle,Z._fov=this._fov,Z._pitch=this._pitch,Z._unmodified=this._unmodified,
Z._edgeInsets=this._edgeInsets.clone(),Z._calcMatrices(),Z};cf.minZoom.get=function(){return this._minZoom};cf.minZoom.set=function(Z){this._minZoom!==Z&&(this._minZoom=Z,this.zoom=Math.max(this.zoom,Z))};cf.maxZoom.get=function(){return this._maxZoom};cf.maxZoom.set=function(Z){this._maxZoom!==Z&&(this._maxZoom=Z,this.zoom=Math.min(this.zoom,Z))};cf.minPitch.get=function(){return this._minPitch};cf.minPitch.set=function(Z){this._minPitch!==Z&&(this._minPitch=Z,this.pitch=Math.max(this.pitch,Z))};
cf.maxPitch.get=function(){return this._maxPitch};cf.maxPitch.set=function(Z){this._maxPitch!==Z&&(this._maxPitch=Z,this.pitch=Math.min(this.pitch,Z))};cf.renderWorldCopies.get=function(){return this._renderWorldCopies};cf.renderWorldCopies.set=function(Z){void 0===Z?Z=!0:null===Z&&(Z=!1);this._renderWorldCopies=Z};cf.worldSize.get=function(){return this.tileSize*this.scale};cf.centerOffset.get=function(){return this.centerPoint._sub(this.size._div(2))};cf.size.get=function(){return new b.Point(this.width,
this.height)};cf.bearing.get=function(){return-this.angle/Math.PI*180};cf.bearing.set=function(Z){Z=-b.wrap(Z,-180,180)*Math.PI/180;this.angle!==Z&&(this._unmodified=!1,this.angle=Z,this._calcMatrices(),this.rotationMatrix=b.create$2(),b.rotate(this.rotationMatrix,this.rotationMatrix,this.angle))};cf.pitch.get=function(){return this._pitch/Math.PI*180};cf.pitch.set=function(Z){Z=b.clamp(Z,this.minPitch,this.maxPitch)/180*Math.PI;this._pitch!==Z&&(this._unmodified=!1,this._pitch=Z,this._calcMatrices())};
cf.fov.get=function(){return this._fov/Math.PI*180};cf.fov.set=function(Z){Z=Math.max(.01,Math.min(60,Z));this._fov!==Z&&(this._unmodified=!1,this._fov=Z/180*Math.PI,this._calcMatrices())};cf.zoom.get=function(){return this._zoom};cf.zoom.set=function(Z){Z=Math.min(Math.max(Z,this.minZoom),this.maxZoom);this._zoom!==Z&&(this._unmodified=!1,this._zoom=Z,this.scale=this.zoomScale(Z),this.tileZoom=Math.floor(Z),this.zoomFraction=Z-this.tileZoom,this._constrain(),this._calcMatrices())};cf.center.get=
function(){return this._center};cf.center.set=function(Z){Z.lat===this._center.lat&&Z.lng===this._center.lng||(this._unmodified=!1,this._center=Z,this._constrain(),this._calcMatrices())};cf.padding.get=function(){return this._edgeInsets.toJSON()};cf.padding.set=function(Z){this._edgeInsets.equals(Z)||(this._unmodified=!1,this._edgeInsets.interpolate(this._edgeInsets,Z,1),this._calcMatrices())};cf.centerPoint.get=function(){return this._edgeInsets.getCenter(this.width,this.height)};tf.prototype.isPaddingEqual=
function(Z){return this._edgeInsets.equals(Z)};tf.prototype.interpolatePadding=function(Z,fa,da){this._unmodified=!1;this._edgeInsets.interpolate(Z,fa,da);this._constrain();this._calcMatrices()};tf.prototype.coveringZoomLevel=function(Z){Z=(Z.roundZoom?Math.round:Math.floor)(this.zoom+this.scaleZoom(this.tileSize/Z.tileSize));return Math.max(0,Z)};tf.prototype.getVisibleUnwrappedCoordinates=function(Z){var fa=[new b.UnwrappedTileID(0,Z)];if(this._renderWorldCopies){var da=this.pointCoordinate(new b.Point(0,
0)),ta=this.pointCoordinate(new b.Point(this.width,0)),Ga=this.pointCoordinate(new b.Point(this.width,this.height)),Za=this.pointCoordinate(new b.Point(0,this.height)),hb=Math.floor(Math.max(da.x,ta.x,Ga.x,Za.x));for(da=Math.floor(Math.min(da.x,ta.x,Ga.x,Za.x))-1;da<=hb+1;da++)0!==da&&fa.push(new b.UnwrappedTileID(da,Z))}return fa};tf.prototype.coveringTiles=function(Z){var fa=this.coveringZoomLevel(Z),da=fa;if(void 0!==Z.minzoom&&fa<Z.minzoom)return[];void 0!==Z.maxzoom&&fa>Z.maxzoom&&(fa=Z.maxzoom);
var ta=b.MercatorCoordinate.fromLngLat(this.center),Ga=Math.pow(2,fa);ta=[Ga*ta.x,Ga*ta.y,0];var Za=ii.fromInvProjectionMatrix(this.invProjMatrix,this.worldSize,fa),hb=Z.minzoom||0;60>=this.pitch&&.1>this._edgeInsets.top&&(hb=fa);var ub=function(fc){return{aabb:new gh([fc*Ga,0,0],[(fc+1)*Ga,Ga,0]),zoom:0,x:0,y:0,wrap:fc,fullyVisible:!1}},Rb=[],Yb=[],dc=fa;Z=Z.reparseOverscaled?da:fa;if(this._renderWorldCopies)for(fa=1;3>=fa;fa++)Rb.push(ub(-fa)),Rb.push(ub(fa));for(Rb.push(ub(0));0<Rb.length;){ub=
Rb.pop();fa=ub.x;da=ub.y;var Ac=ub.fullyVisible;if(!Ac){Ac=ub.aabb.intersects(Za);if(0===Ac)continue;Ac=2===Ac}var Ec=ub.aabb.distanceX(ta),uc=ub.aabb.distanceY(ta);Ec=Math.max(Math.abs(Ec),Math.abs(uc));if(ub.zoom===dc||Ec>3+(1<<dc-ub.zoom)-2&&ub.zoom>=hb)Yb.push({tileID:new b.OverscaledTileID(ub.zoom===dc?Z:ub.zoom,ub.wrap,ub.zoom,fa,da),distanceSq:b.sqrLen([ta[0]-.5-fa,ta[1]-.5-da])});else for(Ec=0;4>Ec;Ec++){uc=(fa<<1)+Ec%2;var Xb=(da<<1)+(Ec>>1);Rb.push({aabb:ub.aabb.quadrant(Ec),zoom:ub.zoom+
1,x:uc,y:Xb,wrap:ub.wrap,fullyVisible:Ac})}}return Yb.sort(function(fc,Cc){return fc.distanceSq-Cc.distanceSq}).map(function(fc){return fc.tileID})};tf.prototype.resize=function(Z,fa){this.width=Z;this.height=fa;this.pixelsToGLUnits=[2/Z,-2/fa];this._constrain();this._calcMatrices()};cf.unmodified.get=function(){return this._unmodified};tf.prototype.zoomScale=function(Z){return Math.pow(2,Z)};tf.prototype.scaleZoom=function(Z){return Math.log(Z)/Math.LN2};tf.prototype.project=function(Z){var fa=b.clamp(Z.lat,
-this.maxValidLatitude,this.maxValidLatitude);return new b.Point(b.mercatorXfromLng(Z.lng)*this.worldSize,b.mercatorYfromLat(fa)*this.worldSize)};tf.prototype.unproject=function(Z){return(new b.MercatorCoordinate(Z.x/this.worldSize,Z.y/this.worldSize)).toLngLat()};cf.point.get=function(){return this.project(this.center)};tf.prototype.setLocationAtPoint=function(Z,fa){fa=this.pointCoordinate(fa);var da=this.pointCoordinate(this.centerPoint);Z=this.locationCoordinate(Z);Z=new b.MercatorCoordinate(Z.x-
(fa.x-da.x),Z.y-(fa.y-da.y));this.center=this.coordinateLocation(Z);this._renderWorldCopies&&(this.center=this.center.wrap())};tf.prototype.locationPoint=function(Z){return this.coordinatePoint(this.locationCoordinate(Z))};tf.prototype.pointLocation=function(Z){return this.coordinateLocation(this.pointCoordinate(Z))};tf.prototype.locationCoordinate=function(Z){return b.MercatorCoordinate.fromLngLat(Z)};tf.prototype.coordinateLocation=function(Z){return Z.toLngLat()};tf.prototype.pointCoordinate=function(Z){var fa=
[Z.x,Z.y,0,1];Z=[Z.x,Z.y,1,1];b.transformMat4(fa,fa,this.pixelMatrixInverse);b.transformMat4(Z,Z,this.pixelMatrixInverse);var da=fa[3],ta=Z[3],Ga=fa[1]/da,Za=Z[1]/ta,hb=fa[2]/da,ub=Z[2]/ta;hb=hb===ub?0:(0-hb)/(ub-hb);return new b.MercatorCoordinate(b.number(fa[0]/da,Z[0]/ta,hb)/this.worldSize,b.number(Ga,Za,hb)/this.worldSize)};tf.prototype.coordinatePoint=function(Z){Z=[Z.x*this.worldSize,Z.y*this.worldSize,0,1];return b.transformMat4(Z,Z,this.pixelMatrix),new b.Point(Z[0]/Z[3],Z[1]/Z[3])};tf.prototype.getBounds=
function(){return(new b.LngLatBounds).extend(this.pointLocation(new b.Point(0,0))).extend(this.pointLocation(new b.Point(this.width,0))).extend(this.pointLocation(new b.Point(this.width,this.height))).extend(this.pointLocation(new b.Point(0,this.height)))};tf.prototype.getMaxBounds=function(){return this.latRange&&2===this.latRange.length&&this.lngRange&&2===this.lngRange.length?new b.LngLatBounds([this.lngRange[0],this.latRange[0]],[this.lngRange[1],this.latRange[1]]):null};tf.prototype.setMaxBounds=
function(Z){Z?(this.lngRange=[Z.getWest(),Z.getEast()],this.latRange=[Z.getSouth(),Z.getNorth()],this._constrain()):(this.lngRange=null,this.latRange=[-this.maxValidLatitude,this.maxValidLatitude])};tf.prototype.calculatePosMatrix=function(Z,fa){void 0===fa&&(fa=!1);var da=Z.key,ta=fa?this._alignedPosMatrixCache:this._posMatrixCache;if(ta[da])return ta[da];var Ga=Z.canonical,Za=this.worldSize/this.zoomScale(Ga.z);Z=Ga.x+Math.pow(2,Ga.z)*Z.wrap;var hb=b.identity(new Float64Array(16));return b.translate(hb,
hb,[Z*Za,Ga.y*Za,0]),b.scale(hb,hb,[Za/b.EXTENT,Za/b.EXTENT,1]),b.multiply(hb,fa?this.alignedProjMatrix:this.projMatrix,hb),ta[da]=new Float32Array(hb),ta[da]};tf.prototype.customLayerMatrix=function(){return this.mercatorMatrix.slice()};tf.prototype._constrain=function(){if(this.center&&this.width&&this.height&&!this._constraining){this._constraining=!0;var Z,fa,da=-90,ta=90,Ga=-180,Za=180,hb=this.size,ub=this._unmodified;if(this.latRange){var Rb=this.latRange;da=b.mercatorYfromLat(Rb[1])*this.worldSize;
var Yb=(ta=b.mercatorYfromLat(Rb[0])*this.worldSize)-da<hb.y?hb.y/(ta-da):0}if(this.lngRange){Rb=this.lngRange;Ga=b.mercatorXfromLng(Rb[0])*this.worldSize;var dc=(Za=b.mercatorXfromLng(Rb[1])*this.worldSize)-Ga<hb.x?hb.x/(Za-Ga):0}Rb=this.point;var Ac=Math.max(dc||0,Yb||0);if(Ac)return this.center=this.unproject(new b.Point(dc?(Za+Ga)/2:Rb.x,Yb?(ta+da)/2:Rb.y)),this.zoom+=this.scaleZoom(Ac),this._unmodified=ub,void(this._constraining=!1);this.latRange&&(Yb=Rb.y,dc=hb.y/2,Yb-dc<da&&(fa=da+dc),Yb+dc>
ta&&(fa=ta-dc));this.lngRange&&(da=Rb.x,hb=hb.x/2,da-hb<Ga&&(Z=Ga+hb),da+hb>Za&&(Z=Za-hb));void 0===Z&&void 0===fa||(this.center=this.unproject(new b.Point(void 0!==Z?Z:Rb.x,void 0!==fa?fa:Rb.y)));this._unmodified=ub;this._constraining=!1}};tf.prototype._calcMatrices=function(){if(this.height){var Z=this.centerOffset;this.cameraToCenterDistance=.5/Math.tan(this._fov/2)*this.height;var fa=this._fov*(.5+Z.y/this.height);fa=Math.sin(fa)*this.cameraToCenterDistance/Math.sin(b.clamp(Math.PI-(Math.PI/2+
this._pitch)-fa,.01,Math.PI-.01));var da=this.point,ta=da.x;da=da.y;var Ga=1.01*(Math.cos(Math.PI/2-this._pitch)*fa+this.cameraToCenterDistance),Za=this.height/50;fa=new Float64Array(16);b.perspective(fa,this._fov,this.width/this.height,Za,Ga);fa[8]=2*-Z.x/this.width;fa[9]=2*Z.y/this.height;b.scale(fa,fa,[1,-1,1]);b.translate(fa,fa,[0,0,-this.cameraToCenterDistance]);b.rotateX(fa,fa,this._pitch);b.rotateZ(fa,fa,this.angle);b.translate(fa,fa,[-ta,-da,0]);this.mercatorMatrix=b.scale([],fa,[this.worldSize,
this.worldSize,this.worldSize]);b.scale(fa,fa,[1,1,b.mercatorZfromAltitude(1,this.center.lat)*this.worldSize,1]);this.projMatrix=fa;this.invProjMatrix=b.invert([],this.projMatrix);Z=this.width%2/2;Ga=this.height%2/2;Za=Math.cos(this.angle);var hb=Math.sin(this.angle);ta=ta-Math.round(ta)+Za*Z+hb*Ga;da=da-Math.round(da)+Za*Ga+hb*Z;Z=new Float64Array(fa);if(b.translate(Z,Z,[.5<ta?ta-1:ta,.5<da?da-1:da,0]),this.alignedProjMatrix=Z,fa=b.create(),b.scale(fa,fa,[this.width/2,-this.height/2,1]),b.translate(fa,
fa,[1,-1,0]),this.labelPlaneMatrix=fa,fa=b.create(),b.scale(fa,fa,[1,-1,1]),b.translate(fa,fa,[-1,-1,0]),b.scale(fa,fa,[2/this.width,2/this.height,1]),this.glCoordMatrix=fa,this.pixelMatrix=b.multiply(new Float64Array(16),this.labelPlaneMatrix,this.projMatrix),!(fa=b.invert(new Float64Array(16),this.pixelMatrix)))throw Error("failed to invert matrix");this.pixelMatrixInverse=fa;this._posMatrixCache={};this._alignedPosMatrixCache={}}};tf.prototype.maxPitchScaleFactor=function(){if(!this.pixelMatrixInverse)return 1;
var Z=this.pointCoordinate(new b.Point(0,0));Z=[Z.x*this.worldSize,Z.y*this.worldSize,0,1];return b.transformMat4(Z,Z,this.pixelMatrix)[3]/this.cameraToCenterDistance};tf.prototype.getCameraPoint=function(){return this.centerPoint.add(new b.Point(0,Math.tan(this._pitch)*(this.cameraToCenterDistance||1)))};tf.prototype.getCameraQueryGeometry=function(Z){var fa=this.getCameraPoint();if(1===Z.length)return[Z[0],fa];var da=fa.x,ta=fa.y,Ga=fa.x;fa=fa.y;for(var Za=0;Za<Z.length;Za+=1){var hb=Z[Za];da=Math.min(da,
hb.x);ta=Math.min(ta,hb.y);Ga=Math.max(Ga,hb.x);fa=Math.max(fa,hb.y)}return[new b.Point(da,ta),new b.Point(Ga,ta),new b.Point(Ga,fa),new b.Point(da,fa),new b.Point(da,ta)]};Object.defineProperties(tf.prototype,cf);var gg=function(Z){var fa,da,ta,Ga;this._hashName=Z&&encodeURIComponent(Z);b.bindAll(["_getCurrentHash","_onHashChange","_updateHash"],this);this._updateHash=(fa=this._updateHashUnthrottled.bind(this),da=!1,ta=null,Ga=function(){ta=null;da&&(fa(),ta=setTimeout(Ga,300),da=!1)},function(){return da=
!0,ta||Ga(),ta})};gg.prototype.addTo=function(Z){return this._map=Z,b.window.addEventListener("hashchange",this._onHashChange,!1),this._map.on("moveend",this._updateHash),this};gg.prototype.remove=function(){return b.window.removeEventListener("hashchange",this._onHashChange,!1),this._map.off("moveend",this._updateHash),clearTimeout(this._updateHash()),delete this._map,this};gg.prototype.getHashString=function(Z){var fa=this._map.getCenter(),da=Math.round(100*this._map.getZoom())/100,ta=Math.pow(10,
Math.ceil((da*Math.LN2+Math.log(512/360/.5))/Math.LN10)),Ga=Math.round(fa.lng*ta)/ta;fa=Math.round(fa.lat*ta)/ta;ta=this._map.getBearing();var Za=this._map.getPitch(),hb="";if(hb+=Z?"/"+Ga+"/"+fa+"/"+da:da+"/"+fa+"/"+Ga,(ta||Za)&&(hb+="/"+Math.round(10*ta)/10),Za&&(hb+="/"+Math.round(Za)),this._hashName){var ub=this._hashName,Rb=!1;Z=b.window.location.hash.slice(1).split("\x26").map(function(Yb){var dc=Yb.split("\x3d")[0];return dc===ub?(Rb=!0,dc+"\x3d"+hb):Yb}).filter(function(Yb){return Yb});return Rb||
Z.push(ub+"\x3d"+hb),"#"+Z.join("\x26")}return"#"+hb};gg.prototype._getCurrentHash=function(){var Z,fa=this,da=b.window.location.hash.replace("#","");return this._hashName?(da.split("\x26").map(function(ta){return ta.split("\x3d")}).forEach(function(ta){ta[0]===fa._hashName&&(Z=ta)}),(Z&&Z[1]||"").split("/")):da.split("/")};gg.prototype._onHashChange=function(){var Z=this._getCurrentHash();if(3<=Z.length&&!Z.some(function(da){return isNaN(da)})){var fa=this._map.dragRotate.isEnabled()&&this._map.touchZoomRotate.isEnabled()?
+(Z[3]||0):this._map.getBearing();return this._map.jumpTo({center:[+Z[2],+Z[1]],zoom:+Z[0],bearing:fa,pitch:+(Z[4]||0)}),!0}return!1};gg.prototype._updateHashUnthrottled=function(){var Z=this.getHashString();try{b.window.history.replaceState(b.window.history.state,"",Z)}catch(fa){}};var Mf={linearity:.3,easing:b.bezier(0,0,.3,1)},ji=b.extend({deceleration:2500,maxSpeed:1400},Mf),Zi=b.extend({deceleration:20,maxSpeed:1400},Mf),kj=b.extend({deceleration:1E3,maxSpeed:360},Mf),xh=b.extend({deceleration:1E3,
maxSpeed:90},Mf),hh=function(Z){this._map=Z;this.clear()};hh.prototype.clear=function(){this._inertiaBuffer=[]};hh.prototype.record=function(Z){this._drainInertiaBuffer();this._inertiaBuffer.push({time:b.browser.now(),settings:Z})};hh.prototype._drainInertiaBuffer=function(){for(var Z=this._inertiaBuffer,fa=b.browser.now();0<Z.length&&160<fa-Z[0].time;)Z.shift()};hh.prototype._onMoveEnd=function(Z){if(this._drainInertiaBuffer(),!(2>this._inertiaBuffer.length)){for(var fa=0,da=0,ta=0,Ga=new b.Point(0,
0),Za=void 0,hb=void 0,ub=0,Rb=this._inertiaBuffer;ub<Rb.length;ub+=1){var Yb=Rb[ub].settings;fa+=Yb.zoomDelta||0;da+=Yb.bearingDelta||0;ta+=Yb.pitchDelta||0;Yb.panDelta&&Ga._add(Yb.panDelta);Yb.around&&(hb=Yb.around);Yb.pinchAround&&(Za=Yb.pinchAround)}Rb=this._inertiaBuffer[this._inertiaBuffer.length-1].time-this._inertiaBuffer[0].time;ub={};Ga.mag()&&(Z=oa(Ga.mag(),Rb,b.extend({},ji,Z||{})),ub.offset=Ga.mult(Z.amount/Ga.mag()),ub.center=this._map.transform.center,pa(ub,Z));fa&&(fa=oa(fa,Rb,Zi),
ub.zoom=this._map.transform.zoom+fa.amount,pa(ub,fa));da&&(da=oa(da,Rb,kj),ub.bearing=this._map.transform.bearing+b.clamp(da.amount,-179,179),pa(ub,da));ta&&(ta=oa(ta,Rb,xh),ub.pitch=this._map.transform.pitch+ta.amount,pa(ub,ta));if(ub.zoom||ub.bearing)Za=void 0===Za?hb:Za,ub.around=Za?this._map.unproject(Za):this._map.getCenter();return this.clear(),b.extend(ub,{noMoveStart:!0})}};var wg=function(Z){function fa(ta,Ga,Za,hb){void 0===hb&&(hb={});var ub=$a.mousePos(Ga.getCanvasContainer(),Za),Rb=Ga.unproject(ub);
Z.call(this,ta,b.extend({point:ub,lngLat:Rb,originalEvent:Za},hb));this._defaultPrevented=!1;this.target=Ga}Z&&(fa.__proto__=Z);(fa.prototype=Object.create(Z&&Z.prototype)).constructor=fa;var da={defaultPrevented:{configurable:!0}};return fa.prototype.preventDefault=function(){this._defaultPrevented=!0},da.defaultPrevented.get=function(){return this._defaultPrevented},Object.defineProperties(fa.prototype,da),fa}(b.Event),zh=function(Z){function fa(ta,Ga,Za){var hb="touchend"===ta?Za.changedTouches:
Za.touches;hb=$a.touchPos(Ga.getCanvasContainer(),hb);var ub=hb.map(function(dc){return Ga.unproject(dc)}),Rb=hb.reduce(function(dc,Ac,Ec,uc){return dc.add(Ac.div(uc.length))},new b.Point(0,0)),Yb=Ga.unproject(Rb);Z.call(this,ta,{points:hb,point:Rb,lngLats:ub,lngLat:Yb,originalEvent:Za});this._defaultPrevented=!1}Z&&(fa.__proto__=Z);(fa.prototype=Object.create(Z&&Z.prototype)).constructor=fa;var da={defaultPrevented:{configurable:!0}};return fa.prototype.preventDefault=function(){this._defaultPrevented=
!0},da.defaultPrevented.get=function(){return this._defaultPrevented},Object.defineProperties(fa.prototype,da),fa}(b.Event),Zj=function(Z){function fa(ta,Ga,Za){Z.call(this,ta,{originalEvent:Za});this._defaultPrevented=!1}Z&&(fa.__proto__=Z);(fa.prototype=Object.create(Z&&Z.prototype)).constructor=fa;var da={defaultPrevented:{configurable:!0}};return fa.prototype.preventDefault=function(){this._defaultPrevented=!0},da.defaultPrevented.get=function(){return this._defaultPrevented},Object.defineProperties(fa.prototype,
da),fa}(b.Event),Sf=function(Z,fa){this._map=Z;this._clickTolerance=fa.clickTolerance};Sf.prototype.reset=function(){delete this._mousedownPos};Sf.prototype.wheel=function(Z){return this._firePreventable(new Zj(Z.type,this._map,Z))};Sf.prototype.mousedown=function(Z,fa){return this._mousedownPos=fa,this._firePreventable(new wg(Z.type,this._map,Z))};Sf.prototype.mouseup=function(Z){this._map.fire(new wg(Z.type,this._map,Z))};Sf.prototype.click=function(Z,fa){this._mousedownPos&&this._mousedownPos.dist(fa)>=
this._clickTolerance||this._map.fire(new wg(Z.type,this._map,Z))};Sf.prototype.dblclick=function(Z){return this._firePreventable(new wg(Z.type,this._map,Z))};Sf.prototype.mouseover=function(Z){this._map.fire(new wg(Z.type,this._map,Z))};Sf.prototype.mouseout=function(Z){this._map.fire(new wg(Z.type,this._map,Z))};Sf.prototype.touchstart=function(Z){return this._firePreventable(new zh(Z.type,this._map,Z))};Sf.prototype.touchmove=function(Z){this._map.fire(new zh(Z.type,this._map,Z))};Sf.prototype.touchend=
function(Z){this._map.fire(new zh(Z.type,this._map,Z))};Sf.prototype.touchcancel=function(Z){this._map.fire(new zh(Z.type,this._map,Z))};Sf.prototype._firePreventable=function(Z){if(this._map.fire(Z),Z.defaultPrevented)return{}};Sf.prototype.isEnabled=function(){return!0};Sf.prototype.isActive=function(){return!1};Sf.prototype.enable=function(){};Sf.prototype.disable=function(){};var Jg=function(Z){this._map=Z};Jg.prototype.reset=function(){this._delayContextMenu=!1;delete this._contextMenuEvent};
Jg.prototype.mousemove=function(Z){this._map.fire(new wg(Z.type,this._map,Z))};Jg.prototype.mousedown=function(){this._delayContextMenu=!0};Jg.prototype.mouseup=function(){this._delayContextMenu=!1;this._contextMenuEvent&&(this._map.fire(new wg("contextmenu",this._map,this._contextMenuEvent)),delete this._contextMenuEvent)};Jg.prototype.contextmenu=function(Z){this._delayContextMenu?this._contextMenuEvent=Z:this._map.fire(new wg(Z.type,this._map,Z));this._map.listens("contextmenu")&&Z.preventDefault()};
Jg.prototype.isEnabled=function(){return!0};Jg.prototype.isActive=function(){return!1};Jg.prototype.enable=function(){};Jg.prototype.disable=function(){};var Sg=function(Z,fa){this._map=Z;this._el=Z.getCanvasContainer();this._container=Z.getContainer();this._clickTolerance=fa.clickTolerance||1};Sg.prototype.isEnabled=function(){return!!this._enabled};Sg.prototype.isActive=function(){return!!this._active};Sg.prototype.enable=function(){this.isEnabled()||(this._enabled=!0)};Sg.prototype.disable=function(){this.isEnabled()&&
(this._enabled=!1)};Sg.prototype.mousedown=function(Z,fa){this.isEnabled()&&Z.shiftKey&&0===Z.button&&($a.disableDrag(),this._startPos=this._lastPos=fa,this._active=!0)};Sg.prototype.mousemoveWindow=function(Z,fa){if(this._active&&!(this._lastPos.equals(fa)||!this._box&&fa.dist(this._startPos)<this._clickTolerance)){var da=this._startPos;this._lastPos=fa;this._box||(this._box=$a.create("div","mapboxgl-boxzoom",this._container),this._container.classList.add("mapboxgl-crosshair"),this._fireEvent("boxzoomstart",
Z));Z=Math.min(da.x,fa.x);var ta=Math.max(da.x,fa.x),Ga=Math.min(da.y,fa.y);fa=Math.max(da.y,fa.y);$a.setTransform(this._box,"translate("+Z+"px,"+Ga+"px)");this._box.style.width=ta-Z+"px";this._box.style.height=fa-Ga+"px"}};Sg.prototype.mouseupWindow=function(Z,fa){var da=this;if(this._active&&0===Z.button){var ta=this._startPos;if(this.reset(),$a.suppressClick(),ta.x!==fa.x||ta.y!==fa.y)return this._map.fire(new b.Event("boxzoomend",{originalEvent:Z})),{cameraAnimation:function(Ga){return Ga.fitScreenCoordinates(ta,
fa,da._map.getBearing(),{linear:!0})}};this._fireEvent("boxzoomcancel",Z)}};Sg.prototype.keydown=function(Z){this._active&&27===Z.keyCode&&(this.reset(),this._fireEvent("boxzoomcancel",Z))};Sg.prototype.reset=function(){this._active=!1;this._container.classList.remove("mapboxgl-crosshair");this._box&&($a.remove(this._box),this._box=null);$a.enableDrag();delete this._startPos;delete this._lastPos};Sg.prototype._fireEvent=function(Z,fa){return this._map.fire(new b.Event(Z,{originalEvent:fa}))};var Rh=
function(Z){this.reset();this.numTouches=Z.numTouches};Rh.prototype.reset=function(){delete this.centroid;delete this.startTime;delete this.touches;this.aborted=!1};Rh.prototype.touchstart=function(Z,fa,da){(this.centroid||da.length>this.numTouches)&&(this.aborted=!0);if(!this.aborted&&(void 0===this.startTime&&(this.startTime=Z.timeStamp),da.length===this.numTouches)){Z=new b.Point(0,0);for(var ta=0;ta<fa.length;ta+=1)Z._add(fa[ta]);this.centroid=Z.div(fa.length);this.touches=ua(da,fa)}};Rh.prototype.touchmove=
function(Z,fa,da){if(!this.aborted&&this.centroid){Z=ua(da,fa);for(var ta in this.touches)fa=Z[ta],(!fa||30<fa.dist(this.touches[ta]))&&(this.aborted=!0)}};Rh.prototype.touchend=function(Z,fa,da){if((!this.centroid||500<Z.timeStamp-this.startTime)&&(this.aborted=!0),0===da.length)if(Z=!this.aborted&&this.centroid,this.reset(),Z)return Z};var pb=function(Z){this.singleTap=new Rh(Z);this.numTaps=Z.numTaps;this.reset()};pb.prototype.reset=function(){this.lastTime=1/0;delete this.lastTap;this.count=0;
this.singleTap.reset()};pb.prototype.touchstart=function(Z,fa,da){this.singleTap.touchstart(Z,fa,da)};pb.prototype.touchmove=function(Z,fa,da){this.singleTap.touchmove(Z,fa,da)};pb.prototype.touchend=function(Z,fa,da){if(fa=this.singleTap.touchend(Z,fa,da)){da=500>Z.timeStamp-this.lastTime;var ta=!this.lastTap||30>this.lastTap.dist(fa);if(da&&ta||this.reset(),this.count++,this.lastTime=Z.timeStamp,this.lastTap=fa,this.count===this.numTaps)return this.reset(),fa}};var Bb=function(){this._zoomIn=new pb({numTouches:1,
numTaps:2});this._zoomOut=new pb({numTouches:2,numTaps:1});this.reset()};Bb.prototype.reset=function(){this._active=!1;this._zoomIn.reset();this._zoomOut.reset()};Bb.prototype.touchstart=function(Z,fa,da){this._zoomIn.touchstart(Z,fa,da);this._zoomOut.touchstart(Z,fa,da)};Bb.prototype.touchmove=function(Z,fa,da){this._zoomIn.touchmove(Z,fa,da);this._zoomOut.touchmove(Z,fa,da)};Bb.prototype.touchend=function(Z,fa,da){var ta=this,Ga=this._zoomIn.touchend(Z,fa,da),Za=this._zoomOut.touchend(Z,fa,da);
return Ga?(this._active=!0,Z.preventDefault(),setTimeout(function(){return ta.reset()},0),{cameraAnimation:function(hb){return hb.easeTo({duration:300,zoom:hb.getZoom()+1,around:hb.unproject(Ga)},{originalEvent:Z})}}):Za?(this._active=!0,Z.preventDefault(),setTimeout(function(){return ta.reset()},0),{cameraAnimation:function(hb){return hb.easeTo({duration:300,zoom:hb.getZoom()-1,around:hb.unproject(Za)},{originalEvent:Z})}}):void 0};Bb.prototype.touchcancel=function(){this.reset()};Bb.prototype.enable=
function(){this._enabled=!0};Bb.prototype.disable=function(){this._enabled=!1;this.reset()};Bb.prototype.isEnabled=function(){return this._enabled};Bb.prototype.isActive=function(){return this._active};var Pb=function(Z){this.reset();this._clickTolerance=Z.clickTolerance||1};Pb.prototype.reset=function(){this._moved=this._active=!1;delete this._lastPoint;delete this._eventButton};Pb.prototype._correctButton=function(Z,fa){return!1};Pb.prototype._move=function(Z,fa){return{}};Pb.prototype.mousedown=
function(Z,fa){if(!this._lastPoint){var da=$a.mouseButton(Z);this._correctButton(Z,da)&&(this._lastPoint=fa,this._eventButton=da)}};Pb.prototype.mousemoveWindow=function(Z,fa){var da=this._lastPoint;if(da&&(Z.preventDefault(),this._moved||!(fa.dist(da)<this._clickTolerance)))return this._moved=!0,this._lastPoint=fa,this._move(da,fa)};Pb.prototype.mouseupWindow=function(Z){$a.mouseButton(Z)===this._eventButton&&(this._moved&&$a.suppressClick(),this.reset())};Pb.prototype.enable=function(){this._enabled=
!0};Pb.prototype.disable=function(){this._enabled=!1;this.reset()};Pb.prototype.isEnabled=function(){return this._enabled};Pb.prototype.isActive=function(){return this._active};var bc=function(Z){function fa(){Z.apply(this,arguments)}return Z&&(fa.__proto__=Z),(fa.prototype=Object.create(Z&&Z.prototype)).constructor=fa,fa.prototype.mousedown=function(da,ta){Z.prototype.mousedown.call(this,da,ta);this._lastPoint&&(this._active=!0)},fa.prototype._correctButton=function(da,ta){return 0===ta&&!da.ctrlKey},
fa.prototype._move=function(da,ta){return{around:ta,panDelta:ta.sub(da)}},fa}(Pb),pc=function(Z){function fa(){Z.apply(this,arguments)}return Z&&(fa.__proto__=Z),(fa.prototype=Object.create(Z&&Z.prototype)).constructor=fa,fa.prototype._correctButton=function(da,ta){return 0===ta&&da.ctrlKey||2===ta},fa.prototype._move=function(da,ta){if(da=.8*(ta.x-da.x))return this._active=!0,{bearingDelta:da}},fa.prototype.contextmenu=function(da){da.preventDefault()},fa}(Pb),dd=function(Z){function fa(){Z.apply(this,
arguments)}return Z&&(fa.__proto__=Z),(fa.prototype=Object.create(Z&&Z.prototype)).constructor=fa,fa.prototype._correctButton=function(da,ta){return 0===ta&&da.ctrlKey||2===ta},fa.prototype._move=function(da,ta){if(da=-.5*(ta.y-da.y))return this._active=!0,{pitchDelta:da}},fa.prototype.contextmenu=function(da){da.preventDefault()},fa}(Pb),id=function(Z){this._minTouches=1;this._clickTolerance=Z.clickTolerance||1;this.reset()};id.prototype.reset=function(){this._active=!1;this._touches={};this._sum=
new b.Point(0,0)};id.prototype.touchstart=function(Z,fa,da){return this._calculateTransform(Z,fa,da)};id.prototype.touchmove=function(Z,fa,da){if(this._active)return Z.preventDefault(),this._calculateTransform(Z,fa,da)};id.prototype.touchend=function(Z,fa,da){this._calculateTransform(Z,fa,da);this._active&&da.length<this._minTouches&&this.reset()};id.prototype.touchcancel=function(){this.reset()};id.prototype._calculateTransform=function(Z,fa,da){0<da.length&&(this._active=!0);da=ua(da,fa);Z=new b.Point(0,
0);var ta=new b.Point(0,0);fa=0;for(var Ga in da){var Za=da[Ga],hb=this._touches[Ga];hb&&(Z._add(Za),ta._add(Za.sub(hb)),fa++,da[Ga]=Za)}if(this._touches=da,!(fa<this._minTouches)&&ta.mag())if(Ga=ta.div(fa),this._sum._add(Ga),!(this._sum.mag()<this._clickTolerance))return{around:Z.div(fa),panDelta:Ga}};id.prototype.enable=function(){this._enabled=!0};id.prototype.disable=function(){this._enabled=!1;this.reset()};id.prototype.isEnabled=function(){return this._enabled};id.prototype.isActive=function(){return this._active};
var Xc=function(){this.reset()};Xc.prototype.reset=function(){this._active=!1;delete this._firstTwoTouches};Xc.prototype._start=function(Z){};Xc.prototype._move=function(Z,fa,da){return{}};Xc.prototype.touchstart=function(Z,fa,da){this._firstTwoTouches||2>da.length||(this._firstTwoTouches=[da[0].identifier,da[1].identifier],this._start([fa[0],fa[1]]))};Xc.prototype.touchmove=function(Z,fa,da){if(this._firstTwoTouches){Z.preventDefault();var ta=this._firstTwoTouches,Ga=ta[1];ta=ya(da,fa,ta[0]);fa=
ya(da,fa,Ga);if(ta&&fa)return da=this._aroundCenter?null:ta.add(fa).div(2),this._move([ta,fa],da,Z)}};Xc.prototype.touchend=function(Z,fa,da){if(this._firstTwoTouches){var ta=this._firstTwoTouches;Z=ta[1];ta=ya(da,fa,ta[0]);fa=ya(da,fa,Z);ta&&fa||(this._active&&$a.suppressClick(),this.reset())}};Xc.prototype.touchcancel=function(){this.reset()};Xc.prototype.enable=function(Z){this._enabled=!0;this._aroundCenter=!!Z&&"center"===Z.around};Xc.prototype.disable=function(){this._enabled=!1;this.reset()};
Xc.prototype.isEnabled=function(){return this._enabled};Xc.prototype.isActive=function(){return this._active};var fd=function(Z){function fa(){Z.apply(this,arguments)}return Z&&(fa.__proto__=Z),(fa.prototype=Object.create(Z&&Z.prototype)).constructor=fa,fa.prototype.reset=function(){Z.prototype.reset.call(this);delete this._distance;delete this._startDistance},fa.prototype._start=function(da){this._startDistance=this._distance=da[0].dist(da[1])},fa.prototype._move=function(da,ta){var Ga=this._distance;
if(this._distance=da[0].dist(da[1]),this._active||!(.1>Math.abs(Math.log(this._distance/this._startDistance)/Math.LN2)))return this._active=!0,{zoomDelta:Math.log(this._distance/Ga)/Math.LN2,pinchAround:ta}},fa}(Xc),rd=function(Z){function fa(){Z.apply(this,arguments)}return Z&&(fa.__proto__=Z),(fa.prototype=Object.create(Z&&Z.prototype)).constructor=fa,fa.prototype.reset=function(){Z.prototype.reset.call(this);delete this._minDiameter;delete this._startVector;delete this._vector},fa.prototype._start=
function(da){this._startVector=this._vector=da[0].sub(da[1]);this._minDiameter=da[0].dist(da[1])},fa.prototype._move=function(da,ta){var Ga=this._vector;if(this._vector=da[0].sub(da[1]),this._active||!this._isBelowThreshold(this._vector))return this._active=!0,{bearingDelta:180*this._vector.angleWith(Ga)/Math.PI,pinchAround:ta}},fa.prototype._isBelowThreshold=function(da){this._minDiameter=Math.min(this._minDiameter,da.mag());var ta=25/(Math.PI*this._minDiameter)*360;da=180*da.angleWith(this._startVector)/
Math.PI;return Math.abs(da)<ta},fa}(Xc),Id=function(Z){function fa(){Z.apply(this,arguments)}return Z&&(fa.__proto__=Z),(fa.prototype=Object.create(Z&&Z.prototype)).constructor=fa,fa.prototype.reset=function(){Z.prototype.reset.call(this);this._valid=void 0;delete this._firstMove;delete this._lastPoints},fa.prototype._start=function(da){this._lastPoints=da;ja(da[0].sub(da[1]))&&(this._valid=!1)},fa.prototype._move=function(da,ta,Ga){ta=da[0].sub(this._lastPoints[0]);var Za=da[1].sub(this._lastPoints[1]);
if(this._valid=this.gestureBeginsVertically(ta,Za,Ga.timeStamp),this._valid)return this._lastPoints=da,this._active=!0,{pitchDelta:(ta.y+Za.y)/2*-.5}},fa.prototype.gestureBeginsVertically=function(da,ta,Ga){if(void 0!==this._valid)return this._valid;var Za=2<=da.mag(),hb=2<=ta.mag();if(Za||hb){if(!Za||!hb)return void 0===this._firstMove&&(this._firstMove=Ga),100>Ga-this._firstMove&&void 0;Ga=0<da.y==0<ta.y;return ja(da)&&ja(ta)&&Ga}},fa}(Xc),yd=function(){this._panStep=100;this._bearingStep=15;this._pitchStep=
10};yd.prototype.reset=function(){this._active=!1};yd.prototype.keydown=function(Z){var fa=this;if(!(Z.altKey||Z.ctrlKey||Z.metaKey)){var da=0,ta=0,Ga=0,Za=0,hb=0;switch(Z.keyCode){case 61:case 107:case 171:case 187:da=1;break;case 189:case 109:case 173:da=-1;break;case 37:Z.shiftKey?ta=-1:(Z.preventDefault(),Za=-1);break;case 39:Z.shiftKey?ta=1:(Z.preventDefault(),Za=1);break;case 38:Z.shiftKey?Ga=1:(Z.preventDefault(),hb=-1);break;case 40:Z.shiftKey?Ga=-1:(Z.preventDefault(),hb=1);break;default:return}return{cameraAnimation:function(ub){var Rb=
ub.getZoom();ub.easeTo({duration:300,easeId:"keyboardHandler",easing:za,zoom:da?Math.round(Rb)+da*(Z.shiftKey?2:1):Rb,bearing:ub.getBearing()+ta*fa._bearingStep,pitch:ub.getPitch()+Ga*fa._pitchStep,offset:[-Za*fa._panStep,-hb*fa._panStep],center:ub.getCenter()},{originalEvent:Z})}}}};yd.prototype.enable=function(){this._enabled=!0};yd.prototype.disable=function(){this._enabled=!1;this.reset()};yd.prototype.isEnabled=function(){return this._enabled};yd.prototype.isActive=function(){return this._active};
var td=function(Z,fa){this._map=Z;this._el=Z.getCanvasContainer();this._handler=fa;this._delta=0;this._defaultZoomRate=.01;this._wheelZoomRate=1/450;b.bindAll(["_onWheel","_onTimeout","_onScrollFrame","_onScrollFinished"],this)};td.prototype.setZoomRate=function(Z){this._defaultZoomRate=Z};td.prototype.setWheelZoomRate=function(Z){this._wheelZoomRate=Z};td.prototype.isEnabled=function(){return!!this._enabled};td.prototype.isActive=function(){return!!this._active||void 0!==this._finishTimeout};td.prototype.isZooming=
function(){return!!this._zooming};td.prototype.enable=function(Z){this.isEnabled()||(this._enabled=!0,this._aroundCenter=Z&&"center"===Z.around)};td.prototype.disable=function(){this.isEnabled()&&(this._enabled=!1)};td.prototype.wheel=function(Z){if(this.isEnabled()){var fa=Z.deltaMode===b.window.WheelEvent.DOM_DELTA_LINE?40*Z.deltaY:Z.deltaY,da=b.browser.now(),ta=da-(this._lastWheelEventTime||0);this._lastWheelEventTime=da;0!==fa&&0==fa%4.000244140625?this._type="wheel":0!==fa&&4>Math.abs(fa)?this._type=
"trackpad":400<ta?(this._type=null,this._lastValue=fa,this._timeout=setTimeout(this._onTimeout,40,Z)):this._type||(this._type=200>Math.abs(ta*fa)?"trackpad":"wheel",this._timeout&&(clearTimeout(this._timeout),this._timeout=null,fa+=this._lastValue));Z.shiftKey&&fa&&(fa/=4);this._type&&(this._lastWheelEvent=Z,this._delta-=fa,this._active||this._start(Z));Z.preventDefault()}};td.prototype._onTimeout=function(Z){this._type="wheel";this._delta-=this._lastValue;this._active||this._start(Z)};td.prototype._start=
function(Z){this._delta&&(this._frameId&&(this._frameId=null),this._active=!0,this.isZooming()||(this._zooming=!0),this._finishTimeout&&(clearTimeout(this._finishTimeout),delete this._finishTimeout),Z=$a.mousePos(this._el,Z),this._around=b.LngLat.convert(this._aroundCenter?this._map.getCenter():this._map.unproject(Z)),this._aroundPoint=this._map.transform.locationPoint(this._around),this._frameId||(this._frameId=!0,this._handler._triggerRenderFrame()))};td.prototype.renderFrame=function(){return this._onScrollFrame()};
td.prototype._onScrollFrame=function(){var Z=this;if(this._frameId&&(this._frameId=null,this.isActive())){var fa=this._map.transform;if(0!==this._delta){var da=2/(1+Math.exp(-Math.abs(this._delta*("wheel"===this._type&&4.000244140625<Math.abs(this._delta)?this._wheelZoomRate:this._defaultZoomRate))));0>this._delta&&0!==da&&(da=1/da);var ta="number"==typeof this._targetZoom?fa.zoomScale(this._targetZoom):fa.scale;this._targetZoom=Math.min(fa.maxZoom,Math.max(fa.minZoom,fa.scaleZoom(ta*da)));"wheel"===
this._type&&(this._startZoom=fa.zoom,this._easing=this._smoothOutEasing(200));this._delta=0}var Ga="number"==typeof this._targetZoom?this._targetZoom:fa.zoom;var Za=this._startZoom,hb=this._easing;da=!1;"wheel"===this._type&&Za&&hb?(ta=Math.min((b.browser.now()-this._lastWheelEventTime)/200,1),hb=hb(ta),Ga=b.number(Za,Ga,hb),1>ta?this._frameId||(this._frameId=!0):da=!0):da=!0;return this._active=!0,da&&(this._active=!1,this._finishTimeout=setTimeout(function(){Z._zooming=!1;Z._handler._triggerRenderFrame();
delete Z._targetZoom;delete Z._finishTimeout},200)),{noInertia:!0,needsRenderFrame:!da,zoomDelta:Ga-fa.zoom,around:this._aroundPoint,originalEvent:this._lastWheelEvent}}};td.prototype._smoothOutEasing=function(Z){var fa=b.ease;if(this._prevEase){fa=this._prevEase;var da=(b.browser.now()-fa.start)/fa.duration;fa=fa.easing(da+.01)-fa.easing(da);fa=.27/Math.sqrt(fa*fa+1E-4)*.01;fa=b.bezier(fa,Math.sqrt(.0729-fa*fa),.25,1)}return this._prevEase={start:b.browser.now(),duration:Z,easing:fa},fa};td.prototype.reset=
function(){this._active=!1};var Jd=function(Z,fa){this._clickZoom=Z;this._tapZoom=fa};Jd.prototype.enable=function(){this._clickZoom.enable();this._tapZoom.enable()};Jd.prototype.disable=function(){this._clickZoom.disable();this._tapZoom.disable()};Jd.prototype.isEnabled=function(){return this._clickZoom.isEnabled()&&this._tapZoom.isEnabled()};Jd.prototype.isActive=function(){return this._clickZoom.isActive()||this._tapZoom.isActive()};var Rd=function(){this.reset()};Rd.prototype.reset=function(){this._active=
!1};Rd.prototype.dblclick=function(Z,fa){return Z.preventDefault(),{cameraAnimation:function(da){da.easeTo({duration:300,zoom:da.getZoom()+(Z.shiftKey?-1:1),around:da.unproject(fa)},{originalEvent:Z})}}};Rd.prototype.enable=function(){this._enabled=!0};Rd.prototype.disable=function(){this._enabled=!1;this.reset()};Rd.prototype.isEnabled=function(){return this._enabled};Rd.prototype.isActive=function(){return this._active};var Md=function(){this._tap=new pb({numTouches:1,numTaps:1});this.reset()};
Md.prototype.reset=function(){this._active=!1;delete this._swipePoint;delete this._swipeTouch;delete this._tapTime;this._tap.reset()};Md.prototype.touchstart=function(Z,fa,da){this._swipePoint||(this._tapTime&&500<Z.timeStamp-this._tapTime&&this.reset(),this._tapTime?0<da.length&&(this._swipePoint=fa[0],this._swipeTouch=da[0].identifier):this._tap.touchstart(Z,fa,da))};Md.prototype.touchmove=function(Z,fa,da){if(this._tapTime){if(this._swipePoint&&da[0].identifier===this._swipeTouch)return fa=fa[0],
da=fa.y-this._swipePoint.y,this._swipePoint=fa,Z.preventDefault(),this._active=!0,{zoomDelta:da/128}}else this._tap.touchmove(Z,fa,da)};Md.prototype.touchend=function(Z,fa,da){this._tapTime?this._swipePoint&&0===da.length&&this.reset():this._tap.touchend(Z,fa,da)&&(this._tapTime=Z.timeStamp)};Md.prototype.touchcancel=function(){this.reset()};Md.prototype.enable=function(){this._enabled=!0};Md.prototype.disable=function(){this._enabled=!1;this.reset()};Md.prototype.isEnabled=function(){return this._enabled};
Md.prototype.isActive=function(){return this._active};var Ne=function(Z,fa,da){this._el=Z;this._mousePan=fa;this._touchPan=da};Ne.prototype.enable=function(Z){this._inertiaOptions=Z||{};this._mousePan.enable();this._touchPan.enable();this._el.classList.add("mapboxgl-touch-drag-pan")};Ne.prototype.disable=function(){this._mousePan.disable();this._touchPan.disable();this._el.classList.remove("mapboxgl-touch-drag-pan")};Ne.prototype.isEnabled=function(){return this._mousePan.isEnabled()&&this._touchPan.isEnabled()};
Ne.prototype.isActive=function(){return this._mousePan.isActive()||this._touchPan.isActive()};var xe=function(Z,fa,da){this._pitchWithRotate=Z.pitchWithRotate;this._mouseRotate=fa;this._mousePitch=da};xe.prototype.enable=function(){this._mouseRotate.enable();this._pitchWithRotate&&this._mousePitch.enable()};xe.prototype.disable=function(){this._mouseRotate.disable();this._mousePitch.disable()};xe.prototype.isEnabled=function(){return this._mouseRotate.isEnabled()&&(!this._pitchWithRotate||this._mousePitch.isEnabled())};
xe.prototype.isActive=function(){return this._mouseRotate.isActive()||this._mousePitch.isActive()};var ve=function(Z,fa,da,ta){this._el=Z;this._touchZoom=fa;this._touchRotate=da;this._tapDragZoom=ta;this._rotationDisabled=!1;this._enabled=!0};ve.prototype.enable=function(Z){this._touchZoom.enable(Z);this._rotationDisabled||this._touchRotate.enable(Z);this._tapDragZoom.enable();this._el.classList.add("mapboxgl-touch-zoom-rotate")};ve.prototype.disable=function(){this._touchZoom.disable();this._touchRotate.disable();
this._tapDragZoom.disable();this._el.classList.remove("mapboxgl-touch-zoom-rotate")};ve.prototype.isEnabled=function(){return this._touchZoom.isEnabled()&&(this._rotationDisabled||this._touchRotate.isEnabled())&&this._tapDragZoom.isEnabled()};ve.prototype.isActive=function(){return this._touchZoom.isActive()||this._touchRotate.isActive()||this._tapDragZoom.isActive()};ve.prototype.disableRotation=function(){this._rotationDisabled=!0;this._touchRotate.disable()};ve.prototype.enableRotation=function(){this._rotationDisabled=
!1;this._touchZoom.isEnabled()&&this._touchRotate.enable()};var Bd=function(Z){return Z.zoom||Z.drag||Z.pitch||Z.rotate},Td=function(Z){function fa(){Z.apply(this,arguments)}return Z&&(fa.__proto__=Z),(fa.prototype=Object.create(Z&&Z.prototype)).constructor=fa,fa}(b.Event),Zd=function(Z,fa){this._map=Z;this._el=this._map.getCanvasContainer();this._handlers=[];this._handlersById={};this._changes=[];this._inertia=new hh(Z);this._bearingSnap=fa.bearingSnap;this._previousActiveHandlers={};this._eventsInProgress=
{};this._addDefaultHandlers(fa);b.bindAll(["handleEvent","handleWindowEvent"],this);Z=this._el;this._listeners=[[Z,"touchstart",{passive:!1}],[Z,"touchmove",{passive:!1}],[Z,"touchend",void 0],[Z,"touchcancel",void 0],[Z,"mousedown",void 0],[Z,"mousemove",void 0],[Z,"mouseup",void 0],[b.window.document,"mousemove",{capture:!0}],[b.window.document,"mouseup",void 0],[Z,"mouseover",void 0],[Z,"mouseout",void 0],[Z,"dblclick",void 0],[Z,"click",void 0],[Z,"keydown",{capture:!1}],[Z,"keyup",void 0],[Z,
"wheel",{passive:!1}],[Z,"contextmenu",void 0],[b.window,"blur",void 0]];Z=0;for(fa=this._listeners;Z<fa.length;Z+=1){var da=fa[Z],ta=da[0];$a.addEventListener(ta,da[1],ta===b.window.document?this.handleWindowEvent:this.handleEvent,da[2])}};Zd.prototype.destroy=function(){for(var Z=0,fa=this._listeners;Z<fa.length;Z+=1){var da=fa[Z],ta=da[0];$a.removeEventListener(ta,da[1],ta===b.window.document?this.handleWindowEvent:this.handleEvent,da[2])}};Zd.prototype._addDefaultHandlers=function(Z){var fa=this._map,
da=fa.getCanvasContainer();this._add("mapEvent",new Sf(fa,Z));var ta=fa.boxZoom=new Sg(fa,Z);this._add("boxZoom",ta);ta=new Bb;var Ga=new Rd;fa.doubleClickZoom=new Jd(Ga,ta);this._add("tapZoom",ta);this._add("clickZoom",Ga);ta=new Md;this._add("tapDragZoom",ta);Ga=fa.touchPitch=new Id;this._add("touchPitch",Ga);Ga=new pc(Z);var Za=new dd(Z);fa.dragRotate=new xe(Z,Ga,Za);this._add("mouseRotate",Ga,["mousePitch"]);this._add("mousePitch",Za,["mouseRotate"]);Ga=new bc(Z);Za=new id(Z);fa.dragPan=new Ne(da,
Ga,Za);this._add("mousePan",Ga);this._add("touchPan",Za,["touchZoom","touchRotate"]);Ga=new rd;Za=new fd;fa.touchZoomRotate=new ve(da,Za,Ga,ta);this._add("touchRotate",Ga,["touchPan","touchZoom"]);this._add("touchZoom",Za,["touchPan","touchRotate"]);da=fa.scrollZoom=new td(fa,this);this._add("scrollZoom",da,["mousePan"]);da=fa.keyboard=new yd;this._add("keyboard",da);this._add("blockableMapEvent",new Jg(fa));da=0;for(ta="boxZoom doubleClickZoom tapDragZoom touchPitch dragRotate dragPan touchZoomRotate scrollZoom keyboard".split(" ");da<
ta.length;da+=1)Ga=ta[da],Z.interactive&&Z[Ga]&&fa[Ga].enable(Z[Ga])};Zd.prototype._add=function(Z,fa,da){this._handlers.push({handlerName:Z,handler:fa,allowed:da});this._handlersById[Z]=fa};Zd.prototype.stop=function(){if(!this._updatingCamera){for(var Z=0,fa=this._handlers;Z<fa.length;Z+=1)fa[Z].handler.reset();this._inertia.clear();this._fireEvents({},{});this._changes=[]}};Zd.prototype.isActive=function(){for(var Z=0,fa=this._handlers;Z<fa.length;Z+=1)if(fa[Z].handler.isActive())return!0;return!1};
Zd.prototype.isZooming=function(){return!!this._eventsInProgress.zoom||this._map.scrollZoom.isZooming()};Zd.prototype.isRotating=function(){return!!this._eventsInProgress.rotate};Zd.prototype.isMoving=function(){return!!Bd(this._eventsInProgress)||this.isZooming()};Zd.prototype._blockedByActive=function(Z,fa,da){for(var ta in Z)if(ta!==da&&(!fa||0>fa.indexOf(ta)))return!0;return!1};Zd.prototype.handleWindowEvent=function(Z){this.handleEvent(Z,Z.type+"Window")};Zd.prototype._getMapTouches=function(Z){for(var fa=
[],da=0;da<Z.length;da+=1){var ta=Z[da];this._el.contains(ta.target)&&fa.push(ta)}return fa};Zd.prototype.handleEvent=function(Z,fa){if("blur"!==Z.type){this._updatingCamera=!0;for(var da="renderFrame"===Z.type?void 0:Z,ta={needsRenderFrame:!1},Ga={},Za={},hb=Z.touches?this._getMapTouches(Z.touches):void 0,ub=hb?$a.touchPos(this._el,hb):$a.mousePos(this._el,Z),Rb=0,Yb=this._handlers;Rb<Yb.length;Rb+=1){var dc=Yb[Rb],Ac=dc.handlerName,Ec=dc.handler;dc=dc.allowed;if(Ec.isEnabled()){var uc=void 0;this._blockedByActive(Za,
dc,Ac)?Ec.reset():Ec[fa||Z.type]&&(uc=Ec[fa||Z.type](Z,ub,hb),this.mergeHandlerResult(ta,Ga,uc,Ac,da),uc&&uc.needsRenderFrame&&this._triggerRenderFrame());(uc||Ec.isActive())&&(Za[Ac]=Ec)}}Z={};for(var Xb in this._previousActiveHandlers)Za[Xb]||(Z[Xb]=da);this._previousActiveHandlers=Za;(Object.keys(Z).length||Ba(ta))&&(this._changes.push([ta,Ga,Z]),this._triggerRenderFrame());(Object.keys(Za).length||Ba(ta))&&this._map._stop(!0);this._updatingCamera=!1;(da=ta.cameraAnimation)&&(this._inertia.clear(),
this._fireEvents({},{}),this._changes=[],da(this._map))}else this.stop()};Zd.prototype.mergeHandlerResult=function(Z,fa,da,ta,Ga){da&&(b.extend(Z,da),Z={handlerName:ta,originalEvent:da.originalEvent||Ga},void 0!==da.zoomDelta&&(fa.zoom=Z),void 0!==da.panDelta&&(fa.drag=Z),void 0!==da.pitchDelta&&(fa.pitch=Z),void 0!==da.bearingDelta&&(fa.rotate=Z))};Zd.prototype._applyChanges=function(){for(var Z={},fa={},da={},ta=0,Ga=this._changes;ta<Ga.length;ta+=1){var Za=Ga[ta],hb=Za[0],ub=Za[1];Za=Za[2];hb.panDelta&&
(Z.panDelta=(Z.panDelta||new b.Point(0,0))._add(hb.panDelta));hb.zoomDelta&&(Z.zoomDelta=(Z.zoomDelta||0)+hb.zoomDelta);hb.bearingDelta&&(Z.bearingDelta=(Z.bearingDelta||0)+hb.bearingDelta);hb.pitchDelta&&(Z.pitchDelta=(Z.pitchDelta||0)+hb.pitchDelta);void 0!==hb.around&&(Z.around=hb.around);void 0!==hb.pinchAround&&(Z.pinchAround=hb.pinchAround);hb.noInertia&&(Z.noInertia=hb.noInertia);b.extend(fa,ub);b.extend(da,Za)}this._updateMapTransform(Z,fa,da);this._changes=[]};Zd.prototype._updateMapTransform=
function(Z,fa,da){var ta=this._map,Ga=ta.transform;if(!Ba(Z))return this._fireEvents(fa,da);var Za=Z.panDelta,hb=Z.zoomDelta,ub=Z.bearingDelta,Rb=Z.pitchDelta,Yb=Z.around,dc=Z.pinchAround;void 0!==dc&&(Yb=dc);ta._stop(!0);Yb=Yb||ta.transform.centerPoint;ta=Ga.pointLocation(Za?Yb.sub(Za):Yb);ub&&(Ga.bearing+=ub);Rb&&(Ga.pitch+=Rb);hb&&(Ga.zoom+=hb);Ga.setLocationAtPoint(ta,Yb);this._map._update();Z.noInertia||this._inertia.record(Z);this._fireEvents(fa,da)};Zd.prototype._fireEvents=function(Z,fa){var da=
this,ta=Bd(this._eventsInProgress),Ga=Bd(Z),Za={};for(dc in Z)this._eventsInProgress[dc]||(Za[dc+"start"]=Z[dc].originalEvent),this._eventsInProgress[dc]=Z[dc];for(var hb in!ta&&Ga&&this._fireEvent("movestart",Ga.originalEvent),Za)this._fireEvent(hb,Za[hb]);for(var ub in Z.rotate&&(this._bearingChanged=!0),Ga&&this._fireEvent("move",Ga.originalEvent),Z)this._fireEvent(ub,Z[ub].originalEvent);var Rb;Z={};for(var Yb in this._eventsInProgress){var dc=this._eventsInProgress[Yb];Za=dc.handlerName;dc=dc.originalEvent;
this._handlersById[Za].isActive()||(delete this._eventsInProgress[Yb],Z[Yb+"end"]=Rb=fa[Za]||dc)}for(var Ac in Z)this._fireEvent(Ac,Z[Ac]);fa=Bd(this._eventsInProgress);!ta&&!Ga||fa||(this._updatingCamera=!0,ta=this._inertia._onMoveEnd(this._map.dragPan._inertiaOptions),Ga=function(Ec){return 0!==Ec&&-da._bearingSnap<Ec&&Ec<da._bearingSnap},ta?(Ga(ta.bearing||this._map.getBearing())&&(ta.bearing=0),this._map.easeTo(ta,{originalEvent:Rb})):(this._map.fire(new b.Event("moveend",{originalEvent:Rb})),
Ga(this._map.getBearing())&&this._map.resetNorth()),this._updatingCamera=this._bearingChanged=!1)};Zd.prototype._fireEvent=function(Z,fa){this._map.fire(new b.Event(Z,fa?{originalEvent:fa}:{}))};Zd.prototype._triggerRenderFrame=function(){var Z=this;void 0===this._frameId&&(this._frameId=this._map._requestRenderFrame(function(fa){delete Z._frameId;Z.handleEvent(new Td("renderFrame",{timeStamp:fa}));Z._applyChanges()}))};var kf=function(Z){function fa(da,ta){Z.call(this);this._zooming=this._moving=
!1;this.transform=da;this._bearingSnap=ta.bearingSnap;b.bindAll(["_renderFrameCallback"],this)}return Z&&(fa.__proto__=Z),(fa.prototype=Object.create(Z&&Z.prototype)).constructor=fa,fa.prototype.getCenter=function(){return new b.LngLat(this.transform.center.lng,this.transform.center.lat)},fa.prototype.setCenter=function(da,ta){return this.jumpTo({center:da},ta)},fa.prototype.panBy=function(da,ta,Ga){return da=b.Point.convert(da).mult(-1),this.panTo(this.transform.center,b.extend({offset:da},ta),Ga)},
fa.prototype.panTo=function(da,ta,Ga){return this.easeTo(b.extend({center:da},ta),Ga)},fa.prototype.getZoom=function(){return this.transform.zoom},fa.prototype.setZoom=function(da,ta){return this.jumpTo({zoom:da},ta),this},fa.prototype.zoomTo=function(da,ta,Ga){return this.easeTo(b.extend({zoom:da},ta),Ga)},fa.prototype.zoomIn=function(da,ta){return this.zoomTo(this.getZoom()+1,da,ta),this},fa.prototype.zoomOut=function(da,ta){return this.zoomTo(this.getZoom()-1,da,ta),this},fa.prototype.getBearing=
function(){return this.transform.bearing},fa.prototype.setBearing=function(da,ta){return this.jumpTo({bearing:da},ta),this},fa.prototype.getPadding=function(){return this.transform.padding},fa.prototype.setPadding=function(da,ta){return this.jumpTo({padding:da},ta),this},fa.prototype.rotateTo=function(da,ta,Ga){return this.easeTo(b.extend({bearing:da},ta),Ga)},fa.prototype.resetNorth=function(da,ta){return this.rotateTo(0,b.extend({duration:1E3},da),ta),this},fa.prototype.resetNorthPitch=function(da,
ta){return this.easeTo(b.extend({bearing:0,pitch:0,duration:1E3},da),ta),this},fa.prototype.snapToNorth=function(da,ta){return Math.abs(this.getBearing())<this._bearingSnap?this.resetNorth(da,ta):this},fa.prototype.getPitch=function(){return this.transform.pitch},fa.prototype.setPitch=function(da,ta){return this.jumpTo({pitch:da},ta),this},fa.prototype.cameraForBounds=function(da,ta){return da=b.LngLatBounds.convert(da),this._cameraForBoxAndBearing(da.getNorthWest(),da.getSouthEast(),0,ta)},fa.prototype._cameraForBoxAndBearing=
function(da,ta,Ga,Za){var hb={top:0,bottom:0,right:0,left:0};if("number"==typeof(Za=b.extend({padding:hb,offset:[0,0],maxZoom:this.transform.maxZoom},Za)).padding){var ub=Za.padding;Za.padding={top:ub,bottom:ub,right:ub,left:ub}}Za.padding=b.extend(hb,Za.padding);hb=this.transform;ub=hb.padding;da=hb.project(b.LngLat.convert(da));ta=hb.project(b.LngLat.convert(ta));var Rb=da.rotate(-Ga*Math.PI/180),Yb=ta.rotate(-Ga*Math.PI/180),dc=new b.Point(Math.max(Rb.x,Yb.x),Math.max(Rb.y,Yb.y));Rb=new b.Point(Math.min(Rb.x,
Yb.x),Math.min(Rb.y,Yb.y));Rb=dc.sub(Rb);dc=(hb.width-(ub.left+ub.right+Za.padding.left+Za.padding.right))/Rb.x;ub=(hb.height-(ub.top+ub.bottom+Za.padding.top+Za.padding.bottom))/Rb.y;if(!(0>ub||0>dc))return ub=Math.min(hb.scaleZoom(hb.scale*Math.min(dc,ub)),Za.maxZoom),dc=b.Point.convert(Za.offset),Za=(new b.Point(dc.x+(Za.padding.left-Za.padding.right)/2,dc.y+(Za.padding.top-Za.padding.bottom)/2)).mult(hb.scale/hb.zoomScale(ub)),{center:hb.unproject(da.add(ta).div(2).sub(Za)),zoom:ub,bearing:Ga};
b.warnOnce("Map cannot fit within canvas with the given bounds, padding, and/or offset.")},fa.prototype.fitBounds=function(da,ta,Ga){return this._fitInternal(this.cameraForBounds(da,ta),ta,Ga)},fa.prototype.fitScreenCoordinates=function(da,ta,Ga,Za,hb){return this._fitInternal(this._cameraForBoxAndBearing(this.transform.pointLocation(b.Point.convert(da)),this.transform.pointLocation(b.Point.convert(ta)),Ga,Za),Za,hb)},fa.prototype._fitInternal=function(da,ta,Ga){return da?(delete (ta=b.extend(da,
ta)).padding,ta.linear?this.easeTo(ta,Ga):this.flyTo(ta,Ga)):this},fa.prototype.jumpTo=function(da,ta){this.stop();var Ga=this.transform,Za=!1,hb=!1,ub=!1;return"zoom"in da&&Ga.zoom!==+da.zoom&&(Za=!0,Ga.zoom=+da.zoom),void 0!==da.center&&(Ga.center=b.LngLat.convert(da.center)),"bearing"in da&&Ga.bearing!==+da.bearing&&(hb=!0,Ga.bearing=+da.bearing),"pitch"in da&&Ga.pitch!==+da.pitch&&(ub=!0,Ga.pitch=+da.pitch),null==da.padding||Ga.isPaddingEqual(da.padding)||(Ga.padding=da.padding),this.fire(new b.Event("movestart",
ta)).fire(new b.Event("move",ta)),Za&&this.fire(new b.Event("zoomstart",ta)).fire(new b.Event("zoom",ta)).fire(new b.Event("zoomend",ta)),hb&&this.fire(new b.Event("rotatestart",ta)).fire(new b.Event("rotate",ta)).fire(new b.Event("rotateend",ta)),ub&&this.fire(new b.Event("pitchstart",ta)).fire(new b.Event("pitch",ta)).fire(new b.Event("pitchend",ta)),this.fire(new b.Event("moveend",ta))},fa.prototype.easeTo=function(da,ta){var Ga=this;this._stop(!1,da.easeId);(!1===(da=b.extend({offset:[0,0],duration:500,
easing:b.ease},da)).animate||!da.essential&&b.browser.prefersReducedMotion)&&(da.duration=0);var Za=this.transform,hb=this.getZoom(),ub=this.getBearing(),Rb=this.getPitch(),Yb=this.getPadding(),dc="zoom"in da?+da.zoom:hb,Ac="bearing"in da?this._normalizeBearing(da.bearing,ub):ub,Ec="pitch"in da?+da.pitch:Rb,uc="padding"in da?da.padding:Za.padding,Xb=b.Point.convert(da.offset),fc=Za.centerPoint.add(Xb),Cc=Za.pointLocation(fc),bd=b.LngLat.convert(da.center||Cc);this._normalizeCenter(bd);var nd,Nc,vd=
Za.project(Cc),Ad=Za.project(bd).sub(vd),le=Za.zoomScale(dc-hb);da.around&&(nd=b.LngLat.convert(da.around),Nc=Za.locationPoint(nd));Cc={moving:this._moving,zooming:this._zooming,rotating:this._rotating,pitching:this._pitching};return this._zooming=this._zooming||dc!==hb,this._rotating=this._rotating||ub!==Ac,this._pitching=this._pitching||Ec!==Rb,this._padding=!Za.isPaddingEqual(uc),this._easeId=da.easeId,this._prepareEase(ta,da.noMoveStart,Cc),clearTimeout(this._easeEndTimeoutID),this._ease(function(Ud){if(Ga._zooming&&
(Za.zoom=b.number(hb,dc,Ud)),Ga._rotating&&(Za.bearing=b.number(ub,Ac,Ud)),Ga._pitching&&(Za.pitch=b.number(Rb,Ec,Ud)),Ga._padding&&(Za.interpolatePadding(Yb,uc,Ud),fc=Za.centerPoint.add(Xb)),nd)Za.setLocationAtPoint(nd,Nc);else{var Sd=Za.zoomScale(Za.zoom-hb);Ud=Za.unproject(vd.add(Ad.mult(Ud*Math.pow(dc>hb?Math.min(2,le):Math.max(.5,le),1-Ud))).mult(Sd));Za.setLocationAtPoint(Za.renderWorldCopies?Ud.wrap():Ud,fc)}Ga._fireMoveEvents(ta)},function(Ud){Ga._afterEase(ta,Ud)},da),this},fa.prototype._prepareEase=
function(da,ta,Ga){void 0===Ga&&(Ga={});this._moving=!0;ta||Ga.moving||this.fire(new b.Event("movestart",da));this._zooming&&!Ga.zooming&&this.fire(new b.Event("zoomstart",da));this._rotating&&!Ga.rotating&&this.fire(new b.Event("rotatestart",da));this._pitching&&!Ga.pitching&&this.fire(new b.Event("pitchstart",da))},fa.prototype._fireMoveEvents=function(da){this.fire(new b.Event("move",da));this._zooming&&this.fire(new b.Event("zoom",da));this._rotating&&this.fire(new b.Event("rotate",da));this._pitching&&
this.fire(new b.Event("pitch",da))},fa.prototype._afterEase=function(da,ta){if(!this._easeId||!ta||this._easeId!==ta){delete this._easeId;ta=this._zooming;var Ga=this._rotating,Za=this._pitching;this._padding=this._pitching=this._rotating=this._zooming=this._moving=!1;ta&&this.fire(new b.Event("zoomend",da));Ga&&this.fire(new b.Event("rotateend",da));Za&&this.fire(new b.Event("pitchend",da));this.fire(new b.Event("moveend",da))}},fa.prototype.flyTo=function(da,ta){function Ga(Ae){Ae=(fe*fe-Sd*Sd+
(Ae?-1:1)*Ee*Ee*ue*ue)/(2*(Ae?fe:Sd)*Ee*ue);return Math.log(Math.sqrt(Ae*Ae+1)-Ae)}function Za(Ae){return(Math.exp(Ae)+Math.exp(-Ae))/2}var hb=this;if(!da.essential&&b.browser.prefersReducedMotion)return da=b.pick(da,["center","zoom","bearing","pitch","around"]),this.jumpTo(da,ta);this.stop();da=b.extend({offset:[0,0],speed:1.2,curve:1.42,easing:b.ease},da);var ub=this.transform,Rb=this.getZoom(),Yb=this.getBearing(),dc=this.getPitch(),Ac=this.getPadding(),Ec="zoom"in da?b.clamp(+da.zoom,ub.minZoom,
ub.maxZoom):Rb,uc="bearing"in da?this._normalizeBearing(da.bearing,Yb):Yb,Xb="pitch"in da?+da.pitch:dc,fc="padding"in da?da.padding:ub.padding,Cc=ub.zoomScale(Ec-Rb),bd=b.Point.convert(da.offset),nd=ub.centerPoint.add(bd),Nc=ub.pointLocation(nd),vd=b.LngLat.convert(da.center||Nc);this._normalizeCenter(vd);var Ad=ub.project(Nc),le=ub.project(vd).sub(Ad),Ud=da.curve,Sd=Math.max(ub.width,ub.height),fe=Sd/Cc,ue=le.mag();"minZoom"in da&&(Cc=b.clamp(Math.min(da.minZoom,Rb,Ec),ub.minZoom,ub.maxZoom),Cc=
Sd/ub.zoomScale(Cc-Rb),Ud=Math.sqrt(Cc/ue*2));var Ee=Ud*Ud,Re=Ga(0),lf=function(Ae){return Za(Re)/Za(Re+Ud*Ae)},he=function(Ae){var $e=Za(Re);Ae=vf=Re+Ud*Ae;return Sd*(($e*((Math.exp(Ae)-Math.exp(-Ae))/2/Za(vf))-(Math.exp(Re)-Math.exp(-Re))/2)/Ee)/ue;var vf},ef=(Ga(1)-Re)/Ud;if(1E-6>Math.abs(ue)||!isFinite(ef)){if(1E-6>Math.abs(Sd-fe))return this.easeTo(da,ta);var mf=fe<Sd?-1:1;ef=Math.abs(Math.log(fe/Sd))/Ud;he=function(){return 0};lf=function(Ae){return Math.exp(mf*Ud*Ae)}}return da.duration="duration"in
da?+da.duration:1E3*ef/("screenSpeed"in da?+da.screenSpeed/Ud:+da.speed),da.maxDuration&&da.duration>da.maxDuration&&(da.duration=0),this._zooming=!0,this._rotating=Yb!==uc,this._pitching=Xb!==dc,this._padding=!ub.isPaddingEqual(fc),this._prepareEase(ta,!1),this._ease(function(Ae){var $e=Ae*ef,vf=1/lf($e);ub.zoom=1===Ae?Ec:Rb+ub.scaleZoom(vf);hb._rotating&&(ub.bearing=b.number(Yb,uc,Ae));hb._pitching&&(ub.pitch=b.number(dc,Xb,Ae));hb._padding&&(ub.interpolatePadding(Ac,fc,Ae),nd=ub.centerPoint.add(bd));
Ae=1===Ae?vd:ub.unproject(Ad.add(le.mult(he($e))).mult(vf));ub.setLocationAtPoint(ub.renderWorldCopies?Ae.wrap():Ae,nd);hb._fireMoveEvents(ta)},function(){return hb._afterEase(ta)},da),this},fa.prototype.isEasing=function(){return!!this._easeFrameId},fa.prototype.stop=function(){return this._stop()},fa.prototype._stop=function(da,ta){if(this._easeFrameId&&(this._cancelRenderFrame(this._easeFrameId),delete this._easeFrameId,delete this._onEaseFrame),this._onEaseEnd){var Ga=this._onEaseEnd;delete this._onEaseEnd;
Ga.call(this,ta)}da||(da=this.handlers)&&da.stop();return this},fa.prototype._ease=function(da,ta,Ga){!1===Ga.animate||0===Ga.duration?(da(1),ta()):(this._easeStart=b.browser.now(),this._easeOptions=Ga,this._onEaseFrame=da,this._onEaseEnd=ta,this._easeFrameId=this._requestRenderFrame(this._renderFrameCallback))},fa.prototype._renderFrameCallback=function(){var da=Math.min((b.browser.now()-this._easeStart)/this._easeOptions.duration,1);this._onEaseFrame(this._easeOptions.easing(da));1>da?this._easeFrameId=
this._requestRenderFrame(this._renderFrameCallback):this.stop()},fa.prototype._normalizeBearing=function(da,ta){da=b.wrap(da,-180,180);var Ga=Math.abs(da-ta);return Math.abs(da-360-ta)<Ga&&(da-=360),Math.abs(da+360-ta)<Ga&&(da+=360),da},fa.prototype._normalizeCenter=function(da){var ta=this.transform;ta.renderWorldCopies&&!ta.lngRange&&(ta=da.lng-ta.center.lng,da.lng+=180<ta?-360:-180>ta?360:0)},fa}(b.Evented),of=function(Z){void 0===Z&&(Z={});this.options=Z;b.bindAll(["_updateEditLink","_updateData",
"_updateCompact"],this)};of.prototype.getDefaultPosition=function(){return"bottom-right"};of.prototype.onAdd=function(Z){var fa=this.options&&this.options.compact;return this._map=Z,this._container=$a.create("div","mapboxgl-ctrl mapboxgl-ctrl-attrib"),this._innerContainer=$a.create("div","mapboxgl-ctrl-attrib-inner",this._container),fa&&this._container.classList.add("mapboxgl-compact"),this._updateAttributions(),this._updateEditLink(),this._map.on("styledata",this._updateData),this._map.on("sourcedata",
this._updateData),this._map.on("moveend",this._updateEditLink),void 0===fa&&(this._map.on("resize",this._updateCompact),this._updateCompact()),this._container};of.prototype.onRemove=function(){$a.remove(this._container);this._map.off("styledata",this._updateData);this._map.off("sourcedata",this._updateData);this._map.off("moveend",this._updateEditLink);this._map.off("resize",this._updateCompact);this._attribHTML=this._map=void 0};of.prototype._updateEditLink=function(){var Z=this._editLink;Z||(Z=
this._editLink=this._container.querySelector(".mapbox-improve-map"));var fa=[{key:"owner",value:this.styleOwner},{key:"id",value:this.styleId},{key:"access_token",value:this._map._requestManager._customAccessToken||b.config.ACCESS_TOKEN}];if(Z){var da=fa.reduce(function(ta,Ga,Za){return Ga.value&&(ta+=Ga.key+"\x3d"+Ga.value+(Za<fa.length-1?"\x26":"")),ta},"?");Z.href=b.config.FEEDBACK_URL+"/"+da+(this._map._hash?this._map._hash.getHashString(!0):"");Z.rel="noopener nofollow"}};of.prototype._updateData=
function(Z){!Z||"metadata"!==Z.sourceDataType&&"style"!==Z.dataType||(this._updateAttributions(),this._updateEditLink())};of.prototype._updateAttributions=function(){if(this._map.style){var Z=[];if(this.options.customAttribution&&(Array.isArray(this.options.customAttribution)?Z=Z.concat(this.options.customAttribution.map(function(Ga){return"string"!=typeof Ga?"":Ga})):"string"==typeof this.options.customAttribution&&Z.push(this.options.customAttribution)),this._map.style.stylesheet){var fa=this._map.style.stylesheet;
this.styleOwner=fa.owner;this.styleId=fa.id}fa=this._map.style.sourceCaches;for(var da in fa){var ta=fa[da];ta.used&&(ta=ta.getSource(),ta.attribution&&0>Z.indexOf(ta.attribution)&&Z.push(ta.attribution))}Z.sort(function(Ga,Za){return Ga.length-Za.length});da=(Z=Z.filter(function(Ga,Za){for(Za+=1;Za<Z.length;Za++)if(0<=Z[Za].indexOf(Ga))return!1;return!0})).join(" | ");da!==this._attribHTML&&(this._attribHTML=da,Z.length?(this._innerContainer.innerHTML=da,this._container.classList.remove("mapboxgl-attrib-empty")):
this._container.classList.add("mapboxgl-attrib-empty"),this._editLink=null)}};of.prototype._updateCompact=function(){640>=this._map.getCanvasContainer().offsetWidth?this._container.classList.add("mapboxgl-compact"):this._container.classList.remove("mapboxgl-compact")};var qf=function(){b.bindAll(["_updateLogo"],this);b.bindAll(["_updateCompact"],this)};qf.prototype.onAdd=function(Z){this._map=Z;this._container=$a.create("div","mapboxgl-ctrl");Z=$a.create("a","mapboxgl-ctrl-logo");return Z.target=
"_blank",Z.rel="noopener nofollow",Z.href="https://www.mapbox.com/",Z.setAttribute("aria-label",this._map._getUIString("LogoControl.Title")),Z.setAttribute("rel","noopener nofollow"),this._container.appendChild(Z),this._container.style.display="none",this._map.on("sourcedata",this._updateLogo),this._updateLogo(),this._map.on("resize",this._updateCompact),this._updateCompact(),this._container};qf.prototype.onRemove=function(){$a.remove(this._container);this._map.off("sourcedata",this._updateLogo);
this._map.off("resize",this._updateCompact)};qf.prototype.getDefaultPosition=function(){return"bottom-left"};qf.prototype._updateLogo=function(Z){Z&&"metadata"!==Z.sourceDataType||(this._container.style.display=this._logoRequired()?"block":"none")};qf.prototype._logoRequired=function(){if(this._map.style){var Z=this._map.style.sourceCaches,fa;for(fa in Z)if(Z[fa].getSource().mapbox_logo)return!0;return!1}};qf.prototype._updateCompact=function(){var Z=this._container.children;Z.length&&(Z=Z[0],250>
this._map.getCanvasContainer().offsetWidth?Z.classList.add("mapboxgl-compact"):Z.classList.remove("mapboxgl-compact"))};var We=function(){this._queue=[];this._id=0;this._currentlyRunning=this._cleared=!1};We.prototype.add=function(Z){var fa=++this._id;return this._queue.push({callback:Z,id:fa,cancelled:!1}),fa};We.prototype.remove=function(Z){var fa=this._currentlyRunning,da=0;for(fa=fa?this._queue.concat(fa):this._queue;da<fa.length;da+=1){var ta=fa[da];if(ta.id===Z)return void(ta.cancelled=!0)}};
We.prototype.run=function(Z){void 0===Z&&(Z=0);var fa=this._currentlyRunning=this._queue;this._queue=[];for(var da=0;da<fa.length;da+=1){var ta=fa[da];if(!ta.cancelled&&(ta.callback(Z),this._cleared))break}this._currentlyRunning=this._cleared=!1};We.prototype.clear=function(){this._currentlyRunning&&(this._cleared=!0);this._queue=[]};var af={"FullscreenControl.Enter":"Enter fullscreen","FullscreenControl.Exit":"Exit fullscreen","GeolocateControl.FindMyLocation":"Find my location","GeolocateControl.LocationNotAvailable":"Location not available",
"LogoControl.Title":"Mapbox logo","NavigationControl.ResetBearing":"Reset bearing to north","NavigationControl.ZoomIn":"Zoom in","NavigationControl.ZoomOut":"Zoom out","ScaleControl.Feet":"ft","ScaleControl.Meters":"m","ScaleControl.Kilometers":"km","ScaleControl.Miles":"mi","ScaleControl.NauticalMiles":"nm"},Gf=b.window.HTMLImageElement,mg=b.window.HTMLElement,If=b.window.ImageBitmap,cj={center:[0,0],zoom:0,bearing:0,pitch:0,minZoom:-2,maxZoom:22,minPitch:0,maxPitch:60,interactive:!0,scrollZoom:!0,
boxZoom:!0,dragRotate:!0,dragPan:!0,keyboard:!0,doubleClickZoom:!0,touchZoomRotate:!0,touchPitch:!0,bearingSnap:7,clickTolerance:3,pitchWithRotate:!0,hash:!1,attributionControl:!0,failIfMajorPerformanceCaveat:!1,preserveDrawingBuffer:!1,trackResize:!0,renderWorldCopies:!0,refreshExpiredTiles:!0,maxTileCacheSize:null,localIdeographFontFamily:"sans-serif",transformRequest:null,accessToken:null,fadeDuration:300,crossSourceCollisions:!0},ee=function(Z){function fa(ta){var Ga=this;if(null!=(ta=b.extend({},
cj,ta)).minZoom&&null!=ta.maxZoom&&ta.minZoom>ta.maxZoom)throw Error("maxZoom must be greater than or equal to minZoom");if(null!=ta.minPitch&&null!=ta.maxPitch&&ta.minPitch>ta.maxPitch)throw Error("maxPitch must be greater than or equal to minPitch");if(null!=ta.minPitch&&0>ta.minPitch)throw Error("minPitch must be greater than or equal to 0");if(null!=ta.maxPitch&&60<ta.maxPitch)throw Error("maxPitch must be less than or equal to 60");var Za=new tf(ta.minZoom,ta.maxZoom,ta.minPitch,ta.maxPitch,
ta.renderWorldCopies);if(Z.call(this,Za,ta),this._interactive=ta.interactive,this._maxTileCacheSize=ta.maxTileCacheSize,this._failIfMajorPerformanceCaveat=ta.failIfMajorPerformanceCaveat,this._preserveDrawingBuffer=ta.preserveDrawingBuffer,this._antialias=ta.antialias,this._trackResize=ta.trackResize,this._bearingSnap=ta.bearingSnap,this._refreshExpiredTiles=ta.refreshExpiredTiles,this._fadeDuration=ta.fadeDuration,this._crossSourceCollisions=ta.crossSourceCollisions,this._crossFadingFactor=1,this._collectResourceTiming=
ta.collectResourceTiming,this._renderTaskQueue=new We,this._controls=[],this._mapId=b.uniqueId(),this._locale=b.extend({},af,ta.locale),this._requestManager=new b.RequestManager(ta.transformRequest,ta.accessToken),"string"==typeof ta.container){if(this._container=b.window.document.getElementById(ta.container),!this._container)throw Error("Container '"+ta.container+"' not found.");}else{if(!(ta.container instanceof mg))throw Error("Invalid type: 'container' must be a String or HTMLElement.");this._container=
ta.container}if(ta.maxBounds&&this.setMaxBounds(ta.maxBounds),b.bindAll(["_onWindowOnline","_onWindowResize","_contextLost","_contextRestored"],this),this._setupContainer(),this._setupPainter(),void 0===this.painter)throw Error("Failed to initialize WebGL.");this.on("move",function(){return Ga._update(!1)});this.on("moveend",function(){return Ga._update(!1)});this.on("zoom",function(){return Ga._update(!0)});void 0!==b.window&&(b.window.addEventListener("online",this._onWindowOnline,!1),b.window.addEventListener("resize",
this._onWindowResize,!1));this.handlers=new Zd(this,ta);(this._hash=ta.hash&&(new gg("string"==typeof ta.hash&&ta.hash||void 0)).addTo(this))&&this._hash._onHashChange()||(this.jumpTo({center:ta.center,zoom:ta.zoom,bearing:ta.bearing,pitch:ta.pitch}),ta.bounds&&(this.resize(),this.fitBounds(ta.bounds,b.extend({},ta.fitBoundsOptions,{duration:0}))));this.resize();this._localIdeographFontFamily=ta.localIdeographFontFamily;ta.style&&this.setStyle(ta.style,{localIdeographFontFamily:ta.localIdeographFontFamily});
ta.attributionControl&&this.addControl(new of({customAttribution:ta.customAttribution}));this.addControl(new qf,ta.logoPosition);this.on("style.load",function(){Ga.transform.unmodified&&Ga.jumpTo(Ga.style.stylesheet)});this.on("data",function(hb){Ga._update("style"===hb.dataType);Ga.fire(new b.Event(hb.dataType+"data",hb))});this.on("dataloading",function(hb){Ga.fire(new b.Event(hb.dataType+"dataloading",hb))})}Z&&(fa.__proto__=Z);(fa.prototype=Object.create(Z&&Z.prototype)).constructor=fa;var da=
{showTileBoundaries:{configurable:!0},showPadding:{configurable:!0},showCollisionBoxes:{configurable:!0},showOverdrawInspector:{configurable:!0},repaint:{configurable:!0},vertices:{configurable:!0},version:{configurable:!0}};return fa.prototype._getMapId=function(){return this._mapId},fa.prototype.addControl=function(ta,Ga){if(void 0===Ga&&ta.getDefaultPosition&&(Ga=ta.getDefaultPosition()),void 0===Ga&&(Ga="top-right"),!ta||!ta.onAdd)return this.fire(new b.ErrorEvent(Error("Invalid argument to map.addControl(). Argument must be a control with onAdd and onRemove methods.")));
var Za=ta.onAdd(this);this._controls.push(ta);ta=this._controlPositions[Ga];return-1!==Ga.indexOf("bottom")?ta.insertBefore(Za,ta.firstChild):ta.appendChild(Za),this},fa.prototype.removeControl=function(ta){if(!ta||!ta.onRemove)return this.fire(new b.ErrorEvent(Error("Invalid argument to map.removeControl(). Argument must be a control with onAdd and onRemove methods.")));var Ga=this._controls.indexOf(ta);return-1<Ga&&this._controls.splice(Ga,1),ta.onRemove(this),this},fa.prototype.resize=function(ta){var Ga=
this._containerDimensions(),Za=Ga[0];Ga=Ga[1];this._resizeCanvas(Za,Ga);this.transform.resize(Za,Ga);this.painter.resize(Za,Ga);Za=!this._moving;return Za&&(this.stop(),this.fire(new b.Event("movestart",ta)).fire(new b.Event("move",ta))),this.fire(new b.Event("resize",ta)),Za&&this.fire(new b.Event("moveend",ta)),this},fa.prototype.getBounds=function(){return this.transform.getBounds()},fa.prototype.getMaxBounds=function(){return this.transform.getMaxBounds()},fa.prototype.setMaxBounds=function(ta){return this.transform.setMaxBounds(b.LngLatBounds.convert(ta)),
this._update()},fa.prototype.setMinZoom=function(ta){if(-2<=(ta=null==ta?-2:ta)&&ta<=this.transform.maxZoom)return this.transform.minZoom=ta,this._update(),this.getZoom()<ta&&this.setZoom(ta),this;throw Error("minZoom must be between -2 and the current maxZoom, inclusive");},fa.prototype.getMinZoom=function(){return this.transform.minZoom},fa.prototype.setMaxZoom=function(ta){if((ta=null==ta?22:ta)>=this.transform.minZoom)return this.transform.maxZoom=ta,this._update(),this.getZoom()>ta&&this.setZoom(ta),
this;throw Error("maxZoom must be greater than the current minZoom");},fa.prototype.getMaxZoom=function(){return this.transform.maxZoom},fa.prototype.setMinPitch=function(ta){if(0>(ta=null==ta?0:ta))throw Error("minPitch must be greater than or equal to 0");if(0<=ta&&ta<=this.transform.maxPitch)return this.transform.minPitch=ta,this._update(),this.getPitch()<ta&&this.setPitch(ta),this;throw Error("minPitch must be between 0 and the current maxPitch, inclusive");},fa.prototype.getMinPitch=function(){return this.transform.minPitch},
fa.prototype.setMaxPitch=function(ta){if(60<(ta=null==ta?60:ta))throw Error("maxPitch must be less than or equal to 60");if(ta>=this.transform.minPitch)return this.transform.maxPitch=ta,this._update(),this.getPitch()>ta&&this.setPitch(ta),this;throw Error("maxPitch must be greater than the current minPitch");},fa.prototype.getMaxPitch=function(){return this.transform.maxPitch},fa.prototype.getRenderWorldCopies=function(){return this.transform.renderWorldCopies},fa.prototype.setRenderWorldCopies=function(ta){return this.transform.renderWorldCopies=
ta,this._update()},fa.prototype.project=function(ta){return this.transform.locationPoint(b.LngLat.convert(ta))},fa.prototype.unproject=function(ta){return this.transform.pointLocation(b.Point.convert(ta))},fa.prototype.isMoving=function(){return this._moving||this.handlers.isMoving()},fa.prototype.isZooming=function(){return this._zooming||this.handlers.isZooming()},fa.prototype.isRotating=function(){return this._rotating||this.handlers.isRotating()},fa.prototype._createDelegatedListener=function(ta,
Ga,Za){var hb,ub=this;if("mouseenter"===ta||"mouseover"===ta){var Rb=!1;return{layer:Ga,listener:Za,delegates:{mousemove:function(dc){var Ac=ub.getLayer(Ga)?ub.queryRenderedFeatures(dc.point,{layers:[Ga]}):[];Ac.length?Rb||(Rb=!0,Za.call(ub,new wg(ta,ub,dc.originalEvent,{features:Ac}))):Rb=!1},mouseout:function(){Rb=!1}}}}if("mouseleave"===ta||"mouseout"===ta){var Yb=!1;return{layer:Ga,listener:Za,delegates:{mousemove:function(dc){(ub.getLayer(Ga)?ub.queryRenderedFeatures(dc.point,{layers:[Ga]}):
[]).length?Yb=!0:Yb&&(Yb=!1,Za.call(ub,new wg(ta,ub,dc.originalEvent)))},mouseout:function(dc){Yb&&(Yb=!1,Za.call(ub,new wg(ta,ub,dc.originalEvent)))}}}}return{layer:Ga,listener:Za,delegates:(hb={},hb[ta]=function(dc){var Ac=ub.getLayer(Ga)?ub.queryRenderedFeatures(dc.point,{layers:[Ga]}):[];Ac.length&&(dc.features=Ac,Za.call(ub,dc),delete dc.features)},hb)}},fa.prototype.on=function(ta,Ga,Za){if(void 0===Za)return Z.prototype.on.call(this,ta,Ga);Ga=this._createDelegatedListener(ta,Ga,Za);for(var hb in this._delegatedListeners=
this._delegatedListeners||{},this._delegatedListeners[ta]=this._delegatedListeners[ta]||[],this._delegatedListeners[ta].push(Ga),Ga.delegates)this.on(hb,Ga.delegates[hb]);return this},fa.prototype.once=function(ta,Ga,Za){if(void 0===Za)return Z.prototype.once.call(this,ta,Ga);ta=this._createDelegatedListener(ta,Ga,Za);for(var hb in ta.delegates)this.once(hb,ta.delegates[hb]);return this},fa.prototype.off=function(ta,Ga,Za){if(void 0===Za)Ga=Z.prototype.off.call(this,ta,Ga);else{if(this._delegatedListeners&&
this._delegatedListeners[ta])a:{ta=this._delegatedListeners[ta];for(var hb=0;hb<ta.length;hb++){var ub=ta[hb];if(ub.layer===Ga&&ub.listener===Za){for(var Rb in ub.delegates)this.off(Rb,ub.delegates[Rb]);ta.splice(hb,1);break a}}}Ga=this}return Ga},fa.prototype.queryRenderedFeatures=function(ta,Ga){if(!this.style)return[];if(void 0!==Ga||void 0===ta||ta instanceof b.Point||Array.isArray(ta)||(Ga=ta,ta=void 0),Ga=Ga||{},(ta=ta||[[0,0],[this.transform.width,this.transform.height]])instanceof b.Point||
"number"==typeof ta[0])var Za=[b.Point.convert(ta)];else Za=b.Point.convert(ta[0]),ta=b.Point.convert(ta[1]),Za=[Za,new b.Point(ta.x,Za.y),ta,new b.Point(Za.x,ta.y),Za];return this.style.queryRenderedFeatures(Za,Ga,this.transform)},fa.prototype.querySourceFeatures=function(ta,Ga){return this.style.querySourceFeatures(ta,Ga)},fa.prototype.setStyle=function(ta,Ga){return!1!==(Ga=b.extend({},{localIdeographFontFamily:this._localIdeographFontFamily},Ga)).diff&&Ga.localIdeographFontFamily===this._localIdeographFontFamily&&
this.style&&ta?(this._diffStyle(ta,Ga),this):(this._localIdeographFontFamily=Ga.localIdeographFontFamily,this._updateStyle(ta,Ga))},fa.prototype._getUIString=function(ta){var Ga=this._locale[ta];if(null==Ga)throw Error("Missing UI string '"+ta+"'");return Ga},fa.prototype._updateStyle=function(ta,Ga){return this.style&&(this.style.setEventedParent(null),this.style._remove()),ta?(this.style=new Gd(this,Ga||{}),this.style.setEventedParent(this,{style:this.style}),"string"==typeof ta?this.style.loadURL(ta):
this.style.loadJSON(ta),this):(delete this.style,this)},fa.prototype._lazyInitEmptyStyle=function(){this.style||(this.style=new Gd(this,{}),this.style.setEventedParent(this,{style:this.style}),this.style.loadEmpty())},fa.prototype._diffStyle=function(ta,Ga){var Za=this;"string"==typeof ta?(ta=this._requestManager.normalizeStyleURL(ta),ta=this._requestManager.transformRequest(ta,b.ResourceType.Style),b.getJSON(ta,function(hb,ub){hb?Za.fire(new b.ErrorEvent(hb)):ub&&Za._updateDiff(ub,Ga)})):"object"==
typeof ta&&this._updateDiff(ta,Ga)},fa.prototype._updateDiff=function(ta,Ga){try{this.style.setState(ta)&&this._update(!0)}catch(Za){b.warnOnce("Unable to perform style diff: "+(Za.message||Za.error||Za)+".  Rebuilding the style from scratch."),this._updateStyle(ta,Ga)}},fa.prototype.getStyle=function(){if(this.style)return this.style.serialize()},fa.prototype.isStyleLoaded=function(){return this.style?this.style.loaded():b.warnOnce("There is no style added to the map.")},fa.prototype.addSource=function(ta,
Ga){return this._lazyInitEmptyStyle(),this.style.addSource(ta,Ga),this._update(!0)},fa.prototype.isSourceLoaded=function(ta){var Ga=this.style&&this.style.sourceCaches[ta];if(void 0!==Ga)return Ga.loaded();this.fire(new b.ErrorEvent(Error("There is no source with ID '"+ta+"'")))},fa.prototype.areTilesLoaded=function(){var ta=this.style&&this.style.sourceCaches,Ga;for(Ga in ta){var Za=ta[Ga]._tiles,hb;for(hb in Za){var ub=Za[hb];if("loaded"!==ub.state&&"errored"!==ub.state)return!1}}return!0},fa.prototype.addSourceType=
function(ta,Ga,Za){return this._lazyInitEmptyStyle(),this.style.addSourceType(ta,Ga,Za)},fa.prototype.removeSource=function(ta){return this.style.removeSource(ta),this._update(!0)},fa.prototype.getSource=function(ta){return this.style.getSource(ta)},fa.prototype.addImage=function(ta,Ga,Za){void 0===Za&&(Za={});var hb=Za.pixelRatio;void 0===hb&&(hb=1);var ub=Za.sdf;void 0===ub&&(ub=!1);var Rb=Za.stretchX,Yb=Za.stretchY;Za=Za.content;if(this._lazyInitEmptyStyle(),Ga instanceof Gf||If&&Ga instanceof
If)Ga=b.browser.getImageData(Ga),this.style.addImage(ta,{data:new b.RGBAImage({width:Ga.width,height:Ga.height},Ga.data),pixelRatio:hb,stretchX:Rb,stretchY:Yb,content:Za,sdf:ub,version:0});else{if(void 0===Ga.width||void 0===Ga.height)return this.fire(new b.ErrorEvent(Error("Invalid arguments to map.addImage(). The second argument must be an `HTMLImageElement`, `ImageData`, `ImageBitmap`, or object with `width`, `height`, and `data` properties with the same format as `ImageData`")));this.style.addImage(ta,
{data:new b.RGBAImage({width:Ga.width,height:Ga.height},new Uint8Array(Ga.data)),pixelRatio:hb,stretchX:Rb,stretchY:Yb,content:Za,sdf:ub,version:0,userImage:Ga});Ga.onAdd&&Ga.onAdd(this,ta)}},fa.prototype.updateImage=function(ta,Ga){var Za=this.style.getImage(ta);if(!Za)return this.fire(new b.ErrorEvent(Error("The map has no image with that id. If you are adding a new image use `map.addImage(...)` instead.")));var hb=Ga instanceof Gf||If&&Ga instanceof If?b.browser.getImageData(Ga):Ga,ub=hb.width,
Rb=hb.height;hb=hb.data;return void 0===ub||void 0===Rb?this.fire(new b.ErrorEvent(Error("Invalid arguments to map.updateImage(). The second argument must be an `HTMLImageElement`, `ImageData`, `ImageBitmap`, or object with `width`, `height`, and `data` properties with the same format as `ImageData`"))):ub!==Za.data.width||Rb!==Za.data.height?this.fire(new b.ErrorEvent(Error("The width and height of the updated image must be that same as the previous version of the image"))):(Za.data.replace(hb,!(Ga instanceof
Gf||If&&Ga instanceof If)),void this.style.updateImage(ta,Za))},fa.prototype.hasImage=function(ta){return ta?!!this.style.getImage(ta):(this.fire(new b.ErrorEvent(Error("Missing required image id"))),!1)},fa.prototype.removeImage=function(ta){this.style.removeImage(ta)},fa.prototype.loadImage=function(ta,Ga){b.getImage(this._requestManager.transformRequest(ta,b.ResourceType.Image),Ga)},fa.prototype.listImages=function(){return this.style.listImages()},fa.prototype.addLayer=function(ta,Ga){return this._lazyInitEmptyStyle(),
this.style.addLayer(ta,Ga),this._update(!0)},fa.prototype.moveLayer=function(ta,Ga){return this.style.moveLayer(ta,Ga),this._update(!0)},fa.prototype.removeLayer=function(ta){return this.style.removeLayer(ta),this._update(!0)},fa.prototype.getLayer=function(ta){return this.style.getLayer(ta)},fa.prototype.setLayerZoomRange=function(ta,Ga,Za){return this.style.setLayerZoomRange(ta,Ga,Za),this._update(!0)},fa.prototype.setFilter=function(ta,Ga,Za){return void 0===Za&&(Za={}),this.style.setFilter(ta,
Ga,Za),this._update(!0)},fa.prototype.getFilter=function(ta){return this.style.getFilter(ta)},fa.prototype.setPaintProperty=function(ta,Ga,Za,hb){return void 0===hb&&(hb={}),this.style.setPaintProperty(ta,Ga,Za,hb),this._update(!0)},fa.prototype.getPaintProperty=function(ta,Ga){return this.style.getPaintProperty(ta,Ga)},fa.prototype.setLayoutProperty=function(ta,Ga,Za,hb){return void 0===hb&&(hb={}),this.style.setLayoutProperty(ta,Ga,Za,hb),this._update(!0)},fa.prototype.getLayoutProperty=function(ta,
Ga){return this.style.getLayoutProperty(ta,Ga)},fa.prototype.setLight=function(ta,Ga){return void 0===Ga&&(Ga={}),this._lazyInitEmptyStyle(),this.style.setLight(ta,Ga),this._update(!0)},fa.prototype.getLight=function(){return this.style.getLight()},fa.prototype.setFeatureState=function(ta,Ga){return this.style.setFeatureState(ta,Ga),this._update()},fa.prototype.removeFeatureState=function(ta,Ga){return this.style.removeFeatureState(ta,Ga),this._update()},fa.prototype.getFeatureState=function(ta){return this.style.getFeatureState(ta)},
fa.prototype.getContainer=function(){return this._container},fa.prototype.getCanvasContainer=function(){return this._canvasContainer},fa.prototype.getCanvas=function(){return this._canvas},fa.prototype._containerDimensions=function(){var ta=0,Ga=0;return this._container&&(ta=this._container.clientWidth||400,Ga=this._container.clientHeight||300),[ta,Ga]},fa.prototype._detectMissingCSS=function(){"rgb(250, 128, 114)"!==b.window.getComputedStyle(this._missingCSSCanary).getPropertyValue("background-color")&&
b.warnOnce("This page appears to be missing CSS declarations for Mapbox GL JS, which may cause the map to display incorrectly. Please ensure your page includes mapbox-gl.css, as described in https://www.mapbox.com/mapbox-gl-js/api/.")},fa.prototype._setupContainer=function(){var ta=this._container;ta.classList.add("mapboxgl-map");(this._missingCSSCanary=$a.create("div","mapboxgl-canary",ta)).style.visibility="hidden";this._detectMissingCSS();var Ga=this._canvasContainer=$a.create("div","mapboxgl-canvas-container",
ta);this._interactive&&Ga.classList.add("mapboxgl-interactive");this._canvas=$a.create("canvas","mapboxgl-canvas",Ga);this._canvas.addEventListener("webglcontextlost",this._contextLost,!1);this._canvas.addEventListener("webglcontextrestored",this._contextRestored,!1);this._canvas.setAttribute("tabindex","0");this._canvas.setAttribute("aria-label","Map");Ga=this._containerDimensions();this._resizeCanvas(Ga[0],Ga[1]);var Za=this._controlContainer=$a.create("div","mapboxgl-control-container",ta),hb=
this._controlPositions={};["top-left","top-right","bottom-left","bottom-right"].forEach(function(ub){hb[ub]=$a.create("div","mapboxgl-ctrl-"+ub,Za)})},fa.prototype._resizeCanvas=function(ta,Ga){var Za=b.browser.devicePixelRatio||1;this._canvas.width=Za*ta;this._canvas.height=Za*Ga;this._canvas.style.width=ta+"px";this._canvas.style.height=Ga+"px"},fa.prototype._setupPainter=function(){var ta=b.extend({},Na.webGLContextAttributes,{failIfMajorPerformanceCaveat:this._failIfMajorPerformanceCaveat,preserveDrawingBuffer:this._preserveDrawingBuffer,
antialias:this._antialias||!1});(ta=this._canvas.getContext("webgl",ta)||this._canvas.getContext("experimental-webgl",ta))?(this.painter=new zf(ta,this.transform),b.webpSupported.testSupport(ta)):this.fire(new b.ErrorEvent(Error("Failed to initialize WebGL")))},fa.prototype._contextLost=function(ta){ta.preventDefault();this._frame&&(this._frame.cancel(),this._frame=null);this.fire(new b.Event("webglcontextlost",{originalEvent:ta}))},fa.prototype._contextRestored=function(ta){this._setupPainter();
this.resize();this._update();this.fire(new b.Event("webglcontextrestored",{originalEvent:ta}))},fa.prototype.loaded=function(){return!this._styleDirty&&!this._sourcesDirty&&!!this.style&&this.style.loaded()},fa.prototype._update=function(ta){return this.style?(this._styleDirty=this._styleDirty||ta,this._sourcesDirty=!0,this.triggerRepaint(),this):this},fa.prototype._requestRenderFrame=function(ta){return this._update(),this._renderTaskQueue.add(ta)},fa.prototype._cancelRenderFrame=function(ta){this._renderTaskQueue.remove(ta)},
fa.prototype._render=function(ta){var Ga,Za=this,hb=0,ub=this.painter.context.extTimerQuery;if(this.listens("gpu-timing-frame")&&(Ga=ub.createQueryEXT(),ub.beginQueryEXT(ub.TIME_ELAPSED_EXT,Ga),hb=b.browser.now()),this.painter.context.setDirty(),this.painter.setBaseState(),this._renderTaskQueue.run(ta),!this._removed){ta=!1;if(this.style&&this._styleDirty){this._styleDirty=!1;var Rb=this.transform.zoom,Yb=b.browser.now();this.style.zoomHistory.update(Rb,Yb);Rb=new b.EvaluationParameters(Rb,{now:Yb,
fadeDuration:this._fadeDuration,zoomHistory:this.style.zoomHistory,transition:this.style.getTransition()});Yb=Rb.crossFadingFactor();1===Yb&&Yb===this._crossFadingFactor||(ta=!0,this._crossFadingFactor=Yb);this.style.update(Rb)}if(this.style&&this._sourcesDirty&&(this._sourcesDirty=!1,this.style._updateSources(this.transform)),this._placementDirty=this.style&&this.style._updatePlacement(this.painter.transform,this.showCollisionBoxes,this._fadeDuration,this._crossSourceCollisions),this.painter.render(this.style,
{showTileBoundaries:this.showTileBoundaries,showOverdrawInspector:this._showOverdrawInspector,rotating:this.isRotating(),zooming:this.isZooming(),moving:this.isMoving(),fadeDuration:this._fadeDuration,showPadding:this.showPadding,gpuTiming:!!this.listens("gpu-timing-layer")}),this.fire(new b.Event("render")),this.loaded()&&!this._loaded&&(this._loaded=!0,this.fire(new b.Event("load"))),this.style&&(this.style.hasTransitions()||ta)&&(this._styleDirty=!0),this.style&&!this._placementDirty&&this.style._releaseSymbolFadeTiles(),
this.listens("gpu-timing-frame")){var dc=b.browser.now()-hb;ub.endQueryEXT(ub.TIME_ELAPSED_EXT,Ga);setTimeout(function(){var Ec=ub.getQueryObjectEXT(Ga,ub.QUERY_RESULT_EXT)/1E6;ub.deleteQueryEXT(Ga);Za.fire(new b.Event("gpu-timing-frame",{cpuTime:dc,gpuTime:Ec}))},50)}if(this.listens("gpu-timing-layer")){var Ac=this.painter.collectGpuTimers();setTimeout(function(){var Ec=Za.painter.queryGpuTimers(Ac);Za.fire(new b.Event("gpu-timing-layer",{layerTimes:Ec}))},50)}return this._sourcesDirty||this._styleDirty||
this._placementDirty||this._repaint?this.triggerRepaint():!this.isMoving()&&this.loaded()&&(this._fullyLoaded||(this._fullyLoaded=!0),this.fire(new b.Event("idle"))),this}},fa.prototype.remove=function(){this._hash&&this._hash.remove();for(var ta=0,Ga=this._controls;ta<Ga.length;ta+=1)Ga[ta].onRemove(this);this._controls=[];this._frame&&(this._frame.cancel(),this._frame=null);this._renderTaskQueue.clear();this.painter.destroy();this.handlers.destroy();delete this.handlers;this.setStyle(null);void 0!==
b.window&&(b.window.removeEventListener("resize",this._onWindowResize,!1),b.window.removeEventListener("online",this._onWindowOnline,!1));(ta=this.painter.context.gl.getExtension("WEBGL_lose_context"))&&ta.loseContext();Ma(this._canvasContainer);Ma(this._controlContainer);Ma(this._missingCSSCanary);this._container.classList.remove("mapboxgl-map");this._removed=!0;this.fire(new b.Event("remove"))},fa.prototype.triggerRepaint=function(){var ta=this;this.style&&!this._frame&&(this._frame=b.browser.frame(function(Ga){ta._frame=
null;ta._render(Ga)}))},fa.prototype._onWindowOnline=function(){this._update()},fa.prototype._onWindowResize=function(ta){this._trackResize&&this.resize({originalEvent:ta})._update()},da.showTileBoundaries.get=function(){return!!this._showTileBoundaries},da.showTileBoundaries.set=function(ta){this._showTileBoundaries!==ta&&(this._showTileBoundaries=ta,this._update())},da.showPadding.get=function(){return!!this._showPadding},da.showPadding.set=function(ta){this._showPadding!==ta&&(this._showPadding=
ta,this._update())},da.showCollisionBoxes.get=function(){return!!this._showCollisionBoxes},da.showCollisionBoxes.set=function(ta){this._showCollisionBoxes!==ta&&(this._showCollisionBoxes=ta,ta?this.style._generateCollisionBoxes():this._update())},da.showOverdrawInspector.get=function(){return!!this._showOverdrawInspector},da.showOverdrawInspector.set=function(ta){this._showOverdrawInspector!==ta&&(this._showOverdrawInspector=ta,this._update())},da.repaint.get=function(){return!!this._repaint},da.repaint.set=
function(ta){this._repaint!==ta&&(this._repaint=ta,this.triggerRepaint())},da.vertices.get=function(){return!!this._vertices},da.vertices.set=function(ta){this._vertices=ta;this._update()},fa.prototype._setCacheLimits=function(ta,Ga){b.setCacheLimits(ta,Ga)},da.version.get=function(){return b.version},Object.defineProperties(fa.prototype,da),fa}(kf),df={showCompass:!0,showZoom:!0,visualizePitch:!1},ng=function(Z){var fa=this;this.options=b.extend({},df,Z);this._container=$a.create("div","mapboxgl-ctrl mapboxgl-ctrl-group");
this._container.addEventListener("contextmenu",function(da){return da.preventDefault()});this.options.showZoom&&(b.bindAll(["_setButtonTitle","_updateZoomButtons"],this),this._zoomInButton=this._createButton("mapboxgl-ctrl-zoom-in",function(da){return fa._map.zoomIn({},{originalEvent:da})}),$a.create("span","mapboxgl-ctrl-icon",this._zoomInButton).setAttribute("aria-hidden",!0),this._zoomOutButton=this._createButton("mapboxgl-ctrl-zoom-out",function(da){return fa._map.zoomOut({},{originalEvent:da})}),
$a.create("span","mapboxgl-ctrl-icon",this._zoomOutButton).setAttribute("aria-hidden",!0));this.options.showCompass&&(b.bindAll(["_rotateCompassArrow"],this),this._compass=this._createButton("mapboxgl-ctrl-compass",function(da){fa.options.visualizePitch?fa._map.resetNorthPitch({},{originalEvent:da}):fa._map.resetNorth({},{originalEvent:da})}),this._compassIcon=$a.create("span","mapboxgl-ctrl-icon",this._compass),this._compassIcon.setAttribute("aria-hidden",!0))};ng.prototype._updateZoomButtons=function(){var Z=
this._map.getZoom();this._zoomInButton.disabled=Z===this._map.getMaxZoom();this._zoomOutButton.disabled=Z===this._map.getMinZoom()};ng.prototype._rotateCompassArrow=function(){this._compassIcon.style.transform=this.options.visualizePitch?"scale("+1/Math.pow(Math.cos(Math.PI/180*this._map.transform.pitch),.5)+") rotateX("+this._map.transform.pitch+"deg) rotateZ("+180/Math.PI*this._map.transform.angle+"deg)":"rotate("+180/Math.PI*this._map.transform.angle+"deg)"};ng.prototype.onAdd=function(Z){return this._map=
Z,this.options.showZoom&&(this._setButtonTitle(this._zoomInButton,"ZoomIn"),this._setButtonTitle(this._zoomOutButton,"ZoomOut"),this._map.on("zoom",this._updateZoomButtons),this._updateZoomButtons()),this.options.showCompass&&(this._setButtonTitle(this._compass,"ResetBearing"),this.options.visualizePitch&&this._map.on("pitch",this._rotateCompassArrow),this._map.on("rotate",this._rotateCompassArrow),this._rotateCompassArrow(),this._handler=new Yf(this._map,this._compass,this.options.visualizePitch)),
this._container};ng.prototype.onRemove=function(){$a.remove(this._container);this.options.showZoom&&this._map.off("zoom",this._updateZoomButtons);this.options.showCompass&&(this.options.visualizePitch&&this._map.off("pitch",this._rotateCompassArrow),this._map.off("rotate",this._rotateCompassArrow),this._handler.off(),delete this._handler);delete this._map};ng.prototype._createButton=function(Z,fa){Z=$a.create("button",Z,this._container);return Z.type="button",Z.addEventListener("click",fa),Z};ng.prototype._setButtonTitle=
function(Z,fa){fa=this._map._getUIString("NavigationControl."+fa);Z.title=fa;Z.setAttribute("aria-label",fa)};var Yf=function(Z,fa,da){void 0===da&&(da=!1);this._clickTolerance=10;this.element=fa;this.mouseRotate=new pc({clickTolerance:Z.dragRotate._mouseRotate._clickTolerance});this.map=Z;da&&(this.mousePitch=new dd({clickTolerance:Z.dragRotate._mousePitch._clickTolerance}));b.bindAll("mousedown mousemove mouseup touchstart touchmove touchend reset".split(" "),this);$a.addEventListener(fa,"mousedown",
this.mousedown);$a.addEventListener(fa,"touchstart",this.touchstart,{passive:!1});$a.addEventListener(fa,"touchmove",this.touchmove);$a.addEventListener(fa,"touchend",this.touchend);$a.addEventListener(fa,"touchcancel",this.reset)};Yf.prototype.down=function(Z,fa){this.mouseRotate.mousedown(Z,fa);this.mousePitch&&this.mousePitch.mousedown(Z,fa);$a.disableDrag()};Yf.prototype.move=function(Z,fa){var da=this.map,ta=this.mouseRotate.mousemoveWindow(Z,fa);(ta&&ta.bearingDelta&&da.setBearing(da.getBearing()+
ta.bearingDelta),this.mousePitch)&&(Z=this.mousePitch.mousemoveWindow(Z,fa))&&Z.pitchDelta&&da.setPitch(da.getPitch()+Z.pitchDelta)};Yf.prototype.off=function(){var Z=this.element;$a.removeEventListener(Z,"mousedown",this.mousedown);$a.removeEventListener(Z,"touchstart",this.touchstart,{passive:!1});$a.removeEventListener(Z,"touchmove",this.touchmove);$a.removeEventListener(Z,"touchend",this.touchend);$a.removeEventListener(Z,"touchcancel",this.reset);this.offTemp()};Yf.prototype.offTemp=function(){$a.enableDrag();
$a.removeEventListener(b.window,"mousemove",this.mousemove);$a.removeEventListener(b.window,"mouseup",this.mouseup)};Yf.prototype.mousedown=function(Z){this.down(b.extend({},Z,{ctrlKey:!0,preventDefault:function(){return Z.preventDefault()}}),$a.mousePos(this.element,Z));$a.addEventListener(b.window,"mousemove",this.mousemove);$a.addEventListener(b.window,"mouseup",this.mouseup)};Yf.prototype.mousemove=function(Z){this.move(Z,$a.mousePos(this.element,Z))};Yf.prototype.mouseup=function(Z){this.mouseRotate.mouseupWindow(Z);
this.mousePitch&&this.mousePitch.mouseupWindow(Z);this.offTemp()};Yf.prototype.touchstart=function(Z){1!==Z.targetTouches.length?this.reset():(this._startPos=this._lastPos=$a.touchPos(this.element,Z.targetTouches)[0],this.down({type:"mousedown",button:0,ctrlKey:!0,preventDefault:function(){return Z.preventDefault()}},this._startPos))};Yf.prototype.touchmove=function(Z){1!==Z.targetTouches.length?this.reset():(this._lastPos=$a.touchPos(this.element,Z.targetTouches)[0],this.move({preventDefault:function(){return Z.preventDefault()}},
this._lastPos))};Yf.prototype.touchend=function(Z){0===Z.targetTouches.length&&this._startPos&&this._lastPos&&this._startPos.dist(this._lastPos)<this._clickTolerance&&this.element.click();this.reset()};Yf.prototype.reset=function(){this.mouseRotate.reset();this.mousePitch&&this.mousePitch.reset();delete this._startPos;delete this._lastPos;this.offTemp()};var yh={center:"translate(-50%,-50%)",top:"translate(-50%,0)","top-left":"translate(0,0)","top-right":"translate(-100%,0)",bottom:"translate(-50%,-100%)",
"bottom-left":"translate(0,-100%)","bottom-right":"translate(-100%,-100%)",left:"translate(0,-50%)",right:"translate(-100%,-50%)"},Tg,aj=function(Z){function fa(da,ta){var Ga=this;if(Z.call(this),(da instanceof b.window.HTMLElement||ta)&&(da=b.extend({element:da},ta)),b.bindAll("_update _onMove _onUp _addDragHandler _onMapClick _onKeyPress".split(" "),this),this._anchor=da&&da.anchor||"center",this._color=da&&da.color||"#3FB1CE",this._draggable=da&&da.draggable||!1,this._state="inactive",this._rotation=
da&&da.rotation||0,this._rotationAlignment=da&&da.rotationAlignment||"auto",this._pitchAlignment=da&&da.pitchAlignment&&"auto"!==da.pitchAlignment?da.pitchAlignment:this._rotationAlignment,da&&da.element)this._element=da.element,this._offset=b.Point.convert(da&&da.offset||[0,0]);else{this._defaultMarker=!0;this._element=$a.create("div");this._element.setAttribute("aria-label","Map marker");ta=$a.createNS("http://www.w3.org/2000/svg","svg");ta.setAttributeNS(null,"display","block");ta.setAttributeNS(null,
"height","41px");ta.setAttributeNS(null,"width","27px");ta.setAttributeNS(null,"viewBox","0 0 27 41");var Za=$a.createNS("http://www.w3.org/2000/svg","g");Za.setAttributeNS(null,"stroke","none");Za.setAttributeNS(null,"stroke-width","1");Za.setAttributeNS(null,"fill","none");Za.setAttributeNS(null,"fill-rule","evenodd");Za=$a.createNS("http://www.w3.org/2000/svg","g");Za.setAttributeNS(null,"fill-rule","nonzero");var hb=$a.createNS("http://www.w3.org/2000/svg","g");hb.setAttributeNS(null,"transform",
"translate(3.0, 29.0)");hb.setAttributeNS(null,"fill","#000000");for(var ub=0,Rb=[{rx:"10.5",ry:"5.25002273"},{rx:"10.5",ry:"5.25002273"},{rx:"9.5",ry:"4.77275007"},{rx:"8.5",ry:"4.29549936"},{rx:"7.5",ry:"3.81822308"},{rx:"6.5",ry:"3.34094679"},{rx:"5.5",ry:"2.86367051"},{rx:"4.5",ry:"2.38636864"}];ub<Rb.length;ub+=1){var Yb=Rb[ub],dc=$a.createNS("http://www.w3.org/2000/svg","ellipse");dc.setAttributeNS(null,"opacity","0.04");dc.setAttributeNS(null,"cx","10.5");dc.setAttributeNS(null,"cy","5.80029008");
dc.setAttributeNS(null,"rx",Yb.rx);dc.setAttributeNS(null,"ry",Yb.ry);hb.appendChild(dc)}ub=$a.createNS("http://www.w3.org/2000/svg","g");ub.setAttributeNS(null,"fill",this._color);Rb=$a.createNS("http://www.w3.org/2000/svg","path");Rb.setAttributeNS(null,"d","M27,13.5 C27,19.074644 20.250001,27.000002 14.75,34.500002 C14.016665,35.500004 12.983335,35.500004 12.25,34.500002 C6.7499993,27.000002 0,19.222562 0,13.5 C0,6.0441559 6.0441559,0 13.5,0 C20.955844,0 27,6.0441559 27,13.5 Z");ub.appendChild(Rb);
Rb=$a.createNS("http://www.w3.org/2000/svg","g");Rb.setAttributeNS(null,"opacity","0.25");Rb.setAttributeNS(null,"fill","#000000");Yb=$a.createNS("http://www.w3.org/2000/svg","path");Yb.setAttributeNS(null,"d","M13.5,0 C6.0441559,0 0,6.0441559 0,13.5 C0,19.222562 6.7499993,27 12.25,34.5 C13,35.522727 14.016664,35.500004 14.75,34.5 C20.250001,27 27,19.074644 27,13.5 C27,6.0441559 20.955844,0 13.5,0 Z M13.5,1 C20.415404,1 26,6.584596 26,13.5 C26,15.898657 24.495584,19.181431 22.220703,22.738281 C19.945823,26.295132 16.705119,30.142167 13.943359,33.908203 C13.743445,34.180814 13.612715,34.322738 13.5,34.441406 C13.387285,34.322738 13.256555,34.180814 13.056641,33.908203 C10.284481,30.127985 7.4148684,26.314159 5.015625,22.773438 C2.6163816,19.232715 1,15.953538 1,13.5 C1,6.584596 6.584596,1 13.5,1 Z");
Rb.appendChild(Yb);Yb=$a.createNS("http://www.w3.org/2000/svg","g");Yb.setAttributeNS(null,"transform","translate(6.0, 7.0)");Yb.setAttributeNS(null,"fill","#FFFFFF");dc=$a.createNS("http://www.w3.org/2000/svg","g");dc.setAttributeNS(null,"transform","translate(8.0, 8.0)");var Ac=$a.createNS("http://www.w3.org/2000/svg","circle");Ac.setAttributeNS(null,"fill","#000000");Ac.setAttributeNS(null,"opacity","0.25");Ac.setAttributeNS(null,"cx","5.5");Ac.setAttributeNS(null,"cy","5.5");Ac.setAttributeNS(null,
"r","5.4999962");var Ec=$a.createNS("http://www.w3.org/2000/svg","circle");Ec.setAttributeNS(null,"fill","#FFFFFF");Ec.setAttributeNS(null,"cx","5.5");Ec.setAttributeNS(null,"cy","5.5");Ec.setAttributeNS(null,"r","5.4999962");dc.appendChild(Ac);dc.appendChild(Ec);Za.appendChild(hb);Za.appendChild(ub);Za.appendChild(Rb);Za.appendChild(Yb);Za.appendChild(dc);ta.appendChild(Za);this._element.appendChild(ta);this._offset=b.Point.convert(da&&da.offset||[0,-14])}this._element.classList.add("mapboxgl-marker");
this._element.addEventListener("dragstart",function(uc){uc.preventDefault()});this._element.addEventListener("mousedown",function(uc){uc.preventDefault()});this._element.addEventListener("focus",function(){var uc=Ga._map.getContainer();uc.scrollTop=0;uc.scrollLeft=0});Ia(this._element,this._anchor,"marker");this._popup=null}return Z&&(fa.__proto__=Z),(fa.prototype=Object.create(Z&&Z.prototype)).constructor=fa,fa.prototype.addTo=function(da){return this.remove(),this._map=da,da.getCanvasContainer().appendChild(this._element),
da.on("move",this._update),da.on("moveend",this._update),this.setDraggable(this._draggable),this._update(),this._map.on("click",this._onMapClick),this},fa.prototype.remove=function(){return this._map&&(this._map.off("click",this._onMapClick),this._map.off("move",this._update),this._map.off("moveend",this._update),this._map.off("mousedown",this._addDragHandler),this._map.off("touchstart",this._addDragHandler),this._map.off("mouseup",this._onUp),this._map.off("touchend",this._onUp),this._map.off("mousemove",
this._onMove),this._map.off("touchmove",this._onMove),delete this._map),$a.remove(this._element),this._popup&&this._popup.remove(),this},fa.prototype.getLngLat=function(){return this._lngLat},fa.prototype.setLngLat=function(da){return this._lngLat=b.LngLat.convert(da),this._pos=null,this._popup&&this._popup.setLngLat(this._lngLat),this._update(),this},fa.prototype.getElement=function(){return this._element},fa.prototype.setPopup=function(da){if(this._popup&&(this._popup.remove(),this._popup=null,
this._element.removeEventListener("keypress",this._onKeyPress),this._originalTabIndex||this._element.removeAttribute("tabindex")),da){if(!("offset"in da.options)){var ta=Math.sqrt(Math.pow(13.5,2)/2);da.options.offset=this._defaultMarker?{top:[0,0],"top-left":[0,0],"top-right":[0,0],bottom:[0,-38.1],"bottom-left":[ta,-1*(24.6+ta)],"bottom-right":[-ta,-1*(24.6+ta)],left:[13.5,-24.6],right:[-13.5,-24.6]}:this._offset}this._popup=da;this._lngLat&&this._popup.setLngLat(this._lngLat);(this._originalTabIndex=
this._element.getAttribute("tabindex"))||this._element.setAttribute("tabindex","0");this._element.addEventListener("keypress",this._onKeyPress)}return this},fa.prototype._onKeyPress=function(da){var ta=da.code;da=da.charCode||da.keyCode;"Space"!==ta&&"Enter"!==ta&&32!==da&&13!==da||this.togglePopup()},fa.prototype._onMapClick=function(da){da=da.originalEvent.target;var ta=this._element;this._popup&&(da===ta||ta.contains(da))&&this.togglePopup()},fa.prototype.getPopup=function(){return this._popup},
fa.prototype.togglePopup=function(){var da=this._popup;return da?(da.isOpen()?da.remove():da.addTo(this._map),this):this},fa.prototype._update=function(da){if(this._map){this._map.transform.renderWorldCopies&&(this._lngLat=Oa(this._lngLat,this._pos,this._map.transform));this._pos=this._map.project(this._lngLat)._add(this._offset);var ta="";"viewport"===this._rotationAlignment||"auto"===this._rotationAlignment?ta="rotateZ("+this._rotation+"deg)":"map"===this._rotationAlignment&&(ta="rotateZ("+(this._rotation-
this._map.getBearing())+"deg)");var Ga="";"viewport"===this._pitchAlignment||"auto"===this._pitchAlignment?Ga="rotateX(0deg)":"map"===this._pitchAlignment&&(Ga="rotateX("+this._map.getPitch()+"deg)");da&&"moveend"!==da.type||(this._pos=this._pos.round());$a.setTransform(this._element,yh[this._anchor]+" translate("+this._pos.x+"px, "+this._pos.y+"px) "+Ga+" "+ta)}},fa.prototype.getOffset=function(){return this._offset},fa.prototype.setOffset=function(da){return this._offset=b.Point.convert(da),this._update(),
this},fa.prototype._onMove=function(da){this._pos=da.point.sub(this._positionDelta);this._lngLat=this._map.unproject(this._pos);this.setLngLat(this._lngLat);this._element.style.pointerEvents="none";"pending"===this._state&&(this._state="active",this.fire(new b.Event("dragstart")));this.fire(new b.Event("drag"))},fa.prototype._onUp=function(){this._element.style.pointerEvents="auto";this._positionDelta=null;this._map.off("mousemove",this._onMove);this._map.off("touchmove",this._onMove);"active"===
this._state&&this.fire(new b.Event("dragend"));this._state="inactive"},fa.prototype._addDragHandler=function(da){this._element.contains(da.originalEvent.target)&&(da.preventDefault(),this._positionDelta=da.point.sub(this._pos).add(this._offset),this._state="pending",this._map.on("mousemove",this._onMove),this._map.on("touchmove",this._onMove),this._map.once("mouseup",this._onUp),this._map.once("touchend",this._onUp))},fa.prototype.setDraggable=function(da){return this._draggable=!!da,this._map&&(da?
(this._map.on("mousedown",this._addDragHandler),this._map.on("touchstart",this._addDragHandler)):(this._map.off("mousedown",this._addDragHandler),this._map.off("touchstart",this._addDragHandler))),this},fa.prototype.isDraggable=function(){return this._draggable},fa.prototype.setRotation=function(da){return this._rotation=da||0,this._update(),this},fa.prototype.getRotation=function(){return this._rotation},fa.prototype.setRotationAlignment=function(da){return this._rotationAlignment=da||"auto",this._update(),
this},fa.prototype.getRotationAlignment=function(){return this._rotationAlignment},fa.prototype.setPitchAlignment=function(da){return this._pitchAlignment=da&&"auto"!==da?da:this._rotationAlignment,this._update(),this},fa.prototype.getPitchAlignment=function(){return this._pitchAlignment},fa}(b.Evented),Jk={positionOptions:{enableHighAccuracy:!1,maximumAge:0,timeout:6E3},fitBoundsOptions:{maxZoom:15},trackUserLocation:!1,showAccuracyCircle:!0,showUserLocation:!0},Th=0,Vf=!1,Yi=function(Z){function fa(da){Z.call(this);
this.options=b.extend({},Jk,da);b.bindAll("_onSuccess _onError _onZoom _finish _setupUI _updateCamera _updateMarker".split(" "),this)}return Z&&(fa.__proto__=Z),(fa.prototype=Object.create(Z&&Z.prototype)).constructor=fa,fa.prototype.onAdd=function(da){var ta;return this._map=da,this._container=$a.create("div","mapboxgl-ctrl mapboxgl-ctrl-group"),ta=this._setupUI,void 0!==Tg?ta(Tg):void 0!==b.window.navigator.permissions?b.window.navigator.permissions.query({name:"geolocation"}).then(function(Ga){ta(Tg=
"denied"!==Ga.state)}):ta(Tg=!!b.window.navigator.geolocation),this._container},fa.prototype.onRemove=function(){void 0!==this._geolocationWatchID&&(b.window.navigator.geolocation.clearWatch(this._geolocationWatchID),this._geolocationWatchID=void 0);this.options.showUserLocation&&this._userLocationDotMarker&&this._userLocationDotMarker.remove();this.options.showAccuracyCircle&&this._accuracyCircleMarker&&this._accuracyCircleMarker.remove();$a.remove(this._container);this._map.off("zoom",this._onZoom);
this._map=void 0;Th=0;Vf=!1},fa.prototype._isOutOfMapMaxBounds=function(da){var ta=this._map.getMaxBounds();da=da.coords;return ta&&(da.longitude<ta.getWest()||da.longitude>ta.getEast()||da.latitude<ta.getSouth()||da.latitude>ta.getNorth())},fa.prototype._setErrorState=function(){switch(this._watchState){case "WAITING_ACTIVE":this._watchState="ACTIVE_ERROR";this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active");this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active-error");
break;case "ACTIVE_LOCK":this._watchState="ACTIVE_ERROR";this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active");this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active-error");this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting");break;case "BACKGROUND":this._watchState="BACKGROUND_ERROR",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-background-error"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting")}},
fa.prototype._onSuccess=function(da){if(this._map){if(this._isOutOfMapMaxBounds(da))return this._setErrorState(),this.fire(new b.Event("outofmaxbounds",da)),this._updateMarker(),void this._finish();if(this.options.trackUserLocation)switch(this._lastKnownPosition=da,this._watchState){case "WAITING_ACTIVE":case "ACTIVE_LOCK":case "ACTIVE_ERROR":this._watchState="ACTIVE_LOCK";this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-waiting");this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active-error");
this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active");break;case "BACKGROUND":case "BACKGROUND_ERROR":this._watchState="BACKGROUND",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background-error"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-background")}this.options.showUserLocation&&"OFF"!==this._watchState&&this._updateMarker(da);this.options.trackUserLocation&&"ACTIVE_LOCK"!==
this._watchState||this._updateCamera(da);this.options.showUserLocation&&this._dotElement.classList.remove("mapboxgl-user-location-dot-stale");this.fire(new b.Event("geolocate",da));this._finish()}},fa.prototype._updateCamera=function(da){var ta=new b.LngLat(da.coords.longitude,da.coords.latitude);da=da.coords.accuracy;var Ga=this._map.getBearing();Ga=b.extend({bearing:Ga},this.options.fitBoundsOptions);this._map.fitBounds(ta.toBounds(da),Ga,{geolocateSource:!0})},fa.prototype._updateMarker=function(da){if(da){var ta=
new b.LngLat(da.coords.longitude,da.coords.latitude);this._accuracyCircleMarker.setLngLat(ta).addTo(this._map);this._userLocationDotMarker.setLngLat(ta).addTo(this._map);this._accuracy=da.coords.accuracy;this.options.showUserLocation&&this.options.showAccuracyCircle&&this._updateCircleRadius()}else this._userLocationDotMarker.remove(),this._accuracyCircleMarker.remove()},fa.prototype._updateCircleRadius=function(){var da=this._map._container.clientHeight/2,ta=this._map.unproject([0,da]);da=this._map.unproject([1,
da]);ta=ta.distanceTo(da);ta=Math.ceil(2*this._accuracy/ta);this._circleElement.style.width=ta+"px";this._circleElement.style.height=ta+"px"},fa.prototype._onZoom=function(){this.options.showUserLocation&&this.options.showAccuracyCircle&&this._updateCircleRadius()},fa.prototype._onError=function(da){if(this._map){if(this.options.trackUserLocation)if(1===da.code){this._watchState="OFF";this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-waiting");this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active");
this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active-error");this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background");this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background-error");this._geolocateButton.disabled=!0;var ta=this._map._getUIString("GeolocateControl.LocationNotAvailable");this._geolocateButton.title=ta;this._geolocateButton.setAttribute("aria-label",ta);void 0!==this._geolocationWatchID&&this._clearWatch()}else{if(3===da.code&&
Vf)return;this._setErrorState()}"OFF"!==this._watchState&&this.options.showUserLocation&&this._dotElement.classList.add("mapboxgl-user-location-dot-stale");this.fire(new b.Event("error",da));this._finish()}},fa.prototype._finish=function(){this._timeoutId&&clearTimeout(this._timeoutId);this._timeoutId=void 0},fa.prototype._setupUI=function(da){var ta=this;(this._container.addEventListener("contextmenu",function(Ga){return Ga.preventDefault()}),this._geolocateButton=$a.create("button","mapboxgl-ctrl-geolocate",
this._container),$a.create("span","mapboxgl-ctrl-icon",this._geolocateButton).setAttribute("aria-hidden",!0),this._geolocateButton.type="button",!1===da)?(b.warnOnce("Geolocation support is not available so the GeolocateControl will be disabled."),da=this._map._getUIString("GeolocateControl.LocationNotAvailable"),this._geolocateButton.disabled=!0,this._geolocateButton.title=da,this._geolocateButton.setAttribute("aria-label",da)):(da=this._map._getUIString("GeolocateControl.FindMyLocation"),this._geolocateButton.title=
da,this._geolocateButton.setAttribute("aria-label",da));this.options.trackUserLocation&&(this._geolocateButton.setAttribute("aria-pressed","false"),this._watchState="OFF");this.options.showUserLocation&&(this._dotElement=$a.create("div","mapboxgl-user-location-dot"),this._userLocationDotMarker=new aj(this._dotElement),this._circleElement=$a.create("div","mapboxgl-user-location-accuracy-circle"),this._accuracyCircleMarker=new aj({element:this._circleElement,pitchAlignment:"map"}),this.options.trackUserLocation&&
(this._watchState="OFF"),this._map.on("zoom",this._onZoom));this._geolocateButton.addEventListener("click",this.trigger.bind(this));this._setup=!0;this.options.trackUserLocation&&this._map.on("movestart",function(Ga){Ga.geolocateSource||"ACTIVE_LOCK"!==ta._watchState||Ga.originalEvent&&"resize"===Ga.originalEvent.type||(ta._watchState="BACKGROUND",ta._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-background"),ta._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active"),ta.fire(new b.Event("trackuserlocationend")))})},
fa.prototype.trigger=function(){if(!this._setup)return b.warnOnce("Geolocate control triggered before added to a map"),!1;if(this.options.trackUserLocation){switch(this._watchState){case "OFF":this._watchState="WAITING_ACTIVE";this.fire(new b.Event("trackuserlocationstart"));break;case "WAITING_ACTIVE":case "ACTIVE_LOCK":case "ACTIVE_ERROR":case "BACKGROUND_ERROR":Th--;Vf=!1;this._watchState="OFF";this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-waiting");this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active");
this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active-error");this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background");this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background-error");this.fire(new b.Event("trackuserlocationend"));break;case "BACKGROUND":this._watchState="ACTIVE_LOCK",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background"),this._lastKnownPosition&&this._updateCamera(this._lastKnownPosition),this.fire(new b.Event("trackuserlocationstart"))}switch(this._watchState){case "WAITING_ACTIVE":this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting");
this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active");break;case "ACTIVE_LOCK":this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active");break;case "ACTIVE_ERROR":this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting");this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active-error");break;case "BACKGROUND":this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-background");break;case "BACKGROUND_ERROR":this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting"),
this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-background-error")}if("OFF"===this._watchState&&void 0!==this._geolocationWatchID)this._clearWatch();else if(void 0===this._geolocationWatchID){var da;this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting");this._geolocateButton.setAttribute("aria-pressed","true");1<++Th?(da={maximumAge:6E5,timeout:0},Vf=!0):(da=this.options.positionOptions,Vf=!1);this._geolocationWatchID=b.window.navigator.geolocation.watchPosition(this._onSuccess,
this._onError,da)}}else b.window.navigator.geolocation.getCurrentPosition(this._onSuccess,this._onError,this.options.positionOptions),this._timeoutId=setTimeout(this._finish,1E4);return!0},fa.prototype._clearWatch=function(){b.window.navigator.geolocation.clearWatch(this._geolocationWatchID);this._geolocationWatchID=void 0;this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-waiting");this._geolocateButton.setAttribute("aria-pressed","false");this.options.showUserLocation&&this._updateMarker(null)},
fa}(b.Evented),oj={maxWidth:100,unit:"metric"},Eg=function(Z){this.options=b.extend({},oj,Z);b.bindAll(["_onMove","setUnit"],this)};Eg.prototype.getDefaultPosition=function(){return"bottom-left"};Eg.prototype._onMove=function(){Pa(this._map,this._container,this.options)};Eg.prototype.onAdd=function(Z){return this._map=Z,this._container=$a.create("div","mapboxgl-ctrl mapboxgl-ctrl-scale",Z.getContainer()),this._map.on("move",this._onMove),this._onMove(),this._container};Eg.prototype.onRemove=function(){$a.remove(this._container);
this._map.off("move",this._onMove);this._map=void 0};Eg.prototype.setUnit=function(Z){this.options.unit=Z;Pa(this._map,this._container,this.options)};var dh=function(Z){this._fullscreen=!1;Z&&Z.container&&(Z.container instanceof b.window.HTMLElement?this._container=Z.container:b.warnOnce("Full screen control 'container' must be a DOM element."));b.bindAll(["_onClickFullscreen","_changeIcon"],this);"onfullscreenchange"in b.window.document?this._fullscreenchange="fullscreenchange":"onmozfullscreenchange"in
b.window.document?this._fullscreenchange="mozfullscreenchange":"onwebkitfullscreenchange"in b.window.document?this._fullscreenchange="webkitfullscreenchange":"onmsfullscreenchange"in b.window.document&&(this._fullscreenchange="MSFullscreenChange")};dh.prototype.onAdd=function(Z){return this._map=Z,this._container||(this._container=this._map.getContainer()),this._controlContainer=$a.create("div","mapboxgl-ctrl mapboxgl-ctrl-group"),this._checkFullscreenSupport()?this._setupUI():(this._controlContainer.style.display=
"none",b.warnOnce("This device does not support fullscreen mode.")),this._controlContainer};dh.prototype.onRemove=function(){$a.remove(this._controlContainer);this._map=null;b.window.document.removeEventListener(this._fullscreenchange,this._changeIcon)};dh.prototype._checkFullscreenSupport=function(){return!!(b.window.document.fullscreenEnabled||b.window.document.mozFullScreenEnabled||b.window.document.msFullscreenEnabled||b.window.document.webkitFullscreenEnabled)};dh.prototype._setupUI=function(){var Z=
this._fullscreenButton=$a.create("button","mapboxgl-ctrl-fullscreen",this._controlContainer);$a.create("span","mapboxgl-ctrl-icon",Z).setAttribute("aria-hidden",!0);Z.type="button";this._updateTitle();this._fullscreenButton.addEventListener("click",this._onClickFullscreen);b.window.document.addEventListener(this._fullscreenchange,this._changeIcon)};dh.prototype._updateTitle=function(){var Z=this._getTitle();this._fullscreenButton.setAttribute("aria-label",Z);this._fullscreenButton.title=Z};dh.prototype._getTitle=
function(){return this._map._getUIString(this._isFullscreen()?"FullscreenControl.Exit":"FullscreenControl.Enter")};dh.prototype._isFullscreen=function(){return this._fullscreen};dh.prototype._changeIcon=function(){(b.window.document.fullscreenElement||b.window.document.mozFullScreenElement||b.window.document.webkitFullscreenElement||b.window.document.msFullscreenElement)===this._container!==this._fullscreen&&(this._fullscreen=!this._fullscreen,this._fullscreenButton.classList.toggle("mapboxgl-ctrl-shrink"),
this._fullscreenButton.classList.toggle("mapboxgl-ctrl-fullscreen"),this._updateTitle())};dh.prototype._onClickFullscreen=function(){this._isFullscreen()?b.window.document.exitFullscreen?b.window.document.exitFullscreen():b.window.document.mozCancelFullScreen?b.window.document.mozCancelFullScreen():b.window.document.msExitFullscreen?b.window.document.msExitFullscreen():b.window.document.webkitCancelFullScreen&&b.window.document.webkitCancelFullScreen():this._container.requestFullscreen?this._container.requestFullscreen():
this._container.mozRequestFullScreen?this._container.mozRequestFullScreen():this._container.msRequestFullscreen?this._container.msRequestFullscreen():this._container.webkitRequestFullscreen&&this._container.webkitRequestFullscreen()};var qh={closeButton:!0,closeOnClick:!0,className:"",maxWidth:"240px"},Vj=function(Z){function fa(da){Z.call(this);this.options=b.extend(Object.create(qh),da);b.bindAll("_update _onClose remove _onMouseMove _onMouseUp _onDrag".split(" "),this)}return Z&&(fa.__proto__=
Z),(fa.prototype=Object.create(Z&&Z.prototype)).constructor=fa,fa.prototype.addTo=function(da){return this._map&&this.remove(),this._map=da,this.options.closeOnClick&&this._map.on("click",this._onClose),this.options.closeOnMove&&this._map.on("move",this._onClose),this._map.on("remove",this.remove),this._update(),this._trackPointer?(this._map.on("mousemove",this._onMouseMove),this._map.on("mouseup",this._onMouseUp),this._container&&this._container.classList.add("mapboxgl-popup-track-pointer"),this._map._canvasContainer.classList.add("mapboxgl-track-pointer")):
this._map.on("move",this._update),this.fire(new b.Event("open")),this},fa.prototype.isOpen=function(){return!!this._map},fa.prototype.remove=function(){return this._content&&$a.remove(this._content),this._container&&($a.remove(this._container),delete this._container),this._map&&(this._map.off("move",this._update),this._map.off("move",this._onClose),this._map.off("click",this._onClose),this._map.off("remove",this.remove),this._map.off("mousemove",this._onMouseMove),this._map.off("mouseup",this._onMouseUp),
this._map.off("drag",this._onDrag),delete this._map),this.fire(new b.Event("close")),this},fa.prototype.getLngLat=function(){return this._lngLat},fa.prototype.setLngLat=function(da){return this._lngLat=b.LngLat.convert(da),this._pos=null,this._trackPointer=!1,this._update(),this._map&&(this._map.on("move",this._update),this._map.off("mousemove",this._onMouseMove),this._container&&this._container.classList.remove("mapboxgl-popup-track-pointer"),this._map._canvasContainer.classList.remove("mapboxgl-track-pointer")),
this},fa.prototype.trackPointer=function(){return this._trackPointer=!0,this._pos=null,this._update(),this._map&&(this._map.off("move",this._update),this._map.on("mousemove",this._onMouseMove),this._map.on("drag",this._onDrag),this._container&&this._container.classList.add("mapboxgl-popup-track-pointer"),this._map._canvasContainer.classList.add("mapboxgl-track-pointer")),this},fa.prototype.getElement=function(){return this._container},fa.prototype.setText=function(da){return this.setDOMContent(b.window.document.createTextNode(da))},
fa.prototype.setHTML=function(da){var ta=b.window.document.createDocumentFragment(),Ga=b.window.document.createElement("body");for(Ga.innerHTML=da;da=Ga.firstChild;)ta.appendChild(da);return this.setDOMContent(ta)},fa.prototype.getMaxWidth=function(){return this._container&&this._container.style.maxWidth},fa.prototype.setMaxWidth=function(da){return this.options.maxWidth=da,this._update(),this},fa.prototype.setDOMContent=function(da){return this._createContent(),this._content.appendChild(da),this._update(),
this},fa.prototype.addClassName=function(da){this._container&&this._container.classList.add(da)},fa.prototype.removeClassName=function(da){this._container&&this._container.classList.remove(da)},fa.prototype.toggleClassName=function(da){if(this._container)return this._container.classList.toggle(da)},fa.prototype._createContent=function(){this._content&&$a.remove(this._content);this._content=$a.create("div","mapboxgl-popup-content",this._container);this.options.closeButton&&(this._closeButton=$a.create("button",
"mapboxgl-popup-close-button",this._content),this._closeButton.type="button",this._closeButton.setAttribute("aria-label","Close popup"),this._closeButton.innerHTML="\x26#215;",this._closeButton.addEventListener("click",this._onClose))},fa.prototype._onMouseUp=function(da){this._update(da.point)},fa.prototype._onMouseMove=function(da){this._update(da.point)},fa.prototype._onDrag=function(da){this._update(da.point)},fa.prototype._update=function(da){var ta=this;if(this._map&&(this._lngLat||this._trackPointer)&&
this._content&&(this._container||(this._container=$a.create("div","mapboxgl-popup",this._map.getContainer()),this._tip=$a.create("div","mapboxgl-popup-tip",this._container),this._container.appendChild(this._content),this.options.className&&this.options.className.split(" ").forEach(function(ub){return ta._container.classList.add(ub)}),this._trackPointer&&this._container.classList.add("mapboxgl-popup-track-pointer")),this.options.maxWidth&&this._container.style.maxWidth!==this.options.maxWidth&&(this._container.style.maxWidth=
this.options.maxWidth),this._map.transform.renderWorldCopies&&!this._trackPointer&&(this._lngLat=Oa(this._lngLat,this._pos,this._map.transform)),!this._trackPointer||da)){da=this._pos=this._trackPointer&&da?da:this._map.project(this._lngLat);var Ga=this.options.anchor,Za=function Yb(Rb){if(Rb){if("number"==typeof Rb){var dc=Math.round(Math.sqrt(.5*Math.pow(Rb,2)));return{center:new b.Point(0,0),top:new b.Point(0,Rb),"top-left":new b.Point(dc,dc),"top-right":new b.Point(-dc,dc),bottom:new b.Point(0,
-Rb),"bottom-left":new b.Point(dc,-dc),"bottom-right":new b.Point(-dc,-dc),left:new b.Point(Rb,0),right:new b.Point(-Rb,0)}}return Rb instanceof b.Point||Array.isArray(Rb)?(Rb=b.Point.convert(Rb),{center:Rb,top:Rb,"top-left":Rb,"top-right":Rb,bottom:Rb,"bottom-left":Rb,"bottom-right":Rb,left:Rb,right:Rb}):{center:b.Point.convert(Rb.center||[0,0]),top:b.Point.convert(Rb.top||[0,0]),"top-left":b.Point.convert(Rb["top-left"]||[0,0]),"top-right":b.Point.convert(Rb["top-right"]||[0,0]),bottom:b.Point.convert(Rb.bottom||
[0,0]),"bottom-left":b.Point.convert(Rb["bottom-left"]||[0,0]),"bottom-right":b.Point.convert(Rb["bottom-right"]||[0,0]),left:b.Point.convert(Rb.left||[0,0]),right:b.Point.convert(Rb.right||[0,0])}}return Yb(new b.Point(0,0))}(this.options.offset);if(!Ga){Ga=this._container.offsetWidth;var hb=this._container.offsetHeight;hb=da.y+Za.bottom.y<hb?["top"]:da.y>this._map.transform.height-hb?["bottom"]:[];da.x<Ga/2?hb.push("left"):da.x>this._map.transform.width-Ga/2&&hb.push("right");Ga=0===hb.length?"bottom":
hb.join("-")}da=da.add(Za[Ga]).round();$a.setTransform(this._container,yh[Ga]+" translate("+da.x+"px,"+da.y+"px)");Ia(this._container,Ga,"popup")}},fa.prototype._onClose=function(){this.remove()},fa}(b.Evented),Fj={version:b.version,supported:Na,setRTLTextPlugin:b.setRTLTextPlugin,getRTLTextPluginStatus:b.getRTLTextPluginStatus,Map:ee,NavigationControl:ng,GeolocateControl:Yi,AttributionControl:of,ScaleControl:Eg,FullscreenControl:dh,Popup:Vj,Marker:aj,Style:Gd,LngLat:b.LngLat,LngLatBounds:b.LngLatBounds,
Point:b.Point,MercatorCoordinate:b.MercatorCoordinate,Evented:b.Evented,config:b.config,prewarm:function(){(Pd||(Pd=new Vd),Pd).acquire("mapboxgl_preloaded_worker_pool")},clearPrewarmedResources:function(){var Z=Pd;Z&&(Z.isPreloaded()&&1===Z.numActive()?(Z.release("mapboxgl_preloaded_worker_pool"),Pd=null):console.warn("Could not clear WebWorkers since there are active Map instances that still reference it. The pre-warmed WebWorker pool can only be cleared when all map instances have been removed with map.remove()"))},
get accessToken(){return b.config.ACCESS_TOKEN},set accessToken(Z){b.config.ACCESS_TOKEN=Z},get baseApiUrl(){return b.config.API_URL},set baseApiUrl(Z){b.config.API_URL=Z},get workerCount(){return Vd.workerCount},set workerCount(Z){Vd.workerCount=Z},get maxParallelImageRequests(){return b.config.MAX_PARALLEL_IMAGE_REQUESTS},set maxParallelImageRequests(Z){b.config.MAX_PARALLEL_IMAGE_REQUESTS=Z},clearStorage:function(Z){b.clearTileCache(Z)},workerUrl:""};return Fj});return f})},{}],448:[function(a,
G,C){function q(m,f,b){for(var k=Array(m),e=0;e<m;++e)k[e]=0,e===f&&(k[e]+=.5),e===b&&(k[e]+=.5);return k}G.exports=function(m){for(var f=1<<m+1,b=Array(f),k=0;k<f;++k){var e=k;var h=m,l=k;if(0===l||l===(1<<h+1)-1)var c=[];else{var g=[];c=[];for(var d=0;d<=h;++d)if(l&1<<d){g.push(q(h,d-1,d-1));c.push(null);for(var p=0;p<=h;++p)~l&1<<p&&(g.push(q(h,d-1,p-1)),c.push([d,p]))}h=n(g);l=[];d=0;b:for(;d<h.length;++d){g=h[d];var r=[];for(p=0;p<g.length;++p){if(!c[g[p]])continue b;r.push(c[g[p]].slice())}l.push(r)}c=
l}b[e]=c}return b};var n=a("convex-hull")},{"convex-hull":135}],449:[function(a,G,C){function q(p,r,t,w,x){p[0]=r[0]*w+t[0]*x;p[1]=r[1]*w+t[1]*x;p[2]=r[2]*w+t[2]*x}var n=a("./normalize");C=a("gl-mat4/create");var m=a("gl-mat4/clone"),f=a("gl-mat4/determinant"),b=a("gl-mat4/invert"),k=a("gl-mat4/transpose"),e={length:a("gl-vec3/length"),normalize:a("gl-vec3/normalize"),dot:a("gl-vec3/dot"),cross:a("gl-vec3/cross")},h=C(),l=C(),c=[0,0,0,0],g=[[0,0,0],[0,0,0],[0,0,0]],d=[0,0,0];G.exports=function(p,
r,t,w,x,y){r||(r=[0,0,0]);t||(t=[0,0,0]);w||(w=[0,0,0]);x||(x=[0,0,0,1]);y||(y=[0,0,0,1]);if(!n(h,p))return!1;m(l,h);l[3]=0;l[7]=0;l[11]=0;l[15]=1;if(Math.abs(1E-8>f(l)))return!1;var A=h[3],z=h[7],F=h[11];p=h[12];var D=h[13],u=h[14],B=h[15];if(0!==A||0!==z||0!==F){c[0]=A;c[1]=z;c[2]=F;c[3]=B;if(!b(l,l))return!1;k(l,l);A=c[0];z=c[1];F=c[2];B=c[3];x[0]=l[0]*A+l[4]*z+l[8]*F+l[12]*B;x[1]=l[1]*A+l[5]*z+l[9]*F+l[13]*B;x[2]=l[2]*A+l[6]*z+l[10]*F+l[14]*B;x[3]=l[3]*A+l[7]*z+l[11]*F+l[15]*B}else x[0]=x[1]=
x[2]=0,x[3]=1;r[0]=p;r[1]=D;r[2]=u;g[0][0]=h[0];g[0][1]=h[1];g[0][2]=h[2];g[1][0]=h[4];g[1][1]=h[5];g[1][2]=h[6];g[2][0]=h[8];g[2][1]=h[9];g[2][2]=h[10];t[0]=e.length(g[0]);e.normalize(g[0],g[0]);w[0]=e.dot(g[0],g[1]);q(g[1],g[1],g[0],1,-w[0]);t[1]=e.length(g[1]);e.normalize(g[1],g[1]);w[0]/=t[1];w[1]=e.dot(g[0],g[2]);q(g[2],g[2],g[0],1,-w[1]);w[2]=e.dot(g[1],g[2]);q(g[2],g[2],g[1],1,-w[2]);t[2]=e.length(g[2]);e.normalize(g[2],g[2]);w[1]/=t[2];w[2]/=t[2];e.cross(d,g[1],g[2]);if(0>e.dot(g[0],d))for(r=
0;3>r;r++)t[r]*=-1,g[r][0]*=-1,g[r][1]*=-1,g[r][2]*=-1;y[0]=.5*Math.sqrt(Math.max(1+g[0][0]-g[1][1]-g[2][2],0));y[1]=.5*Math.sqrt(Math.max(1-g[0][0]+g[1][1]-g[2][2],0));y[2]=.5*Math.sqrt(Math.max(1-g[0][0]-g[1][1]+g[2][2],0));y[3]=.5*Math.sqrt(Math.max(1+g[0][0]+g[1][1]+g[2][2],0));g[2][1]>g[1][2]&&(y[0]=-y[0]);g[0][2]>g[2][0]&&(y[1]=-y[1]);g[1][0]>g[0][1]&&(y[2]=-y[2]);return!0}},{"./normalize":450,"gl-mat4/clone":272,"gl-mat4/create":273,"gl-mat4/determinant":274,"gl-mat4/invert":278,"gl-mat4/transpose":289,
"gl-vec3/cross":339,"gl-vec3/dot":344,"gl-vec3/length":354,"gl-vec3/normalize":361}],450:[function(a,G,C){G.exports=function(q,n){var m=n[15];if(0===m)return!1;m=1/m;for(var f=0;16>f;f++)q[f]=n[f]*m;return!0}},{}],451:[function(a,G,C){function q(){return{translate:[0,0,0],scale:[1,1,1],skew:[0,0,0],perspective:[0,0,0,1],quaternion:[0,0,0,1]}}var n=a("gl-vec3/lerp"),m=a("mat4-recompose"),f=a("mat4-decompose"),b=a("gl-mat4/determinant"),k=a("quat-slerp"),e=q(),h=q(),l=q();G.exports=function(c,g,d,p){if(0===
b(g)||0===b(d))return!1;g=f(g,e.translate,e.scale,e.skew,e.perspective,e.quaternion);d=f(d,h.translate,h.scale,h.skew,h.perspective,h.quaternion);if(!g||!d)return!1;n(l.translate,e.translate,h.translate,p);n(l.skew,e.skew,h.skew,p);n(l.scale,e.scale,h.scale,p);n(l.perspective,e.perspective,h.perspective,p);k(l.quaternion,e.quaternion,h.quaternion,p);m(c,l.translate,l.scale,l.skew,l.perspective,l.quaternion);return!0}},{"gl-mat4/determinant":274,"gl-vec3/lerp":355,"mat4-decompose":449,"mat4-recompose":452,
"quat-slerp":501}],452:[function(a,G,C){var q={identity:a("gl-mat4/identity"),translate:a("gl-mat4/translate"),multiply:a("gl-mat4/multiply"),create:a("gl-mat4/create"),scale:a("gl-mat4/scale"),fromRotationTranslation:a("gl-mat4/fromRotationTranslation")};q.create();var n=q.create();G.exports=function(m,f,b,k,e,h){q.identity(m);q.fromRotationTranslation(m,h,f);m[3]=e[0];m[7]=e[1];m[11]=e[2];m[15]=e[3];q.identity(n);0!==k[2]&&(n[9]=k[2],q.multiply(m,m,n));0!==k[1]&&(n[9]=0,n[8]=k[1],q.multiply(m,m,
n));0!==k[0]&&(n[8]=0,n[4]=k[0],q.multiply(m,m,n));q.scale(m,m,b);return m}},{"gl-mat4/create":273,"gl-mat4/fromRotationTranslation":276,"gl-mat4/identity":277,"gl-mat4/multiply":280,"gl-mat4/scale":287,"gl-mat4/translate":288}],453:[function(a,G,C){G.exports=Math.log2||function(q){return Math.log(q)*Math.LOG2E}},{}],454:[function(a,G,C){function q(p){this._components=p.slice();this._time=[0];this.prevMatrix=p.slice();this.nextMatrix=p.slice();this.computedMatrix=p.slice();this.computedInverse=p.slice();
this.computedEye=[0,0,0];this.computedUp=[0,0,0];this.computedCenter=[0,0,0];this.computedRadius=[0];this._limits=[-Infinity,Infinity]}var n=a("binary-search-bounds"),m=a("mat4-interpolate"),f=a("gl-mat4/invert"),b=a("gl-mat4/rotateX"),k=a("gl-mat4/rotateY"),e=a("gl-mat4/rotateZ"),h=a("gl-mat4/lookAt"),l=a("gl-mat4/translate");a("gl-mat4/scale");var c=a("gl-vec3/normalize"),g=[0,0,0];G.exports=function(p){p=p||{};return new q(p.matrix||[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1])};a=q.prototype;a.recalcMatrix=
function(p){var r=this._time,t=n.le(r,p),w=this.computedMatrix;if(!(0>t)){var x=this._components;if(t===r.length-1)for(var y=16*t,A=0;16>A;++A)w[A]=x[y++];else{var z=r[t+1]-r[t];y=16*t;var F=this.prevMatrix,D=!0;for(A=0;16>A;++A)F[A]=x[y++];var u=this.nextMatrix;for(A=0;16>A;++A)u[A]=x[y++],D=D&&F[A]===u[A];if(1E-6>z||D)for(A=0;16>A;++A)w[A]=F[A];else m(w,F,u,(p-r[t])/z)}A=this.computedUp;A[0]=w[1];A[1]=w[5];A[2]=w[9];c(A,A);A=this.computedInverse;f(A,w);p=this.computedEye;r=A[15];p[0]=A[12]/r;p[1]=
A[13]/r;p[2]=A[14]/r;r=this.computedCenter;t=Math.exp(this.computedRadius[0]);for(A=0;3>A;++A)r[A]=p[A]-w[2+4*A]*t}};a.idle=function(p){if(!(p<this.lastT())){for(var r=this._components,t=r.length-16,w=0;16>w;++w)r.push(r[t++]);this._time.push(p)}};a.flush=function(p){p=n.gt(this._time,p)-2;0>p||(this._time.splice(0,p),this._components.splice(0,16*p))};a.lastT=function(){return this._time[this._time.length-1]};a.lookAt=function(p,r,t,w){this.recalcMatrix(p);r=r||this.computedEye;t=t||g;w=w||this.computedUp;
this.setMatrix(p,h(this.computedMatrix,r,t,w));for(w=p=0;3>w;++w)p+=Math.pow(t[w]-r[w],2);p=Math.log(Math.sqrt(p));this.computedRadius[0]=p};a.rotate=function(p,r,t,w){this.recalcMatrix(p);var x=this.computedInverse;r&&k(x,x,r);t&&b(x,x,t);w&&e(x,x,w);this.setMatrix(p,f(this.computedMatrix,x))};var d=[0,0,0];a.pan=function(p,r,t,w){d[0]=-(r||0);d[1]=-(t||0);d[2]=-(w||0);this.recalcMatrix(p);r=this.computedInverse;l(r,r,d);this.setMatrix(p,f(r,r))};a.translate=function(p,r,t,w){d[0]=r||0;d[1]=t||0;
d[2]=w||0;this.recalcMatrix(p);r=this.computedMatrix;l(r,r,d);this.setMatrix(p,r)};a.setMatrix=function(p,r){if(!(p<this.lastT()))for(this._time.push(p),p=0;16>p;++p)this._components.push(r[p])};a.setDistance=function(p,r){this.computedRadius[0]=r};a.setDistanceLimits=function(p,r){var t=this._limits;t[0]=p;t[1]=r};a.getDistanceLimits=function(p){var r=this._limits;return p?(p[0]=r[0],p[1]=r[1],p):r}},{"binary-search-bounds":455,"gl-mat4/invert":278,"gl-mat4/lookAt":279,"gl-mat4/rotateX":284,"gl-mat4/rotateY":285,
"gl-mat4/rotateZ":286,"gl-mat4/scale":287,"gl-mat4/translate":288,"gl-vec3/normalize":361,"mat4-interpolate":451}],455:[function(a,G,C){arguments[4][243][0].apply(C,arguments)},{dup:243}],456:[function(a,G,C){G.exports=function(n){var m=n.length;if(3>m){for(var f=Array(m),b=0;b<m;++b)f[b]=b;return 2===m&&n[0][0]===n[1][0]&&n[0][1]===n[1][1]?[0]:f}f=Array(m);for(b=0;b<m;++b)f[b]=b;f.sort(function(g,d){var p=n[g][0]-n[d][0];return p?p:n[g][1]-n[d][1]});var k=[f[0],f[1]],e=[f[0],f[1]];for(b=2;b<m;++b){for(var h=
f[b],l=n[h],c=k.length;1<c&&0>=q(n[k[c-2]],n[k[c-1]],l);)--c,k.pop();k.push(h);for(c=e.length;1<c&&0<=q(n[e[c-2]],n[e[c-1]],l);)--c,e.pop();e.push(h)}f=Array(e.length+k.length-2);b=m=0;for(h=k.length;b<h;++b)f[m++]=k[b];for(b=e.length-2;0<b;--b)f[m++]=e[b];return f};var q=a("robust-orientation")[3]},{"robust-orientation":520}],457:[function(a,G,C){G.exports=function(n,m){function f(A){var z=!1;"altKey"in A&&(z=z||A.altKey!==w.alt,w.alt=!!A.altKey);"shiftKey"in A&&(z=z||A.shiftKey!==w.shift,w.shift=
!!A.shiftKey);"ctrlKey"in A&&(z=z||A.ctrlKey!==w.control,w.control=!!A.ctrlKey);"metaKey"in A&&(z=z||A.metaKey!==w.meta,w.meta=!!A.metaKey);return z}function b(A,z){var F=q.x(z),D=q.y(z);"buttons"in z&&(A=z.buttons|0);if(A!==p||F!==r||D!==t||f(z))p=A|0,r=F||0,t=D||0,m&&m(p,r,t,w)}function k(A){b(0,A)}function e(){if(p||r||t||w.shift||w.alt||w.meta||w.control)p=r=t=0,w.shift=w.alt=w.control=w.meta=!1,m&&m(0,0,0,w)}function h(A){f(A)&&m&&m(p,r,t,w)}function l(A){0===q.buttons(A)?b(0,A):b(p,A)}function c(A){b(p|
q.buttons(A),A)}function g(A){b(p&~q.buttons(A),A)}function d(){x||(x=!0,n.addEventListener("mousemove",l),n.addEventListener("mousedown",c),n.addEventListener("mouseup",g),n.addEventListener("mouseleave",k),n.addEventListener("mouseenter",k),n.addEventListener("mouseout",k),n.addEventListener("mouseover",k),n.addEventListener("blur",e),n.addEventListener("keyup",h),n.addEventListener("keydown",h),n.addEventListener("keypress",h),n!==window&&(window.addEventListener("blur",e),window.addEventListener("keyup",
h),window.addEventListener("keydown",h),window.addEventListener("keypress",h)))}m||(m=n,n=window);var p=0,r=0,t=0,w={shift:!1,alt:!1,control:!1,meta:!1},x=!1;d();var y={element:n};Object.defineProperties(y,{enabled:{get:function(){return x},set:function(A){A?d():x&&(x=!1,n.removeEventListener("mousemove",l),n.removeEventListener("mousedown",c),n.removeEventListener("mouseup",g),n.removeEventListener("mouseleave",k),n.removeEventListener("mouseenter",k),n.removeEventListener("mouseout",k),n.removeEventListener("mouseover",
k),n.removeEventListener("blur",e),n.removeEventListener("keyup",h),n.removeEventListener("keydown",h),n.removeEventListener("keypress",h),n!==window&&(window.removeEventListener("blur",e),window.removeEventListener("keyup",h),window.removeEventListener("keydown",h),window.removeEventListener("keypress",h)))},enumerable:!0},buttons:{get:function(){return p},enumerable:!0},x:{get:function(){return r},enumerable:!0},y:{get:function(){return t},enumerable:!0},mods:{get:function(){return w},enumerable:!0}});
return y};var q=a("mouse-event")},{"mouse-event":459}],458:[function(a,G,C){var q={left:0,top:0};G.exports=function(n,m,f){m=m||n.currentTarget||n.srcElement;Array.isArray(f)||(f=[0,0]);var b=n.clientX||0;n=n.clientY||0;m=m===window||m===document||m===document.body?q:m.getBoundingClientRect();f[0]=b-m.left;f[1]=n-m.top;return f}},{}],459:[function(a,G,C){function q(n){return n.target||n.srcElement||window}C.buttons=function(n){if("object"===typeof n){if("buttons"in n)return n.buttons;if("which"in
n){n=n.which;if(2===n)return 4;if(3===n)return 2;if(0<n)return 1<<n-1}else if("button"in n){n=n.button;if(1===n)return 4;if(2===n)return 2;if(0<=n)return 1<<n}}return 0};C.element=q;C.x=function(n){if("object"===typeof n){if("offsetX"in n)return n.offsetX;var m=q(n).getBoundingClientRect();return n.clientX-m.left}return 0};C.y=function(n){if("object"===typeof n){if("offsetY"in n)return n.offsetY;var m=q(n).getBoundingClientRect();return n.clientY-m.top}return 0}},{}],460:[function(a,G,C){var q=a("to-px");
G.exports=function(n,m,f){"function"===typeof n&&(f=!!m,m=n,n=window);var b=q("ex",n),k=function(e){f&&e.preventDefault();var h=e.deltaX||0,l=e.deltaY||0,c=e.deltaZ||0,g=1;switch(e.deltaMode){case 1:g=b;break;case 2:g=window.innerHeight}h*=g;l*=g;c*=g;if(h||l||c)return m(h,l,c,e)};n.addEventListener("wheel",k);return k}},{"to-px":550}],461:[function(a,G,C){function q(c,g,d){for(var p=0,r=0;r<c;++r)g&1<<r&&(p|=1<<d[r]);return p}function n(c,g,d,p,r,t){function w(L,Q){u.push("for(","i"+r[L],"\x3d",
Q,";","i"+r[L],"\x3c","s"+r[L],";","++","i"+r[L],"){")}function x(L){for(var Q=0;Q<z;++Q)u.push("p"+Q,"+\x3d","u"+Q+"_"+r[L],";");u.push("}")}function y(){for(var L=1;L<1<<F;++L)u.push(l,"\x3d","e"+L,";","e"+L,"\x3d","y"+L,";","y"+L,"\x3d",l,";")}function A(L,Q){if(0>L){for(var S=0;S<z;++S)t[S]?u.push("c"+S+"_0","\x3d","d"+S,".get(","p"+S,");"):u.push("c"+S+"_0","\x3d","d"+S,"[","p"+S,"];");L=[];for(S=0;S<z;++S)L.push("c"+S+"_0");for(S=0;S<p;++S)L.push("x"+S);u.push("b0","\x3d",b,"[",h,"]\x3dphase(",
L.join(),");");for(L=1;L<1<<F;++L)u.push("b"+L,"\x3d",b,"[",h,"+","e"+L,"];");S=[];for(L=1;L<1<<F;++L)S.push("(b0!\x3d\x3db"+L+")");u.push("if(",S.join("||"),"){");var R=[];for(S=0;S<F;++S)R.push("i"+S);for(S=0;S<z;++S)for(R.push("c"+S+"_0"),L=1;L<1<<F;++L)t[S]?u.push("c"+S+"_"+L,"\x3d","d"+S,".get(","p"+S,"+","d"+S+"_"+L,");"):u.push("c"+S+"_"+L,"\x3d","d"+S,"[","p"+S,"+","d"+S+"_"+L,"];"),R.push("c"+S+"_"+L);for(S=0;S<1<<F;++S)R.push("b"+S);for(S=0;S<p;++S)R.push("x"+S);u.push("vertex(",R.join(),
");","v0","\x3d",f,"[",h,"]\x3d",k,"++;");S=(1<<F)-1;R="b"+S;for(L=0;L<F;++L)if(0===(Q&~(1<<L))){for(var O=S^1<<L,T="b"+O,V=[],X=O;0<X;X=X-1&O)V.push(f+"["+h+"+e"+X+"]");V.push("v0");for(X=0;X<z;++X)L&1?V.push("c"+X+"_"+S,"c"+X+"_"+O):V.push("c"+X+"_"+O,"c"+X+"_"+S);L&1?V.push(R,T):V.push(T,R);for(X=0;X<p;++X)V.push("x"+X);u.push("if(",R,"!\x3d\x3d",T,"){","face(",V.join(),")}")}u.push("}",h,"+\x3d1;")}else{for(S=L-1;0<=S;--S)w(S,0);R=[];for(S=0;S<z;++S)t[S]?R.push("d"+S+".get(p"+S+")"):R.push("d"+
S+"[p"+S+"]");for(S=0;S<p;++S)R.push("x"+S);u.push(b,"[",h,"++]\x3dphase(",R.join(),");");for(S=0;S<L;++S)x(S);for(S=0;S<z;++S)u.push("p"+S,"+\x3d","u"+S+"_"+r[L],";");u.push("if(","s"+r[L],"\x3e0){","i"+r[L],"\x3d1;");A(L-1,Q|1<<r[L]);for(S=0;S<z;++S)u.push("p"+S,"+\x3d","u"+S+"_"+r[L],";");L===F-1&&(u.push(h,"\x3d0;"),y());w(L,2);A(L-1,Q);L===F-1&&(u.push("if(","i"+r[F-1],"\x261){",h,"\x3d0;}"),y());x(L);u.push("}")}}var z=t.length,F=r.length;if(2>F)throw Error("ndarray-extract-contour: Dimension must be at least 2");
for(var D="extractContour"+r.join("_"),u=[],B=[],I=[],J=0;J<z;++J)I.push("a"+J);for(J=0;J<p;++J)I.push("x"+J);for(J=0;J<F;++J)B.push("s"+J+"\x3da0.shape["+J+"]|0");for(J=0;J<z;++J){B.push("d"+J+"\x3da"+J+".data","o"+J+"\x3da"+J+".offset|0");for(var N=0;N<F;++N)B.push("t"+J+"_"+N+"\x3da"+J+".stride["+N+"]|0")}for(J=0;J<z;++J)for(B.push("p"+J+"\x3do"+J),B.push("c"+J+"_0"),N=1;N<1<<F;++N){for(var M=[],E=0;E<F;++E)N&1<<E&&M.push("-t"+(J+"_"+E));B.push("d"+J+"_"+N+"\x3d("+M.join("")+")|0");B.push("c"+
J+"_"+N+"\x3d0")}for(J=0;J<z;++J)for(N=0;N<F;++N)E=["t"+J+"_"+r[N]],0<N&&E.push("t"+J+"_"+r[N-1]+"*s"+r[N-1]),B.push("u"+J+"_"+r[N]+"\x3d("+E.join("-")+")|0");for(J=0;J<F;++J)B.push("i"+J+"\x3d0");B.push(k+"\x3d0");N=["2"];for(J=F-2;0<=J;--J)N.push("s"+r[J]);B.push(e+"\x3d("+N.join("*")+")|0",b+"\x3dmallocUint32("+e+")",f+"\x3dmallocUint32("+e+")",h+"\x3d0");B.push("b0\x3d0");for(N=1;N<1<<F;++N){J=[];M=[];for(E=0;E<F;++E)N&1<<E&&(0===M.length?J.push("1"):J.unshift(M.join("*"))),M.push("s"+r[E]);E=
"";0>J[0].indexOf("s"+r[F-2])&&(E="-");M=q(F,N,r);B.push("e"+M+"\x3d(-"+J.join("-")+")|0","y"+M+"\x3d("+E+J.join("-")+")|0","b"+M+"\x3d0")}B.push("v0\x3d0",l+"\x3d0");A(F-1,0);u.push("freeUint32(",f,");freeUint32(",b,");");D=["'use strict';function ",D,"(",I.join(),"){var ",B.join(),";",u.join(""),"}return ",D].join("");return(new Function("vertex","face","phase","mallocUint32","freeUint32",D))(c,g,d,m.mallocUint32,m.freeUint32)}var m=a("typedarray-pool");G.exports=function(c){function g(y){throw Error("ndarray-extract-contour: "+
y);}"object"!==typeof c&&g("Must specify arguments");var d=c.order;Array.isArray(d)||g("Must specify order");var p=c.arrayArguments||1;1>p&&g("Must have at least one array argument");var r=c.scalarArguments||0;0>r&&g("Scalar arg count must be \x3e 0");"function"!==typeof c.vertex&&g("Must specify vertex creation function");"function"!==typeof c.cell&&g("Must specify cell creation function");"function"!==typeof c.phase&&g("Must specify phase function");for(var t=c.getters||[],w=Array(p),x=0;x<p;++x)0<=
t.indexOf(x)?w[x]=!0:w[x]=!1;return n(c.vertex,c.cell,c.phase,r,d,w)};var f="V",b="P",k="N",e="Q",h="X",l="T"},{"typedarray-pool":567}],462:[function(a,G,C){function q(l){if(l in f)return f[l];for(var c=[],g=0;g<l;++g)c.push("out",g,"s\x3d0.5*(inp",g,"l-inp",g,"r);");var d=["array"],p=["junk"];for(g=0;g<l;++g){d.push("array");p.push("out"+g+"s");var r=n(l);r[g]=-1;d.push({array:0,offset:r.slice()});r[g]=1;d.push({array:0,offset:r.slice()});p.push("inp"+g+"l","inp"+g+"r")}return f[l]=m({args:d,pre:k,
post:k,body:{body:c.join(""),args:p.map(function(t){return{name:t,lvalue:0===t.indexOf("out"),rvalue:0===t.indexOf("inp"),count:"junk"!==t|0}}),thisVars:[],localVars:[]},funcName:"fdTemplate"+l})}G.exports=function(l,c,g){if(Array.isArray(g)){if(g.length!==c.dimension)throw Error("ndarray-gradient: invalid boundary conditions");}else g="string"===typeof g?n(c.dimension,g):n(c.dimension,"clamp");if(l.dimension!==c.dimension+1)throw Error("ndarray-gradient: output dimension must be +1 input dimension");
if(l.shape[c.dimension]!==c.dimension)throw Error("ndarray-gradient: output shape must match input shape");for(var d=0;d<c.dimension;++d)if(l.shape[d]!==c.shape[d])throw Error("ndarray-gradient: shape mismatch");if(0===c.size)return l;if(0>=c.dimension)return l.set(0),l;var p=g;g=p.join();d=b[g];if(!d){d=p.length;for(var r=["function gradient(dst,src){var s\x3dsrc.shape.slice();"],t=0;t<1<<d;++t){for(var w=[],x=0;x<d;++x)t&1<<x&&w.push(x+1);for(var y=0;y<1<<w.length;++y){var A=w.slice();for(x=0;x<
w.length;++x)y&1<<x&&(A[x]=-A[x]);x=A;A=d-x.length;for(var z=[],F=[],D=[],u=0;u<d;++u)0<=x.indexOf(u+1)?D.push("0"):0<=x.indexOf(-(u+1))?D.push("s["+u+"]-1"):(D.push("-1"),z.push("1"),F.push("s["+u+"]-2"));F=".lo("+z.join()+").hi("+F.join()+")";0===z.length&&(F="");if(0<A){r.push("if(1");for(u=0;u<d;++u)0<=x.indexOf(u+1)||0<=x.indexOf(-(u+1))||r.push("\x26\x26s[",u,"]\x3e2");r.push("){grad",A,"(src.pick(",D.join(),")",F);for(u=0;u<d;++u)0<=x.indexOf(u+1)||0<=x.indexOf(-(u+1))||r.push(",dst.pick(",
D.join(),",",u,")",F);r.push(");")}for(u=0;u<x.length;++u){z=Math.abs(x[u])-1;var B="dst.pick("+D.join()+","+z+")"+F;switch(p[z]){case "clamp":var I=D.slice(),J=D.slice();0>x[u]?I[z]="s["+z+"]-2":J[z]="1";0===A?r.push("if(s[",z,"]\x3e1){dst.set(",D.join(),",",z,",0.5*(src.get(",I.join(),")-src.get(",J.join(),")))}else{dst.set(",D.join(),",",z,",0)};"):r.push("if(s[",z,"]\x3e1){diff(",B,",src.pick(",I.join(),")",F,",src.pick(",J.join(),")",F,");}else{zero(",B,");};");break;case "mirror":0===A?r.push("dst.set(",
D.join(),",",z,",0);"):r.push("zero(",B,");");break;case "wrap":I=D.slice();J=D.slice();0>x[u]?(I[z]="s["+z+"]-2",J[z]="0"):(I[z]="s["+z+"]-1",J[z]="1");0===A?r.push("if(s[",z,"]\x3e2){dst.set(",D.join(),",",z,",0.5*(src.get(",I.join(),")-src.get(",J.join(),")))}else{dst.set(",D.join(),",",z,",0)};"):r.push("if(s[",z,"]\x3e2){diff(",B,",src.pick(",I.join(),")",F,",src.pick(",J.join(),")",F,");}else{zero(",B,");};");break;default:throw Error("ndarray-gradient: Invalid boundary condition");}}0<A&&r.push("};")}}r.push("return dst;};return gradient");
p=["diff","zero"];w=[e,h];for(t=1;t<=d;++t)p.push("grad"+t),w.push(q(t));p.push(r.join(""));d=Function.apply(void 0,p).apply(void 0,w);f[g]=d}return d(l,c)};var n=a("dup"),m=a("cwise-compiler"),f={},b={},k={body:"",args:[],thisVars:[],localVars:[]},e=m({args:["array","array","array"],pre:k,post:k,body:{args:[{name:"out",lvalue:!0,rvalue:!1,count:1},{name:"left",lvalue:!1,rvalue:!0,count:1},{name:"right",lvalue:!1,rvalue:!0,count:1}],body:"out\x3d0.5*(left-right)",thisVars:[],localVars:[]},funcName:"cdiff"}),
h=m({args:["array"],pre:k,post:k,body:{args:[{name:"out",lvalue:!0,rvalue:!1,count:1}],body:"out\x3d0",thisVars:[],localVars:[]},funcName:"zero"})},{"cwise-compiler":151,dup:176}],463:[function(a,G,C){function q(b,k){var e=Math.floor(k);k-=e;var h=0<=e+1&&e+1<b.shape[0],l=0<=e&&e<b.shape[0]?+b.get(e):0;b=h?+b.get(e+1):0;return(1-k)*l+k*b}function n(b,k,e){var h=Math.floor(k);k-=h;var l=0<=h&&h<b.shape[0],c=0<=h+1&&h+1<b.shape[0],g=Math.floor(e);e-=g;var d=0<=g&&g<b.shape[1],p=0<=g+1&&g+1<b.shape[1],
r=l&&d?b.get(h,g):0;l=l&&p?b.get(h,g+1):0;d=c&&d?b.get(h+1,g):0;b=c&&p?b.get(h+1,g+1):0;return(1-e)*((1-k)*r+k*d)+e*((1-k)*l+k*b)}function m(b,k,e,h){var l=Math.floor(k);k-=l;var c=0<=l&&l<b.shape[0],g=0<=l+1&&l+1<b.shape[0],d=Math.floor(e);e-=d;var p=0<=d&&d<b.shape[1],r=0<=d+1&&d+1<b.shape[1],t=Math.floor(h);h-=t;var w=0<=t&&t<b.shape[2],x=0<=t+1&&t+1<b.shape[2],y=c&&p&&w?b.get(l,d,t):0,A=c&&r&&w?b.get(l,d+1,t):0,z=g&&p&&w?b.get(l+1,d,t):0;w=g&&r&&w?b.get(l+1,d+1,t):0;var F=c&&p&&x?b.get(l,d,t+
1):0;c=c&&r&&x?b.get(l,d+1,t+1):0;p=g&&p&&x?b.get(l+1,d,t+1):0;b=g&&r&&x?b.get(l+1,d+1,t+1):0;return(1-h)*((1-e)*((1-k)*y+k*z)+e*((1-k)*A+k*w))+h*((1-e)*((1-k)*F+k*p)+e*((1-k)*c+k*b))}function f(b){var k=b.shape.length|0,e=Array(k),h=Array(k),l=Array(k),c=Array(k),g;for(g=0;g<k;++g){var d=+arguments[g+1];e[g]=Math.floor(d);h[g]=d-e[g];l[g]=0<=e[g]&&e[g]<b.shape[g];c[g]=0<=e[g]+1&&e[g]+1<b.shape[g]}d=0;var p;g=0;a:for(;g<1<<k;++g){var r=1;var t=b.offset;for(p=0;p<k;++p)if(g&1<<p){if(!c[p])continue a;
r*=h[p];t+=b.stride[p]*(e[p]+1)}else{if(!l[p])continue a;r*=1-h[p];t+=b.stride[p]*e[p]}d+=r*b.data[t]}return d}G.exports=function(b,k,e,h){switch(b.shape.length){case 0:return 0;case 1:return q(b,k);case 2:return n(b,k,e);case 3:return m(b,k,e,h);default:return f.apply(void 0,arguments)}};G.exports.d1=q;G.exports.d2=n;G.exports.d3=m},{}],464:[function(a,G,C){function q(g){if(!g)return f;for(var d=0;d<g.args.length;++d){var p=g.args[d];g.args[d]=0===d?{name:p,lvalue:!0,rvalue:!!g.rvalue,count:g.count||
1}:{name:p,lvalue:!1,rvalue:!0,count:1}}g.thisVars||(g.thisVars=[]);g.localVars||(g.localVars=[]);return g}function n(g){for(var d=[],p=0;p<g.args.length;++p)d.push("a"+p);d=new Function("P",["return function ",g.funcName,"_ndarrayops(",d.join(","),") {P(",d.join(","),");return a0}"].join(""));g=m({args:g.args,pre:q(g.pre),body:q(g.body),post:q(g.proc),funcName:g.funcName});return d(g)}var m=a("cwise-compiler"),f={body:"",args:[],thisVars:[],localVars:[]},b={add:"+",sub:"-",mul:"*",div:"/",mod:"%",
band:"\x26",bor:"|",bxor:"^",lshift:"\x3c\x3c",rshift:"\x3e\x3e",rrshift:"\x3e\x3e\x3e"};(function(){for(var g in b){var d=b[g];C[g]=n({args:["array","array","array"],body:{args:["a","b","c"],body:"a\x3db"+d+"c"},funcName:g});C[g+"eq"]=n({args:["array","array"],body:{args:["a","b"],body:"a"+d+"\x3db"},rvalue:!0,funcName:g+"eq"});C[g+"s"]=n({args:["array","array","scalar"],body:{args:["a","b","s"],body:"a\x3db"+d+"s"},funcName:g+"s"});C[g+"seq"]=n({args:["array","scalar"],body:{args:["a","s"],body:"a"+
d+"\x3ds"},rvalue:!0,funcName:g+"seq"})}})();var k={not:"!",bnot:"~",neg:"-",recip:"1.0/"};(function(){for(var g in k){var d=k[g];C[g]=n({args:["array","array"],body:{args:["a","b"],body:"a\x3d"+d+"b"},funcName:g});C[g+"eq"]=n({args:["array"],body:{args:["a"],body:"a\x3d"+d+"a"},rvalue:!0,count:2,funcName:g+"eq"})}})();var e={and:"\x26\x26",or:"||",eq:"\x3d\x3d\x3d",neq:"!\x3d\x3d",lt:"\x3c",gt:"\x3e",leq:"\x3c\x3d",geq:"\x3e\x3d"};(function(){for(var g in e){var d=e[g];C[g]=n({args:["array","array",
"array"],body:{args:["a","b","c"],body:"a\x3db"+d+"c"},funcName:g});C[g+"s"]=n({args:["array","array","scalar"],body:{args:["a","b","s"],body:"a\x3db"+d+"s"},funcName:g+"s"});C[g+"eq"]=n({args:["array","array"],body:{args:["a","b"],body:"a\x3da"+d+"b"},rvalue:!0,count:2,funcName:g+"eq"});C[g+"seq"]=n({args:["array","scalar"],body:{args:["a","s"],body:"a\x3da"+d+"s"},rvalue:!0,count:2,funcName:g+"seq"})}})();var h="abs acos asin atan ceil cos exp floor log round sin sqrt tan".split(" ");(function(){for(var g=
0;g<h.length;++g){var d=h[g];C[d]=n({args:["array","array"],pre:{args:[],body:"this_f\x3dMath."+d,thisVars:["this_f"]},body:{args:["a","b"],body:"a\x3dthis_f(b)",thisVars:["this_f"]},funcName:d});C[d+"eq"]=n({args:["array"],pre:{args:[],body:"this_f\x3dMath."+d,thisVars:["this_f"]},body:{args:["a"],body:"a\x3dthis_f(a)",thisVars:["this_f"]},rvalue:!0,count:2,funcName:d+"eq"})}})();var l=["max","min","atan2","pow"];(function(){for(var g=0;g<l.length;++g){var d=l[g];C[d]=n({args:["array","array","array"],
pre:{args:[],body:"this_f\x3dMath."+d,thisVars:["this_f"]},body:{args:["a","b","c"],body:"a\x3dthis_f(b,c)",thisVars:["this_f"]},funcName:d});C[d+"s"]=n({args:["array","array","scalar"],pre:{args:[],body:"this_f\x3dMath."+d,thisVars:["this_f"]},body:{args:["a","b","c"],body:"a\x3dthis_f(b,c)",thisVars:["this_f"]},funcName:d+"s"});C[d+"eq"]=n({args:["array","array"],pre:{args:[],body:"this_f\x3dMath."+d,thisVars:["this_f"]},body:{args:["a","b"],body:"a\x3dthis_f(a,b)",thisVars:["this_f"]},rvalue:!0,
count:2,funcName:d+"eq"});C[d+"seq"]=n({args:["array","scalar"],pre:{args:[],body:"this_f\x3dMath."+d,thisVars:["this_f"]},body:{args:["a","b"],body:"a\x3dthis_f(a,b)",thisVars:["this_f"]},rvalue:!0,count:2,funcName:d+"seq"})}})();var c=["atan2","pow"];(function(){for(var g=0;g<c.length;++g){var d=c[g];C[d+"op"]=n({args:["array","array","array"],pre:{args:[],body:"this_f\x3dMath."+d,thisVars:["this_f"]},body:{args:["a","b","c"],body:"a\x3dthis_f(c,b)",thisVars:["this_f"]},funcName:d+"op"});C[d+"ops"]=
n({args:["array","array","scalar"],pre:{args:[],body:"this_f\x3dMath."+d,thisVars:["this_f"]},body:{args:["a","b","c"],body:"a\x3dthis_f(c,b)",thisVars:["this_f"]},funcName:d+"ops"});C[d+"opeq"]=n({args:["array","array"],pre:{args:[],body:"this_f\x3dMath."+d,thisVars:["this_f"]},body:{args:["a","b"],body:"a\x3dthis_f(b,a)",thisVars:["this_f"]},rvalue:!0,count:2,funcName:d+"opeq"});C[d+"opseq"]=n({args:["array","scalar"],pre:{args:[],body:"this_f\x3dMath."+d,thisVars:["this_f"]},body:{args:["a","b"],
body:"a\x3dthis_f(b,a)",thisVars:["this_f"]},rvalue:!0,count:2,funcName:d+"opseq"})}})();C.any=m({args:["array"],pre:f,body:{args:[{name:"a",lvalue:!1,rvalue:!0,count:1}],body:"if(a){return true}",localVars:[],thisVars:[]},post:{args:[],localVars:[],thisVars:[],body:"return false"},funcName:"any"});C.all=m({args:["array"],pre:f,body:{args:[{name:"x",lvalue:!1,rvalue:!0,count:1}],body:"if(!x){return false}",localVars:[],thisVars:[]},post:{args:[],localVars:[],thisVars:[],body:"return true"},funcName:"all"});
C.sum=m({args:["array"],pre:{args:[],localVars:[],thisVars:["this_s"],body:"this_s\x3d0"},body:{args:[{name:"a",lvalue:!1,rvalue:!0,count:1}],body:"this_s+\x3da",localVars:[],thisVars:["this_s"]},post:{args:[],localVars:[],thisVars:["this_s"],body:"return this_s"},funcName:"sum"});C.prod=m({args:["array"],pre:{args:[],localVars:[],thisVars:["this_s"],body:"this_s\x3d1"},body:{args:[{name:"a",lvalue:!1,rvalue:!0,count:1}],body:"this_s*\x3da",localVars:[],thisVars:["this_s"]},post:{args:[],localVars:[],
thisVars:["this_s"],body:"return this_s"},funcName:"prod"});C.norm2squared=m({args:["array"],pre:{args:[],localVars:[],thisVars:["this_s"],body:"this_s\x3d0"},body:{args:[{name:"a",lvalue:!1,rvalue:!0,count:2}],body:"this_s+\x3da*a",localVars:[],thisVars:["this_s"]},post:{args:[],localVars:[],thisVars:["this_s"],body:"return this_s"},funcName:"norm2squared"});C.norm2=m({args:["array"],pre:{args:[],localVars:[],thisVars:["this_s"],body:"this_s\x3d0"},body:{args:[{name:"a",lvalue:!1,rvalue:!0,count:2}],
body:"this_s+\x3da*a",localVars:[],thisVars:["this_s"]},post:{args:[],localVars:[],thisVars:["this_s"],body:"return Math.sqrt(this_s)"},funcName:"norm2"});C.norminf=m({args:["array"],pre:{args:[],localVars:[],thisVars:["this_s"],body:"this_s\x3d0"},body:{args:[{name:"a",lvalue:!1,rvalue:!0,count:4}],body:"if(-a\x3ethis_s){this_s\x3d-a}else if(a\x3ethis_s){this_s\x3da}",localVars:[],thisVars:["this_s"]},post:{args:[],localVars:[],thisVars:["this_s"],body:"return this_s"},funcName:"norminf"});C.norm1=
m({args:["array"],pre:{args:[],localVars:[],thisVars:["this_s"],body:"this_s\x3d0"},body:{args:[{name:"a",lvalue:!1,rvalue:!0,count:3}],body:"this_s+\x3da\x3c0?-a:a",localVars:[],thisVars:["this_s"]},post:{args:[],localVars:[],thisVars:["this_s"],body:"return this_s"},funcName:"norm1"});C.sup=m({args:["array"],pre:{body:"this_h\x3d-Infinity",args:[],thisVars:["this_h"],localVars:[]},body:{body:"if(_inline_1_arg0_\x3ethis_h)this_h\x3d_inline_1_arg0_",args:[{name:"_inline_1_arg0_",lvalue:!1,rvalue:!0,
count:2}],thisVars:["this_h"],localVars:[]},post:{body:"return this_h",args:[],thisVars:["this_h"],localVars:[]}});C.inf=m({args:["array"],pre:{body:"this_h\x3dInfinity",args:[],thisVars:["this_h"],localVars:[]},body:{body:"if(_inline_1_arg0_\x3cthis_h)this_h\x3d_inline_1_arg0_",args:[{name:"_inline_1_arg0_",lvalue:!1,rvalue:!0,count:2}],thisVars:["this_h"],localVars:[]},post:{body:"return this_h",args:[],thisVars:["this_h"],localVars:[]}});C.argmin=m({args:["index","array","shape"],pre:{body:"{this_v\x3dInfinity;this_i\x3d_inline_0_arg2_.slice(0)}",
args:[{name:"_inline_0_arg0_",lvalue:!1,rvalue:!1,count:0},{name:"_inline_0_arg1_",lvalue:!1,rvalue:!1,count:0},{name:"_inline_0_arg2_",lvalue:!1,rvalue:!0,count:1}],thisVars:["this_i","this_v"],localVars:[]},body:{body:"{if(_inline_1_arg1_\x3cthis_v){this_v\x3d_inline_1_arg1_;for(var _inline_1_k\x3d0;_inline_1_k\x3c_inline_1_arg0_.length;++_inline_1_k){this_i[_inline_1_k]\x3d_inline_1_arg0_[_inline_1_k]}}}",args:[{name:"_inline_1_arg0_",lvalue:!1,rvalue:!0,count:2},{name:"_inline_1_arg1_",lvalue:!1,
rvalue:!0,count:2}],thisVars:["this_i","this_v"],localVars:["_inline_1_k"]},post:{body:"{return this_i}",args:[],thisVars:["this_i"],localVars:[]}});C.argmax=m({args:["index","array","shape"],pre:{body:"{this_v\x3d-Infinity;this_i\x3d_inline_0_arg2_.slice(0)}",args:[{name:"_inline_0_arg0_",lvalue:!1,rvalue:!1,count:0},{name:"_inline_0_arg1_",lvalue:!1,rvalue:!1,count:0},{name:"_inline_0_arg2_",lvalue:!1,rvalue:!0,count:1}],thisVars:["this_i","this_v"],localVars:[]},body:{body:"{if(_inline_1_arg1_\x3ethis_v){this_v\x3d_inline_1_arg1_;for(var _inline_1_k\x3d0;_inline_1_k\x3c_inline_1_arg0_.length;++_inline_1_k){this_i[_inline_1_k]\x3d_inline_1_arg0_[_inline_1_k]}}}",
args:[{name:"_inline_1_arg0_",lvalue:!1,rvalue:!0,count:2},{name:"_inline_1_arg1_",lvalue:!1,rvalue:!0,count:2}],thisVars:["this_i","this_v"],localVars:["_inline_1_k"]},post:{body:"{return this_i}",args:[],thisVars:["this_i"],localVars:[]}});C.random=n({args:["array"],pre:{args:[],body:"this_f\x3dMath.random",thisVars:["this_f"]},body:{args:["a"],body:"a\x3dthis_f()",thisVars:["this_f"]},funcName:"random"});C.assign=n({args:["array","array"],body:{args:["a","b"],body:"a\x3db"},funcName:"assign"});
C.assigns=n({args:["array","scalar"],body:{args:["a","b"],body:"a\x3db"},funcName:"assigns"});C.equals=m({args:["array","array"],pre:f,body:{args:[{name:"x",lvalue:!1,rvalue:!0,count:1},{name:"y",lvalue:!1,rvalue:!0,count:1}],body:"if(x!\x3d\x3dy){return false}",localVars:[],thisVars:[]},post:{args:[],localVars:[],thisVars:[],body:"return true"},funcName:"equals"})},{"cwise-compiler":151}],465:[function(a,G,C){var q=a("ndarray"),n=a("./doConvert.js");G.exports=function(m,f){for(var b=[],k=m,e=1;Array.isArray(k);)b.push(k.length),
e*=k.length,k=k[0];if(0===b.length)return q();f||(f=q(new Float64Array(e),b));n(f,m);return f}},{"./doConvert.js":466,ndarray:469}],466:[function(a,G,C){G.exports=a("cwise-compiler")({args:["array","scalar","index"],pre:{body:"{}",args:[],thisVars:[],localVars:[]},body:{body:"{\nvar _inline_1_v\x3d_inline_1_arg1_,_inline_1_i\nfor(_inline_1_i\x3d0;_inline_1_i\x3c_inline_1_arg2_.length-1;++_inline_1_i) {\n_inline_1_v\x3d_inline_1_v[_inline_1_arg2_[_inline_1_i]]\n}\n_inline_1_arg0_\x3d_inline_1_v[_inline_1_arg2_[_inline_1_arg2_.length-1]]\n}",
args:[{name:"_inline_1_arg0_",lvalue:!0,rvalue:!1,count:1},{name:"_inline_1_arg1_",lvalue:!1,rvalue:!0,count:1},{name:"_inline_1_arg2_",lvalue:!1,rvalue:!0,count:4}],thisVars:[],localVars:["_inline_1_i","_inline_1_v"]},post:{body:"{}",args:[],thisVars:[],localVars:[]},funcName:"convert",blockSize:64})},{"cwise-compiler":151}],467:[function(a,G,C){function q(k){switch(k){case "uint8":return[b.mallocUint8,b.freeUint8];case "uint16":return[b.mallocUint16,b.freeUint16];case "uint32":return[b.mallocUint32,
b.freeUint32];case "int8":return[b.mallocInt8,b.freeInt8];case "int16":return[b.mallocInt16,b.freeInt16];case "int32":return[b.mallocInt32,b.freeInt32];case "float32":return[b.mallocFloat,b.freeFloat];case "float64":return[b.mallocDouble,b.freeDouble];default:return null}}function n(k){for(var e=[],h=0;h<k;++h)e.push("s"+h);for(h=0;h<k;++h)e.push("n"+h);for(h=1;h<k;++h)e.push("d"+h);for(h=1;h<k;++h)e.push("e"+h);for(h=1;h<k;++h)e.push("f"+h);return e}function m(k,e){function h(x){return"generic"===
e?["data.get(",x,")"].join(""):["data[",x,"]"].join("")}function l(x,y){return"generic"===e?["data.set(",x,",",y,")"].join(""):["data[",x,"]\x3d",y].join("")}var c=["'use strict'"],g=["ndarrayInsertionSort",k.join("d"),e].join(""),d=["left","right","data","offset"].concat(n(k.length)),p=q(e),r=["i,j,cptr,ptr\x3dleft*s0+offset"];if(1<k.length){for(var t=[],w=1;w<k.length;++w)r.push("i"+w),t.push("n"+w);p?r.push("scratch\x3dmalloc("+t.join("*")+")"):r.push("scratch\x3dnew Array("+t.join("*")+")");r.push("dptr",
"sptr","a","b")}else r.push("scratch");c.push(["function ",g,"(",d.join(","),"){var ",r.join(",")].join(""),"for(i\x3dleft+1;i\x3c\x3dright;++i){","j\x3di;ptr+\x3ds0","cptr\x3dptr");if(1<k.length){c.push("dptr\x3d0;sptr\x3dptr");for(w=k.length-1;0<=w;--w)d=k[w],0!==d&&c.push(["for(i",d,"\x3d0;i",d,"\x3cn",d,";++i",d,"){"].join(""));c.push("scratch[dptr++]\x3d",h("sptr"));for(w=0;w<k.length;++w)d=k[w],0!==d&&c.push("sptr+\x3dd"+d,"}");c.push("__g:while(j--\x3eleft){","dptr\x3d0","sptr\x3dcptr-s0");
for(w=1;w<k.length;++w)1===w&&c.push("__l:"),c.push(["for(i",w,"\x3d0;i",w,"\x3cn",w,";++i",w,"){"].join(""));c.push(["a\x3d",h("sptr"),"\nb\x3dscratch[dptr]\nif(a\x3cb){break __g}\nif(a\x3eb){break __l}"].join(""));for(w=k.length-1;1<=w;--w)c.push("sptr+\x3de"+w,"dptr+\x3df"+w,"}");c.push("dptr\x3dcptr;sptr\x3dcptr-s0");for(w=k.length-1;0<=w;--w)d=k[w],0!==d&&c.push(["for(i",d,"\x3d0;i",d,"\x3cn",d,";++i",d,"){"].join(""));c.push(l("dptr",h("sptr")));for(w=0;w<k.length;++w)d=k[w],0!==d&&c.push(["dptr+\x3dd",
d,";sptr+\x3dd",d].join(""),"}");c.push("cptr-\x3ds0\n}");c.push("dptr\x3dcptr;sptr\x3d0");for(w=k.length-1;0<=w;--w)d=k[w],0!==d&&c.push(["for(i",d,"\x3d0;i",d,"\x3cn",d,";++i",d,"){"].join(""));c.push(l("dptr","scratch[sptr++]"));for(w=0;w<k.length;++w)d=k[w],0!==d&&c.push("dptr+\x3dd"+d,"}")}else c.push("scratch\x3d"+h("ptr"),"while((j--\x3eleft)\x26\x26("+h("cptr-s0")+"\x3escratch)){",l("cptr",h("cptr-s0")),"cptr-\x3ds0","}",l("cptr","scratch"));c.push("}");1<k.length&&p&&c.push("free(scratch)");
c.push("} return "+g);if(p)return k=new Function("malloc","free",c.join("\n")),k(p[0],p[1]);k=new Function(c.join("\n"));return k()}function f(k,e,h){function l(Q){return["(offset+",Q,"*s0)"].join("")}function c(Q){return"generic"===e?["data.get(",Q,")"].join(""):["data[",Q,"]"].join("")}function g(Q,S){return"generic"===e?["data.set(",Q,",",S,")"].join(""):["data[",Q,"]\x3d",S].join("")}function d(Q,S,R){if(1===Q.length)B.push("ptr0\x3d"+l(Q[0]));else for(var O=0;O<Q.length;++O)B.push(["b_ptr",O,
"\x3ds0*",Q[O]].join(""));S&&B.push("pivot_ptr\x3d0");B.push("ptr_shift\x3doffset");for(O=k.length-1;0<=O;--O){var T=k[O];0!==T&&B.push(["for(i",T,"\x3d0;i",T,"\x3cn",T,";++i",T,"){"].join(""))}if(1<Q.length)for(O=0;O<Q.length;++O)B.push(["ptr",O,"\x3db_ptr",O,"+ptr_shift"].join(""));B.push(R);S&&B.push("++pivot_ptr");for(O=0;O<k.length;++O)T=k[O],0!==T&&(1<Q.length?B.push("ptr_shift+\x3dd"+T):B.push("ptr0+\x3dd"+T),B.push("}"))}function p(Q,S,R,O){if(1===S.length)B.push("ptr0\x3d"+l(S[0]));else{for(var T=
0;T<S.length;++T)B.push(["b_ptr",T,"\x3ds0*",S[T]].join(""));B.push("ptr_shift\x3doffset")}R&&B.push("pivot_ptr\x3d0");Q&&B.push(Q+":");for(T=1;T<k.length;++T)B.push(["for(i",T,"\x3d0;i",T,"\x3cn",T,";++i",T,"){"].join(""));if(1<S.length)for(T=0;T<S.length;++T)B.push(["ptr",T,"\x3db_ptr",T,"+ptr_shift"].join(""));B.push(O);for(T=k.length-1;1<=T;--T)R&&B.push("pivot_ptr+\x3df"+T),1<S.length?B.push("ptr_shift+\x3de"+T):B.push("ptr0+\x3de"+T),B.push("}")}function r(){1<k.length&&N&&B.push("free(pivot1)",
"free(pivot2)")}function t(Q,S){Q="el"+Q;S="el"+S;if(1<k.length){var R="__l"+ ++M;p(R,[Q,S],!1,["comp\x3d",c("ptr0"),"-",c("ptr1"),"\nif(comp\x3e0){tmp0\x3d",Q,";",Q,"\x3d",S,";",S,"\x3dtmp0;break ",R,"}\nif(comp\x3c0){break ",R,"}"].join(""))}else B.push(["if(",c(l(Q)),"\x3e",c(l(S)),"){tmp0\x3d",Q,";",Q,"\x3d",S,";",S,"\x3dtmp0}"].join(""))}function w(Q,S){1<k.length?d([Q,S],!1,g("ptr0",c("ptr1"))):B.push(g(l(Q),c(l(S))))}function x(Q,S,R){if(1<k.length){var O="__l"+ ++M;p(O,[S],!0,[Q,"\x3d",c("ptr0"),
"-pivot",R,"[pivot_ptr]\nif(",Q,"!\x3d\x3d0){break ",O,"}"].join(""))}else B.push([Q,"\x3d",c(l(S)),"-pivot",R].join(""))}function y(Q,S){1<k.length?d([Q,S],!1,["tmp\x3d",c("ptr0"),"\n",g("ptr0",c("ptr1")),"\n",g("ptr1","tmp")].join("")):B.push(["ptr0\x3d",l(Q),"\nptr1\x3d",l(S),"\ntmp\x3d",c("ptr0"),"\n",g("ptr0",c("ptr1")),"\n",g("ptr1","tmp")].join(""))}function A(Q,S,R){1<k.length?(d([Q,S,R],!1,["tmp\x3d",c("ptr0"),"\n",g("ptr0",c("ptr1")),"\n",g("ptr1",c("ptr2")),"\n",g("ptr2","tmp")].join("")),
B.push("++"+S,"--"+R)):B.push(["ptr0\x3d",l(Q),"\nptr1\x3d",l(S),"\nptr2\x3d",l(R),"\n++",S,"\n--",R,"\ntmp\x3d",c("ptr0"),"\n",g("ptr0",c("ptr1")),"\n",g("ptr1",c("ptr2")),"\n",g("ptr2","tmp")].join(""))}function z(Q,S){y(Q,S);B.push("--"+S)}function F(Q,S,R){1<k.length?d([Q,S],!0,[g("ptr0",c("ptr1")),"\n",g("ptr1",["pivot",R,"[pivot_ptr]"].join(""))].join("")):B.push(g(l(Q),c(l(S))),g(l(S),"pivot"+R))}function D(Q,S){B.push(["if((",S,"-",Q,")\x3c\x3d32){\ninsertionSort(",Q,",",S,",data,offset,",
n(k.length).join(","),")\n}else{\n",I,"(",Q,",",S,",data,offset,",n(k.length).join(","),")\n}"].join(""))}function u(Q,S,R){1<k.length?(B.push(["__l",++M,":while(true){"].join("")),d([Q],!0,["if(",c("ptr0"),"!\x3d\x3dpivot",S,"[pivot_ptr]){break __l",M,"}"].join("")),B.push(R,"}")):B.push(["while(",c(l(Q)),"\x3d\x3d\x3dpivot",S,"){",R,"}"].join(""))}var B=["'use strict'"],I=["ndarrayQuickSort",k.join("d"),e].join(""),J=["left","right","data","offset"].concat(n(k.length)),N=q(e),M=0;B.push(["function ",
I,"(",J.join(","),"){"].join(""));J="sixth\x3d((right-left+1)/6)|0 index1\x3dleft+sixth index5\x3dright-sixth index3\x3d(left+right)\x3e\x3e1 index2\x3dindex3-sixth index4\x3dindex3+sixth el1\x3dindex1 el2\x3dindex2 el3\x3dindex3 el4\x3dindex4 el5\x3dindex5 less\x3dleft+1 great\x3dright-1 pivots_are_equal\x3dtrue tmp tmp0 x y z k ptr0 ptr1 ptr2 comp_pivot1\x3d0 comp_pivot2\x3d0 comp\x3d0".split(" ");if(1<k.length){for(var E=[],L=1;L<k.length;++L)E.push("n"+L),J.push("i"+L);for(L=0;8>L;++L)J.push("b_ptr"+
L);J.push("ptr3","ptr4","ptr5","ptr6","ptr7","pivot_ptr","ptr_shift","elementSize\x3d"+E.join("*"));N?J.push("pivot1\x3dmalloc(elementSize)","pivot2\x3dmalloc(elementSize)"):J.push("pivot1\x3dnew Array(elementSize),pivot2\x3dnew Array(elementSize)")}else J.push("pivot1","pivot2");B.push("var "+J.join(","));t(1,2);t(4,5);t(1,3);t(2,3);t(1,4);t(3,4);t(2,5);t(2,3);t(4,5);1<k.length?d("el1 el2 el3 el4 el5 index1 index3 index5".split(" "),!0,["pivot1[pivot_ptr]\x3d",c("ptr1"),"\npivot2[pivot_ptr]\x3d",
c("ptr3"),"\npivots_are_equal\x3dpivots_are_equal\x26\x26(pivot1[pivot_ptr]\x3d\x3d\x3dpivot2[pivot_ptr])\nx\x3d",c("ptr0"),"\ny\x3d",c("ptr2"),"\nz\x3d",c("ptr4"),"\n",g("ptr5","x"),"\n",g("ptr6","y"),"\n",g("ptr7","z")].join("")):B.push(["pivot1\x3d",c(l("el2")),"\npivot2\x3d",c(l("el4")),"\npivots_are_equal\x3dpivot1\x3d\x3d\x3dpivot2\nx\x3d",c(l("el1")),"\ny\x3d",c(l("el3")),"\nz\x3d",c(l("el5")),"\n",g(l("index1"),"x"),"\n",g(l("index3"),"y"),"\n",g(l("index5"),"z")].join(""));w("index2","left");
w("index4","right");B.push("if(pivots_are_equal){");B.push("for(k\x3dless;k\x3c\x3dgreat;++k){");x("comp","k",1);B.push("if(comp\x3d\x3d\x3d0){continue}");B.push("if(comp\x3c0){");B.push("if(k!\x3d\x3dless){");y("k","less");B.push("}");B.push("++less");B.push("}else{");B.push("while(true){");x("comp","great",1);B.push("if(comp\x3e0){");B.push("great--");B.push("}else if(comp\x3c0){");A("k","less","great");B.push("break");B.push("}else{");z("k","great");B.push("break");B.push("}");B.push("}");B.push("}");
B.push("}");B.push("}else{");B.push("for(k\x3dless;k\x3c\x3dgreat;++k){");x("comp_pivot1","k",1);B.push("if(comp_pivot1\x3c0){");B.push("if(k!\x3d\x3dless){");y("k","less");B.push("}");B.push("++less");B.push("}else{");x("comp_pivot2","k",2);B.push("if(comp_pivot2\x3e0){");B.push("while(true){");x("comp","great",2);B.push("if(comp\x3e0){");B.push("if(--great\x3ck){break}");B.push("continue");B.push("}else{");x("comp","great",1);B.push("if(comp\x3c0){");A("k","less","great");B.push("}else{");z("k",
"great");B.push("}");B.push("break");B.push("}");B.push("}");B.push("}");B.push("}");B.push("}");B.push("}");F("left","(less-1)",1);F("right","(great+1)",2);D("left","(less-2)");D("(great+2)","right");B.push("if(pivots_are_equal){");r();B.push("return");B.push("}");B.push("if(less\x3cindex1\x26\x26great\x3eindex5){");u("less",1,"++less");u("great",2,"--great");B.push("for(k\x3dless;k\x3c\x3dgreat;++k){");x("comp_pivot1","k",1);B.push("if(comp_pivot1\x3d\x3d\x3d0){");B.push("if(k!\x3d\x3dless){");
y("k","less");B.push("}");B.push("++less");B.push("}else{");x("comp_pivot2","k",2);B.push("if(comp_pivot2\x3d\x3d\x3d0){");B.push("while(true){");x("comp","great",2);B.push("if(comp\x3d\x3d\x3d0){");B.push("if(--great\x3ck){break}");B.push("continue");B.push("}else{");x("comp","great",1);B.push("if(comp\x3c0){");A("k","less","great");B.push("}else{");z("k","great");B.push("}");B.push("break");B.push("}");B.push("}");B.push("}");B.push("}");B.push("}");B.push("}");r();D("less","great");B.push("}return "+
I);if(1<k.length&&N)return J=new Function("insertionSort","malloc","free",B.join("\n")),J(h,N[0],N[1]);J=new Function("insertionSort",B.join("\n"));return J(h)}var b=a("typedarray-pool");G.exports=function(k,e){var h=["'use strict'"],l=["ndarraySortWrapper",k.join("d"),e].join("");h.push(["function ",l,"(array){"].join(""));for(var c=["data\x3darray.data,offset\x3darray.offset|0,shape\x3darray.shape,stride\x3darray.stride"],g=0;g<k.length;++g)c.push(["s",g,"\x3dstride[",g,"]|0,n",g,"\x3dshape[",g,
"]|0"].join(""));var d=Array(k.length),p=[];for(g=0;g<k.length;++g){var r=k[g];0!==r&&(d[r]=0===p.length?"1":p.join("*"),p.push("n"+r))}var t=p=-1;for(g=0;g<k.length;++g)r=k[g],0!==r&&(0<p?c.push(["d",r,"\x3ds",r,"-d",p,"*n",p].join("")):c.push(["d",r,"\x3ds",r].join("")),p=r),r=k.length-1-g,0!==r&&(0<t?c.push(["e",r,"\x3ds",r,"-e",t,"*n",t,",f",r,"\x3d",d[r],"-f",t,"*n",t].join("")):c.push(["e",r,"\x3ds",r,",f",r,"\x3d",d[r]].join("")),t=r);h.push("var "+c.join(","));c=["0","n0-1","data","offset"].concat(n(k.length));
h.push(["if(n0\x3c\x3d32){insertionSort(",c.join(","),")}else{quickSort(",c.join(","),")}"].join(""));h.push("}return "+l);h=new Function("insertionSort","quickSort",h.join("\n"));l=m(k,e);k=f(k,e,l);return h(l,k)}},{"typedarray-pool":567}],468:[function(a,G,C){var q=a("./lib/compile_sort.js"),n={};G.exports=function(m){var f=m.order,b=m.dtype,k=[f,b].join(":"),e=n[k];e||(n[k]=e=q(f,b));e(m);return m}},{"./lib/compile_sort.js":467}],469:[function(a,G,C){function q(l,c){return l[0]-c[0]}function n(){var l=
this.stride,c=Array(l.length),g;for(g=0;g<c.length;++g)c[g]=[Math.abs(l[g]),g];c.sort(q);l=Array(c.length);for(g=0;g<l.length;++g)l[g]=c[g][1];return l}function m(l,c){var g=["View",c,"d",l].join("");0>c&&(g="View_Nil"+l);var d="generic"===l;if(-1===c)return c=new Function("function "+g+"(a){this.data\x3da;};var proto\x3d"+g+".prototype;proto.dtype\x3d'"+l+"';proto.index\x3dfunction(){return -1};proto.size\x3d0;proto.dimension\x3d-1;proto.shape\x3dproto.stride\x3dproto.order\x3d[];proto.lo\x3dproto.hi\x3dproto.transpose\x3dproto.step\x3dfunction(){return new "+
g+"(this.data);};proto.get\x3dproto.set\x3dfunction(){};proto.pick\x3dfunction(){return null};return function construct_"+g+"(a){return new "+g+"(a);}"),c();if(0===c)return c=new Function("TrivialArray","function "+g+"(a,d) {this.data \x3d a;this.offset \x3d d};var proto\x3d"+g+".prototype;proto.dtype\x3d'"+l+"';proto.index\x3dfunction(){return this.offset};proto.dimension\x3d0;proto.size\x3d1;proto.shape\x3dproto.stride\x3dproto.order\x3d[];proto.lo\x3dproto.hi\x3dproto.transpose\x3dproto.step\x3dfunction "+
g+"_copy() {return new "+g+"(this.data,this.offset)};proto.pick\x3dfunction "+g+"_pick(){return TrivialArray(this.data);};proto.valueOf\x3dproto.get\x3dfunction "+g+"_get(){return "+(d?"this.data.get(this.offset)":"this.data[this.offset]")+"};proto.set\x3dfunction "+g+"_set(v){return "+(d?"this.data.set(this.offset,v)":"this.data[this.offset]\x3dv")+"};return function construct_"+g+"(a,b,c,d){return new "+g+"(a,d)}"),c(h[l][0]);var p=["'use strict'"];var r=b(c),t=r.map(function(A){return"i"+A}),w=
"this.offset+"+r.map(function(A){return"this.stride["+A+"]*i"+A}).join("+"),x=r.map(function(A){return"b"+A}).join(","),y=r.map(function(A){return"c"+A}).join(",");p.push("function "+g+"(a,"+x+","+y+",d){this.data\x3da","this.shape\x3d["+x+"]","this.stride\x3d["+y+"]","this.offset\x3dd|0}","var proto\x3d"+g+".prototype","proto.dtype\x3d'"+l+"'","proto.dimension\x3d"+c);p.push("Object.defineProperty(proto,'size',{get:function "+g+"_size(){return "+r.map(function(A){return"this.shape["+A+"]"}).join("*"),
"}})");1===c?p.push("proto.order\x3d[0]"):(p.push("Object.defineProperty(proto,'order',{get:"),4>c?(p.push("function "+g+"_order(){"),2===c?p.push("return (Math.abs(this.stride[0])\x3eMath.abs(this.stride[1]))?[1,0]:[0,1]}})"):3===c&&p.push("var s0\x3dMath.abs(this.stride[0]),s1\x3dMath.abs(this.stride[1]),s2\x3dMath.abs(this.stride[2]);if(s0\x3es1){if(s1\x3es2){return [2,1,0];}else if(s0\x3es2){return [1,2,0];}else{return [1,0,2];}}else if(s0\x3es2){return [2,0,1];}else if(s2\x3es1){return [0,1,2];}else{return [0,2,1];}}})")):
p.push("ORDER})"));p.push("proto.set\x3dfunction "+g+"_set("+t.join(",")+",v){");d?p.push("return this.data.set("+w+",v)}"):p.push("return this.data["+w+"]\x3dv}");p.push("proto.get\x3dfunction "+g+"_get("+t.join(",")+"){");d?p.push("return this.data.get("+w+")}"):p.push("return this.data["+w+"]}");p.push("proto.index\x3dfunction "+g+"_index(",t.join(),"){return "+w+"}");p.push("proto.hi\x3dfunction "+g+"_hi("+t.join(",")+"){return new "+g+"(this.data,"+r.map(function(A){return["(typeof i",A,"!\x3d\x3d'number'||i",
A,"\x3c0)?this.shape[",A,"]:i",A,"|0"].join("")}).join(",")+","+r.map(function(A){return"this.stride["+A+"]"}).join(",")+",this.offset)}");d=r.map(function(A){return"a"+A+"\x3dthis.shape["+A+"]"});w=r.map(function(A){return"c"+A+"\x3dthis.stride["+A+"]"});p.push("proto.lo\x3dfunction "+g+"_lo("+t.join(",")+"){var b\x3dthis.offset,d\x3d0,"+d.join(",")+","+w.join(","));for(d=0;d<c;++d)p.push("if(typeof i"+d+"\x3d\x3d\x3d'number'\x26\x26i"+d+"\x3e\x3d0){d\x3di"+d+"|0;b+\x3dc"+d+"*d;a"+d+"-\x3dd}");p.push("return new "+
g+"(this.data,"+r.map(function(A){return"a"+A}).join(",")+","+r.map(function(A){return"c"+A}).join(",")+",b)}");p.push("proto.step\x3dfunction "+g+"_step("+t.join(",")+"){var "+r.map(function(A){return"a"+A+"\x3dthis.shape["+A+"]"}).join(",")+","+r.map(function(A){return"b"+A+"\x3dthis.stride["+A+"]"}).join(",")+",c\x3dthis.offset,d\x3d0,ceil\x3dMath.ceil");for(d=0;d<c;++d)p.push("if(typeof i"+d+"\x3d\x3d\x3d'number'){d\x3di"+d+"|0;if(d\x3c0){c+\x3db"+d+"*(a"+d+"-1);a"+d+"\x3dceil(-a"+d+"/d)}else{a"+
d+"\x3dceil(a"+d+"/d)}b"+d+"*\x3dd}");p.push("return new "+g+"(this.data,"+r.map(function(A){return"a"+A}).join(",")+","+r.map(function(A){return"b"+A}).join(",")+",c)}");w=Array(c);x=Array(c);for(d=0;d<c;++d)w[d]="a[i"+d+"]",x[d]="b[i"+d+"]";p.push("proto.transpose\x3dfunction "+g+"_transpose("+t+"){"+t.map(function(A,z){return A+"\x3d("+A+"\x3d\x3d\x3dundefined?"+z+":"+A+"|0)"}).join(";"),"var a\x3dthis.shape,b\x3dthis.stride;return new "+g+"(this.data,"+w.join(",")+","+x.join(",")+",this.offset)}");
p.push("proto.pick\x3dfunction "+g+"_pick("+t+"){var a\x3d[],b\x3d[],c\x3dthis.offset");for(d=0;d<c;++d)p.push("if(typeof i"+d+"\x3d\x3d\x3d'number'\x26\x26i"+d+"\x3e\x3d0){c\x3d(c+this.stride["+d+"]*i"+d+")|0}else{a.push(this.shape["+d+"]);b.push(this.stride["+d+"])}");p.push("var ctor\x3dCTOR_LIST[a.length+1];return ctor(this.data,a,b,c)}");p.push("return function construct_"+g+"(data,shape,stride,offset){return new "+g+"(data,"+r.map(function(A){return"shape["+A+"]"}).join(",")+","+r.map(function(A){return"stride["+
A+"]"}).join(",")+",offset)}");c=new Function("CTOR_LIST","ORDER",p.join("\n"));return c(h[l],n)}function f(l){if(k(l))return"buffer";if(e)switch(Object.prototype.toString.call(l)){case "[object Float64Array]":return"float64";case "[object Float32Array]":return"float32";case "[object Int8Array]":return"int8";case "[object Int16Array]":return"int16";case "[object Int32Array]":return"int32";case "[object Uint8Array]":return"uint8";case "[object Uint16Array]":return"uint16";case "[object Uint32Array]":return"uint32";
case "[object Uint8ClampedArray]":return"uint8_clamped";case "[object BigInt64Array]":return"bigint64";case "[object BigUint64Array]":return"biguint64"}return Array.isArray(l)?"array":"generic"}var b=a("iota-array"),k=a("is-buffer"),e="undefined"!==typeof Float64Array,h={float32:[],float64:[],int8:[],int16:[],int32:[],uint8:[],uint16:[],uint32:[],array:[],uint8_clamped:[],bigint64:[],biguint64:[],buffer:[],generic:[]};(function(){for(var l in h)h[l].push(m(l,-1))});G.exports=function(l,c,g,d){if(void 0===
l){var p=h.array[0];return p([])}"number"===typeof l&&(l=[l]);void 0===c&&(c=[l.length]);p=c.length;if(void 0===g){g=Array(p);for(var r=p-1,t=1;0<=r;--r)g[r]=t,t*=c[r]}if(void 0===d)for(r=d=0;r<p;++r)0>g[r]&&(d-=(c[r]-1)*g[r]);r=f(l);for(t=h[r];t.length<=p+1;)t.push(m(r,t.length-1));p=t[p+1];return p(l,c,g,d)}},{"iota-array":437,"is-buffer":439}],470:[function(a,G,C){var q=a("double-bits"),n=Math.pow(2,-1074);G.exports=function(m,f){if(isNaN(m)||isNaN(f))return NaN;if(m===f)return m;if(0===m)return 0>
f?-n:n;var b=q.hi(m),k=q.lo(m);f>m===0<m?4294967295===k?(b+=1,k=0):k+=1:0===k?(k=4294967295,--b):--k;return q.pack(k,b)}},{"double-bits":173}],471:[function(a,G,C){function q(e,h,l,c){return["C",e,h,l,c,l,c]}function n(e,h,l,c,g,d){return["C",e/3+2/3*l,h/3+2/3*c,g/3+2/3*l,d/3+2/3*c,g,d]}function m(e,h,l,c,g,d,p,r,t,w){if(w)z=w[0],d=w[1],y=w[2],A=w[3];else{z=f(e,h,-g);e=z.x;h=z.y;z=f(r,t,-g);r=z.x;t=z.y;z=(e-r)/2;y=(h-t)/2;A=z*z/(l*l)+y*y/(c*c);1<A&&(A=Math.sqrt(A),l*=A,c*=A);A=l*l;var x=c*c;d=(d==
p?-1:1)*Math.sqrt(Math.abs((A*x-A*y*y-x*z*z)/(A*y*y+x*z*z)));Infinity==d&&(d=1);var y=d*l*y/c+(e+r)/2,A=d*-c*z/l+(h+t)/2,z=Math.asin(((h-A)/c).toFixed(9));d=Math.asin(((t-A)/c).toFixed(9));z=e<y?b-z:z;d=r<y?b-d:d;0>z&&(z=2*b+z);0>d&&(d=2*b+d);p&&z>d&&(z-=2*b);!p&&d>z&&(d-=2*b)}if(Math.abs(d-z)>k){var F=d;x=r;var D=t;d=z+k*(p&&d>z?1:-1);r=y+l*Math.cos(d);t=A+c*Math.sin(d);F=m(r,t,l,c,g,0,p,x,D,[d,F,y,A])}p=Math.tan((d-z)/4);l=4/3*l*p;c=4/3*c*p;e=[2*e-(e+l*Math.sin(z)),2*h-(h-c*Math.cos(z)),r+l*Math.sin(d),
t-c*Math.cos(d),r,t];if(w)return e;F&&(e=e.concat(F));for(w=0;w<e.length;)h=f(e[w],e[w+1],g),e[w++]=h.x,e[w++]=h.y;return e}function f(e,h,l){return{x:e*Math.cos(l)-h*Math.sin(l),y:e*Math.sin(l)+h*Math.cos(l)}}var b=Math.PI,k=b/180*120;G.exports=function(e){for(var h,l=[],c=0,g=0,d=0,p=0,r=null,t=null,w=0,x=0,y=0,A=e.length;y<A;y++){var z=e[y],F=z[0];switch(F){case "M":d=z[1];p=z[2];break;case "A":z=m(w,x,z[1],z[2],b/180*z[3],z[4],z[5],z[6],z[7]);z.unshift("C");7<z.length&&(l.push(z.splice(0,7)),
z.unshift("C"));break;case "S":if("C"==h||"S"==h)w+=w-c,x+=x-g;z=["C",w,x,z[1],z[2],z[3],z[4]];break;case "T":"Q"==h||"T"==h?(r=2*w-r,t=2*x-t):(r=w,t=x);z=n(w,x,r,t,z[1],z[2]);break;case "Q":r=z[1];t=z[2];z=n(w,x,z[1],z[2],z[3],z[4]);break;case "L":z=q(w,x,z[1],z[2]);break;case "H":z=q(w,x,z[1],x);break;case "V":z=q(w,x,w,z[1]);break;case "Z":z=q(w,x,d,p)}h=F;w=z[z.length-2];x=z[z.length-1];4<z.length?(c=z[z.length-4],g=z[z.length-3]):(c=w,g=x);l.push(z)}return l}},{}],472:[function(a,G,C){C.vertexNormals=
function(q,n,m){var f=n.length,b=Array(f);m=void 0===m?1E-6:m;for(var k=0;k<f;++k)b[k]=[0,0,0];for(k=0;k<q.length;++k)for(var e=q[k],h,l=e[e.length-1],c=e[0],g=0;g<e.length;++g){h=l;l=c;c=e[(g+1)%e.length];var d=n[h],p=n[l],r=n[c],t=Array(3),w=0,x=Array(3),y=0;for(h=0;3>h;++h)t[h]=d[h]-p[h],w+=t[h]*t[h],x[h]=r[h]-p[h],y+=x[h]*x[h];if(w*y>m)for(d=b[l],w=1/Math.sqrt(w*y),h=0;3>h;++h)y=(h+1)%3,p=(h+2)%3,d[h]+=w*(x[y]*t[p]-x[p]*t[y])}for(k=0;k<f;++k){d=b[k];for(h=q=0;3>h;++h)q+=d[h]*d[h];if(q>m)for(w=
1/Math.sqrt(q),h=0;3>h;++h)d[h]*=w;else for(h=0;3>h;++h)d[h]=0}return b};C.faceNormals=function(q,n,m){var f=q.length,b=Array(f);m=void 0===m?1E-6:m;for(var k=0;k<f;++k){for(var e=q[k],h=Array(3),l=0;3>l;++l)h[l]=n[e[l]];e=Array(3);var c=Array(3);for(l=0;3>l;++l)e[l]=h[1][l]-h[0][l],c[l]=h[2][l]-h[0][l];h=Array(3);var g=0;for(l=0;3>l;++l){var d=(l+1)%3,p=(l+2)%3;h[l]=e[d]*c[p]-e[p]*c[d];g+=h[l]*h[l]}g=g>m?1/Math.sqrt(g):0;for(l=0;3>l;++l)h[l]*=g;b[k]=h}return b}},{}],473:[function(a,G,C){var q=Object.getOwnPropertySymbols,
n=Object.prototype.hasOwnProperty,m=Object.prototype.propertyIsEnumerable;G.exports=function(){try{if(!Object.assign)return!1;var f=new String("abc");f[5]="de";if("5"===Object.getOwnPropertyNames(f)[0])return!1;var b={};for(f=0;10>f;f++)b["_"+String.fromCharCode(f)]=f;if("0123456789"!==Object.getOwnPropertyNames(b).map(function(e){return b[e]}).join(""))return!1;var k={};"abcdefghijklmnopqrst".split("").forEach(function(e){k[e]=e});return"abcdefghijklmnopqrst"!==Object.keys(Object.assign({},k)).join("")?
!1:!0}catch(e){return!1}}()?Object.assign:function(f,b){if(null===f||void 0===f)throw new TypeError("Object.assign cannot be called with null or undefined");var k=Object(f);for(var e,h=1;h<arguments.length;h++){var l=Object(arguments[h]);for(var c in l)n.call(l,c)&&(k[c]=l[c]);if(q){e=q(l);for(var g=0;g<e.length;g++)m.call(l,e[g])&&(k[e[g]]=l[e[g]])}}return k}},{}],474:[function(a,G,C){G.exports=function(q,n,m,f,b,k,e,h,l,c){var g=n+k+c;if(0<d){var d=Math.sqrt(g+1);q[0]=.5*(e-l)/d;q[1]=.5*(h-f)/d;
q[2]=.5*(m-k)/d;q[3]=.5*d}else c=Math.max(n,k,c),d=Math.sqrt(2*c-g+1),n>=c?(q[0]=.5*d,q[1]=.5*(b+m)/d,q[2]=.5*(h+f)/d,q[3]=.5*(e-l)/d):k>=c?(q[0]=.5*(m+b)/d,q[1]=.5*d,q[2]=.5*(l+e)/d,q[3]=.5*(h-f)/d):(q[0]=.5*(f+h)/d,q[1]=.5*(e+l)/d,q[2]=.5*d,q[3]=.5*(m-b)/d);return q}},{}],475:[function(a,G,C){function q(c,g,d){return Math.sqrt(Math.pow(c,2)+Math.pow(g,2)+Math.pow(d,2))}function n(c,g,d,p){return Math.sqrt(Math.pow(c,2)+Math.pow(g,2)+Math.pow(d,2)+Math.pow(p,2))}function m(c,g){var d=g[0],p=g[1],
r=g[2];g=g[3];var t=n(d,p,r,g);1E-6<t?(c[0]=d/t,c[1]=p/t,c[2]=r/t,c[3]=g/t):(c[0]=c[1]=c[2]=0,c[3]=1)}function f(c,g,d){this.radius=b([d]);this.center=b(g);this.rotation=b(c);this.computedRadius=this.radius.curve(0);this.computedCenter=this.center.curve(0);this.computedRotation=this.rotation.curve(0);this.computedUp=[.1,0,0];this.computedEye=[.1,0,0];this.computedMatrix=[.1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0];this.recalcMatrix(0)}G.exports=function(c){c=c||{};var g=c.center||[0,0,0],d=c.rotation||[0,0,
0,1],p=c.radius||1;g=[].slice.call(g,0,3);d=[].slice.call(d,0,4);m(d,d);g=new f(d,g,Math.log(p));g.setDistanceLimits(c.zoomMin,c.zoomMax);("eye"in c||"up"in c)&&g.lookAt(0,c.eye,c.center,c.up);return g};var b=a("filtered-vector"),k=a("gl-mat4/lookAt"),e=a("gl-mat4/fromQuat"),h=a("gl-mat4/invert"),l=a("./lib/quatFromFrame");a=f.prototype;a.lastT=function(){return Math.max(this.radius.lastT(),this.center.lastT(),this.rotation.lastT())};a.recalcMatrix=function(c){this.radius.curve(c);this.center.curve(c);
this.rotation.curve(c);var g=this.computedRotation;m(g,g);c=this.computedMatrix;e(c,g);var d=this.computedCenter;g=this.computedEye;var p=this.computedUp,r=Math.exp(this.computedRadius[0]);g[0]=d[0]+r*c[2];g[1]=d[1]+r*c[6];g[2]=d[2]+r*c[10];p[0]=c[1];p[1]=c[5];p[2]=c[9];for(d=0;3>d;++d){for(r=p=0;3>r;++r)p+=c[d+4*r]*g[r];c[12+d]=-p}};a.getMatrix=function(c,g){this.recalcMatrix(c);c=this.computedMatrix;if(g){for(var d=0;16>d;++d)g[d]=c[d];return g}return c};a.idle=function(c){this.center.idle(c);this.radius.idle(c);
this.rotation.idle(c)};a.flush=function(c){this.center.flush(c);this.radius.flush(c);this.rotation.flush(c)};a.pan=function(c,g,d,p){g=g||0;d=d||0;p=p||0;this.recalcMatrix(c);var r=this.computedMatrix,t=r[1],w=r[5],x=r[9],y=q(t,w,x);t/=y;w/=y;x/=y;y=r[0];var A=r[4],z=r[8],F=y*t+A*w+z*x;y-=t*F;A-=w*F;z-=x*F;F=q(y,A,z);y/=F;A/=F;z/=F;F=r[2];var D=r[6];r=r[10];var u=F*t+D*w+r*x,B=F*y+D*A+r*z;q(F-(u*t+B*y),D-(u*w+B*A),r-(u*x+B*z));this.center.move(c,y*g+t*d,A*g+w*d,z*g+x*d);g=Math.exp(this.computedRadius[0]);
g=Math.max(1E-4,g+p);this.radius.set(c,Math.log(g))};a.rotate=function(c,g,d,p){this.recalcMatrix(c);g=g||0;d=d||0;var r=this.computedMatrix,t=r[2],w=r[6],x=r[10],y=g*r[0]+d*r[1],A=g*r[4]+d*r[5];r=g*r[8]+d*r[9];d=-(w*r-x*A);r=-(x*y-t*r);y=-(t*A-w*y);A=Math.sqrt(Math.max(0,1-Math.pow(d,2)-Math.pow(r,2)-Math.pow(y,2)));var z=n(d,r,y,A);1E-6<z?(d/=z,r/=z,y/=z,A/=z):(d=r=y=0,A=1);z=this.computedRotation;var F=z[0],D=z[1],u=z[2],B=z[3];z=F*A+B*d+D*y-u*r;var I=D*A+B*r+u*d-F*y,J=u*A+B*y+F*r-D*d;F=B*A-F*
d-D*r-u*y;p&&(d=t,r=w,y=x,p=Math.sin(p)/q(d,r,y),d*=p,r*=p,y*=p,A=Math.cos(g),z=z*A+F*d+I*y-J*r,I=I*A+F*r+J*d-z*y,J=J*A+F*y+z*r-I*d,F=F*A-z*d-I*r-J*y);g=n(z,I,J,F);1E-6<g?(z/=g,I/=g,J/=g,F/=g):(z=I=J=0,F=1);this.rotation.set(c,z,I,J,F)};a.lookAt=function(c,g,d,p){this.recalcMatrix(c);d=d||this.computedCenter;g=g||this.computedEye;p=p||this.computedUp;var r=this.computedMatrix;k(r,g,d,p);p=this.computedRotation;l(p,r[0],r[1],r[2],r[4],r[5],r[6],r[8],r[9],r[10]);m(p,p);this.rotation.set(c,p[0],p[1],
p[2],p[3]);for(p=r=0;3>p;++p)r+=Math.pow(d[p]-g[p],2);this.radius.set(c,.5*Math.log(Math.max(r,1E-6)));this.center.set(c,d[0],d[1],d[2])};a.translate=function(c,g,d,p){this.center.move(c,g||0,d||0,p||0)};a.setMatrix=function(c,g){var d=this.computedRotation;l(d,g[0],g[1],g[2],g[4],g[5],g[6],g[8],g[9],g[10]);m(d,d);this.rotation.set(c,d[0],d[1],d[2],d[3]);d=this.computedMatrix;h(d,g);var p=d[15];if(1E-6<Math.abs(p)){g=d[12]/p;var r=d[13]/p;p=d[14]/p;this.recalcMatrix(c);var t=Math.exp(this.computedRadius[0]);
this.center.set(c,g-d[2]*t,r-d[6]*t,p-d[10]*t)}else this.center.idle(c);this.radius.idle(c)};a.setDistance=function(c,g){0<g&&this.radius.set(c,Math.log(g))};a.setDistanceLimits=function(c,g){c=0<c?Math.log(c):-Infinity;g=0<g?Math.log(g):Infinity;g=Math.max(g,c);this.radius.bounds[0][0]=c;this.radius.bounds[1][0]=g};a.getDistanceLimits=function(c){var g=this.radius.bounds;return c?(c[0]=Math.exp(g[0][0]),c[1]=Math.exp(g[1][0]),c):[Math.exp(g[0][0]),Math.exp(g[1][0])]};a.toJSON=function(){this.recalcMatrix(this.lastT());
return{center:this.computedCenter.slice(),rotation:this.computedRotation.slice(),distance:Math.log(this.computedRadius[0]),zoomMin:this.radius.bounds[0][0],zoomMax:this.radius.bounds[1][0]}};a.fromJSON=function(c){var g=this.lastT(),d=c.center;d&&this.center.set(g,d[0],d[1],d[2]);(d=c.rotation)&&this.rotation.set(g,d[0],d[1],d[2],d[3]);(d=c.distance)&&0<d&&this.radius.set(g,Math.log(d));this.setDistanceLimits(c.zoomMin,c.zoomMax)}},{"./lib/quatFromFrame":474,"filtered-vector":242,"gl-mat4/fromQuat":275,
"gl-mat4/invert":278,"gl-mat4/lookAt":279}],476:[function(a,G,C){var q=a("repeat-string");G.exports=function(n,m,f){return q("undefined"!==typeof f?f+"":" ",m)+n}},{"repeat-string":513}],477:[function(a,G,C){function q(f,b){function k(c,g,d){d=[];for(var p,r=0;p=l.exec(c);){if(1E4<r++)throw Error("Circular references in parenthesis");d.push(c.slice(0,p.index));d.push(k(g[p[1]],g));c=c.slice(p.index+p[0].length)}d.push(c);return d}if("string"!==typeof f)return[f];var e=[f];"string"===typeof b||Array.isArray(b)?
b={brackets:b}:b||(b={});f=b.brackets?Array.isArray(b.brackets)?b.brackets:[b.brackets]:["{}","[]","()"];var h=b.escape||"___";b=!!b.flat;f.forEach(function(c){function g(r,t,w){r=e.push(r.slice(c[0].length,-c[1].length))-1;p.push(r);return h+r+h}var d=new RegExp(["\\",c[0],"[^\\",c[0],"\\",c[1],"]*\\",c[1]].join("")),p=[];e.forEach(function(r,t){for(var w,x=0;r!=w;)if(w=r,r=r.replace(d,g),1E4<x++)throw Error("References have circular dependency. Please, check them.");e[t]=r});p=p.reverse();e=e.map(function(r){p.forEach(function(t){r=
r.replace(new RegExp("(\\"+h+t+"\\"+h+")","g"),c[0]+"$1"+c[1])});return r})});var l=new RegExp("\\"+h+"([0-9]+)\\"+h);return b?e:k(e[0],e)}function n(f,b){function k(c,g){if(null==f[g])throw Error("Reference "+g+"is undefined");return f[g]}if(b&&b.flat){var e=b&&b.escape||"___";b=f[0];if(!b)return"";e=new RegExp("\\"+e+"([0-9]+)\\"+e);for(var h=0;b!=l;){if(1E4<h++)throw Error("Circular references in "+f);var l=b;b=b.replace(e,k)}return b}return f.reduce(function p(g,d){Array.isArray(d)&&(d=d.reduce(p,
""));return g+d},"")}function m(f,b){return Array.isArray(f)?n(f,b):q(f,b)}m.parse=q;m.stringify=n;G.exports=m},{}],478:[function(a,G,C){var q=a("pick-by-alias");G.exports=function(n){1<arguments.length&&(n=arguments);"string"===typeof n?n=n.split(/\s/).map(parseFloat):"number"===typeof n&&(n=[n]);if(n.length&&"number"===typeof n[0])var m=1===n.length?{width:n[0],height:n[0],x:0,y:0}:2===n.length?{width:n[0],height:n[1],x:0,y:0}:{x:n[0],y:n[1],width:n[2]-n[0]||0,height:n[3]-n[1]||0};else n&&(n=q(n,
{left:"x l left Left",top:"y t top Top",width:"w width W Width",height:"h height W Width",bottom:"b bottom Bottom",right:"r right Right"}),m={x:n.left||0,y:n.top||0},m.width=null==n.width?n.right?n.right-m.x:0:n.width,m.height=null==n.height?n.bottom?n.bottom-m.y:0:n.height);return m}},{"pick-by-alias":485}],479:[function(a,G,C){G.exports=function(f){var b=[];f.replace(n,function(k,e,h){k=e.toLowerCase();h=(h=h.match(m))?h.map(Number):[];"m"==k&&2<h.length&&(b.push([e].concat(h.splice(0,2))),k="l",
e="m"==e?"l":"L");for(;;){if(h.length==q[k])return h.unshift(e),b.push(h);if(h.length<q[k])throw Error("malformed path data");b.push([e].concat(h.splice(0,q[k])))}});return b};var q={a:7,c:6,h:1,l:2,m:2,q:4,s:4,t:2,v:1,z:0},n=/([astvzqmhlc])([^astvzqmhlc]*)/ig,m=/-?[0-9]*\.?[0-9]+(?:e[-+]?\d+)?/ig},{}],480:[function(a,G,C){G.exports=function(q,n){n||(n=[0,""]);q=String(q);var m=parseFloat(q,10);n[0]=m;n[1]=q.match(/[\d.\-\+]*\s*(.*)/)[1]||"";return n}},{}],481:[function(a,G,C){(function(q){function n(b,
k){for(var e=0,h=b.length-1;0<=h;h--){var l=b[h];"."===l?b.splice(h,1):".."===l?(b.splice(h,1),e++):e&&(b.splice(h,1),e--)}if(k)for(;e--;e)b.unshift("..");return b}function m(b,k){if(b.filter)return b.filter(k);for(var e=[],h=0;h<b.length;h++)k(b[h],h,b)&&e.push(b[h]);return e}C.resolve=function(){for(var b="",k=!1,e=arguments.length-1;-1<=e&&!k;e--){var h=0<=e?arguments[e]:q.cwd();if("string"!==typeof h)throw new TypeError("Arguments to path.resolve must be strings");h&&(b=h+"/"+b,k="/"===h.charAt(0))}b=
n(m(b.split("/"),function(l){return!!l}),!k).join("/");return(k?"/":"")+b||"."};C.normalize=function(b){var k=C.isAbsolute(b),e="/"===f(b,-1);(b=n(m(b.split("/"),function(h){return!!h}),!k).join("/"))||k||(b=".");b&&e&&(b+="/");return(k?"/":"")+b};C.isAbsolute=function(b){return"/"===b.charAt(0)};C.join=function(){var b=Array.prototype.slice.call(arguments,0);return C.normalize(m(b,function(k,e){if("string"!==typeof k)throw new TypeError("Arguments to path.join must be strings");return k}).join("/"))};
C.relative=function(b,k){function e(g){for(var d=0;d<g.length&&""===g[d];d++);for(var p=g.length-1;0<=p&&""===g[p];p--);return d>p?[]:g.slice(d,p-d+1)}b=C.resolve(b).substr(1);k=C.resolve(k).substr(1);b=e(b.split("/"));k=e(k.split("/"));for(var h=Math.min(b.length,k.length),l=h,c=0;c<h;c++)if(b[c]!==k[c]){l=c;break}h=[];for(c=l;c<b.length;c++)h.push("..");h=h.concat(k.slice(l));return h.join("/")};C.sep="/";C.delimiter=":";C.dirname=function(b){"string"!==typeof b&&(b+="");if(0===b.length)return".";
for(var k=b.charCodeAt(0),e=47===k,h=-1,l=!0,c=b.length-1;1<=c;--c)if(k=b.charCodeAt(c),47===k){if(!l){h=c;break}}else l=!1;return-1===h?e?"/":".":e&&1===h?"/":b.slice(0,h)};C.basename=function(b,k){"string"!==typeof b&&(b+="");var e=0,h=-1,l=!0,c;for(c=b.length-1;0<=c;--c)if(47===b.charCodeAt(c)){if(!l){e=c+1;break}}else-1===h&&(l=!1,h=c+1);b=-1===h?"":b.slice(e,h);k&&b.substr(-1*k.length)===k&&(b=b.substr(0,b.length-k.length));return b};C.extname=function(b){"string"!==typeof b&&(b+="");for(var k=
-1,e=0,h=-1,l=!0,c=0,g=b.length-1;0<=g;--g){var d=b.charCodeAt(g);if(47===d){if(!l){e=g+1;break}}else-1===h&&(l=!1,h=g+1),46===d?-1===k?k=g:1!==c&&(c=1):-1!==k&&(c=-1)}return-1===k||-1===h||0===c||1===c&&k===h-1&&k===e+1?"":b.slice(k,h)};var f="b"==="ab".substr(-1)?function(b,k,e){return b.substr(k,e)}:function(b,k,e){0>k&&(k=b.length+k);return b.substr(k,e)}}).call(this,a("_process"))},{_process:500}],482:[function(a,G,C){(function(q){(function(){if("undefined"!==typeof performance&&null!==performance&&
performance.now)G.exports=function(){return performance.now()};else if("undefined"!==typeof q&&null!==q&&q.hrtime){G.exports=function(){return(m()-k)/1E6};var n=q.hrtime;var m=function(){var h=n();return 1E9*h[0]+h[1]};var f=m();var b=1E9*q.uptime();var k=f-b}else if(Date.now){G.exports=function(){return Date.now()-e};var e=Date.now()}else G.exports=function(){return(new Date).getTime()-e},e=(new Date).getTime()}).call(this)}).call(this,a("_process"))},{_process:500}],483:[function(a,G,C){G.exports=
function(m){var f=m.length;if(f<q)for(var b=1,k=0;k<f;++k)for(var e=0;e<k;++e)if(m[k]<m[e])b=-b;else{if(m[k]===m[e])return 0}else{var h=n.mallocUint8(f);for(k=0;k<f;++k)h[k]=0;b=1;for(k=0;k<f;++k)if(!h[k]){var l=1;h[k]=1;for(e=m[k];e!==k;e=m[e]){if(h[e])return n.freeUint8(h),0;l+=1;h[e]=1}l&1||(b=-b)}n.freeUint8(h)}return b};var q=32,n=a("typedarray-pool")},{"typedarray-pool":567}],484:[function(a,G,C){var q=a("typedarray-pool"),n=a("invert-permutation");C.rank=function(m){var f=m.length;switch(f){case 0:case 1:return 0;
case 2:return m[1]}var b=q.mallocUint32(f),k=q.mallocUint32(f),e=0,h;n(m,k);for(h=0;h<f;++h)b[h]=m[h];for(h=f-1;0<h;--h)f=k[h],m=b[h],b[h]=b[f],b[f]=m,k[h]=k[m],k[m]=f,e=(e+m)*h;q.freeUint32(k);q.freeUint32(b);return e};C.unrank=function(m,f,b){switch(m){case 0:return b?b:[];case 1:return b?(b[0]=0,b):[0];case 2:return b?(f?(b[0]=0,b[1]=1):(b[0]=1,b[1]=0),b):f?[0,1]:[1,0]}b=b||Array(m);var k,e=1;b[0]=0;for(k=1;k<m;++k)b[k]=k,e=e*k|0;for(k=m-1;0<k;--k){m=f/e|0;f=f-m*e|0;e=e/k|0;var h=b[k]|0;b[k]=b[m]|
0;b[m]=h|0}return b}},{"invert-permutation":436,"typedarray-pool":567}],485:[function(a,G,C){function q(m){if(n[m])return n[m];"string"===typeof m&&(m=n[m]=m.split(/\s*,\s*|\s+/));return m}G.exports=function(m,f,b){var k={},e,h;"string"===typeof f&&(f=q(f));if(Array.isArray(f)){var l={};for(h=0;h<f.length;h++)l[f[h]]=!0;f=l}for(e in f)f[e]=q(f[e]);l={};for(e in f){var c=f[e];if(Array.isArray(c))for(h=0;h<c.length;h++){var g=c[h];b&&(l[g]=!0);if(g in m){k[e]=m[g];if(b)for(;h<c.length;h++)l[c[h]]=!0;
break}}else e in m&&(f[e]&&(k[e]=m[e]),b&&(l[e]=!0))}if(b)for(e in m)l[e]||(k[e]=m[e]);return k};var n={}},{}],486:[function(a,G,C){G.exports=function(n,m){function f(p,r){r=l[r][p[r]];r.splice(r.indexOf(p),1)}function b(p,r,t){var w;for(w=0;2>w;++w)if(0<l[w][r].length){var x=l[w][r][0];var y=w;break}w=x[y^1];for(var A=0;2>A;++A)for(var z=l[A][r],F=0;F<z.length;++F){var D=z[F],u=D[A^1];0<q(m[p],m[r],m[w],m[u])&&(x=D,w=u,y=A)}if(t)return w;x&&f(x,y);return w}function k(p,r){var t=l[r][p][0],w=[p];
f(t,r);for(r=t[r^1];;){for(;r!==p;)w.push(r),r=b(w[w.length-2],r,!1);if(0===l[0][p].length+l[1][p].length)break;r=w[w.length-1];t=p;var x=w[1],y=b(r,t,!0);if(0>q(m[r],m[t],m[x],m[y]))break;w.push(p);r=b(r,t)}return w}for(var e=m.length|0,h=n.length,l=[Array(e),Array(e)],c=0;c<e;++c)l[0][c]=[],l[1][c]=[];for(c=0;c<h;++c){var g=n[c];l[0][g[0]].push(g);l[1][g[1]].push(g)}n=[];for(c=0;c<e;++c)0===l[0][c].length+l[1][c].length&&n.push([c]);for(c=0;c<e;++c)for(h=0;2>h;++h){for(g=[];0<l[h][c].length;){var d=
k(c,h);d[1]===d[d.length-1]?g.push.apply(g,d):(0<g.length&&n.push(g),g=d)}0<g.length&&n.push(g)}return n};var q=a("compare-angle")},{"compare-angle":132}],487:[function(a,G,C){G.exports=function(n,m){for(var f=q(n,m.length),b=Array(m.length),k=Array(m.length),e=[],h=0;h<m.length;++h){var l=f[h].length;k[h]=l;b[h]=!0;1>=l&&e.push(h)}for(;0<e.length;)for(l=e.pop(),b[l]=!1,l=f[l],h=0;h<l.length;++h){var c=l[h];0===--k[c]&&e.push(c)}f=Array(m.length);k=[];for(h=0;h<m.length;++h)b[h]?(l=k.length,f[h]=
l,k.push(m[h])):f[h]=-1;m=[];for(h=0;h<n.length;++h)e=n[h],b[e[0]]&&b[e[1]]&&m.push([f[e[0]],f[e[1]]]);return[m,k]};var q=a("edges-to-adjacency-list")},{"edges-to-adjacency-list":178}],488:[function(a,G,C){function q(c,g){for(var d=Array(c),p=0;p<c;++p)d[p]=g;return d}function n(c){for(var g=Array(c),d=0;d<c;++d)g[d]=[];return g}G.exports=function(c,g){function d(M){for(var E=M.length,L=0;L<E;++L)if(!J[M[L]])return!1;return!0}var p=l(c,g);c=p[0];g=p[1];for(var r=g.length,t=m(c,g.length),w=0;w<r;++w)if(1===
t[w].length%2)throw Error("planar-graph-to-polyline: graph must be manifold");c=f(c,g);c=c.filter(function(M){for(var E=M.length,L=[0],Q=0;Q<E;++Q){var S=g[M[Q]],R=g[M[(Q+1)%E]],O=k(-S[0],S[1]),T=k(-S[0],R[1]);S=k(R[0],S[1]);R=k(R[0],R[1]);L=e(L,e(e(O,T),e(S,R)))}return 0<L[L.length-1]});p=c.length;var x=Array(p),y=Array(p);for(w=0;w<p;++w){x[w]=w;var A=Array(p);t=c[w].map(function(M){return g[M]});var z=b([t]),F=0,D=0;a:for(;D<p;++D)if(A[D]=0,w!==D){t=c[D];for(var u=t.length,B=0;B<u;++B){var I=z(g[t[B]]);
if(0!==I){0>I&&(A[D]=1,F+=1);continue a}}A[D]=1;F+=1}y[w]=[F,w,A]}y.sort(function(M,E){return E[0]-M[0]});for(w=0;w<p;++w)for(A=y[w],t=A[1],u=A[2],D=0;D<p;++D)u[D]&&(x[D]=t);y=n(p);for(w=0;w<p;++w)y[w].push(x[w]),y[x[w]].push(w);A={};var J=q(r,!1);for(w=0;w<p;++w)for(t=c[w],u=t.length,D=0;D<u;++D)r=t[D],z=t[(D+1)%u],F=Math.min(r,z)+":"+Math.max(r,z),F in A?(F=A[F],y[F].push(w),y[w].push(F),J[r]=J[z]=!0):A[F]=w;D=[];r=q(p,-1);for(w=0;w<p;++w)x[w]!==w||d(c[w])?r[w]=-1:(D.push(w),r[w]=0);for(p=[];0<
D.length;){w=D.pop();x=y[w];h(x,function(M,E){return M-E});u=x.length;A=r[w];if(0===A){t=c[w];var N=[t]}for(w=0;w<u;++w)t=x[w],0<=r[t]||(r[t]=A^1,D.push(t),0===A&&(t=c[t],d(t)||(t.reverse(),N.push(t))));0===A&&p.push(N)}return p};var m=a("edges-to-adjacency-list"),f=a("planar-dual"),b=a("point-in-big-polygon"),k=a("two-product"),e=a("robust-sum"),h=a("uniq"),l=a("./lib/trim-leaves")},{"./lib/trim-leaves":487,"edges-to-adjacency-list":178,"planar-dual":486,"point-in-big-polygon":490,"robust-sum":525,
"two-product":554,uniq:569}],489:[function(a,G,C){arguments[4][243][0].apply(C,arguments)},{dup:243}],490:[function(a,G,C){function q(){return!0}function n(d){return function(p,r){return(p=d[p])?!!p.queryPoint(r,q):!1}}function m(d){for(var p={},r=0;r<d.length;++r){var t=d[r],w=t[0][0],x=t[0][1];t=t[1][1];x=[Math.min(x,t),Math.max(x,t)];w in p?p[w].push(x):p[w]=[x]}d={};w=Object.keys(p);for(r=0;r<w.length;++r)d[w[r]]=c(p[w[r]]);return n(d)}function f(d,p){return function(r){var t=g.le(p,r[0]);if(0>
t)return 1;var w=d[t];if(!w)if(0<t&&p[t]===r[0])w=d[t-1];else return 1;for(t=1;w;){var x=w.key,y=h(r,x[0],x[1]);if(x[0][0]<x[1][0])if(0>y)w=w.left;else if(0<y)t=-1,w=w.right;else return 0;else if(0<y)w=w.left;else if(0>y)t=1,w=w.right;else return 0}return t}}function b(d){return 1}function k(d){return function(p){return d(p[0],p[1])?0:1}}function e(d,p){return function(r){return d(r[0],r[1])?0:p(r)}}G.exports=function(d){for(var p=d.length,r=[],t=[],w=0;w<p;++w)for(var x=d[w],y=x.length,A=y-1,z=0;z<
y;A=z++){A=x[A];var F=x[z];A[0]===F[0]?t.push([A,F]):r.push([A,F])}if(0===r.length)return 0===t.length?b:k(m(t));d=l(r);d=f(d.slabs,d.coordinates);return 0===t.length?d:e(m(t),d)};var h=a("robust-orientation")[3],l=a("slab-decomposition"),c=a("interval-tree-1d"),g=a("binary-search-bounds")},{"binary-search-bounds":489,"interval-tree-1d":434,"robust-orientation":520,"slab-decomposition":537}],491:[function(a,G,C){function q(c,g,d){c=l.segments(c);g=l.segments(g);g=l.combine(c,g);d=d(g);return l.polygon(d)}
var n=a("./lib/build-log");C=a("./lib/epsilon");var m=a("./lib/intersecter"),f=a("./lib/segment-chainer"),b=a("./lib/segment-selector"),k=a("./lib/geojson"),e=!1,h=C();var l={buildLog:function(c){!0===c?e=n():!1===c&&(e=!1);return!1===e?!1:e.list},epsilon:function(c){return h.epsilon(c)},segments:function(c){var g=m(!0,h,e);c.regions.forEach(g.addRegion);return{segments:g.calculate(c.inverted),inverted:c.inverted}},combine:function(c,g){return{combined:m(!1,h,e).calculate(c.segments,c.inverted,g.segments,
g.inverted),inverted1:c.inverted,inverted2:g.inverted}},selectUnion:function(c){return{segments:b.union(c.combined,e),inverted:c.inverted1||c.inverted2}},selectIntersect:function(c){return{segments:b.intersect(c.combined,e),inverted:c.inverted1&&c.inverted2}},selectDifference:function(c){return{segments:b.difference(c.combined,e),inverted:c.inverted1&&!c.inverted2}},selectDifferenceRev:function(c){return{segments:b.differenceRev(c.combined,e),inverted:!c.inverted1&&c.inverted2}},selectXor:function(c){return{segments:b.xor(c.combined,
e),inverted:c.inverted1!==c.inverted2}},polygon:function(c){return{regions:f(c.segments,h,e),inverted:c.inverted}},polygonFromGeoJSON:function(c){return k.toPolygon(l,c)},polygonToGeoJSON:function(c){return k.fromPolygon(l,h,c)},union:function(c,g){return q(c,g,l.selectUnion)},intersect:function(c,g){return q(c,g,l.selectIntersect)},difference:function(c,g){return q(c,g,l.selectDifference)},differenceRev:function(c,g){return q(c,g,l.selectDifferenceRev)},xor:function(c,g){return q(c,g,l.selectXor)}};
"object"===typeof window&&(window.PolyBool=l);G.exports=l},{"./lib/build-log":492,"./lib/epsilon":493,"./lib/geojson":494,"./lib/intersecter":495,"./lib/segment-chainer":497,"./lib/segment-selector":498}],492:[function(a,G,C){G.exports=function(){function q(b,k){n.list.push({type:b,data:k?JSON.parse(JSON.stringify(k)):void 0});return n}var n,m=0,f=!1;return n={list:[],segmentId:function(){return m++},checkIntersection:function(b,k){return q("check",{seg1:b,seg2:k})},segmentChop:function(b,k){q("div_seg",
{seg:b,pt:k});return q("chop",{seg:b,pt:k})},statusRemove:function(b){return q("pop_seg",{seg:b})},segmentUpdate:function(b){return q("seg_update",{seg:b})},segmentNew:function(b,k){return q("new_seg",{seg:b,primary:k})},segmentRemove:function(b){return q("rem_seg",{seg:b})},tempStatus:function(b,k,e){return q("temp_status",{seg:b,above:k,below:e})},rewind:function(b){return q("rewind",{seg:b})},status:function(b,k,e){return q("status",{seg:b,above:k,below:e})},vert:function(b){if(b===f)return n;
f=b;return q("vert",{x:b})},log:function(b){"string"!==typeof b&&(b=JSON.stringify(b,!1,"  "));return q("log",{txt:b})},reset:function(){return q("reset")},selected:function(b){return q("selected",{segs:b})},chainStart:function(b){return q("chain_start",{seg:b})},chainRemoveHead:function(b,k){return q("chain_rem_head",{index:b,pt:k})},chainRemoveTail:function(b,k){return q("chain_rem_tail",{index:b,pt:k})},chainNew:function(b,k){return q("chain_new",{pt1:b,pt2:k})},chainMatch:function(b){return q("chain_match",
{index:b})},chainClose:function(b){return q("chain_close",{index:b})},chainAddHead:function(b,k){return q("chain_add_head",{index:b,pt:k})},chainAddTail:function(b,k){return q("chain_add_tail",{index:b,pt:k})},chainConnect:function(b,k){return q("chain_con",{index1:b,index2:k})},chainReverse:function(b){return q("chain_rev",{index:b})},chainJoin:function(b,k){return q("chain_join",{index1:b,index2:k})},done:function(){return q("done")}}}},{}],493:[function(a,G,C){G.exports=function(q){"number"!==
typeof q&&(q=1E-10);var n={epsilon:function(m){"number"===typeof m&&(q=m);return q},pointAboveOrOnLine:function(m,f,b){var k=f[0];f=f[1];return(b[0]-k)*(m[1]-f)-(b[1]-f)*(m[0]-k)>=-q},pointBetween:function(m,f,b){var k=b[0]-f[0];b=b[1]-f[1];m=(m[0]-f[0])*k+(m[1]-f[1])*b;return m<q||m-(k*k+b*b)>-q?!1:!0},pointsSameX:function(m,f){return Math.abs(m[0]-f[0])<q},pointsSameY:function(m,f){return Math.abs(m[1]-f[1])<q},pointsSame:function(m,f){return n.pointsSameX(m,f)&&n.pointsSameY(m,f)},pointsCompare:function(m,
f){return n.pointsSameX(m,f)?n.pointsSameY(m,f)?0:m[1]<f[1]?-1:1:m[0]<f[0]?-1:1},pointsCollinear:function(m,f,b){return Math.abs((m[0]-f[0])*(f[1]-b[1])-(f[0]-b[0])*(m[1]-f[1]))<q},linesIntersect:function(m,f,b,k){var e=f[0]-m[0];f=f[1]-m[1];var h=k[0]-b[0],l=k[1]-b[1];k=e*l-f*h;if(Math.abs(k)<q)return!1;var c=m[0]-b[0];b=m[1]-b[1];h=(h*b-l*c)/k;b=(e*b-f*c)/k;m={alongA:0,alongB:0,pt:[m[0]+h*e,m[1]+h*f]};m.alongA=h<=-q?-2:h<q?-1:h-1<=-q?0:h-1<q?1:2;m.alongB=b<=-q?-2:b<q?-1:b-1<=-q?0:b-1<q?1:2;return m},
pointInsideRegion:function(m,f){var b=m[0];m=m[1];for(var k=f[f.length-1][0],e=f[f.length-1][1],h=!1,l=0;l<f.length;l++){var c=f[l][0],g=f[l][1];g-m>q!=e-m>q&&(k-c)*(m-g)/(e-g)+c-b>q&&(h=!h);k=c;e=g}return h}};return n}},{}],494:[function(a,G,C){G.exports={toPolygon:function(q,n){function m(k){function e(c){c=c.slice(0,c.length-1);return q.segments({inverted:!1,regions:[c]})}if(0>=k.length)return q.segments({inverted:!1,regions:[]});for(var h=e(k[0]),l=1;l<k.length;l++)h=q.selectDifference(q.combine(h,
e(k[l])));return h}if("Polygon"===n.type)return q.polygon(m(n.coordinates));if("MultiPolygon"===n.type){for(var f=q.segments({inverted:!1,regions:[]}),b=0;b<n.coordinates.length;b++)f=q.selectUnion(q.combine(f,m(n.coordinates[b])));return q.polygon(f)}throw Error("PolyBool: Cannot convert GeoJSON object to PolyBool polygon");},fromPolygon:function(q,n,m){function f(d,p){return n.pointInsideRegion([.5*(d[0][0]+d[1][0]),.5*(d[0][1]+d[1][1])],p)}function b(d,p){for(var r=0;r<d.children.length;r++){var t=
d.children[r];if(f(p,t.region)){b(t,p);return}}var w={region:p,children:[]};for(r=0;r<d.children.length;r++)t=d.children[r],f(t.region,p)&&(w.children.push(t),d.children.splice(r,1),r--);d.children.push(w)}function k(d,p){for(var r=0,t=d[d.length-1][0],w=d[d.length-1][1],x=[],y=0;y<d.length;y++){var A=d[y][0],z=d[y][1];x.push([A,z]);r+=z*t-A*w;t=A;w=z}0>r!==p&&x.reverse();x.push([x[0][0],x[0][1]]);return x}function e(d){var p=[k(d.region,!1)];g.push(p);for(var r=0;r<d.children.length;r++)p.push(h(d.children[r]))}
function h(d){for(var p=0;p<d.children.length;p++)e(d.children[p]);return k(d.region,!0)}m=q.polygon(q.segments(m));q={region:null,children:[]};for(var l=0;l<m.regions.length;l++){var c=m.regions[l];3>c.length||b(q,c)}var g=[];for(l=0;l<q.children.length;l++)e(q.children[l]);return 0>=g.length?{type:"Polygon",coordinates:[]}:1==g.length?{type:"Polygon",coordinates:g[0]}:{type:"MultiPolygon",coordinates:g}}}},{}],495:[function(a,G,C){var q=a("./linked-list");G.exports=function(n,m,f){function b(g,
d,p){return{id:f?f.segmentId():-1,start:g,end:d,myFill:{above:p.myFill.above,below:p.myFill.below},otherFill:null}}function k(g,d){c.insertBefore(g,function(p){var r=g.isStart;var t=p.isStart,w=p.pt;p=p.other.pt;var x=m.pointsCompare(g.pt,w);r=0!==x?x:m.pointsSame(d,p)?0:r!==t?r?1:-1:m.pointAboveOrOnLine(d,t?w:p,t?p:w)?1:-1;return 0>r})}function e(g,d){var p=q.node({isStart:!0,pt:g.start,seg:g,primary:d,other:null,status:null});k(p,g.end);g=q.node({isStart:!1,pt:g.end,seg:g,primary:d,other:p,status:null});
p.other=g;k(g,p.pt);return p}function h(g,d){var p=b(d,g.seg.end,g.seg);f&&f.segmentChop(g.seg,d);g.other.remove();g.seg.end=d;g.other.pt=d;k(g.other,g.pt);return e(p,g.primary)}function l(g,d){function p(u){return t.findTransition(function(B){var I=B.ev;B=u.seg.start;var J=u.seg.end,N=I.seg.start;I=I.seg.end;B=m.pointsCollinear(B,N,I)?m.pointsCollinear(J,N,I)?1:m.pointAboveOrOnLine(J,N,I)?1:-1:m.pointAboveOrOnLine(B,N,I)?1:-1;return 0<B})}function r(u,B){var I=u.seg,J=B.seg,N=I.start,M=I.end,E=J.start,
L=J.end;f&&f.checkIntersection(I,J);I=m.linesIntersect(N,M,E,L);if(!1===I){if(!m.pointsCollinear(N,M,E)||m.pointsSame(N,L)||m.pointsSame(M,E))return!1;I=m.pointsSame(N,E);J=m.pointsSame(M,L);if(I&&J)return B;var Q=!I&&m.pointBetween(N,E,L);E=!J&&m.pointBetween(M,E,L);if(I)return E?h(B,M):h(u,L),B;Q&&(J||(E?h(B,M):h(u,L)),h(B,N))}else 0===I.alongA&&(-1===I.alongB?h(u,E):0===I.alongB?h(u,I.pt):1===I.alongB&&h(u,L)),0===I.alongB&&(-1===I.alongA?h(B,N):0===I.alongA?h(B,I.pt):1===I.alongA&&h(B,M));return!1}
for(var t=q.create(),w=[];!c.isEmpty();){var x=c.getHead();f&&f.vert(x.pt[0]);if(x.isStart){f&&f.segmentNew(x.seg,x.primary);var y=p(x),A=y.before?y.before.ev:null,z=y.after?y.after.ev:null;f&&f.tempStatus(x.seg,A?A.seg:!1,z?z.seg:!1);var F=function(){if(A){var u=r(x,A);if(u)return u}return z?r(x,z):!1}();if(F){if(n){var D;if(D=null===x.seg.myFill.below?!0:x.seg.myFill.above!==x.seg.myFill.below)F.seg.myFill.above=!F.seg.myFill.above}else F.seg.otherFill=x.seg.myFill;f&&f.segmentUpdate(F.seg);x.other.remove();
x.remove()}if(c.getHead()!==x){f&&f.rewind(x.seg);continue}n?(D=null===x.seg.myFill.below?!0:x.seg.myFill.above!==x.seg.myFill.below,x.seg.myFill.below=z?z.seg.myFill.above:g,x.seg.myFill.above=D?!x.seg.myFill.below:x.seg.myFill.below):null===x.seg.otherFill&&(F=z?x.primary===z.primary?z.seg.otherFill.above:z.seg.myFill.above:x.primary?d:g,x.seg.otherFill={above:F,below:F});f&&f.status(x.seg,A?A.seg:!1,z?z.seg:!1);x.other.status=y.insert(q.node({ev:x}))}else{y=x.status;if(null===y)throw Error("PolyBool: Zero-length segment detected; your epsilon is probably too small or too large");
t.exists(y.prev)&&t.exists(y.next)&&r(y.prev.ev,y.next.ev);f&&f.statusRemove(y.ev.seg);y.remove();x.primary||(y=x.seg.myFill,x.seg.myFill=x.seg.otherFill,x.seg.otherFill=y);w.push(x.seg)}c.getHead().remove()}f&&f.done();return w}var c=q.create();return n?{addRegion:function(g){for(var d,p=g[g.length-1],r=0;r<g.length;r++){d=p;p=g[r];var t=m.pointsCompare(d,p);if(0!==t){var w=0>t?d:p;d=0>t?p:d;w={id:f?f.segmentId():-1,start:w,end:d,myFill:{above:null,below:null},otherFill:null};e(w,!0)}}},calculate:function(g){return l(g,
!1)}}:{calculate:function(g,d,p,r){g.forEach(function(t){e(b(t.start,t.end,t),!0)});p.forEach(function(t){e(b(t.start,t.end,t),!1)});return l(d,r)}}}},{"./linked-list":496}],496:[function(a,G,C){G.exports={create:function(){var q={root:{root:!0,next:null},exists:function(n){return null===n||n===q.root?!1:!0},isEmpty:function(){return null===q.root.next},getHead:function(){return q.root.next},insertBefore:function(n,m){for(var f=q.root,b=q.root.next;null!==b;){if(m(b)){n.prev=b.prev;n.next=b;b.prev.next=
n;b.prev=n;return}f=b;b=b.next}f.next=n;n.prev=f;n.next=null},findTransition:function(n){for(var m=q.root,f=q.root.next;null!==f&&!n(f);)m=f,f=f.next;return{before:m===q.root?null:m,after:f,insert:function(b){b.prev=m;b.next=f;m.next=b;null!==f&&(f.prev=b);return b}}}};return q},node:function(q){q.prev=null;q.next=null;q.remove=function(){if(q.prev.next=q.next)q.next.prev=q.prev;q.prev=null;q.next=null};return q}}},{}],497:[function(a,G,C){G.exports=function(q,n,m){var f=[],b=[];q.forEach(function(k){function e(z,
F,D){r.index=z;r.matches_head=F;r.matches_pt1=D;if(r===d)return r=p,!1;r=null;return!0}function h(z){m&&m.chainReverse(z);f[z].reverse()}function l(z,F){var D=f[z],u=f[F],B=D[D.length-1],I=D[D.length-2],J=u[0],N=u[1];n.pointsCollinear(I,B,J)&&(m&&m.chainRemoveTail(z,B),D.pop(),B=I);n.pointsCollinear(B,J,N)&&(m&&m.chainRemoveHead(F,J),u.shift());m&&m.chainJoin(z,F);f[z]=D.concat(u);f.splice(F,1)}var c=k.start,g=k.end;if(n.pointsSame(c,g))console.warn("PolyBool: Warning: Zero-length segment detected; your epsilon is probably too small or too large");
else{m&&m.chainStart(k);for(var d={index:0,matches_head:!1,matches_pt1:!1},p={index:0,matches_head:!1,matches_pt1:!1},r=d,t=0;t<f.length;t++){k=f[t];var w=k[0];k=k[k.length-1];if(n.pointsSame(w,c)){if(e(t,!0,!0))break}else if(n.pointsSame(w,g)){if(e(t,!0,!1))break}else if(n.pointsSame(k,c)){if(e(t,!1,!0))break}else if(n.pointsSame(k,g)&&e(t,!1,!1))break}if(r===d)f.push([c,g]),m&&m.chainNew(c,g);else if(r===p){m&&m.chainMatch(d.index);t=d.index;c=d.matches_pt1?g:c;g=d.matches_head;k=f[t];w=g?k[0]:
k[k.length-1];var x=g?k[1]:k[k.length-2],y=g?k[k.length-1]:k[0],A=g?k[k.length-2]:k[1];n.pointsCollinear(x,w,c)&&(g?(m&&m.chainRemoveHead(d.index,c),k.shift()):(m&&m.chainRemoveTail(d.index,c),k.pop()),w=x);n.pointsSame(y,c)?(f.splice(t,1),n.pointsCollinear(A,y,w)&&(g?(m&&m.chainRemoveTail(d.index,w),k.pop()):(m&&m.chainRemoveHead(d.index,w),k.shift())),m&&m.chainClose(d.index),b.push(k)):g?(m&&m.chainAddHead(d.index,c),k.unshift(c)):(m&&m.chainAddTail(d.index,c),k.push(c))}else k=d.index,t=p.index,
m&&m.chainConnect(k,t),c=f[k].length<f[t].length,d.matches_head?p.matches_head?c?(h(k),l(k,t)):(h(t),l(t,k)):l(t,k):p.matches_head?l(k,t):c?(h(k),l(t,k)):(h(t),l(k,t))}});return b}},{}],498:[function(a,G,C){function q(n,m,f){var b=[];n.forEach(function(k){var e=(k.myFill.above?8:0)+(k.myFill.below?4:0)+(k.otherFill&&k.otherFill.above?2:0)+(k.otherFill&&k.otherFill.below?1:0);0!==m[e]&&b.push({id:f?f.segmentId():-1,start:k.start,end:k.end,myFill:{above:1===m[e],below:2===m[e]},otherFill:null})});f&&
f.selected(b);return b}G.exports={union:function(n,m){return q(n,[0,2,1,0,2,2,0,0,1,0,1,0,0,0,0,0],m)},intersect:function(n,m){return q(n,[0,0,0,0,0,2,0,2,0,0,1,1,0,2,1,0],m)},difference:function(n,m){return q(n,[0,0,0,0,2,0,2,0,1,1,0,0,0,1,2,0],m)},differenceRev:function(n,m){return q(n,[0,2,1,0,0,0,1,1,0,2,0,2,0,0,0,0],m)},xor:function(n,m){return q(n,[0,2,1,0,2,0,0,1,1,0,0,2,0,1,2,0],m)}}},{}],499:[function(a,G,C){var q=new Float64Array(4),n=new Float64Array(4),m=new Float64Array(4);G.exports=
function(f,b,k,e,h){q.length<e.length&&(q=new Float64Array(e.length),n=new Float64Array(e.length),m=new Float64Array(e.length));for(var l=0;l<e.length;++l)q[l]=f[l]-e[l],n[l]=b[l]-f[l],m[l]=k[l]-f[l];var c=0,g=0,d=0,p=0,r=0,t=0;for(l=0;l<e.length;++l){var w=n[l],x=m[l],y=q[l];c+=w*w;g+=w*x;d+=x*x;p+=y*w;r+=y*x;t+=y*y}l=Math.abs(c*d-g*g);w=g*r-d*p;x=g*p-c*r;w+x<=l?0>w?0>x?0>p?(x=0,-p>=c?(w=1,c=c+2*p+t):(w=-p/c,c=p*w+t)):(w=0,0<=r?(x=0,c=t):-r>=d?(x=1,c=d+2*r+t):(x=-r/d,c=r*x+t)):(w=0,0<=r?(x=0,c=t):
-r>=d?(x=1,c=d+2*r+t):(x=-r/d,c=r*x+t)):0>x?(x=0,0<=p?(w=0,c=t):-p>=c?(w=1,c=c+2*p+t):(w=-p/c,c=p*w+t)):(l=1/l,w*=l,x*=l,c=w*(c*w+g*x+2*p)+x*(g*w+d*x+2*r)+t):0>w?(w=g+p,l=d+r,l>w?(l-=w,w=c-2*g+d,l>=w?(w=1,x=0,c=c+2*p+t):(w=l/w,x=1-w,c=w*(c*w+g*x+2*p)+x*(g*w+d*x+2*r)+t)):(w=0,0>=l?(x=1,c=d+2*r+t):0<=r?(x=0,c=t):(x=-r/d,c=r*x+t))):0>x?(w=g+r,l=c+p,l>w?(l-=w,w=c-2*g+d,l>=w?(x=1,w=0,c=d+2*r+t):(x=l/w,w=1-x,c=w*(c*w+g*x+2*p)+x*(g*w+d*x+2*r)+t)):(x=0,0>=l?(w=1,c=c+2*p+t):0<=p?(w=0,c=t):(w=-p/c,c=p*w+t))):
(l=d+r-g-p,0>=l?(w=0,x=1,c=d+2*r+t):(w=c-2*g+d,l>=w?(w=1,x=0,c=c+2*p+t):(w=l/w,x=1-w,c=w*(c*w+g*x+2*p)+x*(g*w+d*x+2*r)+t)));g=1-w-x;for(l=0;l<e.length;++l)h[l]=g*f[l]+w*b[l]+x*k[l];return 0>c?0:c}},{}],500:[function(a,G,C){function q(){throw Error("setTimeout has not been defined");}function n(){throw Error("clearTimeout has not been defined");}function m(t){if(l===setTimeout)return setTimeout(t,0);if((l===q||!l)&&setTimeout)return l=setTimeout,setTimeout(t,0);try{return l(t,0)}catch(w){try{return l.call(null,
t,0)}catch(x){return l.call(this,t,0)}}}function f(t){if(c===clearTimeout)return clearTimeout(t);if((c===n||!c)&&clearTimeout)return c=clearTimeout,clearTimeout(t);try{return c(t)}catch(w){try{return c.call(null,t)}catch(x){return c.call(this,t)}}}function b(){d&&p&&(d=!1,p.length?g=p.concat(g):r=-1,g.length&&k())}function k(){if(!d){var t=m(b);d=!0;for(var w=g.length;w;){p=g;for(g=[];++r<w;)p&&p[r].run();r=-1;w=g.length}p=null;d=!1;f(t)}}function e(t,w){this.fun=t;this.array=w}function h(){}a=G.exports=
{};try{var l="function"===typeof setTimeout?setTimeout:q}catch(t){l=q}try{var c="function"===typeof clearTimeout?clearTimeout:n}catch(t){c=n}var g=[],d=!1,p,r=-1;a.nextTick=function(t){var w=Array(arguments.length-1);if(1<arguments.length)for(var x=1;x<arguments.length;x++)w[x-1]=arguments[x];g.push(new e(t,w));1!==g.length||d||m(k)};e.prototype.run=function(){this.fun.apply(null,this.array)};a.title="browser";a.browser=!0;a.env={};a.argv=[];a.version="";a.versions={};a.on=h;a.addListener=h;a.once=
h;a.off=h;a.removeListener=h;a.removeAllListeners=h;a.emit=h;a.prependListener=h;a.prependOnceListener=h;a.listeners=function(t){return[]};a.binding=function(t){throw Error("process.binding is not supported");};a.cwd=function(){return"/"};a.chdir=function(t){throw Error("process.chdir is not supported");};a.umask=function(){return 0}},{}],501:[function(a,G,C){G.exports=a("gl-quat/slerp")},{"gl-quat/slerp":304}],502:[function(a,G,C){(function(q){var n=a("performance-now"),m="undefined"===typeof window?
q:window;q=["moz","webkit"];for(var f=m.requestAnimationFrame,b=m.cancelAnimationFrame||m.cancelRequestAnimationFrame,k=0;!f&&k<q.length;k++)f=m[q[k]+"RequestAnimationFrame"],b=m[q[k]+"CancelAnimationFrame"]||m[q[k]+"CancelRequestAnimationFrame"];if(!f||!b){var e=0,h=0,l=[],c=1E3/60;f=function(g){if(0===l.length){var d=n(),p=Math.max(0,c-(d-e));e=p+d;setTimeout(function(){for(var r=l.slice(0),t=l.length=0;t<r.length;t++)if(!r[t].cancelled)try{r[t].callback(e)}catch(w){setTimeout(function(){throw w;
},0)}},Math.round(p))}l.push({handle:++h,callback:g,cancelled:!1});return h};b=function(g){for(var d=0;d<l.length;d++)l[d].handle===g&&(l[d].cancelled=!0)}}G.exports=function(g){return f.call(m,g)};G.exports.cancel=function(){b.apply(m,arguments)};G.exports.polyfill=function(g){g||(g=m);g.requestAnimationFrame=f;g.cancelAnimationFrame=b}}).call(this,"undefined"!==typeof la?la:"undefined"!==typeof self?self:"undefined"!==typeof window?window:{})},{"performance-now":482}],503:[function(a,G,C){var q=
a("big-rat/add");G.exports=function(n,m){for(var f=n.length,b=Array(f),k=0;k<f;++k)b[k]=q(n[k],m[k]);return b}},{"big-rat/add":80}],504:[function(a,G,C){G.exports=function(n){for(var m=Array(n.length),f=0;f<n.length;++f)m[f]=q(n[f]);return m};var q=a("big-rat")},{"big-rat":83}],505:[function(a,G,C){var q=a("big-rat"),n=a("big-rat/mul");G.exports=function(m,f){f=q(f);for(var b=m.length,k=Array(b),e=0;e<b;++e)k[e]=n(m[e],f);return k}},{"big-rat":83,"big-rat/mul":92}],506:[function(a,G,C){var q=a("big-rat/sub");
G.exports=function(n,m){for(var f=n.length,b=Array(f),k=0;k<f;++k)b[k]=q(n[k],m[k]);return b}},{"big-rat/sub":94}],507:[function(a,G,C){var q=a("compare-cell"),n=a("compare-oriented-cell"),m=a("cell-orientation");G.exports=function(f){f.sort(n);for(var b=f.length,k=0,e=0;e<b;++e){var h=f[e],l=m(h);if(0!==l){if(0<k){var c=f[k-1];if(0===q(h,c)&&m(c)!==l){--k;continue}}f[k++]=h}}f.length=k;return f}},{"cell-orientation":117,"compare-cell":133,"compare-oriented-cell":134}],508:[function(a,G,C){var q=
a("array-bounds"),n=a("color-normalize"),m=a("update-diff"),f=a("pick-by-alias"),b=a("object-assign"),k=a("flatten-vertex-data");a=a("to-float32");var e=a.float32,h=a.fract32;G.exports=function(c,g){function d(J){J?t(J):null===J&&w();p()}function p(J){if("number"===typeof J)return r(J);J&&!Array.isArray(J)&&(J=[J]);c._refresh();A.forEach(function(N,M){N&&(J&&(N.draw=J[M]?!0:!1),N.draw?r(M):N.draw=!0)})}function r(J){"number"===typeof J&&(J=A[J]);null!=J&&J&&J.count&&J.color&&J.opacity&&J.positions&&
1<J.positions.length&&(J.scaleRatio=[J.scale[0]*J.viewport.width,J.scale[1]*J.viewport.height],I(J),J.after&&J.after(J))}function t(J){if(J){null!=J.length?"number"===typeof J[0]&&(J=[{positions:J}]):Array.isArray(J)||(J=[J]);var N=0,M=0;d.groups=A=J.map(function(S,R){var O=A[R];if(S)"function"===typeof S?S={after:S}:"number"===typeof S[0]&&(S={positions:S});else return O;S=f(S,{color:"color colors fill",capSize:"capSize cap capsize cap-size",lineWidth:"lineWidth line-width width line thickness",
opacity:"opacity alpha",range:"range dataBox",viewport:"viewport viewBox",errors:"errors error",positions:"positions position data points"});O||(A[R]=O={id:R,scale:null,translate:null,scaleFract:null,translateFract:null,draw:!0},S=b({},y,S));m(O,S,[{lineWidth:function(T){return.5*+T},capSize:function(T){return.5*+T},opacity:parseFloat,errors:function(T){T=k(T);M+=T.length;return T},positions:function(T,V){T=k(T,"float64");V.count=Math.floor(T.length/2);V.bounds=q(T,2);V.offset=N;N+=V.count;return T}},
{color:function(T,V){V=V.count;T||(T="transparent");if(!Array.isArray(T)||"number"===typeof T[0]){var X=T;T=Array(V);for(var ba=0;ba<V;ba++)T[ba]=X}if(T.length<V)throw Error("Not enough colors");X=new Uint8Array(4*V);for(ba=0;ba<V;ba++){var aa=n(T[ba],"uint8");X.set(aa,4*ba)}return X},range:function(T,V,X){X=V.bounds;T||(T=X);V.scale=[1/(T[2]-T[0]),1/(T[3]-T[1])];V.translate=[-T[0],-T[1]];V.scaleFract=h(V.scale);V.translateFract=h(V.translate);return T},viewport:function(T){if(Array.isArray(T))var V=
{x:T[0],y:T[1],width:T[2]-T[0],height:T[3]-T[1]};else T?(V={x:T.x||T.left||0,y:T.y||T.top||0},V.width=T.right?T.right-V.x:T.w||T.width||0,V.height=T.bottom?T.bottom-V.y:T.h||T.height||0):V={x:0,y:0,width:x.drawingBufferWidth,height:x.drawingBufferHeight};return V}}]);return O});if(N||M){J=A.reduce(function(S,R,O){return S+(R?R.count:0)},0);var E=new Float64Array(2*J),L=new Uint8Array(4*J),Q=new Float32Array(4*J);A.forEach(function(S,R){if(S){R=S.positions;var O=S.offset,T=S.errors;S.count&&(L.set(S.color,
4*O),Q.set(T,4*O),E.set(R,2*O))}});F(e(E));D(h(E));z(L);u(Q)}}}function w(){F.destroy();D.destroy();z.destroy();u.destroy();B.destroy()}"function"===typeof c?(g||(g={}),g.regl=c):g=c;g.length&&(g.positions=g);c=g.regl;if(!c.hasExtension("ANGLE_instanced_arrays"))throw Error("regl-error2d: `ANGLE_instanced_arrays` extension should be enabled");var x=c._gl,y={color:"black",capSize:5,lineWidth:1,opacity:1,viewport:null,range:null,offset:0,count:0,bounds:null,positions:[],errors:[]},A=[];var z=c.buffer({usage:"dynamic",
type:"uint8",data:new Uint8Array(0)});var F=c.buffer({usage:"dynamic",type:"float",data:new Uint8Array(0)});var D=c.buffer({usage:"dynamic",type:"float",data:new Uint8Array(0)});var u=c.buffer({usage:"dynamic",type:"float",data:new Uint8Array(0)});var B=c.buffer({usage:"static",type:"float",data:l});t(g);var I=c({vert:"\n\t\tprecision highp float;\n\n\t\tattribute vec2 position, positionFract;\n\t\tattribute vec4 error;\n\t\tattribute vec4 color;\n\n\t\tattribute vec2 direction, lineOffset, capOffset;\n\n\t\tuniform vec4 viewport;\n\t\tuniform float lineWidth, capSize;\n\t\tuniform vec2 scale, scaleFract, translate, translateFract;\n\n\t\tvarying vec4 fragColor;\n\n\t\tvoid main() {\n\t\t\tfragColor \x3d color / 255.;\n\n\t\t\tvec2 pixelOffset \x3d lineWidth * lineOffset + (capSize + lineWidth) * capOffset;\n\n\t\t\tvec2 dxy \x3d -step(.5, direction.xy) * error.xz + step(direction.xy, vec2(-.5)) * error.yw;\n\n\t\t\tvec2 position \x3d position + dxy;\n\n\t\t\tvec2 pos \x3d (position + translate) * scale\n\t\t\t\t+ (positionFract + translateFract) * scale\n\t\t\t\t+ (position + translate) * scaleFract\n\t\t\t\t+ (positionFract + translateFract) * scaleFract;\n\n\t\t\tpos +\x3d pixelOffset / viewport.zw;\n\n\t\t\tgl_Position \x3d vec4(pos * 2. - 1., 0, 1);\n\t\t}\n\t\t",
frag:"\n\t\tprecision highp float;\n\n\t\tvarying vec4 fragColor;\n\n\t\tuniform float opacity;\n\n\t\tvoid main() {\n\t\t\tgl_FragColor \x3d fragColor;\n\t\t\tgl_FragColor.a *\x3d opacity;\n\t\t}\n\t\t",uniforms:{range:c.prop("range"),lineWidth:c.prop("lineWidth"),capSize:c.prop("capSize"),opacity:c.prop("opacity"),scale:c.prop("scale"),translate:c.prop("translate"),scaleFract:c.prop("scaleFract"),translateFract:c.prop("translateFract"),viewport:function(J,N){return[N.viewport.x,N.viewport.y,J.viewportWidth,
J.viewportHeight]}},attributes:{color:{buffer:z,offset:function(J,N){return 4*N.offset},divisor:1},position:{buffer:F,offset:function(J,N){return 8*N.offset},divisor:1},positionFract:{buffer:D,offset:function(J,N){return 8*N.offset},divisor:1},error:{buffer:u,offset:function(J,N){return 16*N.offset},divisor:1},direction:{buffer:B,stride:24,offset:0},lineOffset:{buffer:B,stride:24,offset:8},capOffset:{buffer:B,stride:24,offset:16}},primitive:"triangles",blend:{enable:!0,color:[0,0,0,0],equation:{rgb:"add",
alpha:"add"},func:{srcRGB:"src alpha",dstRGB:"one minus src alpha",srcAlpha:"one minus dst alpha",dstAlpha:"one"}},depth:{enable:!1},scissor:{enable:!0,box:c.prop("viewport")},viewport:c.prop("viewport"),stencil:!1,instances:c.prop("count"),count:l.length});b(d,{update:t,draw:p,destroy:w,regl:c,gl:x,canvas:x.canvas,groups:A});return d};var l=[[1,0,0,1,0,0],[1,0,0,-1,0,0],[-1,0,0,-1,0,0],[-1,0,0,-1,0,0],[-1,0,0,1,0,0],[1,0,0,1,0,0],[1,0,-1,0,0,1],[1,0,-1,0,0,-1],[1,0,1,0,0,-1],[1,0,1,0,0,-1],[1,0,
1,0,0,1],[1,0,-1,0,0,1],[-1,0,-1,0,0,1],[-1,0,-1,0,0,-1],[-1,0,1,0,0,-1],[-1,0,1,0,0,-1],[-1,0,1,0,0,1],[-1,0,-1,0,0,1],[0,1,1,0,0,0],[0,1,-1,0,0,0],[0,-1,-1,0,0,0],[0,-1,-1,0,0,0],[0,1,1,0,0,0],[0,-1,1,0,0,0],[0,1,0,-1,1,0],[0,1,0,-1,-1,0],[0,1,0,1,-1,0],[0,1,0,1,1,0],[0,1,0,-1,1,0],[0,1,0,1,-1,0],[0,-1,0,-1,1,0],[0,-1,0,-1,-1,0],[0,-1,0,1,-1,0],[0,-1,0,1,1,0],[0,-1,0,-1,1,0],[0,-1,0,1,-1,0]]},{"array-bounds":70,"color-normalize":125,"flatten-vertex-data":244,"object-assign":473,"pick-by-alias":485,
"to-float32":549,"update-diff":571}],509:[function(a,G,C){function q(p,r){if(!(this instanceof q))return new q(p,r);"function"===typeof p?(r||(r={}),r.regl=p):r=p;r.length&&(r.positions=r);p=r.regl;if(!p.hasExtension("ANGLE_instanced_arrays"))throw Error("regl-error2d: `ANGLE_instanced_arrays` extension should be enabled");this.gl=p._gl;this.regl=p;this.passes=[];this.shaders=q.shaders.has(p)?q.shaders.get(p):q.shaders.set(p,q.createShaders(p)).get(p);this.update(r)}var n=a("color-normalize"),m=a("array-bounds"),
f=a("object-assign"),b=a("glslify"),k=a("pick-by-alias"),e=a("flatten-vertex-data"),h=a("earcut"),l=a("array-normalize");C=a("to-float32");var c=C.float32,g=C.fract32;C=a("es6-weak-map");var d=a("parse-rect");G.exports=q;q.dashMult=2;q.maxPatternLength=256;q.precisionThreshold=3E6;q.maxPoints=1E4;q.maxLines=2048;q.shaders=new C;q.createShaders=function(p){var r=p.buffer({usage:"static",type:"float",data:[0,1,0,0,1,1,1,0]}),t={primitive:"triangle strip",instances:p.prop("count"),count:4,offset:0,uniforms:{miterMode:function(y,
A){return"round"===A.join?2:1},miterLimit:p.prop("miterLimit"),scale:p.prop("scale"),scaleFract:p.prop("scaleFract"),translateFract:p.prop("translateFract"),translate:p.prop("translate"),thickness:p.prop("thickness"),dashPattern:p.prop("dashTexture"),opacity:p.prop("opacity"),pixelRatio:p.context("pixelRatio"),id:p.prop("id"),dashSize:p.prop("dashLength"),viewport:function(y,A){return[A.viewport.x,A.viewport.y,y.viewportWidth,y.viewportHeight]},depth:p.prop("depth")},blend:{enable:!0,color:[0,0,0,
0],equation:{rgb:"add",alpha:"add"},func:{srcRGB:"src alpha",dstRGB:"one minus src alpha",srcAlpha:"one minus dst alpha",dstAlpha:"one"}},depth:{enable:function(y,A){return!A.overlay}},stencil:{enable:!1},scissor:{enable:!0,box:p.prop("viewport")},viewport:p.prop("viewport")},w=p(f({vert:b(["precision highp float;\n#define GLSLIFY 1\n\nattribute vec2 aCoord, bCoord, aCoordFract, bCoordFract;\nattribute vec4 color;\nattribute float lineEnd, lineTop;\n\nuniform vec2 scale, scaleFract, translate, translateFract;\nuniform float thickness, pixelRatio, id, depth;\nuniform vec4 viewport;\n\nvarying vec4 fragColor;\nvarying vec2 tangent;\n\nvec2 project(vec2 position, vec2 positionFract, vec2 scale, vec2 scaleFract, vec2 translate, vec2 translateFract) {\n\t// the order is important\n\treturn position * scale + translate\n       + positionFract * scale + translateFract\n       + position * scaleFract\n       + positionFract * scaleFract;\n}\n\nvoid main() {\n\tfloat lineStart \x3d 1. - lineEnd;\n\tfloat lineOffset \x3d lineTop * 2. - 1.;\n\n\tvec2 diff \x3d (bCoord + bCoordFract - aCoord - aCoordFract);\n\ttangent \x3d normalize(diff * scale * viewport.zw);\n\tvec2 normal \x3d vec2(-tangent.y, tangent.x);\n\n\tvec2 position \x3d project(aCoord, aCoordFract, scale, scaleFract, translate, translateFract) * lineStart\n\t\t+ project(bCoord, bCoordFract, scale, scaleFract, translate, translateFract) * lineEnd\n\n\t\t+ thickness * normal * .5 * lineOffset / viewport.zw;\n\n\tgl_Position \x3d vec4(position * 2.0 - 1.0, depth, 1);\n\n\tfragColor \x3d color / 255.;\n}\n"]),
frag:b(["precision highp float;\n#define GLSLIFY 1\n\nuniform sampler2D dashPattern;\n\nuniform float dashSize, pixelRatio, thickness, opacity, id;\n\nvarying vec4 fragColor;\nvarying vec2 tangent;\n\nvoid main() {\n\tfloat alpha \x3d 1.;\n\n\tfloat t \x3d fract(dot(tangent, gl_FragCoord.xy) / dashSize) * .5 + .25;\n\tfloat dash \x3d texture2D(dashPattern, vec2(t, .5)).r;\n\n\tgl_FragColor \x3d fragColor;\n\tgl_FragColor.a *\x3d alpha * opacity * dash;\n}\n"]),attributes:{lineEnd:{buffer:r,divisor:0,
stride:8,offset:0},lineTop:{buffer:r,divisor:0,stride:8,offset:4},aCoord:{buffer:p.prop("positionBuffer"),stride:8,offset:8,divisor:1},bCoord:{buffer:p.prop("positionBuffer"),stride:8,offset:16,divisor:1},aCoordFract:{buffer:p.prop("positionFractBuffer"),stride:8,offset:8,divisor:1},bCoordFract:{buffer:p.prop("positionFractBuffer"),stride:8,offset:16,divisor:1},color:{buffer:p.prop("colorBuffer"),stride:4,offset:0,divisor:1}}},t));try{var x=p(f({cull:{enable:!0,face:"back"},vert:b(["precision highp float;\n#define GLSLIFY 1\n\nattribute vec2 aCoord, bCoord, nextCoord, prevCoord;\nattribute vec4 aColor, bColor;\nattribute float lineEnd, lineTop;\n\nuniform vec2 scale, translate;\nuniform float thickness, pixelRatio, id, depth;\nuniform vec4 viewport;\nuniform float miterLimit, miterMode;\n\nvarying vec4 fragColor;\nvarying vec4 startCutoff, endCutoff;\nvarying vec2 tangent;\nvarying vec2 startCoord, endCoord;\nvarying float enableStartMiter, enableEndMiter;\n\nconst float REVERSE_THRESHOLD \x3d -.875;\nconst float MIN_DIFF \x3d 1e-6;\n\n// TODO: possible optimizations: avoid overcalculating all for vertices and calc just one instead\n// TODO: precalculate dot products, normalize things beforehead etc.\n// TODO: refactor to rectangular algorithm\n\nfloat distToLine(vec2 p, vec2 a, vec2 b) {\n\tvec2 diff \x3d b - a;\n\tvec2 perp \x3d normalize(vec2(-diff.y, diff.x));\n\treturn dot(p - a, perp);\n}\n\nbool isNaN( float val ){\n  return ( val \x3c 0.0 || 0.0 \x3c val || val \x3d\x3d 0.0 ) ? false : true;\n}\n\nvoid main() {\n\tvec2 aCoord \x3d aCoord, bCoord \x3d bCoord, prevCoord \x3d prevCoord, nextCoord \x3d nextCoord;\n\n  vec2 adjustedScale;\n  adjustedScale.x \x3d (abs(scale.x) \x3c MIN_DIFF) ? MIN_DIFF : scale.x;\n  adjustedScale.y \x3d (abs(scale.y) \x3c MIN_DIFF) ? MIN_DIFF : scale.y;\n\n  vec2 scaleRatio \x3d adjustedScale * viewport.zw;\n\tvec2 normalWidth \x3d thickness / scaleRatio;\n\n\tfloat lineStart \x3d 1. - lineEnd;\n\tfloat lineBot \x3d 1. - lineTop;\n\n\tfragColor \x3d (lineStart * aColor + lineEnd * bColor) / 255.;\n\n\tif (isNaN(aCoord.x) || isNaN(aCoord.y) || isNaN(bCoord.x) || isNaN(bCoord.y)) return;\n\n\tif (aCoord \x3d\x3d prevCoord) prevCoord \x3d aCoord + normalize(bCoord - aCoord);\n\tif (bCoord \x3d\x3d nextCoord) nextCoord \x3d bCoord - normalize(bCoord - aCoord);\n\n\tvec2 prevDiff \x3d aCoord - prevCoord;\n\tvec2 currDiff \x3d bCoord - aCoord;\n\tvec2 nextDiff \x3d nextCoord - bCoord;\n\n\tvec2 prevTangent \x3d normalize(prevDiff * scaleRatio);\n\tvec2 currTangent \x3d normalize(currDiff * scaleRatio);\n\tvec2 nextTangent \x3d normalize(nextDiff * scaleRatio);\n\n\tvec2 prevNormal \x3d vec2(-prevTangent.y, prevTangent.x);\n\tvec2 currNormal \x3d vec2(-currTangent.y, currTangent.x);\n\tvec2 nextNormal \x3d vec2(-nextTangent.y, nextTangent.x);\n\n\tvec2 startJoinDirection \x3d normalize(prevTangent - currTangent);\n\tvec2 endJoinDirection \x3d normalize(currTangent - nextTangent);\n\n\t// collapsed/unidirectional segment cases\n\t// FIXME: there should be more elegant solution\n\tvec2 prevTanDiff \x3d abs(prevTangent - currTangent);\n\tvec2 nextTanDiff \x3d abs(nextTangent - currTangent);\n\tif (max(prevTanDiff.x, prevTanDiff.y) \x3c MIN_DIFF) {\n\t\tstartJoinDirection \x3d currNormal;\n\t}\n\tif (max(nextTanDiff.x, nextTanDiff.y) \x3c MIN_DIFF) {\n\t\tendJoinDirection \x3d currNormal;\n\t}\n\tif (aCoord \x3d\x3d bCoord) {\n\t\tendJoinDirection \x3d startJoinDirection;\n\t\tcurrNormal \x3d prevNormal;\n\t\tcurrTangent \x3d prevTangent;\n\t}\n\n\ttangent \x3d currTangent;\n\n\t//calculate join shifts relative to normals\n\tfloat startJoinShift \x3d dot(currNormal, startJoinDirection);\n\tfloat endJoinShift \x3d dot(currNormal, endJoinDirection);\n\n\tfloat startMiterRatio \x3d abs(1. / startJoinShift);\n\tfloat endMiterRatio \x3d abs(1. / endJoinShift);\n\n\tvec2 startJoin \x3d startJoinDirection * startMiterRatio;\n\tvec2 endJoin \x3d endJoinDirection * endMiterRatio;\n\n\tvec2 startTopJoin, startBotJoin, endTopJoin, endBotJoin;\n\tstartTopJoin \x3d sign(startJoinShift) * startJoin * .5;\n\tstartBotJoin \x3d -startTopJoin;\n\n\tendTopJoin \x3d sign(endJoinShift) * endJoin * .5;\n\tendBotJoin \x3d -endTopJoin;\n\n\tvec2 aTopCoord \x3d aCoord + normalWidth * startTopJoin;\n\tvec2 bTopCoord \x3d bCoord + normalWidth * endTopJoin;\n\tvec2 aBotCoord \x3d aCoord + normalWidth * startBotJoin;\n\tvec2 bBotCoord \x3d bCoord + normalWidth * endBotJoin;\n\n\t//miter anti-clipping\n\tfloat baClipping \x3d distToLine(bCoord, aCoord, aBotCoord) / dot(normalize(normalWidth * endBotJoin), normalize(normalWidth.yx * vec2(-startBotJoin.y, startBotJoin.x)));\n\tfloat abClipping \x3d distToLine(aCoord, bCoord, bTopCoord) / dot(normalize(normalWidth * startBotJoin), normalize(normalWidth.yx * vec2(-endBotJoin.y, endBotJoin.x)));\n\n\t//prevent close to reverse direction switch\n\tbool prevReverse \x3d dot(currTangent, prevTangent) \x3c\x3d REVERSE_THRESHOLD \x26\x26 abs(dot(currTangent, prevNormal)) * min(length(prevDiff), length(currDiff)) \x3c  length(normalWidth * currNormal);\n\tbool nextReverse \x3d dot(currTangent, nextTangent) \x3c\x3d REVERSE_THRESHOLD \x26\x26 abs(dot(currTangent, nextNormal)) * min(length(nextDiff), length(currDiff)) \x3c  length(normalWidth * currNormal);\n\n\tif (prevReverse) {\n\t\t//make join rectangular\n\t\tvec2 miterShift \x3d normalWidth * startJoinDirection * miterLimit * .5;\n\t\tfloat normalAdjust \x3d 1. - min(miterLimit / startMiterRatio, 1.);\n\t\taBotCoord \x3d aCoord + miterShift - normalAdjust * normalWidth * currNormal * .5;\n\t\taTopCoord \x3d aCoord + miterShift + normalAdjust * normalWidth * currNormal * .5;\n\t}\n\telse if (!nextReverse \x26\x26 baClipping \x3e 0. \x26\x26 baClipping \x3c length(normalWidth * endBotJoin)) {\n\t\t//handle miter clipping\n\t\tbTopCoord -\x3d normalWidth * endTopJoin;\n\t\tbTopCoord +\x3d normalize(endTopJoin * normalWidth) * baClipping;\n\t}\n\n\tif (nextReverse) {\n\t\t//make join rectangular\n\t\tvec2 miterShift \x3d normalWidth * endJoinDirection * miterLimit * .5;\n\t\tfloat normalAdjust \x3d 1. - min(miterLimit / endMiterRatio, 1.);\n\t\tbBotCoord \x3d bCoord + miterShift - normalAdjust * normalWidth * currNormal * .5;\n\t\tbTopCoord \x3d bCoord + miterShift + normalAdjust * normalWidth * currNormal * .5;\n\t}\n\telse if (!prevReverse \x26\x26 abClipping \x3e 0. \x26\x26 abClipping \x3c length(normalWidth * startBotJoin)) {\n\t\t//handle miter clipping\n\t\taBotCoord -\x3d normalWidth * startBotJoin;\n\t\taBotCoord +\x3d normalize(startBotJoin * normalWidth) * abClipping;\n\t}\n\n\tvec2 aTopPosition \x3d (aTopCoord) * adjustedScale + translate;\n\tvec2 aBotPosition \x3d (aBotCoord) * adjustedScale + translate;\n\n\tvec2 bTopPosition \x3d (bTopCoord) * adjustedScale + translate;\n\tvec2 bBotPosition \x3d (bBotCoord) * adjustedScale + translate;\n\n\t//position is normalized 0..1 coord on the screen\n\tvec2 position \x3d (aTopPosition * lineTop + aBotPosition * lineBot) * lineStart + (bTopPosition * lineTop + bBotPosition * lineBot) * lineEnd;\n\n\tstartCoord \x3d aCoord * scaleRatio + translate * viewport.zw + viewport.xy;\n\tendCoord \x3d bCoord * scaleRatio + translate * viewport.zw + viewport.xy;\n\n\tgl_Position \x3d vec4(position  * 2.0 - 1.0, depth, 1);\n\n\tenableStartMiter \x3d step(dot(currTangent, prevTangent), .5);\n\tenableEndMiter \x3d step(dot(currTangent, nextTangent), .5);\n\n\t//bevel miter cutoffs\n\tif (miterMode \x3d\x3d 1.) {\n\t\tif (enableStartMiter \x3d\x3d 1.) {\n\t\t\tvec2 startMiterWidth \x3d vec2(startJoinDirection) * thickness * miterLimit * .5;\n\t\t\tstartCutoff \x3d vec4(aCoord, aCoord);\n\t\t\tstartCutoff.zw +\x3d vec2(-startJoinDirection.y, startJoinDirection.x) / scaleRatio;\n\t\t\tstartCutoff \x3d startCutoff * scaleRatio.xyxy + translate.xyxy * viewport.zwzw;\n\t\t\tstartCutoff +\x3d viewport.xyxy;\n\t\t\tstartCutoff +\x3d startMiterWidth.xyxy;\n\t\t}\n\n\t\tif (enableEndMiter \x3d\x3d 1.) {\n\t\t\tvec2 endMiterWidth \x3d vec2(endJoinDirection) * thickness * miterLimit * .5;\n\t\t\tendCutoff \x3d vec4(bCoord, bCoord);\n\t\t\tendCutoff.zw +\x3d vec2(-endJoinDirection.y, endJoinDirection.x)  / scaleRatio;\n\t\t\tendCutoff \x3d endCutoff * scaleRatio.xyxy + translate.xyxy * viewport.zwzw;\n\t\t\tendCutoff +\x3d viewport.xyxy;\n\t\t\tendCutoff +\x3d endMiterWidth.xyxy;\n\t\t}\n\t}\n\n\t//round miter cutoffs\n\telse if (miterMode \x3d\x3d 2.) {\n\t\tif (enableStartMiter \x3d\x3d 1.) {\n\t\t\tvec2 startMiterWidth \x3d vec2(startJoinDirection) * thickness * abs(dot(startJoinDirection, currNormal)) * .5;\n\t\t\tstartCutoff \x3d vec4(aCoord, aCoord);\n\t\t\tstartCutoff.zw +\x3d vec2(-startJoinDirection.y, startJoinDirection.x) / scaleRatio;\n\t\t\tstartCutoff \x3d startCutoff * scaleRatio.xyxy + translate.xyxy * viewport.zwzw;\n\t\t\tstartCutoff +\x3d viewport.xyxy;\n\t\t\tstartCutoff +\x3d startMiterWidth.xyxy;\n\t\t}\n\n\t\tif (enableEndMiter \x3d\x3d 1.) {\n\t\t\tvec2 endMiterWidth \x3d vec2(endJoinDirection) * thickness * abs(dot(endJoinDirection, currNormal)) * .5;\n\t\t\tendCutoff \x3d vec4(bCoord, bCoord);\n\t\t\tendCutoff.zw +\x3d vec2(-endJoinDirection.y, endJoinDirection.x)  / scaleRatio;\n\t\t\tendCutoff \x3d endCutoff * scaleRatio.xyxy + translate.xyxy * viewport.zwzw;\n\t\t\tendCutoff +\x3d viewport.xyxy;\n\t\t\tendCutoff +\x3d endMiterWidth.xyxy;\n\t\t}\n\t}\n}\n"]),
frag:b(["precision highp float;\n#define GLSLIFY 1\n\nuniform sampler2D dashPattern;\nuniform float dashSize, pixelRatio, thickness, opacity, id, miterMode;\n\nvarying vec4 fragColor;\nvarying vec2 tangent;\nvarying vec4 startCutoff, endCutoff;\nvarying vec2 startCoord, endCoord;\nvarying float enableStartMiter, enableEndMiter;\n\nfloat distToLine(vec2 p, vec2 a, vec2 b) {\n\tvec2 diff \x3d b - a;\n\tvec2 perp \x3d normalize(vec2(-diff.y, diff.x));\n\treturn dot(p - a, perp);\n}\n\nvoid main() {\n\tfloat alpha \x3d 1., distToStart, distToEnd;\n\tfloat cutoff \x3d thickness * .5;\n\n\t//bevel miter\n\tif (miterMode \x3d\x3d 1.) {\n\t\tif (enableStartMiter \x3d\x3d 1.) {\n\t\t\tdistToStart \x3d distToLine(gl_FragCoord.xy, startCutoff.xy, startCutoff.zw);\n\t\t\tif (distToStart \x3c -1.) {\n\t\t\t\tdiscard;\n\t\t\t\treturn;\n\t\t\t}\n\t\t\talpha *\x3d min(max(distToStart + 1., 0.), 1.);\n\t\t}\n\n\t\tif (enableEndMiter \x3d\x3d 1.) {\n\t\t\tdistToEnd \x3d distToLine(gl_FragCoord.xy, endCutoff.xy, endCutoff.zw);\n\t\t\tif (distToEnd \x3c -1.) {\n\t\t\t\tdiscard;\n\t\t\t\treturn;\n\t\t\t}\n\t\t\talpha *\x3d min(max(distToEnd + 1., 0.), 1.);\n\t\t}\n\t}\n\n\t// round miter\n\telse if (miterMode \x3d\x3d 2.) {\n\t\tif (enableStartMiter \x3d\x3d 1.) {\n\t\t\tdistToStart \x3d distToLine(gl_FragCoord.xy, startCutoff.xy, startCutoff.zw);\n\t\t\tif (distToStart \x3c 0.) {\n\t\t\t\tfloat radius \x3d length(gl_FragCoord.xy - startCoord);\n\n\t\t\t\tif(radius \x3e cutoff + .5) {\n\t\t\t\t\tdiscard;\n\t\t\t\t\treturn;\n\t\t\t\t}\n\n\t\t\t\talpha -\x3d smoothstep(cutoff - .5, cutoff + .5, radius);\n\t\t\t}\n\t\t}\n\n\t\tif (enableEndMiter \x3d\x3d 1.) {\n\t\t\tdistToEnd \x3d distToLine(gl_FragCoord.xy, endCutoff.xy, endCutoff.zw);\n\t\t\tif (distToEnd \x3c 0.) {\n\t\t\t\tfloat radius \x3d length(gl_FragCoord.xy - endCoord);\n\n\t\t\t\tif(radius \x3e cutoff + .5) {\n\t\t\t\t\tdiscard;\n\t\t\t\t\treturn;\n\t\t\t\t}\n\n\t\t\t\talpha -\x3d smoothstep(cutoff - .5, cutoff + .5, radius);\n\t\t\t}\n\t\t}\n\t}\n\n\tfloat t \x3d fract(dot(tangent, gl_FragCoord.xy) / dashSize) * .5 + .25;\n\tfloat dash \x3d texture2D(dashPattern, vec2(t, .5)).r;\n\n\tgl_FragColor \x3d fragColor;\n\tgl_FragColor.a *\x3d alpha * opacity * dash;\n}\n"]),
attributes:{lineEnd:{buffer:r,divisor:0,stride:8,offset:0},lineTop:{buffer:r,divisor:0,stride:8,offset:4},aColor:{buffer:p.prop("colorBuffer"),stride:4,offset:0,divisor:1},bColor:{buffer:p.prop("colorBuffer"),stride:4,offset:4,divisor:1},prevCoord:{buffer:p.prop("positionBuffer"),stride:8,offset:0,divisor:1},aCoord:{buffer:p.prop("positionBuffer"),stride:8,offset:8,divisor:1},bCoord:{buffer:p.prop("positionBuffer"),stride:8,offset:16,divisor:1},nextCoord:{buffer:p.prop("positionBuffer"),stride:8,
offset:24,divisor:1}}},t))}catch(y){x=w}return{fill:p({primitive:"triangle",elements:function(y,A){return A.triangles},offset:0,vert:b(["precision highp float;\n#define GLSLIFY 1\n\nattribute vec2 position, positionFract;\n\nuniform vec4 color;\nuniform vec2 scale, scaleFract, translate, translateFract;\nuniform float pixelRatio, id;\nuniform vec4 viewport;\nuniform float opacity;\n\nvarying vec4 fragColor;\n\nconst float MAX_LINES \x3d 256.;\n\nvoid main() {\n\tfloat depth \x3d (MAX_LINES - 4. - id) / (MAX_LINES);\n\n\tvec2 position \x3d position * scale + translate\n       + positionFract * scale + translateFract\n       + position * scaleFract\n       + positionFract * scaleFract;\n\n\tgl_Position \x3d vec4(position * 2.0 - 1.0, depth, 1);\n\n\tfragColor \x3d color / 255.;\n\tfragColor.a *\x3d opacity;\n}\n"]),
frag:b(["precision highp float;\n#define GLSLIFY 1\n\nvarying vec4 fragColor;\n\nvoid main() {\n\tgl_FragColor \x3d fragColor;\n}\n"]),uniforms:{scale:p.prop("scale"),color:p.prop("fill"),scaleFract:p.prop("scaleFract"),translateFract:p.prop("translateFract"),translate:p.prop("translate"),opacity:p.prop("opacity"),pixelRatio:p.context("pixelRatio"),id:p.prop("id"),viewport:function(y,A){return[A.viewport.x,A.viewport.y,y.viewportWidth,y.viewportHeight]}},attributes:{position:{buffer:p.prop("positionBuffer"),
stride:8,offset:8},positionFract:{buffer:p.prop("positionFractBuffer"),stride:8,offset:8}},blend:t.blend,depth:{enable:!1},scissor:t.scissor,stencil:t.stencil,viewport:t.viewport}),rect:w,miter:x}};q.defaults={dashes:null,join:"miter",miterLimit:1,thickness:10,cap:"square",color:"black",opacity:1,overlay:!1,viewport:null,range:null,close:!1,fill:null};q.prototype.render=function(){for(var p=[],r=arguments.length;r--;)p[r]=arguments[r];p.length&&this.update.apply(this,p);this.draw()};q.prototype.draw=
function(){for(var p=this,r=[],t=arguments.length;t--;)r[t]=arguments[t];(r.length?r:this.passes).forEach(function(w,x){if(w&&Array.isArray(w))return p.draw.apply(p,w);"number"===typeof w&&(w=p.passes[w]);w&&1<w.count&&w.opacity&&(p.regl._refresh(),w.fill&&w.triangles&&2<w.triangles.length&&p.shaders.fill(w),w.thickness&&(w.scale[0]*w.viewport.width>q.precisionThreshold||w.scale[1]*w.viewport.height>q.precisionThreshold?p.shaders.rect(w):"rect"===w.join||!w.join&&(2>=w.thickness||w.count>=q.maxPoints)?
p.shaders.rect(w):p.shaders.miter(w)))});return this};q.prototype.update=function(p){var r=this;if(p){null!=p.length?"number"===typeof p[0]&&(p=[{positions:p}]):Array.isArray(p)||(p=[p]);var t=this.regl,w=this.gl;p.forEach(function(A,z){var F=r.passes[z];if(void 0!==A)if(null===A)r.passes[z]=null;else{"number"===typeof A[0]&&(A={positions:A});A=k(A,{positions:"positions points data coords",thickness:"thickness lineWidth lineWidths line-width linewidth width stroke-width strokewidth strokeWidth",join:"lineJoin linejoin join type mode",
miterLimit:"miterlimit miterLimit",dashes:"dash dashes dasharray dash-array dashArray",color:"color colour stroke colors colours stroke-color strokeColor",fill:"fill fill-color fillColor",opacity:"alpha opacity",overlay:"overlay crease overlap intersect",close:"closed close closed-path closePath",range:"range dataBox",viewport:"viewport viewBox",hole:"holes hole hollow"});F||(r.passes[z]=F={id:z,scale:null,scaleFract:null,translate:null,translateFract:null,count:0,hole:[],depth:0,dashLength:1,dashTexture:t.texture({channels:1,
data:new Uint8Array([255]),width:1,height:1,mag:"linear",min:"linear"}),colorBuffer:t.buffer({usage:"dynamic",type:"uint8",data:new Uint8Array}),positionBuffer:t.buffer({usage:"dynamic",type:"float",data:new Uint8Array}),positionFractBuffer:t.buffer({usage:"dynamic",type:"float",data:new Uint8Array})},A=f({},q.defaults,A));null!=A.thickness&&(F.thickness=parseFloat(A.thickness));null!=A.opacity&&(F.opacity=parseFloat(A.opacity));null!=A.miterLimit&&(F.miterLimit=parseFloat(A.miterLimit));null!=A.overlay&&
(F.overlay=!!A.overlay,z<q.maxLines&&(F.depth=2*(q.maxLines-1-z%q.maxLines)/q.maxLines-1));null!=A.join&&(F.join=A.join);null!=A.hole&&(F.hole=A.hole);null!=A.fill&&(F.fill=A.fill?n(A.fill,"uint8"):null);null!=A.viewport&&(F.viewport=d(A.viewport));F.viewport||(F.viewport=d([w.drawingBufferWidth,w.drawingBufferHeight]));null!=A.close&&(F.close=A.close);null===A.positions&&(A.positions=[]);if(A.positions){if(A.positions.x&&A.positions.y){var D=A.positions.x,u=A.positions.y;var B=F.count=Math.max(D.length,
u.length);z=new Float64Array(2*B);for(var I=0;I<B;I++)z[2*I]=D[I],z[2*I+1]=u[I]}else z=e(A.positions,"float64"),B=F.count=Math.floor(z.length/2);D=F.bounds=m(z,2);if(F.fill){I=[];u={};for(var J=0,N=0,M=0,E=F.count;N<E;N++){var L=z[2*N],Q=z[2*N+1];isNaN(L)||isNaN(Q)||null==L||null==Q?(L=z[2*J],Q=z[2*J+1],u[N]=J):J=N;I[M++]=L;I[M++]=Q}I=h(I,F.hole||[]);J=0;for(N=I.length;J<N;J++)null!=u[I[J]]&&(I[J]=u[I[J]]);F.triangles=I}u=new Float64Array(z);l(u,2,D);D=new Float64Array(2*B+6);F.close?z[0]===z[2*B-
2]&&z[1]===z[2*B-1]?(D[0]=u[2*B-4],D[1]=u[2*B-3]):(D[0]=u[2*B-2],D[1]=u[2*B-1]):(D[0]=u[0],D[1]=u[1]);D.set(u,2);F.close?z[0]===z[2*B-2]&&z[1]===z[2*B-1]?(D[2*B+2]=u[2],D[2*B+3]=u[3],--F.count):(D[2*B+2]=u[0],D[2*B+3]=u[1],D[2*B+4]=u[2],D[2*B+5]=u[3]):(D[2*B+2]=u[2*B-2],D[2*B+3]=u[2*B-1],D[2*B+4]=u[2*B-2],D[2*B+5]=u[2*B-1]);F.positionBuffer(c(D));F.positionFractBuffer(g(D))}A.range?F.range=A.range:F.range||(F.range=F.bounds);(A.range||A.positions)&&F.count&&(z=F.bounds,B=F.range[2]-F.range[0],D=F.range[3]-
F.range[1],F.scale=[(z[2]-z[0])/B,(z[3]-z[1])/D],F.translate=[-F.range[0]/B+z[0]/B||0,-F.range[1]/D+z[1]/D||0],F.scaleFract=g(F.scale),F.translateFract=g(F.translate));if(A.dashes){if(!A.dashes||2>A.dashes.length)z=1,B=new Uint8Array([255,255,255,255,255,255,255,255]);else{for(B=z=0;B<A.dashes.length;++B)z+=A.dashes[B];B=new Uint8Array(z*q.dashMult);D=0;u=255;for(I=0;2>I;I++)for(J=0;J<A.dashes.length;++J){N=0;for(M=A.dashes[J]*q.dashMult*.5;N<M;++N)B[D++]=u;u^=255}}F.dashLength=z;F.dashTexture({channels:1,
data:B,width:B.length,height:1,mag:"linear",min:"linear"},0,0)}if(A.color){z=F.count;(B=A.color)||(B="transparent");A=new Uint8Array(4*z+4);if(Array.isArray(B)&&"number"!==typeof B[0]){for(D=0;D<z;D++)u=n(B[D],"uint8"),A.set(u,4*D);A.set(n(B[0],"uint8"),4*z)}else for(B=n(B,"uint8"),D=0;D<z+1;D++)A.set(B,4*D);F.colorBuffer({usage:"dynamic",type:"uint8",data:A})}}});if(p.length<this.passes.length){for(var x=p.length;x<this.passes.length;x++){var y=this.passes[x];y&&(y.colorBuffer.destroy(),y.positionBuffer.destroy(),
y.dashTexture.destroy())}this.passes.length=p.length}p=[];for(x=0;x<this.passes.length;x++)null!==this.passes[x]&&p.push(this.passes[x]);this.passes=p;return this}};q.prototype.destroy=function(){this.passes.forEach(function(p){p.colorBuffer.destroy();p.positionBuffer.destroy();p.dashTexture.destroy()});this.passes.length=0;return this}},{"array-bounds":70,"array-normalize":71,"color-normalize":125,earcut:177,"es6-weak-map":233,"flatten-vertex-data":244,glslify:413,"object-assign":473,"parse-rect":478,
"pick-by-alias":485,"to-float32":549}],510:[function(a,G,C){function q(y){var A=Array.isArray(y)?m(y):void 0;A||(A="undefined"!==typeof Symbol&&Symbol.iterator in Object(y)?Array.from(y):void 0);if(!(y=A||n(y)))throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.");return y}function n(y,A){if(y){if("string"===typeof y)return m(y,A);var z=Object.prototype.toString.call(y).slice(8,-1);"Object"===z&&
y.constructor&&(z=y.constructor.name);if("Map"===z||"Set"===z)return Array.from(y);if("Arguments"===z||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(z))return m(y,A)}}function m(y,A){if(null==A||A>y.length)A=y.length;for(var z=0,F=Array(A);z<A;z++)F[z]=y[z];return F}function f(y,A){var z=this;if(!(this instanceof f))return new f(y,A);"function"===typeof y?(A||(A={}),A.regl=y):(A=y,y=null);A&&A.length&&(A.positions=A);y=A.regl;var F=y._gl,D=[];this.tooManyColors=r;var u=y.texture({data:new Uint8Array(1020),
width:255,height:1,type:"uint8",format:"rgba",wrapS:"clamp",wrapT:"clamp",mag:"nearest",min:"nearest"});l(this,{regl:y,gl:F,groups:[],markerCache:[null],markerTextures:[null],palette:D,paletteIds:{},paletteTexture:u,maxColors:255,maxSize:100,canvas:F.canvas});this.update(A);F={uniforms:{constPointSize:!!A.constPointSize,pixelRatio:y.context("pixelRatio"),palette:u,paletteSize:function(B,I){return[z.tooManyColors?0:255,u.height]},scale:y.prop("scale"),scaleFract:y.prop("scaleFract"),translate:y.prop("translate"),
translateFract:y.prop("translateFract"),opacity:y.prop("opacity"),marker:y.prop("markerTexture")},attributes:{x:function(B,I){return I.xAttr||{buffer:I.positionBuffer,stride:8,offset:0}},y:function(B,I){return I.yAttr||{buffer:I.positionBuffer,stride:8,offset:4}},xFract:function(B,I){return I.xAttr?{constant:[0,0]}:{buffer:I.positionFractBuffer,stride:8,offset:0}},yFract:function(B,I){return I.yAttr?{constant:[0,0]}:{buffer:I.positionFractBuffer,stride:8,offset:4}},size:function(B,I){return I.size.length?
{buffer:I.sizeBuffer,stride:2,offset:0}:{constant:[Math.round(255*I.size/z.maxSize)]}},borderSize:function(B,I){return I.borderSize.length?{buffer:I.sizeBuffer,stride:2,offset:1}:{constant:[Math.round(255*I.borderSize/z.maxSize)]}},colorId:function(B,I){return I.color.length?{buffer:I.colorBuffer,stride:z.tooManyColors?8:4,offset:0}:{constant:z.tooManyColors?D.slice(4*I.color,4*I.color+4):[I.color]}},borderColorId:function(B,I){return I.borderColor.length?{buffer:I.colorBuffer,stride:z.tooManyColors?
8:4,offset:z.tooManyColors?4:2}:{constant:z.tooManyColors?D.slice(4*I.borderColor,4*I.borderColor+4):[I.borderColor]}},isActive:function(B,I){return!0===I.activation?{constant:[1]}:I.activation?I.activation:{constant:[0]}}},blend:{enable:!0,color:[0,0,0,1],func:{srcRGB:"src alpha",dstRGB:"one minus src alpha",srcAlpha:"one minus dst alpha",dstAlpha:"one"}},scissor:{enable:!0,box:y.prop("viewport")},viewport:y.prop("viewport"),stencil:{enable:!1},depth:{enable:!1},elements:y.prop("elements"),count:y.prop("count"),
offset:y.prop("offset"),primitive:"points"};A=l({},F);A.frag=c(["precision highp float;\n#define GLSLIFY 1\n\nvarying vec4 fragColor, fragBorderColor;\nvarying float fragWidth, fragBorderColorLevel, fragColorLevel;\n\nuniform sampler2D marker;\nuniform float opacity;\n\nfloat smoothStep(float x, float y) {\n  return 1.0 / (1.0 + exp(50.0*(x - y)));\n}\n\nvoid main() {\n  float dist \x3d texture2D(marker, gl_PointCoord).r, delta \x3d fragWidth;\n\n  // max-distance alpha\n  if (dist \x3c 0.003) discard;\n\n  // null-border case\n  if (fragBorderColorLevel \x3d\x3d fragColorLevel || fragBorderColor.a \x3d\x3d 0.) {\n    float colorAmt \x3d smoothstep(.5 - delta, .5 + delta, dist);\n    gl_FragColor \x3d vec4(fragColor.rgb, colorAmt * fragColor.a * opacity);\n  }\n  else {\n    float borderColorAmt \x3d smoothstep(fragBorderColorLevel - delta, fragBorderColorLevel + delta, dist);\n    float colorAmt \x3d smoothstep(fragColorLevel - delta, fragColorLevel + delta, dist);\n\n    vec4 color \x3d fragBorderColor;\n    color.a *\x3d borderColorAmt;\n    color \x3d mix(color, fragColor, colorAmt);\n    color.a *\x3d opacity;\n\n    gl_FragColor \x3d color;\n  }\n\n}\n"]);
A.vert=c(["precision highp float;\n#define GLSLIFY 1\n\nattribute float x, y, xFract, yFract;\nattribute float size, borderSize;\nattribute vec4 colorId, borderColorId;\nattribute float isActive;\n\nuniform vec2 scale, scaleFract, translate, translateFract, paletteSize;\nuniform float pixelRatio;\nuniform bool constPointSize;\nuniform sampler2D palette;\n\nconst float maxSize \x3d 100.;\nconst float borderLevel \x3d .5;\n\nvarying vec4 fragColor, fragBorderColor;\nvarying float fragPointSize, fragBorderRadius, fragWidth, fragBorderColorLevel, fragColorLevel;\n\nfloat pointSizeScale \x3d (constPointSize) ? 2. : pixelRatio;\n\nbool isDirect \x3d (paletteSize.x \x3c 1.);\n\nvec4 getColor(vec4 id) {\n  return isDirect ? id / 255. : texture2D(palette,\n    vec2(\n      (id.x + .5) / paletteSize.x,\n      (id.y + .5) / paletteSize.y\n    )\n  );\n}\n\nvoid main() {\n  // ignore inactive points\n  if (isActive \x3d\x3d 0.) return;\n\n  vec2 position \x3d vec2(x, y);\n  vec2 positionFract \x3d vec2(xFract, yFract);\n\n  vec4 color \x3d getColor(colorId);\n  vec4 borderColor \x3d getColor(borderColorId);\n\n  float size \x3d size * maxSize / 255.;\n  float borderSize \x3d borderSize * maxSize / 255.;\n\n  gl_PointSize \x3d 2. * size * pointSizeScale;\n  fragPointSize \x3d size * pixelRatio;\n\n  vec2 pos \x3d (position + translate) * scale\n      + (positionFract + translateFract) * scale\n      + (position + translate) * scaleFract\n      + (positionFract + translateFract) * scaleFract;\n\n  gl_Position \x3d vec4(pos * 2. - 1., 0., 1.);\n\n  fragColor \x3d color;\n  fragBorderColor \x3d borderColor;\n  fragWidth \x3d 1. / gl_PointSize;\n\n  fragBorderColorLevel \x3d clamp(borderLevel - borderLevel * borderSize / size, 0., 1.);\n  fragColorLevel \x3d clamp(borderLevel + (1. - borderLevel) * borderSize / size, 0., 1.);\n}"]);
this.drawMarker=y(A);F=l({},F);F.frag=c(["precision highp float;\n#define GLSLIFY 1\n\nvarying vec4 fragColor, fragBorderColor;\n\nuniform float opacity;\nvarying float fragBorderRadius, fragWidth;\n\nfloat smoothStep(float edge0, float edge1, float x) {\n\tfloat t;\n\tt \x3d clamp((x - edge0) / (edge1 - edge0), 0.0, 1.0);\n\treturn t * t * (3.0 - 2.0 * t);\n}\n\nvoid main() {\n\tfloat radius, alpha \x3d 1.0, delta \x3d fragWidth;\n\n\tradius \x3d length(2.0 * gl_PointCoord.xy - 1.0);\n\n\tif (radius \x3e 1.0 + delta) {\n\t\tdiscard;\n\t}\n\n\talpha -\x3d smoothstep(1.0 - delta, 1.0 + delta, radius);\n\n\tfloat borderRadius \x3d fragBorderRadius;\n\tfloat ratio \x3d smoothstep(borderRadius - delta, borderRadius + delta, radius);\n\tvec4 color \x3d mix(fragColor, fragBorderColor, ratio);\n\tcolor.a *\x3d alpha * opacity;\n\tgl_FragColor \x3d color;\n}\n"]);
F.vert=c(["precision highp float;\n#define GLSLIFY 1\n\nattribute float x, y, xFract, yFract;\nattribute float size, borderSize;\nattribute vec4 colorId, borderColorId;\nattribute float isActive;\n\nuniform vec2 scale, scaleFract, translate, translateFract;\nuniform float pixelRatio;\nuniform bool constPointSize;\nuniform sampler2D palette;\nuniform vec2 paletteSize;\n\nconst float maxSize \x3d 100.;\n\nvarying vec4 fragColor, fragBorderColor;\nvarying float fragBorderRadius, fragWidth;\n\nfloat pointSizeScale \x3d (constPointSize) ? 2. : pixelRatio;\n\nbool isDirect \x3d (paletteSize.x \x3c 1.);\n\nvec4 getColor(vec4 id) {\n  return isDirect ? id / 255. : texture2D(palette,\n    vec2(\n      (id.x + .5) / paletteSize.x,\n      (id.y + .5) / paletteSize.y\n    )\n  );\n}\n\nvoid main() {\n  // ignore inactive points\n  if (isActive \x3d\x3d 0.) return;\n\n  vec2 position \x3d vec2(x, y);\n  vec2 positionFract \x3d vec2(xFract, yFract);\n\n  vec4 color \x3d getColor(colorId);\n  vec4 borderColor \x3d getColor(borderColorId);\n\n  float size \x3d size * maxSize / 255.;\n  float borderSize \x3d borderSize * maxSize / 255.;\n\n  gl_PointSize \x3d (size + borderSize) * pointSizeScale;\n\n  vec2 pos \x3d (position + translate) * scale\n      + (positionFract + translateFract) * scale\n      + (position + translate) * scaleFract\n      + (positionFract + translateFract) * scaleFract;\n\n  gl_Position \x3d vec4(pos * 2. - 1., 0., 1.);\n\n  fragBorderRadius \x3d 1. - 2. * borderSize / (size + borderSize);\n  fragColor \x3d color;\n  fragBorderColor \x3d borderColor.a \x3d\x3d 0. || borderSize \x3d\x3d 0. ? vec4(color.rgb, 0.) : borderColor;\n  fragWidth \x3d 1. / gl_PointSize;\n}\n"]);
r&&(F.frag=F.frag.replace("smoothstep","smoothStep"),A.frag=A.frag.replace("smoothstep","smoothStep"));this.drawCircle=y(F)}var b=a("color-normalize"),k=a("array-bounds"),e=a("color-id"),h=a("@plotly/point-cluster"),l=a("object-assign"),c=a("glslify"),g=a("pick-by-alias"),d=a("update-diff"),p=a("flatten-vertex-data"),r=a("is-iexplorer"),t=a("to-float32"),w=a("parse-rect");f.defaults={color:"black",borderColor:"transparent",borderSize:0,size:12,opacity:1,marker:void 0,viewport:null,range:null,pixelSize:null,
count:0,offset:0,bounds:null,positions:[],snap:1E4};f.prototype.render=function(){arguments.length&&this.update.apply(this,arguments);this.draw();return this};f.prototype.draw=function(){for(var y=this,A=arguments.length,z=Array(A),F=0;F<A;F++)z[F]=arguments[F];A=this.groups;1===z.length&&Array.isArray(z[0])&&(null===z[0][0]||Array.isArray(z[0][0]))&&(z=z[0]);this.regl._refresh();if(z.length)for(A=0;A<z.length;A++)this.drawItem(A,z[A]);else A.forEach(function(D,u){y.drawItem(u)});return this};f.prototype.drawItem=
function(y,A){var z=this.groups;y=z[y];"number"===typeof A&&(y=z[A],A=null);if(y&&y.count&&y.opacity){y.activation[0]&&this.drawCircle(this.getMarkerDrawOptions(0,y,A));z=[];for(var F=1;F<y.activation.length;F++)y.activation[F]&&(!0===y.activation[F]||y.activation[F].data.length)&&z.push.apply(z,q(this.getMarkerDrawOptions(F,y,A)));z.length&&this.drawMarker(z)}};f.prototype.getMarkerDrawOptions=function(y,A,z){var F=A.range,D=A.tree,u=A.viewport,B=A.activation,I=A.selectionBuffer,J=A.count;if(!D)return z?
[l({},A,{markerTexture:this.markerTextures[y],activation:B[y],count:z.length,elements:z,offset:0})]:[l({},A,{markerTexture:this.markerTextures[y],activation:B[y],offset:0})];var N=[];F=D.range(F,{lod:!0,px:[(F[2]-F[0])/u.width,(F[3]-F[1])/u.height]});if(z){D=B[y].data;J=new Uint8Array(J);for(u=0;u<z.length;u++){var M=z[u];J[M]=D?D[M]:1}I.subdata(J)}for(J=F.length;J--;){D=F[J];u=D;u=Array.isArray(u)?u:void 0;if(!u)if(u=void 0,"undefined"!==typeof Symbol&&Symbol.iterator in Object(D)){M=[];var E=!0,
L=!1,Q=void 0;try{for(var S=D[Symbol.iterator]();!(E=(u=S.next()).done)&&(M.push(u.value),2!==M.length);E=!0);}catch(R){L=!0,Q=R}finally{try{if(!E&&null!=S["return"])S["return"]()}finally{if(L)throw Q;}}u=M}else u=void 0;if(!(D=u||n(D,2)))throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.");u=D[0];N.push(l({},A,{markerTexture:this.markerTextures[y],activation:z?I:B[y],offset:u,count:D[1]-u}))}return N};
f.prototype.update=function(){for(var y=this,A=arguments.length,z=Array(A),F=0;F<A;F++)z[F]=arguments[F];if(z.length){1===z.length&&Array.isArray(z[0])&&(z=z[0]);var D=this.groups,u=this.gl,B=this.regl,I=this.maxSize,J=this.maxColors,N=this.palette;this.groups=D=z.map(function(M,E){var L=D[E];if(void 0===M)return L;null===M?M={positions:null}:"function"===typeof M?M={ondraw:M}:"number"===typeof M[0]&&(M={positions:M});M=g(M,{positions:"positions data points",snap:"snap cluster lod tree",size:"sizes size radius",
borderSize:"borderSizes borderSize border-size bordersize borderWidth borderWidths border-width borderwidth stroke-width strokeWidth strokewidth outline",color:"colors color fill fill-color fillColor",borderColor:"borderColors borderColor stroke stroke-color strokeColor",marker:"markers marker shape",range:"range dataBox databox",viewport:"viewport viewPort viewBox viewbox",opacity:"opacity alpha transparency",bounds:"bound bounds boundaries limits",tooManyColors:"tooManyColors palette paletteMode optimizePalette enablePalette"});
null===M.positions&&(M.positions=[]);null!=M.tooManyColors&&(y.tooManyColors=M.tooManyColors);L||(D[E]=L={id:E,scale:null,translate:null,scaleFract:null,translateFract:null,activation:[],selectionBuffer:B.buffer({data:new Uint8Array(0),usage:"stream",type:"uint8"}),sizeBuffer:B.buffer({data:new Uint8Array(0),usage:"dynamic",type:"uint8"}),colorBuffer:B.buffer({data:new Uint8Array(0),usage:"dynamic",type:"uint8"}),positionBuffer:B.buffer({data:new Uint8Array(0),usage:"dynamic",type:"float"}),positionFractBuffer:B.buffer({data:new Uint8Array(0),
usage:"dynamic",type:"float"})},M=l({},f.defaults,M));!M.positions||"marker"in M||(M.marker=L.marker,delete L.marker);!M.marker||"positions"in M||(M.positions=L.positions,delete L.positions);var Q=0,S=0;d(L,M,[{snap:!0,size:function(ba,aa){null==ba&&(ba=f.defaults.size);Q+=ba&&ba.length?1:0;return ba},borderSize:function(ba,aa){null==ba&&(ba=f.defaults.borderSize);Q+=ba&&ba.length?1:0;return ba},opacity:parseFloat,color:function(ba,aa){null==ba&&(ba=f.defaults.color);ba=y.updateColor(ba);S++;return ba},
borderColor:function(ba,aa){null==ba&&(ba=f.defaults.borderColor);ba=y.updateColor(ba);S++;return ba},bounds:function(ba,aa,ka){"range"in ka||(ka.range=null);return ba},positions:function(ba,aa,ka){var ha=aa.snap,ca=aa.positionBuffer,sa=aa.positionFractBuffer,ma=aa.selectionBuffer;if(ba.x||ba.y)return aa.xAttr=ba.x.length?{buffer:B.buffer(ba.x),offset:0,stride:4,count:ba.x.length}:{buffer:ba.x.buffer,offset:4*ba.x.offset||0,stride:4*(ba.x.stride||1),count:ba.x.count},aa.yAttr=ba.y.length?{buffer:B.buffer(ba.y),
offset:0,stride:4,count:ba.y.length}:{buffer:ba.y.buffer,offset:4*ba.y.offset||0,stride:4*(ba.y.stride||1),count:ba.y.count},aa.count=Math.max(aa.xAttr.count,aa.yAttr.count),ba;ba=p(ba,"float64");var ra=aa.count=Math.floor(ba.length/2),qa=aa.bounds=ra?k(ba,2):null;ka.range||aa.range||(delete aa.range,ka.range=qa);ka.marker||aa.marker||(delete aa.marker,ka.marker=null);ha&&(!0===ha||ra>ha)?aa.tree=h(ba,{bounds:qa}):ha&&ha.length&&(aa.tree=ha);aa.tree&&(ka={primitive:"points",usage:"static",data:aa.tree,
type:"uint32"},aa.elements?aa.elements(ka):aa.elements=B.elements(ka));ca({data:t.float(ba),usage:"dynamic"});sa({data:t.fract(ba),usage:"dynamic"});ma({data:new Uint8Array(ra),type:"uint8",usage:"stream"});return ba}},{marker:function(ba,aa,ka){ka=aa.activation;ka.forEach(function(ra){return ra&&ra.destroy&&ra.destroy()});ka.length=0;if(ba&&"number"!==typeof ba[0]){for(var ha=[],ca=0,sa=Math.min(ba.length,aa.count);ca<sa;ca++){var ma=y.addMarker(ba[ca]);ha[ma]||(ha[ma]=new Uint8Array(aa.count));
ha[ma][ca]=1}for(aa=0;aa<ha.length;aa++)if(ha[aa]){ca={data:ha[aa],type:"uint8",usage:"static"};if(ka[aa])ka[aa](ca);else ka[aa]=B.buffer(ca);ka[aa].data=ha[aa]}}else ha=y.addMarker(ba),ka[ha]=!0;return ba},range:function(ba,aa,ka){if(ka=aa.bounds)return ba||(ba=ka),aa.scale=[1/(ba[2]-ba[0]),1/(ba[3]-ba[1])],aa.translate=[-ba[0],-ba[1]],aa.scaleFract=t.fract(aa.scale),aa.translateFract=t.fract(aa.translate),ba},viewport:function(ba){return w(ba||[u.drawingBufferWidth,u.drawingBufferHeight])}}]);if(Q){var R=
L;M=R.count;E=R.size;var O=R.borderSize;R=R.sizeBuffer;var T=new Uint8Array(2*M);if(E.length||O.length)for(var V=0;V<M;V++)T[2*V]=Math.round(255*(null==E[V]?E:E[V])/I),T[2*V+1]=Math.round(255*(null==O[V]?O:O[V])/I);R({data:T,usage:"dynamic"})}if(S){R=L;M=R.count;E=R.color;O=R.borderColor;R=R.colorBuffer;if(y.tooManyColors){if(E.length||O.length){var X=new Uint8Array(8*M);for(T=0;T<M;T++)V=E[T],X[8*T]=N[4*V],X[8*T+1]=N[4*V+1],X[8*T+2]=N[4*V+2],X[8*T+3]=N[4*V+3],V=O[T],X[8*T+4]=N[4*V],X[8*T+5]=N[4*
V+1],X[8*T+6]=N[4*V+2],X[8*T+7]=N[4*V+3]}}else if(E.length||O.length)for(X=new Uint8Array(4*M+2),T=0;T<M;T++)null!=E[T]&&(X[4*T]=E[T]%J,X[4*T+1]=Math.floor(E[T]/J)),null!=O[T]&&(X[4*T+2]=O[T]%J,X[4*T+3]=Math.floor(O[T]/J));R({data:X||new Uint8Array(0),type:"uint8",usage:"dynamic"})}return L})}};f.prototype.addMarker=function(y){var A=this.markerTextures,z=this.regl,F=this.markerCache,D=null==y?0:F.indexOf(y);if(0<=D)return D;if(y instanceof Uint8Array||y instanceof Uint8ClampedArray)var u=y;else{u=
new Uint8Array(y.length);D=0;for(var B=y.length;D<B;D++)u[D]=255*y[D]}B=Math.floor(Math.sqrt(u.length));D=A.length;F.push(y);A.push(z.texture({channels:1,data:u,radius:B,mag:"linear",min:"linear"}));return D};f.prototype.updateColor=function(y){var A=this.paletteIds,z=this.palette,F=this.maxColors;Array.isArray(y)||(y=[y]);var D=[];if("number"===typeof y[0]){var u=[];if(Array.isArray(y))for(var B=0;B<y.length;B+=4)u.push(y.slice(B,B+4));else for(B=0;B<y.length;B+=4)u.push(y.subarray(B,B+4));y=u}for(u=
0;u<y.length;u++){B=y[u];B=b(B,"uint8");var I=e(B,!1);if(null==A[I]){var J=z.length;A[I]=Math.floor(J/4);z[J]=B[0];z[J+1]=B[1];z[J+2]=B[2];z[J+3]=B[3]}D[u]=A[I]}!this.tooManyColors&&z.length>4*F&&(this.tooManyColors=!0);this.updatePalette(z);return 1===D.length?D[0]:D};f.prototype.updatePalette=function(y){if(!this.tooManyColors){var A=this.maxColors,z=this.paletteTexture,F=Math.ceil(.25*y.length/A);if(1<F){y=y.slice();for(var D=.25*y.length%A;D<F*A;D++)y.push(0,0,0,0)}z.height<F&&z.resize(A,F);z.subimage({width:Math.min(.25*
y.length,A),height:F,data:y},0,0)}};f.prototype.destroy=function(){this.groups.forEach(function(y){y.sizeBuffer.destroy();y.positionBuffer.destroy();y.positionFractBuffer.destroy();y.colorBuffer.destroy();y.activation.forEach(function(A){return A&&A.destroy&&A.destroy()});y.selectionBuffer.destroy();y.elements&&y.elements.destroy()});this.groups.length=0;this.paletteTexture.destroy();this.markerTextures.forEach(function(y){return y&&y.destroy&&y.destroy()});return this};var x=a("object-assign");G.exports=
function(y,A){y=new f(y,A);A=y.render.bind(y);x(A,{render:A,update:y.update.bind(y),draw:y.draw.bind(y),destroy:y.destroy.bind(y),regl:y.regl,gl:y.gl,canvas:y.gl.canvas,groups:y.groups,markers:y.markerCache,palette:y.palette});return A}},{"@plotly/point-cluster":57,"array-bounds":70,"color-id":123,"color-normalize":125,"flatten-vertex-data":244,glslify:413,"is-iexplorer":440,"object-assign":473,"parse-rect":478,"pick-by-alias":485,"to-float32":549,"update-diff":571}],511:[function(a,G,C){function q(g,
d){if(!(this instanceof q))return new q(g,d);this.traces=[];this.passes={};this.regl=g;this.scatter=f(g);this.canvas=this.scatter.canvas}function n(g,d,p){d=g[d];var r=g[p];2<d.length?(g=d[1],d=d[3]):d.length?(g=d[0],d=d[1]):(g=d.y,d=d.y+d.height);2<r.length?(p=r[0],r=r[2]):r.length?(p=r[0],r=r[1]):(p=r.x,r=r.x+r.width);return[p,g,r,d]}function m(g){if("number"===typeof g)return[g,g,g,g];if(2===g.length)return[g[0],g[1],g[0],g[1]];g=l(g);return[g.x,g.y,g.x+g.width,g.y+g.height]}var f=a("regl-scatter2d"),
b=a("pick-by-alias"),k=a("array-bounds"),e=a("raf"),h=a("array-range"),l=a("parse-rect"),c=a("flatten-vertex-data");G.exports=q;q.prototype.render=function(){for(var g=this,d=[],p=arguments.length;p--;)d[p]=arguments[p];d.length&&this.update.apply(this,d);if(this.regl.attributes.preserveDrawingBuffer)return this.draw();this.dirty?null==this.planned&&(this.planned=e(function(){g.draw();g.dirty=!0;g.planned=null})):(this.draw(),this.dirty=!0,e(function(){g.dirty=!1}));return this};q.prototype.update=
function(){for(var g,d=[],p=arguments.length;p--;)d[p]=arguments[p];if(d.length){for(p=0;p<d.length;p++)this.updateItem(p,d[p]);this.traces=this.traces.filter(Boolean);d=[];for(var r=p=0;r<this.traces.length;r++){for(var t=this.traces[r],w=this.traces[r].passes,x=0;x<w.length;x++)d.push(this.passes[w[x]]);t.passOffset=p;p+=t.passes.length}(g=this.scatter).update.apply(g,d);return this}};q.prototype.updateItem=function(g,d){var p=this.regl;if(null===d)return this.traces[g]=null,this;if(!d)return this;
d=b(d,{data:"data items columns rows values dimensions samples x",snap:"snap cluster",size:"sizes size radius",color:"colors color fill fill-color fillColor",opacity:"opacity alpha transparency opaque",borderSize:"borderSizes borderSize border-size bordersize borderWidth borderWidths border-width borderwidth stroke-width strokeWidth strokewidth outline",borderColor:"borderColors borderColor bordercolor stroke stroke-color strokeColor",marker:"markers marker shape",range:"range ranges databox dataBox",
viewport:"viewport viewBox viewbox",domain:"domain domains area areas",padding:"pad padding paddings pads margin margins",transpose:"transpose transposed",diagonal:"diagonal diag showDiagonal",upper:"upper up top upperhalf upperHalf showupperhalf showUpper showUpperHalf",lower:"lower low bottom lowerhalf lowerHalf showlowerhalf showLowerHalf showLower"});g=this.traces[g]||(this.traces[g]={id:g,buffer:p.buffer({usage:"dynamic",type:"float",data:new Uint8Array}),color:"black",marker:null,size:12,borderColor:"transparent",
borderSize:1,viewport:l([p._gl.drawingBufferWidth,p._gl.drawingBufferHeight]),padding:[0,0,0,0],opacity:1,diagonal:!0,upper:!0,lower:!0});null!=d.color&&(g.color=d.color);null!=d.size&&(g.size=d.size);null!=d.marker&&(g.marker=d.marker);null!=d.borderColor&&(g.borderColor=d.borderColor);null!=d.borderSize&&(g.borderSize=d.borderSize);null!=d.opacity&&(g.opacity=d.opacity);d.viewport&&(g.viewport=l(d.viewport));null!=d.diagonal&&(g.diagonal=d.diagonal);null!=d.upper&&(g.upper=d.upper);null!=d.lower&&
(g.lower=d.lower);if(d.data)for(g.buffer(c(d.data)),g.columns=d.data.length,g.count=d.data[0].length,g.bounds=[],p=0;p<g.columns;p++)g.bounds[p]=k(d.data[p],1);if(d.range){g.range=d.range;var r=g.range&&"number"!==typeof g.range[0]}d.domain&&(g.domain=d.domain);p=!1;null!=d.padding&&(Array.isArray(d.padding)&&d.padding.length===g.columns&&"number"===typeof d.padding[d.padding.length-1]?(g.padding=d.padding.map(m),p=!0):g.padding=m(d.padding));var t=g.columns,w=g.count,x=g.viewport.width,y=g.viewport.height,
A=g.viewport.x,z=g.viewport.y,F=x/t,D=y/t;g.passes=[];for(var u=0;u<t;u++)for(var B=0;B<t;B++)if(g.diagonal||B!==u)if(g.upper||!(u>B))if(g.lower||!(u<B)){var I=g.id;I=(null!=I.id?I.id:I)<<16|(u&255)<<8|B&255;var J=this.passes[I]||(this.passes[I]={});d.data&&(J.positions=d.transpose?{x:{buffer:g.buffer,offset:B,count:w,stride:t},y:{buffer:g.buffer,offset:u,count:w,stride:t}}:{x:{buffer:g.buffer,offset:B*w,count:w},y:{buffer:g.buffer,offset:u*w,count:w}},J.bounds=n(g.bounds,u,B));if(d.domain||d.viewport||
d.data){var N=p?n(g.padding,u,B):g.padding;if(g.domain){var M=n(g.domain,u,B);J.viewport=[A+M[0]*x+N[0],z+M[1]*y+N[1],A+M[2]*x-N[2],z+M[3]*y-N[3]]}else J.viewport=[A+B*F+F*N[0],z+u*D+D*N[1],A+(B+1)*F-F*N[2],z+(u+1)*D-D*N[3]]}d.color&&(J.color=g.color);d.size&&(J.size=g.size);d.marker&&(J.marker=g.marker);d.borderSize&&(J.borderSize=g.borderSize);d.borderColor&&(J.borderColor=g.borderColor);d.opacity&&(J.opacity=g.opacity);d.range&&(J.range=r?n(g.range,u,B):g.range||J.bounds);g.passes.push(I)}return this};
q.prototype.draw=function(){for(var g,d=[],p=arguments.length;p--;)d[p]=arguments[p];if(d.length){var r=[];for(p=0;p<d.length;p++)if("number"===typeof d[p]){var t=this.traces[d[p]],w=t.passOffset;r.push.apply(r,h(w,w+t.passes.length))}else if(d[p].length){var x=d[p];t=this.traces[p];w=t.passes;var y=t.passOffset;w=w.map(function(A,z){r[y+z]=x})}(g=this.scatter).draw.apply(g,r)}else this.scatter.draw();return this};q.prototype.destroy=function(){this.traces.forEach(function(g){g.buffer&&g.buffer.destroy&&
g.buffer.destroy()});this.passes=this.traces=null;this.scatter.destroy();return this}},{"array-bounds":70,"array-range":72,"flatten-vertex-data":244,"parse-rect":478,"pick-by-alias":485,raf:502,"regl-scatter2d":510}],512:[function(a,G,C){(function(q,n){"object"===typeof C&&"undefined"!==typeof G?G.exports=n():q.createREGL=n()})(this,function(){function q(Cb,ic){this.id=oa++;this.type=Cb;this.data=ic}function n(Cb){if(0===Cb.length)return[];var ic=Cb.charAt(0),sc=Cb.charAt(Cb.length-1);if(1<Cb.length&&
ic===sc&&('"'===ic||"'"===ic))return['"'+Cb.substr(1,Cb.length-2).replace(/\\/g,"\\\\").replace(/"/g,'\\"')+'"'];if(ic=/\[(false|true|null|\d+|'[^']*'|"[^"]*")\]/.exec(Cb))return n(Cb.substr(0,ic.index)).concat(n(ic[1])).concat(n(Cb.substr(ic.index+ic[0].length)));ic=Cb.split(".");if(1===ic.length)return['"'+Cb.replace(/\\/g,"\\\\").replace(/"/g,'\\"')+'"'];Cb=[];for(sc=0;sc<ic.length;++sc)Cb=Cb.concat(n(ic[sc]));return Cb}function m(Cb){return"["+n(Cb).join("][")+"]"}function f(){var Cb={"":0},ic=
[""];return{id:function(sc){var wb=Cb[sc];if(wb)return wb;wb=Cb[sc]=ic.length;ic.push(sc);return wb},str:function(sc){return ic[sc]}}}function b(Cb,ic,sc){function wb(){var lb=window.innerWidth,vb=window.innerHeight;Cb!==document.body&&(vb=Cb.getBoundingClientRect(),lb=vb.right-vb.left,vb=vb.bottom-vb.top);zb.width=sc*lb;zb.height=sc*vb;pa(zb.style,{width:lb+"px",height:vb+"px"})}var zb=document.createElement("canvas");pa(zb.style,{border:0,margin:0,padding:0,top:0,left:0});Cb.appendChild(zb);Cb===
document.body&&(zb.style.position="absolute",pa(Cb.style,{margin:0,padding:0}));var Tb;Cb!==document.body&&"function"===typeof ResizeObserver?(Tb=new ResizeObserver(function(){setTimeout(wb)}),Tb.observe(Cb)):window.addEventListener("resize",wb,!1);wb();return{canvas:zb,onDestroy:function(){Tb?Tb.disconnect():window.removeEventListener("resize",wb);Cb.removeChild(zb)}}}function k(Cb,ic){function sc(wb){try{return Cb.getContext(wb,ic)}catch(zb){return null}}return sc("webgl")||sc("experimental-webgl")||
sc("webgl-experimental")}function e(Cb){return"string"===typeof Cb?Cb.split():Cb}function h(Cb){return"string"===typeof Cb?document.querySelector(Cb):Cb}function l(Cb){var ic=Cb||{},sc,wb,zb,Tb;Cb={};var lb=[],vb=[],Ub="undefined"===typeof window?1:window.devicePixelRatio,Sb=!1,Ab=function(Fb){},Eb=function(){};"string"===typeof ic?sc=document.querySelector(ic):"object"===typeof ic&&("string"===typeof ic.nodeName&&"function"===typeof ic.appendChild&&"function"===typeof ic.getBoundingClientRect?sc=
ic:"function"===typeof ic.drawArrays||"function"===typeof ic.drawElements?(Tb=ic,zb=Tb.canvas):("gl"in ic?Tb=ic.gl:"canvas"in ic?zb=h(ic.canvas):"container"in ic&&(wb=h(ic.container)),"attributes"in ic&&(Cb=ic.attributes),"extensions"in ic&&(lb=e(ic.extensions)),"optionalExtensions"in ic&&(vb=e(ic.optionalExtensions)),"onDone"in ic&&(Ab=ic.onDone),"profile"in ic&&(Sb=!!ic.profile),"pixelRatio"in ic&&(Ub=+ic.pixelRatio)));sc&&("canvas"===sc.nodeName.toLowerCase()?zb=sc:wb=sc);if(!Tb){if(!zb){sc=b(wb||
document.body,Ab,Ub);if(!sc)return null;zb=sc.canvas;Eb=sc.onDestroy}void 0===Cb.premultipliedAlpha&&(Cb.premultipliedAlpha=!0);Tb=k(zb,Cb)}return Tb?{gl:Tb,canvas:zb,container:wb,extensions:lb,optionalExtensions:vb,pixelRatio:Ub,profile:Sb,onDone:Ab,onDestroy:Eb}:(Eb(),Ab("webgl not supported, try upgrading your browser or graphics drivers http://get.webgl.org"),null)}function c(Cb,ic){function sc(lb){lb=lb.toLowerCase();try{var vb=wb[lb]=Cb.getExtension(lb)}catch(Ub){}return!!vb}for(var wb={},zb=
0;zb<ic.extensions.length;++zb){var Tb=ic.extensions[zb];if(!sc(Tb))return ic.onDestroy(),ic.onDone('"'+Tb+'" extension is not supported by the current WebGL context, try upgrading your system or a different browser'),null}ic.optionalExtensions.forEach(sc);return{extensions:wb,restore:function(){Object.keys(wb).forEach(function(lb){if(wb[lb]&&!sc(lb))throw Error("(regl): error restoring extension "+lb);})}}}function g(Cb,ic){for(var sc=Array(Cb),wb=0;wb<Cb;++wb)sc[wb]=ic(wb);return sc}function d(Cb){var ic=
(65535<Cb)<<4;Cb>>>=ic;var sc=(255<Cb)<<3;Cb>>>=sc;ic|=sc;sc=(15<Cb)<<2;Cb>>>=sc;ic|=sc;sc=(3<Cb)<<1;return ic|sc|Cb>>>sc>>1}function p(){function Cb(wb){a:{for(var zb=16;268435456>=zb;zb*=16)if(wb<=zb){wb=zb;break a}wb=0}zb=sc[d(wb)>>2];return 0<zb.length?zb.pop():new ArrayBuffer(wb)}function ic(wb){sc[d(wb.byteLength)>>2].push(wb)}var sc=g(8,function(){return[]});return{alloc:Cb,free:ic,allocType:function(wb,zb){switch(wb){case 5120:wb=new Int8Array(Cb(zb),0,zb);break;case 5121:wb=new Uint8Array(Cb(zb),
0,zb);break;case 5122:wb=new Int16Array(Cb(2*zb),0,zb);break;case 5123:wb=new Uint16Array(Cb(2*zb),0,zb);break;case 5124:wb=new Int32Array(Cb(4*zb),0,zb);break;case 5125:wb=new Uint32Array(Cb(4*zb),0,zb);break;case 5126:wb=new Float32Array(Cb(4*zb),0,zb);break;default:return null}return wb.length!==zb?wb.subarray(0,zb):wb},freeType:function(wb){ic(wb.buffer)}}}function r(Cb){return!!Cb&&"object"===typeof Cb&&Array.isArray(Cb.shape)&&Array.isArray(Cb.stride)&&"number"===typeof Cb.offset&&Cb.shape.length===
Cb.stride.length&&(Array.isArray(Cb.data)||Ma(Cb.data))}function t(Cb,ic,sc,wb,zb,Tb){for(var lb=0;lb<ic;++lb)for(var vb=Cb[lb],Ub=0;Ub<sc;++Ub)for(var Sb=vb[Ub],Ab=0;Ab<wb;++Ab)zb[Tb++]=Sb[Ab]}function w(Cb,ic,sc,wb,zb){for(var Tb=1,lb=sc+1;lb<ic.length;++lb)Tb*=ic[lb];var vb=ic[sc];if(4===ic.length-sc){var Ub=ic[sc+1],Sb=ic[sc+2];ic=ic[sc+3];for(lb=0;lb<vb;++lb)t(Cb[lb],Ub,Sb,ic,wb,zb),zb+=Tb}else for(lb=0;lb<vb;++lb)w(Cb[lb],ic,sc+1,wb,zb),zb+=Tb}function x(Cb){return Pa[Object.prototype.toString.call(Cb)]|
0}function y(Cb,ic){for(var sc=0;sc<ic.length;++sc)Cb[sc]=ic[sc]}function A(Cb,ic,sc,wb,zb,Tb,lb){for(var vb=0,Ub=0;Ub<sc;++Ub)for(var Sb=0;Sb<wb;++Sb)Cb[vb++]=ic[zb*Ub+Tb*Sb+lb]}function z(Cb,ic,sc,wb){function zb(Eb){this.id=Ub++;this.buffer=Cb.createBuffer();this.type=Eb;this.usage=35044;this.byteLength=0;this.dimension=1;this.dtype=5121;this.persistentData=null;sc.profile&&(this.stats={size:0})}function Tb(Eb,Fb,xb){Eb.byteLength=Fb.byteLength;Cb.bufferData(Eb.type,Fb,xb)}function lb(Eb,Fb,xb,
Jb,tb,Lb){Eb.usage=xb;if(Array.isArray(Fb)){if(Eb.dtype=Jb||5126,0<Fb.length)if(Array.isArray(Fb[0])){tb=cb(Fb);for(var Ib=Jb=1;Ib<tb.length;++Ib)Jb*=tb[Ib];Eb.dimension=Jb;Fb=$a(Fb,tb,Eb.dtype);Tb(Eb,Fb,xb);Lb?Eb.persistentData=Fb:za.freeType(Fb)}else"number"===typeof Fb[0]?(Eb.dimension=tb,tb=za.allocType(Eb.dtype,Fb.length),y(tb,Fb),Tb(Eb,tb,xb),Lb?Eb.persistentData=tb:za.freeType(tb)):Ma(Fb[0])&&(Eb.dimension=Fb[0].length,Eb.dtype=Jb||x(Fb[0])||5126,Fb=$a(Fb,[Fb.length,Fb[0].length],Eb.dtype),
Tb(Eb,Fb,xb),Lb?Eb.persistentData=Fb:za.freeType(Fb))}else if(Ma(Fb))Eb.dtype=Jb||x(Fb),Eb.dimension=tb,Tb(Eb,Fb,xb),Lb&&(Eb.persistentData=new Uint8Array(new Uint8Array(Fb.buffer)));else if(r(Fb)){tb=Fb.shape;var lc=Fb.stride;Ib=Fb.offset;var $b=0,nc=0,xc=0,Bc=0;1===tb.length?($b=tb[0],nc=1,xc=lc[0],Bc=0):2===tb.length&&($b=tb[0],nc=tb[1],xc=lc[0],Bc=lc[1]);Eb.dtype=Jb||x(Fb.data)||5126;Eb.dimension=nc;tb=za.allocType(Eb.dtype,$b*nc);A(tb,Fb.data,$b,nc,xc,Bc,Ib);Tb(Eb,tb,xb);Lb?Eb.persistentData=
tb:za.freeType(tb)}else Fb instanceof ArrayBuffer&&(Eb.dtype=5121,Eb.dimension=tb,Tb(Eb,Fb,xb),Lb&&(Eb.persistentData=new Uint8Array(new Uint8Array(Fb))))}function vb(Eb){ic.bufferCount--;wb(Eb);Cb.deleteBuffer(Eb.buffer);Eb.buffer=null;delete Sb[Eb.id]}var Ub=0,Sb={};zb.prototype.bind=function(){Cb.bindBuffer(this.type,this.buffer)};zb.prototype.destroy=function(){vb(this)};var Ab=[];sc.profile&&(ic.getTotalBufferSize=function(){var Eb=0;Object.keys(Sb).forEach(function(Fb){Eb+=Sb[Fb].stats.size});
return Eb});return{create:function(Eb,Fb,xb,Jb){function tb(Ib){var lc=35044,$b=null,nc=0,xc=0,Bc=1;Array.isArray(Ib)||Ma(Ib)||r(Ib)||Ib instanceof ArrayBuffer?$b=Ib:"number"===typeof Ib?nc=Ib|0:Ib&&("data"in Ib&&($b=Ib.data),"usage"in Ib&&(lc=Na[Ib.usage]),"type"in Ib&&(xc=Fa[Ib.type]),"dimension"in Ib&&(Bc=Ib.dimension|0),"length"in Ib&&(nc=Ib.length|0));Lb.bind();$b?lb(Lb,$b,lc,xc,Bc,Jb):(nc&&Cb.bufferData(Lb.type,nc,lc),Lb.dtype=xc||5121,Lb.usage=lc,Lb.dimension=Bc,Lb.byteLength=nc);sc.profile&&
(Lb.stats.size=Lb.byteLength*mb[Lb.dtype]);return tb}ic.bufferCount++;var Lb=new zb(Fb);Sb[Lb.id]=Lb;xb||tb(Eb);tb._reglType="buffer";tb._buffer=Lb;tb.subdata=function(Ib,lc){lc=(lc||0)|0;Lb.bind();if(Ma(Ib)||Ib instanceof ArrayBuffer)Cb.bufferSubData(Lb.type,lc,Ib);else if(Array.isArray(Ib)){if(0<Ib.length)if("number"===typeof Ib[0]){var $b=za.allocType(Lb.dtype,Ib.length);y($b,Ib);Cb.bufferSubData(Lb.type,lc,$b);za.freeType($b)}else if(Array.isArray(Ib[0])||Ma(Ib[0])){var nc=cb(Ib);$b=$a(Ib,nc,
Lb.dtype);Cb.bufferSubData(Lb.type,lc,$b);za.freeType($b)}}else if(r(Ib)){nc=Ib.shape;var xc=Ib.stride,Bc=$b=0,Rc=0,pd=0;1===nc.length?($b=nc[0],Bc=1,Rc=xc[0],pd=0):2===nc.length&&($b=nc[0],Bc=nc[1],Rc=xc[0],pd=xc[1]);nc=Array.isArray(Ib.data)?Lb.dtype:x(Ib.data);nc=za.allocType(nc,$b*Bc);A(nc,Ib.data,$b,Bc,Rc,pd,Ib.offset);Cb.bufferSubData(Lb.type,lc,nc);za.freeType(nc)}return tb};sc.profile&&(tb.stats=Lb.stats);tb.destroy=function(){vb(Lb)};return tb},createStream:function(Eb,Fb){var xb=Ab.pop();
xb||(xb=new zb(Eb));xb.bind();lb(xb,Fb,35040,0,1,!1);return xb},destroyStream:function(Eb){Ab.push(Eb)},clear:function(){Oa(Sb).forEach(vb);Ab.forEach(vb)},getBuffer:function(Eb){return Eb&&Eb._buffer instanceof zb?Eb._buffer:null},restore:function(){Oa(Sb).forEach(function(Eb){Eb.buffer=Cb.createBuffer();Cb.bindBuffer(Eb.type,Eb.buffer);Cb.bufferData(Eb.type,Eb.persistentData||Eb.byteLength,Eb.usage)})},_initBuffer:lb}}function F(Cb,ic,sc,wb){function zb(Eb){this.id=Ub++;vb[this.id]=this;this.buffer=
Eb;this.primType=4;this.type=this.vertCount=0}function Tb(Eb,Fb,xb,Jb,tb,Lb,Ib){Eb.buffer.bind();var lc;Fb?((lc=Ib)||Ma(Fb)&&(!r(Fb)||Ma(Fb.data))||(lc=ic.oes_element_index_uint?5125:5123),sc._initBuffer(Eb.buffer,Fb,xb,lc,3)):(Cb.bufferData(34963,Lb,xb),Eb.buffer.dtype=lc||5121,Eb.buffer.usage=xb,Eb.buffer.dimension=3,Eb.buffer.byteLength=Lb);lc=Ib;if(!Ib){switch(Eb.buffer.dtype){case 5121:case 5120:lc=5121;break;case 5123:case 5122:lc=5123;break;case 5125:case 5124:lc=5125}Eb.buffer.dtype=lc}Eb.type=
lc;Fb=tb;0>Fb&&(Fb=Eb.buffer.byteLength,5123===lc?Fb>>=1:5125===lc&&(Fb>>=2));Eb.vertCount=Fb;Fb=Jb;0>Jb&&(Fb=4,Jb=Eb.buffer.dimension,1===Jb&&(Fb=0),2===Jb&&(Fb=1),3===Jb&&(Fb=4));Eb.primType=Fb}function lb(Eb){wb.elementsCount--;delete vb[Eb.id];Eb.buffer.destroy();Eb.buffer=null}var vb={},Ub=0,Sb={uint8:5121,uint16:5123};ic.oes_element_index_uint&&(Sb.uint32=5125);zb.prototype.bind=function(){this.buffer.bind()};var Ab=[];return{create:function(Eb,Fb){function xb(Lb){if(Lb)if("number"===typeof Lb)Jb(Lb),
tb.primType=4,tb.vertCount=Lb|0,tb.type=5121;else{var Ib=null,lc=35044,$b=-1,nc=-1,xc=0,Bc=0;if(Array.isArray(Lb)||Ma(Lb)||r(Lb))Ib=Lb;else if("data"in Lb&&(Ib=Lb.data),"usage"in Lb&&(lc=Na[Lb.usage]),"primitive"in Lb&&($b=Ka[Lb.primitive]),"count"in Lb&&(nc=Lb.count|0),"type"in Lb&&(Bc=Sb[Lb.type]),"length"in Lb)xc=Lb.length|0;else if(xc=nc,5123===Bc||5122===Bc)xc*=2;else if(5125===Bc||5124===Bc)xc*=4;Tb(tb,Ib,lc,$b,nc,xc,Bc)}else Jb(),tb.primType=4,tb.vertCount=0,tb.type=5121;return xb}var Jb=sc.create(null,
34963,!0),tb=new zb(Jb._buffer);wb.elementsCount++;xb(Eb);xb._reglType="elements";xb._elements=tb;xb.subdata=function(Lb,Ib){Jb.subdata(Lb,Ib);return xb};xb.destroy=function(){lb(tb)};return xb},createStream:function(Eb){var Fb=Ab.pop();Fb||(Fb=new zb(sc.create(null,34963,!0,!1)._buffer));Tb(Fb,Eb,35040,-1,-1,0,0);return Fb},destroyStream:function(Eb){Ab.push(Eb)},getElements:function(Eb){return"function"===typeof Eb&&Eb._elements instanceof zb?Eb._elements:null},clear:function(){Oa(vb).forEach(lb)}}}
function D(Cb){for(var ic=za.allocType(5123,Cb.length),sc=0;sc<Cb.length;++sc)if(isNaN(Cb[sc]))ic[sc]=65535;else if(Infinity===Cb[sc])ic[sc]=31744;else if(-Infinity===Cb[sc])ic[sc]=64512;else{Ua[0]=Cb[sc];var wb=Ea[0],zb=wb>>>31<<15,Tb=(wb<<1>>>24)-127;wb=wb>>13&1023;ic[sc]=-24>Tb?zb:-14>Tb?zb+(wb+1024>>-14-Tb):15<Tb?zb+31744:zb+(Tb+15<<10)+wb}return ic}function u(Cb){return Array.isArray(Cb)||Ma(Cb)}function B(Cb){return"[object "+Cb+"]"}function I(Cb){return Array.isArray(Cb)&&(0===Cb.length||"number"===
typeof Cb[0])}function J(Cb){return Array.isArray(Cb)&&0!==Cb.length&&u(Cb[0])?!0:!1}function N(Cb){return Object.prototype.toString.call(Cb)}function M(Cb){if(!Cb)return!1;var ic=N(Cb);return 0<=Qa.indexOf(ic)?!0:I(Cb)||J(Cb)||r(Cb)}function E(Cb,ic){36193===Cb.type?(Cb.data=D(ic),za.freeType(ic)):Cb.data=ic}function L(Cb,ic,sc,wb,zb,Tb){Cb="undefined"!==typeof Va[Cb]?Va[Cb]:Wa[Cb]*gb[ic];Tb&&(Cb*=6);if(zb){for(wb=0;1<=sc;)wb+=Cb*sc*sc,sc/=2;return wb}return Cb*sc*wb}function Q(Cb,ic,sc,wb,zb,Tb,
lb){function vb(){this.format=this.internalformat=6408;this.type=5121;this.flipY=this.premultiplyAlpha=this.compressed=!1;this.unpackAlignment=1;this.colorSpace=37444;this.channels=this.height=this.width=0}function Ub(tc,Fc){tc.internalformat=Fc.internalformat;tc.format=Fc.format;tc.type=Fc.type;tc.compressed=Fc.compressed;tc.premultiplyAlpha=Fc.premultiplyAlpha;tc.flipY=Fc.flipY;tc.unpackAlignment=Fc.unpackAlignment;tc.colorSpace=Fc.colorSpace;tc.width=Fc.width;tc.height=Fc.height;tc.channels=Fc.channels}
function Sb(tc,Fc){if("object"===typeof Fc&&Fc){"premultiplyAlpha"in Fc&&(tc.premultiplyAlpha=Fc.premultiplyAlpha);"flipY"in Fc&&(tc.flipY=Fc.flipY);"alignment"in Fc&&(tc.unpackAlignment=Fc.alignment);"colorSpace"in Fc&&(tc.colorSpace=kb[Fc.colorSpace]);"type"in Fc&&(tc.type=De[Fc.type]);var Wc=tc.width,hd=tc.height,be=tc.channels,pe=!1;"shape"in Fc?(Wc=Fc.shape[0],hd=Fc.shape[1],3===Fc.shape.length&&(be=Fc.shape[2],pe=!0)):("radius"in Fc&&(Wc=hd=Fc.radius),"width"in Fc&&(Wc=Fc.width),"height"in Fc&&
(hd=Fc.height),"channels"in Fc&&(be=Fc.channels,pe=!0));tc.width=Wc|0;tc.height=hd|0;tc.channels=be|0;Wc=!1;"format"in Fc&&(Wc=Fc.format,hd=tc.internalformat=Hd[Wc],tc.format=ke[hd],Wc in De&&!("type"in Fc)&&(tc.type=De[Wc]),Wc in oe&&(tc.compressed=!0),Wc=!0);!pe&&Wc?tc.channels=Wa[tc.format]:pe&&!Wc&&tc.channels!==ab[tc.format]&&(tc.format=tc.internalformat=ab[tc.channels])}}function Ab(tc){Cb.pixelStorei(37440,tc.flipY);Cb.pixelStorei(37441,tc.premultiplyAlpha);Cb.pixelStorei(37443,tc.colorSpace);
Cb.pixelStorei(3317,tc.unpackAlignment)}function Eb(){vb.call(this);this.yOffset=this.xOffset=0;this.data=null;this.needsFree=!1;this.element=null;this.needsCopy=!1}function Fb(tc,Fc){var Wc=null;M(Fc)?Wc=Fc:Fc&&(Sb(tc,Fc),"x"in Fc&&(tc.xOffset=Fc.x|0),"y"in Fc&&(tc.yOffset=Fc.y|0),M(Fc.data)&&(Wc=Fc.data));if(Fc.copy){Fc=zb.viewportWidth;var hd=zb.viewportHeight;tc.width=tc.width||Fc-tc.xOffset;tc.height=tc.height||hd-tc.yOffset;tc.needsCopy=!0}else if(!Wc)tc.width=tc.width||1,tc.height=tc.height||
1,tc.channels=tc.channels||4;else if(Ma(Wc))tc.channels=tc.channels||4,tc.data=Wc,"type"in Fc||5121!==tc.type||(tc.type=Pa[Object.prototype.toString.call(Wc)]|0);else if(I(Wc)){tc.channels=tc.channels||4;Fc=Wc;hd=Fc.length;switch(tc.type){case 5121:case 5123:case 5125:case 5126:hd=za.allocType(tc.type,hd);hd.set(Fc);tc.data=hd;break;case 36193:tc.data=D(Fc)}tc.alignment=1;tc.needsFree=!0}else if(r(Wc)){Fc=Wc.data;Array.isArray(Fc)||5121!==tc.type||(tc.type=Pa[Object.prototype.toString.call(Fc)]|0);
hd=Wc.shape;var be=Wc.stride,pe,ce;3===hd.length?(pe=hd[2],ce=be[2]):ce=pe=1;var de=hd[0];var Be=hd[1];hd=be[0];be=be[1];tc.alignment=1;tc.width=de;tc.height=Be;tc.channels=pe;tc.format=tc.internalformat=ab[pe];tc.needsFree=!0;de=ce;Wc=Wc.offset;pe=tc.width;ce=tc.height;Be=tc.channels;for(var Ue=za.allocType(36193===tc.type?5126:tc.type,pe*ce*Be),oc=0,vc=0;vc<ce;++vc)for(var Zc=0;Zc<pe;++Zc)for(var ld=0;ld<Be;++ld)Ue[oc++]=Fc[hd*Zc+be*vc+de*ld+Wc];E(tc,Ue)}else if(N(Wc)===Ja||N(Wc)===Sa||N(Wc)===
fb)N(Wc)===Ja||N(Wc)===Sa?tc.element=Wc:tc.element=Wc.canvas,tc.width=tc.element.width,tc.height=tc.element.height,tc.channels=4;else if(N(Wc)===nb)tc.element=Wc,tc.width=Wc.width,tc.height=Wc.height,tc.channels=4;else if(N(Wc)===Ha)tc.element=Wc,tc.width=Wc.naturalWidth,tc.height=Wc.naturalHeight,tc.channels=4;else if(N(Wc)===Ca)tc.element=Wc,tc.width=Wc.videoWidth,tc.height=Wc.videoHeight,tc.channels=4;else if(J(Wc)){Fc=tc.width||Wc[0].length;hd=tc.height||Wc.length;be=tc.channels;be=u(Wc[0][0])?
be||Wc[0][0].length:be||1;de=Ia.shape(Wc);pe=1;for(ce=0;ce<de.length;++ce)pe*=de[ce];pe=za.allocType(36193===tc.type?5126:tc.type,pe);Ia.flatten(Wc,de,"",pe);E(tc,pe);tc.alignment=1;tc.width=Fc;tc.height=hd;tc.channels=be;tc.format=tc.internalformat=ab[be];tc.needsFree=!0}}function xb(tc,Fc,Wc,hd,be){var pe=tc.element,ce=tc.data,de=tc.internalformat,Be=tc.format,Ue=tc.type,oc=tc.width,vc=tc.height;Ab(tc);pe?Cb.texSubImage2D(Fc,be,Wc,hd,Be,Ue,pe):tc.compressed?Cb.compressedTexSubImage2D(Fc,be,Wc,hd,
de,oc,vc,ce):tc.needsCopy?(wb(),Cb.copyTexSubImage2D(Fc,be,Wc,hd,tc.xOffset,tc.yOffset,oc,vc)):Cb.texSubImage2D(Fc,be,Wc,hd,oc,vc,Be,Ue,ce)}function Jb(){return Xd.pop()||new Eb}function tb(tc){tc.needsFree&&za.freeType(tc.data);Eb.call(tc);Xd.push(tc)}function Lb(){vb.call(this);this.genMipmaps=!1;this.mipmapHint=4352;this.mipmask=0;this.images=Array(16)}function Ib(tc,Fc,Wc){var hd=tc.images[0]=Jb();tc.mipmask=1;hd.width=tc.width=Fc;hd.height=tc.height=Wc;hd.channels=tc.channels=4}function lc(tc,
Fc){if(M(Fc)){var Wc=tc.images[0]=Jb();Ub(Wc,tc);Fb(Wc,Fc);tc.mipmask=1}else if(Sb(tc,Fc),Array.isArray(Fc.mipmap)){Fc=Fc.mipmap;for(var hd=0;hd<Fc.length;++hd)Wc=tc.images[hd]=Jb(),Ub(Wc,tc),Wc.width>>=hd,Wc.height>>=hd,Fb(Wc,Fc[hd]),tc.mipmask|=1<<hd}else Wc=tc.images[0]=Jb(),Ub(Wc,tc),Fb(Wc,Fc),tc.mipmask=1;Ub(tc,tc.images[0])}function $b(tc,Fc){tc=tc.images;for(var Wc=0;Wc<tc.length&&tc[Wc];++Wc){var hd=tc[Wc],be=Fc,pe=Wc,ce=hd.element,de=hd.data,Be=hd.internalformat,Ue=hd.format,oc=hd.type,vc=
hd.width,Zc=hd.height;Ab(hd);ce?Cb.texImage2D(be,pe,Ue,Ue,oc,ce):hd.compressed?Cb.compressedTexImage2D(be,pe,Be,vc,Zc,0,de):hd.needsCopy?(wb(),Cb.copyTexImage2D(be,pe,Ue,hd.xOffset,hd.yOffset,vc,Zc,0)):Cb.texImage2D(be,pe,Ue,vc,Zc,0,Ue,oc,de||null)}}function nc(){var tc=Ve.pop()||new Lb;vb.call(tc);for(var Fc=tc.mipmask=0;16>Fc;++Fc)tc.images[Fc]=null;return tc}function xc(tc){for(var Fc=tc.images,Wc=0;Wc<Fc.length;++Wc)Fc[Wc]&&tb(Fc[Wc]),Fc[Wc]=null;Ve.push(tc)}function Bc(){this.magFilter=this.minFilter=
9728;this.wrapT=this.wrapS=33071;this.anisotropic=1;this.genMipmaps=!1;this.mipmapHint=4352}function Rc(tc,Fc){"min"in Fc&&(tc.minFilter=Ld[Fc.min],0<=Ya.indexOf(tc.minFilter)&&!("faces"in Fc)&&(tc.genMipmaps=!0));"mag"in Fc&&(tc.magFilter=Kd[Fc.mag]);var Wc=tc.wrapS,hd=tc.wrapT;if("wrap"in Fc){var be=Fc.wrap;"string"===typeof be?Wc=hd=Cd[be]:Array.isArray(be)&&(Wc=Cd[be[0]],hd=Cd[be[1]])}else"wrapS"in Fc&&(Wc=Cd[Fc.wrapS]),"wrapT"in Fc&&(hd=Cd[Fc.wrapT]);tc.wrapS=Wc;tc.wrapT=hd;"anisotropic"in Fc&&
(tc.anisotropic=Fc.anisotropic);if("mipmap"in Fc){Wc=!1;switch(typeof Fc.mipmap){case "string":tc.mipmapHint=Hc[Fc.mipmap];Wc=tc.genMipmaps=!0;break;case "boolean":Wc=tc.genMipmaps=Fc.mipmap;break;case "object":tc.genMipmaps=!1,Wc=!0}!Wc||"min"in Fc||(tc.minFilter=9984)}}function pd(tc,Fc){Cb.texParameteri(Fc,10241,tc.minFilter);Cb.texParameteri(Fc,10240,tc.magFilter);Cb.texParameteri(Fc,10242,tc.wrapS);Cb.texParameteri(Fc,10243,tc.wrapT);ic.ext_texture_filter_anisotropic&&Cb.texParameteri(Fc,34046,
tc.anisotropic);tc.genMipmaps&&(Cb.hint(33170,tc.mipmapHint),Cb.generateMipmap(Fc))}function Vc(tc){vb.call(this);this.mipmask=0;this.internalformat=6408;this.id=Yd++;this.refCount=1;this.target=tc;this.texture=Cb.createTexture();this.unit=-1;this.bindCount=0;this.texInfo=new Bc;lb.profile&&(this.stats={size:0})}function xd(tc){Cb.activeTexture(33984);Cb.bindTexture(tc.target,tc.texture)}function sd(){var tc=Cf[0];tc?Cb.bindTexture(tc.target,tc.texture):Cb.bindTexture(3553,null)}function Yc(tc){var Fc=
tc.texture,Wc=tc.unit,hd=tc.target;0<=Wc&&(Cb.activeTexture(33984+Wc),Cb.bindTexture(hd,null),Cf[Wc]=null);Cb.deleteTexture(Fc);tc.texture=null;tc.params=null;tc.pixels=null;tc.refCount=0;delete yf[tc.id];Tb.textureCount--}var Hc={"don't care":4352,"dont care":4352,nice:4354,fast:4353},Cd={repeat:10497,clamp:33071,mirror:33648},Kd={nearest:9728,linear:9729},Ld=pa({mipmap:9987,"nearest mipmap nearest":9984,"linear mipmap nearest":9985,"nearest mipmap linear":9986,"linear mipmap linear":9987},Kd),kb=
{none:0,browser:37444},De={uint8:5121,rgba4:32819,rgb565:33635,"rgb5 a1":32820},Hd={alpha:6406,luminance:6409,"luminance alpha":6410,rgb:6407,rgba:6408,rgba4:32854,"rgb5 a1":32855,rgb565:36194},oe={};ic.ext_srgb&&(Hd.srgb=35904,Hd.srgba=35906);ic.oes_texture_float&&(De.float32=De["float"]=5126);ic.oes_texture_half_float&&(De.float16=De["half float"]=36193);ic.webgl_depth_texture&&(pa(Hd,{depth:6402,"depth stencil":34041}),pa(De,{uint16:5123,uint32:5125,"depth stencil":34042}));ic.webgl_compressed_texture_s3tc&&
pa(oe,{"rgb s3tc dxt1":33776,"rgba s3tc dxt1":33777,"rgba s3tc dxt3":33778,"rgba s3tc dxt5":33779});ic.webgl_compressed_texture_atc&&pa(oe,{"rgb atc":35986,"rgba atc explicit alpha":35987,"rgba atc interpolated alpha":34798});ic.webgl_compressed_texture_pvrtc&&pa(oe,{"rgb pvrtc 4bppv1":35840,"rgb pvrtc 2bppv1":35841,"rgba pvrtc 4bppv1":35842,"rgba pvrtc 2bppv1":35843});ic.webgl_compressed_texture_etc1&&(oe["rgb etc1"]=36196);var Ge=Array.prototype.slice.call(Cb.getParameter(34467));Object.keys(oe).forEach(function(tc){var Fc=
oe[tc];0<=Ge.indexOf(Fc)&&(Hd[tc]=Fc)});var Fd=Object.keys(Hd);sc.textureFormats=Fd;var ge=[];Object.keys(Hd).forEach(function(tc){ge[Hd[tc]]=tc});var ff=[];Object.keys(De).forEach(function(tc){ff[De[tc]]=tc});var Vd=[];Object.keys(Kd).forEach(function(tc){Vd[Kd[tc]]=tc});var Pd=[];Object.keys(Ld).forEach(function(tc){Pd[Ld[tc]]=tc});var Ed=[];Object.keys(Cd).forEach(function(tc){Ed[Cd[tc]]=tc});var ke=Fd.reduce(function(tc,Fc){var Wc=Hd[Fc];6409===Wc||6406===Wc||6409===Wc||6410===Wc||6402===Wc||
34041===Wc||ic.ext_srgb&&(35904===Wc||35906===Wc)?tc[Wc]=Wc:32855===Wc||0<=Fc.indexOf("rgba")?tc[Wc]=6408:tc[Wc]=6407;return tc},{}),Xd=[],Ve=[],Yd=0,yf={},Lf=sc.maxTextureUnits,Cf=Array(Lf).map(function(){return null});pa(Vc.prototype,{bind:function(){this.bindCount+=1;var tc=this.unit;if(0>tc){for(var Fc=0;Fc<Lf;++Fc){var Wc=Cf[Fc];if(Wc){if(0<Wc.bindCount)continue;Wc.unit=-1}Cf[Fc]=this;tc=Fc;break}lb.profile&&Tb.maxTextureUnits<tc+1&&(Tb.maxTextureUnits=tc+1);this.unit=tc;Cb.activeTexture(33984+
tc);Cb.bindTexture(this.target,this.texture)}return tc},unbind:function(){--this.bindCount},decRef:function(){0>=--this.refCount&&Yc(this)}});lb.profile&&(Tb.getTotalTextureSize=function(){var tc=0;Object.keys(yf).forEach(function(Fc){tc+=yf[Fc].stats.size});return tc});return{create2D:function(tc,Fc){function Wc(be,pe){var ce=hd.texInfo;Bc.call(ce);var de=nc();"number"===typeof be?"number"===typeof pe?Ib(de,be|0,pe|0):Ib(de,be|0,be|0):be?(Rc(ce,be),lc(de,be)):Ib(de,1,1);ce.genMipmaps&&(de.mipmask=
(de.width<<1)-1);hd.mipmask=de.mipmask;Ub(hd,de);hd.internalformat=de.internalformat;Wc.width=de.width;Wc.height=de.height;xd(hd);$b(de,3553);pd(ce,3553);sd();xc(de);lb.profile&&(hd.stats.size=L(hd.internalformat,hd.type,de.width,de.height,ce.genMipmaps,!1));Wc.format=ge[hd.internalformat];Wc.type=ff[hd.type];Wc.mag=Vd[ce.magFilter];Wc.min=Pd[ce.minFilter];Wc.wrapS=Ed[ce.wrapS];Wc.wrapT=Ed[ce.wrapT];return Wc}var hd=new Vc(3553);yf[hd.id]=hd;Tb.textureCount++;Wc(tc,Fc);Wc.subimage=function(be,pe,
ce,de){pe|=0;ce|=0;de|=0;var Be=Jb();Ub(Be,hd);Be.width=0;Be.height=0;Fb(Be,be);Be.width=Be.width||(hd.width>>de)-pe;Be.height=Be.height||(hd.height>>de)-ce;xd(hd);xb(Be,3553,pe,ce,de);sd();tb(Be);return Wc};Wc.resize=function(be,pe){be|=0;pe=pe|0||be;if(be===hd.width&&pe===hd.height)return Wc;Wc.width=hd.width=be;Wc.height=hd.height=pe;xd(hd);for(var ce=0;hd.mipmask>>ce;++ce){var de=be>>ce,Be=pe>>ce;if(!de||!Be)break;Cb.texImage2D(3553,ce,hd.format,de,Be,0,hd.format,hd.type,null)}sd();lb.profile&&
(hd.stats.size=L(hd.internalformat,hd.type,be,pe,!1,!1));return Wc};Wc._reglType="texture2d";Wc._texture=hd;lb.profile&&(Wc.stats=hd.stats);Wc.destroy=function(){hd.decRef()};return Wc},createCube:function(tc,Fc,Wc,hd,be,pe){function ce(Ue,oc,vc,Zc,ld,$c){var Oc,ad=de.texInfo;Bc.call(ad);for(Oc=0;6>Oc;++Oc)Be[Oc]=nc();if("number"===typeof Ue||!Ue)for(Ue=Ue|0||1,Oc=0;6>Oc;++Oc)Ib(Be[Oc],Ue,Ue);else if("object"===typeof Ue)if(oc)lc(Be[0],Ue),lc(Be[1],oc),lc(Be[2],vc),lc(Be[3],Zc),lc(Be[4],ld),lc(Be[5],
$c);else if(Rc(ad,Ue),Sb(de,Ue),"faces"in Ue)for(Ue=Ue.faces,Oc=0;6>Oc;++Oc)Ub(Be[Oc],de),lc(Be[Oc],Ue[Oc]);else for(Oc=0;6>Oc;++Oc)lc(Be[Oc],Ue);Ub(de,Be[0]);de.mipmask=ad.genMipmaps?(Be[0].width<<1)-1:Be[0].mipmask;de.internalformat=Be[0].internalformat;ce.width=Be[0].width;ce.height=Be[0].height;xd(de);for(Oc=0;6>Oc;++Oc)$b(Be[Oc],34069+Oc);pd(ad,34067);sd();lb.profile&&(de.stats.size=L(de.internalformat,de.type,ce.width,ce.height,ad.genMipmaps,!0));ce.format=ge[de.internalformat];ce.type=ff[de.type];
ce.mag=Vd[ad.magFilter];ce.min=Pd[ad.minFilter];ce.wrapS=Ed[ad.wrapS];ce.wrapT=Ed[ad.wrapT];for(Oc=0;6>Oc;++Oc)xc(Be[Oc]);return ce}var de=new Vc(34067);yf[de.id]=de;Tb.cubeCount++;var Be=Array(6);ce(tc,Fc,Wc,hd,be,pe);ce.subimage=function(Ue,oc,vc,Zc,ld){vc|=0;Zc|=0;ld|=0;var $c=Jb();Ub($c,de);$c.width=0;$c.height=0;Fb($c,oc);$c.width=$c.width||(de.width>>ld)-vc;$c.height=$c.height||(de.height>>ld)-Zc;xd(de);xb($c,34069+Ue,vc,Zc,ld);sd();tb($c);return ce};ce.resize=function(Ue){Ue|=0;if(Ue!==de.width){ce.width=
de.width=Ue;ce.height=de.height=Ue;xd(de);for(var oc=0;6>oc;++oc)for(var vc=0;de.mipmask>>vc;++vc)Cb.texImage2D(34069+oc,vc,de.format,Ue>>vc,Ue>>vc,0,de.format,de.type,null);sd();lb.profile&&(de.stats.size=L(de.internalformat,de.type,ce.width,ce.height,!1,!0));return ce}};ce._reglType="textureCube";ce._texture=de;lb.profile&&(ce.stats=de.stats);ce.destroy=function(){de.decRef()};return ce},clear:function(){for(var tc=0;tc<Lf;++tc)Cb.activeTexture(33984+tc),Cb.bindTexture(3553,null),Cf[tc]=null;Oa(yf).forEach(Yc);
Tb.cubeCount=0;Tb.textureCount=0},getTexture:function(tc){return null},restore:function(){for(var tc=0;tc<Lf;++tc){var Fc=Cf[tc];Fc&&(Fc.bindCount=0,Fc.unit=-1,Cf[tc]=null)}Oa(yf).forEach(function(Wc){Wc.texture=Cb.createTexture();Cb.bindTexture(Wc.target,Wc.texture);for(var hd=0;32>hd;++hd)if(0!==(Wc.mipmask&1<<hd))if(3553===Wc.target)Cb.texImage2D(3553,hd,Wc.internalformat,Wc.width>>hd,Wc.height>>hd,0,Wc.internalformat,Wc.type,null);else for(var be=0;6>be;++be)Cb.texImage2D(34069+be,hd,Wc.internalformat,
Wc.width>>hd,Wc.height>>hd,0,Wc.internalformat,Wc.type,null);pd(Wc.texInfo,Wc.target)})}}}function S(Cb,ic,sc,wb,zb,Tb){function lb(Vc,xd,sd){this.target=Vc;this.texture=xd;this.renderbuffer=sd;var Yc=Vc=0;xd?(Vc=xd.width,Yc=xd.height):sd&&(Vc=sd.width,Yc=sd.height);this.width=Vc;this.height=Yc}function vb(Vc){Vc&&(Vc.texture&&Vc.texture._texture.decRef(),Vc.renderbuffer&&Vc.renderbuffer._renderbuffer.decRef())}function Ub(Vc,xd,sd){Vc&&(Vc.texture?Vc.texture._texture.refCount+=1:Vc.renderbuffer._renderbuffer.refCount+=
1)}function Sb(Vc,xd){xd&&(xd.texture?Cb.framebufferTexture2D(36160,Vc,xd.target,xd.texture._texture.texture,0):Cb.framebufferRenderbuffer(36160,Vc,36161,xd.renderbuffer._renderbuffer.renderbuffer))}function Ab(Vc){var xd=3553,sd=null,Yc=null,Hc=Vc;"object"===typeof Vc&&(Hc=Vc.data,"target"in Vc&&(xd=Vc.target|0));Vc=Hc._reglType;"texture2d"===Vc?sd=Hc:"textureCube"===Vc?sd=Hc:"renderbuffer"===Vc&&(Yc=Hc,xd=36161);return new lb(xd,sd,Yc)}function Eb(Vc,xd,sd,Yc,Hc){if(sd)return Vc=wb.create2D({width:Vc,
height:xd,format:Yc,type:Hc}),Vc._texture.refCount=0,new lb(3553,Vc,null);Vc=zb.create({width:Vc,height:xd,format:Yc});Vc._renderbuffer.refCount=0;return new lb(36161,null,Vc)}function Fb(Vc){return Vc&&(Vc.texture||Vc.renderbuffer)}function xb(Vc,xd,sd){Vc&&(Vc.texture?Vc.texture.resize(xd,sd):Vc.renderbuffer&&Vc.renderbuffer.resize(xd,sd),Vc.width=xd,Vc.height=sd)}function Jb(){this.id=Rc++;pd[this.id]=this;this.framebuffer=Cb.createFramebuffer();this.height=this.width=0;this.colorAttachments=[];
this.depthStencilAttachment=this.stencilAttachment=this.depthAttachment=null}function tb(Vc){Vc.colorAttachments.forEach(vb);vb(Vc.depthAttachment);vb(Vc.stencilAttachment);vb(Vc.depthStencilAttachment)}function Lb(Vc){Cb.deleteFramebuffer(Vc.framebuffer);Vc.framebuffer=null;Tb.framebufferCount--;delete pd[Vc.id]}function Ib(Vc){var xd;Cb.bindFramebuffer(36160,Vc.framebuffer);var sd=Vc.colorAttachments;for(xd=0;xd<sd.length;++xd)Sb(36064+xd,sd[xd]);for(xd=sd.length;xd<sc.maxColorAttachments;++xd)Cb.framebufferTexture2D(36160,
36064+xd,3553,null,0);Cb.framebufferTexture2D(36160,33306,3553,null,0);Cb.framebufferTexture2D(36160,36096,3553,null,0);Cb.framebufferTexture2D(36160,36128,3553,null,0);Sb(36096,Vc.depthAttachment);Sb(36128,Vc.stencilAttachment);Sb(33306,Vc.depthStencilAttachment);Cb.checkFramebufferStatus(36160);Cb.isContextLost();Cb.bindFramebuffer(36160,$b.next?$b.next.framebuffer:null);$b.cur=$b.next;Cb.getError()}function lc(Vc,xd){function sd(Hc,Cd){var Kd=0,Ld=0,kb=!0,De=!0;var Hd=null;var oe=!0,Ge="rgba",
Fd="uint8",ge=1,ff=null,Vd=null,Pd=null,Ed=!1;if("number"===typeof Hc)Kd=Hc|0,Ld=Cd|0||Kd;else if(Hc){"shape"in Hc?(Ld=Hc.shape,Kd=Ld[0],Ld=Ld[1]):("radius"in Hc&&(Kd=Ld=Hc.radius),"width"in Hc&&(Kd=Hc.width),"height"in Hc&&(Ld=Hc.height));if("color"in Hc||"colors"in Hc)Hd=Hc.color||Hc.colors,Array.isArray(Hd);if(!Hd){"colorCount"in Hc&&(ge=Hc.colorCount|0);"colorTexture"in Hc&&(oe=!!Hc.colorTexture,Ge="rgba4");if("colorType"in Hc&&(Fd=Hc.colorType,!oe))if("half float"===Fd||"float16"===Fd)Ge="rgba16f";
else if("float"===Fd||"float32"===Fd)Ge="rgba32f";"colorFormat"in Hc&&(Ge=Hc.colorFormat,0<=nc.indexOf(Ge)?oe=!0:0<=xc.indexOf(Ge)&&(oe=!1))}if("depthTexture"in Hc||"depthStencilTexture"in Hc)Ed=!(!Hc.depthTexture&&!Hc.depthStencilTexture);"depth"in Hc&&("boolean"===typeof Hc.depth?kb=Hc.depth:(ff=Hc.depth,De=!1));"stencil"in Hc&&("boolean"===typeof Hc.stencil?De=Hc.stencil:(Vd=Hc.stencil,kb=!1));"depthStencil"in Hc&&("boolean"===typeof Hc.depthStencil?kb=De=Hc.depthStencil:(Pd=Hc.depthStencil,De=
kb=!1))}else Kd=Ld=1;var ke=Cd=null,Xd=null;if(Array.isArray(Hd))Hc=Hd.map(Ab);else if(Hd)Hc=[Ab(Hd)];else for(Hc=Array(ge),Hd=0;Hd<ge;++Hd)Hc[Hd]=Eb(Kd,Ld,oe,Ge,Fd);Kd=Kd||Hc[0].width;Ld=Ld||Hc[0].height;ff?Cd=Ab(ff):kb&&!De&&(Cd=Eb(Kd,Ld,Ed,"depth","uint32"));Vd?ke=Ab(Vd):De&&!kb&&(ke=Eb(Kd,Ld,!1,"stencil","uint8"));Pd?Xd=Ab(Pd):!ff&&!Vd&&De&&kb&&(Xd=Eb(Kd,Ld,Ed,"depth stencil","depth stencil"));kb=null;for(Hd=0;Hd<Hc.length;++Hd)Ub(Hc[Hd],Kd,Ld),Hc[Hd]&&Hc[Hd].texture&&(De=Kb[Hc[Hd].texture._texture.format]*
Ob[Hc[Hd].texture._texture.type],null===kb&&(kb=De));Ub(Cd,Kd,Ld);Ub(ke,Kd,Ld);Ub(Xd,Kd,Ld);tb(Yc);Yc.width=Kd;Yc.height=Ld;Yc.colorAttachments=Hc;Yc.depthAttachment=Cd;Yc.stencilAttachment=ke;Yc.depthStencilAttachment=Xd;sd.color=Hc.map(Fb);sd.depth=Fb(Cd);sd.stencil=Fb(ke);sd.depthStencil=Fb(Xd);sd.width=Yc.width;sd.height=Yc.height;Ib(Yc);return sd}var Yc=new Jb;Tb.framebufferCount++;sd(Vc,xd);return pa(sd,{resize:function(Hc,Cd){Hc=Math.max(Hc|0,1);Cd=Math.max(Cd|0||Hc,1);if(Hc===Yc.width&&Cd===
Yc.height)return sd;for(var Kd=Yc.colorAttachments,Ld=0;Ld<Kd.length;++Ld)xb(Kd[Ld],Hc,Cd);xb(Yc.depthAttachment,Hc,Cd);xb(Yc.stencilAttachment,Hc,Cd);xb(Yc.depthStencilAttachment,Hc,Cd);Yc.width=sd.width=Hc;Yc.height=sd.height=Cd;Ib(Yc);return sd},_reglType:"framebuffer",_framebuffer:Yc,destroy:function(){Lb(Yc);tb(Yc)},use:function(Hc){$b.setFBO({framebuffer:sd},Hc)}})}var $b={cur:null,next:null,dirty:!1,setFBO:null},nc=["rgba"],xc=["rgba4","rgb565","rgb5 a1"];ic.ext_srgb&&xc.push("srgba");ic.ext_color_buffer_half_float&&
xc.push("rgba16f","rgb16f");ic.webgl_color_buffer_float&&xc.push("rgba32f");var Bc=["uint8"];ic.oes_texture_half_float&&Bc.push("half float","float16");ic.oes_texture_float&&Bc.push("float","float32");var Rc=0,pd={};return pa($b,{getFramebuffer:function(Vc){return"function"===typeof Vc&&"framebuffer"===Vc._reglType&&(Vc=Vc._framebuffer,Vc instanceof Jb)?Vc:null},create:lc,createCube:function(Vc){function xd(Yc){var Hc={color:null},Cd=0,Kd=null;var Ld="rgba";var kb="uint8",De=1;if("number"===typeof Yc)Cd=
Yc|0;else if(Yc){"shape"in Yc?Cd=Yc.shape[0]:("radius"in Yc&&(Cd=Yc.radius|0),"width"in Yc?Cd=Yc.width|0:"height"in Yc&&(Cd=Yc.height|0));if("color"in Yc||"colors"in Yc)Kd=Yc.color||Yc.colors,Array.isArray(Kd);Kd||("colorCount"in Yc&&(De=Yc.colorCount|0),"colorType"in Yc&&(kb=Yc.colorType),"colorFormat"in Yc&&(Ld=Yc.colorFormat));"depth"in Yc&&(Hc.depth=Yc.depth);"stencil"in Yc&&(Hc.stencil=Yc.stencil);"depthStencil"in Yc&&(Hc.depthStencil=Yc.depthStencil)}else Cd=1;if(Kd)if(Array.isArray(Kd))for(Yc=
[],Ld=0;Ld<Kd.length;++Ld)Yc[Ld]=Kd[Ld];else Yc=[Kd];else for(Yc=Array(De),Kd={radius:Cd,format:Ld,type:kb},Ld=0;Ld<De;++Ld)Yc[Ld]=wb.createCube(Kd);Hc.color=Array(Yc.length);for(Ld=0;Ld<Yc.length;++Ld)De=Yc[Ld],Cd=Cd||De.width,Hc.color[Ld]={target:34069,data:Yc[Ld]};for(Ld=0;6>Ld;++Ld){for(De=0;De<Yc.length;++De)Hc.color[De].target=34069+Ld;0<Ld&&(Hc.depth=sd[0].depth,Hc.stencil=sd[0].stencil,Hc.depthStencil=sd[0].depthStencil);if(sd[Ld])sd[Ld](Hc);else sd[Ld]=lc(Hc)}return pa(xd,{width:Cd,height:Cd,
color:Yc})}var sd=Array(6);xd(Vc);return pa(xd,{faces:sd,resize:function(Yc){var Hc=Yc|0;if(Hc===xd.width)return xd;var Cd=xd.color;for(Yc=0;Yc<Cd.length;++Yc)Cd[Yc].resize(Hc);for(Yc=0;6>Yc;++Yc)sd[Yc].resize(Hc);xd.width=xd.height=Hc;return xd},_reglType:"framebufferCube",destroy:function(){sd.forEach(function(Yc){Yc.destroy()})}})},clear:function(){Oa(pd).forEach(Lb)},restore:function(){$b.cur=null;$b.next=null;$b.dirty=!0;Oa(pd).forEach(function(Vc){Vc.framebuffer=Cb.createFramebuffer();Ib(Vc)})}})}
function R(){this.w=this.z=this.y=this.x=this.state=0;this.buffer=null;this.size=0;this.normalized=!1;this.type=5126;this.divisor=this.stride=this.offset=0}function O(Cb,ic,sc,wb,zb){function Tb(tb){if(tb!==Jb.currentVAO){var Lb=ic.oes_vertex_array_object;tb?Lb.bindVertexArrayOES(tb.vao):Lb.bindVertexArrayOES(null);Jb.currentVAO=tb}}function lb(tb){if(tb!==Jb.currentVAO){if(tb)tb.bindAttrs();else for(var Lb=ic.angle_instanced_arrays,Ib=0;Ib<Eb.length;++Ib){var lc=Eb[Ib];lc.buffer?(Cb.enableVertexAttribArray(Ib),
Cb.vertexAttribPointer(Ib,lc.size,lc.type,lc.normalized,lc.stride,lc.offfset),Lb&&Lb.vertexAttribDivisorANGLE(Ib,lc.divisor)):(Cb.disableVertexAttribArray(Ib),Cb.vertexAttrib4f(Ib,lc.x,lc.y,lc.z,lc.w))}Jb.currentVAO=tb}}function vb(){Oa(xb).forEach(function(tb){tb.destroy()})}function Ub(){this.id=++Fb;this.attributes=[];var tb=ic.oes_vertex_array_object;this.vao=tb?tb.createVertexArrayOES():null;xb[this.id]=this;this.buffers=[]}function Sb(){ic.oes_vertex_array_object&&Oa(xb).forEach(function(tb){tb.refresh()})}
var Ab=sc.maxAttributes,Eb=Array(Ab);for(sc=0;sc<Ab;++sc)Eb[sc]=new R;var Fb=0,xb={},Jb={Record:R,scope:{},state:Eb,currentVAO:null,targetVAO:null,restore:ic.oes_vertex_array_object?Sb:function(){},createVAO:function(tb){function Lb(lc){for(var $b=0;$b<Ib.buffers.length;++$b)Ib.buffers[$b].destroy();Ib.buffers.length=0;$b=Ib.attributes;$b.length=lc.length;for(var nc=0;nc<lc.length;++nc){var xc=lc[nc],Bc=$b[nc]=new R;Array.isArray(xc)||Ma(xc)||r(xc)?(xc=zb.create(xc,34962,!1,!0),Bc.buffer=zb.getBuffer(xc),
Bc.size=Bc.buffer.dimension|0,Bc.normalized=!1,Bc.type=Bc.buffer.dtype,Bc.offset=0,Bc.stride=0,Bc.divisor=0,Bc.state=1,Ib.buffers.push(xc)):zb.getBuffer(xc)?(Bc.buffer=zb.getBuffer(xc),Bc.size=Bc.buffer.dimension|0,Bc.normalized=!1,Bc.type=Bc.buffer.dtype,Bc.offset=0,Bc.stride=0,Bc.divisor=0,Bc.state=1):zb.getBuffer(xc.buffer)?(Bc.buffer=zb.getBuffer(xc.buffer),Bc.size=(+xc.size||Bc.buffer.dimension)|0,Bc.normalized=!!xc.normalized||!1,Bc.type="type"in xc?Fa[xc.type]:Bc.buffer.dtype,Bc.offset=(xc.offset||
0)|0,Bc.stride=(xc.stride||0)|0,Bc.divisor=(xc.divisor||0)|0,Bc.state=1):"x"in xc&&(Bc.x=+xc.x||0,Bc.y=+xc.y||0,Bc.z=+xc.z||0,Bc.w=+xc.w||0,Bc.state=2)}Ib.refresh();return Lb}var Ib=new Ub;wb.vaoCount+=1;Lb.destroy=function(){Ib.destroy()};Lb._vao=Ib;Lb._reglType="vao";return Lb(tb)},getVAO:function(tb){return"function"===typeof tb&&tb._vao?tb._vao:null},destroyBuffer:function(tb){for(var Lb=0;Lb<Eb.length;++Lb){var Ib=Eb[Lb];Ib.buffer===tb&&(Cb.disableVertexAttribArray(Lb),Ib.buffer=null)}},setVAO:ic.oes_vertex_array_object?
Tb:lb,clear:ic.oes_vertex_array_object?vb:function(){}};Ub.prototype.bindAttrs=function(){for(var tb=ic.angle_instanced_arrays,Lb=this.attributes,Ib=0;Ib<Lb.length;++Ib){var lc=Lb[Ib];lc.buffer?(Cb.enableVertexAttribArray(Ib),Cb.bindBuffer(34962,lc.buffer.buffer),Cb.vertexAttribPointer(Ib,lc.size,lc.type,lc.normalized,lc.stride,lc.offset),tb&&tb.vertexAttribDivisorANGLE(Ib,lc.divisor)):(Cb.disableVertexAttribArray(Ib),Cb.vertexAttrib4f(Ib,lc.x,lc.y,lc.z,lc.w))}for(tb=Lb.length;tb<Ab;++tb)Cb.disableVertexAttribArray(tb)};
Ub.prototype.refresh=function(){var tb=ic.oes_vertex_array_object;tb&&(tb.bindVertexArrayOES(this.vao),this.bindAttrs(),Jb.currentVAO=this)};Ub.prototype.destroy=function(){if(this.vao){var tb=ic.oes_vertex_array_object;this===Jb.currentVAO&&(Jb.currentVAO=null,tb.bindVertexArrayOES(null));tb.deleteVertexArrayOES(this.vao);this.vao=null}xb[this.id]&&(delete xb[this.id],--wb.vaoCount)};return Jb}function T(Cb,ic,sc,wb){function zb(Jb,tb,Lb,Ib){this.name=Jb;this.id=tb;this.location=Lb;this.info=Ib}
function Tb(Jb,tb){for(var Lb=0;Lb<Jb.length;++Lb)if(Jb[Lb].id===tb.id){Jb[Lb].location=tb.location;return}Jb.push(tb)}function lb(Jb,tb,Lb){Lb=35632===Jb?Sb:Ab;var Ib=Lb[tb];if(!Ib){var lc=ic.str(tb);Ib=Cb.createShader(Jb);Cb.shaderSource(Ib,lc);Cb.compileShader(Ib);Lb[tb]=Ib}return Ib}function vb(Jb,tb){this.id=xb++;this.fragId=Jb;this.vertId=tb;this.program=null;this.uniforms=[];this.attributes=[];wb.profile&&(this.stats={uniformsCount:0,attributesCount:0})}function Ub(Jb,tb,Lb){var Ib=lb(35632,
Jb.fragId);var lc=lb(35633,Jb.vertId);tb=Jb.program=Cb.createProgram();Cb.attachShader(tb,Ib);Cb.attachShader(tb,lc);if(Lb)for(Ib=0;Ib<Lb.length;++Ib)lc=Lb[Ib],Cb.bindAttribLocation(tb,lc[0],lc[1]);Cb.linkProgram(tb);lc=Cb.getProgramParameter(tb,35718);wb.profile&&(Jb.stats.uniformsCount=lc);var $b=Jb.uniforms;for(Ib=0;Ib<lc;++Ib)if(Lb=Cb.getActiveUniform(tb,Ib))if(1<Lb.size)for(var nc=0;nc<Lb.size;++nc){var xc=Lb.name.replace("[0]","["+nc+"]");Tb($b,new zb(xc,ic.id(xc),Cb.getUniformLocation(tb,xc),
Lb))}else Tb($b,new zb(Lb.name,ic.id(Lb.name),Cb.getUniformLocation(tb,Lb.name),Lb));lc=Cb.getProgramParameter(tb,35721);wb.profile&&(Jb.stats.attributesCount=lc);Jb=Jb.attributes;for(Ib=0;Ib<lc;++Ib)(Lb=Cb.getActiveAttrib(tb,Ib))&&Tb(Jb,new zb(Lb.name,ic.id(Lb.name),Cb.getAttribLocation(tb,Lb.name),Lb))}var Sb={},Ab={},Eb={},Fb=[],xb=0;wb.profile&&(sc.getMaxUniformsCount=function(){var Jb=0;Fb.forEach(function(tb){tb.stats.uniformsCount>Jb&&(Jb=tb.stats.uniformsCount)});return Jb},sc.getMaxAttributesCount=
function(){var Jb=0;Fb.forEach(function(tb){tb.stats.attributesCount>Jb&&(Jb=tb.stats.attributesCount)});return Jb});return{clear:function(){var Jb=Cb.deleteShader.bind(Cb);Oa(Sb).forEach(Jb);Sb={};Oa(Ab).forEach(Jb);Ab={};Fb.forEach(function(tb){Cb.deleteProgram(tb.program)});Fb.length=0;Eb={};sc.shaderCount=0},program:function(Jb,tb,Lb,Ib){var lc=Eb[tb];lc||(lc=Eb[tb]={});var $b=lc[Jb];if($b&&!Ib)return $b;tb=new vb(tb,Jb);sc.shaderCount++;Ub(tb,Lb,Ib);$b||(lc[Jb]=tb);Fb.push(tb);return tb},restore:function(){Sb=
{};Ab={};for(var Jb=0;Jb<Fb.length;++Jb)Ub(Fb[Jb],null,Fb[Jb].attributes.map(function(tb){return[tb.location,tb.name]}))},shader:lb,frag:-1,vert:-1}}function V(Cb,ic,sc,wb,zb,Tb,lb){function vb(Sb){var Ab=null===ic.next?5121:ic.next.colorAttachments[0].texture._texture.type;var Eb=0,Fb=0,xb=wb.framebufferWidth,Jb=wb.framebufferHeight,tb=null;Ma(Sb)?tb=Sb:Sb&&(Eb=Sb.x|0,Fb=Sb.y|0,xb=(Sb.width||wb.framebufferWidth-Eb)|0,Jb=(Sb.height||wb.framebufferHeight-Fb)|0,tb=Sb.data||null);sc();Sb=xb*Jb*4;tb||
(5121===Ab?tb=new Uint8Array(Sb):5126===Ab&&(tb=tb||new Float32Array(Sb)));Cb.pixelStorei(3333,4);Cb.readPixels(Eb,Fb,xb,Jb,6408,Ab,tb);return tb}function Ub(Sb){var Ab;ic.setFBO({framebuffer:Sb.framebuffer},function(){Ab=vb(Sb)});return Ab}return function(Sb){return Sb&&"framebuffer"in Sb?Ub(Sb):vb(Sb)}}function X(Cb){return Array.prototype.slice.call(Cb)}function ba(Cb){return X(Cb).join("")}function aa(){function Cb(){var vb=[],Ub=[];return pa(function(){vb.push.apply(vb,X(arguments))},{def:function(){var Sb=
"v"+sc++;Ub.push(Sb);0<arguments.length&&(vb.push(Sb,"\x3d"),vb.push.apply(vb,X(arguments)),vb.push(";"));return Sb},toString:function(){return ba([0<Ub.length?"var "+Ub.join(",")+";":"",ba(vb)])}})}function ic(){function vb(Fb,xb){Sb(Fb,xb,"\x3d",Ub.def(Fb,xb),";")}var Ub=Cb(),Sb=Cb(),Ab=Ub.toString,Eb=Sb.toString;return pa(function(){Ub.apply(Ub,X(arguments))},{def:Ub.def,entry:Ub,exit:Sb,save:vb,set:function(Fb,xb,Jb){vb(Fb,xb);Ub(Fb,xb,"\x3d",Jb,";")},toString:function(){return Ab()+Eb()}})}var sc=
0,wb=[],zb=[],Tb=Cb(),lb={};return{global:Tb,link:function(vb){for(var Ub=0;Ub<zb.length;++Ub)if(zb[Ub]===vb)return wb[Ub];Ub="g"+sc++;wb.push(Ub);zb.push(vb);return Ub},block:Cb,proc:function(vb,Ub){function Sb(){var xb="a"+Ab.length;Ab.push(xb);return xb}var Ab=[];Ub=Ub||0;for(var Eb=0;Eb<Ub;++Eb)Sb();Eb=ic();var Fb=Eb.toString;return lb[vb]=pa(Eb,{arg:Sb,toString:function(){return ba(["function(",Ab.join(),"){",Fb(),"}"])}})},scope:ic,cond:function(){var vb=ba(arguments),Ub=ic(),Sb=ic(),Ab=Ub.toString,
Eb=Sb.toString;return pa(Ub,{then:function(){Ub.apply(Ub,X(arguments));return this},"else":function(){Sb.apply(Sb,X(arguments));return this},toString:function(){var Fb=Eb();Fb&&(Fb="else{"+Fb+"}");return ba(["if(",vb,"){",Ab(),"}",Fb])}})},compile:function(){var vb=['"use strict";',Tb,"return {"];Object.keys(lb).forEach(function(Sb){vb.push('"',Sb,'":',lb[Sb].toString(),",")});vb.push("}");var Ub=ba(vb).replace(/;/g,";\n").replace(/}/g,"}\n").replace(/{/g,"{\n");return Function.apply(null,wb.concat(Ub)).apply(null,
zb)}}}function ka(Cb){return Array.isArray(Cb)||Ma(Cb)||r(Cb)}function ha(Cb){return Cb.sort(function(ic,sc){return"viewport"===ic?-1:"viewport"===sc?1:ic<sc?-1:1})}function ca(Cb,ic,sc,wb){this.thisDep=Cb;this.contextDep=ic;this.propDep=sc;this.append=wb}function sa(Cb){return Cb&&!(Cb.thisDep||Cb.contextDep||Cb.propDep)}function ma(Cb){return new ca(!1,!1,!1,Cb)}function ra(Cb,ic){var sc=Cb.type;return 0===sc?(sc=Cb.data.length,new ca(!0,1<=sc,2<=sc,ic)):4===sc?(sc=Cb.data,new ca(sc.thisDep,sc.contextDep,
sc.propDep,ic)):new ca(3===sc,2===sc,1===sc,ic)}function qa(Cb,ic,sc,wb,zb,Tb,lb,vb,Ub,Sb,Ab,Eb,Fb,xb,Jb){function tb(oc){return oc.replace(".","_")}function Lb(oc,vc,Zc){var ld=tb(oc);be.push(oc);hd[ld]=Wc[ld]=!!Zc;pe[ld]=vc}function Ib(oc,vc,Zc){var ld=tb(oc);be.push(oc);Array.isArray(Zc)?(Wc[ld]=Zc.slice(),hd[ld]=Zc.slice()):Wc[ld]=hd[ld]=Zc;ce[ld]=vc}function lc(){var oc=aa(),vc=oc.link,Zc=oc.global;oc.id=Ue++;oc.batchId="0";var ld=vc(de),$c=oc.shared={props:"a0"};Object.keys(de).forEach(function(Dc){$c[Dc]=
Zc.def(ld,".",Dc)});var Oc=oc.next={},ad=oc.current={};Object.keys(ce).forEach(function(Dc){Array.isArray(Wc[Dc])&&(Oc[Dc]=Zc.def($c.next,".",Dc),ad[Dc]=Zc.def($c.current,".",Dc))});var Jc=oc.constants={};Object.keys(Be).forEach(function(Dc){Jc[Dc]=Zc.def(JSON.stringify(Be[Dc]))});oc.invoke=function(Dc,Gc){switch(Gc.type){case 0:var ud=["this",$c.context,$c.props,oc.batchId];return Dc.def(vc(Gc.data),".call(",ud.slice(0,Math.max(Gc.data.length+1,4)),")");case 1:return Dc.def($c.props,Gc.data);case 2:return Dc.def($c.context,
Gc.data);case 3:return Dc.def("this",Gc.data);case 4:return Gc.data.append(oc,Dc),Gc.data.ref}};oc.attribCache={};var zc={};oc.scopeAttrib=function(Dc){Dc=ic.id(Dc);if(Dc in zc)return zc[Dc];var Gc=Sb.scope[Dc];Gc||(Gc=Sb.scope[Dc]=new Lf);return zc[Dc]=vc(Gc)};return oc}function $b(oc){var vc=oc["static"];oc=oc.dynamic;if("profile"in vc){var Zc=!!vc.profile;var ld=ma(function(Oc,ad){return Zc});ld.enable=Zc}else if("profile"in oc){var $c=oc.profile;ld=ra($c,function(Oc,ad){return Oc.invoke(ad,$c)})}return ld}
function nc(oc,vc){vc=oc["static"];oc=oc.dynamic;if("framebuffer"in vc){var Zc=vc.framebuffer;return Zc?(Zc=vb.getFramebuffer(Zc),ma(function($c,Oc){var ad=$c.link(Zc);$c=$c.shared;Oc.set($c.framebuffer,".next",ad);$c=$c.context;Oc.set($c,".framebufferWidth",ad+".width");Oc.set($c,".framebufferHeight",ad+".height");return ad})):ma(function($c,Oc){$c=$c.shared;Oc.set($c.framebuffer,".next","null");$c=$c.context;Oc.set($c,".framebufferWidth",$c+".drawingBufferWidth");Oc.set($c,".framebufferHeight",
$c+".drawingBufferHeight");return"null"})}if("framebuffer"in oc){var ld=oc.framebuffer;return ra(ld,function($c,Oc){var ad=$c.invoke(Oc,ld);$c=$c.shared;var Jc=$c.framebuffer;ad=Oc.def(Jc,".getFramebuffer(",ad,")");Oc.set(Jc,".next",ad);$c=$c.context;Oc.set($c,".framebufferWidth",ad+"?"+ad+".width:"+$c+".drawingBufferWidth");Oc.set($c,".framebufferHeight",ad+"?"+ad+".height:"+$c+".drawingBufferHeight");return ad})}return null}function xc(oc,vc,Zc){function ld(Jc){if(Jc in $c){var zc=$c[Jc];Jc=!0;
var Dc=zc.x|0,Gc=zc.y|0,ud,Od;"width"in zc?ud=zc.width|0:Jc=!1;"height"in zc?Od=zc.height|0:Jc=!1;return new ca(!Jc&&vc&&vc.thisDep,!Jc&&vc&&vc.contextDep,!Jc&&vc&&vc.propDep,function($d,zd){$d=$d.shared.context;var Le=ud;"width"in zc||(Le=zd.def($d,".","framebufferWidth","-",Dc));var Xe=Od;"height"in zc||(Xe=zd.def($d,".","framebufferHeight","-",Gc));return[Dc,Gc,Le,Xe]})}if(Jc in Oc){var Gd=Oc[Jc];Jc=ra(Gd,function($d,zd){var Le=$d.invoke(zd,Gd);$d=$d.shared.context;var Xe=zd.def(Le,".x|0"),gf=
zd.def(Le,".y|0"),Me=zd.def('"width" in ',Le,"?",Le,".width|0:","(",$d,".","framebufferWidth","-",Xe,")");Le=zd.def('"height" in ',Le,"?",Le,".height|0:","(",$d,".","framebufferHeight","-",gf,")");return[Xe,gf,Me,Le]});vc&&(Jc.thisDep=Jc.thisDep||vc.thisDep,Jc.contextDep=Jc.contextDep||vc.contextDep,Jc.propDep=Jc.propDep||vc.propDep);return Jc}return vc?new ca(vc.thisDep,vc.contextDep,vc.propDep,function($d,zd){$d=$d.shared.context;return[0,0,zd.def($d,".","framebufferWidth"),zd.def($d,".","framebufferHeight")]}):
null}var $c=oc["static"],Oc=oc.dynamic;if(oc=ld("viewport")){var ad=oc;oc=new ca(oc.thisDep,oc.contextDep,oc.propDep,function(Jc,zc){var Dc=ad.append(Jc,zc);Jc=Jc.shared.context;zc.set(Jc,".viewportWidth",Dc[2]);zc.set(Jc,".viewportHeight",Dc[3]);return Dc})}return{viewport:oc,scissor_box:ld("scissor.box")}}function Bc(oc,vc){oc=oc["static"];if("string"===typeof oc.frag&&"string"===typeof oc.vert){if(0<Object.keys(vc.dynamic).length)return null;oc=vc["static"];vc=Object.keys(oc);if(0<vc.length&&"number"===
typeof oc[vc[0]]){for(var Zc=[],ld=0;ld<vc.length;++ld)Zc.push([oc[vc[ld]]|0,vc[ld]]);return Zc}}return null}function Rc(oc,vc,Zc){function ld(Dc){if(Dc in $c){var Gc=ic.id($c[Dc]);Dc=ma(function(){return Gc});Dc.id=Gc;return Dc}if(Dc in Oc){var ud=Oc[Dc];return ra(ud,function(Od,Gd){var $d=Od.invoke(Gd,ud);return Gd.def(Od.shared.strings,".id(",$d,")")})}return null}var $c=oc["static"],Oc=oc.dynamic,ad=ld("frag"),Jc=ld("vert"),zc=null;sa(ad)&&sa(Jc)?(zc=Ab.program(Jc.id,ad.id,null,Zc),oc=ma(function(Dc,
Gc){return Dc.link(zc)})):oc=new ca(ad&&ad.thisDep||Jc&&Jc.thisDep,ad&&ad.contextDep||Jc&&Jc.contextDep,ad&&ad.propDep||Jc&&Jc.propDep,function(Dc,Gc){var ud=Dc.shared.shader;var Od=ad?ad.append(Dc,Gc):Gc.def(ud,".","frag");Dc=Jc?Jc.append(Dc,Gc):Gc.def(ud,".","vert");return Gc.def(ud+".program("+Dc+","+Od+")")});return{frag:ad,vert:Jc,progVar:oc,program:zc}}function pd(oc,vc){function Zc(Jc,zc){if(Jc in ld){var Dc=ld[Jc]|0;return ma(function(ud,Od){zc&&(ud.OFFSET=Dc);return Dc})}if(Jc in $c){var Gc=
$c[Jc];return ra(Gc,function(ud,Od){Od=ud.invoke(Od,Gc);zc&&(ud.OFFSET=Od);return Od})}return zc&&Oc?ma(function(ud,Od){ud.OFFSET="0";return 0}):null}var ld=oc["static"],$c=oc.dynamic,Oc=function(){if("elements"in ld){var Jc=ld.elements;ka(Jc)?Jc=Tb.getElements(Tb.create(Jc,!0)):Jc&&(Jc=Tb.getElements(Jc));var zc=ma(function(Gc,ud){return Jc?(ud=Gc.link(Jc),Gc.ELEMENTS=ud):Gc.ELEMENTS=null});zc.value=Jc;return zc}if("elements"in $c){var Dc=$c.elements;return ra(Dc,function(Gc,ud){var Od=Gc.shared,
Gd=Od.isBufferArgs;Od=Od.elements;var $d=Gc.invoke(ud,Dc),zd=ud.def("null");Gd=ud.def(Gd,"(",$d,")");$d=Gc.cond(Gd).then(zd,"\x3d",Od,".createStream(",$d,");")["else"](zd,"\x3d",Od,".getElements(",$d,");");ud.entry($d);ud.exit(Gc.cond(Gd).then(Od,".destroyStream(",zd,");"));return Gc.ELEMENTS=zd})}return null}(),ad=Zc("offset",!0);return{elements:Oc,primitive:function(){if("primitive"in ld){var Jc=ld.primitive;return ma(function(Dc,Gc){return Ka[Jc]})}if("primitive"in $c){var zc=$c.primitive;return ra(zc,
function(Dc,Gc){var ud=Dc.constants.primTypes;Dc=Dc.invoke(Gc,zc);return Gc.def(ud,"[",Dc,"]")})}return Oc?sa(Oc)?Oc.value?ma(function(Dc,Gc){return Gc.def(Dc.ELEMENTS,".primType")}):ma(function(){return 4}):new ca(Oc.thisDep,Oc.contextDep,Oc.propDep,function(Dc,Gc){Dc=Dc.ELEMENTS;return Gc.def(Dc,"?",Dc,".primType:",4)}):null}(),count:function(){if("count"in ld){var Jc=ld.count|0;return ma(function(){return Jc})}if("count"in $c){var zc=$c.count;return ra(zc,function(Dc,Gc){return Dc.invoke(Gc,zc)})}return Oc?
sa(Oc)?Oc?ad?new ca(ad.thisDep,ad.contextDep,ad.propDep,function(Dc,Gc){return Gc.def(Dc.ELEMENTS,".vertCount-",Dc.OFFSET)}):ma(function(Dc,Gc){return Gc.def(Dc.ELEMENTS,".vertCount")}):ma(function(){return-1}):new ca(Oc.thisDep||ad.thisDep,Oc.contextDep||ad.contextDep,Oc.propDep||ad.propDep,function(Dc,Gc){var ud=Dc.ELEMENTS;return Dc.OFFSET?Gc.def(ud,"?",ud,".vertCount-",Dc.OFFSET,":-1"):Gc.def(ud,"?",ud,".vertCount:-1")}):null}(),instances:Zc("instances",!1),offset:ad}}function Vc(oc,vc){var Zc=
oc["static"],ld=oc.dynamic,$c={};be.forEach(function(Oc){function ad(zc,Dc){if(Oc in Zc){var Gc=zc(Zc[Oc]);$c[Jc]=ma(function(){return Gc})}else if(Oc in ld){var ud=ld[Oc];$c[Jc]=ra(ud,function(Od,Gd){return Dc(Od,Gd,Od.invoke(Gd,ud))})}}var Jc=tb(Oc);switch(Oc){case "cull.enable":case "blend.enable":case "dither":case "stencil.enable":case "depth.enable":case "scissor.enable":case "polygonOffset.enable":case "sample.alpha":case "sample.enable":case "depth.mask":return ad(function(zc){return zc},
function(zc,Dc,Gc){return Gc});case "depth.func":return ad(function(zc){return Pc[zc]},function(zc,Dc,Gc){return Dc.def(zc.constants.compareFuncs,"[",Gc,"]")});case "depth.range":return ad(function(zc){return zc},function(zc,Dc,Gc){zc=Dc.def("+",Gc,"[0]");Dc=Dc.def("+",Gc,"[1]");return[zc,Dc]});case "blend.func":return ad(function(zc){return[qc["srcRGB"in zc?zc.srcRGB:zc.src],qc["dstRGB"in zc?zc.dstRGB:zc.dst],qc["srcAlpha"in zc?zc.srcAlpha:zc.src],qc["dstAlpha"in zc?zc.dstAlpha:zc.dst]]},function(zc,
Dc,Gc){function ud(zd,Le){return Dc.def('"',zd,Le,'" in ',Gc,"?",Gc,".",zd,Le,":",Gc,".",zd)}zc=zc.constants.blendFuncs;var Od=ud("src","RGB"),Gd=ud("dst","RGB");Od=Dc.def(zc,"[",Od,"]");var $d=Dc.def(zc,"[",ud("src","Alpha"),"]");Gd=Dc.def(zc,"[",Gd,"]");zc=Dc.def(zc,"[",ud("dst","Alpha"),"]");return[Od,Gd,$d,zc]});case "blend.equation":return ad(function(zc){if("string"===typeof zc)return[Cf[zc],Cf[zc]];if("object"===typeof zc)return[Cf[zc.rgb],Cf[zc.alpha]]},function(zc,Dc,Gc){var ud=zc.constants.blendEquations,
Od=Dc.def(),Gd=Dc.def();zc=zc.cond("typeof ",Gc,'\x3d\x3d\x3d"string"');zc.then(Od,"\x3d",Gd,"\x3d",ud,"[",Gc,"];");zc["else"](Od,"\x3d",ud,"[",Gc,".rgb];",Gd,"\x3d",ud,"[",Gc,".alpha];");Dc(zc);return[Od,Gd]});case "blend.color":return ad(function(zc){return g(4,function(Dc){return+zc[Dc]})},function(zc,Dc,Gc){return g(4,function(ud){return Dc.def("+",Gc,"[",ud,"]")})});case "stencil.mask":return ad(function(zc){return zc|0},function(zc,Dc,Gc){return Dc.def(Gc,"|0")});case "stencil.func":return ad(function(zc){return[Pc[zc.cmp||
"keep"],zc.ref||0,"mask"in zc?zc.mask:-1]},function(zc,Dc,Gc){zc=Dc.def('"cmp" in ',Gc,"?",zc.constants.compareFuncs,"[",Gc,".cmp]",":",7680);var ud=Dc.def(Gc,".ref|0");Dc=Dc.def('"mask" in ',Gc,"?",Gc,".mask|0:-1");return[zc,ud,Dc]});case "stencil.opFront":case "stencil.opBack":return ad(function(zc){return["stencil.opBack"===Oc?1029:1028,Qc[zc.fail||"keep"],Qc[zc.zfail||"keep"],Qc[zc.zpass||"keep"]]},function(zc,Dc,Gc){function ud(Gd){return Dc.def('"',Gd,'" in ',Gc,"?",Od,"[",Gc,".",Gd,"]:",7680)}
var Od=zc.constants.stencilOps;return["stencil.opBack"===Oc?1029:1028,ud("fail"),ud("zfail"),ud("zpass")]});case "polygonOffset.offset":return ad(function(zc){return[zc.factor|0,zc.units|0]},function(zc,Dc,Gc){zc=Dc.def(Gc,".factor|0");Dc=Dc.def(Gc,".units|0");return[zc,Dc]});case "cull.face":return ad(function(zc){var Dc=0;"front"===zc?Dc=1028:"back"===zc&&(Dc=1029);return Dc},function(zc,Dc,Gc){return Dc.def(Gc,'\x3d\x3d\x3d"front"?',1028,":",1029)});case "lineWidth":return ad(function(zc){return zc},
function(zc,Dc,Gc){return Gc});case "frontFace":return ad(function(zc){return cd[zc]},function(zc,Dc,Gc){return Dc.def(Gc+'\x3d\x3d\x3d"cw"?2304:2305')});case "colorMask":return ad(function(zc){return zc.map(function(Dc){return!!Dc})},function(zc,Dc,Gc){return g(4,function(ud){return"!!"+Gc+"["+ud+"]"})});case "sample.coverage":return ad(function(zc){return["value"in zc?zc.value:1,!!zc.invert]},function(zc,Dc,Gc){zc=Dc.def('"value" in ',Gc,"?+",Gc,".value:1");Dc=Dc.def("!!",Gc,".invert");return[zc,
Dc]})}});return $c}function xd(oc,vc){var Zc=oc["static"],ld=oc.dynamic,$c={};Object.keys(Zc).forEach(function(Oc){var ad=Zc[Oc];if("number"===typeof ad||"boolean"===typeof ad)var Jc=ma(function(){return ad});else if("function"===typeof ad){var zc=ad._reglType;if("texture2d"===zc||"textureCube"===zc)Jc=ma(function(Dc){return Dc.link(ad)});else if("framebuffer"===zc||"framebufferCube"===zc)Jc=ma(function(Dc){return Dc.link(ad.color[0])})}else u(ad)&&(Jc=ma(function(Dc){return Dc.global.def("[",g(ad.length,
function(Gc){return ad[Gc]}),"]")}));Jc.value=ad;$c[Oc]=Jc});Object.keys(ld).forEach(function(Oc){var ad=ld[Oc];$c[Oc]=ra(ad,function(Jc,zc){return Jc.invoke(zc,ad)})});return $c}function sd(oc,vc){var Zc=oc["static"],ld=oc.dynamic,$c={};Object.keys(Zc).forEach(function(Oc){var ad=Zc[Oc],Jc=ic.id(Oc),zc=new Lf;if(ka(ad))zc.state=1,zc.buffer=zb.getBuffer(zb.create(ad,34962,!1,!0)),zc.type=0;else{var Dc=zb.getBuffer(ad);if(Dc)zc.state=1,zc.buffer=Dc,zc.type=0;else if("constant"in ad){var Gc=ad.constant;
zc.buffer="null";zc.state=2;"number"===typeof Gc?zc.x=Gc:cc.forEach(function(Le,Xe){Xe<Gc.length&&(zc[Le]=Gc[Xe])})}else{Dc=ka(ad.buffer)?zb.getBuffer(zb.create(ad.buffer,34962,!1,!0)):zb.getBuffer(ad.buffer);var ud=ad.offset|0,Od=ad.stride|0,Gd=ad.size|0,$d=!!ad.normalized,zd=0;"type"in ad&&(zd=Fa[ad.type]);ad=ad.divisor|0;zc.buffer=Dc;zc.state=1;zc.size=Gd;zc.normalized=$d;zc.type=zd||Dc.dtype;zc.offset=ud;zc.stride=Od;zc.divisor=ad}}$c[Oc]=ma(function(Le,Xe){Xe=Le.attribCache;if(Jc in Xe)return Xe[Jc];
var gf={isStream:!1};Object.keys(zc).forEach(function(Me){gf[Me]=zc[Me]});zc.buffer&&(gf.buffer=Le.link(zc.buffer),gf.type=gf.type||gf.buffer+".dtype");return Xe[Jc]=gf})});Object.keys(ld).forEach(function(Oc){var ad=ld[Oc];$c[Oc]=ra(ad,function(Jc,zc){function Dc(Xe){zc(Gd[Xe],"\x3d",Gc,".",Xe,"|0;")}var Gc=Jc.invoke(zc,ad),ud=Jc.shared;Jc=Jc.constants;var Od=ud.isBufferArgs;ud=ud.buffer;var Gd={isStream:zc.def(!1)},$d=new Lf;$d.state=1;Object.keys($d).forEach(function(Xe){Gd[Xe]=zc.def(""+$d[Xe])});
var zd=Gd.buffer,Le=Gd.type;zc("if(",Od,"(",Gc,")){",Gd.isStream,"\x3dtrue;",zd,"\x3d",ud,".createStream(",34962,",",Gc,");",Le,"\x3d",zd,".dtype;","}else{",zd,"\x3d",ud,".getBuffer(",Gc,");","if(",zd,"){",Le,"\x3d",zd,".dtype;",'}else if("constant" in ',Gc,"){",Gd.state,"\x3d",2,";","if(typeof "+Gc+'.constant \x3d\x3d\x3d "number"){',Gd[cc[0]],"\x3d",Gc,".constant;",cc.slice(1).map(function(Xe){return Gd[Xe]}).join("\x3d"),"\x3d0;","}else{",cc.map(function(Xe,gf){return Gd[Xe]+"\x3d"+Gc+".constant.length\x3e"+
gf+"?"+Gc+".constant["+gf+"]:0;"}).join(""),"}}else{","if(",Od,"(",Gc,".buffer)){",zd,"\x3d",ud,".createStream(",34962,",",Gc,".buffer);","}else{",zd,"\x3d",ud,".getBuffer(",Gc,".buffer);","}",Le,'\x3d"type" in ',Gc,"?",Jc.glTypes,"[",Gc,".type]:",zd,".dtype;",Gd.normalized,"\x3d!!",Gc,".normalized;");Dc("size");Dc("offset");Dc("stride");Dc("divisor");zc("}}");zc.exit("if(",Gd.isStream,"){",ud,".destroyStream(",zd,");","}");return Gd})});return $c}function Yc(oc,vc){vc=oc["static"];oc=oc.dynamic;
if("vao"in vc){var Zc=vc.vao;null!==Zc&&null===Sb.getVAO(Zc)&&(Zc=Sb.createVAO(Zc));return ma(function($c){return $c.link(Sb.getVAO(Zc))})}if("vao"in oc){var ld=oc.vao;return ra(ld,function($c,Oc){var ad=$c.invoke(Oc,ld);return Oc.def($c.shared.vao+".getVAO("+ad+")")})}return null}function Hc(oc){var vc=oc["static"],Zc=oc.dynamic,ld={};Object.keys(vc).forEach(function($c){var Oc=vc[$c];ld[$c]=ma(function(ad,Jc){return"number"===typeof Oc||"boolean"===typeof Oc?""+Oc:ad.link(Oc)})});Object.keys(Zc).forEach(function($c){var Oc=
Zc[$c];ld[$c]=ra(Oc,function(ad,Jc){return ad.invoke(Jc,Oc)})});return ld}function Cd(oc,vc,Zc,ld,$c){function Oc(zd){var Le=zc[zd];Le&&(Gc[zd]=Le)}var ad=Bc(oc,vc),Jc=nc(oc,$c),zc=xc(oc,Jc,$c),Dc=pd(oc,$c),Gc=Vc(oc,$c),ud=Rc(oc,$c,ad);Oc("viewport");Oc(tb("scissor.box"));var Od=0<Object.keys(Gc).length;Jc={framebuffer:Jc,draw:Dc,shader:ud,state:Gc,dirty:Od,scopeVAO:null,drawVAO:null,useVAO:!1,attributes:{}};Jc.profile=$b(oc,$c);Jc.uniforms=xd(Zc,$c);Jc.drawVAO=Jc.scopeVAO=Yc(oc,$c);if(!Jc.drawVAO&&
ud.program&&!ad&&sc.angle_instanced_arrays){var Gd=!0;oc=ud.program.attributes.map(function(zd){zd=vc["static"][zd];Gd=Gd&&!!zd;return zd});if(Gd&&0<oc.length){var $d=Sb.getVAO(Sb.createVAO(oc));Jc.drawVAO=new ca(null,null,null,function(zd,Le){return zd.link($d)});Jc.useVAO=!0}}ad?Jc.useVAO=!0:Jc.attributes=sd(vc,$c);Jc.context=Hc(ld,$c);return Jc}function Kd(oc,vc,Zc){var ld=oc.shared.context,$c=oc.scope();Object.keys(Zc).forEach(function(Oc){vc.save(ld,"."+Oc);$c(ld,".",Oc,"\x3d",Zc[Oc].append(oc,
vc),";")});vc($c)}function Ld(oc,vc,Zc,ld){var $c=oc.shared,Oc=$c.gl,ad=$c.framebuffer,Jc;Fc&&(Jc=vc.def($c.extensions,".webgl_draw_buffers"));var zc=oc.constants;$c=zc.drawBuffer;zc=zc.backBuffer;oc=Zc?Zc.append(oc,vc):vc.def(ad,".next");ld||vc("if(",oc,"!\x3d\x3d",ad,".cur){");vc("if(",oc,"){",Oc,".bindFramebuffer(",36160,",",oc,".framebuffer);");Fc&&vc(Jc,".drawBuffersWEBGL(",$c,"[",oc,".colorAttachments.length]);");vc("}else{",Oc,".bindFramebuffer(",36160,",null);");Fc&&vc(Jc,".drawBuffersWEBGL(",
zc,");");vc("}",ad,".cur\x3d",oc,";");ld||vc("}")}function kb(oc,vc,Zc){var ld=oc.shared,$c=ld.gl,Oc=oc.current,ad=oc.next,Jc=ld.current,zc=ld.next,Dc=oc.cond(Jc,".dirty");be.forEach(function(Gc){Gc=tb(Gc);if(!(Gc in Zc.state))if(Gc in ad){var ud=ad[Gc];var Od=Oc[Gc];var Gd=g(Wc[Gc].length,function($d){return Dc.def(ud,"[",$d,"]")});Dc(oc.cond(Gd.map(function($d,zd){return $d+"!\x3d\x3d"+Od+"["+zd+"]"}).join("||")).then($c,".",ce[Gc],"(",Gd,");",Gd.map(function($d,zd){return Od+"["+zd+"]\x3d"+$d}).join(";"),
";"))}else ud=Dc.def(zc,".",Gc),Gd=oc.cond(ud,"!\x3d\x3d",Jc,".",Gc),Dc(Gd),Gc in pe?Gd(oc.cond(ud).then($c,".enable(",pe[Gc],");")["else"]($c,".disable(",pe[Gc],");"),Jc,".",Gc,"\x3d",ud,";"):Gd($c,".",ce[Gc],"(",ud,");",Jc,".",Gc,"\x3d",ud,";")});0===Object.keys(Zc.state).length&&Dc(Jc,".dirty\x3dfalse;");vc(Dc)}function De(oc,vc,Zc,ld){var $c=oc.shared,Oc=oc.current,ad=$c.current,Jc=$c.gl;ha(Object.keys(Zc)).forEach(function(zc){var Dc=Zc[zc];if(!ld||ld(Dc)){var Gc=Dc.append(oc,vc);if(pe[zc]){var ud=
pe[zc];sa(Dc)?Gc?vc(Jc,".enable(",ud,");"):vc(Jc,".disable(",ud,");"):vc(oc.cond(Gc).then(Jc,".enable(",ud,");")["else"](Jc,".disable(",ud,");"));vc(ad,".",zc,"\x3d",Gc,";")}else if(u(Gc)){var Od=Oc[zc];vc(Jc,".",ce[zc],"(",Gc,");",Gc.map(function(Gd,$d){return Od+"["+$d+"]\x3d"+Gd}).join(";"),";")}else vc(Jc,".",ce[zc],"(",Gc,");",ad,".",zc,"\x3d",Gc,";")}})}function Hd(oc,vc){tc&&(oc.instancing=vc.def(oc.shared.extensions,".angle_instanced_arrays"))}function oe(oc,vc,Zc,ld,$c){function Oc(){return"undefined"===
typeof performance?"Date.now()":"performance.now()"}function ad(zd){Gd=vc.def();zd(Gd,"\x3d",Oc(),";");"string"===typeof $c?zd(Gc,".count+\x3d",$c,";"):zd(Gc,".count++;");xb&&(ld?($d=vc.def(),zd($d,"\x3d",Od,".getNumPendingQueries();")):zd(Od,".beginQuery(",Gc,");"))}function Jc(zd){zd(Gc,".cpuTime+\x3d",Oc(),"-",Gd,";");xb&&(ld?zd(Od,".pushScopeStats(",$d,",",Od,".getNumPendingQueries(),",Gc,");"):zd(Od,".endQuery();"))}function zc(zd){var Le=vc.def(ud,".profile");vc(ud,".profile\x3d",zd,";");vc.exit(ud,
".profile\x3d",Le,";")}var Dc=oc.shared,Gc=oc.stats,ud=Dc.current,Od=Dc.timer;Zc=Zc.profile;var Gd,$d;if(Zc){if(sa(Zc)){Zc.enable?(ad(vc),Jc(vc.exit),zc("true")):zc("false");return}Zc=Zc.append(oc,vc);zc(Zc)}else Zc=vc.def(ud,".profile");Dc=oc.block();ad(Dc);vc("if(",Zc,"){",Dc,"}");oc=oc.block();Jc(oc);vc.exit("if(",Zc,"){",oc,"}")}function Ge(oc,vc,Zc,ld,$c){function Oc(zc){switch(zc){case 35664:case 35667:case 35671:return 2;case 35665:case 35668:case 35672:return 3;case 35666:case 35669:case 35673:return 4;
default:return 1}}function ad(zc,Dc,Gc){function ud(){vc("if(!",zd,".buffer){",Gd,".enableVertexAttribArray(",$d,");}");var Me=Gc.type;var hf=Gc.size?vc.def(Gc.size,"||",Dc):Dc;vc("if(",zd,".type!\x3d\x3d",Me,"||",zd,".size!\x3d\x3d",hf,"||",gf.map(function(Uf){return zd+"."+Uf+"!\x3d\x3d"+Gc[Uf]}).join("||"),"){",Gd,".bindBuffer(",34962,",",Le,".buffer);",Gd,".vertexAttribPointer(",[$d,hf,Me,Gc.normalized,Gc.stride,Gc.offset],");",zd,".type\x3d",Me,";",zd,".size\x3d",hf,";",gf.map(function(Uf){return zd+
"."+Uf+"\x3d"+Gc[Uf]+";"}).join(""),"}");tc&&(Me=Gc.divisor,vc("if(",zd,".divisor!\x3d\x3d",Me,"){",oc.instancing,".vertexAttribDivisorANGLE(",[$d,Me],");",zd,".divisor\x3d",Me,";}"))}function Od(){vc("if(",zd,".buffer){",Gd,".disableVertexAttribArray(",$d,");",zd,".buffer\x3dnull;","}if(",cc.map(function(Me,hf){return zd+"."+Me+"!\x3d\x3d"+Xe[hf]}).join("||"),"){",Gd,".vertexAttrib4f(",$d,",",Xe,");",cc.map(function(Me,hf){return zd+"."+Me+"\x3d"+Xe[hf]+";"}).join(""),"}")}var Gd=Jc.gl,$d=vc.def(zc,
".location"),zd=vc.def(Jc.attributes,"[",$d,"]");zc=Gc.state;var Le=Gc.buffer,Xe=[Gc.x,Gc.y,Gc.z,Gc.w],gf=["buffer","normalized","offset","stride"];1===zc?ud():2===zc?Od():(vc("if(",zc,"\x3d\x3d\x3d",1,"){"),ud(),vc("}else{"),Od(),vc("}"))}var Jc=oc.shared;ld.forEach(function(zc){var Dc=zc.name,Gc=Zc.attributes[Dc];if(Gc){if(!$c(Gc))return;var ud=Gc.append(oc,vc)}else{if(!$c(gd))return;var Od=oc.scopeAttrib(Dc);ud={};Object.keys(new Lf).forEach(function(Gd){ud[Gd]=vc.def(Od,".",Gd)})}ad(oc.link(zc),
Oc(zc.info.type),ud)})}function Fd(oc,vc,Zc,ld,$c){for(var Oc=oc.shared,ad=Oc.gl,Jc,zc=0;zc<ld.length;++zc){var Dc=ld[zc],Gc=Dc.name,ud=Dc.info.type,Od=Zc.uniforms[Gc];Dc=oc.link(Dc)+".location";if(Od){if(!$c(Od))continue;if(sa(Od)){Gc=Od.value;if(35678===ud||35680===ud)ud=oc.link(Gc._texture||Gc.color[0]._texture),vc(ad,".uniform1i(",Dc,",",ud+".bind());"),vc.exit(ud,".unbind();");else if(35674===ud||35675===ud||35676===ud)Gc=oc.global.def("new Float32Array(["+Array.prototype.slice.call(Gc)+"])"),
Od=2,35675===ud?Od=3:35676===ud&&(Od=4),vc(ad,".uniformMatrix",Od,"fv(",Dc,",false,",Gc,");");else{switch(ud){case 5126:Jc="1f";break;case 35664:Jc="2f";break;case 35665:Jc="3f";break;case 35666:Jc="4f";break;case 35670:Jc="1i";break;case 5124:Jc="1i";break;case 35671:Jc="2i";break;case 35667:Jc="2i";break;case 35672:Jc="3i";break;case 35668:Jc="3i";break;case 35673:Jc="4i";break;case 35669:Jc="4i"}vc(ad,".uniform",Jc,"(",Dc,",",u(Gc)?Array.prototype.slice.call(Gc):Gc,");")}continue}else var Gd=Od.append(oc,
vc)}else{if(!$c(gd))continue;Gd=vc.def(Oc.uniforms,"[",ic.id(Gc),"]")}35678===ud?vc("if(",Gd,"\x26\x26",Gd,'._reglType\x3d\x3d\x3d"framebuffer"){',Gd,"\x3d",Gd,".color[0];","}"):35680===ud&&vc("if(",Gd,"\x26\x26",Gd,'._reglType\x3d\x3d\x3d"framebufferCube"){',Gd,"\x3d",Gd,".color[0];","}");Gc=1;switch(ud){case 35678:case 35680:ud=vc.def(Gd,"._texture");vc(ad,".uniform1i(",Dc,",",ud,".bind());");vc.exit(ud,".unbind();");continue;case 5124:case 35670:Jc="1i";break;case 35667:case 35671:Jc="2i";Gc=2;
break;case 35668:case 35672:Jc="3i";Gc=3;break;case 35669:case 35673:Jc="4i";Gc=4;break;case 5126:Jc="1f";break;case 35664:Jc="2f";Gc=2;break;case 35665:Jc="3f";Gc=3;break;case 35666:Jc="4f";Gc=4;break;case 35674:Jc="Matrix2fv";break;case 35675:Jc="Matrix3fv";break;case 35676:Jc="Matrix4fv"}vc(ad,".uniform",Jc,"(",Dc,",");if("M"===Jc.charAt(0)){Dc=Math.pow(ud-35674+2,2);var $d=oc.global.def("new Float32Array(",Dc,")");vc("false,(Array.isArray(",Gd,")||",Gd," instanceof Float32Array)?",Gd,":(",g(Dc,
function(zd){return $d+"["+zd+"]\x3d"+Gd+"["+zd+"]"}),",",$d,")")}else 1<Gc?vc(g(Gc,function(zd){return Gd+"["+zd+"]"})):vc(Gd);vc(");")}}function ge(oc,vc,Zc,ld){function $c(Me){var hf=Gc[Me];return hf?hf.contextDep&&ld.contextDynamic||hf.propDep?hf.append(oc,Zc):hf.append(oc,vc):vc.def(Dc,".",Me)}function Oc(){function Me(){Zc(Le,".drawElementsInstancedANGLE(",[Od,$d,Xe,Gd+"\x3c\x3c(("+Xe+"-5121)\x3e\x3e1)",zd],");")}function hf(){Zc(Le,".drawArraysInstancedANGLE(",[Od,Gd,$d,zd],");")}ud?gf?Me():
(Zc("if(",ud,"){"),Me(),Zc("}else{"),hf(),Zc("}")):hf()}function ad(){function Me(){Zc(zc+".drawElements("+[Od,$d,Xe,Gd+"\x3c\x3c(("+Xe+"-5121)\x3e\x3e1)"]+");")}function hf(){Zc(zc+".drawArrays("+[Od,Gd,$d]+");")}ud?gf?Me():(Zc("if(",ud,"){"),Me(),Zc("}else{"),hf(),Zc("}")):hf()}var Jc=oc.shared,zc=Jc.gl,Dc=Jc.draw,Gc=ld.draw,ud=function(){var Me=Gc.elements,hf=vc;if(Me){if(Me.contextDep&&ld.contextDynamic||Me.propDep)hf=Zc;Me=Me.append(oc,hf)}else Me=hf.def(Dc,".","elements");Me&&hf("if("+Me+")"+
zc+".bindBuffer(34963,"+Me+".buffer.buffer);");return Me}(),Od=$c("primitive"),Gd=$c("offset"),$d=function(){var Me=Gc.count,hf=vc;if(Me){if(Me.contextDep&&ld.contextDynamic||Me.propDep)hf=Zc;Me=Me.append(oc,hf)}else Me=hf.def(Dc,".","count");return Me}();if("number"===typeof $d){if(0===$d)return}else Zc("if(",$d,"){"),Zc.exit("}");var zd,Le;tc&&(zd=$c("instances"),Le=oc.instancing);var Xe=ud+".type",gf=Gc.elements&&sa(Gc.elements);tc&&("number"!==typeof zd||0<=zd)?"string"===typeof zd?(Zc("if(",
zd,"\x3e0){"),Oc(),Zc("}else if(",zd,"\x3c0){"),ad(),Zc("}")):Oc():ad()}function ff(oc,vc,Zc,ld,$c){vc=lc();$c=vc.proc("body",$c);tc&&(vc.instancing=$c.def(vc.shared.extensions,".angle_instanced_arrays"));oc(vc,$c,Zc,ld);return vc.compile().body}function Vd(oc,vc,Zc,ld){Hd(oc,vc);Zc.useVAO?Zc.drawVAO?vc(oc.shared.vao,".setVAO(",Zc.drawVAO.append(oc,vc),");"):vc(oc.shared.vao,".setVAO(",oc.shared.vao,".targetVAO);"):(vc(oc.shared.vao,".setVAO(null);"),Ge(oc,vc,Zc,ld.attributes,function(){return!0}));
Fd(oc,vc,Zc,ld.uniforms,function(){return!0});ge(oc,vc,vc,Zc)}function Pd(oc,vc){var Zc=oc.proc("draw",1);Hd(oc,Zc);Kd(oc,Zc,vc.context);Ld(oc,Zc,vc.framebuffer);kb(oc,Zc,vc);De(oc,Zc,vc.state);oe(oc,Zc,vc,!1,!0);var ld=vc.shader.progVar.append(oc,Zc);Zc(oc.shared.gl,".useProgram(",ld,".program);");if(vc.shader.program)Vd(oc,Zc,vc,vc.shader.program);else{Zc(oc.shared.vao,".setVAO(null);");var $c=oc.global.def("{}"),Oc=Zc.def(ld,".id"),ad=Zc.def($c,"[",Oc,"]");Zc(oc.cond(ad).then(ad,".call(this,a0);")["else"](ad,
"\x3d",$c,"[",Oc,"]\x3d",oc.link(function(Jc){return ff(Vd,oc,vc,Jc,1)}),"(",ld,");",ad,".call(this,a0);"))}0<Object.keys(vc.state).length&&Zc(oc.shared.current,".dirty\x3dtrue;")}function Ed(oc,vc,Zc,ld){function $c(){return!0}oc.batchId="a1";Hd(oc,vc);Ge(oc,vc,Zc,ld.attributes,$c);Fd(oc,vc,Zc,ld.uniforms,$c);ge(oc,vc,vc,Zc)}function ke(oc,vc,Zc,ld){function $c(ud){return ud.contextDep&&ad||ud.propDep}function Oc(ud){return!$c(ud)}Hd(oc,vc);var ad=Zc.contextDep,Jc=vc.def(),zc=vc.def();oc.shared.props=
zc;oc.batchId=Jc;var Dc=oc.scope(),Gc=oc.scope();vc(Dc.entry,"for(",Jc,"\x3d0;",Jc,"\x3c","a1",";++",Jc,"){",zc,"\x3d","a0","[",Jc,"];",Gc,"}",Dc.exit);Zc.needsContext&&Kd(oc,Gc,Zc.context);Zc.needsFramebuffer&&Ld(oc,Gc,Zc.framebuffer);De(oc,Gc,Zc.state,$c);Zc.profile&&$c(Zc.profile)&&oe(oc,Gc,Zc,!1,!0);ld?(Zc.useVAO?Zc.drawVAO?$c(Zc.drawVAO)?Gc(oc.shared.vao,".setVAO(",Zc.drawVAO.append(oc,Gc),");"):Dc(oc.shared.vao,".setVAO(",Zc.drawVAO.append(oc,Dc),");"):Dc(oc.shared.vao,".setVAO(",oc.shared.vao,
".targetVAO);"):(Dc(oc.shared.vao,".setVAO(null);"),Ge(oc,Dc,Zc,ld.attributes,Oc),Ge(oc,Gc,Zc,ld.attributes,$c)),Fd(oc,Dc,Zc,ld.uniforms,Oc),Fd(oc,Gc,Zc,ld.uniforms,$c),ge(oc,Dc,Gc,Zc)):(vc=oc.global.def("{}"),ld=Zc.shader.progVar.append(oc,Gc),zc=Gc.def(ld,".id"),Dc=Gc.def(vc,"[",zc,"]"),Gc(oc.shared.gl,".useProgram(",ld,".program);","if(!",Dc,"){",Dc,"\x3d",vc,"[",zc,"]\x3d",oc.link(function(ud){return ff(Ed,oc,Zc,ud,2)}),"(",ld,");}",Dc,".call(this,a0[",Jc,"],",Jc,");"))}function Xd(oc,vc){function Zc(Dc){return Dc.contextDep&&
$c||Dc.propDep}var ld=oc.proc("batch",2);oc.batchId="0";Hd(oc,ld);var $c=!1,Oc=!0;Object.keys(vc.context).forEach(function(Dc){$c=$c||vc.context[Dc].propDep});$c||(Kd(oc,ld,vc.context),Oc=!1);var ad=vc.framebuffer,Jc=!1;ad?(ad.propDep?$c=Jc=!0:ad.contextDep&&$c&&(Jc=!0),Jc||Ld(oc,ld,ad)):Ld(oc,ld,null);vc.state.viewport&&vc.state.viewport.propDep&&($c=!0);kb(oc,ld,vc);De(oc,ld,vc.state,function(Dc){return!Zc(Dc)});vc.profile&&Zc(vc.profile)||oe(oc,ld,vc,!1,"a1");vc.contextDep=$c;vc.needsContext=Oc;
vc.needsFramebuffer=Jc;Oc=vc.shader.progVar;if(Oc.contextDep&&$c||Oc.propDep)ke(oc,ld,vc,null);else if(Oc=Oc.append(oc,ld),ld(oc.shared.gl,".useProgram(",Oc,".program);"),vc.shader.program)ke(oc,ld,vc,vc.shader.program);else{ld(oc.shared.vao,".setVAO(null);");ad=oc.global.def("{}");Jc=ld.def(Oc,".id");var zc=ld.def(ad,"[",Jc,"]");ld(oc.cond(zc).then(zc,".call(this,a0,a1);")["else"](zc,"\x3d",ad,"[",Jc,"]\x3d",oc.link(function(Dc){return ff(ke,oc,vc,Dc,2)}),"(",Oc,");",zc,".call(this,a0,a1);"))}0<
Object.keys(vc.state).length&&ld(oc.shared.current,".dirty\x3dtrue;")}function Ve(oc,vc){function Zc(ad){var Jc=vc.shader[ad];Jc&&ld.set($c.shader,"."+ad,Jc.append(oc,ld))}var ld=oc.proc("scope",3);oc.batchId="a2";var $c=oc.shared,Oc=$c.current;Kd(oc,ld,vc.context);vc.framebuffer&&vc.framebuffer.append(oc,ld);ha(Object.keys(vc.state)).forEach(function(ad){var Jc=vc.state[ad].append(oc,ld);u(Jc)?Jc.forEach(function(zc,Dc){ld.set(oc.next[ad],"["+Dc+"]",zc)}):ld.set($c.next,"."+ad,Jc)});oe(oc,ld,vc,
!0,!0);["elements","offset","count","instances","primitive"].forEach(function(ad){var Jc=vc.draw[ad];Jc&&ld.set($c.draw,"."+ad,""+Jc.append(oc,ld))});Object.keys(vc.uniforms).forEach(function(ad){ld.set($c.uniforms,"["+ic.id(ad)+"]",vc.uniforms[ad].append(oc,ld))});Object.keys(vc.attributes).forEach(function(ad){var Jc=vc.attributes[ad].append(oc,ld),zc=oc.scopeAttrib(ad);Object.keys(new Lf).forEach(function(Dc){ld.set(zc,"."+Dc,Jc[Dc])})});vc.scopeVAO&&ld.set($c.vao,".targetVAO",vc.scopeVAO.append(oc,
ld));Zc("vert");Zc("frag");0<Object.keys(vc.state).length&&(ld(Oc,".dirty\x3dtrue;"),ld.exit(Oc,".dirty\x3dtrue;"));ld("a1(",oc.shared.context,",a0,",oc.batchId,");")}function Yd(oc){if("object"===typeof oc&&!u(oc)){for(var vc=Object.keys(oc),Zc=0;Zc<vc.length;++Zc)if(ua.isDynamic(oc[vc[Zc]]))return!0;return!1}}function yf(oc,vc,Zc){function ld(ud,Od){ad.forEach(function(Gd){var $d=$c[Gd];ua.isDynamic($d)&&($d=ud.invoke(Od,$d),Od(Gc,".",Gd,"\x3d",$d,";"))})}var $c=vc["static"][Zc];if($c&&Yd($c)){var Oc=
oc.global,ad=Object.keys($c),Jc=!1,zc=!1,Dc=!1,Gc=oc.global.def("{}");ad.forEach(function(ud){var Od=$c[ud];if(ua.isDynamic(Od))"function"===typeof Od&&(Od=$c[ud]=ua.unbox(Od)),ud=ra(Od,null),Jc=Jc||ud.thisDep,Dc=Dc||ud.propDep,zc=zc||ud.contextDep;else{Oc(Gc,".",ud,"\x3d");switch(typeof Od){case "number":Oc(Od);break;case "string":Oc('"',Od,'"');break;case "object":Array.isArray(Od)&&Oc("[",Od.join(),"]");break;default:Oc(oc.link(Od))}Oc(";")}});vc.dynamic[Zc]=new ua.DynamicVariable(4,{thisDep:Jc,
contextDep:zc,propDep:Dc,ref:Gc,append:ld});delete vc["static"][Zc]}}var Lf=Sb.Record,Cf={add:32774,subtract:32778,"reverse subtract":32779};sc.ext_blend_minmax&&(Cf.min=32775,Cf.max=32776);var tc=sc.angle_instanced_arrays,Fc=sc.webgl_draw_buffers,Wc={dirty:!0,profile:Jb.profile},hd={},be=[],pe={},ce={};Lb("dither",3024);Lb("blend.enable",3042);Ib("blend.color","blendColor",[0,0,0,0]);Ib("blend.equation","blendEquationSeparate",[32774,32774]);Ib("blend.func","blendFuncSeparate",[1,0,1,0]);Lb("depth.enable",
2929,!0);Ib("depth.func","depthFunc",513);Ib("depth.range","depthRange",[0,1]);Ib("depth.mask","depthMask",!0);Ib("colorMask","colorMask",[!0,!0,!0,!0]);Lb("cull.enable",2884);Ib("cull.face","cullFace",1029);Ib("frontFace","frontFace",2305);Ib("lineWidth","lineWidth",1);Lb("polygonOffset.enable",32823);Ib("polygonOffset.offset","polygonOffset",[0,0]);Lb("sample.alpha",32926);Lb("sample.enable",32928);Ib("sample.coverage","sampleCoverage",[1,!1]);Lb("stencil.enable",2960);Ib("stencil.mask","stencilMask",
-1);Ib("stencil.func","stencilFunc",[519,0,-1]);Ib("stencil.opFront","stencilOpSeparate",[1028,7680,7680,7680]);Ib("stencil.opBack","stencilOpSeparate",[1029,7680,7680,7680]);Lb("scissor.enable",3089);Ib("scissor.box","scissor",[0,0,Cb.drawingBufferWidth,Cb.drawingBufferHeight]);Ib("viewport","viewport",[0,0,Cb.drawingBufferWidth,Cb.drawingBufferHeight]);var de={gl:Cb,context:Fb,strings:ic,next:hd,current:Wc,draw:Eb,elements:Tb,buffer:zb,shader:Ab,attributes:Sb.state,vao:Sb,uniforms:Ub,framebuffer:vb,
extensions:sc,timer:xb,isBufferArgs:ka},Be={primTypes:Ka,compareFuncs:Pc,blendFuncs:qc,blendEquations:Cf,stencilOps:Qc,glTypes:Fa,orientationType:cd};Fc&&(Be.backBuffer=[1029],Be.drawBuffer=g(wb.maxDrawbuffers,function(oc){return 0===oc?[0]:g(oc,function(vc){return 36064+vc})}));var Ue=0;return{next:hd,current:Wc,procs:function(){var oc=lc(),vc=oc.proc("poll"),Zc=oc.proc("refresh"),ld=oc.block();vc(ld);Zc(ld);var $c=oc.shared,Oc=$c.gl,ad=$c.next,Jc=$c.current;ld(Jc,".dirty\x3dfalse;");Ld(oc,vc);Ld(oc,
Zc,null,!0);var zc;tc&&(zc=oc.link(tc));sc.oes_vertex_array_object&&Zc(oc.link(sc.oes_vertex_array_object),".bindVertexArrayOES(null);");for(var Dc=0;Dc<wb.maxAttributes;++Dc){var Gc=Zc.def($c.attributes,"[",Dc,"]"),ud=oc.cond(Gc,".buffer");ud.then(Oc,".enableVertexAttribArray(",Dc,");",Oc,".bindBuffer(",34962,",",Gc,".buffer.buffer);",Oc,".vertexAttribPointer(",Dc,",",Gc,".size,",Gc,".type,",Gc,".normalized,",Gc,".stride,",Gc,".offset);")["else"](Oc,".disableVertexAttribArray(",Dc,");",Oc,".vertexAttrib4f(",
Dc,",",Gc,".x,",Gc,".y,",Gc,".z,",Gc,".w);",Gc,".buffer\x3dnull;");Zc(ud);tc&&Zc(zc,".vertexAttribDivisorANGLE(",Dc,",",Gc,".divisor);")}Zc(oc.shared.vao,".currentVAO\x3dnull;",oc.shared.vao,".setVAO(",oc.shared.vao,".targetVAO);");Object.keys(pe).forEach(function(Od){var Gd=pe[Od],$d=ld.def(ad,".",Od),zd=oc.block();zd("if(",$d,"){",Oc,".enable(",Gd,")}else{",Oc,".disable(",Gd,")}",Jc,".",Od,"\x3d",$d,";");Zc(zd);vc("if(",$d,"!\x3d\x3d",Jc,".",Od,"){",zd,"}")});Object.keys(ce).forEach(function(Od){var Gd=
ce[Od],$d=Wc[Od],zd,Le,Xe=oc.block();Xe(Oc,".",Gd,"(");u($d)?(Gd=$d.length,zd=oc.global.def(ad,".",Od),Le=oc.global.def(Jc,".",Od),Xe(g(Gd,function(gf){return zd+"["+gf+"]"}),");",g(Gd,function(gf){return Le+"["+gf+"]\x3d"+zd+"["+gf+"];"}).join("")),vc("if(",g(Gd,function(gf){return zd+"["+gf+"]!\x3d\x3d"+Le+"["+gf+"]"}).join("||"),"){",Xe,"}")):(zd=ld.def(ad,".",Od),Le=ld.def(Jc,".",Od),Xe(zd,");",Jc,".",Od,"\x3d",zd,";"),vc("if(",zd,"!\x3d\x3d",Le,"){",Xe,"}"));Zc(Xe)});return oc.compile()}(),compile:function(oc,
vc,Zc,ld,$c){var Oc=lc();Oc.stats=Oc.link($c);Object.keys(vc["static"]).forEach(function(ad){yf(Oc,vc,ad)});kc.forEach(function(ad){yf(Oc,oc,ad)});Zc=Cd(oc,vc,Zc,ld,Oc);Pd(Oc,Zc);Ve(Oc,Zc);Xd(Oc,Zc);return Oc.compile()}}}function Y(Cb,ic){for(var sc=0;sc<Cb.length;++sc)if(Cb[sc]===ic)return sc;return-1}var pa=function(Cb,ic){for(var sc=Object.keys(ic),wb=0;wb<sc.length;++wb)Cb[sc[wb]]=ic[sc[wb]];return Cb},oa=0,ua={DynamicVariable:q,define:function(Cb,ic){return new q(Cb,m(ic+""))},isDynamic:function(Cb){return"function"===
typeof Cb&&!Cb._reglType||Cb instanceof q},unbox:function(Cb,ic){return"function"===typeof Cb?new q(0,Cb):Cb},accessor:m},ya={next:"function"===typeof requestAnimationFrame?function(Cb){return requestAnimationFrame(Cb)}:function(Cb){return setTimeout(Cb,16)},cancel:"function"===typeof cancelAnimationFrame?function(Cb){return cancelAnimationFrame(Cb)}:clearTimeout},ja="undefined"!==typeof performance&&performance.now?function(){return performance.now()}:function(){return+new Date},za=p();za.zero=p();
var Ba=function(Cb,ic){var sc=1;ic.ext_texture_filter_anisotropic&&(sc=Cb.getParameter(34047));var wb=1,zb=1;ic.webgl_draw_buffers&&(wb=Cb.getParameter(34852),zb=Cb.getParameter(36063));var Tb=!!ic.oes_texture_float;if(Tb){Tb=Cb.createTexture();Cb.bindTexture(3553,Tb);Cb.texImage2D(3553,0,6408,1,1,0,6408,5126,null);var lb=Cb.createFramebuffer();Cb.bindFramebuffer(36160,lb);Cb.framebufferTexture2D(36160,36064,3553,Tb,0);Cb.bindTexture(3553,null);if(36053!==Cb.checkFramebufferStatus(36160))Tb=!1;else{Cb.viewport(0,
0,1,1);Cb.clearColor(1,0,0,1);Cb.clear(16384);var vb=za.allocType(5126,4);Cb.readPixels(0,0,1,1,6408,5126,vb);Cb.getError()?Tb=!1:(Cb.deleteFramebuffer(lb),Cb.deleteTexture(Tb),Tb=1===vb[0]);za.freeType(vb)}}vb=!0;"undefined"!==typeof navigator&&(/MSIE/.test(navigator.userAgent)||/Trident\//.test(navigator.appVersion)||/Edge/.test(navigator.userAgent))||(vb=Cb.createTexture(),lb=za.allocType(5121,36),Cb.activeTexture(33984),Cb.bindTexture(34067,vb),Cb.texImage2D(34069,0,6408,3,3,0,6408,5121,lb),za.freeType(lb),
Cb.bindTexture(34067,null),Cb.deleteTexture(vb),vb=!Cb.getError());return{colorBits:[Cb.getParameter(3410),Cb.getParameter(3411),Cb.getParameter(3412),Cb.getParameter(3413)],depthBits:Cb.getParameter(3414),stencilBits:Cb.getParameter(3415),subpixelBits:Cb.getParameter(3408),extensions:Object.keys(ic).filter(function(Ub){return!!ic[Ub]}),maxAnisotropic:sc,maxDrawbuffers:wb,maxColorAttachments:zb,pointSizeDims:Cb.getParameter(33901),lineWidthDims:Cb.getParameter(33902),maxViewportDims:Cb.getParameter(3386),
maxCombinedTextureUnits:Cb.getParameter(35661),maxCubeMapSize:Cb.getParameter(34076),maxRenderbufferSize:Cb.getParameter(34024),maxTextureUnits:Cb.getParameter(34930),maxTextureSize:Cb.getParameter(3379),maxAttributes:Cb.getParameter(34921),maxVertexUniforms:Cb.getParameter(36347),maxVertexTextureUnits:Cb.getParameter(35660),maxVaryingVectors:Cb.getParameter(36348),maxFragmentUniforms:Cb.getParameter(36349),glsl:Cb.getParameter(35724),renderer:Cb.getParameter(7937),vendor:Cb.getParameter(7936),version:Cb.getParameter(7938),
readFloat:Tb,npotTextureCube:vb}},Ma=function(Cb){return Cb instanceof Uint8Array||Cb instanceof Uint16Array||Cb instanceof Uint32Array||Cb instanceof Int8Array||Cb instanceof Int16Array||Cb instanceof Int32Array||Cb instanceof Float32Array||Cb instanceof Float64Array||Cb instanceof Uint8ClampedArray},Oa=function(Cb){return Object.keys(Cb).map(function(ic){return Cb[ic]})},Ia={shape:function(Cb){for(var ic=[];Cb.length;Cb=Cb[0])ic.push(Cb.length);return ic},flatten:function(Cb,ic,sc,wb){var zb=1;
if(ic.length)for(var Tb=0;Tb<ic.length;++Tb)zb*=ic[Tb];else zb=0;sc=wb||za.allocType(sc,zb);switch(ic.length){case 0:break;case 1:wb=ic[0];for(ic=0;ic<wb;++ic)sc[ic]=Cb[ic];break;case 2:wb=ic[0];ic=ic[1];for(Tb=zb=0;Tb<wb;++Tb)for(var lb=Cb[Tb],vb=0;vb<ic;++vb)sc[zb++]=lb[vb];break;case 3:t(Cb,ic[0],ic[1],ic[2],sc,0);break;default:w(Cb,ic,0,sc,0)}return sc}},Pa={"[object Int8Array]":5120,"[object Int16Array]":5122,"[object Int32Array]":5124,"[object Uint8Array]":5121,"[object Uint8ClampedArray]":5121,
"[object Uint16Array]":5123,"[object Uint32Array]":5125,"[object Float32Array]":5126,"[object Float64Array]":5121,"[object ArrayBuffer]":5121},Fa={int8:5120,int16:5122,int32:5124,uint8:5121,uint16:5123,uint32:5125,"float":5126,float32:5126},Na={dynamic:35048,stream:35040,"static":35044},$a=Ia.flatten,cb=Ia.shape,mb=[];mb[5120]=1;mb[5122]=2;mb[5124]=4;mb[5121]=1;mb[5123]=2;mb[5125]=4;mb[5126]=4;var Ka={points:0,point:0,lines:1,line:1,triangles:4,triangle:4,"line loop":2,"line strip":3,"triangle strip":5,
"triangle fan":6},Ua=new Float32Array(1),Ea=new Uint32Array(Ua.buffer),Ya=[9984,9986,9985,9987],ab=[0,6409,6410,6407,6408],Wa={};Wa[6409]=Wa[6406]=Wa[6402]=1;Wa[34041]=Wa[6410]=2;Wa[6407]=Wa[35904]=3;Wa[6408]=Wa[35906]=4;var Ja=B("HTMLCanvasElement"),Sa=B("OffscreenCanvas"),fb=B("CanvasRenderingContext2D"),nb=B("ImageBitmap"),Ha=B("HTMLImageElement"),Ca=B("HTMLVideoElement"),Qa=Object.keys(Pa).concat([Ja,Sa,fb,nb,Ha,Ca]),gb=[];gb[5121]=1;gb[5126]=4;gb[36193]=2;gb[5123]=2;gb[5125]=4;var Va=[];Va[32854]=
2;Va[32855]=2;Va[36194]=2;Va[34041]=4;Va[33776]=.5;Va[33777]=.5;Va[33778]=1;Va[33779]=1;Va[35986]=.5;Va[35987]=1;Va[34798]=1;Va[35840]=.5;Va[35841]=.25;Va[35842]=.5;Va[35843]=.25;Va[36196]=.5;var db=[];db[32854]=2;db[32855]=2;db[36194]=2;db[33189]=2;db[36168]=1;db[34041]=4;db[35907]=4;db[34836]=16;db[34842]=8;db[34843]=6;var qb=function(Cb,ic,sc,wb,zb){function Tb(Eb){this.id=Sb++;this.refCount=1;this.renderbuffer=Eb;this.format=32854;this.height=this.width=0;zb.profile&&(this.stats={size:0})}function lb(Eb){var Fb=
Eb.renderbuffer;Cb.bindRenderbuffer(36161,null);Cb.deleteRenderbuffer(Fb);Eb.renderbuffer=null;Eb.refCount=0;delete Ab[Eb.id];wb.renderbufferCount--}var vb={rgba4:32854,rgb565:36194,"rgb5 a1":32855,depth:33189,stencil:36168,"depth stencil":34041};ic.ext_srgb&&(vb.srgba=35907);ic.ext_color_buffer_half_float&&(vb.rgba16f=34842,vb.rgb16f=34843);ic.webgl_color_buffer_float&&(vb.rgba32f=34836);var Ub=[];Object.keys(vb).forEach(function(Eb){Ub[vb[Eb]]=Eb});var Sb=0,Ab={};Tb.prototype.decRef=function(){0>=
--this.refCount&&lb(this)};zb.profile&&(wb.getTotalRenderbufferSize=function(){var Eb=0;Object.keys(Ab).forEach(function(Fb){Eb+=Ab[Fb].stats.size});return Eb});return{create:function(Eb,Fb){function xb(tb,Lb){var Ib=0,lc=0,$b=32854;"object"===typeof tb&&tb?("shape"in tb?(lc=tb.shape,Ib=lc[0]|0,lc=lc[1]|0):("radius"in tb&&(Ib=lc=tb.radius|0),"width"in tb&&(Ib=tb.width|0),"height"in tb&&(lc=tb.height|0)),"format"in tb&&($b=vb[tb.format])):"number"===typeof tb?(Ib=tb|0,lc="number"===typeof Lb?Lb|0:
Ib):tb||(Ib=lc=1);if(Ib!==Jb.width||lc!==Jb.height||$b!==Jb.format)return xb.width=Jb.width=Ib,xb.height=Jb.height=lc,Jb.format=$b,Cb.bindRenderbuffer(36161,Jb.renderbuffer),Cb.renderbufferStorage(36161,$b,Ib,lc),zb.profile&&(Jb.stats.size=db[Jb.format]*Jb.width*Jb.height),xb.format=Ub[Jb.format],xb}var Jb=new Tb(Cb.createRenderbuffer());Ab[Jb.id]=Jb;wb.renderbufferCount++;xb(Eb,Fb);xb.resize=function(tb,Lb){tb|=0;Lb=Lb|0||tb;if(tb===Jb.width&&Lb===Jb.height)return xb;xb.width=Jb.width=tb;xb.height=
Jb.height=Lb;Cb.bindRenderbuffer(36161,Jb.renderbuffer);Cb.renderbufferStorage(36161,Jb.format,tb,Lb);zb.profile&&(Jb.stats.size=db[Jb.format]*Jb.width*Jb.height);return xb};xb._reglType="renderbuffer";xb._renderbuffer=Jb;zb.profile&&(xb.stats=Jb.stats);xb.destroy=function(){Jb.decRef()};return xb},clear:function(){Oa(Ab).forEach(lb)},restore:function(){Oa(Ab).forEach(function(Eb){Eb.renderbuffer=Cb.createRenderbuffer();Cb.bindRenderbuffer(36161,Eb.renderbuffer);Cb.renderbufferStorage(36161,Eb.format,
Eb.width,Eb.height)});Cb.bindRenderbuffer(36161,null)}}},Kb=[];Kb[6408]=4;Kb[6407]=3;var Ob=[];Ob[5121]=1;Ob[5126]=4;Ob[36193]=2;var cc=["x","y","z","w"],kc="blend.func blend.equation stencil.func stencil.opFront stencil.opBack sample.coverage viewport scissor.box polygonOffset.offset".split(" "),qc={0:0,1:1,zero:0,one:1,"src color":768,"one minus src color":769,"src alpha":770,"one minus src alpha":771,"dst color":774,"one minus dst color":775,"dst alpha":772,"one minus dst alpha":773,"constant color":32769,
"one minus constant color":32770,"constant alpha":32771,"one minus constant alpha":32772,"src alpha saturate":776},Pc={never:512,less:513,"\x3c":513,equal:514,"\x3d":514,"\x3d\x3d":514,"\x3d\x3d\x3d":514,lequal:515,"\x3c\x3d":515,greater:516,"\x3e":516,notequal:517,"!\x3d":517,"!\x3d\x3d":517,gequal:518,"\x3e\x3d":518,always:519},Qc={0:0,zero:0,keep:7680,replace:7681,increment:7682,decrement:7683,"increment wrap":34055,"decrement wrap":34056,invert:5386},cd={cw:2304,ccw:2305},gd=new ca(!1,!1,!1,function(){}),
kd=function(Cb,ic){function sc(){this.endQueryIndex=this.startQueryIndex=-1;this.sum=0;this.stats=null}function wb(Ab,Eb,Fb){var xb=lb.pop()||new sc;xb.startQueryIndex=Ab;xb.endQueryIndex=Eb;xb.sum=0;xb.stats=Fb;vb.push(xb)}if(!ic.ext_disjoint_timer_query)return null;var zb=[],Tb=[],lb=[],vb=[],Ub=[],Sb=[];return{beginQuery:function(Ab){var Eb=zb.pop()||ic.ext_disjoint_timer_query.createQueryEXT();ic.ext_disjoint_timer_query.beginQueryEXT(35007,Eb);Tb.push(Eb);wb(Tb.length-1,Tb.length,Ab)},endQuery:function(){ic.ext_disjoint_timer_query.endQueryEXT(35007)},
pushScopeStats:wb,update:function(){var Ab;var Eb=Tb.length;if(0!==Eb){Sb.length=Math.max(Sb.length,Eb+1);Ub.length=Math.max(Ub.length,Eb+1);Ub[0]=0;var Fb=Sb[0]=0;for(Ab=Eb=0;Ab<Tb.length;++Ab){var xb=Tb[Ab];ic.ext_disjoint_timer_query.getQueryObjectEXT(xb,34919)?(Fb+=ic.ext_disjoint_timer_query.getQueryObjectEXT(xb,34918),zb.push(xb)):Tb[Eb++]=xb;Ub[Ab+1]=Fb;Sb[Ab+1]=Eb}Tb.length=Eb;for(Ab=Eb=0;Ab<vb.length;++Ab){Fb=vb[Ab];var Jb=Fb.startQueryIndex;xb=Fb.endQueryIndex;Fb.sum+=Ub[xb]-Ub[Jb];Jb=Sb[Jb];
xb=Sb[xb];xb===Jb?(Fb.stats.gpuTime+=Fb.sum/1E6,lb.push(Fb)):(Fb.startQueryIndex=Jb,Fb.endQueryIndex=xb,vb[Eb++]=Fb)}vb.length=Eb}},getNumPendingQueries:function(){return Tb.length},clear:function(){zb.push.apply(zb,Tb);for(var Ab=0;Ab<zb.length;Ab++)ic.ext_disjoint_timer_query.deleteQueryEXT(zb[Ab]);Tb.length=0;zb.length=0},restore:function(){Tb.length=0;zb.length=0}}};return function(Cb){function ic(){if(0===Hd.length)$b&&$b.update(),ge=null;else{ge=ya.next(ic);Ab();for(var Vd=Hd.length-1;0<=Vd;--Vd){var Pd=
Hd[Vd];Pd&&Pd(Rc,null,0)}xb.flush();$b&&$b.update()}}function sc(){!ge&&0<Hd.length&&(ge=ya.next(ic))}function wb(){ge&&(ya.cancel(ic),ge=null)}function zb(Vd){Vd.preventDefault();wb();oe.forEach(function(Pd){Pd()})}function Tb(Vd){xb.getError();tb.restore();Yc.restore();Vc.restore();Hc.restore();Cd.restore();Kd.restore();xd.restore();$b&&$b.restore();Ld.procs.refresh();sc();Ge.forEach(function(Pd){Pd()})}function lb(Vd){function Pd(Fc){var Wc={},hd={};Object.keys(Fc).forEach(function(be){var pe=
Fc[be];ua.isDynamic(pe)?hd[be]=ua.unbox(pe,be):Wc[be]=pe});return{dynamic:hd,"static":Wc}}function Ed(Fc){for(;tc.length<Fc;)tc.push(null);return tc}var ke=Pd(Vd.context||{}),Xd=Pd(Vd.uniforms||{}),Ve=Pd(Vd.attributes||{}),Yd=Pd(function(Fc){function Wc(be){if(be in hd){var pe=hd[be];delete hd[be];Object.keys(pe).forEach(function(ce){hd[be+"."+ce]=pe[ce]})}}var hd=pa({},Fc);delete hd.uniforms;delete hd.attributes;delete hd.context;delete hd.vao;"stencil"in hd&&hd.stencil.op&&(hd.stencil.opBack=hd.stencil.opFront=
hd.stencil.op,delete hd.stencil.op);Wc("blend");Wc("depth");Wc("cull");Wc("stencil");Wc("polygonOffset");Wc("scissor");Wc("sample");"vao"in Fc&&(hd.vao=Fc.vao);return hd}(Vd));Vd={gpuTime:0,cpuTime:0,count:0};ke=Ld.compile(Yd,Ve,Xd,ke,Vd);var yf=ke.draw,Lf=ke.batch,Cf=ke.scope,tc=[];return pa(function(Fc,Wc){var hd;if("function"===typeof Fc)return Cf.call(this,null,Fc,0);if("function"===typeof Wc)if("number"===typeof Fc)for(hd=0;hd<Fc;++hd)Cf.call(this,null,Wc,hd);else if(Array.isArray(Fc))for(hd=
0;hd<Fc.length;++hd)Cf.call(this,Fc[hd],Wc,hd);else return Cf.call(this,Fc,Wc,0);else if("number"===typeof Fc){if(0<Fc)return Lf.call(this,Ed(Fc|0),Fc|0)}else if(Array.isArray(Fc)){if(Fc.length)return Lf.call(this,Fc,Fc.length)}else return yf.call(this,Fc)},{stats:Vd})}function vb(Vd,Pd){Vd=0;Ld.procs.poll();var Ed=Pd.color;Ed&&(xb.clearColor(+Ed[0]||0,+Ed[1]||0,+Ed[2]||0,+Ed[3]||0),Vd|=16384);"depth"in Pd&&(xb.clearDepth(+Pd.depth),Vd|=256);"stencil"in Pd&&(xb.clearStencil(Pd.stencil|0),Vd|=1024);
xb.clear(Vd)}function Ub(Vd){Hd.push(Vd);sc();return{cancel:function(){function Pd(){var ke=Y(Hd,Pd);Hd[ke]=Hd[Hd.length-1];--Hd.length;0>=Hd.length&&wb()}var Ed=Y(Hd,Vd);Hd[Ed]=Pd}}}function Sb(){var Vd=kb.viewport,Pd=kb.scissor_box;Vd[0]=Vd[1]=Pd[0]=Pd[1]=0;Rc.viewportWidth=Rc.framebufferWidth=Rc.drawingBufferWidth=Vd[2]=Pd[2]=xb.drawingBufferWidth;Rc.viewportHeight=Rc.framebufferHeight=Rc.drawingBufferHeight=Vd[3]=Pd[3]=xb.drawingBufferHeight}function Ab(){Rc.tick+=1;Rc.time=Fb();Sb();Ld.procs.poll()}
function Eb(){Sb();Ld.procs.refresh();$b&&$b.update()}function Fb(){return(ja()-nc)/1E3}Cb=l(Cb);if(!Cb)return null;var xb=Cb.gl,Jb=xb.getContextAttributes();xb.isContextLost();var tb=c(xb,Cb);if(!tb)return null;var Lb=f(),Ib={vaoCount:0,bufferCount:0,elementsCount:0,framebufferCount:0,shaderCount:0,textureCount:0,cubeCount:0,renderbufferCount:0,maxTextureUnits:0},lc=tb.extensions,$b=kd(xb,lc),nc=ja(),xc=xb.drawingBufferWidth,Bc=xb.drawingBufferHeight,Rc={tick:0,time:0,viewportWidth:xc,viewportHeight:Bc,
framebufferWidth:xc,framebufferHeight:Bc,drawingBufferWidth:xc,drawingBufferHeight:Bc,pixelRatio:Cb.pixelRatio},pd=Ba(xb,lc),Vc=z(xb,Ib,Cb,function(Vd){return xd.destroyBuffer(Vd)}),xd=O(xb,lc,pd,Ib,Vc),sd=F(xb,lc,Vc,Ib),Yc=T(xb,Lb,Ib,Cb),Hc=Q(xb,lc,pd,function(){Ld.procs.poll()},Rc,Ib,Cb),Cd=qb(xb,lc,pd,Ib,Cb),Kd=S(xb,lc,pd,Hc,Cd,Ib),Ld=qa(xb,Lb,lc,pd,Vc,sd,Hc,Kd,{},xd,Yc,{elements:null,primitive:4,count:-1,offset:0,instances:-1},Rc,$b,Cb);Lb=V(xb,Kd,Ld.procs.poll,Rc,Jb,lc,pd);var kb=Ld.next,De=
xb.canvas,Hd=[],oe=[],Ge=[],Fd=[Cb.onDestroy],ge=null;De&&(De.addEventListener("webglcontextlost",zb,!1),De.addEventListener("webglcontextrestored",Tb,!1));var ff=Kd.setFBO=lb({framebuffer:ua.define.call(null,1,"framebuffer")});Eb();Jb=pa(lb,{clear:function(Vd){if("framebuffer"in Vd)if(Vd.framebuffer&&"framebufferCube"===Vd.framebuffer_reglType)for(var Pd=0;6>Pd;++Pd)ff(pa({framebuffer:Vd.framebuffer.faces[Pd]},Vd),vb);else ff(Vd,vb);else vb(null,Vd)},prop:ua.define.bind(null,1),context:ua.define.bind(null,
2),"this":ua.define.bind(null,3),draw:lb({}),buffer:function(Vd){return Vc.create(Vd,34962,!1,!1)},elements:function(Vd){return sd.create(Vd,!1)},texture:Hc.create2D,cube:Hc.createCube,renderbuffer:Cd.create,framebuffer:Kd.create,framebufferCube:Kd.createCube,vao:xd.createVAO,attributes:Jb,frame:Ub,on:function(Vd,Pd){switch(Vd){case "frame":return Ub(Pd);case "lost":var Ed=oe;break;case "restore":Ed=Ge;break;case "destroy":Ed=Fd}Ed.push(Pd);return{cancel:function(){for(var ke=0;ke<Ed.length;++ke)if(Ed[ke]===
Pd){Ed[ke]=Ed[Ed.length-1];Ed.pop();break}}}},limits:pd,hasExtension:function(Vd){return 0<=pd.extensions.indexOf(Vd.toLowerCase())},read:Lb,destroy:function(){Hd.length=0;wb();De&&(De.removeEventListener("webglcontextlost",zb),De.removeEventListener("webglcontextrestored",Tb));Yc.clear();Kd.clear();Cd.clear();Hc.clear();sd.clear();Vc.clear();xd.clear();$b&&$b.clear();Fd.forEach(function(Vd){Vd()})},_gl:xb,_refresh:Eb,poll:function(){Ab();$b&&$b.update()},now:Fb,stats:Ib});Cb.onDone(null,Jb);return Jb}})},
{}],513:[function(a,G,C){var q="",n;G.exports=function(m,f){if("string"!==typeof m)throw new TypeError("expected a string");if(1===f)return m;if(2===f)return m+m;var b=m.length*f;if(n!==m||"undefined"===typeof n)n=m,q="";else if(q.length>=b)return q.substr(0,b);for(;b>q.length&&1<f;)f&1&&(q+=m),f>>=1,m+=m;q+=m;return q=q.substr(0,b)}},{}],514:[function(a,G,C){(function(q){G.exports=q.performance&&q.performance.now?function(){return performance.now()}:Date.now||function(){return+new Date}}).call(this,
"undefined"!==typeof la?la:"undefined"!==typeof self?self:"undefined"!==typeof window?window:{})},{}],515:[function(a,G,C){G.exports=function(q){for(var n=q.length,m=q[q.length-1],f=n,b=n-2;0<=b;--b){var k=m,e=q[b];m=k+e;k=m-k;if(e-=k)q[--f]=m,m=e}var h=0;for(b=f;b<n;++b)k=q[b],e=m,m=k+e,k=m-k,(e-=k)&&(q[h++]=e);q[h++]=m;q.length=h;return q}},{}],516:[function(a,G,C){function q(c,g){for(var d=Array(c.length-1),p=1;p<c.length;++p)for(var r=d[p-1]=Array(c.length-1),t=0,w=0;t<c.length;++t)t!==g&&(r[w++]=
c[p][t]);return d}function n(c){if(1===c.length)return c[0];if(2===c.length)return["sum(",c[0],",",c[1],")"].join("");var g=c.length>>1;return["sum(",n(c.slice(0,g)),",",n(c.slice(g)),")"].join("")}function m(c){if(2===c.length)return["sum(prod(",c[0][0],",",c[1][1],"),prod(-",c[0][1],",",c[1][0],"))"].join("");for(var g=[],d=0;d<c.length;++d)g.push(["scale(",m(q(c,d)),",",d&1?"-":"",c[0][d],")"].join(""));return n(g)}function f(c){for(var g=Function,d=Array(c),p=0;p<c;++p){d[p]=Array(c);for(var r=
0;r<c;++r)d[p][r]=["m[",p,"][",r,"]"].join("")}return(new g("sum","scale","prod","compress",["function robustDeterminant",c,"(m){return compress(",m(d),")};return robustDeterminant",c].join("")))(k,e,b,h)}var b=a("two-product"),k=a("robust-sum"),e=a("robust-scale"),h=a("robust-compress"),l=[function(){return[0]},function(c){return[c[0][0]]}];(function(){for(;6>l.length;)l.push(f(l.length));for(var c=[],g=["function robustDeterminant(m){switch(m.length){"],d=0;6>d;++d)c.push("det"+d),g.push("case ",
d,":return det",d,"(m);");g.push("}var det\x3dCACHE[m.length];if(!det)det\x3dCACHE[m.length]\x3dgen(m.length);return det(m);}return robustDeterminant");c.push("CACHE","gen",g.join(""));c=Function.apply(void 0,c);G.exports=c.apply(void 0,l.concat([l,f]));for(d=0;d<l.length;++d)G.exports[d]=l[d]})()},{"robust-compress":515,"robust-scale":522,"robust-sum":525,"two-product":554}],517:[function(a,G,C){var q=a("two-product"),n=a("robust-sum");G.exports=function(m,f){for(var b=q(m[0],f[0]),k=1;k<m.length;++k)b=
n(b,q(m[k],f[k]));return b}},{"robust-sum":525,"two-product":554}],518:[function(a,G,C){function q(p,r){for(var t=Array(p.length-1),w=1;w<p.length;++w)for(var x=t[w-1]=Array(p.length-1),y=0,A=0;y<p.length;++y)y!==r&&(x[A++]=p[w][y]);return t}function n(p){if(1===p.length)return p[0];if(2===p.length)return["sum(",p[0],",",p[1],")"].join("");var r=p.length>>1;return["sum(",n(p.slice(0,r)),",",n(p.slice(r)),")"].join("")}function m(p,r){return"m"===p.charAt(0)?"w"===r.charAt(0)?(p=p.split("["),["w",
r.substr(1),"m",p[0].substr(1)].join("")):["prod(",p,",",r,")"].join(""):m(r,p)}function f(p){if(2===p.length)return[["diff(",m(p[0][0],p[1][1]),",",m(p[1][0],p[0][1]),")"].join("")];for(var r=[],t=0;t<p.length;++t)r.push(["scale(",n(f(q(p,t))),",",t&1?"-":"",p[0][t],")"].join(""));return r}function b(p,r){for(var t=[],w=0;w<r-2;++w)t.push(["prod(m",p,"[",w,"],m",p,"[",w,"])"].join(""));return n(t)}function k(p){for(var r=[],t=[],w=Array(p),x=0;x<p;++x){w[x]=Array(p);for(var y=0;y<p;++y)w[x][y]=["m",
y,"[",p-x-2,"]"].join("")}for(x=0;x<p;++x)w[0][x]="1",w[p-1][x]="w"+x;for(x=0;x<p;++x)0===(x&1)?r.push.apply(r,f(q(w,x))):t.push.apply(t,f(q(w,x)));r=n(r);t=n(t);w="exactInSphere"+p;y=[];for(x=0;x<p;++x)y.push("m"+x);y=["function ",w,"(",y.join(),"){"];for(x=0;x<p;++x){y.push("var w",x,"\x3d",b(x,p),";");for(var A=0;A<p;++A)A!==x&&y.push("var w",x,"m",A,"\x3dscale(w",x,",m",A,"[0]);")}y.push("var p\x3d",r,",n\x3d",t,",d\x3ddiff(p,n);return d[d.length-1];}return ",w);return(new Function("sum","diff",
"prod","scale",y.join("")))(l,c,h,g)}function e(p){var r=d[p.length];r||(r=d[p.length]=k(p.length));return r.apply(void 0,p)}var h=a("two-product"),l=a("robust-sum"),c=a("robust-subtract"),g=a("robust-scale"),d=[function(){return 0},function(){return 0},function(){return 0}];(function(){for(;6>=d.length;)d.push(k(d.length));for(var p=[],r=["slow"],t=0;6>=t;++t)p.push("a"+t),r.push("o"+t);var w=["function testInSphere(",p.join(),"){switch(arguments.length){case 0:case 1:return 0;"];for(t=2;6>=t;++t)w.push("case ",
t,":return o",t,"(",p.slice(0,t).join(),");");w.push("}var s\x3dnew Array(arguments.length);for(var i\x3d0;i\x3carguments.length;++i){s[i]\x3darguments[i]};return slow(s);}return testInSphere");r.push(w.join(""));p=Function.apply(void 0,r);G.exports=p.apply(void 0,[e].concat(d));for(t=0;6>=t;++t)G.exports[t]=d[t]})()},{"robust-scale":522,"robust-subtract":524,"robust-sum":525,"two-product":554}],519:[function(a,G,C){function q(f){for(var b="robustLinearSolve"+f+"d",k=["function ",b,"(A,b){return ["],
e=0;e<f;++e){k.push("det([");for(var h=0;h<f;++h){0<h&&k.push(",");k.push("[");for(var l=0;l<f;++l)0<l&&k.push(","),l===e?k.push("+b[",h,"]"):k.push("+A[",h,"][",l,"]");k.push("]")}k.push("]),")}k.push("det(A)]}return ",b);b=new Function("det",k.join(""));return 6>f?b(n[f]):b(n)}var n=a("robust-determinant"),m=[function(){return[0]},function(f,b){return[[b[0]],[f[0][0]]]}];(function(){for(;6>m.length;)m.push(q(m.length));for(var f=[],b=["function dispatchLinearSolve(A,b){switch(A.length){"],k=0;6>
k;++k)f.push("s"+k),b.push("case ",k,":return s",k,"(A,b);");b.push("}var s\x3dCACHE[A.length];if(!s)s\x3dCACHE[A.length]\x3dg(A.length);return s(A,b)}return dispatchLinearSolve");f.push("CACHE","g",b.join(""));f=Function.apply(void 0,f);G.exports=f.apply(void 0,m.concat([m,q]));for(k=0;6>k;++k)G.exports[k]=m[k]})()},{"robust-determinant":516}],520:[function(a,G,C){function q(p,r){for(var t=Array(p.length-1),w=1;w<p.length;++w)for(var x=t[w-1]=Array(p.length-1),y=0,A=0;y<p.length;++y)y!==r&&(x[A++]=
p[w][y]);return t}function n(p){if(1===p.length)return p[0];if(2===p.length)return["sum(",p[0],",",p[1],")"].join("");var r=p.length>>1;return["sum(",n(p.slice(0,r)),",",n(p.slice(r)),")"].join("")}function m(p){if(2===p.length)return[["sum(prod(",p[0][0],",",p[1][1],"),prod(-",p[0][1],",",p[1][0],"))"].join("")];for(var r=[],t=0;t<p.length;++t)r.push(["scale(",n(m(q(p,t))),",",t&1?"-":"",p[0][t],")"].join(""));return r}function f(p){for(var r=[],t=[],w=Array(p),x=0;x<p;++x){w[x]=Array(p);for(var y=
0;y<p;++y)w[x][y]=["m",y,"[",p-x-1,"]"].join("")}x=[];for(y=0;y<p;++y)0===(y&1)?r.push.apply(r,m(q(w,y))):t.push.apply(t,m(q(w,y))),x.push("m"+y);r=n(r);t=n(t);p="orientation"+p+"Exact";p=["function ",p,"(",x.join(),"){var p\x3d",r,",n\x3d",t,",d\x3dsub(p,n);return d[d.length-1];};return ",p].join("");return(new Function("sum","prod","scale","sub",p))(e,k,h,l)}function b(p){var r=d[p.length];r||(r=d[p.length]=f(p.length));return r.apply(void 0,p)}var k=a("two-product"),e=a("robust-sum"),h=a("robust-scale"),
l=a("robust-subtract"),c=f(3),g=f(4),d=[function(){return 0},function(){return 0},function(p,r){return r[0]-p[0]},function(p,r,t){var w=(p[1]-t[1])*(r[0]-t[0]),x=(p[0]-t[0])*(r[1]-t[1]),y=w-x;if(0<w){if(0>=x)return y;w+=x}else if(0>w){if(0<=x)return y;w=-(w+x)}else return y;w*=3.3306690738754716E-16;return y>=w||y<=-w?y:c(p,r,t)},function(p,r,t,w){var x=p[0]-w[0],y=r[0]-w[0],A=t[0]-w[0],z=p[1]-w[1],F=r[1]-w[1],D=t[1]-w[1],u=p[2]-w[2],B=r[2]-w[2],I=t[2]-w[2],J=y*D,N=A*F;A*=z;D*=x;x*=F;z*=y;y=u*(J-
N)+B*(A-D)+I*(x-z);u=7.771561172376103E-16*((Math.abs(J)+Math.abs(N))*Math.abs(u)+(Math.abs(A)+Math.abs(D))*Math.abs(B)+(Math.abs(x)+Math.abs(z))*Math.abs(I));return y>u||-y>u?y:g(p,r,t,w)}];(function(){for(;5>=d.length;)d.push(f(d.length));for(var p=[],r=["slow"],t=0;5>=t;++t)p.push("a"+t),r.push("o"+t);var w=["function getOrientation(",p.join(),"){switch(arguments.length){case 0:case 1:return 0;"];for(t=2;5>=t;++t)w.push("case ",t,":return o",t,"(",p.slice(0,t).join(),");");w.push("}var s\x3dnew Array(arguments.length);for(var i\x3d0;i\x3carguments.length;++i){s[i]\x3darguments[i]};return slow(s);}return getOrientation");
r.push(w.join(""));p=Function.apply(void 0,r);G.exports=p.apply(void 0,[b].concat(d));for(t=0;5>=t;++t)G.exports[t]=d[t]})()},{"robust-scale":522,"robust-subtract":524,"robust-sum":525,"two-product":554}],521:[function(a,G,C){var q=a("robust-sum"),n=a("robust-scale");G.exports=function(m,f){if(1===m.length)return n(f,m[0]);if(1===f.length)return n(m,f[0]);if(0===m.length||0===f.length)return[0];var b=[0];if(m.length<f.length)for(var k=0;k<m.length;++k)b=q(b,n(f,m[k]));else for(k=0;k<f.length;++k)b=
q(b,n(m,f[k]));return b}},{"robust-scale":522,"robust-sum":525}],522:[function(a,G,C){var q=a("two-product"),n=a("two-sum");G.exports=function(m,f){var b=m.length;if(1===b)return m=q(m[0],f),m[0]?m:[m[1]];var k=Array(2*b),e=[.1,.1],h=[.1,.1],l=0;q(m[0],f,e);e[0]&&(k[l++]=e[0]);for(var c=1;c<b;++c){q(m[c],f,h);n(e[1],h[0],e);e[0]&&(k[l++]=e[0]);var g=h[1],d=e[1],p=g+d;g=d-(p-g);e[1]=p;g&&(k[l++]=g)}e[1]&&(k[l++]=e[1]);0===l&&(k[l++]=0);k.length=l;return k}},{"two-product":554,"two-sum":555}],523:[function(a,
G,C){G.exports=function(n,m,f,b){var k=q(n,f,b),e=q(m,f,b);if(0<k&&0<e||0>k&&0>e)return!1;var h=q(f,n,m),l=q(b,n,m);if(0<h&&0<l||0>h&&0>l)return!1;if(0===k&&0===e&&0===h&&0===l){a:{for(k=0;2>k;++k){e=n[k];h=m[k];l=Math.max(e,h);var c=f[k],g=b[k],d=Math.min(c,g);if(Math.max(c,g)<Math.min(e,h)||l<d){n=!1;break a}}n=!0}return n}return!0};var q=a("robust-orientation")[3]},{"robust-orientation":520}],524:[function(a,G,C){G.exports=function(q,n){var m=q.length|0,f=n.length|0;if(1===m&&1===f)return q=q[0],
m=-n[0],n=q+m,f=n-q,n=(q=q-(n-f)+(m-f))?[q,n]:[n],n;var b=Array(m+f),k=0,e=0,h=0,l=Math.abs,c=q[e],g=l(c),d=-n[h],p=l(d);if(g<p){var r=c;e+=1;e<m&&(c=q[e],g=l(c))}else r=d,h+=1,h<f&&(d=-n[h],p=l(d));if(e<m&&g<p||h>=f){var t=c;e+=1;e<m&&(c=q[e],g=l(c))}else t=d,h+=1,h<f&&(d=-n[h],p=l(d));var w=t+r;r-=w-t;for(var x=w,y;e<m&&h<f;)g<p?(t=c,e+=1,e<m&&(c=q[e],g=l(c))):(t=d,h+=1,h<f&&(d=-n[h],p=l(d))),w=t+r,t=w-t,(t=r-t)&&(b[k++]=t),t=x+w,y=t-x,r=t-y,w-=y,x-=r,r=x+w,x=t;for(;e<m;)t=c,w=t+r,t=w-t,(t=r-t)&&
(b[k++]=t),t=x+w,y=t-x,r=t-y,w-=y,x-=r,r=x+w,x=t,e+=1,e<m&&(c=q[e]);for(;h<f;)t=d,w=t+r,t=w-t,(t=r-t)&&(b[k++]=t),t=x+w,y=t-x,r=t-y,w-=y,x-=r,r=x+w,x=t,h+=1,h<f&&(d=-n[h]);r&&(b[k++]=r);x&&(b[k++]=x);k||(b[k++]=0);b.length=k;return b}},{}],525:[function(a,G,C){G.exports=function(q,n){var m=q.length|0,f=n.length|0;if(1===m&&1===f)return q=q[0],m=n[0],n=q+m,f=n-q,n=(q=q-(n-f)+(m-f))?[q,n]:[n],n;var b=Array(m+f),k=0,e=0,h=0,l=Math.abs,c=q[e],g=l(c),d=n[h],p=l(d);if(g<p){var r=c;e+=1;e<m&&(c=q[e],g=l(c))}else r=
d,h+=1,h<f&&(d=n[h],p=l(d));if(e<m&&g<p||h>=f){var t=c;e+=1;e<m&&(c=q[e],g=l(c))}else t=d,h+=1,h<f&&(d=n[h],p=l(d));var w=t+r;r-=w-t;for(var x=w,y;e<m&&h<f;)g<p?(t=c,e+=1,e<m&&(c=q[e],g=l(c))):(t=d,h+=1,h<f&&(d=n[h],p=l(d))),w=t+r,t=w-t,(t=r-t)&&(b[k++]=t),t=x+w,y=t-x,r=t-y,w-=y,x-=r,r=x+w,x=t;for(;e<m;)t=c,w=t+r,t=w-t,(t=r-t)&&(b[k++]=t),t=x+w,y=t-x,r=t-y,w-=y,x-=r,r=x+w,x=t,e+=1,e<m&&(c=q[e]);for(;h<f;)t=d,w=t+r,t=w-t,(t=r-t)&&(b[k++]=t),t=x+w,y=t-x,r=t-y,w-=y,x-=r,r=x+w,x=t,h+=1,h<f&&(d=n[h]);
r&&(b[k++]=r);x&&(b[k++]=x);k||(b[k++]=0);b.length=k;return b}},{}],526:[function(a,G,C){G.exports=function(q){return 0>q?-1:0<q?1:0}},{}],527:[function(a,G,C){G.exports=function(m){return n(q(m))};var q=a("boundary-cells"),n=a("reduce-simplicial-complex")},{"boundary-cells":100,"reduce-simplicial-complex":507}],528:[function(a,G,C){G.exports=function(b,k,e,h){e=e||0;if("undefined"===typeof h){for(var l=b.length,c=h=0;c<l;++c)h=Math.max(h,b[c].length)|0;--h}if(0===b.length||1>h)return{cells:[],vertexIds:[],
vertexWeights:[]};c=+e;var g=k.length;l=n.mallocUint8(g);for(var d=0;d<g;++d)l[d]=k[d]<c|0;var p=h,r=b.length;c=n.mallocUint32(2*(p*(p+1)/2*r|0));for(d=g=0;d<r;++d){var t=b[d];p=t.length;for(var w=0;w<p;++w)for(var x=0;x<w;++x){var y=t[x],A=t[w];c[g++]=Math.min(y,A)|0;c[g++]=Math.max(y,A)|0}}m(q(c,[g/2|0,2]));for(d=p=2;d<g;d+=2)if(c[d-2]!==c[d]||c[d-1]!==c[d+1])c[p++]=c[d],c[p++]=c[d+1];c=q(c,[p/2|0,2]);e=+e;g=c.data;d=c.shape[0];p=n.mallocDouble(d);for(t=r=0;t<d;++t)w=g[2*t],x=g[2*t+1],l[w]!==l[x]&&
(y=k[w],A=k[x],g[2*r]=w,g[2*r+1]=x,p[r++]=(A-e)/(A-y));c.shape[0]=r;e=q(p,[r]);g=k.length|0;k=n.mallocInt32(2*g);d=c.shape[0];p=c.data;for(t=r=k[0]=0;t<d;++t)if(w=p[2*t],w!==r){for(k[2*r+1]=t;++r<w;)k[2*r]=t,k[2*r+1]=t;k[2*r]=t}for(k[2*r+1]=d;++r<g;)k[2*r]=k[2*r+1]=d;b=f(h)(b,c.data,k,l);g=c.shape[0]|0;d=c.data;h=Array(g);for(p=0;p<g;++p)h[p]=[d[2*p],d[2*p+1]];g=[].slice.call(e.data,0,e.shape[0]);n.free(l);n.free(c.data);n.free(e.data);n.free(k);return{cells:b,vertexIds:h,vertexWeights:g}};var q=
a("ndarray"),n=a("typedarray-pool"),m=a("ndarray-sort"),f=a("./lib/codegen")},{"./lib/codegen":529,ndarray:469,"ndarray-sort":468,"typedarray-pool":567}],529:[function(a,G,C){G.exports=function(f){var b=m[f];if(!b){b=m;var k=Array(f+1);k[0]=[[]];for(var e=1;e<=f;++e)for(var h=k[e]=n(e),l=0;l<h.length;++l);var c=["function B(C,E,i,j){","var a\x3dMath.min(i,j)|0,b\x3dMath.max(i,j)|0,l\x3dC[2*a],h\x3dC[2*a+1];","while(l\x3ch){","var m\x3d(l+h)\x3e\x3e1,v\x3dE[2*m+1];","if(v\x3d\x3d\x3db){return m}",
"if(b\x3cv){h\x3dm}else{l\x3dm+1}","}","return l;","};","function getContour",f,"d(F,E,C,S){","var n\x3dF.length,R\x3d[];","for(var i\x3d0;i\x3cn;++i){var c\x3dF[i],l\x3dc.length;"];for(e=f+1;1<e;--e){e<f+1&&c.push("else ");c.push("if(l\x3d\x3d\x3d",e,"){");h=[];for(l=0;l<e;++l)h.push("(S[c["+l+"]]\x3c\x3c"+l+")");c.push("var M\x3d",h.join("+"),";if(M\x3d\x3d\x3d0||M\x3d\x3d\x3d",(1<<e)-1,"){continue}switch(M){");h=k[e-1];for(l=0;l<h.length;++l){c.push("case ",l,":");var g=h[l];if(!(0>=g.length)){c.push("R.push(");
for(var d=0;d<g.length;++d){var p=g[d];0<d&&c.push(",");c.push("[");for(var r=0;r<p.length;++r){var t=p[r];0<r&&c.push(",");c.push("B(C,E,c[",t[0],"],c[",t[1],"])")}c.push("]")}c.push(");")}c.push("break;")}c.push("}}")}c.push("}return R;};return getContour",f,"d");k=(new Function("pool",c.join("")))(q);b=b[f]=k}return b};var q=a("typedarray-pool"),n=a("marching-simplex-table"),m={}},{"marching-simplex-table":448,"typedarray-pool":567}],530:[function(a,G,C){function q(c,g){var d=c.length,p=c.length-
g.length,r=Math.min;if(p)return p;switch(d){case 0:return 0;case 1:return c[0]-g[0];case 2:return(d=c[0]+c[1]-g[0]-g[1])?d:r(c[0],c[1])-r(g[0],g[1]);case 3:p=c[0]+c[1];var t=g[0]+g[1];if(d=p+c[2]-(t+g[2]))return d;var w=r(c[0],c[1]),x=r(g[0],g[1]);return(d=r(w,c[2])-r(x,g[2]))?d:r(w+c[2],p)-r(x+g[2],t);default:c=c.slice(0);c.sort();g=g.slice(0);g.sort();for(r=0;r<d;++r)if(p=c[r]-g[r])return p;return 0}}function n(c,g){return q(c[0],g[0])}function m(c,g){if(g){for(var d=c.length,p=Array(d),r=0;r<d;++r)p[r]=
[c[r],g[r]];p.sort(n);for(r=0;r<d;++r)c[r]=p[r][0],g[r]=p[r][1]}else c.sort(q);return c}function f(c){if(0===c.length)return[];for(var g=1,d=c.length,p=1;p<d;++p){var r=c[p];q(r,c[p-1])&&(p===g?g++:c[g++]=r)}c.length=g;return c}function b(c,g){for(var d=0,p=c.length-1,r=-1;d<=p;){var t=d+p>>1,w=q(c[t],g);0>=w?(0===w&&(r=t),d=t+1):0<w&&(p=t-1)}return r}function k(c,g){for(var d=Array(c.length),p=0,r=d.length;p<r;++p)d[p]=[];r=[];p=0;for(var t=g.length;p<t;++p)for(var w=g[p],x=w.length,y=1,A=1<<x;y<
A;++y){r.length=h.popCount(y);for(var z=0,F=0;F<x;++F)y&1<<F&&(r[z++]=w[F]);z=b(c,r);if(!(0>z))for(;!(d[z++].push(p),z>=c.length||0!==q(c[z],r)););}return d}function e(c,g){if(0>g)return[];for(var d=[],p=(1<<g+1)-1,r=0;r<c.length;++r)for(var t=c[r],w=p;w<1<<t.length;w=h.nextCombination(w)){for(var x=Array(g+1),y=0,A=0;A<t.length;++A)w&1<<A&&(x[y++]=t[A]);d.push(x)}return m(d)}"use restrict";var h=a("bit-twiddle"),l=a("union-find");C.dimension=function(c){for(var g=0,d=Math.max,p=0,r=c.length;p<r;++p)g=
d(g,c[p].length);return g-1};C.countVertices=function(c){for(var g=-1,d=Math.max,p=0,r=c.length;p<r;++p)for(var t=c[p],w=0,x=t.length;w<x;++w)g=d(g,t[w]);return g+1};C.cloneCells=function(c){for(var g=Array(c.length),d=0,p=c.length;d<p;++d)g[d]=c[d].slice(0);return g};C.compareCells=q;C.normalize=m;C.unique=f;C.findCell=b;C.incidence=k;C.dual=function(c,g){if(!g)return k(f(e(c,0)),c,0);for(var d=Array(g),p=0;p<g;++p)d[p]=[];p=0;for(g=c.length;p<g;++p)for(var r=c[p],t=0,w=r.length;t<w;++t)d[r[t]].push(p);
return d};C.explode=function(c){for(var g=[],d=0,p=c.length;d<p;++d)for(var r=c[d],t=r.length|0,w=1,x=1<<t;w<x;++w){for(var y=[],A=0;A<t;++A)w>>>A&1&&y.push(r[A]);g.push(y)}return m(g)};C.skeleton=e;C.boundary=function(c){for(var g=[],d=0,p=c.length;d<p;++d)for(var r=c[d],t=0,w=r.length;t<w;++t){for(var x=Array(r.length-1),y=0,A=0;y<w;++y)y!==t&&(x[A++]=r[y]);g.push(x)}return m(g)};C.connectedComponents=function(c,g){if(g){g=new l(g);for(var d=0;d<c.length;++d)for(var p=c[d],r=0;r<p.length;++r)for(var t=
r+1;t<p.length;++t)g.link(p[r],p[t]);p=[];r=g.ranks;for(d=0;d<r.length;++d)r[d]=-1;for(d=0;d<c.length;++d)t=g.find(c[d][0]),0>r[t]?(r[t]=p.length,p.push([c[d].slice(0)])):p[r[t]].push(c[d].slice(0));return p}g=f(m(e(c,0)));d=new l(g.length);for(p=0;p<c.length;++p)for(r=c[p],t=0;t<r.length;++t)for(var w=b(g,[r[t]]),x=t+1;x<r.length;++x)d.link(w,b(g,[r[x]]));r=[];t=d.ranks;for(p=0;p<t.length;++p)t[p]=-1;for(p=0;p<c.length;++p)w=d.find(b(g,[c[p][0]])),0>t[w]?(t[w]=r.length,r.push([c[p].slice(0)])):r[t[w]].push(c[p].slice(0));
return r}},{"bit-twiddle":97,"union-find":568}],531:[function(a,G,C){arguments[4][97][0].apply(C,arguments)},{dup:97}],532:[function(a,G,C){arguments[4][530][0].apply(C,arguments)},{"bit-twiddle":531,dup:530,"union-find":533}],533:[function(a,G,C){function q(n){this.roots=Array(n);this.ranks=Array(n);for(var m=0;m<n;++m)this.roots[m]=m,this.ranks[m]=0}"use restrict";G.exports=q;q.prototype.length=function(){return this.roots.length};q.prototype.makeSet=function(){var n=this.roots.length;this.roots.push(n);
this.ranks.push(0);return n};q.prototype.find=function(n){for(var m=this.roots;m[n]!==n;){var f=m[n];m[n]=m[f];n=f}return n};q.prototype.link=function(n,m){n=this.find(n);m=this.find(m);if(n!==m){var f=this.ranks,b=this.roots,k=f[n],e=f[m];k<e?b[n]=m:e<k?b[m]=n:(b[m]=n,++f[n])}}},{}],534:[function(a,G,C){G.exports=function(m,f,b){function k(N){if(A[N])return Infinity;var M=w[N],E=x[N];if(0>M||0>E)return Infinity;M=f[M];E=f[E];return Math.abs(q(f[N],M,E))/Math.sqrt(Math.pow(M[0]-E[0],2)+Math.pow(M[1]-
E[1],2))}function e(N,M){var E=u[N],L=u[M];u[N]=L;u[M]=E;B[E]=M;B[L]=N}function h(N){for(var M=y[u[N]];;){var E=M,L=2*N+1,Q=2*(N+1),S=N;if(L<I){var R=y[u[L]];R<E&&(S=L,E=R)}Q<I&&y[u[Q]]<E&&(S=Q);if(S===N)return N;e(N,S);N=S}}function l(N){for(var M=y[u[N]];0<N;){var E=N&1?N-1>>1:(N>>1)-1;if(0<=E&&M<y[u[E]])e(N,E),N=E;else return N}}function c(){if(0<I){var N=u[0];e(0,I-1);--I;h(0);return N}return-1}function g(N,M){var E=u[N];if(y[E]===M)return N;y[E]=-Infinity;l(N);c();y[E]=M;I+=1;return l(I-1)}function d(N){if(!A[N]){A[N]=
!0;var M=w[N];N=x[N];0<=w[N]&&(w[N]=M);0<=x[M]&&(x[M]=N);0<=B[M]&&g(B[M],k(M));0<=B[N]&&g(B[N],k(N))}}function p(N,M){if(0>N[M])return M;var E=M,L=M;do{var Q=N[L];if(!A[L]||0>Q||Q===L)break;L=Q;Q=N[L];if(!A[L]||0>Q||Q===L)break;L=Q;E=N[E]}while(E!==L);for(;M!==L;M=N[M])N[M]=L;return L}for(var r=f.length,t=m.length,w=Array(r),x=Array(r),y=Array(r),A=Array(r),z=0;z<r;++z)w[z]=x[z]=-1,y[z]=Infinity,A[z]=!1;for(z=0;z<t;++z){var F=m[z];if(2!==F.length)throw Error("Input must be a graph");var D=F[1];F=
F[0];x[F]=-1!==x[F]?-2:D;w[D]=-1!==w[D]?-2:F}var u=[],B=Array(r);for(z=0;z<r;++z)Infinity>(y[z]=k(z))?(B[z]=u.length,u.push(z)):B[z]=-1;var I=u.length;for(z=I>>1;0<=z;--z)h(z);for(;;){z=c();if(0>z||y[z]>b)break;d(z)}b=[];for(z=0;z<r;++z)A[z]||(B[z]=b.length,b.push(f[z].slice()));var J=[];m.forEach(function(N){var M=p(w,N[0]);N=p(x,N[1]);0<=M&&0<=N&&M!==N&&(M=B[M],N=B[N],M!==N&&J.push([M,N]))});n.unique(n.normalize(J));return{positions:b,edges:J}};var q=a("robust-orientation"),n=a("simplicial-complex")},
{"robust-orientation":520,"simplicial-complex":532}],535:[function(a,G,C){function q(m,f){if(f[0][0]<f[1][0]){var b=f[0];f=f[1]}else if(f[0][0]>f[1][0])b=f[1],f=f[0];else{b=Math.min(m[0][1],m[1][1]);m=Math.max(m[0][1],m[1][1]);var k=Math.min(f[0][1],f[1][1]);f=Math.max(f[0][1],f[1][1]);return m<k?m-k:b>f?b-f:m-f}m[0][1]<m[1][1]?(k=m[0],m=m[1]):(k=m[1],m=m[0]);return(k=n(f,b,k))?k:(k=n(f,b,m))?k:m-f}G.exports=function(m,f){if(f[0][0]<f[1][0]){var b=f[0];var k=f[1]}else if(f[0][0]>f[1][0])b=f[1],k=
f[0];else return q(f,m);if(m[0][0]<m[1][0])f=m[0],m=m[1];else if(m[0][0]>m[1][0])f=m[1],m=m[0];else return-q(m,f);var e=n(b,k,m),h=n(b,k,f);if(0>e){if(0>=h)return e}else if(0<e){if(0<=h)return e}else if(h)return h;e=n(m,f,k);h=n(m,f,b);if(0>e){if(0>=h)return e}else if(0<e){if(0<=h)return e}else if(h)return h;return k[0]-m[0]};var n=a("robust-orientation")},{"robust-orientation":520}],536:[function(a,G,C){arguments[4][243][0].apply(C,arguments)},{dup:243}],537:[function(a,G,C){function q(c,g,d){this.slabs=
c;this.coordinates=g;this.horizontal=d}function n(c,g){return c.y-g}function m(c,g){for(var d=null;c;){var p=c.key;if(p[0][0]<p[1][0]){var r=p[0];var t=p[1]}else r=p[1],t=p[0];r=h(r,t,g);if(0>r)c=c.left;else if(0<r)if(g[0]!==p[1][0])d=c,c=c.right;else{if(p=m(c.right,g))return p;c=c.left}else{if(g[0]!==p[1][0])return c;if(p=m(c.right,g))return p;c=c.left}}return d}function f(c,g,d,p){this.y=c;this.index=g;this.start=d;this.closed=p}function b(c,g,d,p){this.x=c;this.segment=g;this.create=d;this.index=
p}G.exports=function(c){for(var g=c.length,d=2*g,p=Array(d),r=0;r<g;++r){var t=c[r],w=t[0][0]<t[1][0];p[2*r]=new b(t[0][0],t,w,r);p[2*r+1]=new b(t[1][0],t,!w,r)}p.sort(function(z,F){var D=z.x-F.x;return D?D:(D=z.create-F.create)?D:Math.min(z.segment[0][1],z.segment[1][1])-Math.min(F.segment[0][1],F.segment[1][1])});c=e(l);g=[];t=[];w=[];for(r=0;r<d;){for(var x=p[r].x,y=[];r<d;){var A=p[r];if(A.x!==x)break;r+=1;A.segment[0][0]===A.x&&A.segment[1][0]===A.x?A.create&&(A.segment[0][1]<A.segment[1][1]?
(y.push(new f(A.segment[0][1],A.index,!0,!0)),y.push(new f(A.segment[1][1],A.index,!1,!1))):(y.push(new f(A.segment[1][1],A.index,!0,!1)),y.push(new f(A.segment[0][1],A.index,!1,!0)))):c=A.create?c.insert(A.segment,A.index):c.remove(A.segment)}g.push(c.root);t.push(x);w.push(y)}return new q(g,t,w)};var k=a("binary-search-bounds"),e=a("functional-red-black-tree"),h=a("robust-orientation"),l=a("./lib/order-segments");q.prototype.castUp=function(c){var g=k.le(this.coordinates,c[0]);if(0>g)return-1;var d=
m(this.slabs[g],c),p=-1;d&&(p=d.value);if(this.coordinates[g]===c[0]){var r=null;d&&(r=d.key);0<g&&(d=m(this.slabs[g-1],c))&&(r?0<l(d.key,r)&&(r=d.key,p=d.value):(p=d.value,r=d.key));d=this.horizontal[g];if(0<d.length){var t=k.ge(d,c[1],n);if(t<d.length){g=d[t];if(c[1]===g.y){if(g.closed)return g.index;for(;t<d.length-1&&d[t+1].y===c[1];)if(t+=1,g=d[t],g.closed)return g.index;if(g.y===c[1]&&!g.start){t+=1;if(t>=d.length)return p;g=d[t]}}g.start?r?(c=h(r[0],r[1],[c[0],g.y]),r[0][0]>r[1][0]&&(c=-c),
0<c&&(p=g.index)):p=g.index:g.y!==c[1]&&(p=g.index)}}}return p}},{"./lib/order-segments":535,"binary-search-bounds":536,"functional-red-black-tree":247,"robust-orientation":520}],538:[function(a,G,C){function q(b,k){b=f(m(b,k),[k[k.length-1]]);return b[b.length-1]}function n(b,k,e,h){k=-k/(h-k);0>k?k=0:1<k&&(k=1);h=1-k;for(var l=b.length,c=Array(l),g=0;g<l;++g)c[g]=k*b[g]+h*e[g];return c}var m=a("robust-dot-product"),f=a("robust-sum");G.exports=function(b,k){for(var e=[],h=[],l=q(b[b.length-1],k),
c=b[b.length-1],g,d=0;d<b.length;++d,c=g){g=b[d];var p=q(g,k);if(0>l&&0<p||0<l&&0>p)l=n(c,p,g,l),e.push(l),h.push(l.slice());0>p?h.push(g.slice()):0<p?e.push(g.slice()):(e.push(g.slice()),h.push(g.slice()));l=p}return{positive:e,negative:h}};G.exports.positive=function(b,k){for(var e=[],h=q(b[b.length-1],k),l=b[b.length-1],c,g=0;g<b.length;++g,l=c){c=b[g];var d=q(c,k);(0>h&&0<d||0<h&&0>d)&&e.push(n(l,d,c,h));0<=d&&e.push(c.slice());h=d}return e};G.exports.negative=function(b,k){for(var e=[],h=q(b[b.length-
1],k),l=b[b.length-1],c,g=0;g<b.length;++g,l=c){c=b[g];var d=q(c,k);(0>h&&0<d||0<h&&0>d)&&e.push(n(l,d,c,h));0>=d&&e.push(c.slice());h=d}return e}},{"robust-dot-product":517,"robust-sum":525}],539:[function(a,G,C){!function(){function q(b){var k=b;if(f[k])k=f[k];else{for(var e=k,h,l=[],c=0;e;){if(null!==(h=m.text.exec(e)))l.push(h[0]);else if(null!==(h=m.modulo.exec(e)))l.push("%");else if(null!==(h=m.placeholder.exec(e))){if(h[2]){c|=1;var g=[],d=h[2],p;if(null!==(p=m.key.exec(d)))for(g.push(p[1]);""!==
(d=d.substring(p[0].length));)if(null!==(p=m.key_access.exec(d)))g.push(p[1]);else if(null!==(p=m.index_access.exec(d)))g.push(p[1]);else throw new SyntaxError("[sprintf] failed to parse named argument key");else throw new SyntaxError("[sprintf] failed to parse named argument key");h[2]=g}else c|=2;if(3===c)throw Error("[sprintf] mixing positional and named placeholders is not (yet) supported");l.push({placeholder:h[0],param_no:h[1],keys:h[2],sign:h[3],pad_char:h[4],align:h[5],width:h[6],precision:h[7],
type:h[8]})}else throw new SyntaxError("[sprintf] unexpected placeholder");e=e.substring(h[0].length)}k=f[k]=l}e=arguments;h=1;l=k.length;g="";var r,t;for(d=0;d<l;d++)if("string"===typeof k[d])g+=k[d];else if("object"===typeof k[d]){p=k[d];if(p.keys)for(c=e[h],r=0;r<p.keys.length;r++){if(void 0==c)throw Error(q('[sprintf] Cannot access property "%s" of undefined value "%s"',p.keys[r],p.keys[r-1]));c=c[p.keys[r]]}else c=p.param_no?e[p.param_no]:e[h++];m.not_type.test(p.type)&&m.not_primitive.test(p.type)&&
c instanceof Function&&(c=c());if(m.numeric_arg.test(p.type)&&"number"!==typeof c&&isNaN(c))throw new TypeError(q("[sprintf] expecting number but found %T",c));m.number.test(p.type)&&(t=0<=c);switch(p.type){case "b":c=parseInt(c,10).toString(2);break;case "c":c=String.fromCharCode(parseInt(c,10));break;case "d":case "i":c=parseInt(c,10);break;case "j":c=JSON.stringify(c,null,p.width?parseInt(p.width):0);break;case "e":c=p.precision?parseFloat(c).toExponential(p.precision):parseFloat(c).toExponential();
break;case "f":c=p.precision?parseFloat(c).toFixed(p.precision):parseFloat(c);break;case "g":c=p.precision?String(Number(c.toPrecision(p.precision))):parseFloat(c);break;case "o":c=(parseInt(c,10)>>>0).toString(8);break;case "s":c=String(c);c=p.precision?c.substring(0,p.precision):c;break;case "t":c=String(!!c);c=p.precision?c.substring(0,p.precision):c;break;case "T":c=Object.prototype.toString.call(c).slice(8,-1).toLowerCase();c=p.precision?c.substring(0,p.precision):c;break;case "u":c=parseInt(c,
10)>>>0;break;case "v":c=c.valueOf();c=p.precision?c.substring(0,p.precision):c;break;case "x":c=(parseInt(c,10)>>>0).toString(16);break;case "X":c=(parseInt(c,10)>>>0).toString(16).toUpperCase()}if(m.json.test(p.type))g+=c;else{if(!m.number.test(p.type)||t&&!p.sign)var w="";else w=t?"+":"-",c=c.toString().replace(m.sign,"");r=p.pad_char?"0"===p.pad_char?"0":p.pad_char.charAt(1):" ";var x=p.width-(w+c).length;x=p.width?0<x?r.repeat(x):"":"";g+=p.align?w+c+x:"0"===r?w+x+c:x+w+c}}return g}function n(b,
k){return q.apply(null,[b].concat(k||[]))}var m={not_string:/[^s]/,not_bool:/[^t]/,not_type:/[^T]/,not_primitive:/[^v]/,number:/[diefg]/,numeric_arg:/[bcdiefguxX]/,json:/[j]/,not_json:/[^j]/,text:/^[^\x25]+/,modulo:/^\x25{2}/,placeholder:/^\x25(?:([1-9]\d*)\$|\(([^)]+)\))?(\+)?(0|'[^$])?(-)?(\d+)?(?:\.(\d+))?([b-gijostTuvxX])/,key:/^([a-z_][a-z_\d]*)/i,key_access:/^\.([a-z_][a-z_\d]*)/i,index_access:/^\[(\d+)\]/,sign:/^[+-]/},f=Object.create(null);"undefined"!==typeof C&&(C.sprintf=q,C.vsprintf=n);
"undefined"!==typeof window&&(window.sprintf=q,window.vsprintf=n)}()},{}],540:[function(a,G,C){var q=a("parenthesis");G.exports=function(n,m,f){if(null==n)throw Error("First argument should be a string");if(null==m)throw Error("Separator should be a string or a RegExp");if(!f)f={};else if("string"===typeof f||Array.isArray(f))f={ignore:f};null==f.escape&&(f.escape=!0);null==f.ignore?f.ignore="[] () {} \x3c\x3e \"\" '' `` “” «»".split(" "):("string"===typeof f.ignore&&(f.ignore=[f.ignore]),f.ignore=
f.ignore.map(function(l){1===l.length&&(l+=l);return l}));n=q.parse(n,{flat:!0,brackets:f.ignore});var b=n[0].split(m);if(f.escape){f=[];for(var k=0;k<b.length;k++){var e=b[k],h=b[k+1];"\\"===e[e.length-1]&&"\\"!==e[e.length-2]?(f.push(e+m+h),k++):f.push(e)}b=f}for(k=0;k<b.length;k++)n[0]=b[k],b[k]=q.stringify(n,{flat:!0});return b}},{parenthesis:477}],541:[function(a,G,C){G.exports=function(q){function n(w){var x=[w],y=[w];f[w]=b[w]=g;k[w]=!0;for(g+=1;0<y.length;){w=y[y.length-1];var A=q[w];if(e[w]<
A.length){for(var z=e[w];z<A.length;++z){var F=A[z];if(0>f[F]){f[F]=b[F]=g;k[F]=!0;g+=1;x.push(F);y.push(F);break}else k[F]&&(b[w]=Math.min(b[w],b[F])|0);0<=h[F]&&l[w].push(h[F])}e[w]=z}else{if(b[w]===f[w]){var D=[];A=[];F=0;for(z=x.length-1;0<=z;--z){var u=x[z];k[u]=!1;D.push(u);A.push(l[u]);F+=l[u].length;h[u]=d.length;if(u===w){x.length=z;break}}d.push(D);w=Array(F);for(z=0;z<A.length;z++)for(D=0;D<A[z].length;D++)w[--F]=A[z][D];p.push(w)}y.pop()}}}for(var m=q.length,f=Array(m),b=Array(m),k=Array(m),
e=Array(m),h=Array(m),l=Array(m),c=0;c<m;++c)f[c]=-1,b[c]=0,k[c]=!1,e[c]=0,h[c]=-1,l[c]=[];var g=0,d=[],p=[];for(c=0;c<m;++c)0>f[c]&&n(c);for(c=0;c<p.length;c++){var r=p[c];if(0!==r.length){r.sort(function(w,x){return w-x});m=[r[0]];for(var t=1;t<r.length;t++)r[t]!==r[t-1]&&m.push(r[t]);p[c]=m}}return{components:d,adjacencyList:p}}},{}],542:[function(a,G,C){function q(k,e){var h=k.length,l=["'use strict';"],c="surfaceNets"+k.join("_")+"d"+e;l.push("var contour\x3dgenContour({","order:[",k.join(),
"],","scalarArguments: 3,","phase:function phaseFunc(p,a,b,c) { return (p \x3e c)|0 },");"generic"===e&&l.push("getters:[0],");var g=[];e=[];for(k=0;k<h;++k)g.push("d"+k),e.push("d"+k);for(k=0;k<1<<h;++k)g.push("v"+k),e.push("v"+k);for(k=0;k<1<<h;++k)g.push("p"+k),e.push("p"+k);g.push("a","b","c");e.push("a","c");l.push("vertex:function vertexFunc(",g.join(),"){");g=[];for(k=0;k<1<<h;++k)g.push("(p"+k+"\x3c\x3c"+k+")");l.push("var m\x3d(",g.join("+"),")|0;if(m\x3d\x3d\x3d0||m\x3d\x3d\x3d",(1<<(1<<
h))-1,"){return}");g=[];var d=[];128>=1<<(1<<h)?(l.push("switch(m){"),d=l):l.push("switch(m\x3e\x3e\x3e7){");for(k=0;k<1<<(1<<h);++k){128<1<<(1<<h)&&0===k%128&&(0<g.length&&d.push("}}"),d="vExtra"+g.length,l.push("case ",k>>>7,":",d,"(m\x260x7f,",e.join(),");break;"),d=["function ",d,"(m,",e.join(),"){switch(m){"],g.push(d));d.push("case ",k&127,":");for(var p=Array(h),r=Array(h),t=Array(h),w=Array(h),x=0,y=0;y<h;++y)p[y]=[],r[y]=[],t[y]=0,w[y]=0;for(y=0;y<1<<h;++y)for(var A=0;A<h;++A){var z=y^1<<
A;if(!(z>y)&&!(k&1<<z)!==!(k&1<<y)){var F=1;k&1<<z?r[A].push("v"+z+"-v"+y):(r[A].push("v"+y+"-v"+z),F=-F);0>F?(p[A].push("-v"+y+"-v"+z),t[A]+=2):(p[A].push("v"+y+"+v"+z),t[A]-=2);x+=1;for(F=0;F<h;++F)F!==A&&(z&1<<F?w[F]+=1:--w[F])}}y=[];for(A=0;A<h;++A)0===p[A].length?y.push("d"+A+"-0.5"):(z="",0>t[A]?z=t[A]+"*c":0<t[A]&&(z="+"+t[A]+"*c"),y.push("d"+A+"-"+(.5+w[A]/x*.5)+"-"+p[A].length/x*.5+"*("+p[A].join("+")+z+")/("+r[A].join("+")+")"));d.push("a.push([",y.join(),"]);","break;")}l.push("}},");0<
g.length&&d.push("}}");e=[];for(k=0;k<1<<h-1;++k)e.push("v"+k);e.push("c0","c1","p0","p1","a","b","c");l.push("cell:function cellFunc(",e.join(),"){");h=m(h-1);l.push("if(p0){b.push(",h.map(function(D){return"["+D.map(function(u){return"v"+u})+"]"}).join(),")}else{b.push(",h.map(function(D){D=D.slice();D.reverse();return"["+D.map(function(u){return"v"+u})+"]"}).join(),")}}});function ",c,"(array,level){var verts\x3d[],cells\x3d[];contour(array,verts,cells,level);return {positions:verts,cells:cells};} return ",
c,";");for(k=0;k<g.length;++k)l.push(g[k].join(""));return(new Function("genContour",l.join("")))(n)}G.exports=function(k,e){if(0>=k.dimension)return{positions:[],cells:[]};if(1===k.dimension){k=f(k,e);e=k.length;for(var h=Array(e),l=Array(e),c=0;c<e;++c)h[c]=[k[c]],l[c]=[c];return{positions:h,cells:l}}h=k.order.join()+"-"+k.dtype;l=b[h];e=+e||0;l||(l=b[h]=q(k.order,k.dtype));return l(k,e)};var n=a("ndarray-extract-contour"),m=a("triangulate-hypercube"),f=a("zero-crossings"),b={}},{"ndarray-extract-contour":461,
"triangulate-hypercube":552,"zero-crossings":596}],543:[function(a,G,C){Object.defineProperty(C,"__esModule",{value:!0});var q=function(){return function(e,h){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e)){var l=[],c=!0,g=!1,d=void 0;try{for(var p=e[Symbol.iterator](),r;!(c=(r=p.next()).done)&&(l.push(r.value),!h||l.length!==h);c=!0);}catch(t){g=!0,d=t}finally{try{if(!c&&p["return"])p["return"]()}finally{if(g)throw d;}}return l}throw new TypeError("Invalid attempt to destructure non-iterable instance");
}}(),n=2*Math.PI,m=function(e,h,l,c,g,d,p){var r=e.x;e=e.y;r*=h;e*=l;return{x:c*r-g*e+d,y:g*r+c*e+p}},f=function(e,h){var l=1.5707963267948966===h?.551915024494:-1.5707963267948966===h?-.551915024494:4/3*Math.tan(h/4),c=Math.cos(e),g=Math.sin(e),d=Math.cos(e+h);e=Math.sin(e+h);return[{x:c-g*l,y:g+c*l},{x:d+e*l,y:e-d*l},{x:d,y:e}]},b=function(e,h,l,c){var g=e*l+h*c;1<g&&(g=1);-1>g&&(g=-1);return(0>e*c-h*l?-1:1)*Math.acos(g)},k=function(e,h,l,c,g,d,p,r,t,w,x,y){var A=Math.pow(g,2),z=Math.pow(d,2),F=
Math.pow(x,2),D=Math.pow(y,2),u=A*z-A*D-z*F;0>u&&(u=0);u=Math.sqrt(u/(A*D+z*F))*(p===r?-1:1);p=u*g/d*y;u=u*-d/g*x;e=w*p-t*u+(e+l)/2;h=t*p+w*u+(h+c)/2;c=(x-p)/g;t=(y-u)/d;g=(-x-p)/g;y=(-y-u)/d;d=b(1,0,c,t);y=b(c,t,g,y);0===r&&0<y&&(y-=n);1===r&&0>y&&(y+=n);return[e,h,d,y]};C.default=function(e){var h=e.px,l=e.py,c=e.cx,g=e.cy,d=e.rx,p=e.ry,r=e.xAxisRotation,t=void 0===r?0:r;r=e.largeArcFlag;var w=e.sweepFlag;e=[];if(0===d||0===p)return[];var x=Math.sin(t*n/360),y=Math.cos(t*n/360);t=y*(h-c)/2+x*(l-
g)/2;var A=-x*(h-c)/2+y*(l-g)/2;if(0===t&&0===A)return[];d=Math.abs(d);p=Math.abs(p);var z=Math.pow(t,2)/Math.pow(d,2)+Math.pow(A,2)/Math.pow(p,2);1<z&&(d*=Math.sqrt(z),p*=Math.sqrt(z));h=k(h,l,c,g,d,p,void 0===r?0:r,void 0===w?0:w,x,y,t,A);l=q(h,4);var F=l[0],D=l[1];h=l[2];l=l[3];c=Math.abs(l)/(n/4);1E-7>Math.abs(1-c)&&(c=1);c=Math.max(Math.ceil(c),1);l/=c;for(g=0;g<c;g++)e.push(f(h,l)),h+=l;return e.map(function(u){var B=m(u[0],d,p,y,x,F,D),I=B.x;B=B.y;var J=m(u[1],d,p,y,x,F,D),N=J.x;J=J.y;u=m(u[2],
d,p,y,x,F,D);return{x1:I,y1:B,x2:N,y2:J,x:u.x,y:u.y}})};G.exports=C.default},{}],544:[function(a,G,C){var q=a("parse-svg-path"),n=a("abs-svg-path"),m=a("normalize-svg-path"),f=a("is-svg-path"),b=a("assert");G.exports=function(k){Array.isArray(k)&&1===k.length&&"string"===typeof k[0]&&(k=k[0]);"string"===typeof k&&(b(f(k),"String is not an SVG path."),k=q(k));b(Array.isArray(k),"Argument should be a string or an array of path segments.");k=n(k);k=m(k);if(!k.length)return[0,0,0,0];for(var e=[Infinity,
Infinity,-Infinity,-Infinity],h=0,l=k.length;h<l;h++)for(var c=k[h].slice(1),g=0;g<c.length;g+=2)c[g+0]<e[0]&&(e[0]=c[g+0]),c[g+1]<e[1]&&(e[1]=c[g+1]),c[g+0]>e[2]&&(e[2]=c[g+0]),c[g+1]>e[3]&&(e[3]=c[g+1]);return e}},{"abs-svg-path":65,assert:73,"is-svg-path":445,"normalize-svg-path":545,"parse-svg-path":479}],545:[function(a,G,C){function q(f,b,k,e){return["C",f,b,k,e,k,e]}function n(f,b,k,e,h,l){return["C",f/3+2/3*k,b/3+2/3*e,h/3+2/3*k,l/3+2/3*e,h,l]}G.exports=function(f){for(var b,k=[],e=0,h=0,
l=0,c=0,g=null,d=null,p=0,r=0,t=0,w=f.length;t<w;t++){var x=f[t],y=x[0];switch(y){case "M":l=x[1];c=x[2];break;case "A":var A=m({px:p,py:r,cx:x[6],cy:x[7],rx:x[1],ry:x[2],xAxisRotation:x[3],largeArcFlag:x[4],sweepFlag:x[5]});if(!A.length)continue;for(b=0;b<A.length;b++)x=A[b],x=["C",x.x1,x.y1,x.x2,x.y2,x.x,x.y],b<A.length-1&&k.push(x);break;case "S":A=p;if("C"==b||"S"==b)A+=A-e,r+=r-h;x=["C",A,r,x[1],x[2],x[3],x[4]];break;case "T":"Q"==b||"T"==b?(g=2*p-g,d=2*r-d):(g=p,d=r);x=n(p,r,g,d,x[1],x[2]);
break;case "Q":g=x[1];d=x[2];x=n(p,r,x[1],x[2],x[3],x[4]);break;case "L":x=q(p,r,x[1],x[2]);break;case "H":x=q(p,r,x[1],r);break;case "V":x=q(p,r,p,x[1]);break;case "Z":x=q(p,r,l,c)}b=y;p=x[x.length-2];r=x[x.length-1];4<x.length?(e=x[x.length-4],h=x[x.length-3]):(e=p,h=r);k.push(x)}return k};var m=a("svg-arc-to-cubic-bezier")},{"svg-arc-to-cubic-bezier":543}],546:[function(a,G,C){function q(){if(null!=l)return l;var c=document.createElement("canvas").getContext("2d");c.canvas.width=c.canvas.height=
1;if(!window.Path2D)return l=!1;var g=new Path2D("M0,0h1v1h-1v-1Z");c.fillStyle="black";c.fill(g);return l=(c=c.getImageData(0,0,1,1))&&c.data&&255===c.data[3]}var n=a("svg-path-bounds"),m=a("parse-svg-path"),f=a("draw-svg-path"),b=a("is-svg-path"),k=a("bitmap-sdf"),e=document.createElement("canvas"),h=e.getContext("2d");G.exports=function(c,g){if(!b(c))throw Error("Argument should be valid svg path string");g||(g={});if(g.shape){var d=g.shape[0];var p=g.shape[1]}else d=e.width=g.w||g.width||200,
p=e.height=g.h||g.height||200;var r=Math.min(d,p),t=g.stroke||0,w=g.viewbox||g.viewBox||n(c);w=[d/(w[2]-w[0]),p/(w[3]-w[1])];w=Math.min(w[0]||0,w[1]||0)/2;h.fillStyle="black";h.fillRect(0,0,d,p);h.fillStyle="white";t&&("number"!=typeof t&&(t=1),h.strokeStyle=0<t?"white":"black",h.lineWidth=Math.abs(t));h.translate(.5*d,.5*p);h.scale(w,w);q()?(c=new Path2D(c),h.fill(c),t&&h.stroke(c)):(c=m(c),f(h,c),h.fill(),t&&h.stroke());h.setTransform(1,0,0,1,0,0);return k(h,{cutoff:null!=g.cutoff?g.cutoff:.5,radius:null!=
g.radius?g.radius:.5*r})};var l},{"bitmap-sdf":98,"draw-svg-path":174,"is-svg-path":445,"parse-svg-path":479,"svg-path-bounds":544}],547:[function(a,G,C){(function(q){function n(b,k,e){e=e||{};var h=f[b];h||(h=f[b]={" ":{data:new Float32Array(0),shape:.2}});var l=h[k];if(!l)if(1>=k.length||!/\d/.test(k)){l=m(k,{triangles:!0,font:b,textAlign:e.textAlign||"left",textBaseline:"alphabetic",styletags:{breaklines:!0,bolds:!0,italics:!0,subscripts:!0,superscripts:!0}});e=l.cells;l=l.positions;for(var c=
new Float32Array(6*e.length),g=b=0,d=0;d<e.length;++d)for(var p=e[d],r=0;3>r;++r){var t=l[p[r]];c[b++]=t[0];c[b++]=t[1]+1.4;g=Math.max(t[0],g)}l=h[k]={data:c,shape:g}}else{g=k.split(/(\d|\s)/);e=Array(g.length);for(c=l=d=0;c<g.length;++c)e[c]=n(b,g[c]),d+=e[c].data.length,l+=e[c].shape,0<c&&(l+=.02);b=new Float32Array(d);g=0;d=-.5*l;for(c=0;c<e.length;++c){p=e[c].data;for(r=0;r<p.length;r+=2)b[g++]=p[r]+d,b[g++]=p[r+1];d+=e[c].shape+.02}l=h[k]={data:b,shape:l}}return l}G.exports=n;var m=a("vectorize-text");
q=window||q.global||{};var f=q.__TEXT_CACHE||{};q.__TEXT_CACHE={}}).call(this,a("_process"))},{_process:500,"vectorize-text":572}],548:[function(a,G,C){(function(q){function n(V,X){var ba,aa;V=V?V:"";X=X||{};if(V instanceof n)return V;if(!(this instanceof n))return new n(V,X);var ka=V;var ha={r:0,g:0,b:0};var ca=1;var sa=ba=!1;if("string"==typeof ka)a:{ka=ka.replace(J,"").replace(N,"").toLowerCase();var ma=!1;if(R[ka])ka=R[ka],ma=!0;else if("transparent"==ka){ka={r:0,g:0,b:0,a:0,format:"name"};break a}ka=
(aa=T.rgb.exec(ka))?{r:aa[1],g:aa[2],b:aa[3]}:(aa=T.rgba.exec(ka))?{r:aa[1],g:aa[2],b:aa[3],a:aa[4]}:(aa=T.hsl.exec(ka))?{h:aa[1],s:aa[2],l:aa[3]}:(aa=T.hsla.exec(ka))?{h:aa[1],s:aa[2],l:aa[3],a:aa[4]}:(aa=T.hsv.exec(ka))?{h:aa[1],s:aa[2],v:aa[3]}:(aa=T.hsva.exec(ka))?{h:aa[1],s:aa[2],v:aa[3],a:aa[4]}:(aa=T.hex8.exec(ka))?{r:parseInt(aa[1],16),g:parseInt(aa[2],16),b:parseInt(aa[3],16),a:parseInt(aa[4],16)/255,format:ma?"name":"hex8"}:(aa=T.hex6.exec(ka))?{r:parseInt(aa[1],16),g:parseInt(aa[2],16),
b:parseInt(aa[3],16),format:ma?"name":"hex"}:(aa=T.hex4.exec(ka))?{r:parseInt(aa[1]+""+aa[1],16),g:parseInt(aa[2]+""+aa[2],16),b:parseInt(aa[3]+""+aa[3],16),a:parseInt(aa[4]+""+aa[4],16)/255,format:ma?"name":"hex8"}:(aa=T.hex3.exec(ka))?{r:parseInt(aa[1]+""+aa[1],16),g:parseInt(aa[2]+""+aa[2],16),b:parseInt(aa[3]+""+aa[3],16),format:ma?"name":"hex"}:!1}if("object"==typeof ka){if(I(ka.r)&&I(ka.g)&&I(ka.b))ha=ka.g,ba=ka.b,ha={r:255*D(ka.r,255),g:255*D(ha,255),b:255*D(ba,255)},ba=!0,sa="%"===String(ka.r).substr(-1)?
"prgb":"rgb";else if(I(ka.h)&&I(ka.s)&&I(ka.v)){ha=B(ka.s);sa=B(ka.v);aa=ka.h;ba=ha;ha=sa;aa=6*D(aa,360);ba=D(ba,100);ha=D(ha,100);sa=q.floor(aa);var ra=aa-sa;aa=ha*(1-ba);ma=ha*(1-ra*ba);ba=ha*(1-(1-ra)*ba);sa%=6;ha={r:255*[ha,ma,aa,aa,ba,ha][sa],g:255*[ba,ha,ha,ma,aa,aa][sa],b:255*[aa,aa,ba,ha,ha,ma][sa]};ba=!0;sa="hsv"}else I(ka.h)&&I(ka.s)&&I(ka.l)&&(ha=B(ka.s),ba=B(ka.l),ha=f(ka.h,ha,ba),ba=!0,sa="hsl");ka.hasOwnProperty("a")&&(ca=ka.a)}ca=F(ca);ka=ka.format||sa;sa=L(255,Q(ha.r,0));aa=L(255,
Q(ha.g,0));ha=L(255,Q(ha.b,0));this._originalInput=V;this._r=sa;this._g=aa;this._b=ha;this._a=ca;this._roundA=E(100*this._a)/100;this._format=X.format||ka;this._gradientType=X.gradientType;1>this._r&&(this._r=E(this._r));1>this._g&&(this._g=E(this._g));1>this._b&&(this._b=E(this._b));this._ok=ba;this._tc_id=M++}function m(V,X,ba){V=D(V,255);X=D(X,255);ba=D(ba,255);var aa=Q(V,X,ba),ka=L(V,X,ba),ha=(aa+ka)/2;if(aa==ka)var ca=ka=0;else{var sa=aa-ka;ka=.5<ha?sa/(2-aa-ka):sa/(aa+ka);switch(aa){case V:ca=
(X-ba)/sa+(X<ba?6:0);break;case X:ca=(ba-V)/sa+2;break;case ba:ca=(V-X)/sa+4}ca/=6}return{h:ca,s:ka,l:ha}}function f(V,X,ba){function aa(ca,sa,ma){0>ma&&(ma+=1);1<ma&&--ma;return ma<1/6?ca+6*(sa-ca)*ma:.5>ma?sa:ma<2/3?ca+(sa-ca)*(2/3-ma)*6:ca}V=D(V,360);X=D(X,100);ba=D(ba,100);if(0===X)ba=X=V=ba;else{var ka=.5>ba?ba*(1+X):ba+X-ba*X,ha=2*ba-ka;ba=aa(ha,ka,V+1/3);X=aa(ha,ka,V);V=aa(ha,ka,V-1/3)}return{r:255*ba,g:255*X,b:255*V}}function b(V,X,ba){V=D(V,255);X=D(X,255);ba=D(ba,255);var aa=Q(V,X,ba),ka=
L(V,X,ba),ha=aa-ka;if(aa==ka)var ca=0;else{switch(aa){case V:ca=(X-ba)/ha+(X<ba?6:0);break;case X:ca=(ba-V)/ha+2;break;case ba:ca=(V-X)/ha+4}ca/=6}return{h:ca,s:0===aa?0:ha/aa,v:aa}}function k(V,X,ba,aa){V=[u(E(V).toString(16)),u(E(X).toString(16)),u(E(ba).toString(16))];return aa&&V[0].charAt(0)==V[0].charAt(1)&&V[1].charAt(0)==V[1].charAt(1)&&V[2].charAt(0)==V[2].charAt(1)?V[0].charAt(0)+V[1].charAt(0)+V[2].charAt(0):V.join("")}function e(V,X,ba,aa){return[u(q.round(255*parseFloat(aa)).toString(16)),
u(E(V).toString(16)),u(E(X).toString(16)),u(E(ba).toString(16))].join("")}function h(V,X){X=0===X?0:X||10;V=n(V).toHsl();V.s-=X/100;V.s=L(1,Q(0,V.s));return n(V)}function l(V,X){X=0===X?0:X||10;V=n(V).toHsl();V.s+=X/100;V.s=L(1,Q(0,V.s));return n(V)}function c(V){return n(V).desaturate(100)}function g(V,X){X=0===X?0:X||10;V=n(V).toHsl();V.l+=X/100;V.l=L(1,Q(0,V.l));return n(V)}function d(V,X){X=0===X?0:X||10;V=n(V).toRgb();V.r=Q(0,L(255,V.r-E(255*-(X/100))));V.g=Q(0,L(255,V.g-E(255*-(X/100))));V.b=
Q(0,L(255,V.b-E(255*-(X/100))));return n(V)}function p(V,X){X=0===X?0:X||10;V=n(V).toHsl();V.l-=X/100;V.l=L(1,Q(0,V.l));return n(V)}function r(V,X){V=n(V).toHsl();X=(V.h+X)%360;V.h=0>X?360+X:X;return n(V)}function t(V){V=n(V).toHsl();V.h=(V.h+180)%360;return n(V)}function w(V){var X=n(V).toHsl(),ba=X.h;return[n(V),n({h:(ba+120)%360,s:X.s,l:X.l}),n({h:(ba+240)%360,s:X.s,l:X.l})]}function x(V){var X=n(V).toHsl(),ba=X.h;return[n(V),n({h:(ba+90)%360,s:X.s,l:X.l}),n({h:(ba+180)%360,s:X.s,l:X.l}),n({h:(ba+
270)%360,s:X.s,l:X.l})]}function y(V){var X=n(V).toHsl(),ba=X.h;return[n(V),n({h:(ba+72)%360,s:X.s,l:X.l}),n({h:(ba+216)%360,s:X.s,l:X.l})]}function A(V,X,ba){X=X||6;ba=ba||30;var aa=n(V).toHsl();ba=360/ba;V=[n(V)];for(aa.h=(aa.h-(ba*X>>1)+720)%360;--X;)aa.h=(aa.h+ba)%360,V.push(n(aa));return V}function z(V,X){X=X||6;var ba=n(V).toHsv();V=ba.h;var aa=ba.s;ba=ba.v;for(var ka=[],ha=1/X;X--;)ka.push(n({h:V,s:aa,v:ba})),ba=(ba+ha)%1;return ka}function F(V){V=parseFloat(V);if(isNaN(V)||0>V||1<V)V=1;return V}
function D(V,X){var ba=V;"string"==typeof ba&&-1!=ba.indexOf(".")&&1===parseFloat(ba)&&(V="100%");ba="string"===typeof V&&-1!=V.indexOf("%");V=L(X,Q(0,parseFloat(V)));ba&&(V=parseInt(V*X,10)/100);return 1E-6>q.abs(V-X)?1:V%X/parseFloat(X)}function u(V){return 1==V.length?"0"+V:""+V}function B(V){1>=V&&(V=100*V+"%");return V}function I(V){return!!T.CSS_UNIT.exec(V)}var J=/^\s+/,N=/\s+$/,M=0,E=q.round,L=q.min,Q=q.max,S=q.random;n.prototype={isDark:function(){return 128>this.getBrightness()},isLight:function(){return!this.isDark()},
isValid:function(){return this._ok},getOriginalInput:function(){return this._originalInput},getFormat:function(){return this._format},getAlpha:function(){return this._a},getBrightness:function(){var V=this.toRgb();return(299*V.r+587*V.g+114*V.b)/1E3},getLuminance:function(){var V=this.toRgb();var X=V.r/255;var ba=V.g/255;V=V.b/255;X=.03928>=X?X/12.92:q.pow((X+.055)/1.055,2.4);ba=.03928>=ba?ba/12.92:q.pow((ba+.055)/1.055,2.4);V=.03928>=V?V/12.92:q.pow((V+.055)/1.055,2.4);return.2126*X+.7152*ba+.0722*
V},setAlpha:function(V){this._a=F(V);this._roundA=E(100*this._a)/100;return this},toHsv:function(){var V=b(this._r,this._g,this._b);return{h:360*V.h,s:V.s,v:V.v,a:this._a}},toHsvString:function(){var V=b(this._r,this._g,this._b),X=E(360*V.h),ba=E(100*V.s);V=E(100*V.v);return 1==this._a?"hsv("+X+", "+ba+"%, "+V+"%)":"hsva("+X+", "+ba+"%, "+V+"%, "+this._roundA+")"},toHsl:function(){var V=m(this._r,this._g,this._b);return{h:360*V.h,s:V.s,l:V.l,a:this._a}},toHslString:function(){var V=m(this._r,this._g,
this._b),X=E(360*V.h),ba=E(100*V.s);V=E(100*V.l);return 1==this._a?"hsl("+X+", "+ba+"%, "+V+"%)":"hsla("+X+", "+ba+"%, "+V+"%, "+this._roundA+")"},toHex:function(V){return k(this._r,this._g,this._b,V)},toHexString:function(V){return"#"+this.toHex(V)},toHex8:function(V){var X=this._g,ba=this._b,aa=this._a;X=[u(E(this._r).toString(16)),u(E(X).toString(16)),u(E(ba).toString(16)),u(q.round(255*parseFloat(aa)).toString(16))];V=V&&X[0].charAt(0)==X[0].charAt(1)&&X[1].charAt(0)==X[1].charAt(1)&&X[2].charAt(0)==
X[2].charAt(1)&&X[3].charAt(0)==X[3].charAt(1)?X[0].charAt(0)+X[1].charAt(0)+X[2].charAt(0)+X[3].charAt(0):X.join("");return V},toHex8String:function(V){return"#"+this.toHex8(V)},toRgb:function(){return{r:E(this._r),g:E(this._g),b:E(this._b),a:this._a}},toRgbString:function(){return 1==this._a?"rgb("+E(this._r)+", "+E(this._g)+", "+E(this._b)+")":"rgba("+E(this._r)+", "+E(this._g)+", "+E(this._b)+", "+this._roundA+")"},toPercentageRgb:function(){return{r:E(100*D(this._r,255))+"%",g:E(100*D(this._g,
255))+"%",b:E(100*D(this._b,255))+"%",a:this._a}},toPercentageRgbString:function(){return 1==this._a?"rgb("+E(100*D(this._r,255))+"%, "+E(100*D(this._g,255))+"%, "+E(100*D(this._b,255))+"%)":"rgba("+E(100*D(this._r,255))+"%, "+E(100*D(this._g,255))+"%, "+E(100*D(this._b,255))+"%, "+this._roundA+")"},toName:function(){return 0===this._a?"transparent":1>this._a?!1:O[k(this._r,this._g,this._b,!0)]||!1},toFilter:function(V){var X="#"+e(this._r,this._g,this._b,this._a),ba=X,aa=this._gradientType?"GradientType \x3d 1, ":
"";V&&(V=n(V),ba="#"+e(V._r,V._g,V._b,V._a));return"progid:DXImageTransform.Microsoft.gradient("+aa+"startColorstr\x3d"+X+",endColorstr\x3d"+ba+")"},toString:function(V){var X=!!V;V=V||this._format;var ba=!1,aa=1>this._a&&0<=this._a;if(!X&&aa&&("hex"===V||"hex6"===V||"hex3"===V||"hex4"===V||"hex8"===V||"name"===V))return"name"===V&&0===this._a?this.toName():this.toRgbString();"rgb"===V&&(ba=this.toRgbString());"prgb"===V&&(ba=this.toPercentageRgbString());if("hex"===V||"hex6"===V)ba=this.toHexString();
"hex3"===V&&(ba=this.toHexString(!0));"hex4"===V&&(ba=this.toHex8String(!0));"hex8"===V&&(ba=this.toHex8String());"name"===V&&(ba=this.toName());"hsl"===V&&(ba=this.toHslString());"hsv"===V&&(ba=this.toHsvString());return ba||this.toHexString()},clone:function(){return n(this.toString())},_applyModification:function(V,X){V=V.apply(null,[this].concat([].slice.call(X)));this._r=V._r;this._g=V._g;this._b=V._b;this.setAlpha(V._a);return this},lighten:function(){return this._applyModification(g,arguments)},
brighten:function(){return this._applyModification(d,arguments)},darken:function(){return this._applyModification(p,arguments)},desaturate:function(){return this._applyModification(h,arguments)},saturate:function(){return this._applyModification(l,arguments)},greyscale:function(){return this._applyModification(c,arguments)},spin:function(){return this._applyModification(r,arguments)},_applyCombination:function(V,X){return V.apply(null,[this].concat([].slice.call(X)))},analogous:function(){return this._applyCombination(A,
arguments)},complement:function(){return this._applyCombination(t,arguments)},monochromatic:function(){return this._applyCombination(z,arguments)},splitcomplement:function(){return this._applyCombination(y,arguments)},triad:function(){return this._applyCombination(w,arguments)},tetrad:function(){return this._applyCombination(x,arguments)}};n.fromRatio=function(V,X){if("object"==typeof V){var ba={},aa;for(aa in V)V.hasOwnProperty(aa)&&(ba[aa]="a"===aa?V[aa]:B(V[aa]));V=ba}return n(V,X)};n.equals=function(V,
X){return V&&X?n(V).toRgbString()==n(X).toRgbString():!1};n.random=function(){return n.fromRatio({r:S(),g:S(),b:S()})};n.mix=function(V,X,ba){ba=0===ba?0:ba||50;V=n(V).toRgb();X=n(X).toRgb();ba/=100;return n({r:(X.r-V.r)*ba+V.r,g:(X.g-V.g)*ba+V.g,b:(X.b-V.b)*ba+V.b,a:(X.a-V.a)*ba+V.a})};n.readability=function(V,X){V=n(V);X=n(X);return(q.max(V.getLuminance(),X.getLuminance())+.05)/(q.min(V.getLuminance(),X.getLuminance())+.05)};n.isReadable=function(V,X,ba){V=n.readability(V,X);X=!1;var aa=ba||{level:"AA",
size:"small"};ba=(aa.level||"AA").toUpperCase();aa=(aa.size||"small").toLowerCase();"AA"!==ba&&"AAA"!==ba&&(ba="AA");"small"!==aa&&"large"!==aa&&(aa="small");switch(ba+aa){case "AAsmall":case "AAAlarge":X=4.5<=V;break;case "AAlarge":X=3<=V;break;case "AAAsmall":X=7<=V}return X};n.mostReadable=function(V,X,ba){var aa=null,ka=0;ba=ba||{};var ha=ba.includeFallbackColors;var ca=ba.level;var sa=ba.size;for(var ma=0;ma<X.length;ma++){var ra=n.readability(V,X[ma]);ra>ka&&(ka=ra,aa=n(X[ma]))}if(n.isReadable(V,
aa,{level:ca,size:sa})||!ha)return aa;ba.includeFallbackColors=!1;return n.mostReadable(V,["#fff","#000"],ba)};var R=n.names={aliceblue:"f0f8ff",antiquewhite:"faebd7",aqua:"0ff",aquamarine:"7fffd4",azure:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"000",blanchedalmond:"ffebcd",blue:"00f",blueviolet:"8a2be2",brown:"a52a2a",burlywood:"deb887",burntsienna:"ea7e5d",cadetblue:"5f9ea0",chartreuse:"7fff00",chocolate:"d2691e",coral:"ff7f50",cornflowerblue:"6495ed",cornsilk:"fff8dc",crimson:"dc143c",cyan:"0ff",
darkblue:"00008b",darkcyan:"008b8b",darkgoldenrod:"b8860b",darkgray:"a9a9a9",darkgreen:"006400",darkgrey:"a9a9a9",darkkhaki:"bdb76b",darkmagenta:"8b008b",darkolivegreen:"556b2f",darkorange:"ff8c00",darkorchid:"9932cc",darkred:"8b0000",darksalmon:"e9967a",darkseagreen:"8fbc8f",darkslateblue:"483d8b",darkslategray:"2f4f4f",darkslategrey:"2f4f4f",darkturquoise:"00ced1",darkviolet:"9400d3",deeppink:"ff1493",deepskyblue:"00bfff",dimgray:"696969",dimgrey:"696969",dodgerblue:"1e90ff",firebrick:"b22222",
floralwhite:"fffaf0",forestgreen:"228b22",fuchsia:"f0f",gainsboro:"dcdcdc",ghostwhite:"f8f8ff",gold:"ffd700",goldenrod:"daa520",gray:"808080",green:"008000",greenyellow:"adff2f",grey:"808080",honeydew:"f0fff0",hotpink:"ff69b4",indianred:"cd5c5c",indigo:"4b0082",ivory:"fffff0",khaki:"f0e68c",lavender:"e6e6fa",lavenderblush:"fff0f5",lawngreen:"7cfc00",lemonchiffon:"fffacd",lightblue:"add8e6",lightcoral:"f08080",lightcyan:"e0ffff",lightgoldenrodyellow:"fafad2",lightgray:"d3d3d3",lightgreen:"90ee90",
lightgrey:"d3d3d3",lightpink:"ffb6c1",lightsalmon:"ffa07a",lightseagreen:"20b2aa",lightskyblue:"87cefa",lightslategray:"789",lightslategrey:"789",lightsteelblue:"b0c4de",lightyellow:"ffffe0",lime:"0f0",limegreen:"32cd32",linen:"faf0e6",magenta:"f0f",maroon:"800000",mediumaquamarine:"66cdaa",mediumblue:"0000cd",mediumorchid:"ba55d3",mediumpurple:"9370db",mediumseagreen:"3cb371",mediumslateblue:"7b68ee",mediumspringgreen:"00fa9a",mediumturquoise:"48d1cc",mediumvioletred:"c71585",midnightblue:"191970",
mintcream:"f5fffa",mistyrose:"ffe4e1",moccasin:"ffe4b5",navajowhite:"ffdead",navy:"000080",oldlace:"fdf5e6",olive:"808000",olivedrab:"6b8e23",orange:"ffa500",orangered:"ff4500",orchid:"da70d6",palegoldenrod:"eee8aa",palegreen:"98fb98",paleturquoise:"afeeee",palevioletred:"db7093",papayawhip:"ffefd5",peachpuff:"ffdab9",peru:"cd853f",pink:"ffc0cb",plum:"dda0dd",powderblue:"b0e0e6",purple:"800080",rebeccapurple:"663399",red:"f00",rosybrown:"bc8f8f",royalblue:"4169e1",saddlebrown:"8b4513",salmon:"fa8072",
sandybrown:"f4a460",seagreen:"2e8b57",seashell:"fff5ee",sienna:"a0522d",silver:"c0c0c0",skyblue:"87ceeb",slateblue:"6a5acd",slategray:"708090",slategrey:"708090",snow:"fffafa",springgreen:"00ff7f",steelblue:"4682b4",tan:"d2b48c",teal:"008080",thistle:"d8bfd8",tomato:"ff6347",turquoise:"40e0d0",violet:"ee82ee",wheat:"f5deb3",white:"fff",whitesmoke:"f5f5f5",yellow:"ff0",yellowgreen:"9acd32"},O=n.hexNames=function(V){var X={},ba;for(ba in V)V.hasOwnProperty(ba)&&(X[V[ba]]=ba);return X}(R),T={CSS_UNIT:/(?:[-\+]?\d*\.\d+%?)|(?:[-\+]?\d+%?)/,
rgb:/rgb[\s|\(]+((?:[-\+]?\d*\.\d+%?)|(?:[-\+]?\d+%?))[,|\s]+((?:[-\+]?\d*\.\d+%?)|(?:[-\+]?\d+%?))[,|\s]+((?:[-\+]?\d*\.\d+%?)|(?:[-\+]?\d+%?))\s*\)?/,rgba:/rgba[\s|\(]+((?:[-\+]?\d*\.\d+%?)|(?:[-\+]?\d+%?))[,|\s]+((?:[-\+]?\d*\.\d+%?)|(?:[-\+]?\d+%?))[,|\s]+((?:[-\+]?\d*\.\d+%?)|(?:[-\+]?\d+%?))[,|\s]+((?:[-\+]?\d*\.\d+%?)|(?:[-\+]?\d+%?))\s*\)?/,hsl:/hsl[\s|\(]+((?:[-\+]?\d*\.\d+%?)|(?:[-\+]?\d+%?))[,|\s]+((?:[-\+]?\d*\.\d+%?)|(?:[-\+]?\d+%?))[,|\s]+((?:[-\+]?\d*\.\d+%?)|(?:[-\+]?\d+%?))\s*\)?/,
hsla:/hsla[\s|\(]+((?:[-\+]?\d*\.\d+%?)|(?:[-\+]?\d+%?))[,|\s]+((?:[-\+]?\d*\.\d+%?)|(?:[-\+]?\d+%?))[,|\s]+((?:[-\+]?\d*\.\d+%?)|(?:[-\+]?\d+%?))[,|\s]+((?:[-\+]?\d*\.\d+%?)|(?:[-\+]?\d+%?))\s*\)?/,hsv:/hsv[\s|\(]+((?:[-\+]?\d*\.\d+%?)|(?:[-\+]?\d+%?))[,|\s]+((?:[-\+]?\d*\.\d+%?)|(?:[-\+]?\d+%?))[,|\s]+((?:[-\+]?\d*\.\d+%?)|(?:[-\+]?\d+%?))\s*\)?/,hsva:/hsva[\s|\(]+((?:[-\+]?\d*\.\d+%?)|(?:[-\+]?\d+%?))[,|\s]+((?:[-\+]?\d*\.\d+%?)|(?:[-\+]?\d+%?))[,|\s]+((?:[-\+]?\d*\.\d+%?)|(?:[-\+]?\d+%?))[,|\s]+((?:[-\+]?\d*\.\d+%?)|(?:[-\+]?\d+%?))\s*\)?/,
hex3:/^#?([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,hex6:/^#?([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})$/,hex4:/^#?([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,hex8:/^#?([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})$/};"undefined"!==typeof G&&G.exports?G.exports=n:window.tinycolor=n})(Math)},{}],549:[function(a,G,C){function q(m){if(m.length){if(m instanceof Float32Array)return m;var f=new Float32Array(m);f.set(m);return f}n[0]=m;return n[0]}G.exports=
q;G.exports.float32=G.exports.float=q;G.exports.fract32=G.exports.fract=function(m){if(m.length){for(var f=q(m),b=0,k=f.length;b<k;b++)f[b]=m[b]-f[b];return f}return q(m-q(m))};var n=new Float32Array(1)},{}],550:[function(a,G,C){function q(b,k){k=m(getComputedStyle(b).getPropertyValue(k));return k[0]*n(k[1],b)}function n(b,k){k=k||document.body;b=(b||"px").trim().toLowerCase();if(k===window||k===document)k=document.body;switch(b){case "%":return k.clientHeight/100;case "ch":case "ex":var e=document.createElement("div");
e.style["font-size"]="128"+b;k.appendChild(e);b=q(e,"font-size")/128;k.removeChild(e);return b;case "em":return q(k,"font-size");case "rem":return q(document.body,"font-size");case "vw":return window.innerWidth/100;case "vh":return window.innerHeight/100;case "vmin":return Math.min(window.innerWidth,window.innerHeight)/100;case "vmax":return Math.max(window.innerWidth,window.innerHeight)/100;case "in":return f;case "cm":return f/2.54;case "mm":return f/25.4;case "pt":return f/72;case "pc":return f/
6}return 1}var m=a("parse-unit");G.exports=n;var f=96},{"parse-unit":480}],551:[function(a,G,C){(function(q,n){"object"===typeof C&&"undefined"!==typeof G?n(C):(q=q||self,n(q.topojson=q.topojson||{}))})(this,function(q){function n(p){return p}function m(p){if(null==p)return n;var r,t,w=p.scale[0],x=p.scale[1],y=p.translate[0],A=p.translate[1];return function(z,F){F||(r=t=0);F=2;var D=z.length,u=Array(D);u[0]=(r+=z[0])*w+y;for(u[1]=(t+=z[1])*x+A;F<D;)u[F]=z[F],++F;return u}}function f(p){function r(D){D=
w(D);D[0]<y&&(y=D[0]);D[0]>z&&(z=D[0]);D[1]<A&&(A=D[1]);D[1]>F&&(F=D[1])}function t(D){switch(D.type){case "GeometryCollection":D.geometries.forEach(t);break;case "Point":r(D.coordinates);break;case "MultiPoint":D.coordinates.forEach(r)}}var w=m(p.transform),x,y=Infinity,A=y,z=-y,F=-y;p.arcs.forEach(function(D){for(var u=-1,B=D.length,I;++u<B;)I=w(D[u],u),I[0]<y&&(y=I[0]),I[0]>z&&(z=I[0]),I[1]<A&&(A=I[1]),I[1]>F&&(F=I[1])});for(x in p.objects)t(p.objects[x]);return[y,A,z,F]}function b(p,r){var t=
r.id,w=r.bbox,x=null==r.properties?{}:r.properties;p=k(p,r);return null==t&&null==w?{type:"Feature",properties:x,geometry:p}:null==w?{type:"Feature",id:t,properties:x,geometry:p}:{type:"Feature",id:t,bbox:w,properties:x,geometry:p}}function k(p,r){function t(D){return z(D)}function w(D){for(var u=[],B=0,I=D.length;B<I;++B){var J=D[B],N=u;N.length&&N.pop();for(var M=F[0>J?~J:J],E=0,L=M.length;E<L;++E)N.push(z(M[E],E));if(0>J)for(J=N,N=J.length,M=N-L;M<--N;)L=J[M],J[M++]=J[N],J[N]=L}2>u.length&&u.push(u[0]);
return u}function x(D){for(D=w(D);4>D.length;)D.push(D[0]);return D}function y(D){return D.map(x)}function A(D){var u=D.type;switch(u){case "GeometryCollection":return{type:u,geometries:D.geometries.map(A)};case "Point":D=z(D.coordinates);break;case "MultiPoint":D=D.coordinates.map(t);break;case "LineString":D=w(D.arcs);break;case "MultiLineString":D=D.arcs.map(w);break;case "Polygon":D=y(D.arcs);break;case "MultiPolygon":D=D.arcs.map(y);break;default:return null}return{type:u,coordinates:D}}var z=
m(p.transform),F=p.arcs;return A(r)}function e(p,r){function t(D){var u=p.arcs[0>D?~D:D],B=u[0];if(p.transform){var I=[0,0];u.forEach(function(J){I[0]+=J[0];I[1]+=J[1]})}else I=u[u.length-1];return 0>D?[I,B]:[B,I]}function w(D,u){for(var B in D){var I=D[B];delete u[I.start];delete I.start;delete I.end;I.forEach(function(J){x[0>J?~J:J]=1});z.push(I)}}var x={},y={},A={},z=[],F=-1;r.forEach(function(D,u){var B=p.arcs[0>D?~D:D];3>B.length&&!B[1][0]&&!B[1][1]&&(B=r[++F],r[F]=D,r[u]=B)});r.forEach(function(D){var u=
t(D),B=u[0],I=u[1];(u=A[B])?(delete A[u.end],u.push(D),u.end=I,(D=y[I])?(delete y[D.start],B=D===u?u:u.concat(D),y[B.start=u.start]=A[B.end=D.end]=B):y[u.start]=A[u.end]=u):(u=y[I])?(delete y[u.start],u.unshift(D),u.start=B,(D=A[B])?(delete A[D.end],B=D===u?u:D.concat(u),y[B.start=D.start]=A[B.end=u.end]=B):y[u.start]=A[u.end]=u):(u=[D],y[u.start=B]=A[u.end=I]=u)});w(A,y);w(y,A);r.forEach(function(D){x[0>D?~D:D]||z.push([D])});return z}function h(p,r,t){var w;if(1<arguments.length)var x=l(p,r,t);
else{var y=0;for(x=Array(w=p.arcs.length);y<w;++y)x[y]=y}return{type:"MultiLineString",arcs:e(p,x)}}function l(p,r,t){function w(u){var B=0>u?~u:u;(F[B]||(F[B]=[])).push({i:u,g:D})}function x(u){u.forEach(w)}function y(u){u.forEach(x)}function A(u){switch(D=u,u.type){case "GeometryCollection":u.geometries.forEach(A);break;case "LineString":x(u.arcs);break;case "MultiLineString":case "Polygon":y(u.arcs);break;case "MultiPolygon":u.arcs.forEach(y)}}var z=[],F=[],D;A(r);F.forEach(null==t?function(u){z.push(u[0].i)}:
function(u){t(u[0].g,u[u.length-1].g)&&z.push(u[0].i)});return z}function c(p,r){function t(F){switch(F.type){case "GeometryCollection":F.geometries.forEach(t);break;case "Polygon":w(F.arcs);break;case "MultiPolygon":F.arcs.forEach(w)}}function w(F){F.forEach(function(D){D.forEach(function(u){(y[u=0>u?~u:u]||(y[u]=[])).push(F)})});A.push(F)}function x(F){F=k(p,{type:"Polygon",arcs:[F]}).coordinates[0];for(var D=-1,u=F.length,B,I=F[u-1],J=0;++D<u;)B=I,I=F[D],J+=B[0]*I[1]-B[1]*I[0];return Math.abs(J)}
var y={},A=[],z=[];r.forEach(t);A.forEach(function(F){if(!F._){var D=[],u=[F];F._=1;for(z.push(D);F=u.pop();)D.push(F),F.forEach(function(B){B.forEach(function(I){y[0>I?~I:I].forEach(function(J){J._||(J._=1,u.push(J))})})})}});A.forEach(function(F){delete F._});return{type:"MultiPolygon",arcs:z.map(function(F){var D=[];F.forEach(function(J){J.forEach(function(N){N.forEach(function(M){2>y[0>M?~M:M].length&&D.push(M)})})});D=e(p,D);if(1<(F=D.length))for(var u=1,B=x(D[0]),I;u<F;++u)(I=x(D[u]))>B&&(B=
D[0],D[0]=D[u],D[u]=B,B=I);return D}).filter(function(F){return 0<F.length})}}function g(p,r){for(var t=0,w=p.length;t<w;){var x=t+w>>>1;p[x]<r?t=x+1:w=x}return t}function d(p){if(null==p)return n;var r,t,w=p.scale[0],x=p.scale[1],y=p.translate[0],A=p.translate[1];return function(z,F){F||(r=t=0);F=2;var D=z.length,u=Array(D),B=Math.round((z[0]-y)/w),I=Math.round((z[1]-A)/x);u[0]=B-r;r=B;u[1]=I-t;for(t=I;F<D;)u[F]=z[F],++F;return u}}q.bbox=f;q.feature=function(p,r){"string"===typeof r&&(r=p.objects[r]);
return"GeometryCollection"===r.type?{type:"FeatureCollection",features:r.geometries.map(function(t){return b(p,t)})}:b(p,r)};q.merge=function(p){return k(p,c.apply(this,arguments))};q.mergeArcs=c;q.mesh=function(p){return k(p,h.apply(this,arguments))};q.meshArcs=h;q.neighbors=function(p){function r(N,M){N.forEach(function(E){0>E&&(E=~E);var L=x[E];L?L.push(M):x[E]=[M]})}function t(N,M){N.forEach(function(E){r(E,M)})}function w(N,M){if("GeometryCollection"===N.type)N.geometries.forEach(function(E){w(E,
M)});else if(N.type in A)A[N.type](N.arcs,M)}var x={},y=p.map(function(){return[]}),A={LineString:r,MultiLineString:t,Polygon:t,MultiPolygon:function(N,M){N.forEach(function(E){t(E,M)})}};p.forEach(w);for(var z in x){p=x[z];for(var F=p.length,D=0;D<F;++D)for(var u=D+1;u<F;++u){var B=p[D],I=p[u],J;(J=y[B])[z=g(J,I)]!==I&&J.splice(z,0,I);(J=y[I])[z=g(J,B)]!==B&&J.splice(z,0,B)}}return y};q.quantize=function(p,r){function t(B){return D(B)}function w(B){switch(B.type){case "GeometryCollection":var I=
{type:"GeometryCollection",geometries:B.geometries.map(w)};break;case "Point":I={type:"Point",coordinates:D(B.coordinates)};break;case "MultiPoint":I={type:"MultiPoint",coordinates:B.coordinates.map(t)};break;default:return B}null!=B.id&&(I.id=B.id);null!=B.bbox&&(I.bbox=B.bbox);null!=B.properties&&(I.properties=B.properties);return I}if(p.transform)throw Error("already quantized");if(r&&r.scale)var x=p.bbox;else{if(!(2<=(F=Math.floor(r))))throw Error("n must be ≥2");x=p.bbox||f(p);r=x[0];var y=x[1],
A=x[2],z=x[3],F;r={scale:[A-r?(A-r)/(F-1):1,z-y?(z-y)/(F-1):1],translate:[r,y]}}var D=d(r),u;y=p.objects;A={};for(u in y)A[u]=w(y[u]);return{type:"Topology",bbox:x,transform:r,objects:A,arcs:p.arcs.map(function(B){var I=0,J=1,N=B.length,M,E=Array(N);for(E[0]=D(B[0],0);++I<N;)if((M=D(B[I],I))[0]||M[1])E[J++]=M;1===J&&(E[J++]=[0,0]);E.length=J;return E})}};q.transform=m;q.untransform=d;Object.defineProperty(q,"__esModule",{value:!0})})},{}],552:[function(a,G,C){G.exports=function(f){if(0>f)return[];
if(0===f)return[[0]];for(var b=Math.round(m(f+1))|0,k=[],e=0;e<b;++e){for(var h=q.unrank(f,e),l=[0],c=0,g=0;g<h.length;++g)c+=1<<h[g],l.push(c);1>n(h)&&(l[0]=c,l[f]=0);k.push(l)}return k};var q=a("permutation-rank"),n=a("permutation-parity"),m=a("gamma")},{gamma:248,"permutation-parity":483,"permutation-rank":484}],553:[function(a,G,C){function q(g,d,p){return Math.sqrt(Math.pow(g,2)+Math.pow(d,2)+Math.pow(p,2))}function n(g){var d=Math.abs(g[0]),p=Math.abs(g[1]),r=Math.abs(g[2]),t=[0,0,0];d>Math.max(p,
r)?t[2]=1:p>Math.max(d,r)?t[0]=1:t[1]=1;for(r=p=d=0;3>r;++r)d+=g[r]*g[r],p+=t[r]*g[r];for(r=0;3>r;++r)t[r]-=p/d*g[r];h(t,t);return t}function m(g,d,p,r,t,w,x,y){this.center=f(p);this.up=f(r);this.right=f(t);this.radius=f([w]);this.angle=f([x,y]);this.angle.bounds=[[-Infinity,-Math.PI/2],[Infinity,Math.PI/2]];this.setDistanceLimits(g,d);this.computedCenter=this.center.curve(0);this.computedUp=this.up.curve(0);this.computedRight=this.right.curve(0);this.computedRadius=this.radius.curve(0);this.computedAngle=
this.angle.curve(0);this.computedToward=[0,0,0];this.computedEye=[0,0,0];this.computedMatrix=Array(16);for(g=0;16>g;++g)this.computedMatrix[g]=.5;this.recalcMatrix(0)}G.exports=function(g){g=g||{};var d=g.center||[0,0,0],p=g.up||[0,1,0],r=g.right||n(p),t=g.radius||1,w=g.theta||0,x=g.phi||0;d=[].slice.call(d,0,3);p=[].slice.call(p,0,3);h(p,p);r=[].slice.call(r,0,3);h(r,r);"eye"in g&&(t=g.eye,w=[t[0]-d[0],t[1]-d[1],t[2]-d[2]],e(r,w,p),1E-6>q(r[0],r[1],r[2])?r=n(p):h(r,r),t=q(w[0],w[1],w[2]),x=l(p,w)/
t,w=l(r,w)/t,x=Math.acos(x),w=Math.acos(w));t=Math.log(t);return new m(g.zoomMin,g.zoomMax,d,p,r,t,w,x)};var f=a("filtered-vector"),b=a("gl-mat4/invert"),k=a("gl-mat4/rotate"),e=a("gl-vec3/cross"),h=a("gl-vec3/normalize"),l=a("gl-vec3/dot");a=m.prototype;a.setDistanceLimits=function(g,d){g=0<g?Math.log(g):-Infinity;d=0<d?Math.log(d):Infinity;d=Math.max(d,g);this.radius.bounds[0][0]=g;this.radius.bounds[1][0]=d};a.getDistanceLimits=function(g){var d=this.radius.bounds[0];return g?(g[0]=Math.exp(d[0][0]),
g[1]=Math.exp(d[1][0]),g):[Math.exp(d[0][0]),Math.exp(d[1][0])]};a.recalcMatrix=function(g){this.center.curve(g);this.up.curve(g);this.right.curve(g);this.radius.curve(g);this.angle.curve(g);for(var d=this.computedUp,p=this.computedRight,r=0,t=0,w=0;3>w;++w)t+=d[w]*p[w],r+=d[w]*d[w];var x=Math.sqrt(r);for(w=g=0;3>w;++w)p[w]-=d[w]*t/r,g+=p[w]*p[w],d[w]/=x;g=Math.sqrt(g);for(w=0;3>w;++w)p[w]/=g;var y=this.computedToward;e(y,d,p);h(y,y);g=Math.exp(this.computedRadius[0]);x=this.computedAngle[0];r=this.computedAngle[1];
t=Math.cos(x);x=Math.sin(x);var A=Math.cos(r),z=Math.sin(r);r=this.computedCenter;var F=t*A,D=x*A,u=-t*z,B=-x*z;t=this.computedEye;x=this.computedMatrix;for(w=0;3>w;++w){var I=F*p[w]+D*y[w]+z*d[w];x[4*w+1]=u*p[w]+B*y[w]+A*d[w];x[4*w+2]=I;x[4*w+3]=0}p=x[1];w=x[5];z=x[9];y=x[2];A=x[6];F=x[10];d=w*F-z*A;z=z*y-p*F;p=p*A-w*y;w=q(d,z,p);x[0]=d/w;x[4]=z/w;x[8]=p/w;for(w=0;3>w;++w)t[w]=r[w]+x[2+4*w]*g;for(w=0;3>w;++w){for(r=g=0;3>r;++r)g+=x[w+4*r]*t[r];x[12+w]=-g}x[15]=1};a.getMatrix=function(g,d){this.recalcMatrix(g);
g=this.computedMatrix;if(d){for(var p=0;16>p;++p)d[p]=g[p];return d}return g};var c=[0,0,0];a.rotate=function(g,d,p,r){this.angle.move(g,d,p);if(r){this.recalcMatrix(g);d=this.computedMatrix;c[0]=d[2];c[1]=d[6];c[2]=d[10];p=this.computedUp;for(var t=this.computedRight,w=this.computedToward,x=0;3>x;++x)d[4*x]=p[x],d[4*x+1]=t[x],d[4*x+2]=w[x];k(d,d,r,c);for(x=0;3>x;++x)p[x]=d[4*x],t[x]=d[4*x+1];this.up.set(g,p[0],p[1],p[2]);this.right.set(g,t[0],t[1],t[2])}};a.pan=function(g,d,p,r){d=d||0;p=p||0;r=
r||0;this.recalcMatrix(g);var t=this.computedMatrix,w=t[1],x=t[5],y=t[9],A=q(w,x,y);w/=A;x/=A;y/=A;A=t[0];var z=t[4];t=t[8];var F=A*w+z*x+t*y;A-=w*F;z-=x*F;t-=y*F;F=q(A,z,t);this.center.move(g,A/F*d+w*p,z/F*d+x*p,t/F*d+y*p);d=Math.exp(this.computedRadius[0]);d=Math.max(1E-4,d+r);this.radius.set(g,Math.log(d))};a.translate=function(g,d,p,r){this.center.move(g,d||0,p||0,r||0)};a.setMatrix=function(g,d,p,r){var t=1;"number"===typeof p&&(t=p|0);if(0>t||3<t)t=1;var w=(t+2)%3;d||(this.recalcMatrix(g),d=
this.computedMatrix);p=d[t];var x=d[t+4],y=d[t+8];if(r){r=Math.abs(p);var A=Math.abs(y),z=Math.max(r,Math.abs(x),A);r===z?(p=0>p?-1:1,x=y=0):A===z?(y=0>y?-1:1,p=x=0):(x=0>x?-1:1,p=y=0)}else r=q(p,x,y),p/=r,x/=r,y/=r;r=d[w];A=d[w+4];w=d[w+8];z=r*p+A*x+w*y;r-=p*z;A-=x*z;w-=y*z;z=q(r,A,w);r/=z;A/=z;w/=z;z=x*w-y*A;var F=y*r-p*w,D=p*A-x*r,u=q(z,F,D);z/=u;F/=u;D/=u;this.center.jump(g,I,J,N);this.radius.idle(g);this.up.jump(g,p,x,y);this.right.jump(g,r,A,w);if(2===t)J=d[1],N=d[5],p=d[9],I=0>B?-Math.PI/2:
Math.PI/2,J=Math.atan2(J*z+N*F+p*D,J*r+N*A+p*w);else{J=d[2];N=d[6];var B=d[10];I=Math.asin(Math.min(1,Math.max(-1,J*p+N*x+B*y)));J=Math.atan2(J*z+N*F+B*D,J*r+N*A+B*w)}this.angle.jump(g,J,I);this.recalcMatrix(g);B=d[2];p=d[6];x=d[10];N=this.computedMatrix;b(N,d);d=N[15];var I=N[12]/d,J=N[13]/d,N=N[14]/d;d=Math.exp(this.computedRadius[0]);this.center.jump(g,I-B*d,J-p*d,N-x*d)};a.lastT=function(){return Math.max(this.center.lastT(),this.up.lastT(),this.right.lastT(),this.radius.lastT(),this.angle.lastT())};
a.idle=function(g){this.center.idle(g);this.up.idle(g);this.right.idle(g);this.radius.idle(g);this.angle.idle(g)};a.flush=function(g){this.center.flush(g);this.up.flush(g);this.right.flush(g);this.radius.flush(g);this.angle.flush(g)};a.setDistance=function(g,d){0<d&&this.radius.set(g,Math.log(d))};a.lookAt=function(g,d,p,r){this.recalcMatrix(g);d=d||this.computedEye;p=p||this.computedCenter;r=r||this.computedUp;var t=r[0],w=r[1];r=r[2];var x=q(t,w,r);if(!(1E-6>x)){t/=x;w/=x;r/=x;x=d[0]-p[0];var y=
d[1]-p[1];d=d[2]-p[2];var A=q(x,y,d);if(!(1E-6>A)){x/=A;y/=A;d/=A;var z=this.computedRight,F=z[0],D=z[1];z=z[2];var u=t*F+w*D+r*z;F-=u*t;D-=u*w;z-=u*r;u=q(F,D,z);if(.01>u&&(F=w*d-r*y,D=r*x-t*d,z=t*y-w*x,u=q(F,D,z),1E-6>u))return;F/=u;D/=u;z/=u;this.up.set(g,t,w,r);this.right.set(g,F,D,z);this.center.set(g,p[0],p[1],p[2]);this.radius.set(g,Math.log(A));p=w*z-r*D;A=r*F-t*z;u=t*D-w*F;var B=q(p,A,u);t=Math.asin(Math.min(1,Math.max(-1,t*x+w*y+r*d)));w=Math.atan2(p/B*x+A/B*y+u/B*d,F*x+D*y+z*d);x=this.angle._state;
r=x[x.length-1];x=x[x.length-2];r%=2*Math.PI;y=Math.abs(r-w);d=Math.abs(r-2*Math.PI-w);Math.abs(r+2*Math.PI-w)<y&&(r+=2*Math.PI);d<y&&(r-=2*Math.PI);this.angle.jump(this.angle.lastT(),r,x);this.angle.set(g,w,t)}}}},{"filtered-vector":242,"gl-mat4/invert":278,"gl-mat4/rotate":283,"gl-vec3/cross":339,"gl-vec3/dot":344,"gl-vec3/normalize":361}],554:[function(a,G,C){G.exports=function(n,m,f){var b=n*m,k=q*n;k-=k-n;n-=k;var e=q*m;e-=e-m;m-=e;m=n*m-(b-k*e-n*e-k*m);return f?(f[0]=m,f[1]=b,f):[m,b]};var q=
+(Math.pow(2,27)+1)},{}],555:[function(a,G,C){G.exports=function(q,n,m){var f=q+n,b=f-q;n-=b;q-=f-b;return m?(m[0]=q+n,m[1]=f,m):[q+n,f]}},{}],556:[function(a,G,C){var q=a("../prototype/is");G.exports=function(n){if("function"!==typeof n||!hasOwnProperty.call(n,"length"))return!1;try{if("number"!==typeof n.length||"function"!==typeof n.call||"function"!==typeof n.apply)return!1}catch(m){return!1}return!q(n)}},{"../prototype/is":563}],557:[function(a,G,C){var q=a("../value/is"),n=a("../object/is"),
m=a("../string/coerce"),f=a("./to-short-string");G.exports=function(b,k,e){if(!n(e))throw new TypeError(k.replace("%v",f(b)));if(!q(b)){if("default"in e)return e["default"];if(e.isOptional)return null}e=m(e.errorMessage);q(e)||(e=k);throw new TypeError(e.replace("%v",f(b)));}},{"../object/is":560,"../string/coerce":564,"../value/is":566,"./to-short-string":559}],558:[function(a,G,C){G.exports=function(q){try{return q.toString()}catch(n){try{return String(q)}catch(m){return null}}}},{}],559:[function(a,
G,C){var q=a("./safe-to-string"),n=/[\n\r\u2028\u2029]/g;G.exports=function(m){m=q(m);if(null===m)return"\x3cNon-coercible to string value\x3e";100<m.length&&(m=m.slice(0,99)+"…");return m=m.replace(n,function(f){switch(f){case "\n":return"\\n";case "\r":return"\\r";case "\u2028":return"\\u2028";case "\u2029":return"\\u2029";default:throw Error("Unexpected character");}})}},{"./safe-to-string":558}],560:[function(a,G,C){var q=a("../value/is"),n={object:!0,"function":!0,undefined:!0};G.exports=function(m){return q(m)?
hasOwnProperty.call(n,typeof m):!1}},{"../value/is":566}],561:[function(a,G,C){var q=a("../lib/resolve-exception"),n=a("./is");G.exports=function(m,f){return n(m)?m:q(m,"%v is not a plain function",f)}},{"../lib/resolve-exception":557,"./is":562}],562:[function(a,G,C){var q=a("../function/is"),n=/^\s*class[\s{/}]/,m=Function.prototype.toString;G.exports=function(f){return!q(f)||n.test(m.call(f))?!1:!0}},{"../function/is":556}],563:[function(a,G,C){var q=a("../object/is");G.exports=function(n){if(!q(n))return!1;
try{return n.constructor?n.constructor.prototype===n:!1}catch(m){return!1}}},{"../object/is":560}],564:[function(a,G,C){var q=a("../value/is"),n=a("../object/is"),m=Object.prototype.toString;G.exports=function(f){if(!q(f))return null;if(n(f)){var b=f.toString;if("function"!==typeof b||b===m)return null}return""+f}},{"../object/is":560,"../value/is":566}],565:[function(a,G,C){var q=a("../lib/resolve-exception"),n=a("./is");G.exports=function(m,f){return n(m)?m:q(m,"Cannot use %v",f)}},{"../lib/resolve-exception":557,
"./is":566}],566:[function(a,G,C){G.exports=function(q){return void 0!==q&&null!==q}},{}],567:[function(a,G,C){(function(q){function n(J){if(J){var N=x.log2(J.length||J.byteLength);B[N].push(J)}}function m(J){J=x.nextPow2(J);var N=x.log2(J);N=B[N];return 0<N.length?N.pop():new ArrayBuffer(J)}function f(J){return new Uint8Array(m(J),0,J)}function b(J){return new Uint16Array(m(2*J),0,J)}function k(J){return new Uint32Array(m(4*J),0,J)}function e(J){return new Int8Array(m(J),0,J)}function h(J){return new Int16Array(m(2*
J),0,J)}function l(J){return new Int32Array(m(4*J),0,J)}function c(J){return new Float32Array(m(4*J),0,J)}function g(J){return new Float64Array(m(8*J),0,J)}function d(J){return z?new Uint8ClampedArray(m(J),0,J):f(J)}function p(J){return F?new BigUint64Array(m(8*J),0,J):null}function r(J){return D?new BigInt64Array(m(8*J),0,J):null}function t(J){return new DataView(m(J),0,J)}function w(J){J=x.nextPow2(J);var N=x.log2(J);N=I[N];return 0<N.length?N.pop():new A(J)}var x=a("bit-twiddle"),y=a("dup"),A=
a("buffer").Buffer;q.__TYPEDARRAY_POOL||(q.__TYPEDARRAY_POOL={UINT8:y([32,0]),UINT16:y([32,0]),UINT32:y([32,0]),BIGUINT64:y([32,0]),INT8:y([32,0]),INT16:y([32,0]),INT32:y([32,0]),BIGINT64:y([32,0]),FLOAT:y([32,0]),DOUBLE:y([32,0]),DATA:y([32,0]),UINT8C:y([32,0]),BUFFER:y([32,0])});var z="undefined"!==typeof Uint8ClampedArray,F="undefined"!==typeof BigUint64Array,D="undefined"!==typeof BigInt64Array,u=q.__TYPEDARRAY_POOL;u.UINT8C||(u.UINT8C=y([32,0]));u.BIGUINT64||(u.BIGUINT64=y([32,0]));u.BIGINT64||
(u.BIGINT64=y([32,0]));u.BUFFER||(u.BUFFER=y([32,0]));var B=u.DATA,I=u.BUFFER;C.free=function(J){if(A.isBuffer(J))I[x.log2(J.length)].push(J);else if("[object ArrayBuffer]"!==Object.prototype.toString.call(J)&&(J=J.buffer),J){var N=x.log2(J.length||J.byteLength)|0;B[N].push(J)}};C.freeUint8=C.freeUint16=C.freeUint32=C.freeBigUint64=C.freeInt8=C.freeInt16=C.freeInt32=C.freeBigInt64=C.freeFloat32=C.freeFloat=C.freeFloat64=C.freeDouble=C.freeUint8Clamped=C.freeDataView=function(J){n(J.buffer)};C.freeArrayBuffer=
n;C.freeBuffer=function(J){I[x.log2(J.length)].push(J)};C.malloc=function(J,N){if(void 0===N||"arraybuffer"===N)return m(J);switch(N){case "uint8":return f(J);case "uint16":return b(J);case "uint32":return k(J);case "int8":return e(J);case "int16":return h(J);case "int32":return l(J);case "float":case "float32":return c(J);case "double":case "float64":return g(J);case "uint8_clamped":return d(J);case "bigint64":return r(J);case "biguint64":return p(J);case "buffer":return w(J);case "data":case "dataview":return t(J)}return null};
C.mallocArrayBuffer=m;C.mallocUint8=f;C.mallocUint16=b;C.mallocUint32=k;C.mallocInt8=e;C.mallocInt16=h;C.mallocInt32=l;C.mallocFloat32=C.mallocFloat=c;C.mallocFloat64=C.mallocDouble=g;C.mallocUint8Clamped=d;C.mallocBigUint64=p;C.mallocBigInt64=r;C.mallocDataView=t;C.mallocBuffer=w;C.clearCache=function(){for(var J=0;32>J;++J)u.UINT8[J].length=0,u.UINT16[J].length=0,u.UINT32[J].length=0,u.INT8[J].length=0,u.INT16[J].length=0,u.INT32[J].length=0,u.FLOAT[J].length=0,u.DOUBLE[J].length=0,u.BIGUINT64[J].length=
0,u.BIGINT64[J].length=0,u.UINT8C[J].length=0,B[J].length=0,I[J].length=0}}).call(this,"undefined"!==typeof la?la:"undefined"!==typeof self?self:"undefined"!==typeof window?window:{})},{"bit-twiddle":97,buffer:111,dup:176}],568:[function(a,G,C){function q(n){this.roots=Array(n);this.ranks=Array(n);for(var m=0;m<n;++m)this.roots[m]=m,this.ranks[m]=0}"use restrict";G.exports=q;a=q.prototype;Object.defineProperty(a,"length",{get:function(){return this.roots.length}});a.makeSet=function(){var n=this.roots.length;
this.roots.push(n);this.ranks.push(0);return n};a.find=function(n){for(var m=n,f=this.roots;f[n]!==n;)n=f[n];for(;f[m]!==n;){var b=f[m];f[m]=n;m=b}return n};a.link=function(n,m){n=this.find(n);m=this.find(m);if(n!==m){var f=this.ranks,b=this.roots,k=f[n],e=f[m];k<e?b[n]=m:e<k?b[m]=n:(b[m]=n,++f[n])}}},{}],569:[function(a,G,C){G.exports=function(q,n,m){if(0===q.length)return q;if(n){m||q.sort(n);m=1;for(var f=q.length,b=q[0],k,e=1;e<f;++e)k=b,b=q[e],n(b,k)&&(e===m?m++:q[m++]=b);q.length=m;return q}m||
q.sort();n=1;m=q.length;f=q[0];for(k=1;k<m;++k)b=f,f=q[k],f!==b&&(k===n?n++:q[n++]=f);q.length=n;return q}},{}],570:[function(a,G,C){var q=/['"]/;G.exports=function(n){if(!n)return"";q.test(n.charAt(0))&&(n=n.substr(1));q.test(n.charAt(n.length-1))&&(n=n.substr(0,n.length-1));return n}},{}],571:[function(a,G,C){G.exports=function(q,n,m){Array.isArray(m)||(m=[].slice.call(arguments,2));for(var f=0,b=m.length;f<b;f++){var k=m[f],e;for(e in k)if((void 0===n[e]||Array.isArray(n[e])||q[e]!==n[e])&&e in
n){if(!0===k[e])var h=n[e];else if(!1===k[e])continue;else if("function"===typeof k[e]&&(h=k[e](n[e],q,n),void 0===h))continue;q[e]=h}}return q}},{}],572:[function(a,G,C){G.exports=function(f,b){if("object"!==typeof b||null===b)b={};return q(f,b.canvas||n,b.context||m,b)};var q=a("./lib/vtext"),n=null,m=null;"undefined"!==typeof document&&(n=document.createElement("canvas"),n.width=8192,n.height=1024,m=n.getContext("2d"))},{"./lib/vtext":573}],573:[function(a,G,C){function q(D,u,B,I){var J="\x3c"+
D+"\x3e";D="\x3c/"+D+"\x3e";for(var N=J.length,M=D.length,E=u[0]===x||u[0]===z,L=0,Q;-1<L;){L=B.indexOf(J,L);if(-1===L)break;Q=B.indexOf(D,L+N);if(-1===Q)break;if(Q<=L)break;for(var S=L;S<Q+M;++S)if(S<L+N||S>=Q)I[S]=null,B=B.substr(0,S)+" "+B.substr(S+1);else if(null!==I[S]){var R=I[S].indexOf(u[0]);-1===R?I[S]+=u:E&&(I[S]=I[S].substr(0,R+1)+(1+parseInt(I[S][R+1]))+I[S].substr(R+2))}L+=N;L=B.substr(L,Q-L).indexOf(J);L=-1!==L?L:Q+M}return I}function n(D,u,B){for(var I=u.textAlign||"start",J=u.textBaseline||
"alphabetic",N=[1073741824,1073741824],M=[0,0],E=D.length,L=0;L<E;++L)for(var Q=D[L],S=0;2>S;++S)N[S]=Math.min(N[S],Q[S])|0,M[S]=Math.max(M[S],Q[S])|0;var R=0;switch(I){case "center":R=-.5*(N[0]+M[0]);break;case "right":case "end":R=-M[0];break;case "left":case "start":R=-N[0];break;default:throw Error("vectorize-text: Unrecognized textAlign: '"+I+"'");}var O=0;switch(J){case "hanging":case "top":O=-N[1];break;case "middle":O=-.5*(N[1]+M[1]);break;case "alphabetic":case "ideographic":O=-3*B;break;
case "bottom":O=-M[1];break;default:throw Error("vectorize-text: Unrecoginized textBaseline: '"+J+"'");}var T=1/B;"lineHeight"in u?T*=+u.lineHeight:"width"in u?T=u.width/(M[0]-N[0]):"height"in u&&(T=u.height/(M[1]-N[1]));return D.map(function(V){return[T*(V[0]+R),T*(V[1]+O)]})}function m(D,u,B,I,J,N){function M(){if(""!==aa){var ra=u.measureText(aa).width;u.fillText(aa,V+ha,X+ca);ha+=ra}}function E(){return""+Math.round(sa)+"px "}function L(ra,qa){var Y=""+u.font;if(!0===N.subscripts){var pa=ra.indexOf(z),
oa=qa.indexOf(z);pa=-1<pa?parseInt(ra[1+pa]):0;oa=-1<oa?parseInt(qa[1+oa]):0;pa!==oa&&(Y=Y.replace(E(),"?px "),sa*=Math.pow(.75,oa-pa),Y=Y.replace("?px ",E()));ca+=.25*T*(oa-pa)}!0===N.superscripts&&(pa=ra.indexOf(x),oa=qa.indexOf(x),pa=-1<pa?parseInt(ra[1+pa]):0,oa=-1<oa?parseInt(qa[1+oa]):0,pa!==oa&&(Y=Y.replace(E(),"?px "),sa*=Math.pow(.75,oa-pa),Y=Y.replace("?px ",E())),ca-=.25*T*(oa-pa));!0===N.bolds&&(oa=-1<ra.indexOf(p),pa=-1<qa.indexOf(p),!oa&&pa&&(Y=ua?Y.replace("italic ","italic bold "):
"bold "+Y),oa&&!pa&&(Y=Y.replace("bold ","")));if(!0===N.italics){var ua=-1<ra.indexOf(t);ra=-1<qa.indexOf(t);!ua&&ra&&(Y="italic "+Y);ua&&!ra&&(Y=Y.replace("italic ",""))}u.font=Y}B=B.replace(/\n/g,"");B=!0===N.breaklines?B.replace(/<br>/g,"\n"):B.replace(/<br>/g," ");var Q="",S=[];for(ba=0;ba<B.length;++ba)S[ba]=Q;!0===N.bolds&&(S=q(d,p,B,S));!0===N.italics&&(S=q(r,t,B,S));!0===N.superscripts&&(S=q(w,y,B,S));!0===N.subscripts&&(S=q(A,F,B,S));var R=[],O="";for(ba=0;ba<B.length;++ba)null!==S[ba]&&
(O+=B[ba],R.push(S[ba]));S=O.split("\n");B=S.length;var T=Math.round(J*I),V=I,X=2*I;J=0;ba=B*T+X;D.height<ba&&(D.height=ba);u.fillStyle="#000";u.fillRect(0,0,D.width,D.height);u.fillStyle="#fff";var ba;O=0;var aa="";for(D=0;D<B;++D){var ka=S[D]+"\n";var ha=0;var ca=D*T;var sa=I;aa="";for(ba=0;ba<ka.length;++ba){var ma=ba+O<R.length?R[ba+O]:R[R.length-1];Q===ma?aa+=ka[ba]:(M(),aa=ka[ba],void 0!==ma&&(L(Q,ma),Q=ma))}M();O+=ka.length;ba=Math.round(ha+2*V)|0;J<ba&&(J=ba)}I=J;Q=X+T*B;return e(u.getImageData(0,
0,I,Q).data,[Q,I,4]).pick(-1,-1,0).transpose(1,0)}function f(D,u,B,I){D=k(D,128);I=I?h(D.cells,D.positions,.25):{edges:D.cells,positions:D.positions};B=n(I.positions,u,B);D=I.edges;I="ccw"===u.orientation;l(B,D);if(u.polygons||u.polygon||u.polyline){u=g(D,B);D=Array(u.length);for(var J=0;J<u.length;++J){for(var N=u[J],M=Array(N.length),E=0;E<N.length;++E){for(var L=N[E],Q=Array(L.length),S=0;S<L.length;++S)Q[S]=B[L[S]].slice();I&&Q.reverse();M[E]=Q}D[J]=M}return D}return u.triangles||u.triangulate||
u.triangle?{cells:c(B,D,{delaunay:!1,exterior:!1,interior:!0}),positions:B}:{edges:D,positions:B}}function b(D,u,B){try{return f(D,u,B,!0)}catch(I){}try{return f(D,u,B,!1)}catch(I){}return u.polygons||u.polyline||u.polygon?[]:u.triangles||u.triangulate||u.triangle?{cells:[],positions:[]}:{edges:[],positions:[]}}G.exports=function(D,u,B,I){var J=64,N=1.25,M={breaklines:!1,bolds:!1,italics:!1,subscripts:!1,superscripts:!1};I&&(I.size&&0<I.size&&(J=I.size),I.lineSpacing&&0<I.lineSpacing&&(N=I.lineSpacing),
I.styletags&&I.styletags.breaklines&&(M.breaklines=I.styletags.breaklines?!0:!1),I.styletags&&I.styletags.bolds&&(M.bolds=I.styletags.bolds?!0:!1),I.styletags&&I.styletags.italics&&(M.italics=I.styletags.italics?!0:!1),I.styletags&&I.styletags.subscripts&&(M.subscripts=I.styletags.subscripts?!0:!1),I.styletags&&I.styletags.superscripts&&(M.superscripts=I.styletags.superscripts?!0:!1));B.font=[I.fontStyle,I.fontVariant,I.fontWeight,J+"px",I.font].filter(function(E){return E}).join(" ");B.textAlign=
"start";B.textBaseline="alphabetic";B.direction="ltr";D=m(u,B,D,J,N,M);return b(D,I,J)};G.exports.processPixels=b;var k=a("surface-nets"),e=a("ndarray"),h=a("simplify-planar-graph"),l=a("clean-pslg"),c=a("cdt2d"),g=a("planar-graph-to-polyline"),d="b",p="b|",r="i",t="i|",w="sup",x="+",y="+1",A="sub",z="-",F="-1"},{cdt2d:112,"clean-pslg":121,ndarray:469,"planar-graph-to-polyline":488,"simplify-planar-graph":534,"surface-nets":542}],574:[function(a,G,C){(function(){function q(y){y.permitHostObjects___&&
y.permitHostObjects___(q)}function n(y){return!("weakmap:"==y.substr(0,8)&&"___"===y.substr(y.length-3))}function m(y){if(y!==Object(y))throw new TypeError("Not an object: "+y);var A=y[p];if(A&&A.key===y)return A;if(d(y)){A={key:y};try{return g(y,p,{value:A,writable:!1,enumerable:!1,configurable:!1}),A}catch(z){}}}function f(y){y.prototype=null;return Object.freeze(y)}function b(){t||"undefined"===typeof console||(t=!0,console.warn("WeakMap should be invoked as new WeakMap(), not WeakMap(). This will be an error in the future."))}
if("undefined"===typeof ses||!ses.ok||ses.ok()){"undefined"!==typeof ses&&(ses.weakMapPermitHostObjects=q);var k=!1;if("function"===typeof WeakMap){var e=WeakMap;if("undefined"===typeof navigator||!/Firefox/.test(navigator.userAgent)){var h=new e,l=Object.freeze({});h.set(l,1);if(1!==h.get(l))k=!0;else{G.exports=WeakMap;return}}}var c=Object.getOwnPropertyNames,g=Object.defineProperty,d=Object.isExtensible,p="weakmap:ident:"+Math.random()+"___";"undefined"!==typeof crypto&&"function"===typeof crypto.getRandomValues&&
"function"===typeof ArrayBuffer&&"function"===typeof Uint8Array&&(h=new ArrayBuffer(25),h=new Uint8Array(h),crypto.getRandomValues(h),p="weakmap:rand:"+Array.prototype.map.call(h,function(y){return(y%36).toString(36)}).join("")+"___");g(Object,"getOwnPropertyNames",{value:function(y){return c(y).filter(n)}});if("getPropertyNames"in Object){var r=Object.getPropertyNames;g(Object,"getPropertyNames",{value:function(y){return r(y).filter(n)}})}(function(){var y=Object.freeze;g(Object,"freeze",{value:function(F){m(F);
return y(F)}});var A=Object.seal;g(Object,"seal",{value:function(F){m(F);return A(F)}});var z=Object.preventExtensions;g(Object,"preventExtensions",{value:function(F){m(F);return z(F)}})})();var t=!1,w=0,x=function(){this instanceof x||b();var y=[],A=[],z=w++;return Object.create(x.prototype,{get___:{value:f(function(F,D){var u=m(F);if(u)return z in u?u[z]:D;F=y.indexOf(F);return 0<=F?A[F]:D})},has___:{value:f(function(F){var D=m(F);return D?z in D:0<=y.indexOf(F)})},set___:{value:f(function(F,D){var u;
(u=m(F))?u[z]=D:(u=y.indexOf(F),0<=u?A[u]=D:(u=y.length,A[u]=D,y[u]=F));return this})},delete___:{value:f(function(F){var D=m(F);if(D)return z in D&&delete D[z];F=y.indexOf(F);if(0>F)return!1;D=y.length-1;y[F]=void 0;A[F]=A[D];y[F]=y[D];y.length=D;A.length=D;return!0})}})};x.prototype=Object.create(Object.prototype,{get:{value:function(y,A){return this.get___(y,A)},writable:!0,configurable:!0},has:{value:function(y){return this.has___(y)},writable:!0,configurable:!0},set:{value:function(y,A){return this.set___(y,
A)},writable:!0,configurable:!0},"delete":{value:function(y){return this.delete___(y)},writable:!0,configurable:!0}});"function"===typeof e?function(){function y(){this instanceof x||b();var A=new e,z=void 0,F=!1;var D=k?function(u,B){A.set(u,B);A.has(u)||(z||(z=new x),z.set(u,B));return this}:function(u,B){if(F)try{A.set(u,B)}catch(I){z||(z=new x),z.set___(u,B)}else A.set(u,B);return this};return Object.create(x.prototype,{get___:{value:f(function(u,B){return z?A.has(u)?A.get(u):z.get___(u,B):A.get(u,
B)})},has___:{value:f(function(u){return A.has(u)||(z?z.has___(u):!1)})},set___:{value:f(D)},delete___:{value:f(function(u){var B=!!A["delete"](u);return z?z.delete___(u)||B:B})},permitHostObjects___:{value:f(function(u){if(u===q)F=!0;else throw Error("bogus call to permitHostObjects___");})}})}k&&"undefined"!==typeof Proxy&&(Proxy=void 0);y.prototype=x.prototype;G.exports=y;Object.defineProperty(WeakMap.prototype,"constructor",{value:WeakMap,enumerable:!1,configurable:!0,writable:!0})}():("undefined"!==
typeof Proxy&&(Proxy=void 0),G.exports=x)}})()},{}],575:[function(a,G,C){var q=a("./hidden-store.js");G.exports=function(){var n={};return function(m){if(("object"!==typeof m||null===m)&&"function"!==typeof m)throw Error("Weakmap-shim: Key must be object");var f=m.valueOf(n);return f&&f.identity===n?f:q(m,n)}}},{"./hidden-store.js":576}],576:[function(a,G,C){G.exports=function(q,n){var m={identity:n},f=q.valueOf;Object.defineProperty(q,"valueOf",{value:function(b){return b!==n?f.apply(this,arguments):
m},writable:!0});return m}},{}],577:[function(a,G,C){var q=a("./create-store.js");G.exports=function(){var n=q();return{get:function(m,f){m=n(m);return m.hasOwnProperty("value")?m.value:f},set:function(m,f){n(m).value=f;return this},has:function(m){return"value"in n(m)},"delete":function(m){return delete n(m).value}}}},{"./create-store.js":575}],578:[function(a,G,C){var q=a("get-canvas-context");G.exports=function(n){return q("webgl",n)}},{"get-canvas-context":249}],579:[function(a,G,C){function q(c){this.local=
this.regionalOptions[c||""]||this.regionalOptions[""]}var n=a("../main");a=a("object-assign");var m=n.instance();q.prototype=new n.baseCalendar;a(q.prototype,{name:"Chinese",jdEpoch:1721425.5,hasYearZero:!1,minMonth:0,firstMonth:0,minDay:1,regionalOptions:{"":{name:"Chinese",epochs:["BEC","EC"],monthNumbers:function(c,g){if("string"===typeof c)return(g=c.match(b))?g[0]:"";var d=this._validateYear(c);c=c.month();var p=""+this.toChineseMonth(d,c);g&&2>p.length&&(p="0"+p);this.isIntercalaryMonth(d,c)&&
(p+="i");return p},monthNames:function(c){if("string"===typeof c){var g=c.match(k);return g?g[0]:""}g=this._validateYear(c);c=c.month();var d="一月 二月 三月 四月 五月 六月 七月 八月 九月 十月 十一月 十二月".split(" ")[this.toChineseMonth(g,c)-1];this.isIntercalaryMonth(g,c)&&(d="闰"+d);return d},monthNamesShort:function(c){if("string"===typeof c){var g=c.match(e);return g?g[0]:""}g=this._validateYear(c);c=c.month();var d="一 二 三 四 五 六 七 八 九 十 十一 十二".split(" ")[this.toChineseMonth(g,c)-1];this.isIntercalaryMonth(g,c)&&(d="闰"+
d);return d},parseMonth:function(c,g){c=this._validateYear(c);var d=parseInt(g);if(isNaN(d)){if("闰"===g[0]){var p=!0;g=g.substring(1)}"月"===g[g.length-1]&&(g=g.substring(0,g.length-1));d=1+"一 二 三 四 五 六 七 八 九 十 十一 十二".split(" ").indexOf(g)}else g=g[g.length-1],p="i"===g||"I"===g;return this.toMonthIndex(c,d,p)},dayNames:"Sunday Monday Tuesday Wednesday Thursday Friday Saturday".split(" "),dayNamesShort:"Sun Mon Tue Wed Thu Fri Sat".split(" "),dayNamesMin:"Su Mo Tu We Th Fr Sa".split(" "),digits:null,
dateFormat:"yyyy/mm/dd",firstDay:1,isRTL:!1}},_validateYear:function(c,g){c.year&&(c=c.year());if("number"!==typeof c||1888>c||2111<c)throw g.replace(/\{0\}/,this.local.name);return c},toMonthIndex:function(c,g,d){c=this.intercalaryMonth(c);if(d&&g!==c||1>g||12<g)throw n.local.invalidMonth.replace(/\{0\}/,this.local.name);return c?!d&&g<=c?g-1:g:g-1},toChineseMonth:function(c,g){c.year&&(c=c.year(),g=c.month());c=this.intercalaryMonth(c);if(0>g||g>(c?12:11))throw n.local.invalidMonth.replace(/\{0\}/,
this.local.name);return c?g<c?g+1:g:g+1},intercalaryMonth:function(c){c=this._validateYear(c);return h[c-h[0]]>>13},isIntercalaryMonth:function(c,g){c.year&&(c=c.year(),g=c.month());c=this.intercalaryMonth(c);return!!c&&c===g},leapYear:function(c){return 0!==this.intercalaryMonth(c)},weekOfYear:function(c,g,d){var p=this._validateYear(c,n.local.invalidyear);p=l[p-l[0]];p=m.newDate(p>>9&4095,p>>5&15,p&31);p.add(4-(p.dayOfWeek()||7),"d");c=this.toJD(c,g,d)-p.toJD();return 1+Math.floor(c/7)},monthsInYear:function(c){return this.leapYear(c)?
13:12},daysInMonth:function(c,g){c.year&&(g=c.month(),c=c.year());c=this._validateYear(c);c=h[c-h[0]];if(g>(c>>13?12:11))throw n.local.invalidMonth.replace(/\{0\}/,this.local.name);return c&1<<12-g?30:29},weekDay:function(c,g,d){return 6>(this.dayOfWeek(c,g,d)||7)},toJD:function(c,g,d){r=this._validate(c,r,d,n.local.invalidDate);c=this._validateYear(r.year());g=r.month();d=r.day();var p=this.isIntercalaryMonth(c,g),r=this.toChineseMonth(c,g);if("object"===typeof c)g=r||{};else{if(!("number"===typeof c&&
1888<=c&&2111>=c))throw Error("Lunar year outside range 1888-2111");if(!("number"===typeof r&&1<=r&&12>=r))throw Error("Lunar month outside range 1 - 12");if(!("number"===typeof d&&1<=d&&30>=d))throw Error("Lunar day outside range 1 - 30");if("object"===typeof p){var t=!1;g=p}else t=!!p,g={};c={year:c,month:r,day:d,isIntercalary:t}}r=c.day-1;d=h[c.year-h[0]];p=(p=d>>13)?c.month>p?c.month:c.isIntercalary?c.month:c.month-1:c.month-1;for(t=0;t<p;t++)r+=d&1<<12-t?30:29;c=l[c.year-l[0]];c=new Date(c>>
9&4095,(c>>5&15)-1,(c&31)+r);g.year=c.getFullYear();g.month=1+c.getMonth();g.day=c.getDate();return m.toJD(g.year,g.month,g.day)},fromJD:function(c){var g=m.fromJD(c),d=g.year();c=g.month();g=g.day();if("object"===typeof d)c=c||{};else{if(!("number"===typeof d&&1888<=d&&2111>=d))throw Error("Solar year outside range 1888-2111");if(!("number"===typeof c&&1<=c&&12>=c))throw Error("Solar month outside range 1 - 12");if(!("number"===typeof g&&1<=g&&31>=g))throw Error("Solar day outside range 1 - 31");
d={year:d,month:c,day:g};c={}}g=l[d.year-l[0]];c.year=(d.year<<9|d.month<<5|d.day)>=g?d.year:d.year-1;g=l[c.year-l[0]];d=Math.round((new Date(d.year,d.month-1,d.day)-new Date(g>>9&4095,(g>>5&15)-1,g&31))/864E5);var p=h[c.year-h[0]];for(g=0;13>g;g++){var r=p&1<<12-g?30:29;if(d<r)break;d-=r}p>>=13;!p||g<p?(c.isIntercalary=!1,c.month=1+g):(c.isIntercalary=g===p?!0:!1,c.month=g);c.day=1+d;d=this.toMonthIndex(c.year,c.month,c.isIntercalary);return this.newDate(c.year,d,c.day)},fromString:function(c){c=
c.match(f);var g=this._validateYear(+c[1]),d=this.toMonthIndex(g,+c[2],!!c[3]);return this.newDate(g,d,+c[4])},add:function(c,g,d){var p=c.year(),r=c.month(),t=this.isIntercalaryMonth(p,r);p=this.toChineseMonth(p,r);c=Object.getPrototypeOf(q.prototype).add.call(this,c,g,d);"y"===d&&(g=c.year(),d=c.month(),r=this.isIntercalaryMonth(g,p),t=t&&r?this.toMonthIndex(g,p,!0):this.toMonthIndex(g,p,!1),t!==d&&c.month(t));return c}});var f=/^\s*(-?\d\d\d\d|\d\d)[-/](\d?\d)([iI]?)[-/](\d?\d)/m,b=/^\d?\d[iI]?/m,
k=/^闰?十?[一二三四五六七八九]?月/m,e=/^闰?十?[一二三四五六七八九]?/m;n.calendars.chinese=q;var h=[1887,5780,5802,19157,2742,50359,1198,2646,46378,7466,3412,30122,5482,67949,2396,5294,43597,6732,6954,36181,2772,4954,18781,2396,54427,5274,6730,47781,5800,6868,21210,4790,59703,2350,5270,46667,3402,3496,38325,1388,4782,18735,2350,52374,6804,7498,44457,2906,1388,29294,4700,63789,6442,6804,56138,5802,2772,38235,1210,4698,22827,5418,63125,3476,5802,43701,2484,5302,27223,2646,70954,7466,3412,54698,5482,2412,38062,5294,2636,32038,
6954,60245,2772,4826,43357,2394,5274,39501,6730,72357,5800,5844,53978,4790,2358,38039,5270,87627,3402,3496,54708,5484,4782,43311,2350,3222,27978,7498,68965,2904,5484,45677,4700,6444,39573,6804,6986,19285,2772,62811,1210,4698,47403,5418,5780,38570,5546,76469,2420,5302,51799,2646,5414,36501,3412,5546,18869,2412,54446,5276,6732,48422,6822,2900,28010,4826,92509,2394,5274,55883,6730,6820,47956,5812,2778,18779,2358,62615,5270,5450,46757,3492,5556,27318,4718,67887,2350,3222,52554,7498,3428,38252,5468,4700,
31022,6444,64149,6804,6986,43861,2772,5338,35421,2650,70955,5418,5780,54954,5546,2740,38074,5302,2646,29991,3366,61011,3412,5546,43445,2412,5294,35406,6732,72998,6820,6996,52586,2778,2396,38045,5274,6698,23333,6820,64338,5812,2746,43355,2358,5270,39499,5450,79525,3492,5548],l=[1887,966732,967231,967733,968265,968766,969297,969798,970298,970829,971330,971830,972362,972863,973395,973896,974397,974928,975428,975929,976461,976962,977462,977994,978494,979026,979526,980026,980558,981059,981559,982091,982593,
983124,983624,984124,984656,985157,985656,986189,986690,987191,987722,988222,988753,989254,989754,990286,990788,991288,991819,992319,992851,993352,993851,994383,994885,995385,995917,996418,996918,997450,997949,998481,998982,999483,1000014,1000515,1001016,1001548,1002047,1002578,1003080,1003580,1004111,1004613,1005113,1005645,1006146,1006645,1007177,1007678,1008209,1008710,1009211,1009743,1010243,1010743,1011275,1011775,1012306,1012807,1013308,1013840,1014341,1014841,1015373,1015874,1016404,1016905,
1017405,1017937,1018438,1018939,1019471,1019972,1020471,1021002,1021503,1022035,1022535,1023036,1023568,1024069,1024568,1025100,1025601,1026102,1026633,1027133,1027666,1028167,1028666,1029198,1029699,1030199,1030730,1031231,1031763,1032264,1032764,1033296,1033797,1034297,1034828,1035329,1035830,1036362,1036861,1037393,1037894,1038394,1038925,1039427,1039927,1040459,1040959,1041491,1041992,1042492,1043023,1043524,1044024,1044556,1045057,1045558,1046090,1046590,1047121,1047622,1048122,1048654,1049154,
1049655,1050187,1050689,1051219,1051720,1052220,1052751,1053252,1053752,1054284,1054786,1055285,1055817,1056317,1056849,1057349,1057850,1058382,1058883,1059383,1059915,1060415,1060947,1061447,1061947,1062479,1062981,1063480,1064012,1064514,1065014,1065545,1066045,1066577,1067078,1067578,1068110,1068611,1069112,1069642,1070142,1070674,1071175,1071675,1072207,1072709,1073209,1073740,1074241,1074741,1075273,1075773,1076305,1076807,1077308,1077839,1078340,1078840,1079372,1079871,1080403,1080904]},{"../main":593,
"object-assign":473}],580:[function(a,G,C){function q(m){this.local=this.regionalOptions[m||""]||this.regionalOptions[""]}var n=a("../main");a=a("object-assign");q.prototype=new n.baseCalendar;a(q.prototype,{name:"Coptic",jdEpoch:1825029.5,daysPerMonth:[30,30,30,30,30,30,30,30,30,30,30,30,5],hasYearZero:!1,minMonth:1,firstMonth:1,minDay:1,regionalOptions:{"":{name:"Coptic",epochs:["BAM","AM"],monthNames:"Thout;Paopi;Hathor;Koiak;Tobi;Meshir;Paremhat;Paremoude;Pashons;Paoni;Epip;Mesori;Pi Kogi Enavot".split(";"),
monthNamesShort:"Tho Pao Hath Koi Tob Mesh Pat Pad Pash Pao Epi Meso PiK".split(" "),dayNames:"Tkyriaka Pesnau Pshoment Peftoou Ptiou Psoou Psabbaton".split(" "),dayNamesShort:"Tky Pes Psh Pef Pti Pso Psa".split(" "),dayNamesMin:"Tk Pes Psh Pef Pt Pso Psa".split(" "),digits:null,dateFormat:"dd/mm/yyyy",firstDay:0,isRTL:!1}},leapYear:function(m){m=this._validate(m,this.minMonth,this.minDay,n.local.invalidYear);m=m.year()+(0>m.year()?1:0);return 3===m%4||-1===m%4},monthsInYear:function(m){this._validate(m,
this.minMonth,this.minDay,n.local.invalidYear||n.regionalOptions[""].invalidYear);return 13},weekOfYear:function(m,f,b){m=this.newDate(m,f,b);m.add(-m.dayOfWeek(),"d");return Math.floor((m.dayOfYear()-1)/7)+1},daysInMonth:function(m,f){m=this._validate(m,f,this.minDay,n.local.invalidMonth);return this.daysPerMonth[m.month()-1]+(13===m.month()&&this.leapYear(m.year())?1:0)},weekDay:function(m,f,b){return 6>(this.dayOfWeek(m,f,b)||7)},toJD:function(m,f,b){f=this._validate(m,f,b,n.local.invalidDate);
m=f.year();0>m&&m++;return f.day()+30*(f.month()-1)+365*(m-1)+Math.floor(m/4)+this.jdEpoch-1},fromJD:function(m){var f=Math.floor(m)+.5-this.jdEpoch,b=Math.floor((f-Math.floor((f+366)/1461))/365)+1;0>=b&&b--;f=Math.floor(m)+.5-this.newDate(b,1,1).toJD();m=Math.floor(f/30)+1;return this.newDate(b,m,f-30*(m-1)+1)}});n.calendars.coptic=q},{"../main":593,"object-assign":473}],581:[function(a,G,C){function q(f){this.local=this.regionalOptions[f||""]||this.regionalOptions[""]}var n=a("../main");a=a("object-assign");
q.prototype=new n.baseCalendar;a(q.prototype,{name:"Discworld",jdEpoch:1721425.5,daysPerMonth:[16,32,32,32,32,32,32,32,32,32,32,32,32],hasYearZero:!1,minMonth:1,firstMonth:1,minDay:1,regionalOptions:{"":{name:"Discworld",epochs:["BUC","UC"],monthNames:"Ick Offle February March April May June Grune August Spune Sektober Ember December".split(" "),monthNamesShort:"Ick Off Feb Mar Apr May Jun Gru Aug Spu Sek Emb Dec".split(" "),dayNames:"Sunday Octeday Monday Tuesday Wednesday Thursday Friday Saturday".split(" "),
dayNamesShort:"Sun Oct Mon Tue Wed Thu Fri Sat".split(" "),dayNamesMin:"Su Oc Mo Tu We Th Fr Sa".split(" "),digits:null,dateFormat:"yyyy/mm/dd",firstDay:2,isRTL:!1}},leapYear:function(f){this._validate(f,this.minMonth,this.minDay,n.local.invalidYear);return!1},monthsInYear:function(f){this._validate(f,this.minMonth,this.minDay,n.local.invalidYear);return 13},daysInYear:function(f){this._validate(f,this.minMonth,this.minDay,n.local.invalidYear);return 400},weekOfYear:function(f,b,k){f=this.newDate(f,
b,k);f.add(-f.dayOfWeek(),"d");return Math.floor((f.dayOfYear()-1)/8)+1},daysInMonth:function(f,b){f=this._validate(f,b,this.minDay,n.local.invalidMonth);return this.daysPerMonth[f.month()-1]},daysInWeek:function(){return 8},dayOfWeek:function(f,b,k){return(this._validate(f,b,k,n.local.invalidDate).day()+1)%8},weekDay:function(f,b,k){f=this.dayOfWeek(f,b,k);return 2<=f&&6>=f},extraInfo:function(f,b,k){f=this._validate(f,b,k,n.local.invalidDate);return{century:m[Math.floor((f.year()-1)/100)+1]||""}},
toJD:function(f,b,k){k=this._validate(f,b,k,n.local.invalidDate);f=k.year()+(0>k.year()?1:0);b=k.month();k=k.day();return k+(1<b?16:0)+(2<b?32*(b-2):0)+400*(f-1)+this.jdEpoch-1},fromJD:function(f){f=Math.floor(f+.5)-Math.floor(this.jdEpoch)-1;var b=Math.floor(f/400)+1;f-=400*(b-1);f+=15<f?16:0;var k=Math.floor(f/32)+1;return this.newDate(0>=b?b-1:b,k,f-32*(k-1)+1)}});var m={20:"Fruitbat",21:"Anchovy"};n.calendars.discworld=q},{"../main":593,"object-assign":473}],582:[function(a,G,C){function q(m){this.local=
this.regionalOptions[m||""]||this.regionalOptions[""]}var n=a("../main");a=a("object-assign");q.prototype=new n.baseCalendar;a(q.prototype,{name:"Ethiopian",jdEpoch:1724220.5,daysPerMonth:[30,30,30,30,30,30,30,30,30,30,30,30,5],hasYearZero:!1,minMonth:1,firstMonth:1,minDay:1,regionalOptions:{"":{name:"Ethiopian",epochs:["BEE","EE"],monthNames:"Meskerem Tikemet Hidar Tahesas Tir Yekatit Megabit Miazia Genbot Sene Hamle Nehase Pagume".split(" "),monthNamesShort:"Mes Tik Hid Tah Tir Yek Meg Mia Gen Sen Ham Neh Pag".split(" "),
dayNames:"Ehud Segno Maksegno Irob Hamus Arb Kidame".split(" "),dayNamesShort:"Ehu Seg Mak Iro Ham Arb Kid".split(" "),dayNamesMin:"Eh Se Ma Ir Ha Ar Ki".split(" "),digits:null,dateFormat:"dd/mm/yyyy",firstDay:0,isRTL:!1}},leapYear:function(m){m=this._validate(m,this.minMonth,this.minDay,n.local.invalidYear);m=m.year()+(0>m.year()?1:0);return 3===m%4||-1===m%4},monthsInYear:function(m){this._validate(m,this.minMonth,this.minDay,n.local.invalidYear||n.regionalOptions[""].invalidYear);return 13},weekOfYear:function(m,
f,b){m=this.newDate(m,f,b);m.add(-m.dayOfWeek(),"d");return Math.floor((m.dayOfYear()-1)/7)+1},daysInMonth:function(m,f){m=this._validate(m,f,this.minDay,n.local.invalidMonth);return this.daysPerMonth[m.month()-1]+(13===m.month()&&this.leapYear(m.year())?1:0)},weekDay:function(m,f,b){return 6>(this.dayOfWeek(m,f,b)||7)},toJD:function(m,f,b){f=this._validate(m,f,b,n.local.invalidDate);m=f.year();0>m&&m++;return f.day()+30*(f.month()-1)+365*(m-1)+Math.floor(m/4)+this.jdEpoch-1},fromJD:function(m){var f=
Math.floor(m)+.5-this.jdEpoch,b=Math.floor((f-Math.floor((f+366)/1461))/365)+1;0>=b&&b--;f=Math.floor(m)+.5-this.newDate(b,1,1).toJD();m=Math.floor(f/30)+1;return this.newDate(b,m,f-30*(m-1)+1)}});n.calendars.ethiopian=q},{"../main":593,"object-assign":473}],583:[function(a,G,C){function q(f){this.local=this.regionalOptions[f||""]||this.regionalOptions[""]}function n(f,b){return f-b*Math.floor(f/b)}var m=a("../main");a=a("object-assign");q.prototype=new m.baseCalendar;a(q.prototype,{name:"Hebrew",
jdEpoch:347995.5,daysPerMonth:[30,29,30,29,30,29,30,29,30,29,30,29,29],hasYearZero:!1,minMonth:1,firstMonth:7,minDay:1,regionalOptions:{"":{name:"Hebrew",epochs:["BAM","AM"],monthNames:"Nisan;Iyar;Sivan;Tammuz;Av;Elul;Tishrei;Cheshvan;Kislev;Tevet;Shevat;Adar;Adar II".split(";"),monthNamesShort:"Nis Iya Siv Tam Av Elu Tis Che Kis Tev She Ada Ad2".split(" "),dayNames:"Yom Rishon;Yom Sheni;Yom Shlishi;Yom Revi'i;Yom Chamishi;Yom Shishi;Yom Shabbat".split(";"),dayNamesShort:"Ris She Shl Rev Cha Shi Sha".split(" "),
dayNamesMin:"Ri She Shl Re Ch Shi Sha".split(" "),digits:null,dateFormat:"dd/mm/yyyy",firstDay:0,isRTL:!1}},leapYear:function(f){f=this._validate(f,this.minMonth,this.minDay,m.local.invalidYear);return this._leapYear(f.year())},_leapYear:function(f){return 7>n(7*(0>f?f+1:f)+1,19)},monthsInYear:function(f){this._validate(f,this.minMonth,this.minDay,m.local.invalidYear);return this._leapYear(f.year?f.year():f)?13:12},weekOfYear:function(f,b,k){f=this.newDate(f,b,k);f.add(-f.dayOfWeek(),"d");return Math.floor((f.dayOfYear()-
1)/7)+1},daysInYear:function(f){f=this._validate(f,this.minMonth,this.minDay,m.local.invalidYear).year();return this.toJD(-1===f?1:f+1,7,1)-this.toJD(f,7,1)},daysInMonth:function(f,b){f.year&&(b=f.month(),f=f.year());this._validate(f,b,this.minDay,m.local.invalidMonth);return 12===b&&this.leapYear(f)?30:8===b&&5===n(this.daysInYear(f),10)?30:9===b&&3===n(this.daysInYear(f),10)?29:this.daysPerMonth[b-1]},weekDay:function(f,b,k){return 6!==this.dayOfWeek(f,b,k)},extraInfo:function(f,b,k){f=this._validate(f,
b,k,m.local.invalidDate);return{yearType:(this.leapYear(f)?"embolismic":"common")+" "+["deficient","regular","complete"][this.daysInYear(f)%10-3]}},toJD:function(f,b,k){k=this._validate(f,b,k,m.local.invalidDate);f=k.year();b=k.month();k=k.day();var e=0>=f?f+1:f;k=this.jdEpoch+this._delay1(e)+this._delay2(e)+k+1;if(7>b){for(e=7;e<=this.monthsInYear(f);e++)k+=this.daysInMonth(f,e);e=1}else e=7;for(;e<b;e++)k+=this.daysInMonth(f,e);return k},_delay1:function(f){f=Math.floor((235*f-234)/19);f=29*f+Math.floor((12084+
13753*f)/25920);3>n(3*(f+1),7)&&f++;return f},_delay2:function(f){var b=this._delay1(f-1),k=this._delay1(f);return 356===this._delay1(f+1)-k?2:382===k-b?1:0},fromJD:function(f){f=Math.floor(f)+.5;for(var b=Math.floor(98496*(f-this.jdEpoch)/35975351)-1;f>=this.toJD(-1===b?1:b+1,7,1);)b++;for(var k=f<this.toJD(b,1,1)?7:1;f>this.toJD(b,k,this.daysInMonth(b,k));)k++;f=f-this.toJD(b,k,1)+1;return this.newDate(b,k,f)}});m.calendars.hebrew=q},{"../main":593,"object-assign":473}],584:[function(a,G,C){function q(m){this.local=
this.regionalOptions[m||""]||this.regionalOptions[""]}var n=a("../main");a=a("object-assign");q.prototype=new n.baseCalendar;a(q.prototype,{name:"Islamic",jdEpoch:1948439.5,daysPerMonth:[30,29,30,29,30,29,30,29,30,29,30,29],hasYearZero:!1,minMonth:1,firstMonth:1,minDay:1,regionalOptions:{"":{name:"Islamic",epochs:["BH","AH"],monthNames:"Muharram;Safar;Rabi' al-awwal;Rabi' al-thani;Jumada al-awwal;Jumada al-thani;Rajab;Sha'aban;Ramadan;Shawwal;Dhu al-Qi'dah;Dhu al-Hijjah".split(";"),monthNamesShort:"Muh Saf Rab1 Rab2 Jum1 Jum2 Raj Sha' Ram Shaw DhuQ DhuH".split(" "),
dayNames:"Yawm al-ahad;Yawm al-ithnayn;Yawm ath-thulaathaa';Yawm al-arbi'aa';Yawm al-khamīs;Yawm al-jum'a;Yawm as-sabt".split(";"),dayNamesShort:"Aha Ith Thu Arb Kha Jum Sab".split(" "),dayNamesMin:"Ah It Th Ar Kh Ju Sa".split(" "),digits:null,dateFormat:"yyyy/mm/dd",firstDay:6,isRTL:!1}},leapYear:function(m){return 11>(11*this._validate(m,this.minMonth,this.minDay,n.local.invalidYear).year()+14)%30},weekOfYear:function(m,f,b){m=this.newDate(m,f,b);m.add(-m.dayOfWeek(),"d");return Math.floor((m.dayOfYear()-
1)/7)+1},daysInYear:function(m){return this.leapYear(m)?355:354},daysInMonth:function(m,f){m=this._validate(m,f,this.minDay,n.local.invalidMonth);return this.daysPerMonth[m.month()-1]+(12===m.month()&&this.leapYear(m.year())?1:0)},weekDay:function(m,f,b){return 5!==this.dayOfWeek(m,f,b)},toJD:function(m,f,b){b=this._validate(m,f,b,n.local.invalidDate);m=b.year();f=b.month();b=b.day();m=0>=m?m+1:m;return b+Math.ceil(29.5*(f-1))+354*(m-1)+Math.floor((3+11*m)/30)+this.jdEpoch-1},fromJD:function(m){m=
Math.floor(m)+.5;var f=Math.floor((30*(m-this.jdEpoch)+10646)/10631);f=0>=f?f-1:f;var b=Math.min(12,Math.ceil((m-29-this.toJD(f,1,1))/29.5)+1);m=m-this.toJD(f,b,1)+1;return this.newDate(f,b,m)}});n.calendars.islamic=q},{"../main":593,"object-assign":473}],585:[function(a,G,C){function q(m){this.local=this.regionalOptions[m||""]||this.regionalOptions[""]}var n=a("../main");a=a("object-assign");q.prototype=new n.baseCalendar;a(q.prototype,{name:"Julian",jdEpoch:1721423.5,daysPerMonth:[31,28,31,30,31,
30,31,31,30,31,30,31],hasYearZero:!1,minMonth:1,firstMonth:1,minDay:1,regionalOptions:{"":{name:"Julian",epochs:["BC","AD"],monthNames:"January February March April May June July August September October November December".split(" "),monthNamesShort:"Jan Feb Mar Apr May Jun Jul Aug Sep Oct Nov Dec".split(" "),dayNames:"Sunday Monday Tuesday Wednesday Thursday Friday Saturday".split(" "),dayNamesShort:"Sun Mon Tue Wed Thu Fri Sat".split(" "),dayNamesMin:"Su Mo Tu We Th Fr Sa".split(" "),digits:null,
dateFormat:"mm/dd/yyyy",firstDay:0,isRTL:!1}},leapYear:function(m){m=this._validate(m,this.minMonth,this.minDay,n.local.invalidYear);m=0>m.year()?m.year()+1:m.year();return 0===m%4},weekOfYear:function(m,f,b){m=this.newDate(m,f,b);m.add(4-(m.dayOfWeek()||7),"d");return Math.floor((m.dayOfYear()-1)/7)+1},daysInMonth:function(m,f){m=this._validate(m,f,this.minDay,n.local.invalidMonth);return this.daysPerMonth[m.month()-1]+(2===m.month()&&this.leapYear(m.year())?1:0)},weekDay:function(m,f,b){return 6>
(this.dayOfWeek(m,f,b)||7)},toJD:function(m,f,b){b=this._validate(m,f,b,n.local.invalidDate);m=b.year();f=b.month();b=b.day();0>m&&m++;2>=f&&(m--,f+=12);return Math.floor(365.25*(m+4716))+Math.floor(30.6001*(f+1))+b-1524.5},fromJD:function(m){var f=Math.floor(m+.5)+1524,b=Math.floor((f-122.1)/365.25),k=Math.floor(365.25*b),e=Math.floor((f-k)/30.6001);m=e-Math.floor(14>e?1:13);b-=Math.floor(2<m?4716:4715);f=f-k-Math.floor(30.6001*e);0>=b&&b--;return this.newDate(b,m,f)}});n.calendars.julian=q},{"../main":593,
"object-assign":473}],586:[function(a,G,C){function q(f){this.local=this.regionalOptions[f||""]||this.regionalOptions[""]}function n(f,b){return f-b*Math.floor(f/b)}var m=a("../main");a=a("object-assign");q.prototype=new m.baseCalendar;a(q.prototype,{name:"Mayan",jdEpoch:584282.5,hasYearZero:!0,minMonth:0,firstMonth:0,minDay:0,regionalOptions:{"":{name:"Mayan",epochs:["",""],monthNames:"0 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17".split(" "),monthNamesShort:"0 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17".split(" "),
dayNames:"0 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19".split(" "),dayNamesShort:"0 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19".split(" "),dayNamesMin:"0 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19".split(" "),digits:null,dateFormat:"YYYY.m.d",firstDay:0,isRTL:!1,haabMonths:"Pop Uo Zip Zotz Tzec Xul Yaxkin Mol Chen Yax Zac Ceh Mac Kankin Muan Pax Kayab Cumku Uayeb".split(" "),tzolkinMonths:"Imix Ik Akbal Kan Chicchan Cimi Manik Lamat Muluc Oc Chuen Eb Ben Ix Men Cib Caban Etznab Cauac Ahau".split(" ")}},
leapYear:function(f){this._validate(f,this.minMonth,this.minDay,m.local.invalidYear);return!1},formatYear:function(f){f=this._validate(f,this.minMonth,this.minDay,m.local.invalidYear).year();var b=Math.floor(f/400);f%=400;f+=0>f?400:0;return b+"."+Math.floor(f/20)+"."+f%20},forYear:function(f){f=f.split(".");if(3>f.length)throw"Invalid Mayan year";for(var b=0,k=0;k<f.length;k++){var e=parseInt(f[k],10);if(19<Math.abs(e)||0<k&&0>e)throw"Invalid Mayan year";b=20*b+e}return b},monthsInYear:function(f){this._validate(f,
this.minMonth,this.minDay,m.local.invalidYear);return 18},weekOfYear:function(f,b,k){this._validate(f,b,k,m.local.invalidDate);return 0},daysInYear:function(f){this._validate(f,this.minMonth,this.minDay,m.local.invalidYear);return 360},daysInMonth:function(f,b){this._validate(f,b,this.minDay,m.local.invalidMonth);return 20},daysInWeek:function(){return 5},dayOfWeek:function(f,b,k){return this._validate(f,b,k,m.local.invalidDate).day()},weekDay:function(f,b,k){this._validate(f,b,k,m.local.invalidDate);
return!0},extraInfo:function(f,b,k){b=this._validate(f,b,k,m.local.invalidDate).toJD();f=this._toHaab(b);b=this._toTzolkin(b);return{haabMonthName:this.local.haabMonths[f[0]-1],haabMonth:f[0],haabDay:f[1],tzolkinDayName:this.local.tzolkinMonths[b[0]-1],tzolkinDay:b[0],tzolkinTrecena:b[1]}},_toHaab:function(f){f-=this.jdEpoch;f=n(f+8+340,365);return[Math.floor(f/20)+1,n(f,20)]},_toTzolkin:function(f){f-=this.jdEpoch;return[n(f+20-1,20)+1,n(f+4-1,13)+1]},toJD:function(f,b,k){f=this._validate(f,b,k,
m.local.invalidDate);return f.day()+20*f.month()+360*f.year()+this.jdEpoch},fromJD:function(f){f=Math.floor(f)+.5-this.jdEpoch;var b=Math.floor(f/360);f%=360;f+=0>f?360:0;return this.newDate(b,Math.floor(f/20),f%20)}});m.calendars.mayan=q},{"../main":593,"object-assign":473}],587:[function(a,G,C){function q(f){this.local=this.regionalOptions[f||""]||this.regionalOptions[""]}var n=a("../main");a=a("object-assign");q.prototype=new n.baseCalendar;var m=n.instance("gregorian");a(q.prototype,{name:"Nanakshahi",
jdEpoch:2257673.5,daysPerMonth:[31,31,31,31,31,30,30,30,30,30,30,30],hasYearZero:!1,minMonth:1,firstMonth:1,minDay:1,regionalOptions:{"":{name:"Nanakshahi",epochs:["BN","AN"],monthNames:"Chet Vaisakh Jeth Harh Sawan Bhadon Assu Katak Maghar Poh Magh Phagun".split(" "),monthNamesShort:"Che Vai Jet Har Saw Bha Ass Kat Mgr Poh Mgh Pha".split(" "),dayNames:"Somvaar Mangalvar Budhvaar Veervaar Shukarvaar Sanicharvaar Etvaar".split(" "),dayNamesShort:"Som Mangal Budh Veer Shukar Sanichar Et".split(" "),
dayNamesMin:"So Ma Bu Ve Sh Sa Et".split(" "),digits:null,dateFormat:"dd-mm-yyyy",firstDay:0,isRTL:!1}},leapYear:function(f){f=this._validate(f,this.minMonth,this.minDay,n.local.invalidYear||n.regionalOptions[""].invalidYear);return m.leapYear(f.year()+(1>f.year()?1:0)+1469)},weekOfYear:function(f,b,k){f=this.newDate(f,b,k);f.add(1-(f.dayOfWeek()||7),"d");return Math.floor((f.dayOfYear()-1)/7)+1},daysInMonth:function(f,b){f=this._validate(f,b,this.minDay,n.local.invalidMonth);return this.daysPerMonth[f.month()-
1]+(12===f.month()&&this.leapYear(f.year())?1:0)},weekDay:function(f,b,k){return 6>(this.dayOfWeek(f,b,k)||7)},toJD:function(f,b,k){b=this._validate(f,b,k,n.local.invalidMonth);f=b.year();0>f&&f++;k=b.day();for(var e=1;e<b.month();e++)k+=this.daysPerMonth[e-1];return k+m.toJD(f+1468,3,13)},fromJD:function(f){f=Math.floor(f+.5);for(var b=Math.floor((f-(this.jdEpoch-1))/366);f>=this.toJD(b+1,1,1);)b++;f=f-Math.floor(this.toJD(b,1,1)+.5)+1;for(var k=1;f>this.daysInMonth(b,k);)f-=this.daysInMonth(b,k),
k++;return this.newDate(b,k,f)}});n.calendars.nanakshahi=q},{"../main":593,"object-assign":473}],588:[function(a,G,C){function q(m){this.local=this.regionalOptions[m||""]||this.regionalOptions[""]}var n=a("../main");a=a("object-assign");q.prototype=new n.baseCalendar;a(q.prototype,{name:"Nepali",jdEpoch:1700709.5,daysPerMonth:[31,31,32,32,31,30,30,29,30,29,30,30],hasYearZero:!1,minMonth:1,firstMonth:1,minDay:1,daysPerYear:365,regionalOptions:{"":{name:"Nepali",epochs:["BBS","ABS"],monthNames:"Baisakh Jestha Ashadh Shrawan Bhadra Ashwin Kartik Mangsir Paush Mangh Falgun Chaitra".split(" "),
monthNamesShort:"Bai Je As Shra Bha Ash Kar Mang Pau Ma Fal Chai".split(" "),dayNames:"Aaitabaar Sombaar Manglbaar Budhabaar Bihibaar Shukrabaar Shanibaar".split(" "),dayNamesShort:"Aaita Som Mangl Budha Bihi Shukra Shani".split(" "),dayNamesMin:"Aai So Man Bu Bi Shu Sha".split(" "),digits:null,dateFormat:"dd/mm/yyyy",firstDay:1,isRTL:!1}},leapYear:function(m){return this.daysInYear(m)!==this.daysPerYear},weekOfYear:function(m,f,b){m=this.newDate(m,f,b);m.add(-m.dayOfWeek(),"d");return Math.floor((m.dayOfYear()-
1)/7)+1},daysInYear:function(m){m=this._validate(m,this.minMonth,this.minDay,n.local.invalidYear).year();if("undefined"===typeof this.NEPALI_CALENDAR_DATA[m])return this.daysPerYear;for(var f=0,b=this.minMonth;12>=b;b++)f+=this.NEPALI_CALENDAR_DATA[m][b];return f},daysInMonth:function(m,f){m.year&&(f=m.month(),m=m.year());this._validate(m,f,this.minDay,n.local.invalidMonth);return"undefined"===typeof this.NEPALI_CALENDAR_DATA[m]?this.daysPerMonth[f-1]:this.NEPALI_CALENDAR_DATA[m][f]},weekDay:function(m,
f,b){return 6!==this.dayOfWeek(m,f,b)},toJD:function(m,f,b){b=this._validate(m,f,b,n.local.invalidDate);m=b.year();f=b.month();b=b.day();var k=n.instance(),e=0,h=f,l=m;this._createMissingCalendarData(m);m-=9<h||9===h&&b>=this.NEPALI_CALENDAR_DATA[l][0]?56:57;9!==f&&(e=b,h--);for(;9!==h;)0>=h&&(h=12,l--),e+=this.NEPALI_CALENDAR_DATA[l][h],h--;9===f?(e+=b-this.NEPALI_CALENDAR_DATA[l][0],0>e&&(e+=k.daysInYear(m))):e+=this.NEPALI_CALENDAR_DATA[l][9]-this.NEPALI_CALENDAR_DATA[l][0];return k.newDate(m,
1,1).add(e,"d").toJD()},fromJD:function(m){m=n.instance().fromJD(m);var f=m.year();m=m.dayOfYear();f+=56;this._createMissingCalendarData(f);for(var b=9,k=this.NEPALI_CALENDAR_DATA[f][b]-this.NEPALI_CALENDAR_DATA[f][0]+1;m>k;)b++,12<b&&(b=1,f++),k+=this.NEPALI_CALENDAR_DATA[f][b];return this.newDate(f,b,this.NEPALI_CALENDAR_DATA[f][b]-(k-m))},_createMissingCalendarData:function(m){var f=this.daysPerMonth.slice(0);f.unshift(17);for(var b=m-1;b<m+2;b++)"undefined"===typeof this.NEPALI_CALENDAR_DATA[b]&&
(this.NEPALI_CALENDAR_DATA[b]=f)},NEPALI_CALENDAR_DATA:{1970:[18,31,31,32,31,31,31,30,29,30,29,30,30],1971:[18,31,31,32,31,32,30,30,29,30,29,30,30],1972:[17,31,32,31,32,31,30,30,30,29,29,30,30],1973:[19,30,32,31,32,31,30,30,30,29,30,29,31],1974:[19,31,31,32,30,31,31,30,29,30,29,30,30],1975:[18,31,31,32,32,30,31,30,29,30,29,30,30],1976:[17,31,32,31,32,31,30,30,30,29,29,30,31],1977:[18,31,32,31,32,31,31,29,30,29,30,29,31],1978:[18,31,31,32,31,31,31,30,29,30,29,30,30],1979:[18,31,31,32,32,31,30,30,29,
30,29,30,30],1980:[17,31,32,31,32,31,30,30,30,29,29,30,31],1981:[18,31,31,31,32,31,31,29,30,30,29,30,30],1982:[18,31,31,32,31,31,31,30,29,30,29,30,30],1983:[18,31,31,32,32,31,30,30,29,30,29,30,30],1984:[17,31,32,31,32,31,30,30,30,29,29,30,31],1985:[18,31,31,31,32,31,31,29,30,30,29,30,30],1986:[18,31,31,32,31,31,31,30,29,30,29,30,30],1987:[18,31,32,31,32,31,30,30,29,30,29,30,30],1988:[17,31,32,31,32,31,30,30,30,29,29,30,31],1989:[18,31,31,31,32,31,31,30,29,30,29,30,30],1990:[18,31,31,32,31,31,31,30,
29,30,29,30,30],1991:[18,31,32,31,32,31,30,30,29,30,29,30,30],1992:[17,31,32,31,32,31,30,30,30,29,30,29,31],1993:[18,31,31,31,32,31,31,30,29,30,29,30,30],1994:[18,31,31,32,31,31,31,30,29,30,29,30,30],1995:[17,31,32,31,32,31,30,30,30,29,29,30,30],1996:[17,31,32,31,32,31,30,30,30,29,30,29,31],1997:[18,31,31,32,31,31,31,30,29,30,29,30,30],1998:[18,31,31,32,31,31,31,30,29,30,29,30,30],1999:[17,31,32,31,32,31,30,30,30,29,29,30,31],2E3:[17,30,32,31,32,31,30,30,30,29,30,29,31],2001:[18,31,31,32,31,31,31,
30,29,30,29,30,30],2002:[18,31,31,32,32,31,30,30,29,30,29,30,30],2003:[17,31,32,31,32,31,30,30,30,29,29,30,31],2004:[17,30,32,31,32,31,30,30,30,29,30,29,31],2005:[18,31,31,32,31,31,31,30,29,30,29,30,30],2006:[18,31,31,32,32,31,30,30,29,30,29,30,30],2007:[17,31,32,31,32,31,30,30,30,29,29,30,31],2008:[17,31,31,31,32,31,31,29,30,30,29,29,31],2009:[18,31,31,32,31,31,31,30,29,30,29,30,30],2010:[18,31,31,32,32,31,30,30,29,30,29,30,30],2011:[17,31,32,31,32,31,30,30,30,29,29,30,31],2012:[17,31,31,31,32,31,
31,29,30,30,29,30,30],2013:[18,31,31,32,31,31,31,30,29,30,29,30,30],2014:[18,31,31,32,32,31,30,30,29,30,29,30,30],2015:[17,31,32,31,32,31,30,30,30,29,29,30,31],2016:[17,31,31,31,32,31,31,29,30,30,29,30,30],2017:[18,31,31,32,31,31,31,30,29,30,29,30,30],2018:[18,31,32,31,32,31,30,30,29,30,29,30,30],2019:[17,31,32,31,32,31,30,30,30,29,30,29,31],2020:[17,31,31,31,32,31,31,30,29,30,29,30,30],2021:[18,31,31,32,31,31,31,30,29,30,29,30,30],2022:[17,31,32,31,32,31,30,30,30,29,29,30,30],2023:[17,31,32,31,32,
31,30,30,30,29,30,29,31],2024:[17,31,31,31,32,31,31,30,29,30,29,30,30],2025:[18,31,31,32,31,31,31,30,29,30,29,30,30],2026:[17,31,32,31,32,31,30,30,30,29,29,30,31],2027:[17,30,32,31,32,31,30,30,30,29,30,29,31],2028:[17,31,31,32,31,31,31,30,29,30,29,30,30],2029:[18,31,31,32,31,32,30,30,29,30,29,30,30],2030:[17,31,32,31,32,31,30,30,30,30,30,30,31],2031:[17,31,32,31,32,31,31,31,31,31,31,31,31],2032:[17,32,32,32,32,32,32,32,32,32,32,32,32],2033:[18,31,31,32,32,31,30,30,29,30,29,30,30],2034:[17,31,32,31,
32,31,30,30,30,29,29,30,31],2035:[17,30,32,31,32,31,31,29,30,30,29,29,31],2036:[17,31,31,32,31,31,31,30,29,30,29,30,30],2037:[18,31,31,32,32,31,30,30,29,30,29,30,30],2038:[17,31,32,31,32,31,30,30,30,29,29,30,31],2039:[17,31,31,31,32,31,31,29,30,30,29,30,30],2040:[17,31,31,32,31,31,31,30,29,30,29,30,30],2041:[18,31,31,32,32,31,30,30,29,30,29,30,30],2042:[17,31,32,31,32,31,30,30,30,29,29,30,31],2043:[17,31,31,31,32,31,31,29,30,30,29,30,30],2044:[17,31,31,32,31,31,31,30,29,30,29,30,30],2045:[18,31,32,
31,32,31,30,30,29,30,29,30,30],2046:[17,31,32,31,32,31,30,30,30,29,29,30,31],2047:[17,31,31,31,32,31,31,30,29,30,29,30,30],2048:[17,31,31,32,31,31,31,30,29,30,29,30,30],2049:[17,31,32,31,32,31,30,30,30,29,29,30,30],2050:[17,31,32,31,32,31,30,30,30,29,30,29,31],2051:[17,31,31,31,32,31,31,30,29,30,29,30,30],2052:[17,31,31,32,31,31,31,30,29,30,29,30,30],2053:[17,31,32,31,32,31,30,30,30,29,29,30,30],2054:[17,31,32,31,32,31,30,30,30,29,30,29,31],2055:[17,31,31,32,31,31,31,30,29,30,30,29,30],2056:[17,31,
31,32,31,32,30,30,29,30,29,30,30],2057:[17,31,32,31,32,31,30,30,30,29,29,30,31],2058:[17,30,32,31,32,31,30,30,30,29,30,29,31],2059:[17,31,31,32,31,31,31,30,29,30,29,30,30],2060:[17,31,31,32,32,31,30,30,29,30,29,30,30],2061:[17,31,32,31,32,31,30,30,30,29,29,30,31],2062:[17,30,32,31,32,31,31,29,30,29,30,29,31],2063:[17,31,31,32,31,31,31,30,29,30,29,30,30],2064:[17,31,31,32,32,31,30,30,29,30,29,30,30],2065:[17,31,32,31,32,31,30,30,30,29,29,30,31],2066:[17,31,31,31,32,31,31,29,30,30,29,29,31],2067:[17,
31,31,32,31,31,31,30,29,30,29,30,30],2068:[17,31,31,32,32,31,30,30,29,30,29,30,30],2069:[17,31,32,31,32,31,30,30,30,29,29,30,31],2070:[17,31,31,31,32,31,31,29,30,30,29,30,30],2071:[17,31,31,32,31,31,31,30,29,30,29,30,30],2072:[17,31,32,31,32,31,30,30,29,30,29,30,30],2073:[17,31,32,31,32,31,30,30,30,29,29,30,31],2074:[17,31,31,31,32,31,31,30,29,30,29,30,30],2075:[17,31,31,32,31,31,31,30,29,30,29,30,30],2076:[16,31,32,31,32,31,30,30,30,29,29,30,30],2077:[17,31,32,31,32,31,30,30,30,29,30,29,31],2078:[17,
31,31,31,32,31,31,30,29,30,29,30,30],2079:[17,31,31,32,31,31,31,30,29,30,29,30,30],2080:[16,31,32,31,32,31,30,30,30,29,29,30,30],2081:[17,31,31,32,32,31,30,30,30,29,30,30,30],2082:[17,31,32,31,32,31,30,30,30,29,30,30,30],2083:[17,31,31,32,31,31,30,30,30,29,30,30,30],2084:[17,31,31,32,31,31,30,30,30,29,30,30,30],2085:[17,31,32,31,32,31,31,30,30,29,30,30,30],2086:[17,31,32,31,32,31,30,30,30,29,30,30,30],2087:[16,31,31,32,31,31,31,30,30,29,30,30,30],2088:[16,30,31,32,32,30,31,30,30,29,30,30,30],2089:[17,
31,32,31,32,31,30,30,30,29,30,30,30],2090:[17,31,32,31,32,31,30,30,30,29,30,30,30],2091:[16,31,31,32,31,31,31,30,30,29,30,30,30],2092:[16,31,31,32,32,31,30,30,30,29,30,30,30],2093:[17,31,32,31,32,31,30,30,30,29,30,30,30],2094:[17,31,31,32,31,31,30,30,30,29,30,30,30],2095:[17,31,31,32,31,31,31,30,29,30,30,30,30],2096:[17,30,31,32,32,31,30,30,29,30,29,30,30],2097:[17,31,32,31,32,31,30,30,30,29,30,30,30],2098:[17,31,31,32,31,31,31,29,30,29,30,30,31],2099:[17,31,31,32,31,31,31,30,29,29,30,30,30],2100:[17,
31,32,31,32,30,31,30,29,30,29,30,30]}});n.calendars.nepali=q},{"../main":593,"object-assign":473}],589:[function(a,G,C){function q(m){this.local=this.regionalOptions[m||""]||this.regionalOptions[""]}var n=a("../main");a=a("object-assign");q.prototype=new n.baseCalendar;a(q.prototype,{name:"Persian",jdEpoch:1948320.5,daysPerMonth:[31,31,31,31,31,31,30,30,30,30,30,29],hasYearZero:!1,minMonth:1,firstMonth:1,minDay:1,regionalOptions:{"":{name:"Persian",epochs:["BP","AP"],monthNames:"Farvardin Ordibehesht Khordad Tir Mordad Shahrivar Mehr Aban Azar Day Bahman Esfand".split(" "),
monthNamesShort:"Far Ord Kho Tir Mor Sha Meh Aba Aza Day Bah Esf".split(" "),dayNames:"Yekshambe Doshambe Seshambe Chæharshambe Panjshambe Jom'e Shambe".split(" "),dayNamesShort:"Yek Do Se Chæ Panj Jom Sha".split(" "),dayNamesMin:"Ye Do Se Ch Pa Jo Sh".split(" "),digits:null,dateFormat:"yyyy/mm/dd",firstDay:6,isRTL:!1}},leapYear:function(m){m=this._validate(m,this.minMonth,this.minDay,n.local.invalidYear);return 682>682*((m.year()-(0<m.year()?474:473))%2820+512)%2816},weekOfYear:function(m,f,b){m=
this.newDate(m,f,b);m.add(-((m.dayOfWeek()+1)%7),"d");return Math.floor((m.dayOfYear()-1)/7)+1},daysInMonth:function(m,f){m=this._validate(m,f,this.minDay,n.local.invalidMonth);return this.daysPerMonth[m.month()-1]+(12===m.month()&&this.leapYear(m.year())?1:0)},weekDay:function(m,f,b){return 5!==this.dayOfWeek(m,f,b)},toJD:function(m,f,b){b=this._validate(m,f,b,n.local.invalidDate);m=b.year();f=b.month();b=b.day();m-=0<=m?474:473;var k=474+(m-2820*Math.floor(m/2820));return b+(7>=f?31*(f-1):30*(f-
1)+6)+Math.floor((682*k-110)/2816)+365*(k-1)+1029983*Math.floor(m/2820)+this.jdEpoch-1},fromJD:function(m){m=Math.floor(m)+.5;var f=m-this.toJD(475,1,1),b=Math.floor(f/1029983);f-=1029983*Math.floor(f/1029983);var k=2820;1029982!==f&&(k=Math.floor(f/366),k=Math.floor((2134*k+2816*(f-366*Math.floor(f/366))+2815)/1028522)+k+1);b=k+2820*b+474;b=0>=b?b-1:b;f=m-this.toJD(b,1,1)+1;f=186>=f?Math.ceil(f/31):Math.ceil((f-6)/30);m=m-this.toJD(b,f,1)+1;return this.newDate(b,f,m)}});n.calendars.persian=q;n.calendars.jalali=
q},{"../main":593,"object-assign":473}],590:[function(a,G,C){function q(f){this.local=this.regionalOptions[f||""]||this.regionalOptions[""]}var n=a("../main");a=a("object-assign");var m=n.instance();q.prototype=new n.baseCalendar;a(q.prototype,{name:"Taiwan",jdEpoch:2419402.5,yearsOffset:1911,daysPerMonth:[31,28,31,30,31,30,31,31,30,31,30,31],hasYearZero:!1,minMonth:1,firstMonth:1,minDay:1,regionalOptions:{"":{name:"Taiwan",epochs:["BROC","ROC"],monthNames:"January February March April May June July August September October November December".split(" "),
monthNamesShort:"Jan Feb Mar Apr May Jun Jul Aug Sep Oct Nov Dec".split(" "),dayNames:"Sunday Monday Tuesday Wednesday Thursday Friday Saturday".split(" "),dayNamesShort:"Sun Mon Tue Wed Thu Fri Sat".split(" "),dayNamesMin:"Su Mo Tu We Th Fr Sa".split(" "),digits:null,dateFormat:"yyyy/mm/dd",firstDay:1,isRTL:!1}},leapYear:function(f){f=this._validate(f,this.minMonth,this.minDay,n.local.invalidYear);f=this._t2gYear(f.year());return m.leapYear(f)},weekOfYear:function(f,b,k){b=this._validate(f,this.minMonth,
this.minDay,n.local.invalidYear);f=this._t2gYear(b.year());return m.weekOfYear(f,b.month(),b.day())},daysInMonth:function(f,b){f=this._validate(f,b,this.minDay,n.local.invalidMonth);return this.daysPerMonth[f.month()-1]+(2===f.month()&&this.leapYear(f.year())?1:0)},weekDay:function(f,b,k){return 6>(this.dayOfWeek(f,b,k)||7)},toJD:function(f,b,k){b=this._validate(f,b,k,n.local.invalidDate);f=this._t2gYear(b.year());return m.toJD(f,b.month(),b.day())},fromJD:function(f){f=m.fromJD(f);var b=this._g2tYear(f.year());
return this.newDate(b,f.month(),f.day())},_t2gYear:function(f){return f+this.yearsOffset+(f>=-this.yearsOffset&&-1>=f?1:0)},_g2tYear:function(f){return f-this.yearsOffset-(1<=f&&f<=this.yearsOffset?1:0)}});n.calendars.taiwan=q},{"../main":593,"object-assign":473}],591:[function(a,G,C){function q(f){this.local=this.regionalOptions[f||""]||this.regionalOptions[""]}var n=a("../main");a=a("object-assign");var m=n.instance();q.prototype=new n.baseCalendar;a(q.prototype,{name:"Thai",jdEpoch:1523098.5,yearsOffset:543,
daysPerMonth:[31,28,31,30,31,30,31,31,30,31,30,31],hasYearZero:!1,minMonth:1,firstMonth:1,minDay:1,regionalOptions:{"":{name:"Thai",epochs:["BBE","BE"],monthNames:"January February March April May June July August September October November December".split(" "),monthNamesShort:"Jan Feb Mar Apr May Jun Jul Aug Sep Oct Nov Dec".split(" "),dayNames:"Sunday Monday Tuesday Wednesday Thursday Friday Saturday".split(" "),dayNamesShort:"Sun Mon Tue Wed Thu Fri Sat".split(" "),dayNamesMin:"Su Mo Tu We Th Fr Sa".split(" "),
digits:null,dateFormat:"dd/mm/yyyy",firstDay:0,isRTL:!1}},leapYear:function(f){f=this._validate(f,this.minMonth,this.minDay,n.local.invalidYear);f=this._t2gYear(f.year());return m.leapYear(f)},weekOfYear:function(f,b,k){b=this._validate(f,this.minMonth,this.minDay,n.local.invalidYear);f=this._t2gYear(b.year());return m.weekOfYear(f,b.month(),b.day())},daysInMonth:function(f,b){f=this._validate(f,b,this.minDay,n.local.invalidMonth);return this.daysPerMonth[f.month()-1]+(2===f.month()&&this.leapYear(f.year())?
1:0)},weekDay:function(f,b,k){return 6>(this.dayOfWeek(f,b,k)||7)},toJD:function(f,b,k){b=this._validate(f,b,k,n.local.invalidDate);f=this._t2gYear(b.year());return m.toJD(f,b.month(),b.day())},fromJD:function(f){f=m.fromJD(f);var b=this._g2tYear(f.year());return this.newDate(b,f.month(),f.day())},_t2gYear:function(f){return f-this.yearsOffset-(1<=f&&f<=this.yearsOffset?1:0)},_g2tYear:function(f){return f+this.yearsOffset+(f>=-this.yearsOffset&&-1>=f?1:0)}});n.calendars.thai=q},{"../main":593,"object-assign":473}],
592:[function(a,G,C){function q(f){this.local=this.regionalOptions[f||""]||this.regionalOptions[""]}var n=a("../main");a=a("object-assign");q.prototype=new n.baseCalendar;a(q.prototype,{name:"UmmAlQura",hasYearZero:!1,minMonth:1,firstMonth:1,minDay:1,regionalOptions:{"":{name:"Umm al-Qura",epochs:["BH","AH"],monthNames:"Al-Muharram;Safar;Rabi' al-awwal;Rabi' Al-Thani;Jumada Al-Awwal;Jumada Al-Thani;Rajab;Sha'aban;Ramadan;Shawwal;Dhu al-Qi'dah;Dhu al-Hijjah".split(";"),monthNamesShort:"Muh Saf Rab1 Rab2 Jum1 Jum2 Raj Sha' Ram Shaw DhuQ DhuH".split(" "),
dayNames:"Yawm al-Ahad;Yawm al-Ithnain;Yawm al-Thalāthā’;Yawm al-Arba‘ā’;Yawm al-Khamīs;Yawm al-Jum‘a;Yawm al-Sabt".split(";"),dayNamesMin:"Ah Ith Th Ar Kh Ju Sa".split(" "),digits:null,dateFormat:"yyyy/mm/dd",firstDay:6,isRTL:!0}},leapYear:function(f){f=this._validate(f,this.minMonth,this.minDay,n.local.invalidYear);return 355===this.daysInYear(f.year())},weekOfYear:function(f,b,k){f=this.newDate(f,b,k);f.add(-f.dayOfWeek(),"d");return Math.floor((f.dayOfYear()-1)/7)+1},daysInYear:function(f){for(var b=
0,k=1;12>=k;k++)b+=this.daysInMonth(f,k);return b},daysInMonth:function(f,b){f=this._validate(f,b,this.minDay,n.local.invalidMonth).toJD()-24E5+.5;for(var k=b=0;k<m.length;k++){if(m[k]>f)return m[b]-m[b-1];b++}return 30},weekDay:function(f,b,k){return 5!==this.dayOfWeek(f,b,k)},toJD:function(f,b,k){f=this._validate(f,b,k,n.local.invalidDate);b=12*(f.year()-1)+f.month()-15292;return f.day()+m[b-1]-1+24E5-.5},fromJD:function(f){f=f-24E5+.5;for(var b=0,k=0;k<m.length&&!(m[k]>f);k++)b++;k=b+15292;var e=
Math.floor((k-1)/12);return this.newDate(e+1,k-12*e,f-m[b-1]+1)},isValid:function(f,b,k){var e=n.baseCalendar.prototype.isValid.apply(this,arguments);e&&(f=null!=f.year?f.year:f,e=1276<=f&&1500>=f);return e},_validate:function(f,b,k,e){var h=n.baseCalendar.prototype._validate.apply(this,arguments);if(1276>h.year||1500<h.year)throw e.replace(/\{0\}/,this.local.name);return h}});n.calendars.ummalqura=q;var m=[20,50,79,109,138,168,197,227,256,286,315,345,374,404,433,463,492,522,551,581,611,641,670,700,
729,759,788,818,847,877,906,936,965,995,1024,1054,1083,1113,1142,1172,1201,1231,1260,1290,1320,1350,1379,1409,1438,1468,1497,1527,1556,1586,1615,1645,1674,1704,1733,1763,1792,1822,1851,1881,1910,1940,1969,1999,2028,2058,2087,2117,2146,2176,2205,2235,2264,2294,2323,2353,2383,2413,2442,2472,2501,2531,2560,2590,2619,2649,2678,2708,2737,2767,2796,2826,2855,2885,2914,2944,2973,3003,3032,3062,3091,3121,3150,3180,3209,3239,3268,3298,3327,3357,3386,3416,3446,3476,3505,3535,3564,3594,3623,3653,3682,3712,3741,
3771,3800,3830,3859,3889,3918,3948,3977,4007,4036,4066,4095,4125,4155,4185,4214,4244,4273,4303,4332,4362,4391,4421,4450,4480,4509,4539,4568,4598,4627,4657,4686,4716,4745,4775,4804,4834,4863,4893,4922,4952,4981,5011,5040,5070,5099,5129,5158,5188,5218,5248,5277,5307,5336,5366,5395,5425,5454,5484,5513,5543,5572,5602,5631,5661,5690,5720,5749,5779,5808,5838,5867,5897,5926,5956,5985,6015,6044,6074,6103,6133,6162,6192,6221,6251,6281,6311,6340,6370,6399,6429,6458,6488,6517,6547,6576,6606,6635,6665,6694,6724,
6753,6783,6812,6842,6871,6901,6930,6960,6989,7019,7048,7078,7107,7137,7166,7196,7225,7255,7284,7314,7344,7374,7403,7433,7462,7492,7521,7551,7580,7610,7639,7669,7698,7728,7757,7787,7816,7846,7875,7905,7934,7964,7993,8023,8053,8083,8112,8142,8171,8201,8230,8260,8289,8319,8348,8378,8407,8437,8466,8496,8525,8555,8584,8614,8643,8673,8702,8732,8761,8791,8821,8850,8880,8909,8938,8968,8997,9027,9056,9086,9115,9145,9175,9205,9234,9264,9293,9322,9352,9381,9410,9440,9470,9499,9529,9559,9589,9618,9648,9677,9706,
9736,9765,9794,9824,9853,9883,9913,9943,9972,10002,10032,10061,10090,10120,10149,10178,10208,10237,10267,10297,10326,10356,10386,10415,10445,10474,10504,10533,10562,10592,10621,10651,10680,10710,10740,10770,10799,10829,10858,10888,10917,10947,10976,11005,11035,11064,11094,11124,11153,11183,11213,11242,11272,11301,11331,11360,11389,11419,11448,11478,11507,11537,11567,11596,11626,11655,11685,11715,11744,11774,11803,11832,11862,11891,11921,11950,11980,12010,12039,12069,12099,12128,12158,12187,12216,
12246,12275,12304,12334,12364,12393,12423,12453,12483,12512,12542,12571,12600,12630,12659,12688,12718,12747,12777,12807,12837,12866,12896,12926,12955,12984,13014,13043,13072,13102,13131,13161,13191,13220,13250,13280,13310,13339,13368,13398,13427,13456,13486,13515,13545,13574,13604,13634,13664,13693,13723,13752,13782,13811,13840,13870,13899,13929,13958,13988,14018,14047,14077,14107,14136,14166,14195,14224,14254,14283,14313,14342,14372,14401,14431,14461,14490,14520,14550,14579,14609,14638,14667,14697,
14726,14756,14785,14815,14844,14874,14904,14933,14963,14993,15021,15051,15081,15110,15140,15169,15199,15228,15258,15287,15317,15347,15377,15406,15436,15465,15494,15524,15553,15582,15612,15641,15671,15701,15731,15760,15790,15820,15849,15878,15908,15937,15966,15996,16025,16055,16085,16114,16144,16174,16204,16233,16262,16292,16321,16350,16380,16409,16439,16468,16498,16528,16558,16587,16617,16646,16676,16705,16734,16764,16793,16823,16852,16882,16912,16941,16971,17001,17030,17060,17089,17118,17148,17177,
17207,17236,17266,17295,17325,17355,17384,17414,17444,17473,17502,17532,17561,17591,17620,17650,17679,17709,17738,17768,17798,17827,17857,17886,17916,17945,17975,18004,18034,18063,18093,18122,18152,18181,18211,18241,18270,18300,18330,18359,18388,18418,18447,18476,18506,18535,18565,18595,18625,18654,18684,18714,18743,18772,18802,18831,18860,18890,18919,18949,18979,19008,19038,19068,19098,19127,19156,19186,19215,19244,19274,19303,19333,19362,19392,19422,19452,19481,19511,19540,19570,19599,19628,19658,
19687,19717,19746,19776,19806,19836,19865,19895,19924,19954,19983,20012,20042,20071,20101,20130,20160,20190,20219,20249,20279,20308,20338,20367,20396,20426,20455,20485,20514,20544,20573,20603,20633,20662,20692,20721,20751,20780,20810,20839,20869,20898,20928,20957,20987,21016,21046,21076,21105,21135,21164,21194,21223,21253,21282,21312,21341,21371,21400,21430,21459,21489,21519,21548,21578,21607,21637,21666,21696,21725,21754,21784,21813,21843,21873,21902,21932,21962,21991,22021,22050,22080,22109,22138,
22168,22197,22227,22256,22286,22316,22346,22375,22405,22434,22464,22493,22522,22552,22581,22611,22640,22670,22700,22730,22759,22789,22818,22848,22877,22906,22936,22965,22994,23024,23054,23083,23113,23143,23173,23202,23232,23261,23290,23320,23349,23379,23408,23438,23467,23497,23527,23556,23586,23616,23645,23674,23704,23733,23763,23792,23822,23851,23881,23910,23940,23970,23999,24029,24058,24088,24117,24147,24176,24206,24235,24265,24294,24324,24353,24383,24413,24442,24472,24501,24531,24560,24590,24619,
24648,24678,24707,24737,24767,24796,24826,24856,24885,24915,24944,24974,25003,25032,25062,25091,25121,25150,25180,25210,25240,25269,25299,25328,25358,25387,25416,25446,25475,25505,25534,25564,25594,25624,25653,25683,25712,25742,25771,25800,25830,25859,25888,25918,25948,25977,26007,26037,26067,26096,26126,26155,26184,26214,26243,26272,26302,26332,26361,26391,26421,26451,26480,26510,26539,26568,26598,26627,26656,26686,26715,26745,26775,26805,26834,26864,26893,26923,26952,26982,27011,27041,27070,27099,
27129,27159,27188,27218,27248,27277,27307,27336,27366,27395,27425,27454,27484,27513,27542,27572,27602,27631,27661,27691,27720,27750,27779,27809,27838,27868,27897,27926,27956,27985,28015,28045,28074,28104,28134,28163,28193,28222,28252,28281,28310,28340,28369,28399,28428,28458,28488,28517,28547,28577,28607,28636,28665,28695,28724,28754,28783,28813,28843,28872,28901,28931,28960,28990,29019,29049,29078,29108,29137,29167,29196,29226,29255,29285,29315,29345,29375,29404,29434,29463,29492,29522,29551,29580,
29610,29640,29669,29699,29729,29759,29788,29818,29847,29876,29906,29935,29964,29994,30023,30053,30082,30112,30141,30171,30200,30230,30259,30289,30318,30348,30378,30408,30437,30467,30496,30526,30555,30585,30614,30644,30673,30703,30732,30762,30791,30821,30850,30880,30909,30939,30968,30998,31027,31057,31086,31116,31145,31175,31204,31234,31263,31293,31322,31352,31381,31411,31441,31471,31500,31530,31559,31589,31618,31648,31676,31706,31736,31766,31795,31825,31854,31884,31913,31943,31972,32002,32031,32061,
32090,32120,32150,32180,32209,32239,32268,32298,32327,32357,32386,32416,32445,32475,32504,32534,32563,32593,32622,32652,32681,32711,32740,32770,32799,32829,32858,32888,32917,32947,32976,33006,33035,33065,33094,33124,33153,33183,33213,33243,33272,33302,33331,33361,33390,33420,33450,33479,33509,33539,33568,33598,33627,33657,33686,33716,33745,33775,33804,33834,33863,33893,33922,33952,33981,34011,34040,34069,34099,34128,34158,34187,34217,34247,34277,34306,34336,34365,34395,34424,34454,34483,34512,34542,
34571,34601,34631,34660,34690,34719,34749,34778,34808,34837,34867,34896,34926,34955,34985,35015,35044,35074,35103,35133,35162,35192,35222,35251,35280,35310,35340,35370,35399,35429,35458,35488,35517,35547,35576,35605,35635,35665,35694,35723,35753,35782,35811,35841,35871,35901,35930,35960,35989,36019,36048,36078,36107,36136,36166,36195,36225,36254,36284,36314,36343,36373,36403,36433,36462,36492,36521,36551,36580,36610,36639,36669,36698,36728,36757,36786,36816,36845,36875,36904,36934,36963,36993,37022,
37052,37081,37111,37141,37170,37200,37229,37259,37288,37318,37347,37377,37406,37436,37465,37495,37524,37554,37584,37613,37643,37672,37701,37731,37760,37790,37819,37849,37878,37908,37938,37967,37997,38027,38056,38085,38115,38144,38174,38203,38233,38262,38292,38322,38351,38381,38410,38440,38469,38499,38528,38558,38587,38617,38646,38676,38705,38735,38764,38794,38823,38853,38882,38912,38941,38971,39001,39030,39059,39089,39118,39148,39178,39208,39237,39267,39297,39326,39355,39385,39414,39444,39473,39503,
39532,39562,39592,39621,39650,39680,39709,39739,39768,39798,39827,39857,39886,39916,39946,39975,40005,40035,40064,40094,40123,40153,40182,40212,40241,40271,40300,40330,40359,40389,40418,40448,40477,40507,40536,40566,40595,40625,40655,40685,40714,40744,40773,40803,40832,40862,40892,40921,40951,40980,41009,41039,41068,41098,41127,41157,41186,41216,41245,41275,41304,41334,41364,41393,41422,41452,41481,41511,41540,41570,41599,41629,41658,41688,41718,41748,41777,41807,41836,41865,41894,41924,41953,41983,
42012,42042,42072,42102,42131,42161,42190,42220,42249,42279,42308,42337,42367,42397,42426,42456,42485,42515,42545,42574,42604,42633,42662,42692,42721,42751,42780,42810,42839,42869,42899,42929,42958,42988,43017,43046,43076,43105,43135,43164,43194,43223,43253,43283,43312,43342,43371,43401,43430,43460,43489,43519,43548,43578,43607,43637,43666,43696,43726,43755,43785,43814,43844,43873,43903,43932,43962,43991,44021,44050,44080,44109,44139,44169,44198,44228,44258,44287,44317,44346,44375,44405,44434,44464,
44493,44523,44553,44582,44612,44641,44671,44700,44730,44759,44788,44818,44847,44877,44906,44936,44966,44996,45025,45055,45084,45114,45143,45172,45202,45231,45261,45290,45320,45350,45380,45409,45439,45468,45498,45527,45556,45586,45615,45644,45674,45704,45733,45763,45793,45823,45852,45882,45911,45940,45970,45999,46028,46058,46088,46117,46147,46177,46206,46236,46265,46295,46324,46354,46383,46413,46442,46472,46501,46531,46560,46590,46620,46649,46679,46708,46738,46767,46797,46826,46856,46885,46915,46944,
46974,47003,47033,47063,47092,47122,47151,47181,47210,47240,47269,47298,47328,47357,47387,47417,47446,47476,47506,47535,47565,47594,47624,47653,47682,47712,47741,47771,47800,47830,47860,47890,47919,47949,47978,48008,48037,48066,48096,48125,48155,48184,48214,48244,48273,48303,48333,48362,48392,48421,48450,48480,48509,48538,48568,48598,48627,48657,48687,48717,48746,48776,48805,48834,48864,48893,48922,48952,48982,49011,49041,49071,49100,49130,49160,49189,49218,49248,49277,49306,49336,49365,49395,49425,
49455,49484,49514,49543,49573,49602,49632,49661,49690,49720,49749,49779,49809,49838,49868,49898,49927,49957,49986,50016,50045,50075,50104,50133,50163,50192,50222,50252,50281,50311,50340,50370,50400,50429,50459,50488,50518,50547,50576,50606,50635,50665,50694,50724,50754,50784,50813,50843,50872,50902,50931,50960,50990,51019,51049,51078,51108,51138,51167,51197,51227,51256,51286,51315,51345,51374,51403,51433,51462,51492,51522,51552,51582,51611,51641,51670,51699,51729,51758,51787,51816,51846,51876,51906,
51936,51965,51995,52025,52054,52083,52113,52142,52171,52200,52230,52260,52290,52319,52349,52379,52408,52438,52467,52497,52526,52555,52585,52614,52644,52673,52703,52733,52762,52792,52822,52851,52881,52910,52939,52969,52998,53028,53057,53087,53116,53146,53176,53205,53235,53264,53294,53324,53353,53383,53412,53441,53471,53500,53530,53559,53589,53619,53648,53678,53708,53737,53767,53796,53825,53855,53884,53913,53943,53973,54003,54032,54062,54092,54121,54151,54180,54209,54239,54268,54297,54327,54357,54387,
54416,54446,54476,54505,54535,54564,54593,54623,54652,54681,54711,54741,54770,54800,54830,54859,54889,54919,54948,54977,55007,55036,55066,55095,55125,55154,55184,55213,55243,55273,55302,55332,55361,55391,55420,55450,55479,55508,55538,55567,55597,55627,55657,55686,55716,55745,55775,55804,55834,55863,55892,55922,55951,55981,56011,56040,56070,56100,56129,56159,56188,56218,56247,56276,56306,56335,56365,56394,56424,56454,56483,56513,56543,56572,56601,56631,56660,56690,56719,56749,56778,56808,56837,56867,
56897,56926,56956,56985,57015,57044,57074,57103,57133,57162,57192,57221,57251,57280,57310,57340,57369,57399,57429,57458,57487,57517,57546,57576,57605,57634,57664,57694,57723,57753,57783,57813,57842,57871,57901,57930,57959,57989,58018,58048,58077,58107,58137,58167,58196,58226,58255,58285,58314,58343,58373,58402,58432,58461,58491,58521,58551,58580,58610,58639,58669,58698,58727,58757,58786,58816,58845,58875,58905,58934,58964,58994,59023,59053,59082,59111,59141,59170,59200,59229,59259,59288,59318,59348,
59377,59407,59436,59466,59495,59525,59554,59584,59613,59643,59672,59702,59731,59761,59791,59820,59850,59879,59909,59939,59968,59997,60027,60056,60086,60115,60145,60174,60204,60234,60264,60293,60323,60352,60381,60411,60440,60469,60499,60528,60558,60588,60618,60648,60677,60707,60736,60765,60795,60824,60853,60883,60912,60942,60972,61002,61031,61061,61090,61120,61149,61179,61208,61237,61267,61296,61326,61356,61385,61415,61445,61474,61504,61533,61563,61592,61621,61651,61680,61710,61739,61769,61799,61828,
61858,61888,61917,61947,61976,62006,62035,62064,62094,62123,62153,62182,62212,62242,62271,62301,62331,62360,62390,62419,62448,62478,62507,62537,62566,62596,62625,62655,62685,62715,62744,62774,62803,62832,62862,62891,62921,62950,62980,63009,63039,63069,63099,63128,63157,63187,63216,63246,63275,63305,63334,63363,63393,63423,63453,63482,63512,63541,63571,63600,63630,63659,63689,63718,63747,63777,63807,63836,63866,63895,63925,63955,63984,64014,64043,64073,64102,64131,64161,64190,64220,64249,64279,64309,
64339,64368,64398,64427,64457,64486,64515,64545,64574,64603,64633,64663,64692,64722,64752,64782,64811,64841,64870,64899,64929,64958,64987,65017,65047,65076,65106,65136,65166,65195,65225,65254,65283,65313,65342,65371,65401,65431,65460,65490,65520,65549,65579,65608,65638,65667,65697,65726,65755,65785,65815,65844,65874,65903,65933,65963,65992,66022,66051,66081,66110,66140,66169,66199,66228,66258,66287,66317,66346,66376,66405,66435,66465,66494,66524,66553,66583,66612,66641,66671,66700,66730,66760,66789,
66819,66849,66878,66908,66937,66967,66996,67025,67055,67084,67114,67143,67173,67203,67233,67262,67292,67321,67351,67380,67409,67439,67468,67497,67527,67557,67587,67617,67646,67676,67705,67735,67764,67793,67823,67852,67882,67911,67941,67971,68E3,68030,68060,68089,68119,68148,68177,68207,68236,68266,68295,68325,68354,68384,68414,68443,68473,68502,68532,68561,68591,68620,68650,68679,68708,68738,68768,68797,68827,68857,68886,68916,68946,68975,69004,69034,69063,69092,69122,69152,69181,69211,69240,69270,
69300,69330,69359,69388,69418,69447,69476,69506,69535,69565,69595,69624,69654,69684,69713,69743,69772,69802,69831,69861,69890,69919,69949,69978,70008,70038,70067,70097,70126,70156,70186,70215,70245,70274,70303,70333,70362,70392,70421,70451,70481,70510,70540,70570,70599,70629,70658,70687,70717,70746,70776,70805,70835,70864,70894,70924,70954,70983,71013,71042,71071,71101,71130,71159,71189,71218,71248,71278,71308,71337,71367,71397,71426,71455,71485,71514,71543,71573,71602,71632,71662,71691,71721,71751,
71781,71810,71839,71869,71898,71927,71957,71986,72016,72046,72075,72105,72135,72164,72194,72223,72253,72282,72311,72341,72370,72400,72429,72459,72489,72518,72548,72577,72607,72637,72666,72695,72725,72754,72784,72813,72843,72872,72902,72931,72961,72991,73020,73050,73080,73109,73139,73168,73197,73227,73256,73286,73315,73345,73375,73404,73434,73464,73493,73523,73552,73581,73611,73640,73669,73699,73729,73758,73788,73818,73848,73877,73907,73936,73965,73995,74024,74053,74083,74113,74142,74172,74202,74231,
74261,74291,74320,74349,74379,74408,74437,74467,74497,74526,74556,74586,74615,74645,74675,74704,74733,74763,74792,74822,74851,74881,74910,74940,74969,74999,75029,75058,75088,75117,75147,75176,75206,75235,75264,75294,75323,75353,75383,75412,75442,75472,75501,75531,75560,75590,75619,75648,75678,75707,75737,75766,75796,75826,75856,75885,75915,75944,75974,76003,76032,76062,76091,76121,76150,76180,76210,76239,76269,76299,76328,76358,76387,76416,76446,76475,76505,76534,76564,76593,76623,76653,76682,76712,
76741,76771,76801,76830,76859,76889,76918,76948,76977,77007,77036,77066,77096,77125,77155,77185,77214,77243,77273,77302,77332,77361,77390,77420,77450,77479,77509,77539,77569,77598,77627,77657,77686,77715,77745,77774,77804,77833,77863,77893,77923,77952,77982,78011,78041,78070,78099,78129,78158,78188,78217,78247,78277,78307,78336,78366,78395,78425,78454,78483,78513,78542,78572,78601,78631,78661,78690,78720,78750,78779,78808,78838,78867,78897,78926,78956,78985,79015,79044,79074,79104,79133,79163,79192,
79222,79251,79281,79310,79340,79369,79399,79428,79458,79487,79517,79546,79576,79606,79635,79665,79695,79724,79753,79783,79812,79841,79871,79900,79930,79960,79990]},{"../main":593,"object-assign":473}],593:[function(a,G,C){function q(){this.regionalOptions=[];this.regionalOptions[""]={invalidCalendar:"Calendar {0} not found",invalidDate:"Invalid {0} date",invalidMonth:"Invalid {0} month",invalidYear:"Invalid {0} year",differentCalendars:"Cannot mix {0} and {1} dates"};this.local=this.regionalOptions[""];
this.calendars={};this._localCals={}}function n(e,h,l,c){this._calendar=e;this._year=h;this._month=l;this._day=c;if(0===this._calendar._validateLevel&&!this._calendar.isValid(this._year,this._month,this._day))throw(k.local.invalidDate||k.regionalOptions[""].invalidDate).replace(/\{0\}/,this._calendar.local.name);}function m(e,h){e=""+e;return"000000".substring(0,h-e.length)+e}function f(){this.shortYearCutoff="+10"}function b(e){this.local=this.regionalOptions[e]||this.regionalOptions[""]}a=a("object-assign");
a(q.prototype,{instance:function(e,h){e=(e||"gregorian").toLowerCase();h=h||"";var l=this._localCals[e+"-"+h];!l&&this.calendars[e]&&(l=new this.calendars[e](h),this._localCals[e+"-"+h]=l);if(!l)throw(this.local.invalidCalendar||this.regionalOptions[""].invalidCalendar).replace(/\{0\}/,e);return l},newDate:function(e,h,l,c,g){c=(null!=e&&e.year?e.calendar():"string"===typeof c?this.instance(c,g):c)||this.instance();return c.newDate(e,h,l)},substituteDigits:function(e){return function(h){return(h+
"").replace(/[0-9]/g,function(l){return e[l]})}},substituteChineseDigits:function(e,h){return function(l){for(var c="",g=0;0<l;){var d=l%10;c=(0===d?"":e[d]+h[g])+c;g++;l=Math.floor(l/10)}0===c.indexOf(e[1]+h[1])&&(c=c.substr(1));return c||e[0]}}});a(n.prototype,{newDate:function(e,h,l){return this._calendar.newDate(null==e?this:e,h,l)},year:function(e){return 0===arguments.length?this._year:this.set(e,"y")},month:function(e){return 0===arguments.length?this._month:this.set(e,"m")},day:function(e){return 0===
arguments.length?this._day:this.set(e,"d")},date:function(e,h,l){if(!this._calendar.isValid(e,h,l))throw(k.local.invalidDate||k.regionalOptions[""].invalidDate).replace(/\{0\}/,this._calendar.local.name);this._year=e;this._month=h;this._day=l;return this},leapYear:function(){return this._calendar.leapYear(this)},epoch:function(){return this._calendar.epoch(this)},formatYear:function(){return this._calendar.formatYear(this)},monthOfYear:function(){return this._calendar.monthOfYear(this)},weekOfYear:function(){return this._calendar.weekOfYear(this)},
daysInYear:function(){return this._calendar.daysInYear(this)},dayOfYear:function(){return this._calendar.dayOfYear(this)},daysInMonth:function(){return this._calendar.daysInMonth(this)},dayOfWeek:function(){return this._calendar.dayOfWeek(this)},weekDay:function(){return this._calendar.weekDay(this)},extraInfo:function(){return this._calendar.extraInfo(this)},add:function(e,h){return this._calendar.add(this,e,h)},set:function(e,h){return this._calendar.set(this,e,h)},compareTo:function(e){if(this._calendar.name!==
e._calendar.name)throw(k.local.differentCalendars||k.regionalOptions[""].differentCalendars).replace(/\{0\}/,this._calendar.local.name).replace(/\{1\}/,e._calendar.local.name);e=this._year!==e._year?this._year-e._year:this._month!==e._month?this.monthOfYear()-e.monthOfYear():this._day-e._day;return 0===e?0:0>e?-1:1},calendar:function(){return this._calendar},toJD:function(){return this._calendar.toJD(this)},fromJD:function(e){return this._calendar.fromJD(e)},toJSDate:function(){return this._calendar.toJSDate(this)},
fromJSDate:function(e){return this._calendar.fromJSDate(e)},toString:function(){return(0>this.year()?"-":"")+m(Math.abs(this.year()),4)+"-"+m(this.month(),2)+"-"+m(this.day(),2)}});a(f.prototype,{_validateLevel:0,newDate:function(e,h,l){if(null==e)return this.today();e.year&&(this._validate(e,h,l,k.local.invalidDate||k.regionalOptions[""].invalidDate),l=e.day(),h=e.month(),e=e.year());return new n(this,e,h,l)},today:function(){return this.fromJSDate(new Date)},epoch:function(e){return 0>this._validate(e,
this.minMonth,this.minDay,k.local.invalidYear||k.regionalOptions[""].invalidYear).year()?this.local.epochs[0]:this.local.epochs[1]},formatYear:function(e){e=this._validate(e,this.minMonth,this.minDay,k.local.invalidYear||k.regionalOptions[""].invalidYear);return(0>e.year()?"-":"")+m(Math.abs(e.year()),4)},monthsInYear:function(e){this._validate(e,this.minMonth,this.minDay,k.local.invalidYear||k.regionalOptions[""].invalidYear);return 12},monthOfYear:function(e,h){e=this._validate(e,h,this.minDay,
k.local.invalidMonth||k.regionalOptions[""].invalidMonth);return(e.month()+this.monthsInYear(e)-this.firstMonth)%this.monthsInYear(e)+this.minMonth},fromMonthOfYear:function(e,h){h=(h+this.firstMonth-2*this.minMonth)%this.monthsInYear(e)+this.minMonth;this._validate(e,h,this.minDay,k.local.invalidMonth||k.regionalOptions[""].invalidMonth);return h},daysInYear:function(e){e=this._validate(e,this.minMonth,this.minDay,k.local.invalidYear||k.regionalOptions[""].invalidYear);return this.leapYear(e)?366:
365},dayOfYear:function(e,h,l){e=this._validate(e,h,l,k.local.invalidDate||k.regionalOptions[""].invalidDate);return e.toJD()-this.newDate(e.year(),this.fromMonthOfYear(e.year(),this.minMonth),this.minDay).toJD()+1},daysInWeek:function(){return 7},dayOfWeek:function(e,h,l){e=this._validate(e,h,l,k.local.invalidDate||k.regionalOptions[""].invalidDate);return(Math.floor(this.toJD(e))+2)%this.daysInWeek()},extraInfo:function(e,h,l){this._validate(e,h,l,k.local.invalidDate||k.regionalOptions[""].invalidDate);
return{}},add:function(e,h,l){this._validate(e,this.minMonth,this.minDay,k.local.invalidDate||k.regionalOptions[""].invalidDate);return this._correctAdd(e,this._add(e,h,l),h,l)},_add:function(e,h,l){this._validateLevel++;if("d"===l||"w"===l){h=e.toJD()+h*("w"===l?this.daysInWeek():1);var c=e.calendar().fromJD(h);this._validateLevel--;return[c.year(),c.month(),c.day()]}try{var g=e.year()+("y"===l?h:0),d=e.monthOfYear()+("m"===l?h:0);c=e.day();if("y"===l)e.month()!==this.fromMonthOfYear(g,d)&&(d=this.newDate(g,
e.month(),this.minDay).monthOfYear()),d=Math.min(d,this.monthsInYear(g)),c=Math.min(c,this.daysInMonth(g,this.fromMonthOfYear(g,d)));else if("m"===l){for(;d<this.minMonth;)g--,d+=this.monthsInYear(g);for(var p=this.monthsInYear(g);d>p-1+this.minMonth;)g++,d-=p,p=this.monthsInYear(g);c=Math.min(c,this.daysInMonth(g,this.fromMonthOfYear(g,d)))}var r=[g,this.fromMonthOfYear(g,d),c];this._validateLevel--;return r}catch(t){throw this._validateLevel--,t;}},_correctAdd:function(e,h,l,c){this.hasYearZero||
"y"!==c&&"m"!==c||0!==h[0]&&0<e.year()===0<h[0]||(h={y:[1,1,"y"],m:[1,this.monthsInYear(-1),"m"],w:[this.daysInWeek(),this.daysInYear(-1),"d"],d:[1,this.daysInYear(-1),"d"]}[c],h=this._add(e,l*h[0]+(0>l?-1:1)*h[1],h[2]));return e.date(h[0],h[1],h[2])},set:function(e,h,l){this._validate(e,this.minMonth,this.minDay,k.local.invalidDate||k.regionalOptions[""].invalidDate);var c="y"===l?h:e.year(),g="m"===l?h:e.month();h="d"===l?h:e.day();if("y"===l||"m"===l)h=Math.min(h,this.daysInMonth(c,g));return e.date(c,
g,h)},isValid:function(e,h,l){this._validateLevel++;var c=this.hasYearZero||0!==e;c&&(e=this.newDate(e,h,this.minDay),c=h>=this.minMonth&&h-this.minMonth<this.monthsInYear(e)&&l>=this.minDay&&l-this.minDay<this.daysInMonth(e));this._validateLevel--;return c},toJSDate:function(e,h,l){e=this._validate(e,h,l,k.local.invalidDate||k.regionalOptions[""].invalidDate);return k.instance().fromJD(this.toJD(e)).toJSDate()},fromJSDate:function(e){return this.fromJD(k.instance().fromJSDate(e).toJD())},_validate:function(e,
h,l,c){if(e.year){if(0===this._validateLevel&&this.name!==e.calendar().name)throw(k.local.differentCalendars||k.regionalOptions[""].differentCalendars).replace(/\{0\}/,this.local.name).replace(/\{1\}/,e.calendar().local.name);return e}try{this._validateLevel++;if(1===this._validateLevel&&!this.isValid(e,h,l))throw c.replace(/\{0\}/,this.local.name);var g=this.newDate(e,h,l);this._validateLevel--;return g}catch(d){throw this._validateLevel--,d;}}});b.prototype=new f;a(b.prototype,{name:"Gregorian",
jdEpoch:1721425.5,daysPerMonth:[31,28,31,30,31,30,31,31,30,31,30,31],hasYearZero:!1,minMonth:1,firstMonth:1,minDay:1,regionalOptions:{"":{name:"Gregorian",epochs:["BCE","CE"],monthNames:"January February March April May June July August September October November December".split(" "),monthNamesShort:"Jan Feb Mar Apr May Jun Jul Aug Sep Oct Nov Dec".split(" "),dayNames:"Sunday Monday Tuesday Wednesday Thursday Friday Saturday".split(" "),dayNamesShort:"Sun Mon Tue Wed Thu Fri Sat".split(" "),dayNamesMin:"Su Mo Tu We Th Fr Sa".split(" "),
digits:null,dateFormat:"mm/dd/yyyy",firstDay:0,isRTL:!1}},leapYear:function(e){e=this._validate(e,this.minMonth,this.minDay,k.local.invalidYear||k.regionalOptions[""].invalidYear);e=e.year()+(0>e.year()?1:0);return 0===e%4&&(0!==e%100||0===e%400)},weekOfYear:function(e,h,l){e=this.newDate(e,h,l);e.add(4-(e.dayOfWeek()||7),"d");return Math.floor((e.dayOfYear()-1)/7)+1},daysInMonth:function(e,h){e=this._validate(e,h,this.minDay,k.local.invalidMonth||k.regionalOptions[""].invalidMonth);return this.daysPerMonth[e.month()-
1]+(2===e.month()&&this.leapYear(e.year())?1:0)},weekDay:function(e,h,l){return 6>(this.dayOfWeek(e,h,l)||7)},toJD:function(e,h,l){l=this._validate(e,h,l,k.local.invalidDate||k.regionalOptions[""].invalidDate);e=l.year();h=l.month();l=l.day();0>e&&e++;3>h&&(h+=12,e--);var c=Math.floor(e/100);return Math.floor(365.25*(e+4716))+Math.floor(30.6001*(h+1))+l+(2-c+Math.floor(c/4))-1524.5},fromJD:function(e){e=Math.floor(e+.5);var h=Math.floor((e-1867216.25)/36524.25);h=e+1+h-Math.floor(h/4);var l=h+1524;
e=Math.floor((l-122.1)/365.25);var c=Math.floor(365.25*e);h=Math.floor((l-c)/30.6001);l=l-c-Math.floor(30.6001*h);h-=13.5<h?13:1;e-=2.5<h?4716:4715;0>=e&&e--;return this.newDate(e,h,l)},toJSDate:function(e,h,l){e=this._validate(e,h,l,k.local.invalidDate||k.regionalOptions[""].invalidDate);e=new Date(e.year(),e.month()-1,e.day());e.setHours(0);e.setMinutes(0);e.setSeconds(0);e.setMilliseconds(0);e.setHours(12<e.getHours()?e.getHours()+2:0);return e},fromJSDate:function(e){return this.newDate(e.getFullYear(),
e.getMonth()+1,e.getDate())}});var k=G.exports=new q;k.cdate=n;k.baseCalendar=f;k.calendars.gregorian=b},{"object-assign":473}],594:[function(a,G,C){G=a("object-assign");var q=a("./main");G(q.regionalOptions[""],{invalidArguments:"Invalid arguments",invalidFormat:"Cannot format a date from another calendar",missingNumberAt:"Missing number at position {0}",unknownNameAt:"Unknown name at position {0}",unexpectedLiteralAt:"Unexpected literal at position {0}",unexpectedText:"Additional text found at end"});
q.local=q.regionalOptions[""];G(q.cdate.prototype,{formatDate:function(n,m){"string"!==typeof n&&(m=n,n="");return this._calendar.formatDate(n||"",this,m)}});G(q.baseCalendar.prototype,{UNIX_EPOCH:q.instance().newDate(1970,1,1).toJD(),SECS_PER_DAY:86400,TICKS_EPOCH:q.instance().jdEpoch,TICKS_PER_DAY:864E9,ATOM:"yyyy-mm-dd",COOKIE:"D, dd M yyyy",FULL:"DD, MM d, yyyy",ISO_8601:"yyyy-mm-dd",JULIAN:"J",RFC_822:"D, d M yy",RFC_850:"DD, dd-M-yy",RFC_1036:"D, d M yy",RFC_1123:"D, d M yyyy",RFC_2822:"D, d M yyyy",
RSS:"D, d M yy",TICKS:"!",TIMESTAMP:"@",W3C:"yyyy-mm-dd",formatDate:function(n,m,f){"string"!==typeof n&&(f=m,m=n,n="");if(!m)return"";if(m.calendar()!==this)throw q.local.invalidFormat||q.regionalOptions[""].invalidFormat;n=n||this.local.dateFormat;f=f||{};for(var b=f.dayNamesShort||this.local.dayNamesShort,k=f.dayNames||this.local.dayNames,e=f.monthNumbers||this.local.monthNumbers,h=f.monthNamesShort||this.local.monthNamesShort,l=f.monthNames||this.local.monthNames,c=function(F,D){for(var u=1;z+
u<n.length&&n.charAt(z+u)===F;)u++;z+=u-1;return 1<Math.floor(u/(D||1))},g=function(F,D,u,B){D=""+D;if(c(F,B))for(;D.length<u;)D="0"+D;return D},d=function(F,D,u,B){return c(F)?B[D]:u[D]},p=this,r=function(F){return"function"===typeof e?e.call(p,F,c("m")):x(g("m",F.month(),2))},t=function(F,D){return D?"function"===typeof l?l.call(p,F):l[F.month()-p.minMonth]:"function"===typeof h?h.call(p,F):h[F.month()-p.minMonth]},w=this.local.digits,x=function(F){return f.localNumbers&&w?w(F):F},y="",A=!1,z=0;z<
n.length;z++)if(A)"'"!==n.charAt(z)||c("'")?y+=n.charAt(z):A=!1;else switch(n.charAt(z)){case "d":y+=x(g("d",m.day(),2));break;case "D":y+=d("D",m.dayOfWeek(),b,k);break;case "o":y+=g("o",m.dayOfYear(),3);break;case "w":y+=g("w",m.weekOfYear(),2);break;case "m":y+=r(m);break;case "M":y+=t(m,c("M"));break;case "y":y+=c("y",2)?m.year():(10>m.year()%100?"0":"")+m.year()%100;break;case "Y":c("Y",2);y+=m.formatYear();break;case "J":y+=m.toJD();break;case "@":y+=(m.toJD()-this.UNIX_EPOCH)*this.SECS_PER_DAY;
break;case "!":y+=(m.toJD()-this.TICKS_EPOCH)*this.TICKS_PER_DAY;break;case "'":c("'")?y+="'":A=!0;break;default:y+=n.charAt(z)}return y},parseDate:function(n,m,f){if(null==m)throw q.local.invalidArguments||q.regionalOptions[""].invalidArguments;m="object"===typeof m?m.toString():m+"";if(""===m)return null;n=n||this.local.dateFormat;f=f||{};var b=f.shortYearCutoff||this.shortYearCutoff;b="string"!==typeof b?b:this.today().year()%100+parseInt(b,10);for(var k=f.dayNamesShort||this.local.dayNamesShort,
e=f.dayNames||this.local.dayNames,h=f.parseMonth||this.local.parseMonth,l=f.monthNumbers||this.local.monthNumbers,c=f.monthNamesShort||this.local.monthNamesShort,g=f.monthNames||this.local.monthNames,d=f=-1,p=-1,r=-1,t=-1,w=!1,x=!1,y=function(N,M){for(var E=1;J+E<n.length&&n.charAt(J+E)===N;)E++;J+=E-1;return 1<Math.floor(E/(M||1))},A=function(N,M){M=y(N,M);N=[2,3,M?4:2,M?4:2,10,11,20]["oyYJ@!".indexOf(N)+1];N=new RegExp("^-?\\d{1,"+N+"}");N=m.substring(I).match(N);if(!N)throw(q.local.missingNumberAt||
q.regionalOptions[""].missingNumberAt).replace(/\{0\}/,I);I+=N[0].length;return parseInt(N[0],10)},z=this,F=function(){if("function"===typeof l){y("m");var N=l.call(z,m.substring(I));I+=N.length;return N}return A("m")},D=function(N,M,E,L){N=y(N,L)?E:M;for(M=0;M<N.length;M++)if(m.substr(I,N[M].length).toLowerCase()===N[M].toLowerCase())return I+=N[M].length,M+z.minMonth;throw(q.local.unknownNameAt||q.regionalOptions[""].unknownNameAt).replace(/\{0\}/,I);},u=function(){if("function"===typeof g){var N=
y("M")?g.call(z,m.substring(I)):c.call(z,m.substring(I));I+=N.length;return N}return D("M",c,g)},B=function(){if(m.charAt(I)!==n.charAt(J))throw(q.local.unexpectedLiteralAt||q.regionalOptions[""].unexpectedLiteralAt).replace(/\{0\}/,I);I++},I=0,J=0;J<n.length;J++)if(x)"'"!==n.charAt(J)||y("'")?B():x=!1;else switch(n.charAt(J)){case "d":r=A("d");break;case "D":D("D",k,e);break;case "o":t=A("o");break;case "w":A("w");break;case "m":p=F();break;case "M":p=u();break;case "y":d=J;w=!y("y",2);J=d;d=A("y",
2);break;case "Y":d=A("Y",2);break;case "J":f=A("J")+.5;"."===m.charAt(I)&&(I++,A("J"));break;case "@":f=A("@")/this.SECS_PER_DAY+this.UNIX_EPOCH;break;case "!":f=A("!")/this.TICKS_PER_DAY+this.TICKS_EPOCH;break;case "*":I=m.length;break;case "'":y("'")?B():x=!0;break;default:B()}if(I<m.length)throw q.local.unexpectedText||q.regionalOptions[""].unexpectedText;-1===d?d=this.today().year():100>d&&w&&(d+=-1===b?1900:this.today().year()-this.today().year()%100-(d<=b?0:100));"string"===typeof p&&(p=h.call(this,
d,p));if(-1<t)for(p=1,r=t,b=this.daysInMonth(d,p);r>b;b=this.daysInMonth(d,p))p++,r-=b;return-1<f?this.fromJD(f):this.newDate(d,p,r)},determineDate:function(n,m,f,b,k){f&&"object"!==typeof f&&(k=b,b=f,f=null);"string"!==typeof b&&(k=b,b="");m=m?m.newDate():null;if(null==n)n=m;else{if("string"===typeof n)a:{try{var e=this.parseDate(b,n,k);break a}catch(h){}n=n.toLowerCase();f=(n.match(/^c/)&&f?f.newDate():null)||this.today();b=/([+-]?[0-9]+)\s*(d|w|m|y)?/g;for(k=b.exec(n);k;)f.add(parseInt(k[1],10),
k[2]||"d"),k=b.exec(n);e=f}else e="number"===typeof n?isNaN(n)||Infinity===n||-Infinity===n?m:this.today().add(n,"d"):this.newDate(n);n=e}return n}})},{"./main":593,"object-assign":473}],595:[function(a,G,C){G.exports=a("cwise-compiler")({args:["array",{offset:[1],array:0},"scalar","scalar","index"],pre:{body:"{}",args:[],thisVars:[],localVars:[]},post:{body:"{}",args:[],thisVars:[],localVars:[]},body:{body:"{\n        var _inline_1_da \x3d _inline_1_arg0_ - _inline_1_arg3_\n        var _inline_1_db \x3d _inline_1_arg1_ - _inline_1_arg3_\n        if((_inline_1_da \x3e\x3d 0) !\x3d\x3d (_inline_1_db \x3e\x3d 0)) {\n          _inline_1_arg2_.push(_inline_1_arg4_[0] + 0.5 + 0.5 * (_inline_1_da + _inline_1_db) / (_inline_1_da - _inline_1_db))\n        }\n      }",
args:[{name:"_inline_1_arg0_",lvalue:!1,rvalue:!0,count:1},{name:"_inline_1_arg1_",lvalue:!1,rvalue:!0,count:1},{name:"_inline_1_arg2_",lvalue:!1,rvalue:!0,count:1},{name:"_inline_1_arg3_",lvalue:!1,rvalue:!0,count:2},{name:"_inline_1_arg4_",lvalue:!1,rvalue:!0,count:1}],thisVars:[],localVars:["_inline_1_da","_inline_1_db"]},funcName:"zeroCrossings"})},{"cwise-compiler":151}],596:[function(a,G,C){G.exports=function(n,m){var f=[];m=+m||0;q(n.hi(n.shape[0]-1),f,m);return f};var q=a("./lib/zc-core")},
{"./lib/zc-core":595}],597:[function(a,G,C){G.exports=[{path:"",backoff:0},{path:"M-2.4,-3V3L0.6,0Z",backoff:.6},{path:"M-3.7,-2.5V2.5L1.3,0Z",backoff:1.3},{path:"M-4.45,-3L-1.65,-0.2V0.2L-4.45,3L1.55,0Z",backoff:1.55},{path:"M-2.2,-2.2L-0.2,-0.2V0.2L-2.2,2.2L-1.4,3L1.6,0L-1.4,-3Z",backoff:1.6},{path:"M-4.4,-2.1L-0.6,-0.2V0.2L-4.4,2.1L-4,3L2,0L-4,-3Z",backoff:2},{path:"M2,0A2,2 0 1,1 0,-2A2,2 0 0,1 2,0Z",backoff:0,noRotate:!0},{path:"M2,2V-2H-2V2Z",backoff:0,noRotate:!0}]},{}],598:[function(a,G,C){C=
a("./arrow_paths");var q=a("../../plots/font_attributes"),n=a("../../plots/cartesian/constants"),m=a("../../plot_api/plot_template").templatedArray;a("../../constants/axis_placeable_objects");G.exports=m("annotation",{visible:{valType:"boolean",dflt:!0,editType:"calc+arraydraw"},text:{valType:"string",editType:"calc+arraydraw"},textangle:{valType:"angle",dflt:0,editType:"calc+arraydraw"},font:q({editType:"calc+arraydraw",colorEditType:"arraydraw"}),width:{valType:"number",min:1,dflt:null,editType:"calc+arraydraw"},
height:{valType:"number",min:1,dflt:null,editType:"calc+arraydraw"},opacity:{valType:"number",min:0,max:1,dflt:1,editType:"arraydraw"},align:{valType:"enumerated",values:["left","center","right"],dflt:"center",editType:"arraydraw"},valign:{valType:"enumerated",values:["top","middle","bottom"],dflt:"middle",editType:"arraydraw"},bgcolor:{valType:"color",dflt:"rgba(0,0,0,0)",editType:"arraydraw"},bordercolor:{valType:"color",dflt:"rgba(0,0,0,0)",editType:"arraydraw"},borderpad:{valType:"number",min:0,
dflt:1,editType:"calc+arraydraw"},borderwidth:{valType:"number",min:0,dflt:1,editType:"calc+arraydraw"},showarrow:{valType:"boolean",dflt:!0,editType:"calc+arraydraw"},arrowcolor:{valType:"color",editType:"arraydraw"},arrowhead:{valType:"integer",min:0,max:C.length,dflt:1,editType:"arraydraw"},startarrowhead:{valType:"integer",min:0,max:C.length,dflt:1,editType:"arraydraw"},arrowside:{valType:"flaglist",flags:["end","start"],extras:["none"],dflt:"end",editType:"arraydraw"},arrowsize:{valType:"number",
min:.3,dflt:1,editType:"calc+arraydraw"},startarrowsize:{valType:"number",min:.3,dflt:1,editType:"calc+arraydraw"},arrowwidth:{valType:"number",min:.1,editType:"calc+arraydraw"},standoff:{valType:"number",min:0,dflt:0,editType:"calc+arraydraw"},startstandoff:{valType:"number",min:0,dflt:0,editType:"calc+arraydraw"},ax:{valType:"any",editType:"calc+arraydraw"},ay:{valType:"any",editType:"calc+arraydraw"},axref:{valType:"enumerated",dflt:"pixel",values:["pixel",n.idRegex.x.toString()],editType:"calc"},
ayref:{valType:"enumerated",dflt:"pixel",values:["pixel",n.idRegex.y.toString()],editType:"calc"},xref:{valType:"enumerated",values:["paper",n.idRegex.x.toString()],editType:"calc"},x:{valType:"any",editType:"calc+arraydraw"},xanchor:{valType:"enumerated",values:["auto","left","center","right"],dflt:"auto",editType:"calc+arraydraw"},xshift:{valType:"number",dflt:0,editType:"calc+arraydraw"},yref:{valType:"enumerated",values:["paper",n.idRegex.y.toString()],editType:"calc"},y:{valType:"any",editType:"calc+arraydraw"},
yanchor:{valType:"enumerated",values:["auto","top","middle","bottom"],dflt:"auto",editType:"calc+arraydraw"},yshift:{valType:"number",dflt:0,editType:"calc+arraydraw"},clicktoshow:{valType:"enumerated",values:[!1,"onoff","onout"],dflt:!1,editType:"arraydraw"},xclick:{valType:"any",editType:"arraydraw"},yclick:{valType:"any",editType:"arraydraw"},hovertext:{valType:"string",editType:"arraydraw"},hoverlabel:{bgcolor:{valType:"color",editType:"arraydraw"},bordercolor:{valType:"color",editType:"arraydraw"},
font:q({editType:"arraydraw"}),editType:"arraydraw"},captureevents:{valType:"boolean",editType:"arraydraw"},editType:"calc",_deprecated:{ref:{valType:"string",editType:"calc"}}})},{"../../constants/axis_placeable_objects":718,"../../plot_api/plot_template":788,"../../plots/cartesian/constants":805,"../../plots/font_attributes":827,"./arrow_paths":597}],599:[function(a,G,C){function q(k){m.filterVisible(k._fullLayout.annotations).forEach(function(e){var h=f.getFromId(k,e.xref),l=f.getFromId(k,e.yref),
c=f.getRefType(e.xref),g=f.getRefType(e.yref);e._extremes={};"range"===c&&n(e,h);"range"===g&&n(e,l)})}function n(k,e){var h=e._id,l=h.charAt(0),c=k[l],g=k["a"+l],d=k["_"+l+"padplus"],p=k["_"+l+"padminus"],r={x:1,y:-1}[l]*k[l+"shift"],t=3*k.arrowsize*k.arrowwidth||0,w=t+r,x=t-r,y=3*k.startarrowsize*k.arrowwidth||0;t=y+r;r=y-r;k["a"+l+"ref"]===k[l+"ref"]?(l=f.findExtremes(e,[e.r2c(c)],{ppadplus:w,ppadminus:x}),e=f.findExtremes(e,[e.r2c(g)],{ppadplus:Math.max(d,t),ppadminus:Math.max(p,r)}),e={min:[l.min[0],
e.min[0]],max:[l.max[0],e.max[0]]}):(t=g?t+g:t,r=g?r-g:r,e=f.findExtremes(e,[e.r2c(c)],{ppadplus:Math.max(d,w,t),ppadminus:Math.max(p,x,r)}));k._extremes[h]=e}var m=a("../../lib"),f=a("../../plots/cartesian/axes"),b=a("./draw").draw;G.exports=function(k){if(m.filterVisible(k._fullLayout.annotations).length&&k._fullData.length)return m.syncOrAsync([b,q],k)}},{"../../lib":750,"../../plots/cartesian/axes":799,"./draw":604}],600:[function(a,G,C){function q(k,e){k=k._fullLayout.annotations;var h=[],l=
[],c=[],g=(e||[]).length,d,p,r;for(d=0;d<k.length;d++){var t=k[d];if(r=t.clicktoshow){for(p=0;p<g;p++){var w=e[p];var x=w.xaxis;var y=w.yaxis;if(x._id===t.xref&&y._id===t.yref&&x.d2r(w.x)===n(t._xclick,x)&&y.d2r(w.y)===n(t._yclick,y)){w=t.visible?"onout"===r?l:c:h;w.push(d);break}}p===g&&t.visible&&"onout"===r&&l.push(d)}}return{on:h,off:l,explicitOff:c}}function n(k,e){return"log"===e.type?e.l2r(k):e.d2r(k)}var m=a("../../lib"),f=a("../../registry"),b=a("../../plot_api/plot_template").arrayEditor;
G.exports={hasClickToShow:function(k,e){k=q(k,e);return 0<k.on.length||0<k.explicitOff.length},onClick:function(k,e){var h=q(k,e);e=h.on;h=h.off.concat(h.explicitOff);var l={},c=k._fullLayout.annotations,g;if(e.length||h.length){for(g=0;g<e.length;g++){var d=b(k.layout,"annotations",c[e[g]]);d.modifyItem("visible",!0);m.extendFlat(l,d.getUpdateObj())}for(g=0;g<h.length;g++)d=b(k.layout,"annotations",c[h[g]]),d.modifyItem("visible",!1),m.extendFlat(l,d.getUpdateObj());return f.call("update",k,{},l)}}}},
{"../../lib":750,"../../plot_api/plot_template":788,"../../registry":882}],601:[function(a,G,C){var q=a("../../lib"),n=a("../color");G.exports=function(m,f,b,k){k("opacity");m=k("bgcolor");var e=k("bordercolor");e=n.opacity(e);k("borderpad");var h=k("borderwidth"),l=k("showarrow");k("text",l?" ":b._dfltTitle.annotation);k("textangle");q.coerceFont(k,"font",b.font);k("width");k("align");k("height")&&k("valign");if(l){l=k("arrowside");if(-1!==l.indexOf("end")){var c=k("arrowhead");var g=k("arrowsize")}-1!==
l.indexOf("start")&&(k("startarrowhead",c),k("startarrowsize",g));k("arrowcolor",e?f.bordercolor:n.defaultLine);k("arrowwidth",2*(e&&h||1));k("standoff");k("startstandoff")}f=k("hovertext");b=b.hoverlabel||{};f&&(m=k("hoverlabel.bgcolor",b.bgcolor||(n.opacity(m)?n.rgb(m):n.defaultLine)),m=k("hoverlabel.bordercolor",b.bordercolor||n.contrast(m)),q.coerceFont(k,"hoverlabel.font",{family:b.font.family,size:b.font.size,color:b.font.color||m}));k("captureevents",!!f)}},{"../../lib":750,"../color":615}],
602:[function(a,G,C){var q=a("fast-isnumeric"),n=a("../../lib/to_log_range");G.exports=function(m,f,b,k){function e(d){var p=l[d];p=h?n(p,f.range):Math.pow(10,p);q(p)||(p=null);k(c+d,p)}f=f||{};var h="log"===b&&"linear"===f.type;b="linear"===b&&"log"===f.type;if(h||b){m=m._fullLayout.annotations;b=f._id.charAt(0);for(var l,c,g=0;g<m.length;g++)l=m[g],c="annotations["+g+"].",l[b+"ref"]===f._id&&e(b),l["a"+b+"ref"]===f._id&&e("a"+b)}}},{"../../lib/to_log_range":776,"fast-isnumeric":241}],603:[function(a,
G,C){function q(e,h,l){function c(z,F){return n.coerce(e,h,k,z,F)}var g=c("visible"),d=c("clicktoshow");if(g||d){b(e,h,l,c);g=h.showarrow;var p=["x","y"],r=[-10,-30];l={_fullLayout:l};for(var t=0;2>t;t++){var w=p[t],x=m.coerceRef(e,h,l,w,"","paper");"paper"!==x&&m.getFromId(l,x)._annIndices.push(h._index);m.coercePosition(h,l,c,x,w,.5);if(g){var y="a"+w,A=m.coerceRef(e,h,l,y,"pixel",["pixel","paper"]);"pixel"!==A&&A!==x&&(A=h[y]="pixel");m.coercePosition(h,l,c,A,y,"pixel"===A?r[t]:.4)}c(w+"anchor");
c(w+"shift")}n.noneOrAll(e,h,["x","y"]);g&&n.noneOrAll(e,h,["ax","ay"]);d&&(d=c("xclick"),g=c("yclick"),h._xclick=void 0===d?h.x:m.cleanPosition(d,l,h.xref),h._yclick=void 0===g?h.y:m.cleanPosition(g,l,h.yref))}}var n=a("../../lib"),m=a("../../plots/cartesian/axes"),f=a("../../plots/array_container_defaults"),b=a("./common_defaults"),k=a("./attributes");G.exports=function(e,h){f(e,h,{name:"annotations",handleItemDefaults:q})}},{"../../lib":750,"../../plots/array_container_defaults":794,"../../plots/cartesian/axes":799,
"./attributes":598,"./common_defaults":601}],604:[function(a,G,C){function q(x,y){var A=x._fullLayout.annotations[y]||{},z=h.getFromId(x,A.xref),F=h.getFromId(x,A.yref);z&&z.setScale();F&&F.setScale();m(x,A,y,!1,z,F)}function n(x,y,A,z,F){var D=F[A];F=F[A+"ref"];A=-1!==A.indexOf("y");F="domain"===h.getRefType(F);z=A?z.h:z.w;return x?F?D+(A?-y:y)/x._length:x.p2r(x.r2p(D)+y):D+(A?-y:y)/z}function m(x,y,A,z,F,D){function u(pa){pa={index:A,annotation:y._input,fullAnnotation:y,event:pa};z&&(pa.subplotId=
z);return pa}function B(pa){pa.call(c.font,qa).attr({"text-anchor":{left:"start",right:"end"}[y.align]||"middle"});d.convertToTspans(pa,x,I);return pa}function I(){function pa(Ca,Qa){"auto"===Qa&&(Qa=Ca<1/3?"left":Ca>2/3?"right":"center");return{center:0,middle:0,left:.5,bottom:-.5,right:-.5,top:.5}[Qa]}var oa=Y.selectAll("a");1===oa.size()&&oa.text()===Y.text()&&ka.insert("a",":first-child").attr({"xlink:xlink:href":oa.attr("xlink:href"),"xlink:xlink:show":oa.attr("xlink:show")}).style({cursor:"pointer"}).node().appendChild(sa.node());
oa=ka.select(".annotation-text-math-group");for(var ua=!oa.empty(),ya=c.bBox((ua?oa:Y).node()),ja=ya.width,za=ya.height,Ba=y.width||ja,Ma=y.height||za,Oa=Math.round(Ba+2*ca),Ia=Math.round(Ma+2*ca),Pa=!1,Fa=["x","y"],Na=0;Na<Fa.length;Na++){var $a=Fa[Na],cb=y[$a+"ref"]||$a,mb=y["a"+$a+"ref"],Ka={x:F,y:D}[$a],Ua=(V+("x"===$a?0:-90))*Math.PI/180,Ea=Oa*Math.cos(Ua),Ya=Ia*Math.sin(Ua);Ua=Math.abs(Ea)+Math.abs(Ya);var ab=y[$a+"anchor"],Wa=y[$a+"shift"]*("x"===$a?1:-1),Ja=T[$a];var Sa=h.getRefType(cb);if(Ka&&
"domain"!==Sa){Sa=Ka.r2fraction(y[$a]);if(0>Sa||1<Sa)if(mb===cb){if(Sa=Ka.r2fraction(y["a"+$a]),0>Sa||1<Sa)Pa=!0}else Pa=!0;Sa=Ka._offset+Ka.r2p(y[$a]);var fb=.5}else Sa="domain"===Sa,"x"===$a?(fb=y[$a],Sa=Sa?Ka._offset+Ka._length*fb:Sa=N.l+N.w*fb):(fb=1-y[$a],Sa=Sa?Ka._offset+Ka._length*fb:Sa=N.t+N.h*fb),fb=y.showarrow?.5:fb;y.showarrow?(Ja.head=Sa,ab=y["a"+$a],Ea=Ea*pa(.5,y.xanchor)-Ya*pa(.5,y.yanchor),mb===cb?(Ya=h.getRefType(mb),"domain"===Ya?("y"===$a&&(ab=1-ab),Ja.tail=Ka._offset+Ka._length*
ab):"paper"===Ya?"y"===$a?(ab=1-ab,Ja.tail=N.t+N.h*ab):Ja.tail=N.l+N.w*ab:Ja.tail=Ka._offset+Ka.r2p(ab),Ka=Ea):(Ja.tail=Sa+ab,Ka=Ea+ab),Ja.text=Ja.tail+Ea,Ya=J["x"===$a?"width":"height"],"paper"===cb&&(Ja.head=e.constrain(Ja.head,1,Ya-1)),"pixel"===mb&&(cb=-Math.max(Ja.tail-3,Ja.text),mb=Math.min(Ja.tail+3,Ja.text)-Ya,0<cb?(Ja.tail+=cb,Ja.text+=cb):0<mb&&(Ja.tail-=mb,Ja.text-=mb)),Ja.tail+=Wa,Ja.head+=Wa):(Ka=Ea=Ua*pa(fb,ab),Ja.text=Sa+Ea);Ja.text+=Wa;Ea+=Wa;Ka+=Wa;y["_"+$a+"padplus"]=Ua/2+Ka;y["_"+
$a+"padminus"]=Ua/2-Ka;y["_"+$a+"size"]=Ua;y["_"+$a+"shift"]=Ea}if(Pa)ka.remove();else{Fa=Pa=0;"left"!==y.align&&(Pa=(Ba-ja)*("center"===y.align?.5:1));"top"!==y.valign&&(Fa=(Ma-za)*("middle"===y.valign?.5:1));ua?oa.select("svg").attr({x:ca+Pa-1,y:ca+Fa}).call(c.setClipUrl,ma?O:null,x):Y.call(d.positionText,ca+Pa-ya.left,ca+Fa-ya.top).call(c.setClipUrl,ma?O:null,x);ra.select("rect").call(c.setRect,ca,ca,Ba,Ma);sa.call(c.setRect,ha/2,ha/2,Oa-ha,Ia-ha);ka.call(c.setTranslate,Math.round(T.x.text-Oa/
2),Math.round(T.y.text-Ia/2));ba.attr({transform:"rotate("+V+","+T.x.text+","+T.y.text+")"});var nb=function(Ca,Qa){X.selectAll(".annotation-arrow-g").remove();var gb=T.x.head,Va=T.y.head,db=T.x.tail+Ca,qb=T.y.tail+Qa,Kb=T.x.text+Ca;Ca=T.y.text+Qa;Qa=e.rotationXYMatrix(V,Kb,Ca);var Ob=e.apply2DTransform(Qa);Qa=e.apply2DTransform2(Qa);var cc=+sa.attr("width"),kc=+sa.attr("height");Kb-=.5*cc;cc=Kb+cc;Ca-=.5*kc;kc=Ca+kc;Qa=[[Kb,Ca,Kb,kc],[Kb,kc,cc,kc],[cc,kc,cc,Ca],[cc,Ca,Kb,Ca]].map(Qa);if(!Qa.reduce(function(cd,
gd){return cd^!!e.segmentsIntersect(gb,Va,gb+1E6,Va+1E6,gd[0],gd[1],gd[2],gd[3])},!1)){Qa.forEach(function(cd){if(cd=e.segmentsIntersect(db,qb,gb,Va,cd[0],cd[1],cd[2],cd[3]))db=cd.x,qb=cd.y});Qa=y.arrowwidth;kc=y.arrowcolor;Ca=y.arrowside;var qc=X.append("g").style({opacity:l.opacity(kc)}).classed("annotation-arrow-g",!0);kc=qc.append("path").attr("d","M"+db+","+qb+"L"+gb+","+Va).style("stroke-width",Qa+"px").call(l.stroke,l.rgb(kc));w(kc,Ca,y);if(M.annotationPosition&&kc.node().parentNode&&!z){Ca=
gb;kc=Va;y.standoff&&(Kb=Math.sqrt(Math.pow(gb-db,2)+Math.pow(Va-qb,2)),Ca+=y.standoff*(db-gb)/Kb,kc+=y.standoff*(qb-Va)/Kb);Qa=qc.append("path").classed("annotation-arrow",!0).classed("anndrag",!0).classed("cursor-move",!0).attr({d:"M3,3H-3V-3H3ZM0,0L"+(db-Ca)+","+(qb-kc),transform:"translate("+Ca+","+kc+")"}).style("stroke-width",Qa+6+"px").call(l.stroke,"rgba(0,0,0,0)").call(l.fill,"rgba(0,0,0,0)");var Pc,Qc;r.init({element:Qa.node(),gd:x,prepFn:function(){var cd=c.getTranslate(ka);Pc=cd.x;Qc=
cd.y;F&&F.autorange&&Q(F._name+".autorange",!0);D&&D.autorange&&Q(D._name+".autorange",!0)},moveFn:function(cd,gd){var kd=Ob(Pc,Qc),Cb=kd[0]+cd;kd=kd[1]+gd;ka.call(c.setTranslate,Cb,kd);S("x",n(F,cd,"x",N,y));S("y",n(D,gd,"y",N,y));y.axref===y.xref&&S("ax",n(F,cd,"ax",N,y));y.ayref===y.yref&&S("ay",n(D,gd,"ay",N,y));qc.attr("transform","translate("+cd+","+gd+")");ba.attr({transform:"rotate("+V+","+Cb+","+kd+")"})},doneFn:function(){b.call("_guiRelayout",x,R());var cd=document.querySelector(".js-notes-box-panel");
cd&&cd.redraw(cd.selectedObj)}})}}};y.showarrow&&nb(0,0);if(aa){var Ha;r.init({element:ka.node(),gd:x,prepFn:function(){Ha=ba.attr("transform")},moveFn:function(Ca,Qa){var gb="pointer";if(y.showarrow)y.axref===y.xref?S("ax",n(F,Ca,"ax",N,y)):S("ax",y.ax+Ca),y.ayref===y.yref?S("ay",n(D,Qa,"ay",N.w,y)):S("ay",y.ay+Qa),nb(Ca,Qa);else{if(z)return;if(F)var Va=n(F,Ca,"x",N,y);else Va=y._xsize/N.w,Va=r.align(y.x+(y._xshift-y.xshift)/N.w-Va/2+Ca/N.w,Va,0,1,y.xanchor);if(D)var db=n(D,Qa,"y",N,y);else db=y._ysize/
N.h,db=r.align(y.y-(y._yshift+y.yshift)/N.h-db/2-Qa/N.h,db,0,1,y.yanchor);S("x",Va);S("y",db);F&&D||(gb=r.getCursor(F?.5:Va,D?.5:db,y.xanchor,y.yanchor))}ba.attr({transform:"translate("+Ca+","+Qa+")"+Ha});p(ka,gb)},clickFn:function(Ca,Qa){y.captureevents&&x.emit("plotly_clickannotation",u(Qa))},doneFn:function(){p(ka);b.call("_guiRelayout",x,R());var Ca=document.querySelector(".js-notes-box-panel");Ca&&Ca.redraw(Ca.selectedObj)}})}}}var J=x._fullLayout,N=x._fullLayout._size,M=x._context.edits;if(z){var E=
"annotation-"+z;var L=z+".annotations"}else E="annotation",L="annotations";L=t(x.layout,L,y);var Q=L.modifyBase,S=L.modifyItem,R=L.getUpdateObj;J._infolayer.selectAll("."+E+'[data-index\x3d"'+A+'"]').remove();var O="clip"+J._uid+"_ann"+A;if(y._input&&!1!==y.visible){var T={x:{},y:{}},V=+y.textangle||0,X=J._infolayer.append("g").classed(E,!0).attr("data-index",String(A)).style("opacity",y.opacity),ba=X.append("g").classed("annotation-text-g",!0),aa=M[y.showarrow?"annotationTail":"annotationPosition"];
E=y.captureevents||M.annotationText||aa;var ka=ba.append("g").style("pointer-events",E?"all":null).call(p,"pointer").on("click",function(){x._dragging=!1;x.emit("plotly_clickannotation",u(f.event))});if(y.hovertext)ka.on("mouseover",function(){var pa=y.hoverlabel,oa=pa.font,ua=this.getBoundingClientRect(),ya=x.getBoundingClientRect();g.loneHover({x0:ua.left-ya.left,x1:ua.right-ya.left,y:(ua.top+ua.bottom)/2-ya.top,text:y.hovertext,color:pa.bgcolor,borderColor:pa.bordercolor,fontFamily:oa.family,fontSize:oa.size,
fontColor:oa.color},{container:J._hoverlayer.node(),outerContainer:J._paper.node(),gd:x})}).on("mouseout",function(){g.loneUnhover(J._hoverlayer.node())});var ha=y.borderwidth,ca=ha+y.borderpad,sa=ka.append("rect").attr("class","bg").style("stroke-width",ha+"px").call(l.stroke,y.bordercolor).call(l.fill,y.bgcolor),ma=y.width||y.height,ra=J._topclips.selectAll("#"+O).data(ma?[0]:[]);ra.enter().append("clipPath").classed("annclip",!0).attr("id",O).append("rect");ra.exit().remove();var qa=y.font;E=J._meta?
e.templateString(y.text,J._meta):y.text;var Y=ka.append("text").classed("annotation-text",!0).text(E);if(M.annotationText)Y.call(d.makeEditable,{delegate:ka,gd:x}).call(B).on("edit",function(pa){y.text=pa;this.call(B);S("text",pa);F&&F.autorange&&Q(F._name+".autorange",!0);D&&D.autorange&&Q(D._name+".autorange",!0);b.call("_guiRelayout",x,R())});else Y.call(B)}else f.selectAll("#"+O).remove()}var f=a("d3"),b=a("../../registry"),k=a("../../plots/plots"),e=a("../../lib"),h=a("../../plots/cartesian/axes"),
l=a("../color"),c=a("../drawing"),g=a("../fx"),d=a("../../lib/svg_text_utils"),p=a("../../lib/setcursor"),r=a("../dragelement"),t=a("../../plot_api/plot_template").arrayEditor,w=a("./draw_arrow_head");G.exports={draw:function(x){var y=x._fullLayout;y._infolayer.selectAll(".annotation").remove();for(var A=0;A<y.annotations.length;A++)y.annotations[A].visible&&q(x,A);return k.previousPromises(x)},drawOne:q,drawRaw:m}},{"../../lib":750,"../../lib/setcursor":770,"../../lib/svg_text_utils":774,"../../plot_api/plot_template":788,
"../../plots/cartesian/axes":799,"../../plots/plots":862,"../../registry":882,"../color":615,"../dragelement":634,"../drawing":637,"../fx":655,"./draw_arrow_head":605,d3:169}],605:[function(a,G,C){var q=a("d3"),n=a("../color"),m=a("./arrow_paths");G.exports=function(f,b,k){function e(){f.style("stroke-dasharray","0px,100px")}function h(B,I,J,N){B.path&&(B.noRotate&&(J=0),q.select(l.parentNode).append("path").attr({"class":f.attr("class"),d:B.path,transform:"translate("+I.x+","+I.y+")"+(J?"rotate("+
180*J/Math.PI+")":"")+"scale("+N+")"}).style({fill:n.rgb(k.arrowcolor),"stroke-width":0}))}var l=f.node(),c=m[k.arrowhead||0],g=m[k.startarrowhead||0],d=(k.arrowwidth||1)*(k.arrowsize||1),p=(k.arrowwidth||1)*(k.startarrowsize||1),r=0<=b.indexOf("start");b=0<=b.indexOf("end");var t=c.backoff*d+k.standoff,w=g.backoff*p+k.startstandoff;if("line"===l.nodeName){var x={x:+f.attr("x1"),y:+f.attr("y1")};var y={x:+f.attr("x2"),y:+f.attr("y2")};var A=x.x-y.x,z=x.y-y.y;var F=Math.atan2(z,A);var D=F+Math.PI;
if(t&&w&&t+w>Math.sqrt(A*A+z*z)){e();return}if(t){if(t*t>A*A+z*z){e();return}var u=t*Math.sin(F);y.x+=t*Math.cos(F);y.y+=u;f.attr({x2:y.x,y2:y.y})}if(w){if(w*w>A*A+z*z){e();return}t=w*Math.sin(F);x.x-=w*Math.cos(F);x.y-=t;f.attr({x1:x.x,y1:x.y})}}else if("path"===l.nodeName){A=l.getTotalLength();z="";if(A<t+w){e();return}x=l.getPointAtLength(0);F=l.getPointAtLength(.1);F=Math.atan2(x.y-F.y,x.x-F.x);x=l.getPointAtLength(Math.min(w,A));z="0px,"+w+"px,";y=l.getPointAtLength(A);D=l.getPointAtLength(A-
.1);D=Math.atan2(y.y-D.y,y.x-D.x);y=l.getPointAtLength(Math.max(0,A-t));f.style("stroke-dasharray",z+(A-(z?w+t:t)+"px,"+A+"px"))}r&&h(g,x,F,p);b&&h(c,y,D,d)}},{"../color":615,"./arrow_paths":597,d3:169}],606:[function(a,G,C){C=a("./draw");var q=a("./click");G.exports={moduleType:"component",name:"annotations",layoutAttributes:a("./attributes"),supplyLayoutDefaults:a("./defaults"),includeBasePlot:a("../../plots/cartesian/include_components")("annotations"),calcAutorange:a("./calc_autorange"),draw:C.draw,
drawOne:C.drawOne,drawRaw:C.drawRaw,hasClickToShow:q.hasClickToShow,onClick:q.onClick,convertCoords:a("./convert_coords")}},{"../../plots/cartesian/include_components":811,"./attributes":598,"./calc_autorange":599,"./click":600,"./convert_coords":602,"./defaults":603,"./draw":604}],607:[function(a,G,C){C=a("../annotations/attributes");var q=a("../../plot_api/edit_types").overrideAll;a=a("../../plot_api/plot_template").templatedArray;G.exports=q(a("annotation",{visible:C.visible,x:{valType:"any"},
y:{valType:"any"},z:{valType:"any"},ax:{valType:"number"},ay:{valType:"number"},xanchor:C.xanchor,xshift:C.xshift,yanchor:C.yanchor,yshift:C.yshift,text:C.text,textangle:C.textangle,font:C.font,width:C.width,height:C.height,opacity:C.opacity,align:C.align,valign:C.valign,bgcolor:C.bgcolor,bordercolor:C.bordercolor,borderpad:C.borderpad,borderwidth:C.borderwidth,showarrow:C.showarrow,arrowcolor:C.arrowcolor,arrowhead:C.arrowhead,startarrowhead:C.startarrowhead,arrowside:C.arrowside,arrowsize:C.arrowsize,
startarrowsize:C.startarrowsize,arrowwidth:C.arrowwidth,standoff:C.standoff,startstandoff:C.startstandoff,hovertext:C.hovertext,hoverlabel:C.hoverlabel,captureevents:C.captureevents}),"calc","from-root")},{"../../plot_api/edit_types":781,"../../plot_api/plot_template":788,"../annotations/attributes":598}],608:[function(a,G,C){function q(f,b){var k=b.fullSceneLayout.domain,e=b.fullLayout._size;b={pdata:null,type:"linear",autorange:!1,range:[-Infinity,Infinity]};f._xa={};n.extendFlat(f._xa,b);m.setConvert(f._xa);
f._xa._offset=e.l+k.x[0]*e.w;f._xa.l2p=function(){return.5*(1+f._pdata[0]/f._pdata[3])*e.w*(k.x[1]-k.x[0])};f._ya={};n.extendFlat(f._ya,b);m.setConvert(f._ya);f._ya._offset=e.t+(1-k.y[1])*e.h;f._ya.l2p=function(){return.5*(1-f._pdata[1]/f._pdata[3])*e.h*(k.y[1]-k.y[0])}}var n=a("../../lib"),m=a("../../plots/cartesian/axes");G.exports=function(f){for(var b=f.fullSceneLayout.annotations,k=0;k<b.length;k++)q(b[k],f);f.fullLayout._infolayer.selectAll(".annotation-"+f.id).remove()}},{"../../lib":750,"../../plots/cartesian/axes":799}],
609:[function(a,G,C){function q(e,h,l,c){function g(p,r){return n.coerce(e,h,k,p,r)}function d(p){var r=p+"axis",t={_fullLayout:{}};t._fullLayout[r]=l[r];return m.coercePosition(h,t,g,p,p,.5)}g("visible")&&(b(e,h,c.fullLayout,g),d("x"),d("y"),d("z"),n.noneOrAll(e,h,["x","y","z"]),h.xref="x",h.yref="y",h.zref="z",g("xanchor"),g("yanchor"),g("xshift"),g("yshift"),h.showarrow&&(h.axref="pixel",h.ayref="pixel",g("ax",-10),g("ay",-30),n.noneOrAll(e,h,["ax","ay"])))}var n=a("../../lib"),m=a("../../plots/cartesian/axes"),
f=a("../../plots/array_container_defaults"),b=a("../annotations/common_defaults"),k=a("./attributes");G.exports=function(e,h,l){f(e,h,{name:"annotations",handleItemDefaults:q,fullLayout:l.fullLayout})}},{"../../lib":750,"../../plots/array_container_defaults":794,"../../plots/cartesian/axes":799,"../annotations/common_defaults":601,"./attributes":607}],610:[function(a,G,C){var q=a("../annotations/draw").drawRaw,n=a("../../plots/gl3d/project"),m=["x","y","z"];G.exports=function(f){for(var b=f.fullSceneLayout,
k=f.dataScale,e=b.annotations,h=0;h<e.length;h++){for(var l=e[h],c=!1,g=0;3>g;g++){var d=m[g];d=b[d+"axis"].r2fraction(l[d]);if(0>d||1<d){c=!0;break}}c?f.fullLayout._infolayer.select(".annotation-"+f.id+'[data-index\x3d"'+h+'"]').remove():(l._pdata=n(f.glplot.cameraParams,[b.xaxis.r2l(l.x)*k[0],b.yaxis.r2l(l.y)*k[1],b.zaxis.r2l(l.z)*k[2]]),q(f.graphDiv,l,h,f.id,l._xa,l._ya))}}},{"../../plots/gl3d/project":850,"../annotations/draw":604}],611:[function(a,G,C){var q=a("../../registry"),n=a("../../lib");
G.exports={moduleType:"component",name:"annotations3d",schema:{subplots:{scene:{annotations:a("./attributes")}}},layoutAttributes:a("./attributes"),handleDefaults:a("./defaults"),includeBasePlot:function(m,f){var b=q.subplotsRegistry.gl3d;if(b)for(var k=b.attrRegex,e=Object.keys(m),h=0;h<e.length;h++){var l=e[h];k.test(l)&&(m[l].annotations||[]).length&&(n.pushUnique(f._basePlotModules,b),n.pushUnique(f._subplots.gl3d,l))}},convert:a("./convert"),draw:a("./draw")}},{"../../lib":750,"../../registry":882,
"./attributes":607,"./convert":608,"./defaults":609,"./draw":610}],612:[function(a,G,C){G.exports=a("world-calendars/dist/main");a("world-calendars/dist/plus");a("world-calendars/dist/calendars/chinese");a("world-calendars/dist/calendars/coptic");a("world-calendars/dist/calendars/discworld");a("world-calendars/dist/calendars/ethiopian");a("world-calendars/dist/calendars/hebrew");a("world-calendars/dist/calendars/islamic");a("world-calendars/dist/calendars/julian");a("world-calendars/dist/calendars/mayan");
a("world-calendars/dist/calendars/nanakshahi");a("world-calendars/dist/calendars/nepali");a("world-calendars/dist/calendars/persian");a("world-calendars/dist/calendars/taiwan");a("world-calendars/dist/calendars/thai");a("world-calendars/dist/calendars/ummalqura")},{"world-calendars/dist/calendars/chinese":579,"world-calendars/dist/calendars/coptic":580,"world-calendars/dist/calendars/discworld":581,"world-calendars/dist/calendars/ethiopian":582,"world-calendars/dist/calendars/hebrew":583,"world-calendars/dist/calendars/islamic":584,
"world-calendars/dist/calendars/julian":585,"world-calendars/dist/calendars/mayan":586,"world-calendars/dist/calendars/nanakshahi":587,"world-calendars/dist/calendars/nepali":588,"world-calendars/dist/calendars/persian":589,"world-calendars/dist/calendars/taiwan":590,"world-calendars/dist/calendars/thai":591,"world-calendars/dist/calendars/ummalqura":592,"world-calendars/dist/main":593,"world-calendars/dist/plus":594}],613:[function(a,G,C){function q(r){var t=g[r];return t?t:t=g[r]=f.instance(r)}
function n(r){return b.extendFlat({},h,{description:r})}function m(r){return"Sets the calendar system to use with `"+r+"` date data."}var f=a("./calendars"),b=a("../../lib");a=a("../../constants/numerical");var k=a.EPOCHJD,e=a.ONEDAY,h={valType:"enumerated",values:Object.keys(f.calendars),editType:"calc",dflt:"gregorian"},l=function(r,t,w,x){var y={};y[w]=h;return b.coerce(r,t,y,w,x)},c={d:{0:"dd","-":"d"},e:{0:"d","-":"d"},a:{0:"D","-":"D"},A:{0:"DD","-":"DD"},j:{0:"oo","-":"o"},W:{0:"ww","-":"w"},
m:{0:"mm","-":"m"},b:{0:"M","-":"M"},B:{0:"MM","-":"MM"},y:{0:"yy","-":"yy"},Y:{0:"yyyy","-":"yyyy"},U:"##",w:"##",c:{0:"D M d %X yyyy","-":"D M d %X yyyy"},x:{0:"mm/dd/yyyy","-":"mm/dd/yyyy"}},g={};a={xcalendar:n(m("x"))};C=b.extendFlat({},a,{ycalendar:n(m("y"))});var d=b.extendFlat({},C,{zcalendar:n(m("z"))}),p=n("Sets the calendar system to use for `range` and `tick0` if this is a date axis. This does not set the calendar for interpreting data on this axis, that's specified in the trace or via the global `layout.calendar`");
G.exports={moduleType:"component",name:"calendars",schema:{traces:{scatter:C,bar:C,box:C,heatmap:C,contour:C,histogram:C,histogram2d:C,histogram2dcontour:C,scatter3d:d,surface:d,mesh3d:d,scattergl:C,ohlc:a,candlestick:a},layout:{calendar:n("Sets the default calendar system to use for interpreting and displaying dates throughout the plot.")},subplots:{xaxis:{calendar:p},yaxis:{calendar:p},scene:{xaxis:{calendar:p},yaxis:{calendar:p},zaxis:{calendar:p}},polar:{radialaxis:{calendar:p}}},transforms:{filter:{valuecalendar:n("Sets the calendar system to use for `value`, if it is a date."),
targetcalendar:n("Sets the calendar system to use for `target`, if it is an array of dates. If `target` is a string (eg *x*) we use the corresponding trace attribute (eg `xcalendar`) if it exists, even if `targetcalendar` is provided.")}}},layoutAttributes:h,handleDefaults:l,handleTraceDefaults:function(r,t,w,x){for(var y=0;y<w.length;y++)l(r,t,w[y]+"calendar",x.calendar)},CANONICAL_SUNDAY:{chinese:"2000-01-02",coptic:"2000-01-03",discworld:"2000-01-03",ethiopian:"2000-01-05",hebrew:"5000-01-01",
islamic:"1000-01-02",julian:"2000-01-03",mayan:"5000-01-01",nanakshahi:"1000-01-05",nepali:"2000-01-05",persian:"1000-01-01",jalali:"1000-01-01",taiwan:"1000-01-04",thai:"2000-01-04",ummalqura:"1400-01-06"},CANONICAL_TICK:{chinese:"2000-01-01",coptic:"2000-01-01",discworld:"2000-01-01",ethiopian:"2000-01-01",hebrew:"5000-01-01",islamic:"1000-01-01",julian:"2000-01-01",mayan:"5000-01-01",nanakshahi:"1000-01-01",nepali:"2000-01-01",persian:"1000-01-01",jalali:"1000-01-01",taiwan:"1000-01-01",thai:"2000-01-01",
ummalqura:"1400-01-01"},DFLTRANGE:{chinese:["2000-01-01","2001-01-01"],coptic:["1700-01-01","1701-01-01"],discworld:["1800-01-01","1801-01-01"],ethiopian:["2000-01-01","2001-01-01"],hebrew:["5700-01-01","5701-01-01"],islamic:["1400-01-01","1401-01-01"],julian:["2000-01-01","2001-01-01"],mayan:["5200-01-01","5201-01-01"],nanakshahi:["0500-01-01","0501-01-01"],nepali:["2000-01-01","2001-01-01"],persian:["1400-01-01","1401-01-01"],jalali:["1400-01-01","1401-01-01"],taiwan:["0100-01-01","0101-01-01"],
thai:["2500-01-01","2501-01-01"],ummalqura:["1400-01-01","1401-01-01"]},getCal:q,worldCalFmt:function(r,t,w){t=Math.floor((t+.05)/e)+k;w=q(w).fromJD(t);t=0;for(var x,y,A;-1!==(t=r.indexOf("%",t));)x=r.charAt(t+1),"0"===x||"-"===x||"_"===x?(A=3,y=r.charAt(t+2),"_"===x&&(x="-")):(y=x,x="0",A=2),(y=c[y])?(x="##"===y?"##":w.formatDate(y[x]),r=r.substr(0,t)+x+r.substr(t+A),t+=x.length):t+=A;return r}}},{"../../constants/numerical":725,"../../lib":750,"./calendars":612}],614:[function(a,G,C){C.defaults=
"#1f77b4 #ff7f0e #2ca02c #d62728 #9467bd #8c564b #e377c2 #7f7f7f #bcbd22 #17becf".split(" ");C.defaultLine="#444";C.lightLine="#eee";C.background="#fff";C.borderLine="#BEC8D9";C.lightFraction=1E3/11},{}],615:[function(a,G,C){function q(e){if(m(e)||"string"!==typeof e)return e;var h=e.trim();if("rgb"!==h.substr(0,3))return e;var l=h.match(/^rgba?\s*\(([^()]*)\)$/);if(!l)return e;l=l[1].trim().split(/\s*[\s,]\s*/);h="a"===h.charAt(3)&&4===l.length;if(!h&&3!==l.length)return e;for(var c=0;c<l.length;c++){if(!l[c].length)return e;
l[c]=Number(l[c]);if(!(0<=l[c]))return e;if(3===c)1<l[c]&&(l[c]=1);else if(1<=l[c])return e}e=Math.round(255*l[0])+", "+Math.round(255*l[1])+", "+Math.round(255*l[2]);return h?"rgba("+e+", "+l[3]+")":"rgb("+e+")"}var n=a("tinycolor2"),m=a("fast-isnumeric"),f=G.exports={};a=a("./attributes");f.defaults=a.defaults;var b=f.defaultLine=a.defaultLine;f.lightLine=a.lightLine;var k=f.background=a.background;f.tinyRGB=function(e){e=e.toRgb();return"rgb("+Math.round(e.r)+", "+Math.round(e.g)+", "+Math.round(e.b)+
")"};f.rgb=function(e){return f.tinyRGB(n(e))};f.opacity=function(e){return e?n(e).getAlpha():0};f.addOpacity=function(e,h){e=n(e).toRgb();return"rgba("+Math.round(e.r)+", "+Math.round(e.g)+", "+Math.round(e.b)+", "+h+")"};f.combine=function(e,h){var l=n(e).toRgb();if(1===l.a)return n(e).toRgbString();e=n(h||k).toRgb();e=1===e.a?e:{r:255*(1-e.a)+e.r*e.a,g:255*(1-e.a)+e.g*e.a,b:255*(1-e.a)+e.b*e.a};return n({r:e.r*(1-l.a)+l.r*l.a,g:e.g*(1-l.a)+l.g*l.a,b:e.b*(1-l.a)+l.b*l.a}).toRgbString()};f.contrast=
function(e,h,l){var c=n(e);1!==c.getAlpha()&&(c=n(f.combine(e,k)));return(c.isDark()?h?c.lighten(h):k:l?c.darken(l):b).toString()};f.stroke=function(e,h){h=n(h);e.style({stroke:f.tinyRGB(h),"stroke-opacity":h.getAlpha()})};f.fill=function(e,h){h=n(h);e.style({fill:f.tinyRGB(h),"fill-opacity":h.getAlpha()})};f.clean=function(e){if(e&&"object"===typeof e){var h=Object.keys(e),l;for(l=0;l<h.length;l++){var c=h[l];var g=e[c];if("color"===c.substr(c.length-5))if(Array.isArray(g))for(c=0;c<g.length;c++)g[c]=
q(g[c]);else e[c]=q(g);else if("colorscale"===c.substr(c.length-10)&&Array.isArray(g))for(c=0;c<g.length;c++)Array.isArray(g[c])&&(g[c][1]=q(g[c][1]));else if(Array.isArray(g)){if(c=g[0],!Array.isArray(c)&&c&&"object"===typeof c)for(c=0;c<g.length;c++)f.clean(g[c])}else g&&"object"===typeof g&&f.clean(g)}}}},{"./attributes":614,"fast-isnumeric":241,tinycolor2:548}],616:[function(a,G,C){C=a("../../plots/cartesian/layout_attributes");var q=a("../../plots/font_attributes"),n=a("../../lib/extend").extendFlat;
a=a("../../plot_api/edit_types").overrideAll;G.exports=a({thicknessmode:{valType:"enumerated",values:["fraction","pixels"],dflt:"pixels"},thickness:{valType:"number",min:0,dflt:30},lenmode:{valType:"enumerated",values:["fraction","pixels"],dflt:"fraction"},len:{valType:"number",min:0,dflt:1},x:{valType:"number",dflt:1.02,min:-2,max:3},xanchor:{valType:"enumerated",values:["left","center","right"],dflt:"left"},xpad:{valType:"number",min:0,dflt:10},y:{valType:"number",dflt:.5,min:-2,max:3},yanchor:{valType:"enumerated",
values:["top","middle","bottom"],dflt:"middle"},ypad:{valType:"number",min:0,dflt:10},outlinecolor:C.linecolor,outlinewidth:C.linewidth,bordercolor:C.linecolor,borderwidth:{valType:"number",min:0,dflt:0},bgcolor:{valType:"color",dflt:"rgba(0,0,0,0)"},tickmode:C.tickmode,nticks:C.nticks,tick0:C.tick0,dtick:C.dtick,tickvals:C.tickvals,ticktext:C.ticktext,ticks:n({},C.ticks,{dflt:""}),ticklen:C.ticklen,tickwidth:C.tickwidth,tickcolor:C.tickcolor,showticklabels:C.showticklabels,tickfont:q({}),tickangle:C.tickangle,
tickformat:C.tickformat,tickformatstops:C.tickformatstops,tickprefix:C.tickprefix,showtickprefix:C.showtickprefix,ticksuffix:C.ticksuffix,showticksuffix:C.showticksuffix,separatethousands:C.separatethousands,exponentformat:C.exponentformat,minexponent:C.minexponent,showexponent:C.showexponent,title:{text:{valType:"string"},font:q({}),side:{valType:"enumerated",values:["right","top","bottom"],dflt:"top"}},_deprecated:{title:{valType:"string"},titlefont:q({}),titleside:{valType:"enumerated",values:["right",
"top","bottom"],dflt:"top"}}},"colorbars","from-root")},{"../../lib/extend":740,"../../plot_api/edit_types":781,"../../plots/cartesian/layout_attributes":813,"../../plots/font_attributes":827}],617:[function(a,G,C){G.exports={cn:{colorbar:"colorbar",cbbg:"cbbg",cbfill:"cbfill",cbfills:"cbfills",cbline:"cbline",cblines:"cblines",cbaxis:"cbaxis",cbtitleunshift:"cbtitleunshift",cbtitle:"cbtitle",cboutline:"cboutline",crisp:"crisp",jsPlaceholder:"js-placeholder"}}},{}],618:[function(a,G,C){var q=a("../../lib"),
n=a("../../plot_api/plot_template"),m=a("../../plots/cartesian/tick_value_defaults"),f=a("../../plots/cartesian/tick_mark_defaults"),b=a("../../plots/cartesian/tick_label_defaults"),k=a("./attributes");G.exports=function(e,h,l){function c(p,r){return q.coerce(d,g,k,p,r)}var g=n.newContainer(h,"colorbar"),d=e.colorbar||{};e=c("thicknessmode");c("thickness","fraction"===e?30/(l.width-l.margin.l-l.margin.r):30);e=c("lenmode");c("len","fraction"===e?1:l.height-l.margin.t-l.margin.b);c("x");c("xanchor");
c("xpad");c("y");c("yanchor");c("ypad");q.noneOrAll(d,g,["x","y"]);c("outlinecolor");c("outlinewidth");c("bordercolor");c("borderwidth");c("bgcolor");m(d,g,c,"linear");e={outerTicks:!1,font:l.font};b(d,g,c,"linear",e);f(d,g,c,"linear",e);c("title.text",l._dfltTitle.colorbar);q.coerceFont(c,"title.font",l.font);c("title.side")}},{"../../lib":750,"../../plot_api/plot_template":788,"../../plots/cartesian/tick_label_defaults":820,"../../plots/cartesian/tick_mark_defaults":821,"../../plots/cartesian/tick_value_defaults":822,
"./attributes":616}],619:[function(a,G,C){function q(N){function M(sa){return p(sa,{_fillcolor:null,_line:{color:null,width:null,dash:null},_levels:{start:null,end:null,size:null},_filllevels:null,_fillgradient:null,_zrange:null})}function E(){"function"===typeof V.calc?V.calc(N,T,R):(R._fillgradient=O.reversescale?A(O.colorscale):O.colorscale,R._zrange=[O[V.min],O[V.max]])}for(var L=N._fullLayout,Q=N.calcdata,S=[],R,O,T,V,X=0;X<Q.length;X++){T=Q[X][0].trace;var ba=T._module.colorbar;if(!0===T.visible&&
ba){var aa=Array.isArray(ba);ba=aa?ba:[ba];for(var ka=0;ka<ba.length;ka++){V=ba[ka];var ha=V.container;(O=ha?T[ha]:T)&&O.showscale&&(R=M(O.colorbar),R._id="cb"+T.uid+(aa&&ha?"-"+ha:""),R._traceIndex=T.index,R._propPrefix=(ha?ha+".":"")+"colorbar.",R._meta=T._meta,E(),S.push(R))}}}for(var ca in L._colorAxes)O=L[ca],O.showscale&&(Q=L._colorAxes[ca],R=M(O.colorbar),R._id="cb"+ca,R._propPrefix=ca+".colorbar.",R._meta=L._meta,V={min:"cmin",max:"cmax"},"heatmap"!==Q[0]&&(T=Q[1],V.calc=T._module.colorbar.calc),
E(),S.push(R));return S}function n(N,M,E){function L(Na,$a){var cb={propContainer:Ma,propName:M._propPrefix+"title",traceIndex:M._traceIndex,_meta:M._meta,placeholder:Q._dfltTitle.colorbar,containerGroup:N.select("."+J.cbtitle)},mb="h"===Na.charAt(0)?Na.substr(1):"h"+Na;N.selectAll("."+mb+",."+mb+"-math-group").remove();x.draw(E,Na,p(cb,$a||{}))}var Q=E._fullLayout,S=Q._size,R=M._fillcolor,O=M._line,T=M.title,V=T.side,X=M._zrange||k.extent(("function"===typeof R?R:O.color).domain()),ba="function"===
typeof O.color?O.color:function(){return O.color},aa="function"===typeof R?R:function(){return R},ka=M._levels,ha=f(E,M,X),ca=ha.fill,sa=ha.line,ma=Math.round(M.thickness*("fraction"===M.thicknessmode?S.w:1));ha=ma/S.w;var ra=Math.round(M.len*("fraction"===M.lenmode?S.h:1)),qa=ra/S.h,Y=M.xpad/S.w,pa=(M.borderwidth+M.outlinewidth)/2,oa=M.ypad/S.h,ua=Math.round(M.x*S.w+M.xpad),ya=M.x-ha*({middle:.5,right:1}[M.xanchor]||0),ja=M.y+qa*(({top:-.5,bottom:.5}[M.yanchor]||0)-.5),za=Math.round(S.h*(1-ja)),
Ba=za-ra;M._lenFrac=qa;M._thickFrac=ha;M._xLeftFrac=ya;M._yBottomFrac=ja;var Ma=M._axis=b(E,M,X);Ma.position=M.x+Y+ha;-1!==["top","bottom"].indexOf(V)&&(Ma.title.side=V,Ma.titlex=M.x+Y,Ma.titley=ja+("top"===T.side?qa-oa:oa));O.color&&"auto"===M.tickmode&&(Ma.tickmode="linear",Ma.tick0=ka.start,T=ka.size,ha=d.constrain((za-Ba)/50,4,15)+1,ha=(X[1]-X[0])/((M.nticks||ha)*T),1<ha&&(ra=Math.pow(10,Math.floor(Math.log(ha)/Math.LN10)),T*=ra*d.roundUp(ha/ra,[2,5,10]),2E-6>(Math.abs(ka.start)/ka.size+1E-6)%
1&&(Ma.tick0=0)),Ma.dtick=T);Ma.domain=[ja+oa,ja+qa-oa];Ma.setScale();N.attr("transform","translate("+Math.round(S.l)+","+Math.round(S.t)+")");var Oa=N.select("."+J.cbtitleunshift).attr("transform","translate(-"+Math.round(S.l)+",-"+Math.round(S.t)+")"),Ia=N.select("."+J.cbaxis),Pa,Fa=0;return d.syncOrAsync([h.previousPromises,function(){if(-1!==["top","bottom"].indexOf(V)){var Na=Ma.title.font.size;L(Ma._id+"title",{attributes:{x:S.l+(M.x+Y)*S.w,y:"top"===V?(1-(ja+qa-oa))*S.h+S.t+3+.75*Na:(1-(ja+
oa))*S.h+S.t-3-.25*Na,"text-anchor":"start"}})}},function(){if(-1!==["top","bottom"].indexOf(V)){var Na=N.select("."+J.cbtitle),$a=Na.select("text"),cb=[-M.outlinewidth/2,M.outlinewidth/2],mb=Na.select(".h"+Ma._id+"title-math-group").node(),Ka=15.6;$a.node()&&(Ka=parseInt($a.node().style.fontSize,10)*u);mb?(Fa=t.bBox(mb).height,Fa>Ka&&(cb[1]-=(Fa-Ka)/2)):$a.node()&&!$a.classed(J.jsPlaceholder)&&(Fa=t.bBox($a.node()).height);Fa&&(Fa+=5,"top"===V?(Ma.domain[1]-=Fa/S.h,cb[1]*=-1):(Ma.domain[0]+=Fa/S.h,
$a=y.lineCount($a),cb[1]+=(1-$a)*Ka),Na.attr("transform","translate("+cb+")"),Ma.setScale())}N.selectAll("."+J.cbfills+",."+J.cblines).attr("transform","translate(0,"+Math.round(S.h*(1-Ma.domain[1]))+")");Ia.attr("transform","translate(0,"+Math.round(-S.t)+")");Na=N.select("."+J.cbfills).selectAll("rect."+J.cbfill).data(ca);Na.enter().append("rect").classed(J.cbfill,!0).style("stroke","none");Na.exit().remove();var Ua=X.map(Ma.c2p).map(Math.round).sort(function(Ea,Ya){return Ea-Ya});Na.each(function(Ea,
Ya){Ya=[0===Ya?X[0]:(ca[Ya]+ca[Ya-1])/2,Ya===ca.length-1?X[1]:(ca[Ya]+ca[Ya+1])/2].map(Ma.c2p).map(Math.round);Ya[1]=d.constrain(Ya[1]+(Ya[1]>Ya[0])?1:-1,Ua[0],Ua[1]);Ya=k.select(this).attr({x:ua,width:Math.max(ma,2),y:k.min(Ya),height:Math.max(k.max(Ya)-k.min(Ya),2)});M._fillgradient?t.gradient(Ya,E,M._id,"vertical",M._fillgradient,"fill"):(Ea=aa(Ea).replace("e-",""),Ya.attr("fill",e(Ea).toHexString()))});Na=N.select("."+J.cblines).selectAll("path."+J.cbline).data(O.color&&O.width?sa:[]);Na.enter().append("path").classed(J.cbline,
!0);Na.exit().remove();Na.each(function(Ea){k.select(this).attr("d","M"+ua+","+(Math.round(Ma.c2p(Ea))+O.width/2%1)+"h"+ma).call(t.lineGroupStyle,O.width,ba(Ea),O.dash)});Ia.selectAll("g."+Ma._id+"tick,path").remove();Na=ua+ma+(M.outlinewidth||0)/2-("outside"===M.ticks?1:0);cb=c.calcTicks(Ma);Ka=c.makeTransFn(Ma);$a=c.getTickSigns(Ma)[2];c.drawTicks(E,Ma,{vals:"inside"===Ma.ticks?c.clipEnds(Ma,cb):cb,layer:Ia,path:c.makeTickPath(Ma,Na,$a),transFn:Ka});return c.drawLabels(E,Ma,{vals:cb,layer:Ia,transFn:Ka,
labelFns:c.makeLabelFns(Ma,Na)})},function(){if(-1===["top","bottom"].indexOf(V)){var Na=Ma.title.font.size,$a=Ma._offset+Ma._length/2;Na=S.l+(Ma.position||0)*S.w+("right"===Ma.side?10+Na*(Ma.showticklabels?1:.5):-10-Na*(Ma.showticklabels?.5:0));L("h"+Ma._id+"title",{avoid:{selection:k.select(E).selectAll("g."+Ma._id+"tick"),side:V,offsetLeft:S.l,offsetTop:0,maxShift:Q.width},attributes:{x:Na,y:$a,"text-anchor":"middle"},transform:{rotate:"-90",offset:0}})}},h.previousPromises,function(){var Na=ma+
M.outlinewidth/2+t.bBox(Ia.node()).width;Pa=Oa.select("text");if(Pa.node()&&!Pa.classed(J.jsPlaceholder)){var $a=Oa.select(".h"+Ma._id+"title-math-group").node();$a=$a&&-1!==["top","bottom"].indexOf(V)?t.bBox($a).width:t.bBox(Oa.node()).right-ua-S.l;Na=Math.max(Na,$a)}$a=2*M.xpad+Na+M.borderwidth+M.outlinewidth/2;var cb=za-Ba;N.select("."+J.cbbg).attr({x:ua-M.xpad-(M.borderwidth+M.outlinewidth)/2,y:Ba-pa,width:Math.max($a,2),height:Math.max(cb+2*pa,2)}).call(w.fill,M.bgcolor).call(w.stroke,M.bordercolor).style("stroke-width",
M.borderwidth);N.selectAll("."+J.cboutline).attr({x:ua,y:Ba+M.ypad+("top"===V?Fa:0),width:Math.max(ma,2),height:Math.max(cb-2*M.ypad-Fa,2)}).call(w.stroke,M.outlinecolor).style({fill:"none","stroke-width":M.outlinewidth});N.attr("transform","translate("+(S.l-({center:.5,right:1}[M.xanchor]||0)*$a)+","+S.t+")");Na={};var mb=B[M.yanchor],Ka=I[M.yanchor];"pixels"===M.lenmode?(Na.y=M.y,Na.t=cb*mb,Na.b=cb*Ka):(Na.t=Na.b=0,Na.yt=M.y+M.len*mb,Na.yb=M.y-M.len*Ka);cb=B[M.xanchor];mb=I[M.xanchor];"pixels"===
M.thicknessmode?(Na.x=M.x,Na.l=$a*cb,Na.r=$a*mb):($a-=ma,Na.l=$a*cb,Na.r=$a*mb,Na.xl=M.x-M.thickness*cb,Na.xr=M.x+M.thickness*mb);h.autoMargin(E,M._id,Na)}],E)}function m(N,M,E){var L=E._fullLayout._size,Q,S,R;g.init({element:N.node(),gd:E,prepFn:function(){Q=N.attr("transform");r(N)},moveFn:function(O,T){N.attr("transform",Q+" translate("+O+","+T+")");S=g.align(M._xLeftFrac+O/L.w,M._thickFrac,0,1,M.xanchor);R=g.align(M._yBottomFrac-T/L.h,M._lenFrac,0,1,M.yanchor);O=g.getCursor(S,R,M.xanchor,M.yanchor);
r(N,O)},doneFn:function(){r(N);if(void 0!==S&&void 0!==R){var O={};O[M._propPrefix+"x"]=S;O[M._propPrefix+"y"]=R;void 0!==M._traceIndex?l.call("_guiRestyle",E,O,M._traceIndex):l.call("_guiRelayout",E,O)}}})}function f(N,M,E){var L=M._levels;N=[];var Q=[],S,R=L.end+L.size/100,O=L.size,T=1.001*E[0]-.001*E[1],V=1.001*E[1]-.001*E[0];for(S=0;1E5>S;S++){var X=L.start+S*O;if(0<O?X>=R:X<=R)break;X>T&&X<V&&N.push(X)}if(M._fillgradient)Q=[0];else if("function"===typeof M._fillcolor)if(M=M._filllevels)for(R=
M.end+M.size/100,O=M.size,S=0;1E5>S;S++){X=M.start+S*O;if(0<O?X>=R:X<=R)break;X>E[0]&&X<E[1]&&Q.push(X)}else Q=N.map(function(ba){return ba-L.size/2}),Q.push(Q[Q.length-1]+L.size);else M._fillcolor&&"string"===typeof M._fillcolor&&(Q=[0]);0>L.size&&(N.reverse(),Q.reverse());return{line:N,fill:Q}}function b(N,M,E){function L(R,O){return d.coerce(Q,S,D,R,O)}N=N._fullLayout;var Q={type:"linear",range:E,tickmode:M.tickmode,nticks:M.nticks,tick0:M.tick0,dtick:M.dtick,tickvals:M.tickvals,ticktext:M.ticktext,
ticks:M.ticks,ticklen:M.ticklen,tickwidth:M.tickwidth,tickcolor:M.tickcolor,showticklabels:M.showticklabels,tickfont:M.tickfont,tickangle:M.tickangle,tickformat:M.tickformat,exponentformat:M.exponentformat,minexponent:M.minexponent,separatethousands:M.separatethousands,showexponent:M.showexponent,showtickprefix:M.showtickprefix,tickprefix:M.tickprefix,showticksuffix:M.showticksuffix,ticksuffix:M.ticksuffix,title:M.title,showline:!0,anchor:"free",side:"right",position:1},S={type:"linear",_id:"y"+M._id};
M={letter:"y",font:N.font,noHover:!0,noTickson:!0,noTicklabelmode:!0,calendar:N.calendar};z(Q,S,L,M,N);F(Q,S,L,M);return S}var k=a("d3"),e=a("tinycolor2"),h=a("../../plots/plots"),l=a("../../registry"),c=a("../../plots/cartesian/axes"),g=a("../dragelement"),d=a("../../lib"),p=a("../../lib/extend").extendFlat,r=a("../../lib/setcursor"),t=a("../drawing"),w=a("../color"),x=a("../titles"),y=a("../../lib/svg_text_utils"),A=a("../colorscale/helpers").flipScale,z=a("../../plots/cartesian/axis_defaults"),
F=a("../../plots/cartesian/position_defaults"),D=a("../../plots/cartesian/layout_attributes");C=a("../../constants/alignment");var u=C.LINE_SPACING,B=C.FROM_TL,I=C.FROM_BR,J=a("./constants").cn;G.exports={draw:function(N){var M=N._fullLayout._infolayer.selectAll("g."+J.colorbar).data(q(N),function(E){return E._id});M.enter().append("g").attr("class",function(E){return E._id}).classed(J.colorbar,!0);M.each(function(E){var L=k.select(this);d.ensureSingle(L,"rect",J.cbbg);d.ensureSingle(L,"g",J.cbfills);
d.ensureSingle(L,"g",J.cblines);d.ensureSingle(L,"g",J.cbaxis,function(S){S.classed(J.crisp,!0)});d.ensureSingle(L,"g",J.cbtitleunshift,function(S){S.append("g").classed(J.cbtitle,!0)});d.ensureSingle(L,"rect",J.cboutline);var Q=n(L,E,N);Q&&Q.then&&(N._promises||[]).push(Q);N._context.edits.colorbarPosition&&m(L,E,N)});M.exit().each(function(E){h.autoMargin(N,E._id)}).remove();M.order()}}},{"../../constants/alignment":717,"../../lib":750,"../../lib/extend":740,"../../lib/setcursor":770,"../../lib/svg_text_utils":774,
"../../plots/cartesian/axes":799,"../../plots/cartesian/axis_defaults":801,"../../plots/cartesian/layout_attributes":813,"../../plots/cartesian/position_defaults":816,"../../plots/plots":862,"../../registry":882,"../color":615,"../colorscale/helpers":626,"../dragelement":634,"../drawing":637,"../titles":710,"./constants":617,d3:169,tinycolor2:548}],620:[function(a,G,C){var q=a("../../lib");G.exports=function(n){return q.isPlainObject(n.colorbar)}},{"../../lib":750}],621:[function(a,G,C){G.exports=
{moduleType:"component",name:"colorbar",attributes:a("./attributes"),supplyDefaults:a("./defaults"),draw:a("./draw").draw,hasColorbar:a("./has_colorbar")}},{"./attributes":616,"./defaults":618,"./draw":619,"./has_colorbar":620}],622:[function(a,G,C){var q=a("../colorbar/attributes"),n=a("../../lib/regex").counter,m=a("./scales.js").scales;Object.keys(m);G.exports=function(f,b){b=b||{};var k=b.cLetter||"c";f="noScale"in b?b.noScale:"marker.line"===(f||"");var e="showScaleDflt"in b?b.showScaleDflt:
"z"===k,h="string"===typeof b.colorscaleDflt?m[b.colorscaleDflt]:null,l=b.editTypeOverride||"";var c="colorAttr"in b?b.colorAttr:{z:"z",c:"color"}[k];var g=k+"auto",d=k+"min",p=k+"max",r={};r[d]=r[p]=void 0;var t={};t[g]=!1;var w={};"color"===c&&(w.color={valType:"color",arrayOk:!0,editType:l||"style"},b.anim&&(w.color.anim=!0));w[g]={valType:"boolean",dflt:!0,editType:"calc",impliedEdits:r};w[d]={valType:"number",dflt:null,editType:l||"plot",impliedEdits:t};w[p]={valType:"number",dflt:null,editType:l||
"plot",impliedEdits:t};w[k+"mid"]={valType:"number",dflt:null,editType:"calc",impliedEdits:r};w.colorscale={valType:"colorscale",editType:"calc",dflt:h,impliedEdits:{autocolorscale:!1}};w.autocolorscale={valType:"boolean",dflt:!1===b.autoColorDflt?!1:!0,editType:"calc",impliedEdits:{colorscale:void 0}};w.reversescale={valType:"boolean",dflt:!1,editType:"plot"};f||(w.showscale={valType:"boolean",dflt:e,editType:"calc"},w.colorbar=q);b.noColorAxis||(w.coloraxis={valType:"subplotid",regex:n("coloraxis"),
dflt:null,editType:"calc"});return w}},{"../../lib/regex":766,"../colorbar/attributes":616,"./scales.js":630}],623:[function(a,G,C){var q=a("fast-isnumeric"),n=a("../../lib"),m=a("./helpers").extractOpts;G.exports=function(f,b,k){f=f._fullLayout;var e=k.vals;b=(k=k.containerStr)?n.nestedProperty(b,k).get():b;k=m(b);var h=!1!==k.auto,l=k.min,c=k.max,g=k.mid;void 0===l?l=n.aggNums(Math.min,null,e):h&&(l=b._colorAx&&q(l)?Math.min(l,n.aggNums(Math.min,null,e)):n.aggNums(Math.min,null,e));void 0===c?c=
n.aggNums(Math.max,null,e):h&&(c=b._colorAx&&q(c)?Math.max(c,n.aggNums(Math.max,null,e)):n.aggNums(Math.max,null,e));h&&void 0!==g&&(c-g>g-l?l=g-(c-g):c-g<g-l&&(c=g+(g-l)));l===c&&(l-=.5,c+=.5);k._sync("min",l);k._sync("max",c);k.autocolorscale&&k._sync("colorscale",0>l*c?f.colorscale.diverging:0<=l?f.colorscale.sequential:f.colorscale.sequentialminus)}},{"../../lib":750,"./helpers":626,"fast-isnumeric":241}],624:[function(a,G,C){var q=a("../../lib"),n=a("./helpers").hasColorscale,m=a("./helpers").extractOpts;
G.exports=function(f,b){function k(p,r){var t=p["_"+r];void 0!==t&&(p[r]=t)}function e(p,r){if(p=r.container?q.nestedProperty(p,r.container).get():p)if(p.coloraxis)p._colorAx=b[p.coloraxis];else{var t=m(p),w=t.auto;(w||void 0===t.min)&&k(p,r.min);(w||void 0===t.max)&&k(p,r.max);t.autocolorscale&&k(p,"colorscale")}}for(var h=0;h<f.length;h++){var l=f[h],c=l._module.colorbar;if(c)if(Array.isArray(c))for(var g=0;g<c.length;g++)e(l,c[g]);else e(l,c);n(l,"marker.line")&&e(l,{container:"marker.line",min:"cmin",
max:"cmax"})}for(var d in b._colorAxes)e(b[d],{min:"cmin",max:"cmax"})}},{"../../lib":750,"./helpers":626}],625:[function(a,G,C){function q(h,l){var c=l.slice(0,l.length-1);return l?m.nestedProperty(h,c).get()||{}:h}var n=a("fast-isnumeric"),m=a("../../lib"),f=a("../colorbar/has_colorbar"),b=a("../colorbar/defaults"),k=a("./scales").isValid,e=a("../../registry").traceIs;G.exports=function r(l,c,g,d,p){var t=p.prefix,w=p.cLetter,x="_module"in c,y=q(l,t),A=q(c,t),z=q(c._template||{},t)||{},F=function(){delete l.coloraxis;
delete c.coloraxis;return r(l,c,g,d,p)};if(x){var D=g._colorAxes||{},u=d(t+"coloraxis");if(u){t=e(c,"contour")&&m.nestedProperty(c,"contours.coloring").get()||"heatmap";(x=D[u])?(x[2].push(F),x[0]!==t&&(x[0]=!1,m.warn(["Ignoring coloraxis:",u,"setting as it is linked to incompatible colorscales."].join(" ")))):D[u]=[t,c,[F]];return}}F=y[w+"min"];D=y[w+"max"];F=n(F)&&n(D)&&F<D;d(t+w+"auto",!F)?d(t+w+"mid"):(d(t+w+"min"),d(t+w+"max"));w=y.colorscale;F=z.colorscale;var B;void 0!==w&&(B=!k(w));void 0!==
F&&(B=!k(F));d(t+"autocolorscale",B);d(t+"colorscale");d(t+"reversescale");if("marker.line."!==t){var I;t&&x&&(I=f(y));d(t+"showscale",I)&&(t&&z&&(A._template=z),b(y,A,g))}}},{"../../lib":750,"../../registry":882,"../colorbar/defaults":618,"../colorbar/has_colorbar":620,"./scales":630,"fast-isnumeric":241}],626:[function(a,G,C){function q(r){var t=r._colorAx,w=t?t:r;r={};var x;for(x=0;x<d.length;x++){var y=d[x];r[y]=w[y]}if(t){var A="c";for(x=0;x<p.length;x++)y=p[x],r[y]=w["c"+y]}else{for(x=0;x<p.length;x++){y=
p[x];var z="c"+y;z in w?r[y]=w[z]:(z="z"+y,z in w&&(r[y]=w[z]))}A=z.charAt(0)}r._sync=function(F,D){F=-1!==p.indexOf(F)?A+F:F;w[F]=w["_"+F]=D};return r}function n(r){var t=q(r);r=t.min;var w=t.max;t=t.reversescale?m(t.colorscale):t.colorscale;for(var x=t.length,y=Array(x),A=Array(x),z=0;z<x;z++){var F=t[z];y[z]=r+F[0]*(w-r);A[z]=F[1]}return{domain:y,range:A}}function m(r){var t=r.length,w=Array(t);--t;for(var x=0;0<=t;t--,x++){var y=r[t];w[x]=[1-y[0],y[1]]}return w}function f(r,t){t=t||{};var w=r.domain,
x=r.range;r=x.length;for(var y=Array(r),A=0;A<r;A++){var z=e(x[A]).toRgb();y[A]=[z.r,z.g,z.b,z.a]}var F=k.scale.linear().domain(w).range(y).clamp(!0);w=t.noNumericCheck;t=t.returnArray;t=w&&t?F:w?function(D){return b(F(D))}:t?function(D){return h(D)?F(D):e(D).isValid()?D:c.defaultLine}:function(D){return h(D)?b(F(D)):e(D).isValid()?D:c.defaultLine};t.domain=F.domain;t.range=function(){return x};return t}function b(r){return e({r:r[0],g:r[1],b:r[2],a:r[3]}).toRgbString()}var k=a("d3"),e=a("tinycolor2"),
h=a("fast-isnumeric"),l=a("../../lib"),c=a("../color"),g=a("./scales").isValid,d=["showscale","autocolorscale","colorscale","reversescale","colorbar"],p=["min","max","mid","auto"];G.exports={hasColorscale:function(r,t,w){r=t?l.nestedProperty(r,t).get()||{}:r;w=r[w||"color"];t=!1;if(l.isArrayOrTypedArray(w))for(var x=0;x<w.length;x++)if(h(w[x])){t=!0;break}return l.isPlainObject(r)&&(t||!0===r.showscale||h(r.cmin)&&h(r.cmax)||g(r.colorscale)||l.isPlainObject(r.colorbar))},extractOpts:q,extractScale:n,
flipScale:m,makeColorScaleFunc:f,makeColorScaleFuncFromTrace:function(r,t){return f(n(r),t)}}},{"../../lib":750,"../color":615,"./scales":630,d3:169,"fast-isnumeric":241,tinycolor2:548}],627:[function(a,G,C){C=a("./scales");var q=a("./helpers");G.exports={moduleType:"component",name:"colorscale",attributes:a("./attributes"),layoutAttributes:a("./layout_attributes"),supplyLayoutDefaults:a("./layout_defaults"),handleDefaults:a("./defaults"),crossTraceDefaults:a("./cross_trace_defaults"),calc:a("./calc"),
scales:C.scales,defaultScale:C.defaultScale,getScale:C.get,isValidScale:C.isValid,hasColorscale:q.hasColorscale,extractOpts:q.extractOpts,extractScale:q.extractScale,flipScale:q.flipScale,makeColorScaleFunc:q.makeColorScaleFunc,makeColorScaleFuncFromTrace:q.makeColorScaleFuncFromTrace}},{"./attributes":622,"./calc":623,"./cross_trace_defaults":624,"./defaults":625,"./helpers":626,"./layout_attributes":628,"./layout_defaults":629,"./scales":630}],628:[function(a,G,C){C=a("../../lib/extend").extendFlat;
var q=a("./attributes");a=a("./scales").scales;G.exports={editType:"calc",colorscale:{editType:"calc",sequential:{valType:"colorscale",dflt:a.Reds,editType:"calc"},sequentialminus:{valType:"colorscale",dflt:a.Blues,editType:"calc"},diverging:{valType:"colorscale",dflt:a.RdBu,editType:"calc"}},coloraxis:C({_isSubplotObj:!0,editType:"calc"},q("",{colorAttr:"corresponding trace color array(s)",noColorAxis:!0,showScaleDflt:!0}))}},{"../../lib/extend":740,"./attributes":622,"./scales":630}],629:[function(a,
G,C){var q=a("../../lib"),n=a("../../plot_api/plot_template"),m=a("./layout_attributes"),f=a("./defaults");G.exports=function(b,k){function e(r,t){return q.coerce(g,d,m.coloraxis,r,t)}q.coerce(b,k,m,"colorscale.sequential",void 0);q.coerce(b,k,m,"colorscale.sequentialminus",void 0);q.coerce(b,k,m,"colorscale.diverging",void 0);var h=k._colorAxes,l;for(l in h){var c=h[l];if(c[0]){var g=b[l]||{};var d=n.newContainer(k,l,"coloraxis");d._name=l;f(g,d,k,e,{prefix:"",cLetter:"c"})}else{for(var p=0;p<c[2].length;p++)c[2][p]();
delete k._colorAxes[l]}}}},{"../../lib":750,"../../plot_api/plot_template":788,"./defaults":625,"./layout_attributes":628}],630:[function(a,G,C){function q(b){var k=0;if(!Array.isArray(b)||2>b.length||!b[0]||!b[b.length-1]||0!==+b[0][0]||1!==+b[b.length-1][0])return!1;for(var e=0;e<b.length;e++){var h=b[e];if(2!==h.length||+h[0]<k||!n(h[1]).isValid())return!1;k=+h[0]}return!0}var n=a("tinycolor2"),m={Greys:[[0,"rgb(0,0,0)"],[1,"rgb(255,255,255)"]],YlGnBu:[[0,"rgb(8,29,88)"],[.125,"rgb(37,52,148)"],
[.25,"rgb(34,94,168)"],[.375,"rgb(29,145,192)"],[.5,"rgb(65,182,196)"],[.625,"rgb(127,205,187)"],[.75,"rgb(199,233,180)"],[.875,"rgb(237,248,217)"],[1,"rgb(255,255,217)"]],Greens:[[0,"rgb(0,68,27)"],[.125,"rgb(0,109,44)"],[.25,"rgb(35,139,69)"],[.375,"rgb(65,171,93)"],[.5,"rgb(116,196,118)"],[.625,"rgb(161,217,155)"],[.75,"rgb(199,233,192)"],[.875,"rgb(229,245,224)"],[1,"rgb(247,252,245)"]],YlOrRd:[[0,"rgb(128,0,38)"],[.125,"rgb(189,0,38)"],[.25,"rgb(227,26,28)"],[.375,"rgb(252,78,42)"],[.5,"rgb(253,141,60)"],
[.625,"rgb(254,178,76)"],[.75,"rgb(254,217,118)"],[.875,"rgb(255,237,160)"],[1,"rgb(255,255,204)"]],Bluered:[[0,"rgb(0,0,255)"],[1,"rgb(255,0,0)"]],RdBu:[[0,"rgb(5,10,172)"],[.35,"rgb(106,137,247)"],[.5,"rgb(190,190,190)"],[.6,"rgb(220,170,132)"],[.7,"rgb(230,145,90)"],[1,"rgb(178,10,28)"]],Reds:[[0,"rgb(220,220,220)"],[.2,"rgb(245,195,157)"],[.4,"rgb(245,160,105)"],[1,"rgb(178,10,28)"]],Blues:[[0,"rgb(5,10,172)"],[.35,"rgb(40,60,190)"],[.5,"rgb(70,100,245)"],[.6,"rgb(90,120,245)"],[.7,"rgb(106,137,247)"],
[1,"rgb(220,220,220)"]],Picnic:[[0,"rgb(0,0,255)"],[.1,"rgb(51,153,255)"],[.2,"rgb(102,204,255)"],[.3,"rgb(153,204,255)"],[.4,"rgb(204,204,255)"],[.5,"rgb(255,255,255)"],[.6,"rgb(255,204,255)"],[.7,"rgb(255,153,255)"],[.8,"rgb(255,102,204)"],[.9,"rgb(255,102,102)"],[1,"rgb(255,0,0)"]],Rainbow:[[0,"rgb(150,0,90)"],[.125,"rgb(0,0,200)"],[.25,"rgb(0,25,255)"],[.375,"rgb(0,152,255)"],[.5,"rgb(44,255,150)"],[.625,"rgb(151,255,0)"],[.75,"rgb(255,234,0)"],[.875,"rgb(255,111,0)"],[1,"rgb(255,0,0)"]],Portland:[[0,
"rgb(12,51,131)"],[.25,"rgb(10,136,186)"],[.5,"rgb(242,211,56)"],[.75,"rgb(242,143,56)"],[1,"rgb(217,30,30)"]],Jet:[[0,"rgb(0,0,131)"],[.125,"rgb(0,60,170)"],[.375,"rgb(5,255,255)"],[.625,"rgb(255,255,0)"],[.875,"rgb(250,0,0)"],[1,"rgb(128,0,0)"]],Hot:[[0,"rgb(0,0,0)"],[.3,"rgb(230,0,0)"],[.6,"rgb(255,210,0)"],[1,"rgb(255,255,255)"]],Blackbody:[[0,"rgb(0,0,0)"],[.2,"rgb(230,0,0)"],[.4,"rgb(230,210,0)"],[.7,"rgb(255,255,255)"],[1,"rgb(160,200,255)"]],Earth:[[0,"rgb(0,0,130)"],[.1,"rgb(0,180,180)"],
[.2,"rgb(40,210,40)"],[.4,"rgb(230,230,50)"],[.6,"rgb(120,70,20)"],[1,"rgb(255,255,255)"]],Electric:[[0,"rgb(0,0,0)"],[.15,"rgb(30,0,100)"],[.4,"rgb(120,0,100)"],[.6,"rgb(160,90,0)"],[.8,"rgb(230,200,0)"],[1,"rgb(255,250,220)"]],Viridis:[[0,"#440154"],[.06274509803921569,"#48186a"],[.12549019607843137,"#472d7b"],[.18823529411764706,"#424086"],[.25098039215686274,"#3b528b"],[.3137254901960784,"#33638d"],[.3764705882352941,"#2c728e"],[.4392156862745098,"#26828e"],[.5019607843137255,"#21918c"],[.5647058823529412,
"#1fa088"],[.6274509803921569,"#28ae80"],[.6901960784313725,"#3fbc73"],[.7529411764705882,"#5ec962"],[.8156862745098039,"#84d44b"],[.8784313725490196,"#addc30"],[.9411764705882353,"#d8e219"],[1,"#fde725"]],Cividis:[[0,"rgb(0,32,76)"],[.058824,"rgb(0,42,102)"],[.117647,"rgb(0,52,110)"],[.176471,"rgb(39,63,108)"],[.235294,"rgb(60,74,107)"],[.294118,"rgb(76,85,107)"],[.352941,"rgb(91,95,109)"],[.411765,"rgb(104,106,112)"],[.470588,"rgb(117,117,117)"],[.529412,"rgb(131,129,120)"],[.588235,"rgb(146,140,120)"],
[.647059,"rgb(161,152,118)"],[.705882,"rgb(176,165,114)"],[.764706,"rgb(192,177,109)"],[.823529,"rgb(209,191,102)"],[.882353,"rgb(225,204,92)"],[.941176,"rgb(243,219,79)"],[1,"rgb(255,233,69)"]]},f=m.RdBu;G.exports={scales:m,defaultScale:f,get:function(b,k){function e(){try{b=m[b]||JSON.parse(b)}catch(h){b=k}}k||(k=f);if(!b)return k;"string"===typeof b&&(e(),"string"===typeof b&&e());return q(b)?b:k},isValid:function(b){return void 0!==m[b]?!0:q(b)}}},{tinycolor2:548}],631:[function(a,G,C){G.exports=
function(q,n,m,f,b){q=(q-m)/(f-m);n=q+n/(f-m);m=(q+n)/2;return"left"===b||"bottom"===b?q:"center"===b||"middle"===b?m:"right"===b||"top"===b?n:q<2/3-m?q:n>4/3-m?n:m}},{}],632:[function(a,G,C){var q=a("../../lib"),n=[["sw-resize","s-resize","se-resize"],["w-resize","move","e-resize"],["nw-resize","n-resize","ne-resize"]];G.exports=function(m,f,b,k){m="left"===b?0:"center"===b?1:"right"===b?2:q.constrain(Math.floor(3*m),0,2);f="bottom"===k?0:"middle"===k?1:"top"===k?2:q.constrain(Math.floor(3*f),0,
2);return n[f][m]}},{"../../lib":750}],633:[function(a,G,C){C.selectMode=function(q){return"lasso"===q||"select"===q};C.drawMode=function(q){return"drawclosedpath"===q||"drawopenpath"===q||"drawline"===q||"drawrect"===q||"drawcircle"===q};C.openMode=function(q){return"drawline"===q||"drawopenpath"===q};C.rectMode=function(q){return"select"===q||"drawline"===q||"drawrect"===q||"drawcircle"===q};C.freeMode=function(q){return"lasso"===q||"drawclosedpath"===q||"drawopenpath"===q};C.selectingOrDrawing=
function(q){return C.freeMode(q)||C.rectMode(q)}},{}],634:[function(a,G,C){function q(){var l=document.createElement("div");l.className="dragcover";var c=l.style;c.position="fixed";c.left=0;c.right=0;c.top=0;c.bottom=0;c.zIndex=999999999;c.background="none";document.body.appendChild(l);return l}function n(l){return m(l.changedTouches?l.changedTouches[0]:l,document.body)}var m=a("mouse-event-offset"),f=a("has-hover"),b=a("has-passive-events"),k=a("../../lib").removeElement,e=a("../../plots/cartesian/constants"),
h=G.exports={};h.align=a("./align");h.getCursor=a("./cursor");a=a("./unhover");h.unhover=a.wrapped;h.unhoverRaw=a.raw;h.init=function(l){function c(N,M,E){Math.abs(N)<E&&(N=0);Math.abs(M)<E&&(M=0);return[N,M]}function g(N){r._dragged=!1;r._dragging=!0;var M=n(N);y=M[0];A=M[1];B=N.target;u=N;I=2===N.buttons||N.ctrlKey;"undefined"===typeof N.clientX&&"undefined"===typeof N.clientY&&(N.clientX=y,N.clientY=A);z=(new Date).getTime();z-r._mouseDownTime<w?t+=1:(t=1,r._mouseDownTime=z);l.prepFn&&l.prepFn(N,
y,A);f&&!I?(D=q(),D.style.cursor=window.getComputedStyle(x).cursor):f||(D=document,F=window.getComputedStyle(document.documentElement).cursor,document.documentElement.style.cursor=window.getComputedStyle(x).cursor);document.addEventListener("mouseup",p);document.addEventListener("touchend",p);!1!==l.dragmode&&(N.preventDefault(),document.addEventListener("mousemove",d),document.addEventListener("touchmove",d,{passive:!1}))}function d(N){N.preventDefault();N=n(N);var M=J(N[0]-y,N[1]-A,l.minDrag||e.MINDRAG);
N=M[0];M=M[1];if(N||M)r._dragged=!0,h.unhover(r);r._dragged&&l.moveFn&&!I&&(r._dragdata={element:x,dx:N,dy:M},l.moveFn(N,M))}function p(N){delete r._dragdata;!1!==l.dragmode&&(N.preventDefault(),document.removeEventListener("mousemove",d),document.removeEventListener("touchmove",d));document.removeEventListener("mouseup",p);document.removeEventListener("touchend",p);f?k(D):F&&(D.documentElement.style.cursor=F,F=null);if(r._dragging){r._dragging=!1;(new Date).getTime()-r._mouseDownTime>w&&(t=Math.max(t-
1,1));if(r._dragged)l.doneFn&&l.doneFn();else if(l.clickFn&&l.clickFn(t,u),!I){try{var M=new MouseEvent("click",N)}catch(L){var E=n(N);M=document.createEvent("MouseEvents");M.initMouseEvent("click",N.bubbles,N.cancelable,N.view,N.detail,N.screenX,N.screenY,E[0],E[1],N.ctrlKey,N.altKey,N.shiftKey,N.metaKey,N.button,N.relatedTarget)}B.dispatchEvent(M)}r._dragging=!1}r._dragged=!1}var r=l.gd,t=1,w=r._context.doubleClickDelay,x=l.element,y,A,z,F,D,u,B,I;r._mouseDownTime||(r._mouseDownTime=0);x.style.pointerEvents=
"all";x.onmousedown=g;b?(x._ontouchstart&&x.removeEventListener("touchstart",x._ontouchstart),x._ontouchstart=g,x.addEventListener("touchstart",g,{passive:!1})):x.ontouchstart=g;var J=l.clampFn||c};h.coverSlip=q},{"../../lib":750,"../../plots/cartesian/constants":805,"./align":631,"./cursor":632,"./unhover":635,"has-hover":414,"has-passive-events":415,"mouse-event-offset":458}],635:[function(a,G,C){var q=a("../../lib/events"),n=a("../../lib/throttle"),m=a("../../lib/dom").getGraphDiv,f=a("../fx/constants"),
b=G.exports={};b.wrapped=function(k,e,h){k=m(k);k._fullLayout&&n.clear(k._fullLayout._uid+f.HOVERID);b.raw(k,e,h)};b.raw=function(k,e){var h=k._fullLayout,l=k._hoverdata;e||(e={});e.target&&!1===q.triggerHandler(k,"plotly_beforehover",e)||(h._hoverlayer.selectAll("g").remove(),h._hoverlayer.selectAll("line").remove(),h._hoverlayer.selectAll("circle").remove(),k._hoverdata=void 0,e.target&&l&&k.emit("plotly_unhover",{event:e,points:l}))}},{"../../lib/dom":738,"../../lib/events":739,"../../lib/throttle":775,
"../fx/constants":649}],636:[function(a,G,C){C.dash={valType:"string",values:"solid dot dash longdash dashdot longdashdot".split(" "),dflt:"solid",editType:"style"}},{}],637:[function(a,G,C){function q(S,R){return F.symbolFuncs[S%100](R)+(200<=S?"M0,0.5L0.5,0L0,-0.5L-0.5,0Z":"")}function n(S,R,O,T){var V=e.select(S.node().parentNode),X=-1!==R.indexOf("top")?"top":-1!==R.indexOf("bottom")?"bottom":"middle";R=-1!==R.indexOf("left")?"end":-1!==R.indexOf("right")?"start":"middle";var ba=T?T/.8+1:0,aa=
(r.lineCount(S)-1)*w+1;T=J[R]*ba;O=.75*O+J[X]*ba+(J[X]-1)*aa*O/2;S.attr("text-anchor",R);V.attr("transform","translate("+T+","+O+")")}function m(S,R){S=S.ts||R.textfont.size;return h(S)&&0<S?S:0}function f(S,R,O,T){var V=S[0]-R[0],X=S[1]-R[1],ba=O[0]-R[0],aa=O[1]-R[1];O=Math.pow(V*V+X*X,.25);S=Math.pow(ba*ba+aa*aa,.25);V=(S*S*V-O*O*ba)*T;T*=S*S*X-O*O*aa;X=3*S*(O+S);O=3*O*(O+S);return[[e.round(R[0]+(X&&V/X),2),e.round(R[1]+(X&&T/X),2)],[e.round(R[0]-(O&&V/O),2),e.round(R[1]-(O&&T/O),2)]]}function b(S){var R=
S.getAttribute("data-unformatted");if(null!==R)return R+S.getAttribute("data-math")+S.getAttribute("text-anchor")+S.getAttribute("style")}function k(S,R){if(!S)return null;R=R._context;return"url('"+(R._exportedPlot?"":R._baseUrl||"")+"#"+S+"')"}var e=a("d3"),h=a("fast-isnumeric"),l=a("tinycolor2"),c=a("../../registry"),g=a("../color"),d=a("../colorscale"),p=a("../../lib"),r=a("../../lib/svg_text_utils"),t=a("../../constants/xmlns_namespaces"),w=a("../../constants/alignment").LINE_SPACING,x=a("../../constants/interactions").DESELECTDIM,
y=a("../../traces/scatter/subtypes"),A=a("../../traces/scatter/make_bubble_size_func"),z=a("../../components/fx/helpers").appendArrayPointValue,F=G.exports={};F.font=function(S,R,O,T){p.isPlainObject(R)&&(T=R.color,O=R.size,R=R.family);R&&S.style("font-family",R);O+1&&S.style("font-size",O+"px");T&&S.call(g.fill,T)};F.setPosition=function(S,R,O){S.attr("x",R).attr("y",O)};F.setSize=function(S,R,O){S.attr("width",R).attr("height",O)};F.setRect=function(S,R,O,T,V){S.call(F.setPosition,R,O).call(F.setSize,
T,V)};F.translatePoint=function(S,R,O,T){O=O.c2p(S.x);S=T.c2p(S.y);if(h(O)&&h(S)&&R.node())"text"===R.node().nodeName?R.attr("x",O).attr("y",S):R.attr("transform","translate("+O+","+S+")");else return!1;return!0};F.translatePoints=function(S,R,O){S.each(function(T){var V=e.select(this);F.translatePoint(T,V,R,O)})};F.hideOutsideRangePoint=function(S,R,O,T,V,X){R.attr("display",O.isPtWithinRange(S,V)&&T.isPtWithinRange(S,X)?null:"none")};F.hideOutsideRangePoints=function(S,R){if(R._hasClipOnAxisFalse){var O=
R.xaxis,T=R.yaxis;S.each(function(V){V=V[0].trace;var X=V.xcalendar,ba=V.ycalendar;V=c.traceIs(V,"bar-like")?".bartext":".point,.textpoint";S.selectAll(V).each(function(aa){F.hideOutsideRangePoint(aa,e.select(this),O,T,X,ba)})})}};F.crispRound=function(S,R,O){return R&&h(R)?S._context.staticPlot?R:1>R?1:Math.round(R):O||0};F.singleLineStyle=function(S,R,O,T,V){R.style("fill","none");S=(((S||[])[0]||{}).trace||{}).line||{};O=O||S.width||0;V=V||S.dash||"";g.stroke(R,T||S.color);F.dashLine(R,V,O)};F.lineGroupStyle=
function(S,R,O,T){S.style("fill","none").each(function(V){V=(((V||[])[0]||{}).trace||{}).line||{};var X=R||V.width||0,ba=T||V.dash||"";e.select(this).call(g.stroke,O||V.color).call(F.dashLine,ba,X)})};F.dashLine=function(S,R,O){O=+O||0;R=F.dashStyle(R,O);S.style({"stroke-dasharray":R,"stroke-width":O+"px"})};F.dashStyle=function(S,R){R=Math.max(+R||1,3);"solid"===S?S="":"dot"===S?S=R+"px,"+R+"px":"dash"===S?S=3*R+"px,"+3*R+"px":"longdash"===S?S=5*R+"px,"+5*R+"px":"dashdot"===S?S=3*R+"px,"+R+"px,"+
R+"px,"+R+"px":"longdashdot"===S&&(S=5*R+"px,"+2*R+"px,"+R+"px,"+2*R+"px");return S};F.singleFillStyle=function(S){var R=(((e.select(S.node()).data()[0]||[])[0]||{}).trace||{}).fillcolor;R&&S.call(g.fill,R)};F.fillGroupStyle=function(S){S.style("stroke-width",0).each(function(R){var O=e.select(this);R[0].trace&&O.call(g.fill,R[0].trace.fillcolor)})};var D=a("./symbol_defs");F.symbolNames=[];F.symbolFuncs=[];F.symbolNeedLines={};F.symbolNoDot={};F.symbolNoFill={};F.symbolList=[];Object.keys(D).forEach(function(S){var R=
D[S],O=R.n;F.symbolList.push(O,String(O),S,O+100,String(O+100),S+"-open");F.symbolNames[O]=S;F.symbolFuncs[O]=R.f;R.needLine&&(F.symbolNeedLines[O]=!0);R.noDot?F.symbolNoDot[O]=!0:F.symbolList.push(O+200,String(O+200),S+"-dot",O+300,String(O+300),S+"-open-dot");R.noFill&&(F.symbolNoFill[O]=!0)});var u=F.symbolNames.length;F.symbolNumber=function(S){if(h(S))S=+S;else if("string"===typeof S){var R=0;0<S.indexOf("-open")&&(R=100,S=S.replace("-open",""));0<S.indexOf("-dot")&&(R+=200,S=S.replace("-dot",
""));S=F.symbolNames.indexOf(S);0<=S&&(S+=R)}return S%100>=u||400<=S?0:Math.floor(Math.max(S,0))};a={x1:1,x2:0,y1:0,y2:0};G={x1:0,x2:0,y1:1,y2:0};var B=e.format("~.1f"),I={radial:{node:"radialGradient"},radialreversed:{node:"radialGradient",reversed:!0},horizontal:{node:"linearGradient",attrs:a},horizontalreversed:{node:"linearGradient",attrs:a,reversed:!0},vertical:{node:"linearGradient",attrs:G},verticalreversed:{node:"linearGradient",attrs:G,reversed:!0}};F.gradient=function(S,R,O,T,V,X){for(var ba=
V.length,aa=I[T],ka=Array(ba),ha=0;ha<ba;ha++)aa.reversed?ka[ba-1-ha]=[B(100*(1-V[ha][0])),V[ha][1]]:ka[ha]=[B(100*V[ha][0]),V[ha][1]];V=R._fullLayout;var ca="g"+V._uid+"-"+O;O=V._defs.select(".gradients").selectAll("#"+ca).data([T+ka.join(";")],p.identity);O.exit().remove();O.enter().append(aa.node).each(function(){var sa=e.select(this);aa.attrs&&sa.attr(aa.attrs);sa.attr("id",ca);sa=sa.selectAll("stop").data(ka);sa.exit().remove();sa.enter().append("stop");sa.each(function(ma){var ra=l(ma[1]);e.select(this).attr({offset:ma[0]+
"%","stop-color":g.tinyRGB(ra),"stop-opacity":ra.getAlpha()})})});S.style(X,k(ca,R)).style(X+"-opacity",null);S="."+e.select(S.node().parentNode).attr("class").replace(/\s/g,".")+"\x3e."+S.attr("class").replace(/\s/g,".");V._gradientUrlQueryParts[S]=1};F.initGradients=function(S){S=S._fullLayout;p.ensureSingle(S._defs,"g","gradients").selectAll("linearGradient,radialGradient").remove();S._gradientUrlQueryParts={}};F.pointStyle=function(S,R,O){if(S.size()){var T=F.makePointStyleFns(R);S.each(function(V){F.singlePointStyle(V,
e.select(this),R,T,O)})}};F.singlePointStyle=function(S,R,O,T,V){var X=O.marker,ba=X.line;R.style("opacity",T.selectedOpacityFn?T.selectedOpacityFn(S):void 0===S.mo?X.opacity:S.mo);if(T.ms2mrc){var aa="various"===S.ms||"various"===X.size?3:T.ms2mrc(S.ms);S.mrc=aa;T.selectedSizeFn&&(aa=S.mrc=T.selectedSizeFn(S));var ka=F.symbolNumber(S.mx||X.symbol)||0;S.om=100<=ka%200;R.attr("d",q(ka,aa))}aa=!1;if(S.so){ka=ba.outlierwidth;var ha=ba.outliercolor;ba=X.outliercolor}else ka=(ba||{}).width,ka=(S.mlw+1||
ka+1||(S.trace?(S.trace.marker.line||{}).width:0)+1)-1||0,ha="mlc"in S?S.mlcc=T.lineScale(S.mlc):p.isArrayOrTypedArray(ba.color)?g.defaultLine:ba.color,p.isArrayOrTypedArray(X.color)&&(aa=!0),ba="mc"in S?S.mcc=T.markerScale(S.mc):X.color||"rgba(0,0,0,0)",T.selectedColorFn&&(ba=T.selectedColorFn(S));if(S.om)R.call(g.stroke,ba).style({"stroke-width":(ka||1)+"px",fill:"none"});else{R.style("stroke-width",(S.isBlank?0:ka)+"px");var ca=X.gradient;(T=S.mgt)?aa=!0:T=ca&&ca.type;Array.isArray(T)&&(T=T[0],
I[T]||(T=0));T&&"none"!==T?((X=S.mgc)?aa=!0:X=ca.color,O=O.uid,aa&&(O+="-"+S.i),F.gradient(R,V,O,T,[[0,X],[1,ba]],"fill")):g.fill(R,ba);ka&&g.stroke(R,ha)}};F.makePointStyleFns=function(S){var R={},O=S.marker;R.markerScale=F.tryColorscale(O,"");R.lineScale=F.tryColorscale(O,"line");c.traceIs(S,"symbols")&&(R.ms2mrc=y.isBubble(S)?A(S):function(){return(O.size||6)/2});S.selectedpoints&&p.extendFlat(R,F.makeSelectedPointStyleFns(S));return R};F.makeSelectedPointStyleFns=function(S){var R={},O=S.marker||
{},T=(S.selected||{}).marker||{},V=(S.unselected||{}).marker||{},X=T.opacity,ba=V.opacity,aa=void 0!==X,ka=void 0!==ba;if(p.isArrayOrTypedArray(O.opacity)||aa||ka)R.selectedOpacityFn=function(oa){var ua=void 0===oa.mo?O.opacity:oa.mo;return oa.selected?aa?X:ua:ka?ba:x*ua};var ha=O.color,ca=T.color,sa=V.color;if(ca||sa)R.selectedColorFn=function(oa){var ua=oa.mcc||ha;return oa.selected?ca||ua:sa||ua};var ma=O.size,ra=T.size,qa=V.size,Y=void 0!==ra,pa=void 0!==qa;c.traceIs(S,"symbols")&&(Y||pa)&&(R.selectedSizeFn=
function(oa){var ua=oa.mrc||ma/2;return oa.selected?Y?ra/2:ua:pa?qa/2:ua});return R};F.makeSelectedTextStyleFns=function(S){var R={},O=(S.textfont||{}).color,T=((S.selected||{}).textfont||{}).color,V=((S.unselected||{}).textfont||{}).color;R.selectedTextColorFn=function(X){var ba=X.tc||O;return X.selected?T||ba:V?V:T?ba:g.addOpacity(ba,x)};return R};F.selectedPointStyle=function(S,R){if(S.size()&&R.selectedpoints){var O=F.makeSelectedPointStyleFns(R),T=R.marker||{},V=[];O.selectedOpacityFn&&V.push(function(X,
ba){X.style("opacity",O.selectedOpacityFn(ba))});O.selectedColorFn&&V.push(function(X,ba){g.fill(X,O.selectedColorFn(ba))});O.selectedSizeFn&&V.push(function(X,ba){var aa=ba.mx||T.symbol||0,ka=O.selectedSizeFn(ba);X.attr("d",q(F.symbolNumber(aa),ka));ba.mrc2=ka});V.length&&S.each(function(X){for(var ba=e.select(this),aa=0;aa<V.length;aa++)V[aa](ba,X)})}};F.tryColorscale=function(S,R){if(S=R?p.nestedProperty(S,R).get():S)if(R=S.color,(S.colorscale||S._colorAx)&&p.isArrayOrTypedArray(R))return d.makeColorScaleFuncFromTrace(S);
return p.identity};var J={start:1,end:-1,middle:0,bottom:1,top:-1};F.textPointStyle=function(S,R,O){if(S.size()){if(R.selectedpoints)var T=F.makeSelectedTextStyleFns(R).selectedTextColorFn;var V=R.texttemplate,X=O._fullLayout;S.each(function(ba){var aa=e.select(this),ka=V?p.extractOption(ba,R,"txt","texttemplate"):p.extractOption(ba,R,"tx","text");if(ka||0===ka){if(V){var ha=R._module.formatLabels?R._module.formatLabels(ba,R,X):{},ca={};z(ca,R,ba.i);ka=p.texttemplateString(ka,ha,X._d3locale,ca,ba,
R._meta||{})}ha=ba.tp||R.textposition;ca=m(ba,R);var sa=T?T(ba):ba.tc||R.textfont.color;aa.call(F.font,ba.tf||R.textfont.family,ca,sa).text(ka).call(r.convertToTspans,O).call(n,ha,ca,ba.mrc)}else aa.remove()})}};F.selectedTextStyle=function(S,R){if(S.size()&&R.selectedpoints){var O=F.makeSelectedTextStyleFns(R);S.each(function(T){var V=e.select(this),X=O.selectedTextColorFn(T),ba=T.tp||R.textposition,aa=m(T,R);g.fill(V,X);n(V,ba,aa,T.mrc2||T.mrc)})}};F.smoothopen=function(S,R){if(3>S.length)return"M"+
S.join("L");var O="M"+S[0],T=[],V;for(V=1;V<S.length-1;V++)T.push(f(S[V-1],S[V],S[V+1],R));O+="Q"+T[0][0]+" "+S[1];for(V=2;V<S.length-1;V++)O+="C"+T[V-2][1]+" "+T[V-1][0]+" "+S[V];return O+="Q"+T[S.length-3][1]+" "+S[S.length-1]};F.smoothclosed=function(S,R){if(3>S.length)return"M"+S.join("L")+"Z";var O="M"+S[0],T=S.length-1,V=[f(S[T],S[0],S[1],R)],X;for(X=1;X<T;X++)V.push(f(S[X-1],S[X],S[X+1],R));V.push(f(S[T-1],S[T],S[0],R));for(X=1;X<=T;X++)O+="C"+V[X-1][1]+" "+V[X][0]+" "+S[X];return O+="C"+V[T][1]+
" "+V[0][0]+" "+S[0]+"Z"};var N={hv:function(S,R){return"H"+e.round(R[0],2)+"V"+e.round(R[1],2)},vh:function(S,R){return"V"+e.round(R[1],2)+"H"+e.round(R[0],2)},hvh:function(S,R){return"H"+e.round((S[0]+R[0])/2,2)+"V"+e.round(R[1],2)+"H"+e.round(R[0],2)},vhv:function(S,R){return"V"+e.round((S[1]+R[1])/2,2)+"H"+e.round(R[0],2)+"V"+e.round(R[1],2)}},M=function(S,R){return"L"+e.round(R[0],2)+","+e.round(R[1],2)};F.steps=function(S){var R=N[S]||M;return function(O){for(var T="M"+e.round(O[0][0],2)+","+
e.round(O[0][1],2),V=1;V<O.length;V++)T+=R(O[V-1],O[V]);return T}};F.makeTester=function(){var S=p.ensureSingleById(e.select("body"),"svg","js-plotly-tester",function(O){O.attr(t.svgAttrs).style({position:"absolute",left:"-10000px",top:"-10000px",width:"9000px",height:"9000px","z-index":"1"})}),R=p.ensureSingle(S,"path","js-reference-point",function(O){O.attr("d","M0,0H1V1H0Z").style({"stroke-width":0,fill:"black"})});F.tester=S;F.testref=R};F.savedBBoxes={};var E=0;F.bBox=function(S,R,O){O||(O=b(S));
var T;if(O){if(T=F.savedBBoxes[O])return p.extendFlat({},T)}else if(1===S.childNodes.length){var V=S.childNodes[0];if(O=b(V)){T=+V.getAttribute("x")||0;var X=+V.getAttribute("y")||0,ba=V.getAttribute("transform");if(!ba)return O=F.bBox(V,!1,O),T&&(O.left+=T,O.right+=T),X&&(O.top+=X,O.bottom+=X),O;O+="~"+T+"~"+X+"~"+ba;if(T=F.savedBBoxes[O])return p.extendFlat({},T)}}if(!R){var aa=F.tester.node();S=S.cloneNode(!0);aa.appendChild(S)}e.select(S).attr("transform",null).call(r.positionText,0,0);T=S.getBoundingClientRect();
X=F.testref.node().getBoundingClientRect();R||aa.removeChild(S);R={height:T.height,width:T.width,left:T.left-X.left,top:T.top-X.top,right:T.right-X.left,bottom:T.bottom-X.top};1E4<=E&&(F.savedBBoxes={},E=0);O&&(F.savedBBoxes[O]=R);E++;return p.extendFlat({},R)};F.setClipUrl=function(S,R,O){S.attr("clip-path",k(R,O))};F.getTranslate=function(S){S=(S[S.attr?"attr":"getAttribute"]("transform")||"").replace(/.*\btranslate\((-?\d*\.?\d*)[^-\d]*(-?\d*\.?\d*)[^\d].*/,function(R,O,T){return[O,T].join(" ")}).split(" ");
return{x:+S[0]||0,y:+S[1]||0}};F.setTranslate=function(S,R,O){var T=S.attr?"attr":"setAttribute",V=S[S.attr?"attr":"getAttribute"]("transform")||"";R=R||0;O=O||0;V=V.replace(/(\btranslate\(.*?\);?)/,"").trim();V=(V+(" translate("+R+", "+O+")")).trim();S[T]("transform",V);return V};F.getScale=function(S){S=(S[S.attr?"attr":"getAttribute"]("transform")||"").replace(/.*\bscale\((\d*\.?\d*)[^\d]*(\d*\.?\d*)[^\d].*/,function(R,O,T){return[O,T].join(" ")}).split(" ");return{x:+S[0]||1,y:+S[1]||1}};F.setScale=
function(S,R,O){var T=S.attr?"attr":"setAttribute",V=S[S.attr?"attr":"getAttribute"]("transform")||"";R=R||1;O=O||1;V=V.replace(/(\bscale\(.*?\);?)/,"").trim();V=(V+(" scale("+R+", "+O+")")).trim();S[T]("transform",V);return V};var L=/\s*sc.*/;F.setPointGroupScale=function(S,R,O){R=R||1;O=O||1;if(S){var T=1===R&&1===O?"":" scale("+R+","+O+")";S.each(function(){var V=(this.getAttribute("transform")||"").replace(L,"");V+=T;V=V.trim();this.setAttribute("transform",V)})}};var Q=/translate\([^)]*\)\s*$/;
F.setTextPointsScale=function(S,R,O){S&&S.each(function(){var T=e.select(this),V=T.select("text");if(V.node()){var X=parseFloat(V.attr("x")||0);var ba=parseFloat(V.attr("y")||0);V=(T.attr("transform")||"").match(Q);X=1===R&&1===O?[]:["translate("+X+","+ba+")","scale("+R+","+O+")","translate("+-X+","+-ba+")"];V&&X.push(V);T.attr("transform",X.join(" "))}})}},{"../../components/fx/helpers":651,"../../constants/alignment":717,"../../constants/interactions":724,"../../constants/xmlns_namespaces":726,
"../../lib":750,"../../lib/svg_text_utils":774,"../../registry":882,"../../traces/scatter/make_bubble_size_func":1175,"../../traces/scatter/subtypes":1183,"../color":615,"../colorscale":627,"./symbol_defs":638,d3:169,"fast-isnumeric":241,tinycolor2:548}],638:[function(a,G,C){var q=a("d3");G.exports={circle:{n:0,f:function(n){n=q.round(n,2);return"M"+n+",0A"+n+","+n+" 0 1,1 0,-"+n+"A"+n+","+n+" 0 0,1 "+n+",0Z"}},square:{n:1,f:function(n){n=q.round(n,2);return"M"+n+","+n+"H-"+n+"V-"+n+"H"+n+"Z"}},diamond:{n:2,
f:function(n){n=q.round(1.3*n,2);return"M"+n+",0L0,"+n+"L-"+n+",0L0,-"+n+"Z"}},cross:{n:3,f:function(n){var m=q.round(.4*n,2);n=q.round(1.2*n,2);return"M"+n+","+m+"H"+m+"V"+n+"H-"+m+"V"+m+"H-"+n+"V-"+m+"H-"+m+"V-"+n+"H"+m+"V-"+m+"H"+n+"Z"}},x:{n:4,f:function(n){n=q.round(.8*n/Math.sqrt(2),2);var m="l"+n+","+n,f="l"+n+",-"+n,b="l-"+n+",-"+n,k="l-"+n+","+n;return"M0,"+n+m+f+b+f+b+k+b+k+m+k+m+"Z"}},"triangle-up":{n:5,f:function(n){var m=q.round(2*n/Math.sqrt(3),2),f=q.round(n/2,2);n=q.round(n,2);return"M-"+
m+","+f+"H"+m+"L0,-"+n+"Z"}},"triangle-down":{n:6,f:function(n){var m=q.round(2*n/Math.sqrt(3),2),f=q.round(n/2,2);n=q.round(n,2);return"M-"+m+",-"+f+"H"+m+"L0,"+n+"Z"}},"triangle-left":{n:7,f:function(n){var m=q.round(2*n/Math.sqrt(3),2),f=q.round(n/2,2);n=q.round(n,2);return"M"+f+",-"+m+"V"+m+"L-"+n+",0Z"}},"triangle-right":{n:8,f:function(n){var m=q.round(2*n/Math.sqrt(3),2),f=q.round(n/2,2);n=q.round(n,2);return"M-"+f+",-"+m+"V"+m+"L"+n+",0Z"}},"triangle-ne":{n:9,f:function(n){var m=q.round(.6*
n,2);n=q.round(1.2*n,2);return"M-"+n+",-"+m+"H"+m+"V"+n+"Z"}},"triangle-se":{n:10,f:function(n){var m=q.round(.6*n,2);n=q.round(1.2*n,2);return"M"+m+",-"+n+"V"+m+"H-"+n+"Z"}},"triangle-sw":{n:11,f:function(n){var m=q.round(.6*n,2);n=q.round(1.2*n,2);return"M"+n+","+m+"H-"+m+"V-"+n+"Z"}},"triangle-nw":{n:12,f:function(n){var m=q.round(.6*n,2);n=q.round(1.2*n,2);return"M-"+m+","+n+"V-"+m+"H"+n+"Z"}},pentagon:{n:13,f:function(n){var m=q.round(.951*n,2),f=q.round(.588*n,2),b=q.round(-n,2),k=q.round(-.309*
n,2);n=q.round(.809*n,2);return"M"+m+","+k+"L"+f+","+n+"H-"+f+"L-"+m+","+k+"L0,"+b+"Z"}},hexagon:{n:14,f:function(n){var m=q.round(n,2),f=q.round(n/2,2);n=q.round(n*Math.sqrt(3)/2,2);return"M"+n+",-"+f+"V"+f+"L0,"+m+"L-"+n+","+f+"V-"+f+"L0,-"+m+"Z"}},hexagon2:{n:15,f:function(n){var m=q.round(n,2),f=q.round(n/2,2);n=q.round(n*Math.sqrt(3)/2,2);return"M-"+f+","+n+"H"+f+"L"+m+",0L"+f+",-"+n+"H-"+f+"L-"+m+",0Z"}},octagon:{n:16,f:function(n){var m=q.round(.924*n,2);n=q.round(.383*n,2);return"M-"+n+",-"+
m+"H"+n+"L"+m+",-"+n+"V"+n+"L"+n+","+m+"H-"+n+"L-"+m+","+n+"V-"+n+"Z"}},star:{n:17,f:function(n){var m=1.4*n;n=q.round(.225*m,2);var f=q.round(.951*m,2),b=q.round(.363*m,2),k=q.round(.588*m,2),e=q.round(-m,2),h=q.round(-.309*m,2),l=q.round(.118*m,2),c=q.round(.809*m,2);m=q.round(.382*m,2);return"M"+n+","+h+"H"+f+"L"+b+","+l+"L"+k+","+c+"L0,"+m+"L-"+k+","+c+"L-"+b+","+l+"L-"+f+","+h+"H-"+n+"L0,"+e+"Z"}},hexagram:{n:18,f:function(n){var m=q.round(.66*n,2),f=q.round(.38*n,2);n=q.round(.76*n,2);return"M-"+
n+",0l-"+f+",-"+m+"h"+n+"l"+f+",-"+m+"l"+f+","+m+"h"+n+"l-"+f+","+m+"l"+f+","+m+"h-"+n+"l-"+f+","+m+"l-"+f+",-"+m+"h-"+n+"Z"}},"star-triangle-up":{n:19,f:function(n){var m=q.round(n*Math.sqrt(3)*.8,2),f=q.round(.8*n,2),b=q.round(1.6*n,2);n=q.round(4*n,2);n="A "+n+","+n+" 0 0 1 ";return"M-"+m+","+f+n+m+","+f+n+"0,-"+b+n+"-"+m+","+f+"Z"}},"star-triangle-down":{n:20,f:function(n){var m=q.round(n*Math.sqrt(3)*.8,2),f=q.round(.8*n,2),b=q.round(1.6*n,2);n=q.round(4*n,2);n="A "+n+","+n+" 0 0 1 ";return"M"+
m+",-"+f+n+"-"+m+",-"+f+n+"0,"+b+n+m+",-"+f+"Z"}},"star-square":{n:21,f:function(n){var m=q.round(1.1*n,2);n=q.round(2*n,2);n="A "+n+","+n+" 0 0 1 ";return"M-"+m+",-"+m+n+"-"+m+","+m+n+m+","+m+n+m+",-"+m+n+"-"+m+",-"+m+"Z"}},"star-diamond":{n:22,f:function(n){var m=q.round(1.4*n,2);n=q.round(1.9*n,2);n="A "+n+","+n+" 0 0 1 ";return"M-"+m+",0"+n+"0,"+m+n+m+",0"+n+"0,-"+m+n+"-"+m+",0Z"}},"diamond-tall":{n:23,f:function(n){var m=q.round(.7*n,2);n=q.round(1.4*n,2);return"M0,"+n+"L"+m+",0L0,-"+n+"L-"+
m+",0Z"}},"diamond-wide":{n:24,f:function(n){var m=q.round(1.4*n,2);n=q.round(.7*n,2);return"M0,"+n+"L"+m+",0L0,-"+n+"L-"+m+",0Z"}},hourglass:{n:25,f:function(n){n=q.round(n,2);return"M"+n+","+n+"H-"+n+"L"+n+",-"+n+"H-"+n+"Z"},noDot:!0},bowtie:{n:26,f:function(n){n=q.round(n,2);return"M"+n+","+n+"V-"+n+"L-"+n+","+n+"V-"+n+"Z"},noDot:!0},"circle-cross":{n:27,f:function(n){n=q.round(n,2);return"M0,"+n+"V-"+n+"M"+n+",0H-"+n+"M"+n+",0A"+n+","+n+" 0 1,1 0,-"+n+"A"+n+","+n+" 0 0,1 "+n+",0Z"},needLine:!0,
noDot:!0},"circle-x":{n:28,f:function(n){var m=q.round(n,2);n=q.round(n/Math.sqrt(2),2);return"M"+n+","+n+"L-"+n+",-"+n+"M"+n+",-"+n+"L-"+n+","+n+"M"+m+",0A"+m+","+m+" 0 1,1 0,-"+m+"A"+m+","+m+" 0 0,1 "+m+",0Z"},needLine:!0,noDot:!0},"square-cross":{n:29,f:function(n){n=q.round(n,2);return"M0,"+n+"V-"+n+"M"+n+",0H-"+n+"M"+n+","+n+"H-"+n+"V-"+n+"H"+n+"Z"},needLine:!0,noDot:!0},"square-x":{n:30,f:function(n){n=q.round(n,2);return"M"+n+","+n+"L-"+n+",-"+n+"M"+n+",-"+n+"L-"+n+","+n+"M"+n+","+n+"H-"+n+
"V-"+n+"H"+n+"Z"},needLine:!0,noDot:!0},"diamond-cross":{n:31,f:function(n){n=q.round(1.3*n,2);return"M"+n+",0L0,"+n+"L-"+n+",0L0,-"+n+"ZM0,-"+n+"V"+n+"M-"+n+",0H"+n},needLine:!0,noDot:!0},"diamond-x":{n:32,f:function(n){var m=q.round(1.3*n,2);n=q.round(.65*n,2);return"M"+m+",0L0,"+m+"L-"+m+",0L0,-"+m+"ZM-"+n+",-"+n+"L"+n+","+n+"M-"+n+","+n+"L"+n+",-"+n},needLine:!0,noDot:!0},"cross-thin":{n:33,f:function(n){n=q.round(1.4*n,2);return"M0,"+n+"V-"+n+"M"+n+",0H-"+n},needLine:!0,noDot:!0,noFill:!0},"x-thin":{n:34,
f:function(n){n=q.round(n,2);return"M"+n+","+n+"L-"+n+",-"+n+"M"+n+",-"+n+"L-"+n+","+n},needLine:!0,noDot:!0,noFill:!0},asterisk:{n:35,f:function(n){var m=q.round(1.2*n,2);n=q.round(.85*n,2);return"M0,"+m+"V-"+m+"M"+m+",0H-"+m+"M"+n+","+n+"L-"+n+",-"+n+"M"+n+",-"+n+"L-"+n+","+n},needLine:!0,noDot:!0,noFill:!0},hash:{n:36,f:function(n){var m=q.round(n/2,2);n=q.round(n,2);return"M"+m+","+n+"V-"+n+"m-"+n+",0V"+n+"M"+n+","+m+"H-"+n+"m0,-"+n+"H"+n},needLine:!0,noFill:!0},"y-up":{n:37,f:function(n){var m=
q.round(1.2*n,2),f=q.round(1.6*n,2);n=q.round(.8*n,2);return"M-"+m+","+n+"L0,0M"+m+","+n+"L0,0M0,-"+f+"L0,0"},needLine:!0,noDot:!0,noFill:!0},"y-down":{n:38,f:function(n){var m=q.round(1.2*n,2),f=q.round(1.6*n,2);n=q.round(.8*n,2);return"M-"+m+",-"+n+"L0,0M"+m+",-"+n+"L0,0M0,"+f+"L0,0"},needLine:!0,noDot:!0,noFill:!0},"y-left":{n:39,f:function(n){var m=q.round(1.2*n,2),f=q.round(1.6*n,2);n=q.round(.8*n,2);return"M"+n+","+m+"L0,0M"+n+",-"+m+"L0,0M-"+f+",0L0,0"},needLine:!0,noDot:!0,noFill:!0},"y-right":{n:40,
f:function(n){var m=q.round(1.2*n,2),f=q.round(1.6*n,2);n=q.round(.8*n,2);return"M-"+n+","+m+"L0,0M-"+n+",-"+m+"L0,0M"+f+",0L0,0"},needLine:!0,noDot:!0,noFill:!0},"line-ew":{n:41,f:function(n){n=q.round(1.4*n,2);return"M"+n+",0H-"+n},needLine:!0,noDot:!0,noFill:!0},"line-ns":{n:42,f:function(n){n=q.round(1.4*n,2);return"M0,"+n+"V-"+n},needLine:!0,noDot:!0,noFill:!0},"line-ne":{n:43,f:function(n){n=q.round(n,2);return"M"+n+",-"+n+"L-"+n+","+n},needLine:!0,noDot:!0,noFill:!0},"line-nw":{n:44,f:function(n){n=
q.round(n,2);return"M"+n+","+n+"L-"+n+",-"+n},needLine:!0,noDot:!0,noFill:!0},"arrow-up":{n:45,f:function(n){var m=q.round(n,2);n=q.round(2*n,2);return"M0,0L-"+m+","+n+"H"+m+"Z"},noDot:!0},"arrow-down":{n:46,f:function(n){var m=q.round(n,2);n=q.round(2*n,2);return"M0,0L-"+m+",-"+n+"H"+m+"Z"},noDot:!0},"arrow-left":{n:47,f:function(n){var m=q.round(2*n,2);n=q.round(n,2);return"M0,0L"+m+",-"+n+"V"+n+"Z"},noDot:!0},"arrow-right":{n:48,f:function(n){var m=q.round(2*n,2);n=q.round(n,2);return"M0,0L-"+
m+",-"+n+"V"+n+"Z"},noDot:!0},"arrow-bar-up":{n:49,f:function(n){var m=q.round(n,2);n=q.round(2*n,2);return"M-"+m+",0H"+m+"M0,0L-"+m+","+n+"H"+m+"Z"},needLine:!0,noDot:!0},"arrow-bar-down":{n:50,f:function(n){var m=q.round(n,2);n=q.round(2*n,2);return"M-"+m+",0H"+m+"M0,0L-"+m+",-"+n+"H"+m+"Z"},needLine:!0,noDot:!0},"arrow-bar-left":{n:51,f:function(n){var m=q.round(2*n,2);n=q.round(n,2);return"M0,-"+n+"V"+n+"M0,0L"+m+",-"+n+"V"+n+"Z"},needLine:!0,noDot:!0},"arrow-bar-right":{n:52,f:function(n){var m=
q.round(2*n,2);n=q.round(n,2);return"M0,-"+n+"V"+n+"M0,0L-"+m+",-"+n+"V"+n+"Z"},needLine:!0,noDot:!0}}},{d3:169}],639:[function(a,G,C){G.exports={visible:{valType:"boolean",editType:"calc"},type:{valType:"enumerated",values:["percent","constant","sqrt","data"],editType:"calc"},symmetric:{valType:"boolean",editType:"calc"},array:{valType:"data_array",editType:"calc"},arrayminus:{valType:"data_array",editType:"calc"},value:{valType:"number",min:0,dflt:10,editType:"calc"},valueminus:{valType:"number",
min:0,dflt:10,editType:"calc"},traceref:{valType:"integer",min:0,dflt:0,editType:"style"},tracerefminus:{valType:"integer",min:0,dflt:0,editType:"style"},copy_ystyle:{valType:"boolean",editType:"plot"},copy_zstyle:{valType:"boolean",editType:"style"},color:{valType:"color",editType:"style"},thickness:{valType:"number",min:0,dflt:2,editType:"style"},width:{valType:"number",min:0,editType:"plot"},editType:"calc",_deprecated:{opacity:{valType:"number",editType:"style"}}}},{}],640:[function(a,G,C){function q(e,
h,l,c){var g=h["error_"+c]||{},d=[];if(g.visible&&-1!==["linear","log"].indexOf(l.type)){g=k(g);for(var p=0;p<e.length;p++){var r=e[p],t=r.i;if(void 0===t)t=p;else if(null===t)continue;var w=r[c];if(n(l.c2l(w))){var x=g(w,t);n(x[0])&&n(x[1])&&(t=r[c+"s"]=w-x[0],r=r[c+"h"]=w+x[1],d.push(t,r))}}e=h._extremes[l._id];l=f.findExtremes(l,d,b.extendFlat({tozero:e.opts.tozero},{padded:!0}));e.min=e.min.concat(l.min);e.max=e.max.concat(l.max)}}var n=a("fast-isnumeric"),m=a("../../registry"),f=a("../../plots/cartesian/axes"),
b=a("../../lib"),k=a("./compute_error");G.exports=function(e){for(var h=e.calcdata,l=0;l<h.length;l++){var c=h[l],g=c[0].trace;if(!0===g.visible&&m.traceIs(g,"errorBarsOK")){var d=f.getFromId(e,g.xaxis),p=f.getFromId(e,g.yaxis);q(c,g,d,"x");q(c,g,p,"y")}}}},{"../../lib":750,"../../plots/cartesian/axes":799,"../../registry":882,"./compute_error":641,"fast-isnumeric":241}],641:[function(a,G,C){function q(n,m){if("percent"===n)return function(f){return Math.abs(f*m/100)};if("constant"===n)return function(){return Math.abs(m)};
if("sqrt"===n)return function(f){return Math.sqrt(Math.abs(f))}}G.exports=function(n){var m=n.type,f=n.symmetric;if("data"===m){var b=n.array||[];if(f)return function(l,c){l=+b[c];return[l,l]};var k=n.arrayminus||[];return function(l,c){l=+b[c];c=+k[c];return isNaN(l)&&isNaN(c)?[NaN,NaN]:[c||0,l||0]}}var e=q(m,n.value),h=q(m,n.valueminus);return f||void 0===n.valueminus?function(l){l=e(l);return[l,l]}:function(l){return[h(l),e(l)]}}},{}],642:[function(a,G,C){var q=a("fast-isnumeric"),n=a("../../registry"),
m=a("../../lib"),f=a("../../plot_api/plot_template"),b=a("./attributes");G.exports=function(k,e,h,l){function c(r,t){return m.coerce(p,d,b,r,t)}var g="error_"+l.axis,d=f.newContainer(e,g),p=k[g]||{};if(!1!==c("visible",void 0!==p.array||void 0!==p.value||"sqrt"===p.type)){k=c("type","array"in p?"data":"percent");g=!0;"sqrt"!==k&&(g=c("symmetric",!(("data"===k?"arrayminus":"valueminus")in p)));if("data"===k)c("array"),c("traceref"),g||(c("arrayminus"),c("tracerefminus"));else if("percent"===k||"constant"===
k)c("value"),g||c("valueminus");k="copy_"+l.inherit+"style";l.inherit&&(e["error_"+l.inherit]||{}).visible&&c(k,!(p.color||q(p.thickness)||q(p.width)));l.inherit&&d[k]||(c("color",h),c("thickness"),c("width",n.traceIs(e,"gl3d")?0:4))}}},{"../../lib":750,"../../plot_api/plot_template":788,"../../registry":882,"./attributes":639,"fast-isnumeric":241}],643:[function(a,G,C){var q=a("../../lib");C=a("../../plot_api/edit_types").overrideAll;var n=a("./attributes"),m={error_x:q.extendFlat({},n),error_y:q.extendFlat({},
n)};delete m.error_x.copy_zstyle;delete m.error_y.copy_zstyle;delete m.error_y.copy_ystyle;q={error_x:q.extendFlat({},n),error_y:q.extendFlat({},n),error_z:q.extendFlat({},n)};delete q.error_x.copy_ystyle;delete q.error_y.copy_ystyle;delete q.error_z.copy_ystyle;delete q.error_z.copy_zstyle;G.exports={moduleType:"component",name:"errorbars",schema:{traces:{scatter:m,bar:m,histogram:m,scatter3d:C(q,"calc","nested"),scattergl:C(m,"calc","nested")}},supplyDefaults:a("./defaults"),calc:a("./calc"),makeComputeError:a("./compute_error"),
plot:a("./plot"),style:a("./style"),hoverInfo:function(f,b,k){(b.error_y||{}).visible&&(k.yerr=f.yh-f.y,b.error_y.symmetric||(k.yerrneg=f.y-f.ys));(b.error_x||{}).visible&&(k.xerr=f.xh-f.x,b.error_x.symmetric||(k.xerrneg=f.x-f.xs))}}},{"../../lib":750,"../../plot_api/edit_types":781,"./attributes":639,"./calc":640,"./compute_error":641,"./defaults":642,"./plot":644,"./style":645}],644:[function(a,G,C){var q=a("d3"),n=a("fast-isnumeric"),m=a("../drawing"),f=a("../../traces/scatter/subtypes");G.exports=
function(b,k,e,h){var l,c=e.xaxis,g=e.yaxis,d=h&&0<h.duration;k.each(function(p){var r=p[0].trace,t=r.error_x||{},w=r.error_y||{},x;r.ids&&(x=function(A){return A.id});var y=f.hasMarkers(r)&&0<r.marker.maxdisplayed;w.visible||t.visible||(p=[]);r=q.select(this).selectAll("g.errorbar").data(p,x);r.exit().remove();p.length&&(t.visible||r.selectAll("path.xerror").remove(),w.visible||r.selectAll("path.yerror").remove(),r.style("opacity",1),p=r.enter().append("g").classed("errorbar",!0),d&&p.style("opacity",
0).transition().duration(h.duration).style("opacity",1),m.setClipUrl(r,e.layerClipId,b),r.each(function(A){var z=q.select(this),F=c.c2p(A.x),D=g.c2p(A.y);if(void 0!==A.yh){var u=g.c2p(A.yh);var B=g.c2p(A.ys);if(!n(B)){var I=!0;B=g.c2p(A.ys,!0)}}if(void 0!==A.xh){var J=c.c2p(A.xh);var N=c.c2p(A.xs);if(!n(N)){var M=!0;N=c.c2p(A.xs,!0)}}if(!y||A.vis){A=z.select("path.yerror");if(w.visible&&n(F)&&n(u)&&n(B)){var E=w.width;F="M"+(F-E)+","+u+"h"+2*E+"m-"+E+",0V"+B;I||(F+="m-"+E+",0h"+2*E);(l=!A.size())?
A=z.append("path").style("vector-effect","non-scaling-stroke").classed("yerror",!0):d&&(A=A.transition().duration(h.duration).ease(h.easing));A.attr("d",F)}else A.remove();I=z.select("path.xerror");t.visible&&n(D)&&n(J)&&n(N)?(u=(t.copy_ystyle?w:t).width,F="M"+J+","+(D-u)+"v"+2*u+"m0,-"+u+"H"+N,M||(F+="m0,-"+u+"v"+2*u),(l=!I.size())?I=z.append("path").style("vector-effect","non-scaling-stroke").classed("xerror",!0):d&&(I=I.transition().duration(h.duration).ease(h.easing)),I.attr("d",F)):I.remove()}}))})}},
{"../../traces/scatter/subtypes":1183,"../drawing":637,d3:169,"fast-isnumeric":241}],645:[function(a,G,C){var q=a("d3"),n=a("../color");G.exports=function(m){m.each(function(f){var b=f[0].trace;f=b.error_y||{};b=b.error_x||{};var k=q.select(this);k.selectAll("path.yerror").style("stroke-width",f.thickness+"px").call(n.stroke,f.color);b.copy_ystyle&&(b=f);k.selectAll("path.xerror").style("stroke-width",b.thickness+"px").call(n.stroke,b.color)})}},{"../color":615,d3:169}],646:[function(a,G,C){C=a("../../plots/font_attributes");
var q=a("./layout_attributes").hoverlabel;a=a("../../lib/extend").extendFlat;G.exports={hoverlabel:{bgcolor:a({},q.bgcolor,{arrayOk:!0}),bordercolor:a({},q.bordercolor,{arrayOk:!0}),font:C({arrayOk:!0,editType:"none"}),align:a({},q.align,{arrayOk:!0}),namelength:a({},q.namelength,{arrayOk:!0}),editType:"none"}}},{"../../lib/extend":740,"../../plots/font_attributes":827,"./layout_attributes":656}],647:[function(a,G,C){function q(f,b,k,e){e=e||n.identity;Array.isArray(f)&&(b[0][k]=e(f))}var n=a("../../lib"),
m=a("../../registry");G.exports=function(f){function b(g){return function(d){return n.coerceHoverinfo({hoverinfo:d},{_module:g._module},e)}}var k=f.calcdata,e=f._fullLayout;for(f=0;f<k.length;f++){var h=k[f],l=h[0].trace;if(!m.traceIs(l,"pie-like")){var c=m.traceIs(l,"2dMap")?q:n.fillArray;c(l.hoverinfo,h,"hi",b(l));l.hovertemplate&&c(l.hovertemplate,h,"ht");l.hoverlabel&&(c(l.hoverlabel.bgcolor,h,"hbg"),c(l.hoverlabel.bordercolor,h,"hbc"),c(l.hoverlabel.font.size,h,"hts"),c(l.hoverlabel.font.color,
h,"htc"),c(l.hoverlabel.font.family,h,"htf"),c(l.hoverlabel.namelength,h,"hnl"),c(l.hoverlabel.align,h,"hta"))}}}},{"../../lib":750,"../../registry":882}],648:[function(a,G,C){var q=a("../../registry"),n=a("./hover").hover;G.exports=function(m,f,b){function k(){m.emit("plotly_click",{points:m._hoverdata,event:f})}var e=q.getComponentMethod("annotations","onClick")(m,m._hoverdata);void 0!==b&&n(m,f,b,!0);m._hoverdata&&f&&f.target&&(e&&e.then?e.then(k):k(),f.stopImmediatePropagation&&f.stopImmediatePropagation())}},
{"../../registry":882,"./hover":652}],649:[function(a,G,C){G.exports={YANGLE:60,HOVERARROWSIZE:6,HOVERTEXTPAD:3,HOVERFONTSIZE:13,HOVERFONT:"Arial, sans-serif",HOVERMINTIME:50,HOVERID:"-hover"}},{}],650:[function(a,G,C){var q=a("../../lib"),n=a("./attributes"),m=a("./hoverlabel_defaults");G.exports=function(f,b,k,e){k=q.extendFlat({},e.hoverlabel);b.hovertemplate&&(k.namelength=-1);m(f,b,function(h,l){return q.coerce(f,b,n,h,l)},k)}},{"../../lib":750,"./attributes":646,"./hoverlabel_defaults":653}],
651:[function(a,G,C){function q(k,e){if(Array.isArray(e)){if(Array.isArray(k)&&Array.isArray(k[e[0]]))return k[e[0]][e[1]]}else return k[e]}var n=a("../../lib");C.getSubplot=function(k){return k.subplot||k.xaxis+k.yaxis||k.geo};C.isTraceInSubplots=function(k,e){if("splom"===k.type){var h=k.xaxes||[];k=k.yaxes||[];for(var l=0;l<h.length;l++)for(var c=0;c<k.length;c++)if(-1!==e.indexOf(h[l]+k[c]))return!0;return!1}return-1!==e.indexOf(C.getSubplot(k))};C.flat=function(k,e){for(var h=Array(k.length),
l=0;l<k.length;l++)h[l]=e;return h};C.p2c=function(k,e){for(var h=Array(k.length),l=0;l<k.length;l++)h[l]=k[l].p2c(e);return h};C.getDistanceFunction=function(k,e,h,l){return"closest"===k?l||C.quadrature(e,h):"x"===k.charAt(0)?e:h};C.getClosest=function(k,e,h){if(!1!==h.index)0<=h.index&&h.index<k.length?h.distance=0:h.index=!1;else for(var l=0;l<k.length;l++){var c=e(k[l]);c<=h.distance&&(h.index=l,h.distance=c)}return h};C.inbox=function(k,e,h){return 0>k*e||0===k?h:Infinity};C.quadrature=function(k,
e){return function(h){var l=k(h);h=e(h);return Math.sqrt(l*l+h*h)}};C.makeEventData=function(k,e,h){var l="index"in k?k.index:k.pointNumber,c={data:e._input,fullData:e,curveNumber:e.index,pointNumber:l};if(e._indexToPoints){var g=e._indexToPoints[l];1===g.length?c.pointIndex=g[0]:c.pointIndices=g}else c.pointIndex=l;e._module.eventData?c=e._module.eventData(c,k,e,h,l):("xVal"in k?c.x=k.xVal:"x"in k&&(c.x=k.x),"yVal"in k?c.y=k.yVal:"y"in k&&(c.y=k.y),k.xa&&(c.xaxis=k.xa),k.ya&&(c.yaxis=k.ya),void 0!==
k.zLabelVal&&(c.z=k.zLabelVal));C.appendArrayPointValue(c,e,l);return c};C.appendArrayPointValue=function(k,e,h){var l=e._arrayAttrs;if(l)for(var c=0;c<l.length;c++){var g=l[c],d=m[g]||g;void 0===k[d]&&(g=n.nestedProperty(e,g).get(),g=q(g,h),void 0!==g&&(k[d]=g))}};C.appendArrayMultiPointValues=function(k,e,h){var l=e._arrayAttrs;if(l)for(var c=0;c<l.length;c++){var g=l[c],d=m[g]||g;if(void 0===k[d]){g=n.nestedProperty(e,g).get();for(var p=Array(h.length),r=0;r<h.length;r++)p[r]=q(g,h[r]);k[d]=p}}};
var m={ids:"id",locations:"location",labels:"label",values:"value","marker.colors":"color",parents:"parent"},f={x:!0,y:!0},b={"x unified":!0,"y unified":!0};C.isUnifiedHover=function(k){return"string"!==typeof k?!1:!!b[k]};C.isXYhover=function(k){return"string"!==typeof k?!1:!!f[k]}},{"../../lib":750}],652:[function(a,G,C){function q(O,T,V,X){function ba(fb,nb){for(Ma=0;Ma<Ba.length;Ma++)if((Oa=Ba[Ma])&&Oa[0]&&Oa[0].trace&&(Ua=Oa[0].trace,!0===Ua.visible&&0!==Ua._length&&-1===["carpet","contourcarpet"].indexOf(Ua._module.name))){"splom"===
Ua.type?(Pa=0,Ia=ha[Pa]):(Ia=u.getSubplot(Ua),Pa=ha.indexOf(Ia));Fa=ua;u.isUnifiedHover(Fa)&&(Fa=Fa.charAt(0));cb={cd:Oa,trace:Ua,xa:ra[Pa],ya:qa[Pa],maxHoverDistance:ya,maxSpikeDistance:ja,index:!1,distance:Math.min(ab,ya),spikeDistance:Infinity,xSpike:void 0,ySpike:void 0,color:A.defaultLine,name:Ua.name,x0:void 0,x1:void 0,y0:void 0,y1:void 0,xLabelVal:void 0,yLabelVal:void 0,zLabelVal:void 0,text:void 0};ca[Ia]&&(cb.subplot=ca[Ia]._subplot);ca._splomScenes&&ca._splomScenes[Ua.uid]&&(cb.scene=
ca._splomScenes[Ua.uid]);mb=za.length;if("array"===Fa){var Ha=T[Ma];"pointNumber"in Ha?(cb.index=Ha.pointNumber,Fa="closest"):(Fa="","xval"in Ha&&(Na=Ha.xval,Fa="x"),"yval"in Ha&&($a=Ha.yval,Fa=Fa?"closest":"y"))}else void 0!==fb&&void 0!==nb?(Na=fb,$a=nb):(Na=Ea[Pa],$a=Ya[Pa]);if(0!==ya)if(Ua._module&&Ua._module.hoverPoints){if(Ha=Ua._module.hoverPoints(cb,Na,$a,Fa,ca._hoverlayer))for(var Ca,Qa=0;Qa<Ha.length;Qa++)Ca=Ha[Qa],d(Ca.x0)&&d(Ca.y0)&&za.push(e(Ca,ua))}else r.log("Unrecognized trace type in hover:",
Ua);"closest"===ua&&za.length>mb&&(za.splice(0,mb),ab=za[0].distance);ma&&0!==ja&&0===za.length&&(cb.distance=ja,cb.index=!1,(Ha=Ua._module.hoverPoints(cb,Na,$a,"closest",ca._hoverlayer))&&(Ha=Ha.filter(function(gb){return gb.spikeDistance<=ja})),Ha&&Ha.length)&&(Ca=Ha.filter(function(gb){return gb.xa.showspikes&&"hovered data"!==gb.xa.spikesnap}),Ca.length&&(Ca=Ca[0],d(Ca.x0)&&d(Ca.y0)&&(Ca=ka(Ca),!Ka.vLinePoint||Ka.vLinePoint.spikeDistance>Ca.spikeDistance))&&(Ka.vLinePoint=Ca),Ha=Ha.filter(function(gb){return gb.ya.showspikes&&
"hovered data"!==gb.ya.spikesnap}),Ha.length&&(Ha=Ha[0],d(Ha.x0)&&d(Ha.y0)&&(Ca=ka(Ha),!Ka.hLinePoint||Ka.hLinePoint.spikeDistance>Ca.spikeDistance))&&(Ka.hLinePoint=Ca))}}function aa(fb,nb){for(var Ha=null,Ca=Infinity,Qa,gb=0;gb<fb.length;gb++)Qa=fb[gb].spikeDistance,Qa<=Ca&&Qa<=nb&&(Ha=fb[gb],Ca=Qa);return Ha}function ka(fb){return fb?{xa:fb.xa,ya:fb.ya,x:void 0!==fb.xSpike?fb.xSpike:(fb.x0+fb.x1)/2,y:void 0!==fb.ySpike?fb.ySpike:(fb.y0+fb.y1)/2,distance:fb.distance,spikeDistance:fb.spikeDistance,
curveNumber:fb.trace.index,color:fb.color,pointNumber:fb.index}:null}V||(V="xy");var ha=Array.isArray(V)?V:[V],ca=O._fullLayout,sa=ca._plots||[];V=sa[V];var ma=ca._has("cartesian");V&&(V=V.overlays.map(function(fb){return fb.id}),ha=ha.concat(V));V=ha.length;for(var ra=Array(V),qa=Array(V),Y=!1,pa=0;pa<V;pa++){var oa=ha[pa];if(sa[oa])Y=!0,ra[pa]=sa[oa].xaxis,qa[pa]=sa[oa].yaxis;else if(ca[oa]&&ca[oa]._subplot)oa=ca[oa]._subplot,ra[pa]=oa.xaxis,qa[pa]=oa.yaxis;else{r.warn("Unrecognized subplot: "+
oa);return}}var ua=T.hovermode||ca.hovermode;ua&&!Y&&(ua="closest");if(-1===["x","y","closest","x unified","y unified"].indexOf(ua)||!O.calcdata||O.querySelector(".zoombox")||O._dragging)return z.unhoverRaw(O,T);var ya=-1===ca.hoverdistance?Infinity:ca.hoverdistance,ja=-1===ca.spikedistance?Infinity:ca.spikedistance,za=[],Ba=[],Ma,Oa,Ia,Pa,Fa,Na,$a,cb,mb,Ka={hLinePoint:null,vLinePoint:null};sa=!1;if(Array.isArray(T))for(ua="array",pa=0;pa<T.length;pa++){if(Oa=O.calcdata[T[pa].curveNumber||0]){var Ua=
Oa[0].trace;"skip"!==Oa[0].trace.hoverinfo&&(Ba.push(Oa),"h"===Ua.orientation&&(sa=!0))}}else{for(Ma=0;Ma<O.calcdata.length;Ma++)Oa=O.calcdata[Ma],Ua=Oa[0].trace,"skip"!==Ua.hoverinfo&&u.isTraceInSubplots(Ua,ha)&&(Ba.push(Oa),"h"===Ua.orientation&&(sa=!0));if(T.target){if(!1===t.triggerHandler(O,"plotly_beforehover",T))return;Y=T.target.getBoundingClientRect();V=T.clientX-Y.left;Y=T.clientY-Y.top;if(0>V||V>ra[0]._length||0>Y||Y>qa[0]._length)return z.unhoverRaw(O,T)}else V="xpx"in T?T.xpx:ra[0]._length/
2,Y="ypx"in T?T.ypx:qa[0]._length/2;T.pointerX=V+ra[0]._offset;T.pointerY=Y+qa[0]._offset;var Ea="xval"in T?u.flat(ha,T.xval):u.p2c(ra,V);var Ya="yval"in T?u.flat(ha,T.yval):u.p2c(qa,Y);if(!d(Ea[0])||!d(Ya[0]))return r.warn("Fx.hover failed",T,O),z.unhoverRaw(O,T)}var ab=Infinity;ba();V={fullLayout:ca,container:ca._hoverlayer,outerContainer:ca._paperdiv,event:T};O._spikepoints={vLinePoint:Ka.vLinePoint,hLinePoint:Ka.hLinePoint};ma&&0!==ja&&0!==za.length&&(Y=za.filter(function(fb){return fb.ya.showspikes}),
Y=aa(Y,ja),Ka.hLinePoint=ka(Y),Y=za.filter(function(fb){return fb.xa.showspikes}),Y=aa(Y,ja),Ka.vLinePoint=ka(Y));if(0===za.length)return X=z.unhoverRaw(O,T),!ma||null===Ka.hLinePoint&&null===Ka.vLinePoint||h(O,Ka,V),X;ma&&h(O,Ka,V);za.sort(function(fb,nb){return fb.distance-nb.distance});if(u.isXYhover(Fa)&&0!==za[0].length&&"splom"!==za[0].trace.type){V=za[0];Y=V.cd[V.index];pa="group"===ca.boxmode||"group"===ca.violinmode;oa=V.xVal;var Wa=V.xa;"category"===Wa.type&&(oa=Wa._categoriesMap[oa]);"date"===
Wa.type&&(oa=Wa.d2c(oa));Y&&Y.t&&Y.t.posLetter===Wa._id&&pa&&(oa+=Y.t.dPos);var Ja=V.yVal;Wa=V.ya;"category"===Wa.type&&(Ja=Wa._categoriesMap[Ja]);"date"===Wa.type&&(Ja=Wa.d2c(Ja));Y&&Y.t&&Y.t.posLetter===Wa._id&&pa&&(Ja+=Y.t.dPos);ba(oa,Ja);var Sa={};za=za.filter(function(fb){fb=n(fb);if(!Sa[fb])return Sa[fb]=!0,Sa[fb]})}V=O._hoverdata;Y=[];for(pa=0;pa<za.length;pa++)oa=za[pa],Wa=u.makeEventData(oa,oa.trace,oa.cd),!1!==oa.hovertemplate&&(Ja=!1,oa.cd[oa.index]&&oa.cd[oa.index].ht&&(Ja=oa.cd[oa.index].ht),
oa.hovertemplate=Ja||oa.trace.hovertemplate||!1),oa.eventData=[Wa],Y.push(Wa);O._hoverdata=Y;sa="y"===ua&&(1<Ba.length||1<za.length)||"closest"===ua&&sa&&1<za.length;pa=A.combine(ca.plot_bgcolor||A.background,ca.paper_bgcolor);pa=m(za,{hovermode:ua,rotateLabels:sa,bgColor:pa,container:ca._hoverlayer,outerContainer:ca._paperdiv,commonLabelOpts:ca.hoverlabel,hoverdistance:ca.hoverdistance},O);u.isUnifiedHover(ua)||(b(pa,sa?"xa":"ya",ca),k(pa,sa));T.target&&T.target.tagName&&(sa=D.getComponentMethod("annotations",
"hasClickToShow")(O,Y),x(g.select(T.target),sa?"pointer":""));T.target&&!X&&l(O,T,V)&&(V&&O.emit("plotly_unhover",{event:T,points:V}),O.emit("plotly_hover",{event:T,points:O._hoverdata,xaxes:ra,yaxes:qa,xvals:Ea,yvals:Ya}))}function n(O){return[O.trace.index,O.index,O.x0,O.y0,O.name,O.attr,O.xa,O.ya||""].join()}function m(O,T,V){function X(Na){return Na.filter(function($a){return void 0!==$a.zLabelVal||($a[ua]||"").split(" ")[0]===ja})}var ba=V._fullLayout,aa=T.hovermode,ka=T.rotateLabels,ha=T.bgColor,
ca=T.container,sa=T.outerContainer,ma=T.commonLabelOpts||{},ra=T.fontFamily||B.HOVERFONT,qa=T.fontSize||B.HOVERFONTSIZE,Y=O[0],pa=Y.xa,oa=Y.ya,ua="y"===aa.charAt(0)?"yLabel":"xLabel",ya=Y[ua],ja=(String(ya)||"").split(" ")[0];sa=sa.node().getBoundingClientRect();var za=sa.top,Ba=sa.width,Ma=sa.height,Oa=void 0!==ya&&Y.distance<=T.hoverdistance&&("x"===aa||"y"===aa);if(Oa){sa=!0;var Ia,Pa;for(Ia=0;Ia<O.length;Ia++)if(sa&&void 0===O[Ia].zLabel&&(sa=!1),Pa=O[Ia].hoverinfo||O[Ia].trace.hoverinfo)if(Pa=
Array.isArray(Pa)?Pa:Pa.split("+"),-1===Pa.indexOf("all")&&-1===Pa.indexOf(aa)){Oa=!1;break}sa&&(Oa=!1)}sa=ca.selectAll("g.axistext").data(Oa?[0]:[]);sa.enter().append("g").classed("axistext",!0);sa.exit().remove();sa.each(function(){var Na=g.select(this),$a=r.ensureSingle(Na,"path","",function(fb){fb.style({"stroke-width":"1px"})}),cb=r.ensureSingle(Na,"text","",function(fb){fb.attr("data-notex",1)}),mb=ma.bgcolor||A.defaultLine,Ka=ma.bordercolor||A.contrast(mb),Ua=A.contrast(mb),Ea={family:ma.font.family||
ra,size:ma.font.size||qa,color:ma.font.color||Ua};$a.style({fill:mb,stroke:Ka});cb.text(ya).call(y.font,Ea).call(w.positionText,0,0).call(w.convertToTspans,V);Na.attr("transform","");var Ya=cb.node().getBoundingClientRect();if("x"===aa)Ua="top"===pa.side?"-":"",cb.attr("text-anchor","middle").call(w.positionText,0,"top"===pa.side?za-Ya.bottom-Q-S:za-Ya.top+Q+S),mb=pa._offset+(Y.x0+Y.x1)/2,Ka=oa._offset+("top"===pa.side?0:oa._length),cb=Ya.width/2+S,mb<cb?(mb=cb,$a.attr("d","M-"+(cb-Q)+",0L-"+(cb-
2*Q)+","+Ua+Q+"H"+(S+Ya.width/2)+"v"+Ua+(2*S+Ya.height)+"H-"+cb+"V"+Ua+Q+"Z")):mb>ba.width-cb?(mb=ba.width-cb,$a.attr("d","M"+(cb-Q)+",0L"+cb+","+Ua+Q+"v"+Ua+(2*S+Ya.height)+"H-"+cb+"V"+Ua+Q+"H"+(cb-2*Q)+"Z")):$a.attr("d","M0,0L"+Q+","+Ua+Q+"H"+(S+Ya.width/2)+"v"+Ua+(2*S+Ya.height)+"H-"+(S+Ya.width/2)+"V"+Ua+Q+"H-"+Q+"Z");else{if("right"===oa.side){Ua="start";var ab=1;var Wa="";mb=pa._offset+pa._length}else Ua="end",ab=-1,Wa="-",mb=pa._offset;Ka=oa._offset+(Y.y0+Y.y1)/2;cb.attr("text-anchor",Ua);
$a.attr("d","M0,0L"+Wa+Q+","+Q+"V"+(S+Ya.height/2)+"h"+Wa+(2*S+Ya.width)+"V-"+(S+Ya.height/2)+"H"+Wa+Q+"V-"+Q+"Z");var Ja=Ya.height/2;Wa=za-Ya.top-Ja;$a="clip"+ba._uid+"commonlabel"+oa._id;if(mb<Ya.width+2*S+Q){ab="M-"+(Q+S)+"-"+Ja+"h-"+(Ya.width-S)+"V"+Ja+"h"+(Ya.width-S)+"Z";var Sa=Ya.width-mb+S;w.positionText(cb,Sa,Wa);"end"===Ua&&cb.selectAll("tspan").each(function(){var fb=g.select(this),nb=y.tester.append("text").text(fb.text()).call(y.font,Ea),Ha=nb.node().getBoundingClientRect();Math.round(Ha.width)<
Math.round(Ya.width)&&fb.attr("x",Sa-Ha.width);nb.remove()})}else w.positionText(cb,ab*(S+Q),Wa),ab=null;Ua=ba._topclips.selectAll("#"+$a).data(ab?[0]:[]);Ua.enter().append("clipPath").attr("id",$a).append("path");Ua.exit().remove();Ua.select("path").attr("d",ab);y.setClipUrl(cb,ab?$a:null,V)}Na.attr("transform","translate("+mb+","+Ka+")");O=X(O)});if(u.isUnifiedHover(aa)){ca.selectAll("g.hovertext").remove();void 0!==ya&&Y.distance<=T.hoverdistance&&(O=X(O));if(0===O.length)return;T={};I({showlegend:!0,
legend:{title:{text:ya,font:ba.hoverlabel.font},font:ba.hoverlabel.font,bgcolor:ba.hoverlabel.bgcolor,bordercolor:ba.hoverlabel.bordercolor,borderwidth:1,tracegroupgap:7,traceorder:ba.legend?ba.legend.traceorder:void 0,orientation:"v"}},T,V._fullData);T=T.legend;T.entries=[];for(sa=0;sa<O.length;sa++){Pa=f(O[sa],!0,aa,ba,ya);Ia=Pa[0];var Fa=Pa[1];Pa=O[sa];Pa.name=Fa;Pa.text=""!==Fa?Fa+" : "+Ia:Ia;if(Ia=Pa.cd[Pa.index])Ia.mc&&(Pa.mc=Ia.mc),Ia.mcc&&(Pa.mc=Ia.mcc),Ia.mlc&&(Pa.mlc=Ia.mlc),Ia.mlcc&&(Pa.mlc=
Ia.mlcc),Ia.mlw&&(Pa.mlw=Ia.mlw),Ia.mrc&&(Pa.mrc=Ia.mrc),Ia.dir&&(Pa.dir=Ia.dir);Pa._distinct=!0;T.entries.push([Pa])}T.entries.sort(function(Na,$a){return Na[0].trace.index-$a[0].trace.index});T.layer=ca;J(V,T);T=r.mean(O.map(function(Na){return(Na.y0+Na.y1)/2}));sa=r.mean(O.map(function(Na){return(Na.x0+Na.x1)/2}));ca=ca.select("g.legend");Ia=ca.node().getBoundingClientRect();sa+=pa._offset;T+=oa._offset-Ia.height/2;Pa=Ia.width+2*S;sa=!(sa+Pa<=Ba)&&0<=sa-Pa?sa-Pa:sa+2*S;Ia=Ia.height+2*S;Pa=T+Ia>=
Ma;Ia<=Ma&&(T<=za?T=oa._offset+2*S:Pa&&(T=Ma-Ia));ca.attr("transform","translate("+sa+","+T+")");return ca}ca=ca.selectAll("g.hovertext").data(O,function(Na){return n(Na)});ca.enter().append("g").classed("hovertext",!0).each(function(){var Na=g.select(this);Na.append("rect").call(A.fill,A.addOpacity(ha,.8));Na.append("text").classed("name",!0);Na.append("path").style("stroke-width","1px");Na.append("text").classed("nums",!0).call(y.font,ra,qa)});ca.exit().remove();ca.each(function(Na){var $a=g.select(this).attr("transform",
""),cb=Na.color;Array.isArray(cb)&&(cb=cb[Na.eventData[0].pointNumber]);var mb=Na.bgcolor||cb,Ka=A.combine(A.opacity(mb)?mb:A.defaultLine,ha),Ua=A.combine(A.opacity(cb)?cb:A.defaultLine,ha),Ea=Na.borderColor||A.contrast(Ka);cb=f(Na,Oa,aa,ba,ya,$a);var Ya=cb[0],ab=cb[1];cb=$a.select("text.nums").call(y.font,Na.fontFamily||ra,Na.fontSize||qa,Na.fontColor||Ea).text(Ya).attr("data-notex",1).call(w.positionText,0,0).call(w.convertToTspans,V);mb=$a.select("text.name");var Wa=0,Ja=0;ab&&ab!==Ya?(mb.call(y.font,
Na.fontFamily||ra,Na.fontSize||qa,Ua).text(ab).attr("data-notex",1).call(w.positionText,0,0).call(w.convertToTspans,V),Ja=mb.node().getBoundingClientRect(),Wa=Ja.width+2*S,Ja=Ja.height+2*S):(mb.remove(),$a.select("rect").remove());$a.select("path").style({fill:Ka,stroke:Ea});var Sa=cb.node().getBoundingClientRect();Ka=Na.xa._offset+(Na.x0+Na.x1)/2;Ea=Na.ya._offset+(Na.y0+Na.y1)/2;Ua=Math.abs(Na.x1-Na.x0);Ya=Math.abs(Na.y1-Na.y0);ab=Sa.width+Q+S+Wa;Na.ty0=za-Sa.top;Na.bx=Sa.width+2*S;Na.by=Math.max(Sa.height+
2*S,Ja);Na.anchor="start";Na.txwidth=Sa.width;Na.tx2width=Wa;Na.offset=0;ka?(Na.pos=Ka,Ja=Ea+Ya/2+ab<=Ma,("top"===Na.idealAlign||!Ja)&&0<=Ea-Ya/2-ab?(Ea-=Ya/2,Na.anchor="end"):Ja?(Ea+=Ya/2,Na.anchor="start"):Na.anchor="middle"):(Na.pos=Ea,Ja=Ka+Ua/2+ab<=Ba,("left"===Na.idealAlign||!Ja)&&0<=Ka-Ua/2-ab?(Ka-=Ua/2,Na.anchor="end"):Ja?(Ka+=Ua/2,Na.anchor="start"):(Na.anchor="middle",Ua=ab/2,Ja=Ka+Ua-Ba,Ua=Ka-Ua,0<Ja&&(Ka-=Ja),0>Ua&&(Ka+=-Ua)));cb.attr("text-anchor",Na.anchor);Wa&&mb.attr("text-anchor",
Na.anchor);$a.attr("transform","translate("+Ka+","+Ea+")"+(ka?"rotate("+N+")":""))});return ca}function f(O,T,V,X,ba,aa){var ka="",ha="";void 0!==O.nameOverride&&(O.name=O.nameOverride);O.name&&(O.trace._meta&&(O.name=r.templateString(O.name,O.trace._meta)),ka=c(O.name,O.nameLength));void 0!==O.zLabel?(void 0!==O.xLabel&&(ha+="x: "+O.xLabel+"\x3cbr\x3e"),void 0!==O.yLabel&&(ha+="y: "+O.yLabel+"\x3cbr\x3e"),"choropleth"!==O.trace.type&&"choroplethmapbox"!==O.trace.type&&(ha+=(ha?"z: ":"")+O.zLabel)):
T&&O[V.charAt(0)+"Label"]===ba?ha=O[("x"===V.charAt(0)?"y":"x")+"Label"]||"":void 0===O.xLabel?void 0!==O.yLabel&&"scattercarpet"!==O.trace.type&&(ha=O.yLabel):ha=void 0===O.yLabel?O.xLabel:"("+O.xLabel+", "+O.yLabel+")";!O.text&&0!==O.text||Array.isArray(O.text)||(ha+=(ha?"\x3cbr\x3e":"")+O.text);void 0!==O.extraText&&(ha+=(ha?"\x3cbr\x3e":"")+O.extraText);aa&&""===ha&&!O.hovertemplate&&(""===ka&&aa.remove(),ha=ka);T=X._d3locale;V=O.hovertemplate||!1;X=O.hovertemplateLabels||O;ba=O.eventData[0]||
{};V&&(ha=r.hovertemplateString(V,X,T,ba,O.trace._meta),ha=ha.replace(R,function(ca,sa){ka=c(sa,O.nameLength);return""}));return[ha,ka]}function b(O,T,V){function X(ja){var za=ja[0],Ba=ja[ja.length-1];ma=za.pmin-za.pos-za.dp+za.size;ra=Ba.pos+Ba.dp+Ba.size-za.pmax;if(.01<ma){for(Y=ja.length-1;0<=Y;Y--)ja[Y].dp+=ma;sa=!1}if(!(.01>ra)){if(-.01>ma){for(Y=ja.length-1;0<=Y;Y--)ja[Y].dp-=ra;sa=!1}if(sa){for(qa=Ba=0;qa<ja.length;qa++)pa=ja[qa],pa.pos+pa.dp+pa.size>za.pmax&&Ba++;for(qa=ja.length-1;0<=qa&&
!(0>=Ba);qa--)pa=ja[qa],pa.pos>za.pmax-1&&(pa.del=!0,Ba--);for(qa=0;qa<ja.length&&!(0>=Ba);qa++)if(pa=ja[qa],pa.pos<za.pmin+1)for(pa.del=!0,Ba--,ra=2*pa.size,Y=ja.length-1;0<=Y;Y--)ja[Y].dp-=ra;for(qa=ja.length-1;0<=qa&&!(0>=Ba);qa--)pa=ja[qa],pa.pos+pa.dp+pa.size>za.pmax&&(pa.del=!0,Ba--)}}}var ba=0,aa=1,ka=O.size(),ha=Array(ka),ca=0;O.each(function(ja){var za=ja[T],Ba="x"===za._id.charAt(0);za=za.range;0===ca&&za&&za[0]>za[1]!==Ba&&(aa=-1);ha[ca++]=[{datum:ja,traceIndex:ja.trace.index,dp:0,pos:ja.pos,
posref:ja.posref,size:ja.by*(Ba?M:1)/2,pmin:0,pmax:Ba?V.width:V.height}]});ha.sort(function(ja,za){return ja[0].posref-za[0].posref||aa*(za[0].traceIndex-ja[0].traceIndex)});for(var sa,ma,ra,qa,Y,pa,oa;!sa&&ba<=ka;){ba++;sa=!0;for(qa=0;qa<ha.length-1;){O=ha[qa];oa=ha[qa+1];var ua=O[O.length-1],ya=oa[0];ma=ua.pos+ua.dp+ua.size-ya.pos-ya.dp+ya.size;if(.01<ma&&ua.pmin===ya.pmin&&ua.pmax===ya.pmax){for(Y=oa.length-1;0<=Y;Y--)oa[Y].dp+=ma;O.push.apply(O,oa);ha.splice(qa+1,1);oa=0;for(Y=O.length-1;0<=Y;Y--)oa+=
O[Y].dp;ra=oa/O.length;for(Y=O.length-1;0<=Y;Y--)O[Y].dp-=ra;sa=!1}else qa++}ha.forEach(X)}for(qa=ha.length-1;0<=qa;qa--)for(ba=ha[qa],Y=ba.length-1;0<=Y;Y--)ka=ba[Y],O=ka.datum,O.offset=ka.dp,O.del=ka.del}function k(O,T){O.each(function(V){var X=g.select(this);if(V.del)return X.remove();var ba=X.select("text.nums"),aa=V.anchor,ka="end"===aa?-1:1,ha={start:1,end:-1,middle:0}[aa],ca=ha*(Q+S),sa=ca+ha*(V.txwidth+S),ma=0,ra=V.offset;"middle"===aa&&(ca-=V.tx2width/2,sa+=V.txwidth/2+S);T&&(ra*=-L,ma=V.offset*
E);X.select("path").attr("d","middle"===aa?"M-"+(V.bx/2+V.tx2width/2)+","+(ra-V.by/2)+"h"+V.bx+"v"+V.by+"h-"+V.bx+"Z":"M0,0L"+(ka*Q+ma)+","+(Q+ra)+"v"+(V.by/2-Q)+"h"+ka*V.bx+"v-"+V.by+"H"+(ka*Q+ma)+"V"+(ra-Q)+"Z");ka=ca+ma;ca=ra+V.ty0-V.by/2+S;var qa=V.textAlign||"auto";"auto"!==qa&&("left"===qa&&"start"!==aa?(ba.attr("text-anchor","start"),ka="middle"===aa?-V.bx/2-V.tx2width/2+S:-V.bx-S):"right"===qa&&"end"!==aa&&(ba.attr("text-anchor","end"),ka="middle"===aa?V.bx/2-V.tx2width/2-S:V.bx+S));ba.call(w.positionText,
ka,ca);V.tx2width&&(X.select("text.name").call(w.positionText,sa+ha*S+ma,ra+V.ty0-V.by/2+S),X.select("rect").call(y.setRect,sa+(ha-1)*V.tx2width/2+ma,ra-V.by/2-1,V.tx2width,V.by+2))})}function e(O,T){function V(ma){return ma||d(ma)&&0===ma}function X(ma,ra,qa){ra=ca(ra,qa);V(ra)&&(O[ma]=ra)}var ba=O.index,aa=O.trace||{},ka=O.cd[0],ha=O.cd[ba]||{},ca=Array.isArray(ba)?function(ma,ra){ma=r.castOption(ka,ba,ma);return V(ma)?ma:r.extractOption({},aa,"",ra)}:function(ma,ra){return r.extractOption(ha,aa,
ma,ra)};X("hoverinfo","hi","hoverinfo");X("bgcolor","hbg","hoverlabel.bgcolor");X("borderColor","hbc","hoverlabel.bordercolor");X("fontFamily","htf","hoverlabel.font.family");X("fontSize","hts","hoverlabel.font.size");X("fontColor","htc","hoverlabel.font.color");X("nameLength","hnl","hoverlabel.namelength");X("textAlign","hta","hoverlabel.align");O.posref="y"===T||"closest"===T&&"h"===aa.orientation?O.xa._offset+(O.x0+O.x1)/2:O.ya._offset+(O.y0+O.y1)/2;O.x0=r.constrain(O.x0,0,O.xa._length);O.x1=r.constrain(O.x1,
0,O.xa._length);O.y0=r.constrain(O.y0,0,O.ya._length);O.y1=r.constrain(O.y1,0,O.ya._length);void 0!==O.xLabelVal&&(O.xLabel="xLabel"in O?O.xLabel:F.hoverLabelText(O.xa,O.xLabelVal),O.xVal=O.xa.c2d(O.xLabelVal));void 0!==O.yLabelVal&&(O.yLabel="yLabel"in O?O.yLabel:F.hoverLabelText(O.ya,O.yLabelVal),O.yVal=O.ya.c2d(O.yLabelVal));void 0!==O.zLabelVal&&void 0===O.zLabel&&(O.zLabel=String(O.zLabelVal));if(!(isNaN(O.xerr)||"log"===O.xa.type&&0>=O.xerr)){var sa=F.tickText(O.xa,O.xa.c2l(O.xerr),"hover").text;
O.xLabel=void 0!==O.xerrneg?O.xLabel+(" +"+sa+" / -"+F.tickText(O.xa,O.xa.c2l(O.xerrneg),"hover").text):O.xLabel+(" ± "+sa);"x"===T&&(O.distance+=1)}isNaN(O.yerr)||"log"===O.ya.type&&0>=O.yerr||(sa=F.tickText(O.ya,O.ya.c2l(O.yerr),"hover").text,O.yLabel=void 0!==O.yerrneg?O.yLabel+(" +"+sa+" / -"+F.tickText(O.ya,O.ya.c2l(O.yerrneg),"hover").text):O.yLabel+(" ± "+sa),"y"===T&&(O.distance+=1));(T=O.hoverinfo||O.trace.hoverinfo)&&"all"!==T&&(T=Array.isArray(T)?T:T.split("+"),-1===T.indexOf("x")&&(O.xLabel=
void 0),-1===T.indexOf("y")&&(O.yLabel=void 0),-1===T.indexOf("z")&&(O.zLabel=void 0),-1===T.indexOf("text")&&(O.text=void 0),-1===T.indexOf("name")&&(O.name=void 0));return O}function h(O,T,V){var X=V.container,ba=V.fullLayout,aa=ba._size;V=V.event;var ka=!!T.hLinePoint,ha=!!T.vLinePoint;X.selectAll(".spikeline").remove();if(ha||ka){ba=A.combine(ba.plot_bgcolor,ba.paper_bgcolor);if(ka){var ca=T.hLinePoint;var sa=ca&&ca.xa;ka=ca&&ca.ya;if("cursor"===ka.spikesnap){var ma=V.pointerX;sa=V.pointerY}else ma=
sa._offset+ca.x,sa=ka._offset+ca.y;var ra=1.5>p.readability(ca.color,ba)?A.contrast(ba):ca.color;ca=ka.spikemode;var qa=ka.spikethickness;ra=ka.spikecolor||ra;var Y=F.getPxPosition(O,ka);if(-1!==ca.indexOf("toaxis")||-1!==ca.indexOf("across")){if(-1!==ca.indexOf("toaxis")){var pa=Y;var oa=ma}-1!==ca.indexOf("across")&&(pa=ka._counterDomainMin,oa=ka._counterDomainMax,"free"===ka.anchor&&(pa=Math.min(pa,ka.position),oa=Math.max(oa,ka.position)),pa=aa.l+pa*aa.w,oa=aa.l+oa*aa.w);X.insert("line",":first-child").attr({x1:pa,
x2:oa,y1:sa,y2:sa,"stroke-width":qa,stroke:ra,"stroke-dasharray":y.dashStyle(ka.spikedash,qa)}).classed("spikeline",!0).classed("crisp",!0);X.insert("line",":first-child").attr({x1:pa,x2:oa,y1:sa,y2:sa,"stroke-width":qa+2,stroke:ba}).classed("spikeline",!0).classed("crisp",!0)}-1!==ca.indexOf("marker")&&X.insert("circle",":first-child").attr({cx:Y+("right"!==ka.side?qa:-qa),cy:sa,r:qa,fill:ra}).classed("spikeline",!0)}if(ha){sa=(ha=T.vLinePoint)&&ha.xa;ka=ha&&ha.ya;"cursor"===sa.spikesnap?(T=V.pointerX,
ka=V.pointerY):(T=sa._offset+ha.x,ka=ka._offset+ha.y);pa=1.5>p.readability(ha.color,ba)?A.contrast(ba):ha.color;V=sa.spikemode;ha=sa.spikethickness;pa=sa.spikecolor||pa;O=F.getPxPosition(O,sa);if(-1!==V.indexOf("toaxis")||-1!==V.indexOf("across")){if(-1!==V.indexOf("toaxis")){var ua=O;var ya=ka}-1!==V.indexOf("across")&&(ya=sa._counterDomainMin,ua=sa._counterDomainMax,"free"===sa.anchor&&(ya=Math.min(ya,sa.position),ua=Math.max(ua,sa.position)),ua=aa.t+(1-ua)*aa.h,ya=aa.t+(1-ya)*aa.h);X.insert("line",
":first-child").attr({x1:T,x2:T,y1:ua,y2:ya,"stroke-width":ha,stroke:pa,"stroke-dasharray":y.dashStyle(sa.spikedash,ha)}).classed("spikeline",!0).classed("crisp",!0);X.insert("line",":first-child").attr({x1:T,x2:T,y1:ua,y2:ya,"stroke-width":ha+2,stroke:ba}).classed("spikeline",!0).classed("crisp",!0)}-1!==V.indexOf("marker")&&X.insert("circle",":first-child").attr({cx:T,cy:O-("top"!==sa.side?ha:-ha),r:ha,fill:pa}).classed("spikeline",!0)}}}function l(O,T,V){if(!V||V.length!==O._hoverdata.length)return!0;
for(T=V.length-1;0<=T;T--){var X=V[T],ba=O._hoverdata[T];if(X.curveNumber!==ba.curveNumber||String(X.pointNumber)!==String(ba.pointNumber)||String(X.pointNumbers)!==String(ba.pointNumbers))return!0}return!1}function c(O,T){return w.plainText(O||"",{len:T,allowedTags:"br sub sup b i em".split(" ")})}var g=a("d3"),d=a("fast-isnumeric"),p=a("tinycolor2"),r=a("../../lib"),t=a("../../lib/events"),w=a("../../lib/svg_text_utils"),x=a("../../lib/override_cursor"),y=a("../drawing"),A=a("../color"),z=a("../dragelement"),
F=a("../../plots/cartesian/axes"),D=a("../../registry"),u=a("./helpers"),B=a("./constants"),I=a("../legend/defaults"),J=a("../legend/draw"),N=B.YANGLE;a=Math.PI*N/180;var M=1/Math.sin(a),E=Math.cos(a),L=Math.sin(a),Q=B.HOVERARROWSIZE,S=B.HOVERTEXTPAD;C.hover=function(O,T,V,X){O=r.getGraphDiv(O);r.throttle(O._fullLayout._uid+B.HOVERID,B.HOVERMINTIME,function(){q(O,T,V,X)})};C.loneHover=function(O,T){var V=!0;Array.isArray(O)||(V=!1,O=[O]);O=O.map(function(ha){return{color:ha.color||A.defaultLine,x0:ha.x0||
ha.x||0,x1:ha.x1||ha.x||0,y0:ha.y0||ha.y||0,y1:ha.y1||ha.y||0,xLabel:ha.xLabel,yLabel:ha.yLabel,zLabel:ha.zLabel,text:ha.text,name:ha.name,idealAlign:ha.idealAlign,borderColor:ha.borderColor,fontFamily:ha.fontFamily,fontSize:ha.fontSize,fontColor:ha.fontColor,nameLength:ha.nameLength,textAlign:ha.textAlign,trace:ha.trace||{index:0,hoverinfo:""},xa:{_offset:0},ya:{_offset:0},index:0,hovertemplate:ha.hovertemplate||!1,eventData:ha.eventData||!1,hovertemplateLabels:ha.hovertemplateLabels||!1}});var X=
g.select(T.container),ba=T.outerContainer?g.select(T.outerContainer):X;X={hovermode:"closest",rotateLabels:!1,bgColor:T.bgColor||A.background,container:X,outerContainer:ba};O=m(O,X,T.gd);var aa=0,ka=0;O.sort(function(ha,ca){return ha.y0-ca.y0}).each(function(ha,ca){var sa=ha.y0-ha.by/2;ha.offset=sa-5<aa?aa-sa+5:0;aa=sa+ha.by+ha.offset;ca===T.anchorIndex&&(ka=ha.offset)}).each(function(ha){ha.offset-=ka});k(O,X.rotateLabels);return V?O:O.node()};var R=/<extra>([\s\S]*)<\/extra>/},{"../../lib":750,
"../../lib/events":739,"../../lib/override_cursor":761,"../../lib/svg_text_utils":774,"../../plots/cartesian/axes":799,"../../registry":882,"../color":615,"../dragelement":634,"../drawing":637,"../legend/defaults":667,"../legend/draw":668,"./constants":649,"./helpers":651,d3:169,"fast-isnumeric":241,tinycolor2:548}],653:[function(a,G,C){var q=a("../../lib"),n=a("../color"),m=a("./helpers").isUnifiedHover;G.exports=function(f,b,k,e){function h(l){e.font[l]||(e.font[l]=b.legend?b.legend.font[l]:b.font[l])}
e=e||{};b&&m(b.hovermode)&&(e.font||(e.font={}),h("size"),h("family"),h("color"),b.legend?(e.bgcolor||(e.bgcolor=n.combine(b.legend.bgcolor,b.paper_bgcolor)),e.bordercolor||(e.bordercolor=b.legend.bordercolor)):e.bgcolor||(e.bgcolor=b.paper_bgcolor));k("hoverlabel.bgcolor",e.bgcolor);k("hoverlabel.bordercolor",e.bordercolor);k("hoverlabel.namelength",e.namelength);q.coerceFont(k,"hoverlabel.font",e.font);k("hoverlabel.align",e.align)}},{"../../lib":750,"../color":615,"./helpers":651}],654:[function(a,
G,C){function q(f,b){b=b._scatterStackOpts||{};for(var k=0;k<f.length;k++){var e=f[k],h=(b[e.xaxis+e.yaxis]||{})[e.stackgroup]||{};if("h"!==e.orientation&&"h"!==h.orientation)return!1}return!0}var n=a("../../lib"),m=a("./layout_attributes");G.exports=function(f,b,k){function e(l,c){return void 0!==b[l]?b[l]:n.coerce(f,b,m,l,c)}var h=e("clickmode");b._has("cartesian")?-1<h.indexOf("select")?k="closest":(b._isHoriz=q(k,b),k=b._isHoriz?"y":"x"):k="closest";return e("hovermode",k)}},{"../../lib":750,
"./layout_attributes":656}],655:[function(a,G,C){var q=a("d3"),n=a("../../lib");C=a("../dragelement");var m=a("./helpers"),f=a("./layout_attributes"),b=a("./hover");G.exports={moduleType:"component",name:"fx",constants:a("./constants"),schema:{layout:f},attributes:a("./attributes"),layoutAttributes:f,supplyLayoutGlobalDefaults:a("./layout_global_defaults"),supplyDefaults:a("./defaults"),supplyLayoutDefaults:a("./layout_defaults"),calc:a("./calc"),getDistanceFunction:m.getDistanceFunction,getClosest:m.getClosest,
inbox:m.inbox,quadrature:m.quadrature,appendArrayPointValue:m.appendArrayPointValue,castHoverOption:function(k,e,h){return n.castOption(k,e,"hoverlabel."+h)},castHoverinfo:function(k,e,h){return n.castOption(k,h,"hoverinfo",function(l){return n.coerceHoverinfo({hoverinfo:l},{_module:k._module},e)})},hover:b.hover,unhover:C.unhover,loneHover:b.loneHover,loneUnhover:function(k){k=n.isD3Selection(k)?k:q.select(k);k.selectAll("g.hovertext").remove();k.selectAll(".spikeline").remove()},click:a("./click")}},
{"../../lib":750,"../dragelement":634,"./attributes":646,"./calc":647,"./click":648,"./constants":649,"./defaults":650,"./helpers":651,"./hover":652,"./layout_attributes":656,"./layout_defaults":657,"./layout_global_defaults":658,d3:169}],656:[function(a,G,C){C=a("./constants");a=a("../../plots/font_attributes")({editType:"none"});a.family.dflt=C.HOVERFONT;a.size.dflt=C.HOVERFONTSIZE;G.exports={clickmode:{valType:"flaglist",flags:["event","select"],dflt:"event",editType:"plot",extras:["none"]},dragmode:{valType:"enumerated",
values:["zoom","pan","select","lasso","drawclosedpath","drawopenpath","drawline","drawrect","drawcircle","orbit","turntable",!1],dflt:"zoom",editType:"modebar"},hovermode:{valType:"enumerated",values:["x","y","closest",!1,"x unified","y unified"],editType:"modebar"},hoverdistance:{valType:"integer",min:-1,dflt:20,editType:"none"},spikedistance:{valType:"integer",min:-1,dflt:20,editType:"none"},hoverlabel:{bgcolor:{valType:"color",editType:"none"},bordercolor:{valType:"color",editType:"none"},font:a,
align:{valType:"enumerated",values:["left","right","auto"],dflt:"auto",editType:"none"},namelength:{valType:"integer",min:-1,dflt:15,editType:"none"},editType:"none"},selectdirection:{valType:"enumerated",values:["h","v","d","any"],dflt:"any",editType:"none"}}},{"../../plots/font_attributes":827,"./constants":649}],657:[function(a,G,C){var q=a("../../lib"),n=a("./helpers").isUnifiedHover,m=a("./layout_attributes"),f=a("./hovermode_defaults"),b=a("./hoverlabel_defaults");G.exports=function(k,e,h){function l(d,
p){return q.coerce(k,e,m,d,p)}if(h=f(k,e,h))l("hoverdistance"),l("spikedistance",n(h)?-1:void 0);"select"===l("dragmode")&&l("selectdirection");h=e._has("mapbox");var c=e._has("geo"),g=e._basePlotModules.length;"zoom"===e.dragmode&&((h||c)&&1===g||h&&c&&2===g)&&(e.dragmode="pan");b(k,e,l)}},{"../../lib":750,"./helpers":651,"./hoverlabel_defaults":653,"./hovermode_defaults":654,"./layout_attributes":656}],658:[function(a,G,C){var q=a("../../lib"),n=a("./hoverlabel_defaults"),m=a("./layout_attributes");
G.exports=function(f,b){n(f,b,function(k,e){return q.coerce(f,b,m,k,e)})}},{"../../lib":750,"./hoverlabel_defaults":653,"./layout_attributes":656}],659:[function(a,G,C){function q(l,c,g){c=c[g+"axes"];l=Object.keys((l._splomAxes||{})[g]||{});if(Array.isArray(c))return c;if(l.length)return l}function n(l,c,g,d,p,r){g=c(l+"gap",g);var t=c("domain."+l);c(l+"side",d);l=Array(p);c=t[0];t=(t[1]-c)/(p-g);g=t*(1-g);for(d=0;d<p;d++){var w=c+t*d;l[r?p-1-d:d]=[w,w+g]}return l}function m(l,c,g,d,p){function r(x,
y){-1!==c.indexOf(y)&&void 0===d[y]?(t[x]=y,d[y]=x):t[x]=""}var t=Array(g),w;if(Array.isArray(l))for(w=0;w<g;w++)r(w,l[w]);else for(r(0,p),w=1;w<g;w++)r(w,p+(w+1));return t}var f=a("../../lib");C=a("../../lib/regex").counter;var b=a("../../plots/domain").attributes,k=a("../../plots/cartesian/constants").idRegex,e=a("../../plot_api/plot_template"),h={rows:{valType:"integer",min:1,editType:"plot"},roworder:{valType:"enumerated",values:["top to bottom","bottom to top"],dflt:"top to bottom",editType:"plot"},
columns:{valType:"integer",min:1,editType:"plot"},subplots:{valType:"info_array",freeLength:!0,dimensions:2,items:{valType:"enumerated",values:[C("xy").toString(),""],editType:"plot"},editType:"plot"},xaxes:{valType:"info_array",freeLength:!0,items:{valType:"enumerated",values:[k.x.toString(),""],editType:"plot"},editType:"plot"},yaxes:{valType:"info_array",freeLength:!0,items:{valType:"enumerated",values:[k.y.toString(),""],editType:"plot"},editType:"plot"},pattern:{valType:"enumerated",values:["independent",
"coupled"],dflt:"coupled",editType:"plot"},xgap:{valType:"number",min:0,max:1,editType:"plot"},ygap:{valType:"number",min:0,max:1,editType:"plot"},domain:b({name:"grid",editType:"plot",noGridCell:!0},{}),xside:{valType:"enumerated",values:["bottom","bottom plot","top plot","top"],dflt:"bottom plot",editType:"plot"},yside:{valType:"enumerated",values:["left","left plot","right plot","right"],dflt:"left plot",editType:"plot"},editType:"plot"};G.exports={moduleType:"component",name:"grid",schema:{layout:{grid:h}},
layoutAttributes:h,sizeDefaults:function(l,c){function g(u,B){return f.coerce(d,z,h,u,B)}var d=l.grid||{},p=q(c,d,"x"),r=q(c,d,"y");if(l.grid||p||r){l=Array.isArray(d.subplots)&&Array.isArray(d.subplots[0]);var t=Array.isArray(p),w=Array.isArray(r),x=t&&p!==d.xaxes&&w&&r!==d.yaxes;if(l){var y=d.subplots.length;var A=d.subplots[0].length}else w&&(y=r.length),t&&(A=p.length);var z=e.newContainer(c,"grid");p=g("rows",y);A=g("columns",A);if(1<p*A){l||t||w||"independent"===g("pattern")&&(l=!0);z._hasSubplotGrid=
l;t="top to bottom"===g("roworder");w=l?.3:.1;if(x&&c._splomGridDflt){var F=c._splomGridDflt.xside;var D=c._splomGridDflt.yside}z._domains={x:n("x",g,l?.2:.1,F,A),y:n("y",g,w,D,p,t)}}else delete c.grid}},contentDefaults:function(l,c){var g=c.grid;if(g&&g._domains){var d=l.grid||{};l=c._subplots;var p=g._hasSubplotGrid,r=g.rows,t=g.columns,w="independent"===g.pattern,x,y=g._axisMap={};if(p){var A=d.subplots||[];var z=g.subplots=Array(r);var F=1;for(c=0;c<r;c++){var D=z[c]=Array(t),u=A[c]||[];for(x=
0;x<t;x++)if(w?(d=1===F?"xy":"x"+F+"y"+F,F++):d=u[x],D[x]="",-1!==l.cartesian.indexOf(d)){var B=d.indexOf("y");var I=d.slice(0,B);B=d.slice(B);void 0!==y[I]&&y[I]!==x||void 0!==y[B]&&y[B]!==c||(D[x]=d,y[I]=x,y[B]=c)}}}else B=q(c,d,"x"),c=q(c,d,"y"),g.xaxes=m(B,l.xaxis,t,y,"x"),g.yaxes=m(c,l.yaxis,r,y,"y");w=g._anchors={};x="top to bottom"===g.roworder;for(var J in y)if(c=J.charAt(0),d=g[c+"side"],8>d.length)w[J]="free";else if("x"===c)if("t"===d.charAt(0)===x?(c=0,A=1,F=r):(c=r-1,F=A=-1),p)for(I=
y[J];c!==F;c+=A){if(d=z[c][I])if(B=d.indexOf("y"),d.slice(0,B)===J){w[J]=d.slice(B);break}}else for(;c!==F;c+=A){if(B=g.yaxes[c],-1!==l.cartesian.indexOf(J+B)){w[J]=B;break}}else if("l"===d.charAt(0)?(c=0,A=1,F=t):(c=t-1,F=A=-1),p)for(I=y[J];c!==F;c+=A){if(d=z[I][c])if(B=d.indexOf("y"),d.slice(B)===J){w[J]=d.slice(0,B);break}}else for(;c!==F;c+=A)if(I=g.xaxes[c],-1!==l.cartesian.indexOf(I+J)){w[J]=I;break}}}}},{"../../lib":750,"../../lib/regex":766,"../../plot_api/plot_template":788,"../../plots/cartesian/constants":805,
"../../plots/domain":826}],660:[function(a,G,C){C=a("../../plots/cartesian/constants");var q=a("../../plot_api/plot_template").templatedArray;a("../../constants/axis_placeable_objects");G.exports=q("image",{visible:{valType:"boolean",dflt:!0,editType:"arraydraw"},source:{valType:"string",editType:"arraydraw"},layer:{valType:"enumerated",values:["below","above"],dflt:"above",editType:"arraydraw"},sizex:{valType:"number",dflt:0,editType:"arraydraw"},sizey:{valType:"number",dflt:0,editType:"arraydraw"},
sizing:{valType:"enumerated",values:["fill","contain","stretch"],dflt:"contain",editType:"arraydraw"},opacity:{valType:"number",min:0,max:1,dflt:1,editType:"arraydraw"},x:{valType:"any",dflt:0,editType:"arraydraw"},y:{valType:"any",dflt:0,editType:"arraydraw"},xanchor:{valType:"enumerated",values:["left","center","right"],dflt:"left",editType:"arraydraw"},yanchor:{valType:"enumerated",values:["top","middle","bottom"],dflt:"top",editType:"arraydraw"},xref:{valType:"enumerated",values:["paper",C.idRegex.x.toString()],
dflt:"paper",editType:"arraydraw"},yref:{valType:"enumerated",values:["paper",C.idRegex.y.toString()],dflt:"paper",editType:"arraydraw"},editType:"arraydraw"})},{"../../constants/axis_placeable_objects":718,"../../plot_api/plot_template":788,"../../plots/cartesian/constants":805}],661:[function(a,G,C){var q=a("fast-isnumeric"),n=a("../../lib/to_log_range");G.exports=function(m,f,b,k){f=f||{};var e="log"===b&&"linear"===f.type;b="linear"===b&&"log"===f.type;if(e||b){m=m._fullLayout.images;b=f._id.charAt(0);
for(var h,l,c=0;c<m.length;c++)if(h=m[c],l="images["+c+"].",h[b+"ref"]===f._id){var g=h[b];h=h["size"+b];e?(g=n(g,f.range),h=h/Math.pow(10,g)/2,h=2*Math.log(h+Math.sqrt(1+h*h))/Math.LN10):(g=Math.pow(10,g),h=g*(Math.pow(10,h/2)-Math.pow(10,-h/2)));q(g)?q(h)||(h=null):h=g=null;k(l+b,g);k(l+"size"+b,h)}}}},{"../../lib/to_log_range":776,"fast-isnumeric":241}],662:[function(a,G,C){function q(k,e,h){function l(r,t){return n.coerce(k,e,b,r,t)}var c=l("source");if(!l("visible",!!c))return e;l("layer");l("xanchor");
l("yanchor");l("sizex");l("sizey");l("sizing");l("opacity");h={_fullLayout:h};c=["x","y"];for(var g=0;2>g;g++){var d=c[g],p=m.coerceRef(k,e,h,d,"paper",void 0);"paper"!==p&&m.getFromId(h,p)._imgIndices.push(e._index);m.coercePosition(e,h,l,p,d,0)}return e}var n=a("../../lib"),m=a("../../plots/cartesian/axes"),f=a("../../plots/array_container_defaults"),b=a("./attributes");G.exports=function(k,e){f(k,e,{name:"images",handleItemDefaults:q})}},{"../../lib":750,"../../plots/array_container_defaults":794,
"../../plots/cartesian/axes":799,"./attributes":660}],663:[function(a,G,C){var q=a("d3"),n=a("../drawing"),m=a("../../plots/cartesian/axes"),f=a("../../plots/cartesian/axis_ids"),b=a("../../constants/xmlns_namespaces");G.exports=function(k){function e(y){var A=q.select(this);if(this._imgSrc!==y.source)if(A.attr("xmlns",b.svg),y.source&&"data:"===y.source.slice(0,5))A.attr("xlink:href",y.source),this._imgSrc=y.source;else{var z=new Promise(function(F){function D(){A.remove();F()}var u=new Image;this.img=
u;u.setAttribute("crossOrigin","anonymous");u.onerror=D;u.onload=function(){var B=document.createElement("canvas");B.width=this.width;B.height=this.height;B.getContext("2d").drawImage(this,0,0);B=B.toDataURL("image/png");A.attr("xlink:href",B);F()};A.on("error",D);this._imgSrc=u.src=y.source}.bind(this));k._promises.push(z)}}function h(y){var A=q.select(this),z=m.getFromId(k,y.xref),F=m.getFromId(k,y.yref),D="domain"===m.getRefType(y.xref),u="domain"===m.getRefType(y.yref),B=l._size;var I=void 0!==
z?"string"===typeof y.xref&&D?z._length*y.sizex:Math.abs(z.l2p(y.sizex)-z.l2p(0)):y.sizex*B.w;var J=void 0!==F?"string"===typeof y.yref&&u?F._length*y.sizey:Math.abs(F.l2p(y.sizey)-F.l2p(0)):y.sizey*B.h;var N=I*x.x[y.xanchor].offset,M=J*x.y[y.yanchor].offset,E=x.x[y.xanchor].sizing+x.y[y.yanchor].sizing;D=void 0!==z?"string"===typeof y.xref&&D?z._length*y.x+z._offset:z.r2p(y.x)+z._offset:y.x*B.w+B.l;D+=N;u=void 0!==F?"string"===typeof y.yref&&u?F._length*(1-y.y)+F._offset:F.r2p(y.y)+F._offset:B.h-
y.y*B.h+B.t;switch(y.sizing){case "fill":E+=" slice";break;case "stretch":E="none"}A.attr({x:D,y:u+M,width:I,height:J,preserveAspectRatio:E,opacity:y.opacity});z=z&&"domain"!==m.getRefType(y.xref)?z._id:"";y=F&&"domain"!==m.getRefType(y.yref)?F._id:"";y=z+y;n.setClipUrl(A,y?"clip"+l._uid+y:null,k)}var l=k._fullLayout,c=[],g={},d=[],p;for(p=0;p<l.images.length;p++){var r=l.images[p];if(r.visible)if("below"===r.layer&&"paper"!==r.xref&&"paper"!==r.yref){var t=f.ref2id(r.xref)+f.ref2id(r.yref);var w=
l._plots[t];w?(w.mainplot&&(t=w.mainplot.id),g[t]||(g[t]=[]),g[t].push(r)):d.push(r)}else"above"===r.layer?c.push(r):d.push(r)}var x={x:{left:{sizing:"xMin",offset:0},center:{sizing:"xMid",offset:-.5},right:{sizing:"xMax",offset:-1}},y:{top:{sizing:"YMin",offset:0},middle:{sizing:"YMid",offset:-.5},bottom:{sizing:"YMax",offset:-1}}};p=l._imageLowerLayer.selectAll("image").data(d);t=l._imageUpperLayer.selectAll("image").data(c);p.enter().append("image");t.enter().append("image");p.exit().remove();
t.exit().remove();p.each(function(y){e.bind(this)(y);h.bind(this)(y)});t.each(function(y){e.bind(this)(y);h.bind(this)(y)});c=Object.keys(l._plots);for(p=0;p<c.length;p++)t=c[p],d=l._plots[t],d.imagelayer&&(t=d.imagelayer.selectAll("image").data(g[t]||[]),t.enter().append("image"),t.exit().remove(),t.each(function(y){e.bind(this)(y);h.bind(this)(y)}))}},{"../../constants/xmlns_namespaces":726,"../../plots/cartesian/axes":799,"../../plots/cartesian/axis_ids":802,"../drawing":637,d3:169}],664:[function(a,
G,C){G.exports={moduleType:"component",name:"images",layoutAttributes:a("./attributes"),supplyLayoutDefaults:a("./defaults"),includeBasePlot:a("../../plots/cartesian/include_components")("images"),draw:a("./draw"),convertCoords:a("./convert_coords")}},{"../../plots/cartesian/include_components":811,"./attributes":660,"./convert_coords":661,"./defaults":662,"./draw":663}],665:[function(a,G,C){C=a("../../plots/font_attributes");a=a("../color/attributes");G.exports={bgcolor:{valType:"color",editType:"legend"},
bordercolor:{valType:"color",dflt:a.defaultLine,editType:"legend"},borderwidth:{valType:"number",min:0,dflt:0,editType:"legend"},font:C({editType:"legend"}),orientation:{valType:"enumerated",values:["v","h"],dflt:"v",editType:"legend"},traceorder:{valType:"flaglist",flags:["reversed","grouped"],extras:["normal"],editType:"legend"},tracegroupgap:{valType:"number",min:0,dflt:10,editType:"legend"},itemsizing:{valType:"enumerated",values:["trace","constant"],dflt:"trace",editType:"legend"},itemclick:{valType:"enumerated",
values:["toggle","toggleothers",!1],dflt:"toggle",editType:"legend"},itemdoubleclick:{valType:"enumerated",values:["toggle","toggleothers",!1],dflt:"toggleothers",editType:"legend"},x:{valType:"number",min:-2,max:3,editType:"legend"},xanchor:{valType:"enumerated",values:["auto","left","center","right"],dflt:"left",editType:"legend"},y:{valType:"number",min:-2,max:3,editType:"legend"},yanchor:{valType:"enumerated",values:["auto","top","middle","bottom"],editType:"legend"},uirevision:{valType:"any",
editType:"none"},valign:{valType:"enumerated",values:["top","middle","bottom"],dflt:"middle",editType:"legend"},title:{text:{valType:"string",dflt:"",editType:"legend"},font:C({editType:"legend"}),side:{valType:"enumerated",values:["top","left","top left"],editType:"legend"},editType:"legend"},editType:"legend"}},{"../../plots/font_attributes":827,"../color/attributes":614}],666:[function(a,G,C){G.exports={scrollBarWidth:6,scrollBarMinHeight:20,scrollBarColor:"#808BA4",scrollBarMargin:4,scrollBarEnterAttrs:{rx:20,
ry:3,width:0,height:0},titlePad:2,textGap:40,itemGap:5}},{}],667:[function(a,G,C){var q=a("../../registry"),n=a("../../lib"),m=a("../../plot_api/plot_template"),f=a("./attributes"),b=a("../../plots/layout_attributes"),k=a("./helpers");G.exports=function(e,h,l){function c(y,A){return n.coerce(g,x,f,y,A)}for(var g=e.legend||{},d=0,p=!1,r="normal",t=0;t<l.length;t++){var w=l[t];if(w.visible){if(w.showlegend||w._dfltShowLegend&&!(w._module&&w._module.attributes&&w._module.attributes.showlegend&&!1===
w._module.attributes.showlegend.dflt))d++,w.showlegend&&(p=!0,(q.traceIs(w,"pie-like")||!0===w._input.showlegend)&&d++);if(q.traceIs(w,"bar")&&"stack"===h.barmode||-1!==["tonextx","tonexty"].indexOf(w.fill))r=k.isGrouped({traceorder:r})?"grouped+reversed":"reversed";void 0!==w.legendgroup&&""!==w.legendgroup&&(r=k.isReversed({traceorder:r})?"reversed+grouped":"grouped")}}l=n.coerce(e,h,b,"showlegend",p&&1<d);if(!1!==l||g.uirevision){var x=m.newContainer(h,"legend");c("uirevision",h.uirevision);!1!==
l&&(c("bgcolor",h.paper_bgcolor),c("bordercolor"),c("borderwidth"),n.coerceFont(c,"font",h.font),l=c("orientation"),"h"===l?(d=0,q.getComponentMethod("rangeslider","isVisible")(e.xaxis)?(e=1.1,p="bottom"):(e=-.1,p="top")):(d=1.02,e=1,p="auto"),c("traceorder",r),k.isGrouped(h.legend)&&c("tracegroupgap"),c("itemsizing"),c("itemclick"),c("itemdoubleclick"),c("x",d),c("xanchor"),c("y",e),c("yanchor",p),c("valign"),n.noneOrAll(g,x,["x","y"]),c("title.text")&&(c("title.side","h"===l?"left":"top"),n.coerceFont(c,
"title.font",h.font)))}}},{"../../lib":750,"../../plot_api/plot_template":788,"../../plots/layout_attributes":853,"../../registry":882,"./attributes":665,"./helpers":671}],668:[function(a,G,C){function q(M,E,L,Q,S){var R=L.data()[0][0].trace;S={event:S,node:L.node(),curveNumber:R.index,expandedIndex:R._expandedIndex,data:M.data,layout:M.layout,frames:M._transitionData._frames,config:M._context,fullData:M._fullData,fullLayout:M._fullLayout};R._group&&(S.group=R._group);r.traceIs(R,"pie-like")&&(S.label=
L.datum()[0].label);!1!==t.triggerHandler(M,"plotly_legendclick",S)&&(1===Q?E._clickTimeout=setTimeout(function(){z(L,M,Q)},M._context.doubleClickDelay):2===Q&&(E._clickTimeout&&clearTimeout(E._clickTimeout),M._legendMouseDownTime=0,!1!==t.triggerHandler(M,"plotly_legenddoubleclick",S)&&z(L,M,Q)))}function n(M,E,L){var Q=M.data()[0][0],S=Q.trace,R=r.traceIs(S,"pie-like"),O=S.index,T=L._main&&E._context.edits.legendText&&!R,V=L._maxNameLength;L.entries?R=Q.text:(R=R?Q.label:S.name,S._meta&&(R=d.templateString(R,
S._meta)));S=d.ensureSingle(M,"text","legendtext");S.attr("text-anchor","start").call(x.font,L.font).text(T?m(R,V):R);A.positionText(S,F.textGap,0);if(T)S.call(A.makeEditable,{gd:E,text:R}).call(b,M,E,L).on("edit",function(X){this.text(m(X,V)).call(b,M,E,L);var ba=Q.trace._fullInput||{},aa={};r.hasTransform(ba,"groupby")?(aa=r.getTransformIndices(ba,"groupby"),ba=d.keyedContainer(ba,"transforms["+aa[aa.length-1]+"].styles","target","value.name"),ba.set(Q.trace._group,X),aa=ba.constructUpdate()):aa.name=
X;return r.call("_guiRestyle",E,aa,O)});else b(S,M,E,L)}function m(M,E){E=Math.max(4,E);if(M&&M.trim().length>=E/2)return M;M=M||"";for(E-=M.length;0<E;E--)M+=" ";return M}function f(M,E){var L=E._context.doubleClickDelay,Q,S=1,R=d.ensureSingle(M,"rect","legendtoggle",function(O){O.style("cursor","pointer").attr("pointer-events","all").call(y.fill,"rgba(0,0,0,0)")});R.on("mousedown",function(){Q=(new Date).getTime();Q-E._legendMouseDownTime<L?S+=1:(S=1,E._legendMouseDownTime=Q)});R.on("mouseup",function(){if(!E._dragged&&
!E._editing){var O=E._fullLayout.legend;(new Date).getTime()-E._legendMouseDownTime>L&&(S=Math.max(S-1,1));q(E,O,M,S,g.event)}})}function b(M,E,L,Q){Q._main||M.attr("data-notex",!0);A.convertToTspans(M,L,function(){var S=Q,R=E.data()[0][0];if(S._main&&R&&!R.trace.showlegend)E.remove();else{var O=E.select("g[class*\x3dmath-group]"),T=O.node();S||(S=L._fullLayout.legend);var V=S.borderwidth,X=(R?S:S.title).font.size*D;if(T){var ba=x.bBox(T);T=ba.height;ba=ba.width;R?x.setTranslate(O,0,.25*T):x.setTranslate(O,
V,.75*T+V)}else{O=E.select(R?".legendtext":".legendtitletext");var aa=A.lineCount(O);ba=O.node();T=X*aa;ba=ba?x.bBox(ba).width:0;R?A.positionText(O,F.textGap,-(X*((aa-1)/2-.3))):A.positionText(O,F.titlePad+V,X+V)}R?(R.lineHeight=X,R.height=Math.max(T,16)+3,R.width=ba):(S._titleWidth=ba,S._titleHeight=T)}})}function k(M){var E=0,L=0,Q=M.title.side;Q&&(-1!==Q.indexOf("left")&&(E=M._titleWidth),-1!==Q.indexOf("top")&&(L=M._titleHeight));return[E,L]}function e(M,E,L,Q){var S=M._fullLayout;Q||(Q=S.legend);
var R=S._size,O=N.isVertical(Q),T=N.isGrouped(Q),V=Q.borderwidth,X=2*V,ba=F.textGap,aa=F.itemGap,ka=2*(V+aa),ha=c(Q),ca=0>Q.y||0===Q.y&&"top"===ha,sa=1<Q.y||1===Q.y&&"bottom"===ha;Q._maxHeight=Math.max(ca||sa?S.height/2:R.h,30);var ma=0;Q._width=0;Q._height=0;var ra=k(Q);if(O)L.each(function(Fa){var Na=Fa[0].height;x.setTranslate(this,V+ra[0],V+ra[1]+Q._height+Na/2+aa);Q._height+=Na;Q._width=Math.max(Q._width,Fa[0].width)}),ma=ba+Q._width,Q._width+=aa+ba+X,Q._height+=ka,T&&(E.each(function(Fa,Na){x.setTranslate(this,
0,Na*Q.tracegroupgap)}),Q._height+=(Q._lgroupsLength-1)*Q.tracegroupgap);else{ha=l(Q);var qa=1<Q.x||1===Q.x&&"left"===ha;ca=sa||ca;S=S.width/2;Q._maxWidth=Math.max(0>Q.x||0===Q.x&&"right"===ha?ca&&"left"===ha?R.l+R.w:S:qa?ca&&"right"===ha?R.r+R.w:S:R.w,2*ba);var Y=0,pa=0;L.each(function(Fa){Fa=Fa[0].width+ba;Y=Math.max(Y,Fa);pa+=Fa});ma=null;var oa=0;if(T){var ua=0,ya=0,ja=0;E.each(function(){var Fa=0,Na=0;g.select(this).selectAll("g.traces").each(function(cb){var mb=cb[0].height;x.setTranslate(this,
ra[0],ra[1]+V+aa+mb/2+Na);Na+=mb;Fa=Math.max(Fa,ba+cb[0].width)});ua=Math.max(ua,Na);var $a=Fa+aa;$a+V+ya>Q._maxWidth&&(oa=Math.max(oa,ya),ya=0,ja+=ua+Q.tracegroupgap,ua=Na);x.setTranslate(this,ya,ja);ya+=$a});Q._width=Math.max(oa,ya)+V;Q._height=ja+ua+ka}else{E=L.size();var za=pa+X+(E-1)*aa<Q._maxWidth,Ba=0,Ma=0,Oa=0,Ia=0;L.each(function(Fa){var Na=Fa[0].height;Fa=ba+Fa[0].width;var $a=(za?Fa:Y)+aa;$a+V+Ma-aa>=Q._maxWidth&&(oa=Math.max(oa,Ia),Ma=0,Oa+=Ba,Q._height+=Ba,Ba=0);x.setTranslate(this,ra[0]+
V+Ma,ra[1]+V+Oa+Na/2+aa);Ia=Ma+Fa+aa;Ma+=$a;Ba=Math.max(Ba,Na)});za?(Q._width=Ma+X,Q._height=Ba+ka):(Q._width=Math.max(oa,Ia)+X,Q._height+=Ba+ka)}}Q._width=Math.ceil(Math.max(Q._width+ra[0],Q._titleWidth+2*(V+F.titlePad)));Q._height=Math.ceil(Math.max(Q._height+ra[1],Q._titleHeight+2*(V+F.itemGap)));Q._effHeight=Math.min(Q._height,Q._maxHeight);M=M._context.edits;var Pa=M.legendText||M.legendPosition;L.each(function(Fa){var Na=g.select(this).select(".legendtoggle"),$a=Fa[0].height;Fa=Pa?ba:ma||ba+
Fa[0].width;O||(Fa+=aa/2);x.setRect(Na,0,-$a/2,Fa,$a)})}function h(M){var E=M._fullLayout.legend,L=l(E),Q=c(E);return p.autoMargin(M,"legend",{x:E.x,y:E.y,l:E._width*u[L],r:E._width*B[L],b:E._effHeight*B[Q],t:E._effHeight*u[Q]})}function l(M){return d.isRightAnchor(M)?"right":d.isCenterAnchor(M)?"center":"left"}function c(M){return d.isBottomAnchor(M)?"bottom":d.isMiddleAnchor(M)?"middle":"top"}var g=a("d3"),d=a("../../lib"),p=a("../../plots/plots"),r=a("../../registry"),t=a("../../lib/events"),w=
a("../dragelement"),x=a("../drawing"),y=a("../color"),A=a("../../lib/svg_text_utils"),z=a("./handle_click"),F=a("./constants");C=a("../../constants/alignment");var D=C.LINE_SPACING,u=C.FROM_TL,B=C.FROM_BR,I=a("./get_legend_data"),J=a("./style"),N=a("./helpers");G.exports=function(M,E){var L=M._fullLayout,Q="legend"+L._uid;if(E){var S=E.layer;Q+="-hover"}else E=L.legend||{},E._main=!0,S=L._infolayer;if(S){M._legendMouseDownTime||(M._legendMouseDownTime=0);if(E._main){if(!M.calcdata)return;var R=L.showlegend&&
I(M.calcdata,E)}else{if(!E.entries)return;R=I(E.entries,E)}var O=L.hiddenlabels||[];if(E._main&&(!L.showlegend||!R.length))return S.selectAll(".legend").remove(),L._topdefs.select("#"+Q).remove(),p.autoMargin(M,"legend");var T=d.ensureSingle(S,"g","legend",function(ma){E._main&&ma.attr("pointer-events","all")}),V=d.ensureSingleById(L._topdefs,"clipPath",Q,function(ma){ma.append("rect")}),X=d.ensureSingle(T,"rect","bg",function(ma){ma.attr("shape-rendering","crispEdges")});X.call(y.stroke,E.bordercolor).call(y.fill,
E.bgcolor).style("stroke-width",E.borderwidth+"px");var ba=d.ensureSingle(T,"g","scrollbox"),aa=E.title;E._titleWidth=0;E._titleHeight=0;if(aa.text){var ka=d.ensureSingle(ba,"text","legendtitletext");ka.attr("text-anchor","start").call(x.font,aa.font).text(aa.text);b(ka,ba,M,E)}else ba.selectAll(".legendtitletext").remove();var ha=d.ensureSingle(T,"rect","scrollbar",function(ma){ma.attr(F.scrollBarEnterAttrs).call(y.fill,F.scrollBarColor)}),ca=ba.selectAll("g.groups").data(R);ca.enter().append("g").attr("class",
"groups");ca.exit().remove();var sa=ca.selectAll("g.traces").data(d.identity);sa.enter().append("g").attr("class","traces");sa.exit().remove();sa.style("opacity",function(ma){var ra=ma[0].trace;return r.traceIs(ra,"pie-like")?-1!==O.indexOf(ma[0].label)?.5:1:"legendonly"===ra.visible?.5:1}).each(function(){g.select(this).call(n,M,E)}).call(J,M,E).each(function(){E._main&&g.select(this).call(f,M)});d.syncOrAsync([p.previousPromises,function(){return e(M,ca,sa,E)},function(){function ma(mb,Ka,Ua){E._scrollY=
M._fullLayout.legend._scrollY=mb;x.setTranslate(ba,0,-mb);x.setRect(ha,E._width,F.scrollBarMargin+mb*Ua,F.scrollBarWidth,Ka);V.select("rect").attr("y",qa+mb)}if(!E._main||!h(M)){var ra=L._size,qa=E.borderwidth,Y=ra.l+ra.w*E.x-u[l(E)]*E._width,pa=ra.t+ra.h*(1-E.y)-u[c(E)]*E._effHeight;if(E._main&&L.margin.autoexpand){var oa=Y,ua=pa;Y=d.constrain(Y,0,L.width-E._width);pa=d.constrain(pa,0,L.height-E._effHeight);Y!==oa&&d.log("Constrain legend.x to make legend fit inside graph");pa!==ua&&d.log("Constrain legend.y to make legend fit inside graph")}E._main&&
x.setTranslate(T,Y,pa);ha.on(".drag",null);T.on("wheel",null);if(!E._main||E._height<=E._maxHeight||M._context.staticPlot)Y=E._effHeight,E._main||(Y=E._height),X.attr({width:E._width-qa,height:Y-qa,x:qa/2,y:qa/2}),x.setTranslate(ba,0,0),V.select("rect").attr({width:E._width-2*qa,height:Y-2*qa,x:qa,y:qa}),x.setClipUrl(ba,Q,M),x.setRect(ha,0,0,0,0),delete E._scrollY;else{var ya=Math.max(F.scrollBarMinHeight,E._effHeight*E._effHeight/E._height),ja=E._effHeight-ya-2*F.scrollBarMargin,za=E._height-E._effHeight,
Ba=ja/za,Ma=Math.min(E._scrollY||0,za);X.attr({width:E._width-2*qa+F.scrollBarWidth+F.scrollBarMargin,height:E._effHeight-qa,x:qa/2,y:qa/2});V.select("rect").attr({width:E._width-2*qa+F.scrollBarWidth+F.scrollBarMargin,height:E._effHeight-2*qa,x:qa,y:qa+Ma});x.setClipUrl(ba,Q,M);ma(Ma,ya,Ba);T.on("wheel",function(){Ma=d.constrain(E._scrollY+g.event.deltaY/ja*za,0,za);ma(Ma,ya,Ba);0!==Ma&&Ma!==za&&g.event.preventDefault()});var Oa,Ia,Pa;Y=g.behavior.drag().on("dragstart",function(){var mb=g.event.sourceEvent;
Oa="touchstart"===mb.type?mb.changedTouches[0].clientY:mb.clientY;Pa=Ma}).on("drag",function(){var mb=g.event.sourceEvent;2===mb.buttons||mb.ctrlKey||(Ia="touchmove"===mb.type?mb.changedTouches[0].clientY:mb.clientY,Ma=d.constrain((Ia-Oa)/Ba+Pa,0,za),ma(Ma,ya,Ba))});ha.call(Y);Y=g.behavior.drag().on("dragstart",function(){var mb=g.event.sourceEvent;"touchstart"===mb.type&&(Oa=mb.changedTouches[0].clientY,Pa=Ma)}).on("drag",function(){var mb=g.event.sourceEvent;"touchmove"===mb.type&&(Ia=mb.changedTouches[0].clientY,
Ma=d.constrain((Oa-Ia)/Ba+Pa,0,za),ma(Ma,ya,Ba))});ba.call(Y)}if(M._context.edits.legendPosition){var Fa,Na,$a,cb;T.classed("cursor-move",!0);w.init({element:T.node(),gd:M,prepFn:function(){var mb=x.getTranslate(T);$a=mb.x;cb=mb.y},moveFn:function(mb,Ka){mb=$a+mb;Ka=cb+Ka;x.setTranslate(T,mb,Ka);Fa=w.align(mb,0,ra.l,ra.l+ra.w,E.xanchor);Na=w.align(Ka,0,ra.t+ra.h,ra.t,E.yanchor)},doneFn:function(){void 0!==Fa&&void 0!==Na&&r.call("_guiRelayout",M,{"legend.x":Fa,"legend.y":Na})},clickFn:function(mb,
Ka){var Ua=S.selectAll("g.traces").filter(function(){var Ea=this.getBoundingClientRect();return Ka.clientX>=Ea.left&&Ka.clientX<=Ea.right&&Ka.clientY>=Ea.top&&Ka.clientY<=Ea.bottom});0<Ua.size()&&q(M,T,Ua,mb,Ka)}})}}}],M)}}},{"../../constants/alignment":717,"../../lib":750,"../../lib/events":739,"../../lib/svg_text_utils":774,"../../plots/plots":862,"../../registry":882,"../color":615,"../dragelement":634,"../drawing":637,"./constants":666,"./get_legend_data":669,"./handle_click":670,"./helpers":671,
"./style":673,d3:169}],669:[function(a,G,C){var q=a("../../registry"),n=a("./helpers");G.exports=function(m,f){function b(A,z){""!==A&&n.isGrouped(f)?-1===e.indexOf(A)?(e.push(A),h=!0,k[A]=[[z]]):k[A].push([z]):(A="~~i"+c,e.push(A),k[A]=[[z]],c++)}var k={},e=[],h=!1,l={},c=0,g=0,d,p=f._main;for(d=0;d<m.length;d++){var r=m[d];var t=r[0];var w=t.trace,x=w.legendgroup;if(!p||w.visible&&w.showlegend)if(q.traceIs(w,"pie-like"))for(l[x]||(l[x]={}),t=0;t<r.length;t++){var y=r[t].label;l[x][y]||(b(x,{label:y,
color:r[t].color,i:r[t].i,trace:w,pts:r[t].pts}),l[x][y]=!0,g=Math.max(g,(y||"").length))}else b(x,t),g=Math.max(g,(w.name||"").length)}if(!e.length)return[];m=e.length;if(h&&n.isGrouped(f))for(p=Array(m),d=0;d<m;d++)l=k[e[d]],p[d]=n.isReversed(f)?l.reverse():l;else{p=[Array(m)];for(d=0;d<m;d++)l=k[e[d]][0],p[0][n.isReversed(f)?m-d-1:d]=l;m=1}f._lgroupsLength=m;f._maxNameLength=g;return p}},{"../../registry":882,"./helpers":671}],670:[function(a,G,C){var q=a("../../lib"),n=a("../../registry"),m=!0;
G.exports=function(f,b,k){function e(D,u,B){var I=t.indexOf(D),J=r[u];J||(J=r[u]=[]);-1===t.indexOf(D)&&(t.push(D),I=t.length-1);J[I]=B;return I}function h(D,u){var B=D._fullInput;if(n.hasTransform(B,"groupby")){var I=w[B.index];I||(I=n.getTransformIndices(B,"groupby"),I=q.keyedContainer(B,"transforms["+I[I.length-1]+"].styles","target","value.visible"),w[B.index]=I);var J=I.get(D._group);void 0===J&&(J=!0);!1!==J&&I.set(D._group,u);x[B.index]=e(B.index,"visible",!1===B.visible?!1:!0)}else e(B.index,
"visible",!1===B.visible?!1:u)}var l=b._fullLayout;if(!b._dragged&&!b._editing){var c=l.legend.itemclick,g=l.legend.itemdoubleclick;1===k&&"toggle"===c&&"toggleothers"===g&&m&&b.data&&b._context.showTips&&q.notifier(q._(b,"Double-click on legend to isolate one trace"),"long");m=!1;var d;1===k?d=c:2===k&&(d=g);if(d){var p=l.hiddenlabels?l.hiddenlabels.slice():[];f=f.data()[0][0];k=b._fullData;l=f.trace;c=l.legendgroup;var r={},t=[],w=[],x=[];if(n.traceIs(l,"pie-like")){var y=f.label;f=p.indexOf(y);
"toggle"===d?-1===f?p.push(y):p.splice(f,1):"toggleothers"===d&&(p=[],b.calcdata[0].forEach(function(D){y!==D.label&&p.push(D.label)}),b._fullLayout.hiddenlabels&&b._fullLayout.hiddenlabels.length===p.length&&-1===f&&(p=[]));n.call("_guiRelayout",b,"hiddenlabels",p)}else{g=c&&c.length;var A=[];if(g)for(f=0;f<k.length;f++){var z=k[f];z.visible&&z.legendgroup===c&&A.push(f)}if("toggle"===d){switch(l.visible){case !0:var F="legendonly";break;case !1:F=!1;break;case "legendonly":F=!0}if(g)for(f=0;f<k.length;f++)!1!==
k[f].visible&&k[f].legendgroup===c&&h(k[f],F);else h(l,F)}else if("toggleothers"===d){A=!0;for(f=0;f<k.length;f++)if(z=k[f]===l,d=!0!==k[f].showlegend,!(z||d||(z=g&&k[f].legendgroup===c,z||!0!==k[f].visible||n.traceIs(k[f],"notLegendIsolatable")))){A=!1;break}for(f=0;f<k.length;f++)if(!1!==k[f].visible&&!n.traceIs(k[f],"notLegendIsolatable"))switch(l.visible){case "legendonly":h(k[f],!0);break;case !0:F=A?!0:"legendonly",z=k[f]===l,d=!0!==k[f].showlegend&&!k[f].legendgroup,z=z||g&&k[f].legendgroup===
c,h(k[f],z||d?!0:F)}}for(f=0;f<w.length;f++)if(d=w[f])for(c=d.constructUpdate(),F=Object.keys(c),d=0;d<F.length;d++)k=F[d],l=r[k]=r[k]||[],l[x[f]]=c[k];l=Object.keys(r);for(f=0;f<l.length;f++)for(k=l[f],d=0;d<t.length;d++)r[k].hasOwnProperty(d)||(r[k][d]=void 0);n.call("_guiRestyle",b,r,t)}}}}},{"../../lib":750,"../../registry":882}],671:[function(a,G,C){C.isGrouped=function(q){return-1!==(q.traceorder||"").indexOf("grouped")};C.isVertical=function(q){return"h"!==q.orientation};C.isReversed=function(q){return-1!==
(q.traceorder||"").indexOf("reversed")}},{}],672:[function(a,G,C){G.exports={moduleType:"component",name:"legend",layoutAttributes:a("./attributes"),supplyLayoutDefaults:a("./defaults"),draw:a("./draw"),style:a("./style")}},{"./attributes":665,"./defaults":667,"./draw":668,"./style":673}],673:[function(a,G,C){function q(g,d){return(d?"radial":"horizontal")+(g?"":"reversed")}var n=a("d3"),m=a("../../registry"),f=a("../../lib"),b=a("../drawing"),k=a("../color"),e=a("../colorscale/helpers").extractOpts,
h=a("../../traces/scatter/subtypes"),l=a("../../traces/pie/style_one"),c=a("../../traces/pie/helpers").castOption;G.exports=function(g,d,p){function r(A,z,F){var D=A[0].trace,u=D.marker||{},B=u.line||{};D=F?D.visible&&D.type===F:m.traceIs(D,"bar");A=n.select(z).select("g.legendpoints").selectAll("path.legend"+F).data(D?[A]:[]);A.enter().append("path").classed("legend"+F,!0).attr("d","M6,6H-6V-6H6Z").attr("transform","translate(20,0)");A.exit().remove();A.each(function(I){var J=n.select(this);I=I[0];
var N=y(I.mlw,u.line,5,2);J.style("stroke-width",N+"px").call(k.fill,I.mc||u.color);N&&k.stroke(J,I.mlc||B.color)})}function t(A,z,F){var D=A[0],u=D.trace,B=F?u.visible&&u.type===F:m.traceIs(u,F);A=n.select(z).select("g.legendpoints").selectAll("path.legend"+F).data(B?[A]:[]);A.enter().append("path").classed("legend"+F,!0).attr("d","M6,6H-6V-6H6Z").attr("transform","translate(20,0)");A.exit().remove();A.size()&&(F=(u.marker||{}).line,z=y(c(F.width,D.pts),F,5,2),u=f.minExtend(u,{marker:{line:{width:z}}}),
u.marker.line.color=F.color,D=f.minExtend(D,{trace:u}),l(A,D,u))}var w=d._fullLayout;p||(p=w.legend);var x="constant"===p.itemsizing,y=function(A,z,F,D){if(!(A+1))if(z&&0<z.width)A=z.width;else return 0;return x?D:Math.min(A,F)};g.each(function(A){var z=n.select(this);z=f.ensureSingle(z,"g","layers");z.style("opacity",A[0].trace.opacity);var F=p.valign,D=A[0].lineHeight,u=A[0].height;"middle"!==F&&D&&u?z.attr("transform","translate(0,"+.5*{top:1,bottom:-1}[F]*(D-u+3)+")"):z.attr("transform",null);
z.selectAll("g.legendfill").data([A]).enter().append("g").classed("legendfill",!0);z.selectAll("g.legendlines").data([A]).enter().append("g").classed("legendlines",!0);z=z.selectAll("g.legendsymbols").data([A]);z.enter().append("g").classed("legendsymbols",!0);z.selectAll("g.legendpoints").data([A]).enter().append("g").classed("legendpoints",!0)}).each(function(A){var z=A[0].trace;A=[];if(z.visible)switch(z.type){case "histogram2d":case "heatmap":A=[["M-15,-2V4H15V-2Z"]];var F=!0;break;case "choropleth":case "choroplethmapbox":A=
[["M-6,-6V6H6V-6Z"]];F=!0;break;case "densitymapbox":A=[["M-6,0 a6,6 0 1,0 12,0 a 6,6 0 1,0 -12,0"]];F="radial";break;case "cone":A=[["M-6,2 A2,2 0 0,0 -6,6 V6L6,4Z"],["M-6,-6 A2,2 0 0,0 -6,-2 L6,-4Z"],["M-6,-2 A2,2 0 0,0 -6,2 L6,0Z"]];F=!1;break;case "streamtube":A=[["M-6,2 A2,2 0 0,0 -6,6 H6 A2,2 0 0,1 6,2 Z"],["M-6,-6 A2,2 0 0,0 -6,-2 H6 A2,2 0 0,1 6,-6 Z"],["M-6,-2 A2,2 0 0,0 -6,2 H6 A2,2 0 0,1 6,-2 Z"]];F=!1;break;case "surface":A=[["M-6,-6 A2,3 0 0,0 -6,0 H6 A2,3 0 0,1 6,-6 Z"],["M-6,1 A2,3 0 0,1 -6,6 H6 A2,3 0 0,0 6,0 Z"]];
F=!0;break;case "mesh3d":A=[["M-6,6H0L-6,-6Z"],["M6,6H0L6,-6Z"],["M-6,-6H6L0,6Z"]];F=!1;break;case "volume":A=[["M-6,6H0L-6,-6Z"],["M6,6H0L6,-6Z"],["M-6,-6H6L0,6Z"]];F=!0;break;case "isosurface":A=[["M-6,6H0L-6,-6Z"],["M6,6H0L6,-6Z"],["M-6,-6 A12,24 0 0,0 6,-6 L0,6Z"]],F=!1}A=n.select(this).select("g.legendpoints").selectAll("path.legend3dandfriends").data(A);A.enter().append("path").classed("legend3dandfriends",!0).attr("transform","translate(20,0)").style("stroke-miterlimit",1);A.exit().remove();
A.each(function(D,u){var B=n.select(this),I=e(z),J=I.colorscale,N=I.reversescale;I=function(E){E.size()&&b.gradient(E,d,"legendfill-"+z.uid,q(N,"radial"===F),J,"fill")};if(J)F||(M=J.length,M=0===u?J[N?M-1:0][1]:1===u?J[N?0:M-1][1]:J[Math.floor((M-1)/2)][1]);else{var M=z.vertexcolor||z.facecolor||z.color;M=f.isArrayOrTypedArray(M)?M[u]||M[0]:M}B.attr("d",D[0]);M?B.call(k.fill,M):B.call(I)})}).each(function(A){var z=A[0].trace,F="waterfall"===z.type;if(A[0]._distinct&&F)return F=A[0].trace[A[0].dir].marker,
A[0].mc=F.color,A[0].mlw=F.line.width,A[0].mlc=F.line.color,r(A,this,"waterfall");var D=[];z.visible&&F&&(D=A[0].hasTotals?[["increasing","M-6,-6V6H0Z"],["totals","M6,6H0L-6,-6H-0Z"],["decreasing","M6,6V-6H0Z"]]:[["increasing","M-6,-6V6H6Z"],["decreasing","M6,6V-6H-6Z"]]);A=n.select(this).select("g.legendpoints").selectAll("path.legendwaterfall").data(D);A.enter().append("path").classed("legendwaterfall",!0).attr("transform","translate(20,0)").style("stroke-miterlimit",1);A.exit().remove();A.each(function(u){var B=
n.select(this),I=z[u[0]].marker,J=y(void 0,I.line,5,2);B.attr("d",u[1]).style("stroke-width",J+"px").call(k.fill,I.color);J&&B.call(k.stroke,I.line.color)})}).each(function(A){r(A,this,"funnel")}).each(function(A){r(A,this)}).each(function(A){var z=A[0].trace,F=n.select(this).select("g.legendpoints").selectAll("path.legendbox").data(z.visible&&m.traceIs(z,"box-violin")?[A]:[]);F.enter().append("path").classed("legendbox",!0).attr("d","M6,6H-6V-6H6Z").attr("transform","translate(20,0)");F.exit().remove();
F.each(function(){var D=n.select(this);if("all"!==z.boxpoints&&"all"!==z.points||0!==k.opacity(z.fillcolor)||0!==k.opacity((z.line||{}).color)){var u=y(void 0,z.line,5,2);D.style("stroke-width",u+"px").call(k.fill,z.fillcolor);u&&k.stroke(D,z.line.color)}else D=f.minExtend(z,{marker:{size:x?12:f.constrain(z.marker.size,2,16),sizeref:1,sizemin:1,sizemode:"diameter"}}),F.call(b.pointStyle,D,d)})}).each(function(A){t(A,this,"funnelarea")}).each(function(A){t(A,this,"pie")}).each(function(A){var z=A[0],
F=z.trace,D=F.visible&&F.fill&&"none"!==F.fill,u=h.hasLines(F),B=F.contours,I=!1,J=!1,N=e(F),M=N.colorscale,E=N.reversescale,L=function(R){R.size()&&b.gradient(R,d,"legendfill-"+F.uid,q(E),M,"fill")};N=function(R){if(R.size()){var O="legendline-"+F.uid;b.lineGroupStyle(R);b.gradient(R,d,O,q(E),M,"stroke")}};if(B){var Q=B.coloring;"lines"===Q?I=!0:u="none"===Q||"heatmap"===Q||B.showlines;if("constraint"===B.type)D="\x3d"!==B._operation;else if("fill"===Q||"heatmap"===Q)J=!0}B=h.hasMarkers(F)||h.hasText(F)||
!D&&!J?"M5,0":u||I?"M5,-2":"M5,-3";Q=n.select(this);A=Q.select(".legendfill").selectAll("path").data(D||J?[A]:[]);A.enter().append("path").classed("js-fill",!0);A.exit().remove();A.attr("d",B+"h30v6h-30z").call(D?b.fillGroupStyle:L);if(u||I){D=y(void 0,F.line,10,5);D=f.minExtend(F,{line:{width:D}});var S=[f.minExtend(z,{trace:D})]}z=Q.select(".legendlines").selectAll("path").data(u||I?[S]:[]);z.enter().append("path").classed("js-line",!0);z.exit().remove();z.attr("d",B+(I?"l30,0.0001":"h30")).call(u?
b.lineGroupStyle:N)}).each(function(A){function z(E,L,Q,S){E=f.nestedProperty(u,E).get();L=f.isArrayOrTypedArray(E)&&L?L(E):E;x&&L&&void 0!==S&&(L=S);if(Q){if(L<Q[0])return Q[0];if(L>Q[1])return Q[1]}return L}function F(E){return D._distinct&&D.index&&E[D.index]?E[D.index]:E[0]}var D=A[0],u=D.trace;A=h.hasMarkers(u);var B=h.hasText(u),I=h.hasLines(u);if(A||B||I){var J={};var N={};if(A){J.mc=z("marker.color",F);J.mx=z("marker.symbol",F);J.mo=z("marker.opacity",f.mean,[.2,1]);J.mlc=z("marker.line.color",
F);J.mlw=z("marker.line.width",f.mean,[0,5],2);N.marker={sizeref:1,sizemin:1,sizemode:"diameter"};var M=z("marker.size",f.mean,[2,16],12);J.ms=M;N.marker.size=M}I&&(N.line={width:z("line.width",F,[0,10],5)});B&&(J.tx="Aa",J.tp=z("textposition",F),J.ts=10,J.tc=z("textfont.color",F),J.tf=z("textfont.family",F));J=[f.minExtend(D,J)];N=f.minExtend(u,N);N.selectedpoints=null;N.texttemplate=null}I=n.select(this).select("g.legendpoints");M=I.selectAll("path.scatterpts").data(A?J:[]);M.enter().insert("path",
":first-child").classed("scatterpts",!0).attr("transform","translate(20,0)");M.exit().remove();M.call(b.pointStyle,N,d);A&&(J[0].mrc=3);A=I.selectAll("g.pointtext").data(B?J:[]);A.enter().append("g").classed("pointtext",!0).append("text").attr("transform","translate(20,0)");A.exit().remove();A.selectAll("text").call(b.textPointStyle,N,d)}).each(function(A){var z=A[0].trace;A=n.select(this).select("g.legendpoints").selectAll("path.legendcandle").data(z.visible&&"candlestick"===z.type?[A,A]:[]);A.enter().append("path").classed("legendcandle",
!0).attr("d",function(F,D){return D?"M-15,0H-8M-8,6V-6H8Z":"M15,0H8M8,-6V6H-8Z"}).attr("transform","translate(20,0)").style("stroke-miterlimit",1);A.exit().remove();A.each(function(F,D){F=n.select(this);D=z[D?"increasing":"decreasing"];var u=y(void 0,D.line,5,2);F.style("stroke-width",u+"px").call(k.fill,D.fillcolor);u&&k.stroke(F,D.line.color)})}).each(function(A){var z=A[0].trace;A=n.select(this).select("g.legendpoints").selectAll("path.legendohlc").data(z.visible&&"ohlc"===z.type?[A,A]:[]);A.enter().append("path").classed("legendohlc",
!0).attr("d",function(F,D){return D?"M-15,0H0M-8,-6V0":"M15,0H0M8,6V0"}).attr("transform","translate(20,0)").style("stroke-miterlimit",1);A.exit().remove();A.each(function(F,D){F=n.select(this);D=z[D?"increasing":"decreasing"];var u=y(void 0,D.line,5,2);F.style("fill","none").call(b.dashLine,D.line.dash,u);u&&k.stroke(F,D.line.color)})})}},{"../../lib":750,"../../registry":882,"../../traces/pie/helpers":1137,"../../traces/pie/style_one":1143,"../../traces/scatter/subtypes":1183,"../color":615,"../colorscale/helpers":626,
"../drawing":637,d3:169}],674:[function(a,G,C){function q(x,y){var A=y.currentTarget,z=A.getAttribute("data-attr");y=A.getAttribute("data-val")||!0;var F=x._fullLayout,D={},u=p.list(x,null,!0),B=F._cartesianSpikesEnabled,I;if("zoom"===z){z="in"===y?.5:2;A=(1+z)/2;var J=(1-z)/2;for(I=0;I<u.length;I++)if(z=u[I],!z.fixedrange){var N=z._name;if("auto"===y)D[N+".autorange"]=!0;else if("reset"===y){if(void 0===z._rangeInitial)D[N+".autorange"]=!0;else{var M=z._rangeInitial.slice();D[N+".range[0]"]=M[0];
D[N+".range[1]"]=M[1]}void 0!==z._showSpikeInitial&&(D[N+".showspikes"]=z._showSpikeInitial,"on"!==B||z._showSpikeInitial||(B="off"))}else M=[z.r2l(z.range[0]),z.r2l(z.range[1])],M=[A*M[0]+J*M[1],A*M[1]+J*M[0]],D[N+".range[0]"]=z.l2r(M[0]),D[N+".range[1]"]=z.l2r(M[1])}}else"hovermode"!==z||"x"!==y&&"y"!==y||(y=F._isHoriz?"y":"x",A.setAttribute("data-val",y)),D[z]=y;F._cartesianSpikesEnabled=B;g.call("_guiRelayout",x,D)}function n(x,y){y=y.currentTarget;var A=y.getAttribute("data-attr");y=y.getAttribute("data-val")||
!0;var z=x._fullLayout._subplots.gl3d||[],F={};A=A.split(".");for(var D=0;D<z.length;D++)F[z[D]+"."+A[1]]=y;F.dragmode="pan"===y?y:"zoom";g.call("_guiRelayout",x,F)}function m(x,y){var A=y.currentTarget.getAttribute("data-attr");y="resetLastSave"===A;A="resetDefault"===A;for(var z=x._fullLayout,F=z._subplots.gl3d||[],D={},u=0;u<F.length;u++){var B=F[u],I=B+".camera",J=B+".aspectratio",N=B+".aspectmode";B=z[B]._scene;if(y){D[I+".up"]=B.viewInitial.up;D[I+".eye"]=B.viewInitial.eye;D[I+".center"]=B.viewInitial.center;
var M=!0}else A&&(D[I+".up"]=null,D[I+".eye"]=null,D[I+".center"]=null,M=!0);M&&(D[J+".x"]=B.viewInitial.aspectratio.x,D[J+".y"]=B.viewInitial.aspectratio.y,D[J+".z"]=B.viewInitial.aspectratio.z,D[N]=B.viewInitial.aspectmode)}g.call("_guiRelayout",x,D)}function f(x,y){y=y.currentTarget;var A=y._previousVal;x=x._fullLayout;var z=x._subplots.gl3d||[],F=["xaxis","yaxis","zaxis"],D={},u={};if(A)u=A,y._previousVal=null;else{for(A=0;A<z.length;A++){var B=z[A],I=x[B],J=B+".hovermode";D[J]=I.hovermode;u[J]=
!1;for(J=0;3>J;J++){var N=F[J],M=B+"."+N+".showspikes";u[M]=!1;D[M]=I[N].showspikes}}y._previousVal=D}return u}function b(x,y){var A=y.currentTarget;y=A.getAttribute("data-attr");A=A.getAttribute("data-val")||!0;for(var z=x._fullLayout,F=z._subplots.geo||[],D=0;D<F.length;D++){var u=F[D],B=z[u];"zoom"===y&&(B=B.projection.scale,g.call("_guiRelayout",x,u+".projection.scale","in"===A?2*B:.5*B))}"reset"===y&&c(x,"geo")}function k(x){x=x._fullLayout;return x.hovermode?!1:x._has("cartesian")?x._isHoriz?
"y":"x":"closest"}function e(x){var y=k(x);g.call("_guiRelayout",x,"hovermode",y)}function h(x){var y="on"===x._fullLayout._cartesianSpikesEnabled;x=p.list(x,null,!0);for(var A={},z=0;z<x.length;z++){var F=x[z];A[F._name+".showspikes"]=y?!0:F._showSpikeInitial}return A}function l(x,y){y=y.currentTarget.getAttribute("data-val");for(var A=x._fullLayout,z=A._subplots.mapbox||[],F={},D=0;D<z.length;D++){var u=z[D],B=A[u].zoom;F[u+".zoom"]="in"===y?1.05*B:B/1.05}g.call("_guiRelayout",x,F)}function c(x,
y){var A=x._fullLayout;y=A._subplots[y]||[];for(var z={},F=0;F<y.length;F++)for(var D=y[F],u=A[D]._subplot.viewInitial,B=Object.keys(u),I=0;I<B.length;I++){var J=B[I];z[D+"."+J]=u[J]}g.call("_guiRelayout",x,z)}var g=a("../../registry"),d=a("../../plots/plots"),p=a("../../plots/cartesian/axis_ids");C=a("../../fonts/ploticon");var r=a("../shapes/draw").eraseActiveShape,t=a("../../lib"),w=t._;a=G.exports={};a.toImage={name:"toImage",title:function(x){return"png"===((x._context.toImageButtonOptions||
{}).format||"png")?w(x,"Download plot as a png"):w(x,"Download plot")},icon:C.camera,click:function(x){var y=x._context.toImageButtonOptions,A={format:y.format||"png"};t.notifier(w(x,"Taking snapshot - this may take a few seconds"),"long");"svg"!==A.format&&t.isIE()&&(t.notifier(w(x,"IE only supports svg.  Changing format to svg."),"long"),A.format="svg");["filename","width","height","scale"].forEach(function(z){z in y&&(A[z]=y[z])});g.call("downloadImage",x,A).then(function(z){t.notifier(w(x,"Snapshot succeeded")+
" - "+z,"long")}).catch(function(){t.notifier(w(x,"Sorry, there was a problem downloading your snapshot!"),"long")})}};a.sendDataToCloud={name:"sendDataToCloud",title:function(x){return w(x,"Edit in Chart Studio")},icon:C.disk,click:function(x){d.sendDataToCloud(x)}};a.editInChartStudio={name:"editInChartStudio",title:function(x){return w(x,"Edit in Chart Studio")},icon:C.pencil,click:function(x){d.sendDataToCloud(x)}};a.zoom2d={name:"zoom2d",title:function(x){return w(x,"Zoom")},attr:"dragmode",
val:"zoom",icon:C.zoombox,click:q};a.pan2d={name:"pan2d",title:function(x){return w(x,"Pan")},attr:"dragmode",val:"pan",icon:C.pan,click:q};a.select2d={name:"select2d",title:function(x){return w(x,"Box Select")},attr:"dragmode",val:"select",icon:C.selectbox,click:q};a.lasso2d={name:"lasso2d",title:function(x){return w(x,"Lasso Select")},attr:"dragmode",val:"lasso",icon:C.lasso,click:q};a.drawclosedpath={name:"drawclosedpath",title:function(x){return w(x,"Draw closed freeform")},attr:"dragmode",val:"drawclosedpath",
icon:C.drawclosedpath,click:q};a.drawopenpath={name:"drawopenpath",title:function(x){return w(x,"Draw open freeform")},attr:"dragmode",val:"drawopenpath",icon:C.drawopenpath,click:q};a.drawline={name:"drawline",title:function(x){return w(x,"Draw line")},attr:"dragmode",val:"drawline",icon:C.drawline,click:q};a.drawrect={name:"drawrect",title:function(x){return w(x,"Draw rectangle")},attr:"dragmode",val:"drawrect",icon:C.drawrect,click:q};a.drawcircle={name:"drawcircle",title:function(x){return w(x,
"Draw circle")},attr:"dragmode",val:"drawcircle",icon:C.drawcircle,click:q};a.eraseshape={name:"eraseshape",title:function(x){return w(x,"Erase active shape")},icon:C.eraseshape,click:r};a.zoomIn2d={name:"zoomIn2d",title:function(x){return w(x,"Zoom in")},attr:"zoom",val:"in",icon:C.zoom_plus,click:q};a.zoomOut2d={name:"zoomOut2d",title:function(x){return w(x,"Zoom out")},attr:"zoom",val:"out",icon:C.zoom_minus,click:q};a.autoScale2d={name:"autoScale2d",title:function(x){return w(x,"Autoscale")},
attr:"zoom",val:"auto",icon:C.autoscale,click:q};a.resetScale2d={name:"resetScale2d",title:function(x){return w(x,"Reset axes")},attr:"zoom",val:"reset",icon:C.home,click:q};a.hoverClosestCartesian={name:"hoverClosestCartesian",title:function(x){return w(x,"Show closest data on hover")},attr:"hovermode",val:"closest",icon:C.tooltip_basic,gravity:"ne",click:q};a.hoverCompareCartesian={name:"hoverCompareCartesian",title:function(x){return w(x,"Compare data on hover")},attr:"hovermode",val:function(x){return x._fullLayout._isHoriz?
"y":"x"},icon:C.tooltip_compare,gravity:"ne",click:q};a.zoom3d={name:"zoom3d",title:function(x){return w(x,"Zoom")},attr:"scene.dragmode",val:"zoom",icon:C.zoombox,click:n};a.pan3d={name:"pan3d",title:function(x){return w(x,"Pan")},attr:"scene.dragmode",val:"pan",icon:C.pan,click:n};a.orbitRotation={name:"orbitRotation",title:function(x){return w(x,"Orbital rotation")},attr:"scene.dragmode",val:"orbit",icon:C["3d_rotate"],click:n};a.tableRotation={name:"tableRotation",title:function(x){return w(x,
"Turntable rotation")},attr:"scene.dragmode",val:"turntable",icon:C["z-axis"],click:n};a.resetCameraDefault3d={name:"resetCameraDefault3d",title:function(x){return w(x,"Reset camera to default")},attr:"resetDefault",icon:C.home,click:m};a.resetCameraLastSave3d={name:"resetCameraLastSave3d",title:function(x){return w(x,"Reset camera to last save")},attr:"resetLastSave",icon:C.movie,click:m};a.hoverClosest3d={name:"hoverClosest3d",title:function(x){return w(x,"Toggle show closest data on hover")},attr:"hovermode",
val:null,toggle:!0,icon:C.tooltip_basic,gravity:"ne",click:function(x,y){y=f(x,y);g.call("_guiRelayout",x,y)}};a.zoomInGeo={name:"zoomInGeo",title:function(x){return w(x,"Zoom in")},attr:"zoom",val:"in",icon:C.zoom_plus,click:b};a.zoomOutGeo={name:"zoomOutGeo",title:function(x){return w(x,"Zoom out")},attr:"zoom",val:"out",icon:C.zoom_minus,click:b};a.resetGeo={name:"resetGeo",title:function(x){return w(x,"Reset")},attr:"reset",val:null,icon:C.autoscale,click:b};a.hoverClosestGeo={name:"hoverClosestGeo",
title:function(x){return w(x,"Toggle show closest data on hover")},attr:"hovermode",val:null,toggle:!0,icon:C.tooltip_basic,gravity:"ne",click:e};a.hoverClosestGl2d={name:"hoverClosestGl2d",title:function(x){return w(x,"Toggle show closest data on hover")},attr:"hovermode",val:null,toggle:!0,icon:C.tooltip_basic,gravity:"ne",click:e};a.hoverClosestPie={name:"hoverClosestPie",title:function(x){return w(x,"Toggle show closest data on hover")},attr:"hovermode",val:"closest",icon:C.tooltip_basic,gravity:"ne",
click:e};a.resetViewSankey={name:"resetSankeyGroup",title:function(x){return w(x,"Reset view")},icon:C.home,click:function(x){for(var y={"node.groups":[],"node.x":[],"node.y":[]},A=0;A<x._fullData.length;A++){var z=x._fullData[A]._viewInitial;y["node.groups"].push(z.node.groups.slice());y["node.x"].push(z.node.x.slice());y["node.y"].push(z.node.y.slice())}g.call("restyle",x,y)}};a.toggleHover={name:"toggleHover",title:function(x){return w(x,"Toggle show closest data on hover")},attr:"hovermode",val:null,
toggle:!0,icon:C.tooltip_basic,gravity:"ne",click:function(x,y){y=f(x,y);y.hovermode=k(x);g.call("_guiRelayout",x,y)}};a.resetViews={name:"resetViews",title:function(x){return w(x,"Reset views")},icon:C.home,click:function(x,y){var A=y.currentTarget;A.setAttribute("data-attr","zoom");A.setAttribute("data-val","reset");q(x,y);A.setAttribute("data-attr","resetLastSave");m(x,y);c(x,"geo");c(x,"mapbox")}};a.toggleSpikelines={name:"toggleSpikelines",title:function(x){return w(x,"Toggle Spike Lines")},
icon:C.spikeline,attr:"_cartesianSpikesEnabled",val:"on",click:function(x){var y=x._fullLayout;y._cartesianSpikesEnabled="on"===y._cartesianSpikesEnabled?"off":"on";g.call("_guiRelayout",x,h(x))}};a.resetViewMapbox={name:"resetViewMapbox",title:function(x){return w(x,"Reset view")},attr:"reset",icon:C.home,click:function(x){c(x,"mapbox")}};a.zoomInMapbox={name:"zoomInMapbox",title:function(x){return w(x,"Zoom in")},attr:"zoom",val:"in",icon:C.zoom_plus,click:l};a.zoomOutMapbox={name:"zoomOutMapbox",
title:function(x){return w(x,"Zoom out")},attr:"zoom",val:"out",icon:C.zoom_minus,click:l}},{"../../fonts/ploticon":729,"../../lib":750,"../../plots/cartesian/axis_ids":802,"../../plots/plots":862,"../../registry":882,"../shapes/draw":696}],675:[function(a,G,C){C.manage=a("./manage")},{"./manage":676}],676:[function(a,G,C){function q(p){function r(T){if(T.length){for(var V=[],X=0;X<T.length;X++){var ba=T[X];-1===y.indexOf(ba)&&V.push(g[ba])}Q.push(V)}}var t=p._fullLayout,w=p._fullData,x=p._context,
y=x.modeBarButtonsToRemove;p=x.modeBarButtonsToAdd;var A=t._has("cartesian"),z=t._has("gl3d"),F=t._has("geo"),D=t._has("pie"),u=t._has("funnelarea"),B=t._has("gl2d"),I=t._has("ternary"),J=t._has("mapbox"),N=t._has("polar"),M=t._has("sankey"),E=n(t),L=l(t.hovermode),Q=[],S=["toImage"];x.showEditInChartStudio?S.push("editInChartStudio"):x.showSendToCloud&&S.push("sendDataToCloud");r(S);x=[];S=[];var R=[],O=[];1<(A||B||D||u||I)+F+z+J+N?(S=["toggleHover"],R=["resetViews"]):F?(x=["zoomInGeo","zoomOutGeo"],
S=["hoverClosestGeo"],R=["resetGeo"]):z?(S=["hoverClosest3d"],R=["resetCameraDefault3d","resetCameraLastSave3d"]):J?(x=["zoomInMapbox","zoomOutMapbox"],S=["toggleHover"],R=["resetViewMapbox"]):B?S=["hoverClosestGl2d"]:D?S=["hoverClosestPie"]:M?(S=["hoverClosestCartesian","hoverCompareCartesian"],R=["resetViewSankey"]):S=["toggleHover"];A&&(S=["toggleSpikelines","hoverClosestCartesian","hoverCompareCartesian"]);if(f(w)||L)S=[];!A&&!B||E||(x=["zoomIn2d","zoomOut2d","autoScale2d"],"resetViews"!==R[0]&&
(R=["resetScale2d"]));z?O=["zoom3d","pan3d","orbitRotation","tableRotation"]:(A||B)&&!E||I?O=["zoom2d","pan2d"]:J||F?O=["pan2d"]:N&&(O=["zoom2d"]);m(w)&&O.push("select2d","lasso2d");if(Array.isArray(p)){w=[];for(A=0;A<p.length;A++)z=p[A],"string"===typeof z?-1!==d.indexOf(z)&&(t._has("mapbox")||t._has("cartesian"))&&O.push(z):w.push(z);p=w}r(O);r(x.concat(R));r(S);return b(Q,p)}function n(p){p=k.list({_fullLayout:p},null,!0);for(var r=0;r<p.length;r++)if(!p[r].fixedrange)return!1;return!0}function m(p){for(var r=
!1,t=0;t<p.length&&!r;t++){var w=p[t];if(w._module&&w._module.selectPoints)if(h.traceIs(w,"scatter-like")){if(e.hasMarkers(w)||e.hasText(w))r=!0}else if(h.traceIs(w,"box-violin")){if("all"===w.boxpoints||"all"===w.points)r=!0}else r=!0}return r}function f(p){for(var r=0;r<p.length;r++)if(!h.traceIs(p[r],"noHover"))return!1;return!0}function b(p,r){if(r.length)if(Array.isArray(r[0]))for(var t=0;t<r.length;t++)p.push(r[t]);else p.push(r);return p}var k=a("../../plots/cartesian/axis_ids"),e=a("../../traces/scatter/subtypes"),
h=a("../../registry"),l=a("../fx/helpers").isUnifiedHover,c=a("./modebar"),g=a("./buttons");G.exports=function(p){var r=p._fullLayout,t=p._context,w=r._modeBar;if(t.displayModeBar||t.watermark){if(!Array.isArray(t.modeBarButtonsToRemove))throw Error("*modeBarButtonsToRemove* configuration options must be an array.");if(!Array.isArray(t.modeBarButtonsToAdd))throw Error("*modeBarButtonsToAdd* configuration options must be an array.");var x=t.modeBarButtons;if(Array.isArray(x)&&x.length)for(t=0;t<x.length;t++)for(var y=
x[t],A=0;A<y.length;A++){var z=y[A];if("string"===typeof z)if(void 0!==g[z])x[t][A]=g[z];else throw Error("*modeBarButtons* configuration options invalid button name");}else x=!t.displayModeBar&&t.watermark?[]:q(p);w?w.update(p,x):r._modeBar=c(p,x)}else w&&(w.destroy(),delete r._modeBar)};var d="drawline drawopenpath drawclosedpath drawcircle drawrect eraseshape".split(" ")},{"../../plots/cartesian/axis_ids":802,"../../registry":882,"../../traces/scatter/subtypes":1183,"../fx/helpers":651,"./buttons":674,
"./modebar":677}],677:[function(a,G,C){function q(e){this.container=e.container;this.element=document.createElement("div");this.update(e.graphInfo,e.buttons);this.container.appendChild(this.element)}var n=a("d3"),m=a("fast-isnumeric"),f=a("../../lib"),b=a("../../fonts/ploticon"),k=new DOMParser;a=q.prototype;a.update=function(e,h){this.graphInfo=e;e=this.graphInfo._context;var l=this.graphInfo._fullLayout,c="modebar-"+l._uid;this.element.setAttribute("id",c);this._uid=c;this.element.className="modebar";
"hover"===e.displayModeBar&&(this.element.className+=" modebar--hover ease-bg");"v"===l.modebar.orientation&&(this.element.className+=" vertical",h=h.reverse());var g=l.modebar,d="hover"===e.displayModeBar?".js-plotly-plot .plotly:hover ":"";f.deleteRelatedStyleRule(c);f.addRelatedStyleRule(c,d+"#"+c+" .modebar-group","background-color: "+g.bgcolor);f.addRelatedStyleRule(c,"#"+c+" .modebar-btn .icon path","fill: "+g.color);f.addRelatedStyleRule(c,"#"+c+" .modebar-btn:hover .icon path","fill: "+g.activecolor);
f.addRelatedStyleRule(c,"#"+c+" .modebar-btn.active .icon path","fill: "+g.activecolor);c=!this.hasButtons(h);g=this.hasLogo!==e.displaylogo;d=this.locale!==e.locale;this.locale=e.locale;if(c||g||d)if(this.removeAllButtons(),this.updateButtons(h),e.watermark||e.displaylogo)h=this.getLogo(),e.watermark&&(h.className+=" watermark"),"v"===l.modebar.orientation?this.element.insertBefore(h,this.element.childNodes[0]):this.element.appendChild(h),this.hasLogo=!0;this.updateActiveButton()};a.updateButtons=
function(e){var h=this;this.buttons=e;this.buttonElements=[];this.buttonsNames=[];this.buttons.forEach(function(l){var c=h.createGroup();l.forEach(function(g){var d=g.name;if(!d)throw Error("must provide button 'name' in button config");if(-1!==h.buttonsNames.indexOf(d))throw Error("button name '"+d+"' is taken");h.buttonsNames.push(d);g=h.createButton(g);h.buttonElements.push(g);c.appendChild(g)});h.element.appendChild(c)})};a.createGroup=function(){var e=document.createElement("div");e.className=
"modebar-group";return e};a.createButton=function(e){var h=this,l=document.createElement("a");l.setAttribute("rel","tooltip");l.className="modebar-btn";var c=e.title;void 0===c?c=e.name:"function"===typeof c&&(c=c(this.graphInfo));(c||0===c)&&l.setAttribute("data-title",c);void 0!==e.attr&&l.setAttribute("data-attr",e.attr);c=e.val;void 0!==c&&("function"===typeof c&&(c=c(this.graphInfo)),l.setAttribute("data-val",c));if("function"!==typeof e.click)throw Error("must provide button 'click' function in button config");
l.addEventListener("click",function(g){e.click(h.graphInfo,g);h.updateActiveButton(g.currentTarget)});l.setAttribute("data-toggle",e.toggle||!1);e.toggle&&n.select(l).classed("active",!0);c=e.icon;"function"===typeof c?l.appendChild(c()):l.appendChild(this.createIcon(c||b.question));l.setAttribute("data-gravity",e.gravity||"n");return l};a.createIcon=function(e){var h=m(e.height)?Number(e.height):e.ascent-e.descent;if(e.path){var l=document.createElementNS("http://www.w3.org/2000/svg","svg");l.setAttribute("viewBox",
[0,0,e.width,h].join(" "));l.setAttribute("class","icon");h=document.createElementNS("http://www.w3.org/2000/svg","path");h.setAttribute("d",e.path);e.transform?h.setAttribute("transform",e.transform):void 0!==e.ascent&&h.setAttribute("transform","matrix(1 0 0 -1 0 "+e.ascent+")");l.appendChild(h)}e.svg&&(l=k.parseFromString(e.svg,"application/xml").childNodes[0]);l.setAttribute("height","1em");l.setAttribute("width","1em");return l};a.updateActiveButton=function(e){var h=this.graphInfo._fullLayout,
l=void 0!==e?e.getAttribute("data-attr"):null;this.buttonElements.forEach(function(c){var g=c.getAttribute("data-val")||!0,d=c.getAttribute("data-attr"),p="true"===c.getAttribute("data-toggle");c=n.select(c);p?d===l&&c.classed("active",!c.classed("active")):(d=null===d?d:f.nestedProperty(h,d).get(),c.classed("active",d===g))})};a.hasButtons=function(e){var h=this.buttons;if(!h||e.length!==h.length)return!1;for(var l=0;l<e.length;++l){if(e[l].length!==h[l].length)return!1;for(var c=0;c<e[l].length;c++)if(e[l][c].name!==
h[l][c].name)return!1}return!0};a.getLogo=function(){var e=this.createGroup(),h=document.createElement("a");h.href="https://plotly.com/";h.target="_blank";h.setAttribute("data-title",f._(this.graphInfo,"Produced with Plotly"));h.className="modebar-btn plotlyjsicon modebar-btn--logo";h.appendChild(this.createIcon(b.newplotlylogo));e.appendChild(h);return e};a.removeAllButtons=function(){for(;this.element.firstChild;)this.element.removeChild(this.element.firstChild);this.hasLogo=!1};a.destroy=function(){f.removeElement(this.container.querySelector(".modebar"));
f.deleteRelatedStyleRule(this._uid)};G.exports=function(e,h){var l=e._fullLayout;e=new q({graphInfo:e,container:l._modebardiv.node(),buttons:h});l._privateplot&&n.select(e.element).append("span").classed("badge-private float--left",!0).text("PRIVATE");return e}},{"../../fonts/ploticon":729,"../../lib":750,d3:169,"fast-isnumeric":241}],678:[function(a,G,C){C=a("../../plots/font_attributes");var q=a("../color/attributes");a=a("../../plot_api/plot_template").templatedArray;a=a("button",{visible:{valType:"boolean",
dflt:!0,editType:"plot"},step:{valType:"enumerated",values:"month year day hour minute second all".split(" "),dflt:"month",editType:"plot"},stepmode:{valType:"enumerated",values:["backward","todate"],dflt:"backward",editType:"plot"},count:{valType:"number",min:0,dflt:1,editType:"plot"},label:{valType:"string",editType:"plot"},editType:"plot"});G.exports={visible:{valType:"boolean",editType:"plot"},buttons:a,x:{valType:"number",min:-2,max:3,editType:"plot"},xanchor:{valType:"enumerated",values:["auto",
"left","center","right"],dflt:"left",editType:"plot"},y:{valType:"number",min:-2,max:3,editType:"plot"},yanchor:{valType:"enumerated",values:["auto","top","middle","bottom"],dflt:"bottom",editType:"plot"},font:C({editType:"plot"}),bgcolor:{valType:"color",dflt:q.lightLine,editType:"plot"},activecolor:{valType:"color",editType:"plot"},bordercolor:{valType:"color",dflt:q.defaultLine,editType:"plot"},borderwidth:{valType:"number",min:0,dflt:0,editType:"plot"},editType:"plot"}},{"../../plot_api/plot_template":788,
"../../plots/font_attributes":827,"../color/attributes":614}],679:[function(a,G,C){G.exports={yPad:.02,minButtonWidth:30,rx:3,ry:3,lightAmount:25,darkAmount:10}},{}],680:[function(a,G,C){function q(l,c,g,d){function p(r,t){return m.coerce(l,c,e.buttons,r,t)}g=d.calendar;p("visible")&&(d=p("step"),"all"!==d&&(!g||"gregorian"===g||"month"!==d&&"year"!==d?p("stepmode"):c.stepmode="backward",p("count")),p("label"))}function n(l,c,g){g=g.filter(function(t){return c[t].anchor===l._id});for(var d=0,p=0;p<
g.length;p++){var r=c[g[p]].domain;r&&(d=Math.max(r[1],d))}return[l.domain[0],d+h.yPad]}var m=a("../../lib"),f=a("../color"),b=a("../../plot_api/plot_template"),k=a("../../plots/array_container_defaults"),e=a("./attributes"),h=a("./constants");G.exports=function(l,c,g,d,p){function r(x,y){return m.coerce(t,w,e,x,y)}var t=l.rangeselector||{},w=b.newContainer(c,"rangeselector");p=k(t,w,{name:"buttons",handleItemDefaults:q,calendar:p});r("visible",0<p.length)&&(d=n(c,g,d),r("x",d[0]),r("y",d[1]),m.noneOrAll(l,
c,["x","y"]),r("xanchor"),r("yanchor"),m.coerceFont(r,"font",g.font),l=r("bgcolor"),r("activecolor",f.contrast(l,h.lightAmount,h.darkAmount)),r("bordercolor"),r("borderwidth"))}},{"../../lib":750,"../../plot_api/plot_template":788,"../../plots/array_container_defaults":794,"../color":615,"./attributes":678,"./constants":679}],681:[function(a,G,C){function q(F){F=t.list(F,"x",!0);for(var D=[],u=0;u<F.length;u++){var B=F[u];B.rangeselector&&B.rangeselector.visible&&D.push(B)}return D}function n(F){return F._id}
function m(F,D,u){if("all"===D.step)return!0===F.autorange;D=Object.keys(u);return F.range[0]===u[D[0]]&&F.range[1]===u[D[1]]}function f(F,D,u){F=p.ensureSingle(F,"rect","selector-rect",function(B){B.attr("shape-rendering","crispEdges")});F.attr({rx:A.rx,ry:A.ry});F.call(g.stroke,D.bordercolor).call(g.fill,u._isActive||u._isHovered?D.activecolor:D.bgcolor).style("stroke-width",D.borderwidth+"px")}function b(F,D,u,B){p.ensureSingle(F,"text","selector-text",function(I){I.attr("text-anchor","middle")}).call(d.font,
D.font).text(k(u,B._fullLayout._meta)).call(function(I){r.convertToTspans(I,B)})}function k(F,D){return F.label?D?p.templateString(F.label,D):F.label:"all"===F.step?"all":F.count+F.step.charAt(0)}function e(F,D,u,B,I){var J=0,N=0,M=u.borderwidth;D.each(function(){var S=h.select(this).select(".selector-text");S=Math.max(u.font.size*w*r.lineCount(S),16)+3;N=Math.max(N,S)});D.each(function(){var S=h.select(this),R=S.select(".selector-rect"),O=S.select(".selector-text"),T=O.node()&&d.bBox(O.node()).width,
V=u.font.size*w,X=r.lineCount(O);T=Math.max(T+10,A.minButtonWidth);S.attr("transform","translate("+(M+J)+","+M+")");R.attr({x:0,y:0,width:T,height:N});r.positionText(O,T/2,N/2-(X-1)*V/2+3);J+=T+5});var E=F._fullLayout._size;D=E.l+E.w*u.x;E=E.t+E.h*(1-u.y);var L="left";p.isRightAnchor(u)&&(D-=J,L="right");p.isCenterAnchor(u)&&(D-=J/2,L="center");var Q="top";p.isBottomAnchor(u)&&(E-=N,Q="bottom");p.isMiddleAnchor(u)&&(E-=N/2,Q="middle");J=Math.ceil(J);N=Math.ceil(N);D=Math.round(D);E=Math.round(E);
c.autoMargin(F,B+"-range-selector",{x:u.x,y:u.y,l:J*x[L],r:J*y[L],b:N*y[Q],t:N*x[Q]});I.attr("transform","translate("+D+","+E+")")}var h=a("d3"),l=a("../../registry"),c=a("../../plots/plots"),g=a("../color"),d=a("../drawing"),p=a("../../lib"),r=a("../../lib/svg_text_utils"),t=a("../../plots/cartesian/axis_ids");C=a("../../constants/alignment");var w=C.LINE_SPACING,x=C.FROM_TL,y=C.FROM_BR,A=a("./constants"),z=a("./get_update_object");G.exports=function(F){var D=F._fullLayout._infolayer.selectAll(".rangeselector").data(q(F),
n);D.enter().append("g").classed("rangeselector",!0);D.exit().remove();D.style({cursor:"pointer","pointer-events":"all"});D.each(function(u){var B=h.select(this),I=u.rangeselector,J=B.selectAll("g.button").data(p.filterVisible(I.buttons));J.enter().append("g").classed("button",!0);J.exit().remove();J.each(function(N){var M=h.select(this),E=z(u,N);N._isActive=m(u,N,E);M.call(f,I,N);M.call(b,I,N,F);M.on("click",function(){F._dragged||l.call("_guiRelayout",F,E)});M.on("mouseover",function(){N._isHovered=
!0;M.call(f,I,N)});M.on("mouseout",function(){N._isHovered=!1;M.call(f,I,N)})});e(F,J,I,u._name,B)})}},{"../../constants/alignment":717,"../../lib":750,"../../lib/svg_text_utils":774,"../../plots/cartesian/axis_ids":802,"../../plots/plots":862,"../../registry":882,"../color":615,"../drawing":637,"./constants":679,"./get_update_object":682,d3:169}],682:[function(a,G,C){var q=a("d3");G.exports=function(n,m){var f=n._name,b={};if("all"===m.step)b[f+".autorange"]=!0;else{var k=n.range,e=new Date(n.r2l(k[1])),
h=m.step,l=m.count;switch(m.stepmode){case "backward":var c=n.l2r(+q.time[h].utc.offset(e,-l));break;case "todate":m=q.time[h].utc.offset(e,-l),c=n.l2r(+q.time[h].utc.ceil(m))}n=[c,k[1]];b[f+".range[0]"]=n[0];b[f+".range[1]"]=n[1]}return b}},{d3:169}],683:[function(a,G,C){G.exports={moduleType:"component",name:"rangeselector",schema:{subplots:{xaxis:{rangeselector:a("./attributes")}}},layoutAttributes:a("./attributes"),handleDefaults:a("./defaults"),draw:a("./draw")}},{"./attributes":678,"./defaults":680,
"./draw":681}],684:[function(a,G,C){a=a("../color/attributes");G.exports={bgcolor:{valType:"color",dflt:a.background,editType:"plot"},bordercolor:{valType:"color",dflt:a.defaultLine,editType:"plot"},borderwidth:{valType:"integer",dflt:0,min:0,editType:"plot"},autorange:{valType:"boolean",dflt:!0,editType:"calc",impliedEdits:{"range[0]":void 0,"range[1]":void 0}},range:{valType:"info_array",items:[{valType:"any",editType:"calc",impliedEdits:{"^autorange":!1}},{valType:"any",editType:"calc",impliedEdits:{"^autorange":!1}}],
editType:"calc",impliedEdits:{autorange:!1}},thickness:{valType:"number",dflt:.15,min:0,max:1,editType:"plot"},visible:{valType:"boolean",dflt:!0,editType:"calc"},editType:"calc"}},{"../color/attributes":614}],685:[function(a,G,C){var q=a("../../plots/cartesian/axis_ids").list,n=a("../../plots/cartesian/autorange").getAutoRange,m=a("./constants");G.exports=function(f){for(var b=q(f,"x",!0),k=0;k<b.length;k++){var e=b[k],h=e[m.name];h&&h.visible&&h.autorange&&(h._input.autorange=!0,h._input.range=
h.range=n(f,e))}}},{"../../plots/cartesian/autorange":798,"../../plots/cartesian/axis_ids":802,"./constants":686}],686:[function(a,G,C){G.exports={name:"rangeslider",containerClassName:"rangeslider-container",bgClassName:"rangeslider-bg",rangePlotClassName:"rangeslider-rangeplot",maskMinClassName:"rangeslider-mask-min",maskMaxClassName:"rangeslider-mask-max",slideBoxClassName:"rangeslider-slidebox",grabberMinClassName:"rangeslider-grabber-min",grabAreaMinClassName:"rangeslider-grabarea-min",handleMinClassName:"rangeslider-handle-min",
grabberMaxClassName:"rangeslider-grabber-max",grabAreaMaxClassName:"rangeslider-grabarea-max",handleMaxClassName:"rangeslider-handle-max",maskMinOppAxisClassName:"rangeslider-mask-min-opp-axis",maskMaxOppAxisClassName:"rangeslider-mask-max-opp-axis",maskColor:"rgba(0,0,0,0.4)",maskOppAxisColor:"rgba(0,0,0,0.2)",slideBoxFill:"transparent",slideBoxCursor:"ew-resize",grabAreaFill:"transparent",grabAreaCursor:"col-resize",grabAreaWidth:10,handleWidth:4,handleRadius:1,handleStrokeWidth:1,extraPad:15}},
{}],687:[function(a,G,C){var q=a("../../lib"),n=a("../../plot_api/plot_template"),m=a("../../plots/cartesian/axis_ids"),f=a("./attributes"),b=a("./oppaxis_attributes");G.exports=function(k,e,h){function l(y,A){return q.coerce(d,p,f,y,A)}function c(y,A){return q.coerce(t,w,b,y,A)}k=k[h];var g=e[h];if(k.rangeslider||e._requestRangeslider[g._id]){q.isPlainObject(k.rangeslider)||(k.rangeslider={});var d=k.rangeslider,p=n.newContainer(g,"rangeslider");if(l("visible")){l("bgcolor",e.plot_bgcolor);l("bordercolor");
l("borderwidth");l("thickness");l("autorange",!g.isValidRange(d.range));l("range");if(k=e._subplots)for(k=k.cartesian.filter(function(y){return y.substr(0,y.indexOf("y"))===m.name2id(h)}).map(function(y){return y.substr(y.indexOf("y"),y.length)}),k=q.simpleMap(k,m.id2name),g=0;g<k.length;g++){var r=k[g];var t=d[r]||{};var w=n.newContainer(p,r,"yaxis");r=e[r];var x;t.range&&r.isValidRange(t.range)&&(x="fixed");"match"!==c("rangemode",x)&&c("range",r.range.slice())}p._input=d}}}},{"../../lib":750,"../../plot_api/plot_template":788,
"../../plots/cartesian/axis_ids":802,"./attributes":684,"./oppaxis_attributes":691}],688:[function(a,G,C){function q(u,B,I,J){function N(){function Q(ka){var ha=+(ka.clientX||ka.touches[0].clientX)-T;switch(O){case M:var ca="ew-resize";ka=X+ha;ha=ba+ha;break;case E:ca="col-resize";ka=X+ha;ha=ba;break;case L:ca="col-resize";ka=X;ha=ba+ha;break;default:ca="ew-resize",ka=V,ha=V+ha}if(ha<ka){var sa=ha;ha=ka;ka=sa}J._pixelMin=ka;J._pixelMax=ha;F(g.select(aa),ca);n(u,B,I,J)}function S(){aa.removeEventListener("mousemove",
Q);aa.removeEventListener("mouseup",S);this.removeEventListener("touchmove",Q);this.removeEventListener("touchend",S);r.removeElement(aa)}var R=g.event,O=R.target,T=R.clientX||R.touches[0].clientX,V=T-u.node().getBoundingClientRect().left,X=J.d2p(I._rl[0]),ba=J.d2p(I._rl[1]),aa=z.coverSlip();this.addEventListener("touchmove",Q);this.addEventListener("touchend",S);aa.addEventListener("mousemove",Q);aa.addEventListener("mouseup",S)}var M=u.select("rect."+D.slideBoxClassName).node(),E=u.select("rect."+
D.grabAreaMinClassName).node(),L=u.select("rect."+D.grabAreaMaxClassName).node();u.on("mousedown",N);u.on("touchstart",N)}function n(u,B,I,J){var N=I.l2r(r.constrain(J.p2d(J._pixelMin),J._rl[0],J._rl[1])),M=I.l2r(r.constrain(J.p2d(J._pixelMax),J._rl[0],J._rl[1]));window.requestAnimationFrame(function(){d.call("_guiRelayout",B,I._name+".range",[N,M])})}function m(u,B,I,J,N,M){B=D.handleWidth/2;var E=r.constrain(J.d2p(I._rl[0]),0,J._width);I=r.constrain(J.d2p(I._rl[1]),0,J._width);u.select("rect."+
D.slideBoxClassName).attr("x",E).attr("width",I-E);u.select("rect."+D.maskMinClassName).attr("width",E);u.select("rect."+D.maskMaxClassName).attr("x",I).attr("width",J._width-I);"match"!==M.rangemode&&(M=J._height-r.constrain(J.d2pOppAxis(N._rl[1]),0,J._height),N=J._height-r.constrain(J.d2pOppAxis(N._rl[0]),0,J._height),u.select("rect."+D.maskMinOppAxisClassName).attr("x",E).attr("height",M).attr("width",I-E),u.select("rect."+D.maskMaxOppAxisClassName).attr("x",E).attr("y",N).attr("height",J._height-
N).attr("width",I-E),u.select("rect."+D.slideBoxClassName).attr("y",M).attr("height",N-M));N=Math.round(r.constrain(E-B,-B,J._width+B))-.5;J=Math.round(r.constrain(I-B,-B,J._width+B))+.5;u.select("g."+D.grabberMinClassName).attr("transform","translate("+N+",0.5)");u.select("g."+D.grabberMaxClassName).attr("transform","translate("+J+",0.5)")}function f(u,B,I,J){u=r.ensureSingle(u,"rect",D.bgClassName,function(M){M.attr({x:0,y:0,"shape-rendering":"crispEdges"})});I=0===J.borderwidth%2?J.borderwidth:
J.borderwidth-1;var N=-J._offsetShift;B=t.crispRound(B,J.borderwidth);u.attr({width:J._width+I,height:J._height+I,transform:"translate("+N+","+N+")",fill:J.bgcolor,stroke:J.bordercolor,"stroke-width":B})}function b(u,B,I,J){r.ensureSingleById(B._fullLayout._topdefs,"clipPath",J._clipId,function(N){N.append("rect").attr({x:0,y:0})}).select("rect").attr({width:J._width,height:J._height})}function k(u,B,I,J){var N=B.calcdata;u=u.selectAll("g."+D.rangePlotClassName).data(I._subplotsWith,r.identity);u.enter().append("g").attr("class",
function(E){return D.rangePlotClassName+" "+E}).call(t.setClipUrl,J._clipId,B);u.order();u.exit().remove();var M;u.each(function(E,L){var Q=g.select(this);L=0===L;var S=A.getFromId(B,E,"y"),R=S._name,O=J[R],T={data:[],layout:{xaxis:{type:I.type,domain:[0,1],range:J.range.slice(),calendar:I.calendar},width:J._width,height:J._height,margin:{t:0,b:0,l:0,r:0}},_context:B._context};I.rangebreaks&&(T.layout.xaxis.rangebreaks=I.rangebreaks);T.layout[R]={type:S.type,domain:[0,1],range:"match"!==O.rangemode?
O.range.slice():S.range.slice(),calendar:S.calendar};S.rangebreaks&&(T.layout[R].rangebreaks=S.rangebreaks);p.supplyDefaults(T);S=T._fullLayout.xaxis;R=T._fullLayout[R];S.clearCalc();S.setScale();R.clearCalc();R.setScale();Q={id:E,plotgroup:Q,xaxis:S,yaxis:R,isRangePlot:!0};L?M=Q:(Q.mainplot="xy",Q.mainplotinfo=M);y.rangePlot(B,Q,e(N,E))})}function e(u,B){for(var I=[],J=0;J<u.length;J++){var N=u[J],M=N[0].trace;M.xaxis+M.yaxis===B&&I.push(N)}return I}function h(u,B,I,J,N){r.ensureSingle(u,"rect",
D.maskMinClassName,function(M){M.attr({x:0,y:0,"shape-rendering":"crispEdges"})}).attr("height",J._height).call(w.fill,D.maskColor);r.ensureSingle(u,"rect",D.maskMaxClassName,function(M){M.attr({y:0,"shape-rendering":"crispEdges"})}).attr("height",J._height).call(w.fill,D.maskColor);"match"!==N.rangemode&&(r.ensureSingle(u,"rect",D.maskMinOppAxisClassName,function(M){M.attr({y:0,"shape-rendering":"crispEdges"})}).attr("width",J._width).call(w.fill,D.maskOppAxisColor),r.ensureSingle(u,"rect",D.maskMaxOppAxisClassName,
function(M){M.attr({y:0,"shape-rendering":"crispEdges"})}).attr("width",J._width).style("border-top",D.maskOppBorder).call(w.fill,D.maskOppAxisColor))}function l(u,B,I,J){B._context.staticPlot||r.ensureSingle(u,"rect",D.slideBoxClassName,function(N){N.attr({y:0,cursor:D.slideBoxCursor,"shape-rendering":"crispEdges"})}).attr({height:J._height,fill:D.slideBoxFill})}function c(u,B,I,J){I=r.ensureSingle(u,"g",D.grabberMinClassName);u=r.ensureSingle(u,"g",D.grabberMaxClassName);var N={x:0,width:D.handleWidth,
rx:D.handleRadius,fill:w.background,stroke:w.defaultLine,"stroke-width":D.handleStrokeWidth,"shape-rendering":"crispEdges"},M={y:Math.round(J._height/4),height:Math.round(J._height/2)};r.ensureSingle(I,"rect",D.handleMinClassName,function(L){L.attr(N)}).attr(M);r.ensureSingle(u,"rect",D.handleMaxClassName,function(L){L.attr(N)}).attr(M);if(!B._context.staticPlot){var E={width:D.grabAreaWidth,x:0,y:0,fill:D.grabAreaFill,cursor:D.grabAreaCursor};r.ensureSingle(I,"rect",D.grabAreaMinClassName,function(L){L.attr(E)}).attr("height",
J._height);r.ensureSingle(u,"rect",D.grabAreaMaxClassName,function(L){L.attr(E)}).attr("height",J._height)}}var g=a("d3"),d=a("../../registry"),p=a("../../plots/plots"),r=a("../../lib"),t=a("../drawing"),w=a("../color"),x=a("../titles"),y=a("../../plots/cartesian"),A=a("../../plots/cartesian/axis_ids"),z=a("../dragelement"),F=a("../../lib/setcursor"),D=a("./constants");G.exports=function(u){for(var B=u._fullLayout,I=B._rangeSliderData,J=0;J<I.length;J++){var N=I[J][D.name];N._clipId=N._id+"-"+B._uid}J=
B._infolayer.selectAll("g."+D.containerClassName).data(I,function(M){return M._name});J.exit().each(function(M){B._topdefs.select("#"+M[D.name]._clipId).remove()}).remove();0!==I.length&&(J.enter().append("g").classed(D.containerClassName,!0).attr("pointer-events","all"),J.each(function(M){var E=g.select(this),L=M[D.name],Q=B[A.id2name(M.anchor)],S=L[A.id2name(M.anchor)];if(L.range){var R=r.simpleMap(L.range,M.r2l),O=r.simpleMap(M.range,M.r2l);L.range=L._input.range=r.simpleMap(O[0]<O[1]?[Math.min(R[0],
O[0]),Math.max(R[1],O[1])]:[Math.max(R[0],O[0]),Math.min(R[1],O[1])],M.l2r)}M.cleanRange("rangeslider.range");O=B._size;var T=M.domain;L._width=O.w*(T[1]-T[0]);R=Math.round(O.t+O.h*(1-M._counterDomainMin)+("bottom"===M.side?M._depth:0)+L._offsetShift+D.extraPad);E.attr("transform","translate("+Math.round(O.l+O.w*T[0])+","+R+")");L._rl=r.simpleMap(L.range,M.r2l);var V=L._rl[0];O=L._rl[1];var X=O-V;L.p2d=function(ra){return ra/L._width*X+V};L.d2p=function(ra){return(ra-V)/X*L._width};if(M.rangebreaks){var ba=
M.locateBreaks(V,O);if(ba.length){var aa=0;for(T=0;T<ba.length;T++){var ka=ba[T];aa+=ka.max-ka.min}var ha=L._width/(O-V-aa),ca=[-ha*V];for(T=0;T<ba.length;T++)ka=ba[T],ca.push(ca[ca.length-1]-ha*(ka.max-ka.min));L.d2p=function(ra){for(var qa=ca[0],Y=0;Y<ba.length;Y++){var pa=ba[Y];if(ra>=pa.max)qa=ca[Y+1];else if(ra<pa.min)break}return qa+ha*ra};for(T=0;T<ba.length;T++)ka=ba[T],ka.pmin=L.d2p(ka.min),ka.pmax=L.d2p(ka.max);L.p2d=function(ra){for(var qa=ca[0],Y=0;Y<ba.length;Y++){var pa=ba[Y];if(ra>=
pa.pmax)qa=ca[Y+1];else if(ra<pa.pmin)break}return(ra-qa)/ha}}}if("match"!==S.rangemode){var sa=Q.r2l(S.range[0]),ma=Q.r2l(S.range[1])-sa;L.d2pOppAxis=function(ra){return(ra-sa)/ma*L._height}}E.call(f,u,M,L).call(b,u,M,L).call(k,u,M,L).call(h,u,M,L,S).call(l,u,M,L).call(c,u,M,L);q(E,u,M,L);m(E,u,M,L,Q,S);"bottom"===M.side&&x.draw(u,M._id+"title",{propContainer:M,propName:M._name+".title",placeholder:B._dfltTitle.x,attributes:{x:M._offset+M._length/2,y:R+L._height+L._offsetShift+10+1.5*M.title.font.size,
"text-anchor":"middle"}})}))}},{"../../lib":750,"../../lib/setcursor":770,"../../plots/cartesian":812,"../../plots/cartesian/axis_ids":802,"../../plots/plots":862,"../../registry":882,"../color":615,"../dragelement":634,"../drawing":637,"../titles":710,"./constants":686,d3:169}],689:[function(a,G,C){function q(e){return(e=e&&e[k])&&e.visible}var n=a("../../plots/cartesian/axis_ids"),m=a("../../lib/svg_text_utils"),f=a("./constants"),b=a("../../constants/alignment").LINE_SPACING,k=f.name;C.isVisible=
q;C.makeData=function(e){var h=n.list({_fullLayout:e},"x",!0),l=e.margin,c=[];if(!e._has("gl2d"))for(var g=0;g<h.length;g++){var d=h[g];if(q(d)){c.push(d);var p=d[k];p._id=k+d._id;p._height=(e.height-l.b-l.t)*p.thickness;p._offsetShift=Math.floor(p.borderwidth/2)}}e._rangeSliderData=c};C.autoMarginOpts=function(e,h){e=e._fullLayout;var l=h[k],c=h._id.charAt(0),g=0,d=0;"bottom"===h.side&&(g=h._depth,h.title.text!==e._dfltTitle[c]&&(d=1.5*h.title.font.size+10+l._offsetShift,c=(h.title.text.match(m.BR_TAG_ALL)||
[]).length,d+=c*h.title.font.size*b));return{x:0,y:h._counterDomainMin,l:0,r:0,t:0,b:l._height+g+Math.max(e.margin.b,d),pad:f.extraPad+2*l._offsetShift}}},{"../../constants/alignment":717,"../../lib/svg_text_utils":774,"../../plots/cartesian/axis_ids":802,"./constants":686}],690:[function(a,G,C){C=a("../../lib");var q=a("./attributes"),n=a("./oppaxis_attributes"),m=a("./helpers");G.exports={moduleType:"component",name:"rangeslider",schema:{subplots:{xaxis:{rangeslider:C.extendFlat({},q,{yaxis:n})}}},
layoutAttributes:a("./attributes"),handleDefaults:a("./defaults"),calcAutorange:a("./calc_autorange"),draw:a("./draw"),isVisible:m.isVisible,makeData:m.makeData,autoMarginOpts:m.autoMarginOpts}},{"../../lib":750,"./attributes":684,"./calc_autorange":685,"./defaults":687,"./draw":688,"./helpers":689,"./oppaxis_attributes":691}],691:[function(a,G,C){G.exports={_isSubplotObj:!0,rangemode:{valType:"enumerated",values:["auto","fixed","match"],dflt:"match",editType:"calc"},range:{valType:"info_array",items:[{valType:"any",
editType:"plot"},{valType:"any",editType:"plot"}],editType:"plot"},editType:"calc"}},{}],692:[function(a,G,C){C=a("../annotations/attributes");var q=a("../../traces/scatter/attributes").line,n=a("../drawing/attributes").dash,m=a("../../lib/extend").extendFlat,f=a("../../plot_api/plot_template").templatedArray;a("../../constants/axis_placeable_objects");G.exports=f("shape",{visible:{valType:"boolean",dflt:!0,editType:"calc+arraydraw"},type:{valType:"enumerated",values:["circle","rect","path","line"],
editType:"calc+arraydraw"},layer:{valType:"enumerated",values:["below","above"],dflt:"above",editType:"arraydraw"},xref:m({},C.xref,{}),xsizemode:{valType:"enumerated",values:["scaled","pixel"],dflt:"scaled",editType:"calc+arraydraw"},xanchor:{valType:"any",editType:"calc+arraydraw"},x0:{valType:"any",editType:"calc+arraydraw"},x1:{valType:"any",editType:"calc+arraydraw"},yref:m({},C.yref,{}),ysizemode:{valType:"enumerated",values:["scaled","pixel"],dflt:"scaled",editType:"calc+arraydraw"},yanchor:{valType:"any",
editType:"calc+arraydraw"},y0:{valType:"any",editType:"calc+arraydraw"},y1:{valType:"any",editType:"calc+arraydraw"},path:{valType:"string",editType:"calc+arraydraw"},opacity:{valType:"number",min:0,max:1,dflt:1,editType:"arraydraw"},line:{color:m({},q.color,{editType:"arraydraw"}),width:m({},q.width,{editType:"calc+arraydraw"}),dash:m({},n,{editType:"arraydraw"}),editType:"calc+arraydraw"},fillcolor:{valType:"color",dflt:"rgba(0,0,0,0)",editType:"arraydraw"},fillrule:{valType:"enumerated",values:["evenodd",
"nonzero"],dflt:"evenodd",editType:"arraydraw"},editable:{valType:"boolean",dflt:!1,editType:"calc+arraydraw"},editType:"arraydraw"})},{"../../constants/axis_placeable_objects":718,"../../lib/extend":740,"../../plot_api/plot_template":788,"../../traces/scatter/attributes":1158,"../annotations/attributes":598,"../drawing/attributes":636}],693:[function(a,G,C){function q(e,h,l,c,g,d){e/=2;return"pixel"===h?(l=g?k.extractPathCoords(g,d?b.paramIsY:b.paramIsX):[l,c],h=m.aggNums(Math.max,null,l),l=m.aggNums(Math.min,
null,l),l=0>l?Math.abs(l)+e:e,h=0<h?h+e:e,{ppad:e,ppadplus:d?l:h,ppadminus:d?h:l}):{ppad:e}}function n(e,h,l,c,g){var d="category"===e.type||"multicategory"===e.type?e.r2c:e.d2c;if(void 0!==h)return[d(h),d(l)];if(c){h=Infinity;l=-Infinity;c=c.match(b.segmentRE);var p;"date"===e.type&&(d=k.decodeDate(d));for(e=0;e<c.length;e++){var r=c[e];r=g[r.charAt(0)].drawn;void 0!==r&&(!(p=c[e].substr(1).match(b.paramRE))||p.length<r||(r=d(p[r]),r<h&&(h=r),r>l&&(l=r)))}if(l>=h)return[h,l]}}var m=a("../../lib"),
f=a("../../plots/cartesian/axes"),b=a("./constants"),k=a("./helpers");G.exports=function(e){var h=m.filterVisible(e._fullLayout.shapes);if(h.length&&e._fullData.length)for(var l=0;l<h.length;l++){var c=h[l];c._extremes={};var g=f.getRefType(c.xref);var d=f.getRefType(c.yref);if("paper"!==c.xref&&"domain"!==g){var p="pixel"===c.xsizemode?c.xanchor:c.x0;var r="pixel"===c.xsizemode?c.xanchor:c.x1;g=f.getFromId(e,c.xref);(p=n(g,p,r,c.path,b.paramIsX))&&(c._extremes[g._id]=f.findExtremes(g,p,q(c.line.width,
c.xsizemode,c.x0,c.x1,c.path,!1)))}"paper"!==c.yref&&"domain"!==d&&(d="pixel"===c.ysizemode?c.yanchor:c.y0,p="pixel"===c.ysizemode?c.yanchor:c.y1,g=f.getFromId(e,c.yref),(p=n(g,d,p,c.path,b.paramIsY))&&(c._extremes[g._id]=f.findExtremes(g,p,q(c.line.width,c.ysizemode,c.y0,c.y1,c.path,!0))))}}},{"../../lib":750,"../../plots/cartesian/axes":799,"./constants":694,"./helpers":703}],694:[function(a,G,C){G.exports={segmentRE:/[MLHVQCTSZ][^MLHVQCTSZ]*/g,paramRE:/[^\s,]+/g,paramIsX:{M:{0:!0,drawn:0},L:{0:!0,
drawn:0},H:{0:!0,drawn:0},V:{},Q:{0:!0,2:!0,drawn:2},C:{0:!0,2:!0,4:!0,drawn:4},T:{0:!0,drawn:0},S:{0:!0,2:!0,drawn:2},Z:{}},paramIsY:{M:{1:!0,drawn:1},L:{1:!0,drawn:1},H:{},V:{0:!0,drawn:0},Q:{1:!0,3:!0,drawn:3},C:{1:!0,3:!0,5:!0,drawn:5},T:{1:!0,drawn:1},S:{1:!0,3:!0,drawn:5},Z:{}},numParams:{M:2,L:2,H:1,V:1,Q:4,C:6,T:2,S:4,Z:0}}},{}],695:[function(a,G,C){function q(e,h,l){function c(J,N){return n.coerce(e,h,b,J,N)}if(c("visible")){var g=c("path");g=c("type",g?"path":"rect");"path"!==h.type&&delete h.path;
c("editable");c("layer");c("opacity");c("fillcolor");c("fillrule");c("line.width")&&(c("line.color"),c("line.dash"));for(var d=c("xsizemode"),p=c("ysizemode"),r=["x","y"],t=0;2>t;t++){var w=r[t],x=w+"anchor",y="x"===w?d:p,A={_fullLayout:l},z=m.coerceRef(e,h,A,w,void 0,"paper");if("range"===m.getRefType(z)){var F=m.getFromId(A,z);F._shapeIndices.push(h._index);var D=k.rangeToShapePosition(F);F=k.shapePositionToRange(F)}else F=D=n.identity;if("path"!==g){var u=w+"0";w+="1";var B=e[u],I=e[w];e[u]=F(e[u],
!0);e[w]=F(e[w],!0);"pixel"===y?(c(u,0),c(w,10)):(m.coercePosition(h,A,c,z,u,.25),m.coercePosition(h,A,c,z,w,.75));h[u]=D(h[u]);h[w]=D(h[w]);e[u]=B;e[w]=I}"pixel"===y&&(y=e[x],e[x]=F(e[x],!0),m.coercePosition(h,A,c,z,x,.25),h[x]=D(h[x]),e[x]=y)}"path"===g?c("path"):n.noneOrAll(e,h,["x0","x1","y0","y1"])}}var n=a("../../lib"),m=a("../../plots/cartesian/axes"),f=a("../../plots/array_container_defaults"),b=a("./attributes"),k=a("./helpers");G.exports=function(e,h){f(e,h,{name:"shapes",handleItemDefaults:q})}},
{"../../lib":750,"../../plots/array_container_defaults":794,"../../plots/cartesian/axes":799,"./attributes":692,"./helpers":703}],696:[function(a,G,C){function q(D){var u=D._fullLayout;u._shapeUpperLayer.selectAll("path").remove();u._shapeLowerLayer.selectAll("path").remove();for(var B in u._plots){var I=u._plots[B].shapelayer;I&&I.selectAll("path").remove()}for(B=0;B<u.shapes.length;B++)u.shapes[B].visible&&n(D,B)}function n(D,u){function B(M){var E=b(D,J),L={"data-index":u,"fill-rule":J.fillrule,
d:E},Q=J.opacity,S=J.fillcolor,R=J.line.width?J.line.color:"rgba(0,0,0,0)",O=J.line.width,T=J.line.dash;O||!0!==J.editable||(O=5,T="solid");var V="Z"!==E[E.length-1],X=!D._context.edits.shapePosition&&J.editable&&D._fullLayout._activeShapeIndex===u;X&&(S=V?"rgba(0,0,0,0)":D._fullLayout.activeshape.fillcolor,Q=D._fullLayout.activeshape.opacity);var ba=M.append("path").attr(L).style("opacity",Q).call(t.stroke,R).call(t.fill,S).call(w.dashLine,T,O);m(ba,D,J);if(X||D._context.edits.shapePosition)var aa=
x(D.layout,"shapes",J);X?(ba.style({cursor:"move"}),M={element:ba.node(),plotinfo:N,gd:D,editHelpers:aa,isActiveShape:!0},E=d(E,D),p(E,ba,M)):D._context.edits.shapePosition?f(D,ba,J,u,M,aa):!0===J.editable&&ba.style("pointer-events",V||.5>=t.opacity(S)*Q?"stroke":"all");ba.node().addEventListener("click",function(){a:{if(!D._context.edits.shapePosition){var ka=+ba.node().getAttribute("data-index");if(0<=ka){if(ka===D._fullLayout._activeShapeIndex){h(D);ka=void 0;break a}D._fullLayout._activeShapeIndex=
ka;D._fullLayout._deactivateShape=h;q(D)}}ka=void 0}return ka})}D._fullLayout._paperdiv.selectAll('.shapelayer [data-index\x3d"'+u+'"]').remove();var I=F.makeOptionsAndPlotinfo(D,u),J=I.options,N=I.plotinfo;J._input&&!1!==J.visible&&("below"!==J.layer?B(D._fullLayout._shapeUpperLayer):"paper"===J.xref||"paper"===J.yref?B(D._fullLayout._shapeLowerLayer):N._hadPlotinfo?B((N.mainplotinfo||N).shapelayer):B(D._fullLayout._shapeLowerLayer))}function m(D,u,B){B=(B.xref+B.yref).replace(/paper/g,"").replace(/[xyz][1-9]* *domain/g,
"");w.setClipUrl(D,B?"clip"+u._fullLayout._uid+B:null,u)}function f(D,u,B,I,J,N){function M(){var mb=Math.max(B.line.width,10),Ka=J.append("g").attr("data-index",I);Ka.append("path").attr("d",u.attr("d")).style({cursor:"move","stroke-width":mb,"stroke-opacity":"0"});var Ua={"fill-opacity":"0"};mb=Math.max(mb/2,10);Ka.append("circle").attr({"data-line-point":"start-point",cx:R?Ia(B.xanchor)+B.x0:Ia(B.x0),cy:O?Pa(B.yanchor)-B.y0:Pa(B.y0),r:mb}).style(Ua).classed("cursor-grab",!0);Ka.append("circle").attr({"data-line-point":"end-point",
cx:R?Ia(B.xanchor)+B.x1:Ia(B.x1),cy:O?Pa(B.yanchor)-B.y1:Pa(B.y1),r:mb}).style(Ua).classed("cursor-grab",!0);return Ka}function E(mb){if(D._fullLayout._drawing)cb=null;else if(T)cb="path"===mb.target.tagName?"move":"start-point"===mb.target.attributes["data-line-point"].value?"resize-over-start-point":"resize-over-end-point";else{var Ka=$a.element.getBoundingClientRect(),Ua=Ka.right-Ka.left,Ea=Ka.bottom-Ka.top,Ya=mb.clientX-Ka.left;Ka=mb.clientY-Ka.top;mb=!V&&10<Ua&&10<Ea&&!mb.shiftKey?y.getCursor(Ya/
Ua,1-Ka/Ea):"move";A(u,mb);cb=mb.split("-")[0]}}function L(mb,Ka){if("path"===B.type){var Ua=function(Ya){return Ya},Ea=Ua;R?X("xanchor",B.xanchor=Fa(ca+mb)):(Ea=function(Ya){return Fa(Ia(Ya)+mb)},za&&"date"===za.type&&(Ea=F.encodeDate(Ea)));O?X("yanchor",B.yanchor=Na(sa+Ka)):(Ua=function(Ya){return Na(Pa(Ya)+Ka)},Ma&&"date"===Ma.type&&(Ua=F.encodeDate(Ua)));X("path",B.path=e(ja,Ea,Ua))}else R?X("xanchor",B.xanchor=Fa(ca+mb)):(X("x0",B.x0=Fa(ba+mb)),X("x1",B.x1=Fa(ka+mb))),O?X("yanchor",B.yanchor=
Na(sa+Ka)):(X("y0",B.y0=Na(aa+Ka)),X("y1",B.y1=Na(ha+Ka)));u.attr("d",b(D,B));S(J,B)}function Q(mb,Ka){if(V){var Ua=function(Sa){return Sa},Ea=Ua;R?X("xanchor",B.xanchor=Fa(ca+mb)):(Ea=function(Sa){return Fa(Ia(Sa)+mb)},za&&"date"===za.type&&(Ea=F.encodeDate(Ea)));O?X("yanchor",B.yanchor=Na(sa+Ka)):(Ua=function(Sa){return Na(Pa(Sa)+Ka)},Ma&&"date"===Ma.type&&(Ua=F.encodeDate(Ua)));X("path",B.path=e(ja,Ea,Ua))}else if(T)"resize-over-start-point"===cb?(Ea=ba+mb,Ua=O?aa-Ka:aa+Ka,X("x0",B.x0=R?Ea:Fa(Ea)),
X("y0",B.y0=O?Ua:Na(Ua))):"resize-over-end-point"===cb&&(Ea=ka+mb,Ua=O?ha-Ka:ha+Ka,X("x1",B.x1=R?Ea:Fa(Ea)),X("y1",B.y1=O?Ua:Na(Ua)));else{Ea=-1!==cb.indexOf("n");Ua=-1!==cb.indexOf("s");var Ya=-1!==cb.indexOf("w"),ab=-1!==cb.indexOf("e"),Wa=Ea?ma+Ka:ma,Ja=Ua?ra+Ka:ra;Ya=Ya?qa+mb:qa;ab=ab?Y+mb:Y;O&&(Ea&&(Wa=ma-Ka),Ua&&(Ja=ra-Ka));if(!O&&10<Ja-Wa||O&&10<Wa-Ja)X(pa,B[pa]=O?Wa:Na(Wa)),X(oa,B[oa]=O?Ja:Na(Ja));10<ab-Ya&&(X(ua,B[ua]=R?Ya:Fa(Ya)),X(ya,B[ya]=R?ab:Fa(ab)))}u.attr("d",b(D,B));S(J,B)}function S(mb,
Ka){if(R||O){var Ua="path"!==Ka.type;mb=mb.selectAll(".visual-cue").data([0]);mb.enter().append("path").attr({fill:"#fff","fill-rule":"evenodd",stroke:"#000","stroke-width":1}).classed("visual-cue",!0);var Ea=Ia(R?Ka.xanchor:c.midRange(Ua?[Ka.x0,Ka.x1]:F.extractPathCoords(Ka.path,z.paramIsX)));Ka=Pa(O?Ka.yanchor:c.midRange(Ua?[Ka.y0,Ka.y1]:F.extractPathCoords(Ka.path,z.paramIsY)));Ea=F.roundPositionForSharpStrokeRendering(Ea,1);Ka=F.roundPositionForSharpStrokeRendering(Ka,1);R&&O?mb.attr("d","M"+
(Ea-1-1)+","+(Ka-1-1)+"h-8v2h8 v8h2v-8 h8v-2h-8 v-8h-2 Z"):R?mb.attr("d","M"+(Ea-1-1)+","+(Ka-9-1)+"v18 h2 v-18 Z"):mb.attr("d","M"+(Ea-9-1)+","+(Ka-1-1)+"h18 v2 h-18 Z")}}var R="pixel"===B.xsizemode,O="pixel"===B.ysizemode,T="line"===B.type,V="path"===B.type,X=N.modifyItem,ba,aa,ka,ha,ca,sa,ma,ra,qa,Y,pa,oa,ua,ya,ja,za=g.getFromId(D,B.xref),Ba=g.getRefType(B.xref),Ma=g.getFromId(D,B.yref),Oa=g.getRefType(B.yref),Ia=F.getDataToPixel(D,za,!1,Ba),Pa=F.getDataToPixel(D,Ma,!0,Oa),Fa=F.getPixelToData(D,
za,!1,Ba),Na=F.getPixelToData(D,Ma,!0,Oa);Ba=T?M():u;var $a={element:Ba.node(),gd:D,prepFn:function(mb){if(!D._fullLayout._drawing){R&&(ca=Ia(B.xanchor));O&&(sa=Pa(B.yanchor));"path"===B.type?ja=B.path:(ba=R?B.x0:Ia(B.x0),aa=O?B.y0:Pa(B.y0),ka=R?B.x1:Ia(B.x1),ha=O?B.y1:Pa(B.y1));ba<ka?(qa=ba,ua="x0",Y=ka,ya="x1"):(qa=ka,ua="x1",Y=ba,ya="x0");!O&&aa<ha||O&&aa>ha?(ma=aa,pa="y0",ra=ha,oa="y1"):(ma=ha,pa="y1",ra=aa,oa="y0");E(mb);S(J,B);var Ka=B.xref,Ua=B.yref,Ea=g.getFromId(D,Ka),Ya=g.getFromId(D,Ua),
ab="";"paper"===Ka||Ea.autorange||(ab+=Ka);"paper"===Ua||Ya.autorange||(ab+=Ua);w.setClipUrl(u,ab?"clip"+D._fullLayout._uid+ab:null,D);$a.moveFn="move"===cb?L:Q;$a.altKey=mb.altKey}},doneFn:function(){D._fullLayout._drawing||(A(u),J.selectAll(".visual-cue").remove(),m(u,D,B),l.call("_guiRelayout",D,N.getUpdateObj()))},clickFn:function(){D._fullLayout._drawing||J.selectAll(".visual-cue").remove()}},cb;y.init($a);Ba.node().onmousemove=E}function b(D,u){var B=u.type,I=g.getRefType(u.xref),J=g.getRefType(u.yref),
N=g.getFromId(D,u.xref),M=g.getFromId(D,u.yref),E=D._fullLayout._size;if(N)if("domain"===I)D=function(R){return N._offset+N._length*R};else{var L=F.shapePositionToRange(N);D=function(R){return N._offset+N.r2p(L(R,!0))}}else D=function(R){return E.l+E.w*R};if(M)if("domain"===J)I=function(R){return M._offset+M._length*(1-R)};else{var Q=F.shapePositionToRange(M);I=function(R){return M._offset+M.r2p(Q(R,!0))}}else I=function(R){return E.t+E.h*(1-R)};if("path"===B)return N&&"date"===N.type&&(D=F.decodeDate(D)),
M&&"date"===M.type&&(I=F.decodeDate(I)),k(u,D,I);if("pixel"===u.xsizemode){D=D(u.xanchor);J=D+u.x0;var S=D+u.x1}else J=D(u.x0),S=D(u.x1);"pixel"===u.ysizemode?(I=I(u.yanchor),D=I-u.y0,u=I-u.y1):(D=I(u.y0),u=I(u.y1));if("line"===B)return"M"+J+","+D+"L"+S+","+u;if("rect"===B)return"M"+J+","+D+"H"+S+"V"+u+"H"+J+"Z";B=(J+S)/2;u=(D+u)/2;J=Math.abs(B-J);D=Math.abs(u-D);I="A"+J+","+D;J=B+J+","+u;return"M"+J+I+" 0 1,1 "+(B+","+(u-D))+I+" 0 0,1 "+J+"Z"}function k(D,u,B){var I=D.xsizemode,J=D.ysizemode,N=D.xanchor,
M=D.yanchor;return D.path.replace(z.segmentRE,function(E){var L=0,Q=E.charAt(0),S=z.paramIsX[Q],R=z.paramIsY[Q],O=z.numParams[Q],T=E.substr(1).replace(z.paramRE,function(V){S[L]?V="pixel"===I?u(N)+Number(V):u(V):R[L]&&(V="pixel"===J?B(M)-Number(V):B(V));L++;L>O&&(V="X");return V});L>O&&(T=T.replace(/[\s,]*X.*/,""),c.log("Ignoring extra params in segment "+E));return Q+T})}function e(D,u,B){return D.replace(z.segmentRE,function(I){var J=0,N=I.charAt(0),M=z.paramIsX[N],E=z.paramIsY[N],L=z.numParams[N];
I=I.substr(1).replace(z.paramRE,function(Q){if(J>=L)return Q;M[J]?Q=u(Q):E[J]&&(Q=B(Q));J++;return Q});return N+I})}function h(D){!D._context.edits.shapePosition&&0<=D._fullLayout._activeShapeIndex&&(r(D),delete D._fullLayout._activeShapeIndex,q(D))}var l=a("../../registry"),c=a("../../lib"),g=a("../../plots/cartesian/axes"),d=a("./draw_newshape/helpers").readPaths,p=a("./draw_newshape/display_outlines"),r=a("../../plots/cartesian/handle_outline").clearOutlineControllers,t=a("../color"),w=a("../drawing"),
x=a("../../plot_api/plot_template").arrayEditor,y=a("../dragelement"),A=a("../../lib/setcursor"),z=a("./constants"),F=a("./helpers");G.exports={draw:q,drawOne:n,eraseActiveShape:function(D){if(!D._context.edits.shapePosition){r(D);var u=D._fullLayout._activeShapeIndex,B=(D.layout||{}).shapes||[];if(u<B.length){for(var I=[],J=0;J<B.length;J++)J!==u&&I.push(B[J]);delete D._fullLayout._activeShapeIndex;l.call("_guiRelayout",D,{shapes:I})}}}}},{"../../lib":750,"../../lib/setcursor":770,"../../plot_api/plot_template":788,
"../../plots/cartesian/axes":799,"../../plots/cartesian/handle_outline":809,"../../registry":882,"../color":615,"../dragelement":634,"../drawing":637,"./constants":694,"./draw_newshape/display_outlines":700,"./draw_newshape/helpers":701,"./helpers":703}],697:[function(a,G,C){C=a("../../drawing/attributes").dash;a=a("../../../lib/extend").extendFlat;G.exports={newshape:{line:{color:{valType:"color",editType:"none"},width:{valType:"number",min:0,dflt:4,editType:"none"},dash:a({},C,{dflt:"solid",editType:"none"}),
editType:"none"},fillcolor:{valType:"color",dflt:"rgba(0,0,0,0)",editType:"none"},fillrule:{valType:"enumerated",values:["evenodd","nonzero"],dflt:"evenodd",editType:"none"},opacity:{valType:"number",min:0,max:1,dflt:1,editType:"none"},layer:{valType:"enumerated",values:["below","above"],dflt:"above",editType:"none"},drawdirection:{valType:"enumerated",values:["ortho","horizontal","vertical","diagonal"],dflt:"diagonal",editType:"none"},editType:"none"},activeshape:{fillcolor:{valType:"color",dflt:"rgb(255,0,255)",
editType:"none"},opacity:{valType:"number",min:0,max:1,dflt:.5,editType:"none"},editType:"none"}}},{"../../../lib/extend":740,"../../drawing/attributes":636}],698:[function(a,G,C){G.exports={CIRCLE_SIDES:32,i000:0,i090:8,i180:16,i270:24,cos45:Math.cos(Math.PI/4),sin45:Math.sin(Math.PI/4),SQRT2:Math.sqrt(2)}},{}],699:[function(a,G,C){var q=a("../../color");G.exports=function(n,m,f){f("newshape.drawdirection");f("newshape.layer");f("newshape.fillcolor");f("newshape.fillrule");f("newshape.opacity");
f("newshape.line.width")&&(f("newshape.line.color",q.contrast((n||{}).plot_bgcolor||"#FFF")),f("newshape.line.dash"));f("activeshape.fillcolor");f("activeshape.opacity")}},{"../../color":615}],700:[function(a,G,C){function q(r,t){for(var w=0;w<t.length;w++){var x=t[w];r[w]=[];for(var y=0;y<x.length;y++){r[w][y]=[];for(var A=0;A<x[y].length;A++)r[w][y][A]=x[y][A]}}return r}var n=a("../../dragelement"),m=a("../../dragelement/helpers").drawMode,f=a("../../../registry");C=a("./constants");var b=C.i000,
k=C.i090,e=C.i180,h=C.i270,l=a("../../../plots/cartesian/handle_outline").clearOutlineControllers;C=a("./helpers");var c=C.pointsShapeRectangle,g=C.pointsShapeEllipse,d=C.writePaths,p=a("./newshapes");G.exports=function A(t,w,x,y){function z(){A(t,w,x,y++);g(t[0])&&F({redrawing:!0})}function F(ba){x.isActiveShape=!1;var aa=p(w,x);Object.keys(aa).length&&f.call((ba||{}).redrawing?"relayout":"_guiRelayout",L,aa)}function D(ba){O=+ba.srcElement.getAttribute("data-i");T=+ba.srcElement.getAttribute("data-j");
R[O][T].moveFn=u}function u(ba,aa){if(t.length){var ka=V[O][T][1],ha=V[O][T][2],ca=t[O],sa=ca.length;if(c(ca)){for(var ma=0;ma<sa;ma++)if(ma!==T){var ra=ca[ma];ra[1]===ca[T][1]&&(ra[1]=ka+ba);ra[2]===ca[T][2]&&(ra[2]=ha+aa)}ca[T][1]=ka+ba;ca[T][2]=ha+aa;if(!c(ca))for(ba=0;ba<sa;ba++)for(aa=0;aa<ca[ba].length;aa++)ca[ba][aa]=V[O][ba][aa]}else ca[T][1]=ka+ba,ca[T][2]=ha+aa;z()}}function B(){F()}function I(ba,aa){if(2===ba&&(O=+aa.srcElement.getAttribute("data-i"),T=+aa.srcElement.getAttribute("data-j"),
ba=t[O],!c(ba)&&!g(ba)&&t.length&&t[O]&&t[O].length)){ba=[];for(aa=0;aa<t[O].length;aa++)aa!==T&&ba.push(t[O][aa]);1<ba.length&&(2!==ba.length||"Z"!==ba[1][0])&&(0===T&&(ba[0][0]="M"),t[O]=ba,z(),F())}}function J(ba){R=[];for(var aa=0;aa<t.length;aa++){var ka=t[aa],ha=!c(ka)&&g(ka);R[aa]=[];for(var ca=0;ca<ka.length;ca++)if("Z"!==ka[ca][0]&&(!ha||ca===b||ca===k||ca===e||ca===h)){var sa=ka[ca][1],ma=ka[ca][2];sa=ba.append("circle").classed("cursor-grab",!0).attr("data-i",aa).attr("data-j",ca).attr("cx",
sa).attr("cy",ma).attr("r",4).style({"mix-blend-mode":"luminosity",fill:"black",stroke:"white","stroke-width":1});R[aa][ca]={element:sa.node(),gd:L,prepFn:D,doneFn:B,clickFn:I};n.init(R[aa][ca])}}}function N(ba,aa){if(t.length)for(var ka=0;ka<t.length;ka++)for(var ha=0;ha<t[ka].length;ha++)for(var ca=0;ca+2<t[ka][ha].length;ca+=2)t[ka][ha][ca+1]=V[ka][ha][ca+1]+ba,t[ka][ha][ca+2]=V[ka][ha][ca+2]+aa;z()}function M(ba){(O=+ba.srcElement.getAttribute("data-i"))||(O=0);X[O].moveFn=N}function E(){F()}
y||(y=0);var L=x.gd,Q=x.isActiveShape,S=L._fullLayout._zoomlayer;m(x.dragmode)?L._fullLayout._drawing=!0:0<=L._fullLayout._activeShapeIndex&&l(L);w.attr("d",d(t));var R,O,T;if(Q&&!y){var V=q([],t);Q=S.append("g").attr("class","outline-controllers");J(Q);var X=[];t.length&&(X[0]={element:w[0][0],gd:L,prepFn:M,doneFn:E},n.init(X[0]))}}},{"../../../plots/cartesian/handle_outline":809,"../../../registry":882,"../../dragelement":634,"../../dragelement/helpers":633,"./constants":698,"./helpers":701,"./newshapes":702}],
701:[function(a,G,C){function q(c,g){return 1E-6>=Math.abs(c-g)}function n(c,g){var d=g[1]-c[1];c=g[2]-c[2];return Math.sqrt(d*d+c*c)}var m=a("parse-svg-path");G=a("./constants");var f=G.CIRCLE_SIDES,b=G.SQRT2;a=a("../../../plots/cartesian/helpers");var k=a.p2r,e=a.r2p,h=[0,3,4,5,6,1,2],l=[0,3,4,1,2];C.writePaths=function(c){var g=c.length;if(!g)return"M0,0Z";for(var d="",p=0;p<g;p++)for(var r=c[p].length,t=0;t<r;t++){var w=c[p][t][0];if("Z"===w)d+="Z";else for(var x=c[p][t].length,y=0;y<x;y++){var A=
y;"Q"===w||"S"===w?A=l[y]:"C"===w&&(A=h[y]);d+=c[p][t][A];0<y&&y<x-1&&(d+=",")}}return d};C.readPaths=function(c,g,d,p){c=m(c);var r=[],t=-1,w,x=0,y=0;var A=x;var z=y;for(var F=0;F<c.length;F++){var D=[],u=w=c[F][0];switch(w){case "M":t++;r[t]=[];x=+c[F][1];y=+c[F][2];D.push([u,x,y]);A=x;z=y;break;case "Q":case "S":w=+c[F][1];var B=+c[F][2];x=+c[F][3];y=+c[F][4];D.push([u,x,y,w,B]);break;case "C":w=+c[F][1];B=+c[F][2];var I=+c[F][3];var J=+c[F][4];x=+c[F][5];y=+c[F][6];D.push([u,x,y,w,B,I,J]);break;
case "T":case "L":x=+c[F][1];y=+c[F][2];D.push([u,x,y]);break;case "H":u="L";x=+c[F][1];D.push([u,x,y]);break;case "V":u="L";y=+c[F][1];D.push([u,x,y]);break;case "A":u="L";I=+c[F][1];B=+c[F][2];+c[F][4]||(I=-I,B=-B);J=x-I;var N=y;for(w=1;w<=f/2;w++){var M=2*Math.PI*w/f;D.push([u,J+I*Math.cos(M),N+B*Math.sin(M)])}break;case "Z":if(x!==A||y!==z)x=A,y=z,D.push([u,x,y])}u=(d||{}).domain;I=g._fullLayout._size;B=d&&"pixel"===d.xsizemode;J=d&&"pixel"===d.ysizemode;N=!1===p;for(M=0;M<D.length;M++){for(w=
0;7>w+2;w+=2){var E=D[M][w+1],L=D[M][w+2];void 0!==E&&void 0!==L&&(x=E,y=L,d&&(d.xaxis&&d.xaxis.p2r?(N&&(E-=d.xaxis._offset),E=B?e(d.xaxis,d.xanchor)+E:k(d.xaxis,E)):(N&&(E-=I.l),E=u?u.x[0]+E/I.w:E/I.w),d.yaxis&&d.yaxis.p2r?(N&&(L-=d.yaxis._offset),L=J?e(d.yaxis,d.yanchor)-L:k(d.yaxis,L)):(N&&(L-=I.t),L=u?u.y[1]-L/I.h:1-L/I.h)),D[M][w+1]=E,D[M][w+2]=L)}r[t].push(D[M].slice())}}return r};C.pointsShapeRectangle=function(c){if(5!==c.length)return!1;for(var g=1;3>g;g++)if(!q(c[0][g]-c[1][g],c[3][g]-c[2][g])||
!q(c[0][g]-c[3][g],c[1][g]-c[2][g]))return!1;return q(c[0][1],c[1][1])||q(c[0][1],c[3][1])?!!(n(c[0],c[1])*n(c[0],c[3])):!1};C.pointsShapeEllipse=function(c){var g=c.length;if(g!==f+1)return!1;g=f;for(var d=0;d<g;d++){var p=(2*g-d)%g,r=(g/2+p)%g;if(!q(n(c[d],c[(g/2+d)%g]),n(c[p],c[r])))return!1}return!0};C.handleEllipse=function(c,g,d){if(!c)return[g,d];var p=C.ellipseOver({x0:g[0],y0:g[1],x1:d[0],y1:d[1]});c=(p.x1+p.x0)/2;g=(p.y1+p.y0)/2;d=(p.x1-p.x0)/2;p=(p.y1-p.y0)/2;d||(d=p/=b);p||(p=d/=b);for(var r=
[],t=0;t<f;t++){var w=2*t*Math.PI/f;r.push([c+d*Math.cos(w),g+p*Math.sin(w)])}return r};C.ellipseOver=function(c){var g=c.x0,d=c.y0,p=c.x1,r=c.y1;c=p-g;var t=r-d;g=(g-c+p)/2;d=(d-t+r)/2;c*=b;t*=b;return{x0:g-c,y0:d-t,x1:g+c,y1:d+t}}},{"../../../plots/cartesian/helpers":810,"./constants":698,"parse-svg-path":479}],702:[function(a,G,C){C=a("../../dragelement/helpers");var q=C.drawMode,n=C.openMode;C=a("./constants");var m=C.i000,f=C.i090,b=C.i180,k=C.i270,e=C.cos45,h=C.sin45;C=a("../../../plots/cartesian/helpers");
var l=C.p2r,c=C.r2p,g=a("../../../plots/cartesian/handle_outline").clearSelect;a=a("./helpers");var d=a.readPaths,p=a.writePaths,r=a.ellipseOver;G.exports=function(t,w){if(t.length&&(t=t[0][0])){var x=t.getAttribute("d");t=w.gd;var y=t._fullLayout.newshape,A=w.plotinfo,z=A.xaxis,F=A.yaxis,D=!!A.domain||!A.xaxis,u=!!A.domain||!A.yaxis,B=w.isActiveShape,I=w.dragmode,J=(t.layout||{}).shapes||[];if(!q(I)&&void 0!==B){var N=t._fullLayout._activeShapeIndex;if(N<J.length)switch(t._fullLayout.shapes[N].type){case "rect":I=
"drawrect";break;case "circle":I="drawcircle";break;case "line":I="drawline";break;case "path":I=J[N].path||"",I="Z"===I[I.length-1]?"drawclosedpath":"drawopenpath"}}N=n(I);x=d(x,t,A,B);D={editable:!0,xref:D?"paper":z._id,yref:u?"paper":F._id,layer:y.layer,opacity:y.opacity,line:{color:y.line.color,width:y.line.width,dash:y.line.dash}};N||(D.fillcolor=y.fillcolor,D.fillrule=y.fillrule);var M;1===x.length&&(M=x[0]);if(M&&"drawrect"===I)D.type="rect",D.x0=M[0][1],D.y0=M[0][2],D.x1=M[2][1],D.y1=M[2][2];
else if(M&&"drawline"===I)D.type="line",D.x0=M[0][1],D.y0=M[0][2],D.x1=M[1][1],D.y1=M[1][2];else if(M&&"drawcircle"===I){D.type="circle";x=M[m][1];F=M[f][1];y=M[b][1];z=M[k][1];u=M[m][2];I=M[f][2];N=M[b][2];var E=M[k][2];M=A.xaxis&&("date"===A.xaxis.type||"log"===A.xaxis.type);var L=A.yaxis&&("date"===A.yaxis.type||"log"===A.yaxis.type);M&&(x=c(A.xaxis,x),F=c(A.xaxis,F),y=c(A.xaxis,y),z=c(A.xaxis,z));L&&(u=c(A.yaxis,u),I=c(A.yaxis,I),N=c(A.yaxis,N),E=c(A.yaxis,E));var Q=(F+z)/2,S=(u+N)/2;x=r({x0:Q,
y0:S,x1:Q+(z-F+y-x)/2*e,y1:S+(E-I+N-u)/2*h});M&&(x.x0=l(A.xaxis,x.x0),x.x1=l(A.xaxis,x.x1));L&&(x.y0=l(A.yaxis,x.y0),x.y1=l(A.yaxis,x.y1));D.x0=x.x0;D.y0=x.y0;D.x1=x.x1;D.y1=x.y1}else{D.type="path";if(z&&F&&(A="date"===z.type,M="date"===F.type,A||M))for(F=0;F<x.length;F++)for(y=0;y<x[F].length;y++)for(z=0;z+2<x[F][y].length;z+=2)A&&(x[F][y][z+1]=x[F][y][z+1].replace(" ","_")),M&&(x[F][y][z+2]=x[F][y][z+2].replace(" ","_"));D.path=p(x)}g(t);w=w.editHelpers;A=(w||{}).modifyItem;M=[];for(x=0;x<J.length;x++)if(F=
t._fullLayout.shapes[x],M[x]=F._input,void 0!==B&&x===t._fullLayout._activeShapeIndex)switch(y=D,F.type){case "line":case "rect":case "circle":A("x0",y.x0);A("x1",y.x1);A("y0",y.y0);A("y1",y.y1);break;case "path":A("path",y.path)}return void 0===B?(M.push(D),M):w?w.getUpdateObj():{}}}},{"../../../plots/cartesian/handle_outline":809,"../../../plots/cartesian/helpers":810,"../../dragelement/helpers":633,"./constants":698,"./helpers":701}],703:[function(a,G,C){var q=a("./constants"),n=a("../../lib");
C.rangeToShapePosition=function(m){return"log"===m.type?m.r2d:function(f){return f}};C.shapePositionToRange=function(m){return"log"===m.type?m.d2r:function(f){return f}};C.decodeDate=function(m){return function(f){f.replace&&(f=f.replace("_"," "));return m(f)}};C.encodeDate=function(m){return function(f){return m(f).replace(" ","_")}};C.extractPathCoords=function(m,f){var b=[];m.match(q.segmentRE).forEach(function(k){var e=f[k.charAt(0)].drawn;void 0!==e&&(k=k.substr(1).match(q.paramRE),!k||k.length<
e||b.push(n.cleanNumber(k[e])))});return b};C.getDataToPixel=function(m,f,b,k){var e=m._fullLayout._size;if(f)if("domain"===k)m=function(l){return f._length*(b?1-l:l)+f._offset};else{var h=C.shapePositionToRange(f);m=function(l){return f._offset+f.r2p(h(l,!0))};"date"===f.type&&(m=C.decodeDate(m))}else m=b?function(l){return e.t+e.h*(1-l)}:function(l){return e.l+e.w*l};return m};C.getPixelToData=function(m,f,b,k){var e=m._fullLayout._size;if(f)if("domain"===k)m=function(l){l=(l-f._offset)/f._length;
return b?1-l:l};else{var h=C.rangeToShapePosition(f);m=function(l){return h(f.p2r(l-f._offset))}}else m=b?function(l){return 1-(l-e.t)/e.h}:function(l){return(l-e.l)/e.w};return m};C.roundPositionForSharpStrokeRendering=function(m,f){m=Math.round(m);return 1===Math.round(f%2)?m+.5:m};C.makeOptionsAndPlotinfo=function(m,f){f=m._fullLayout.shapes[f]||{};var b=m._fullLayout._plots[f.xref+f.yref];b?b._hadPlotinfo=!0:(b={},f.xref&&"paper"!==f.xref&&(b.xaxis=m._fullLayout[f.xref+"axis"]),f.yref&&"paper"!==
f.yref&&(b.yaxis=m._fullLayout[f.yref+"axis"]));b.xsizemode=f.xsizemode;b.ysizemode=f.ysizemode;b.xanchor=f.xanchor;b.yanchor=f.yanchor;return{options:f,plotinfo:b}}},{"../../lib":750,"./constants":694}],704:[function(a,G,C){C=a("./draw");G.exports={moduleType:"component",name:"shapes",layoutAttributes:a("./attributes"),supplyLayoutDefaults:a("./defaults"),supplyDrawNewShapeDefaults:a("./draw_newshape/defaults"),includeBasePlot:a("../../plots/cartesian/include_components")("shapes"),calcAutorange:a("./calc_autorange"),
draw:C.draw,drawOne:C.drawOne}},{"../../plots/cartesian/include_components":811,"./attributes":692,"./calc_autorange":693,"./defaults":695,"./draw":696,"./draw_newshape/defaults":699}],705:[function(a,G,C){C=a("../../plots/font_attributes");var q=a("../../plots/pad_attributes"),n=a("../../lib/extend").extendDeepAll,m=a("../../plot_api/edit_types").overrideAll,f=a("../../plots/animation_attributes"),b=a("../../plot_api/plot_template").templatedArray;a=a("./constants");var k=b("step",{visible:{valType:"boolean",
dflt:!0},method:{valType:"enumerated",values:["restyle","relayout","animate","update","skip"],dflt:"restyle"},args:{valType:"info_array",freeLength:!0,items:[{valType:"any"},{valType:"any"},{valType:"any"}]},label:{valType:"string"},value:{valType:"string"},execute:{valType:"boolean",dflt:!0}});G.exports=m(b("slider",{visible:{valType:"boolean",dflt:!0},active:{valType:"number",min:0,dflt:0},steps:k,lenmode:{valType:"enumerated",values:["fraction","pixels"],dflt:"fraction"},len:{valType:"number",
min:0,dflt:1},x:{valType:"number",min:-2,max:3,dflt:0},pad:n(q({editType:"arraydraw"}),{},{t:{dflt:20}}),xanchor:{valType:"enumerated",values:["auto","left","center","right"],dflt:"left"},y:{valType:"number",min:-2,max:3,dflt:0},yanchor:{valType:"enumerated",values:["auto","top","middle","bottom"],dflt:"top"},transition:{duration:{valType:"number",min:0,dflt:150},easing:{valType:"enumerated",values:f.transition.easing.values,dflt:"cubic-in-out"}},currentvalue:{visible:{valType:"boolean",dflt:!0},
xanchor:{valType:"enumerated",values:["left","center","right"],dflt:"left"},offset:{valType:"number",dflt:10},prefix:{valType:"string"},suffix:{valType:"string"},font:C({})},font:C({}),activebgcolor:{valType:"color",dflt:a.gripBgActiveColor},bgcolor:{valType:"color",dflt:a.railBgColor},bordercolor:{valType:"color",dflt:a.railBorderColor},borderwidth:{valType:"number",min:0,dflt:a.railBorderWidth},ticklen:{valType:"number",min:0,dflt:a.tickLength},tickcolor:{valType:"color",dflt:a.tickColor},tickwidth:{valType:"number",
min:0,dflt:1},minorticklen:{valType:"number",min:0,dflt:a.minorTickLength}}),"arraydraw","from-root")},{"../../lib/extend":740,"../../plot_api/edit_types":781,"../../plot_api/plot_template":788,"../../plots/animation_attributes":793,"../../plots/font_attributes":827,"../../plots/pad_attributes":861,"./constants":706}],706:[function(a,G,C){G.exports={name:"sliders",containerClassName:"slider-container",groupClassName:"slider-group",inputAreaClass:"slider-input-area",railRectClass:"slider-rail-rect",
railTouchRectClass:"slider-rail-touch-rect",gripRectClass:"slider-grip-rect",tickRectClass:"slider-tick-rect",inputProxyClass:"slider-input-proxy",labelsClass:"slider-labels",labelGroupClass:"slider-label-group",labelClass:"slider-label",currentValueClass:"slider-current-value",railHeight:5,menuIndexAttrName:"slider-active-index",autoMarginIdRoot:"slider-",minWidth:30,minHeight:30,textPadX:40,arrowOffsetX:4,railRadius:2,railWidth:5,railBorder:4,railBorderWidth:1,railBorderColor:"#bec8d9",railBgColor:"#f8fafc",
railInset:8,stepInset:10,gripRadius:10,gripWidth:20,gripHeight:20,gripBorder:20,gripBorderWidth:1,gripBorderColor:"#bec8d9",gripBgColor:"#f6f8fa",gripBgActiveColor:"#dbdde0",labelPadding:8,labelOffset:0,tickWidth:1,tickColor:"#333",tickOffset:25,tickLength:7,minorTickOffset:25,minorTickColor:"#333",minorTickLength:4,currentValuePadding:8,currentValueInset:0}},{}],707:[function(a,G,C){function q(h,l,c){function g(t,w){return m.coerce(h,l,b,t,w)}for(var d=f(h,l,{name:"steps",handleItemDefaults:n}),
p=0,r=0;r<d.length;r++)d[r].visible&&p++;if(2>p?l.visible=!1:g("visible"))l._stepCount=p,p=l._visibleSteps=m.filterVisible(d),r=g("active"),(d[r]||{}).visible||(l.active=p[0]._index),g("x"),g("y"),m.noneOrAll(h,l,["x","y"]),g("xanchor"),g("yanchor"),g("len"),g("lenmode"),g("pad.t"),g("pad.r"),g("pad.b"),g("pad.l"),m.coerceFont(g,"font",c.font),g("currentvalue.visible")&&(g("currentvalue.xanchor"),g("currentvalue.prefix"),g("currentvalue.suffix"),g("currentvalue.offset"),m.coerceFont(g,"currentvalue.font",
l.font)),g("transition.duration"),g("transition.easing"),g("bgcolor"),g("activebgcolor"),g("bordercolor"),g("borderwidth"),g("ticklen"),g("tickwidth"),g("tickcolor"),g("minorticklen")}function n(h,l){function c(d,p){return m.coerce(h,l,e,d,p)}if("skip"===h.method||Array.isArray(h.args)?c("visible"):l.visible=!1){c("method");c("args");var g=c("label","step-"+l._index);c("value",g);c("execute")}}var m=a("../../lib"),f=a("../../plots/array_container_defaults"),b=a("./attributes"),k=a("./constants").name,
e=b.steps;G.exports=function(h,l){f(h,l,{name:k,handleItemDefaults:q})}},{"../../lib":750,"../../plots/array_container_defaults":794,"./attributes":705,"./constants":706}],708:[function(a,G,C){function q(L,Q){L=L[J.name];for(var S=[],R=0;R<L.length;R++){var O=L[R];O.visible&&(O._gd=Q,S.push(O))}return S}function n(L){return L._index}function m(L,Q){var S=D.tester.selectAll("g."+J.labelGroupClass).data(Q._visibleSteps);S.enter().append("g").classed(J.labelGroupClass,!0);var R=0,O=0;S.each(function(ba){var aa=
A.select(this);if(ba=e(aa,{step:ba},Q).node())ba=D.bBox(ba),O=Math.max(O,ba.height),R=Math.max(R,ba.width)});S.remove();var T=Q._dims={};T.inputAreaWidth=Math.max(J.railWidth,J.gripHeight);var V=L._fullLayout._size;T.lx=V.l+V.w*Q.x;T.ly=V.t+V.h*(1-Q.y);T.outerLength="fraction"===Q.lenmode?Math.round(V.w*Q.len):Q.len;T.inputAreaStart=0;T.inputAreaLength=Math.round(T.outerLength-Q.pad.l-Q.pad.r);T.labelStride=Math.max(1,Math.ceil((R+J.labelPadding)/((T.inputAreaLength-2*J.stepInset)/(Q._stepCount-1))));
T.labelHeight=O;T.currentValueMaxWidth=0;T.currentValueHeight=0;T.currentValueTotalHeight=0;T.currentValueMaxLines=1;if(Q.currentvalue.visible){var X=D.tester.append("g");S.each(function(ba){var aa=b(X,Q,ba.label);ba=aa.node()&&D.bBox(aa.node())||{width:0,height:0};aa=B.lineCount(aa);T.currentValueMaxWidth=Math.max(T.currentValueMaxWidth,Math.ceil(ba.width));T.currentValueHeight=Math.max(T.currentValueHeight,Math.ceil(ba.height));T.currentValueMaxLines=Math.max(T.currentValueMaxLines,aa)});T.currentValueTotalHeight=
T.currentValueHeight+Q.currentvalue.offset;X.remove()}T.height=T.currentValueTotalHeight+J.tickOffset+Q.ticklen+J.labelOffset+T.labelHeight+Q.pad.t+Q.pad.b;S="left";u.isRightAnchor(Q)&&(T.lx-=T.outerLength,S="right");u.isCenterAnchor(Q)&&(T.lx-=T.outerLength/2,S="center");V="top";u.isBottomAnchor(Q)&&(T.ly-=T.height,V="bottom");u.isMiddleAnchor(Q)&&(T.ly-=T.height/2,V="middle");T.outerLength=Math.ceil(T.outerLength);T.height=Math.ceil(T.height);T.lx=Math.round(T.lx);T.ly=Math.round(T.ly);V={y:Q.y,
b:T.height*E[V],t:T.height*M[V]};"fraction"===Q.lenmode?(V.l=0,V.xl=Q.x-Q.len*M[S],V.r=0,V.xr=Q.x+Q.len*E[S]):(V.x=Q.x,V.l=T.outerLength*M[S],V.r=T.outerLength*E[S]);z.autoMargin(L,J.autoMarginIdRoot+Q._index,V)}function f(L,Q,S){(S.steps[S.active]||{}).visible||(S.active=S._visibleSteps[0]._index);Q.call(b,S).call(y,S).call(h,S).call(d,S).call(x,L,S).call(k,L,S);L=S._dims;D.setTranslate(Q,L.lx+S.pad.l,L.ly+S.pad.t);Q.call(r,S,!1);Q.call(b,S)}function b(L,Q,S){if(Q.currentvalue.visible){var R=Q._dims;
switch(Q.currentvalue.xanchor){case "right":var O=R.inputAreaLength-J.currentValueInset-R.currentValueMaxWidth;var T="left";break;case "center":O=.5*R.inputAreaLength;T="middle";break;default:O=J.currentValueInset,T="left"}L=u.ensureSingle(L,"text",J.labelClass,function(ba){ba.attr({"text-anchor":T,"data-notex":1})});var V=Q.currentvalue.prefix?Q.currentvalue.prefix:"";if("string"===typeof S)V+=S;else{S=Q.steps[Q.active].label;var X=Q._gd._fullLayout._meta;X&&(S=u.templateString(S,X));V+=S}Q.currentvalue.suffix&&
(V+=Q.currentvalue.suffix);L.call(D.font,Q.currentvalue.font).text(V).call(B.convertToTspans,Q._gd);V=B.lineCount(L);B.positionText(L,O,(R.currentValueMaxLines+1-V)*Q.currentvalue.font.size*N);return L}}function k(L,Q,S){u.ensureSingle(L,"rect",J.gripRectClass,function(R){R.call(g,Q,L,S).style("pointer-events","all")}).attr({width:J.gripWidth,height:J.gripHeight,rx:J.gripRadius,ry:J.gripRadius}).call(F.stroke,S.bordercolor).call(F.fill,S.bgcolor).style("stroke-width",S.borderwidth+"px")}function e(L,
Q,S){L=u.ensureSingle(L,"text",J.labelClass,function(O){O.attr({"text-anchor":"middle","data-notex":1})});Q=Q.step.label;var R=S._gd._fullLayout._meta;R&&(Q=u.templateString(Q,R));L.call(D.font,S.font).text(Q).call(B.convertToTspans,S._gd);return L}function h(L,Q){L=u.ensureSingle(L,"g",J.labelsClass);var S=Q._dims;L=L.selectAll("g."+J.labelGroupClass).data(S.labelSteps);L.enter().append("g").classed(J.labelGroupClass,!0);L.exit().remove();L.each(function(R){var O=A.select(this);O.call(e,R,Q);D.setTranslate(O,
t(Q,R.fraction),J.tickOffset+Q.ticklen+Q.font.size*N+J.labelOffset+S.currentValueTotalHeight)})}function l(L,Q,S,R,O){R=S._visibleSteps[Math.round(R*(S._stepCount-1))]._index;R!==S.active&&c(L,Q,S,R,!0,O)}function c(L,Q,S,R,O,T){var V=S.active;S.active=R;I(L.layout,J.name,S).applyUpdate("active",R);R=S.steps[S.active];Q.call(r,S,T);Q.call(b,S);L.emit("plotly_sliderchange",{slider:S,step:S.steps[S.active],interaction:O,previousActive:V});R&&R.method&&O&&(Q._nextMethod?(Q._nextMethod.step=R,Q._nextMethod.doCallback=
O,Q._nextMethod.doTransition=T):(Q._nextMethod={step:R,doCallback:O,doTransition:T},Q._nextMethodRaf=window.requestAnimationFrame(function(){var X=Q._nextMethod.step;X.method&&(X.execute&&z.executeAPICommand(L,X.method,X.args),Q._nextMethod=null,Q._nextMethodRaf=null)})))}function g(L,Q,S){var R=S.node(),O=A.select(Q);L.on("mousedown",function(){var T=S.data()[0];Q.emit("plotly_sliderstart",{slider:T});var V=S.select("."+J.gripRectClass);A.event.stopPropagation();A.event.preventDefault();V.call(F.fill,
T.activebgcolor);var X=w(T,A.mouse(R)[0]);l(Q,S,T,X,!0);T._dragging=!0;O.on("mousemove",function(){var ba=S.data()[0],aa=w(ba,A.mouse(R)[0]);l(Q,S,ba,aa,!1)});O.on("mouseup",function(){var ba=S.data()[0];ba._dragging=!1;V.call(F.fill,ba.bgcolor);O.on("mouseup",null);O.on("mousemove",null);Q.emit("plotly_sliderend",{slider:ba,step:ba.steps[ba.active]})})})}function d(L,Q){L=L.selectAll("rect."+J.tickRectClass).data(Q._visibleSteps);var S=Q._dims;L.enter().append("rect").classed(J.tickRectClass,!0);
L.exit().remove();L.attr({width:Q.tickwidth+"px","shape-rendering":"crispEdges"});L.each(function(R,O){R=0===O%S.labelStride;var T=A.select(this);T.attr({height:R?Q.ticklen:Q.minorticklen}).call(F.fill,Q.tickcolor);D.setTranslate(T,t(Q,O/(Q._stepCount-1))-.5*Q.tickwidth,(R?J.tickOffset:J.minorTickOffset)+S.currentValueTotalHeight)})}function p(L){var Q=L._dims;Q.labelSteps=[];for(var S=L._stepCount,R=0;R<S;R+=Q.labelStride)Q.labelSteps.push({fraction:R/(S-1),step:L._visibleSteps[R]})}function r(L,
Q,S){L=L.select("rect."+J.gripRectClass);for(var R=0,O=0;O<Q._stepCount;O++)if(Q._visibleSteps[O]._index===Q.active){R=O;break}R=t(Q,R/(Q._stepCount-1));Q._invokingCommand||(S&&0<Q.transition.duration&&(L=L.transition().duration(Q.transition.duration).ease(Q.transition.easing)),L.attr("transform","translate("+(R-.5*J.gripWidth)+","+Q._dims.currentValueTotalHeight+")"))}function t(L,Q){L=L._dims;return L.inputAreaStart+J.stepInset+(L.inputAreaLength-2*J.stepInset)*Math.min(1,Math.max(0,Q))}function w(L,
Q){L=L._dims;return Math.min(1,Math.max(0,(Q-J.stepInset-L.inputAreaStart)/(L.inputAreaLength-2*J.stepInset-2*L.inputAreaStart)))}function x(L,Q,S){var R=S._dims,O=u.ensureSingle(L,"rect",J.railTouchRectClass,function(T){T.call(g,Q,L,S).style("pointer-events","all")});O.attr({width:R.inputAreaLength,height:Math.max(R.inputAreaWidth,J.tickOffset+S.ticklen+R.labelHeight)}).call(F.fill,S.bgcolor).attr("opacity",0);D.setTranslate(O,0,R.currentValueTotalHeight)}function y(L,Q){var S=Q._dims,R=S.inputAreaLength-
2*J.railInset;L=u.ensureSingle(L,"rect",J.railRectClass);L.attr({width:R,height:J.railWidth,rx:J.railRadius,ry:J.railRadius,"shape-rendering":"crispEdges"}).call(F.stroke,Q.bordercolor).call(F.fill,Q.bgcolor).style("stroke-width",Q.borderwidth+"px");D.setTranslate(L,J.railInset,.5*(S.inputAreaWidth-J.railWidth)+S.currentValueTotalHeight)}var A=a("d3"),z=a("../../plots/plots"),F=a("../color"),D=a("../drawing"),u=a("../../lib"),B=a("../../lib/svg_text_utils"),I=a("../../plot_api/plot_template").arrayEditor,
J=a("./constants");a=a("../../constants/alignment");var N=a.LINE_SPACING,M=a.FROM_TL,E=a.FROM_BR;G.exports=function(L){function Q(T){T._commandObserver&&(T._commandObserver.remove(),delete T._commandObserver);z.autoMargin(L,J.autoMarginIdRoot+T._index)}var S=L._fullLayout,R=q(S,L);S=S._infolayer.selectAll("g."+J.containerClassName).data(0<R.length?[0]:[]);S.enter().append("g").classed(J.containerClassName,!0).style("cursor","ew-resize");S.exit().each(function(){A.select(this).selectAll("g."+J.groupClassName).each(Q)}).remove();
if(0!==R.length){S=S.selectAll("g."+J.groupClassName).data(R,n);S.enter().append("g").classed(J.groupClassName,!0);S.exit().each(Q).remove();for(var O=0;O<R.length;O++)m(L,R[O]);S.each(function(T){var V=A.select(this);p(T);z.manageCommandObserver(L,T,T._visibleSteps,function(X){var ba=V.data()[0];ba.active!==X.index&&(ba._dragging||c(L,V,ba,X.index,!1,!0))});f(L,A.select(this),T)})}}},{"../../constants/alignment":717,"../../lib":750,"../../lib/svg_text_utils":774,"../../plot_api/plot_template":788,
"../../plots/plots":862,"../color":615,"../drawing":637,"./constants":706,d3:169}],709:[function(a,G,C){C=a("./constants");G.exports={moduleType:"component",name:C.name,layoutAttributes:a("./attributes"),supplyLayoutDefaults:a("./defaults"),draw:a("./draw")}},{"./attributes":705,"./constants":706,"./defaults":707,"./draw":708}],710:[function(a,G,C){var q=a("d3"),n=a("fast-isnumeric"),m=a("../../plots/plots"),f=a("../../registry"),b=a("../../lib"),k=a("../drawing"),e=a("../color"),h=a("../../lib/svg_text_utils"),
l=a("../../constants/interactions"),c=a("../../constants/alignment").OPPOSITE_SIDE,g=/ [XY][0-9]* /;G.exports={draw:function(d,p,r){function t(V){b.syncOrAsync([w,x],V)}function w(V){if(B){var X="";B.rotate&&(X+="rotate("+[B.rotate,u.x,u.y]+")");B.offset&&(X+="translate(0, "+B.offset+")")}else X=null;V.attr("transform",X);V.style({"font-family":Q,"font-size":q.round(S,2)+"px",fill:e.rgb(R),opacity:N*e.opacity(R),"font-weight":m.fontWeight}).attr(u).call(h.convertToTspans,d);return m.previousPromises(d)}
function x(V){V=q.select(V.node().parentNode);if(D&&D.selection&&D.side&&L){V.attr("transform",null);var X=c[D.side],ba="left"===D.side||"top"===D.side?-1:1,aa=n(D.pad)?D.pad:2,ka=k.bBox(V.node()),ha={left:0,top:0,right:J.width,bottom:J.height};ha=D.maxShift||ba*(ha[D.side]-ka[D.side]);var ca=0;if(0>ha)ca=ha;else{var sa=D.offsetLeft||0,ma=D.offsetTop||0;ka.left-=sa;ka.right-=sa;ka.top-=ma;ka.bottom-=ma;D.selection.each(function(){var ra=k.bBox(this);b.bBoxIntersect(ka,ra,aa)&&(ca=Math.max(ca,ba*(ra[D.side]-
ka[X])+aa))});ca=Math.min(ha,ca)}(0<ca||0>ha)&&V.attr("transform","translate("+{left:[-ca,0],right:[ca,0],top:[0,-ca],bottom:[0,ca]}[D.side]+")")}}function y(){N=0;M=!0;T.text(z).on("mouseover.opacity",function(){q.select(this).transition().duration(l.SHOW_PLACEHOLDER).style("opacity",1)}).on("mouseout.opacity",function(){q.select(this).transition().duration(l.HIDE_PLACEHOLDER).style("opacity",0)})}var A=r.propName,z=r.placeholder,F=r.traceIndex,D=r.avoid||{},u=r.attributes,B=r.transform,I=r.containerGroup,
J=d._fullLayout,N=1,M=!1,E=r.propContainer.title,L=(E&&E.text?E.text:"").trim();E=E&&E.font?E.font:{};var Q=E.family,S=E.size,R=E.color,O;"title.text"===A?O="titleText":-1!==A.indexOf("axis")?O="axisTitleText":A.indexOf(!0)&&(O="colorbarTitleText");O=d._context.edits[O];""===L?N=0:L.replace(g," % ")===z.replace(g," % ")&&(N=.2,M=!0,O||(L=""));r._meta?L=b.templateString(L,r._meta):J._meta&&(L=b.templateString(L,J._meta));r=L||O;I||(I=b.ensureSingle(J._infolayer,"g","g-"+p));var T=I.selectAll("text").data(r?
[0]:[]);T.enter().append("text");T.text(L).attr("class",p);T.exit().remove();if(!r)return I;T.call(t);if(O){if(L)T.on(".opacity",null);else y();T.call(h.makeEditable,{gd:d}).on("edit",function(V){void 0!==F?f.call("_guiRestyle",d,A,V,F):f.call("_guiRelayout",d,A,V)}).on("cancel",function(){this.text(this.attr("data-unformatted")).call(t)}).on("input",function(V){this.text(V||" ").call(h.positionText,u.x,u.y)})}T.classed("js-placeholder",M);return I}}},{"../../constants/alignment":717,"../../constants/interactions":724,
"../../lib":750,"../../lib/svg_text_utils":774,"../../plots/plots":862,"../../registry":882,"../color":615,"../drawing":637,d3:169,"fast-isnumeric":241}],711:[function(a,G,C){C=a("../../plots/font_attributes");var q=a("../color/attributes"),n=a("../../lib/extend").extendFlat,m=a("../../plot_api/edit_types").overrideAll,f=a("../../plots/pad_attributes");a=a("../../plot_api/plot_template").templatedArray;var b=a("button",{visible:{valType:"boolean"},method:{valType:"enumerated",values:["restyle","relayout",
"animate","update","skip"],dflt:"restyle"},args:{valType:"info_array",freeLength:!0,items:[{valType:"any"},{valType:"any"},{valType:"any"}]},args2:{valType:"info_array",freeLength:!0,items:[{valType:"any"},{valType:"any"},{valType:"any"}]},label:{valType:"string",dflt:""},execute:{valType:"boolean",dflt:!0}});G.exports=m(a("updatemenu",{_arrayAttrRegexps:[/^updatemenus\[(0|[1-9][0-9]+)\]\.buttons/],visible:{valType:"boolean"},type:{valType:"enumerated",values:["dropdown","buttons"],dflt:"dropdown"},
direction:{valType:"enumerated",values:["left","right","up","down"],dflt:"down"},active:{valType:"integer",min:-1,dflt:0},showactive:{valType:"boolean",dflt:!0},buttons:b,x:{valType:"number",min:-2,max:3,dflt:-.05},xanchor:{valType:"enumerated",values:["auto","left","center","right"],dflt:"right"},y:{valType:"number",min:-2,max:3,dflt:1},yanchor:{valType:"enumerated",values:["auto","top","middle","bottom"],dflt:"top"},pad:n(f({editType:"arraydraw"}),{}),font:C({}),bgcolor:{valType:"color"},bordercolor:{valType:"color",
dflt:q.borderLine},borderwidth:{valType:"number",min:0,dflt:1,editType:"arraydraw"}}),"arraydraw","from-root")},{"../../lib/extend":740,"../../plot_api/edit_types":781,"../../plot_api/plot_template":788,"../../plots/font_attributes":827,"../../plots/pad_attributes":861,"../color/attributes":614}],712:[function(a,G,C){G.exports={name:"updatemenus",containerClassName:"updatemenu-container",headerGroupClassName:"updatemenu-header-group",headerClassName:"updatemenu-header",headerArrowClassName:"updatemenu-header-arrow",
dropdownButtonGroupClassName:"updatemenu-dropdown-button-group",dropdownButtonClassName:"updatemenu-dropdown-button",buttonClassName:"updatemenu-button",itemRectClassName:"updatemenu-item-rect",itemTextClassName:"updatemenu-item-text",menuIndexAttrName:"updatemenu-active-index",autoMarginIdRoot:"updatemenu-",blankHeaderOpts:{label:"  "},minWidth:30,minHeight:30,textPadX:24,arrowPadX:16,rx:2,ry:2,textOffsetX:12,textOffsetY:3,arrowOffsetX:4,gapButtonHeader:5,gapButton:2,activeColor:"#F4FAFF",hoverColor:"#F4FAFF",
arrowSymbol:{left:"◄",right:"►",up:"▲",down:"▼"}}},{}],713:[function(a,G,C){function q(h,l,c){function g(p,r){return m.coerce(h,l,b,p,r)}var d=f(h,l,{name:"buttons",handleItemDefaults:n});g("visible",0<d.length)&&(g("active"),g("direction"),g("type"),g("showactive"),g("x"),g("y"),m.noneOrAll(h,l,["x","y"]),g("xanchor"),g("yanchor"),g("pad.t"),g("pad.r"),g("pad.b"),g("pad.l"),m.coerceFont(g,"font",c.font),g("bgcolor",c.paper_bgcolor),g("bordercolor"),g("borderwidth"))}function n(h,l){function c(g,
d){return m.coerce(h,l,e,g,d)}c("visible","skip"===h.method||Array.isArray(h.args))&&(c("method"),c("args"),c("args2"),c("label"),c("execute"))}var m=a("../../lib"),f=a("../../plots/array_container_defaults"),b=a("./attributes"),k=a("./constants").name,e=b.buttons;G.exports=function(h,l){f(h,l,{name:k,handleItemDefaults:q})}},{"../../lib":750,"../../plots/array_container_defaults":794,"./attributes":711,"./constants":712}],714:[function(a,G,C){function q(N){return N._index}function n(N,M){return+N.attr(I.menuIndexAttrName)===
M._index}function m(N,M,E,L,Q,S,R,O){M.active=R;u(N.layout,I.name,M).applyUpdate("active",R);"buttons"===M.type?b(N,L,null,null,M):"dropdown"===M.type&&(Q.attr(I.menuIndexAttrName,"-1"),f(N,L,Q,S,M),O||b(N,L,Q,S,M))}function f(N,M,E,L,Q){var S=F.ensureSingle(M,"g",I.headerClassName,function(V){V.style("pointer-events","all")}),R=Q._dims,O={y:Q.pad.t,yPad:0,x:Q.pad.l,xPad:0,index:0},T={width:R.headerWidth,height:R.headerHeight};S.call(h,Q,Q.buttons[Q.active]||I.blankHeaderOpts,N).call(t,Q,O,T);F.ensureSingle(M,
"text",I.headerArrowClassName,function(V){V.attr("text-anchor","end").call(z.font,Q.font).text(I.arrowSymbol[Q.direction])}).attr({x:R.headerWidth-I.arrowOffsetX+Q.pad.l,y:R.headerHeight/2+I.textOffsetY+Q.pad.t});S.on("click",function(){E.call(w,String(n(E,Q)?-1:Q._index));b(N,M,E,L,Q)});S.on("mouseover",function(){S.call(d)});S.on("mouseout",function(){S.call(p,Q)});z.setTranslate(M,R.lx,R.ly)}function b(N,M,E,L,Q){E||(E=M,E.attr("pointer-events","all"));var S=-1!==+E.attr(I.menuIndexAttrName)||
"buttons"===Q.type?Q.buttons:[],R="dropdown"===Q.type?I.dropdownButtonClassName:I.buttonClassName,O=E.selectAll("g."+R).data(F.filterVisible(S));S=O.enter().append("g").classed(R,!0);R=O.exit();"dropdown"===Q.type?(S.attr("opacity","0").transition().attr("opacity","1"),R.transition().attr("opacity","0").remove()):R.remove();var T=0,V=0;S=Q._dims;R=-1!==["up","down"].indexOf(Q.direction);"dropdown"===Q.type&&(R?V=S.headerHeight+I.gapButtonHeader:T=S.headerWidth+I.gapButtonHeader);"dropdown"===Q.type&&
"up"===Q.direction&&(V=-I.gapButtonHeader+I.gapButton-S.openHeight);"dropdown"===Q.type&&"left"===Q.direction&&(T=-I.gapButtonHeader+I.gapButton-S.openWidth);var X={x:S.lx+T+Q.pad.l,y:S.ly+V+Q.pad.t,yPad:I.gapButton,xPad:I.gapButton,index:0};T={l:X.x+Q.borderwidth,t:X.y+Q.borderwidth};O.each(function(ba,aa){var ka=x.select(this);ka.call(h,Q,ba,N).call(t,Q,X);ka.on("click",function(){x.event.defaultPrevented||(ba.execute&&(ba.args2&&Q.active===aa?(m(N,Q,ba,M,E,L,-1),y.executeAPICommand(N,ba.method,
ba.args2)):(m(N,Q,ba,M,E,L,aa),y.executeAPICommand(N,ba.method,ba.args))),N.emit("plotly_buttonclicked",{menu:Q,button:ba,active:Q.active}))});ka.on("mouseover",function(){ka.call(d)});ka.on("mouseout",function(){ka.call(p,Q);O.call(g,Q)})});O.call(g,Q);R?(T.w=Math.max(S.openWidth,S.headerWidth),T.h=X.y-T.t):(T.w=X.x-T.l,T.h=Math.max(S.openHeight,S.headerHeight));T.direction=Q.direction;L&&(O.size()?k(N,M,E,L,Q,T):e(L))}function k(N,M,E,L,Q,S){M=Q.direction;N=Q._dims;Q=Q.active;var R,O;if("up"===
M||"down"===M)for(M=O=0;M<Q;M++)O+=N.heights[M]+I.gapButton;else for(M=R=0;M<Q;M++)R+=N.widths[M]+I.gapButton;L.enable(S,R,O);L.hbar&&L.hbar.attr("opacity","0").transition().attr("opacity","1");L.vbar&&L.vbar.attr("opacity","0").transition().attr("opacity","1")}function e(N){var M=!!N.hbar,E=!!N.vbar;M&&N.hbar.transition().attr("opacity","0").each("end",function(){M=!1;E||N.disable()});E&&N.vbar.transition().attr("opacity","0").each("end",function(){E=!1;M||N.disable()})}function h(N,M,E,L){N.call(l,
M).call(c,M,E,L)}function l(N,M){F.ensureSingle(N,"rect",I.itemRectClassName,function(E){E.attr({rx:I.rx,ry:I.ry,"shape-rendering":"crispEdges"})}).call(A.stroke,M.bordercolor).call(A.fill,M.bgcolor).style("stroke-width",M.borderwidth+"px")}function c(N,M,E,L){N=F.ensureSingle(N,"text",I.itemTextClassName,function(S){S.attr({"text-anchor":"start","data-notex":1})});E=E.label;var Q=L._fullLayout._meta;Q&&(E=F.templateString(E,Q));N.call(z.font,M.font).text(E).call(D.convertToTspans,L)}function g(N,
M){var E=M.active;N.each(function(L,Q){L=x.select(this);Q===E&&M.showactive&&L.select("rect."+I.itemRectClassName).call(A.fill,I.activeColor)})}function d(N){N.select("rect."+I.itemRectClassName).call(A.fill,I.hoverColor)}function p(N,M){N.select("rect."+I.itemRectClassName).call(A.fill,M.bgcolor)}function r(N,M){var E=M._dims={width1:0,height1:0,heights:[],widths:[],totalWidth:0,totalHeight:0,openWidth:0,openHeight:0,lx:0,ly:0},L=z.tester.selectAll("g."+I.dropdownButtonClassName).data(F.filterVisible(M.buttons));
L.enter().append("g").classed(I.dropdownButtonClassName,!0);var Q=-1!==["up","down"].indexOf(M.direction);L.each(function(T,V){var X=x.select(this);X.call(h,M,T,N);X=X.select("."+I.itemTextClassName);T=X.node()&&z.bBox(X.node()).width;T=Math.max(T+I.textPadX,I.minWidth);var ba=M.font.size*B;X=D.lineCount(X);X=Math.max(ba*X,I.minHeight)+I.textOffsetY;X=Math.ceil(X);T=Math.ceil(T);E.widths[V]=T;E.heights[V]=X;E.height1=Math.max(E.height1,X);E.width1=Math.max(E.width1,T);Q?(E.totalWidth=Math.max(E.totalWidth,
T),E.openWidth=E.totalWidth,E.totalHeight+=X+I.gapButton,E.openHeight+=X+I.gapButton):(E.totalWidth+=T+I.gapButton,E.openWidth+=T+I.gapButton,E.totalHeight=Math.max(E.totalHeight,X),E.openHeight=E.totalHeight)});Q?E.totalHeight-=I.gapButton:E.totalWidth-=I.gapButton;E.headerWidth=E.width1+I.arrowPadX;E.headerHeight=E.height1;"dropdown"===M.type&&(Q?(E.width1+=I.arrowPadX,E.totalHeight=E.height1):E.totalWidth=E.width1,E.totalWidth+=I.arrowPadX);L.remove();L=E.totalWidth+M.pad.l+M.pad.r;var S=E.totalHeight+
M.pad.t+M.pad.b,R=N._fullLayout._size;E.lx=R.l+R.w*M.x;E.ly=R.t+R.h*(1-M.y);R="left";F.isRightAnchor(M)&&(E.lx-=L,R="right");F.isCenterAnchor(M)&&(E.lx-=L/2,R="center");var O="top";F.isBottomAnchor(M)&&(E.ly-=S,O="bottom");F.isMiddleAnchor(M)&&(E.ly-=S/2,O="middle");E.totalWidth=Math.ceil(E.totalWidth);E.totalHeight=Math.ceil(E.totalHeight);E.lx=Math.round(E.lx);E.ly=Math.round(E.ly);y.autoMargin(N,I.autoMarginIdRoot+M._index,{x:M.x,y:M.y,l:L*({right:1,center:.5}[R]||0),r:L*({left:1,center:.5}[R]||
0),b:S*({top:1,middle:.5}[O]||0),t:S*({bottom:1,middle:.5}[O]||0)})}function t(N,M,E,L){L=L||{};var Q=N.select("."+I.itemRectClassName),S=N.select("."+I.itemTextClassName),R=M.borderwidth,O=E.index,T=M._dims;z.setTranslate(N,R+E.x,R+E.y);N=-1!==["up","down"].indexOf(M.direction);R=L.height||(N?T.heights[O]:T.height1);Q.attr({x:0,y:0,width:L.width||(N?T.width1:T.widths[O]),height:R});M=M.font.size*B;L=D.lineCount(S);D.positionText(S,I.textOffsetX,R/2-(L-1)*M/2+I.textOffsetY);N?E.y+=T.heights[O]+E.yPad:
E.x+=T.widths[O]+E.xPad;E.index++}function w(N,M){N.attr(I.menuIndexAttrName,M||"-1").selectAll("g."+I.dropdownButtonClassName).remove()}var x=a("d3"),y=a("../../plots/plots"),A=a("../color"),z=a("../drawing"),F=a("../../lib"),D=a("../../lib/svg_text_utils"),u=a("../../plot_api/plot_template").arrayEditor,B=a("../../constants/alignment").LINE_SPACING,I=a("./constants"),J=a("./scrollbox");G.exports=function(N){function M(T){y.autoMargin(N,I.autoMarginIdRoot+T._index)}var E=N._fullLayout,L=F.filterVisible(E[I.name]),
Q=E._menulayer.selectAll("g."+I.containerClassName).data(0<L.length?[0]:[]);Q.enter().append("g").classed(I.containerClassName,!0).style("cursor","pointer");Q.exit().each(function(){x.select(this).selectAll("g."+I.headerGroupClassName).each(M)}).remove();if(0!==L.length){var S=Q.selectAll("g."+I.headerGroupClassName).data(L,q);S.enter().append("g").classed(I.headerGroupClassName,!0);var R=F.ensureSingle(Q,"g",I.dropdownButtonGroupClassName,function(T){T.style("pointer-events","all")});for(Q=0;Q<L.length;Q++)r(N,
L[Q]);var O=new J(N,R,"updatemenus"+E._uid);S.enter().size()&&(R.node().parentNode.appendChild(R.node()),R.call(w));S.exit().each(function(T){R.call(w);M(T)}).remove();S.each(function(T){var V=x.select(this),X="dropdown"===T.type?R:null;y.manageCommandObserver(N,T,T.buttons,function(ba){m(N,T,T.buttons[ba.index],V,X,O,ba.index,!0)});"dropdown"===T.type?(f(N,V,R,O,T),n(R,T)&&b(N,V,R,O,T)):b(N,V,null,null,T)})}}},{"../../constants/alignment":717,"../../lib":750,"../../lib/svg_text_utils":774,"../../plot_api/plot_template":788,
"../../plots/plots":862,"../color":615,"../drawing":637,"./constants":712,"./scrollbox":716,d3:169}],715:[function(a,G,C){arguments[4][709][0].apply(C,arguments)},{"./attributes":711,"./constants":712,"./defaults":713,"./draw":714,dup:709}],716:[function(a,G,C){function q(k,e,h){this.gd=k;this.container=e;this.id=h;this.vbar=this.hbar=this.translateY=this.translateX=this.position=null;this.bg=this.container.selectAll("rect.scrollbox-bg").data([0]);this.bg.exit().on(".drag",null).on("wheel",null).remove();
this.bg.enter().append("rect").classed("scrollbox-bg",!0).style("pointer-events","all").attr({opacity:0,x:0,y:0,width:0,height:0})}G.exports=q;var n=a("d3"),m=a("../color"),f=a("../drawing"),b=a("../../lib");q.barWidth=2;q.barLength=20;q.barRadius=2;q.barPad=1;q.barColor="#808BA4";q.prototype.enable=function(k,e,h){var l=this.gd._fullLayout,c=l.width,g=l.height;this.position=k;k=this.position.l;var d=this.position.w,p=this.position.t,r=this.position.h,t=this.position.direction,w="down"===t,x="left"===
t,y="up"===t,A=d,z=r;w||x||"right"===t||y||(this.position.direction="down",w=!0);if(w||y){var F=k;var D=F+A;w?(y=p,t=Math.min(y+z,g)):(t=p+z,y=Math.max(t-z,0));z=t-y}else y=p,t=y+z,x?(D=k+A,F=Math.max(D-A,0)):(F=k,D=Math.min(F+A,c)),A=D-F;this._box={l:F,t:y,w:A,h:z};w=d>A;var u=q.barLength+2*q.barPad;x=q.barWidth+2*q.barPad;var B=p+r;B+x>g&&(B=g-x);g=this.container.selectAll("rect.scrollbar-horizontal").data(w?[0]:[]);g.exit().on(".drag",null).remove();g.enter().append("rect").classed("scrollbar-horizontal",
!0).call(m.fill,q.barColor);w?(this.hbar=g.attr({rx:q.barRadius,ry:q.barRadius,x:k,y:B,width:u,height:x}),this._hbarXMin=k+u/2,this._hbarTranslateMax=A-u):(delete this.hbar,delete this._hbarXMin,delete this._hbarTranslateMax);g=r>z;A=q.barWidth+2*q.barPad;u=q.barLength+2*q.barPad;B=k+d;B+A>c&&(B=c-A);c=this.container.selectAll("rect.scrollbar-vertical").data(g?[0]:[]);c.exit().on(".drag",null).remove();c.enter().append("rect").classed("scrollbar-vertical",!0).call(m.fill,q.barColor);g?(this.vbar=
c.attr({rx:q.barRadius,ry:q.barRadius,x:B,y:p,width:A,height:u}),this._vbarYMin=p+u/2,this._vbarTranslateMax=z-u):(delete this.vbar,delete this._vbarYMin,delete this._vbarTranslateMax);c=this.id;z=F-.5;D=g?D+A+.5:D+.5;y-=.5;t=w?t+x+.5:t+.5;l=l._topdefs.selectAll("#"+c).data(w||g?[0]:[]);l.exit().remove();l.enter().append("clipPath").attr("id",c).append("rect");w||g?(this._clipRect=l.select("rect").attr({x:Math.floor(z),y:Math.floor(y),width:Math.ceil(D)-Math.floor(z),height:Math.ceil(t)-Math.floor(y)}),
this.container.call(f.setClipUrl,c,this.gd),this.bg.attr({x:k,y:p,width:d,height:r})):(this.bg.attr({width:0,height:0}),this.container.on("wheel",null).on(".drag",null).call(f.setClipUrl,null),delete this._clipRect);if(w||g)l=n.behavior.drag().on("dragstart",function(){n.event.sourceEvent.preventDefault()}).on("drag",this._onBoxDrag.bind(this)),this.container.on("wheel",null).on("wheel",this._onBoxWheel.bind(this)).on(".drag",null).call(l),l=n.behavior.drag().on("dragstart",function(){n.event.sourceEvent.preventDefault();
n.event.sourceEvent.stopPropagation()}).on("drag",this._onBarDrag.bind(this)),w&&this.hbar.on(".drag",null).call(l),g&&this.vbar.on(".drag",null).call(l);this.setTranslate(e,h)};q.prototype.disable=function(){if(this.hbar||this.vbar)this.bg.attr({width:0,height:0}),this.container.on("wheel",null).on(".drag",null).call(f.setClipUrl,null),delete this._clipRect;this.hbar&&(this.hbar.on(".drag",null),this.hbar.remove(),delete this.hbar,delete this._hbarXMin,delete this._hbarTranslateMax);this.vbar&&(this.vbar.on(".drag",
null),this.vbar.remove(),delete this.vbar,delete this._vbarYMin,delete this._vbarTranslateMax)};q.prototype._onBoxDrag=function(){var k=this.translateX,e=this.translateY;this.hbar&&(k-=n.event.dx);this.vbar&&(e-=n.event.dy);this.setTranslate(k,e)};q.prototype._onBoxWheel=function(){var k=this.translateX,e=this.translateY;this.hbar&&(k+=n.event.deltaY);this.vbar&&(e+=n.event.deltaY);this.setTranslate(k,e)};q.prototype._onBarDrag=function(){var k=this.translateX,e=this.translateY;if(this.hbar){k+=this._hbarXMin;
var h=k+this._hbarTranslateMax;k=(b.constrain(n.event.x,k,h)-k)/(h-k)*(this.position.w-this._box.w)}this.vbar&&(e+=this._vbarYMin,h=e+this._vbarTranslateMax,e=(b.constrain(n.event.y,e,h)-e)/(h-e)*(this.position.h-this._box.h));this.setTranslate(k,e)};q.prototype.setTranslate=function(k,e){var h=this.position.w-this._box.w,l=this.position.h-this._box.h;k=b.constrain(k||0,0,h);e=b.constrain(e||0,0,l);this.translateX=k;this.translateY=e;this.container.call(f.setTranslate,this._box.l-this.position.l-
k,this._box.t-this.position.t-e);this._clipRect&&this._clipRect.attr({x:Math.floor(this.position.l+k-.5),y:Math.floor(this.position.t+e-.5)});this.hbar&&this.hbar.call(f.setTranslate,k+k/h*this._hbarTranslateMax,e);this.vbar&&this.vbar.call(f.setTranslate,k,e+e/l*this._vbarTranslateMax)}},{"../../lib":750,"../color":615,"../drawing":637,d3:169}],717:[function(a,G,C){G.exports={FROM_BL:{left:0,center:.5,right:1,bottom:0,middle:.5,top:1},FROM_TL:{left:0,center:.5,right:1,bottom:1,middle:.5,top:0},FROM_BR:{left:1,
center:.5,right:0,bottom:0,middle:.5,top:1},LINE_SPACING:1.3,CAP_SHIFT:.7,MID_SHIFT:.35,OPPOSITE_SIDE:{left:"right",right:"left",top:"bottom",bottom:"top"}}},{}],718:[function(a,G,C){G.exports={axisRefDescription:function(q,n,m){return["If set to a",q,"axis id (e.g. *"+q+"* or","*"+q+"2*), the `"+q+"` position refers to a",q,"coordinate. If set to *paper*, the `"+q+"`","position refers to the distance from the",n,"of the plotting area in normalized coordinates where *0* (*1*) corresponds to the",
n,"("+m+"). If set to a",q,"axis ID followed by *domain* (separated by a space), the position behaves like for *paper*, but refers to the distance in fractions of the domain length from the",n,"of the domain of that axis: e.g.,","*"+q+"2 domain* refers to the domain of the second",q," axis and a",q,"position of 0.5 refers to the point between the",n,"and the",m,"of the domain of the second",q,"axis."].join(" ")}}},{}],719:[function(a,G,C){G.exports={INCREASING:{COLOR:"#3D9970",SYMBOL:"▲"},DECREASING:{COLOR:"#FF4136",
SYMBOL:"▼"}}},{}],720:[function(a,G,C){G.exports={FORMAT_LINK:"https://github.com/d3/d3-3.x-api-reference/blob/master/Formatting.md#d3_format",DATE_FORMAT_LINK:"https://github.com/d3/d3-time-format#locale_format"}},{}],721:[function(a,G,C){G.exports={COMPARISON_OPS:"\x3d !\x3d \x3c \x3e\x3d \x3e \x3c\x3d".split(" "),COMPARISON_OPS2:["\x3d","\x3c","\x3e\x3d","\x3e","\x3c\x3d"],INTERVAL_OPS:"[] () [) (] ][ )( ]( )[".split(" "),SET_OPS:["{}","}{"],CONSTRAINT_REDUCTION:{"\x3d":"\x3d","\x3c":"\x3c","\x3c\x3d":"\x3c",
"\x3e":"\x3e","\x3e\x3d":"\x3e","[]":"[]","()":"[]","[)":"[]","(]":"[]","][":"][",")(":"][","](":"][",")[":"]["}}},{}],722:[function(a,G,C){G.exports={solid:[[],0],dot:[[.5,1],200],dash:[[.5,1],50],longdash:[[.5,1],10],dashdot:[[.5,.625,.875,1],50],longdashdot:[[.5,.7,.8,1],10]}},{}],723:[function(a,G,C){G.exports={circle:"●","circle-open":"○",square:"■","square-open":"□",diamond:"◆","diamond-open":"◇",cross:"+",x:"❌"}},{}],724:[function(a,G,C){G.exports={SHOW_PLACEHOLDER:100,HIDE_PLACEHOLDER:1E3,
DESELECTDIM:.2}},{}],725:[function(a,G,C){G.exports={BADNUM:void 0,FP_SAFE:Number.MAX_VALUE/1E4,ONEMAXYEAR:316224E5,ONEAVGYEAR:315576E5,ONEMINYEAR:31536E6,ONEMAXQUARTER:79488E5,ONEAVGQUARTER:78894E5,ONEMINQUARTER:76896E5,ONEMAXMONTH:26784E5,ONEAVGMONTH:26298E5,ONEMINMONTH:24192E5,ONEWEEK:6048E5,ONEDAY:864E5,ONEHOUR:36E5,ONEMIN:6E4,ONESEC:1E3,EPOCHJD:2440587.5,ALMOST_EQUAL:.999999,LOG_CLIP:10,MINUS_SIGN:"−"}},{}],726:[function(a,G,C){C.xmlns="http://www.w3.org/2000/xmlns/";C.svg="http://www.w3.org/2000/svg";
C.xlink="http://www.w3.org/1999/xlink";C.svgAttrs={xmlns:C.svg,"xmlns:xlink":C.xlink}},{}],727:[function(a,G,C){C.version=a("./version").version;a("es6-promise").polyfill();a("../build/plotcss");a("./fonts/mathjax_config")();G=a("./registry");G=C.register=G.register;for(var q=a("./plot_api"),n=Object.keys(q),m=0;m<n.length;m++){var f=n[m];"_"!==f.charAt(0)&&(C[f]=q[f]);G({moduleType:"apiMethod",name:f,fn:q[f]})}G(a("./traces/scatter"));G([a("./components/legend"),a("./components/fx"),a("./components/annotations"),
a("./components/annotations3d"),a("./components/shapes"),a("./components/images"),a("./components/updatemenus"),a("./components/sliders"),a("./components/rangeslider"),a("./components/rangeselector"),a("./components/grid"),a("./components/errorbars"),a("./components/colorscale"),a("./components/colorbar")]);G([a("./locale-en"),a("./locale-en-us")]);window.PlotlyLocales&&Array.isArray(window.PlotlyLocales)&&(G(window.PlotlyLocales),delete window.PlotlyLocales);C.Icons=a("./fonts/ploticon");C.Plots=
a("./plots/plots");C.Fx=a("./components/fx");C.Snapshot=a("./snapshot");C.PlotSchema=a("./plot_api/plot_schema");C.Queue=a("./lib/queue");C.d3=a("d3")},{"../build/plotcss":1,"./components/annotations":606,"./components/annotations3d":611,"./components/colorbar":621,"./components/colorscale":627,"./components/errorbars":643,"./components/fx":655,"./components/grid":659,"./components/images":664,"./components/legend":672,"./components/rangeselector":683,"./components/rangeslider":690,"./components/shapes":704,
"./components/sliders":709,"./components/updatemenus":715,"./fonts/mathjax_config":728,"./fonts/ploticon":729,"./lib/queue":765,"./locale-en":779,"./locale-en-us":778,"./plot_api":783,"./plot_api/plot_schema":787,"./plots/plots":862,"./registry":882,"./snapshot":887,"./traces/scatter":1170,"./version":1341,d3:169,"es6-promise":224}],728:[function(a,G,C){G.exports=function(){"undefined"!==typeof MathJax&&"local"!==(window.PlotlyConfig||{}).MathJaxConfig&&(MathJax.Hub.Config({messageStyle:"none",skipStartupTypeset:!0,
displayAlign:"left",tex2jax:{inlineMath:[["$","$"],["\\(","\\)"]]}}),MathJax.Hub.Configured())}},{}],729:[function(a,G,C){G.exports={undo:{width:857.1,height:1E3,path:"m857 350q0-87-34-166t-91-137-137-92-166-34q-96 0-183 41t-147 114q-4 6-4 13t5 11l76 77q6 5 14 5 9-1 13-7 41-53 100-82t126-29q58 0 110 23t92 61 61 91 22 111-22 111-61 91-92 61-110 23q-55 0-105-20t-90-57l77-77q17-16 8-38-10-23-33-23h-250q-15 0-25 11t-11 25v250q0 24 22 33 22 10 39-8l72-72q60 57 137 88t159 31q87 0 166-34t137-92 91-137 34-166z",
transform:"matrix(1 0 0 -1 0 850)"},home:{width:928.6,height:1E3,path:"m786 296v-267q0-15-11-26t-25-10h-214v214h-143v-214h-214q-15 0-25 10t-11 26v267q0 1 0 2t0 2l321 264 321-264q1-1 1-4z m124 39l-34-41q-5-5-12-6h-2q-7 0-12 3l-386 322-386-322q-7-4-13-4-7 2-12 7l-35 41q-4 5-3 13t6 12l401 334q18 15 42 15t43-15l136-114v109q0 8 5 13t13 5h107q8 0 13-5t5-13v-227l122-102q5-5 6-12t-4-13z",transform:"matrix(1 0 0 -1 0 850)"},"camera-retro":{width:1E3,height:1E3,path:"m518 386q0 8-5 13t-13 5q-37 0-63-27t-26-63q0-8 5-13t13-5 12 5 5 13q0 23 16 38t38 16q8 0 13 5t5 13z m125-73q0-59-42-101t-101-42-101 42-42 101 42 101 101 42 101-42 42-101z m-572-320h858v71h-858v-71z m643 320q0 89-62 152t-152 62-151-62-63-152 63-151 151-63 152 63 62 151z m-571 358h214v72h-214v-72z m-72-107h858v143h-462l-36-71h-360v-72z m929 143v-714q0-30-21-51t-50-21h-858q-29 0-50 21t-21 51v714q0 30 21 51t50 21h858q29 0 50-21t21-51z",
transform:"matrix(1 0 0 -1 0 850)"},zoombox:{width:1E3,height:1E3,path:"m1000-25l-250 251c40 63 63 138 63 218 0 224-182 406-407 406-224 0-406-182-406-406s183-406 407-406c80 0 155 22 218 62l250-250 125 125z m-812 250l0 438 437 0 0-438-437 0z m62 375l313 0 0-312-313 0 0 312z",transform:"matrix(1 0 0 -1 0 850)"},pan:{width:1E3,height:1E3,path:"m1000 350l-187 188 0-125-250 0 0 250 125 0-188 187-187-187 125 0 0-250-250 0 0 125-188-188 186-187 0 125 252 0 0-250-125 0 187-188 188 188-125 0 0 250 250 0 0-126 187 188z",
transform:"matrix(1 0 0 -1 0 850)"},zoom_plus:{width:875,height:1E3,path:"m1 787l0-875 875 0 0 875-875 0z m687-500l-187 0 0-187-125 0 0 187-188 0 0 125 188 0 0 187 125 0 0-187 187 0 0-125z",transform:"matrix(1 0 0 -1 0 850)"},zoom_minus:{width:875,height:1E3,path:"m0 788l0-876 875 0 0 876-875 0z m688-500l-500 0 0 125 500 0 0-125z",transform:"matrix(1 0 0 -1 0 850)"},autoscale:{width:1E3,height:1E3,path:"m250 850l-187 0-63 0 0-62 0-188 63 0 0 188 187 0 0 62z m688 0l-188 0 0-62 188 0 0-188 62 0 0 188 0 62-62 0z m-875-938l0 188-63 0 0-188 0-62 63 0 187 0 0 62-187 0z m875 188l0-188-188 0 0-62 188 0 62 0 0 62 0 188-62 0z m-125 188l-1 0-93-94-156 156 156 156 92-93 2 0 0 250-250 0 0-2 93-92-156-156-156 156 94 92 0 2-250 0 0-250 0 0 93 93 157-156-157-156-93 94 0 0 0-250 250 0 0 0-94 93 156 157 156-157-93-93 0 0 250 0 0 250z",
transform:"matrix(1 0 0 -1 0 850)"},tooltip_basic:{width:1500,height:1E3,path:"m375 725l0 0-375-375 375-374 0-1 1125 0 0 750-1125 0z",transform:"matrix(1 0 0 -1 0 850)"},tooltip_compare:{width:1125,height:1E3,path:"m187 786l0 2-187-188 188-187 0 0 937 0 0 373-938 0z m0-499l0 1-187-188 188-188 0 0 937 0 0 376-938-1z",transform:"matrix(1 0 0 -1 0 850)"},plotlylogo:{width:1542,height:1E3,path:"m0-10h182v-140h-182v140z m228 146h183v-286h-183v286z m225 714h182v-1000h-182v1000z m225-285h182v-715h-182v715z m225 142h183v-857h-183v857z m231-428h182v-429h-182v429z m225-291h183v-138h-183v138z",
transform:"matrix(1 0 0 -1 0 850)"},"z-axis":{width:1E3,height:1E3,path:"m833 5l-17 108v41l-130-65 130-66c0 0 0 38 0 39 0-1 36-14 39-25 4-15-6-22-16-30-15-12-39-16-56-20-90-22-187-23-279-23-261 0-341 34-353 59 3 60 228 110 228 110-140-8-351-35-351-116 0-120 293-142 474-142 155 0 477 22 477 142 0 50-74 79-163 96z m-374 94c-58-5-99-21-99-40 0-24 65-43 144-43 79 0 143 19 143 43 0 19-42 34-98 40v216h87l-132 135-133-135h88v-216z m167 515h-136v1c16 16 31 34 46 52l84 109v54h-230v-71h124v-1c-16-17-28-32-44-51l-89-114v-51h245v72z",
transform:"matrix(1 0 0 -1 0 850)"},"3d_rotate":{width:1E3,height:1E3,path:"m922 660c-5 4-9 7-14 11-359 263-580-31-580-31l-102 28 58-400c0 1 1 1 2 2 118 108 351 249 351 249s-62 27-100 42c88 83 222 183 347 122 16-8 30-17 44-27-2 1-4 2-6 4z m36-329c0 0 64 229-88 296-62 27-124 14-175-11 157-78 225-208 249-266 8-19 11-31 11-31 2 5 6 15 11 32-5-13-8-20-8-20z m-775-239c70-31 117-50 198-32-121 80-199 346-199 346l-96-15-58-12c0 0 55-226 155-287z m603 133l-317-139c0 0 4-4 19-14 7-5 24-15 24-15s-177-147-389 4c235-287 536-112 536-112l31-22 100 299-4-1z m-298-153c6-4 14-9 24-15 0 0-17 10-24 15z",
transform:"matrix(1 0 0 -1 0 850)"},camera:{width:1E3,height:1E3,path:"m500 450c-83 0-150-67-150-150 0-83 67-150 150-150 83 0 150 67 150 150 0 83-67 150-150 150z m400 150h-120c-16 0-34 13-39 29l-31 93c-6 15-23 28-40 28h-340c-16 0-34-13-39-28l-31-94c-6-15-23-28-40-28h-120c-55 0-100-45-100-100v-450c0-55 45-100 100-100h800c55 0 100 45 100 100v450c0 55-45 100-100 100z m-400-550c-138 0-250 112-250 250 0 138 112 250 250 250 138 0 250-112 250-250 0-138-112-250-250-250z m365 380c-19 0-35 16-35 35 0 19 16 35 35 35 19 0 35-16 35-35 0-19-16-35-35-35z",
transform:"matrix(1 0 0 -1 0 850)"},movie:{width:1E3,height:1E3,path:"m938 413l-188-125c0 37-17 71-44 94 64 38 107 107 107 187 0 121-98 219-219 219-121 0-219-98-219-219 0-61 25-117 66-156h-115c30 33 49 76 49 125 0 103-84 187-187 187s-188-84-188-187c0-57 26-107 65-141-38-22-65-62-65-109v-250c0-70 56-126 125-126h500c69 0 125 56 125 126l188-126c34 0 62 28 62 63v375c0 35-28 63-62 63z m-750 0c-69 0-125 56-125 125s56 125 125 125 125-56 125-125-56-125-125-125z m406-1c-87 0-157 70-157 157 0 86 70 156 157 156s156-70 156-156-70-157-156-157z",
transform:"matrix(1 0 0 -1 0 850)"},question:{width:857.1,height:1E3,path:"m500 82v107q0 8-5 13t-13 5h-107q-8 0-13-5t-5-13v-107q0-8 5-13t13-5h107q8 0 13 5t5 13z m143 375q0 49-31 91t-77 65-95 23q-136 0-207-119-9-14 4-24l74-55q4-4 10-4 9 0 14 7 30 38 48 51 19 14 48 14 27 0 48-15t21-33q0-21-11-34t-38-25q-35-16-65-48t-29-70v-20q0-8 5-13t13-5h107q8 0 13 5t5 13q0 10 12 27t30 28q18 10 28 16t25 19 25 27 16 34 7 45z m214-107q0-117-57-215t-156-156-215-58-216 58-155 156-58 215 58 215 155 156 216 58 215-58 156-156 57-215z",
transform:"matrix(1 0 0 -1 0 850)"},disk:{width:857.1,height:1E3,path:"m214-7h429v214h-429v-214z m500 0h72v500q0 8-6 21t-11 20l-157 156q-5 6-19 12t-22 5v-232q0-22-15-38t-38-16h-322q-22 0-37 16t-16 38v232h-72v-714h72v232q0 22 16 38t37 16h465q22 0 38-16t15-38v-232z m-214 518v178q0 8-5 13t-13 5h-107q-7 0-13-5t-5-13v-178q0-8 5-13t13-5h107q7 0 13 5t5 13z m357-18v-518q0-22-15-38t-38-16h-750q-23 0-38 16t-16 38v750q0 22 16 38t38 16h517q23 0 50-12t42-26l156-157q16-15 27-42t11-49z",transform:"matrix(1 0 0 -1 0 850)"},
drawopenpath:{width:70,height:70,path:"M33.21,85.65a7.31,7.31,0,0,1-2.59-.48c-8.16-3.11-9.27-19.8-9.88-41.3-.1-3.58-.19-6.68-.35-9-.15-2.1-.67-3.48-1.43-3.79-2.13-.88-7.91,2.32-12,5.86L3,32.38c1.87-1.64,11.55-9.66,18.27-6.9,2.13.87,4.75,3.14,5.17,9,.17,2.43.26,5.59.36,9.25a224.17,224.17,0,0,0,1.5,23.4c1.54,10.76,4,12.22,4.48,12.4.84.32,2.79-.46,5.76-3.59L43,80.07C41.53,81.57,37.68,85.64,33.21,85.65ZM74.81,69a11.34,11.34,0,0,0,6.09-6.72L87.26,44.5,74.72,32,56.9,38.35c-2.37.86-5.57,3.42-6.61,6L38.65,72.14l8.42,8.43ZM55,46.27a7.91,7.91,0,0,1,3.64-3.17l14.8-5.3,8,8L76.11,60.6l-.06.19a6.37,6.37,0,0,1-3,3.43L48.25,74.59,44.62,71Zm16.57,7.82A6.9,6.9,0,1,0,64.64,61,6.91,6.91,0,0,0,71.54,54.09Zm-4.05,0a2.85,2.85,0,1,1-2.85-2.85A2.86,2.86,0,0,1,67.49,54.09Zm-4.13,5.22L60.5,56.45,44.26,72.7l2.86,2.86ZM97.83,35.67,84.14,22l-8.57,8.57L89.26,44.24Zm-13.69-8,8,8-2.85,2.85-8-8Z",
transform:"matrix(1 0 0 1 -15 -15)"},drawclosedpath:{width:90,height:90,path:"M88.41,21.12a26.56,26.56,0,0,0-36.18,0l-2.07,2-2.07-2a26.57,26.57,0,0,0-36.18,0,23.74,23.74,0,0,0,0,34.8L48,90.12a3.22,3.22,0,0,0,4.42,0l36-34.21a23.73,23.73,0,0,0,0-34.79ZM84,51.24,50.16,83.35,16.35,51.25a17.28,17.28,0,0,1,0-25.47,20,20,0,0,1,27.3,0l4.29,4.07a3.23,3.23,0,0,0,4.44,0l4.29-4.07a20,20,0,0,1,27.3,0,17.27,17.27,0,0,1,0,25.46ZM66.76,47.68h-33v6.91h33ZM53.35,35H46.44V68h6.91Z",transform:"matrix(1 0 0 1 -5 -5)"},
lasso:{width:1031,height:1E3,path:"m1018 538c-36 207-290 336-568 286-277-48-473-256-436-463 10-57 36-108 76-151-13-66 11-137 68-183 34-28 75-41 114-42l-55-70 0 0c-2-1-3-2-4-3-10-14-8-34 5-45 14-11 34-8 45 4 1 1 2 3 2 5l0 0 113 140c16 11 31 24 45 40 4 3 6 7 8 11 48-3 100 0 151 9 278 48 473 255 436 462z m-624-379c-80 14-149 48-197 96 42 42 109 47 156 9 33-26 47-66 41-105z m-187-74c-19 16-33 37-39 60 50-32 109-55 174-68-42-25-95-24-135 8z m360 75c-34-7-69-9-102-8 8 62-16 128-68 170-73 59-175 54-244-5-9 20-16 40-20 61-28 159 121 317 333 354s407-60 434-217c28-159-121-318-333-355z",
transform:"matrix(1 0 0 -1 0 850)"},selectbox:{width:1E3,height:1E3,path:"m0 850l0-143 143 0 0 143-143 0z m286 0l0-143 143 0 0 143-143 0z m285 0l0-143 143 0 0 143-143 0z m286 0l0-143 143 0 0 143-143 0z m-857-286l0-143 143 0 0 143-143 0z m857 0l0-143 143 0 0 143-143 0z m-857-285l0-143 143 0 0 143-143 0z m857 0l0-143 143 0 0 143-143 0z m-857-286l0-143 143 0 0 143-143 0z m286 0l0-143 143 0 0 143-143 0z m285 0l0-143 143 0 0 143-143 0z m286 0l0-143 143 0 0 143-143 0z",transform:"matrix(1 0 0 -1 0 850)"},
drawline:{width:70,height:70,path:"M60.64,62.3a11.29,11.29,0,0,0,6.09-6.72l6.35-17.72L60.54,25.31l-17.82,6.4c-2.36.86-5.57,3.41-6.6,6L24.48,65.5l8.42,8.42ZM40.79,39.63a7.89,7.89,0,0,1,3.65-3.17l14.79-5.31,8,8L61.94,54l-.06.19a6.44,6.44,0,0,1-3,3.43L34.07,68l-3.62-3.63Zm16.57,7.81a6.9,6.9,0,1,0-6.89,6.9A6.9,6.9,0,0,0,57.36,47.44Zm-4,0a2.86,2.86,0,1,1-2.85-2.85A2.86,2.86,0,0,1,53.32,47.44Zm-4.13,5.22L46.33,49.8,30.08,66.05l2.86,2.86ZM83.65,29,70,15.34,61.4,23.9,75.09,37.59ZM70,21.06l8,8-2.84,2.85-8-8ZM87,80.49H10.67V87H87Z",
transform:"matrix(1 0 0 1 -15 -15)"},drawrect:{width:80,height:80,path:"M78,22V79H21V22H78m9-9H12V88H87V13ZM68,46.22H31V54H68ZM53,32H45.22V69H53Z",transform:"matrix(1 0 0 1 -10 -10)"},drawcircle:{width:80,height:80,path:"M50,84.72C26.84,84.72,8,69.28,8,50.3S26.84,15.87,50,15.87,92,31.31,92,50.3,73.16,84.72,50,84.72Zm0-60.59c-18.6,0-33.74,11.74-33.74,26.17S31.4,76.46,50,76.46,83.74,64.72,83.74,50.3,68.6,24.13,50,24.13Zm17.15,22h-34v7.11h34Zm-13.8-13H46.24v34h7.11Z",transform:"matrix(1 0 0 1 -10 -10)"},
eraseshape:{width:80,height:80,path:"M82.77,78H31.85L6,49.57,31.85,21.14H82.77a8.72,8.72,0,0,1,8.65,8.77V69.24A8.72,8.72,0,0,1,82.77,78ZM35.46,69.84H82.77a.57.57,0,0,0,.49-.6V29.91a.57.57,0,0,0-.49-.61H35.46L17,49.57Zm32.68-34.7-24,24,5,5,24-24Zm-19,.53-5,5,24,24,5-5Z",transform:"matrix(1 0 0 1 -10 -10)"},spikeline:{width:1E3,height:1E3,path:"M512 409c0-57-46-104-103-104-57 0-104 47-104 104 0 57 47 103 104 103 57 0 103-46 103-103z m-327-39l92 0 0 92-92 0z m-185 0l92 0 0 92-92 0z m370-186l92 0 0 93-92 0z m0-184l92 0 0 92-92 0z",
transform:"matrix(1.5 0 0 -1.5 0 850)"},pencil:{width:1792,height:1792,path:"M491 1536l91-91-235-235-91 91v107h128v128h107zm523-928q0-22-22-22-10 0-17 7l-542 542q-7 7-7 17 0 22 22 22 10 0 17-7l542-542q7-7 7-17zm-54-192l416 416-832 832h-416v-416zm683 96q0 53-37 90l-166 166-416-416 166-165q36-38 90-38 53 0 91 38l235 234q37 39 37 91z",transform:"matrix(1 0 0 1 0 1)"},newplotlylogo:{name:"newplotlylogo",svg:"\x3csvg xmlns\x3d'http://www.w3.org/2000/svg' viewBox\x3d'0 0 132 132'\x3e\x3cdefs\x3e\x3cstyle\x3e.cls-1 {fill: #3f4f75;} .cls-2 {fill: #80cfbe;} .cls-3 {fill: #fff;}\x3c/style\x3e\x3c/defs\x3e\x3ctitle\x3eplotly-logomark\x3c/title\x3e\x3cg id\x3d'symbol'\x3e\x3crect class\x3d'cls-1' width\x3d'132' height\x3d'132' rx\x3d'6' ry\x3d'6'/\x3e\x3ccircle class\x3d'cls-2' cx\x3d'78' cy\x3d'54' r\x3d'6'/\x3e\x3ccircle class\x3d'cls-2' cx\x3d'102' cy\x3d'30' r\x3d'6'/\x3e\x3ccircle class\x3d'cls-2' cx\x3d'78' cy\x3d'30' r\x3d'6'/\x3e\x3ccircle class\x3d'cls-2' cx\x3d'54' cy\x3d'30' r\x3d'6'/\x3e\x3ccircle class\x3d'cls-2' cx\x3d'30' cy\x3d'30' r\x3d'6'/\x3e\x3ccircle class\x3d'cls-2' cx\x3d'30' cy\x3d'54' r\x3d'6'/\x3e\x3cpath class\x3d'cls-3' d\x3d'M30,72a6,6,0,0,0-6,6v24a6,6,0,0,0,12,0V78A6,6,0,0,0,30,72Z'/\x3e\x3cpath class\x3d'cls-3' d\x3d'M78,72a6,6,0,0,0-6,6v24a6,6,0,0,0,12,0V78A6,6,0,0,0,78,72Z'/\x3e\x3cpath class\x3d'cls-3' d\x3d'M54,48a6,6,0,0,0-6,6v48a6,6,0,0,0,12,0V54A6,6,0,0,0,54,48Z'/\x3e\x3cpath class\x3d'cls-3' d\x3d'M102,48a6,6,0,0,0-6,6v48a6,6,0,0,0,12,0V54A6,6,0,0,0,102,48Z'/\x3e\x3c/g\x3e\x3c/svg\x3e"}}},
{}],730:[function(a,G,C){C.isLeftAnchor=function(q){return"left"===q.xanchor||"auto"===q.xanchor&&q.x<=1/3};C.isCenterAnchor=function(q){return"center"===q.xanchor||"auto"===q.xanchor&&q.x>1/3&&q.x<2/3};C.isRightAnchor=function(q){return"right"===q.xanchor||"auto"===q.xanchor&&q.x>=2/3};C.isTopAnchor=function(q){return"top"===q.yanchor||"auto"===q.yanchor&&q.y>=2/3};C.isMiddleAnchor=function(q){return"middle"===q.yanchor||"auto"===q.yanchor&&q.y>1/3&&q.y<2/3};C.isBottomAnchor=function(q){return"bottom"===
q.yanchor||"auto"===q.yanchor&&q.y<=1/3}},{}],731:[function(a,G,C){function q(l){return Math.abs(l[1]-l[0])>h-1E-14}function n(l,c){return k(c-l,h)}function m(l,c){if(q(c))return!0;if(c[0]<c[1]){var g=c[0];c=c[1]}else g=c[1],c=c[0];g=b(g,h);c=b(c,h);g>c&&(c+=h);l=b(l,h);var d=l+h;return l>=g&&l<=c||d>=g&&d<=c}function f(l,c,g,d,p,r,t){function w(D,u){return[D*Math.cos(u)+p,r-D*Math.sin(u)]}function x(D,u,B){return"A"+[D,D]+" "+[0,F,B]+" "+w(D,u)}p=p||0;r=r||0;var y=q([g,d]);if(y){var A=0;var z=e;
g=h}else g<d?(A=g,g=d):A=d;l<c?(d=l,l=c):d=c;var F=Math.abs(g-A)<=e?0:1;y?y=null===d?"M"+w(l,A)+x(l,z,0)+x(l,g,0)+"Z":"M"+w(d,A)+x(d,z,0)+x(d,g,0)+"ZM"+w(l,A)+x(l,z,1)+x(l,g,1)+"Z":null===d?(y="M"+w(l,A)+x(l,g,0),t&&(y+="L0,0Z")):y="M"+w(d,A)+"L"+w(l,A)+x(l,g,0)+"L"+w(d,g)+x(d,A,1)+"Z";return y}a=a("./mod");var b=a.mod,k=a.modHalf,e=Math.PI,h=2*e;G.exports={deg2rad:function(l){return l/180*e},rad2deg:function(l){return l/e*180},angleDelta:n,angleDist:function(l,c){return Math.abs(n(l,c))},isFullCircle:q,
isAngleInsideSector:m,isPtInsideSector:function(l,c,g,d){if(!m(c,d))return!1;g[0]<g[1]?(c=g[0],g=g[1]):(c=g[1],g=g[0]);return l>=c&&l<=g},pathArc:function(l,c,g,d,p){return f(null,l,c,g,d,p,0)},pathSector:function(l,c,g,d,p){return f(null,l,c,g,d,p,1)},pathAnnulus:function(l,c,g,d,p,r){return f(l,c,g,d,p,r,1)}}},{"./mod":757}],732:[function(a,G,C){function q(e){return b.isView(e)&&!(e instanceof k)}function n(e){return f(e)||q(e)}function m(e,h,l){if(n(e)){if(n(e[0])){for(var c=0;c<e.length;c++)l=
h(l,e[c].length);return l}return e.length}return 0}var f=Array.isArray,b="undefined"!==typeof ArrayBuffer&&ArrayBuffer.isView?ArrayBuffer:{isView:function(){return!1}},k="undefined"===typeof DataView?function(){}:DataView;C.isTypedArray=q;C.isArrayOrTypedArray=n;C.isArray1D=function(e){return!n(e[0])};C.ensureArray=function(e,h){f(e)||(e=[]);e.length=h;return e};C.concat=function(){var e=[],h=!0,l=0,c,g;for(c=0;c<arguments.length;c++){var d=arguments[c];if(g=d.length){if(p)e.push(d);else{var p=d;
var r=g}if(f(d))var t=!1;else h=!1,l?t!==d.constructor&&(t=!1):t=d.constructor;l+=g}}if(!l)return[];if(!e.length)return p;if(h)return p.concat.apply(p,e);if(t){h=new t(l);h.set(p);for(c=0;c<e.length;c++)d=e[c],h.set(d,r),r+=d.length;return h}h=Array(l);for(l=0;l<p.length;l++)h[l]=p[l];for(c=0;c<e.length;c++){d=e[c];for(l=0;l<d.length;l++)h[r+l]=d[l];r+=l}return h};C.maxRowLength=function(e){return m(e,Math.max,0)};C.minRowLength=function(e){return m(e,Math.min,Infinity)}},{}],733:[function(a,G,C){var q=
a("fast-isnumeric"),n=a("../constants/numerical").BADNUM,m=/^['"%,$#\s']+|[, ]|['"%,$#\s']+$/g;G.exports=function(f){"string"===typeof f&&(f=f.replace(m,""));return q(f)?Number(f):n}},{"../constants/numerical":725,"fast-isnumeric":241}],734:[function(a,G,C){G.exports=function(q){q=q._fullLayout;q._glcanvas&&q._glcanvas.size()&&q._glcanvas.each(function(n){n.regl&&n.regl.clear({color:!0,depth:!0})})}},{}],735:[function(a,G,C){G.exports=function(q){q._responsiveChartHandler&&(window.removeEventListener("resize",
q._responsiveChartHandler),delete q._responsiveChartHandler)}},{}],736:[function(a,G,C){function q(g,d){var p=C.valObjectMeta[d.valType];if(d.arrayOk&&c(g))return!0;if(p.validateFunction)return p.validateFunction(g,d);var r={},t=r;p.coerceFunction(g,{set:function(w){t=w}},r,d);return t!==r}var n=a("fast-isnumeric"),m=a("tinycolor2"),f=a("../plots/attributes"),b=a("../components/colorscale/scales"),k=a("../constants/interactions").DESELECTDIM,e=a("./nested_property"),h=a("./regex").counter,l=a("./mod").modHalf,
c=a("./array").isArrayOrTypedArray;C.valObjectMeta={data_array:{coerceFunction:function(g,d,p){c(g)?d.set(g):void 0!==p&&d.set(p)}},enumerated:{coerceFunction:function(g,d,p,r){r.coerceNumber&&(g=+g);-1===r.values.indexOf(g)?d.set(p):d.set(g)},validateFunction:function(g,d){d.coerceNumber&&(g=+g);d=d.values;for(var p=0;p<d.length;p++){var r=String(d[p]);if("/"===r.charAt(0)&&"/"===r.charAt(r.length-1)){if((new RegExp(r.substr(1,r.length-2))).test(g))return!0}else if(g===d[p])return!0}return!1}},"boolean":{coerceFunction:function(g,
d,p){!0===g||!1===g?d.set(g):d.set(p)}},number:{coerceFunction:function(g,d,p,r){!n(g)||void 0!==r.min&&g<r.min||void 0!==r.max&&g>r.max?d.set(p):d.set(+g)}},integer:{coerceFunction:function(g,d,p,r){g%1||!n(g)||void 0!==r.min&&g<r.min||void 0!==r.max&&g>r.max?d.set(p):d.set(+g)}},string:{coerceFunction:function(g,d,p,r){"string"!==typeof g?!0===r.strict||"number"!==typeof g?d.set(p):d.set(String(g)):r.noBlank&&!g?d.set(p):d.set(g)}},color:{coerceFunction:function(g,d,p){m(g).isValid()?d.set(g):d.set(p)}},
colorlist:{coerceFunction:function(g,d,p){function r(t){return m(t).isValid()}Array.isArray(g)&&g.length?g.every(r)?d.set(g):d.set(p):d.set(p)}},colorscale:{coerceFunction:function(g,d,p){d.set(b.get(g,p))}},angle:{coerceFunction:function(g,d,p){"auto"===g?d.set("auto"):n(g)?d.set(l(+g,360)):d.set(p)}},subplotid:{coerceFunction:function(g,d,p,r){r=r.regex||h(p);"string"===typeof g&&r.test(g)?d.set(g):d.set(p)},validateFunction:function(g,d){d=d.dflt;return g===d?!0:"string"!==typeof g?!1:h(d).test(g)?
!0:!1}},flaglist:{coerceFunction:function(g,d,p,r){if("string"!==typeof g)d.set(p);else if(-1!==(r.extras||[]).indexOf(g))d.set(g);else{g=g.split("+");for(var t=0;t<g.length;){var w=g[t];-1===r.flags.indexOf(w)||g.indexOf(w)<t?g.splice(t,1):t++}g.length?d.set(g.join("+")):d.set(p)}}},any:{coerceFunction:function(g,d,p){void 0===g?d.set(p):d.set(g)}},info_array:{coerceFunction:function(g,d,p,r){function t(I,J,N){var M;void 0===N&&(N=J.dflt);C.valObjectMeta[J.valType].coerceFunction(I,{set:function(E){M=
E}},N,J);return M}var w=2===r.dimensions||"1-2"===r.dimensions&&Array.isArray(g)&&Array.isArray(g[0]);if(Array.isArray(g)){r=r.items;var x=[],y=Array.isArray(r),A=y&&w&&Array.isArray(r[0]);A=w&&y&&!A;var z=y&&!A?r.length:g.length,F;p=Array.isArray(p)?p:[];if(w)for(w=0;w<z;w++){x[w]=[];var D=Array.isArray(g[w])?g[w]:[];var u=A?r.length:y?r[w].length:D.length;for(F=0;F<u;F++){var B=A?r[F]:y?r[w][F]:r;B=t(D[F],B,(p[w]||[])[F]);void 0!==B&&(x[w][F]=B)}}else for(w=0;w<z;w++)B=t(g[w],y?r[w]:r,p[w]),void 0!==
B&&(x[w]=B);d.set(x)}else d.set(p)},validateFunction:function(g,d){if(!Array.isArray(g))return!1;var p=d.items,r=Array.isArray(p),t=2===d.dimensions;if(!d.freeLength&&g.length!==p.length)return!1;for(var w=0;w<g.length;w++)if(t){if(!Array.isArray(g[w])||!d.freeLength&&g[w].length!==p[w].length)return!1;for(var x=0;x<g[w].length;x++)if(!q(g[w][x],r?p[w][x]:p))return!1}else if(!q(g[w],r?p[w]:p))return!1;return!0}}};C.coerce=function(g,d,p,r,t){p=e(p,r).get();var w=e(g,r);g=e(d,r);w=w.get();d=d._template;
void 0===w&&d&&(w=e(d,r).get(),d=0);void 0===t&&(t=p.dflt);if(p.arrayOk&&c(w))return g.set(w),w;var x=C.valObjectMeta[p.valType].coerceFunction;x(w,g,t,p);var y=g.get();d&&y===t&&!q(w,p)&&(w=e(d,r).get(),x(w,g,t,p),y=g.get());return y};C.coerce2=function(g,d,p,r,t){var w=e(g,r);g=C.coerce(g,d,p,r,t);w=w.get();return void 0!==w&&null!==w?g:!1};C.coerceFont=function(g,d,p){var r={};p=p||{};r.family=g(d+".family",p.family);r.size=g(d+".size",p.size);r.color=g(d+".color",p.color);return r};C.coerceHoverinfo=
function(g,d,p){var r=d._module.attributes;r=r.hoverinfo?r:f;var t=r.hoverinfo;if(1===p._dataLength){p="all"===t.dflt?t.flags.slice():t.dflt.split("+");p.splice(p.indexOf("name"),1);var w=p.join("+")}return C.coerce(g,d,r,"hoverinfo",w)};C.coerceSelectionMarkerOpacity=function(g,d){if(g.marker){var p=g.marker.opacity;if(void 0!==p){if(!c(p)&&!g.selected&&!g.unselected){var r=p;var t=k*p}d("selected.marker.opacity",r);d("unselected.marker.opacity",t)}}};C.validate=q},{"../components/colorscale/scales":630,
"../constants/interactions":724,"../plots/attributes":795,"./array":732,"./mod":757,"./nested_property":758,"./regex":766,"fast-isnumeric":241,tinycolor2:548}],737:[function(a,G,C){function q(M){return M&&t.componentsRegistry.calendars&&"string"===typeof M&&"gregorian"!==M}function n(M,E){return String(M+Math.pow(10,E)).substr(1)}function m(M,E,L,Q,S){if(E||L||Q||S)if(M+=" "+n(E,2)+":"+n(L,2),Q||S)if(M+=":"+n(Q,2),S){for(E=4;0===S%10;)--E,S/=10;M+="."+n(S,E)}return M}function f(M,E,L,Q){M=M.replace(I,
function(R){R=Math.min(+R.charAt(1)||6,6);return(E/1E3%1+2).toFixed(R).substr(2).replace(/0+$/,"")||"0"});var S=new Date(Math.floor(E+.05));if(q(Q))try{M=t.getComponentMethod("calendars","worldCalFmt")(M,E,Q)}catch(R){return"Invalid"}return L(M)(S)}var b=a("d3-time-format").timeFormat,k=a("fast-isnumeric"),e=a("./loggers"),h=a("./mod").mod;G=a("../constants/numerical");var l=G.BADNUM,c=G.ONEDAY,g=G.ONEHOUR,d=G.ONEMIN,p=G.ONESEC,r=G.EPOCHJD,t=a("../registry"),w=a("d3-time-format").utcFormat,x=/^\s*(-?\d\d\d\d|\d\d)(-(\d?\d)(-(\d?\d)([ Tt]([01]?\d|2[0-3])(:([0-5]\d)(:([0-5]\d(\.\d+)?))?(Z|z|[+\-]\d\d(:?\d\d)?)?)?)?)?)?\s*$/m,
y=/^\s*(-?\d\d\d\d|\d\d)(-(\d?\di?)(-(\d?\d)([ Tt]([01]?\d|2[0-3])(:([0-5]\d)(:([0-5]\d(\.\d+)?))?(Z|z|[+\-]\d\d(:?\d\d)?)?)?)?)?)?\s*$/m,A=(new Date).getFullYear()-70;C.dateTick0=function(M,E){var L=!!E;L=q(M)?L?t.getComponentMethod("calendars","CANONICAL_SUNDAY")[M]:t.getComponentMethod("calendars","CANONICAL_TICK")[M]:L?"2000-01-02":"2000-01-01";if(2>E)return L;L=C.dateTime2ms(L,M);L+=c*(E-1);return C.ms2DateTime(L,0,M)};C.dfltRange=function(M){return q(M)?t.getComponentMethod("calendars","DFLTRANGE")[M]:
["2000-01-01","2001-01-01"]};C.isJSDate=function(M){return"object"===typeof M&&null!==M&&"function"===typeof M.getTime};C.dateTime2ms=function(M,E){if(C.isJSDate(M)){E=M.getTimezoneOffset()*d;var L=(M.getUTCMinutes()-M.getMinutes())*d+(M.getUTCSeconds()-M.getSeconds())*p+(M.getUTCMilliseconds()-M.getMilliseconds());if(L){var Q=3*d;E=E-Q/2+h(L-E+Q/2,Q)}M=Number(M)-E;return M>=z&&M<=F?M:l}if("string"!==typeof M&&"number"!==typeof M)return l;M=String(M);L=q(E);var S=M.charAt(0);!L||"G"!==S&&"g"!==S||
(M=M.substr(1),E="");S=L&&"chinese"===E.substr(0,7);var R=M.match(S?y:x);if(!R)return l;M=R[1];var O=R[3]||"1",T=Number(R[5]||1),V=Number(R[7]||0),X=Number(R[9]||0);R=Number(R[11]||0);if(L){if(2===M.length)return l;M=Number(M);try{var ba=t.getComponentMethod("calendars","getCal")(E);if(S){var aa="i"===O.charAt(O.length-1);O=parseInt(O,10);Q=ba.newDate(M,ba.toMonthIndex(M,O,aa),T)}else Q=ba.newDate(M,Number(O),T)}catch(ka){return l}return Q?(Q.toJD()-r)*c+V*g+X*d+R*p:l}M=2===M.length?(Number(M)+2E3-
A)%100+A:Number(M);--O;E=new Date(Date.UTC(2E3,O,T,V,X));E.setUTCFullYear(M);return E.getUTCMonth()!==O||E.getUTCDate()!==T?l:E.getTime()+R*p};var z=C.MIN_MS=C.dateTime2ms("-9999");var F=C.MAX_MS=C.dateTime2ms("9999-12-31 23:59:59.9999");C.isDateTime=function(M,E){return C.dateTime2ms(M,E)!==l};var D=90*c,u=3*g,B=5*d;C.ms2DateTime=function(M,E,L){if("number"!==typeof M||!(M>=z&&M<=F))return l;E||(E=0);var Q=Math.floor(10*h(M+.05,1)),S=Math.round(M-Q/10);if(q(L)){var R=Math.floor(S/c)+r;M=Math.floor(h(M,
c));try{var O=t.getComponentMethod("calendars","getCal")(L).fromJD(R).formatDate("yyyy-mm-dd")}catch(T){O=w("G%Y-%m-%d")(new Date(S))}if("-"===O.charAt(0))for(;11>O.length;)O="-0"+O.substr(1);else for(;10>O.length;)O="0"+O;L=E<D?Math.floor(M/g):0;S=E<D?Math.floor(M%g/d):0;R=E<u?Math.floor(M%d/p):0;E=E<B?M%p*10+Q:0}else M=new Date(S),O=w("%Y-%m-%d")(M),L=E<D?M.getUTCHours():0,S=E<D?M.getUTCMinutes():0,R=E<u?M.getUTCSeconds():0,E=E<B?10*M.getUTCMilliseconds()+Q:0;return m(O,L,S,R,E)};C.ms2DateTimeLocal=
function(M){if(!(M>=z+c&&M<=F-c))return l;var E=Math.floor(10*h(M+.05,1)),L=new Date(Math.round(M-E/10));M=b("%Y-%m-%d")(L);var Q=L.getHours(),S=L.getMinutes(),R=L.getSeconds();E=10*L.getUTCMilliseconds()+E;return m(M,Q,S,R,E)};C.cleanDate=function(M,E,L){if(M===l)return E;if(C.isJSDate(M)||"number"===typeof M&&isFinite(M)){if(q(L))return e.error("JS Dates and milliseconds are incompatible with world calendars",M),E;M=C.ms2DateTimeLocal(+M);if(!M&&void 0!==E)return E}else if(!C.isDateTime(M,L))return e.error("unrecognized date",
M),E;return M};var I=/%\d?f/g,J=[59,59.9,59.99,59.999,59.9999];C.formatDate=function(M,E,L,Q,S,R){S=q(S)&&S;if(!E)if("y"===L)E=R.year;else if("m"===L)E=R.month;else if("d"===L)E=R.dayMonth+"\n"+R.year;else{E=L;L=h(M+.05,c);L=n(Math.floor(L/g),2)+":"+n(h(Math.floor(L/d),60),2);if("M"!==E){k(E)||(E=0);var O=(100+Math.min(h(M/p,60),J[E])).toFixed(E).substr(1);0<E&&(O=O.replace(/0+$/,"").replace(/[\.]$/,""));L+=":"+O}return L+"\n"+f(R.dayMonthYear,M,Q,S)}return f(E,M,Q,S)};var N=3*c;C.incrementMonth=
function(M,E,L){L=q(L)&&L;var Q=h(M,c);M=Math.round(M-Q);if(L)try{var S=Math.round(M/c)+r,R=t.getComponentMethod("calendars","getCal")(L),O=R.fromJD(S);E%12?R.add(O,E,"m"):R.add(O,E/12,"y");return(O.toJD()-r)*c+Q}catch(T){e.error("invalid ms "+M+" in calendar "+L)}M=new Date(M+N);return M.setUTCMonth(M.getUTCMonth()+E)+Q-N};C.findExactDates=function(M,E){for(var L=0,Q=0,S=0,R=0,O,T=q(E)&&t.getComponentMethod("calendars","getCal")(E),V=0;V<M.length;V++)if(E=M[V],!k(E))R++;else if(!(E%c))if(T)try{O=
T.fromJD(E/c+r),1===O.day()?1===O.month()?L++:Q++:S++}catch(X){}else O=new Date(E),1===O.getUTCDate()?0===O.getUTCMonth()?L++:Q++:S++;Q+=L;M=M.length-R;return{exactYears:L/M,exactMonths:Q/M,exactDays:(S+Q)/M}}},{"../constants/numerical":725,"../registry":882,"./loggers":754,"./mod":757,"d3-time-format":166,"fast-isnumeric":241}],738:[function(a,G,C){function q(b){var k=b&&b.parentNode;k&&k.removeChild(b)}function n(b,k,e){b="plotly.js-style-"+b;var h=document.getElementById(b);h||(h=document.createElement("style"),
h.setAttribute("id",b),h.appendChild(document.createTextNode("")),document.head.appendChild(h));b=h.sheet;b.insertRule?b.insertRule(k+"{"+e+"}",0):b.addRule?b.addRule(k,e,0):f.warn("addStyleRule failed")}var m=a("d3"),f=a("./loggers");G.exports={getGraphDiv:function(b){if("string"===typeof b){var k=document.getElementById(b);if(null===k)throw Error("No DOM element with id '"+b+"' exists on the page.");return k}if(null===b||void 0===b)throw Error("DOM element provided is null or undefined");return b},
isPlotDiv:function(b){b=m.select(b);return b.node()instanceof HTMLElement&&b.size()&&b.classed("js-plotly-plot")},removeElement:q,addStyleRule:function(b,k){n("global",b,k)},addRelatedStyleRule:n,deleteRelatedStyleRule:function(b){(b=document.getElementById("plotly.js-style-"+b))&&q(b)}}},{"./loggers":754,d3:169}],739:[function(a,G,C){var q=a("events").EventEmitter;G.exports={init:function(n){if(n._ev instanceof q)return n;var m=new q,f=new q;n._ev=m;n._internalEv=f;n.on=m.on.bind(m);n.once=m.once.bind(m);
n.removeListener=m.removeListener.bind(m);n.removeAllListeners=m.removeAllListeners.bind(m);n._internalOn=f.on.bind(f);n._internalOnce=f.once.bind(f);n._removeInternalListener=f.removeListener.bind(f);n._removeAllInternalListeners=f.removeAllListeners.bind(f);n.emit=function(b,k){"undefined"!==typeof jQuery&&jQuery(n).trigger(b,k);m.emit(b,k);f.emit(b,k)};return n},triggerHandler:function(n,m,f){function b(l){if(l.listener){if(e.removeListener(m,l.listener),!l.fired)return l.fired=!0,l.listener.apply(e,
[f])}else return l.apply(e,[f])}var k;"undefined"!==typeof jQuery&&(k=jQuery(n).triggerHandler(m,f));var e=n._ev;if(!e)return k;n=e._events[m];if(!n)return k;n=Array.isArray(n)?n:[n];var h;for(h=0;h<n.length-1;h++)b(n[h]);n=b(n[h]);return void 0!==k?k:n},purge:function(n){delete n._ev;delete n.on;delete n.once;delete n.removeListener;delete n.removeAllListeners;delete n.emit;delete n._ev;delete n._internalEv;delete n._internalOn;delete n._internalOnce;delete n._removeInternalListener;delete n._removeAllInternalListeners;
return n}}},{events:110}],740:[function(a,G,C){function q(f,b,k,e){var h=f[0],l=f.length,c,g,d;if(2===l&&m(h)&&m(f[1])&&0===h.length){a:{var p=f[1];for(g=0;g<p.length;g++){var r=p[g];if(null!==r&&"object"===typeof r){p=!1;break a}void 0!==r&&(h[g]=r)}p=!0}if(p)return h;h.splice(0,h.length)}for(r=1;r<l;r++)for(c in p=f[r],p){var t=h[c];g=p[c];if(e&&m(g))h[c]=g;else if(b&&g&&(n(g)||(d=m(g))))d?(d=!1,t=t&&m(t)?t:[]):t=t&&n(t)?t:{},h[c]=q([t,g],b,k,e);else if("undefined"!==typeof g||k)h[c]=g}return h}
var n=a("./is_plain_object.js"),m=Array.isArray;C.extendFlat=function(){return q(arguments,!1,!1,!1)};C.extendDeep=function(){return q(arguments,!0,!1,!1)};C.extendDeepAll=function(){return q(arguments,!0,!0,!1)};C.extendDeepNoArrays=function(){return q(arguments,!0,!1,!0)}},{"./is_plain_object.js":751}],741:[function(a,G,C){G.exports=function(q){for(var n={},m=[],f=0,b=0;b<q.length;b++){var k=q[b];1!==n[k]&&(n[k]=1,m[f++]=k)}return m}},{}],742:[function(a,G,C){function q(m){return!0===m.visible}
function n(m){m=m[0].trace;return!0===m.visible&&0!==m._length}G.exports=function(m){for(var f=Array.isArray(m)&&Array.isArray(m[0])&&m[0][0]&&m[0][0].trace?n:q,b=[],k=0;k<m.length;k++){var e=m[k];f(e)&&b.push(e)}return b}},{}],743:[function(a,G,C){function q(p){p=p.geojson;var r=window.PlotlyGeoAssets||{};r="string"===typeof p?r[p]:p;return h(r)?r:(e.error("Oops ... something went wrong when fetching "+p),!1)}var n=a("d3"),m=a("country-regex"),f=a("@turf/area"),b=a("@turf/centroid"),k=a("@turf/bbox");
C=a("./identity");var e=a("./loggers"),h=a("./is_plain_object"),l=a("./nested_property"),c=a("./polygon"),g=Object.keys(m),d={"ISO-3":C,"USA-states":C,"country names":function(p){for(var r=0;r<g.length;r++){var t=g[r];if((new RegExp(m[t])).test(p.trim().toLowerCase()))return t}e.log("Unrecognized country name: "+p+".");return!1}};G.exports={locationToFeature:function(p,r,t){if(!r||"string"!==typeof r)return!1;r=d[p](r);var w;if(r){if("USA-states"===p)for(p=[],w=0;w<t.length;w++){var x=t[w];x.properties&&
x.properties.gu&&"USA"===x.properties.gu&&p.push(x)}else p=t;for(w=0;w<p.length;w++)if(x=p[w],x.id===r)return x;e.log(["Location with id",r,"does not have a matching topojson feature at this resolution."].join(" "))}return!1},feature2polygons:function(p){function r(z){for(var F=0;F<z.length-1;F++)if(0<z[F][0]&&0>z[F+1][0])return F;return null}var t=p.geometry,w=t.coordinates;p=p.id;var x=[],y,A;p="RUS"===p||"FJI"===p?function(z){if(null===r(z))var F=z;else for(F=Array(z.length),A=0;A<z.length;A++)F[A]=
[0>z[A][0]?z[A][0]+360:z[A][0],z[A][1]];x.push(c.tester(F))}:"ATA"===p?function(z){var F=r(z);if(null===F)return x.push(c.tester(z));var D=Array(z.length+1),u=0;for(A=0;A<z.length;A++)A>F?D[u++]=[z[A][0]+360,z[A][1]]:A===F?(D[u++]=z[A],D[u++]=[z[A][0],-90]):D[u++]=z[A];z=c.tester(D);z.pts.pop();x.push(z)}:function(z){x.push(c.tester(z))};switch(t.type){case "MultiPolygon":for(t=0;t<w.length;t++)for(y=0;y<w[t].length;y++)p(w[t][y]);break;case "Polygon":for(t=0;t<w.length;t++)p(w[t])}return x},getTraceGeojson:q,
extractTraceFeature:function(p){function r(D){var u=l(D,t.featureidkey||"id").get(),B=x[u];if(B){var I=D.geometry;if("Polygon"===I.type||"MultiPolygon"===I.type){I={type:"Feature",id:u,geometry:I,properties:{}};var J=I.properties,N=I.geometry;if("MultiPolygon"===N.type){N=N.coordinates;for(var M=0,E=0;E<N.length;E++){var L={type:"Polygon",coordinates:N[E]},Q=f.default(L);if(Q>M){M=Q;var S=L}}}else S=N;S=b.default(S).geometry.coordinates;J.ct=S;B.fIn=D;B.fOut=I;y.push(I)}else e.log(["Location",B.loc,
"does not have a valid GeoJSON geometry. Traces with locationmode *geojson-id* only support *Polygon* and *MultiPolygon* geometries."].join(" "))}delete x[u]}var t=p[0].trace,w=q(t);if(!w)return!1;var x={},y=[],A;for(A=0;A<t._length;A++){var z=p[A];if(z.loc||0===z.loc)x[z.loc]=z}switch(w.type){case "FeatureCollection":p=w.features;for(A=0;A<p.length;A++)r(p[A]);break;case "Feature":r(w);break;default:return e.warn(["Invalid GeoJSON type",(w.type||"none")+".","Traces with locationmode *geojson-id* only support *FeatureCollection* and *Feature* types."].join(" ")),
!1}for(var F in x)e.log(["Location *"+F+"*","does not have a matching feature with id-key","*"+t.featureidkey+"*."].join(" "));return y},fetchTraceGeoData:function(p){function r(z){return new Promise(function(F,D){n.json(z,function(u,B){if(u)return delete w[z],D(Error(404===u.status?'GeoJSON at URL "'+z+'" does not exist.':"Unexpected error while fetching from "+z));w[z]=B;return F(B)})})}function t(z){return new Promise(function(F,D){var u=0,B=setInterval(function(){if(w[z]&&"pending"!==w[z])return clearInterval(B),
F(w[z]);if(100<u)return clearInterval(B),D("Unexpected error while fetching from "+z);u++},50)})}for(var w=window.PlotlyGeoAssets||{},x=[],y=0;y<p.length;y++){var A=p[y][0].trace.geojson;"string"===typeof A&&(w[A]?"pending"===w[A]&&x.push(t(A)):(w[A]="pending",x.push(r(A))))}return x},computeBbox:function(p){return k.default(p)}}},{"./identity":748,"./is_plain_object":751,"./loggers":754,"./nested_property":758,"./polygon":762,"@turf/area":59,"@turf/bbox":60,"@turf/centroid":61,"country-regex":139,
d3:169}],744:[function(a,G,C){var q=a("../constants/numerical").BADNUM;C.calcTraceToLineCoords=function(n){for(var m=n[0].trace.connectgaps,f=[],b=[],k=0;k<n.length;k++){var e=n[k].lonlat;e[0]!==q?b.push(e):!m&&0<b.length&&(f.push(b),b=[])}0<b.length&&f.push(b);return f};C.makeLine=function(n){return 1===n.length?{type:"LineString",coordinates:n[0]}:{type:"MultiLineString",coordinates:n}};C.makePolygon=function(n){if(1===n.length)return{type:"Polygon",coordinates:n};for(var m=Array(n.length),f=0;f<
n.length;f++)m[f]=[n[f]];return{type:"MultiPolygon",coordinates:m}};C.makeBlank=function(){return{type:"Point",coordinates:[]}}},{"../constants/numerical":725}],745:[function(a,G,C){function q(e,h,l,c,g,d,p,r){l-=e;var t=g-e;g=p-g;c-=h;p=d-h;r-=d;d=l*r-g*c;if(0===d)return null;r=(t*r-g*p)/d;t=(t*c-l*p)/d;return 0>t||1<t||0>r||1<r?null:{x:e+l*r,y:h+c*r}}function n(e,h,l,c,g){var d=c*e+g*h;if(0>d)return c*c+g*g;if(d>l)return l=c-e,h=g-h,l*l+h*h;h=c*h-g*e;return h*h/l}var m=a("./mod").mod;C.segmentsIntersect=
q;C.segmentDistance=function(e,h,l,c,g,d,p,r){if(q(e,h,l,c,g,d,p,r))return 0;var t=l-e,w=c-h,x=p-g,y=r-d,A=t*t+w*w,z=x*x+y*y;e=Math.min(n(t,w,A,g-e,d-h),n(t,w,A,p-e,r-h),n(x,y,z,e-g,h-d),n(x,y,z,l-g,c-d));return Math.sqrt(e)};var f,b,k;C.getTextLocation=function(e,h,l,c){if(e!==b||c!==k)f={},b=e,k=c;if(f[l])return f[l];var g=e.getPointAtLength(m(l-c/2,h));c=e.getPointAtLength(m(l+c/2,h));var d=Math.atan((c.y-g.y)/(c.x-g.x));e=e.getPointAtLength(m(l,h));g={x:(4*e.x+g.x+c.x)/6,y:(4*e.y+g.y+c.y)/6,theta:d};
return f[l]=g};C.clearLocationCache=function(){b=null};C.getVisibleSegment=function(e,h,l){function c(z){var F=e.getPointAtLength(z);0===z?x=F:z===t&&(y=F);z=F.x<g?g-F.x:F.x>d?F.x-d:0;F=F.y<p?p-F.y:F.y>r?F.y-r:0;return Math.sqrt(z*z+F*F)}var g=h.left,d=h.right,p=h.top,r=h.bottom;h=0;for(var t=e.getTotalLength(),w=t,x,y,A=c(h);A;){h+=A+l;if(h>w)return;A=c(h)}for(A=c(w);A;){w-=A+l;if(h>w)return;A=c(w)}return{min:h,max:w,len:w-h,total:t,isClosed:0===h&&w===t&&.1>Math.abs(x.x-y.x)&&.1>Math.abs(x.y-y.y)}};
C.findPointOnPath=function(e,h,l,c){c=c||{};var g=c.pathLength||e.getTotalLength(),d=c.tolerance||.001;c=c.iterationLimit||30;for(var p=e.getPointAtLength(0)[l]>e.getPointAtLength(g)[l]?-1:1,r=0,t=0,w,x,y;r<c&&!(w=(t+g)/2,x=e.getPointAtLength(w),y=x[l]-h,Math.abs(y)<d);)0<p*y?g=w:t=w,r++;return x}},{"./mod":757}],746:[function(a,G,C){function q(c,g){c[3]*=g;return c}function n(c){if(f(c))return l;c=k(c);return c.length?c:l}function m(c){return f(c)?c:1}var f=a("fast-isnumeric"),b=a("tinycolor2"),
k=a("color-normalize"),e=a("../components/colorscale");C=a("../components/color/attributes").defaultLine;var h=a("./array").isArrayOrTypedArray,l=k(C);G.exports={formatColor:function(c,g,d){var p=c.color,r=h(p),t=h(g),w=[];var x=void 0!==e.extractOpts(c).colorscale?e.makeColorScaleFuncFromTrace(c):n;c=r?function(z,F){return void 0===z[F]?l:k(x(z[F]))}:n;var y=t?function(z,F){return void 0===z[F]?1:m(z[F])}:m;if(r||t)for(var A=0;A<d;A++)r=c(p,A),t=y(g,A),w[A]=q(r,t);else w=q(k(p),g);return w},parseColorScale:function(c){c=
e.extractOpts(c);var g=c.colorscale;c.reversescale&&(g=e.flipScale(c.colorscale));return g.map(function(d){var p=d[0];d=b(d[1]).toRgb();return{index:p,rgb:[d.r,d.g,d.b,d.a]}})}}},{"../components/color/attributes":614,"../components/colorscale":627,"./array":732,"color-normalize":125,"fast-isnumeric":241,tinycolor2:548}],747:[function(a,G,C){function q(n){return[n]}a=a("./identity");G.exports={keyFun:function(n){return n.key},repeat:q,descend:a,wrap:q,unwrap:function(n){return n[0]}}},{"./identity":748}],
748:[function(a,G,C){G.exports=function(q){return q}},{}],749:[function(a,G,C){G.exports=function(q,n){if(!n)return q;var m=1/Math.abs(n);m=1<m?(m*q+m*n)/m:q+n;var f=String(m).length;16<f&&f>=String(q).length+String(n).length&&(q=parseFloat(m).toPrecision(12),-1===q.indexOf("e+")&&(m=+q));return m}},{}],750:[function(a,G,C){function q(A){var z={},F;for(F in A)for(var D=A[F],u=0;u<D.length;u++)z[D[u]]=+F;return z}function n(A,z,F){var D=this,u=arguments;z||(z={});var B={};return A.replace(h.TEMPLATE_STRING_REGEX,
function(I,J,N){var M,E;for(E=3;E<u.length;E++)if(M=u[E]){if(M.hasOwnProperty(J)){var L=M[J];break}r.test(J)||(L=B[J]||h.nestedProperty(M,J).get())&&(B[J]=L);if(void 0!==L)break}if(void 0===L&&D)return D.count<D.max&&h.warn("Variable '"+J+"' in "+D.name+" could not be found!"),D.count===D.max&&h.warn("Too many "+D.name+" warnings - additional warnings will be suppressed"),D.count++,I;N?(":"===N[0]&&(I=F?F.numberFormat:m.format,L=I(N.replace(x,""))(L)),"|"===N[0]&&(I=F?F.timeFormat:f,L=h.dateTime2ms(L),
L=h.formatDate(L,N.replace(x,""),!1,I))):z.hasOwnProperty(J+"Label")&&(L=z[J+"Label"]);return L})}var m=a("d3"),f=a("d3-time-format").utcFormat,b=a("fast-isnumeric");C=a("../constants/numerical");var k=C.FP_SAFE,e=C.BADNUM,h=G.exports={};h.nestedProperty=a("./nested_property");h.keyedContainer=a("./keyed_container");h.relativeAttr=a("./relative_attr");h.isPlainObject=a("./is_plain_object");h.toLogRange=a("./to_log_range");h.relinkPrivateKeys=a("./relink_private");G=a("./array");h.isTypedArray=G.isTypedArray;
h.isArrayOrTypedArray=G.isArrayOrTypedArray;h.isArray1D=G.isArray1D;h.ensureArray=G.ensureArray;h.concat=G.concat;h.maxRowLength=G.maxRowLength;h.minRowLength=G.minRowLength;G=a("./mod");h.mod=G.mod;h.modHalf=G.modHalf;G=a("./coerce");h.valObjectMeta=G.valObjectMeta;h.coerce=G.coerce;h.coerce2=G.coerce2;h.coerceFont=G.coerceFont;h.coerceHoverinfo=G.coerceHoverinfo;h.coerceSelectionMarkerOpacity=G.coerceSelectionMarkerOpacity;h.validate=G.validate;G=a("./dates");h.dateTime2ms=G.dateTime2ms;h.isDateTime=
G.isDateTime;h.ms2DateTime=G.ms2DateTime;h.ms2DateTimeLocal=G.ms2DateTimeLocal;h.cleanDate=G.cleanDate;h.isJSDate=G.isJSDate;h.formatDate=G.formatDate;h.incrementMonth=G.incrementMonth;h.dateTick0=G.dateTick0;h.dfltRange=G.dfltRange;h.findExactDates=G.findExactDates;h.MIN_MS=G.MIN_MS;h.MAX_MS=G.MAX_MS;G=a("./search");h.findBin=G.findBin;h.sorterAsc=G.sorterAsc;h.sorterDes=G.sorterDes;h.distinctVals=G.distinctVals;h.roundUp=G.roundUp;h.sort=G.sort;h.findIndexOfMin=G.findIndexOfMin;G=a("./stats");h.aggNums=
G.aggNums;h.len=G.len;h.mean=G.mean;h.median=G.median;h.midRange=G.midRange;h.variance=G.variance;h.stdev=G.stdev;h.interp=G.interp;G=a("./matrix");h.init2dArray=G.init2dArray;h.transposeRagged=G.transposeRagged;h.dot=G.dot;h.translationMatrix=G.translationMatrix;h.rotationMatrix=G.rotationMatrix;h.rotationXYMatrix=G.rotationXYMatrix;h.apply2DTransform=G.apply2DTransform;h.apply2DTransform2=G.apply2DTransform2;G=a("./angles");h.deg2rad=G.deg2rad;h.rad2deg=G.rad2deg;h.angleDelta=G.angleDelta;h.angleDist=
G.angleDist;h.isFullCircle=G.isFullCircle;h.isAngleInsideSector=G.isAngleInsideSector;h.isPtInsideSector=G.isPtInsideSector;h.pathArc=G.pathArc;h.pathSector=G.pathSector;h.pathAnnulus=G.pathAnnulus;G=a("./anchor_utils");h.isLeftAnchor=G.isLeftAnchor;h.isCenterAnchor=G.isCenterAnchor;h.isRightAnchor=G.isRightAnchor;h.isTopAnchor=G.isTopAnchor;h.isMiddleAnchor=G.isMiddleAnchor;h.isBottomAnchor=G.isBottomAnchor;G=a("./geometry2d");h.segmentsIntersect=G.segmentsIntersect;h.segmentDistance=G.segmentDistance;
h.getTextLocation=G.getTextLocation;h.clearLocationCache=G.clearLocationCache;h.getVisibleSegment=G.getVisibleSegment;h.findPointOnPath=G.findPointOnPath;G=a("./extend");h.extendFlat=G.extendFlat;h.extendDeep=G.extendDeep;h.extendDeepAll=G.extendDeepAll;h.extendDeepNoArrays=G.extendDeepNoArrays;G=a("./loggers");h.log=G.log;h.warn=G.warn;h.error=G.error;G=a("./regex");h.counterRegex=G.counter;G=a("./throttle");h.throttle=G.throttle;h.throttleDone=G.done;h.clearThrottle=G.clear;G=a("./dom");h.getGraphDiv=
G.getGraphDiv;h.isPlotDiv=G.isPlotDiv;h.removeElement=G.removeElement;h.addStyleRule=G.addStyleRule;h.addRelatedStyleRule=G.addRelatedStyleRule;h.deleteRelatedStyleRule=G.deleteRelatedStyleRule;h.clearResponsive=a("./clear_responsive");h.makeTraceGroups=a("./make_trace_groups");h._=a("./localize");h.notifier=a("./notifier");h.filterUnique=a("./filter_unique");h.filterVisible=a("./filter_visible");h.pushUnique=a("./push_unique");h.increment=a("./increment");h.cleanNumber=a("./clean_number");h.ensureNumber=
function(A){if(!b(A))return e;A=Number(A);return A<-k||A>k?e:b(A)?Number(A):e};h.isIndex=function(A,z){return void 0!==z&&A>=z?!1:b(A)&&0<=A&&0===A%1};h.noop=a("./noop");h.identity=a("./identity");h.repeat=function(A,z){for(var F=Array(z),D=0;D<z;D++)F[D]=A;return F};h.swapAttrs=function(A,z,F,D){F||(F="x");D||(D="y");for(var u=0;u<z.length;u++){var B=z[u],I=h.nestedProperty(A,B.replace("?",F));B=h.nestedProperty(A,B.replace("?",D));var J=I.get();I.set(B.get());B.set(J)}};h.raiseToTop=function(A){A.parentNode.appendChild(A)};
h.cancelTransition=function(A){return A.transition().duration(0)};h.constrain=function(A,z,F){return z>F?Math.max(F,Math.min(z,A)):Math.max(z,Math.min(F,A))};h.bBoxIntersect=function(A,z,F){F=F||0;return A.left<=z.right+F&&z.left<=A.right+F&&A.top<=z.bottom+F&&z.top<=A.bottom+F};h.simpleMap=function(A,z,F,D,u){for(var B=A.length,I=Array(B),J=0;J<B;J++)I[J]=z(A[J],F,D,u);return I};h.randstr=function B(z,F,D,u){D||(D=16);void 0===F&&(F=24);if(0>=F)return"0";var I=Math.log(Math.pow(2,F))/Math.log(D),
J="",N;for(N=2;Infinity===I;N*=2)I=Math.log(Math.pow(2,F/N))/Math.log(D)*N;var M=I-Math.floor(I);for(N=0;N<Math.floor(I);N++){var E=Math.floor(Math.random()*D).toString(D);J=E+J}M&&(I=Math.pow(D,M),E=Math.floor(Math.random()*I).toString(D),J=E+J);I=parseInt(J,D);return z&&z[J]||Infinity!==I&&I>=Math.pow(2,F)?10<u?(h.warn("randstr failed uniqueness"),J):B(z,F,D,(u||0)+1):J};h.OptionControl=function(z,F){z||(z={});F||(F="opt");var D={optionList:[],_newoption:function(u){u[F]=z;D[u.name]=u;D.optionList.push(u)}};
D["_"+F]=z;return D};h.smooth=function(z,F){F=Math.round(F)||0;if(2>F)return z;var D=z.length,u=2*D,B=2*F-1,I=Array(B),J=Array(D),N,M,E;for(N=0;N<B;N++)I[N]=(1-Math.cos(Math.PI*(N+1)/F))/(2*F);for(N=0;N<D;N++){for(M=E=0;M<B;M++){var L=N+M+1-F;L<-D?L-=u*Math.round(L/u):L>=u&&(L-=u*Math.floor(L/u));0>L?L=-1-L:L>=D&&(L=u-1-L);E+=z[L]*I[M]}J[N]=E}return J};h.syncOrAsync=function(z,F,D){function u(){return h.syncOrAsync(z,F,D)}for(var B;z.length;)if(B=z.splice(0,1)[0],(B=B(F))&&B.then)return B.then(u).then(void 0,
h.promiseError);return D&&D(F)};h.stripTrailingSlash=function(z){return"/"===z.substr(-1)?z.substr(0,z.length-1):z};h.noneOrAll=function(z,F,D){if(z){var u=!1,B=!0,I;for(I=0;I<D.length;I++){var J=z[D[I]];void 0!==J&&null!==J?u=!0:B=!1}if(u&&!B)for(I=0;I<D.length;I++)z[D[I]]=F[D[I]]}};h.mergeArray=function(z,F,D,u){var B="function"===typeof u;if(h.isArrayOrTypedArray(z))for(var I=Math.min(z.length,F.length),J=0;J<I;J++){var N=z[J];F[J][D]=B?u(N):N}};h.mergeArrayCastPositive=function(z,F,D){return h.mergeArray(z,
F,D,function(u){u=+u;return isFinite(u)?0<u?u:0:0})};h.fillArray=function(z,F,D,u){u=u||h.identity;if(h.isArrayOrTypedArray(z))for(var B=0;B<F.length;B++)F[B][D]=u(z[B])};h.castOption=function(z,F,D,u){u=u||h.identity;z=h.nestedProperty(z,D).get();return h.isArrayOrTypedArray(z)?Array.isArray(F)&&h.isArrayOrTypedArray(z[F[0]])?u(z[F[0]][F[1]]):u(z[F]):z};h.extractOption=function(z,F,D,u){if(D in z)return z[D];z=h.nestedProperty(F,u).get();if(!Array.isArray(z))return z};h.tagSelected=function(z,F,
D){var u=F.selectedpoints;F=F._indexToPoints;var B;F&&(B=q(F));for(F=0;F<u.length;F++){var I=u[F];if(h.isIndex(I)||h.isArrayOrTypedArray(I)&&h.isIndex(I[0])&&h.isIndex(I[1]))I=B?B[I]:I,I=D?D[I]:I,void 0!==I&&I<z.length&&(z[I].selected=1)}};h.selIndices2selPoints=function(z){var F=z.selectedpoints;if(z=z._indexToPoints){z=q(z);for(var D=[],u=0;u<F.length;u++){var B=F[u];h.isIndex(B)&&(B=z[B],h.isIndex(B)&&D.push(B))}return D}return F};h.getTargetArray=function(z,F){F=F.target;return"string"===typeof F&&
F?(z=h.nestedProperty(z,F).get(),Array.isArray(z)?z:!1):Array.isArray(F)?F:!1};h.minExtend=function(z,F){var D={};"object"!==typeof F&&(F={});var u=Object.keys(z),B;for(B=0;B<u.length;B++){var I=u[B];var J=z[I];"_"!==I.charAt(0)&&"function"!==typeof J&&("module"===I?D[I]=J:Array.isArray(J)?D[I]="colorscale"===I?J.slice():J.slice(0,3):h.isTypedArray(J)?D[I]=J.subarray(0,3):D[I]=J&&"object"===typeof J?h.minExtend(z[I],F[I]):J)}u=Object.keys(F);for(B=0;B<u.length;B++)I=u[B],J=F[I],"object"===typeof J&&
I in D&&"object"===typeof D[I]||(D[I]=J);return D};h.titleCase=function(z){return z.charAt(0).toUpperCase()+z.substr(1)};h.containsAny=function(z,F){for(var D=0;D<F.length;D++)if(-1!==z.indexOf(F[D]))return!0;return!1};h.isIE=function(){return"undefined"!==typeof window.navigator.msSaveBlob};var l=/MSIE [1-9]\./;h.isIE9orBelow=function(){return h.isIE()&&l.test(window.navigator.userAgent)};var c=/Version\/[\d\.]+.*Safari/;h.isSafari=function(){return c.test(window.navigator.userAgent)};var g=/iPad|iPhone|iPod/;
h.isIOS=function(){return g.test(window.navigator.userAgent)};h.isD3Selection=function(z){return z&&"function"===typeof z.classed};h.ensureSingle=function(z,F,D,u){var B=z.select(F+(D?"."+D:""));if(B.size())return B;z=z.append(F);D&&z.classed(D,!0);u&&z.call(u);return z};h.ensureSingleById=function(z,F,D,u){var B=z.select(F+"#"+D);if(B.size())return B;z=z.append(F).attr("id",D);u&&z.call(u);return z};h.objectFromPath=function(z,F){z=z.split(".");for(var D,u=D={},B=0;B<z.length;B++){var I=z[B],J;(J=
z[B].match(/(.*)\[([0-9]+)\]/))?(I=J[1],J=J[2],D=D[I]=[],D[J]=B===z.length-1?F:{},D=D[J]):(D[I]=B===z.length-1?F:{},D=D[I])}return u};var d=/^([^\[\.]+)\.(.+)?/,p=/^([^\.]+)\[([0-9]+)\](\.)?(.+)?/;h.expandObjectPaths=function(z){var F,D;if("object"===typeof z&&!Array.isArray(z))for(D in z)if(z.hasOwnProperty(D))if(F=D.match(d)){var u=z[D];var B=F[1];delete z[D];z[B]=h.extendDeepNoArrays(z[B]||{},h.objectFromPath(D,h.expandObjectPaths(u))[B])}else if(F=D.match(p)){u=z[D];B=F[1];var I=parseInt(F[2]);
delete z[D];z[B]=z[B]||[];"."===F[3]?(F=F[4],B=z[B][I]=z[B][I]||{},h.extendDeepNoArrays(B,h.objectFromPath(F,h.expandObjectPaths(u)))):z[B][I]=h.expandObjectPaths(u)}else z[D]=h.expandObjectPaths(z[D]);return z};h.numSeparate=function(z,F,D){D||(D=!1);if("string"!==typeof F||0===F.length)throw Error("Separator string required for formatting!");"number"===typeof z&&(z=String(z));var u=/(\d+)(\d{3})/,B=F.charAt(0);F=F.charAt(1);z=z.split(".");var I=z[0];B=1<z.length?B+z[1]:"";if(F&&(1<z.length||4<I.length||
D))for(;u.test(I);)I=I.replace(u,"$1"+F+"$2");return I+B};h.TEMPLATE_STRING_REGEX=/%{([^\s%{}:]*)([:|\|][^}]*)?}/g;var r=/^\w*$/;h.templateString=function(z,F){var D={};return z.replace(h.TEMPLATE_STRING_REGEX,function(u,B){r.test(B)?u=F[B]:(D[B]=D[B]||h.nestedProperty(F,B).get,u=D[B]());return h.isValidTextValue(u)?u:""})};var t={max:10,count:0,name:"hovertemplate"};h.hovertemplateString=function(){return n.apply(t,arguments)};var w={max:10,count:0,name:"texttemplate"};h.texttemplateString=function(){return n.apply(w,
arguments)};var x=/^[:|\|]/;h.subplotSort=function(z,F){for(var D=Math.min(z.length,F.length)+1,u=0,B=0,I=0;I<D;I++){var J=z.charCodeAt(I)||0,N=F.charCodeAt(I)||0,M=48<=J&&57>=J,E=48<=N&&57>=N;M&&(u=10*u+J-48);E&&(B=10*B+N-48);if(!M||!E){if(u!==B)return u-B;if(J!==N)return J-N}}return B-u};var y=2E9;h.seedPseudoRandom=function(){y=2E9};h.pseudoRandom=function(){var z=y;y=(69069*y+1)%4294967296;return 429496729>Math.abs(y-z)?h.pseudoRandom():y/4294967296};h.fillText=function(z,F,D){var u=Array.isArray(D)?
function(I){D.push(I)}:function(I){D.text=I},B=h.extractOption(z,F,"htx","hovertext");if(h.isValidTextValue(B))return u(B);z=h.extractOption(z,F,"tx","text");if(h.isValidTextValue(z))return u(z)};h.isValidTextValue=function(z){return z||0===z};h.formatPercent=function(z,F){F=F||0;z=(Math.round(100*z*Math.pow(10,F))*Math.pow(.1,F)).toFixed(F)+"%";for(var D=0;D<F;D++)-1!==z.indexOf(".")&&(z=z.replace("0%","%"),z=z.replace(".%","%"));return z};h.isHidden=function(z){z=window.getComputedStyle(z).display;
return!z||"none"===z};h.getTextTransform=function(z){var F=z.noCenter,D=z.textX,u=z.textY,B=z.targetX,I=z.targetY,J=z.anchorX||0,N=z.anchorY||0,M=z.rotate;(z=z.scale)?1<z&&(z=1):z=0;return"translate("+(B-z*(D+J))+","+(I-z*(u+N))+")"+(1>z?"scale("+z+")":"")+(M?"rotate("+M+(F?"":" "+D+" "+u)+")":"")};h.ensureUniformFontSize=function(z,F){var D=h.extendFlat({},F);D.size=Math.max(F.size,z._fullLayout.uniformtext.minsize||0);return D};h.join2=function(z,F,D){var u=z.length;return 1<u?z.slice(0,-1).join(F)+
D+z[u-1]:z.join(F)}},{"../constants/numerical":725,"./anchor_utils":730,"./angles":731,"./array":732,"./clean_number":733,"./clear_responsive":735,"./coerce":736,"./dates":737,"./dom":738,"./extend":740,"./filter_unique":741,"./filter_visible":742,"./geometry2d":745,"./identity":748,"./increment":749,"./is_plain_object":751,"./keyed_container":752,"./localize":753,"./loggers":754,"./make_trace_groups":755,"./matrix":756,"./mod":757,"./nested_property":758,"./noop":759,"./notifier":760,"./push_unique":764,
"./regex":766,"./relative_attr":767,"./relink_private":768,"./search":769,"./stats":772,"./throttle":775,"./to_log_range":776,d3:169,"d3-time-format":166,"fast-isnumeric":241}],751:[function(a,G,C){G.exports=function(q){return window&&window.process&&window.process.versions?"[object Object]"===Object.prototype.toString.call(q):"[object Object]"===Object.prototype.toString.call(q)&&Object.getPrototypeOf(q)===Object.prototype}},{}],752:[function(a,G,C){var q=a("./nested_property"),n=/^\w*$/;G.exports=
function(m,f,b,k){b=b||"name";k=k||"value";var e,h={};if(f&&f.length){var l=q(m,f);var c=l.get()}else c=m;f=f||"";var g={};if(c)for(e=0;e<c.length;e++)g[c[e][b]]=e;var d=n.test(k),p={set:function(r,t){var w=null===t?4:0;if(!c){if(!l||4===w)return;c=[];l.set(c)}var x=g[r];if(void 0===x){if(4===w)return;w|=3;x=c.length;g[r]=x}else t!==(d?c[x][k]:q(c[x],k).get())&&(w|=2);var y=c[x]=c[x]||{};y[b]=r;d?y[k]=t:q(y,k).set(t);null!==t&&(w&=-5);h[x]|=w;return p},get:function(r){if(c&&(r=g[r],void 0!==r))return d?
c[r][k]:q(c[r],k).get()},rename:function(r,t){var w=g[r];if(void 0===w)return p;h[w]|=1;g[t]=w;delete g[r];c[w][b]=t;return p},remove:function(r){var t=g[r];if(void 0===t)return p;var w=c[t];if(2<Object.keys(w).length)return h[t]|=2,p.set(r,null);if(d){for(e=t;e<c.length;e++)h[e]|=3;for(e=t;e<c.length;e++)g[c[e][b]]--;c.splice(t,1);delete g[r]}else q(w,k).set(null),h[t]|=6;return p},constructUpdate:function(){for(var r,t,w={},x=Object.keys(h),y=0;y<x.length;y++)t=x[y],r=f+"["+t+"]",c[t]?(h[t]&1&&
(w[r+"."+b]=c[t][b]),h[t]&2&&(w[r+"."+k]=d?h[t]&4?null:c[t][k]:h[t]&4?null:q(c[t],k).get())):w[r]=null;return w}};return p}},{"./nested_property":758}],753:[function(a,G,C){var q=a("../registry");G.exports=function(n,m){for(var f=n._context.locale,b=0;2>b;b++){for(var k=n._context.locales,e=0;2>e;e++){if(k=(k[f]||{}).dictionary)if(k=k[m])return k;k=q.localeRegistry}e=f.split("-")[0];if(e===f)break;f=e}return m}},{"../registry":882}],754:[function(a,G,C){function q(f,b){if(f&&f.apply)try{f.apply(console,
b);return}catch(e){}for(var k=0;k<b.length;k++)try{f(b[k])}catch(e){console.log(b[k])}}var n=a("../plot_api/plot_config").dfltConfig,m=a("./notifier");a=G.exports={};a.log=function(){var f;if(1<n.logging){var b=["LOG:"];for(f=0;f<arguments.length;f++)b.push(arguments[f]);q(console.trace||console.log,b)}if(1<n.notifyOnLogging){b=[];for(f=0;f<arguments.length;f++)b.push(arguments[f]);m(b.join("\x3cbr\x3e"),"long")}};a.warn=function(){var f;if(0<n.logging){var b=["WARN:"];for(f=0;f<arguments.length;f++)b.push(arguments[f]);
q(console.trace||console.log,b)}if(0<n.notifyOnLogging){b=[];for(f=0;f<arguments.length;f++)b.push(arguments[f]);m(b.join("\x3cbr\x3e"),"stick")}};a.error=function(){var f;if(0<n.logging){var b=["ERROR:"];for(f=0;f<arguments.length;f++)b.push(arguments[f]);q(console.error,b)}if(0<n.notifyOnLogging){b=[];for(f=0;f<arguments.length;f++)b.push(arguments[f]);m(b.join("\x3cbr\x3e"),"stick")}}},{"../plot_api/plot_config":786,"./notifier":760}],755:[function(a,G,C){var q=a("d3");G.exports=function(n,m,f){m=
n.selectAll("g."+f.replace(/\s/g,".")).data(m,function(k){return k[0].trace.uid});m.exit().remove();m.enter().append("g").attr("class",f);m.order();var b=n.classed("rangeplot")?"nodeRangePlot3":"node3";m.each(function(k){k[0][b]=q.select(this)});return m}},{d3:169}],756:[function(a,G,C){C.init2dArray=function(q,n){for(var m=Array(q),f=0;f<q;f++)m[f]=Array(n);return m};C.transposeRagged=function(q){var n=0,m=q.length,f,b;for(f=0;f<m;f++)n=Math.max(n,q[f].length);var k=Array(n);for(f=0;f<n;f++)for(k[f]=
Array(m),b=0;b<m;b++)k[f][b]=q[b][f];return k};C.dot=function(q,n){if(!q.length||!n.length||q.length!==n.length)return null;var m=q.length,f;if(q[0].length){var b=Array(m);for(f=0;f<m;f++)b[f]=C.dot(q[f],n)}else if(n[0].length)for(n=C.transposeRagged(n),b=Array(n.length),f=0;f<n.length;f++)b[f]=C.dot(q,n[f]);else for(f=b=0;f<m;f++)b+=q[f]*n[f];return b};C.translationMatrix=function(q,n){return[[1,0,q],[0,1,n],[0,0,1]]};C.rotationMatrix=function(q){q=q*Math.PI/180;return[[Math.cos(q),-Math.sin(q),
0],[Math.sin(q),Math.cos(q),0],[0,0,1]]};C.rotationXYMatrix=function(q,n,m){return C.dot(C.dot(C.translationMatrix(n,m),C.rotationMatrix(q)),C.translationMatrix(-n,-m))};C.apply2DTransform=function(q){return function(){var n=arguments;3===n.length&&(n=n[0]);n=1===arguments.length?n[0]:[n[0],n[1]];return C.dot(q,[n[0],n[1],1]).slice(0,2)}};C.apply2DTransform2=function(q){var n=C.apply2DTransform(q);return function(m){return n(m.slice(0,2)).concat(n(m.slice(2,4)))}}},{}],757:[function(a,G,C){G.exports=
{mod:function(q,n){q%=n;return 0>q?q+n:q},modHalf:function(q,n){return Math.abs(q)>n/2?q-Math.round(q/n)*n:q}}},{}],758:[function(a,G,C){function q(l,c){return function(){var g=l,d,p;for(d=0;d<c.length-1;d++){var r=c[d];if(-1===r){r=!0;var t=[];for(p=0;p<g.length;p++)t[p]=q(g[p],c.slice(d+1))(),t[p]!==t[0]&&(r=!1);return r?t[0]:t}if("number"===typeof r&&!e(g))return;g=g[r];if("object"!==typeof g||null===g)return}if("object"===typeof g&&null!==g&&(t=g[c[d]],null!==t))return t}}function n(l,c){return void 0===
l||null===l&&!c.match(h)}function m(l,c,g){return function(d){var p=l,r="",t=[[l,r]],w=n(d,g),x;for(x=0;x<c.length-1;x++){var y=c[x];if("number"===typeof y&&!e(p))throw"array index but container is not an array";if(-1===y){w=p;r=c.slice(x+1);y=d;var A=g,z=e(y),F=!0,D=y,u=A.replace("-1",0),B=z?!1:n(y,u),I=r[0];for(t=0;t<w.length;t++)u=A.replace("-1",t),z&&(D=y[t%y.length],B=n(D,u)),B&&(F=!1),f(w,t,I,B)&&m(w[t],r,A.replace("-1",t))(D);if(w=!F)break;else return}if(!f(p,y,c[x+1],w))break;p=p[y];if("object"!==
typeof p||null===p)throw"container is not an object";A=y;k(y)?A="["+y+"]":r&&(A="."+y);r+=A;t.push([p,r])}if(w){if(x===c.length-1&&(delete p[c[x]],Array.isArray(p)&&+c[x]===p.length-1))for(;p.length&&void 0===p[p.length-1];)p.pop()}else p[c[x]]=d}}function f(l,c,g,d){if(void 0===l[c]){if(d)return!1;l[c]="number"===typeof g?[]:{}}return!0}function b(l,c,g){return{set:function(){throw"bad container";},get:function(){},astr:c,parts:g,obj:l}}var k=a("fast-isnumeric"),e=a("./array").isArrayOrTypedArray;
G.exports=function(l,c){if(k(c))c=String(c);else if("string"!==typeof c||"[-1]"===c.substr(c.length-4))throw"bad property string";for(var g=0,d=c.split("."),p,r;g<d.length;){if(p=String(d[g]).match(/^([^\[\]]*)((\[\-?[0-9]*\])+)$/)){if(p[1])d[g]=p[1];else if(0===g)d.splice(0,1);else throw"bad property string";p=p[2].substr(1,p[2].length-2).split("][");for(r=0;r<p.length;r++)g++,d.splice(g,0,Number(p[r]))}g++}return"object"!==typeof l?b(l,c,d):{set:m(l,d,c),get:q(l,d),astr:c,parts:d,obj:l}};var h=
/(^|\.)args\[/},{"./array":732,"fast-isnumeric":241}],759:[function(a,G,C){G.exports=function(){}},{}],760:[function(a,G,C){var q=a("d3"),n=a("fast-isnumeric"),m=[];G.exports=function(f,b){function k(h){h.duration(700).style("opacity",0).each("end",function(l){l=m.indexOf(l);-1!==l&&m.splice(l,1);q.select(this).remove()})}if(-1===m.indexOf(f)){m.push(f);var e=1E3;n(b)?e=b:"long"===b&&(e=3E3);f=q.select("body").selectAll(".plotly-notifier").data([0]);f.enter().append("div").classed("plotly-notifier",
!0);f.selectAll(".notifier-note").data(m).enter().append("div").classed("notifier-note",!0).style("opacity",0).each(function(h){var l=q.select(this);l.append("button").classed("notifier-close",!0).html("\x26times;").on("click",function(){l.transition().call(k)});var c=l.append("p");h=h.split(/<br\s*\/?>/g);for(var g=0;g<h.length;g++)g&&c.append("br"),c.append("span").text(h[g]);"stick"===b?l.transition().duration(350).style("opacity",1):l.transition().duration(700).style("opacity",1).transition().delay(e).call(k)})}}},
{d3:169,"fast-isnumeric":241}],761:[function(a,G,C){var q=a("./setcursor");G.exports=function(n,m){var f=n.attr("data-savedcursor");if(m){if(!f){f=(n.attr("class")||"").split(" ");for(var b=0;b<f.length;b++){var k=f[b];0===k.indexOf("cursor-")&&n.attr("data-savedcursor",k.substr(7)).classed(k,!1)}n.attr("data-savedcursor")||n.attr("data-savedcursor","!!")}q(n,m)}else f&&(n.attr("data-savedcursor",null),"!!"===f?q(n):q(n,f))}},{"./setcursor":770}],762:[function(a,G,C){var q=a("./matrix").dot,n=a("../constants/numerical").BADNUM,
m=G.exports={};m.tester=function(f){function b(w,x){var y=w[0],A=w[1];return y===n||y<h||y>l||A===n||A<c||A>g||x&&p(w)?!1:!0}function k(w,x){var y=w[0];w=w[1];if(y===n||y<h||y>l||w===n||w<c||w>g)return!1;var A=e.length,z=e[0][0],F=e[0][1],D=0,u;for(u=1;u<A;u++){var B=z;var I=F;z=e[u][0];F=e[u][1];var J=Math.min(B,z);if(!(y<J||y>Math.max(B,z)||w>Math.max(I,F)))if(w<Math.min(I,F))y!==J&&D++;else{B=z===B?w:I+(y-B)*(F-I)/(z-B);if(w===B)return 1===u&&x?!1:!0;w<=B&&y!==J&&D++}}return 1===D%2}var e=f.slice(),
h=e[0][0],l=h,c=e[0][1],g=c;e.push(e[0]);for(f=1;f<e.length;f++)h=Math.min(h,e[f][0]),l=Math.max(l,e[f][0]),c=Math.min(c,e[f][1]),g=Math.max(g,e[f][1]);var d=!1;if(5===e.length)if(e[0][0]===e[1][0]){if(e[2][0]===e[3][0]&&e[0][1]===e[3][1]&&e[1][1]===e[2][1]){d=!0;var p=function(w){return w[0]===e[0][0]}}}else e[0][1]===e[1][1]&&e[2][1]===e[3][1]&&e[0][0]===e[3][0]&&e[1][0]===e[2][0]&&(d=!0,p=function(w){return w[1]===e[0][1]});var r=!0,t=e[0];for(f=1;f<e.length;f++)if(t[0]!==e[f][0]||t[1]!==e[f][1]){r=
!1;break}return{xmin:h,xmax:l,ymin:c,ymax:g,pts:e,contains:d?b:k,isRect:d,degenerate:r}};m.isSegmentBent=function(f,b,k,e){var h=f[b],l=[f[k][0]-h[0],f[k][1]-h[1]],c=q(l,l),g=Math.sqrt(c);g=[-l[1]/g,l[0]/g];for(b+=1;b<k;b++){var d=[f[b][0]-h[0],f[b][1]-h[1]];var p=q(d,l);if(0>p||p>c||Math.abs(q(d,g))>e)return!0}return!1};m.filter=function(f,b){function k(g){f.push(g);g=e.length;var d=h;e.splice(l+1);for(var p=d+1;p<f.length;p++)if(p===f.length-1||m.isSegmentBent(f,d,p+1,b))e.push(f[p]),e.length<g-
2&&(h=p,l=e.length-1),d=p}var e=[f[0]],h=0,l=0;if(1<f.length){var c=f.pop();k(c)}return{addPt:k,raw:f,filtered:e}}},{"../constants/numerical":725,"./matrix":756}],763:[function(a,G,C){(function(q){var n=a("./show_no_webgl_msg"),m=a("regl");G.exports=function(f,b){var k=f._fullLayout,e=!0;k._glcanvas.each(function(h){if(!h.regl&&(!h.pick||k._has("parcoords"))){try{h.regl=m({canvas:this,attributes:{antialias:!h.pick,preserveDrawingBuffer:!0},pixelRatio:f._context.plotGlPixelRatio||q.devicePixelRatio,
extensions:b||[]})}catch(l){e=!1}h.regl||(e=!1);e&&this.addEventListener("webglcontextlost",function(l){f&&f.emit&&f.emit("plotly_webglcontextlost",{event:l,layer:h.key})},!1)}});e||n({container:k._glcontainer.node()});return e}}).call(this,"undefined"!==typeof la?la:"undefined"!==typeof self?self:"undefined"!==typeof window?window:{})},{"./show_no_webgl_msg":771,regl:512}],764:[function(a,G,C){G.exports=function(q,n){if(n instanceof RegExp){for(var m=n.toString(),f=0;f<q.length;f++)if(q[f]instanceof
RegExp&&q[f].toString()===m)return q;q.push(n)}else!n&&0!==n||-1!==q.indexOf(n)||q.push(n);return q}},{}],765:[function(a,G,C){var q=a("../lib"),n=a("../plot_api/plot_config").dfltConfig,m={add:function(f,b,k,e,h){f.undoQueue=f.undoQueue||{index:0,queue:[],sequence:!1};var l=f.undoQueue.index;if(f.autoplay)f.undoQueue.inSequence||(f.autoplay=!1);else{if(!f.undoQueue.sequence||f.undoQueue.beginSequence){var c={undo:{calls:[],args:[]},redo:{calls:[],args:[]}};f.undoQueue.queue.splice(l,f.undoQueue.queue.length-
l,c);f.undoQueue.index+=1}else c=f.undoQueue.queue[l-1];f.undoQueue.beginSequence=!1;c&&(c.undo.calls.unshift(b),c.undo.args.unshift(k),c.redo.calls.push(e),c.redo.args.push(h));f.undoQueue.queue.length>n.queueLength&&(f.undoQueue.queue.shift(),f.undoQueue.index--)}},startSequence:function(f){f.undoQueue=f.undoQueue||{index:0,queue:[],sequence:!1};f.undoQueue.sequence=!0;f.undoQueue.beginSequence=!0},stopSequence:function(f){f.undoQueue=f.undoQueue||{index:0,queue:[],sequence:!1};f.undoQueue.sequence=
!1;f.undoQueue.beginSequence=!1},undo:function(f){var b;if(f.framework&&f.framework.isPolar)f.framework.undo();else if(!(void 0===f.undoQueue||isNaN(f.undoQueue.index)||0>=f.undoQueue.index)){f.undoQueue.index--;var k=f.undoQueue.queue[f.undoQueue.index];f.undoQueue.inSequence=!0;for(b=0;b<k.undo.calls.length;b++)m.plotDo(f,k.undo.calls[b],k.undo.args[b]);f.undoQueue.inSequence=!1;f.autoplay=!1}},redo:function(f){var b;if(f.framework&&f.framework.isPolar)f.framework.redo();else if(!(void 0===f.undoQueue||
isNaN(f.undoQueue.index)||f.undoQueue.index>=f.undoQueue.queue.length)){var k=f.undoQueue.queue[f.undoQueue.index];f.undoQueue.inSequence=!0;for(b=0;b<k.redo.calls.length;b++)m.plotDo(f,k.redo.calls[b],k.redo.args[b]);f.undoQueue.inSequence=!1;f.autoplay=!1;f.undoQueue.index++}},plotDo:function(f,b,k){f.autoplay=!0;for(var e=[],h,l=0;l<k.length;l++)h=k[l],e[l]=h===f?h:"object"===typeof h?Array.isArray(h)?q.extendDeep([],h):q.extendDeepAll({},h):h;b.apply(null,e)}};G.exports=m},{"../lib":750,"../plot_api/plot_config":786}],
766:[function(a,G,C){C.counter=function(q,n,m,f){n=(n||"")+(m?"":"$");f=!1===f?"":"^";return"xy"===q?new RegExp(f+"x([2-9]|[1-9][0-9]+)?y([2-9]|[1-9][0-9]+)?"+n):new RegExp(f+q+"([2-9]|[1-9][0-9]+)?"+n)}},{}],767:[function(a,G,C){var q=/^(.*)(\.[^\.\[\]]+|\[\d\])$/,n=/^[^\.\[\]]+$/;G.exports=function(m,f){for(;f;){var b=m.match(q);if(b)m=b[1];else if(m.match(n))m="";else throw Error("bad relativeAttr call:"+[m,f]);if("^"===f.charAt(0))f=f.slice(1);else break}return m&&"["!==f.charAt(0)?m+"."+f:m+
f}},{}],768:[function(a,G,C){var q=a("./array").isArrayOrTypedArray,n=a("./is_plain_object");G.exports=function k(f,b){for(var e in b){var h=b[e],l=f[e];if(l!==h)if("_"===e.charAt(0)||"function"===typeof h)e in f||(f[e]=h);else if(q(h)&&q(l)&&n(h[0])){if("customdata"!==e&&"ids"!==e)for(var c=Math.min(h.length,l.length),g=0;g<c;g++)l[g]!==h[g]&&n(h[g])&&n(l[g])&&k(l[g],h[g])}else n(h)&&n(l)&&(k(l,h),Object.keys(l).length||delete f[e])}}},{"./array":732,"./is_plain_object":751}],769:[function(a,G,C){function q(l,
c){return l<c}function n(l,c){return l<=c}function m(l,c){return l>c}function f(l,c){return l>=c}var b=a("fast-isnumeric"),k=a("./loggers"),e=a("./identity"),h=a("../constants/numerical").BADNUM;C.findBin=function(l,c,g){if(b(c.start))return g?Math.ceil((l-c.start)/c.size-1E-9)-1:Math.floor((l-c.start)/c.size+1E-9);var d=0,p=c.length,r=0,t=1<p?(c[p-1]-c[0])/(p-1):1;var w=0<=t?g?q:n:g?f:m;for(l+=1E-9*t*(g?-1:1)*(0<=t?1:-1);d<p&&100>r++;)g=Math.floor((d+p)/2),w(c[g],l)?d=g+1:p=g;90<r&&k.log("Long binary search...");
return d-1};C.sorterAsc=function(l,c){return l-c};C.sorterDes=function(l,c){return c-l};C.distinctVals=function(l,c){var g=(c||{}).unitMinDiff;l=l.slice();l.sort(C.sorterAsc);for(c=l.length-1;-1<c&&l[c]===h;c--);var d=1;g||(d=l[c]-l[0]||1);g=d/(c||1)/1E4;for(var p=[],r,t=0;t<=c;t++){var w=l[t],x=w-r;void 0===r?(p.push(w),r=w):x>g&&(d=Math.min(d,x),p.push(w),r=w)}return{vals:p,minDiff:d}};C.roundUp=function(l,c,g){for(var d=0,p=c.length-1,r=0,t=g?0:1,w=g?1:0,x=g?Math.ceil:Math.floor;d<p&&100>r++;)g=
x((d+p)/2),c[g]<=l?d=g+t:p=g-w;return c[d]};C.sort=function(l,c){for(var g=0,d=0,p=1;p<l.length;p++){var r=c(l[p],l[p-1]);0>r?g=1:0<r&&(d=1);if(g&&d)return l.sort(c)}return d?l:l.reverse()};C.findIndexOfMin=function(l,c){c=c||e;for(var g=Infinity,d,p=0;p<l.length;p++){var r=c(l[p]);r<g&&(g=r,d=p)}return d}},{"../constants/numerical":725,"./identity":748,"./loggers":754,"fast-isnumeric":241}],770:[function(a,G,C){G.exports=function(q,n){(q.attr("class")||"").split(" ").forEach(function(m){0===m.indexOf("cursor-")&&
q.classed(m,!1)});n&&q.classed("cursor-"+n,!0)}},{}],771:[function(a,G,C){var q=a("../components/color"),n=function(){};G.exports=function(m){for(var f in m)"function"===typeof m[f]&&(m[f]=n);m.destroy=function(){m.container.parentNode.removeChild(m.container)};f=document.createElement("div");f.className="no-webgl";f.style.cursor="pointer";f.style.fontSize="24px";f.style.color=q.defaults[0];f.style.position="absolute";f.style.left=f.style.top="0px";f.style.width=f.style.height="100%";f.style["background-color"]=
q.lightLine;f.style["z-index"]=30;var b=document.createElement("p");b.textContent="WebGL is not supported by your browser - visit https://get.webgl.org for more info";b.style.position="relative";b.style.top="50%";b.style.left="50%";b.style.height="30%";b.style.width="50%";b.style.margin="-15% 0 0 -25%";f.appendChild(b);m.container.appendChild(f);m.container.style.background="#FFFFFF";m.container.onclick=function(){window.open("https://get.webgl.org")};return!1}},{"../components/color":615}],772:[function(a,
G,C){var q=a("fast-isnumeric"),n=a("./array").isArrayOrTypedArray;C.aggNums=function(m,f,b,k){var e;if(!k||k>b.length)k=b.length;q(f)||(f=!1);if(n(b[0])){var h=Array(k);for(e=0;e<k;e++)h[e]=C.aggNums(m,f,b[e]);b=h}for(e=0;e<k;e++)q(f)?q(b[e])&&(f=m(+f,+b[e])):f=b[e];return f};C.len=function(m){return C.aggNums(function(f){return f+1},0,m)};C.mean=function(m,f){f||(f=C.len(m));return C.aggNums(function(b,k){return b+k},0,m)/f};C.midRange=function(m){if(void 0!==m&&0!==m.length)return(C.aggNums(Math.max,
null,m)+C.aggNums(Math.min,null,m))/2};C.variance=function(m,f,b){f||(f=C.len(m));q(b)||(b=C.mean(m,f));return C.aggNums(function(k,e){return k+Math.pow(e-b,2)},0,m)/f};C.stdev=function(m,f,b){return Math.sqrt(C.variance(m,f,b))};C.median=function(m){m=m.slice().sort();return C.interp(m,.5)};C.interp=function(m,f){if(!q(f))throw"n should be a finite number";f=f*m.length-.5;if(0>f)return m[0];if(f>m.length-1)return m[m.length-1];var b=f%1;return b*m[Math.ceil(f)]+(1-b)*m[Math.floor(f)]}},{"./array":732,
"fast-isnumeric":241}],773:[function(a,G,C){var q=a("color-normalize");G.exports=function(n){return n?q(n):[0,0,0,1]}},{"color-normalize":125}],774:[function(a,G,C){function q(E,L,Q){var S,R,O,T;MathJax.Hub.Queue(function(){R=e.extendDeepAll({},MathJax.Hub.config);O=MathJax.Hub.processSectionDelay;void 0!==MathJax.Hub.processSectionDelay&&(MathJax.Hub.processSectionDelay=0);return MathJax.Hub.Config({messageStyle:"none",tex2jax:{inlineMath:[["$","$"],["\\(","\\)"]]},displayAlign:"left"})},function(){S=
MathJax.Hub.config.menuSettings.renderer;if("SVG"!==S)return MathJax.Hub.setRenderer("SVG")},function(){var V="math-output-"+e.randstr({},64);T=k.select("body").append("div").attr({id:V}).style({visibility:"hidden",position:"absolute"}).style({"font-size":L.fontSize+"px"}).text(E.replace(g,"\\lt ").replace(d,"\\gt "));return MathJax.Hub.Typeset(T.node())},function(){var V=k.select("body").select("#MathJax_SVG_glyphs");if(T.select(".MathJax_SVG").empty()||!T.select("svg").node())e.log("There was an error in the tex syntax.",
E),Q();else{var X=T.select("svg").node().getBoundingClientRect();Q(T.select(".MathJax_SVG"),V,X)}T.remove();if("SVG"!==S)return MathJax.Hub.setRenderer(S)},function(){void 0!==O&&(MathJax.Hub.processSectionDelay=O);return MathJax.Hub.Config(R)})}function n(E,L){return E?(E=(E=E.match(L))&&(E[3]||E[4]))&&m(E):null}function m(E){return E.replace(M,function(L,Q){if("#"===Q.charAt(0))if(Q="x"===Q.charAt(1)?parseInt(Q.substr(2),16):parseInt(Q.substr(1),10),1114111<Q)Q=void 0;else{var S=String.fromCodePoint;
S?Q=S(Q):(S=String.fromCharCode,Q=65535>=Q?S(Q):S((Q>>10)+55232,Q%1024+56320))}else Q=N[Q];return Q||L})}function f(E,L){function Q(){X++;var qa=document.createElementNS(h.svg,"tspan");k.select(qa).attr({class:"line",dy:X*l+"em"});E.appendChild(qa);ba=qa;var Y=V;V=[{node:qa}];if(1<Y.length)for(qa=1;qa<Y.length;qa++)S(Y[qa])}function S(qa){var Y=qa.type,pa={};if("a"===Y){var oa="a";var ua=qa.target,ya=qa.href,ja=qa.popup;ya&&(pa={"xlink:xlink:show":"_blank"===ua||"_"!==ua.charAt(0)?"new":"replace",
target:ua,"xlink:xlink:href":ya},ja&&(pa.onclick='window.open(this.href.baseVal,this.target.baseVal,"'+ja+'");return false;'))}else oa="tspan";qa.style&&(pa.style=qa.style);oa=document.createElementNS(h.svg,oa);"sup"===Y||"sub"===Y?(R(ba,w),ba.appendChild(oa),ua=document.createElementNS(h.svg,"tspan"),R(ua,w),k.select(ua).attr("dy",t[Y]),pa.dy=r[Y],ba.appendChild(oa),ba.appendChild(ua)):ba.appendChild(oa);k.select(oa).attr(pa);ba=qa.node=oa;V.push(qa)}function R(qa,Y){qa.appendChild(document.createTextNode(Y))}
function O(qa){if(1===V.length)e.log("Ignoring unexpected end tag \x3c/"+qa+"\x3e.",L);else{var Y=V.pop();qa!==Y.type&&e.log("Start tag \x3c"+Y.type+"\x3e doesnt match end tag \x3c"+qa+"\x3e. Pretending it did match.",L);ba=V[V.length-1].node}}L=L.replace(y," ");var T=!1,V=[],X=-1;if(F.test(L))Q();else{var ba=E;V=[{node:E}]}for(var aa=L.split(A),ka=0;ka<aa.length;ka++){var ha=aa[ka],ca=ha.match(z),sa=ca&&ca[2].toLowerCase(),ma=p[sa];if("br"===sa)Q();else if(void 0===ma)R(ba,m(ha));else if(ca[1])O(sa);
else{ha=ca[4];ca={type:sa};var ra=n(ha,D);ra?(ra=ra.replace(J,"$1 fill:"),ma&&(ra+=";"+ma)):ma&&(ra=ma);ra&&(ca.style=ra);"a"===sa&&(T=!0,sa=n(ha,u))&&(ma=document.createElement("a"),ma.href=sa,-1!==x.indexOf(ma.protocol)&&(ca.href=encodeURI(decodeURI(sa)),ca.target=n(ha,B)||"_blank",ca.popup=n(ha,I)));S(ca)}}return T}function b(E,L,Q){var S=Q.horizontalAlign;Q=Q.verticalAlign||"top";var R=E.node().getBoundingClientRect(),O=L.node().getBoundingClientRect(),T;var V="bottom"===Q?function(){return R.bottom-
T.height}:"middle"===Q?function(){return R.top+(R.height-T.height)/2}:function(){return R.top};var X="right"===S?function(){return R.right-T.width}:"center"===S?function(){return R.left+(R.width-T.width)/2}:function(){return R.left};return function(){T=this.node().getBoundingClientRect();this.style({top:V()-O.top+"px",left:X()-O.left+"px","z-index":1E3});return this}}var k=a("d3"),e=a("../lib"),h=a("../constants/xmlns_namespaces"),l=a("../constants/alignment").LINE_SPACING,c=/([^$]*)([$]+[^$]*[$]+)([^$]*)/;
C.convertToTspans=function(E,L,Q){function S(){T.empty()||(V=E.attr("class")+"-math",T.select("svg."+V).remove());E.text("").style("white-space","pre");f(E.node(),R)&&E.style("pointer-events","all");C.positionText(E);Q&&Q.call(E)}var R=E.text(),O=!E.attr("data-notex")&&"undefined"!==typeof MathJax&&R.match(c),T=k.select(E.node().parentNode);if(!T.empty()){var V=E.attr("class")?E.attr("class").split(" ")[0]:"text";V+="-math";T.selectAll("svg."+V).remove();T.selectAll("g."+V+"-group").remove();E.style("display",
null).attr({"data-unformatted":R,"data-math":"N"});O?(L&&L._promises||[]).push(new Promise(function(X){E.style("display","none");var ba=parseInt(E.node().style.fontSize,10);q(O[2],{fontSize:ba},function(aa,ka,ha){T.selectAll("svg."+V).remove();T.selectAll("g."+V+"-group").remove();if((aa=aa&&aa.select("svg"))&&aa.node()){var ca=T.append("g").classed(V+"-group",!0).attr({"pointer-events":"none","data-unformatted":R,"data-math":"Y"});ca.node().appendChild(aa.node());ka&&ka.node()&&aa.node().insertBefore(ka.node().cloneNode(!0),
aa.node().firstChild);aa.attr({"class":V,height:ha.height,preserveAspectRatio:"xMinYMin meet"}).style({overflow:"visible","pointer-events":"none"});ka=E.node().style.fill||"black";ha=aa.select("g");ha.attr({fill:ka,stroke:ka});ka=ha.node().getBoundingClientRect().width;ha=ha.node().getBoundingClientRect().height;var sa=+E.attr("x")-ka*{start:0,middle:.5,end:1}[E.attr("text-anchor")||"start"],ma=-(ba||E.node().getBoundingClientRect().height)/4;"y"===V[0]?(ca.attr({transform:"rotate("+[-90,+E.attr("x"),
+E.attr("y")]+") translate("+[-ka/2,ma-ha/2]+")"}),aa.attr({x:+E.attr("x"),y:+E.attr("y")})):"l"===V[0]?aa.attr({x:E.attr("x"),y:ma-ha/2}):"a"===V[0]&&0!==V.indexOf("atitle")?aa.attr({x:0,y:ma}):aa.attr({x:sa,y:+E.attr("y")+ma-ha/2});Q&&Q.call(E,ca);X(ca)}else S(),X()})})):S();return E}};var g=/(<|&lt;|&#60;)/g,d=/(>|&gt;|&#62;)/g,p={sup:"font-size:70%",sub:"font-size:70%",b:"font-weight:bold",i:"font-style:italic",a:"cursor:pointer",span:"",em:"font-style:italic;font-weight:bold"},r={sub:"0.3em",
sup:"-0.6em"},t={sub:"-0.21em",sup:"0.42em"},w="​",x=["http:","https:","mailto:","",void 0,":"],y=C.NEWLINES=/(\r\n?|\n)/g,A=/(<[^<>]*>)/,z=/<(\/?)([^ >]*)(\s+(.*))?>/i,F=/<br(\s+.*)?>/i;C.BR_TAG_ALL=/<br(\s+.*)?>/gi;var D=/(^|[\s"'])style\s*=\s*("([^"]*);?"|'([^']*);?')/i,u=/(^|[\s"'])href\s*=\s*("([^"]*)"|'([^']*)')/i,B=/(^|[\s"'])target\s*=\s*("([^"\s]*)"|'([^'\s]*)')/i,I=/(^|[\s"'])popup\s*=\s*("([\w=,]*)"|'([\w=,]*)')/i,J=/(^|;)\s*color:/;C.plainText=function(E,L){L=L||{};var Q=void 0!==L.len&&
-1!==L.len?L.len:Infinity;L=void 0!==L.allowedTags?L.allowedTags:["br"];var S=E.split(A);E=[];for(var R="",O=0,T=0;T<S.length;T++){var V=S[T],X=V.match(z);if(X=X&&X[2].toLowerCase())-1!==L.indexOf(X)&&(E.push(V),R=X);else{X=V.length;if(O+X<Q)E.push(V),O+=X;else if(O<Q){L=Q-O;R&&("br"!==R||3>=L||3>=X)&&E.pop();3<Q?E.push(V.substr(0,L-3)+"..."):E.push(V.substr(0,L));break}R=""}}return E.join("")};var N={mu:"μ",amp:"\x26",lt:"\x3c",gt:"\x3e",nbsp:" ",times:"×",plusmn:"±",deg:"°"},M=/&(#\d+|#x[\da-fA-F]+|[a-z]+);/g;
C.convertEntities=m;C.sanitizeHTML=function(E){E=E.replace(y," ");var L=document.createElement("p"),Q=L,S=[];E=E.split(A);for(var R=0;R<E.length;R++){var O=E[R],T=O.match(z),V=T&&T[2].toLowerCase();if(V in p)if(T[1])S.length&&(Q=S.pop());else{T=T[4];O=(O=n(T,D))?{style:O}:{};if("a"===V){var X=n(T,u);if(X){var ba=document.createElement("a");ba.href=X;-1!==x.indexOf(ba.protocol)&&(O.href=encodeURI(decodeURI(X)),T=n(T,B))&&(O.target=T)}}V=document.createElement(V);Q.appendChild(V);k.select(V).attr(O);
Q=V;S.push(V)}else Q.appendChild(document.createTextNode(m(O)))}return L.innerHTML};C.lineCount=function(E){return E.selectAll("tspan.line").size()||1};C.positionText=function(E,L,Q){return E.each(function(){function S(V,X){void 0===X?(X=R.attr(V),null===X&&(R.attr(V,0),X=0)):R.attr(V,X);return X}var R=k.select(this),O=S("x",L),T=S("y",Q);"text"===this.nodeName&&R.selectAll("tspan.line").attr({x:O,y:T})})};C.makeEditable=function(E,L){function Q(){R();E.style({opacity:0});var ba=X.attr("class");(ba=
ba?"."+ba.split(" ")[0]+"-math-group":"[class*\x3d-math-group]")&&k.select(E.node().parentNode).select(ba).style({opacity:0})}function S(ba){ba=ba.node();var aa=document.createRange();aa.selectNodeContents(ba);var ka=window.getSelection();ka.removeAllRanges();ka.addRange(aa);ba.focus()}function R(){var ba=k.select(O).select(".svg-container"),aa=ba.append("div"),ka=E.node().style,ha=parseFloat(ka.fontSize||12),ca=L.text;void 0===ca&&(ca=E.attr("data-unformatted"));aa.classed("plugin-editable editable",
!0).style({position:"absolute","font-family":ka.fontFamily||"Arial","font-size":ha,color:L.fill||ka.fill||"black",opacity:1,"background-color":L.background||"transparent",outline:"#ffffff33 1px solid",margin:[-ha/8+1,0,0,-1].join("px ")+"px",padding:"0","box-sizing":"border-box"}).attr({contenteditable:!0}).text(ca).call(b(E,ba,L)).on("blur",function(){O._editing=!1;E.text(this.textContent).style({opacity:1});var sa=k.select(this).attr("class");(sa=sa?"."+sa.split(" ")[0]+"-math-group":"[class*\x3d-math-group]")&&
k.select(E.node().parentNode).select(sa).style({opacity:0});sa=this.textContent;k.select(this).transition().duration(0).remove();k.select(document).on("mouseup",null);V.edit.call(E,sa)}).on("focus",function(){var sa=this;O._editing=!0;k.select(document).on("mouseup",function(){if(k.event.target===sa)return!1;document.activeElement===aa.node()&&aa.node().blur()})}).on("keyup",function(){27===k.event.which?(O._editing=!1,E.style({opacity:1}),k.select(this).style({opacity:0}).on("blur",function(){return!1}).transition().remove(),
V.cancel.call(E,this.textContent)):(V.input.call(E,this.textContent),k.select(this).call(b(E,ba,L)))}).on("keydown",function(){13===k.event.which&&this.blur()}).call(S)}var O=L.gd,T=L.delegate,V=k.dispatch("edit","input","cancel"),X=T||E;E.style({"pointer-events":T?"none":"all"});if(1!==E.size())throw Error("boo");if(L.immediate)Q();else X.on("click",Q);return k.rebind(E,V,"on")}},{"../constants/alignment":717,"../constants/xmlns_namespaces":726,"../lib":750,d3:169}],775:[function(a,G,C){function q(m){m&&
null!==m.timer&&(clearTimeout(m.timer),m.timer=null)}var n={};C.throttle=function(m,f,b){function k(){b();e.ts=Date.now();e.onDone&&(e.onDone(),e.onDone=null)}var e=n[m],h=Date.now();if(!e){for(var l in n)n[l].ts<h-6E4&&delete n[l];e=n[m]={ts:0,timer:null}}q(e);h>e.ts+f?k():e.timer=setTimeout(function(){k();e.timer=null},f)};C.done=function(m){var f=n[m];return f&&f.timer?new Promise(function(b){var k=f.onDone;f.onDone=function(){k&&k();b();f.onDone=null}}):Promise.resolve()};C.clear=function(m){if(m)q(n[m]),
delete n[m];else for(var f in n)C.clear(f)}},{}],776:[function(a,G,C){var q=a("fast-isnumeric");G.exports=function(n,m){if(0<n)return Math.log(n)/Math.LN10;n=Math.log(Math.min(m[0],m[1]))/Math.LN10;q(n)||(n=Math.log(Math.max(m[0],m[1]))/Math.LN10-6);return n}},{"fast-isnumeric":241}],777:[function(a,G,C){G=G.exports={};var q=a("../plots/geo/constants").locationmodeToLayer,n=a("topojson-client").feature;G.getTopojsonName=function(m){return[m.scope.replace(/ /g,"-"),"_",m.resolution.toString(),"m"].join("")};
G.getTopojsonPath=function(m,f){return m+f+".json"};G.getTopojsonFeatures=function(m,f){return n(f,f.objects[q[m.locationmode]]).features}},{"../plots/geo/constants":829,"topojson-client":551}],778:[function(a,G,C){G.exports={moduleType:"locale",name:"en-US",dictionary:{"Click to enter Colorscale title":"Click to enter Colorscale title"},format:{date:"%m/%d/%Y"}}},{}],779:[function(a,G,C){G.exports={moduleType:"locale",name:"en",dictionary:{"Click to enter Colorscale title":"Click to enter Colourscale title"},
format:{days:"Sunday Monday Tuesday Wednesday Thursday Friday Saturday".split(" "),shortDays:"Sun Mon Tue Wed Thu Fri Sat".split(" "),months:"January February March April May June July August September October November December".split(" "),shortMonths:"Jan Feb Mar Apr May Jun Jul Aug Sep Oct Nov Dec".split(" "),periods:["AM","PM"],dateTime:"%a %b %e %X %Y",date:"%d/%m/%Y",time:"%H:%M:%S",decimal:".",thousands:",",grouping:[3],currency:["$",""],year:"%Y",month:"%b %Y",dayMonth:"%b %-d",dayMonthYear:"%b %-d, %Y"}}},
{}],780:[function(a,G,C){var q=a("../registry");G.exports=function(n){for(var m=q.layoutArrayContainers,f=q.layoutArrayRegexes,b=n.split("[")[0],k,e,h=0;h<f.length;h++)if((e=n.match(f[h]))&&0===e.index){k=e[0];break}k||(k=m[m.indexOf(b)]);if(!k)return!1;n=n.substr(k.length);return n?(e=n.match(/^\[(0|[1-9][0-9]*)\](\.(.+))?$/))?{array:k,index:Number(e[1]),property:e[3]||""}:!1:{array:k,index:"",property:""}}},{"../registry":882}],781:[function(a,G,C){function q(h){for(var l={},c=0;c<h.length;c++)l[h[c]]=
!1;return l}function n(h,l,c){h=f({},h);for(var g in h){var d=h[g];b(d)&&(h[g]=m(d,l,c,g))}"from-root"===c&&(h.editType=l);return h}function m(h,l,c,g){if(h.valType){c=f({},h);c.editType=l;if(Array.isArray(h.items))for(c.items=Array(h.items.length),g=0;g<h.items.length;g++)c.items[g]=m(h.items[g],l,"from-root");return c}return n(h,l,"_"===g.charAt(0)?"nested":"from-root")}a=a("../lib");var f=a.extendFlat,b=a.isPlainObject;a={valType:"flaglist",extras:["none"],flags:"calc clearAxisTypes plot style markerSize colorbars".split(" ")};
C={valType:"flaglist",extras:["none"],flags:"calc plot legend ticks axrange layoutstyle modebar camera arraydraw colorbars".split(" ")};var k=a.flags.slice().concat(["fullReplot"]),e=C.flags.slice().concat("layoutReplot");G.exports={traces:a,layout:C,traceFlags:function(){return q(k)},layoutFlags:function(){return q(e)},update:function(h,l){if((l=l.editType)&&"none"!==l){l=l.split("+");for(var c=0;c<l.length;c++)h[l[c]]=!0}},overrideAll:n}},{"../lib":750}],782:[function(a,G,C){function q(y,A){var z=
y[A],F=A.charAt(0);z&&"paper"!==z&&(y[A]=p(z,F,!0))}function n(y){function A(z,F){var D=y.title&&y.title[F];y[z]&&!D&&(y.title||(y.title={}),y.title[F]=y[z],delete y[z])}if(y){if("string"===typeof y.title||"number"===typeof y.title)y.title={text:y.title};A("titlefont","font");A("titleposition","position");A("titleside","side");A("titleoffset","offset")}}function m(y){if(!c.isPlainObject(y))return!1;var A=y.name;delete y.name;delete y.showlegend;return("string"===typeof A||"number"===typeof A)&&String(A)}
function f(y){var A="middle",z="center";"string"===typeof y&&(-1!==y.indexOf("top")?A="top":-1!==y.indexOf("bottom")&&(A="bottom"),-1!==y.indexOf("left")?z="left":-1!==y.indexOf("right")&&(z="right"));return A+" "+z}function b(y,A){return A in y&&"object"===typeof y[A]&&0===Object.keys(y[A]).length}function k(y){var A=y.search(w);if(0<A)return y.substr(0,A)}var e=a("fast-isnumeric"),h=a("gl-mat4/fromQuat"),l=a("../registry"),c=a("../lib"),g=a("../plots/plots");G=a("../plots/cartesian/axis_ids");var d=
a("../components/color"),p=G.cleanId,r=G.getFromTrace,t=l.traceIs;C.clearPromiseQueue=function(y){Array.isArray(y._promises)&&0<y._promises.length&&c.log("Clearing previous rejected promises from queue.");y._promises=[]};C.cleanLayout=function(y){var A;y||(y={});y.xaxis1&&(y.xaxis||(y.xaxis=y.xaxis1),delete y.xaxis1);y.yaxis1&&(y.yaxis||(y.yaxis=y.yaxis1),delete y.yaxis1);y.scene1&&(y.scene||(y.scene=y.scene1),delete y.scene1);var z=(g.subplotsRegistry.cartesian||{}).attrRegex,F=(g.subplotsRegistry.polar||
{}).attrRegex,D=(g.subplotsRegistry.ternary||{}).attrRegex,u=(g.subplotsRegistry.gl3d||{}).attrRegex,B=Object.keys(y);for(A=0;A<B.length;A++){var I=B[A];if(z&&z.test(I)){I=y[I];I.anchor&&"free"!==I.anchor&&(I.anchor=p(I.anchor));I.overlaying&&(I.overlaying=p(I.overlaying));I.type||(I.isdate?I.type="date":I.islog?I.type="log":!1===I.isdate&&!1===I.islog&&(I.type="linear"));if("withzero"===I.autorange||"tozero"===I.autorange)I.autorange=!0,I.rangemode="tozero";delete I.islog;delete I.isdate;delete I.categories;
b(I,"domain")&&delete I.domain;void 0!==I.autotick&&(void 0===I.tickmode&&(I.tickmode=I.autotick?"auto":"linear"),delete I.autotick);n(I)}else if(F&&F.test(I))n(y[I].radialaxis);else if(D&&D.test(I))I=y[I],n(I.aaxis),n(I.baxis),n(I.caxis);else if(u&&u.test(I)){I=y[I];var J=I.cameraposition;if(Array.isArray(J)&&4===J[0].length){var N=J[1],M=J[2],E=h([],J[0]),L=[];for(J=0;3>J;++J)L[J]=N[J]+M*E[2+4*J];I.camera={eye:{x:L[0],y:L[1],z:L[2]},center:{x:N[0],y:N[1],z:N[2]},up:{x:0,y:0,z:1}};delete I.cameraposition}n(I.xaxis);
n(I.yaxis);n(I.zaxis)}}z=Array.isArray(y.annotations)?y.annotations.length:0;for(A=0;A<z;A++)F=y.annotations[A],c.isPlainObject(F)&&(F.ref&&("paper"===F.ref?(F.xref="paper",F.yref="paper"):"data"===F.ref&&(F.xref="x",F.yref="y"),delete F.ref),q(F,"xref"),q(F,"yref"));z=Array.isArray(y.shapes)?y.shapes.length:0;for(A=0;A<z;A++)F=y.shapes[A],c.isPlainObject(F)&&(q(F,"xref"),q(F,"yref"));z=Array.isArray(y.images)?y.images.length:0;for(A=0;A<z;A++)F=y.images[A],c.isPlainObject(F)&&(q(F,"xref"),q(F,"yref"));
if(A=y.legend)3<A.x?(A.x=1.02,A.xanchor="left"):-2>A.x&&(A.x=-.02,A.xanchor="right"),3<A.y?(A.y=1.02,A.yanchor="bottom"):-2>A.y&&(A.y=-.02,A.yanchor="top");n(y);"rotate"===y.dragmode&&(y.dragmode="orbit");d.clean(y);y.template&&y.template.layout&&C.cleanLayout(y.template.layout);return y};C.cleanData=function(y){for(var A=0;A<y.length;A++){var z=y[A];"histogramy"===z.type&&"xbins"in z&&!("ybins"in z)&&(z.ybins=z.xbins,delete z.xbins);if(z.error_y&&"opacity"in z.error_y){var F=d.defaults;F=z.error_y.color||
(t(z,"bar")?d.defaultLine:F[A%F.length]);z.error_y.color=d.addOpacity(d.rgb(F),d.opacity(F)*z.error_y.opacity);delete z.error_y.opacity}"bardir"in z&&("h"!==z.bardir||!t(z,"bar")&&"histogram"!==z.type.substr(0,9)||(z.orientation="h",C.swapXYData(z)),delete z.bardir);"histogramy"===z.type&&C.swapXYData(z);if("histogramx"===z.type||"histogramy"===z.type)z.type="histogram";"scl"in z&&!("colorscale"in z)&&(z.colorscale=z.scl,delete z.scl);"reversescl"in z&&!("reversescale"in z)&&(z.reversescale=z.reversescl,
delete z.reversescl);z.xaxis&&(z.xaxis=p(z.xaxis,"x"));z.yaxis&&(z.yaxis=p(z.yaxis,"y"));t(z,"gl3d")&&z.scene&&(z.scene=g.subplotsRegistry.gl3d.cleanId(z.scene));if(!t(z,"pie-like")&&!t(z,"bar-like"))if(Array.isArray(z.textposition))for(F=0;F<z.textposition.length;F++)z.textposition[F]=f(z.textposition[F]);else z.textposition&&(z.textposition=f(z.textposition));(F=l.getModule(z))&&F.colorbar&&(F=(F=F.colorbar.container)?z[F]:z)&&F.colorscale&&("YIGnBu"===F.colorscale&&(F.colorscale="YlGnBu"),"YIOrRd"===
F.colorscale&&(F.colorscale="YlOrRd"));if("surface"===z.type&&c.isPlainObject(z.contours)){var D=["x","y","z"];for(F=0;F<D.length;F++){var u=z.contours[D[F]];c.isPlainObject(u)&&(u.highlightColor&&(u.highlightcolor=u.highlightColor,delete u.highlightColor),u.highlightWidth&&(u.highlightwidth=u.highlightWidth,delete u.highlightWidth))}}if("candlestick"===z.type||"ohlc"===z.type){D=!1!==(z.increasing||{}).showlegend;u=!1!==(z.decreasing||{}).showlegend;F=m(z.increasing);var B=m(z.decreasing);if(!1!==
F&&!1!==B){if(!D||u)if(u&&!D)F=B;else if(F.trim()){if(B.trim()){u=Math.min(F.length,B.length);for(D=0;D<u&&F.charAt(D)===B.charAt(D);D++);F=F.substr(0,D).trim()}}else F=B;F&&(z.name=F)}else!F&&!B||z.name||(z.name=F||B)}if(Array.isArray(z.transforms))for(D=z.transforms,F=0;F<D.length;F++)if(u=D[F],c.isPlainObject(u))switch(u.type){case "filter":u.filtersrc&&(u.target=u.filtersrc,delete u.filtersrc);u.calendar&&(u.valuecalendar||(u.valuecalendar=u.calendar),delete u.calendar);break;case "groupby":if(u.styles=
u.styles||u.style,u.styles&&!Array.isArray(u.styles)){B=u.styles;var I=Object.keys(B);u.styles=[];for(var J=0;J<I.length;J++)u.styles.push({target:I[J],value:B[I[J]]})}}b(z,"line")&&delete z.line;"marker"in z&&(b(z.marker,"line")&&delete z.marker.line,b(z,"marker")&&delete z.marker);d.clean(z);z.autobinx&&(delete z.autobinx,delete z.xbins);z.autobiny&&(delete z.autobiny,delete z.ybins);n(z);z.colorbar&&n(z.colorbar);z.marker&&z.marker.colorbar&&n(z.marker.colorbar);z.line&&z.line.colorbar&&n(z.line.colorbar);
z.aaxis&&n(z.aaxis);z.baxis&&n(z.baxis)}};C.swapXYData=function(y){c.swapAttrs(y,"? ?0 d? ?bins nbins? autobin? ?src error_?".split(" "));Array.isArray(y.z)&&Array.isArray(y.z[0])&&(y.transpose?delete y.transpose:y.transpose=!0);if(y.error_x&&y.error_y){var A=y.error_y;A="copy_ystyle"in A?A.copy_ystyle:!(A.color||A.thickness||A.width);c.swapAttrs(y,["error_?.copy_ystyle"]);A&&c.swapAttrs(y,["error_?.color","error_?.thickness","error_?.width"])}if("string"===typeof y.hoverinfo){var z=y.hoverinfo.split("+");
for(A=0;A<z.length;A++)"x"===z[A]?z[A]="y":"y"===z[A]&&(z[A]="x");y.hoverinfo=z.join("+")}};C.coerceTraceIndices=function(y,A){if(e(A))return[A];if(!Array.isArray(A)||!A.length)return y.data.map(function(D,u){return u});if(Array.isArray(A)){for(var z=[],F=0;F<A.length;F++)c.isIndex(A[F],y.data.length)?z.push(A[F]):c.warn("trace index (",A[F],") is not a number or is out of bounds");return z}return A};C.manageArrayContainers=function(y,A,z){var F=y.obj,D=y.parts,u=D.length,B=D[u-1],I=e(B);I&&null===
A?(y=D.slice(0,u-1).join("."),c.nestedProperty(F,y).get().splice(B,1)):(I&&void 0===y.get()&&void 0===y.get()&&(z[y.astr]=null),y.set(A))};var w=/(\.[^\[\]\.]+|\[[^\[\]\.]+\])$/;C.hasParent=function(y,A){for(A=k(A);A;){if(A in y)return!0;A=k(A)}return!1};var x=["x","y","z"];C.clearAxisTypes=function(y,A,z){for(var F=0;F<A.length;F++)for(var D=y._fullData[F],u=0;3>u;u++){var B=r(y,D,x[u]);if(B&&"log"!==B.type){var I=B._name;B=B._id.substr(1);if("scene"===B.substr(0,5)){if(void 0!==z[B])continue;I=
B+"."+I}B=I+".type";void 0===z[I]&&void 0===z[B]&&c.nestedProperty(y.layout,B).set(null)}}}},{"../components/color":615,"../lib":750,"../plots/cartesian/axis_ids":802,"../plots/plots":862,"../registry":882,"fast-isnumeric":241,"gl-mat4/fromQuat":275}],783:[function(a,G,C){G=a("./plot_api");C.plot=G.plot;C.newPlot=G.newPlot;C.restyle=G.restyle;C.relayout=G.relayout;C.redraw=G.redraw;C.update=G.update;C._guiRestyle=G._guiRestyle;C._guiRelayout=G._guiRelayout;C._guiUpdate=G._guiUpdate;C._storeDirectGUIEdit=
G._storeDirectGUIEdit;C.react=G.react;C.extendTraces=G.extendTraces;C.prependTraces=G.prependTraces;C.addTraces=G.addTraces;C.deleteTraces=G.deleteTraces;C.moveTraces=G.moveTraces;C.purge=G.purge;C.addFrames=G.addFrames;C.deleteFrames=G.deleteFrames;C.animate=G.animate;C.setPlotConfig=G.setPlotConfig;C.toImage=a("./to_image");C.validate=a("./validate");C.downloadImage=a("../snapshot/download");a=a("./template_api");C.makeTemplate=a.makeTemplate;C.validateTemplate=a.validateTemplate},{"../snapshot/download":884,
"./plot_api":785,"./template_api":790,"./to_image":791,"./validate":792}],784:[function(a,G,C){var q=a("../lib/is_plain_object"),n=a("../lib/noop"),m=a("../lib/loggers"),f=a("../lib/search").sorterAsc,b=a("../registry");C.containerArrayMatch=a("./container_array_match");var k=C.isAddVal=function(h){return"add"===h||q(h)},e=C.isRemoveVal=function(h){return null===h||"remove"===h};C.applyContainerArrayChanges=function(h,l,c,g,d){var p=l.astr,r=b.getComponentMethod(p,"supplyLayoutDefaults"),t=b.getComponentMethod(p,
"draw"),w=b.getComponentMethod(p,"drawOne");g=g.replot||g.recalc||r===n||t===n;var x=h.layout,y=h._fullLayout;if(c[""]){1<Object.keys(c).length&&m.warn("Full array edits are incompatible with other edits",p);w=c[""][""];if(e(w))l.set(null);else if(Array.isArray(w))l.set(w);else return m.warn("Unrecognized full array edit value",p,w),!0;if(g)return!1;r(x,y);t(h);return!0}var A=Object.keys(c).map(Number).sort(f),z=l.get(),F=z||[],D=d(y,p).get(),u=[],B=-1,I=F.length,J;for(J=0;J<A.length;J++){var N=A[J];
var M=c[N];var E=Object.keys(M);var L=M[""];var Q=k(L);if(0>N||N>F.length-(Q?0:1))m.warn("index out of range",p,N);else if(void 0!==L)1<E.length&&m.warn("Insertion \x26 removal are incompatible with edits to the same index.",p,N),e(L)?u.push(N):Q?("add"===L&&(L={}),F.splice(N,0,L),D&&D.splice(N,0,{})):m.warn("Unrecognized full object edit value",p,N,L),-1===B&&(B=N);else for(L=0;L<E.length;L++)Q=p+"["+N+"].",d(F[N],E[L],Q).set(M[E[L]])}for(J=u.length-1;0<=J;J--)F.splice(u[J],1),D&&D.splice(u[J],1);
F.length?z||l.set(F):l.set(null);if(g)return!1;r(x,y);if(w!==n){if(-1===B)l=A;else{I=Math.max(F.length,I);l=[];for(J=0;J<A.length;J++){N=A[J];if(N>=B)break;l.push(N)}for(J=B;J<I;J++)l.push(J)}for(J=0;J<l.length;J++)w(h,l[J])}else t(h);return!0}},{"../lib/is_plain_object":751,"../lib/loggers":754,"../lib/noop":759,"../lib/search":769,"../registry":882,"./container_array_match":780}],785:[function(a,G,C){function q(Wa){var Ja=Wa._fullLayout;Ja._redrawFromAutoMarginCount?Ja._redrawFromAutoMarginCount--:
Wa.emit("plotly_afterplot")}function n(Wa,Ja){try{Wa._fullLayout._paper.style("background",Ja)}catch(Sa){ca.error(Sa)}}function m(Wa,Ja){Ja=ja.combine(Ja,"white");n(Wa,Ja)}function f(Wa,Ja){if(!Wa._context){Wa._context=ca.extendDeep({},Ia);var Sa=aa.select("base");Wa._context._baseUrl=Sa.size()&&Sa.attr("href")?window.location.href.split("#")[0]:""}var fb=Wa._context;if(Ja){var nb=Object.keys(Ja);for(Sa=0;Sa<nb.length;Sa++){var Ha=nb[Sa];"editable"!==Ha&&"edits"!==Ha&&Ha in fb&&(fb[Ha]="setBackground"===
Ha&&"opaque"===Ja[Ha]?m:Ja[Ha])}Ja.plot3dPixelRatio&&!fb.plotGlPixelRatio&&(fb.plotGlPixelRatio=fb.plot3dPixelRatio);Ha=Ja.editable;if(void 0!==Ha)for(fb.editable=Ha,nb=Object.keys(fb.edits),Sa=0;Sa<nb.length;Sa++)fb.edits[nb[Sa]]=Ha;if(Ja.edits)for(nb=Object.keys(Ja.edits),Sa=0;Sa<nb.length;Sa++)Ha=nb[Sa],Ha in fb.edits&&(fb.edits[Ha]=Ja.edits[Ha]);fb._exportedPlot=Ja._exportedPlot}fb.staticPlot&&(fb.editable=!1,fb.edits={},fb.autosizable=!1,fb.scrollZoom=!1,fb.doubleClick=!1,fb.showTips=!1,fb.showLink=
!1,fb.displayModeBar=!1);"hover"!==fb.displayModeBar||ha||(fb.displayModeBar=!0);if("transparent"===fb.setBackground||"function"!==typeof fb.setBackground)fb.setBackground=n;fb._hasZeroHeight=fb._hasZeroHeight||0===Wa.clientHeight;fb._hasZeroWidth=fb._hasZeroWidth||0===Wa.clientWidth;Sa=fb.scrollZoom;Wa=fb._scrollZoom={};if(!0===Sa)Wa.cartesian=1,Wa.gl3d=1,Wa.geo=1,Wa.mapbox=1;else if("string"===typeof Sa)for(Ja=Sa.split("+"),Sa=0;Sa<Ja.length;Sa++)Wa[Ja[Sa]]=1;else!1!==Sa&&(Wa.gl3d=1,Wa.geo=1,Wa.mapbox=
1)}function b(Wa,Ja,Sa){var fb=aa.select(Wa).selectAll(".plot-container").data([0]);fb.enter().insert("div",":first-child").classed("plot-container plotly",!0);fb=fb.selectAll(".svg-container").data([0]);fb.enter().append("div").classed("svg-container",!0).style("position","relative");fb.html("");Ja&&(Wa.data=Ja);Sa&&(Wa.layout=Sa);oa.manager.fillLayout(Wa);fb.style({width:Wa._fullLayout.width+"px",height:Wa._fullLayout.height+"px"});Wa.framework=oa.manager.framework(Wa);Wa.framework({data:Wa.data,
layout:Wa.layout},fb.node());Wa.framework.setUndoPoint();fb=Wa.framework.svg();Ja=1;Sa=Wa._fullLayout.title?Wa._fullLayout.title.text:"";""!==Sa&&Sa||(Ja=0);var nb=function(){this.call(Ma.convertToTspans,Wa)};fb=fb.select(".title-group text").call(nb);if(Wa._context.edits.titleText){var Ha=ca._(Wa,"Click to enter Plot title");Sa&&Sa!==Ha||(Ja=.2,fb.attr({"data-unformatted":Ha}).text(Ha).style({opacity:Ja}).on("mouseover.opacity",function(){aa.select(this).transition().duration(100).style("opacity",
1)}).on("mouseout.opacity",function(){aa.select(this).transition().duration(1E3).style("opacity",0)}));var Ca=function(){this.call(Ma.makeEditable,{gd:Wa}).on("edit",function(Qa){Wa.framework({layout:{title:{text:Qa}}});this.text(Qa).call(nb);this.call(Ca)}).on("cancel",function(){var Qa=this.attr("data-unformatted");this.text(Qa).call(nb)})};fb.call(Ca)}Wa._context.setBackground(Wa,Wa._fullLayout.paper_bgcolor);pa.addLinks(Wa);return Promise.resolve()}function k(Wa,Ja){Ja+=1;var Sa=[],fb;for(fb=
0;fb<Wa.length;fb++){var nb=Wa[fb];0>nb?Sa.push(Ja+nb):Sa.push(nb)}return Sa}function e(Wa,Ja,Sa){var fb;for(fb=0;fb<Ja.length;fb++){var nb=Ja[fb];if(nb!==parseInt(nb,10))throw Error("all values in "+Sa+" must be integers");if(nb>=Wa.data.length||nb<-Wa.data.length)throw Error(Sa+" must be valid indices for gd.data.");if(-1<Ja.indexOf(nb,fb+1)||0<=nb&&-1<Ja.indexOf(-Wa.data.length+nb)||0>nb&&-1<Ja.indexOf(Wa.data.length+nb))throw Error("each index in "+Sa+" must be unique.");}}function h(Wa,Ja,Sa){if(!Array.isArray(Wa.data))throw Error("gd.data must be an array.");
if("undefined"===typeof Ja)throw Error("currentIndices is a required argument.");Array.isArray(Ja)||(Ja=[Ja]);e(Wa,Ja,"currentIndices");"undefined"===typeof Sa||Array.isArray(Sa)||(Sa=[Sa]);"undefined"!==typeof Sa&&e(Wa,Sa,"newIndices");if("undefined"!==typeof Sa&&Ja.length!==Sa.length)throw Error("current and new indices must be of equal length.");}function l(Wa,Ja,Sa){if(!Array.isArray(Wa.data))throw Error("gd.data must be an array.");if("undefined"===typeof Ja)throw Error("traces must be defined.");
Array.isArray(Ja)||(Ja=[Ja]);for(Wa=0;Wa<Ja.length;Wa++){var fb=Ja[Wa];if("object"!==typeof fb||Array.isArray(fb)||null===fb)throw Error("all values in traces array must be non-array objects");}"undefined"===typeof Sa||Array.isArray(Sa)||(Sa=[Sa]);if("undefined"!==typeof Sa&&Sa.length!==Ja.length)throw Error("if indices is specified, traces.length must equal indices.length");}function c(Wa,Ja,Sa,fb,nb){var Ha=ca.isPlainObject(fb);if(!Array.isArray(Wa.data))throw Error("gd.data must be an array");
if(!ca.isPlainObject(Ja))throw Error("update must be a key:value object");if("undefined"===typeof Sa)throw Error("indices must be an integer or array of integers");e(Wa,Sa,"indices");for(var Ca in Ja){if(!Array.isArray(Ja[Ca])||Ja[Ca].length!==Sa.length)throw Error("attribute "+Ca+" must be an array of length equal to indices array length");if(Ha&&!(Ca in fb&&Array.isArray(fb[Ca])&&fb[Ca].length===Ja[Ca].length))throw Error("when maxPoints is set as a key:value object it must contain a 1:1 corrispondence with the keys and number of traces in the update object");
}Ha=Sa;Ca=ca.isPlainObject(fb);Sa=[];Array.isArray(Ha)||(Ha=[Ha]);Ha=k(Ha,Wa.data.length-1);for(var Qa in Ja)for(var gb=0;gb<Ha.length;gb++){var Va=Wa.data[Ha[gb]];var db=sa(Va,Qa);Va=db.get();var qb=Ja[Qa][gb];if(!ca.isArrayOrTypedArray(qb))throw Error("attribute: "+Qa+" index: "+gb+" must be an array");if(!ca.isArrayOrTypedArray(Va))throw Error("cannot extend missing or non-array attribute: "+Qa);if(Va.constructor!==qb.constructor)throw Error("cannot extend array with an array of a different type: "+
Qa);var Kb=Ca?fb[Qa][gb]:fb;ka(Kb)||(Kb=-1);Sa.push({prop:db,target:Va,insert:qb,maxp:Math.floor(Kb)})}Wa={};Ja={};for(fb=0;fb<Sa.length;fb++)Qa=Sa[fb].prop,Ha=nb(Sa[fb].target,Sa[fb].insert,Sa[fb].maxp),Qa.set(Ha[0]),Array.isArray(Wa[Qa.astr])||(Wa[Qa.astr]=[]),Wa[Qa.astr].push(Ha[1]),Array.isArray(Ja[Qa.astr])||(Ja[Qa.astr]=[]),Ja[Qa.astr].push(Sa[fb].target.length);return{update:Wa,maxPoints:Ja}}function g(Wa,Ja){var Sa=new Wa.constructor(Wa.length+Ja.length);Sa.set(Wa);Sa.set(Ja,Wa.length);return Sa}
function d(Wa,Ja,Sa,fb){Wa=ca.getGraphDiv(Wa);var nb=c(Wa,Ja,Sa,fb,function(Ca,Qa,gb){if(ca.isTypedArray(Ca))if(0>gb){var Va=new Ca.constructor(0);Ca=g(Ca,Qa);if(0>gb)var db=Ca;else db=Va,Va=Ca}else if(db=new Ca.constructor(gb),Va=new Ca.constructor(Ca.length+Qa.length-gb),gb===Qa.length)db.set(Qa),Va.set(Ca);else if(gb<Qa.length)gb=Qa.length-gb,db.set(Qa.subarray(gb)),Va.set(Ca),Va.set(Qa.subarray(0,gb),Ca.length);else{gb-=Qa.length;var qb=Ca.length-gb;db.set(Ca.subarray(qb));db.set(Qa,gb);Va.set(Ca.subarray(0,
qb))}else db=Ca.concat(Qa),Va=0<=gb&&gb<db.length?db.splice(0,db.length-gb):[];return[db,Va]}),Ha=C.redraw(Wa);ra.add(Wa,C.prependTraces,[Wa,nb.update,Sa,nb.maxPoints],d,arguments);return Ha}function p(Wa,Ja,Sa,fb){Wa=ca.getGraphDiv(Wa);var nb=c(Wa,Ja,Sa,fb,function(Ca,Qa,gb){if(ca.isTypedArray(Ca))if(0>=gb){var Va=new Ca.constructor(0);Ca=g(Qa,Ca);if(0>gb)var db=Ca;else db=Va,Va=Ca}else db=new Ca.constructor(gb),Va=new Ca.constructor(Ca.length+Qa.length-gb),gb===Qa.length?(db.set(Qa),Va.set(Ca)):
gb<Qa.length?(gb=Qa.length-gb,db.set(Qa.subarray(0,gb)),Va.set(Qa.subarray(gb)),Va.set(Ca,gb)):(gb-=Qa.length,db.set(Qa),db.set(Ca.subarray(0,gb),Qa.length),Va.set(Ca.subarray(gb)));else db=Qa.concat(Ca),Va=0<=gb&&gb<db.length?db.splice(gb,db.length):[];return[db,Va]}),Ha=C.redraw(Wa);ra.add(Wa,C.extendTraces,[Wa,nb.update,Sa,nb.maxPoints],p,arguments);return Ha}function r(Wa,Ja,Sa){Wa=ca.getGraphDiv(Wa);var fb=[],nb=C.deleteTraces,Ha=[Wa,fb],Ca=[Wa,Ja],Qa;l(Wa,Ja,Sa);Array.isArray(Ja)||(Ja=[Ja]);
Ja=Ja.map(function(gb){return ca.extendFlat({},gb)});Fa.cleanData(Ja);for(Qa=0;Qa<Ja.length;Qa++)Wa.data.push(Ja[Qa]);for(Qa=0;Qa<Ja.length;Qa++)fb.push(-Ja.length+Qa);if("undefined"===typeof Sa)return Ja=C.redraw(Wa),ra.add(Wa,nb,Ha,r,Ca),Ja;Array.isArray(Sa)||(Sa=[Sa]);try{h(Wa,fb,Sa)}catch(gb){throw Wa.data.splice(Wa.data.length-Ja.length,Ja.length),gb;}ra.startSequence(Wa);ra.add(Wa,nb,Ha,r,Ca);Ja=C.moveTraces(Wa,fb,Sa);ra.stopSequence(Wa);return Ja}function t(Wa,Ja){Wa=ca.getGraphDiv(Wa);var Sa=
[],fb=C.addTraces,nb=[Wa,Sa,Ja],Ha=[Wa,Ja],Ca;if("undefined"===typeof Ja)throw Error("indices must be an integer or array of integers.");Array.isArray(Ja)||(Ja=[Ja]);e(Wa,Ja,"indices");Ja=k(Ja,Wa.data.length-1);Ja.sort(ca.sorterDes);for(Ca=0;Ca<Ja.length;Ca+=1){var Qa=Wa.data.splice(Ja[Ca],1)[0];Sa.push(Qa)}Ja=C.redraw(Wa);ra.add(Wa,fb,nb,t,Ha);return Ja}function w(Wa,Ja,Sa){Wa=ca.getGraphDiv(Wa);var fb=[],nb=[],Ha=[Wa,Sa,Ja],Ca=[Wa,Ja,Sa],Qa;h(Wa,Ja,Sa);Ja=Array.isArray(Ja)?Ja:[Ja];if("undefined"===
typeof Sa)for(Sa=[],Qa=0;Qa<Ja.length;Qa++)Sa.push(-Ja.length+Qa);Sa=Array.isArray(Sa)?Sa:[Sa];Ja=k(Ja,Wa.data.length-1);Sa=k(Sa,Wa.data.length-1);for(Qa=0;Qa<Wa.data.length;Qa++)-1===Ja.indexOf(Qa)&&fb.push(Wa.data[Qa]);for(Qa=0;Qa<Ja.length;Qa++)nb.push({newIndex:Sa[Qa],trace:Wa.data[Ja[Qa]]});nb.sort(function(gb,Va){return gb.newIndex-Va.newIndex});for(Qa=0;Qa<nb.length;Qa+=1)fb.splice(nb[Qa].newIndex,0,nb[Qa].trace);Wa.data=fb;Ja=C.redraw(Wa);ra.add(Wa,w,Ha,w,Ca);return Ja}function x(Wa,Ja,Sa,
fb){Wa=ca.getGraphDiv(Wa);Fa.clearPromiseQueue(Wa);var nb={};if("string"===typeof Ja)nb[Ja]=Sa;else if(ca.isPlainObject(Ja))nb=ca.extendFlat({},Ja),void 0===fb&&(fb=Sa);else return ca.warn("Restyle fail.",Ja,Sa,fb),Promise.reject();Object.keys(nb).length&&(Wa.changed=!0);Ja=Fa.coerceTraceIndices(Wa,fb);var Ha=F(Wa,nb,Ja);nb=Ha.flags;nb.calc&&(Wa.calcdata=void 0);nb.clearAxisTypes&&Fa.clearAxisTypes(Wa,Ja,{});Ja=[];nb.fullReplot?Ja.push(C.plot):(Ja.push(pa.previousPromises),pa.supplyDefaults(Wa),nb.markerSize&&
(pa.doCalcdata(Wa),I(Ja)),nb.style&&Ja.push(Na.doTraceStyle),nb.colorbars&&Ja.push(Na.doColorBars),Ja.push(q));Ja.push(pa.rehover,pa.redrag);ra.add(Wa,x,[Wa,Ha.undoit,Ha.traces],x,[Wa,Ha.redoit,Ha.traces]);(nb=ca.syncOrAsync(Ja,Wa))&&nb.then||(nb=Promise.resolve());return nb.then(function(){Wa.emit("plotly_restyle",Ha.eventData);return Wa})}function y(Wa){return void 0===Wa?null:Wa}function A(Wa,Ja){return Ja?function(Sa,fb,nb){var Ha=sa(Sa,fb),Ca=Ha.set;Ha.set=function(Qa){z((nb||"")+fb,Ha.get(),
Qa,Wa);Ca(Qa)};return Ha}:sa}function z(Wa,Ja,Sa,fb){if(Array.isArray(Ja)||Array.isArray(Sa)){var nb=Array.isArray(Ja)?Ja:[];Sa=Array.isArray(Sa)?Sa:[];Ja=Math.max(nb.length,Sa.length);for(var Ha=0;Ha<Ja;Ha++)z(Wa+"["+Ha+"]",nb[Ha],Sa[Ha],fb)}else if(ca.isPlainObject(Ja)||ca.isPlainObject(Sa))for(nb in Ja=ca.isPlainObject(Ja)?Ja:{},Sa=ca.isPlainObject(Sa)?Sa:{},Ha=ca.extendFlat({},Ja,Sa),Ha)z(Wa+"."+nb,Ja[nb],Sa[nb],fb);else void 0===fb[Wa]&&(fb[Wa]=y(Ja))}function F(Wa,Ja,Sa){function fb(){return Sa.map(function(){})}
function nb(Jb){Jb=ua.id2name(Jb);-1===xb.indexOf(Jb)&&xb.push(Jb)}function Ha(Jb){return"LAYOUT"+Jb+".autorange"}function Ca(Jb){return"LAYOUT"+Jb+".range"}function Qa(Jb){for(var tb=Jb;tb<Kb.length;tb++)if(Kb[tb]._input===Ob[Jb])return Kb[tb]}function gb(Jb,tb,Lb){if(Array.isArray(Jb))Jb.forEach(function($b){gb($b,tb,Lb)});else if(!(Jb in Ja||Fa.hasParent(Ja,Jb))){if("LAYOUT"===Jb.substr(0,6))var Ib=kc(Wa.layout,Jb.replace("LAYOUT",""));else{Ib=Sa[Lb];var lc=qb._tracePreGUI[Qa(Ib)._fullInput.uid];
Ib=A(lc,cc)(Ob[Ib],Jb)}Jb in gd||(gd[Jb]=fb());void 0===gd[Jb][Lb]&&(gd[Jb][Lb]=y(Ib.get()));void 0!==tb&&Ib.set(tb)}}function Va(Jb){return function(tb){return Kb[tb][Jb]}}function db(Jb){return function(tb,Lb){return!1===tb?Kb[Sa[Lb]][Jb]:null}}var qb=Wa._fullLayout,Kb=Wa._fullData,Ob=Wa.data,cc=qb._guiEditing,kc=A(qb._preGUI,cc),qc=ca.extendDeepAll({},Ja),Pc;D(Ja);var Qc=$a.traceFlags(),cd={},gd={};for(ic in Ja){if(Fa.hasParent(Ja,ic))throw Error("cannot set "+ic+" and a parent attribute simultaneously");
var kd=Ja[ic],Cb;if("autobinx"===ic||"autobiny"===ic){var ic=ic.charAt(ic.length-1)+"bins";kd=Array.isArray(kd)?kd.map(db(ic)):!1===kd?Sa.map(Va(ic)):null}cd[ic]=kd;if("LAYOUT"===ic.substr(0,6)){var sc=kc(Wa.layout,ic.replace("LAYOUT",""));gd[ic]=[y(sc.get())];sc.set(Array.isArray(kd)?kd[0]:kd);Qc.calc=!0}else{gd[ic]=fb();for(Pc=0;Pc<Sa.length;Pc++){var wb=Ob[Sa[Pc]];var zb=Qa(Sa[Pc]);sc=A(qb._tracePreGUI[zb._fullInput.uid],cc)(wb,ic);var Tb=sc.get();var lb=Array.isArray(kd)?kd[Pc%kd.length]:kd;if(void 0!==
lb){var vb=sc.parts[sc.parts.length-1],Ub=(Cb=ic.substr(0,ic.length-vb.length-1))?Cb+".":"",Sb=Cb?sa(zb,Cb).get():zb;if((Cb=Y.getTraceValObject(zb,sc.parts))&&Cb.impliedEdits&&null!==lb)for(var Ab in Cb.impliedEdits)gb(ca.relativeAttr(ic,Ab),Cb.impliedEdits[Ab],Pc);else if("thicknessmode"!==vb&&"lenmode"!==vb||Tb===lb||"fraction"!==lb&&"pixels"!==lb||!Sb)"type"!==ic||"pie"===lb===("pie"===Tb)&&"funnelarea"===lb===("funnelarea"===Tb)||(Ub="x",Sb="y","bar"!==lb&&"bar"!==Tb||"h"!==wb.orientation||(Ub=
"y",Sb="x"),ca.swapAttrs(wb,["?","?src"],"labels",Ub),ca.swapAttrs(wb,["d?","?0"],"label",Ub),ca.swapAttrs(wb,["?","?src"],"values",Sb),"pie"===Tb||"funnelarea"===Tb?(sa(wb,"marker.color").set(sa(wb,"marker.colors").get()),qb._pielayer.selectAll("g.trace").remove()):qa.traceIs(wb,"cartesian")&&sa(wb,"marker.colors").set(sa(wb,"marker.color").get()));else{var Eb=qb._size,Fb=Sb.orient;Fb="top"===Fb||"bottom"===Fb;"thicknessmode"===vb?(vb=Fb?Eb.h:Eb.w,gb(Ub+"thickness",Sb.thickness*("fraction"===lb?
1/vb:vb),Pc)):(vb=Fb?Eb.w:Eb.h,gb(Ub+"len",Sb.len*("fraction"===lb?1/vb:vb),Pc))}gd[ic][Pc]=y(Tb);if(-1!==["swapxy","swapxyaxes","orientation","orientationaxes"].indexOf(ic)){if("orientation"===ic){if(sc.set(lb),Tb=wb.x&&!wb.y?"h":"v",(sc.get()||Tb)===zb.orientation)continue}else"orientationaxes"===ic&&(wb.orientation={v:"h",h:"v"}[zb.orientation]);Fa.swapXYData(wb);Qc.calc=Qc.clearAxisTypes=!0}else-1!==pa.dataArrayContainers.indexOf(sc.parts[0])?(Fa.manageArrayContainers(sc,lb,gd),Qc.calc=!0):(Cb?
Cb.arrayOk&&!qa.traceIs(zb,"regl")&&(ca.isArrayOrTypedArray(lb)||ca.isArrayOrTypedArray(Tb))?Qc.calc=!0:$a.update(Qc,Cb):Qc.calc=!0,sc.set(lb))}}-1!==["swapxyaxes","orientationaxes"].indexOf(ic)&&ua.swap(Wa,Sa);"orientationaxes"===ic&&(Pc=sa(Wa.layout,"hovermode"),kd=Pc.get(),"x"===kd?Pc.set("y"):"y"===kd?Pc.set("x"):"x unified"===kd?Pc.set("y unified"):"y unified"===kd&&Pc.set("x unified"));if(-1!==["orientation","type"].indexOf(ic)){var xb=[];for(Pc=0;Pc<Sa.length;Pc++)kd=Ob[Sa[Pc]],qa.traceIs(kd,
"cartesian")&&(nb(kd.xaxis||"x"),nb(kd.yaxis||"y"));gb(xb.map(Ha),!0,0);gb(xb.map(Ca),[0,1],0)}}}if(Qc.calc||Qc.plot)Qc.fullReplot=!0;return{flags:Qc,undoit:gd,redoit:cd,traces:Sa,eventData:ca.extendDeepNoArrays([],[qc,Sa])}}function D(Wa){function Ja(gb,Va){Wa[Va]=Wa[gb];delete Wa[gb]}var Sa=ca.counterRegex("axis",".title",!1,!1),fb=/colorbar\.title$/,nb=Object.keys(Wa),Ha;for(Ha=0;Ha<nb.length;Ha++){var Ca=nb[Ha];var Qa=Wa[Ca];"title"!==Ca&&!Sa.test(Ca)&&!fb.test(Ca)||"string"!==typeof Qa&&"number"!==
typeof Qa?-1<Ca.indexOf("titlefont")?Ja(Ca,Ca.replace("titlefont","title.font")):-1<Ca.indexOf("titleposition")?Ja(Ca,Ca.replace("titleposition","title.position")):-1<Ca.indexOf("titleside")?Ja(Ca,Ca.replace("titleside","title.side")):-1<Ca.indexOf("titleoffset")&&Ja(Ca,Ca.replace("titleoffset","title.offset")):Ja(Ca,Ca.replace("title","title.text"))}}function u(Wa,Ja,Sa){Wa=ca.getGraphDiv(Wa);Fa.clearPromiseQueue(Wa);if(Wa.framework&&Wa.framework.isPolar)return Promise.resolve(Wa);var fb={};if("string"===
typeof Ja)fb[Ja]=Sa;else if(ca.isPlainObject(Ja))fb=ca.extendFlat({},Ja);else return ca.warn("Relayout fail.",Ja,Sa),Promise.reject();Object.keys(fb).length&&(Wa.changed=!0);var nb=J(Wa,fb);Ja=nb.flags;Ja.calc&&(Wa.calcdata=void 0);Sa=[pa.previousPromises];Ja.layoutReplot?Sa.push(Na.layoutReplot):Object.keys(fb).length&&(B(Wa,Ja,nb)||pa.supplyDefaults(Wa),Ja.legend&&Sa.push(Na.doLegend),Ja.layoutstyle&&Sa.push(Na.layoutStyles),Ja.axrange&&I(Sa,nb.rangesAltered),Ja.ticks&&Sa.push(Na.doTicksRelayout),
Ja.modebar&&Sa.push(Na.doModeBar),Ja.camera&&Sa.push(Na.doCamera),Ja.colorbars&&Sa.push(Na.doColorBars),Sa.push(q));Sa.push(pa.rehover,pa.redrag);ra.add(Wa,u,[Wa,nb.undoit],u,[Wa,nb.redoit]);(fb=ca.syncOrAsync(Sa,Wa))&&fb.then||(fb=Promise.resolve(Wa));return fb.then(function(){Wa.emit("plotly_relayout",nb.eventData);return Wa})}function B(Wa,Ja,Sa){var fb=Wa._fullLayout;if(!Ja.axrange)return!1;for(var nb in Ja)if("axrange"!==nb&&Ja[nb])return!1;for(var Ha in Sa.rangesAltered)if(Sa=ua.id2name(Ha),
Ja=Wa.layout[Sa],Sa=fb[Sa],Sa.autorange=Ja.autorange,Sa.range=Ja.range.slice(),Sa.cleanRange(),Sa._matchGroup)for(var Ca in Sa._matchGroup)Ca!==Ha&&(Ja=fb[ua.id2name(Ca)],Ja.autorange=Sa.autorange,Ja.range=Sa.range.slice(),Ja._input.range=Sa.range.slice());return!0}function I(Wa,Ja){Wa.push(Oa,Na.doAutoRangeAndConstraints,Ja?function(Sa){var fb=[],nb=!0,Ha;for(Ha in Ja){var Ca=ua.getFromId(Sa,Ha);fb.push(Ha);if(Ca._matchGroup)for(var Qa in Ca._matchGroup)Ja[Qa]||fb.push(Qa);Ca.automargin&&(nb=!1)}return ua.draw(Sa,
fb,{skipTitle:nb})}:function(Sa){return ua.draw(Sa,"redraw")},Na.drawData,Na.finalDraw)}function J(Wa,Ja){function Sa(vb,Ub){if(Array.isArray(vb))vb.forEach(function(Ab){Sa(Ab,Ub)});else if(!(vb in Ja||Fa.hasParent(Ja,vb))){var Sb=Ca(nb,vb);vb in cc||(cc[vb]=y(Sb.get()));void 0!==Ub&&Sb.set(Ub)}}function fb(vb){vb=ua.name2id(vb.split(".")[0]);kc[vb]=1;return vb}var nb=Wa.layout,Ha=Wa._fullLayout,Ca=A(Ha._preGUI,Ha._guiEditing),Qa=Object.keys(Ja),gb=ua.list(Wa),Va=ca.extendDeepAll({},Ja),db={},qb,
Kb;D(Ja);Qa=Object.keys(Ja);for(qb=0;qb<Qa.length;qb++)if(0===Qa[qb].indexOf("allaxes")){for(Kb=0;Kb<gb.length;Kb++){var Ob=gb[Kb]._id.substr(1);Ob=-1!==Ob.indexOf("scene")?Ob+".":"";Ob=Qa[qb].replace("allaxes",Ob+gb[Kb]._name);Ja[Ob]||(Ja[Ob]=Ja[Qa[qb]])}delete Ja[Qa[qb]]}Qa=$a.layoutFlags();gb={};var cc={},kc={},qc,Pc;for(Pc in Ja){if(Fa.hasParent(Ja,Pc))throw Error("cannot set "+Pc+" and a parent attribute simultaneously");qb=Ca(nb,Pc);Kb=Ja[Pc];for(Ob=qb.parts.length-1;0<Ob&&"string"!==typeof qb.parts[Ob];)Ob--;
var Qc=qb.parts[Ob],cd=qb.parts[Ob-1]+"."+Qc,gd=qb.parts.slice(0,Ob).join("."),kd=sa(Wa.layout,gd).get(),Cb=sa(Ha,gd).get(),ic=qb.get();if(void 0!==Kb){gb[Pc]=Kb;cc[Pc]="reverse"===Qc?Kb:y(ic);if((Ob=Y.getLayoutValObject(Ha,qb.parts))&&Ob.impliedEdits&&null!==Kb)for(var sc in Ob.impliedEdits)Sa(ca.relativeAttr(Pc,sc),Ob.impliedEdits[sc]);-1!==["width","height"].indexOf(Pc)?Kb?(Sa("autosize",null),cd="height"===Pc?"width":"height",Sa(cd,Ha[cd])):Ha[Pc]=Wa._initialAutoSize[Pc]:"autosize"===Pc?(Sa("width",
Kb?null:Ha.width),Sa("height",Kb?null:Ha.height)):cd.match(Ka)?(fb(cd),sa(Ha,gd+"._inputRange").set(null)):cd.match(Ua)?(fb(cd),sa(Ha,gd+"._inputRange").set(null),cd=sa(Ha,gd).get(),cd._inputDomain&&(cd._input.domain=cd._inputDomain.slice())):cd.match(Ea)&&sa(Ha,gd+"._inputDomain").set(null);if("type"===Qc){var wb=kd;cd="linear"===Cb.type&&"log"===Kb;var zb="log"===Cb.type&&"linear"===Kb;cd||zb?(wb&&wb.range?Cb.autorange?cd&&(wb.range=wb.range[1]>wb.range[0]?[1,2]:[2,1]):(zb=wb.range[0],wb=wb.range[1],
cd?(0>=zb&&0>=wb&&Sa(gd+".autorange",!0),0>=zb?zb=wb/1E6:0>=wb&&(wb=zb/1E6),Sa(gd+".range[0]",Math.log(zb)/Math.LN10),Sa(gd+".range[1]",Math.log(wb)/Math.LN10)):(Sa(gd+".range[0]",Math.pow(10,zb)),Sa(gd+".range[1]",Math.pow(10,wb)))):Sa(gd+".autorange",!0),Array.isArray(Ha._subplots.polar)&&Ha._subplots.polar.length&&Ha[qb.parts[0]]&&"radialaxis"===qb.parts[1]&&delete Ha[qb.parts[0]]._subplot.viewInitial["radialaxis.range"],qa.getComponentMethod("annotations","convertCoords")(Wa,Cb,Kb,Sa),qa.getComponentMethod("images",
"convertCoords")(Wa,Cb,Kb,Sa)):(Sa(gd+".autorange",!0),Sa(gd+".range",null));sa(Ha,gd+"._inputRange").set(null)}else Qc.match(cb)&&(cd=sa(Ha,Pc).get(),(wb=(Kb||{}).type)&&"-"!==wb||(wb="linear"),qa.getComponentMethod("annotations","convertCoords")(Wa,cd,wb,Sa),qa.getComponentMethod("images","convertCoords")(Wa,cd,wb,Sa));if(cd=Pa.containerArrayMatch(Pc)){var Tb=cd.array;qb=cd.index;Qc=cd.property;Ob=Ob||{editType:"calc"};""!==qb&&""===Qc&&(Pa.isAddVal(Kb)?cc[Pc]=null:Pa.isRemoveVal(Kb)?cc[Pc]=(sa(nb,
Tb).get()||[])[qb]:ca.warn("unrecognized full object value",Ja));$a.update(Qa,Ob);db[Tb]||(db[Tb]={});(Ob=db[Tb][qb])||(Ob=db[Tb][qb]={});Ob[Qc]=Kb;delete Ja[Pc]}else"reverse"===Qc?(kd.range?kd.range.reverse():(Sa(gd+".autorange",!0),kd.range=[1,0]),Cb.autorange?Qa.calc=!0:Qa.plot=!0):(Ha._has("scatter-like")&&Ha._has("regl")&&"dragmode"===Pc&&("lasso"===Kb||"select"===Kb)&&"lasso"!==ic&&"select"!==ic?Qa.plot=!0:Ha._has("gl2d")?Qa.plot=!0:Ob?$a.update(Qa,Ob):Qa.calc=!0,qb.set(Kb))}}for(Tb in db)Pa.applyContainerArrayChanges(Wa,
Ca(nb,Tb),db[Tb],Qa,Ca)||(Qa.plot=!0);Ha=Ha._axisConstraintGroups||[];for(qc in kc)for(qb=0;qb<Ha.length;qb++)if(db=Ha[qb],db[qc]){Qa.calc=!0;for(var lb in db)kc[lb]||(ua.getFromId(Wa,lb)._constraintShrinkable=!0)}if(N(Wa)||Ja.height||Ja.width)Qa.plot=!0;if(Qa.plot||Qa.calc)Qa.layoutReplot=!0;return{flags:Qa,rangesAltered:kc,undoit:cc,redoit:gb,eventData:Va}}function N(Wa){var Ja=Wa._fullLayout,Sa=Ja.width,fb=Ja.height;Wa.layout.autosize&&pa.plotAutoSize(Wa,Wa.layout,Ja);return Ja.width!==Sa||Ja.height!==
fb}function M(Wa,Ja,Sa,fb){Wa=ca.getGraphDiv(Wa);Fa.clearPromiseQueue(Wa);if(Wa.framework&&Wa.framework.isPolar)return Promise.resolve(Wa);ca.isPlainObject(Ja)||(Ja={});ca.isPlainObject(Sa)||(Sa={});Object.keys(Ja).length&&(Wa.changed=!0);Object.keys(Sa).length&&(Wa.changed=!0);fb=Fa.coerceTraceIndices(Wa,fb);var nb=F(Wa,ca.extendFlat({},Ja),fb);Ja=nb.flags;var Ha=J(Wa,ca.extendFlat({},Sa)),Ca=Ha.flags;if(Ja.calc||Ca.calc)Wa.calcdata=void 0;Ja.clearAxisTypes&&Fa.clearAxisTypes(Wa,fb,Sa);Sa=[];Ca.layoutReplot?
Sa.push(Na.layoutReplot):Ja.fullReplot?Sa.push(C.plot):(Sa.push(pa.previousPromises),B(Wa,Ca,Ha)||pa.supplyDefaults(Wa),Ja.style&&Sa.push(Na.doTraceStyle),(Ja.colorbars||Ca.colorbars)&&Sa.push(Na.doColorBars),Ca.legend&&Sa.push(Na.doLegend),Ca.layoutstyle&&Sa.push(Na.layoutStyles),Ca.axrange&&I(Sa,Ha.rangesAltered),Ca.ticks&&Sa.push(Na.doTicksRelayout),Ca.modebar&&Sa.push(Na.doModeBar),Ca.camera&&Sa.push(Na.doCamera),Sa.push(q));Sa.push(pa.rehover,pa.redrag);ra.add(Wa,M,[Wa,nb.undoit,Ha.undoit,nb.traces],
M,[Wa,nb.redoit,Ha.redoit,nb.traces]);(Sa=ca.syncOrAsync(Sa,Wa))&&Sa.then||(Sa=Promise.resolve(Wa));return Sa.then(function(){Wa.emit("plotly_update",{data:nb.eventData,layout:Ha.eventData});return Wa})}function E(Wa){return function(Ja){Ja._fullLayout._guiEditing=!0;var Sa=Wa.apply(null,arguments);Ja._fullLayout._guiEditing=!1;return Sa}}function L(Wa,Ja){for(var Sa=0;Sa<Ja.length;Sa++){var fb=Ja[Sa],nb=Wa.match(fb.pattern);if(nb)return{head:nb[1],attr:fb.attr}}}function Q(Wa,Ja){var Sa=sa(Ja,Wa).get();
if(void 0!==Sa)return Sa;Wa=Wa.split(".");for(Wa.pop();1<Wa.length;)if(Wa.pop(),Sa=sa(Ja,Wa.join(".")+".uirevision").get(),void 0!==Sa)return Sa;return Ja.uirevision}function S(Wa,Ja){var Sa=ca.isPlainObject(Wa),fb=Array.isArray(Wa);return Sa||fb?(Sa&&ca.isPlainObject(Ja)||fb&&Array.isArray(Ja))&&JSON.stringify(Wa)===JSON.stringify(Ja):Wa===Ja}function R(Wa,Ja,Sa,fb){var nb=fb._preGUI,Ha,Ca,Qa,gb=[],Va={};for(Ha in nb){if(Ca=L(Ha,Ya)){if(Ca=Ca.attr||Ca.head+".uirevision",(Ca=(Qa=sa(fb,Ca).get())&&
Q(Ca,Ja))&&Ca===Qa){Qa=nb[Ha];null===Qa&&(Qa=void 0);Ca=sa(Ja,Ha);var db=Ca.get();if(S(db,Qa)){void 0===db&&"autorange"===Ha.substr(Ha.length-9)&&gb.push(Ha.substr(0,Ha.length-10));Ca.set(y(sa(fb,Ha).get()));continue}}}else ca.warn("unrecognized GUI edit: "+Ha);delete nb[Ha];"range["===Ha.substr(Ha.length-8,6)&&(Va[Ha.substr(0,Ha.length-9)]=1)}for(nb=0;nb<gb.length;nb++)Qa=gb[nb],Va[Qa]&&(Qa=sa(Ja,Qa).get())&&delete Qa.autorange;gb=fb._tracePreGUI;for(var qb in gb)for(Ha in Va=gb[qb],nb=null,Va){if(!nb){a:{for(nb=
0;nb<Sa.length;nb++)if(Sa[nb]._fullInput.uid===qb)break a;nb=-1}if(0>nb){delete gb[qb];break}var Kb=Sa[nb]._fullInput;a:{nb=Kb.index;for(Qa=0;Qa<Wa.length;Qa++)if(Wa[Qa].uid===qb){nb=Qa;break a}nb=!Wa[nb]||Wa[nb].uid?-1:nb}if(0>nb){delete gb[qb];break}nb=Wa[nb]}if(Ca=L(Ha,ab)){if(Ca.attr?Ca=(Qa=sa(fb,Ca.attr).get())&&Q(Ca.attr,Ja):(Qa=Kb.uirevision,Ca=nb.uirevision,void 0===Ca&&(Ca=Ja.uirevision)),Ca&&Ca===Qa&&(Qa=Va[Ha],null===Qa&&(Qa=void 0),Ca=sa(nb,Ha),db=Ca.get(),S(db,Qa))){Ca.set(y(sa(Kb,Ha).get()));
continue}}else ca.warn("unrecognized GUI edit: "+Ha+" in trace uid "+qb);delete Va[Ha]}}function O(Wa,Ja,Sa,fb,nb,Ha){var Ca=Ja.length===Sa.length;if(!nb&&!Ca)return{fullReplot:!0,calc:!0};var Qa=$a.traceFlags();Qa.arrays={};Qa.nChanges=0;Qa.nChangesAnim=0;fb={getValObject:function(Va){Va=Y.getTraceValObject(gb,Va);!gb._module.animatable&&Va.anim&&(Va.anim=!1);return Va},flags:Qa,immutable:fb,transition:nb,newDataRevision:Ha,gd:Wa};Ha={};for(Wa=0;Wa<Ja.length;Wa++)if(Sa[Wa]){var gb=Sa[Wa]._fullInput;
pa.hasMakesDataTransform(gb)&&(gb=Sa[Wa]);Ha[gb.uid]||(Ha[gb.uid]=1,V(Ja[Wa]._fullInput,gb,[],fb))}if(Qa.calc||Qa.plot)Qa.fullReplot=!0;nb&&Qa.nChanges&&Qa.nChangesAnim&&(Qa.anim=Qa.nChanges===Qa.nChangesAnim&&Ca?"all":"some");return Qa}function T(Wa,Ja,Sa,fb,nb){var Ha=$a.layoutFlags();Ha.arrays={};Ha.rangesAltered={};Ha.nChanges=0;Ha.nChangesAnim=0;V(Ja,Sa,[],{getValObject:function(Ca){return Y.getLayoutValObject(Sa,Ca)},flags:Ha,immutable:fb,transition:nb,gd:Wa});if(Ha.plot||Ha.calc)Ha.layoutReplot=
!0;nb&&Ha.nChanges&&Ha.nChangesAnim&&(Ha.anim=Ha.nChanges===Ha.nChangesAnim?"all":"some");return Ha}function V(Wa,Ja,Sa,fb){function nb(){var Cb=Ha.editType;if(db&&-1!==Cb.indexOf("arraydraw"))ca.pushUnique(gb.arrays[db],qb);else{$a.update(gb,Ha);"none"!==Cb&&gb.nChanges++;fb.transition&&Ha.anim&&gb.nChangesAnim++;if(Ka.test(kc)||Ua.test(kc))gb.rangesAltered[Sa[0]]=1;Ea.test(kc)&&sa(Ja,"_inputDomain").set(null);"datarevision"===Ca&&(gb.newDataRevision=1)}}var Ha,Ca,Qa=fb.getValObject,gb=fb.flags,
Va=fb.immutable,db=fb.inArray,qb=fb.arrayIndex;for(Ca in Wa){if(gb.calc&&!fb.transition)return;var Kb=Wa[Ca],Ob=Ja[Ca],cc=Sa.concat(Ca);var kc=cc.join(".");if("_"!==Ca.charAt(0)&&"function"!==typeof Kb&&Kb!==Ob){if(("tick0"===Ca||"dtick"===Ca)&&"geo"!==Sa[0]){var qc=Ja.tickmode;if("auto"===qc||"array"===qc||!qc)continue}if(!("range"===Ca&&Ja.autorange||("zmin"===Ca||"zmax"===Ca)&&"contourcarpet"===Ja.type||!(Ha=Qa(cc))||Ha._compareAsJSON&&JSON.stringify(Kb)===JSON.stringify(Ob))){qc=Ha.valType;var Pc=
"data_array"===Ha.valType||Ha.arrayOk,Qc=Array.isArray(Kb),cd=Array.isArray(Ob);if(Qc&&cd){var gd="_input_"+Ca,kd=Wa[gd];gd=Ja[gd];if(Array.isArray(kd)&&kd===gd)continue}if(void 0===Ob)Pc&&Qc?gb.calc=!0:nb();else if(Ha._isLinkedToArray){Pc=[];Qc=!1;db||(gb.arrays[Ca]=Pc);cd=Math.min(Kb.length,Ob.length);kd=Math.max(Kb.length,Ob.length);if(cd!==kd)if("arraydraw"===Ha.editType)Qc=!0;else{nb();continue}for(qc=0;qc<cd;qc++)V(Kb[qc],Ob[qc],cc.concat(qc),ca.extendFlat({inArray:Ca,arrayIndex:qc},fb));if(Qc)for(qc=
cd;qc<kd;qc++)Pc.push(qc)}else!qc&&ca.isPlainObject(Kb)?V(Kb,Ob,cc,fb):Pc?Qc&&cd?(Va&&(gb.calc=!0),(Va||fb.newDataRevision)&&nb()):Qc!==cd?gb.calc=!0:nb():Qc&&cd?(Kb.length!==Ob.length||String(Kb)!==String(Ob))&&nb():nb()}}}for(Ca in Ja)if(!(Ca in Wa||"_"===Ca.charAt(0)||"function"===typeof Ja[Ca]))if(Ha=Qa(Sa.concat(Ca)),("data_array"===Ha.valType||Ha.arrayOk)&&Array.isArray(Ja[Ca])){gb.calc=!0;break}else nb()}function X(Wa,Ja){for(var Sa in Wa)if("_"!==Sa.charAt(0)){var fb=Wa[Sa],nb=Ja[Sa];if(fb!==
nb)if(ca.isPlainObject(fb)&&ca.isPlainObject(nb)){if(X(fb,nb))return!0}else if(Array.isArray(fb)&&Array.isArray(nb)){if(fb.length!==nb.length)return!0;for(var Ha=0;Ha<fb.length;Ha++)if(fb[Ha]!==nb[Ha])if(ca.isPlainObject(fb[Ha])&&ca.isPlainObject(nb[Ha])){if(X(fb[Ha],nb[Ha]))return!0}else return!0}else return!0}}function ba(Wa){var Ja=aa.select(Wa),Sa=Wa._fullLayout;Sa._container=Ja.selectAll(".plot-container").data([0]);Sa._container.enter().insert("div",":first-child").classed("plot-container",
!0).classed("plotly",!0);Sa._paperdiv=Sa._container.selectAll(".svg-container").data([0]);Sa._paperdiv.enter().append("div").classed("user-select-none",!0).classed("svg-container",!0).style("position","relative");Sa._glcontainer=Sa._paperdiv.selectAll(".gl-container").data([{}]);Sa._glcontainer.enter().append("div").classed("gl-container",!0);Sa._paperdiv.selectAll(".main-svg").remove();Sa._paperdiv.select(".modebar-container").remove();Sa._paper=Sa._paperdiv.insert("svg",":first-child").classed("main-svg",
!0);Sa._toppaper=Sa._paperdiv.append("svg").classed("main-svg",!0);Sa._modebardiv=Sa._paperdiv.append("div");delete Sa._modeBar;Sa._hoverpaper=Sa._paperdiv.append("svg").classed("main-svg",!0);if(!Sa._uid){var fb={};aa.selectAll("defs").each(function(){this.id&&(fb[this.id.split("-")[1]]=1)});Sa._uid=ca.randstr(fb)}Sa._paperdiv.selectAll(".main-svg").attr(Ba.svgAttrs);Sa._defs=Sa._paper.append("defs").attr("id","defs-"+Sa._uid);Sa._clips=Sa._defs.append("g").classed("clips",!0);Sa._topdefs=Sa._toppaper.append("defs").attr("id",
"topdefs-"+Sa._uid);Sa._topclips=Sa._topdefs.append("g").classed("clips",!0);Sa._bgLayer=Sa._paper.append("g").classed("bglayer",!0);Sa._draggers=Sa._paper.append("g").classed("draglayer",!0);Ja=Sa._paper.append("g").classed("layer-below",!0);Sa._imageLowerLayer=Ja.append("g").classed("imagelayer",!0);Sa._shapeLowerLayer=Ja.append("g").classed("shapelayer",!0);Sa._cartesianlayer=Sa._paper.append("g").classed("cartesianlayer",!0);Sa._polarlayer=Sa._paper.append("g").classed("polarlayer",!0);Sa._ternarylayer=
Sa._paper.append("g").classed("ternarylayer",!0);Sa._geolayer=Sa._paper.append("g").classed("geolayer",!0);Sa._funnelarealayer=Sa._paper.append("g").classed("funnelarealayer",!0);Sa._pielayer=Sa._paper.append("g").classed("pielayer",!0);Sa._treemaplayer=Sa._paper.append("g").classed("treemaplayer",!0);Sa._sunburstlayer=Sa._paper.append("g").classed("sunburstlayer",!0);Sa._indicatorlayer=Sa._toppaper.append("g").classed("indicatorlayer",!0);Sa._glimages=Sa._paper.append("g").classed("glimages",!0);
Ja=Sa._toppaper.append("g").classed("layer-above",!0);Sa._imageUpperLayer=Ja.append("g").classed("imagelayer",!0);Sa._shapeUpperLayer=Ja.append("g").classed("shapelayer",!0);Sa._infolayer=Sa._toppaper.append("g").classed("infolayer",!0);Sa._menulayer=Sa._toppaper.append("g").classed("menulayer",!0);Sa._zoomlayer=Sa._toppaper.append("g").classed("zoomlayer",!0);Sa._hoverlayer=Sa._hoverpaper.append("g").classed("hoverlayer",!0);Sa._modebardiv.classed("modebar-container",!0).style("position","absolute").style("top",
"0px").style("right","0px");Wa.emit("plotly_framework")}var aa=a("d3"),ka=a("fast-isnumeric"),ha=a("has-hover"),ca=a("../lib"),sa=ca.nestedProperty,ma=a("../lib/events"),ra=a("../lib/queue"),qa=a("../registry"),Y=a("./plot_schema"),pa=a("../plots/plots"),oa=a("../plots/polar/legacy"),ua=a("../plots/cartesian/axes"),ya=a("../components/drawing"),ja=a("../components/color"),za=a("../plots/cartesian/graph_interact").initInteractions,Ba=a("../constants/xmlns_namespaces"),Ma=a("../lib/svg_text_utils"),
Oa=a("../plots/cartesian/select").clearSelect,Ia=a("./plot_config").dfltConfig,Pa=a("./manage_arrays"),Fa=a("./helpers"),Na=a("./subroutines"),$a=a("./edit_types"),cb=a("../plots/cartesian/constants").AX_NAME_PATTERN,mb=0,Ka=/^[xyz]axis[0-9]*\.range(\[[0|1]\])?$/,Ua=/^[xyz]axis[0-9]*\.autorange$/,Ea=/^[xyz]axis[0-9]*\.domain(\[[0|1]\])?$/,Ya=[{pattern:/^hiddenlabels/,attr:"legend.uirevision"},{pattern:/^((x|y)axis\d*)\.((auto)?range|title\.text)/},{pattern:/axis\d*\.showspikes$/,attr:"modebar.uirevision"},
{pattern:/(hover|drag)mode$/,attr:"modebar.uirevision"},{pattern:/^(scene\d*)\.camera/},{pattern:/^(geo\d*)\.(projection|center|fitbounds)/},{pattern:/^(ternary\d*\.[abc]axis)\.(min|title\.text)$/},{pattern:/^(polar\d*\.radialaxis)\.((auto)?range|angle|title\.text)/},{pattern:/^(polar\d*\.angularaxis)\.rotation/},{pattern:/^(mapbox\d*)\.(center|zoom|bearing|pitch)/},{pattern:/^legend\.(x|y)$/,attr:"editrevision"},{pattern:/^(shapes|annotations)/,attr:"editrevision"},{pattern:/^title\.text$/,attr:"editrevision"}],
ab=[{pattern:/^selectedpoints$/,attr:"selectionrevision"},{pattern:/(^|value\.)visible$/,attr:"legend.uirevision"},{pattern:/^dimensions\[\d+\]\.constraintrange/},{pattern:/^node\.(x|y|groups)/},{pattern:/^level$/},{pattern:/(^|value\.)name$/},{pattern:/colorbar\.title\.text$/},{pattern:/colorbar\.(x|y)$/,attr:"editrevision"}];C.animate=function(Wa,Ja,Sa){function fb(Qa,gb){var Va=0;return function(){if(Qa&&++Va===gb)return Qa()}}Wa=ca.getGraphDiv(Wa);if(!ca.isPlotDiv(Wa))throw Error("This element is not a Plotly plot: "+
Wa+". It's likely that you've failed to create a plot before animating it. For more details, see https://plotly.com/javascript/animations/");var nb=Wa._transitionData;nb._frameQueue||(nb._frameQueue=[]);Sa=pa.supplyAnimationDefaults(Sa);var Ha=Sa.transition,Ca=Sa.frame;void 0===nb._frameWaitingCnt&&(nb._frameWaitingCnt=0);return new Promise(function(Qa,gb){function Va(){if(0!==nb._frameQueue.length){for(;nb._frameQueue.length;){var gd=nb._frameQueue.pop();if(gd.onInterrupt)gd.onInterrupt()}Wa.emit("plotly_animationinterrupted",
[])}}function db(gd){if(0!==gd.length){for(var kd=0;kd<gd.length;kd++){var Cb="byname"===gd[kd].type?pa.computeFrame(Wa,gd[kd].name):gd[kd].data;var ic=kd;ic=Array.isArray(Ca)?ic>=Ca.length?Ca[0]:Ca[ic]:Ca;var sc=kd;sc=Array.isArray(Ha)?sc>=Ha.length?Ha[0]:Ha[sc]:Ha;sc.duration=Math.min(sc.duration,ic.duration);Cb={frame:Cb,name:gd[kd].name,frameOpts:ic,transitionOpts:sc};kd===gd.length-1&&(Cb.onComplete=fb(Qa,2),Cb.onInterrupt=gb);nb._frameQueue.push(Cb)}"immediate"===Sa.mode&&(nb._lastFrameAt=-Infinity);
nb._animationRaf||Kb()}}function qb(){if(nb._currentFrame&&nb._currentFrame.onComplete)nb._currentFrame.onComplete();var gd=nb._currentFrame=nb._frameQueue.shift();if(gd){var kd=gd.name?gd.name.toString():null;Wa._fullLayout._currentFrame=kd;nb._lastFrameAt=Date.now();nb._timeToNext=gd.frameOpts.duration;pa.transition(Wa,gd.frame.data,gd.frame.layout,Fa.coerceTraceIndices(Wa,gd.frame.traces),gd.frameOpts,gd.transitionOpts).then(function(){if(gd.onComplete)gd.onComplete()});Wa.emit("plotly_animatingframe",
{name:kd,frame:gd.frame,animation:{frame:gd.frameOpts,transition:gd.transitionOpts}})}else Wa.emit("plotly_animated"),window.cancelAnimationFrame(nb._animationRaf),nb._animationRaf=null}function Kb(){Wa.emit("plotly_animating");nb._lastFrameAt=-Infinity;nb._timeToNext=0;nb._runningTransitions=0;nb._currentFrame=null;var gd=function(){nb._animationRaf=window.requestAnimationFrame(gd);Date.now()-nb._lastFrameAt>nb._timeToNext&&qb()};gd()}function Ob(gd){Array.isArray(Ha)?gd.transitionOpts=cc>=Ha.length?
Ha[cc]:Ha[0]:gd.transitionOpts=Ha;cc++;return gd}var cc=0,kc,qc=[],Pc=void 0===Ja||null===Ja;var Qc=Array.isArray(Ja);if(!Pc&&!Qc&&ca.isPlainObject(Ja))qc.push({type:"object",data:Ob(ca.extendFlat({},Ja))});else if(Pc||-1!==["string","number"].indexOf(typeof Ja))for(Qc=0;Qc<nb._frames.length;Qc++)(kc=nb._frames[Qc])&&(Pc||String(kc.group)===String(Ja))&&qc.push({type:"byname",name:String(kc.name),data:Ob({name:kc.name})});else if(Qc)for(Qc=0;Qc<Ja.length;Qc++)kc=Ja[Qc],-1!==["number","string"].indexOf(typeof kc)?
(kc=String(kc),qc.push({type:"byname",name:kc,data:Ob({name:kc})})):ca.isPlainObject(kc)&&qc.push({type:"object",data:Ob(ca.extendFlat({},kc))});for(Qc=0;Qc<qc.length;Qc++)if(kc=qc[Qc],"byname"===kc.type&&!nb._frameHash[kc.data.name]){ca.warn('animate failure: frame not found: "'+kc.data.name+'"');gb();return}-1!==["next","immediate"].indexOf(Sa.mode)&&Va();"reverse"===Sa.direction&&qc.reverse();var cd=Wa._fullLayout._currentFrame;if(cd&&Sa.fromcurrent){Pc=-1;for(Qc=0;Qc<qc.length;Qc++)if(kc=qc[Qc],
"byname"===kc.type&&kc.name===cd){Pc=Qc;break}if(0<Pc&&Pc<qc.length-1){cd=[];for(Qc=0;Qc<qc.length;Qc++)kc=qc[Qc],("byname"!==qc[Qc].type||Qc>Pc)&&cd.push(kc);qc=cd}}0<qc.length?db(qc):(Wa.emit("plotly_animated"),Qa())})};C.addFrames=function(Wa,Ja,Sa){Wa=ca.getGraphDiv(Wa);if(null===Ja||void 0===Ja)return Promise.resolve();if(!ca.isPlotDiv(Wa))throw Error("This element is not a Plotly plot: "+Wa+". It's likely that you've failed to create a plot before adding frames. For more details, see https://plotly.com/javascript/animations/");
var fb,nb=Wa._transitionData._frames,Ha=Wa._transitionData._frameHash;if(!Array.isArray(Ja))throw Error("addFrames failure: frameList must be an Array of frame definitions"+Ja);var Ca=nb.length+2*Ja.length;var Qa=[],gb={};for(fb=Ja.length-1;0<=fb;fb--)if(ca.isPlainObject(Ja[fb])){var Va=Ja[fb].name;var db=(Ha[Va]||gb[Va]||{}).name,qb=Ja[fb].name,Kb=Ha[db]||gb[db];db&&qb&&"number"===typeof qb&&Kb&&5>mb&&(mb++,ca.warn('addFrames: overwriting frame "'+(Ha[db]||gb[db]).name+'" with a frame whose name of type "number" also equates to "'+
db+'". This is valid but may potentially lead to unexpected behavior since all plotly.js frame names are stored internally as strings.'),5===mb&&ca.warn("addFrames: This API call has yielded too many of these warnings. For the rest of this call, further warnings about numeric frame names will be suppressed."));gb[Va]={name:Va};Qa.push({frame:pa.supplyFrameDefaults(Ja[fb]),index:Sa&&void 0!==Sa[fb]&&null!==Sa[fb]?Sa[fb]:Ca+fb})}Qa.sort(function(Ob,cc){return Ob.index>cc.index?-1:Ob.index<cc.index?
1:0});Ja=[];Sa=[];gb=nb.length;for(fb=Qa.length-1;0<=fb;fb--){Ca=Qa[fb].frame;"number"===typeof Ca.name&&ca.warn("Warning: addFrames accepts frames with numeric names, but the numbers areimplicitly cast to strings");if(!Ca.name)for(;Ha[Ca.name="frame "+Wa._transitionData._counter++];);if(Ha[Ca.name]){for(Va=0;Va<nb.length&&(nb[Va]||{}).name!==Ca.name;Va++);Ja.push({type:"replace",index:Va,value:Ca});Sa.unshift({type:"replace",index:Va,value:nb[Va]})}else Va=Math.max(0,Math.min(Qa[fb].index,gb)),Ja.push({type:"insert",
index:Va,value:Ca}),Sa.unshift({type:"delete",index:Va}),gb++}nb=fb=pa.modifyFrames;Ha=[Wa,Sa];Qa=[Wa,Ja];ra&&ra.add(Wa,fb,Ha,nb,Qa);return pa.modifyFrames(Wa,Ja)};C.deleteFrames=function(Wa,Ja){Wa=ca.getGraphDiv(Wa);if(!ca.isPlotDiv(Wa))throw Error("This element is not a Plotly plot: "+Wa);var Sa,fb=Wa._transitionData._frames,nb=[],Ha=[];if(!Ja)for(Ja=[],Sa=0;Sa<fb.length;Sa++)Ja.push(Sa);Ja=Ja.slice();Ja.sort();for(Sa=Ja.length-1;0<=Sa;Sa--){var Ca=Ja[Sa];nb.push({type:"delete",index:Ca});Ha.unshift({type:"insert",
index:Ca,value:fb[Ca]})}Sa=Ja=pa.modifyFrames;Ha=[Wa,Ha];Ca=[Wa,nb];ra&&ra.add(Wa,Ja,Ha,Sa,Ca);return pa.modifyFrames(Wa,nb)};C.addTraces=r;C.deleteTraces=t;C.extendTraces=d;C.moveTraces=w;C.prependTraces=p;C.newPlot=function(Wa,Ja,Sa,fb){Wa=ca.getGraphDiv(Wa);pa.cleanPlot([],{},Wa._fullData||[],Wa._fullLayout||{});pa.purge(Wa);return C.plot(Wa,Ja,Sa,fb)};C.plot=function(Wa,Ja,Sa,fb){function nb(){for(var qc=Kb._basePlotModules,Pc=0;Pc<qc.length;Pc++)qc[Pc].drawFramework&&qc[Pc].drawFramework(Wa);
!Kb._glcanvas&&Kb._has("gl")&&(Kb._glcanvas=Kb._glcontainer.selectAll(".gl-canvas").data([{key:"contextLayer",context:!0,pick:!1},{key:"focusLayer",context:!1,pick:!1},{key:"pickLayer",context:!1,pick:!0}],function(Qc){return Qc.key}),Kb._glcanvas.enter().append("canvas").attr("class",function(Qc){return"gl-canvas gl-canvas-"+Qc.key.replace("Layer","")}).style({position:"absolute",top:0,left:0,overflow:"visible","pointer-events":"none"}));if(Kb._glcanvas&&(Kb._glcanvas.attr("width",Kb.width).attr("height",
Kb.height),(qc=Kb._glcanvas.data()[0].regl)&&(Math.floor(Kb.width)!==qc._gl.drawingBufferWidth||Math.floor(Kb.height)!==qc._gl.drawingBufferHeight)))if(kc)ca.error("WebGL context buffer and canvas dimensions do not match due to browser/WebGL bug.");else return ca.log("WebGL context buffer and canvas dimensions do not match due to browser/WebGL bug. Clearing graph and plotting again."),pa.cleanPlot([],{},Wa._fullData,Kb),pa.supplyDefaults(Wa),Kb=Wa._fullLayout,pa.doCalcdata(Wa),kc++,nb();"h"===Kb.modebar.orientation?
Kb._modebardiv.style("height",null).style("width","100%"):Kb._modebardiv.style("width",null).style("height",Kb.height+"px");return pa.previousPromises(Wa)}function Ha(){pa.clearAutoMarginIds(Wa);Na.drawMarginPushers(Wa);ua.allowAutoMargin(Wa);if(Kb._has("pie"))for(var qc=Wa._fullData,Pc=0;Pc<qc.length;Pc++){var Qc=qc[Pc];"pie"===Qc.type&&Qc.automargin&&pa.allowAutoMargin(Wa,"pie."+Qc.uid+".automargin")}pa.doAutoMargin(Wa);return pa.previousPromises(Wa)}function Ca(){if(Ob)return ca.syncOrAsync([qa.getComponentMethod("shapes",
"calcAutorange"),qa.getComponentMethod("annotations","calcAutorange"),Qa],Wa);Qa()}function Qa(){Wa._transitioning||(Na.doAutoRangeAndConstraints(Wa),qb&&ua.saveRangeInitial(Wa),qa.getComponentMethod("rangeslider","calcAutorange")(Wa))}function gb(){return ua.draw(Wa,qb?"":"redraw")}Wa=ca.getGraphDiv(Wa);ma.init(Wa);if(ca.isPlainObject(Ja)){var Va=Ja;Ja=Va.data;Sa=Va.layout;fb=Va.config;var db=Va.frames}if(!1===ma.triggerHandler(Wa,"plotly_beforeplot",[Ja,Sa,fb]))return Promise.reject();Ja||Sa||ca.isPlotDiv(Wa)||
ca.warn("Calling Plotly.plot as if redrawing but this container doesn't yet have a plot.",Wa);f(Wa,fb);Sa||(Sa={});aa.select(Wa).classed("js-plotly-plot",!0);ya.makeTester();Array.isArray(Wa._promises)||(Wa._promises=[]);var qb=0===(Wa.data||[]).length&&Array.isArray(Ja);Array.isArray(Ja)&&(Fa.cleanData(Ja),qb?Wa.data=Ja:Wa.data.push.apply(Wa.data,Ja),Wa.empty=!1);if(!Wa.layout||qb)Wa.layout=Fa.cleanLayout(Sa);pa.supplyDefaults(Wa);var Kb=Wa._fullLayout;fb=Kb._has("cartesian");if(!Kb._has("polar")&&
Ja&&Ja[0]&&Ja[0].r)return ca.log("Legacy polar charts are deprecated!"),b(Wa,Ja,Sa);Kb._replotting=!0;if(qb||Kb._shouldCreateBgLayer)ba(Wa),Kb._shouldCreateBgLayer&&delete Kb._shouldCreateBgLayer;Wa.framework!==ba&&(Wa.framework=ba,ba(Wa));ya.initGradients(Wa);qb&&ua.saveShowSpikeInitial(Wa);var Ob=!Wa.calcdata||Wa.calcdata.length!==(Wa._fullData||[]).length;Ob&&pa.doCalcdata(Wa);for(Ja=0;Ja<Wa.calcdata.length;Ja++)Wa.calcdata[Ja][0].trace=Wa._fullData[Ja];Wa._context.responsive?Wa._responsiveChartHandler||
(Wa._responsiveChartHandler=function(){ca.isHidden(Wa)||pa.resize(Wa)},window.addEventListener("resize",Wa._responsiveChartHandler)):ca.clearResponsive(Wa);var cc=ca.extendFlat({},Kb._size),kc=0;Ja=[pa.previousPromises,function(){if(db)return C.addFrames(Wa,db)},nb,Ha,function(){if(pa.didMarginChange(cc,Kb._size))return ca.syncOrAsync([Ha,Na.layoutStyles],Wa)}];fb&&Ja.push(Ca);Ja.push(Na.layoutStyles);fb&&Ja.push(gb);Ja.push(Na.drawData,Na.finalDraw,za,pa.addLinks,pa.rehover,pa.redrag,pa.doAutoMargin,
pa.previousPromises);(Ja=ca.syncOrAsync(Ja,Wa))&&Ja.then||(Ja=Promise.resolve());return Ja.then(function(){q(Wa);return Wa})};C.purge=function(Wa){Wa=ca.getGraphDiv(Wa);var Ja=Wa._fullLayout||{};pa.cleanPlot([],{},Wa._fullData||[],Ja);pa.purge(Wa);ma.purge(Wa);Ja._container&&Ja._container.remove();delete Wa._context;return Wa};C.react=function(Wa,Ja,Sa,fb){function nb(){return C.addFrames(Wa,Va)}var Ha;Wa=ca.getGraphDiv(Wa);Fa.clearPromiseQueue(Wa);var Ca=Wa._fullData,Qa=Wa._fullLayout;if(ca.isPlotDiv(Wa)&&
Ca&&Qa){if(ca.isPlainObject(Ja)){var gb=Ja;Ja=gb.data;Sa=gb.layout;fb=gb.config;var Va=gb.frames}gb=!1;fb&&(gb=ca.extendDeep({},Wa._context),Wa._context=void 0,f(Wa,fb),gb=X(gb,Wa._context));Wa.data=Ja||[];Fa.cleanData(Wa.data);Wa.layout=Sa||{};Fa.cleanLayout(Wa.layout);R(Wa.data,Wa.layout,Ca,Qa);fb=Object.getOwnPropertyNames(Qa);for(var db=0;db<fb.length;db++){var qb=fb[db],Kb=qb.substring(0,5);("xaxis"===Kb||"yaxis"===Kb)&&(qb=Qa[qb]._emptyCategories)&&qb()}pa.supplyDefaults(Wa,{skipUpdateCalc:!0});
db=Wa._fullData;fb=Wa._fullLayout;qb=void 0===fb.datarevision;Kb=fb.transition;var Ob=T(Wa,Qa,fb,qb,Kb),cc=O(Wa,Ca,db,qb,Kb,Ob.newDataRevision);N(Wa)&&(Ob.layoutReplot=!0);cc.calc||Ob.calc?Wa.calcdata=void 0:pa.supplyDefaultsUpdateCalc(Wa.calcdata,db);Ca=[];Va&&(Wa._transitionData={},pa.createTransitionData(Wa),Ca.push(nb));if(fb.transition&&!gb&&(cc.anim||Ob.anim))Ob.ticks&&Ca.push(Na.doTicksRelayout),pa.doCalcdata(Wa),Na.doAutoRangeAndConstraints(Wa),Ca.push(function(){return pa.transitionFromReact(Wa,
cc,Ob,Qa)});else if(cc.fullReplot||Ob.layoutReplot||gb)Wa._fullLayout._skipDefaults=!0,Ca.push(C.plot);else{for(Ha in Ob.arrays)if(gb=Ob.arrays[Ha],gb.length)if(fb=qa.getComponentMethod(Ha,"drawOne"),fb!==ca.noop)for(db=0;db<gb.length;db++)fb(Wa,gb[db]);else{gb=qa.getComponentMethod(Ha,"draw");if(gb===ca.noop)throw Error("cannot draw components: "+Ha);gb(Wa)}Ca.push(pa.previousPromises);cc.style&&Ca.push(Na.doTraceStyle);(cc.colorbars||Ob.colorbars)&&Ca.push(Na.doColorBars);Ob.legend&&Ca.push(Na.doLegend);
Ob.layoutstyle&&Ca.push(Na.layoutStyles);Ob.axrange&&I(Ca);Ob.ticks&&Ca.push(Na.doTicksRelayout);Ob.modebar&&Ca.push(Na.doModeBar);Ob.camera&&Ca.push(Na.doCamera);Ca.push(q)}Ca.push(pa.rehover,pa.redrag);(Ha=ca.syncOrAsync(Ca,Wa))&&Ha.then||(Ha=Promise.resolve(Wa))}else Ha=C.newPlot(Wa,Ja,Sa,fb);return Ha.then(function(){Wa.emit("plotly_react",{data:Ja,layout:Sa});return Wa})};C.redraw=function(Wa){Wa=ca.getGraphDiv(Wa);if(!ca.isPlotDiv(Wa))throw Error("This element is not a Plotly plot: "+Wa);Fa.cleanData(Wa.data);
Fa.cleanLayout(Wa.layout);Wa.calcdata=void 0;return C.plot(Wa).then(function(){Wa.emit("plotly_redraw");return Wa})};C.relayout=u;C.restyle=x;C.setPlotConfig=function(Wa){return ca.extendFlat(Ia,Wa)};C.update=M;C._guiRelayout=E(u);C._guiRestyle=E(x);C._guiUpdate=E(M);C._storeDirectGUIEdit=function(Wa,Ja,Sa){for(var fb in Sa){var nb=sa(Wa,fb);z(fb,nb.get(),Sa[fb],Ja)}}},{"../components/color":615,"../components/drawing":637,"../constants/xmlns_namespaces":726,"../lib":750,"../lib/events":739,"../lib/queue":765,
"../lib/svg_text_utils":774,"../plots/cartesian/axes":799,"../plots/cartesian/constants":805,"../plots/cartesian/graph_interact":808,"../plots/cartesian/select":818,"../plots/plots":862,"../plots/polar/legacy":870,"../registry":882,"./edit_types":781,"./helpers":782,"./manage_arrays":784,"./plot_config":786,"./plot_schema":787,"./subroutines":789,d3:169,"fast-isnumeric":241,"has-hover":414}],786:[function(a,G,C){function q(n,m){for(var f in n){var b=n[f];b.valType?m[f]=b.dflt:(m[f]||(m[f]={}),q(b,
m[f]))}}a={staticPlot:{valType:"boolean",dflt:!1},plotlyServerURL:{valType:"string",dflt:""},editable:{valType:"boolean",dflt:!1},edits:{annotationPosition:{valType:"boolean",dflt:!1},annotationTail:{valType:"boolean",dflt:!1},annotationText:{valType:"boolean",dflt:!1},axisTitleText:{valType:"boolean",dflt:!1},colorbarPosition:{valType:"boolean",dflt:!1},colorbarTitleText:{valType:"boolean",dflt:!1},legendPosition:{valType:"boolean",dflt:!1},legendText:{valType:"boolean",dflt:!1},shapePosition:{valType:"boolean",
dflt:!1},titleText:{valType:"boolean",dflt:!1}},autosizable:{valType:"boolean",dflt:!1},responsive:{valType:"boolean",dflt:!1},fillFrame:{valType:"boolean",dflt:!1},frameMargins:{valType:"number",dflt:0,min:0,max:.5},scrollZoom:{valType:"flaglist",flags:["cartesian","gl3d","geo","mapbox"],extras:[!0,!1],dflt:"gl3d+geo+mapbox"},doubleClick:{valType:"enumerated",values:[!1,"reset","autosize","reset+autosize"],dflt:"reset+autosize"},doubleClickDelay:{valType:"number",dflt:300,min:0},showAxisDragHandles:{valType:"boolean",
dflt:!0},showAxisRangeEntryBoxes:{valType:"boolean",dflt:!0},showTips:{valType:"boolean",dflt:!0},showLink:{valType:"boolean",dflt:!1},linkText:{valType:"string",dflt:"Edit chart",noBlank:!0},sendData:{valType:"boolean",dflt:!0},showSources:{valType:"any",dflt:!1},displayModeBar:{valType:"enumerated",values:["hover",!0,!1],dflt:"hover"},showSendToCloud:{valType:"boolean",dflt:!1},showEditInChartStudio:{valType:"boolean",dflt:!1},modeBarButtonsToRemove:{valType:"any",dflt:[]},modeBarButtonsToAdd:{valType:"any",
dflt:[]},modeBarButtons:{valType:"any",dflt:!1},toImageButtonOptions:{valType:"any",dflt:{}},displaylogo:{valType:"boolean",dflt:!0},watermark:{valType:"boolean",dflt:!1},plotGlPixelRatio:{valType:"number",dflt:2,min:1,max:4},setBackground:{valType:"any",dflt:"transparent"},topojsonURL:{valType:"string",noBlank:!0,dflt:"https://cdn.plot.ly/"},mapboxAccessToken:{valType:"string",dflt:null},logging:{valType:"integer",min:0,max:2,dflt:1},notifyOnLogging:{valType:"integer",min:0,max:2,dflt:0},queueLength:{valType:"integer",
min:0,dflt:0},globalTransforms:{valType:"any",dflt:[]},locale:{valType:"string",dflt:"en-US"},locales:{valType:"any",dflt:{}}};C={};q(a,C);G.exports={configAttributes:a,dfltConfig:C}},{}],787:[function(a,G,C){function q(E,L){var Q,S,R=E._basePlotModules;if(R){for(Q=0;Q<R.length;Q++){var O=R[Q];if(O.attrRegex&&O.attrRegex.test(L)){if(O.layoutAttrOverrides)return O.layoutAttrOverrides;if(!T&&O.layoutAttributes)var T=O.layoutAttributes}if((O=O.baseLayoutAttrOverrides)&&L in O)return O[L]}if(T)return T}if(R=
E._modules)for(Q=0;Q<R.length;Q++)if((E=R[Q].layoutAttributes)&&L in E)return E[L];for(S in p.componentsRegistry){O=p.componentsRegistry[S];if("colorscale"===O.name&&0===L.indexOf("coloraxis"))return O.layoutAttributes[L];if(!O.schema&&L===O.name)return O.layoutAttributes}return L in t?t[L]:"radialaxis"===L||"angularaxis"===L?z[L]:z.layout[L]||!1}function n(E,L,Q){if(!E)return!1;if(E._isLinkedToArray)if(m(L[Q]))Q++;else if(Q<L.length)return!1;for(;Q<L.length;Q++){var S=E[L[Q]];if(B(S))E=S;else break;
if(Q===L.length-1)break;if(E._isLinkedToArray){if(Q++,!m(L[Q]))return!1}else if("info_array"===E.valType){Q++;S=L[Q];if(!m(S))return!1;var R=E.items;if(Array.isArray(R)){if(S>=R.length)return!1;if(2===E.dimensions){Q++;if(L.length===Q)break;E=L[Q];if(!m(E))return!1;E=R[S][E]}else E=R[S]}else E=R}}return E}function m(E){return E===Math.round(E)&&0<=E}function f(E){if("area"===E){var L={attributes:A};var Q={}}else L=p.modules[E]._module,Q=L.basePlotModule;var S={type:null},R=u({},r),O=u({},L.attributes);
C.crawl(O,function(T,V,X,ba,aa){J(R,aa).set(void 0);void 0===T&&J(O,aa).set(void 0)});u(S,R);p.traceIs(E,"noOpacity")&&delete S.opacity;p.traceIs(E,"showLegend")||(delete S.showlegend,delete S.legendgroup);p.traceIs(E,"noHover")&&(delete S.hoverinfo,delete S.hoverlabel);L.selectPoints||delete S.selectedpoints;u(S,O);Q.attributes&&u(S,Q.attributes);S.type=E;E={meta:L.meta||{},categories:L.categories||{},animatable:!!L.animatable,type:E,attributes:h(S)};L.layoutAttributes&&(Q={},u(Q,L.layoutAttributes),
E.layoutAttributes=h(Q));L.animatable||C.crawl(E,function(T){C.isValObject(T)&&"anim"in T&&delete T.anim});return E}function b(){var E={},L;u(E,t);for(L in p.subplotsRegistry){var Q=p.subplotsRegistry[L];if(Q.layoutAttributes)if(Array.isArray(Q.attr))for(var S=0;S<Q.attr.length;S++)d(E,Q,Q.attr[S]);else d(E,Q,"subplot"===Q.attr?Q.name:Q.attr)}D(E,{radialaxis:z.radialaxis,angularaxis:z.angularaxis});D(E,z.layout);for(L in p.componentsRegistry)if(Q=p.componentsRegistry[L],(S=Q.schema)&&(S.subplots||
S.layout)){if((Q=S.subplots)&&Q.xaxis&&!Q.yaxis)for(var R in Q.xaxis)delete E.yaxis[R]}else"colorscale"===Q.name?u(E,Q.layoutAttributes):Q.layoutAttributes&&(S=Q.layoutAttributes,Q=J(E,Q.name),Q.set(u(Q.get()||{},S)));return{layoutAttributes:h(E)}}function k(E){var L=u({},p.transformsRegistry[E].attributes);Object.keys(p.componentsRegistry).forEach(function(Q){var S=p.componentsRegistry[Q];S.schema&&S.schema.transforms&&S.schema.transforms[E]&&Object.keys(S.schema.transforms[E]).forEach(function(R){var O=
S.schema.transforms[E][R];R=J(L,R);R.set(u(R.get()||{},O))})});return{attributes:h(L)}}function e(){var E={frames:u({},w)};h(E);return E.frames}function h(E){l(E);c(E);g(E);return E}function l(E){C.crawl(E,function(L,Q,S){C.isValObject(L)?"data_array"===L.valType?(L.role="data",S[Q+"src"]={valType:"string",editType:"none"}):!0===L.arrayOk&&(S[Q+"src"]={valType:"string",editType:"none"}):B(L)&&(L.role="object")})}function c(E){C.crawl(E,function(L,Q,S){if(L){var R=L._isLinkedToArray;R&&(delete L._isLinkedToArray,
S[Q]={items:{}},S[Q].items[R]=L,S[Q].role="object")}})}function g(E){function L(Q){for(var S in Q)if(B(Q[S]))L(Q[S]);else if(Array.isArray(Q[S]))for(var R=0;R<Q[S].length;R++)L(Q[S][R]);else Q[S]instanceof RegExp&&(Q[S]=Q[S].toString())}L(E)}function d(E,L,Q){E=J(E,Q);L=u({},L.layoutAttributes);L._isSubplotObj=!0;E.set(L)}var p=a("../registry");G=a("../lib");var r=a("../plots/attributes"),t=a("../plots/layout_attributes"),w=a("../plots/frame_attributes"),x=a("../plots/animation_attributes"),y=a("./plot_config").configAttributes,
A=a("../plots/polar/legacy/area_attributes"),z=a("../plots/polar/legacy/axis_attributes"),F=a("./edit_types"),D=G.extendFlat,u=G.extendDeepAll,B=G.isPlainObject,I=G.isArrayOrTypedArray,J=G.nestedProperty,N=G.valObjectMeta,M=["_isSubplotObj","_isLinkedToArray","_arrayAttrRegexps","_deprecated"];C.IS_SUBPLOT_OBJ="_isSubplotObj";C.IS_LINKED_TO_ARRAY="_isLinkedToArray";C.DEPRECATED="_deprecated";C.UNDERSCORE_ATTRS=M;C.get=function(){var E={};p.allTypes.concat("area").forEach(function(Q){E[Q]=f(Q)});var L=
{};Object.keys(p.transformsRegistry).forEach(function(Q){L[Q]=k(Q)});return{defs:{valObjects:N,metaKeys:M.concat(["description","role","editType","impliedEdits"]),editType:{traces:F.traces,layout:F.layout},impliedEdits:{}},traces:E,layout:b(),transforms:L,frames:e(),animation:h(x),config:h(y)}};C.crawl=function(E,L,Q,S){var R=Q||0;S=S||"";Object.keys(E).forEach(function(O){var T=E[O];if(-1===M.indexOf(O)){var V=(S?S+".":"")+O;L(T,O,E,R,V);C.isValObject(T)||B(T)&&"impliedEdits"!==O&&C.crawl(T,L,R+
1,V)}})};C.isValObject=function(E){return E&&void 0!==E.valType};C.findArrayAttributes=function(E){function L(ka,ha,ca,sa){R=R.slice(0,sa).concat([ha]);O=O.slice(0,sa).concat([ka&&ka._isLinkedToArray]);!ka||"data_array"!==ka.valType&&!0!==ka.arrayOk||"colorbar"===R[sa-1]&&("ticktext"===ha||"tickvals"===ha)||Q(T,0,"")}function Q(ka,ha,ca){ka=ka[R[ha]];ca+=R[ha];if(ha===R.length-1)I(ka)&&S.push(V+ca);else if(O[ha]){if(Array.isArray(ka))for(var sa=0;sa<ka.length;sa++)B(ka[sa])&&Q(ka[sa],ha+1,ca+"["+
sa+"].")}else B(ka)&&Q(ka,ha+1,ca+".")}var S=[],R=[],O=[];var T=E;var V="";C.crawl(r,L);E._module&&E._module.attributes&&C.crawl(E._module.attributes,L);if(E=E.transforms)for(var X=0;X<E.length;X++){var ba=E[X],aa=ba._module;aa&&(V="transforms["+X+"].",T=ba,C.crawl(aa.attributes,L))}return S};C.getTraceValObject=function(E,L){var Q=L[0],S=1;if("transforms"===Q){if(1===L.length)return r.transforms;Q=E.transforms;if(!Array.isArray(Q)||!Q.length)return!1;S=L[1];if(!m(S)||S>=Q.length)return!1;E=(E=(p.transformsRegistry[Q[S].type]||
{}).attributes)&&E[L[2]];S=3}else if("area"===E.type)E=A[Q];else{var R=E._module;R||(R=(p.modules[E.type||r.type.dflt]||{})._module);if(!R)return!1;E=(E=R.attributes)&&E[Q];E||(R=R.basePlotModule)&&R.attributes&&(E=R.attributes[Q]);E||(E=r[Q])}return n(E,L,S)};C.getLayoutValObject=function(E,L){E=q(E,L[0]);return n(E,L,1)}},{"../lib":750,"../plots/animation_attributes":793,"../plots/attributes":795,"../plots/frame_attributes":828,"../plots/layout_attributes":853,"../plots/polar/legacy/area_attributes":868,
"../plots/polar/legacy/axis_attributes":869,"../registry":882,"./edit_types":781,"./plot_config":786}],788:[function(a,G,C){function q(b){"s"!==b.charAt(b.length-1)&&n.warn("bad argument to arrayDefaultKey: "+b);return b.substr(0,b.length-1)+"defaults"}var n=a("../lib"),m=a("../plots/attributes"),f={name:{valType:"string",editType:"none"},templateitemname:{valType:"string",editType:"calc"}};C.templatedArray=function(b,k){k._isLinkedToArray=b;k.name=f.name;k.templateitemname=f.templateitemname;return k};
C.traceTemplater=function(b){var k={},e;for(e in b){var h=b[e];Array.isArray(h)&&h.length&&(k[e]=0)}return{newTrace:function(l){e=n.coerce(l,{},m,"type");l={type:e,_template:null};if(e in k){h=b[e];var c=k[e]%h.length;k[e]++;l._template=h[c]}return l}}};C.newContainer=function(b,k,e){var h=b._template;e=h&&(h[k]||e&&h[e]);n.isPlainObject(e)||(e=null);return b[k]={_template:e}};C.arrayTemplater=function(b,k,e){var h=(b=b._template)&&b[q(k)],l=b&&b[k];Array.isArray(l)&&l.length||(l=[]);var c={};return{newItem:function(g){var d=
{name:g.name,_input:g},p=d.templateitemname=g.templateitemname;if(!p||"string"!==typeof p)return d._template=h,d;for(var r=0;r<l.length;r++){var t=l[r];if(t.name===p)return c[p]=1,d._template=t,d}d[e]=g[e]||!1;d._template=!1;return d},defaultItems:function(){for(var g=[],d=0;d<l.length;d++){var p=l[d],r=p.name;if(r&&"string"===typeof r&&!c[r]){var t={_template:p,name:r,_input:{_templateitemname:r}};t.templateitemname=p.templateitemname;g.push(t);c[r]=1}}return g}}};C.arrayDefaultKey=q;C.arrayEditor=
function(b,k,e){function h(){t={};p&&(t[r]={},t[r].templateitemname=p)}function l(w,x){p?n.nestedProperty(t[r],w).set(x):t[r+"."+w]=x}function c(){var w=t;h();return w}var g=(n.nestedProperty(b,k).get()||[]).length,d=e._index,p=d>=g&&(e._input||{})._templateitemname;p&&(d=g);var r=k+"["+d+"]",t;h();return{modifyBase:function(w,x){t[w]=x},modifyItem:l,getUpdateObj:c,applyUpdate:function(w,x){w&&l(w,x);w=c();for(var y in w)n.nestedProperty(b,y).set(w[y])}}}},{"../lib":750,"../plots/attributes":795}],
789:[function(a,G,C){function q(D,u,B){for(var I=0;I<B.length;I++){var J=B[I][0],N=B[I][1];if(!(J[0]>=D[1]||J[1]<=D[0])&&N[0]<u[1]&&N[1]>u[0])return!0}return!1}function n(D){function u(pa,oa,ua){var ya=pa._lw/2;return"x"===pa._id.charAt(0)?oa?"top"===ua?oa._offset-Q-ya:oa._offset+oa._length+Q+ya:L.t+L.h*(1-(pa.position||0))+ya%1:oa?"right"===ua?oa._offset+oa._length+Q+ya:oa._offset-Q-ya:L.l+L.w*(pa.position||0)+ya%1}function B(pa){return"M"+ma+","+pa+"H"+ra}function I(pa){return"M"+ca._offset+","+
pa+"h"+ca._length}function J(pa){return"M"+pa+","+Y+"V"+qa}function N(pa){return"M"+pa+","+sa._offset+"v"+sa._length}function M(pa,oa,ua){if(!pa.showline||O!==pa._mainSubplot)return"";if(!pa._anchorAxis)return ua(pa._mainLinePosition);ua=oa(pa._mainLinePosition);pa.mirror&&(ua+=oa(pa._mainMirrorPosition));return ua}var E=D._fullLayout,L=E._size,Q=L.p,S=x.list(D,"",!0),R,O;E._paperdiv.style({width:D._context.responsive&&E.autosize&&!D._context._hasZeroWidth&&!D.layout.width?"100%":E.width+"px",height:D._context.responsive&&
E.autosize&&!D._context._hasZeroHeight&&!D.layout.height?"100%":E.height+"px"}).selectAll(".main-svg").call(r.setSize,E.width,E.height);D._context.setBackground(D,E.paper_bgcolor);C.drawMainTitle(D);w.manage(D);if(!E._has("cartesian"))return c.previousPromises(D);for(R=0;R<S.length;R++){var T=S[R];var V=T._anchorAxis;T._linepositions={};T._lw=r.crispRound(D,T.linewidth,1);T._mainLinePosition=u(T,V,T.side);T._mainMirrorPosition=T.mirror&&V?u(T,V,y.OPPOSITE_SIDE[T.side]):null}R=[];V=[];var X=[],ba=
1===p.opacity(E.paper_bgcolor)&&1===p.opacity(E.plot_bgcolor)&&E.paper_bgcolor===E.plot_bgcolor;for(O in E._plots)if(T=E._plots[O],T.mainplot)T.bg&&T.bg.remove(),T.bg=void 0;else{var aa=T.xaxis.domain,ka=T.yaxis.domain,ha=T.plotgroup;q(aa,ka,X)?(aa=ha.node(),T=T.bg=g.ensureSingle(ha,"rect","bg"),aa.insertBefore(T.node(),aa.childNodes[0]),V.push(O)):(ha.select("rect.bg").remove(),X.push([aa,ka]),ba||(R.push(O),V.push(O)))}T=E._bgLayer.selectAll(".bg").data(R);T.enter().append("rect").classed("bg",
!0);T.exit().remove();T.each(function(pa){E._plots[pa].bg=h.select(this)});for(R=0;R<V.length;R++){T=E._plots[V[R]];var ca=T.xaxis;var sa=T.yaxis;T.bg&&T.bg.call(r.setRect,ca._offset-Q,sa._offset-Q,ca._length+2*Q,sa._length+2*Q).call(p.fill,E.plot_bgcolor).style("stroke-width",0)}if(!E._hasOnlyLargeSploms)for(O in E._plots)T=E._plots[O],ca=T.xaxis,sa=T.yaxis,V=T.clipId="clip"+E._uid+O+"plot",R=g.ensureSingleById(E._clips,"clipPath",V,function(pa){pa.classed("plotclip",!0).append("rect")}),T.clipRect=
R.select("rect").attr({width:ca._length,height:sa._length}),r.setTranslate(T.plot,ca._offset,sa._offset),T._hasClipOnAxisFalse?R=null:(R=V,V=null),r.setClipUrl(T.plot,R,D),T.layerClipId=V;for(O in E._plots){T=E._plots[O];ca=T.xaxis;sa=T.yaxis;ba="M0,0";if(m(ca,O)){V=b(ca,"left",sa,S);var ma=ca._offset-(V?Q+V:0);V=b(ca,"right",sa,S);var ra=ca._offset+ca._length+(V?Q+V:0);R=u(ca,sa,"bottom");X=u(ca,sa,"top");V=!ca._anchorAxis||O!==ca._mainSubplot;!V||"allticks"!==ca.mirror&&"all"!==ca.mirror||(ca._linepositions[O]=
[R,X]);ba=M(ca,B,I);V&&ca.showline&&("all"===ca.mirror||"allticks"===ca.mirror)&&(ba+=B(R)+B(X));T.xlines.style("stroke-width",ca._lw+"px").call(p.stroke,ca.showline?ca.linecolor:"rgba(0,0,0,0)")}T.xlines.attr("d",ba);ba="M0,0";if(m(sa,O)){V=b(sa,"bottom",ca,S);var qa=sa._offset+sa._length+(V?Q:0);V=b(sa,"top",ca,S);var Y=sa._offset-(V?Q:0);R=u(sa,ca,"left");X=u(sa,ca,"right");V=!sa._anchorAxis||O!==sa._mainSubplot;!V||"allticks"!==sa.mirror&&"all"!==sa.mirror||(sa._linepositions[O]=[R,X]);ba=M(sa,
J,N);V&&sa.showline&&("all"===sa.mirror||"allticks"===sa.mirror)&&(ba+=J(R)+J(X));T.ylines.style("stroke-width",sa._lw+"px").call(p.stroke,sa.showline?sa.linecolor:"rgba(0,0,0,0)")}T.ylines.attr("d",ba)}x.makeClipPaths(D);return c.previousPromises(D)}function m(D,u){return(D.ticks||D.showline)&&(u===D._mainSubplot||"all"===D.mirror||"allticks"===D.mirror)}function f(D,u,B){if(!B.showline||!B._lw)return!1;if("all"===B.mirror||"allticks"===B.mirror)return!0;var I=B._anchorAxis;if(!I)return!1;var J=
y.FROM_BL[u];return B.side===u?I.domain[J]===D.domain[J]:B.mirror&&I.domain[1-J]===D.domain[1-J]}function b(D,u,B,I){if(f(D,u,B))return B._lw;for(var J=0;J<I.length;J++){var N=I[J];if(N._mainAxis===B._mainAxis&&f(D,u,N))return N._lw}return 0}function k(D,u){var B=D.title,I=D._size,J=0;"start"===u?J=B.pad.l:"end"===u&&(J=-B.pad.r);switch(B.xref){case "paper":return I.l+I.w*B.x+J;default:return D.width*B.x+J}}function e(D,u){var B=D.title,I=D._size,J=0;"0em"!==u&&u?u===y.CAP_SHIFT+"em"&&(J=B.pad.t):
J=-B.pad.b;if("auto"===B.y)return I.t/2;switch(B.yref){case "paper":return I.t+I.h-I.h*B.y+J;default:return D.height-D.height*B.y+J}}var h=a("d3"),l=a("../registry"),c=a("../plots/plots"),g=a("../lib"),d=a("../lib/clear_gl_canvases"),p=a("../components/color"),r=a("../components/drawing"),t=a("../components/titles"),w=a("../components/modebar"),x=a("../plots/cartesian/axes"),y=a("../constants/alignment");G=a("../plots/cartesian/constraints");var A=G.enforce,z=G.clean,F=a("../plots/cartesian/autorange").doAutoRange;
C.layoutStyles=function(D){return g.syncOrAsync([c.doAutoMargin,n],D)};C.drawMainTitle=function(D){var u=D._fullLayout;var B=u.title;var I="middle";g.isRightAnchor(B)?I="end":g.isLeftAnchor(B)&&(I="start");B=I;I=u.title;var J="0em";g.isTopAnchor(I)?J=y.CAP_SHIFT+"em":g.isMiddleAnchor(I)&&(J=y.MID_SHIFT+"em");I=J;t.draw(D,"gtitle",{propContainer:u,propName:"title.text",placeholder:u._dfltTitle.plot,attributes:{x:k(u,B),y:e(u,I),"text-anchor":B,dy:I}})};C.doTraceStyle=function(D){var u=D.calcdata,B=
[],I;for(I=0;I<u.length;I++){var J=u[I],N=J[0]||{},M=N.trace||{},E=M._module||{},L=E.arraysToCalcdata;L&&L(J,M);(J=E.editStyle)&&B.push({fn:J,cd0:N})}if(B.length){for(I=0;I<B.length;I++)u=B[I],u.fn(D,u.cd0);d(D);C.redrawReglTraces(D)}c.style(D);l.getComponentMethod("legend","draw")(D);return c.previousPromises(D)};C.doColorBars=function(D){l.getComponentMethod("colorbar","draw")(D);return c.previousPromises(D)};C.layoutReplot=function(D){var u=D.layout;D.layout=void 0;return l.call("plot",D,"",u)};
C.doLegend=function(D){l.getComponentMethod("legend","draw")(D);return c.previousPromises(D)};C.doTicksRelayout=function(D){x.draw(D,"redraw");D._fullLayout._hasOnlyLargeSploms&&(l.subplotsRegistry.splom.updateGrid(D),d(D),C.redrawReglTraces(D));C.drawMainTitle(D);return c.previousPromises(D)};C.doModeBar=function(D){var u=D._fullLayout;w.manage(D);for(var B=0;B<u._basePlotModules.length;B++){var I=u._basePlotModules[B].updateFx;I&&I(D)}return c.previousPromises(D)};C.doCamera=function(D){D=D._fullLayout;
for(var u=D._subplots.gl3d,B=0;B<u.length;B++){var I=D[u[B]];I._scene.setViewport(I)}};C.drawData=function(D){var u=D._fullLayout;d(D);for(var B=u._basePlotModules,I=0;I<B.length;I++)B[I].plot(D);C.redrawReglTraces(D);c.style(D);l.getComponentMethod("shapes","draw")(D);l.getComponentMethod("annotations","draw")(D);l.getComponentMethod("images","draw")(D);u._replotting=!1;return c.previousPromises(D)};C.redrawReglTraces=function(D){var u=D._fullLayout;if(u._has("regl")){var B=D._fullData;D=[];var I=
[],J;u._hasOnlyLargeSploms&&u._splomGrid.draw();for(J=0;J<B.length;J++){var N=B[J];!0===N.visible&&0!==N._length&&("splom"===N.type?u._splomScenes[N.uid].draw():"scattergl"===N.type?g.pushUnique(D,N.xaxis+N.yaxis):"scatterpolargl"===N.type&&g.pushUnique(I,N.subplot))}for(J=0;J<D.length;J++)B=u._plots[D[J]],B._scene&&B._scene.draw();for(J=0;J<I.length;J++)B=u[I[J]]._subplot,B._scene&&B._scene.draw()}};C.doAutoRangeAndConstraints=function(D){var u=D._fullLayout,B=x.list(D,"",!0);u=u._axisMatchGroups||
[];for(var I={},J,N=0;N<B.length;N++)J=B[N],z(D,J),F(D,J),I[J._id]=1;A(D);B=0;a:for(;B<u.length;B++){N=u[B];var M=null,E;for(E in N)if(J=x.getFromId(D,E),I[J._id]){if(!1===J.autorange)continue a;J=g.simpleMap(J.range,J.r2l);M?M[0]<M[1]?(M[0]=Math.min(M[0],J[0]),M[1]=Math.max(M[1],J[1])):(M[0]=Math.max(M[0],J[0]),M[1]=Math.min(M[1],J[1])):M=J}for(E in N)J=x.getFromId(D,E),J.range=g.simpleMap(M,J.l2r),J._input.range=J.range.slice(),J.setScale()}};C.finalDraw=function(D){l.getComponentMethod("rangeslider",
"draw")(D);l.getComponentMethod("rangeselector","draw")(D)};C.drawMarginPushers=function(D){l.getComponentMethod("legend","draw")(D);l.getComponentMethod("rangeselector","draw")(D);l.getComponentMethod("sliders","draw")(D);l.getComponentMethod("updatemenus","draw")(D);l.getComponentMethod("colorbar","draw")(D)}},{"../components/color":615,"../components/drawing":637,"../components/modebar":675,"../components/titles":710,"../constants/alignment":717,"../lib":750,"../lib/clear_gl_canvases":734,"../plots/cartesian/autorange":798,
"../plots/cartesian/axes":799,"../plots/cartesian/constraints":806,"../plots/plots":862,"../registry":882,d3:169}],790:[function(a,G,C){function q(t,w){function x(I,J,N){if(l(J)&&l(I))q(I,J);else if(Array.isArray(J)&&Array.isArray(I)){I=p.arrayTemplater({_template:t},N);for(z=0;z<J.length;z++){N=J[z];var M=I.newItem(N)._template;M&&q(M,N)}I=I.defaultItems();for(z=0;z<I.length;z++)J.push(I[z]._template);for(z=0;z<J.length;z++)delete J[z].templateitemname}}t=h.extendDeep({},t);var y=Object.keys(t).sort(),
A,z;for(A=0;A<y.length;A++){var F=y[A],D=t[F];F in w?x(D,w[F],F):w[F]=D;if(n(F)===F)for(var u in w){var B=n(u);u===B||B!==F||u in t||x(D,w[u],F)}}}function n(t){return t.replace(/[0-9]+$/,"")}function m(t,w,x,y,A){var z=A&&x(A),F;for(F in t){var D=t[F],u=k(t,F,y),B=k(t,F,A),I=x(B);if(!I){var J=n(F);J!==F&&(B=k(t,J,A),I=x(B))}if(!(z&&z===I||!I||I._noTemplating||"data_array"===I.valType||I.arrayOk&&Array.isArray(D)))if(!I.valType&&l(D))m(D,w,x,u,B);else if(I._isLinkedToArray&&Array.isArray(D)){var N=
!1;I=0;J={};for(var M=0;M<D.length;M++){var E=D[M];if(l(E)){var L=E.name;L?J[L]||(m(E,w,x,k(D,I,u),k(D,I,B)),I++,J[L]=1):N||(N=p.arrayDefaultKey(F),N=k(t,N,y),L=k(D,I,u),m(E,w,x,L,k(D,I,B)),E=h.nestedProperty(w,L),h.nestedProperty(w,N).set(E.get()),E.set(null),N=!0)}}}else h.nestedProperty(w,u).set(D)}}function f(t,w){return c.getLayoutValObject(t,h.nestedProperty({},w).parts)}function b(t,w){return c.getTraceValObject(t,h.nestedProperty({},w).parts)}function k(t,w,x){return x?Array.isArray(t)?x+
"["+w+"]":x+"."+w:w}function e(t){switch(t.code){case "data":var w="The template has no key data.";break;case "layout":w="The template has no key layout.";break;case "missing":w=t.path?"There are no templates for item "+t.path+" with name "+t.templateitemname:"There are no templates for trace "+t.index+", of type "+t.traceType+".";break;case "unused":w=t.path?"The template item at "+t.path+" was not used in constructing the plot.":t.dataCount?"Some of the templates of type "+t.traceType+" were not used. The template has "+
t.templateCount+" traces, the data only has "+t.dataCount+" of this type.":"The template has "+t.templateCount+" traces of type "+t.traceType+" but there are none in the data.";break;case "reused":w="Some of the templates of type "+t.traceType+" were used more than once. The template has "+t.templateCount+" traces, the data has "+t.dataCount+" of this type."}t.msg=w;return t}var h=a("../lib"),l=h.isPlainObject,c=a("./plot_schema"),g=a("../plots/plots"),d=a("../plots/attributes"),p=a("./plot_template"),
r=a("./plot_config").dfltConfig;C.makeTemplate=function(t){t=h.isPlainObject(t)?t:h.getGraphDiv(t);t=h.extendDeep({_context:r},{data:t.data,layout:t.layout});g.supplyDefaults(t);var w=t.data||[],x=t.layout||{};x._basePlotModules=t._fullLayout._basePlotModules;x._modules=t._fullLayout._modules;var y={data:{},layout:{}};w.forEach(function(u){var B={};m(u,B,b.bind(null,u));u=h.coerce(u,{},d,"type");var I=y.data[u];I||(I=y.data[u]=[]);I.push(B)});m(x,y.layout,f.bind(null,x));delete y.layout.template;
t=x.template;if(l(t)){w=t.layout;var A;l(w)&&q(w,y.layout);var z=t.data;if(l(z)){for(A in y.data)if(w=z[A],Array.isArray(w)){var F=y.data[A];var D=F.length;x=w.length;for(t=0;t<D;t++)q(w[t%x],F[t]);for(t=D;t<x;t++)F.push(h.extendDeep({},w[t]))}for(A in z)A in y.data||(y.data[A]=h.extendDeep([],z[A]))}}return y};C.validateTemplate=function(t,w){function x(N,M){for(var E in N)if("_"!==E.charAt(0)&&l(N[E])){var L=n(E),Q=[],S;for(S=0;S<M.length;S++)Q.push(k(N,E,M[S])),L!==E&&Q.push(k(N,L,M[S]));for(S=
0;S<Q.length;S++)B[Q[S]]=1;x(N[E],Q)}}function y(N,M){for(var E in N)if(-1===E.indexOf("defaults")&&l(N[E])){var L=k(N,E,M);B[L]?y(N[E],L):u.push({code:"unused",path:L})}}function A(N,M){for(var E in N)if("_"!==E.charAt(0)){var L=N[E],Q=k(N,E,M);if(l(L))Array.isArray(N)&&!1===L._template&&L.templateitemname&&u.push({code:"missing",path:Q,templateitemname:L.templateitemname}),A(L,Q);else{var S;if(S=Array.isArray(L))a:{S=L;for(var R=0;R<S.length;R++)if(l(S[R])){S=!0;break a}S=void 0}S&&A(L,Q)}}}var z=
h.extendDeep({},{_context:r,data:t.data,layout:t.layout}),F=z.layout||{};l(w)||(w=F.template||{});var D=w.layout;t=w.data;var u=[];z.layout=F;z.layout.template=w;g.supplyDefaults(z);w=z._fullLayout;z=z._fullData;var B={};l(D)?(x(w,["layout"]),y(D,"layout")):u.push({code:"layout"});if(l(t)){D={};for(F=0;F<z.length;F++){var I=z[F];var J=I.type;D[J]=(D[J]||0)+1;I._fullInput._template||u.push({code:"missing",index:I._fullInput.index,traceType:J})}for(J in t)F=t[J].length,I=D[J]||0,F>I?u.push({code:"unused",
traceType:J,templateCount:F,dataCount:I}):I>F&&u.push({code:"reused",traceType:J,templateCount:F,dataCount:I})}else u.push({code:"data"});A({data:z,layout:w},"");if(u.length)return u.map(e)}},{"../lib":750,"../plots/attributes":795,"../plots/plots":862,"./plot_config":786,"./plot_schema":787,"./plot_template":788}],791:[function(a,G,C){var q=a("fast-isnumeric"),n=a("./plot_api"),m=a("../plots/plots"),f=a("../lib"),b=a("../snapshot/helpers"),k=a("../snapshot/tosvg"),e=a("../snapshot/svgtoimg"),h=a("../version").version,
l={format:{valType:"enumerated",values:["png","jpeg","webp","svg","full-json"],dflt:"png"},width:{valType:"number",min:1},height:{valType:"number",min:1},scale:{valType:"number",min:0,dflt:1},setBackground:{valType:"any",dflt:!1},imageDataOnly:{valType:"boolean",dflt:!1}};G.exports=function(c,g){function d(L){return!(L in g)||f.validate(g[L],l[L])}function p(L,Q){return f.coerce(g,A,l,L,Q)}function r(){return new Promise(function(L){setTimeout(L,b.getDelay(J._fullLayout))})}function t(){return new Promise(function(L,
Q){var S=k(J,z,u),R=J._fullLayout.width,O=J._fullLayout.height;if("full-json"===z)return Q=m.graphJson(J,!1,"keepdata","object",!0,!0),Q.version=h,Q=JSON.stringify(Q),n.purge(J),document.body.removeChild(J),I?L(Q):L(b.encodeJSON(Q));n.purge(J);document.body.removeChild(J);if("svg"===z)return I?L(S):L(b.encodeSVG(S));var T=document.createElement("canvas");T.id=f.randstr();e({format:z,width:R,height:O,scale:u,canvas:T,svg:S,promise:!0}).then(L).catch(Q)})}g=g||{};if(f.isPlainObject(c)){var w=c.data||
[];var x=c.layout||{};var y=c.config||{};c={}}else c=f.getGraphDiv(c),w=f.extendDeep([],c.data),x=f.extendDeep({},c.layout),y=c._context,c=c._fullLayout||{};if(!d("width")&&null!==g.width||!d("height")&&null!==g.height)throw Error("Height and width should be pixel values.");if(!d("format"))throw Error("Export format is not "+f.join2(l.format.values,", "," or ")+".");var A={},z=p("format"),F=p("width"),D=p("height"),u=p("scale"),B=p("setBackground"),I=p("imageDataOnly"),J=document.createElement("div");
J.style.position="absolute";J.style.left="-5000px";document.body.appendChild(J);var N=f.extendFlat({},x);F?N.width=F:null===g.width&&q(c.width)&&(N.width=c.width);D?N.height=D:null===g.height&&q(c.height)&&(N.height=c.height);var M=f.extendFlat({},y,{_exportedPlot:!0,staticPlot:!0,setBackground:B}),E=b.getRedrawFunc(J);return new Promise(function(L,Q){n.plot(J,w,N,M).then(E).then(r).then(t).then(function(S){S=I?S.replace(b.IMAGE_URL_PREFIX,""):S;L(S)}).catch(function(S){Q(S)})})}},{"../lib":750,"../plots/plots":862,
"../snapshot/helpers":886,"../snapshot/svgtoimg":888,"../snapshot/tosvg":890,"../version":1341,"./plot_api":785,"fast-isnumeric":241}],792:[function(a,G,C){function q(r,t,w,x,y,A){A=A||[];for(var z=Object.keys(r),F=0;F<z.length;F++){var D=z[F];if("transforms"!==D){var u=A.slice();u.push(D);var B=r[D],I=t[D];var J=w;if(D in J)var N=J[D];else N=f(D),N=J[N.keyMinusId];var M=(N||{}).valType,E="info_array"===M,L="colorscale"===M;J=(N||{}).items;var Q=w;var S=D,R=f(S),O=R.keyMinusId;R=R.id;Q=O in Q&&Q[O]._isSubplotObj&&
R?!0:S in Q;if(Q)if(l(B)&&l(I)&&"any"!==M)q(B,I,N,x,y,u);else if(E&&c(B))if(B.length>I.length&&x.push(m("unused",y,u.concat(I.length))),D=I.length,(M=Array.isArray(J))&&(D=Math.min(D,J.length)),2===N.dimensions)for(E=0;E<D;E++)if(c(B[E]))for(B[E].length>I[E].length&&x.push(m("unused",y,u.concat(E,I[E].length))),O=I[E].length,N=0;N<(M?Math.min(O,J[E].length):O);N++)L=M?J[E][N]:J,Q=B[E][N],S=I[E][N],b.validate(Q,L)?S!==Q&&S!==+Q&&x.push(m("dynamic",y,u.concat(E,N),Q,S)):x.push(m("value",y,u.concat(E,
N),Q));else x.push(m("array",y,u.concat(E),B[E]));else for(E=0;E<D;E++)L=M?J[E]:J,Q=B[E],S=I[E],b.validate(Q,L)?S!==Q&&S!==+Q&&x.push(m("dynamic",y,u.concat(E),Q,S)):x.push(m("value",y,u.concat(E),Q));else if(N.items&&!E&&c(B)){J=J[Object.keys(J)[0]];D=[];for(N=0;N<I.length;N++)E=I[N]._index||N,M=u.slice(),M.push(E),l(B[E])&&l(I[N])&&(D.push(E),E=B[E],L=I[N],l(E)&&!1!==E.visible&&!1===L.visible?x.push(m("invisible",y,M)):q(E,L,J,x,y,M));for(N=0;N<B.length;N++)M=u.slice(),M.push(N),l(B[N])?-1===D.indexOf(N)&&
x.push(m("unused",y,M)):x.push(m("object",y,M,B[N]))}else!l(B)&&l(I)?x.push(m("object",y,u,B)):g(B)||!g(I)||E||L?D in t?b.validate(B,N)?"enumerated"===N.valType&&(N.coerceNumber&&B!==+I||B!==I)&&x.push(m("dynamic",y,u,B,I)):x.push(m("value",y,u,B)):x.push(m("unused",y,u,B)):x.push(m("array",y,u,B));else x.push(m("schema",y,u))}}return x}function n(r){return c(r)?"In data trace "+r[1]+", ":"In "+r+", "}function m(r,t,w,x,y){w=w||"";if(c(t)){var A=t[0];var z=t[1]}else A=t,z=null;var F=w;if(c(F)){for(var D=
"",u=0;u<F.length;u++){var B=F[u];D="number"===typeof B?D.substr(0,D.length-1)+"["+B+"]":D+B;u<F.length-1&&(D+=".")}F=D}else F=String(F);t=d[r](t,F,x,y);b.log(t);return{code:r,container:A,trace:z,path:w,astr:F,msg:t}}function f(r){r=r.match(p);return{keyMinusId:r&&r[1],id:r&&r[2]}}var b=a("../lib"),k=a("../plots/plots"),e=a("./plot_schema"),h=a("./plot_config").dfltConfig,l=b.isPlainObject,c=Array.isArray,g=b.isArrayOrTypedArray;G.exports=function(r,t){void 0===r&&(r=[]);void 0===t&&(t={});var w=
e.get(),x=[],y={_context:b.extendFlat({},h)};if(c(r)){y.data=b.extendDeep([],r);var A=r}else y.data=[],A=[],x.push(m("array","data"));if(l(t)){y.layout=b.extendDeep({},t);var z=t}else y.layout={},z={},1<arguments.length&&x.push(m("object","layout"));k.supplyDefaults(y);for(var F=y._fullData,D=A.length,u=0;u<D;u++){var B=A[u],I=["data",u];if(l(B)){var J=F[u],N=J.type,M=w.traces[N].attributes;M.type={valType:"enumerated",values:[N]};!1===J.visible&&!1!==B.visible&&x.push(m("invisible",I));q(B,J,M,x,
I);B=B.transforms;J=J.transforms;if(B)for(c(B)||x.push(m("array",I,["transforms"])),I.push("transforms"),N=0;N<B.length;N++){M=["transforms",N];var E=B[N].type;l(B[N])?(E=w.transforms[E]?w.transforms[E].attributes:{},E.type={valType:"enumerated",values:Object.keys(w.transforms)},q(B[N],J[N],E,x,I,M)):x.push(m("object",I,M))}}else x.push(m("object",I))}y=y._fullLayout;A=w.layout.layoutAttributes;for(D=0;D<F.length;D++)u=F[D],I=w.traces[u.type],(B=I.layoutAttributes)&&(u.subplot?b.extendFlat(A[I.attributes.subplot.dflt],
B):b.extendFlat(A,B));q(z,y,A,x,"layout");return 0===x.length?void 0:x};var d={object:function(r,t){return("layout"===r&&""===t?"The layout argument":"data"===r[0]&&""===t?"Trace "+r[1]+" in the data argument":n(r)+"key "+t)+" must be linked to an object container"},array:function(r,t){return("data"===r?"The data argument":n(r)+"key "+t)+" must be linked to an array container"},schema:function(r,t){return n(r)+"key "+t+" is not part of the schema"},unused:function(r,t,w){w=l(w)?"container":"key";
return n(r)+w+" "+t+" did not get coerced"},dynamic:function(r,t,w,x){return[n(r)+"key",t,"(set to '"+w+"')","got reset to","'"+x+"'","during defaults."].join(" ")},invisible:function(r,t){return(t?n(r)+"item "+t:"Trace "+r[1])+" got defaulted to be not visible"},value:function(r,t,w){return[n(r)+"key "+t,"is set to an invalid value ("+w+")"].join(" ")}},p=b.counterRegex("([a-z]+)")},{"../lib":750,"../plots/plots":862,"./plot_config":786,"./plot_schema":787}],793:[function(a,G,C){G.exports={mode:{valType:"enumerated",
dflt:"afterall",values:["immediate","next","afterall"]},direction:{valType:"enumerated",values:["forward","reverse"],dflt:"forward"},fromcurrent:{valType:"boolean",dflt:!1},frame:{duration:{valType:"number",min:0,dflt:500},redraw:{valType:"boolean",dflt:!0}},transition:{duration:{valType:"number",min:0,dflt:500,editType:"none"},easing:{valType:"enumerated",dflt:"cubic-in-out",values:"linear quad cubic sin exp circle elastic back bounce linear-in quad-in cubic-in sin-in exp-in circle-in elastic-in back-in bounce-in linear-out quad-out cubic-out sin-out exp-out circle-out elastic-out back-out bounce-out linear-in-out quad-in-out cubic-in-out sin-in-out exp-in-out circle-in-out elastic-in-out back-in-out bounce-in-out".split(" "),
editType:"none"},ordering:{valType:"enumerated",values:["layout first","traces first"],dflt:"layout first",editType:"none"}}}},{}],794:[function(a,G,C){var q=a("../lib"),n=a("../plot_api/plot_template");G.exports=function(m,f,b){var k=b.name,e=b.inclusionAttr||"visible",h=f[k],l=q.isArrayOrTypedArray(m[k])?m[k]:[];m=f[k]=[];var c=n.arrayTemplater(f,k,e);for(k=0;k<l.length;k++){var g=l[k];if(q.isPlainObject(g))var d=c.newItem(g);else d=c.newItem({}),d[e]=!1;d._index=k;!1!==d[e]&&b.handleItemDefaults(g,
d,f,b);m.push(d)}e=c.defaultItems();for(k=0;k<e.length;k++)d=e[k],d._index=m.length,b.handleItemDefaults({},d,f,b,{}),m.push(d);if(q.isArrayOrTypedArray(h))for(f=Math.min(h.length,m.length),k=0;k<f;k++)q.relinkPrivateKeys(m[k],h[k]);return m}},{"../lib":750,"../plot_api/plot_template":788}],795:[function(a,G,C){a=a("../components/fx/attributes");G.exports={type:{valType:"enumerated",values:[],dflt:"scatter",editType:"calc+clearAxisTypes",_noTemplating:!0},visible:{valType:"enumerated",values:[!0,
!1,"legendonly"],dflt:!0,editType:"calc"},showlegend:{valType:"boolean",dflt:!0,editType:"style"},legendgroup:{valType:"string",dflt:"",editType:"style"},opacity:{valType:"number",min:0,max:1,dflt:1,editType:"style"},name:{valType:"string",editType:"style"},uid:{valType:"string",editType:"plot",anim:!0},ids:{valType:"data_array",editType:"calc",anim:!0},customdata:{valType:"data_array",editType:"calc"},meta:{valType:"any",arrayOk:!0,editType:"plot"},selectedpoints:{valType:"any",editType:"calc"},
hoverinfo:{valType:"flaglist",flags:["x","y","z","text","name"],extras:["all","none","skip"],arrayOk:!0,dflt:"all",editType:"none"},hoverlabel:a.hoverlabel,stream:{token:{valType:"string",noBlank:!0,strict:!0,editType:"calc"},maxpoints:{valType:"number",min:0,max:1E4,dflt:500,editType:"calc"},editType:"calc"},transforms:{_isLinkedToArray:"transform",editType:"calc"},uirevision:{valType:"any",editType:"none"}}},{"../components/fx/attributes":646}],796:[function(a,G,C){var q=a("fast-isnumeric");C=a("../../lib");
var n=C.dateTime2ms,m=C.incrementMonth,f=a("../../constants/numerical").ONEAVGMONTH;G.exports=function(b,k,e,h){if("date"!==k.type)return h;var l=b[e+"periodalignment"];if(!l)return h;var c=b[e+"period"];if(q(c)){if(c=+c,0>=c)return h}else if("string"===typeof c&&"M"===c.charAt(0)){var g=+c.substring(1);if(!(0<g&&Math.round(g)===g))return h}k=k.calendar;var d="start"===l;l="end"===l;b=n(b[e+"period0"],k)||0;e=[];for(var p=h.length,r=0;r<p;r++){var t=h[r];if(g){var w=Math.round((t-b)/(g*f));for(w=
m(b,g*w,k);w>t;)w=m(w,-g,k);for(;w<=t;)w=m(w,g,k);t=m(w,-g,k)}else{w=Math.round((t-b)/c);for(w=b+w*c;w>t;)w-=c;for(;w<=t;)w+=c;t=w-c}e[r]=d?t:l?w:(t+w)/2}return e}},{"../../constants/numerical":725,"../../lib":750,"fast-isnumeric":241}],797:[function(a,G,C){G.exports={xaxis:{valType:"subplotid",dflt:"x",editType:"calc+clearAxisTypes"},yaxis:{valType:"subplotid",dflt:"y",editType:"calc+clearAxisTypes"}}},{}],798:[function(a,G,C){function q(d,p){function r(O,T){return Math.max(O,y(T))}var t,w,x=[],
y=n(p);x=m(d,p);var A=x.min,z=x.max;if(0===A.length||0===z.length)return l.simpleMap(p.range,p.r2l);x=A[0].val;var F=z[0].val;for(t=1;t<A.length&&x===F;t++)x=Math.min(x,A[t].val);for(t=1;t<z.length&&x===F;t++)F=Math.max(F,z[t].val);d=!1;p.range&&(d=l.simpleMap(p.range,p.r2l),d=d[1]<d[0]);"reversed"===p.autorange&&(d=!0,p.autorange=!0);var D=p.rangemode,u="tozero"===D,B="nonnegative"===D;D=p._length;var I=D/10,J=function(O,T){var V=0;if(p.rangebreaks)for(O=p.locateBreaks(O,T),T=0;T<O.length;T++){var X=
O[T];V+=X.max-X.min}return V},N=0;for(t=0;t<A.length;t++){var M=A[t];for(w=0;w<z.length;w++){var E=z[w];var L=E.val-M.val-J(M.val,E.val);if(0<L){var Q=D-y(M)-y(E);if(Q>I){if(L/Q>N){var S=M;var R=E;N=L/Q}}else L/D>N&&(S={val:M.val,pad:0},R={val:E.val,pad:0},N=L/D)}}}x===F?(M=x-1,E=x+1,u?0===x?x=[0,1]:(A=(0<x?z:A).reduce(r,0),A=x/(1-Math.min(.5,A/D)),x=0<x?[0,A]:[A,0]):x=B?[Math.max(0,M),Math.max(1,E)]:[M,E]):(u?(0<=S.val&&(S={val:0,pad:0}),0>=R.val&&(R={val:0,pad:0})):B&&(0>S.val-N*y(S)&&(S={val:0,
pad:0}),0>=R.val&&(R={val:1,pad:0})),N=(R.val-S.val-J(M.val,E.val))/(D-y(S)-y(R)),x=[S.val-N*y(S),R.val+N*y(R)]);d&&x.reverse();return l.simpleMap(x,p.l2r||Number)}function n(d){var p=d._length/20;"domain"===d.constrain&&d._inputDomain&&(p*=(d._inputDomain[1]-d._inputDomain[0])/(d.domain[1]-d.domain[0]));return function(r){return r.pad+(r.extrapad?p:0)}}function m(d,p){function r(D,u){for(A=0;A<u.length;A++){var B=D[u[A]],I=(B._extremes||{})[t];if(!0===B.visible&&I){for(z=0;z<I.min.length;z++)F=I.min[z],
f(x,F.val,F.pad,{extrapad:F.extrapad},k);for(z=0;z<I.max.length;z++)F=I.max[z],f(y,F.val,F.pad,{extrapad:F.extrapad},e)}}}var t=p._id,w=d._fullLayout,x=[],y=[],A,z,F;r(d._fullData,p._traceIndices);r(w.annotations||[],p._annIndices||[]);r(w.shapes||[],p._shapeIndices||[]);return{min:x,max:y}}function f(d,p,r,t,w){var x=t.tozero;t=t.extrapad;for(var y=!0,A=0;A<d.length&&y;A++){var z=d[A];if(w(z.val,p)&&z.pad>=r&&(z.extrapad||!t)){y=!1;break}else w(p,z.val)&&z.pad<=r&&(t||!z.extrapad)&&(d.splice(A,1),
A--)}y&&(w=x&&0===p,d.push({val:p,pad:w?0:r,extrapad:w?!1:t}))}function b(d){return h(d)&&Math.abs(d)<c}function k(d,p){return d<=p}function e(d,p){return d>=p}var h=a("fast-isnumeric"),l=a("../../lib"),c=a("../../constants/numerical").FP_SAFE,g=a("../../registry");G.exports={getAutoRange:q,makePadFn:n,doAutoRange:function(d,p){p.setScale();if(p.autorange){p.range=q(d,p);p._r=p.range.slice();p._rl=l.simpleMap(p._r,p.r2l);var r=p._input,t={};t[p._attr+".range"]=p.range;t[p._attr+".autorange"]=p.autorange;
g.call("_storeDirectGUIEdit",d.layout,d._fullLayout._preGUI,t);r.range=p.range.slice();r.autorange=p.autorange}(r=p._anchorAxis)&&r.rangeslider&&((t=r.rangeslider[p._name])&&"auto"===t.rangemode&&(t.range=q(d,p)),r._input.rangeslider[p._name]=l.extendFlat({},t))},findExtremes:function(d,p,r){function t(aa){if(Array.isArray(aa))return u=!0,function(ha){return Math.max(Number(aa[ha]||0),0)};var ka=Math.max(Number(aa||0),0);return function(){return ka}}function w(aa){J=p[aa];h(J)&&(E=Q(aa),L=S(aa),B?
(N=d.c2l(J)-O(aa),M=d.c2l(J)+R(aa)):(T=J-O(aa),V=J+R(aa),D&&T<V/10&&(T=V/10),N=d.c2l(T),M=d.c2l(V)),F&&(N=Math.min(0,N),M=Math.max(0,M)),b(N)&&f(x,N,L,ba,k),b(M)&&f(y,M,E,ba,e))}r||(r={});d._m||d.setScale();var x=[],y=[],A=p.length,z=r.padded||!1,F=r.tozero&&("linear"===d.type||"-"===d.type),D="log"===d.type,u=!1,B=r.vpadLinearized||!1,I,J,N,M,E,L,Q=t((0<d._m?r.ppadplus:r.ppadminus)||r.ppad||0),S=t((0<d._m?r.ppadminus:r.ppadplus)||r.ppad||0),R=t(r.vpadplus||r.vpad),O=t(r.vpadminus||r.vpad);if(!u){var T=
Infinity;var V=-Infinity;if(D)for(I=0;I<A;I++){var X=p[I];X<T&&0<X&&(T=X);X>V&&X<c&&(V=X)}else for(I=0;I<A;I++)X=p[I],X<T&&X>-c&&(T=X),X>V&&X<c&&(V=X);p=[T,V];A=2}var ba={tozero:F,extrapad:z};z=Math.min(6,A);for(I=0;I<z;I++)w(I);for(I=A-1;I>=z;I--)w(I);return{min:x,max:y,opts:r}},concatExtremes:m}},{"../../constants/numerical":725,"../../lib":750,"../../registry":882,"fast-isnumeric":241}],799:[function(a,G,C){function q(Ha){var Ca=1E-4*(Ha[1]-Ha[0]);return[Ha[0]-Ca,Ha[1]+Ca]}function n(Ha){return+Ha}
function m(Ha){return String(Ha)}function f(Ha,Ca,Qa,gb,Va){function db(qc){return 2>(1+100*(qc-Ha)/Qa.dtick)%100}for(var qb=0,Kb=0,Ob=0,cc=0,kc=0;kc<Ca.length;kc++)0===Ca[kc]%1?Ob++:Q(Ca[kc])||cc++,db(Ca[kc])&&qb++,db(Ca[kc]+Qa.dtick/2)&&Kb++;Ca=Ca.length-cc;Ob===Ca&&"date"!==Qa.type?1>Qa.dtick?Ha=gb-.5*Qa.dtick:(Ha-=.5,Ha+Qa.dtick<gb&&(Ha+=Qa.dtick)):Kb<.1*Ca&&(qb>.3*Ca||db(gb)||db(Va))&&(Va=Qa.dtick/2,Ha+=Ha+Va<gb?Va:-Va);return Ha}function b(Ha){var Ca=Ha.tickvals,Qa=Ha.ticktext,gb=Array(Ca.length),
Va=O.simpleMap(Ha.range,Ha.r2l),db=q(Va);Va=Math.min(db[0],db[1]);db=Math.max(db[0],db[1]);var qb=0;Array.isArray(Qa)||(Qa=[]);var Kb="category"===Ha.type?Ha.d2l_noadd:Ha.d2l;"log"===Ha.type&&"L"!==String(Ha.dtick).charAt(0)&&(Ha.dtick="L"+Math.pow(10,Math.floor(Math.min(Ha.range[0],Ha.range[1]))-1));for(var Ob=0;Ob<Ca.length;Ob++){var cc=Kb(Ca[Ob]);cc>Va&&cc<db&&(gb[qb]=void 0===Qa[Ob]?cb.tickText(Ha,cc):h(Ha,cc,String(Qa[Ob])),qb++)}qb<Ca.length&&gb.splice(qb,Ca.length-qb);Ha.rangebreaks&&(gb=gb.filter(function(kc){return Ha.maskBreaks(kc.x)!==
Ia}));return gb}function k(Ha,Ca,Qa){return Ca*O.roundUp(Ha/Ca,Qa)}function e(Ha){var Ca=Ha.dtick;Ha._tickexponent=0;Q(Ca)||"string"===typeof Ca||(Ca=1);if("category"===Ha.type||"multicategory"===Ha.type)Ha._tickround=null;if("date"===Ha.type){var Qa=Ha.r2l(Ha.tick0),gb=Ha.l2r(Qa).replace(/(^-|i)/g,""),Va=gb.length;"M"===String(Ca).charAt(0)?10<Va||"01-01"!==gb.substr(5)?Ha._tickround="d":Ha._tickround=0===+Ca.substr(1)%12?"y":"m":Ca>=ya&&10>=Va||Ca>=15*ya?Ha._tickround="d":Ca>=Ba&&16>=Va||Ca>=za?
Ha._tickround="M":Ca>=Ma&&19>=Va||Ca>=Ba?Ha._tickround="S":(Ca=Ha.l2r(Qa+Ca).replace(/^-/,"").length,Ha._tickround=Math.max(Va,Ca)-20,0>Ha._tickround&&(Ha._tickround=4))}else Q(Ca)||"L"===Ca.charAt(0)?(Va=Ha.range.map(Ha.r2d||Number),Q(Ca)||(Ca=Number(Ca.substr(1))),Ha._tickround=2-Math.floor(Math.log(Ca)/Math.LN10+.01),Ca=Math.floor(Math.log(Math.max(Math.abs(Va[0]),Math.abs(Va[1])))/Math.LN10+.01),Math.abs(Ca)>(void 0===Ha.minexponent?3:Ha.minexponent)&&(!w(Ha.exponentformat)||14<Ca||-15>Ca?Ha._tickexponent=
Ca:Ha._tickexponent=3*Math.round((Ca-1)/3))):Ha._tickround=null}function h(Ha,Ca,Qa){Ha=Ha.tickfont||{};return{x:Ca,dx:0,dy:0,text:Qa||"",fontSize:Ha.size,font:Ha.family,fontColor:Ha.color}}function l(Ha,Ca,Qa,gb){var Va=Ha._tickround,db=Qa&&Ha.hoverformat||cb.getTickFormat(Ha);gb&&(Va=Q(Va)?4:{y:"m",m:"d",d:"M",M:"S",S:4}[Va]);db=O.formatDate(Ca.x,db,Va,Ha._dateFormat,Ha.calendar,Ha._extraFormat);var qb=db.indexOf("\n");if(-1!==qb){var Kb=db.substr(qb+1);db=db.substr(0,qb)}gb&&("00:00:00"===db||
"00:00"===db?(db=Kb,Kb=""):8===db.length&&(db=db.replace(/:00$/,"")));Kb&&(Qa?db="d"===Va?db+(", "+Kb):Kb+(db?", "+db:""):Ha._inCalcTicks&&Kb===Ha._prevDateHead||(db+="\x3cbr\x3e"+Kb,Ha._prevDateHead=Kb));Ca.text=db}function c(Ha,Ca,Qa,gb,Va){var db=Ha.dtick;Qa=Ca.x;var qb=Ha.tickformat,Kb="string"===typeof db&&db.charAt(0);"never"===Va&&(Va="");gb&&"L"!==Kb&&(db="L3",Kb="L");if(qb||"L"===Kb)Ca.text=x(Math.pow(10,Qa),Ha,Va,gb);else if(Q(db)||"D"===Kb&&.1>O.mod(Qa+.01,1))gb=Math.round(Qa),Va=Math.abs(gb),
qb=Ha.exponentformat,"power"===qb||w(qb)&&(14<gb||-15>gb)?(Ca.text=0===gb?1:1===gb?"10":"10\x3csup\x3e"+(1<gb?"":Oa)+Va+"\x3c/sup\x3e",Ca.fontSize*=1.25):("e"===qb||"E"===qb)&&2<Va?Ca.text="1"+qb+(0<gb?"+":Oa)+Va:(Ca.text=x(Math.pow(10,Qa),Ha,"","fakehover"),"D1"===db&&"y"===Ha._id.charAt(0)&&(Ca.dy-=Ca.fontSize/6));else if("D"===Kb)Ca.text=String(Math.round(Math.pow(10,O.mod(Qa,1)))),Ca.fontSize*=.75;else throw"unrecognized dtick "+String(db);"D1"===Ha.dtick&&(db=String(Ca.text).charAt(0),"0"===
db||"1"===db)&&("y"===Ha._id.charAt(0)?Ca.dx-=Ca.fontSize/4:(Ca.dy+=Ca.fontSize/2,Ca.dx+=(Ha.range[1]>Ha.range[0]?1:-1)*Ca.fontSize*(0>Qa?.5:.25)))}function g(Ha,Ca){Ha=Ha._categories[Math.round(Ca.x)];void 0===Ha&&(Ha="");Ca.text=String(Ha)}function d(Ha,Ca,Qa){var gb=Ha._categories[Math.round(Ca.x)]||[];Ha=void 0===gb[1]?"":String(gb[1]);gb=void 0===gb[0]?"":String(gb[0]);Qa?Ca.text=gb+" - "+Ha:(Ca.text=Ha,Ca.text2=gb)}function p(Ha,Ca,Qa,gb,Va){"never"===Va?Va="":"all"===Ha.showexponent&&1E-6>
Math.abs(Ca.x/Ha.dtick)&&(Va="hide");Ca.text=x(Ca.x,Ha,Va,gb)}function r(Ha,Ca,Qa,gb,Va){"radians"!==Ha.thetaunit||Qa?Ca.text=x(Ca.x,Ha,Va,gb):(Qa=Ca.x/180,0===Qa?Ca.text="0":(Qa=t(Qa),100<=Qa[1]?Ca.text=x(O.deg2rad(Ca.x),Ha,Va,gb):(Ha=0>Ca.x,Ca.text=1===Qa[1]?1===Qa[0]?"π":Qa[0]+"π":["\x3csup\x3e",Qa[0],"\x3c/sup\x3e⁄\x3csub\x3e",Qa[1],"\x3c/sub\x3eπ"].join(""),Ha&&(Ca.text=Oa+Ca.text))))}function t(Ha){function Ca(Va,db){return 1E-6>=Math.abs(db-0)?Va:Ca(db,Va%db)}var Qa=function(Va){for(var db=
1;!(1E-6>=Math.abs(Math.round(Va*db)/db-Va));)db*=10;return db}(Ha);Ha*=Qa;var gb=Math.abs(Ca(Ha,Qa));return[Math.round(Ha/gb),Math.round(Qa/gb)]}function w(Ha){return"SI"===Ha||"B"===Ha}function x(Ha,Ca,Qa,gb){var Va=0>Ha,db=Ca._tickround;Qa=Qa||Ca.exponentformat||"B";var qb=Ca._tickexponent,Kb=cb.getTickFormat(Ca),Ob=Ca.separatethousands;gb&&(qb={exponentformat:Qa,minexponent:Ca.minexponent,dtick:"none"===Ca.showexponent?Ca.dtick:Q(Ha)?Math.abs(Ha)||1:1,range:"none"===Ca.showexponent?Ca.range.map(Ca.r2d):
[0,Ha||1]},e(qb),db=(Number(qb._tickround)||0)+4,qb=qb._tickexponent,Ca.hoverformat&&(Kb=Ca.hoverformat));if(Kb)return Ca._numFormat(Kb)(Ha).replace(/-/g,Oa);gb=Math.pow(10,-db)/2;"none"===Qa&&(qb=0);Ha=Math.abs(Ha);if(Ha<gb)Ha="0",Va=!1;else{Ha+=gb;qb&&(Ha*=Math.pow(10,-qb),db+=qb);if(0===db)Ha=String(Math.floor(Ha));else if(0>db)for(Ha=String(Math.round(Ha)),Ha=Ha.substr(0,Ha.length+db);0>db;db++)Ha+="0";else Ha=String(Ha),(gb=Ha.indexOf(".")+1)&&(Ha=Ha.substr(0,gb+db).replace(/\.?0+$/,""));Ha=
O.numSeparate(Ha,Ca._separators,Ob)}qb&&"hide"!==Qa&&(w(Qa)&&(14<qb||-15>qb)&&(Qa="power"),Ca=0>qb?Oa+-qb:"power"!==Qa?"+"+qb:String(qb),"e"===Qa||"E"===Qa?Ha+=Qa+Ca:"power"===Qa?Ha+="×10\x3csup\x3e"+Ca+"\x3c/sup\x3e":"B"===Qa&&9===qb?Ha+="B":w(Qa)&&(Ha+=nb[qb/3+5]));return Va?Oa+Ha:Ha}function y(Ha,Ca){var Qa=[],gb=function(Va,db){db=Va.xbnd[db];null!==db&&Qa.push(O.extendFlat({},Va,{x:db}))};if(Ca.length){for(Ha=0;Ha<Ca.length;Ha++)gb(Ca[Ha],0);gb(Ca[Ha-1],1)}return Qa}function A(Ha,Ca){for(var Qa=
[],gb={},Va=0;Va<Ca.length;Va++){var db=Ca[Va];gb[db.text2]?gb[db.text2].push(db.x):gb[db.text2]=[db.x]}for(var qb in gb)Qa.push(h(Ha,O.interp(gb[qb],.5),qb));return Qa}function z(Ha,Ca){var Qa=[],gb=Ca.length&&Ca[Ca.length-1].x<Ca[0].x,Va=function(Kb,Ob){Ob=Kb.xbnd[Ob];null!==Ob&&Qa.push(O.extendFlat({},Kb,{x:Ob}))};if(Ha.showdividers&&Ca.length){for(Ha=0;Ha<Ca.length;Ha++){var db=Ca[Ha];db.text2!==qb&&Va(db,gb?1:0);var qb=db.text2}Va(Ca[Ha-1],gb?0:1)}return Qa}function F(Ha,Ca){if(Ha._selections[Ca].size()){var Qa=
Infinity;var gb=-Infinity;var Va=Infinity;var db=-Infinity;Ha._selections[Ca].each(function(){var qb=J(this);qb=ba.bBox(qb.node().parentNode);Qa=Math.min(Qa,qb.top);gb=Math.max(gb,qb.bottom);Va=Math.min(Va,qb.left);db=Math.max(db,qb.right)})}else db=Va=gb=Qa=0;return{top:Qa,bottom:gb,left:Va,right:db,height:gb-Qa,width:db-Va}}function D(Ha){return[Ha.text,Ha.x,Ha.axInfo,Ha.font,Ha.fontSize,Ha.fontColor].join("_")}function u(Ha){var Ca=Ha.title.font.size,Qa=(Ha.title.text.match(T.BR_TAG_ALL)||[]).length;
return Ha.title.hasOwnProperty("standoff")?Qa?Ca*(Fa+Qa*Na):Ca*Fa:Qa?Ca*(Qa+1)*Na:Ca}function B(Ha,Ca){Ca=Ha.l2p(Ca);return 1<Ca&&Ca<Ha._length-1}function I(Ha,Ca,Qa,gb){function Va(kc){function qc(cd){return"number"===typeof cd&&Math.abs(cd-cc)<Pc}if(!kc.showline||!kc.linewidth)return!1;var Pc=Math.max((kc.linewidth+Ca.zerolinewidth)/2,1);if(qc(kc._mainLinePosition)||qc(kc._mainMirrorPosition))return!0;kc=kc._linepositions||{};for(var Qc in kc)if(qc(kc[Qc][0])||qc(kc[Qc][1]))return!0}var db=Qa._mainAxis;
if(db){var qb=Ha._fullLayout,Kb=Ca._id.charAt(0),Ob=cb.counterLetter(Ca._id),cc=Ca._offset+(Math.abs(gb[0])<Math.abs(gb[1])===("x"===Kb)?0:Ca._length);gb=qb._plots[Qa._mainSubplot];if(!(gb.mainplotinfo||gb).overlays.length)return Va(Qa,cc);Ha=cb.list(Ha,Ob);for(Qa=0;Qa<Ha.length;Qa++)if(Ob=Ha[Qa],Ob._mainAxis===db&&Va(Ob,cc))return!0}}function J(Ha){Ha=L.select(Ha);var Ca=Ha.select(".text-math-group");return Ca.empty()?Ha.select("text"):Ca}function N(Ha){return Ha._id+".automargin"}function M(Ha,
Ca){for(var Qa=0;Qa<Ca.length;Qa++)-1===Ha.indexOf(Ca[Qa])&&Ha.push(Ca[Qa])}function E(Ha,Ca){for(var Qa=Ca._rangebreaks.length,gb=0;gb<Qa;gb++){var Va=Ca._rangebreaks[gb];if(Ha>=Va.min&&Ha<Va.max)return Va.max}return Ha}var L=a("d3"),Q=a("fast-isnumeric"),S=a("../../plots/plots"),R=a("../../registry"),O=a("../../lib"),T=a("../../lib/svg_text_utils"),V=a("../../components/titles"),X=a("../../components/color"),ba=a("../../components/drawing"),aa=a("./layout_attributes"),ka=a("./clean_ticks");C=a("../../constants/numerical");
var ha=C.ONEMAXYEAR,ca=C.ONEAVGYEAR,sa=C.ONEMINYEAR,ma=C.ONEMAXQUARTER,ra=C.ONEAVGQUARTER,qa=C.ONEMINQUARTER,Y=C.ONEMAXMONTH,pa=C.ONEAVGMONTH,oa=C.ONEMINMONTH,ua=C.ONEWEEK,ya=C.ONEDAY,ja=ya/2,za=C.ONEHOUR,Ba=C.ONEMIN,Ma=C.ONESEC,Oa=C.MINUS_SIGN,Ia=C.BADNUM;C=a("../../constants/alignment");var Pa=C.MID_SHIFT,Fa=C.CAP_SHIFT,Na=C.LINE_SPACING,$a=C.OPPOSITE_SIDE,cb=G.exports={};cb.setConvert=a("./set_convert");var mb=a("./axis_autotype"),Ka=a("./axis_ids");cb.id2name=Ka.id2name;cb.name2id=Ka.name2id;
cb.cleanId=Ka.cleanId;cb.list=Ka.list;cb.listIds=Ka.listIds;cb.getFromId=Ka.getFromId;cb.getFromTrace=Ka.getFromTrace;a=a("./autorange");cb.getAutoRange=a.getAutoRange;cb.findExtremes=a.findExtremes;cb.coerceRef=function(Ha,Ca,Qa,gb,Va,db){var qb=gb.charAt(gb.length-1);Qa=Qa._fullLayout._subplots[qb+"axis"];gb+="ref";qb={};Va||(Va=Qa[0]||("string"===typeof db?db:db[0]));db||(db=Va);Qa=Qa.concat(Qa.map(function(Kb){return Kb+" domain"}));qb[gb]={valType:"enumerated",values:Qa.concat(db?"string"===
typeof db?[db]:db:[]),dflt:Va};return O.coerce(Ha,Ca,qb,gb)};cb.getRefType=function(Ha){return void 0===Ha?Ha:"paper"===Ha?"paper":"pixel"===Ha?"pixel":/( domain)$/.test(Ha)?"domain":"range"};cb.coercePosition=function(Ha,Ca,Qa,gb,Va,db){"range"!==cb.getRefType(gb)?(Ca=O.ensureNumber,Qa=Qa(Va,db)):(Ca=cb.getFromId(Ca,gb),db=Ca.fraction2r(db),Qa=Qa(Va,db),Ca=Ca.cleanPos);Ha[Va]=Ca(Qa)};cb.cleanPosition=function(Ha,Ca,Qa){return("paper"===Qa||"pixel"===Qa?O.ensureNumber:cb.getFromId(Ca,Qa).cleanPos)(Ha)};
cb.redrawComponents=function(Ha,Ca){function Qa(Va,db,qb,Kb){Va=R.getComponentMethod(Va,db);db={};for(var Ob=0;Ob<Ca.length;Ob++)for(var cc=gb[cb.id2name(Ca[Ob])][qb],kc=0;kc<cc.length;kc++){var qc=cc[kc];if(!db[qc]&&(Va(Ha,qc),db[qc]=1,Kb))return}}Ca=Ca?Ca:cb.listIds(Ha);var gb=Ha._fullLayout;Qa("annotations","drawOne","_annIndices");Qa("shapes","drawOne","_shapeIndices");Qa("images","draw","_imgIndices",!0)};var Ua=cb.getDataConversions=function(Ha,Ca,Qa,gb){Qa="x"===Qa||"y"===Qa||"z"===Qa?Qa:gb;
if(Array.isArray(Qa)){if(Ha={type:mb(gb),_categories:[]},cb.setConvert(Ha),"category"===Ha.type)for(Ca=0;Ca<gb.length;Ca++)Ha.d2c(gb[Ca])}else Ha=cb.getFromTrace(Ha,Ca,Qa);return Ha?{d2c:Ha.d2c,c2d:Ha.c2d}:"ids"===Qa?{d2c:m,c2d:m}:{d2c:n,c2d:n}};cb.getDataToCoordFunc=function(Ha,Ca,Qa,gb){return Ua(Ha,Ca,Qa,gb).d2c};cb.counterLetter=function(Ha){Ha=Ha.charAt(0);if("x"===Ha)return"y";if("y"===Ha)return"x"};cb.minDtick=function(Ha,Ca,Qa,gb){if(-1!==["log","category","multicategory"].indexOf(Ha.type)||
!gb)Ha._minDtick=0;else if(void 0===Ha._minDtick)Ha._minDtick=Ca,Ha._forceTick0=Qa;else if(Ha._minDtick)if(2E-6>(Ha._minDtick/Ca+1E-6)%1&&2E-6>((Qa-Ha._forceTick0)/Ca%1+1.000001)%1)Ha._minDtick=Ca,Ha._forceTick0=Qa;else if(2E-6<(Ca/Ha._minDtick+1E-6)%1||2E-6<((Qa-Ha._forceTick0)/Ha._minDtick%1+1.000001)%1)Ha._minDtick=0};cb.saveRangeInitial=function(Ha,Ca){Ha=cb.list(Ha,"",!0);for(var Qa=!1,gb=0;gb<Ha.length;gb++){var Va=Ha[gb],db=void 0===Va._rangeInitial,qb=db||!(Va.range[0]===Va._rangeInitial[0]&&
Va.range[1]===Va._rangeInitial[1]);if(db&&!1===Va.autorange||Ca&&qb)Va._rangeInitial=Va.range.slice(),Qa=!0}return Qa};cb.saveShowSpikeInitial=function(Ha,Ca){for(var Qa=cb.list(Ha,"",!0),gb=!1,Va="on",db=0;db<Qa.length;db++){var qb=Qa[db],Kb=void 0===qb._showSpikeInitial,Ob=Kb||qb.showspikes!==qb._showspikes;if(Kb||Ca&&Ob)qb._showSpikeInitial=qb.showspikes,gb=!0;"on"!==Va||qb.showspikes||(Va="off")}Ha._fullLayout._cartesianSpikesEnabled=Va;return gb};cb.autoBin=function(Ha,Ca,Qa,gb,Va,db){var qb=
O.aggNums(Math.min,null,Ha),Kb=O.aggNums(Math.max,null,Ha);if("category"===Ca.type||"multicategory"===Ca.type)return{start:qb-.5,end:Kb+.5,size:Math.max(1,Math.round(db)||1),_dataSpan:Kb-qb};Va||(Va=Ca.calendar);var Ob="log"===Ca.type?{type:"linear",range:[qb,Kb]}:{type:Ca.type,range:O.simpleMap([qb,Kb],Ca.c2r,0,Va),calendar:Va};cb.setConvert(Ob);(db=db&&ka.dtick(db,Ob.type))?(Ob.dtick=db,Ob.tick0=ka.tick0(void 0,Ob.type,Va)):(Qa?gb=(Kb-qb)/Qa:(Qa=O.distinctVals(Ha),db=Math.pow(10,Math.floor(Math.log(Qa.minDiff)/
Math.LN10)),Qa=db*O.roundUp(Qa.minDiff/db,[.9,1.9,4.9,9.9],!0),gb=Math.max(Qa,2*O.stdev(Ha)/Math.pow(Ha.length,gb?.25:.4)),Q(gb)||(gb=1)),cb.autoTicks(Ob,gb));gb=Ob.dtick;Qa=cb.tickIncrement(cb.tickFirst(Ob),gb,"reverse",Va);if("number"===typeof gb)Qa=f(Qa,Ha,Ob,qb,Kb),Ob=1+Math.floor((Kb-Qa)/gb),Ha=Qa+Ob*gb;else{if("M"===Ob.dtick.charAt(0))a:{Ob=Qa;Ha=O.findExactDates(Ha,Va);if(.8<Ha.exactDays&&(Qa=Number(gb.substr(1)),Ob=.8<Ha.exactYears&&0===Qa%12?cb.tickIncrement(Ob,"M6","reverse")+1.5*ya:.8<
Ha.exactMonths?cb.tickIncrement(Ob,"M1","reverse")+15.5*ya:Ob-ja,Ha=cb.tickIncrement(Ob,gb),Ha<=qb)){Qa=Ha;break a}Qa=Ob}Ha=Qa;for(Ob=0;Ha<=Kb;)Ha=cb.tickIncrement(Ha,gb,!1,Va),Ob++}return{start:Ca.c2r(Qa,0,Va),end:Ca.c2r(Ha,0,Va),size:gb,_dataSpan:Kb-qb}};cb.prepTicks=function(Ha,Ca){Ca=O.simpleMap(Ha.range,Ha.r2l,void 0,void 0,Ca);Ha._dtickInit=Ha.dtick;Ha._tick0Init=Ha.tick0;if("auto"===Ha.tickmode||!Ha.dtick){var Qa=Ha.nticks;Qa||("category"===Ha.type||"multicategory"===Ha.type?(Qa=Ha.tickfont?
1.2*(Ha.tickfont.size||12):15,Qa=Ha._length/Qa):(Qa="y"===Ha._id.charAt(0)?40:80,Qa=O.constrain(Ha._length/Qa,4,9)+1),"radialaxis"===Ha._name&&(Qa*=2));"array"===Ha.tickmode&&(Qa*=100);Ha._roughDTick=Math.abs(Ca[1]-Ca[0])/Qa;cb.autoTicks(Ha,Ha._roughDTick);0<Ha._minDtick&&Ha.dtick<2*Ha._minDtick&&(Ha.dtick=Ha._minDtick,Ha.tick0=Ha.l2r(Ha._forceTick0))}if("period"===Ha.ticklabelmode){Ca=!(Q(Ha.dtick)||"M"!==Ha.dtick.charAt(0));if(Qa=cb.getTickFormat(Ha)){var gb=Ha._dtickInit!==Ha.dtick;if(!/%[fLQsSMX]/.test(Qa))if(/%[HI]/.test(Qa)){var Va=
za;gb&&!Ca&&Ha.dtick<za&&(Ha.dtick=za)}else/%p/.test(Qa)?(Va=ja,gb&&!Ca&&Ha.dtick<ja&&(Ha.dtick=ja)):/%[Aadejuwx]/.test(Qa)?(Va=ya,gb&&!Ca&&Ha.dtick<ya&&(Ha.dtick=ya)):/%[UVW]/.test(Qa)?(Va=ua,gb&&!Ca&&Ha.dtick<ua&&(Ha.dtick=ua)):/%[Bbm]/.test(Qa)?(Va=pa,gb&&(Ca?1>+Ha.dtick.substring(1):Ha.dtick<oa)&&(Ha.dtick="M1")):/%[q]/.test(Qa)?(Va=ra,gb&&(Ca?3>+Ha.dtick.substring(1):Ha.dtick<qa)&&(Ha.dtick="M3")):/%[Yy]/.test(Qa)&&(Va=ca,gb&&(Ca?12>+Ha.dtick.substring(1):Ha.dtick<sa)&&(Ha.dtick="M12"))}(Ca=
!(Q(Ha.dtick)||"M"!==Ha.dtick.charAt(0)))&&Ha.tick0===Ha._dowTick0&&(Ha.tick0=Ha._rawTick0);Ha._definedDelta=Va}Ha.tick0||(Ha.tick0="date"===Ha.type?"2000-01-01":0);"date"===Ha.type&&.1>Ha.dtick&&(Ha.dtick=.1);e(Ha)};cb.calcTicks=function(Ha,Ca){cb.prepTicks(Ha,Ca);var Qa=O.simpleMap(Ha.range,Ha.r2l,void 0,void 0,Ca);if("array"===Ha.tickmode)return b(Ha);var gb=q(Qa),Va=gb[0],db=gb[1],qb=Qa[1]<Qa[0];gb=Math.min(Qa[0],Qa[1]);var Kb=Math.max(Qa[0],Qa[1]),Ob="log"===Ha.type&&!(Q(Ha.dtick)||"L"===Ha.dtick.charAt(0)),
cc="period"===Ha.ticklabelmode;Ha._tmin=cb.tickFirst(Ha,Ca);if(Ha._tmin<Va!==qb)return[];if("category"===Ha.type||"multicategory"===Ha.type)db=qb?Math.max(-.5,db):Math.min(Ha._categories.length-.5,db);var kc=Ha._tmin;Ha.rangebreaks&&Ha._tick0Init!==Ha.tick0&&(kc=E(kc,Ha),qb||(kc=cb.tickIncrement(kc,Ha.dtick,!qb,Ha.calendar)));cc&&(kc=cb.tickIncrement(kc,Ha.dtick,!qb,Ha.calendar));var qc=Math.max(1E3,Ha._length||0);Ca=[];for(var Pc=null;qb?kc>=db:kc<=db;kc=cb.tickIncrement(kc,Ha.dtick,qb,Ha.calendar)){if(Ha.rangebreaks&&
!qb){if(kc<Va)continue;if(Ha.maskBreaks(kc)===Ia&&E(kc,Ha)>=Kb)break}if(Ca.length>qc||kc===Pc)break;Pc=kc;var Qc=!1;Ob&&kc!==(kc|0)&&(Qc=!0);Ca.push({minor:Qc,value:kc})}if(cc)for(Va=Ha._definedDelta,db=0;db<Ca.length;db++){Ob=Ca[db].value;db<Ca.length-1?(cc=db,kc=db+1):(cc=0<db?db-1:db,kc=db);cc=Math.abs(Ca[kc].value-Ca[cc].value);qc=Va||cc;kc=0;qc>=sa?kc=cc>=sa&&cc<=ha?cc:ca:Va===ra&&qc>=qa?kc=cc>=qa&&cc<=ma?cc:ra:qc>=oa?kc=cc>=oa&&cc<=Y?cc:pa:Va===ua&&qc>=ua?kc=ua:qc>=ya?kc=ya:Va===ja&&qc>=ja?
kc=ja:Va===za&&qc>=za&&(kc=za);if(kc>=cc){kc=cc;var cd=!0}qc=Ob+kc;if(Ha.rangebreaks&&0<kc){for(Qc=Pc=0;84>Qc;Qc++){var gd=(Qc+.5)/84;Ha.maskBreaks(Ob*(1-gd)+gd*qc)!==Ia&&Pc++}kc*=Pc/84;kc||(Ca[db].drop=!0);cd&&cc>ua&&(kc=cc)}if(0<kc||0===db)Ca[db].periodX=Ob+kc/2}if(Ha.rangebreaks)for(Va="y"===Ha._id.charAt(0),db=1,"auto"===Ha.tickmode&&(db=Ha.tickfont?Ha.tickfont.size:12),Ob=NaN,cd=Ca.length-1;-1<cd;cd--)Ca[cd].drop?Ca.splice(cd,1):(Ca[cd].value=E(Ca[cd].value,Ha),cc=Ha.c2p(Ca[cd].value),(Va?Ob>
cc-db:Ob<cc+db)?Ca.splice(qb?cd+1:cd,1):Ob=cc);"angularaxis"===Ha._id&&360===Math.abs(Qa[1]-Qa[0])&&Ca.pop();Ha._tmax=(Ca[Ca.length-1]||{}).value;Ha._prevDateHead="";Ha._inCalcTicks=!0;Qa=[];for(cd=0;cd<Ca.length;cd++)qb=cb.tickText(Ha,Ca[cd].value,!1,Ca[cd].minor),Va=Ca[cd].periodX,void 0!==Va&&(qb.periodX=Va,Va>Kb||Va<gb)&&(Va>Kb&&(qb.periodX=Kb),Va<gb&&(qb.periodX=gb),qb.text=" ",Ha._prevDateHead=""),Qa.push(qb);Ha._inCalcTicks=!1;return Qa};var Ea=[2,5,10],Ya=[1,2,3,6,12],ab=[1,2,5,10,15,30],
Wa=[1,2,3,7,14],Ja=[-.046,0,.301,.477,.602,.699,.778,.845,.903,.954,1],Sa=[-.301,0,.301,.699,1],fb=[15,30,45,90,180];cb.autoTicks=function(Ha,Ca){function Qa(db){return Math.pow(db,Math.floor(Math.log(Ca)/Math.LN10))}if("date"===Ha.type){Ha.tick0=O.dateTick0(Ha.calendar,0);var gb=2*Ca;if(gb>ca)Ca/=ca,gb=Qa(10),Ha.dtick="M"+12*k(Ca,gb,Ea);else if(gb>pa)Ca/=pa,Ha.dtick="M"+k(Ca,1,Ya);else if(gb>ya){Ha.dtick=k(Ca,ya,Ha._hasDayOfWeekBreaks?[1,2,7,14]:Wa);gb=cb.getTickFormat(Ha);var Va="period"===Ha.ticklabelmode;
Va&&(Ha._rawTick0=Ha.tick0);/%[uVW]/.test(gb)?Ha.tick0=O.dateTick0(Ha.calendar,2):Ha.tick0=O.dateTick0(Ha.calendar,1);Va&&(Ha._dowTick0=Ha.tick0)}else gb>za?Ha.dtick=k(Ca,za,Ya):gb>Ba?Ha.dtick=k(Ca,Ba,ab):gb>Ma?Ha.dtick=k(Ca,Ma,ab):(gb=Qa(10),Ha.dtick=k(Ca,gb,Ea))}else"log"===Ha.type?(Ha.tick0=0,gb=O.simpleMap(Ha.range,Ha.r2l),.7<Ca?Ha.dtick=Math.ceil(Ca):1>Math.abs(gb[1]-gb[0])?(Ca=Math.abs(Math.pow(10,gb[1])-Math.pow(10,gb[0]))/(1.5*Math.abs((gb[1]-gb[0])/Ca)),gb=Qa(10),Ha.dtick="L"+k(Ca,gb,Ea)):
Ha.dtick=.3<Ca?"D2":"D1"):"category"===Ha.type||"multicategory"===Ha.type?(Ha.tick0=0,Ha.dtick=Math.ceil(Math.max(Ca,1))):"angularaxis"===Ha._id?(Ha.tick0=0,Ha.dtick=k(Ca,1,fb)):(Ha.tick0=0,gb=Qa(10),Ha.dtick=k(Ca,gb,Ea));0===Ha.dtick&&(Ha.dtick=1);if(!Q(Ha.dtick)&&"string"!==typeof Ha.dtick)throw gb=Ha.dtick,Ha.dtick=1,"ax.dtick error: "+String(gb);};cb.tickIncrement=function(Ha,Ca,Qa,gb){var Va=Qa?-1:1;if(Q(Ca))return O.increment(Ha,Va*Ca);var db=Ca.charAt(0),qb=Va*Number(Ca.substr(1));if("M"===
db)return O.incrementMonth(Ha,qb,gb);if("L"===db)return Math.log(Math.pow(10,Ha)+qb)/Math.LN10;if("D"===db)return Ca="D2"===Ca?Sa:Ja,Ha+=.01*Va,Qa=O.roundUp(O.mod(Ha,1),Ca,Qa),Math.floor(Ha)+Math.log(L.round(Math.pow(10,Qa),1))/Math.LN10;throw"unrecognized dtick "+String(Ca);};cb.tickFirst=function(Ha,Ca){var Qa=Ha.r2l||Number,gb=O.simpleMap(Ha.range,Qa,void 0,void 0,Ca),Va=(Ca=gb[1]<gb[0])?Math.floor:Math.ceil;gb=q(gb)[0];var db=Ha.dtick,qb=Qa(Ha.tick0);if(Q(db)){Ca=Va((gb-qb)/db)*db+qb;if("category"===
Ha.type||"multicategory"===Ha.type)Ca=O.constrain(Ca,0,Ha._categories.length-1);return Ca}Qa=db.charAt(0);var Kb=Number(db.substr(1));if("M"===Qa){Va=0;for(var Ob,cc;10>Va;){Ob=cb.tickIncrement(qb,db,Ca,Ha.calendar);if(0>=(Ob-gb)*(qb-gb))return Ca?Math.min(qb,Ob):Math.max(qb,Ob);Ob=(gb-(qb+Ob)/2)/(Ob-qb);cc=Qa+(Math.abs(Math.round(Ob))||1)*Kb;qb=cb.tickIncrement(qb,cc,0>Ob?!Ca:Ca,Ha.calendar);Va++}O.error("tickFirst did not converge",Ha);return qb}if("L"===Qa)return Math.log(Va((Math.pow(10,gb)-qb)/
Kb)*Kb+qb)/Math.LN10;if("D"===Qa)return Ha="D2"===db?Sa:Ja,Ha=O.roundUp(O.mod(gb,1),Ha,Ca),Math.floor(gb)+Math.log(L.round(Math.pow(10,Ha),1))/Math.LN10;throw"unrecognized dtick "+String(db);};cb.tickText=function(Ha,Ca,Qa,gb){function Va(qc){if(void 0===qc)return!0;if(Qa)return"none"===qc;var Pc={first:Ha._tmin,last:Ha._tmax}[qc];return"all"!==qc&&Ca!==Pc}var db=h(Ha,Ca),qb="array"===Ha.tickmode,Kb=Qa||qb,Ob=Ha.type,cc="category"===Ob?Ha.d2l_noadd:Ha.d2l;if(qb&&Array.isArray(Ha.ticktext)){qb=O.simpleMap(Ha.range,
Ha.r2l);var kc=(Math.abs(qb[1]-qb[0])-(Ha._lBreaks||0))/1E4;for(qb=0;qb<Ha.ticktext.length&&!(Math.abs(Ca-cc(Ha.tickvals[qb]))<kc);qb++);if(qb<Ha.ticktext.length)return db.text=String(Ha.ticktext[qb]),db}cc=Qa?"never":"none"!==Ha.exponentformat&&Va(Ha.showexponent)?"hide":"";"date"===Ob?l(Ha,db,Qa,Kb):"log"===Ob?c(Ha,db,Qa,Kb,cc):"category"===Ob?g(Ha,db):"multicategory"===Ob?d(Ha,db,Qa):"angularaxis"===Ha._id?r(Ha,db,Qa,Kb,cc):p(Ha,db,Qa,Kb,cc);gb||(Ha.tickprefix&&!Va(Ha.showtickprefix)&&(db.text=
Ha.tickprefix+db.text),Ha.ticksuffix&&!Va(Ha.showticksuffix)&&(db.text+=Ha.ticksuffix));if("boundaries"===Ha.tickson||Ha.showdividers)gb=function(qc){var Pc=Ha.l2p(qc);return 0<=Pc&&Pc<=Ha._length?qc:null},db.xbnd=[gb(db.x-.5),gb(db.x+Ha.dtick-.5)];return db};cb.hoverLabelText=function(Ha,Ca,Qa){if(Qa!==Ia&&Qa!==Ca)return cb.hoverLabelText(Ha,Ca)+" - "+cb.hoverLabelText(Ha,Qa);Qa="log"===Ha.type&&0>=Ca;Ha=cb.tickText(Ha,Ha.c2l(Qa?-Ca:Ca),"hover").text;return Qa?0===Ca?"0":Oa+Ha:Ha};var nb="f p n μ m  k M G T".split(" ");
cb.getTickFormat=function(Ha){function Ca(Ob){return"string"!==typeof Ob?Ob:Number(Ob.replace("M",""))*pa}function Qa(Ob,cc){var kc=["L","D"];if(typeof Ob===typeof cc){if("number"===typeof Ob)return Ob-cc;var qc=kc.indexOf(Ob.charAt(0));kc=kc.indexOf(cc.charAt(0));return qc===kc?Number(Ob.replace(/(L|D)/g,""))-Number(cc.replace(/(L|D)/g,"")):qc-kc}return"number"===typeof Ob?1:-1}function gb(Ob,cc,kc){kc=kc||function(Pc){return Pc};var qc=cc[0];cc=cc[1];return(!qc&&"number"!==typeof qc||kc(qc)<=kc(Ob))&&
(!cc&&"number"!==typeof cc||kc(cc)>=kc(Ob))}function Va(Ob,cc){var kc=null===cc[0],qc=null===cc[1],Pc=0<=Qa(Ob,cc[0]);Ob=0>=Qa(Ob,cc[1]);return(kc||Pc)&&(qc||Ob)}var db;if(Ha.tickformatstops&&0<Ha.tickformatstops.length)switch(Ha.type){case "date":case "linear":for(db=0;db<Ha.tickformatstops.length;db++){var qb=Ha.tickformatstops[db];if(qb.enabled&&gb(Ha.dtick,qb.dtickrange,Ca)){var Kb=qb;break}}break;case "log":for(db=0;db<Ha.tickformatstops.length;db++)if(qb=Ha.tickformatstops[db],qb.enabled&&Va(Ha.dtick,
qb.dtickrange)){Kb=qb;break}}return Kb?Kb.value:Ha.tickformat};cb.getSubplots=function(Ha,Ca){Ha=Ha._fullLayout._subplots;Ha=Ha.cartesian.concat(Ha.gl2d||[]);Ca=Ca?cb.findSubplotsWithAxis(Ha,Ca):Ha;Ca.sort(function(Qa,gb){Qa=Qa.substr(1).split("y");gb=gb.substr(1).split("y");return Qa[0]===gb[0]?+Qa[1]-+gb[1]:+Qa[0]-+gb[0]});return Ca};cb.findSubplotsWithAxis=function(Ha,Ca){Ca=new RegExp("x"===Ca._id.charAt(0)?"^"+Ca._id+"y":Ca._id+"$");for(var Qa=[],gb=0;gb<Ha.length;gb++){var Va=Ha[gb];Ca.test(Va)&&
Qa.push(Va)}return Qa};cb.makeClipPaths=function(Ha){var Ca=Ha._fullLayout;if(!Ca._hasOnlyLargeSploms){var Qa={_offset:0,_length:Ca.width,_id:""},gb={_offset:0,_length:Ca.height,_id:""},Va=cb.list(Ha,"x",!0);Ha=cb.list(Ha,"y",!0);var db=[],qb,Kb;for(qb=0;qb<Va.length;qb++)for(db.push({x:Va[qb],y:gb}),Kb=0;Kb<Ha.length;Kb++)0===qb&&db.push({x:Qa,y:Ha[Kb]}),db.push({x:Va[qb],y:Ha[Kb]});Qa=Ca._clips.selectAll(".axesclip").data(db,function(Ob){return Ob.x._id+Ob.y._id});Qa.enter().append("clipPath").classed("axesclip",
!0).attr("id",function(Ob){return"clip"+Ca._uid+Ob.x._id+Ob.y._id}).append("rect");Qa.exit().remove();Qa.each(function(Ob){L.select(this).select("rect").attr({x:Ob.x._offset||0,y:Ob.y._offset||0,width:Ob.x._length||1,height:Ob.y._length||1})})}};cb.draw=function(Ha,Ca,Qa){var gb=Ha._fullLayout;"redraw"===Ca&&gb._paper.selectAll("g.subplot").each(function(Va){Va=gb._plots[Va[0]];var db=Va.xaxis,qb=Va.yaxis;Va.xaxislayer.selectAll("."+db._id+"tick").remove();Va.yaxislayer.selectAll("."+qb._id+"tick").remove();
Va.xaxislayer.selectAll("."+db._id+"tick2").remove();Va.yaxislayer.selectAll("."+qb._id+"tick2").remove();Va.xaxislayer.selectAll("."+db._id+"divider").remove();Va.yaxislayer.selectAll("."+qb._id+"divider").remove();Va.gridlayer&&Va.gridlayer.selectAll("path").remove();Va.zerolinelayer&&Va.zerolinelayer.selectAll("path").remove();gb._infolayer.select(".g-"+db._id+"title").remove();gb._infolayer.select(".g-"+qb._id+"title").remove()});Ca=Ca&&"redraw"!==Ca?Ca:cb.listIds(Ha);return O.syncOrAsync(Ca.map(function(Va){return function(){if(Va){var db=
cb.getFromId(Ha,Va),qb=cb.drawOne(Ha,db,Qa);db._r=db.range.slice();db._rl=O.simpleMap(db._r,db.r2l);return qb}}}))};cb.drawOne=function(Ha,Ca,Qa){function gb(xb){xb=qb+(xb||"tick");cd[xb]||(cd[xb]=F(Ca,xb));return cd[xb]}Qa=Qa||{};var Va;Ca.setScale();var db=Ha._fullLayout,qb=Ca._id,Kb=qb.charAt(0),Ob=cb.counterLetter(qb),cc=db._plots[Ca._mainSubplot];if(cc){var kc=cc[Kb+"axislayer"],qc=Ca._mainLinePosition,Pc=Ca._mainMirrorPosition,Qc=Ca._vals=cb.calcTicks(Ca);cc=[Ca.mirror,qc,Pc].join("_");for(Va=
0;Va<Qc.length;Va++)Qc[Va].axInfo=cc;Ca._selections={};Ca._tickAngles&&(Ca._prevTickAngles=Ca._tickAngles);Ca._tickAngles={};Ca._depth=null;var cd={};if(Ca.visible){var gd=cb.makeTransFn(Ca),kd="period"===Ca.ticklabelmode?cb.makeTransPeriodFn(Ca):cb.makeTransFn(Ca);"boundaries"===Ca.tickson?(cc=y(Ca,Qc),Va=cb.clipEnds(Ca,cc),cc="inside"===Ca.ticks?Va:cc):(Va=cb.clipEnds(Ca,Qc),cc="inside"===Ca.ticks?Va:Qc);var Cb=Ca._gridVals=Va,ic=z(Ca,Qc);if(!db._hasOnlyLargeSploms){var sc=Ca._subplotsWith,wb={};
for(Va=0;Va<sc.length;Va++){var zb=sc[Va];var Tb=db._plots[zb];zb=Tb[Ob+"axis"];var lb=zb._mainAxis._id;wb[lb]||(wb[lb]=1,lb="x"===Kb?"M0,"+zb._offset+"v"+zb._length:"M"+zb._offset+",0h"+zb._length,cb.drawGrid(Ha,Ca,{vals:Cb,counterAxis:zb,layer:Tb.gridlayer.select("."+qb),path:lb,transFn:gd}),cb.drawZeroLine(Ha,Ca,{counterAxis:zb,layer:Tb.zerolinelayer,path:lb,transFn:gd}))}}var vb=cb.getTickSigns(Ca);Cb=[];if(Ca.ticks){Va=cb.makeTickPath(Ca,qc,vb[2]);if(Ca._anchorAxis&&Ca.mirror&&!0!==Ca.mirror){var Ub=
cb.makeTickPath(Ca,Pc,vb[3]);var Sb=Va+Ub}else Ub="",Sb=Va;if(Ca.showdividers&&"outside"===Ca.ticks&&"boundaries"===Ca.tickson){var Ab={};for(Va=0;Va<ic.length;Va++)Ab[ic[Va].x]=1;Pc=function(xb){return Ab[xb.x]?Ub:Sb}}else Pc=Sb;cb.drawTicks(Ha,Ca,{vals:cc,layer:kc,path:Pc,transFn:gd});"allticks"===Ca.mirror&&(Cb=Object.keys(Ca._linepositions||{}))}for(Va=0;Va<Cb.length;Va++)zb=Cb[Va],Tb=db._plots[zb],Pc=Ca._linepositions[zb]||[],Pc=cb.makeTickPath(Ca,Pc[0],vb[0])+cb.makeTickPath(Ca,Pc[1],vb[1]),
cb.drawTicks(Ha,Ca,{vals:cc,layer:Tb[Kb+"axislayer"],path:Pc,transFn:gd});cc=[];cc.push(function(){return cb.drawLabels(Ha,Ca,{vals:Qc,layer:kc,transFn:kd,labelFns:cb.makeLabelFns(Ca,qc)})});if("multicategory"===Ca.type){var Eb={x:2,y:10}[Kb];cc.push(function(){var xb={x:"height",y:"width"}[Kb];xb=gb()[xb]+Eb+(Ca._tickAngles[qb+"tick"]?Ca.tickfont.size*Na:0);return cb.drawLabels(Ha,Ca,{vals:A(Ca,Qc),layer:kc,cls:qb+"tick2",repositionOnUpdate:!0,secondary:!0,transFn:gd,labelFns:cb.makeLabelFns(Ca,
qc+xb*vb[4])})});cc.push(function(){Ca._depth=vb[4]*(gb("tick2")[Ca.side]-qc);var xb=cb.makeTickPath(Ca,qc,vb[4],Ca._depth),Jb=Ca._id+"divider",tb=kc.selectAll("path."+Jb).data(ic,D);tb.exit().remove();tb.enter().insert("path",":first-child").classed(Jb,1).classed("crisp",1).call(X.stroke,Ca.dividercolor).style("stroke-width",ba.crispRound(Ha,Ca.dividerwidth,1)+"px");tb.attr("transform",gd).attr("d",xb)})}else Ca.title.hasOwnProperty("standoff")&&cc.push(function(){Ca._depth=vb[4]*(gb()[Ca.side]-
qc)});var Fb=R.getComponentMethod("rangeslider","isVisible")(Ca);cc.push(function(){var xb=Ca.side.charAt(0),Jb=$a[Ca.side].charAt(0),tb=cb.getPxPosition(Ha,Ca),Lb="outside"===Ca.ticks?Ca.ticklen:0,Ib;if(Ca.automargin||Fb)if("multicategory"===Ca.type)var lc=gb("tick2");else lc=gb(),"x"===Kb&&"b"===xb&&(Ca._depth=Math.max(0<lc.width?lc.bottom-tb:0,Lb));if(Ca.automargin){var $b={x:0,y:0,r:0,l:0,t:0,b:0};var nc=[0,1];"x"===Kb?("b"===xb?$b[xb]=Ca._depth:($b[xb]=Ca._depth=Math.max(0<lc.width?tb-lc.top:
0,Lb),nc.reverse()),0<lc.width&&(tb=lc.right-(Ca._offset+Ca._length),0<tb&&($b.xr=1,$b.r=tb),lc=Ca._offset-lc.left,0<lc&&($b.xl=0,$b.l=lc))):("l"===xb?$b[xb]=Ca._depth=Math.max(0<lc.height?tb-lc.left:0,Lb):($b[xb]=Ca._depth=Math.max(0<lc.height?lc.right-tb:0,Lb),nc.reverse()),0<lc.height&&(tb=lc.bottom-(Ca._offset+Ca._length),0<tb&&($b.yb=0,$b.b=tb),lc=Ca._offset-lc.top,0<lc&&($b.yt=1,$b.t=lc)));$b[Ob]="free"===Ca.anchor?Ca.position:Ca._anchorAxis.domain[nc[0]];Ca.title.text!==db._dfltTitle[Kb]&&
($b[xb]+=u(Ca)+(Ca.title.standoff||0));if(Ca.mirror&&"free"!==Ca.anchor){var xc={x:0,y:0,r:0,l:0,t:0,b:0};xc[Jb]=Ca.linewidth;Ca.mirror&&!0!==Ca.mirror&&(xc[Jb]+=Lb);if(!0===Ca.mirror||"ticks"===Ca.mirror)xc[Ob]=Ca._anchorAxis.domain[nc[1]];else if("all"===Ca.mirror||"allticks"===Ca.mirror)xc[Ob]=[Ca._counterDomainMin,Ca._counterDomainMax][nc[1]]}}Fb&&(Ib=R.getComponentMethod("rangeslider","autoMarginOpts")(Ha,Ca));S.autoMargin(Ha,N(Ca),$b);S.autoMargin(Ha,N(Ca)+".mirror",xc);S.autoMargin(Ha,Ca._id+
".rangeslider",Ib)});Qa.skipTitle||Fb&&"bottom"===Ca.side||cc.push(function(){var xb=Ha._fullLayout,Jb=Ca._id,tb=Jb.charAt(0),Lb=Ca.title.font.size;if(Ca.title.hasOwnProperty("standoff"))var Ib=Ca._depth+Ca.title.standoff+u(Ca);else Ib="multicategory"===Ca.type?Ca._depth:10+1.5*Lb+(Ca.linewidth?Ca.linewidth-1:0),Ib="x"===tb?Ib+("top"===Ca.side?Lb*(Ca.showticklabels?1:0):Lb*(Ca.showticklabels?1.5:.5)):Ib+("right"===Ca.side?Lb*(Ca.showticklabels?1:.5):Lb*(Ca.showticklabels?.5:0));var lc=cb.getPxPosition(Ha,
Ca);if("x"===tb){Lb=Ca._offset+Ca._length/2;var $b="top"===Ca.side?lc-Ib:lc+Ib}else{$b=Ca._offset+Ca._length/2;Lb="right"===Ca.side?lc+Ib:lc-Ib;var nc={rotate:"-90",offset:0}}if("multicategory"!==Ca.type){Ib=Ca._selections[Ca._id+"tick"];var xc={selection:Ib,side:Ca.side};Ib&&Ib.node()&&Ib.node().parentNode&&(Ib=ba.getTranslate(Ib.node().parentNode),xc.offsetLeft=Ib.x,xc.offsetTop=Ib.y);Ca.title.hasOwnProperty("standoff")&&(xc.pad=0)}return V.draw(Ha,Jb+"title",{propContainer:Ca,propName:Ca._name+
".title.text",placeholder:xb._dfltTitle[tb],avoid:xc,transform:nc,attributes:{x:Lb,y:$b,"text-anchor":"middle"}})});return O.syncOrAsync(cc)}}};cb.getTickSigns=function(Ha){var Ca=Ha._id.charAt(0),Qa=Ha.side==={x:"top",y:"right"}[Ca]?1:-1;Qa=[-1,1,Qa,-Qa];"inside"!==Ha.ticks===("x"===Ca)&&(Qa=Qa.map(function(gb){return-gb}));Ha.side&&Qa.push({l:-1,t:-1,r:1,b:1}[Ha.side.charAt(0)]);return Qa};cb.makeTransFn=function(Ha){var Ca=Ha._id.charAt(0),Qa=Ha._offset;return"x"===Ca?function(gb){return"translate("+
(Qa+Ha.l2p(gb.x))+",0)"}:function(gb){return"translate(0,"+(Qa+Ha.l2p(gb.x))+")"}};cb.makeTransPeriodFn=function(Ha){var Ca=Ha._id.charAt(0),Qa=Ha._offset;return"x"===Ca?function(gb){return"translate("+(Qa+Ha.l2p(void 0!==gb.periodX?gb.periodX:gb.x))+",0)"}:function(gb){return"translate(0,"+(Qa+Ha.l2p(void 0!==gb.periodX?gb.periodX:gb.x))+")"}};cb.makeTickPath=function(Ha,Ca,Qa,gb){gb=void 0!==gb?gb:Ha.ticklen;var Va=Ha._id.charAt(0);Ha=(Ha.linewidth||1)/2;return"x"===Va?"M0,"+(Ca+Ha*Qa)+"v"+gb*Qa:
"M"+(Ca+Ha*Qa)+",0h"+gb*Qa};cb.makeLabelFns=function(Ha,Ca,Qa){var gb=Ha._id.charAt(0),Va="boundaries"!==Ha.tickson&&"outside"===Ha.ticks,db=0,qb=0;Va&&(db+=Ha.ticklen);Qa&&"outside"===Ha.ticks&&(qb=O.deg2rad(Qa),db=Ha.ticklen*Math.cos(qb)+1,qb=Ha.ticklen*Math.sin(qb));Ha.showticklabels&&(Va||Ha.showline)&&(db+=.2*Ha.tickfont.size);db+=(Ha.linewidth||1)/2;Va={labelStandoff:db,labelShift:qb};if("x"===gb){var Kb="bottom"===Ha.side?1:-1;var Ob=qb*Kb;var cc=Ca+db*Kb;var kc="bottom"===Ha.side?1:-.2;Va.xFn=
function(qc){return qc.dx+Ob};Va.yFn=function(qc){return qc.dy+cc+qc.fontSize*kc};Va.anchorFn=function(qc,Pc){return Q(Pc)&&0!==Pc&&180!==Pc?0>Pc*Kb?"end":"start":"middle"};Va.heightFn=function(qc,Pc,Qc){return-60>Pc||60<Pc?-.5*Qc:"top"===Ha.side?-Qc:0}}else"y"===gb&&(Kb="right"===Ha.side?1:-1,Ob=db,cc=-qb*Kb,kc=90===Math.abs(Ha.tickangle)?.5:0,Va.xFn=function(qc){return qc.dx+Ca+(Ob+qc.fontSize*kc)*Kb},Va.yFn=function(qc){return qc.dy+cc+qc.fontSize*Pa},Va.anchorFn=function(qc,Pc){return Q(Pc)&&
90===Math.abs(Pc)?"middle":"right"===Ha.side?"start":"end"},Va.heightFn=function(qc,Pc,Qc){Pc*="left"===Ha.side?1:-1;return-30>Pc?-Qc:30>Pc?-.5*Qc:0});return Va};cb.drawTicks=function(Ha,Ca,Qa){Qa=Qa||{};var gb=Ca._id+"tick",Va=Qa.vals;"period"===Ca.ticklabelmode&&(Va=Va.slice(),Va.shift());Va=Qa.layer.selectAll("path."+gb).data(Ca.ticks?Va:[],D);Va.exit().remove();Va.enter().append("path").classed(gb,1).classed("ticks",1).classed("crisp",!1!==Qa.crisp).call(X.stroke,Ca.tickcolor).style("stroke-width",
ba.crispRound(Ha,Ca.tickwidth,1)+"px").attr("d",Qa.path);Va.attr("transform",Qa.transFn)};cb.drawGrid=function(Ha,Ca,Qa){Qa=Qa||{};var gb=Ca._id+"grid",Va=Qa.vals,db=Qa.counterAxis;if(!1===Ca.showgrid)Va=[];else if(db&&cb.shouldShowZeroLine(Ha,Ca,db)){db="array"===Ca.tickmode;for(var qb=0;qb<Va.length;qb++){var Kb=Va[qb].x;if(db?!Kb:Math.abs(Kb)<Ca.dtick/100)if(Va=Va.slice(0,qb).concat(Va.slice(qb+1)),db)qb--;else break}}Va=Qa.layer.selectAll("path."+gb).data(Va,D);Va.exit().remove();Va.enter().append("path").classed(gb,
1).classed("crisp",!1!==Qa.crisp);Ca._gw=ba.crispRound(Ha,Ca.gridwidth,1);Va.attr("transform",Qa.transFn).attr("d",Qa.path).call(X.stroke,Ca.gridcolor||"#ddd").style("stroke-width",Ca._gw+"px");"function"===typeof Qa.path&&Va.attr("d",Qa.path)};cb.drawZeroLine=function(Ha,Ca,Qa){Qa=Qa||Qa;var gb=Ca._id+"zl",Va=cb.shouldShowZeroLine(Ha,Ca,Qa.counterAxis);Va=Qa.layer.selectAll("path."+gb).data(Va?[{x:0,id:Ca._id}]:[]);Va.exit().remove();Va.enter().append("path").classed(gb,1).classed("zl",1).classed("crisp",
!1!==Qa.crisp).each(function(){Qa.layer.selectAll("path").sort(function(db,qb){return Ka.idSort(db.id,qb.id)})});Va.attr("transform",Qa.transFn).attr("d",Qa.path).call(X.stroke,Ca.zerolinecolor||X.defaultLine).style("stroke-width",ba.crispRound(Ha,Ca.zerolinewidth,Ca._gw||1)+"px")};cb.drawLabels=function(Ha,Ca,Qa){function gb(kd,Cb){kd.each(function(ic){var sc=L.select(this),wb=sc.select(".text-math-group"),zb=kc.anchorFn(ic,Cb),Tb=Qa.transFn.call(sc.node(),ic)+(Q(Cb)&&0!==+Cb?" rotate("+Cb+","+kc.xFn(ic)+
","+(kc.yFn(ic)-ic.fontSize/2)+")":""),lb=T.lineCount(sc),vb=Na*ic.fontSize;(ic=kc.heightFn(ic,Q(Cb)?+Cb:0,(lb-1)*vb))&&(Tb+=" translate(0, "+ic+")");wb.empty()?sc.select("text").attr({transform:Tb,"text-anchor":zb}):(sc=ba.bBox(wb.node()).width*{end:-.5,start:.5}[zb],wb.attr("transform",Tb+(sc?"translate("+sc+",0)":"")))})}function Va(){gb(Qc,qc);if(cc.length&&"x"===Kb&&!Q(qc)&&("log"!==Ca.type||"D"!==String(Ca.dtick).charAt(0))){var kd=gd=0,Cb=[];Qc.each(function(Tb){kd=Math.max(kd,Tb.fontSize);
Tb=Ca.l2p(Tb.x);var lb=J(this);lb=ba.bBox(lb.node());Cb.push({top:0,bottom:10,height:10,left:Tb-lb.width/2,right:Tb+lb.width/2+2,width:lb.width+2})});if("boundaries"!==Ca.tickson&&!Ca.showdividers||Qa.secondary){var ic=cc.length;var sc=Math.abs((cc[ic-1].x-cc[0].x)*Ca._m)/(ic-1)<2.5*kd||"multicategory"===Ca.type;for(ic=0;ic<Cb.length-1;ic++)if(O.bBoxIntersect(Cb[ic],Cb[ic+1])){gd=sc?90:30;break}}else for(sc=2,Ca.ticks&&(sc+=Ca.tickwidth/2),ic=0;ic<Cb.length;ic++){var wb=cc[ic].xbnd,zb=Cb[ic];if(null!==
wb[0]&&zb.left-Ca.l2p(wb[0])<sc||null!==wb[1]&&Ca.l2p(wb[1])-zb.right<sc){gd=90;break}}gd&&gb(Qc,gd)}}Qa=Qa||{};var db=Ha._fullLayout,qb=Ca._id,Kb=qb.charAt(0),Ob=Qa.cls||qb+"tick",cc=Qa.vals,kc=Qa.labelFns,qc=Qa.secondary?0:Ca.tickangle,Pc=(Ca._prevTickAngles||{})[Ob],Qc=Qa.layer.selectAll("g."+Ob).data(Ca.showticklabels?cc:[],D),cd=[];Qc.enter().append("g").classed(Ob,1).append("text").attr("text-anchor","middle").each(function(kd){var Cb=L.select(this),ic=Ha._promises.length;Cb.call(T.positionText,
kc.xFn(kd),kc.yFn(kd)).call(ba.font,kd.font,kd.fontSize,kd.fontColor).text(kd.text).call(T.convertToTspans,Ha);Ha._promises[ic]?cd.push(Ha._promises.pop().then(function(){gb(Cb,qc)})):gb(Cb,qc)});Qc.exit().remove();Qa.repositionOnUpdate&&Qc.each(function(kd){L.select(this).select("text").call(T.positionText,kc.xFn(kd),kc.yFn(kd))});gb(Qc,Pc+1?Pc:qc);var gd=null;Ca._selections&&(Ca._selections[Ob]=Qc);qb=[function(){return cd.length&&Promise.all(cd)}];Ca.automargin&&db._redrawFromAutoMarginCount&&
90===Pc?(gd=90,qb.push(function(){gb(Qc,Pc)})):qb.push(Va);Ca._tickAngles&&qb.push(function(){Ca._tickAngles[Ob]=null===gd?Q(qc)?qc:0:gd});(db=O.syncOrAsync(qb))&&db.then&&Ha._promises.push(db);return db};cb.getPxPosition=function(Ha,Ca){Ha=Ha._fullLayout._size;var Qa=Ca._id.charAt(0),gb=Ca.side,Va;"free"!==Ca.anchor?Va=Ca._anchorAxis:"x"===Qa?Va={_offset:Ha.t+(1-(Ca.position||0))*Ha.h,_length:0}:"y"===Qa&&(Va={_offset:Ha.l+(Ca.position||0)*Ha.w,_length:0});if("top"===gb||"left"===gb)return Va._offset;
if("bottom"===gb||"right"===gb)return Va._offset+Va._length};cb.shouldShowZeroLine=function(Ha,Ca,Qa){var gb=O.simpleMap(Ca.range,Ca.r2l),Va;if(Va=0>=gb[0]*gb[1]&&Ca.zeroline&&("linear"===Ca.type||"-"===Ca.type)&&!(Ca.rangebreaks&&Ca.maskBreaks(0)===Ia)){if(!(Qa=B(Ca,0)||!I(Ha,Ca,Qa,gb)))a:{Ha=Ha._fullData;Qa=Ca._mainSubplot;Ca=Ca._id.charAt(0);for(gb=0;gb<Ha.length;gb++)if(Va=Ha[gb],!0===Va.visible&&Va.xaxis+Va.yaxis===Qa){if(R.traceIs(Va,"bar-like")&&Va.orientation==={x:"h",y:"v"}[Ca]){Qa=!0;break a}if(Va.fill&&
Va.fill.charAt(Va.fill.length-1)===Ca){Qa=!0;break a}}Qa=!1}Va=Qa}return Va};cb.clipEnds=function(Ha,Ca){return Ca.filter(function(Qa){return B(Ha,Qa.x)})};cb.allowAutoMargin=function(Ha){for(var Ca=cb.list(Ha,"",!0),Qa=0;Qa<Ca.length;Qa++){var gb=Ca[Qa];gb.automargin&&(S.allowAutoMargin(Ha,N(gb)),gb.mirror&&S.allowAutoMargin(Ha,N(gb)+".mirror"));R.getComponentMethod("rangeslider","isVisible")(gb)&&S.allowAutoMargin(Ha,gb._id+".rangeslider")}};cb.swap=function(Ha,Ca){var Qa=[],gb,Va;for(gb=0;gb<Ca.length;gb++){var db=
[],qb=Ha._fullData[Ca[gb]].xaxis,Kb=Ha._fullData[Ca[gb]].yaxis;if(qb&&Kb){for(Va=0;Va<Qa.length;Va++)-1===Qa[Va].x.indexOf(qb)&&-1===Qa[Va].y.indexOf(Kb)||db.push(Va);if(db.length){var Ob=Qa[db[0]];if(1<db.length)for(Va=1;Va<db.length;Va++){var cc=Qa[db[Va]];M(Ob.x,cc.x);M(Ob.y,cc.y)}M(Ob.x,[qb]);M(Ob.y,[Kb])}else Qa.push({x:[qb],y:[Kb]})}}for(Ca=0;Ca<Qa.length;Ca++){var kc;Va=Ha;db=Qa[Ca].x;qb=Qa[Ca].y;Ob=[];cc=[];Kb=Va.layout;for(gb=0;gb<db.length;gb++)Ob.push(cb.getFromId(Va,db[gb]));for(gb=0;gb<
qb.length;gb++)cc.push(cb.getFromId(Va,qb[gb]));var qc=Object.keys(aa),Pc="anchor domain overlaying position side tickangle editType".split(" "),Qc=["linear","log"];for(gb=0;gb<qc.length;gb++){var cd=qc[gb],gd=Ob[0][cd],kd=cc[0][cd],Cb=!0,ic=!1,sc=!1;if("_"!==cd.charAt(0)&&"function"!==typeof gd&&-1===Pc.indexOf(cd)){for(kc=1;kc<Ob.length&&Cb;kc++){var wb=Ob[kc][cd];"type"===cd&&-1!==Qc.indexOf(gd)&&-1!==Qc.indexOf(wb)&&gd!==wb?ic=!0:wb!==gd&&(Cb=!1)}for(kc=1;kc<cc.length&&Cb;kc++)gd=cc[kc][cd],"type"===
cd&&-1!==Qc.indexOf(kd)&&-1!==Qc.indexOf(gd)&&kd!==gd?sc=!0:cc[kc][cd]!==kd&&(Cb=!1);if(Cb){ic&&(Kb[Ob[0]._name].type="linear");sc&&(Kb[cc[0]._name].type="linear");kc=Kb;kd=Ob;Cb=cc;wb=Va._fullLayout._dfltTitle;ic=O.nestedProperty;sc=ic(kc[kd[0]._name],cd).get();gd=ic(kc[Cb[0]._name],cd).get();"title"===cd&&(sc&&sc.text===wb.x&&(sc.text=wb.y),gd&&gd.text===wb.y&&(gd.text=wb.x));for(wb=0;wb<kd.length;wb++)ic(kc,kd[wb]._name+"."+cd).set(gd);for(wb=0;wb<Cb.length;wb++)ic(kc,Cb[wb]._name+"."+cd).set(sc)}}}for(gb=
0;gb<Va._fullLayout.annotations.length;gb++)Ob=Va._fullLayout.annotations[gb],-1!==db.indexOf(Ob.xref)&&-1!==qb.indexOf(Ob.yref)&&O.swapAttrs(Kb.annotations[gb],["?"])}}},{"../../components/color":615,"../../components/drawing":637,"../../components/titles":710,"../../constants/alignment":717,"../../constants/numerical":725,"../../lib":750,"../../lib/svg_text_utils":774,"../../plots/plots":862,"../../registry":882,"./autorange":798,"./axis_autotype":800,"./axis_ids":802,"./clean_ticks":804,"./layout_attributes":813,
"./set_convert":819,d3:169,"fast-isnumeric":241}],800:[function(a,G,C){var q=a("fast-isnumeric"),n=a("../../lib"),m=a("../../constants/numerical").BADNUM;G.exports=function(f,b,k){k=k||{};if(k=!k.noMultiCategory)k=n.isArrayOrTypedArray(f[0])&&n.isArrayOrTypedArray(f[1]);if(k)return"multicategory";k=Math.max(1,(f.length-1)/1E3);for(var e=0,h=0,l={},c=0;c<f.length;c+=k){var g=f[Math.round(c)],d=String(g);l[d]||(l[d]=1,n.isDateTime(g,b)&&(e+=1),q(g)&&(h+=1))}if(e>2*h)return"date";b=Math.max(1,(f.length-
1)/1E3);e=k=0;h={};for(l=0;l<f.length;l+=b)c=f[Math.round(l)],g=String(c),h[g]||(h[g]=1,"boolean"===typeof c?e++:n.cleanNumber(c)!==m?k++:"string"===typeof c&&e++);if(e>2*k)return"category";a:{if(f)for(b=0;b<f.length;b++)if(q(f[b])){f=!0;break a}f=!1}return f?"linear":"-"}},{"../../constants/numerical":725,"../../lib":750,"fast-isnumeric":241}],801:[function(a,G,C){function q(x,y,A){function z(I,J){return b.coerce(x,y,e.rangebreaks,I,J)}if(z("enabled")){var F=z("bounds");if(F&&2<=F.length){var D=
"",u,B;if(2===F.length)for(u=0;2>u;u++)if(B=n(F[u])){D=r;break}D=z("pattern",D);if(D===r)for(u=0;2>u;u++)(B=n(F[u]))&&(y.bounds[u]=F[u]=B-1);if(D)for(u=0;2>u;u++)switch(B=F[u],D){case r:if(!m(B)){y.enabled=!1;return}B=+B;if(B!==Math.floor(B)||0>B||7<=B){y.enabled=!1;return}y.bounds[u]=F[u]=B;break;case t:if(!m(B)){y.enabled=!1;return}B=+B;if(0>B||24<B){y.enabled=!1;return}y.bounds[u]=F[u]=B}!1===A.autorange&&(A=A.range,A[0]<A[1]?F[0]<A[0]&&F[1]>A[1]&&(y.enabled=!1):F[0]>A[0]&&F[1]<A[1]&&(y.enabled=
!1))}else(F=z("values"))&&F.length?z("dvalue"):y.enabled=!1}}function n(x){if("string"===typeof x)return w[x.substr(0,3).toLowerCase()]}var m=a("fast-isnumeric"),f=a("../../registry"),b=a("../../lib"),k=a("../array_container_defaults"),e=a("./layout_attributes"),h=a("./tick_value_defaults"),l=a("./tick_mark_defaults"),c=a("./tick_label_defaults"),g=a("./category_order_defaults"),d=a("./line_grid_defaults"),p=a("./set_convert"),r=a("./constants").WEEKDAY_PATTERN,t=a("./constants").HOUR_PATTERN;G.exports=
function(x,y,A,z,F){var D=z.letter,u=z.font||{},B=z.splomStash||{},I=A("visible",!z.visibleDflt),J=y._template||{};J=y.type||J.type||"-";"date"===J&&f.getComponentMethod("calendars","handleDefaults")(x,y,"calendar",z.calendar);p(y,F);var N=!y.isValidRange(x.range);N&&z.reverseDflt&&(N="reversed");!A("autorange",N)||"linear"!==J&&"-"!==J||A("rangemode");A("range");y.cleanRange();g(x,y,A,z);"category"===J||z.noHover||A("hoverformat");N=A("color");var M=N!==e.color.dflt?N:u.color;D=B.label||F._dfltTitle[D];
c(x,y,A,J,z,{pass:1});if(!I)return y;A("title.text",D);b.coerceFont(A,"title.font",{family:u.family,size:Math.round(1.2*u.size),color:M});h(x,y,A,J);c(x,y,A,J,z,{pass:2});l(x,y,A,z);d(x,y,A,{dfltColor:N,bgColor:z.bgColor,showGrid:z.showGrid,attributes:e});(y.showline||y.ticks)&&A("mirror");z.automargin&&A("automargin");u="multicategory"===J;if(!z.noTickson&&("category"===J||u)&&(y.ticks||y.showgrid)){var E;u&&(E="boundaries");A("tickson",E)}u&&A("showdividers")&&(A("dividercolor"),A("dividerwidth"));
if("date"===J)if(z.noTicklabelmode||A("ticklabelmode"),k(x,y,{name:"rangebreaks",inclusionAttr:"enabled",handleItemDefaults:q}),y.rangebreaks.length){for(x=0;x<y.rangebreaks.length;x++)if(y.rangebreaks[x].pattern===r){y._hasDayOfWeekBreaks=!0;break}p(y,F);if(F._has("scattergl")||F._has("splom"))for(F=0;F<z.data.length;F++)if(x=z.data[F],"scattergl"===x.type||"splom"===x.type)x.visible=!1,b.warn(x.type+" traces do not work on axes with rangebreaks. Setting trace "+x.index+" to `visible: false`.")}else delete y.rangebreaks;
return y};var w={sun:1,mon:2,tue:3,wed:4,thu:5,fri:6,sat:7}},{"../../lib":750,"../../registry":882,"../array_container_defaults":794,"./category_order_defaults":803,"./constants":805,"./layout_attributes":813,"./line_grid_defaults":815,"./set_convert":819,"./tick_label_defaults":820,"./tick_mark_defaults":821,"./tick_value_defaults":822,"fast-isnumeric":241}],802:[function(a,G,C){var q=a("../../registry"),n=a("./constants");C.id2name=function(m){if("string"===typeof m&&m.match(n.AX_ID_PATTERN)){var f=
m.split(" ")[0].substr(1);"1"===f&&(f="");return m.charAt(0)+"axis"+f}};C.name2id=function(m){if(m.match(n.AX_NAME_PATTERN)){var f=m.substr(5);"1"===f&&(f="");return m.charAt(0)+f}};C.cleanId=function(m,f,b){var k=/( domain)$/.test(m);if(!("string"!==typeof m||!m.match(n.AX_ID_PATTERN)||f&&m.charAt(0)!==f||k&&!b))return f=m.split(" ")[0].substr(1).replace(/^0+/,""),"1"===f&&(f=""),m.charAt(0)+f+(k&&b?" domain":"")};C.list=function(m,f,b){var k=m._fullLayout;if(!k)return[];var e=C.listIds(m,f);m=Array(e.length);
var h;for(h=0;h<e.length;h++){var l=e[h];m[h]=k[l.charAt(0)+"axis"+l.substr(1)]}if(!b)for(b=k._subplots.gl3d||[],h=0;h<b.length;h++)e=k[b[h]],f?m.push(e[f+"axis"]):m.push(e.xaxis,e.yaxis,e.zaxis);return m};C.listIds=function(m,f){m=m._fullLayout;if(!m)return[];m=m._subplots;return f?m[f+"axis"]:m.xaxis.concat(m.yaxis)};C.getFromId=function(m,f,b){m=m._fullLayout;f=void 0===f||"string"!==typeof f?f:f.replace(" domain","");"x"===b?f=f.replace(/y[0-9]*/,""):"y"===b&&(f=f.replace(/x[0-9]*/,""));return m[C.id2name(f)]};
C.getFromTrace=function(m,f,b){var k=m._fullLayout,e=null;q.traceIs(f,"gl3d")?(m=f.scene,"scene"===m.substr(0,5)&&(e=k[m][b+"axis"])):e=C.getFromId(m,f[b+"axis"]||b);return e};C.idSort=function(m,f){var b=m.charAt(0),k=f.charAt(0);return b!==k?b>k?1:-1:+(m.substr(1)||1)-+(f.substr(1)||1)};C.getAxisGroup=function(m,f){m=m._axisMatchGroups;for(var b=0;b<m.length;b++)if(m[b][f])return"g"+b;return f};C.ref2id=function(m){return/^[xyz]/.test(m)?m.split(" ")[0]:!1}},{"../../registry":882,"./constants":805}],
803:[function(a,G,C){G.exports=function(q,n,m,f){if("category"===n.type){q=q.categoryarray;q=Array.isArray(q)&&0<q.length;var b;q&&(b="array");b=m("categoryorder",b);var k;"array"===b&&(k=m("categoryarray"));q||"array"!==b||(b=n.categoryorder="trace");if("trace"===b)n._initialCategories=[];else if("array"===b)n._initialCategories=k.slice();else{m=f.dataAttr||n._id.charAt(0);k={};var e;if(f.axData)q=f.axData;else for(q=[],e=0;e<f.data.length;e++){var h=f.data[e];h[m+"axis"]===n._id&&q.push(h)}for(e=
0;e<q.length;e++)for(h=q[e][m],f=0;f<h.length;f++){var l=h[f];null!==l&&void 0!==l&&(k[l]=1)}k=Object.keys(k).sort();"category ascending"===b?n._initialCategories=k:"category descending"===b&&(n._initialCategories=k.reverse())}}}},{}],804:[function(a,G,C){var q=a("fast-isnumeric"),n=a("../../lib");a=a("../../constants/numerical");var m=a.ONEDAY,f=a.ONEWEEK;C.dtick=function(b,k){var e="log"===k,h="date"===k,l="category"===k;k=h?m:1;if(!b)return k;if(q(b))return b=Number(b),0>=b?k:l?Math.max(1,Math.round(b)):
h?Math.max(.1,b):b;if("string"!==typeof b||!h&&!e)return k;l=b.charAt(0);var c=b.substr(1);c=q(c)?Number(c):0;return 0>=c||!(h&&"M"===l&&c===Math.round(c)||e&&"L"===l||e&&"D"===l&&(1===c||2===c))?k:b};C.tick0=function(b,k,e,h){if("date"===k)return n.cleanDate(b,n.dateTick0(e,0===h%f?1:0));if("D1"!==h&&"D2"!==h)return q(b)?Number(b):0}},{"../../constants/numerical":725,"../../lib":750,"fast-isnumeric":241}],805:[function(a,G,C){a=a("../../lib/regex").counter;G.exports={idRegex:{x:a("x","( domain)?"),
y:a("y","( domain)?")},attrRegex:a("[xy]axis"),xAxisMatch:a("xaxis"),yAxisMatch:a("yaxis"),AX_ID_PATTERN:/^[xyz][0-9]*( domain)?$/,AX_NAME_PATTERN:/^[xyz]axis[0-9]*$/,SUBPLOT_PATTERN:/^x([0-9]*)y([0-9]*)$/,HOUR_PATTERN:"hour",WEEKDAY_PATTERN:"day of week",MINDRAG:8,MINSELECT:12,MINZOOM:20,DRAGGERSIZE:20,BENDPX:1.5,REDRAWDELAY:50,SELECTDELAY:100,SELECTID:"-select",DFLTRANGEX:[-1,6],DFLTRANGEY:[-1,4],traceLayerClasses:"imagelayer heatmaplayer contourcarpetlayer contourlayer funnellayer waterfalllayer barlayer carpetlayer violinlayer boxlayer ohlclayer scattercarpetlayer scatterlayer".split(" "),
clipOnAxisFalseQuery:[".scatterlayer",".barlayer",".funnellayer",".waterfalllayer"],layerValue2layerClass:{"above traces":"above","below traces":"below"}}},{"../../lib/regex":766}],806:[function(a,G,C){function q(g,d,p,r,t){var w="range"!==t,x=r[b(d)].type,y;t=[];for(y=0;y<p.length;y++){var A=p[y];if(A!==d){var z=r[b(A)];z.type===x&&(z.fixedrange?w&&z.anchor&&r[b(z.anchor)].fixedrange&&t.push(A):t.push(A))}}for(y=0;y<g.length;y++)if(g[y][d]){g=g[y];d=[];for(y=0;y<t.length;y++)A=t[y],g[A]||d.push(A);
return{linkableAxes:d,thisGroup:g}}return{linkableAxes:t,thisGroup:null}}function n(g,d,p,r,t){var w;if(null===d){d={};d[p]=1;var x=g.length;g.push(d)}else x=g.indexOf(d);var y=Object.keys(d);for(w=0;w<g.length;w++)if(p=g[w],w!==x&&p[r]){var A=p[r];for(w=0;w<y.length;w++)r=y[w],p[r]=A*t*d[r];g.splice(x,1);return}if(1!==t)for(w=0;w<y.length;w++)d[y[w]]*=t;d[r]=1}function m(g,d){var p=g._inputDomain,r=p[0]+(p[1]-p[0])*c[g.constraintoward];g.domain=g._input.domain=[r+(p[0]-r)/d,r+(p[1]-r)/d];g.setScale()}
var f=a("../../lib"),b=a("./axis_ids").id2name,k=a("./scale_zoom"),e=a("./autorange").makePadFn,h=a("./autorange").concatExtremes,l=a("../../constants/numerical").ALMOST_EQUAL,c=a("../../constants/alignment").FROM_BL;C.handleConstraintDefaults=function(g,d,p,r){var t=r.allAxisIds,w=r.layoutOut,x=r.scaleanchorDflt,y=r.constrainDflt;r=w._axisConstraintGroups;var A=w._axisMatchGroups,z=d._id,F=z.charAt(0);F=((w._splomAxes||{})[F]||{})[z]||{};z=d._id;var D=z.charAt(0);y=p("constrain",y);f.coerce(g,d,
{constraintoward:{valType:"enumerated",values:"x"===D?["left","center","right"]:["bottom","middle","top"],dflt:"x"===D?"center":"middle"}},"constraintoward");if((g.matches||F.matches)&&!d.fixedrange){var u=q(A,z,t,w);var B=f.coerce(g,d,{matches:{valType:"enumerated",values:u.linkableAxes||[],dflt:F.matches}},"matches")}if(!(B||d.fixedrange&&"domain"!==y)&&(g.scaleanchor||x)){var I=q(r,z,t,w,y);var J=f.coerce(g,d,{scaleanchor:{valType:"enumerated",values:I.linkableAxes||[]}},"scaleanchor",x)}B?(delete d.constrain,
n(A,u.thisGroup,z,B,1)):-1!==t.indexOf(g.matches)&&f.warn("ignored "+d._name+'.matches: "'+g.matches+'" to avoid either an infinite loop or because the target axis has fixed range.');J?(g=p("scaleratio"),g||(g=d.scaleratio=1),n(r,I.thisGroup,z,J,g)):-1!==t.indexOf(g.scaleanchor)&&f.warn("ignored "+d._name+'.scaleanchor: "'+g.scaleanchor+'" to avoid either an infinite loop and possibly inconsistent scaleratios, or because the target axis has fixed range or this axis declares a *matches* constraint.')};
C.enforce=function(g){var d=g._fullLayout,p=d._axisConstraintGroups||[],r,t,w,x;for(r=0;r<p.length;r++){var y=p[r],A=Object.keys(y),z=Infinity,F=0,D=Infinity,u={},B={},I=!1;for(t=0;t<A.length;t++){var J=A[t];B[J]=w=d[b(J)];w._inputDomain?w.domain=w._inputDomain.slice():w._inputDomain=w.domain.slice();w._inputRange||(w._inputRange=w.range.slice());w.setScale();u[J]=x=Math.abs(w._m)/y[J];z=Math.min(z,x);"domain"!==w.constrain&&w._constraintShrinkable||(D=Math.min(D,x));delete w._constraintShrinkable;
F=Math.max(F,x);"domain"===w.constrain&&(I=!0)}if(!(z>l*F)||I)for(t=0;t<A.length;t++)if(J=A[t],x=u[J],w=B[J],J=w.constrain,x!==D||"domain"===J)if(x/=D,"range"===J)k(w,x);else if(J=w._inputDomain,y=(w.domain[1]-w.domain[0])/(J[1]-J[0]),z=(w.r2l(w.range[1])-w.r2l(w.range[0]))/(w.r2l(w._inputRange[1])-w.r2l(w._inputRange[0])),x/=y,1>x*z)w.domain=w._input.domain=J.slice(),k(w,x);else{1>z&&(w.range=w._input.range=w._inputRange.slice(),x*=z);if(w.autorange){J=w.r2l(w.range[0]);y=w.r2l(w.range[1]);var N=
(J+y)/2;F=z=N;I=Math.abs(y-N);var M=N-I*x*1.0001;N+=I*x*1.0001;var E=e(w);m(w,x);var L=Math.abs(w._m),Q=h(g,w),S=Q.min;Q=Q.max;var R;for(R=0;R<S.length;R++){var O=S[R].val-E(S[R])/L;O>M&&O<z&&(z=O)}for(R=0;R<Q.length;R++)O=Q[R].val+E(Q[R])/L,O<N&&O>F&&(F=O);x/=(F-z)/(2*I);z=w.l2r(z);F=w.l2r(F);w.range=w._input.range=J<y?[z,F]:[F,z]}m(w,x)}}};C.clean=function(g,d){if(d._inputDomain){var p=!1,r=d._id;g=g._fullLayout._axisConstraintGroups;for(var t=0;t<g.length;t++)if(g[t][r]){p=!0;break}p&&"domain"===
d.constrain||(d._input.domain=d.domain=d._inputDomain,delete d._inputDomain)}}},{"../../constants/alignment":717,"../../constants/numerical":725,"../../lib":750,"./autorange":798,"./axis_ids":802,"./scale_zoom":817}],807:[function(a,G,C){function q(ra,qa,Y,pa){qa=D.ensureSingle(ra.draglayer,qa,Y,function(oa){oa.classed("drag",!0).style({fill:"transparent","stroke-width":0}).attr("data-subplot",ra.id)});qa.call(M,pa);return qa.node()}function n(ra,qa,Y,pa,oa,ua,ya){ra=q(ra,"rect",qa,Y);y.select(ra).call(I.setRect,
pa,oa,ua,ya);return ra}function m(ra,qa){for(var Y=0;Y<ra.length;Y++)if(!ra[Y].fixedrange)return qa;return""}function f(ra,qa){var Y=ra.range[qa];qa=Math.abs(Y-ra.range[1-qa]);if("date"===ra.type)return Y;if("log"===ra.type)return ra=Math.ceil(Math.max(0,-Math.log(qa)/Math.LN10))+3,y.format("."+ra+"g")(Math.pow(10,Y));ra=Math.floor(Math.log(Math.abs(Y))/Math.LN10)-Math.floor(Math.log(qa)/Math.LN10)+4;return y.format("."+String(ra)+"g")(Y)}function b(ra,qa,Y,pa,oa){for(var ua=0;ua<ra.length;ua++){var ya=
ra[ua];if(!ya.fixedrange)if(ya.rangebreaks){var ja="y"===ya._id.charAt(0),za=ja?1-Y:Y;pa[ya._name+".range[0]"]=ya.l2r(ya.p2l((ja?1-qa:qa)*ya._length));pa[ya._name+".range[1]"]=ya.l2r(ya.p2l(za*ya._length))}else ja=ya._rl[0],za=ya._rl[1]-ja,pa[ya._name+".range[0]"]=ya.l2r(ja+za*qa),pa[ya._name+".range[1]"]=ya.l2r(ja+za*Y)}oa&&oa.length&&(ra=(qa+(1-Y))/2,b(oa,ra,1-ra,pa,[]))}function k(ra,qa){for(var Y=0;Y<ra.length;Y++){var pa=ra[Y];if(!pa.fixedrange)if(pa.rangebreaks){var oa=pa._length,ua=pa.p2l(0+
qa)-pa.p2l(0);oa=pa.p2l(oa+qa)-pa.p2l(oa);ua=(ua+oa)/2;pa.range=[pa.l2r(pa._rl[0]-ua),pa.l2r(pa._rl[1]-ua)]}else pa.range=[pa.l2r(pa._rl[0]-qa/pa._m),pa.l2r(pa._rl[1]-qa/pa._m)]}}function e(ra,qa,Y){return ra?"nsew"===ra?Y?"":"pan"===qa?"move":"crosshair":ra.toLowerCase()+"-resize":"pointer"}function h(ra,qa,Y,pa,oa){return ra.append("path").attr("class","zoombox").style({fill:.2<qa?"rgba(0,0,0,0)":"rgba(255,255,255,0)","stroke-width":0}).attr("transform","translate("+Y+", "+pa+")").attr("d",oa+"Z")}
function l(ra,qa,Y){return ra.append("path").attr("class","zoombox-corners").style({fill:B.background,stroke:B.defaultLine,"stroke-width":1,opacity:0}).attr("transform","translate("+qa+", "+Y+")").attr("d","M0,0Z")}function c(ra,qa,Y,pa,oa,ua){ra.attr("d",pa+"M"+Y.l+","+Y.t+"v"+Y.h+"h"+Y.w+"v-"+Y.h+"h-"+Y.w+"Z");g(ra,qa,oa,ua)}function g(ra,qa,Y,pa){Y||(ra.transition().style("fill",.2<pa?"rgba(0,0,0,0.4)":"rgba(255,255,255,0.3)").duration(200),qa.transition().style("opacity",1).duration(200))}function d(ra){y.select(ra).selectAll(".zoombox,.js-zoombox-backdrop,.js-zoombox-menu,.zoombox-corners").remove()}
function p(ra){ma&&ra.data&&ra._context.showTips&&(D.notifier(D._(ra,"Double-click to zoom back out"),"long"),ma=!1)}function r(ra){var qa=Math.floor(Math.min(ra.b-ra.t,ra.r-ra.l,sa)/2);return"M"+(ra.l-3.5)+","+(ra.t-.5+qa)+"h3v"+-qa+"h"+qa+"v-3h-"+(qa+3)+"ZM"+(ra.r+3.5)+","+(ra.t-.5+qa)+"h-3v"+-qa+"h"+-qa+"v-3h"+(qa+3)+"ZM"+(ra.r+3.5)+","+(ra.b+.5-qa)+"h-3v"+qa+"h"+-qa+"v3h"+(qa+3)+"ZM"+(ra.l-3.5)+","+(ra.b+.5-qa)+"h3v"+qa+"h"+qa+"v3h-"+(qa+3)+"Z"}function t(ra,qa,Y,pa){for(var oa=!1,ua={},ya={},
ja,za,Ba,Ma,Oa=0;Oa<qa.length;Oa++){var Ia=qa[Oa];for(ja in Y)if(Ia[ja]){for(Ba in Ia)("x"===Ba.charAt(0)?Y:pa)[Ba]||(ua[Ba]=ja);for(za in pa)Ia[za]&&(oa=!0)}for(za in pa)if(Ia[za])for(Ma in Ia)("x"===Ma.charAt(0)?Y:pa)[Ma]||(ya[Ma]=za)}oa&&(D.extendFlat(ua,ya),ya={});qa={};Y=[];for(Ba in ua)pa=V(ra,Ba),Y.push(pa),qa[pa._id]=pa;Ba={};pa=[];for(Ma in ya)ja=V(ra,Ma),pa.push(ja),Ba[ja._id]=ja;return{xaHash:qa,yaHash:Ba,xaxes:Y,yaxes:pa,xLinks:ua,yLinks:ya,isSubplotConstrained:oa}}function w(ra,qa){if(z){var Y=
void 0!==ra.onwheel?"wheel":"mousewheel";ra._onwheel&&ra.removeEventListener(Y,ra._onwheel);ra._onwheel=qa;ra.addEventListener(Y,qa,{passive:!1})}else void 0!==ra.onwheel?ra.onwheel=qa:void 0!==ra.onmousewheel?ra.onmousewheel=qa:ra.isAddedWheelEvent||(ra.isAddedWheelEvent=!0,ra.addEventListener("wheel",qa,{passive:!1}))}function x(ra){var qa=[],Y;for(Y in ra)qa.push(ra[Y]);return qa}var y=a("d3"),A=a("tinycolor2"),z=a("has-passive-events"),F=a("../../registry"),D=a("../../lib"),u=a("../../lib/svg_text_utils"),
B=a("../../components/color"),I=a("../../components/drawing"),J=a("../../components/fx"),N=a("./axes"),M=a("../../lib/setcursor"),E=a("../../components/dragelement");C=a("../../components/dragelement/helpers");var L=C.selectingOrDrawing,Q=C.freeMode,S=a("../../constants/alignment").FROM_TL,R=a("../../lib/clear_gl_canvases"),O=a("../../plot_api/subroutines").redrawReglTraces,T=a("../plots"),V=a("./axis_ids").getFromId,X=a("./select").prepSelect,ba=a("./select").clearSelect,aa=a("./select").selectOnClick,
ka=a("./scale_zoom"),ha=a("./constants"),ca=ha.MINDRAG,sa=ha.MINZOOM,ma=!0;G.exports={makeDragBox:function(ra,qa,Y,pa,oa,ua,ya,ja){function za(){fb=qa.xaxis;nb=qa.yaxis;qb=fb._length;Kb=nb._length;Va=fb._offset;db=nb._offset;Ha={};Ha[fb._id]=fb;Ca={};Ca[nb._id]=nb;if(ya&&ja)for(var $b=qa.overlays,nc=0;nc<$b.length;nc++){var xc=$b[nc].xaxis;Ha[xc._id]=xc;xc=$b[nc].yaxis;Ca[xc._id]=xc}Qa=x(Ha);gb=x(Ca);kc=m(Qa,ja);qc=m(gb,ya);Pc=!qc&&!kc;Ob=t(ra,ra._fullLayout._axisConstraintGroups,Ha,Ca);cc=t(ra,ra._fullLayout._axisMatchGroups,
Ha,Ca);Qc=ja||Ob.isSubplotConstrained||cc.isSubplotConstrained;cd=ya||Ob.isSubplotConstrained||cc.isSubplotConstrained;$b=ra._fullLayout;gd=$b._has("scattergl");kd=$b._has("splom");Cb=$b._has("svg")}function Ba($b,nc){var xc=zb.gd;if(0<=xc._fullLayout._activeShapeIndex)xc._fullLayout._deactivateShape(xc);else{var Bc=xc._fullLayout.clickmode;d(xc);2!==$b||Sa||mb();if(Ja)-1<Bc.indexOf("select")&&aa(nc,xc,Qa,gb,qa.id,zb),-1<Bc.indexOf("event")&&J.click(xc,nc,qa.id);else if(1===$b&&Sa){var Rc=ya?nb:fb;
$b="s"===ya||"w"===ja?0:1;var pd=Rc._name+".range["+$b+"]";$b=f(Rc,$b);nc="left";Bc="middle";if(!Rc.fixedrange&&(ya?(Bc="n"===ya?"top":"bottom","right"===Rc.side&&(nc="right")):"e"===ja&&(nc="right"),xc._context.showAxisRangeEntryBoxes))y.select(wb).call(u.makeEditable,{gd:xc,immediate:!0,background:xc._fullLayout.paper_bgcolor,text:String($b),fill:Rc.tickfont?Rc.tickfont.color:"#444",horizontalAlign:nc,verticalAlign:Bc}).on("edit",function(Vc){Vc=Rc.d2r(Vc);void 0!==Vc&&F.call("_guiRelayout",xc,
pd,Vc)})}}}function Ma($b,nc,xc){$b=wb.getBoundingClientRect();Tb=nc-$b.left;lb=xc-$b.top;vb={l:Tb,r:Tb,w:0,t:lb,b:lb,h:0};Ub=ra._hmpixcount?ra._hmlumcount/ra._hmpixcount:A(ra._fullLayout.plot_bgcolor).getLuminance();Sb="M0,0H"+qb+"V"+Kb+"H0V0";Ab=!1;Eb="xy";Jb=!1;Fb=h(Wa,Ub,Va,db,Sb);xb=l(Wa,Va,db)}function Oa($b,nc){function xc(){Eb="";vb.r=vb.l;vb.t=vb.b;xb.attr("d","M0,0Z")}if(ra._transitioningWithDuration)return!1;$b=Math.max(0,Math.min(qb,$b+Tb));nc=Math.max(0,Math.min(Kb,nc+lb));var Bc=Math.abs($b-
Tb),Rc=Math.abs(nc-lb);vb.l=Math.min(Tb,$b);vb.r=Math.max(Tb,$b);vb.t=Math.min(lb,nc);vb.b=Math.max(lb,nc);Ob.isSubplotConstrained?Bc>sa||Rc>sa?(Eb="xy",Bc/qb>Rc/Kb?(Rc=Bc*Kb/qb,lb>nc?vb.t=lb-Rc:vb.b=lb+Rc):(Bc=Rc*qb/Kb,Tb>$b?vb.l=Tb-Bc:vb.r=Tb+Bc),xb.attr("d",r(vb))):xc():cc.isSubplotConstrained?Bc>sa||Rc>sa?(Eb="xy",$b=Math.min(vb.l/qb,(Kb-vb.b)/Kb),nc=Math.max(vb.r/qb,(Kb-vb.t)/Kb),vb.l=$b*qb,vb.r=nc*qb,vb.b=(1-$b)*Kb,vb.t=(1-nc)*Kb,xb.attr("d",r(vb))):xc():!qc||Rc<Math.min(Math.max(.6*Bc,ca),
sa)?Bc<ca||!kc?xc():(vb.t=0,vb.b=Kb,Eb="x",xb.attr("d","M"+(vb.l-.5)+","+(lb-sa-.5)+"h-3v"+(2*sa+1)+"h3ZM"+(vb.r+.5)+","+(lb-sa-.5)+"h3v"+(2*sa+1)+"h-3Z")):!kc||Bc<Math.min(.6*Rc,sa)?(vb.l=0,vb.r=qb,Eb="y",xb.attr("d","M"+(Tb-sa-.5)+","+(vb.t-.5)+"v-3h"+(2*sa+1)+"v3ZM"+(Tb-sa-.5)+","+(vb.b+.5)+"v3h"+(2*sa+1)+"v-3Z")):(Eb="xy",xb.attr("d",r(vb)));vb.w=vb.r-vb.l;vb.h=vb.b-vb.t;Eb&&(Jb=!0);ra._dragged=Jb;c(Fb,xb,vb,Sb,Ab,Ub);Ia();ra.emit("plotly_relayouting",ic);Ab=!0}function Ia(){ic={};if("xy"===Eb||
"x"===Eb)b(Qa,vb.l/qb,vb.r/qb,ic,Ob.xaxes),$a("x",ic);if("xy"===Eb||"y"===Eb)b(gb,(Kb-vb.b)/Kb,(Kb-vb.t)/Kb,ic,Ob.yaxes),$a("y",ic)}function Pa(){Ia();d(ra);Ka();p(ra)}function Fa($b){function nc(Vc,xd,sd){if(!Vc.fixedrange){var Yc=D.simpleMap(Vc.range,Vc.r2l),Hc=Yc[0]+(Yc[1]-Yc[0])*xd;Vc.range=Yc.map(function(Cd){return Vc.l2r(Hc+(Cd-Hc)*sd)})}}if(ra._context._scrollZoom.cartesian||ra._fullLayout._enablescrollzoom)if(zb.plotinfo.selection=!1,ba(ra),ra._transitioningWithDuration)$b.preventDefault(),
$b.stopPropagation();else{za();clearTimeout(Lb);var xc=-$b.deltaY;isFinite(xc)||(xc=$b.wheelDelta/10);if(isFinite(xc)){xc=Math.exp(-Math.min(Math.max(xc,-20),20)/200);var Bc=lc.draglayer.select(".nsewdrag").node().getBoundingClientRect(),Rc=($b.clientX-Bc.left)/Bc.width;Bc=(Bc.bottom-$b.clientY)/Bc.height;var pd;if(Qc){ja||(Rc=.5);for(pd=0;pd<Qa.length;pd++)nc(Qa[pd],Rc,xc);$a("x");tb[2]*=xc;tb[0]+=tb[2]*Rc*(1/xc-1)}if(cd){ya||(Bc=.5);for(pd=0;pd<gb.length;pd++)nc(gb[pd],Bc,xc);$a("y");tb[3]*=xc;
tb[1]+=tb[3]*(1-Bc)*(1/xc-1)}Ua(tb);cb();ra.emit("plotly_relayouting",ic);Lb=setTimeout(function(){tb=[0,0,qb,Kb];Ka()},Ib);$b.preventDefault()}else D.log("Did not find wheel motion attributes: ",$b)}}function Na($b,nc){function xc(Vc,xd,sd){for(var Yc=1-xd,Hc,Cd,Kd=0;Kd<Vc.length;Kd++){var Ld=Vc[Kd];if(!Ld.fixedrange){Hc=Ld;Cd=sd/Ld._length;Cd=Ld._rl[Yc]+(Ld._rl[xd]-Ld._rl[Yc])/(1-(0<=Cd?Math.min(Cd,.9):1/(1/Math.max(Cd,-.3)+3.222)));var kb=Ld.l2r(Cd);!1!==kb&&void 0!==kb&&(Ld.range[xd]=kb)}}return Hc._length*
(Hc._rl[xd]-Cd)/(Hc._rl[xd]-Hc._rl[Yc])}if(!ra._transitioningWithDuration){ra._fullLayout._replotting=!0;if("ew"===kc||"ns"===qc)kc&&(k(Qa,$b),$a("x")),qc&&(k(gb,nc),$a("y")),Ua([kc?-$b:0,qc?-nc:0,qb,Kb]);else{if(Ob.isSubplotConstrained&&kc&&qc){var Bc="w"===kc===("n"===qc)?1:-1;nc=($b/qb+Bc*nc/Kb)/2;$b=nc*qb;nc=Bc*nc*Kb}"w"===kc?$b=xc(Qa,0,$b):"e"===kc?$b=xc(Qa,1,-$b):kc||($b=0);"n"===qc?nc=xc(gb,1,nc):"s"===qc?nc=xc(gb,0,-nc):qc||(nc=0);Bc="w"===kc?$b:0;var Rc="n"===qc?nc:0;if(Ob.isSubplotConstrained){var pd;
if(!kc&&1===qc.length){for(pd=0;pd<Qa.length;pd++)Qa[pd].range=Qa[pd]._r.slice(),ka(Qa[pd],1-nc/Kb);$b=nc*qb/Kb;Bc=$b/2}if(!qc&&1===kc.length){for(pd=0;pd<gb.length;pd++)gb[pd].range=gb[pd]._r.slice(),ka(gb[pd],1-$b/qb);nc=$b*Kb/qb;Rc=nc/2}}$a("x");$a("y");Ua([Bc,Rc,qb-$b,Kb-nc])}cb();ra.emit("plotly_relayouting",ic)}}function $a($b,nc){var xc=cc.isSubplotConstrained?{x:gb,y:Qa}[$b]:cc[$b+"axes"];$b=cc.isSubplotConstrained?{x:Qa,y:gb}[$b]:[];for(var Bc=0;Bc<xc.length;Bc++){var Rc=xc[Bc],pd=Rc._id;
pd=cc.xLinks[pd]||cc.yLinks[pd];if(pd=$b[0]||Ha[pd]||Ca[pd])nc?(nc[Rc._name+".range[0]"]=nc[pd._name+".range[0]"],nc[Rc._name+".range[1]"]=nc[pd._name+".range[1]"]):Rc.range=pd.range.slice()}}function cb(){function $b(Rc){for(xc=0;xc<Rc.length;xc++)Rc[xc].fixedrange||nc.push(Rc[xc]._id)}var nc=[],xc;Qc&&($b(Qa),$b(Ob.xaxes),$b(cc.xaxes));cd&&($b(gb),$b(Ob.yaxes),$b(cc.yaxes));ic={};for(xc=0;xc<nc.length;xc++){var Bc=V(ra,nc[xc]);N.drawOne(ra,Bc,{skipTitle:!0});ic[Bc._name+".range[0]"]=Bc.range[0];
ic[Bc._name+".range[1]"]=Bc.range[1]}N.redrawComponents(ra,nc)}function mb(){if(!ra._transitioningWithDuration){var $b=ra._context.doubleClick,nc=[];kc&&(nc=nc.concat(Qa));qc&&(nc=nc.concat(gb));cc.xaxes&&(nc=nc.concat(cc.xaxes));cc.yaxes&&(nc=nc.concat(cc.yaxes));var xc={},Bc;if("reset+autosize"===$b)for($b="autosize",Bc=0;Bc<nc.length;Bc++){var Rc=nc[Bc];if(Rc._rangeInitial&&(Rc.range[0]!==Rc._rangeInitial[0]||Rc.range[1]!==Rc._rangeInitial[1])||!Rc._rangeInitial&&!Rc.autorange){$b="reset";break}}if("autosize"===
$b)for(Bc=0;Bc<nc.length;Bc++)Rc=nc[Bc],Rc.fixedrange||(xc[Rc._name+".autorange"]=!0);else if("reset"===$b){if(kc||Ob.isSubplotConstrained)nc=nc.concat(Ob.xaxes);qc&&!Ob.isSubplotConstrained&&(nc=nc.concat(Ob.yaxes));Ob.isSubplotConstrained&&(kc?qc||(nc=nc.concat(gb)):nc=nc.concat(Qa));for(Bc=0;Bc<nc.length;Bc++)Rc=nc[Bc],Rc.fixedrange||(Rc._rangeInitial?($b=Rc._rangeInitial,xc[Rc._name+".range[0]"]=$b[0],xc[Rc._name+".range[1]"]=$b[1]):xc[Rc._name+".autorange"]=!0)}ra.emit("plotly_doubleclick",null);
F.call("_guiRelayout",ra,xc)}}function Ka(){Ua([0,0,qb,Kb]);D.syncOrAsync([T.previousPromises,function(){ra._fullLayout._replotting=!1;F.call("_guiRelayout",ra,ic)}],ra)}function Ua($b){var nc=ra._fullLayout,xc=nc._plots;nc=nc._subplots.cartesian;var Bc;kd&&F.subplotsRegistry.splom.drag(ra);if(gd)for(Bc=0;Bc<nc.length;Bc++){var Rc=xc[nc[Bc]];var pd=Rc.xaxis;var Vc=Rc.yaxis;if(Rc._scene){var xd=D.simpleMap(pd.range,pd.r2l);Vc=D.simpleMap(Vc.range,Vc.r2l);Rc._scene.update({range:[xd[0],Vc[0],xd[1],
Vc[1]]})}}if(kd||gd)R(ra),O(ra);if(Cb){xd=$b[2]/fb._length;var sd=$b[3]/nb._length;for(Bc=0;Bc<nc.length;Bc++){Rc=xc[nc[Bc]];pd=Rc.xaxis;Vc=Rc.yaxis;var Yc=cd&&!Vc.fixedrange&&Ca[Vc._id];if(Qc&&!pd.fixedrange&&Ha[pd._id]){var Hc=xd;var Cd=ja?$b[0]:ab(pd,Hc)}else cc.xaHash[pd._id]?(Hc=xd,Cd=$b[0]*pd._length/fb._length):cc.yaHash[pd._id]?(Hc=sd,Cd="ns"===qc?-$b[1]*pd._length/nb._length:ab(pd,Hc,{n:"top",s:"bottom"}[qc])):(Hc=Ea(pd,xd,sd),Cd=Ya(pd,Hc));if(Yc){Yc=sd;var Kd=ya?$b[1]:ab(Vc,Yc)}else cc.yaHash[Vc._id]?
(Yc=sd,Kd=$b[1]*Vc._length/nb._length):cc.xaHash[Vc._id]?(Yc=xd,Kd="ew"===kc?-$b[0]*Vc._length/fb._length:ab(Vc,Yc,{e:"right",w:"left"}[kc])):(Yc=Ea(Vc,xd,sd),Kd=Ya(Vc,Yc));if(Hc||Yc){Hc||(Hc=1);Yc||(Yc=1);pd=pd._offset-Cd/Hc;Vc=Vc._offset-Kd/Yc;Rc.clipRect.call(I.setTranslate,Cd,Kd).call(I.setScale,Hc,Yc);Rc.plot.call(I.setTranslate,pd,Vc).call(I.setScale,1/Hc,1/Yc);if(Hc!==Rc.xScaleFactor||Yc!==Rc.yScaleFactor)I.setPointGroupScale(Rc.zoomScalePts,Hc,Yc),I.setTextPointsScale(Rc.zoomScaleTxt,Hc,Yc);
I.hideOutsideRangePoints(Rc.clipOnAxisFalseTraces,Rc);Rc.xScaleFactor=Hc;Rc.yScaleFactor=Yc}}}}function Ea($b,nc,xc){return $b.fixedrange?0:Qc&&Ob.xaHash[$b._id]?nc:cd&&(Ob.isSubplotConstrained?Ob.xaHash:Ob.yaHash)[$b._id]?xc:0}function Ya($b,nc){return nc?($b.range=$b._r.slice(),ka($b,nc),ab($b,nc)):0}function ab($b,nc,xc){return $b._length*(1-nc)*S[xc||$b.constraintoward||"middle"]}var Wa=ra._fullLayout._zoomlayer,Ja="nsew"===ya+ja,Sa=1===(ya+ja).length,fb,nb,Ha,Ca,Qa,gb,Va,db,qb,Kb,Ob,cc,kc,qc,
Pc,Qc,cd,gd,kd,Cb,ic;za();var sc=e(qc+kc,ra._fullLayout.dragmode,Ja),wb=n(qa,ya+ja+"drag",sc,Y,pa,oa,ua);if(Pc&&!Ja)return wb.onmousedown=null,wb.style.pointerEvents="none",wb;var zb={element:wb,gd:ra,plotinfo:qa,prepFn:function($b,nc,xc){var Bc=zb.dragmode,Rc=ra._fullLayout.dragmode;Rc!==Bc&&(zb.dragmode=Rc);za();Pc||(Ja?$b.shiftKey?"pan"===Rc?Rc="zoom":L(Rc)||(Rc="pan"):$b.ctrlKey&&(Rc="pan"):Rc="pan");Q(Rc)?zb.minDrag=1:zb.minDrag=void 0;L(Rc)?(zb.xaxes=Qa,zb.yaxes=gb,X($b,nc,xc,zb,Rc)):(zb.clickFn=
Ba,L(Bc)&&(zb.plotinfo.selection=!1,ba(ra)),Pc||("zoom"===Rc?(zb.moveFn=Oa,zb.doneFn=Pa,zb.minDrag=1,Ma($b,nc,xc)):"pan"===Rc&&(zb.moveFn=Na,zb.doneFn=Ka)));ra._fullLayout._redrag=function(){var pd=ra._dragdata;pd&&pd.element===wb&&!L(ra._fullLayout.dragmode)&&(za(),Ua([0,0,qb,Kb]),zb.moveFn(pd.dx,pd.dy))}}};E.init(zb);var Tb,lb,vb,Ub,Sb,Ab,Eb,Fb,xb,Jb,tb=[0,0,qb,Kb],Lb=null,Ib=ha.REDRAWDELAY,lc=qa.mainplot?ra._fullLayout._plots[qa.mainplot]:qa;1!==ya.length*ja.length&&w(wb,Fa);return wb},makeDragger:q,
makeRectDragger:n,makeZoombox:h,makeCorners:l,updateZoombox:c,xyCorners:r,transitionZoombox:g,removeZoombox:d,showDoubleClickNotifier:p,attachWheelEventHandler:w}},{"../../components/color":615,"../../components/dragelement":634,"../../components/dragelement/helpers":633,"../../components/drawing":637,"../../components/fx":655,"../../constants/alignment":717,"../../lib":750,"../../lib/clear_gl_canvases":734,"../../lib/setcursor":770,"../../lib/svg_text_utils":774,"../../plot_api/subroutines":789,
"../../registry":882,"../plots":862,"./axes":799,"./axis_ids":802,"./constants":805,"./scale_zoom":817,"./select":818,d3:169,"has-passive-events":415,tinycolor2:548}],808:[function(a,G,C){var q=a("d3"),n=a("../../components/fx"),m=a("../../components/dragelement"),f=a("../../lib/setcursor"),b=a("./dragbox").makeDragBox,k=a("./constants").DRAGGERSIZE;C.initInteractions=function(e){var h=e._fullLayout;if(e._context.staticPlot)q.select(e).selectAll(".drag").remove();else if(h._has("cartesian")||h._has("splom")){Object.keys(h._plots||
{}).sort(function(c,g){return(h._plots[c].mainplot&&!0)===(h._plots[g].mainplot&&!0)?(c=c.split("y"),g=g.split("y"),c[0]===g[0]?Number(c[1]||1)-Number(g[1]||1):Number(c[0]||1)-Number(g[0]||1)):h._plots[c].mainplot?1:-1}).forEach(function(c){var g=h._plots[c],d=g.xaxis,p=g.yaxis;if(!g.mainplot){var r=b(e,g,d._offset,p._offset,d._length,p._length,"ns","ew");r.onmousemove=function(w){e._fullLayout._rehover=function(){e._fullLayout._hoversubplot===c&&e._fullLayout._plots[c]&&n.hover(e,w,c)};n.hover(e,
w,c);e._fullLayout._lasthover=r;e._fullLayout._hoversubplot=c};r.onmouseout=function(w){e._dragging||(e._fullLayout._hoversubplot=null,m.unhover(e,w))};e._context.showAxisDragHandles&&(b(e,g,d._offset-k,p._offset-k,k,k,"n","w"),b(e,g,d._offset+d._length,p._offset-k,k,k,"n","e"),b(e,g,d._offset-k,p._offset+p._length,k,k,"s","w"),b(e,g,d._offset+d._length,p._offset+p._length,k,k,"s","e"))}if(e._context.showAxisDragHandles){if(c===d._mainSubplot){var t=d._mainLinePosition;"top"===d.side&&(t-=k);b(e,
g,d._offset+.1*d._length,t,.8*d._length,k,"","ew");b(e,g,d._offset,t,.1*d._length,k,"","w");b(e,g,d._offset+.9*d._length,t,.1*d._length,k,"","e")}c===p._mainSubplot&&(d=p._mainLinePosition,"right"!==p.side&&(d-=k),b(e,g,d,p._offset+.1*p._length,k,.8*p._length,"ns",""),b(e,g,d,p._offset+.9*p._length,k,.1*p._length,"s",""),b(e,g,d,p._offset,k,.1*p._length,"n",""))}});var l=h._hoverlayer.node();l.onmousemove=function(c){c.target=e._fullLayout._lasthover;n.hover(e,c,h._hoversubplot)};l.onclick=function(c){c.target=
e._fullLayout._lasthover;n.click(e,c)};l.onmousedown=function(c){e._fullLayout._lasthover.onmousedown(c)};C.updateFx(e)}};C.updateFx=function(e){e=e._fullLayout;f(e._draggers,"pan"===e.dragmode?"move":"crosshair")}},{"../../components/dragelement":634,"../../components/fx":655,"../../lib/setcursor":770,"./constants":805,"./dragbox":807,d3:169}],809:[function(a,G,C){G.exports={clearOutlineControllers:function(q){(q=q._fullLayout._zoomlayer)&&q.selectAll(".outline-controllers").remove()},clearSelect:function(q){var n=
q._fullLayout._zoomlayer;n&&n.selectAll(".select-outline").remove();q._fullLayout._drawing=!1}}},{}],810:[function(a,G,C){function q(n,m){switch(n.type){case "log":return n.p2d(m);case "date":return n.p2r(m,0,n.calendar);default:return n.p2r(m)}}G.exports={p2r:q,r2p:function(n,m){switch(n.type){case "log":return n.d2p(m);case "date":return n.r2p(m,0,n.calendar);default:return n.r2p(m)}},axValue:function(n){var m="y"===n._id.charAt(0)?1:0;return function(f){return q(n,f[m])}},getTransform:function(n){return"translate("+
n.xaxis._offset+","+n.yaxis._offset+")"}}},{}],811:[function(a,G,C){var q=a("../../registry"),n=a("../../lib"),m=a("./axis_ids");G.exports=function(f){return function(b,k){b=b[f];if(Array.isArray(b)){var e=q.subplotsRegistry.cartesian,h=e.idRegex,l=k._subplots,c=l.xaxis,g=l.yaxis;l=l.cartesian;for(var d=k._has("cartesian")||k._has("gl2d"),p=0;p<b.length;p++){var r=b[p];if(n.isPlainObject(r)){var t=m.cleanId(r.xref,"x",!1);r=m.cleanId(r.yref,"y",!1);var w=h.x.test(t),x=h.y.test(r);if(w||x){d||n.pushUnique(k._basePlotModules,
e);var y=!1;w&&-1===c.indexOf(t)&&(c.push(t),y=!0);x&&-1===g.indexOf(r)&&(g.push(r),y=!0);y&&w&&x&&l.push(t+r)}}}}}}},{"../../lib":750,"../../registry":882,"./axis_ids":802}],812:[function(a,G,C){function q(x,y,A){return l.ensureSingle(x,y,A,function(z){z.datum(A)})}function n(x,y,A,z,F){for(var D=r.traceLayerClasses,u=x._fullLayout,B=u._modules,I,J,N=[],M=[],E=0;E<B.length;E++){I=B[E];J=I.name;var L=h.modules[J].categories;if(L.svg){var Q=I.layerName||J+"layer";I=I.plot;A=d(A,I);J=A[0];A=A[1];J.length&&
N.push({i:D.indexOf(Q),className:Q,plotMethod:I,cdModule:J});L.zoomScale&&M.push("."+Q)}}N.sort(function(S,R){return S.i-R.i});D=y.plot.selectAll("g.mlayer").data(N,function(S){return S.className});D.enter().append("g").attr("class",function(S){return S.className}).classed("mlayer",!0).classed("rangeplot",y.isRangePlot);D.exit().remove();D.order();D.each(function(S){var R=e.select(this),O=S.className;S.plotMethod(x,y,S.cdModule,R,z,F);-1===r.clipOnAxisFalseQuery.indexOf("."+O)&&g.setClipUrl(R,y.layerClipId,
x)});u._has("scattergl")&&(I=h.getModule("scattergl"),J=d(A,I)[0],I.plot(x,y,J));x._context.staticPlot||(y._hasClipOnAxisFalse&&(y.clipOnAxisFalseTraces=y.plot.selectAll(r.clipOnAxisFalseQuery.join(",")).selectAll(".trace")),M.length&&(u=y.plot.selectAll(M.join(",")).selectAll(".trace"),y.zoomScalePts=u.selectAll("path.point"),y.zoomScaleTxt=u.selectAll(".textpoint")))}function m(x){x=x._fullLayout;var y=x._subplots.cartesian,A=y.length,z,F=[],D=[];for(z=0;z<A;z++){var u=y[z];var B=x._plots[u];var I=
B.xaxis;var J=B.yaxis;I=I._mainAxis._id+J._mainAxis._id;J=x._plots[I];B.overlays=[];I!==u&&J?(B.mainplot=I,B.mainplotinfo=J,D.push(u)):(B.mainplot=void 0,B.mainplotinfo=void 0,F.push(u))}for(z=0;z<D.length;z++)u=D[z],B=x._plots[u],B.mainplotinfo.overlays.push(B);y=F.concat(D);F=Array(A);for(z=0;z<A;z++){u=y[z];B=x._plots[u];I=B.xaxis;J=B.yaxis;I=[u,I.layer,J.layer,I.overlaying||"",J.overlaying||""];for(u=0;u<B.overlays.length;u++)I.push(B.overlays[u].id);F[z]=I}return F}function f(x,y){var A=y.plotgroup,
z=y.id,F=r.layerValue2layerClass[y.xaxis.layer],D=r.layerValue2layerClass[y.yaxis.layer];x=x._fullLayout._hasOnlyLargeSploms;if(y.mainplot){A=y.mainplotinfo;var u=A.plotgroup,B=z+"-x",I=z+"-y";y.gridlayer=A.gridlayer;y.zerolinelayer=A.zerolinelayer;w(A.overlinesBelow,"path",B);w(A.overlinesBelow,"path",I);w(A.overaxesBelow,"g",B);w(A.overaxesBelow,"g",I);y.plot=w(A.overplot,"g",z);w(A.overlinesAbove,"path",B);w(A.overlinesAbove,"path",I);w(A.overaxesAbove,"g",B);w(A.overaxesAbove,"g",I);y.xlines=
u.select(".overlines-"+F).select("."+B);y.ylines=u.select(".overlines-"+D).select("."+I);y.xaxislayer=u.select(".overaxes-"+F).select("."+B);y.yaxislayer=u.select(".overaxes-"+D).select("."+I)}else x?(y.xlines=w(A,"path","xlines-above"),y.ylines=w(A,"path","ylines-above"),y.xaxislayer=w(A,"g","xaxislayer-above"),y.yaxislayer=w(A,"g","yaxislayer-above")):(z=w(A,"g","layer-subplot"),y.shapelayer=w(z,"g","shapelayer"),y.imagelayer=w(z,"g","imagelayer"),y.gridlayer=w(A,"g","gridlayer"),y.zerolinelayer=
w(A,"g","zerolinelayer"),w(A,"path","xlines-below"),w(A,"path","ylines-below"),y.overlinesBelow=w(A,"g","overlines-below"),w(A,"g","xaxislayer-below"),w(A,"g","yaxislayer-below"),y.overaxesBelow=w(A,"g","overaxes-below"),y.plot=w(A,"g","plot"),y.overplot=w(A,"g","overplot"),y.xlines=w(A,"path","xlines-above"),y.ylines=w(A,"path","ylines-above"),y.overlinesAbove=w(A,"g","overlines-above"),w(A,"g","xaxislayer-above"),w(A,"g","yaxislayer-above"),y.overaxesAbove=w(A,"g","overaxes-above"),y.xlines=A.select(".xlines-"+
F),y.ylines=A.select(".ylines-"+D),y.xaxislayer=A.select(".xaxislayer-"+F),y.yaxislayer=A.select(".yaxislayer-"+D));x||(q(y.gridlayer,"g",y.xaxis._id),q(y.gridlayer,"g",y.yaxis._id),y.gridlayer.selectAll("g").map(function(J){return J[0]}).sort(p.idSort));y.xlines.style("fill","none").classed("crisp",!0);y.ylines.style("fill","none").classed("crisp",!0)}function b(x,y){if(x){var A={};x.each(function(u){u=u[0];e.select(this).remove();k(u,y);A[u]=!0});for(var z in y._plots){x=y._plots[z].overlays||[];
for(var F=0;F<x.length;F++){var D=x[F];A[D.id]&&D.plot.selectAll(".trace").remove()}}}}function k(x,y){y._draggers.selectAll("g."+x).remove();y._defs.select("#clip"+y._uid+x+"plot").remove()}var e=a("d3"),h=a("../../registry"),l=a("../../lib"),c=a("../plots"),g=a("../../components/drawing"),d=a("../get_data").getModuleCalcData,p=a("./axis_ids"),r=a("./constants"),t=a("../../constants/xmlns_namespaces"),w=l.ensureSingle;C.name="cartesian";C.attr=["xaxis","yaxis"];C.idRoot=["x","y"];C.idRegex=r.idRegex;
C.attrRegex=r.attrRegex;C.attributes=a("./attributes");C.layoutAttributes=a("./layout_attributes");C.supplyLayoutDefaults=a("./layout_defaults");C.transitionAxes=a("./transition_axes");C.finalizeSubplots=function(x,y){var A=y._subplots;y=A.xaxis;var z=A.yaxis,F=A.cartesian;A=F.concat(A.gl2d||[]);var D={},u={},B;for(B=0;B<A.length;B++){var I=A[B].split("y");D[I[0]]=1;u["y"+I[1]]=1}for(B=0;B<y.length;B++)if(I=y[B],!D[I]){var J=(x[p.id2name(I)]||{}).anchor;r.idRegex.y.test(J)||(J="y");F.push(I+J);A.push(I+
J);u[J]||(u[J]=1,l.pushUnique(z,J))}for(B=0;B<z.length;B++)J=z[B],u[J]||(I=(x[p.id2name(J)]||{}).anchor,r.idRegex.x.test(I)||(I="x"),F.push(I+J),A.push(I+J),D[I]||(D[I]=1,l.pushUnique(y,I)));if(!A.length){J=I="";for(var N in x)if(r.attrRegex.test(N))if("x"===N.charAt(0)){if(!I||+N.substr(5)<+I.substr(5))I=N}else if(!J||+N.substr(5)<+J.substr(5))J=N;I=I?p.name2id(I):"x";J=J?p.name2id(J):"y";y.push(I);z.push(J);F.push(I+J)}};C.plot=function(x,y,A,z){var F=x._fullLayout,D=F._subplots.cartesian,u=x.calcdata,
B;if(!Array.isArray(y))for(y=[],B=0;B<u.length;B++)y.push(B);for(B=0;B<D.length;B++){for(var I=D[B],J=F._plots[I],N=[],M,E=0;E<u.length;E++){var L=u[E],Q=L[0].trace;if(Q.xaxis+Q.yaxis===I){if(-1!==y.indexOf(Q.index)||Q.carpet)M&&M[0].trace.xaxis+M[0].trace.yaxis===I&&-1!==["tonextx","tonexty","tonext"].indexOf(Q.fill)&&-1===N.indexOf(M)&&N.push(M),N.push(L);M=L}}n(x,J,N,A,z)}};C.clean=function(x,y,A,z){var F=z._plots||{};x=y._plots||{};A=z._subplots||{};var D;if(z._hasOnlyLargeSploms&&!y._hasOnlyLargeSploms)for(D in F){var u=
F[D];u.plotgroup&&u.plotgroup.remove()}u=z._has&&z._has("gl");var B=y._has&&y._has("gl");if(u&&!B)for(D in F)u=F[D],u._scene&&u._scene.destroy();if(A.xaxis&&A.yaxis)for(F=p.listIds({_fullLayout:z}),D=0;D<F.length;D++)u=F[D],y[p.id2name(u)]||z._infolayer.selectAll(".g-"+u+"title").remove();D=z._has&&z._has("cartesian");y=y._has&&y._has("cartesian");if(D&&!y)b(z._cartesianlayer.selectAll(".subplot"),z),z._defs.selectAll(".axesclip").remove(),delete z._axisConstraintGroups;else if(A.cartesian)for(D=
0;D<A.cartesian.length;D++)y=A.cartesian[D],x[y]||(z._cartesianlayer.selectAll("."+y+",."+y+"-x,."+y+"-y").remove(),k(y,z))};C.drawFramework=function(x){var y=x._fullLayout,A=m(x);A=y._cartesianlayer.selectAll(".subplot").data(A,String);A.enter().append("g").attr("class",function(z){return"subplot "+z[0]});A.order();A.exit().call(b,y);A.each(function(z){z=z[0];var F=y._plots[z];F.plotgroup=e.select(this);f(x,F);F.draglayer=w(y._draggers,"g",z)})};C.rangePlot=function(x,y,A){f(x,y);n(x,y,A);c.style(x)};
C.toSVG=function(x){var y=x._fullLayout._glimages,A=e.select(x).selectAll(".svg-container");A.filter(function(z,F){return F===A.size()-1}).selectAll(".gl-canvas-context, .gl-canvas-focus").each(function(){var z=this.toDataURL("image/png");y.append("svg:image").attr({xmlns:t.svg,"xlink:href":z,preserveAspectRatio:"none",x:0,y:0,width:this.width,height:this.height})})};C.updateFx=a("./graph_interact").updateFx},{"../../components/drawing":637,"../../constants/xmlns_namespaces":726,"../../lib":750,"../../registry":882,
"../get_data":836,"../plots":862,"./attributes":797,"./axis_ids":802,"./constants":805,"./graph_interact":808,"./layout_attributes":813,"./layout_defaults":814,"./transition_axes":823,d3:169}],813:[function(a,G,C){C=a("../font_attributes");var q=a("../../components/color/attributes"),n=a("../../components/drawing/attributes").dash,m=a("../../lib/extend").extendFlat,f=a("../../plot_api/plot_template").templatedArray;a("../../constants/docs");a("../../constants/docs");var b=a("../../constants/numerical").ONEDAY;
a=a("./constants");var k=a.HOUR_PATTERN,e=a.WEEKDAY_PATTERN;G.exports={visible:{valType:"boolean",editType:"plot"},color:{valType:"color",dflt:q.defaultLine,editType:"ticks"},title:{text:{valType:"string",editType:"ticks"},font:C({editType:"ticks"}),standoff:{valType:"number",min:0,editType:"ticks"},editType:"ticks"},type:{valType:"enumerated",values:"- linear log date category multicategory".split(" "),dflt:"-",editType:"calc",_noTemplating:!0},autorange:{valType:"enumerated",values:[!0,!1,"reversed"],
dflt:!0,editType:"axrange",impliedEdits:{"range[0]":void 0,"range[1]":void 0}},rangemode:{valType:"enumerated",values:["normal","tozero","nonnegative"],dflt:"normal",editType:"plot"},range:{valType:"info_array",items:[{valType:"any",editType:"axrange",impliedEdits:{"^autorange":!1},anim:!0},{valType:"any",editType:"axrange",impliedEdits:{"^autorange":!1},anim:!0}],editType:"axrange",impliedEdits:{autorange:!1},anim:!0},fixedrange:{valType:"boolean",dflt:!1,editType:"calc"},scaleanchor:{valType:"enumerated",
values:[a.idRegex.x.toString(),a.idRegex.y.toString()],editType:"plot"},scaleratio:{valType:"number",min:0,dflt:1,editType:"plot"},constrain:{valType:"enumerated",values:["range","domain"],dflt:"range",editType:"plot"},constraintoward:{valType:"enumerated",values:"left center right top middle bottom".split(" "),editType:"plot"},matches:{valType:"enumerated",values:[a.idRegex.x.toString(),a.idRegex.y.toString()],editType:"calc"},rangebreaks:f("rangebreak",{enabled:{valType:"boolean",dflt:!0,editType:"calc"},
bounds:{valType:"info_array",items:[{valType:"any",editType:"calc"},{valType:"any",editType:"calc"}],editType:"calc"},pattern:{valType:"enumerated",values:[e,k,""],editType:"calc"},values:{valType:"info_array",freeLength:!0,editType:"calc",items:{valType:"any",editType:"calc"}},dvalue:{valType:"number",editType:"calc",min:0,dflt:b},editType:"calc"}),tickmode:{valType:"enumerated",values:["auto","linear","array"],editType:"ticks",impliedEdits:{tick0:void 0,dtick:void 0}},nticks:{valType:"integer",
min:0,dflt:0,editType:"ticks"},tick0:{valType:"any",editType:"ticks",impliedEdits:{tickmode:"linear"}},dtick:{valType:"any",editType:"ticks",impliedEdits:{tickmode:"linear"}},tickvals:{valType:"data_array",editType:"ticks"},ticktext:{valType:"data_array",editType:"ticks"},ticks:{valType:"enumerated",values:["outside","inside",""],editType:"ticks"},tickson:{valType:"enumerated",values:["labels","boundaries"],dflt:"labels",editType:"ticks"},ticklabelmode:{valType:"enumerated",values:["instant","period"],
dflt:"instant",editType:"ticks"},mirror:{valType:"enumerated",values:[!0,"ticks",!1,"all","allticks"],dflt:!1,editType:"ticks+layoutstyle"},ticklen:{valType:"number",min:0,dflt:5,editType:"ticks"},tickwidth:{valType:"number",min:0,dflt:1,editType:"ticks"},tickcolor:{valType:"color",dflt:q.defaultLine,editType:"ticks"},showticklabels:{valType:"boolean",dflt:!0,editType:"ticks"},automargin:{valType:"boolean",dflt:!1,editType:"ticks"},showspikes:{valType:"boolean",dflt:!1,editType:"modebar"},spikecolor:{valType:"color",
dflt:null,editType:"none"},spikethickness:{valType:"number",dflt:3,editType:"none"},spikedash:m({},n,{dflt:"dash",editType:"none"}),spikemode:{valType:"flaglist",flags:["toaxis","across","marker"],dflt:"toaxis",editType:"none"},spikesnap:{valType:"enumerated",values:["data","cursor","hovered data"],dflt:"data",editType:"none"},tickfont:C({editType:"ticks"}),tickangle:{valType:"angle",dflt:"auto",editType:"ticks"},tickprefix:{valType:"string",dflt:"",editType:"ticks"},showtickprefix:{valType:"enumerated",
values:["all","first","last","none"],dflt:"all",editType:"ticks"},ticksuffix:{valType:"string",dflt:"",editType:"ticks"},showticksuffix:{valType:"enumerated",values:["all","first","last","none"],dflt:"all",editType:"ticks"},showexponent:{valType:"enumerated",values:["all","first","last","none"],dflt:"all",editType:"ticks"},exponentformat:{valType:"enumerated",values:"none e E power SI B".split(" "),dflt:"B",editType:"ticks"},minexponent:{valType:"number",dflt:3,min:0,editType:"ticks"},separatethousands:{valType:"boolean",
dflt:!1,editType:"ticks"},tickformat:{valType:"string",dflt:"",editType:"ticks"},tickformatstops:f("tickformatstop",{enabled:{valType:"boolean",dflt:!0,editType:"ticks"},dtickrange:{valType:"info_array",items:[{valType:"any",editType:"ticks"},{valType:"any",editType:"ticks"}],editType:"ticks"},value:{valType:"string",dflt:"",editType:"ticks"},editType:"ticks"}),hoverformat:{valType:"string",dflt:"",editType:"none"},showline:{valType:"boolean",dflt:!1,editType:"ticks+layoutstyle"},linecolor:{valType:"color",
dflt:q.defaultLine,editType:"layoutstyle"},linewidth:{valType:"number",min:0,dflt:1,editType:"ticks+layoutstyle"},showgrid:{valType:"boolean",editType:"ticks"},gridcolor:{valType:"color",dflt:q.lightLine,editType:"ticks"},gridwidth:{valType:"number",min:0,dflt:1,editType:"ticks"},zeroline:{valType:"boolean",editType:"ticks"},zerolinecolor:{valType:"color",dflt:q.defaultLine,editType:"ticks"},zerolinewidth:{valType:"number",dflt:1,editType:"ticks"},showdividers:{valType:"boolean",dflt:!0,editType:"ticks"},
dividercolor:{valType:"color",dflt:q.defaultLine,editType:"ticks"},dividerwidth:{valType:"number",dflt:1,editType:"ticks"},anchor:{valType:"enumerated",values:["free",a.idRegex.x.toString(),a.idRegex.y.toString()],editType:"plot"},side:{valType:"enumerated",values:["top","bottom","left","right"],editType:"plot"},overlaying:{valType:"enumerated",values:["free",a.idRegex.x.toString(),a.idRegex.y.toString()],editType:"plot"},layer:{valType:"enumerated",values:["above traces","below traces"],dflt:"above traces",
editType:"plot"},domain:{valType:"info_array",items:[{valType:"number",min:0,max:1,editType:"plot"},{valType:"number",min:0,max:1,editType:"plot"}],dflt:[0,1],editType:"plot"},position:{valType:"number",min:0,max:1,dflt:0,editType:"plot"},categoryorder:{valType:"enumerated",values:"trace;category ascending;category descending;array;total ascending;total descending;min ascending;min descending;max ascending;max descending;sum ascending;sum descending;mean ascending;mean descending;median ascending;median descending".split(";"),
dflt:"trace",editType:"calc"},categoryarray:{valType:"data_array",editType:"calc"},uirevision:{valType:"any",editType:"none"},editType:"calc",_deprecated:{autotick:{valType:"boolean",editType:"ticks"},title:{valType:"string",editType:"ticks"},titlefont:C({editType:"ticks"})}}},{"../../components/color/attributes":614,"../../components/drawing/attributes":636,"../../constants/docs":720,"../../constants/numerical":725,"../../lib/extend":740,"../../plot_api/plot_template":788,"../font_attributes":827,
"./constants":805}],814:[function(a,G,C){function q(y,A,z){Array.isArray(y[A])?y[A].push(z):y[A]=[z]}var n=a("../../lib"),m=a("../../components/color"),f=a("../../components/fx/helpers").isUnifiedHover,b=a("../../components/fx/hovermode_defaults"),k=a("../../plot_api/plot_template"),e=a("../layout_attributes"),h=a("./layout_attributes"),l=a("./type_defaults"),c=a("./axis_defaults"),g=a("./constraints").handleConstraintDefaults,d=a("./position_defaults");C=a("./axis_ids");var p=C.id2name,r=C.name2id,
t=a("./constants").AX_ID_PATTERN;a=a("../../registry");var w=a.traceIs,x=a.getComponentMethod;G.exports=function(y,A,z){function F(){ua._traceIndices=(J[Y]||[]).map(function(Pa){return Pa._expandedIndex});ua._annIndices=[];ua._shapeIndices=[];ua._imgIndices=[];ua._subplotsWith=[];ua._counterAxes=[];ua._name=ua._attr=Y;ua._id=pa}function D(Pa,Fa){return n.coerce(oa,ua,h,Pa,Fa)}function u(Pa,Fa){return n.coerce2(oa,ua,h,Pa,Fa)}function B(Pa,Fa){Pa="x"===Pa?ha:ca;for(var Na=[],$a=0;$a<Pa.length;$a++){var cb=
Pa[$a];cb===Fa||(y[cb]||{}).overlaying||Na.push(r(cb))}return Na}function I(){var Pa=oa.matches;t.test(Pa)&&-1===sa.indexOf(Pa)&&(ma[Pa]=oa.type,ra=Object.keys(ma))}var J={},N={},M={},E={},L={},Q={},S={},R={},O={},T={},V,X;for(V=0;V<z.length;V++){var ba=z[V];if(w(ba,"cartesian")||w(ba,"gl2d")){if(ba.xaxis){var aa=p(ba.xaxis);q(J,aa,ba)}else if(ba.xaxes)for(X=0;X<ba.xaxes.length;X++)q(J,p(ba.xaxes[X]),ba);if(ba.yaxis){var ka=p(ba.yaxis);q(J,ka,ba)}else if(ba.yaxes)for(X=0;X<ba.yaxes.length;X++)q(J,
p(ba.yaxes[X]),ba);"funnel"===ba.type?"h"===ba.orientation?(aa&&(N[aa]=!0),ka&&(S[ka]=!0)):ka&&(M[ka]=!0):"image"===ba.type?(ka&&(R[ka]=!0),aa&&(R[aa]=!0)):(ka&&(L[ka]=!0,Q[ka]=!0),(!w(ba,"carpet")||"carpet"===ba.type&&!ba._cheater)&&aa&&(E[aa]=!0));"carpet"===ba.type&&ba._cheater&&aa&&(N[aa]=!0);w(ba,"2dMap")&&(O[aa]=!0,O[ka]=!0);w(ba,"oriented")&&(T["h"===ba.orientation?ka:aa]=!0)}}X=A._subplots;V=X.xaxis;aa=X.yaxis;var ha=n.simpleMap(V,p),ca=n.simpleMap(aa,p);X=ha.concat(ca);ba=m.background;V.length&&
aa.length&&(ba=n.coerce(y,A,e,"plot_bgcolor"));ba=m.combine(ba,A.paper_bgcolor);aa={x:aa,y:V};var sa=aa.x.concat(aa.y),ma={},ra=[];ka=b(y,A,z);var qa=f(ka);for(V=0;V<X.length;V++){var Y=X[V];var pa=r(Y);z=Y.charAt(0);n.isPlainObject(y[Y])||(y[Y]={});var oa=y[Y];var ua=k.newContainer(A,Y,z+"axis");F();var ya={letter:z,font:A.font,outerTicks:O[Y],showGrid:!T[Y],data:J[Y]||[],bgColor:ba,calendar:A.calendar,automargin:!0,visibleDflt:"x"===z&&!E[Y]&&N[Y]||"y"===z&&!L[Y]&&M[Y],reverseDflt:"y"===z&&(!Q[Y]&&
S[Y]||R[Y]),splomStash:((A._splomAxes||{})[z]||{})[pa]};D("uirevision",A.uirevision);l(oa,ua,D,ya);c(oa,ua,D,ya,A);ya=qa&&z===ka.charAt(0);var ja=u("spikecolor",qa?ua.color:void 0),za=u("spikethickness",qa?1.5:void 0),Ba=u("spikedash",qa?"dot":void 0),Ma=u("spikemode",qa?"across":void 0),Oa=u("spikesnap",qa?"hovered data":void 0);D("showspikes",!!ya||!!ja||!!za||!!Ba||!!Ma||!!Oa)||(delete ua.spikecolor,delete ua.spikethickness,delete ua.spikedash,delete ua.spikemode,delete ua.spikesnap);d(oa,ua,D,
{letter:z,counterAxes:aa[z],overlayableAxes:B(z,Y),grid:A.grid});D("title.standoff");I();ua._input=oa}for(V=0;V<ra.length;)pa=ra[V++],Y=p(pa),z=Y.charAt(0),n.isPlainObject(y[Y])||(y[Y]={}),oa=y[Y],ua=k.newContainer(A,Y,z+"axis"),F(),N={letter:z,font:A.font,outerTicks:O[Y],showGrid:!T[Y],data:[],bgColor:ba,calendar:A.calendar,automargin:!0,visibleDflt:!1,reverseDflt:!1,splomStash:((A._splomAxes||{})[z]||{})[pa]},D("uirevision",A.uirevision),ua.type=ma[pa]||"linear",c(oa,ua,D,N,A),d(oa,ua,D,{letter:z,
counterAxes:aa[z],overlayableAxes:B(z,Y),grid:A.grid}),D("fixedrange"),I(),ua._input=oa;O=x("rangeslider","handleDefaults");T=x("rangeselector","handleDefaults");for(V=0;V<ha.length;V++)Y=ha[V],oa=y[Y],ua=A[Y],O(y,A,Y),"date"===ua.type&&T(oa,ua,A,ca,ua.calendar),D("fixedrange");for(V=0;V<ca.length;V++)Y=ca[V],oa=y[Y],ua=A[Y],O=A[p(ua.anchor)],O=x("rangeslider","isVisible")(O),D("fixedrange",O);O=A._axisConstraintGroups=[];T=A._axisMatchGroups=[];N=sa.concat(ra);X=X.concat(n.simpleMap(ra,p));for(V=
0;V<X.length;V++)Y=X[V],z=Y.charAt(0),oa=y[Y],ua=A[Y],M="y"===z&&!oa.hasOwnProperty("scaleanchor")&&R[Y]?ua.anchor:void 0,E=!oa.hasOwnProperty("constrain")&&R[Y]?"domain":void 0,g(oa,ua,D,{allAxisIds:N,layoutOut:A,scaleanchorDflt:M,constrainDflt:E});for(V=0;V<T.length;V++){R=T[V];N=X=null;for(pa in R)ua=A[p(pa)],ua.matches||(X=ua.range,N=ua.autorange);if(null===X||null===N)for(pa in R){ua=A[p(pa)];X=ua.range;N=ua.autorange;break}for(pa in R)ua=A[p(pa)],ua.matches&&(ua.range=X.slice(),ua.autorange=
N),ua._matchGroup=R;if(O.length)for(pa in R)for(X=0;X<O.length;X++){R=O[X];for(var Ia in R)pa===Ia&&(n.warn("Axis "+Ia+" is set with both a *scaleanchor* and *matches* constraint; ignoring the scale constraint."),delete R[Ia],2>Object.keys(R).length&&O.splice(X,1))}}}},{"../../components/color":615,"../../components/fx/helpers":651,"../../components/fx/hovermode_defaults":654,"../../lib":750,"../../plot_api/plot_template":788,"../../registry":882,"../layout_attributes":853,"./axis_defaults":801,"./axis_ids":802,
"./constants":805,"./constraints":806,"./layout_attributes":813,"./position_defaults":816,"./type_defaults":824}],815:[function(a,G,C){var q=a("tinycolor2").mix,n=a("../../components/color/attributes").lightFraction,m=a("../../lib");G.exports=function(f,b,k,e){function h(d,p){return m.coerce2(f,b,e.attributes,d,p)}e=e||{};var l=e.dfltColor,c=h("linecolor",l),g=h("linewidth");k("showline",e.showLine||!!c||!!g)||(delete b.linecolor,delete b.linewidth);c=q(l,e.bgColor,e.blend||n).toRgbString();c=h("gridcolor",
c);g=h("gridwidth");k("showgrid",e.showGrid||!!c||!!g)||(delete b.gridcolor,delete b.gridwidth);e.noZeroLine||(l=h("zerolinecolor",l),c=h("zerolinewidth"),k("zeroline",e.showGrid||!!l||!!c)||(delete b.zerolinecolor,delete b.zerolinewidth))}},{"../../components/color/attributes":614,"../../lib":750,tinycolor2:548}],816:[function(a,G,C){var q=a("fast-isnumeric"),n=a("../../lib");G.exports=function(m,f,b,k){var e=k.counterAxes||[],h=k.overlayableAxes||[],l=k.letter;k=k.grid;if(k){var c=k._domains[l][k._axisMap[f._id]];
var g=k._anchors[f._id];if(c){var d=k[l+"side"].split(" ")[0];var p=k.domain[l]["right"===d||"top"===d?1:0]}}c=c||[0,1];g=g||(q(m.position)?"free":e[0]||"free");d=d||("x"===l?"bottom":"left");p=p||0;"free"===n.coerce(m,f,{anchor:{valType:"enumerated",values:["free"].concat(e),dflt:g}},"anchor")&&b("position",p);n.coerce(m,f,{side:{valType:"enumerated",values:"x"===l?["bottom","top"]:["left","right"],dflt:d}},"side");e=!1;h.length&&(e=n.coerce(m,f,{overlaying:{valType:"enumerated",values:[!1].concat(h),
dflt:!1}},"overlaying"));e||(h=b("domain",c),h[0]>h[1]-1/4096&&(f.domain=c),n.noneOrAll(m.domain,f.domain,c));b("layer");return f}},{"../../lib":750,"fast-isnumeric":241}],817:[function(a,G,C){var q=a("../../constants/alignment").FROM_BL;G.exports=function(n,m,f){void 0===f&&(f=q[n.constraintoward||"center"]);var b=[n.r2l(n.range[0]),n.r2l(n.range[1])];f=b[0]+(b[1]-b[0])*f;n.range=n._input.range=[n.l2r(f+(b[0]-f)*m),n.l2r(f+(b[1]-f)*m)]}},{"../../constants/alignment":717}],818:[function(a,G,C){function q(ha,
ca,sa,ma,ra,qa,Y){var pa=ca._hoverdata,oa=-1<ca._fullLayout.clickmode.indexOf("event"),ua=[],ya;if(pa&&Array.isArray(pa)&&!0!==pa[0].hoverOnBox){b(ha,ca,qa);sa=e(ca,sa,ma,ra);pa=pa[0];ma=-1;ra=[];var ja;for(ja=0;ja<sa.length;ja++){var za=sa[ja];if(pa.fullData._expandedIndex===za.cd[0].trace._expandedIndex){if(!0===pa.hoverOnBox)break;void 0!==pa.pointNumber?ma=pa.pointNumber:void 0!==pa.binNumber&&(ma=pa.binNumber,ra=pa.pointNumbers);break}}za={pointNumber:ma,pointNumbers:ra,searchInfo:za};if(0<za.pointNumbers.length)a:{ma=
[];for(pa=0;pa<sa.length;pa++)ra=sa[pa],ra.cd[0].trace.selectedpoints&&0<ra.cd[0].trace.selectedpoints.length&&ma.push(ra);if(1===ma.length&&(pa=ma[0]===za.searchInfo)&&(ma=za.searchInfo.cd[0].trace,ma.selectedpoints.length===za.pointNumbers.length)){for(pa=0;pa<za.pointNumbers.length;pa++)if(0>ma.selectedpoints.indexOf(za.pointNumbers[pa])){pa=!1;break a}pa=!0;break a}pa=!1}else{a:{for(ma=pa=0;ma<sa.length;ma++)if(ra=sa[ma],ra=ra.cd[0].trace,ra.selectedpoints){if(1<ra.selectedpoints.length){pa=!1;
break a}pa+=ra.selectedpoints.length;if(1<pa){pa=!1;break a}}pa=1===pa}pa=pa&&(ya=h(za))}if(pa){Y&&Y.remove();for(ya=0;ya<sa.length;ya++)Y=sa[ya],Y._module.selectPoints(Y,!1);l(ca,sa);k(qa);oa&&ca.emit("plotly_deselect",null)}else{ha=ha.shiftKey&&(void 0!==ya?ya:h(za));ha={pointNumber:za.pointNumber,searchInfo:za.searchInfo,subtract:ha};ya=qa.selectionDefs.concat([ha]);za=f(ya);for(ya=0;ya<sa.length;ya++)if(pa=sa[ya]._module.selectPoints(sa[ya],za),pa=g(pa,sa[ya]),ua.length)for(ma=0;ma<pa.length;ma++)ua.push(pa[ma]);
else ua=pa;ua={points:ua};l(ca,sa,ua);ha&&qa&&qa.selectionDefs.push(ha);Y&&(sa=qa.mergedPolygons,ha=D(qa.dragmode),B(d(sa,ha),Y,qa));oa&&ca.emit("plotly_selected",ua)}}}function n(ha){return"pointNumber"in ha&&"searchInfo"in ha}function m(ha){return{xmin:0,xmax:0,ymin:0,ymax:0,pts:[],contains:function(ca,sa,ma,ra){return ra.cd[0].trace._expandedIndex===ha.searchInfo.cd[0].trace._expandedIndex&&ma===ha.pointNumber},isRect:!1,degenerate:!1,subtract:ha.subtract}}function f(ha){for(var ca=[],sa=n(ha[0])?
0:ha[0][0][0],ma=sa,ra=n(ha[0])?0:ha[0][0][1],qa=ra,Y=0;Y<ha.length;Y++)if(n(ha[Y]))ca.push(m(ha[Y]));else{var pa=M.tester(ha[Y]);pa.subtract=ha[Y].subtract;ca.push(pa);sa=Math.min(sa,pa.xmin);ma=Math.max(ma,pa.xmax);ra=Math.min(ra,pa.ymin);qa=Math.max(qa,pa.ymax)}return{xmin:sa,xmax:ma,ymin:ra,ymax:qa,pts:[],contains:function(oa,ua,ya,ja){for(var za=!1,Ba=0;Ba<ca.length;Ba++)ca[Ba].contains(oa,ua,ya,ja)&&(za=!1===ca[Ba].subtract);return za},isRect:!1,degenerate:!1}}function b(ha,ca,sa){ca._fullLayout._drawing=
!1;var ma=ca._fullLayout,ra=sa.plotinfo,qa=sa.dragmode,Y=ma._lastSelectedSubplot&&ma._lastSelectedSubplot===ra.id;ha=(ha.shiftKey||ha.altKey)&&!(F(qa)&&D(qa));Y&&ha&&ra.selection&&ra.selection.selectionDefs&&!sa.selectionDefs?(sa.selectionDefs=ra.selection.selectionDefs,sa.mergedPolygons=ra.selection.mergedPolygons):ha&&ra.selection||k(sa);Y||(X(ca),ma._lastSelectedSubplot=ra.id)}function k(ha){var ca=ha.dragmode,sa=ha.plotinfo,ma=ha.gd;0<=ma._fullLayout._activeShapeIndex&&ma._fullLayout._deactivateShape(ma);
F(ca)&&(ca=ma._fullLayout._zoomlayer.selectAll(".select-outline-"+sa.id))&&ma._fullLayout._drawing&&((ca=J(ca,ha))&&r.call("_guiRelayout",ma,{shapes:ca}),ma._fullLayout._drawing=!1);sa.selection={};sa.selection.selectionDefs=ha.selectionDefs=[];sa.selection.mergedPolygons=ha.mergedPolygons=[]}function e(ha,ca,sa,ma){function ra(ja,za,Ba,Ma){return{_module:ja,cd:za,xaxis:Ba,yaxis:Ma}}var qa=[],Y=ca.map(function(ja){return ja._id}),pa=sa.map(function(ja){return ja._id}),oa;for(oa=0;oa<ha.calcdata.length;oa++){var ua=
ha.calcdata[oa];var ya=ua[0].trace;!0===ya.visible&&ya._module&&ya._module.selectPoints&&(!ma||ya.subplot!==ma&&ya.geo!==ma?"splom"===ya.type&&ya._xaxes[Y[0]]&&ya._yaxes[pa[0]]?(ua=ra(ya._module,ua,ca[0],sa[0]),ua.scene=ha._fullLayout._splomScenes[ya.uid],qa.push(ua)):"sankey"===ya.type?(ya=ra(ya._module,ua,ca[0],sa[0]),qa.push(ya)):-1!==Y.indexOf(ya.xaxis)&&-1!==pa.indexOf(ya.yaxis)&&qa.push(ra(ya._module,ua,L(ha,ya.xaxis),L(ha,ya.yaxis))):qa.push(ra(ya._module,ua,ca[0],sa[0])))}return qa}function h(ha){var ca=
ha.searchInfo.cd[0].trace,sa=ha.pointNumber;ha=ha.pointNumbers;sa=0<ha.length?ha[0]:sa;return ca.selectedpoints?-1<ca.selectedpoints.indexOf(sa):!1}function l(ha,ca,sa){var ma;for(ma=0;ma<ca.length;ma++){var ra=ca[ma].cd[0].trace._fullInput;var qa=ha._fullLayout._tracePreGUI[ra.uid]||{};void 0===qa.selectedpoints&&(qa.selectedpoints=ra._input.selectedpoints||null)}if(sa){sa=sa.points||[];for(ma=0;ma<ca.length;ma++){var Y=ca[ma].cd[0].trace;Y._input.selectedpoints=Y._fullInput.selectedpoints=[];Y._fullInput!==
Y&&(Y.selectedpoints=[])}for(ma=0;ma<sa.length;ma++){ra=sa[ma];qa=ra.data;var pa=ra.fullData;ra.pointIndices?([].push.apply(qa.selectedpoints,ra.pointIndices),Y._fullInput!==Y&&[].push.apply(pa.selectedpoints,ra.pointIndices)):(qa.selectedpoints.push(ra.pointIndex),Y._fullInput!==Y&&pa.selectedpoints.push(ra.pointIndex))}}else for(ma=0;ma<ca.length;ma++)Y=ca[ma].cd[0].trace,delete Y.selectedpoints,delete Y._input.selectedpoints,Y._fullInput!==Y&&delete Y._fullInput.selectedpoints;ra=!1;for(ma=0;ma<
ca.length;ma++)if(qa=ca[ma],sa=qa.cd,Y=sa[0].trace,r.traceIs(Y,"regl")&&(ra=!0),Y=qa._module,Y=Y.styleOnSelect||Y.style)Y(ha,sa,sa[0].node3),sa[0].nodeRangePlot3&&Y(ha,sa,sa[0].nodeRangePlot3);ra&&(Q(ha),S(ha))}function c(ha,ca,sa){if(sa)return ha=p.difference({regions:ha,inverted:!1},{regions:[ca],inverted:!1}),ha.regions;ha=p.union({regions:ha,inverted:!1},{regions:[ca],inverted:!1});return ha.regions}function g(ha,ca){if(Array.isArray(ha)){var sa=ca.cd;ca=ca.cd[0].trace;for(var ma=0;ma<ha.length;ma++)ha[ma]=
y(ha[ma],ca,sa)}return ha}function d(ha,ca){for(var sa=[],ma=0;ma<ha.length;ma++){sa[ma]=[];for(var ra=0;ra<ha[ma].length;ra++){sa[ma][ra]=[];sa[ma][ra][0]=ra?"L":"M";for(var qa=0;qa<ha[ma][ra].length;qa++)sa[ma][ra].push(ha[ma][ra][qa])}ca||sa[ma].push(["Z",sa[ma][0][1],sa[ma][0][2]])}return sa}var p=a("polybooljs"),r=a("../../registry"),t=a("../../components/drawing").dashStyle,w=a("../../components/color"),x=a("../../components/fx"),y=a("../../components/fx/helpers").makeEventData;C=a("../../components/dragelement/helpers");
var A=C.freeMode,z=C.rectMode,F=C.drawMode,D=C.openMode,u=C.selectMode,B=a("../../components/shapes/draw_newshape/display_outlines"),I=a("../../components/shapes/draw_newshape/helpers").handleEllipse,J=a("../../components/shapes/draw_newshape/newshapes"),N=a("../../lib"),M=a("../../lib/polygon"),E=a("../../lib/throttle"),L=a("./axis_ids").getFromId,Q=a("../../lib/clear_gl_canvases"),S=a("../../plot_api/subroutines").redrawReglTraces,R=a("./constants"),O=R.MINSELECT,T=M.filter,V=M.tester,X=a("./handle_outline").clearSelect;
a=a("./helpers");var ba=a.p2r,aa=a.axValue,ka=a.getTransform;G.exports={prepSelect:function(ha,ca,sa,ma,ra){function qa(Kb,Ob){return Kb-Ob}var Y=A(ra),pa=z(ra),oa=D(ra),ua=F(ra),ya=u(ra),ja="drawcircle"===ra,za="drawline"===ra||ja,Ba=ma.gd,Ma=Ba._fullLayout,Oa=Ma._zoomlayer,Ia=ma.element.getBoundingClientRect(),Pa=ma.plotinfo,Fa=ka(Pa),Na=ca-Ia.left,$a=sa-Ia.top,cb=Na,mb=$a;ca="M"+Na+","+$a;var Ka=ma.xaxes[0]._length,Ua=ma.yaxes[0]._length,Ea=ma.xaxes.concat(ma.yaxes),Ya=ha.altKey&&!(F(ra)&&oa),
ab,Wa,Ja,Sa,fb,nb,Ha;b(ha,Ba,ma);Y&&(ab=T([[Na,$a]],R.BENDPX));var Ca=Oa.selectAll("path.select-outline-"+Pa.id).data(ua?[0]:[1,2]);ha=Ma.newshape;Ca.enter().append("path").attr("class",function(Kb){return"select-outline select-outline-"+Kb+" select-outline-"+Pa.id}).style(ua?{opacity:ha.opacity/2,fill:oa?void 0:ha.fillcolor,stroke:ha.line.color,"stroke-dasharray":t(ha.line.dash,ha.line.width),"stroke-width":ha.line.width+"px"}:{}).attr("fill-rule",ha.fillrule).classed("cursor-move",ua?!0:!1).attr("transform",
Fa).attr("d",ca+"Z");var Qa=Oa.append("path").attr("class","zoombox-corners").style({fill:w.background,stroke:w.defaultLine,"stroke-width":1}).attr("transform",Fa).attr("d","M0,0Z"),gb=Ma._uid+R.SELECTID,Va=[],db=e(Ba,ma.xaxes,ma.yaxes,ma.subplot);var qb=Pa.fillRangeItems?Pa.fillRangeItems:pa?function(Kb,Ob){Kb=Kb.range={};for(fb=0;fb<Ea.length;fb++){var cc=Ea[fb],kc=cc._id.charAt(0);Kb[cc._id]=[ba(cc,Ob[kc+"min"]),ba(cc,Ob[kc+"max"])].sort(qa)}}:function(Kb,Ob,cc){Kb=Kb.lassoPoints={};for(fb=0;fb<
Ea.length;fb++)Ob=Ea[fb],Kb[Ob._id]=cc.filtered.map(aa(Ob))};ma.moveFn=function(Kb,Ob){cb=Math.max(0,Math.min(Ka,Kb+Na));mb=Math.max(0,Math.min(Ua,Ob+$a));Kb=Math.abs(cb-Na);Ob=Math.abs(mb-$a);if(pa){if(ya){var cc=Ma.selectdirection;cc="any"===cc?Ob<Math.min(.6*Kb,O)?"h":Kb<Math.min(.6*Ob,O)?"v":"d":cc;switch(cc){case "h":var kc=ja?Ua/2:0;var qc=Ua;break;case "v":kc=ja?Ka/2:0,qc=Ka}}if(ua)switch(Ma.newshape.drawdirection){case "vertical":cc="h";kc=ja?Ua/2:0;qc=Ua;break;case "horizontal":cc="v";kc=
ja?Ka/2:0;qc=Ka;break;case "ortho":Kb<Ob?(cc="h",kc=$a,qc=mb):(cc="v",kc=Na,qc=cb);break;default:cc="d"}"h"===cc?(Sa=za?I(ja,[cb,kc],[cb,qc]):[[Na,kc],[Na,qc],[cb,qc],[cb,kc]],Sa.xmin=za?cb:Math.min(Na,cb),Sa.xmax=za?cb:Math.max(Na,cb),Sa.ymin=Math.min(kc,qc),Sa.ymax=Math.max(kc,qc),Qa.attr("d","M"+Sa.xmin+","+($a-O)+"h-4v"+2*O+"h4ZM"+(Sa.xmax-1)+","+($a-O)+"h4v"+2*O+"h-4Z")):"v"===cc?(Sa=za?I(ja,[kc,mb],[qc,mb]):[[kc,$a],[kc,mb],[qc,mb],[qc,$a]],Sa.xmin=Math.min(kc,qc),Sa.xmax=Math.max(kc,qc),Sa.ymin=
za?mb:Math.min($a,mb),Sa.ymax=za?mb:Math.max($a,mb),Qa.attr("d","M"+(Na-O)+","+Sa.ymin+"v-4h"+2*O+"v4ZM"+(Na-O)+","+(Sa.ymax-1)+"v4h"+2*O+"v-4Z")):"d"===cc&&(Sa=za?I(ja,[Na,$a],[cb,mb]):[[Na,$a],[Na,mb],[cb,mb],[cb,$a]],Sa.xmin=Math.min(Na,cb),Sa.xmax=Math.max(Na,cb),Sa.ymin=Math.min($a,mb),Sa.ymax=Math.max($a,mb),Qa.attr("d","M0,0Z"))}else Y&&(ab.addPt([cb,mb]),Sa=ab.filtered);ma.selectionDefs&&ma.selectionDefs.length?(Ja=c(ma.mergedPolygons,Sa,Ya),Sa.subtract=Ya,Wa=f(ma.selectionDefs.concat([Sa]))):
(Ja=[Sa],Wa=V(Sa));B(d(Ja,oa),Ca,ma);ya&&E.throttle(gb,R.SELECTDELAY,function(){Va=[];var Pc=[];for(fb=0;fb<db.length;fb++){nb=db[fb];var Qc=nb._module.selectPoints(nb,Wa);Pc.push(Qc);Qc=g(Qc,nb);if(Va.length)for(var cd=0;cd<Qc.length;cd++)Va.push(Qc[cd]);else Va=Qc}Ha={points:Va};l(Ba,db,Ha);qb(Ha,Sa,ab);ma.gd.emit("plotly_selecting",Ha)})};ma.clickFn=function(Kb,Ob){Qa.remove();if(0<=Ba._fullLayout._activeShapeIndex)Ba._fullLayout._deactivateShape(Ba);else if(!ua){var cc=Ma.clickmode;E.done(gb).then(function(){E.clear(gb);
if(2===Kb){Ca.remove();for(fb=0;fb<db.length;fb++)nb=db[fb],nb._module.selectPoints(nb,!1);l(Ba,db);k(ma);Ba.emit("plotly_deselect",null)}else-1<cc.indexOf("select")&&q(Ob,Ba,ma.xaxes,ma.yaxes,ma.subplot,ma,Ca),"event"===cc&&Ba.emit("plotly_selected",void 0);x.click(Ba,Ob)}).catch(N.error)}};ma.doneFn=function(){Qa.remove();E.done(gb).then(function(){E.clear(gb);ma.gd.emit("plotly_selected",Ha);Sa&&ma.selectionDefs&&(Sa.subtract=Ya,ma.selectionDefs.push(Sa),ma.mergedPolygons.length=0,[].push.apply(ma.mergedPolygons,
Ja));ma.doneFnCompleted&&ma.doneFnCompleted(Va)}).catch(N.error);ua&&k(ma)}},clearSelect:X,clearSelectionsCache:k,selectOnClick:q}},{"../../components/color":615,"../../components/dragelement/helpers":633,"../../components/drawing":637,"../../components/fx":655,"../../components/fx/helpers":651,"../../components/shapes/draw_newshape/display_outlines":700,"../../components/shapes/draw_newshape/helpers":701,"../../components/shapes/draw_newshape/newshapes":702,"../../lib":750,"../../lib/clear_gl_canvases":734,
"../../lib/polygon":762,"../../lib/throttle":775,"../../plot_api/subroutines":789,"../../registry":882,"./axis_ids":802,"./constants":805,"./handle_outline":809,"./helpers":810,polybooljs:491}],819:[function(a,G,C){function q(u){return Math.pow(10,u)}var n=a("d3"),m=a("d3-time-format").utcFormat,f=a("fast-isnumeric"),b=a("../../lib"),k=b.cleanNumber,e=b.ms2DateTime,h=b.dateTime2ms,l=b.ensureNumber,c=b.isArrayOrTypedArray;C=a("../../constants/numerical");var g=C.FP_SAFE,d=C.BADNUM,p=C.LOG_CLIP,r=C.ONEWEEK,
t=C.ONEDAY,w=C.ONEHOUR,x=C.ONEMIN,y=C.ONESEC,A=a("./axis_ids"),z=a("./constants"),F=z.HOUR_PATTERN,D=z.WEEKDAY_PATTERN;G.exports=function(u,B){function I(aa,ka){return 0<aa?Math.log(aa)/Math.LN10:0>=aa&&ka&&u.range&&2===u.range.length?(aa=u.range[0],ka=u.range[1],.5*(aa+ka-2*p*Math.abs(aa-ka))):d}function J(aa,ka,ha,ca){if((ca||{}).msUTC&&f(aa))return+aa;ka=h(aa,ha||u.calendar);if(ka===d)if(f(aa))aa=+aa,ka=Math.floor(10*b.mod(aa+.05,1)),ka=h(new Date(Math.round(aa-ka/10)))+ka/10;else return d;return ka}
function N(aa,ka,ha){return e(aa,ka,ha||u.calendar)}function M(aa){return u._categories[Math.round(aa)]}function E(aa){if(null!==aa&&void 0!==aa){void 0===u._categoriesMap&&(u._categoriesMap={});if(void 0!==u._categoriesMap[aa])return u._categoriesMap[aa];u._categories.push("number"===typeof aa?String(aa):aa);var ka=u._categories.length-1;return u._categoriesMap[aa]=ka}return d}function L(aa){if(u._categoriesMap)return u._categoriesMap[aa]}function Q(aa){var ka=L(aa);if(void 0!==ka)return ka;if(f(aa))return+aa}
function S(aa){return f(aa)?+aa:L(aa)}B=B||{};var R=u._id||"x",O=R.charAt(0),T=function(aa){return f(aa)?n.round(u._b+u._m*aa,2):d},V=function(aa){return(aa-u._b)/u._m};if(u.rangebreaks){var X="y"===O;T=function(aa){if(!f(aa))return d;var ka=u._rangebreaks.length;if(!ka)return n.round(u._b+u._m*aa,2);var ha=X;u.range[0]>u.range[1]&&(ha=!ha);ha=ha?-1:1;for(var ca=ha*aa,sa=0,ma=0;ma<ka;ma++){var ra=ha*u._rangebreaks[ma].min,qa=ha*u._rangebreaks[ma].max;if(ca<ra)break;if(ca>qa)sa=ma+1;else{sa=ca<(ra+
qa)/2?ma:ma+1;break}}ka=u._B[sa]||0;return isFinite(ka)?n.round(ka+u._m2*aa,2):0};V=function(aa){var ka=u._rangebreaks.length;if(!ka)return(aa-u._b)/u._m;for(var ha=0,ca=0;ca<ka&&!(aa<u._rangebreaks[ca].pmin);ca++)aa>u._rangebreaks[ca].pmax&&(ha=ca+1);return(aa-u._B[ha])/u._m2}}u.c2l="log"===u.type?I:l;u.l2c="log"===u.type?q:l;u.l2p=T;u.p2l=V;u.c2p="log"===u.type?function(aa,ka){return T(I(aa,ka))}:T;u.p2c="log"===u.type?function(aa){return q(V(aa))}:V;-1!==["linear","-"].indexOf(u.type)?(u.d2r=u.r2d=
u.d2c=u.r2c=u.d2l=u.r2l=k,u.c2d=u.c2r=u.l2d=u.l2r=l,u.d2p=u.r2p=function(aa){return u.l2p(k(aa))},u.p2d=u.p2r=V,u.cleanPos=l):"log"===u.type?(u.d2r=u.d2l=function(aa,ka){return I(k(aa),ka)},u.r2d=u.r2c=function(aa){return q(k(aa))},u.d2c=u.r2l=k,u.c2d=u.l2r=l,u.c2r=I,u.l2d=q,u.d2p=function(aa,ka){return u.l2p(u.d2r(aa,ka))},u.p2d=function(aa){return q(V(aa))},u.r2p=function(aa){return u.l2p(k(aa))},u.p2r=V,u.cleanPos=l):"date"===u.type?(u.d2r=u.r2d=b.identity,u.d2c=u.r2c=u.d2l=u.r2l=J,u.c2d=u.c2r=
u.l2d=u.l2r=N,u.d2p=u.r2p=function(aa,ka,ha){return u.l2p(J(aa,0,ha))},u.p2d=u.p2r=function(aa,ka,ha){return N(V(aa),ka,ha)},u.cleanPos=function(aa){return b.cleanDate(aa,d,u.calendar)}):"category"===u.type?(u.d2c=u.d2l=E,u.r2d=u.c2d=u.l2d=M,u.d2r=u.d2l_noadd=Q,u.r2c=function(aa){aa=S(aa);return void 0!==aa?aa:u.fraction2r(.5)},u.l2r=u.c2r=l,u.r2l=S,u.d2p=function(aa){return u.l2p(u.r2c(aa))},u.p2d=function(aa){return M(V(aa))},u.r2p=u.d2p,u.p2r=V,u.cleanPos=function(aa){return"string"===typeof aa&&
""!==aa?aa:l(aa)}):"multicategory"===u.type&&(u.r2d=u.c2d=u.l2d=M,u.d2r=u.d2l_noadd=Q,u.r2c=function(aa){aa=Q(aa);return void 0!==aa?aa:u.fraction2r(.5)},u.r2c_just_indices=L,u.l2r=u.c2r=l,u.r2l=Q,u.d2p=function(aa){return u.l2p(u.r2c(aa))},u.p2d=function(aa){return M(V(aa))},u.r2p=u.d2p,u.p2r=V,u.cleanPos=function(aa){return Array.isArray(aa)||"string"===typeof aa&&""!==aa?aa:l(aa)},u.setupMultiCategory=function(aa){var ka=u._traceIndices,ha,ca=B._axisMatchGroups;if(ca&&ca.length&&0===u._categories.length)for(ha=
0;ha<ca.length;ha++){var sa=ca[ha];if(sa[R])for(var ma in sa)ma!==R&&(sa=B[A.id2name(ma)],ka=ka.concat(sa._traceIndices))}var ra=[[0,{}],[0,{}]];ca=[];for(ha=0;ha<ka.length;ha++)if(sa=aa[ka[ha]],O in sa){ma=sa[O];var qa=sa._length||b.minRowLength(ma);if(c(ma[0])&&c(ma[1]))for(sa=0;sa<qa;sa++){var Y=ma[0][sa],pa=ma[1][sa];null!==Y&&void 0!==Y&&null!==pa&&void 0!==pa&&(ca.push([Y,pa]),Y in ra[0][1]||(ra[0][1][Y]=ra[0][0]++),pa in ra[1][1]||(ra[1][1][pa]=ra[1][0]++))}}ca.sort(function(oa,ua){var ya=
ra[0][1];if(ya=ya[oa[0]]-ya[ua[0]])return ya;ya=ra[1][1];return ya[oa[1]]-ya[ua[1]]});for(ha=0;ha<ca.length;ha++)E(ca[ha])});u.fraction2r=function(aa){var ka=u.r2l(u.range[0]),ha=u.r2l(u.range[1]);return u.l2r(ka+aa*(ha-ka))};u.r2fraction=function(aa){var ka=u.r2l(u.range[0]),ha=u.r2l(u.range[1]);return(u.r2l(aa)-ka)/(ha-ka)};u.cleanRange=function(aa,ka){ka||(ka={});aa||(aa="range");var ha=b.nestedProperty(u,aa).get();var ca="date"===u.type?b.dfltRange(u.calendar):"y"===O?z.DFLTRANGEY:ka.dfltRange||
z.DFLTRANGEX;ca=ca.slice();if("tozero"===u.rangemode||"nonnegative"===u.rangemode)ca[0]=0;if(ha&&2===ha.length)for("date"!==u.type||u.autorange||(ha[0]=b.cleanDate(ha[0],d,u.calendar),ha[1]=b.cleanDate(ha[1],d,u.calendar)),ka=0;2>ka;ka++)if("date"===u.type){if(!b.isDateTime(ha[ka],u.calendar)){u[aa]=ca;break}if(u.r2l(ha[0])===u.r2l(ha[1])){aa=b.constrain(u.r2l(ha[0]),b.MIN_MS+1E3,b.MAX_MS-1E3);ha[0]=u.l2r(aa-1E3);ha[1]=u.l2r(aa+1E3);break}}else{if(!f(ha[ka]))if(f(ha[1-ka]))ha[ka]=ha[1-ka]*(ka?10:
.1);else{u[aa]=ca;break}ha[ka]<-g?ha[ka]=-g:ha[ka]>g&&(ha[ka]=g);if(ha[0]===ha[1]){var sa=Math.max(1,Math.abs(1E-6*ha[0]));ha[0]-=sa;ha[1]+=sa}}else b.nestedProperty(u,aa).set(ca)};u.setScale=function(aa){var ka=B._size;if(u.overlaying){var ha=A.getFromId({_fullLayout:B},u.overlaying);u.domain=ha.domain}ha=aa&&u._r?"_r":"range";var ca=u.calendar;u.cleanRange(ha);aa=u.r2l(u[ha][0],ca);ha=u.r2l(u[ha][1],ca);(ca="y"===O)?(u._offset=ka.t+(1-u.domain[1])*ka.h,u._length=ka.h*(u.domain[1]-u.domain[0]),u._m=
u._length/(aa-ha),u._b=-u._m*ha):(u._offset=ka.l+u.domain[0]*ka.w,u._length=ka.w*(u.domain[1]-u.domain[0]),u._m=u._length/(ha-aa),u._b=-u._m*aa);u._rangebreaks=[];u._lBreaks=0;u._m2=0;u._B=[];if(u.rangebreaks&&(u._rangebreaks=u.locateBreaks(Math.min(aa,ha),Math.max(aa,ha)),u._rangebreaks.length)){for(ka=0;ka<u._rangebreaks.length;ka++){var sa=u._rangebreaks[ka];u._lBreaks+=Math.abs(sa.max-sa.min)}ka=ca;aa>ha&&(ka=!ka);ka&&u._rangebreaks.reverse();var ma=ka?-1:1;u._m2=ma*u._length/(Math.abs(ha-aa)-
u._lBreaks);u._B.push(-u._m2*(ca?ha:aa));for(ka=0;ka<u._rangebreaks.length;ka++)sa=u._rangebreaks[ka],u._B.push(u._B[u._B.length-1]-ma*u._m2*(sa.max-sa.min));for(ka=0;ka<u._rangebreaks.length;ka++)sa=u._rangebreaks[ka],sa.pmin=T(sa.min),sa.pmax=T(sa.max)}if(!isFinite(u._m)||!isFinite(u._b)||0>u._length)throw B._replotting=!1,Error("Something went wrong with axis scaling");};u.maskBreaks=function(aa){for(var ka=u.rangebreaks||[],ha,ca,sa,ma,ra=0;ra<ka.length;ra++){var qa=ka[ra];if(qa.enabled)if(qa.bounds){var Y=
qa.pattern;ha=b.simpleMap(qa.bounds,Y?k:u.d2c);ca=ha[0];ha=ha[1];switch(Y){case D:ma=new Date(aa);sa=ma.getUTCDay();ca>ha&&(ha+=7,sa<ca&&(sa+=7));break;case F:ma=new Date(aa);sa=ma.getUTCHours();qa=ma.getUTCMinutes();Y=ma.getUTCSeconds();ma=ma.getUTCMilliseconds();sa+=qa/60+Y/3600+ma/36E5;ca>ha&&(ha+=24,sa<ca&&(sa+=24));break;case "":sa=aa}if(sa>=ca&&sa<ha)return d}else for(Y=b.simpleMap(qa.values,u.d2c).sort(b.sorterAsc),ma=0;ma<Y.length;ma++)if(ca=Y[ma],ha=ca+qa.dvalue,aa>=ca&&aa<ha)return d}return aa};
u.locateBreaks=function(aa,ka){var ha,ca=[];if(!u.rangebreaks)return ca;var sa=u.rangebreaks.slice().sort(function(ja,za){return ja.pattern===D&&za.pattern===F?-1:za.pattern===D&&ja.pattern===F?1:0}),ma=function(ja,za){ja=b.constrain(ja,aa,ka);za=b.constrain(za,aa,ka);if(ja!==za){for(var Ba=!0,Ma=0;Ma<ca.length;Ma++){var Oa=ca[Ma];ja<Oa.max&&za>=Oa.min&&(ja<Oa.min&&(Oa.min=ja),za>Oa.max&&(Oa.max=za),Ba=!1)}Ba&&ca.push({min:ja,max:za})}};for(ha=0;ha<sa.length;ha++){var ra=sa[ha];if(ra.enabled)if(ra.bounds){var qa=
aa,Y=ka;ra.pattern&&(qa=Math.floor(qa));var pa=b.simpleMap(ra.bounds,ra.pattern?k:u.r2l);var oa=pa[0];var ua=pa[1];var ya=new Date(qa);switch(ra.pattern){case D:ra=r;ua=((ua<oa?7:0)+(ua-oa))*t;qa+=oa*t-(ya.getUTCDay()*t+ya.getUTCHours()*w+ya.getUTCMinutes()*x+ya.getUTCSeconds()*y+ya.getUTCMilliseconds());break;case F:ra=t;ua=((ua<oa?24:0)+(ua-oa))*w;qa+=oa*w-(ya.getUTCHours()*w+ya.getUTCMinutes()*x+ya.getUTCSeconds()*y+ya.getUTCMilliseconds());break;default:qa=Math.min(pa[0],pa[1]),Y=Math.max(pa[0],
pa[1]),ua=ra=Y-qa}for(oa=qa;oa<Y;oa+=ra)ma(oa,oa+ua)}else for(Y=b.simpleMap(ra.values,u.d2c),qa=0;qa<Y.length;qa++)oa=Y[qa],ua=oa+ra.dvalue,ma(oa,ua)}ca.sort(function(ja,za){return ja.min-za.min});return ca};u.makeCalcdata=function(aa,ka,ha){var ca;var sa=u.type;var ma="date"===sa&&aa[ka+"calendar"];if(ka in aa){ka=aa[ka];aa=aa._length||b.minRowLength(ka);if(b.isTypedArray(ka)&&("linear"===sa||"log"===sa)){if(aa===ka.length)return ka;if(ka.subarray)return ka.subarray(0,aa)}if("multicategory"===sa){ha=
Array(aa);for(ma=0;ma<aa;ma++)ha[ma]=L([(ka[0]||[])[ma],(ka[1]||[])[ma]]);return ha}sa=Array(aa);for(ca=0;ca<aa;ca++)sa[ca]=u.d2c(ka[ca],0,ma,ha)}else for(ha=(ka+"0"in aa)?u.d2c(aa[ka+"0"],0,ma):0,ma=aa["d"+ka]?Number(aa["d"+ka]):1,ka=aa[{x:"y",y:"x"}[ka]],aa=aa._length||ka.length,sa=Array(aa),ca=0;ca<aa;ca++)sa[ca]=ha+ca*ma;if(u.rangebreaks)for(ca=0;ca<aa;ca++)sa[ca]=u.maskBreaks(sa[ca]);return sa};u.isValidRange=function(aa){return Array.isArray(aa)&&2===aa.length&&f(u.r2l(aa[0]))&&f(u.r2l(aa[1]))};
u.isPtWithinRange=function(aa,ka){aa=u.c2l(aa[O],null,ka);ka=u.r2l(u.range[0]);var ha=u.r2l(u.range[1]);return ka<ha?ka<=aa&&aa<=ha:ha<=aa&&aa<=ka};u._emptyCategories=function(){u._categories=[];u._categoriesMap={}};u.clearCalc=function(){var aa=B._axisMatchGroups;if(aa&&aa.length){for(var ka=!1,ha=0;ha<aa.length;ha++){var ca=aa[ha];if(ca[R]){ka=!0;ha=aa=null;for(var sa in ca)if(ca=B[A.id2name(sa)],ca._categories){aa=ca._categories;ha=ca._categoriesMap;break}aa&&ha?(u._categories=aa,u._categoriesMap=
ha):u._emptyCategories();break}}ka||u._emptyCategories()}else u._emptyCategories();if(u._initialCategories)for(ka=0;ka<u._initialCategories.length;ka++)E(u._initialCategories[ka])};u.sortByInitialCategories=function(){var aa=[];u._emptyCategories();if(u._initialCategories)for(var ka=0;ka<u._initialCategories.length;ka++)E(u._initialCategories[ka]);aa=aa.concat(u._traceIndices);ka=u._matchGroup;for(var ha in ka)R!==ha&&(ka=B[A.id2name(ha)],ka._categories=u._categories,ka._categoriesMap=u._categoriesMap,
aa=aa.concat(ka._traceIndices));return aa};var ba=B._d3locale;"date"===u.type&&(u._dateFormat=ba?ba.timeFormat:m,u._extraFormat=B._extraFormat);u._separators=B.separators;u._numFormat=ba?ba.numberFormat:n.format;delete u._minDtick;delete u._forceTick0}},{"../../constants/numerical":725,"../../lib":750,"./axis_ids":802,"./constants":805,d3:169,"d3-time-format":166,"fast-isnumeric":241}],820:[function(a,G,C){function q(k){var e=["showexponent","showtickprefix","showticksuffix"].filter(function(h){return void 0!==
k[h]});if(e.every(function(h){return k[h]===k[e[0]]})||1===e.length)return k[e[0]]}function n(k,e){m.coerce(k,e,f.tickformatstops,"enabled",void 0)&&(m.coerce(k,e,f.tickformatstops,"dtickrange",void 0),m.coerce(k,e,f.tickformatstops,"value",void 0))}var m=a("../../lib"),f=a("./layout_attributes"),b=a("../array_container_defaults");G.exports=function(k,e,h,l,c,g){if(!g||1===g.pass){var d=q(k);h("tickprefix")&&h("showtickprefix",d);h("ticksuffix",c.tickSuffixDflt)&&h("showticksuffix",d)}g&&2!==g.pass||
(g=q(k),h("tickprefix")&&h("showtickprefix",g),h("ticksuffix",c.tickSuffixDflt)&&h("showticksuffix",g),h("showticklabels")&&(c=c.font||{},d=e.color,m.coerceFont(h,"tickfont",{family:c.family,size:c.size,color:d&&d!==f.color.dflt?d:c.color}),h("tickangle"),"category"!==l&&(c=h("tickformat"),b(k,e,{name:"tickformatstops",inclusionAttr:"enabled",handleItemDefaults:n}),e.tickformatstops.length||delete e.tickformatstops,c||"date"===l||(h("showexponent",g),h("exponentformat"),h("minexponent"),h("separatethousands")))))}},
{"../../lib":750,"../array_container_defaults":794,"./layout_attributes":813}],821:[function(a,G,C){var q=a("../../lib"),n=a("./layout_attributes");G.exports=function(m,f,b,k){var e=q.coerce2(m,f,n,"ticklen"),h=q.coerce2(m,f,n,"tickwidth");m=q.coerce2(m,f,n,"tickcolor",f.color);b("ticks",k.outerTicks||e||h||m?"outside":"")||(delete f.ticklen,delete f.tickwidth,delete f.tickcolor)}},{"../../lib":750,"./layout_attributes":813}],822:[function(a,G,C){var q=a("./clean_ticks"),n=a("../../lib").isArrayOrTypedArray;
G.exports=function(m,f,b,k){function e(g){var d=m[g];return void 0!==d?d:(f._template||{})[g]}var h=e("tick0"),l=e("dtick"),c=e("tickvals");c=n(c)?"array":l?"linear":"auto";c=b("tickmode",c);"auto"===c?b("nticks"):"linear"===c?(b=f.dtick=q.dtick(l,k),f.tick0=q.tick0(h,k,f.calendar,b)):"multicategory"!==k&&(void 0===b("tickvals")?f.tickmode="auto":b("ticktext"))}},{"../../lib":750,"./clean_ticks":804}],823:[function(a,G,C){var q=a("d3"),n=a("../../registry"),m=a("../../lib"),f=a("../../components/drawing"),
b=a("./axes");G.exports=function(k,e,h,l){function c(z){var F=z.xaxis,D=z.yaxis;r._defs.select("#"+z.clipId+"\x3e rect").call(f.setTranslate,0,0).call(f.setScale,1,1);z.plot.call(f.setTranslate,F._offset,D._offset).call(f.setScale,1,1);F=z.plot.selectAll(".scatterlayer .trace");F.selectAll(".point").call(f.setPointGroupScale,1,1);F.selectAll(".textpoint").call(f.setTextPointsScale,1,1);F.call(f.hideOutsideRangePoints,z)}function g(){for(var z={},F=0;F<e.length;F++){var D=e[F],u=D.plotinfo.xaxis,B=
D.plotinfo.yaxis;D.xr1&&(z[u._name+".range"]=D.xr1.slice());D.yr1&&(z[B._name+".range"]=D.yr1.slice())}t&&t();return n.call("relayout",k,z).then(function(){for(var I=0;I<e.length;I++)c(e[I].plotinfo)})}function d(){for(var z={},F=0;F<e.length;F++){var D=e[F],u=D.plotinfo.xaxis,B=D.plotinfo.yaxis;D.xr0&&(z[u._name+".range"]=D.xr0.slice());D.yr0&&(z[B._name+".range"]=D.yr0.slice())}return n.call("relayout",k,z).then(function(){for(var I=0;I<e.length;I++)c(e[I].plotinfo)})}function p(){w=Date.now();
for(var z=x(Math.min(1,(w-y)/h.duration)),F=0;F<e.length;F++){var D=e[F],u=z,B=D.plotinfo,I=B.xaxis,J=B.yaxis,N=I._length,M=J._length,E=!!D.xr1,L=!!D.yr1,Q=[];if(E){var S=m.simpleMap(D.xr0,I.r2l),R=m.simpleMap(D.xr1,I.r2l),O=S[1]-S[0],T=R[1]-R[0];Q[0]=(S[0]*(1-u)+u*R[0]-S[0])/(S[1]-S[0])*N;Q[2]=N*(1-u+u*T/O);I.range[0]=I.l2r(S[0]*(1-u)+u*R[0]);I.range[1]=I.l2r(S[1]*(1-u)+u*R[1])}else Q[0]=0,Q[2]=N;L?(S=m.simpleMap(D.yr0,J.r2l),D=m.simpleMap(D.yr1,J.r2l),R=S[1]-S[0],O=D[1]-D[0],Q[1]=(S[1]*(1-u)+u*
D[1]-S[1])/(S[0]-S[1])*M,Q[3]=M*(1-u+u*O/R),J.range[0]=I.l2r(S[0]*(1-u)+u*D[0]),J.range[1]=J.l2r(S[1]*(1-u)+u*D[1])):(Q[1]=0,Q[3]=M);b.drawOne(k,I,{skipTitle:!0});b.drawOne(k,J,{skipTitle:!0});b.redrawComponents(k,[I._id,J._id]);u=E?N/Q[2]:1;D=L?M/Q[3]:1;I=I._offset-(E?Q[0]/Q[2]*N:0);J=J._offset-(L?Q[1]/Q[3]*M:0);B.clipRect.call(f.setTranslate,E?Q[0]:0,L?Q[1]:0).call(f.setScale,1/u,1/D);B.plot.call(f.setTranslate,I,J).call(f.setScale,u,D);f.setPointGroupScale(B.zoomScalePts,1/u,1/D);f.setTextPointsScale(B.zoomScaleTxt,
1/u,1/D)}w-y>h.duration?(g(),A=window.cancelAnimationFrame(p)):A=window.requestAnimationFrame(p)}var r=k._fullLayout;if(0===e.length)b.redrawComponents(k);else{var t;l&&(t=l());var w,x=q.ease(h.easing);k._transitionData._interruptCallbacks.push(function(){window.cancelAnimationFrame(A);A=null;return d()});var y=Date.now();var A=window.requestAnimationFrame(p);return Promise.resolve()}}},{"../../components/drawing":637,"../../lib":750,"../../registry":882,"./axes":799,d3:169}],824:[function(a,G,C){function q(f,
b){var k={v:"x",h:"y"}[f.orientation||"v"],e=n(f,"box-violin"),h=n(f._fullInput||{},"candlestick");return e&&!h&&b===k&&void 0===f[k]&&void 0===f[k+"0"]}var n=a("../../registry").traceIs,m=a("./axis_autotype");G.exports=function(f,b,k,e){if("-"===k("type",(e.splomStash||{}).type)){k=e.data;if("-"===b.type){e=b._id;var h=e.charAt(0);-1!==e.indexOf("scene")&&(e=h);b:{for(var l=e,c=0;c<k.length;c++){var g=k[c];if("splom"===g.type&&0<g._length&&(g["_"+h+"axes"]||{})[l]||(g[h+"axis"]||h)===l&&(q(g,h)||
(g[h]||[]).length||g[h+"0"])){var d=g;break b}}d=void 0}if(d)if("histogram"===d.type&&h==={v:"y",h:"x"}[d.orientation||"v"])b.type="linear";else if(g=h+"calendar",l=d[g],c={noMultiCategory:!n(d,"cartesian")||n(d,"noMultiCategory")},"box"===d.type&&d._hasPreCompStats&&h==={h:"x",v:"y"}[d.orientation||"v"]&&(c.noMultiCategory=!0),q(d,h)){var p={v:"x",h:"y"}[d.orientation||"v"],r=[];for(d=0;d<k.length;d++){var t=k[d];n(t,"box-violin")&&(t[h+"axis"]||h)===e&&(void 0!==t[p]?r.push(t[p][0]):void 0!==t.name?
r.push(t.name):r.push("text"),t[g]!==l&&(l=void 0))}b.type=m(r,l,c)}else"splom"===d.type?(k=d.dimensions[d._axesDim[e]],k.visible&&(b.type=m(k.values,l,c))):b.type=m(d[h]||[d[h+"0"]],l,c)}"-"===b.type?b.type="linear":f.type=b.type}}},{"../../registry":882,"./axis_autotype":800}],825:[function(a,G,C){function q(e,h,l){var c=!1;if("data"===h.type)e=e._fullData[null!==h.traces?h.traces[0]:0];else if("layout"===h.type)e=e._fullLayout;else return!1;e=k.nestedProperty(e,h.prop).get();l=l[h.type]=l[h.type]||
{};l.hasOwnProperty(h.prop)&&l[h.prop]!==e&&(c=!0);l[h.prop]=e;return{changed:c,value:e}}function n(e,h){var l=[];e=h[0];var c={};if("string"===typeof e)c[e]=h[1];else if(k.isPlainObject(e))c=e;else return l;f(c,function(g,d,p){l.push({type:"layout",prop:g,value:p})},"",0);return l}function m(e,h){var l=[];var c=h[0];var g=h[1];var d=h[2];h={};if("string"===typeof c)h[c]=g;else if(k.isPlainObject(c))h=c,void 0===d&&(d=g);else return l;void 0===d&&(d=null);f(h,function(p,r,t){if(Array.isArray(t)){t=
t.slice();var w=Math.min(t.length,e.data.length);d&&(w=Math.min(w,d.length));r=[];for(var x=0;x<w;x++)r[x]=d?d[x]:x}else r=d?d.slice():null;if(null===r)Array.isArray(t)&&(t=t[0]);else if(Array.isArray(r)){if(!Array.isArray(t))for(w=t,t=[],x=0;x<r.length;x++)t[x]=w;t.length=Math.min(r.length,t.length)}l.push({type:"data",prop:p,traces:r,value:t})},"",0);return l}function f(e,h,l,c){Object.keys(e).forEach(function(g){var d=e[g];if("_"!==g[0]){var p=l+(0<c?".":"")+g;k.isPlainObject(d)?f(d,h,p,c+1):h(p,
g,d)}})}var b=a("../registry"),k=a("../lib");C.manageCommandObserver=function(e,h,l,c){var g={},d=!0;h&&h._commandObserver&&(g=h._commandObserver);g.cache||(g.cache={});g.lookupTable={};var p=C.hasSimpleAPICommandBindings(e,l,g.lookupTable);if(h&&h._commandObserver){if(p)return g;if(h._commandObserver.remove)return h._commandObserver.remove(),h._commandObserver=null,g}if(p){q(e,p,g.cache);g.check=function(){if(d){var t=q(e,p,g.cache);t.changed&&c&&void 0!==g.lookupTable[t.value]&&(g.disable(),Promise.resolve(c({value:t.value,
type:p.type,prop:p.prop,traces:p.traces,index:g.lookupTable[t.value]})).then(g.enable,g.enable));return t.changed}};var r="plotly_relayout plotly_redraw plotly_restyle plotly_update plotly_animatingframe plotly_afterplot".split(" ");for(l=0;l<r.length;l++)e._internalOn(r[l],g.check);g.remove=function(){for(var t=0;t<r.length;t++)e._removeInternalListener(r[t],g.check)}}else k.log("Unable to automatically bind plot updates to API command"),g.lookupTable={},g.remove=function(){};g.disable=function(){d=
!1};g.enable=function(){d=!0};h&&(h._commandObserver=g);return g};C.hasSimpleAPICommandBindings=function(e,h,l){var c,g=h.length;for(c=0;c<g;c++){var d=h[c];var p=d.method;d=d.args;Array.isArray(d)||(d=[]);if(!p)return!1;d=C.computeAPICommandBindings(e,p,d);if(1!==d.length)return!1;if(t){p=d[0];if(p.type!==t.type||p.prop!==t.prop)return!1;if(Array.isArray(t.traces))if(Array.isArray(p.traces)){p.traces.sort();for(var r=0;r<t.traces.length;r++)if(t.traces[r]!==p.traces[r])return!1}else return!1;else if(p.prop!==
t.prop)return!1}else{var t=d[0];Array.isArray(t.traces)&&t.traces.sort()}p=d[0];p=p.value;if(Array.isArray(p))if(1===p.length)p=p[0];else return!1;l&&(l[p]=c)}return t};C.executeAPICommand=function(e,h,l){if("skip"===h)return Promise.resolve();var c=b.apiMethodRegistry[h];e=[e];Array.isArray(l)||(l=[]);for(var g=0;g<l.length;g++)e.push(l[g]);return c.apply(null,e).catch(function(d){k.warn("API call to Plotly."+h+" rejected.",d);return Promise.reject(d)})};C.computeAPICommandBindings=function(e,h,
l){Array.isArray(l)||(l=[]);switch(h){case "restyle":e=m(e,l);break;case "relayout":e=n(e,l);break;case "update":e=m(e,[l[0],l[2]]).concat(n(e,[l[1]]));break;case "animate":e=l;e=Array.isArray(e[0])&&1===e[0].length&&-1!==["string","number"].indexOf(typeof e[0][0])?[{type:"layout",prop:"_currentFrame",value:e[0][0].toString()}]:[];break;default:e=[]}return e}},{"../lib":750,"../registry":882}],826:[function(a,G,C){var q=a("../lib/extend").extendFlat;C.attributes=function(n,m){n=n||{};m={valType:"info_array",
editType:n.editType,items:[{valType:"number",min:0,max:1,editType:n.editType},{valType:"number",min:0,max:1,editType:n.editType}],dflt:[0,1]};m={x:q({},m,{}),y:q({},m,{}),editType:n.editType};n.noGridCell||(m.row={valType:"integer",min:0,dflt:0,editType:n.editType},m.column={valType:"integer",min:0,dflt:0,editType:n.editType});return m};C.defaults=function(n,m,f,b){var k=b&&b.x||[0,1];b=b&&b.y||[0,1];if(m=m.grid){var e=f("domain.column");void 0!==e&&(e<m.columns?k=m._domains.x[e]:delete n.domain.column);
e=f("domain.row");void 0!==e&&(e<m.rows?b=m._domains.y[e]:delete n.domain.row)}m=f("domain.x",k);f=f("domain.y",b);m[0]<m[1]||(n.domain.x=k.slice());f[0]<f[1]||(n.domain.y=b.slice())}},{"../lib/extend":740}],827:[function(a,G,C){G.exports=function(q){var n=q.editType,m=q.colorEditType;void 0===m&&(m=n);n={family:{valType:"string",noBlank:!0,strict:!0,editType:n},size:{valType:"number",min:1,editType:n},color:{valType:"color",editType:m},editType:n};q.arrayOk&&(n.family.arrayOk=!0,n.size.arrayOk=!0,
n.color.arrayOk=!0);return n}},{}],828:[function(a,G,C){G.exports={_isLinkedToArray:"frames_entry",group:{valType:"string"},name:{valType:"string"},traces:{valType:"any"},baseframe:{valType:"string"},data:{valType:"any"},layout:{valType:"any"}}},{}],829:[function(a,G,C){C.projNames={equirectangular:"equirectangular",mercator:"mercator",orthographic:"orthographic","natural earth":"naturalEarth",kavrayskiy7:"kavrayskiy7",miller:"miller",robinson:"robinson",eckert4:"eckert4","azimuthal equal area":"azimuthalEqualArea",
"azimuthal equidistant":"azimuthalEquidistant","conic equal area":"conicEqualArea","conic conformal":"conicConformal","conic equidistant":"conicEquidistant",gnomonic:"gnomonic",stereographic:"stereographic",mollweide:"mollweide",hammer:"hammer","transverse mercator":"transverseMercator","albers usa":"albersUsa","winkel tripel":"winkel3",aitoff:"aitoff",sinusoidal:"sinusoidal"};C.axesNames=["lonaxis","lataxis"];C.lonaxisSpan={orthographic:180,"azimuthal equal area":360,"azimuthal equidistant":360,
"conic conformal":180,gnomonic:160,stereographic:180,"transverse mercator":180,"*":360};C.lataxisSpan={"conic conformal":150,stereographic:179.5,"*":180};C.scopeDefaults={world:{lonaxisRange:[-180,180],lataxisRange:[-90,90],projType:"equirectangular",projRotate:[0,0,0]},usa:{lonaxisRange:[-180,-50],lataxisRange:[15,80],projType:"albers usa"},europe:{lonaxisRange:[-30,60],lataxisRange:[30,85],projType:"conic conformal",projRotate:[15,0,0],projParallels:[0,60]},asia:{lonaxisRange:[22,160],lataxisRange:[-15,
55],projType:"mercator",projRotate:[0,0,0]},africa:{lonaxisRange:[-30,60],lataxisRange:[-40,40],projType:"mercator",projRotate:[0,0,0]},"north america":{lonaxisRange:[-180,-45],lataxisRange:[5,85],projType:"conic conformal",projRotate:[-100,0,0],projParallels:[29.5,45.5]},"south america":{lonaxisRange:[-100,-30],lataxisRange:[-60,15],projType:"mercator",projRotate:[0,0,0]}};C.clipPad=.001;C.precision=.1;C.landColor="#F0DC82";C.waterColor="#3399FF";C.locationmodeToLayer={"ISO-3":"countries","USA-states":"subunits",
"country names":"countries"};C.sphereSVG={type:"Sphere"};C.fillLayers={ocean:1,land:1,lakes:1};C.lineLayers={subunits:1,countries:1,coastlines:1,rivers:1,frame:1};C.layers="bg ocean land lakes subunits countries coastlines rivers lataxis lonaxis frame backplot frontplot".split(" ");C.layersForChoropleth="bg ocean land subunits countries coastlines lataxis lonaxis frame backplot rivers lakes frontplot".split(" ");C.layerNameToAdjective={ocean:"ocean",land:"land",lakes:"lake",subunits:"subunit",countries:"country",
coastlines:"coastline",rivers:"river",frame:"frame"}},{}],830:[function(a,G,C){function q(u){this.id=u.id;this.graphDiv=u.graphDiv;this.container=u.container;this.topojsonURL=u.topojsonURL;this.isStatic=u.staticPlot;this.midPt=this.bounds=this.fitScale=this.viewInitial=this.scope=this.projection=this.topojson=this.topojsonName=null;this.hasChoropleth=!1;this.traceHash={};this.layers={};this.basePaths={};this.dataPaths={};this.dataPoints={};this.bgRect=this.clipRect=this.clipDef=null;this.makeFramework()}
function n(u){var B=u.projection.type,I=b.geo[A.projNames[B]](),J=u._isClipped?A.lonaxisSpan[B]/2:null;u=["center","rotate","parallels","clipExtent"];B=function(E){return E?I:[]};for(var N=0;N<u.length;N++){var M=u[N];"function"!==typeof I[M]&&(I[M]=B)}I.isLonLatOverEdges=function(E){if(null===I(E))return!0;if(J){var L=I.rotate();return b.geo.distance(E,[-L[0],-L[1]])>J*Math.PI/180}return!1};I.getPath=function(){return b.geo.path().projection(I)};I.getBounds=function(E){return I.getPath().bounds(E)};
I.fitExtent=function(E,L){var Q=E[1][0]-E[0][0],S=E[1][1]-E[0][1],R=I.clipExtent&&I.clipExtent();I.scale(150).translate([0,0]);R&&I.clipExtent(null);var O=I.getBounds(L);L=Math.min(Q/(O[1][0]-O[0][0]),S/(O[1][1]-O[0][1]));Q=+E[0][0]+(Q-L*(O[1][0]+O[0][0]))/2;E=+E[0][1]+(S-L*(O[1][1]+O[0][1]))/2;R&&I.clipExtent(R);return I.scale(150*L).translate([Q,E])};I.precision(A.precision);J&&I.clipAngle(J-A.clipPad);return I}function m(u,B,I){var J=B[u],N=A.scopeDefaults[B.scope];if("lonaxis"===u){var M=N.lonaxisRange;
var E=N.lataxisRange;var L=function(S,R){return[S,R]}}else"lataxis"===u&&(M=N.lataxisRange,E=N.lonaxisRange,L=function(S,R){return[R,S]});J={type:"linear",range:[M[0],M[1]-1E-6],tick0:J.tick0,dtick:J.dtick};d.setConvert(J,I);I=d.calcTicks(J);B.isScoped||"lonaxis"!==u||I.pop();u=I.length;B=Array(u);for(J=0;J<u;J++){N=I[J].x;M=B[J]=[];for(var Q=E[0];Q<E[1]+2.5;Q+=2.5)M.push(L(N,Q))}return{type:"MultiLineString",coordinates:B}}function f(u,B){var I=A.clipPad,J=u[0]+I;u=u[1]-I;var N=B[0]+I;B=B[1]-I;0<
J&&0>u&&(u+=360);I=(u-J)/4;return{type:"Polygon",coordinates:[[[J,N],[J,B],[J+I,B],[J+2*I,B],[J+3*I,B],[u,B],[u,N],[u-I,N],[u-2*I,N],[u-3*I,N],[J,N]]]}}var b=a("d3"),k=a("../../registry"),e=a("../../lib"),h=a("../../components/color"),l=a("../../components/drawing"),c=a("../../components/fx"),g=a("../plots"),d=a("../cartesian/axes"),p=a("../cartesian/autorange").getAutoRange,r=a("../../components/dragelement"),t=a("../cartesian/select").prepSelect,w=a("../cartesian/select").clearSelect,x=a("../cartesian/select").selectOnClick,
y=a("./zoom"),A=a("./constants"),z=a("../../lib/geo_location_utils"),F=a("../../lib/topojson_utils"),D=a("topojson-client").feature;a("./projections")(b);a=q.prototype;G.exports=function(u){return new q(u)};a.plot=function(u,B,I){var J=this,N=B[this.id],M=[],E=!1,L;for(L in A.layerNameToAdjective)if("frame"!==L&&N["show"+L]){E=!0;break}for(L=0;L<u.length;L++)if(u[0][0].trace.locationmode){E=!0;break}E&&(N=F.getTopojsonName(N),null===J.topojson||N!==J.topojsonName)&&(J.topojsonName=N,void 0===PlotlyGeoAssets.topojson[J.topojsonName]&&
M.push(J.fetchTopojson()));M=M.concat(z.fetchTraceGeoData(u));I.push(new Promise(function(Q,S){Promise.all(M).then(function(){J.topojson=PlotlyGeoAssets.topojson[J.topojsonName];J.update(u,B);Q()}).catch(S)}))};a.fetchTopojson=function(){var u=this,B=F.getTopojsonPath(u.topojsonURL,u.topojsonName);return new Promise(function(I,J){b.json(B,function(N,M){if(N)return 404===N.status?J(Error(["plotly.js could not find topojson file at",B,". Make sure the *topojsonURL* plot config option is set properly."].join(" "))):
J(Error(["unexpected error while fetching topojson file at",B].join(" ")));PlotlyGeoAssets.topojson[u.topojsonName]=M;I()})})};a.update=function(u,B){var I=B[this.id];this.hasChoropleth=!1;for(var J=0;J<u.length;J++){var N=u[J],M=N[0].trace;"choropleth"===M.type&&(this.hasChoropleth=!0);!0===M.visible&&0<M._length&&M._module.calcGeoJSON(N,B)}this.updateProjection(u,B)||(this.viewInitial&&this.scope===I.scope||this.saveViewInitial(I),this.scope=I.scope,this.updateBaseLayers(B,I),this.updateDims(B,
I),this.updateFx(B,I),g.generalUpdatePerTraceModule(this.graphDiv,this,u,I),u=this.layers.frontplot.select(".scatterlayer"),this.dataPoints.point=u.selectAll(".point"),this.dataPoints.text=u.selectAll("text"),this.dataPaths.line=u.selectAll(".js-line"),u=this.layers.backplot.select(".choroplethlayer"),this.dataPaths.choropleth=u.selectAll("path"),this.render())};a.updateProjection=function(u,B){u=this.graphDiv;var I=B[this.id],J=B._size,N=I.domain,M=I.projection,E=I.lonaxis,L=I.lataxis,Q=E._ax,S=
L._ax;B=this.projection=n(I);N=[[J.l+J.w*N.x[0],J.t+J.h*(1-N.y[1])],[J.l+J.w*N.x[1],J.t+J.h*(1-N.y[0])]];J=I.center||{};var R=M.rotation||{},O=E.range||[],T=L.range||[];I.fitbounds&&(Q._length=N[1][0]-N[0][0],S._length=N[1][1]-N[0][1],Q.range=p(u,Q),S.range=p(u,S),L=(Q.range[0]+Q.range[1])/2,E=(S.range[0]+S.range[1])/2,I._isScoped?J={lon:L,lat:E}:I._isClipped?(J={lon:L,lat:E},R={lon:L,lat:E,roll:R.roll},T=M.type,O=A.lonaxisSpan[T]/2||180,T=A.lataxisSpan[T]/2||90,O=[L-O,L+O],T=[E-T,E+T]):(J={lon:L,
lat:E},R={lon:L,lat:R.lat,roll:R.roll}));B.center([J.lon-R.lon,J.lat-R.lat]).rotate([-R.lon,-R.lat,R.roll]).parallels(M.parallels);R=f(O,T);B.fitExtent(N,R);N=this.bounds=B.getBounds(R);L=this.fitScale=B.scale();R=B.translate();if(!(isFinite(N[0][0])&&isFinite(N[0][1])&&isFinite(N[1][0])&&isFinite(N[1][1]))||isNaN(R[0])||isNaN(R[0])){B=["fitbounds","projection.rotation","center","lonaxis.range","lataxis.range"];I={};for(J=0;J<B.length;J++)I[this.id+"."+B[J]]=null;this.viewInitial=null;e.warn("Invalid geo settings, relayout'ing to default view.");
u._promises.push(k.call("relayout",u,I));return"Invalid geo settings, relayout'ing to default view."}I.fitbounds?(u=B.getBounds(f(Q.range,S.range)),u=Math.min((N[1][0]-N[0][0])/(u[1][0]-u[0][0]),(N[1][1]-N[0][1])/(u[1][1]-u[0][1])),isFinite(u)?B.scale(u*L):e.warn("Something went wrong during"+this.id+"fitbounds computations.")):B.scale(M.scale*L);u=this.midPt=[(N[0][0]+N[1][0])/2,(N[0][1]+N[1][1])/2];B.translate([R[0]+(u[0]-R[0]),R[1]+(u[1]-R[1])]).clipExtent(N);I._isAlbersUsa&&(u=B([J.lon,J.lat]),
I=B.translate(),B.translate([I[0]-(u[0]-I[0]),I[1]-(u[1]-I[1])]))};a.updateBaseLayers=function(u,B){function I(Q){return"lonaxis"===Q||"lataxis"===Q}var J=this,N=J.topojson,M=J.layers,E=J.basePaths,L=(this.hasChoropleth?A.layersForChoropleth:A.layers).filter(function(Q){return A.lineLayers[Q]||A.fillLayers[Q]?B["show"+Q]:I(Q)?B[Q].showgrid:!0});L=J.framework.selectAll(".layer").data(L,String);L.exit().each(function(Q){delete M[Q];delete E[Q];b.select(this).remove()});L.enter().append("g").attr("class",
function(Q){return"layer "+Q}).each(function(Q){var S=M[Q]=b.select(this);"bg"===Q?J.bgRect=S.append("rect").style("pointer-events","all"):I(Q)?E[Q]=S.append("path").style("fill","none"):"backplot"===Q?S.append("g").classed("choroplethlayer",!0):"frontplot"===Q?S.append("g").classed("scatterlayer",!0):A.lineLayers[Q]?E[Q]=S.append("path").style("fill","none").style("stroke-miterlimit",2):A.fillLayers[Q]&&(E[Q]=S.append("path").style("stroke","none"))});L.order();L.each(function(Q){var S=E[Q],R=A.layerNameToAdjective[Q];
"frame"===Q?S.datum(A.sphereSVG):A.lineLayers[Q]||A.fillLayers[Q]?S.datum(D(N,N.objects[Q])):I(Q)&&S.datum(m(Q,B,u)).call(h.stroke,B[Q].gridcolor).call(l.dashLine,"",B[Q].gridwidth);A.lineLayers[Q]?S.call(h.stroke,B[R+"color"]).call(l.dashLine,"",B[R+"width"]):A.fillLayers[Q]&&S.call(h.fill,B[R+"color"])})};a.updateDims=function(u,B){var I=this.bounds,J=(B.framewidth||0)/2;u=I[0][0]-J;var N=I[0][1]-J,M=I[1][0]-u+J;I=I[1][1]-N+J;l.setRect(this.clipRect,u,N,M,I);this.bgRect.call(l.setRect,u,N,M,I).call(h.fill,
B.bgcolor);this.xaxis._offset=u;this.xaxis._length=M;this.yaxis._offset=N;this.yaxis._length=I};a.updateFx=function(u,B){function I(){var O=N.viewInitial,T={},V;for(V in O)T[N.id+"."+V]=O[V];k.call("_guiRelayout",M,T);M.emit("plotly_doubleclick",null)}function J(O){return N.projection.invert([O[0]+N.xaxis._offset,O[1]+N.yaxis._offset])}var N=this,M=N.graphDiv,E=N.bgRect,L=u.dragmode,Q=u.clickmode;if(!N.isStatic){var S;"select"===L?S=function(O,T){(O.range={})[N.id]=[J([T.xmin,T.ymin]),J([T.xmax,T.ymax])]}:
"lasso"===L&&(S=function(O,T,V){(O.lassoPoints={})[N.id]=V.filtered.map(J)});var R={element:N.bgRect.node(),gd:M,plotinfo:{id:N.id,xaxis:N.xaxis,yaxis:N.yaxis,fillRangeItems:S},xaxes:[N.xaxis],yaxes:[N.yaxis],subplot:N.id,clickFn:function(O){2===O&&w(M)}};if("pan"===L){if(E.node().onmousedown=null,E.call(y(N,B)),E.on("dblclick.zoom",I),!M._context._scrollZoom.geo)E.on("wheel.zoom",null)}else if("select"===L||"lasso"===L)E.on(".zoom",null),R.prepFn=function(O,T,V){t(O,T,V,R,L)},r.init(R);E.on("mousemove",
function(){var O=N.projection.invert(b.mouse(this));if(!O||isNaN(O[0])||isNaN(O[1]))return r.unhover(M,b.event);N.xaxis.p2c=function(){return O[0]};N.yaxis.p2c=function(){return O[1]};c.hover(M,b.event,N.id)});E.on("mouseout",function(){M._dragging||r.unhover(M,b.event)});E.on("click",function(){"select"!==L&&"lasso"!==L&&(-1<Q.indexOf("select")&&x(b.event,M,[N.xaxis],[N.yaxis],N.id,R),-1<Q.indexOf("event")&&c.click(M,b.event))})}};a.makeFramework=function(){var u=this,B=u.graphDiv,I=B._fullLayout,
J="clip"+I._uid+u.id;u.clipDef=I._clips.append("clipPath").attr("id",J);u.clipRect=u.clipDef.append("rect");u.framework=b.select(u.container).append("g").attr("class","geo "+u.id).call(l.setClipUrl,J,B);u.project=function(N){return(N=u.projection(N))?[N[0]-u.xaxis._offset,N[1]-u.yaxis._offset]:[null,null]};u.xaxis={_id:"x",c2p:function(N){return u.project(N)[0]}};u.yaxis={_id:"y",c2p:function(N){return u.project(N)[1]}};u.mockAxis={type:"linear",showexponent:"all",exponentformat:"B"};d.setConvert(u.mockAxis,
I)};a.saveViewInitial=function(u){var B=u.center||{},I=u.projection,J=I.rotation||{};this.viewInitial={fitbounds:u.fitbounds,"projection.scale":I.scale};e.extendFlat(this.viewInitial,u._isScoped?{"center.lon":B.lon,"center.lat":B.lat}:u._isClipped?{"projection.rotation.lon":J.lon,"projection.rotation.lat":J.lat}:{"center.lon":B.lon,"center.lat":B.lat,"projection.rotation.lon":J.lon})};a.render=function(){function u(M){return(M=I(M.lonlat))?"translate("+M[0]+","+M[1]+")":null}function B(M){return I.isLonLatOverEdges(M.lonlat)?
"none":null}var I=this.projection,J=I.getPath(),N;for(N in this.basePaths)this.basePaths[N].attr("d",J);for(N in this.dataPaths)this.dataPaths[N].attr("d",function(M){return J(M.geojson)});for(N in this.dataPoints)this.dataPoints[N].attr("display",B).attr("transform",u)}},{"../../components/color":615,"../../components/dragelement":634,"../../components/drawing":637,"../../components/fx":655,"../../lib":750,"../../lib/geo_location_utils":743,"../../lib/topojson_utils":777,"../../registry":882,"../cartesian/autorange":798,
"../cartesian/axes":799,"../cartesian/select":818,"../plots":862,"./constants":829,"./projections":834,"./zoom":835,d3:169,"topojson-client":551}],831:[function(a,G,C){var q=a("../../plots/get_data").getSubplotCalcData;C=a("../../lib").counterRegex;var n=a("./geo");C=C("geo");G.exports={attr:"geo",name:"geo",idRoot:"geo",idRegex:C,attrRegex:C,attributes:{geo:{valType:"subplotid",dflt:"geo",editType:"calc"}},layoutAttributes:a("./layout_attributes"),supplyLayoutDefaults:a("./layout_defaults"),plot:function(m){for(var f=
m._fullLayout,b=m.calcdata,k=f._subplots.geo,e=0;e<k.length;e++){var h=k[e],l=q(b,"geo",h),c=f[h]._subplot;c||(c=n({id:h,graphDiv:m,container:f._geolayer.node(),topojsonURL:m._context.topojsonURL,staticPlot:m._context.staticPlot}),f[h]._subplot=c);c.plot(l,f,m._promises)}},updateFx:function(m){m=m._fullLayout;for(var f=m._subplots.geo,b=0;b<f.length;b++){var k=m[f[b]];k._subplot.updateFx(m,k)}},clean:function(m,f,b,k){m=k._subplots.geo||[];for(b=0;b<m.length;b++){var e=m[b],h=k[e]._subplot;!f[e]&&
h&&(h.framework.remove(),h.clipDef.remove())}}}},{"../../lib":750,"../../plots/get_data":836,"./geo":830,"./layout_attributes":832,"./layout_defaults":833}],832:[function(a,G,C){C=a("../../components/color/attributes");var q=a("../domain").attributes,n=a("./constants");a=a("../../plot_api/edit_types").overrideAll;var m={range:{valType:"info_array",items:[{valType:"number"},{valType:"number"}]},showgrid:{valType:"boolean",dflt:!1},tick0:{valType:"number",dflt:0},dtick:{valType:"number"},gridcolor:{valType:"color",
dflt:C.lightLine},gridwidth:{valType:"number",min:0,dflt:1}};(G.exports=a({domain:q({name:"geo"},{}),fitbounds:{valType:"enumerated",values:[!1,"locations","geojson"],dflt:!1,editType:"plot"},resolution:{valType:"enumerated",values:[110,50],dflt:110,coerceNumber:!0},scope:{valType:"enumerated",values:Object.keys(n.scopeDefaults),dflt:"world"},projection:{type:{valType:"enumerated",values:Object.keys(n.projNames)},rotation:{lon:{valType:"number"},lat:{valType:"number"},roll:{valType:"number"}},parallels:{valType:"info_array",
items:[{valType:"number"},{valType:"number"}]},scale:{valType:"number",min:0,dflt:1}},center:{lon:{valType:"number"},lat:{valType:"number"}},visible:{valType:"boolean",dflt:!0},showcoastlines:{valType:"boolean"},coastlinecolor:{valType:"color",dflt:C.defaultLine},coastlinewidth:{valType:"number",min:0,dflt:1},showland:{valType:"boolean",dflt:!1},landcolor:{valType:"color",dflt:n.landColor},showocean:{valType:"boolean",dflt:!1},oceancolor:{valType:"color",dflt:n.waterColor},showlakes:{valType:"boolean",
dflt:!1},lakecolor:{valType:"color",dflt:n.waterColor},showrivers:{valType:"boolean",dflt:!1},rivercolor:{valType:"color",dflt:n.waterColor},riverwidth:{valType:"number",min:0,dflt:1},showcountries:{valType:"boolean"},countrycolor:{valType:"color",dflt:C.defaultLine},countrywidth:{valType:"number",min:0,dflt:1},showsubunits:{valType:"boolean"},subunitcolor:{valType:"color",dflt:C.defaultLine},subunitwidth:{valType:"number",min:0,dflt:1},showframe:{valType:"boolean"},framecolor:{valType:"color",dflt:C.defaultLine},
framewidth:{valType:"number",min:0,dflt:1},bgcolor:{valType:"color",dflt:C.background},lonaxis:m,lataxis:m},"plot","from-root")).uirevision={valType:"any",editType:"none"}},{"../../components/color/attributes":614,"../../plot_api/edit_types":781,"../domain":826,"./constants":829}],833:[function(a,G,C){function q(h,l,c,g){var d=f(g.fullData,"geo",g.id).map(function(J){return J._expandedIndex});g=c("resolution");var p=c("scope"),r=b.scopeDefaults[p],t=c("projection.type",r.projType),w=l._isAlbersUsa=
"albers usa"===t;w&&(p=l.scope="usa");var x=l._isScoped="world"!==p,y=l._isConic=-1!==t.indexOf("conic"),A=l._isClipped=!!b.lonaxisSpan[t];!1===h.visible&&(h=n.extendDeep({},l._template),h.showcoastlines=!1,h.showcountries=!1,h.showframe=!1,h.showlakes=!1,h.showland=!1,h.showocean=!1,h.showrivers=!1,h.showsubunits=!1,h.lonaxis&&(h.lonaxis.showgrid=!1),h.lataxis&&(h.lataxis.showgrid=!1),l._template=h);h=c("visible");for(var z,F=0;F<e.length;F++){var D=e[F];z=[30,10][F];if(x)var u=r[D+"Range"];else{u=
b[D+"Span"];u=(u[t]||u["*"])/2;var B=c("projection.rotation."+D.substr(0,3),r.projRotate[F]);u=[B-u,B+u]}u=c(D+".range",u);c(D+".tick0");c(D+".dtick",z);if(z=c(D+".showgrid",h?void 0:!1))c(D+".gridcolor"),c(D+".gridwidth");l[D]._ax={type:"linear",_id:D.slice(0,3),_traceIndices:d,setScale:n.identity,c2l:n.identity,r2l:n.identity,autorange:!0,range:u.slice(),_m:1,_input:{}}}F=l.lonaxis.range;d=l.lataxis.range;t=F[0];F=F[1];0<t&&0>F&&(F+=360);t=(t+F)/2;if(!w){F=x?r.projRotate:[t,0,0];var I=c("projection.rotation.lon",
F[0]);c("projection.rotation.lat",F[1]);c("projection.rotation.roll",F[2]);if(z=c("showcoastlines",!x&&h))c("coastlinecolor"),c("coastlinewidth");(z=c("showocean",h?void 0:!1))&&c("oceancolor")}w?(I=-96.6,w=38.7):(I=x?t:I,w=(d[0]+d[1])/2);c("center.lon",I);c("center.lat",w);y&&c("projection.parallels",r.projParallels||[0,60]);c("projection.scale");(z=c("showland",h?void 0:!1))&&c("landcolor");(z=c("showlakes",h?void 0:!1))&&c("lakecolor");if(z=c("showrivers",h?void 0:!1))c("rivercolor"),c("riverwidth");
if(z=c("showcountries",x&&"usa"!==p&&h))c("countrycolor"),c("countrywidth");if("usa"===p||"north america"===p&&50===g)c("showsubunits",h),c("subunitcolor"),c("subunitwidth");!x&&(z=c("showframe",h))&&(c("framecolor"),c("framewidth"));c("bgcolor");c("fitbounds")&&(delete l.projection.scale,x?(delete l.center.lon,delete l.center.lat):A?(delete l.center.lon,delete l.center.lat,delete l.projection.rotation.lon,delete l.projection.rotation.lat,delete l.lonaxis.range,delete l.lataxis.range):(delete l.center.lon,
delete l.center.lat,delete l.projection.rotation.lon))}var n=a("../../lib"),m=a("../subplot_defaults"),f=a("../get_data").getSubplotData,b=a("./constants"),k=a("./layout_attributes"),e=b.axesNames;G.exports=function(h,l,c){m(h,l,c,{type:"geo",attributes:k,handleDefaults:q,fullData:c,partition:"y"})}},{"../../lib":750,"../get_data":836,"../subplot_defaults":876,"./constants":829,"./layout_attributes":832}],834:[function(a,G,C){G.exports=function(q){function n(O,T){return{type:"Feature",id:O.id,properties:O.properties,
geometry:m(O.geometry,T)}}function m(O,T){if(!O)return null;if("GeometryCollection"===O.type)return{type:"GeometryCollection",geometries:object.geometries.map(function(X){return m(X,T)})};if(!B.hasOwnProperty(O.type))return null;var V=B[O.type];q.geo.stream(O,T(V));return V.result()}function f(){}function b(O){return 1<O?J:-1>O?-J:Math.asin(O)}function k(O){return 1<O?0:-1>O?I:Math.acos(O)}function e(O,T){var V=(2+J)*Math.sin(T);T/=2;for(var X=0,ba=Infinity;10>X&&1E-6<Math.abs(ba);X++)ba=Math.cos(T),
T-=ba=(T+Math.sin(T)*(ba+2)-V)/(2*ba*(1+ba));return[2/Math.sqrt(I*(4+I))*O*(1+Math.cos(T)),2*Math.sqrt(I/(4+I))*Math.sin(T)]}function h(O,T){function V(X,ba){X=Q(X/T,ba);X[0]*=O;return X}2>arguments.length&&(T=O);if(1===T)return Q;if(Infinity===T)return l;V.invert=function(X,ba){X=Q.invert(X/O,ba);X[0]*=T;return X};return V}function l(O,T){return[O*Math.cos(T)/Math.cos(T/=2),2*Math.sin(T)]}function c(O,T){return[3*O/(2*I)*Math.sqrt(I*I/3-T*T),T]}function g(O,T){return[O,1.25*Math.log(Math.tan(I/4+
.4*T))]}function d(O){return function(T){var V=O*Math.sin(T),X=30,ba;do T-=ba=(T+Math.sin(T)-V)/(1+Math.cos(T));while(1E-6<Math.abs(ba)&&0<--X);return T/2}}function p(O,T){var V=T*T,X=V*V;return[O*(.8707-.131979*V+X*(-.013791+X*(.003971*V-.001529*X))),T*(1.007226+V*(.015085+X*(-.044475+.028874*V-.005916*X)))]}function r(O,T){var V=Math.min(18,36*Math.abs(T)/I),X=Math.floor(V);V-=X;var ba=(ca=R[X])[0],aa=ca[1],ka=(ca=R[++X])[0],ha=ca[1];X=(ca=R[Math.min(19,++X)])[0];ca=ca[1];var ca;return[O*(ka+V*
(X-ba)/2+V*V*(X-2*ka+ba)/2),(0<T?J:-J)*(ha+V*(ca-aa)/2+V*V*(ca-2*ha+aa)/2)]}function t(O,T){return[O*Math.cos(T),T]}function w(O,T){var V=Math.cos(T);var X=(X=k(V*Math.cos(O/=2)))?X/Math.sin(X):1;return[2*V*Math.sin(O)*X,Math.sin(T)*X]}function x(O,T){var V=w(O,T);return[(V[0]+O/J)/2,(V[1]+T)/2]}q.geo.project=function(O,T){T=T.stream;if(!T)throw Error("not yet supported");return(O&&y.hasOwnProperty(O.type)?y[O.type]:m)(O,T)};var y={Feature:n,FeatureCollection:function(O,T){return{type:"FeatureCollection",
features:O.features.map(function(V){return n(V,T)})}}},A=[],z=[],F={point:function(O,T){A.push([O,T])},result:function(){var O=A.length?2>A.length?{type:"Point",coordinates:A[0]}:{type:"MultiPoint",coordinates:A}:null;A=[];return O}},D={lineStart:f,point:function(O,T){A.push([O,T])},lineEnd:function(){A.length&&(z.push(A),A=[])},result:function(){var O=z.length?2>z.length?{type:"LineString",coordinates:z[0]}:{type:"MultiLineString",coordinates:z}:null;z=[];return O}},u={polygonStart:f,lineStart:f,
point:function(O,T){A.push([O,T])},lineEnd:function(){var O=A.length;if(O){do A.push(A[0].slice());while(4>++O);z.push(A);A=[]}},polygonEnd:f,result:function(){if(!z.length)return null;var O=[],T=[];z.forEach(function(V){if(4>(ba=V.length))var X=!1;else{X=0;for(var ba,aa=V[ba-1][1]*V[0][0]-V[ba-1][0]*V[0][1];++X<ba;)aa+=V[X-1][1]*V[X][0]-V[X-1][0]*V[X][1];X=0>=aa}X?O.push([V]):T.push(V)});T.forEach(function(V){var X=V[0];O.some(function(ba){for(var aa=ba[0],ka=X[0],ha=X[1],ca=!1,sa=0,ma=aa.length,
ra=ma-1;sa<ma;ra=sa++){var qa=aa[sa],Y=qa[0];qa=qa[1];var pa=aa[ra];ra=pa[0];pa=pa[1];qa>ha^pa>ha&&ka<(ra-Y)*(ha-qa)/(pa-qa)+Y&&(ca=!ca)}if(ca)return ba.push(V),!0})||O.push([V])});z=[];return O.length?1<O.length?{type:"MultiPolygon",coordinates:O}:{type:"Polygon",coordinates:O[0]}:null}},B={Point:F,MultiPoint:F,LineString:D,MultiLineString:D,Polygon:u,MultiPolygon:u,Sphere:u},I=Math.PI,J=I/2,N=I/180,M=180/I,E=q.geo.projection,L=q.geo.projectionMutator;q.geo.interrupt=function(O){function T(sa,ma){for(var ra=
0>ma?-1:1,qa=aa[+(0>ma)],Y=0,pa=qa.length-1;Y<pa&&sa>qa[Y][2][0];++Y);sa=O(sa-qa[Y][1][0],ma);sa[0]+=O(qa[Y][1][0],ra*ma>ra*qa[Y][0][1]?qa[Y][0][1]:ma)[0];return sa}function V(){ka=aa.map(function(sa){return sa.map(function(ma){var ra=O(ma[0][0],ma[0][1])[0],qa=O(ma[2][0],ma[2][1])[0],Y=O(ma[1][0],ma[0][1])[1];ma=O(ma[1][0],ma[1][1])[1];if(Y>ma){var pa=Y;Y=ma;ma=pa}return[[ra,Y],[qa,ma]]})})}function X(){for(var sa=[],ma=0,ra=aa[0].length;ma<ra;++ma){var qa=aa[0][ma],Y=180*qa[0][0]/I,pa=180*qa[0][1]/
I,oa=180*qa[1][1]/I,ua=180*qa[2][0]/I;qa=180*qa[2][1]/I;sa.push(ba([[Y+1E-6,pa+1E-6],[Y+1E-6,oa-1E-6],[ua-1E-6,oa-1E-6],[ua-1E-6,qa+1E-6]],30))}for(ma=aa[1].length-1;0<=ma;--ma)qa=aa[1][ma],Y=180*qa[0][0]/I,pa=180*qa[0][1]/I,oa=180*qa[1][1]/I,ua=180*qa[2][0]/I,qa=180*qa[2][1]/I,sa.push(ba([[ua-1E-6,qa-1E-6],[ua-1E-6,oa+1E-6],[Y+1E-6,oa+1E-6],[Y+1E-6,pa-1E-6]],30));return{type:"Polygon",coordinates:[q.merge(sa)]}}function ba(sa,ma){for(var ra=-1,qa=sa.length,Y=sa[0],pa,oa,ua,ya=[];++ra<qa;){pa=sa[ra];
oa=(pa[0]-Y[0])/ma;ua=(pa[1]-Y[1])/ma;for(var ja=0;ja<ma;++ja)ya.push([Y[0]+ja*oa,Y[1]+ja*ua]);Y=pa}ya.push(pa);return ya}var aa=[[[[-I,0],[0,J],[I,0]]],[[[-I,0],[0,-J],[I,0]]]],ka;O.invert&&(T.invert=function(sa,ma){for(var ra=ka[+(0>ma)],qa=aa[+(0>ma)],Y=0,pa=ra.length;Y<pa;++Y){var oa=ra[Y];if(oa[0][0]<=sa&&sa<oa[1][0]&&oa[0][1]<=ma&&ma<oa[1][1])return ra=O.invert(sa-O(qa[Y][1][0],0)[0],ma),ra[0]+=qa[Y][1][0],qa=T(ra[0],ra[1]),sa=[sa,ma],1E-6>Math.abs(qa[0]-sa[0])&&1E-6>Math.abs(qa[1]-sa[1])?ra:
null}});var ha=q.geo.projection(T),ca=ha.stream;ha.stream=function(sa){var ma=ha.rotate(),ra=ca(sa),qa=(ha.rotate([0,0]),ca(sa));ha.rotate(ma);ra.sphere=function(){q.geo.stream(X(),qa)};return ra};ha.lobes=function(sa){if(!arguments.length)return aa.map(function(ma){return ma.map(function(ra){return[[180*ra[0][0]/I,180*ra[0][1]/I],[180*ra[1][0]/I,180*ra[1][1]/I],[180*ra[2][0]/I,180*ra[2][1]/I]]})});aa=sa.map(function(ma){return ma.map(function(ra){return[[ra[0][0]*I/180,ra[0][1]*I/180],[ra[1][0]*
I/180,ra[1][1]*I/180],[ra[2][0]*I/180,ra[2][1]*I/180]]})});V();return ha};return ha};e.invert=function(O,T){T=.5*T*Math.sqrt((4+I)/I);var V=b(T),X=Math.cos(V);return[O/(2/Math.sqrt(I*(4+I))*(1+X)),b((V+T*(X+2))/(2+J))]};(q.geo.eckert4=function(){return E(e)}).raw=e;var Q=q.geo.azimuthalEqualArea.raw;l.invert=function(O,T){T=2*b(T/2);return[O*Math.cos(T/2)/Math.cos(T),T]};(q.geo.hammer=function(){var O=2,T=L(h),V=T(O);V.coefficient=function(X){return arguments.length?T(O=+X):O};return V}).raw=h;c.invert=
function(O,T){return[2/3*I*O/Math.sqrt(I*I/3-T*T),T]};(q.geo.kavrayskiy7=function(){return E(c)}).raw=c;g.invert=function(O,T){return[O,2.5*Math.atan(Math.exp(.8*T))-.625*I]};(q.geo.miller=function(){return E(g)}).raw=g;d(I);var S=function(O,T,V){function X(aa,ka){return[O*aa*Math.cos(ka=ba(ka)),T*Math.sin(ka)]}var ba=d(V);X.invert=function(aa,ka){ka=b(ka/T);return[aa/(O*Math.cos(ka)),b((2*ka+Math.sin(2*ka))/V)]};return X}(Math.SQRT2/J,Math.SQRT2,I);(q.geo.mollweide=function(){return E(S)}).raw=S;
p.invert=function(O,T){var V=T,X=25;do{var ba=V*V;var aa=ba*ba;V-=aa=(V*(1.007226+ba*(.015085+aa*(-.044475+.028874*ba-.005916*aa)))-T)/(1.007226+ba*(.045255+aa*(-.311325+.259866*ba-.005916*11*aa)))}while(1E-6<Math.abs(aa)&&0<--X);return[O/(.8707+(ba=V*V)*(-.131979+ba*(-.013791+ba*ba*ba*(.003971-.001529*ba)))),V]};(q.geo.naturalEarth=function(){return E(p)}).raw=p;var R=[[.9986,-.062],[1,0],[.9986,.062],[.9954,.124],[.99,.186],[.9822,.248],[.973,.31],[.96,.372],[.9427,.434],[.9216,.4958],[.8962,.5571],
[.8679,.6176],[.835,.6769],[.7986,.7346],[.7597,.7903],[.7186,.8435],[.6732,.8936],[.6213,.9394],[.5722,.9761],[.5322,1]];R.forEach(function(O){O[1]*=1.0144});r.invert=function(O,T){var V=T/J,X=90*V,ba=Math.min(18,Math.abs(X/5)),aa=Math.max(0,Math.floor(ba));do{var ka=R[aa][1],ha=R[aa+1][1],ca=R[Math.min(19,aa+2)][1],sa=ca-ka,ma=2*(Math.abs(V)-ha)/sa;ka=(ca-2*ha+ka)/sa;ma*=1-ka*ma*(1-2*ka*ma);if(0<=ma||1===aa){X=(0<=T?5:-5)*(ma+ba);V=50;do ba=Math.min(18,Math.abs(X)/5),aa=Math.floor(ba),ma=ba-aa,
ka=R[aa][1],ha=R[aa+1][1],ca=R[Math.min(19,aa+2)][1],X-=(ba=(0<=T?J:-J)*(ha+ma*(ca-ka)/2+ma*ma*(ca-2*ha+ka)/2)-T)*M;while(1E-12<Math.abs(ba)&&0<--V);break}}while(0<=--aa);T=R[aa][0];ba=R[aa+1][0];aa=R[Math.min(19,aa+2)][0];return[O/(ba+ma*(aa-T)/2+ma*ma*(aa-2*ba+T)/2),X*N]};(q.geo.robinson=function(){return E(r)}).raw=r;t.invert=function(O,T){return[O/Math.cos(T),T]};(q.geo.sinusoidal=function(){return E(t)}).raw=t;w.invert=function(O,T){if(!(O*O+4*T*T>I*I+1E-6)){var V=O,X=T,ba=25;do{var aa=Math.sin(V),
ka=Math.sin(V/2),ha=Math.cos(V/2),ca=Math.sin(X),sa=Math.cos(X),ma=Math.sin(2*X),ra=ca*ca,qa=sa*sa,Y=ka*ka,pa=1-qa*ha*ha,oa=pa?k(sa*ha)*Math.sqrt(ua=1/pa):ua=0,ua;pa=2*oa*sa*ka-O;var ya=oa*ca-T,ja=ua*(qa*Y+oa*sa*ha*ra),za=ua*(.5*aa*ma-2*oa*ca*ka);aa=.25*ua*(ma*ka-oa*ca*qa*aa);sa=ua*(ra*ha+oa*Y*sa);ha=za*aa-sa*ja;if(!ha)break;za=(ya*za-pa*sa)/ha;pa=(pa*aa-ya*ja)/ha;V-=za;X-=pa}while((1E-6<Math.abs(za)||1E-6<Math.abs(pa))&&0<--ba);return[V,X]}};(q.geo.aitoff=function(){return E(w)}).raw=w;x.invert=
function(O,T){var V=O,X=T,ba=25;do{var aa=Math.cos(X),ka=Math.sin(X),ha=Math.sin(2*X),ca=ka*ka,sa=aa*aa,ma=Math.sin(V),ra=Math.cos(V/2),qa=Math.sin(V/2),Y=qa*qa,pa=1-sa*ra*ra,oa=pa?k(aa*ra)*Math.sqrt(ua=1/pa):ua=0,ua;pa=.5*(2*oa*aa*qa+V/J)-O;var ya=.5*(oa*ka+X)-T,ja=.5*ua*(sa*Y+oa*aa*ra*ca)+.5/J,za=ua*(ma*ha/4-oa*ka*qa);ka=.125*ua*(ha*qa-oa*ka*sa*ma);ca=.5*ua*(ca*ra+oa*Y*aa)+.5;aa=za*ka-ca*ja;za=(ya*za-pa*ca)/aa;pa=(pa*ka-ya*ja)/aa;V-=za;X-=pa}while((1E-6<Math.abs(za)||1E-6<Math.abs(pa))&&0<--ba);
return[V,X]};(q.geo.winkel3=function(){return E(x)}).raw=x}},{}],835:[function(a,G,C){function q(A,z){return d.behavior.zoom().translate(z.translate()).scale(z.scale())}function n(A,z,F){function D(Q,S){E[u+"."+Q]=p.nestedProperty(J,Q).get();r.call("_storeDirectGUIEdit",I,N._preGUI,E);var R=p.nestedProperty(M,Q);R.get()!==S&&(R.set(S),p.nestedProperty(J,Q).set(S),L[u+"."+Q]=S)}var u=A.id,B=A.graphDiv,I=B.layout,J=I[u],N=B._fullLayout,M=N[u],E={},L={};F(D);D("projection.scale",z.scale()/A.fitScale);
D("fitbounds",!1);B.emit("plotly_relayout",L)}function m(A,z){function F(u){var B=z.invert(A.midPt);u("center.lon",B[0]);u("center.lat",B[1])}var D=q(A,z);D.on("zoomstart",function(){d.select(this).style(x)}).on("zoom",function(){z.scale(d.event.scale).translate(d.event.translate);A.render();var u=z.invert(A.midPt);A.graphDiv.emit("plotly_relayouting",{"geo.projection.scale":z.scale()/A.fitScale,"geo.center.lon":u[0],"geo.center.lat":u[1]})}).on("zoomend",function(){d.select(this).style(y);n(A,z,
F)});return D}function f(A,z){function F(S){var R=z.rotate(),O=z.invert(A.midPt);S("projection.rotation.lon",-R[0]);S("center.lon",O[0]);S("center.lat",O[1])}var D=q(A,z),u,B,I,J,N,M,E,L,Q;D.on("zoomstart",function(){d.select(this).style(x);u=d.mouse(this);B=z.rotate();I=z.translate();J=B;N=z.invert(u)}).on("zoom",function(){M=d.mouse(this);var S=u;var R=z.invert(S);R?(R=z(R),S=2<Math.abs(R[0]-S[0])||2<Math.abs(R[1]-S[1])):S=!0;S?(D.scale(z.scale()),D.translate(z.translate())):(z.scale(d.event.scale),
z.translate([I[0],d.event.translate[1]]),N?z.invert(M)&&(L=z.invert(M),E=[J[0]+(L[0]-N[0]),B[1],B[2]],z.rotate(E),J=E):(u=M,N=z.invert(u)),Q=!0,A.render(),S=z.rotate(),R=z.invert(A.midPt),A.graphDiv.emit("plotly_relayouting",{"geo.projection.scale":z.scale()/A.fitScale,"geo.center.lon":R[0],"geo.center.lat":R[1],"geo.projection.rotation.lon":-S[0]}))}).on("zoomend",function(){d.select(this).style(y);Q&&n(A,z,F)});return D}function b(A,z){function F(M){I++||M({type:"zoomstart"})}function D(M){var E=
z.rotate();M("projection.rotation.lon",-E[0]);M("projection.rotation.lat",-E[1])}z.rotate();z.scale();var u=q(A,z),B=g(u,"zoomstart","zoom","zoomend"),I=0,J=u.on,N;u.on("zoomstart",function(){d.select(this).style(x);var M=d.mouse(this),E=z.rotate(),L=E,Q=z.translate(),S=e(E);N=k(z,M);J.call(u,"zoom",function(){var R=d.mouse(this);z.scale(d.event.scale);if(!N)M=R,N=k(z,M);else if(k(z,R)){z.rotate(E).translate(Q);var O=k(z,R);var T=N;if(T&&O){R=[T[1]*O[2]-T[2]*O[1],T[2]*O[0]-T[0]*O[2],T[0]*O[1]-T[1]*
O[0]];var V=Math.sqrt(c(R,R));O=.5*Math.acos(Math.max(-1,Math.min(1,c(T,O))));T=Math.sin(O)/V;var X=V&&[Math.cos(O),R[2]*T,-R[1]*T,R[0]*T]}else X=void 0;R=S[0];V=S[1];O=S[2];T=S[3];var ba=X[0],aa=X[1],ka=X[2];X=X[3];R=[R*ba-V*aa-O*ka-T*X,R*aa+V*ba+O*X-T*ka,R*ka-V*X+O*ba+T*aa,R*X+V*ka-O*aa+T*ba];O=[Math.atan2(2*(R[0]*R[1]+R[2]*R[3]),1-2*(R[1]*R[1]+R[2]*R[2]))*w,Math.asin(Math.max(-1,Math.min(1,2*(R[0]*R[2]-R[3]*R[1]))))*w,Math.atan2(2*(R[0]*R[3]+R[1]*R[2]),1-2*(R[2]*R[2]+R[3]*R[3]))*w];V=N;R=L;ba=
l(V,2,O[0]);ba=l(ba,1,O[1]);ba=l(ba,0,O[2]-R[2]);T=V[0];X=V[1];V=V[2];O=ba[0];aa=ba[1];ba=ba[2];ka=Math.atan2(X,T)*w;X=Math.sqrt(T*T+X*X);Math.abs(aa)>X?(T=(0<aa?90:-90)-ka,X=0):(T=Math.asin(aa/X)*w-ka,X=Math.sqrt(X*X-aa*aa));aa=180-T-2*ka;ka=(Math.atan2(ba,O)-Math.atan2(V,X))*w;V=(Math.atan2(ba,O)-Math.atan2(V,-X))*w;O=h(R[0],R[1],T,ka);ba=h(R[0],R[1],aa,V);R=O<=ba?[T,ka,R[2]]:[aa,V,R[2]];isFinite(R[0])&&isFinite(R[1])&&isFinite(R[2])||(R=L);z.rotate(R);L=R}B.of(this,arguments)({type:"zoom"})});
F(B.of(this,arguments))}).on("zoomend",function(){d.select(this).style(y);J.call(u,"zoom",null);var M=B.of(this,arguments);--I||M({type:"zoomend"});n(A,z,D)}).on("zoom.redraw",function(){A.render();var M=z.rotate();A.graphDiv.emit("plotly_relayouting",{"geo.projection.scale":z.scale()/A.fitScale,"geo.projection.rotation.lon":-M[0],"geo.projection.rotation.lat":-M[1]})});return d.rebind(u,B,"on")}function k(A,z){if(A=(z=A.invert(z))&&isFinite(z[0])&&isFinite(z[1])){A=z[0]*t;z=z[1]*t;var F=Math.cos(z);
A=[F*Math.cos(A),F*Math.sin(A),Math.sin(z)]}return A}function e(A){var z=.5*A[0]*t,F=.5*A[1]*t,D=.5*A[2]*t;A=Math.sin(z);z=Math.cos(z);var u=Math.sin(F);F=Math.cos(F);var B=Math.sin(D);D=Math.cos(D);return[z*F*D+A*u*B,A*F*D-z*u*B,z*u*D+A*F*B,z*F*B-A*u*D]}function h(A,z,F,D){A=((F-A)%360+540)%360-180;z=((D-z)%360+540)%360-180;return Math.sqrt(A*A+z*z)}function l(A,z,F){var D=F*t;F=A.slice();var u=0===z?1:0;z=2===z?1:2;var B=Math.cos(D);D=Math.sin(D);F[u]=A[u]*B-A[z]*D;F[z]=A[z]*B+A[u]*D;return F}function c(A,
z){for(var F=0,D=0,u=A.length;D<u;++D)F+=A[D]*z[D];return F}function g(A){for(var z=0,F=arguments.length,D=[];++z<F;)D.push(arguments[z]);var u=d.dispatch.apply(null,D);u.of=function(B,I){return function(J){try{var N=J.sourceEvent=d.event;J.target=A;d.event=J;u[J.type].apply(B,I)}finally{d.event=N}}};return u}var d=a("d3"),p=a("../../lib"),r=a("../../registry"),t=Math.PI/180,w=180/Math.PI,x={cursor:"pointer"},y={cursor:"auto"};G.exports=function(A,z){return(z._isScoped?m:z._isClipped?b:f)(A,A.projection)}},
{"../../lib":750,"../../registry":882,d3:169}],836:[function(a,G,C){var q=a("../registry"),n=a("./cartesian/constants").SUBPLOT_PATTERN;C.getSubplotCalcData=function(m,f,b){f=q.subplotsRegistry[f];if(!f)return[];f=f.attr;for(var k=[],e=0;e<m.length;e++){var h=m[e];h[0].trace[f]===b&&k.push(h)}return k};C.getModuleCalcData=function(m,f){var b=[],k=[];f="string"===typeof f?q.getModule(f).plot:"function"===typeof f?f:f.plot;if(!f)return[b,m];for(var e=0;e<m.length;e++){var h=m[e],l=h[0].trace;!0===l.visible&&
0!==l._length&&(l._module.plot===f?b.push(h):k.push(h))}return[b,k]};C.getSubplotData=function(m,f,b){if(!q.subplotsRegistry[f])return[];var k=q.subplotsRegistry[f].attr,e=[];if("gl2d"===f){var h=b.match(n);var l="x"+h[1];var c="y"+h[2]}for(var g=0;g<m.length;g++)h=m[g],"gl2d"===f&&q.traceIs(h,"gl2d")?h[k[0]]===l&&h[k[1]]===c&&e.push(h):h[k]===b&&e.push(h);return e}},{"../registry":882,"./cartesian/constants":805}],837:[function(a,G,C){function q(e,h){this.element=e;this.plot=h;this.wheelListener=
this.mouseListener=null;this.lastInputTime=Date.now();this.lastPos=[0,0];this.boxInited=this.boxEnabled=!1;this.boxStart=[0,0];this.boxEnd=[0,0];this.dragStart=[0,0]}var n=a("mouse-change"),m=a("mouse-wheel"),f=a("mouse-event-offset"),b=a("../cartesian/constants"),k=a("has-passive-events");G.exports=function(e){function h(){for(var p=e.graphDiv._fullLayout._axisConstraintGroups,r=e.xaxis._id,t=e.yaxis._id,w=0;w<p.length;w++)if(-1!==p[w][r]){if(-1!==p[w][t])return!0;break}return!1}function l(p,r,t){function w(u,
B,I){var J=Math.min(B,I);B=Math.max(B,I);J!==B?(x[u]=J,x[u+2]=B,d.dataBox=x,e.setRanges(x)):(e.selectBox.selectBox=[0,0,1,1],e.glplot.setDirty())}var x=e.calcDataBox(),y=g.viewBox,A=d.lastPos[0],z=d.lastPos[1],F=b.MINDRAG*g.pixelRatio,D=b.MINZOOM*g.pixelRatio;r*=g.pixelRatio;t*=g.pixelRatio;t=y[3]-y[1]-t;switch(e.fullLayout.dragmode){case "zoom":p?(z=r/(y[2]-y[0])*(x[2]-x[0])+x[0],y=t/(y[3]-y[1])*(x[3]-x[1])+x[1],d.boxInited||(d.boxStart[0]=z,d.boxStart[1]=y,d.dragStart[0]=r,d.dragStart[1]=t),d.boxEnd[0]=
z,d.boxEnd[1]=y,d.boxInited=!0,d.boxEnabled||d.boxStart[0]===d.boxEnd[0]&&d.boxStart[1]===d.boxEnd[1]||(d.boxEnabled=!0),y=Math.abs(d.dragStart[0]-r)<D,D=Math.abs(d.dragStart[1]-t)<D,!h()||y&&D?(y&&(d.boxEnd[0]=d.boxStart[0]),D&&(d.boxEnd[1]=d.boxStart[1])):(D=d.boxEnd[0]-d.boxStart[0],y=d.boxEnd[1]-d.boxStart[1],z=(x[3]-x[1])/(x[2]-x[0]),Math.abs(D*z)>Math.abs(y)?(d.boxEnd[1]=d.boxStart[1]+Math.abs(D)*z*(0<=y?1:-1),d.boxEnd[1]<x[1]?(d.boxEnd[1]=x[1],d.boxEnd[0]=d.boxStart[0]+(x[1]-d.boxStart[1])/
Math.abs(z)):d.boxEnd[1]>x[3]&&(d.boxEnd[1]=x[3],d.boxEnd[0]=d.boxStart[0]+(x[3]-d.boxStart[1])/Math.abs(z))):(d.boxEnd[0]=d.boxStart[0]+Math.abs(y)/z*(0<=D?1:-1),d.boxEnd[0]<x[0]?(d.boxEnd[0]=x[0],d.boxEnd[1]=d.boxStart[1]+(x[0]-d.boxStart[0])*Math.abs(z)):d.boxEnd[0]>x[2]&&(d.boxEnd[0]=x[2],d.boxEnd[1]=d.boxStart[1]+(x[2]-d.boxStart[0])*Math.abs(z))))):d.boxEnabled?(D=d.boxStart[0]!==d.boxEnd[0],y=d.boxStart[1]!==d.boxEnd[1],D||y?(D&&(w(0,d.boxStart[0],d.boxEnd[0]),e.xaxis.autorange=!1),y&&(w(1,
d.boxStart[1],d.boxEnd[1]),e.yaxis.autorange=!1),e.relayoutCallback()):e.glplot.setDirty(),d.boxEnabled=!1,d.boxInited=!1):d.boxInited&&(d.boxInited=!1);break;case "pan":d.boxEnabled=!1,d.boxInited=!1,p?(d.panning||(d.dragStart[0]=r,d.dragStart[1]=t),Math.abs(d.dragStart[0]-r)<F&&(r=d.dragStart[0]),Math.abs(d.dragStart[1]-t)<F&&(t=d.dragStart[1]),D=(A-r)*(x[2]-x[0])/(g.viewBox[2]-g.viewBox[0]),y=(z-t)*(x[3]-x[1])/(g.viewBox[3]-g.viewBox[1]),x[0]+=D,x[2]+=D,x[1]+=y,x[3]+=y,e.setRanges(x),d.panning=
!0,d.lastInputTime=Date.now(),e.xaxis.autorange=!1,e.yaxis.autorange=!1,e.cameraChanged(),e.handleAnnotations()):d.panning&&(d.panning=!1,e.relayoutCallback())}d.lastPos[0]=r;d.lastPos[1]=t}var c=e.mouseContainer,g=e.glplot,d=new q(c,g);d.mouseListener=n(c,l);c.addEventListener("touchstart",function(p){var r=f(p.changedTouches[0],c);l(0,r[0],r[1]);l(1,r[0],r[1]);p.preventDefault()},k?{passive:!1}:!1);c.addEventListener("touchmove",function(p){p.preventDefault();var r=f(p.changedTouches[0],c);l(1,
r[0],r[1]);p.preventDefault()},k?{passive:!1}:!1);c.addEventListener("touchend",function(p){l(0,d.lastPos[0],d.lastPos[1]);p.preventDefault()},k?{passive:!1}:!1);d.wheelListener=m(c,function(p,r){if(!e.scrollZoom)return!1;p=e.calcDataBox();var t=g.viewBox;r=Math.exp(5*r/(t[3]-t[1]));var w=d.lastPos[0]/(t[2]-t[0])*(p[2]-p[0])+p[0];t=d.lastPos[1]/(t[3]-t[1])*(p[3]-p[1])+p[1];p[0]=(p[0]-w)*r+w;p[2]=(p[2]-w)*r+w;p[1]=(p[1]-t)*r+t;p[3]=(p[3]-t)*r+t;e.setRanges(p);d.lastInputTime=Date.now();e.xaxis.autorange=
!1;e.yaxis.autorange=!1;e.cameraChanged();e.handleAnnotations();e.relayoutCallback();return!0},!0);return d}},{"../cartesian/constants":805,"has-passive-events":415,"mouse-change":457,"mouse-event-offset":458,"mouse-wheel":460}],838:[function(a,G,C){function q(b){this.scene=b;this.gl=b.gl;this.pixelRatio=b.pixelRatio;this.screenBox=[0,0,1,1];this.viewBox=[0,0,1,1];this.dataBox=[-1,-1,1,1];this.borderLineEnable=[!1,!1,!1,!1];this.borderLineWidth=[1,1,1,1];this.borderLineColor=[[0,0,0,1],[0,0,0,1],
[0,0,0,1],[0,0,0,1]];this.ticks=[[],[]];this.tickEnable=[!0,!0,!1,!1];this.tickPad=[15,15,15,15];this.tickAngle=[0,0,0,0];this.tickColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1],[0,0,0,1]];this.tickMarkLength=[0,0,0,0];this.tickMarkWidth=[0,0,0,0];this.tickMarkColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1],[0,0,0,1]];this.labels=["x","y"];this.labelEnable=[!0,!0,!1,!1];this.labelAngle=[0,Math.PI/2,0,3*Math.PI/2];this.labelPad=[15,15,15,15];this.labelSize=[12,12];this.labelFont=["sans-serif","sans-serif"];this.labelColor=
[[0,0,0,1],[0,0,0,1],[0,0,0,1],[0,0,0,1]];this.title="";this.titleEnable=!0;this.titleCenter=[0,0,0,0];this.titleAngle=0;this.titleColor=[0,0,0,1];this.titleFont="sans-serif";this.titleSize=18;this.gridLineEnable=[!0,!0];this.gridLineColor=[[0,0,0,.5],[0,0,0,.5]];this.gridLineWidth=[1,1];this.zeroLineEnable=[!0,!0];this.zeroLineWidth=[1,1];this.zeroLineColor=[[0,0,0,1],[0,0,0,1]];this.borderColor=[0,0,0,0];this.backgroundColor=[0,0,0,0];this.static=this.scene.staticPlot}var n=a("../cartesian/axes"),
m=a("../../lib/str2rgbarray");a=q.prototype;var f=["xaxis","yaxis"];a.merge=function(b){this.titleEnable=!1;this.backgroundColor=m(b.plot_bgcolor);var k,e;for(e=0;2>e;++e){var h=f[e];var l=h.charAt(0);var c=b[this.scene[h]._name];l=c.title.text===this.scene.fullLayout._dfltTitle[l]?"":c.title.text;for(k=0;2>=k;k+=2)this.labelEnable[e+k]=!1,this.labels[e+k]=l,this.labelColor[e+k]=m(c.title.font.color),this.labelFont[e+k]=c.title.font.family,this.labelSize[e+k]=c.title.font.size,this.labelPad[e+k]=
this.getLabelPad(h,c),this.tickEnable[e+k]=!1,this.tickColor[e+k]=m((c.tickfont||{}).color),this.tickAngle[e+k]="auto"===c.tickangle?0:Math.PI*-c.tickangle/180,this.tickPad[e+k]=this.getTickPad(c),this.tickMarkLength[e+k]=0,this.tickMarkWidth[e+k]=c.tickwidth||0,this.tickMarkColor[e+k]=m(c.tickcolor),this.borderLineEnable[e+k]=!1,this.borderLineColor[e+k]=m(c.linecolor),this.borderLineWidth[e+k]=c.linewidth||0;k=this.hasSharedAxis(c);l=this.hasAxisInDfltPos(h,c)&&!k;h=this.hasAxisInAltrPos(h,c)&&
!k;var g=c.mirror||!1;var d=k?-1!==String(g).indexOf("all"):!!g;k=k?"allticks"===g:-1!==String(g).indexOf("ticks");l?this.labelEnable[e]=!0:h&&(this.labelEnable[e+2]=!0);l?this.tickEnable[e]=c.showticklabels:h&&(this.tickEnable[e+2]=c.showticklabels);if(l||d)this.borderLineEnable[e]=c.showline;if(h||d)this.borderLineEnable[e+2]=c.showline;if(l||k)this.tickMarkLength[e]=this.getTickMarkLength(c);if(h||k)this.tickMarkLength[e+2]=this.getTickMarkLength(c);this.gridLineEnable[e]=c.showgrid;this.gridLineColor[e]=
m(c.gridcolor);this.gridLineWidth[e]=c.gridwidth;this.zeroLineEnable[e]=c.zeroline;this.zeroLineColor[e]=m(c.zerolinecolor);this.zeroLineWidth[e]=c.zerolinewidth}};a.hasSharedAxis=function(b){var k=this.scene;return 0!==n.findSubplotsWithAxis(k.fullLayout._subplots.gl2d,b).indexOf(k.id)};a.hasAxisInDfltPos=function(b,k){k=k.side;if("xaxis"===b)return"bottom"===k;if("yaxis"===b)return"left"===k};a.hasAxisInAltrPos=function(b,k){k=k.side;if("xaxis"===b)return"top"===k;if("yaxis"===b)return"right"===
k};a.getLabelPad=function(b,k){var e=k.title.font.size,h=k.showticklabels;if("xaxis"===b)return"top"===k.side?-10+e*(1.5+(h?1:0)):-10+e*(1.5+(h?.5:0));if("yaxis"===b)return"right"===k.side?10+e*(1.5+(h?1:.5)):10+e*(1.5+(h?.5:0))};a.getTickPad=function(b){return"outside"===b.ticks?10+b.ticklen:15};a.getTickMarkLength=function(b){if(!b.ticks)return 0;var k=b.ticklen;return"inside"===b.ticks?-k:k};G.exports=function(b){return new q(b)}},{"../../lib/str2rgbarray":773,"../cartesian/axes":799}],839:[function(a,
G,C){G=a("../../plot_api/edit_types").overrideAll;var q=a("./scene2d"),n=a("../layout_attributes"),m=a("../../constants/xmlns_namespaces"),f=a("../cartesian/constants"),b=a("../cartesian"),k=a("../../components/fx/layout_attributes"),e=a("../get_data").getSubplotData;C.name="gl2d";C.attr=["xaxis","yaxis"];C.idRoot=["x","y"];C.idRegex=f.idRegex;C.attrRegex=f.attrRegex;C.attributes=a("../cartesian/attributes");C.supplyLayoutDefaults=function(h,l,c){l._has("cartesian")||b.supplyLayoutDefaults(h,l,c)};
C.layoutAttrOverrides=G(b.layoutAttributes,"plot","from-root");C.baseLayoutAttrOverrides=G({plot_bgcolor:n.plot_bgcolor,hoverlabel:k.hoverlabel},"plot","nested");C.plot=function(h){for(var l=h._fullLayout,c=h._fullData,g=l._subplots.gl2d,d=0;d<g.length;d++){var p=g[d],r=l._plots[p],t=e(c,"gl2d",p),w=r._scene2d;void 0===w&&(w=new q({id:p,graphDiv:h,container:h.querySelector(".gl-container"),staticPlot:h._context.staticPlot,plotGlPixelRatio:h._context.plotGlPixelRatio},l),r._scene2d=w);w.plot(t,h.calcdata,
l,h.layout)}};C.clean=function(h,l,c,g){for(var d=g._subplots.gl2d||[],p=0;p<d.length;p++){var r=d[p],t=g._plots[r];t._scene2d&&0===e(h,"gl2d",r).length&&(t._scene2d.destroy(),delete g._plots[r])}b.clean.apply(this,arguments)};C.drawFramework=function(h){h._context.staticPlot||b.drawFramework(h)};C.toSVG=function(h){h=h._fullLayout;for(var l=h._subplots.gl2d,c=0;c<l.length;c++){var g=h._plots[l[c]]._scene2d,d=g.toImage("png");h._glimages.append("svg:image").attr({xmlns:m.svg,"xlink:href":d,x:0,y:0,
width:"100%",height:"100%",preserveAspectRatio:"none"});g.destroy()}};C.updateFx=function(h){h=h._fullLayout;for(var l=h._subplots.gl2d,c=0;c<l.length;c++)h._plots[l[c]]._scene2d.updateFx(h.dragmode)}},{"../../components/fx/layout_attributes":656,"../../constants/xmlns_namespaces":726,"../../plot_api/edit_types":781,"../cartesian":812,"../cartesian/attributes":797,"../cartesian/constants":805,"../get_data":836,"../layout_attributes":853,"./scene2d":840}],840:[function(a,G,C){function q(F,D){this.container=
F.container;this.graphDiv=F.graphDiv;this.pixelRatio=F.plotGlPixelRatio||window.devicePixelRatio;this.id=F.id;this.staticPlot=!!F.staticPlot;this.scrollZoom=this.graphDiv._context._scrollZoom.cartesian;this.fullData=null;this.updateRefs(D);this.makeFramework();this.stopped||(this.glplotOptions=l(this),this.glplotOptions.merge(D),this.glplot=b(this.glplotOptions),this.camera=c(this),this.traces={},this.spikes=k(this.glplot),this.selectBox=e(this.glplot,{innerFill:!1,outerFill:!0}),this.lastButtonState=
0,this.pickResult=null,this.isMouseOver=!0,this.stopped=!1,this.redraw=this.draw.bind(this),this.redraw())}var n=a("../../registry"),m=a("../../plots/cartesian/axes"),f=a("../../components/fx"),b=a("gl-plot2d"),k=a("gl-spikes2d"),e=a("gl-select-box"),h=a("webgl-context"),l=a("./convert"),c=a("./camera"),g=a("../../lib/show_no_webgl_msg");C=a("../cartesian/constraints");var d=C.enforce,p=C.clean,r=a("../cartesian/autorange").doAutoRange;C=a("../../components/dragelement/helpers");var t=C.drawMode,
w=C.selectMode,x=["xaxis","yaxis"],y,A,z=a("../cartesian/constants").SUBPLOT_PATTERN;G.exports=q;a=q.prototype;a.makeFramework=function(){if(this.staticPlot){if(!A&&(y=document.createElement("canvas"),A=h({canvas:y,preserveDrawingBuffer:!1,premultipliedAlpha:!0,antialias:!0}),!A))throw Error("Error creating static canvas/context for image server");this.canvas=y;this.gl=A}else{var F=this.container.querySelector(".gl-canvas-focus"),D=h({canvas:F,preserveDrawingBuffer:!0,premultipliedAlpha:!0});if(!D){g(this);
this.stopped=!0;return}this.canvas=F;this.gl=D}F=this.canvas;F.style.width="100%";F.style.height="100%";F.style.position="absolute";F.style.top="0px";F.style.left="0px";F.style["pointer-events"]="none";this.updateSize(F);F=this.svgContainer=document.createElementNS("http://www.w3.org/2000/svg","svg");F.style.position="absolute";F.style.top=F.style.left="0px";F.style.width=F.style.height="100%";F.style["z-index"]=20;F.style["pointer-events"]="none";D=this.mouseContainer=document.createElement("div");
D.style.position="absolute";D.style["pointer-events"]="auto";this.pickCanvas=this.container.querySelector(".gl-canvas-pick");var u=this.container;u.appendChild(F);u.appendChild(D);var B=this;D.addEventListener("mouseout",function(){B.isMouseOver=!1;B.unhover()});D.addEventListener("mouseover",function(){B.isMouseOver=!0})};a.toImage=function(F){F||(F="png");this.stopped=!0;this.staticPlot&&this.container.appendChild(y);this.updateSize(this.canvas);var D=this.glplot.gl,u=D.drawingBufferWidth,B=D.drawingBufferHeight;
D.clearColor(1,1,1,0);D.clear(D.COLOR_BUFFER_BIT|D.DEPTH_BUFFER_BIT);this.glplot.setDirty();this.glplot.draw();D.bindFramebuffer(D.FRAMEBUFFER,null);var I=new Uint8Array(u*B*4);D.readPixels(0,0,u,B,D.RGBA,D.UNSIGNED_BYTE,I);D=0;for(var J=B-1;D<J;++D,--J)for(var N=0;N<u;++N)for(var M=0;4>M;++M){var E=I[4*(u*D+N)+M];I[4*(u*D+N)+M]=I[4*(u*J+N)+M];I[4*(u*J+N)+M]=E}D=document.createElement("canvas");D.width=u;D.height=B;J=D.getContext("2d");u=J.createImageData(u,B);u.data.set(I);J.putImageData(u,0,0);
switch(F){case "jpeg":F=D.toDataURL("image/jpeg");break;case "webp":F=D.toDataURL("image/webp");break;default:F=D.toDataURL("image/png")}this.staticPlot&&this.container.removeChild(y);return F};a.updateSize=function(F){F||(F=this.canvas);var D=this.pixelRatio,u=this.fullLayout,B=Math.ceil(D*u.width)|0;D=Math.ceil(D*u.height)|0;if(F.width!==B||F.height!==D)F.width=B,F.height=D;return F};a.computeTickMarks=function(){this.xaxis.setScale();this.yaxis.setScale();for(var F=[m.calcTicks(this.xaxis),m.calcTicks(this.yaxis)],
D=0;2>D;++D)for(var u=0;u<F[D].length;++u)F[D][u].text+="";return F};a.updateRefs=function(F){this.fullLayout=F;F=this.id.match(z);var D="yaxis"+F[2];this.xaxis=this.fullLayout["xaxis"+F[1]];this.yaxis=this.fullLayout[D]};a.relayoutCallback=function(){var F=this.graphDiv,D=this.xaxis,u=this.yaxis,B=F.layout,I={},J=I[D._name+".range"]=D.range.slice(),N=I[u._name+".range"]=u.range.slice();I[D._name+".autorange"]=D.autorange;I[u._name+".autorange"]=u.autorange;n.call("_storeDirectGUIEdit",F.layout,F._fullLayout._preGUI,
I);var M=B[D._name];M.range=J;M.autorange=D.autorange;D=B[u._name];D.range=N;D.autorange=u.autorange;I.lastInputTime=this.camera.lastInputTime;F.emit("plotly_relayout",I)};a.cameraChanged=function(){var F=this.camera;this.glplot.setDataBox(this.calcDataBox());var D=this.computeTickMarks(),u=this.glplotOptions.ticks;a:{for(var B=0;2>B;++B){var I=D[B],J=u[B];if(I.length!==J.length){u=!0;break a}for(var N=0;N<I.length;++N)if(I[N].x!==J[N].x){u=!0;break a}}u=!1}u&&(this.glplotOptions.ticks=D,this.glplotOptions.dataBox=
F.dataBox,this.glplot.update(this.glplotOptions),this.handleAnnotations())};a.handleAnnotations=function(){for(var F=this.graphDiv,D=this.fullLayout.annotations,u=0;u<D.length;u++){var B=D[u];B.xref===this.xaxis._id&&B.yref===this.yaxis._id&&n.getComponentMethod("annotations","drawOne")(F,u)}};a.destroy=function(){if(this.glplot){var F=this.traces;F&&Object.keys(F).map(function(D){F[D].dispose();delete F[D]});this.glplot.dispose();this.container.removeChild(this.svgContainer);this.container.removeChild(this.mouseContainer);
this.glplot=this.fullData=null;this.stopped=!0;this.camera.mouseListener.enabled=!1;this.mouseContainer.removeEventListener("wheel",this.camera.wheelListener);this.camera=null}};a.plot=function(F,D,u){var B=this.glplot;this.updateRefs(u);this.xaxis.clearCalc();this.yaxis.clearCalc();this.updateTraces(F,D);this.updateFx(u.dragmode);var I=u.width,J=u.height;this.updateSize(this.canvas);F=this.glplotOptions;F.merge(u);F.screenBox=[0,0,I,J];D={_fullLayout:{_axisConstraintGroups:this.graphDiv._fullLayout._axisConstraintGroups,
xaxis:this.xaxis,yaxis:this.yaxis}};p(D,this.xaxis);p(D,this.yaxis);var N=u._size,M=this.xaxis.domain,E=this.yaxis.domain;F.viewBox=[N.l+M[0]*N.w,N.b+E[0]*N.h,I-N.r-(1-M[1])*N.w,J-N.t-(1-E[1])*N.h];this.mouseContainer.style.width=N.w*(M[1]-M[0])+"px";this.mouseContainer.style.height=N.h*(E[1]-E[0])+"px";this.mouseContainer.height=N.h*(E[1]-E[0]);this.mouseContainer.style.left=N.l+M[0]*N.w+"px";this.mouseContainer.style.top=N.t+(1-E[1])*N.h+"px";for(J=0;2>J;++J)I=this[x[J]],I._length=F.viewBox[J+2]-
F.viewBox[J],r(this.graphDiv,I),I.setScale();d(D);F.ticks=this.computeTickMarks();F.dataBox=this.calcDataBox();F.merge(u);B.update(F);this.glplot.draw()};a.calcDataBox=function(){var F=this.xaxis,D=this.yaxis,u=F.range,B=D.range;F=F.r2l;D=D.r2l;return[F(u[0]),D(B[0]),F(u[1]),D(B[1])]};a.setRanges=function(F){var D=this.xaxis,u=this.yaxis,B=D.l2r,I=u.l2r;D.range=[B(F[0]),B(F[2])];u.range=[I(F[1]),I(F[3])]};a.updateTraces=function(F,D){var u=Object.keys(this.traces),B;this.fullData=F;var I=0;a:for(;I<
u.length;I++){var J=u[I],N=this.traces[J];for(B=0;B<F.length;B++){var M=F[B];if(M.uid===J&&M.type===N.type)continue a}N.dispose();delete this.traces[J]}for(I=0;I<F.length;I++)M=F[I],u=D[I],(B=this.traces[M.uid])?B.update(M,u):(B=M._module.plot(this,M,u),this.traces[M.uid]=B);this.glplot.objects.sort(function(E,L){return E._trace.index-L._trace.index})};a.updateFx=function(F){w(F)||t(F)?(this.pickCanvas.style["pointer-events"]="none",this.mouseContainer.style["pointer-events"]="none"):(this.pickCanvas.style["pointer-events"]=
"auto",this.mouseContainer.style["pointer-events"]="auto");this.mouseContainer.style.cursor="pan"===F?"move":"zoom"===F?"crosshair":null};a.emitPointAction=function(F,D){for(var u=F.trace.uid,B=F.pointIndex,I,J=0;J<this.fullData.length;J++)this.fullData[J].uid===u&&(I=this.fullData[J]);F={x:F.traceCoord[0],y:F.traceCoord[1],curveNumber:I.index,pointNumber:B,data:I._input,fullData:this.fullData,xaxis:this.xaxis,yaxis:this.yaxis};f.appendArrayPointValue(F,I,B);this.graphDiv.emit(D,{points:[F]})};a.draw=
function(){if(!this.stopped){requestAnimationFrame(this.redraw);var F=this.glplot,D=this.camera,u=D.mouseListener,B=1===this.lastButtonState&&0===u.buttons,I=this.fullLayout;this.lastButtonState=u.buttons;this.cameraChanged();var J=u.x*F.pixelRatio;u=this.canvas.height-F.pixelRatio*u.y;if(D.boxEnabled&&"zoom"===I.dragmode){this.selectBox.enabled=!0;I=this.selectBox.selectBox=[Math.min(D.boxStart[0],D.boxEnd[0]),Math.min(D.boxStart[1],D.boxEnd[1]),Math.max(D.boxStart[0],D.boxEnd[0]),Math.max(D.boxStart[1],
D.boxEnd[1])];for(B=0;2>B;B++)D.boxStart[B]===D.boxEnd[B]&&(I[B]=F.dataBox[B],I[B+2]=F.dataBox[B+2]);F.setDirty()}else if(!D.panning&&this.isMouseOver){this.selectBox.enabled=!1;var N=I._size;(D=(N=F.pick(J/F.pixelRatio+N.l+this.xaxis.domain[0]*N.w,u/F.pixelRatio-(N.t+(1-this.yaxis.domain[1])*N.h)))&&N.object._trace.handlePick(N))&&B&&this.emitPointAction(D,"plotly_click");N&&"skip"!==N.object._trace.hoverinfo&&I.hovermode&&D&&(!this.lastPickResult||this.lastPickResult.traceUid!==D.trace.uid||this.lastPickResult.dataCoord[0]!==
D.dataCoord[0]||this.lastPickResult.dataCoord[1]!==D.dataCoord[1])&&(this.lastPickResult={traceUid:D.trace?D.trace.uid:null,dataCoord:D.dataCoord.slice()},this.spikes.update({center:N.dataCoord}),D.screenCoord=[((F.viewBox[2]-F.viewBox[0])*(N.dataCoord[0]-F.dataBox[0])/(F.dataBox[2]-F.dataBox[0])+F.viewBox[0])/F.pixelRatio,(this.canvas.height-(F.viewBox[3]-F.viewBox[1])*(N.dataCoord[1]-F.dataBox[1])/(F.dataBox[3]-F.dataBox[1])-F.viewBox[1])/F.pixelRatio],this.emitPointAction(D,"plotly_hover"),B=this.fullData[D.trace.index]||
{},J=D.pointIndex,(I=f.castHoverinfo(B,I,J))&&"all"!==I&&(I=I.split("+"),-1===I.indexOf("x")&&(D.traceCoord[0]=void 0),-1===I.indexOf("y")&&(D.traceCoord[1]=void 0),-1===I.indexOf("z")&&(D.traceCoord[2]=void 0),-1===I.indexOf("text")&&(D.textLabel=void 0),-1===I.indexOf("name")&&(D.name=void 0)),f.loneHover({x:D.screenCoord[0],y:D.screenCoord[1],xLabel:this.hoverFormatter("xaxis",D.traceCoord[0]),yLabel:this.hoverFormatter("yaxis",D.traceCoord[1]),zLabel:D.traceCoord[2],text:D.textLabel,name:D.name,
color:f.castHoverOption(B,J,"bgcolor")||D.color,borderColor:f.castHoverOption(B,J,"bordercolor"),fontFamily:f.castHoverOption(B,J,"font.family"),fontSize:f.castHoverOption(B,J,"font.size"),fontColor:f.castHoverOption(B,J,"font.color"),nameLength:f.castHoverOption(B,J,"namelength"),textAlign:f.castHoverOption(B,J,"align")},{container:this.svgContainer,gd:this.graphDiv}))}N||this.unhover();F.draw()}};a.unhover=function(){this.lastPickResult&&(this.spikes.update({}),this.lastPickResult=null,this.graphDiv.emit("plotly_unhover"),
f.loneUnhover(this.svgContainer))};a.hoverFormatter=function(F,D){if(void 0!==D)return F=this[F],m.tickText(F,F.c2l(D),"hover").text}},{"../../components/dragelement/helpers":633,"../../components/fx":655,"../../lib/show_no_webgl_msg":771,"../../plots/cartesian/axes":799,"../../registry":882,"../cartesian/autorange":798,"../cartesian/constants":805,"../cartesian/constraints":806,"./camera":837,"./convert":838,"gl-plot2d":298,"gl-select-box":310,"gl-spikes2d":319,"webgl-context":578}],841:[function(a,
G,C){G=a("../../plot_api/edit_types").overrideAll;var q=a("../../components/fx/layout_attributes"),n=a("./scene"),m=a("../get_data").getSubplotData,f=a("../../lib"),b=a("../../constants/xmlns_namespaces");C.name="gl3d";C.attr="scene";C.idRoot="scene";C.idRegex=C.attrRegex=f.counterRegex("scene");C.attributes=a("./layout/attributes");C.layoutAttributes=a("./layout/layout_attributes");C.baseLayoutAttrOverrides=G({hoverlabel:q.hoverlabel},"plot","nested");C.supplyLayoutDefaults=a("./layout/defaults");
C.plot=function(k){for(var e=k._fullLayout,h=k._fullData,l=e._subplots.gl3d,c=0;c<l.length;c++){var g=l[c],d=m(h,"gl3d",g),p=e[g],r=p.camera,t=p._scene;t||(t=new n({id:g,graphDiv:k,container:k.querySelector(".gl-container"),staticPlot:k._context.staticPlot,plotGlPixelRatio:k._context.plotGlPixelRatio,camera:r},e),p._scene=t);t.viewInitial||(t.viewInitial={up:{x:r.up.x,y:r.up.y,z:r.up.z},eye:{x:r.eye.x,y:r.eye.y,z:r.eye.z},center:{x:r.center.x,y:r.center.y,z:r.center.z}});t.plot(d,e,k.layout)}};C.clean=
function(k,e,h,l){k=l._subplots.gl3d||[];for(h=0;h<k.length;h++){var c=k[h];!e[c]&&l[c]._scene&&(l[c]._scene.destroy(),l._infolayer&&l._infolayer.selectAll(".annotation-"+c).remove())}};C.toSVG=function(k){k=k._fullLayout;for(var e=k._subplots.gl3d,h=k._size,l=0;l<e.length;l++){var c=k[e[l]],g=c.domain;c=c._scene;var d=c.toImage("png");k._glimages.append("svg:image").attr({xmlns:b.svg,"xlink:href":d,x:h.l+h.w*g.x[0],y:h.t+h.h*(1-g.y[1]),width:h.w*(g.x[1]-g.x[0]),height:h.h*(g.y[1]-g.y[0]),preserveAspectRatio:"none"});
c.destroy()}};C.cleanId=function(k){if(k.match(/^scene[0-9]*$/))return k=k.substr(5),"1"===k&&(k=""),"scene"+k};C.updateFx=function(k){k=k._fullLayout;for(var e=k._subplots.gl3d,h=0;h<e.length;h++)k[e[h]]._scene.updateFx(k.dragmode,k.hovermode)}},{"../../components/fx/layout_attributes":656,"../../constants/xmlns_namespaces":726,"../../lib":750,"../../plot_api/edit_types":781,"../get_data":836,"./layout/attributes":842,"./layout/defaults":846,"./layout/layout_attributes":847,"./scene":851}],842:[function(a,
G,C){G.exports={scene:{valType:"subplotid",dflt:"scene",editType:"calc+clearAxisTypes"}}},{}],843:[function(a,G,C){C=a("../../../components/color");var q=a("../../cartesian/layout_attributes"),n=a("../../../lib/extend").extendFlat;a=a("../../../plot_api/edit_types").overrideAll;G.exports=a({visible:q.visible,showspikes:{valType:"boolean",dflt:!0},spikesides:{valType:"boolean",dflt:!0},spikethickness:{valType:"number",min:0,dflt:2},spikecolor:{valType:"color",dflt:C.defaultLine},showbackground:{valType:"boolean",
dflt:!1},backgroundcolor:{valType:"color",dflt:"rgba(204, 204, 204, 0.5)"},showaxeslabels:{valType:"boolean",dflt:!0},color:q.color,categoryorder:q.categoryorder,categoryarray:q.categoryarray,title:{text:q.title.text,font:q.title.font},type:n({},q.type,{values:["-","linear","log","date","category"]}),autorange:q.autorange,rangemode:q.rangemode,range:n({},q.range,{items:[{valType:"any",editType:"plot",impliedEdits:{"^autorange":!1}},{valType:"any",editType:"plot",impliedEdits:{"^autorange":!1}}],anim:!1}),
tickmode:q.tickmode,nticks:q.nticks,tick0:q.tick0,dtick:q.dtick,tickvals:q.tickvals,ticktext:q.ticktext,ticks:q.ticks,mirror:q.mirror,ticklen:q.ticklen,tickwidth:q.tickwidth,tickcolor:q.tickcolor,showticklabels:q.showticklabels,tickfont:q.tickfont,tickangle:q.tickangle,tickprefix:q.tickprefix,showtickprefix:q.showtickprefix,ticksuffix:q.ticksuffix,showticksuffix:q.showticksuffix,showexponent:q.showexponent,exponentformat:q.exponentformat,minexponent:q.minexponent,separatethousands:q.separatethousands,
tickformat:q.tickformat,tickformatstops:q.tickformatstops,hoverformat:q.hoverformat,showline:q.showline,linecolor:q.linecolor,linewidth:q.linewidth,showgrid:q.showgrid,gridcolor:n({},q.gridcolor,{dflt:"rgb(204, 204, 204)"}),gridwidth:q.gridwidth,zeroline:q.zeroline,zerolinecolor:q.zerolinecolor,zerolinewidth:q.zerolinewidth,_deprecated:{title:q._deprecated.title,titlefont:q._deprecated.titlefont}},"plot","from-root")},{"../../../components/color":615,"../../../lib/extend":740,"../../../plot_api/edit_types":781,
"../../cartesian/layout_attributes":813}],844:[function(a,G,C){var q=a("tinycolor2").mix,n=a("../../../lib"),m=a("../../../plot_api/plot_template"),f=a("./axis_attributes"),b=a("../../cartesian/type_defaults"),k=a("../../cartesian/axis_defaults"),e=["xaxis","yaxis","zaxis"],h=13600/187;G.exports=function(l,c,g){function d(x,y){return n.coerce(p,r,f,x,y)}for(var p,r,t=0;t<e.length;t++){var w=e[t];p=l[w]||{};r=m.newContainer(c,w);r._id=w[0]+g.scene;r._name=w;b(p,r,d,g);k(p,r,d,{font:g.font,letter:w[0],
data:g.data,showGrid:!0,noTickson:!0,noTicklabelmode:!0,bgColor:g.bgColor,calendar:g.calendar},g.fullLayout);d("gridcolor",q(r.color,g.bgColor,h).toRgbString());d("title.text",w[0]);r.setScale=n.noop;d("showspikes")&&(d("spikesides"),d("spikethickness"),d("spikecolor",r.color));d("showaxeslabels");d("showbackground")&&d("backgroundcolor")}}},{"../../../lib":750,"../../../plot_api/plot_template":788,"../../cartesian/axis_defaults":801,"../../cartesian/type_defaults":824,"./axis_attributes":843,tinycolor2:548}],
845:[function(a,G,C){function q(){this.bounds=[[-10,-10,-10],[10,10,10]];this.ticks=[[],[],[]];this.tickEnable=[!0,!0,!0];this.tickFont=["sans-serif","sans-serif","sans-serif"];this.tickSize=[12,12,12];this.tickAngle=[0,0,0];this.tickColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1]];this.tickPad=[18,18,18];this.labels=["x","y","z"];this.labelEnable=[!0,!0,!0];this.labelFont=["Open Sans","Open Sans","Open Sans"];this.labelSize=[20,20,20];this.labelColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1]];this.labelPad=[30,30,30];
this.lineEnable=[!0,!0,!0];this.lineMirror=[!1,!1,!1];this.lineWidth=[1,1,1];this.lineColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1]];this.lineTickEnable=[!0,!0,!0];this.lineTickMirror=[!1,!1,!1];this.lineTickLength=[10,10,10];this.lineTickWidth=[1,1,1];this.lineTickColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1]];this.gridEnable=[!0,!0,!0];this.gridWidth=[1,1,1];this.gridColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1]];this.zeroEnable=[!0,!0,!0];this.zeroLineColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1]];this.zeroLineWidth=[2,2,2];this.backgroundEnable=
[!0,!0,!0];this.backgroundColor=[[.8,.8,.8,.5],[.8,.8,.8,.5],[.8,.8,.8,.5]];this._defaultTickPad=this.tickPad.slice();this._defaultLabelPad=this.labelPad.slice();this._defaultLineTickLength=this.lineTickLength.slice()}var n=a("../../../lib/str2rgbarray"),m=a("../../../lib"),f=["xaxis","yaxis","zaxis"];q.prototype.merge=function(b,k){for(var e=0;3>e;++e){var h=k[f[e]];h.visible?(this.labels[e]=b._meta?m.templateString(h.title.text,b._meta):h.title.text,"font"in h.title&&(h.title.font.color&&(this.labelColor[e]=
n(h.title.font.color)),h.title.font.family&&(this.labelFont[e]=h.title.font.family),h.title.font.size&&(this.labelSize[e]=h.title.font.size)),"showline"in h&&(this.lineEnable[e]=h.showline),"linecolor"in h&&(this.lineColor[e]=n(h.linecolor)),"linewidth"in h&&(this.lineWidth[e]=h.linewidth),"showgrid"in h&&(this.gridEnable[e]=h.showgrid),"gridcolor"in h&&(this.gridColor[e]=n(h.gridcolor)),"gridwidth"in h&&(this.gridWidth[e]=h.gridwidth),"log"===h.type?this.zeroEnable[e]=!1:"zeroline"in h&&(this.zeroEnable[e]=
h.zeroline),"zerolinecolor"in h&&(this.zeroLineColor[e]=n(h.zerolinecolor)),"zerolinewidth"in h&&(this.zeroLineWidth[e]=h.zerolinewidth),this.lineTickEnable[e]="ticks"in h&&h.ticks?!0:!1,"ticklen"in h&&(this.lineTickLength[e]=this._defaultLineTickLength[e]=h.ticklen),"tickcolor"in h&&(this.lineTickColor[e]=n(h.tickcolor)),"tickwidth"in h&&(this.lineTickWidth[e]=h.tickwidth),"tickangle"in h&&(this.tickAngle[e]="auto"===h.tickangle?-3600:Math.PI*-h.tickangle/180),"showticklabels"in h&&(this.tickEnable[e]=
h.showticklabels),"tickfont"in h&&(h.tickfont.color&&(this.tickColor[e]=n(h.tickfont.color)),h.tickfont.family&&(this.tickFont[e]=h.tickfont.family),h.tickfont.size&&(this.tickSize[e]=h.tickfont.size)),"mirror"in h?-1!==["ticks","all","allticks"].indexOf(h.mirror)?(this.lineTickMirror[e]=!0,this.lineMirror[e]=!0):!0===h.mirror?(this.lineTickMirror[e]=!1,this.lineMirror[e]=!0):(this.lineTickMirror[e]=!1,this.lineMirror[e]=!1):this.lineMirror[e]=!1,"showbackground"in h&&!1!==h.showbackground?(this.backgroundEnable[e]=
!0,this.backgroundColor[e]=n(h.backgroundcolor)):this.backgroundEnable[e]=!1):(this.tickEnable[e]=!1,this.labelEnable[e]=!1,this.lineEnable[e]=!1,this.lineTickEnable[e]=!1,this.gridEnable[e]=!1,this.zeroEnable[e]=!1,this.backgroundEnable[e]=!1)}};G.exports=function(b,k){var e=new q;e.merge(b,k);return e}},{"../../../lib":750,"../../../lib/str2rgbarray":773}],846:[function(a,G,C){function q(l,c,g,d){var p=g("bgcolor");p=m.combine(p,d.paper_bgcolor);for(var r=["up","center","eye"],t=0;t<r.length;t++)g("camera."+
r[t]+".x"),g("camera."+r[t]+".y"),g("camera."+r[t]+".z");g("camera.projection.type");r=!!g("aspectratio.x")&&!!g("aspectratio.y")&&!!g("aspectratio.z");t=g("aspectmode",r?"manual":"auto");r||(l.aspectratio=c.aspectratio={x:1,y:1,z:1},"manual"===t&&(c.aspectmode="auto"),l.aspectmode=c.aspectmode);r=h(d.fullData,"gl3d",d.id);k(l,c,{font:d.font,scene:d.id,data:r,bgColor:p,calendar:d.calendar,fullLayout:d.fullLayout});f.getComponentMethod("annotations3d","handleDefaults")(l,c,d);c=d.getDfltFromLayout("dragmode");
!1===c||c||(c="orbit",l.camera&&l.camera.up?(p=l.camera.up.x,r=l.camera.up.y,l=l.camera.up.z,0!==l&&(p&&r&&l?.999<l/Math.sqrt(p*p+r*r+l*l)&&(c="turntable"):c="turntable")):c="turntable");g("dragmode",c);g("hovermode",d.getDfltFromLayout("hovermode"))}var n=a("../../../lib"),m=a("../../../components/color"),f=a("../../../registry"),b=a("../../subplot_defaults"),k=a("./axis_defaults"),e=a("./layout_attributes"),h=a("../../get_data").getSubplotData;G.exports=function(l,c,g){var d=1<c._basePlotModules.length;
b(l,c,g,{type:"gl3d",attributes:e,handleDefaults:q,fullLayout:c,font:c.font,fullData:g,getDfltFromLayout:function(p){if(!d&&n.validate(l[p],e[p]))return l[p]},paper_bgcolor:c.paper_bgcolor,calendar:c.calendar})}},{"../../../components/color":615,"../../../lib":750,"../../../registry":882,"../../get_data":836,"../../subplot_defaults":876,"./axis_defaults":844,"./layout_attributes":847}],847:[function(a,G,C){function q(f,b,k){return{x:{valType:"number",dflt:f,editType:"camera"},y:{valType:"number",
dflt:b,editType:"camera"},z:{valType:"number",dflt:k,editType:"camera"},editType:"camera"}}C=a("./axis_attributes");var n=a("../../domain").attributes,m=a("../../../lib/extend").extendFlat;a=a("../../../lib").counterRegex;G.exports={_arrayAttrRegexps:[a("scene",".annotations",!0)],bgcolor:{valType:"color",dflt:"rgba(0,0,0,0)",editType:"plot"},camera:{up:m(q(0,0,1),{}),center:m(q(0,0,0),{}),eye:m(q(1.25,1.25,1.25),{}),projection:{type:{valType:"enumerated",values:["perspective","orthographic"],dflt:"perspective",
editType:"calc"},editType:"calc"},editType:"camera"},domain:n({name:"scene",editType:"plot"}),aspectmode:{valType:"enumerated",values:["auto","cube","data","manual"],dflt:"auto",editType:"plot",impliedEdits:{"aspectratio.x":void 0,"aspectratio.y":void 0,"aspectratio.z":void 0}},aspectratio:{x:{valType:"number",min:0,editType:"plot",impliedEdits:{"^aspectmode":"manual"}},y:{valType:"number",min:0,editType:"plot",impliedEdits:{"^aspectmode":"manual"}},z:{valType:"number",min:0,editType:"plot",impliedEdits:{"^aspectmode":"manual"}},
editType:"plot",impliedEdits:{aspectmode:"manual"}},xaxis:C,yaxis:C,zaxis:C,dragmode:{valType:"enumerated",values:["orbit","turntable","zoom","pan",!1],editType:"plot"},hovermode:{valType:"enumerated",values:["closest",!1],dflt:"closest",editType:"modebar"},uirevision:{valType:"any",editType:"none"},editType:"plot",_deprecated:{cameraposition:{valType:"info_array",editType:"camera"}}}},{"../../../lib":750,"../../../lib/extend":740,"../../domain":826,"./axis_attributes":843}],848:[function(a,G,C){function q(){this.enabled=
[!0,!0,!0];this.colors=[[0,0,0,1],[0,0,0,1],[0,0,0,1]];this.drawSides=[!0,!0,!0];this.lineWidth=[1,1,1]}var n=a("../../../lib/str2rgbarray"),m=["xaxis","yaxis","zaxis"];q.prototype.merge=function(f){for(var b=0;3>b;++b){var k=f[m[b]];k.visible?(this.enabled[b]=k.showspikes,this.colors[b]=n(k.spikecolor),this.drawSides[b]=k.spikesides,this.lineWidth[b]=k.spikethickness):(this.enabled[b]=!1,this.drawSides[b]=!1)}};G.exports=function(f){var b=new q;b.merge(f);return b}},{"../../../lib/str2rgbarray":773}],
849:[function(a,G,C){G.exports=function(f){for(var b=f.axesOptions,k=f.glplot.axesPixels,e=f.fullSceneLayout,h=[[],[],[]],l=0;3>l;++l){var c=e[m[l]];c._length=(k[l].hi-k[l].lo)*k[l].pixelsPerDataUnit/f.dataScale[l];if(Infinity===Math.abs(c._length)||isNaN(c._length))h[l]=[];else{c._input_range=c.range.slice();c.range[0]=k[l].lo/f.dataScale[l];c.range[1]=k[l].hi/f.dataScale[l];c._m=1/(f.dataScale[l]*k[l].pixelsPerDataUnit);c.range[0]===c.range[1]&&(--c.range[0],c.range[1]+=1);var g=c.tickmode;if("auto"===
c.tickmode){c.tickmode="linear";var d=c.nticks||n.constrain(c._length/40,4,9);q.autoTicks(c,Math.abs(c.range[1]-c.range[0])/d)}d=q.calcTicks(c,{msUTC:!0});for(var p=0;p<d.length;++p)d[p].x*=f.dataScale[l],"date"===c.type&&(d[p].text=d[p].text.replace(/<br>/g," "));h[l]=d;c.tickmode=g}}b.ticks=h;for(l=0;3>l;++l)for(p=0;2>p;++p)b.bounds[p][l]=f.glplot.bounds[p][l];b=Array(3);for(k=0;3>k;++k){e=h[k];l=Array(e.length);for(c=0;c<e.length;++c)l[c]=e[c].x;b[k]=l}f.contourLevels=b};var q=a("../../cartesian/axes"),
n=a("../../../lib"),m=["xaxis","yaxis","zaxis"]},{"../../../lib":750,"../../cartesian/axes":799}],850:[function(a,G,C){function q(n,m){var f=[0,0,0,0],b,k;for(b=0;4>b;++b)for(k=0;4>k;++k)f[k]+=n[4*b+k]*m[b];return f}G.exports=function(n,m){return q(n.projection,q(n.view,q(n.model,[m[0],m[1],m[2],1])))}},{}],851:[function(a,G,C){function q(D,u){var B=document.createElement("div"),I=D.container;this.graphDiv=D.graphDiv;var J=document.createElementNS("http://www.w3.org/2000/svg","svg");J.style.position=
"absolute";J.style.top=J.style.left="0px";J.style.width=J.style.height="100%";J.style["z-index"]=20;J.style["pointer-events"]="none";B.appendChild(J);this.svgContainer=J;B.id=D.id;B.style.position="absolute";B.style.top=B.style.left="0px";B.style.width=B.style.height="100%";I.appendChild(B);this.fullLayout=u;this.id=D.id||"scene";this.fullSceneLayout=u[this.id];this.plotArgs=[[],{},{}];this.axesOptions=t(u,u[this.id]);this.spikeOptions=w(u[this.id]);this.container=B;this.staticMode=!!D.staticPlot;
this.pixelRatio=this.pixelRatio||D.plotGlPixelRatio||2;this.dataScale=[1,1,1];this.contourLevels=[[],[],[]];this.convertAnnotations=h.getComponentMethod("annotations3d","convert");this.drawAnnotations=h.getComponentMethod("annotations3d","draw");this.initializeGLPlot()}function n(D,u,B){D=D.fullSceneLayout;for(var I=0;3>I;I++){var J=F[I],N=J.charAt(0);J=D[J];var M=u[N],E=u[N+"calendar"];N=u["_"+N+"length"];if(l.isArrayOrTypedArray(M))for(var L,Q=0;Q<(N||M.length);Q++)if(l.isArrayOrTypedArray(M[Q]))for(var S=
0;S<M[Q].length;++S)L=J.d2l(M[Q][S],0,E),!isNaN(L)&&isFinite(L)&&(B[0][I]=Math.min(B[0][I],L),B[1][I]=Math.max(B[1][I],L));else L=J.d2l(M[Q],0,E),!isNaN(L)&&isFinite(L)&&(B[0][I]=Math.min(B[0][I],L),B[1][I]=Math.max(B[1][I],L));else B[0][I]=Math.min(B[0][I],0),B[1][I]=Math.max(B[1][I],N-1)}}function m(D,u){D=D.fullSceneLayout;for(var B=D.annotations||[],I=0;3>I;I++){var J=F[I],N=J.charAt(0);J=D[J];for(var M=0;M<B.length;M++){var E=B[M];E.visible&&(E=J.r2l(E[N]),!isNaN(E)&&isFinite(E)&&(u[0][I]=Math.min(u[0][I],
E),u[1][I]=Math.max(u[1][I],E)))}}}C=a("gl-plot3d");var f=C.createCamera,b=C.createScene,k=a("webgl-context"),e=a("has-passive-events"),h=a("../../registry"),l=a("../../lib"),c=a("../../plots/cartesian/axes"),g=a("../../components/fx"),d=a("../../lib/str2rgbarray"),p=a("../../lib/show_no_webgl_msg"),r=a("./project"),t=a("./layout/convert"),w=a("./layout/spikes"),x=a("./layout/tick_marks"),y=a("is-mobile")({tablet:!0,featureDetect:!0}),A,z;a=q.prototype;a.prepareOptions=function(){var D={canvas:this.canvas,
gl:this.gl,glOptions:{preserveDrawingBuffer:y,premultipliedAlpha:!0,antialias:!0},container:this.container,axes:this.axesOptions,spikes:this.spikeOptions,pickRadius:10,snapToData:!0,autoScale:!0,autoBounds:!1,cameraObject:this.camera,pixelRatio:this.pixelRatio};if(this.staticMode){if(!z&&(A=document.createElement("canvas"),z=k({canvas:A,preserveDrawingBuffer:!0,premultipliedAlpha:!0,antialias:!0}),!z))throw Error("error creating static canvas/context for image server");D.gl=z;D.canvas=A}return D};
a.tryCreatePlot=function(){var D=this.prepareOptions(),u=!0;try{this.glplot=b(D)}catch(B){if(this.staticMode)u=!1;else try{l.warn(["webgl setup failed possibly due to",y?"disabling":"enabling","preserveDrawingBuffer config. The device may not be supported by is-mobile module! Inverting preserveDrawingBuffer option in second attempt to create webgl scene."].join(" ")),y=D.glOptions.preserveDrawingBuffer=!D.glOptions.preserveDrawingBuffer,this.glplot=b(D)}catch(I){u=!1}}return u};a.initializeGLCamera=
function(){var D=this.fullSceneLayout.camera;this.camera=f(this.container,{center:[D.center.x,D.center.y,D.center.z],eye:[D.eye.x,D.eye.y,D.eye.z],up:[D.up.x,D.up.y,D.up.z],_ortho:"orthographic"===D.projection.type,zoomMin:.01,zoomMax:100,mode:"orbit"})};a.initializeGLPlot=function(){var D=this;D.initializeGLCamera();if(!D.tryCreatePlot())return p(D);D.traces={};D.make4thDimension();var u=D.graphDiv,B=u.layout,I=function(){var N={};D.isCameraChanged(B)&&(N[D.id+".camera"]=D.getCamera());D.isAspectChanged(B)&&
(N[D.id+".aspectratio"]=D.glplot.getAspectratio(),"manual"!==B[D.id].aspectmode&&(D.fullSceneLayout.aspectmode=B[D.id].aspectmode=N[D.id+".aspectmode"]="manual"));return N},J=function(N){if(!1!==N.fullSceneLayout.dragmode){var M=I();N.saveLayout(B);N.graphDiv.emit("plotly_relayout",M)}};D.glplot.canvas.addEventListener("mouseup",function(){J(D)});D.glplot.canvas.addEventListener("wheel",function(N){if(u._context._scrollZoom.gl3d){if(D.camera._ortho){N=N.deltaX>N.deltaY?1.1:1/1.1;var M=D.glplot.getAspectratio();
D.glplot.setAspectratio({x:N*M.x,y:N*M.y,z:N*M.z})}J(D)}},e?{passive:!1}:!1);D.glplot.canvas.addEventListener("mousemove",function(){if(!1!==D.fullSceneLayout.dragmode&&0!==D.camera.mouseListener.buttons){var N=I();D.graphDiv.emit("plotly_relayouting",N)}});D.staticMode||D.glplot.canvas.addEventListener("webglcontextlost",function(N){u&&u.emit&&u.emit("plotly_webglcontextlost",{event:N,layer:D.id})},!1);D.glplot.oncontextloss=function(){D.recoverContext()};D.glplot.onrender=function(){D.render()};
return!0};a.render=function(){function D(ba,aa){ba=u.fullSceneLayout[ba];return c.tickText(ba,ba.d2l(aa),"hover").text}var u=this,B=u.graphDiv,I=u.svgContainer,J=u.container.getBoundingClientRect(),N=J.width;J=J.height;I.setAttributeNS(null,"viewBox","0 0 "+N+" "+J);I.setAttributeNS(null,"width",N);I.setAttributeNS(null,"height",J);x(u);u.glplot.axes.update(u.axesOptions);for(var M=Object.keys(u.traces),E=null,L=u.glplot.selection,Q=0;Q<M.length;++Q){var S=u.traces[M[Q]];"skip"!==S.data.hoverinfo&&
S.handlePick(L)&&(E=S);S.setContourLevels&&S.setContourLevels()}if(null!==E){var R=r(u.glplot.cameraParams,L.dataCoordinate);S=E.data;M=B._fullData[S.index];Q=L.index;var O={xLabel:D("xaxis",L.traceCoordinate[0]),yLabel:D("yaxis",L.traceCoordinate[1]),zLabel:D("zaxis",L.traceCoordinate[2])},T=g.castHoverinfo(M,u.fullLayout,Q),V=(T||"").split("+");T=T&&"all"===T;M.hovertemplate||T||(-1===V.indexOf("x")&&(O.xLabel=void 0),-1===V.indexOf("y")&&(O.yLabel=void 0),-1===V.indexOf("z")&&(O.zLabel=void 0),
-1===V.indexOf("text")&&(L.textLabel=void 0),-1===V.indexOf("name")&&(E.name=void 0));var X=[];"cone"===S.type||"streamtube"===S.type?(O.uLabel=D("xaxis",L.traceCoordinate[3]),(T||-1!==V.indexOf("u"))&&X.push("u: "+O.uLabel),O.vLabel=D("yaxis",L.traceCoordinate[4]),(T||-1!==V.indexOf("v"))&&X.push("v: "+O.vLabel),O.wLabel=D("zaxis",L.traceCoordinate[5]),(T||-1!==V.indexOf("w"))&&X.push("w: "+O.wLabel),O.normLabel=L.traceCoordinate[6].toPrecision(3),(T||-1!==V.indexOf("norm"))&&X.push("norm: "+O.normLabel),
"streamtube"===S.type&&(O.divergenceLabel=L.traceCoordinate[7].toPrecision(3),(T||-1!==V.indexOf("divergence"))&&X.push("divergence: "+O.divergenceLabel)),L.textLabel&&X.push(L.textLabel),V=X.join("\x3cbr\x3e")):"isosurface"===S.type||"volume"===S.type?(O.valueLabel=c.tickText(u._mockAxis,u._mockAxis.d2l(L.traceCoordinate[3]),"hover").text,X.push("value: "+O.valueLabel),L.textLabel&&X.push(L.textLabel),V=X.join("\x3cbr\x3e")):V=L.textLabel;T={x:L.traceCoordinate[0],y:L.traceCoordinate[1],z:L.traceCoordinate[2],
data:M._input,fullData:M,curveNumber:M.index,pointNumber:Q};g.appendArrayPointValue(T,M,Q);S._module.eventData&&(T=M._module.eventData(T,L,M,{},Q));S={points:[T]};u.fullSceneLayout.hovermode&&g.loneHover({trace:M,x:(.5+.5*R[0]/R[3])*N,y:(.5-.5*R[1]/R[3])*J,xLabel:O.xLabel,yLabel:O.yLabel,zLabel:O.zLabel,text:V,name:E.name,color:g.castHoverOption(M,Q,"bgcolor")||E.color,borderColor:g.castHoverOption(M,Q,"bordercolor"),fontFamily:g.castHoverOption(M,Q,"font.family"),fontSize:g.castHoverOption(M,Q,"font.size"),
fontColor:g.castHoverOption(M,Q,"font.color"),nameLength:g.castHoverOption(M,Q,"namelength"),textAlign:g.castHoverOption(M,Q,"align"),hovertemplate:l.castOption(M,Q,"hovertemplate"),hovertemplateLabels:l.extendFlat({},T,O),eventData:[T]},{container:I,gd:B});L.buttons&&5>L.distance?B.emit("plotly_click",S):B.emit("plotly_hover",S);R=S}else g.loneUnhover(I),B.emit("plotly_unhover",R);u.drawAnnotations(u)};a.recoverContext=function(){var D=this;D.glplot.dispose();var u=function(){D.glplot.gl.isContextLost()?
requestAnimationFrame(u):D.initializeGLPlot()?D.plot.apply(D,D.plotArgs):l.error("Catastrophic and unrecoverable WebGL error. Context lost.")};requestAnimationFrame(u)};var F=["xaxis","yaxis","zaxis"];a.plot=function(D,u,B){this.plotArgs=[D,u,B];if(!this.glplot.contextLost){var I,J,N=u[this.id];B=B[this.id];this.fullLayout=u;this.fullSceneLayout=N;this.axesOptions.merge(u,N);this.spikeOptions.merge(N);this.setViewport(N);this.updateFx(N.dragmode,N.hovermode);this.camera.enableWheel=this.graphDiv._context._scrollZoom.gl3d;
this.glplot.setClearColor(d(N.bgcolor));this.setConvert(E);D?Array.isArray(D)||(D=[D]):D=[];var M=[[Infinity,Infinity,Infinity],[-Infinity,-Infinity,-Infinity]];for(I=0;I<D.length;++I){var E=D[I];!0===E.visible&&0!==E._length&&n(this,E,M)}m(this,M);var L=[1,1,1];for(J=0;3>J;++J)L[J]=M[1][J]===M[0][J]?1:1/(M[1][J]-M[0][J]);this.dataScale=L;this.convertAnnotations(this);for(I=0;I<D.length;++I)E=D[I],!0===E.visible&&0!==E._length&&((M=this.traces[E.uid])?M.data.type===E.type?M.update(E):(M.dispose(),
M=E._module.plot(this,E),this.traces[E.uid]=M):(M=E._module.plot(this,E),this.traces[E.uid]=M),M.name=E.name);E=Object.keys(this.traces);I=0;a:for(;I<E.length;++I){for(J=0;J<D.length;++J)if(D[J].uid===E[I]&&!0===D[J].visible&&0!==D[J]._length)continue a;M=this.traces[E[I]];M.dispose();delete this.traces[E[I]]}this.glplot.objects.sort(function(X,ba){return X._trace.data.index-ba._trace.data.index});M=[[0,0,0],[0,0,0]];D={};for(I=0;3>I;++I){E=N[F[I]];J=E.type;J in D?(D[J].acc*=L[I],D[J].count+=1):D[J]=
{acc:L[I],count:1};if(E.autorange){M[0][I]=Infinity;M[1][I]=-Infinity;var Q=this.glplot.objects,S=this.fullSceneLayout.annotations||[],R=E._name.charAt(0);for(J=0;J<Q.length;J++){var O=Q[J],T=O.bounds,V=O._trace.data._pad||0;M[0][I]="ErrorBars"===O.constructor.name&&E._lowerLogErrorBound?Math.min(M[0][I],E._lowerLogErrorBound):Math.min(M[0][I],T[0][I]/L[I]-V);M[1][I]=Math.max(M[1][I],T[1][I]/L[I]+V)}for(J=0;J<S.length;J++)Q=S[J],Q.visible&&(Q=E.r2l(Q[R]),M[0][I]=Math.min(M[0][I],Q),M[1][I]=Math.max(M[1][I],
Q));"rangemode"in E&&"tozero"===E.rangemode&&(M[0][I]=Math.min(M[0][I],0),M[1][I]=Math.max(M[1][I],0));M[0][I]>M[1][I]?(M[0][I]=-1,M[1][I]=1):(J=M[1][I]-M[0][I],M[0][I]-=J/32,M[1][I]+=J/32);"reversed"===E.autorange&&(E=M[0][I],M[0][I]=M[1][I],M[1][I]=E)}else J=E.range,M[0][I]=E.r2l(J[0]),M[1][I]=E.r2l(J[1]);M[0][I]===M[1][I]&&(--M[0][I],M[1][I]+=1);this.glplot.setBounds(I,{min:M[0][I]*L[I],max:M[1][I]*L[I]})}M=N.aspectmode;if("cube"===M)I=[1,1,1];else if("manual"===M)I=N.aspectratio,I=[I.x,I.y,I.z];
else if("auto"===M||"data"===M){S=[1,1,1];for(I=0;3>I;++I)E=N[F[I]],J=E.type,E=D[J],S[I]=Math.pow(E.acc,1/E.count)/L[I];I="data"===M?S:4>=Math.max.apply(null,S)/Math.min.apply(null,S)?S:[1,1,1]}else throw Error("scene.js aspectRatio was not one of the enumerated types");N.aspectratio.x=B.aspectratio.x=I[0];N.aspectratio.y=B.aspectratio.y=I[1];N.aspectratio.z=B.aspectratio.z=I[2];this.glplot.setAspectratio(N.aspectratio);this.viewInitial.aspectratio||(this.viewInitial.aspectratio={x:N.aspectratio.x,
y:N.aspectratio.y,z:N.aspectratio.z});this.viewInitial.aspectmode||(this.viewInitial.aspectmode=N.aspectmode);N=N.domain||null;u=u._size||null;N&&u&&(B=this.container.style,B.position="absolute",B.left=u.l+N.x[0]*u.w+"px",B.top=u.t+(1-N.y[1])*u.h+"px",B.width=u.w*(N.x[1]-N.x[0])+"px",B.height=u.h*(N.y[1]-N.y[0])+"px");this.glplot.redraw()}};a.destroy=function(){this.glplot&&(this.camera.mouseListener.enabled=!1,this.container.removeEventListener("wheel",this.camera.wheelListener),this.camera=null,
this.glplot.dispose(),this.container.parentNode.removeChild(this.container),this.glplot=null)};a.getCamera=function(){this.camera.view.recalcMatrix(this.camera.view.lastT());var D=this.camera;return{up:{x:D.up[0],y:D.up[1],z:D.up[2]},center:{x:D.center[0],y:D.center[1],z:D.center[2]},eye:{x:D.eye[0],y:D.eye[1],z:D.eye[2]},projection:{type:!0===D._ortho?"orthographic":"perspective"}}};a.setViewport=function(D){var u=D.camera;this.camera.lookAt.apply(this,[[u.eye.x,u.eye.y,u.eye.z],[u.center.x,u.center.y,
u.center.z],[u.up.x,u.up.y,u.up.z]]);this.glplot.setAspectratio(D.aspectratio);"orthographic"===u.projection.type!==this.camera._ortho&&(this.glplot.redraw(),this.glplot.clearRGBA(),this.glplot.dispose(),this.initializeGLPlot())};a.isCameraChanged=function(D){var u=this.getCamera();D=l.nestedProperty(D,this.id+".camera").get();var B=!1;if(void 0===D)B=!0;else{for(var I=0;3>I;I++)for(var J=0;3>J;J++){var N=["up","center","eye"],M=["x","y","z"];if(!D[N[I]]||u[N[I]][M[J]]!==D[N[I]][M[J]]){B=!0;break}}if(!D.projection||
u.projection&&u.projection.type!==D.projection.type)B=!0}return B};a.isAspectChanged=function(D){var u=this.glplot.getAspectratio();D=l.nestedProperty(D,this.id+".aspectratio").get();return void 0===D||D.x!==u.x||D.y!==u.y||D.z!==u.z};a.saveLayout=function(D){var u=this.fullLayout,B=this.isCameraChanged(D),I=this.isAspectChanged(D),J=B||I;if(J){var N={};if(B){var M=this.getCamera();var E=l.nestedProperty(D,this.id+".camera");var L=E.get();N[this.id+".camera"]=L}if(I){var Q=this.glplot.getAspectratio();
var S=l.nestedProperty(D,this.id+".aspectratio");L=S.get();N[this.id+".aspectratio"]=L}h.call("_storeDirectGUIEdit",D,u._preGUI,N);B&&(E.set(M),l.nestedProperty(u,this.id+".camera").set(M));I&&(S.set(Q),l.nestedProperty(u,this.id+".aspectratio").set(Q),this.glplot.redraw())}return J};a.updateFx=function(D,u){var B=this.camera;if(B)if("orbit"===D)B.mode="orbit",B.keyBindingMode="rotate";else if("turntable"===D){B.up=[0,0,1];B.mode="turntable";B.keyBindingMode="rotate";var I=this.graphDiv;D=I._fullLayout;
B=this.fullSceneLayout.camera;var J=B.up.x,N=B.up.y,M=B.up.z;.999>M/Math.sqrt(J*J+N*N+M*M)&&(J=this.id+".camera.up",N={x:0,y:0,z:1},M={},M[J]=N,I=I.layout,h.call("_storeDirectGUIEdit",I,D._preGUI,M),B.up=N,l.nestedProperty(I,J).set(N))}else B.keyBindingMode=D;this.fullSceneLayout.hovermode=u};a.toImage=function(D){D||(D="png");this.staticMode&&this.container.appendChild(A);this.glplot.redraw();var u=this.glplot.gl,B=u.drawingBufferWidth,I=u.drawingBufferHeight;u.bindFramebuffer(u.FRAMEBUFFER,null);
var J=new Uint8Array(B*I*4);u.readPixels(0,0,B,I,u.RGBA,u.UNSIGNED_BYTE,J);u=0;for(var N=I-1;u<N;++u,--N)for(var M=0;M<B;++M)for(var E=0;4>E;++E){var L=4*(B*u+M)+E,Q=4*(B*N+M)+E,S=J[L];J[L]=J[Q];J[Q]=S}for(u=0;u<I;++u)for(N=0;N<B;++N)if(M=4*(B*u+N),E=J[M+3],0<E)for(E=255/E,L=0;3>L;++L)J[M+L]=Math.min(E*J[M+L],255);u=document.createElement("canvas");u.width=B;u.height=I;N=u.getContext("2d");B=N.createImageData(B,I);B.data.set(J);N.putImageData(B,0,0);switch(D){case "jpeg":D=u.toDataURL("image/jpeg");
break;case "webp":D=u.toDataURL("image/webp");break;default:D=u.toDataURL("image/png")}this.staticMode&&this.container.removeChild(A);return D};a.setConvert=function(){for(var D=0;3>D;D++){var u=this.fullSceneLayout[F[D]];c.setConvert(u,this.fullLayout);u.setScale=l.noop}};a.make4thDimension=function(){var D=this.graphDiv._fullLayout;this._mockAxis={type:"linear",showexponent:"all",exponentformat:"B"};c.setConvert(this._mockAxis,D)};G.exports=q},{"../../components/fx":655,"../../lib":750,"../../lib/show_no_webgl_msg":771,
"../../lib/str2rgbarray":773,"../../plots/cartesian/axes":799,"../../registry":882,"./layout/convert":845,"./layout/spikes":848,"./layout/tick_marks":849,"./project":850,"gl-plot3d":301,"has-passive-events":415,"is-mobile":441,"webgl-context":578}],852:[function(a,G,C){G.exports=function(q,n,m,f){f=f||q.length;for(var b=Array(f),k=0;k<f;k++)b[k]=[q[k],n[k],m[k]];return b}},{}],853:[function(a,G,C){C=a("./font_attributes");var q=a("./animation_attributes"),n=a("../components/color/attributes"),m=a("../components/shapes/draw_newshape/attributes"),
f=a("./pad_attributes");a=a("../lib/extend").extendFlat;var b=C({editType:"calc"});b.family.dflt='"Open Sans", verdana, arial, sans-serif';b.size.dflt=12;b.color.dflt=n.defaultLine;G.exports={font:b,title:{text:{valType:"string",editType:"layoutstyle"},font:C({editType:"layoutstyle"}),xref:{valType:"enumerated",dflt:"container",values:["container","paper"],editType:"layoutstyle"},yref:{valType:"enumerated",dflt:"container",values:["container","paper"],editType:"layoutstyle"},x:{valType:"number",min:0,
max:1,dflt:.5,editType:"layoutstyle"},y:{valType:"number",min:0,max:1,dflt:"auto",editType:"layoutstyle"},xanchor:{valType:"enumerated",dflt:"auto",values:["auto","left","center","right"],editType:"layoutstyle"},yanchor:{valType:"enumerated",dflt:"auto",values:["auto","top","middle","bottom"],editType:"layoutstyle"},pad:a(f({editType:"layoutstyle"}),{}),editType:"layoutstyle"},uniformtext:{mode:{valType:"enumerated",values:[!1,"hide","show"],dflt:!1,editType:"plot"},minsize:{valType:"number",min:0,
dflt:0,editType:"plot"},editType:"plot"},autosize:{valType:"boolean",dflt:!1,editType:"none"},width:{valType:"number",min:10,dflt:700,editType:"plot"},height:{valType:"number",min:10,dflt:450,editType:"plot"},margin:{l:{valType:"number",min:0,dflt:80,editType:"plot"},r:{valType:"number",min:0,dflt:80,editType:"plot"},t:{valType:"number",min:0,dflt:100,editType:"plot"},b:{valType:"number",min:0,dflt:80,editType:"plot"},pad:{valType:"number",min:0,dflt:0,editType:"plot"},autoexpand:{valType:"boolean",
dflt:!0,editType:"plot"},editType:"plot"},computed:{valType:"any",editType:"none"},paper_bgcolor:{valType:"color",dflt:n.background,editType:"plot"},plot_bgcolor:{valType:"color",dflt:n.background,editType:"layoutstyle"},separators:{valType:"string",editType:"plot"},hidesources:{valType:"boolean",dflt:!1,editType:"plot"},showlegend:{valType:"boolean",editType:"legend"},colorway:{valType:"colorlist",dflt:n.defaults,editType:"calc"},datarevision:{valType:"any",editType:"calc"},uirevision:{valType:"any",
editType:"none"},editrevision:{valType:"any",editType:"none"},selectionrevision:{valType:"any",editType:"none"},template:{valType:"any",editType:"calc"},modebar:{orientation:{valType:"enumerated",values:["v","h"],dflt:"h",editType:"modebar"},bgcolor:{valType:"color",editType:"modebar"},color:{valType:"color",editType:"modebar"},activecolor:{valType:"color",editType:"modebar"},uirevision:{valType:"any",editType:"none"},editType:"modebar"},newshape:m.newshape,activeshape:m.activeshape,meta:{valType:"any",
arrayOk:!0,editType:"plot"},transition:a({},q.transition,{editType:"none"}),_deprecated:{title:{valType:"string",editType:"layoutstyle"},titlefont:C({editType:"layoutstyle"})}}},{"../components/color/attributes":614,"../components/shapes/draw_newshape/attributes":697,"../lib/extend":740,"./animation_attributes":793,"./font_attributes":827,"./pad_attributes":861}],854:[function(a,G,C){a={"open-street-map":{id:"osm",version:8,sources:{"plotly-osm-tiles":{type:"raster",attribution:'\x3ca href\x3d"http://www.openstreetmap.org/about/" target\x3d"_blank"\x3e© OpenStreetMap\x3c/a\x3e',
tiles:["https://a.tile.openstreetmap.org/{z}/{x}/{y}.png","https://b.tile.openstreetmap.org/{z}/{x}/{y}.png"],tileSize:256}},layers:[{id:"plotly-osm-tiles",type:"raster",source:"plotly-osm-tiles",minzoom:0,maxzoom:22}]},"white-bg":{id:"white-bg",version:8,sources:{},layers:[{id:"white-bg",type:"background",paint:{"background-color":"#FFFFFF"},minzoom:0,maxzoom:22}]},"carto-positron":{id:"carto-positron",version:8,sources:{"plotly-carto-positron":{type:"raster",attribution:'\x3ca href\x3d"https://carto.com/" target\x3d"_blank"\x3e© CARTO\x3c/a\x3e',
tiles:["https://cartodb-basemaps-c.global.ssl.fastly.net/light_all/{z}/{x}/{y}.png"],tileSize:256}},layers:[{id:"plotly-carto-positron",type:"raster",source:"plotly-carto-positron",minzoom:0,maxzoom:22}]},"carto-darkmatter":{id:"carto-darkmatter",version:8,sources:{"plotly-carto-darkmatter":{type:"raster",attribution:'\x3ca href\x3d"https://carto.com/" target\x3d"_blank"\x3e© CARTO\x3c/a\x3e',tiles:["https://cartodb-basemaps-c.global.ssl.fastly.net/dark_all/{z}/{x}/{y}.png"],tileSize:256}},layers:[{id:"plotly-carto-darkmatter",
type:"raster",source:"plotly-carto-darkmatter",minzoom:0,maxzoom:22}]},"stamen-terrain":{id:"stamen-terrain",version:8,sources:{"plotly-stamen-terrain":{type:"raster",attribution:'Map tiles by \x3ca href\x3d"http://stamen.com"\x3eStamen Design\x3c/a\x3e, under \x3ca href\x3d"http://creativecommons.org/licenses/by/3.0"\x3eCC BY 3.0\x3c/a\x3e | Data by \x3ca href\x3d"http://openstreetmap.org"\x3eOpenStreetMap\x3c/a\x3e, under \x3ca href\x3d"http://www.openstreetmap.org/copyright"\x3eODbL\x3c/a\x3e.',
tiles:["https://stamen-tiles.a.ssl.fastly.net/terrain/{z}/{x}/{y}.png"],tileSize:256}},layers:[{id:"plotly-stamen-terrain",type:"raster",source:"plotly-stamen-terrain",minzoom:0,maxzoom:22}]},"stamen-toner":{id:"stamen-toner",version:8,sources:{"plotly-stamen-toner":{type:"raster",attribution:'Map tiles by \x3ca href\x3d"http://stamen.com"\x3eStamen Design\x3c/a\x3e, under \x3ca href\x3d"http://creativecommons.org/licenses/by/3.0"\x3eCC BY 3.0\x3c/a\x3e | Data by \x3ca href\x3d"http://openstreetmap.org"\x3eOpenStreetMap\x3c/a\x3e, under \x3ca href\x3d"http://www.openstreetmap.org/copyright"\x3eODbL\x3c/a\x3e.',
tiles:["https://stamen-tiles.a.ssl.fastly.net/toner/{z}/{x}/{y}.png"],tileSize:256}},layers:[{id:"plotly-stamen-toner",type:"raster",source:"plotly-stamen-toner",minzoom:0,maxzoom:22}]},"stamen-watercolor":{id:"stamen-watercolor",version:8,sources:{"plotly-stamen-watercolor":{type:"raster",attribution:'Map tiles by \x3ca href\x3d"http://stamen.com"\x3eStamen Design\x3c/a\x3e, under \x3ca href\x3d"http://creativecommons.org/licenses/by/3.0"\x3eCC BY 3.0\x3c/a\x3e | Data by \x3ca href\x3d"http://openstreetmap.org"\x3eOpenStreetMap\x3c/a\x3e, under \x3ca href\x3d"http://creativecommons.org/licenses/by-sa/3.0"\x3eCC BY SA\x3c/a\x3e.',
tiles:["https://stamen-tiles.a.ssl.fastly.net/watercolor/{z}/{x}/{y}.png"],tileSize:256}},layers:[{id:"plotly-stamen-watercolor",type:"raster",source:"plotly-stamen-watercolor",minzoom:0,maxzoom:22}]}};C=Object.keys(a);G.exports={requiredVersion:"1.10.1",styleUrlPrefix:"mapbox://styles/mapbox/",styleUrlSuffix:"v9",styleValuesMapbox:"basic streets outdoors light dark satellite satellite-streets".split(" "),styleValueDflt:"basic",stylesNonMapbox:a,styleValuesNonMapbox:C,traceLayerPrefix:"plotly-trace-layer-",
layoutLayerPrefix:"plotly-layout-layer-",wrongVersionErrorMsg:"Your custom plotly.js bundle is not using the correct mapbox-gl version\nPlease install mapbox-gl@1.10.1.",noAccessTokenErrorMsg:"Missing Mapbox access token.\nMapbox trace type require a Mapbox access token to be registered.\nFor example:\n  Plotly.plot(gd, data, layout, { mapboxAccessToken: 'my-access-token' });\nMore info here: https://www.mapbox.com/help/define-access-token/",missingStyleErrorMsg:["No valid mapbox style found, please set `mapbox.style` to one of:",
C.join(", "),"or register a Mapbox access token to use a Mapbox-served style."].join("\n"),multipleTokensErrorMsg:"Set multiple mapbox access token across different mapbox subplot,\nusing first token found as mapbox-gl does not allow multipleaccess tokens on the same page.",mapOnErrorMsg:"Mapbox error.",mapboxLogo:{path0:"m 10.5,1.24 c -5.11,0 -9.25,4.15 -9.25,9.25 0,5.1 4.15,9.25 9.25,9.25 5.1,0 9.25,-4.15 9.25,-9.25 0,-5.11 -4.14,-9.25 -9.25,-9.25 z m 4.39,11.53 c -1.93,1.93 -4.78,2.31 -6.7,2.31 -0.7,0 -1.41,-0.05 -2.1,-0.16 0,0 -1.02,-5.64 2.14,-8.81 0.83,-0.83 1.95,-1.28 3.13,-1.28 1.27,0 2.49,0.51 3.39,1.42 1.84,1.84 1.89,4.75 0.14,6.52 z",
path1:"M 10.5,-0.01 C 4.7,-0.01 0,4.7 0,10.49 c 0,5.79 4.7,10.5 10.5,10.5 5.8,0 10.5,-4.7 10.5,-10.5 C 20.99,4.7 16.3,-0.01 10.5,-0.01 Z m 0,19.75 c -5.11,0 -9.25,-4.15 -9.25,-9.25 0,-5.1 4.14,-9.26 9.25,-9.26 5.11,0 9.25,4.15 9.25,9.25 0,5.13 -4.14,9.26 -9.25,9.26 z",path2:"M 14.74,6.25 C 12.9,4.41 9.98,4.35 8.23,6.1 5.07,9.27 6.09,14.91 6.09,14.91 c 0,0 5.64,1.02 8.81,-2.14 C 16.64,11 16.59,8.09 14.74,6.25 Z m -2.27,4.09 -0.91,1.87 -0.9,-1.87 -1.86,-0.91 1.86,-0.9 0.9,-1.87 0.91,1.87 1.86,0.9 z",
polygon:"11.56,12.21 10.66,10.34 8.8,9.43 10.66,8.53 11.56,6.66 12.47,8.53 14.33,9.43 12.47,10.34"},styleRules:{map:"overflow:hidden;position:relative;","missing-css":"display:none;",canary:"background-color:salmon;","ctrl-bottom-left":"position: absolute; pointer-events: none; z-index: 2; bottom: 0; left: 0;","ctrl-bottom-right":"position: absolute; pointer-events: none; z-index: 2; right: 0; bottom: 0;",ctrl:"clear: both; pointer-events: auto; transform: translate(0, 0);","ctrl-attrib.mapboxgl-compact .mapboxgl-ctrl-attrib-inner":"display: none;",
"ctrl-attrib.mapboxgl-compact:hover .mapboxgl-ctrl-attrib-inner":"display: block; margin-top:2px","ctrl-attrib.mapboxgl-compact:hover":"padding: 2px 24px 2px 4px; visibility: visible; margin-top: 6px;","ctrl-attrib.mapboxgl-compact::after":'content: ""; cursor: pointer; position: absolute; background-image: url(\'data:image/svg+xml;charset\x3dutf-8,%3Csvg viewBox\x3d"0 0 20 20" xmlns\x3d"http://www.w3.org/2000/svg"%3E %3Cpath fill\x3d"%23333333" fill-rule\x3d"evenodd" d\x3d"M4,10a6,6 0 1,0 12,0a6,6 0 1,0 -12,0 M9,7a1,1 0 1,0 2,0a1,1 0 1,0 -2,0 M9,10a1,1 0 1,1 2,0l0,3a1,1 0 1,1 -2,0"/%3E %3C/svg%3E\'); background-color: rgba(255, 255, 255, 0.5); width: 24px; height: 24px; box-sizing: border-box; border-radius: 12px;',
"ctrl-attrib.mapboxgl-compact":"min-height: 20px; padding: 0; margin: 10px; position: relative; background-color: #fff; border-radius: 3px 12px 12px 3px;","ctrl-bottom-right \x3e .mapboxgl-ctrl-attrib.mapboxgl-compact::after":"bottom: 0; right: 0","ctrl-bottom-left \x3e .mapboxgl-ctrl-attrib.mapboxgl-compact::after":"bottom: 0; left: 0","ctrl-bottom-left .mapboxgl-ctrl":"margin: 0 0 10px 10px; float: left;","ctrl-bottom-right .mapboxgl-ctrl":"margin: 0 10px 10px 0; float: right;","ctrl-attrib":"color: rgba(0, 0, 0, 0.75); text-decoration: none; font-size: 12px",
"ctrl-attrib a":"color: rgba(0, 0, 0, 0.75); text-decoration: none; font-size: 12px","ctrl-attrib a:hover":"color: inherit; text-decoration: underline;","ctrl-attrib .mapbox-improve-map":"font-weight: bold; margin-left: 2px;","attrib-empty":"display: none;","ctrl-logo":'display:block; width: 21px; height: 21px; background-image: url(\'data:image/svg+xml;charset\x3dutf-8,%3C?xml version\x3d"1.0" encoding\x3d"utf-8"?%3E %3Csvg version\x3d"1.1" id\x3d"Layer_1" xmlns\x3d"http://www.w3.org/2000/svg" xmlns:xlink\x3d"http://www.w3.org/1999/xlink" x\x3d"0px" y\x3d"0px" viewBox\x3d"0 0 21 21" style\x3d"enable-background:new 0 0 21 21;" xml:space\x3d"preserve"%3E%3Cg transform\x3d"translate(0,0.01)"%3E%3Cpath d\x3d"m 10.5,1.24 c -5.11,0 -9.25,4.15 -9.25,9.25 0,5.1 4.15,9.25 9.25,9.25 5.1,0 9.25,-4.15 9.25,-9.25 0,-5.11 -4.14,-9.25 -9.25,-9.25 z m 4.39,11.53 c -1.93,1.93 -4.78,2.31 -6.7,2.31 -0.7,0 -1.41,-0.05 -2.1,-0.16 0,0 -1.02,-5.64 2.14,-8.81 0.83,-0.83 1.95,-1.28 3.13,-1.28 1.27,0 2.49,0.51 3.39,1.42 1.84,1.84 1.89,4.75 0.14,6.52 z" style\x3d"opacity:0.9;fill:%23ffffff;enable-background:new" class\x3d"st0"/%3E%3Cpath d\x3d"M 10.5,-0.01 C 4.7,-0.01 0,4.7 0,10.49 c 0,5.79 4.7,10.5 10.5,10.5 5.8,0 10.5,-4.7 10.5,-10.5 C 20.99,4.7 16.3,-0.01 10.5,-0.01 Z m 0,19.75 c -5.11,0 -9.25,-4.15 -9.25,-9.25 0,-5.1 4.14,-9.26 9.25,-9.26 5.11,0 9.25,4.15 9.25,9.25 0,5.13 -4.14,9.26 -9.25,9.26 z" style\x3d"opacity:0.35;enable-background:new" class\x3d"st1"/%3E%3Cpath d\x3d"M 14.74,6.25 C 12.9,4.41 9.98,4.35 8.23,6.1 5.07,9.27 6.09,14.91 6.09,14.91 c 0,0 5.64,1.02 8.81,-2.14 C 16.64,11 16.59,8.09 14.74,6.25 Z m -2.27,4.09 -0.91,1.87 -0.9,-1.87 -1.86,-0.91 1.86,-0.9 0.9,-1.87 0.91,1.87 1.86,0.9 z" style\x3d"opacity:0.35;enable-background:new" class\x3d"st1"/%3E%3Cpolygon points\x3d"11.56,12.21 10.66,10.34 8.8,9.43 10.66,8.53 11.56,6.66 12.47,8.53 14.33,9.43 12.47,10.34 " style\x3d"opacity:0.9;fill:%23ffffff;enable-background:new" class\x3d"st0"/%3E%3C/g%3E%3C/svg%3E\')'}}},
{}],855:[function(a,G,C){var q=a("../../lib");G.exports=function(n,m){var f=n.split(" ");n=f[0];f=f[1];var b=q.isArrayOrTypedArray(m)?q.mean(m):m;m=.5+b/100;b=1.5+b/100;var k=["",""],e=[0,0];switch(n){case "top":k[0]="top";e[1]=-b;break;case "bottom":k[0]="bottom",e[1]=b}switch(f){case "left":k[1]="right";e[0]=-m;break;case "right":k[1]="left",e[0]=m}return{anchor:k[0]&&k[1]?k.join("-"):k[0]?k[0]:k[1]?k[1]:"center",offset:e}}},{"../../lib":750}],856:[function(a,G,C){function q(g){return"string"===
typeof g&&(-1!==c.styleValuesMapbox.indexOf(g)||0===g.indexOf("mapbox://"))}var n=a("mapbox-gl"),m=a("../../lib"),f=a("../../plots/get_data").getSubplotCalcData,b=a("../../constants/xmlns_namespaces"),k=a("d3"),e=a("../../components/drawing"),h=a("../../lib/svg_text_utils"),l=a("./mapbox"),c=C.constants=a("./constants");C.name="mapbox";C.attr="subplot";C.idRoot="mapbox";C.idRegex=C.attrRegex=m.counterRegex("mapbox");C.attributes={subplot:{valType:"subplotid",dflt:"mapbox",editType:"calc"}};C.layoutAttributes=
a("./layout_attributes");C.supplyLayoutDefaults=a("./layout_defaults");C.plot=function(g){var d=g._fullLayout,p=g.calcdata,r=d._subplots.mapbox;if(n.version!==c.requiredVersion)throw Error(c.wrongVersionErrorMsg);var t=g._fullLayout;if(""===g._context.mapboxAccessToken)t="";else{for(var w=[],x=[],y=!1,A=!1,z=0;z<r.length;z++){var F=t[r[z]],D=F.accesstoken;q(F.style)&&(D?m.pushUnique(w,D):(q(F._input.style)&&(m.error("Uses Mapbox map style, but did not set an access token."),y=!0),A=!0));D&&m.pushUnique(x,
D)}if(A)throw g=y?c.noAccessTokenErrorMsg:c.missingStyleErrorMsg,m.error(g),Error(g);w.length?(1<w.length&&m.warn(c.multipleTokensErrorMsg),t=w[0]):(x.length&&m.log(["Listed mapbox access token(s)",x.join(","),"but did not use a Mapbox map style, ignoring token(s)."].join(" ")),t="")}n.accessToken=t;for(t=0;t<r.length;t++)w=r[t],x=f(p,"mapbox",w),y=d[w],A=y._subplot,A||(A=new l(g,w),d[w]._subplot=A),A.viewInitial||(A.viewInitial={center:m.extendFlat({},y.center),zoom:y.zoom,bearing:y.bearing,pitch:y.pitch}),
A.plot(x,d,g._promises)};C.clean=function(g,d,p,r){g=r._subplots.mapbox||[];for(p=0;p<g.length;p++){var t=g[p];!d[t]&&r[t]._subplot&&r[t]._subplot.destroy()}};C.toSVG=function(g){for(var d=g._fullLayout,p=d._subplots.mapbox,r=d._size,t=0;t<p.length;t++){var w=d[p[t]],x=w.domain,y=w._subplot.toImage("png");d._glimages.append("svg:image").attr({xmlns:b.svg,"xlink:href":y,x:r.l+r.w*x.x[0],y:r.t+r.h*(1-x.y[1]),width:r.w*(x.x[1]-x.x[0]),height:r.h*(x.y[1]-x.y[0]),preserveAspectRatio:"none"});w=k.select(w._subplot.div);
null!==w.select(".mapboxgl-ctrl-logo").node().offsetParent&&(y=d._glimages.append("g"),y.attr("transform","translate("+(r.l+r.w*x.x[0]+10)+", "+(r.t+r.h*(1-x.y[0])-31)+")"),y.append("path").attr("d",c.mapboxLogo.path0).style({opacity:.9,fill:"#ffffff","enable-background":"new"}),y.append("path").attr("d",c.mapboxLogo.path1).style("opacity",.35).style("enable-background","new"),y.append("path").attr("d",c.mapboxLogo.path2).style("opacity",.35).style("enable-background","new"),y.append("polygon").attr("points",
c.mapboxLogo.polygon).style({opacity:.9,fill:"#ffffff","enable-background":"new"}));var A=w.select(".mapboxgl-ctrl-attrib").text().replace("Improve this map","");w=d._glimages.append("g");var z=w.append("text");z.text(A).classed("static-attribution",!0).attr({"font-size":12,"font-family":"Arial",color:"rgba(0, 0, 0, 0.75)","text-anchor":"end","data-unformatted":A});var F=e.bBox(z.node());y=r.w*(x.x[1]-x.x[0]);F.width>y/2&&(F=A.split("|").join("\x3cbr\x3e"),z.text(F).attr("data-unformatted",F).call(h.convertToTspans,
g),F=e.bBox(z.node()));z.attr("transform","translate(-3, "+(-F.height+8)+")");w.insert("rect",".static-attribution").attr({x:-F.width-6,y:-F.height-3,width:F.width+6,height:F.height+3,fill:"rgba(255, 255, 255, 0.75)"});z=1;F.width+6>y&&(z=y/(F.width+6));x=[r.l+r.w*x.x[1],r.t+r.h*(1-x.y[0])];w.attr("transform","translate("+x[0]+","+x[1]+") scale("+z+")")}};C.updateFx=function(g){g=g._fullLayout;for(var d=g._subplots.mapbox,p=0;p<d.length;p++)g[d[p]]._subplot.updateFx(g)}},{"../../components/drawing":637,
"../../constants/xmlns_namespaces":726,"../../lib":750,"../../lib/svg_text_utils":774,"../../plots/get_data":836,"./constants":854,"./layout_attributes":858,"./layout_defaults":859,"./mapbox":860,d3:169,"mapbox-gl":447}],857:[function(a,G,C){function q(h,l){this.subplot=h;this.uid=h.uid+"-"+l;this.index=l;this.idSource="source-"+this.uid;this.idLayer=e.layoutLayerPrefix+this.uid;this.below=this.layerType=this.source=this.sourceType=null;this.visible=!1}function n(h){if(!h.visible)return!1;h=h.source;
if(Array.isArray(h)&&0<h.length){for(var l=0;l<h.length;l++)if("string"!==typeof h[l]||0===h[l].length)return!1;return!0}return f.isPlainObject(h)||"string"===typeof h&&0<h.length}function m(h){var l={},c={};switch(h.type){case "circle":f.extendFlat(c,{"circle-radius":h.circle.radius,"circle-color":h.color,"circle-opacity":h.opacity});break;case "line":f.extendFlat(c,{"line-width":h.line.width,"line-color":h.color,"line-opacity":h.opacity,"line-dasharray":h.line.dash});break;case "fill":f.extendFlat(c,
{"fill-color":h.color,"fill-outline-color":h.fill.outlinecolor,"fill-opacity":h.opacity});break;case "symbol":var g=h.symbol,d=k(g.textposition,g.iconsize);f.extendFlat(l,{"icon-image":g.icon+"-15","icon-size":g.iconsize/10,"text-field":g.text,"text-size":g.textfont.size,"text-anchor":d.anchor,"text-offset":d.offset,"symbol-placement":g.placement});f.extendFlat(c,{"icon-color":h.color,"text-color":g.textfont.color,"text-opacity":h.opacity});break;case "raster":f.extendFlat(c,{"raster-fade-duration":0,
"raster-opacity":h.opacity})}return{layout:l,paint:c}}var f=a("../../lib"),b=a("../../lib/svg_text_utils").sanitizeHTML,k=a("./convert_text_opts"),e=a("./constants");a=q.prototype;a.update=function(h){this.visible?this.needsNewImage(h)?this.updateImage(h):this.needsNewSource(h)?(this.removeLayer(),this.updateSource(h),this.updateLayer(h)):this.needsNewLayer(h)?this.updateLayer(h):this.updateStyle(h):(this.updateSource(h),this.updateLayer(h));this.visible=n(h)};a.needsNewImage=function(h){return this.subplot.map.getSource(this.idSource)&&
"image"===this.sourceType&&"image"===h.sourcetype&&(this.source!==h.source||JSON.stringify(this.coordinates)!==JSON.stringify(h.coordinates))};a.needsNewSource=function(h){return this.sourceType!==h.sourcetype||this.source!==h.source||this.layerType!==h.type};a.needsNewLayer=function(h){return this.layerType!==h.type||this.below!==this.subplot.belowLookup["layout-"+this.index]};a.updateImage=function(h){this.subplot.map.getSource(this.idSource).updateImage({url:h.source,coordinates:h.coordinates})};
a.updateSource=function(h){var l=this.subplot.map;l.getSource(this.idSource)&&l.removeSource(this.idSource);this.sourceType=h.sourcetype;this.source=h.source;if(n(h)){var c=h.sourcetype,g=h.source,d={type:c};if("geojson"===c)var p="data";else"vector"===c?p="string"===typeof g?"url":"tiles":"raster"===c?(p="tiles",d.tileSize=256):"image"===c&&(p="url",d.coordinates=h.coordinates);d[p]=g;h.sourceattribution&&(d.attribution=b(h.sourceattribution));l.addSource(this.idSource,d)}};a.updateLayer=function(h){var l=
this.subplot,c=m(h),g=this.subplot.belowLookup["layout-"+this.index];if("traces"===g)for(var d=l.getMapLayers(),p=0;p<d.length;p++){var r=d[p].id;if("string"===typeof r&&0===r.indexOf(e.traceLayerPrefix)){var t=r;break}}else t=g;this.removeLayer();n(h)&&l.addLayer({id:this.idLayer,source:this.idSource,"source-layer":h.sourcelayer||"",type:h.type,minzoom:h.minzoom,maxzoom:h.maxzoom,layout:c.layout,paint:c.paint},t);this.layerType=h.type;this.below=g};a.updateStyle=function(h){n(h)&&(h=m(h),this.subplot.setOptions(this.idLayer,
"setLayoutProperty",h.layout),this.subplot.setOptions(this.idLayer,"setPaintProperty",h.paint))};a.removeLayer=function(){var h=this.subplot.map;h.getLayer(this.idLayer)&&h.removeLayer(this.idLayer)};a.dispose=function(){var h=this.subplot.map;h.getLayer(this.idLayer)&&h.removeLayer(this.idLayer);h.getSource(this.idSource)&&h.removeSource(this.idSource)};G.exports=function(h,l,c){h=new q(h,l);h.update(c);return h}},{"../../lib":750,"../../lib/svg_text_utils":774,"./constants":854,"./convert_text_opts":855}],
858:[function(a,G,C){C=a("../../lib");var q=a("../../components/color").defaultLine,n=a("../domain").attributes,m=a("../font_attributes"),f=a("../../traces/scatter/attributes").textposition,b=a("../../plot_api/edit_types").overrideAll,k=a("../../plot_api/plot_template").templatedArray;a=a("./constants");m=m({});m.family.dflt="Open Sans Regular, Arial Unicode MS Regular";(G.exports=b({_arrayAttrRegexps:[C.counterRegex("mapbox",".layers",!0)],domain:n({name:"mapbox"}),accesstoken:{valType:"string",
noBlank:!0,strict:!0},style:{valType:"any",values:a.styleValuesMapbox.concat(a.styleValuesNonMapbox),dflt:a.styleValueDflt},center:{lon:{valType:"number",dflt:0},lat:{valType:"number",dflt:0}},zoom:{valType:"number",dflt:1},bearing:{valType:"number",dflt:0},pitch:{valType:"number",dflt:0},layers:k("layer",{visible:{valType:"boolean",dflt:!0},sourcetype:{valType:"enumerated",values:["geojson","vector","raster","image"],dflt:"geojson"},source:{valType:"any"},sourcelayer:{valType:"string",dflt:""},sourceattribution:{valType:"string"},
type:{valType:"enumerated",values:["circle","line","fill","symbol","raster"],dflt:"circle"},coordinates:{valType:"any"},below:{valType:"string"},color:{valType:"color",dflt:q},opacity:{valType:"number",min:0,max:1,dflt:1},minzoom:{valType:"number",min:0,max:24,dflt:0},maxzoom:{valType:"number",min:0,max:24,dflt:24},circle:{radius:{valType:"number",dflt:15}},line:{width:{valType:"number",dflt:2},dash:{valType:"data_array"}},fill:{outlinecolor:{valType:"color",dflt:q}},symbol:{icon:{valType:"string",
dflt:"marker"},iconsize:{valType:"number",dflt:10},text:{valType:"string",dflt:""},placement:{valType:"enumerated",values:["point","line","line-center"],dflt:"point"},textfont:m,textposition:C.extendFlat({},f,{arrayOk:!1})}})},"plot","from-root")).uirevision={valType:"any",editType:"none"}},{"../../components/color":615,"../../lib":750,"../../plot_api/edit_types":781,"../../plot_api/plot_template":788,"../../traces/scatter/attributes":1158,"../domain":826,"../font_attributes":827,"./constants":854}],
859:[function(a,G,C){function q(e,h,l,c){l("accesstoken",c.accessToken);l("style");l("center.lon");l("center.lat");l("zoom");l("bearing");l("pitch");b(e,h,{name:"layers",handleItemDefaults:n});h._input=e}function n(e,h){function l(p,r){return m.coerce(e,h,k.layers,p,r)}if(l("visible")){var c=l("sourcetype"),g="raster"===c||"image"===c;l("source");l("sourceattribution");"vector"===c&&l("sourcelayer");"image"===c&&l("coordinates");var d;g&&(d="raster");c=l("type",d);g&&"raster"!==c&&(c=h.type="raster",
m.log("Source types *raster* and *image* must drawn *raster* layer type."));l("below");l("color");l("opacity");l("minzoom");l("maxzoom");"circle"===c&&l("circle.radius");"line"===c&&(l("line.width"),l("line.dash"));"fill"===c&&l("fill.outlinecolor");"symbol"===c&&(l("symbol.icon"),l("symbol.iconsize"),l("symbol.text"),m.coerceFont(l,"symbol.textfont"),l("symbol.textposition"),l("symbol.placement"))}}var m=a("../../lib"),f=a("../subplot_defaults"),b=a("../array_container_defaults"),k=a("./layout_attributes");
G.exports=function(e,h,l){f(e,h,l,{type:"mapbox",attributes:k,handleDefaults:q,partition:"y",accessToken:h._mapboxAccessToken})}},{"../../lib":750,"../array_container_defaults":794,"../subplot_defaults":876,"./layout_attributes":858}],860:[function(a,G,C){function q(F,D){this.id=D;this.gd=F;D=F._fullLayout;F=F._context;this.container=D._glcontainer.node();this.isStatic=F.staticPlot;this.uid=D._uid+"-"+this.id;this.yaxis=this.xaxis=this.div=null;this.createFramework(D);this.styleObj=this.accessToken=
this.map=null;this.traceHash={};this.layerList=[];this.belowLookup={};this.wheeling=this.dragging=!1}function n(F){var D={};b.isPlainObject(F)?(D.id=F.id,D.style=F):"string"===typeof F?(D.id=F,-1!==y.styleValuesMapbox.indexOf(F)?D.style=y.styleUrlPrefix+F+"-"+y.styleUrlSuffix:D.style=y.stylesNonMapbox[F]?y.stylesNonMapbox[F]:F):(D.id=y.styleValueDflt,D.style=y.styleUrlPrefix+y.styleValueDflt+"-"+y.styleUrlSuffix);D.transition={duration:0,delay:0};return D}function m(F){return[F.lon,F.lat]}var f=a("mapbox-gl"),
b=a("../../lib"),k=a("../../lib/geo_location_utils"),e=a("../../registry"),h=a("../cartesian/axes"),l=a("../../components/dragelement"),c=a("../../components/fx");C=a("../../components/dragelement/helpers");var g=C.rectMode,d=C.drawMode,p=C.selectMode,r=a("../cartesian/select").prepSelect,t=a("../cartesian/select").clearSelect,w=a("../cartesian/select").clearSelectionsCache,x=a("../cartesian/select").selectOnClick,y=a("./constants"),A=a("./layers");a=q.prototype;a.plot=function(F,D,u){var B=this,
I=D[B.id];B.map&&I.accesstoken!==B.accessToken&&(B.map.remove(),B.map=null,B.styleObj=null,B.traceHash={},B.layerList=[]);I=B.map?new Promise(function(J,N){B.updateMap(F,D,J,N)}):new Promise(function(J,N){B.createMap(F,D,J,N)});u.push(I)};a.createMap=function(F,D,u,B){var I=this,J=D[I.id],N=I.styleObj=n(J.style);I.accessToken=J.accesstoken;var M=I.map=(new f.Map({container:I.div,style:N.style,center:m(J.center),zoom:J.zoom,bearing:J.bearing,pitch:J.pitch,interactive:!I.isStatic,preserveDrawingBuffer:I.isStatic,
doubleClickZoom:!1,boxZoom:!1,attributionControl:!1})).addControl(new f.AttributionControl({compact:!0}));M._canvas.style.left="0px";M._canvas.style.top="0px";I.rejectOnError(B);I.isStatic||I.initFx(F,D);J=[];J.push(new Promise(function(E){M.once("load",E)}));J=J.concat(k.fetchTraceGeoData(F));Promise.all(J).then(function(){I.fillBelowLookup(F,D);I.updateData(F);I.updateLayout(D);I.resolveOnRender(u)}).catch(B)};a.updateMap=function(F,D,u,B){var I=this,J=I.map,N=D[this.id];I.rejectOnError(B);var M=
[];N=n(N.style);JSON.stringify(I.styleObj)!==JSON.stringify(N)&&(I.styleObj=N,J.setStyle(N.style),I.traceHash={},M.push(new Promise(function(E){J.once("styledata",E)})));M=M.concat(k.fetchTraceGeoData(F));Promise.all(M).then(function(){I.fillBelowLookup(F,D);I.updateData(F);I.updateLayout(D);I.resolveOnRender(u)}).catch(B)};a.fillBelowLookup=function(F,D){var u=D[this.id].layers,B,I=this.belowLookup={},J=!1;for(D=0;D<F.length;D++){var N=F[D][0].trace,M=N._module;"string"===typeof N.below?B=N.below:
M.getBelow&&(B=M.getBelow(N,this));""===B&&(J=!0);I["trace-"+N.uid]=B||""}for(D=0;D<u.length;D++)B=u[D],B="string"===typeof B.below?B.below:J?"traces":"",I["layout-"+D]=B;F={};for(var E in I)B=I[E],F[B]?F[B].push(E):F[B]=[E];for(B in F)if(I=F[B],1<I.length)for(D=0;D<I.length;D++)E=I[D],0===E.indexOf("trace-")?(E=E.split("trace-")[1],this.traceHash[E]&&(this.traceHash[E].below=null)):0===E.indexOf("layout-")&&(E=E.split("layout-")[1],this.layerList[E]&&(this.layerList[E].below=null))};var z={choroplethmapbox:0,
densitymapbox:1,scattermapbox:2};a.updateData=function(F){var D=this.traceHash,u,B=F.slice().sort(function(E,L){return z[E[0].trace.type]-z[L[0].trace.type]});for(u=0;u<B.length;u++){var I=B[u];var J=I[0].trace;var N=D[J.uid];var M=!1;N&&(N.type===J.type?(N.update(I),M=!0):N.dispose());!M&&J._module&&(D[J.uid]=J._module.plot(this,I))}B=Object.keys(D);u=0;a:for(;u<B.length;u++){I=B[u];for(N=0;N<F.length;N++)if(J=F[N][0].trace,I===J.uid)continue a;N=D[I];N.dispose();delete D[I]}};a.updateLayout=function(F){var D=
this.map,u=F[this.id];this.dragging||this.wheeling||(D.setCenter(m(u.center)),D.setZoom(u.zoom),D.setBearing(u.bearing),D.setPitch(u.pitch));this.updateLayers(F);this.updateFramework(F);this.updateFx(F);this.map.resize();this.gd._context._scrollZoom.mapbox?D.scrollZoom.enable():D.scrollZoom.disable()};a.resolveOnRender=function(F){var D=this.map;D.on("render",function B(){D.loaded()&&(D.off("render",B),setTimeout(F,10))})};a.rejectOnError=function(F){function D(){F(Error(y.mapOnErrorMsg))}var u=this.map;
u.once("error",D);u.once("style.error",D);u.once("source.error",D);u.once("tile.error",D);u.once("layer.error",D)};a.createFramework=function(F){var D=this,u=D.div=document.createElement("div");u.id=D.uid;u.style.position="absolute";D.container.appendChild(u);D.xaxis={_id:"x",c2p:function(B){return D.project(B).x}};D.yaxis={_id:"y",c2p:function(B){return D.project(B).y}};D.updateFramework(F);D.mockAxis={type:"linear",showexponent:"all",exponentformat:"B"};h.setConvert(D.mockAxis,F)};a.initFx=function(F,
D){function u(){c.loneUnhover(D._hoverlayer)}function B(){var M=I.getView();J.emit("plotly_relayouting",I.getViewEditsWithDerived(M))}var I=this,J=I.gd,N=I.map;N.on("moveend",function(M){if(I.map){var E=J._fullLayout;if(M.originalEvent||I.wheeling){var L=E[I.id];e.call("_storeDirectGUIEdit",J.layout,E._preGUI,I.getViewEdits(L));var Q=I.getView();L._input.center=L.center=Q.center;L._input.zoom=L.zoom=Q.zoom;L._input.bearing=L.bearing=Q.bearing;L._input.pitch=L.pitch=Q.pitch;J.emit("plotly_relayout",
I.getViewEditsWithDerived(Q))}M.originalEvent&&"mouseup"===M.originalEvent.type?I.dragging=!1:I.wheeling&&(I.wheeling=!1);E._rehover&&E._rehover()}});N.on("wheel",function(){I.wheeling=!0});N.on("mousemove",function(M){var E=I.div.getBoundingClientRect();M.clientX=M.point.x+E.left;M.clientY=M.point.y+E.top;M.target.getBoundingClientRect=function(){return E};I.xaxis.p2c=function(){return M.lngLat.lng};I.yaxis.p2c=function(){return M.lngLat.lat};J._fullLayout._rehover=function(){J._fullLayout._hoversubplot===
I.id&&J._fullLayout[I.id]&&c.hover(J,M,I.id)};c.hover(J,M,I.id);J._fullLayout._hoversubplot=I.id});N.on("dragstart",function(){I.dragging=!0;u()});N.on("zoomstart",u);N.on("mouseout",function(){J._fullLayout._hoversubplot=null});N.on("drag",B);N.on("zoom",B);N.on("dblclick",function(){var M=J._fullLayout[I.id];e.call("_storeDirectGUIEdit",J.layout,J._fullLayout._preGUI,I.getViewEdits(M));var E=I.viewInitial;N.setCenter(m(E.center));N.setZoom(E.zoom);N.setBearing(E.bearing);N.setPitch(E.pitch);E=I.getView();
M._input.center=M.center=E.center;M._input.zoom=M.zoom=E.zoom;M._input.bearing=M.bearing=E.bearing;M._input.pitch=M.pitch=E.pitch;J.emit("plotly_doubleclick",null);J.emit("plotly_relayout",I.getViewEditsWithDerived(E))});I.clearSelect=function(){w(I.dragOptions);t(I.dragOptions.gd)};I.onClickInPanFn=function(M){return function(E){var L=J._fullLayout.clickmode;-1<L.indexOf("select")&&x(E.originalEvent,J,[I.xaxis],[I.yaxis],I.id,M);-1<L.indexOf("event")&&c.click(J,E.originalEvent)}}};a.updateFx=function(F){function D(M){M=
u.map.unproject(M);return[M.lng,M.lat]}var u=this,B=u.map,I=u.gd;if(!u.isStatic){var J=F.dragmode;var N=g(J)?function(M,E){(M.range={})[u.id]=[D([E.xmin,E.ymin]),D([E.xmax,E.ymax])]}:function(M,E,L){(M.lassoPoints={})[u.id]=L.filtered.map(D)};u.dragOptions=b.extendDeep(u.dragOptions||{},{dragmode:F.dragmode,element:u.div,gd:I,plotinfo:{id:u.id,domain:F[u.id].domain,xaxis:u.xaxis,yaxis:u.yaxis,fillRangeItems:N},xaxes:[u.xaxis],yaxes:[u.yaxis],subplot:u.id});B.off("click",u.onClickInPanHandler);p(J)||
d(J)?(B.dragPan.disable(),B.on("zoomstart",u.clearSelect),u.dragOptions.prepFn=function(M,E,L){r(M,E,L,u.dragOptions,J)},l.init(u.dragOptions)):(B.dragPan.enable(),B.off("zoomstart",u.clearSelect),u.div.onmousedown=null,u.onClickInPanHandler=u.onClickInPanFn(u.dragOptions),B.on("click",u.onClickInPanHandler))}};a.updateFramework=function(F){var D=F[this.id].domain;F=F._size;var u=this.div.style;u.width=F.w*(D.x[1]-D.x[0])+"px";u.height=F.h*(D.y[1]-D.y[0])+"px";u.left=F.l+D.x[0]*F.w+"px";u.top=F.t+
(1-D.y[1])*F.h+"px";this.xaxis._offset=F.l+D.x[0]*F.w;this.xaxis._length=F.w*(D.x[1]-D.x[0]);this.yaxis._offset=F.t+(1-D.y[1])*F.h;this.yaxis._length=F.h*(D.y[1]-D.y[0])};a.updateLayers=function(F){F=F[this.id].layers;var D=this.layerList,u;if(F.length!==D.length){for(u=0;u<D.length;u++)D[u].dispose();D=this.layerList=[];for(u=0;u<F.length;u++)D.push(A(this,u,F[u]))}else for(u=0;u<F.length;u++)D[u].update(F[u])};a.destroy=function(){this.map&&(this.map.remove(),this.map=null,this.container.removeChild(this.div))};
a.toImage=function(){this.map.stop();return this.map.getCanvas().toDataURL()};a.setOptions=function(F,D,u){for(var B in u)this.map[D](F,B,u[B])};a.getMapLayers=function(){return this.map.getStyle().layers};a.addLayer=function(F,D){var u=this.map;if("string"===typeof D){if(""===D){u.addLayer(F,D);return}for(var B=this.getMapLayers(),I=0;I<B.length;I++)if(D===B[I].id){u.addLayer(F,D);return}b.warn(["Trying to add layer with *below* value",D,"referencing a layer that does not exist or that does not yet exist."].join(" "))}u.addLayer(F)};
a.project=function(F){return this.map.project(new f.LngLat(F[0],F[1]))};a.getView=function(){var F=this.map,D=F.getCenter();D={lon:D.lng,lat:D.lat};var u=F.getCanvas(),B=u.width;u=u.height;return{center:D,zoom:F.getZoom(),bearing:F.getBearing(),pitch:F.getPitch(),_derived:{coordinates:[F.unproject([0,0]).toArray(),F.unproject([B,0]).toArray(),F.unproject([B,u]).toArray(),F.unproject([0,u]).toArray()]}}};a.getViewEdits=function(F){for(var D=this.id,u=["center","zoom","bearing","pitch"],B={},I=0;I<
u.length;I++){var J=u[I];B[D+"."+J]=F[J]}return B};a.getViewEditsWithDerived=function(F){var D=this.id,u=this.getViewEdits(F);u[D+"._derived"]=F._derived;return u};G.exports=q},{"../../components/dragelement":634,"../../components/dragelement/helpers":633,"../../components/fx":655,"../../lib":750,"../../lib/geo_location_utils":743,"../../registry":882,"../cartesian/axes":799,"../cartesian/select":818,"./constants":854,"./layers":857,"mapbox-gl":447}],861:[function(a,G,C){G.exports=function(q){q=q.editType;
return{t:{valType:"number",dflt:0,editType:q},r:{valType:"number",dflt:0,editType:q},b:{valType:"number",dflt:0,editType:q},l:{valType:"number",dflt:0,editType:q},editType:q}}},{}],862:[function(a,G,C){function q(O,T){T.text("");T=T.append("a").attr({"xlink:xlink:href":"#","class":"link--impt link--embedview","font-weight":"bold"}).text(O._context.linkText+" "+String.fromCharCode(187));if(O._context.sendData)T.on("click",function(){M.sendDataToCloud(O)});else{var V=window.location.pathname.split("/"),
X=window.location.search;T.attr({"xlink:xlink:show":"new","xlink:xlink:href":"/"+V[2].split(".")[0]+"/"+V[1]+X})}}function n(O,T){function V(ra,qa){sa[qa]=ra;ma[ra]=1}function X(ra,qa){if(ra&&"string"===typeof ra&&!ma[ra])return V(ra,qa),!0}var ba=T.length,aa=[],ka;for(ka=0;ka<O.length;ka++){var ha=O[ka]._fullInput;ha!==ca&&aa.push(ha);var ca=ha}O=aa.length;var sa=Array(ba),ma={};for(ka=0;ka<ba;ka++)ca=T[ka].uid,"number"===typeof ca&&(ca=String(ca)),X(ca,ka)||ka<O&&X(aa[ka].uid,ka)||V(y.randstr(ma),
ka);return sa}function m(O,T){function V(sa){for(var ma=!0,ra=0;ra<T.length;ra++){var qa=T[ra];aa[qa]||(sa[qa]?aa[qa]=sa[qa]:ma=!1)}ma&&(ba=!0)}var X=O._context.locale;X||"en-US"===X;for(var ba=!1,aa={},ka=0;2>ka;ka++){for(var ha=O._context.locales,ca=0;2>ca;ca++){if(ha=(ha[X]||{}).format)if(V(ha),ba)break;ha=t.localeRegistry}ca=X.split("-")[0];if(ba||ca===X)break;X=ca}ba||V(t.localeRegistry.en.format);return aa}function f(O){O=O.transforms;if(Array.isArray(O)&&O.length)for(var T=0;T<O.length;T++){var V=
O[T];if((V=V._module||E[V.type])&&V.makesData)return!0}return!1}function b(O,T,V,X){for(var ba=O.transforms,aa=[O],ka=0;ka<ba.length;ka++){var ha=ba[ka],ca=E[ha.type];ca&&ca.transform&&(aa=ca.transform(aa,{transform:ha,fullTrace:O,fullData:T,layout:V,fullLayout:X,transformIndex:ka}))}return aa}function k(O){return"string"===typeof O&&"px"===O.substr(O.length-2)&&parseFloat(O)}function e(O){var T=O.margin;O._size||(T=O._size={l:Math.round(T.l),r:Math.round(T.r),t:Math.round(T.t),b:Math.round(T.b),
p:Math.round(T.pad)},T.w=Math.round(O.width)-T.l-T.r,T.h=Math.round(O.height)-T.t-T.b);O._pushmargin||(O._pushmargin={});O._pushmarginIds||(O._pushmarginIds={})}function h(O,T,V){function X(ha){if(ha)for(;ha.length;)ha.shift()}function ba(ha){if(O._transitionData)return X(O._transitionData._interruptCallbacks),Promise.resolve().then(function(){if(V.redraw)return t.call("redraw",O)}).then(function(){O._transitioning=!1;O._transitioningWithDuration=!1;O.emit("plotly_transitioned",[])}).then(ha)}var aa=
!1,ka=y.syncOrAsync([M.previousPromises,function(){if(O._transitionData){O._transitioning=!1;var ha=O._transitionData._interruptCallbacks,ca=Promise.resolve();if(ha)for(;ha.length;)ca=ca.then(ha.shift());return ca}},V.prepareFn,M.rehover,function(){O.emit("plotly_transitioning",[]);return new Promise(function(ha){function ca(){sa++;return function(){ma++;aa||ma!==sa||ba(ha)}}O._transitioning=!0;0<T.duration&&(O._transitioningWithDuration=!0);O._transitionData._interruptCallbacks.push(function(){aa=
!0});V.redraw&&O._transitionData._interruptCallbacks.push(function(){return t.call("redraw",O)});O._transitionData._interruptCallbacks.push(function(){O.emit("plotly_transitioninterrupted",[])});var sa=0,ma=0;V.runFn(ca);setTimeout(ca())})}],O);ka&&ka.then||(ka=Promise.resolve());return ka.then(function(){return O})}function l(O,T){function V(Pa,Fa,Na){var $a=Fa._id.charAt(0);if("histogram2dcontour"===Pa){Pa=Fa._counterAxes[0];Fa=F.getFromId(T,Pa);var cb="x"===$a||"x"===Pa&&"category"===Fa.type,mb=
"y"===$a||"y"===Pa&&"category"===Fa.type;return function(Ka,Ua){return 0===Ka||0===Ua||cb&&Ka===Na[Ua].length-1||mb&&Ua===Na.length-1?-1:("y"===$a?Ua:Ka)-1}}return function(Ka,Ua){return"y"===$a?Ua:Ka}}var X=[],ba,aa,ka,ha,ca={min:function(Pa){return y.aggNums(Math.min,null,Pa)},max:function(Pa){return y.aggNums(Math.max,null,Pa)},sum:function(Pa){return y.aggNums(function(Fa,Na){return Fa+Na},null,Pa)},total:function(Pa){return y.aggNums(function(Fa,Na){return Fa+Na},null,Pa)},mean:function(Pa){return y.mean(Pa)},
median:function(Pa){return y.median(Pa)}};for(ba=0;ba<O.length;ba++){var sa=O[ba];if("category"===sa.type&&(aa=sa.categoryorder.match(R))){var ma=aa[1],ra=aa[2],qa=[];for(aa=0;aa<sa._categories.length;aa++)qa.push([sa._categories[aa],[]]);for(aa=0;aa<sa._traceIndices.length;aa++){var Y=sa._traceIndices[aa];var pa=T._fullData[Y],oa=sa._id.charAt(0);if(!0===pa.visible){var ua=pa.type;t.traceIs(pa,"histogram")&&(delete pa._xautoBinFinished,delete pa._yautoBinFinished);var ya=T.calcdata[Y];for(Y=0;Y<
ya.length;Y++){var ja=ya[Y];if("splom"===ua){var za=pa._axesDim[sa._id];"y"===oa&&(ka=pa._diag[za][0])&&(sa=T._fullLayout[F.id2name(ka)]);var Ba=ja.trace.dimensions[za].values;for(ka=0;ka<Ba.length;ka++){var Ma=Ba[ka];var Oa=sa._categoriesMap[Ma];for(ha=0;ha<ja.trace.dimensions.length;ha++)ha!==za&&qa[Oa][1].push(ja.trace.dimensions[ha].values[ka])}}else if("scattergl"===ua){for(ka=0;ka<ja.t.x.length;ka++){if("x"===oa){Oa=Ma=ja.t.x[ka];var Ia=ja.t.y[ka]}"y"===oa&&(Oa=Ma=ja.t.y[ka],Ia=ja.t.x[ka]);
qa[Oa][1].push(Ia)}ja.t&&ja.t._scene&&delete ja.t._scene.dirty}else if(ja.hasOwnProperty("z"))for(Ia=ja.z,ja=V(pa.type,sa,Ia),ka=0;ka<Ia.length;ka++)for(ha=0;ha<Ia[ka].length;ha++)Oa=ja(ha,ka),Oa+1&&qa[Oa][1].push(Ia[ka][ha]);else for("x"===oa?(Ma=ja.p+1?ja.p:ja.x,Ia=ja.s||ja.v||ja.y):"y"===oa&&(Ma=ja.p+1?ja.p:ja.y,Ia=ja.s||ja.v||ja.x),Array.isArray(Ia)||(Ia=[Ia]),ka=0;ka<Ia.length;ka++)qa[Ma][1].push(Ia[ka])}}}sa._categoriesValue=qa;pa=[];for(aa=0;aa<qa.length;aa++)pa.push([qa[aa][0],ca[ma](qa[aa][1])]);
pa.sort(function(Pa,Fa){return Pa[1]-Fa[1]});sa._categoriesAggregatedValue=pa;sa._initialCategories=pa.map(function(Pa){return Pa[0]});"descending"===ra&&sa._initialCategories.reverse();X=X.concat(sa.sortByInitialCategories())}}return X}function c(O,T,V){var X={},ba;for(ba=0;ba<O.length;ba++){var aa=O[ba];var ka=aa._id;aa.clearCalc();"multicategory"===aa.type&&aa.setupMultiCategory(T);X[aa._id]=1}O=V._axisMatchGroups||[];for(ba=0;ba<O.length;ba++)for(ka in O[ba])X[ka]||(aa=V[F.id2name(ka)],aa.clearCalc())}
function g(O){var T=O._fullLayout,V=T._visibleModules,X={},ba,aa;for(ba=0;ba<V.length;ba++){var ka=V[ba],ha=ka.crossTraceCalc;ha&&(ka=ka.basePlotModule.name,X[ka]?y.pushUnique(X[ka],ha):X[ka]=[ha])}for(aa in X)if(ha=X[aa],ka=T._subplots[aa],Array.isArray(ka))for(V=0;V<ka.length;V++){var ca=ka[V],sa="cartesian"===aa?T._plots[ca]:T[ca];for(ba=0;ba<ha.length;ba++)ha[ba](O,sa,ca)}else for(ba=0;ba<ha.length;ba++)ha[ba](O)}var d=a("d3"),p=a("d3-time-format").timeFormatLocale,r=a("fast-isnumeric"),t=a("../registry"),
w=a("../plot_api/plot_schema"),x=a("../plot_api/plot_template"),y=a("../lib"),A=a("../components/color"),z=a("../constants/numerical").BADNUM,F=a("./cartesian/axis_ids"),D=a("./cartesian/handle_outline").clearSelect,u=a("./animation_attributes"),B=a("./frame_attributes"),I=a("../plots/get_data").getModuleCalcData,J=y.relinkPrivateKeys,N=y._,M=G.exports={};y.extendFlat(M,t);M.attributes=a("./attributes");M.attributes.type.values=M.allTypes;M.fontAttrs=a("./font_attributes");M.layoutAttributes=a("./layout_attributes");
M.fontWeight="normal";var E=M.transformsRegistry;a=a("./command");M.executeAPICommand=a.executeAPICommand;M.computeAPICommandBindings=a.computeAPICommandBindings;M.manageCommandObserver=a.manageCommandObserver;M.hasSimpleAPICommandBindings=a.hasSimpleAPICommandBindings;M.redrawText=function(O){O=y.getGraphDiv(O);var T=O._fullLayout||{};if(T._has&&T._has("polar")||!O.data||!O.data[0]||!O.data[0].r)return new Promise(function(V){setTimeout(function(){t.getComponentMethod("annotations","draw")(O);t.getComponentMethod("legend",
"draw")(O);t.getComponentMethod("colorbar","draw")(O);V(M.previousPromises(O))},300)})};M.resize=function(O){O=y.getGraphDiv(O);var T,V=new Promise(function(X,ba){O&&!y.isHidden(O)||ba(Error("Resize must be passed a displayed plot div element."));O._redrawTimer&&clearTimeout(O._redrawTimer);O._resolveResize&&(T=O._resolveResize);O._resolveResize=X;O._redrawTimer=setTimeout(function(){if(!O.layout||O.layout.width&&O.layout.height||y.isHidden(O))X(O);else{delete O.layout.width;delete O.layout.height;
var aa=O.changed;O.autoplay=!0;t.call("relayout",O,{autosize:!0}).then(function(){O.changed=aa;O._resolveResize===X&&(delete O._resolveResize,X(O))})}},100)});T&&T(V);return V};M.previousPromises=function(O){if((O._promises||[]).length)return Promise.all(O._promises).then(function(){O._promises=[]})};M.addLinks=function(O){if(O._context.showLink||O._context.showSources){var T=O._fullLayout,V=y.ensureSingle(T._paper,"text","js-plot-link-container",function(aa){aa.style({"font-family":'"Open Sans", Arial, sans-serif',
"font-size":"12px",fill:A.defaultLine,"pointer-events":"all"}).each(function(){var ka=d.select(this);ka.append("tspan").classed("js-link-to-tool",!0);ka.append("tspan").classed("js-link-spacer",!0);ka.append("tspan").classed("js-sourcelinks",!0)})}),X=V.node(),ba={y:T._paper.attr("height")-9};document.body.contains(X)&&X.getComputedTextLength()>=T.width-20?(ba["text-anchor"]="start",ba.x=5):(ba["text-anchor"]="end",ba.x=T._paper.attr("width")-7);V.attr(ba);T=V.select(".js-link-to-tool");X=V.select(".js-link-spacer");
V=V.select(".js-sourcelinks");O._context.showSources&&O._context.showSources(O);O._context.showLink&&q(O,T);X.text(T.text()&&V.text()?" - ":"")}};M.sendDataToCloud=function(O){var T=(window.PLOTLYENV||{}).BASE_URL||O._context.plotlyServerURL;if(T){O.emit("plotly_beforeexport");var V=d.select(O).append("div").attr("id","hiddenform").style("display","none");T=V.append("form").attr({action:T+"/external",method:"post",target:"_blank"});T.append("input").attr({type:"text",name:"data"}).node().value=M.graphJson(O,
!1,"keepdata");T.node().submit();V.remove();O.emit("plotly_afterexport");return!1}};var L="days shortDays months shortMonths periods dateTime date time decimal thousands grouping currency".split(" "),Q=["year","month","dayMonth","dayMonthYear"];M.supplyDefaults=function(O,T){T=T&&T.skipUpdateCalc;var V=O._fullLayout||{};if(V._skipDefaults)delete V._skipDefaults;else{var X=O._fullLayout={},ba=O.layout||{},aa=O._fullData||[],ka=O._fullData=[],ha=O.data||[],ca=O.calcdata||[],sa=O._context||{};O._transitionData||
M.createTransitionData(O);X._dfltTitle={plot:N(O,"Click to enter Plot title"),x:N(O,"Click to enter X axis title"),y:N(O,"Click to enter Y axis title"),colorbar:N(O,"Click to enter Colorscale title"),annotation:N(O,"new text")};X._traceWord=N(O,"trace");var ma=m(O,L);X._mapboxAccessToken=sa.mapboxAccessToken;if(V._initialAutoSizeIsDone){var ra=V.width,qa=V.height;M.supplyLayoutGlobalDefaults(ba,X,ma);ba.width||(X.width=ra);ba.height||(X.height=qa);M.sanitizeMargins(X)}else M.supplyLayoutGlobalDefaults(ba,
X,ma),ra=!ba.width||!ba.height,qa=X.autosize,sa=sa.autosizable,ra&&(qa||sa)?M.plotAutoSize(O,ba,X):ra&&M.sanitizeMargins(X),!qa&&ra&&(ba.width=X.width,ba.height=X.height);ra=X.separators;ma.decimal=ra.charAt(0);ma.thousands=ra.charAt(1);ma={numberFormat:d.locale(ma).numberFormat,timeFormat:p(ma).utcFormat};X._d3locale=ma;X._extraFormat=m(O,Q);X._initialAutoSizeIsDone=!0;X._dataLength=ha.length;X._modules=[];X._visibleModules=[];X._basePlotModules=[];ma=t.collectableSubplotTypes;ra={};var Y;if(!ma)for(Y in ma=
[],sa=t.subplotsRegistry,sa){var pa=sa[Y].attr;if(pa&&(ma.push(Y),Array.isArray(pa)))for(qa=0;qa<pa.length;qa++)y.pushUnique(ma,pa[qa])}for(Y=0;Y<ma.length;Y++)ra[ma[Y]]=[];ra=X._subplots=ra;ma=X._splomAxes={x:{},y:{}};qa=X._splomSubplots={};X._splomGridDflt={};X._scatterStackOpts={};X._firstScatter={};X._alignmentOpts={};X._colorAxes={};X._requestRangeslider={};X._traceUids=n(aa,ha);X._globalTransforms=(O._context||{}).globalTransforms;M.supplyDataDefaults(ha,ka,ba,X);Y=Object.keys(ma.x);ma=Object.keys(ma.y);
if(1<Y.length&&1<ma.length){t.getComponentMethod("grid","sizeDefaults")(ba,X);for(ha=0;ha<Y.length;ha++)y.pushUnique(ra.xaxis,Y[ha]);for(ha=0;ha<ma.length;ha++)y.pushUnique(ra.yaxis,ma[ha]);for(var oa in qa)y.pushUnique(ra.cartesian,oa)}X._has=M._hasPlotType.bind(X);if(aa.length===ka.length)for(ha=0;ha<ka.length;ha++)J(ka[ha],aa[ha]);M.supplyLayoutModuleDefaults(ba,X,ka,O._transitionData);oa=X._visibleModules;ba=[];for(ha=0;ha<oa.length;ha++)(ra=oa[ha].crossTraceDefaults)&&y.pushUnique(ba,ra);for(ha=
0;ha<ba.length;ha++)ba[ha](ka,X);X._hasOnlyLargeSploms=1===X._basePlotModules.length&&"splom"===X._basePlotModules[0].name&&15<Y.length&&15<ma.length&&0===X.shapes.length&&0===X.images.length;X._hasCartesian=X._has("cartesian");X._hasGeo=X._has("geo");X._hasGL3D=X._has("gl3d");X._hasGL2D=X._has("gl2d");X._hasTernary=X._has("ternary");X._hasPie=X._has("pie");M.linkSubplots(ka,X,aa,V);M.cleanPlot(ka,X,aa,V);ba=!(!V._has||!V._has("gl2d"));aa=!(!X._has||!X._has("gl2d"));ha=!(!V._has||!V._has("cartesian"));
oa=!(!X._has||!X._has("cartesian"));ba=ha||ba;aa=oa||aa;ba&&!aa?V._bgLayer.remove():aa&&!ba&&(X._shouldCreateBgLayer=!0);V._zoomlayer&&!O._dragging&&D({_fullLayout:V});O=[];if(X.meta)var ua=X._meta={meta:X.meta,layout:{meta:X.meta}};for(aa=0;aa<ka.length;aa++)oa=ka[aa],oa.meta?O[oa.index]=oa._meta={meta:oa.meta}:X.meta&&(oa._meta={meta:X.meta}),X.meta&&(oa._meta.layout={meta:X.meta});O.length&&(ua||(ua=X._meta={}),ua.data=O);J(X,V);t.getComponentMethod("colorscale","crossTraceDefaults")(ka,X);X._preGUI||
(X._preGUI={});X._tracePreGUI||(X._tracePreGUI={});ua=X._tracePreGUI;V={};for(var ya in ua)V[ya]="old";for(ha=0;ha<ka.length;ha++)ya=ka[ha]._fullInput.uid,V[ya]||(ua[ya]={}),V[ya]="new";for(ya in V)"old"===V[ya]&&delete ua[ya];e(X);t.getComponentMethod("rangeslider","makeData")(X);T||ca.length!==ka.length||M.supplyDefaultsUpdateCalc(ca,ka)}};M.supplyDefaultsUpdateCalc=function(O,T){for(var V=0;V<T.length;V++){var X=T[V],ba=(O[V]||[])[0];if(ba&&ba.trace){var aa=ba.trace;if(aa._hasCalcTransform){var ka=
aa._arrayAttrs,ha;for(ha=0;ha<ka.length;ha++){var ca=ka[ha];var sa=y.nestedProperty(aa,ca).get().slice();y.nestedProperty(X,ca).set(sa)}}ba.trace=X}}};M.createTransitionData=function(O){O._transitionData||(O._transitionData={});O._transitionData._frames||(O._transitionData._frames=[]);O._transitionData._frameHash||(O._transitionData._frameHash={});O._transitionData._counter||(O._transitionData._counter=0);O._transitionData._interruptCallbacks||(O._transitionData._interruptCallbacks=[])};M._hasPlotType=
function(O){var T,V=this._basePlotModules||[];for(T=0;T<V.length;T++)if(V[T].name===O)return!0;V=this._modules||[];for(T=0;T<V.length;T++){var X=V[T].name;if(X===O||(X=t.modules[X])&&X.categories[O])return!0}return!1};M.cleanPlot=function(O,T,V,X){var ba,aa=X._basePlotModules||[];for(ba=0;ba<aa.length;ba++){var ka=aa[ba];ka.clean&&ka.clean(O,T,V,X)}ba=X._has&&X._has("gl");T=T._has&&T._has("gl");ba&&!T&&void 0!==X._glcontainer&&(X._glcontainer.selectAll(".gl-canvas").remove(),X._glcontainer.selectAll(".no-webgl").remove(),
X._glcanvas=null);aa=!!X._infolayer;ba=0;a:for(;ba<V.length;ba++){ka=V[ba].uid;for(T=0;T<O.length;T++)if(ka===O[T].uid)continue a;aa&&X._infolayer.select(".cb"+ka).remove()}};M.linkSubplots=function(O,T,V,X){var ba=X._plots||{},aa=T._plots={};X=T._subplots;V={_fullData:O,_fullLayout:T};var ka=X.cartesian.concat(X.gl2d||[]);for(X=0;X<ka.length;X++){var ha=ka[X];var ca=ba[ha],sa=F.getFromId(V,ha,"x"),ma=F.getFromId(V,ha,"y");ca?ca=aa[ha]=ca:(ca=aa[ha]={},ca.id=ha);sa._counterAxes.push(ma._id);ma._counterAxes.push(sa._id);
sa._subplotsWith.push(ha);ma._subplotsWith.push(ha);ca.xaxis=sa;ca.yaxis=ma;ca._hasClipOnAxisFalse=!1;for(ha=0;ha<O.length;ha++)if(sa=O[ha],sa.xaxis===ca.xaxis._id&&sa.yaxis===ca.yaxis._id&&!1===sa.cliponaxis){ca._hasClipOnAxisFalse=!0;break}}O=F.list(V,null,!0);for(X=0;X<O.length;X++)ba=O[X],ha=null,ba.overlaying&&(ha=F.getFromId(V,ba.overlaying))&&ha.overlaying&&(ba.overlaying=!1,ha=null),ba._mainAxis=ha||ba,ha&&(ba.domain=ha.domain.slice()),ba._anchorAxis="free"===ba.anchor?null:F.getFromId(V,
ba.anchor);for(X=0;X<O.length;X++){ba=O[X];ba._counterAxes.sort(F.idSort);ba._subplotsWith.sort(y.subplotSort);aa=ha=ba;var ra=T;ka={_fullLayout:ra};ca="x"===aa._id.charAt(0);var qa=aa._mainAxis._anchorAxis,Y=ma=sa="";qa&&(Y=qa._mainAxis._id,sa=ca?aa._id+Y:Y+aa._id);if(!sa||!ra._plots[sa])for(sa="",ra=aa._counterAxes,qa=0;qa<ra.length;qa++){var pa=ra[qa],oa=ca?aa._id+pa:pa+aa._id;ma||(ma=oa);pa=F.getFromId(ka,pa);if(Y&&pa.overlaying===Y){sa=oa;break}}ha._mainSubplot=sa||ma;if(ba._counterAxes.length&&
(ba.spikemode&&-1!==ba.spikemode.indexOf("across")||ba.automargin&&ba.mirror&&"free"!==ba.anchor||t.getComponentMethod("rangeslider","isVisible")(ba))){aa=1;for(ha=ka=0;ha<ba._counterAxes.length;ha++)ca=F.getFromId(V,ba._counterAxes[ha]),aa=Math.min(aa,ca.domain[0]),ka=Math.max(ka,ca.domain[1]);aa<ka&&(ba._counterDomainMin=aa,ba._counterDomainMax=ka)}}};M.clearExpandedTraceDefaultColors=function(O){function T(aa,ka,ha,ca){X[ca]=ka;X.length=ca+1;"color"===aa.valType&&void 0===aa.dflt&&ba.push(X.join("."))}
var V;var X=[];var ba=O._module._colorAttrs;ba||(O._module._colorAttrs=ba=[],w.crawl(O._module.attributes,T));for(V=0;V<ba.length;V++)y.nestedProperty(O,"_input."+ba[V]).get()||y.nestedProperty(O,ba[V]).set(null)};M.supplyDataDefaults=function(O,T,V,X){function ba(Ma){T.push(Ma);var Oa=Ma._module;Oa&&(y.pushUnique(aa,Oa),!0===Ma.visible&&y.pushUnique(ka,Oa),y.pushUnique(ha,Ma._module.basePlotModule),ca++,!1!==Ma._input.visible&&sa++)}var aa=X._modules,ka=X._visibleModules,ha=X._basePlotModules,ca=
0,sa=0,ma;X._transformModules=[];var ra={},qa=[],Y=x.traceTemplater((V.template||{}).data||{});for(ma=0;ma<O.length;ma++){var pa=O[ma];var oa=Y.newTrace(pa);oa.uid=X._traceUids[ma];M.supplyTraceDefaults(pa,oa,sa,X,ma);oa.index=ma;oa._input=pa;oa._expandedIndex=ca;if(oa.transforms&&oa.transforms.length)for(var ua=!1!==pa.visible&&!1===oa.visible,ya=b(oa,T,V,X),ja=0;ja<ya.length;ja++){var za=ya[ja],Ba={_template:oa._template,type:oa.type,uid:oa.uid+ja};ua&&!1===za.visible&&delete za.visible;M.supplyTraceDefaults(za,
Ba,ca,X,ma);J(Ba,za);Ba.index=ma;Ba._input=pa;Ba._fullInput=oa;Ba._expandedIndex=ca;Ba._expandedInput=za;ba(Ba)}else oa._fullInput=oa,oa._expandedInput=oa,ba(oa);t.traceIs(oa,"carpetAxis")&&(ra[oa.carpet]=oa);t.traceIs(oa,"carpetDependent")&&qa.push(ma)}for(ma=0;ma<qa.length;ma++)oa=T[qa[ma]],oa.visible&&(O=ra[oa.carpet],(oa._carpet=O)&&O.visible?(oa.xaxis=O.xaxis,oa.yaxis=O.yaxis):oa.visible=!1)};M.supplyAnimationDefaults=function(O){O=O||{};var T,V={};y.coerce(O||{},V,u,"mode",void 0);y.coerce(O||
{},V,u,"direction",void 0);y.coerce(O||{},V,u,"fromcurrent",void 0);if(Array.isArray(O.frame))for(V.frame=[],T=0;T<O.frame.length;T++)V.frame[T]=M.supplyAnimationFrameDefaults(O.frame[T]||{});else V.frame=M.supplyAnimationFrameDefaults(O.frame||{});if(Array.isArray(O.transition))for(V.transition=[],T=0;T<O.transition.length;T++)V.transition[T]=M.supplyAnimationTransitionDefaults(O.transition[T]||{});else V.transition=M.supplyAnimationTransitionDefaults(O.transition||{});return V};M.supplyAnimationFrameDefaults=
function(O){var T={};y.coerce(O||{},T,u.frame,"duration",void 0);y.coerce(O||{},T,u.frame,"redraw",void 0);return T};M.supplyAnimationTransitionDefaults=function(O){var T={};y.coerce(O||{},T,u.transition,"duration",void 0);y.coerce(O||{},T,u.transition,"easing",void 0);return T};M.supplyFrameDefaults=function(O){function T(X,ba){return y.coerce(O,V,B,X,ba)}var V={};T("group");T("name");T("traces");T("baseframe");T("data");T("layout");return V};M.supplyTraceDefaults=function(O,T,V,X,ba){function aa(oa,
ua){return y.coerce(O,T,M.attributes,oa,ua)}var ka=X.colorway||A.defaults;V=ka[V%ka.length];ka=aa("visible");aa("type");aa("name",X._traceWord+" "+ba);aa("uirevision",X.uirevision);var ha=M.getModule(T);if(T._module=ha){var ca=ha.basePlotModule,sa=ca.attr,ma=ca.attributes;if(sa&&ma){var ra=X._subplots,qa="";if(ka||"gl2d"!==ca.name){if(Array.isArray(sa))for(ba=0;ba<sa.length;ba++){var Y=sa[ba],pa=y.coerce(O,T,ma,Y);ra[Y]&&y.pushUnique(ra[Y],pa);qa+=pa}else qa=y.coerce(O,T,ma,sa);ra[ca.name]&&y.pushUnique(ra[ca.name],
qa)}}}ka&&(aa("customdata"),aa("ids"),aa("meta"),t.traceIs(T,"showLegend")?(y.coerce(O,T,ha.attributes.showlegend?ha.attributes:M.attributes,"showlegend"),aa("legendgroup"),T._dfltShowLegend=!0):T._dfltShowLegend=!1,ha&&ha.supplyDefaults(O,T,V,X),t.traceIs(T,"noOpacity")||aa("opacity"),t.traceIs(T,"notLegendIsolatable")&&(T.visible=!!T.visible),t.traceIs(T,"noHover")||(T.hovertemplate||y.coerceHoverinfo(O,T,X),"parcats"!==T.type&&t.getComponentMethod("fx","supplyDefaults")(O,T,V,X)),ha&&ha.selectPoints&&
aa("selectedpoints"),M.supplyTransformDefaults(O,T,X));return T};M.hasMakesDataTransform=f;M.supplyTransformDefaults=function(O,T,V){if(T._length||f(O)){var X=V._globalTransforms||[],ba=V._transformModules||[];if(Array.isArray(O.transforms)||0!==X.length){X=X.concat(O.transforms||[]);for(var aa=T.transforms=[],ka=0;ka<X.length;ka++){var ha=X[ka],ca=ha.type,sa=E[ca],ma=!(ha._module&&ha._module===sa),ra=sa&&"function"===typeof sa.transform;sa||y.warn("Unrecognized transform type "+ca+".");sa&&sa.supplyDefaults&&
(ma||ra)?(ha=sa.supplyDefaults(ha,T,V,O),ha.type=ca,ha._module=sa,y.pushUnique(ba,sa)):ha=y.extendFlat({},ha);aa.push(ha)}}}};M.supplyLayoutGlobalDefaults=function(O,T,V){function X(aa,ka){return y.coerce(O,T,M.layoutAttributes,aa,ka)}var ba=O.template;y.isPlainObject(ba)&&(T.template=ba,T._template=ba.layout,T._dataTemplate=ba.data);ba=y.coerceFont(X,"font");X("title.text",T._dfltTitle.plot);y.coerceFont(X,"title.font",{family:ba.family,size:Math.round(1.4*ba.size),color:ba.color});X("title.xref");
X("title.yref");X("title.x");X("title.y");X("title.xanchor");X("title.yanchor");X("title.pad.t");X("title.pad.r");X("title.pad.b");X("title.pad.l");X("uniformtext.mode")&&X("uniformtext.minsize");X("autosize",!(O.width&&O.height));X("width");X("height");X("margin.l");X("margin.r");X("margin.t");X("margin.b");X("margin.pad");X("margin.autoexpand");O.width&&O.height&&M.sanitizeMargins(T);t.getComponentMethod("grid","sizeDefaults")(O,T);X("paper_bgcolor");X("separators",V.decimal+V.thousands);X("hidesources");
X("colorway");X("datarevision");V=X("uirevision");X("editrevision",V);X("selectionrevision",V);X("modebar.orientation");X("modebar.bgcolor",A.addOpacity(T.paper_bgcolor,.5));ba=A.contrast(A.rgb(T.modebar.bgcolor));X("modebar.color",A.addOpacity(ba,.3));X("modebar.activecolor",A.addOpacity(ba,.7));X("modebar.uirevision",V);t.getComponentMethod("shapes","supplyDrawNewShapeDefaults")(O,T,X);X("meta");y.isPlainObject(O.transition)&&(X("transition.duration"),X("transition.easing"),X("transition.ordering"));
t.getComponentMethod("calendars","handleDefaults")(O,T,"calendar");t.getComponentMethod("fx","supplyLayoutGlobalDefaults")(O,T,X)};M.plotAutoSize=function(O,T,V){var X=O._context||{},ba=X.frameMargins,aa;(aa=y.isPlotDiv(O))&&O.emit("plotly_autosize");X.fillFrame?(X=window.innerWidth,aa=window.innerHeight,document.body.style.overflow="hidden"):(aa=aa?window.getComputedStyle(O):{},X=k(aa.width)||k(aa.maxWidth)||V.width,aa=k(aa.height)||k(aa.maxHeight)||V.height,r(ba)&&0<ba&&(ba=1-2*ba,X=Math.round(ba*
X),aa=Math.round(ba*aa)));ba=M.layoutAttributes.width.min;var ka=M.layoutAttributes.height.min;X<ba&&(X=ba);aa<ka&&(aa=ka);ba=!T.width&&1<Math.abs(V.width-X);if((T=!T.height&&1<Math.abs(V.height-aa))||ba)ba&&(V.width=X),T&&(V.height=aa);O._initialAutoSize||(O._initialAutoSize={width:X,height:aa});M.sanitizeMargins(V)};M.supplyLayoutModuleDefaults=function(O,T,V,X){var ba=t.componentsRegistry,aa=T._basePlotModules,ka;var ha=t.subplotsRegistry.cartesian;for(ka in ba){var ca=ba[ka];ca.includeBasePlot&&
ca.includeBasePlot(O,T)}aa.length||aa.push(ha);T._has("cartesian")&&(t.getComponentMethod("grid","contentDefaults")(O,T),ha.finalizeSubplots(O,T));for(var sa in T._subplots)T._subplots[sa].sort(y.subplotSort);for(ha=0;ha<aa.length;ha++)ca=aa[ha],ca.supplyLayoutDefaults&&ca.supplyLayoutDefaults(O,T,V);aa=T._modules;for(ha=0;ha<aa.length;ha++)ca=aa[ha],ca.supplyLayoutDefaults&&ca.supplyLayoutDefaults(O,T,V);aa=T._transformModules;for(ha=0;ha<aa.length;ha++)ca=aa[ha],ca.supplyLayoutDefaults&&ca.supplyLayoutDefaults(O,
T,V,X);for(ka in ba)ca=ba[ka],ca.supplyLayoutDefaults&&ca.supplyLayoutDefaults(O,T,V)};M.purge=function(O){var T=O._fullLayout||{};void 0!==T._glcontainer&&(T._glcontainer.selectAll(".gl-canvas").remove(),T._glcontainer.remove(),T._glcanvas=null);T._modeBar&&T._modeBar.destroy();O._transitionData&&(O._transitionData._interruptCallbacks&&(O._transitionData._interruptCallbacks.length=0),O._transitionData._animationRaf&&window.cancelAnimationFrame(O._transitionData._animationRaf));y.clearThrottle();
y.clearResponsive(O);delete O.data;delete O.layout;delete O._fullData;delete O._fullLayout;delete O.calcdata;delete O.framework;delete O.empty;delete O.fid;delete O.undoqueue;delete O.undonum;delete O.autoplay;delete O.changed;delete O._promises;delete O._redrawTimer;delete O._hmlumcount;delete O._hmpixcount;delete O._transitionData;delete O._transitioning;delete O._initialAutoSize;delete O._transitioningWithDuration;delete O._dragging;delete O._dragged;delete O._dragdata;delete O._hoverdata;delete O._snapshotInProgress;
delete O._editing;delete O._mouseDownTime;delete O._legendMouseDownTime;O.removeAllListeners&&O.removeAllListeners()};M.style=function(O){var T=O._fullLayout._visibleModules,V=[],X;for(X=0;X<T.length;X++){var ba=T[X];ba.style&&y.pushUnique(V,ba.style)}for(X=0;X<V.length;X++)V[X](O)};M.sanitizeMargins=function(O){if(O&&O.margin){var T=O.width,V=O.height;O=O.margin;var X=V-(O.t+O.b);0>T-(O.l+O.r)&&(T=(T-1)/(O.l+O.r),O.l=Math.floor(T*O.l),O.r=Math.floor(T*O.r));0>X&&(T=(V-1)/(O.t+O.b),O.t=Math.floor(T*
O.t),O.b=Math.floor(T*O.b))}};M.clearAutoMarginIds=function(O){O._fullLayout._pushmarginIds={}};M.allowAutoMargin=function(O,T){O._fullLayout._pushmarginIds[T]=1};M.autoMargin=function(O,T,V){var X=O._fullLayout,ba=X._pushmargin,aa=X._pushmarginIds;if(!1!==X.margin.autoexpand){if(V){var ka=V.pad;void 0===ka&&(ka=X.margin,ka=Math.min(12,ka.l,ka.r,ka.t,ka.b));V.l+V.r>.5*X.width&&(y.log("Margin push",T,"is too big in x, dropping"),V.l=V.r=0);V.b+V.t>.5*X.height&&(y.log("Margin push",T,"is too big in y, dropping"),
V.b=V.t=0);ba[T]={l:{val:void 0!==V.xl?V.xl:V.x,size:V.l+ka},r:{val:void 0!==V.xr?V.xr:V.x,size:V.r+ka},b:{val:void 0!==V.yb?V.yb:V.y,size:V.b+ka},t:{val:void 0!==V.yt?V.yt:V.y,size:V.t+ka}};aa[T]=1}else delete ba[T],delete aa[T];if(!X._replotting)return M.doAutoMargin(O)}};M.doAutoMargin=function(O){var T=O._fullLayout;T._size||(T._size={});e(T);var V=T._size,X=T.margin,ba=y.extendFlat({},V),aa=X.l,ka=X.r,ha=X.t,ca=X.b,sa=T.width,ma=T.height,ra=T._pushmargin,qa=T._pushmarginIds;if(!1!==T.margin.autoexpand){for(var Y in ra)qa[Y]||
delete ra[Y];ra.base={l:{val:0,size:aa},r:{val:1,size:ka},t:{val:1,size:ha},b:{val:0,size:ca}};for(var pa in ra){var oa=ra[pa].l||{},ua=ra[pa].b||{};Y=oa.val;oa=oa.size;var ya=ua.val;ua=ua.size;for(var ja in ra){if(r(oa)&&ra[ja].r){var za=ra[ja].r.val,Ba=ra[ja].r.size;if(za>Y){var Ma=(oa*za+(Ba-sa)*Y)/(za-Y);za=(Ba*(1-Y)+(oa-sa)*(1-za))/(za-Y);0<=Ma&&0<=za&&0<sa-(Ma+za)&&Ma+za>aa+ka&&(aa=Ma,ka=za)}}r(ua)&&ra[ja].t&&(za=ra[ja].t.val,Ba=ra[ja].t.size,za>ya&&(Ma=(ua*za+(Ba-ma)*ya)/(za-ya),za=(Ba*(1-
ya)+(ua-ma)*(1-za))/(za-ya),0<=Ma&&0<=za&&0<ma-(za+Ma)&&Ma+za>ca+ha&&(ca=Ma,ha=za)))}}}V.l=Math.round(aa);V.r=Math.round(ka);V.t=Math.round(ha);V.b=Math.round(ca);V.p=Math.round(X.pad);V.w=Math.round(sa)-V.l-V.r;V.h=Math.round(ma)-V.t-V.b;if(!T._replotting&&M.didMarginChange(ba,V)){"_redrawFromAutoMarginCount"in T?T._redrawFromAutoMarginCount++:T._redrawFromAutoMarginCount=1;V=3*(1+Object.keys(qa).length);if(T._redrawFromAutoMarginCount<V)return t.call("plot",O);y.warn("Too many auto-margin redraws.")}};
var S="lrtbpwh".split("");M.didMarginChange=function(O,T){for(var V=0;V<S.length;V++){var X=S[V],ba=O[X];X=T[X];if(!r(ba)||1<Math.abs(X-ba))return!0}return!1};M.graphJson=function(O,T,V,X,ba,aa){function ka(ma,ra){if("function"===typeof ma)return ra?"_function_":null;if(y.isPlainObject(ma)){var qa={},Y;Object.keys(ma).sort().forEach(function(pa){if(-1===["_","["].indexOf(pa.charAt(0)))if("function"===typeof ma[pa])ra&&(qa[pa]="_function");else{if("keepdata"===V){if("src"===pa.substr(pa.length-3))return}else if("keepstream"===
V){if(Y=ma[pa+"src"],"string"===typeof Y&&0<Y.indexOf(":")&&!y.isPlainObject(ma.stream))return}else if("keepall"!==V&&(Y=ma[pa+"src"],"string"===typeof Y&&0<Y.indexOf(":")))return;qa[pa]=ka(ma[pa],ra)}});return qa}return Array.isArray(ma)?ma.map(function(pa){return ka(pa,ra)}):y.isTypedArray(ma)?y.simpleMap(ma,y.identity):y.isJSDate(ma)?y.ms2DateTimeLocal(+ma):ma}(ba&&T&&!O._fullData||ba&&!T&&!O._fullLayout)&&M.supplyDefaults(O);var ha=ba?O._fullLayout:O.layout,ca=(O._transitionData||{})._frames,
sa={data:((ba?O._fullData:O.data)||[]).map(function(ma){ma=ka(ma);T&&delete ma.fit;return ma})};T||(sa.layout=ka(ha),ba&&(ba=ha._size,sa.layout.computed={margin:{b:ba.b,l:ba.l,r:ba.r,t:ba.t}}));O.framework&&O.framework.isPolar&&(sa=O.framework.getConfig());ca&&(sa.frames=ka(ca));aa&&(sa.config=ka(O._context,!0));return"object"===X?sa:JSON.stringify(sa)};M.modifyFrames=function(O,T){var V=O._transitionData._frames,X=O._transitionData._frameHash;for(O=0;O<T.length;O++){var ba=T[O];switch(ba.type){case "replace":var aa=
ba.value;var ka=(V[ba.index]||{}).name,ha=aa.name;V[ba.index]=X[ha]=aa;ha!==ka&&(delete X[ka],X[ha]=aa);break;case "insert":aa=ba.value;X[aa.name]=aa;V.splice(ba.index,0,aa);break;case "delete":aa=V[ba.index],delete X[aa.name],V.splice(ba.index,1)}}return Promise.resolve()};M.computeFrame=function(O,T){var V=O._transitionData._frameHash,X;if(!T)throw Error("computeFrame must be given a string frame name");T=V[T.toString()];if(!T)return!1;O=[T];for(X=[T.name];T.baseframe&&(T=V[T.baseframe.toString()])&&
-1===X.indexOf(T.name);)O.push(T),X.push(T.name);for(var ba={};T=O.pop();)if(T.layout&&(ba.layout=M.extendLayout(ba.layout,T.layout)),T.data){ba.data||(ba.data=[]);X=T.traces;if(!X)for(X=[],V=0;V<T.data.length;V++)X[V]=V;ba.traces||(ba.traces=[]);for(V=0;V<T.data.length;V++){var aa=X[V];if(void 0!==aa&&null!==aa){var ka=ba.traces.indexOf(aa);-1===ka&&(ka=ba.data.length,ba.traces[ka]=aa);ba.data[ka]=M.extendTrace(ba.data[ka],T.data[V])}}}return ba};M.recomputeFrameHash=function(O){var T=O._transitionData._frameHash=
{};O=O._transitionData._frames;for(var V=0;V<O.length;V++){var X=O[V];X&&X.name&&(T[X.name]=X)}};M.extendObjectWithContainers=function(O,T,V){T=y.extendDeepNoArrays({},T||{});var X=y.expandObjectPaths(T);var ba={};if(V&&V.length)for(T=0;T<V.length;T++){var aa=y.nestedProperty(X,V[T]);var ka=aa.get();void 0===ka?y.nestedProperty(ba,V[T]).set(null):(aa.set(null),y.nestedProperty(ba,V[T]).set(ka))}O=y.extendDeepNoArrays(O||{},X);if(V&&V.length)for(T=0;T<V.length;T++)if(aa=y.nestedProperty(ba,V[T]),X=
aa.get()){ka=y.nestedProperty(O,V[T]);var ha=ka.get();Array.isArray(ha)||(ha=[],ka.set(ha));for(aa=0;aa<X.length;aa++){var ca=X[aa];ha[aa]=null===ca?null:M.extendObjectWithContainers(ha[aa],ca)}ka.set(ha)}return O};M.dataArrayContainers=["transforms","dimensions"];M.layoutArrayContainers=t.layoutArrayContainers;M.extendTrace=function(O,T){return M.extendObjectWithContainers(O,T,M.dataArrayContainers)};M.extendLayout=function(O,T){return M.extendObjectWithContainers(O,T,M.layoutArrayContainers)};M.transition=
function(O,T,V,X,ba,aa){ba={redraw:ba.redraw};var ka={},ha=[];ba.prepareFn=function(){var ca=Array.isArray(T)?T.length:0;ca=X.slice(0,ca);for(var sa=0;sa<ca.length;sa++){var ma=ca[sa],ra=O._fullData[ma]._module;ra&&(ra.animatable&&(ra=ra.basePlotModule.name,ka[ra]||(ka[ra]=[]),ka[ra].push(ma)),O.data[ca[sa]]=M.extendTrace(O.data[ca[sa]],T[sa]))}ca=y.expandObjectPaths(y.extendDeepNoArrays({},V));sa=/^[xy]axis[0-9]*$/;for(var qa in ca)sa.test(qa)&&delete ca[qa].range;M.extendLayout(O.layout,ca);delete O.calcdata;
M.supplyDefaults(O);M.doCalcdata(O);if(qa=y.expandObjectPaths(V)){ca=O._fullLayout._plots;for(var Y in ca){sa=ca[Y];ma=sa.xaxis;ra=sa.yaxis;var pa=ma.range.slice(),oa=ra.range.slice(),ua=null,ya=null,ja=null,za=null;Array.isArray(qa[ma._name+".range"])?ua=qa[ma._name+".range"].slice():Array.isArray((qa[ma._name]||{}).range)&&(ua=qa[ma._name].range.slice());Array.isArray(qa[ra._name+".range"])?ya=qa[ra._name+".range"].slice():Array.isArray((qa[ra._name]||{}).range)&&(ya=qa[ra._name].range.slice());
pa&&ua&&(ma.r2l(pa[0])!==ma.r2l(ua[0])||ma.r2l(pa[1])!==ma.r2l(ua[1]))&&(ja={xr0:pa,xr1:ua});oa&&ya&&(ra.r2l(oa[0])!==ra.r2l(ya[0])||ra.r2l(oa[1])!==ra.r2l(ya[1]))&&(za={yr0:oa,yr1:ya});(ja||za)&&ha.push(y.extendFlat({plotinfo:sa},ja,za))}}return Promise.resolve()};ba.runFn=function(ca){var sa=O._fullLayout._basePlotModules;var ma=ha.length,ra;if(V)for(ra=0;ra<sa.length;ra++)sa[ra].transitionAxes&&sa[ra].transitionAxes(O,ha,aa,ca);ma?(sa=y.extendFlat({},aa),sa.duration=0,delete ka.cartesian):sa=aa;
for(var qa in ka)ma=ka[qa],O._fullData[ma[0]]._module.basePlotModule.plot(O,ma,sa,ca)};return h(O,aa,ba)};M.transitionFromReact=function(O,T,V,X){var ba=O._fullLayout,aa=ba.transition,ka={},ha=[];ka.prepareFn=function(){var ca=ba._plots;ka.redraw=!1;"some"===T.anim&&(ka.redraw=!0);"some"===V.anim&&(ka.redraw=!0);for(var sa in ca){var ma=ca[sa],ra=ma.xaxis,qa=ma.yaxis,Y=X[ra._name].range.slice(),pa=X[qa._name].range.slice(),oa=ra.range.slice(),ua=qa.range.slice();ra.setScale();qa.setScale();var ya=
null,ja=null;if(ra.r2l(Y[0])!==ra.r2l(oa[0])||ra.r2l(Y[1])!==ra.r2l(oa[1]))ya={xr0:Y,xr1:oa};if(qa.r2l(pa[0])!==qa.r2l(ua[0])||qa.r2l(pa[1])!==qa.r2l(ua[1]))ja={yr0:pa,yr1:ua};(ya||ja)&&ha.push(y.extendFlat({plotinfo:ma},ya,ja))}return Promise.resolve()};ka.runFn=function(ca){function sa(){for(var ja=0;ja<qa.length;ja++)qa[ja].transitionAxes&&qa[ja].transitionAxes(O,ha,Y,ca)}function ma(){for(var ja=0;ja<qa.length;ja++)qa[ja].plot(O,oa,pa,ca)}for(var ra=O._fullData,qa=O._fullLayout._basePlotModules,
Y,pa,oa,ua=[],ya=0;ya<ra.length;ya++)ua.push(ya);ha.length&&T.anim?"traces first"===aa.ordering?(Y=y.extendFlat({},aa,{duration:0}),oa=ua,pa=aa,setTimeout(sa,aa.duration),ma()):(Y=aa,oa=null,pa=y.extendFlat({},aa,{duration:0}),setTimeout(ma,Y.duration),sa()):ha.length?(Y=aa,sa()):T.anim&&(oa=ua,pa=aa,ma())};return h(O,aa,ka)};M.doCalcdata=function(O,T){function V(oa){qa=aa[oa];ha=qa._module;if(!0===qa.visible&&qa.transforms)for(ha&&ha.calc&&(oa=ha.calc(O,qa),oa[0]&&oa[0].t&&oa[0].t._scene&&delete oa[0].t._scene.dirty),
sa=0;sa<qa.transforms.length;sa++)oa=qa.transforms[sa],(ha=E[oa.type])&&ha.calcTransform&&(pa=qa._hasCalcTransform=!0,ha.calcTransform(O,qa,oa))}function X(oa,ua){qa=aa[oa];ha=qa._module;if(!!ha.isContainer===ua){ua=[];if(!0===qa.visible&&0!==qa._length){delete qa._indexToPoints;var ya=qa.transforms||[];for(sa=ya.length-1;0<=sa;sa--)if(ya[sa].enabled){qa._indexToPoints=ya[sa]._indexToPoints;break}ha&&ha.calc&&(ua=ha.calc(O,qa))}Array.isArray(ua)&&ua[0]||(ua=[{x:z,y:z}]);ua[0].t||(ua[0].t={});ua[0].trace=
qa;ma[oa]=ua}}var ba=F.list(O),aa=O._fullData,ka=O._fullLayout,ha,ca,sa,ma=Array(aa.length),ra=(O.calcdata||[]).slice();O.calcdata=ma;ka._numBoxes=0;ka._numViolins=0;ka._violinScaleGroupStats={};O._hmpixcount=0;O._hmlumcount=0;ka._piecolormap={};ka._sunburstcolormap={};ka._treemapcolormap={};ka._funnelareacolormap={};for(ca=0;ca<aa.length;ca++)Array.isArray(T)&&-1===T.indexOf(ca)&&(ma[ca]=ra[ca]);for(ca=0;ca<aa.length;ca++){var qa=aa[ca];qa._arrayAttrs=w.findArrayAttributes(qa);qa._extremes={}}T=
ka._subplots.polar||[];for(ca=0;ca<T.length;ca++)ba.push(ka[T[ca]].radialaxis,ka[T[ca]].angularaxis);for(var Y in ka._colorAxes)ca=ka[Y],!1!==ca.cauto&&(delete ca.cmin,delete ca.cmax);var pa=!1;c(ba,aa,ka);for(ca=0;ca<aa.length;ca++)X(ca,!0);for(ca=0;ca<aa.length;ca++)V(ca);pa&&c(ba,aa,ka);for(ca=0;ca<aa.length;ca++)X(ca,!0);for(ca=0;ca<aa.length;ca++)X(ca,!1);g(O);ba=l(ba,O);if(ba.length){ka._numBoxes=0;for(ca=ka._numViolins=0;ca<ba.length;ca++)X(ba[ca],!0);for(ca=0;ca<ba.length;ca++)X(ba[ca],!1);
g(O)}t.getComponentMethod("fx","calc")(O);t.getComponentMethod("errorbars","calc")(O)};var R=/(total|sum|min|max|mean|median) (ascending|descending)/;M.rehover=function(O){O._fullLayout._rehover&&O._fullLayout._rehover()};M.redrag=function(O){O._fullLayout._redrag&&O._fullLayout._redrag()};M.generalUpdatePerTraceModule=function(O,T,V,X){var ba=T.traceHash,aa={},ka;for(ka=0;ka<V.length;ka++){var ha=V[ka],ca=ha[0].trace;ca.visible&&(aa[ca.type]=aa[ca.type]||[],aa[ca.type].push(ha))}for(var sa in ba)aa[sa]||
(V=ba[sa][0],V[0].trace.visible=!1,aa[sa]=[V]);for(var ma in aa)ba=aa[ma],ba[0][0].trace._module.plot(O,T,y.filterVisible(ba),X);T.traceHash=aa};M.plotBasePlot=function(O,T,V,X,ba){O=t.getModule(O);V=I(T.calcdata,O)[0];O.plot(T,V,X,ba)};M.cleanBasePlot=function(O,T,V,X,ba){T=ba._has&&ba._has(O);V=V._has&&V._has(O);T&&!V&&ba["_"+O+"layer"].selectAll("g.trace").remove()}},{"../components/color":615,"../constants/numerical":725,"../lib":750,"../plot_api/plot_schema":787,"../plot_api/plot_template":788,
"../plots/get_data":836,"../registry":882,"./animation_attributes":793,"./attributes":795,"./cartesian/axis_ids":802,"./cartesian/handle_outline":809,"./command":825,"./font_attributes":827,"./frame_attributes":828,"./layout_attributes":853,d3:169,"d3-time-format":166,"fast-isnumeric":241}],863:[function(a,G,C){G.exports={attr:"subplot",name:"polar",axisNames:["angularaxis","radialaxis"],axisName2dataArray:{angularaxis:"theta",radialaxis:"r"},layerNames:"draglayer plotbg backplot angular-grid radial-grid frontplot angular-line radial-line angular-axis radial-axis".split(" "),
radialDragBoxSize:50,angularDragBoxSize:30,cornerLen:25,cornerHalfWidth:2,MINDRAG:8,MINZOOM:20,OFFEDGE:20}},{}],864:[function(a,G,C){function q(d,p,r,t){var w=t[0];t=t[1];var x=f(Math.sin(p)-Math.sin(d));d=f(Math.cos(p)-Math.cos(d));r=Math.tan(r);var y=f(1/r),A=x/d;p=t-A*w;y?x&&d?(x=p/(r-A),w=r*x):d?(x=t*y,w=t):(x=w,w*=r):x&&d?(x=0,w=p):d?(x=0,w=t):x=w=NaN;return[x,w]}function n(d,p,r,t){function w(D,u,B){return q(D,u,B,[d*Math.cos(D),d*Math.sin(D)])}var x=t.length,y=[];var A=h(t,function(D){return l(D,
[p,r])?g(D,p):Infinity});var z=w(t[A],t[k.mod(A-1,x)],p);y.push(z);for(z=0;z<x;A++,z++){var F=t[k.mod(A,x)];if(!l(F,[p,r]))break;y.push([d*Math.cos(F),d*Math.sin(F)])}A=h(t,function(D){return l(D,[p,r])?g(D,r):Infinity});t=w(t[A],t[k.mod(A+1,x)],r);y.push(t);y.push([0,0]);y.push(y[0].slice());return y}function m(d,p,r,t){if(k.isFullCircle([p,r])){p=t.length;r=Array(p+1);var w;for(w=0;w<p;w++){var x=t[w];r[w]=[d*Math.cos(x),d*Math.sin(x)]}r[w]=r[0].slice();d=r}else d=n(d,p,r,t);return d}function f(d){return 1E-10<
Math.abs(d)?d:0}function b(d,p,r){p=p||0;r=r||0;for(var t=d.length,w=Array(t),x=0;x<t;x++){var y=d[x];w[x]=[p+y[0],r-y[1]]}return w}var k=a("../../lib"),e=a("../../lib/polygon").tester,h=k.findIndexOfMin,l=k.isAngleInsideSector,c=k.angleDelta,g=k.angleDist;G.exports={isPtInsidePolygon:function(d,p,r,t,w){if(!l(p,t))return!1;if(r[0]<r[1]){var x=r[0];r=r[1]}else x=r[1],r=r[0];x=e(m(x,t[0],t[1],w));t=e(m(r,t[0],t[1],w));d=[d*Math.cos(p),d*Math.sin(p)];return t.contains(d)&&!x.contains(d)},findPolygonOffset:function(d,
p,r,t){var w=Infinity,x=Infinity;d=m(d,p,r,t);for(p=0;p<d.length;p++)r=d[p],w=Math.min(w,r[0]),x=Math.min(x,-r[1]);return[w,x]},findEnclosingVertexAngles:function(d,p){var r=h(p,function(w){w=c(w,d);return 0<w?w:Infinity}),t=k.mod(r+1,p.length);return[p[r],p[t]]},findIntersectionXY:q,findXYatLength:function(d,p,r,t){var w=-p*r,x=p*p+1,y=2*(p*w-r);r=Math.sqrt(y*y-4*x*(w*w+r*r-d*d));d=(-y+r)/(2*x);x=(-y-r)/(2*x);return[[d,p*d+w+t],[x,p*x+w+t]]},clampTiny:f,pathPolygon:function(d,p,r,t,w,x){d=m(d,p,
r,t);return"M"+b(d,w,x).join("L")},pathPolygonAnnulus:function(d,p,r,t,w,x,y){if(d<p){var A=d;d=p}else A=p;A=b(m(A,r,t,w),x,y);return"M"+b(m(d,r,t,w),x,y).reverse().join("L")+"M"+A.join("L")}}},{"../../lib":750,"../../lib/polygon":762}],865:[function(a,G,C){var q=a("../get_data").getSubplotCalcData,n=a("../../lib").counterRegex,m=a("./polar"),f=a("./constants");C=f.attr;var b=f.name;n=n(b);f={};f[C]={valType:"subplotid",dflt:b,editType:"calc"};G.exports={attr:C,name:b,idRoot:b,idRegex:n,attrRegex:n,
attributes:f,layoutAttributes:a("./layout_attributes"),supplyLayoutDefaults:a("./layout_defaults"),plot:function(k){for(var e=k._fullLayout,h=k.calcdata,l=e._subplots[b],c=0;c<l.length;c++){var g=l[c],d=q(h,b,g),p=e[g]._subplot;p||(p=m(k,g),e[g]._subplot=p);p.plot(d,e,k._promises)}},clean:function(k,e,h,l){k=l._subplots[b]||[];h=l._has&&l._has("gl");var c=e._has&&e._has("gl");h=h&&!c;for(c=0;c<k.length;c++){var g=k[c],d=l[g]._subplot;if(!e[g]&&d){d.framework.remove();d.layers["radial-axis-title"].remove();
for(var p in d.clipPaths)d.clipPaths[p].remove()}h&&d._scene&&(d._scene.destroy(),d._scene=null)}},toSVG:a("../cartesian").toSVG}},{"../../lib":750,"../cartesian":812,"../get_data":836,"./constants":863,"./layout_attributes":866,"./layout_defaults":867,"./polar":874}],866:[function(a,G,C){C=a("../../components/color/attributes");var q=a("../cartesian/layout_attributes"),n=a("../domain").attributes,m=a("../../lib").extendFlat,f=a("../../plot_api/edit_types").overrideAll;a=f({color:q.color,showline:m({},
q.showline,{dflt:!0}),linecolor:q.linecolor,linewidth:q.linewidth,showgrid:m({},q.showgrid,{dflt:!0}),gridcolor:q.gridcolor,gridwidth:q.gridwidth},"plot","from-root");f=f({tickmode:q.tickmode,nticks:q.nticks,tick0:q.tick0,dtick:q.dtick,tickvals:q.tickvals,ticktext:q.ticktext,ticks:q.ticks,ticklen:q.ticklen,tickwidth:q.tickwidth,tickcolor:q.tickcolor,showticklabels:q.showticklabels,showtickprefix:q.showtickprefix,tickprefix:q.tickprefix,showticksuffix:q.showticksuffix,ticksuffix:q.ticksuffix,showexponent:q.showexponent,
exponentformat:q.exponentformat,minexponent:q.minexponent,separatethousands:q.separatethousands,tickfont:q.tickfont,tickangle:q.tickangle,tickformat:q.tickformat,tickformatstops:q.tickformatstops,layer:q.layer},"plot","from-root");var b={visible:m({},q.visible,{dflt:!0}),type:m({},q.type,{values:["-","linear","log","date","category"]}),autorange:m({},q.autorange,{editType:"plot"}),rangemode:{valType:"enumerated",values:["tozero","nonnegative","normal"],dflt:"tozero",editType:"calc"},range:m({},q.range,
{items:[{valType:"any",editType:"plot",impliedEdits:{"^autorange":!1}},{valType:"any",editType:"plot",impliedEdits:{"^autorange":!1}}],editType:"plot"}),categoryorder:q.categoryorder,categoryarray:q.categoryarray,angle:{valType:"angle",editType:"plot"},side:{valType:"enumerated",values:["clockwise","counterclockwise"],dflt:"clockwise",editType:"plot"},title:{text:m({},q.title.text,{editType:"plot",dflt:""}),font:m({},q.title.font,{editType:"plot"}),editType:"plot"},hoverformat:q.hoverformat,uirevision:{valType:"any",
editType:"none"},editType:"calc",_deprecated:{title:q._deprecated.title,titlefont:q._deprecated.titlefont}};m(b,a,f);q={visible:m({},q.visible,{dflt:!0}),type:{valType:"enumerated",values:["-","linear","category"],dflt:"-",editType:"calc",_noTemplating:!0},categoryorder:q.categoryorder,categoryarray:q.categoryarray,thetaunit:{valType:"enumerated",values:["radians","degrees"],dflt:"degrees",editType:"calc"},period:{valType:"number",editType:"calc",min:0},direction:{valType:"enumerated",values:["counterclockwise",
"clockwise"],dflt:"counterclockwise",editType:"calc"},rotation:{valType:"angle",editType:"calc"},hoverformat:q.hoverformat,uirevision:{valType:"any",editType:"none"},editType:"calc"};m(q,a,f);G.exports={domain:n({name:"polar",editType:"plot"}),sector:{valType:"info_array",items:[{valType:"number",editType:"plot"},{valType:"number",editType:"plot"}],dflt:[0,360],editType:"plot"},hole:{valType:"number",min:0,max:1,dflt:0,editType:"plot"},bgcolor:{valType:"color",editType:"plot",dflt:C.background},radialaxis:b,
angularaxis:q,gridshape:{valType:"enumerated",values:["circular","linear"],dflt:"circular",editType:"plot"},uirevision:{valType:"any",editType:"none"},editType:"calc"}},{"../../components/color/attributes":614,"../../lib":750,"../../plot_api/edit_types":781,"../cartesian/layout_attributes":813,"../domain":826}],867:[function(a,G,C){function q(y,A,z,F){function D(T,V){return z(J+"."+T,V)}var u=z("bgcolor");F.bgColor=f.combine(u,F.paper_bgcolor);u=z("sector");z("hole");for(var B=e(F.fullData,w.name,
F.id),I=F.layoutOut,J,N=0;N<x.length;N++){J=x[N];m.isPlainObject(y[J])||(y[J]={});var M=y[J],E=b.newContainer(A,J);E._id=E._name=J;E._attr=F.id+"."+J;E._traceIndices=B.map(function(T){return T._expandedIndex});var L=w.axisName2dataArray[J],Q=n(M,E,D,B,L);g(M,E,D,{axData:B,dataAttr:L});L=D("visible");t(E,A,I);D("uirevision",A.uirevision);if(L){var S=D("color");var R=S===M.color?S:F.font.color}E._m=1;switch(J){case "radialaxis":var O=D("autorange",!E.isValidRange(M.range));M.autorange=O;!O||"linear"!==
Q&&"-"!==Q||D("rangemode");"reversed"===O&&(E._m=-1);D("range");E.cleanRange("range",{dfltRange:[0,1]});L&&(D("side"),D("angle",u[0]),D("title.text"),m.coerceFont(D,"title.font",{family:F.font.family,size:Math.round(1.2*F.font.size),color:R}));break;case "angularaxis":if("date"===Q){m.log("Polar plots do not support date angular axes yet.");for(Q=0;Q<B.length;Q++)B[Q].visible=!1;Q=M.type=E.type="linear"}"linear"===Q?D("thetaunit"):D("period");O=D("direction");D("rotation",{counterclockwise:0,clockwise:90}[O])}L&&
(h(M,E,D,E.type),c(M,E,D,E.type,{tickSuffixDflt:"degrees"===E.thetaunit?"°":void 0}),l(M,E,D,{outerTicks:!0}),D("showticklabels")&&(m.coerceFont(D,"tickfont",{family:F.font.family,size:F.font.size,color:R}),D("tickangle"),D("tickformat")),d(M,E,D,{dfltColor:S,bgColor:F.bgColor,blend:60,showLine:!0,showGrid:!0,noZeroLine:!0,attributes:r[J]}),D("layer"));"category"!==Q&&D("hoverformat");E._input=M}"category"===A.angularaxis.type&&z("gridshape")}function n(y,A,z,F,D){if("-"===z("type")){for(z=0;z<F.length;z++)if(F[z].visible){var u=
F[z];break}u&&u[D]&&(A.type=p(u[D],"gregorian"));"-"===A.type?A.type="linear":y.type=A.type}return A.type}var m=a("../../lib"),f=a("../../components/color"),b=a("../../plot_api/plot_template"),k=a("../subplot_defaults"),e=a("../get_data").getSubplotData,h=a("../cartesian/tick_value_defaults"),l=a("../cartesian/tick_mark_defaults"),c=a("../cartesian/tick_label_defaults"),g=a("../cartesian/category_order_defaults"),d=a("../cartesian/line_grid_defaults"),p=a("../cartesian/axis_autotype"),r=a("./layout_attributes"),
t=a("./set_convert"),w=a("./constants"),x=w.axisNames;G.exports=function(y,A,z){k(y,A,z,{type:w.name,attributes:r,handleDefaults:q,font:A.font,paper_bgcolor:A.paper_bgcolor,fullData:z,layoutOut:A})}},{"../../components/color":615,"../../lib":750,"../../plot_api/plot_template":788,"../cartesian/axis_autotype":800,"../cartesian/category_order_defaults":803,"../cartesian/line_grid_defaults":815,"../cartesian/tick_label_defaults":820,"../cartesian/tick_mark_defaults":821,"../cartesian/tick_value_defaults":822,
"../get_data":836,"../subplot_defaults":876,"./constants":863,"./layout_attributes":866,"./set_convert":875}],868:[function(a,G,C){C=a("../../../traces/scatter/attributes");var q=C.marker;a=a("../../../lib/extend").extendFlat;G.exports={r:a({},C.r,{}),t:a({},C.t,{}),marker:{color:a({},q.color,{}),size:a({},q.size,{}),symbol:a({},q.symbol,{}),opacity:a({},q.opacity,{}),editType:"calc"}}},{"../../../lib/extend":740,"../../../traces/scatter/attributes":1158}],869:[function(a,G,C){function q(m,f){return n({},
f,{showline:{valType:"boolean"},showticklabels:{valType:"boolean"},tickorientation:{valType:"enumerated",values:["horizontal","vertical"]},ticklen:{valType:"number",min:0},tickcolor:{valType:"color"},ticksuffix:{valType:"string"},endpadding:{valType:"number",description:"Legacy polar charts are deprecated! Please switch to *polar* subplots."},visible:{valType:"boolean"}})}C=a("../../cartesian/layout_attributes");var n=a("../../../lib/extend").extendFlat;a=a("../../../plot_api/edit_types").overrideAll;
C=n({},C.domain,{});G.exports=a({radialaxis:q("radial",{range:{valType:"info_array",items:[{valType:"number"},{valType:"number"}]},domain:C,orientation:{valType:"number"}}),angularaxis:q("angular",{range:{valType:"info_array",items:[{valType:"number",dflt:0},{valType:"number",dflt:360}]},domain:C}),layout:{direction:{valType:"enumerated",values:["clockwise","counterclockwise"]},orientation:{valType:"angle"}}},"plot","nested")},{"../../../lib/extend":740,"../../../plot_api/edit_types":781,"../../cartesian/layout_attributes":813}],
870:[function(a,G,C){(G.exports=a("./micropolar")).manager=a("./micropolar_manager")},{"./micropolar":871,"./micropolar_manager":872}],871:[function(a,G,C){var q=a("d3"),n=a("../../../lib").extendDeepAll,m=a("../../../constants/alignment").MID_SHIFT,f=G.exports={version:"0.2.2"};f.Axis=function(){function b(t){c=t||c;t=k.data;var w=k.layout;if("string"==typeof c||c.nodeName)c=q.select(c);c.datum(t).each(function(x,y){x=x.slice();h={data:f.util.cloneJson(x),layout:f.util.cloneJson(w)};var A=0;x.forEach(function(qa,
Y){qa.color||(qa.color=w.defaultColorRange[A],A=(A+1)%w.defaultColorRange.length);qa.strokeColor||(qa.strokeColor="LinePlot"===qa.geometry?qa.color:q.rgb(qa.color).darker().toString());h.data[Y].color=qa.color;h.data[Y].strokeColor=qa.strokeColor;h.data[Y].strokeDash=qa.strokeDash;h.data[Y].strokeSize=qa.strokeSize});x=x.filter(function(qa,Y){qa=qa.visible;return"undefined"===typeof qa||!0===qa});var z=!1;y=x.map(function(qa,Y){z=z||"undefined"!==typeof qa.groupId;return qa});if(z){var F=[];x=q.nest().key(function(qa,
Y){return"undefined"!=typeof qa.groupId?qa.groupId:"unstacked"}).entries(y).map(function(qa,Y){if("unstacked"!==qa.key){var pa=qa.values[0].r.map(function(oa,ua){return 0});qa.values.forEach(function(oa,ua,ya){oa.yStack=[pa];F.push(pa);pa=f.util.sumArrays(oa.r,pa)})}return qa.values});x=q.merge(x)}x.forEach(function(qa,Y){qa.t=Array.isArray(qa.t[0])?qa.t:[qa.t];qa.r=Array.isArray(qa.r[0])?qa.r:[qa.r]});var D=Math.min(w.width-w.margin.left-w.margin.right,w.height-w.margin.top-w.margin.bottom)/2;D=
Math.max(10,D);var u=[w.margin.left+D,w.margin.top+D];y=z?[0,q.max(f.util.sumArrays(f.util.arrayLast(x).r[0],f.util.arrayLast(F)))]:q.extent(f.util.flattenArray(x.map(function(qa,Y){return qa.r})));w.radialAxis.domain!=f.DATAEXTENT&&(y[0]=0);d=q.scale.linear().domain(w.radialAxis.domain!=f.DATAEXTENT&&w.radialAxis.domain?w.radialAxis.domain:y).range([0,D]);h.layout.radialAxis.domain=d.domain();var B=f.util.flattenArray(x.map(function(qa,Y){return qa.t})),I="string"===typeof B[0];if(I){B=f.util.deduplicate(B);
var J=B.slice();B=q.range(B.length);x=x.map(function(qa,Y){qa.t=[B];z&&(qa.yStack=qa.yStack);return qa})}var N=x.filter(function(qa,Y){return"LinePlot"===qa.geometry||"DotPlot"===qa.geometry}).length===x.length;y=null===w.needsEndSpacing?I||!N:w.needsEndSpacing;var M=w.angularAxis.domain&&w.angularAxis.domain!=f.DATAEXTENT&&!I&&0<=w.angularAxis.domain[0]?w.angularAxis.domain:q.extent(B),E=Math.abs(B[1]-B[0]);N&&!I&&(E=0);M=M.slice();y&&I&&(M[1]+=E);N=w.angularAxis.ticksCount||4;8<N&&(N=N/(N/8)+N%
8);w.angularAxis.ticksStep&&(N=(M[1]-M[0])/N);N=w.angularAxis.ticksStep||(M[1]-M[0])/(N*(w.minorTicks+1));J&&(N=Math.max(Math.round(N),1));M[2]||(M[2]=N);N=q.range.apply(this,M);N=N.map(function(qa,Y){return parseFloat(qa.toPrecision(12))});p=q.scale.linear().domain(M.slice(0,2)).range("clockwise"===w.direction?[0,360]:[360,0]);h.layout.angularAxis.domain=p.domain();h.layout.angularAxis.endPadding=y?E:0;l=q.select(this).select("svg.chart-root");if("undefined"===typeof l||l.empty())y=(new DOMParser).parseFromString("\x3csvg xmlns\x3d'http://www.w3.org/2000/svg' class\x3d'chart-root'\x3e' + '\x3cg class\x3d'outer-group'\x3e' + '\x3cg class\x3d'chart-group'\x3e' + '\x3ccircle class\x3d'background-circle'\x3e\x3c/circle\x3e' + '\x3cg class\x3d'geometry-group'\x3e\x3c/g\x3e' + '\x3cg class\x3d'radial axis-group'\x3e' + '\x3ccircle class\x3d'outside-circle'\x3e\x3c/circle\x3e' + '\x3c/g\x3e' + '\x3cg class\x3d'angular axis-group'\x3e\x3c/g\x3e' + '\x3cg class\x3d'guides-group'\x3e\x3cline\x3e\x3c/line\x3e\x3ccircle r\x3d'0'\x3e\x3c/circle\x3e\x3c/g\x3e' + '\x3c/g\x3e' + '\x3cg class\x3d'legend-group'\x3e\x3c/g\x3e' + '\x3cg class\x3d'tooltips-group'\x3e\x3c/g\x3e' + '\x3cg class\x3d'title-group'\x3e\x3ctext\x3e\x3c/text\x3e\x3c/g\x3e' + '\x3c/g\x3e' + '\x3c/svg\x3e",
"application/xml"),y=this.appendChild(this.ownerDocument.importNode(y.documentElement,!0)),l=q.select(y);l.select(".guides-group").style({"pointer-events":"none"});l.select(".angular.axis-group").style({"pointer-events":"none"});l.select(".radial.axis-group").style({"pointer-events":"none"});y=l.select(".chart-group");M={fill:"none",stroke:w.tickColor};var L={"font-size":w.font.size,"font-family":w.font.family,fill:w.font.color,"text-shadow":["-1px 0px","1px -1px","-1px 1px","1px 1px"].map(function(qa,
Y){return" "+qa+" 0 "+w.font.outlineColor}).join(",")};if(w.showLegend){E=l.select(".legend-group").attr({transform:"translate("+[D,w.margin.top]+")"}).style({display:"block"});var Q=x.map(function(qa,Y){Y=f.util.cloneJson(qa);Y.symbol="DotPlot"===qa.geometry?qa.dotType||"circle":"LinePlot"!=qa.geometry?"square":"line";Y.visibleInLegend="undefined"===typeof qa.visibleInLegend||qa.visibleInLegend;Y.color="LinePlot"===qa.geometry?qa.strokeColor:qa.color;return Y});f.Legend().config({data:x.map(function(qa,
Y){return qa.name||"Element"+Y}),legendConfig:n({},f.Legend.defaultConfig().legendConfig,{container:E,elements:Q,reverseOrder:w.legend.reverseOrder})})();Q=E.node().getBBox();D=Math.min(w.width-Q.width-w.margin.left-w.margin.right,w.height-w.margin.top-w.margin.bottom)/2;D=Math.max(10,D);u=[w.margin.left+D,w.margin.top+D];d.range([0,D]);h.layout.radialAxis.domain=d.domain();E.attr("transform","translate("+[u[0]+D,u[1]-D]+")")}else E=l.select(".legend-group").style({display:"none"});l.attr({width:w.width,
height:w.height}).style({opacity:w.opacity});y.attr("transform","translate("+u+")").style({cursor:"crosshair"});var S=[(w.width-(w.margin.left+w.margin.right+2*D+(Q?Q.width:0)))/2,(w.height-(w.margin.top+w.margin.bottom+2*D))/2];S[0]=Math.max(0,S[0]);S[1]=Math.max(0,S[1]);l.select(".outer-group").attr("transform","translate("+S+")");if(w.title&&w.title.text){Q=l.select("g.title-group text").style(L).text(w.title.text);var R=Q.node().getBBox();Q.attr({x:u[0]-R.width/2,y:u[1]-D-20})}Q=l.select(".radial.axis-group");
w.radialAxis.gridLinesVisible&&(R=Q.selectAll("circle.grid-circle").data(d.ticks(5)),R.enter().append("circle").attr({"class":"grid-circle"}).style(M),R.attr("r",d),R.exit().remove());Q.select("circle.outside-circle").attr({r:D}).style(M);var O=l.select("circle.background-circle").attr({r:D}).style({fill:w.backgroundColor,stroke:w.stroke});w.radialAxis.visible&&(R=q.svg.axis().scale(d).ticks(5).tickSize(5),Q.call(R).attr({transform:"rotate("+w.radialAxis.orientation+")"}),Q.selectAll(".domain").style(M),
Q.selectAll("g\x3etext").text(function(qa,Y){return this.textContent+w.radialAxis.ticksSuffix}).style(L).style({"text-anchor":"start"}).attr({x:0,y:0,dx:0,dy:0,transform:function(qa,Y){return"horizontal"===w.radialAxis.tickOrientation?"rotate("+-w.radialAxis.orientation+") translate("+[0,L["font-size"]]+")":"translate("+[0,L["font-size"]]+")"}}),Q.selectAll("g\x3eline").style({stroke:"black"}));Q=l.select(".angular.axis-group").selectAll("g.angular-tick").data(N);N=Q.enter().append("g").classed("angular-tick",
!0);Q.attr({transform:function(qa,Y){return"rotate("+(p(qa)%360+w.orientation)+")"}}).style({display:w.angularAxis.visible?"block":"none"});Q.exit().remove();N.append("line").classed("grid-line",!0).classed("major",function(qa,Y){return 0==Y%(w.minorTicks+1)}).classed("minor",function(qa,Y){return 0!=Y%(w.minorTicks+1)}).style(M);N.selectAll(".minor").style({stroke:w.minorTickColor});Q.select("line.grid-line").attr({x1:w.tickLength?D-w.tickLength:0,x2:D}).style({display:w.angularAxis.gridLinesVisible?
"block":"none"});N.append("text").classed("axis-text",!0).style(L);Q=Q.select("text.axis-text").attr({x:D+w.labelOffset,dy:m+"em",transform:function(qa,Y){qa=p(qa)%360+w.orientation;Y=D+w.labelOffset;var pa=w.angularAxis.tickOrientation;return"horizontal"==pa?"rotate("+-qa+" "+Y+" 0)":"radial"==pa?270>qa&&90<qa?"rotate(180 "+Y+" 0)":null:"rotate("+(180>=qa&&0<qa?-90:90)+" "+Y+" 0)"}}).style({"text-anchor":"middle",display:w.angularAxis.labelsVisible?"block":"none"}).text(function(qa,Y){return 0!=
Y%(w.minorTicks+1)?"":J?J[qa]+w.angularAxis.ticksSuffix:qa+w.angularAxis.ticksSuffix}).style(L);w.angularAxis.rewriteTicks&&Q.text(function(qa,Y){return 0!=Y%(w.minorTicks+1)?"":w.angularAxis.rewriteTicks(this.textContent,Y)});Q=q.max(y.selectAll(".angular-tick text")[0].map(function(qa,Y){return qa.getCTM().e+qa.getBBox().width}));E.attr({transform:"translate("+[D+Q,w.margin.top]+")"});Q=0<l.select("g.geometry-group").selectAll("g").size();var T=l.select("g.geometry-group").selectAll("g.geometry").data(x);
T.enter().append("g").attr({"class":function(qa,Y){return"geometry geometry"+Y}});T.exit().remove();if(x[0]||Q){var V=[];x.forEach(function(qa,Y){var pa={};pa.radialScale=d;pa.angularScale=p;pa.container=T.filter(function(oa,ua){return ua==Y});pa.geometry=qa.geometry;pa.orientation=w.orientation;pa.direction=w.direction;pa.index=Y;V.push({data:qa,geometryConfig:pa})});var X=[];q.nest().key(function(qa,Y){return"undefined"!=typeof qa.data.groupId||"unstacked"}).entries(V).forEach(function(qa,Y){"unstacked"===
qa.key?X=X.concat(qa.values.map(function(pa,oa){return[pa]})):X.push(qa.values)});X.forEach(function(qa,Y){var pa=Array.isArray(qa)?qa[0].geometryConfig.geometry:qa.geometryConfig.geometry;qa=qa.map(function(oa,ua){return n(f[pa].defaultConfig(),oa)});f[pa]().config(qa)()})}var ba=l.select(".guides-group");x=l.select(".tooltips-group");var aa=f.tooltipPanel().config({container:x,fontSize:8})(),ka=f.tooltipPanel().config({container:x,fontSize:8})(),ha=f.tooltipPanel().config({container:x,hasTick:!0})(),
ca,sa;if(!I){var ma=ba.select("line").attr({x1:0,y1:0,y2:0}).style({stroke:"grey","pointer-events":"none"});y.on("mousemove.angular-guide",function(qa,Y){qa=f.util.getMousePos(O).angle;ma.attr({x2:-D,transform:"rotate("+qa+")"}).style({opacity:.5});ca=p.invert((qa+180+360-w.orientation)%360);qa=f.util.convertToCartesian(D+12,qa+180);aa.text(f.util.round(ca)).move([qa[0]+u[0],qa[1]+u[1]])}).on("mouseout.angular-guide",function(qa,Y){ba.select("line").style({opacity:0})})}var ra=ba.select("circle").style({stroke:"grey",
fill:"none"});y.on("mousemove.radial-guide",function(qa,Y){qa=f.util.getMousePos(O).radius;ra.attr({r:qa}).style({opacity:.5});sa=d.invert(f.util.getMousePos(O).radius);qa=f.util.convertToCartesian(qa,w.radialAxis.orientation);ka.text(f.util.round(sa)).move([qa[0]+u[0],qa[1]+u[1]])}).on("mouseout.radial-guide",function(qa,Y){ra.style({opacity:0});ha.hide();aa.hide();ka.hide()});l.selectAll(".geometry-group .mark").on("mouseover.tooltip",function(qa,Y){var pa=q.select(this);Y=this.style.fill;pa.attr({"data-opacity":this.style.opacity||
1});if(Y&&"none"!==Y){pa.attr({"data-fill":Y});Y=q.hsl(Y).darker().toString();pa.style({fill:Y,opacity:1});pa=f.util.round(qa[0]);var oa=f.util.round(qa[1]);I&&(pa=J[qa[0]]);qa="t: "+pa+", r: "+oa;pa=this.getBoundingClientRect();oa=l.node().getBoundingClientRect();pa=[pa.left+pa.width/2-S[0]-oa.left,pa.top+pa.height/2-S[1]-oa.top];ha.config({color:Y}).text(qa);ha.move(pa)}else Y=this.style.stroke||"black",pa.attr({"data-stroke":Y}),Y=q.hsl(Y).darker().toString(),pa.style({stroke:Y,opacity:1})}).on("mousemove.tooltip",
function(qa,Y){if(0!=q.event.which)return!1;q.select(this).attr("data-fill")&&ha.show()}).on("mouseout.tooltip",function(qa,Y){ha.hide();qa=q.select(this);(Y=qa.attr("data-fill"))?qa.style({fill:Y,opacity:qa.attr("data-opacity")}):qa.style({stroke:qa.attr("data-stroke"),opacity:qa.attr("data-opacity")})})});return r}var k={data:[],layout:{}},e={},h={},l,c,g=q.dispatch("hover"),d,p,r={render:function(t){b(t);return this},config:function(t){if(!arguments.length)return k;var w=f.util.cloneJson(t);w.data.forEach(function(x,
y){k.data[y]||(k.data[y]={});n(k.data[y],f.Axis.defaultConfig().data[0]);n(k.data[y],x)});n(k.layout,f.Axis.defaultConfig().layout);n(k.layout,w.layout);return this},getLiveConfig:function(){return h},getinputConfig:function(){return e},radialScale:function(t){return d},angularScale:function(t){return p},svg:function(){return l}};q.rebind(r,g,"on");return r};f.Axis.defaultConfig=function(b,k){return{data:[{t:[1,2,3,4],r:[10,11,12,13],name:"Line1",geometry:"LinePlot",color:null,strokeDash:"solid",
strokeColor:null,strokeSize:"1",visibleInLegend:!0,opacity:1}],layout:{defaultColorRange:q.scale.category10().range(),title:null,height:450,width:500,margin:{top:40,right:40,bottom:40,left:40},font:{size:12,color:"gray",outlineColor:"white",family:"Tahoma, sans-serif"},direction:"clockwise",orientation:0,labelOffset:10,radialAxis:{domain:null,orientation:-45,ticksSuffix:"",visible:!0,gridLinesVisible:!0,tickOrientation:"horizontal",rewriteTicks:null},angularAxis:{domain:[0,360],ticksSuffix:"",visible:!0,
gridLinesVisible:!0,labelsVisible:!0,tickOrientation:"horizontal",rewriteTicks:null,ticksCount:null,ticksStep:null},minorTicks:0,tickLength:null,tickColor:"silver",minorTickColor:"#eee",backgroundColor:"none",needsEndSpacing:null,showLegend:!0,legend:{reverseOrder:!1},opacity:1}}};f.util={};f.DATAEXTENT="dataExtent";f.AREA="AreaChart";f.LINE="LinePlot";f.DOT="DotPlot";f.BAR="BarChart";f.util._override=function(b,k){for(var e in b)e in k&&(k[e]=b[e])};f.util._extend=function(b,k){for(var e in b)k[e]=
b[e]};f.util._rndSnd=function(){return 2*Math.random()-1+(2*Math.random()-1)+(2*Math.random()-1)};f.util.dataFromEquation2=function(b,k){k=k||6;return q.range(0,360+k,k).map(function(e,h){h=b(e*Math.PI/180);return[e,h]})};f.util.dataFromEquation=function(b,k,e){k=k||6;var h=[],l=[];q.range(0,360+k,k).forEach(function(c,g){g=b(c*Math.PI/180);h.push(c);l.push(g)});k={t:h,r:l};e&&(k.name=e);return k};f.util.ensureArray=function(b,k){if("undefined"===typeof b)return null;var e=[].concat(b);return q.range(k).map(function(h,
l){return e[l]||e[0]})};f.util.fillArrays=function(b,k,e){k.forEach(function(h,l){b[h]=f.util.ensureArray(b[h],e)});return b};f.util.cloneJson=function(b){return JSON.parse(JSON.stringify(b))};f.util.validateKeys=function(b,k){"string"===typeof k&&(k=k.split("."));var e=k.shift();return b[e]&&(!k.length||objHasKeys(b[e],k))};f.util.sumArrays=function(b,k){return q.zip(b,k).map(function(e,h){return q.sum(e)})};f.util.arrayLast=function(b){return b[b.length-1]};f.util.arrayEqual=function(b,k){for(var e=
Math.max(b.length,k.length,1);0<=e--&&b[e]===k[e];);return-2===e};f.util.flattenArray=function(b){for(var k=[];!f.util.arrayEqual(k,b);)k=b,b=[].concat.apply([],b);return b};f.util.deduplicate=function(b){return b.filter(function(k,e,h){return h.indexOf(k)==e})};f.util.convertToCartesian=function(b,k){k=k*Math.PI/180;return[b*Math.cos(k),b*Math.sin(k)]};f.util.round=function(b,k){k=Math.pow(10,k||2);return Math.round(b*k)/k};f.util.getMousePos=function(b){b=q.mouse(b.node());var k=b[0],e=b[1],h={};
h.x=k;h.y=e;h.pos=b;h.angle=180*(Math.atan2(e,k)+Math.PI)/Math.PI;h.radius=Math.sqrt(k*k+e*e);return h};f.util.duplicatesCount=function(b){for(var k={},e,h={},l=0,c=b.length;l<c;l++)e=b[l],e in k?(k[e]++,h[e]=k[e]):k[e]=1;return h};f.util.duplicates=function(b){return Object.keys(f.util.duplicatesCount(b))};f.util.translator=function(b,k,e,h){h&&(h=e.slice(),e=k,k=h);var l=k.reduce(function(c,g){if("undefined"!=typeof c)return c[g]},b);"undefined"!==typeof l&&(k.reduce(function(c,g,d){if("undefined"!=
typeof c)return d===k.length-1&&delete c[g],c[g]},b),e.reduce(function(c,g,d){"undefined"===typeof c[g]&&(c[g]={});d===e.length-1&&(c[g]=l);return c[g]},b))};f.PolyChart=function(){function b(){var l=k[0].geometryConfig,c=l.container;"string"==typeof c&&(c=q.select(c));c.datum(k).each(function(g,d){var p=!!g[0].data.yStack,r=g.map(function(u,B){return p?q.zip(u.data.t[0],u.data.r[0],u.data.yStack[0]):q.zip(u.data.t[0],u.data.r[0])}),t=l.angularScale,w=l.radialScale.domain()[0],x={bar:function(u,B,
I){I=g[I].data;B=l.radialScale(u[1])-l.radialScale(0);u=l.radialScale(u[2]||0);I=I.barWidth;q.select(this).attr({"class":"mark bar",d:"M"+[[B+u,-I/2],[B+u,I/2],[u,I/2],[u,-I/2]].join("L")+"Z",transform:function(J,N){return"rotate("+(l.orientation+t(J[0]))+")"}})},dot:function(u,B,I){var J=u[2]?[u[0],u[1]+u[2]]:u;u=q.svg.symbol().size(g[I].data.dotSize).type(g[I].data.dotType)(u,B);q.select(this).attr({"class":"mark dot",d:u,transform:function(N,M){N=l.radialScale(J[1]);M=(l.angularScale(J[0])+l.orientation)*
Math.PI/180;return"translate("+[N*Math.cos(M),N*Math.sin(M)]+")"}})}},y=q.svg.line.radial().interpolate(g[0].data.lineInterpolation).radius(function(u){return l.radialScale(u[1])}).angle(function(u){return l.angularScale(u[0])*Math.PI/180});x.line=function(u,B,I){var J=u[2]?r[I].map(function(M,E){return[M[0],M[1]+M[2]]}):r[I];q.select(this).each(x.dot).style({opacity:function(M,E){return+g[I].data.dotVisible},fill:F.stroke(u,B,I)}).attr({"class":"mark dot"});if(!(0<B)){var N=q.select(this.parentNode).selectAll("path.line").data([0]);
N.enter().insert("path");N.attr({"class":"line",d:y(J),transform:function(M,E){return"rotate("+(l.orientation+90)+")"},"pointer-events":"none"}).style({fill:function(M,E){return F.fill(u,B,I)},"fill-opacity":0,stroke:function(M,E){return F.stroke(u,B,I)},"stroke-width":function(M,E){return F["stroke-width"](u,B,I)},"stroke-dasharray":function(M,E){return F["stroke-dasharray"](u,B,I)},opacity:function(M,E){return F.opacity(u,B,I)},display:function(M,E){return F.display(u,B,I)}})}};d=l.angularScale.range();
var A=Math.abs(d[1]-d[0])/r[0].length*Math.PI/180,z=q.svg.arc().startAngle(function(u){return-A/2}).endAngle(function(u){return A/2}).innerRadius(function(u){return l.radialScale(w+(u[2]||0))}).outerRadius(function(u){return l.radialScale(w+(u[2]||0))+l.radialScale(u[1])});x.arc=function(u,B,I){q.select(this).attr({"class":"mark arc",d:z,transform:function(J,N){return"rotate("+(l.orientation+t(J[0])+90)+")"}})};var F={fill:function(u,B,I){return g[I].data.color},stroke:function(u,B,I){return g[I].data.strokeColor},
"stroke-width":function(u,B,I){return g[I].data.strokeSize+"px"},"stroke-dasharray":function(u,B,I){return h[g[I].data.strokeDash]},opacity:function(u,B,I){return g[I].data.opacity},display:function(u,B,I){return"undefined"===typeof g[I].data.visible||g[I].data.visible?"block":"none"}};d=q.select(this).selectAll("g.layer").data(r);d.enter().append("g").attr({"class":"layer"});var D=d.selectAll("path.mark").data(function(u,B){return u});D.enter().append("path").attr({"class":"mark"});D.style(F).each(x[l.geometryType]);
D.exit().remove();d.exit().remove()})}var k=[f.PolyChart.defaultConfig()],e=q.dispatch("hover"),h={solid:"none",dash:[5,2],dot:[2,5]};b.config=function(l){if(!arguments.length)return k;l.forEach(function(c,g){k[g]||(k[g]={});n(k[g],f.PolyChart.defaultConfig());n(k[g],c)});return this};b.getColorScale=function(){};q.rebind(b,e,"on");return b};f.PolyChart.defaultConfig=function(){return{data:{name:"geom1",t:[[1,2,3,4]],r:[[1,2,3,4]],dotType:"circle",dotSize:64,dotVisible:!1,barWidth:20,color:"#ffa500",
strokeSize:1,strokeColor:"silver",strokeDash:"solid",opacity:1,index:0,visible:!0,visibleInLegend:!0},geometryConfig:{geometry:"LinePlot",geometryType:"arc",direction:"clockwise",orientation:0,container:"body",radialScale:null,angularScale:null,colorScale:q.scale.category20()}}};f.BarChart=function(){return f.PolyChart()};f.BarChart.defaultConfig=function(){return{geometryConfig:{geometryType:"bar"}}};f.AreaChart=function(){return f.PolyChart()};f.AreaChart.defaultConfig=function(){return{geometryConfig:{geometryType:"arc"}}};
f.DotPlot=function(){return f.PolyChart()};f.DotPlot.defaultConfig=function(){return{geometryConfig:{geometryType:"dot",dotType:"circle"}}};f.LinePlot=function(){return f.PolyChart()};f.LinePlot.defaultConfig=function(){return{geometryConfig:{geometryType:"line"}}};f.Legend=function(){function b(){var h=k.legendConfig,l=k.data.map(function(y,A){return[].concat(y).map(function(z,F){var D=n({},h.elements[A]);D.name=z;D.color=[].concat(h.elements[A].color)[F];return D})}),c=q.merge(l);c=c.filter(function(y,
A){return h.elements[A]&&(h.elements[A].visibleInLegend||"undefined"===typeof h.elements[A].visibleInLegend)});h.reverseOrder&&(c=c.reverse());var g=h.container;if("string"==typeof g||g.nodeName)g=q.select(g);var d=c.map(function(y,A){return y.color}),p=h.fontSize,r=(l=null==h.isContinuous?"number"===typeof c[0]:h.isContinuous)?h.height:p*c.length;g=g.classed("legend-group",!0).selectAll("svg").data([0]);var t=g.enter().append("svg").attr({width:300,height:r+p,xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink",
version:"1.1"});t.append("g").classed("legend-axis",!0);t.append("g").classed("legend-marks",!0);t=q.range(c.length);var w=q.scale[l?"linear":"ordinal"]().domain(t).range(d),x=q.scale[l?"linear":"ordinal"]().domain(t)[l?"range":"rangePoints"]([0,r]);l?(r=g.select(".legend-marks").append("defs").append("linearGradient").attr({id:"grad1",x1:"0%",y1:"0%",x2:"0%",y2:"100%"}).selectAll("stop").data(d),r.enter().append("stop"),r.attr({offset:function(y,A){return A/(d.length-1)*100+"%"}}).style({"stop-color":function(y,
A){return y}}),g.append("rect").classed("legend-mark",!0).attr({height:h.height,width:h.colorBandWidth,fill:"url(#grad1)"})):(r=g.select(".legend-marks").selectAll("path.legend-mark").data(c),r.enter().append("path").classed("legend-mark",!0),r.attr({transform:function(y,A){return"translate("+[p/2,x(A)+p/2]+")"},d:function(y,A){y=y.symbol;A=3*p;y="line"===y?"M"+[[-p/2,-p/12],[p/2,-p/12],[p/2,p/12],[-p/2,p/12]]+"Z":-1!=q.svg.symbolTypes.indexOf(y)?q.svg.symbol().type(y).size(A)():q.svg.symbol().type("square").size(A)();
return y},fill:function(y,A){return w(A)}}),r.exit().remove());r=q.svg.axis().scale(x).orient("right");g=g.select("g.legend-axis").attr({transform:"translate("+[l?h.colorBandWidth:p,p/2]+")"}).call(r);g.selectAll(".domain").style({fill:"none",stroke:"none"});g.selectAll("line").style({fill:"none",stroke:l?h.textColor:"none"});g.selectAll("text").style({fill:h.textColor,"font-size":h.fontSize}).text(function(y,A){return c[A].name});return b}var k=f.Legend.defaultConfig(),e=q.dispatch("hover");b.config=
function(h){if(!arguments.length)return k;n(k,h);return this};q.rebind(b,e,"on");return b};f.Legend.defaultConfig=function(b,k){return{data:["a","b","c"],legendConfig:{elements:[{symbol:"line",color:"red"},{symbol:"square",color:"yellow"},{symbol:"diamond",color:"limegreen"}],height:150,colorBandWidth:30,fontSize:12,container:"body",isContinuous:null,textColor:"grey",reverseOrder:!1}}};f.tooltipPanel=function(){var b,k,e,h={container:null,hasTick:!1,fontSize:12,color:"white",padding:5},l="tooltip-"+
f.tooltipPanel.uid++,c=function(){b=h.container.selectAll("g."+l).data([0]);var g=b.enter().append("g").classed(l,!0).style({"pointer-events":"none",display:"none"});e=g.append("path").style({fill:"white","fill-opacity":.9}).attr({d:"M0 0"});k=g.append("text").attr({dx:h.padding+10,dy:.3*+h.fontSize});return c};c.text=function(g){var d=q.hsl(h.color).l,p=.5<=d?"#aaa":"white";g=g||"";k.style({fill:.5<=d?"black":"white","font-size":h.fontSize+"px"}).text(g);d=h.padding;g=k.node().getBBox();p={fill:h.color,
stroke:p,"stroke-width":"2px"};var r=g.width+2*d+10;g=g.height+2*d;e.attr({d:"M"+[[10,-g/2],[10,-g/4],[h.hasTick?0:10,0],[10,g/4],[10,g/2],[r,g/2],[r,-g/2]].join("L")+"Z"}).style(p);b.attr({transform:"translate("+[10,-g/2+2*d]+")"});b.style({display:"block"});return c};c.move=function(g){if(b)return b.attr({transform:"translate("+[g[0],g[1]]+")"}).style({display:"block"}),c};c.hide=function(){if(b)return b.style({display:"none"}),c};c.show=function(){if(b)return b.style({display:"block"}),c};c.config=
function(g){n(h,g);return c};return c};f.tooltipPanel.uid=1;f.adapter={};f.adapter.plotly=function(){return{convert:function(b,k){var e={};if(b.data&&(e.data=b.data.map(function(d,p){d=n({},d);[[d,["marker","color"],["color"]],[d,["marker","opacity"],["opacity"]],[d,["marker","line","color"],["strokeColor"]],[d,["marker","line","dash"],["strokeDash"]],[d,["marker","line","width"],["strokeSize"]],[d,["marker","symbol"],["dotType"]],[d,["marker","size"],["dotSize"]],[d,["marker","barWidth"],["barWidth"]],
[d,["line","interpolation"],["lineInterpolation"]],[d,["showlegend"],["visibleInLegend"]]].forEach(function(r,t){f.util.translator.apply(null,r.concat(k))});k||delete d.marker;k&&delete d.groupId;k?("LinePlot"===d.geometry?(d.type="scatter",!0===d.dotVisible?(delete d.dotVisible,d.mode="lines+markers"):d.mode="lines"):"DotPlot"===d.geometry?(d.type="scatter",d.mode="markers"):"AreaChart"===d.geometry?d.type="area":"BarChart"===d.geometry&&(d.type="bar"),delete d.geometry):("scatter"===d.type?"lines"===
d.mode?d.geometry="LinePlot":"markers"===d.mode?d.geometry="DotPlot":"lines+markers"===d.mode&&(d.geometry="LinePlot",d.dotVisible=!0):"area"===d.type?d.geometry="AreaChart":"bar"===d.type&&(d.geometry="BarChart"),delete d.mode,delete d.type);return d}),!k&&b.layout&&"stack"===b.layout.barmode)){var h=f.util.duplicates(e.data.map(function(d,p){return d.geometry}));e.data.forEach(function(d,p){d=h.indexOf(d.geometry);-1!=d&&(e.data[p].groupId=d)})}if(b.layout){b=n({},b.layout);[[b,["plot_bgcolor"],
["backgroundColor"]],[b,["showlegend"],["showLegend"]],[b,["radialaxis"],["radialAxis"]],[b,["angularaxis"],["angularAxis"]],[b.angularaxis,["showline"],["gridLinesVisible"]],[b.angularaxis,["showticklabels"],["labelsVisible"]],[b.angularaxis,["nticks"],["ticksCount"]],[b.angularaxis,["tickorientation"],["tickOrientation"]],[b.angularaxis,["ticksuffix"],["ticksSuffix"]],[b.angularaxis,["range"],["domain"]],[b.angularaxis,["endpadding"],["endPadding"]],[b.radialaxis,["showline"],["gridLinesVisible"]],
[b.radialaxis,["tickorientation"],["tickOrientation"]],[b.radialaxis,["ticksuffix"],["ticksSuffix"]],[b.radialaxis,["range"],["domain"]],[b.angularAxis,["showline"],["gridLinesVisible"]],[b.angularAxis,["showticklabels"],["labelsVisible"]],[b.angularAxis,["nticks"],["ticksCount"]],[b.angularAxis,["tickorientation"],["tickOrientation"]],[b.angularAxis,["ticksuffix"],["ticksSuffix"]],[b.angularAxis,["range"],["domain"]],[b.angularAxis,["endpadding"],["endPadding"]],[b.radialAxis,["showline"],["gridLinesVisible"]],
[b.radialAxis,["tickorientation"],["tickOrientation"]],[b.radialAxis,["ticksuffix"],["ticksSuffix"]],[b.radialAxis,["range"],["domain"]],[b.font,["outlinecolor"],["outlineColor"]],[b.legend,["traceorder"],["reverseOrder"]],[b,["labeloffset"],["labelOffset"]],[b,["defaultcolorrange"],["defaultColorRange"]]].forEach(function(d,p){f.util.translator.apply(null,d.concat(k))});k?("undefined"!==typeof b.tickLength&&(b.angularaxis.ticklen=b.tickLength,delete b.tickLength),b.tickColor&&(b.angularaxis.tickcolor=
b.tickColor,delete b.tickColor)):(b.angularAxis&&"undefined"!==typeof b.angularAxis.ticklen&&(b.tickLength=b.angularAxis.ticklen),b.angularAxis&&"undefined"!==typeof b.angularAxis.tickcolor&&(b.tickColor=b.angularAxis.tickcolor));b.legend&&"boolean"!=typeof b.legend.reverseOrder&&(b.legend.reverseOrder="normal"!=b.legend.reverseOrder);b.legend&&"boolean"==typeof b.legend.traceorder&&(b.legend.traceorder=b.legend.traceorder?"reversed":"normal",delete b.legend.reverseOrder);if(b.margin&&"undefined"!=
typeof b.margin.t){var l=["t","r","b","l","pad"],c=["top","right","bottom","left","pad"],g={};q.entries(b.margin).forEach(function(d,p){g[c[l.indexOf(d.key)]]=d.value});b.margin=g}k&&(delete b.needsEndSpacing,delete b.minorTickColor,delete b.minorTicks,delete b.angularaxis.ticksCount,delete b.angularaxis.ticksCount,delete b.angularaxis.ticksStep,delete b.angularaxis.rewriteTicks,delete b.angularaxis.nticks,delete b.radialaxis.ticksCount,delete b.radialaxis.ticksCount,delete b.radialaxis.ticksStep,
delete b.radialaxis.rewriteTicks,delete b.radialaxis.nticks);e.layout=b}return e}}}},{"../../../constants/alignment":717,"../../../lib":750,d3:169}],872:[function(a,G,C){var q=a("d3");C=a("../../../lib");var n=a("../../../components/color"),m=a("./micropolar"),f=a("./undo_manager"),b=C.extendDeepAll,k=G.exports={};k.framework=function(e){function h(t,w){w&&(p=w);q.select(q.select(p).node().parentNode).selectAll(".svg-container\x3e*:not(.chart-root)").remove();l=l?b(l,t):t;g||(g=m.Axis());d=m.adapter.plotly().convert(l);
g.config(d).render(p);e.data=l.data;e.layout=l.layout;k.fillLayout(e);return l}var l,c,g,d,p,r=new f;h.isPolar=!0;h.svg=function(){return g.svg()};h.getConfig=function(){return l};h.getLiveConfig=function(){return m.adapter.plotly().convert(g.getLiveConfig(),!0)};h.getLiveScales=function(){return{t:g.angularScale(),r:g.radialScale()}};h.setUndoPoint=function(){var t=this,w=m.util.cloneJson(l);(function(x,y){r.add({undo:function(){y&&t(y)},redo:function(){t(x)}})})(w,c);c=m.util.cloneJson(w)};h.undo=
function(){r.undo()};h.redo=function(){r.redo()};return h};k.fillLayout=function(e){var h=q.select(e).selectAll(".plot-container"),l=h.selectAll(".svg-container"),c=e.framework&&e.framework.svg&&e.framework.svg();e._fullLayout=b({width:800,height:600,paper_bgcolor:n.background,_container:h,_paperdiv:l,_paper:c},e.layout)}},{"../../../components/color":615,"../../../lib":750,"./micropolar":871,"./undo_manager":873,d3:169}],873:[function(a,G,C){G.exports=function(){function q(k,e){if(!k)return this;
f=!0;k[e]();f=!1;return this}var n=[],m=-1,f=!1,b;return{add:function(k){if(f)return this;n.splice(m+1,n.length-m);n.push(k);m=n.length-1;return this},setCallback:function(k){b=k},undo:function(){var k=n[m];if(!k)return this;q(k,"undo");--m;b&&b(k.undo);return this},redo:function(){var k=n[m+1];if(!k)return this;q(k,"redo");m+=1;b&&b(k.redo);return this},clear:function(){n=[];m=-1},hasUndo:function(){return-1!==m},hasRedo:function(){return m<n.length-1},getCommands:function(){return n},getPreviousCommand:function(){return n[m-
1]},getIndex:function(){return m}}}},{}],874:[function(a,G,C){function q(T,V){this.id=V;this.gd=T;this.radialAxisAngle=this.vangles=this._hasClipOnAxisFalse=null;this.traceHash={};this.layers={};this.clipPaths={};this.clipIds={};this.viewInitial={};T=T._fullLayout;this.clipIds.forTraces="clip"+T._uid+V+"-for-traces";this.clipPaths.forTraces=T._clips.append("clipPath").attr("id",this.clipIds.forTraces);this.clipPaths.forTraces.append("path");this.framework=T._polarlayer.append("g").attr("class",V);
this.angularTickLayout=this.radialTickLayout=null}function n(T){var V=T.ticks+String(T.ticklen)+String(T.showticklabels);"side"in T&&(V+=T.side);return V}function m(T,V){var X=c.findIndexOfMin(V,function(ba){return c.angleDist(T,ba)});return V[X]}function f(T,V,X){V?(T.attr("display",null),T.attr(X)):T&&T.attr("display","none");return T}function b(T,V){return"translate("+T+","+V+")"}function k(T){return"rotate("+T+")"}var e=a("d3"),h=a("tinycolor2"),l=a("../../registry"),c=a("../../lib"),g=a("../../components/color"),
d=a("../../components/drawing"),p=a("../plots"),r=a("../../plots/cartesian/axes"),t=a("../cartesian/set_convert"),w=a("./set_convert"),x=a("../cartesian/autorange").doAutoRange,y=a("../cartesian/dragbox"),A=a("../../components/dragelement"),z=a("../../components/fx"),F=a("../../components/titles"),D=a("../cartesian/select").prepSelect,u=a("../cartesian/select").selectOnClick,B=a("../cartesian/select").clearSelect,I=a("../../lib/setcursor"),J=a("../../lib/clear_gl_canvases"),N=a("../../plot_api/subroutines").redrawReglTraces,
M=a("../../constants/alignment").MID_SHIFT,E=a("./constants"),L=a("./helpers"),Q=c._,S=c.mod,R=c.deg2rad,O=c.rad2deg;a=q.prototype;G.exports=function(T,V){return new q(T,V)};a.plot=function(T,V){var X=V[this.id];this._hasClipOnAxisFalse=!1;for(var ba=0;ba<T.length;ba++)if(!1===T[ba][0].trace.cliponaxis){this._hasClipOnAxisFalse=!0;break}this.updateLayers(V,X);this.updateLayout(V,X);p.generalUpdatePerTraceModule(this.gd,this,T,X);this.updateFx(V,X)};a.updateLayers=function(T,V){var X=this.layers;T=
V.radialaxis;V=V.angularaxis;var ba=E.layerNames,aa=ba.indexOf("frontplot");ba=ba.slice(0,aa);V="below traces"===V.layer;T="below traces"===T.layer;V&&ba.push("angular-line");T&&ba.push("radial-line");V&&ba.push("angular-axis");T&&ba.push("radial-axis");ba.push("frontplot");V||ba.push("angular-line");T||ba.push("radial-line");V||ba.push("angular-axis");T||ba.push("radial-axis");T=this.framework.selectAll(".polarsublayer").data(ba,String);T.enter().append("g").attr("class",function(ka){return"polarsublayer "+
ka}).each(function(ka){var ha=X[ka]=e.select(this);switch(ka){case "frontplot":ha.append("g").classed("barlayer",!0);ha.append("g").classed("scatterlayer",!0);break;case "backplot":ha.append("g").classed("maplayer",!0);break;case "plotbg":X.bg=ha.append("path");break;case "radial-grid":ha.style("fill","none");break;case "angular-grid":ha.style("fill","none");break;case "radial-line":ha.append("line").style("fill","none");break;case "angular-line":ha.append("path").style("fill","none")}});T.order()};
a.updateLayout=function(T,V){var X=this.layers,ba=T._size,aa=V.radialaxis,ka=V.angularaxis,ha=V.domain.x,ca=V.domain.y;this.xOffset=ba.l+ba.w*ha[0];this.yOffset=ba.t+ba.h*(1-ca[1]);var sa=this.xLength=ba.w*(ha[1]-ha[0]),ma=this.yLength=ba.h*(ca[1]-ca[0]),ra=V.sector;this.sectorInRad=ra.map(R);var qa=ra[0];ra=ra[1]-qa;qa=S(qa,360);ra=qa+ra;var Y=Math.cos(R(qa)),pa=Math.sin(R(qa)),oa=Math.cos(R(ra)),ua=Math.sin(R(ra));var ya=90>=qa&&90<=ra||90<qa&&450<=ra?1:0>=pa&&0>=ua?0:Math.max(pa,ua);var ja=180>=
qa&&180<=ra||180<qa&&540<=ra?-1:0<=Y&&0<=oa?0:Math.min(Y,oa);qa=this.sectorBBox=[ja,270>=qa&&270<=ra||270<qa&&630<=ra?-1:0<=pa&&0<=ua?0:Math.min(pa,ua),360<=ra?1:0>=Y&&0>=oa?0:Math.max(Y,oa),ya];ra=qa[2]-qa[0];pa=Math.abs((qa[3]-qa[1])/ra);ma/sa>pa?(Y=sa,pa*=sa,sa=(ma-pa)/ba.h/2,ha=[ha[0],ha[1]],ca=[ca[0]+sa,ca[1]-sa]):(Y=ma/pa,pa=ma,sa=(sa-Y)/ba.w/2,ha=[ha[0]+sa,ha[1]-sa],ca=[ca[0],ca[1]]);this.xLength2=Y;this.yLength2=pa;this.xDomain2=ha;this.yDomain2=ca;sa=this.xOffset2=ba.l+ba.w*ha[0];ma=this.yOffset2=
ba.t+ba.h*(1-ca[1]);Y=this.radius=Y/ra;pa=this.innerRadius=V.hole*Y;ra=this.cx=sa-Y*qa[0];qa=this.cy=ma+Y*qa[3];oa=this.cxx=ra-sa;ua=this.cyy=qa-ma;this.radialAxis=this.mockAxis(T,V,aa,{_id:"x",side:{counterclockwise:"top",clockwise:"bottom"}[aa.side],domain:[pa/ba.w,Y/ba.w]});this.angularAxis=this.mockAxis(T,V,ka,{side:"right",domain:[0,Math.PI],autorange:!1});this.doAutoRange(T,V);this.updateAngularAxis(T,V);this.updateRadialAxis(T,V);this.updateRadialAxisTitle(T,V);this.xaxis=this.mockCartesianAxis(T,
V,{_id:"x",domain:ha});this.yaxis=this.mockCartesianAxis(T,V,{_id:"y",domain:ca});T=this.pathSubplot();this.clipPaths.forTraces.select("path").attr("d",T).attr("transform",b(oa,ua));X.frontplot.attr("transform",b(sa,ma)).call(d.setClipUrl,this._hasClipOnAxisFalse?null:this.clipIds.forTraces,this.gd);X.bg.attr("d",T).attr("transform",b(ra,qa)).call(g.fill,V.bgcolor)};a.mockAxis=function(T,V,X,ba){X=c.extendFlat({},X,ba);w(X,V,T);return X};a.mockCartesianAxis=function(T,V,X){var ba=this,aa=X._id,ka=
c.extendFlat({type:"linear"},X);t(ka,T);var ha={x:[0,2],y:[1,3]};ka.setRange=function(){var ca=ba.sectorBBox,sa=ha[aa],ma=ba.radialAxis._rl;ma=(ma[1]-ma[0])/(1-V.hole);ka.range=[ca[sa[0]]*ma,ca[sa[1]]*ma]};ka.isPtWithinRange="x"===aa?function(ca){return ba.isPtInside(ca)}:function(){return!0};ka.setRange();ka.setScale();return ka};a.doAutoRange=function(T,V){var X=this.gd;T=this.radialAxis;V=V.radialaxis;T.setScale();x(X,T);X=T.range;V.range=X.slice();V._input.range=X.slice();T._rl=[T.r2l(X[0],null,
"gregorian"),T.r2l(X[1],null,"gregorian")]};a.updateRadialAxis=function(T,V){var X=this,ba=X.gd;T=X.layers;var aa=X.radius,ka=X.innerRadius,ha=X.cx,ca=X.cy,sa=V.radialaxis,ma=S(V.sector[0],360),ra=X.radialAxis;V=ka<aa;X.fillViewInitialKey("radialaxis.angle",sa.angle);X.fillViewInitialKey("radialaxis.range",ra.range.slice());ra.setGeometry();"auto"===ra.tickangle&&90<ma&&270>=ma&&(ra.tickangle=180);ma=function(ua){return"translate("+(ra.l2p(ua.x)+ka)+",0)"};var qa=function(ua){return X.pathArc(ra.r2p(ua.x)+
ka)},Y=n(sa);X.radialTickLayout!==Y&&(T["radial-axis"].selectAll(".xtick").remove(),X.radialTickLayout=Y);if(V){ra.setScale();Y=r.calcTicks(ra);var pa=r.clipEnds(ra,Y),oa=r.getTickSigns(ra)[2];r.drawTicks(ba,ra,{vals:Y,layer:T["radial-axis"],path:r.makeTickPath(ra,0,oa),transFn:ma,crisp:!1});r.drawGrid(ba,ra,{vals:pa,layer:T["radial-grid"],path:qa,transFn:c.noop,crisp:!1});r.drawLabels(ba,ra,{vals:Y,layer:T["radial-axis"],transFn:ma,labelFns:r.makeLabelFns(ra,0)})}ba=X.radialAxisAngle=X.vangles?O(m(R(sa.angle),
X.vangles)):sa.angle;ha=b(ha,ca);ca=ha+k(-ba);f(T["radial-axis"],V&&(sa.showticklabels||sa.ticks),{transform:ca});f(T["radial-grid"],V&&sa.showgrid,{transform:ha});f(T["radial-line"].select("line"),V&&sa.showline,{x1:ka,y1:0,x2:aa,y2:0,transform:ca}).attr("stroke-width",sa.linewidth).call(g.stroke,sa.linecolor)};a.updateRadialAxisTitle=function(T,V,X){T=this.gd;var ba=this.radius,aa=this.cx,ka=this.cy;V=V.radialaxis;var ha=this.id+"title";X=void 0!==X?X:this.radialAxisAngle;var ca=R(X),sa=Math.cos(ca);
ca=Math.sin(ca);var ma=0;if(V.title){ma=d.bBox(this.layers["radial-axis"].node()).height;var ra=V.title.font.size;ma="counterclockwise"===V.side?-ma-.4*ra:ma+.8*ra}this.layers["radial-axis-title"]=F.draw(T,ha,{propContainer:V,propName:this.id+".radialaxis.title",placeholder:Q(T,"Click to enter radial axis title"),attributes:{x:aa+ba/2*sa+ma*ca,y:ka-ba/2*ca+ma*sa,"text-anchor":"middle"},transform:{rotate:-X}})};a.updateAngularAxis=function(T,V){var X=this;T=X.gd;var ba=X.layers,aa=X.radius,ka=X.innerRadius,
ha=X.cx,ca=X.cy,sa=V.angularaxis,ma=X.angularAxis;X.fillViewInitialKey("angularaxis.rotation",sa.rotation);ma.setGeometry();ma.setScale();var ra=function(za){return ma.t2g(za.x)};"linear"===ma.type&&"radians"===ma.thetaunit&&(ma.tick0=O(ma.tick0),ma.dtick=O(ma.dtick));var qa=function(za){return b(ha+aa*Math.cos(za),ca-aa*Math.sin(za))},Y=function(za){return qa(ra(za))},pa=function(za){za=ra(za);return qa(za)+k(-O(za))},oa=function(za){var Ba=ra(za);za=Math.cos(Ba);Ba=Math.sin(Ba);return"M"+[ha+ka*
za,ca-ka*Ba]+"L"+[ha+aa*za,ca-aa*Ba]},ua=r.makeLabelFns(ma,0).labelStandoff,ya={xFn:function(za){za=ra(za);return Math.cos(za)*ua},yFn:function(za){var Ba=ra(za);return-Math.sin(Ba)*(ua+za.fontSize*(0<Math.sin(Ba)?.2:1))+Math.abs(Math.cos(Ba))*za.fontSize*M},anchorFn:function(za){za=ra(za);za=Math.cos(za);return.1>Math.abs(za)?"middle":0<za?"start":"end"},heightFn:function(za,Ba,Ma){za=ra(za);return-.5*(1+Math.sin(za))*Ma}},ja=n(sa);X.angularTickLayout!==ja&&(ba["angular-axis"].selectAll("."+ma._id+
"tick").remove(),X.angularTickLayout=ja);ja=r.calcTicks(ma);"linear"===V.gridshape?(V=ja.map(ra),0>c.angleDelta(V[0],V[1])&&(V=V.slice().reverse())):V=null;X.vangles=V;"category"===ma.type&&(ja=ja.filter(function(za){return c.isAngleInsideSector(ra(za),X.sectorInRad)}));ma.visible&&(V="inside"===ma.ticks?-1:1,r.drawTicks(T,ma,{vals:ja,layer:ba["angular-axis"],path:"M"+(ma.linewidth||1)/2*V+",0h"+V*ma.ticklen,transFn:pa,crisp:!1}),r.drawGrid(T,ma,{vals:ja,layer:ba["angular-grid"],path:oa,transFn:c.noop,
crisp:!1}),r.drawLabels(T,ma,{vals:ja,layer:ba["angular-axis"],repositionOnUpdate:!0,transFn:Y,labelFns:ya}));f(ba["angular-line"].select("path"),sa.showline,{d:X.pathSubplot(),transform:b(ha,ca)}).attr("stroke-width",sa.linewidth).call(g.stroke,sa.linecolor)};a.updateFx=function(T,V){this.gd._context.staticPlot||(this.updateAngularDrag(T),this.updateRadialDrag(T,V,0),this.updateRadialDrag(T,V,1),this.updateMainDrag(T))};a.updateMainDrag=function(T){function V(Va,db){return Math.sqrt(Va*Va+db*db)}
function X(Va,db){return[Va*Math.cos(db),Va*Math.sin(-db)]}function ba(Va,db){if(0===Va)return pa.pathSector(2*Ua);var qb=Ea/Va,Kb=db-qb;db+=qb;qb=Math.max(0,Math.min(Va,za));Va=qb-Ua;qb+=Ua;return"M"+X(Va,Kb)+"A"+[Va,Va]+" 0,0,0 "+X(Va,db)+"L"+X(qb,db)+"A"+[qb,qb]+" 0,0,1 "+X(qb,Kb)+"Z"}function aa(Va,db,qb){if(0===Va)return pa.pathSector(2*Ua);db=X(Va,db);qb=X(Va,qb);Va=cb((db[0]+qb[0])/2);qb=cb((db[1]+qb[1])/2);if(Va&&qb){db=qb/Va;var Kb=-1/db;Va=mb(Ua,db,Va,qb);db=mb(Ea,Kb,Va[0][0],Va[0][1]);
Va=mb(Ea,Kb,Va[1][0],Va[1][1])}else{if(qb){Kb=Ea;var Ob=Ua}else Kb=Ua,Ob=Ea;db=[[Va-Kb,qb-Ob],[Va+Kb,qb-Ob]];Va=[[Va-Kb,qb+Ob],[Va+Kb,qb+Ob]]}return"M"+db.join("L")+"L"+Va.reverse().join("L")+"Z"}function ka(Va,db){db=Math.max(Math.min(db,za),Ba);Va<ja?Va=0:za-Va<ja?Va=za:db<ja?db=0:za-db<ja&&(db=za);if(Math.abs(db-Va)>ya)return Va<db?(Sa=Va,fb=db):(Sa=db,fb=Va),!0;fb=Sa=null;return!1}function ha(Va,db){Va=Va||nb;db=db||"M0,0Z";Qa.attr("d",Va);gb.attr("d",db);y.transitionZoombox(Qa,gb,Ha,Ca);Ha=!0;
Va={};qa(Va);oa.emit("plotly_relayouting",Va)}function ca(Va,db){Va=Wa+Va;var qb=Ja+db;db=V(Wa-Ia,Ja-Pa);Va=Math.min(V(Va-Ia,qb-Pa),za);qb=Math.atan2(Pa-Ja,Wa-Ia);if(ka(db,Va)){var Kb=nb+pa.pathSector(fb);Sa&&(Kb+=pa.pathSector(Sa));var Ob=ba(Sa,qb)+ba(fb,qb)}ha(Kb,Ob)}function sa(Va,db,qb,Kb){Va=L.findIntersectionXY(qb,Kb,qb,[Va-Ia,Pa-db]);return V(Va[0],Va[1])}function ma(Va,db){Va=Wa+Va;var qb=Ja+db,Kb=Math.atan2(Pa-qb,Va-Ia);db=Ka(Math.atan2(Pa-Ja,Wa-Ia),Na);var Ob=Ka(Kb,Na);Kb=sa(Wa,Ja,db[0],
db[1]);Va=Math.min(sa(Va,qb,Ob[0],Ob[1]),za);if(ka(Kb,Va)){var cc=nb+pa.pathSector(fb);Sa&&(cc+=pa.pathSector(Sa));var kc=[aa(Sa,db[0],db[1]),aa(fb,db[0],db[1])].join(" ")}ha(cc,kc)}function ra(){y.removeZoombox(oa);if(null!==Sa&&null!==fb){var Va={};qa(Va);y.showDoubleClickNotifier(oa);l.call("_guiRelayout",oa,Va)}}function qa(Va){var db=$a._rl,qb=(db[1]-db[0])/(1-Ba/za)/za;Va[pa.id+".radialaxis.range"]=[db[0]+(Sa-Ba)*qb,db[0]+(fb-Ba)*qb]}function Y(Va,db){var qb=oa._fullLayout.clickmode;y.removeZoombox(oa);
if(2===Va){var Kb={},Ob;for(Ob in pa.viewInitial)Kb[pa.id+"."+Ob]=pa.viewInitial[Ob];oa.emit("plotly_doubleclick",null);l.call("_guiRelayout",oa,Kb)}-1<qb.indexOf("select")&&1===Va&&u(db,oa,[pa.xaxis],[pa.yaxis],pa.id,ab);-1<qb.indexOf("event")&&z.click(oa,db,pa.id)}var pa=this,oa=pa.gd,ua=T._zoomlayer,ya=E.MINZOOM,ja=E.OFFEDGE,za=pa.radius,Ba=pa.innerRadius,Ma=pa.cx,Oa=pa.cy,Ia=pa.cxx,Pa=pa.cyy,Fa=pa.sectorInRad,Na=pa.vangles,$a=pa.radialAxis,cb=L.clampTiny,mb=L.findXYatLength,Ka=L.findEnclosingVertexAngles,
Ua=E.cornerHalfWidth,Ea=E.cornerLen/2,Ya=y.makeDragger(pa.layers,"path","maindrag","crosshair");e.select(Ya).attr("d",pa.pathSubplot()).attr("transform",b(Ma,Oa));var ab={element:Ya,gd:oa,subplot:pa.id,plotinfo:{id:pa.id,xaxis:pa.xaxis,yaxis:pa.yaxis},xaxes:[pa.xaxis],yaxes:[pa.yaxis]},Wa,Ja,Sa,fb,nb,Ha,Ca,Qa,gb;ab.prepFn=function(Va,db,qb){var Kb=oa._fullLayout.dragmode,Ob=Ya.getBoundingClientRect();Wa=db-Ob.left;Ja=qb-Ob.top;Na&&(Ob=L.findPolygonOffset(za,Fa[0],Fa[1],Na),Wa+=Ia+Ob[0],Ja+=Pa+Ob[1]);
switch(Kb){case "zoom":ab.moveFn=Na?ma:ca;ab.clickFn=Y;ab.doneFn=ra;fb=Sa=null;nb=pa.pathSubplot();Ha=!1;Ca=h(oa._fullLayout[pa.id].bgcolor).getLuminance();Qa=y.makeZoombox(ua,Ca,Ma,Oa,nb);Qa.attr("fill-rule","evenodd");gb=y.makeCorners(ua,Ma,Oa);B(oa);break;case "select":case "lasso":D(Va,db,qb,ab,Kb)}};Ya.onmousemove=function(Va){z.hover(oa,Va,pa.id);oa._fullLayout._lasthover=Ya;oa._fullLayout._hoversubplot=pa.id};Ya.onmouseout=function(Va){oa._dragging||A.unhover(oa,Va)};A.init(ab)};a.updateRadialDrag=
function(T,V,X){function ba(mb,Ka){Na?Na(mb,Ka):(mb=[mb,-Ka],mb=Math.abs(c.dot(mb,[Math.cos(ya),Math.sin(ya)])/Math.sqrt(c.dot(mb,mb))),isNaN(mb)||(Na=.5>mb?ka:ha));mb={};null!==$a?mb[ca.id+".radialaxis.angle"]=$a:null!==cb&&(mb[ca.id+".radialaxis.range["+X+"]"]=cb);sa.emit("plotly_relayouting",mb)}function aa(){null!==$a?l.call("_guiRelayout",sa,ca.id+".radialaxis.angle",$a):null!==cb&&l.call("_guiRelayout",sa,ca.id+".radialaxis.range["+X+"]",cb)}function ka(mb,Ka){0!==X&&($a=Math.atan2(Y-(Pa+Ka),
Ia+mb-qa),ca.vangles&&($a=m($a,ca.vangles)),$a=O($a),mb=b(qa,Y)+k(-$a),ma["radial-axis"].attr("transform",mb),ma["radial-line"].select("line").attr("transform",mb),mb=ca.gd._fullLayout,ca.updateRadialAxisTitle(mb,mb[ca.id],$a))}function ha(mb,Ka){mb=c.dot([mb,-Ka],[Math.cos(ya),Math.sin(ya)]);cb=Ma-Oa*mb;if(0<Oa!==(X?cb>za:cb<Ba))cb=null;else{Ka=sa._fullLayout;mb=Ka[ca.id];pa.range[X]=cb;pa._rl[X]=cb;ca.updateRadialAxis(Ka,mb);ca.xaxis.setRange();ca.xaxis.setScale();ca.yaxis.setRange();ca.yaxis.setScale();
Ka=!1;for(var Ua in ca.traceHash){var Ea=ca.traceHash[Ua],Ya=c.filterVisible(Ea);Ea[0][0].trace._module.plot(sa,ca,Ya,mb);l.traceIs(Ua,"gl")&&Ya.length&&(Ka=!0)}Ka&&(J(sa),N(sa))}}var ca=this,sa=ca.gd,ma=ca.layers;T=ca.radius;var ra=ca.innerRadius,qa=ca.cx,Y=ca.cy,pa=ca.radialAxis,oa=E.radialDragBoxSize,ua=oa/2;if(pa.visible){var ya=R(ca.radialAxisAngle),ja=pa._rl,za=ja[0],Ba=ja[1],Ma=ja[X],Oa=.75*(ja[1]-ja[0])/(1-V.hole)/T;if(X){var Ia=qa+(T+ua)*Math.cos(ya);var Pa=Y-(T+ua)*Math.sin(ya);V="radialdrag"}else Ia=
qa+(ra-ua)*Math.cos(ya),Pa=Y-(ra-ua)*Math.sin(ya),V="radialdrag-inner";V=y.makeRectDragger(ma,V,"crosshair",-ua,-ua,oa,oa);var Fa={element:V,gd:sa};f(e.select(V),pa.visible&&ra<T,{transform:b(Ia,Pa)});var Na,$a,cb;Fa.prepFn=function(){cb=$a=Na=null;Fa.moveFn=ba;Fa.doneFn=aa;B(sa)};Fa.clampFn=function(mb,Ka){Math.sqrt(mb*mb+Ka*Ka)<E.MINDRAG&&(Ka=mb=0);return[mb,Ka]};A.init(Fa)}};a.updateAngularDrag=function(T){function V(Na,$a){var cb=aa.gd._fullLayout,mb=cb[aa.id],Ka=O(Math.atan2(Y+pa-(Ma+$a),Ba+
Na-qa-pa)-Fa);Ia=Oa+Ka;ha.frontplot.attr("transform",b(aa.xOffset2,aa.yOffset2)+k([-Ka,qa,Y]));aa.vangles?(Pa=aa.radialAxisAngle+Ka,Na=b(ma,ra)+k(-Ka),$a=b(ma,ra)+k(-Pa),ha.bg.attr("transform",Na),ha["radial-grid"].attr("transform",Na),ha["radial-axis"].attr("transform",$a),ha["radial-line"].select("line").attr("transform",$a),aa.updateRadialAxisTitle(cb,mb,Pa)):aa.clipPaths.forTraces.select("path").attr("transform",b(qa,Y)+k(Ka));ja.each(function(){var Ea=e.select(this),Ya=d.getTranslate(Ea);Ea.attr("transform",
b(Ya.x,Ya.y)+k([Ka]))});za.each(function(){var Ea=e.select(this),Ya=Ea.select("text"),ab=d.getTranslate(Ea);Ea.attr("transform",k([Ka,Ya.attr("x"),Ya.attr("y")])+b(ab.x,ab.y))});sa.rotation=c.modHalf(Ia,360);aa.updateAngularAxis(cb,mb);aa._hasClipOnAxisFalse&&!c.isFullCircle(aa.sectorInRad)&&ya.call(d.hideOutsideRangePoints,aa);cb=!1;for(var Ua in aa.traceHash)l.traceIs(Ua,"gl")&&(Na=aa.traceHash[Ua],$a=c.filterVisible(Na),Na[0][0].trace._module.plot(ka,aa,$a,mb),$a.length&&(cb=!0));cb&&(J(ka),N(ka));
mb={};X(mb);ka.emit("plotly_relayouting",mb)}function X(Na){Na[aa.id+".angularaxis.rotation"]=Ia;aa.vangles&&(Na[aa.id+".radialaxis.angle"]=Pa)}function ba(){za.select("text").attr("transform",null);var Na={};X(Na);l.call("_guiRelayout",ka,Na)}var aa=this,ka=aa.gd,ha=aa.layers,ca=aa.radius,sa=aa.angularAxis,ma=aa.cx,ra=aa.cy,qa=aa.cxx,Y=aa.cyy,pa=E.angularDragBoxSize,oa=y.makeDragger(ha,"path","angulardrag","move"),ua={element:oa,gd:ka};e.select(oa).attr("d",aa.pathAnnulus(ca,ca+pa)).attr("transform",
b(ma,ra)).call(I,"move");var ya=ha.frontplot.select(".scatterlayer").selectAll(".trace"),ja=ya.selectAll(".point"),za=ya.selectAll(".textpoint"),Ba,Ma,Oa,Ia,Pa,Fa;ua.prepFn=function(Na,$a,cb){Oa=T[aa.id].angularaxis.rotation;Na=oa.getBoundingClientRect();Ba=$a-Na.left;Ma=cb-Na.top;Fa=Math.atan2(Y+pa-Ma,Ba-qa-pa);ua.moveFn=V;ua.doneFn=ba;B(ka)};aa.vangles&&!c.isFullCircle(aa.sectorInRad)&&(ua.prepFn=c.noop,I(e.select(oa),null));A.init(ua)};a.isPtInside=function(T){var V=this.sectorInRad,X=this.vangles,
ba=this.angularAxis.c2g(T.theta),aa=this.radialAxis;T=aa.c2l(T.r);return(X?L.isPtInsidePolygon:c.isPtInsideSector)(T,ba,aa._rl,V,X)};a.pathArc=function(T){var V=this.sectorInRad,X=this.vangles;return(X?L.pathPolygon:c.pathArc)(T,V[0],V[1],X)};a.pathSector=function(T){var V=this.sectorInRad,X=this.vangles;return(X?L.pathPolygon:c.pathSector)(T,V[0],V[1],X)};a.pathAnnulus=function(T,V){var X=this.sectorInRad,ba=this.vangles;return(ba?L.pathPolygonAnnulus:c.pathAnnulus)(T,V,X[0],X[1],ba)};a.pathSubplot=
function(){var T=this.innerRadius,V=this.radius;return T?this.pathAnnulus(T,V):this.pathSector(V)};a.fillViewInitialKey=function(T,V){T in this.viewInitial||(this.viewInitial[T]=V)}},{"../../components/color":615,"../../components/dragelement":634,"../../components/drawing":637,"../../components/fx":655,"../../components/titles":710,"../../constants/alignment":717,"../../lib":750,"../../lib/clear_gl_canvases":734,"../../lib/setcursor":770,"../../plot_api/subroutines":789,"../../plots/cartesian/axes":799,
"../../registry":882,"../cartesian/autorange":798,"../cartesian/dragbox":807,"../cartesian/select":818,"../cartesian/set_convert":819,"../plots":862,"./constants":863,"./helpers":864,"./set_convert":875,d3:169,tinycolor2:548}],875:[function(a,G,C){function q(e,h){var l=h._subplot;e.setGeometry=function(){var c=e._rl[0],g=e._rl[1],d=l.innerRadius,p=(l.radius-d)/(g-c),r=d/p,t=c>g?function(w){return 0>=w}:function(w){return 0<=w};e.c2g=function(w){w=e.c2l(w)-c;return(t(w)?w:0)+r};e.g2c=function(w){return e.l2c(w+
c-r)};e.g2p=function(w){return w*p};e.c2p=function(w){return e.g2p(e.c2g(w))}}}function n(e,h){var l=e.type;if("linear"===l){var c=e.d2c,g=e.c2d;e.d2c=function(d,p){d=c(d);return"degrees"===p?b(d):d};e.c2d=function(d,p){d="degrees"===p?k(d):d;return g(d)}}e.makeCalcdata=function(d,p){var r=d[p],t=d._length,w;if(r){if(m.isTypedArray(r)&&"linear"===l){if(t===r.length)return r;if(r.subarray)return r.subarray(0,t)}p=Array(t);for(w=0;w<t;w++)p[w]=e.d2c(r[w],d.thetaunit)}else for(w=p+"0",p="d"+p,r=(w in
d)?e.d2c(d[w],d.thetaunit):0,d=d[p]?e.d2c(d[p],d.thetaunit):(e.period||2*Math.PI)/t,p=Array(t),w=0;w<t;w++)p[w]=r+w*d;return p};e.setGeometry=function(){var d=h.sector,p=d.map(b),r={clockwise:-1,counterclockwise:1}[e.direction],t=b(e.rotation),w=function(D){return(D-t)/r},x;switch(l){case "linear":var y=x=m.identity;var A=b;var z=k;e.range=m.isFullCircle(p)?[d[0],d[0]+360]:p.map(w).map(k);break;case "category":d=e._categories.length;var F=e.period?Math.max(e.period,d):d;0===F&&(F=1);y=A=function(D){return 2*
D*Math.PI/F};x=z=function(D){return D*F/Math.PI/2};e.range=[0,F]}e.c2g=function(D){return r*y(D)+t};e.g2c=function(D){return x(w(D))};e.t2g=function(D){return r*A(D)+t};e.g2t=function(D){return z(w(D))}}}var m=a("../../lib"),f=a("../cartesian/set_convert"),b=m.deg2rad,k=m.rad2deg;G.exports=function(e,h,l){f(e,l);switch(e._id){case "x":case "radialaxis":q(e,h);break;case "angularaxis":n(e,h)}}},{"../../lib":750,"../cartesian/set_convert":819}],876:[function(a,G,C){var q=a("../lib"),n=a("../plot_api/plot_template"),
m=a("./domain").defaults;G.exports=function(f,b,k,e){function h(A,z){return q.coerce(r,t,l,A,z)}var l=e.attributes;k=e.handleDefaults;for(var c=e.partition||"x",g=b._subplots[e.type],d=g.length,p=d&&g[0].replace(/\d+$/,""),r,t,w=0;w<d;w++){var x=g[w];r=f[x]?f[x]:f[x]={};t=n.newContainer(b,x,p);h("uirevision",b.uirevision);var y={};y[c]=[w/d,(w+1)/d];m(t,b,h,y);e.id=x;k(r,t,h,e)}}},{"../lib":750,"../plot_api/plot_template":788,"./domain":826}],877:[function(a,G,C){function q(n){var m=n.description?
" "+n.description:"";n=n.keys||[];if(0<n.length){m=[];for(var f=0;f<n.length;f++)m[f]="`"+n[f]+"`";m=1===n.length?"variable "+m[0]:"variables "+m.slice(0,-1).join(", ")+" and "+m.slice(-1)+"."}return m}G=a("../constants/docs").FORMAT_LINK;a=a("../constants/docs").DATE_FORMAT_LINK;['Variables are inserted using %{variable}, for example "y: %{y}". Numbers are formatted using d3-format\'s syntax %{variable:d3-format}, for example "Price: %{y:$.2f}".',G,'for details on the formatting syntax. Dates are formatted using d3-time-format\'s syntax %{variable|d3-time-format}, for example "Day: %{2019-01-01|%A}".',
a,"for details on the date formatting syntax."].join(" ");C.hovertemplateAttrs=function(n,m){n=n||{};m=m||{};q(m);m={valType:"string",dflt:"",editType:n.editType||"none"};!1!==n.arrayOk&&(m.arrayOk=!0);return m};C.texttemplateAttrs=function(n,m){n=n||{};m=m||{};q(m);m={valType:"string",dflt:"",editType:n.editType||"calc"};!1!==n.arrayOk&&(m.arrayOk=!0);return m}},{"../constants/docs":720}],878:[function(a,G,C){var q=a("./ternary"),n=a("../../plots/get_data").getSubplotCalcData;G=a("../../lib").counterRegex;
C.name="ternary";var m=C.attr="subplot";C.idRoot="ternary";C.idRegex=C.attrRegex=G("ternary");(C.attributes={})[m]={valType:"subplotid",dflt:"ternary",editType:"calc"};C.layoutAttributes=a("./layout_attributes");C.supplyLayoutDefaults=a("./layout_defaults");C.plot=function(f){for(var b=f._fullLayout,k=f.calcdata,e=b._subplots.ternary,h=0;h<e.length;h++){var l=e[h],c=n(k,"ternary",l),g=b[l]._subplot;g||(g=new q({id:l,graphDiv:f,container:b._ternarylayer.node()},b),b[l]._subplot=g);g.plot(c,b,f._promises)}};
C.clean=function(f,b,k,e){f=e._subplots.ternary||[];for(k=0;k<f.length;k++){var h=f[k],l=e[h]._subplot;!b[h]&&l&&(l.plotContainer.remove(),l.clipDef.remove(),l.clipDefRelative.remove(),l.layers["a-title"].remove(),l.layers["b-title"].remove(),l.layers["c-title"].remove())}}},{"../../lib":750,"../../plots/get_data":836,"./layout_attributes":879,"./layout_defaults":880,"./ternary":881}],879:[function(a,G,C){C=a("../../components/color/attributes");var q=a("../domain").attributes,n=a("../cartesian/layout_attributes"),
m=a("../../plot_api/edit_types").overrideAll;a=a("../../lib/extend").extendFlat;a={title:{text:n.title.text,font:n.title.font},color:n.color,tickmode:n.tickmode,nticks:a({},n.nticks,{dflt:6,min:1}),tick0:n.tick0,dtick:n.dtick,tickvals:n.tickvals,ticktext:n.ticktext,ticks:n.ticks,ticklen:n.ticklen,tickwidth:n.tickwidth,tickcolor:n.tickcolor,showticklabels:n.showticklabels,showtickprefix:n.showtickprefix,tickprefix:n.tickprefix,showticksuffix:n.showticksuffix,ticksuffix:n.ticksuffix,showexponent:n.showexponent,
exponentformat:n.exponentformat,minexponent:n.minexponent,separatethousands:n.separatethousands,tickfont:n.tickfont,tickangle:n.tickangle,tickformat:n.tickformat,tickformatstops:n.tickformatstops,hoverformat:n.hoverformat,showline:a({},n.showline,{dflt:!0}),linecolor:n.linecolor,linewidth:n.linewidth,showgrid:a({},n.showgrid,{dflt:!0}),gridcolor:n.gridcolor,gridwidth:n.gridwidth,layer:n.layer,min:{valType:"number",dflt:0,min:0},_deprecated:{title:n._deprecated.title,titlefont:n._deprecated.titlefont}};
G=G.exports=m({domain:q({name:"ternary"}),bgcolor:{valType:"color",dflt:C.background},sum:{valType:"number",dflt:1,min:0},aaxis:a,baxis:a,caxis:a},"plot","from-root");G.uirevision={valType:"any",editType:"none"};G.aaxis.uirevision=G.baxis.uirevision=G.caxis.uirevision={valType:"any",editType:"none"}},{"../../components/color/attributes":614,"../../lib/extend":740,"../../plot_api/edit_types":781,"../cartesian/layout_attributes":813,"../domain":826}],880:[function(a,G,C){function q(p,r,t,w){var x=t("bgcolor");
t=t("sum");w.bgColor=m.combine(x,w.paper_bgcolor);for(var y,A,z=0;z<d.length;z++)x=d[z],y=p[x]||{},A=f.newContainer(r,x),A._name=x,n(y,A,w,r);w=r.aaxis;x=r.baxis;r=r.caxis;w.min+x.min+r.min>=t&&(w.min=0,x.min=0,r.min=0,p.aaxis&&delete p.aaxis.min,p.baxis&&delete p.baxis.min,p.caxis&&delete p.caxis.min)}function n(p,r,t,w){function x(u,B){return b.coerce(p,r,y,u,B)}var y=g[r._name];x("uirevision",w.uirevision);r.type="linear";w=x("color");var A=w!==y.color.dflt?w:t.font.color,z=r._name.charAt(0).toUpperCase(),
F="Component "+z,D=x("title.text",F);r._hovertitle=D===F?D:z;b.coerceFont(x,"title.font",{family:t.font.family,size:Math.round(1.2*t.font.size),color:A});x("min");l(p,r,x,"linear");e(p,r,x,"linear",{});h(p,r,x,{outerTicks:!0});x("showticklabels")&&(b.coerceFont(x,"tickfont",{family:t.font.family,size:t.font.size,color:A}),x("tickangle"),x("tickformat"));c(p,r,x,{dfltColor:w,bgColor:t.bgColor,blend:60,showLine:!0,showGrid:!0,noZeroLine:!0,attributes:y});x("hoverformat");x("layer")}var m=a("../../components/color"),
f=a("../../plot_api/plot_template"),b=a("../../lib"),k=a("../subplot_defaults"),e=a("../cartesian/tick_label_defaults"),h=a("../cartesian/tick_mark_defaults"),l=a("../cartesian/tick_value_defaults"),c=a("../cartesian/line_grid_defaults"),g=a("./layout_attributes"),d=["aaxis","baxis","caxis"];G.exports=function(p,r,t){k(p,r,t,{type:"ternary",attributes:g,handleDefaults:q,font:r.font,paper_bgcolor:r.paper_bgcolor})}},{"../../components/color":615,"../../lib":750,"../../plot_api/plot_template":788,"../cartesian/line_grid_defaults":815,
"../cartesian/tick_label_defaults":820,"../cartesian/tick_mark_defaults":821,"../cartesian/tick_value_defaults":822,"../subplot_defaults":876,"./layout_attributes":879}],881:[function(a,G,C){function q(E,L){this.id=E.id;this.graphDiv=E.graphDiv;this.init(L);this.makeFramework(L);this.cTickLayout=this.bTickLayout=this.aTickLayout=null}function n(E){m.select(E).selectAll(".zoombox,.js-zoombox-backdrop,.js-zoombox-menu,.zoombox-corners").remove()}var m=a("d3"),f=a("tinycolor2"),b=a("../../registry"),
k=a("../../lib"),e=k._,h=a("../../components/color"),l=a("../../components/drawing"),c=a("../cartesian/set_convert"),g=a("../../lib/extend").extendFlat,d=a("../plots"),p=a("../cartesian/axes"),r=a("../../components/dragelement"),t=a("../../components/fx");C=a("../../components/dragelement/helpers");var w=C.freeMode,x=C.rectMode,y=a("../../components/titles"),A=a("../cartesian/select").prepSelect,z=a("../cartesian/select").selectOnClick,F=a("../cartesian/select").clearSelect,D=a("../cartesian/select").clearSelectionsCache,
u=a("../cartesian/constants");G.exports=q;a=q.prototype;a.init=function(E){this.container=E._ternarylayer;this.defs=E._defs;this.layoutId=E._uid;this.traceHash={};this.layers={}};a.plot=function(E,L){var Q=L[this.id];L=L._size;this._hasClipOnAxisFalse=!1;for(var S=0;S<E.length;S++)if(!1===E[S][0].trace.cliponaxis){this._hasClipOnAxisFalse=!0;break}this.updateLayers(Q);this.adjustLayout(Q,L);d.generalUpdatePerTraceModule(this.graphDiv,this,E,Q);this.layers.plotbg.select("path").call(h.fill,Q.bgcolor)};
a.makeFramework=function(E){var L=this.graphDiv,Q=E[this.id],S=this.clipId="clip"+this.layoutId+this.id,R=this.clipIdRelative="clip-relative"+this.layoutId+this.id;this.clipDef=k.ensureSingleById(E._clips,"clipPath",S,function(O){O.append("path").attr("d","M0,0Z")});this.clipDefRelative=k.ensureSingleById(E._clips,"clipPath",R,function(O){O.append("path").attr("d","M0,0Z")});this.plotContainer=k.ensureSingle(this.container,"g",this.id);this.updateLayers(Q);l.setClipUrl(this.layers.backplot,S,L);l.setClipUrl(this.layers.grids,
S,L)};a.updateLayers=function(E){var L=this.layers,Q=["draglayer","plotbg","backplot","grids"];"below traces"===E.aaxis.layer&&Q.push("aaxis","aline");"below traces"===E.baxis.layer&&Q.push("baxis","bline");"below traces"===E.caxis.layer&&Q.push("caxis","cline");Q.push("frontplot");"above traces"===E.aaxis.layer&&Q.push("aaxis","aline");"above traces"===E.baxis.layer&&Q.push("baxis","bline");"above traces"===E.caxis.layer&&Q.push("caxis","cline");E=this.plotContainer.selectAll("g.toplevel").data(Q,
String);var S=["agrid","bgrid","cgrid"];E.enter().append("g").attr("class",function(R){return"toplevel "+R}).each(function(R){var O=m.select(this);L[R]=O;"frontplot"===R?O.append("g").classed("scatterlayer",!0):"backplot"===R?O.append("g").classed("maplayer",!0):"plotbg"===R?O.append("path").attr("d","M0,0Z"):"aline"===R||"bline"===R||"cline"===R?O.append("path"):"grids"===R&&S.forEach(function(T){L[T]=O.append("g").classed("grid "+T,!0)})});E.order()};var B=Math.sqrt(4/3);a.adjustLayout=function(E,
L){var Q=this,S=E.domain,R=(S.x[0]+S.x[1])/2,O=(S.y[0]+S.y[1])/2,T=S.x[1]-S.x[0],V=S.y[1]-S.y[0],X=T*L.w,ba=V*L.h,aa=E.sum,ka=E.aaxis.min,ha=E.baxis.min,ca=E.caxis.min;if(X>B*ba){var sa=ba;S=sa*B}else S=X,sa=S/B;X=T*S/X;V=V*sa/ba;T=L.l+L.w*R-S/2;L=L.t+L.h*(1-O)-sa/2;Q.x0=T;Q.y0=L;Q.w=S;Q.h=sa;Q.sum=aa;Q.xaxis={type:"linear",range:[ka+2*ca-aa,aa-ka-2*ha],domain:[R-X/2,R+X/2],_id:"x"};c(Q.xaxis,Q.graphDiv._fullLayout);Q.xaxis.setScale();Q.xaxis.isPtWithinRange=function(ma){return ma.a>=Q.aaxis.range[0]&&
ma.a<=Q.aaxis.range[1]&&ma.b>=Q.baxis.range[1]&&ma.b<=Q.baxis.range[0]&&ma.c>=Q.caxis.range[1]&&ma.c<=Q.caxis.range[0]};Q.yaxis={type:"linear",range:[ka,aa-ha-ca],domain:[O-V/2,O+V/2],_id:"y"};c(Q.yaxis,Q.graphDiv._fullLayout);Q.yaxis.setScale();Q.yaxis.isPtWithinRange=function(){return!0};X=Q.yaxis.domain[0];R=Q.aaxis=g({},E.aaxis,{range:[ka,aa-ha-ca],side:"left",tickangle:(+E.aaxis.tickangle||0)-30,domain:[X,X+V*B],anchor:"free",position:0,_id:"y",_length:S});c(R,Q.graphDiv._fullLayout);R.setScale();
O=Q.baxis=g({},E.baxis,{range:[aa-ka-ca,ha],side:"bottom",domain:Q.xaxis.domain,anchor:"free",position:0,_id:"x",_length:S});c(O,Q.graphDiv._fullLayout);O.setScale();E=Q.caxis=g({},E.caxis,{range:[aa-ka-ha,ca],side:"right",tickangle:(+E.caxis.tickangle||0)+30,domain:[X,X+V*B],anchor:"free",position:0,_id:"y",_length:S});c(E,Q.graphDiv._fullLayout);E.setScale();aa="M"+T+","+(L+sa)+"h"+S+"l-"+S/2+",-"+sa+"Z";Q.clipDef.select("path").attr("d",aa);Q.layers.plotbg.select("path").attr("d",aa);aa="M0,"+
sa+"h"+S+"l-"+S/2+",-"+sa+"Z";Q.clipDefRelative.select("path").attr("d",aa);aa="translate("+T+","+L+")";Q.plotContainer.selectAll(".scatterlayer,.maplayer").attr("transform",aa);Q.clipDefRelative.select("path").attr("transform",null);aa="translate("+(T-O._offset)+","+(L+sa)+")";Q.layers.baxis.attr("transform",aa);Q.layers.bgrid.attr("transform",aa);aa="translate("+(T+S/2)+","+L+")rotate(30)translate(0,"+-R._offset+")";Q.layers.aaxis.attr("transform",aa);Q.layers.agrid.attr("transform",aa);aa="translate("+
(T+S/2)+","+L+")rotate(-30)translate(0,"+-E._offset+")";Q.layers.caxis.attr("transform",aa);Q.layers.cgrid.attr("transform",aa);Q.drawAxes(!0);Q.layers.aline.select("path").attr("d",R.showline?"M"+T+","+(L+sa)+"l"+S/2+",-"+sa:"M0,0").call(h.stroke,R.linecolor||"#000").style("stroke-width",(R.linewidth||0)+"px");Q.layers.bline.select("path").attr("d",O.showline?"M"+T+","+(L+sa)+"h"+S:"M0,0").call(h.stroke,O.linecolor||"#000").style("stroke-width",(O.linewidth||0)+"px");Q.layers.cline.select("path").attr("d",
E.showline?"M"+(T+S/2)+","+L+"l"+S/2+","+sa:"M0,0").call(h.stroke,E.linecolor||"#000").style("stroke-width",(E.linewidth||0)+"px");Q.graphDiv._context.staticPlot||Q.initInteractions();l.setClipUrl(Q.layers.frontplot,Q._hasClipOnAxisFalse?null:Q.clipId,Q.graphDiv)};a.drawAxes=function(E){var L=this.graphDiv,Q=this.id.substr(7)+"title",S=this.layers,R=this.aaxis,O=this.baxis,T=this.caxis;this.drawAx(R);this.drawAx(O);this.drawAx(T);if(E){E=Math.max(R.showticklabels?R.tickfont.size/2:0,(T.showticklabels?
.75*T.tickfont.size:0)+("outside"===T.ticks?.87*T.ticklen:0));var V=(O.showticklabels?O.tickfont.size:0)+("outside"===O.ticks?O.ticklen:0)+3;S["a-title"]=y.draw(L,"a"+Q,{propContainer:R,propName:this.id+".aaxis.title",placeholder:e(L,"Click to enter Component A title"),attributes:{x:this.x0+this.w/2,y:this.y0-R.title.font.size/3-E,"text-anchor":"middle"}});S["b-title"]=y.draw(L,"b"+Q,{propContainer:O,propName:this.id+".baxis.title",placeholder:e(L,"Click to enter Component B title"),attributes:{x:this.x0-
V,y:this.y0+this.h+.83*O.title.font.size+V,"text-anchor":"middle"}});S["c-title"]=y.draw(L,"c"+Q,{propContainer:T,propName:this.id+".caxis.title",placeholder:e(L,"Click to enter Component C title"),attributes:{x:this.x0+this.w+V,y:this.y0+this.h+.83*T.title.font.size+V,"text-anchor":"middle"}})}};a.drawAx=function(E){var L=this.graphDiv,Q=E._name,S=Q.charAt(0),R=E._id;Q=this.layers[Q];var O=S+"tickLayout",T=E.ticks+String(E.ticklen)+String(E.showticklabels);this[O]!==T&&(Q.selectAll("."+R+"tick").remove(),
this[O]=T);E.setScale();R=p.calcTicks(E);O=p.clipEnds(E,R);T=p.makeTransFn(E);var V=p.getTickSigns(E)[2],X=k.deg2rad(30),ba=V*(E.linewidth||1)/2;V*=E.ticklen;var aa=this.w,ka=this.h;aa={a:"M0,0l"+ka+",-"+aa/2,b:"M0,0l-"+aa/2+",-"+ka,c:"M0,0l-"+ka+","+aa/2}[S];p.drawTicks(L,E,{vals:"inside"===E.ticks?O:R,layer:Q,path:"b"===S?"M0,"+ba+"l"+Math.sin(X)*V+","+Math.cos(X)*V:"M"+ba+",0l"+Math.cos(X)*V+","+-Math.sin(X)*V,transFn:T,crisp:!1});p.drawGrid(L,E,{vals:O,layer:this.layers[S+"grid"],path:aa,transFn:T,
crisp:!1});p.drawLabels(L,E,{vals:R,layer:Q,transFn:T,labelFns:p.makeLabelFns(E,0,30)})};G=u.MINZOOM/2+.87;var I="m-0.87,.5h"+G+"v3h-"+(G+5.2)+"l"+(G/2+2.6)+",-"+(.87*G+4.5)+"l2.6,1.5l-"+G/2+","+.87*G+"Z",J="m0.87,.5h-"+G+"v3h"+(G+5.2)+"l-"+(G/2+2.6)+",-"+(.87*G+4.5)+"l-2.6,1.5l"+G/2+","+.87*G+"Z",N="m0,1l"+G/2+","+.87*G+"l2.6,-1.5l-"+(G/2+2.6)+",-"+(.87*G+4.5)+"l-"+(G/2+2.6)+","+(.87*G+4.5)+"l2.6,1.5l"+G/2+",-"+.87*G+"Z",M=!0;a.clearSelect=function(){D(this.dragOptions);F(this.dragOptions.gd)};a.initInteractions=
function(){function E(oa){var ua={};ua[T.id+".aaxis.min"]=oa.a;ua[T.id+".baxis.min"]=oa.b;ua[T.id+".caxis.min"]=oa.c;return ua}function L(oa,ua){var ya=X._fullLayout.clickmode;n(X);2===oa&&(X.emit("plotly_doubleclick",null),b.call("_guiRelayout",X,E({a:0,b:0,c:0})));-1<ya.indexOf("select")&&1===oa&&z(ua,X,[T.xaxis],[T.yaxis],T.id,T.dragOptions);-1<ya.indexOf("event")&&t.click(X,ua,T.id)}function Q(oa,ua){var ya=aa+oa,ja=ka+ua;ua=Math.max(0,Math.min(1,1-ka/T.h,1-ja/T.h));oa=Math.max(0,Math.min(1,1-
(aa+(T.h-ka)/Math.sqrt(3))/T.w,1-(ya+(T.h-ja)/Math.sqrt(3))/T.w));ya=Math.max(0,Math.min(1,(aa-(T.h-ka)/Math.sqrt(3))/T.w,(ya-(T.h-ja)/Math.sqrt(3))/T.w));ja=(ua/2+ya)*T.w;var za=(1-ua/2-oa)*T.w,Ba=(ja+za)/2,Ma=za-ja,Oa=(1-ua)*T.h,Ia=Oa-Ma/B;Ma<u.MINZOOM?(sa=ha,Y.attr("d",ra),pa.attr("d","M0,0Z")):(sa={a:ha.a+ua*ca,b:ha.b+oa*ca,c:ha.c+ya*ca},Y.attr("d",ra+"M"+ja+","+Oa+"H"+za+"L"+Ba+","+Ia+"L"+ja+","+Oa+"Z"),pa.attr("d","M"+aa+","+ka+"m0.5,0.5h5v-2h-5v-5h-2v5h-5v2h5v5h2ZM"+ja+","+Oa+I+"M"+za+","+
Oa+J+"M"+Ba+","+Ia+N));qa||(Y.transition().style("fill",.2<ma?"rgba(0,0,0,0.4)":"rgba(255,255,255,0.3)").duration(200),pa.transition().style("opacity",1).duration(200),qa=!0);X.emit("plotly_relayouting",E(sa))}function S(){n(X);sa!==ha&&(b.call("_guiRelayout",X,E(sa)),M&&X.data&&X._context.showTips&&(k.notifier(e(X,"Double-click to zoom back out"),"long"),M=!1))}function R(oa,ua){var ya=oa/T.xaxis._m,ja=ua/T.yaxis._m;sa={a:ha.a-ja,b:ha.b+(ya+ja)/2,c:ha.c-(ya-ja)/2};ya=[sa.a,sa.b,sa.c].sort(k.sorterAsc);
ja=ya.indexOf(sa.a);var za=ya.indexOf(sa.b),Ba=ya.indexOf(sa.c);0>ya[0]&&(0>ya[1]+ya[0]/2?(ya[2]+=ya[0]+ya[1],ya[0]=ya[1]=0):(ya[2]+=ya[0]/2,ya[1]+=ya[0]/2,ya[0]=0),sa={a:ya[ja],b:ya[za],c:ya[Ba]},ua=(ha.a-sa.a)*T.yaxis._m,oa=(ha.c-sa.c-ha.b+sa.b)*T.xaxis._m);ya="translate("+(T.x0+oa)+","+(T.y0+ua)+")";T.plotContainer.selectAll(".scatterlayer,.maplayer").attr("transform",ya);oa="translate("+-oa+","+-ua+")";T.clipDefRelative.select("path").attr("transform",oa);T.aaxis.range=[sa.a,T.sum-sa.b-sa.c];
T.baxis.range=[T.sum-sa.a-sa.c,sa.b];T.caxis.range=[T.sum-sa.a-sa.b,sa.c];T.drawAxes(!1);T._hasClipOnAxisFalse&&T.plotContainer.select(".scatterlayer").selectAll(".trace").call(l.hideOutsideRangePoints,T);X.emit("plotly_relayouting",E(sa))}function O(){b.call("_guiRelayout",X,E(sa))}var T=this,V=T.layers.plotbg.select("path").node(),X=T.graphDiv,ba=X._fullLayout._zoomlayer;this.dragOptions={element:V,gd:X,plotinfo:{id:T.id,domain:X._fullLayout[T.id].domain,xaxis:T.xaxis,yaxis:T.yaxis},subplot:T.id,
prepFn:function(oa,ua,ya){T.dragOptions.xaxes=[T.xaxis];T.dragOptions.yaxes=[T.yaxis];var ja=T.dragOptions.dragmode=X._fullLayout.dragmode;w(ja)?T.dragOptions.minDrag=1:T.dragOptions.minDrag=void 0;"zoom"===ja?(T.dragOptions.moveFn=Q,T.dragOptions.clickFn=L,T.dragOptions.doneFn=S,oa=V.getBoundingClientRect(),aa=ua-oa.left,ka=ya-oa.top,sa=ha={a:T.aaxis.range[0],b:T.baxis.range[1],c:T.caxis.range[1]},ca=T.aaxis.range[1]-ha.a,ma=f(T.graphDiv._fullLayout[T.id].bgcolor).getLuminance(),ra="M0,"+T.h+"L"+
T.w/2+", 0L"+T.w+","+T.h+"Z",qa=!1,Y=ba.append("path").attr("class","zoombox").attr("transform","translate("+T.x0+", "+T.y0+")").style({fill:.2<ma?"rgba(0,0,0,0)":"rgba(255,255,255,0)","stroke-width":0}).attr("d",ra),pa=ba.append("path").attr("class","zoombox-corners").attr("transform","translate("+T.x0+", "+T.y0+")").style({fill:h.background,stroke:h.defaultLine,"stroke-width":1,opacity:0}).attr("d","M0,0Z"),T.clearSelect(X)):"pan"===ja?(T.dragOptions.moveFn=R,T.dragOptions.clickFn=L,T.dragOptions.doneFn=
O,sa=ha={a:T.aaxis.range[0],b:T.baxis.range[1],c:T.caxis.range[1]},T.clearSelect(X)):(x(ja)||w(ja))&&A(oa,ua,ya,T.dragOptions,ja)}};var aa,ka,ha,ca,sa,ma,ra,qa,Y,pa;V.onmousemove=function(oa){t.hover(X,oa,T.id);X._fullLayout._lasthover=V;X._fullLayout._hoversubplot=T.id};V.onmouseout=function(oa){X._dragging||r.unhover(X,oa)};r.init(this.dragOptions)}},{"../../components/color":615,"../../components/dragelement":634,"../../components/dragelement/helpers":633,"../../components/drawing":637,"../../components/fx":655,
"../../components/titles":710,"../../lib":750,"../../lib/extend":740,"../../registry":882,"../cartesian/axes":799,"../cartesian/constants":805,"../cartesian/select":818,"../cartesian/set_convert":819,"../plots":862,d3:169,tinycolor2:548}],882:[function(a,G,C){function q(t){if(t.layoutAttributes&&(t=t.layoutAttributes._arrayAttrRegexps))for(var w=0;w<t.length;w++)h(C.layoutArrayRegexes,t[w])}function n(t,w){(t=C.componentsRegistry[t].schema)&&t.traces&&(t=t.traces[w])&&r(C.modules[w]._module.attributes,
t)}function m(t,w){(t=C.componentsRegistry[t].schema)&&t.transforms&&(t=t.transforms[w])&&r(C.transformsRegistry[w].attributes,t)}function f(t,w){if((t=C.componentsRegistry[t].schema)&&t.subplots){var x=C.subplotsRegistry[w];w=x.layoutAttributes;x="subplot"===x.attr?x.name:x.attr;Array.isArray(x)&&(x=x[0]);t=t.subplots[x];w&&t&&r(w,t)}}function b(t){"object"===typeof t&&(t=t.type);return t}var k=a("./lib/loggers"),e=a("./lib/noop"),h=a("./lib/push_unique"),l=a("./lib/is_plain_object"),c=a("./lib/dom").addStyleRule;
G=a("./lib/extend");var g=a("./plots/attributes"),d=a("./plots/layout_attributes"),p=G.extendFlat,r=G.extendDeepAll;C.modules={};C.allCategories={};C.allTypes=[];C.subplotsRegistry={};C.transformsRegistry={};C.componentsRegistry={};C.layoutArrayContainers=[];C.layoutArrayRegexes=[];C.traceLayoutAttributes={};C.localeRegistry={};C.apiMethodRegistry={};C.collectableSubplotTypes=null;C.register=function(t){C.collectableSubplotTypes=null;if(t)t&&!Array.isArray(t)&&(t=[t]);else throw Error("No argument passed to Plotly.register.");
for(var w=0;w<t.length;w++){var x=t[w];if(!x)throw Error("Invalid module was attempted to be registered!");switch(x.moduleType){case "trace":var y=void 0,A=void 0,z=x.name,F=x.categories,D=x.meta;if(C.modules[z])k.log("Type "+z+" already registered");else{if(!C.subplotsRegistry[x.basePlotModule.name]){var u=void 0,B=x.basePlotModule,I=B.name;if(C.subplotsRegistry[I])k.log("Plot type "+I+" already registered.");else for(u in q(B),C.subplotsRegistry[I]=B,C.componentsRegistry)f(u,B.name)}u={};for(B=
0;B<F.length;B++)u[F[B]]=!0,C.allCategories[F[B]]=!0;C.modules[z]={_module:x,categories:u};D&&Object.keys(D).length&&(C.modules[z].meta=D);C.allTypes.push(z);for(A in C.componentsRegistry)n(A,z);x.layoutAttributes&&p(C.traceLayoutAttributes,x.layoutAttributes);x=x.basePlotModule;A=x.name;if("mapbox"===A)for(y in x=x.constants.styleRules,x)c(".js-plotly-plot .plotly .mapboxgl-"+y,x[y]);"geo"!==A&&"mapbox"!==A||void 0!==window.PlotlyGeoAssets||(window.PlotlyGeoAssets={topojson:{}})}break;case "transform":y=
void 0;A=x;if("string"!==typeof A.name)throw Error("Transform module *name* must be a string.");x="Transform module "+A.name;z="function"===typeof A.transform;F="function"===typeof A.calcTransform;if(!z&&!F)throw Error(x+" is missing a *transform* or *calcTransform* method.");z&&F&&k.log([x+" has both a *transform* and *calcTransform* methods.","Please note that all *transform* methods are executed before all *calcTransform* methods."].join(" "));l(A.attributes)||k.log(x+" registered without an *attributes* object.");
"function"!==typeof A.supplyDefaults&&k.log(x+" registered without a *supplyDefaults* method.");C.transformsRegistry[A.name]=A;for(y in C.componentsRegistry)m(y,A.name);break;case "component":z=A=y=void 0;if("string"!==typeof x.name)throw Error("Component module *name* must be a string.");F=x.name;C.componentsRegistry[F]=x;x.layoutAttributes&&(x.layoutAttributes._isLinkedToArray&&h(C.layoutArrayContainers,F),q(x));for(z in C.modules)n(F,z);for(A in C.subplotsRegistry)f(F,A);for(y in C.transformsRegistry)m(F,
y);x.schema&&x.schema.layout&&r(d,x.schema.layout);break;case "locale":z=x;x=z.name;y=x.split("-")[0];A=z.dictionary;z=z.format;F=A&&Object.keys(A).length;D=z&&Object.keys(z).length;u=C.localeRegistry;(B=u[x])||(u[x]=B={});y!==x&&((x=u[y])||(u[y]=x={}),F&&x.dictionary===B.dictionary&&(x.dictionary=A),D&&x.format===B.format&&(x.format=z));F&&(B.dictionary=A);D&&(B.format=z);break;case "apiMethod":C.apiMethodRegistry[x.name]=x.fn;break;default:throw Error("Invalid module was attempted to be registered!");
}}};C.getModule=function(t){return(t=C.modules[b(t)])?t._module:!1};C.traceIs=function(t,w){t=b(t);if("various"===t)return!1;var x=C.modules[t];x||(t&&"area"!==t&&k.log("Unrecognized trace type "+t+"."),x=C.modules[g.type.dflt]);return!!x.categories[w]};C.getTransformIndices=function(t,w){var x=[];t=t.transforms||[];for(var y=0;y<t.length;y++)t[y].type===w&&x.push(y);return x};C.hasTransform=function(t,w){t=t.transforms||[];for(var x=0;x<t.length;x++)if(t[x].type===w)return!0;return!1};C.getComponentMethod=
function(t,w){return(t=C.componentsRegistry[t])?t[w]||e:e};C.call=function(){var t=arguments[0],w=[].slice.call(arguments,1);return C.apiMethodRegistry[t].apply(null,w)}},{"./lib/dom":738,"./lib/extend":740,"./lib/is_plain_object":751,"./lib/loggers":754,"./lib/noop":759,"./lib/push_unique":764,"./plots/attributes":795,"./plots/layout_attributes":853}],883:[function(a,G,C){function q(b){switch(b){case "themes__thumb":b={autosize:!0,width:150,height:150,title:{text:""},showlegend:!1,margin:{l:5,r:5,
t:5,b:5,pad:0},annotations:[]};break;case "thumbnail":b={title:{text:""},hidesources:!0,showlegend:!1,borderwidth:0,bordercolor:"",margin:{l:1,r:1,t:1,b:1,pad:0},annotations:[]};break;default:b={}}return b}var n=a("../registry");a=a("../lib");var m=a.extendFlat,f=a.extendDeep;G.exports=function(b,k){b.framework&&b.framework.isPolar&&(b=b.framework.getConfig());var e,h=b.layout,l=f([],b.data);h=f({},h,q(k.tileClass));b=b._context||{};k.width&&(h.width=k.width);k.height&&(h.height=k.height);if("thumbnail"===
k.tileClass||"themes__thumb"===k.tileClass){h.annotations=[];var c=Object.keys(h);for(e=0;e<c.length;e++)-1<["xaxis","yaxis","zaxis"].indexOf(c[e].slice(0,5))&&(h[c[e]].title={text:""});for(e=0;e<l.length;e++)c=l[e],c.showscale=!1,c.marker&&(c.marker.showscale=!1),n.traceIs(c,"pie-like")&&(c.textposition="none")}if(Array.isArray(k.annotations))for(e=0;e<k.annotations.length;e++)h.annotations.push(k.annotations[e]);c=Object.keys(h).filter(function(p){return p.match(/^scene\d*$/)});if(c.length){var g=
{};"thumbnail"===k.tileClass&&(g={title:{text:""},showaxeslabels:!1,showticklabels:!1,linetickenable:!1});for(e=0;e<c.length;e++){var d=h[c[e]];d.xaxis||(d.xaxis={});d.yaxis||(d.yaxis={});d.zaxis||(d.zaxis={});m(d.xaxis,g);m(d.yaxis,g);m(d.zaxis,g);d._scene=null}}e=document.createElement("div");k.tileClass&&(e.className=k.tileClass);l={gd:e,td:e,layout:h,data:l,config:{staticPlot:void 0===k.staticPlot?!0:k.staticPlot,plotGlPixelRatio:void 0===k.plotGlPixelRatio?2:k.plotGlPixelRatio,displaylogo:k.displaylogo||
!1,showLink:k.showLink||!1,showTips:k.showTips||!1,mapboxAccessToken:b.mapboxAccessToken}};"transparent"!==k.setBackground&&(l.config.setBackground=k.setBackground||"opaque");l.gd.defaultLayout=q(k.tileClass);return l}},{"../lib":750,"../registry":882}],884:[function(a,G,C){var q=a("../lib"),n=a("../plot_api/to_image"),m=a("./filesaver"),f=a("./helpers");G.exports=function(b,k){var e;q.isPlainObject(b)||(e=q.getGraphDiv(b));k=k||{};k.format=k.format||"png";k.width=k.width||null;k.height=k.height||
null;k.imageDataOnly=!0;return new Promise(function(h,l){e&&e._snapshotInProgress&&l(Error("Snapshotting already in progress."));q.isIE()&&"svg"!==k.format&&l(Error(f.MSG_IE_BAD_FORMAT));e&&(e._snapshotInProgress=!0);var c=n(b,k),g=k.filename||b.fn||"newplot";g+="."+k.format.replace("-",".");c.then(function(d){e&&(e._snapshotInProgress=!1);return m(d,g,k.format)}).then(function(d){h(d)}).catch(function(d){e&&(e._snapshotInProgress=!1);l(d)})})}},{"../lib":750,"../plot_api/to_image":791,"./filesaver":885,
"./helpers":886}],885:[function(a,G,C){var q=a("../lib"),n=a("./helpers");G.exports=function(m,f,b){var k=document.createElement("a"),e="download"in k;return new Promise(function(h,l){q.isIE9orBelow()&&l(Error("IE \x3c 10 unsupported"));if(q.isSafari())return n.octetStream(("svg"===b?",":";base64,")+encodeURIComponent(m)),h(f);if(q.isIE())return l=n.createBlob(m,"svg"),window.navigator.msSaveBlob(l,f),h(f);if(e)return l=n.createBlob(m,b),l=n.createObjectURL(l),k.href=l,k.download=f,document.body.appendChild(k),
k.click(),document.body.removeChild(k),n.revokeObjectURL(l),h(f);l(Error("download error"))})}},{"../lib":750,"./helpers":886}],886:[function(a,G,C){var q=a("../registry");C.getDelay=function(m){return m._has?m._has("gl3d")||m._has("gl2d")||m._has("mapbox")?500:0:0};C.getRedrawFunc=function(m){return function(){var f=m._fullLayout||{};(f._has&&f._has("polar")||!m.data||!m.data[0]||!m.data[0].r)&&q.getComponentMethod("colorbar","draw")(m)}};C.encodeSVG=function(m){return"data:image/svg+xml,"+encodeURIComponent(m)};
C.encodeJSON=function(m){return"data:application/json,"+encodeURIComponent(m)};var n=window.URL||window.webkitURL;C.createObjectURL=function(m){return n.createObjectURL(m)};C.revokeObjectURL=function(m){return n.revokeObjectURL(m)};C.createBlob=function(m,f){if("svg"===f)return new window.Blob([m],{type:"image/svg+xml;charset\x3dutf-8"});if("full-json"===f)return new window.Blob([m],{type:"application/json;charset\x3dutf-8"});m=window.atob(m);for(var b=m.length,k=new ArrayBuffer(b),e=new Uint8Array(k),
h=0;h<b;h++)e[h]=m.charCodeAt(h);return new window.Blob([k],{type:"image/"+f})};C.octetStream=function(m){document.location.href="data:application/octet-stream"+m};C.IMAGE_URL_PREFIX=/^data:image\/\w+;base64,/;C.MSG_IE_BAD_FORMAT="Sorry IE does not support downloading from canvas. Try {format:'svg'} instead."},{"../registry":882}],887:[function(a,G,C){C=a("./helpers");a={getDelay:C.getDelay,getRedrawFunc:C.getRedrawFunc,clone:a("./cloneplot"),toSVG:a("./tosvg"),svgToImg:a("./svgtoimg"),toImage:a("./toimage"),
downloadImage:a("./download")};G.exports=a},{"./cloneplot":883,"./download":884,"./helpers":886,"./svgtoimg":888,"./toimage":889,"./tosvg":890}],888:[function(a,G,C){var q=a("../lib"),n=a("events").EventEmitter,m=a("./helpers");G.exports=function(f){var b=f.emitter||new n,k=new Promise(function(e,h){var l=window.Image,c=f.svg,g=f.format||"png";if(q.isIE()&&"svg"!==g)return l=Error(m.MSG_IE_BAD_FORMAT),h(l),f.promise?k:b.emit("error",l);var d=f.canvas,p=f.scale||1,r=p*(f.width||300),t=p*(f.height||
150),w=d.getContext("2d"),x=new l;if("svg"===g||q.isIE9orBelow()||q.isSafari())var y=m.encodeSVG(c);else{var A=m.createBlob(c,"svg");y=m.createObjectURL(A)}d.width=r;d.height=t;x.onload=function(){A=null;m.revokeObjectURL(y);"svg"!==g&&w.drawImage(x,0,0,r,t);switch(g){case "jpeg":var z=d.toDataURL("image/jpeg");break;case "png":z=d.toDataURL("image/png");break;case "webp":z=d.toDataURL("image/webp");break;case "svg":z=y;break;default:if(h(Error("Image format is not jpeg, png, svg or webp.")),!f.promise)return b.emit("error",
"Image format is not jpeg, png, svg or webp.")}e(z);f.promise||b.emit("success",z)};x.onerror=function(z){A=null;m.revokeObjectURL(y);h(z);if(!f.promise)return b.emit("error",z)};x.src=y});return f.promise?k:b}},{"../lib":750,"./helpers":886,events:110}],889:[function(a,G,C){var q=a("events").EventEmitter,n=a("../registry"),m=a("../lib"),f=a("./helpers"),b=a("./cloneplot"),k=a("./tosvg"),e=a("./svgtoimg");G.exports=function(h,l){var c=new q;h=b(h,{format:"png"});var g=h.gd;g.style.position="absolute";
g.style.left="-5000px";document.body.appendChild(g);var d=f.getRedrawFunc(g);n.call("plot",g,h.data,h.layout,h.config).then(d).then(function(){var p=f.getDelay(g._fullLayout);setTimeout(function(){var r=k(g),t=document.createElement("canvas");t.id=m.randstr();c=e({format:l.format,width:g._fullLayout.width,height:g._fullLayout.height,canvas:t,emitter:c,svg:r});c.clean=function(){g&&document.body.removeChild(g)}},p)}).catch(function(p){c.emit("error",p)});return c}},{"../lib":750,"../registry":882,
"./cloneplot":883,"./helpers":886,"./svgtoimg":888,"./tosvg":890,events:110}],890:[function(a,G,C){function q(l){var c=n.select("body").append("div").style({display:"none"}).html("");l=l.replace(/(&[^;]*;)/gi,function(g){return"\x26lt;"===g?"\x26#60;":"\x26rt;"===g?"\x26#62;":-1!==g.indexOf("\x3c")||-1!==g.indexOf("\x3e")?"":c.html(g).text()});c.remove();return l}var n=a("d3"),m=a("../lib"),f=a("../components/drawing"),b=a("../components/color"),k=a("../constants/xmlns_namespaces"),e=/"/g,h=/("TOBESTRIPPED)|(TOBESTRIPPED")/g;
G.exports=function(l,c,g){var d=l._fullLayout,p=d._paper,r=d._toppaper,t=d.width,w=d.height,x;p.insert("rect",":first-child").call(f.setRect,0,0,t,w).call(b.fill,d.paper_bgcolor);var y=d._basePlotModules||[];for(x=0;x<y.length;x++){var A=y[x];A.toSVG&&A.toSVG(l)}if(r)for(x=r.node().childNodes,l=Array.prototype.slice.call(x),x=0;x<l.length;x++)r=l[x],r.childNodes.length&&p.node().appendChild(r);d._draggers&&d._draggers.remove();p.node().style.background="";p.selectAll("text").attr({"data-unformatted":null,
"data-math":null}).each(function(){var F=n.select(this);if("hidden"===this.style.visibility||"none"===this.style.display)F.remove();else{F.style({visibility:null,display:null});var D=this.style.fontFamily;D&&-1!==D.indexOf('"')&&F.style("font-family",D.replace(e,"TOBESTRIPPED"))}});if(d._gradientUrlQueryParts){x=[];for(var z in d._gradientUrlQueryParts)x.push(z);x.length&&p.selectAll(x.join(",")).each(function(){var F=n.select(this),D=this.style.fill;D&&-1!==D.indexOf("url(")&&F.style("fill",D.replace(e,
"TOBESTRIPPED"));(D=this.style.stroke)&&-1!==D.indexOf("url(")&&F.style("stroke",D.replace(e,"TOBESTRIPPED"))})}"pdf"!==c&&"eps"!==c||p.selectAll("#MathJax_SVG_glyphs path").attr("stroke-width",0);p.node().setAttributeNS(k.xmlns,"xmlns",k.svg);p.node().setAttributeNS(k.xmlns,"xmlns:xlink",k.xlink);"svg"===c&&g&&(p.attr("width",g*t),p.attr("height",g*w),p.attr("viewBox","0 0 "+t+" "+w));c=(new window.XMLSerializer).serializeToString(p.node());c=q(c);c=c.replace(/&(?!\w+;|#[0-9]+;| #x[0-9A-F]+;)/g,
"\x26amp;");c=c.replace(h,"'");m.isIE()&&(c=c.replace(/"/gi,"'"),c=c.replace(/(\('#)([^']*)('\))/gi,'("#$2")'),c=c.replace(/(\\')/gi,'"'));return c}},{"../components/color":615,"../components/drawing":637,"../constants/xmlns_namespaces":726,"../lib":750,d3:169}],891:[function(a,G,C){var q=a("../../lib");G.exports=function(n,m){for(var f=0;f<n.length;f++)n[f].i=f;q.mergeArray(m.text,n,"tx");q.mergeArray(m.hovertext,n,"htx");if(m=m.marker)if(q.mergeArray(m.opacity,n,"mo",!0),q.mergeArray(m.color,n,
"mc"),m=m.line)q.mergeArray(m.color,n,"mlc"),q.mergeArrayCastPositive(m.width,n,"mlw")}},{"../../lib":750}],892:[function(a,G,C){C=a("../scatter/attributes");var q=a("../../plots/template_attributes").hovertemplateAttrs,n=a("../../plots/template_attributes").texttemplateAttrs,m=a("../../components/colorscale/attributes"),f=a("../../plots/font_attributes"),b=a("./constants");a=a("../../lib/extend").extendFlat;f=f({editType:"calc",arrayOk:!0,colorEditType:"style"});var k=a({},C.marker.line.width,{dflt:0});
k=a({width:k,editType:"calc"},m("marker.line"));m=a({line:k,editType:"calc"},m("marker"),{opacity:{valType:"number",arrayOk:!0,dflt:1,min:0,max:1,editType:"style"}});G.exports={x:C.x,x0:C.x0,dx:C.dx,y:C.y,y0:C.y0,dy:C.dy,xperiod:C.xperiod,yperiod:C.yperiod,xperiod0:C.xperiod0,yperiod0:C.yperiod0,xperiodalignment:C.xperiodalignment,yperiodalignment:C.yperiodalignment,text:C.text,texttemplate:n({editType:"plot"},{keys:b.eventDataKeys}),hovertext:C.hovertext,hovertemplate:q({},{keys:b.eventDataKeys}),
textposition:{valType:"enumerated",values:["inside","outside","auto","none"],dflt:"none",arrayOk:!0,editType:"calc"},insidetextanchor:{valType:"enumerated",values:["end","middle","start"],dflt:"end",editType:"plot"},textangle:{valType:"angle",dflt:"auto",editType:"plot"},textfont:a({},f,{}),insidetextfont:a({},f,{}),outsidetextfont:a({},f,{}),constraintext:{valType:"enumerated",values:["inside","outside","both","none"],dflt:"both",editType:"calc"},cliponaxis:a({},C.cliponaxis,{}),orientation:{valType:"enumerated",
values:["v","h"],editType:"calc+clearAxisTypes"},base:{valType:"any",dflt:null,arrayOk:!0,editType:"calc"},offset:{valType:"number",dflt:null,arrayOk:!0,editType:"calc"},width:{valType:"number",dflt:null,min:0,arrayOk:!0,editType:"calc"},marker:m,offsetgroup:{valType:"string",dflt:"",editType:"calc"},alignmentgroup:{valType:"string",dflt:"",editType:"calc"},selected:{marker:{opacity:C.selected.marker.opacity,color:C.selected.marker.color,editType:"style"},textfont:C.selected.textfont,editType:"style"},
unselected:{marker:{opacity:C.unselected.marker.opacity,color:C.unselected.marker.color,editType:"style"},textfont:C.unselected.textfont,editType:"style"},r:C.r,t:C.t,_deprecated:{bardir:{valType:"enumerated",editType:"calc",values:["v","h"]}}}},{"../../components/colorscale/attributes":622,"../../lib/extend":740,"../../plots/font_attributes":827,"../../plots/template_attributes":877,"../scatter/attributes":1158,"./constants":894}],893:[function(a,G,C){var q=a("../../plots/cartesian/axes"),n=a("../../plots/cartesian/align_period"),
m=a("../../components/colorscale/helpers").hasColorscale,f=a("../../components/colorscale/calc"),b=a("./arrays_to_calcdata"),k=a("../scatter/calc_selection");G.exports=function(e,h){var l=q.getFromId(e,h.xaxis||"x"),c=q.getFromId(e,h.yaxis||"y");var g={msUTC:!(!h.base&&0!==h.base)};if("h"===h.orientation){g=l.makeCalcdata(h,"x",g);var d=c.makeCalcdata(h,"y");l=n(h,c,"y",d);c=!!h.yperiodalignment}else g=c.makeCalcdata(h,"y",g),d=l.makeCalcdata(h,"x"),l=n(h,l,"x",d),c=!!h.xperiodalignment;for(var p=
Math.min(l.length,g.length),r=Array(p),t=0;t<p;t++)r[t]={p:l[t],s:g[t]},c&&(r[t].orig_p=d[t]),h.ids&&(r[t].id=String(h.ids[t]));m(h,"marker")&&f(e,h,{vals:h.marker.color,containerStr:"marker",cLetter:"c"});m(h,"marker.line")&&f(e,h,{vals:h.marker.line.color,containerStr:"marker.line",cLetter:"c"});b(r,h);k(r,h);return r}},{"../../components/colorscale/calc":623,"../../components/colorscale/helpers":626,"../../plots/cartesian/align_period":796,"../../plots/cartesian/axes":799,"../scatter/calc_selection":1160,
"./arrays_to_calcdata":891}],894:[function(a,G,C){G.exports={TEXTPAD:3,eventDataKeys:["value","label"]}},{}],895:[function(a,G,C){function q(A,z,F,D,u){if(D.length){var B;n(F,D);switch(u.mode){case "overlay":m(z,F,D,u);break;case "group":var I=[];var J=[];for(B=0;B<D.length;B++){var N=D[B];var M=N[0].trace;void 0===M.offset?J.push(N):I.push(N)}if(J.length){J=new y(J,{sepNegVal:!1,overlapNoMerge:!u.norm});var E=A._fullLayout;A=J.minDiff;B=J.traces;N=B.length;M=J.positions.length!==J.distinctPositions.length;
var L=A*(1-u.gap),Q=x(E,z._id)+B[0][0].trace.orientation;E=E._alignmentOpts[Q]||{};for(Q=0;Q<N;Q++){var S=B[Q],R=S[0].trace,O=Object.keys((E[R.alignmentgroup]||{}).offsetGroups||{}).length;var T=O?L/O:M?L/N:L;var V=T*(1-(u.groupgap||0));R=O?((2*R._offsetIndex+1-O)*T-V)/2:M?((2*Q+1-N)*T-V)/2:-V/2;S=S[0].t;S.barwidth=V;S.poffset=R;S.bargroupwidth=L;S.bardelta=A}J.binWidth=B[0][0].t.barwidth/100;b(J);k(z,J);e(z,J,M);A=J.traces;for(B=0;B<A.length;B++)if(N=A[B],void 0===N[0].trace.base)for(M=new y([N],
{sepNegVal:!0,overlapNoMerge:!0}),L=0;L<N.length;L++)if(E=N[L],E.p!==r&&(Q=M.put(E.p,E.b+E.s)))E.b=Q;u.norm?(l(J),c(F,J,u)):h(F,J)}I.length&&m(z,F,I,u);break;case "stack":case "relative":I=[];J=[];for(B=0;B<D.length;B++)N=D[B],M=N[0].trace,void 0===M.base?J.push(N):I.push(N);if(J.length){A=new y(J,{sepNegVal:"relative"===u.mode,overlapNoMerge:!(u.norm||"stack"===u.mode||"relative"===u.mode)});f(z,A,u);B=F._id.charAt(0);N=A.traces;for(Q=0;Q<N.length;Q++)if(M=N[Q],L=M[0].trace,"funnel"===L.type)for(V=
0;V<M.length;V++)S=M[V],S.s!==r&&A.put(S.p,-.5*S.s);for(Q=0;Q<N.length;Q++){M=N[Q];L=M[0].trace;E="funnel"===L.type;R=[];for(V=0;V<M.length;V++)S=M[V],S.s!==r&&(T=E?S.s:S.s+S.b,O=A.put(S.p,T),T=O+T,S.b=O,S[B]=T,u.norm||(R.push(T),S.hasB&&R.push(O)));u.norm||(L._extremes[F._id]=w.findExtremes(F,R,{tozero:!0,padded:!0}))}for(B=0;B<J.length;B++)for(N=J[B],M=0;M<N.length;M++)L=N[M],L.s!==r&&L.b+L.s===A.get(L.p,L.s)&&(L._outmost=!0);u.norm&&c(F,A,u)}I.length&&m(z,F,I,u)}g(D,z)}}function n(A,z){var F;for(F=
0;F<z.length;F++){var D=z[F];var u=D[0].trace;var B="funnel"===u.type?u._base:u.base,I="h"===u.orientation?u.xcalendar:u.ycalendar,J="category"===A.type||"multicategory"===A.type?function(){return null}:A.d2c;if(p(B)){for(u=0;u<Math.min(B.length,D.length);u++){var N=J(B[u],0,I);d(N)?(D[u].b=+N,D[u].hasB=1):D[u].b=0}for(;u<D.length;u++)D[u].b=0}else for(N=J(B,0,I),N=(B=d(N))?N:0,u=0;u<D.length;u++)D[u].b=N,B&&(D[u].hasB=1)}}function m(A,z,F,D){for(var u=0;u<F.length;u++){var B=new y([F[u]],{unitMinDiff:D.xCat||
D.yCat,sepNegVal:!1,overlapNoMerge:!D.norm});f(A,B,D);D.norm?(l(B),c(z,B,D)):h(z,B)}}function f(A,z,F){var D=z.minDiff,u=z.traces,B=D*(1-F.gap);F=B*(1-(F.groupgap||0));for(var I=-F/2,J=0;J<u.length;J++){var N=u[J][0].t;N.barwidth=F;N.poffset=I;N.bargroupwidth=B;N.bardelta=D}z.binWidth=u[0][0].t.barwidth/100;b(z);k(A,z);e(A,z)}function b(A){A=A.traces;var z,F;for(z=0;z<A.length;z++){var D=A[z],u=D[0],B=u.trace;u=u.t;var I=B._offset||B.offset,J=u.poffset;if(p(I)){var N=Array.prototype.slice.call(I,
0,D.length);for(F=0;F<N.length;F++)d(N[F])||(N[F]=J);for(F=N.length;F<D.length;F++)N.push(J);u.poffset=N}else void 0!==I&&(u.poffset=I);F=B._width||B.width;B=u.barwidth;if(p(F)){var M=Array.prototype.slice.call(F,0,D.length);for(F=0;F<M.length;F++)d(M[F])||(M[F]=B);for(F=M.length;F<D.length;F++)M.push(B);u.barwidth=M;if(void 0===I){N=[];for(F=0;F<D.length;F++)N.push(J+(B-M[F])/2);u.poffset=N}}else void 0!==F&&(u.barwidth=F,void 0===I&&(u.poffset=J+(B-F)/2))}}function k(A,z){z=z.traces;A=A._id.charAt(0);
for(var F=0;F<z.length;F++){var D=z[F],u=D[0].t,B=u.poffset,I=Array.isArray(B);u=u.barwidth;for(var J=Array.isArray(u),N=0;N<D.length;N++){var M=D[N],E=M.w=J?u[N]:u;M[A]=M.p+(I?B[N]:B)+E/2}}}function e(A,z,F){var D=z.traces,u=z.minDiff/2;w.minDtick(A,z.minDiff,z.distinctPositions[0],F);for(z=0;z<D.length;z++){F=D[z];var B=F[0],I=B.trace,J=[],N;for(N=0;N<F.length;N++){var M=F[N];var E=M.p-u;M=M.p+u;J.push(E,M)}if(I.width||I.offset){E=B.t;B=E.poffset;var L=E.barwidth,Q=Array.isArray(B),S=Array.isArray(L);
for(N=0;N<F.length;N++){M=F[N];var R=S?L[N]:L;E=M.p+(Q?B[N]:B);M=E+R;J.push(E,M)}}I._extremes[A._id]=w.findExtremes(A,J,{padded:!1})}}function h(A,z){z=z.traces;for(var F=A._id.charAt(0),D=0;D<z.length;D++){for(var u=z[D],B=u[0].trace,I=[],J=!1,N=0;N<u.length;N++){var M=u[N],E=M.b,L=E+M.s;M[F]=L;I.push(L);M.hasB&&I.push(E);M.hasB&&M.b||(J=!0)}B._extremes[A._id]=w.findExtremes(A,I,{tozero:J,padded:!0})}}function l(A){for(var z=A.traces,F=0;F<z.length;F++)for(var D=z[F],u=0;u<D.length;u++){var B=D[u];
B.s!==r&&A.put(B.p,B.b+B.s)}}function c(A,z,F){function D(ba){return d(A.c2l(ba))&&(ba<N-J||ba>M+J||!d(N))}var u=z.traces,B=A._id.charAt(0),I="fraction"===F.norm?1:100,J=I/1E9,N=A.l2c(A.c2l(0)),M="stack"===F.mode?I:N;for(F=0;F<u.length;F++){for(var E=u[F],L=E[0].trace,Q=[],S=!1,R=!1,O=0;O<E.length;O++){var T=E[O];if(T.s!==r){var V=Math.abs(I/z.get(T.p,T.s));T.b*=V;T.s*=V;V=T.b;var X=V+T.s;T[B]=X;Q.push(X);R=R||D(X);T.hasB&&(Q.push(V),R=R||D(V));T.hasB&&T.b||(S=!0)}}L._extremes[A._id]=w.findExtremes(A,
Q,{tozero:S,padded:R})}}function g(A,z){z=z._id.charAt(0);var F={},D,u,B=Infinity,I=-Infinity;for(D=0;D<A.length;D++){var J=A[D];for(u=0;u<J.length;u++){var N=J[u].p;d(N)&&(B=Math.min(B,N),I=Math.max(I,N))}}var M=1E4/(I-B);I=F.round=function(O){return String(Math.round(M*(O-B)))};for(D=0;D<A.length;D++){J=A[D];J[0].t.extents=F;N=J[0].t.poffset;var E=Array.isArray(N);for(u=0;u<J.length;u++){var L=J[u],Q=L[z]-L.w/2;if(d(Q)){var S=L[z]+L.w/2,R=I(L.p);F[R]=F[R]?[Math.min(Q,F[R][0]),Math.max(S,F[R][1])]:
[Q,S]}L.p0=L.p+(E?N[u]:N);L.p1=L.p0+L.w;L.s0=L.b;L.s1=L.s0+L.s}}}var d=a("fast-isnumeric"),p=a("../../lib").isArrayOrTypedArray,r=a("../../constants/numerical").BADNUM,t=a("../../registry"),w=a("../../plots/cartesian/axes"),x=a("../../plots/cartesian/axis_ids").getAxisGroup,y=a("./sieve.js");G.exports={crossTraceCalc:function(A,z){var F=z.xaxis;z=z.yaxis;for(var D=A._fullLayout,u=A._fullData,B=A.calcdata,I=[],J=[],N=0;N<u.length;N++){var M=u[N];if(!0===M.visible&&t.traceIs(M,"bar")&&M.xaxis===F._id&&
M.yaxis===z._id&&("h"===M.orientation?I.push(B[N]):J.push(B[N]),M._computePh)){M=A.calcdata[N];for(var E=0;E<M.length;E++)"function"===typeof M[E].ph0&&(M[E].ph0=M[E].ph0()),"function"===typeof M[E].ph1&&(M[E].ph1=M[E].ph1())}}D={xCat:"category"===F.type||"multicategory"===F.type,yCat:"category"===z.type||"multicategory"===z.type,mode:D.barmode,norm:D.barnorm,gap:D.bargap,groupgap:D.bargroupgap};q(A,F,z,J,D);q(A,z,F,I,D)},setGroupPositions:q}},{"../../constants/numerical":725,"../../lib":750,"../../plots/cartesian/axes":799,
"../../plots/cartesian/axis_ids":802,"../../registry":882,"./sieve.js":905,"fast-isnumeric":241}],896:[function(a,G,C){function q(d,p,r,t){d=p.orientation;d=l(r,p[{v:"x",h:"y"}[d]+"axis"])+d;var w=r._alignmentOpts||{};r=t("alignmentgroup");var x=w[d];x||(x=w[d]={});(d=x[r])?d.traces.push(p):d=x[r]={traces:[p],alignmentIndex:Object.keys(x).length,offsetGroups:{}};t=t("offsetgroup");d=d.offsetGroups;r=d[t];t&&(r||(r=d[t]={offsetIndex:Object.keys(d).length}),p._offsetIndex=r.offsetIndex)}function n(d,
p,r,t,w,x){x=x||{};p=!1!==x.moduleHasSelected;var y=!1!==x.moduleHasUnselected,A=!1!==x.moduleHasConstrain,z=!1!==x.moduleHasCliponaxis,F=!1!==x.moduleHasTextangle,D=!1!==x.moduleHasInsideanchor,u=!!x.hasPathbar,B=Array.isArray(w)||"auto"===w;x=B||"inside"===w;w=B||"outside"===w;if(x||w)r=g(t,"textfont",r.font),B=m.extendFlat({},r),(d=!(d.textfont&&d.textfont.color))&&delete B.color,g(t,"insidetextfont",B),u&&(u=m.extendFlat({},r),d&&delete u.color,g(t,"pathbar.textfont",u)),w&&g(t,"outsidetextfont",
r),p&&t("selected.textfont.color"),y&&t("unselected.textfont.color"),A&&t("constraintext"),z&&t("cliponaxis"),F&&t("textangle"),t("texttemplate");x&&D&&t("insidetextanchor")}var m=a("../../lib"),f=a("../../components/color"),b=a("../../registry"),k=a("../scatter/xy_defaults"),e=a("../scatter/period_defaults"),h=a("./style_defaults"),l=a("../../plots/cartesian/axis_ids").getAxisGroup,c=a("./attributes"),g=m.coerceFont;G.exports={supplyDefaults:function(d,p,r,t){function w(y,A){return m.coerce(d,p,
c,y,A)}if(k(d,p,t,w)){e(d,p,t,w);w("orientation",p.x&&!p.y?"h":"v");w("base");w("offset");w("width");w("text");w("hovertext");w("hovertemplate");var x=w("textposition");n(d,p,t,w,x,{moduleHasSelected:!0,moduleHasUnselected:!0,moduleHasConstrain:!0,moduleHasCliponaxis:!0,moduleHasTextangle:!0,moduleHasInsideanchor:!0});h(d,p,w,r,t);r=(p.marker.line||{}).color;t=b.getComponentMethod("errorbars","supplyDefaults");t(d,p,r||f.defaultLine,{axis:"y"});t(d,p,r||f.defaultLine,{axis:"x",inherit:"y"});m.coerceSelectionMarkerOpacity(p,
w)}else p.visible=!1},crossTraceDefaults:function(d,p){function r(y){return m.coerce(w._input,w,c,y)}if("group"===p.barmode)for(var t=0;t<d.length;t++){var w=d[t];if("bar"===w.type){var x=w._input;q(x,w,p,r)}}},handleGroupingDefaults:q,handleText:n}},{"../../components/color":615,"../../lib":750,"../../plots/cartesian/axis_ids":802,"../../registry":882,"../scatter/period_defaults":1178,"../scatter/xy_defaults":1185,"./attributes":892,"./style_defaults":907}],897:[function(a,G,C){G.exports=function(q,
n,m){q.x="xVal"in n?n.xVal:n.x;q.y="yVal"in n?n.yVal:n.y;n.xa&&(q.xaxis=n.xa);n.ya&&(q.yaxis=n.ya);"h"===m.orientation?(q.label=q.y,q.value=q.x):(q.label=q.x,q.value=q.y);return q}},{}],898:[function(a,G,C){var q=a("fast-isnumeric"),n=a("tinycolor2"),m=a("../../lib").isArrayOrTypedArray;C.coerceString=function(f,b,k){if("string"===typeof b){if(b||!f.noBlank)return b}else if(("number"===typeof b||!0===b)&&!f.strict)return String(b);return void 0!==k?k:f.dflt};C.coerceNumber=function(f,b,k){if(q(b)){b=
+b;var e=f.min,h=f.max;if(!(void 0!==e&&b<e||void 0!==h&&b>h))return b}return void 0!==k?k:f.dflt};C.coerceColor=function(f,b,k){return n(b).isValid()?b:void 0!==k?k:f.dflt};C.coerceEnumerated=function(f,b,k){f.coerceNumber&&(b=+b);return-1!==f.values.indexOf(b)?b:void 0!==k?k:f.dflt};C.getValue=function(f,b){var k;Array.isArray(f)?b<f.length&&(k=f[b]):k=f;return k};C.getLineWidth=function(f,b){return 0<b.mlw?b.mlw:m(f.marker.line.width)?0:f.marker.line.width}},{"../../lib":750,"fast-isnumeric":241,
tinycolor2:548}],899:[function(a,G,C){function q(c,g,d,p){function r(O){return O[E]-O.w/2}function t(O){return O[E]+O.w/2}function w(O,T){return m.inbox(O-N,T-N,B+Math.min(1,Math.abs(T-O)/R)-1)}function x(O){return w(I(O),J(O))}function y(O){var T=M,V=O.b,X=O[L];u&&(O=Math.abs(O.rawS)||0,0<T?X+=O:0>T&&(X-=O));return m.inbox(V-T,X-T,B+(X-T)/(X-V)-1)}var A=c.cd,z=A[0].trace,F=A[0].t,D="closest"===p,u="waterfall"===z.type,B=c.maxHoverDistance,I=D?r:function(O){return Math.min(r(O),O.p-F.bardelta/2)},
J=D?t:function(O){return Math.max(t(O),O.p+F.bardelta/2)};if("h"===z.orientation){var N=d;var M=g;var E="y";var L="x";var Q=y;var S=x}else N=g,M=d,E="x",L="y",S=y,Q=x;g=c[E+"a"];d=c[L+"a"];var R=Math.abs(g.r2c(g.range[1])-g.r2c(g.range[0]));p=m.getDistanceFunction(p,Q,S,function(O){return(Q(O)+S(O))/2});m.getClosest(A,p,c);if(!1!==c.index&&A[c.index].p!==l)return D||(I=function(O){return Math.min(r(O),O.p-F.bargroupwidth/2)},J=function(O){return Math.max(t(O),O.p+F.bargroupwidth/2)}),A=A[c.index],
p=z.base?A.b+A.s:A.s,c[L+"0"]=c[L+"1"]=d.c2p(A[L],!0),c[L+"LabelVal"]=p,p=F.extents[F.extents.round(A.p)],c[E+"0"]=g.c2p(D?I(A):p[0],!0),c[E+"1"]=g.c2p(D?J(A):p[1],!0),c[E+"LabelVal"]=void 0!==A.orig_p?A.orig_p:A.p,c.labelLabel=h(g,c[E+"LabelVal"]),c.valueLabel=h(d,c[L+"LabelVal"]),c.spikeDistance=(y(A)+function(O){return w(r(O),t(O))}(A))/2-B,c[E+"Spike"]=g.c2p(A.p,!0),k(A,z,c),c.hovertemplate=z.hovertemplate,c}function n(c,g){var d=g.mcc||c.marker.color,p=g.mlcc||c.marker.line.color;c=e(c,g);if(b.opacity(d))return d;
if(b.opacity(p)&&c)return p}var m=a("../../components/fx"),f=a("../../registry"),b=a("../../components/color"),k=a("../../lib").fillText,e=a("./helpers").getLineWidth,h=a("../../plots/cartesian/axes").hoverLabelText,l=a("../../constants/numerical").BADNUM;G.exports={hoverPoints:function(c,g,d,p){if(c=q(c,g,d,p))return d=c.cd,g=d[0].trace,d=d[c.index],c.color=n(g,d),f.getComponentMethod("errorbars","hoverInfo")(d,g,c),[c]},hoverOnBars:q,getTraceColor:n}},{"../../components/color":615,"../../components/fx":655,
"../../constants/numerical":725,"../../lib":750,"../../plots/cartesian/axes":799,"../../registry":882,"./helpers":898}],900:[function(a,G,C){G.exports={attributes:a("./attributes"),layoutAttributes:a("./layout_attributes"),supplyDefaults:a("./defaults").supplyDefaults,crossTraceDefaults:a("./defaults").crossTraceDefaults,supplyLayoutDefaults:a("./layout_defaults"),calc:a("./calc"),crossTraceCalc:a("./cross_trace_calc").crossTraceCalc,colorbar:a("../scatter/marker_colorbar"),arraysToCalcdata:a("./arrays_to_calcdata"),
plot:a("./plot").plot,style:a("./style").style,styleOnSelect:a("./style").styleOnSelect,hoverPoints:a("./hover").hoverPoints,eventData:a("./event_data"),selectPoints:a("./select"),moduleType:"trace",name:"bar",basePlotModule:a("../../plots/cartesian"),categories:"bar-like cartesian svg bar oriented errorBarsOK showLegend zoomScale".split(" "),animatable:!0,meta:{}}},{"../../plots/cartesian":812,"../scatter/marker_colorbar":1176,"./arrays_to_calcdata":891,"./attributes":892,"./calc":893,"./cross_trace_calc":895,
"./defaults":896,"./event_data":897,"./hover":899,"./layout_attributes":901,"./layout_defaults":902,"./plot":903,"./select":904,"./style":906}],901:[function(a,G,C){G.exports={barmode:{valType:"enumerated",values:["stack","group","overlay","relative"],dflt:"group",editType:"calc"},barnorm:{valType:"enumerated",values:["","fraction","percent"],dflt:"",editType:"calc"},bargap:{valType:"number",min:0,max:1,editType:"calc"},bargroupgap:{valType:"number",min:0,max:1,dflt:0,editType:"calc"}}},{}],902:[function(a,
G,C){var q=a("../../registry"),n=a("../../plots/cartesian/axes"),m=a("../../lib"),f=a("./layout_attributes");G.exports=function(b,k,e){for(var h=!1,l=!1,c=!1,g={},d=m.coerce(b,k,f,"barmode",void 0),p=0;p<e.length;p++){var r=e[p];if(q.traceIs(r,"bar")&&r.visible){h=!0;if("group"===d){var t=r.xaxis+r.yaxis;g[t]&&(c=!0);g[t]=!0}r.visible&&"histogram"===r.type&&"category"!==n.getFromId({_fullLayout:k},r["v"===r.orientation?"xaxis":"yaxis"]).type&&(l=!0)}}h?("overlay"!==d&&m.coerce(b,k,f,"barnorm",void 0),
m.coerce(b,k,f,"bargap",l&&!c?0:.2),m.coerce(b,k,f,"bargroupgap",void 0)):delete k.barmode}},{"../../lib":750,"../../plots/cartesian/axes":799,"../../registry":882,"./layout_attributes":901}],903:[function(a,G,C){function q(E){return E.id}function n(E,L,Q,S){var R=[],O=[],T=S?L:Q;L=S?Q:L;R[0]=T.c2p(E.s0,!0);O[0]=L.c2p(E.p0,!0);R[1]=T.c2p(E.s1,!0);O[1]=L.c2p(E.p1,!0);return S?[R,O]:[O,R]}function m(E,L,Q,S){if(!L.uniformtext.mode&&Q&&0<Q.duration){var R;S&&(R=S());return E.transition().duration(Q.duration).ease(Q.easing).each("end",
function(){R&&R()}).each("interrupt",function(){R&&R()})}return E}function f(E,L,Q,S,R,O,T,V,X,ba,aa){function ka(za,Ba,Ma){return r.ensureSingle(za,"text").text(Ba).attr({"class":"bartext bartext-"+qa,"text-anchor":"middle","data-notex":1}).call(x.font,Ma).call(t.convertToTspans,E)}var ha=L.xaxis,ca=L.yaxis;L=E._fullLayout;var sa=S[0].trace,ma="h"===sa.orientation,ra=h(L,S,R,ha,ca);var qa=l(sa,R);var Y=S[R],pa=!("stack"===ba.mode||"relative"===ba.mode)||Y._outmost;if(ra&&"none"!==qa&&(!Y.isBlank&&
O!==T&&V!==X||"auto"!==qa&&"inside"!==qa)){var oa=L.font;S=D.getBarColor(S[R],sa);S=D.getInsideTextFont(sa,R,oa,S);R=D.getOutsideTextFont(sa,R,oa);oa=Q.datum();ma?"log"===ha.type&&0>=oa.s0&&(O=ha.range[0]<ha.range[1]?0:ha._length):"log"===ca.type&&0>=oa.s0&&(V=ca.range[0]<ca.range[1]?ca._length:0);ha=Math.abs(T-O)-2*M;ca=Math.abs(X-V)-2*M;"outside"===qa&&(pa||Y.hasB||(qa="inside"));if("auto"===qa)if(pa){qa="inside";var ua=r.ensureUniformFontSize(E,S);var ya=ka(Q,ra,ua);var ja=x.bBox(ya.node());pa=
ja.width;oa=ja.height;0<pa&&0<oa&&(pa<=ha&&oa<=ca||pa<=ca&&oa<=ha||(ma?ha>=ca/oa*pa:ca>=ha/pa*oa))?qa="inside":(qa="outside",ya.remove(),ya=null)}else qa="inside";if(!ya&&(ua=r.ensureUniformFontSize(E,"outside"===qa?R:S),ya=ka(Q,ra,ua),Q=ya.attr("transform"),ya.attr("transform",""),ja=x.bBox(ya.node()),pa=ja.width,oa=ja.height,ya.attr("transform",Q),0>=pa||0>=oa)){ya.remove();return}Q=sa.textangle;"outside"===qa?(ra="both"===sa.constraintext||"outside"===sa.constraintext,O=e(O,T,V,X,ja,{isHorizontal:ma,
constrained:ra,angle:Q})):(ra="both"===sa.constraintext||"inside"===sa.constraintext,O=k(O,T,V,X,ja,{isHorizontal:ma,constrained:ra,angle:Q,anchor:sa.insidetextanchor}));O.fontSize=ua.size;z(sa.type,O,L);Y.transform=O;m(ya,L,ba,aa).attr("transform",r.getTextTransform(O))}else Q.select("text").remove()}function b(E,L){var Q=Math.PI/180*L;L=Math.abs(Math.sin(Q));Q=Math.abs(Math.cos(Q));return{x:E.width*Q+E.height*L,y:E.width*L+E.height*Q}}function k(E,L,Q,S,R,O){var T=!!O.isHorizontal,V=!!O.constrained,
X=O.angle||0,ba=O.anchor||"end",aa="end"===ba;ba="start"===ba;var ka=((O.leftToRight||0)+1)/2,ha=1-ka,ca=R.width,sa=R.height,ma=Math.abs(L-E),ra=Math.abs(S-Q);O=ma>2*M&&ra>2*M?M:0;ma-=2*O;ra-=2*O;var qa="auto"===X?0:X;"auto"!==X||ca<=ma&&sa<=ra||!(ca>ma||sa>ra)||(ca>ra||sa>ma)&&ca<sa===ma<ra||(qa+=90);ca=b(R,qa);X=1;V&&(X=Math.min(1,ma/ca.x,ra/ca.y));V=R.left*ha+R.right*ka;R=(R.top+R.bottom)/2;ka=(E+M)*ha+(L-M)*ka;ha=(Q+S)/2;ra=ma=0;if(ba||aa)aa=(T?ca.x:ca.y)/2,ca=T?E<L?1:-1:Q<S?1:-1,T?ba?(ka=E+ca*
O,ma=-ca*aa):(ka=L-ca*O,ma=ca*aa):ba?(ha=Q+ca*O,ra=-ca*aa):(ha=S-ca*O,ra=ca*aa);return{textX:V,textY:R,targetX:ka,targetY:ha,anchorX:ma,anchorY:ra,scale:X,rotate:qa}}function e(E,L,Q,S,R,O){var T=!!O.isHorizontal,V=!!O.constrained,X=O.angle||0,ba=R.width,aa=R.height,ka=Math.abs(L-E),ha=Math.abs(S-Q);O=T?ha>2*M?M:0:ka>2*M?M:0;var ca=1;V&&(ca=T?Math.min(1,ha/aa):Math.min(1,ka/ba));V="auto"===X?0:X;X=b(R,V);X=(T?X.x:X.y)/2;ba=(R.left+R.right)/2;R=(R.top+R.bottom)/2;aa=(E+L)/2;ka=(Q+S)/2;var sa=ha=0;
E=T?L<E?1:-1:Q<S?1:-1;T?(aa=L-E*O,ha=E*X):(ka=S+E*O,sa=-E*X);return{textX:ba,textY:R,targetX:aa,targetY:ka,anchorX:ha,anchorY:sa,scale:ca,rotate:V}}function h(E,L,Q,S,R){var O=L[0].trace;E=O.texttemplate?c(E,L,Q,S,R):O.textinfo?g(L,Q,S,R):u.getValue(O.text,Q);return u.coerceString(I,E)}function l(E,L){E=u.getValue(E.textposition,L);return u.coerceEnumerated(J,E)}function c(E,L,Q,S,R){function O(sa){return A(ca,+sa,!0).text}var T=L[0].trace,V=r.castOption(T,Q,"texttemplate");if(!V)return"";var X="waterfall"===
T.type,ba="funnel"===T.type;if("h"===T.orientation){var aa="y";var ka=R;var ha="x";var ca=S}else aa="x",ka=S,ha="y",ca=R;Q=L[Q];L={};L.label=Q.p;L.labelLabel=L[aa+"Label"]=A(ka,Q.p,!0).text;aa=r.castOption(T,Q.i,"text");if(0===aa||aa)L.text=aa;L.value=Q.s;L.valueLabel=L[ha+"Label"]=O(Q.s);ha={};N(ha,T,Q.i);X&&(L.delta=+Q.rawS||Q.s,L.deltaLabel=O(L.delta),L.final=Q.v,L.finalLabel=O(L.final),L.initial=L.final-L.delta,L.initialLabel=O(L.initial));ba&&(L.value=Q.s,L.valueLabel=O(L.value),L.percentInitial=
Q.begR,L.percentInitialLabel=r.formatPercent(Q.begR),L.percentPrevious=Q.difR,L.percentPreviousLabel=r.formatPercent(Q.difR),L.percentTotal=Q.sumR,L.percenTotalLabel=r.formatPercent(Q.sumR));if(X=r.castOption(T,Q.i,"customdata"))L.customdata=X;return r.texttemplateString(V,L,E._d3locale,ha,L,T._meta||{})}function g(E,L,Q,S){function R(ca){return A(T?Q:S,+ca,!0).text}var O=E[0].trace,T="h"===O.orientation,V="waterfall"===O.type,X="funnel"===O.type,ba=E[L],aa=O.textinfo.split("+"),ka=[],ha=function(ca){return-1!==
aa.indexOf(ca)};ha("label")&&ka.push(A(T?S:Q,E[L].p,!0).text);ha("text")&&(E=r.castOption(O,ba.i,"text"),(0===E||E)&&ka.push(E));V&&(V=+ba.rawS||ba.s,E=ba.v,L=E-V,ha("initial")&&ka.push(R(L)),ha("delta")&&ka.push(R(V)),ha("final")&&ka.push(R(E)));X&&(ha("value")&&ka.push(R(ba.s)),X=0,ha("percent initial")&&X++,ha("percent previous")&&X++,ha("percent total")&&X++,X=1<X,ha("percent initial")&&(E=r.formatPercent(ba.begR),X&&(E+=" of initial"),ka.push(E)),ha("percent previous")&&(E=r.formatPercent(ba.difR),
X&&(E+=" of previous"),ka.push(E)),ha("percent total")&&(E=r.formatPercent(ba.sumR),X&&(E+=" of total"),ka.push(E)));return ka.join("\x3cbr\x3e")}var d=a("d3"),p=a("fast-isnumeric"),r=a("../../lib"),t=a("../../lib/svg_text_utils"),w=a("../../components/color"),x=a("../../components/drawing"),y=a("../../registry"),A=a("../../plots/cartesian/axes").tickText;C=a("./uniform_text");var z=C.recordMinTextSize,F=C.clearMinTextSize,D=a("./style"),u=a("./helpers");C=a("./constants");var B=a("./attributes"),
I=B.text,J=B.textposition,N=a("../../components/fx/helpers").appendArrayPointValue,M=C.TEXTPAD;G.exports={plot:function(E,L,Q,S,R,O){var T=L.xaxis,V=L.yaxis,X=E._fullLayout;R||(R={mode:X.barmode,norm:X.barmode,gap:X.bargap,groupgap:X.bargroupgap},F("bar",X));Q=r.makeTraceGroups(S,Q,"trace bars").each(function(ba){var aa=d.select(this),ka=ba[0].trace,ha="funnel"===ka.type,ca="bar"===ka.type||ha,sa=0;"waterfall"===ka.type&&ka.connector.visible&&"between"===ka.connector.mode&&(sa=ka.connector.line.width/
2);var ma="h"===ka.orientation,ra=R&&0<R.duration;ha=r.ensureSingle(aa,"g","points");var qa=ka.ids?q:void 0;ha=ha.selectAll("g.point").data(r.identity,qa);ha.enter().append("g").classed("point",!0);ha.exit().remove();ha.each(function(Y,pa){function oa(Fa){var Na=d.round(Pa/2%1,2);return 0===R.gap&&0===R.groupgap?d.round(Math.round(Fa)-Na,2):Fa}function ua(Fa,Na,$a){return $a&&Fa===Na?Fa:2<=Math.abs(Fa-Na)?oa(Fa):Fa>Na?Math.ceil(Fa):Math.floor(Fa)}var ya=d.select(this),ja=n(Y,T,V,ma),za=ja[0][0],Ba=
ja[0][1],Ma=ja[1][0];ja=ja[1][1];var Oa=0===(ma?Ba-za:ja-Ma);Oa&&ca&&u.getLineWidth(ka,Y)&&(Oa=!1);Oa||(Oa=!p(za)||!p(Ba)||!p(Ma)||!p(ja));(Y.isBlank=Oa)&&(ma?Ba=za:ja=Ma);sa&&!Oa&&(ma?(za-=(za<Ba?1:-1)*sa,Ba+=(za<Ba?1:-1)*sa):(Ma-=(Ma<ja?1:-1)*sa,ja+=(Ma<ja?1:-1)*sa));if("waterfall"===ka.type){if(!Oa){var Ia=ka[Y.dir].marker;var Pa=Ia.line.width;Ia=Ia.color}}else Pa=u.getLineWidth(ka,Y),Ia=Y.mc||ka.marker.color;E._context.staticPlot||(Ia=1>w.opacity(Ia)||.01<Pa?oa:ua,za=Ia(za,Ba,ma),Ba=Ia(Ba,za,
ma),Ma=Ia(Ma,ja,!ma),ja=Ia(ja,Ma,!ma));Ia=m(r.ensureSingle(ya,"path"),X,R,O);Ia.style("vector-effect","non-scaling-stroke").attr("d",isNaN((Ba-za)*(ja-Ma))?"M0,0Z":"M"+za+","+Ma+"V"+ja+"H"+Ba+"V"+Ma+"Z").call(x.setClipUrl,L.layerClipId,E);!X.uniformtext.mode&&ra&&(Oa=x.makePointStyleFns(ka),x.singlePointStyle(Y,Ia,ka,Oa,E));f(E,L,ya,ba,pa,za,Ba,Ma,ja,R,O);L.layerClipId&&x.hideOutsideRangePoint(Y,ya.select("text"),T,V,ka.xcalendar,ka.ycalendar)});x.setClipUrl(aa,!1===ka.cliponaxis?null:L.layerClipId,
E)});y.getComponentMethod("errorbars","plot")(E,Q,L,R)},toMoveInsideBar:k}},{"../../components/color":615,"../../components/drawing":637,"../../components/fx/helpers":651,"../../lib":750,"../../lib/svg_text_utils":774,"../../plots/cartesian/axes":799,"../../registry":882,"./attributes":892,"./constants":894,"./helpers":898,"./style":906,"./uniform_text":908,d3:169,"fast-isnumeric":241}],904:[function(a,G,C){G.exports=function(q,n){var m=q.cd,f=q.xaxis,b=q.yaxis,k=m[0].trace,e="funnel"===k.type;k=
"h"===k.orientation;var h=[],l;if(!1===n)for(l=0;l<m.length;l++)m[l].selected=0;else for(l=0;l<m.length;l++){var c=m[l];if("ct"in c)var g=c.ct;else{var d=c,p=f,r=b;g=k;var t=e,w=p.c2p(g?d.s0:d.p0,!0);p=p.c2p(g?d.s1:d.p1,!0);var x=r.c2p(g?d.p0:d.s0,!0);d=r.c2p(g?d.p1:d.s1,!0);g=t?[(w+p)/2,(x+d)/2]:g?[p,(x+d)/2]:[(w+p)/2,d]}n.contains(g,!1,l,q)?(h.push({pointNumber:l,x:f.c2d(c.x),y:b.c2d(c.y)}),c.selected=1):c.selected=0}return h}},{}],905:[function(a,G,C){function q(f,b){this.traces=f;this.sepNegVal=
b.sepNegVal;this.overlapNoMerge=b.overlapNoMerge;for(var k=Infinity,e=[],h=0;h<f.length;h++){for(var l=f[h],c=0;c<l.length;c++){var g=l[c];g.p!==m&&e.push(g.p)}l[0]&&l[0].width1&&(k=Math.min(l[0].width1,k))}this.positions=e;f=n(e,{unitMinDiff:b.unitMinDiff});this.distinctPositions=f.vals;this.binWidth=this.minDiff=1===f.vals.length&&Infinity!==k?k:Math.min(f.minDiff,k);this.bins={}}G.exports=q;var n=a("../../lib").distinctVals,m=a("../../constants/numerical").BADNUM;q.prototype.put=function(f,b){f=
this.getLabel(f,b);var k=this.bins[f]||0;this.bins[f]=k+b;return k};q.prototype.get=function(f,b){f=this.getLabel(f,b);return this.bins[f]||0};q.prototype.getLabel=function(f,b){return(0>b&&this.sepNegVal?"v":"^")+(this.overlapNoMerge?f:Math.round(f/this.binWidth))}},{"../../constants/numerical":725,"../../lib":750}],906:[function(a,G,C){function q(y,A,z){y.selectAll("text").each(function(F){var D=h.select(this);F=g.ensureUniformFontSize(z,m(D,F,A,z));c.font(D,F)})}function n(y,A,z){y.each(function(F){var D=
h.select(this);if(F.selected){F=g.ensureUniformFontSize(z,m(D,F,A,z));var u=A.selected.textfont&&A.selected.textfont.color;u&&(F.color=u);c.font(D,F)}else c.selectedTextStyle(D,A)})}function m(y,A,z,F){F=F._fullLayout.font;var D=z.textfont;y.classed("bartext-inside")?(y=e(A,z),D=f(z,A.i,F,y)):y.classed("bartext-outside")&&(D=b(z,A.i,F));return D}function f(y,A,z,F){z=k(r,y.textfont,A,z);if(void 0===y._input.textfont||void 0===y._input.textfont.color||Array.isArray(y.textfont.color)&&void 0===y.textfont.color[A])z=
{color:l.contrast(F),family:z.family,size:z.size};return k(t,y.insidetextfont,A,z)}function b(y,A,z){z=k(r,y.textfont,A,z);return k(w,y.outsidetextfont,A,z)}function k(y,A,z,F){A=A||{};var D=x.getValue(A.family,z),u=x.getValue(A.size,z);A=x.getValue(A.color,z);return{family:x.coerceString(y.family,D,F.family),size:x.coerceNumber(y.size,u,F.size),color:x.coerceColor(y.color,A,F.color)}}function e(y,A){return"waterfall"===A.type?A[y.dir].marker.color:y.mc||A.marker.color}var h=a("d3"),l=a("../../components/color"),
c=a("../../components/drawing"),g=a("../../lib"),d=a("../../registry"),p=a("./uniform_text").resizeText;C=a("./attributes");var r=C.textfont,t=C.insidetextfont,w=C.outsidetextfont,x=a("./helpers");G.exports={style:function(y){var A=h.select(y).selectAll("g.barlayer").selectAll("g.trace");p(y,A,"bar");var z=A.size(),F=y._fullLayout;A.style("opacity",function(D){return D[0].trace.opacity}).each(function(D){("stack"===F.barmode&&1<z||0===F.bargap&&0===F.bargroupgap&&!D[0].trace.marker.line.width)&&h.select(this).attr("shape-rendering",
"crispEdges")});A.selectAll("g.points").each(function(D){var u=h.select(this);D=D[0].trace;c.pointStyle(u.selectAll("path"),D,y);q(u,D,y)});d.getComponentMethod("errorbars","style")(A)},styleTextPoints:q,styleOnSelect:function(y,A,z){A=A[0].trace;A.selectedpoints?(c.selectedPointStyle(z.selectAll("path"),A),n(z.selectAll("text"),A,y)):(c.pointStyle(z.selectAll("path"),A,y),q(z,A,y),d.getComponentMethod("errorbars","style")(z))},getInsideTextFont:f,getOutsideTextFont:b,getBarColor:e,resizeText:p}},
{"../../components/color":615,"../../components/drawing":637,"../../lib":750,"../../registry":882,"./attributes":892,"./helpers":898,"./uniform_text":908,d3:169}],907:[function(a,G,C){var q=a("../../components/color"),n=a("../../components/colorscale/helpers").hasColorscale,m=a("../../components/colorscale/defaults");G.exports=function(f,b,k,e,h){k("marker.color",e);n(f,"marker")&&m(f,b,h,k,{prefix:"marker.",cLetter:"c"});k("marker.line.color",q.defaultLine);n(f,"marker.line")&&m(f,b,h,k,{prefix:"marker.line.",
cLetter:"c"});k("marker.line.width");k("marker.opacity");k("selected.marker.color");k("unselected.marker.color")}},{"../../components/color":615,"../../components/colorscale/defaults":625,"../../components/colorscale/helpers":626}],908:[function(a,G,C){var q=a("d3"),n=a("../../lib");G.exports={recordMinTextSize:function(m,f,b){if(b.uniformtext.mode){m="_"+m+"Text_minsize";var k=b.uniformtext.minsize,e=f.scale*f.fontSize;f.hide=e<k;b[m]=b[m]||Infinity;f.hide||(b[m]=Math.min(b[m],Math.max(e,k)))}},
clearMinTextSize:function(m,f){f["_"+m+"Text_minsize"]=void 0},resizeText:function(m,f,b){m=m._fullLayout;var k=m["_"+b+"Text_minsize"];if(k){var e="hide"===m.uniformtext.mode;switch(b){case "funnelarea":case "pie":case "sunburst":b="g.slice";break;case "treemap":b="g.slice, g.pathbar";break;default:b="g.points \x3e g.point"}f.selectAll(b).each(function(h){if(h=h.transform)h.scale=e&&h.hide?0:k/h.fontSize,q.select(this).select("text").attr("transform",n.getTextTransform(h))})}}}},{"../../lib":750,
d3:169}],909:[function(a,G,C){C=a("../../plots/template_attributes").hovertemplateAttrs;var q=a("../../lib/extend").extendFlat,n=a("../scatterpolar/attributes");a=a("../bar/attributes");G.exports={r:n.r,theta:n.theta,r0:n.r0,dr:n.dr,theta0:n.theta0,dtheta:n.dtheta,thetaunit:n.thetaunit,base:q({},a.base,{}),offset:q({},a.offset,{}),width:q({},a.width,{}),text:q({},a.text,{}),hovertext:q({},a.hovertext,{}),marker:a.marker,hoverinfo:n.hoverinfo,hovertemplate:C(),selected:a.selected,unselected:a.unselected}},
{"../../lib/extend":740,"../../plots/template_attributes":877,"../bar/attributes":892,"../scatterpolar/attributes":1232}],910:[function(a,G,C){var q=a("../../components/colorscale/helpers").hasColorscale,n=a("../../components/colorscale/calc"),m=a("../bar/arrays_to_calcdata"),f=a("../bar/cross_trace_calc").setGroupPositions,b=a("../scatter/calc_selection"),k=a("../../registry").traceIs,e=a("../../lib").extendFlat;G.exports={calc:function(h,l){function c(x){var y=l[x];void 0!==y&&(l["_"+x]=Array.isArray(y)?
p.makeCalcdata(l,x):p.d2c(y,l.thetaunit))}var g=h._fullLayout,d=l.subplot,p=g[d].angularaxis;g=g[d].radialaxis.makeCalcdata(l,"r");d=p.makeCalcdata(l,"theta");for(var r=l._length,t=Array(r),w=0;w<r;w++)t[w]={p:d[w],s:g[w]};"linear"===p.type&&(c("width"),c("offset"));q(l,"marker")&&n(h,l,{vals:l.marker.color,containerStr:"marker",cLetter:"c"});q(l,"marker.line")&&n(h,l,{vals:l.marker.line.color,containerStr:"marker.line",cLetter:"c"});m(t,l);b(t,l);return t},crossTraceCalc:function(h,l,c){for(var g=
h.calcdata,d=[],p=0;p<g.length;p++){var r=g[p],t=r[0].trace;!0===t.visible&&k(t,"bar")&&t.subplot===c&&d.push(r)}c=e({},l.radialaxis,{_id:"x"});f(h,l.angularaxis,c,d,{mode:l.barmode,norm:l.barnorm,gap:l.bargap,groupgap:l.bargroupgap})}}},{"../../components/colorscale/calc":623,"../../components/colorscale/helpers":626,"../../lib":750,"../../registry":882,"../bar/arrays_to_calcdata":891,"../bar/cross_trace_calc":895,"../scatter/calc_selection":1160}],911:[function(a,G,C){var q=a("../../lib"),n=a("../scatterpolar/defaults").handleRThetaDefaults,
m=a("../bar/style_defaults"),f=a("./attributes");G.exports=function(b,k,e,h){function l(c,g){return q.coerce(b,k,f,c,g)}n(b,k,h,l)?(l("thetaunit"),l("base"),l("offset"),l("width"),l("text"),l("hovertext"),l("hovertemplate"),m(b,k,l,e,h),q.coerceSelectionMarkerOpacity(k,l)):k.visible=!1}},{"../../lib":750,"../bar/style_defaults":907,"../scatterpolar/defaults":1234,"./attributes":909}],912:[function(a,G,C){var q=a("../../components/fx"),n=a("../../lib"),m=a("../bar/hover").getTraceColor,f=n.fillText,
b=a("../scatterpolar/hover").makeHoverPointText,k=a("../../plots/polar/helpers").isPtInsidePolygon;G.exports=function(e,h,l){var c=e.cd,g=c[0].trace,d=e.subplot,p=d.radialAxis,r=d.vangles,t=r?k:n.isPtInsideSector,w=e.maxHoverDistance,x=d.angularAxis._period||2*Math.PI,y=Math.abs(p.g2p(Math.sqrt(h*h+l*l))),A=Math.atan2(l,h);p.range[0]>p.range[1]&&(A+=Math.PI);q.getClosest(c,function(z){return t(y,A,[z.rp0,z.rp1],[z.thetag0,z.thetag1],r)?w+Math.min(1,Math.abs(z.thetag1-z.thetag0)/x)-1+(z.rp1-y)/(z.rp1-
z.rp0)-1:Infinity},e);if(!1!==e.index)return h=c[e.index],e.x0=e.x1=h.ct[0],e.y0=e.y1=h.ct[1],l=n.extendFlat({},h,{r:h.s,theta:h.p}),f(h,g,e),b(l,g,d,e),e.hovertemplate=g.hovertemplate,e.color=m(g,h),e.xLabelVal=e.yLabelVal=void 0,0>h.s&&(e.idealAlign="left"),[e]}},{"../../components/fx":655,"../../lib":750,"../../plots/polar/helpers":864,"../bar/hover":899,"../scatterpolar/hover":1236}],913:[function(a,G,C){G.exports={moduleType:"trace",name:"barpolar",basePlotModule:a("../../plots/polar"),categories:["polar",
"bar","showLegend"],attributes:a("./attributes"),layoutAttributes:a("./layout_attributes"),supplyDefaults:a("./defaults"),supplyLayoutDefaults:a("./layout_defaults"),calc:a("./calc").calc,crossTraceCalc:a("./calc").crossTraceCalc,plot:a("./plot"),colorbar:a("../scatter/marker_colorbar"),formatLabels:a("../scatterpolar/format_labels"),style:a("../bar/style").style,styleOnSelect:a("../bar/style").styleOnSelect,hoverPoints:a("./hover"),selectPoints:a("../bar/select"),meta:{}}},{"../../plots/polar":865,
"../bar/select":904,"../bar/style":906,"../scatter/marker_colorbar":1176,"../scatterpolar/format_labels":1235,"./attributes":909,"./calc":910,"./defaults":911,"./hover":912,"./layout_attributes":914,"./layout_defaults":915,"./plot":916}],914:[function(a,G,C){G.exports={barmode:{valType:"enumerated",values:["stack","overlay"],dflt:"stack",editType:"calc"},bargap:{valType:"number",dflt:.1,min:0,max:1,editType:"calc"}}},{}],915:[function(a,G,C){var q=a("../../lib"),n=a("./layout_attributes");G.exports=
function(m,f,b){for(var k={},e,h=0;h<b.length;h++)e=b[h],"barpolar"===e.type&&!0===e.visible&&(e=e.subplot,k[e]||(q.coerce(m[e]||{},f[e],n,"barmode",void 0),q.coerce(m[e]||{},f[e],n,"bargap",void 0),k[e]=1))}},{"../../lib":750,"./layout_attributes":914}],916:[function(a,G,C){function q(e){var h=e.cxx,l=e.cyy;return e.vangles?function(c,g,d,p){if(0<f.angleDelta(d,p)){var r=d;d=p}else r=p;p=k.findEnclosingVertexAngles(r,e.vangles)[0];var t=k.findEnclosingVertexAngles(d,e.vangles)[1];return k.pathPolygonAnnulus(c,
g,r,d,[p,(r+d)/2,t],h,l)}:function(c,g,d,p){return f.pathAnnulus(c,g,d,p,h,l)}}var n=a("d3"),m=a("fast-isnumeric"),f=a("../../lib"),b=a("../../components/drawing"),k=a("../../plots/polar/helpers");G.exports=function(e,h,l){var c=h.xaxis,g=h.yaxis,d=h.radialAxis,p=h.angularAxis,r=q(h),t=h.layers.frontplot.select("g.barlayer");f.makeTraceGroups(t,l,"trace bars").each(function(){var w=n.select(this),x=f.ensureSingle(w,"g","points").selectAll("g.point").data(f.identity);x.enter().append("g").style("vector-effect",
"non-scaling-stroke").style("stroke-miterlimit",2).classed("point",!0);x.exit().remove();x.each(function(y){var A=n.select(this),z=y.rp0=d.c2p(y.s0),F=y.rp1=d.c2p(y.s1),D=y.thetag0=p.c2g(y.p0),u=y.thetag1=p.c2g(y.p1);if(m(z)&&m(F)&&m(D)&&m(u)&&z!==F&&D!==u){var B=d.c2g(y.s1),I=(D+u)/2;y.ct=[c.c2p(B*Math.cos(I)),g.c2p(B*Math.sin(I))];y=r(z,F,D,u)}else y="M0,0Z";f.ensureSingle(A,"path").attr("d",y)});b.setClipUrl(w,h._hasClipOnAxisFalse?h.clipIds.forTraces:null,e)})}},{"../../components/drawing":637,
"../../lib":750,"../../plots/polar/helpers":864,d3:169,"fast-isnumeric":241}],917:[function(a,G,C){C=a("../scatter/attributes");var q=a("../bar/attributes"),n=a("../../components/color/attributes"),m=a("../../plots/template_attributes").hovertemplateAttrs;a=a("../../lib/extend").extendFlat;var f=C.marker,b=f.line;G.exports={y:{valType:"data_array",editType:"calc+clearAxisTypes"},x:{valType:"data_array",editType:"calc+clearAxisTypes"},x0:{valType:"any",editType:"calc+clearAxisTypes"},y0:{valType:"any",
editType:"calc+clearAxisTypes"},dx:{valType:"number",editType:"calc"},dy:{valType:"number",editType:"calc"},xperiod:C.xperiod,yperiod:C.yperiod,xperiod0:C.xperiod0,yperiod0:C.yperiod0,xperiodalignment:C.xperiodalignment,yperiodalignment:C.yperiodalignment,name:{valType:"string",editType:"calc+clearAxisTypes"},q1:{valType:"data_array",editType:"calc+clearAxisTypes"},median:{valType:"data_array",editType:"calc+clearAxisTypes"},q3:{valType:"data_array",editType:"calc+clearAxisTypes"},lowerfence:{valType:"data_array",
editType:"calc"},upperfence:{valType:"data_array",editType:"calc"},notched:{valType:"boolean",editType:"calc"},notchwidth:{valType:"number",min:0,max:.5,dflt:.25,editType:"calc"},notchspan:{valType:"data_array",editType:"calc"},boxpoints:{valType:"enumerated",values:["all","outliers","suspectedoutliers",!1],editType:"calc"},jitter:{valType:"number",min:0,max:1,editType:"calc"},pointpos:{valType:"number",min:-2,max:2,editType:"calc"},boxmean:{valType:"enumerated",values:[!0,"sd",!1],editType:"calc"},
mean:{valType:"data_array",editType:"calc"},sd:{valType:"data_array",editType:"calc"},orientation:{valType:"enumerated",values:["v","h"],editType:"calc+clearAxisTypes"},quartilemethod:{valType:"enumerated",values:["linear","exclusive","inclusive"],dflt:"linear",editType:"calc"},width:{valType:"number",min:0,dflt:0,editType:"calc"},marker:{outliercolor:{valType:"color",dflt:"rgba(0, 0, 0, 0)",editType:"style"},symbol:a({},f.symbol,{arrayOk:!1,editType:"plot"}),opacity:a({},f.opacity,{arrayOk:!1,dflt:1,
editType:"style"}),size:a({},f.size,{arrayOk:!1,editType:"calc"}),color:a({},f.color,{arrayOk:!1,editType:"style"}),line:{color:a({},b.color,{arrayOk:!1,dflt:n.defaultLine,editType:"style"}),width:a({},b.width,{arrayOk:!1,dflt:0,editType:"style"}),outliercolor:{valType:"color",editType:"style"},outlierwidth:{valType:"number",min:0,dflt:1,editType:"style"},editType:"style"},editType:"plot"},line:{color:{valType:"color",editType:"style"},width:{valType:"number",min:0,dflt:2,editType:"style"},editType:"plot"},
fillcolor:C.fillcolor,whiskerwidth:{valType:"number",min:0,max:1,dflt:.5,editType:"calc"},offsetgroup:q.offsetgroup,alignmentgroup:q.alignmentgroup,selected:{marker:C.selected.marker,editType:"style"},unselected:{marker:C.unselected.marker,editType:"style"},text:a({},C.text,{}),hovertext:a({},C.hovertext,{}),hovertemplate:m({}),hoveron:{valType:"flaglist",flags:["boxes","points"],dflt:"boxes+points",editType:"style"}}},{"../../components/color/attributes":614,"../../lib/extend":740,"../../plots/template_attributes":877,
"../bar/attributes":892,"../scatter/attributes":1158}],918:[function(a,G,C){function q(x,y,A,z){var F=y+"0"in x;if(y in x||F&&"d"+y in x)return z=A.makeCalcdata(x,y),[d(x,A,y,z),z];z=F?x[y+"0"]:"name"in x&&("category"===A.type||c(x.name)&&-1!==["linear","log"].indexOf(A.type)||p.isDateTime(x.name)&&"date"===A.type)?x.name:z;y="multicategory"===A.type?A.r2c_just_indices(z):A.d2c(z,0,x[y+"calendar"]);x=x._length;A=Array(x);for(z=0;z<x;z++)A[z]=y;return[A]}function n(x,y){for(var A=x.length,z=Array(A+
1),F=0;F<A;F++)z[F]=x[F]-y;z[A]=x[A-1]+y;return z}function m(x){for(var y=Array(x),A=0;A<x;A++)y[A]=[];return y}function f(x,y,A){for(var z in w)p.isArrayOrTypedArray(y[z])&&(Array.isArray(A)?p.isArrayOrTypedArray(y[z][A[0]])&&(x[w[z]]=y[z][A[0]][A[1]]):x[w[z]]=y[z][A])}function b(x,y){if(p.isArrayOrTypedArray(y.selectedpoints))for(var A=0;A<x.length;A++){for(var z=x[A].pts||[],F={},D=0;D<z.length;D++)F[z[D].i]=D;p.tagSelected(z,y,F)}}function k(x,y){return x.v-y.v}function e(x){return x.v}function h(x,
y,A){return 0===A?x.q1:Math.min(x.q1,y[Math.min(p.findBin(2.5*x.q1-1.5*x.q3,y,!0)+1,A-1)])}function l(x,y,A){return 0===A?x.q3:Math.max(x.q3,y[Math.max(p.findBin(2.5*x.q3-1.5*x.q1,y),0)])}var c=a("fast-isnumeric"),g=a("../../plots/cartesian/axes"),d=a("../../plots/cartesian/align_period"),p=a("../../lib"),r=a("../../constants/numerical").BADNUM,t=p._;G.exports=function(x,y){var A=x._fullLayout,z=g.getFromId(x,y.xaxis||"x"),F=g.getFromId(x,y.yaxis||"y"),D=[],u="violin"===y.type?"_numViolins":"_numBoxes",
B,I;if("h"===y.orientation){var J=z;var N="x";z="y";var M=!!y.yperiodalignment}else J=F,N="y",F=z,z="x",M=!!y.xperiodalignment;F=q(y,z,F,A[u]);var E=F[0],L=F[1];F=p.distinctVals(E);var Q=F.vals;F=F.minDiff/2;var S="all"===(y.boxpoints||y.points)?p.identity:function(ca){return ca.v<X.lf||ca.v>X.uf};if(y._hasPreCompStats){var R=y[N],O=function(ca){return J.d2c((y[ca]||[])[B])};Q=Infinity;var T=-Infinity;for(B=0;B<y._length;B++){var V=E[B];if(c(V)){var X={};X.pos=X[z]=V;M&&L&&(X.orig_p=L[B]);X.q1=O("q1");
X.med=O("median");X.q3=O("q3");V=[];if(R&&p.isArrayOrTypedArray(R[B]))for(I=0;I<R[B].length;I++){var ba=J.d2c(R[B][I]);ba!==r&&(ba={v:ba,i:[B,I]},f(ba,y,[B,I]),V.push(ba))}X.pts=V.sort(k);ba=X[N]=V.map(e);I=ba.length;if(X.med!==r&&X.q1!==r&&X.q3!==r&&X.med>=X.q1&&X.q3>=X.med){var aa=O("lowerfence");X.lf=aa!==r&&aa<=X.q1?aa:h(X,ba,I);aa=O("upperfence");X.uf=aa!==r&&aa>=X.q3?aa:l(X,ba,I);aa=O("mean");X.mean=aa!==r?aa:I?p.mean(ba,I):(X.q1+X.q3)/2;var ka=O("sd");X.sd=aa!==r&&0<=ka?ka:I?p.stdev(ba,I,X.mean):
X.q3-X.q1;X.lo=4*X.q1-3*X.q3;X.uo=4*X.q3-3*X.q1;aa=O("notchspan");aa=aa!==r&&0<aa?aa:0===I?0:1.57*(X.q3-X.q1)/Math.sqrt(I);X.ln=X.med-aa;X.un=X.med+aa;aa=X.lf;ka=X.uf;y.boxpoints&&ba.length&&(aa=Math.min(aa,ba[0]),ka=Math.max(ka,ba[I-1]));y.notched&&(aa=Math.min(aa,X.ln),ka=Math.max(ka,X.un));X.min=aa;X.max=ka}else p.warn(["Invalid input - make sure that q1 \x3c\x3d median \x3c\x3d q3","q1 \x3d "+X.q1,"median \x3d "+X.med,"q3 \x3d "+X.q3].join("\n")),ba=X.med!==r?X.med:X.q1!==r?X.q3!==r?(X.q1+X.q3)/
2:X.q1:X.q3!==r?X.q3:0,X.med=ba,X.q1=X.q3=ba,X.lf=X.uf=ba,X.mean=X.sd=ba,X.ln=X.un=ba,X.min=X.max=ba;Q=Math.min(Q,X.min);T=Math.max(T,X.max);X.pts2=V.filter(S);D.push(X)}}y._extremes[J._id]=g.findExtremes(J,[Q,T],{padded:!0})}else{M=J.makeCalcdata(y,N);V=n(Q,F);L=Q.length;T=m(L);for(B=0;B<y._length;B++)ba=M[B],c(ba)&&(I=p.findBin(E[B],V),0<=I&&I<L&&(ba={v:ba,i:B},f(ba,y,B),T[I].push(ba)));E=Infinity;aa=-Infinity;V=y.quartilemethod;ka="exclusive"===V;var ha="inclusive"===V;for(B=0;B<L;B++)0<T[B].length&&
(X={},X.pos=X[z]=Q[B],V=X.pts=T[B].sort(k),ba=X[N]=V.map(e),I=ba.length,X.min=ba[0],X.max=ba[I-1],X.mean=p.mean(ba,I),X.sd=p.stdev(ba,I,X.mean),X.med=p.interp(ba,.5),I%2&&(ka||ha)?(ka?(R=ba.slice(0,I/2),O=ba.slice(I/2+1)):ha&&(R=ba.slice(0,I/2+1),O=ba.slice(I/2)),X.q1=p.interp(R,.5),X.q3=p.interp(O,.5)):(X.q1=p.interp(ba,.25),X.q3=p.interp(ba,.75)),X.lf=h(X,ba,I),X.uf=l(X,ba,I),X.lo=4*X.q1-3*X.q3,X.uo=4*X.q3-3*X.q1,ba=0===I?0:1.57*(X.q3-X.q1)/Math.sqrt(I),X.ln=X.med-ba,X.un=X.med+ba,E=Math.min(E,
X.ln),aa=Math.max(aa,X.un),X.pts2=V.filter(S),D.push(X));y._extremes[J._id]=g.findExtremes(J,y.notched?M.concat([E,aa]):M,{padded:!0})}b(D,y);return 0<D.length?(D[0].t={num:A[u],dPos:F,posLetter:z,valLetter:N,labels:{med:t(x,"median:"),min:t(x,"min:"),q1:t(x,"q1:"),q3:t(x,"q3:"),max:t(x,"max:"),mean:"sd"===y.boxmean?t(x,"mean ± σ:"):t(x,"mean:"),lf:t(x,"lower fence:"),uf:t(x,"upper fence:")}},A[u]++,D):[{t:{empty:!0}}]};var w={text:"tx",hovertext:"htx"}},{"../../constants/numerical":725,"../../lib":750,
"../../plots/cartesian/align_period":796,"../../plots/cartesian/axes":799,"fast-isnumeric":241}],919:[function(a,G,C){function q(k,e,h,l){var c=e.calcdata;e=e._fullLayout;var g=l._id,d=g.charAt(0),p,r,t=[],w=0;for(p=0;p<h.length;p++){var x=c[h[p]];for(r=0;r<x.length;r++)t.push(l.c2l(x[r].pos,!0)),w+=(x[r].pts2||[]).length}if(t.length){p=m.distinctVals(t,{unitMinDiff:"category"===l.type||"multicategory"===l.type});t=p.minDiff/2;n.minDtick(l,p.minDiff,p.vals[0],!0);var y=e["violin"===k?"_numViolins":
"_numBoxes"],A="group"===e[k+"mode"]&&1<y,z=1-e[k+"gap"];k=1-e[k+"groupgap"];for(p=0;p<h.length;p++){x=c[h[p]];var F=x[0].trace,D=x[0].t;r=F.width;var u=F.side,B,I;if(r){var J=B=I=r/2;var N=0}else J=t,A?(B=f(e,l._id)+F.orientation,I=(B=Object.keys(((e._alignmentOpts[B]||{})[F.alignmentgroup]||{}).offsetGroups||{}).length)||y,N=B?F._offsetIndex:D.num,B=J*z*k/I,N=2*J*(-.5+(N+.5)/I)*z,I=J*z/I):(B=J*z*k,N=0,I=J);D.dPos=J;D.bPos=N;D.bdPos=B;D.wHover=I;B=N+B;D=!!r;I=(F.boxpoints||F.points)&&0<w;if("positive"===
u)u=J*(r?1:.5),r=N;else if("negative"===u){u=N;r=J*(r?1:.5);var M=B}else u=r=J,N=M=B;if(I){J=F.pointpos;I=F.jitter;var E=F.marker.size/2,L=0;if(0<=J+I)if(L=B*(J+I),L>u){D=!0;var Q=E;var S=L}else L>N&&(Q=E,S=u);L<=u&&(S=u);u=0;if(0>=J-I)if(u=-B*(J-I),u>r){D=!0;var R=E;var O=u}else u>M&&(R=E,O=r);u<=r&&(O=r)}else S=u,O=r;J=Array(x.length);for(r=0;r<x.length;r++)J[r]=x[r].pos;F._extremes[g]=n.findExtremes(l,J,{padded:D,vpadminus:O,vpadplus:S,vpadLinearized:!0,ppadminus:{x:R,y:Q}[d],ppadplus:{x:Q,y:R}[d]})}}}
var n=a("../../plots/cartesian/axes"),m=a("../../lib"),f=a("../../plots/cartesian/axis_ids").getAxisGroup,b=["v","h"];G.exports={crossTraceCalc:function(k,e){var h=k.calcdata,l=e.xaxis;e=e.yaxis;for(var c=0;c<b.length;c++){for(var g=b[c],d="h"===g?e:l,p=[],r=0;r<h.length;r++){var t=h[r],w=t[0].t;t=t[0].trace;!0!==t.visible||"box"!==t.type&&"candlestick"!==t.type||w.empty||(t.orientation||"v")!==g||t.xaxis!==l._id||t.yaxis!==e._id||p.push(r)}q("box",k,p,d)}},setPositionOffset:q}},{"../../lib":750,
"../../plots/cartesian/axes":799,"../../plots/cartesian/axis_ids":802}],920:[function(a,G,C){function q(c,g,d,p){function r(I){var J=0;I&&I.length&&(J+=1,m.isArrayOrTypedArray(I[0])&&I[0].length&&(J+=1));return J}function t(I){return m.validate(c[I],l[I])}var w=d("y"),x=d("x");if("box"===g.type){var y=d("q1"),A=d("median");var z=d("q3");g._hasPreCompStats=y&&y.length&&A&&A.length&&z&&z.length;z=Math.min(m.minRowLength(y),m.minRowLength(A),m.minRowLength(z))}y=r(w);A=r(x);var F=y&&m.minRowLength(w),
D=A&&m.minRowLength(x);if(g._hasPreCompStats)switch(String(A)+String(y)){case "00":w=t("x0")||t("dx");var u=!t("y0")&&!t("dy")||w?"v":"h";var B=z;break;case "10":u="v";B=Math.min(z,D);break;case "20":u="h";B=Math.min(z,x.length);break;case "01":u="h";B=Math.min(z,F);break;case "02":u="v";B=Math.min(z,w.length);break;case "12":u="v";B=Math.min(z,D,w.length);break;case "21":u="h";B=Math.min(z,x.length,F);break;case "11":B=0;break;case "22":u=!1;for(B=0;B<x.length;B++)if("category"===h(x[B])){u=!0;break}if(u)u=
"v",B=Math.min(z,D,w.length);else{for(B=0;B<w.length;B++)if("category"===h(w[B])){u=!0;break}u?(u="h",B=Math.min(z,x.length,F)):(u="v",B=Math.min(z,D,w.length))}}else 0<y?(u="v",B=0<A?Math.min(D,F):Math.min(F)):0<A?(u="h",B=Math.min(D)):B=0;B?(g._length=B,w=d("orientation",u),g._hasPreCompStats?"v"===w&&0===A?(d("x0",0),d("dx",1)):"h"===w&&0===y&&(d("y0",0),d("dy",1)):"v"===w&&0===A?d("x0"):"h"===w&&0===y&&d("y0"),f.getComponentMethod("calendars","handleTraceDefaults")(c,g,["x","y"],p)):g.visible=
!1}function n(c,g,d,p){p=p.prefix;c=m.coerce2(c,g,l,"marker.outliercolor");var r=d("marker.line.outliercolor"),t="outliers";if(g._hasPreCompStats)t="all";else if(c||r)t="suspectedoutliers";(p=d(p+"points",t))?(d("jitter","all"===p?.3:0),d("pointpos","all"===p?-1.5:0),d("marker.symbol"),d("marker.opacity"),d("marker.size"),d("marker.color",g.line.color),d("marker.line.color"),d("marker.line.width"),"suspectedoutliers"===p&&(d("marker.line.outliercolor",g.marker.color),d("marker.line.outlierwidth")),
d("selected.marker.color"),d("unselected.marker.color"),d("selected.marker.size"),d("unselected.marker.size"),d("text"),d("hovertext")):delete g.marker;p=d("hoveron");"all"!==p&&-1===p.indexOf("points")||d("hovertemplate");m.coerceSelectionMarkerOpacity(g,d)}var m=a("../../lib"),f=a("../../registry"),b=a("../../components/color"),k=a("../scatter/period_defaults"),e=a("../bar/defaults").handleGroupingDefaults,h=a("../../plots/cartesian/axis_autotype"),l=a("./attributes");G.exports={supplyDefaults:function(c,
g,d,p){function r(x,y){return m.coerce(c,g,l,x,y)}q(c,g,r,p);if(!1!==g.visible){k(c,g,p,r);if(p=g._hasPreCompStats)r("lowerfence"),r("upperfence");r("line.color",(c.marker||{}).color||d);r("line.width");r("fillcolor",b.addOpacity(g.line.color,.5));d=!1;if(p){var t=r("mean"),w=r("sd");t&&t.length&&(d=!0,w&&w.length&&(d="sd"))}r("boxmean",d);r("whiskerwidth");r("width");r("quartilemethod");d=!1;p?(p=r("notchspan"))&&p.length&&(d=!0):m.validate(c.notchwidth,l.notchwidth)&&(d=!0);r("notched",d)&&r("notchwidth");
n(c,g,r,{prefix:"box"})}},crossTraceDefaults:function(c,g){function d(x){return m.coerce(r._input,r,l,x)}for(var p,r,t=0;t<c.length;t++){r=c[t];var w=r.type;if("box"===w||"violin"===w)p=r._input,"group"===g[w+"mode"]&&e(p,r,g,d)}},handleSampleDefaults:q,handlePointsDefaults:n}},{"../../components/color":615,"../../lib":750,"../../plots/cartesian/axis_autotype":800,"../../registry":882,"../bar/defaults":896,"../scatter/period_defaults":1178,"./attributes":917}],921:[function(a,G,C){G.exports=function(q,
n){n.hoverOnBox&&(q.hoverOnBox=n.hoverOnBox);"xVal"in n&&(q.x=n.xVal);"yVal"in n&&(q.y=n.yVal);n.xa&&(q.xaxis=n.xa);n.ya&&(q.yaxis=n.ya);return q}},{}],922:[function(a,G,C){function q(h,l,c,g){function d(S){return(M(S)+E(S))/2}var p=h.cd,r=h.xa,t=h.ya,w=p[0].trace,x=p[0].t,y="violin"===w.type,A=[];var z=x.bdPos;var F=x.wHover,D=function(S){return L.c2l(S.pos)+x.bPos-L.c2l(N)};if(y&&"both"!==w.side){if("positive"===w.side){var u=function(S){S=D(S);return b.inbox(S,S+F,Q)};var B=z;var I=0}"negative"===
w.side&&(u=function(S){S=D(S);return b.inbox(S-F,S,Q)},B=0,I=z)}else u=function(S){S=D(S);return b.inbox(S-F,S+F,Q)},B=I=z;y=y?function(S){return b.inbox(S.span[0]-J,S.span[1]-J,Q)}:function(S){return b.inbox(S.min-J,S.max-J,Q)};if("h"===w.orientation){var J=l;var N=c;var M=y;var E=u;c="y";var L=t;l="x"}else J=c,N=l,M=u,E=y,c="x",L=r,l="y",r=t;z=Math.min(1,z/Math.abs(L.r2c(L.range[1])-L.r2c(L.range[0])));var Q=h.maxHoverDistance-z;z=h.maxSpikeDistance-z;g=b.getDistanceFunction(g,M,E,d);b.getClosest(p,
g,h);if(!1===h.index)return[];p=p[h.index];g=w.line.color;t=(w.marker||{}).color;k.opacity(g)&&w.line.width?h.color=g:k.opacity(t)&&w.boxpoints?h.color=t:h.color=w.fillcolor;h[c+"0"]=L.c2p(p.pos+x.bPos-I,!0);h[c+"1"]=L.c2p(p.pos+x.bPos+B,!0);h[c+"LabelVal"]=void 0!==p.orig_p?p.orig_p:p.pos;B=c+"Spike";h.spikeDistance=d(p)*z/Q;h[B]=L.c2p(p.pos,!0);I={};g=["med","q1","q3","min","max"];(w.boxmean||(w.meanline||{}).visible)&&g.push("mean");(w.boxpoints||w.points)&&g.push("lf","uf");for(c=0;c<g.length;c++)z=
g[c],z in p&&!(p[z]in I)&&(I[p[z]]=!0,t=p[z],u=r.c2p(t,!0),y=f.extendFlat({},h),y.attr=z,y[l+"0"]=y[l+"1"]=u,y[l+"LabelVal"]=t,y[l+"Label"]=(x.labels?x.labels[z]+" ":"")+m.hoverLabelText(r,t),y.hoverOnBox=!0,"mean"===z&&"sd"in p&&"sd"===w.boxmean&&(y[l+"err"]=p.sd),h.name="",h.spikeDistance=void 0,h[B]=void 0,y.hovertemplate=!1,A.push(y));return A}function n(h,l,c){for(var g=h.cd,d=h.xa,p=h.ya,r=g[0].trace,t=d.c2p(l),w=p.c2p(c),x=b.quadrature(function(F){var D=Math.max(3,F.mrc||0);return Math.max(Math.abs(d.c2p(F.x)-
t)-D,1-3/D)},function(F){var D=Math.max(3,F.mrc||0);return Math.max(Math.abs(p.c2p(F.y)-w)-D,1-3/D)}),y=!1,A=0;A<g.length;A++){l=g[A];for(var z=0;z<(l.pts||[]).length;z++)c=l.pts[z],c=x(c),c<=h.distance&&(h.distance=c,y=[A,z])}if(!y)return!1;l=g[y[0]];c=l.pts[y[1]];g=d.c2p(c.x,!0);x=p.c2p(c.y,!0);y=c.mrc||1;h=f.extendFlat({},h,{index:c.i,color:(r.marker||{}).color,name:r.name,x0:g-y,x1:g+y,y0:x-y,y1:x+y,spikeDistance:h.distance,hovertemplate:r.hovertemplate});g=l.orig_p;x=void 0!==g?g:l.pos;"h"===
r.orientation?(g=p,h.xLabelVal=c.x,h.yLabelVal=x):(g=d,h.xLabelVal=x,h.yLabelVal=c.y);x=g._id.charAt(0);h[x+"Spike"]=g.c2p(l.pos,!0);e(c,r,h);return h}var m=a("../../plots/cartesian/axes"),f=a("../../lib"),b=a("../../components/fx"),k=a("../../components/color"),e=f.fillText;G.exports={hoverPoints:function(h,l,c,g){var d=h.cd[0].trace.hoveron,p=[],r;-1!==d.indexOf("boxes")&&(p=p.concat(q(h,l,c,g)));-1!==d.indexOf("points")&&(r=n(h,l,c));if("closest"===g)return r?[r]:p;r&&p.push(r);return p},hoverOnBoxes:q,
hoverOnPoints:n}},{"../../components/color":615,"../../components/fx":655,"../../lib":750,"../../plots/cartesian/axes":799}],923:[function(a,G,C){G.exports={attributes:a("./attributes"),layoutAttributes:a("./layout_attributes"),supplyDefaults:a("./defaults").supplyDefaults,crossTraceDefaults:a("./defaults").crossTraceDefaults,supplyLayoutDefaults:a("./layout_defaults").supplyLayoutDefaults,calc:a("./calc"),crossTraceCalc:a("./cross_trace_calc").crossTraceCalc,plot:a("./plot").plot,style:a("./style").style,
styleOnSelect:a("./style").styleOnSelect,hoverPoints:a("./hover").hoverPoints,eventData:a("./event_data"),selectPoints:a("./select"),moduleType:"trace",name:"box",basePlotModule:a("../../plots/cartesian"),categories:"cartesian svg symbols oriented box-violin showLegend boxLayout zoomScale".split(" "),meta:{}}},{"../../plots/cartesian":812,"./attributes":917,"./calc":918,"./cross_trace_calc":919,"./defaults":920,"./event_data":921,"./hover":922,"./layout_attributes":924,"./layout_defaults":925,"./plot":926,
"./select":927,"./style":928}],924:[function(a,G,C){G.exports={boxmode:{valType:"enumerated",values:["group","overlay"],dflt:"overlay",editType:"calc"},boxgap:{valType:"number",min:0,max:1,dflt:.3,editType:"calc"},boxgroupgap:{valType:"number",min:0,max:1,dflt:.3,editType:"calc"}}},{}],925:[function(a,G,C){function q(b,k,e,h,l){b=l+"Layout";k=!1;for(var c=0;c<e.length;c++)if(n.traceIs(e[c],b)){k=!0;break}k&&(h(l+"mode"),h(l+"gap"),h(l+"groupgap"))}var n=a("../../registry"),m=a("../../lib"),f=a("./layout_attributes");
G.exports={supplyLayoutDefaults:function(b,k,e){q(b,k,e,function(h,l){return m.coerce(b,k,f,h,l)},"box")},_supply:q}},{"../../lib":750,"../../registry":882,"./layout_attributes":924}],926:[function(a,G,C){function q(e,h,l,c){var g="h"===l.orientation,d=h.val,p=h.pos,r=!!p.rangebreaks,t=c.bPos,w=c.wdPos||0,x=c.bPosPxOffset||0,y=l.whiskerwidth||0,A=l.notched||!1,z=A?1-2*l.notchwidth:1;if(Array.isArray(c.bdPos)){var F=c.bdPos[0];var D=c.bdPos[1]}else D=F=c.bdPos;e=e.selectAll("path.box").data("violin"!==
l.type||l.box.visible?b.identity:[]);e.enter().append("path").style("vector-effect","non-scaling-stroke").attr("class","box");e.exit().remove();e.each(function(u){if(u.empty)return"M0,0Z";var B=p.c2l(u.pos+t,!0),I=p.l2p(B-F)+x,J=p.l2p(B+D)+x,N=r?(I+J)/2:p.l2p(B)+x,M=l.whiskerwidth,E=r?I*M+(1-M)*N:p.l2p(B-w)+x;M=r?J*M+(1-M)*N:p.l2p(B+w)+x;var L=p.l2p(B-F*z)+x;B=p.l2p(B+D*z)+x;var Q=d.c2p(u.q1,!0),S=d.c2p(u.q3,!0),R=b.constrain(d.c2p(u.med,!0),Math.min(Q,S)+1,Math.max(Q,S)-1),O=void 0===u.lf||!1===
l.boxpoints,T=d.c2p(O?u.min:u.lf,!0);O=d.c2p(O?u.max:u.uf,!0);var V=d.c2p(u.ln,!0);u=d.c2p(u.un,!0);g?f.select(this).attr("d","M"+R+","+L+"V"+B+"M"+Q+","+I+"V"+J+(A?"H"+V+"L"+R+","+B+"L"+u+","+J:"")+"H"+S+"V"+I+(A?"H"+u+"L"+R+","+L+"L"+V+","+I:"")+"ZM"+Q+","+N+"H"+T+"M"+S+","+N+"H"+O+(0===y?"":"M"+T+","+E+"V"+M+"M"+O+","+E+"V"+M)):f.select(this).attr("d","M"+L+","+R+"H"+B+"M"+I+","+Q+"H"+J+(A?"V"+V+"L"+B+","+R+"L"+J+","+u:"")+"V"+S+"H"+I+(A?"V"+u+"L"+L+","+R+"L"+I+","+V:"")+"ZM"+N+","+Q+"V"+T+"M"+
N+","+S+"V"+O+(0===y?"":"M"+E+","+T+"H"+M+"M"+E+","+O+"H"+M))})}function n(e,h,l,c){var g=h.x;h=h.y;var d=c.bdPos,p=c.bPos,r=l.boxpoints||l.points;b.seedPseudoRandom();var t=function(w){w.forEach(function(x){x.t=c;x.trace=l});return w};e=e.selectAll("g.points").data(r?t:[]);e.enter().append("g").attr("class","points");e.exit().remove();e=e.selectAll("path").data(function(w){var x=w.pts2;var y=Math.max((w.max-w.min)/10,w.q3-w.q1);var A=1E-9*y,z=.01*y,F=[],D=0;if(l.jitter){if(0===y)for(D=1,F=Array(x.length),
y=0;y<x.length;y++)F[y]=1;else for(y=0;y<x.length;y++){var u=Math.max(0,y-5);var B=x[u].v,I=Math.min(x.length-1,y+5),J=x[I].v;"all"!==r&&(x[y].v<w.lf?J=Math.min(J,w.lf):B=Math.max(B,w.uf));u=Math.sqrt(z*(I-u)/(J-B+A))||0;u=b.constrain(Math.abs(u),0,1);F.push(u);D=Math.max(u,D)}u=2*l.jitter/(D||1)}for(y=0;y<x.length;y++)A=x[y],z=A.v,D=l.jitter?u*F[y]*(b.pseudoRandom()-.5):0,D=w.pos+p+d*(l.pointpos+D),"h"===l.orientation?(A.y=D,A.x=z):(A.x=D,A.y=z),"suspectedoutliers"===r&&z<w.uo&&z>w.lo&&(A.so=!0);
return x});e.enter().append("path").classed("point",!0);e.exit().remove();e.call(k.translatePoints,g,h)}function m(e,h,l,c){var g=h.val,d=h.pos,p=!!d.rangebreaks,r=c.bPos,t=c.bPosPxOffset||0,w=l.boxmean||(l.meanline||{}).visible;if(Array.isArray(c.bdPos)){var x=c.bdPos[0];var y=c.bdPos[1]}else y=x=c.bdPos;e=e.selectAll("path.mean").data("box"===l.type&&l.boxmean||"violin"===l.type&&l.box.visible&&l.meanline.visible?b.identity:[]);e.enter().append("path").attr("class","mean").style({fill:"none","vector-effect":"non-scaling-stroke"});
e.exit().remove();e.each(function(A){var z=d.c2l(A.pos+r,!0),F=d.l2p(z-x)+t,D=d.l2p(z+y)+t;z=p?(F+D)/2:d.l2p(z)+t;var u=g.c2p(A.mean,!0),B=g.c2p(A.mean-A.sd,!0);A=g.c2p(A.mean+A.sd,!0);"h"===l.orientation?f.select(this).attr("d","M"+u+","+F+"V"+D+("sd"===w?"m0,0L"+B+","+z+"L"+u+","+F+"L"+A+","+z+"Z":"")):f.select(this).attr("d","M"+F+","+u+"H"+D+("sd"===w?"m0,0L"+z+","+B+"L"+F+","+u+"L"+z+","+A+"Z":""))})}var f=a("d3"),b=a("../../lib"),k=a("../../components/drawing");G.exports={plot:function(e,h,
l,c){var g=h.xaxis,d=h.yaxis;b.makeTraceGroups(c,l,"trace boxes").each(function(p){var r=f.select(this),t=p[0];p=t.t;t=t.trace;p.wdPos=p.bdPos*t.whiskerwidth;if(!0!==t.visible||p.empty)r.remove();else{if("h"===t.orientation){var w=d;var x=g}else w=g,x=d;q(r,{pos:w,val:x},t,p);n(r,{x:g,y:d},t,p);m(r,{pos:w,val:x},t,p)}})},plotBoxAndWhiskers:q,plotPoints:n,plotBoxMean:m}},{"../../components/drawing":637,"../../lib":750,d3:169}],927:[function(a,G,C){G.exports=function(q,n){var m=q.cd,f=q.xaxis,b=q.yaxis,
k=[],e,h;if(!1===n)for(e=0;e<m.length;e++)for(h=0;h<(m[e].pts||[]).length;h++)m[e].pts[h].selected=0;else for(e=0;e<m.length;e++)for(h=0;h<(m[e].pts||[]).length;h++){var l=m[e].pts[h],c=f.c2p(l.x),g=b.c2p(l.y);n.contains([c,g],null,l.i,q)?(k.push({pointNumber:l.i,x:f.c2d(l.x),y:b.c2d(l.y)}),l.selected=1):l.selected=0}return k}},{}],928:[function(a,G,C){var q=a("d3"),n=a("../../components/color"),m=a("../../components/drawing");G.exports={style:function(f,b,k){b=k?k:q.select(f).selectAll("g.trace.boxes");
b.style("opacity",function(e){return e[0].trace.opacity});b.each(function(e){function h(d,p,r,t){d.style("stroke-width",p+"px").call(n.stroke,r).call(n.fill,t)}var l=q.select(this),c=e[0].trace;e=c.line.width;var g=l.selectAll("path.box");"candlestick"===c.type?g.each(function(d){if(!d.empty){var p=q.select(this),r=c[d.dir];h(p,r.line.width,r.line.color,r.fillcolor);p.style("opacity",c.selectedpoints&&!d.selected?.3:1)}}):(h(g,e,c.line.color,c.fillcolor),l.selectAll("path.mean").style({"stroke-width":e,
"stroke-dasharray":2*e+"px,"+e+"px"}).call(n.stroke,c.line.color),l=l.selectAll("path.point"),m.pointStyle(l,c,f))})},styleOnSelect:function(f,b,k){b=b[0].trace;k=k.selectAll("path.point");b.selectedpoints?m.selectedPointStyle(k,b):m.pointStyle(k,b,f)}}},{"../../components/color":615,"../../components/drawing":637,d3:169}],929:[function(a,G,C){function q(f){return{line:{color:n({},m.line.color,{dflt:f}),width:m.line.width,editType:"style"},fillcolor:m.fillcolor,editType:"style"}}var n=a("../../lib").extendFlat;
C=a("../ohlc/attributes");var m=a("../box/attributes");G.exports={xperiod:C.xperiod,xperiod0:C.xperiod0,xperiodalignment:C.xperiodalignment,x:C.x,open:C.open,high:C.high,low:C.low,close:C.close,line:{width:n({},m.line.width,{}),editType:"style"},increasing:q(C.increasing.line.color.dflt),decreasing:q(C.decreasing.line.color.dflt),text:C.text,hovertext:C.hovertext,whiskerwidth:n({},m.whiskerwidth,{dflt:0}),hoverlabel:C.hoverlabel}},{"../../lib":750,"../box/attributes":917,"../ohlc/attributes":1104}],
930:[function(a,G,C){function q(k,e,h,l){return{min:h,q1:Math.min(k,l),med:l,q3:Math.max(k,l),max:e}}var n=a("../../lib"),m=a("../../plots/cartesian/axes"),f=a("../../plots/cartesian/align_period"),b=a("../ohlc/calc").calcCommon;G.exports=function(k,e){var h=k._fullLayout,l=m.getFromId(k,e.xaxis),c=m.getFromId(k,e.yaxis),g=l.makeCalcdata(e,"x");l=f(e,l,"x",g);k=b(k,e,g,l,c,q);return k.length?(n.extendFlat(k[0].t,{num:h._numBoxes,dPos:n.distinctVals(l).minDiff/2,posLetter:"x",valLetter:"y"}),h._numBoxes++,
k):[{t:{empty:!0}}]}},{"../../lib":750,"../../plots/cartesian/align_period":796,"../../plots/cartesian/axes":799,"../ohlc/calc":1105}],931:[function(a,G,C){function q(e,h,l,c){e=l(c+".line.color");l(c+".line.width",h.line.width);l(c+".fillcolor",m.addOpacity(e,.5))}var n=a("../../lib"),m=a("../../components/color"),f=a("../ohlc/ohlc_defaults"),b=a("../scatter/period_defaults"),k=a("./attributes");G.exports=function(e,h,l,c){function g(d,p){return n.coerce(e,h,k,d,p)}f(e,h,g,c)?(b(e,h,c,g,{x:!0}),
g("line.width"),q(e,h,g,"increasing"),q(e,h,g,"decreasing"),g("text"),g("hovertext"),g("whiskerwidth"),c._requestRangeslider[h.xaxis]=!0):h.visible=!1}},{"../../components/color":615,"../../lib":750,"../ohlc/ohlc_defaults":1109,"../scatter/period_defaults":1178,"./attributes":929}],932:[function(a,G,C){G.exports={moduleType:"trace",name:"candlestick",basePlotModule:a("../../plots/cartesian"),categories:["cartesian","svg","showLegend","candlestick","boxLayout"],meta:{},attributes:a("./attributes"),
layoutAttributes:a("../box/layout_attributes"),supplyLayoutDefaults:a("../box/layout_defaults").supplyLayoutDefaults,crossTraceCalc:a("../box/cross_trace_calc").crossTraceCalc,supplyDefaults:a("./defaults"),calc:a("./calc"),plot:a("../box/plot").plot,layerName:"boxlayer",style:a("../box/style").style,hoverPoints:a("../ohlc/hover").hoverPoints,selectPoints:a("../ohlc/select")}},{"../../plots/cartesian":812,"../box/cross_trace_calc":919,"../box/layout_attributes":924,"../box/layout_defaults":925,"../box/plot":926,
"../box/style":928,"../ohlc/hover":1107,"../ohlc/select":1111,"./attributes":929,"./calc":930,"./defaults":931}],933:[function(a,G,C){function q(f,b,k,e){["aaxis","baxis"].forEach(function(h){var l=h.charAt(0),c=f[h]||{},g=m.newContainer(b,h);n(c,g,{tickfont:"x",id:l+"axis",letter:l,font:b.font,name:h,data:f[l],calendar:b.calendar,dfltColor:e,bgColor:k.paper_bgcolor,fullLayout:k});g._categories=g._categories||[];f[h]||"-"===c.type||(f[h]={type:c.type})})}var n=a("./axis_defaults"),m=a("../../plot_api/plot_template");
G.exports=function(f,b,k,e,h){e("a")||(e("da"),e("a0"));e("b")||(e("db"),e("b0"));q(f,b,k,h)}},{"../../plot_api/plot_template":788,"./axis_defaults":938}],934:[function(a,G,C){function q(m,f){if(!n(m)||10<=f)return null;for(var b=Infinity,k=-Infinity,e=m.length,h=0;h<e;h++){var l=m[h];if(n(l)){if(l=q(l,f+1))b=Math.min(l[0],b),k=Math.max(l[1],k)}else b=Math.min(l,b),k=Math.max(l,k)}return[b,k]}var n=a("../../lib").isArrayOrTypedArray;G.exports=function(m){return q(m,0)}},{"../../lib":750}],935:[function(a,
G,C){var q=a("../../plots/font_attributes");C=a("./axis_attributes");a=a("../../components/color/attributes");q=q({editType:"calc"});q.family.dflt='"Open Sans", verdana, arial, sans-serif';q.size.dflt=12;q.color.dflt=a.defaultLine;G.exports={carpet:{valType:"string",editType:"calc"},x:{valType:"data_array",editType:"calc+clearAxisTypes"},y:{valType:"data_array",editType:"calc+clearAxisTypes"},a:{valType:"data_array",editType:"calc"},a0:{valType:"number",dflt:0,editType:"calc"},da:{valType:"number",
dflt:1,editType:"calc"},b:{valType:"data_array",editType:"calc"},b0:{valType:"number",dflt:0,editType:"calc"},db:{valType:"number",dflt:1,editType:"calc"},cheaterslope:{valType:"number",dflt:1,editType:"calc"},aaxis:C,baxis:C,font:q,color:{valType:"color",dflt:a.defaultLine,editType:"plot"},transforms:void 0}},{"../../components/color/attributes":614,"../../plots/font_attributes":827,"./axis_attributes":937}],936:[function(a,G,C){var q=a("../../lib").isArrayOrTypedArray;G.exports=function(n,m,f,b){var k=
q(f)?"a":"b",e=("a"===k?n.aaxis:n.baxis).smoothing,h="a"===k?n.a2i:n.b2j,l="a"===k?f:b;b="a"===k?b:f;f="a"===k?m.a.length:m.b.length;var c="a"===k?m.b.length:m.a.length,g=Math.floor("a"===k?n.b2j(b):n.a2i(b));m="a"===k?function(I){return n.evalxy([],I,g)}:function(I){return n.evalxy([],g,I)};if(e){var d=Math.max(0,Math.min(c-2,g));var p=g-d;var r="a"===k?function(I,J){return n.dxydi([],I,d,J,p)}:function(I,J){return n.dxydj([],d,I,p,J)}}k=h(l[0]);h=h(l[1]);l=k<h?1:-1;var t=1E-8*(h-k);var w=0<l?Math.ceil:
Math.floor;b=0<l?Math.min:Math.max;c=0<l?Math.max:Math.min;var x=(0<l?Math.floor:Math.ceil)(k+t);w=w(h-t);t=m(k);for(var y=[[t]];x*l<w*l;x+=l){var A=[];var z=c(k,x);var F=b(h,x+l);var D=F-z;var u=Math.max(0,Math.min(f-2,Math.floor(.5*(z+F))));var B=m(F);e&&(z=r(u,z-u),u=r(u,F-u),A.push([t[0]+z[0]/3*D,t[1]+z[1]/3*D]),A.push([B[0]-u[0]/3*D,B[1]-u[1]/3*D]));A.push(B);y.push(A);t=B}return y}},{"../../lib":750}],937:[function(a,G,C){C=a("../../plots/font_attributes");var q=a("../../components/color/attributes"),
n=a("../../plots/cartesian/layout_attributes"),m=a("../../plot_api/edit_types").overrideAll;a("../../constants/docs");a("../../constants/docs");G.exports={color:{valType:"color",editType:"calc"},smoothing:{valType:"number",dflt:1,min:0,max:1.3,editType:"calc"},title:{text:{valType:"string",dflt:"",editType:"calc"},font:C({editType:"calc"}),offset:{valType:"number",dflt:10,editType:"calc"},editType:"calc"},type:{valType:"enumerated",values:["-","linear","date","category"],dflt:"-",editType:"calc"},
autorange:{valType:"enumerated",values:[!0,!1,"reversed"],dflt:!0,editType:"calc"},rangemode:{valType:"enumerated",values:["normal","tozero","nonnegative"],dflt:"normal",editType:"calc"},range:{valType:"info_array",editType:"calc",items:[{valType:"any",editType:"calc"},{valType:"any",editType:"calc"}]},fixedrange:{valType:"boolean",dflt:!1,editType:"calc"},cheatertype:{valType:"enumerated",values:["index","value"],dflt:"value",editType:"calc"},tickmode:{valType:"enumerated",values:["linear","array"],
dflt:"array",editType:"calc"},nticks:{valType:"integer",min:0,dflt:0,editType:"calc"},tickvals:{valType:"data_array",editType:"calc"},ticktext:{valType:"data_array",editType:"calc"},showticklabels:{valType:"enumerated",values:["start","end","both","none"],dflt:"start",editType:"calc"},tickfont:C({editType:"calc"}),tickangle:{valType:"angle",dflt:"auto",editType:"calc"},tickprefix:{valType:"string",dflt:"",editType:"calc"},showtickprefix:{valType:"enumerated",values:["all","first","last","none"],dflt:"all",
editType:"calc"},ticksuffix:{valType:"string",dflt:"",editType:"calc"},showticksuffix:{valType:"enumerated",values:["all","first","last","none"],dflt:"all",editType:"calc"},showexponent:{valType:"enumerated",values:["all","first","last","none"],dflt:"all",editType:"calc"},exponentformat:{valType:"enumerated",values:"none e E power SI B".split(" "),dflt:"B",editType:"calc"},minexponent:{valType:"number",dflt:3,min:0,editType:"calc"},separatethousands:{valType:"boolean",dflt:!1,editType:"calc"},tickformat:{valType:"string",
dflt:"",editType:"calc"},tickformatstops:m(n.tickformatstops,"calc","from-root"),categoryorder:{valType:"enumerated",values:["trace","category ascending","category descending","array"],dflt:"trace",editType:"calc"},categoryarray:{valType:"data_array",editType:"calc"},labelpadding:{valType:"integer",dflt:10,editType:"calc"},labelprefix:{valType:"string",editType:"calc"},labelsuffix:{valType:"string",dflt:"",editType:"calc"},showline:{valType:"boolean",dflt:!1,editType:"calc"},linecolor:{valType:"color",
dflt:q.defaultLine,editType:"calc"},linewidth:{valType:"number",min:0,dflt:1,editType:"calc"},gridcolor:{valType:"color",editType:"calc"},gridwidth:{valType:"number",min:0,dflt:1,editType:"calc"},showgrid:{valType:"boolean",dflt:!0,editType:"calc"},minorgridcount:{valType:"integer",min:0,dflt:0,editType:"calc"},minorgridwidth:{valType:"number",min:0,dflt:1,editType:"calc"},minorgridcolor:{valType:"color",dflt:q.lightLine,editType:"calc"},startline:{valType:"boolean",editType:"calc"},startlinecolor:{valType:"color",
editType:"calc"},startlinewidth:{valType:"number",dflt:1,editType:"calc"},endline:{valType:"boolean",editType:"calc"},endlinewidth:{valType:"number",dflt:1,editType:"calc"},endlinecolor:{valType:"color",editType:"calc"},tick0:{valType:"number",min:0,dflt:0,editType:"calc"},dtick:{valType:"number",min:0,dflt:1,editType:"calc"},arraytick0:{valType:"integer",min:0,dflt:0,editType:"calc"},arraydtick:{valType:"integer",min:1,dflt:1,editType:"calc"},_deprecated:{title:{valType:"string",editType:"calc"},
titlefont:C({editType:"calc"}),titleoffset:{valType:"number",dflt:10,editType:"calc"}},editType:"calc"}},{"../../components/color/attributes":614,"../../constants/docs":720,"../../plot_api/edit_types":781,"../../plots/cartesian/layout_attributes":813,"../../plots/font_attributes":827}],938:[function(a,G,C){function q(g,d){if("-"===g.type){var p=g._id.charAt(0);g.type=c(d,g[p+"calendar"])}}var n=a("./attributes"),m=a("../../components/color").addOpacity,f=a("../../registry"),b=a("../../lib"),k=a("../../plots/cartesian/tick_value_defaults"),
e=a("../../plots/cartesian/tick_label_defaults"),h=a("../../plots/cartesian/category_order_defaults"),l=a("../../plots/cartesian/set_convert"),c=a("../../plots/cartesian/axis_autotype");G.exports=function(g,d,p){function r(D,u){return b.coerce(g,d,y,D,u)}function t(D,u){return b.coerce2(g,d,y,D,u)}var w=p.letter,x=p.font||{},y=n[w+"axis"];p.name&&(d._name=p.name,d._id=p.name);var A=r("type");"-"===A&&(p.data&&q(d,p.data),"-"===d.type?d.type="linear":A=g.type=d.type);r("smoothing");r("cheatertype");
r("showticklabels");r("labelprefix",w+" \x3d ");r("labelsuffix");r("showtickprefix");r("showticksuffix");r("separatethousands");r("tickformat");r("exponentformat");r("minexponent");r("showexponent");r("categoryorder");r("tickmode");r("tickvals");r("ticktext");r("tick0");r("dtick");"array"===d.tickmode&&(r("arraytick0"),r("arraydtick"));r("labelpadding");d._hovertitle=w;"date"===A&&f.getComponentMethod("calendars","handleDefaults")(g,d,"calendar",p.calendar);l(d,p.fullLayout);d.c2p=b.identity;var z=
r("color",p.dfltColor),F=z===g.color?z:x.color;r("title.text")&&(b.coerceFont(r,"title.font",{family:x.family,size:Math.round(1.2*x.size),color:F}),r("title.offset"));r("tickangle");r("autorange",!d.isValidRange(g.range))&&r("rangemode");r("range");d.cleanRange();r("fixedrange");k(g,d,r,A);e(g,d,r,A,p);h(g,d,r,{data:p.data,dataAttr:w});p=t("gridcolor",m(z,.3));w=t("gridwidth");x=r("showgrid");x||(delete d.gridcolor,delete d.gridwidth);A=t("startlinecolor",z);F=t("startlinewidth",w);r("startline",
d.showgrid||!!A||!!F)||(delete d.startlinecolor,delete d.startlinewidth);z=t("endlinecolor",z);A=t("endlinewidth",w);r("endline",d.showgrid||!!z||!!A)||(delete d.endlinecolor,delete d.endlinewidth);x?(r("minorgridcount"),r("minorgridwidth",w),r("minorgridcolor",m(p,.06)),d.minorgridcount||(delete d.minorgridwidth,delete d.minorgridcolor)):(delete d.gridcolor,delete d.gridWidth);"none"===d.showticklabels&&(delete d.tickfont,delete d.tickangle,delete d.showexponent,delete d.exponentformat,delete d.minexponent,
delete d.tickformat,delete d.showticksuffix,delete d.showtickprefix);d.showticksuffix||delete d.ticksuffix;d.showtickprefix||delete d.tickprefix;r("tickmode");return d}},{"../../components/color":615,"../../lib":750,"../../plots/cartesian/axis_autotype":800,"../../plots/cartesian/category_order_defaults":803,"../../plots/cartesian/set_convert":819,"../../plots/cartesian/tick_label_defaults":820,"../../plots/cartesian/tick_value_defaults":822,"../../registry":882,"./attributes":935}],939:[function(a,
G,C){var q=a("../../plots/cartesian/axes"),n=a("../../lib").isArray1D,m=a("./cheater_basis"),f=a("./array_minmax"),b=a("./calc_gridlines"),k=a("./calc_labels"),e=a("./calc_clippath"),h=a("../heatmap/clean_2d_array"),l=a("./smooth_fill_2d_array"),c=a("../heatmap/convert_column_xyz"),g=a("./set_convert");G.exports=function(d,p){var r=q.getFromId(d,p.xaxis);d=q.getFromId(d,p.yaxis);var t=p.aaxis,w=p.baxis,x=p.x,y=p.y,A=[];x&&n(x)&&A.push("x");y&&n(y)&&A.push("y");A.length&&c(p,t,w,"a","b",A);A=p._a=
p._a||p.a;var z=p._b=p._b||p.b;x=p._x||p.x;y=p._y||p.y;var F={};p._cheater&&(x=m("index"===t.cheatertype?A.length:A,"index"===w.cheatertype?z.length:z,p.cheaterslope));p._x=x=h(x);p._y=y=h(y);l(x,A,z);l(y,A,z);g(p);p.setScale();var D=f(x),u=f(y),B=.5*(D[1]-D[0]);D=.5*(D[1]+D[0]);var I=.5*(u[1]-u[0]);u=.5*(u[1]+u[0]);D=[D-1.3*B,D+1.3*B];u=[u-1.3*I,u+1.3*I];p._extremes[r._id]=q.findExtremes(r,D,{padded:!0});p._extremes[d._id]=q.findExtremes(d,u,{padded:!0});b(p,"a","b");b(p,"b","a");k(p,t);k(p,w);F.clipsegments=
e(p._xctrl,p._yctrl,t,w);F.x=x;F.y=y;F.a=A;F.b=z;return[F]}},{"../../lib":750,"../../plots/cartesian/axes":799,"../heatmap/clean_2d_array":1038,"../heatmap/convert_column_xyz":1040,"./array_minmax":934,"./calc_clippath":940,"./calc_gridlines":941,"./calc_labels":942,"./cheater_basis":944,"./set_convert":957,"./smooth_fill_2d_array":958}],940:[function(a,G,C){G.exports=function(q,n,m,f){var b,k=[];m=!!m.smoothing;var e=!!f.smoothing,h=q[0].length-1,l=q.length-1;f=0;var c=[];for(b=[];f<=h;f++)c[f]=
q[0][f],b[f]=n[0][f];k.push({x:c,y:b,bicubic:m});f=0;c=[];for(b=[];f<=l;f++)c[f]=q[f][h],b[f]=n[f][h];k.push({x:c,y:b,bicubic:e});f=h;c=[];for(b=[];0<=f;f--)c[h-f]=q[l][f],b[h-f]=n[l][f];k.push({x:c,y:b,bicubic:m});f=l;c=[];for(b=[];0<=f;f--)c[l-f]=q[f][0],b[l-f]=n[f][0];k.push({x:c,y:b,bicubic:e});return k}},{}],941:[function(a,G,C){var q=a("../../plots/cartesian/axes"),n=a("../../lib/extend").extendFlat;G.exports=function(m,f,b){function k(E){var L,Q=[],S=[],R={};if("b"===f){var O=m.b2j(E);var T=
Math.floor(Math.max(0,Math.min(F-2,O)));var V=O-T;R.length=F;R.crossLength=z;R.xy=function(ca){return m.evalxy([],ca,O)};R.dxy=function(ca,sa){return m.dxydi([],ca,T,sa,V)};for(L=0;L<z;L++){var X=Math.min(z-2,L);var ba=L-X;var aa=m.evalxy([],L,O);if(t.smoothing&&0<L){var ka=m.dxydi([],L-1,T,0,V);Q.push(ha[0]+ka[0]/3);S.push(ha[1]+ka[1]/3);var ha=m.dxydi([],L-1,T,1,V);Q.push(aa[0]-ha[0]/3);S.push(aa[1]-ha[1]/3)}Q.push(aa[0]);S.push(aa[1]);ha=aa}}else for(L=m.a2i(E),X=Math.floor(Math.max(0,Math.min(z-
2,L))),ba=L-X,R.length=z,R.crossLength=F,R.xy=function(ca){return m.evalxy([],L,ca)},R.dxy=function(ca,sa){return m.dxydj([],X,ca,ba,sa)},O=0;O<F;O++)T=Math.min(F-2,O),V=O-T,aa=m.evalxy([],L,O),t.smoothing&&0<O&&(ka=m.dxydj([],X,O-1,ba,0),Q.push(ha[0]+ka[0]/3),S.push(ha[1]+ka[1]/3),ha=m.dxydj([],X,O-1,ba,1),Q.push(aa[0]-ha[0]/3),S.push(aa[1]-ha[1]/3)),Q.push(aa[0]),S.push(aa[1]),ha=aa;R.axisLetter=f;R.axis=c;R.crossAxis=t;R.value=E;R.constvar=b;R.index=h;R.x=Q;R.y=S;R.smoothing=t.smoothing;return R}
function e(E){var L,Q=[],S=[],R={};R.length=l.length;R.crossLength=r.length;if("b"===f){var O=Math.max(0,Math.min(F-2,E));var T=Math.min(1,Math.max(0,E-O));R.xy=function(ba){return m.evalxy([],ba,E)};R.dxy=function(ba,aa){return m.dxydi([],ba,O,aa,T)};for(L=0;L<y;L++)Q[L]=w[E*D][L],S[L]=x[E*D][L]}else{var V=Math.max(0,Math.min(z-2,E));var X=Math.min(1,Math.max(0,E-V));R.xy=function(ba){return m.evalxy([],E,ba)};R.dxy=function(ba,aa){return m.dxydj([],V,ba,X,aa)};for(L=0;L<A;L++)Q[L]=w[L][E*D],S[L]=
x[L][E*D]}R.axisLetter=f;R.axis=c;R.crossAxis=t;R.value=l[E];R.constvar=b;R.index=E;R.x=Q;R.y=S;R.smoothing=t.smoothing;return R}var h,l=m["_"+f],c=m[f+"axis"];var g=c._gridlines=[];var d=c._minorgridlines=[],p=c._boundarylines=[],r=m["_"+b],t=m[b+"axis"];"array"===c.tickmode&&(c.tickvals=l.slice());var w=m._xctrl,x=m._yctrl,y=w[0].length,A=w.length,z=m._a.length,F=m._b.length;q.prepTicks(c);"array"===c.tickmode&&delete c.tickvals;var D=c.smoothing?3:1;if("array"===c.tickmode){var u=5E-15;u=[Math.floor((l.length-
1-c.arraytick0)/c.arraydtick*(1+u)),Math.ceil(-c.arraytick0/c.arraydtick/(1+u))].sort(function(E,L){return E-L});var B=u[0]-1;u=u[1]+1;for(h=B;h<u;h++){var I=c.arraytick0+c.arraydtick*h;0>I||I>l.length-1||g.push(n(e(I),{color:c.gridcolor,width:c.gridwidth}))}for(h=B;h<u;h++){B=c.arraytick0+c.arraydtick*h;var J=Math.min(B+c.arraydtick,l.length-1);if(!(0>B||B>l.length-1||0>J||J>l.length-1)){var N=l[B];var M=l[J];for(g=0;g<c.minorgridcount;g++)I=J-B,0>=I||(I=N+(M-N)*(g+1)/(c.minorgridcount+1)*(c.arraydtick/
I),I<l[0]||I>l[l.length-1]||d.push(n(k(I),{color:c.minorgridcolor,width:c.minorgridwidth})))}}c.startline&&p.push(n(e(0),{color:c.startlinecolor,width:c.startlinewidth}));c.endline&&p.push(n(e(l.length-1),{color:c.endlinecolor,width:c.endlinewidth}))}else{u=5E-15;u=[Math.floor((l[l.length-1]-c.tick0)/c.dtick*(1+u)),Math.ceil((l[0]-c.tick0)/c.dtick/(1+u))].sort(function(E,L){return E-L});B=u[0];u=u[1];for(h=B;h<=u;h++)J=c.tick0+c.dtick*h,g.push(n(k(J),{color:c.gridcolor,width:c.gridwidth}));for(h=
B-1;h<u+1;h++)for(J=c.tick0+c.dtick*h,g=0;g<c.minorgridcount;g++)I=J+c.dtick*(g+1)/(c.minorgridcount+1),I<l[0]||I>l[l.length-1]||d.push(n(k(I),{color:c.minorgridcolor,width:c.minorgridwidth}));c.startline&&p.push(n(k(l[0]),{color:c.startlinecolor,width:c.startlinewidth}));c.endline&&p.push(n(k(l[l.length-1]),{color:c.endlinecolor,width:c.endlinewidth}))}}},{"../../lib/extend":740,"../../plots/cartesian/axes":799}],942:[function(a,G,C){var q=a("../../plots/cartesian/axes"),n=a("../../lib/extend").extendFlat;
G.exports=function(m,f){var b=f._labels=[],k=f._gridlines;for(m=0;m<k.length;m++){var e=k[m];if(-1!==["start","both"].indexOf(f.showticklabels)){var h=q.tickText(f,e.value);n(h,{prefix:void 0,suffix:void 0,endAnchor:!0,xy:e.xy(0),dxy:e.dxy(0,0),axis:e.axis,length:e.crossAxis.length,font:e.axis.tickfont,isFirst:0===m,isLast:m===k.length-1});b.push(h)}-1!==["end","both"].indexOf(f.showticklabels)&&(h=q.tickText(f,e.value),n(h,{endAnchor:!1,xy:e.xy(e.crossLength-1),dxy:e.dxy(e.crossLength-2,1),axis:e.axis,
length:e.crossAxis.length,font:e.axis.tickfont,isFirst:0===m,isLast:m===k.length-1}),b.push(h))}}},{"../../lib/extend":740,"../../plots/cartesian/axes":799}],943:[function(a,G,C){G.exports=function(q,n,m,f){var b=q[0]-n[0],k=q[1]-n[1],e=m[0]-n[0],h=m[1]-n[1];m=Math.pow(b*b+k*k,.25);q=Math.pow(e*e+h*h,.25);b=(q*q*b-m*m*e)*f;f*=q*q*k-m*m*h;k=q*(m+q)*3;m=m*(m+q)*3;return[[n[0]+(k&&b/k),n[1]+(k&&f/k)],[n[0]-(m&&b/m),n[1]-(m&&f/m)]]}},{}],944:[function(a,G,C){var q=a("../../lib").isArrayOrTypedArray;G.exports=
function(n,m,f){var b,k,e=[],h=q(n)?n.length:n,l=q(m)?m.length:m,c=q(n)?n:null,g=q(m)?m:null;c&&(b=(c.length-1)/(c[c.length-1]-c[0])/(h-1));g&&(k=(g.length-1)/(g[g.length-1]-g[0])/(l-1));var d=Infinity,p=-Infinity;for(n=0;n<l;n++){e[n]=[];var r=g?(g[n]-g[0])*k:n/(l-1);for(m=0;m<h;m++){var t=c?(c[m]-c[0])*b:m/(h-1);t-=r*f;d=Math.min(t,d);p=Math.max(t,p);e[n][m]=t}}f=1/(p-d);b=-d*f;for(n=0;n<l;n++)for(m=0;m<h;m++)e[n][m]=f*e[n][m]+b;return e}},{"../../lib":750}],945:[function(a,G,C){function q(f,b,
k){return[(2*(-.5*k[0]+1.5*b[0])+f[0])/3,(2*(-.5*k[1]+1.5*b[1])+f[1])/3]}var n=a("./catmull_rom"),m=a("../../lib").ensureArray;G.exports=function(f,b,k,e,h,l){var c,g,d,p,r=k[0].length,t=k.length,w=h?3*r-2:r,x=l?3*t-2:t;f=m(f,x);b=m(b,x);for(d=0;d<x;d++)f[d]=m(f[d],w),b[d]=m(b[d],w);for(p=g=0;g<t;g++,p+=l?3:1){var y=f[p];var A=b[p];var z=k[g];var F=e[g];for(d=c=0;c<r;c++,d+=h?3:1)y[d]=z[c],A[d]=F[c]}if(h)for(p=g=0;g<t;g++,p+=l?3:1){c=1;for(d=3;c<r-1;c++,d+=3)y=n([k[g][c-1],e[g][c-1]],[k[g][c],e[g][c]],
[k[g][c+1],e[g][c+1]],h),f[p][d-1]=y[0][0],b[p][d-1]=y[0][1],f[p][d+1]=y[1][0],b[p][d+1]=y[1][1];c=q([f[p][0],b[p][0]],[f[p][2],b[p][2]],[f[p][3],b[p][3]]);f[p][1]=c[0];b[p][1]=c[1];c=q([f[p][w-1],b[p][w-1]],[f[p][w-3],b[p][w-3]],[f[p][w-4],b[p][w-4]]);f[p][w-2]=c[0];b[p][w-2]=c[1]}if(l)for(d=0;d<w;d++){for(p=3;p<x-3;p+=3)y=n([f[p-3][d],b[p-3][d]],[f[p][d],b[p][d]],[f[p+3][d],b[p+3][d]],l),f[p-1][d]=y[0][0],b[p-1][d]=y[0][1],f[p+1][d]=y[1][0],b[p+1][d]=y[1][1];c=q([f[0][d],b[0][d]],[f[2][d],b[2][d]],
[f[3][d],b[3][d]]);f[1][d]=c[0];b[1][d]=c[1];c=q([f[x-1][d],b[x-1][d]],[f[x-3][d],b[x-3][d]],[f[x-4][d],b[x-4][d]]);f[x-2][d]=c[0];b[x-2][d]=c[1]}if(h&&l)for(p=1;p<x;p+=0===(p+1)%3?2:1){for(d=3;d<w-3;d+=3)y=n([f[p][d-3],b[p][d-3]],[f[p][d],b[p][d]],[f[p][d+3],b[p][d+3]],h),f[p][d-1]=.5*(f[p][d-1]+y[0][0]),b[p][d-1]=.5*(b[p][d-1]+y[0][1]),f[p][d+1]=.5*(f[p][d+1]+y[1][0]),b[p][d+1]=.5*(b[p][d+1]+y[1][1]);c=q([f[p][0],b[p][0]],[f[p][2],b[p][2]],[f[p][3],b[p][3]]);f[p][1]=.5*(f[p][1]+c[0]);b[p][1]=.5*
(b[p][1]+c[1]);c=q([f[p][w-1],b[p][w-1]],[f[p][w-3],b[p][w-3]],[f[p][w-4],b[p][w-4]]);f[p][w-2]=.5*(f[p][w-2]+c[0]);b[p][w-2]=.5*(b[p][w-2]+c[1])}return[f,b]}},{"../../lib":750,"./catmull_rom":943}],946:[function(a,G,C){G.exports={RELATIVE_CULL_TOLERANCE:1E-6}},{}],947:[function(a,G,C){G.exports=function(q,n,m){return n&&m?function(f,b,k,e,h){f||(f=[]);var l;b*=3;k*=3;var c=e*e;var g=1-e,d=g*g;g=g*e*2;e=-3*d;d=3*(d-g);g=3*(g-c);var p=3*c,r=h*h,t=r*h,w=1-h,x=w*w,y=x*w;for(l=0;l<q.length;l++){var A=
q[l];c=e*A[k][b]+d*A[k][b+1]+g*A[k][b+2]+p*A[k][b+3];var z=e*A[k+1][b]+d*A[k+1][b+1]+g*A[k+1][b+2]+p*A[k+1][b+3];var F=e*A[k+2][b]+d*A[k+2][b+1]+g*A[k+2][b+2]+p*A[k+2][b+3];A=e*A[k+3][b]+d*A[k+3][b+1]+g*A[k+3][b+2]+p*A[k+3][b+3];f[l]=y*c+3*(x*h*z+w*r*F)+t*A}return f}:n?function(f,b,k,e,h){f||(f=[]);var l;b*=3;var c=e*e;var g=1-e,d=g*g;g=g*e*2;e=-3*d;d=3*(d-g);g=3*(g-c);var p=3*c,r=1-h;for(l=0;l<q.length;l++){var t=q[l];c=e*t[k][b]+d*t[k][b+1]+g*t[k][b+2]+p*t[k][b+3];t=e*t[k+1][b]+d*t[k+1][b+1]+g*
t[k+1][b+2]+p*t[k+1][b+3];f[l]=r*c+h*t}return f}:m?function(f,b,k,e,h){f||(f=[]);var l;k*=3;var c=h*h,g=c*h,d=1-h,p=d*d,r=p*d;for(l=0;l<q.length;l++){var t=q[l];e=t[k][b+1]-t[k][b];var w=t[k+1][b+1]-t[k+1][b];var x=t[k+2][b+1]-t[k+2][b];t=t[k+3][b+1]-t[k+3][b];f[l]=r*e+3*(p*h*w+d*c*x)+g*t}return f}:function(f,b,k,e,h){f||(f=[]);var l,c=1-h;for(l=0;l<q.length;l++){var g=q[l];e=g[k][b+1]-g[k][b];g=g[k+1][b+1]-g[k+1][b];f[l]=c*e+h*g}return f}}},{}],948:[function(a,G,C){G.exports=function(q,n,m){return n&&
m?function(f,b,k,e,h){f||(f=[]);var l;b*=3;k*=3;var c=e*e,g=c*e,d=1-e,p=d*d,r=p*d;var t=h*h;var w=1-h,x=w*w;w=w*h*2;h=-3*x;x=3*(x-w);w=3*(w-t);var y=3*t;for(l=0;l<q.length;l++){var A=q[l];t=h*A[k][b]+x*A[k+1][b]+w*A[k+2][b]+y*A[k+3][b];var z=h*A[k][b+1]+x*A[k+1][b+1]+w*A[k+2][b+1]+y*A[k+3][b+1];var F=h*A[k][b+2]+x*A[k+1][b+2]+w*A[k+2][b+2]+y*A[k+3][b+2];A=h*A[k][b+3]+x*A[k+1][b+3]+w*A[k+2][b+3]+y*A[k+3][b+3];f[l]=r*t+3*(p*e*z+d*c*F)+g*A}return f}:n?function(f,b,k,e,h){f||(f=[]);var l;b*=3;var c=h*
h,g=c*h,d=1-h,p=d*d,r=p*d;for(l=0;l<q.length;l++){var t=q[l];e=t[k+1][b]-t[k][b];var w=t[k+1][b+1]-t[k][b+1];var x=t[k+1][b+2]-t[k][b+2];t=t[k+1][b+3]-t[k][b+3];f[l]=r*e+3*(p*h*w+d*c*x)+g*t}return f}:m?function(f,b,k,e,h){f||(f=[]);var l;k*=3;var c=1-e;var g=h*h;var d=1-h,p=d*d;d=d*h*2;h=-3*p;p=3*(p-d);d=3*(d-g);var r=3*g;for(l=0;l<q.length;l++){var t=q[l];g=h*t[k][b]+p*t[k+1][b]+d*t[k+2][b]+r*t[k+3][b];t=h*t[k][b+1]+p*t[k+1][b+1]+d*t[k+2][b+1]+r*t[k+3][b+1];f[l]=c*g+e*t}return f}:function(f,b,k,
e,h){f||(f=[]);var l,c=1-e;for(l=0;l<q.length;l++){var g=q[l];h=g[k+1][b]-g[k][b];g=g[k+1][b+1]-g[k][b+1];f[l]=c*h+e*g}return f}}},{}],949:[function(a,G,C){G.exports=function(q,n,m,f,b){var k=n-2,e=m-2;return f&&b?function(h,l,c){h||(h=[]);var g,d=Math.max(0,Math.min(Math.floor(l),k)),p=Math.max(0,Math.min(Math.floor(c),e));l=Math.max(0,Math.min(1,l-d));var r=Math.max(0,Math.min(1,c-p));d*=3;p*=3;var t=l*l,w=t*l,x=1-l,y=x*x,A=y*x,z=r*r,F=z*r,D=1-r,u=D*D,B=u*D;for(g=0;g<q.length;g++){var I=q[g];c=
A*I[p][d]+3*(y*l*I[p][d+1]+x*t*I[p][d+2])+w*I[p][d+3];var J=A*I[p+1][d]+3*(y*l*I[p+1][d+1]+x*t*I[p+1][d+2])+w*I[p+1][d+3];var N=A*I[p+2][d]+3*(y*l*I[p+2][d+1]+x*t*I[p+2][d+2])+w*I[p+2][d+3];I=A*I[p+3][d]+3*(y*l*I[p+3][d+1]+x*t*I[p+3][d+2])+w*I[p+3][d+3];h[g]=B*c+3*(u*r*J+D*z*N)+F*I}return h}:f?function(h,l,c){h||(h=[]);var g=Math.max(0,Math.min(Math.floor(l),k)),d=Math.max(0,Math.min(Math.floor(c),e));l=Math.max(0,Math.min(1,l-g));c=Math.max(0,Math.min(1,c-d));var p;g*=3;var r=l*l,t=r*l,w=1-l,x=w*
w,y=x*w,A=1-c;for(p=0;p<q.length;p++){var z=q[p];var F=A*z[d][g]+c*z[d+1][g];var D=A*z[d][g+1]+c*z[d+1][g+1];var u=A*z[d][g+2]+c*z[d+1][g+1];z=A*z[d][g+3]+c*z[d+1][g+1];h[p]=y*F+3*(x*l*D+w*r*u)+t*z}return h}:b?function(h,l,c){h||(h=[]);var g=Math.max(0,Math.min(Math.floor(l),k)),d=Math.max(0,Math.min(Math.floor(c),e));l=Math.max(0,Math.min(1,l-g));c=Math.max(0,Math.min(1,c-d));var p;d*=3;var r=c*c,t=r*c,w=1-c,x=w*w,y=x*w,A=1-l;for(p=0;p<q.length;p++){var z=q[p];var F=A*z[d][g]+l*z[d][g+1];var D=A*
z[d+1][g]+l*z[d+1][g+1];var u=A*z[d+2][g]+l*z[d+2][g+1];z=A*z[d+3][g]+l*z[d+3][g+1];h[p]=y*F+3*(x*c*D+w*r*u)+t*z}return h}:function(h,l,c){h||(h=[]);var g=Math.max(0,Math.min(Math.floor(l),k)),d=Math.max(0,Math.min(Math.floor(c),e));l=Math.max(0,Math.min(1,l-g));c=Math.max(0,Math.min(1,c-d));var p,r=1-c,t=1-l;for(p=0;p<q.length;p++){var w=q[p];var x=t*w[d][g]+l*w[d][g+1];w=t*w[d+1][g]+l*w[d+1][g+1];h[p]=r*x+c*w}return h}}},{}],950:[function(a,G,C){var q=a("../../lib"),n=a("./xy_defaults"),m=a("./ab_defaults"),
f=a("./attributes"),b=a("../../components/color/attributes");G.exports=function(k,e,h,l){function c(g,d){return q.coerce(k,e,f,g,d)}e._clipPathId="clip"+e.uid+"carpet";h=c("color",b.defaultLine);q.coerceFont(c,"font");c("carpet");m(k,e,l,c,h);e.a&&e.b?(3>e.a.length&&(e.aaxis.smoothing=0),3>e.b.length&&(e.baxis.smoothing=0),n(k,e,c)||(e.visible=!1),e._cheater&&c("cheaterslope")):e.visible=!1}},{"../../components/color/attributes":614,"../../lib":750,"./ab_defaults":933,"./attributes":935,"./xy_defaults":959}],
951:[function(a,G,C){G.exports={attributes:a("./attributes"),supplyDefaults:a("./defaults"),plot:a("./plot"),calc:a("./calc"),animatable:!0,isContainer:!0,moduleType:"trace",name:"carpet",basePlotModule:a("../../plots/cartesian"),categories:"cartesian svg carpet carpetAxis notLegendIsolatable noMultiCategory noHover noSortingByValue".split(" "),meta:{}}},{"../../plots/cartesian":812,"./attributes":935,"./calc":939,"./defaults":950,"./plot":956}],952:[function(a,G,C){G.exports=function(q,n){for(var m=
q._fullData.length,f,b=0;b<m;b++){var k=q._fullData[b];if(k.index!==n.index&&"carpet"===k.type&&(f||(f=k),k.carpet===n.carpet))return k}return f}},{}],953:[function(a,G,C){G.exports=function(q,n,m){if(0===q.length)return"";var f,b=[],k=m?3:1;for(f=0;f<q.length;f+=k)b.push(q[f]+","+n[f]),m&&f<q.length-k&&(b.push("C"),b.push([q[f+1]+","+n[f+1],q[f+2]+","+n[f+2]+" "].join(" ")));return b.join(m?"":"L")}},{}],954:[function(a,G,C){var q=a("../../lib").isArrayOrTypedArray;G.exports=function(n,m,f){var b;
q(n)?n.length>m.length&&(n=n.slice(0,m.length)):n=[];for(b=0;b<m.length;b++)n[b]=f(m[b]);return n}},{"../../lib":750}],955:[function(a,G,C){G.exports=function(q,n,m,f,b,k){var e=b[0]*q.dpdx(n),h=b[1]*q.dpdy(m),l=1,c=1;k&&(c=Math.max(0,(b[0]*k[0]+b[1]*k[1])/Math.sqrt(b[0]*b[0]+b[1]*b[1])/Math.sqrt(k[0]*k[0]+k[1]*k[1])));b=180*Math.atan2(h,e)/Math.PI;-90>b?(b+=180,l=-l):90<b&&(b-=180,l=-l);return{angle:b,flip:l,p:q.c2p(f,n,m),offsetMultplier:c}}},{}],956:[function(a,G,C){function q(p,r,t,w,x,y){w="const-"+
x+"-lines";t=t.selectAll("."+w).data(y);t.enter().append("path").classed(w,!0).style("vector-effect","non-scaling-stroke");t.each(function(A){var z=A.y,F=k([],A.x,p.c2p);z=k([],z,r.c2p);F="M"+e(F,z,A.smoothing);f.select(this).attr("d",F).style("stroke-width",A.width).style("stroke",A.color).style("fill","none")});t.exit().remove()}function n(p,r,t,w,x,y,A,z){x=y.selectAll("text."+z).data(A);x.enter().append("text").classed(z,!0);var F=0,D={};x.each(function(u,B){if("auto"===u.axis.tickangle)var I=
h(w,r,t,u.xy,u.dxy);else I=(u.axis.tickangle+180)*Math.PI/180,I=h(w,r,t,u.xy,[Math.cos(I),Math.sin(I)]);B||(D={angle:I.angle,flip:I.flip});B=(u.endAnchor?-1:1)*I.flip;var J=f.select(this).attr({"text-anchor":0<B?"start":"end","data-notex":1}).call(b.font,u.font).text(u.text).call(l.convertToTspans,p),N=b.bBox(this);J.attr("transform","translate("+I.p[0]+","+I.p[1]+") rotate("+I.angle+")translate("+u.axis.labelpadding*B+","+.3*N.height+")");F=Math.max(F,N.width+u.axis.labelpadding)});x.exit().remove();
D.maxExtent=F;return D}function m(p,r,t,w,x,y,A,z,F,D,u){w=[];A.title.text&&w.push(A.title.text);r=r.selectAll("text."+u).data(w);var B=D.maxExtent;r.enter().append("text").classed(u,!0);r.each(function(){var I=h(t,z,F,x,y);-1===["start","both"].indexOf(A.showticklabels)&&(B=0);var J=A.title.font.size;B+=J+A.title.offset;var N=(D.angle+(0>D.flip?180:0)-I.angle+450)%360;N=90<N&&270>N;var M=f.select(this);M.text(A.title.text).call(l.convertToTspans,p);N&&(B=(-l.lineCount(M)+d)*g*J-B);M.attr("transform",
"translate("+I.p[0]+","+I.p[1]+") rotate("+I.angle+") translate(0,"+B+")").attr("text-anchor","middle").call(b.font,A.title.font)});r.exit().remove()}var f=a("d3"),b=a("../../components/drawing"),k=a("./map_1d_array"),e=a("./makepath"),h=a("./orient_text"),l=a("../../lib/svg_text_utils"),c=a("../../lib");a=a("../../constants/alignment");G.exports=function(p,r,t,w){var x=r.xaxis,y=r.yaxis,A=p._fullLayout._clips;c.makeTraceGroups(w,t,"trace").each(function(z){var F=f.select(this),D=z[0];z=D.trace;var u=
z.aaxis,B=z.baxis,I=c.ensureSingle(F,"g","minorlayer"),J=c.ensureSingle(F,"g","majorlayer"),N=c.ensureSingle(F,"g","boundarylayer"),M=c.ensureSingle(F,"g","labellayer");F.style("opacity",z.opacity);q(x,y,J,u,"a",u._gridlines,!0);q(x,y,J,B,"b",B._gridlines,!0);q(x,y,I,u,"a",u._minorgridlines,!0);q(x,y,I,B,"b",B._minorgridlines,!0);q(x,y,N,u,"a-boundary",u._boundarylines);q(x,y,N,B,"b-boundary",B._boundarylines);F=n(p,x,y,z,D,M,u._labels,"a-label");B=n(p,x,y,z,D,M,B._labels,"b-label");u=c.aggNums(Math.min,
null,z.a);N=c.aggNums(Math.max,null,z.a);I=c.aggNums(Math.min,null,z.b);J=c.aggNums(Math.max,null,z.b);N=.5*(u+N);var E=I;var L=z.ab2xy(N,E,!0);var Q=z.dxyda_rough(N,E);void 0===F.angle&&c.extendFlat(F,h(z,x,y,L,z.dxydb_rough(N,E)));m(p,M,z,D,L,Q,z.aaxis,x,y,F,"a-title");N=u;E=.5*(I+J);L=z.ab2xy(N,E,!0);Q=z.dxydb_rough(N,E);void 0===B.angle&&c.extendFlat(B,h(z,x,y,L,z.dxyda_rough(N,E)));m(p,M,z,D,L,Q,z.baxis,x,y,B,"b-title");M=A.select("#"+z._clipPathId);M.size()||(M=A.append("clipPath").classed("carpetclip",
!0));F=c.ensureSingle(M,"path","carpetboundary");J=D.clipsegments;N=[];for(I=0;I<J.length;I++)D=J[I],B=k([],D.x,x.c2p),u=k([],D.y,y.c2p),N.push(e(B,u,D.bicubic));D="M"+N.join("L")+"Z";M.attr("id",z._clipPathId);F.attr("d",D)})};var g=a.LINE_SPACING,d=(1-a.MID_SHIFT)/g+1},{"../../components/drawing":637,"../../constants/alignment":717,"../../lib":750,"../../lib/svg_text_utils":774,"./makepath":953,"./map_1d_array":954,"./orient_text":955,d3:169}],957:[function(a,G,C){var q=a("./constants"),n=a("../../lib/search").findBin,
m=a("./compute_control_points"),f=a("./create_spline_evaluator"),b=a("./create_i_derivative_evaluator"),k=a("./create_j_derivative_evaluator");G.exports=function(e){var h=e._a,l=e._b,c=h.length,g=l.length,d=e.aaxis,p=e.baxis,r=h[0],t=h[c-1],w=l[0],x=l[g-1],y=h[h.length-1]-h[0],A=l[l.length-1]-l[0],z=y*q.RELATIVE_CULL_TOLERANCE,F=A*q.RELATIVE_CULL_TOLERANCE;r-=z;t+=z;w-=F;x+=F;e.isVisible=function(D,u){return D>r&&D<t&&u>w&&u<x};e.isOccluded=function(D,u){return D<r||D>t||u<w||u>x};e.setScale=function(){var D=
m(e._xctrl,e._yctrl,e._x,e._y,d.smoothing,p.smoothing);e._xctrl=D[0];e._yctrl=D[1];e.evalxy=f([e._xctrl,e._yctrl],c,g,d.smoothing,p.smoothing);e.dxydi=b([e._xctrl,e._yctrl],d.smoothing,p.smoothing);e.dxydj=k([e._xctrl,e._yctrl],d.smoothing,p.smoothing)};e.i2a=function(D){var u=Math.max(0,Math.floor(D[0]),c-2);D=D[0]-u;return(1-D)*h[u]+D*h[u+1]};e.j2b=function(D){var u=Math.max(0,Math.floor(D[1]),c-2);D=D[1]-u;return(1-D)*l[u]+D*l[u+1]};e.ij2ab=function(D){return[e.i2a(D[0]),e.j2b(D[1])]};e.a2i=function(D){var u=
Math.max(0,Math.min(n(D,h),c-2)),B=h[u];return Math.max(0,Math.min(c-1,u+(D-B)/(h[u+1]-B)))};e.b2j=function(D){var u=Math.max(0,Math.min(n(D,l),g-2)),B=l[u];return Math.max(0,Math.min(g-1,u+(D-B)/(l[u+1]-B)))};e.ab2ij=function(D){return[e.a2i(D[0]),e.b2j(D[1])]};e.i2c=function(D,u){return e.evalxy([],D,u)};e.ab2xy=function(D,u,B){if(!B&&(D<h[0]||D>h[c-1]|u<l[0]||u>l[g-1]))return[!1,!1];var I=e.a2i(D),J=e.b2j(u),N=e.evalxy([],I,J);if(B){var M=B=0,E=[],L;D<h[0]?(I=L=0,B=(D-h[0])/(h[1]-h[0])):D>h[c-
1]?(L=c-2,I=1,B=(D-h[c-1])/(h[c-1]-h[c-2])):(L=Math.max(0,Math.min(c-2,Math.floor(I))),I-=L);u<l[0]?(J=D=0,M=(u-l[0])/(l[1]-l[0])):u>l[g-1]?(D=g-2,J=1,M=(u-l[g-1])/(l[g-1]-l[g-2])):(D=Math.max(0,Math.min(g-2,Math.floor(J))),J-=D);B&&(e.dxydi(E,L,D,I,J),N[0]+=E[0]*B,N[1]+=E[1]*B);M&&(e.dxydj(E,L,D,I,J),N[0]+=E[0]*M,N[1]+=E[1]*M)}return N};e.c2p=function(D,u,B){return[u.c2p(D[0]),B.c2p(D[1])]};e.p2x=function(D,u,B){return[u.p2c(D[0]),B.p2c(D[1])]};e.dadi=function(D){D=Math.max(0,Math.min(h.length-2,
D));return h[D+1]-h[D]};e.dbdj=function(D){D=Math.max(0,Math.min(l.length-2,D));return l[D+1]-l[D]};e.dxyda=function(D,u,B,I){u=e.dxydi(null,D,u,B,I);D=e.dadi(D,B);return[u[0]/D,u[1]/D]};e.dxydb=function(D,u,B,I){D=e.dxydj(null,D,u,B,I);u=e.dbdj(u,I);return[D[0]/u,D[1]/u]};e.dxyda_rough=function(D,u,B){B=y*(B||.1);var I=e.ab2xy(D+B,u,!0);D=e.ab2xy(D-B,u,!0);return[.5*(I[0]-D[0])/B,.5*(I[1]-D[1])/B]};e.dxydb_rough=function(D,u,B){B=A*(B||.1);var I=e.ab2xy(D,u+B,!0);D=e.ab2xy(D,u-B,!0);return[.5*(I[0]-
D[0])/B,.5*(I[1]-D[1])/B]};e.dpdx=function(D){return D._m};e.dpdy=function(D){return D._m}}},{"../../lib/search":769,"./compute_control_points":945,"./constants":946,"./create_i_derivative_evaluator":947,"./create_j_derivative_evaluator":948,"./create_spline_evaluator":949}],958:[function(a,G,C){var q=a("../../lib");G.exports=function(n,m,f){var b,k,e=[],h=[],l=n[0].length,c=n.length,g=0;for(b=0;b<l;b++)for(k=0;k<c;k++){if(void 0===n[k][b]){e.push(b);h.push(k);var d=n[k];var p=b,r=void 0,t=0,w=0;
0<b&&void 0!==(r=n[k][b-1])&&(w++,t+=r);b<l-1&&void 0!==(r=n[k][b+1])&&(w++,t+=r);0<k&&void 0!==(r=n[k-1][b])&&(w++,t+=r);k<c-1&&void 0!==(r=n[k+1][b])&&(w++,t+=r);d[p]=t/Math.max(1,w)}g=Math.max(g,Math.abs(n[k][b]))}if(!e.length)return n;r=0;t=e.length;do{for(d=p=0;d<t;d++){b=e[d];k=h[d];var x=w=0;if(0===b){var y=Math.min(l-1,2);var A=m[y];var z=m[1];y=n[k][y];var F=n[k][1];x+=F+(F-y)*(m[0]-z)/(z-A);w++}else b===l-1&&(y=Math.max(0,l-3),A=m[y],z=m[l-2],y=n[k][y],F=n[k][l-2],x+=F+(F-y)*(m[l-1]-z)/
(z-A),w++);(0===b||b===l-1)&&0<k&&k<c-1&&(A=f[k+1]-f[k],z=f[k]-f[k-1],x+=(z*n[k+1][b]+A*n[k-1][b])/(z+A),w++);0===k?(y=Math.min(c-1,2),A=f[y],z=f[1],y=n[y][b],F=n[1][b],x+=F+(F-y)*(f[0]-z)/(z-A),w++):k===c-1&&(y=Math.max(0,c-3),A=f[y],z=f[c-2],y=n[y][b],F=n[c-2][b],x+=F+(F-y)*(f[c-1]-z)/(z-A),w++);(0===k||k===c-1)&&0<b&&b<l-1&&(A=m[b+1]-m[b],z=m[b]-m[b-1],x+=(z*n[k][b+1]+A*n[k][b-1])/(z+A),w++);if(w)x/=w;else{x=m[b+1]-m[b];A=m[b]-m[b-1];z=f[k+1]-f[k];y=f[k]-f[k-1];F=x*A*(x+A);var D=z*y*(z+y);x=(F*
(y*n[k+1][b]+z*n[k-1][b])+D*(A*n[k][b+1]+x*n[k][b-1]))/(D*(A+x)+F*(y+z))}x-=n[k][b];A=x/g;p+=A*A;w=w?0:.85;n[k][b]+=x*(1+w)}p=Math.sqrt(p)}while(100>r++&&1E-5<p);q.log("Smoother converged to",p,"after",r,"iterations");return n}},{"../../lib":750}],959:[function(a,G,C){var q=a("../../lib").isArray1D;G.exports=function(n,m,f){var b=(n=f("x"))&&n.length,k=(f=f("y"))&&f.length;if(!b&&!k)return!1;m._cheater=!n;b&&!q(n)||k&&!q(f)?m._length=null:(n=b?n.length:Infinity,k&&(n=Math.min(n,f.length)),m.a&&m.a.length&&
(n=Math.min(n,m.a.length)),m.b&&m.b.length&&(n=Math.min(n,m.b.length)),m._length=n);return!0}},{"../../lib":750}],960:[function(a,G,C){C=a("../../plots/template_attributes").hovertemplateAttrs;var q=a("../scattergeo/attributes"),n=a("../../components/colorscale/attributes"),m=a("../../plots/attributes"),f=a("../../components/color/attributes").defaultLine;a=a("../../lib/extend").extendFlat;var b=q.marker.line;G.exports=a({locations:{valType:"data_array",editType:"calc"},locationmode:q.locationmode,
z:{valType:"data_array",editType:"calc"},geojson:a({},q.geojson,{}),featureidkey:q.featureidkey,text:a({},q.text,{}),hovertext:a({},q.hovertext,{}),marker:{line:{color:a({},b.color,{dflt:f}),width:a({},b.width,{dflt:1}),editType:"calc"},opacity:{valType:"number",arrayOk:!0,min:0,max:1,dflt:1,editType:"style"},editType:"calc"},selected:{marker:{opacity:q.selected.marker.opacity,editType:"plot"},editType:"plot"},unselected:{marker:{opacity:q.unselected.marker.opacity,editType:"plot"},editType:"plot"},
hoverinfo:a({},m.hoverinfo,{editType:"calc",flags:["location","z","text","name"]}),hovertemplate:C(),showlegend:a({},m.showlegend,{dflt:!1})},n("",{cLetter:"z",editTypeOverride:"calc"}))},{"../../components/color/attributes":614,"../../components/colorscale/attributes":622,"../../lib/extend":740,"../../plots/attributes":795,"../../plots/template_attributes":877,"../scattergeo/attributes":1200}],961:[function(a,G,C){function q(e){return e&&"string"===typeof e}var n=a("fast-isnumeric"),m=a("../../constants/numerical").BADNUM,
f=a("../../components/colorscale/calc"),b=a("../scatter/arrays_to_calcdata"),k=a("../scatter/calc_selection");G.exports=function(e,h){var l=h._length,c=Array(l);var g=h.geojson?function(w){return q(w)||n(w)}:q;for(var d=0;d<l;d++){var p=c[d]={},r=h.locations[d],t=h.z[d];g(r)&&n(t)?(p.loc=r,p.z=t):(p.loc=null,p.z=m);p.index=d}b(c,h);f(e,h,{vals:h.z,containerStr:"",cLetter:"z"});k(c,h);return c}},{"../../components/colorscale/calc":623,"../../constants/numerical":725,"../scatter/arrays_to_calcdata":1157,
"../scatter/calc_selection":1160,"fast-isnumeric":241}],962:[function(a,G,C){var q=a("../../lib"),n=a("../../components/colorscale/defaults"),m=a("./attributes");G.exports=function(f,b,k,e){function h(g,d){return q.coerce(f,b,m,g,d)}k=h("locations");var l=h("z");if(k&&k.length&&q.isArrayOrTypedArray(l)&&l.length){b._length=Math.min(k.length,l.length);k=h("geojson");if("string"===typeof k&&""!==k||q.isPlainObject(k))var c="geojson-id";"geojson-id"===h("locationmode",c)&&h("featureidkey");h("text");
h("hovertext");h("hovertemplate");h("marker.line.width")&&h("marker.line.color");h("marker.opacity");n(f,b,e,h,{prefix:"",cLetter:"z"});q.coerceSelectionMarkerOpacity(b,h)}else b.visible=!1}},{"../../components/colorscale/defaults":625,"../../lib":750,"./attributes":960}],963:[function(a,G,C){G.exports=function(q,n,m,f,b){q.location=n.location;q.z=n.z;n=f[b];n.fIn&&n.fIn.properties&&(q.properties=n.fIn.properties);q.ct=n.ct;return q}},{}],964:[function(a,G,C){var q=a("../../plots/cartesian/axes"),
n=a("./attributes"),m=a("../../lib").fillText;G.exports=function(f,b,k){var e=f.cd,h=e[0].trace,l=f.subplot,c,g;for(c=0;c<e.length;c++){var d=e[c];var p=!1;if(d._polygons){for(g=0;g<d._polygons.length;g++)d._polygons[g].contains([b,k])&&(p=!p),d._polygons[g].contains([b+360,k])&&(p=!p);if(p)break}}if(p&&d)return f.x0=f.x1=f.xa.c2p(d.ct),f.y0=f.y1=f.ya.c2p(d.ct),f.index=d.index,f.location=d.loc,f.z=d.z,f.zLabel=q.tickText(l.mockAxis,l.mockAxis.c2l(d.z),"hover").text,f.hovertemplate=d.hovertemplate,
b=d,h.hovertemplate||(e=b.hi||h.hoverinfo,k=String(b.loc),c="all"===e?n.hoverinfo.flags:e.split("+"),e=-1!==c.indexOf("name"),l=-1!==c.indexOf("location"),d=-1!==c.indexOf("z"),c=-1!==c.indexOf("text"),g=[],!e&&l?f.nameOverride=k:(e&&(f.nameOverride=h.name),l&&g.push(k)),d&&g.push(f.zLabel),c&&m(b,h,g),f.extraText=g.join("\x3cbr\x3e")),[f]}},{"../../lib":750,"../../plots/cartesian/axes":799,"./attributes":960}],965:[function(a,G,C){G.exports={attributes:a("./attributes"),supplyDefaults:a("./defaults"),
colorbar:a("../heatmap/colorbar"),calc:a("./calc"),calcGeoJSON:a("./plot").calcGeoJSON,plot:a("./plot").plot,style:a("./style").style,styleOnSelect:a("./style").styleOnSelect,hoverPoints:a("./hover"),eventData:a("./event_data"),selectPoints:a("./select"),moduleType:"trace",name:"choropleth",basePlotModule:a("../../plots/geo"),categories:["geo","noOpacity","showLegend"],meta:{}}},{"../../plots/geo":831,"../heatmap/colorbar":1039,"./attributes":960,"./calc":961,"./defaults":962,"./event_data":963,"./hover":964,
"./plot":966,"./select":967,"./style":968}],966:[function(a,G,C){var q=a("d3"),n=a("../../lib"),m=a("../../lib/geo_location_utils"),f=a("../../lib/topojson_utils").getTopojsonFeatures,b=a("../../plots/cartesian/autorange").findExtremes,k=a("./style").style;G.exports={calcGeoJSON:function(e,h){var l=e[0].trace;h=h[l.geo];var c=h._subplot,g=l.locationmode,d=l._length,p="geojson-id"===g?m.extractTraceFeature(e):f(l,c.topojson);c=[];for(var r=[],t=0;t<d;t++){var w=e[t],x="geojson-id"===g?w.fOut:m.locationToFeature(g,
w.loc,p);x?(w.geojson=x,w.ct=x.properties.ct,w._polygons=m.feature2polygons(x),w=m.computeBbox(x),c.push(w[0],w[2]),r.push(w[1],w[3])):w.geojson=null}"geojson"===h.fitbounds&&"geojson-id"===g&&(e=m.computeBbox(m.getTraceGeojson(l)),c=[e[0],e[2]],r=[e[1],e[3]]);e={padded:!0};l._extremes.lon=b(h.lonaxis._ax,c,e);l._extremes.lat=b(h.lataxis._ax,r,e)},plot:function(e,h,l){h=h.layers.backplot.select(".choroplethlayer");n.makeTraceGroups(h,l,"trace choropleth").each(function(c){var g=q.select(this).selectAll("path.choroplethlocation").data(n.identity);
g.enter().append("path").classed("choroplethlocation",!0);g.exit().remove();k(e,c)})}}},{"../../lib":750,"../../lib/geo_location_utils":743,"../../lib/topojson_utils":777,"../../plots/cartesian/autorange":798,"./style":968,d3:169}],967:[function(a,G,C){G.exports=function(q,n){var m=q.cd,f=q.xaxis,b=q.yaxis,k=[],e,h;if(!1===n)for(e=0;e<m.length;e++)m[e].selected=0;else for(e=0;e<m.length;e++){var l=m[e];if(h=l.ct){var c=f.c2p(h);var g=b.c2p(h);n.contains([c,g],null,e,q)?(k.push({pointNumber:e,lon:h[0],
lat:h[1]}),l.selected=1):l.selected=0}}return k}},{}],968:[function(a,G,C){function q(k,e){var h=e[0].trace;e=e[0].node3.selectAll(".choroplethlocation");var l=h.marker||{},c=l.line||{},g=b.makeColorScaleFuncFromTrace(h);e.each(function(d){n.select(this).attr("fill",g(d.z)).call(m.stroke,d.mlc||c.color).call(f.dashLine,"",d.mlw||c.width||0).style("opacity",l.opacity)});f.selectedPointStyle(e,h,k)}var n=a("d3"),m=a("../../components/color"),f=a("../../components/drawing"),b=a("../../components/colorscale");
G.exports={style:function(k,e){e&&q(k,e)},styleOnSelect:function(k,e){var h=e[0].node3,l=e[0].trace;l.selectedpoints?f.selectedPointStyle(h.selectAll(".choroplethlocation"),l,k):q(k,e)}}},{"../../components/color":615,"../../components/colorscale":627,"../../components/drawing":637,d3:169}],969:[function(a,G,C){C=a("../choropleth/attributes");var q=a("../../components/colorscale/attributes"),n=a("../../plots/template_attributes").hovertemplateAttrs,m=a("../../plots/attributes");a=a("../../lib/extend").extendFlat;
G.exports=a({locations:{valType:"data_array",editType:"calc"},z:{valType:"data_array",editType:"calc"},geojson:{valType:"any",editType:"calc"},featureidkey:a({},C.featureidkey,{}),below:{valType:"string",editType:"plot"},text:C.text,hovertext:C.hovertext,marker:{line:{color:a({},C.marker.line.color,{editType:"plot"}),width:a({},C.marker.line.width,{editType:"plot"}),editType:"calc"},opacity:a({},C.marker.opacity,{editType:"plot"}),editType:"calc"},selected:{marker:{opacity:a({},C.selected.marker.opacity,
{editType:"plot"}),editType:"plot"},editType:"plot"},unselected:{marker:{opacity:a({},C.unselected.marker.opacity,{editType:"plot"}),editType:"plot"},editType:"plot"},hoverinfo:C.hoverinfo,hovertemplate:n({},{keys:["properties"]}),showlegend:a({},m.showlegend,{dflt:!1})},q("",{cLetter:"z",editTypeOverride:"calc"}))},{"../../components/colorscale/attributes":622,"../../lib/extend":740,"../../plots/attributes":795,"../../plots/template_attributes":877,"../choropleth/attributes":960}],970:[function(a,
G,C){function q(h){var l=h[0].trace,c=l._opts;if(l.selectedpoints){l=b.makeSelectedPointStyleFns(l);for(var g=0;g<h.length;g++){var d=h[g];d.fOut&&(d.fOut.properties.mo2=l.selectedOpacityFn(d))}h={type:"identity",property:"mo2"}}else h=m.isArrayOrTypedArray(l.marker.opacity)?{type:"identity",property:"mo"}:l.marker.opacity;m.extendFlat(c.fill.paint,{"fill-opacity":h});m.extendFlat(c.line.paint,{"line-opacity":h});return c}var n=a("fast-isnumeric"),m=a("../../lib"),f=a("../../components/colorscale"),
b=a("../../components/drawing"),k=a("../../lib/geojson_utils").makeBlank,e=a("../../lib/geo_location_utils");G.exports={convert:function(h){var l=h[0].trace,c=!0===l.visible&&0!==l._length,g={layout:{visibility:"none"},paint:{}},d={layout:{visibility:"none"},paint:{}},p=l._opts={fill:g,line:d,geojson:k()};if(!c)return p;c=e.extractTraceFeature(h);if(!c)return p;var r=f.makeColorScaleFuncFromTrace(l),t=l.marker;l=t.line||{};var w;m.isArrayOrTypedArray(t.opacity)&&(w=function(u){u=u.mo;return n(u)?
+m.constrain(u,0,1):0});var x;m.isArrayOrTypedArray(l.color)&&(x=function(u){return u.mlc});var y;m.isArrayOrTypedArray(l.width)&&(y=function(u){return u.mlw});for(var A=0;A<h.length;A++){var z=h[A],F=z.fOut;if(F){var D=F.properties;D.fc=r(z.z);w&&(D.mo=w(z));x&&(D.mlc=x(z));y&&(D.mlw=y(z));z.ct=D.ct;z._polygons=e.feature2polygons(F)}}w=w?{type:"identity",property:"mo"}:t.opacity;m.extendFlat(g.paint,{"fill-color":{type:"identity",property:"fc"},"fill-opacity":w});m.extendFlat(d.paint,{"line-color":x?
{type:"identity",property:"mlc"}:l.color,"line-width":y?{type:"identity",property:"mlw"}:l.width,"line-opacity":w});g.layout.visibility="visible";d.layout.visibility="visible";p.geojson={type:"FeatureCollection",features:c};q(h);return p},convertOnSelect:q}},{"../../components/colorscale":627,"../../components/drawing":637,"../../lib":750,"../../lib/geo_location_utils":743,"../../lib/geojson_utils":744,"fast-isnumeric":241}],971:[function(a,G,C){var q=a("../../lib"),n=a("../../components/colorscale/defaults"),
m=a("./attributes");G.exports=function(f,b,k,e){function h(g,d){return q.coerce(f,b,m,g,d)}k=h("locations");var l=h("z"),c=h("geojson");q.isArrayOrTypedArray(k)&&k.length&&q.isArrayOrTypedArray(l)&&l.length&&("string"===typeof c&&""!==c||q.isPlainObject(c))?(h("featureidkey"),b._length=Math.min(k.length,l.length),h("below"),h("text"),h("hovertext"),h("hovertemplate"),h("marker.line.width")&&h("marker.line.color"),h("marker.opacity"),n(f,b,e,h,{prefix:"",cLetter:"z"}),q.coerceSelectionMarkerOpacity(b,
h)):b.visible=!1}},{"../../components/colorscale/defaults":625,"../../lib":750,"./attributes":969}],972:[function(a,G,C){G.exports={attributes:a("./attributes"),supplyDefaults:a("./defaults"),colorbar:a("../heatmap/colorbar"),calc:a("../choropleth/calc"),plot:a("./plot"),hoverPoints:a("../choropleth/hover"),eventData:a("../choropleth/event_data"),selectPoints:a("../choropleth/select"),styleOnSelect:function(q,n){n&&n[0].trace._glTrace.updateOnSelect(n)},getBelow:function(q,n){q=n.getMapLayers();for(n=
q.length-2;0<=n;n--){var m=q[n].id;if("string"===typeof m&&0===m.indexOf("water"))for(var f=n+1;f<q.length;f++)if(m=q[f].id,"string"===typeof m&&-1===m.indexOf("plotly-"))return m}},moduleType:"trace",name:"choroplethmapbox",basePlotModule:a("../../plots/mapbox"),categories:["mapbox","gl","noOpacity","showLegend"],meta:{hr_name:"choropleth_mapbox"}}},{"../../plots/mapbox":856,"../choropleth/calc":961,"../choropleth/event_data":963,"../choropleth/hover":964,"../choropleth/select":967,"../heatmap/colorbar":1039,
"./attributes":969,"./defaults":971,"./plot":973}],973:[function(a,G,C){function q(b,k){this.type="choroplethmapbox";this.subplot=b;this.uid=k;this.sourceId="source-"+k;this.layerList=[["fill",f+k+"-fill"],["line",f+k+"-line"]];this.below=null}var n=a("./convert").convert,m=a("./convert").convertOnSelect,f=a("../../plots/mapbox/constants").traceLayerPrefix;a=q.prototype;a.update=function(b){this._update(n(b))};a.updateOnSelect=function(b){this._update(m(b))};a._update=function(b){var k=this.subplot,
e=this.layerList,h=k.belowLookup["trace-"+this.uid];k.map.getSource(this.sourceId).setData(b.geojson);h!==this.below&&(this._removeLayers(),this._addLayers(b,h),this.below=h);for(h=0;h<e.length;h++){var l=e[h],c=l[1];l=b[l[0]];k.setOptions(c,"setLayoutProperty",l.layout);"visible"===l.layout.visibility&&k.setOptions(c,"setPaintProperty",l.paint)}};a._addLayers=function(b,k){for(var e=this.subplot,h=this.layerList,l=this.sourceId,c=0;c<h.length;c++){var g=h[c],d=g[0],p=b[d];e.addLayer({type:d,id:g[1],
source:l,layout:p.layout,paint:p.paint},k)}};a._removeLayers=function(){for(var b=this.subplot.map,k=this.layerList,e=k.length-1;0<=e;e--)b.removeLayer(k[e][1])};a.dispose=function(){var b=this.subplot.map;this._removeLayers();b.removeSource(this.sourceId)};G.exports=function(b,k){var e=k[0].trace,h=new q(b,e.uid),l=h.sourceId,c=n(k);e=h.below=b.belowLookup["trace-"+e.uid];b.map.addSource(l,{type:"geojson",data:c.geojson});h._addLayers(c,e);return k[0].trace._glTrace=h}},{"../../plots/mapbox/constants":854,
"./convert":970}],974:[function(a,G,C){C=a("../../components/colorscale/attributes");var q=a("../../plots/template_attributes").hovertemplateAttrs,n=a("../mesh3d/attributes"),m=a("../../plots/attributes");a=a("../../lib/extend").extendFlat;var f={x:{valType:"data_array",editType:"calc+clearAxisTypes"},y:{valType:"data_array",editType:"calc+clearAxisTypes"},z:{valType:"data_array",editType:"calc+clearAxisTypes"},u:{valType:"data_array",editType:"calc"},v:{valType:"data_array",editType:"calc"},w:{valType:"data_array",
editType:"calc"},sizemode:{valType:"enumerated",values:["scaled","absolute"],editType:"calc",dflt:"scaled"},sizeref:{valType:"number",editType:"calc",min:0},anchor:{valType:"enumerated",editType:"calc",values:["tip","tail","cm","center"],dflt:"cm"},text:{valType:"string",dflt:"",arrayOk:!0,editType:"calc"},hovertext:{valType:"string",dflt:"",arrayOk:!0,editType:"calc"},hovertemplate:q({editType:"calc"},{keys:["norm"]}),showlegend:a({},m.showlegend,{dflt:!1})};a(f,C("",{colorAttr:"u/v/w norm",showScaleDflt:!0,
editTypeOverride:"calc"}));["opacity","lightposition","lighting"].forEach(function(b){f[b]=n[b]});f.hoverinfo=a({},m.hoverinfo,{editType:"calc",flags:"x y z u v w norm text name".split(" "),dflt:"x+y+z+norm+text+name"});f.transforms=void 0;G.exports=f},{"../../components/colorscale/attributes":622,"../../lib/extend":740,"../../plots/attributes":795,"../../plots/template_attributes":877,"../mesh3d/attributes":1099}],975:[function(a,G,C){var q=a("../../components/colorscale/calc");G.exports=function(n,
m){for(var f=m.u,b=m.v,k=m.w,e=Math.min(m.x.length,m.y.length,m.z.length,f.length,b.length,k.length),h=-Infinity,l=Infinity,c=0;c<e;c++){var g=f[c],d=b[c],p=k[c];g=Math.sqrt(g*g+d*d+p*p);h=Math.max(h,g);l=Math.min(l,g)}m._len=e;m._normMax=h;q(n,m,{vals:[l,h],containerStr:"",cLetter:"c"})}},{"../../components/colorscale/calc":623}],976:[function(a,G,C){function q(d,p){this.scene=d;this.uid=p;this.data=this.mesh=null}function n(d,p){function r(y,A){var z=t[A],F=w[l[A]];return b(y,function(D){return z.d2l(D)*
F})}var t=d.fullSceneLayout,w=d.dataScale;d={};d.vectors=h(r(p.u,"xaxis"),r(p.v,"yaxis"),r(p.w,"zaxis"),p._len);d.positions=h(r(p.x,"xaxis"),r(p.y,"yaxis"),r(p.z,"zaxis"),p._len);var x=e(p);d.colormap=k(p);d.vertexIntensityBounds=[x.min/p._normMax,x.max/p._normMax];d.coneOffset=c[p.anchor];d.coneSize="scaled"===p.sizemode?p.sizeref||.5:p.sizeref&&p._normMax?p.sizeref/p._normMax:.5;d=m(d);x=p.lightposition;d.lightPosition=[x.x,x.y,x.z];d.ambient=p.lighting.ambient;d.diffuse=p.lighting.diffuse;d.specular=
p.lighting.specular;d.roughness=p.lighting.roughness;d.fresnel=p.lighting.fresnel;d.opacity=p.opacity;p._pad=g[p.anchor]*d.vectorScale*d.coneScale*p._normMax;return d}var m=a("gl-cone3d"),f=a("gl-cone3d").createConeMesh,b=a("../../lib").simpleMap,k=a("../../lib/gl_format_color").parseColorScale,e=a("../../components/colorscale").extractOpts,h=a("../../plots/gl3d/zip3");a=q.prototype;a.handlePick=function(d){if(d.object===this.mesh){var p=d.index=d.data.index,r=this.data.u[p],t=this.data.v[p],w=this.data.w[p];
d.traceCoordinate=[this.data.x[p],this.data.y[p],this.data.z[p],r,t,w,Math.sqrt(r*r+t*t+w*w)];r=this.data.hovertext||this.data.text;Array.isArray(r)&&void 0!==r[p]?d.textLabel=r[p]:r&&(d.textLabel=r);return!0}};var l={xaxis:0,yaxis:1,zaxis:2},c={tip:1,tail:0,cm:.25,center:.5},g={tip:1,tail:1,cm:.75,center:.5};a.update=function(d){this.data=d;d=n(this.scene,d);this.mesh.update(d)};a.dispose=function(){this.scene.glplot.remove(this.mesh);this.mesh.dispose()};G.exports=function(d,p){var r=d.glplot.gl,
t=n(d,p);r=f(r,t);t=new q(d,p.uid);t.mesh=r;t.data=p;r._trace=t;d.glplot.add(r);return t}},{"../../components/colorscale":627,"../../lib":750,"../../lib/gl_format_color":746,"../../plots/gl3d/zip3":852,"gl-cone3d":259}],977:[function(a,G,C){var q=a("../../lib"),n=a("../../components/colorscale/defaults"),m=a("./attributes");G.exports=function(f,b,k,e){function h(r,t){return q.coerce(f,b,m,r,t)}k=h("u");var l=h("v"),c=h("w"),g=h("x"),d=h("y"),p=h("z");k&&k.length&&l&&l.length&&c&&c.length&&g&&g.length&&
d&&d.length&&p&&p.length?(h("sizeref"),h("sizemode"),h("anchor"),h("lighting.ambient"),h("lighting.diffuse"),h("lighting.specular"),h("lighting.roughness"),h("lighting.fresnel"),h("lightposition.x"),h("lightposition.y"),h("lightposition.z"),n(f,b,e,h,{prefix:"",cLetter:"c"}),h("text"),h("hovertext"),h("hovertemplate"),b._length=null):b.visible=!1}},{"../../components/colorscale/defaults":625,"../../lib":750,"./attributes":974}],978:[function(a,G,C){G.exports={moduleType:"trace",name:"cone",basePlotModule:a("../../plots/gl3d"),
categories:["gl3d","showLegend"],attributes:a("./attributes"),supplyDefaults:a("./defaults"),colorbar:{min:"cmin",max:"cmax"},calc:a("./calc"),plot:a("./convert"),eventData:function(q,n){q.norm=n.traceCoordinate[6];return q},meta:{}}},{"../../plots/gl3d":841,"./attributes":974,"./calc":975,"./convert":976,"./defaults":977}],979:[function(a,G,C){C=a("../heatmap/attributes");var q=a("../scatter/attributes"),n=a("../../components/colorscale/attributes"),m=a("../../components/drawing/attributes").dash,
f=a("../../plots/font_attributes"),b=a("../../lib/extend").extendFlat,k=a("../../constants/filter_ops"),e=k.COMPARISON_OPS2;k=k.INTERVAL_OPS;a("../../constants/docs");a=q.line;G.exports=b({z:C.z,x:C.x,x0:C.x0,dx:C.dx,y:C.y,y0:C.y0,dy:C.dy,xperiod:C.xperiod,yperiod:C.yperiod,xperiod0:q.xperiod0,yperiod0:q.yperiod0,xperiodalignment:C.xperiodalignment,yperiodalignment:C.yperiodalignment,text:C.text,hovertext:C.hovertext,transpose:C.transpose,xtype:C.xtype,ytype:C.ytype,zhoverformat:C.zhoverformat,hovertemplate:C.hovertemplate,
hoverongaps:C.hoverongaps,connectgaps:b({},C.connectgaps,{}),fillcolor:{valType:"color",editType:"calc"},autocontour:{valType:"boolean",dflt:!0,editType:"calc",impliedEdits:{"contours.start":void 0,"contours.end":void 0,"contours.size":void 0}},ncontours:{valType:"integer",dflt:15,min:1,editType:"calc"},contours:{type:{valType:"enumerated",values:["levels","constraint"],dflt:"levels",editType:"calc"},start:{valType:"number",dflt:null,editType:"plot",impliedEdits:{"^autocontour":!1}},end:{valType:"number",
dflt:null,editType:"plot",impliedEdits:{"^autocontour":!1}},size:{valType:"number",dflt:null,min:0,editType:"plot",impliedEdits:{"^autocontour":!1}},coloring:{valType:"enumerated",values:["fill","heatmap","lines","none"],dflt:"fill",editType:"calc"},showlines:{valType:"boolean",dflt:!0,editType:"plot"},showlabels:{valType:"boolean",dflt:!1,editType:"plot"},labelfont:f({editType:"plot",colorEditType:"style"}),labelformat:{valType:"string",dflt:"",editType:"plot"},operation:{valType:"enumerated",values:[].concat(e).concat(k),
dflt:"\x3d",editType:"calc"},value:{valType:"any",dflt:0,editType:"calc"},editType:"calc",impliedEdits:{autocontour:!1}},line:{color:b({},a.color,{editType:"style+colorbars"}),width:{valType:"number",min:0,editType:"style+colorbars"},dash:m,smoothing:b({},a.smoothing,{}),editType:"plot"}},n("",{cLetter:"z",autoColorDflt:!1,editTypeOverride:"calc"}))},{"../../components/colorscale/attributes":622,"../../components/drawing/attributes":636,"../../constants/docs":720,"../../constants/filter_ops":721,
"../../lib/extend":740,"../../plots/font_attributes":827,"../heatmap/attributes":1036,"../scatter/attributes":1158}],980:[function(a,G,C){var q=a("../../components/colorscale"),n=a("../heatmap/calc"),m=a("./set_contours"),f=a("./end_plus");G.exports=function(b,k){var e=n(b,k),h=e[0].z;m(k,h);var l=k.contours,c=q.extractOpts(k);"heatmap"===l.coloring&&c.auto&&!1===k.autocontour?(h=l.start,c=f(l),l=l.size||1,c=Math.floor((c-h)/l)+1,isFinite(l)||(c=l=1),h-=l/2,l=[h,h+c*l]):l=h;q.calc(b,k,{vals:l,cLetter:"z"});
return e}},{"../../components/colorscale":627,"../heatmap/calc":1037,"./end_plus":990,"./set_contours":998}],981:[function(a,G,C){G.exports=function(q,n){var m=q[0],f=m.z,b;switch(n.type){case "levels":m=Math.min(f[0][0],f[0][1]);for(b=0;b<q.length;b++){var k=q[b];k.prefixBoundary=!k.edgepaths.length&&(m>k.level||k.starts.length&&m===k.level)}break;case "constraint":if(m.prefixBoundary=!1,!m.edgepaths.length){var e=m.x.length,h=m.y.length;q=-Infinity;k=Infinity;for(b=0;b<h;b++)k=Math.min(k,f[b][0]),
k=Math.min(k,f[b][e-1]),q=Math.max(q,f[b][0]),q=Math.max(q,f[b][e-1]);for(b=1;b<e-1;b++)k=Math.min(k,f[0][b]),k=Math.min(k,f[h-1][b]),q=Math.max(q,f[0][b]),q=Math.max(q,f[h-1][b]);b=n.value;switch(n._operation){case "\x3e":b>q&&(m.prefixBoundary=!0);break;case "\x3c":if(b<k||m.starts.length&&b===k)m.prefixBoundary=!0;break;case "[]":n=Math.min(b[0],b[1]);b=Math.max(b[0],b[1]);if(b<k||n>q||m.starts.length&&b===k)m.prefixBoundary=!0;break;case "][":n=Math.min(b[0],b[1]),b=Math.max(b[0],b[1]),n<k&&b>
q&&(m.prefixBoundary=!0)}}}}},{}],982:[function(a,G,C){var q=a("../../components/colorscale"),n=a("./make_color_map"),m=a("./end_plus");G.exports={min:"zmin",max:"zmax",calc:function(f,b,k){f=b.contours;var e=b.line,h=f.size||1,l=f.coloring,c=n(b,{isColorbar:!0});"heatmap"===l?(b=q.extractOpts(b),k._fillgradient=b.reversescale?q.flipScale(b.colorscale):b.colorscale,k._zrange=[b.min,b.max]):"fill"===l&&(k._fillcolor=c);k._line={color:"lines"===l?c:e.color,width:!1!==f.showlines?e.width:0,dash:e.dash};
k._levels={start:f.start,end:m(f),size:h}}}},{"../../components/colorscale":627,"./end_plus":990,"./make_color_map":995}],983:[function(a,G,C){G.exports={BOTTOMSTART:[1,9,13,104,713],TOPSTART:[4,6,7,104,713],LEFTSTART:[8,12,14,208,1114],RIGHTSTART:[2,3,11,208,1114],NEWDELTA:[null,[-1,0],[0,-1],[-1,0],[1,0],null,[0,-1],[-1,0],[0,1],[0,1],null,[0,1],[1,0],[1,0],[0,-1]],CHOOSESADDLE:{104:[4,1],208:[2,8],713:[7,13],1114:[11,14]},SADDLEREMAINDER:{1:4,2:8,4:1,7:13,8:2,11:14,13:7,14:11},LABELDISTANCE:2,
LABELINCREASE:10,LABELMIN:3,LABELMAX:10,LABELOPTIMIZER:{EDGECOST:1,ANGLECOST:1,NEIGHBORCOST:5,SAMELEVELFACTOR:10,SAMELEVELDISTANCE:5,MAXCOST:100,INITIALSEARCHPOINTS:10,ITERATIONS:5}}},{}],984:[function(a,G,C){var q=a("fast-isnumeric"),n=a("./label_defaults");C=a("../../components/color");var m=C.addOpacity,f=C.opacity;a=a("../../constants/filter_ops");var b=a.CONSTRAINT_REDUCTION,k=a.COMPARISON_OPS2;G.exports=function(e,h,l,c,g,d){var p=h.contours,r=l("contours.operation");p._operation=b[r];if(-1===
k.indexOf(p.operation))if(l("contours.value",[0,1]),Array.isArray(p.value))if(2<p.value.length)p.value=p.value.slice(2);else if(0===p.length)p.value=[0,1];else if(2>p.length){var t=parseFloat(p.value[0]);p.value=[t,t+1]}else p.value=[parseFloat(p.value[0]),parseFloat(p.value[1])];else q(p.value)&&(t=parseFloat(p.value),p.value=[t,t+1]);else l("contours.value",0),q(p.value)||(Array.isArray(p.value)?p.value=parseFloat(p.value[0]):p.value=0);if("\x3d"===r)p=p.showlines=!0;else{p=l("contours.showlines");
var w=l("fillcolor",m((e.line||{}).color||g,.5))}if(p){e=w&&f(w)?m(h.fillcolor,1):g;var x=l("line.color",e);l("line.width",2);l("line.dash")}l("line.smoothing");n(l,c,x,d)}},{"../../components/color":615,"../../constants/filter_ops":721,"./label_defaults":994,"fast-isnumeric":241}],985:[function(a,G,C){function q(k,e){function h(g){return b(g)?+g:null}var l=Array.isArray(e),c;-1!==f.COMPARISON_OPS2.indexOf(k)?c=l?h(e[0]):h(e):-1!==f.INTERVAL_OPS.indexOf(k)?c=l?[h(e[0]),h(e[1])]:[h(e),h(e)]:-1!==f.SET_OPS.indexOf(k)&&
(c=l?e.map(h):[h(e)]);return c}function n(k){return function(e){e=q(k,e);var h=Math.min(e[0],e[1]);e=Math.max(e[0],e[1]);return{start:h,end:e,size:e-h}}}function m(k){return function(e){e=q(k,e);return{start:e,end:Infinity,size:Infinity}}}var f=a("../../constants/filter_ops"),b=a("fast-isnumeric");G.exports={"[]":n("[]"),"][":n("]["),"\x3e":m("\x3e"),"\x3c":m("\x3c"),"\x3d":m("\x3d")}},{"../../constants/filter_ops":721,"fast-isnumeric":241}],986:[function(a,G,C){G.exports=function(q,n,m,f){q=f("contours.start");
f=f("contours.end");f=!1===q||!1===f;q=m("contours.size");(f?!(n.autocontour=!0):!m("autocontour",!1))&&q||m("ncontours")}},{}],987:[function(a,G,C){function q(m){return n.extendFlat({},m,{edgepaths:n.extendDeep([],m.edgepaths),paths:n.extendDeep([],m.paths),starts:n.extendDeep([],m.starts)})}var n=a("../../lib");G.exports=function(m,f){var b=function(h){return h.reverse()},k=function(h){return h};switch(f){case "\x3d":case "\x3c":return m;case "\x3e":1!==m.length&&n.warn("Contour data invalid for the specified inequality operation.");
var e=m[0];for(f=0;f<e.edgepaths.length;f++)e.edgepaths[f]=b(e.edgepaths[f]);for(f=0;f<e.paths.length;f++)e.paths[f]=b(e.paths[f]);for(f=0;f<e.starts.length;f++)e.starts[f]=b(e.starts[f]);return m;case "][":f=b,b=k,k=f;case "[]":2!==m.length&&n.warn("Contour data invalid for the specified inequality range operation.");e=q(m[0]);m=q(m[1]);for(f=0;f<e.edgepaths.length;f++)e.edgepaths[f]=b(e.edgepaths[f]);for(f=0;f<e.paths.length;f++)e.paths[f]=b(e.paths[f]);for(f=0;f<e.starts.length;f++)e.starts[f]=
b(e.starts[f]);for(;m.edgepaths.length;)e.edgepaths.push(k(m.edgepaths.shift()));for(;m.paths.length;)e.paths.push(k(m.paths.shift()));for(;m.starts.length;)e.starts.push(k(m.starts.shift()));return[e]}}},{"../../lib":750}],988:[function(a,G,C){var q=a("../../lib"),n=a("../heatmap/xyz_defaults"),m=a("../scatter/period_defaults"),f=a("./constraint_defaults"),b=a("./contours_defaults"),k=a("./style_defaults"),e=a("./attributes");G.exports=function(h,l,c,g){function d(t,w){return q.coerce(h,l,e,t,w)}
function p(t){return q.coerce2(h,l,e,t)}if(n(h,l,d,g)){m(h,l,g,d);d("text");d("hovertext");d("hovertemplate");d("hoverongaps");var r="constraint"===d("contours.type");d("connectgaps",q.isArray1D(l.z));r?f(h,l,d,g,c):(b(h,l,d,p),k(h,l,d,g))}else l.visible=!1}},{"../../lib":750,"../heatmap/xyz_defaults":1050,"../scatter/period_defaults":1178,"./attributes":979,"./constraint_defaults":984,"./contours_defaults":986,"./style_defaults":1E3}],989:[function(a,G,C){var q=a("../../lib"),n=a("./constraint_mapping"),
m=a("./end_plus");G.exports=function(f,b,k){var e="constraint"===f.type?n[f._operation](f.value):f,h=e.size,l=[],c=m(e),g=k.trace._carpetTrace;b=g?{xaxis:g.aaxis,yaxis:g.baxis,x:k.a,y:k.b}:{xaxis:b.xaxis,yaxis:b.yaxis,x:k.x,y:k.y};for(e=e.start;e<c;e+=h)if(l.push(q.extendFlat({level:e,crossings:{},starts:[],edgepaths:[],paths:[],z:k.z,smoothing:k.trace.line.smoothing},b)),1E3<l.length){q.warn("Too many contours, clipping at 1000",f);break}return l}},{"../../lib":750,"./constraint_mapping":985,"./end_plus":990}],
990:[function(a,G,C){G.exports=function(q){return q.end+q.size/1E6}},{}],991:[function(a,G,C){function q(k,e,h,l){return Math.abs(k[0]-e[0])<h&&Math.abs(k[1]-e[1])<l}function n(k,e,h,l,c){var g=e.join(","),d=k.crossings[g],p=d,r=0,t=0;20<p&&h?208===p||1114===p?r=0===e[0]?1:-1:t=0===e[1]?1:-1:-1!==b.BOTTOMSTART.indexOf(p)?t=1:-1!==b.LEFTSTART.indexOf(p)?r=1:-1!==b.TOPSTART.indexOf(p)?t=-1:r=-1;var w=[r,t];p=[m(k,e,[-w[0],-w[1]])];var x=k.z.length,y=k.z[0].length;r=e.slice();var A=w.slice();for(t=0;1E4>
t;t++){20<d?(d=b.CHOOSESADDLE[d][0>(w[0]||w[1])?0:1],k.crossings[g]=b.SADDLEREMAINDER[d]):delete k.crossings[g];w=b.NEWDELTA[d];if(!w){f.log("Found bad marching index:",d,e,k.level);break}p.push(m(k,e,w));e[0]+=w[0];e[1]+=w[1];g=e.join(",");q(p[p.length-1],p[p.length-2],l,c)&&p.pop();d=w[0]&&(0>e[0]||e[0]>y-2)||w[1]&&(0>e[1]||e[1]>x-2);if(e[0]===r[0]&&e[1]===r[1]&&w[0]===A[0]&&w[1]===A[1]||h&&d)break;d=k.crossings[g]}1E4===t&&f.log("Infinite loop in contour?");e=q(p[0],p[p.length-1],l,c);w=0;x=.2*
k.smoothing;g=[];d=0;for(t=1;t<p.length;t++){A=p[t];var z=p[t-1];y=A[2]-z[2];A=A[3]-z[3];y=Math.sqrt(y*y+A*A);w+=y;g.push(y)}y=w/g.length*x;for(t=p.length-2;t>=d;t--)if(A=g[t],A<y){x=0;for(w=t-1;w>=d;w--)if(A+g[w]<y)A+=g[w];else break;if(e&&t===p.length-2)for(x=0;x<w;x++)if(A+g[x]<y)A+=g[x];else break;A=t-w+x+1;z=Math.floor((t+w+x+2)/2);A=e||t!==p.length-2?e||-1!==w?A%2?p[z%p.length]:[(p[z%p.length][0]+p[(z+1)%p.length][0])/2,(p[z%p.length][1]+p[(z+1)%p.length][1])/2]:p[0]:p[p.length-1];p.splice(w+
1,t-w+1,A);t=w+1;x&&(d=x);e&&(t===p.length-2?p[x]=p[p.length-1]:0===t&&(p[p.length-1]=p[0]))}p.splice(0,d);for(t=0;t<p.length;t++)p[t].length=2;if(!(2>p.length))if(e)p.pop(),k.paths.push(p);else{h||f.log("Unclosed interior contour?",k.level,r.join(","),p.join("L"));g=!1;for(h=0;h<k.edgepaths.length;h++)if(t=k.edgepaths[h],!g&&q(t[0],p[p.length-1],l,c)){p.pop();g=!0;d=!1;for(r=0;r<k.edgepaths.length;r++)if(e=k.edgepaths[r],q(e[e.length-1],p[0],l,c)){d=!0;p.shift();k.edgepaths.splice(h,1);r===h?k.paths.push(p.concat(e)):
(r>h&&r--,k.edgepaths[r]=e.concat(p,t));break}d||(k.edgepaths[h]=p.concat(t))}for(h=0;h<k.edgepaths.length&&!g;h++)t=k.edgepaths[h],q(t[t.length-1],p[0],l,c)&&(p.shift(),k.edgepaths[h]=t.concat(p),g=!0);g||k.edgepaths.push(p)}}function m(k,e,h){var l=e[0]+Math.max(h[0],0);e=e[1]+Math.max(h[1],0);var c=k.z[e][l],g=k.xaxis,d=k.yaxis;if(h[1])return h=(k.level-c)/(k.z[e][l+1]-c),[g.c2p((1-h)*k.x[l]+h*k.x[l+1],!0),d.c2p(k.y[e],!0),l+h,e];h=(k.level-c)/(k.z[e+1][l]-c);return[g.c2p(k.x[l],!0),d.c2p((1-h)*
k.y[e]+h*k.y[e+1],!0),l,e+h]}var f=a("../../lib"),b=a("./constants");G.exports=function(k,e,h){var l,c;e=e||.01;h=h||.01;for(c=0;c<k.length;c++){var g=k[c];for(l=0;l<g.starts.length;l++){var d=g.starts[l];n(g,d,"edge",e,h)}for(l=0;Object.keys(g.crossings).length&&1E4>l;)l++,d=Object.keys(g.crossings)[0].split(",").map(Number),n(g,d,void 0,e,h);1E4===l&&f.log("Infinite loop in contour?")}}},{"../../lib":750,"./constants":983}],992:[function(a,G,C){var q=a("../../components/color"),n=a("../heatmap/hover");
G.exports=function(m,f,b,k,e){(m=n(m,f,b,k,e,!0))&&m.forEach(function(h){var l=h.trace;"constraint"===l.contours.type&&(l.fillcolor&&q.opacity(l.fillcolor)?h.color=q.addOpacity(l.fillcolor,1):l.contours.showlines&&q.opacity(l.line.color)&&(h.color=q.addOpacity(l.line.color,1)))});return m}},{"../../components/color":615,"../heatmap/hover":1043}],993:[function(a,G,C){G.exports={attributes:a("./attributes"),supplyDefaults:a("./defaults"),calc:a("./calc"),plot:a("./plot").plot,style:a("./style"),colorbar:a("./colorbar"),
hoverPoints:a("./hover"),moduleType:"trace",name:"contour",basePlotModule:a("../../plots/cartesian"),categories:["cartesian","svg","2dMap","contour","showLegend"],meta:{}}},{"../../plots/cartesian":812,"./attributes":979,"./calc":980,"./colorbar":982,"./defaults":988,"./hover":992,"./plot":997,"./style":999}],994:[function(a,G,C){var q=a("../../lib");G.exports=function(n,m,f,b){b||(b={});n("contours.showlabels")&&(m=m.font,q.coerceFont(n,"contours.labelfont",{family:m.family,size:m.size,color:f}),
n("contours.labelformat"));!1!==b.hasHover&&n("zhoverformat")}},{"../../lib":750}],995:[function(a,G,C){var q=a("d3"),n=a("../../components/colorscale"),m=a("./end_plus");G.exports=function(f){var b=f.contours,k=b.start,e=m(b),h=b.size||1,l=Math.floor((e-k)/h)+1,c="lines"===b.coloring?0:1,g=n.extractOpts(f);isFinite(h)||(l=h=1);var d=g.reversescale?n.flipScale(g.colorscale):g.colorscale,p=d.length;f=Array(p);e=Array(p);var r;if("heatmap"===b.coloring){k=g.min;c=g.max;for(r=0;r<p;r++)g=d[r],f[r]=g[0]*
(c-k)+k,e[r]=g[1];h=q.extent([k,c,b.start,b.start+h*(l-1)]);b=h[k<c?0:1];h=h[k<c?1:0];b!==k&&(f.splice(0,0,b),e.splice(0,0,e[0]));h!==c&&(f.push(h),e.push(e[e.length-1]))}else for(r=0;r<p;r++)g=d[r],f[r]=(g[0]*(l+c-1)-c/2)*h+k,e[r]=g[1];return n.makeColorScaleFunc({domain:f,range:e},{noNumericCheck:!0})}},{"../../components/colorscale":627,"./end_plus":990,d3:169}],996:[function(a,G,C){var q=a("./constants");G.exports=function(n){var m=n[0].z,f=m.length,b=m[0].length,k=2===f||2===b,e,h,l;for(h=0;h<
f-1;h++){var c=[];0===h&&(c=c.concat(q.BOTTOMSTART));h===f-2&&(c=c.concat(q.TOPSTART));for(e=0;e<b-1;e++){var g=c.slice();0===e&&(g=g.concat(q.LEFTSTART));e===b-2&&(g=g.concat(q.RIGHTSTART));var d=e+","+h;var p=[[m[h][e],m[h][e+1]],[m[h+1][e],m[h+1][e+1]]];for(l=0;l<n.length;l++){var r=n[l];var t=r.level;var w=(p[0][0]>t?0:1)+(p[0][1]>t?0:2)+(p[1][1]>t?0:4)+(p[1][0]>t?0:8);t=5===w||10===w?t>(p[0][0]+p[0][1]+p[1][0]+p[1][1])/4?5===w?713:1114:5===w?104:208:15===w?0:w;t&&(r.crossings[d]=t,-1!==g.indexOf(t)&&
(r.starts.push([e,h]),k&&-1!==g.indexOf(t,g.indexOf(t)+1)&&r.starts.push([e,h])))}}}}},{"./constants":983}],997:[function(a,G,C){function q(A,z,F,D){var u="fill"===D.coloring||"constraint"===D.type&&"\x3d"!==D._operation,B="M"+F.join("L")+"Z";u&&w(z,D);A=b.ensureSingle(A,"g","contourfill").selectAll("path").data(u?z:[]);A.enter().append("path");A.exit().remove();A.each(function(I){(I=(I.prefixBoundary?B:"")+n(I,F))?f.select(this).attr("d",I).style("stroke","none"):f.select(this).remove()})}function n(A,
z){for(var F="",D=0,u=A.edgepaths.map(function(L,Q){return Q}),B=!0,I,J,N,M;u.length;){J=k.smoothopen(A.edgepaths[D],A.smoothing);F+=B?J:J.replace(/^M/,"L");u.splice(u.indexOf(D),1);B=A.edgepaths[D][A.edgepaths[D].length-1];N=-1;for(J=0;4>J;J++){if(!B){b.log("Missing end?",D,A);break}.01>Math.abs(B[1]-z[0][1])&&!(.01>Math.abs(B[0]-z[2][0]))?I=z[1]:.01>Math.abs(B[0]-z[0][0])?I=z[0]:.01>Math.abs(B[1]-z[2][1])?I=z[3]:.01>Math.abs(B[0]-z[2][0])&&(I=z[2]);for(M=0;M<A.edgepaths.length;M++){var E=A.edgepaths[M][0];
.01>Math.abs(B[0]-I[0])?.01>Math.abs(B[0]-E[0])&&0<=(E[1]-B[1])*(I[1]-E[1])&&(I=E,N=M):.01>Math.abs(B[1]-I[1])?.01>Math.abs(B[1]-E[1])&&0<=(E[0]-B[0])*(I[0]-E[0])&&(I=E,N=M):b.log("endpt to newendpt is not vert. or horz.",B,I,E)}B=I;if(0<=N)break;F+="L"+I}if(N===A.edgepaths.length){b.log("unclosed perimeter path");break}D=N;if(B=-1===u.indexOf(D))D=u[0],F+="Z"}for(D=0;D<A.paths.length;D++)F+=k.smoothclosed(A.paths[D],A.smoothing);return F}function m(A,z,F,D,u){var B=b.ensureSingle(A,"g","contourlines"),
I=!1!==u.showlines,J=u.showlabels,N=I&&J,M=C.createLines(B,I||J,z);B=C.createLineClip(B,N,F,D.trace.uid);A=A.selectAll("g.contourlabels").data(J?[0]:[]);A.exit().remove();A.enter().append("g").classed("contourlabels",!0);if(J){var E=[],L=[];b.clearLocationCache();var Q=C.labelFormatter(F,D),S=k.tester.append("text").attr("data-notex",1).call(k.font,u.labelfont),R=z[0].xaxis,O=z[0].yaxis;u=R._length;var T=O._length,V=R.range,X=O.range,ba=b.aggNums(Math.min,null,D.x),aa=b.aggNums(Math.max,null,D.x),
ka=b.aggNums(Math.min,null,D.y),ha=b.aggNums(Math.max,null,D.y);D=Math.max(R.c2p(ba,!0),0);R=Math.min(R.c2p(aa,!0),u);aa=Math.max(O.c2p(ha,!0),0);O=Math.min(O.c2p(ka,!0),T);var ca={};V[0]<V[1]?(ca.left=D,ca.right=R):(ca.left=R,ca.right=D);X[0]<X[1]?(ca.top=aa,ca.bottom=O):(ca.top=O,ca.bottom=aa);ca.middle=(ca.top+ca.bottom)/2;ca.center=(ca.left+ca.right)/2;E.push([[ca.left,ca.top],[ca.right,ca.top],[ca.right,ca.bottom],[ca.left,ca.bottom]]);var sa=x.LABELDISTANCE*Math.sqrt(u*u+T*T)/Math.max(1,z.length/
x.LABELINCREASE);M.each(function(ma){var ra=C.calcTextOpts(ma.level,Q,S,F);f.select(this).selectAll("path").each(function(){var qa=b.getVisibleSegment(this,ca,ra.height/2);if(qa&&!(qa.len<(ra.width+ra.height)*x.LABELMIN))for(var Y=Math.min(Math.ceil(qa.len/sa),x.LABELMAX),pa=0;pa<Y;pa++){var oa=C.findBestTextLocation(this,qa,ra,L,ca);if(!oa)break;C.addLabelData(oa,ra,L,E)}})});S.remove();C.drawLabels(A,L,F,B,N?E:null)}J&&!I&&M.remove()}var f=a("d3"),b=a("../../lib"),k=a("../../components/drawing"),
e=a("../../components/colorscale"),h=a("../../lib/svg_text_utils"),l=a("../../plots/cartesian/axes"),c=a("../../plots/cartesian/set_convert"),g=a("../heatmap/plot"),d=a("./make_crossings"),p=a("./find_all_paths"),r=a("./empty_pathinfo"),t=a("./convert_to_constraints"),w=a("./close_boundaries"),x=a("./constants"),y=x.LABELOPTIMIZER;C.plot=function(A,z,F,D){var u=z.xaxis,B=z.yaxis;b.makeTraceGroups(D,F,"contour").each(function(I){var J=f.select(this),N=I[0],M=N.x,E=N.y,L=N.trace.contours,Q=r(L,z,N),
S=b.ensureSingle(J,"g","heatmapcoloring"),R=[];"heatmap"===L.coloring&&(R=[I]);g(A,z,R,S);d(Q);p(Q);I=u.c2p(M[0],!0);M=u.c2p(M[M.length-1],!0);S=B.c2p(E[0],!0);E=B.c2p(E[E.length-1],!0);E=[[I,E],[M,E],[M,S],[I,S]];M=Q;"constraint"===L.type&&(M=t(Q,L._operation));I=b.ensureSingle(J,"g","contourbg").selectAll("path").data("fill"===L.coloring?[0]:[]);I.enter().append("path");I.exit().remove();I.attr("d","M"+E.join("L")+"Z").style("stroke","none");q(J,M,E,L);m(J,Q,A,N,L);M=N.trace;L="clip"+M.uid;Q=A._fullLayout._clips.selectAll("#"+
L).data(M.connectgaps?[]:[0]);Q.enter().append("clipPath").classed("contourclip",!0).attr("id",L);Q.exit().remove();if(!1===M.connectgaps){M=z.xaxis;I=z.yaxis;S=N.x;R=N.y;var O=N.trace._emptypoints,T=[],V=N.z.length,X=N.z[0].length,ba,aa=[];for(ba=0;ba<X;ba++)aa.push(1);for(ba=0;ba<V;ba++)T.push(aa.slice());for(ba=0;ba<O.length;ba++)V=O[ba],T[V[0]][V[1]]=0;N.zmask=T;N={level:.9,crossings:{},starts:[],edgepaths:[],paths:[],xaxis:M,yaxis:I,x:S,y:R,z:T,smoothing:0};d([N]);p([N]);w([N],{type:"levels"});
b.ensureSingle(Q,"path","").attr("d",(N.prefixBoundary?"M"+E.join("L")+"Z":"")+n(N,E))}else L=null;k.setClipUrl(J,L,A)})};C.createLines=function(A,z,F){var D=F[0].smoothing;A=A.selectAll("g.contourlevel").data(z?F:[]);A.exit().remove();A.enter().append("g").classed("contourlevel",!0);z&&(z=A.selectAll("path.openline").data(function(u){return u.pedgepaths||u.edgepaths}),z.exit().remove(),z.enter().append("path").classed("openline",!0),z.attr("d",function(u){return k.smoothopen(u,D)}).style("stroke-miterlimit",
1).style("vector-effect","non-scaling-stroke"),z=A.selectAll("path.closedline").data(function(u){return u.ppaths||u.paths}),z.exit().remove(),z.enter().append("path").classed("closedline",!0),z.attr("d",function(u){return k.smoothclosed(u,D)}).style("stroke-miterlimit",1).style("vector-effect","non-scaling-stroke"));return A};C.createLineClip=function(A,z,F,D){D=z?"clipline"+D:null;z=F._fullLayout._clips.selectAll("#"+D).data(z?[0]:[]);z.exit().remove();z.enter().append("clipPath").classed("contourlineclip",
!0).attr("id",D);k.setClipUrl(A,D,F);return z};C.labelFormatter=function(A,z){A=A._fullLayout;var F=z.trace;z=F.contours;var D={type:"linear",_id:"ycontour",showexponent:"all",exponentformat:"B"};z.labelformat?(D.tickformat=z.labelformat,c(D,A)):(F=e.extractOpts(F))&&F.colorbar&&F.colorbar._axis?D=F.colorbar._axis:("constraint"===z.type?(z=z.value,Array.isArray(z)?D.range=[z[0],z[z.length-1]]:D.range=[z,z]):(D.range=[z.start,z.end],D.nticks=(z.end-z.start)/z.size),D.range[0]===D.range[1]&&(D.range[1]+=
D.range[0]||1),D.nticks||(D.nticks=1E3),c(D,A),l.prepTicks(D),D._tmin=null,D._tmax=null);return function(u){return l.tickText(D,u).text}};C.calcTextOpts=function(A,z,F,D){z=z(A);F.text(z).call(h.convertToTspans,D);F=F.node();D=k.bBox(F,!0);return{text:z,width:D.width,height:D.height,fontSize:+F.style["font-size"].replace("px",""),level:A,dy:(D.top+D.bottom)/2}};C.findBestTextLocation=function(A,z,F,D,u){var B=F.width;if(z.isClosed){var I=z.len/y.INITIALSEARCHPOINTS;var J=z.min+I/2;var N=z.max}else I=
(z.len-B)/(y.INITIALSEARCHPOINTS+1),J=z.min+I+B/2,N=z.max-(I+B)/2;for(var M=Infinity,E=0;E<y.ITERATIONS;E++){for(;J<N;J+=I){var L=b.getTextLocation(A,z.total,J,B);a:{var Q=F;var S=D,R=Q.width/2,O=Q.height/2,T=L.x,V=L.y,X=L.theta,ba=Math.cos(X)*R,aa=Math.sin(X)*R;R=(T>u.center?u.right-T:T-u.left)/(ba+Math.abs(Math.sin(X)*O));O=(V>u.middle?u.bottom-V:V-u.top)/(Math.abs(aa)+Math.cos(X)*O);if(1>R||1>O)Q=Infinity;else{O=y.EDGECOST*(1/(R-1)+1/(O-1));O+=y.ANGLECOST*X*X;X=T-ba;R=V-aa;T+=ba;V+=aa;for(ba=0;ba<
S.length;ba++){aa=S[ba];var ka=Math.cos(aa.theta)*aa.width/2,ha=Math.sin(aa.theta)*aa.width/2;ka=2*b.segmentDistance(X,R,T,V,aa.x-ka,aa.y-ha,aa.x+ka,aa.y+ha)/(Q.height+aa.height);ha=(aa=aa.level===Q.level)?y.SAMELEVELDISTANCE:1;if(ka<=ha){Q=Infinity;break a}O+=y.NEIGHBORCOST*(aa?y.SAMELEVELFACTOR:1)/(ka-ha)}Q=O}}if(Q<M){M=Q;var ca=L;var sa=J}}if(M>2*y.MAXCOST)break;E&&(I/=2);J=sa-I/2;N=J+1.5*I}if(M<=y.MAXCOST)return ca};C.addLabelData=function(A,z,F,D){var u=z.fontSize,B=z.width+u/3;u=Math.max(0,
z.height-u/3);var I=A.x,J=A.y;A=A.theta;var N=Math.sin(A),M=Math.cos(A),E=function(L,Q){return[I+L*M-Q*N,J+L*N+Q*M]};E=[E(-B/2,-u/2),E(-B/2,u/2),E(B/2,u/2),E(B/2,-u/2)];F.push({text:z.text,x:I,y:J,dy:z.dy,theta:A,level:z.level,width:B,height:u});D.push(E)};C.drawLabels=function(A,z,F,D,u){A=A.selectAll("text").data(z,function(B){return B.text+","+B.x+","+B.y+","+B.theta});A.exit().remove();A.enter().append("text").attr({"data-notex":1,"text-anchor":"middle"}).each(function(B){var I=B.x+Math.sin(B.theta)*
B.dy,J=B.y-Math.cos(B.theta)*B.dy;f.select(this).text(B.text).attr({x:I,y:J,transform:"rotate("+180*B.theta/Math.PI+" "+I+" "+J+")"}).call(h.convertToTspans,F)});if(u){A="";for(z=0;z<u.length;z++)A+="M"+u[z].join("L")+"Z";b.ensureSingle(D,"path","").attr("d",A)}}},{"../../components/colorscale":627,"../../components/drawing":637,"../../lib":750,"../../lib/svg_text_utils":774,"../../plots/cartesian/axes":799,"../../plots/cartesian/set_convert":819,"../heatmap/plot":1047,"./close_boundaries":981,"./constants":983,
"./convert_to_constraints":987,"./empty_pathinfo":989,"./find_all_paths":991,"./make_crossings":996,d3:169}],998:[function(a,G,C){function q(f,b,k){var e={type:"linear",range:[f,b]};n.autoTicks(e,(b-f)/(k||15));return e}var n=a("../../plots/cartesian/axes"),m=a("../../lib");G.exports=function(f,b){var k=f.contours;if(f.autocontour){var e=f.zmin,h=f.zmax;if(f.zauto||void 0===e)e=m.aggNums(Math.min,null,b);if(f.zauto||void 0===h)h=m.aggNums(Math.max,null,b);b=q(e,h,f.ncontours);k.size=b.dtick;k.start=
n.tickFirst(b);b.range.reverse();k.end=n.tickFirst(b);k.start===e&&(k.start+=k.size);k.end===h&&(k.end-=k.size);k.start>k.end&&(k.start=k.end=(k.start+k.end)/2);f._input.contours||(f._input.contours={});m.extendFlat(f._input.contours,{start:k.start,end:k.end,size:k.size});f._input.autocontour=!0}else"constraint"!==k.type&&(h=k.start,b=k.end,e=f._input.contours,h>b&&(k.start=e.start=b,b=k.end=e.end=h,h=k.start),0<k.size||(f=h===b?1:q(h,b,f.ncontours).dtick,e.size=k.size=f))}},{"../../lib":750,"../../plots/cartesian/axes":799}],
999:[function(a,G,C){var q=a("d3"),n=a("../../components/drawing"),m=a("../heatmap/style"),f=a("./make_color_map");G.exports=function(b){var k=q.select(b).selectAll("g.contour");k.style("opacity",function(e){return e[0].trace.opacity});k.each(function(e){var h=q.select(this);e=e[0].trace;var l=e.contours,c=e.line,g=l.size||1,d=l.start,p="constraint"===l.type,r=!p&&"lines"===l.coloring,t=!p&&"fill"===l.coloring,w=r||t?f(e):null;h.selectAll("g.contourlevel").each(function(A){q.select(this).selectAll("path").call(n.lineGroupStyle,
c.width,r?w(A.level):c.color,c.dash)});var x=l.labelfont;h.selectAll("g.contourlabels text").each(function(A){n.font(q.select(this),{family:x.family,size:x.size,color:x.color||(r?w(A.level):c.color)})});if(p)h.selectAll("g.contourfill path").style("fill",e.fillcolor);else if(t){var y;h.selectAll("g.contourfill path").style("fill",function(A){void 0===y&&(y=A.level);return w(A.level+.5*g)});void 0===y&&(y=d);h.selectAll("g.contourbg path").style("fill",w(y-.5*g))}});m(b)}},{"../../components/drawing":637,
"../heatmap/style":1048,"./make_color_map":995,d3:169}],1E3:[function(a,G,C){var q=a("../../components/colorscale/defaults"),n=a("./label_defaults");G.exports=function(m,f,b,k,e){var h=b("contours.coloring"),l,c="";"fill"===h&&(l=b("contours.showlines"));!1!==l&&("lines"!==h&&(c=b("line.color","#000")),b("line.width",.5),b("line.dash"));"none"!==h&&(!0!==m.showlegend&&(f.showlegend=!1),f._dfltShowLegend=!1,q(m,f,k,b,{prefix:"",cLetter:"z"}));b("line.smoothing");n(b,k,c,e)}},{"../../components/colorscale/defaults":625,
"./label_defaults":994}],1001:[function(a,G,C){C=a("../heatmap/attributes");var q=a("../contour/attributes"),n=a("../../components/colorscale/attributes");a=a("../../lib/extend").extendFlat;var m=q.contours;G.exports=a({carpet:{valType:"string",editType:"calc"},z:C.z,a:C.x,a0:C.x0,da:C.dx,b:C.y,b0:C.y0,db:C.dy,text:C.text,hovertext:C.hovertext,transpose:C.transpose,atype:C.xtype,btype:C.ytype,fillcolor:q.fillcolor,autocontour:q.autocontour,ncontours:q.ncontours,contours:{type:m.type,start:m.start,
end:m.end,size:m.size,coloring:{valType:"enumerated",values:["fill","lines","none"],dflt:"fill",editType:"calc"},showlines:m.showlines,showlabels:m.showlabels,labelfont:m.labelfont,labelformat:m.labelformat,operation:m.operation,value:m.value,editType:"calc",impliedEdits:{autocontour:!1}},line:{color:q.line.color,width:q.line.width,dash:q.line.dash,smoothing:q.line.smoothing,editType:"plot"},transforms:void 0},n("",{cLetter:"z",autoColorDflt:!1}))},{"../../components/colorscale/attributes":622,"../../lib/extend":740,
"../contour/attributes":979,"../heatmap/attributes":1036}],1002:[function(a,G,C){var q=a("../../components/colorscale/calc"),n=a("../../lib"),m=a("../heatmap/convert_column_xyz"),f=a("../heatmap/clean_2d_array"),b=a("../heatmap/interp2d"),k=a("../heatmap/find_empties"),e=a("../heatmap/make_bound_array"),h=a("./defaults"),l=a("../carpet/lookup_carpetid"),c=a("../contour/set_contours");G.exports=function(g,d){var p=d._carpetTrace=l(g,d);if(p&&p.visible&&"legendonly"!==p.visible){if(!d.a||!d.b){p=g.data[p.index];
var r=g.data[d.index];r.a||(r.a=p.a);r.b||(r.b=p.b);h(r,d,d._defaultColor,g._fullLayout)}p=d._carpetTrace;r=p.aaxis;var t=p.baxis;r._minDtick=0;t._minDtick=0;n.isArray1D(d.z)&&m(d,r,t,"a","b",["z"]);var w=d._a=d._a||d.a;var x=d._b=d._b||d.b;w=w?r.makeCalcdata(d,"_a"):[];x=x?t.makeCalcdata(d,"_b"):[];var y=d.a0||0;var A=d.da||1;var z=d.b0||0;var F=d.db||1;p=d._z=f(d._z||d.z,d.transpose);d._emptypoints=k(p);b(p,d._emptypoints);var D=n.maxRowLength(p);r=e(d,"scaled"===d.xtype?"":w,y,A,D,r);t=e(d,"scaled"===
d.ytype?"":x,z,F,p.length,t);r={a:r,b:t,z:p};"levels"===d.contours.type&&"none"!==d.contours.coloring&&q(g,d,{vals:p,containerStr:"",cLetter:"z"});g=[r];c(d,d._z);return g}}},{"../../components/colorscale/calc":623,"../../lib":750,"../carpet/lookup_carpetid":952,"../contour/set_contours":998,"../heatmap/clean_2d_array":1038,"../heatmap/convert_column_xyz":1040,"../heatmap/find_empties":1042,"../heatmap/interp2d":1045,"../heatmap/make_bound_array":1046,"./defaults":1003}],1003:[function(a,G,C){var q=
a("../../lib"),n=a("../heatmap/xyz_defaults"),m=a("./attributes"),f=a("../contour/constraint_defaults"),b=a("../contour/contours_defaults"),k=a("../contour/style_defaults");G.exports=function(e,h,l,c){function g(p,r){return q.coerce(e,h,m,p,r)}function d(p){return q.coerce2(e,h,m,p)}g("carpet");e.a&&e.b?n(e,h,g,c,"a","b")?(g("text"),"constraint"===g("contours.type")?f(e,h,g,c,l,{hasHover:!1}):(b(e,h,g,d),k(e,h,g,c,{hasHover:!1}))):h.visible=!1:(h._defaultColor=l,h._length=null)}},{"../../lib":750,
"../contour/constraint_defaults":984,"../contour/contours_defaults":986,"../contour/style_defaults":1E3,"../heatmap/xyz_defaults":1050,"./attributes":1001}],1004:[function(a,G,C){G.exports={attributes:a("./attributes"),supplyDefaults:a("./defaults"),colorbar:a("../contour/colorbar"),calc:a("./calc"),plot:a("./plot"),style:a("../contour/style"),moduleType:"trace",name:"contourcarpet",basePlotModule:a("../../plots/cartesian"),categories:"cartesian svg carpet contour symbols showLegend hasLines carpetDependent noHover noSortingByValue".split(" "),
meta:{}}},{"../../plots/cartesian":812,"../contour/colorbar":982,"../contour/style":999,"./attributes":1001,"./calc":1002,"./defaults":1003,"./plot":1005}],1005:[function(a,G,C){function q(B,I){var J,N,M;for(J=0;J<B.length;J++){var E=B[J];var L=E.pedgepaths=[];var Q=E.ppaths=[];for(N=0;N<E.edgepaths.length;N++){var S=E.edgepaths[N];var R=[];for(M=0;M<S.length;M++)R[M]=I(S[M]);L.push(R)}for(N=0;N<E.paths.length;N++){S=E.paths[N];L=[];for(M=0;M<S.length;M++)L[M]=I(S[M]);Q.push(L)}}}function n(B,I,J,
N,M,E,L){var Q=r.ensureSingle(B,"g","contourlines"),S=!1!==M.showlines,R=M.showlabels,O=S&&R,T=x.createLines(Q,S||R,I);Q=x.createLineClip(Q,O,J,N.trace.uid);B=B.selectAll("g.contourlabels").data(R?[0]:[]);B.exit().remove();B.enter().append("g").classed("contourlabels",!0);if(R){var V=E.xaxis._length;E=E.yaxis._length;var X=[[[0,0],[V,0],[V,E],[0,E]]],ba=[];r.clearLocationCache();var aa=x.labelFormatter(J,N),ka=p.tester.append("text").attr("data-notex",1).call(p.font,M.labelfont),ha={left:0,right:V,
center:V/2,top:0,bottom:E,middle:E/2},ca=y.LABELDISTANCE*Math.sqrt(V*V+E*E)/Math.max(1,I.length/y.LABELINCREASE);T.each(function(sa){var ma=x.calcTextOpts(sa.level,aa,ka,J);c.select(this).selectAll("path").each(function(ra){var qa=r.getVisibleSegment(this,ha,ma.height/2);if(qa&&(m(this,ra,sa,qa,L,ma.height),!(qa.len<(ma.width+ma.height)*y.LABELMIN))){ra=Math.min(Math.ceil(qa.len/ca),y.LABELMAX);for(var Y=0;Y<ra;Y++){var pa=x.findBestTextLocation(this,qa,ma,ba,ha);if(!pa)break;x.addLabelData(pa,ma,
ba,X)}}})});ka.remove();x.drawLabels(B,ba,J,Q,O?X:null)}R&&!S&&T.remove()}function m(B,I,J,N,M,E){function L(X,ba){var aa=0;if(.1>Math.abs(X[0]-R)||.1>Math.abs(X[0]-O)){var ka=b(M.dxydb_rough(X[0],X[1],.1));aa=Math.max(aa,E*k(ba,ka)/2)}if(.1>Math.abs(X[1]-T)||.1>Math.abs(X[1]-V))ka=b(M.dxyda_rough(X[0],X[1],.1)),aa=Math.max(aa,E*k(ba,ka)/2);return aa}for(var Q,S=0;S<J.pedgepaths.length;S++)I===J.pedgepaths[S]&&(Q=J.edgepaths[S]);if(Q){var R=M.a[0],O=M.a[M.a.length-1],T=M.b[0],V=M.b[M.b.length-1];
I=f(B,0,1);B=f(B,N.total,N.total-1);I=L(Q[0],I);Q=N.total-L(Q[Q.length-1],B);N.min<I&&(N.min=I);N.max>Q&&(N.max=Q);N.len=N.max-N.min}}function f(B,I,J){I=B.getPointAtLength(I);J=B.getPointAtLength(J);B=J.x-I.x;I=J.y-I.y;J=Math.sqrt(B*B+I*I);return[B/J,I/J]}function b(B){var I=Math.sqrt(B[0]*B[0]+B[1]*B[1]);return[B[0]/I,B[1]/I]}function k(B,I){B=Math.abs(B[0]*I[0]+B[1]*I[1]);return Math.sqrt(1-B*B)/B}function e(B,I,J,N,M,E){var L,Q=r.ensureSingle(B,"g","contourbg").selectAll("path").data("fill"!==
E||M?[]:[0]);Q.enter().append("path");Q.exit().remove();var S=[];for(L=0;L<I.length;L++)B=I[L],M=g([],B.x,J.c2p),E=g([],B.y,N.c2p),S.push(d(M,E,B.bicubic));Q.attr("d","M"+S.join("L")+"Z").style("stroke","none")}function h(B,I,J,N,M,E,L,Q,S,R,O){(R="fill"===R)&&F(M,B.contours);I=r.ensureSingle(I,"g","contourfill").selectAll("path").data(R?M:[]);I.enter().append("path");I.exit().remove();I.each(function(T){(T=(T.prefixBoundary?O:"")+l(B,T,E,L,Q,S,J,N))?c.select(this).attr("d",T).style("stroke","none"):
c.select(this).remove()})}function l(B,I,J,N,M,E,L,Q){function S(ma){return Math.abs(ma[0]-J[2][0])<ka}function R(ma,ra){var qa="";if(Math.abs(ma[1]-J[0][1])<ha&&!S(ma)||Math.abs(ma[1]-J[2][1])<ha&&!(Math.abs(ma[0]-J[0][0])<ka)){var Y=M.aaxis;var pa=u(M,E,[ma[0],ra[0]],.5*(ma[1]+ra[1]))}else Y=M.baxis,pa=u(M,E,.5*(ma[0]+ra[0]),[ma[1],ra[1]]);for(ma=1;ma<pa.length;ma++)for(qa+=Y.smoothing?"C":"L",ra=0;ra<pa[ma].length;ra++){var oa=pa[ma][ra];qa+=[L.c2p(oa[0]),Q.c2p(oa[1])]+" "}return qa}var O="",T=
I.edgepaths.map(function(ma,ra){return ra}),V=!0,X,ba,aa,ka=1E-4*Math.abs(J[0][0]-J[2][0]),ha=1E-4*Math.abs(J[0][1]-J[2][1]);B=0;for(X=null;T.length;){var ca=I.edgepaths[B][0];X&&(O+=R(X,ca));X=p.smoothopen(I.edgepaths[B].map(N),I.smoothing);O+=V?X:X.replace(/^M/,"L");T.splice(T.indexOf(B),1);X=I.edgepaths[B][I.edgepaths[B].length-1];ca=-1;for(V=0;4>V;V++){if(!X){r.log("Missing end?",B,I);break}Math.abs(X[1]-J[0][1])<ha&&!S(X)?ba=J[1]:Math.abs(X[0]-J[0][0])<ka?ba=J[0]:Math.abs(X[1]-J[2][1])<ha?ba=
J[3]:S(X)&&(ba=J[2]);for(aa=0;aa<I.edgepaths.length;aa++){var sa=I.edgepaths[aa][0];Math.abs(X[0]-ba[0])<ka?Math.abs(X[0]-sa[0])<ka&&0<=(sa[1]-X[1])*(ba[1]-sa[1])&&(ba=sa,ca=aa):Math.abs(X[1]-ba[1])<ha?Math.abs(X[1]-sa[1])<ha&&0<=(sa[0]-X[0])*(ba[0]-sa[0])&&(ba=sa,ca=aa):r.log("endpt to newendpt is not vert. or horz.",X,ba,sa)}if(0<=ca)break;O+=R(X,ba);X=ba}if(ca===I.edgepaths.length){r.log("unclosed perimeter path");break}B=ca;if(V=-1===T.indexOf(B))B=T[0],O+=R(X,ba)+"Z",X=null}for(B=0;B<I.paths.length;B++)O+=
p.smoothclosed(I.paths[B].map(N),I.smoothing);return O}var c=a("d3"),g=a("../carpet/map_1d_array"),d=a("../carpet/makepath"),p=a("../../components/drawing"),r=a("../../lib"),t=a("../contour/make_crossings"),w=a("../contour/find_all_paths"),x=a("../contour/plot"),y=a("../contour/constants"),A=a("../contour/convert_to_constraints"),z=a("../contour/empty_pathinfo"),F=a("../contour/close_boundaries"),D=a("../carpet/lookup_carpetid"),u=a("../carpet/axis_aligned_line");G.exports=function(B,I,J,N){var M=
I.xaxis,E=I.yaxis;r.makeTraceGroups(N,J,"contour").each(function(L){function Q(Y){Y=O.ab2xy(Y[0],Y[1],!0);return[M.c2p(Y[0]),E.c2p(Y[1])]}var S=c.select(this);L=L[0];var R=L.trace,O=R._carpetTrace=D(B,R),T=B.calcdata[O.index][0];if(O.visible&&"legendonly"!==O.visible){var V=L.a,X=L.b,ba=R.contours,aa=z(ba,I,L),ka="constraint"===ba.type,ha=ba._operation,ca=ka?"\x3d"===ha?"lines":"fill":ba.coloring,sa=[[V[0],X[X.length-1]],[V[V.length-1],X[X.length-1]],[V[V.length-1],X[0]],[V[0],X[0]]];t(aa);w(aa,1E-8*
(V[V.length-1]-V[0]),1E-8*(X[X.length-1]-X[0]));V=aa;"constraint"===ba.type&&(V=A(aa,ha));q(aa,Q);var ma,ra=[];for(ma=T.clipsegments.length-1;0<=ma;ma--){ha=T.clipsegments[ma];X=g([],ha.x,M.c2p);var qa=g([],ha.y,E.c2p);X.reverse();qa.reverse();ra.push(d(X,qa,ha.bicubic))}ha="M"+ra.join("L")+"Z";e(S,T.clipsegments,M,E,ka,ca);h(R,S,M,E,V,sa,Q,O,T,ca,ha);n(S,aa,B,L,ba,I,O);p.setClipUrl(S,O._clipPathId,B)}})}},{"../../components/drawing":637,"../../lib":750,"../carpet/axis_aligned_line":936,"../carpet/lookup_carpetid":952,
"../carpet/makepath":953,"../carpet/map_1d_array":954,"../contour/close_boundaries":981,"../contour/constants":983,"../contour/convert_to_constraints":987,"../contour/empty_pathinfo":989,"../contour/find_all_paths":991,"../contour/make_crossings":996,"../contour/plot":997,d3:169}],1006:[function(a,G,C){C=a("../../components/colorscale/attributes");var q=a("../../plots/template_attributes").hovertemplateAttrs,n=a("../../plots/attributes"),m=a("../scattermapbox/attributes");a=a("../../lib/extend").extendFlat;
G.exports=a({lon:m.lon,lat:m.lat,z:{valType:"data_array",editType:"calc"},radius:{valType:"number",editType:"plot",arrayOk:!0,min:1,dflt:30},below:{valType:"string",editType:"plot"},text:m.text,hovertext:m.hovertext,hoverinfo:a({},n.hoverinfo,{flags:["lon","lat","z","text","name"]}),hovertemplate:q(),showlegend:a({},n.showlegend,{dflt:!1})},C("",{cLetter:"z",editTypeOverride:"calc"}))},{"../../components/colorscale/attributes":622,"../../lib/extend":740,"../../plots/attributes":795,"../../plots/template_attributes":877,
"../scattermapbox/attributes":1223}],1007:[function(a,G,C){var q=a("fast-isnumeric"),n=a("../../lib").isArrayOrTypedArray,m=a("../../constants/numerical").BADNUM,f=a("../../components/colorscale/calc"),b=a("../../lib")._;G.exports=function(k,e){for(var h=e._length,l=Array(h),c=e.z,g=n(c)&&c.length,d=0;d<h;d++){var p=l[d]={},r=e.lon[d],t=e.lat[d];p.lonlat=q(r)&&q(t)?[+r,+t]:[m,m];g&&(r=c[d],p.z=q(r)?r:m)}f(k,e,{vals:g?c:[0,1],containerStr:"",cLetter:"z"});h&&(l[0].t={labels:{lat:b(k,"lat:")+" ",lon:b(k,
"lon:")+" "}});return l}},{"../../components/colorscale/calc":623,"../../constants/numerical":725,"../../lib":750,"fast-isnumeric":241}],1008:[function(a,G,C){var q=a("fast-isnumeric"),n=a("../../lib"),m=a("../../components/color"),f=a("../../components/colorscale"),b=a("../../constants/numerical").BADNUM,k=a("../../lib/geojson_utils").makeBlank;G.exports=function(e){var h=e[0].trace,l=!0===h.visible&&0!==h._length,c=h._opts={heatmap:{layout:{visibility:"none"},paint:{}},geojson:k()};if(!l)return c;
l=[];var g,d=h.z,p=h.radius;d=n.isArrayOrTypedArray(d)&&d.length;var r=n.isArrayOrTypedArray(p);for(g=0;g<e.length;g++){var t=e[g],w=t.lonlat;if(w[0]!==b){var x={};d&&(t=t.z,x.z=t!==b?t:0);r&&(x.r=q(p[g])&&0<p[g]?+p[g]:0);l.push({type:"Feature",geometry:{type:"Point",coordinates:w},properties:x})}}e=f.extractOpts(h);p=e.reversescale?f.flipScale(e.colorscale):e.colorscale;g=p[0][1];w=["interpolate",["linear"],["heatmap-density"],0,1>m.opacity(g)?g:m.addOpacity(g,0)];for(g=1;g<p.length;g++)w.push(p[g][0],
p[g][1]);g=["interpolate",["linear"],["get","z"],e.min,0,e.max,1];n.extendFlat(c.heatmap.paint,{"heatmap-weight":d?g:1/(e.max-e.min),"heatmap-color":w,"heatmap-radius":r?{type:"identity",property:"r"}:h.radius,"heatmap-opacity":h.opacity});c.geojson={type:"FeatureCollection",features:l};c.heatmap.layout.visibility="visible";return c}},{"../../components/color":615,"../../components/colorscale":627,"../../constants/numerical":725,"../../lib":750,"../../lib/geojson_utils":744,"fast-isnumeric":241}],
1009:[function(a,G,C){var q=a("../../lib"),n=a("../../components/colorscale/defaults"),m=a("./attributes");G.exports=function(f,b,k,e){function h(c,g){return q.coerce(f,b,m,c,g)}k=h("lon")||[];var l=h("lat")||[];(k=Math.min(k.length,l.length))?(b._length=k,h("z"),h("radius"),h("below"),h("text"),h("hovertext"),h("hovertemplate"),n(f,b,e,h,{prefix:"",cLetter:"z"})):b.visible=!1}},{"../../components/colorscale/defaults":625,"../../lib":750,"./attributes":1006}],1010:[function(a,G,C){G.exports=function(q,
n){q.lon=n.lon;q.lat=n.lat;q.z=n.z;return q}},{}],1011:[function(a,G,C){var q=a("../../lib"),n=a("../../plots/cartesian/axes"),m=a("../scattermapbox/hover");G.exports=function(f,b,k){if(f=m(f,b,k)){f=f[0];var e=f.cd;b=e[0].trace;k=e[f.index];delete f.color;if("z"in k){var h=f.subplot.mockAxis;f.z=k.z;f.zLabel=n.tickText(h,h.c2l(k.z),"hover").text}e=e[0].t.labels;if(b.hovertemplate)b=void 0;else{h=(k.hi||b.hoverinfo).split("+");var l=-1!==h.indexOf("all"),c=-1!==h.indexOf("lon"),g=-1!==h.indexOf("lat"),
d=k.lonlat,p=[];l||c&&g?p.push("("+(d[0]+"°, ")+(d[1]+"°)")):c?p.push(e.lon+(d[0]+"°")):g&&p.push(e.lat+(d[1]+"°"));(l||-1!==h.indexOf("text"))&&q.fillText(k,b,p);b=p.join("\x3cbr\x3e")}f.extraText=b;return[f]}}},{"../../lib":750,"../../plots/cartesian/axes":799,"../scattermapbox/hover":1228}],1012:[function(a,G,C){G.exports={attributes:a("./attributes"),supplyDefaults:a("./defaults"),colorbar:a("../heatmap/colorbar"),formatLabels:a("../scattermapbox/format_labels"),calc:a("./calc"),plot:a("./plot"),
hoverPoints:a("./hover"),eventData:a("./event_data"),getBelow:function(q,n){q=n.getMapLayers();for(n=0;n<q.length;n++){var m=q[n],f=m.id;if("symbol"===m.type&&"string"===typeof f&&-1===f.indexOf("plotly-"))return f}},moduleType:"trace",name:"densitymapbox",basePlotModule:a("../../plots/mapbox"),categories:["mapbox","gl","showLegend"],meta:{hr_name:"density_mapbox"}}},{"../../plots/mapbox":856,"../heatmap/colorbar":1039,"../scattermapbox/format_labels":1227,"./attributes":1006,"./calc":1007,"./defaults":1009,
"./event_data":1010,"./hover":1011,"./plot":1013}],1013:[function(a,G,C){function q(f,b){this.type="densitymapbox";this.subplot=f;this.uid=b;this.sourceId="source-"+b;this.layerList=[["heatmap",m+b+"-heatmap"]];this.below=null}var n=a("./convert"),m=a("../../plots/mapbox/constants").traceLayerPrefix;a=q.prototype;a.update=function(f){var b=this.subplot,k=this.layerList;f=n(f);var e=b.belowLookup["trace-"+this.uid];b.map.getSource(this.sourceId).setData(f.geojson);e!==this.below&&(this._removeLayers(),
this._addLayers(f,e),this.below=e);for(e=0;e<k.length;e++){var h=k[e],l=h[1];h=f[h[0]];b.setOptions(l,"setLayoutProperty",h.layout);"visible"===h.layout.visibility&&b.setOptions(l,"setPaintProperty",h.paint)}};a._addLayers=function(f,b){for(var k=this.subplot,e=this.layerList,h=this.sourceId,l=0;l<e.length;l++){var c=e[l],g=c[0],d=f[g];k.addLayer({type:g,id:c[1],source:h,layout:d.layout,paint:d.paint},b)}};a._removeLayers=function(){for(var f=this.subplot.map,b=this.layerList,k=b.length-1;0<=k;k--)f.removeLayer(b[k][1])};
a.dispose=function(){var f=this.subplot.map;this._removeLayers();f.removeSource(this.sourceId)};G.exports=function(f,b){var k=b[0].trace,e=new q(f,k.uid),h=e.sourceId;b=n(b);k=e.below=f.belowLookup["trace-"+k.uid];f.map.addSource(h,{type:"geojson",data:b.geojson});e._addLayers(b,k);return e}},{"../../plots/mapbox/constants":854,"./convert":1008}],1014:[function(a,G,C){var q=a("../../lib");G.exports=function(n,m){for(var f=0;f<n.length;f++)n[f].i=f;q.mergeArray(m.text,n,"tx");q.mergeArray(m.hovertext,
n,"htx");if(m=m.marker)if(q.mergeArray(m.opacity,n,"mo"),q.mergeArray(m.color,n,"mc"),m=m.line)q.mergeArray(m.color,n,"mlc"),q.mergeArrayCastPositive(m.width,n,"mlw")}},{"../../lib":750}],1015:[function(a,G,C){C=a("../bar/attributes");var q=a("../scatter/attributes").line,n=a("../../plots/attributes"),m=a("../../plots/template_attributes").hovertemplateAttrs,f=a("../../plots/template_attributes").texttemplateAttrs,b=a("./constants"),k=a("../../lib/extend").extendFlat;a=a("../../components/color");
G.exports={x:C.x,x0:C.x0,dx:C.dx,y:C.y,y0:C.y0,dy:C.dy,xperiod:C.xperiod,yperiod:C.yperiod,xperiod0:C.xperiod0,yperiod0:C.yperiod0,xperiodalignment:C.xperiodalignment,yperiodalignment:C.yperiodalignment,hovertext:C.hovertext,hovertemplate:m({},{keys:b.eventDataKeys}),hoverinfo:k({},n.hoverinfo,{flags:"name;x;y;text;percent initial;percent previous;percent total".split(";")}),textinfo:{valType:"flaglist",flags:"label;text;percent initial;percent previous;percent total;value".split(";"),extras:["none"],
editType:"plot",arrayOk:!1},texttemplate:f({editType:"plot"},{keys:b.eventDataKeys.concat(["label","value"])}),text:C.text,textposition:k({},C.textposition,{dflt:"auto"}),insidetextanchor:k({},C.insidetextanchor,{dflt:"middle"}),textangle:k({},C.textangle,{dflt:0}),textfont:C.textfont,insidetextfont:C.insidetextfont,outsidetextfont:C.outsidetextfont,constraintext:C.constraintext,cliponaxis:C.cliponaxis,orientation:k({},C.orientation,{}),offset:k({},C.offset,{arrayOk:!1}),width:k({},C.width,{arrayOk:!1}),
marker:C.marker,connector:{fillcolor:{valType:"color",editType:"style"},line:{color:k({},q.color,{dflt:a.defaultLine}),width:k({},q.width,{dflt:0,editType:"plot"}),dash:q.dash,editType:"style"},visible:{valType:"boolean",dflt:!0,editType:"plot"},editType:"plot"},offsetgroup:C.offsetgroup,alignmentgroup:C.alignmentgroup}},{"../../components/color":615,"../../lib/extend":740,"../../plots/attributes":795,"../../plots/template_attributes":877,"../bar/attributes":892,"../scatter/attributes":1158,"./constants":1017}],
1016:[function(a,G,C){function q(e){return e===k?0:e}var n=a("../../plots/cartesian/axes"),m=a("../../plots/cartesian/align_period"),f=a("./arrays_to_calcdata"),b=a("../scatter/calc_selection"),k=a("../../constants/numerical").BADNUM;G.exports=function(e,h){var l=n.getFromId(e,h.xaxis||"x"),c=n.getFromId(e,h.yaxis||"y");if("h"===h.orientation){e=l.makeCalcdata(h,"x");var g=c.makeCalcdata(h,"y");l=m(h,c,"y",g);var d=!!h.yperiodalignment}else e=c.makeCalcdata(h,"y"),g=l.makeCalcdata(h,"x"),l=m(h,l,
"x",g),d=!!h.xperiodalignment;var p=Math.min(l.length,e.length),r=Array(p);h._base=[];for(c=0;c<p;c++){0>e[c]&&(e[c]=k);var t=!1;e[c]!==k&&c+1<p&&e[c+1]!==k&&(t=!0);t=r[c]={p:l[c],s:e[c],cNext:t};h._base[c]=-.5*t.s;d&&(r[c].orig_p=g[c]);h.ids&&(t.id=String(h.ids[c]));0===c&&(r[0].vTotal=0);r[0].vTotal+=q(t.s);t.begR=q(t.s)/q(r[0].s)}for(c=0;c<p;c++)if(t=r[c],t.s!==k){t.sumR=t.s/r[0].vTotal;t.difR=void 0!==w?t.s/w:1;var w=t.s}f(r,h);b(r,h);return r}},{"../../constants/numerical":725,"../../plots/cartesian/align_period":796,
"../../plots/cartesian/axes":799,"../scatter/calc_selection":1160,"./arrays_to_calcdata":1014}],1017:[function(a,G,C){G.exports={eventDataKeys:["percentInitial","percentPrevious","percentTotal"]}},{}],1018:[function(a,G,C){var q=a("../bar/cross_trace_calc").setGroupPositions;G.exports=function(n,m){var f=n._fullLayout,b=n._fullData,k=n.calcdata,e=m.xaxis,h=m.yaxis;m=[];var l=[],c=[],g;for(g=0;g<b.length;g++){var d=b[g];var p="h"===d.orientation;!0===d.visible&&d.xaxis===e._id&&d.yaxis===h._id&&"funnel"===
d.type&&(d=k[g],p?c.push(d):l.push(d),m.push(d))}f={mode:f.funnelmode,norm:f.funnelnorm,gap:f.funnelgap,groupgap:f.funnelgroupgap};q(n,e,h,l,f);q(n,h,e,c,f);for(g=0;g<m.length;g++)for(d=m[g],n=0;n<d.length;n++)n+1<d.length&&(d[n].nextP0=d[n+1].p0,d[n].nextS0=d[n+1].s0,d[n].nextP1=d[n+1].p1,d[n].nextS1=d[n+1].s1)}},{"../bar/cross_trace_calc":895}],1019:[function(a,G,C){function q(l){l=n.isArrayOrTypedArray(l)?"#000":l;return h.addOpacity(l,.5*h.opacity(l))}var n=a("../../lib"),m=a("../bar/defaults").handleGroupingDefaults,
f=a("../bar/defaults").handleText,b=a("../scatter/xy_defaults"),k=a("../scatter/period_defaults"),e=a("./attributes"),h=a("../../components/color");G.exports={supplyDefaults:function(l,c,g,d){function p(w,x){return n.coerce(l,c,e,w,x)}if(b(l,c,d,p)){k(l,c,d,p);p("orientation",c.y&&!c.x?"v":"h");p("offset");p("width");var r=p("text");p("hovertext");p("hovertemplate");var t=p("textposition");f(l,c,d,p,t,{moduleHasSelected:!1,moduleHasUnselected:!1,moduleHasConstrain:!0,moduleHasCliponaxis:!0,moduleHasTextangle:!0,
moduleHasInsideanchor:!0});"none"===c.textposition||c.texttemplate||p("textinfo",Array.isArray(r)?"text+value":"value");g=p("marker.color",g);p("marker.line.color",h.defaultLine);p("marker.line.width");p("connector.visible")&&(p("connector.fillcolor",q(g)),p("connector.line.width")&&(p("connector.line.color"),p("connector.line.dash")))}else c.visible=!1},crossTraceDefaults:function(l,c){function g(t){return n.coerce(p._input,p,e,t)}if("group"===c.funnelmode)for(var d=0;d<l.length;d++){var p=l[d];
var r=p._input;m(r,p,c,g)}}}},{"../../components/color":615,"../../lib":750,"../bar/defaults":896,"../scatter/period_defaults":1178,"../scatter/xy_defaults":1185,"./attributes":1015}],1020:[function(a,G,C){G.exports=function(q,n){q.x="xVal"in n?n.xVal:n.x;q.y="yVal"in n?n.yVal:n.y;"percentInitial"in n&&(q.percentInitial=n.percentInitial);"percentPrevious"in n&&(q.percentPrevious=n.percentPrevious);"percentTotal"in n&&(q.percentTotal=n.percentTotal);n.xa&&(q.xaxis=n.xa);n.ya&&(q.yaxis=n.ya);return q}},
{}],1021:[function(a,G,C){var q=a("../../components/color").opacity,n=a("../bar/hover").hoverOnBars,m=a("../../lib").formatPercent;G.exports=function(f,b,k,e){if(f=n(f,b,k,e)){b=f.cd;k=b[0].trace;b=b[f.index];f[("h"===k.orientation?"x":"y")+"LabelVal"]=b.s;f.percentInitial=b.begR;f.percentInitialLabel=m(b.begR,1);f.percentPrevious=b.difR;f.percentPreviousLabel=m(b.difR,1);f.percentTotal=b.sumR;f.percentTotalLabel=m(b.sumR,1);var h=b.hi||k.hoverinfo;e=[];if(h&&"none"!==h&&"skip"!==h){var l="all"===
h;h=h.split("+");(l||-1!==h.indexOf("percent initial"))&&e.push(f.percentInitialLabel+" of initial");(l||-1!==h.indexOf("percent previous"))&&e.push(f.percentPreviousLabel+" of previous");(l||-1!==h.indexOf("percent total"))&&e.push(f.percentTotalLabel+" of total")}f.extraText=e.join("\x3cbr\x3e");l=k.marker;k=b.mc||l.color;e=b.mlc||l.line.color;b=b.mlw||l.line.width;b=q(k)?k:q(e)&&b?e:void 0;f.color=b;return[f]}}},{"../../components/color":615,"../../lib":750,"../bar/hover":899}],1022:[function(a,
G,C){G.exports={attributes:a("./attributes"),layoutAttributes:a("./layout_attributes"),supplyDefaults:a("./defaults").supplyDefaults,crossTraceDefaults:a("./defaults").crossTraceDefaults,supplyLayoutDefaults:a("./layout_defaults"),calc:a("./calc"),crossTraceCalc:a("./cross_trace_calc"),plot:a("./plot"),style:a("./style").style,hoverPoints:a("./hover"),eventData:a("./event_data"),selectPoints:a("../bar/select"),moduleType:"trace",name:"funnel",basePlotModule:a("../../plots/cartesian"),categories:"bar-like cartesian svg oriented showLegend zoomScale".split(" "),
meta:{}}},{"../../plots/cartesian":812,"../bar/select":904,"./attributes":1015,"./calc":1016,"./cross_trace_calc":1018,"./defaults":1019,"./event_data":1020,"./hover":1021,"./layout_attributes":1023,"./layout_defaults":1024,"./plot":1025,"./style":1026}],1023:[function(a,G,C){G.exports={funnelmode:{valType:"enumerated",values:["stack","group","overlay"],dflt:"stack",editType:"calc"},funnelgap:{valType:"number",min:0,max:1,editType:"calc"},funnelgroupgap:{valType:"number",min:0,max:1,dflt:0,editType:"calc"}}},
{}],1024:[function(a,G,C){var q=a("../../lib"),n=a("./layout_attributes");G.exports=function(m,f,b){for(var k=!1,e=0;e<b.length;e++){var h=b[e];if(h.visible&&"funnel"===h.type){k=!0;break}}k&&(q.coerce(m,f,n,"funnelmode",void 0),q.coerce(m,f,n,"funnelgap",.2),q.coerce(m,f,n,"funnelgroupgap",void 0))}},{"../../lib":750,"./layout_attributes":1023}],1025:[function(a,G,C){function q(c,g,d,p){var r=g.xaxis,t=g.yaxis;b.makeTraceGroups(p,d,"trace bars").each(function(w){var x=f.select(this);w=w[0].trace;
x=b.ensureSingle(x,"g","regions");if(w.connector&&w.connector.visible){var y="h"===w.orientation;x=x.selectAll("g.region").data(b.identity);x.enter().append("g").classed("region",!0);x.exit().remove();var A=x.size();x.each(function(z,F){if(F===A-1||z.cNext){F=m(z,r,t,y);z=F[0];F=F[1];var D="";z[0]!==e&&F[0]!==e&&z[1]!==e&&F[1]!==e&&z[2]!==e&&F[2]!==e&&z[3]!==e&&F[3]!==e&&(D=y?D+("M"+z[0]+","+F[1]+"L"+z[2]+","+F[2]+"H"+z[3]+"L"+z[1]+","+F[1]+"Z"):D+("M"+z[1]+","+F[1]+"L"+z[2]+","+F[3]+"V"+F[2]+"L"+
z[1]+","+F[0]+"Z"));""===D&&(D="M0,0Z");b.ensureSingle(f.select(this),"path").attr("d",D).call(k.setClipUrl,g.layerClipId,c)}})}else x.remove()})}function n(c,g,d,p){var r=g.xaxis,t=g.yaxis;b.makeTraceGroups(p,d,"trace bars").each(function(w){var x=f.select(this);w=w[0].trace;x=b.ensureSingle(x,"g","lines");if(w.connector&&w.connector.visible&&w.connector.line.width){var y="h"===w.orientation;x=x.selectAll("g.line").data(b.identity);x.enter().append("g").classed("line",!0);x.exit().remove();var A=
x.size();x.each(function(z,F){if(F===A-1||z.cNext){F=m(z,r,t,y);z=F[0];F=F[1];var D="";void 0!==z[3]&&void 0!==F[3]&&(y?(D+="M"+z[0]+","+F[1]+"L"+z[2]+","+F[2],D+="M"+z[1]+","+F[1]+"L"+z[3]+","+F[2]):(D+="M"+z[1]+","+F[1]+"L"+z[2]+","+F[3],D+="M"+z[1]+","+F[0]+"L"+z[2]+","+F[2]));""===D&&(D="M0,0Z");b.ensureSingle(f.select(this),"path").attr("d",D).call(k.setClipUrl,g.layerClipId,c)}})}else x.remove()})}function m(c,g,d,p){var r=[],t=[],w=p?g:d;g=p?d:g;r[0]=w.c2p(c.s0,!0);t[0]=g.c2p(c.p0,!0);r[1]=
w.c2p(c.s1,!0);t[1]=g.c2p(c.p1,!0);r[2]=w.c2p(c.nextS0,!0);t[2]=g.c2p(c.nextP0,!0);r[3]=w.c2p(c.nextS1,!0);t[3]=g.c2p(c.nextP1,!0);return p?[r,t]:[t,r]}var f=a("d3"),b=a("../../lib"),k=a("../../components/drawing"),e=a("../../constants/numerical").BADNUM,h=a("../bar/plot"),l=a("../bar/uniform_text").clearMinTextSize;G.exports=function(c,g,d,p){var r=c._fullLayout;l("funnel",r);q(c,g,d,p);n(c,g,d,p);h.plot(c,g,d,p,{mode:r.funnelmode,norm:r.funnelmode,gap:r.funnelgap,groupgap:r.funnelgroupgap})}},{"../../components/drawing":637,
"../../constants/numerical":725,"../../lib":750,"../bar/plot":903,"../bar/uniform_text":908,d3:169}],1026:[function(a,G,C){var q=a("d3"),n=a("../../components/drawing"),m=a("../../components/color"),f=a("../../constants/interactions").DESELECTDIM;C=a("../bar/style");var b=a("../bar/uniform_text").resizeText,k=C.styleTextPoints;G.exports={style:function(e,h,l){h=l?l:q.select(e).selectAll("g.funnellayer").selectAll("g.trace");b(e,h,"funnel");h.style("opacity",function(c){return c[0].trace.opacity});
h.each(function(c){var g=q.select(this),d=c[0].trace;g.selectAll(".point \x3e path").each(function(p){if(!p.isBlank){var r=d.marker;q.select(this).call(m.fill,p.mc||r.color).call(m.stroke,p.mlc||r.line.color).call(n.dashLine,r.line.dash,p.mlw||r.line.width).style("opacity",d.selectedpoints&&!p.selected?f:1)}});k(g,d,e);g.selectAll(".regions").each(function(){q.select(this).selectAll("path").style("stroke-width",0).call(m.fill,d.connector.fillcolor)});g.selectAll(".lines").each(function(){var p=d.connector.line;
n.lineGroupStyle(q.select(this).selectAll("path"),p.width,p.color,p.dash)})})}}},{"../../components/color":615,"../../components/drawing":637,"../../constants/interactions":724,"../bar/style":906,"../bar/uniform_text":908,d3:169}],1027:[function(a,G,C){C=a("../pie/attributes");var q=a("../../plots/attributes"),n=a("../../plots/domain").attributes,m=a("../../plots/template_attributes").hovertemplateAttrs,f=a("../../plots/template_attributes").texttemplateAttrs;a=a("../../lib/extend").extendFlat;G.exports=
{labels:C.labels,label0:C.label0,dlabel:C.dlabel,values:C.values,marker:{colors:C.marker.colors,line:{color:a({},C.marker.line.color,{dflt:null}),width:a({},C.marker.line.width,{dflt:1}),editType:"calc"},editType:"calc"},text:C.text,hovertext:C.hovertext,scalegroup:a({},C.scalegroup,{}),textinfo:a({},C.textinfo,{flags:["label","text","value","percent"]}),texttemplate:f({editType:"plot"},{keys:["label","color","value","text","percent"]}),hoverinfo:a({},q.hoverinfo,{flags:["label","text","value","percent",
"name"]}),hovertemplate:m({},{keys:["label","color","value","text","percent"]}),textposition:a({},C.textposition,{values:["inside","none"],dflt:"inside"}),textfont:C.textfont,insidetextfont:C.insidetextfont,title:{text:C.title.text,font:C.title.font,position:a({},C.title.position,{values:["top left","top center","top right"],dflt:"top center"}),editType:"plot"},domain:n({name:"funnelarea",trace:!0,editType:"calc"}),aspectratio:{valType:"number",min:0,dflt:1,editType:"plot"},baseratio:{valType:"number",
min:0,max:1,dflt:.333,editType:"plot"}}},{"../../lib/extend":740,"../../plots/attributes":795,"../../plots/domain":826,"../../plots/template_attributes":877,"../pie/attributes":1132}],1028:[function(a,G,C){var q=a("../../plots/plots");C.name="funnelarea";C.plot=function(n,m,f,b){q.plotBasePlot(C.name,n,m,f,b)};C.clean=function(n,m,f,b){q.cleanBasePlot(C.name,n,m,f,b)}},{"../../plots/plots":862}],1029:[function(a,G,C){var q=a("../pie/calc");G.exports={calc:function(n,m){return q.calc(n,m)},crossTraceCalc:function(n){q.crossTraceCalc(n,
{type:"funnelarea"})}}},{"../pie/calc":1134}],1030:[function(a,G,C){var q=a("../../lib"),n=a("./attributes"),m=a("../../plots/domain").defaults,f=a("../bar/defaults").handleText,b=a("../pie/defaults").handleLabelsAndValues;G.exports=function(k,e,h,l){function c(p,r){return q.coerce(k,e,n,p,r)}h=c("labels");var g=c("values");h=b(h,g);g=h.len;e._hasLabels=h.hasLabels;e._hasValues=h.hasValues;!e._hasLabels&&e._hasValues&&(c("label0"),c("dlabel"));if(g){e._length=g;c("marker.line.width")&&c("marker.line.color",
l.paper_bgcolor);c("marker.colors");c("scalegroup");h=c("text");g=c("texttemplate");var d;g||(d=c("textinfo",Array.isArray(h)?"text+percent":"percent"));c("hovertext");c("hovertemplate");if(g||d&&"none"!==d)d=c("textposition"),f(k,e,l,c,d,{moduleHasSelected:!1,moduleHasUnselected:!1,moduleHasConstrain:!1,moduleHasCliponaxis:!1,moduleHasTextangle:!1,moduleHasInsideanchor:!1});m(e,l,c);c("title.text")&&(c("title.position"),q.coerceFont(c,"title.font",l.font));c("aspectratio");c("baseratio")}else e.visible=
!1}},{"../../lib":750,"../../plots/domain":826,"../bar/defaults":896,"../pie/defaults":1135,"./attributes":1027}],1031:[function(a,G,C){G.exports={moduleType:"trace",name:"funnelarea",basePlotModule:a("./base_plot"),categories:["pie-like","funnelarea","showLegend"],attributes:a("./attributes"),layoutAttributes:a("./layout_attributes"),supplyDefaults:a("./defaults"),supplyLayoutDefaults:a("./layout_defaults"),calc:a("./calc").calc,crossTraceCalc:a("./calc").crossTraceCalc,plot:a("./plot"),style:a("./style"),
styleOne:a("../pie/style_one"),meta:{}}},{"../pie/style_one":1143,"./attributes":1027,"./base_plot":1028,"./calc":1029,"./defaults":1030,"./layout_attributes":1032,"./layout_defaults":1033,"./plot":1034,"./style":1035}],1032:[function(a,G,C){a=a("../pie/layout_attributes").hiddenlabels;G.exports={hiddenlabels:a,funnelareacolorway:{valType:"colorlist",editType:"calc"},extendfunnelareacolors:{valType:"boolean",dflt:!0,editType:"calc"}}},{"../pie/layout_attributes":1139}],1033:[function(a,G,C){var q=
a("../../lib"),n=a("./layout_attributes");G.exports=function(m,f){q.coerce(m,f,n,"hiddenlabels",void 0);q.coerce(m,f,n,"funnelareacolorway",f.colorway);q.coerce(m,f,n,"extendfunnelareacolors",void 0)}},{"../../lib":750,"./layout_attributes":1032}],1034:[function(a,G,C){function q(y,A){return"l"+(A[0]-y[0])+","+(A[1]-y[1])}function n(y,A){return[.5*(y[0]+A[0]),.5*(y[1]+A[1])]}function m(y){function A(){var E=Math.sqrt(B);return[E,-E]}if(y.length){var z=y[0],F=z.trace,D=F.aspectratio;F=F.baseratio;
.999<F&&(F=.999);F=Math.pow(F,2);var u=z.vTotal,B=u*F/(1-F)/u;F=[];F.push(A());var I;for(I=y.length-1;-1<I;I--){var J=y[I];J.hidden||(B+=J.v/u,F.push(A()))}u=Infinity;var N=-Infinity;for(I=0;I<F.length;I++)J=F[I],u=Math.min(u,J[1]),N=Math.max(N,J[1]);for(I=0;I<F.length;I++)F[I][1]-=(N+u)/2;I=z.r;u=(N-u)/2;J=I/F[F.length-1][0];D*=I/u;z.r=D*u;for(I=0;I<F.length;I++)F[I][0]*=J,F[I][1]*=D;J=F[0];z=[-J[0],J[1]];D=[J[0],J[1]];u=0;for(I=y.length-1;-1<I;I--)if(J=y[I],!J.hidden){u+=1;N=F[u][0];var M=F[u][1];
J.TL=[-N,M];J.TR=[N,M];J.BL=z;J.BR=D;J.pxmid=n(J.TR,J.BR);z=J.TL;D=J.TR}}}var f=a("d3"),b=a("../../components/drawing"),k=a("../../lib"),e=a("../../lib/svg_text_utils"),h=a("../bar/plot").toMoveInsideBar;C=a("../bar/uniform_text");var l=C.recordMinTextSize,c=C.clearMinTextSize,g=a("../pie/helpers");a=a("../pie/plot");var d=a.attachFxHandlers,p=a.determineInsideTextFont,r=a.layoutAreas,t=a.prerenderTitles,w=a.positionTitleOutside,x=a.formatSliceLabel;G.exports=function(y,A){var z=y._fullLayout;c("funnelarea",
z);t(A,y);r(A,z._size);k.makeTraceGroups(z._funnelarealayer,A,"trace").each(function(F){var D=f.select(this),u=F[0],B=u.trace;m(F);D.each(function(){var I=f.select(this).selectAll("g.slice").data(F);I.enter().append("g").classed("slice",!0);I.exit().remove();I.each(function(J,N){if(J.hidden)f.select(this).selectAll("path,g").remove();else{J.pointNumber=J.i;J.curveNumber=B.index;var M=u.cx,E=u.cy,L=f.select(this),Q=L.selectAll("path.surface").data([J]);Q.enter().append("path").classed("surface",!0).style({"pointer-events":"all"});
L.call(d,y,F);var S="M"+(M+J.TR[0])+","+(E+J.TR[1])+q(J.TR,J.BR)+q(J.BR,J.BL)+q(J.BL,J.TL)+"Z";Q.attr("d",S);x(y,J,u);Q=g.castOption(B.textposition,J.pts);L=L.selectAll("g.slicetext").data(J.text&&"none"!==Q?[0]:[]);L.enter().append("g").classed("slicetext",!0);L.exit().remove();L.each(function(){var R=k.ensureSingle(f.select(this),"text","",function(V){V.attr("data-notex",1)}),O=k.ensureUniformFontSize(y,p(B,J,z.font));R.text(J.text).attr({"class":"slicetext",transform:"","text-anchor":"middle"}).call(b.font,
O).call(e.convertToTspans,y);var T=b.bBox(R.node());T=h(Math.max(J.TL[0],J.BL[0])+M,Math.min(J.TR[0],J.BR[0])+M,Math.min(J.BL[1],J.BR[1])+E,Math.max(J.TL[1],J.TR[1])+E,T,{isHorizontal:!0,constrained:!0,angle:0,anchor:"middle"});T.fontSize=O.size;l(B.type,T,z);F[N].transform=T;R.attr("transform",k.getTextTransform(T))})}});I=f.select(this).selectAll("g.titletext").data(B.title.text?[0]:[]);I.enter().append("g").classed("titletext",!0);I.exit().remove();I.each(function(){var J=k.ensureSingle(f.select(this),
"text","",function(M){M.attr("data-notex",1)}),N=B.title.text;B._meta&&(N=k.templateString(N,B._meta));J.text(N).attr({"class":"titletext",transform:"","text-anchor":"middle"}).call(b.font,B.title.font).call(e.convertToTspans,y);N=w(u,z._size);J.attr("transform","translate("+N.x+","+N.y+")"+(1>N.scale?"scale("+N.scale+")":"")+"translate("+N.tx+","+N.ty+")")})})})}},{"../../components/drawing":637,"../../lib":750,"../../lib/svg_text_utils":774,"../bar/plot":903,"../bar/uniform_text":908,"../pie/helpers":1137,
"../pie/plot":1141,d3:169}],1035:[function(a,G,C){var q=a("d3"),n=a("../pie/style_one"),m=a("../bar/uniform_text").resizeText;G.exports=function(f){var b=f._fullLayout._funnelarealayer.selectAll(".trace");m(f,b,"funnelarea");b.each(function(k){var e=k[0].trace;k=q.select(this);k.style({opacity:e.opacity});k.selectAll("path.surface").each(function(h){q.select(this).call(n,h,e)})})}},{"../bar/uniform_text":908,"../pie/style_one":1143,d3:169}],1036:[function(a,G,C){C=a("../scatter/attributes");var q=
a("../../plots/attributes"),n=a("../../plots/template_attributes").hovertemplateAttrs,m=a("../../components/colorscale/attributes");a("../../constants/docs");a=a("../../lib/extend").extendFlat;G.exports=a({z:{valType:"data_array",editType:"calc"},x:a({},C.x,{impliedEdits:{xtype:"array"}}),x0:a({},C.x0,{impliedEdits:{xtype:"scaled"}}),dx:a({},C.dx,{impliedEdits:{xtype:"scaled"}}),y:a({},C.y,{impliedEdits:{ytype:"array"}}),y0:a({},C.y0,{impliedEdits:{ytype:"scaled"}}),dy:a({},C.dy,{impliedEdits:{ytype:"scaled"}}),
xperiod:a({},C.xperiod,{impliedEdits:{xtype:"scaled"}}),yperiod:a({},C.yperiod,{impliedEdits:{ytype:"scaled"}}),xperiod0:a({},C.xperiod0,{impliedEdits:{xtype:"scaled"}}),yperiod0:a({},C.yperiod0,{impliedEdits:{ytype:"scaled"}}),xperiodalignment:a({},C.xperiodalignment,{impliedEdits:{xtype:"scaled"}}),yperiodalignment:a({},C.yperiodalignment,{impliedEdits:{ytype:"scaled"}}),text:{valType:"data_array",editType:"calc"},hovertext:{valType:"data_array",editType:"calc"},transpose:{valType:"boolean",dflt:!1,
editType:"calc"},xtype:{valType:"enumerated",values:["array","scaled"],editType:"calc+clearAxisTypes"},ytype:{valType:"enumerated",values:["array","scaled"],editType:"calc+clearAxisTypes"},zsmooth:{valType:"enumerated",values:["fast","best",!1],dflt:!1,editType:"calc"},hoverongaps:{valType:"boolean",dflt:!0,editType:"none"},connectgaps:{valType:"boolean",editType:"calc"},xgap:{valType:"number",dflt:0,min:0,editType:"plot"},ygap:{valType:"number",dflt:0,min:0,editType:"plot"},zhoverformat:{valType:"string",
dflt:"",editType:"none"},hovertemplate:n(),showlegend:a({},q.showlegend,{dflt:!1})},{transforms:void 0},m("",{cLetter:"z",autoColorDflt:!1}))},{"../../components/colorscale/attributes":622,"../../constants/docs":720,"../../lib/extend":740,"../../plots/attributes":795,"../../plots/template_attributes":877,"../scatter/attributes":1158}],1037:[function(a,G,C){function q(t){for(var w=[],x=t.length,y=0;y<x;y++){var A=t[y];A!==r&&w.push(A)}return w}function n(t,w,x){for(var y=[],A=-1,z=0;z<x.length;z++)if(w[z]!==
r){A++;y[A]=[];for(var F=0;F<x[z].length;F++)t[F]!==r&&y[A].push(x[z][F])}return y}var m=a("../../registry"),f=a("../../lib"),b=a("../../plots/cartesian/axes"),k=a("../../plots/cartesian/align_period"),e=a("../histogram2d/calc"),h=a("../../components/colorscale/calc"),l=a("./convert_column_xyz"),c=a("./clean_2d_array"),g=a("./interp2d"),d=a("./find_empties"),p=a("./make_bound_array"),r=a("../../constants/numerical").BADNUM;G.exports=function(t,w){function x(X){u=w._input.zsmooth=w.zsmooth=!1;f.warn('cannot use zsmooth: "fast": '+
X)}var y=b.getFromId(t,w.xaxis||"x"),A=b.getFromId(t,w.yaxis||"y"),z=m.traceIs(w,"contour"),F=m.traceIs(w,"histogram"),D=m.traceIs(w,"gl2d"),u=z?"best":w.zsmooth,B;y._minDtick=0;A._minDtick=0;if(F){var I=e(t,w);var J=I.orig_x;var N=I.x;var M=I.x0;var E=I.dx;var L=I.orig_y;var Q=I.y;var S=I.y0;var R=I.dy;var O=I.z}else O=w.z,f.isArray1D(O)?(l(w,y,A,"x","y",["z"]),N=w._x,Q=w._y,O=w._z):(J=w.x?y.makeCalcdata(w,"x"):[],L=w.y?A.makeCalcdata(w,"y"):[],N=k(w,y,"x",J),Q=k(w,A,"y",L),w._x=N,w._y=Q),M=w.x0,
E=w.dx,S=w.y0,R=w.dy,O=c(O,w,y,A);if(y.rangebreaks||A.rangebreaks)O=n(N,Q,O),F||(N=q(N),Q=q(Q),w._x=N,w._y=Q);F||!z&&!w.connectgaps||(w._emptypoints=d(O),g(O,w._emptypoints));if("fast"===u)if("log"===y.type||"log"===A.type)x("log axis found");else if(!F){if(N.length){var T=(N[N.length-1]-N[0])/(N.length-1),V=Math.abs(T/100);for(B=0;B<N.length-1;B++)if(Math.abs(N[B+1]-N[B]-T)>V){x("x scale is not linear");break}}if(Q.length&&"fast"===u)for(T=(Q[Q.length-1]-Q[0])/(Q.length-1),V=Math.abs(T/100),B=0;B<
Q.length-1;B++)if(Math.abs(Q[B+1]-Q[B]-T)>V){x("y scale is not linear");break}}B=f.maxRowLength(O);N="scaled"===w.xtype?"":N;T=p(w,N,M,E,B,y);Q="scaled"===w.ytype?"":Q;V=p(w,Q,S,R,O.length,A);D||(w._extremes[y._id]=b.findExtremes(y,T),w._extremes[A._id]=b.findExtremes(A,V));D={x:T,y:V,z:O,text:w._text||w.text,hovertext:w._hovertext||w.hovertext};w.xperiodalignment&&J&&(D.orig_x=J);w.yperiodalignment&&L&&(D.orig_y=L);N&&N.length===T.length-1&&(D.xCenter=N);Q&&Q.length===V.length-1&&(D.yCenter=Q);F&&
(D.xRanges=I.xRanges,D.yRanges=I.yRanges,D.pts=I.pts);z||h(t,w,{vals:O,cLetter:"z"});z&&w.contours&&"heatmap"===w.contours.coloring&&(t={type:"contour"===w.type?"heatmap":"histogram2d",xcalendar:w.xcalendar,ycalendar:w.ycalendar},D.xfill=p(t,N,M,E,B,y),D.yfill=p(t,Q,S,R,O.length,A));return[D]}},{"../../components/colorscale/calc":623,"../../constants/numerical":725,"../../lib":750,"../../plots/cartesian/align_period":796,"../../plots/cartesian/axes":799,"../../registry":882,"../histogram2d/calc":1069,
"./clean_2d_array":1038,"./convert_column_xyz":1040,"./find_empties":1042,"./interp2d":1045,"./make_bound_array":1046}],1038:[function(a,G,C){var q=a("fast-isnumeric"),n=a("../../lib"),m=a("../../constants/numerical").BADNUM;G.exports=function(f,b,k,e){function h(A){if(q(A))return+A}function l(A){if(b&&"carpet"!==b.type&&"contourcarpet"!==b.type&&A&&"category"===A.type&&b["_"+A._id.charAt(0)].length){var z=A._id.charAt(0),F={};z=b["_"+z+"CategoryMap"]||b[z];for(g=0;g<z.length;g++)F[z[g]]=g;return function(D){D=
F[A._categories[D]];return D+1?D:m}}return n.identity}var c,g,d;if(b&&b.transpose){for(g=c=0;g<f.length;g++)c=Math.max(c,f[g].length);if(0===c)return!1;var p=function(A){return A.length};var r=function(A,z,F){return(A[F]||[])[z]}}else c=f.length,p=function(A,z){return A[z].length},r=function(A,z,F){return(A[z]||[])[F]};var t=function(A,z,F){return z===m||F===m?m:r(A,z,F)},w=l(k),x=l(e);e&&"category"===e.type&&(c=e._categories.length);var y=Array(c);for(g=0;g<c;g++)for(e=k&&"category"===k.type?k._categories.length:
p(f,g),y[g]=Array(e),d=0;d<e;d++)y[g][d]=h(t(f,x(g),w(d)));return y}},{"../../constants/numerical":725,"../../lib":750,"fast-isnumeric":241}],1039:[function(a,G,C){G.exports={min:"zmin",max:"zmax"}},{}],1040:[function(a,G,C){var q=a("../../lib"),n=a("../../constants/numerical").BADNUM,m=a("../../plots/cartesian/align_period");G.exports=function(f,b,k,e,h,l){var c=f._length,g=b.makeCalcdata(f,e),d=k.makeCalcdata(f,h);g=m(f,b,e,g);d=m(f,k,h,d);var p=f.text,r=void 0!==p&&q.isArray1D(p),t=f.hovertext,
w=void 0!==t&&q.isArray1D(t),x,y=q.distinctVals(g),A=y.vals,z=q.distinctVals(d),F=z.vals,D=[],u,B;var I=F.length;var J=A.length;for(x=0;x<l.length;x++)D[x]=q.init2dArray(I,J);r&&(u=q.init2dArray(I,J));w&&(B=q.init2dArray(I,J));J=q.init2dArray(I,J);for(x=0;x<c;x++)if(g[x]!==n&&d[x]!==n){var N=q.findBin(g[x]+y.minDiff/2,A),M=q.findBin(d[x]+z.minDiff/2,F);for(I=0;I<l.length;I++)D[I][M][N]=f[l[I]][x],J[M][N]=x;r&&(u[M][N]=p[x]);w&&(B[M][N]=t[x])}f["_"+e]=A;f["_"+h]=F;for(I=0;I<l.length;I++)f["_"+l[I]]=
D[I];r&&(f._text=u);w&&(f._hovertext=B);b&&"category"===b.type&&(f["_"+e+"CategoryMap"]=A.map(function(E){return b._categories[E]}));k&&"category"===k.type&&(f["_"+h+"CategoryMap"]=F.map(function(E){return k._categories[E]}));f._after2before=J}},{"../../constants/numerical":725,"../../lib":750,"../../plots/cartesian/align_period":796}],1041:[function(a,G,C){var q=a("../../lib"),n=a("./xyz_defaults"),m=a("../scatter/period_defaults"),f=a("./style_defaults"),b=a("../../components/colorscale/defaults"),
k=a("./attributes");G.exports=function(e,h,l,c){function g(d,p){return q.coerce(e,h,k,d,p)}n(e,h,g,c)?(m(e,h,c,g),g("text"),g("hovertext"),g("hovertemplate"),f(e,h,g,c),g("hoverongaps"),g("connectgaps",q.isArray1D(h.z)&&!1!==h.zsmooth),b(e,h,c,g,{prefix:"",cLetter:"z"})):h.visible=!1}},{"../../components/colorscale/defaults":625,"../../lib":750,"../scatter/period_defaults":1178,"./attributes":1036,"./style_defaults":1049,"./xyz_defaults":1050}],1042:[function(a,G,C){var q=a("../../lib").maxRowLength;
G.exports=function(n){var m=[],f={},b=[],k=n[0],e=[],h=[0,0,0],l=q(n),c,g,d;for(c=0;c<n.length;c++){var p=e;e=k;k=n[c+1]||[];for(g=0;g<l;g++)void 0===e[g]&&((d=(void 0!==e[g-1]?1:0)+(void 0!==e[g+1]?1:0)+(void 0!==p[g]?1:0)+(void 0!==k[g]?1:0))?(0===c&&d++,0===g&&d++,c===n.length-1&&d++,g===e.length-1&&d++,4>d&&(f[[c,g]]=[c,g,d]),m.push([c,g,d])):b.push([c,g]))}for(;b.length;){k={};e=!1;for(n=b.length-1;0<=n;n--){var r=b[n];c=r[0];g=r[1];if(d=((f[[c-1,g]]||h)[2]+(f[[c+1,g]]||h)[2]+(f[[c,g-1]]||h)[2]+
(f[[c,g+1]]||h)[2])/20)k[r]=[c,g,d],b.splice(n,1),e=!0}if(!e)throw"findEmpties iterated with no new neighbors";for(r in k)f[r]=k[r],m.push(k[r])}return m.sort(function(t,w){return w[2]-t[2]})}},{"../../lib":750}],1043:[function(a,G,C){var q=a("../../components/fx"),n=a("../../lib"),m=a("../../plots/cartesian/axes"),f=a("../../components/colorscale").extractOpts;G.exports=function(b,k,e,h,l,c){var g=b.cd[0];h=g.trace;l=b.xa;var d=b.ya,p=g.x,r=g.y,t=g.z,w=g.xCenter,x=g.yCenter,y=g.zmask,A=h.zhoverformat,
z=p,F=r;if(!1!==b.index){try{var D=Math.round(b.index[1]);var u=Math.round(b.index[0])}catch(J){n.error("Error hovering on heatmap, pointNumber must be [row,col], found:",b.index);return}if(0>D||D>=t[0].length||0>u||u>t.length)return}else{if(0<q.inbox(k-p[0],k-p[p.length-1],0)||0<q.inbox(e-r[0],e-r[r.length-1],0))return;if(c){z=[2*p[0]-p[1]];for(D=1;D<p.length;D++)z.push((p[D]+p[D-1])/2);z.push([2*p[p.length-1]-p[p.length-2]]);F=[2*r[0]-r[1]];for(D=1;D<r.length;D++)F.push((r[D]+r[D-1])/2);F.push([2*
r[r.length-1]-r[r.length-2]])}D=Math.max(0,Math.min(z.length-2,n.findBin(k,z)));u=Math.max(0,Math.min(F.length-2,n.findBin(e,F)))}k=l.c2p(p[D]);e=l.c2p(p[D+1]);z=d.c2p(r[u]);F=d.c2p(r[u+1]);if(c){c=g.orig_x||p;var B=g.orig_y||r;e=k;c=c[D];F=z;x=B[u]}else c=g.orig_x||w||p,B=g.orig_y||x||r,c=w?c[D]:(c[D]+c[D+1])/2,x=x?B[u]:(B[u]+B[u+1])/2,l&&"category"===l.type&&(c=p[D]),d&&"category"===d.type&&(x=r[u]),h.zsmooth&&(k=e=l.c2p(c),z=F=d.c2p(x));d=t[u][D];y&&!y[u][D]&&(d=void 0);if(void 0!==d||h.hoverongaps){var I;
Array.isArray(g.hovertext)&&Array.isArray(g.hovertext[u])?I=g.hovertext[u][D]:Array.isArray(g.text)&&Array.isArray(g.text[u])&&(I=g.text[u][D]);g=f(h);l=m.tickText({type:"linear",range:[g.min,g.max],hoverformat:A,_separators:l._separators,_numFormat:l._numFormat},d,"hover").text;return[n.extendFlat(b,{index:h._after2before?h._after2before[u][D]:[u,D],distance:b.maxHoverDistance,spikeDistance:b.maxSpikeDistance,x0:k,x1:e,y0:z,y1:F,xLabelVal:c,yLabelVal:x,zLabelVal:d,zLabel:l,text:I})]}}},{"../../components/colorscale":627,
"../../components/fx":655,"../../lib":750,"../../plots/cartesian/axes":799}],1044:[function(a,G,C){G.exports={attributes:a("./attributes"),supplyDefaults:a("./defaults"),calc:a("./calc"),plot:a("./plot"),colorbar:a("./colorbar"),style:a("./style"),hoverPoints:a("./hover"),moduleType:"trace",name:"heatmap",basePlotModule:a("../../plots/cartesian"),categories:["cartesian","svg","2dMap","showLegend"],meta:{}}},{"../../plots/cartesian":812,"./attributes":1036,"./calc":1037,"./colorbar":1039,"./defaults":1041,
"./hover":1043,"./plot":1047,"./style":1048}],1045:[function(a,G,C){function q(f,b,k){var e=0,h,l,c,g,d,p;for(h=0;h<b.length;h++){var r=b[h];var t=r[0];r=r[1];var w=f[t][r];for(l=g=d=0;4>l;l++){var x=m[l];if(c=f[t+x[0]])if(x=c[r+x[1]],void 0!==x){if(0===d)var y=p=x;else y=Math.min(y,x),p=Math.max(p,x);g++;d+=x}}if(0===g)throw"iterateInterp2d order is wrong: no defined neighbors";f[t][r]=d/g;void 0===w?4>g&&(e=1):(f[t][r]=(1+k)*f[t][r]-k*w,p>y&&(e=Math.max(e,Math.abs(f[t][r]-w)/(p-y))))}return e}var n=
a("../../lib"),m=[[-1,0],[1,0],[0,-1],[0,1]];G.exports=function(f,b){var k=1,e;q(f,b);for(e=0;e<b.length&&!(4>b[e][2]);e++);b=b.slice(e);for(e=0;100>e&&.01<k;e++)k=q(f,b,.5-.25*Math.min(1,.5*k));.01<k&&n.log("interp2d didn't converge quickly",k);return f}},{"../../lib":750}],1046:[function(a,G,C){var q=a("../../registry"),n=a("../../lib").isArrayOrTypedArray;G.exports=function(m,f,b,k,e,h){var l=[],c=q.traceIs(m,"contour"),g=q.traceIs(m,"histogram"),d=q.traceIs(m,"gl2d");if(n(f)&&1<f.length&&!g&&
"category"!==h.type)if(k=f.length,k<=e){if(c||d)l=f.slice(0,e);else if(1===e)l=[f[0]-.5,f[0]+.5];else{l=[1.5*f[0]-.5*f[1]];for(c=1;c<k;c++)l.push(.5*(f[c-1]+f[c]));l.push(1.5*f[k-1]-.5*f[k-2])}if(k<e)for(d=l[l.length-1],f=d-l[l.length-2],c=k;c<e;c++)d+=f,l.push(d)}else return c?f.slice(0,e):f.slice(0,e+1);else for(m=m[h._id.charAt(0)+"calendar"],f=g?h.r2c(b,0,m):n(f)&&1===f.length?f[0]:void 0===b?0:("log"===h.type?h.d2c:h.r2c)(b,0,m),k=k||1,c=c||d?0:-.5;c<e;c++)l.push(f+k*c);return l}},{"../../lib":750,
"../../registry":882}],1047:[function(a,G,C){function q(c,g){var d=g.length-2,p=e.constrain(e.findBin(c,g),0,d),r=g[p];c=e.constrain(p+(c-r)/(g[p+1]-r)-.5,0,d);g=Math.round(c);p=Math.abs(c-g);return c&&c!==d&&p?{bin0:g,frac:p,bin1:Math.round(g+p/(c-g))}:{bin0:g,bin1:g,frac:0}}function n(c,g){var d=g.length-1;d=e.constrain(e.findBin(c,g),0,d);var p=g[d];c=(c-p)/(g[d+1]-p)||0;return 0>=c?{bin0:d,bin1:d,frac:0}:.5>c?{bin0:d,bin1:d+1,frac:c}:{bin0:d+1,bin1:d,frac:1-c}}function m(c,g,d){c[g]=d[0];c[g+
1]=d[1];c[g+2]=d[2];c[g+3]=Math.round(255*d[3])}var f=a("d3"),b=a("tinycolor2"),k=a("../../registry"),e=a("../../lib"),h=a("../../components/colorscale").makeColorScaleFuncFromTrace,l=a("../../constants/xmlns_namespaces");G.exports=function(c,g,d,p){var r=g.xaxis,t=g.yaxis;e.makeTraceGroups(p,d,"hm").each(function(w){function x(ua,ya){return void 0!==ua?(ua=ka(ua),ua[0]=Math.round(ua[0]),ua[1]=Math.round(ua[1]),ua[2]=Math.round(ua[2]),ca+=ya,sa+=ua[0]*ya,ma+=ua[1]*ya,ra+=ua[2]*ya,ua):[0,0,0,0]}function y(ua,
ya,ja,za){var Ba=ua[ja.bin0];if(void 0===Ba)return x(void 0,1);ua=ua[ja.bin1];var Ma=ya[ja.bin0];ya=ya[ja.bin1];return x(Ba+ja.frac*(ua-Ba||0)+za.frac*((Ma-Ba||0)+ja.frac*(void 0===ua?void 0===ya?0:void 0===Ma?2*(ya-Ba):2*(2*ya-Ma-Ba)/3:void 0===ya?void 0===Ma?0:2*(2*Ba-ua-Ma)/3:void 0===Ma?2*(2*ya-ua-Ba)/3:ya+Ba-ua-Ma)))}var A=f.select(this),z=w[0],F=z.trace,D=z.z,u=z.x,B=z.y,I=z.xCenter,J=z.yCenter,N=k.traceIs(F,"contour"),M=N?"best":F.zsmooth,E=D.length,L=e.maxRowLength(D),Q=!1,S=!1,R;for(R=0;void 0===
O&&R<u.length-1;){var O=r.c2p(u[R]);R++}for(R=u.length-1;void 0===T&&0<R;){var T=r.c2p(u[R]);R--}T<O&&(R=T,T=O,O=R,Q=!0);for(R=0;void 0===V&&R<B.length-1;){var V=t.c2p(B[R]);R++}for(R=B.length-1;void 0===X&&0<R;){var X=t.c2p(B[R]);R--}X<V&&(R=V,V=X,X=R,S=!0);N&&(I=u,J=B,u=z.xfill,B=z.yfill);"fast"!==M&&(R="best"===M?0:.5,O=Math.max(-R*r._length,O),T=Math.min((1+R)*r._length,T),V=Math.max(-R*t._length,V),X=Math.min((1+R)*t._length,X));var ba=Math.round(T-O),aa=Math.round(X-V);if(0>=ba||0>=aa)A.selectAll("image").data([]).exit().remove();
else{"fast"===M?(X=L,R=E):(X=ba,R=aa);T=document.createElement("canvas");T.width=X;T.height=R;X=T.getContext("2d");var ka=h(F,{noNumericCheck:!0,returnArray:!0});"fast"===M?(z=Q?function(ua){return L-1-ua}:e.identity,N=S?function(ua){return E-1-ua}:e.identity):(z=function(ua){return e.constrain(Math.round(r.c2p(u[ua])-O),0,ba)},N=function(ua){return e.constrain(Math.round(t.c2p(B[ua])-V),0,aa)});R=N(0);var ha=[R,R];Q=Q?0:1;S=S?0:1;var ca=0,sa=0,ma=0,ra=0;if(M){F=0;try{var qa=new Uint8Array(ba*aa*
4)}catch(ua){qa=Array(ba*aa*4)}if("best"===M){M=I||u;Q=J||B;S=Array(M.length);z=Array(Q.length);N=Array(ba);I=I?n:q;ha=J?n:q;for(R=0;R<M.length;R++)S[R]=Math.round(r.c2p(M[R])-O);for(R=0;R<Q.length;R++)z[R]=Math.round(t.c2p(Q[R])-V);for(R=0;R<ba;R++)N[R]=I(R,S);for(J=0;J<aa;J++)for(M=ha(J,z),Q=D[M.bin0],S=D[M.bin1],R=0;R<ba;R++,F+=4)I=y(Q,S,N[R],M),m(qa,F,I)}else for(J=0;J<E;J++)for(M=D[J],ha=N(J),R=0;R<ba;R++)I=x(M[R],1),F=4*(ha*ba+z(R)),m(qa,F,I);D=X.createImageData(ba,aa);try{D.data.set(qa)}catch(ua){for(R=
D.data,I=R.length,J=0;J<I;J++)R[J]=qa[J]}X.putImageData(D,0,0)}else{qa=F.xgap;F=F.ygap;var Y=Math.floor(qa/2),pa=Math.floor(F/2);for(J=0;J<E;J++)if(M=D[J],ha.reverse(),ha[S]=N(J+1),ha[0]!==ha[1]&&void 0!==ha[0]&&void 0!==ha[1]){R=z(0);var oa=[R,R];for(R=0;R<L;R++)oa.reverse(),oa[Q]=z(R+1),oa[0]!==oa[1]&&void 0!==oa[0]&&void 0!==oa[1]&&(I=M[R],I=x(I,(oa[1]-oa[0])*(ha[1]-ha[0])),X.fillStyle="rgba("+I.join(",")+")",X.fillRect(oa[0]+Y,ha[0]+pa,oa[1]-oa[0]-qa,ha[1]-ha[0]-F))}}sa=Math.round(sa/ca);ma=Math.round(ma/
ca);ra=Math.round(ra/ca);D=b("rgb("+sa+","+ma+","+ra+")");c._hmpixcount=(c._hmpixcount||0)+ca;c._hmlumcount=(c._hmlumcount||0)+ca*D.getLuminance();w=A.selectAll("image").data(w);w.enter().append("svg:image").attr({xmlns:l.svg,preserveAspectRatio:"none"});w.attr({height:aa,width:ba,x:O,y:V,"xlink:href":T.toDataURL("image/png")})}})}},{"../../components/colorscale":627,"../../constants/xmlns_namespaces":726,"../../lib":750,"../../registry":882,d3:169,tinycolor2:548}],1048:[function(a,G,C){var q=a("d3");
G.exports=function(n){q.select(n).selectAll(".hm image").style("opacity",function(m){return m.trace.opacity})}},{d3:169}],1049:[function(a,G,C){G.exports=function(q,n,m){!1===m("zsmooth")&&(m("xgap"),m("ygap"));m("zhoverformat")}},{}],1050:[function(a,G,C){function q(b,k){var e=k(b);"scaled"===(e?k(b+"type","array"):"scaled")&&(k(b+"0"),k("d"+b));return e}var n=a("fast-isnumeric"),m=a("../../lib"),f=a("../../registry");G.exports=function(b,k,e,h,l,c){var g=e("z");l=l||"x";c=c||"y";if(void 0===g||
!g.length)return 0;if(m.isArray1D(b.z)){var d=e(l);e=e(c);d=m.minRowLength(d);e=m.minRowLength(e);if(0===d||0===e)return 0;k._length=Math.min(d,e,g.length)}else{q(l,e);q(c,e);d=!0;for(var p=!1,r=!1,t,w=0;w<g.length;w++){t=g[w];if(!m.isArrayOrTypedArray(t)){d=!1;break}0<t.length&&(p=!0);for(var x=0;x<t.length;x++)if(n(t[x])){r=!0;break}}if(!(d&&p&&r))return 0;e("transpose");k._length=null}if("heatmapgl"===b.type||"contourgl"===b.type)return!0;f.getComponentMethod("calendars","handleTraceDefaults")(b,
k,[l,c],h);return!0}},{"../../lib":750,"../../registry":882,"fast-isnumeric":241}],1051:[function(a,G,C){C=a("../heatmap/attributes");var q=a("../../components/colorscale/attributes"),n=a("../../lib/extend").extendFlat;a=a("../../plot_api/edit_types").overrideAll;for(var m="z x x0 dx y y0 dy text transpose xtype ytype".split(" "),f={},b=0;b<m.length;b++){var k=m[b];f[k]=C[k]}f.zsmooth={valType:"enumerated",values:["fast",!1],dflt:"fast",editType:"calc"};n(f,q("",{cLetter:"z",autoColorDflt:!1}));G.exports=
a(f,"calc","nested")},{"../../components/colorscale/attributes":622,"../../lib/extend":740,"../../plot_api/edit_types":781,"../heatmap/attributes":1036}],1052:[function(a,G,C){function q(b,k){this.scene=b;this.uid=k;this.type="heatmapgl";this.name="";this.hoverinfo="all";this.xData=[];this.yData=[];this.zData=[];this.textLabels=[];this.idToIndex=[];this.bounds=[0,0,0,0];this.options={zsmooth:"fast",z:[],x:[],y:[],shape:[0,0],colorLevels:[0],colorValues:[0,0,0,1]};this.heatmap=n(b.glplot,this.options);
this.heatmap._trace=this}var n=a("gl-heatmap2d"),m=a("../../plots/cartesian/axes"),f=a("../../lib/str2rgbarray");a=q.prototype;a.handlePick=function(b){var k=this.options,e=k.shape,h=b.pointId,l=h%e[0];e=Math.floor(h/e[0]);return{trace:this,dataCoord:b.dataCoord,traceCoord:[k.x[l],k.y[e],k.z[h]],textLabel:this.textLabels[h],name:this.name,pointIndex:[e,l],hoverinfo:this.hoverinfo}};a.update=function(b,k){k=k[0];this.index=b.index;this.name=b.name;this.hoverinfo=b.hoverinfo;var e=k.z;this.options.z=
[].concat.apply([],e);this.options.shape=[e[0].length,e.length];this.options.x=k.x;this.options.y=k.y;this.options.zsmooth=b.zsmooth;e=b.colorscale;for(var h=b.zmin,l=b.zmax,c=e.length,g=Array(c),d=Array(4*c),p=0;p<c;p++){var r=e[p],t=f(r[1]);g[p]=h+r[0]*(l-h);for(r=0;4>r;r++)d[4*p+r]=t[r]}this.options.colorLevels=g;this.options.colorValues=d;this.textLabels=[].concat.apply([],b.text);this.heatmap.update(this.options);e=this.scene.xaxis;h=this.scene.yaxis;if(!1===b.zsmooth){var w={ppad:k.x[1]-k.x[0]};
var x={ppad:k.y[1]-k.y[0]}}b._extremes[e._id]=m.findExtremes(e,k.x,w);b._extremes[h._id]=m.findExtremes(h,k.y,x)};a.dispose=function(){this.heatmap.dispose()};G.exports=function(b,k,e){b=new q(b,k.uid);b.update(k,e);return b}},{"../../lib/str2rgbarray":773,"../../plots/cartesian/axes":799,"gl-heatmap2d":268}],1053:[function(a,G,C){var q=a("../../lib"),n=a("../heatmap/xyz_defaults"),m=a("../../components/colorscale/defaults"),f=a("./attributes");G.exports=function(b,k,e,h){function l(c,g){return q.coerce(b,
k,f,c,g)}n(b,k,l,h)?(l("text"),l("zsmooth"),m(b,k,h,l,{prefix:"",cLetter:"z"})):k.visible=!1}},{"../../components/colorscale/defaults":625,"../../lib":750,"../heatmap/xyz_defaults":1050,"./attributes":1051}],1054:[function(a,G,C){G.exports={attributes:a("./attributes"),supplyDefaults:a("./defaults"),colorbar:a("../heatmap/colorbar"),calc:a("../heatmap/calc"),plot:a("./convert"),moduleType:"trace",name:"heatmapgl",basePlotModule:a("../../plots/gl2d"),categories:["gl","gl2d","2dMap"],meta:{}}},{"../../plots/gl2d":839,
"../heatmap/calc":1037,"../heatmap/colorbar":1039,"./attributes":1051,"./convert":1052,"./defaults":1053}],1055:[function(a,G,C){C=a("../bar/attributes");var q=a("../../plots/template_attributes").hovertemplateAttrs,n=a("./bin_attributes"),m=a("./constants");a=a("../../lib/extend").extendFlat;G.exports={x:{valType:"data_array",editType:"calc+clearAxisTypes"},y:{valType:"data_array",editType:"calc+clearAxisTypes"},text:a({},C.text,{}),hovertext:a({},C.hovertext,{}),orientation:C.orientation,histfunc:{valType:"enumerated",
values:["count","sum","avg","min","max"],dflt:"count",editType:"calc"},histnorm:{valType:"enumerated",values:["","percent","probability","density","probability density"],dflt:"",editType:"calc"},cumulative:{enabled:{valType:"boolean",dflt:!1,editType:"calc"},direction:{valType:"enumerated",values:["increasing","decreasing"],dflt:"increasing",editType:"calc"},currentbin:{valType:"enumerated",values:["include","exclude","half"],dflt:"include",editType:"calc"},editType:"calc"},nbinsx:{valType:"integer",
min:0,dflt:0,editType:"calc"},xbins:n("x",!0),nbinsy:{valType:"integer",min:0,dflt:0,editType:"calc"},ybins:n("y",!0),autobinx:{valType:"boolean",dflt:null,editType:"calc"},autobiny:{valType:"boolean",dflt:null,editType:"calc"},bingroup:{valType:"string",dflt:"",editType:"calc"},hovertemplate:q({},{keys:m.eventDataKeys}),marker:C.marker,offsetgroup:C.offsetgroup,alignmentgroup:C.alignmentgroup,selected:C.selected,unselected:C.unselected,_deprecated:{bardir:C._deprecated.bardir}}},{"../../lib/extend":740,
"../../plots/template_attributes":877,"../bar/attributes":892,"./bin_attributes":1057,"./constants":1061}],1056:[function(a,G,C){G.exports=function(q,n){for(var m=q.length,f=0,b=0;b<m;b++)n[b]?(q[b]/=n[b],f+=q[b]):q[b]=null;return f}},{}],1057:[function(a,G,C){G.exports=function(q,n){return{start:{valType:"any",editType:"calc"},end:{valType:"any",editType:"calc"},size:{valType:"any",editType:"calc"},editType:"calc"}}},{}],1058:[function(a,G,C){var q=a("fast-isnumeric");G.exports={count:function(n,
m,f){f[n]++;return 1},sum:function(n,m,f,b){m=b[m];return q(m)?(m=Number(m),f[n]+=m,m):0},avg:function(n,m,f,b,k){m=b[m];q(m)&&(m=Number(m),f[n]+=m,k[n]++);return 0},min:function(n,m,f,b){m=b[m];if(q(m)){m=Number(m);if(!q(f[n]))return f[n]=m;if(f[n]>m)return b=m-f[n],f[n]=m,b}return 0},max:function(n,m,f,b){m=b[m];if(q(m)){m=Number(m);if(!q(f[n]))return f[n]=m;if(f[n]<m)return b=m-f[n],f[n]=m,b}return 0}}},{"fast-isnumeric":241}],1059:[function(a,G,C){function q(g,d,p,r){if(0>=g*d)return Infinity;
for(var t="date"===p.type,w=n(Math.abs(d-g),t),x=0;10>x;x++){var y=n(80*w,t);if(w===y)break;var A=y;var z=g,F=d,D=p,u=r;t&&A>k?(z=m(z,D,u),F=m(F,D,u),A=A===f?0:1,A=z[A]!==F[A]):A=.1<Math.floor(F/A)-Math.floor(z/A);if(A)w=y;else break}return w}function n(g,d){return d&&g>l?g>k?g>1.1*f?f:g>1.1*b?b:k:g>e?e:g>h?h:l:Math.pow(10,Math.floor(Math.log(g)/Math.LN10))}function m(g,d,p){g=d.c2d(g,f,p).split("-");""===g[0]&&(g.unshift(),g[0]="-"+g[0]);return g}C=a("../../constants/numerical");var f=C.ONEAVGYEAR,
b=C.ONEAVGMONTH,k=C.ONEDAY,e=C.ONEHOUR,h=C.ONEMIN,l=C.ONESEC,c=a("../../plots/cartesian/axes").tickIncrement;G.exports=function(g,d,p,r,t){var w=-1.1*d,x=-.1*d,y=g-x;d=p[0];p=p[1];y=Math.min(q(d+x,d+y,r,t),q(p+x,p+y,r,t));w=Math.min(q(d+w,d+x,r,t),q(p+w,p+x,r,t));if(y>w&&w<Math.abs(p-d)/4E3){var A=y;var z=!1}else A=Math.min(y,w),z=!0;if("date"===r.type&&A>k){var F=A===f?1:6,D=A===f?"M12":"M1";return function(u,B){var I=r.c2d(u,f,t),J=I.indexOf("-",F);0<J&&(I=I.substr(0,J));I=r.d2c(I,0,t);I<u&&(J=
c(I,D,!1,t),(I+J)/2<u+g&&(I=J));return B&&z?c(I,D,!0,t):I}}return function(u,B){var I=A*Math.round(u/A);I+A/10<u&&I+.9*A<u+g&&(I+=A);B&&z&&(I-=A);return I}}},{"../../constants/numerical":725,"../../plots/cartesian/axes":799}],1060:[function(a,G,C){function q(p,r,t,w,x){function y(R,O,T){O[R+"Found"]?(O[R]=u(O[R]),null===O[R]&&(O[R]=T[R])):(S[R]=O[R]=T[R],b.nestedProperty(B[0],A+"."+R).set(T[R]))}var A=w+"bins",z=p._fullLayout,F=z._histogramBinOpts[r["_"+w+"bingroup"]];z="overlay"===z.barmode;var D,
u="date"===t.type?function(R){return R||0===R?b.cleanDate(R,null,Q):null}:function(R){return f(R)?Number(R):null};if(r["_"+w+"autoBinFinished"])delete r["_"+w+"autoBinFinished"];else{var B=F.traces;var I=[],J=!0,N=!1,M=!1;for(D=0;D<B.length;D++){var E=B[D];if(E.visible){var L=F.dirs[D];L=E["_"+L+"pos0"]=t.makeCalcdata(E,L);I=b.concat(I,L);delete E["_"+w+"autoBinFinished"];!0===r.visible&&(J?J=!1:(delete E._autoBin,E["_"+w+"autoBinFinished"]=1),k.traceIs(E,"2dMap")&&(N=!0),"histogram2dcontour"===E.type&&
(M=!0))}}var Q=B[0][w+"calendar"];D=e.autoBin(I,t,F.nbins,N,Q,F.sizeFound&&F.size);var S=(B[0]._autoBin={})[F.dirs[0]]={};M&&(F.size||(D.start=t.c2r(e.tickIncrement(t.r2c(D.start,0,Q),D.size,!0,Q),0,Q)),void 0===F.end&&(D.end=t.c2r(e.tickIncrement(t.r2c(D.end,0,Q),D.size,!1,Q),0,Q)));if(z&&!k.traceIs(r,"2dMap")&&0===D._dataSpan&&"category"!==t.type&&"multicategory"!==t.type){if(x)return[D,L,!0];D=n(p,r,t,w,A)}L=E.cumulative||{};L.enabled&&"include"!==L.currentbin&&("decreasing"===L.direction?D.start=
t.c2r(e.tickIncrement(t.r2c(D.start,0,Q),D.size,!0,Q),0,Q):D.end=t.c2r(e.tickIncrement(t.r2c(D.end,0,Q),D.size,!1,Q),0,Q));F.size=D.size;F.sizeFound||(S.size=D.size,b.nestedProperty(B[0],A+".size").set(D.size));y("start",F,D);y("end",F,D)}L=r["_"+w+"pos0"];delete r["_"+w+"pos0"];x=r._input[A]||{};p=b.extendFlat({},F);M=F.start;z=t.r2l(x.start);E=void 0!==z;(F.startFound||E)&&z!==t.r2l(M)&&(z=E?z:b.aggNums(Math.min,null,L),M={type:"category"===t.type||"multicategory"===t.type?"linear":t.type,r2l:t.r2l,
dtick:F.size,tick0:M,calendar:Q,range:[z,e.tickIncrement(z,F.size,!1,Q)].map(t.l2r)},M=e.tickFirst(M),M>t.r2l(z)&&(M=e.tickIncrement(M,F.size,!0,Q)),p.start=t.l2r(M),E||b.nestedProperty(r,A+".start").set(p.start));E=F.end;z=t.r2l(x.end);x=void 0!==z;(F.endFound||x)&&z!==t.r2l(E)&&(F=x?z:b.aggNums(Math.max,null,L),p.end=t.l2r(F),x||b.nestedProperty(r,A+".start").set(p.end));t="autobin"+w;!1===r._input[t]&&(r._input[A]=b.extendFlat({},r[A]||{}),delete r._input[t],delete r[t]);return[p,L]}function n(p,
r,t,w,x){for(var y=p._fullLayout,A=r.xaxis,z=r.yaxis,F=r.orientation,D=[],u=p._fullData,B=0;B<u.length;B++){var I=u[B];"histogram"===I.type&&!0===I.visible&&I.orientation===F&&I.xaxis===A&&I.yaxis===z&&D.push(I)}B=!1;A=Infinity;z=[r];for(F=0;F<D.length;F++)if(u=D[F],u===r)B=!0;else if(B){I=q(p,u,t,w,!0);var J=I[0],N=I[2];u["_"+w+"autoBinFinished"]=1;u["_"+w+"pos0"]=I[1];N?z.push(u):A=Math.min(A,J.size)}else I=y._histogramBinOpts[u["_"+w+"bingroup"]],A=Math.min(A,I.size||u[x].size);p=Array(z.length);
for(F=0;F<z.length;F++)for(D=z[F]["_"+w+"pos0"],u=0;u<D.length;u++)if(void 0!==D[u]){p[F]=D[u];break}isFinite(A)||(A=b.distinctVals(p).minDiff);for(F=0;F<z.length;F++)u=z[F],D=u[w+"calendar"],D={start:t.c2r(p[F]-A/2,0,D),end:t.c2r(p[F]+A/2,0,D),size:A},u._input[x]=u[x]=D,(I=y._histogramBinOpts[u["_"+w+"bingroup"]])&&b.extendFlat(I,D);return r[x]}function m(p,r,t){function w(z){A=p[z];p[z]/=2}function x(z){y=p[z];p[z]=A+y/2;A+=y}var y,A;if("half"===t)if("increasing"===r)for(w(0),r=1;r<p.length;r++)x(r);
else for(w(p.length-1),r=p.length-2;0<=r;r--)x(r);else if("increasing"===r){for(r=1;r<p.length;r++)p[r]+=p[r-1];"exclude"===t&&(p.unshift(0),p.pop())}else{for(r=p.length-2;0<=r;r--)p[r]+=p[r+1];"exclude"===t&&(p.push(0),p.shift())}}var f=a("fast-isnumeric"),b=a("../../lib"),k=a("../../registry"),e=a("../../plots/cartesian/axes"),h=a("../bar/arrays_to_calcdata"),l=a("./bin_functions"),c=a("./norm_functions"),g=a("./average"),d=a("./bin_label_vals");G.exports={calc:function(p,r){var t=[],w=[],x=e.getFromId(p,
"h"===r.orientation?r.yaxis:r.xaxis),y="h"===r.orientation?"y":"x",A={x:"y",y:"x"}[y],z=r[y+"calendar"],F=r.cumulative,D=q(p,r,x,y),u=D[0];D=D[1];var B="string"===typeof u.size,I=[],J=B?I:u,N=[],M=[],E=[],L=0,Q=r.histnorm,S=r.histfunc,R=-1!==Q.indexOf("density"),O;F.enabled&&R&&(Q=Q.replace(/ ?density$/,""),R=!1);var T="max"===S||"min"===S?null:0,V=l.count;Q=c[Q];var X=!1;if(b.isArrayOrTypedArray(r[A])&&"count"!==S){var ba=r[A];X="avg"===S;V=l[S]}A=x.r2c(u.start,0,z);for(O=x.r2c(u.end,0,z)+(A-e.tickIncrement(A,
u.size,!1,z))/1E6;A<O&&1E6>t.length;){S=e.tickIncrement(A,u.size,!1,z);t.push((A+S)/2);w.push(T);E.push([]);I.push(A);R&&N.push(1/(S-A));X&&M.push(0);if(S<=A)break;A=S}I.push(A);B||"date"!==x.type||(J={start:x.r2c(J.start,0,z),end:x.r2c(J.end,0,z),size:J.size});p._fullLayout._roundFnOpts||(p._fullLayout._roundFnOpts={});var aa=r["_"+y+"bingroup"];T={leftGap:Infinity,rightGap:Infinity};aa&&(p._fullLayout._roundFnOpts[aa]||(p._fullLayout._roundFnOpts[aa]=T),T=p._fullLayout._roundFnOpts[aa]);S=w.length;
y=!0;O=T.leftGap;var ka=T.rightGap;B={};for(A=0;A<D.length;A++){var ha=D[A];R=b.findBin(ha,J);0<=R&&R<S&&(L+=V(R,A,w,ba,M),y&&E[R].length&&ha!==D[E[R][0]]&&(y=!1),E[R].push(A),B[A]=R,O=Math.min(O,ha-I[R]),ka=Math.min(ka,I[R+1]-ha))}T.leftGap=O;T.rightGap=ka;var ca;y||(ca=function(sa,ma){return function(){var ra=p._fullLayout._roundFnOpts[aa];return d(ra.leftGap,ra.rightGap,I,x,z)(sa,ma)}});X&&(L=g(w,M));Q&&Q(w,L,N);F.enabled&&m(w,F.direction,F.currentbin);N=Math.min(t.length,w.length);ba=[];M=0;J=
N-1;for(A=0;A<N;A++)if(w[A]){M=A;break}for(A=N-1;A>=M;A--)if(w[A]){J=A;break}for(A=M;A<=J;A++)f(t[A])&&f(w[A])&&(N={p:t[A],s:w[A],b:0},F.enabled||(N.pts=E[A],y?N.ph0=N.ph1=E[A].length?D[E[A][0]]:t[A]:(r._computePh=!0,N.ph0=ca(I[A]),N.ph1=ca(I[A+1],!0))),ba.push(N));1===ba.length&&(ba[0].width1=e.tickIncrement(ba[0].p,u.size,!1,z)-ba[0].p);h(ba,r);b.isArrayOrTypedArray(r.selectedpoints)&&b.tagSelected(ba,r,B);return ba},calcAllAutoBins:q}},{"../../lib":750,"../../plots/cartesian/axes":799,"../../registry":882,
"../bar/arrays_to_calcdata":891,"./average":1056,"./bin_functions":1058,"./bin_label_vals":1059,"./norm_functions":1067,"fast-isnumeric":241}],1061:[function(a,G,C){G.exports={eventDataKeys:["binNumber"]}},{}],1062:[function(a,G,C){var q=a("../../lib"),n=a("../../plots/cartesian/axis_ids"),m=a("../../registry").traceIs,f=a("../bar/defaults").handleGroupingDefaults,b=q.nestedProperty,k=n.getAxisGroup,e=[{aStr:{x:"xbins.start",y:"ybins.start"},name:"start"},{aStr:{x:"xbins.end",y:"ybins.end"},name:"end"},
{aStr:{x:"xbins.size",y:"ybins.size"},name:"size"},{aStr:{x:"nbinsx",y:"nbinsy"},name:"nbins"}],h=["x","y"];G.exports=function(l,c){function g(I,J){return q.coerce(A._input,A,A._module.attributes,I,J)}function d(I){return"v"===I.orientation?"x":"y"}function p(I,J,N){var M=I.uid+"__"+N;J||(J=M);var E=n.getFromTrace({_fullLayout:c},I,N).type;var L=I[N+"calendar"]||"",Q=r[J],S=!0;Q&&(E===Q.axType&&L===Q.calendar?(S=!1,Q.traces.push(I),Q.dirs.push(N)):(J=M,E!==Q.axType&&q.warn(["Attempted to group the bins of trace",
I.index,"set on a","type:"+E,"axis with bins on","type:"+Q.axType,"axis."].join(" ")),L!==Q.calendar&&q.warn(["Attempted to group the bins of trace",I.index,"set with a",L,"calendar with bins",Q.calendar?"on a "+Q.calendar+" calendar":"w/o a set calendar"].join(" "))));S&&(r[J]={traces:[I],dirs:[N],axType:E,calendar:I[N+"calendar"]||""});I["_"+N+"bingroup"]=J}var r=c._histogramBinOpts={},t=[],w={},x=[],y;for(y=0;y<l.length;y++){var A=l[y];m(A,"histogram")&&(t.push(A),delete A._xautoBinFinished,delete A._yautoBinFinished,
m(A,"2dMap")||f(A._input,A,c,g))}l=c._alignmentOpts||{};for(y=0;y<t.length;y++){A=t[y];var z="";if(!m(A,"2dMap")){var F=d(A);if("group"===c.barmode&&A.alignmentgroup){var D=k(c,A[F+"axis"])+A.orientation;(l[D]||{})[A.alignmentgroup]&&(z=D)}z||"overlay"===c.barmode||(z=k(c,A.xaxis)+k(c,A.yaxis)+d(A))}z?(w[z]||(w[z]=[]),w[z].push(A)):x.push(A)}for(z in w)if(t=w[z],1===t.length)x.push(t[0]);else{l=!1;for(y=0;y<t.length;){A=t[y];l=g("bingroup");break}z=l||z;for(y=0;y<t.length;y++)A=t[y],(l=A._input.bingroup)&&
l!==z&&q.warn(["Trace",A.index,"must match within bingroup",z+".","Ignoring its bingroup:",l,"setting."].join(" ")),A.bingroup=z,p(A,z,d(A))}for(y=0;y<x.length;y++)if(A=x[y],w=g("bingroup"),m(A,"2dMap"))for(t=0;2>t;t++)F=h[t],l=g(F+"bingroup",w?w+"__"+F:null),p(A,l,F);else p(A,w,d(A));for(z in r)for(w=r[z],t=w.traces,x=0;x<e.length;x++)if(l=e[x],D=l.name,"nbins"!==D||!w.sizeFound){for(y=0;y<t.length;y++){A=t[y];F=w.dirs[y];var u=l.aStr[F];if(void 0!==b(A._input,u).get()){w[D]=g(u);w[D+"Found"]=!0;
break}var B=(A._autoBin||{})[F]||{};B[D]&&b(A,u).set(B[D])}if("start"===D||"end"===D)for(;y<t.length;y++)A=t[y],A["_"+F+"bingroup"]&&(B=(A._autoBin||{})[F]||{},g(u,B[D]));"nbins"!==D||w.sizeFound||w.nbinsFound||(A=t[0],w[D]=g(u))}}},{"../../lib":750,"../../plots/cartesian/axis_ids":802,"../../registry":882,"../bar/defaults":896}],1063:[function(a,G,C){var q=a("../../registry"),n=a("../../lib"),m=a("../../components/color"),f=a("../bar/style_defaults"),b=a("./attributes");G.exports=function(k,e,h,
l){function c(t,w){return n.coerce(k,e,b,t,w)}var g=c("x"),d=c("y");c("cumulative.enabled")&&(c("cumulative.direction"),c("cumulative.currentbin"));c("text");c("hovertext");c("hovertemplate");var p=c("orientation",d&&!g?"h":"v"),r="v"===p?"x":"y";p="v"===p?"y":"x";(g=g&&d?Math.min(n.minRowLength(g)&&n.minRowLength(d)):n.minRowLength(e[r]||[]))?(e._length=g,q.getComponentMethod("calendars","handleTraceDefaults")(k,e,["x","y"],l),e[p]&&c("histfunc"),c("histnorm"),c("autobin"+r),f(k,e,c,h,l),n.coerceSelectionMarkerOpacity(e,
c),h=(e.marker.line||{}).color,l=q.getComponentMethod("errorbars","supplyDefaults"),l(k,e,h||m.defaultLine,{axis:"y"}),l(k,e,h||m.defaultLine,{axis:"x",inherit:"y"})):e.visible=!1}},{"../../components/color":615,"../../lib":750,"../../registry":882,"../bar/style_defaults":907,"./attributes":1055}],1064:[function(a,G,C){G.exports=function(q,n,m,f,b){q.x="xVal"in n?n.xVal:n.x;q.y="yVal"in n?n.yVal:n.y;"zLabelVal"in n&&(q.z=n.zLabelVal);n.xa&&(q.xaxis=n.xa);n.ya&&(q.yaxis=n.ya);if(!(m.cumulative||{}).enabled){n=
Array.isArray(b)?f[0].pts[b[0]][b[1]]:f[b].pts;q.pointNumbers=n;q.binNumber=q.pointNumber;delete q.pointNumber;delete q.pointIndex;if(m._indexToPoints)for(f=[],b=0;b<n.length;b++)f=f.concat(m._indexToPoints[n[b]]);else f=n;q.pointIndices=f}return q}},{}],1065:[function(a,G,C){var q=a("../bar/hover").hoverPoints,n=a("../../plots/cartesian/axes").hoverLabelText;G.exports=function(m,f,b,k){if(f=q(m,f,b,k))return m=f[0],b=m.cd[m.index],k=m.cd[0].trace,k.cumulative.enabled||(k="h"===k.orientation?"y":
"x",m[k+"Label"]=n(m[k+"a"],b.ph0,b.ph1)),f}},{"../../plots/cartesian/axes":799,"../bar/hover":899}],1066:[function(a,G,C){G.exports={attributes:a("./attributes"),layoutAttributes:a("../bar/layout_attributes"),supplyDefaults:a("./defaults"),crossTraceDefaults:a("./cross_trace_defaults"),supplyLayoutDefaults:a("../bar/layout_defaults"),calc:a("./calc").calc,crossTraceCalc:a("../bar/cross_trace_calc").crossTraceCalc,plot:a("../bar/plot").plot,layerName:"barlayer",style:a("../bar/style").style,styleOnSelect:a("../bar/style").styleOnSelect,
colorbar:a("../scatter/marker_colorbar"),hoverPoints:a("./hover"),selectPoints:a("../bar/select"),eventData:a("./event_data"),moduleType:"trace",name:"histogram",basePlotModule:a("../../plots/cartesian"),categories:"bar-like cartesian svg bar histogram oriented errorBarsOK showLegend".split(" "),meta:{}}},{"../../plots/cartesian":812,"../bar/cross_trace_calc":895,"../bar/layout_attributes":901,"../bar/layout_defaults":902,"../bar/plot":903,"../bar/select":904,"../bar/style":906,"../scatter/marker_colorbar":1176,
"./attributes":1055,"./calc":1060,"./cross_trace_defaults":1062,"./defaults":1063,"./event_data":1064,"./hover":1065}],1067:[function(a,G,C){G.exports={percent:function(q,n){var m=q.length;n=100/n;for(var f=0;f<m;f++)q[f]*=n},probability:function(q,n){for(var m=q.length,f=0;f<m;f++)q[f]/=n},density:function(q,n,m,f){n=q.length;f=f||1;for(var b=0;b<n;b++)q[b]=q[b]*m[b]*f},"probability density":function(q,n,m,f){var b=q.length;f&&(n/=f);for(f=0;f<b;f++)q[f]*=m[f]/n}}},{}],1068:[function(a,G,C){C=a("../histogram/attributes");
var q=a("../histogram/bin_attributes"),n=a("../heatmap/attributes"),m=a("../../plots/attributes"),f=a("../../plots/template_attributes").hovertemplateAttrs,b=a("../../components/colorscale/attributes");a=a("../../lib/extend").extendFlat;G.exports=a({x:C.x,y:C.y,z:{valType:"data_array",editType:"calc"},marker:{color:{valType:"data_array",editType:"calc"},editType:"calc"},histnorm:C.histnorm,histfunc:C.histfunc,nbinsx:C.nbinsx,xbins:q("x"),nbinsy:C.nbinsy,ybins:q("y"),autobinx:C.autobinx,autobiny:C.autobiny,
bingroup:a({},C.bingroup,{}),xbingroup:a({},C.bingroup,{}),ybingroup:a({},C.bingroup,{}),xgap:n.xgap,ygap:n.ygap,zsmooth:n.zsmooth,zhoverformat:n.zhoverformat,hovertemplate:f({},{keys:"z"}),showlegend:a({},m.showlegend,{dflt:!1})},b("",{cLetter:"z",autoColorDflt:!1}))},{"../../components/colorscale/attributes":622,"../../lib/extend":740,"../../plots/attributes":795,"../../plots/template_attributes":877,"../heatmap/attributes":1036,"../histogram/attributes":1055,"../histogram/bin_attributes":1057}],
1069:[function(a,G,C){function q(g,d,p,r){var t=Array(g);if(r)for(p=0;p<g;p++)t[p]=1/(d[p+1]-d[p]);else for(d=1/p,p=0;p<g;p++)t[p]=d;return t}function n(g,d){return{start:g(d.start),end:g(d.end),size:d.size}}function m(g,d,p,r,t,w){var x=g.length-1,y=Array(x);r=l(p,r,g,t,w);for(p=0;p<x;p++)t=(d||[])[p],y[p]=void 0===t?[r(g[p]),r(g[p+1],!0)]:[t,t];return y}var f=a("../../lib"),b=a("../../plots/cartesian/axes"),k=a("../histogram/bin_functions"),e=a("../histogram/norm_functions"),h=a("../histogram/average"),
l=a("../histogram/bin_label_vals"),c=a("../histogram/calc").calcAllAutoBins;G.exports=function(g,d){var p=b.getFromId(g,d.xaxis),r=b.getFromId(g,d.yaxis),t=d.xcalendar,w=d.ycalendar,x=function(ya){return p.r2c(ya,0,t)},y=function(ya){return r.r2c(ya,0,w)},A=c(g,d,p,"x");var z=A[0];A=A[1];g=c(g,d,r,"y");var F=g[0];g=g[1];var D=d._length;A.length>D&&A.splice(D,A.length-D);g.length>D&&g.splice(D,g.length-D);var u=[],B=[],I=[],J="string"===typeof z.size,N="string"===typeof F.size,M=[],E=[],L=J?M:z,Q=
N?E:F,S=0,R=[],O=[],T=d.histnorm,V=d.histfunc,X=-1!==T.indexOf("density"),ba="max"===V||"min"===V?null:0,aa=k.count;T=e[T];var ka=!1,ha=[],ca=[];(d="z"in d?d.z:"marker"in d&&Array.isArray(d.marker.color)?d.marker.color:"")&&"count"!==V&&(ka="avg"===V,aa=k[V]);V=z.size;var sa=x(z.start),ma=x(z.end)+(sa-b.tickIncrement(sa,V,!1,t))/1E6;for(z=sa;z<ma;z=b.tickIncrement(z,V,!1,t))B.push(ba),M.push(z),ka&&I.push(0);M.push(z);ba=B.length;V=(z-sa)/ba;sa=p.c2r(sa+V/2,0,t);var ra=F.size;ma=y(F.start);var qa=
y(F.end)+(ma-b.tickIncrement(ma,ra,!1,w))/1E6;for(z=ma;z<qa;z=b.tickIncrement(z,ra,!1,w)){u.push(B.slice());E.push(z);var Y=Array(ba);for(F=0;F<ba;F++)Y[F]=[];O.push(Y);ka&&R.push(I.slice())}E.push(z);I=u.length;F=(z-ma)/I;ma=r.c2r(ma+F/2,0,w);X&&(ha=q(B.length,L,V,J),ca=q(u.length,Q,F,N));J||"date"!==p.type||(L=n(x,L));N||"date"!==r.type||(Q=n(y,Q));J=B=!0;N=Array(ba);X=Array(I);var pa=Y=qa=ra=Infinity;for(z=0;z<D;z++){var oa=A[z],ua=g[z];x=f.findBin(oa,L);y=f.findBin(ua,Q);0<=x&&x<ba&&0<=y&&y<I&&
(S+=aa(x,z,u[y],d,R[y]),O[y][x].push(z),B&&(void 0===N[x]?N[x]=oa:N[x]!==oa&&(B=!1)),J&&(void 0===X[y]?X[y]=ua:X[y]!==ua&&(J=!1)),ra=Math.min(ra,oa-M[x]),qa=Math.min(qa,M[x+1]-oa),Y=Math.min(Y,ua-E[y]),pa=Math.min(pa,E[y+1]-ua))}if(ka)for(y=0;y<I;y++)S+=h(u[y],R[y]);if(T)for(y=0;y<I;y++)T(u[y],S,ha,ca[y]);return{x:A,xRanges:m(M,B&&N,ra,qa,p,t),x0:sa,dx:V,y:g,yRanges:m(E,J&&X,Y,pa,r,w),y0:ma,dy:F,z:u,pts:O}}},{"../../lib":750,"../../plots/cartesian/axes":799,"../histogram/average":1056,"../histogram/bin_functions":1058,
"../histogram/bin_label_vals":1059,"../histogram/calc":1060,"../histogram/norm_functions":1067}],1070:[function(a,G,C){var q=a("../../lib"),n=a("./sample_defaults"),m=a("../heatmap/style_defaults"),f=a("../../components/colorscale/defaults"),b=a("./attributes");G.exports=function(k,e,h,l){function c(g,d){return q.coerce(k,e,b,g,d)}n(k,e,c,l);!1!==e.visible&&(m(k,e,c,l),f(k,e,l,c,{prefix:"",cLetter:"z"}),c("hovertemplate"))}},{"../../components/colorscale/defaults":625,"../../lib":750,"../heatmap/style_defaults":1049,
"./attributes":1068,"./sample_defaults":1073}],1071:[function(a,G,C){var q=a("../heatmap/hover"),n=a("../../plots/cartesian/axes").hoverLabelText;G.exports=function(m,f,b,k,e,h){if(f=q(m,f,b,k,e,h))return m=f[0],k=m.index,e=m.cd[0],b=e.xRanges[k[1]],k=e.yRanges[k[0]],m.xLabel=n(m.xa,b[0],b[1]),m.yLabel=n(m.ya,k[0],k[1]),f}},{"../../plots/cartesian/axes":799,"../heatmap/hover":1043}],1072:[function(a,G,C){G.exports={attributes:a("./attributes"),supplyDefaults:a("./defaults"),crossTraceDefaults:a("../histogram/cross_trace_defaults"),
calc:a("../heatmap/calc"),plot:a("../heatmap/plot"),layerName:"heatmaplayer",colorbar:a("../heatmap/colorbar"),style:a("../heatmap/style"),hoverPoints:a("./hover"),eventData:a("../histogram/event_data"),moduleType:"trace",name:"histogram2d",basePlotModule:a("../../plots/cartesian"),categories:["cartesian","svg","2dMap","histogram","showLegend"],meta:{}}},{"../../plots/cartesian":812,"../heatmap/calc":1037,"../heatmap/colorbar":1039,"../heatmap/plot":1047,"../heatmap/style":1048,"../histogram/cross_trace_defaults":1062,
"../histogram/event_data":1064,"./attributes":1068,"./defaults":1070,"./hover":1071}],1073:[function(a,G,C){var q=a("../../registry"),n=a("../../lib");G.exports=function(m,f,b,k){var e=b("x"),h=b("y");e=n.minRowLength(e);h=n.minRowLength(h);e&&h?(f._length=Math.min(e,h),q.getComponentMethod("calendars","handleTraceDefaults")(m,f,["x","y"],k),(b("z")||b("marker.color"))&&b("histfunc"),b("histnorm"),b("autobinx"),b("autobiny")):f.visible=!1}},{"../../lib":750,"../../registry":882}],1074:[function(a,
G,C){C=a("../histogram2d/attributes");var q=a("../contour/attributes"),n=a("../../components/colorscale/attributes");a=a("../../lib/extend").extendFlat;G.exports=a({x:C.x,y:C.y,z:C.z,marker:C.marker,histnorm:C.histnorm,histfunc:C.histfunc,nbinsx:C.nbinsx,xbins:C.xbins,nbinsy:C.nbinsy,ybins:C.ybins,autobinx:C.autobinx,autobiny:C.autobiny,bingroup:C.bingroup,xbingroup:C.xbingroup,ybingroup:C.ybingroup,autocontour:q.autocontour,ncontours:q.ncontours,contours:q.contours,line:{color:q.line.color,width:a({},
q.line.width,{dflt:.5}),dash:q.line.dash,smoothing:q.line.smoothing,editType:"plot"},zhoverformat:C.zhoverformat,hovertemplate:C.hovertemplate},n("",{cLetter:"z",editTypeOverride:"calc"}))},{"../../components/colorscale/attributes":622,"../../lib/extend":740,"../contour/attributes":979,"../histogram2d/attributes":1068}],1075:[function(a,G,C){var q=a("../../lib"),n=a("../histogram2d/sample_defaults"),m=a("../contour/contours_defaults"),f=a("../contour/style_defaults"),b=a("./attributes");G.exports=
function(k,e,h,l){function c(g,d){return q.coerce(k,e,b,g,d)}n(k,e,c,l);!1!==e.visible&&(m(k,e,c,function(g){return q.coerce2(k,e,b,g)}),f(k,e,c,l),c("hovertemplate"))}},{"../../lib":750,"../contour/contours_defaults":986,"../contour/style_defaults":1E3,"../histogram2d/sample_defaults":1073,"./attributes":1074}],1076:[function(a,G,C){G.exports={attributes:a("./attributes"),supplyDefaults:a("./defaults"),crossTraceDefaults:a("../histogram/cross_trace_defaults"),calc:a("../contour/calc"),plot:a("../contour/plot").plot,
layerName:"contourlayer",style:a("../contour/style"),colorbar:a("../contour/colorbar"),hoverPoints:a("../contour/hover"),moduleType:"trace",name:"histogram2dcontour",basePlotModule:a("../../plots/cartesian"),categories:"cartesian svg 2dMap contour histogram showLegend".split(" "),meta:{}}},{"../../plots/cartesian":812,"../contour/calc":980,"../contour/colorbar":982,"../contour/hover":992,"../contour/plot":997,"../contour/style":999,"../histogram/cross_trace_defaults":1062,"./attributes":1074,"./defaults":1075}],
1077:[function(a,G,C){C=a("../../plots/attributes");var q=a("../../plots/template_attributes").hovertemplateAttrs,n=a("../../lib/extend").extendFlat;a=a("./constants").colormodel;for(var m=["rgb","rgba","rgba256","hsl","hsla"],f=[],b=[],k=0;k<m.length;k++){var e=a[m[k]];f.push("For the `"+m[k]+"` colormodel, it is ["+(e.zminDflt||e.min).join(", ")+"].");b.push("For the `"+m[k]+"` colormodel, it is ["+(e.zmaxDflt||e.max).join(", ")+"].")}G.exports=n({source:{valType:"string",editType:"calc"},z:{valType:"data_array",
editType:"calc"},colormodel:{valType:"enumerated",values:m,editType:"calc"},zmin:{valType:"info_array",items:[{valType:"number",editType:"calc"},{valType:"number",editType:"calc"},{valType:"number",editType:"calc"},{valType:"number",editType:"calc"}],editType:"calc"},zmax:{valType:"info_array",items:[{valType:"number",editType:"calc"},{valType:"number",editType:"calc"},{valType:"number",editType:"calc"},{valType:"number",editType:"calc"}],editType:"calc"},x0:{valType:"any",dflt:0,editType:"calc+clearAxisTypes"},
y0:{valType:"any",dflt:0,editType:"calc+clearAxisTypes"},dx:{valType:"number",dflt:1,editType:"calc"},dy:{valType:"number",dflt:1,editType:"calc"},text:{valType:"data_array",editType:"plot"},hovertext:{valType:"data_array",editType:"plot"},hoverinfo:n({},C.hoverinfo,{flags:"x y z color name text".split(" "),dflt:"x+y+z+text+name"}),hovertemplate:q({},{keys:["z","color","colormodel"]}),transforms:void 0})},{"../../lib/extend":740,"../../plots/attributes":795,"../../plots/template_attributes":877,"./constants":1079}],
1078:[function(a,G,C){function q(c,g,d,p){return function(r){return f.constrain((r-c)*g,d,p)}}function n(c,g){return function(d){return f.constrain(d,c,g)}}function m(c){var g=b.colormodel[c.colormodel],d=(g.colormodel||c.colormodel).length;c._sArray=[];for(var p=0;p<d;p++)g.min[p]!==c.zmin[p]||g.max[p]!==c.zmax[p]?c._sArray.push(q(c.zmin[p],(g.max[p]-g.min[p])/(c.zmax[p]-c.zmin[p]),g.min[p],g.max[p])):c._sArray.push(n(g.min[p],g.max[p]));return function(r){r=r.slice(0,d);for(var t=0;t<d;t++){var w=
r[t];if(!k(w))return!1;r[t]=c._sArray[t](w)}return r}}var f=a("../../lib"),b=a("./constants"),k=a("fast-isnumeric"),e=a("../../plots/cartesian/axes"),h=a("../../lib").maxRowLength,l=a("./helpers").getImageSize;G.exports=function(c,g){if(g._hasZ){var d=g.z.length;var p=h(g.z)}else g._hasSource&&(p=l(g.source),d=p.height,p=p.width);var r=e.getFromId(c,g.xaxis||"x");c=e.getFromId(c,g.yaxis||"y");var t=r.d2c(g.x0)-g.dx/2,w=c.d2c(g.y0)-g.dy/2,x,y=[t,t+p*g.dx],A=[w,w+d*g.dy];if(r&&"log"===r.type)for(x=
0;x<p;x++)y.push(t+x*g.dx);if(c&&"log"===c.type)for(x=0;x<d;x++)A.push(w+x*g.dy);g._extremes[r._id]=e.findExtremes(r,y);g._extremes[c._id]=e.findExtremes(c,A);g._scaler=m(g);return[{x0:t,y0:w,z:g.z,w:p,h:d}]}},{"../../lib":750,"../../plots/cartesian/axes":799,"./constants":1079,"./helpers":1082,"fast-isnumeric":241}],1079:[function(a,G,C){G.exports={colormodel:{rgb:{min:[0,0,0],max:[255,255,255],fmt:function(q){return q.slice(0,3)},suffix:["","",""]},rgba:{min:[0,0,0,0],max:[255,255,255,1],fmt:function(q){return q.slice(0,
4)},suffix:["","","",""]},rgba256:{colormodel:"rgba",zminDflt:[0,0,0,0],zmaxDflt:[255,255,255,255],min:[0,0,0,0],max:[255,255,255,1],fmt:function(q){return q.slice(0,4)},suffix:["","","",""]},hsl:{min:[0,0,0],max:[360,100,100],fmt:function(q){q=q.slice(0,3);q[1]+="%";q[2]+="%";return q},suffix:["°","%","%"]},hsla:{min:[0,0,0,0],max:[360,100,100,1],fmt:function(q){q=q.slice(0,4);q[1]+="%";q[2]+="%";return q},suffix:["°","%","%",""]}}}},{}],1080:[function(a,G,C){var q=a("../../lib"),n=a("./attributes"),
m=a("./constants"),f=a("../../snapshot/helpers").IMAGE_URL_PREFIX;G.exports=function(b,k){function e(l,c){return q.coerce(b,k,n,l,c)}e("source");k.source&&!k.source.match(f)&&delete k.source;k._hasSource=!!k.source;var h=e("z");k._hasZ=!(void 0===h||!h.length||!h[0]||!h[0].length);k._hasZ||k._hasSource?(e("x0"),e("y0"),e("dx"),e("dy"),k._hasZ?(e("colormodel","rgb"),h=m.colormodel[k.colormodel],e("zmin",h.zminDflt||h.min),e("zmax",h.zmaxDflt||h.max)):k._hasSource&&(k.colormodel="rgba256",h=m.colormodel[k.colormodel],
k.zmin=h.zminDflt,k.zmax=h.zmaxDflt),e("text"),e("hovertext"),e("hovertemplate"),k._length=null):k.visible=!1}},{"../../lib":750,"../../snapshot/helpers":886,"./attributes":1077,"./constants":1079}],1081:[function(a,G,C){G.exports=function(q,n){"xVal"in n&&(q.x=n.xVal);"yVal"in n&&(q.y=n.yVal);n.xa&&(q.xaxis=n.xa);n.ya&&(q.yaxis=n.ya);q.color=n.color;q.colormodel=n.trace.colormodel;q.z||(q.z=n.color);return q}},{}],1082:[function(a,G,C){var q=a("image-size"),n=a("../../snapshot/helpers").IMAGE_URL_PREFIX,
m=a("buffer/").Buffer;C.getImageSize=function(f){f=f.replace(n,"");f=new m(f,"base64");return q(f)}},{"../../snapshot/helpers":886,"buffer/":111,"image-size":418}],1083:[function(a,G,C){var q=a("../../components/fx"),n=a("../../lib"),m=a("./constants");G.exports=function(f,b,k){var e=f.cd[0],h=e.trace,l=f.xa,c=f.ya;if(!(0<q.inbox(b-e.x0,b-(e.x0+e.w*h.dx),0)||0<q.inbox(k-e.y0,k-(e.y0+e.h*h.dy),0))){b=Math.floor((b-e.x0)/h.dx);k=Math.floor(Math.abs(k-e.y0)/h.dy);if(h._hasZ)var g=e.z[k][b];else h._hasSource&&
(g=h._canvas.el.getContext("2d").getImageData(b,k,1,1).data);if(g){var d=e.hi||h.hoverinfo,p;d&&(d=d.split("+"),-1!==d.indexOf("all")&&(d=["color"]),-1!==d.indexOf("color")&&(p=!0));var r=m.colormodel[h.colormodel],t=r.colormodel||h.colormodel,w=t.length;d=h._scaler(g);r=r.suffix;var x=[];if(h.hovertemplate||p)x.push("["+[d[0]+r[0],d[1]+r[1],d[2]+r[2]].join(", ")),4===w&&x.push(", "+d[3]+r[3]),x.push("]"),x=x.join(""),f.extraText=t.toUpperCase()+": "+x;var y;Array.isArray(h.hovertext)&&Array.isArray(h.hovertext[k])?
y=h.hovertext[k][b]:Array.isArray(h.text)&&Array.isArray(h.text[k])&&(y=h.text[k][b]);c=c.c2p(e.y0+(k+.5)*h.dy);p=e.x0+(b+.5)*h.dx;t=e.y0+(k+.5)*h.dy;g="["+g.slice(0,h.colormodel.length).join(", ")+"]";return[n.extendFlat(f,{index:[k,b],x0:l.c2p(e.x0+b*h.dx),x1:l.c2p(e.x0+(b+1)*h.dx),y0:c,y1:c,color:d,xVal:p,xLabelVal:p,yVal:t,yLabelVal:t,zLabelVal:g,text:y,hovertemplateLabels:{zLabel:g,colorLabel:x,"color[0]Label":d[0]+r[0],"color[1]Label":d[1]+r[1],"color[2]Label":d[2]+r[2],"color[3]Label":d[3]+
r[3]}})]}}}},{"../../components/fx":655,"../../lib":750,"./constants":1079}],1084:[function(a,G,C){G.exports={attributes:a("./attributes"),supplyDefaults:a("./defaults"),calc:a("./calc"),plot:a("./plot"),style:a("./style"),hoverPoints:a("./hover"),eventData:a("./event_data"),moduleType:"trace",name:"image",basePlotModule:a("../../plots/cartesian"),categories:["cartesian","svg","2dMap","noSortingByValue"],animatable:!1,meta:{}}},{"../../plots/cartesian":812,"./attributes":1077,"./calc":1078,"./defaults":1080,
"./event_data":1081,"./hover":1083,"./plot":1085,"./style":1086}],1085:[function(a,G,C){function q(e){return"linear"===e.type&&e.range[1]>e.range[0]===("x"===e._id.charAt(0))}var n=a("d3"),m=a("../../lib"),f=a("../../constants/xmlns_namespaces"),b=a("./constants"),k=m.isIOS()||m.isSafari()||m.isIE();G.exports=function(e,h,l,c){var g=h.xaxis,d=h.yaxis,p=!(k||e._context._exportedPlot);m.makeTraceGroups(c,l,"im").each(function(r){function t(V){var X=document.createElement("canvas");X.width=R;X.height=
O;var ba=X.getContext("2d"),aa=function(oa){return m.constrain(Math.round(g.c2p(F+oa*I)-M),0,R)},ka=function(oa){return m.constrain(Math.round(d.c2p(D+oa*J)-L),0,O)},ha=b.colormodel[y.colormodel],ca=ha.colormodel||y.colormodel;ha=ha.fmt;for(N=0;N<x.w;N++){var sa=aa(N),ma=aa(N+1);if(ma!==sa&&!isNaN(ma)&&!isNaN(sa))for(var ra=0;ra<x.h;ra++){var qa=ka(ra),Y=ka(ra+1);if(Y!==qa&&!isNaN(Y)&&!isNaN(qa)&&V(N,ra)){var pa=y._scaler(V(N,ra));ba.fillStyle=pa?ca+"("+ha(pa).join(",")+")":"rgba(0,0,0,0)";ba.fillRect(sa,
qa,ma-sa,Y-qa)}}}return X}var w=n.select(this),x=r[0],y=x.trace,A=p&&!y._hasZ&&y._hasSource&&q(g)&&q(d);y._fastImage=A;var z=x.z,F=x.x0,D=x.y0,u=x.w,B=x.h,I=y.dx,J=y.dy,N;for(N=0;void 0===M&&N<u;){var M=g.c2p(F+N*I);N++}for(N=u;void 0===E&&0<N;){var E=g.c2p(F+N*I);N--}for(N=0;void 0===L&&N<B;){var L=d.c2p(D+N*J);N++}for(N=B;void 0===Q&&0<N;){var Q=d.c2p(D+N*J);N--}if(E<M){var S=E;E=M;M=S}Q<L&&(S=L,L=Q,Q=S);A||(M=Math.max(-.5*g._length,M),E=Math.min(1.5*g._length,E),L=Math.max(-.5*d._length,L),Q=Math.min(1.5*
d._length,Q));var R=Math.round(E-M),O=Math.round(Q-L);if(0>=R||0>=O)w.selectAll("image").data([]).exit().remove();else{var T=w.selectAll("image").data([r]);T.enter().append("svg:image").attr({xmlns:f.svg,preserveAspectRatio:"none"});T.exit().remove();T.attr("style","image-rendering: optimizeSpeed; image-rendering: -moz-crisp-edges; image-rendering: -o-crisp-edges; image-rendering: -webkit-optimize-contrast; image-rendering: optimize-contrast; image-rendering: crisp-edges; image-rendering: pixelated;");
r=(new Promise(function(V){if(y._hasZ)V();else if(y._hasSource)if(y._canvas&&y._canvas.el.width===u&&y._canvas.el.height===B&&y._canvas.source===y.source)V();else{var X=document.createElement("canvas");X.width=u;X.height=B;var ba=X.getContext("2d");y._image=y._image||new Image;var aa=y._image;aa.onload=function(){ba.drawImage(aa,0,0);y._canvas={el:X,source:y.source};V()};aa.setAttribute("src",y.source)}})).then(function(){if(y._hasZ){var V=t(function(ba,aa){return z[aa][ba]});V=V.toDataURL("image/png")}else if(y._hasSource)if(A)V=
y.source;else{var X=y._canvas.el.getContext("2d").getImageData(0,0,u,B).data;V=t(function(ba,aa){ba=4*(aa*u+ba);return[X[ba],X[ba+1],X[ba+2],X[ba+3]]});V=V.toDataURL("image/png")}T.attr({"xlink:href":V,height:O,width:R,x:M,y:L})});e._promises.push(r)}})}},{"../../constants/xmlns_namespaces":726,"../../lib":750,"./constants":1079,d3:169}],1086:[function(a,G,C){var q=a("d3");G.exports=function(n){q.select(n).selectAll(".im image").style("opacity",function(m){return m[0].trace.opacity})}},{d3:169}],
1087:[function(a,G,C){C=a("../../lib/extend").extendFlat;var q=a("../../lib/extend").extendDeep,n=a("../../plot_api/edit_types").overrideAll,m=a("../../plots/font_attributes"),f=a("../../components/color/attributes"),b=a("../../plots/domain").attributes,k=a("../../plots/cartesian/layout_attributes"),e=a("../../plot_api/plot_template").templatedArray,h=a("../../constants/delta.js");a("../../constants/docs");a=m({editType:"plot",colorEditType:"plot"});var l={color:{valType:"color",editType:"plot"},
line:{color:{valType:"color",dflt:f.defaultLine,editType:"plot"},width:{valType:"number",min:0,dflt:0,editType:"plot"},editType:"calc"},thickness:{valType:"number",min:0,max:1,dflt:1,editType:"plot"},editType:"calc"},c={valType:"info_array",items:[{valType:"number",editType:"plot"},{valType:"number",editType:"plot"}],editType:"plot"};e=e("step",q({},l,{range:c}));G.exports={mode:{valType:"flaglist",editType:"calc",flags:["number","delta","gauge"],dflt:"number"},value:{valType:"number",editType:"calc",
anim:!0},align:{valType:"enumerated",values:["left","center","right"],editType:"plot"},domain:b({name:"indicator",trace:!0,editType:"calc"}),title:{text:{valType:"string",editType:"plot"},align:{valType:"enumerated",values:["left","center","right"],editType:"plot"},font:C({},a,{}),editType:"plot"},number:{valueformat:{valType:"string",dflt:"",editType:"plot"},font:C({},a,{}),prefix:{valType:"string",dflt:"",editType:"plot"},suffix:{valType:"string",dflt:"",editType:"plot"},editType:"plot"},delta:{reference:{valType:"number",
editType:"calc"},position:{valType:"enumerated",values:["top","bottom","left","right"],dflt:"bottom",editType:"plot"},relative:{valType:"boolean",editType:"plot",dflt:!1},valueformat:{valType:"string",editType:"plot"},increasing:{symbol:{valType:"string",dflt:h.INCREASING.SYMBOL,editType:"plot"},color:{valType:"color",dflt:h.INCREASING.COLOR,editType:"plot"},editType:"plot"},decreasing:{symbol:{valType:"string",dflt:h.DECREASING.SYMBOL,editType:"plot"},color:{valType:"color",dflt:h.DECREASING.COLOR,
editType:"plot"},editType:"plot"},font:C({},a,{}),editType:"calc"},gauge:{shape:{valType:"enumerated",editType:"plot",dflt:"angular",values:["angular","bullet"]},bar:q({},l,{color:{dflt:"green"}}),bgcolor:{valType:"color",editType:"plot"},bordercolor:{valType:"color",dflt:f.defaultLine,editType:"plot"},borderwidth:{valType:"number",min:0,dflt:1,editType:"plot"},axis:n({range:c,visible:C({},k.visible,{dflt:!0}),tickmode:k.tickmode,nticks:k.nticks,tick0:k.tick0,dtick:k.dtick,tickvals:k.tickvals,ticktext:k.ticktext,
ticks:C({},k.ticks,{dflt:"outside"}),ticklen:k.ticklen,tickwidth:k.tickwidth,tickcolor:k.tickcolor,showticklabels:k.showticklabels,tickfont:m({}),tickangle:k.tickangle,tickformat:k.tickformat,tickformatstops:k.tickformatstops,tickprefix:k.tickprefix,showtickprefix:k.showtickprefix,ticksuffix:k.ticksuffix,showticksuffix:k.showticksuffix,separatethousands:k.separatethousands,exponentformat:k.exponentformat,minexponent:k.minexponent,showexponent:k.showexponent,editType:"plot"},"plot"),steps:e,threshold:{line:{color:C({},
l.line.color,{}),width:C({},l.line.width,{dflt:1}),editType:"plot"},thickness:C({},l.thickness,{dflt:.85}),value:{valType:"number",editType:"calc",dflt:!1},editType:"plot"},editType:"plot"}}},{"../../components/color/attributes":614,"../../constants/delta.js":719,"../../constants/docs":720,"../../lib/extend":740,"../../plot_api/edit_types":781,"../../plot_api/plot_template":788,"../../plots/cartesian/layout_attributes":813,"../../plots/domain":826,"../../plots/font_attributes":827}],1088:[function(a,
G,C){var q=a("../../plots/plots");C.name="indicator";C.plot=function(n,m,f,b){q.plotBasePlot(C.name,n,m,f,b)};C.clean=function(n,m,f,b){q.cleanBasePlot(C.name,n,m,f,b)}},{"../../plots/plots":862}],1089:[function(a,G,C){G.exports={calc:function(q,n){q=[];var m=n.value;"number"!==typeof n._lastValue&&(n._lastValue=n.value);var f=n._lastValue,b=f;n._hasDelta&&"number"===typeof n.delta.reference&&(b=n.delta.reference);q[0]={y:m,lastY:f,delta:m-b,relativeDelta:(m-b)/b};return q}}},{}],1090:[function(a,
G,C){G.exports={defaultNumberFontSize:80,bulletNumberDomainSize:.25,bulletPadding:.025,innerRadius:.75,valueThickness:.5,titlePadding:5,horizontalPadding:10}},{}],1091:[function(a,G,C){function q(g,d){function p(r,t){return n.coerce(g,d,m.gauge.steps,r,t)}p("color");p("line.color");p("line.width");p("range");p("thickness")}var n=a("../../lib"),m=a("./attributes"),f=a("../../plots/domain").defaults,b=a("../../plot_api/plot_template"),k=a("../../plots/array_container_defaults"),e=a("./constants.js"),
h=a("../../plots/cartesian/tick_value_defaults"),l=a("../../plots/cartesian/tick_mark_defaults"),c=a("../../plots/cartesian/tick_label_defaults");G.exports={supplyDefaults:function(g,d,p,r){function t(B,I){return n.coerce(g,d,m,B,I)}function w(B,I){return n.coerce(z,F,m.gauge,B,I)}function x(B,I){return n.coerce(D,u,m.gauge.axis,B,I)}f(d,r,t);t("mode");d._hasNumber=-1!==d.mode.indexOf("number");d._hasDelta=-1!==d.mode.indexOf("delta");d._hasGauge=-1!==d.mode.indexOf("gauge");p=t("value");d._range=
[0,"number"===typeof p?1.5*p:1];p=Array(2);if(d._hasNumber){t("number.valueformat");t("number.font.color",r.font.color);t("number.font.family",r.font.family);t("number.font.size");void 0===d.number.font.size&&(d.number.font.size=e.defaultNumberFontSize,p[0]=!0);t("number.prefix");t("number.suffix");var y=d.number.font.size}if(d._hasDelta){t("delta.font.color",r.font.color);t("delta.font.family",r.font.family);t("delta.font.size");void 0===d.delta.font.size&&(d.delta.font.size=(d._hasNumber?.5:1)*
(y||e.defaultNumberFontSize),p[1]=!0);t("delta.reference",d.value);t("delta.relative");t("delta.valueformat",d.delta.relative?"2%":"");t("delta.increasing.symbol");t("delta.increasing.color");t("delta.decreasing.symbol");t("delta.decreasing.color");t("delta.position");var A=d.delta.font.size}d._scaleNumbers=(!d._hasNumber||p[0])&&(!d._hasDelta||p[1])||!1;t("title.font.color",r.font.color);t("title.font.family",r.font.family);t("title.font.size",.25*(y||A||e.defaultNumberFontSize));t("title.text");
var z;if(d._hasGauge){(z=g.gauge)||(z={});var F=b.newContainer(d,"gauge");w("shape");(d._isBullet="bullet"===d.gauge.shape)||t("title.align","center");(d._isAngular="angular"===d.gauge.shape)||t("align","center");w("bgcolor",r.paper_bgcolor);w("borderwidth");w("bordercolor");w("bar.color");w("bar.line.color");w("bar.line.width");w("bar.thickness",e.valueThickness*("bullet"===d.gauge.shape?.5:1));k(z,F,{name:"steps",handleItemDefaults:q});w("threshold.value");w("threshold.thickness");w("threshold.line.width");
w("threshold.line.color");var D={};z&&(D=z.axis||{});var u=b.newContainer(F,"axis");x("visible");d._range=x("range",d._range);r={outerTicks:!0};h(D,u,x,"linear");c(D,u,x,"linear",r);l(D,u,x,r)}else t("title.align","center"),t("align","center"),d._isAngular=d._isBullet=!1;d._length=null}}},{"../../lib":750,"../../plot_api/plot_template":788,"../../plots/array_container_defaults":794,"../../plots/cartesian/tick_label_defaults":820,"../../plots/cartesian/tick_mark_defaults":821,"../../plots/cartesian/tick_value_defaults":822,
"../../plots/domain":826,"./attributes":1087,"./constants.js":1090}],1092:[function(a,G,C){G.exports={moduleType:"trace",name:"indicator",basePlotModule:a("./base_plot"),categories:["svg","noOpacity","noHover"],animatable:!0,attributes:a("./attributes"),supplyDefaults:a("./defaults").supplyDefaults,calc:a("./calc").calc,plot:a("./plot"),meta:{}}},{"./attributes":1087,"./base_plot":1088,"./calc":1089,"./defaults":1091,"./plot":1093}],1093:[function(a,G,C){function q(J,N,M,E){function L(sa){sa.attr("width",
function(ma){return Math.max(0,ha.c2p(ma.range[1])-ha.c2p(ma.range[0]))}).attr("x",function(ma){return ha.c2p(ma.range[0])}).attr("y",function(ma){return.5*(1-ma.thickness)*aa}).attr("height",function(ma){return ma.thickness*aa})}var Q=M[0].trace;N=E.gauge;var S=E.layer,R=E.gaugeBg,O=E.gaugeOutline,T=E.size,V=Q.domain,X=E.transitionOpts,ba=E.onComplete;N.enter().append("g").classed("bullet",!0);N.attr("transform","translate("+T.l+", "+T.t+")");S.enter().append("g").classed("bulletaxis",!0).classed("crisp",
!0);S.selectAll("g.xbulletaxistick,path,text").remove();var aa=T.h;E=Q.gauge.bar.thickness*aa;var ka=V.x[0];V=V.x[0]+(V.x[1]-V.x[0])*(Q._hasNumber||Q._hasDelta?1-w.bulletNumberDomainSize:1);var ha=k(J,Q.gauge.axis);ha._id="xbulletaxis";ha.domain=[ka,V];ha.setScale();V=y.calcTicks(ha);ka=y.makeTransFn(ha);var ca=y.getTickSigns(ha)[2];T=T.t+T.h;ha.visible&&(y.drawTicks(J,ha,{vals:"inside"===ha.ticks?y.clipEnds(ha,V):V,layer:S,path:y.makeTickPath(ha,T,ca),transFn:ka}),y.drawLabels(J,ha,{vals:V,layer:S,
transFn:ka,labelFns:y.makeLabelFns(ha,T)}));J=[R].concat(Q.gauge.steps);J=N.selectAll("g.bg-bullet").data(J);J.enter().append("g").classed("bg-bullet",!0).append("rect");J.select("rect").call(L).call(f);J.exit().remove();J=N.selectAll("g.value-bullet").data([Q.gauge.bar]);J.enter().append("g").classed("value-bullet",!0).append("rect");J.select("rect").attr("height",E).attr("y",(aa-E)/2).call(f);X&&0<X.duration?J.select("rect").transition().duration(X.duration).ease(X.easing).each("end",function(){ba&&
ba()}).each("interrupt",function(){ba&&ba()}).attr("width",Math.max(0,ha.c2p(Math.min(Q.gauge.axis.range[1],M[0].y)))):J.select("rect").attr("width","number"===typeof M[0].y?Math.max(0,ha.c2p(Math.min(Q.gauge.axis.range[1],M[0].y))):0);J.exit().remove();M=M.filter(function(){return Q.gauge.threshold.value});M=N.selectAll("g.threshold-bullet").data(M);M.enter().append("g").classed("threshold-bullet",!0).append("line");M.select("line").attr("x1",ha.c2p(Q.gauge.threshold.value)).attr("x2",ha.c2p(Q.gauge.threshold.value)).attr("y1",
(1-Q.gauge.threshold.thickness)/2*aa).attr("y2",(1-(1-Q.gauge.threshold.thickness)/2)*aa).call(D.stroke,Q.gauge.threshold.line.color).style("stroke-width",Q.gauge.threshold.line.width);M.exit().remove();N=N.selectAll("g.gauge-outline").data([O]);N.enter().append("g").classed("gauge-outline",!0).append("rect");N.select("rect").call(L).call(f);N.exit().remove()}function n(J,N,M,E){function L(ya){var ja=R.gauge.axis.range[0];ya=(ya-ja)/(R.gauge.axis.range[1]-ja)*Math.PI-ca;return ya<-ca?-ca:ya>ca?ca:
ya}function Q(ya){return g.svg.arc().innerRadius((V+T)/2-ya/2*(T-V)).outerRadius((V+T)/2+ya/2*(T-V)).startAngle(-ca)}function S(ya){ya.attr("d",function(ja){return Q(ja.thickness).startAngle(L(ja.range[0])).endAngle(L(ja.range[1]))()})}var R=M[0].trace,O=E.size,T=E.radius,V=E.innerRadius,X=E.gaugeBg;N=E.gaugeOutline;var ba=[O.l+O.w/2,O.t+O.h/2+T/2];O=E.gauge;var aa=E.layer,ka=E.transitionOpts,ha=E.onComplete,ca=Math.PI/2;O.enter().append("g").classed("angular",!0);O.attr("transform",e(ba[0],ba[1]));
aa.enter().append("g").classed("angularaxis",!0).classed("crisp",!0);aa.selectAll("g.xangularaxistick,path,text").remove();var sa=k(J,R.gauge.axis);sa.type="linear";sa.range=R.gauge.axis.range;sa._id="xangularaxis";sa.setScale();var ma=function(ya){return(sa.range[0]-ya.x)/(sa.range[1]-sa.range[0])*Math.PI+Math.PI},ra={},qa=y.makeLabelFns(sa,0).labelStandoff;ra.xFn=function(ya){ya=ma(ya);return Math.cos(ya)*qa};ra.yFn=function(ya){var ja=ma(ya);return-Math.sin(ja)*(qa+ya.fontSize*(0<Math.sin(ja)?
.2:1))+Math.abs(Math.cos(ja))*ya.fontSize*r};ra.anchorFn=function(ya){ya=ma(ya);ya=Math.cos(ya);return.1>Math.abs(ya)?"middle":0<ya?"start":"end"};ra.heightFn=function(ya,ja,za){ya=ma(ya);return-.5*(1+Math.sin(ya))*za};var Y=function(ya){return e(ba[0]+T*Math.cos(ya),ba[1]-T*Math.sin(ya))};var pa=function(ya){return Y(ma(ya))};var oa=function(ya){ya=ma(ya);return Y(ya)+"rotate("+-p(ya)+")"};E=y.calcTicks(sa);var ua=y.getTickSigns(sa)[2];sa.visible&&(ua="inside"===sa.ticks?-1:1,y.drawTicks(J,sa,{vals:E,
layer:aa,path:"M"+(sa.linewidth||1)/2*ua+",0h"+ua*sa.ticklen,transFn:oa}),y.drawLabels(J,sa,{vals:E,layer:aa,transFn:pa,labelFns:ra}));J=[X].concat(R.gauge.steps);J=O.selectAll("g.bg-arc").data(J);J.enter().append("g").classed("bg-arc",!0).append("path");J.select("path").call(S).call(f);J.exit().remove();J=Q(R.gauge.bar.thickness);X=O.selectAll("g.value-arc").data([R.gauge.bar]);X.enter().append("g").classed("value-arc",!0).append("path");aa=X.select("path");ka&&0<ka.duration?(aa.transition().duration(ka.duration).ease(ka.easing).each("end",
function(){ha&&ha()}).each("interrupt",function(){ha&&ha()}).attrTween("d",b(J,L(M[0].lastY),L(M[0].y))),R._lastValue=M[0].y):aa.attr("d","number"===typeof M[0].y?J.endAngle(L(M[0].y)):"M0,0Z");aa.call(f);X.exit().remove();J=[];(M=R.gauge.threshold.value)&&J.push({range:[M,M],color:R.gauge.threshold.color,line:{color:R.gauge.threshold.line.color,width:R.gauge.threshold.line.width},thickness:R.gauge.threshold.thickness});M=O.selectAll("g.threshold-arc").data(J);M.enter().append("g").classed("threshold-arc",
!0).append("path");M.select("path").call(S).call(f);M.exit().remove();N=O.selectAll("g.gauge-outline").data([N]);N.enter().append("g").classed("gauge-outline",!0).append("path");N.select("path").call(S).call(f);N.exit().remove()}function m(J,N,M,E){function L(ua,ya,ja,za){if(!ua.match("s")||0<=ja===0<=za||ya(ja).slice(-1).match(I)||ya(za).slice(-1).match(I))return ya;ua=ua.slice().replace("s","f").replace(/\d+/,function(Ma){return parseInt(Ma)-1});var Ba=k(J,{tickformat:ua});return function(Ma){return 1>
Math.abs(Ma)?y.tickText(Ba,Ma).text:ya(Ma)}}function Q(){function ua(){var Oa="number"===typeof M[0].y?Ba+ja(M[0].y)+za:"-";Ma.text(Oa).call(t.font,R.number.font).call(x.convertToTspans,J)}var ya=k(J,{tickformat:R.number.valueformat},R._range);ya.setScale();y.prepTicks(ya);var ja=function(Oa){return y.tickText(ya,Oa).text},za=R.number.suffix,Ba=R.number.prefix,Ma=ka.select("text.number");ba&&0<ba.duration?Ma.transition().duration(ba.duration).ease(ba.easing).each("end",function(){ua();aa&&aa()}).each("interrupt",
function(){ua();aa&&aa()}).attrTween("text",function(){var Oa=g.select(this),Ia=g.interpolateNumber(M[0].lastY,M[0].y);R._lastValue=M[0].y;var Pa=L(R.number.valueformat,ja,M[0].lastY,M[0].y);return function(Fa){Oa.text(Ba+Pa(Ia(Fa))+za)}}):ua();ha=l(Ba+ja(M[0].y)+za,R.number.font,X,J);return Ma}function S(){function ua(){Oa.text(Ba(za(M[0]),ja)).call(D.fill,Ma(M[0])).call(x.convertToTspans,J)}var ya=k(J,{tickformat:R.delta.valueformat},R._range);ya.setScale();y.prepTicks(ya);var ja=function(Ia){return y.tickText(ya,
Ia).text},za=function(Ia){return R.delta.relative?Ia.relativeDelta:Ia.delta},Ba=function(Ia,Pa){return 0===Ia||"number"!==typeof Ia||isNaN(Ia)?"-":(0<Ia?R.delta.increasing.symbol:R.delta.decreasing.symbol)+Pa(Ia)},Ma=function(Ia){return 0<=Ia.delta?R.delta.increasing.color:R.delta.decreasing.color};void 0===R._deltaLastValue&&(R._deltaLastValue=za(M[0]));var Oa=ka.select("text.delta");Oa.call(t.font,R.delta.font).call(D.fill,Ma({delta:R._deltaLastValue}));ba&&0<ba.duration?Oa.transition().duration(ba.duration).ease(ba.easing).tween("text",
function(){var Ia=g.select(this),Pa=za(M[0]),Fa=R._deltaLastValue,Na=L(R.delta.valueformat,ja,Fa,Pa),$a=g.interpolateNumber(Fa,Pa);R._deltaLastValue=Pa;return function(cb){Ia.text(Ba($a(cb),Na));Ia.call(D.fill,Ma({delta:$a(cb)}))}}).each("end",function(){ua();aa&&aa()}).each("interrupt",function(){ua();aa&&aa()}):ua();ca=l(Ba(za(M[0]),ja),R.delta.font,X,J);return Oa}var R=M[0].trace,O=E.numbersX,T=E.numbersY,V=R.align||"center",X=u[V],ba=E.transitionOpts,aa=E.onComplete,ka=d.ensureSingle(N,"g","numbers"),
ha,ca;N=[];R._hasNumber&&N.push("number");R._hasDelta&&(N.push("delta"),"left"===R.delta.position&&N.reverse());N=ka.selectAll("text").data(N);N.enter().append("text");N.attr("text-anchor",function(){return X}).attr("class",function(ua){return ua}).attr("x",null).attr("y",null).attr("dx",null).attr("dy",null);N.exit().remove();var sa=R.mode+R.align;if(R._hasDelta){var ma=S();sa+=R.delta.position+R.delta.font.size+R.delta.font.family+R.delta.valueformat;sa+=R.delta.increasing.symbol+R.delta.decreasing.symbol;
var ra=ca}R._hasNumber&&(Q(),sa+=R.number.font.size+R.number.font.family+R.number.valueformat+R.number.suffix+R.number.prefix,ra=ha);if(R._hasDelta&&R._hasNumber){N=[(ha.left+ha.right)/2,(ha.top+ha.bottom)/2];var qa=[(ca.left+ca.right)/2,(ca.top+ca.bottom)/2],Y=.75*R.delta.font.size;if("left"===R.delta.position){var pa=c(R,"deltaPos",0,-1*(ha.width*B[R.align]+ca.width*(1-B[R.align])+Y),sa,Math.min);var oa=N[1]-qa[1];ra={width:ha.width+ca.width+Y,height:Math.max(ha.height,ca.height),left:ca.left+pa,
right:ha.right,top:Math.min(ha.top,ca.top+oa),bottom:Math.max(ha.bottom,ca.bottom+oa)}}"right"===R.delta.position&&(pa=c(R,"deltaPos",0,ha.width*(1-B[R.align])+ca.width*B[R.align]+Y,sa,Math.max),oa=N[1]-qa[1],ra={width:ha.width+ca.width+Y,height:Math.max(ha.height,ca.height),left:ha.left,right:ca.right+pa,top:Math.min(ha.top,ca.top+oa),bottom:Math.max(ha.bottom,ca.bottom+oa)});"bottom"===R.delta.position&&(pa=null,oa=ca.height,ra={width:Math.max(ha.width,ca.width),height:ha.height+ca.height,left:Math.min(ha.left,
ca.left),right:Math.max(ha.right,ca.right),top:ha.bottom-ha.height,bottom:ha.bottom+ca.height});"top"===R.delta.position&&(pa=null,oa=ha.top,ra={width:Math.max(ha.width,ca.width),height:ha.height+ca.height,left:Math.min(ha.left,ca.left),right:Math.max(ha.right,ca.right),top:ha.bottom-ha.height-ca.height,bottom:ha.bottom});ma.attr({dx:pa,dy:oa})}(R._hasNumber||R._hasDelta)&&ka.attr("transform",function(){var ua=E.numbersScaler(ra);sa+=ua[2];ua=c(R,"numbersScale",1,ua[0],sa,Math.min);R._scaleNumbers||
(ua=1);var ya=R._isAngular?T-ua*ra.bottom:T-ua*(ra.top+ra.bottom)/2;R._numbersTop=ua*ra.top+ya;var ja=ra[V];"center"===V&&(ja=(ra.left+ra.right)/2);ja=O-ua*ja;ja=c(R,"numbersTranslate",0,ja,sa,Math.max);return e(ja,ya)+" scale("+ua+")"})}function f(J){J.each(function(N){D.stroke(g.select(this),N.line.color)}).each(function(N){D.fill(g.select(this),N.color)}).style("stroke-width",function(N){return N.line.width})}function b(J,N,M){return function(){var E=g.interpolate(N,M);return function(L){return J.endAngle(E(L))()}}}
function k(J,N,M){function E(S,R){return d.coerce(L,Q,F,S,R)}J=J._fullLayout;var L=d.extendFlat({type:"linear",ticks:"outside",range:M,showline:!0},N),Q={type:"linear",_id:"x"+N._id};N={letter:"x",font:J.font,noHover:!0,noTickson:!0};A(L,Q,E,N,J);z(L,Q,E,N);return Q}function e(J,N){return"translate("+J+","+N+")"}function h(J,N,M){return[Math.min(N/J.width,M/J.height),J,N+"x"+M]}function l(J,N,M,E){var L=document.createElementNS("http://www.w3.org/2000/svg","text");L=g.select(L);L.text(J).attr("x",
0).attr("y",0).attr("text-anchor",M).attr("data-unformatted",J).call(x.convertToTspans,E).call(t.font,N);return t.bBox(L.node())}function c(J,N,M,E,L,Q){N="_cache"+N;J[N]&&J[N].key===L||(J[N]={key:L,value:M});M=d.aggNums(Q,null,[J[N].value,E],2);return J[N].value=M}var g=a("d3"),d=a("../../lib"),p=d.rad2deg,r=a("../../constants/alignment").MID_SHIFT,t=a("../../components/drawing"),w=a("./constants"),x=a("../../lib/svg_text_utils"),y=a("../../plots/cartesian/axes"),A=a("../../plots/cartesian/axis_defaults"),
z=a("../../plots/cartesian/position_defaults"),F=a("../../plots/cartesian/layout_attributes"),D=a("../../components/color"),u={left:"start",center:"middle",right:"end"},B={left:0,center:.5,right:1},I=/[yzafpnµmkMGTPEZY]/;G.exports=function(J,N,M,E){var L=J._fullLayout,Q;M&&0<M.duration&&E&&(Q=E());d.makeTraceGroups(L._indicatorlayer,N,"trace").each(function(S){var R=S[0].trace,O=g.select(this),T=R._hasGauge,V=R._isAngular,X=R._isBullet,ba=R.domain,aa={w:L._size.w*(ba.x[1]-ba.x[0]),h:L._size.h*(ba.y[1]-
ba.y[0]),l:L._size.l+L._size.w*ba.x[0],r:L._size.r+L._size.w*(1-ba.x[1]),t:L._size.t+L._size.h*(1-ba.y[1]),b:L._size.b+L._size.h*ba.y[0]},ka=aa.l+aa.w/2,ha=aa.t+aa.h/2,ca=Math.min(aa.w/2,aa.h),sa=w.innerRadius*ca;ba=R.align||"center";var ma=ha;if(T){if(V){var ra=ka;ma=ha+ca/2;var qa=function(ja){var za=.9*sa;return[za/Math.sqrt(ja.width/2*(ja.width/2)+ja.height*ja.height),ja,za]}}if(X){var Y=w.bulletPadding;ra=1-w.bulletNumberDomainSize+Y;ra=aa.l+(ra+(1-ra)*B[ba])*aa.w;qa=function(ja){return h(ja,
(w.bulletNumberDomainSize-Y)*aa.w,aa.h)}}}else ra=aa.l+B[ba]*aa.w,qa=function(ja){return h(ja,aa.w,aa.h)};m(J,O,S,{numbersX:ra,numbersY:ma,numbersScaler:qa,transitionOpts:M,onComplete:Q});if(T){var pa={range:R.gauge.axis.range,color:R.gauge.bgcolor,line:{color:R.gauge.bordercolor,width:0},thickness:1};var oa={range:R.gauge.axis.range,color:"rgba(0, 0, 0, 0)",line:{color:R.gauge.bordercolor,width:R.gauge.borderwidth},thickness:1}}ra=O.selectAll("g.angular").data(V?S:[]);ra.exit().remove();var ua=O.selectAll("g.angularaxis").data(V?
S:[]);ua.exit().remove();V&&n(J,O,S,{radius:ca,innerRadius:sa,gauge:ra,layer:ua,size:aa,gaugeBg:pa,gaugeOutline:oa,transitionOpts:M,onComplete:Q});ra=O.selectAll("g.bullet").data(X?S:[]);ra.exit().remove();qa=O.selectAll("g.bulletaxis").data(X?S:[]);qa.exit().remove();X&&q(J,O,S,{gauge:ra,layer:qa,size:aa,gaugeBg:pa,gaugeOutline:oa,transitionOpts:M,onComplete:Q});var ya=O.selectAll("text.title").data(S);ya.exit().remove();ya.enter().append("text").classed("title",!0);ya.attr("text-anchor",function(){return X?
u.right:u[R.title.align]}).text(R.title.text).call(t.font,R.title.font).call(x.convertToTspans,J);ya.attr("transform",function(){var ja=aa.l+aa.w*B[R.title.align],za,Ba=w.titlePadding,Ma=t.bBox(ya.node());T?(V&&(za=R.gauge.axis.visible?t.bBox(ua.node()).top-Ba-Ma.bottom:aa.t+aa.h/2-ca/2-Ma.bottom-Ba),X&&(za=ma-(Ma.top+Ma.bottom)/2,ja=aa.l-w.bulletPadding*aa.w)):za=R._numbersTop-Ba-Ma.bottom;return e(ja,za)})})}},{"../../components/color":615,"../../components/drawing":637,"../../constants/alignment":717,
"../../lib":750,"../../lib/svg_text_utils":774,"../../plots/cartesian/axes":799,"../../plots/cartesian/axis_defaults":801,"../../plots/cartesian/layout_attributes":813,"../../plots/cartesian/position_defaults":816,"./constants":1090,d3:169}],1094:[function(a,G,C){function q(e){return{show:{valType:"boolean",dflt:!1},locations:{valType:"data_array",dflt:[]},fill:{valType:"number",min:0,max:1,dflt:1}}}function n(e){return{show:{valType:"boolean",dflt:!0},fill:{valType:"number",min:0,max:1,dflt:1}}}
C=a("../../components/colorscale/attributes");var m=a("../../plots/template_attributes").hovertemplateAttrs,f=a("../mesh3d/attributes"),b=a("../../plots/attributes"),k=a("../../lib/extend").extendFlat;a=a("../../plot_api/edit_types").overrideAll;G=G.exports=a(k({x:{valType:"data_array"},y:{valType:"data_array"},z:{valType:"data_array"},value:{valType:"data_array"},isomin:{valType:"number"},isomax:{valType:"number"},surface:{show:{valType:"boolean",dflt:!0},count:{valType:"integer",dflt:2,min:1},fill:{valType:"number",
min:0,max:1,dflt:1},pattern:{valType:"flaglist",flags:["A","B","C","D","E"],extras:["all","odd","even"],dflt:"all"}},spaceframe:{show:{valType:"boolean",dflt:!1},fill:{valType:"number",min:0,max:1,dflt:.15}},slices:{x:q("x"),y:q("y"),z:q("z")},caps:{x:n("x"),y:n("y"),z:n("z")},text:{valType:"string",dflt:"",arrayOk:!0},hovertext:{valType:"string",dflt:"",arrayOk:!0},hovertemplate:m(),showlegend:k({},b.showlegend,{dflt:!1})},C("",{colorAttr:"`value`",showScaleDflt:!0,editTypeOverride:"calc"}),{opacity:f.opacity,
lightposition:f.lightposition,lighting:f.lighting,flatshading:f.flatshading,contour:f.contour,hoverinfo:k({},b.hoverinfo)}),"calc","nested");G.flatshading.dflt=!0;G.lighting.facenormalsepsilon.dflt=0;G.x.editType=G.y.editType=G.z.editType=G.value.editType="calc+clearAxisTypes";G.transforms=void 0},{"../../components/colorscale/attributes":622,"../../lib/extend":740,"../../plot_api/edit_types":781,"../../plots/attributes":795,"../../plots/template_attributes":877,"../mesh3d/attributes":1099}],1095:[function(a,
G,C){var q=a("../../components/colorscale/calc"),n=a("../streamtube/calc").processGrid,m=a("../streamtube/calc").filter;G.exports=function(f,b){b._len=Math.min(b.x.length,b.y.length,b.z.length,b.value.length);b._x=m(b.x,b._len);b._y=m(b.y,b._len);b._z=m(b.z,b._len);b._value=m(b.value,b._len);var k=n(b);b._gridFill=k.fill;b._Xs=k.Xs;b._Ys=k.Ys;b._Zs=k.Zs;b._len=k.len;k=Infinity;for(var e=-Infinity,h=0;h<b._len;h++){var l=b._value[h];k=Math.min(k,l);e=Math.max(e,l)}b._minValues=k;b._maxValues=e;b._vMin=
void 0===b.isomin||null===b.isomin?k:b.isomin;b._vMax=void 0===b.isomax||null===b.isomin?e:b.isomax;q(f,b,{vals:[b._vMin,b._vMax],containerStr:"",cLetter:"c"})}},{"../../components/colorscale/calc":623,"../streamtube/calc":1266}],1096:[function(a,G,C){function q(c,g,d){this.scene=c;this.uid=d;this.mesh=g;this.name="";this.data=null;this.showContour=!1}function n(c){function g(){Ia=[];Pa=[];Fa=[];Na=[];ma=sa=0}function d(cb,mb,Ka,Ua){Ia.push(cb);Pa.push(mb);Fa.push(Ka);Na.push(Ua);sa++;return sa-1}
function p(cb,mb,Ka){for(var Ua=[],Ea=0;Ea<cb.length;Ea++)Ua[Ea]=cb[Ea]*(1-Ka)+Ka*mb[Ea];return Ua}function r(cb,mb){return"all"===cb||null===cb?!0:-1<cb.indexOf(mb)}function t(cb,mb,Ka){ma=sa;var Ua=[mb];var Ea=[Ka];if(1<=$a)Ua=[mb],Ea=[Ka];else if(0<$a){var Ya=Ka;Ua=mb[0];Ea=mb[1];mb=mb[2];for(var ab=[],Wa=0;Wa<Ua.length;Wa++)ab[Wa]=(Ua[Wa]+Ea[Wa]+mb[Wa])/3;var Ja=Math.sqrt(1-$a);Wa=p(ab,Ua,Ja);Ka=p(ab,Ea,Ja);var Sa=p(ab,mb,Ja);ab=Ya[0];Ja=Ya[1];Ya=Ya[2];mb=[[Ua,Ea,Ka],[Ka,Wa,Ua],[Ea,mb,Sa],[Sa,
Ka,Ea],[mb,Ua,Wa],[Wa,Sa,mb]];Ea=[[ab,Ja,-1],[-1,-1,ab],[Ja,Ya,-1],[-1,-1,Ja],[Ya,ab,-1],[-1,-1,Ya]];Ua=mb}for(Ya=0;Ya<Ua.length;Ya++){mb=Ua[Ya];Ka=Ea[Ya];Wa=[];for(ab=0;3>ab;ab++){var fb=mb[ab][0],nb=mb[ab][1];Sa=mb[ab][2];Ja=mb[ab][3];if(-1<Ka[ab])var Ha=Ka[ab];else a:{Ha=Na.length;for(var Ca=ma;Ca<Ha;Ca++)if(fb===Ia[Ca]&&nb===Pa[Ca]&&Sa===Fa[Ca]){Ha=Ca;break a}Ha=-1}-1<Ha?Wa[ab]=Ha:(Ha=Wa,Ca=ab,Ja=null===cb?Ja:cb,Ha[Ca]=d(fb,nb,Sa,Ja))}mb=Wa[1];Ka=Wa[2];c._meshI.push(Wa[0]);c._meshJ.push(mb);c._meshK.push(Ka);
ca++}}function w(cb,mb,Ka){var Ua=function(Ea,Ya,ab){t(cb,[mb[Ea],mb[Ya],mb[ab]],[Ka[Ea],Ka[Ya],Ka[ab]])};Ua(0,1,2);Ua(2,3,0)}function x(cb,mb,Ka){var Ua=function(Ea,Ya,ab){t(cb,[mb[Ea],mb[Ya],mb[ab]],[Ka[Ea],Ka[Ya],Ka[ab]])};Ua(0,1,2);Ua(3,0,1);Ua(2,3,0);Ua(1,2,3)}function y(cb,mb,Ka,Ua){var Ea=cb[3];Ea<Ka&&(Ea=Ka);Ea>Ua&&(Ea=Ua);Ka=(cb[3]-Ea)/(cb[3]-mb[3]+1E-9);Ua=[];for(Ea=0;4>Ea;Ea++)Ua[Ea]=(1-Ka)*cb[Ea]+Ka*mb[Ea];return Ua}function A(cb,mb,Ka){return cb>=mb&&cb<=Ka}function z(cb){var mb=.001*
(Oa-Ma);return cb>=Ma-mb&&cb<=Oa+mb}function F(cb){for(var mb=[],Ka=0;4>Ka;Ka++){var Ua=cb[Ka];mb.push([c._x[Ua],c._y[Ua],c._z[Ua],c._value[Ua]])}return mb}function D(cb,mb,Ka,Ua,Ea,Ya){Ya||(Ya=1);Ka=[-1,-1,-1];var ab=!1,Wa=[A(mb[0][3],Ua,Ea),A(mb[1][3],Ua,Ea),A(mb[2][3],Ua,Ea)];if(!Wa[0]&&!Wa[1]&&!Wa[2])return!1;var Ja=function(fb,nb,Ha){return z(nb[0][3])&&z(nb[1][3])&&z(nb[2][3])?(t(fb,nb,Ha),!0):3>Ya?D(fb,nb,Ha,Ma,Oa,++Ya):!1};if(Wa[0]&&Wa[1]&&Wa[2])return Ja(cb,mb,Ka)||ab;var Sa=!1;[[0,1,2],
[2,0,1],[1,2,0]].forEach(function(fb){if(Wa[fb[0]]&&Wa[fb[1]]&&!Wa[fb[2]]){var nb=mb[fb[0]],Ha=mb[fb[1]],Ca=mb[fb[2]],Qa=y(Ca,nb,Ua,Ea);Ca=y(Ca,Ha,Ua,Ea);ab=Ja(cb,[Ca,Qa,nb],[-1,-1,Ka[fb[0]]])||ab;ab=Ja(cb,[nb,Ha,Ca],[Ka[fb[0]],Ka[fb[1]],-1])||ab;Sa=!0}});if(Sa)return ab;[[0,1,2],[1,2,0],[2,0,1]].forEach(function(fb){if(Wa[fb[0]]&&!Wa[fb[1]]&&!Wa[fb[2]]){var nb=mb[fb[0]],Ha=mb[fb[2]],Ca=y(mb[fb[1]],nb,Ua,Ea);Ha=y(Ha,nb,Ua,Ea);ab=Ja(cb,[Ha,Ca,nb],[-1,-1,Ka[fb[0]]])||ab;Sa=!0}});return ab}function u(cb,
mb,Ka,Ua){var Ea=!1,Ya=F(mb),ab=[A(Ya[0][3],Ka,Ua),A(Ya[1][3],Ka,Ua),A(Ya[2][3],Ka,Ua),A(Ya[3][3],Ka,Ua)];if(!(ab[0]||ab[1]||ab[2]||ab[3]))return Ea;if(ab[0]&&ab[1]&&ab[2]&&ab[3])return ha&&(Ea=x(cb,Ya,mb)||Ea),Ea;var Wa=!1;[[0,1,2,3],[3,0,1,2],[2,3,0,1],[1,2,3,0]].forEach(function(Ja){if(ab[Ja[0]]&&ab[Ja[1]]&&ab[Ja[2]]&&!ab[Ja[3]]){var Sa=Ya[Ja[0]],fb=Ya[Ja[1]],nb=Ya[Ja[2]],Ha=Ya[Ja[3]];ha?Ea=t(cb,[Sa,fb,nb],[mb[Ja[0]],mb[Ja[1]],mb[Ja[2]]])||Ea:(Ja=y(Ha,Sa,Ka,Ua),fb=y(Ha,fb,Ka,Ua),nb=y(Ha,nb,Ka,
Ua),Ea=t(null,[Ja,fb,nb],[-1,-1,-1])||Ea);Wa=!0}});if(Wa)return Ea;[[0,1,2,3],[1,2,3,0],[2,3,0,1],[3,0,1,2],[0,2,3,1],[1,3,2,0]].forEach(function(Ja){if(ab[Ja[0]]&&ab[Ja[1]]&&!ab[Ja[2]]&&!ab[Ja[3]]){var Sa=Ya[Ja[0]],fb=Ya[Ja[1]],nb=Ya[Ja[2]],Ha=Ya[Ja[3]],Ca=y(nb,Sa,Ka,Ua);nb=y(nb,fb,Ka,Ua);var Qa=y(Ha,fb,Ka,Ua);Ha=y(Ha,Sa,Ka,Ua);ha?(Ea=t(cb,[Sa,Ha,Ca],[mb[Ja[0]],-1,-1])||Ea,Ea=t(cb,[fb,nb,Qa],[mb[Ja[1]],-1,-1])||Ea):Ea=w(null,[Ca,nb,Qa,Ha],[-1,-1,-1,-1])||Ea;Wa=!0}});if(Wa)return Ea;[[0,1,2,3],[1,
2,3,0],[2,3,0,1],[3,0,1,2]].forEach(function(Ja){if(ab[Ja[0]]&&!ab[Ja[1]]&&!ab[Ja[2]]&&!ab[Ja[3]]){var Sa=Ya[Ja[0]],fb=Ya[Ja[2]],nb=Ya[Ja[3]],Ha=y(Ya[Ja[1]],Sa,Ka,Ua);fb=y(fb,Sa,Ka,Ua);nb=y(nb,Sa,Ka,Ua);ha?(Ea=t(cb,[Sa,Ha,fb],[mb[Ja[0]],-1,-1])||Ea,Ea=t(cb,[Sa,fb,nb],[mb[Ja[0]],-1,-1])||Ea,Ea=t(cb,[Sa,nb,Ha],[mb[Ja[0]],-1,-1])||Ea):Ea=t(null,[Ha,fb,nb],[-1,-1,-1])||Ea;Wa=!0}});return Ea}function B(cb,mb,Ka,Ua,Ea,Ya,ab,Wa,Ja,Sa,fb){var nb=!1;ka&&(r(cb,"A")&&(nb=u(null,[mb,Ka,Ua,Ya],Sa,fb)||nb),r(cb,
"B")&&(nb=u(null,[Ka,Ua,Ea,Ja],Sa,fb)||nb),r(cb,"C")&&(nb=u(null,[Ka,Ya,ab,Ja],Sa,fb)||nb),r(cb,"D")&&(nb=u(null,[Ua,Ya,Wa,Ja],Sa,fb)||nb),r(cb,"E")&&(nb=u(null,[Ka,Ua,Ya,Ja],Sa,fb)||nb));ha&&(nb=u(cb,[Ka,Ua,Ya,Ja],Sa,fb)||nb);return nb}function I(cb,mb,Ka,Ua,Ea,Ya,ab,Wa){return[!0===Wa[0]?!0:D(cb,F([mb,Ka,Ua]),[mb,Ka,Ua],Ya,ab),!0===Wa[1]?!0:D(cb,F([Ua,Ea,mb]),[Ua,Ea,mb],Ya,ab)]}function J(cb,mb,Ka,Ua,Ea,Ya,ab,Wa,Ja){return Wa?I(cb,mb,Ka,Ea,Ua,Ya,ab,Ja):I(cb,Ka,Ea,Ua,mb,Ya,ab,Ja)}function N(cb,mb,
Ka,Ua,Ea,Ya,ab){var Wa=!1,Ja=function(){Wa=D(cb,[nb,Ha,Ca],[-1,-1,-1],Ea,Ya)||Wa;Wa=D(cb,[Ca,Qa,nb],[-1,-1,-1],Ea,Ya)||Wa},Sa=ab[0],fb=ab[1];ab=ab[2];if(Sa){var nb=p(F([ja(mb,Ka-0,Ua-0)])[0],F([ja(mb-1,Ka-0,Ua-0)])[0],Sa);var Ha=p(F([ja(mb,Ka-0,Ua-1)])[0],F([ja(mb-1,Ka-0,Ua-1)])[0],Sa);var Ca=p(F([ja(mb,Ka-1,Ua-1)])[0],F([ja(mb-1,Ka-1,Ua-1)])[0],Sa);var Qa=p(F([ja(mb,Ka-1,Ua-0)])[0],F([ja(mb-1,Ka-1,Ua-0)])[0],Sa);Ja()}fb&&(nb=p(F([ja(mb-0,Ka,Ua-0)])[0],F([ja(mb-0,Ka-1,Ua-0)])[0],fb),Ha=p(F([ja(mb-
0,Ka,Ua-1)])[0],F([ja(mb-0,Ka-1,Ua-1)])[0],fb),Ca=p(F([ja(mb-1,Ka,Ua-1)])[0],F([ja(mb-1,Ka-1,Ua-1)])[0],fb),Qa=p(F([ja(mb-1,Ka,Ua-0)])[0],F([ja(mb-1,Ka-1,Ua-0)])[0],fb),Ja());ab&&(nb=p(F([ja(mb-0,Ka-0,Ua)])[0],F([ja(mb-0,Ka-0,Ua-1)])[0],ab),Ha=p(F([ja(mb-0,Ka-1,Ua)])[0],F([ja(mb-0,Ka-1,Ua-1)])[0],ab),Ca=p(F([ja(mb-1,Ka-1,Ua)])[0],F([ja(mb-1,Ka-1,Ua-1)])[0],ab),Qa=p(F([ja(mb-1,Ka-0,Ua)])[0],F([ja(mb-1,Ka-0,Ua-1)])[0],ab),Ja());return Wa}function M(cb,mb,Ka,Ua,Ea){for(var Ya=[],ab=0,Wa=0;Wa<mb.length;Wa++)for(var Ja=
mb[Wa],Sa=1;Sa<ua;Sa++)for(var fb=1;fb<oa;fb++)Ya.push(J(cb,ja(Ja,fb-1,Sa-1),ja(Ja,fb-1,Sa),ja(Ja,fb,Sa-1),ja(Ja,fb,Sa),Ka,Ua,(Ja+fb+Sa)%2,Ea&&Ea[ab]?Ea[ab]:[])),ab++;return Ya}function E(cb,mb,Ka,Ua,Ea){for(var Ya=[],ab=0,Wa=0;Wa<mb.length;Wa++)for(var Ja=mb[Wa],Sa=1;Sa<pa;Sa++)for(var fb=1;fb<ua;fb++)Ya.push(J(cb,ja(Sa-1,Ja,fb-1),ja(Sa,Ja,fb-1),ja(Sa-1,Ja,fb),ja(Sa,Ja,fb),Ka,Ua,(Sa+Ja+fb)%2,Ea&&Ea[ab]?Ea[ab]:[])),ab++;return Ya}function L(cb,mb,Ka,Ua,Ea){for(var Ya=[],ab=0,Wa=0;Wa<mb.length;Wa++)for(var Ja=
mb[Wa],Sa=1;Sa<oa;Sa++)for(var fb=1;fb<pa;fb++)Ya.push(J(cb,ja(fb-1,Sa-1,Ja),ja(fb-1,Sa,Ja),ja(fb,Sa-1,Ja),ja(fb,Sa,Ja),Ka,Ua,(fb+Sa+Ja)%2,Ea&&Ea[ab]?Ea[ab]:[])),ab++;return Ya}function Q(cb,mb,Ka){for(var Ua=1;Ua<ua;Ua++)for(var Ea=1;Ea<oa;Ea++)for(var Ya=1;Ya<pa;Ya++){var ab=cb,Wa=ja(Ya-1,Ea-1,Ua-1),Ja=ja(Ya-1,Ea-1,Ua),Sa=ja(Ya-1,Ea,Ua-1),fb=ja(Ya-1,Ea,Ua),nb=ja(Ya,Ea-1,Ua-1),Ha=ja(Ya,Ea-1,Ua),Ca=ja(Ya,Ea,Ua-1),Qa=ja(Ya,Ea,Ua),gb=mb,Va=Ka,db=ab;(Ya+Ea+Ua)%2?(ka&&"even"===ab&&(db=null),B(db,Wa,Ja,
Sa,fb,nb,Ha,Ca,Qa,gb,Va)):(ka&&"odd"===ab&&(db=null),B(db,Qa,Ca,Ha,nb,fb,Sa,Ja,Wa,gb,Va))}}function S(cb,mb,Ka){ha=!0;Q(cb,mb,Ka);ha=!1}function R(cb,mb,Ka){ka=!0;Q(cb,mb,Ka);ka=!1}function O(cb,mb){for(var Ka=[];cb<mb;cb++)Ka.push(cb);return Ka}function T(){for(var cb=0;cb<pa;cb++)for(var mb=0;mb<oa;mb++)for(var Ka=0;Ka<ua;Ka++){var Ua=ja(cb,mb,Ka);d(c._x[Ua],c._y[Ua],c._z[Ua],c._value[Ua])}}c._meshI=[];c._meshJ=[];c._meshK=[];var V=c.surface.show,X=c.spaceframe.show,ba=c.surface.fill,aa=c.spaceframe.fill,
ka=!1,ha=!1,ca=0,sa,ma,ra=c._Xs,qa=c._Ys,Y=c._Zs,pa=ra.length,oa=qa.length,ua=Y.length,ya=l.indexOf(c._gridFill.replace(/-/g,"").replace(/\+/g,"")),ja=function(cb,mb,Ka){switch(ya){case 5:return Ka+ua*mb+ua*oa*cb;case 4:return Ka+ua*cb+ua*pa*mb;case 3:return mb+oa*Ka+oa*ua*cb;case 2:return mb+oa*cb+oa*pa*Ka;case 1:return cb+pa*Ka+pa*ua*mb;default:return cb+pa*mb+pa*oa*Ka}},za=c._minValues,Ba=c._maxValues,Ma=c._vMin,Oa=c._vMax,Ia,Pa,Fa,Na,$a;(function(){g();T();X&&aa&&($a=aa,S(null,Ma,Oa));if(V&&ba){$a=
ba;for(var cb=c.surface.pattern,mb=c.surface.count,Ka=0;Ka<mb;Ka++){var Ua=1===mb?.5:Ka/(mb-1);Ua=(1-Ua)*Ma+Ua*Oa;Ua=Math.abs(Ua-za)>Math.abs(Ua-Ba)?[za,Ua]:[Ua,Ba];R(cb,Ua[0],Ua[1])}}var Ea=[[Math.min(Ma,Ba),Math.max(Ma,Ba)],[Math.min(za,Oa),Math.max(za,Oa)]];["x","y","z"].forEach(function(Ya){for(var ab=[],Wa=0;Wa<Ea.length;Wa++){var Ja=0,Sa=Ea[Wa][0],fb=Ea[Wa][1],nb=c.slices[Ya];if(nb.show&&nb.fill){$a=nb.fill;var Ha=[],Ca=[],Qa=[];if(nb.locations.length)for(var gb=0;gb<nb.locations.length;gb++){var Va=
h(nb.locations[gb],"x"===Ya?ra:"y"===Ya?qa:Y);0===Va.distRatio?Ha.push(Va.id):0<Va.id&&(Ca.push(Va.id),"x"===Ya?Qa.push([Va.distRatio,0,0]):"y"===Ya?Qa.push([0,Va.distRatio,0]):Qa.push([0,0,Va.distRatio]))}else Ha="x"===Ya?O(1,pa-1):"y"===Ya?O(1,oa-1):O(1,ua-1);if(0<Ca.length){if("x"===Ya){nb=Ja;gb=Sa;Va=fb;for(var db=ab[Ja],qb=[],Kb=0,Ob=0;Ob<Ca.length;Ob++)for(var cc=Ca[Ob],kc=1;kc<ua;kc++)for(var qc=1;qc<oa;qc++)qb.push(N(null,cc,qc,kc,gb,Va,Qa[Ob],db&&db[Kb]?db[Kb]:[])),Kb++;ab[nb]=qb}else if("y"===
Ya){nb=Ja;gb=Sa;Va=fb;db=ab[Ja];qb=[];for(Ob=Kb=0;Ob<Ca.length;Ob++)for(cc=Ca[Ob],kc=1;kc<pa;kc++)for(qc=1;qc<ua;qc++)qb.push(N(null,kc,cc,qc,gb,Va,Qa[Ob],db&&db[Kb]?db[Kb]:[])),Kb++;ab[nb]=qb}else{nb=Ja;gb=Sa;Va=fb;db=ab[Ja];qb=[];for(Ob=Kb=0;Ob<Ca.length;Ob++)for(cc=Ca[Ob],kc=1;kc<oa;kc++)for(qc=1;qc<pa;qc++)qb.push(N(null,qc,kc,cc,gb,Va,Qa[Ob],db&&db[Kb]?db[Kb]:[])),Kb++;ab[nb]=qb}Ja++}0<Ha.length&&(ab[Ja]="x"===Ya?M(null,Ha,Sa,fb,ab[Ja]):"y"===Ya?E(null,Ha,Sa,fb,ab[Ja]):L(null,Ha,Sa,fb,ab[Ja]),
Ja++)}Ha=c.caps[Ya];Ha.show&&Ha.fill&&($a=Ha.fill,ab[Ja]="x"===Ya?M(null,[0,pa-1],Sa,fb,ab[Ja]):"y"===Ya?E(null,[0,oa-1],Sa,fb,ab[Ja]):L(null,[0,ua-1],Sa,fb,ab[Ja]))}});0===ca&&g();c._meshX=Ia;c._meshY=Pa;c._meshZ=Fa;c._meshIntensity=Na;c._Xs=ra;c._Ys=qa;c._Zs=Y})();return c}var m=a("gl-mesh3d"),f=a("../../lib/gl_format_color").parseColorScale,b=a("../../lib/str2rgbarray"),k=a("../../components/colorscale").extractOpts,e=a("../../plots/gl3d/zip3"),h=function(c,g){for(var d=g.length-1;0<d;d--){var p=
Math.min(g[d],g[d-1]),r=Math.max(g[d],g[d-1]);if(r>p&&p<c&&c<=r)return{id:d,distRatio:(r-c)/(r-p)}}return{id:0,distRatio:0}};a=q.prototype;a.handlePick=function(c){if(c.object===this.mesh){var g=c.data.index,d=this.data._meshY[g],p=this.data._meshZ[g],r=this.data._Ys.length,t=this.data._Zs.length;g=h(this.data._meshX[g],this.data._Xs).id;d=h(d,this.data._Ys).id;p=h(p,this.data._Zs).id;r=c.index=p+t*d+t*r*g;c.traceCoordinate=[this.data._meshX[r],this.data._meshY[r],this.data._meshZ[r],this.data._value[r]];
t=this.data.hovertext||this.data.text;Array.isArray(t)&&void 0!==t[r]?c.textLabel=t[r]:t&&(c.textLabel=t);return!0}};a.update=function(c){function g(r,t,w,x){return t.map(function(y){return r.d2l(y,0,x)*w})}var d=this.scene,p=d.fullSceneLayout;this.data=n(c);d=e(g(p.xaxis,c._meshX,d.dataScale[0],c.xcalendar),g(p.yaxis,c._meshY,d.dataScale[1],c.ycalendar),g(p.zaxis,c._meshZ,d.dataScale[2],c.zcalendar));p=e(c._meshI,c._meshJ,c._meshK);d={positions:d,cells:p,lightPosition:[c.lightposition.x,c.lightposition.y,
c.lightposition.z],ambient:c.lighting.ambient,diffuse:c.lighting.diffuse,specular:c.lighting.specular,roughness:c.lighting.roughness,fresnel:c.lighting.fresnel,vertexNormalsEpsilon:c.lighting.vertexnormalsepsilon,faceNormalsEpsilon:c.lighting.facenormalsepsilon,opacity:c.opacity,contourEnable:c.contour.show,contourColor:b(c.contour.color).slice(0,3),contourWidth:c.contour.width,useFacetNormals:c.flatshading};p=k(c);d.vertexIntensity=c._meshIntensity;d.vertexIntensityBounds=[p.min,p.max];d.colormap=
f(c);this.mesh.update(d)};a.dispose=function(){this.scene.glplot.remove(this.mesh);this.mesh.dispose()};var l="xyz xzy yxz yzx zxy zyx".split(" ");G.exports={findNearestOnAxis:h,generateIsoMeshes:n,createIsosurfaceTrace:function(c,g){var d=m({gl:c.glplot.gl}),p=new q(c,d,g.uid);d._trace=p;p.update(g);c.glplot.add(d);return p}}},{"../../components/colorscale":627,"../../lib/gl_format_color":746,"../../lib/str2rgbarray":773,"../../plots/gl3d/zip3":852,"gl-mesh3d":292}],1097:[function(a,G,C){function q(k,
e,h,l,c){h=c("isomin");var g=c("isomax");void 0!==g&&null!==g&&void 0!==h&&null!==h&&h>g&&(e.isomin=null,e.isomax=null);h=c("x");g=c("y");var d=c("z"),p=c("value");h&&h.length&&g&&g.length&&d&&d.length&&p&&p.length?(m.getComponentMethod("calendars","handleTraceDefaults")(k,e,["x","y","z"],l),["x","y","z"].forEach(function(r){var t="caps."+r;c(t+".show")&&c(t+".fill");r="slices."+r;c(r+".show")&&(c(r+".fill"),c(r+".locations"))}),c("spaceframe.show")&&c("spaceframe.fill"),c("surface.show")&&(c("surface.count"),
c("surface.fill"),c("surface.pattern")),c("contour.show")&&(c("contour.color"),c("contour.width")),"text hovertext hovertemplate lighting.ambient lighting.diffuse lighting.specular lighting.roughness lighting.fresnel lighting.vertexnormalsepsilon lighting.facenormalsepsilon lightposition.x lightposition.y lightposition.z flatshading opacity".split(" ").forEach(function(r){c(r)}),b(k,e,l,c,{prefix:"",cLetter:"c"}),e._length=null):e.visible=!1}var n=a("../../lib"),m=a("../../registry"),f=a("./attributes"),
b=a("../../components/colorscale/defaults");G.exports={supplyDefaults:function(k,e,h,l){q(k,e,h,l,function(c,g){return n.coerce(k,e,f,c,g)})},supplyIsoDefaults:q}},{"../../components/colorscale/defaults":625,"../../lib":750,"../../registry":882,"./attributes":1094}],1098:[function(a,G,C){G.exports={attributes:a("./attributes"),supplyDefaults:a("./defaults").supplyDefaults,calc:a("./calc"),colorbar:{min:"cmin",max:"cmax"},plot:a("./convert").createIsosurfaceTrace,moduleType:"trace",name:"isosurface",
basePlotModule:a("../../plots/gl3d"),categories:["gl3d","showLegend"],meta:{}}},{"../../plots/gl3d":841,"./attributes":1094,"./calc":1095,"./convert":1096,"./defaults":1097}],1099:[function(a,G,C){C=a("../../components/colorscale/attributes");var q=a("../../plots/template_attributes").hovertemplateAttrs,n=a("../surface/attributes"),m=a("../../plots/attributes");a=a("../../lib/extend").extendFlat;G.exports=a({x:{valType:"data_array",editType:"calc+clearAxisTypes"},y:{valType:"data_array",editType:"calc+clearAxisTypes"},
z:{valType:"data_array",editType:"calc+clearAxisTypes"},i:{valType:"data_array",editType:"calc"},j:{valType:"data_array",editType:"calc"},k:{valType:"data_array",editType:"calc"},text:{valType:"string",dflt:"",arrayOk:!0,editType:"calc"},hovertext:{valType:"string",dflt:"",arrayOk:!0,editType:"calc"},hovertemplate:q({editType:"calc"}),delaunayaxis:{valType:"enumerated",values:["x","y","z"],dflt:"z",editType:"calc"},alphahull:{valType:"number",dflt:-1,editType:"calc"},intensity:{valType:"data_array",
editType:"calc"},intensitymode:{valType:"enumerated",values:["vertex","cell"],dflt:"vertex",editType:"calc"},color:{valType:"color",editType:"calc"},vertexcolor:{valType:"data_array",editType:"calc"},facecolor:{valType:"data_array",editType:"calc"},transforms:void 0},C("",{colorAttr:"`intensity`",showScaleDflt:!0,editTypeOverride:"calc"}),{opacity:n.opacity,flatshading:{valType:"boolean",dflt:!1,editType:"calc"},contour:{show:a({},n.contours.x.show,{}),color:n.contours.x.color,width:n.contours.x.width,
editType:"calc"},lightposition:{x:a({},n.lightposition.x,{dflt:1E5}),y:a({},n.lightposition.y,{dflt:1E5}),z:a({},n.lightposition.z,{dflt:0}),editType:"calc"},lighting:a({vertexnormalsepsilon:{valType:"number",min:0,max:1,dflt:1E-12,editType:"calc"},facenormalsepsilon:{valType:"number",min:0,max:1,dflt:1E-6,editType:"calc"},editType:"calc"},n.lighting),hoverinfo:a({},m.hoverinfo,{editType:"calc"}),showlegend:a({},m.showlegend,{dflt:!1})})},{"../../components/colorscale/attributes":622,"../../lib/extend":740,
"../../plots/attributes":795,"../../plots/template_attributes":877,"../surface/attributes":1282}],1100:[function(a,G,C){var q=a("../../components/colorscale/calc");G.exports=function(n,m){m.intensity&&q(n,m,{vals:m.intensity,containerStr:"",cLetter:"c"})}},{"../../components/colorscale/calc":623}],1101:[function(a,G,C){function q(r,t,w){this.scene=r;this.uid=w;this.mesh=t;this.name="";this.color="#fff";this.data=null;this.showContour=!1}function n(r){for(var t=[],w=r.length,x=0;x<w;x++)t[x]=g(r[x]);
return t}function m(r,t,w,x){for(var y=[],A=t.length,z=0;z<A;z++)y[z]=r.d2l(t[z],0,x)*w;return y}function f(r){for(var t=[],w=r.length,x=0;x<w;x++)t[x]=Math.round(r[x]);return t}function b(r,t){for(var w=r.length,x=0;x<w;x++)if(-.5>=r[x]||r[x]>=t-.5)return!1;return!0}var k=a("gl-mesh3d"),e=a("delaunay-triangulate"),h=a("alpha-shape"),l=a("convex-hull"),c=a("../../lib/gl_format_color").parseColorScale,g=a("../../lib/str2rgbarray"),d=a("../../components/colorscale").extractOpts,p=a("../../plots/gl3d/zip3");
a=q.prototype;a.handlePick=function(r){if(r.object===this.mesh){var t=r.index=r.data.index;r.traceCoordinate=r.data._cellCenter?r.data.dataCoordinate:[this.data.x[t],this.data.y[t],this.data.z[t]];var w=this.data.hovertext||this.data.text;Array.isArray(w)&&void 0!==w[t]?r.textLabel=w[t]:w&&(r.textLabel=w);return!0}};a.update=function(r){var t=this.scene,w=t.fullSceneLayout;this.data=r;var x=r.x.length;t=p(m(w.xaxis,r.x,t.dataScale[0],r.xcalendar),m(w.yaxis,r.y,t.dataScale[1],r.ycalendar),m(w.zaxis,
r.z,t.dataScale[2],r.zcalendar));if(r.i&&r.j&&r.k){if(r.i.length!==r.j.length||r.j.length!==r.k.length||!b(r.i,x)||!b(r.j,x)||!b(r.k,x))return;x=p(f(r.i),f(r.j),f(r.k))}else if(0===r.alphahull)x=l(t);else if(0<r.alphahull)x=h(r.alphahull,t);else{x=["x","y","z"].indexOf(r.delaunayaxis);w=[];for(var y=t.length,A=0;A<y;A++)w[A]=[t[A][(x+1)%3],t[A][(x+2)%3]];x=e(w)}t={positions:t,cells:x,lightPosition:[r.lightposition.x,r.lightposition.y,r.lightposition.z],ambient:r.lighting.ambient,diffuse:r.lighting.diffuse,
specular:r.lighting.specular,roughness:r.lighting.roughness,fresnel:r.lighting.fresnel,vertexNormalsEpsilon:r.lighting.vertexnormalsepsilon,faceNormalsEpsilon:r.lighting.facenormalsepsilon,opacity:r.opacity,contourEnable:r.contour.show,contourColor:g(r.contour.color).slice(0,3),contourWidth:r.contour.width,useFacetNormals:r.flatshading};r.intensity?(x=d(r),this.color="#fff",w=r.intensitymode,t[w+"Intensity"]=r.intensity,t[w+"IntensityBounds"]=[x.min,x.max],t.colormap=c(r)):r.vertexcolor?(this.color=
r.vertexcolor[0],t.vertexColors=n(r.vertexcolor)):r.facecolor?(this.color=r.facecolor[0],t.cellColors=n(r.facecolor)):(this.color=r.color,t.meshColor=g(r.color));this.mesh.update(t)};a.dispose=function(){this.scene.glplot.remove(this.mesh);this.mesh.dispose()};G.exports=function(r,t){var w=k({gl:r.glplot.gl}),x=new q(r,w,t.uid);w._trace=x;x.update(t);r.glplot.add(w);return x}},{"../../components/colorscale":627,"../../lib/gl_format_color":746,"../../lib/str2rgbarray":773,"../../plots/gl3d/zip3":852,
"alpha-shape":69,"convex-hull":135,"delaunay-triangulate":171,"gl-mesh3d":292}],1102:[function(a,G,C){var q=a("../../registry"),n=a("../../lib"),m=a("../../components/colorscale/defaults"),f=a("./attributes");G.exports=function(b,k,e,h){function l(g,d){return n.coerce(b,k,f,g,d)}function c(g){var d=g.map(function(p){return(p=l(p))&&n.isArrayOrTypedArray(p)?p:null});return d.every(function(p){return p&&p.length===d[0].length})&&d}c(["x","y","z"])?(c(["i","j","k"]),(!k.i||k.j&&k.k)&&(!k.j||k.k&&k.i)&&
(!k.k||k.i&&k.j)?(q.getComponentMethod("calendars","handleTraceDefaults")(b,k,["x","y","z"],h),"lighting.ambient lighting.diffuse lighting.specular lighting.roughness lighting.fresnel lighting.vertexnormalsepsilon lighting.facenormalsepsilon lightposition.x lightposition.y lightposition.z flatshading alphahull delaunayaxis opacity".split(" ").forEach(function(g){l(g)}),l("contour.show")&&(l("contour.color"),l("contour.width")),"intensity"in b?(l("intensity"),l("intensitymode"),m(b,k,h,l,{prefix:"",
cLetter:"c"})):(k.showscale=!1,"facecolor"in b?l("facecolor"):"vertexcolor"in b?l("vertexcolor"):l("color",e)),l("text"),l("hovertext"),l("hovertemplate"),k._length=null):k.visible=!1):k.visible=!1}},{"../../components/colorscale/defaults":625,"../../lib":750,"../../registry":882,"./attributes":1099}],1103:[function(a,G,C){G.exports={attributes:a("./attributes"),supplyDefaults:a("./defaults"),calc:a("./calc"),colorbar:{min:"cmin",max:"cmax"},plot:a("./convert"),moduleType:"trace",name:"mesh3d",basePlotModule:a("../../plots/gl3d"),
categories:["gl3d","showLegend"],meta:{}}},{"../../plots/gl3d":841,"./attributes":1099,"./calc":1100,"./convert":1101,"./defaults":1102}],1104:[function(a,G,C){function q(e){return{line:{color:n({},k.color,{dflt:e}),width:k.width,dash:m,editType:"style"},editType:"style"}}var n=a("../../lib").extendFlat;C=a("../scatter/attributes");var m=a("../../components/drawing/attributes").dash,f=a("../../components/fx/attributes"),b=a("../../constants/delta.js");a=b.INCREASING.COLOR;b=b.DECREASING.COLOR;var k=
C.line;G.exports={xperiod:C.xperiod,xperiod0:C.xperiod0,xperiodalignment:C.xperiodalignment,x:{valType:"data_array",editType:"calc+clearAxisTypes"},open:{valType:"data_array",editType:"calc"},high:{valType:"data_array",editType:"calc"},low:{valType:"data_array",editType:"calc"},close:{valType:"data_array",editType:"calc"},line:{width:n({},k.width,{}),dash:n({},m,{}),editType:"style"},increasing:q(a),decreasing:q(b),text:{valType:"string",dflt:"",arrayOk:!0,editType:"calc"},hovertext:{valType:"string",
dflt:"",arrayOk:!0,editType:"calc"},tickwidth:{valType:"number",min:0,max:.5,dflt:.3,editType:"calc"},hoverlabel:n({},f.hoverlabel,{split:{valType:"boolean",dflt:!1,editType:"style"}})}},{"../../components/drawing/attributes":636,"../../components/fx/attributes":646,"../../constants/delta.js":719,"../../lib":750,"../scatter/attributes":1158}],1105:[function(a,G,C){function q(h,l,c,g){return{o:h,h:l,l:c,c:g}}function n(h,l,c,g,d,p){for(var r=d.makeCalcdata(l,"open"),t=d.makeCalcdata(l,"high"),w=d.makeCalcdata(l,
"low"),x=d.makeCalcdata(l,"close"),y=Array.isArray(l.text),A=Array.isArray(l.hovertext),z=!0,F=null,D=!!l.xperiodalignment,u=[],B=0;B<g.length;B++){var I=g[B],J=r[B],N=t[B],M=w[B],E=x[B];if(I!==e&&J!==e&&N!==e&&M!==e&&E!==e){E===J?null!==F&&E!==F&&(z=E>F):z=E>J;F=E;var L=p(J,N,M,E);L.pos=I;L.yc=(J+E)/2;L.i=B;L.dir=z?"increasing":"decreasing";L.x=L.pos;L.y=[M,N];D&&(L.orig_p=c[B]);y&&(L.tx=l.text[B]);A&&(L.htx=l.hovertext[B]);u.push(L)}else u.push({pos:I,empty:!0})}l._extremes[d._id]=b.findExtremes(d,
m.concat(w,t),{padded:!0});u.length&&(u[0].t={labels:{open:f(h,"open:")+" ",high:f(h,"high:")+" ",low:f(h,"low:")+" ",close:f(h,"close:")+" "}});return u}var m=a("../../lib"),f=m._,b=a("../../plots/cartesian/axes"),k=a("../../plots/cartesian/align_period"),e=a("../../constants/numerical").BADNUM;G.exports={calc:function(h,l){var c=b.getFromId(h,l.xaxis),g=b.getFromId(h,l.yaxis);var d=l._minDiff;if(!d){var p=h._fullData,r=[];d=Infinity;var t;for(t=0;t<p.length;t++){var w=p[t];if("ohlc"===w.type&&!0===
w.visible&&w.xaxis===c._id){r.push(w);var x=c.makeCalcdata(w,"x");w._origX=x;x=k(l,c,"x",x);w._xcalc=x;(w=m.distinctVals(x).minDiff)&&isFinite(w)&&(d=Math.min(d,w))}}Infinity===d&&(d=1);for(t=0;t<r.length;t++)r[t]._minDiff=d}d*=l.tickwidth;p=l._minDiff;l._minDiff=null;t=l._origX;l._origX=null;r=l._xcalc;l._xcalc=null;h=n(h,l,t,r,g,q);l._extremes[c._id]=b.findExtremes(c,r,{vpad:p/2});return h.length?(m.extendFlat(h[0].t,{wHover:p/2,tickLen:d}),h):[{t:{empty:!0}}]},calcCommon:n}},{"../../constants/numerical":725,
"../../lib":750,"../../plots/cartesian/align_period":796,"../../plots/cartesian/axes":799}],1106:[function(a,G,C){function q(k,e,h,l){h(l+".line.color");h(l+".line.width",e.line.width);h(l+".line.dash",e.line.dash)}var n=a("../../lib"),m=a("./ohlc_defaults"),f=a("../scatter/period_defaults"),b=a("./attributes");G.exports=function(k,e,h,l){function c(g,d){return n.coerce(k,e,b,g,d)}m(k,e,c,l)?(f(k,e,l,c,{x:!0}),c("line.width"),c("line.dash"),q(k,e,c,"increasing"),q(k,e,c,"decreasing"),c("text"),c("hovertext"),
c("tickwidth"),l._requestRangeslider[e.xaxis]=!0):e.visible=!1}},{"../../lib":750,"../scatter/period_defaults":1178,"./attributes":1104,"./ohlc_defaults":1109}],1107:[function(a,G,C){function q(c,g,d,p){function r(N){N=N.pos+B-g;return k.inbox(N-I,N+I,J)}function t(N){var M=N[D];N=N[u];return M===N||k.inbox(M-d,N-d,J)}function w(N){return(r(N)+t(N))/2}var x=c.cd,y=c.xa,A=x[0].trace,z=x[0].t,F=A.type,D="ohlc"===F?"l":"min",u="ohlc"===F?"h":"max",B=z.bPos||0;F=z.bdPos||z.tickLen;var I=z.wHover;z=Math.min(1,
F/Math.abs(y.r2c(y.range[1])-y.r2c(y.range[0])));var J=c.maxHoverDistance-z;z=c.maxSpikeDistance-z;p=k.getDistanceFunction(p,r,t,w);k.getClosest(x,p,c);if(!1===c.index)return null;x=x[c.index];if(x.empty)return null;A=A[x.dir];p=A.line.color;e.opacity(p)&&A.line.width?c.color=p:c.color=A.fillcolor;c.x0=y.c2p(x.pos+B-F,!0);c.x1=y.c2p(x.pos+B+F,!0);c.xLabelVal=void 0!==x.orig_p?x.orig_p:x.pos;c.spikeDistance=w(x)*z/J;c.xSpike=y.c2p(x.pos,!0);return c}function n(c,g,d,p){var r=c.cd,t=c.ya,w=r[0].trace,
x=r[0].t,y=[];c=q(c,g,d,p);if(!c)return[];r=r[c.index].hi||w.hoverinfo;g=r.split("+");if("all"!==r&&-1===g.indexOf("y"))return[];r=["high","open","close","low"];g={};for(d=0;d<r.length;d++){p=r[d];var A=w[p][c.index],z=t.c2p(A,!0);if(A in g){var F=g[A];F.yLabel+="\x3cbr\x3e"+x.labels[p]+f.hoverLabelText(t,A)}else F=b.extendFlat({},c),F.y0=F.y1=z,F.yLabelVal=A,F.yLabel=x.labels[p]+f.hoverLabelText(t,A),F.name="",y.push(F),g[A]=F}return y}function m(c,g,d,p){function r(F){return y.labels[F]+f.hoverLabelText(w,
x[F][A])}var t=c.cd,w=c.ya,x=t[0].trace,y=t[0].t;c=q(c,g,d,p);if(!c)return[];t=t[c.index];var A=c.index=t.i;g=t.dir;p=t.hi||x.hoverinfo;d=p.split("+");var z="all"===p;p=z||-1!==d.indexOf("y");d=z||-1!==d.indexOf("text");g=p?[r("open"),r("high"),r("low"),r("close")+"  "+l[g]]:[];d&&h(t,x,g);c.extraText=g.join("\x3cbr\x3e");c.y0=c.y1=w.c2p(t.yc,!0);return[c]}var f=a("../../plots/cartesian/axes"),b=a("../../lib"),k=a("../../components/fx"),e=a("../../components/color"),h=a("../../lib").fillText;a=a("../../constants/delta.js");
var l={increasing:a.INCREASING.SYMBOL,decreasing:a.DECREASING.SYMBOL};G.exports={hoverPoints:function(c,g,d,p){return c.cd[0].trace.hoverlabel.split?n(c,g,d,p):m(c,g,d,p)},hoverSplit:n,hoverOnPoints:m}},{"../../components/color":615,"../../components/fx":655,"../../constants/delta.js":719,"../../lib":750,"../../plots/cartesian/axes":799}],1108:[function(a,G,C){G.exports={moduleType:"trace",name:"ohlc",basePlotModule:a("../../plots/cartesian"),categories:["cartesian","svg","showLegend"],meta:{},attributes:a("./attributes"),
supplyDefaults:a("./defaults"),calc:a("./calc").calc,plot:a("./plot"),style:a("./style"),hoverPoints:a("./hover").hoverPoints,selectPoints:a("./select")}},{"../../plots/cartesian":812,"./attributes":1104,"./calc":1105,"./defaults":1106,"./hover":1107,"./plot":1110,"./select":1111,"./style":1112}],1109:[function(a,G,C){var q=a("../../registry"),n=a("../../lib");G.exports=function(m,f,b,k){var e=b("x"),h=b("open"),l=b("high"),c=b("low"),g=b("close");b("hoverlabel.split");q.getComponentMethod("calendars",
"handleTraceDefaults")(m,f,["x"],k);if(h&&l&&c&&g)return m=Math.min(h.length,l.length,c.length,g.length),e&&(m=Math.min(m,n.minRowLength(e))),f._length=m}},{"../../lib":750,"../../registry":882}],1110:[function(a,G,C){var q=a("d3"),n=a("../../lib");G.exports=function(m,f,b,k){var e=f.yaxis,h=f.xaxis,l=!!h.rangebreaks;n.makeTraceGroups(k,b,"trace ohlc").each(function(c){var g=q.select(this);c=c[0];var d=c.t;if(!0!==c.trace.visible||d.empty)g.remove();else{var p=d.tickLen;g=g.selectAll("path").data(n.identity);
g.enter().append("path");g.exit().remove();g.attr("d",function(r){if(r.empty)return"M0,0Z";var t=h.c2p(r.pos-p,!0),w=h.c2p(r.pos+p,!0),x=l?(t+w)/2:h.c2p(r.pos,!0),y=e.c2p(r.o,!0),A=e.c2p(r.h,!0),z=e.c2p(r.l,!0);r=e.c2p(r.c,!0);return"M"+t+","+y+"H"+x+"M"+x+","+A+"V"+z+"M"+w+","+r+"H"+x})}})}},{"../../lib":750,d3:169}],1111:[function(a,G,C){G.exports=function(q,n){var m=q.cd,f=q.xaxis,b=q.yaxis,k=[],e,h=m[0].t.bPos||0;if(!1===n)for(e=0;e<m.length;e++)m[e].selected=0;else for(e=0;e<m.length;e++){var l=
m[e];n.contains([f.c2p(l.pos+h),b.c2p(l.yc)],null,l.i,q)?(k.push({pointNumber:l.i,x:f.c2d(l.pos),y:b.c2d(l.yc)}),l.selected=1):l.selected=0}return k}},{}],1112:[function(a,G,C){var q=a("d3"),n=a("../../components/drawing"),m=a("../../components/color");G.exports=function(f,b,k){f=k?k:q.select(f).selectAll("g.ohlclayer").selectAll("g.trace");f.style("opacity",function(e){return e[0].trace.opacity});f.each(function(e){var h=e[0].trace;q.select(this).selectAll("path").each(function(l){if(!l.empty){var c=
h[l.dir].line;q.select(this).style("fill","none").call(m.stroke,c.color).call(n.dashLine,c.dash,c.width).style("opacity",h.selectedpoints&&!l.selected?.3:1)}})})}},{"../../components/color":615,"../../components/drawing":637,d3:169}],1113:[function(a,G,C){C=a("../../lib/extend").extendFlat;var q=a("../../plots/attributes"),n=a("../../plots/font_attributes"),m=a("../../components/colorscale/attributes"),f=a("../../plots/template_attributes").hovertemplateAttrs;a=a("../../plots/domain").attributes;
m=C({editType:"calc"},m("line",{editTypeOverride:"calc"}),{shape:{valType:"enumerated",values:["linear","hspline"],dflt:"linear",editType:"plot"},hovertemplate:f({editType:"plot",arrayOk:!1},{keys:["count","probability"]})});G.exports={domain:a({name:"parcats",trace:!0,editType:"calc"}),hoverinfo:C({},q.hoverinfo,{flags:["count","probability"],editType:"plot",arrayOk:!1}),hoveron:{valType:"enumerated",values:["category","color","dimension"],dflt:"category",editType:"plot"},hovertemplate:f({editType:"plot",
arrayOk:!1},{keys:"count probability category categorycount colorcount bandcolorcount".split(" ")}),arrangement:{valType:"enumerated",values:["perpendicular","freeform","fixed"],dflt:"perpendicular",editType:"plot"},bundlecolors:{valType:"boolean",dflt:!0,editType:"plot"},sortpaths:{valType:"enumerated",values:["forward","backward"],dflt:"forward",editType:"plot"},labelfont:n({editType:"calc"}),tickfont:n({editType:"calc"}),dimensions:{_isLinkedToArray:"dimension",label:{valType:"string",editType:"calc"},
categoryorder:{valType:"enumerated",values:["trace","category ascending","category descending","array"],dflt:"trace",editType:"calc"},categoryarray:{valType:"data_array",editType:"calc"},ticktext:{valType:"data_array",editType:"calc"},values:{valType:"data_array",dflt:[],editType:"calc"},displayindex:{valType:"integer",editType:"calc"},editType:"calc",visible:{valType:"boolean",dflt:!0,editType:"calc"}},line:m,counts:{valType:"number",min:0,dflt:1,arrayOk:!0,editType:"calc"},customdata:void 0,hoverlabel:void 0,
ids:void 0,legendgroup:void 0,opacity:void 0,selectedpoints:void 0,showlegend:void 0}},{"../../components/colorscale/attributes":622,"../../lib/extend":740,"../../plots/attributes":795,"../../plots/domain":826,"../../plots/font_attributes":827,"../../plots/template_attributes":877}],1114:[function(a,G,C){var q=a("../../plots/get_data").getModuleCalcData,n=a("./plot");C.name="parcats";C.plot=function(m,f,b,k){f=q(m.calcdata,"parcats");f.length&&n(m,f[0],b,k)};C.clean=function(m,f,b,k){m=k._has&&k._has("parcats");
f=f._has&&f._has("parcats");m&&!f&&k._paperdiv.selectAll(".parcats").remove()}},{"../../plots/get_data":836,"./plot":1119}],1115:[function(a,G,C){function q(r,t,w){var x=r.map(function(y){return y.categories.length}).reduce(function(y,A){return Math.max(y,A)});return{dimensions:r,paths:t,trace:void 0,maxCats:x,count:w}}function n(r,t,w){r.valueInds.push(t);r.count+=w}function m(r,t,w){r.valueInds.push(t);r.count+=w}function f(r,t){t=void 0===t||null===t?[]:t.map(function(D){return D});var w={},x=
{},y=[];t.forEach(function(D,u){w[D]=0;x[D]=u});for(var A=0;A<r.length;A++){var z=r[A];if(void 0===w[z]){w[z]=1;var F=t.push(z)-1;x[z]=F}else w[z]++,F=x[z];y.push(F)}r=t.map(function(D){return w[D]});return{uniqueValues:t,uniqueCounts:r,inds:y}}function b(r){var t=r.map(function(w){return w.displayindex});if(k(t))for(t=0;t<r.length;t++)r[t]._displayindex=r[t].displayindex;else for(t=0;t<r.length;t++)r[t]._displayindex=t}function k(r){for(var t=Array(r.length),w=0;w<r.length;w++){if(0>r[w]||r[w]>=
r.length||void 0!==t[r[w]])return!1;t[r[w]]=!0}return!0}var e=a("../../lib/gup").wrap,h=a("../../components/colorscale/helpers").hasColorscale,l=a("../../components/colorscale/calc"),c=a("../../lib/filter_unique.js"),g=a("../../components/drawing"),d=a("../../lib"),p=a("fast-isnumeric");G.exports=function(r,t){function w(L){if(d.isArrayOrTypedArray(z.color))var Q=L=z.color[L%z.color.length];else L=z.color;return{color:F(L),rawColor:Q}}var x=d.filterVisible(t.dimensions);if(0===x.length)return[];var y=
x.map(function(L){if("trace"===L.categoryorder)var Q=null;else if("array"===L.categoryorder)Q=L.categoryarray;else{Q=c(L.values);for(var S=!0,R=0;R<Q.length;R++)if(!p(Q[R])){S=!1;break}Q.sort(S?d.sorterAsc:void 0);"category descending"===L.categoryorder&&(Q=Q.reverse())}return f(L.values,Q)});var A=d.isArrayOrTypedArray(t.counts)?t.counts:[t.counts];b(x);x.forEach(function(L,Q){Q=y[Q];L._categoryarray=Q.uniqueValues;L._ticktext=null===L.ticktext||void 0===L.ticktext?[]:L.ticktext.slice();for(var S=
L._ticktext.length;S<Q.uniqueValues.length;S++)L._ticktext.push(Q.uniqueValues[S])});var z=t.line;if(z){h(t,"line")&&l(r,t,{vals:t.line.color,containerStr:"line",cLetter:"c"});var F=g.tryColorscale(z)}else F=d.identity;var D=x[0].values.length,u={},B=y.map(function(L){return L.inds});var I=0;var J,N;for(J=0;J<D;J++){var M=[];for(N=0;N<B.length;N++)M.push(B[N][J]);r=A[J%A.length];I+=r;N=w(J);var E=M+"-"+N.rawColor;void 0===u[E]&&(u[E]={categoryInds:M,color:N.color,rawColor:N.rawColor,valueInds:[],
count:0});m(u[E],J,r)}x=x.map(function(L,Q){return{dimensionInd:Q,containerInd:L._index,displayInd:L._displayindex,dimensionLabel:L.label,count:I,categories:[],dragX:null}});for(J=0;J<D;J++)for(r=A[J%A.length],N=0;N<x.length;N++)B=x[N].containerInd,M=y[N].inds[J],E=x[N].categories,void 0===E[M]&&(E[M]={dimensionInd:N,categoryInd:M,categoryValue:t.dimensions[B]._categoryarray[M],displayInd:M,categoryLabel:t.dimensions[B]._ticktext[M],valueInds:[],count:0,dragY:null}),n(E[M],J,r);return e(q(x,u,I))}},
{"../../components/colorscale/calc":623,"../../components/colorscale/helpers":626,"../../components/drawing":637,"../../lib":750,"../../lib/filter_unique.js":741,"../../lib/gup":747,"fast-isnumeric":241}],1116:[function(a,G,C){function q(c,g,d,p,r){r("line.shape");r("line.hovertemplate");var t=r("line.color",p.colorway[0]);if(f(c,"line")&&m.isArrayOrTypedArray(t)){if(t.length)return r("line.colorscale"),b(c,g,p,r,{prefix:"line.",cLetter:"c"}),t.length;g.line.color=d}return Infinity}function n(c,g){function d(w,
x){return m.coerce(c,g,h.dimensions,w,x)}var p=d("values"),r=d("visible");p&&p.length||(r=g.visible=!1);if(r){d("label");d("displayindex",g._index);p=c.categoryarray;p=Array.isArray(p)&&0<p.length;var t;p&&(t="array");t=d("categoryorder",t);"array"===t?(d("categoryarray"),d("ticktext")):(delete c.categoryarray,delete c.ticktext);p||"array"!==t||(g.categoryorder="trace")}}var m=a("../../lib"),f=a("../../components/colorscale/helpers").hasColorscale,b=a("../../components/colorscale/defaults"),k=a("../../plots/domain").defaults,
e=a("../../plots/array_container_defaults"),h=a("./attributes"),l=a("../parcoords/merge_length");G.exports=function(c,g,d,p){function r(w,x){return m.coerce(c,g,h,w,x)}var t=e(c,g,{name:"dimensions",handleItemDefaults:n});d=q(c,g,d,p,r);k(g,p,r);Array.isArray(t)&&t.length||(g.visible=!1);l(g,t,"values",d);r("hoveron");r("hovertemplate");r("arrangement");r("bundlecolors");r("sortpaths");r("counts");m.coerceFont(r,"labelfont",{family:p.font.family,size:Math.round(p.font.size),color:p.font.color});m.coerceFont(r,
"tickfont",{family:p.font.family,size:Math.round(p.font.size/1.2),color:p.font.color})}},{"../../components/colorscale/defaults":625,"../../components/colorscale/helpers":626,"../../lib":750,"../../plots/array_container_defaults":794,"../../plots/domain":826,"../parcoords/merge_length":1129,"./attributes":1113}],1117:[function(a,G,C){G.exports={attributes:a("./attributes"),supplyDefaults:a("./defaults"),calc:a("./calc"),plot:a("./plot"),colorbar:{container:"line",min:"cmin",max:"cmax"},moduleType:"trace",
name:"parcats",basePlotModule:a("./base_plot"),categories:["noOpacity"],meta:{}}},{"./attributes":1113,"./base_plot":1114,"./calc":1115,"./defaults":1116,"./plot":1119}],1118:[function(a,G,C){function q(ca,sa,ma,ra){ca=ca.map(L.bind(0,sa,ma));ra=ra.selectAll("g.parcatslayer").data([null]);ra.enter().append("g").attr("class","parcatslayer").style("pointer-events","all");ra=ra.selectAll("g.trace.parcats").data(ca,n);ca=ra.enter().append("g").attr("class","trace parcats");ra.attr("transform",function(oa){return"translate("+
oa.x+", "+oa.y+")"});ca.append("g").attr("class","paths");ma=ra.select("g.paths").selectAll("path.path").data(function(oa){return oa.paths},n);ma.attr("fill",function(oa){return oa.model.color});var qa=ma.enter().append("path").attr("class","path").attr("stroke-opacity",0).attr("fill",function(oa){return oa.model.color}).attr("fill-opacity",0);c(qa);ma.attr("d",function(oa){return oa.svgD});qa.empty()||ma.sort(f);ma.exit().remove();ma.on("mouseover",b).on("mouseout",k).on("click",l);ca.append("g").attr("class",
"dimensions");ca=ra.select("g.dimensions").selectAll("g.dimension").data(function(oa){return oa.dimensions},n);ca.enter().append("g").attr("class","dimension");ca.attr("transform",function(oa){return"translate("+oa.x+", 0)"});ca.exit().remove();ma=ca.selectAll("g.category").data(function(oa){return oa.categories},n);qa=ma.enter().append("g").attr("class","category");ma.attr("transform",function(oa){return"translate(0, "+oa.y+")"});qa.append("rect").attr("class","catrect").attr("pointer-events","none");
ma.select("rect.catrect").attr("fill","none").attr("width",function(oa){return oa.width}).attr("height",function(oa){return oa.height});d(qa);var Y=ma.selectAll("rect.bandrect").data(function(oa){return oa.bands},n);Y.each(function(){ba.raiseToTop(this)});Y.attr("fill",function(oa){return oa.color});var pa=Y.enter().append("rect").attr("class","bandrect").attr("stroke-opacity",0).attr("fill",function(oa){return oa.color}).attr("fill-opacity",0);Y.attr("fill",function(oa){return oa.color}).attr("width",
function(oa){return oa.width}).attr("height",function(oa){return oa.height}).attr("y",function(oa){return oa.y}).attr("cursor",function(oa){return"fixed"===oa.parcatsViewModel.arrangement?"default":"perpendicular"===oa.parcatsViewModel.arrangement?"ns-resize":"move"});p(pa);Y.exit().remove();qa.append("text").attr("class","catlabel").attr("pointer-events","none");Y=sa._fullLayout.paper_bgcolor;ma.select("text.catlabel").attr("text-anchor",function(oa){return m(oa)?"start":"end"}).attr("alignment-baseline",
"middle").style("text-shadow",Y+" -1px  1px 2px, "+Y+" 1px  1px 2px, "+Y+"  1px -1px 2px, "+Y+" -1px -1px 2px").style("fill","rgb(0, 0, 0)").attr("x",function(oa){return m(oa)?oa.width+5:-5}).attr("y",function(oa){return oa.height/2}).text(function(oa){return oa.model.categoryLabel}).each(function(oa){aa.font(T.select(this),oa.parcatsViewModel.categorylabelfont);ha.convertToTspans(T.select(this),sa)});qa.append("text").attr("class","dimlabel");ma.select("text.dimlabel").attr("text-anchor","middle").attr("alignment-baseline",
"baseline").attr("cursor",function(oa){return"fixed"===oa.parcatsViewModel.arrangement?"default":"ew-resize"}).attr("x",function(oa){return oa.width/2}).attr("y",-5).text(function(oa,ua){return 0===ua?oa.parcatsViewModel.model.dimensions[oa.model.dimensionInd].dimensionLabel:null}).each(function(oa){aa.font(T.select(this),oa.parcatsViewModel.labelfont)});ma.selectAll("rect.bandrect").on("mouseover",D).on("mouseout",u);ma.exit().remove();ca.call(T.behavior.drag().origin(function(oa){return{x:oa.x,
y:0}}).on("dragstart",B).on("drag",I).on("dragend",J));ra.each(function(oa){oa.traceSelection=T.select(this);oa.pathSelection=T.select(this).selectAll("g.paths").selectAll("path.path");oa.dimensionSelection=T.select(this).selectAll("g.dimensions").selectAll("g.dimension")});ra.exit().remove()}function n(ca){return ca.key}function m(ca){return ca.model.dimensionInd===ca.parcatsViewModel.dimensions[ca.parcatsViewModel.dimensions.length-1].model.dimensionInd}function f(ca,sa){return ca.model.rawColor>
sa.model.rawColor?1:ca.model.rawColor<sa.model.rawColor?-1:0}function b(ca){if(!ca.parcatsViewModel.dragDimension&&-1===ca.parcatsViewModel.hoverinfoItems.indexOf("skip")){ba.raiseToTop(this);g(T.select(this));var sa=e(ca),ma=h(ca);ca.parcatsViewModel.graphDiv.emit("plotly_hover",{points:sa,event:T.event,constraints:ma});if(-1===ca.parcatsViewModel.hoverinfoItems.indexOf("none")){var ra=T.mouse(this)[0];sa=ca.parcatsViewModel.graphDiv;ma=ca.parcatsViewModel.trace;var qa=sa._fullLayout,Y=qa._paperdiv.node().getBoundingClientRect(),
pa=ca.parcatsViewModel.graphDiv.getBoundingClientRect(),oa;for(oa=0;oa<ca.leftXs.length-1;oa++)if(ca.leftXs[oa]+ca.dimWidths[oa]-2<=ra&&ra<=ca.leftXs[oa+1]+2){var ua=ca.parcatsViewModel.dimensions[oa];ua=(ua.x+ua.width+ca.parcatsViewModel.dimensions[oa+1].x)/2;var ya=(ca.topYs[oa]+ca.topYs[oa+1]+ca.height)/2;break}ua=ca.parcatsViewModel.x+ua;ya=ca.parcatsViewModel.y+ya;oa=ka.mostReadable(ca.model.color,["black","white"]);ra=ca.model.count;var ja=ra/ca.parcatsViewModel.model.count,za={countLabel:ra,
probabilityLabel:ja.toFixed(3)},Ba=[];-1!==ca.parcatsViewModel.hoverinfoItems.indexOf("count")&&Ba.push(["Count:",za.countLabel].join(" "));-1!==ca.parcatsViewModel.hoverinfoItems.indexOf("probability")&&Ba.push(["P:",za.probabilityLabel].join(" "));Ba=Ba.join("\x3cbr\x3e");var Ma=T.mouse(sa)[0];X.loneHover({trace:ma,x:ua-Y.left+pa.left,y:ya-Y.top+pa.top,text:Ba,color:ca.model.color,borderColor:"black",fontFamily:'Monaco, "Courier New", monospace',fontSize:10,fontColor:oa,idealAlign:Ma<ua?"right":
"left",hovertemplate:(ma.line||{}).hovertemplate,hovertemplateLabels:za,eventData:[{data:ma._input,fullData:ma,count:ra,probability:ja}]},{container:qa._hoverlayer.node(),outerContainer:qa._paper.node(),gd:sa})}}}function k(ca){if(!ca.parcatsViewModel.dragDimension&&(c(T.select(this)),X.loneUnhover(ca.parcatsViewModel.graphDiv._fullLayout._hoverlayer.node()),ca.parcatsViewModel.pathSelection.sort(f),-1===ca.parcatsViewModel.hoverinfoItems.indexOf("skip"))){var sa=e(ca),ma=h(ca);ca.parcatsViewModel.graphDiv.emit("plotly_unhover",
{points:sa,event:T.event,constraints:ma})}}function e(ca){for(var sa=[],ma=N(ca.parcatsViewModel),ra=0;ra<ca.model.valueInds.length;ra++)sa.push({curveNumber:ma,pointNumber:ca.model.valueInds[ra]});return sa}function h(ca){for(var sa={},ma=ca.parcatsViewModel.model.dimensions,ra=0;ra<ma.length;ra++){var qa=ma[ra];sa[qa.containerInd]=qa.categories[ca.model.categoryInds[ra]].categoryValue}void 0!==ca.model.rawColor&&(sa.color=ca.model.rawColor);return sa}function l(ca){if(-1===ca.parcatsViewModel.hoverinfoItems.indexOf("skip")){var sa=
e(ca),ma=h(ca);ca.parcatsViewModel.graphDiv.emit("plotly_click",{points:sa,event:T.event,constraints:ma})}}function c(ca){ca.attr("fill",function(sa){return sa.model.color}).attr("fill-opacity",.6).attr("stroke","lightgray").attr("stroke-width",.2).attr("stroke-opacity",1)}function g(ca){ca.attr("fill-opacity",.8).attr("stroke",function(sa){return ka.mostReadable(sa.model.color,["black","white"])}).attr("stroke-width",.3)}function d(ca){ca.select("rect.catrect").attr("stroke","black").attr("stroke-width",
1).attr("stroke-opacity",1)}function p(ca){ca.attr("stroke","black").attr("stroke-width",.2).attr("stroke-opacity",1).attr("fill-opacity",1)}function r(ca){var sa=ca.categoryViewModel.model.dimensionInd,ma=ca.categoryViewModel.model.categoryInd;return ca.parcatsViewModel.pathSelection.filter(function(ra){return ra.model.categoryInds[sa]===ma&&ra.model.color===ca.color})}function t(ca){T.select(ca.parentNode).selectAll("rect.bandrect").each(function(sa){sa=r(sa);g(sa);sa.each(function(){ba.raiseToTop(this)})});
T.select(ca.parentNode).select("rect.catrect").attr("stroke","black").attr("stroke-width",2.5)}function w(ca){var sa=T.select(ca).datum(),ma=r(sa);g(ma);ma.each(function(){ba.raiseToTop(this)});T.select(ca.parentNode).selectAll("rect.bandrect").filter(function(ra){return ra.color===sa.color}).each(function(){ba.raiseToTop(this);T.select(this).attr("stroke","black").attr("stroke-width",1.5)})}function x(ca,sa,ma){var ra=T.select(ca).datum(),qa=ra.categoryViewModel.model;ra=ra.parcatsViewModel.graphDiv;
var Y=[];T.select(ca.parentNode).selectAll("rect.bandrect").each(function(pa){r(pa).each(function(oa){Array.prototype.push.apply(Y,e(oa))})});ca={};ca[qa.dimensionInd]=qa.categoryValue;ra.emit(sa,{points:Y,event:ma,constraints:ca})}function y(ca,sa,ma){ca=T.select(ca).datum();var ra=ca.categoryViewModel.model,qa=ca.parcatsViewModel.graphDiv,Y=[];r(ca).each(function(oa){Array.prototype.push.apply(Y,e(oa))});var pa={};pa[ra.dimensionInd]=ra.categoryValue;void 0!==ca.rawColor&&(pa.color=ca.rawColor);
qa.emit(sa,{points:Y,event:ma,constraints:pa})}function A(ca,sa){sa=T.select(sa.parentNode).select("rect.catrect");var ma=sa.node().getBoundingClientRect(),ra=sa.datum(),qa=ra.parcatsViewModel,Y=qa.model.dimensions[ra.model.dimensionInd];sa=qa.trace;var pa=ma.top+ma.height/2;1<qa.dimensions.length&&Y.displayInd===qa.dimensions.length-1?(ma=ma.left,qa="left"):(ma=ma.left+ma.width,qa="right");Y=ra.model.count;var oa=ra.model.categoryLabel,ua=Y/ra.parcatsViewModel.model.count,ya={countLabel:Y,categoryLabel:oa,
probabilityLabel:ua.toFixed(3)},ja=[];-1!==ra.parcatsViewModel.hoverinfoItems.indexOf("count")&&ja.push(["Count:",ya.countLabel].join(" "));-1!==ra.parcatsViewModel.hoverinfoItems.indexOf("probability")&&ja.push(["P("+ya.categoryLabel+"):",ya.probabilityLabel].join(" "));ra=ja.join("\x3cbr\x3e");return{trace:sa,x:ma-ca.left,y:pa-ca.top,text:ra,color:"lightgray",borderColor:"black",fontFamily:'Monaco, "Courier New", monospace',fontSize:12,fontColor:"black",idealAlign:qa,hovertemplate:sa.hovertemplate,
hovertemplateLabels:ya,eventData:[{data:sa._input,fullData:sa,count:Y,category:oa,probability:ua}]}}function z(ca,sa){var ma=[];T.select(sa.parentNode.parentNode).selectAll("g.category").select("rect.catrect").each(function(){ma.push(A(ca,this))});return ma}function F(ca,sa){var ma=sa.getBoundingClientRect(),ra=T.select(sa).datum(),qa=ra.categoryViewModel,Y=qa.parcatsViewModel,pa=Y.model.dimensions[qa.model.dimensionInd];sa=Y.trace;var oa=ma.y+ma.height/2;1<Y.dimensions.length&&pa.displayInd===Y.dimensions.length-
1?(ma=ma.left,pa="left"):(ma=ma.left+ma.width,pa="right");var ua=qa.model.categoryLabel,ya=ra.parcatsViewModel.model.count,ja=0;ra.categoryViewModel.bands.forEach(function(Fa){Fa.color===ra.color&&(ja+=Fa.count)});var za=qa.model.count,Ba=0;Y.pathSelection.each(function(Fa){Fa.model.color===ra.color&&(Ba+=Fa.model.count)});Y=ja/ya;var Ma=ja/Ba,Oa=ja/za,Ia={countLabel:ya,categoryLabel:ua,probabilityLabel:Y.toFixed(3)},Pa=[];-1!==qa.parcatsViewModel.hoverinfoItems.indexOf("count")&&Pa.push(["Count:",
Ia.countLabel].join(" "));-1!==qa.parcatsViewModel.hoverinfoItems.indexOf("probability")&&(Pa.push("P(color ∩ "+ua+"): "+Ia.probabilityLabel),Pa.push("P("+ua+" | color): "+Ma.toFixed(3)),Pa.push("P(color | "+ua+"): "+Oa.toFixed(3)));qa=Pa.join("\x3cbr\x3e");Ma=ka.mostReadable(ra.color,["black","white"]);return{trace:sa,x:ma-ca.left,y:oa-ca.top,text:qa,color:ra.color,borderColor:"black",fontFamily:'Monaco, "Courier New", monospace',fontColor:Ma,fontSize:10,idealAlign:pa,hovertemplate:sa.hovertemplate,
hovertemplateLabels:Ia,eventData:[{data:sa._input,fullData:sa,category:ua,count:ya,probability:Y,categorycount:za,colorcount:Ba,bandcolorcount:ja}]}}function D(ca){if(!(ca.parcatsViewModel.dragDimension||-1!==ca.parcatsViewModel.hoverinfoItems.indexOf("skip")||-1>T.mouse(this)[1])){var sa=ca.parcatsViewModel.graphDiv,ma=sa._fullLayout,ra=ma._paperdiv.node().getBoundingClientRect(),qa=ca.parcatsViewModel.hoveron;"color"===qa?(w(this),y(this,"plotly_hover",T.event)):(t(this),x(this,"plotly_hover",T.event));
if(-1===ca.parcatsViewModel.hoverinfoItems.indexOf("none")){var Y;"category"===qa?Y=A(ra,this):"color"===qa?Y=F(ra,this):"dimension"===qa&&(Y=z(ra,this));Y&&X.loneHover(Y,{container:ma._hoverlayer.node(),outerContainer:ma._paper.node(),gd:sa})}}}function u(ca){var sa=ca.parcatsViewModel;sa.dragDimension||(c(sa.pathSelection),d(sa.dimensionSelection.selectAll("g.category")),p(sa.dimensionSelection.selectAll("g.category").selectAll("rect.bandrect")),X.loneUnhover(sa.graphDiv._fullLayout._hoverlayer.node()),
sa.pathSelection.sort(f),-1===sa.hoverinfoItems.indexOf("skip")&&("color"===ca.parcatsViewModel.hoveron?y(this,"plotly_unhover",T.event):x(this,"plotly_unhover",T.event)))}function B(ca){"fixed"!==ca.parcatsViewModel.arrangement&&(ca.dragDimensionDisplayInd=ca.model.displayInd,ca.initialDragDimensionDisplayInds=ca.parcatsViewModel.model.dimensions.map(function(sa){return sa.displayInd}),ca.dragHasMoved=!1,ca.dragCategoryDisplayInd=null,T.select(this).selectAll("g.category").select("rect.catrect").each(function(sa){var ma=
T.mouse(this)[0],ra=T.mouse(this)[1];-2<=ma&&ma<=sa.width+2&&-2<=ra&&ra<=sa.height+2&&(ca.dragCategoryDisplayInd=sa.model.displayInd,ca.initialDragCategoryDisplayInds=ca.model.categories.map(function(qa){return qa.displayInd}),sa.model.dragY=sa.y,ba.raiseToTop(this.parentNode),T.select(this.parentNode).selectAll("rect.bandrect").each(function(qa){qa.y<ra&&ra<=qa.y+qa.height&&(ca.potentialClickBand=this)}))}),ca.parcatsViewModel.dragDimension=ca,X.loneUnhover(ca.parcatsViewModel.graphDiv._fullLayout._hoverlayer.node()))}
function I(ca){if("fixed"!==ca.parcatsViewModel.arrangement&&(ca.dragHasMoved=!0,null!==ca.dragDimensionDisplayInd)){var sa=ca.dragDimensionDisplayInd,ma=sa-1,ra=sa+1,qa=ca.parcatsViewModel.dimensions[sa];if(null!==ca.dragCategoryDisplayInd){var Y=qa.categories[ca.dragCategoryDisplayInd];Y.model.dragY+=T.event.dy;var pa=Y.model.dragY,oa=Y.model.displayInd,ua=qa.categories,ya=ua[oa-1];ua=ua[oa+1];void 0!==ya&&pa<ya.y+ya.height/2&&(Y.model.displayInd=ya.model.displayInd,ya.model.displayInd=oa);void 0!==
ua&&pa+Y.height>ua.y+ua.height/2&&(Y.model.displayInd=ua.model.displayInd,ua.model.displayInd=oa);ca.dragCategoryDisplayInd=Y.model.displayInd}if(null===ca.dragCategoryDisplayInd||"freeform"===ca.parcatsViewModel.arrangement)qa.model.dragX=T.event.x,ma=ca.parcatsViewModel.dimensions[ma],ra=ca.parcatsViewModel.dimensions[ra],void 0!==ma&&qa.model.dragX<ma.x+ma.width&&(qa.model.displayInd=ma.model.displayInd,ma.model.displayInd=sa),void 0!==ra&&qa.model.dragX+qa.width>ra.x&&(qa.model.displayInd=ra.model.displayInd,
ra.model.displayInd=ca.dragDimensionDisplayInd),ca.dragDimensionDisplayInd=qa.model.displayInd;R(ca.parcatsViewModel);S(ca.parcatsViewModel);E(ca.parcatsViewModel);M(ca.parcatsViewModel)}}function J(ca){if("fixed"!==ca.parcatsViewModel.arrangement&&null!==ca.dragDimensionDisplayInd){T.select(this).selectAll("text").attr("font-weight","normal");var sa={},ma=N(ca.parcatsViewModel),ra=ca.parcatsViewModel.model.dimensions.map(function(ya){return ya.displayInd}),qa=ca.initialDragDimensionDisplayInds.some(function(ya,
ja){return ya!==ra[ja]});qa&&ra.forEach(function(ya,ja){sa["dimensions["+ca.parcatsViewModel.model.dimensions[ja].containerInd+"].displayindex"]=ya});var Y=!1;if(null!==ca.dragCategoryDisplayInd){var pa=ca.model.categories.map(function(ya){return ya.displayInd});if(Y=ca.initialDragCategoryDisplayInds.some(function(ya,ja){return ya!==pa[ja]})){var oa=ca.model.categories.slice().sort(function(ya,ja){return ya.displayInd-ja.displayInd}),ua=oa.map(function(ya){return ya.categoryValue});oa=oa.map(function(ya){return ya.categoryLabel});
sa["dimensions["+ca.model.containerInd+"].categoryarray"]=[ua];sa["dimensions["+ca.model.containerInd+"].ticktext"]=[oa];sa["dimensions["+ca.model.containerInd+"].categoryorder"]="array"}}-1===ca.parcatsViewModel.hoverinfoItems.indexOf("skip")&&!ca.dragHasMoved&&ca.potentialClickBand&&("color"===ca.parcatsViewModel.hoveron?y(ca.potentialClickBand,"plotly_click",T.event.sourceEvent):x(ca.potentialClickBand,"plotly_click",T.event.sourceEvent));ca.model.dragX=null;null!==ca.dragCategoryDisplayInd&&(ca.parcatsViewModel.dimensions[ca.dragDimensionDisplayInd].categories[ca.dragCategoryDisplayInd].model.dragY=
null,ca.dragCategoryDisplayInd=null);ca.dragDimensionDisplayInd=null;ca.parcatsViewModel.dragDimension=null;ca.dragHasMoved=null;ca.potentialClickBand=null;R(ca.parcatsViewModel);S(ca.parcatsViewModel);T.transition().duration(300).ease("cubic-in-out").each(function(){E(ca.parcatsViewModel,!0);M(ca.parcatsViewModel,!0)}).each("end",function(){(qa||Y)&&V.restyle(ca.parcatsViewModel.graphDiv,sa,[ma])})}}function N(ca){for(var sa,ma=ca.graphDiv._fullData,ra=0;ra<ma.length;ra++)if(ca.key===ma[ra].uid){sa=
ra;break}return sa}function M(ca,sa){void 0===sa&&(sa=!1);ca.pathSelection.data(function(ma){return ma.paths},n);(function(ma){return sa?ma.transition():ma})(ca.pathSelection).attr("d",function(ma){return ma.svgD})}function E(ca,sa){function ma(qa){return sa?qa.transition():qa}void 0===sa&&(sa=!1);ca.dimensionSelection.data(function(qa){return qa.dimensions},n);var ra=ca.dimensionSelection.selectAll("g.category").data(function(qa){return qa.categories},n);ma(ca.dimensionSelection).attr("transform",
function(qa){return"translate("+qa.x+", 0)"});ma(ra).attr("transform",function(qa){return"translate(0, "+qa.y+")"});ra.select(".dimlabel").text(function(qa,Y){return 0===Y?qa.parcatsViewModel.model.dimensions[qa.model.dimensionInd].dimensionLabel:null});ra.select(".catlabel").attr("text-anchor",function(qa){return m(qa)?"start":"end"}).attr("x",function(qa){return m(qa)?qa.width+5:-5}).each(function(qa){if(m(qa)){qa=qa.width+5;var Y="start"}else qa=-5,Y="end";T.select(this).selectAll("tspan").attr("x",
qa).attr("text-anchor",Y)});ca=ra.selectAll("rect.bandrect").data(function(qa){return qa.bands},n);ra=ca.enter().append("rect").attr("class","bandrect").attr("cursor","move").attr("stroke-opacity",0).attr("fill",function(qa){return qa.color}).attr("fill-opacity",0);ca.attr("fill",function(qa){return qa.color}).attr("width",function(qa){return qa.width}).attr("height",function(qa){return qa.height}).attr("y",function(qa){return qa.y});p(ra);ca.each(function(){ba.raiseToTop(this)});ca.exit().remove()}
function L(ca,sa,ma){ma=ma[0];var ra=sa.margin||{l:80,r:80,t:100,b:80},qa=ma.trace,Y=qa.domain,pa=sa.width,oa=Math.floor(pa*(Y.x[1]-Y.x[0])),ua=Math.floor(sa.height*(Y.y[1]-Y.y[0]));pa=Y.x[0]*pa+ra.l;sa=sa.height-Y.y[1]*sa.height+ra.t;Y=qa.line.shape;var ya="all"===qa.hoverinfo?["count","probability"]:(qa.hoverinfo||"").split("+");ca={trace:qa,key:qa.uid,model:ma,x:pa,y:sa,width:oa,height:ua,hoveron:qa.hoveron,hoverinfoItems:ya,arrangement:qa.arrangement,bundlecolors:qa.bundlecolors,sortpaths:qa.sortpaths,
labelfont:qa.labelfont,categorylabelfont:qa.tickfont,pathShape:Y,dragDimension:null,margin:ra,paths:[],dimensions:[],graphDiv:ca,traceSelection:null,pathSelection:null,dimensionSelection:null};ma.dimensions&&(R(ca),S(ca));return ca}function Q(ca,sa,ma,ra,qa){var Y=[],pa=[],oa;for(oa=0;oa<ma.length-1;oa++){var ua=T.interpolateNumber(ma[oa]+ca[oa],ca[oa+1]);Y.push(ua(qa));pa.push(ua(1-qa))}qa="M "+ca[0]+","+sa[0];qa+="l"+ma[0]+",0 ";for(oa=1;oa<ma.length;oa++)qa+="C"+Y[oa-1]+","+sa[oa-1]+" "+pa[oa-
1]+","+sa[oa]+" "+ca[oa]+","+sa[oa],qa+="l"+ma[oa]+",0 ";qa=qa+("l0,"+ra+" l -")+(ma[ma.length-1]+",0 ");for(oa=ma.length-2;0<=oa;oa--)qa+="C"+pa[oa]+","+(sa[oa+1]+ra)+" "+Y[oa]+","+(sa[oa]+ra)+" "+(ca[oa]+ma[oa])+","+(sa[oa]+ra),qa+="l-"+ma[oa]+",0 ";return qa+"Z"}function S(ca){function sa(cb){var mb=cb.categoryInds.map(function(Ka,Ua){return Y[Ua][Ka]});return oa.map(function(Ka){return mb[Ka]})}var ma=ca.dimensions,ra=ca.model,qa=ma.map(function(cb){return cb.categories.map(function(mb){return mb.y})}),
Y=ca.model.dimensions.map(function(cb){return cb.categories.map(function(mb){return mb.displayInd})}),pa=ca.model.dimensions.map(function(cb){return cb.displayInd}),oa=ca.dimensions.map(function(cb){return cb.model.dimensionInd}),ua=ma.map(function(cb){return cb.x}),ya=ma.map(function(cb){return cb.width}),ja=[];for(za in ra.paths)ra.paths.hasOwnProperty(za)&&ja.push(ra.paths[za]);ja.sort(function(cb,mb){var Ka=sa(cb),Ua=sa(mb);"backward"===ca.sortpaths&&(Ka.reverse(),Ua.reverse());Ka.push(cb.valueInds[0]);
Ua.push(mb.valueInds[0]);ca.bundlecolors&&(Ka.unshift(cb.rawColor),Ua.unshift(mb.rawColor));return Ka<Ua?-1:Ka>Ua?1:0});ra=Array(ja.length);var za=ma[0].model.count;ma=ma[0].categories.map(function(cb){return cb.height}).reduce(function(cb,mb){return cb+mb});for(var Ba=0;Ba<ja.length;Ba++){var Ma=ja[Ba];var Oa=0<za?Ma.count/za*ma:0;for(var Ia=Array(qa.length),Pa=0;Pa<Ma.categoryInds.length;Pa++){var Fa=Y[Pa][Ma.categoryInds[Pa]],Na=pa[Pa];Ia[Na]=qa[Na][Fa];qa[Na][Fa]+=Oa;Fa=ca.dimensions[Na].categories[Fa];
Na=Fa.bands.length;var $a=Fa.bands[Na-1];void 0===$a||Ma.rawColor!==$a.rawColor?(Na=void 0===$a?0:$a.y+$a.height,Fa.bands.push({key:Na,color:Ma.color,rawColor:Ma.rawColor,height:Oa,width:Fa.width,count:Ma.count,y:Na,categoryViewModel:Fa,parcatsViewModel:ca})):(Fa=Fa.bands[Na-1],Fa.height+=Oa,Fa.count+=Ma.count)}Pa="hspline"===ca.pathShape?Q(ua,Ia,ya,Oa,.5):Q(ua,Ia,ya,Oa,0);ra[Ba]={key:Ma.valueInds[0],model:Ma,height:Oa,leftXs:ua,topYs:Ia,dimWidths:ya,svgD:Pa,parcatsViewModel:ca}}ca.paths=ra}function R(ca){var sa=
ca.model.dimensions.map(function(qa){return{displayInd:qa.displayInd,dimensionInd:qa.dimensionInd}});sa.sort(function(qa,Y){return qa.displayInd-Y.displayInd});var ma=[],ra;for(ra in sa)ma.push(O(ca,ca.model.dimensions[sa[ra].dimensionInd]));ca.dimensions=ma}function O(ca,sa){var ma=ca.model.dimensions.length;ma=40+(1<ma?(ca.width-80-16)/(ma-1):0)*sa.displayInd;var ra=[],qa=ca.model.maxCats,Y=sa.categories.length,pa=sa.count,oa=ca.height-8*(qa-1),ua=8*(qa-Y)/2,ya=sa.categories.map(function(Ba){return{displayInd:Ba.displayInd,
categoryInd:Ba.categoryInd}});ya.sort(function(Ba,Ma){return Ba.displayInd-Ma.displayInd});for(qa=0;qa<Y;qa++){var ja=ya[qa].categoryInd;var za=sa.categories[ja];ja=0<pa?za.count/pa*oa:0;za={key:za.valueInds[0],model:za,width:16,height:ja,y:null!==za.dragY?za.dragY:ua,bands:[],parcatsViewModel:ca};ua=ua+ja+8;ra.push(za)}return{key:sa.dimensionInd,x:null!==sa.dragX?sa.dragX:ma,y:0,width:16,model:sa,categories:ra,parcatsViewModel:ca,dragCategoryDisplayInd:null,dragDimensionDisplayInd:null,initialDragDimensionDisplayInds:null,
initialDragCategoryDisplayInds:null,dragHasMoved:null,potentialClickBand:null}}var T=a("d3"),V=a("../../plot_api/plot_api"),X=a("../../components/fx"),ba=a("../../lib"),aa=a("../../components/drawing"),ka=a("tinycolor2"),ha=a("../../lib/svg_text_utils");G.exports=function(ca,sa,ma,ra){q(ma,ca,ra,sa)}},{"../../components/drawing":637,"../../components/fx":655,"../../lib":750,"../../lib/svg_text_utils":774,"../../plot_api/plot_api":785,d3:169,tinycolor2:548}],1119:[function(a,G,C){var q=a("./parcats");
G.exports=function(n,m,f,b){var k=n._fullLayout,e=k._size;q(n,k._paper,m,{width:e.w,height:e.h,margin:{t:e.t,r:e.r,b:e.b,l:e.l}},f,b)}},{"./parcats":1118}],1120:[function(a,G,C){C=a("../../components/colorscale/attributes");var q=a("../../plots/cartesian/layout_attributes"),n=a("../../plots/font_attributes"),m=a("../../plots/domain").attributes,f=a("../../lib/extend").extendFlat;a=a("../../plot_api/plot_template").templatedArray;G.exports={domain:m({name:"parcoords",trace:!0,editType:"plot"}),labelangle:{valType:"angle",
dflt:0,editType:"plot"},labelside:{valType:"enumerated",values:["top","bottom"],dflt:"top",editType:"plot"},labelfont:n({editType:"plot"}),tickfont:n({editType:"plot"}),rangefont:n({editType:"plot"}),dimensions:a("dimension",{label:{valType:"string",editType:"plot"},tickvals:f({},q.tickvals,{editType:"plot"}),ticktext:f({},q.ticktext,{editType:"plot"}),tickformat:f({},q.tickformat,{editType:"plot"}),visible:{valType:"boolean",dflt:!0,editType:"plot"},range:{valType:"info_array",items:[{valType:"number",
editType:"plot"},{valType:"number",editType:"plot"}],editType:"plot"},constraintrange:{valType:"info_array",freeLength:!0,dimensions:"1-2",items:[{valType:"number",editType:"plot"},{valType:"number",editType:"plot"}],editType:"plot"},multiselect:{valType:"boolean",dflt:!0,editType:"plot"},values:{valType:"data_array",editType:"calc"},editType:"calc"}),line:f({editType:"calc"},C("line",{colorscaleDflt:"Viridis",autoColorDflt:!1,editTypeOverride:"calc"}))}},{"../../components/colorscale/attributes":622,
"../../lib/extend":740,"../../plot_api/plot_template":788,"../../plots/cartesian/layout_attributes":813,"../../plots/domain":826,"../../plots/font_attributes":827}],1121:[function(a,G,C){function q(E,L,Q,S){a:{for(var R=0;R<S.length;R++)if(Q>=S[R][0]&&Q<=S[R][1]){S=!0;break a}S=!1}if(S)return Q;E=E?-1:1;var O=0;S=L.length-1;0>E&&(R=O,O=S,S=R);for(var T=R=L[O];E*O<E*S;O+=E){var V=O+E,X=L[V];if(E*Q<E*(R*(1-M)+X*M))return R*(1-N)+T*N;if(E*Q<E*X||V===S)return X*(1-N)+R*N;T=R;R=X}}function n(E){E.attr("x",
-D.bar.captureWidth/2).attr("width",D.bar.captureWidth)}function m(E){E.attr("visibility","visible").style("visibility","visible").attr("fill","yellow").attr("opacity",0)}function f(E){if(!E.brush.filterSpecified)return"0,"+E.height;for(var L=b(E.brush.filter.getConsolidated(),E.height),Q=[0],S,R,O=L.length?L[0][0]:null,T=0;T<L.length;T++)S=L[T],R=S[1]-S[0],Q.push(O),Q.push(R),R=T+1,R<L.length&&(O=L[R][0]-S[1]);Q.push(E.height);return Q}function b(E,L){return E.map(function(Q){return Q.map(function(S){return Math.max(0,
S*L)}).sort(J)})}function k(){u.select(document.body).style("cursor",null)}function e(E){E.attr("stroke-dasharray",f)}function h(E,L){E=u.select(E).selectAll(".highlight, .highlight-shadow");L=L?E.transition().duration(D.bar.snapDuration).each("end",L):E;e(L)}function l(E,L){var Q=E.brush,S={};if(Q.filterSpecified){var R=E.height;Q=Q.filter.getConsolidated();var O=b(Q,R),T=NaN,V=NaN,X=NaN;for(R=0;R<=O.length;R++){var ba=O[R];if(ba&&ba[0]<=L&&L<=ba[1]){T=R;break}else if(V=R?R-1:NaN,ba&&ba[0]>L){X=
R;break}}R=T;isNaN(R)&&(R=isNaN(V)||isNaN(X)?isNaN(V)?X:V:L-O[V][1]<O[X][0]-L?V:X);isNaN(R)||(O=O[R],V=D.bar.handleHeight,V=L>O[1]+V||L<O[0]-V?void 0:L>=.9*O[1]+.1*O[0]?"n":L<=.9*O[0]+.1*O[1]?"s":"ns",V&&(S.interval=Q[R],S.intervalPix=O,S.region=V))}if(E.ordinal&&!S.region)for(Q=E.unitTickvals,E=E.unitToPaddedPx.invert(L),R=0;R<Q.length;R++)if(L=[.25*Q[Math.max(R-1,0)]+.75*Q[R],.25*Q[Math.min(R+1,Q.length-1)]+.75*Q[R]],E>=L[0]&&E<=L[1]){S.clickableOrdinalRange=L;break}return S}function c(E,L){u.event.sourceEvent.stopPropagation();
E=L.height-u.mouse(E)[1]-2*D.verticalPadding;var Q=L.unitToPaddedPx.invert(E),S=L.brush,R=l(L,E),O=R.interval,T=S.svgBrush;T.wasDragged=!1;T.grabbingBar="ns"===R.region;if(T.grabbingBar){var V=O.map(L.unitToPaddedPx);T.grabPoint=E-V[0]-D.verticalPadding;T.barLength=V[1]-V[0]}T.clickableOrdinalRange=R.clickableOrdinalRange;T.stayingIntervals=L.multiselect&&S.filterSpecified?S.filter.getConsolidated():[];O&&(T.stayingIntervals=T.stayingIntervals.filter(function(X){return X[0]!==O[0]&&X[1]!==O[1]}));
T.startExtent=R.region?O["s"===R.region?1:0]:Q;L.parent.inBrushDrag=!0;T.brushStartCallback()}function g(E,L){u.event.sourceEvent.stopPropagation();var Q=L.height-u.mouse(E)[1]-2*D.verticalPadding,S=L.brush.svgBrush;S.wasDragged=!0;S._dragging=!0;S.newExtent=S.grabbingBar?[Q-S.grabPoint,Q+S.barLength-S.grabPoint].map(L.unitToPaddedPx.invert):[S.startExtent,L.unitToPaddedPx.invert(Q)].sort(J);L.brush.filterSpecified=!0;S.extent=S.stayingIntervals.concat([S.newExtent]);S.brushCallback(L);h(E.parentNode)}
function d(E,L){var Q=L.brush,S=Q.filter,R=Q.svgBrush;R._dragging||(p(E,L),g(E,L),L.brush.svgBrush.wasDragged=!1);R._dragging=!1;u.event.sourceEvent.stopPropagation();var O=R.grabbingBar;R.grabbingBar=!1;R.grabLocation=void 0;L.parent.inBrushDrag=!1;k();if(R.wasDragged)if(O=function(){S.set(S.getConsolidated())},L.ordinal){var T=L.unitTickvals;T[T.length-1]<T[0]&&T.reverse();R.newExtent=[q(0,T,R.newExtent[0],R.stayingIntervals),q(1,T,R.newExtent[1],R.stayingIntervals)];T=R.newExtent[1]>R.newExtent[0];
R.extent=R.stayingIntervals.concat(T?[R.newExtent]:[]);R.extent.length||y(Q);R.brushCallback(L);T?h(E.parentNode,O):(O(),h(E.parentNode))}else O();else R.wasDragged=void 0,R.clickableOrdinalRange?Q.filterSpecified&&L.multiselect?R.extent.push(R.clickableOrdinalRange):(R.extent=[R.clickableOrdinalRange],Q.filterSpecified=!0):O?(R.extent=R.stayingIntervals,0===R.extent.length&&y(Q)):y(Q),R.brushCallback(L),h(E.parentNode);R.brushEndCallback(Q.filterSpecified?S.getConsolidated():[])}function p(E,L){E=
L.height-u.mouse(E)[1]-2*D.verticalPadding;L=l(L,E);E="crosshair";L.clickableOrdinalRange?E="pointer":L.region&&(E=L.region+"-resize");u.select(document.body).style("cursor",E)}function r(E){E.on("mousemove",function(L){u.event.preventDefault();L.parent.inBrushDrag||p(this,L)}).on("mouseleave",function(L){L.parent.inBrushDrag||k()}).call(u.behavior.drag().on("dragstart",function(L){c(this,L)}).on("drag",function(L){g(this,L)}).on("dragend",function(L){d(this,L)}))}function t(E,L){return E[0]-L[0]}
function w(E){var L=E.selectAll(".background").data(I);L.enter().append("rect").classed("background",!0).call(n).call(m).style("pointer-events","auto").attr("transform","translate(0 "+D.verticalPadding+")");L.call(r).attr("height",function(Q){return Q.height-D.verticalPadding});L=E.selectAll(".highlight-shadow").data(I);L.enter().append("line").classed("highlight-shadow",!0).attr("x",-D.bar.width/2).attr("stroke-width",D.bar.width+D.bar.strokeWidth).attr("stroke",D.bar.strokeColor).attr("opacity",
D.bar.strokeOpacity).attr("stroke-linecap","butt");L.attr("y1",function(Q){return Q.height}).call(e);E=E.selectAll(".highlight").data(I);E.enter().append("line").classed("highlight",!0).attr("x",-D.bar.width/2).attr("stroke-width",D.bar.width-D.bar.strokeWidth).attr("stroke",D.bar.fillColor).attr("opacity",D.bar.fillOpacity).attr("stroke-linecap","butt");E.attr("y1",function(Q){return Q.height}).call(e)}function x(E){return E.svgBrush.extent.map(function(L){return L.slice()})}function y(E){E.filterSpecified=
!1;E.svgBrush.extent=[[-Infinity,Infinity]]}function A(E){return function(L){L=L.brush;var Q=x(L).slice();L.filter.set(Q);E()}}function z(E){E=E.slice();for(var L=[],Q,S=E.shift();S;){for(Q=S.slice();(S=E.shift())&&S[0]<=Q[1];)Q[1]=Math.max(Q[1],S[1]);L.push(Q)}1===L.length&&L[0][0]>L[0][1]&&(L=[]);return L}function F(){var E=[],L,Q;return{set:function(S){E=S.map(function(R){return R.slice().sort(J)}).sort(t);1===E.length&&-Infinity===E[0][0]&&Infinity===E[0][1]&&(E=[[0,-1]]);L=z(E);Q=E.reduce(function(R,
O){return[Math.min(R[0],O[0]),Math.max(R[1],O[1])]},[Infinity,-Infinity])},get:function(){return E.slice()},getConsolidated:function(){return L},getBounds:function(){return Q}}}var D=a("./constants"),u=a("d3"),B=a("../../lib/gup").keyFun,I=a("../../lib/gup").repeat,J=a("../../lib").sorterAsc,N=D.bar.snapRatio,M=D.bar.snapClose;G.exports={makeBrush:function(E,L,Q,S,R,O){E=F();E.set(Q);return{filter:E,filterSpecified:L,svgBrush:{extent:[],brushStartCallback:S,brushCallback:A(R),brushEndCallback:O}}},
ensureAxisBrush:function(E){E=E.selectAll("."+D.cn.axisBrush).data(I,B);E.enter().append("g").classed(D.cn.axisBrush,!0);w(E)},cleanRanges:function(E,L){Array.isArray(E[0])?(E=E.map(function(S){return S.sort(J)}),E=L.multiselect?z(E.sort(t)):[E[0]]):E=[E.sort(J)];if(L.tickvals){var Q=L.tickvals.slice().sort(J);E=E.map(function(S){S=[q(0,Q,S[0],[]),q(1,Q,S[1],[])];if(S[1]>S[0])return S}).filter(function(S){return S});if(!E.length)return}return 1<E.length?E:E[0]}}},{"../../lib":750,"../../lib/gup":747,
"./constants":1124,d3:169}],1122:[function(a,G,C){var q=a("d3"),n=a("../../plots/get_data").getModuleCalcData,m=a("./plot"),f=a("../../constants/xmlns_namespaces");C.name="parcoords";C.plot=function(b){var k=n(b.calcdata,"parcoords")[0];k.length&&m(b,k)};C.clean=function(b,k,e,h){b=h._has&&h._has("parcoords");k=k._has&&k._has("parcoords");b&&!k&&(h._paperdiv.selectAll(".parcoords").remove(),h._glimages.selectAll("*").remove())};C.toSVG=function(b){var k=b._fullLayout._glimages,e=q.select(b).selectAll(".svg-container");
e.filter(function(h,l){return l===e.size()-1}).selectAll(".gl-canvas-context, .gl-canvas-focus").each(function(){var h=this.toDataURL("image/png");k.append("svg:image").attr({xmlns:f.svg,"xlink:href":h,preserveAspectRatio:"none",x:0,y:0,width:this.width,height:this.height})});window.setTimeout(function(){q.selectAll("#filterBarPattern").attr("id","filterBarPattern")},60)}},{"../../constants/xmlns_namespaces":726,"../../plots/get_data":836,"./plot":1131,d3:169}],1123:[function(a,G,C){var q=a("../../lib").isArrayOrTypedArray,
n=a("../../components/colorscale"),m=a("../../lib/gup").wrap;G.exports=function(f,b){if(n.hasColorscale(b,"line")&&q(b.line.color)){var k=b.line.color;var e=n.extractOpts(b.line).colorscale;n.calc(f,b,{vals:k,containerStr:"line",cLetter:"c"})}else{f=b._length;k=Array(f);for(e=0;e<f;e++)k[e]=.5;e=[[0,b.line.color],[1,b.line.color]]}return m({lineColor:k,cscale:e})}},{"../../components/colorscale":627,"../../lib":750,"../../lib/gup":747}],1124:[function(a,G,C){G.exports={maxDimensionCount:60,overdrag:45,
verticalPadding:2,tickDistance:50,canvasPixelRatio:1,blockLineCount:5E3,layers:["contextLineLayer","focusLineLayer","pickLineLayer"],axisTitleOffset:28,axisExtentOffset:10,deselectedLineColor:"#777",bar:{width:4,captureWidth:10,fillColor:"magenta",fillOpacity:1,snapDuration:150,snapRatio:.25,snapClose:.01,strokeColor:"white",strokeOpacity:1,strokeWidth:1,handleHeight:8,handleOpacity:1,handleOverlap:0},cn:{axisExtentText:"axis-extent-text",parcoordsLineLayers:"parcoords-line-layers",parcoordsLineLayer:"parcoords-lines",
parcoords:"parcoords",parcoordsControlView:"parcoords-control-view",yAxis:"y-axis",axisOverlays:"axis-overlays",axis:"axis",axisHeading:"axis-heading",axisTitle:"axis-title",axisExtent:"axis-extent",axisExtentTop:"axis-extent-top",axisExtentTopText:"axis-extent-top-text",axisExtentBottom:"axis-extent-bottom",axisExtentBottomText:"axis-extent-bottom-text",axisBrush:"axis-brush"},id:{filterBarPattern:"filter-bar-pattern"}}},{}],1125:[function(a,G,C){function q(p,r,t,w,x){var y=x("line.color",t);if(f(p,
"line")&&m.isArrayOrTypedArray(y)){if(y.length)return x("line.colorscale"),b(p,r,w,x,{prefix:"line.",cLetter:"c"}),y.length;r.line.color=t}return Infinity}function n(p,r,t,w){function x(A,z){return m.coerce(p,r,l.dimensions,A,z)}t=x("values");var y=x("visible");t&&t.length||(y=r.visible=!1);y&&(x("label"),x("tickvals"),x("ticktext"),x("tickformat"),t=x("range"),r._ax={_id:"y",type:"linear",showexponent:"all",exponentformat:"B",range:t},h.setConvert(r._ax,w.layout),x("multiselect"),w=x("constraintrange"))&&
(r.constraintrange=c.cleanRanges(w,r))}var m=a("../../lib"),f=a("../../components/colorscale/helpers").hasColorscale,b=a("../../components/colorscale/defaults"),k=a("../../plots/domain").defaults,e=a("../../plots/array_container_defaults"),h=a("../../plots/cartesian/axes"),l=a("./attributes"),c=a("./axisbrush"),g=a("./constants").maxDimensionCount,d=a("./merge_length");G.exports=function(p,r,t,w){function x(A,z){return m.coerce(p,r,l,A,z)}var y=p.dimensions;Array.isArray(y)&&y.length>g&&(m.log("parcoords traces support up to "+
g+" dimensions at the moment"),y.splice(g));y=e(p,r,{name:"dimensions",layout:w,handleItemDefaults:n});t=q(p,r,t,w,x);k(r,w,x);Array.isArray(y)&&y.length||(r.visible=!1);d(r,y,"values",t);w={family:w.font.family,size:Math.round(w.font.size/1.2),color:w.font.color};m.coerceFont(x,"labelfont",w);m.coerceFont(x,"tickfont",w);m.coerceFont(x,"rangefont",w);x("labelangle");x("labelside")}},{"../../components/colorscale/defaults":625,"../../components/colorscale/helpers":626,"../../lib":750,"../../plots/array_container_defaults":794,
"../../plots/cartesian/axes":799,"../../plots/domain":826,"./attributes":1120,"./axisbrush":1121,"./constants":1124,"./merge_length":1129}],1126:[function(a,G,C){var q=a("../../lib").isTypedArray;C.convertTypedArray=function(n){return q(n)?Array.prototype.slice.call(n):n};C.isOrdinal=function(n){return!!n.tickvals};C.isVisible=function(n){return n.visible||!("visible"in n)}},{"../../lib":750}],1127:[function(a,G,C){G.exports={attributes:a("./attributes"),supplyDefaults:a("./defaults"),calc:a("./calc"),
plot:a("./plot"),colorbar:{container:"line",min:"cmin",max:"cmax"},moduleType:"trace",name:"parcoords",basePlotModule:a("./base_plot"),categories:["gl","regl","noOpacity","noHover"],meta:{}}},{"./attributes":1120,"./base_plot":1122,"./calc":1123,"./defaults":1125,"./plot":1131}],1128:[function(a,G,C){function q(y,A,z,F,D){var u=y._gl;u.enable(u.SCISSOR_TEST);u.scissor(A,z,F,D);y.clear({color:[0,0,0,0],depth:1})}function n(y,A,z,F,D,u){function B(J){var N=Math.min(F,D-J*F);0===J&&(window.cancelAnimationFrame(z.currentRafs[I]),
delete z.currentRafs[I],q(y,u.scissorX,u.scissorY,u.scissorWidth,u.viewBoxSize[1]));z.clearOnly||(u.count=2*N,u.offset=2*J*F,A(u),J*F+N<D&&(z.currentRafs[I]=window.requestAnimationFrame(function(){B(J+1)})),z.drawCompleted=!1)}var I=u.key;z.drawCompleted||(y.read({x:0,y:0,width:1,height:1,data:t}),z.drawCompleted=!0);B(0)}function m(y,A){for(var z=Array(256),F=0;256>F;F++)z[F]=y(F/255).concat(A);return z}function f(y,A,z){for(var F=Array(y*(p+4)),D=0,u=0;u<y;u++){for(var B=0;B<p;B++)F[D++]=B<A.length?
A[B].paddedUnitValues[u]:.5;F[D++]=(u>>>16)%256/255;F[D++]=(u>>>8)%256/255;F[D++]=(u>>>0)%256/255;F[D++]=Math.max(1E-6,Math.min(.999999,z[u]))}return F}function b(y,A,z){for(var F=Array(8*A),D=0,u=0;u<A;u++)for(var B=0;2>B;B++)for(var I=0;4>I;I++){var J=4*y+I,N=z[64*u+J];63===J&&0===B&&(N*=-1);F[D++]=N}return F}function k(y){y="0"+y;return y.substr(y.length-2)}function e(y){return y<p?"p"+k(y+1)+"_"+k(y+4):"colors"}function h(y,A,z){for(var F=0;F<=p;F+=4)y[e(F)](b(F/4,A,z))}function l(y){for(var A=
{},z=0;z<=p;z+=4)A[e(z)]=y.buffer({usage:"dynamic",type:"float",data:new Uint8Array(0)});return A}function c(y){var A=Math.max(0,Math.floor(2047*y[0]),0);y=Math.min(2047,Math.ceil(2047*y[1]),2047);return[Math.min(A,y),Math.max(A,y)]}C=a("glslify");var g=C(["precision highp float;\n#define GLSLIFY 1\n\nvarying vec4 fragColor;\n\nattribute vec4 p01_04, p05_08, p09_12, p13_16,\n               p17_20, p21_24, p25_28, p29_32,\n               p33_36, p37_40, p41_44, p45_48,\n               p49_52, p53_56, p57_60, colors;\n\nuniform mat4 dim0A, dim1A, dim0B, dim1B, dim0C, dim1C, dim0D, dim1D,\n             loA, hiA, loB, hiB, loC, hiC, loD, hiD;\n\nuniform vec2 resolution, viewBoxPos, viewBoxSize;\nuniform sampler2D mask, palette;\nuniform float maskHeight;\nuniform float drwLayer; // 0: context, 1: focus, 2: pick\nuniform vec4 contextColor;\n\nbool isPick    \x3d (drwLayer \x3e 1.5);\nbool isContext \x3d (drwLayer \x3c 0.5);\n\nconst vec4 ZEROS \x3d vec4(0.0, 0.0, 0.0, 0.0);\nconst vec4 UNITS \x3d vec4(1.0, 1.0, 1.0, 1.0);\n\nfloat val(mat4 p, mat4 v) {\n    return dot(matrixCompMult(p, v) * UNITS, UNITS);\n}\n\nfloat axisY(float ratio, mat4 A, mat4 B, mat4 C, mat4 D) {\n    float y1 \x3d val(A, dim0A) + val(B, dim0B) + val(C, dim0C) + val(D, dim0D);\n    float y2 \x3d val(A, dim1A) + val(B, dim1B) + val(C, dim1C) + val(D, dim1D);\n    return y1 * (1.0 - ratio) + y2 * ratio;\n}\n\nint iMod(int a, int b) {\n    return a - b * (a / b);\n}\n\nbool fOutside(float p, float lo, float hi) {\n    return (lo \x3c hi) \x26\x26 (lo \x3e p || p \x3e hi);\n}\n\nbool vOutside(vec4 p, vec4 lo, vec4 hi) {\n    return (\n        fOutside(p[0], lo[0], hi[0]) ||\n        fOutside(p[1], lo[1], hi[1]) ||\n        fOutside(p[2], lo[2], hi[2]) ||\n        fOutside(p[3], lo[3], hi[3])\n    );\n}\n\nbool mOutside(mat4 p, mat4 lo, mat4 hi) {\n    return (\n        vOutside(p[0], lo[0], hi[0]) ||\n        vOutside(p[1], lo[1], hi[1]) ||\n        vOutside(p[2], lo[2], hi[2]) ||\n        vOutside(p[3], lo[3], hi[3])\n    );\n}\n\nbool outsideBoundingBox(mat4 A, mat4 B, mat4 C, mat4 D) {\n    return mOutside(A, loA, hiA) ||\n           mOutside(B, loB, hiB) ||\n           mOutside(C, loC, hiC) ||\n           mOutside(D, loD, hiD);\n}\n\nbool outsideRasterMask(mat4 A, mat4 B, mat4 C, mat4 D) {\n    mat4 pnts[4];\n    pnts[0] \x3d A;\n    pnts[1] \x3d B;\n    pnts[2] \x3d C;\n    pnts[3] \x3d D;\n\n    for(int i \x3d 0; i \x3c 4; ++i) {\n        for(int j \x3d 0; j \x3c 4; ++j) {\n            for(int k \x3d 0; k \x3c 4; ++k) {\n                if(0 \x3d\x3d iMod(\n                    int(255.0 * texture2D(mask,\n                        vec2(\n                            (float(i * 2 + j / 2) + 0.5) / 8.0,\n                            (pnts[i][j][k] * (maskHeight - 1.0) + 1.0) / maskHeight\n                        ))[3]\n                    ) / int(pow(2.0, float(iMod(j * 4 + k, 8)))),\n                    2\n                )) return true;\n            }\n        }\n    }\n    return false;\n}\n\nvec4 position(bool isContext, float v, mat4 A, mat4 B, mat4 C, mat4 D) {\n    float x \x3d 0.5 * sign(v) + 0.5;\n    float y \x3d axisY(x, A, B, C, D);\n    float z \x3d 1.0 - abs(v);\n\n    z +\x3d isContext ? 0.0 : 2.0 * float(\n        outsideBoundingBox(A, B, C, D) ||\n        outsideRasterMask(A, B, C, D)\n    );\n\n    return vec4(\n        2.0 * (vec2(x, y) * viewBoxSize + viewBoxPos) / resolution - 1.0,\n        z,\n        1.0\n    );\n}\n\nvoid main() {\n    mat4 A \x3d mat4(p01_04, p05_08, p09_12, p13_16);\n    mat4 B \x3d mat4(p17_20, p21_24, p25_28, p29_32);\n    mat4 C \x3d mat4(p33_36, p37_40, p41_44, p45_48);\n    mat4 D \x3d mat4(p49_52, p53_56, p57_60, ZEROS);\n\n    float v \x3d colors[3];\n\n    gl_Position \x3d position(isContext, v, A, B, C, D);\n\n    fragColor \x3d\n        isContext ? vec4(contextColor) :\n        isPick ? vec4(colors.rgb, 1.0) : texture2D(palette, vec2(abs(v), 0.5));\n}\n"]),
d=C(["precision highp float;\n#define GLSLIFY 1\n\nvarying vec4 fragColor;\n\nvoid main() {\n    gl_FragColor \x3d fragColor;\n}\n"]),p=a("./constants").maxDimensionCount,r=a("../../lib"),t=new Uint8Array(4),w=new Uint8Array(4),x={shape:[256,1],format:"rgba",type:"uint8",mag:"nearest",min:"nearest"};G.exports=function(y,A){function z(O){I=O.model;J=O.viewModel;N=J.dimensions.slice();M=N[0]?N[0].values.length:0;var T=I.lines;O=D?T.color.map(function(V,X){return X/T.color.length}):T.color;O=f(M,N,O);
h(E,M,O);F||D||(Q=u.texture(r.extendFlat({data:m(I.unitToColor,255)},x)))}var F=A.context,D=A.pick,u=A.regl,B={currentRafs:{},drawCompleted:!0,clearOnly:!1},I,J,N,M,E=l(u),L,Q=u.texture(x),S=[];z(A);var R=u({profile:!1,blend:{enable:F,func:{srcRGB:"src alpha",dstRGB:"one minus src alpha",srcAlpha:1,dstAlpha:1},equation:{rgb:"add",alpha:"add"},color:[0,0,0,0]},depth:{enable:!F,mask:!0,func:"less",range:[0,1]},cull:{enable:!0,face:"back"},scissor:{enable:!0,box:{x:u.prop("scissorX"),y:u.prop("scissorY"),
width:u.prop("scissorWidth"),height:u.prop("scissorHeight")}},viewport:{x:u.prop("viewportX"),y:u.prop("viewportY"),width:u.prop("viewportWidth"),height:u.prop("viewportHeight")},dither:!1,vert:g,frag:d,primitive:"lines",lineWidth:1,attributes:E,uniforms:{resolution:u.prop("resolution"),viewBoxPos:u.prop("viewBoxPos"),viewBoxSize:u.prop("viewBoxSize"),dim0A:u.prop("dim0A"),dim1A:u.prop("dim1A"),dim0B:u.prop("dim0B"),dim1B:u.prop("dim1B"),dim0C:u.prop("dim0C"),dim1C:u.prop("dim1C"),dim0D:u.prop("dim0D"),
dim1D:u.prop("dim1D"),loA:u.prop("loA"),hiA:u.prop("hiA"),loB:u.prop("loB"),hiB:u.prop("hiB"),loC:u.prop("loC"),hiC:u.prop("hiC"),loD:u.prop("loD"),hiD:u.prop("hiD"),palette:Q,contextColor:u.prop("contextColor"),mask:u.prop("maskTexture"),drwLayer:u.prop("drwLayer"),maskHeight:u.prop("maskHeight")},offset:u.prop("offset"),count:u.prop("count")});return{render:function(O,T,V){var X=O.length,ba,aa=Infinity,ka=-Infinity;for(ba=0;ba<X;ba++){if(O[ba].dim0.canvasX<aa){aa=O[ba].dim0.canvasX;var ha=ba}if(O[ba].dim1.canvasX>
ka){ka=O[ba].dim1.canvasX;var ca=ba}}0===X&&q(u,0,0,I.canvasWidth,I.canvasHeight);var sa=F,ma;ba=[[],[]];for(ka=0;64>ka;ka++)aa=!sa&&ka<N.length?N[ka].brush.filter.getBounds():[-Infinity,Infinity],ba[0][ka]=aa[0],ba[1][ka]=aa[1];var ra=Array(16384);for(aa=0;16384>aa;aa++)ra[aa]=255;if(!sa)for(aa=0;aa<N.length;aa++){ka=aa%8;sa=(aa-ka)/8;var qa=Math.pow(2,ka),Y=N[aa].brush.filter.get();if(!(2>Y.length)){var pa=c(Y[0])[1];for(ma=1;ma<Y.length;ma++){var oa=c(Y[ma]);for(ka=pa+1;ka<oa[0];ka++)ra[8*ka+sa]&=
~qa;pa=Math.max(pa,oa[1])}}}aa={shape:[8,2048],format:"alpha",type:"uint8",mag:"nearest",min:"nearest",data:ra};L?L(aa):L=u.texture(aa);aa={maskTexture:L,maskHeight:2048,loA:ba[0].slice(0,16),loB:ba[0].slice(16,32),loC:ba[0].slice(32,48),loD:ba[0].slice(48,64),hiA:ba[1].slice(0,16),hiB:ba[1].slice(16,32),hiC:ba[1].slice(32,48),hiD:ba[1].slice(48,64)};for(ba=0;ba<X;ba++){var ua=O[ba];qa=ua.dim0.crossfilterDimensionIndex;Y=ua.dim1.crossfilterDimensionIndex;pa=ua.canvasX;oa=ua.canvasY;ka=pa+ua.panelSizeX;
if(T||!S[qa]||S[qa][0]!==pa||S[qa][1]!==ka){S[qa]=[pa,ka];ka=I;ra=ha;sa=ca;ma=ba;var ya=ua.panelSizeX,ja=ua.panelSizeY;ua=ua.dim0.crossfilterDimensionIndex;for(var za=F?0:D?2:1,Ba=aa,Ma=[[],[]],Oa=0;64>Oa;Oa++)Ma[0][Oa]=Oa===qa?1:0,Ma[1][Oa]=Oa===Y?1:0;Oa=ka.lines.canvasOverdrag;var Ia=ka.domain,Pa=ka.canvasWidth,Fa=ka.canvasHeight,Na=ka.deselectedLines.color;ka=r.extendFlat({key:ua,resolution:[Pa,Fa],viewBoxPos:[pa+Oa,oa],viewBoxSize:[ya,ja],i0:qa,i1:Y,dim0A:Ma[0].slice(0,16),dim0B:Ma[0].slice(16,
32),dim0C:Ma[0].slice(32,48),dim0D:Ma[0].slice(48,64),dim1A:Ma[1].slice(0,16),dim1B:Ma[1].slice(16,32),dim1C:Ma[1].slice(32,48),dim1D:Ma[1].slice(48,64),drwLayer:za,contextColor:[Na[0]/255,Na[1]/255,Na[2]/255,1>Na[3]?Na[3]:Math.max(1/255,Math.pow(1/ka.lines.color.length,1/3))],scissorX:(ma===ra?0:pa+Oa)+(ka.pad.l-Oa)+ka.layoutWidth*Ia.x[0],scissorWidth:(ma===sa?Pa-pa+Oa:ya+.5)+(ma===ra?pa+Oa:0),scissorY:oa+ka.pad.b+ka.layoutHeight*Ia.y[0],scissorHeight:ja,viewportX:ka.pad.l-Oa+ka.layoutWidth*Ia.x[0],
viewportY:ka.pad.b+ka.layoutHeight*Ia.y[0],viewportWidth:Pa,viewportHeight:Fa},Ba);B.clearOnly=V;n(u,R,B,T?I.lines.blockLineCount:M,M,ka)}}},readPixel:function(O,T){u.read({x:O,y:T,width:1,height:1,data:w});return w},readPixels:function(O,T,V,X){var ba=new Uint8Array(4*V*X);u.read({x:O,y:T,width:V,height:X,data:ba});return ba},destroy:function(){y.style["pointer-events"]="none";Q.destroy();L&&L.destroy();for(var O in E)E[O].destroy()},update:z}}},{"../../lib":750,"./constants":1124,glslify:413}],
1129:[function(a,G,C){G.exports=function(q,n,m,f){f||(f=Infinity);var b;for(b=0;b<n.length;b++){var k=n[b];k.visible&&(f=Math.min(f,k[m].length))}Infinity===f&&(f=0);q._length=f;for(b=0;b<n.length;b++)k=n[b],k.visible&&(k._length=f);return f}},{}],1130:[function(a,G,C){function q(R,O){return m(D.aggNums(Math.min,null,R,O),D.aggNums(Math.max,null,R,O))}function n(R){var O=R.range;return O?m(O[0],O[1]):q(R.values,R._length)}function m(R,O){if(isNaN(R)||!isFinite(R))R=0;if(isNaN(O)||!isFinite(O))O=0;
R===O&&(0===R?(--R,O+=1):(R*=.9,O*=1.1));return[R,O]}function f(R,O){return O?function(T,V){V=O[V];return null===V||void 0===V?R(T):V}:R}function b(R,O,T,V,X){var ba=n(T);return V?A.scale.ordinal().domain(V.map(f(A.format(T.tickformat),X))).range(V.map(function(aa){return R-O+(aa-ba[0])/(ba[1]-ba[0])*(2*O-R)})):A.scale.linear().domain(ba).range([R-O,O])}function k(R,O){return A.scale.linear().range([O,R-O])}function e(R,O){return A.scale.linear().domain(n(R)).range([O,1-O])}function h(R){if(R.tickvals){var O=
n(R);return A.scale.ordinal().domain(R.tickvals).range(R.tickvals.map(function(T){return(T-O[0])/(O[1]-O[0])}))}}function l(R){var O=R.map(function(ba){return ba[0]}),T=R.map(function(ba){ba=z(ba[1]);return A.rgb("rgb("+ba[0]+","+ba[1]+","+ba[2]+")")}),V=function(ba){return function(aa){return aa[ba]}},X=["r","g","b"].map(function(ba){return A.scale.linear().clamp(!0).domain(O).range(T.map(V(ba)))});return function(ba){return X.map(function(aa){return aa(ba)})}}function c(R){return R.dimensions.some(function(O){return O.brush.filterSpecified})}
function g(R,O,T){var V=M(O),X=V.trace,ba=E.convertTypedArray(V.lineColor),aa=X.line;O={color:z(L.deselectedLineColor)};var ka=I.extractOpts(aa);V=ka.reversescale?I.flipScale(V.cscale):V.cscale;var ha=X.domain,ca=X.dimensions,sa=R.width,ma=X.labelangle,ra=X.labelside,qa=X.labelfont,Y=X.tickfont,pa=X.rangefont;X=D.extendDeepNoArrays({},aa,{color:ba.map(A.scale.linear().domain(n({values:ba,range:[ka.min,ka.max],_length:X._length}))),blockLineCount:L.blockLineCount,canvasOverdrag:L.overdrag*L.canvasPixelRatio});
ba=R.margin||{l:80,r:80,t:100,b:80};aa=Math.floor(sa*(ha.x[1]-ha.x[0]));ka=Math.floor(R.height*(ha.y[1]-ha.y[0]));return{key:T,colCount:ca.filter(E.isVisible).length,dimensions:ca,tickDistance:L.tickDistance,unitToColor:l(V),lines:X,deselectedLines:O,labelAngle:ma,labelSide:ra,labelFont:qa,tickFont:Y,rangeFont:pa,layoutWidth:sa,layoutHeight:R.height,domain:ha,translateX:ha.x[0]*sa,translateY:R.height-ha.y[1]*R.height,pad:ba,canvasWidth:aa*L.canvasPixelRatio+2*X.canvasOverdrag,canvasHeight:ka*L.canvasPixelRatio,
width:aa,height:ka,canvasPixelRatio:L.canvasPixelRatio}}function d(R,O,T){var V=T.width,X=T.height,ba=T.dimensions,aa=T.canvasPixelRatio,ka=function(ra){return V*ra/Math.max(1,T.colCount-1)},ha=L.verticalPadding/X,ca=k(X,L.verticalPadding),sa={key:T.key,xScale:ka,model:T,inBrushDrag:!1},ma={};sa.dimensions=ba.filter(E.isVisible).map(function(ra,qa){function Y(Pa,Fa){return{val:Pa,text:Ma[Fa]}}function pa(Pa,Fa){return Pa.val-Fa.val}var oa=e(ra,ha),ua=ma[ra.label];ma[ra.label]=(ua||0)+1;ua=ra.label+
(ua?"__"+ua:"");var ya=ra.constraintrange,ja=ya&&ya.length;ja&&!Array.isArray(ya[0])&&(ya=[ya]);ya=ja?ya.map(function(Pa){return Pa.map(oa)}):[[-Infinity,Infinity]];var za=ra.values;za.length>ra._length&&(za=za.slice(0,ra._length));var Ba=ra.tickvals;if(Array.isArray(Ba)&&Ba.length){var Ma=ra.ticktext;Array.isArray(Ma)&&Ma.length?Ma.length>Ba.length?Ma=Ma.slice(0,Ba.length):Ba.length>Ma.length&&(Ba=Ba.slice(0,Ma.length)):Ma=Ba.map(A.format(ra.tickformat));for(var Oa=1;Oa<Ba.length;Oa++)if(Ba[Oa]<
Ba[Oa-1]){Oa=Ba.map(Y).sort(pa);for(var Ia=0;Ia<Ba.length;Ia++)Ba[Ia]=Oa[Ia].val,Ma[Ia]=Oa[Ia].text;break}}else Ba=void 0;za=E.convertTypedArray(za);return{key:ua,label:ra.label,tickFormat:ra.tickformat,tickvals:Ba,ticktext:Ma,ordinal:E.isOrdinal(ra),multiselect:ra.multiselect,xIndex:qa,crossfilterDimensionIndex:qa,visibleIndex:ra._index,height:X,values:za,paddedUnitValues:za.map(oa),unitTickvals:Ba&&Ba.map(oa),xScale:ka,x:ka(qa),canvasX:ka(qa)*aa,unitToPaddedPx:ca,domainScale:b(X,L.verticalPadding,
ra,Ba,Ma),ordinalScale:h(ra),parent:sa,model:T,brush:Q.makeBrush(R,ja,ya,function(){R.linePickActive(!1)},function(){sa.focusLayer&&sa.focusLayer.render(sa.panels,!0);var Pa=c(sa);!R.contextShown()&&Pa?(sa.contextLayer&&sa.contextLayer.render(sa.panels,!0),R.contextShown(!0)):R.contextShown()&&!Pa&&(sa.contextLayer&&sa.contextLayer.render(sa.panels,!0,!0),R.contextShown(!1))},function(Pa){sa.focusLayer.render(sa.panels,!0);sa.pickLayer&&sa.pickLayer.render(sa.panels,!0);R.linePickActive(!0);if(O&&
O.filterChanged){var Fa=oa.invert;Pa=Pa.map(function(Na){return Na.map(Fa).sort(D.sorterAsc)}).sort(function(Na,$a){return Na[0]-$a[0]});O.filterChanged(sa.key,ra._index,Pa)}})}});return sa}function p(R){R.classed(L.cn.axisExtentText,!0).attr("text-anchor","middle").style("cursor","default")}function r(){var R=!0,O=!1;return{linePickActive:function(T){return arguments.length?R=!!T:R},contextShown:function(T){return arguments.length?O=!!T:O}}}function t(R,O){var T=R*Math.PI/180;return{dir:"top"===
O?1:-1,dx:Math.sin(T),dy:Math.cos(T),degrees:R}}function w(R,O){var T=O.panels||(O.panels=[]);R=R.data();for(var V=0;V<R.length-1;V++){var X=T[V]||(T[V]={}),ba=R[V],aa=R[V+1];X.dim0=ba;X.dim1=aa;X.canvasX=ba.canvasX;X.panelSizeX=aa.canvasX-ba.canvasX;X.panelSizeY=O.model.canvasHeight;X.y=0;X.canvasY=0}}function x(R){for(var O=0;O<R.length;O++)for(var T=0;T<R[O].length;T++)for(var V=R[O][T].trace,X=V.dimensions,ba=0;ba<X.length;ba++){var aa=X[ba].values,ka=X[ba]._ax;ka&&(ka.range=ka.range?m(ka.range[0],
ka.range[1]):q(aa,V._length),ka.dtick||(ka.dtick=.01*(Math.abs(ka.range[1]-ka.range[0])||1)),ka.tickformat=X[ba].tickformat,F.calcTicks(ka),ka.cleanRange())}}function y(R,O){if(R.ordinal)return"";var T=R.domainScale.domain();return F.tickText(R.model.dimensions[R.visibleIndex]._ax,T[O?T.length-1:0],!1).text}var A=a("d3"),z=a("color-rgba"),F=a("../../plots/cartesian/axes"),D=a("../../lib"),u=a("../../lib/svg_text_utils"),B=a("../../components/drawing"),I=a("../../components/colorscale");C=a("../../lib/gup");
var J=C.keyFun,N=C.repeat,M=C.unwrap,E=a("./helpers"),L=a("./constants"),Q=a("./axisbrush"),S=a("./lines");G.exports=function(R,O,T,V){var X=R._fullLayout,ba=X._toppaper;X=X._glcontainer;x(O);var aa=r(),ka=O.filter(function(ma){return M(ma).trace.visible}).map(g.bind(0,T)).map(d.bind(0,aa,V));X.each(function(ma,ra){return D.extendFlat(ma,ka[ra])});O=X.selectAll(".gl-canvas").each(function(ma){ma.viewModel=ka[0];ma.model=ma.viewModel?ma.viewModel.model:null});var ha=null;O.filter(function(ma){return ma.pick}).style("pointer-events",
"auto").on("mousemove",function(ma){if(aa.linePickActive()&&ma.lineLayer&&V&&V.hover){var ra=A.event,qa=this.width,Y=this.height,pa=A.mouse(this),oa=pa[0];pa=pa[1];0>oa||0>pa||oa>=qa||pa>=Y||(Y=ma.lineLayer.readPixel(oa,Y-1-pa),Y=(qa=0!==Y[3])?Y[2]+256*(Y[1]+256*Y[0]):null,ma={x:oa,y:pa,clientX:ra.clientX,clientY:ra.clientY,dataIndex:ma.model.key,curveNumber:Y},Y!==ha&&(qa?V.hover(ma):V.unhover&&V.unhover(ma),ha=Y))}});O.style("opacity",function(ma){return ma.pick?0:1});ba.style("background","rgba(255, 255, 255, 0)");
ba=ba.selectAll("."+L.cn.parcoords).data(ka,J);ba.exit().remove();ba.enter().append("g").classed(L.cn.parcoords,!0).style("shape-rendering","crispEdges").style("pointer-events","none");ba.attr("transform",function(ma){return"translate("+ma.model.translateX+","+ma.model.translateY+")"});ba=ba.selectAll("."+L.cn.parcoordsControlView).data(N,J);ba.enter().append("g").classed(L.cn.parcoordsControlView,!0);ba.attr("transform",function(ma){return"translate("+ma.model.pad.l+","+ma.model.pad.t+")"});var ca=
ba.selectAll("."+L.cn.yAxis).data(function(ma){return ma.dimensions},J);ca.enter().append("g").classed(L.cn.yAxis,!0);ba.each(function(ma){w(ca,ma)});O.each(function(ma){if(ma.viewModel){!ma.lineLayer||V?ma.lineLayer=S(this,ma):ma.lineLayer.update(ma);if(ma.key||0===ma.key)ma.viewModel[ma.key]=ma.lineLayer;ma.lineLayer.render(ma.viewModel.panels,!ma.context||V)}});ca.attr("transform",function(ma){return"translate("+ma.xScale(ma.xIndex)+", 0)"});ca.call(A.behavior.drag().origin(function(ma){return ma}).on("drag",
function(ma){var ra=ma.parent;aa.linePickActive(!1);ma.x=Math.max(-L.overdrag,Math.min(ma.model.width+L.overdrag,A.event.x));ma.canvasX=ma.x*ma.model.canvasPixelRatio;ca.sort(function(qa,Y){return qa.x-Y.x}).each(function(qa,Y){qa.xIndex=Y;qa.x=ma===qa?qa.x:qa.xScale(qa.xIndex);qa.canvasX=qa.x*qa.model.canvasPixelRatio});w(ca,ra);ca.filter(function(qa){return 0!==Math.abs(ma.xIndex-qa.xIndex)}).attr("transform",function(qa){return"translate("+qa.xScale(qa.xIndex)+", 0)"});A.select(this).attr("transform",
"translate("+ma.x+", 0)");ca.each(function(qa,Y,pa){pa===ma.parent.key&&(ra.dimensions[Y]=qa)});ra.contextLayer&&ra.contextLayer.render(ra.panels,!1,!c(ra));ra.focusLayer.render&&ra.focusLayer.render(ra.panels)}).on("dragend",function(ma){var ra=ma.parent;ma.x=ma.xScale(ma.xIndex);ma.canvasX=ma.x*ma.model.canvasPixelRatio;w(ca,ra);A.select(this).attr("transform",function(qa){return"translate("+qa.x+", 0)"});ra.contextLayer&&ra.contextLayer.render(ra.panels,!1,!c(ra));ra.focusLayer&&ra.focusLayer.render(ra.panels);
ra.pickLayer&&ra.pickLayer.render(ra.panels,!0);aa.linePickActive(!0);V&&V.axesMoved&&V.axesMoved(ra.key,ra.dimensions.map(function(qa){return qa.crossfilterDimensionIndex}))}));ca.exit().remove();ba=ca.selectAll("."+L.cn.axisOverlays).data(N,J);ba.enter().append("g").classed(L.cn.axisOverlays,!0);ba.selectAll("."+L.cn.axis).remove();var sa=ba.selectAll("."+L.cn.axis).data(N,J);sa.enter().append("g").classed(L.cn.axis,!0);sa.each(function(ma){var ra=ma.model.height/ma.model.tickDistance,qa=ma.domainScale,
Y=qa.domain();A.select(this).call(A.svg.axis().orient("left").tickSize(4).outerTickSize(2).ticks(ra,ma.tickFormat).tickValues(ma.ordinal?Y:null).tickFormat(function(pa){return E.isOrdinal(ma)?pa:F.tickText(ma.model.dimensions[ma.visibleIndex]._ax,pa,!1).text}).scale(qa));B.font(sa.selectAll("text"),ma.model.tickFont)});sa.selectAll(".domain, .tick\x3eline").attr("fill","none").attr("stroke","black").attr("stroke-opacity",.25).attr("stroke-width","1px");sa.selectAll("text").style("text-shadow","1px 1px 1px #fff, -1px -1px 1px #fff, 1px -1px 1px #fff, -1px 1px 1px #fff").style("cursor",
"default");O=ba.selectAll("."+L.cn.axisHeading).data(N,J);O.enter().append("g").classed(L.cn.axisHeading,!0);O=O.selectAll("."+L.cn.axisTitle).data(N,J);O.enter().append("text").classed(L.cn.axisTitle,!0).attr("text-anchor","middle").style("cursor","ew-resize").style("pointer-events","auto");O.text(function(ma){return ma.label}).each(function(ma){var ra=A.select(this);B.font(ra,ma.model.labelFont);u.convertToTspans(ra,R)}).attr("transform",function(ma){var ra=t(ma.model.labelAngle,ma.model.labelSide),
qa=L.axisTitleOffset;return(0<ra.dir?"":"translate(0,"+(2*qa+ma.model.height)+")")+"rotate("+ra.degrees+")translate("+-qa*ra.dx+","+-qa*ra.dy+")"}).attr("text-anchor",function(ma){ma=t(ma.model.labelAngle,ma.model.labelSide);return 2*Math.abs(ma.dx)>Math.abs(ma.dy)?0>ma.dir*ma.dx?"start":"end":"middle"});O=ba.selectAll("."+L.cn.axisExtent).data(N,J);O.enter().append("g").classed(L.cn.axisExtent,!0);T=O.selectAll("."+L.cn.axisExtentTop).data(N,J);T.enter().append("g").classed(L.cn.axisExtentTop,!0);
T.attr("transform","translate(0,"+-L.axisExtentOffset+")");T=T.selectAll("."+L.cn.axisExtentTopText).data(N,J);T.enter().append("text").classed(L.cn.axisExtentTopText,!0).call(p);T.text(function(ma){return y(ma,!0)}).each(function(ma){B.font(A.select(this),ma.model.rangeFont)});O=O.selectAll("."+L.cn.axisExtentBottom).data(N,J);O.enter().append("g").classed(L.cn.axisExtentBottom,!0);O.attr("transform",function(ma){return"translate(0,"+(ma.model.height+L.axisExtentOffset)+")"});O=O.selectAll("."+L.cn.axisExtentBottomText).data(N,
J);O.enter().append("text").classed(L.cn.axisExtentBottomText,!0).attr("dy","0.75em").call(p);O.text(function(ma){return y(ma,!1)}).each(function(ma){B.font(A.select(this),ma.model.rangeFont)});Q.ensureAxisBrush(ba)}},{"../../components/colorscale":627,"../../components/drawing":637,"../../lib":750,"../../lib/gup":747,"../../lib/svg_text_utils":774,"../../plots/cartesian/axes":799,"./axisbrush":1121,"./constants":1124,"./helpers":1126,"./lines":1128,"color-rgba":127,d3:169}],1131:[function(a,G,C){function q(k,
e,h){h=e.indexOf(h);k=k.indexOf(h);-1===k&&(k+=e.length);return k}function n(k,e){return function(h,l){return q(k,e,h)-q(k,e,l)}}var m=a("./parcoords"),f=a("../../lib/prepare_regl"),b=a("./helpers").isVisible;G.exports=function(k,e){var h=k._fullLayout;if(f(k)){var l={},c={},g={},d={},p=h._size;e.forEach(function(r,t){r=r[0].trace;g[t]=r.index;r=d[t]=r._fullInput.index;l[t]=k.data[r].dimensions;c[t]=k.data[r].dimensions.slice()});m(k,e,{width:p.w,height:p.h,margin:{t:p.t,r:p.r,b:p.b,l:p.l}},{filterChanged:function(r,
t,w){var x=c[r][t];w=w.map(function(z){return z.slice()});var y="dimensions["+t+"].constraintrange",A=h._tracePreGUI[k._fullData[g[r]]._fullInput.uid];void 0===A[y]&&(A[y]=x.constraintrange||null);t=k._fullData[g[r]].dimensions[t];w.length?(1===w.length&&(w=w[0]),x.constraintrange=w,t.constraintrange=w.slice(),w=[w]):(delete x.constraintrange,delete t.constraintrange,w=null);x={};x[y]=w;k.emit("plotly_restyle",[x,[d[r]]])},hover:function(r){k.emit("plotly_hover",r)},unhover:function(r){k.emit("plotly_unhover",
r)},axesMoved:function(r,t){t=n(t,c[r].filter(b));l[r].sort(t);c[r].filter(function(w){return!b(w)}).sort(function(w){return c[r].indexOf(w)}).forEach(function(w){l[r].splice(l[r].indexOf(w),1);l[r].splice(c[r].indexOf(w),0,w)});k.emit("plotly_restyle",[{dimensions:[l[r]]},[d[r]]])}})}}},{"../../lib/prepare_regl":763,"./helpers":1126,"./parcoords":1130}],1132:[function(a,G,C){C=a("../../plots/attributes");var q=a("../../plots/domain").attributes,n=a("../../plots/font_attributes"),m=a("../../components/color/attributes"),
f=a("../../plots/template_attributes").hovertemplateAttrs,b=a("../../plots/template_attributes").texttemplateAttrs;a=a("../../lib/extend").extendFlat;n=n({editType:"plot",arrayOk:!0,colorEditType:"plot"});G.exports={labels:{valType:"data_array",editType:"calc"},label0:{valType:"number",dflt:0,editType:"calc"},dlabel:{valType:"number",dflt:1,editType:"calc"},values:{valType:"data_array",editType:"calc"},marker:{colors:{valType:"data_array",editType:"calc"},line:{color:{valType:"color",dflt:m.defaultLine,
arrayOk:!0,editType:"style"},width:{valType:"number",min:0,dflt:0,arrayOk:!0,editType:"style"},editType:"calc"},editType:"calc"},text:{valType:"data_array",editType:"plot"},hovertext:{valType:"string",dflt:"",arrayOk:!0,editType:"style"},scalegroup:{valType:"string",dflt:"",editType:"calc"},textinfo:{valType:"flaglist",flags:["label","text","value","percent"],extras:["none"],editType:"calc"},hoverinfo:a({},C.hoverinfo,{flags:["label","text","value","percent","name"]}),hovertemplate:f({},{keys:["label",
"color","value","percent","text"]}),texttemplate:b({editType:"plot"},{keys:["label","color","value","percent","text"]}),textposition:{valType:"enumerated",values:["inside","outside","auto","none"],dflt:"auto",arrayOk:!0,editType:"plot"},textfont:a({},n,{}),insidetextorientation:{valType:"enumerated",values:["horizontal","radial","tangential","auto"],dflt:"auto",editType:"plot"},insidetextfont:a({},n,{}),outsidetextfont:a({},n,{}),automargin:{valType:"boolean",dflt:!1,editType:"plot"},title:{text:{valType:"string",
dflt:"",editType:"plot"},font:a({},n,{}),position:{valType:"enumerated",values:"top left;top center;top right;middle center;bottom left;bottom center;bottom right".split(";"),editType:"plot"},editType:"plot"},domain:q({name:"pie",trace:!0,editType:"calc"}),hole:{valType:"number",min:0,max:1,dflt:0,editType:"calc"},sort:{valType:"boolean",dflt:!0,editType:"calc"},direction:{valType:"enumerated",values:["clockwise","counterclockwise"],dflt:"counterclockwise",editType:"calc"},rotation:{valType:"number",
min:-360,max:360,dflt:0,editType:"calc"},pull:{valType:"number",min:0,max:1,dflt:0,arrayOk:!0,editType:"calc"},_deprecated:{title:{valType:"string",dflt:"",editType:"calc"},titlefont:a({},n,{}),titleposition:{valType:"enumerated",values:"top left;top center;top right;middle center;bottom left;bottom center;bottom right".split(";"),editType:"calc"}}}},{"../../components/color/attributes":614,"../../lib/extend":740,"../../plots/attributes":795,"../../plots/domain":826,"../../plots/font_attributes":827,
"../../plots/template_attributes":877}],1133:[function(a,G,C){var q=a("../../plots/plots");C.name="pie";C.plot=function(n,m,f,b){q.plotBasePlot(C.name,n,m,f,b)};C.clean=function(n,m,f,b){q.cleanBasePlot(C.name,n,m,f,b)}},{"../../plots/plots":862}],1134:[function(a,G,C){function q(e){return function(h,l){if(!h)return!1;h=f(h);if(!h.isValid())return!1;h=b.addOpacity(h,h.getAlpha());e[l]||(e[l]=h);return h}}function n(e,h){var l,c=JSON.stringify(e),g=h[c];if(!g){g=e.slice();for(l=0;l<e.length;l++)g.push(f(e[l]).lighten(20).toHexString());
for(l=0;l<e.length;l++)g.push(f(e[l]).darken(20).toHexString());h[c]=g}return g}var m=a("fast-isnumeric"),f=a("tinycolor2"),b=a("../../components/color"),k={};G.exports={calc:function(e,h){var l=[],c=e._fullLayout;e=c.hiddenlabels||[];var g=h.labels,d=h.marker.colors||[],p=h.values,r=h._length,t=h._hasValues&&r,w;if(h.dlabel)for(g=Array(r),w=0;w<r;w++)g[w]=String(h.label0+w*h.dlabel);var x={};c=q(c["_"+h.type+"colormap"]);var y=0,A=!1;for(w=0;w<r;w++){if(t){var z=p[w];if(!m(z))continue;z=+z;if(0>
z)continue}else z=1;var F=g[w];if(void 0===F||""===F)F=w;F=String(F);var D=x[F];void 0===D?(x[F]=l.length,(D=-1!==e.indexOf(F))||(y+=z),l.push({v:z,label:F,color:c(d[w],F),i:w,pts:[w],hidden:D})):(A=!0,D=l[D],D.v+=z,D.pts.push(w),D.hidden||(y+=z),!1===D.color&&d[w]&&(D.color=c(d[w],F)))}("funnelarea"===h.type?A:h.sort)&&l.sort(function(u,B){return B.v-u.v});l[0]&&(l[0].vTotal=y);return l},crossTraceCalc:function(e,h){(h=(h||{}).type)||(h="pie");var l=e._fullLayout;e=e.calcdata;var c=l[h+"colorway"],
g=l["_"+h+"colormap"];l["extend"+h+"colors"]&&(c=n(c,k));for(var d=l=0;d<e.length;d++){var p=e[d];if(p[0].trace.type===h)for(var r=0;r<p.length;r++){var t=p[r];!1===t.color&&(g[t.label]?t.color=g[t.label]:(g[t.label]=t.color=c[l%c.length],l++))}}},makePullColorFn:q,generateExtendedColors:n}},{"../../components/color":615,"fast-isnumeric":241,tinycolor2:548}],1135:[function(a,G,C){function q(e,h){var l=Array.isArray(e),c=m.isArrayOrTypedArray(h);e=Math.min(l?e.length:Infinity,c?h.length:Infinity);
isFinite(e)||(e=0);if(e&&c){for(var g,d=0;d<e;d++){var p=h[d];if(n(p)&&0<p){g=!0;break}}g||(e=0)}return{hasLabels:l,hasValues:c,len:e}}var n=a("fast-isnumeric"),m=a("../../lib"),f=a("./attributes"),b=a("../../plots/domain").defaults,k=a("../bar/defaults").handleText;G.exports={handleLabelsAndValues:q,supplyDefaults:function(e,h,l,c){function g(r,t){return m.coerce(e,h,f,r,t)}l=g("labels");var d=g("values");l=q(l,d);d=l.len;h._hasLabels=l.hasLabels;h._hasValues=l.hasValues;!h._hasLabels&&h._hasValues&&
(g("label0"),g("dlabel"));if(d){h._length=d;g("marker.line.width")&&g("marker.line.color");g("marker.colors");g("scalegroup");l=g("text");d=g("texttemplate");var p;d||(p=g("textinfo",Array.isArray(l)?"text+percent":"percent"));g("hovertext");g("hovertemplate");if(d||p&&"none"!==p)p=g("textposition"),k(e,h,c,g,p,{moduleHasSelected:!1,moduleHasUnselected:!1,moduleHasConstrain:!1,moduleHasCliponaxis:!1,moduleHasTextangle:!1,moduleHasInsideanchor:!1}),(Array.isArray(p)||"auto"===p||"outside"===p)&&g("automargin"),
("inside"===p||"auto"===p||Array.isArray(p))&&g("insidetextorientation");b(h,c,g);p=g("hole");g("title.text")&&(l=g("title.position",p?"middle center":"top center"),p||"middle center"!==l||(h.title.position="top center"),m.coerceFont(g,"title.font",c.font));g("sort");g("direction");g("rotation");g("pull")}else h.visible=!1}}},{"../../lib":750,"../../plots/domain":826,"../bar/defaults":896,"./attributes":1132,"fast-isnumeric":241}],1136:[function(a,G,C){var q=a("../../components/fx/helpers").appendArrayMultiPointValues;
G.exports=function(n,m){var f={curveNumber:m.index,pointNumbers:n.pts,data:m._input,fullData:m,label:n.label,color:n.color,value:n.v,percent:n.percent,text:n.text,v:n.v};1===n.pts.length&&(f.pointNumber=f.i=n.pts[0]);q(f,m,n.pts);"funnelarea"===m.type&&(delete f.v,delete f.i);return f}},{"../../components/fx/helpers":651}],1137:[function(a,G,C){function q(m){return-1!==m.indexOf("e")?m.replace(/[.]?0+e/,"e"):-1!==m.indexOf(".")?m.replace(/[.]?0+$/,""):m}var n=a("../../lib");C.formatPiePercent=function(m,
f){m=q((100*m).toPrecision(3));return n.numSeparate(m,f)+"%"};C.formatPieValue=function(m,f){m=q(m.toPrecision(10));return n.numSeparate(m,f)};C.getFirstFilled=function(m,f){if(Array.isArray(m))for(var b=0;b<f.length;b++){var k=m[f[b]];if(k||0===k||""===k)return k}};C.castOption=function(m,f){if(Array.isArray(m))return C.getFirstFilled(m,f);if(m)return m};C.getRotationAngle=function(m){return("auto"===m?0:m)*Math.PI/180}},{"../../lib":750}],1138:[function(a,G,C){G.exports={attributes:a("./attributes"),
supplyDefaults:a("./defaults").supplyDefaults,supplyLayoutDefaults:a("./layout_defaults"),layoutAttributes:a("./layout_attributes"),calc:a("./calc").calc,crossTraceCalc:a("./calc").crossTraceCalc,plot:a("./plot").plot,style:a("./style"),styleOne:a("./style_one"),moduleType:"trace",name:"pie",basePlotModule:a("./base_plot"),categories:["pie-like","pie","showLegend"],meta:{}}},{"./attributes":1132,"./base_plot":1133,"./calc":1134,"./defaults":1135,"./layout_attributes":1139,"./layout_defaults":1140,
"./plot":1141,"./style":1142,"./style_one":1143}],1139:[function(a,G,C){G.exports={hiddenlabels:{valType:"data_array",editType:"calc"},piecolorway:{valType:"colorlist",editType:"calc"},extendpiecolors:{valType:"boolean",dflt:!0,editType:"calc"}}},{}],1140:[function(a,G,C){var q=a("../../lib"),n=a("./layout_attributes");G.exports=function(m,f){q.coerce(m,f,n,"hiddenlabels",void 0);q.coerce(m,f,n,"piecolorway",f.colorway);q.coerce(m,f,n,"extendpiecolors",void 0)}},{"../../lib":750,"./layout_attributes":1139}],
1141:[function(a,G,C){function q(R,O){R.each(function(T){var V=z.select(this);if(T.labelExtraX||T.labelExtraY){var X=V.select("g.slicetext text");T.transform.targetX+=T.labelExtraX;T.transform.targetY+=T.labelExtraY;X.attr("transform",I.getTextTransform(T.transform));X=T.cxFinal+T.pxmid[0];var ba="M"+X+","+(T.cyFinal+T.pxmid[1]),aa=(T.yLabelMax-T.yLabelMin)*(0>T.pxmid[0]?-1:1)/4;if(T.labelExtraX){var ka=T.labelExtraX*T.pxmid[1]/T.pxmid[0],ha=T.yLabelMid+T.labelExtraY-(T.cyFinal+T.pxmid[1]);ba=Math.abs(ka)>
Math.abs(ha)?ba+("l"+ha*T.pxmid[0]/T.pxmid[1]+","+ha+"H"+(X+T.labelExtraX+aa)):ba+("l"+T.labelExtraX+","+ka+"v"+(ha-ka)+"h"+aa)}else ba+="V"+(T.yLabelMid+T.labelExtraY)+"h"+aa;I.ensureSingle(V,"path","textline").call(u.stroke,O.outsidetextfont.color).attr({"stroke-width":Math.min(2,O.outsidetextfont.size/8),d:ba,fill:"none"})}else V.select("path.textline").remove()})}function n(R,O,T){var V=T[0],X=V.trace,ba=V.cx,aa=V.cy;"_hasHoverLabel"in X||(X._hasHoverLabel=!1);"_hasHoverEvent"in X||(X._hasHoverEvent=
!1);R.on("mouseover",function(ka){var ha=O._fullLayout,ca=O._fullData[X.index];if(!O._dragging&&!1!==ha.hovermode){var sa=ca.hoverinfo;Array.isArray(sa)&&(sa=D.castHoverinfo({hoverinfo:[L.castOption(sa,ka.pts)],_module:X._module},ha,0));"all"===sa&&(sa="label+text+value+percent+name");if(ca.hovertemplate||"none"!==sa&&"skip"!==sa&&sa){var ma=ka.rInscribed||0,ra=ba+ka.pxmid[0]*(1-ma),qa=aa+ka.pxmid[1]*(1-ma),Y=ha.separators,pa=[];sa&&-1!==sa.indexOf("label")&&pa.push(ka.label);ka.text=L.castOption(ca.hovertext||
ca.text,ka.pts);if(sa&&-1!==sa.indexOf("text")){var oa=ka.text;I.isValidTextValue(oa)&&pa.push(oa)}ka.value=ka.v;ka.valueLabel=L.formatPieValue(ka.v,Y);sa&&-1!==sa.indexOf("value")&&pa.push(ka.valueLabel);ka.percent=ka.v/V.vTotal;ka.percentLabel=L.formatPiePercent(ka.percent,Y);sa&&-1!==sa.indexOf("percent")&&pa.push(ka.percentLabel);Y=ca.hoverlabel;oa=Y.font;D.loneHover({trace:X,x0:ra-ma*V.r,x1:ra+ma*V.r,y:qa,text:pa.join("\x3cbr\x3e"),name:ca.hovertemplate||-1!==sa.indexOf("name")?ca.name:void 0,
idealAlign:0>ka.pxmid[0]?"left":"right",color:L.castOption(Y.bgcolor,ka.pts)||ka.color,borderColor:L.castOption(Y.bordercolor,ka.pts),fontFamily:L.castOption(oa.family,ka.pts),fontSize:L.castOption(oa.size,ka.pts),fontColor:L.castOption(oa.color,ka.pts),nameLength:L.castOption(Y.namelength,ka.pts),textAlign:L.castOption(Y.align,ka.pts),hovertemplate:L.castOption(ca.hovertemplate,ka.pts),hovertemplateLabels:ka,eventData:[Q(ka,ca)]},{container:ha._hoverlayer.node(),outerContainer:ha._paper.node(),gd:O});
X._hasHoverLabel=!0}X._hasHoverEvent=!0;O.emit("plotly_hover",{points:[Q(ka,ca)],event:z.event})}});R.on("mouseout",function(ka){var ha=O._fullLayout,ca=O._fullData[X.index],sa=z.select(this).datum();X._hasHoverEvent&&(ka.originalEvent=z.event,O.emit("plotly_unhover",{points:[Q(sa,ca)],event:z.event}),X._hasHoverEvent=!1);X._hasHoverLabel&&(D.loneUnhover(ha._hoverlayer.node()),X._hasHoverLabel=!1)});R.on("click",function(ka){var ha=O._fullLayout;O._dragging||!1===ha.hovermode||(O._hoverdata=[Q(ka,
O._fullData[X.index])],D.click(O,z.event))})}function m(R,O,T){var V=L.castOption(R.outsidetextfont.color,O.pts)||L.castOption(R.textfont.color,O.pts)||T.color,X=L.castOption(R.outsidetextfont.family,O.pts)||L.castOption(R.textfont.family,O.pts)||T.family;R=L.castOption(R.outsidetextfont.size,O.pts)||L.castOption(R.textfont.size,O.pts)||T.size;return{color:V,family:X,size:R}}function f(R,O,T){var V=L.castOption(R.insidetextfont.color,O.pts);!V&&R._input.textfont&&(V=L.castOption(R._input.textfont.color,
O.pts));var X=L.castOption(R.insidetextfont.family,O.pts)||L.castOption(R.textfont.family,O.pts)||T.family;R=L.castOption(R.insidetextfont.size,O.pts)||L.castOption(R.textfont.size,O.pts)||T.size;return{color:V||u.contrast(O.color),family:X,size:R}}function b(R,O){for(var T,V,X=0;X<R.length;X++)if(T=R[X][0],V=T.trace,V.title.text){var ba=V.title.text;V._meta&&(ba=I.templateString(ba,V._meta));V=B.tester.append("text").attr("data-notex",1).text(ba).call(B.font,V.title.font).call(J.convertToTspans,
O);ba=B.bBox(V.node(),!0);T.titleBox={width:ba.width,height:ba.height};V.remove()}}function k(R,O,T){var V=T.r||O.rpx1,X=O.rInscribed;if(O.startangle===O.stopangle)return{rCenter:1-X,scale:0,rotate:0,textPosAngle:0};var ba=O.ring,aa=1===ba&&Math.abs(O.startangle-O.stopangle)===2*Math.PI,ka=O.halfangle,ha=O.midangle;T=T.trace.insidetextorientation;var ca="horizontal"===T,sa="tangential"===T,ma="radial"===T;T="auto"===T;var ra=[];if(!T){var qa=function(oa,ua){var ya=O.startangle,ja=O.stopangle;if(ya>
oa&&oa>ja||ya<oa&&oa<ja)ya=Math.abs(oa-O.startangle),ja=Math.abs(oa-O.stopangle),ya=ya<ja?ya:ja,pa="tan"===ua?h(R,V,ba,ya,0):e(R,V,ba,ya,Math.PI/2),pa.textPosAngle=oa,ra.push(pa)},Y;if(ca||sa){for(Y=4;-4<=Y;Y-=2)qa(Math.PI*Y,"tan");for(Y=4;-4<=Y;Y-=2)qa(Math.PI*(Y+1),"tan")}if(ca||ma){for(Y=4;-4<=Y;Y-=2)qa(Math.PI*(Y+1.5),"rad");for(Y=4;-4<=Y;Y-=2)qa(Math.PI*(Y+.5),"rad")}}if(aa||T||ca){var pa={scale:X*V*2/Math.sqrt(R.width*R.width+R.height*R.height),rCenter:1-X,rotate:0};pa.textPosAngle=(O.startangle+
O.stopangle)/2;if(1<=pa.scale)return pa;ra.push(pa)}if(T||ma)pa=e(R,V,ba,ka,ha),pa.textPosAngle=(O.startangle+O.stopangle)/2,ra.push(pa);if(T||sa)pa=h(R,V,ba,ka,ha),pa.textPosAngle=(O.startangle+O.stopangle)/2,ra.push(pa);for(ka=aa=X=0;ka<ra.length&&(ha=ra[ka].scale,aa<ha&&(aa=ha,X=ka),T||!(1<=aa));ka++);return ra[X]}function e(R,O,T,V,X){O=Math.max(0,O-2*E);var ba=R.width/R.height;T=l(ba,V,O,T);O=T/O;return{scale:2*T/R.height,rCenter:Math.cos(O)-ba*O,rotate:(180/Math.PI*X+720)%180-90}}function h(R,
O,T,V,X){O=Math.max(0,O-2*E);var ba=R.height/R.width;T=l(ba,V,O,T);O=T/O;return{scale:2*T/R.width,rCenter:Math.cos(O)-ba*O,rotate:(180/Math.PI*(X+Math.PI/2)+720)%180-90}}function l(R,O,T,V){O=R+1/(2*Math.tan(O));return T*Math.min(1/(Math.sqrt(O*O+.5)+O),V/(Math.sqrt(R*R+V/2)+R))}function c(R,O){var T=O.pxmid[0];O=O.pxmid[1];var V=R.width/2;R=R.height/2;0>T&&(V*=-1);0>O&&(R*=-1);return{scale:1,rCenter:1,rotate:0,x:V+Math.abs(R)*(0<V?1:-1)/2,y:R/(1+T*T/(O*O)),outside:!0}}function g(R,O){var T=R.trace,
V=R.cx,X=R.cy,ba=0;var aa=0+T.title.font.size;var ka=p(T);-1!==T.title.position.indexOf("top")?(X-=(1+ka)*R.r,aa-=R.titleBox.height):-1!==T.title.position.indexOf("bottom")&&(X+=(1+ka)*R.r);var ha=R.trace.aspectratio;ha=R.r/(void 0===ha?1:ha);var ca=O.w*(T.domain.x[1]-T.domain.x[0])/2;-1!==T.title.position.indexOf("left")?(ca+=ha,V-=(1+ka)*ha,ba+=R.titleBox.width/2):-1!==T.title.position.indexOf("center")?ca*=2:-1!==T.title.position.indexOf("right")&&(ca+=ha,V+=(1+ka)*ha,ba-=R.titleBox.width/2);ka=
ca/R.titleBox.width;R=d(R,O)/R.titleBox.height;return{x:V,y:X,scale:Math.min(ka,R),tx:ba,ty:aa}}function d(R,O){var T=R.trace;return Math.min(R.titleBox.height,O.h*(T.domain.y[1]-T.domain.y[0])/2)}function p(R){var O=R.pull;if(!O)return 0;var T;if(Array.isArray(O))for(T=O=0;T<R.pull.length;T++)R.pull[T]>O&&(O=R.pull[T]);return O}function r(R,O){function T(ua,ya){return ua.pxmid[1]-ya.pxmid[1]}function V(ua,ya){return ya.pxmid[1]-ua.pxmid[1]}function X(ua,ya){ya||(ya={});var ja=ya.labelExtraY+(aa?
ya.yLabelMax:ya.yLabelMin);ya=aa?ua.yLabelMin:ua.yLabelMax;var za=aa?ua.yLabelMax:ua.yLabelMin,Ba=ua.cyFinal+ca(ua.px0[1],ua.px1[1]),Ma=ja-ya;0<Ma*sa&&(ua.labelExtraY=Ma);if(Array.isArray(O.pull))for(ja=0;ja<pa.length;ja++){var Oa=pa[ja];Oa===ua||(L.castOption(O.pull,ua.pts)||0)>=(L.castOption(O.pull,Oa.pts)||0)||(0<(ua.pxmid[1]-Oa.pxmid[1])*sa?(Ma=Oa.cyFinal+ca(Oa.px0[1],Oa.px1[1]),Ma=Ma-ya-ua.labelExtraY,0<Ma*sa&&(ua.labelExtraY+=Ma)):0<(za+ua.labelExtraY-Ba)*sa&&(Ma=3*ra*Math.abs(ja-pa.indexOf(ua)),
Oa=Oa.cxFinal+ma(Oa.px0[0],Oa.px1[0]),Ma=Oa+Ma-(ua.cxFinal+ua.pxmid[0])-ua.labelExtraX,0<Ma*ra&&(ua.labelExtraX+=Ma)))}}var ba,aa,ka;for(aa=0;2>aa;aa++){var ha=aa?T:V;var ca=aa?Math.max:Math.min;var sa=aa?1:-1;for(ba=0;2>ba;ba++){var ma=ba?Math.max:Math.min;var ra=ba?1:-1;var qa=R[aa][ba];qa.sort(ha);var Y=R[1-aa][ba];var pa=Y.concat(qa);var oa=[];for(ka=0;ka<qa.length;ka++)void 0!==qa[ka].yLabelMid&&oa.push(qa[ka]);qa=!1;for(ka=0;aa&&ka<Y.length;ka++)if(void 0!==Y[ka].yLabelMid){qa=Y[ka];break}for(ka=
0;ka<oa.length;ka++)Y=ka&&oa[ka-1],qa&&!ka&&(Y=qa),X(oa[ka],Y)}}}function t(R,O){for(var T=[],V=0;V<R.length;V++){var X=R[V][0],ba=X.trace,aa=ba.domain,ka=O.w*(aa.x[1]-aa.x[0]);aa=O.h*(aa.y[1]-aa.y[0]);ba.title.text&&"middle center"!==ba.title.position&&(aa-=d(X,O));ka/=2;var ha=aa/2;"funnelarea"!==ba.type||ba.scalegroup||(ha/=ba.aspectratio);X.r=Math.min(ka,ha)/(1+p(ba));X.cx=O.l+O.w*(ba.domain.x[1]+ba.domain.x[0])/2;X.cy=O.t+O.h*(1-ba.domain.y[0])-aa/2;ba.title.text&&-1!==ba.title.position.indexOf("bottom")&&
(X.cy-=d(X,O));ba.scalegroup&&-1===T.indexOf(ba.scalegroup)&&T.push(ba.scalegroup)}for(ba=0;ba<T.length;ba++){aa=Infinity;ka=T[ba];for(V=0;V<R.length;V++)if(O=R[V][0],X=O.trace,X.scalegroup===ka){if("pie"===X.type)var ca=O.r*O.r;else"funnelarea"===X.type&&(1<X.aspectratio?(ca=O.r,ha=ca/X.aspectratio):(ha=O.r,ca=ha*X.aspectratio),ca*=(1+X.baseratio)/2,ca*=ha);aa=Math.min(aa,ca/O.vTotal)}for(V=0;V<R.length;V++)O=R[V][0],X=O.trace,X.scalegroup===ka&&(ha=aa*O.vTotal,"funnelarea"===X.type&&(ha/=(1+X.baseratio)/
2,ha/=X.aspectratio),O.r=Math.sqrt(ha))}}function w(R){var O=R[0],T=O.r,V=O.trace,X=L.getRotationAngle(V.rotation),ba=2*Math.PI/O.vTotal,aa="px0",ka="px1",ha;if("counterclockwise"===V.direction){for(ha=0;ha<R.length&&R[ha].hidden;ha++);if(ha===R.length)return;X+=ba*R[ha].v;ba*=-1;aa="px1";ka="px0"}var ca=x(T,X);for(ha=0;ha<R.length;ha++){var sa=R[ha];if(!sa.hidden){sa[aa]=ca;sa.startangle=X;X+=ba*sa.v/2;sa.pxmid=x(T,X);sa.midangle=X;X+=ba*sa.v/2;ca=x(T,X);sa.stopangle=X;sa[ka]=ca;sa.largeArc=sa.v>
O.vTotal/2?1:0;sa.halfangle=Math.PI*Math.min(sa.v/O.vTotal,.5);sa.ring=1-V.hole;var ma=sa;sa=sa.v!==O.vTotal||O.trace.hole?Math.min(1/(1+1/Math.sin(sa.halfangle)),sa.ring/2):1;ma.rInscribed=sa}}}function x(R,O){return[R*Math.sin(O),-R*Math.cos(O)]}function y(R,O,T){var V=R._fullLayout,X=T.trace,ba=X.texttemplate,aa=X.textinfo;if(!ba&&aa&&"none"!==aa){var ka=aa.split("+"),ha=-1!==ka.indexOf("label"),ca=-1!==ka.indexOf("text");aa=-1!==ka.indexOf("value");ka=-1!==ka.indexOf("percent");var sa=V.separators;
ha=ha?[O.label]:[];ca&&(ca=L.getFirstFilled(X.text,O.pts),S(ca)&&ha.push(ca));aa&&ha.push(L.formatPieValue(O.v,sa));ka&&ha.push(L.formatPiePercent(O.v/T.vTotal,sa));O.text=ha.join("\x3cbr\x3e")}if(ba)if(ba=I.castOption(X,O.i,"texttemplate")){T={label:O.label,value:O.v,valueLabel:L.formatPieValue(O.v,V.separators),percent:O.v/T.vTotal,percentLabel:L.formatPiePercent(O.v/T.vTotal,V.separators),color:O.color,text:O.text,customdata:I.castOption(X,O.i,"customdata")};V=L.getFirstFilled(X.text,O.pts);if(S(V)||
""===V)T.text=V;O.text=I.texttemplateString(ba,T,R._fullLayout._d3locale,T,X._meta||{})}else O.text=""}function A(R,O){var T=R.rotate*Math.PI/180,V=Math.cos(T);T=Math.sin(T);var X=(O.left+O.right)/2;O=(O.top+O.bottom)/2;R.textX=X*V-O*T;R.textY=X*T+O*V;R.noCenter=!0}var z=a("d3"),F=a("../../plots/plots"),D=a("../../components/fx"),u=a("../../components/color"),B=a("../../components/drawing"),I=a("../../lib"),J=a("../../lib/svg_text_utils");C=a("../bar/uniform_text");var N=C.recordMinTextSize,M=C.clearMinTextSize,
E=a("../bar/constants").TEXTPAD,L=a("./helpers"),Q=a("./event_data"),S=a("../../lib").isValidTextValue;G.exports={plot:function(R,O){var T=R._fullLayout,V=T._size;M("pie",T);b(O,R);t(O,V);var X=I.makeTraceGroups(T._pielayer,O,"trace").each(function(ba){var aa=z.select(this),ka=ba[0],ha=ka.trace;w(ba);aa.attr("stroke-linejoin","round");aa.each(function(){var ca=z.select(this).selectAll("g.slice").data(ba);ca.enter().append("g").classed("slice",!0);ca.exit().remove();var sa=[[[],[]],[[],[]]],ma=!1;
ca.each(function(pa,oa){function ua(Fa,Na,$a,cb){return"a"+cb*ka.r+","+cb*ka.r+" 0 "+pa.largeArc+($a?" 1 ":" 0 ")+cb*(Na[0]-Fa[0])+","+cb*(Na[1]-Fa[1])}if(pa.hidden)z.select(this).selectAll("path,g").remove();else{pa.pointNumber=pa.i;pa.curveNumber=ha.index;sa[0>pa.pxmid[1]?0:1][0>pa.pxmid[0]?0:1].push(pa);var ya=ka.cx,ja=ka.cy,za=z.select(this),Ba=za.selectAll("path.surface").data([pa]);Ba.enter().append("path").classed("surface",!0).style({"pointer-events":"all"});za.call(n,R,ba);if(ha.pull){var Ma=
+L.castOption(ha.pull,pa.pts)||0;0<Ma&&(ya+=Ma*pa.pxmid[0],ja+=Ma*pa.pxmid[1])}pa.cxFinal=ya;pa.cyFinal=ja;Ma=ha.hole;if(pa.v===ka.vTotal){var Oa="M"+(ya+pa.px0[0])+","+(ja+pa.px0[1])+ua(pa.px0,pa.pxmid,!0,1)+ua(pa.pxmid,pa.px0,!0,1)+"Z";Ma?Ba.attr("d","M"+(ya+Ma*pa.px0[0])+","+(ja+Ma*pa.px0[1])+ua(pa.px0,pa.pxmid,!1,Ma)+ua(pa.pxmid,pa.px0,!1,Ma)+"Z"+Oa):Ba.attr("d",Oa)}else if(Oa=ua(pa.px0,pa.px1,!0,1),Ma){var Ia=1-Ma;Ba.attr("d","M"+(ya+Ma*pa.px1[0])+","+(ja+Ma*pa.px1[1])+ua(pa.px1,pa.px0,!1,Ma)+
"l"+Ia*pa.px0[0]+","+Ia*pa.px0[1]+Oa+"Z")}else Ba.attr("d","M"+ya+","+ja+"l"+pa.px0[0]+","+pa.px0[1]+Oa+"Z");y(R,pa,ka);var Pa=L.castOption(ha.textposition,pa.pts);za=za.selectAll("g.slicetext").data(pa.text&&"none"!==Pa?[0]:[]);za.enter().append("g").classed("slicetext",!0);za.exit().remove();za.each(function(){var Fa=I.ensureSingle(z.select(this),"text","",function(Ka){Ka.attr("data-notex",1)}),Na=I.ensureUniformFontSize(R,"outside"===Pa?m(ha,pa,T.font):f(ha,pa,T.font));Fa.text(pa.text).attr({"class":"slicetext",
transform:"","text-anchor":"middle"}).call(B.font,Na).call(J.convertToTspans,R);var $a=B.bBox(Fa.node());if("outside"===Pa)var cb=c($a,pa);else cb=k($a,pa,ka),"auto"===Pa&&1>cb.scale&&($a=I.ensureUniformFontSize(R,ha.outsidetextfont),Fa.call(B.font,$a),$a=B.bBox(Fa.node()),cb=c($a,pa));var mb=cb.textPosAngle;mb=void 0===mb?pa.pxmid:x(ka.r,mb);cb.targetX=ya+mb[0]*cb.rCenter+(cb.x||0);cb.targetY=ja+mb[1]*cb.rCenter+(cb.y||0);A(cb,$a);cb.outside&&(mb=cb.targetY,pa.yLabelMin=mb-$a.height/2,pa.yLabelMid=
mb,pa.yLabelMax=mb+$a.height/2,pa.labelExtraX=0,pa.labelExtraY=0,ma=!0);cb.fontSize=Na.size;N(ha.type,cb,T);ba[oa].transform=cb;Fa.attr("transform",I.getTextTransform(cb))})}});var ra=z.select(this).selectAll("g.titletext").data(ha.title.text?[0]:[]);ra.enter().append("g").classed("titletext",!0);ra.exit().remove();ra.each(function(){var pa=I.ensureSingle(z.select(this),"text","",function(ua){ua.attr("data-notex",1)}),oa=ha.title.text;ha._meta&&(oa=I.templateString(oa,ha._meta));pa.text(oa).attr({"class":"titletext",
transform:"","text-anchor":"middle"}).call(B.font,ha.title.font).call(J.convertToTspans,R);oa="middle center"===ha.title.position?{x:ka.cx,y:ka.cy,scale:ka.trace.hole*ka.r*2/Math.sqrt(ka.titleBox.width*ka.titleBox.width+ka.titleBox.height*ka.titleBox.height),tx:0,ty:-ka.titleBox.height/2+ka.trace.title.font.size}:g(ka,V);pa.attr("transform","translate("+oa.x+","+oa.y+")"+(1>oa.scale?"scale("+oa.scale+")":"")+"translate("+oa.tx+","+oa.ty+")")});ma&&r(sa,ha);q(ca,ha);if(ma&&ha.automargin){ca=B.bBox(aa.node());
ra=ha.domain;var qa=(.5*V.w*(ra.x[1]-ra.x[0])-ka.r)/V.w,Y=(.5*V.h*(ra.y[1]-ra.y[0])-ka.r)/V.h;F.autoMargin(R,"pie."+ha.uid+".automargin",{xl:ra.x[0]-qa,xr:ra.x[1]+qa,yb:ra.y[0]-Y,yt:ra.y[1]+Y,l:Math.max(ka.cx-ka.r-ca.left,0),r:Math.max(ca.right-(ka.cx+ka.r),0),b:Math.max(ca.bottom-(ka.cy+ka.r),0),t:Math.max(ka.cy-ka.r-ca.top,0),pad:5})}})});setTimeout(function(){X.selectAll("tspan").each(function(){var ba=z.select(this);ba.attr("dy")&&ba.attr("dy",ba.attr("dy"))})},0)},formatSliceLabel:y,transformInsideText:k,
determineInsideTextFont:f,positionTitleOutside:g,prerenderTitles:b,layoutAreas:t,attachFxHandlers:n,computeTransform:A}},{"../../components/color":615,"../../components/drawing":637,"../../components/fx":655,"../../lib":750,"../../lib/svg_text_utils":774,"../../plots/plots":862,"../bar/constants":894,"../bar/uniform_text":908,"./event_data":1136,"./helpers":1137,d3:169}],1142:[function(a,G,C){var q=a("d3"),n=a("./style_one"),m=a("../bar/uniform_text").resizeText;G.exports=function(f){var b=f._fullLayout._pielayer.selectAll(".trace");
m(f,b,"pie");b.each(function(k){var e=k[0].trace;k=q.select(this);k.style({opacity:e.opacity});k.selectAll("path.surface").each(function(h){q.select(this).call(n,h,e)})})}},{"../bar/uniform_text":908,"./style_one":1143,d3:169}],1143:[function(a,G,C){var q=a("../../components/color"),n=a("./helpers").castOption;G.exports=function(m,f,b){var k=b.marker.line;b=n(k.color,f.pts)||q.defaultLine;k=n(k.width,f.pts)||0;m.style("stroke-width",k).call(q.fill,f.color).call(q.stroke,b)}},{"../../components/color":615,
"./helpers":1137}],1144:[function(a,G,C){a=a("../scatter/attributes");G.exports={x:a.x,y:a.y,xy:{valType:"data_array",editType:"calc"},indices:{valType:"data_array",editType:"calc"},xbounds:{valType:"data_array",editType:"calc"},ybounds:{valType:"data_array",editType:"calc"},text:a.text,marker:{color:{valType:"color",arrayOk:!1,editType:"calc"},opacity:{valType:"number",min:0,max:1,dflt:1,arrayOk:!1,editType:"calc"},blend:{valType:"boolean",dflt:null,editType:"calc"},sizemin:{valType:"number",min:.1,
max:2,dflt:.5,editType:"calc"},sizemax:{valType:"number",min:.1,dflt:20,editType:"calc"},border:{color:{valType:"color",arrayOk:!1,editType:"calc"},arearatio:{valType:"number",min:0,max:1,dflt:0,editType:"calc"},editType:"calc"},editType:"calc"},transforms:void 0}},{"../scatter/attributes":1158}],1145:[function(a,G,C){function q(k,e){this.scene=k;this.uid=e;this.type="pointcloud";this.pickXData=[];this.pickYData=[];this.xData=[];this.yData=[];this.textLabels=[];this.color="rgb(0, 0, 0)";this.name=
"";this.hoverinfo="all";this.idToIndex=new Int32Array(0);this.bounds=[0,0,0,0];this.pointcloudOptions={positions:new Float32Array(0),idToIndex:this.idToIndex,sizemin:.5,sizemax:12,color:[0,0,0,1],areaRatio:1,borderColor:[0,0,0,1]};this.pointcloud=n(k.glplot,this.pointcloudOptions);this.pointcloud._trace=this}var n=a("gl-pointcloud2d"),m=a("../../lib/str2rgbarray"),f=a("../../plots/cartesian/autorange").findExtremes,b=a("../scatter/get_trace_color");a=q.prototype;a.handlePick=function(k){var e=this.idToIndex[k.pointId];
return{trace:this,dataCoord:k.dataCoord,traceCoord:this.pickXYData?[this.pickXYData[2*e],this.pickXYData[2*e+1]]:[this.pickXData[e],this.pickYData[e]],textLabel:Array.isArray(this.textLabels)?this.textLabels[e]:this.textLabels,color:this.color,name:this.name,pointIndex:e,hoverinfo:this.hoverinfo}};a.update=function(k){this.index=k.index;this.textLabels=k.text;this.name=k.name;this.hoverinfo=k.hoverinfo;this.bounds=[Infinity,Infinity,-Infinity,-Infinity];this.updateFast(k);this.color=b(k,{})};a.updateFast=
function(k){var e=this.xData=this.pickXData=k.x,h=this.yData=this.pickYData=k.y,l=this.pickXYData=k.xy,c=k.xbounds&&k.ybounds,g=k.indices,d=this.bounds,p;if(l){var r=l;l=l.length>>>1;if(c)d[0]=k.xbounds[0],d[2]=k.xbounds[1],d[1]=k.ybounds[0],d[3]=k.ybounds[1];else for(p=0;p<l;p++){c=r[2*p];var t=r[2*p+1];c<d[0]&&(d[0]=c);c>d[2]&&(d[2]=c);t<d[1]&&(d[1]=t);t>d[3]&&(d[3]=t)}if(!g)for(g=new Int32Array(l),p=0;p<l;p++)g[p]=p}else for(l=e.length,r=new Float32Array(2*l),g=new Int32Array(l),p=0;p<l;p++)c=
e[p],t=h[p],g[p]=p,r[2*p]=c,r[2*p+1]=t,c<d[0]&&(d[0]=c),c>d[2]&&(d[2]=c),t<d[1]&&(d[1]=t),t>d[3]&&(d[3]=t);this.idToIndex=g;this.pointcloudOptions.idToIndex=g;this.pointcloudOptions.positions=r;l=m(k.marker.color);r=m(k.marker.border.color);g=k.opacity*k.marker.opacity;l[3]*=g;this.pointcloudOptions.color=l;l=k.marker.blend;null===l&&(l=100>e.length||100>h.length);this.pointcloudOptions.blend=l;r[3]*=g;this.pointcloudOptions.borderColor=r;r=Math.max(k.marker.sizemax,k.marker.sizemin);this.pointcloudOptions.sizeMin=
k.marker.sizemin;this.pointcloudOptions.sizeMax=r;this.pointcloudOptions.areaRatio=k.marker.border.arearatio;this.pointcloud.update(this.pointcloudOptions);e=this.scene.xaxis;h=this.scene.yaxis;r=r/2||.5;k._extremes[e._id]=f(e,[d[0],d[2]],{ppad:r});k._extremes[h._id]=f(h,[d[1],d[3]],{ppad:r})};a.dispose=function(){this.pointcloud.dispose()};G.exports=function(k,e){k=new q(k,e.uid);k.update(e);return k}},{"../../lib/str2rgbarray":773,"../../plots/cartesian/autorange":798,"../scatter/get_trace_color":1168,
"gl-pointcloud2d":303}],1146:[function(a,G,C){var q=a("../../lib"),n=a("./attributes");G.exports=function(m,f,b){function k(e,h){return q.coerce(m,f,n,e,h)}k("x");k("y");k("xbounds");k("ybounds");m.xy&&m.xy instanceof Float32Array&&(f.xy=m.xy);m.indices&&m.indices instanceof Int32Array&&(f.indices=m.indices);k("text");k("marker.color",b);k("marker.opacity");k("marker.blend");k("marker.sizemin");k("marker.sizemax");k("marker.border.color",b);k("marker.border.arearatio");f._length=null}},{"../../lib":750,
"./attributes":1144}],1147:[function(a,G,C){G.exports={attributes:a("./attributes"),supplyDefaults:a("./defaults"),calc:a("../scatter3d/calc"),plot:a("./convert"),moduleType:"trace",name:"pointcloud",basePlotModule:a("../../plots/gl2d"),categories:["gl","gl2d","showLegend"],meta:{}}},{"../../plots/gl2d":839,"../scatter3d/calc":1187,"./attributes":1144,"./convert":1145,"./defaults":1146}],1148:[function(a,G,C){C=a("../../plots/font_attributes");var q=a("../../plots/attributes"),n=a("../../components/color/attributes"),
m=a("../../components/fx/attributes"),f=a("../../plots/domain").attributes,b=a("../../plots/template_attributes").hovertemplateAttrs,k=a("../../components/colorscale/attributes"),e=a("../../plot_api/plot_template").templatedArray,h=a("../../lib/extend").extendFlat,l=a("../../plot_api/edit_types").overrideAll;a("../../constants/docs");(G.exports=l({hoverinfo:h({},q.hoverinfo,{flags:[],arrayOk:!1}),hoverlabel:m.hoverlabel,domain:f({name:"sankey",trace:!0}),orientation:{valType:"enumerated",values:["v",
"h"],dflt:"h"},valueformat:{valType:"string",dflt:".3s"},valuesuffix:{valType:"string",dflt:""},arrangement:{valType:"enumerated",values:["snap","perpendicular","freeform","fixed"],dflt:"snap"},textfont:C({}),customdata:void 0,node:{label:{valType:"data_array",dflt:[]},groups:{valType:"info_array",impliedEdits:{x:[],y:[]},dimensions:2,freeLength:!0,dflt:[],items:{valType:"number",editType:"calc"}},x:{valType:"data_array",dflt:[]},y:{valType:"data_array",dflt:[]},color:{valType:"color",arrayOk:!0},
customdata:{valType:"data_array",editType:"calc"},line:{color:{valType:"color",dflt:n.defaultLine,arrayOk:!0},width:{valType:"number",min:0,dflt:.5,arrayOk:!0}},pad:{valType:"number",arrayOk:!1,min:0,dflt:20},thickness:{valType:"number",arrayOk:!1,min:1,dflt:20},hoverinfo:{valType:"enumerated",values:["all","none","skip"],dflt:"all"},hoverlabel:m.hoverlabel,hovertemplate:b({},{keys:["value","label"]})},link:{label:{valType:"data_array",dflt:[]},color:{valType:"color",arrayOk:!0},customdata:{valType:"data_array",
editType:"calc"},line:{color:{valType:"color",dflt:n.defaultLine,arrayOk:!0},width:{valType:"number",min:0,dflt:0,arrayOk:!0}},source:{valType:"data_array",dflt:[]},target:{valType:"data_array",dflt:[]},value:{valType:"data_array",dflt:[]},hoverinfo:{valType:"enumerated",values:["all","none","skip"],dflt:"all"},hoverlabel:m.hoverlabel,hovertemplate:b({},{keys:["value","label"]}),colorscales:e("concentrationscales",{editType:"calc",label:{valType:"string",editType:"calc",dflt:""},cmax:{valType:"number",
editType:"calc",dflt:1},cmin:{valType:"number",editType:"calc",dflt:0},colorscale:h(k().colorscale,{dflt:[[0,"white"],[1,"black"]]})})}},"calc","nested")).transforms=void 0},{"../../components/color/attributes":614,"../../components/colorscale/attributes":622,"../../components/fx/attributes":646,"../../constants/docs":720,"../../lib/extend":740,"../../plot_api/edit_types":781,"../../plot_api/plot_template":788,"../../plots/attributes":795,"../../plots/domain":826,"../../plots/font_attributes":827,
"../../plots/template_attributes":877}],1149:[function(a,G,C){function q(c,g){var d=c._fullData[g],p=c._fullLayout,r=p.dragmode,t=d._bgRect;if("pan"!==r&&"zoom"!==r){b(t,"pan"===p.dragmode?"move":"crosshair");p={_id:"x",c2p:h.identity,_offset:d._sankey.translateX,_length:d._sankey.width};d={_id:"y",c2p:h.identity,_offset:d._sankey.translateY,_length:d._sankey.height};var w={gd:c,element:t.node(),plotinfo:{id:g,xaxis:p,yaxis:d,fillRangeItems:h.noop},subplot:g,xaxes:[p],yaxes:[d],doneFnCompleted:function(x){for(var y=
c._fullData[g],A=y.node.groups.slice(),z=[],F=0;F<x.length;F++){a:{var D=y._sankey.graph.nodes;for(var u=0;u<D.length;u++)if(D[u].pointNumber===x[F].pointNumber){D=D[u];break a}D=void 0}if(D)if(D.group){for(u=0;u<D.childrenNodes.length;u++)z.push(D.childrenNodes[u].pointNumber);A[D.pointNumber-y.node._count]=!1}else z.push(D.pointNumber)}x=A.filter(Boolean).concat([z]);l.call("_guiRestyle",c,{"node.groups":[x]},g)},prepFn:function(x,y,A){e(x,y,A,w,r)}};k.init(w)}}G=a("../../plot_api/edit_types").overrideAll;
var n=a("../../plots/get_data").getModuleCalcData,m=a("./plot"),f=a("../../components/fx/layout_attributes"),b=a("../../lib/setcursor"),k=a("../../components/dragelement"),e=a("../../plots/cartesian/select").prepSelect,h=a("../../lib"),l=a("../../registry");C.name="sankey";C.baseLayoutAttrOverrides=G({hoverlabel:f.hoverlabel},"plot","nested");C.plot=function(c){var g=n(c.calcdata,"sankey")[0];m(c,g);C.updateFx(c)};C.clean=function(c,g,d,p){c=p._has&&p._has("sankey");g=g._has&&g._has("sankey");c&&
!g&&(p._paperdiv.selectAll(".sankey").remove(),p._paperdiv.selectAll(".bgsankey").remove())};C.updateFx=function(c){for(var g=0;g<c._fullData.length;g++)q(c,g)}},{"../../components/dragelement":634,"../../components/fx/layout_attributes":656,"../../lib":750,"../../lib/setcursor":770,"../../plot_api/edit_types":781,"../../plots/cartesian/select":818,"../../plots/get_data":836,"../../registry":882,"./plot":1154}],1150:[function(a,G,C){function q(h,l,c){for(var g=m.init2dArray(h,0),d=0;d<Math.min(l.length,
c.length);d++)if(m.isIndex(l[d],h)&&m.isIndex(c[d],h)){if(l[d]===c[d])return!0;g[l[d]].push(c[d])}return n(g).components.some(function(p){return 1<p.length})}var n=a("strongly-connected-components"),m=a("../../lib"),f=a("../../lib/gup").wrap,b=m.isArrayOrTypedArray,k=m.isIndex,e=a("../../components/colorscale");G.exports=function(h,l){var c=l.node,g=l.link;h=[];var d=b(g.color),p=b(g.customdata),r={},t={},w=g.colorscales.length,x;for(x=0;x<w;x++){var y=g.colorscales[x],A=e.extractScale(y,{cLetter:"c"});
A=e.makeColorScaleFunc(A);t[y.label]=A}for(x=w=0;x<g.value.length;x++)g.source[x]>w&&(w=g.source[x]),g.target[x]>w&&(w=g.target[x]);w+=1;l.node._count=w;l=l.node.groups;y={};for(x=0;x<l.length;x++){var z=l[x];for(A=0;A<z.length;A++){var F=z[A],D=w+x;y.hasOwnProperty(F)?m.warn("Node "+F+" is already part of a group."):y[F]=D}}A=[];z=[];for(x=0;x<g.value.length;x++){F=g.value[x];D=g.source[x];var u=g.target[x];if(0<F&&k(D,w)&&k(u,w)&&(!y.hasOwnProperty(D)||!y.hasOwnProperty(u)||y[D]!==y[u])){y.hasOwnProperty(u)&&
(u=y[u]);y.hasOwnProperty(D)&&(D=y[D]);D=+D;u=+u;r[D]=r[u]=!0;var B="";g.label&&g.label[x]&&(B=g.label[x]);var I=null;B&&t.hasOwnProperty(B)&&(I=t[B]);h.push({pointNumber:x,label:B,color:d?g.color[x]:g.color,customdata:p?g.customdata[x]:g.customdata,concentrationscale:I,source:D,target:u,value:+F});A.push(D);z.push(u)}}g=w+l.length;p=b(c.color);t=b(c.customdata);d=[];for(x=0;x<g;x++)r[x]&&d.push({group:x>w-1,childrenNodes:[],pointNumber:x,label:c.label[x],color:p?c.color[x]:c.color,customdata:t?c.customdata[x]:
c.customdata});c=!1;q(g,A,z)&&(c=!0);return f({circular:c,_nodes:d,_links:h,_groups:l,_groupLookup:y})}},{"../../components/colorscale":627,"../../lib":750,"../../lib/gup":747,"strongly-connected-components":541}],1151:[function(a,G,C){G.exports={nodeTextOffsetHorizontal:4,nodeTextOffsetVertical:3,nodePadAcross:10,sankeyIterations:50,forceIterations:5,forceTicksPerFrame:10,duration:500,ease:"linear",cn:{sankey:"sankey",sankeyLinks:"sankey-links",sankeyLink:"sankey-link",sankeyNodeSet:"sankey-node-set",
sankeyNode:"sankey-node",nodeRect:"node-rect",nodeCapture:"node-capture",nodeCentered:"node-entered",nodeLabelGuide:"node-label-guide",nodeLabel:"node-label",nodeLabelTextPath:"node-label-text-path"}}},{}],1152:[function(a,G,C){function q(c,g){function d(p,r){return n.coerce(c,g,m.link.colorscales,p,r)}d("label");d("cmin");d("cmax");d("colorscale")}var n=a("../../lib"),m=a("./attributes"),f=a("../../components/color"),b=a("tinycolor2"),k=a("../../plots/domain").defaults,e=a("../../components/fx/hoverlabel_defaults"),
h=a("../../plot_api/plot_template"),l=a("../../plots/array_container_defaults");G.exports=function(c,g,d,p){function r(u,B){return n.coerce(c,g,m,u,B)}function t(u,B){return n.coerce(x,y,m.node,u,B)}function w(u,B){return n.coerce(z,F,m.link,u,B)}d=n.extendDeep(p.hoverlabel,c.hoverlabel);var x=c.node,y=h.newContainer(g,"node");t("label");t("groups");t("x");t("y");t("pad");t("thickness");t("line.color");t("line.width");t("hoverinfo",c.hoverinfo);e(x,y,t,d);t("hovertemplate");var A=p.colorway;t("color",
y.label.map(function(u,B){return f.addOpacity(A[B%A.length],.8)}));t("customdata");var z=c.link||{},F=h.newContainer(g,"link");w("label");w("source");w("target");w("value");w("line.color");w("line.width");w("hoverinfo",c.hoverinfo);e(z,F,w,d);w("hovertemplate");d=.333>b(p.paper_bgcolor).getLuminance()?"rgba(255, 255, 255, 0.6)":"rgba(0, 0, 0, 0.2)";w("color",n.repeat(d,F.value.length));w("customdata");l(z,F,{name:"colorscales",handleItemDefaults:q});k(g,p,r);r("orientation");r("valueformat");r("valuesuffix");
var D;y.x.length&&y.y.length&&(D="freeform");r("arrangement",D);n.coerceFont(r,"textfont",n.extendFlat({},p.font));g._length=null}},{"../../components/color":615,"../../components/fx/hoverlabel_defaults":653,"../../lib":750,"../../plot_api/plot_template":788,"../../plots/array_container_defaults":794,"../../plots/domain":826,"./attributes":1148,tinycolor2:548}],1153:[function(a,G,C){G.exports={attributes:a("./attributes"),supplyDefaults:a("./defaults"),calc:a("./calc"),plot:a("./plot"),moduleType:"trace",
name:"sankey",basePlotModule:a("./base_plot"),selectPoints:a("./select.js"),categories:["noOpacity"],meta:{}}},{"./attributes":1148,"./base_plot":1149,"./calc":1150,"./defaults":1152,"./plot":1154,"./select.js":1156}],1154:[function(a,G,C){function q(A){return""!==A}function n(A,z){return A.filter(function(F){return F.key===z.traceId})}function m(A,z){d.select(A).select("path").style("fill-opacity",z);d.select(A).select("rect").style("fill-opacity",z)}function f(A){d.select(A).select("text.name").style("fill",
"black")}function b(A){return function(z){return-1!==A.node.sourceLinks.indexOf(z.link)||-1!==A.node.targetLinks.indexOf(z.link)}}function k(A){return function(z){return-1!==z.node.sourceLinks.indexOf(A.link)||-1!==z.node.targetLinks.indexOf(A.link)}}function e(A,z,F){z&&F&&n(F,z).selectAll("."+x.sankeyLink).filter(b(z)).call(l.bind(0,z,F,!1))}function h(A,z,F){z&&F&&n(F,z).selectAll("."+x.sankeyLink).filter(b(z)).call(c.bind(0,z,F,!1))}function l(A,z,F,D){var u=D.datum().link.label;D.style("fill-opacity",
function(B){if(!B.link.concentrationscale)return.4});u&&n(z,A).selectAll("."+x.sankeyLink).filter(function(B){return B.link.label===u}).style("fill-opacity",function(B){if(!B.link.concentrationscale)return.4});F&&n(z,A).selectAll("."+x.sankeyNode).filter(k(A)).call(e)}function c(A,z,F,D){var u=D.datum().link.label;D.style("fill-opacity",function(B){return B.tinyColorAlpha});u&&n(z,A).selectAll("."+x.sankeyLink).filter(function(B){return B.link.label===u}).style("fill-opacity",function(B){return B.tinyColorAlpha});
F&&n(z,A).selectAll(x.sankeyNode).filter(k(A)).call(h)}function g(A,z){A=w.nestedProperty(A.hoverlabel||{},z).get();return Array.isArray(A)?!1:A}var d=a("d3"),p=a("./render"),r=a("../../components/fx"),t=a("../../components/color"),w=a("../../lib"),x=a("./constants").cn,y=w._;G.exports=function(A,z){for(var F=A._fullLayout,D=F._paper,u=F._size,B=0;B<A._fullData.length;B++)if(A._fullData[B].visible&&A._fullData[B].type===x.sankey&&!A._fullData[B]._viewInitial){var I=A._fullData[B].node;A._fullData[B]._viewInitial=
{node:{groups:I.groups.slice(),x:I.x.slice(),y:I.y.slice()}}}var J=y(A,"source:")+" ",N=y(A,"target:")+" ",M=y(A,"concentration:")+" ",E=y(A,"incoming flow count:")+" ",L=y(A,"outgoing flow count:")+" ";p(A,D,z,{width:u.w,height:u.h,margin:{t:u.t,r:u.r,b:u.b,l:u.l}},{linkEvents:{hover:function(Q,S,R){!1!==A._fullLayout.hovermode&&(d.select(Q).call(l.bind(0,S,R,!0)),"skip"!==S.link.trace.link.hoverinfo&&(S.link.fullData=S.link.trace,A.emit("plotly_hover",{event:d.event,points:[S.link]})))},follow:function(Q,
S){function R(ka){if(ka.circular){var ha=(ka.circularPathData.leftInnerExtent+ka.circularPathData.rightInnerExtent)/2;var ca=ka.circularPathData.verticalFullExtent}else ha=(ka.source.x1+ka.target.x0)/2,ca=(ka.y0+ka.y1)/2;ha=[ha,ca];"v"===ka.trace.orientation&&ha.reverse();ha[0]+=S.parent.translateX;ha[1]+=S.parent.translateY;return ha}if(!1!==A._fullLayout.hovermode&&(Q=S.link.trace.link,"none"!==Q.hoverinfo&&"skip"!==Q.hoverinfo)){for(var O=[],T=0,V=0;V<S.flow.links.length;V++){var X=S.flow.links[V];
if("closest"!==A._fullLayout.hovermode||S.link.pointNumber===X.pointNumber){S.link.pointNumber===X.pointNumber&&(T=V);X.fullData=X.trace;Q=S.link.trace.link;var ba=R(X),aa={valueLabel:d.format(S.valueFormat)(X.value)+S.valueSuffix};O.push({x:ba[0],y:ba[1],name:aa.valueLabel,text:[X.label||"",J+X.source.label,N+X.target.label,X.concentrationscale?M+d.format("%0.2f")(X.flow.labelConcentration):""].filter(q).join("\x3cbr\x3e"),color:g(Q,"bgcolor")||t.addOpacity(X.color,1),borderColor:g(Q,"bordercolor"),
fontFamily:g(Q,"font.family"),fontSize:g(Q,"font.size"),fontColor:g(Q,"font.color"),nameLength:g(Q,"namelength"),textAlign:g(Q,"align"),idealAlign:d.event.x<ba[0]?"right":"left",hovertemplate:Q.hovertemplate,hovertemplateLabels:aa,eventData:[X]})}}r.loneHover(O,{container:F._hoverlayer.node(),outerContainer:F._paper.node(),gd:A,anchorIndex:T}).each(function(){S.link.concentrationscale||m(this,.65);f(this)})}},unhover:function(Q,S,R){!1!==A._fullLayout.hovermode&&(d.select(Q).call(c.bind(0,S,R,!0)),
"skip"!==S.link.trace.link.hoverinfo&&(S.link.fullData=S.link.trace,A.emit("plotly_unhover",{event:d.event,points:[S.link]})),r.loneUnhover(F._hoverlayer.node()))},select:function(Q,S){Q=S.link;Q.originalEvent=d.event;A._hoverdata=[Q];r.click(A,{target:!0})}},nodeEvents:{hover:function(Q,S,R){!1!==A._fullLayout.hovermode&&(d.select(Q).call(e,S,R),"skip"!==S.node.trace.node.hoverinfo&&(S.node.fullData=S.node.trace,A.emit("plotly_hover",{event:d.event,points:[S.node]})))},follow:function(Q,S){if(!1!==
A._fullLayout.hovermode){var R=S.node.trace.node;if("none"!==R.hoverinfo&&"skip"!==R.hoverinfo){Q=d.select(Q).select("."+x.nodeRect);var O=A._fullLayout._paperdiv.node().getBoundingClientRect(),T=Q.node().getBoundingClientRect();Q=T.left-2-O.left;var V=T.right+2-O.left;O=T.top+T.height/4-O.top;T={valueLabel:d.format(S.valueFormat)(S.node.value)+S.valueSuffix};S.node.fullData=S.node.trace;S=r.loneHover({x0:Q,x1:V,y:O,name:d.format(S.valueFormat)(S.node.value)+S.valueSuffix,text:[S.node.label,E+S.node.targetLinks.length,
L+S.node.sourceLinks.length].filter(q).join("\x3cbr\x3e"),color:g(R,"bgcolor")||S.tinyColorHue,borderColor:g(R,"bordercolor"),fontFamily:g(R,"font.family"),fontSize:g(R,"font.size"),fontColor:g(R,"font.color"),nameLength:g(R,"namelength"),textAlign:g(R,"align"),idealAlign:"left",hovertemplate:R.hovertemplate,hovertemplateLabels:T,eventData:[S.node]},{container:F._hoverlayer.node(),outerContainer:F._paper.node(),gd:A});m(S,.85);f(S)}}},unhover:function(Q,S,R){!1!==A._fullLayout.hovermode&&(d.select(Q).call(h,
S,R),"skip"!==S.node.trace.node.hoverinfo&&(S.node.fullData=S.node.trace,A.emit("plotly_unhover",{event:d.event,points:[S.node]})),r.loneUnhover(F._hoverlayer.node()))},select:function(Q,S,R){var O=S.node;O.originalEvent=d.event;A._hoverdata=[O];d.select(Q).call(h,S,R);r.click(A,{target:!0})}}})}},{"../../components/color":615,"../../components/fx":655,"../../lib":750,"./constants":1151,"./render":1155,d3:169}],1155:[function(a,G,C){function q(aa,ka,ha){function ca($a){$a.forEach(function(cb){var mb=
0;var Ka=cb.length,Ua;cb.sort(function(Ya,ab){return Ya.y0-ab.y0});for(Ua=0;Ua<Ka;++Ua){var Ea=cb[Ua];Ea.y0>=mb||(mb-=Ea.y0,1E-6<mb&&(Ea.y0+=mb,Ea.y1+=mb));mb=Ea.y1+Y}})}function sa($a){var cb=$a.map(function(Wa,Ja){return{x0:Wa.x0,index:Ja}}).sort(function(Wa,Ja){return Wa.x0-Ja.x0}),mb=[],Ka=-1,Ua=-Infinity;for(Oa=0;Oa<cb.length;Oa++){var Ea=$a[cb[Oa].index];if(Ea.x0>Ua+pa){Ka+=1;var Ya=Ea.x0}Ua=Ea.x0;mb[Ka]||(mb[Ka]=[]);mb[Ka].push(Ea);var ab=Ya-Ea.x0;Ea.x0+=ab;Ea.x1+=ab}return mb}var ma=V(ka);
ka=ma.trace;var ra=ka.domain,qa="h"===ka.orientation,Y=ka.node.pad,pa=ka.node.thickness,oa=aa.width*(ra.x[1]-ra.x[0]),ua=aa.height*(ra.y[1]-ra.y[0]),ya=ma._nodes,ja=ma._links,za=ma.circular;var Ba=za?Q.sankeyCircular().circularLinkGap(0):L.sankey();Ba.iterations(I.sankeyIterations).size(qa?[oa,ua]:[ua,oa]).nodeWidth(pa).nodePadding(Y).nodeId(function($a){return $a.pointNumber}).nodes(ya).links(ja);var Ma=Ba();Ba.nodePadding()<Y&&R.warn("node.pad was reduced to ",Ba.nodePadding()," to fit within the figure.");
var Oa,Ia,Pa;for(Na in ma._groupLookup){ya=parseInt(ma._groupLookup[Na]);for(Oa=0;Oa<Ma.nodes.length;Oa++)if(Ma.nodes[Oa].pointNumber===ya){var Fa=Ma.nodes[Oa];break}Fa&&(ya={pointNumber:parseInt(Na),x0:Fa.x0,x1:Fa.x1,y0:Fa.y0,y1:Fa.y1,partOfGroup:!0,sourceLinks:[],targetLinks:[]},Ma.nodes.unshift(ya),Fa.childrenNodes.unshift(ya))}(function(){for(Oa=0;Oa<Ma.nodes.length;Oa++){var $a=Ma.nodes[Oa],cb={};for(Ia=0;Ia<$a.targetLinks.length;Ia++){var mb=$a.targetLinks[Ia];var Ka=mb.source.pointNumber+":"+
mb.target.pointNumber;cb.hasOwnProperty(Ka)||(cb[Ka]=[]);cb[Ka].push(mb)}var Ua=Object.keys(cb);for(Ia=0;Ia<Ua.length;Ia++){Ka=Ua[Ia];Ka=cb[Ka];var Ea=0,Ya={};for(Pa=0;Pa<Ka.length;Pa++)mb=Ka[Pa],Ya[mb.label]||(Ya[mb.label]=0),Ya[mb.label]+=mb.value,Ea+=mb.value;for(Pa=0;Pa<Ka.length;Pa++)mb=Ka[Pa],mb.flow={value:Ea,labelConcentration:Ya[mb.label]/Ea,concentration:mb.value/Ea,links:Ka},mb.concentrationscale&&(mb.color=N(mb.concentrationscale(mb.flow.labelConcentration)))}for(Ia=cb=0;Ia<$a.sourceLinks.length;Ia++)cb+=
$a.sourceLinks[Ia].value;for(Ia=0;Ia<$a.sourceLinks.length;Ia++)mb=$a.sourceLinks[Ia],mb.concentrationOut=mb.value/cb;for(Ia=cb=0;Ia<$a.targetLinks.length;Ia++)cb+=$a.targetLinks[Ia].value;for(Ia=0;Ia<$a.targetLinks.length;Ia++)mb=$a.targetLinks[Ia],mb.concenrationIn=mb.value/cb}})();if(ka.node.x.length&&ka.node.y.length){for(Oa=0;Oa<Math.min(ka.node.x.length,ka.node.y.length,Ma.nodes.length);Oa++)if(ka.node.x[Oa]&&ka.node.y[Oa]){var Na=[ka.node.x[Oa]*oa,ka.node.y[Oa]*ua];Ma.nodes[Oa].x0=Na[0]-pa/
2;Ma.nodes[Oa].x1=Na[0]+pa/2;Fa=Ma.nodes[Oa].y1-Ma.nodes[Oa].y0;Ma.nodes[Oa].y0=Na[1]-Fa/2;Ma.nodes[Oa].y1=Na[1]+Fa/2}"snap"===ka.arrangement&&(ya=Ma.nodes,Na=sa(ya),ca(Na));Ba.update(Ma)}return{circular:za,key:ha,trace:ka,guid:R.randstr(),horizontal:qa,width:oa,height:ua,nodePad:ka.node.pad,nodeLineColor:ka.node.line.color,nodeLineWidth:ka.node.line.width,linkLineColor:ka.link.line.color,linkLineWidth:ka.link.line.width,valueFormat:ka.valueformat,valueSuffix:ka.valuesuffix,textFont:ka.textfont,translateX:ra.x[0]*
aa.width+aa.margin.l,translateY:aa.height-ra.y[1]*aa.height+aa.margin.t,dragParallel:qa?ua:oa,dragPerpendicular:qa?oa:ua,arrangement:ka.arrangement,sankey:Ba,graph:Ma,forceLayouts:{},interactionState:{dragInProgress:!1,hovered:!1}}}function n(aa,ka,ha){var ca=N(ka.color),sa=ka.source.label+"|"+ka.target.label;ka.trace=aa.trace;ka.curveNumber=aa.trace.index;return{circular:aa.circular,key:sa+"__"+ha,traceId:aa.key,pointNumber:ka.pointNumber,link:ka,tinyColorHue:M.tinyRGB(ca),tinyColorAlpha:ca.getAlpha(),
linkPath:m,linkLineColor:aa.linkLineColor,linkLineWidth:aa.linkLineWidth,valueFormat:aa.valueFormat,valueSuffix:aa.valueSuffix,sankey:aa.sankey,parent:aa,interactionState:aa.interactionState,flow:ka.flow}}function m(){return function(aa){if(aa.link.circular){var ka=aa.link,ha=ka.width/2,ca=ka.circularPathData;return"top"===ka.circularLinkType?"M "+ca.targetX+" "+(ca.targetY+ha)+" L"+ca.rightInnerExtent+" "+(ca.targetY+ha)+"A"+(ca.rightLargeArcRadius+ha)+" "+(ca.rightSmallArcRadius+ha)+" 0 0 1 "+(ca.rightFullExtent-
ha)+" "+(ca.targetY-ca.rightSmallArcRadius)+"L"+(ca.rightFullExtent-ha)+" "+ca.verticalRightInnerExtent+"A"+(ca.rightLargeArcRadius+ha)+" "+(ca.rightLargeArcRadius+ha)+" 0 0 1 "+ca.rightInnerExtent+" "+(ca.verticalFullExtent-ha)+"L"+ca.leftInnerExtent+" "+(ca.verticalFullExtent-ha)+"A"+(ca.leftLargeArcRadius+ha)+" "+(ca.leftLargeArcRadius+ha)+" 0 0 1 "+(ca.leftFullExtent+ha)+" "+ca.verticalLeftInnerExtent+"L"+(ca.leftFullExtent+ha)+" "+(ca.sourceY-ca.leftSmallArcRadius)+"A"+(ca.leftLargeArcRadius+
ha)+" "+(ca.leftSmallArcRadius+ha)+" 0 0 1 "+ca.leftInnerExtent+" "+(ca.sourceY+ha)+"L"+ca.sourceX+" "+(ca.sourceY+ha)+"L"+ca.sourceX+" "+(ca.sourceY-ha)+"L"+ca.leftInnerExtent+" "+(ca.sourceY-ha)+"A"+(ca.leftLargeArcRadius-ha)+" "+(ca.leftSmallArcRadius-ha)+" 0 0 0 "+(ca.leftFullExtent-ha)+" "+(ca.sourceY-ca.leftSmallArcRadius)+"L"+(ca.leftFullExtent-ha)+" "+ca.verticalLeftInnerExtent+"A"+(ca.leftLargeArcRadius-ha)+" "+(ca.leftLargeArcRadius-ha)+" 0 0 0 "+ca.leftInnerExtent+" "+(ca.verticalFullExtent+
ha)+"L"+ca.rightInnerExtent+" "+(ca.verticalFullExtent+ha)+"A"+(ca.rightLargeArcRadius-ha)+" "+(ca.rightLargeArcRadius-ha)+" 0 0 0 "+(ca.rightFullExtent+ha)+" "+ca.verticalRightInnerExtent+"L"+(ca.rightFullExtent+ha)+" "+(ca.targetY-ca.rightSmallArcRadius)+"A"+(ca.rightLargeArcRadius-ha)+" "+(ca.rightSmallArcRadius-ha)+" 0 0 0 "+ca.rightInnerExtent+" "+(ca.targetY-ha)+"L"+ca.targetX+" "+(ca.targetY-ha)+"Z":"M "+ca.targetX+" "+(ca.targetY-ha)+" L"+ca.rightInnerExtent+" "+(ca.targetY-ha)+"A"+(ca.rightLargeArcRadius+
ha)+" "+(ca.rightSmallArcRadius+ha)+" 0 0 0 "+(ca.rightFullExtent-ha)+" "+(ca.targetY+ca.rightSmallArcRadius)+"L"+(ca.rightFullExtent-ha)+" "+ca.verticalRightInnerExtent+"A"+(ca.rightLargeArcRadius+ha)+" "+(ca.rightLargeArcRadius+ha)+" 0 0 0 "+ca.rightInnerExtent+" "+(ca.verticalFullExtent+ha)+"L"+ca.leftInnerExtent+" "+(ca.verticalFullExtent+ha)+"A"+(ca.leftLargeArcRadius+ha)+" "+(ca.leftLargeArcRadius+ha)+" 0 0 0 "+(ca.leftFullExtent+ha)+" "+ca.verticalLeftInnerExtent+"L"+(ca.leftFullExtent+ha)+
" "+(ca.sourceY+ca.leftSmallArcRadius)+"A"+(ca.leftLargeArcRadius+ha)+" "+(ca.leftSmallArcRadius+ha)+" 0 0 0 "+ca.leftInnerExtent+" "+(ca.sourceY-ha)+"L"+ca.sourceX+" "+(ca.sourceY-ha)+"L"+ca.sourceX+" "+(ca.sourceY+ha)+"L"+ca.leftInnerExtent+" "+(ca.sourceY+ha)+"A"+(ca.leftLargeArcRadius-ha)+" "+(ca.leftSmallArcRadius-ha)+" 0 0 1 "+(ca.leftFullExtent-ha)+" "+(ca.sourceY+ca.leftSmallArcRadius)+"L"+(ca.leftFullExtent-ha)+" "+ca.verticalLeftInnerExtent+"A"+(ca.leftLargeArcRadius-ha)+" "+(ca.leftLargeArcRadius-
ha)+" 0 0 1 "+ca.leftInnerExtent+" "+(ca.verticalFullExtent-ha)+"L"+ca.rightInnerExtent+" "+(ca.verticalFullExtent-ha)+"A"+(ca.rightLargeArcRadius-ha)+" "+(ca.rightLargeArcRadius-ha)+" 0 0 1 "+(ca.rightFullExtent+ha)+" "+ca.verticalRightInnerExtent+"L"+(ca.rightFullExtent+ha)+" "+(ca.targetY+ca.rightSmallArcRadius)+"A"+(ca.rightLargeArcRadius-ha)+" "+(ca.rightSmallArcRadius-ha)+" 0 0 1 "+ca.rightInnerExtent+" "+(ca.targetY+ha)+"L"+ca.targetX+" "+(ca.targetY+ha)+"Z"}ka=aa.link.source.x1;ha=aa.link.target.x0;
var sa=X(ka,ha);ca=sa(.5);sa=sa(.5);var ma=aa.link.y0-aa.link.width/2,ra=aa.link.y0+aa.link.width/2,qa=aa.link.y1-aa.link.width/2;aa=aa.link.y1+aa.link.width/2;return"M"+ka+","+ma+"C"+ca+","+ma+" "+sa+","+qa+" "+ha+","+qa+"L"+ha+","+aa+"C"+sa+","+aa+" "+ca+","+ra+" "+ka+","+ra+"Z"}}function f(aa,ka){var ha=N(ka.color),ca=I.nodePadAcross,sa=aa.nodePad/2;ka.dx=ka.x1-ka.x0;ka.dy=ka.y1-ka.y0;var ma=ka.dx,ra=Math.max(.5,ka.dy),qa="node_"+ka.pointNumber;ka.group&&(qa=R.randstr());ka.trace=aa.trace;ka.curveNumber=
aa.trace.index;return{index:ka.pointNumber,key:qa,partOfGroup:ka.partOfGroup||!1,group:ka.group,traceId:aa.key,trace:aa.trace,node:ka,nodePad:aa.nodePad,nodeLineColor:aa.nodeLineColor,nodeLineWidth:aa.nodeLineWidth,textFont:aa.textFont,size:aa.horizontal?aa.height:aa.width,visibleWidth:Math.ceil(ma),visibleHeight:ra,zoneX:-ca,zoneY:-sa,zoneWidth:ma+2*ca,zoneHeight:ra+2*sa,labelY:aa.horizontal?ka.dy/2+1:ka.dx/2+1,left:1===ka.originalLayer,sizeAcross:aa.width,forceLayouts:aa.forceLayouts,horizontal:aa.horizontal,
darkBackground:128>=ha.getBrightness(),tinyColorHue:M.tinyRGB(ha),tinyColorAlpha:ha.getAlpha(),valueFormat:aa.valueFormat,valueSuffix:aa.valueSuffix,sankey:aa.sankey,graph:aa.graph,arrangement:aa.arrangement,uniqueNodeLabelPathId:[aa.guid,aa.key,qa].join("_"),interactionState:aa.interactionState,figure:aa}}function b(aa){aa.attr("transform",function(ka){return"translate("+ka.node.x0.toFixed(3)+", "+ka.node.y0.toFixed(3)+")"})}function k(aa){aa.call(b)}function e(aa){aa.attr("width",function(ka){return ka.node.x1-
ka.node.x0}).attr("height",function(ka){return ka.visibleHeight})}function h(aa){return"translate("+aa.translateX+","+aa.translateY+")"+(aa.horizontal?"matrix(1 0 0 1 0 0)":"matrix(0 1 1 0 0 0)")}function l(aa){return"translate("+(aa.horizontal?0:aa.labelY)+" "+(aa.horizontal?aa.labelY:0)+")"}function c(aa){return J.svg.line()([[aa.horizontal?aa.left?-aa.sizeAcross:aa.visibleWidth+I.nodeTextOffsetHorizontal:I.nodeTextOffsetHorizontal,0],[aa.horizontal?aa.left?-I.nodeTextOffsetHorizontal:aa.sizeAcross:
aa.visibleHeight-I.nodeTextOffsetHorizontal,0]])}function g(aa){return aa.horizontal?"matrix(1 0 0 1 0 0)":"matrix(0 1 1 0 0 0)"}function d(aa){return aa.horizontal?"scale(1 1)":"scale(-1 1)"}function p(aa){return aa.darkBackground&&!aa.horizontal?"rgb(255,255,255)":"rgb(0,0,0)"}function r(aa){return aa.horizontal&&aa.left?"100%":"0%"}function t(aa,ka,ha){aa.on(".basic",null).on("mouseover.basic",function(ca){ca.interactionState.dragInProgress||ca.partOfGroup||(ha.hover(this,ca,ka),ca.interactionState.hovered=
[this,ca])}).on("mousemove.basic",function(ca){ca.interactionState.dragInProgress||ca.partOfGroup||(ha.follow(this,ca),ca.interactionState.hovered=[this,ca])}).on("mouseout.basic",function(ca){ca.interactionState.dragInProgress||ca.partOfGroup||(ha.unhover(this,ca,ka),ca.interactionState.hovered=!1)}).on("click.basic",function(ca){ca.interactionState.hovered&&(ha.unhover(this,ca,ka),ca.interactionState.hovered=!1);ca.interactionState.dragInProgress||ca.partOfGroup||ha.select(this,ca,ka)})}function w(aa,
ka,ha,ca){var sa=J.behavior.drag().origin(function(ma){return{x:ma.node.x0+ma.visibleWidth/2,y:ma.node.y0+ma.visibleHeight/2}}).on("dragstart",function(ma){if("fixed"!==ma.arrangement&&(R.ensureSingle(ca._fullLayout._infolayer,"g","dragcover",function(qa){ca._fullLayout._dragCover=qa}),R.raiseToTop(this),ma.interactionState.dragInProgress=ma.node,D(ma.node),ma.interactionState.hovered&&(ha.nodeEvents.unhover.apply(0,ma.interactionState.hovered),ma.interactionState.hovered=!1),"snap"===ma.arrangement)){var ra=
ma.traceId+"|"+ma.key;ma.forceLayouts[ra]?ma.forceLayouts[ra].alpha(1):x(aa,ra,ma,ca);y(aa,ka,ma,ra,ca)}}).on("drag",function(ma){if("fixed"!==ma.arrangement){var ra=J.event.x,qa=J.event.y;"snap"===ma.arrangement?(ma.node.x0=ra-ma.visibleWidth/2,ma.node.x1=ra+ma.visibleWidth/2):("freeform"===ma.arrangement&&(ma.node.x0=ra-ma.visibleWidth/2,ma.node.x1=ra+ma.visibleWidth/2),qa=Math.max(0,Math.min(ma.size-ma.visibleHeight/2,qa)));ma.node.y0=qa-ma.visibleHeight/2;ma.node.y1=qa+ma.visibleHeight/2;D(ma.node);
"snap"!==ma.arrangement&&(ma.sankey.update(ma.graph),aa.filter(u(ma)).call(k),ka.attr("d",m()))}}).on("dragend",function(ma){if("fixed"!==ma.arrangement){ma.interactionState.dragInProgress=!1;for(var ra=0;ra<ma.node.childrenNodes.length;ra++)ma.node.childrenNodes[ra].x=ma.node.x,ma.node.childrenNodes[ra].y=ma.node.y;"snap"!==ma.arrangement&&z(ma,ca)}});aa.on(".drag",null).call(sa)}function x(aa,ka,ha,ca){B(ha.graph.nodes);var sa=ha.graph.nodes.filter(function(ma){return ma.originalX===ha.node.originalX}).filter(function(ma){return!ma.partOfGroup});
ha.forceLayouts[ka]=S.forceSimulation(sa).alphaDecay(0).force("collide",S.forceCollide().radius(function(ma){return ma.dy/2+ha.nodePad/2}).strength(1).iterations(I.forceIterations)).force("constrain",A(aa,ka,sa,ha,ca)).stop()}function y(aa,ka,ha,ca,sa){window.requestAnimationFrame(function ra(){var qa;for(qa=0;qa<I.forceTicksPerFrame;qa++)ha.forceLayouts[ca].tick();qa=ha.graph.nodes;for(var Y=0;Y<qa.length;Y++)qa[Y].y0=qa[Y].y-qa[Y].dy/2,qa[Y].y1=qa[Y].y0+qa[Y].dy,qa[Y].x0=qa[Y].x-qa[Y].dx/2,qa[Y].x1=
qa[Y].x0+qa[Y].dx;ha.sankey.update(ha.graph);aa.filter(u(ha)).call(k);ka.attr("d",m());0<ha.forceLayouts[ca].alpha()?window.requestAnimationFrame(ra):(qa=ha.node.originalX,ha.node.x0=qa-ha.visibleWidth/2,ha.node.x1=qa+ha.visibleWidth/2,z(ha,sa))})}function A(aa,ka,ha,ca){return function(){for(var sa=0,ma=0;ma<ha.length;ma++){var ra=ha[ma];ra===ca.interactionState.dragInProgress?(ra.x=ra.lastDraggedX,ra.y=ra.lastDraggedY):(ra.vx=(ra.originalX-ra.x)/I.forceTicksPerFrame,ra.y=Math.min(ca.size-ra.dy/
2,Math.max(ra.dy/2,ra.y)));sa=Math.max(sa,Math.abs(ra.vx),Math.abs(ra.vy))}!ca.interactionState.dragInProgress&&.1>sa&&0<ca.forceLayouts[ka].alpha()&&ca.forceLayouts[ka].alpha(0)}}function z(aa,ka){for(var ha=[],ca=[],sa=0;sa<aa.graph.nodes.length;sa++){var ma=(aa.graph.nodes[sa].y0+aa.graph.nodes[sa].y1)/2;ha.push((aa.graph.nodes[sa].x0+aa.graph.nodes[sa].x1)/2/aa.figure.width);ca.push(ma/aa.figure.height)}ba.call("_guiRestyle",ka,{"node.x":[ha],"node.y":[ca]},aa.trace.index).then(function(){ka._fullLayout._dragCover&&
ka._fullLayout._dragCover.remove()})}function F(aa){var ka=[],ha;for(ha=0;ha<aa.length;ha++)aa[ha].originalX=(aa[ha].x0+aa[ha].x1)/2,aa[ha].originalY=(aa[ha].y0+aa[ha].y1)/2,-1===ka.indexOf(aa[ha].originalX)&&ka.push(aa[ha].originalX);ka.sort(function(ca,sa){return ca-sa});for(ha=0;ha<aa.length;ha++)aa[ha].originalLayerIndex=ka.indexOf(aa[ha].originalX),aa[ha].originalLayer=aa[ha].originalLayerIndex/(ka.length-1)}function D(aa){aa.lastDraggedX=aa.x0+aa.dx/2;aa.lastDraggedY=aa.y0+aa.dy/2}function u(aa){return function(ka){return ka.node.originalX===
aa.node.originalX}}function B(aa){for(var ka=0;ka<aa.length;ka++)aa[ka].y=(aa[ka].y0+aa[ka].y1)/2,aa[ka].x=(aa[ka].x0+aa[ka].x1)/2}var I=a("./constants"),J=a("d3"),N=a("tinycolor2"),M=a("../../components/color"),E=a("../../components/drawing"),L=a("@plotly/d3-sankey"),Q=a("@plotly/d3-sankey-circular"),S=a("d3-force"),R=a("../../lib");C=a("../../lib/gup");var O=C.keyFun,T=C.repeat,V=C.unwrap,X=a("d3-interpolate").interpolateNumber,ba=a("../../registry");G.exports=function(aa,ka,ha,ca,sa){var ma=!1;
R.ensureSingle(aa._fullLayout._infolayer,"g","first-render",function(){ma=!0});var ra=aa._fullLayout._dragCover;ha=ha.filter(function(Y){return V(Y).trace.visible}).map(q.bind(null,ca));ka=ka.selectAll("."+I.cn.sankey).data(ha,O);ka.exit().remove();ka.enter().append("g").classed(I.cn.sankey,!0).style("box-sizing","content-box").style("position","absolute").style("left",0).style("shape-rendering","geometricPrecision").style("pointer-events","auto").attr("transform",h);ka.each(function(Y,pa){aa._fullData[pa]._sankey=
Y;var oa="bgsankey-"+Y.trace.uid+"-"+pa;R.ensureSingle(aa._fullLayout._draggers,"rect",oa);aa._fullData[pa]._bgRect=J.select("."+oa);aa._fullData[pa]._bgRect.style("pointer-events","all").attr("width",Y.width).attr("height",Y.height).attr("x",Y.translateX).attr("y",Y.translateY).classed("bgsankey",!0).style({fill:"transparent","stroke-width":0})});ka.transition().ease(I.ease).duration(I.duration).attr("transform",h);ha=ka.selectAll("."+I.cn.sankeyLinks).data(T,O);ha.enter().append("g").classed(I.cn.sankeyLinks,
!0).style("fill","none");ca=ha.selectAll("."+I.cn.sankeyLink).data(function(Y){return Y.graph.links.filter(function(pa){return pa.value}).map(n.bind(null,Y))},O);ca.enter().append("path").classed(I.cn.sankeyLink,!0).call(t,ka,sa.linkEvents);ca.style("stroke",function(Y){return 1<Y.link.width||0<Y.linkLineWidth?M.tinyRGB(N(Y.linkLineColor)):Y.tinyColorHue}).style("stroke-opacity",function(Y){return 1<Y.link.width||0<Y.linkLineWidth?M.opacity(Y.linkLineColor):Y.tinyColorAlpha}).style("fill",function(Y){return Y.tinyColorHue}).style("fill-opacity",
function(Y){return Y.tinyColorAlpha}).style("stroke-width",function(Y){return 1<Y.link.width||0<Y.linkLineWidth?Y.linkLineWidth:1}).attr("d",m());ca.style("opacity",function(){return aa._context.staticPlot||ma||ra?1:0}).transition().ease(I.ease).duration(I.duration).style("opacity",1);ca.exit().transition().ease(I.ease).duration(I.duration).style("opacity",0).remove();ha=ka.selectAll("."+I.cn.sankeyNodeSet).data(T,O);ha.enter().append("g").classed(I.cn.sankeyNodeSet,!0);ha.style("cursor",function(Y){switch(Y.arrangement){case "fixed":return"default";
case "perpendicular":return"ns-resize";default:return"move"}});ha=ha.selectAll("."+I.cn.sankeyNode).data(function(Y){var pa=Y.graph.nodes;F(pa);return pa.map(f.bind(null,Y))},O);ha.enter().append("g").classed(I.cn.sankeyNode,!0).call(b).style("opacity",function(Y){return!aa._context.staticPlot&&!ma||Y.partOfGroup?0:1});ha.call(t,ka,sa.nodeEvents).call(w,ca,sa,aa);ha.transition().ease(I.ease).duration(I.duration).call(b).style("opacity",function(Y){return Y.partOfGroup?0:1});ha.exit().transition().ease(I.ease).duration(I.duration).style("opacity",
0).remove();sa=ha.selectAll("."+I.cn.nodeRect).data(T);sa.enter().append("rect").classed(I.cn.nodeRect,!0).call(e);sa.style("stroke-width",function(Y){return Y.nodeLineWidth}).style("stroke",function(Y){return M.tinyRGB(N(Y.nodeLineColor))}).style("stroke-opacity",function(Y){return M.opacity(Y.nodeLineColor)}).style("fill",function(Y){return Y.tinyColorHue}).style("fill-opacity",function(Y){return Y.tinyColorAlpha});sa.transition().ease(I.ease).duration(I.duration).call(e);sa=ha.selectAll("."+I.cn.nodeCapture).data(T);
sa.enter().append("rect").classed(I.cn.nodeCapture,!0).style("fill-opacity",0);sa.attr("x",function(Y){return Y.zoneX}).attr("y",function(Y){return Y.zoneY}).attr("width",function(Y){return Y.zoneWidth}).attr("height",function(Y){return Y.zoneHeight});sa=ha.selectAll("."+I.cn.nodeCentered).data(T);sa.enter().append("g").classed(I.cn.nodeCentered,!0).attr("transform",l);sa.transition().ease(I.ease).duration(I.duration).attr("transform",l);ka=sa.selectAll("."+I.cn.nodeLabelGuide).data(T);ka.enter().append("path").classed(I.cn.nodeLabelGuide,
!0).attr("id",function(Y){return Y.uniqueNodeLabelPathId}).attr("d",c).attr("transform",g);ka.transition().ease(I.ease).duration(I.duration).attr("d",c).attr("transform",g);var qa=sa.selectAll("."+I.cn.nodeLabel).data(T);qa.enter().append("text").classed(I.cn.nodeLabel,!0).attr("transform",d).style("cursor","default").style("fill","black");qa.style("text-shadow",function(Y){return Y.horizontal?"-1px 1px 1px #fff, 1px 1px 1px #fff, 1px -1px 1px #fff, -1px -1px 1px #fff":"none"}).each(function(Y){E.font(qa,
Y.textFont)});qa.transition().ease(I.ease).duration(I.duration).attr("transform",d);sa=qa.selectAll("."+I.cn.nodeLabelTextPath).data(T);sa.enter().append("textPath").classed(I.cn.nodeLabelTextPath,!0).attr("alignment-baseline","middle").attr("xlink:href",function(Y){return"#"+Y.uniqueNodeLabelPathId}).attr("startOffset",r).style("fill",p);sa.text(function(Y){return Y.horizontal||5<Y.node.dy?Y.node.label:""}).attr("text-anchor",function(Y){return Y.horizontal&&Y.left?"end":"start"});sa.transition().ease(I.ease).duration(I.duration).attr("startOffset",
r).style("fill",p)}},{"../../components/color":615,"../../components/drawing":637,"../../lib":750,"../../lib/gup":747,"../../registry":882,"./constants":1151,"@plotly/d3-sankey":56,"@plotly/d3-sankey-circular":55,d3:169,"d3-force":160,"d3-interpolate":162,tinycolor2:548}],1156:[function(a,G,C){G.exports=function(q,n){for(var m=[],f=q.cd[0].trace,b=f._sankey.graph.nodes,k=0;k<b.length;k++){var e=b[k];if(!e.partOfGroup){var h=[(e.x0+e.x1)/2,(e.y0+e.y1)/2];"v"===f.orientation&&h.reverse();n&&n.contains(h,
!1,k,q)&&m.push({pointNumber:e.pointNumber})}}return m}},{}],1157:[function(a,G,C){var q=a("../../lib");G.exports=function(n,m){for(var f=0;f<n.length;f++)n[f].i=f;q.mergeArray(m.text,n,"tx");q.mergeArray(m.texttemplate,n,"txt");q.mergeArray(m.hovertext,n,"htx");q.mergeArray(m.customdata,n,"data");q.mergeArray(m.textposition,n,"tp");m.textfont&&(q.mergeArrayCastPositive(m.textfont.size,n,"ts"),q.mergeArray(m.textfont.color,n,"tc"),q.mergeArray(m.textfont.family,n,"tf"));if(m=m.marker){q.mergeArrayCastPositive(m.size,
n,"ms");q.mergeArrayCastPositive(m.opacity,n,"mo");q.mergeArray(m.symbol,n,"mx");q.mergeArray(m.color,n,"mc");if(f=m.line)q.mergeArray(f.color,n,"mlc"),q.mergeArrayCastPositive(f.width,n,"mlw");(m=m.gradient)&&"none"!==m.type&&(q.mergeArray(m.type,n,"mgt"),q.mergeArray(m.color,n,"mgc"))}}},{"../../lib":750}],1158:[function(a,G,C){function q(l){return{valType:"any",dflt:0,editType:"calc"}}function n(l){return{valType:"enumerated",values:["start","middle","end"],dflt:"middle",editType:"calc"}}C=a("../../plots/template_attributes").texttemplateAttrs;
var m=a("../../plots/template_attributes").hovertemplateAttrs,f=a("../../components/colorscale/attributes"),b=a("../../plots/font_attributes"),k=a("../../components/drawing/attributes").dash,e=a("../../components/drawing"),h=a("./constants");a=a("../../lib/extend").extendFlat;G.exports={x:{valType:"data_array",editType:"calc+clearAxisTypes",anim:!0},x0:{valType:"any",dflt:0,editType:"calc+clearAxisTypes",anim:!0},dx:{valType:"number",dflt:1,editType:"calc",anim:!0},y:{valType:"data_array",editType:"calc+clearAxisTypes",
anim:!0},y0:{valType:"any",dflt:0,editType:"calc+clearAxisTypes",anim:!0},dy:{valType:"number",dflt:1,editType:"calc",anim:!0},xperiod:q("x"),yperiod:q("y"),xperiod0:{valType:"any",editType:"calc"},yperiod0:{valType:"any",editType:"calc"},xperiodalignment:n("x"),yperiodalignment:n("y"),stackgroup:{valType:"string",dflt:"",editType:"calc"},orientation:{valType:"enumerated",values:["v","h"],editType:"calc"},groupnorm:{valType:"enumerated",values:["","fraction","percent"],dflt:"",editType:"calc"},stackgaps:{valType:"enumerated",
values:["infer zero","interpolate"],dflt:"infer zero",editType:"calc"},text:{valType:"string",dflt:"",arrayOk:!0,editType:"calc"},texttemplate:C({},{}),hovertext:{valType:"string",dflt:"",arrayOk:!0,editType:"style"},mode:{valType:"flaglist",flags:["lines","markers","text"],extras:["none"],editType:"calc"},hoveron:{valType:"flaglist",flags:["points","fills"],editType:"style"},hovertemplate:m({},{keys:h.eventDataKeys}),line:{color:{valType:"color",editType:"style",anim:!0},width:{valType:"number",
min:0,dflt:2,editType:"style",anim:!0},shape:{valType:"enumerated",values:"linear spline hv vh hvh vhv".split(" "),dflt:"linear",editType:"plot"},smoothing:{valType:"number",min:0,max:1.3,dflt:1,editType:"plot"},dash:a({},k,{editType:"style"}),simplify:{valType:"boolean",dflt:!0,editType:"plot"},editType:"plot"},connectgaps:{valType:"boolean",dflt:!1,editType:"calc"},cliponaxis:{valType:"boolean",dflt:!0,editType:"plot"},fill:{valType:"enumerated",values:"none tozeroy tozerox tonexty tonextx toself tonext".split(" "),
editType:"calc"},fillcolor:{valType:"color",editType:"style",anim:!0},marker:a({symbol:{valType:"enumerated",values:e.symbolList,dflt:"circle",arrayOk:!0,editType:"style"},opacity:{valType:"number",min:0,max:1,arrayOk:!0,editType:"style",anim:!0},size:{valType:"number",min:0,dflt:6,arrayOk:!0,editType:"calc",anim:!0},maxdisplayed:{valType:"number",min:0,dflt:0,editType:"plot"},sizeref:{valType:"number",dflt:1,editType:"calc"},sizemin:{valType:"number",min:0,dflt:0,editType:"calc"},sizemode:{valType:"enumerated",
values:["diameter","area"],dflt:"diameter",editType:"calc"},line:a({width:{valType:"number",min:0,arrayOk:!0,editType:"style",anim:!0},editType:"calc"},f("marker.line",{anim:!0})),gradient:{type:{valType:"enumerated",values:["radial","horizontal","vertical","none"],arrayOk:!0,dflt:"none",editType:"calc"},color:{valType:"color",arrayOk:!0,editType:"calc"},editType:"calc"},editType:"calc"},f("marker",{anim:!0})),selected:{marker:{opacity:{valType:"number",min:0,max:1,editType:"style"},color:{valType:"color",
editType:"style"},size:{valType:"number",min:0,editType:"style"},editType:"style"},textfont:{color:{valType:"color",editType:"style"},editType:"style"},editType:"style"},unselected:{marker:{opacity:{valType:"number",min:0,max:1,editType:"style"},color:{valType:"color",editType:"style"},size:{valType:"number",min:0,editType:"style"},editType:"style"},textfont:{color:{valType:"color",editType:"style"},editType:"style"},editType:"style"},textposition:{valType:"enumerated",values:"top left;top center;top right;middle left;middle center;middle right;bottom left;bottom center;bottom right".split(";"),
dflt:"middle center",arrayOk:!0,editType:"calc"},textfont:b({editType:"calc",colorEditType:"style",arrayOk:!0}),r:{valType:"data_array",editType:"calc"},t:{valType:"data_array",editType:"calc"}}},{"../../components/colorscale/attributes":622,"../../components/drawing":637,"../../components/drawing/attributes":636,"../../lib/extend":740,"../../plots/font_attributes":827,"../../plots/template_attributes":877,"./constants":1162}],1159:[function(a,G,C){function q(t,w,x,y,A,z,F){var D=w._length,u=t._fullLayout;
t=x._id;var B=y._id,I=u._firstScatter[f(w)]===w.uid;u=(b(w,u,x,y)||{}).orientation;var J=w.fill;x._minDtick=0;y._minDtick=0;var N={padded:!0},M={padded:!0};F&&(N.ppad=M.ppad=F);(F=2>D||A[0]!==A[D-1]||z[0]!==z[D-1])&&("tozerox"===J||"tonextx"===J&&(I||"h"===u))?N.tozero=!0:(w.error_y||{}).visible||"tonexty"!==J&&"tozeroy"!==J&&(g.hasMarkers(w)||g.hasText(w))||(N.padded=!1,N.ppad=0);if(F&&("tozeroy"===J||"tonexty"===J&&(I||"v"===u)))M.tozero=!0;else if("tonextx"===J||"tozerox"===J)M.padded=!1;t&&(w._extremes[t]=
h.findExtremes(x,A,N));B&&(w._extremes[B]=h.findExtremes(y,z,M))}function n(t,w){if(g.hasMarkers(t)){var x=t.marker,y=1.6*(t.marker.sizeref||1);var A="area"===t.marker.sizemode?function(F){return Math.max(Math.sqrt((F||0)/y),3)}:function(F){return Math.max((F||0)/y,3)};if(e.isArrayOrTypedArray(x.size)){x={type:"linear"};h.setConvert(x);t=x.makeCalcdata(t.marker,"size");x=Array(w);for(var z=0;z<w;z++)x[z]=A(t[z]);return x}return A(x.size)}}function m(t,w){var x=f(w);t=t._firstScatter;t[x]||(t[x]=w.uid)}
function f(t){var w=t.stackgroup;return t.xaxis+t.yaxis+t.type+(w?"-"+w:"")}function b(t,w,x,y){if(t=t.stackgroup)if(w=w._scatterStackOpts[x._id+y._id][t],x="v"===w.orientation?y:x,"linear"===x.type||"log"===x.type)return w}var k=a("fast-isnumeric"),e=a("../../lib"),h=a("../../plots/cartesian/axes"),l=a("../../plots/cartesian/align_period"),c=a("../../constants/numerical").BADNUM,g=a("./subtypes"),d=a("./colorscale_calc"),p=a("./arrays_to_calcdata"),r=a("./calc_selection");G.exports={calc:function(t,
w){var x=t._fullLayout,y=h.getFromId(t,w.xaxis||"x"),A=h.getFromId(t,w.yaxis||"y"),z=y.makeCalcdata(w,"x"),F=A.makeCalcdata(w,"y"),D=l(w,y,"x",z),u=l(w,A,"y",F),B=w._length,I=Array(B),J=w.ids,N=b(w,x,y,A),M=!1,E;m(x,w);x="x";var L="y";if(N){e.pushUnique(N.traceIndices,w._expandedIndex);if(E="v"===N.orientation){L="s";var Q="x"}else x="s",Q="y";var S="interpolate"===N.stackgaps}else{var R=n(w,B);q(t,w,y,A,D,u,R)}A=!!w.xperiodalignment;R=!!w.yperiodalignment;for(y=0;y<B;y++){var O=I[y]={},T=k(D[y]),
V=k(u[y]);T&&V?(O[x]=D[y],O[L]=u[y],A&&(O.orig_x=z[y]),R&&(O.orig_y=F[y])):N&&(E?T:V)?(O[Q]=E?D[y]:u[y],O.gap=!0,S?(O.s=c,M=!0):O.s=0):O[x]=O[L]=c;J&&(O.id=String(J[y]))}p(I,w);d(t,w);r(I,w);if(N){for(y=0;y<I.length;)I[y][Q]===c?I.splice(y,1):y++;e.sort(I,function(X,ba){return X[Q]-ba[Q]||X.i-ba.i});if(M){for(y=0;y<I.length-1&&I[y].gap;)y++;z=I[y].s;z||(z=I[y].s=0);for(t=0;t<y;t++)I[t].s=z;for(w=I.length-1;w>y&&I[w].gap;)w--;z=I[w].s;for(t=I.length-1;t>w;t--)I[t].s=z;for(;y<w;)if(y++,I[y].gap){for(t=
y+1;I[t].gap;)t++;z=I[y-1][Q];F=I[y-1].s;for(D=(I[t].s-F)/(I[t][Q]-z);y<t;)I[y].s=F+(I[y][Q]-z)*D,y++}}}return I},calcMarkerSize:n,calcAxisExpansion:q,setFirstScatter:m,getStackOpts:b}},{"../../constants/numerical":725,"../../lib":750,"../../plots/cartesian/align_period":796,"../../plots/cartesian/axes":799,"./arrays_to_calcdata":1157,"./calc_selection":1160,"./colorscale_calc":1161,"./subtypes":1183,"fast-isnumeric":241}],1160:[function(a,G,C){var q=a("../../lib");G.exports=function(n,m){q.isArrayOrTypedArray(m.selectedpoints)&&
q.tagSelected(n,m)}},{"../../lib":750}],1161:[function(a,G,C){var q=a("../../components/colorscale/helpers").hasColorscale,n=a("../../components/colorscale/calc"),m=a("./subtypes");G.exports=function(f,b){m.hasLines(b)&&q(b,"line")&&n(f,b,{vals:b.line.color,containerStr:"line",cLetter:"c"});m.hasMarkers(b)&&(q(b,"marker")&&n(f,b,{vals:b.marker.color,containerStr:"marker",cLetter:"c"}),q(b,"marker.line")&&n(f,b,{vals:b.marker.line.color,containerStr:"marker.line",cLetter:"c"}))}},{"../../components/colorscale/calc":623,
"../../components/colorscale/helpers":626,"./subtypes":1183}],1162:[function(a,G,C){G.exports={PTS_LINESONLY:20,minTolerance:.2,toleranceGrowth:10,maxScreensAway:20,eventDataKeys:[]}},{}],1163:[function(a,G,C){function q(m,f,b,k,e,h,l){e[k]=!0;k={i:null,gap:!0,s:0};k[l]=b;m.splice(f,0,k);f&&b===m[f-1][l]?(b=m[f-1],k.s=b.s,k.i=b.i,k.gap=b.gap):h&&(h=m[f-1],b=(e=m[f+1])?h?h.s+(e.s-h.s)*(b-h[l])/(e[l]-h[l]):e.s:h.s,k.s=b);f||(m[0].t=m[1].t,m[0].trace=m[1].trace,delete m[1].t,delete m[1].trace)}var n=
a("./calc");G.exports=function(m,f){var b=f.xaxis;f=f.yaxis;var k=m._fullLayout._scatterStackOpts[b._id+f._id];if(k){var e=m.calcdata,h,l,c,g,d,p;for(p in k){var r=k[p];var t=r.traceIndices;if(t.length){var w="interpolate"===r.stackgaps;var x=r.groupnorm;if("v"===r.orientation){var y="x";var A="y"}else y="y",A="x";var z=Array(t.length);for(h=0;h<z.length;h++)z[h]=!1;var F=e[t[0]];var D=Array(F.length);for(h=0;h<F.length;h++)D[h]=F[h][y];for(h=1;h<t.length;h++){var u=e[t[h]];for(l=c=0;l<u.length;l++){for(d=
u[l][y];d>D[c]&&c<D.length;c++)q(u,l,D[c],h,z,w,y),l++;if(d!==D[c]){for(g=0;g<h;g++)q(e[t[g]],c,d,g,z,w,y);D.splice(c,0,d)}c++}for(;c<D.length;c++)q(u,l,D[c],h,z,w,y),l++}c=D.length;for(l=0;l<F.length;l++){g=F[l][A]=F[l].s;for(h=1;h<t.length;h++)u=e[t[h]],u[0].trace._rawLength=u[0].trace._length,u[0].trace._length=c,g+=u[l].s,u[l][A]=g;if(x)for(u=("fraction"===x?g:g/100)||1,h=0;h<t.length;h++)g=e[t[h]][l],g[A]/=u,g.sNorm=g.s/u}for(h=0;h<t.length;h++){u=e[t[h]];F=u[0].trace;x=n.calcMarkerSize(F,F._rawLength);
A=Array.isArray(x);if(x&&z[h]||A)for(g=x,x=Array(c),l=0;l<c;l++)x[l]=u[l].gap?0:A?g[u[l].i]:g;A=Array(c);g=Array(c);for(l=0;l<c;l++)A[l]=u[l].x,g[l]=u[l].y;n.calcAxisExpansion(m,F,b,f,A,g,x);u[0].t.orientation=r.orientation}}}}}},{"./calc":1159}],1164:[function(a,G,C){G.exports=function(q){for(var n=0;n<q.length;n++){var m=q[n];if("scatter"===m.type){var f=m.fill;if("none"!==f&&"toself"!==f&&(m.opacity=void 0,"tonexty"===f||"tonextx"===f))for(f=n-1;0<=f;f--){var b=q[f];if("scatter"===b.type&&b.xaxis===
m.xaxis&&b.yaxis===m.yaxis){b.opacity=void 0;break}}}}}},{}],1165:[function(a,G,C){var q=a("../../lib"),n=a("../../registry"),m=a("./attributes"),f=a("./constants"),b=a("./subtypes"),k=a("./xy_defaults"),e=a("./period_defaults"),h=a("./stack_defaults"),l=a("./marker_defaults"),c=a("./line_defaults"),g=a("./line_shape_defaults"),d=a("./text_defaults"),p=a("./fillcolor_defaults");G.exports=function(r,t,w,x){function y(F,D){return q.coerce(r,t,m,F,D)}var A=k(r,t,x,y);A||(t.visible=!1);if(t.visible){e(r,
t,x,y);var z=h(r,t,x,y);A=!z&&A<f.PTS_LINESONLY?"lines+markers":"lines";y("text");y("hovertext");y("mode",A);b.hasLines(t)&&(c(r,t,w,x,y),g(r,t,y),y("connectgaps"),y("line.simplify"));b.hasMarkers(t)&&l(r,t,w,x,y,{gradient:!0});b.hasText(t)&&(y("texttemplate"),d(r,t,x,y));x=[];if(b.hasMarkers(t)||b.hasText(t))y("cliponaxis"),y("marker.maxdisplayed"),x.push("points");y("fill",z?z.fillDflt:"none");"none"!==t.fill&&(p(r,t,w,y),b.hasLines(t)||g(r,t,y));z=(t.line||{}).color;A=(t.marker||{}).color;"tonext"!==
t.fill&&"toself"!==t.fill||x.push("fills");y("hoveron",x.join("+")||"points");"fills"!==t.hoveron&&y("hovertemplate");x=n.getComponentMethod("errorbars","supplyDefaults");x(r,t,z||A||w,{axis:"y"});x(r,t,z||A||w,{axis:"x",inherit:"y"});q.coerceSelectionMarkerOpacity(t,y)}}},{"../../lib":750,"../../registry":882,"./attributes":1158,"./constants":1162,"./fillcolor_defaults":1166,"./line_defaults":1171,"./line_shape_defaults":1173,"./marker_defaults":1177,"./period_defaults":1178,"./stack_defaults":1181,
"./subtypes":1183,"./text_defaults":1184,"./xy_defaults":1185}],1166:[function(a,G,C){var q=a("../../components/color"),n=a("../../lib").isArrayOrTypedArray;G.exports=function(m,f,b,k){m=!1;if(f.marker){var e=f.marker.color,h=(f.marker.line||{}).color;e&&!n(e)?m=e:h&&!n(h)&&(m=h)}k("fillcolor",q.addOpacity((f.line||{}).color||m||b,.5))}},{"../../components/color":615,"../../lib":750}],1167:[function(a,G,C){var q=a("../../plots/cartesian/axes");G.exports=function(n,m,f){var b={},k={_fullLayout:f};
f=q.getFromTrace(k,m,"x");m=q.getFromTrace(k,m,"y");b.xLabel=q.tickText(f,n.x,!0).text;b.yLabel=q.tickText(m,n.y,!0).text;return b}},{"../../plots/cartesian/axes":799}],1168:[function(a,G,C){var q=a("../../components/color"),n=a("./subtypes");G.exports=function(m,f){if("lines"===m.mode)return(f=m.line.color)&&q.opacity(f)?f:m.fillcolor;if("none"===m.mode)return m.fill?m.fillcolor:"";var b=f.mcc||(m.marker||{}).color,k=f.mlcc||((m.marker||{}).line||{}).color;return(f=b&&q.opacity(b)?b:k&&q.opacity(k)&&
(f.mlw||((m.marker||{}).line||{}).width)?k:"")?.3>q.opacity(f)?q.addOpacity(f,.3):f:(f=(m.line||{}).color)&&q.opacity(f)&&n.hasLines(m)&&m.line.width?f:m.fillcolor}},{"../../components/color":615,"./subtypes":1183}],1169:[function(a,G,C){var q=a("../../lib"),n=a("../../components/fx"),m=a("../../registry"),f=a("./get_trace_color"),b=a("../../components/color"),k=q.fillText;G.exports=function(e,h,l,c){var g=e.cd,d=g[0].trace,p=e.xa,r=e.ya,t=p.c2p(h),w=r.c2p(l),x=[t,w];l=d.hoveron||"";var y=-1!==d.mode.indexOf("markers")?
3:.5;if(-1!==l.indexOf("points")&&(h=function(I){var J=Math.max(y,I.mrc||0),N=p.c2p(I.x)-t;I=r.c2p(I.y)-w;return Math.max(Math.sqrt(N*N+I*I)-J,1-y/J)},c=n.getDistanceFunction(c,function(I){var J=Math.max(3,I.mrc||0),N=1-1/J;I=Math.abs(p.c2p(I.x)-t);return I<J?N*I/J:I-J+N},function(I){var J=Math.max(3,I.mrc||0),N=1-1/J;I=Math.abs(r.c2p(I.y)-w);return I<J?N*I/J:I-J+N},h),n.getClosest(g,c,e),!1!==e.index)){c=g[e.index];l=p.c2p(c.x,!0);x=r.c2p(c.y,!0);var A=c.mrc||1;e.index=c.i;var z=g[0].t.orientation,
F=z&&(c.sNorm||c.s);g="h"===z?F:void 0!==c.orig_x?c.orig_x:c.x;z="v"===z?F:void 0!==c.orig_y?c.orig_y:c.y;q.extendFlat(e,{color:f(d,c),x0:l-A,x1:l+A,xLabelVal:g,y0:x-A,y1:x+A,yLabelVal:z,spikeDistance:h(c),hovertemplate:d.hovertemplate});k(c,d,e);m.getComponentMethod("errorbars","hoverInfo")(c,d,e);return[e]}if(-1!==l.indexOf("fills")&&d._polygons){A=d._polygons;c=[];z=!1;h=Infinity;g=-Infinity;F=Infinity;var D=-Infinity;for(l=0;l<A.length;l++){var u=A[l];u.contains(x)&&(z=!z,c.push(u),F=Math.min(F,
u.ymin),D=Math.max(D,u.ymax))}if(z){F=Math.max(F,0);D=Math.min(D,r._length);x=(F+D)/2;for(l=0;l<c.length;l++)for(z=c[l].pts,A=1;A<z.length;A++){u=z[A-1][1];var B=z[A][1];u>x!==B>=x&&(F=z[A-1][0],D=z[A][0],B-u&&(F+=(D-F)*(x-u)/(B-u),h=Math.min(h,F),g=Math.max(g,F)))}h=Math.max(h,0);g=Math.min(g,p._length);c=b.defaultLine;b.opacity(d.fillcolor)?c=d.fillcolor:b.opacity((d.line||{}).color)&&(c=d.line.color);q.extendFlat(e,{distance:e.maxHoverDistance,x0:h,x1:g,y0:x,y1:x,color:c,hovertemplate:!1});delete e.index;
d.text&&!Array.isArray(d.text)?e.text=String(d.text):e.text=d.name;return[e]}}}},{"../../components/color":615,"../../components/fx":655,"../../lib":750,"../../registry":882,"./get_trace_color":1168}],1170:[function(a,G,C){C=a("./subtypes");G.exports={hasLines:C.hasLines,hasMarkers:C.hasMarkers,hasText:C.hasText,isBubble:C.isBubble,attributes:a("./attributes"),supplyDefaults:a("./defaults"),crossTraceDefaults:a("./cross_trace_defaults"),calc:a("./calc").calc,crossTraceCalc:a("./cross_trace_calc"),
arraysToCalcdata:a("./arrays_to_calcdata"),plot:a("./plot"),colorbar:a("./marker_colorbar"),formatLabels:a("./format_labels"),style:a("./style").style,styleOnSelect:a("./style").styleOnSelect,hoverPoints:a("./hover"),selectPoints:a("./select"),animatable:!0,moduleType:"trace",name:"scatter",basePlotModule:a("../../plots/cartesian"),categories:"cartesian svg symbols errorBarsOK showLegend scatter-like zoomScale".split(" "),meta:{}}},{"../../plots/cartesian":812,"./arrays_to_calcdata":1157,"./attributes":1158,
"./calc":1159,"./cross_trace_calc":1163,"./cross_trace_defaults":1164,"./defaults":1165,"./format_labels":1167,"./hover":1169,"./marker_colorbar":1176,"./plot":1179,"./select":1180,"./style":1182,"./subtypes":1183}],1171:[function(a,G,C){var q=a("../../lib").isArrayOrTypedArray,n=a("../../components/colorscale/helpers").hasColorscale,m=a("../../components/colorscale/defaults");G.exports=function(f,b,k,e,h,l){var c=(f.marker||{}).color;h("line.color",k);n(f,"line")?m(f,b,e,h,{prefix:"line.",cLetter:"c"}):
(f=(q(c)?!1:c)||k,h("line.color",f));h("line.width");(l||{}).noDash||h("line.dash")}},{"../../components/colorscale/defaults":625,"../../components/colorscale/helpers":626,"../../lib":750}],1172:[function(a,G,C){C=a("../../constants/numerical");var q=C.BADNUM;C=C.LOG_CLIP;var n=C+.5,m=C-.5,f=a("../../lib"),b=f.segmentsIntersect,k=f.constrain,e=a("./constants");G.exports=function(h,l){function c(Ea){Ea=h[Ea];if(!Ea)return!1;var Ya=l.linearized?D.l2p(Ea.x):D.c2p(Ea.x),ab=l.linearized?u.l2p(Ea.y):u.c2p(Ea.y);
if(Ya===q){B&&(Ya=D.c2p(Ea.x,!0));if(Ya===q)return!1;I&&ab===q&&(Ya*=Math.abs(D._m*N*(0<D._m?n:m)/(u._m*J*(0<u._m?n:m))));Ya*=1E3}if(ab===q){I&&(ab=u.c2p(Ea.y,!0));if(ab===q)return!1;ab*=1E3}return[Ya,ab]}function g(Ea,Ya,ab,Wa){ab-=Ea;Wa-=Ya;Ea=.5-Ea;var Ja=.5-Ya;Ya=ab*ab+Wa*Wa;var Sa=ab*Ea+Wa*Ja;if(0<Sa&&Sa<Ya&&(ab=Ea*Wa-Ja*ab,ab*ab<Ya))return!0}function d(Ea,Ya){var ab=Ea[0]/J;Ea=Ea[1]/N;var Wa=Math.max(0,-ab,ab-1,-Ea,Ea-1);Wa&&void 0!==ka&&g(ab,Ea,ka,ha)&&(Wa=0);Wa&&Ya&&g(ab,Ea,Ya[0]/J,Ya[1]/
N)&&(Wa=0);return(1+e.toleranceGrowth*Wa)*E}function p(Ea,Ya){var ab=Ea[0]-Ya[0];Ea=Ea[1]-Ya[1];return Math.sqrt(ab*ab+Ea*Ea)}function r(Ea,Ya){for(var ab=[],Wa=0,Ja=0;4>Ja;Ja++){var Sa=Y[Ja];(Sa=b(Ea[0],Ea[1],Ya[0],Ya[1],Sa[0],Sa[1],Sa[2],Sa[3]))&&(!Wa||1<Math.abs(Sa.x-ab[0][0])||1<Math.abs(Sa.y-ab[0][1]))&&(Sa=[Sa.x,Sa.y],Wa&&p(Sa,Ea)<p(ab[0],Ea)?ab.unshift(Sa):ab.push(Sa),Wa++)}return ab}function t(Ea){if(Ea[0]<sa||Ea[0]>ma||Ea[1]<ra||Ea[1]>qa)return[k(Ea[0],sa,ma),k(Ea[1],ra,qa)]}function w(Ea,
Ya){if(Ea[0]===Ya[0]&&(Ea[0]===sa||Ea[0]===ma)||Ea[1]===Ya[1]&&(Ea[1]===ra||Ea[1]===qa))return!0}function x(Ea,Ya){var ab=[];Ea=t(Ea);Ya=t(Ya);if(Ea&&Ya&&w(Ea,Ya))return ab;Ea&&ab.push(Ea);Ya&&ab.push(Ya);return ab}function y(Ea,Ya,ab){return function(Wa,Ja){var Sa=t(Wa),fb=t(Ja),nb=[];if(Sa&&fb&&w(Sa,fb))return nb;Sa&&nb.push(Sa);fb&&nb.push(fb);if(Wa=2*f.constrain((Wa[Ea]+Ja[Ea])/2,Ya,ab)-((Sa||Wa)[Ea]+(fb||Ja)[Ea]))Sa=Sa&&fb?0<Wa===Sa[Ea]>fb[Ea]?Sa:fb:Sa||fb,Sa[Ea]+=Wa;return nb}}function A(Ea){var Ya=
Ea[0],ab=Ea[1],Wa=Ya===V[X-1][0],Ja=ab===V[X-1][1];if(!Wa||!Ja)if(1<X){var Sa=Ya===V[X-2][0],fb=ab===V[X-2][1];Wa&&(Ya===sa||Ya===ma)&&Sa?fb?X--:V[X-1]=Ea:Ja&&(ab===ra||ab===qa)&&fb?Sa?X--:V[X-1]=Ea:V[X++]=Ea}else V[X++]=Ea}function z(Ea){V[X-1][0]!==Ea[0]&&V[X-1][1]!==Ea[1]&&A([ua,ya]);A(Ea);Ba=null;ua=ya=0}function F(Ea){ka=Ea[0]/J;ha=Ea[1]/N;pa=Ea[0]<sa?sa:Ea[0]>ma?ma:0;oa=Ea[1]<ra?ra:Ea[1]>qa?qa:0;if(pa||oa){if(X)if(Ba){var Ya=za(Ba,Ea);1<Ya.length&&(z(Ya[0]),V[X++]=Ya[1])}else ja=za(V[X-1],Ea)[0],
V[X++]=ja;else V[X++]=[pa||Ea[0],oa||Ea[1]];Ya=V[X-1];if(pa&&oa&&(Ya[0]!==pa||Ya[1]!==oa)){if(Ba)if(ua!==pa&&ya!==oa)if(ua&&ya){Ya=Ea[0]-Ba[0];var ab=(Ea[1]-Ba[1])/Ya;Ya=0<(Ba[1]*Ea[0]-Ea[1]*Ba[0])/Ya?[0<ab?sa:ma,qa]:[0<ab?ma:sa,ra];A(Ya)}else A([ua||pa,ya||oa]);else ua&&ya&&A([ua,ya]);A([pa,oa])}else ua-pa&&ya-oa&&A([pa||ua,oa||ya]);Ba=Ea;ua=pa;ya=oa}else Ba&&z(za(Ba,Ea)[0]),V[X++]=Ea}var D=l.xaxis,u=l.yaxis,B="log"===D.type,I="log"===u.type,J=D._length,N=u._length,M=l.connectGaps,E=l.baseTolerance,
L=l.shape,Q="linear"===L,S=l.fill&&"none"!==l.fill,R=[],O=e.minTolerance,T=h.length,V=Array(T),X=0,ba,aa,ka,ha;var ca=e.maxScreensAway;var sa=-J*ca,ma=J*(1+ca),ra=-N*ca,qa=N*(1+ca),Y=[[sa,ra,ma,ra],[ma,ra,ma,qa],[ma,qa,sa,qa],[sa,qa,sa,ra]],pa,oa,ua,ya,ja,za;"linear"===L||"spline"===L?za=r:"hv"===L||"vh"===L?za=x:"hvh"===L?za=y(0,sa,ma):"vhv"===L&&(za=y(1,ra,qa));for(L=0;L<T;L++)if(ca=c(L)){X=0;var Ba=null;F(ca);for(L++;L<T;L++){var Ma=c(L);if(!Ma)if(M)continue;else break;if(Q&&l.simplify){var Oa=
c(L+1);var Ia=p(Ma,ca);if(S&&(0===X||X===T-1)||!(Ia<d(Ma,Oa)*O)){var Pa=[(Ma[0]-ca[0])/Ia,(Ma[1]-ca[1])/Ia];var Fa=ca;var Na=Ia;var $a=ba=aa=0;var cb=!1;Ia=Ma;for(L++;L<h.length;L++){var mb=Oa;Oa=c(L+1);if(!mb)if(M)continue;else break;var Ka=[mb[0]-ca[0],mb[1]-ca[1]];var Ua=Ka[0]*Pa[1]-Ka[1]*Pa[0];ba=Math.min(ba,Ua);aa=Math.max(aa,Ua);if(aa-ba>d(mb,Oa))break;Ia=mb;Ka=Ka[0]*Pa[0]+Ka[1]*Pa[1];Ka>Na?(Na=Ka,Ma=mb,cb=!1):Ka<$a&&($a=Ka,Fa=mb,cb=!0)}cb?(F(Ma),Ia!==Fa&&F(Fa)):(Fa!==ca&&F(Fa),Ia!==Ma&&F(Ma));
F(Ia);if(L>=h.length||!mb)break;F(mb);ca=mb}}else F(Ma)}Ba&&A([ua||Ba[0],ya||Ba[1]]);R.push(V.slice(0,X))}return R}},{"../../constants/numerical":725,"../../lib":750,"./constants":1162}],1173:[function(a,G,C){G.exports=function(q,n,m){"spline"===m("line.shape")&&m("line.smoothing")}},{}],1174:[function(a,G,C){var q={tonextx:1,tonexty:1,tonext:1};G.exports=function(n,m,f){var b,k={};var e=!1;var h=-1,l=0,c=-1;for(m=0;m<f.length;m++)n=f[m][0].trace,(b=n.stackgroup||"")?b in k?b=k[b]:(b=k[b]=l,l++):
n.fill in q&&0<=c?b=c:(b=c=l,l++),b<h&&(e=!0),n._groupIndex=h=b;f=f.slice();e&&f.sort(function(g,d){g=g[0].trace;d=d[0].trace;return g._groupIndex-d._groupIndex||g.index-d.index});k={};for(m=0;m<f.length;m++)n=f[m][0].trace,b=n.stackgroup||"",!0===n.visible?(n._nexttrace=null,n.fill in q&&(e=k[b],n._prevtrace=e||null,e&&(e._nexttrace=n)),n._ownfill=n.fill&&("tozero"===n.fill.substr(0,6)||"toself"===n.fill||"to"===n.fill.substr(0,2)&&!n._prevtrace),k[b]=n):n._prevtrace=n._nexttrace=n._ownfill=null;
return f}},{}],1175:[function(a,G,C){var q=a("fast-isnumeric");G.exports=function(n){n=n.marker;var m=n.sizeref||1,f=n.sizemin||0,b="area"===n.sizemode?function(k){return Math.sqrt(k/m)}:function(k){return k/m};return function(k){k=b(k/2);return q(k)&&0<k?Math.max(k,f):0}}},{"fast-isnumeric":241}],1176:[function(a,G,C){G.exports={container:"marker",min:"cmin",max:"cmax"}},{}],1177:[function(a,G,C){var q=a("../../components/color"),n=a("../../components/colorscale/helpers").hasColorscale,m=a("../../components/colorscale/defaults"),
f=a("./subtypes");G.exports=function(b,k,e,h,l,c){var g=f.isBubble(b),d=(b.line||{}).color;c=c||{};d&&(e=d);l("marker.symbol");l("marker.opacity",g?.7:1);l("marker.size");l("marker.color",e);n(b,"marker")&&m(b,k,h,l,{prefix:"marker.",cLetter:"c"});c.noSelect||(l("selected.marker.color"),l("unselected.marker.color"),l("selected.marker.size"),l("unselected.marker.size"));c.noLine||(e=d&&!Array.isArray(d)&&k.marker.color!==d?d:g?q.background:q.defaultLine,l("marker.line.color",e),n(b,"marker.line")&&
m(b,k,h,l,{prefix:"marker.line.",cLetter:"c"}),l("marker.line.width",g?1:0));g&&(l("marker.sizeref"),l("marker.sizemin"),l("marker.sizemode"));c.gradient&&"none"!==l("marker.gradient.type")&&l("marker.gradient.color")}},{"../../components/color":615,"../../components/colorscale/defaults":625,"../../components/colorscale/helpers":626,"./subtypes":1183}],1178:[function(a,G,C){function q(f,b){return 0===f%m?n(b,1):n(b,0)}var n=a("../../lib").dateTick0,m=a("../../constants/numerical").ONEWEEK;G.exports=
function(f,b,k,e,h){h||(h={x:!0,y:!0});h.x&&(f=e("xperiod"))&&(e("xperiod0",q(f,b.xcalendar)),e("xperiodalignment"));h.y&&(h=e("yperiod"))&&(e("yperiod0",q(h,b.ycalendar)),e("yperiodalignment"))}},{"../../constants/numerical":725,"../../lib":750}],1179:[function(a,G,C){function q(r,t,w){t.each(function(x){var y=e(f.select(this),"g","fills");l.setClipUrl(y,w.layerClipId,r);var A=x[0].trace;x=[];A._ownfill&&x.push("_ownFill");A._nexttrace&&x.push("_nextFill");y=y.selectAll("g").data(x,h);y.enter().append("g");
y.exit().each(function(z){A[z]=null}).remove();y.order().each(function(z){A[z]=e(f.select(this),"path","js-fill")})})}function n(r,t,w,x,y,A,z){function F(oa){return M?oa.transition():oa}function D(oa){F(oa).attr("d","M0,0Z")}function u(oa){return oa.filter(function(ua){return!ua.gap&&ua.vis})}function B(oa){return oa.filter(function(ua){return ua.vis})}function I(oa){return oa.filter(function(ua){return!ua.gap})}function J(oa){return oa.id}function N(){return!1}m(r,t,w,x,y);var M=!!z&&0<z.duration,
E=w.xaxis,L=w.yaxis,Q=x[0].trace,S=Q.line,R=f.select(A),O=e(R,"g","errorbars");A=e(R,"g","lines");t=e(R,"g","points");y=e(R,"g","text");b.getComponentMethod("errorbars","plot")(r,O,w,z);if(!0===Q.visible){F(R).style("opacity",Q.opacity);var T=Q.fill.charAt(Q.fill.length-1);"x"!==T&&"y"!==T&&(T="");x[0][w.isRangePlot?"nodeRangePlot3":"node3"]=R;z="";R=[];if(O=Q._prevtrace){z=O._prevRevpath||"";var V=O._nextFill;R=O._polygons}var X,ba,aa="",ka="",ha=[];var ca=k.noop;O=Q._ownFill;if(c.hasLines(Q)||"none"!==
Q.fill){V&&V.datum(x);if(-1!==["hv","vh","hvh","vhv"].indexOf(S.shape)){var sa=l.steps(S.shape);var ma=l.steps(S.shape.split("").reverse().join(""))}else sa="spline"===S.shape?ma=function(oa){var ua=oa[oa.length-1];return 1<oa.length&&oa[0][0]===ua[0]&&oa[0][1]===ua[1]?l.smoothclosed(oa.slice(1),S.smoothing):l.smoothopen(oa,S.smoothing)}:ma=function(oa){return"M"+oa.join("L")};var ra=function(oa){return ma(oa.reverse())};ha=g(x,{xaxis:E,yaxis:L,connectGaps:Q.connectgaps,baseTolerance:Math.max(S.width||
1,3)/4,shape:S.shape,simplify:S.simplify,fill:Q.fill});var qa=Q._polygons=Array(ha.length);for(ca=0;ca<ha.length;ca++)Q._polygons[ca]=p(ha[ca]);if(ha.length){var Y=ha[0][0];var pa=ha[ha.length-1];pa=pa[pa.length-1]}ca=function(oa){return function(ua){X=sa(ua);ba=ra(ua);aa?T?(aa+="L"+X.substr(1),ka=ba+("L"+ka.substr(1))):(aa+="Z"+X,ka=ba+"Z"+ka):(aa=X,ka=ba);c.hasLines(Q)&&1<ua.length&&(ua=f.select(this),ua.datum(x),oa?F(ua.style("opacity",0).attr("d",X).call(l.lineGroupStyle)).style("opacity",1):
(ua=F(ua),ua.attr("d",X),l.singleLineStyle(x,ua)))}}}A=A.selectAll(".js-line").data(ha);F(A.exit()).style("opacity",0).remove();A.each(ca(!1));A.enter().append("path").classed("js-line",!0).style("vector-effect","non-scaling-stroke").call(l.lineGroupStyle).each(ca(!0));l.setClipUrl(A,w.layerClipId,r);ha.length?(O?(O.datum(x),Y&&pa&&(T?("y"===T?Y[1]=pa[1]=L.c2p(0,!0):"x"===T&&(Y[0]=pa[0]=E.c2p(0,!0)),F(O).attr("d","M"+pa+"L"+Y+"L"+aa.substr(1)).call(l.singleFillStyle)):F(O).attr("d",aa+"Z").call(l.singleFillStyle))):
V&&("tonext"===Q.fill.substr(0,6)&&aa&&z?("tonext"===Q.fill?F(V).attr("d",aa+"Z"+z+"Z").call(l.singleFillStyle):F(V).attr("d",aa+"L"+z.substr(1)+"Z").call(l.singleFillStyle),Q._polygons=Q._polygons.concat(R)):(D(V),Q._polygons=null)),Q._prevRevpath=ka,Q._prevPolygons=qa):(O?D(O):V&&D(V),Q._polygons=Q._prevRevpath=Q._prevPolygons=null);t.datum(x);y.datum(x);(function(oa,ua,ya){var ja,za=ya[0].trace;ya=c.hasMarkers(za);var Ba=c.hasText(za);var Ma=za.ids?J:void 0;var Oa=N,Ia=N;if(ya||Ba){var Pa=h,Fa=
za.stackgroup,Na=Fa&&"infer zero"===r._fullLayout._scatterStackOpts[E._id+L._id][Fa].stackgaps;za.marker.maxdisplayed||za._needsCull?Pa=Na?B:u:Fa&&!Na&&(Pa=I);ya&&(Oa=Pa);Ba&&(Ia=Pa)}oa=oa.selectAll("path.point");oa=oa.data(Oa,Ma);Oa=oa.enter().append("path").classed("point",!0);M&&Oa.call(l.pointStyle,za,r).call(l.translatePoints,E,L).style("opacity",0).transition().style("opacity",1);oa.order();var $a;ya&&($a=l.makePointStyleFns(za));oa.each(function(cb){var mb=f.select(this),Ka=F(mb);(ja=l.translatePoint(cb,
Ka,E,L))?(l.singlePointStyle(cb,Ka,za,$a,r),w.layerClipId&&l.hideOutsideRangePoint(cb,Ka,E,L,za.xcalendar,za.ycalendar),za.customdata&&mb.classed("plotly-customdata",null!==cb.data&&void 0!==cb.data)):Ka.remove()});M?oa.exit().transition().style("opacity",0).remove():oa.exit().remove();oa=ua.selectAll("g");oa=oa.data(Ia,Ma);oa.enter().append("g").classed("textpoint",!0).append("text");oa.order();oa.each(function(cb){var mb=f.select(this),Ka=F(mb.select("text"));(ja=l.translatePoint(cb,Ka,E,L))?w.layerClipId&&
l.hideOutsideRangePoint(cb,mb,E,L,za.xcalendar,za.ycalendar):mb.remove()});oa.selectAll("text").call(l.textPointStyle,za,r).each(function(cb){var mb=E.c2p(cb.x),Ka=L.c2p(cb.y);f.select(this).selectAll("tspan.line").each(function(){F(f.select(this)).attr({x:mb,y:Ka})})});oa.exit().remove()})(t,y,x);V=!1===Q.cliponaxis?null:w.layerClipId;l.setClipUrl(t,V,r);l.setClipUrl(y,V,r)}}function m(r,t,w,x,y){r=w.xaxis;w=w.yaxis;var A=f.extent(k.simpleMap(r.range,r.r2c)),z=f.extent(k.simpleMap(w.range,w.r2c));
w=x[0].trace;if(c.hasMarkers(w)&&(w=w.marker.maxdisplayed,0!==w)){r=x.filter(function(B){return B.x>=A[0]&&B.x<=A[1]&&B.y>=z[0]&&B.y<=z[1]});var F=Math.ceil(r.length/w),D=0;y.forEach(function(B,I){B=B[0].trace;c.hasMarkers(B)&&0<B.marker.maxdisplayed&&I<t&&D++});var u=Math.round(D*F/3+Math.floor(D/3)*F/7.1);x.forEach(function(B){delete B.vis});r.forEach(function(B,I){0===Math.round((I+u)%F)&&(B.vis=!0)})}}var f=a("d3"),b=a("../../registry"),k=a("../../lib"),e=k.ensureSingle,h=k.identity,l=a("../../components/drawing"),
c=a("./subtypes"),g=a("./line_points"),d=a("./link_traces"),p=a("../../lib/polygon").tester;G.exports=function(r,t,w,x,y,A){var z,F=!y,D=!!y&&0<y.duration,u=d(r,t,w);w=x.selectAll("g.trace").data(u,function(B){return B[0].trace.uid});w.enter().append("g").attr("class",function(B){return"trace scatter trace"+B[0].trace.uid}).style("stroke-miterlimit",2);w.order();q(r,w,t);D?(A&&(z=A()),f.transition().duration(y.duration).ease(y.easing).each("end",function(){z&&z()}).each("interrupt",function(){z&&
z()}).each(function(){x.selectAll("g.trace").each(function(B,I){n(r,I,t,B,u,this,y)})})):w.each(function(B,I){n(r,I,t,B,u,this,y)});F&&w.exit().remove();x.selectAll("path:not([d])").remove()}},{"../../components/drawing":637,"../../lib":750,"../../lib/polygon":762,"../../registry":882,"./line_points":1172,"./link_traces":1174,"./subtypes":1183,d3:169}],1180:[function(a,G,C){var q=a("./subtypes");G.exports=function(n,m){var f=n.cd,b=n.xaxis,k=n.yaxis,e=[],h=f[0].trace;if(!q.hasMarkers(h)&&!q.hasText(h))return[];
if(!1===m)for(h=0;h<f.length;h++)f[h].selected=0;else for(h=0;h<f.length;h++){var l=f[h];var c=b.c2p(l.x);var g=k.c2p(l.y);null!==l.i&&m.contains([c,g],!1,h,n)?(e.push({pointNumber:l.i,x:b.c2d(l.x),y:k.c2d(l.y)}),l.selected=1):l.selected=0}return e}},{"./subtypes":1183}],1181:[function(a,G,C){var q=["orientation","groupnorm","stackgaps"];G.exports=function(n,m,f,b){f=f._scatterStackOpts;var k=b("stackgroup");if(k){var e=m.xaxis+m.yaxis,h=f[e];h||(h=f[e]={});f=h[k];e=!1;f?f.traces.push(m):(f=h[k]=
{traceIndices:[],traces:[m]},e=!0);m={orientation:m.x&&!m.y?"h":"v"};for(k=0;k<q.length;k++){h=q[k];var l=h+"Found";if(!f[l]){var c=void 0!==n[h],g="orientation"===h;if(c||e)if(f[h]=b(h,m[h]),g&&(f.fillDflt="h"===f[h]?"tonextx":"tonexty"),c&&(f[l]=!0,!e&&(delete f.traces[0][h],g)))for(h=0;h<f.traces.length-1;h++)l=f.traces[h],l._input.fill!==l.fill&&(l.fill=f.fillDflt)}}return f}}},{}],1182:[function(a,G,C){function q(k,e,h){f.pointStyle(k.selectAll("path.point"),e,h)}function n(k,e,h){f.textPointStyle(k.selectAll("text"),
e,h)}var m=a("d3"),f=a("../../components/drawing"),b=a("../../registry");G.exports={style:function(k){var e=m.select(k).selectAll("g.trace.scatter");e.style("opacity",function(h){return h[0].trace.opacity});e.selectAll("g.points").each(function(h){var l=m.select(this);q(l,h.trace||h[0].trace,k)});e.selectAll("g.text").each(function(h){var l=m.select(this);n(l,h.trace||h[0].trace,k)});e.selectAll("g.trace path.js-line").call(f.lineGroupStyle);e.selectAll("g.trace path.js-fill").call(f.fillGroupStyle);
b.getComponentMethod("errorbars","style")(e)},stylePoints:q,styleText:n,styleOnSelect:function(k,e,h){e=e[0].trace;e.selectedpoints?(f.selectedPointStyle(h.selectAll("path.point"),e),f.selectedTextStyle(h.selectAll("text"),e)):(q(h,e,k),n(h,e,k))}}},{"../../components/drawing":637,"../../registry":882,d3:169}],1183:[function(a,G,C){var q=a("../../lib");G.exports={hasLines:function(n){return n.visible&&n.mode&&-1!==n.mode.indexOf("lines")},hasMarkers:function(n){return n.visible&&(n.mode&&-1!==n.mode.indexOf("markers")||
"splom"===n.type)},hasText:function(n){return n.visible&&n.mode&&-1!==n.mode.indexOf("text")},isBubble:function(n){return q.isPlainObject(n.marker)&&q.isArrayOrTypedArray(n.marker.size)}}},{"../../lib":750}],1184:[function(a,G,C){var q=a("../../lib");G.exports=function(n,m,f,b,k){k=k||{};b("textposition");q.coerceFont(b,"textfont",f.font);k.noSelect||(b("selected.textfont.color"),b("unselected.textfont.color"))}},{"../../lib":750}],1185:[function(a,G,C){var q=a("../../lib"),n=a("../../registry");
G.exports=function(m,f,b,k){var e=k("x"),h=k("y");n.getComponentMethod("calendars","handleTraceDefaults")(m,f,["x","y"],b);if(e)m=q.minRowLength(e),h?h=Math.min(m,q.minRowLength(h)):(h=m,k("y0"),k("dy"));else{if(!h)return 0;h=q.minRowLength(h);k("x0");k("dx")}return f._length=h}},{"../../lib":750,"../../registry":882}],1186:[function(a,G,C){function q(g){return{show:{valType:"boolean",dflt:!1},opacity:{valType:"number",min:0,max:1,dflt:1},scale:{valType:"number",min:0,max:10,dflt:2/3}}}C=a("../scatter/attributes");
var n=a("../../components/colorscale/attributes"),m=a("../../plots/template_attributes").hovertemplateAttrs,f=a("../../plots/template_attributes").texttemplateAttrs,b=a("../../plots/attributes"),k=a("../../constants/gl3d_dashes"),e=a("../../constants/gl3d_markers"),h=a("../../lib/extend").extendFlat;a=a("../../plot_api/edit_types").overrideAll;var l=C.marker,c=l.line;k=h({width:C.line.width,dash:{valType:"enumerated",values:Object.keys(k),dflt:"solid"}},n("line"));G=G.exports=a({x:C.x,y:C.y,z:{valType:"data_array"},
text:h({},C.text,{}),texttemplate:f({},{}),hovertext:h({},C.hovertext,{}),hovertemplate:m(),mode:h({},C.mode,{dflt:"lines+markers"}),surfaceaxis:{valType:"enumerated",values:[-1,0,1,2],dflt:-1},surfacecolor:{valType:"color"},projection:{x:q("x"),y:q("y"),z:q("z")},connectgaps:C.connectgaps,line:k,marker:h({symbol:{valType:"enumerated",values:Object.keys(e),dflt:"circle",arrayOk:!0},size:h({},l.size,{dflt:8}),sizeref:l.sizeref,sizemin:l.sizemin,sizemode:l.sizemode,opacity:h({},l.opacity,{arrayOk:!1}),
colorbar:l.colorbar,line:h({width:h({},c.width,{arrayOk:!1})},n("marker.line"))},n("marker")),textposition:h({},C.textposition,{dflt:"top center"}),textfont:{color:C.textfont.color,size:C.textfont.size,family:h({},C.textfont.family,{arrayOk:!1})},hoverinfo:h({},b.hoverinfo)},"calc","nested");G.x.editType=G.y.editType=G.z.editType="calc+clearAxisTypes"},{"../../components/colorscale/attributes":622,"../../constants/gl3d_dashes":722,"../../constants/gl3d_markers":723,"../../lib/extend":740,"../../plot_api/edit_types":781,
"../../plots/attributes":795,"../../plots/template_attributes":877,"../scatter/attributes":1158}],1187:[function(a,G,C){var q=a("../scatter/arrays_to_calcdata"),n=a("../scatter/colorscale_calc");G.exports=function(m,f){var b=[{x:!1,y:!1,trace:f,t:{}}];q(b,f);n(m,f);return b}},{"../scatter/arrays_to_calcdata":1157,"../scatter/colorscale_calc":1161}],1188:[function(a,G,C){function q(m,f,b,k){if(!f||!f.visible)return null;f=n.getComponentMethod("errorbars","makeComputeError")(f);for(var e=Array(m.length),
h=0;h<m.length;h++){var l=f(+m[h],h);if("log"===k.type){var c=k.c2l(m[h]),g=m[h]-l[0];l=m[h]+l[1];e[h]=[(k.c2l(g,!0)-c)*b,(k.c2l(l,!0)-c)*b];0<g&&(c=k.c2l(g),k._lowerLogErrorBound||(k._lowerLogErrorBound=c),k._lowerErrorBound=Math.min(k._lowerLogErrorBound,c))}else e[h]=[-l[0]*b,l[1]*b]}return e}var n=a("../../registry");G.exports=function(m,f,b){m=[q(m.x,m.error_x,f[0],b.xaxis),q(m.y,m.error_y,f[1],b.yaxis),q(m.z,m.error_z,f[2],b.zaxis)];a:{for(f=0;f<m.length;f++)if(m[f]){f=m[f].length;break a}f=
0}if(0===f)return null;b=Array(f);for(var k=0;k<f;k++){for(var e=[[0,0,0],[0,0,0]],h=0;3>h;h++)if(m[h])for(var l=0;2>l;l++)e[l][h]=m[h][k][l];b[k]=e}return b}},{"../../registry":882}],1189:[function(a,G,C){function q(J,N){this.scene=J;this.uid=N;this.color=this.delaunayMesh=this.textMarkers=this.errorBars=this.scatterPlot=this.linePlot=null;this.mode="";this.dataPoints=[];this.axesBounds=[[-Infinity,-Infinity,-Infinity],[Infinity,Infinity,Infinity]];this.data=this.textLabels=null}function n(J){for(var N=
[0,0,0],M=[[0,0,0],[0,0,0],[0,0,0]],E=[1,1,1],L=0;3>L;L++){var Q=J[L];Q&&!1!==Q.copy_zstyle&&!1!==J[2].visible&&(Q=J[2]);Q&&Q.visible&&(N[L]=Q.width/2,M[L]=y(Q.color),E[L]=Q.thickness)}return{capSize:N,color:M,lineWidth:E}}function m(J){return null===J||void 0===J?0:-1<J.indexOf("left")?-1:-1<J.indexOf("right")?1:0}function f(J){return null===J||void 0===J?0:-1<J.indexOf("top")?-1:-1<J.indexOf("bottom")?1:0}function b(J){var N=[0,0];if(Array.isArray(J))for(var M=0;M<J.length;M++)N[M]=[0,0],J[M]&&
(N[M][0]=m(J[M]),N[M][1]=f(J[M]));else N[0]=m(J),N[1]=f(J);return N}function k(J,N){return N(4*J)}function e(J){return D[J]}function h(J,N,M,E,L){if(x.isArrayOrTypedArray(J)){var Q=[];for(var S=0;S<N;S++)Q[S]=void 0===J[S]?E:M(J[S],L)}else Q=M(J,x.identity);return Q}function l(J,N){function M(ua,ya){ua=L[ua];return u.tickText(ua,ua.d2l(ya),!0).text}var E=[],L=J.fullSceneLayout,Q=J.dataScale,S=L.xaxis,R=L.yaxis,O=L.zaxis,T=N.marker,V=N.line,X=N.x||[],ba=N.y||[],aa=N.z||[],ka=X.length,ha=N.xcalendar,
ca=N.ycalendar,sa=N.zcalendar,ma;for(ma=0;ma<ka;ma++){var ra=S.d2l(X[ma],0,ha)*Q[0];var qa=R.d2l(ba[ma],0,ca)*Q[1];var Y=O.d2l(aa[ma],0,sa)*Q[2];E[ma]=[ra,qa,Y]}if(Array.isArray(N.text))var pa=N.text;else if(void 0!==N.text)for(pa=Array(ka),ma=0;ma<ka;ma++)pa[ma]=N.text;var oa=N.texttemplate;if(oa)for(J=J.fullLayout._d3locale,S=(ma=Array.isArray(oa))?Math.min(oa.length,ka):ka,R=ma?function(ua){return oa[ua]}:function(){return oa},pa=Array(S),ma=0;ma<S;ma++)O={x:X[ma],y:ba[ma],z:aa[ma]},ha={xLabel:M("xaxis",
X[ma]),yLabel:M("yaxis",ba[ma]),zLabel:M("zaxis",aa[ma])},ca={},B(ca,N,ma),sa=N._meta||{},pa[ma]=x.texttemplateString(R(ma),ha,J,ca,O,sa);E={position:E,mode:N.mode,text:pa};"line"in N&&(E.lineColor=A(V,1,ka),E.lineWidth=V.width,E.lineDashes=V.dash);"marker"in N&&(ma=z(N),E.scatterColor=A(T,1,ka),E.scatterSize=h(T.size,ka,k,20,ma),E.scatterMarker=h(T.symbol,ka,e,"●"),E.scatterLineWidth=T.line.width,E.scatterLineColor=A(T.line,1,ka),E.scatterAngle=0);"textposition"in N&&(E.textOffset=b(N.textposition),
E.textColor=A(N.textfont,1,ka),E.textSize=h(N.textfont.size,ka,x.identity,12),E.textFont=N.textfont.family,E.textAngle=0);T=["x","y","z"];E.project=[!1,!1,!1];E.projectScale=[1,1,1];E.projectOpacity=[1,1,1];for(ma=0;3>ma;++ma)if(ka=N.projection[T[ma]],E.project[ma]=ka.show)E.projectOpacity[ma]=ka.opacity,E.projectScale[ma]=ka.scale;E.errorBounds=I(N,Q,L);Q=n([N.error_x,N.error_y,N.error_z]);E.errorColor=Q.color;E.errorLineWidth=Q.lineWidth;E.errorCapSize=Q.capSize;E.delaunayAxis=N.surfaceaxis;E.delaunayColor=
y(N.surfacecolor);return E}function c(J){if(x.isArrayOrTypedArray(J)){var N=J[0];x.isArrayOrTypedArray(N)&&(J=N);return"rgb("+J.slice(0,3).map(function(M){return Math.round(255*M)})+")"}return null}function g(J){return x.isArrayOrTypedArray(J)?4===J.length&&"number"===typeof J[0]?c(J):J.map(c):null}var d=a("gl-line3d"),p=a("gl-scatter3d"),r=a("gl-error3d"),t=a("gl-mesh3d"),w=a("delaunay-triangulate"),x=a("../../lib"),y=a("../../lib/str2rgbarray"),A=a("../../lib/gl_format_color").formatColor,z=a("../scatter/make_bubble_size_func"),
F=a("../../constants/gl3d_dashes"),D=a("../../constants/gl3d_markers"),u=a("../../plots/cartesian/axes"),B=a("../../components/fx/helpers").appendArrayPointValue,I=a("./calc_errors");a=q.prototype;a.handlePick=function(J){if(J.object&&(J.object===this.linePlot||J.object===this.delaunayMesh||J.object===this.textMarkers||J.object===this.scatterPlot)){var N=J.index=J.data.index;J.object.highlight&&J.object.highlight(null);this.scatterPlot&&(J.object=this.scatterPlot,this.scatterPlot.highlight(J.data));
J.textLabel="";if(this.textLabels)if(Array.isArray(this.textLabels)){if(this.textLabels[N]||0===this.textLabels[N])J.textLabel=this.textLabels[N]}else J.textLabel=this.textLabels;J.traceCoordinate=[this.data.x[N],this.data.y[N],this.data.z[N]];return!0}};a.update=function(J){var N=this.scene.glplot.gl;var M=F.solid;this.data=J;var E=l(this.scene,J);"mode"in E&&(this.mode=E.mode);"lineDashes"in E&&E.lineDashes in F&&(M=F[E.lineDashes]);this.color=g(E.scatterColor)||g(E.lineColor);this.dataPoints=E.position;
M={gl:this.scene.glplot.gl,position:E.position,color:E.lineColor,lineWidth:E.lineWidth||1,dashes:M[0],dashScale:M[1],opacity:J.opacity,connectGaps:J.connectgaps};-1!==this.mode.indexOf("lines")?this.linePlot?this.linePlot.update(M):(this.linePlot=d(M),this.linePlot._trace=this,this.scene.glplot.add(this.linePlot)):this.linePlot&&(this.scene.glplot.remove(this.linePlot),this.linePlot.dispose(),this.linePlot=null);M=J.opacity;J.marker&&J.marker.opacity&&(M*=J.marker.opacity);M={gl:this.scene.glplot.gl,
position:E.position,color:E.scatterColor,size:E.scatterSize,glyph:E.scatterMarker,opacity:M,orthographic:!0,lineWidth:E.scatterLineWidth,lineColor:E.scatterLineColor,project:E.project,projectScale:E.projectScale,projectOpacity:E.projectOpacity};-1!==this.mode.indexOf("markers")?this.scatterPlot?this.scatterPlot.update(M):(this.scatterPlot=p(M),this.scatterPlot._trace=this,this.scatterPlot.highlightScale=1,this.scene.glplot.add(this.scatterPlot)):this.scatterPlot&&(this.scene.glplot.remove(this.scatterPlot),
this.scatterPlot.dispose(),this.scatterPlot=null);M={gl:this.scene.glplot.gl,position:E.position,glyph:E.text,color:E.textColor,size:E.textSize,angle:E.textAngle,alignment:E.textOffset,font:E.textFont,orthographic:!0,lineWidth:0,project:!1,opacity:J.opacity};this.textLabels=J.hovertext||J.text;-1!==this.mode.indexOf("text")?this.textMarkers?this.textMarkers.update(M):(this.textMarkers=p(M),this.textMarkers._trace=this,this.textMarkers.highlightScale=1,this.scene.glplot.add(this.textMarkers)):this.textMarkers&&
(this.scene.glplot.remove(this.textMarkers),this.textMarkers.dispose(),this.textMarkers=null);M={gl:this.scene.glplot.gl,position:E.position,color:E.errorColor,error:E.errorBounds,lineWidth:E.errorLineWidth,capSize:E.errorCapSize,opacity:J.opacity};this.errorBars?E.errorBounds?this.errorBars.update(M):(this.scene.glplot.remove(this.errorBars),this.errorBars.dispose(),this.errorBars=null):E.errorBounds&&(this.errorBars=r(M),this.errorBars._trace=this,this.scene.glplot.add(this.errorBars));if(0<=E.delaunayAxis){M=
E.position;var L=E.delaunayColor;E=E.delaunayAxis;var Q=(E+1)%3,S=(E+2)%3,R=[];E=[];var O;for(O=0;O<M.length;++O){var T=M[O];!isNaN(T[Q])&&isFinite(T[Q])&&!isNaN(T[S])&&isFinite(T[S])&&(R.push([T[Q],T[S]]),E.push(O))}Q=w(R);for(O=0;O<Q.length;++O)for(S=Q[O],R=0;R<S.length;++R)S[R]=E[S[R]];M={positions:M,cells:Q,meshColor:L};M.opacity=J.opacity;this.delaunayMesh?this.delaunayMesh.update(M):(M.gl=N,this.delaunayMesh=t(M),this.delaunayMesh._trace=this,this.scene.glplot.add(this.delaunayMesh))}else this.delaunayMesh&&
(this.scene.glplot.remove(this.delaunayMesh),this.delaunayMesh.dispose(),this.delaunayMesh=null)};a.dispose=function(){this.linePlot&&(this.scene.glplot.remove(this.linePlot),this.linePlot.dispose());this.scatterPlot&&(this.scene.glplot.remove(this.scatterPlot),this.scatterPlot.dispose());this.errorBars&&(this.scene.glplot.remove(this.errorBars),this.errorBars.dispose());this.textMarkers&&(this.scene.glplot.remove(this.textMarkers),this.textMarkers.dispose());this.delaunayMesh&&(this.scene.glplot.remove(this.delaunayMesh),
this.delaunayMesh.dispose())};G.exports=function(J,N){J=new q(J,N.uid);J.update(N);return J}},{"../../components/fx/helpers":651,"../../constants/gl3d_dashes":722,"../../constants/gl3d_markers":723,"../../lib":750,"../../lib/gl_format_color":746,"../../lib/str2rgbarray":773,"../../plots/cartesian/axes":799,"../scatter/make_bubble_size_func":1175,"./calc_errors":1188,"delaunay-triangulate":171,"gl-error3d":264,"gl-line3d":271,"gl-mesh3d":292,"gl-scatter3d":308}],1190:[function(a,G,C){function q(l,
c,g,d){var p=0,r=g("x"),t=g("y");g=g("z");n.getComponentMethod("calendars","handleTraceDefaults")(l,c,["x","y","z"],d);r&&t&&g&&(p=Math.min(r.length,t.length,g.length),c._length=c._xlength=c._ylength=c._zlength=p);return p}var n=a("../../registry"),m=a("../../lib"),f=a("../scatter/subtypes"),b=a("../scatter/marker_defaults"),k=a("../scatter/line_defaults"),e=a("../scatter/text_defaults"),h=a("./attributes");G.exports=function(l,c,g,d){function p(y,A){return m.coerce(l,c,h,y,A)}if(q(l,c,p,d)){p("text");
p("hovertext");p("hovertemplate");p("mode");f.hasLines(c)&&(p("connectgaps"),k(l,c,g,d,p));f.hasMarkers(c)&&b(l,c,g,d,p,{noSelect:!0});f.hasText(c)&&(p("texttemplate"),e(l,c,d,p,{noSelect:!0}));d=(c.line||{}).color;var r=(c.marker||{}).color;0<=p("surfaceaxis")&&p("surfacecolor",d||r);for(var t=["x","y","z"],w=0;3>w;++w){var x="projection."+t[w];p(x+".show")&&(p(x+".opacity"),p(x+".scale"))}t=n.getComponentMethod("errorbars","supplyDefaults");t(l,c,d||r||g,{axis:"z"});t(l,c,d||r||g,{axis:"y",inherit:"z"});
t(l,c,d||r||g,{axis:"x",inherit:"z"})}else c.visible=!1}},{"../../lib":750,"../../registry":882,"../scatter/line_defaults":1171,"../scatter/marker_defaults":1177,"../scatter/subtypes":1183,"../scatter/text_defaults":1184,"./attributes":1186}],1191:[function(a,G,C){G.exports={plot:a("./convert"),attributes:a("./attributes"),markerSymbols:a("../../constants/gl3d_markers"),supplyDefaults:a("./defaults"),colorbar:[{container:"marker",min:"cmin",max:"cmax"},{container:"line",min:"cmin",max:"cmax"}],calc:a("./calc"),
moduleType:"trace",name:"scatter3d",basePlotModule:a("../../plots/gl3d"),categories:["gl3d","symbols","showLegend","scatter-like"],meta:{}}},{"../../constants/gl3d_markers":723,"../../plots/gl3d":841,"./attributes":1186,"./calc":1187,"./convert":1189,"./defaults":1190}],1192:[function(a,G,C){C=a("../scatter/attributes");var q=a("../../plots/attributes"),n=a("../../plots/template_attributes").hovertemplateAttrs,m=a("../../plots/template_attributes").texttemplateAttrs,f=a("../../components/colorscale/attributes");
a=a("../../lib/extend").extendFlat;var b=C.marker,k=C.line,e=b.line;G.exports={carpet:{valType:"string",editType:"calc"},a:{valType:"data_array",editType:"calc"},b:{valType:"data_array",editType:"calc"},mode:a({},C.mode,{dflt:"markers"}),text:a({},C.text,{}),texttemplate:m({editType:"plot"},{keys:["a","b","text"]}),hovertext:a({},C.hovertext,{}),line:{color:k.color,width:k.width,dash:k.dash,shape:a({},k.shape,{values:["linear","spline"]}),smoothing:k.smoothing,editType:"calc"},connectgaps:C.connectgaps,
fill:a({},C.fill,{values:["none","toself","tonext"],dflt:"none"}),fillcolor:C.fillcolor,marker:a({symbol:b.symbol,opacity:b.opacity,maxdisplayed:b.maxdisplayed,size:b.size,sizeref:b.sizeref,sizemin:b.sizemin,sizemode:b.sizemode,line:a({width:e.width,editType:"calc"},f("marker.line")),gradient:b.gradient,editType:"calc"},f("marker")),textfont:C.textfont,textposition:C.textposition,selected:C.selected,unselected:C.unselected,hoverinfo:a({},q.hoverinfo,{flags:["a","b","text","name"]}),hoveron:C.hoveron,
hovertemplate:n()}},{"../../components/colorscale/attributes":622,"../../lib/extend":740,"../../plots/attributes":795,"../../plots/template_attributes":877,"../scatter/attributes":1158}],1193:[function(a,G,C){var q=a("fast-isnumeric"),n=a("../scatter/colorscale_calc"),m=a("../scatter/arrays_to_calcdata"),f=a("../scatter/calc_selection"),b=a("../scatter/calc").calcMarkerSize,k=a("../carpet/lookup_carpetid");G.exports=function(e,h){var l=h._carpetTrace=k(e,h);if(l&&l.visible&&"legendonly"!==l.visible){var c;
h.xaxis=l.xaxis;h.yaxis=l.yaxis;var g=h._length,d=Array(g),p=!1;for(c=0;c<g;c++){var r=h.a[c];var t=h.b[c];if(q(r)&&q(t)){var w=l.ab2xy(+r,+t,!0),x=l.isVisible(+r,+t);x||(p=!0);d[c]={x:w[0],y:w[1],a:r,b:t,vis:x}}else d[c]={x:!1,y:!1}}h._needsCull=p;d[0].carpet=l;d[0].trace=h;b(h,g);n(e,h);m(d,h);f(d,h);return d}}},{"../carpet/lookup_carpetid":952,"../scatter/arrays_to_calcdata":1157,"../scatter/calc":1159,"../scatter/calc_selection":1160,"../scatter/colorscale_calc":1161,"fast-isnumeric":241}],1194:[function(a,
G,C){var q=a("../../lib"),n=a("../scatter/constants"),m=a("../scatter/subtypes"),f=a("../scatter/marker_defaults"),b=a("../scatter/line_defaults"),k=a("../scatter/line_shape_defaults"),e=a("../scatter/text_defaults"),h=a("../scatter/fillcolor_defaults"),l=a("./attributes");G.exports=function(c,g,d,p){function r(x,y){return q.coerce(c,g,l,x,y)}r("carpet");g.xaxis="x";g.yaxis="y";var t=r("a"),w=r("b");if(t=Math.min(t.length,w.length)){g._length=t;r("text");r("texttemplate");r("hovertext");r("mode",
t<n.PTS_LINESONLY?"lines+markers":"lines");m.hasLines(g)&&(b(c,g,d,p,r),k(c,g,r),r("connectgaps"));m.hasMarkers(g)&&f(c,g,d,p,r,{gradient:!0});m.hasText(g)&&e(c,g,p,r);p=[];if(m.hasMarkers(g)||m.hasText(g))r("marker.maxdisplayed"),p.push("points");r("fill");"none"!==g.fill&&(h(c,g,d,r),m.hasLines(g)||k(c,g,r));"tonext"!==g.fill&&"toself"!==g.fill||p.push("fills");"fills"!==r("hoveron",p.join("+")||"points")&&r("hovertemplate");q.coerceSelectionMarkerOpacity(g,r)}else g.visible=!1}},{"../../lib":750,
"../scatter/constants":1162,"../scatter/fillcolor_defaults":1166,"../scatter/line_defaults":1171,"../scatter/line_shape_defaults":1173,"../scatter/marker_defaults":1177,"../scatter/subtypes":1183,"../scatter/text_defaults":1184,"./attributes":1192}],1195:[function(a,G,C){G.exports=function(q,n,m,f,b){n=f[b];q.a=n.a;q.b=n.b;q.y=n.y;return q}},{}],1196:[function(a,G,C){G.exports=function(q,n){var m={};n=n._carpet;q=n.ab2ij([q.a,q.b]);var f=Math.floor(q[0]),b=Math.floor(q[1]);n=n.evalxy([],f,b,q[0]-
f,q[1]-b);m.yLabel=n[1].toFixed(3);return m}},{}],1197:[function(a,G,C){var q=a("../scatter/hover"),n=a("../../lib").fillText;G.exports=function(m,f,b,k){function e(g,d){var p=g.labelprefix&&0<g.labelprefix.length?g.labelprefix.replace(/ = $/,""):g._hovertitle;c.push(p+": "+d.toFixed(3)+g.labelsuffix)}if((f=q(m,f,b,k))&&!1!==f[0].index){b=f[0];if(void 0===b.index)return k=m.xa._length,m=k*(1-b.y0/m.ya._length)/2,k-=m,b.x0=Math.max(Math.min(b.x0,k),m),b.x1=Math.max(Math.min(b.x1,k),m),f;m=b.cd[b.index];
b.a=m.a;b.b=m.b;b.xLabelVal=void 0;b.yLabelVal=void 0;k=b.trace;var h=k._carpet,l=k._module.formatLabels(m,k);b.yLabel=l.yLabel;delete b.text;var c=[];k.hovertemplate||(l=(m.hi||k.hoverinfo).split("+"),-1!==l.indexOf("all")&&(l=["a","b","text"]),-1!==l.indexOf("a")&&e(h.aaxis,m.a),-1!==l.indexOf("b")&&e(h.baxis,m.b),c.push("y: "+b.yLabel),-1!==l.indexOf("text")&&n(m,k,c),b.extraText=c.join("\x3cbr\x3e"));return f}}},{"../../lib":750,"../scatter/hover":1169}],1198:[function(a,G,C){G.exports={attributes:a("./attributes"),
supplyDefaults:a("./defaults"),colorbar:a("../scatter/marker_colorbar"),formatLabels:a("./format_labels"),calc:a("./calc"),plot:a("./plot"),style:a("../scatter/style").style,styleOnSelect:a("../scatter/style").styleOnSelect,hoverPoints:a("./hover"),selectPoints:a("../scatter/select"),eventData:a("./event_data"),moduleType:"trace",name:"scattercarpet",basePlotModule:a("../../plots/cartesian"),categories:"svg carpet symbols showLegend carpetDependent zoomScale".split(" "),meta:{}}},{"../../plots/cartesian":812,
"../scatter/marker_colorbar":1176,"../scatter/select":1180,"../scatter/style":1182,"./attributes":1192,"./calc":1193,"./defaults":1194,"./event_data":1195,"./format_labels":1196,"./hover":1197,"./plot":1199}],1199:[function(a,G,C){var q=a("../scatter/plot"),n=a("../../plots/cartesian/axes"),m=a("../../components/drawing");G.exports=function(f,b,k,e){var h=k[0][0].carpet;b={xaxis:n.getFromId(f,h.xaxis||"x"),yaxis:n.getFromId(f,h.yaxis||"y"),plot:b.plot};q(f,b,k,e);for(b=0;b<k.length;b++)h=k[b][0].trace,
h=e.selectAll("g.trace"+h.uid+" .js-line"),m.setClipUrl(h,k[b][0].carpet._clipPathId,f)}},{"../../components/drawing":637,"../../plots/cartesian/axes":799,"../scatter/plot":1179}],1200:[function(a,G,C){C=a("../../plots/template_attributes").hovertemplateAttrs;var q=a("../../plots/template_attributes").texttemplateAttrs,n=a("../scatter/attributes"),m=a("../../plots/attributes"),f=a("../../components/colorscale/attributes"),b=a("../../components/drawing/attributes").dash,k=a("../../lib/extend").extendFlat;
a=a("../../plot_api/edit_types").overrideAll;var e=n.marker,h=n.line,l=e.line;G.exports=a({lon:{valType:"data_array"},lat:{valType:"data_array"},locations:{valType:"data_array"},locationmode:{valType:"enumerated",values:["ISO-3","USA-states","country names","geojson-id"],dflt:"ISO-3"},geojson:{valType:"any",editType:"calc"},featureidkey:{valType:"string",editType:"calc",dflt:"id"},mode:k({},n.mode,{dflt:"markers"}),text:k({},n.text,{}),texttemplate:q({editType:"plot"},{keys:["lat","lon","location",
"text"]}),hovertext:k({},n.hovertext,{}),textfont:n.textfont,textposition:n.textposition,line:{color:h.color,width:h.width,dash:b},connectgaps:n.connectgaps,marker:k({symbol:e.symbol,opacity:e.opacity,size:e.size,sizeref:e.sizeref,sizemin:e.sizemin,sizemode:e.sizemode,colorbar:e.colorbar,line:k({width:l.width},f("marker.line")),gradient:e.gradient},f("marker")),fill:{valType:"enumerated",values:["none","toself"],dflt:"none"},fillcolor:n.fillcolor,selected:n.selected,unselected:n.unselected,hoverinfo:k({},
m.hoverinfo,{flags:["lon","lat","location","text","name"]}),hovertemplate:C()},"calc","nested")},{"../../components/colorscale/attributes":622,"../../components/drawing/attributes":636,"../../lib/extend":740,"../../plot_api/edit_types":781,"../../plots/attributes":795,"../../plots/template_attributes":877,"../scatter/attributes":1158}],1201:[function(a,G,C){function q(h){return h&&"string"===typeof h}var n=a("fast-isnumeric"),m=a("../../constants/numerical").BADNUM,f=a("../scatter/colorscale_calc"),
b=a("../scatter/arrays_to_calcdata"),k=a("../scatter/calc_selection"),e=a("../../lib")._;G.exports=function(h,l){var c=Array.isArray(l.locations),g=c?l.locations.length:l._length,d=Array(g);var p=l.geojson?function(y){return q(y)||n(y)}:q;for(var r=0;r<g;r++){var t=d[r]={};if(c){var w=l.locations[r];t.loc=p(w)?w:null}else{w=l.lon[r];var x=l.lat[r];n(w)&&n(x)?t.lonlat=[+w,+x]:t.lonlat=[m,m]}}b(d,l);f(h,l);k(d,l);g&&(d[0].t={labels:{lat:e(h,"lat:")+" ",lon:e(h,"lon:")+" "}});return d}},{"../../constants/numerical":725,
"../../lib":750,"../scatter/arrays_to_calcdata":1157,"../scatter/calc_selection":1160,"../scatter/colorscale_calc":1161,"fast-isnumeric":241}],1202:[function(a,G,C){var q=a("../../lib"),n=a("../scatter/subtypes"),m=a("../scatter/marker_defaults"),f=a("../scatter/line_defaults"),b=a("../scatter/text_defaults"),k=a("../scatter/fillcolor_defaults"),e=a("./attributes");G.exports=function(h,l,c,g){function d(w,x){return q.coerce(h,l,e,w,x)}var p=d("locations");if(p&&p.length){var r=d("geojson");if("string"===
typeof r&&""!==r||q.isPlainObject(r))var t="geojson-id";"geojson-id"===d("locationmode",t)&&d("featureidkey");p=p.length}else p=d("lon")||[],r=d("lat")||[],p=Math.min(p.length,r.length);p?(l._length=p,d("text"),d("hovertext"),d("hovertemplate"),d("mode"),n.hasLines(l)&&(f(h,l,c,g,d),d("connectgaps")),n.hasMarkers(l)&&m(h,l,c,g,d,{gradient:!0}),n.hasText(l)&&(d("texttemplate"),b(h,l,g,d)),d("fill"),"none"!==l.fill&&k(h,l,c,d),q.coerceSelectionMarkerOpacity(l,d)):l.visible=!1}},{"../../lib":750,"../scatter/fillcolor_defaults":1166,
"../scatter/line_defaults":1171,"../scatter/marker_defaults":1177,"../scatter/subtypes":1183,"../scatter/text_defaults":1184,"./attributes":1200}],1203:[function(a,G,C){G.exports=function(q,n,m,f,b){q.lon=n.lon;q.lat=n.lat;q.location=n.loc?n.loc:null;n=f[b];n.fIn&&n.fIn.properties&&(q.properties=n.fIn.properties);return q}},{}],1204:[function(a,G,C){var q=a("../../plots/cartesian/axes");G.exports=function(n,m,f){var b={};m=f[m.geo]._subplot.mockAxis;n=n.lonlat;b.lonLabel=q.tickText(m,m.c2l(n[0]),
!0).text;b.latLabel=q.tickText(m,m.c2l(n[1]),!0).text;return b}},{"../../plots/cartesian/axes":799}],1205:[function(a,G,C){function q(e,h,l,c){if(!e.hovertemplate){var g=h.hi||e.hoverinfo,d="all"===g?k.hoverinfo.flags:g.split("+");g=-1!==d.indexOf("location")&&Array.isArray(e.locations);var p=-1!==d.indexOf("lon"),r=-1!==d.indexOf("lat");d=-1!==d.indexOf("text");var t=[];g?t.push(h.loc):p&&r?t.push("("+(l.lonLabel+"°, ")+(l.latLabel+"°)")):p?t.push(c.lon+(l.lonLabel+"°")):r&&t.push(c.lat+(l.latLabel+
"°"));d&&b(h,e,t);return t.join("\x3cbr\x3e")}}var n=a("../../components/fx"),m=a("../../constants/numerical").BADNUM,f=a("../scatter/get_trace_color"),b=a("../../lib").fillText,k=a("./attributes");G.exports=function(e,h,l){var c=e.cd,g=c[0].trace,d=e.xa,p=e.ya,r=e.subplot,t=r.projection.isLonLatOverEdges,w=r.project;n.getClosest(c,function(A){var z=A.lonlat;if(z[0]===m||t(z))return Infinity;var F=w(z),D=w([h,l]);z=Math.abs(F[0]-D[0]);F=Math.abs(F[1]-D[1]);A=Math.max(3,A.mrc||0);return Math.max(Math.sqrt(z*
z+F*F)-A,1-3/A)},e);if(!1!==e.index){var x=c[e.index],y=x.lonlat;d=[d.c2p(y),p.c2p(y)];p=x.mrc||1;e.x0=d[0]-p;e.x1=d[0]+p;e.y0=d[1]-p;e.y1=d[1]+p;e.loc=x.loc;e.lon=y[0];e.lat=y[1];y={};y[g.geo]={_subplot:r};r=g._module.formatLabels(x,g,y);e.lonLabel=r.lonLabel;e.latLabel=r.latLabel;e.color=f(g,x);e.extraText=q(g,x,e,c[0].t.labels);e.hovertemplate=g.hovertemplate;return[e]}}},{"../../components/fx":655,"../../constants/numerical":725,"../../lib":750,"../scatter/get_trace_color":1168,"./attributes":1200}],
1206:[function(a,G,C){G.exports={attributes:a("./attributes"),supplyDefaults:a("./defaults"),colorbar:a("../scatter/marker_colorbar"),formatLabels:a("./format_labels"),calc:a("./calc"),calcGeoJSON:a("./plot").calcGeoJSON,plot:a("./plot").plot,style:a("./style"),styleOnSelect:a("../scatter/style").styleOnSelect,hoverPoints:a("./hover"),eventData:a("./event_data"),selectPoints:a("./select"),moduleType:"trace",name:"scattergeo",basePlotModule:a("../../plots/geo"),categories:["geo","symbols","showLegend",
"scatter-like"],meta:{}}},{"../../plots/geo":831,"../scatter/marker_colorbar":1176,"../scatter/style":1182,"./attributes":1200,"./calc":1201,"./defaults":1202,"./event_data":1203,"./format_labels":1204,"./hover":1205,"./plot":1207,"./select":1208,"./style":1209}],1207:[function(a,G,C){var q=a("d3"),n=a("../../lib"),m=a("../../lib/topojson_utils").getTopojsonFeatures,f=a("../../lib/geojson_utils"),b=a("../../lib/geo_location_utils"),k=a("../../plots/cartesian/autorange").findExtremes,e=a("../../constants/numerical").BADNUM,
h=a("../scatter/calc").calcMarkerSize,l=a("../scatter/subtypes"),c=a("./style");G.exports={calcGeoJSON:function(g,d){var p=g[0].trace;d=d[p.geo];var r=d._subplot,t=p._length;if(Array.isArray(p.locations)){var w=p.locationmode,x="geojson-id"===w?b.extractTraceFeature(g):m(p,r.topojson);for(r=0;r<t;r++){var y=g[r];var A="geojson-id"===w?y.fOut:b.locationToFeature(w,y.loc,x);y.lonlat=A?A.properties.ct:[e,e]}}w={padded:!0};if("geojson"===d.fitbounds&&"geojson-id"===p.locationmode)g=b.computeBbox(b.getTraceGeojson(p)),
x=[g[0],g[2]],A=[g[1],g[3]];else{x=Array(t);A=Array(t);for(r=0;r<t;r++)y=g[r],x[r]=y.lonlat[0],A[r]=y.lonlat[1];w.ppad=h(p,t)}p._extremes.lon=k(d.lonaxis._ax,x,w);p._extremes.lat=k(d.lataxis._ax,A,w)},plot:function(g,d,p){d=d.layers.frontplot.select(".scatterlayer");p=n.makeTraceGroups(d,p,"trace scattergeo");p.selectAll("*").remove();p.each(function(r){var t=q.select(this),w=r[0].trace;if(l.hasLines(w)||"none"!==w.fill){var x=f.calcTraceToLineCoords(r);x="none"!==w.fill?f.makePolygon(x):f.makeLine(x);
t.selectAll("path.js-line").data([{geojson:x,trace:w}]).enter().append("path").classed("js-line",!0).style("stroke-miterlimit",2)}l.hasMarkers(w)&&t.selectAll("path.point").data(n.identity).enter().append("path").classed("point",!0).each(function(y){y.lonlat[0]===e&&q.select(this).remove()});l.hasText(w)&&t.selectAll("g").data(n.identity).enter().append("g").append("text").each(function(y){y.lonlat[0]===e&&q.select(this).remove()});c(g,r)})}}},{"../../constants/numerical":725,"../../lib":750,"../../lib/geo_location_utils":743,
"../../lib/geojson_utils":744,"../../lib/topojson_utils":777,"../../plots/cartesian/autorange":798,"../scatter/calc":1159,"../scatter/subtypes":1183,"./style":1209,d3:169}],1208:[function(a,G,C){var q=a("../scatter/subtypes"),n=a("../../constants/numerical").BADNUM;G.exports=function(m,f){var b=m.cd,k=m.xaxis,e=m.yaxis,h=[],l=b[0].trace,c;if(!q.hasMarkers(l)&&!q.hasText(l))return[];if(!1===f)for(c=0;c<b.length;c++)b[c].selected=0;else for(c=0;c<b.length;c++){l=b[c];var g=l.lonlat;if(g[0]!==n){var d=
k.c2p(g);var p=e.c2p(g);f.contains([d,p],null,c,m)?(h.push({pointNumber:c,lon:g[0],lat:g[1]}),l.selected=1):l.selected=0}}return h}},{"../../constants/numerical":725,"../scatter/subtypes":1183}],1209:[function(a,G,C){function q(e,h){var l=h[0].trace,c=h[0].node3;c.style("opacity",h[0].trace.opacity);b(c,l,e);k(c,l,e);c.selectAll("path.js-line").style("fill","none").each(function(g){var d=n.select(this);g=g.trace;var p=g.line||{};d.call(f.stroke,p.color).call(m.dashLine,p.dash||"",p.width||0);"none"!==
g.fill&&d.call(f.fill,g.fillcolor)})}var n=a("d3"),m=a("../../components/drawing"),f=a("../../components/color");a=a("../scatter/style");var b=a.stylePoints,k=a.styleText;G.exports=function(e,h){h&&q(e,h)}},{"../../components/color":615,"../../components/drawing":637,"../scatter/style":1182,d3:169}],1210:[function(a,G,C){var q=a("../../plots/attributes");C=a("../scatter/attributes");var n=a("../../components/colorscale/attributes"),m=a("../../lib/extend").extendFlat,f=a("../../plot_api/edit_types").overrideAll;
a=a("./constants").DASHES;var b=C.line,k=C.marker,e=k.line;G=G.exports=f({x:C.x,x0:C.x0,dx:C.dx,y:C.y,y0:C.y0,dy:C.dy,xperiod:C.xperiod,yperiod:C.yperiod,xperiod0:C.xperiod0,yperiod0:C.yperiod0,xperiodalignment:C.xperiodalignment,yperiodalignment:C.yperiodalignment,text:C.text,hovertext:C.hovertext,textposition:C.textposition,textfont:C.textfont,mode:{valType:"flaglist",flags:["lines","markers","text"],extras:["none"]},line:{color:b.color,width:b.width,shape:{valType:"enumerated",values:["linear",
"hv","vh","hvh","vhv"],dflt:"linear",editType:"plot"},dash:{valType:"enumerated",values:Object.keys(a),dflt:"solid"}},marker:m({},n("marker"),{symbol:k.symbol,size:k.size,sizeref:k.sizeref,sizemin:k.sizemin,sizemode:k.sizemode,opacity:k.opacity,colorbar:k.colorbar,line:m({},n("marker.line"),{width:e.width})}),connectgaps:C.connectgaps,fill:m({},C.fill,{dflt:"none"}),fillcolor:C.fillcolor,selected:{marker:C.selected.marker,textfont:C.selected.textfont},unselected:{marker:C.unselected.marker,textfont:C.unselected.textfont},
opacity:q.opacity},"calc","nested");G.x.editType=G.y.editType=G.x0.editType=G.y0.editType="calc+clearAxisTypes";G.hovertemplate=C.hovertemplate;G.texttemplate=C.texttemplate},{"../../components/colorscale/attributes":622,"../../lib/extend":740,"../../plot_api/edit_types":781,"../../plots/attributes":795,"../scatter/attributes":1158,"./constants":1212}],1211:[function(a,G,C){function q(t,w,x){t=t._extremes[w._id];w=b(w,x._bnds,{padded:!0});t.min=t.min.concat(w.min);t.max=t.max.concat(w.max)}var n=
a("@plotly/point-cluster"),m=a("../../lib"),f=a("../../plots/cartesian/axis_ids"),b=a("../../plots/cartesian/autorange").findExtremes,k=a("../../plots/cartesian/align_period");C=a("../scatter/calc");var e=C.calcMarkerSize,h=C.calcAxisExpansion,l=C.setFirstScatter,c=a("../scatter/colorscale_calc"),g=a("./convert"),d=a("./scene_update"),p=a("../../constants/numerical").BADNUM,r=a("./constants").TOO_MANY_POINTS;G.exports=function(t,w){var x=t._fullLayout,y=f.getFromId(t,w.xaxis),A=f.getFromId(t,w.yaxis),
z=x._plots[w.xaxis+w.yaxis],F=w._length,D=F>=r,u=2*F,B={},I=y.makeCalcdata(w,"x");var J=A.makeCalcdata(w,"y");var N=k(w,y,"x",I),M=k(w,A,"y",J);w._x=N;w._y=M;w.xperiodalignment&&(w._origX=I);w.yperiodalignment&&(w._origY=J);I=Array(u);for(J=0;J<F;J++){var E=N[J];var L=M[J];I[2*J]=E===p?NaN:E;I[2*J+1]=L===p?NaN:L}if("log"===y.type)for(J=0;J<u;J+=2)I[J]=y.c2l(I[J]);if("log"===A.type)for(J=1;J<u;J+=2)I[J]=A.c2l(I[J]);if(D&&"log"!==y.type&&"log"!==A.type)B.tree=n(I);else for(u=B.ids=Array(F),J=0;J<F;J++)u[J]=
J;c(t,w);u=g.style(t,w);u.marker&&(u.marker.positions=I);u.line&&1<I.length&&m.extendFlat(u.line,g.linePositions(t,w,I));if(u.errorX||u.errorY)J=g.errorBarPositions(t,w,I,N,M),u.errorX&&m.extendFlat(u.errorX,J.x),u.errorY&&m.extendFlat(u.errorY,J.y);u.text&&(m.extendFlat(u.text,{positions:I},g.textPosition(t,w,u.text,u.marker)),m.extendFlat(u.textSel,{positions:I},g.textPosition(t,w,u.text,u.markerSel)),m.extendFlat(u.textUnsel,{positions:I},g.textPosition(t,w,u.text,u.markerUnsel)));z=d(t,z);l(x,
w);var Q;D?u.marker&&(Q=2*(u.marker.sizeAvg||Math.max(u.marker.size,3))):Q=e(w,F);h(t,w,y,A,N,M,Q);u.errorX&&q(w,y,u.errorX);u.errorY&&q(w,A,u.errorY);u.fill&&!z.fill2d&&(z.fill2d=!0);u.marker&&!z.scatter2d&&(z.scatter2d=!0);u.line&&!z.line2d&&(z.line2d=!0);!u.errorX&&!u.errorY||z.error2d||(z.error2d=!0);u.text&&!z.glText&&(z.glText=!0);u.marker&&(u.marker.snap=F);z.lineOptions.push(u.line);z.errorXOptions.push(u.errorX);z.errorYOptions.push(u.errorY);z.fillOptions.push(u.fill);z.markerOptions.push(u.marker);
z.markerSelectedOptions.push(u.markerSel);z.markerUnselectedOptions.push(u.markerUnsel);z.textOptions.push(u.text);z.textSelectedOptions.push(u.textSel);z.textUnselectedOptions.push(u.textUnsel);z.selectBatch.push([]);z.unselectBatch.push([]);B._scene=z;B.index=z.count;B.x=N;B.y=M;B.positions=I;z.count++;return[{x:!1,y:!1,t:B,trace:w}]}},{"../../constants/numerical":725,"../../lib":750,"../../plots/cartesian/align_period":796,"../../plots/cartesian/autorange":798,"../../plots/cartesian/axis_ids":802,
"../scatter/calc":1159,"../scatter/colorscale_calc":1161,"./constants":1212,"./convert":1213,"./scene_update":1221,"@plotly/point-cluster":57}],1212:[function(a,G,C){G.exports={TOO_MANY_POINTS:1E5,SYMBOL_SDF_SIZE:200,SYMBOL_SIZE:20,SYMBOL_STROKE:1,DOT_RE:/-dot/,OPEN_RE:/-open/,DASHES:{solid:[1],dot:[1,1],dash:[4,1],longdash:[8,1],dashdot:[4,1,1,1],longdashdot:[8,1,1,1]}}},{}],1213:[function(a,G,C){function q(N,M){var E=N._fullLayout;N=M._length;var L=M.textfont,Q=M.textposition,S=Array.isArray(Q)?
Q:[Q],R=L.color;Q=L.size;L=L.family;var O={},T,V=M.texttemplate;if(V){O.text=[];var X=E._d3locale,ba=(T=Array.isArray(V))?Math.min(V.length,N):N,aa=T?function(ma){return V[ma]}:function(){return V};for(T=0;T<ba;T++){var ka={i:T},ha=M._module.formatLabels(ka,M,E),ca={};F(ca,M,T);var sa=M._meta||{};O.text.push(g.texttemplateString(aa(T),ha,X,ca,ka,sa))}}else Array.isArray(M.text)&&M.text.length<N?O.text=M.text.slice():O.text=M.text;if(Array.isArray(O.text))for(T=O.text.length;T<N;T++)O.text[T]="";O.opacity=
M.opacity;O.font={};O.align=[];O.baseline=[];for(T=0;T<S.length;T++){M=S[T].split(/\s+/);switch(M[1]){case "left":O.align.push("right");break;case "right":O.align.push("left");break;default:O.align.push(M[1])}switch(M[0]){case "top":O.baseline.push("bottom");break;case "bottom":O.baseline.push("top");break;default:O.baseline.push(M[0])}}if(Array.isArray(R))for(O.color=Array(N),T=0;T<N;T++)O.color[T]=R[T];else O.color=R;if(g.isArrayOrTypedArray(Q)||Array.isArray(L))for(O.font=Array(N),T=0;T<N;T++)M=
O.font[T]={},M.size=g.isTypedArray(Q)?Q[T]:Array.isArray(Q)?e(Q[T])?Q[T]:0:Q,M.family=Array.isArray(L)?L[T]:L;else O.font={size:Q,family:L};return O}function n(N){var M=N._length,E=N.marker,L={},Q=g.isArrayOrTypedArray(E.symbol);var S=g.isArrayOrTypedArray(E.color);var R=g.isArrayOrTypedArray(E.line.color),O=g.isArrayOrTypedArray(E.opacity),T=g.isArrayOrTypedArray(E.size),V=g.isArrayOrTypedArray(E.line.width),X;Q||(X=x.isOpenSymbol(E.symbol));if(Q||S||R||O){L.colors=Array(M);L.borderColors=Array(M);
R=r(E,E.opacity,M);O=r(E.line,E.opacity,M);if(!Array.isArray(O[0])){var ba=O;O=Array(M);for(S=0;S<M;S++)O[S]=ba}if(!Array.isArray(R[0]))for(ba=R,R=Array(M),S=0;S<M;S++)R[S]=ba;L.colors=R;L.borderColors=O;for(S=0;S<M;S++)Q&&(X=x.isOpenSymbol(E.symbol[S])),X&&(O[S]=R[S].slice(),R[S]=R[S].slice(),R[S][3]=0);L.opacity=N.opacity}else X?(L.color=l(E.color,"uint8"),L.color[3]=0,L.borderColor=l(E.color,"uint8")):(L.color=l(E.color,"uint8"),L.borderColor=l(E.line.color,"uint8")),L.opacity=N.opacity*E.opacity;
if(Q)for(L.markers=Array(M),S=0;S<M;S++)L.markers[S]=k(E.symbol[S]);else L.marker=k(E.symbol);X=w(N);if(T||V){N=L.sizes=Array(M);Q=L.borderSizes=Array(M);R=0;if(T){for(S=0;S<M;S++)N[S]=X(E.size[S]),R+=N[S];var aa=R/M}else for(T=X(E.size),S=0;S<M;S++)N[S]=T;if(V)for(S=0;S<M;S++)Q[S]=E.line.width[S]/2;else for(T=E.line.width/2,S=0;S<M;S++)Q[S]=T;L.sizeAvg=aa}else L.size=X(E&&E.size||10),L.borderSizes=X(E.line.width);return L}function m(N,M){N=N.marker;var E={};if(!M)return E;M.marker&&M.marker.symbol?
E=n(g.extendFlat({},N,M.marker)):M.marker&&(M.marker.size&&(E.size=M.marker.size/2),M.marker.color&&(E.colors=M.marker.color),void 0!==M.marker.opacity&&(E.opacity=M.marker.opacity));return E}function f(N,M,E){var L={};if(!E)return L;E.textfont&&(M={opacity:1,text:M.text,texttemplate:M.texttemplate,textposition:M.textposition,textfont:g.extendFlat({},M.textfont)},E.textfont&&g.extendFlat(M.textfont,E.textfont),L=q(N,M));return L}function b(N,M){var E={capSize:2*M.width,lineWidth:M.thickness,color:M.color};
M.copy_ystyle&&(E=N.error_y);return E}function k(N){if("circle"===N)return null;var M=d.symbolNumber(N);var E=d.symbolFuncs[M%100];var L=!!d.symbolNoDot[M%100];M=!!d.symbolNoFill[M%100];var Q=x.isDotSymbol(N);if(I[N])return I[N];E=Q&&!L?E(1.1*u)+J:E(u);E=h(E,{w:D,h:D,viewBox:[-u,-u,u,u],stroke:M?B:-B});return(I[N]=E)||null}var e=a("fast-isnumeric"),h=a("svg-path-sdf"),l=a("color-normalize"),c=a("../../registry"),g=a("../../lib"),d=a("../../components/drawing"),p=a("../../plots/cartesian/axis_ids"),
r=a("../../lib/gl_format_color").formatColor,t=a("../scatter/subtypes"),w=a("../scatter/make_bubble_size_func"),x=a("./helpers"),y=a("./constants"),A=a("../../constants/interactions").DESELECTDIM,z={start:1,left:1,end:-1,right:-1,middle:0,center:0,bottom:1,top:-1},F=a("../../components/fx/helpers").appendArrayPointValue,D=y.SYMBOL_SDF_SIZE,u=y.SYMBOL_SIZE,B=y.SYMBOL_STROKE,I={},J=d.symbolFuncs[0](.05*u);G.exports={style:function(N,M){var E={marker:void 0,markerSel:void 0,markerUnsel:void 0,line:void 0,
fill:void 0,errorX:void 0,errorY:void 0,text:void 0,textSel:void 0,textUnsel:void 0};if(!0!==M.visible)return E;t.hasText(M)&&(E.text=q(N,M),E.textSel=f(N,M,M.selected),E.textUnsel=f(N,M,M.unselected));if(t.hasMarkers(M)&&(E.marker=n(M),E.markerSel=m(M,M.selected),E.markerUnsel=m(M,M.unselected),!M.unselected&&g.isArrayOrTypedArray(M.marker.opacity))){var L=M.marker.opacity;E.markerUnsel.opacity=Array(L.length);for(N=0;N<L.length;N++)E.markerUnsel.opacity[N]=A*L[N]}if(t.hasLines(M)){E.line={overlay:!0,
thickness:M.line.width,color:M.line.color,opacity:M.opacity};L=(y.DASHES[M.line.dash]||[1]).slice();for(N=0;N<L.length;++N)L[N]*=M.line.width;E.line.dashes=L}M.error_x&&M.error_x.visible&&(E.errorX=b(M,M.error_x));M.error_y&&M.error_y.visible&&(E.errorY=b(M,M.error_y));M.fill&&"none"!==M.fill&&(E.fill={closed:!0,fill:M.fillcolor,thickness:0});return E},markerStyle:n,markerSelection:m,linePositions:function(N,M,E){var L=E.length,Q=L/2;if(t.hasLines(M)&&Q)if("hv"===M.line.shape){var S=[];for(N=0;N<
Q-1;N++)isNaN(E[2*N])||isNaN(E[2*N+1])?S.push(NaN,NaN,NaN,NaN):(S.push(E[2*N],E[2*N+1]),isNaN(E[2*N+2])||isNaN(E[2*N+3])?S.push(NaN,NaN):S.push(E[2*N+2],E[2*N+1]));S.push(E[L-2],E[L-1])}else if("hvh"===M.line.shape){S=[];for(N=0;N<Q-1;N++)if(isNaN(E[2*N])||isNaN(E[2*N+1])||isNaN(E[2*N+2])||isNaN(E[2*N+3]))isNaN(E[2*N])||isNaN(E[2*N+1])?S.push(NaN,NaN):S.push(E[2*N],E[2*N+1]),S.push(NaN,NaN);else{var R=(E[2*N]+E[2*N+2])/2;S.push(E[2*N],E[2*N+1],R,E[2*N+1],R,E[2*N+3])}S.push(E[L-2],E[L-1])}else if("vhv"===
M.line.shape){S=[];for(N=0;N<Q-1;N++)isNaN(E[2*N])||isNaN(E[2*N+1])||isNaN(E[2*N+2])||isNaN(E[2*N+3])?(isNaN(E[2*N])||isNaN(E[2*N+1])?S.push(NaN,NaN):S.push(E[2*N],E[2*N+1]),S.push(NaN,NaN)):(R=(E[2*N+1]+E[2*N+3])/2,S.push(E[2*N],E[2*N+1],E[2*N],R,E[2*N+2],R));S.push(E[L-2],E[L-1])}else if("vh"===M.line.shape){S=[];for(N=0;N<Q-1;N++)isNaN(E[2*N])||isNaN(E[2*N+1])?S.push(NaN,NaN,NaN,NaN):(S.push(E[2*N],E[2*N+1]),isNaN(E[2*N+2])||isNaN(E[2*N+3])?S.push(NaN,NaN):S.push(E[2*N],E[2*N+3]));S.push(E[L-2],
E[L-1])}else S=E;L=!1;for(N=0;N<S.length;N++)if(isNaN(S[N])){L=!0;break}E=L||S.length>y.TOO_MANY_POINTS?"rect":t.hasMarkers(M)?"rect":"round";if(L&&M.connectgaps)for(M=S[0],L=S[1],N=0;N<S.length;N+=2)isNaN(S[N])||isNaN(S[N+1])?(S[N]=M,S[N+1]=L):(M=S[N],L=S[N+1]);return{join:E,positions:S}},errorBarPositions:function(N,M,E,L,Q){function S(X,ba){var aa=ba._id.charAt(0),ka=M["error_"+aa];if(ka&&ka.visible&&("linear"===ba.type||"log"===ba.type)){ka=R(ka);for(var ha={x:0,y:1}[aa],ca={x:[0,1,2,3],y:[2,
3,0,1]}[aa],sa=new Float64Array(4*T),ma=Infinity,ra=-Infinity,qa=0,Y=0;qa<T;qa++,Y+=4){var pa=X[qa];if(e(pa)){var oa=E[2*qa+ha],ua=ka(pa,qa),ya=ua[0];ua=ua[1];if(e(ya)&&e(ua)){var ja=pa+ua;sa[Y+ca[0]]=oa-ba.c2l(pa-ya);sa[Y+ca[1]]=ba.c2l(ja)-oa;sa[Y+ca[2]]=0;sa[Y+ca[3]]=0;ma=Math.min(ma,pa-ya);ra=Math.max(ra,pa+ua)}}}V[aa]={positions:E,errors:sa,_bnds:[ma,ra]}}}var R=c.getComponentMethod("errorbars","makeComputeError"),O=p.getFromId(N,M.xaxis);N=p.getFromId(N,M.yaxis);var T=E.length/2,V={};S(L,O);
S(Q,N);return V},textPosition:function(N,M,E,L){N=M._length;var Q={};if(t.hasMarkers(M)){M=E.font;var S=E.align,R=E.baseline;Q.offset=Array(N);for(E=0;E<N;E++){var O=L.sizes?L.sizes[E]:L.size,T=Array.isArray(M)?M[E].size:M.size,V=Array.isArray(S)?1<S.length?S[E]:S[0]:S,X=Array.isArray(R)?1<R.length?R[E]:R[0]:R;X=z[X];O=O?O/.8+1:0;Q.offset[E]=[z[V]*O/T,(-X*O-.5*X)/T]}}return Q}}},{"../../components/drawing":637,"../../components/fx/helpers":651,"../../constants/interactions":724,"../../lib":750,"../../lib/gl_format_color":746,
"../../plots/cartesian/axis_ids":802,"../../registry":882,"../scatter/make_bubble_size_func":1175,"../scatter/subtypes":1183,"./constants":1212,"./helpers":1217,"color-normalize":125,"fast-isnumeric":241,"svg-path-sdf":546}],1214:[function(a,G,C){var q=a("../../lib"),n=a("../../registry"),m=a("./helpers"),f=a("./attributes"),b=a("../scatter/constants"),k=a("../scatter/subtypes"),e=a("../scatter/xy_defaults"),h=a("../scatter/period_defaults"),l=a("../scatter/marker_defaults"),c=a("../scatter/line_defaults"),
g=a("../scatter/fillcolor_defaults"),d=a("../scatter/text_defaults");G.exports=function(p,r,t,w){function x(F,D){return q.coerce(p,r,f,F,D)}var y=p.marker?m.isOpenSymbol(p.marker.symbol):!1,A=k.isBubble(p),z=e(p,r,w,x);z?(h(p,r,w,x),z=z<b.PTS_LINESONLY?"lines+markers":"lines",x("text"),x("hovertext"),x("hovertemplate"),x("mode",z),k.hasLines(r)&&(x("connectgaps"),c(p,r,t,w,x),x("line.shape")),k.hasMarkers(r)&&(l(p,r,t,w,x),x("marker.line.width",y||A?1:0)),k.hasText(r)&&(x("texttemplate"),d(p,r,w,
x)),w=(r.line||{}).color,y=(r.marker||{}).color,x("fill"),"none"!==r.fill&&g(p,r,t,x),A=n.getComponentMethod("errorbars","supplyDefaults"),A(p,r,w||y||t,{axis:"y"}),A(p,r,w||y||t,{axis:"x",inherit:"y"}),q.coerceSelectionMarkerOpacity(r,x)):r.visible=!1}},{"../../lib":750,"../../registry":882,"../scatter/constants":1162,"../scatter/fillcolor_defaults":1166,"../scatter/line_defaults":1171,"../scatter/marker_defaults":1177,"../scatter/period_defaults":1178,"../scatter/subtypes":1183,"../scatter/text_defaults":1184,
"../scatter/xy_defaults":1185,"./attributes":1210,"./helpers":1217}],1215:[function(a,G,C){var q=a("../../lib"),n=a("../../components/color"),m=a("../../constants/interactions").DESELECTDIM;G.exports={styleTextSelection:function(f){f=f[0];var b=f.trace,k=f.t;f=k._scene;k=k.index;var e=f.selectBatch[k],h=f.unselectBatch[k],l=f.textOptions[k],c=f.textSelectedOptions[k]||{},g=f.textUnselectedOptions[k]||{},d=q.extendFlat({},l);if(e.length||h.length){c=c.color;g=g.color;l=l.color;var p=Array.isArray(l);
d.color=Array(b._length);for(b=0;b<e.length;b++){var r=e[b];d.color[r]=c||(p?l[r]:l)}for(b=0;b<h.length;b++)r=h[b],e=p?l[r]:l,d.color[r]=g?g:c?e:n.addOpacity(e,m)}f.glText[k].update(d)}}},{"../../components/color":615,"../../constants/interactions":724,"../../lib":750}],1216:[function(a,G,C){var q=a("../scatter/format_labels");G.exports=function(n,m,f){var b=n.i;"x"in n||(n.x=m._x[b]);"y"in n||(n.y=m._y[b]);return q(n,m,f)}},{"../scatter/format_labels":1167}],1217:[function(a,G,C){var q=a("./constants");
C.isOpenSymbol=function(n){return"string"===typeof n?q.OPEN_RE.test(n):100<n%200};C.isDotSymbol=function(n){return"string"===typeof n?q.DOT_RE.test(n):200<n}},{"./constants":1212}],1218:[function(a,G,C){function q(b,k,e,h){var l=b.xa,c=b.ya,g=b.distance,d=b.dxy,p=b.index;k={pointNumber:p,x:k[p],y:e[p]};k.tx=Array.isArray(h.text)?h.text[p]:h.text;k.htx=Array.isArray(h.hovertext)?h.hovertext[p]:h.hovertext;k.data=Array.isArray(h.customdata)?h.customdata[p]:h.customdata;k.tp=Array.isArray(h.textposition)?
h.textposition[p]:h.textposition;if(e=h.textfont)k.ts=m.isArrayOrTypedArray(e.size)?e.size[p]:e.size,k.tc=Array.isArray(e.color)?e.color[p]:e.color,k.tf=Array.isArray(e.family)?e.family[p]:e.family;if(e=h.marker)k.ms=m.isArrayOrTypedArray(e.size)?e.size[p]:e.size,k.mo=m.isArrayOrTypedArray(e.opacity)?e.opacity[p]:e.opacity,k.mx=m.isArrayOrTypedArray(e.symbol)?e.symbol[p]:e.symbol,k.mc=m.isArrayOrTypedArray(e.color)?e.color[p]:e.color;var r=e&&e.line;r&&(k.mlc=Array.isArray(r.color)?r.color[p]:r.color,
k.mlw=m.isArrayOrTypedArray(r.width)?r.width[p]:r.width);(e=e&&e.gradient)&&"none"!==e.type&&(k.mgt=Array.isArray(e.type)?e.type[p]:e.type,k.mgc=Array.isArray(e.color)?e.color[p]:e.color);l=l.c2p(k.x,!0);c=c.c2p(k.y,!0);e=k.mrc||1;if(r=h.hoverlabel)k.hbg=Array.isArray(r.bgcolor)?r.bgcolor[p]:r.bgcolor,k.hbc=Array.isArray(r.bordercolor)?r.bordercolor[p]:r.bordercolor,k.hts=m.isArrayOrTypedArray(r.font.size)?r.font.size[p]:r.font.size,k.htc=Array.isArray(r.font.color)?r.font.color[p]:r.font.color,k.htf=
Array.isArray(r.font.family)?r.font.family[p]:r.font.family,k.hnl=m.isArrayOrTypedArray(r.namelength)?r.namelength[p]:r.namelength;if(r=h.hoverinfo)k.hi=Array.isArray(r)?r[p]:r;if(r=h.hovertemplate)k.ht=Array.isArray(r)?r[p]:r;r={};r[b.index]=k;var t=h._origX,w=h._origY;b=m.extendFlat({},b,{color:f(h,k),x0:l-e,x1:l+e,xLabelVal:t?t[p]:k.x,y0:c-e,y1:c+e,yLabelVal:w?w[p]:k.y,cd:r,distance:g,spikeDistance:d,hovertemplate:k.ht});k.htx?b.text=k.htx:k.tx?b.text=k.tx:h.text&&(b.text=h.text);m.fillText(k,
h,b);n.getComponentMethod("errorbars","hoverInfo")(k,h,b);return b}var n=a("../../registry"),m=a("../../lib"),f=a("../scatter/get_trace_color");G.exports={hoverPoints:function(b,k,e,h){var l=b.cd,c=l[0].t;l=l[0].trace;var g=b.xa,d=b.ya,p=c.x,r=c.y;k=g.c2p(k);e=d.c2p(e);var t=b.distance;if(c.tree){var w=g.p2c(k-t),x=g.p2c(k+t),y=d.p2c(e-t),A=d.p2c(e+t);c="x"===h?c.tree.range(Math.min(w,x),Math.min(d._rl[0],d._rl[1]),Math.max(w,x),Math.max(d._rl[0],d._rl[1])):c.tree.range(Math.min(w,x),Math.min(y,A),
Math.max(w,x),Math.max(y,A))}else c=c.ids;if("x"===h)for(h=0;h<c.length;h++){if(x=p[c[h]],x=Math.abs(g.c2p(x)-k),x<t){t=x;w=d.c2p(r[c[h]])-e;var z=Math.sqrt(x*x+w*w);var F=c[h]}}else for(h=c.length-1;-1<h;h--)x=p[c[h]],w=r[c[h]],x=g.c2p(x)-k,w=d.c2p(w)-e,w=Math.sqrt(x*x+w*w),w<t&&(t=z=w,F=c[h]);b.index=F;b.distance=t;b.dxy=z;return void 0===F?[b]:[q(b,p,r,l)]},calcHover:q}},{"../../lib":750,"../../registry":882,"../scatter/get_trace_color":1168}],1219:[function(a,G,C){C=a("./hover");G.exports={moduleType:"trace",
name:"scattergl",basePlotModule:a("../../plots/cartesian"),categories:"gl regl cartesian symbols errorBarsOK showLegend scatter-like".split(" "),attributes:a("./attributes"),supplyDefaults:a("./defaults"),crossTraceDefaults:a("../scatter/cross_trace_defaults"),colorbar:a("../scatter/marker_colorbar"),formatLabels:a("./format_labels"),calc:a("./calc"),plot:a("./plot"),hoverPoints:C.hoverPoints,selectPoints:a("./select"),meta:{}}},{"../../plots/cartesian":812,"../scatter/cross_trace_defaults":1164,
"../scatter/marker_colorbar":1176,"./attributes":1210,"./calc":1211,"./defaults":1214,"./format_labels":1216,"./hover":1218,"./plot":1220,"./select":1222}],1220:[function(a,G,C){function q(d,p,r){var t=d._size;return[t.l+p.domain[0]*t.w,t.b+r.domain[0]*t.h,d.width-t.r-(1-p.domain[1])*t.w,d.height-t.t-(1-r.domain[1])*t.h]}var n=a("regl-scatter2d"),m=a("regl-line2d"),f=a("regl-error2d"),b=a("gl-text"),k=a("../../lib"),e=a("../../components/dragelement/helpers").selectMode,h=a("../../lib/prepare_regl"),
l=a("../scatter/subtypes"),c=a("../scatter/link_traces"),g=a("./edit_style").styleTextSelection;G.exports=function(d,p,r){if(r.length){var t=d._fullLayout,w=p._scene,x=p.xaxis,y=p.yaxis;if(w)if(h(d,["ANGLE_instanced_arrays","OES_element_index_uint"])){var A=w.count,z=t._glcanvas.data()[0].regl;c(d,p,r);if(w.dirty){!0===w.error2d&&(w.error2d=f(z));!0===w.line2d&&(w.line2d=m(z));!0===w.scatter2d&&(w.scatter2d=n(z,{constPointSize:!0}));!0===w.fill2d&&(w.fill2d=m(z));if(!0===w.glText)for(w.glText=Array(A),
d=0;d<A;d++)w.glText[d]=new b(z);if(w.glText){if(A>w.glText.length)for(p=A-w.glText.length,d=0;d<p;d++)w.glText.push(new b(z));else A<w.glText.length&&w.glText.splice(A,w.glText.length-A).forEach(function(L){L.destroy()});for(d=0;d<A;d++)w.glText[d].update(w.textOptions[d])}w.line2d&&(w.line2d.update(w.lineOptions),w.lineOptions=w.lineOptions.map(function(L){if(L&&L.positions){for(var Q=L.positions,S=0;S<Q.length&&(isNaN(Q[S])||isNaN(Q[S+1]));)S+=2;for(var R=Q.length-2;R>S&&(isNaN(Q[R])||isNaN(Q[R+
1]));)R-=2;L.positions=Q.slice(S,R+2)}return L}),w.line2d.update(w.lineOptions));w.error2d&&(d=(w.errorXOptions||[]).concat(w.errorYOptions||[]),w.error2d.update(d));w.scatter2d&&w.scatter2d.update(w.markerOptions);w.fillOrder=k.repeat(null,A);w.fill2d&&(w.fillOptions=w.fillOptions.map(function(L,Q){var S=r[Q];if(L&&S&&S[0]&&S[0].trace){var R=S[0];S=R.trace;var O=R.t,T=w.lineOptions[Q],V;R=[];S._ownfill&&R.push(Q);S._nexttrace&&R.push(Q+1);R.length&&(w.fillOrder[Q]=R);R=[];O=T&&T.positions||O.positions;
if("tozeroy"===S.fill){for(T=0;T<O.length&&isNaN(O[T+1]);)T+=2;for(V=O.length-2;V>T&&isNaN(O[V+1]);)V-=2;0!==O[T+1]&&(R=[O[T],0]);R=R.concat(O.slice(T,V+2));0!==O[V+1]&&(R=R.concat([O[V],0]))}else if("tozerox"===S.fill){for(T=0;T<O.length&&isNaN(O[T]);)T+=2;for(V=O.length-2;V>T&&isNaN(O[V]);)V-=2;0!==O[T]&&(R=[0,O[T+1]]);R=R.concat(O.slice(T,V+2));0!==O[V]&&(R=R.concat([0,O[V+1]]))}else if("toself"===S.fill||"tonext"===S.fill){R=[];for(T=V=0;T<O.length;T+=2)if(isNaN(O[T])||isNaN(O[T+1]))R=R.concat(O.slice(V,
T)),R.push(O[V],O[V+1]),V=T+2;R=R.concat(O.slice(V));V&&R.push(O[V],O[V+1])}else if(T=S._nexttrace)if(V=w.lineOptions[Q+1])if(V=V.positions,"tonexty"===S.fill){R=O.slice();for(Q=Math.floor(V.length/2);Q--;){O=V[2*Q];var X=V[2*Q+1];isNaN(O)||isNaN(X)||R.push(O,X)}L.fill=T.fillcolor}if(S._prevtrace&&"tonext"===S._prevtrace.fill){Q=w.lineOptions[Q-1].positions;O=R.length/2;V=[O];for(T=0;T<Q.length;T+=2)(isNaN(Q[T])||isNaN(Q[T+1]))&&V.push(T/2+O+1);R=R.concat(Q);L.hole=V}L.fillmode=S.fill;L.opacity=S.opacity;
L.positions=R;return L}}),w.fill2d.update(w.fillOptions))}z=e(t.dragmode);p=-1<t.clickmode.indexOf("select");for(d=0;d<A;d++){var F=r[d][0];var D=F.trace;var u=F.t,B=u.index;F=D._length;var I=u.x,J=u.y;if(D.selectedpoints||z||p){z||(z=!0);if(D.selectedpoints){var N=w.selectBatch[B]=k.selIndices2selPoints(D),M={};for(D=0;D<N.length;D++)M[N[D]]=1;N=[];for(D=0;D<F;D++)M[D]||N.push(D);w.unselectBatch[B]=N}B=u.xpx=Array(F);u=u.ypx=Array(F);for(D=0;D<F;D++)B[D]=x.c2p(I[D]),u[D]=y.c2p(J[D])}else u.xpx=u.ypx=
null}if(z){w.select2d||(w.select2d=n(t._glcanvas.data()[1].regl));if(w.scatter2d){z=Array(A);for(d=0;d<A;d++)z[d]=w.selectBatch[d].length||w.unselectBatch[d].length?w.markerUnselectedOptions[d]:{};w.scatter2d.update(z)}w.select2d&&(w.select2d.update(w.markerOptions),w.select2d.update(w.markerSelectedOptions));w.glText&&r.forEach(function(L){l.hasText(((L||[])[0]||{}).trace||{})&&g(L)})}else w.scatter2d&&w.scatter2d.update(w.markerOptions);var E={viewport:q(t,x,y),range:[(x._rl||x.range)[0],(y._rl||
y.range)[0],(x._rl||x.range)[1],(y._rl||y.range)[1]]};t=k.repeat(E,w.count);w.fill2d&&w.fill2d.update(t);w.line2d&&w.line2d.update(t);w.error2d&&w.error2d.update(t.concat(t));w.scatter2d&&w.scatter2d.update(t);w.select2d&&w.select2d.update(t);w.glText&&w.glText.forEach(function(L){L.update(E)})}else w.init()}}},{"../../components/dragelement/helpers":633,"../../lib":750,"../../lib/prepare_regl":763,"../scatter/link_traces":1174,"../scatter/subtypes":1183,"./edit_style":1215,"gl-text":326,"regl-error2d":508,
"regl-line2d":509,"regl-scatter2d":510}],1221:[function(a,G,C){var q=a("../../lib");G.exports=function(n,m){var f=m._scene,b={count:0,dirty:!0,lineOptions:[],fillOptions:[],markerOptions:[],markerSelectedOptions:[],markerUnselectedOptions:[],errorXOptions:[],errorYOptions:[],textOptions:[],textSelectedOptions:[],textUnselectedOptions:[],selectBatch:[],unselectBatch:[]},k={fill2d:!1,scatter2d:!1,error2d:!1,line2d:!1,glText:!1,select2d:!1};m._scene||(f=m._scene={},f.init=function(){q.extendFlat(f,k,
b)},f.init(),f.update=function(e){var h=q.repeat(e,f.count);f.fill2d&&f.fill2d.update(h);f.scatter2d&&f.scatter2d.update(h);f.line2d&&f.line2d.update(h);f.error2d&&f.error2d.update(h.concat(h));f.select2d&&f.select2d.update(h);if(f.glText)for(h=0;h<f.count;h++)f.glText[h].update(e)},f.draw=function(){for(var e=f.count,h=f.fill2d,l=f.error2d,c=f.line2d,g=f.scatter2d,d=f.glText,p=f.select2d,r=f.selectBatch,t=f.unselectBatch,w=0;w<e;w++){h&&f.fillOrder[w]&&h.draw(f.fillOrder[w]);c&&f.lineOptions[w]&&
c.draw(w);l&&(f.errorXOptions[w]&&l.draw(w),f.errorYOptions[w]&&l.draw(w+e));if(g&&f.markerOptions[w])if(t[w].length){var x=q.repeat([],f.count);x[w]=t[w];g.draw(x)}else r[w].length||g.draw(w);d[w]&&f.textOptions[w]&&d[w].render()}p&&p.draw(r);f.dirty=!1},f.destroy=function(){f.fill2d&&f.fill2d.destroy&&f.fill2d.destroy();f.scatter2d&&f.scatter2d.destroy&&f.scatter2d.destroy();f.error2d&&f.error2d.destroy&&f.error2d.destroy();f.line2d&&f.line2d.destroy&&f.line2d.destroy();f.select2d&&f.select2d.destroy&&
f.select2d.destroy();f.glText&&f.glText.forEach(function(e){e.destroy&&e.destroy()});f.lineOptions=null;f.fillOptions=null;f.markerOptions=null;f.markerSelectedOptions=null;f.markerUnselectedOptions=null;f.errorXOptions=null;f.errorYOptions=null;f.textOptions=null;f.textSelectedOptions=null;f.textUnselectedOptions=null;f.selectBatch=null;f.unselectBatch=null;m._scene=null});f.dirty||q.extendFlat(f,b);return f}},{"../../lib":750}],1222:[function(a,G,C){var q=a("../scatter/subtypes"),n=a("./edit_style").styleTextSelection;
G.exports=function(m,f){var b=m.cd,k=[],e=b[0].trace,h=b[0].t,l=e._length,c=h.x,g=h.y,d=h._scene,p=h.index;if(!d)return k;var r=q.hasText(e),t=q.hasMarkers(e);if(!0!==e.visible||!t&&!r)return k;e=[];var w=[];if(!1!==f&&!f.degenerate)for(var x=0;x<l;x++)f.contains([h.xpx[x],h.ypx[x]],!1,x,m)?(e.push(x),k.push({pointNumber:x,x:c[x],y:g[x]})):w.push(x);t&&((m=d.scatter2d,e.length||w.length)?d.selectBatch[p].length||d.unselectBatch[p].length||(f=Array(d.count),f[p]=d.markerUnselectedOptions[p],m.update.apply(m,
f)):(f=Array(d.count),f[p]=d.markerOptions[p],m.update.apply(m,f)));d.selectBatch[p]=e;d.unselectBatch[p]=w;r&&n(b);return k}},{"../scatter/subtypes":1183,"./edit_style":1215}],1223:[function(a,G,C){C=a("../../plots/template_attributes").hovertemplateAttrs;var q=a("../../plots/template_attributes").texttemplateAttrs,n=a("../scattergeo/attributes"),m=a("../scatter/attributes"),f=a("../../plots/mapbox/layout_attributes"),b=a("../../plots/attributes"),k=a("../../components/colorscale/attributes"),e=
a("../../lib/extend").extendFlat;a=a("../../plot_api/edit_types").overrideAll;var h=n.line,l=n.marker;G.exports=a({lon:n.lon,lat:n.lat,mode:e({},m.mode,{dflt:"markers"}),text:e({},m.text,{}),texttemplate:q({editType:"plot"},{keys:["lat","lon","text"]}),hovertext:e({},m.hovertext,{}),line:{color:h.color,width:h.width},connectgaps:m.connectgaps,marker:e({symbol:{valType:"string",dflt:"circle",arrayOk:!0},angle:{valType:"number",dflt:"auto",arrayOk:!0},allowoverlap:{valType:"boolean",dflt:!1},opacity:l.opacity,
size:l.size,sizeref:l.sizeref,sizemin:l.sizemin,sizemode:l.sizemode},k("marker")),fill:n.fill,fillcolor:m.fillcolor,textfont:f.layers.symbol.textfont,textposition:f.layers.symbol.textposition,below:{valType:"string"},selected:{marker:m.selected.marker},unselected:{marker:m.unselected.marker},hoverinfo:e({},b.hoverinfo,{flags:["lon","lat","text","name"]}),hovertemplate:C()},"calc","nested")},{"../../components/colorscale/attributes":622,"../../lib/extend":740,"../../plot_api/edit_types":781,"../../plots/attributes":795,
"../../plots/mapbox/layout_attributes":858,"../../plots/template_attributes":877,"../scatter/attributes":1158,"../scattergeo/attributes":1200}],1224:[function(a,G,C){function q(){return{geojson:h.makeBlank(),layout:{visibility:"none"},paint:{}}}function n(x){var y=x[0].trace,A=y.marker,z=y.selectedpoints,F=k.isArrayOrTypedArray(A.color),D=k.isArrayOrTypedArray(A.size),u=k.isArrayOrTypedArray(A.opacity),B,I;F&&(I=l.hasColorscale(y,"marker")?l.makeColorScaleFuncFromTrace(A):k.identity);var J;D&&(J=
g(y));var N;u&&(N=function(R){R=b(R)?+k.constrain(R,0,1):0;return y.opacity*R});var M=[];for(B=0;B<x.length;B++){var E=x[B],L=E.lonlat;if(L[0]!==e){var Q={};I&&(Q.mcc=E.mcc=I(E.mc));J&&(Q.mrc=E.mrc=J(E.ms));N&&(Q.mo=N(E.mo));z&&(Q.selected=E.selected||0);M.push({type:"Feature",geometry:{type:"Point",coordinates:L},properties:Q})}}if(z){var S=c.makeSelectedPointStyleFns(y);for(B=0;B<M.length;B++)x=M[B].properties,S.selectedOpacityFn&&(x.mo=y.opacity*S.selectedOpacityFn(x)),S.selectedColorFn&&(x.mcc=
S.selectedColorFn(x)),S.selectedSizeFn&&(x.mrc=S.selectedSizeFn(x))}return{geojson:{type:"FeatureCollection",features:M},mcc:F||S&&S.selectedColorFn?{type:"identity",property:"mcc"}:A.color,mrc:D||S&&S.selectedSizeFn?{type:"identity",property:"mrc"}:A.size/2,mo:u||S&&S.selectedOpacityFn?{type:"identity",property:"mo"}:y.opacity*A.opacity}}function m(x,y){return k.isArrayOrTypedArray(x)?y?function(A){return b(x[A])?+x[A]:0}:function(A){return x[A]}:x?function(){return x}:f}function f(){return""}var b=
a("fast-isnumeric"),k=a("../../lib"),e=a("../../constants/numerical").BADNUM,h=a("../../lib/geojson_utils"),l=a("../../components/colorscale"),c=a("../../components/drawing"),g=a("../scatter/make_bubble_size_func"),d=a("../scatter/subtypes"),p=a("../../plots/mapbox/convert_text_opts"),r=a("../../components/fx/helpers").appendArrayPointValue,t=a("../../lib/svg_text_utils").NEWLINES,w=a("../../lib/svg_text_utils").BR_TAG_ALL;G.exports=function(x,y){var A=y[0].trace,z=!0===A.visible&&0!==A._length,F=
"none"!==A.fill,D=d.hasLines(A),u=d.hasMarkers(A),B=d.hasText(A),I=u&&"circle"===A.marker.symbol,J=u&&"circle"!==A.marker.symbol,N=q(),M=q(),E=q();u=q();var L={fill:N,line:M,circle:E,symbol:u};if(!z)return L;if(F||D)var Q=h.calcTraceToLineCoords(y);F&&(N.geojson=h.makePolygon(Q),N.layout.visibility="visible",k.extendFlat(N.paint,{"fill-color":A.fillcolor}));D&&(M.geojson=h.makeLine(Q),M.layout.visibility="visible",k.extendFlat(M.paint,{"line-width":A.line.width,"line-color":A.line.color,"line-opacity":A.opacity}));
I&&(z=n(y),E.geojson=z.geojson,E.layout.visibility="visible",k.extendFlat(E.paint,{"circle-color":z.mcc,"circle-radius":z.mrc,"circle-opacity":z.mo}));if(J||B){x=x._fullLayout;z=y[0].trace;D=z.marker||{};F=D.symbol;D=D.angle;F="circle"!==F?m(F):f;D="auto"!==D?m(D,!0):f;I=d.hasText(z)?m(z.text):f;E=[];for(Q=0;Q<y.length;Q++)if(N=y[Q],N.lonlat[0]!==e){if(M=z.texttemplate){M=Array.isArray(M)?M[Q]||"":M;var S=z._module.formatLabels(N,z,x),R={};r(R,z,N.i);M=k.texttemplateString(M,S,x._d3locale,R,N,z._meta||
{})}else M=I(Q);M&&(M=M.replace(t,"").replace(w,"\n"));E.push({type:"Feature",geometry:{type:"Point",coordinates:N.lonlat},properties:{symbol:F(Q),angle:D(Q),text:M}})}u.geojson={type:"FeatureCollection",features:E};k.extendFlat(u.layout,{visibility:"visible","icon-image":"{symbol}-15","text-field":"{text}"});J&&(k.extendFlat(u.layout,{"icon-size":A.marker.size/10}),"angle"in A.marker&&"auto"!==A.marker.angle&&k.extendFlat(u.layout,{"icon-rotate":{type:"identity",property:"angle"},"icon-rotation-alignment":"map"}),
u.layout["icon-allow-overlap"]=A.marker.allowoverlap,k.extendFlat(u.paint,{"icon-opacity":A.opacity*A.marker.opacity,"icon-color":A.marker.color}));B&&(y=p(A.textposition,(A.marker||{}).size),k.extendFlat(u.layout,{"text-size":A.textfont.size,"text-anchor":y.anchor,"text-offset":y.offset}),k.extendFlat(u.paint,{"text-color":A.textfont.color,"text-opacity":A.opacity}))}return L}},{"../../components/colorscale":627,"../../components/drawing":637,"../../components/fx/helpers":651,"../../constants/numerical":725,
"../../lib":750,"../../lib/geojson_utils":744,"../../lib/svg_text_utils":774,"../../plots/mapbox/convert_text_opts":855,"../scatter/make_bubble_size_func":1175,"../scatter/subtypes":1183,"fast-isnumeric":241}],1225:[function(a,G,C){function q(l,c,g){l=g("lon")||[];g=g("lat")||[];g=Math.min(l.length,g.length);return c._length=g}var n=a("../../lib"),m=a("../scatter/subtypes"),f=a("../scatter/marker_defaults"),b=a("../scatter/line_defaults"),k=a("../scatter/text_defaults"),e=a("../scatter/fillcolor_defaults"),
h=a("./attributes");G.exports=function(l,c,g,d){function p(t,w){return n.coerce(l,c,h,t,w)}if(q(l,c,p)){p("text");p("texttemplate");p("hovertext");p("hovertemplate");p("mode");p("below");m.hasLines(c)&&(b(l,c,g,d,p,{noDash:!0}),p("connectgaps"));if(m.hasMarkers(c)){f(l,c,g,d,p,{noLine:!0});p("marker.allowoverlap");p("marker.angle");var r=c.marker;"circle"!==r.symbol&&(n.isArrayOrTypedArray(r.size)&&(r.size=r.size[0]),n.isArrayOrTypedArray(r.color)&&(r.color=r.color[0]))}m.hasText(c)&&k(l,c,d,p,{noSelect:!0});
p("fill");"none"!==c.fill&&e(l,c,g,p);n.coerceSelectionMarkerOpacity(c,p)}else c.visible=!1}},{"../../lib":750,"../scatter/fillcolor_defaults":1166,"../scatter/line_defaults":1171,"../scatter/marker_defaults":1177,"../scatter/subtypes":1183,"../scatter/text_defaults":1184,"./attributes":1223}],1226:[function(a,G,C){G.exports=function(q,n){q.lon=n.lon;q.lat=n.lat;return q}},{}],1227:[function(a,G,C){var q=a("../../plots/cartesian/axes");G.exports=function(n,m,f){var b={};m=f[m.subplot]._subplot.mockAxis;
n=n.lonlat;b.lonLabel=q.tickText(m,m.c2l(n[0]),!0).text;b.latLabel=q.tickText(m,m.c2l(n[1]),!0).text;return b}},{"../../plots/cartesian/axes":799}],1228:[function(a,G,C){function q(e,h,l){if(!e.hovertemplate){var c=(h.hi||e.hoverinfo).split("+"),g=-1!==c.indexOf("all"),d=-1!==c.indexOf("lon"),p=-1!==c.indexOf("lat"),r=h.lonlat,t=[];g||d&&p?t.push("("+(r[0]+"°, ")+(r[1]+"°)")):d?t.push(l.lon+(r[0]+"°")):p&&t.push(l.lat+(r[1]+"°"));(g||-1!==c.indexOf("text"))&&b(h,e,t);return t.join("\x3cbr\x3e")}}
var n=a("../../components/fx"),m=a("../../lib"),f=a("../scatter/get_trace_color"),b=m.fillText,k=a("../../constants/numerical").BADNUM;G.exports=function(e,h,l){var c=e.cd,g=c[0].trace,d=e.xa,p=e.ya,r=e.subplot,t=360*(0<=h?Math.floor((h+180)/360):Math.ceil((h-180)/360)),w=h-t;n.getClosest(c,function(A){var z=A.lonlat;if(z[0]===k)return Infinity;var F=m.modHalf(z[0],360);z=z[1];var D=r.project([F,z]);z=D.x-d.c2p([w,z]);F=D.y-p.c2p([F,l]);A=Math.max(3,A.mrc||0);return Math.max(Math.sqrt(z*z+F*F)-A,
1-3/A)},e);if(!1!==e.index){h=c[e.index];var x=h.lonlat;x=[m.modHalf(x[0],360)+t,x[1]];t=d.c2p(x);x=p.c2p(x);var y=h.mrc||1;e.x0=t-y;e.x1=t+y;e.y0=x-y;e.y1=x+y;t={};t[g.subplot]={_subplot:r};t=g._module.formatLabels(h,g,t);e.lonLabel=t.lonLabel;e.latLabel=t.latLabel;e.color=f(g,h);e.extraText=q(g,h,c[0].t.labels);e.hovertemplate=g.hovertemplate;return[e]}}},{"../../components/fx":655,"../../constants/numerical":725,"../../lib":750,"../scatter/get_trace_color":1168}],1229:[function(a,G,C){G.exports=
{attributes:a("./attributes"),supplyDefaults:a("./defaults"),colorbar:a("../scatter/marker_colorbar"),formatLabels:a("./format_labels"),calc:a("../scattergeo/calc"),plot:a("./plot"),hoverPoints:a("./hover"),eventData:a("./event_data"),selectPoints:a("./select"),styleOnSelect:function(q,n){n&&n[0].trace._glTrace.update(n)},moduleType:"trace",name:"scattermapbox",basePlotModule:a("../../plots/mapbox"),categories:["mapbox","gl","symbols","showLegend","scatter-like"],meta:{}}},{"../../plots/mapbox":856,
"../scatter/marker_colorbar":1176,"../scattergeo/calc":1201,"./attributes":1223,"./defaults":1225,"./event_data":1226,"./format_labels":1227,"./hover":1228,"./plot":1230,"./select":1231}],1230:[function(a,G,C){function q(b,k){this.type="scattermapbox";this.subplot=b;this.uid=k;this.sourceIds={fill:"source-"+k+"-fill",line:"source-"+k+"-line",circle:"source-"+k+"-circle",symbol:"source-"+k+"-symbol"};this.layerIds={fill:m+k+"-fill",line:m+k+"-line",circle:m+k+"-circle",symbol:m+k+"-symbol"};this.below=
null}var n=a("./convert"),m=a("../../plots/mapbox/constants").traceLayerPrefix,f=["fill","line","circle","symbol"];a=q.prototype;a.addSource=function(b,k){this.subplot.map.addSource(this.sourceIds[b],{type:"geojson",data:k.geojson})};a.setSourceData=function(b,k){this.subplot.map.getSource(this.sourceIds[b]).setData(k.geojson)};a.addLayer=function(b,k,e){this.subplot.addLayer({type:b,id:this.layerIds[b],source:this.sourceIds[b],layout:k.layout,paint:k.paint},e)};a.update=function(b){var k=this.subplot,
e=k.map,h=n(k.gd,b),l=k.belowLookup["trace-"+this.uid],c;if(l!==this.below){for(c=f.length-1;0<=c;c--){var g=f[c];e.removeLayer(this.layerIds[g])}for(c=0;c<f.length;c++)g=f[c],e=h[g],this.addLayer(g,e,l);this.below=l}for(c=0;c<f.length;c++)g=f[c],e=h[g],k.setOptions(this.layerIds[g],"setLayoutProperty",e.layout),"visible"===e.layout.visibility&&(this.setSourceData(g,e),k.setOptions(this.layerIds[g],"setPaintProperty",e.paint));b[0].trace._glTrace=this};a.dispose=function(){for(var b=this.subplot.map,
k=f.length-1;0<=k;k--){var e=f[k];b.removeLayer(this.layerIds[e]);b.removeSource(this.sourceIds[e])}};G.exports=function(b,k){var e=k[0].trace,h=new q(b,e.uid),l=n(b.gd,k);b=h.below=b.belowLookup["trace-"+e.uid];for(e=0;e<f.length;e++){var c=f[e],g=l[c];h.addSource(c,g);h.addLayer(c,g,b)}return k[0].trace._glTrace=h}},{"../../plots/mapbox/constants":854,"./convert":1224}],1231:[function(a,G,C){var q=a("../../lib"),n=a("../scatter/subtypes"),m=a("../../constants/numerical").BADNUM;G.exports=function(f,
b){var k=f.cd,e=f.xaxis,h=f.yaxis,l=[],c;if(!n.hasMarkers(k[0].trace))return[];if(!1===b)for(c=0;c<k.length;c++)k[c].selected=0;else for(c=0;c<k.length;c++){var g=k[c],d=g.lonlat;if(d[0]!==m){var p=[q.modHalf(d[0],360),d[1]];p=[e.c2p(p),h.c2p(p)];b.contains(p,null,c,f)?(l.push({pointNumber:c,lon:d[0],lat:d[1]}),g.selected=1):g.selected=0}}return l}},{"../../constants/numerical":725,"../../lib":750,"../scatter/subtypes":1183}],1232:[function(a,G,C){C=a("../../plots/template_attributes").hovertemplateAttrs;
var q=a("../../plots/template_attributes").texttemplateAttrs,n=a("../../lib/extend").extendFlat,m=a("../scatter/attributes");a=a("../../plots/attributes");var f=m.line;G.exports={mode:m.mode,r:{valType:"data_array",editType:"calc+clearAxisTypes"},theta:{valType:"data_array",editType:"calc+clearAxisTypes"},r0:{valType:"any",dflt:0,editType:"calc+clearAxisTypes"},dr:{valType:"number",dflt:1,editType:"calc"},theta0:{valType:"any",dflt:0,editType:"calc+clearAxisTypes"},dtheta:{valType:"number",editType:"calc"},
thetaunit:{valType:"enumerated",values:["radians","degrees","gradians"],dflt:"degrees",editType:"calc+clearAxisTypes"},text:m.text,texttemplate:q({editType:"plot"},{keys:["r","theta","text"]}),hovertext:m.hovertext,line:{color:f.color,width:f.width,dash:f.dash,shape:n({},f.shape,{values:["linear","spline"]}),smoothing:f.smoothing,editType:"calc"},connectgaps:m.connectgaps,marker:m.marker,cliponaxis:n({},m.cliponaxis,{dflt:!1}),textposition:m.textposition,textfont:m.textfont,fill:n({},m.fill,{values:["none",
"toself","tonext"],dflt:"none"}),fillcolor:m.fillcolor,hoverinfo:n({},a.hoverinfo,{flags:["r","theta","text","name"]}),hoveron:m.hoveron,hovertemplate:C(),selected:m.selected,unselected:m.unselected}},{"../../lib/extend":740,"../../plots/attributes":795,"../../plots/template_attributes":877,"../scatter/attributes":1158}],1233:[function(a,G,C){var q=a("fast-isnumeric"),n=a("../../constants/numerical").BADNUM,m=a("../../plots/cartesian/axes"),f=a("../scatter/colorscale_calc"),b=a("../scatter/arrays_to_calcdata"),
k=a("../scatter/calc_selection"),e=a("../scatter/calc").calcMarkerSize;G.exports=function(h,l){var c=h._fullLayout,g=l.subplot,d=c[g].radialaxis;g=c[g].angularaxis;c=d.makeCalcdata(l,"r");var p=g.makeCalcdata(l,"theta"),r=l._length;g=Array(r);for(var t=0;t<r;t++){var w=c[t],x=p[t],y=g[t]={};q(w)&&q(x)?(y.r=w,y.theta=x):y.r=n}p=e(l,r);l._extremes.x=m.findExtremes(d,c,{ppad:p});f(h,l);b(g,l);k(g,l);return g}},{"../../constants/numerical":725,"../../plots/cartesian/axes":799,"../scatter/arrays_to_calcdata":1157,
"../scatter/calc":1159,"../scatter/calc_selection":1160,"../scatter/colorscale_calc":1161,"fast-isnumeric":241}],1234:[function(a,G,C){function q(g,d,p,r){g=r("r");p=r("theta");if(g)p?g=Math.min(g.length,p.length):(g=g.length,r("theta0"),r("dtheta"));else{if(!p)return 0;g=d.theta.length;r("r0");r("dr")}return d._length=g}var n=a("../../lib"),m=a("../scatter/subtypes"),f=a("../scatter/marker_defaults"),b=a("../scatter/line_defaults"),k=a("../scatter/line_shape_defaults"),e=a("../scatter/text_defaults"),
h=a("../scatter/fillcolor_defaults"),l=a("../scatter/constants").PTS_LINESONLY,c=a("./attributes");G.exports={handleRThetaDefaults:q,supplyDefaults:function(g,d,p,r){function t(x,y){return n.coerce(g,d,c,x,y)}var w=q(g,d,r,t);if(w){t("thetaunit");t("mode",w<l?"lines+markers":"lines");t("text");t("hovertext");"fills"!==d.hoveron&&t("hovertemplate");m.hasLines(d)&&(b(g,d,p,r,t),k(g,d,t),t("connectgaps"));m.hasMarkers(d)&&f(g,d,p,r,t,{gradient:!0});m.hasText(d)&&(t("texttemplate"),e(g,d,r,t));r=[];if(m.hasMarkers(d)||
m.hasText(d))t("cliponaxis"),t("marker.maxdisplayed"),r.push("points");t("fill");"none"!==d.fill&&(h(g,d,p,t),m.hasLines(d)||k(g,d,t));"tonext"!==d.fill&&"toself"!==d.fill||r.push("fills");t("hoveron",r.join("+")||"points");n.coerceSelectionMarkerOpacity(d,t)}else d.visible=!1}}},{"../../lib":750,"../scatter/constants":1162,"../scatter/fillcolor_defaults":1166,"../scatter/line_defaults":1171,"../scatter/line_shape_defaults":1173,"../scatter/marker_defaults":1177,"../scatter/subtypes":1183,"../scatter/text_defaults":1184,
"./attributes":1232}],1235:[function(a,G,C){var q=a("../../lib"),n=a("../../plots/cartesian/axes");G.exports=function(m,f,b){var k={},e=b[f.subplot]._subplot;e?(f=e.radialAxis,e=e.angularAxis):(e=b[f.subplot],f=e.radialaxis,e=e.angularaxis);b=f.c2l(m.r);k.rLabel=n.tickText(f,b,!0).text;m="degrees"===e.thetaunit?q.rad2deg(m.theta):m.theta;k.thetaLabel=n.tickText(e,m,!0).text;return k}},{"../../lib":750,"../../plots/cartesian/axes":799}],1236:[function(a,G,C){function q(m,f,b,k){var e=b.radialAxis,
h=b.angularAxis;e._hovertitle="r";h._hovertitle="θ";var l={};l[f.subplot]={_subplot:b};b=f._module.formatLabels(m,f,l);k.rLabel=b.rLabel;k.thetaLabel=b.thetaLabel;b=m.hi||f.hoverinfo;m=[];f.hovertemplate||(f=b.split("+"),-1!==f.indexOf("all")&&(f=["r","theta","text"]),-1!==f.indexOf("r")&&m.push(e._hovertitle+": "+k.rLabel),-1!==f.indexOf("theta")&&m.push(h._hovertitle+": "+k.thetaLabel),-1!==f.indexOf("text")&&k.text&&(m.push(k.text),delete k.text),k.extraText=m.join("\x3cbr\x3e"))}var n=a("../scatter/hover");
G.exports={hoverPoints:function(m,f,b,k){if((f=n(m,f,b,k))&&!1!==f[0].index){b=f[0];if(void 0===b.index)return f;m=m.subplot;k=b.cd[b.index];var e=b.trace;if(m.isPtInside(k))return b.xLabelVal=void 0,b.yLabelVal=void 0,q(k,e,m,b),b.hovertemplate=e.hovertemplate,f}},makeHoverPointText:q}},{"../scatter/hover":1169}],1237:[function(a,G,C){G.exports={moduleType:"trace",name:"scatterpolar",basePlotModule:a("../../plots/polar"),categories:["polar","symbols","showLegend","scatter-like"],attributes:a("./attributes"),
supplyDefaults:a("./defaults").supplyDefaults,colorbar:a("../scatter/marker_colorbar"),formatLabels:a("./format_labels"),calc:a("./calc"),plot:a("./plot"),style:a("../scatter/style").style,styleOnSelect:a("../scatter/style").styleOnSelect,hoverPoints:a("./hover").hoverPoints,selectPoints:a("../scatter/select"),meta:{}}},{"../../plots/polar":865,"../scatter/marker_colorbar":1176,"../scatter/select":1180,"../scatter/style":1182,"./attributes":1232,"./calc":1233,"./defaults":1234,"./format_labels":1235,
"./hover":1236,"./plot":1238}],1238:[function(a,G,C){var q=a("../scatter/plot"),n=a("../../constants/numerical").BADNUM;G.exports=function(m,f,b){var k=f.layers.frontplot.select("g.scatterlayer"),e={xaxis:f.xaxis,yaxis:f.yaxis,plot:f.framework,layerClipId:f._hasClipOnAxisFalse?f.clipIds.forTraces:null},h=f.radialAxis;f=f.angularAxis;for(var l=0;l<b.length;l++)for(var c=b[l],g=0;g<c.length;g++){var d=c[g],p=d.r;if(p===n)d.x=d.y=n;else{p=h.c2g(p);var r=f.c2g(d.theta);d.x=p*Math.cos(r);d.y=p*Math.sin(r)}}q(m,
e,b,k)}},{"../../constants/numerical":725,"../scatter/plot":1179}],1239:[function(a,G,C){C=a("../scatterpolar/attributes");var q=a("../scattergl/attributes");a=a("../../plots/template_attributes").texttemplateAttrs;G.exports={mode:C.mode,r:C.r,theta:C.theta,r0:C.r0,dr:C.dr,theta0:C.theta0,dtheta:C.dtheta,thetaunit:C.thetaunit,text:C.text,texttemplate:a({editType:"plot"},{keys:["r","theta","text"]}),hovertext:C.hovertext,hovertemplate:C.hovertemplate,line:q.line,connectgaps:q.connectgaps,marker:q.marker,
fill:q.fill,fillcolor:q.fillcolor,textposition:q.textposition,textfont:q.textfont,hoverinfo:C.hoverinfo,selected:C.selected,unselected:C.unselected}},{"../../plots/template_attributes":877,"../scattergl/attributes":1210,"../scatterpolar/attributes":1232}],1240:[function(a,G,C){var q=a("../scatter/colorscale_calc"),n=a("../scatter/calc").calcMarkerSize,m=a("../scattergl/convert"),f=a("../../plots/cartesian/axes"),b=a("../scattergl/constants").TOO_MANY_POINTS;G.exports=function(k,e){var h=k._fullLayout,
l=e.subplot,c=h[l].radialaxis;l=h[l].angularaxis;h=e._r=c.makeCalcdata(e,"r");var g=e._theta=l.makeCalcdata(e,"theta");l=e._length;var d={};l<h.length&&(h=h.slice(0,l));l<g.length&&(g=g.slice(0,l));d.r=h;d.theta=g;q(k,e);k=d.opts=m.style(k,e);var p;l<b?p=n(e,l):k.marker&&(p=2*(k.marker.sizeAvg||Math.max(k.marker.size,3)));e._extremes.x=f.findExtremes(c,h,{ppad:p});return[{x:!1,y:!1,t:d,trace:e}]}},{"../../plots/cartesian/axes":799,"../scatter/calc":1159,"../scatter/colorscale_calc":1161,"../scattergl/constants":1212,
"../scattergl/convert":1213}],1241:[function(a,G,C){var q=a("../../lib"),n=a("../scatter/subtypes"),m=a("../scatterpolar/defaults").handleRThetaDefaults,f=a("../scatter/marker_defaults"),b=a("../scatter/line_defaults"),k=a("../scatter/text_defaults"),e=a("../scatter/fillcolor_defaults"),h=a("../scatter/constants").PTS_LINESONLY,l=a("./attributes");G.exports=function(c,g,d,p){function r(w,x){return q.coerce(c,g,l,w,x)}var t=m(c,g,p,r);t?(r("thetaunit"),r("mode",t<h?"lines+markers":"lines"),r("text"),
r("hovertext"),"fills"!==g.hoveron&&r("hovertemplate"),n.hasLines(g)&&(b(c,g,d,p,r),r("connectgaps")),n.hasMarkers(g)&&f(c,g,d,p,r),n.hasText(g)&&(r("texttemplate"),k(c,g,p,r)),r("fill"),"none"!==g.fill&&e(c,g,d,r),q.coerceSelectionMarkerOpacity(g,r)):g.visible=!1}},{"../../lib":750,"../scatter/constants":1162,"../scatter/fillcolor_defaults":1166,"../scatter/line_defaults":1171,"../scatter/marker_defaults":1177,"../scatter/subtypes":1183,"../scatter/text_defaults":1184,"../scatterpolar/defaults":1234,
"./attributes":1239}],1242:[function(a,G,C){var q=a("../scatterpolar/format_labels");G.exports=function(n,m,f){var b=n.i;"r"in n||(n.r=m._r[b]);"theta"in n||(n.theta=m._theta[b]);return q(n,m,f)}},{"../scatterpolar/format_labels":1235}],1243:[function(a,G,C){var q=a("../scattergl/hover"),n=a("../scatterpolar/hover").makeHoverPointText;G.exports={hoverPoints:function(m,f,b,k){var e=m.cd[0].t,h=e.r;e=e.theta;if((f=q.hoverPoints(m,f,b,k))&&!1!==f[0].index){b=f[0];if(void 0===b.index)return f;m=m.subplot;
k=b.cd[b.index];var l=b.trace;k.r=h[b.index];k.theta=e[b.index];if(m.isPtInside(k))return b.xLabelVal=void 0,b.yLabelVal=void 0,n(k,l,m,b),f}}}},{"../scattergl/hover":1218,"../scatterpolar/hover":1236}],1244:[function(a,G,C){G.exports={moduleType:"trace",name:"scatterpolargl",basePlotModule:a("../../plots/polar"),categories:"gl regl polar symbols showLegend scatter-like".split(" "),attributes:a("./attributes"),supplyDefaults:a("./defaults"),colorbar:a("../scatter/marker_colorbar"),formatLabels:a("./format_labels"),
calc:a("./calc"),plot:a("./plot"),hoverPoints:a("./hover").hoverPoints,selectPoints:a("../scattergl/select"),meta:{}}},{"../../plots/polar":865,"../scatter/marker_colorbar":1176,"../scattergl/select":1222,"./attributes":1239,"./calc":1240,"./defaults":1241,"./format_labels":1242,"./hover":1243,"./plot":1245}],1245:[function(a,G,C){var q=a("@plotly/point-cluster"),n=a("fast-isnumeric"),m=a("../scattergl/plot"),f=a("../scattergl/scene_update"),b=a("../scattergl/convert"),k=a("../../lib"),e=a("../scattergl/constants").TOO_MANY_POINTS;
G.exports=function(h,l,c){if(c.length){var g=l.radialAxis,d=l.angularAxis,p=f(h,l);c.forEach(function(r){if(r&&r[0]&&r[0].trace){var t=r[0];r=t.trace;t=t.t;var w=r._length,x=t.r,y=t.theta,A=t.opts,z,F=x.slice(),D=y.slice();for(z=0;z<x.length;z++)l.isPtInside({r:x[z],theta:y[z]})||(F[z]=NaN,D[z]=NaN);var u=Array(2*w),B=Array(w),I=Array(w);for(z=0;z<w;z++){var J=F[z];if(n(J)){var N=g.c2g(J);var M=d.c2g(D[z],r.thetaunit);J=N*Math.cos(M);N*=Math.sin(M)}else J=N=NaN;B[z]=u[2*z]=J;I[z]=u[2*z+1]=N}t.tree=
q(u);A.marker&&w>=e&&(A.marker.cluster=t.tree);A.marker&&(A.markerSel.positions=A.markerUnsel.positions=A.marker.positions=u);A.line&&1<u.length&&k.extendFlat(A.line,b.linePositions(h,r,u));A.text&&(k.extendFlat(A.text,{positions:u},b.textPosition(h,r,A.text,A.marker)),k.extendFlat(A.textSel,{positions:u},b.textPosition(h,r,A.text,A.markerSel)),k.extendFlat(A.textUnsel,{positions:u},b.textPosition(h,r,A.text,A.markerUnsel)));A.fill&&!p.fill2d&&(p.fill2d=!0);A.marker&&!p.scatter2d&&(p.scatter2d=!0);
A.line&&!p.line2d&&(p.line2d=!0);A.text&&!p.glText&&(p.glText=!0);p.lineOptions.push(A.line);p.fillOptions.push(A.fill);p.markerOptions.push(A.marker);p.markerSelectedOptions.push(A.markerSel);p.markerUnselectedOptions.push(A.markerUnsel);p.textOptions.push(A.text);p.textSelectedOptions.push(A.textSel);p.textUnselectedOptions.push(A.textUnsel);p.selectBatch.push([]);p.unselectBatch.push([]);t.x=B;t.y=I;t.rawx=B;t.rawy=I;t.r=x;t.theta=y;t.positions=u;t._scene=p;t.index=p.count;p.count++}});return m(h,
l,c)}}},{"../../lib":750,"../scattergl/constants":1212,"../scattergl/convert":1213,"../scattergl/plot":1220,"../scattergl/scene_update":1221,"@plotly/point-cluster":57,"fast-isnumeric":241}],1246:[function(a,G,C){C=a("../../plots/template_attributes").hovertemplateAttrs;var q=a("../../plots/template_attributes").texttemplateAttrs,n=a("../scatter/attributes"),m=a("../../plots/attributes"),f=a("../../components/colorscale/attributes"),b=a("../../components/drawing/attributes").dash;a=a("../../lib/extend").extendFlat;
var k=n.marker,e=n.line,h=k.line;G.exports={a:{valType:"data_array",editType:"calc"},b:{valType:"data_array",editType:"calc"},c:{valType:"data_array",editType:"calc"},sum:{valType:"number",dflt:0,min:0,editType:"calc"},mode:a({},n.mode,{dflt:"markers"}),text:a({},n.text,{}),texttemplate:q({editType:"plot"},{keys:["a","b","c","text"]}),hovertext:a({},n.hovertext,{}),line:{color:e.color,width:e.width,dash:b,shape:a({},e.shape,{values:["linear","spline"]}),smoothing:e.smoothing,editType:"calc"},connectgaps:n.connectgaps,
cliponaxis:n.cliponaxis,fill:a({},n.fill,{values:["none","toself","tonext"],dflt:"none"}),fillcolor:n.fillcolor,marker:a({symbol:k.symbol,opacity:k.opacity,maxdisplayed:k.maxdisplayed,size:k.size,sizeref:k.sizeref,sizemin:k.sizemin,sizemode:k.sizemode,line:a({width:h.width,editType:"calc"},f("marker.line")),gradient:k.gradient,editType:"calc"},f("marker")),textfont:n.textfont,textposition:n.textposition,selected:n.selected,unselected:n.unselected,hoverinfo:a({},m.hoverinfo,{flags:["a","b","c","text",
"name"]}),hoveron:n.hoveron,hovertemplate:C()}},{"../../components/colorscale/attributes":622,"../../components/drawing/attributes":636,"../../lib/extend":740,"../../plots/attributes":795,"../../plots/template_attributes":877,"../scatter/attributes":1158}],1247:[function(a,G,C){var q=a("fast-isnumeric"),n=a("../scatter/colorscale_calc"),m=a("../scatter/arrays_to_calcdata"),f=a("../scatter/calc_selection"),b=a("../scatter/calc").calcMarkerSize,k=["a","b","c"],e={a:["b","c"],b:["a","c"],c:["a","b"]};
G.exports=function(h,l){var c=h._fullLayout[l.subplot].sum,g=l.sum||c,d={a:l.a,b:l.b,c:l.c},p,r;for(p=0;p<k.length;p++){var t=k[p];if(!d[t]){var w=d[e[t][0]];var x=d[e[t][1]];var y=Array(w.length);for(r=0;r<w.length;r++)y[r]=g-w[r]-x[r];d[t]=y}}g=l._length;r=Array(g);for(p=0;p<g;p++)if(t=d.a[p],y=d.b[p],w=d.c[p],q(t)&&q(y)&&q(w)){t=+t;y=+y;w=+w;x=c/(t+y+w);1!==x&&(t*=x,y*=x,w*=x);var A=t;x=w-y;r[p]={x:x,y:A,a:t,b:y,c:w}}else r[p]={x:!1,y:!1};b(l,g);n(h,l);m(r,l);f(r,l);return r}},{"../scatter/arrays_to_calcdata":1157,
"../scatter/calc":1159,"../scatter/calc_selection":1160,"../scatter/colorscale_calc":1161,"fast-isnumeric":241}],1248:[function(a,G,C){var q=a("../../lib"),n=a("../scatter/constants"),m=a("../scatter/subtypes"),f=a("../scatter/marker_defaults"),b=a("../scatter/line_defaults"),k=a("../scatter/line_shape_defaults"),e=a("../scatter/text_defaults"),h=a("../scatter/fillcolor_defaults"),l=a("./attributes");G.exports=function(c,g,d,p){function r(A,z){return q.coerce(c,g,l,A,z)}var t=r("a"),w=r("b"),x=r("c");
if(t){var y=t.length;w?(y=Math.min(y,w.length),x&&(y=Math.min(y,x.length))):y=x?Math.min(y,x.length):0}else w&&x&&(y=Math.min(w.length,x.length));if(y){g._length=y;r("sum");r("text");r("hovertext");"fills"!==g.hoveron&&r("hovertemplate");r("mode",y<n.PTS_LINESONLY?"lines+markers":"lines");m.hasLines(g)&&(b(c,g,d,p,r),k(c,g,r),r("connectgaps"));m.hasMarkers(g)&&f(c,g,d,p,r,{gradient:!0});m.hasText(g)&&(r("texttemplate"),e(c,g,p,r));p=[];if(m.hasMarkers(g)||m.hasText(g))r("cliponaxis"),r("marker.maxdisplayed"),
p.push("points");r("fill");"none"!==g.fill&&(h(c,g,d,r),m.hasLines(g)||k(c,g,r));"tonext"!==g.fill&&"toself"!==g.fill||p.push("fills");r("hoveron",p.join("+")||"points");q.coerceSelectionMarkerOpacity(g,r)}else g.visible=!1}},{"../../lib":750,"../scatter/constants":1162,"../scatter/fillcolor_defaults":1166,"../scatter/line_defaults":1171,"../scatter/line_shape_defaults":1173,"../scatter/marker_defaults":1177,"../scatter/subtypes":1183,"../scatter/text_defaults":1184,"./attributes":1246}],1249:[function(a,
G,C){G.exports=function(q,n,m,f,b){n.xa&&(q.xaxis=n.xa);n.ya&&(q.yaxis=n.ya);f[b]?(n=f[b],q.a=n.a,q.b=n.b,q.c=n.c):(q.a=n.a,q.b=n.b,q.c=n.c);return q}},{}],1250:[function(a,G,C){var q=a("../../plots/cartesian/axes");G.exports=function(n,m,f){var b={};m=f[m.subplot]._subplot;b.aLabel=q.tickText(m.aaxis,n.a,!0).text;b.bLabel=q.tickText(m.baxis,n.b,!0).text;b.cLabel=q.tickText(m.caxis,n.c,!0).text;return b}},{"../../plots/cartesian/axes":799}],1251:[function(a,G,C){var q=a("../scatter/hover");G.exports=
function(n,m,f,b){if((m=q(n,m,f,b))&&!1!==m[0].index){f=m[0];if(void 0===f.index)return b=n.xa._length,n=b*(1-f.y0/n.ya._length)/2,b-=n,f.x0=Math.max(Math.min(f.x0,b),n),f.x1=Math.max(Math.min(f.x1,b),n),m;var k=f.cd[f.index];n=f.trace;b=f.subplot;f.a=k.a;f.b=k.b;f.c=k.c;f.xLabelVal=void 0;f.yLabelVal=void 0;var e={};e[n.subplot]={_subplot:b};e=n._module.formatLabels(k,n,e);f.aLabel=e.aLabel;f.bLabel=e.bLabel;f.cLabel=e.cLabel;e=k.hi||n.hoverinfo;k=[];n.hovertemplate||(e=e.split("+"),-1!==e.indexOf("all")&&
(e=["a","b","c"]),-1!==e.indexOf("a")&&k.push(b.aaxis._hovertitle+": "+f.aLabel),-1!==e.indexOf("b")&&k.push(b.baxis._hovertitle+": "+f.bLabel),-1!==e.indexOf("c")&&k.push(b.caxis._hovertitle+": "+f.cLabel));f.extraText=k.join("\x3cbr\x3e");f.hovertemplate=n.hovertemplate;return m}}},{"../scatter/hover":1169}],1252:[function(a,G,C){G.exports={attributes:a("./attributes"),supplyDefaults:a("./defaults"),colorbar:a("../scatter/marker_colorbar"),formatLabels:a("./format_labels"),calc:a("./calc"),plot:a("./plot"),
style:a("../scatter/style").style,styleOnSelect:a("../scatter/style").styleOnSelect,hoverPoints:a("./hover"),selectPoints:a("../scatter/select"),eventData:a("./event_data"),moduleType:"trace",name:"scatterternary",basePlotModule:a("../../plots/ternary"),categories:["ternary","symbols","showLegend","scatter-like"],meta:{}}},{"../../plots/ternary":878,"../scatter/marker_colorbar":1176,"../scatter/select":1180,"../scatter/style":1182,"./attributes":1246,"./calc":1247,"./defaults":1248,"./event_data":1249,
"./format_labels":1250,"./hover":1251,"./plot":1253}],1253:[function(a,G,C){var q=a("../scatter/plot");G.exports=function(n,m,f){var b=m.plotContainer;b.select(".scatterlayer").selectAll("*").remove();b={xaxis:m.xaxis,yaxis:m.yaxis,plot:b,layerClipId:m._hasClipOnAxisFalse?m.clipIdRelative:null};m=m.layers.frontplot.select("g.scatterlayer");q(n,b,f,m)}},{"../scatter/plot":1179}],1254:[function(a,G,C){function q(h){return{valType:"info_array",freeLength:!0,editType:"calc",items:{valType:"subplotid",
regex:b[h],editType:"plot"}}}var n=a("../scatter/attributes"),m=a("../../components/colorscale/attributes");C=a("../../plots/template_attributes").hovertemplateAttrs;var f=a("../scattergl/attributes"),b=a("../../plots/cartesian/constants").idRegex,k=a("../../plot_api/plot_template").templatedArray;a=a("../../lib/extend").extendFlat;n=n.marker;var e=n.line;e=a(m("marker.line",{editTypeOverride:"calc"}),{width:a({},e.width,{editType:"calc"}),editType:"calc"});m=a(m("marker"),{symbol:n.symbol,size:a({},
n.size,{editType:"markerSize"}),sizeref:n.sizeref,sizemin:n.sizemin,sizemode:n.sizemode,opacity:n.opacity,colorbar:n.colorbar,line:e,editType:"calc"});m.color.editType=m.cmin.editType=m.cmax.editType="style";G.exports={dimensions:k("dimension",{visible:{valType:"boolean",dflt:!0,editType:"calc"},label:{valType:"string",editType:"calc"},values:{valType:"data_array",editType:"calc+clearAxisTypes"},axis:{type:{valType:"enumerated",values:["linear","log","date","category"],editType:"calc+clearAxisTypes"},
matches:{valType:"boolean",dflt:!1,editType:"calc"},editType:"calc+clearAxisTypes"},editType:"calc+clearAxisTypes"}),text:a({},f.text,{}),hovertext:a({},f.hovertext,{}),hovertemplate:C(),marker:m,xaxes:q("x"),yaxes:q("y"),diagonal:{visible:{valType:"boolean",dflt:!0,editType:"calc"},editType:"calc"},showupperhalf:{valType:"boolean",dflt:!0,editType:"calc"},showlowerhalf:{valType:"boolean",dflt:!0,editType:"calc"},selected:{marker:f.selected.marker,editType:"calc"},unselected:{marker:f.unselected.marker,
editType:"calc"},opacity:f.opacity}},{"../../components/colorscale/attributes":622,"../../lib/extend":740,"../../plot_api/plot_template":788,"../../plots/cartesian/constants":805,"../../plots/template_attributes":877,"../scatter/attributes":1158,"../scattergl/attributes":1210}],1255:[function(a,G,C){function q(c){var g=c._fullLayout,d=g._glcanvas.data()[0].regl,p=g._splomGrid;p||(p=g._splomGrid=m(d));p.update(n(c))}function n(c){function g(I,J,N,M,E,L){var Q=J[I+"color"];I=J[I+"width"];J=String(Q+
I);J in t?t[J].data.push(NaN,NaN,N,M,E,L):t[J]={data:[N,M,E,L],join:"rect",thickness:I,color:Q,viewport:r,range:r,overlay:!1}}var d=c._fullLayout,p=d._size,r=[0,0,d.width,d.height],t={},w;for(w in d._splomSubplots){var x=d._plots[w],y=x.xaxis;x=x.yaxis;var A=y._gridVals,z=x._gridVals,F=p.b+x.domain[0]*p.h,D=-x._m,u=-D*x.r2l(x.range[0],x.calendar);if(y.showgrid)for(w=0;w<A.length;w++){var B=y._offset+y.l2p(A[w].x);g("grid",y,B,F,B,F+x._length)}if(x.showgrid)for(w=0;w<z.length;w++)A=F+u+D*z[w].x,g("grid",
x,y._offset,A,y._offset+y._length,A);l(c,y,x)&&(B=y._offset+y.l2p(0),g("zeroline",y,B,F,B,F+x._length));l(c,x,y)&&(A=F+u+0,g("zeroline",x,y._offset,A,y._offset+y._length,A))}c=[];for(w in t)c.push(t[w]);return c}var m=a("regl-line2d"),f=a("../../registry"),b=a("../../lib/prepare_regl"),k=a("../../plots/get_data").getModuleCalcData,e=a("../../plots/cartesian"),h=a("../../plots/cartesian/axis_ids").getFromId,l=a("../../plots/cartesian/axes").shouldShowZeroLine;G.exports={name:"splom",attr:e.attr,attrRegex:e.attrRegex,
layoutAttributes:e.layoutAttributes,supplyLayoutDefaults:e.supplyLayoutDefaults,drawFramework:e.drawFramework,plot:function(c){var g=c._fullLayout,d=f.getModule("splom"),p=k(c.calcdata,d)[0];b(c,["ANGLE_instanced_arrays","OES_element_index_uint"])&&(g._hasOnlyLargeSploms&&q(c),d.plot(c,{},p))},drag:function(c){var g=c.calcdata,d=c._fullLayout;d._hasOnlyLargeSploms&&q(c);for(var p=0;p<g.length;p++){var r=g[p][0].trace,t=d._splomScenes[r.uid];if("splom"===r.type&&t&&t.matrix){for(var w=c,x=r._visibleDims,
y=t.viewOpts.ranges=Array(t.matrixOptions.data.length),A=0;A<x.length;A++){var z=x[A],F=y[A]=Array(4),D=h(w,r._diag[z][0]);D&&(F[0]=D.r2l(D.range[0]),F[2]=D.r2l(D.range[1]));if(z=h(w,r._diag[z][1]))F[1]=z.r2l(z.range[0]),F[3]=z.r2l(z.range[1])}t.selectBatch.length||t.unselectBatch.length?t.matrix.update({ranges:y},{ranges:y}):t.matrix.update({ranges:y})}}},updateGrid:q,clean:function(c,g,d,p){var r={},t;if(p._splomScenes){for(t=0;t<c.length;t++){var w=c[t];"splom"===w.type&&(r[w.uid]=1)}for(t=0;t<
d.length;t++)if(w=d[t],!r[w.uid]){var x=p._splomScenes[w.uid];x&&x.destroy&&x.destroy();p._splomScenes[w.uid]=null;delete p._splomScenes[w.uid]}}0===Object.keys(p._splomScenes||{}).length&&delete p._splomScenes;p._splomGrid&&!g._hasOnlyLargeSploms&&p._hasOnlyLargeSploms&&(p._splomGrid.destroy(),p._splomGrid=null,delete p._splomGrid);e.clean(c,g,d,p)},updateFx:e.updateFx,toSVG:e.toSVG}},{"../../lib/prepare_regl":763,"../../plots/cartesian":812,"../../plots/cartesian/axes":799,"../../plots/cartesian/axis_ids":802,
"../../plots/get_data":836,"../../registry":882,"regl-line2d":509}],1256:[function(a,G,C){var q=a("../../lib"),n=a("../../plots/cartesian/axis_ids"),m=a("../scatter/calc").calcMarkerSize,f=a("../scatter/calc").calcAxisExpansion,b=a("../scatter/colorscale_calc"),k=a("../scattergl/convert").markerSelection,e=a("../scattergl/convert").markerStyle,h=a("./scene_update"),l=a("../../constants/numerical").BADNUM,c=a("../scattergl/constants").TOO_MANY_POINTS;G.exports=function(g,d){function p(I,J){J=I.makeCalcdata({v:J.values,
vcalendar:d.calendar},"v");for(var N=0;N<J.length;N++)J[N]=J[N]===l?NaN:J[N];x.push(J);y.push("log"===I.type?q.simpleMap(J,I.c2l):J)}var r=d.dimensions,t=d._length,w={},x=w.cdata=[],y=w.data=[],A=d._visibleDims=[],z;for(z=0;z<r.length;z++){var F=r[z];if(F.visible){var D=n.getFromId(g,d._diag[z][0]);var u=n.getFromId(g,d._diag[z][1]);D&&u&&D.type!==u.type?q.log("Skipping splom dimension "+z+" with conflicting axis types"):(D?(p(D,F),u&&"category"===u.type&&(u._categories=D._categories.slice())):p(u,
F),A.push(z))}}b(g,d);q.extendFlat(w,e(d));var B=x.length*t>c?2*(w.sizeAvg||Math.max(w.size,3)):m(d,t);for(t=0;t<A.length;t++)z=A[t],F=r[z],D=n.getFromId(g,d._diag[z][0])||{},u=n.getFromId(g,d._diag[z][1])||{},f(g,d,D,u,x[t],x[t],B);g=h(g,d);g.matrix||(g.matrix=!0);g.matrixOptions=w;g.selectedOptions=k(d,d.selected);g.unselectedOptions=k(d,d.unselected);return[{x:!1,y:!1,t:{},trace:d}]}},{"../../constants/numerical":725,"../../lib":750,"../../plots/cartesian/axis_ids":802,"../scatter/calc":1159,"../scatter/colorscale_calc":1161,
"../scattergl/constants":1212,"../scattergl/convert":1213,"./scene_update":1263}],1257:[function(a,G,C){function q(c,g){function d(r,t){return m.coerce(c,g,b.dimensions,r,t)}d("label");var p=d("values");p&&p.length?d("visible"):g.visible=!1;d("axis.type");d("axis.matches")}function n(c,g,d,p){function r(L,Q,S,R){if(L){var O=L.charAt(0),T=d._splomAxes[O];g["_"+O+"axes"][L]=1;R.push(L);L in T||(L=T[L]={},S&&(L.label=S.label||"",S.visible&&S.axis&&(S.axis.type&&(L.type=S.axis.type),S.axis.matches&&(L.matches=
Q))))}}var t=g.dimensions,w=t.length;c=g.showupperhalf;var x=g.showlowerhalf,y=g.diagonal.visible,A,z=Array(w),F=Array(w);for(A=0;A<w;A++){var D=A?A+1:"";z[A]="x"+D;F[A]="y"+D}z=p("xaxes",z);D=p("yaxes",F);var u=g._diag=Array(w);g._xaxes={};g._yaxes={};p=[];F=[];var B=!y&&!x,I=!y&&!c;g._axesDim={};for(A=0;A<w;A++){var J=t[A],N=0===A,M=A===w-1,E=N&&B||M&&I?void 0:z[A];N=N&&I||M&&B?void 0:D[A];r(E,N,J,p);r(N,E,J,F);u[A]=[E,N];g._axesDim[E]=A;g._axesDim[N]=A}for(A=0;A<p.length;A++)for(t=0;t<F.length;t++)w=
p[A]+F[t],A>t&&c?d._splomSubplots[w]=1:A<t&&x?d._splomSubplots[w]=1:A!==t||!y&&x&&c||(d._splomSubplots[w]=1);if(!x||!y&&c&&x)d._splomGridDflt.xside="bottom",d._splomGridDflt.yside="left"}var m=a("../../lib"),f=a("../../plots/array_container_defaults"),b=a("./attributes"),k=a("../scatter/subtypes"),e=a("../scatter/marker_defaults"),h=a("../parcoords/merge_length"),l=a("../scattergl/helpers").isOpenSymbol;G.exports=function(c,g,d,p){function r(A,z){return m.coerce(c,g,b,A,z)}var t=f(c,g,{name:"dimensions",
handleItemDefaults:q}),w=r("diagonal.visible"),x=r("showupperhalf"),y=r("showlowerhalf");h(g,t,"values")&&(w||x||y)?(r("text"),r("hovertext"),r("hovertemplate"),e(c,g,d,p,r),d=l(g.marker.symbol),t=k.isBubble(g),r("marker.line.width",d||t?1:0),n(c,g,p,r),m.coerceSelectionMarkerOpacity(g,r)):g.visible=!1}},{"../../lib":750,"../../plots/array_container_defaults":794,"../parcoords/merge_length":1129,"../scatter/marker_defaults":1177,"../scatter/subtypes":1183,"../scattergl/helpers":1217,"./attributes":1254}],
1258:[function(a,G,C){var q=a("../../lib"),n=a("../scatter/colorscale_calc"),m=a("../scattergl/convert").markerStyle;G.exports=function(f,b){var k=b.trace;if(b=f._fullLayout._splomScenes[k.uid])n(f,k),q.extendFlat(b.matrixOptions,m(k)),f=q.extendFlat({},b.matrixOptions,b.viewOpts),b.matrix.update(f,null)}},{"../../lib":750,"../scatter/colorscale_calc":1161,"../scattergl/convert":1213}],1259:[function(a,G,C){C.getDimIndex=function(q,n){n=n._id;for(var m={x:0,y:1}[n.charAt(0)],f=q._visibleDims,b=0;b<
f.length;b++)if(q._diag[f[b]][m]===n)return b;return!1}},{}],1260:[function(a,G,C){var q=a("./helpers"),n=a("../scattergl/hover").calcHover;G.exports={hoverPoints:function(m,f,b){var k=m.cd[0].trace,e=m.scene.matrixOptions.cdata,h=m.xa,l=m.ya;f=h.c2p(f);b=l.c2p(b);var c=m.distance,g=q.getDimIndex(k,h),d=q.getDimIndex(k,l);if(!1===g||!1===d)return[m];g=e[g];e=e[d];var p;for(d=0;d<g.length;d++){var r=e[d],t=h.c2p(g[d])-f;r=l.c2p(r)-b;t=Math.sqrt(t*t+r*r);if(t<c){c=p=t;var w=d}}m.index=w;m.distance=
c;m.dxy=p;return void 0===w?[m]:[n(m,g,e,k)]}}},{"../scattergl/hover":1218,"./helpers":1259}],1261:[function(a,G,C){C=a("../../registry");var q=a("../../components/grid");G.exports={moduleType:"trace",name:"splom",basePlotModule:a("./base_plot"),categories:"gl regl cartesian symbols showLegend scatter-like".split(" "),attributes:a("./attributes"),supplyDefaults:a("./defaults"),colorbar:a("../scatter/marker_colorbar"),calc:a("./calc"),plot:a("./plot"),hoverPoints:a("./hover").hoverPoints,selectPoints:a("./select"),
editStyle:a("./edit_style"),meta:{}};C.register(q)},{"../../components/grid":659,"../../registry":882,"../scatter/marker_colorbar":1176,"./attributes":1254,"./base_plot":1255,"./calc":1256,"./defaults":1257,"./edit_style":1258,"./hover":1260,"./plot":1262,"./select":1264}],1262:[function(a,G,C){var q=a("regl-splom"),n=a("../../lib"),m=a("../../plots/cartesian/axis_ids"),f=a("../../components/dragelement/helpers").selectMode;G.exports=function(b,k,e){if(e.length)for(k=0;k<e.length;k++){var h,l,c=b,
g=e[k][0],d=c._fullLayout,p=d._size,r=g.trace;var t=g.t;g=d._splomScenes[r.uid];var w=g.matrixOptions,x=w.cdata,y=d._glcanvas.data()[0].regl,A=d.dragmode;if(0!==x.length){w.lower=r.showupperhalf;w.upper=r.showlowerhalf;w.diagonal=r.diagonal.visible;var z=r._visibleDims,F=x.length,D=g.viewOpts={};D.ranges=Array(F);D.domains=Array(F);for(h=0;h<z.length;h++){var u=z[h];var B=D.ranges[h]=Array(4),I=D.domains[h]=Array(4);if(l=m.getFromId(c,r._diag[u][0]))B[0]=l._rl[0],B[2]=l._rl[1],I[0]=l.domain[0],I[2]=
l.domain[1];if(u=m.getFromId(c,r._diag[u][1]))B[1]=u._rl[0],B[3]=u._rl[1],I[1]=u.domain[0],I[3]=u.domain[1]}D.viewport=[p.l,p.b,p.w+p.l,p.h+p.b];!0===g.matrix&&(g.matrix=q(y));u=-1<d.clickmode.indexOf("select");d=!0;if(f(A)||r.selectedpoints||u){A=r._length;if(r.selectedpoints){l=g.selectBatch=r.selectedpoints;h={};for(u=0;u<l.length;u++)h[l[u]]=!0;l=[];for(u=0;u<A;u++)h[u]||l.push(u);g.unselectBatch=l}p=t.xpx=Array(F);F=t.ypx=Array(F);for(h=0;h<z.length;h++){u=z[h];if(l=m.getFromId(c,r._diag[u][0]))for(p[h]=
Array(A),t=0;t<A;t++)p[h][t]=l.c2p(x[h][t]);if(u=m.getFromId(c,r._diag[u][1]))for(F[h]=Array(A),t=0;t<A;t++)F[h][t]=u.c2p(x[h][t])}if(g.selectBatch.length||g.unselectBatch.length)c=n.extendFlat({},w,g.unselectedOptions,D),r=n.extendFlat({},w,g.selectedOptions,D),g.matrix.update(c,r),d=!1}else t.xpx=t.ypx=null;d&&(w=n.extendFlat({},w,D),g.matrix.update(w,null))}}}},{"../../components/dragelement/helpers":633,"../../lib":750,"../../plots/cartesian/axis_ids":802,"regl-splom":511}],1263:[function(a,G,
C){var q=a("../../lib");G.exports=function(n,m){var f=n._fullLayout;n=m.uid;var b=f._splomScenes;b||(b=f._splomScenes={});f={dirty:!0,selectBatch:[],unselectBatch:[]};var k={matrix:!1,selectBatch:[],unselectBatch:[]},e=b[m.uid];e||(e=b[n]=q.extendFlat({},f,k),e.draw=function(){e.matrix&&e.matrix.draw&&(e.selectBatch.length||e.unselectBatch.length?e.matrix.draw(e.unselectBatch,e.selectBatch):e.matrix.draw());e.dirty=!1},e.destroy=function(){e.matrix&&e.matrix.destroy&&e.matrix.destroy();e.matrixOptions=
null;e.selectBatch=null;e=e.unselectBatch=null});e.dirty||q.extendFlat(e,f);return e}},{"../../lib":750}],1264:[function(a,G,C){var q=a("../../lib"),n=a("../scatter/subtypes"),m=a("./helpers");G.exports=function(f,b){var k=f.cd,e=k[0].trace,h=k[0].t;k=f.scene;var l=k.matrixOptions.cdata,c=f.xaxis,g=f.yaxis,d=[];if(!k)return d;var p=!n.hasMarkers(e)&&!n.hasText(e);if(!0!==e.visible||p)return d;c=m.getDimIndex(e,c);g=m.getDimIndex(e,g);if(!1===c||!1===g)return d;e=h.xpx[c];h=h.ypx[g];c=l[c];p=l[g];
l=[];g=[];if(!1!==b&&!b.degenerate)for(var r=0;r<c.length;r++)b.contains([e[r],h[r]],null,r,f)?(l.push(r),d.push({pointNumber:r,x:c[r],y:p[r]})):g.push(r);f=k.matrixOptions;l.length||g.length?k.selectBatch.length||k.unselectBatch.length||k.matrix.update(k.unselectedOptions,q.extendFlat({},f,k.selectedOptions,k.viewOpts)):k.matrix.update(f,null);k.selectBatch=l;k.unselectBatch=g;return d}},{"../../lib":750,"../scatter/subtypes":1183,"./helpers":1259}],1265:[function(a,G,C){C=a("../../components/colorscale/attributes");
var q=a("../../plots/template_attributes").hovertemplateAttrs,n=a("../mesh3d/attributes"),m=a("../../plots/attributes");a=a("../../lib/extend").extendFlat;var f={x:{valType:"data_array",editType:"calc+clearAxisTypes"},y:{valType:"data_array",editType:"calc+clearAxisTypes"},z:{valType:"data_array",editType:"calc+clearAxisTypes"},u:{valType:"data_array",editType:"calc"},v:{valType:"data_array",editType:"calc"},w:{valType:"data_array",editType:"calc"},starts:{x:{valType:"data_array",editType:"calc"},
y:{valType:"data_array",editType:"calc"},z:{valType:"data_array",editType:"calc"},editType:"calc"},maxdisplayed:{valType:"integer",min:0,dflt:1E3,editType:"calc"},sizeref:{valType:"number",editType:"calc",min:0,dflt:1},text:{valType:"string",dflt:"",editType:"calc"},hovertext:{valType:"string",dflt:"",editType:"calc"},hovertemplate:q({editType:"calc"},{keys:"tubex tubey tubez tubeu tubev tubew norm divergence".split(" ")}),showlegend:a({},m.showlegend,{dflt:!1})};a(f,C("",{colorAttr:"u/v/w norm",
showScaleDflt:!0,editTypeOverride:"calc"}));["opacity","lightposition","lighting"].forEach(function(b){f[b]=n[b]});f.hoverinfo=a({},m.hoverinfo,{editType:"calc",flags:"x y z u v w norm divergence text name".split(" "),dflt:"x+y+z+norm+text+name"});f.transforms=void 0;G.exports=f},{"../../components/colorscale/attributes":622,"../../lib/extend":740,"../../plots/attributes":795,"../../plots/template_attributes":877,"../mesh3d/attributes":1099}],1266:[function(a,G,C){function q(b){var k=b._x,e=b._y,
h=b._z,l=b._len,c,g,d=-Infinity,p=Infinity,r=-Infinity,t=Infinity,w=-Infinity,x=Infinity,y="";if(l){var A=k[0];var z=e[0];var F=h[0]}if(1<l){var D=k[l-1];var u=e[l-1];var B=h[l-1]}for(c=0;c<l;c++){d=Math.max(d,k[c]);p=Math.min(p,k[c]);r=Math.max(r,e[c]);t=Math.min(t,e[c]);w=Math.max(w,h[c]);x=Math.min(x,h[c]);if(!I&&k[c]!==A){var I=!0;y+="x"}if(!J&&e[c]!==z){var J=!0;y+="y"}if(!N&&h[c]!==F){var N=!0;y+="z"}}I||(y+="x");J||(y+="y");N||(y+="z");var M=m.distinctVals(b._x).vals,E=m.distinctVals(b._y).vals,
L=m.distinctVals(b._z).vals;y=y.replace("x",(A>D?"-":"+")+"x");y=y.replace("y",(z>u?"-":"+")+"y");y=y.replace("z",(F>B?"-":"+")+"z");if(!l||l<M.length*E.length*L.length)l=0,M=[],E=[],L=[];c=function(T){return"x"===T?k:"y"===T?e:h};D=function(T){return"x"===T?M:"y"===T?E:L};B=function(T){return T[l-1]<T[0]?-1:1};b=c(y[1]);I=c(y[3]);J=c(y[5]);N=D(y[1]).length;A=D(y[3]).length;D=D(y[5]).length;z=!1;u=B(c(y[1]));F=B(c(y[3]));var Q=B(c(y[5]));for(c=0;c<D-1;c++){for(B=0;B<A-1;B++){for(g=0;g<N-1;g++){var S=
N*(A*c+B)+g,R=N*(A*c+(B+1))+g,O=N*(A*(c+1)+B)+g;b[S]*u<b[N*(A*c+B)+(g+1)]*u&&I[S]*F<I[R]*F&&J[S]*Q<J[O]*Q||(z=!0);if(z)break}if(z)break}if(z)break}z&&(m.warn("Encountered arbitrary coordinates! Unable to input data grid."),l=0,M=[],E=[],L=[]);return{xMin:p,yMin:t,zMin:x,xMax:d,yMax:r,zMax:w,Xs:M,Ys:E,Zs:L,len:l,fill:y}}function n(b,k){void 0===k&&(k=b.length);if(m.isTypedArray(b))return b.subarray(0,k);for(var e=[],h=0;h<k;h++)e[h]=+b[h];return e}var m=a("../../lib"),f=a("../../components/colorscale/calc");
G.exports={calc:function(b,k){k._len=Math.min(k.u.length,k.v.length,k.w.length,k.x.length,k.y.length,k.z.length);k._u=n(k.u,k._len);k._v=n(k.v,k._len);k._w=n(k.w,k._len);k._x=n(k.x,k._len);k._y=n(k.y,k._len);k._z=n(k.z,k._len);var e=q(k);k._gridFill=e.fill;k._Xs=e.Xs;k._Ys=e.Ys;k._Zs=e.Zs;k._len=e.len;var h=0;if(k.starts){var l=n(k.starts.x||[]);var c=n(k.starts.y||[]);var g=n(k.starts.z||[]);h=Math.min(l.length,c.length,g.length)}k._startsX=l||[];k._startsY=c||[];k._startsZ=g||[];var d=0,p=Infinity,
r;for(r=0;r<k._len;r++){var t=k._u[r],w=k._v[r],x=k._w[r];t=Math.sqrt(t*t+w*w+x*x);d=Math.max(d,t);p=Math.min(p,t)}f(b,k,{vals:[p,d],containerStr:"",cLetter:"c"});for(r=0;r<h;r++)b=l[r],e.xMax=Math.max(e.xMax,b),e.xMin=Math.min(e.xMin,b),b=c[r],e.yMax=Math.max(e.yMax,b),e.yMin=Math.min(e.yMin,b),b=g[r],e.zMax=Math.max(e.zMax,b),e.zMin=Math.min(e.zMin,b);k._slen=h;k._normMax=d;k._xbnds=[e.xMin,e.xMax];k._ybnds=[e.yMin,e.yMax];k._zbnds=[e.zMin,e.zMax]},filter:n,processGrid:q}},{"../../components/colorscale/calc":623,
"../../lib":750}],1267:[function(a,G,C){function q(d,p){this.scene=d;this.uid=p;this.data=this.mesh=null}function n(d){var p=d.length;return 2<p?d.slice(1,p-1):2===p?[(d[0]+d[1])/2]:d}function m(d){var p=d.length;return 1===p?[.5,.5]:[d[1]-d[0],d[p-1]-d[p-2]]}function f(d,p){function r(N,M){var E=t[M],L=w[g[M]];return e.simpleMap(N,function(Q){return E.d2l(Q)*L})}var t=d.fullSceneLayout,w=d.dataScale,x=p._len;d={};d.vectors=c(r(p._u,"xaxis"),r(p._v,"yaxis"),r(p._w,"zaxis"),x);if(!x)return{positions:[],
cells:[]};var y=r(p._Xs,"xaxis"),A=r(p._Ys,"yaxis");x=r(p._Zs,"zaxis");d.meshgrid=[y,A,x];d.gridFill=p._gridFill;if(p._slen)d.startingPositions=c(r(p._startsX,"xaxis"),r(p._startsY,"yaxis"),r(p._startsZ,"zaxis"));else{for(var z=A[0],F=n(y),D=n(x),u=Array(F.length*D.length),B=0,I=0;I<F.length;I++)for(var J=0;J<D.length;J++)u[B++]=[F[I],z,D[J]];d.startingPositions=u}d.colormap=h(p);d.tubeSize=p.sizeref;d.maxLength=p.maxdisplayed;z=r(p._xbnds,"xaxis");F=r(p._ybnds,"yaxis");D=r(p._zbnds,"zaxis");y=m(y);
A=m(A);x=m(x);d=b(d,[[z[0]-y[0],F[0]-A[0],D[0]-x[0]],[z[1]+y[1],F[1]+A[1],D[1]+x[1]]]);x=l(p);d.vertexIntensityBounds=[x.min/p._normMax,x.max/p._normMax];x=p.lightposition;d.lightPosition=[x.x,x.y,x.z];d.ambient=p.lighting.ambient;d.diffuse=p.lighting.diffuse;d.specular=p.lighting.specular;d.roughness=p.lighting.roughness;d.fresnel=p.lighting.fresnel;d.opacity=p.opacity;p._pad=d.tubeScale*p.sizeref*2;return d}var b=a("gl-streamtube3d"),k=b.createTubeMesh,e=a("../../lib"),h=a("../../lib/gl_format_color").parseColorScale,
l=a("../../components/colorscale").extractOpts,c=a("../../plots/gl3d/zip3"),g={xaxis:0,yaxis:1,zaxis:2};a=q.prototype;a.handlePick=function(d){function p(y,A){var z=t[g[A]];return r[A].l2c(y)/z}var r=this.scene.fullSceneLayout,t=this.scene.dataScale;if(d.object===this.mesh){var w=d.data.position,x=d.data.velocity;d.traceCoordinate=[p(w[0],"xaxis"),p(w[1],"yaxis"),p(w[2],"zaxis"),p(x[0],"xaxis"),p(x[1],"yaxis"),p(x[2],"zaxis"),d.data.intensity*this.data._normMax,d.data.divergence];d.textLabel=this.data.hovertext||
this.data.text;return!0}};a.update=function(d){this.data=d;d=f(this.scene,d);this.mesh.update(d)};a.dispose=function(){this.scene.glplot.remove(this.mesh);this.mesh.dispose()};G.exports=function(d,p){var r=d.glplot.gl,t=f(d,p);r=k(r,t);t=new q(d,p.uid);t.mesh=r;t.data=p;r._trace=t;d.glplot.add(r);return t}},{"../../components/colorscale":627,"../../lib":750,"../../lib/gl_format_color":746,"../../plots/gl3d/zip3":852,"gl-streamtube3d":323}],1268:[function(a,G,C){var q=a("../../lib"),n=a("../../components/colorscale/defaults"),
m=a("./attributes");G.exports=function(f,b,k,e){function h(r,t){return q.coerce(f,b,m,r,t)}k=h("u");var l=h("v"),c=h("w"),g=h("x"),d=h("y"),p=h("z");k&&k.length&&l&&l.length&&c&&c.length&&g&&g.length&&d&&d.length&&p&&p.length?(h("starts.x"),h("starts.y"),h("starts.z"),h("maxdisplayed"),h("sizeref"),h("lighting.ambient"),h("lighting.diffuse"),h("lighting.specular"),h("lighting.roughness"),h("lighting.fresnel"),h("lightposition.x"),h("lightposition.y"),h("lightposition.z"),n(f,b,e,h,{prefix:"",cLetter:"c"}),
h("text"),h("hovertext"),h("hovertemplate"),b._length=null):b.visible=!1}},{"../../components/colorscale/defaults":625,"../../lib":750,"./attributes":1265}],1269:[function(a,G,C){G.exports={moduleType:"trace",name:"streamtube",basePlotModule:a("../../plots/gl3d"),categories:["gl3d","showLegend"],attributes:a("./attributes"),supplyDefaults:a("./defaults"),colorbar:{min:"cmin",max:"cmax"},calc:a("./calc").calc,plot:a("./convert"),eventData:function(q,n){q.tubex=q.x;q.tubey=q.y;q.tubez=q.z;q.tubeu=n.traceCoordinate[3];
q.tubev=n.traceCoordinate[4];q.tubew=n.traceCoordinate[5];q.norm=n.traceCoordinate[6];q.divergence=n.traceCoordinate[7];delete q.x;delete q.y;delete q.z;return q},meta:{}}},{"../../plots/gl3d":841,"./attributes":1265,"./calc":1266,"./convert":1267,"./defaults":1268}],1270:[function(a,G,C){C=a("../../plots/attributes");var q=a("../../plots/template_attributes").hovertemplateAttrs,n=a("../../plots/template_attributes").texttemplateAttrs,m=a("../../components/colorscale/attributes"),f=a("../../plots/domain").attributes,
b=a("../pie/attributes"),k=a("./constants");a=a("../../lib/extend").extendFlat;G.exports={labels:{valType:"data_array",editType:"calc"},parents:{valType:"data_array",editType:"calc"},values:{valType:"data_array",editType:"calc"},branchvalues:{valType:"enumerated",values:["remainder","total"],dflt:"remainder",editType:"calc"},count:{valType:"flaglist",flags:["branches","leaves"],dflt:"leaves",editType:"calc"},level:{valType:"any",editType:"plot",anim:!0},maxdepth:{valType:"integer",editType:"plot",
dflt:-1},marker:a({colors:{valType:"data_array",editType:"calc"},line:{color:a({},b.marker.line.color,{dflt:null}),width:a({},b.marker.line.width,{dflt:1}),editType:"calc"},editType:"calc"},m("marker",{colorAttr:"colors",anim:!1})),leaf:{opacity:{valType:"number",editType:"style",min:0,max:1},editType:"plot"},text:b.text,textinfo:{valType:"flaglist",flags:"label;text;value;current path;percent root;percent entry;percent parent".split(";"),extras:["none"],editType:"plot"},texttemplate:n({editType:"plot"},
{keys:k.eventDataKeys.concat(["label","value"])}),hovertext:b.hovertext,hoverinfo:a({},C.hoverinfo,{flags:"label;text;value;name;current path;percent root;percent entry;percent parent".split(";"),dflt:"label+text+value+name"}),hovertemplate:q({},{keys:k.eventDataKeys}),textfont:b.textfont,insidetextorientation:b.insidetextorientation,insidetextfont:b.insidetextfont,outsidetextfont:a({},b.outsidetextfont,{}),rotation:{valType:"angle",dflt:0,editType:"plot"},sort:b.sort,domain:f({name:"sunburst",trace:!0,
editType:"calc"})}},{"../../components/colorscale/attributes":622,"../../lib/extend":740,"../../plots/attributes":795,"../../plots/domain":826,"../../plots/template_attributes":877,"../pie/attributes":1132,"./constants":1273}],1271:[function(a,G,C){var q=a("../../plots/plots");C.name="sunburst";C.plot=function(n,m,f,b){q.plotBasePlot(C.name,n,m,f,b)};C.clean=function(n,m,f,b){q.cleanBasePlot(C.name,n,m,f,b)}},{"../../plots/plots":862}],1272:[function(a,G,C){function q(d,p,r){var t=0,w=d.children;
if(w){for(var x=w.length,y=0;y<x;y++)t+=q(w[y],p,r);r.branches&&t++}else r.leaves&&t++;d.value=d.data.data.value=t;p._values||(p._values=[]);return p._values[d.data.data.i]=t}var n=a("d3-hierarchy"),m=a("fast-isnumeric"),f=a("../../lib"),b=a("../../components/colorscale").makeColorScaleFuncFromTrace,k=a("../pie/calc").makePullColorFn,e=a("../pie/calc").generateExtendedColors,h=a("../../components/colorscale").calc,l=a("../../constants/numerical").ALMOST_EQUAL,c={},g={};C.calc=function(d,p){var r=
d._fullLayout,t=p.ids,w=f.isArrayOrTypedArray(t),x=p.labels,y=p.parents,A=p.values,z=f.isArrayOrTypedArray(A),F=[],D={},u={},B=function(aa,ka){D[aa]?D[aa].push(ka):D[aa]=[ka];u[ka]=1},I=function(aa){return aa||"number"===typeof aa},J=function(aa){return!z||m(A[aa])&&0<=A[aa]};if(w){w=Math.min(t.length,y.length);var N=function(aa){return I(t[aa])&&J(aa)};var M=function(aa){return String(t[aa])}}else w=Math.min(x.length,y.length),N=function(aa){return I(x[aa])&&J(aa)},M=function(aa){return String(x[aa])};
z&&(w=Math.min(w,A.length));for(var E=0;E<w;E++)if(N(E)){var L=M(E),Q=I(y[E])?String(y[E]):"",S={i:E,id:L,pid:Q,label:I(x[E])?String(x[E]):""};z&&(S.v=+A[E]);F.push(S);B(Q,L)}if(!D[""]){y=[];for(var R in D)u[R]||y.push(R);if(1===y.length)R=y[0],F.unshift({hasImpliedRoot:!0,id:R,pid:"",label:R});else return f.warn(["Multiple implied roots, cannot build",p.type,"hierarchy of",p.name+".","These roots include:",y.join(", ")].join(" "))}else if(1<D[""].length){R=f.randstr();for(y=0;y<F.length;y++)""===
F[y].pid&&(F[y].pid=R);F.unshift({hasMultipleRoots:!0,id:R,pid:"",label:""})}try{var O=n.stratify().id(function(aa){return aa.id}).parentId(function(aa){return aa.pid})(F)}catch(aa){return f.warn(["Failed to build",p.type,"hierarchy of",p.name+".","Error:",aa.message].join(" "))}O=n.hierarchy(O);var T=!1;if(z)switch(p.branchvalues){case "remainder":O.sum(function(aa){return aa.data.v});break;case "total":O.each(function(aa){var ka=aa.data.data,ha=ka.v;if(aa.children){var ca=aa.children.reduce(function(sa,
ma){return sa+ma.data.data.v},0);if(ka.hasImpliedRoot||ka.hasMultipleRoots)ha=ca;if(ha<ca*l)return T=!0,f.warn(["Total value for node",aa.data.data.id,"of",p.name,"is smaller than the sum of its children. \nparent value \x3d",ha,"\nchildren sum \x3d",ca].join(" "))}aa.value=ha})}else q(O,p,{branches:-1!==p.count.indexOf("branches"),leaves:-1!==p.count.indexOf("leaves")});if(!T){p.sort&&O.sort(function(aa,ka){return ka.value-aa.value});var V=p.marker.colors||[];R=!!V.length;if(p._hasColorscale){R||
(V=z?p.values:p._values);h(d,p,{vals:V,containerStr:"marker",cLetter:"c"});var X=b(p.marker)}else var ba=k(r["_"+p.type+"colormap"]);O.each(function(aa){aa=aa.data.data;aa.color=p._hasColorscale?X(V[aa.i]):ba(V[aa.i],aa.id)});F[0].hierarchy=O;return F}};C._runCrossTraceCalc=function(d,p){function r(z){var F=z.data.data,D=F.id;!1===F.color&&(x[D]?F.color=x[D]:z.parent?z.parent.parent?F.color=z.parent.data.data.color:(x[D]=F.color=w[y%w.length],y++):F.color="rgba(0,0,0,0)")}var t=p._fullLayout;p=p.calcdata;
var w=t[d+"colorway"],x=t["_"+d+"colormap"];t["extend"+d+"colors"]&&(w=e(w,"treemap"===d?g:c));var y=0;for(t=0;t<p.length;t++){var A=p[t][0];A.trace.type===d&&A.hierarchy&&A.hierarchy.each(r)}};C.crossTraceCalc=function(d){return C._runCrossTraceCalc("sunburst",d)}},{"../../components/colorscale":627,"../../constants/numerical":725,"../../lib":750,"../pie/calc":1134,"d3-hierarchy":161,"fast-isnumeric":241}],1273:[function(a,G,C){G.exports={CLICK_TRANSITION_TIME:750,CLICK_TRANSITION_EASING:"linear",
eventDataKeys:"currentPath root entry percentRoot percentEntry percentParent".split(" ")}},{}],1274:[function(a,G,C){var q=a("../../lib"),n=a("./attributes"),m=a("../../plots/domain").defaults,f=a("../bar/defaults").handleText;a=a("../../components/colorscale");var b=a.hasColorscale,k=a.handleDefaults;G.exports=function(e,h,l,c){function g(p,r){return q.coerce(e,h,n,p,r)}l=g("labels");var d=g("parents");l&&l.length&&d&&d.length?((l=g("values"))&&l.length?g("branchvalues"):g("count"),g("level"),g("maxdepth"),
g("marker.line.width")&&g("marker.line.color",c.paper_bgcolor),g("marker.colors"),(l=h._hasColorscale=b(e,"marker","colors")||(e.marker||{}).coloraxis)&&k(e,h,c,g,{prefix:"marker.",cLetter:"c"}),g("leaf.opacity",l?1:.7),l=g("text"),g("texttemplate"),h.texttemplate||g("textinfo",Array.isArray(l)?"text+label":"label"),g("hovertext"),g("hovertemplate"),f(e,h,c,g,"auto",{moduleHasSelected:!1,moduleHasUnselected:!1,moduleHasConstrain:!1,moduleHasCliponaxis:!1,moduleHasTextangle:!1,moduleHasInsideanchor:!1}),
g("insidetextorientation"),g("sort"),g("rotation"),m(h,c,g),h._length=null):h.visible=!1}},{"../../components/colorscale":627,"../../lib":750,"../../plots/domain":826,"../bar/defaults":896,"./attributes":1270}],1275:[function(a,G,C){function q(c,g,d){for(var p=c.data.data,r={curveNumber:g.index,pointNumber:p.i,data:g._input,fullData:g},t=0;t<d.length;t++){var w=d[t];w in c&&(r[w]=c[w])}"parentString"in c&&!h.isHierarchyRoot(c)&&(r.parent=c.parentString);f(r,g,p.i);return r}var n=a("d3"),m=a("../../registry"),
f=a("../../components/fx/helpers").appendArrayPointValue,b=a("../../components/fx"),k=a("../../lib"),e=a("../../lib/events"),h=a("./helpers"),l=a("../pie/helpers").formatPieValue;G.exports=function(c,g,d,p,r){var t=p[0],w=t.trace,x=t.hierarchy,y="sunburst"===w.type,A="treemap"===w.type;"_hasHoverLabel"in w||(w._hasHoverLabel=!1);"_hasHoverEvent"in w||(w._hasHoverEvent=!1);c.on("mouseover",function(z){var F=d._fullLayout;if(!d._dragging&&!1!==F.hovermode){var D=d._fullData[w.index],u=z.data.data,B=
u.i,I=h.isHierarchyRoot(z),J=h.getParent(x,z),N=h.getValue(z),M=function(ka){return k.castOption(D,B,ka)},E=M("hovertemplate"),L=b.castHoverinfo(D,F,B),Q=F.separators;if(E||L&&"none"!==L&&"skip"!==L){if(y){var S=t.cx+z.pxmid[0]*(1-z.rInscribed);var R=t.cy+z.pxmid[1]*(1-z.rInscribed)}A&&(S=z._hoverX,R=z._hoverY);var O={},T=[],V=[],X=function(ka){return-1!==T.indexOf(ka)};L&&(T="all"===L?D._module.attributes.hoverinfo.flags:L.split("+"));O.label=u.label;X("label")&&O.label&&V.push(O.label);u.hasOwnProperty("v")&&
(O.value=u.v,O.valueLabel=l(O.value,Q),X("value")&&V.push(O.valueLabel));O.currentPath=z.currentPath=h.getPath(z.data);X("current path")&&!I&&V.push(O.currentPath);var ba=[];L=function(){-1===ba.indexOf(aa)&&(V.push(aa),ba.push(aa))};O.percentParent=z.percentParent=N/h.getValue(J);O.parent=z.parentString=h.getPtLabel(J);if(X("percent parent")){var aa=h.formatPercent(O.percentParent,Q)+" of "+O.parent;L()}O.percentEntry=z.percentEntry=N/h.getValue(g);O.entry=z.entry=h.getPtLabel(g);!X("percent entry")||
I||z.onPathbar||(aa=h.formatPercent(O.percentEntry,Q)+" of "+O.entry,L());O.percentRoot=z.percentRoot=N/h.getValue(x);O.root=z.root=h.getPtLabel(x);X("percent root")&&!I&&(aa=h.formatPercent(O.percentRoot,Q)+" of "+O.root,L());O.text=M("hovertext")||M("text");X("text")&&(aa=O.text,k.isValidTextValue(aa)&&V.push(aa));u={trace:D,y:R,text:V.join("\x3cbr\x3e"),name:E||X("name")?D.name:void 0,color:M("hoverlabel.bgcolor")||u.color,borderColor:M("hoverlabel.bordercolor"),fontFamily:M("hoverlabel.font.family"),
fontSize:M("hoverlabel.font.size"),fontColor:M("hoverlabel.font.color"),nameLength:M("hoverlabel.namelength"),textAlign:M("hoverlabel.align"),hovertemplate:E,hovertemplateLabels:O,eventData:[q(z,D,r.eventDataKeys)]};y&&(u.x0=S-z.rInscribed*z.rpx1,u.x1=S+z.rInscribed*z.rpx1,u.idealAlign=0>z.pxmid[0]?"left":"right");A&&(u.x=S,u.idealAlign=0>S?"left":"right");b.loneHover(u,{container:F._hoverlayer.node(),outerContainer:F._paper.node(),gd:d});w._hasHoverLabel=!0}A&&(F=c.select("path.surface"),r.styleOne(F,
z,D,{hovered:!0}));w._hasHoverEvent=!0;d.emit("plotly_hover",{points:[q(z,D,r.eventDataKeys)],event:n.event})}});c.on("mouseout",function(z){var F=d._fullLayout,D=d._fullData[w.index],u=n.select(this).datum();w._hasHoverEvent&&(z.originalEvent=n.event,d.emit("plotly_unhover",{points:[q(u,D,r.eventDataKeys)],event:n.event}),w._hasHoverEvent=!1);w._hasHoverLabel&&(b.loneUnhover(F._hoverlayer.node()),w._hasHoverLabel=!1);A&&(z=c.select("path.surface"),r.styleOne(z,u,D,{hovered:!1}))});c.on("click",function(z){var F=
d._fullLayout,D=d._fullData[w.index],u=y&&(h.isHierarchyRoot(z)||h.isLeaf(z)),B=h.getPtId(z);B=h.isEntry(z)?h.findEntryWithChild(x,B):h.findEntryWithLevel(x,B);B=h.getPtId(B);var I={points:[q(z,D,r.eventDataKeys)],event:n.event};u||(I.nextLevel=B);I=e.triggerHandler(d,"plotly_"+w.type+"click",I);!1!==I&&F.hovermode&&(d._hoverdata=[q(z,D,r.eventDataKeys)],b.click(d,n.event));u||!1===I||d._dragging||d._transitioning||(m.call("_storeDirectGUIEdit",D,F._tracePreGUI[D.uid],{level:D.level}),z={data:[{level:B}],
traces:[w.index]},D={frame:{redraw:!1,duration:r.transitionTime},transition:{duration:r.transitionTime,easing:r.transitionEasing},mode:"immediate",fromcurrent:!0},b.loneUnhover(F._hoverlayer.node()),m.call("animate",d,z,D))})}},{"../../components/fx":655,"../../components/fx/helpers":651,"../../lib":750,"../../lib/events":739,"../../registry":882,"../pie/helpers":1137,"./helpers":1276,d3:169}],1276:[function(a,G,C){var q=a("../../lib"),n=a("../../components/color"),m=a("../../lib/setcursor"),f=a("../pie/helpers");
C.findEntryWithLevel=function(b,k){var e;k&&b.eachAfter(function(h){if(C.getPtId(h)===k)return e=h.copy()});return e||b};C.findEntryWithChild=function(b,k){var e;b.eachAfter(function(h){for(var l=h.children||[],c=0;c<l.length;c++)if(C.getPtId(l[c])===k)return e=h.copy()});return e||b};C.isEntry=function(b){return!b.parent};C.isLeaf=function(b){return!b.children};C.getPtId=function(b){return b.data.data.id};C.getPtLabel=function(b){return b.data.data.label};C.getValue=function(b){return b.value};C.isHierarchyRoot=
function(b){return""===b.data.data.pid};C.setSliceCursor=function(b,k,e){k=e.isTransitioning;k||(k=b.datum(),k=e.hideOnRoot&&C.isHierarchyRoot(k)||e.hideOnLeaves&&C.isLeaf(k));m(b,k?null:"pointer")};C.getInsideTextFontKey=function(b,k,e,h,l){e=e.data.data.i;return q.castOption(k,e,((l||{}).onPathbar?"pathbar.textfont":"insidetextfont")+"."+b)||q.castOption(k,e,"textfont."+b)||h.size};C.getOutsideTextFontKey=function(b,k,e,h){e=e.data.data.i;return q.castOption(k,e,"outsidetextfont."+b)||q.castOption(k,
e,"textfont."+b)||h.size};C.isOutsideText=function(b,k){return!b._hasColorscale&&C.isHierarchyRoot(k)};C.determineTextFont=function(b,k,e,h){if(C.isOutsideText(b,k))b={color:C.getOutsideTextFontKey("color",b,k,e),family:C.getOutsideTextFontKey("family",b,k,e),size:C.getOutsideTextFontKey("size",b,k,e)};else{var l=k.data.data,c=l.i,g=q.castOption(b,c,((h||{}).onPathbar?"pathbar.textfont":"insidetextfont")+".color");!g&&b._input.textfont&&(g=q.castOption(b._input,c,"textfont.color"));b={color:g||n.contrast(l.color),
family:C.getInsideTextFontKey("family",b,k,e,h),size:C.getInsideTextFontKey("size",b,k,e,h)}}return b};C.hasTransition=function(b){return!!(b&&0<b.duration)};C.getMaxDepth=function(b){return 0<=b.maxdepth?b.maxdepth:Infinity};C.isHeader=function(b,k){return!(C.isLeaf(b)||b.depth===k._maxDepth-1)};C.getParent=function(b,k){return C.findEntryWithLevel(b,k.data.data.pid)};C.listPath=function(b,k){b=b.parent;if(!b)return[];var e=k?[b.data[k]]:[b];return C.listPath(b,k).concat(e)};C.getPath=function(b){return C.listPath(b,
"label").join("/")+"/"};C.formatValue=f.formatPieValue;C.formatPercent=function(b,k){var e=q.formatPercent(b,0);"0%"===e&&(e=f.formatPiePercent(b,k));return e}},{"../../components/color":615,"../../lib":750,"../../lib/setcursor":770,"../pie/helpers":1137}],1277:[function(a,G,C){G.exports={moduleType:"trace",name:"sunburst",basePlotModule:a("./base_plot"),categories:[],animatable:!0,attributes:a("./attributes"),layoutAttributes:a("./layout_attributes"),supplyDefaults:a("./defaults"),supplyLayoutDefaults:a("./layout_defaults"),
calc:a("./calc").calc,crossTraceCalc:a("./calc").crossTraceCalc,plot:a("./plot").plot,style:a("./style").style,colorbar:a("../scatter/marker_colorbar"),meta:{}}},{"../scatter/marker_colorbar":1176,"./attributes":1270,"./base_plot":1271,"./calc":1272,"./defaults":1274,"./layout_attributes":1278,"./layout_defaults":1279,"./plot":1280,"./style":1281}],1278:[function(a,G,C){G.exports={sunburstcolorway:{valType:"colorlist",editType:"calc"},extendsunburstcolors:{valType:"boolean",dflt:!0,editType:"calc"}}},
{}],1279:[function(a,G,C){var q=a("../../lib"),n=a("./layout_attributes");G.exports=function(m,f){q.coerce(m,f,n,"sunburstcolorway",f.colorway);q.coerce(m,f,n,"extendsunburstcolors",void 0)}},{"../../lib":750,"./layout_attributes":1278}],1280:[function(a,G,C){function q(z,F,D,u){function B(ya){var ja=A.getPtId(ya),za=ka[ja],Ba=ka[A.getPtId(R)];if(Ba){var Ma=(ya.x1>Ba.x1?2*Math.PI:0)+sa;ya=ya.rpx1<Ba.rpx1?{rpx0:0,rpx1:0}:{x0:Ma,x1:Ma}}else{var Oa,Ia=A.getPtId(ya.parent);L.each(function(Fa){if(A.getPtId(Fa)===
Ia)return Oa=Fa});ya=Oa.children;var Pa;ya.forEach(function(Fa,Na){if(A.getPtId(Fa)===ja)return Pa=Na});ya=ya.length;Ba=b.interpolate(Oa.x0,Oa.x1);ya={rpx0:V,rpx1:V,x0:Ba(Pa/ya),x1:Ba((Pa+1)/ya)}}return b.interpolate(za,ya)}function I(ya){var ja=ka[A.getPtId(ya)],za={x0:ya.x0,x1:ya.x1,rpx0:ya.rpx0,rpx1:ya.rpx1};ja||(aa?ya.parent?oa?(ya=(ya.x1>oa?2*Math.PI:0)+sa,ja={x0:ya,x1:ya}):(ja={rpx0:V,rpx1:V},h.extendFlat(ja,N(ya))):ja={rpx0:0,rpx1:0}:ja={x0:sa,x1:sa});return b.interpolate(ja,za)}function J(ya){var ja=
ka[A.getPtId(ya)],za=ya.transform;ja||(ja={rpx1:ya.rpx1,transform:{textPosAngle:za.textPosAngle,scale:0,rotate:za.rotate,rCenter:za.rCenter,x:za.x,y:za.y}},aa?ya.parent?oa?ja.x0=ja.x1=ya.x1>oa?2*Math.PI:0:h.extendFlat(ja,N(ya)):ja.x0=ja.x1=sa:ja.x0=ja.x1=sa);var Ba=b.interpolate(ja.transform.textPosAngle,ya.transform.textPosAngle),Ma=b.interpolate(ja.rpx1,ya.rpx1),Oa=b.interpolate(ja.x0,ya.x0),Ia=b.interpolate(ja.x1,ya.x1),Pa=b.interpolate(ja.transform.scale,za.scale),Fa=b.interpolate(ja.transform.rotate,
za.rotate),Na=0===za.rCenter?3:0===ja.transform.rCenter?1/3:1,$a=b.interpolate(ja.transform.rCenter,za.rCenter);return function(cb){var mb=Ma(cb),Ka=Oa(cb),Ua=Ia(cb),Ea=$a(Math.pow(cb,Na));Ka=ra(mb,(Ka+Ua)/2);Ua=Ba(cb);mb={pxmid:Ka,rpx1:mb,transform:{textPosAngle:Ua,rCenter:Ea,x:za.x,y:za.y}};c(S.type,za,M);return{transform:{targetX:Y(mb),targetY:pa(mb),scale:Pa(cb),rotate:Fa(cb),rCenter:Ea}}}}function N(ya){var ja=ya.parent,za=ka[A.getPtId(ja)],Ba={};za?(ja=ja.children,ya=ja.indexOf(ya),ja=ja.length,
za=b.interpolate(za.x0,za.x1),Ba.x0=za(ya/ja),Ba.x1=za(ya/ja)):Ba.x0=Ba.x1=0;return Ba}var M=z._fullLayout,E=!M.uniformtext.mode&&A.hasTransition(u),L=b.select(D).selectAll("g.slice"),Q=F[0],S=Q.trace,R=A.findEntryWithLevel(Q.hierarchy,S.level);D=A.getMaxDepth(S);u=M._size;var O=S.domain,T=u.h*(O.y[1]-O.y[0]),V=.5*Math.min(u.w*(O.x[1]-O.x[0]),T),X=Q.cx=u.l+u.w*(O.x[1]+O.x[0])/2,ba=Q.cy=u.t+u.h*(1-O.y[0])-T/2;if(!R)return L.remove();var aa=null,ka={};E&&L.each(function(ya){ka[A.getPtId(ya)]={rpx0:ya.rpx0,
rpx1:ya.rpx1,x0:ya.x0,x1:ya.x1,transform:ya.transform};!aa&&A.isEntry(ya)&&(aa=ya)});u=n(R).descendants();O=R.height+1;var ha=0,ca=D;Q.hasMultipleRoots&&A.isHierarchyRoot(R)&&(u=u.slice(1),--O,ha=1,ca+=1);u=u.filter(function(ya){return ya.y1<=ca});var sa=d(S.rotation);sa&&u.forEach(function(ya){ya.x0+=sa;ya.x1+=sa});var ma=Math.min(O,D),ra=function(ya,ja){return[ya*Math.cos(ja),-ya*Math.sin(ja)]},qa=function(ya){return h.pathAnnulus(ya.rpx0,ya.rpx1,ya.x0,ya.x1,X,ba)},Y=function(ya){return X+f(ya.rpx1,
ya.transform.textPosAngle)[0]*(ya.transform.rCenter||0)+(ya.transform.x||0)},pa=function(ya){return ba+f(ya.rpx1,ya.transform.textPosAngle)[1]*(ya.transform.rCenter||0)+(ya.transform.y||0)};L=L.data(u,A.getPtId);L.enter().append("g").classed("slice",!0);E?L.exit().transition().each(function(){var ya=b.select(this);ya.select("path.surface").transition().attrTween("d",function(ja){var za=B(ja);return function(Ba){return qa(za(Ba))}});ya.select("g.slicetext").attr("opacity",0)}).remove():L.exit().remove();
L.order();var oa=null;if(E&&aa){var ua=A.getPtId(aa);L.each(function(ya){null===oa&&A.getPtId(ya)===ua&&(oa=ya.x1)})}D=L;E&&(D=D.transition().each("end",function(){var ya=b.select(this);A.setSliceCursor(ya,z,{hideOnRoot:!0,hideOnLeaves:!0,isTransitioning:!1})}));D.each(function(ya){var ja=b.select(this),za=h.ensureSingle(ja,"path","surface",function(Ia){Ia.style("pointer-events","all")});ya.rpx0=(ya.y0-ha)/ma*V;ya.rpx1=(ya.y1-ha)/ma*V;ya.xmid=(ya.x0+ya.x1)/2;ya.pxmid=ra(ya.rpx1,ya.xmid);ya.midangle=
-(ya.xmid-Math.PI/2);ya.startangle=-(ya.x0-Math.PI/2);ya.stopangle=-(ya.x1-Math.PI/2);ya.halfangle=.5*Math.min(h.angleDelta(ya.x0,ya.x1)||Math.PI,Math.PI);ya.ring=1-ya.rpx0/ya.rpx1;ya.rInscribed=m(ya,S);E?za.transition().attrTween("d",function(Ia){var Pa=I(Ia);return function(Fa){return qa(Pa(Fa))}}):za.attr("d",qa);ja.call(x,R,z,F,{eventDataKeys:y.eventDataKeys,transitionTime:y.CLICK_TRANSITION_TIME,transitionEasing:y.CLICK_TRANSITION_EASING}).call(A.setSliceCursor,z,{hideOnRoot:!0,hideOnLeaves:!0,
isTransitioning:z._transitioning});za.call(t,ya,S);ja=h.ensureSingle(ja,"g","slicetext");ja=h.ensureSingle(ja,"text","",function(Ia){Ia.attr("data-notex",1)});var Ba=h.ensureUniformFontSize(z,A.determineTextFont(S,ya,M.font));ja.text(C.formatSliceLabel(ya,R,S,F,M)).classed("slicetext",!0).attr("text-anchor","middle").call(e.font,Ba).call(l.convertToTspans,z);var Ma=e.bBox(ja.node());ya.transform=r(Ma,ya,Q);ya.transform.targetX=Y(ya);ya.transform.targetY=pa(ya);var Oa=function(Ia,Pa){Ia=Ia.transform;
p(Ia,Pa);Ia.fontSize=Ba.size;c(S.type,Ia,M);return h.getTextTransform(Ia)};E?ja.transition().attrTween("transform",function(Ia){var Pa=J(Ia);return function(Fa){return Oa(Pa(Fa),Ma)}}):ja.attr("transform",Oa(ya,Ma))})}function n(z){return k.partition().size([2*Math.PI,z.height+1])(z)}function m(z){return 0===z.rpx0&&h.isFullCircle([z.x0,z.x1])?1:Math.max(0,Math.min(1/(1+1/Math.sin(z.halfangle)),z.ring/2))}function f(z,F){return[z*Math.sin(F),-z*Math.cos(F)]}var b=a("d3"),k=a("d3-hierarchy"),e=a("../../components/drawing"),
h=a("../../lib"),l=a("../../lib/svg_text_utils");G=a("../bar/uniform_text");var c=G.recordMinTextSize,g=G.clearMinTextSize;G=a("../pie/plot");var d=a("../pie/helpers").getRotationAngle,p=G.computeTransform,r=G.transformInsideText,t=a("./style").styleOne,w=a("../bar/style").resizeText,x=a("./fx"),y=a("./constants"),A=a("./helpers");C.plot=function(z,F,D,u){var B=z._fullLayout,I=B._sunburstlayer,J,N=!D,M=!B.uniformtext.mode&&A.hasTransition(D);g("sunburst",B);F=I.selectAll("g.trace.sunburst").data(F,
function(E){return E[0].trace.uid});F.enter().append("g").classed("trace",!0).classed("sunburst",!0).attr("stroke-linejoin","round");F.order();M?(u&&(J=u()),b.transition().duration(D.duration).ease(D.easing).each("end",function(){J&&J()}).each("interrupt",function(){J&&J()}).each(function(){I.selectAll("g.trace").each(function(E){q(z,E,this,D)})})):(F.each(function(E){q(z,E,this,D)}),B.uniformtext.mode&&w(z,B._sunburstlayer.selectAll(".trace"),"sunburst"));N&&F.exit().remove()};C.formatSliceLabel=
function(z,F,D,u,B){var I=D.texttemplate,J=D.textinfo;if(!(I||J&&"none"!==J))return"";var N=B.separators,M=z.data.data;u=u[0].hierarchy;var E=A.isHierarchyRoot(z),L=A.getParent(u,z),Q=A.getValue(z);if(!I){var S=J.split("+");B=function(X){return-1!==S.indexOf(X)};var R=[];B("label")&&M.label&&R.push(M.label);M.hasOwnProperty("v")&&B("value")&&R.push(A.formatValue(M.v,N));if(!E){B("current path")&&R.push(A.getPath(z.data));z=0;B("percent parent")&&z++;B("percent entry")&&z++;B("percent root")&&z++;
var O=1<z;if(z){z=function(X){V=A.formatPercent(T,N);O&&(V+=" of "+X);R.push(V)};if(B("percent parent")&&!E){var T=Q/A.getValue(L);z("parent")}B("percent entry")&&(T=Q/A.getValue(F),z("entry"));B("percent root")&&(T=Q/A.getValue(u),z("root"))}}if(B("text")){var V=h.castOption(D,M.i,"text");h.isValidTextValue(V)&&R.push(V)}return R.join("\x3cbr\x3e")}I=h.castOption(D,M.i,"texttemplate");if(!I)return"";J={};M.label&&(J.label=M.label);M.hasOwnProperty("v")&&(J.value=M.v,J.valueLabel=A.formatValue(M.v,
N));J.currentPath=A.getPath(z.data);E||(J.percentParent=Q/A.getValue(L),J.percentParentLabel=A.formatPercent(J.percentParent,N),J.parent=A.getPtLabel(L));J.percentEntry=Q/A.getValue(F);J.percentEntryLabel=A.formatPercent(J.percentEntry,N);J.entry=A.getPtLabel(F);J.percentRoot=Q/A.getValue(u);J.percentRootLabel=A.formatPercent(J.percentRoot,N);J.root=A.getPtLabel(u);M.hasOwnProperty("color")&&(J.color=M.color);F=h.castOption(D,M.i,"text");if(h.isValidTextValue(F)||""===F)J.text=F;J.customdata=h.castOption(D,
M.i,"customdata");return h.texttemplateString(I,J,B._d3locale,J,D._meta||{})}},{"../../components/drawing":637,"../../lib":750,"../../lib/svg_text_utils":774,"../bar/style":906,"../bar/uniform_text":908,"../pie/helpers":1137,"../pie/plot":1141,"./constants":1273,"./fx":1275,"./helpers":1276,"./style":1281,d3:169,"d3-hierarchy":161}],1281:[function(a,G,C){function q(k,e,h){var l=e.data.data;e=!e.children;var c=l.i,g=f.castOption(h,c,"marker.line.color")||m.defaultLine;c=f.castOption(h,c,"marker.line.width")||
0;k.style("stroke-width",c).call(m.fill,l.color).call(m.stroke,g).style("opacity",e?h.leaf.opacity:null)}var n=a("d3"),m=a("../../components/color"),f=a("../../lib"),b=a("../bar/uniform_text").resizeText;G.exports={style:function(k){var e=k._fullLayout._sunburstlayer.selectAll(".trace");b(k,e,"sunburst");e.each(function(h){var l=n.select(this),c=h[0].trace;l.style("opacity",c.opacity);l.selectAll("path.surface").each(function(g){n.select(this).call(q,g,c)})})},styleOne:q}},{"../../components/color":615,
"../../lib":750,"../bar/uniform_text":908,d3:169}],1282:[function(a,G,C){function q(e){return{valType:"boolean",dflt:!1}}function n(e){return{show:{valType:"boolean",dflt:!1},start:{valType:"number",dflt:null,editType:"plot"},end:{valType:"number",dflt:null,editType:"plot"},size:{valType:"number",dflt:null,min:0,editType:"plot"},project:{x:q("x"),y:q("y"),z:q("z")},color:{valType:"color",dflt:m.defaultLine},usecolormap:{valType:"boolean",dflt:!1},width:{valType:"number",min:1,max:16,dflt:2},highlight:{valType:"boolean",
dflt:!0},highlightcolor:{valType:"color",dflt:m.defaultLine},highlightwidth:{valType:"number",min:1,max:16,dflt:2}}}var m=a("../../components/color");C=a("../../components/colorscale/attributes");var f=a("../../plots/template_attributes").hovertemplateAttrs,b=a("../../plots/attributes"),k=a("../../lib/extend").extendFlat;a=a("../../plot_api/edit_types").overrideAll;G=G.exports=a(k({z:{valType:"data_array"},x:{valType:"data_array"},y:{valType:"data_array"},text:{valType:"string",dflt:"",arrayOk:!0},
hovertext:{valType:"string",dflt:"",arrayOk:!0},hovertemplate:f(),connectgaps:{valType:"boolean",dflt:!1,editType:"calc"},surfacecolor:{valType:"data_array"}},C("",{colorAttr:"z or surfacecolor",showScaleDflt:!0,autoColorDflt:!1,editTypeOverride:"calc"}),{contours:{x:n("x"),y:n("y"),z:n("z")},hidesurface:{valType:"boolean",dflt:!1},lightposition:{x:{valType:"number",min:-1E5,max:1E5,dflt:10},y:{valType:"number",min:-1E5,max:1E5,dflt:1E4},z:{valType:"number",min:-1E5,max:1E5,dflt:0}},lighting:{ambient:{valType:"number",
min:0,max:1,dflt:.8},diffuse:{valType:"number",min:0,max:1,dflt:.8},specular:{valType:"number",min:0,max:2,dflt:.05},roughness:{valType:"number",min:0,max:1,dflt:.5},fresnel:{valType:"number",min:0,max:5,dflt:.2}},opacity:{valType:"number",min:0,max:1,dflt:1},opacityscale:{valType:"any",editType:"calc"},_deprecated:{zauto:k({},C.zauto,{}),zmin:k({},C.zmin,{}),zmax:k({},C.zmax,{})},hoverinfo:k({},b.hoverinfo),showlegend:k({},b.showlegend,{dflt:!1})}),"calc","nested");G.x.editType=G.y.editType=G.z.editType=
"calc+clearAxisTypes";G.transforms=void 0},{"../../components/color":615,"../../components/colorscale/attributes":622,"../../lib/extend":740,"../../plot_api/edit_types":781,"../../plots/attributes":795,"../../plots/template_attributes":877}],1283:[function(a,G,C){var q=a("../../components/colorscale/calc");G.exports=function(n,m){m.surfacecolor?q(n,m,{vals:m.surfacecolor,containerStr:"",cLetter:"c"}):q(n,m,{vals:m.z,containerStr:"",cLetter:"c"})}},{"../../components/colorscale/calc":623}],1284:[function(a,
G,C){function q(x,y,A){this.scene=x;this.uid=A;this.surface=y;this.data=null;this.showContour=[!1,!1,!1];this.contourStart=[null,null,null];this.contourEnd=[null,null,null];this.contourSize=[0,0,0];this.minValues=[Infinity,Infinity,Infinity];this.maxValues=[-Infinity,-Infinity,-Infinity];this.dataScaleY=this.dataScaleX=1;this.refineData=!0;this.objectOffset=[0,0,0]}function n(x,y){if(x<y)return 0;for(var A=0;0===Math.floor(x%y);)x/=y,A++;return A}function m(x){for(var y=[],A=0;A<r.length;A++)y.push(n(x,
r[A]));return y}function f(x,y,A){var z=A[8]+A[2]*y[0]+A[5]*y[1];x[0]=(A[6]+A[0]*y[0]+A[3]*y[1])/z;x[1]=(A[7]+A[1]*y[0]+A[4]*y[1])/z;return x}var b=a("gl-surface3d"),k=a("ndarray"),e=a("ndarray-linear-interpolate").d2,h=a("../heatmap/interp2d"),l=a("../heatmap/find_empties"),c=a("../../lib").isArrayOrTypedArray,g=a("../../lib/gl_format_color").parseColorScale,d=a("../../lib/str2rgbarray"),p=a("../../components/colorscale").extractOpts;a=q.prototype;a.getXat=function(x,y,A,z){x=c(this.data.x)?c(this.data.x[0])?
this.data.x[y][x]:this.data.x[x]:x;return void 0===A?x:z.d2l(x,0,A)};a.getYat=function(x,y,A,z){x=c(this.data.y)?c(this.data.y[0])?this.data.y[y][x]:this.data.y[y]:y;return void 0===A?x:z.d2l(x,0,A)};a.getZat=function(x,y,A,z){var F=this.data.z[y][x];null===F&&this.data.connectgaps&&this.data._interpolatedZ&&(F=this.data._interpolatedZ[y][x]);return void 0===A?F:z.d2l(F,0,A)};a.handlePick=function(x){if(x.object===this.surface){var y=Math.max(Math.min(Math.round((x.data.index[0]-1)/this.dataScaleX-
1),this.data.z[0].length-1),0),A=Math.max(Math.min(Math.round((x.data.index[1]-1)/this.dataScaleY-1),this.data._ylength-1),0);x.index=[y,A];x.traceCoordinate=[this.getXat(y,A),this.getYat(y,A),this.getZat(y,A)];x.dataCoordinate=[this.getXat(y,A,this.data.xcalendar,this.scene.fullSceneLayout.xaxis),this.getYat(y,A,this.data.ycalendar,this.scene.fullSceneLayout.yaxis),this.getZat(y,A,this.data.zcalendar,this.scene.fullSceneLayout.zaxis)];for(var z=0;3>z;z++){var F=x.dataCoordinate[z];null!==F&&void 0!==
F&&(x.dataCoordinate[z]*=this.scene.dataScale[z])}z=this.data.hovertext||this.data.text;Array.isArray(z)&&z[A]&&void 0!==z[A][y]?x.textLabel=z[A][y]:x.textLabel=z?z:"";x.data.dataCoordinate=x.dataCoordinate.slice();this.surface.highlight(x.data);this.scene.glplot.spikes.position=x.dataCoordinate;return!0}};var r=[2,3,5,7,11,13,17,19,23,29,31,37,41,43,47,53,59,61,67,71,73,79,83,89,97,101,103,107,109,113,127,131,137,139,149,151,157,163,167,173,179,181,191,193,197,199,211,223,227,229,233,239,241,251,
257,263,269,271,277,281,283,293,307,311,313,317,331,337,347,349,353,359,367,373,379,383,389,397,401,409,419,421,431,433,439,443,449,457,461,463,467,479,487,491,499,503,509,521,523,541,547,557,563,569,571,577,587,593,599,601,607,613,617,619,631,641,643,647,653,659,661,673,677,683,691,701,709,719,727,733,739,743,751,757,761,769,773,787,797,809,811,821,823,827,829,839,853,857,859,863,877,881,883,887,907,911,919,929,937,941,947,953,967,971,977,983,991,997,1009,1013,1019,1021,1031,1033,1039,1049,1051,
1061,1063,1069,1087,1091,1093,1097,1103,1109,1117,1123,1129,1151,1153,1163,1171,1181,1187,1193,1201,1213,1217,1223,1229,1231,1237,1249,1259,1277,1279,1283,1289,1291,1297,1301,1303,1307,1319,1321,1327,1361,1367,1373,1381,1399,1409,1423,1427,1429,1433,1439,1447,1451,1453,1459,1471,1481,1483,1487,1489,1493,1499,1511,1523,1531,1543,1549,1553,1559,1567,1571,1579,1583,1597,1601,1607,1609,1613,1619,1621,1627,1637,1657,1663,1667,1669,1693,1697,1699,1709,1721,1723,1733,1741,1747,1753,1759,1777,1783,1787,1789,
1801,1811,1823,1831,1847,1861,1867,1871,1873,1877,1879,1889,1901,1907,1913,1931,1933,1949,1951,1973,1979,1987,1993,1997,1999,2003,2011,2017,2027,2029,2039,2053,2063,2069,2081,2083,2087,2089,2099,2111,2113,2129,2131,2137,2141,2143,2153,2161,2179,2203,2207,2213,2221,2237,2239,2243,2251,2267,2269,2273,2281,2287,2293,2297,2309,2311,2333,2339,2341,2347,2351,2357,2371,2377,2381,2383,2389,2393,2399,2411,2417,2423,2437,2441,2447,2459,2467,2473,2477,2503,2521,2531,2539,2543,2549,2551,2557,2579,2591,2593,2609,
2617,2621,2633,2647,2657,2659,2663,2671,2677,2683,2687,2689,2693,2699,2707,2711,2713,2719,2729,2731,2741,2749,2753,2767,2777,2789,2791,2797,2801,2803,2819,2833,2837,2843,2851,2857,2861,2879,2887,2897,2903,2909,2917,2927,2939,2953,2957,2963,2969,2971,2999];a.calcXnums=function(x){var y,A=[];for(y=1;y<x;y++){var z=this.getXat(y-1,0),F=this.getXat(y,0);A[y-1]=F!==z&&void 0!==z&&null!==z&&void 0!==F&&null!==F?Math.abs(F-z):0}z=0;for(y=1;y<x;y++)z+=A[y-1];for(y=1;y<x;y++)A[y-1]=0===A[y-1]?1:Math.round(z/
A[y-1]);return A};a.calcYnums=function(x){var y,A=[];for(y=1;y<x;y++){var z=this.getYat(0,y-1),F=this.getYat(0,y);A[y-1]=F!==z&&void 0!==z&&null!==z&&void 0!==F&&null!==F?Math.abs(F-z):0}z=0;for(y=1;y<x;y++)z+=A[y-1];for(y=1;y<x;y++)A[y-1]=0===A[y-1]?1:Math.round(z/A[y-1]);return A};C=[1,2,4,6,12,24,36,48,60,120,180,240,360,720,840,1260];var t=C[9],w=C[13];a.estimateScale=function(x,y){y=0===y?this.calcXnums(x):this.calcYnums(x);if(0===y.length)y=void 0;else{for(var A=1,z=0;z<y.length;z++){var F=
y[z];if(1>A||1>F)A=void 0;else{A=m(A);F=m(F);for(var D=1,u=0;u<r.length;u++)D*=Math.pow(r[u],Math.max(A[u],F[u]));A=D}}y=A}for(z=1+y;z<t;)z*=2;for(;z>w;){z--;A=y=z;z=m(A);for(F=0;F<r.length;F++)if(0<z[F]){A=r[F];break}z=y/A;z++;z<t&&(z=w)}x=Math.round(z/x);return 1<x?x:1};a.refineCoords=function(x){var y=this.dataScaleX,A=this.dataScaleY,z=Math.floor(x[0].shape[0]*y+1)|0,F=Math.floor(x[0].shape[1]*A+1)|0,D=1+x[0].shape[0]+1,u=1+x[0].shape[1]+1;D=k(new Float32Array(D*u),[D,u]);y=[1/y,0,0,0,1/A,0,0,
0,1];for(A=0;A<x.length;++A){this.surface.padField(D,x[A]);for(var B=u=k(new Float32Array(z*F),[z,F]),I=D,J=f,N=y,M=[0,0],E=B.shape[0],L=B.shape[1],Q=0;Q<E;Q++)for(var S=0;S<L;S++)J(M,[Q,S],N),B.set(Q,S,e(I,M[0],M[1]));x[A]=u}};a.setContourLevels=function(){var x=[[],[],[]],y=[!1,!1,!1],A=!1,z,F;for(z=0;3>z;++z)if(this.showContour[z]&&(A=!0,0<this.contourSize[z]&&null!==this.contourStart[z]&&null!==this.contourEnd[z]&&this.contourEnd[z]>this.contourStart[z]))for(y[z]=!0,F=this.contourStart[z];F<this.contourEnd[z];F+=
this.contourSize[z]){var D=F*this.scene.dataScale[z];for(var u=x[z],B=!1,I=0;I<u.length;I++)if(D===u[I]){B=!0;break}!1===B&&u.push(D)}if(A){A=[[],[],[]];for(z=0;3>z;++z)this.showContour[z]&&(A[z]=y[z]?x[z]:this.scene.contourLevels[z]);this.surface.update({levels:A})}};a.update=function(x){var y=this.scene,A=y.fullSceneLayout,z=this.surface,F=g(x),D=y.dataScale,u=x.z[0].length,B=x._ylength;y=y.contourLevels;this.data=x;var I,J,N,M=[];for(I=0;3>I;I++)for(M[I]=[],J=0;J<u;J++)M[I][J]=[];for(J=0;J<u;J++)for(N=
0;N<B;N++)M[0][J][N]=this.getXat(J,N,x.xcalendar,A.xaxis),M[1][J][N]=this.getYat(J,N,x.ycalendar,A.yaxis),M[2][J][N]=this.getZat(J,N,x.zcalendar,A.zaxis);if(x.connectgaps)for(x._emptypoints=l(M[2]),h(M[2],x._emptypoints),x._interpolatedZ=[],J=0;J<u;J++)for(x._interpolatedZ[J]=[],N=0;N<B;N++)x._interpolatedZ[J][N]=M[2][J][N];for(I=0;3>I;I++)for(J=0;J<u;J++)for(N=0;N<B;N++)A=M[I][J][N],M[I][J][N]=null===A||void 0===A?NaN:M[I][J][N]*D[I];for(I=0;3>I;I++)for(J=0;J<u;J++)for(N=0;N<B;N++)A=M[I][J][N],null!==
A&&void 0!==A&&(this.minValues[I]>A&&(this.minValues[I]=A),this.maxValues[I]<A&&(this.maxValues[I]=A));for(I=0;3>I;I++)this.objectOffset[I]=.5*(this.minValues[I]+this.maxValues[I]);for(I=0;3>I;I++)for(J=0;J<u;J++)for(N=0;N<B;N++)A=M[I][J][N],null!==A&&void 0!==A&&(M[I][J][N]-=this.objectOffset[I]);A=[k(new Float32Array(u*B),[u,B]),k(new Float32Array(u*B),[u,B]),k(new Float32Array(u*B),[u,B])];for(I=0;3>I;I++)for(J=0;J<u;J++)for(N=0;N<B;N++)A[I].set(J,N,M[I][J][N]);M={colormap:F,levels:[[],[],[]],
showContour:[!0,!0,!0],showSurface:!x.hidesurface,contourProject:[[!1,!1,!1],[!1,!1,!1],[!1,!1,!1]],contourWidth:[1,1,1],contourColor:[[1,1,1,1],[1,1,1,1],[1,1,1,1]],contourTint:[1,1,1],dynamicColor:[[1,1,1,1],[1,1,1,1],[1,1,1,1]],dynamicWidth:[1,1,1],dynamicTint:[1,1,1],opacityscale:x.opacityscale,opacity:x.opacity};I=p(x);M.intensityBounds=[I.min,I.max];if(x.surfacecolor){I=k(new Float32Array(u*B),[u,B]);for(J=0;J<u;J++)for(N=0;N<B;N++)I.set(J,N,x.surfacecolor[N][J]);A.push(I)}else M.intensityBounds[0]*=
D[2],M.intensityBounds[1]*=D[2];if(w<A[0].shape[0]||w<A[0].shape[1])this.refineData=!1;!0===this.refineData&&(this.dataScaleX=this.estimateScale(A[0].shape[0],0),this.dataScaleY=this.estimateScale(A[0].shape[1],1),1===this.dataScaleX&&1===this.dataScaleY||this.refineCoords(A));x.surfacecolor&&(M.intensity=A.pop());u=[!0,!0,!0];B=["x","y","z"];for(I=0;3>I;++I)D=x.contours[B[I]],u[I]=D.highlight,M.showContour[I]=D.show||D.highlight,M.showContour[I]&&(M.contourProject[I]=[D.project.x,D.project.y,D.project.z],
D.show?(this.showContour[I]=!0,M.levels[I]=y[I],z.highlightColor[I]=M.contourColor[I]=d(D.color),z.highlightTint[I]=D.usecolormap?M.contourTint[I]=0:M.contourTint[I]=1,M.contourWidth[I]=D.width,this.contourStart[I]=D.start,this.contourEnd[I]=D.end,this.contourSize[I]=D.size):(this.showContour[I]=!1,this.contourStart[I]=null,this.contourEnd[I]=null,this.contourSize[I]=0),D.highlight&&(M.dynamicColor[I]=d(D.highlightcolor),M.dynamicWidth[I]=D.highlightwidth));y=F[0].rgb;F=F[F.length-1].rgb;y[0]===F[0]&&
y[1]===F[1]&&y[2]===F[2]&&y[3]===F[3]&&(M.vertexColor=!0);M.objectOffset=this.objectOffset;M.coords=A;z.update(M);z.visible=x.visible;z.enableDynamic=u;z.enableHighlight=u;z.snapToData=!0;"lighting"in x&&(z.ambientLight=x.lighting.ambient,z.diffuseLight=x.lighting.diffuse,z.specularLight=x.lighting.specular,z.roughness=x.lighting.roughness,z.fresnel=x.lighting.fresnel);"lightposition"in x&&(z.lightPosition=[x.lightposition.x,x.lightposition.y,x.lightposition.z])};a.dispose=function(){this.scene.glplot.remove(this.surface);
this.surface.dispose()};G.exports=function(x,y){var A=b({gl:x.glplot.gl}),z=new q(x,A,y.uid);A._trace=z;z.update(y);x.glplot.add(A);return z}},{"../../components/colorscale":627,"../../lib":750,"../../lib/gl_format_color":746,"../../lib/str2rgbarray":773,"../heatmap/find_empties":1042,"../heatmap/interp2d":1045,"gl-surface3d":325,ndarray:469,"ndarray-linear-interpolate":463}],1285:[function(a,G,C){function q(e,h,l,c){e=c("opacityscale");if("max"===e)h.opacityscale=[[0,.1],[1,1]];else if("min"===e)h.opacityscale=
[[0,1],[1,.1]];else if("extremes"===e){e=[];for(l=0;32>l;l++)c=l/31,e.push([c,Math.max(0,Math.min(1,.1+.9*(1-Math.pow(Math.sin(1*c*Math.PI),2))))]);h.opacityscale=e}else{a:if(l=0,!Array.isArray(e)||2>e.length||!e[0]||!e[e.length-1]||0!==+e[0][0]||1!==+e[e.length-1][0])e=!1;else{for(c=0;c<e.length;c++){var g=e[c];if(2!==g.length||+g[0]<l){e=!1;break a}l=+g[0]}e=!0}e||(h.opacityscale=void 0)}}function n(e,h,l){h in e&&!(l in e)&&(e[l]=e[h])}var m=a("../../registry"),f=a("../../lib"),b=a("../../components/colorscale/defaults"),
k=a("./attributes");G.exports={supplyDefaults:function(e,h,l,c){function g(y,A){return f.coerce(e,h,k,y,A)}l=g("x");var d=g("y");var p=g("z");if(!p||!p.length||l&&1>l.length||d&&1>d.length)h.visible=!1;else{h._xlength=Array.isArray(l)&&f.isArrayOrTypedArray(l[0])?p.length:p[0].length;h._ylength=p.length;m.getComponentMethod("calendars","handleTraceDefaults")(e,h,["x","y","z"],c);g("text");g("hovertext");g("hovertemplate");"lighting.ambient lighting.diffuse lighting.specular lighting.roughness lighting.fresnel lightposition.x lightposition.y lightposition.z hidesurface connectgaps opacity".split(" ").forEach(function(y){g(y)});
p=g("surfacecolor");var r=["x","y","z"];for(l=0;3>l;++l){var t="contours."+r[l],w=g(t+".show"),x=g(t+".highlight");if(w||x)for(d=0;3>d;++d)g(t+".project."+r[d]);w&&(g(t+".color"),g(t+".width"),g(t+".usecolormap"));x&&(g(t+".highlightcolor"),g(t+".highlightwidth"));g(t+".start");g(t+".end");g(t+".size")}p||(n(e,"zmin","cmin"),n(e,"zmax","cmax"),n(e,"zauto","cauto"));b(e,h,c,g,{prefix:"",cLetter:"c"});q(e,h,c,g);h._length=null}},opacityscaleDefaults:q}},{"../../components/colorscale/defaults":625,"../../lib":750,
"../../registry":882,"./attributes":1282}],1286:[function(a,G,C){G.exports={attributes:a("./attributes"),supplyDefaults:a("./defaults").supplyDefaults,colorbar:{min:"cmin",max:"cmax"},calc:a("./calc"),plot:a("./convert"),moduleType:"trace",name:"surface",basePlotModule:a("../../plots/gl3d"),categories:["gl3d","2dMap","showLegend"],meta:{}}},{"../../plots/gl3d":841,"./attributes":1282,"./calc":1283,"./convert":1284,"./defaults":1285}],1287:[function(a,G,C){C=a("../../components/annotations/attributes");
var q=a("../../lib/extend").extendFlat,n=a("../../plot_api/edit_types").overrideAll,m=a("../../plots/font_attributes"),f=a("../../plots/domain").attributes;a("../../constants/docs");(G.exports=n({domain:f({name:"table",trace:!0}),columnwidth:{valType:"number",arrayOk:!0,dflt:null},columnorder:{valType:"data_array"},header:{values:{valType:"data_array",dflt:[]},format:{valType:"data_array",dflt:[]},prefix:{valType:"string",arrayOk:!0,dflt:null},suffix:{valType:"string",arrayOk:!0,dflt:null},height:{valType:"number",
dflt:28},align:q({},C.align,{arrayOk:!0}),line:{width:{valType:"number",arrayOk:!0,dflt:1},color:{valType:"color",arrayOk:!0,dflt:"grey"}},fill:{color:{valType:"color",arrayOk:!0,dflt:"white"}},font:q({},m({arrayOk:!0}))},cells:{values:{valType:"data_array",dflt:[]},format:{valType:"data_array",dflt:[]},prefix:{valType:"string",arrayOk:!0,dflt:null},suffix:{valType:"string",arrayOk:!0,dflt:null},height:{valType:"number",dflt:20},align:q({},C.align,{arrayOk:!0}),line:{width:{valType:"number",arrayOk:!0,
dflt:1},color:{valType:"color",arrayOk:!0,dflt:"grey"}},fill:{color:{valType:"color",arrayOk:!0,dflt:"white"}},font:q({},m({arrayOk:!0}))}},"calc","from-root")).transforms=void 0},{"../../components/annotations/attributes":598,"../../constants/docs":720,"../../lib/extend":740,"../../plot_api/edit_types":781,"../../plots/domain":826,"../../plots/font_attributes":827}],1288:[function(a,G,C){var q=a("../../plots/get_data").getModuleCalcData,n=a("./plot");C.name="table";C.plot=function(m){var f=q(m.calcdata,
"table")[0];f.length&&n(m,f)};C.clean=function(m,f,b,k){m=k._has&&k._has("table");f=f._has&&f._has("table");m&&!f&&k._paperdiv.selectAll(".table").remove()}},{"../../plots/get_data":836,"./plot":1295}],1289:[function(a,G,C){var q=a("../../lib/gup").wrap;G.exports=function(){return q({})}},{"../../lib/gup":747}],1290:[function(a,G,C){G.exports={cellPad:8,columnExtentOffset:10,columnTitleOffset:28,emptyHeaderHeight:16,latexCheck:/^\$.*\$$/,goldenRatio:1.618,lineBreaker:"\x3cbr\x3e",maxDimensionCount:60,
overdrag:45,releaseTransitionDuration:120,releaseTransitionEase:"cubic-out",scrollbarCaptureWidth:18,scrollbarHideDelay:1E3,scrollbarHideDuration:1E3,scrollbarOffset:5,scrollbarWidth:8,transitionDuration:100,transitionEase:"cubic-out",uplift:5,wrapSpacer:" ",wrapSplitCharacter:" ",cn:{table:"table",tableControlView:"table-control-view",scrollBackground:"scroll-background",yColumn:"y-column",columnBlock:"column-block",scrollAreaClip:"scroll-area-clip",scrollAreaClipRect:"scroll-area-clip-rect",columnBoundary:"column-boundary",
columnBoundaryClippath:"column-boundary-clippath",columnBoundaryRect:"column-boundary-rect",columnCells:"column-cells",columnCell:"column-cell",cellRect:"cell-rect",cellText:"cell-text",cellTextHolder:"cell-text-holder",scrollbarKit:"scrollbar-kit",scrollbar:"scrollbar",scrollbarSlider:"scrollbar-slider",scrollbarGlyph:"scrollbar-glyph",scrollbarCaptureZone:"scrollbar-capture-zone"}}},{}],1291:[function(a,G,C){function q(d){if(Array.isArray(d)){for(var p=0,r=0;r<d.length;r++)p=Math.max(p,q(d[r]));
return p}return d}function n(d,p){return d+p}function m(d){d=d.slice();var p=Infinity,r=0,t;for(t=0;t<d.length;t++)Array.isArray(d[t])||(d[t]=[d[t]]),p=Math.min(p,d[t].length),r=Math.max(r,d[t].length);if(p!==r)for(t=0;t<d.length;t++)(p=r-d[t].length)&&(d[t]=d[t].concat(f(p)));return d}function f(d){for(var p=Array(d),r=0;r<d;r++)p[r]="";return p}function b(d){return d.calcdata.columns.reduce(function(p,r){return r.xIndex<d.xIndex?p+r.columnWidth:p},0)}function k(d,p){return Object.keys(d).map(function(r){return c({},
d[r],{auxiliaryBlocks:p})})}function e(d,p){for(var r={},t,w=0,x=0,y=h(),A=0,z=0,F=0;F<d.length;F++)if(t=d[F],y.rows.push({rowIndex:F,rowHeight:t}),x+=t,x>=p||F===d.length-1)r[w]=y,y.key=z++,y.firstRowIndex=A,y.lastRowIndex=F,y=h(),w+=x,A=F+1,x=0;return r}function h(){return{firstRowIndex:null,lastRowIndex:null,rows:[]}}var l=a("./constants"),c=a("../../lib/extend").extendFlat,g=a("fast-isnumeric");G.exports=function(d,p){var r=m(p.cells.values),t=function(E){return E.slice(p.header.values.length,
E.length)},w=m(p.header.values);w.length&&!w[0].length&&(w[0]=[""],w=m(w));var x=w.concat(t(r).map(function(){return f((w[0]||[""]).length)})),y=p.domain,A=Math.floor(d._fullLayout._size.w*(y.x[1]-y.x[0])),z=Math.floor(d._fullLayout._size.h*(y.y[1]-y.y[0])),F=p.header.values.length?x[0].map(function(){return p.header.height}):[l.emptyHeaderHeight],D=r.length?r[0].map(function(){return p.cells.height}):[],u=F.reduce(n,0);D=e(D,z-u+l.uplift);F=e(F,u);F=k(F,[]);D=k(D,F);var B={},I=p._fullInput.columnorder.concat(t(r.map(function(E,
L){return L}))),J=x.map(function(E,L){E=Array.isArray(p.columnwidth)?p.columnwidth[Math.min(L,p.columnwidth.length-1)]:p.columnwidth;return g(E)?Number(E):1}),N=J.reduce(n,0);J=J.map(function(E){return E/N*A});t=Math.max(q(p.header.line.width),q(p.cells.line.width));var M={key:p.uid+d._context.staticPlot,translateX:y.x[0]*d._fullLayout._size.w,translateY:d._fullLayout._size.h*(1-y.y[1]),size:d._fullLayout._size,width:A,maxLineWidth:t,height:z,columnOrder:I,groupHeight:z,rowBlocks:D,headerRowBlocks:F,
scrollY:0,cells:c({},p.cells,{values:r}),headerCells:c({},p.header,{values:x}),gdColumns:x.map(function(E){return E[0]}),gdColumnsOriginalOrder:x.map(function(E){return E[0]}),prevPages:[0,0],scrollbarState:{scrollbarScrollInProgress:!1},columns:x.map(function(E,L){B[E]=(B[E]||0)+1;return{key:E+"__"+B[E],label:E,specIndex:L,xIndex:I[L],xScale:b,x:void 0,calcdata:void 0,columnWidth:J[L]}})};M.columns.forEach(function(E){E.calcdata=M;E.x=b(E)});return M}},{"../../lib/extend":740,"./constants":1290,
"fast-isnumeric":241}],1292:[function(a,G,C){function q(m){var f=(m=m.rowBlocks[m.page])?m.rows[0].rowIndex:0;return[f,m?f+m.rows.length:0]}var n=a("../../lib/extend").extendFlat;C.splitToPanels=function(m){var f=[0,0],b=n({},m,{key:"header",type:"header",page:0,prevPages:f,currentRepaint:[null,null],dragHandle:!0,values:m.calcdata.headerCells.values[m.specIndex],rowBlocks:m.calcdata.headerRowBlocks,calcdata:n({},m.calcdata,{cells:m.calcdata.headerCells})}),k=n({},m,{key:"cells1",type:"cells",page:0,
prevPages:f,currentRepaint:[null,null],dragHandle:!1,values:m.calcdata.cells.values[m.specIndex],rowBlocks:m.calcdata.rowBlocks});m=n({},m,{key:"cells2",type:"cells",page:1,prevPages:f,currentRepaint:[null,null],dragHandle:!1,values:m.calcdata.cells.values[m.specIndex],rowBlocks:m.calcdata.rowBlocks});return[k,m,b]};C.splitToCells=function(m){var f=q(m);return(m.values||[]).slice(f[0],f[1]).map(function(b,k){var e="string"===typeof b&&b.match(/[<$&> ]/)?"_keybuster_"+Math.random():"";return{keyWithinBlock:k+
e,key:f[0]+k,column:m,calcdata:m.calcdata,page:m.page,rowBlocks:m.rowBlocks,value:b}})}},{"../../lib/extend":740}],1293:[function(a,G,C){function q(b,k){var e=b.header.values.length;b=(b.columnorder||[]).slice(0,e);var h=b.slice().sort(function(c,g){return c-g});b=b.map(function(c){return h.indexOf(c)});for(var l=b.length;l<e;l++)b.push(l);k("columnorder",b)}var n=a("../../lib"),m=a("./attributes"),f=a("../../plots/domain").defaults;G.exports=function(b,k,e,h){function l(c,g){return n.coerce(b,k,
m,c,g)}f(k,h,l);l("columnwidth");l("header.values");l("header.format");l("header.align");l("header.prefix");l("header.suffix");l("header.height");l("header.line.width");l("header.line.color");l("header.fill.color");n.coerceFont(l,"header.font",n.extendFlat({},h.font));q(k,l);l("cells.values");l("cells.format");l("cells.align");l("cells.prefix");l("cells.suffix");l("cells.height");l("cells.line.width");l("cells.line.color");l("cells.fill.color");n.coerceFont(l,"cells.font",n.extendFlat({},h.font));
k._length=null}},{"../../lib":750,"../../plots/domain":826,"./attributes":1287}],1294:[function(a,G,C){G.exports={attributes:a("./attributes"),supplyDefaults:a("./defaults"),calc:a("./calc"),plot:a("./plot"),moduleType:"trace",name:"table",basePlotModule:a("./base_plot"),categories:["noOpacity"],meta:{}}},{"./attributes":1287,"./base_plot":1288,"./calc":1289,"./defaults":1293,"./plot":1295}],1295:[function(a,G,C){function q(ka){return Math.ceil(ka.calcdata.maxLineWidth/2)}function n(ka,ha){return"clip"+
ka._fullLayout._uid+"_columnBoundaryClippath_"+ha.calcdata.key+"_"+ha.specIndex}function m(ka){return[].concat.apply([],ka.map(function(ha){return ha})).map(function(ha){return ha.__data__})}function f(ka,ha,ca){var sa=ka.selectAll("."+L.cn.scrollbarKit).data(S.repeat,S.keyFun);sa.enter().append("g").classed(L.cn.scrollbarKit,!0).style("shape-rendering","geometricPrecision");sa.each(function(ra){var qa=ra.scrollbarState;var Y=ra.rowBlocks;Y=M(Y,Y.length-1)+(Y.length?E(Y[Y.length-1],Infinity):1);qa.totalHeight=
Y;qa.scrollableAreaHeight=ra.groupHeight-A(ra);qa.currentlyVisibleHeight=Math.min(qa.totalHeight,qa.scrollableAreaHeight);qa.ratio=qa.currentlyVisibleHeight/qa.totalHeight;qa.barLength=Math.max(qa.ratio*qa.currentlyVisibleHeight,L.goldenRatio*L.scrollbarWidth);qa.barWiggleRoom=qa.currentlyVisibleHeight-qa.barLength;qa.wiggleRoom=Math.max(0,qa.totalHeight-qa.scrollableAreaHeight);qa.topY=0===qa.barWiggleRoom?0:ra.scrollY/qa.wiggleRoom*qa.barWiggleRoom;qa.bottomY=qa.topY+qa.barLength;qa.dragMultiplier=
qa.wiggleRoom/qa.barWiggleRoom}).attr("transform",function(ra){return"translate("+(ra.width+L.scrollbarWidth/2+L.scrollbarOffset)+" "+A(ra)+")"});sa=sa.selectAll("."+L.cn.scrollbar).data(S.repeat,S.keyFun);sa.enter().append("g").classed(L.cn.scrollbar,!0);var ma=sa.selectAll("."+L.cn.scrollbarSlider).data(S.repeat,S.keyFun);ma.enter().append("g").classed(L.cn.scrollbarSlider,!0);ma.attr("transform",function(ra){return"translate(0 "+(ra.scrollbarState.topY||0)+")"});ma=ma.selectAll("."+L.cn.scrollbarGlyph).data(S.repeat,
S.keyFun);ma.enter().append("line").classed(L.cn.scrollbarGlyph,!0).attr("stroke","black").attr("stroke-width",L.scrollbarWidth).attr("stroke-linecap","round").attr("y1",L.scrollbarWidth/2);ma.attr("y2",function(ra){return ra.scrollbarState.barLength-L.scrollbarWidth/2}).attr("stroke-opacity",function(ra){return ra.columnDragInProgress||!ra.scrollbarState.barWiggleRoom||ca?0:.4});ma.transition().delay(0).duration(0);ma.transition().delay(L.scrollbarHideDelay).duration(L.scrollbarHideDuration).attr("stroke-opacity",
0);sa=sa.selectAll("."+L.cn.scrollbarCaptureZone).data(S.repeat,S.keyFun);sa.enter().append("line").classed(L.cn.scrollbarCaptureZone,!0).attr("stroke","white").attr("stroke-opacity",.01).attr("stroke-width",L.scrollbarCaptureWidth).attr("stroke-linecap","butt").attr("y1",0).on("mousedown",function(ra){var qa=Q.event.y,Y=this.getBoundingClientRect(),pa=ra.scrollbarState;qa-=Y.top;Y=Q.scale.linear().domain([0,pa.scrollableAreaHeight]).range([0,pa.totalHeight]).clamp(!0);pa.topY<=qa&&qa<=pa.bottomY||
D(ha,ka,null,Y(qa-pa.barLength/2))(ra)}).call(Q.behavior.drag().origin(function(ra){Q.event.stopPropagation();ra.scrollbarState.scrollbarScrollInProgress=!0;return ra}).on("drag",D(ha,ka)).on("dragend",function(){}));sa.attr("y2",function(ra){return ra.scrollbarState.scrollableAreaHeight});ha._context.staticPlot&&(ma.remove(),sa.remove())}function b(ka,ha,ca,sa){ca=ca.selectAll("."+L.cn.columnCells).data(S.repeat,S.keyFun);ca.enter().append("g").classed(L.cn.columnCells,!0);ca.exit().remove();ca=
k(ca);c(ca);var ma=e(ca);d(ma);ma=l(ca);ma=h(ma);g(ma);p(ma,ha,sa,ka);N(ca)}function k(ka){ka=ka.selectAll("."+L.cn.columnCell).data(ba.splitToCells,function(ha){return ha.keyWithinBlock});ka.enter().append("g").classed(L.cn.columnCell,!0);ka.exit().remove();return ka}function e(ka){ka=ka.selectAll("."+L.cn.cellRect).data(S.repeat,function(ha){return ha.keyWithinBlock});ka.enter().append("rect").classed(L.cn.cellRect,!0);return ka}function h(ka){ka=ka.selectAll("."+L.cn.cellText).data(S.repeat,function(ha){return ha.keyWithinBlock});
ka.enter().append("text").classed(L.cn.cellText,!0).style("cursor",function(){return"auto"}).on("mousedown",function(){Q.event.stopPropagation()});return ka}function l(ka){ka=ka.selectAll("."+L.cn.cellTextHolder).data(S.repeat,function(ha){return ha.keyWithinBlock});ka.enter().append("g").classed(L.cn.cellTextHolder,!0).style("shape-rendering","geometricPrecision");return ka}function c(ka){ka.each(function(ha,ca){var sa=ha.calcdata.cells.font,ma=ha.column.specIndex;sa={size:t(sa.size,ma,ca),color:t(sa.color,
ma,ca),family:t(sa.family,ma,ca)};ha.rowNumber=ha.key;ha.align=t(ha.calcdata.cells.align,ma,ca);ha.cellBorderWidth=t(ha.calcdata.cells.line.width,ma,ca);ha.font=sa})}function g(ka){ka.each(function(ha){R.font(Q.select(this),ha.font)})}function d(ka){ka.attr("width",function(ha){return ha.column.columnWidth}).attr("stroke-width",function(ha){return ha.cellBorderWidth}).each(function(ha){var ca=Q.select(this);aa.stroke(ca,t(ha.calcdata.cells.line.color,ha.column.specIndex,ha.rowNumber));aa.fill(ca,
t(ha.calcdata.cells.fill.color,ha.column.specIndex,ha.rowNumber))})}function p(ka,ha,ca,sa){ka.text(function(ma){var ra=ma.column.specIndex,qa=ma.rowNumber,Y=ma.value,pa="string"===typeof Y,oa=pa&&Y.match(/<br>/i),ua=!pa||oa;ma.mayHaveMarkup=pa&&Y.match(/[<&>]/);Y="string"===typeof Y&&Y.match(L.latexCheck);pa=(ma.latex=Y)?"":t(ma.calcdata.cells.prefix,ra,qa)||"";var ya=Y?"":t(ma.calcdata.cells.suffix,ra,qa)||"";ra=Y?null:t(ma.calcdata.cells.format,ra,qa)||null;ra=pa+(ra?Q.format(ra)(ma.value):ma.value)+
ya;var ja;ma.wrappingNeeded=!ma.wrapped&&!ua&&!Y&&(ja=-1!==ra.indexOf(L.wrapSplitCharacter));ma.cellHeightMayIncrease=oa||Y||ma.mayHaveMarkup||(void 0===ja?-1!==ra.indexOf(L.wrapSplitCharacter):ja);ma.needsConvertToTspans=ma.mayHaveMarkup||ma.wrappingNeeded||ma.latex;ma.wrappingNeeded?(oa=(" "===L.wrapSplitCharacter?ra.replace(/<a href=/ig,"\x3ca_href\x3d"):ra).split(L.wrapSplitCharacter),oa=" "===L.wrapSplitCharacter?oa.map(function(za){return za.replace(/<a_href=/ig,"\x3ca href\x3d")}):oa,ma.fragments=
oa.map(function(za){return{text:za,width:null}}),ma.fragments.push({fragment:L.wrapSpacer,width:null}),ma=oa.join(L.lineBreaker)+L.lineBreaker+L.wrapSpacer):(delete ma.fragments,ma=ra);return ma}).attr("dy",function(ma){return ma.needsConvertToTspans?0:"0.75em"}).each(function(ma){var ra=Q.select(this),qa=ma.wrappingNeeded?B:I;ma.needsConvertToTspans?O.convertToTspans(ra,sa,qa(ca,this,ha,sa,ma)):Q.select(this.parentNode).attr("transform",function(Y){return"translate("+J(Y)+" "+L.cellPad+")"}).attr("text-anchor",
function(Y){return{left:"start",center:"middle",right:"end"}[Y.align]})})}function r(ka,ha,ca){var sa=ha.gdColumnsOriginalOrder;ha.gdColumns.sort(function(ma,ra){return ca[sa.indexOf(ma)]-ca[sa.indexOf(ra)]});ha.columnorder=ca;ka.emit("plotly_restyle")}function t(ka,ha,ca){return Array.isArray(ka)?(ka=ka[Math.min(ha,ka.length-1)],Array.isArray(ka)?ka[Math.min(ca,ka.length-1)]:ka):ka}function w(ka,ha,ca){ka.transition().ease(L.releaseTransitionEase).duration(L.releaseTransitionDuration).attr("transform",
"translate("+ha.x+" "+ca+")")}function x(ka){return"cells"===ka.type}function y(ka){return"header"===ka.type}function A(ka){return(ka.rowBlocks.length?ka.rowBlocks[0].auxiliaryBlocks:[]).reduce(function(ha,ca){return ha+E(ca,Infinity)},0)}function z(ka,ha,ca){for(var sa=[],ma=0,ra=0;ra<ka.length;ra++){for(var qa=ka[ra],Y=qa.rows,pa=0,oa=0;oa<Y.length;oa++)pa+=Y[oa].rowHeight;qa.allRowsHeight=pa;qa=ha;Y=qa+ca;qa<ma+pa&&Y>ma&&sa.push(ra);ma+=pa}return sa}function F(ka,ha,ca){var sa=m(ha)[0];if(void 0!==
sa){var ma=sa.rowBlocks,ra=sa.calcdata,qa=M(ma,ma.length),Y=sa.calcdata.groupHeight-A(sa),pa=ra.scrollY=Math.max(0,Math.min(qa-Y,ra.scrollY)),oa=z(ma,pa,Y);1===oa.length&&(oa[0]===ma.length-1?oa.unshift(oa[0]-1):oa.push(oa[0]+1));oa[0]%2&&oa.reverse();ha.each(function(ua,ya){ua.page=oa[ya];ua.scrollY=pa});ha.attr("transform",function(ua){return"translate(0 "+(M(ua.rowBlocks,ua.page)-ua.scrollY)+")"});ka&&(u(ka,ca,ha,oa,sa.prevPages,sa,0),u(ka,ca,ha,oa,sa.prevPages,sa,1),f(ca,ka))}}function D(ka,ha,
ca,sa){return function(ma){var ra=ma.calcdata?ma.calcdata:ma;ma=ha.filter(function(pa){return ra.key===pa.key});var qa=ca||ra.scrollbarState.dragMultiplier,Y=ra.scrollY;ra.scrollY=void 0===sa?ra.scrollY+qa*Q.event.dy:sa;qa=ma.selectAll("."+L.cn.yColumn).selectAll("."+L.cn.columnBlock).filter(x);F(ka,qa,ma);return ra.scrollY===Y}}function u(ka,ha,ca,sa,ma,ra,qa){sa[qa]!==ma[qa]&&(clearTimeout(ra.currentRepaint[qa]),ra.currentRepaint[qa]=setTimeout(function(){var Y=ca.filter(function(pa,oa){return oa===
qa&&sa[oa]!==ma[oa]});b(ka,ha,Y,ca);ma[qa]=sa[qa]}))}function B(ka,ha,ca,sa){return function(){var ma=Q.select(ha.parentNode);ma.each(function(ra){var qa=ra.fragments;ma.selectAll("tspan.line").each(function(Ba,Ma){qa[Ma].width=this.getComputedTextLength()});var Y=qa[qa.length-1].width,pa=qa.slice(0,-1),oa=[],ua=0,ya=ra.column.columnWidth-2*L.cellPad;for(ra.value="";pa.length;){var ja=pa.shift();var za=ja.width+Y;ua+za>ya&&(ra.value+=oa.join(L.wrapSpacer)+L.lineBreaker,oa=[],ua=0);oa.push(ja.text);
ua+=za}ua&&(ra.value+=oa.join(L.wrapSpacer));ra.wrapped=!0});ma.selectAll("tspan.line").remove();p(ma.select("."+L.cn.cellText),ca,ka,sa);Q.select(ha.parentNode.parentNode).call(N)}}function I(ka,ha,ca,sa,ma){return function(){if(!ma.settledY){var ra=Q.select(ha.parentNode),qa=ma.rowBlocks[ma.page],Y=ma.key-qa.firstRowIndex,pa=qa.rows[Y].rowHeight,oa=ma.cellHeightMayIncrease?ha.parentNode.getBoundingClientRect().height+2*L.cellPad:pa;pa=Math.max(oa,pa);pa-qa.rows[Y].rowHeight&&(qa.rows[Y].rowHeight=
pa,ka.selectAll("."+L.cn.columnCell).call(N),F(null,ka.filter(x),0),f(ca,sa,!0));ra.attr("transform",function(){var ua=this.parentNode.getBoundingClientRect(),ya=Q.select(this.parentNode).select("."+L.cn.cellRect).node().getBoundingClientRect(),ja=this.transform.baseVal.consolidate();ua=ya.top-ua.top+(ja?ja.matrix.f:L.cellPad);return"translate("+J(ma,Q.select(this.parentNode).select("."+L.cn.cellTextHolder).node().getBoundingClientRect().width)+" "+ua+")"});ma.settledY=!0}}}function J(ka,ha){switch(ka.align){case "left":return L.cellPad;
case "right":return ka.column.columnWidth-(ha||0)-L.cellPad;case "center":return(ka.column.columnWidth-(ha||0))/2;default:return L.cellPad}}function N(ka){ka.attr("transform",function(ha){var ca=ha.rowBlocks[0].auxiliaryBlocks.reduce(function(sa,ma){return sa+E(ma,Infinity)},0);return"translate(0 "+(E(ha.rowBlocks[ha.page],ha.key)+ca)+")"}).selectAll("."+L.cn.cellRect).attr("height",function(ha){var ca=ha.rowBlocks[ha.page];return ca.rows[ha.key-ca.firstRowIndex].rowHeight})}function M(ka,ha){var ca=
0;for(--ha;0<=ha;ha--){var sa=ka[ha];var ma=sa.allRowsHeight;if(void 0!==ma)sa=ma;else{for(var ra=ma=0;ra<sa.rows.length;ra++)ma+=sa.rows[ra].rowHeight;sa=sa.allRowsHeight=ma}ca+=sa}return ca}function E(ka,ha){for(var ca=0,sa=0;sa<ka.rows.length&&ka.rows[sa].rowIndex<ha;sa++)ca+=ka.rows[sa].rowHeight;return ca}var L=a("./constants"),Q=a("d3"),S=a("../../lib/gup"),R=a("../../components/drawing"),O=a("../../lib/svg_text_utils"),T=a("../../lib").raiseToTop,V=a("../../lib").cancelTransition,X=a("./data_preparation_helper"),
ba=a("./data_split_helpers"),aa=a("../../components/color");G.exports=function(ka,ha){var ca=!ka._context.staticPlot;ha=ka._fullLayout._paper.selectAll("."+L.cn.table).data(ha.map(function(Y){Y=S.unwrap(Y).trace;return X(ka,Y)}),S.keyFun);ha.exit().remove();ha.enter().append("g").classed(L.cn.table,!0).attr("overflow","visible").style("box-sizing","content-box").style("position","absolute").style("left",0).style("overflow","visible").style("shape-rendering","crispEdges").style("pointer-events","all");
ha.attr("width",function(Y){return Y.width+Y.size.l+Y.size.r}).attr("height",function(Y){return Y.height+Y.size.t+Y.size.b}).attr("transform",function(Y){return"translate("+Y.translateX+","+Y.translateY+")"});var sa=ha.selectAll("."+L.cn.tableControlView).data(S.repeat,S.keyFun);ha=sa.enter().append("g").classed(L.cn.tableControlView,!0).style("box-sizing","content-box");if(ca){var ma="onwheel"in document?"wheel":"mousewheel";ha.on("mousemove",function(Y){sa.filter(function(pa){return Y===pa}).call(f,
ka)}).on(ma,function(Y){Y.scrollbarState.wheeling||(Y.scrollbarState.wheeling=!0,D(ka,sa,null,Y.scrollY+Q.event.deltaY)(Y)||(Q.event.stopPropagation(),Q.event.preventDefault()),Y.scrollbarState.wheeling=!1)}).call(f,ka,!0)}sa.attr("transform",function(Y){return"translate("+Y.size.l+" "+Y.size.t+")"});ha=sa.selectAll("."+L.cn.scrollBackground).data(S.repeat,S.keyFun);ha.enter().append("rect").classed(L.cn.scrollBackground,!0).attr("fill","none");ha.attr("width",function(Y){return Y.width}).attr("height",
function(Y){return Y.height});sa.each(function(Y){R.setClipUrl(Q.select(this),"clip"+ka._fullLayout._uid+"_scrollAreaBottomClip_"+Y.key,ka)});var ra=sa.selectAll("."+L.cn.yColumn).data(function(Y){return Y.columns},S.keyFun);ra.enter().append("g").classed(L.cn.yColumn,!0);ra.exit().remove();ra.attr("transform",function(Y){return"translate("+Y.x+" 0)"});ca&&ra.call(Q.behavior.drag().origin(function(Y){var pa=Q.select(this);w(pa,Y,-L.uplift);T(this);Y.calcdata.columnDragInProgress=!0;f(sa.filter(function(oa){return Y.calcdata.key===
oa.key}),ka);return Y}).on("drag",function(Y){var pa=Q.select(this);Y.x=Math.max(-L.overdrag,Math.min(Y.calcdata.width+L.overdrag-Y.columnWidth,Q.event.x));m(ra).filter(function(oa){return oa.calcdata.key===Y.calcdata.key}).sort(function(oa,ua){return(Y===oa?Q.event.x:oa.x)+oa.columnWidth/2-((Y===ua?Q.event.x:ua.x)+ua.columnWidth/2)}).forEach(function(oa,ua){oa.xIndex=ua;oa.x=Y===oa?oa.x:oa.xScale(oa)});ra.filter(function(oa){return Y!==oa}).transition().ease(L.transitionEase).duration(L.transitionDuration).attr("transform",
function(oa){return"translate("+oa.x+" 0)"});pa.call(V).attr("transform","translate("+Y.x+" -"+L.uplift+" )")}).on("dragend",function(Y){var pa=Q.select(this),oa=Y.calcdata;Y.x=Y.xScale(Y);Y.calcdata.columnDragInProgress=!1;w(pa,Y,0);r(ka,oa,oa.columns.map(function(ua){return ua.xIndex}))}));ra.each(function(Y){R.setClipUrl(Q.select(this),n(ka,Y),ka)});ma=ra.selectAll("."+L.cn.columnBlock).data(ba.splitToPanels,S.keyFun);ma.enter().append("g").classed(L.cn.columnBlock,!0).attr("id",function(Y){return Y.key});
ma.style("cursor",function(Y){return Y.dragHandle?"ew-resize":Y.calcdata.scrollbarState.barWiggleRoom?"ns-resize":"default"});var qa=ma.filter(y);ha=ma.filter(x);ca&&ha.call(Q.behavior.drag().origin(function(Y){Q.event.stopPropagation();return Y}).on("drag",D(ka,sa,-1)).on("dragend",function(){}));b(ka,sa,qa,ma);b(ka,sa,ha,ma);ca=sa.selectAll("."+L.cn.scrollAreaClip).data(S.repeat,S.keyFun);ca.enter().append("clipPath").classed(L.cn.scrollAreaClip,!0).attr("id",function(Y){return"clip"+ka._fullLayout._uid+
"_scrollAreaBottomClip_"+Y.key});ca=ca.selectAll("."+L.cn.scrollAreaClipRect).data(S.repeat,S.keyFun);ca.enter().append("rect").classed(L.cn.scrollAreaClipRect,!0).attr("x",-L.overdrag).attr("y",-L.uplift).attr("fill","none");ca.attr("width",function(Y){return Y.width+2*L.overdrag}).attr("height",function(Y){return Y.height+L.uplift});ra.selectAll("."+L.cn.columnBoundary).data(S.repeat,S.keyFun).enter().append("g").classed(L.cn.columnBoundary,!0);ca=ra.selectAll("."+L.cn.columnBoundaryClippath).data(S.repeat,
S.keyFun);ca.enter().append("clipPath").classed(L.cn.columnBoundaryClippath,!0);ca.attr("id",function(Y){return n(ka,Y)});ca=ca.selectAll("."+L.cn.columnBoundaryRect).data(S.repeat,S.keyFun);ca.enter().append("rect").classed(L.cn.columnBoundaryRect,!0).attr("fill","none");ca.attr("width",function(Y){return Y.columnWidth+2*q(Y)}).attr("height",function(Y){return Y.calcdata.height+2*q(Y)+L.uplift}).attr("x",function(Y){return-q(Y)}).attr("y",function(Y){return-q(Y)});F(null,ha,sa)}},{"../../components/color":615,
"../../components/drawing":637,"../../lib":750,"../../lib/gup":747,"../../lib/svg_text_utils":774,"./constants":1290,"./data_preparation_helper":1291,"./data_split_helpers":1292,d3:169}],1296:[function(a,G,C){C=a("../../plots/template_attributes").hovertemplateAttrs;var q=a("../../plots/template_attributes").texttemplateAttrs,n=a("../../components/colorscale/attributes"),m=a("../../plots/domain").attributes,f=a("../pie/attributes"),b=a("../sunburst/attributes"),k=a("./constants");a=a("../../lib/extend").extendFlat;
G.exports={labels:b.labels,parents:b.parents,values:b.values,branchvalues:b.branchvalues,count:b.count,level:b.level,maxdepth:b.maxdepth,tiling:{packing:{valType:"enumerated",values:"squarify binary dice slice slice-dice dice-slice".split(" "),dflt:"squarify",editType:"plot"},squarifyratio:{valType:"number",min:1,dflt:1,editType:"plot"},flip:{valType:"flaglist",flags:["x","y"],dflt:"",editType:"plot"},pad:{valType:"number",min:0,dflt:3,editType:"plot"},editType:"calc"},marker:a({pad:{t:{valType:"number",
min:0,editType:"plot"},l:{valType:"number",min:0,editType:"plot"},r:{valType:"number",min:0,editType:"plot"},b:{valType:"number",min:0,editType:"plot"},editType:"calc"},colors:b.marker.colors,depthfade:{valType:"enumerated",values:[!0,!1,"reversed"],editType:"style"},line:b.marker.line,editType:"calc"},n("marker",{colorAttr:"colors",anim:!1})),pathbar:{visible:{valType:"boolean",dflt:!0,editType:"plot"},side:{valType:"enumerated",values:["top","bottom"],dflt:"top",editType:"plot"},edgeshape:{valType:"enumerated",
values:["\x3e","\x3c","|","/","\\"],dflt:"\x3e",editType:"plot"},thickness:{valType:"number",min:12,editType:"plot"},textfont:a({},f.textfont,{}),editType:"calc"},text:f.text,textinfo:b.textinfo,texttemplate:q({editType:"plot"},{keys:k.eventDataKeys.concat(["label","value"])}),hovertext:f.hovertext,hoverinfo:b.hoverinfo,hovertemplate:C({},{keys:k.eventDataKeys}),textfont:f.textfont,insidetextfont:f.insidetextfont,outsidetextfont:a({},f.outsidetextfont,{}),textposition:{valType:"enumerated",values:"top left;top center;top right;middle left;middle center;middle right;bottom left;bottom center;bottom right".split(";"),
dflt:"top left",editType:"plot"},sort:f.sort,domain:m({name:"treemap",trace:!0,editType:"calc"})}},{"../../components/colorscale/attributes":622,"../../lib/extend":740,"../../plots/domain":826,"../../plots/template_attributes":877,"../pie/attributes":1132,"../sunburst/attributes":1270,"./constants":1299}],1297:[function(a,G,C){var q=a("../../plots/plots");C.name="treemap";C.plot=function(n,m,f,b){q.plotBasePlot(C.name,n,m,f,b)};C.clean=function(n,m,f,b){q.cleanBasePlot(C.name,n,m,f,b)}},{"../../plots/plots":862}],
1298:[function(a,G,C){var q=a("../sunburst/calc");C.calc=function(n,m){return q.calc(n,m)};C.crossTraceCalc=function(n){return q._runCrossTraceCalc("treemap",n)}},{"../sunburst/calc":1272}],1299:[function(a,G,C){G.exports={CLICK_TRANSITION_TIME:750,CLICK_TRANSITION_EASING:"poly",eventDataKeys:"currentPath root entry percentRoot percentEntry percentParent".split(" "),gapWithPathbar:1}},{}],1300:[function(a,G,C){var q=a("../../lib"),n=a("./attributes"),m=a("../../components/color"),f=a("../../plots/domain").defaults,
b=a("../bar/defaults").handleText,k=a("../bar/constants").TEXTPAD;a=a("../../components/colorscale");var e=a.hasColorscale,h=a.handleDefaults;G.exports=function(l,c,g,d){function p(x,y){return q.coerce(l,c,n,x,y)}g=p("labels");var r=p("parents");if(g&&g.length&&r&&r.length){(g=p("values"))&&g.length?p("branchvalues"):p("count");p("level");p("maxdepth");"squarify"===p("tiling.packing")&&p("tiling.squarifyratio");p("tiling.flip");p("tiling.pad");g=p("text");p("texttemplate");c.texttemplate||p("textinfo",
Array.isArray(g)?"text+label":"label");p("hovertext");p("hovertemplate");g=p("pathbar.visible");b(l,c,d,p,"auto",{hasPathbar:g,moduleHasSelected:!1,moduleHasUnselected:!1,moduleHasConstrain:!1,moduleHasCliponaxis:!1,moduleHasTextangle:!1,moduleHasInsideanchor:!1});p("textposition");r=-1!==c.textposition.indexOf("bottom");p("marker.line.width")&&p("marker.line.color",d.paper_bgcolor);var t=p("marker.colors"),w=c._hasColorscale=e(l,"marker","colors")||(l.marker||{}).coloraxis;w?h(l,c,d,p,{prefix:"marker.",
cLetter:"c"}):p("marker.depthfade",!(t||[]).length);t=2*c.textfont.size;p("marker.pad.t",r?t/4:t);p("marker.pad.l",t/4);p("marker.pad.r",t/4);p("marker.pad.b",r?t:t/4);w&&h(l,c,d,p,{prefix:"marker.",cLetter:"c"});c._hovered={marker:{line:{width:2,color:m.contrast(d.paper_bgcolor)}}};g&&(p("pathbar.thickness",c.pathbar.textfont.size+2*k),p("pathbar.side"),p("pathbar.edgeshape"));p("sort");f(c,d,p);c._length=null}else c.visible=!1}},{"../../components/color":615,"../../components/colorscale":627,"../../lib":750,
"../../plots/domain":826,"../bar/constants":894,"../bar/defaults":896,"./attributes":1296}],1301:[function(a,G,C){var q=a("d3"),n=a("../../lib"),m=a("../../components/drawing"),f=a("../../lib/svg_text_utils"),b=a("./partition"),k=a("./style").styleOne,e=a("./constants"),h=a("../sunburst/helpers"),l=a("../sunburst/fx");G.exports=function(c,g,d,p,r){var t=r.barDifY,w=r.width,x=r.height,y=r.viewX,A=r.viewY,z=r.pathSlice,F=r.toMoveInsideSlice,D=r.strTransform,u=r.hasTransition,B=r.handleSlicesExit,I=
r.makeUpdateSliceInterpolator,J=r.makeUpdateTextInterpolator,N={},M=c._fullLayout;r=g[0];var E=r.trace;r=r.hierarchy;var L=w/E._entryDepth,Q=h.listPath(d.data,"id");r=b(r.copy(),[w,x],{packing:"dice",pad:{inner:0,top:0,left:0,right:0,bottom:0}}).descendants();r=r.filter(function(S){var R=Q.indexOf(S.data.id);if(-1===R)return!1;S.x0=L*R;S.x1=L*(R+1);S.y0=t;S.y1=t+x;return S.onPathbar=!0});r.reverse();p=p.data(r,h.getPtId);p.enter().append("g").classed("pathbar",!0);B(p,!0,N,[w,x],z);p.order();u&&(p=
p.transition().each("end",function(){var S=q.select(this);h.setSliceCursor(S,c,{hideOnRoot:!1,hideOnLeaves:!1,isTransitioning:!1})}));p.each(function(S){S._hoverX=y(S.x1-Math.min(w,x)/2);S._hoverY=A(S.y1-x/2);var R=q.select(this),O=n.ensureSingle(R,"path","surface",function(T){T.style("pointer-events","all")});u?O.transition().attrTween("d",function(T){var V=I(T,!0,N,[w,x]);return function(X){return z(V(X))}}):O.attr("d",z);R.call(l,d,c,g,{styleOne:k,eventDataKeys:e.eventDataKeys,transitionTime:e.CLICK_TRANSITION_TIME,
transitionEasing:e.CLICK_TRANSITION_EASING}).call(h.setSliceCursor,c,{hideOnRoot:!1,hideOnLeaves:!1,isTransitioning:c._transitioning});O.call(k,S,E,{hovered:!1});S._text=(h.getPtLabel(S)||"").split("\x3cbr\x3e").join(" ")||"";R=n.ensureSingle(R,"g","slicetext");R=n.ensureSingle(R,"text","",function(T){T.attr("data-notex",1)});O=n.ensureUniformFontSize(c,h.determineTextFont(E,S,M.font,{onPathbar:!0}));R.text(S._text||" ").classed("slicetext",!0).attr("text-anchor","start").call(m.font,O).call(f.convertToTspans,
c);S.textBB=m.bBox(R.node());S.transform=F(S,{fontSize:O.size,onPathbar:!0});S.transform.fontSize=O.size;u?R.transition().attrTween("transform",function(T){var V=J(T,!0,N,[w,x]);return function(X){return D(V(X))}}):R.attr("transform",D(S))})}},{"../../components/drawing":637,"../../lib":750,"../../lib/svg_text_utils":774,"../sunburst/fx":1275,"../sunburst/helpers":1276,"./constants":1299,"./partition":1306,"./style":1308,d3:169}],1302:[function(a,G,C){var q=a("d3"),n=a("../../lib"),m=a("../../components/drawing"),
f=a("../../lib/svg_text_utils"),b=a("./partition"),k=a("./style").styleOne,e=a("./constants"),h=a("../sunburst/helpers"),l=a("../sunburst/fx"),c=a("../sunburst/plot").formatSliceLabel;G.exports=function(g,d,p,r,t){var w=t.width,x=t.height,y=t.viewX,A=t.viewY,z=t.pathSlice,F=t.toMoveInsideSlice,D=t.strTransform,u=t.hasTransition,B=t.handleSlicesExit,I=t.makeUpdateSliceInterpolator,J=t.makeUpdateTextInterpolator;t=t.prevEntry;var N=g._fullLayout,M=d[0].trace,E=-1!==M.textposition.indexOf("left"),L=
-1!==M.textposition.indexOf("right"),Q=-1!==M.textposition.indexOf("bottom"),S=!Q&&!M.marker.pad.t||Q&&!M.marker.pad.b,R=b(p,[w,x],{packing:M.tiling.packing,squarifyratio:M.tiling.squarifyratio,flipX:-1<M.tiling.flip.indexOf("x"),flipY:-1<M.tiling.flip.indexOf("y"),pad:{inner:M.tiling.pad,top:M.marker.pad.t,left:M.marker.pad.l,right:M.marker.pad.r,bottom:M.marker.pad.b}}).descendants(),O=Infinity,T=-Infinity;R.forEach(function(ba){var aa=ba.depth;aa>=M._maxDepth?(ba.x0=ba.x1=(ba.x0+ba.x1)/2,ba.y0=
ba.y1=(ba.y0+ba.y1)/2):(O=Math.min(O,aa),T=Math.max(T,aa))});r=r.data(R,h.getPtId);M._maxVisibleLayers=isFinite(T)?T-O+1:0;r.enter().append("g").classed("slice",!0);B(r,!1,{},[w,x],z);r.order();var V=null;if(u&&t){var X=h.getPtId(t);r.each(function(ba){null===V&&h.getPtId(ba)===X&&(V={x0:ba.x0,x1:ba.x1,y0:ba.y0,y1:ba.y1})})}u&&(r=r.transition().each("end",function(){var ba=q.select(this);h.setSliceCursor(ba,g,{hideOnRoot:!0,hideOnLeaves:!1,isTransitioning:!1})}));r.each(function(ba){var aa=h.isHeader(ba,
M);ba._hoverX=y(ba.x1-M.marker.pad.r);ba._hoverY=Q?A(ba.y1-M.marker.pad.b/2):A(ba.y0+M.marker.pad.t/2);var ka=q.select(this),ha=n.ensureSingle(ka,"path","surface",function(ca){ca.style("pointer-events","all")});u?ha.transition().attrTween("d",function(ca){var sa=I(ca,!1,V||{x0:0,x1:w,y0:0,y1:x},[w,x]);return function(ma){return z(sa(ma))}}):ha.attr("d",z);ka.call(l,p,g,d,{styleOne:k,eventDataKeys:e.eventDataKeys,transitionTime:e.CLICK_TRANSITION_TIME,transitionEasing:e.CLICK_TRANSITION_EASING}).call(h.setSliceCursor,
g,{isTransitioning:g._transitioning});ha.call(k,ba,M,{hovered:!1});ba._text=ba.x0===ba.x1||ba.y0===ba.y1?"":aa?S?"":h.getPtLabel(ba)||"":c(ba,p,M,d,N)||"";ka=n.ensureSingle(ka,"g","slicetext");ka=n.ensureSingle(ka,"text","",function(ca){ca.attr("data-notex",1)});ha=n.ensureUniformFontSize(g,h.determineTextFont(M,ba,N.font));ka.text(ba._text||" ").classed("slicetext",!0).attr("text-anchor",L?"end":E||aa?"start":"middle").call(m.font,ha).call(f.convertToTspans,g);ba.textBB=m.bBox(ka.node());ba.transform=
F(ba,{fontSize:ha.size,isHeader:aa});ba.transform.fontSize=ha.size;u?ka.transition().attrTween("transform",function(ca){var sa=J(ca,!1,V||{x0:0,x1:w,y0:0,y1:x},[w,x]);return function(ma){return D(sa(ma))}}):ka.attr("transform",D(ba))});return V}},{"../../components/drawing":637,"../../lib":750,"../../lib/svg_text_utils":774,"../sunburst/fx":1275,"../sunburst/helpers":1276,"../sunburst/plot":1280,"./constants":1299,"./partition":1306,"./style":1308,d3:169}],1303:[function(a,G,C){G.exports={moduleType:"trace",
name:"treemap",basePlotModule:a("./base_plot"),categories:[],animatable:!0,attributes:a("./attributes"),layoutAttributes:a("./layout_attributes"),supplyDefaults:a("./defaults"),supplyLayoutDefaults:a("./layout_defaults"),calc:a("./calc").calc,crossTraceCalc:a("./calc").crossTraceCalc,plot:a("./plot"),style:a("./style").style,colorbar:a("../scatter/marker_colorbar"),meta:{}}},{"../scatter/marker_colorbar":1176,"./attributes":1296,"./base_plot":1297,"./calc":1298,"./defaults":1300,"./layout_attributes":1304,
"./layout_defaults":1305,"./plot":1307,"./style":1308}],1304:[function(a,G,C){G.exports={treemapcolorway:{valType:"colorlist",editType:"calc"},extendtreemapcolors:{valType:"boolean",dflt:!0,editType:"calc"}}},{}],1305:[function(a,G,C){var q=a("../../lib"),n=a("./layout_attributes");G.exports=function(m,f){q.coerce(m,f,n,"treemapcolorway",f.colorway);q.coerce(m,f,n,"extendtreemapcolors",void 0)}},{"../../lib":750,"./layout_attributes":1304}],1306:[function(a,G,C){function q(f,b){switch(f){case "squarify":return m.treemapSquarify.ratio(b);
case "binary":return m.treemapBinary;case "dice":return m.treemapDice;case "slice":return m.treemapSlice;default:return m.treemapSliceDice}}function n(f,b,k){if(k.swapXY){var e=f.x0;f.x0=f.y0;f.y0=e;e=f.x1;f.x1=f.y1;f.y1=e}k.flipX&&(e=f.x0,f.x0=b[0]-f.x1,f.x1=b[0]-e);k.flipY&&(e=f.y0,f.y0=b[1]-f.y1,f.y1=b[1]-e);if(f=f.children)for(e=0;e<f.length;e++)n(f[e],b,k)}var m=a("d3-hierarchy");G.exports=function(f,b,k){var e=k.flipX,h=k.flipY,l="dice-slice"===k.packing,c=k.pad[h?"bottom":"top"],g=k.pad[e?
"right":"left"],d=k.pad[e?"left":"right"],p=k.pad[h?"top":"bottom"];if(l){var r=g;g=c;c=r;r=d;d=p;p=r}f=m.treemap().tile(q(k.packing,k.squarifyratio)).paddingInner(k.pad.inner).paddingLeft(g).paddingRight(d).paddingTop(c).paddingBottom(p).size(l?[b[1],b[0]]:b)(f);(l||e||h)&&n(f,b,{swapXY:l,flipX:e,flipY:h});return f}},{"d3-hierarchy":161}],1307:[function(a,G,C){function q(r){return f.isHierarchyRoot(r)?"":f.getPtId(r)}function n(r,t,w,x){var y=r._fullLayout,A=t[0],z=A.trace,F=A.hierarchy,D=f.findEntryWithLevel(F,
z.level),u=m.select(w);w=u.selectAll("g.pathbar");u=u.selectAll("g.slice");if(D){var B=f.isHierarchyRoot(D),I=!y.uniformtext.mode&&f.hasTransition(x),J=f.getMaxDepth(z),N=y._size,M=z.domain,E=N.w*(M.x[1]-M.x[0]);x=N.h*(M.y[1]-M.y[0]);var L=z.pathbar.thickness,Q=z.marker.line.width+g.gapWithPathbar;Q=z.pathbar.visible?-1<z.pathbar.side.indexOf("bottom")?x+Q:-(L+Q):0;var S={x0:E,x1:E,y0:Q,y1:Q+L},R=function(ja,za,Ba){var Ma=z.tiling.pad;return{x0:ja.x0-Ma-Ma<=za.x0?0:ja.x0-Ma+Ma>=za.x1?Ba[0]:ja.x0,
x1:ja.x1+Ma-Ma<=za.x0?0:ja.x1+Ma+Ma>=za.x1?Ba[0]:ja.x1,y0:ja.y0-Ma-Ma<=za.y0?0:ja.y0-Ma+Ma>=za.y1?Ba[1]:ja.y0,y1:ja.y1+Ma-Ma<=za.y0?0:ja.y1+Ma+Ma>=za.y1?Ba[1]:ja.y1}},O=null,T={},V={},X=null,ba=function(ja,za){return za?T[q(ja)]:V[q(ja)]};A.hasMultipleRoots&&B&&J++;z._maxDepth=J;z._backgroundColor=y.paper_bgcolor;z._entryDepth=D.data.depth;z._atRootLevel=B;var aa=-E/2+N.l+N.w*(M.x[1]+M.x[0])/2,ka=-x/2+N.t+N.h*(1-(M.y[1]+M.y[0])/2),ha=ka+0,ca=aa+0;A=function(ja){return ca+ja};B=function(ja){return ha+
ja};var sa=ca+0,ma=function(ja){ja.x=Math.max(sa,ja.x)},ra=z.pathbar.edgeshape;N=function(ja){var za=ca+Math.max(Math.min(ja.x0,ja.x0),0),Ba=ca+Math.min(Math.max(ja.x1,ja.x1),E),Ma=ha+ja.y0,Oa=ha+ja.y1;ja=L/2;var Ia={},Pa={};Ia.x=za;Pa.x=Ba;Ia.y=Pa.y=(Ma+Oa)/2;var Fa={x:za,y:Ma};Ma={x:Ba,y:Ma};Ba={x:Ba,y:Oa};za={x:za,y:Oa};"\x3e"===ra?(Fa.x-=ja,Ma.x-=ja,Ba.x-=ja,za.x-=ja):"/"===ra?(Ba.x-=ja,za.x-=ja,Ia.x-=ja/2,Pa.x-=ja/2):"\\"===ra?(Fa.x-=ja,Ma.x-=ja,Ia.x-=ja/2,Pa.x-=ja/2):"\x3c"===ra&&(Ia.x-=ja,
Pa.x-=ja);ma(Fa);ma(za);ma(Ia);ma(Ma);ma(Ba);ma(Pa);return"M"+(Fa.x+","+Fa.y)+"L"+(Ma.x+","+Ma.y)+"L"+(Pa.x+","+Pa.y)+"L"+(Ba.x+","+Ba.y)+"L"+(za.x+","+za.y)+"L"+(Ia.x+","+Ia.y)+"Z"};var qa=function(ja,za){var Ba=ja.x0,Ma=ja.x1,Oa=ja.y0,Ia=ja.y1;ja=ja.textBB;var Pa=-1!==z.textposition.indexOf("bottom"),Fa=-1!==z.textposition.indexOf("top")||za.isHeader&&!Pa?"start":Pa?"end":"middle",Na=-1!==z.textposition.indexOf("right"),$a=-1!==z.textposition.indexOf("left")||za.onPathbar,cb=z.marker.pad;za.isHeader&&
(Ba+=cb.l-k,Ma-=cb.r-k,Ba>=Ma&&(Ba=Ma=(Ba+Ma)/2),Pa?(Pa=Ia-cb.b,Oa<Pa&&Pa<Ia&&(Oa=Pa)):(Pa=Oa+cb.t,Oa<Pa&&Pa<Ia&&(Ia=Pa)));ja=e(Ba,Ma,Oa,Ia,ja,{isHorizontal:!1,constrained:!0,angle:0,anchor:Fa,leftToRight:$a?-1:Na?1:0});ja.fontSize=za.fontSize;ja.targetX=aa+ja.targetX;ja.targetY=ka+ja.targetY;if(isNaN(ja.targetX)||isNaN(ja.targetY))return{};Ba!==Ma&&Oa!==Ia&&h(z.type,ja,y);return{scale:ja.scale,rotate:ja.rotate,textX:ja.textX,textY:ja.textY,anchorX:ja.anchorX,anchorY:ja.anchorY,targetX:ja.targetX,
targetY:ja.targetY}},Y=function(ja,za){for(var Ba,Ma=0;!Ba&&Ma<J;)Ma++,(ja=ja.parent)?Ba=ba(ja,za):Ma=J;return Ba||{}},pa=function(ja,za,Ba,Ma){Ba=ba(ja,za);ja=za?S:(za=ba(D,za))?R(ja,za,Ma):{};return m.interpolate(Ba,ja)};M=function(ja,za,Ba,Ma){var Oa=ba(ja,za);Oa?Ma=Oa:za?Ma=S:O?ja.parent?(Ba=X||Ba)&&!za?Ma=R(ja,Ba,Ma):(Ma={},b.extendFlat(Ma,Y(ja,za))):Ma=ja:Ma={};return m.interpolate(Ma,{x0:ja.x0,x1:ja.x1,y0:ja.y0,y1:ja.y1})};var oa=function(ja,za,Ba,Ma){var Oa=ba(ja,za),Ia={};za?Ma=T[q(F)]||
S:(Ba=V[z.level]||Ba,Ma=ja.data.depth-D.data.depth<J?R(ja,Ba,Ma):{});b.extendFlat(Ia,{transform:qa({x0:Ma.x0,x1:Ma.x1,y0:Ma.y0,y1:Ma.y1,textBB:ja.textBB,_text:ja._text},{isHeader:f.isHeader(ja,z)})});Oa?Ia=Oa:ja.parent&&b.extendFlat(Ia,Y(ja,za));za=ja.transform;ja.x0!==ja.x1&&ja.y0!==ja.y1&&h(z.type,za,y);return m.interpolate(Ia,{transform:{scale:za.scale,rotate:za.rotate,textX:za.textX,textY:za.textY,anchorX:za.anchorX,anchorY:za.anchorY,targetX:za.targetX,targetY:za.targetY}})},ua=function(ja,za,
Ba,Ma,Oa){var Ia=Ma[0],Pa=Ma[1];I?ja.exit().transition().each(function(){var Fa=m.select(this);Fa.select("path.surface").transition().attrTween("d",function(Na){var $a=pa(Na,za,Ba,[Ia,Pa]);return function(cb){return Oa($a(cb))}});Fa.select("g.slicetext").attr("opacity",0)}).remove():ja.exit().remove()},ya=function(ja){var za=ja.transform;ja.x0!==ja.x1&&ja.y0!==ja.y1&&h(z.type,za,y);return b.getTextTransform({textX:za.textX,textY:za.textY,anchorX:za.anchorX,anchorY:za.anchorY,targetX:za.targetX,targetY:za.targetY,
scale:za.scale,rotate:za.rotate})};I&&(w.each(function(ja){T[q(ja)]={x0:ja.x0,x1:ja.x1,y0:ja.y0,y1:ja.y1};ja.transform&&(T[q(ja)].transform={textX:ja.transform.textX,textY:ja.transform.textY,anchorX:ja.transform.anchorX,anchorY:ja.transform.anchorY,targetX:ja.transform.targetX,targetY:ja.transform.targetY,scale:ja.transform.scale,rotate:ja.transform.rotate})}),u.each(function(ja){V[q(ja)]={x0:ja.x0,x1:ja.x1,y0:ja.y0,y1:ja.y1};ja.transform&&(V[q(ja)].transform={textX:ja.transform.textX,textY:ja.transform.textY,
anchorX:ja.transform.anchorX,anchorY:ja.transform.anchorY,targetX:ja.transform.targetX,targetY:ja.transform.targetY,scale:ja.transform.scale,rotate:ja.transform.rotate});!O&&f.isEntry(ja)&&(O=ja)}));X=d(r,t,D,u,{width:E,height:x,viewX:function(ja){return aa+ja},viewY:function(ja){return ka+ja},pathSlice:function(ja){var za=aa+ja.x0,Ba=aa+ja.x1,Ma=ka+ja.y0;ja=ka+ja.y1;return Ba-za&&ja-Ma?"M"+(za+","+(Ma+0))+"L"+(Ba-0+","+Ma)+"L"+(Ba+","+(ja-0))+"L"+(za+0+","+ja)+"Z":""},toMoveInsideSlice:qa,prevEntry:O,
makeUpdateSliceInterpolator:M,makeUpdateTextInterpolator:oa,handleSlicesExit:ua,hasTransition:I,strTransform:ya});z.pathbar.visible?p(r,t,D,w,{barDifY:Q,width:E,height:L,viewX:A,viewY:B,pathSlice:N,toMoveInsideSlice:qa,makeUpdateSliceInterpolator:M,makeUpdateTextInterpolator:oa,handleSlicesExit:ua,hasTransition:I,strTransform:ya}):w.remove()}else w.remove(),u.remove()}var m=a("d3"),f=a("../sunburst/helpers"),b=a("../../lib"),k=a("../bar/constants").TEXTPAD,e=a("../bar/plot").toMoveInsideBar;C=a("../bar/uniform_text");
var h=C.recordMinTextSize,l=C.clearMinTextSize,c=a("../bar/style").resizeText,g=a("./constants"),d=a("./draw_descendants"),p=a("./draw_ancestors");G.exports=function(r,t,w,x){var y=r._fullLayout,A=y._treemaplayer,z,F=!w;l("treemap",y);t=A.selectAll("g.trace.treemap").data(t,function(D){return D[0].trace.uid});t.enter().append("g").classed("trace",!0).classed("treemap",!0);t.order();!y.uniformtext.mode&&f.hasTransition(w)?(x&&(z=x()),m.transition().duration(w.duration).ease(w.easing).each("end",function(){z&&
z()}).each("interrupt",function(){z&&z()}).each(function(){A.selectAll("g.trace").each(function(D){n(r,D,this,w)})})):(t.each(function(D){n(r,D,this,w)}),y.uniformtext.mode&&c(r,y._treemaplayer.selectAll(".trace"),"treemap"));F&&t.exit().remove()}},{"../../lib":750,"../bar/constants":894,"../bar/plot":903,"../bar/style":906,"../bar/uniform_text":908,"../sunburst/helpers":1276,"./constants":1299,"./draw_ancestors":1301,"./draw_descendants":1302,d3:169}],1308:[function(a,G,C){function q(e,h,l,c){var g=
(c||{}).hovered;c=h.data.data;var d=c.i;c=c.color;var p=b.isHierarchyRoot(h),r=1;if(g)g=l._hovered.marker.line.color,d=l._hovered.marker.line.width;else if(p&&"rgba(0,0,0,0)"===c)r=0,g="rgba(0,0,0,0)",d=0;else if(g=f.castOption(l,d,"marker.line.color")||m.defaultLine,d=f.castOption(l,d,"marker.line.width")||0,!l._hasColorscale&&!h.onPathbar){var t=l.marker.depthfade;if(t&&(p=m.combine(m.addOpacity(l._backgroundColor,.75),c),!0===t?(t=b.getMaxDepth(l),h=isFinite(t)?b.isLeaf(h)?0:l._maxVisibleLayers-
(h.data.depth-l._entryDepth):h.data.height+1):(h=h.data.depth-l._entryDepth,l._atRootLevel||h++),0<h))for(l=0;l<h;l++)c=m.combine(m.addOpacity(p,.5*l/h),c)}e.style("stroke-width",d).call(m.fill,c).call(m.stroke,g).style("opacity",r)}var n=a("d3"),m=a("../../components/color"),f=a("../../lib"),b=a("../sunburst/helpers"),k=a("../bar/uniform_text").resizeText;G.exports={style:function(e){var h=e._fullLayout._treemaplayer.selectAll(".trace");k(e,h,"treemap");h.each(function(l){var c=n.select(this),g=
l[0].trace;c.style("opacity",g.opacity);c.selectAll("path.surface").each(function(d){n.select(this).call(q,d,g,{hovered:!1})})})},styleOne:q}},{"../../components/color":615,"../../lib":750,"../bar/uniform_text":908,"../sunburst/helpers":1276,d3:169}],1309:[function(a,G,C){C=a("../box/attributes");a=a("../../lib/extend").extendFlat;G.exports={y:C.y,x:C.x,x0:C.x0,y0:C.y0,name:a({},C.name,{}),orientation:a({},C.orientation,{}),bandwidth:{valType:"number",min:0,editType:"calc"},scalegroup:{valType:"string",
dflt:"",editType:"calc"},scalemode:{valType:"enumerated",values:["width","count"],dflt:"width",editType:"calc"},spanmode:{valType:"enumerated",values:["soft","hard","manual"],dflt:"soft",editType:"calc"},span:{valType:"info_array",items:[{valType:"any",editType:"calc"},{valType:"any",editType:"calc"}],editType:"calc"},line:{color:{valType:"color",editType:"style"},width:{valType:"number",min:0,dflt:2,editType:"style"},editType:"plot"},fillcolor:C.fillcolor,points:a({},C.boxpoints,{}),jitter:a({},
C.jitter,{}),pointpos:a({},C.pointpos,{}),width:a({},C.width,{}),marker:C.marker,text:C.text,hovertext:C.hovertext,hovertemplate:C.hovertemplate,box:{visible:{valType:"boolean",dflt:!1,editType:"plot"},width:{valType:"number",min:0,max:1,dflt:.25,editType:"plot"},fillcolor:{valType:"color",editType:"style"},line:{color:{valType:"color",editType:"style"},width:{valType:"number",min:0,editType:"style"},editType:"style"},editType:"plot"},meanline:{visible:{valType:"boolean",dflt:!1,editType:"plot"},
color:{valType:"color",editType:"style"},width:{valType:"number",min:0,editType:"style"},editType:"plot"},side:{valType:"enumerated",values:["both","positive","negative"],dflt:"both",editType:"calc"},offsetgroup:C.offsetgroup,alignmentgroup:C.alignmentgroup,selected:C.selected,unselected:C.unselected,hoveron:{valType:"flaglist",flags:["violins","points","kde"],dflt:"violins+points+kde",extras:["all"],editType:"style"}}},{"../../lib/extend":740,"../box/attributes":917}],1310:[function(a,G,C){function q(e,
h,l,c){function g(w){var x=p[w];x="multicategory"===l.type?l.r2c(x):l.d2c(x,0,e[h.valLetter+"calendar"]);return x===k?t[w]:x}var d=e.spanmode,p=e.span||[],r=[h.min,h.max],t=[h.min-2*c,h.max+2*c];c="soft"===d?t:"hard"===d?r:[g(0),g(1)];d={type:"linear",range:c};m.setConvert(d);d.cleanRange();return c}var n=a("../../lib"),m=a("../../plots/cartesian/axes"),f=a("../box/calc"),b=a("./helpers"),k=a("../../constants/numerical").BADNUM;G.exports=function(e,h){var l=f(e,h);if(l[0].t.empty)return l;for(var c=
e._fullLayout,g=m.getFromId(e,h["h"===h.orientation?"xaxis":"yaxis"]),d=Infinity,p=-Infinity,r=0,t=0,w=0;w<l.length;w++){var x=l[w],y=x.pts.map(b.extractVal),A=x;var z=x;var F=z.max-z.min;if(F)if(h.bandwidth)z=Math.max(h.bandwidth,F/1E4);else{var D=y.length,u=n.stdev(y,D-1,z.mean);z=Math.max(1.059*Math.min(u,(z.q3-z.q1)/1.349)*Math.pow(D,-.2),F/100)}else z=h.bandwidth?h.bandwidth:0;F=A.bandwidth=z;A=x.span=q(h,x,g,F);if(x.min===x.max&&0===F)A=x.span=[x.min,x.max],x.density=[{v:1,t:A[0]}],x.bandwidth=
F,r=Math.max(r,1);else{z=A[1]-A[0];D=Math.ceil(z/(F/3));z/=D;if(!isFinite(z)||!isFinite(D))return n.error("Something went wrong with computing the violin span"),l[0].t.empty=!0,l;F=b.makeKDE(x,h,y);x.density=Array(D);D=0;for(u=A[0];u<A[1]+z/2;D++,u+=z){var B=F(u);x.density[D]={v:B,t:u};r=Math.max(r,B)}}t=Math.max(t,y.length);d=Math.min(d,A[0]);p=Math.max(p,A[1])}d=m.findExtremes(g,[d,p],{padded:!0});h._extremes[g._id]=d;h.width?l[0].t.maxKDE=r:(c=c._violinScaleGroupStats,h=h.scalegroup,(g=c[h])?(g.maxKDE=
Math.max(g.maxKDE,r),g.maxCount=Math.max(g.maxCount,t)):c[h]={maxKDE:r,maxCount:t});l[0].t.labels.kde=n._(e,"kde:");return l}},{"../../constants/numerical":725,"../../lib":750,"../../plots/cartesian/axes":799,"../box/calc":918,"./helpers":1313}],1311:[function(a,G,C){var q=a("../box/cross_trace_calc").setPositionOffset,n=["v","h"];G.exports=function(m,f){var b=m.calcdata,k=f.xaxis;f=f.yaxis;for(var e=0;e<n.length;e++){for(var h=n[e],l="h"===h?f:k,c=[],g=0;g<b.length;g++){var d=b[g],p=d[0].t;d=d[0].trace;
!0!==d.visible||"violin"!==d.type||p.empty||d.orientation!==h||d.xaxis!==k._id||d.yaxis!==f._id||c.push(g)}q("violin",m,c,l)}}},{"../box/cross_trace_calc":919}],1312:[function(a,G,C){var q=a("../../lib"),n=a("../../components/color"),m=a("../box/defaults"),f=a("./attributes");G.exports=function(b,k,e,h){function l(t,w){return q.coerce(b,k,f,t,w)}function c(t,w){return q.coerce2(b,k,f,t,w)}m.handleSampleDefaults(b,k,l,h);if(!1!==k.visible){l("bandwidth");l("side");l("width")||(l("scalegroup",k.name),
l("scalemode"));h=l("span");var g;Array.isArray(h)&&(g="manual");l("spanmode",g);g=l("line.color",(b.marker||{}).color||e);e=l("line.width");var d=l("fillcolor",n.addOpacity(k.line.color,.5));m.handlePointsDefaults(b,k,l,{prefix:""});h=c("box.width");d=c("box.fillcolor",d);var p=c("box.line.color",g),r=c("box.line.width",e);l("box.visible",!!(h||d||p||r))||(k.box={visible:!1});g=c("meanline.color",g);e=c("meanline.width",e);l("meanline.visible",!(!g&&!e))||(k.meanline={visible:!1})}}},{"../../components/color":615,
"../../lib":750,"../box/defaults":920,"./attributes":1309}],1313:[function(a,G,C){var q=a("../../lib");C.makeKDE=function(n,m,f){var b=f.length,k=n.bandwidth,e=1/(b*k);return function(h){for(var l=0,c=0;c<b;c++){var g=(h-f[c])/k;l+=1/Math.sqrt(2*Math.PI)*Math.exp(-.5*g*g)}return e*l}};C.getPositionOnKdePath=function(n,m,f){if("h"===m.orientation){var b="y";var k="x"}else b="x",k="y";f=q.findPointOnPath(n.path,f,k,{pathLength:n.pathLength});n=n.posCenterPx;b=f[b];return[b,"both"===m.side?2*n-b:n]};
C.getKdeValue=function(n,m,f){var b=n.pts.map(C.extractVal);return C.makeKDE(n,m,b)(f)/n.posDensityScale};C.extractVal=function(n){return n.v}},{"../../lib":750}],1314:[function(a,G,C){var q=a("../../lib"),n=a("../../plots/cartesian/axes"),m=a("../box/hover"),f=a("./helpers");G.exports=function(b,k,e,h,l){var c=b.cd,g=c[0].trace,d=g.hoveron,p=-1!==d.indexOf("violins"),r=-1!==d.indexOf("kde"),t=[],w;if(p||r){var x=m.hoverOnBoxes(b,k,e,h);if(r&&0<x.length){var y=b.xa,A=b.ya;if("h"===g.orientation){var z=
k;r="y";var F=A;var D="x"}else z=e,r="x",F=y,D="y",y=A;var u=c[b.index];if(z>=u.span[0]&&z<=u.span[1]){var B=q.extendFlat({},b);A=y.c2p(z,!0);var I=f.getKdeValue(u,g,z);u=f.getPositionOnKdePath(u,g,A);var J=F._offset;F=F._length;B[r+"0"]=u[0];B[r+"1"]=u[1];B[D+"0"]=B[D+"1"]=A;B[D+"Label"]=D+": "+n.hoverLabelText(y,z)+", "+c[0].t.labels.kde+" "+I.toFixed(3);B.spikeDistance=x[0].spikeDistance;c=r+"Spike";B[c]=x[0][c];x[0].spikeDistance=void 0;x[0][c]=void 0;B.hovertemplate=!1;t.push(B);B={stroke:b.color};
B[r+"1"]=q.constrain(J+u[0],J,J+F);B[r+"2"]=q.constrain(J+u[1],J,J+F);B[D+"1"]=B[D+"2"]=y._offset+A}}p&&(t=t.concat(x))}-1!==d.indexOf("points")&&(w=m.hoverOnPoints(b,k,e));b=l.selectAll(".violinline-"+g.uid).data(B?[0]:[]);b.enter().append("line").classed("violinline-"+g.uid,!0).attr("stroke-width",1.5);b.exit().remove();b.attr(B);if("closest"===h)return w?[w]:t;w&&t.push(w);return t}},{"../../lib":750,"../../plots/cartesian/axes":799,"../box/hover":922,"./helpers":1313}],1315:[function(a,G,C){G.exports=
{attributes:a("./attributes"),layoutAttributes:a("./layout_attributes"),supplyDefaults:a("./defaults"),crossTraceDefaults:a("../box/defaults").crossTraceDefaults,supplyLayoutDefaults:a("./layout_defaults"),calc:a("./calc"),crossTraceCalc:a("./cross_trace_calc"),plot:a("./plot"),style:a("./style"),styleOnSelect:a("../scatter/style").styleOnSelect,hoverPoints:a("./hover"),selectPoints:a("../box/select"),moduleType:"trace",name:"violin",basePlotModule:a("../../plots/cartesian"),categories:"cartesian svg symbols oriented box-violin showLegend violinLayout zoomScale".split(" "),
meta:{}}},{"../../plots/cartesian":812,"../box/defaults":920,"../box/select":927,"../scatter/style":1182,"./attributes":1309,"./calc":1310,"./cross_trace_calc":1311,"./defaults":1312,"./hover":1314,"./layout_attributes":1316,"./layout_defaults":1317,"./plot":1318,"./style":1319}],1316:[function(a,G,C){C=a("../box/layout_attributes");a=a("../../lib").extendFlat;G.exports={violinmode:a({},C.boxmode,{}),violingap:a({},C.boxgap,{}),violingroupgap:a({},C.boxgroupgap,{})}},{"../../lib":750,"../box/layout_attributes":924}],
1317:[function(a,G,C){var q=a("../../lib"),n=a("./layout_attributes"),m=a("../box/layout_defaults");G.exports=function(f,b,k){m._supply(f,b,k,function(e,h){return q.coerce(f,b,n,e,h)},"violin")}},{"../../lib":750,"../box/layout_defaults":925,"./layout_attributes":1316}],1318:[function(a,G,C){var q=a("d3"),n=a("../../lib"),m=a("../../components/drawing"),f=a("../box/plot"),b=a("../scatter/line_points"),k=a("./helpers");G.exports=function(e,h,l,c){function g(t){t=b(t,{xaxis:p,yaxis:r,connectGaps:!0,
baseTolerance:.75,shape:"spline",simplify:!0,linearized:!0});return m.smoothopen(t[0],1)}var d=e._fullLayout,p=h.xaxis,r=h.yaxis;n.makeTraceGroups(c,l,"trace violins").each(function(t){var w=q.select(this);t=t[0];var x=t.t,y=t.trace;if(!0!==y.visible||x.empty)w.remove();else{var A=x.bPos,z=x.bdPos,F=h[x.valLetter+"axis"],D=h[x.posLetter+"axis"],u="both"===y.side,B=u||"positive"===y.side,I=u||"negative"===y.side;t=w.selectAll("path.violin").data(n.identity);t.enter().append("path").style("vector-effect",
"non-scaling-stroke").attr("class","violin");t.exit().remove();t.each(function(M){var E=q.select(this),L=M.density,Q=L.length,S=D.c2l(M.pos+A,!0),R=D.l2p(S);if(y.width)var O=x.maxKDE/z;else O=d._violinScaleGroupStats[y.scalegroup],O="count"===y.scalemode?O.maxKDE/z*(O.maxCount/M.pts.length):O.maxKDE/z;var T;if(B){var V=Array(Q);for(T=0;T<Q;T++){var X=V[T]={};X[x.posLetter]=S+L[T].v/O;X[x.valLetter]=F.c2l(L[T].t,!0)}var ba=g(V)}if(I){V=Array(Q);var aa=0;for(T=Q-1;aa<Q;aa++,T--)X=V[aa]={},X[x.posLetter]=
S-L[T].v/O,X[x.valLetter]=F.c2l(L[T].t,!0);aa=g(V)}u?ba=ba+"L"+aa.substr(1)+"Z":(S=[R,F.c2p(L[0].t)],L=[R,F.c2p(L[Q-1].t)],"h"===y.orientation&&(S.reverse(),L.reverse()),ba=B?"M"+S+"L"+ba.substr(1)+"L"+L:"M"+L+"L"+aa.substr(1)+"L"+S);E.attr("d",ba);M.posCenterPx=R;M.posDensityScale=O*z;M.path=E.node();M.pathLength=M.path.getTotalLength()/(u?2:1)});var J=y.box;t=J.width;J=(J.line||{}).width;u?(t*=z,J=0):B?(t=[0,z*t/2],J*={x:1,y:-1}[x.posLetter]):(t=[z*t/2,0],J*={x:-1,y:1}[x.posLetter]);f.plotBoxAndWhiskers(w,
{pos:D,val:F},y,{bPos:A,bdPos:t,bPosPxOffset:J});f.plotBoxMean(w,{pos:D,val:F},y,{bPos:A,bdPos:t,bPosPxOffset:J});if(!y.box.visible&&y.meanline.visible)var N=n.identity;N=w.selectAll("path.meanline").data(N||[]);N.enter().append("path").attr("class","meanline").style("fill","none").style("vector-effect","non-scaling-stroke");N.exit().remove();N.each(function(M){var E=F.c2p(M.mean,!0);M=k.getPositionOnKdePath(M,y,E);q.select(this).attr("d","h"===y.orientation?"M"+E+","+M[0]+"V"+M[1]:"M"+M[0]+","+E+
"H"+M[1])});f.plotPoints(w,{x:p,y:r},y,x)}})}},{"../../components/drawing":637,"../../lib":750,"../box/plot":926,"../scatter/line_points":1172,"./helpers":1313,d3:169}],1319:[function(a,G,C){var q=a("d3"),n=a("../../components/color"),m=a("../scatter/style").stylePoints;G.exports=function(f){var b=q.select(f).selectAll("g.trace.violins");b.style("opacity",function(k){return k[0].trace.opacity});b.each(function(k){k=k[0].trace;var e=q.select(this),h=k.box||{},l=h.line||{},c=k.meanline||{},g=c.width;
e.selectAll("path.violin").style("stroke-width",k.line.width+"px").call(n.stroke,k.line.color).call(n.fill,k.fillcolor);e.selectAll("path.box").style("stroke-width",l.width+"px").call(n.stroke,l.color).call(n.fill,h.fillcolor);h={"stroke-width":g+"px","stroke-dasharray":2*g+"px,"+g+"px"};e.selectAll("path.mean").style(h).call(n.stroke,c.color);e.selectAll("path.meanline").style(h).call(n.stroke,c.color);m(e,k,f)})}},{"../../components/color":615,"../scatter/style":1182,d3:169}],1320:[function(a,G,
C){C=a("../../components/colorscale/attributes");var q=a("../isosurface/attributes"),n=a("../surface/attributes"),m=a("../../plots/attributes"),f=a("../../lib/extend").extendFlat;a=a("../../plot_api/edit_types").overrideAll;G=G.exports=a(f({x:q.x,y:q.y,z:q.z,value:q.value,isomin:q.isomin,isomax:q.isomax,surface:q.surface,spaceframe:{show:{valType:"boolean",dflt:!1},fill:{valType:"number",min:0,max:1,dflt:1}},slices:q.slices,caps:q.caps,text:q.text,hovertext:q.hovertext,hovertemplate:q.hovertemplate},
C("",{colorAttr:"`value`",showScaleDflt:!0,editTypeOverride:"calc"}),{colorbar:q.colorbar,opacity:q.opacity,opacityscale:n.opacityscale,lightposition:q.lightposition,lighting:q.lighting,flatshading:q.flatshading,contour:q.contour,hoverinfo:f({},m.hoverinfo),showlegend:f({},m.showlegend,{dflt:!1})}),"calc","nested");G.x.editType=G.y.editType=G.z.editType=G.value.editType="calc+clearAxisTypes";G.transforms=void 0},{"../../components/colorscale/attributes":622,"../../lib/extend":740,"../../plot_api/edit_types":781,
"../../plots/attributes":795,"../isosurface/attributes":1094,"../surface/attributes":1282}],1321:[function(a,G,C){function q(l,c,g){this.scene=l;this.uid=g;this.mesh=c;this.name="";this.data=null;this.showContour=!1}var n=a("gl-mesh3d"),m=a("../../lib/gl_format_color").parseColorScale,f=a("../../lib/str2rgbarray"),b=a("../../components/colorscale").extractOpts,k=a("../../plots/gl3d/zip3"),e=a("../isosurface/convert").findNearestOnAxis,h=a("../isosurface/convert").generateIsoMeshes;a=q.prototype;a.handlePick=
function(l){if(l.object===this.mesh){var c=l.data.index,g=this.data._meshY[c],d=this.data._meshZ[c],p=this.data._Ys.length,r=this.data._Zs.length;c=e(this.data._meshX[c],this.data._Xs).id;g=e(g,this.data._Ys).id;d=e(d,this.data._Zs).id;p=l.index=d+r*g+r*p*c;l.traceCoordinate=[this.data._meshX[p],this.data._meshY[p],this.data._meshZ[p],this.data._value[p]];r=this.data.hovertext||this.data.text;Array.isArray(r)&&void 0!==r[p]?l.textLabel=r[p]:r&&(l.textLabel=r);return!0}};a.update=function(l){function c(p,
r,t,w){return r.map(function(x){return p.d2l(x,0,w)*t})}var g=this.scene,d=g.fullSceneLayout;this.data=h(l);g=k(c(d.xaxis,l._meshX,g.dataScale[0],l.xcalendar),c(d.yaxis,l._meshY,g.dataScale[1],l.ycalendar),c(d.zaxis,l._meshZ,g.dataScale[2],l.zcalendar));d=k(l._meshI,l._meshJ,l._meshK);g={positions:g,cells:d,lightPosition:[l.lightposition.x,l.lightposition.y,l.lightposition.z],ambient:l.lighting.ambient,diffuse:l.lighting.diffuse,specular:l.lighting.specular,roughness:l.lighting.roughness,fresnel:l.lighting.fresnel,
vertexNormalsEpsilon:l.lighting.vertexnormalsepsilon,faceNormalsEpsilon:l.lighting.facenormalsepsilon,opacity:l.opacity,opacityscale:l.opacityscale,contourEnable:l.contour.show,contourColor:f(l.contour.color).slice(0,3),contourWidth:l.contour.width,useFacetNormals:l.flatshading};d=b(l);g.vertexIntensity=l._meshIntensity;g.vertexIntensityBounds=[d.min,d.max];g.colormap=m(l);this.mesh.update(g)};a.dispose=function(){this.scene.glplot.remove(this.mesh);this.mesh.dispose()};G.exports=function(l,c){var g=
n({gl:l.glplot.gl}),d=new q(l,g,c.uid);g._trace=d;d.update(c);l.glplot.add(g);return d}},{"../../components/colorscale":627,"../../lib/gl_format_color":746,"../../lib/str2rgbarray":773,"../../plots/gl3d/zip3":852,"../isosurface/convert":1096,"gl-mesh3d":292}],1322:[function(a,G,C){var q=a("../../lib"),n=a("./attributes"),m=a("../isosurface/defaults").supplyIsoDefaults,f=a("../surface/defaults").opacityscaleDefaults;G.exports=function(b,k,e,h){function l(c,g){return q.coerce(b,k,n,c,g)}m(b,k,e,h,l);
f(b,k,h,l)}},{"../../lib":750,"../isosurface/defaults":1097,"../surface/defaults":1285,"./attributes":1320}],1323:[function(a,G,C){G.exports={attributes:a("./attributes"),supplyDefaults:a("./defaults"),calc:a("../isosurface/calc"),colorbar:{min:"cmin",max:"cmax"},plot:a("./convert"),moduleType:"trace",name:"volume",basePlotModule:a("../../plots/gl3d"),categories:["gl3d","showLegend"],meta:{}}},{"../../plots/gl3d":841,"../isosurface/calc":1095,"./attributes":1320,"./convert":1321,"./defaults":1322}],
1324:[function(a,G,C){function q(h){return{marker:{color:e({},n.marker.color,{arrayOk:!1,editType:"style"}),line:{color:e({},n.marker.line.color,{arrayOk:!1,editType:"style"}),width:e({},n.marker.line.width,{arrayOk:!1,editType:"style"}),editType:"style"},editType:"style"},editType:"style"}}var n=a("../bar/attributes");C=a("../scatter/attributes").line;var m=a("../../plots/attributes"),f=a("../../plots/template_attributes").hovertemplateAttrs,b=a("../../plots/template_attributes").texttemplateAttrs,
k=a("./constants"),e=a("../../lib/extend").extendFlat;a=a("../../components/color");G.exports={measure:{valType:"data_array",dflt:[],editType:"calc"},base:{valType:"number",dflt:null,arrayOk:!1,editType:"calc"},x:n.x,x0:n.x0,dx:n.dx,y:n.y,y0:n.y0,dy:n.dy,xperiod:n.xperiod,yperiod:n.yperiod,xperiod0:n.xperiod0,yperiod0:n.yperiod0,xperiodalignment:n.xperiodalignment,yperiodalignment:n.yperiodalignment,hovertext:n.hovertext,hovertemplate:f({},{keys:k.eventDataKeys}),hoverinfo:e({},m.hoverinfo,{flags:"name x y text initial delta final".split(" ")}),
textinfo:{valType:"flaglist",flags:["label","text","initial","delta","final"],extras:["none"],editType:"plot",arrayOk:!1},texttemplate:b({editType:"plot"},{keys:k.eventDataKeys.concat(["label"])}),text:n.text,textposition:n.textposition,insidetextanchor:n.insidetextanchor,textangle:n.textangle,textfont:n.textfont,insidetextfont:n.insidetextfont,outsidetextfont:n.outsidetextfont,constraintext:n.constraintext,cliponaxis:n.cliponaxis,orientation:n.orientation,offset:n.offset,width:n.width,increasing:q("increasing"),
decreasing:q("decreasing"),totals:q("intermediate sums and total"),connector:{line:{color:e({},C.color,{dflt:a.defaultLine}),width:e({},C.width,{editType:"plot"}),dash:C.dash,editType:"plot"},mode:{valType:"enumerated",values:["spanning","between"],dflt:"between",editType:"plot"},visible:{valType:"boolean",dflt:!0,editType:"plot"},editType:"plot"},offsetgroup:n.offsetgroup,alignmentgroup:n.alignmentgroup}},{"../../components/color":615,"../../lib/extend":740,"../../plots/attributes":795,"../../plots/template_attributes":877,
"../bar/attributes":892,"../scatter/attributes":1158,"./constants":1326}],1325:[function(a,G,C){function q(h){return"a"===h||"absolute"===h}function n(h){return"t"===h||"total"===h}var m=a("../../plots/cartesian/axes"),f=a("../../plots/cartesian/align_period"),b=a("../../lib").mergeArray,k=a("../scatter/calc_selection"),e=a("../../constants/numerical").BADNUM;G.exports=function(h,l){var c=m.getFromId(h,l.xaxis||"x"),g=m.getFromId(h,l.yaxis||"y");if("h"===l.orientation){h=c.makeCalcdata(l,"x");var d=
g.makeCalcdata(l,"y");c=f(l,g,"y",d);g=!!l.yperiodalignment}else h=g.makeCalcdata(l,"y"),d=c.makeCalcdata(l,"x"),c=f(l,c,"x",d),g=!!l.xperiodalignment;for(var p=Math.min(c.length,h.length),r=Array(p),t=0,w,x=!1,y=0;y<p;y++){w=h[y]||0;var A=!1;(h[y]!==e||n(l.measure[y])||q(l.measure[y]))&&y+1<p&&(h[y+1]!==e||n(l.measure[y+1])||q(l.measure[y+1]))&&(A=!0);A=r[y]={i:y,p:c[y],s:w,rawS:w,cNext:A};q(l.measure[y])?(t=A.s,A.isSum=!0,A.dir="totals",A.s=t):n(l.measure[y])?(A.isSum=!0,A.dir="totals",A.s=t):(A.isSum=
!1,A.dir=0>A.rawS?"decreasing":"increasing",w=A.s,A.s=t+w,t+=w);"totals"===A.dir&&(x=!0);g&&(r[y].orig_p=d[y]);l.ids&&(A.id=String(l.ids[y]));A.v=(l.base||0)+t}r.length&&(r[0].hasTotals=x);b(l.text,r,"tx");b(l.hovertext,r,"htx");k(r,l);return r}},{"../../constants/numerical":725,"../../lib":750,"../../plots/cartesian/align_period":796,"../../plots/cartesian/axes":799,"../scatter/calc_selection":1160}],1326:[function(a,G,C){G.exports={eventDataKeys:["initial","delta","final"]}},{}],1327:[function(a,
G,C){var q=a("../bar/cross_trace_calc").setGroupPositions;G.exports=function(n,m){var f=n._fullLayout,b=n._fullData,k=n.calcdata,e=m.xaxis,h=m.yaxis;m=[];var l=[],c=[],g;for(g=0;g<b.length;g++){var d=b[g];if(!0===d.visible&&d.xaxis===e._id&&d.yaxis===h._id&&"waterfall"===d.type){var p=k[g];"h"===d.orientation?c.push(p):l.push(p);m.push(p)}}p={mode:f.waterfallmode,norm:f.waterfallnorm,gap:f.waterfallgap,groupgap:f.waterfallgroupgap};q(n,e,h,l,p);q(n,h,e,c,p);for(g=0;g<m.length;g++)for(p=m[g],n=0;n<
p.length;n++)e=p[n],!1===e.isSum&&(e.s0+=0===n?0:p[n-1].s),n+1<p.length&&(p[n].nextP0=p[n+1].p0,p[n].nextS0=p[n+1].s0)}},{"../bar/cross_trace_calc":895}],1328:[function(a,G,C){function q(g,d,p){g(d+".marker.color",p);g(d+".marker.line.color",h.defaultLine);g(d+".marker.line.width")}var n=a("../../lib"),m=a("../bar/defaults").handleGroupingDefaults,f=a("../bar/defaults").handleText,b=a("../scatter/xy_defaults"),k=a("../scatter/period_defaults"),e=a("./attributes"),h=a("../../components/color");a=a("../../constants/delta.js");
var l=a.INCREASING.COLOR,c=a.DECREASING.COLOR;G.exports={supplyDefaults:function(g,d,p,r){function t(w,x){return n.coerce(g,d,e,w,x)}b(g,d,r,t)?(k(g,d,r,t),t("measure"),t("orientation",d.x&&!d.y?"h":"v"),t("base"),t("offset"),t("width"),t("text"),t("hovertext"),t("hovertemplate"),p=t("textposition"),f(g,d,r,t,p,{moduleHasSelected:!1,moduleHasUnselected:!1,moduleHasConstrain:!0,moduleHasCliponaxis:!0,moduleHasTextangle:!0,moduleHasInsideanchor:!0}),"none"!==d.textposition&&(t("texttemplate"),d.texttemplate||
t("textinfo")),q(t,"increasing",l),q(t,"decreasing",c),q(t,"totals","#4499FF"),t("connector.visible")&&(t("connector.mode"),t("connector.line.width")&&(t("connector.line.color"),t("connector.line.dash")))):d.visible=!1},crossTraceDefaults:function(g,d){function p(x){return n.coerce(t._input,t,e,x)}if("group"===d.waterfallmode)for(var r=0;r<g.length;r++){var t=g[r];var w=t._input;m(w,t,d,p)}}}},{"../../components/color":615,"../../constants/delta.js":719,"../../lib":750,"../bar/defaults":896,"../scatter/period_defaults":1178,
"../scatter/xy_defaults":1185,"./attributes":1324}],1329:[function(a,G,C){G.exports=function(q,n){q.x="xVal"in n?n.xVal:n.x;q.y="yVal"in n?n.yVal:n.y;"initial"in n&&(q.initial=n.initial);"delta"in n&&(q.delta=n.delta);"final"in n&&(q.final=n.final);n.xa&&(q.xaxis=n.xa);n.ya&&(q.yaxis=n.ya);return q}},{}],1330:[function(a,G,C){function q(e,h){var l=e[h.dir].marker;e=l.color;h=l.line.color;l=l.line.width;if(m(e))return e;if(m(h)&&l)return h}var n=a("../../plots/cartesian/axes").hoverLabelText,m=a("../../components/color").opacity,
f=a("../bar/hover").hoverOnBars;a=a("../../constants/delta.js");var b=a.INCREASING.SYMBOL,k=a.DECREASING.SYMBOL;G.exports=function(e,h,l,c){if(h=f(e,h,l,c)){var g=h.cd;l=g[0].trace;var d=(c="h"===l.orientation)?e.xa:e.ya;e=g[h.index];g=e.isSum?e.b+e.s:e.rawS;if(!e.isSum){h.initial=e.b+e.s-g;h.delta=g;h.final=h.initial+h.delta;var p=n(d,Math.abs(h.delta));h.deltaLabel=0>g?"("+p+")":p;h.finalLabel=n(d,h.final);h.initialLabel=n(d,h.initial)}p=e.hi||l.hoverinfo;d=[];if(p&&"none"!==p&&"skip"!==p){var r=
"all"===p,t=p.split("+");p=function(w){return r||-1!==t.indexOf(w)};e.isSum||(!p("final")||(c?p("x"):p("y"))||d.push(h.finalLabel),p("delta")&&(0>g?d.push(h.deltaLabel+" "+k):d.push(h.deltaLabel+" "+b)),p("initial")&&d.push("Initial: "+h.initialLabel))}d.length&&(h.extraText=d.join("\x3cbr\x3e"));h.color=q(l,e);return[h]}}},{"../../components/color":615,"../../constants/delta.js":719,"../../plots/cartesian/axes":799,"../bar/hover":899}],1331:[function(a,G,C){G.exports={attributes:a("./attributes"),
layoutAttributes:a("./layout_attributes"),supplyDefaults:a("./defaults").supplyDefaults,crossTraceDefaults:a("./defaults").crossTraceDefaults,supplyLayoutDefaults:a("./layout_defaults"),calc:a("./calc"),crossTraceCalc:a("./cross_trace_calc"),plot:a("./plot"),style:a("./style").style,hoverPoints:a("./hover"),eventData:a("./event_data"),selectPoints:a("../bar/select"),moduleType:"trace",name:"waterfall",basePlotModule:a("../../plots/cartesian"),categories:"bar-like cartesian svg oriented showLegend zoomScale".split(" "),
meta:{}}},{"../../plots/cartesian":812,"../bar/select":904,"./attributes":1324,"./calc":1325,"./cross_trace_calc":1327,"./defaults":1328,"./event_data":1329,"./hover":1330,"./layout_attributes":1332,"./layout_defaults":1333,"./plot":1334,"./style":1335}],1332:[function(a,G,C){G.exports={waterfallmode:{valType:"enumerated",values:["group","overlay"],dflt:"group",editType:"calc"},waterfallgap:{valType:"number",min:0,max:1,editType:"calc"},waterfallgroupgap:{valType:"number",min:0,max:1,dflt:0,editType:"calc"}}},
{}],1333:[function(a,G,C){var q=a("../../lib"),n=a("./layout_attributes");G.exports=function(m,f,b){for(var k=!1,e=0;e<b.length;e++){var h=b[e];if(h.visible&&"waterfall"===h.type){k=!0;break}}k&&(q.coerce(m,f,n,"waterfallmode",void 0),q.coerce(m,f,n,"waterfallgap",.2),q.coerce(m,f,n,"waterfallgroupgap",void 0))}},{"../../lib":750,"./layout_attributes":1332}],1334:[function(a,G,C){function q(h,l,c,g){var d=l.xaxis,p=l.yaxis;m.makeTraceGroups(g,c,"trace bars").each(function(r){var t=n.select(this);
r=r[0].trace;t=m.ensureSingle(t,"g","lines");if(r.connector&&r.connector.visible){var w="h"===r.orientation,x=r.connector.mode;t=t.selectAll("g.line").data(m.identity);t.enter().append("g").classed("line",!0);t.exit().remove();var y=t.size();t.each(function(A,z){if(z===y-1||A.cNext){var F=[];var D=[];var u=w?d:p,B=w?p:d;F[0]=u.c2p(A.s0,!0);D[0]=B.c2p(A.p0,!0);F[1]=u.c2p(A.s1,!0);D[1]=B.c2p(A.p1,!0);F[2]=u.c2p(A.nextS0,!0);D[2]=B.c2p(A.nextP0,!0);D=w?[F,D]:[D,F];F=D[0];D=D[1];u="";F[0]!==b&&D[0]!==
b&&F[1]!==b&&D[1]!==b&&("spanning"===x&&!A.isSum&&0<z&&(u=w?u+("M"+F[0]+","+D[1]+"V"+D[0]):u+("M"+F[1]+","+D[0]+"H"+F[0])),"between"!==x&&(A.isSum||z<y-1)&&(u=w?u+("M"+F[1]+","+D[0]+"V"+D[1]):u+("M"+F[0]+","+D[1]+"H"+F[1])),F[2]!==b&&D[2]!==b&&(u=w?u+("M"+F[1]+","+D[1]+"V"+D[2]):u+("M"+F[1]+","+D[1]+"H"+F[2])));""===u&&(u="M0,0Z");m.ensureSingle(n.select(this),"path").attr("d",u).call(f.setClipUrl,l.layerClipId,h)}})}else t.remove()})}var n=a("d3"),m=a("../../lib"),f=a("../../components/drawing"),
b=a("../../constants/numerical").BADNUM,k=a("../bar/plot"),e=a("../bar/uniform_text").clearMinTextSize;G.exports=function(h,l,c,g){var d=h._fullLayout;e("waterfall",d);k.plot(h,l,c,g,{mode:d.waterfallmode,norm:d.waterfallmode,gap:d.waterfallgap,groupgap:d.waterfallgroupgap});q(h,l,c,g)}},{"../../components/drawing":637,"../../constants/numerical":725,"../../lib":750,"../bar/plot":903,"../bar/uniform_text":908,d3:169}],1335:[function(a,G,C){var q=a("d3"),n=a("../../components/drawing"),m=a("../../components/color"),
f=a("../../constants/interactions").DESELECTDIM;C=a("../bar/style");var b=a("../bar/uniform_text").resizeText,k=C.styleTextPoints;G.exports={style:function(e,h,l){h=l?l:q.select(e).selectAll("g.waterfalllayer").selectAll("g.trace");b(e,h,"waterfall");h.style("opacity",function(c){return c[0].trace.opacity});h.each(function(c){var g=q.select(this),d=c[0].trace;g.selectAll(".point \x3e path").each(function(p){if(!p.isBlank){var r=d[p.dir].marker;q.select(this).call(m.fill,r.color).call(m.stroke,r.line.color).call(n.dashLine,
r.line.dash,r.line.width).style("opacity",d.selectedpoints&&!p.selected?f:1)}});k(g,d,e);g.selectAll(".lines").each(function(){var p=d.connector.line;n.lineGroupStyle(q.select(this).selectAll("path"),p.width,p.color,p.dash)})})}}},{"../../components/color":615,"../../components/drawing":637,"../../constants/interactions":724,"../bar/style":906,"../bar/uniform_text":908,d3:169}],1336:[function(a,G,C){function q(p,r,t,w){if(w.enabled){var x=w.target,y=e.nestedProperty(r,x),A=y.get();p=k.getDataConversions(p,
r,x,A);p=n(w,p);for(var z=Array(t.length),F=0;F<t.length;F++)z[F]=p(A,t[F]);y.set(z);"count"===w.func&&e.pushUnique(r._arrayAttrs,x)}}function n(p,r){var t=r.d2c,w=r.c2d;switch(p.func){case "count":return m;case "first":return f;case "last":return b;case "sum":return function(x,y){for(var A=0,z=0;z<y.length;z++){var F=t(x[y[z]]);F!==c&&(A+=F)}return w(A)};case "avg":return function(x,y){for(var A=0,z=0,F=0;F<y.length;F++){var D=t(x[y[F]]);D!==c&&(A+=D,z++)}return z?w(A/z):c};case "min":return function(x,
y){for(var A=Infinity,z=0;z<y.length;z++){var F=t(x[y[z]]);F!==c&&(A=Math.min(A,F))}return Infinity===A?c:w(A)};case "max":return function(x,y){for(var A=-Infinity,z=0;z<y.length;z++){var F=t(x[y[z]]);F!==c&&(A=Math.max(A,F))}return-Infinity===A?c:w(A)};case "range":return function(x,y){for(var A=Infinity,z=-Infinity,F=0;F<y.length;F++){var D=t(x[y[F]]);D!==c&&(A=Math.min(A,D),z=Math.max(z,D))}return-Infinity===z||Infinity===A?c:w(z-A)};case "change":return function(x,y){var A=t(x[y[0]]);x=t(x[y[y.length-
1]]);return A===c||x===c?c:w(x-A)};case "median":return function(x,y){for(var A=[],z=0;z<y.length;z++){var F=t(x[y[z]]);F!==c&&A.push(F)}if(!A.length)return c;A.sort(e.sorterAsc);x=(A.length-1)/2;return w((A[Math.floor(x)]+A[Math.ceil(x)])/2)};case "mode":return function(x,y){for(var A={},z=0,F=c,D=0;D<y.length;D++){var u=t(x[y[D]]);if(u!==c){var B=A[u]=(A[u]||0)+1;B>z&&(z=B,F=u)}}return z?w(F):c};case "rms":return function(x,y){for(var A=0,z=0,F=0;F<y.length;F++){var D=t(x[y[F]]);D!==c&&(A+=D*D,
z++)}return z?w(Math.sqrt(A/z)):c};case "stddev":return function(x,y){var A=0,z=0,F=1,D=c,u;for(u=0;u<y.length&&D===c;u++)D=t(x[y[u]]);if(D===c)return c;for(;u<y.length;u++){var B=t(x[y[u]]);B!==c&&(B-=D,A+=B,z+=B*B,F++)}return(x="sample"===p.funcmode?F-1:F)?Math.sqrt((z-A*A/F)/x):0}}}function m(p,r){return r.length}function f(p,r){return p[r[0]]}function b(p,r){return p[r[r.length-1]]}var k=a("../plots/cartesian/axes"),e=a("../lib"),h=a("../plot_api/plot_schema"),l=a("./helpers").pointsAccessorFunction,
c=a("../constants/numerical").BADNUM;C.moduleType="transform";C.name="aggregate";var g=C.attributes={enabled:{valType:"boolean",dflt:!0,editType:"calc"},groups:{valType:"string",strict:!0,noBlank:!0,arrayOk:!0,dflt:"x",editType:"calc"},aggregations:{_isLinkedToArray:"aggregation",target:{valType:"string",editType:"calc"},func:{valType:"enumerated",values:"count sum avg median mode rms stddev min max first last change range".split(" "),dflt:"first",editType:"calc"},funcmode:{valType:"enumerated",values:["sample",
"population"],dflt:"sample",editType:"calc"},enabled:{valType:"boolean",dflt:!0,editType:"calc"},editType:"calc"},editType:"calc"},d=g.aggregations;C.supplyDefaults=function(p,r){function t(u,B){return e.coerce(z[x],F,d,u,B)}var w={},x;if(!e.coerce(p,w,g,"enabled",void 0))return w;r=h.findArrayAttributes(r);var y={};for(x=0;x<r.length;x++)y[r[x]]=1;var A=e.coerce(p,w,g,"groups",void 0);if(!Array.isArray(A)){if(!y[A])return w.enabled=!1,w;y[A]=0}var z=p.aggregations||[];p=w.aggregations=Array(z.length);
for(x=0;x<z.length;x++){var F={_index:x};A=t("target");var D=t("func");t("enabled")&&A&&(y[A]||"count"===D&&void 0===y[A])?("stddev"===D&&t("funcmode"),y[A]=0,p[x]=F):p[x]={enabled:!1,_index:x}}for(x=0;x<r.length;x++)y[r[x]]&&p.push({target:r[x],func:d.func.dflt,enabled:!0,_index:-1});return w};C.calcTransform=function(p,r,t){if(t.enabled){var w=t.groups,x=e.getTargetArray(r,{target:w});if(x){var y,A={},z={},F=[],D=l(r.transforms,t),u=x.length;r._length&&(u=Math.min(u,r._length));for(y=0;y<u;y++){var B=
x[y];var I=A[B];void 0===I?(A[B]=F.length,I=[y],F.push(I),z[A[B]]=D(y)):(F[I].push(y),z[A[B]]=(z[A[B]]||[]).concat(D(y)))}t._indexToPoints=z;t=t.aggregations;for(y=0;y<t.length;y++)q(p,r,F,t[y]);"string"===typeof w&&q(p,r,F,{target:w,func:"first",enabled:!0});r._length=F.length}}}},{"../constants/numerical":725,"../lib":750,"../plot_api/plot_schema":787,"../plots/cartesian/axes":799,"./helpers":1339}],1337:[function(a,G,C){function q(l,c,g){var d=l.operation,p=l.value,r=Array.isArray(p),t=function(y){return c(y,
0,l.valuecalendar)},w=function(y){return c(y,0,g)},x;-1!==k.indexOf(d)?x=r?t(p[0]):t(p):-1!==e.indexOf(d)?x=r?[t(p[0]),t(p[1])]:[t(p),t(p)]:-1!==h.indexOf(d)&&(x=r?p.map(t):[t(p)]);switch(d){case "\x3d":return function(y){return w(y)===x};case "!\x3d":return function(y){return w(y)!==x};case "\x3c":return function(y){return w(y)<x};case "\x3c\x3d":return function(y){return w(y)<=x};case "\x3e":return function(y){return w(y)>x};case "\x3e\x3d":return function(y){return w(y)>=x};case "[]":return function(y){y=
w(y);return y>=x[0]&&y<=x[1]};case "()":return function(y){y=w(y);return y>x[0]&&y<x[1]};case "[)":return function(y){y=w(y);return y>=x[0]&&y<x[1]};case "(]":return function(y){y=w(y);return y>x[0]&&y<=x[1]};case "][":return function(y){y=w(y);return y<=x[0]||y>=x[1]};case ")(":return function(y){y=w(y);return y<x[0]||y>x[1]};case "](":return function(y){y=w(y);return y<=x[0]||y>x[1]};case ")[":return function(y){y=w(y);return y<x[0]||y>=x[1]};case "{}":return function(y){return-1!==x.indexOf(w(y))};
case "}{":return function(y){return-1===x.indexOf(w(y))}}}var n=a("../lib"),m=a("../registry"),f=a("../plots/cartesian/axes"),b=a("./helpers").pointsAccessorFunction;a=a("../constants/filter_ops");var k=a.COMPARISON_OPS,e=a.INTERVAL_OPS,h=a.SET_OPS;C.moduleType="transform";C.name="filter";C.attributes={enabled:{valType:"boolean",dflt:!0,editType:"calc"},target:{valType:"string",strict:!0,noBlank:!0,arrayOk:!0,dflt:"x",editType:"calc"},operation:{valType:"enumerated",values:[].concat(k).concat(e).concat(h),
dflt:"\x3d",editType:"calc"},value:{valType:"any",dflt:0,editType:"calc"},preservegaps:{valType:"boolean",dflt:!1,editType:"calc"},editType:"calc"};C.supplyDefaults=function(l){function c(p,r){return n.coerce(l,g,C.attributes,p,r)}var g={};if(c("enabled")){var d=c("target");if(n.isArrayOrTypedArray(d)&&0===d.length)return g.enabled=!1,g;c("preservegaps");c("operation");c("value");d=m.getComponentMethod("calendars","handleDefaults");d(l,g,"valuecalendar",null);d(l,g,"targetcalendar",null)}return g};
C.calcTransform=function(l,c,g){function d(u,B){for(var I=0;I<x.length;I++){var J=n.nestedProperty(c,x[I]);u(J,B)}}if(g.enabled){var p=n.getTargetArray(c,g);if(p){var r=g.target,t=p.length;c._length&&(t=Math.min(t,c._length));var w=g.targetcalendar,x=c._arrayAttrs,y=g.preservegaps;if("string"===typeof r){var A=n.nestedProperty(c,r+"calendar").get();A&&(w=A)}l=f.getDataToCoordFunc(l,c,r,p);w=q(g,l,w);var z={};l={};r=0;if(y){var F=function(u){z[u.astr]=n.extendDeep([],u.get());u.set(Array(t))};A=function(u,
B){var I=z[u.astr][B];u.get()[B]=I}}else F=function(u){z[u.astr]=n.extendDeep([],u.get());u.set([])},A=function(u,B){B=z[u.astr][B];u.get().push(B)};d(F);F=b(c.transforms,g);for(var D=0;D<t;D++)w(p[D])?(d(A,D),l[r++]=F(D)):y&&r++;g._indexToPoints=l;c._length=r}}}},{"../constants/filter_ops":721,"../lib":750,"../plots/cartesian/axes":799,"../registry":882,"./helpers":1339}],1338:[function(a,G,C){var q=a("../lib"),n=a("../plot_api/plot_schema"),m=a("../plots/plots"),f=a("./helpers").pointsAccessorFunction;
C.moduleType="transform";C.name="groupby";C.attributes={enabled:{valType:"boolean",dflt:!0,editType:"calc"},groups:{valType:"data_array",dflt:[],editType:"calc"},nameformat:{valType:"string",editType:"calc"},styles:{_isLinkedToArray:"style",target:{valType:"string",editType:"calc"},value:{valType:"any",dflt:{},editType:"calc",_compareAsJSON:!0},editType:"calc"},editType:"calc"};C.supplyDefaults=function(b,k,e){k={};if(!q.coerce(b,k,C.attributes,"enabled",void 0))return k;q.coerce(b,k,C.attributes,
"groups",void 0);q.coerce(b,k,C.attributes,"nameformat",1<e._dataLength?"%{group} (%{trace})":"%{group}");e=b.styles;var h=k.styles=[];if(e)for(b=0;b<e.length;b++){var l=h[b]={};q.coerce(e[b],h[b],C.attributes.styles,"target");var c=q.coerce(e[b],h[b],C.attributes.styles,"value");q.isPlainObject(c)?l.value=q.extendDeep({},c):c&&delete l.value}return k};C.transform=function(b,k){var e,h=[];for(e=0;e<b.length;e++){var l=void 0,c;var g=b[e];var d=k.transform;var p=k.transformIndex;var r=g.transforms[p].groups,
t=f(g.transforms,d);if(q.isArrayOrTypedArray(r)&&0!==r.length){var w=q.filterUnique(r),x=Array(w.length),y=r.length,A=n.findArrayAttributes(g),z=d.styles||[],F={};for(c=0;c<z.length;c++)F[z[c].target]=z[c].value;d.styles&&(l=q.keyedContainer(d,"styles","target","value.name"));z={};var D={};for(c=0;c<w.length;c++){var u=w[c];z[u]=c;D[u]=0;var B=x[c]=q.extendDeepNoArrays({},g);B._group=u;B.transforms[p]._indexToPoints={};var I=null;l&&(I=l.get(u));B.name=I||""===I?I:q.templateString(d.nameformat,{trace:g.name,
group:u});I=B.transforms;B.transforms=[];for(u=0;u<I.length;u++)B.transforms[u]=q.extendDeepNoArrays({},I[u]);for(u=0;u<A.length;u++)q.nestedProperty(B,A[u]).set([])}for(c=0;c<A.length;c++){d=A[c];u=0;for(l=[];u<w.length;u++)l[u]=q.nestedProperty(x[u],d).get();d=q.nestedProperty(g,d).get();for(u=0;u<y;u++)l[z[r[u]]].push(d[u])}for(u=0;u<y;u++)B=x[z[r[u]]],B.transforms[p]._indexToPoints[D[r[u]]]=t(u),D[r[u]]++;for(c=0;c<w.length;c++)u=w[c],B=x[c],m.clearExpandedTraceDefaultColors(B),q.extendDeepNoArrays(B,
F[u]||{});g=x}else g=[g];for(p=0;p<g.length;p++)h.push(g[p])}return h}},{"../lib":750,"../plot_api/plot_schema":787,"../plots/plots":862,"./helpers":1339}],1339:[function(a,G,C){C.pointsAccessorFunction=function(q,n){for(var m,f,b=0;b<q.length;b++){m=q[b];if(m===n)break;m._indexToPoints&&!1!==m.enabled&&(f=m._indexToPoints)}return f?function(k){return f[k]}:function(k){return[k]}}},{}],1340:[function(a,G,C){function q(k,e){switch(k.order){case "ascending":return function(h,l){h=e(h.v);l=e(l.v);return h===
b?1:l===b?-1:h-l};case "descending":return function(h,l){h=e(h.v);l=e(l.v);return h===b?1:l===b?-1:l-h}}}var n=a("../lib"),m=a("../plots/cartesian/axes"),f=a("./helpers").pointsAccessorFunction,b=a("../constants/numerical").BADNUM;C.moduleType="transform";C.name="sort";C.attributes={enabled:{valType:"boolean",dflt:!0,editType:"calc"},target:{valType:"string",strict:!0,noBlank:!0,arrayOk:!0,dflt:"x",editType:"calc"},order:{valType:"enumerated",values:["ascending","descending"],dflt:"ascending",editType:"calc"},
editType:"calc"};C.supplyDefaults=function(k){var e={};n.coerce(k,e,C.attributes,"enabled",void 0)&&(n.coerce(k,e,C.attributes,"target",void 0),n.coerce(k,e,C.attributes,"order",void 0));return e};C.calcTransform=function(k,e,h){if(h.enabled){var l=n.getTargetArray(e,h);if(l){var c=h.target,g=l.length;e._length&&(g=Math.min(g,e._length));var d=e._arrayAttrs;c=m.getDataToCoordFunc(k,e,c,l);var p=g,r=Array(p);k=Array(p);var t;for(t=0;t<p;t++)r[t]={v:l[t],i:t};r.sort(q(h,c));for(t=0;t<p;t++)k[t]=r[t].i;
l=f(e.transforms,h);c={};for(p=0;p<d.length;p++){t=n.nestedProperty(e,d[p]);var w=t.get(),x=Array(g);for(r=0;r<g;r++)x[r]=w[k[r]];t.set(x)}for(r=0;r<g;r++)c[r]=l(k[r]);h._indexToPoints=c;e._length=g}}}},{"../constants/numerical":725,"../lib":750,"../plots/cartesian/axes":799,"./helpers":1339}],1341:[function(a,G,C){C.version="1.57.0"},{}]},{},[26])(26)})};
shadow$provide[571]=function(la,K,na,U){function a(G){return G&&G.__esModule?G:{"default":G}}Object.defineProperty(U,"__esModule",{value:!0});U["default"]=void 0;la=a(K(569));K=a(K(570));K=(0,la["default"])(K["default"]);U["default"]=K};
var qX,rX,sX,uX,vX,wX,xX,LX,OX,jY,kY,mY,oY,qY,yY,EY,GY;qX="dpham.cv.panels.skills";rX=function(a,b,c,d,e){this.meta=a;this.all=b;this.prev=c;this.current=d;this._next=e;this.G=26083532;this.ha=1};sX=function(a){if(!a.current){var b=$APP.C(a.prev);a.current=b?b:a.all}return a.current};uX=function(){var a=$APP.z(tX);return a?new rX(null,a,null,a,null):$APP.Vh};
vX=function(a,b){b=null!=b&&(b.G&64||$APP.u===b.da)?$APP.V.B($APP.wn,b):b;var c=$APP.O.B(b,$APP.zC);return function(){function d(k,l){$APP.H(l,0,null);l=$APP.H(l,1,null);return $APP.ur(k,$APP.Rk.B(new $APP.W(null,1,5,$APP.Y,[$APP.FP],null),a),null!=l?l:c)}function e(k){return $APP.Wk(k,a,c)}var f=null;f=function(k,l){switch(arguments.length){case 1:return e.call(this,k);case 2:return d.call(this,k,l)}throw Error("Invalid arity: "+arguments.length);};f.j=e;f.B=d;return f}()};
wX=function(a,b,c){a=Number(a);b=Number(b);c=Number(c);if(a!=(a&255)||b!=(b&255)||c!=(c&255))throw Error('"('+a+","+b+","+c+'") is not a valid RGB color');b=a<<16|b<<8|c;return 16>a?"#"+(16777216|b).toString(16).substr(1):"#"+b.toString(16)};xX=function(a){return $APP.V.D($APP.px,"rgb(%d, %d, %d)",a)};
LX=function(a,b){a=null!=a&&(a.G&64||$APP.u===a.da)?$APP.V.B($APP.wn,a):a;var c=$APP.O.B(a,$APP.RR),d=$APP.O.B(a,yX);a=null!=b&&(b.G&64||$APP.u===b.da)?$APP.V.B($APP.wn,b):b;b=$APP.O.B(a,$APP.su);a=$APP.O.B(a,$APP.lv);var e=$APP.Gm($APP.Qk($APP.xP,c),$APP.Qk($APP.Jo,c)),f=$APP.Gm($APP.Qk($APP.Jo,c),uX()),k=$APP.Pm(function(){return function t(p){return new $APP.Fj(null,function(){for(;;){var v=$APP.z(p);if(v){if($APP.Li(v)){var w=$APP.vh(v),B=$APP.D(w),E=$APP.Ij(B);a:for(var J=0;;)if(J<B){var S=$APP.xi(w,
J),Z=null!=S&&(S.G&64||$APP.u===S.da)?$APP.V.B($APP.wn,S):S;S=$APP.O.B(Z,$APP.Jo);var aa=$APP.O.B(Z,zX);Z=$APP.O.B(Z,$APP.xP);S=$APP.Bi(new $APP.h(null,3,[$APP.Fq,S,$APP.Et,f.j?f.j(S):f.call(null,S),$APP.tt,200*aa],null),new $APP.h(null,1,[$APP.Mo,$APP.q.j(Z)],null));E.add(S);J+=1}else{w=!0;break a}return w?$APP.Lj(E.wa(),t($APP.wh(v))):$APP.Lj(E.wa(),null)}E=$APP.A(v);B=null!=E&&(E.G&64||$APP.u===E.da)?$APP.V.B($APP.wn,E):E;E=$APP.O.B(B,$APP.Jo);w=$APP.O.B(B,zX);B=$APP.O.B(B,$APP.xP);return $APP.yj($APP.Bi(new $APP.h(null,
3,[$APP.Fq,E,$APP.Et,f.j?f.j(E):f.call(null,E),$APP.tt,200*w],null),new $APP.h(null,1,[$APP.Mo,$APP.q.j(B)],null)),t($APP.Wh(v)))}return null}},null,null)}(c)}()),l=$APP.Pm(function(){return function t(p){return new $APP.Fj(null,function(){for(;;){var v=$APP.z(p);if(v){if($APP.Li(v)){var w=$APP.vh(v),B=$APP.D(w),E=$APP.Ij(B);return function(){for(var aa=0;;)if(aa<B){var da=$APP.xi(w,aa);da=null!=da&&(da.G&64||$APP.u===da.da)?$APP.V.B($APP.wn,da):da;var ya=$APP.O.B(da,$APP.VJ),ka=$APP.O.B(da,$APP.cI);
da=$APP.O.B(da,$APP.xP);$APP.Mj(E,$APP.Bi(new $APP.h(null,3,[$APP.VJ,function(){var x=ya+1;return e.j?e.j(x):e.call(null,x)}(),$APP.cI,function(){var x=ka+1;return e.j?e.j(x):e.call(null,x)}(),AX,1.5*da],null),new $APP.h(null,1,[$APP.Mo,[$APP.q.j(ya),"-",$APP.q.j(ka)].join("")],null)));aa+=1}else return!0}()?$APP.Lj(E.wa(),t($APP.wh(v))):$APP.Lj(E.wa(),null)}var J=$APP.A(v);J=null!=J&&(J.G&64||$APP.u===J.da)?$APP.V.B($APP.wn,J):J;var S=$APP.O.B(J,$APP.VJ),Z=$APP.O.B(J,$APP.cI);J=$APP.O.B(J,$APP.xP);
return $APP.yj($APP.Bi(new $APP.h(null,3,[$APP.VJ,function(){var aa=S+1;return e.j?e.j(aa):e.call(null,aa)}(),$APP.cI,function(){var aa=Z+1;return e.j?e.j(aa):e.call(null,aa)}(),AX,1.5*J],null),new $APP.h(null,1,[$APP.Mo,[$APP.q.j(S),"-",$APP.q.j(Z)].join("")],null)),t($APP.Wh(v)))}return null}},null,null)}(d)}());return new $APP.W(null,3,5,$APP.Y,[$APP.pt,BX.Graph,new $APP.h(null,3,[$APP.Fq,"graph",CX,new $APP.h(null,7,[DX,new $APP.h(null,2,[EX,-300,FX,100],null),GX,new $APP.h(null,1,[$APP.vF,"CURVE_SMOOTH"],
null),HX,3E3,IX,!0,JX,1.5,$APP.su,600<b?b:600,$APP.lv,380<a?a:380],null),$APP.IM,new $APP.h(null,3,[KX,$APP.Fq.j($APP.A(k)),$APP.RR,$APP.Bq(k),yX,$APP.Bq(l)],null)],null)],null)};
OX=function(a){function b(){return setTimeout(function(){var e=$APP.r(c);e=$APP.Vq.findDOMNode(e);return $APP.uk(d,new $APP.h(null,2,[$APP.lv,e.clientWidth,$APP.su,e.clientHeight],null))},3E3)}a=null!=a&&(a.G&64||$APP.u===a.da)?$APP.V.B($APP.wn,a):a;$APP.O.B(a,$APP.RR);$APP.O.B(a,yX);var c=$APP.Pp.j(null),d=$APP.Pp.j(new $APP.h(null,2,[$APP.lv,600,$APP.su,600],null));return function(e){e=null!=e&&(e.G&64||$APP.u===e.da)?$APP.V.B($APP.wn,e):e;var f=$APP.O.B(e,$APP.RR),k=$APP.O.B(e,yX);return $APP.jq(new $APP.h(null,
2,[MX,b,$APP.lq,function(){return new $APP.W(null,3,5,$APP.Y,[$APP.xu,new $APP.h(null,2,[$APP.Vt,new $APP.h(null,2,[$APP.lv,"100%",$APP.su,"70vh"],null),NX,function(l){return $APP.uk(c,l)}],null),new $APP.W(null,3,5,$APP.Y,[LX,new $APP.h(null,2,[$APP.RR,f,yX,k],null),$APP.r(d)],null)],null)}],null),$APP.Zq)}};
jY=function(){function a(c,d){d=$APP.A(d.points).pointIndex;return $APP.m(d)?$APP.Hs(new $APP.W(null,2,5,$APP.Y,[PX,$APP.oi(c,d)],null)):null}var b=$APP.Yt.j(new $APP.W(null,2,5,$APP.Y,[$APP.Eu,QX],null));return function(){if($APP.m($APP.r(b))){var c=$APP.wj($APP.r(b)),d=$APP.Qk(function(k){return parseInt($APP.BM.j(k))},c),e=$APP.Qk(RX,c),f=$APP.Qk(SX,c);c=$APP.Qk($APP.ZG.B($APP.an,$APP.nQ),c);c=$APP.vj.B(c,$APP.A(c));return new $APP.W(null,3,5,$APP.Y,[$APP.pt,TX.default,new $APP.h(null,7,[$APP.IM,
new $APP.W(null,1,5,$APP.Y,[new $APP.h(null,7,[$APP.TC,$APP.vj.B(d,$APP.A(d)),UX,$APP.vj.B(e,$APP.A(e)),VX,$APP.vj.B(f,$APP.A(f)),$APP.vF,"scatterpolar",WX,"text",$APP.tz,XX,YX,new $APP.h(null,1,[$APP.Et,ZX],null)],null)],null),$X,new $APP.h(null,3,[aY,!0,$APP.ov,new $APP.h(null,4,[$APP.QC,80,$APP.SH,30,bY,30,$APP.TC,80],null),cY,new $APP.h(null,1,[dY,new $APP.h(null,2,[eY,!0,fY,new $APP.W(null,2,5,$APP.Y,[0,100],null)],null)],null)],null),CX,new $APP.h(null,1,[gY,!1],null),$APP.Vt,new $APP.h(null,
2,[$APP.lv,"100%",$APP.su,"100%"],null),hY,!0,iY,$APP.Lx.B(a,c),$APP.vt,$APP.Lx.B(a,c)],null)],null)}return null}};
kY=function(){return new $APP.W(null,4,5,$APP.Y,[$APP.pt,$APP.qt.Grid,new $APP.h(null,3,[$APP.Tt,!0,$APP.Ut,12,$APP.ru,12],null),new $APP.W(null,3,5,$APP.Y,[$APP.pt,$APP.qt.Grid,new $APP.W(null,4,5,$APP.Y,[$APP.pt,$APP.qt.Card,new $APP.W(null,3,5,$APP.Y,[$APP.pt,$APP.qt.CardHeader,new $APP.h(null,2,[$APP.rt,"Skills Summary",$APP.uu,"A picture is worth a thousand words. Hover the dots\nfor more details."],null)],null),new $APP.W(null,3,5,$APP.Y,[$APP.pt,$APP.qt.CardContent,new $APP.W(null,1,5,$APP.Y,
[jY],null)],null)],null)],null)],null)};
mY=function(){var a=$APP.Yt.j(new $APP.W(null,2,5,$APP.Y,[$APP.Eu,lY],null));return function(){return $APP.m($APP.r(a))?new $APP.W(null,4,5,$APP.Y,[$APP.pt,$APP.qt.Grid,new $APP.h(null,3,[$APP.Tt,!0,$APP.Ut,12,$APP.ru,12],null),new $APP.W(null,3,5,$APP.Y,[$APP.pt,$APP.qt.Grid,new $APP.W(null,4,5,$APP.Y,[$APP.pt,$APP.qt.Card,new $APP.W(null,3,5,$APP.Y,[$APP.pt,$APP.qt.CardHeader,new $APP.h(null,2,[$APP.rt,"Programming Skills",$APP.uu,"My internal graph of programming skills.\nNodes are programming languages and the edges are the links I personally\nused to communicate between them. Node and edges size represent\nmy experience in the language or the interaction."],null)],
null),new $APP.W(null,3,5,$APP.Y,[$APP.pt,$APP.qt.CardContent,new $APP.W(null,2,5,$APP.Y,[OX,$APP.r(a)],null)],null)],null)],null)],null):null}};
oY=function(a,b){return new $APP.W(null,4,5,$APP.Y,[$APP.pt,$APP.qt.Grid,new $APP.h(null,3,[$APP.Tt,!0,$APP.Ut,12,$APP.qu,12],null),new $APP.W(null,4,5,$APP.Y,[$APP.pt,$APP.qt.Card,new $APP.h(null,1,[nY,0],null),new $APP.W(null,3,5,$APP.Y,[$APP.pt,$APP.qt.CardHeader,new $APP.h(null,2,[$APP.rt,a,$APP.uu,$APP.$o($APP.Zq,new $APP.W(null,2,5,$APP.Y,[$APP.Rt,b],null))],null)],null)],null)],null)};
qY=function(){var a=$APP.Yt.j(new $APP.W(null,1,5,$APP.Y,[pY],null));return function(){if($APP.m($APP.r(a))){var b=function(){return function e(d){return new $APP.Fj(null,function(){for(;;){var f=$APP.z(d);if(f){if($APP.Li(f)){var k=$APP.vh(f),l=$APP.D(k),n=$APP.Ij(l);a:for(var p=0;;)if(p<l){var t=$APP.xi(k,p),v=null!=t&&(t.G&64||$APP.u===t.da)?$APP.V.B($APP.wn,t):t;t=$APP.O.B(v,$APP.nQ);v=$APP.O.B(v,$APP.At);t=$APP.Bi(new $APP.W(null,3,5,$APP.Y,[oY,t,v],null),new $APP.h(null,1,[$APP.Mo,t],null));
n.add(t);p+=1}else{k=!0;break a}return k?$APP.Lj(n.wa(),e($APP.wh(f))):$APP.Lj(n.wa(),null)}n=$APP.A(f);k=null!=n&&(n.G&64||$APP.u===n.da)?$APP.V.B($APP.wn,n):n;n=$APP.O.B(k,$APP.nQ);k=$APP.O.B(k,$APP.At);return $APP.yj($APP.Bi(new $APP.W(null,3,5,$APP.Y,[oY,n,k],null),new $APP.h(null,1,[$APP.Mo,n],null)),e($APP.Wh(f)))}return null}},null,null)}($APP.O.B($APP.r(a),$APP.$y))}();return new $APP.W(null,3,5,$APP.Y,[$APP.pt,$APP.qt.Grid,new $APP.W(null,4,5,$APP.Y,[$APP.pt,$APP.qt.Card,new $APP.W(null,
3,5,$APP.Y,[$APP.pt,$APP.qt.CardHeader,new $APP.h(null,2,[$APP.rt,$APP.$o($APP.Zq,new $APP.W(null,2,5,$APP.Y,[$APP.Rt,$APP.rt.j($APP.r(a))],null)),$APP.uu,$APP.$o($APP.Zq,new $APP.W(null,2,5,$APP.Y,[$APP.Rt,$APP.uu.j($APP.r(a))],null))],null)],null),new $APP.W(null,3,5,$APP.Y,[$APP.pt,$APP.qt.CardContent,new $APP.W(null,4,5,$APP.Y,[$APP.pt,$APP.qt.Grid,new $APP.h(null,1,[$APP.cu,!0],null),b],null)],null)],null)],null)}return null}};
yY=function(){var a=$APP.Yt.j(new $APP.W(null,1,5,$APP.Y,[rY],null));return function(){return new $APP.W(null,5,5,$APP.Y,[$APP.pt,$APP.qt.Tabs,new $APP.h(null,6,[$APP.xP,$APP.q.j($APP.hn.j(function(){var b=$APP.r(a);return $APP.m(b)?b:QX}())),sY,function(b){return $APP.Hs(new $APP.W(null,2,5,$APP.Y,[tY,$APP.an.j(b)],null))},uY,$APP.MR,vY,$APP.MR,$APP.Mt,"scrollable",wY,"on"],null),new $APP.W(null,3,5,$APP.Y,[$APP.pt,$APP.qt.Tab,new $APP.h(null,3,[xY,"Summary",$APP.xP,"hard-skills",$APP.Dt,function(){return $APP.Hs(new $APP.W(null,
2,5,$APP.Y,[tY,QX],null))}],null)],null),new $APP.W(null,3,5,$APP.Y,[$APP.pt,$APP.qt.Tab,new $APP.h(null,3,[xY,"Programming",$APP.xP,"programming-skills",$APP.vt,function(){return $APP.Hs(new $APP.W(null,2,5,$APP.Y,[tY,lY],null))}],null)],null)],null)}};
EY=function(){var a=$APP.Yt.j(new $APP.W(null,1,5,$APP.Y,[zY],null));return function(){return new $APP.W(null,7,5,$APP.Y,[$APP.pt,$APP.qt.Tabs,new $APP.h(null,6,[$APP.xP,$APP.q.j($APP.hn.j(function(){var b=$APP.r(a);return $APP.m(b)?b:AY}())),sY,function(b){return $APP.Hs(new $APP.W(null,2,5,$APP.Y,[PX,$APP.an.j(b)],null))},uY,$APP.MR,vY,$APP.MR,$APP.Mt,"scrollable",wY,"on"],null),new $APP.W(null,3,5,$APP.Y,[$APP.pt,$APP.qt.Tab,new $APP.h(null,3,[xY,"Language",$APP.xP,"languages",$APP.Dt,function(){return $APP.Hs(new $APP.W(null,
2,5,$APP.Y,[PX,AY],null))}],null)],null),new $APP.W(null,3,5,$APP.Y,[$APP.pt,$APP.qt.Tab,new $APP.h(null,3,[xY,"Personality",$APP.xP,"personality",$APP.vt,function(){return $APP.Hs(new $APP.W(null,2,5,$APP.Y,[PX,BY],null))}],null)],null),new $APP.W(null,3,5,$APP.Y,[$APP.pt,$APP.qt.Tab,new $APP.h(null,3,[xY,"Data analysis",$APP.xP,"data-analysis",$APP.vt,function(){return $APP.Hs(new $APP.W(null,2,5,$APP.Y,[PX,CY],null))}],null)],null),new $APP.W(null,3,5,$APP.Y,[$APP.pt,$APP.qt.Tab,new $APP.h(null,
3,[xY,"Software Engineering",$APP.xP,"software-engineering",$APP.vt,function(){return $APP.Hs(new $APP.W(null,2,5,$APP.Y,[PX,DY],null))}],null)],null)],null)}};
GY=function(){$APP.Hs(new $APP.W(null,3,5,$APP.Y,[$APP.Tu,QX,new $APP.h(null,1,[$APP.Uu,"hard_skills.csv"],null)],null));$APP.Hs(new $APP.W(null,3,5,$APP.Y,[$APP.Tu,$APP.oV,new $APP.h(null,1,[$APP.Uu,"skills.json"],null)],null));$APP.Hs(new $APP.W(null,3,5,$APP.Y,[$APP.Tu,lY,new $APP.h(null,1,[$APP.Uu,"programming_skills.json"],null)],null));var a=$APP.Yt.j(new $APP.W(null,1,5,$APP.Y,[rY],null)),b=$APP.Yt.j(new $APP.W(null,1,5,$APP.Y,[pY],null));return function(c){c=null!=c&&(c.G&64||$APP.u===c.da)?
$APP.V.B($APP.wn,c):c;c=$APP.O.B(c,$APP.Ht);return new $APP.W(null,4,5,$APP.Y,[$APP.Wu,new $APP.h(null,1,[$APP.Gq,$APP.jt($APP.G([$APP.rb(c,"content")]))],null),new $APP.W(null,2,5,$APP.Y,[$APP.xu,new $APP.h(null,1,[$APP.Gq,$APP.jt($APP.G([$APP.rb(c,"appBarSpacer")]))],null)],null),new $APP.W(null,5,5,$APP.Y,[$APP.pt,$APP.qt.Grid,new $APP.h(null,4,[$APP.cu,!0,$APP.du,$APP.Iv,$APP.fu,$APP.Zu,$APP.$u,4],null),new $APP.W(null,4,5,$APP.Y,[$APP.pt,$APP.qt.Grid,new $APP.h(null,3,[$APP.Tt,!0,$APP.Ut,12,
$APP.ru,6],null),new $APP.W(null,4,5,$APP.Y,[$APP.pt,$APP.qt.Paper,new $APP.W(null,1,5,$APP.Y,[yY],null),new $APP.W(null,2,5,$APP.Y,[FY,$APP.r(a)],null)],null)],null),new $APP.W(null,4,5,$APP.Y,[$APP.pt,$APP.qt.Grid,new $APP.h(null,3,[$APP.Tt,!0,$APP.Ut,12,$APP.ru,6],null),new $APP.W(null,3,5,$APP.Y,[$APP.pt,$APP.qt.Paper,$APP.m($APP.r(b))?new $APP.W(null,3,5,$APP.Y,[$APP.Pt,new $APP.W(null,1,5,$APP.Y,[EY],null),new $APP.W(null,1,5,$APP.Y,[qY],null)],null):null],null)],null)],null)],null)}};
$APP.$V=function(){return new $APP.W(null,2,5,$APP.Y,[$APP.pt,$APP.nt(new $APP.W(null,1,5,$APP.Y,[$APP.ot],null),GY)],null)};$APP.g=rX.prototype;$APP.g.toString=function(){return $APP.Dh(this)};$APP.g.oa=function(){return this.meta};$APP.g.Pa=function(){return this.Qa(null)};$APP.g.Ia=function(){return $APP.Vh};$APP.g.Yc=function(){return null!=this.current};
$APP.g.hb=function(a,b){for(var c=this,d=sX(this),e=$APP.A(d);;){var f=function(){var k=$APP.C(d);return k?k:c.all}();a=function(){var k=e,l=$APP.A(f);return b.B?b.B(k,l):b.call(null,k,l)}();if($APP.fi(a))return $APP.r(a);d=f;e=a}};$APP.g.ib=function(a,b,c){for(var d=this,e=sX(this),f=c;;){c=function(){var k=f,l=$APP.A(e);return b.B?b.B(k,l):b.call(null,k,l)}();if($APP.fi(c))return $APP.r(c);e=a=function(){var k=$APP.C(e);return k?k:d.all}();f=c}};$APP.g.Ka=function(){return $APP.A(sX(this))};
$APP.g.Qa=function(){null==this._next&&(this._next=new rX(null,this.all,sX(this),null,null));return this._next};$APP.g.va=function(){return this};$APP.g.pa=function(a,b){return b===this.meta?this:new rX(b,this.all,this.prev,this.current,this._next)};$APP.g.ya=function(a,b){return $APP.yj(b,this)};$APP.g.Ga=$APP.u;$APP.g.ra=function(a,b,c){return $APP.Um(b,$APP.$m,"("," ",")",c,this)};
var GX=new $APP.Q(null,"link","link",-1769163468),HY=new $APP.Q(null,"magenta","magenta",1687937081),IY=new $APP.Q(null,"cadetblue","cadetblue",1126335112),YX=new $APP.Q(null,"marker","marker",865118313),FX=new $APP.Q(null,"linkLength","linkLength",747066704),JY=new $APP.Q(null,"steelblue1","steelblue1",-1413376207),KY=new $APP.Q(null,"pink1","pink1",1030593513),HX=new $APP.Q(null,"focusAnimationDuration","focusAnimationDuration",-1950020906),pY=new $APP.Q(qX,"skills-data","dpham.cv.panels.skills/skills-data",
-1189979902),SX=new $APP.Q(null,"desc","desc",2093485764),lY=new $APP.Q(null,"programming-skills","programming-skills",-1920460914),KX=new $APP.Q(null,"focusedNodeId","focusedNodeId",2041325945),JX=new $APP.Q(null,"focusZoom","focusZoom",-1348934099),dY=new $APP.Q(null,"radialaxis","radialaxis",-1005484905),LY=new $APP.Q(null,"plots-tab","plots-tab",-1998775509),yX=new $APP.Q(null,"links","links",-654507394),xY=new $APP.Q(null,"label","label",1718410804),cY=new $APP.Q(null,"polar","polar",-1917024704),
MY=new $APP.Q(null,"darkolivegreen","darkolivegreen",-2098617596),vY=new $APP.Q(null,"textColor","textColor",-680658062),zY=new $APP.Q(qX,"skills-tab","dpham.cv.panels.skills/skills-tab",1511830892),NX=new $APP.Q(null,"ref","ref",1289896967),WX=new $APP.Q(null,"hoverinfo","hoverinfo",30772936),PX=new $APP.Q(qX,"set-skills-tab","dpham.cv.panels.skills/set-skills-tab",-1487106868),IX=new $APP.Q(null,"automaticRearrangeAfterDropNode","automaticRearrangeAfterDropNode",-1607292234),nY=new $APP.Q(null,
"elevation","elevation",-1609348796),NY=new $APP.Q(null,"language","language",-1591107564),rY=new $APP.Q(qX,"plots-tab","dpham.cv.panels.skills/plots-tab",-1568314945),MX=new $APP.Q(null,"component-did-mount","component-did-mount",-1126910518),gY=new $APP.Q(null,"displayModeBar","displayModeBar",-1187531817),RX=new $APP.Q(null,"subject","subject",-1411880451),CX=new $APP.Q(null,"config","config",994861415),aY=new $APP.Q(null,"autosize","autosize",-724145344),$X=new $APP.Q(null,"layout","layout",-2120940921),
CY=new $APP.Q(null,"data-analysis","data-analysis",-2055327371),OY=new $APP.Q(null,"indianred","indianred",-1829312906),hY=new $APP.Q(null,"useResizeHandler","useResizeHandler",-1748859262),XX=new $APP.Q(null,"toself","toself",-1022747099),zX=new $APP.Q(null,"xp","xp",550374458),DY=new $APP.Q(null,"software-engineering","software-engineering",1156967679),EX=new $APP.Q(null,"gravity","gravity",-1815198225),BY=new $APP.Q(null,"personality","personality",1044414103),PY=new $APP.Q(null,"darkorange","darkorange",
1453996632),iY=new $APP.Q(null,"on-hover","on-hover",-537403203),sY=new $APP.Q(null,"onChange","onChange",-312891301),QY=new $APP.Q(null,"royalblue","royalblue",978912636),VX=new $APP.Q(null,"text","text",-1790561697),RY=new $APP.Q(null,"skills-tab","skills-tab",-1255537216),tY=new $APP.Q(qX,"set-plots-tab","dpham.cv.panels.skills/set-plots-tab",-1873430995),SY=new $APP.Q(null,"purple","purple",-876021126),QX=new $APP.Q(null,"hard-skills","hard-skills",-88224380),AY=new $APP.Q(null,"languages","languages",
1471910331),eY=new $APP.Q(null,"visible","visible",-1024216805),bY=new $APP.Q(null,"b","b",1482224470),uY=new $APP.Q(null,"indicatorColor","indicatorColor",-1868144605),TY=new $APP.Q(null,"grey90","grey90",521471421),UY=new $APP.Q(null,"simple","simple",-581868663),wY=new $APP.Q(null,"scrollButtons","scrollButtons",-954109284),fY=new $APP.Q(null,"range","range",1639692286),DX=new $APP.Q(null,"d3","d3",-1338309509),VY=new $APP.Q(null,"grey16","grey16",470952904),AX=new $APP.Q(null,"strokeWidth","strokeWidth",
-2130848332),UX=new $APP.Q(null,"theta","theta",-427510258);var WY=(0,$APP.uL)(),XY=$APP.zd(),YY=$APP.yd.lc.Ob;$APP.yd.Kb.length+YY>$APP.yd.gf&&(YY>$APP.yd.gf/2&&$APP.wd($APP.yd),$APP.yd.Kb.length>$APP.yd.gf/2&&$APP.xd($APP.yd));var ZY=$APP.ld($APP.yd.dd);ZY.mh=void 0;ZY.be=XY;ZY.Gd=0;ZY.id=$APP.ld($APP.yd.Le);ZY.ze="Module Load: skills";ZY.type="Module Load";$APP.yd.Kb.push(ZY);$APP.yd.lc.set(String(ZY.id),ZY);$APP.yd.dg++;var $Y=(0,$APP.uL)();ZY.startTime=ZY.Ge=$Y;$APP.yd.af+=$Y-WY;$APP.yd.Rc.start&&$APP.yd.Rc.start(ZY.id,ZY.toString());$APP.yf.Ng=ZY.id;
$APP.yf.vc&&$APP.yf.vc.getId();$APP.yf.vc=$APP.yf.Ab.skills;var aZ=$APP.il([new $APP.W(null,2,5,$APP.Y,[new $APP.W(null,3,5,$APP.Y,[255,250,250],null),"snow"],null),new $APP.W(null,2,5,$APP.Y,[new $APP.W(null,3,5,$APP.Y,[248,248,255],null),"ghostwhite"],null),new $APP.W(null,2,5,$APP.Y,[new $APP.W(null,3,5,$APP.Y,[245,245,245],null),"whitesmoke"],null),new $APP.W(null,2,5,$APP.Y,[new $APP.W(null,3,5,$APP.Y,[220,220,220],null),"gainsboro"],null),new $APP.W(null,2,5,$APP.Y,[new $APP.W(null,3,5,$APP.Y,[255,250,240],null),"floralwhite"],null),new $APP.W(null,
2,5,$APP.Y,[new $APP.W(null,3,5,$APP.Y,[253,245,230],null),"oldlace"],null),new $APP.W(null,2,5,$APP.Y,[new $APP.W(null,3,5,$APP.Y,[250,240,230],null),"linen"],null),new $APP.W(null,2,5,$APP.Y,[new $APP.W(null,3,5,$APP.Y,[250,235,215],null),"antiquewhite"],null),new $APP.W(null,2,5,$APP.Y,[new $APP.W(null,3,5,$APP.Y,[255,239,213],null),"papayawhip"],null),new $APP.W(null,2,5,$APP.Y,[new $APP.W(null,3,5,$APP.Y,[255,235,205],null),"blanchedalmond"],null),new $APP.W(null,2,5,$APP.Y,[new $APP.W(null,
3,5,$APP.Y,[255,228,196],null),"bisque"],null),new $APP.W(null,2,5,$APP.Y,[new $APP.W(null,3,5,$APP.Y,[255,218,185],null),"peachpuff"],null),new $APP.W(null,2,5,$APP.Y,[new $APP.W(null,3,5,$APP.Y,[255,222,173],null),"navajowhite"],null),new $APP.W(null,2,5,$APP.Y,[new $APP.W(null,3,5,$APP.Y,[255,228,181],null),"moccasin"],null),new $APP.W(null,2,5,$APP.Y,[new $APP.W(null,3,5,$APP.Y,[255,248,220],null),"cornsilk"],null),new $APP.W(null,2,5,$APP.Y,[new $APP.W(null,3,5,$APP.Y,[255,255,240],null),"ivory"],
null),new $APP.W(null,2,5,$APP.Y,[new $APP.W(null,3,5,$APP.Y,[255,250,205],null),"lemonchiffon"],null),new $APP.W(null,2,5,$APP.Y,[new $APP.W(null,3,5,$APP.Y,[255,245,238],null),"seashell"],null),new $APP.W(null,2,5,$APP.Y,[new $APP.W(null,3,5,$APP.Y,[240,255,240],null),"honeydew"],null),new $APP.W(null,2,5,$APP.Y,[new $APP.W(null,3,5,$APP.Y,[245,255,250],null),"mintcream"],null),new $APP.W(null,2,5,$APP.Y,[new $APP.W(null,3,5,$APP.Y,[240,255,255],null),"azure"],null),new $APP.W(null,2,5,$APP.Y,[new $APP.W(null,
3,5,$APP.Y,[240,248,255],null),"aliceblue"],null),new $APP.W(null,2,5,$APP.Y,[new $APP.W(null,3,5,$APP.Y,[230,230,250],null),"lavender"],null),new $APP.W(null,2,5,$APP.Y,[new $APP.W(null,3,5,$APP.Y,[255,240,245],null),"lavenderblush"],null),new $APP.W(null,2,5,$APP.Y,[new $APP.W(null,3,5,$APP.Y,[255,228,225],null),"mistyrose"],null),new $APP.W(null,2,5,$APP.Y,[new $APP.W(null,3,5,$APP.Y,[255,255,255],null),"white"],null),new $APP.W(null,2,5,$APP.Y,[new $APP.W(null,3,5,$APP.Y,[0,0,0],null),"black"],
null),new $APP.W(null,2,5,$APP.Y,[new $APP.W(null,3,5,$APP.Y,[47,79,79],null),"darkslategray"],null),new $APP.W(null,2,5,$APP.Y,[new $APP.W(null,3,5,$APP.Y,[47,79,79],null),"darkslategrey"],null),new $APP.W(null,2,5,$APP.Y,[new $APP.W(null,3,5,$APP.Y,[105,105,105],null),"dimgray"],null),new $APP.W(null,2,5,$APP.Y,[new $APP.W(null,3,5,$APP.Y,[105,105,105],null),"dimgrey"],null),new $APP.W(null,2,5,$APP.Y,[new $APP.W(null,3,5,$APP.Y,[112,128,144],null),"slategray"],null),new $APP.W(null,2,5,$APP.Y,
[new $APP.W(null,3,5,$APP.Y,[112,128,144],null),"slategrey"],null),new $APP.W(null,2,5,$APP.Y,[new $APP.W(null,3,5,$APP.Y,[119,136,153],null),"lightslategray"],null),new $APP.W(null,2,5,$APP.Y,[new $APP.W(null,3,5,$APP.Y,[119,136,153],null),"lightslategrey"],null),new $APP.W(null,2,5,$APP.Y,[new $APP.W(null,3,5,$APP.Y,[190,190,190],null),"gray"],null),new $APP.W(null,2,5,$APP.Y,[new $APP.W(null,3,5,$APP.Y,[190,190,190],null),"grey"],null),new $APP.W(null,2,5,$APP.Y,[new $APP.W(null,3,5,$APP.Y,[211,
211,211],null),"lightgrey"],null),new $APP.W(null,2,5,$APP.Y,[new $APP.W(null,3,5,$APP.Y,[211,211,211],null),"lightgray"],null),new $APP.W(null,2,5,$APP.Y,[new $APP.W(null,3,5,$APP.Y,[25,25,112],null),"midnightblue"],null),new $APP.W(null,2,5,$APP.Y,[new $APP.W(null,3,5,$APP.Y,[0,0,128],null),"navy"],null),new $APP.W(null,2,5,$APP.Y,[new $APP.W(null,3,5,$APP.Y,[0,0,128],null),"navyblue"],null),new $APP.W(null,2,5,$APP.Y,[new $APP.W(null,3,5,$APP.Y,[100,149,237],null),"cornflowerblue"],null),new $APP.W(null,
2,5,$APP.Y,[new $APP.W(null,3,5,$APP.Y,[72,61,139],null),"darkslateblue"],null),new $APP.W(null,2,5,$APP.Y,[new $APP.W(null,3,5,$APP.Y,[106,90,205],null),"slateblue"],null),new $APP.W(null,2,5,$APP.Y,[new $APP.W(null,3,5,$APP.Y,[123,104,238],null),"mediumslateblue"],null),new $APP.W(null,2,5,$APP.Y,[new $APP.W(null,3,5,$APP.Y,[132,112,255],null),"lightslateblue"],null),new $APP.W(null,2,5,$APP.Y,[new $APP.W(null,3,5,$APP.Y,[0,0,205],null),"mediumblue"],null),new $APP.W(null,2,5,$APP.Y,[new $APP.W(null,
3,5,$APP.Y,[65,105,225],null),"royalblue"],null),new $APP.W(null,2,5,$APP.Y,[new $APP.W(null,3,5,$APP.Y,[0,0,255],null),"blue"],null),new $APP.W(null,2,5,$APP.Y,[new $APP.W(null,3,5,$APP.Y,[30,144,255],null),"dodgerblue"],null),new $APP.W(null,2,5,$APP.Y,[new $APP.W(null,3,5,$APP.Y,[0,191,255],null),"deepskyblue"],null),new $APP.W(null,2,5,$APP.Y,[new $APP.W(null,3,5,$APP.Y,[135,206,235],null),"skyblue"],null),new $APP.W(null,2,5,$APP.Y,[new $APP.W(null,3,5,$APP.Y,[135,206,250],null),"lightskyblue"],
null),new $APP.W(null,2,5,$APP.Y,[new $APP.W(null,3,5,$APP.Y,[70,130,180],null),"steelblue"],null),new $APP.W(null,2,5,$APP.Y,[new $APP.W(null,3,5,$APP.Y,[176,196,222],null),"lightsteelblue"],null),new $APP.W(null,2,5,$APP.Y,[new $APP.W(null,3,5,$APP.Y,[173,216,230],null),"lightblue"],null),new $APP.W(null,2,5,$APP.Y,[new $APP.W(null,3,5,$APP.Y,[176,224,230],null),"powderblue"],null),new $APP.W(null,2,5,$APP.Y,[new $APP.W(null,3,5,$APP.Y,[175,238,238],null),"paleturquoise"],null),new $APP.W(null,
2,5,$APP.Y,[new $APP.W(null,3,5,$APP.Y,[0,206,209],null),"darkturquoise"],null),new $APP.W(null,2,5,$APP.Y,[new $APP.W(null,3,5,$APP.Y,[72,209,204],null),"mediumturquoise"],null),new $APP.W(null,2,5,$APP.Y,[new $APP.W(null,3,5,$APP.Y,[64,224,208],null),"turquoise"],null),new $APP.W(null,2,5,$APP.Y,[new $APP.W(null,3,5,$APP.Y,[0,255,255],null),"cyan"],null),new $APP.W(null,2,5,$APP.Y,[new $APP.W(null,3,5,$APP.Y,[224,255,255],null),"lightcyan"],null),new $APP.W(null,2,5,$APP.Y,[new $APP.W(null,3,5,
$APP.Y,[95,158,160],null),"cadetblue"],null),new $APP.W(null,2,5,$APP.Y,[new $APP.W(null,3,5,$APP.Y,[102,205,170],null),"mediumaquamarine"],null),new $APP.W(null,2,5,$APP.Y,[new $APP.W(null,3,5,$APP.Y,[127,255,212],null),"aquamarine"],null),new $APP.W(null,2,5,$APP.Y,[new $APP.W(null,3,5,$APP.Y,[0,100,0],null),"darkgreen"],null),new $APP.W(null,2,5,$APP.Y,[new $APP.W(null,3,5,$APP.Y,[85,107,47],null),"darkolivegreen"],null),new $APP.W(null,2,5,$APP.Y,[new $APP.W(null,3,5,$APP.Y,[143,188,143],null),
"darkseagreen"],null),new $APP.W(null,2,5,$APP.Y,[new $APP.W(null,3,5,$APP.Y,[46,139,87],null),"seagreen"],null),new $APP.W(null,2,5,$APP.Y,[new $APP.W(null,3,5,$APP.Y,[60,179,113],null),"mediumseagreen"],null),new $APP.W(null,2,5,$APP.Y,[new $APP.W(null,3,5,$APP.Y,[32,178,170],null),"lightseagreen"],null),new $APP.W(null,2,5,$APP.Y,[new $APP.W(null,3,5,$APP.Y,[152,251,152],null),"palegreen"],null),new $APP.W(null,2,5,$APP.Y,[new $APP.W(null,3,5,$APP.Y,[0,255,127],null),"springgreen"],null),new $APP.W(null,
2,5,$APP.Y,[new $APP.W(null,3,5,$APP.Y,[124,252,0],null),"lawngreen"],null),new $APP.W(null,2,5,$APP.Y,[new $APP.W(null,3,5,$APP.Y,[0,255,0],null),"green"],null),new $APP.W(null,2,5,$APP.Y,[new $APP.W(null,3,5,$APP.Y,[127,255,0],null),"chartreuse"],null),new $APP.W(null,2,5,$APP.Y,[new $APP.W(null,3,5,$APP.Y,[0,250,154],null),"mediumspringgreen"],null),new $APP.W(null,2,5,$APP.Y,[new $APP.W(null,3,5,$APP.Y,[173,255,47],null),"greenyellow"],null),new $APP.W(null,2,5,$APP.Y,[new $APP.W(null,3,5,$APP.Y,
[50,205,50],null),"limegreen"],null),new $APP.W(null,2,5,$APP.Y,[new $APP.W(null,3,5,$APP.Y,[154,205,50],null),"yellowgreen"],null),new $APP.W(null,2,5,$APP.Y,[new $APP.W(null,3,5,$APP.Y,[34,139,34],null),"forestgreen"],null),new $APP.W(null,2,5,$APP.Y,[new $APP.W(null,3,5,$APP.Y,[107,142,35],null),"olivedrab"],null),new $APP.W(null,2,5,$APP.Y,[new $APP.W(null,3,5,$APP.Y,[189,183,107],null),"darkkhaki"],null),new $APP.W(null,2,5,$APP.Y,[new $APP.W(null,3,5,$APP.Y,[240,230,140],null),"khaki"],null),
new $APP.W(null,2,5,$APP.Y,[new $APP.W(null,3,5,$APP.Y,[238,232,170],null),"palegoldenrod"],null),new $APP.W(null,2,5,$APP.Y,[new $APP.W(null,3,5,$APP.Y,[250,250,210],null),"lightgoldenrodyellow"],null),new $APP.W(null,2,5,$APP.Y,[new $APP.W(null,3,5,$APP.Y,[255,255,224],null),"lightyellow"],null),new $APP.W(null,2,5,$APP.Y,[new $APP.W(null,3,5,$APP.Y,[255,255,0],null),"yellow"],null),new $APP.W(null,2,5,$APP.Y,[new $APP.W(null,3,5,$APP.Y,[255,215,0],null),"gold"],null),new $APP.W(null,2,5,$APP.Y,
[new $APP.W(null,3,5,$APP.Y,[238,221,130],null),"lightgoldenrod"],null),new $APP.W(null,2,5,$APP.Y,[new $APP.W(null,3,5,$APP.Y,[218,165,32],null),"goldenrod"],null),new $APP.W(null,2,5,$APP.Y,[new $APP.W(null,3,5,$APP.Y,[184,134,11],null),"darkgoldenrod"],null),new $APP.W(null,2,5,$APP.Y,[new $APP.W(null,3,5,$APP.Y,[188,143,143],null),"rosybrown"],null),new $APP.W(null,2,5,$APP.Y,[new $APP.W(null,3,5,$APP.Y,[205,92,92],null),"indianred"],null),new $APP.W(null,2,5,$APP.Y,[new $APP.W(null,3,5,$APP.Y,
[139,69,19],null),"saddlebrown"],null),new $APP.W(null,2,5,$APP.Y,[new $APP.W(null,3,5,$APP.Y,[160,82,45],null),"sienna"],null),new $APP.W(null,2,5,$APP.Y,[new $APP.W(null,3,5,$APP.Y,[205,133,63],null),"peru"],null),new $APP.W(null,2,5,$APP.Y,[new $APP.W(null,3,5,$APP.Y,[222,184,135],null),"burlywood"],null),new $APP.W(null,2,5,$APP.Y,[new $APP.W(null,3,5,$APP.Y,[245,245,220],null),"beige"],null),new $APP.W(null,2,5,$APP.Y,[new $APP.W(null,3,5,$APP.Y,[245,222,179],null),"wheat"],null),new $APP.W(null,
2,5,$APP.Y,[new $APP.W(null,3,5,$APP.Y,[244,164,96],null),"sandybrown"],null),new $APP.W(null,2,5,$APP.Y,[new $APP.W(null,3,5,$APP.Y,[210,180,140],null),"tan"],null),new $APP.W(null,2,5,$APP.Y,[new $APP.W(null,3,5,$APP.Y,[210,105,30],null),"chocolate"],null),new $APP.W(null,2,5,$APP.Y,[new $APP.W(null,3,5,$APP.Y,[178,34,34],null),"firebrick"],null),new $APP.W(null,2,5,$APP.Y,[new $APP.W(null,3,5,$APP.Y,[165,42,42],null),"brown"],null),new $APP.W(null,2,5,$APP.Y,[new $APP.W(null,3,5,$APP.Y,[233,150,
122],null),"darksalmon"],null),new $APP.W(null,2,5,$APP.Y,[new $APP.W(null,3,5,$APP.Y,[250,128,114],null),"salmon"],null),new $APP.W(null,2,5,$APP.Y,[new $APP.W(null,3,5,$APP.Y,[255,160,122],null),"lightsalmon"],null),new $APP.W(null,2,5,$APP.Y,[new $APP.W(null,3,5,$APP.Y,[255,165,0],null),"orange"],null),new $APP.W(null,2,5,$APP.Y,[new $APP.W(null,3,5,$APP.Y,[255,140,0],null),"darkorange"],null),new $APP.W(null,2,5,$APP.Y,[new $APP.W(null,3,5,$APP.Y,[255,127,80],null),"coral"],null),new $APP.W(null,
2,5,$APP.Y,[new $APP.W(null,3,5,$APP.Y,[240,128,128],null),"lightcoral"],null),new $APP.W(null,2,5,$APP.Y,[new $APP.W(null,3,5,$APP.Y,[255,99,71],null),"tomato"],null),new $APP.W(null,2,5,$APP.Y,[new $APP.W(null,3,5,$APP.Y,[255,69,0],null),"orangered"],null),new $APP.W(null,2,5,$APP.Y,[new $APP.W(null,3,5,$APP.Y,[255,0,0],null),"red"],null),new $APP.W(null,2,5,$APP.Y,[new $APP.W(null,3,5,$APP.Y,[255,105,180],null),"hotpink"],null),new $APP.W(null,2,5,$APP.Y,[new $APP.W(null,3,5,$APP.Y,[255,20,147],
null),"deeppink"],null),new $APP.W(null,2,5,$APP.Y,[new $APP.W(null,3,5,$APP.Y,[255,192,203],null),"pink"],null),new $APP.W(null,2,5,$APP.Y,[new $APP.W(null,3,5,$APP.Y,[255,182,193],null),"lightpink"],null),new $APP.W(null,2,5,$APP.Y,[new $APP.W(null,3,5,$APP.Y,[219,112,147],null),"palevioletred"],null),new $APP.W(null,2,5,$APP.Y,[new $APP.W(null,3,5,$APP.Y,[176,48,96],null),"maroon"],null),new $APP.W(null,2,5,$APP.Y,[new $APP.W(null,3,5,$APP.Y,[199,21,133],null),"mediumvioletred"],null),new $APP.W(null,
2,5,$APP.Y,[new $APP.W(null,3,5,$APP.Y,[208,32,144],null),"violetred"],null),new $APP.W(null,2,5,$APP.Y,[new $APP.W(null,3,5,$APP.Y,[255,0,255],null),"magenta"],null),new $APP.W(null,2,5,$APP.Y,[new $APP.W(null,3,5,$APP.Y,[238,130,238],null),"violet"],null),new $APP.W(null,2,5,$APP.Y,[new $APP.W(null,3,5,$APP.Y,[221,160,221],null),"plum"],null),new $APP.W(null,2,5,$APP.Y,[new $APP.W(null,3,5,$APP.Y,[218,112,214],null),"orchid"],null),new $APP.W(null,2,5,$APP.Y,[new $APP.W(null,3,5,$APP.Y,[186,85,
211],null),"mediumorchid"],null),new $APP.W(null,2,5,$APP.Y,[new $APP.W(null,3,5,$APP.Y,[153,50,204],null),"darkorchid"],null),new $APP.W(null,2,5,$APP.Y,[new $APP.W(null,3,5,$APP.Y,[148,0,211],null),"darkviolet"],null),new $APP.W(null,2,5,$APP.Y,[new $APP.W(null,3,5,$APP.Y,[138,43,226],null),"blueviolet"],null),new $APP.W(null,2,5,$APP.Y,[new $APP.W(null,3,5,$APP.Y,[160,32,240],null),"purple"],null),new $APP.W(null,2,5,$APP.Y,[new $APP.W(null,3,5,$APP.Y,[147,112,219],null),"mediumpurple"],null),
new $APP.W(null,2,5,$APP.Y,[new $APP.W(null,3,5,$APP.Y,[216,191,216],null),"thistle"],null),new $APP.W(null,2,5,$APP.Y,[new $APP.W(null,3,5,$APP.Y,[255,250,250],null),"snow1"],null),new $APP.W(null,2,5,$APP.Y,[new $APP.W(null,3,5,$APP.Y,[238,233,233],null),"snow2"],null),new $APP.W(null,2,5,$APP.Y,[new $APP.W(null,3,5,$APP.Y,[205,201,201],null),"snow3"],null),new $APP.W(null,2,5,$APP.Y,[new $APP.W(null,3,5,$APP.Y,[139,137,137],null),"snow4"],null),new $APP.W(null,2,5,$APP.Y,[new $APP.W(null,3,5,$APP.Y,
[255,245,238],null),"seashell1"],null),new $APP.W(null,2,5,$APP.Y,[new $APP.W(null,3,5,$APP.Y,[238,229,222],null),"seashell2"],null),new $APP.W(null,2,5,$APP.Y,[new $APP.W(null,3,5,$APP.Y,[205,197,191],null),"seashell3"],null),new $APP.W(null,2,5,$APP.Y,[new $APP.W(null,3,5,$APP.Y,[139,134,130],null),"seashell4"],null),new $APP.W(null,2,5,$APP.Y,[new $APP.W(null,3,5,$APP.Y,[255,239,219],null),"antiquewhite1"],null),new $APP.W(null,2,5,$APP.Y,[new $APP.W(null,3,5,$APP.Y,[238,223,204],null),"antiquewhite2"],
null),new $APP.W(null,2,5,$APP.Y,[new $APP.W(null,3,5,$APP.Y,[205,192,176],null),"antiquewhite3"],null),new $APP.W(null,2,5,$APP.Y,[new $APP.W(null,3,5,$APP.Y,[139,131,120],null),"antiquewhite4"],null),new $APP.W(null,2,5,$APP.Y,[new $APP.W(null,3,5,$APP.Y,[255,228,196],null),"bisque1"],null),new $APP.W(null,2,5,$APP.Y,[new $APP.W(null,3,5,$APP.Y,[238,213,183],null),"bisque2"],null),new $APP.W(null,2,5,$APP.Y,[new $APP.W(null,3,5,$APP.Y,[205,183,158],null),"bisque3"],null),new $APP.W(null,2,5,$APP.Y,
[new $APP.W(null,3,5,$APP.Y,[139,125,107],null),"bisque4"],null),new $APP.W(null,2,5,$APP.Y,[new $APP.W(null,3,5,$APP.Y,[255,218,185],null),"peachpuff1"],null),new $APP.W(null,2,5,$APP.Y,[new $APP.W(null,3,5,$APP.Y,[238,203,173],null),"peachpuff2"],null),new $APP.W(null,2,5,$APP.Y,[new $APP.W(null,3,5,$APP.Y,[205,175,149],null),"peachpuff3"],null),new $APP.W(null,2,5,$APP.Y,[new $APP.W(null,3,5,$APP.Y,[139,119,101],null),"peachpuff4"],null),new $APP.W(null,2,5,$APP.Y,[new $APP.W(null,3,5,$APP.Y,[255,
222,173],null),"navajowhite1"],null),new $APP.W(null,2,5,$APP.Y,[new $APP.W(null,3,5,$APP.Y,[238,207,161],null),"navajowhite2"],null),new $APP.W(null,2,5,$APP.Y,[new $APP.W(null,3,5,$APP.Y,[205,179,139],null),"navajowhite3"],null),new $APP.W(null,2,5,$APP.Y,[new $APP.W(null,3,5,$APP.Y,[139,121,94],null),"navajowhite4"],null),new $APP.W(null,2,5,$APP.Y,[new $APP.W(null,3,5,$APP.Y,[255,250,205],null),"lemonchiffon1"],null),new $APP.W(null,2,5,$APP.Y,[new $APP.W(null,3,5,$APP.Y,[238,233,191],null),"lemonchiffon2"],
null),new $APP.W(null,2,5,$APP.Y,[new $APP.W(null,3,5,$APP.Y,[205,201,165],null),"lemonchiffon3"],null),new $APP.W(null,2,5,$APP.Y,[new $APP.W(null,3,5,$APP.Y,[139,137,112],null),"lemonchiffon4"],null),new $APP.W(null,2,5,$APP.Y,[new $APP.W(null,3,5,$APP.Y,[255,248,220],null),"cornsilk1"],null),new $APP.W(null,2,5,$APP.Y,[new $APP.W(null,3,5,$APP.Y,[238,232,205],null),"cornsilk2"],null),new $APP.W(null,2,5,$APP.Y,[new $APP.W(null,3,5,$APP.Y,[205,200,177],null),"cornsilk3"],null),new $APP.W(null,2,
5,$APP.Y,[new $APP.W(null,3,5,$APP.Y,[139,136,120],null),"cornsilk4"],null),new $APP.W(null,2,5,$APP.Y,[new $APP.W(null,3,5,$APP.Y,[255,255,240],null),"ivory1"],null),new $APP.W(null,2,5,$APP.Y,[new $APP.W(null,3,5,$APP.Y,[238,238,224],null),"ivory2"],null),new $APP.W(null,2,5,$APP.Y,[new $APP.W(null,3,5,$APP.Y,[205,205,193],null),"ivory3"],null),new $APP.W(null,2,5,$APP.Y,[new $APP.W(null,3,5,$APP.Y,[139,139,131],null),"ivory4"],null),new $APP.W(null,2,5,$APP.Y,[new $APP.W(null,3,5,$APP.Y,[240,255,
240],null),"honeydew1"],null),new $APP.W(null,2,5,$APP.Y,[new $APP.W(null,3,5,$APP.Y,[224,238,224],null),"honeydew2"],null),new $APP.W(null,2,5,$APP.Y,[new $APP.W(null,3,5,$APP.Y,[193,205,193],null),"honeydew3"],null),new $APP.W(null,2,5,$APP.Y,[new $APP.W(null,3,5,$APP.Y,[131,139,131],null),"honeydew4"],null),new $APP.W(null,2,5,$APP.Y,[new $APP.W(null,3,5,$APP.Y,[255,240,245],null),"lavenderblush1"],null),new $APP.W(null,2,5,$APP.Y,[new $APP.W(null,3,5,$APP.Y,[238,224,229],null),"lavenderblush2"],
null),new $APP.W(null,2,5,$APP.Y,[new $APP.W(null,3,5,$APP.Y,[205,193,197],null),"lavenderblush3"],null),new $APP.W(null,2,5,$APP.Y,[new $APP.W(null,3,5,$APP.Y,[139,131,134],null),"lavenderblush4"],null),new $APP.W(null,2,5,$APP.Y,[new $APP.W(null,3,5,$APP.Y,[255,228,225],null),"mistyrose1"],null),new $APP.W(null,2,5,$APP.Y,[new $APP.W(null,3,5,$APP.Y,[238,213,210],null),"mistyrose2"],null),new $APP.W(null,2,5,$APP.Y,[new $APP.W(null,3,5,$APP.Y,[205,183,181],null),"mistyrose3"],null),new $APP.W(null,
2,5,$APP.Y,[new $APP.W(null,3,5,$APP.Y,[139,125,123],null),"mistyrose4"],null),new $APP.W(null,2,5,$APP.Y,[new $APP.W(null,3,5,$APP.Y,[240,255,255],null),"azure1"],null),new $APP.W(null,2,5,$APP.Y,[new $APP.W(null,3,5,$APP.Y,[224,238,238],null),"azure2"],null),new $APP.W(null,2,5,$APP.Y,[new $APP.W(null,3,5,$APP.Y,[193,205,205],null),"azure3"],null),new $APP.W(null,2,5,$APP.Y,[new $APP.W(null,3,5,$APP.Y,[131,139,139],null),"azure4"],null),new $APP.W(null,2,5,$APP.Y,[new $APP.W(null,3,5,$APP.Y,[131,
111,255],null),"slateblue1"],null),new $APP.W(null,2,5,$APP.Y,[new $APP.W(null,3,5,$APP.Y,[122,103,238],null),"slateblue2"],null),new $APP.W(null,2,5,$APP.Y,[new $APP.W(null,3,5,$APP.Y,[105,89,205],null),"slateblue3"],null),new $APP.W(null,2,5,$APP.Y,[new $APP.W(null,3,5,$APP.Y,[71,60,139],null),"slateblue4"],null),new $APP.W(null,2,5,$APP.Y,[new $APP.W(null,3,5,$APP.Y,[72,118,255],null),"royalblue1"],null),new $APP.W(null,2,5,$APP.Y,[new $APP.W(null,3,5,$APP.Y,[67,110,238],null),"royalblue2"],null),
new $APP.W(null,2,5,$APP.Y,[new $APP.W(null,3,5,$APP.Y,[58,95,205],null),"royalblue3"],null),new $APP.W(null,2,5,$APP.Y,[new $APP.W(null,3,5,$APP.Y,[39,64,139],null),"royalblue4"],null),new $APP.W(null,2,5,$APP.Y,[new $APP.W(null,3,5,$APP.Y,[0,0,255],null),"blue1"],null),new $APP.W(null,2,5,$APP.Y,[new $APP.W(null,3,5,$APP.Y,[0,0,238],null),"blue2"],null),new $APP.W(null,2,5,$APP.Y,[new $APP.W(null,3,5,$APP.Y,[0,0,205],null),"blue3"],null),new $APP.W(null,2,5,$APP.Y,[new $APP.W(null,3,5,$APP.Y,[0,
0,139],null),"blue4"],null),new $APP.W(null,2,5,$APP.Y,[new $APP.W(null,3,5,$APP.Y,[30,144,255],null),"dodgerblue1"],null),new $APP.W(null,2,5,$APP.Y,[new $APP.W(null,3,5,$APP.Y,[28,134,238],null),"dodgerblue2"],null),new $APP.W(null,2,5,$APP.Y,[new $APP.W(null,3,5,$APP.Y,[24,116,205],null),"dodgerblue3"],null),new $APP.W(null,2,5,$APP.Y,[new $APP.W(null,3,5,$APP.Y,[16,78,139],null),"dodgerblue4"],null),new $APP.W(null,2,5,$APP.Y,[new $APP.W(null,3,5,$APP.Y,[99,184,255],null),"steelblue1"],null),
new $APP.W(null,2,5,$APP.Y,[new $APP.W(null,3,5,$APP.Y,[92,172,238],null),"steelblue2"],null),new $APP.W(null,2,5,$APP.Y,[new $APP.W(null,3,5,$APP.Y,[79,148,205],null),"steelblue3"],null),new $APP.W(null,2,5,$APP.Y,[new $APP.W(null,3,5,$APP.Y,[54,100,139],null),"steelblue4"],null),new $APP.W(null,2,5,$APP.Y,[new $APP.W(null,3,5,$APP.Y,[0,191,255],null),"deepskyblue1"],null),new $APP.W(null,2,5,$APP.Y,[new $APP.W(null,3,5,$APP.Y,[0,178,238],null),"deepskyblue2"],null),new $APP.W(null,2,5,$APP.Y,[new $APP.W(null,
3,5,$APP.Y,[0,154,205],null),"deepskyblue3"],null),new $APP.W(null,2,5,$APP.Y,[new $APP.W(null,3,5,$APP.Y,[0,104,139],null),"deepskyblue4"],null),new $APP.W(null,2,5,$APP.Y,[new $APP.W(null,3,5,$APP.Y,[135,206,255],null),"skyblue1"],null),new $APP.W(null,2,5,$APP.Y,[new $APP.W(null,3,5,$APP.Y,[126,192,238],null),"skyblue2"],null),new $APP.W(null,2,5,$APP.Y,[new $APP.W(null,3,5,$APP.Y,[108,166,205],null),"skyblue3"],null),new $APP.W(null,2,5,$APP.Y,[new $APP.W(null,3,5,$APP.Y,[74,112,139],null),"skyblue4"],
null),new $APP.W(null,2,5,$APP.Y,[new $APP.W(null,3,5,$APP.Y,[176,226,255],null),"lightskyblue1"],null),new $APP.W(null,2,5,$APP.Y,[new $APP.W(null,3,5,$APP.Y,[164,211,238],null),"lightskyblue2"],null),new $APP.W(null,2,5,$APP.Y,[new $APP.W(null,3,5,$APP.Y,[141,182,205],null),"lightskyblue3"],null),new $APP.W(null,2,5,$APP.Y,[new $APP.W(null,3,5,$APP.Y,[96,123,139],null),"lightskyblue4"],null),new $APP.W(null,2,5,$APP.Y,[new $APP.W(null,3,5,$APP.Y,[198,226,255],null),"slategray1"],null),new $APP.W(null,
2,5,$APP.Y,[new $APP.W(null,3,5,$APP.Y,[185,211,238],null),"slategray2"],null),new $APP.W(null,2,5,$APP.Y,[new $APP.W(null,3,5,$APP.Y,[159,182,205],null),"slategray3"],null),new $APP.W(null,2,5,$APP.Y,[new $APP.W(null,3,5,$APP.Y,[108,123,139],null),"slategray4"],null),new $APP.W(null,2,5,$APP.Y,[new $APP.W(null,3,5,$APP.Y,[202,225,255],null),"lightsteelblue1"],null),new $APP.W(null,2,5,$APP.Y,[new $APP.W(null,3,5,$APP.Y,[188,210,238],null),"lightsteelblue2"],null),new $APP.W(null,2,5,$APP.Y,[new $APP.W(null,
3,5,$APP.Y,[162,181,205],null),"lightsteelblue3"],null),new $APP.W(null,2,5,$APP.Y,[new $APP.W(null,3,5,$APP.Y,[110,123,139],null),"lightsteelblue4"],null),new $APP.W(null,2,5,$APP.Y,[new $APP.W(null,3,5,$APP.Y,[191,239,255],null),"lightblue1"],null),new $APP.W(null,2,5,$APP.Y,[new $APP.W(null,3,5,$APP.Y,[178,223,238],null),"lightblue2"],null),new $APP.W(null,2,5,$APP.Y,[new $APP.W(null,3,5,$APP.Y,[154,192,205],null),"lightblue3"],null),new $APP.W(null,2,5,$APP.Y,[new $APP.W(null,3,5,$APP.Y,[104,
131,139],null),"lightblue4"],null),new $APP.W(null,2,5,$APP.Y,[new $APP.W(null,3,5,$APP.Y,[224,255,255],null),"lightcyan1"],null),new $APP.W(null,2,5,$APP.Y,[new $APP.W(null,3,5,$APP.Y,[209,238,238],null),"lightcyan2"],null),new $APP.W(null,2,5,$APP.Y,[new $APP.W(null,3,5,$APP.Y,[180,205,205],null),"lightcyan3"],null),new $APP.W(null,2,5,$APP.Y,[new $APP.W(null,3,5,$APP.Y,[122,139,139],null),"lightcyan4"],null),new $APP.W(null,2,5,$APP.Y,[new $APP.W(null,3,5,$APP.Y,[187,255,255],null),"paleturquoise1"],
null),new $APP.W(null,2,5,$APP.Y,[new $APP.W(null,3,5,$APP.Y,[174,238,238],null),"paleturquoise2"],null),new $APP.W(null,2,5,$APP.Y,[new $APP.W(null,3,5,$APP.Y,[150,205,205],null),"paleturquoise3"],null),new $APP.W(null,2,5,$APP.Y,[new $APP.W(null,3,5,$APP.Y,[102,139,139],null),"paleturquoise4"],null),new $APP.W(null,2,5,$APP.Y,[new $APP.W(null,3,5,$APP.Y,[152,245,255],null),"cadetblue1"],null),new $APP.W(null,2,5,$APP.Y,[new $APP.W(null,3,5,$APP.Y,[142,229,238],null),"cadetblue2"],null),new $APP.W(null,
2,5,$APP.Y,[new $APP.W(null,3,5,$APP.Y,[122,197,205],null),"cadetblue3"],null),new $APP.W(null,2,5,$APP.Y,[new $APP.W(null,3,5,$APP.Y,[83,134,139],null),"cadetblue4"],null),new $APP.W(null,2,5,$APP.Y,[new $APP.W(null,3,5,$APP.Y,[0,245,255],null),"turquoise1"],null),new $APP.W(null,2,5,$APP.Y,[new $APP.W(null,3,5,$APP.Y,[0,229,238],null),"turquoise2"],null),new $APP.W(null,2,5,$APP.Y,[new $APP.W(null,3,5,$APP.Y,[0,197,205],null),"turquoise3"],null),new $APP.W(null,2,5,$APP.Y,[new $APP.W(null,3,5,$APP.Y,
[0,134,139],null),"turquoise4"],null),new $APP.W(null,2,5,$APP.Y,[new $APP.W(null,3,5,$APP.Y,[0,255,255],null),"cyan1"],null),new $APP.W(null,2,5,$APP.Y,[new $APP.W(null,3,5,$APP.Y,[0,238,238],null),"cyan2"],null),new $APP.W(null,2,5,$APP.Y,[new $APP.W(null,3,5,$APP.Y,[0,205,205],null),"cyan3"],null),new $APP.W(null,2,5,$APP.Y,[new $APP.W(null,3,5,$APP.Y,[0,139,139],null),"cyan4"],null),new $APP.W(null,2,5,$APP.Y,[new $APP.W(null,3,5,$APP.Y,[151,255,255],null),"darkslategray1"],null),new $APP.W(null,
2,5,$APP.Y,[new $APP.W(null,3,5,$APP.Y,[141,238,238],null),"darkslategray2"],null),new $APP.W(null,2,5,$APP.Y,[new $APP.W(null,3,5,$APP.Y,[121,205,205],null),"darkslategray3"],null),new $APP.W(null,2,5,$APP.Y,[new $APP.W(null,3,5,$APP.Y,[82,139,139],null),"darkslategray4"],null),new $APP.W(null,2,5,$APP.Y,[new $APP.W(null,3,5,$APP.Y,[127,255,212],null),"aquamarine1"],null),new $APP.W(null,2,5,$APP.Y,[new $APP.W(null,3,5,$APP.Y,[118,238,198],null),"aquamarine2"],null),new $APP.W(null,2,5,$APP.Y,[new $APP.W(null,
3,5,$APP.Y,[102,205,170],null),"aquamarine3"],null),new $APP.W(null,2,5,$APP.Y,[new $APP.W(null,3,5,$APP.Y,[69,139,116],null),"aquamarine4"],null),new $APP.W(null,2,5,$APP.Y,[new $APP.W(null,3,5,$APP.Y,[193,255,193],null),"darkseagreen1"],null),new $APP.W(null,2,5,$APP.Y,[new $APP.W(null,3,5,$APP.Y,[180,238,180],null),"darkseagreen2"],null),new $APP.W(null,2,5,$APP.Y,[new $APP.W(null,3,5,$APP.Y,[155,205,155],null),"darkseagreen3"],null),new $APP.W(null,2,5,$APP.Y,[new $APP.W(null,3,5,$APP.Y,[105,
139,105],null),"darkseagreen4"],null),new $APP.W(null,2,5,$APP.Y,[new $APP.W(null,3,5,$APP.Y,[84,255,159],null),"seagreen1"],null),new $APP.W(null,2,5,$APP.Y,[new $APP.W(null,3,5,$APP.Y,[78,238,148],null),"seagreen2"],null),new $APP.W(null,2,5,$APP.Y,[new $APP.W(null,3,5,$APP.Y,[67,205,128],null),"seagreen3"],null),new $APP.W(null,2,5,$APP.Y,[new $APP.W(null,3,5,$APP.Y,[46,139,87],null),"seagreen4"],null),new $APP.W(null,2,5,$APP.Y,[new $APP.W(null,3,5,$APP.Y,[154,255,154],null),"palegreen1"],null),
new $APP.W(null,2,5,$APP.Y,[new $APP.W(null,3,5,$APP.Y,[144,238,144],null),"palegreen2"],null),new $APP.W(null,2,5,$APP.Y,[new $APP.W(null,3,5,$APP.Y,[124,205,124],null),"palegreen3"],null),new $APP.W(null,2,5,$APP.Y,[new $APP.W(null,3,5,$APP.Y,[84,139,84],null),"palegreen4"],null),new $APP.W(null,2,5,$APP.Y,[new $APP.W(null,3,5,$APP.Y,[0,255,127],null),"springgreen1"],null),new $APP.W(null,2,5,$APP.Y,[new $APP.W(null,3,5,$APP.Y,[0,238,118],null),"springgreen2"],null),new $APP.W(null,2,5,$APP.Y,[new $APP.W(null,
3,5,$APP.Y,[0,205,102],null),"springgreen3"],null),new $APP.W(null,2,5,$APP.Y,[new $APP.W(null,3,5,$APP.Y,[0,139,69],null),"springgreen4"],null),new $APP.W(null,2,5,$APP.Y,[new $APP.W(null,3,5,$APP.Y,[0,255,0],null),"green1"],null),new $APP.W(null,2,5,$APP.Y,[new $APP.W(null,3,5,$APP.Y,[0,238,0],null),"green2"],null),new $APP.W(null,2,5,$APP.Y,[new $APP.W(null,3,5,$APP.Y,[0,205,0],null),"green3"],null),new $APP.W(null,2,5,$APP.Y,[new $APP.W(null,3,5,$APP.Y,[0,139,0],null),"green4"],null),new $APP.W(null,
2,5,$APP.Y,[new $APP.W(null,3,5,$APP.Y,[127,255,0],null),"chartreuse1"],null),new $APP.W(null,2,5,$APP.Y,[new $APP.W(null,3,5,$APP.Y,[118,238,0],null),"chartreuse2"],null),new $APP.W(null,2,5,$APP.Y,[new $APP.W(null,3,5,$APP.Y,[102,205,0],null),"chartreuse3"],null),new $APP.W(null,2,5,$APP.Y,[new $APP.W(null,3,5,$APP.Y,[69,139,0],null),"chartreuse4"],null),new $APP.W(null,2,5,$APP.Y,[new $APP.W(null,3,5,$APP.Y,[192,255,62],null),"olivedrab1"],null),new $APP.W(null,2,5,$APP.Y,[new $APP.W(null,3,5,
$APP.Y,[179,238,58],null),"olivedrab2"],null),new $APP.W(null,2,5,$APP.Y,[new $APP.W(null,3,5,$APP.Y,[154,205,50],null),"olivedrab3"],null),new $APP.W(null,2,5,$APP.Y,[new $APP.W(null,3,5,$APP.Y,[105,139,34],null),"olivedrab4"],null),new $APP.W(null,2,5,$APP.Y,[new $APP.W(null,3,5,$APP.Y,[202,255,112],null),"darkolivegreen1"],null),new $APP.W(null,2,5,$APP.Y,[new $APP.W(null,3,5,$APP.Y,[188,238,104],null),"darkolivegreen2"],null),new $APP.W(null,2,5,$APP.Y,[new $APP.W(null,3,5,$APP.Y,[162,205,90],
null),"darkolivegreen3"],null),new $APP.W(null,2,5,$APP.Y,[new $APP.W(null,3,5,$APP.Y,[110,139,61],null),"darkolivegreen4"],null),new $APP.W(null,2,5,$APP.Y,[new $APP.W(null,3,5,$APP.Y,[255,246,143],null),"khaki1"],null),new $APP.W(null,2,5,$APP.Y,[new $APP.W(null,3,5,$APP.Y,[238,230,133],null),"khaki2"],null),new $APP.W(null,2,5,$APP.Y,[new $APP.W(null,3,5,$APP.Y,[205,198,115],null),"khaki3"],null),new $APP.W(null,2,5,$APP.Y,[new $APP.W(null,3,5,$APP.Y,[139,134,78],null),"khaki4"],null),new $APP.W(null,
2,5,$APP.Y,[new $APP.W(null,3,5,$APP.Y,[255,236,139],null),"lightgoldenrod1"],null),new $APP.W(null,2,5,$APP.Y,[new $APP.W(null,3,5,$APP.Y,[238,220,130],null),"lightgoldenrod2"],null),new $APP.W(null,2,5,$APP.Y,[new $APP.W(null,3,5,$APP.Y,[205,190,112],null),"lightgoldenrod3"],null),new $APP.W(null,2,5,$APP.Y,[new $APP.W(null,3,5,$APP.Y,[139,129,76],null),"lightgoldenrod4"],null),new $APP.W(null,2,5,$APP.Y,[new $APP.W(null,3,5,$APP.Y,[255,255,224],null),"lightyellow1"],null),new $APP.W(null,2,5,$APP.Y,
[new $APP.W(null,3,5,$APP.Y,[238,238,209],null),"lightyellow2"],null),new $APP.W(null,2,5,$APP.Y,[new $APP.W(null,3,5,$APP.Y,[205,205,180],null),"lightyellow3"],null),new $APP.W(null,2,5,$APP.Y,[new $APP.W(null,3,5,$APP.Y,[139,139,122],null),"lightyellow4"],null),new $APP.W(null,2,5,$APP.Y,[new $APP.W(null,3,5,$APP.Y,[255,255,0],null),"yellow1"],null),new $APP.W(null,2,5,$APP.Y,[new $APP.W(null,3,5,$APP.Y,[238,238,0],null),"yellow2"],null),new $APP.W(null,2,5,$APP.Y,[new $APP.W(null,3,5,$APP.Y,[205,
205,0],null),"yellow3"],null),new $APP.W(null,2,5,$APP.Y,[new $APP.W(null,3,5,$APP.Y,[139,139,0],null),"yellow4"],null),new $APP.W(null,2,5,$APP.Y,[new $APP.W(null,3,5,$APP.Y,[255,215,0],null),"gold1"],null),new $APP.W(null,2,5,$APP.Y,[new $APP.W(null,3,5,$APP.Y,[238,201,0],null),"gold2"],null),new $APP.W(null,2,5,$APP.Y,[new $APP.W(null,3,5,$APP.Y,[205,173,0],null),"gold3"],null),new $APP.W(null,2,5,$APP.Y,[new $APP.W(null,3,5,$APP.Y,[139,117,0],null),"gold4"],null),new $APP.W(null,2,5,$APP.Y,[new $APP.W(null,
3,5,$APP.Y,[255,193,37],null),"goldenrod1"],null),new $APP.W(null,2,5,$APP.Y,[new $APP.W(null,3,5,$APP.Y,[238,180,34],null),"goldenrod2"],null),new $APP.W(null,2,5,$APP.Y,[new $APP.W(null,3,5,$APP.Y,[205,155,29],null),"goldenrod3"],null),new $APP.W(null,2,5,$APP.Y,[new $APP.W(null,3,5,$APP.Y,[139,105,20],null),"goldenrod4"],null),new $APP.W(null,2,5,$APP.Y,[new $APP.W(null,3,5,$APP.Y,[255,185,15],null),"darkgoldenrod1"],null),new $APP.W(null,2,5,$APP.Y,[new $APP.W(null,3,5,$APP.Y,[238,173,14],null),
"darkgoldenrod2"],null),new $APP.W(null,2,5,$APP.Y,[new $APP.W(null,3,5,$APP.Y,[205,149,12],null),"darkgoldenrod3"],null),new $APP.W(null,2,5,$APP.Y,[new $APP.W(null,3,5,$APP.Y,[139,101,8],null),"darkgoldenrod4"],null),new $APP.W(null,2,5,$APP.Y,[new $APP.W(null,3,5,$APP.Y,[255,193,193],null),"rosybrown1"],null),new $APP.W(null,2,5,$APP.Y,[new $APP.W(null,3,5,$APP.Y,[238,180,180],null),"rosybrown2"],null),new $APP.W(null,2,5,$APP.Y,[new $APP.W(null,3,5,$APP.Y,[205,155,155],null),"rosybrown3"],null),
new $APP.W(null,2,5,$APP.Y,[new $APP.W(null,3,5,$APP.Y,[139,105,105],null),"rosybrown4"],null),new $APP.W(null,2,5,$APP.Y,[new $APP.W(null,3,5,$APP.Y,[255,106,106],null),"indianred1"],null),new $APP.W(null,2,5,$APP.Y,[new $APP.W(null,3,5,$APP.Y,[238,99,99],null),"indianred2"],null),new $APP.W(null,2,5,$APP.Y,[new $APP.W(null,3,5,$APP.Y,[205,85,85],null),"indianred3"],null),new $APP.W(null,2,5,$APP.Y,[new $APP.W(null,3,5,$APP.Y,[139,58,58],null),"indianred4"],null),new $APP.W(null,2,5,$APP.Y,[new $APP.W(null,
3,5,$APP.Y,[255,130,71],null),"sienna1"],null),new $APP.W(null,2,5,$APP.Y,[new $APP.W(null,3,5,$APP.Y,[238,121,66],null),"sienna2"],null),new $APP.W(null,2,5,$APP.Y,[new $APP.W(null,3,5,$APP.Y,[205,104,57],null),"sienna3"],null),new $APP.W(null,2,5,$APP.Y,[new $APP.W(null,3,5,$APP.Y,[139,71,38],null),"sienna4"],null),new $APP.W(null,2,5,$APP.Y,[new $APP.W(null,3,5,$APP.Y,[255,211,155],null),"burlywood1"],null),new $APP.W(null,2,5,$APP.Y,[new $APP.W(null,3,5,$APP.Y,[238,197,145],null),"burlywood2"],
null),new $APP.W(null,2,5,$APP.Y,[new $APP.W(null,3,5,$APP.Y,[205,170,125],null),"burlywood3"],null),new $APP.W(null,2,5,$APP.Y,[new $APP.W(null,3,5,$APP.Y,[139,115,85],null),"burlywood4"],null),new $APP.W(null,2,5,$APP.Y,[new $APP.W(null,3,5,$APP.Y,[255,231,186],null),"wheat1"],null),new $APP.W(null,2,5,$APP.Y,[new $APP.W(null,3,5,$APP.Y,[238,216,174],null),"wheat2"],null),new $APP.W(null,2,5,$APP.Y,[new $APP.W(null,3,5,$APP.Y,[205,186,150],null),"wheat3"],null),new $APP.W(null,2,5,$APP.Y,[new $APP.W(null,
3,5,$APP.Y,[139,126,102],null),"wheat4"],null),new $APP.W(null,2,5,$APP.Y,[new $APP.W(null,3,5,$APP.Y,[255,165,79],null),"tan1"],null),new $APP.W(null,2,5,$APP.Y,[new $APP.W(null,3,5,$APP.Y,[238,154,73],null),"tan2"],null),new $APP.W(null,2,5,$APP.Y,[new $APP.W(null,3,5,$APP.Y,[205,133,63],null),"tan3"],null),new $APP.W(null,2,5,$APP.Y,[new $APP.W(null,3,5,$APP.Y,[139,90,43],null),"tan4"],null),new $APP.W(null,2,5,$APP.Y,[new $APP.W(null,3,5,$APP.Y,[255,127,36],null),"chocolate1"],null),new $APP.W(null,
2,5,$APP.Y,[new $APP.W(null,3,5,$APP.Y,[238,118,33],null),"chocolate2"],null),new $APP.W(null,2,5,$APP.Y,[new $APP.W(null,3,5,$APP.Y,[205,102,29],null),"chocolate3"],null),new $APP.W(null,2,5,$APP.Y,[new $APP.W(null,3,5,$APP.Y,[139,69,19],null),"chocolate4"],null),new $APP.W(null,2,5,$APP.Y,[new $APP.W(null,3,5,$APP.Y,[255,48,48],null),"firebrick1"],null),new $APP.W(null,2,5,$APP.Y,[new $APP.W(null,3,5,$APP.Y,[238,44,44],null),"firebrick2"],null),new $APP.W(null,2,5,$APP.Y,[new $APP.W(null,3,5,$APP.Y,
[205,38,38],null),"firebrick3"],null),new $APP.W(null,2,5,$APP.Y,[new $APP.W(null,3,5,$APP.Y,[139,26,26],null),"firebrick4"],null),new $APP.W(null,2,5,$APP.Y,[new $APP.W(null,3,5,$APP.Y,[255,64,64],null),"brown1"],null),new $APP.W(null,2,5,$APP.Y,[new $APP.W(null,3,5,$APP.Y,[238,59,59],null),"brown2"],null),new $APP.W(null,2,5,$APP.Y,[new $APP.W(null,3,5,$APP.Y,[205,51,51],null),"brown3"],null),new $APP.W(null,2,5,$APP.Y,[new $APP.W(null,3,5,$APP.Y,[139,35,35],null),"brown4"],null),new $APP.W(null,
2,5,$APP.Y,[new $APP.W(null,3,5,$APP.Y,[255,140,105],null),"salmon1"],null),new $APP.W(null,2,5,$APP.Y,[new $APP.W(null,3,5,$APP.Y,[238,130,98],null),"salmon2"],null),new $APP.W(null,2,5,$APP.Y,[new $APP.W(null,3,5,$APP.Y,[205,112,84],null),"salmon3"],null),new $APP.W(null,2,5,$APP.Y,[new $APP.W(null,3,5,$APP.Y,[139,76,57],null),"salmon4"],null),new $APP.W(null,2,5,$APP.Y,[new $APP.W(null,3,5,$APP.Y,[255,160,122],null),"lightsalmon1"],null),new $APP.W(null,2,5,$APP.Y,[new $APP.W(null,3,5,$APP.Y,[238,
149,114],null),"lightsalmon2"],null),new $APP.W(null,2,5,$APP.Y,[new $APP.W(null,3,5,$APP.Y,[205,129,98],null),"lightsalmon3"],null),new $APP.W(null,2,5,$APP.Y,[new $APP.W(null,3,5,$APP.Y,[139,87,66],null),"lightsalmon4"],null),new $APP.W(null,2,5,$APP.Y,[new $APP.W(null,3,5,$APP.Y,[255,165,0],null),"orange1"],null),new $APP.W(null,2,5,$APP.Y,[new $APP.W(null,3,5,$APP.Y,[238,154,0],null),"orange2"],null),new $APP.W(null,2,5,$APP.Y,[new $APP.W(null,3,5,$APP.Y,[205,133,0],null),"orange3"],null),new $APP.W(null,
2,5,$APP.Y,[new $APP.W(null,3,5,$APP.Y,[139,90,0],null),"orange4"],null),new $APP.W(null,2,5,$APP.Y,[new $APP.W(null,3,5,$APP.Y,[255,127,0],null),"darkorange1"],null),new $APP.W(null,2,5,$APP.Y,[new $APP.W(null,3,5,$APP.Y,[238,118,0],null),"darkorange2"],null),new $APP.W(null,2,5,$APP.Y,[new $APP.W(null,3,5,$APP.Y,[205,102,0],null),"darkorange3"],null),new $APP.W(null,2,5,$APP.Y,[new $APP.W(null,3,5,$APP.Y,[139,69,0],null),"darkorange4"],null),new $APP.W(null,2,5,$APP.Y,[new $APP.W(null,3,5,$APP.Y,
[255,114,86],null),"coral1"],null),new $APP.W(null,2,5,$APP.Y,[new $APP.W(null,3,5,$APP.Y,[238,106,80],null),"coral2"],null),new $APP.W(null,2,5,$APP.Y,[new $APP.W(null,3,5,$APP.Y,[205,91,69],null),"coral3"],null),new $APP.W(null,2,5,$APP.Y,[new $APP.W(null,3,5,$APP.Y,[139,62,47],null),"coral4"],null),new $APP.W(null,2,5,$APP.Y,[new $APP.W(null,3,5,$APP.Y,[255,99,71],null),"tomato1"],null),new $APP.W(null,2,5,$APP.Y,[new $APP.W(null,3,5,$APP.Y,[238,92,66],null),"tomato2"],null),new $APP.W(null,2,
5,$APP.Y,[new $APP.W(null,3,5,$APP.Y,[205,79,57],null),"tomato3"],null),new $APP.W(null,2,5,$APP.Y,[new $APP.W(null,3,5,$APP.Y,[139,54,38],null),"tomato4"],null),new $APP.W(null,2,5,$APP.Y,[new $APP.W(null,3,5,$APP.Y,[255,69,0],null),"orangered1"],null),new $APP.W(null,2,5,$APP.Y,[new $APP.W(null,3,5,$APP.Y,[238,64,0],null),"orangered2"],null),new $APP.W(null,2,5,$APP.Y,[new $APP.W(null,3,5,$APP.Y,[205,55,0],null),"orangered3"],null),new $APP.W(null,2,5,$APP.Y,[new $APP.W(null,3,5,$APP.Y,[139,37,
0],null),"orangered4"],null),new $APP.W(null,2,5,$APP.Y,[new $APP.W(null,3,5,$APP.Y,[255,0,0],null),"red1"],null),new $APP.W(null,2,5,$APP.Y,[new $APP.W(null,3,5,$APP.Y,[238,0,0],null),"red2"],null),new $APP.W(null,2,5,$APP.Y,[new $APP.W(null,3,5,$APP.Y,[205,0,0],null),"red3"],null),new $APP.W(null,2,5,$APP.Y,[new $APP.W(null,3,5,$APP.Y,[139,0,0],null),"red4"],null),new $APP.W(null,2,5,$APP.Y,[new $APP.W(null,3,5,$APP.Y,[255,20,147],null),"deeppink1"],null),new $APP.W(null,2,5,$APP.Y,[new $APP.W(null,
3,5,$APP.Y,[238,18,137],null),"deeppink2"],null),new $APP.W(null,2,5,$APP.Y,[new $APP.W(null,3,5,$APP.Y,[205,16,118],null),"deeppink3"],null),new $APP.W(null,2,5,$APP.Y,[new $APP.W(null,3,5,$APP.Y,[139,10,80],null),"deeppink4"],null),new $APP.W(null,2,5,$APP.Y,[new $APP.W(null,3,5,$APP.Y,[255,110,180],null),"hotpink1"],null),new $APP.W(null,2,5,$APP.Y,[new $APP.W(null,3,5,$APP.Y,[238,106,167],null),"hotpink2"],null),new $APP.W(null,2,5,$APP.Y,[new $APP.W(null,3,5,$APP.Y,[205,96,144],null),"hotpink3"],
null),new $APP.W(null,2,5,$APP.Y,[new $APP.W(null,3,5,$APP.Y,[139,58,98],null),"hotpink4"],null),new $APP.W(null,2,5,$APP.Y,[new $APP.W(null,3,5,$APP.Y,[255,181,197],null),"pink1"],null),new $APP.W(null,2,5,$APP.Y,[new $APP.W(null,3,5,$APP.Y,[238,169,184],null),"pink2"],null),new $APP.W(null,2,5,$APP.Y,[new $APP.W(null,3,5,$APP.Y,[205,145,158],null),"pink3"],null),new $APP.W(null,2,5,$APP.Y,[new $APP.W(null,3,5,$APP.Y,[139,99,108],null),"pink4"],null),new $APP.W(null,2,5,$APP.Y,[new $APP.W(null,3,
5,$APP.Y,[255,174,185],null),"lightpink1"],null),new $APP.W(null,2,5,$APP.Y,[new $APP.W(null,3,5,$APP.Y,[238,162,173],null),"lightpink2"],null),new $APP.W(null,2,5,$APP.Y,[new $APP.W(null,3,5,$APP.Y,[205,140,149],null),"lightpink3"],null),new $APP.W(null,2,5,$APP.Y,[new $APP.W(null,3,5,$APP.Y,[139,95,101],null),"lightpink4"],null),new $APP.W(null,2,5,$APP.Y,[new $APP.W(null,3,5,$APP.Y,[255,130,171],null),"palevioletred1"],null),new $APP.W(null,2,5,$APP.Y,[new $APP.W(null,3,5,$APP.Y,[238,121,159],
null),"palevioletred2"],null),new $APP.W(null,2,5,$APP.Y,[new $APP.W(null,3,5,$APP.Y,[205,104,137],null),"palevioletred3"],null),new $APP.W(null,2,5,$APP.Y,[new $APP.W(null,3,5,$APP.Y,[139,71,93],null),"palevioletred4"],null),new $APP.W(null,2,5,$APP.Y,[new $APP.W(null,3,5,$APP.Y,[255,52,179],null),"maroon1"],null),new $APP.W(null,2,5,$APP.Y,[new $APP.W(null,3,5,$APP.Y,[238,48,167],null),"maroon2"],null),new $APP.W(null,2,5,$APP.Y,[new $APP.W(null,3,5,$APP.Y,[205,41,144],null),"maroon3"],null),new $APP.W(null,
2,5,$APP.Y,[new $APP.W(null,3,5,$APP.Y,[139,28,98],null),"maroon4"],null),new $APP.W(null,2,5,$APP.Y,[new $APP.W(null,3,5,$APP.Y,[255,62,150],null),"violetred1"],null),new $APP.W(null,2,5,$APP.Y,[new $APP.W(null,3,5,$APP.Y,[238,58,140],null),"violetred2"],null),new $APP.W(null,2,5,$APP.Y,[new $APP.W(null,3,5,$APP.Y,[205,50,120],null),"violetred3"],null),new $APP.W(null,2,5,$APP.Y,[new $APP.W(null,3,5,$APP.Y,[139,34,82],null),"violetred4"],null),new $APP.W(null,2,5,$APP.Y,[new $APP.W(null,3,5,$APP.Y,
[255,0,255],null),"magenta1"],null),new $APP.W(null,2,5,$APP.Y,[new $APP.W(null,3,5,$APP.Y,[238,0,238],null),"magenta2"],null),new $APP.W(null,2,5,$APP.Y,[new $APP.W(null,3,5,$APP.Y,[205,0,205],null),"magenta3"],null),new $APP.W(null,2,5,$APP.Y,[new $APP.W(null,3,5,$APP.Y,[139,0,139],null),"magenta4"],null),new $APP.W(null,2,5,$APP.Y,[new $APP.W(null,3,5,$APP.Y,[255,131,250],null),"orchid1"],null),new $APP.W(null,2,5,$APP.Y,[new $APP.W(null,3,5,$APP.Y,[238,122,233],null),"orchid2"],null),new $APP.W(null,
2,5,$APP.Y,[new $APP.W(null,3,5,$APP.Y,[205,105,201],null),"orchid3"],null),new $APP.W(null,2,5,$APP.Y,[new $APP.W(null,3,5,$APP.Y,[139,71,137],null),"orchid4"],null),new $APP.W(null,2,5,$APP.Y,[new $APP.W(null,3,5,$APP.Y,[255,187,255],null),"plum1"],null),new $APP.W(null,2,5,$APP.Y,[new $APP.W(null,3,5,$APP.Y,[238,174,238],null),"plum2"],null),new $APP.W(null,2,5,$APP.Y,[new $APP.W(null,3,5,$APP.Y,[205,150,205],null),"plum3"],null),new $APP.W(null,2,5,$APP.Y,[new $APP.W(null,3,5,$APP.Y,[139,102,
139],null),"plum4"],null),new $APP.W(null,2,5,$APP.Y,[new $APP.W(null,3,5,$APP.Y,[224,102,255],null),"mediumorchid1"],null),new $APP.W(null,2,5,$APP.Y,[new $APP.W(null,3,5,$APP.Y,[209,95,238],null),"mediumorchid2"],null),new $APP.W(null,2,5,$APP.Y,[new $APP.W(null,3,5,$APP.Y,[180,82,205],null),"mediumorchid3"],null),new $APP.W(null,2,5,$APP.Y,[new $APP.W(null,3,5,$APP.Y,[122,55,139],null),"mediumorchid4"],null),new $APP.W(null,2,5,$APP.Y,[new $APP.W(null,3,5,$APP.Y,[191,62,255],null),"darkorchid1"],
null),new $APP.W(null,2,5,$APP.Y,[new $APP.W(null,3,5,$APP.Y,[178,58,238],null),"darkorchid2"],null),new $APP.W(null,2,5,$APP.Y,[new $APP.W(null,3,5,$APP.Y,[154,50,205],null),"darkorchid3"],null),new $APP.W(null,2,5,$APP.Y,[new $APP.W(null,3,5,$APP.Y,[104,34,139],null),"darkorchid4"],null),new $APP.W(null,2,5,$APP.Y,[new $APP.W(null,3,5,$APP.Y,[155,48,255],null),"purple1"],null),new $APP.W(null,2,5,$APP.Y,[new $APP.W(null,3,5,$APP.Y,[145,44,238],null),"purple2"],null),new $APP.W(null,2,5,$APP.Y,[new $APP.W(null,
3,5,$APP.Y,[125,38,205],null),"purple3"],null),new $APP.W(null,2,5,$APP.Y,[new $APP.W(null,3,5,$APP.Y,[85,26,139],null),"purple4"],null),new $APP.W(null,2,5,$APP.Y,[new $APP.W(null,3,5,$APP.Y,[171,130,255],null),"mediumpurple1"],null),new $APP.W(null,2,5,$APP.Y,[new $APP.W(null,3,5,$APP.Y,[159,121,238],null),"mediumpurple2"],null),new $APP.W(null,2,5,$APP.Y,[new $APP.W(null,3,5,$APP.Y,[137,104,205],null),"mediumpurple3"],null),new $APP.W(null,2,5,$APP.Y,[new $APP.W(null,3,5,$APP.Y,[93,71,139],null),
"mediumpurple4"],null),new $APP.W(null,2,5,$APP.Y,[new $APP.W(null,3,5,$APP.Y,[255,225,255],null),"thistle1"],null),new $APP.W(null,2,5,$APP.Y,[new $APP.W(null,3,5,$APP.Y,[238,210,238],null),"thistle2"],null),new $APP.W(null,2,5,$APP.Y,[new $APP.W(null,3,5,$APP.Y,[205,181,205],null),"thistle3"],null),new $APP.W(null,2,5,$APP.Y,[new $APP.W(null,3,5,$APP.Y,[139,123,139],null),"thistle4"],null),new $APP.W(null,2,5,$APP.Y,[new $APP.W(null,3,5,$APP.Y,[0,0,0],null),"gray0"],null),new $APP.W(null,2,5,$APP.Y,
[new $APP.W(null,3,5,$APP.Y,[0,0,0],null),"grey0"],null),new $APP.W(null,2,5,$APP.Y,[new $APP.W(null,3,5,$APP.Y,[3,3,3],null),"gray1"],null),new $APP.W(null,2,5,$APP.Y,[new $APP.W(null,3,5,$APP.Y,[3,3,3],null),"grey1"],null),new $APP.W(null,2,5,$APP.Y,[new $APP.W(null,3,5,$APP.Y,[5,5,5],null),"gray2"],null),new $APP.W(null,2,5,$APP.Y,[new $APP.W(null,3,5,$APP.Y,[5,5,5],null),"grey2"],null),new $APP.W(null,2,5,$APP.Y,[new $APP.W(null,3,5,$APP.Y,[8,8,8],null),"gray3"],null),new $APP.W(null,2,5,$APP.Y,
[new $APP.W(null,3,5,$APP.Y,[8,8,8],null),"grey3"],null),new $APP.W(null,2,5,$APP.Y,[new $APP.W(null,3,5,$APP.Y,[10,10,10],null),"gray4"],null),new $APP.W(null,2,5,$APP.Y,[new $APP.W(null,3,5,$APP.Y,[10,10,10],null),"grey4"],null),new $APP.W(null,2,5,$APP.Y,[new $APP.W(null,3,5,$APP.Y,[13,13,13],null),"gray5"],null),new $APP.W(null,2,5,$APP.Y,[new $APP.W(null,3,5,$APP.Y,[13,13,13],null),"grey5"],null),new $APP.W(null,2,5,$APP.Y,[new $APP.W(null,3,5,$APP.Y,[15,15,15],null),"gray6"],null),new $APP.W(null,
2,5,$APP.Y,[new $APP.W(null,3,5,$APP.Y,[15,15,15],null),"grey6"],null),new $APP.W(null,2,5,$APP.Y,[new $APP.W(null,3,5,$APP.Y,[18,18,18],null),"gray7"],null),new $APP.W(null,2,5,$APP.Y,[new $APP.W(null,3,5,$APP.Y,[18,18,18],null),"grey7"],null),new $APP.W(null,2,5,$APP.Y,[new $APP.W(null,3,5,$APP.Y,[20,20,20],null),"gray8"],null),new $APP.W(null,2,5,$APP.Y,[new $APP.W(null,3,5,$APP.Y,[20,20,20],null),"grey8"],null),new $APP.W(null,2,5,$APP.Y,[new $APP.W(null,3,5,$APP.Y,[23,23,23],null),"gray9"],null),
new $APP.W(null,2,5,$APP.Y,[new $APP.W(null,3,5,$APP.Y,[23,23,23],null),"grey9"],null),new $APP.W(null,2,5,$APP.Y,[new $APP.W(null,3,5,$APP.Y,[26,26,26],null),"gray10"],null),new $APP.W(null,2,5,$APP.Y,[new $APP.W(null,3,5,$APP.Y,[26,26,26],null),"grey10"],null),new $APP.W(null,2,5,$APP.Y,[new $APP.W(null,3,5,$APP.Y,[28,28,28],null),"gray11"],null),new $APP.W(null,2,5,$APP.Y,[new $APP.W(null,3,5,$APP.Y,[28,28,28],null),"grey11"],null),new $APP.W(null,2,5,$APP.Y,[new $APP.W(null,3,5,$APP.Y,[31,31,
31],null),"gray12"],null),new $APP.W(null,2,5,$APP.Y,[new $APP.W(null,3,5,$APP.Y,[31,31,31],null),"grey12"],null),new $APP.W(null,2,5,$APP.Y,[new $APP.W(null,3,5,$APP.Y,[33,33,33],null),"gray13"],null),new $APP.W(null,2,5,$APP.Y,[new $APP.W(null,3,5,$APP.Y,[33,33,33],null),"grey13"],null),new $APP.W(null,2,5,$APP.Y,[new $APP.W(null,3,5,$APP.Y,[36,36,36],null),"gray14"],null),new $APP.W(null,2,5,$APP.Y,[new $APP.W(null,3,5,$APP.Y,[38,38,38],null),"gray15"],null),new $APP.W(null,2,5,$APP.Y,[new $APP.W(null,
3,5,$APP.Y,[41,41,41],null),"gray16"],null),new $APP.W(null,2,5,$APP.Y,[new $APP.W(null,3,5,$APP.Y,[43,43,43],null),"gray17"],null),new $APP.W(null,2,5,$APP.Y,[new $APP.W(null,3,5,$APP.Y,[43,43,43],null),"grey17"],null),new $APP.W(null,2,5,$APP.Y,[new $APP.W(null,3,5,$APP.Y,[46,46,46],null),"gray18"],null),new $APP.W(null,2,5,$APP.Y,[new $APP.W(null,3,5,$APP.Y,[46,46,46],null),"grey18"],null),new $APP.W(null,2,5,$APP.Y,[new $APP.W(null,3,5,$APP.Y,[48,48,48],null),"gray19"],null),new $APP.W(null,2,
5,$APP.Y,[new $APP.W(null,3,5,$APP.Y,[48,48,48],null),"grey19"],null),new $APP.W(null,2,5,$APP.Y,[new $APP.W(null,3,5,$APP.Y,[51,51,51],null),"gray20"],null),new $APP.W(null,2,5,$APP.Y,[new $APP.W(null,3,5,$APP.Y,[51,51,51],null),"grey20"],null),new $APP.W(null,2,5,$APP.Y,[new $APP.W(null,3,5,$APP.Y,[54,54,54],null),"gray21"],null),new $APP.W(null,2,5,$APP.Y,[new $APP.W(null,3,5,$APP.Y,[54,54,54],null),"grey21"],null),new $APP.W(null,2,5,$APP.Y,[new $APP.W(null,3,5,$APP.Y,[56,56,56],null),"gray22"],
null),new $APP.W(null,2,5,$APP.Y,[new $APP.W(null,3,5,$APP.Y,[56,56,56],null),"grey22"],null),new $APP.W(null,2,5,$APP.Y,[new $APP.W(null,3,5,$APP.Y,[59,59,59],null),"gray23"],null),new $APP.W(null,2,5,$APP.Y,[new $APP.W(null,3,5,$APP.Y,[59,59,59],null),"grey23"],null),new $APP.W(null,2,5,$APP.Y,[new $APP.W(null,3,5,$APP.Y,[61,61,61],null),"gray24"],null),new $APP.W(null,2,5,$APP.Y,[new $APP.W(null,3,5,$APP.Y,[61,61,61],null),"grey24"],null),new $APP.W(null,2,5,$APP.Y,[new $APP.W(null,3,5,$APP.Y,
[64,64,64],null),"gray25"],null),new $APP.W(null,2,5,$APP.Y,[new $APP.W(null,3,5,$APP.Y,[64,64,64],null),"grey25"],null),new $APP.W(null,2,5,$APP.Y,[new $APP.W(null,3,5,$APP.Y,[66,66,66],null),"gray26"],null),new $APP.W(null,2,5,$APP.Y,[new $APP.W(null,3,5,$APP.Y,[66,66,66],null),"grey26"],null),new $APP.W(null,2,5,$APP.Y,[new $APP.W(null,3,5,$APP.Y,[69,69,69],null),"gray27"],null),new $APP.W(null,2,5,$APP.Y,[new $APP.W(null,3,5,$APP.Y,[69,69,69],null),"grey27"],null),new $APP.W(null,2,5,$APP.Y,[new $APP.W(null,
3,5,$APP.Y,[71,71,71],null),"gray28"],null),new $APP.W(null,2,5,$APP.Y,[new $APP.W(null,3,5,$APP.Y,[71,71,71],null),"grey28"],null),new $APP.W(null,2,5,$APP.Y,[new $APP.W(null,3,5,$APP.Y,[74,74,74],null),"gray29"],null),new $APP.W(null,2,5,$APP.Y,[new $APP.W(null,3,5,$APP.Y,[74,74,74],null),"grey29"],null),new $APP.W(null,2,5,$APP.Y,[new $APP.W(null,3,5,$APP.Y,[77,77,77],null),"gray30"],null),new $APP.W(null,2,5,$APP.Y,[new $APP.W(null,3,5,$APP.Y,[77,77,77],null),"grey30"],null),new $APP.W(null,2,
5,$APP.Y,[new $APP.W(null,3,5,$APP.Y,[79,79,79],null),"gray31"],null),new $APP.W(null,2,5,$APP.Y,[new $APP.W(null,3,5,$APP.Y,[79,79,79],null),"grey31"],null),new $APP.W(null,2,5,$APP.Y,[new $APP.W(null,3,5,$APP.Y,[82,82,82],null),"gray32"],null),new $APP.W(null,2,5,$APP.Y,[new $APP.W(null,3,5,$APP.Y,[82,82,82],null),"grey32"],null),new $APP.W(null,2,5,$APP.Y,[new $APP.W(null,3,5,$APP.Y,[84,84,84],null),"gray33"],null),new $APP.W(null,2,5,$APP.Y,[new $APP.W(null,3,5,$APP.Y,[84,84,84],null),"grey33"],
null),new $APP.W(null,2,5,$APP.Y,[new $APP.W(null,3,5,$APP.Y,[87,87,87],null),"gray34"],null),new $APP.W(null,2,5,$APP.Y,[new $APP.W(null,3,5,$APP.Y,[87,87,87],null),"grey34"],null),new $APP.W(null,2,5,$APP.Y,[new $APP.W(null,3,5,$APP.Y,[89,89,89],null),"gray35"],null),new $APP.W(null,2,5,$APP.Y,[new $APP.W(null,3,5,$APP.Y,[89,89,89],null),"grey35"],null),new $APP.W(null,2,5,$APP.Y,[new $APP.W(null,3,5,$APP.Y,[92,92,92],null),"gray36"],null),new $APP.W(null,2,5,$APP.Y,[new $APP.W(null,3,5,$APP.Y,
[92,92,92],null),"grey36"],null),new $APP.W(null,2,5,$APP.Y,[new $APP.W(null,3,5,$APP.Y,[94,94,94],null),"gray37"],null),new $APP.W(null,2,5,$APP.Y,[new $APP.W(null,3,5,$APP.Y,[94,94,94],null),"grey37"],null),new $APP.W(null,2,5,$APP.Y,[new $APP.W(null,3,5,$APP.Y,[97,97,97],null),"gray38"],null),new $APP.W(null,2,5,$APP.Y,[new $APP.W(null,3,5,$APP.Y,[97,97,97],null),"grey38"],null),new $APP.W(null,2,5,$APP.Y,[new $APP.W(null,3,5,$APP.Y,[99,99,99],null),"gray39"],null),new $APP.W(null,2,5,$APP.Y,[new $APP.W(null,
3,5,$APP.Y,[99,99,99],null),"grey39"],null),new $APP.W(null,2,5,$APP.Y,[new $APP.W(null,3,5,$APP.Y,[102,102,102],null),"gray40"],null),new $APP.W(null,2,5,$APP.Y,[new $APP.W(null,3,5,$APP.Y,[102,102,102],null),"grey40"],null),new $APP.W(null,2,5,$APP.Y,[new $APP.W(null,3,5,$APP.Y,[105,105,105],null),"gray41"],null),new $APP.W(null,2,5,$APP.Y,[new $APP.W(null,3,5,$APP.Y,[105,105,105],null),"grey41"],null),new $APP.W(null,2,5,$APP.Y,[new $APP.W(null,3,5,$APP.Y,[107,107,107],null),"gray42"],null),new $APP.W(null,
2,5,$APP.Y,[new $APP.W(null,3,5,$APP.Y,[107,107,107],null),"grey42"],null),new $APP.W(null,2,5,$APP.Y,[new $APP.W(null,3,5,$APP.Y,[110,110,110],null),"gray43"],null),new $APP.W(null,2,5,$APP.Y,[new $APP.W(null,3,5,$APP.Y,[110,110,110],null),"grey43"],null),new $APP.W(null,2,5,$APP.Y,[new $APP.W(null,3,5,$APP.Y,[112,112,112],null),"gray44"],null),new $APP.W(null,2,5,$APP.Y,[new $APP.W(null,3,5,$APP.Y,[112,112,112],null),"grey44"],null),new $APP.W(null,2,5,$APP.Y,[new $APP.W(null,3,5,$APP.Y,[115,115,
115],null),"gray45"],null),new $APP.W(null,2,5,$APP.Y,[new $APP.W(null,3,5,$APP.Y,[115,115,115],null),"grey45"],null),new $APP.W(null,2,5,$APP.Y,[new $APP.W(null,3,5,$APP.Y,[117,117,117],null),"gray46"],null),new $APP.W(null,2,5,$APP.Y,[new $APP.W(null,3,5,$APP.Y,[117,117,117],null),"grey46"],null),new $APP.W(null,2,5,$APP.Y,[new $APP.W(null,3,5,$APP.Y,[120,120,120],null),"gray47"],null),new $APP.W(null,2,5,$APP.Y,[new $APP.W(null,3,5,$APP.Y,[120,120,120],null),"grey47"],null),new $APP.W(null,2,5,
$APP.Y,[new $APP.W(null,3,5,$APP.Y,[122,122,122],null),"gray48"],null),new $APP.W(null,2,5,$APP.Y,[new $APP.W(null,3,5,$APP.Y,[122,122,122],null),"grey48"],null),new $APP.W(null,2,5,$APP.Y,[new $APP.W(null,3,5,$APP.Y,[125,125,125],null),"gray49"],null),new $APP.W(null,2,5,$APP.Y,[new $APP.W(null,3,5,$APP.Y,[125,125,125],null),"grey49"],null),new $APP.W(null,2,5,$APP.Y,[new $APP.W(null,3,5,$APP.Y,[127,127,127],null),"gray50"],null),new $APP.W(null,2,5,$APP.Y,[new $APP.W(null,3,5,$APP.Y,[127,127,127],
null),"grey50"],null),new $APP.W(null,2,5,$APP.Y,[new $APP.W(null,3,5,$APP.Y,[130,130,130],null),"gray51"],null),new $APP.W(null,2,5,$APP.Y,[new $APP.W(null,3,5,$APP.Y,[130,130,130],null),"grey51"],null),new $APP.W(null,2,5,$APP.Y,[new $APP.W(null,3,5,$APP.Y,[133,133,133],null),"gray52"],null),new $APP.W(null,2,5,$APP.Y,[new $APP.W(null,3,5,$APP.Y,[133,133,133],null),"grey52"],null),new $APP.W(null,2,5,$APP.Y,[new $APP.W(null,3,5,$APP.Y,[135,135,135],null),"gray53"],null),new $APP.W(null,2,5,$APP.Y,
[new $APP.W(null,3,5,$APP.Y,[135,135,135],null),"grey53"],null),new $APP.W(null,2,5,$APP.Y,[new $APP.W(null,3,5,$APP.Y,[138,138,138],null),"gray54"],null),new $APP.W(null,2,5,$APP.Y,[new $APP.W(null,3,5,$APP.Y,[138,138,138],null),"grey54"],null),new $APP.W(null,2,5,$APP.Y,[new $APP.W(null,3,5,$APP.Y,[140,140,140],null),"gray55"],null),new $APP.W(null,2,5,$APP.Y,[new $APP.W(null,3,5,$APP.Y,[140,140,140],null),"grey55"],null),new $APP.W(null,2,5,$APP.Y,[new $APP.W(null,3,5,$APP.Y,[143,143,143],null),
"gray56"],null),new $APP.W(null,2,5,$APP.Y,[new $APP.W(null,3,5,$APP.Y,[143,143,143],null),"grey56"],null),new $APP.W(null,2,5,$APP.Y,[new $APP.W(null,3,5,$APP.Y,[145,145,145],null),"gray57"],null),new $APP.W(null,2,5,$APP.Y,[new $APP.W(null,3,5,$APP.Y,[145,145,145],null),"grey57"],null),new $APP.W(null,2,5,$APP.Y,[new $APP.W(null,3,5,$APP.Y,[148,148,148],null),"gray58"],null),new $APP.W(null,2,5,$APP.Y,[new $APP.W(null,3,5,$APP.Y,[148,148,148],null),"grey58"],null),new $APP.W(null,2,5,$APP.Y,[new $APP.W(null,
3,5,$APP.Y,[150,150,150],null),"gray59"],null),new $APP.W(null,2,5,$APP.Y,[new $APP.W(null,3,5,$APP.Y,[150,150,150],null),"grey59"],null),new $APP.W(null,2,5,$APP.Y,[new $APP.W(null,3,5,$APP.Y,[153,153,153],null),"gray60"],null),new $APP.W(null,2,5,$APP.Y,[new $APP.W(null,3,5,$APP.Y,[153,153,153],null),"grey60"],null),new $APP.W(null,2,5,$APP.Y,[new $APP.W(null,3,5,$APP.Y,[156,156,156],null),"gray61"],null),new $APP.W(null,2,5,$APP.Y,[new $APP.W(null,3,5,$APP.Y,[156,156,156],null),"grey61"],null),
new $APP.W(null,2,5,$APP.Y,[new $APP.W(null,3,5,$APP.Y,[158,158,158],null),"gray62"],null),new $APP.W(null,2,5,$APP.Y,[new $APP.W(null,3,5,$APP.Y,[158,158,158],null),"grey62"],null),new $APP.W(null,2,5,$APP.Y,[new $APP.W(null,3,5,$APP.Y,[161,161,161],null),"gray63"],null),new $APP.W(null,2,5,$APP.Y,[new $APP.W(null,3,5,$APP.Y,[161,161,161],null),"grey63"],null),new $APP.W(null,2,5,$APP.Y,[new $APP.W(null,3,5,$APP.Y,[163,163,163],null),"gray64"],null),new $APP.W(null,2,5,$APP.Y,[new $APP.W(null,3,
5,$APP.Y,[163,163,163],null),"grey64"],null),new $APP.W(null,2,5,$APP.Y,[new $APP.W(null,3,5,$APP.Y,[166,166,166],null),"gray65"],null),new $APP.W(null,2,5,$APP.Y,[new $APP.W(null,3,5,$APP.Y,[166,166,166],null),"grey65"],null),new $APP.W(null,2,5,$APP.Y,[new $APP.W(null,3,5,$APP.Y,[168,168,168],null),"gray66"],null),new $APP.W(null,2,5,$APP.Y,[new $APP.W(null,3,5,$APP.Y,[168,168,168],null),"grey66"],null),new $APP.W(null,2,5,$APP.Y,[new $APP.W(null,3,5,$APP.Y,[171,171,171],null),"gray67"],null),new $APP.W(null,
2,5,$APP.Y,[new $APP.W(null,3,5,$APP.Y,[171,171,171],null),"grey67"],null),new $APP.W(null,2,5,$APP.Y,[new $APP.W(null,3,5,$APP.Y,[173,173,173],null),"gray68"],null),new $APP.W(null,2,5,$APP.Y,[new $APP.W(null,3,5,$APP.Y,[173,173,173],null),"grey68"],null),new $APP.W(null,2,5,$APP.Y,[new $APP.W(null,3,5,$APP.Y,[176,176,176],null),"gray69"],null),new $APP.W(null,2,5,$APP.Y,[new $APP.W(null,3,5,$APP.Y,[176,176,176],null),"grey69"],null),new $APP.W(null,2,5,$APP.Y,[new $APP.W(null,3,5,$APP.Y,[179,179,
179],null),"gray70"],null),new $APP.W(null,2,5,$APP.Y,[new $APP.W(null,3,5,$APP.Y,[179,179,179],null),"grey70"],null),new $APP.W(null,2,5,$APP.Y,[new $APP.W(null,3,5,$APP.Y,[181,181,181],null),"gray71"],null),new $APP.W(null,2,5,$APP.Y,[new $APP.W(null,3,5,$APP.Y,[181,181,181],null),"grey71"],null),new $APP.W(null,2,5,$APP.Y,[new $APP.W(null,3,5,$APP.Y,[184,184,184],null),"gray72"],null),new $APP.W(null,2,5,$APP.Y,[new $APP.W(null,3,5,$APP.Y,[184,184,184],null),"grey72"],null),new $APP.W(null,2,5,
$APP.Y,[new $APP.W(null,3,5,$APP.Y,[186,186,186],null),"gray73"],null),new $APP.W(null,2,5,$APP.Y,[new $APP.W(null,3,5,$APP.Y,[186,186,186],null),"grey73"],null),new $APP.W(null,2,5,$APP.Y,[new $APP.W(null,3,5,$APP.Y,[189,189,189],null),"gray74"],null),new $APP.W(null,2,5,$APP.Y,[new $APP.W(null,3,5,$APP.Y,[189,189,189],null),"grey74"],null),new $APP.W(null,2,5,$APP.Y,[new $APP.W(null,3,5,$APP.Y,[191,191,191],null),"gray75"],null),new $APP.W(null,2,5,$APP.Y,[new $APP.W(null,3,5,$APP.Y,[191,191,191],
null),"grey75"],null),new $APP.W(null,2,5,$APP.Y,[new $APP.W(null,3,5,$APP.Y,[194,194,194],null),"gray76"],null),new $APP.W(null,2,5,$APP.Y,[new $APP.W(null,3,5,$APP.Y,[194,194,194],null),"grey76"],null),new $APP.W(null,2,5,$APP.Y,[new $APP.W(null,3,5,$APP.Y,[196,196,196],null),"gray77"],null),new $APP.W(null,2,5,$APP.Y,[new $APP.W(null,3,5,$APP.Y,[196,196,196],null),"grey77"],null),new $APP.W(null,2,5,$APP.Y,[new $APP.W(null,3,5,$APP.Y,[199,199,199],null),"gray78"],null),new $APP.W(null,2,5,$APP.Y,
[new $APP.W(null,3,5,$APP.Y,[199,199,199],null),"grey78"],null),new $APP.W(null,2,5,$APP.Y,[new $APP.W(null,3,5,$APP.Y,[201,201,201],null),"gray79"],null),new $APP.W(null,2,5,$APP.Y,[new $APP.W(null,3,5,$APP.Y,[201,201,201],null),"grey79"],null),new $APP.W(null,2,5,$APP.Y,[new $APP.W(null,3,5,$APP.Y,[204,204,204],null),"gray80"],null),new $APP.W(null,2,5,$APP.Y,[new $APP.W(null,3,5,$APP.Y,[204,204,204],null),"grey80"],null),new $APP.W(null,2,5,$APP.Y,[new $APP.W(null,3,5,$APP.Y,[207,207,207],null),
"gray81"],null),new $APP.W(null,2,5,$APP.Y,[new $APP.W(null,3,5,$APP.Y,[207,207,207],null),"grey81"],null),new $APP.W(null,2,5,$APP.Y,[new $APP.W(null,3,5,$APP.Y,[209,209,209],null),"gray82"],null),new $APP.W(null,2,5,$APP.Y,[new $APP.W(null,3,5,$APP.Y,[209,209,209],null),"grey82"],null),new $APP.W(null,2,5,$APP.Y,[new $APP.W(null,3,5,$APP.Y,[212,212,212],null),"gray83"],null),new $APP.W(null,2,5,$APP.Y,[new $APP.W(null,3,5,$APP.Y,[212,212,212],null),"grey83"],null),new $APP.W(null,2,5,$APP.Y,[new $APP.W(null,
3,5,$APP.Y,[214,214,214],null),"gray84"],null),new $APP.W(null,2,5,$APP.Y,[new $APP.W(null,3,5,$APP.Y,[214,214,214],null),"grey84"],null),new $APP.W(null,2,5,$APP.Y,[new $APP.W(null,3,5,$APP.Y,[217,217,217],null),"gray85"],null),new $APP.W(null,2,5,$APP.Y,[new $APP.W(null,3,5,$APP.Y,[217,217,217],null),"grey85"],null),new $APP.W(null,2,5,$APP.Y,[new $APP.W(null,3,5,$APP.Y,[219,219,219],null),"gray86"],null),new $APP.W(null,2,5,$APP.Y,[new $APP.W(null,3,5,$APP.Y,[219,219,219],null),"grey86"],null),
new $APP.W(null,2,5,$APP.Y,[new $APP.W(null,3,5,$APP.Y,[222,222,222],null),"gray87"],null),new $APP.W(null,2,5,$APP.Y,[new $APP.W(null,3,5,$APP.Y,[222,222,222],null),"grey87"],null),new $APP.W(null,2,5,$APP.Y,[new $APP.W(null,3,5,$APP.Y,[224,224,224],null),"gray88"],null),new $APP.W(null,2,5,$APP.Y,[new $APP.W(null,3,5,$APP.Y,[224,224,224],null),"grey88"],null),new $APP.W(null,2,5,$APP.Y,[new $APP.W(null,3,5,$APP.Y,[227,227,227],null),"gray89"],null),new $APP.W(null,2,5,$APP.Y,[new $APP.W(null,3,
5,$APP.Y,[227,227,227],null),"grey89"],null),new $APP.W(null,2,5,$APP.Y,[new $APP.W(null,3,5,$APP.Y,[229,229,229],null),"gray90"],null),new $APP.W(null,2,5,$APP.Y,[new $APP.W(null,3,5,$APP.Y,[229,229,229],null),"grey90"],null),new $APP.W(null,2,5,$APP.Y,[new $APP.W(null,3,5,$APP.Y,[232,232,232],null),"gray91"],null),new $APP.W(null,2,5,$APP.Y,[new $APP.W(null,3,5,$APP.Y,[232,232,232],null),"grey91"],null),new $APP.W(null,2,5,$APP.Y,[new $APP.W(null,3,5,$APP.Y,[235,235,235],null),"gray92"],null),new $APP.W(null,
2,5,$APP.Y,[new $APP.W(null,3,5,$APP.Y,[235,235,235],null),"grey92"],null),new $APP.W(null,2,5,$APP.Y,[new $APP.W(null,3,5,$APP.Y,[237,237,237],null),"gray93"],null),new $APP.W(null,2,5,$APP.Y,[new $APP.W(null,3,5,$APP.Y,[237,237,237],null),"grey93"],null),new $APP.W(null,2,5,$APP.Y,[new $APP.W(null,3,5,$APP.Y,[240,240,240],null),"gray94"],null),new $APP.W(null,2,5,$APP.Y,[new $APP.W(null,3,5,$APP.Y,[240,240,240],null),"grey94"],null),new $APP.W(null,2,5,$APP.Y,[new $APP.W(null,3,5,$APP.Y,[242,242,
242],null),"gray95"],null),new $APP.W(null,2,5,$APP.Y,[new $APP.W(null,3,5,$APP.Y,[242,242,242],null),"grey95"],null),new $APP.W(null,2,5,$APP.Y,[new $APP.W(null,3,5,$APP.Y,[245,245,245],null),"gray96"],null),new $APP.W(null,2,5,$APP.Y,[new $APP.W(null,3,5,$APP.Y,[247,247,247],null),"gray97"],null),new $APP.W(null,2,5,$APP.Y,[new $APP.W(null,3,5,$APP.Y,[250,250,250],null),"gray98"],null),new $APP.W(null,2,5,$APP.Y,[new $APP.W(null,3,5,$APP.Y,[252,252,252],null),"gray99"],null),new $APP.W(null,2,5,
$APP.Y,[new $APP.W(null,3,5,$APP.Y,[255,255,255],null),"grey100"],null),new $APP.W(null,2,5,$APP.Y,[new $APP.W(null,3,5,$APP.Y,[169,169,169],null),"darkgray"],null),new $APP.W(null,2,5,$APP.Y,[new $APP.W(null,3,5,$APP.Y,[0,0,139],null),"darkblue"],null),new $APP.W(null,2,5,$APP.Y,[new $APP.W(null,3,5,$APP.Y,[0,139,139],null),"darkcyan"],null),new $APP.W(null,2,5,$APP.Y,[new $APP.W(null,3,5,$APP.Y,[139,0,139],null),"darkmagenta"],null),new $APP.W(null,2,5,$APP.Y,[new $APP.W(null,3,5,$APP.Y,[139,0,
0],null),"darkred"],null),new $APP.W(null,2,5,$APP.Y,[new $APP.W(null,3,5,$APP.Y,[144,238,144],null),"lightgreen"],null)],!0),bZ=$APP.Rk.B($APP.gk,$APP.yk.B(function(a){return new $APP.W(null,2,5,$APP.Y,[$APP.an.j(a.j?a.j(1):a.call(null,1)),a.j?a.j(0):a.call(null,0)],null)},aZ));$APP.ZG.B(xX,bZ);
var cZ=$APP.hj(function(a,b,c){return $APP.U.D(a,b,xX(c))},$APP.gk,bZ),dZ=$APP.hj(function(a,b,c){return $APP.U.D(a,b,$APP.V.B(wX,c))},$APP.gk,bZ),eZ=new $APP.h(null,1,[UY,new $APP.W(null,10,5,$APP.Y,[TY,OY,IY,PY,KY,JY,MY,SY,QY,HY],null)],null),fZ=$APP.hj(function(a,b,c){return $APP.U.D(a,b,$APP.Qk(cZ,c))},$APP.gk,eZ),gZ=$APP.hj(function(a,b,c){return $APP.U.D(a,b,$APP.Qk(dZ,c))},$APP.gk,eZ),tX=UY.j(fZ);UY.j(gZ);bZ.j?bZ.j(VY):bZ.call(null,VY);var BX=$APP.wo(568);var TX=$APP.wo(571);var ZX=$APP.Bv.palette.primary.main,hZ=vX(new $APP.W(null,1,5,$APP.Y,[RY],null),$APP.G([NY]));$APP.QV.B(PX,function(a,b){return hZ(a,b)});$APP.et(zY,$APP.G([$APP.BT,new $APP.W(null,1,5,$APP.Y,[$APP.FP],null),function(a){return hZ(a)}]));var iZ=vX(new $APP.W(null,1,5,$APP.Y,[LY],null),$APP.G([QX]));$APP.QV.B(tY,function(a,b){return iZ(a,b)});$APP.et(rY,$APP.G([$APP.BT,new $APP.W(null,1,5,$APP.Y,[$APP.FP],null),function(a){return iZ(a)}]));
$APP.et(pY,$APP.G([function(){return new $APP.W(null,2,5,$APP.Y,[$APP.Yt.j(new $APP.W(null,2,5,$APP.Y,[$APP.Eu,$APP.oV],null)),$APP.Yt.j(new $APP.W(null,1,5,$APP.Y,[zY],null))],null)},function(a){var b=$APP.H(a,0,null);a=$APP.H(a,1,null);return $APP.O.D(b,a,$APP.O.B(b,AY))}]));var FY,jZ=$APP.tk($APP.gk),kZ=$APP.tk($APP.gk),lZ=$APP.tk($APP.gk),mZ=$APP.tk($APP.gk),nZ=$APP.O.D(new $APP.h(null,1,[$APP.zC,QX],null),$APP.jP,$APP.In.I?$APP.In.I():$APP.In.call(null));
FY=new $APP.Qn($APP.hn.B(qX,"plots-cards"),$APP.ij,QX,nZ,jZ,kZ,lZ,mZ);FY.ga(null,QX,function(){return new $APP.W(null,1,5,$APP.Y,[kY],null)});FY.ga(null,lY,function(){return new $APP.W(null,1,5,$APP.Y,[mY],null)});$APP.yf.setLoaded(void 0);
}).call(this);