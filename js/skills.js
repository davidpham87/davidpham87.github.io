var $jscomp=$jscomp||{};$jscomp.scope={};$jscomp.arrayIteratorImpl=function(ja){var Qa=0;return function(){return Qa<ja.length?{done:!1,value:ja[Qa++]}:{done:!0}}};$jscomp.arrayIterator=function(ja){return{next:$jscomp.arrayIteratorImpl(ja)}};$jscomp.ASSUME_ES5=!1;$jscomp.ASSUME_NO_NATIVE_MAP=!1;$jscomp.ASSUME_NO_NATIVE_SET=!1;$jscomp.SIMPLE_FROUND_POLYFILL=!1;
$jscomp.defineProperty=$jscomp.ASSUME_ES5||"function"==typeof Object.defineProperties?Object.defineProperty:function(ja,Qa,ma){ja!=Array.prototype&&ja!=Object.prototype&&(ja[Qa]=ma.value)};$jscomp.getGlobal=function(ja){return"undefined"!=typeof window&&window===ja?ja:"undefined"!=typeof global&&null!=global?global:ja};$jscomp.global=$jscomp.getGlobal(this);$jscomp.SYMBOL_PREFIX="jscomp_symbol_";
$jscomp.initSymbol=function(){$jscomp.initSymbol=function(){};$jscomp.global.Symbol||($jscomp.global.Symbol=$jscomp.Symbol)};$jscomp.Symbol=function(){var ja=0;return function(Qa){return $jscomp.SYMBOL_PREFIX+(Qa||"")+ja++}}();
$jscomp.initSymbolIterator=function(){$jscomp.initSymbol();var ja=$jscomp.global.Symbol.iterator;ja||(ja=$jscomp.global.Symbol.iterator=$jscomp.global.Symbol("iterator"));"function"!=typeof Array.prototype[ja]&&$jscomp.defineProperty(Array.prototype,ja,{configurable:!0,writable:!0,value:function(){return $jscomp.iteratorPrototype($jscomp.arrayIteratorImpl(this))}});$jscomp.initSymbolIterator=function(){}};
$jscomp.initSymbolAsyncIterator=function(){$jscomp.initSymbol();var ja=$jscomp.global.Symbol.asyncIterator;ja||(ja=$jscomp.global.Symbol.asyncIterator=$jscomp.global.Symbol("asyncIterator"));$jscomp.initSymbolAsyncIterator=function(){}};$jscomp.iteratorPrototype=function(ja){$jscomp.initSymbolIterator();ja={next:ja};ja[$jscomp.global.Symbol.iterator]=function(){return this};return ja};
shadow$provide[488]=function(ja,Qa,ma,bb,la,ib){Object.defineProperty(la,"__esModule",{value:!0});la.default={SYMBOLS:{CIRCLE:"circle",CROSS:"cross",DIAMOND:"diamond",SQUARE:"square",STAR:"star",TRIANGLE:"triangle",WYE:"wye"}}};
shadow$provide[489]=function(ja,Qa,ma,bb,la,ib){Object.defineProperty(la,"__esModule",{value:!0});ja=Object.assign||function(a){for(var t=1;t<arguments.length;t++){var m=arguments[t],p;for(p in m)Object.prototype.hasOwnProperty.call(m,p)&&(a[p]=m[p])}return a};ma=ma(488);la.default=ja({COORDS_SEPARATOR:",",FORCE_X:.06,FORCE_Y:.06,GRAPH_CONTAINER_ID:"graph-container-zoomable",GRAPH_WRAPPER_ID:"graph-wrapper",KEYWORDS:{SAME:"SAME"},LINK_CLASS_NAME:"link",NODE_CLASS_NAME:"node"},(ma&&ma.__esModule?ma:
{default:ma}).default)};
shadow$provide[490]=function(ja,Qa,ma,bb,la,ib){Object.defineProperty(la,"__esModule",{value:!0});la.default={automaticRearrangeAfterDropNode:!1,collapsible:!1,directed:!1,focusAnimationDuration:.75,focusZoom:1,height:400,highlightDegree:1,highlightOpacity:1,linkHighlightBehavior:!1,maxZoom:8,minZoom:.1,nodeHighlightBehavior:!1,panAndZoom:!1,staticGraph:!1,width:800,d3:{alphaTarget:.05,gravity:-100,linkLength:100,linkStrength:1},node:{color:"#d3d3d3",fontColor:"black",fontSize:8,fontWeight:"normal",
highlightColor:"SAME",highlightFontSize:8,highlightFontWeight:"normal",highlightStrokeColor:"SAME",highlightStrokeWidth:"SAME",labelProperty:"id",mouseCursor:"pointer",opacity:1,renderLabel:!0,size:200,strokeColor:"none",strokeWidth:1.5,svg:"",symbolType:"circle",viewGenerator:null},link:{color:"#d3d3d3",fontColor:"black",fontSize:8,fontWeight:"normal",highlightColor:"#d3d3d3",highlightFontSize:8,highlightFontWeight:"normal",labelProperty:"label",mouseCursor:"pointer",opacity:1,renderLabel:!1,semanticStrokeWidth:!1,
strokeWidth:1.5,type:"STRAIGHT"}}};
shadow$provide[491]=function(ja,Qa,ma,bb,la,ib){Object.defineProperty(la,"__esModule",{value:!0});la.default={GRAPH_NO_ID_PROP:"id prop not defined! id property is mandatory and it should be unique.",INVALID_LINKS:"you provided a invalid links data structure. Links source and target attributes must point to an existent node",INSUFFICIENT_DATA:"you have not provided enough data for react-d3-graph to render something. You need to provide at least one node",INVALID_LINK_VALUE:"links 'value' attribute must be of type number"}};
shadow$provide[492]=function(ja,Qa,ma,bb,la,ib){function a(a){var p=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{};return Object.keys(p).reduce(function(g,h){return p[h]?Object.keys(p[h]).reduce(function(e,n){return a===h?t({},e,{outDegree:e.outDegree+p[a][n]}):a===n?t({},e,{inDegree:e.inDegree+p[h][a]}):e},g):g},{inDegree:0,outDegree:0})}Object.defineProperty(la,"__esModule",{value:!0});var t=Object.assign||function(a){for(var p=1;p<arguments.length;p++){var g=arguments[p],h;for(h in g)Object.prototype.hasOwnProperty.call(g,
h)&&(a[h]=g[h])}return a};la.computeNodeDegree=a;la.getTargetLeafConnections=function(m){var p=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{},g=arguments[2].directed;return Object.keys(p[m]).reduce(function(h,e){var n=a(e,p),b=n.inDegree;n=n.outDegree;(g?1>=b&&1>n:1>=b&&1>=n)&&h.push({source:m,target:e});return h},[])};la.isNodeVisible=function(m,p,g){g=a(m,g);var h=g.outDegree;m=!!p[m]._orphan;return 0<g.inDegree||0<h||m};la.toggleLinksConnections=function(a,p){return a.map(function(a){var h=
a.source,e=a.target;h=h.id||h;e=e.id||e;return p&&p[h]&&p[h][e]?t({},a,{isHidden:!1}):t({},a,{isHidden:!0})})};la.toggleLinksMatrixConnections=function(a,p,g){var h=g.directed;return p.reduce(function(a,n){a[n.source]||(a[n.source]={});a[n.source][n.target]||(a[n.source][n.target]=0);var b=0===a[n.source][n.target]?1:0;a[n.source][n.target]=b;h||(a[n.target][n.source]=b);return a},t({},a))}};
shadow$provide[493]=function(ja,Qa,ma,bb,la,ib){function a(a,b){return!!a&&a.hasOwnProperty(b)&&"object"===e(a[b])&&null!==a[b]&&!m(a[b])}function t(e,b){var l=2<arguments.length&&void 0!==arguments[2]?arguments[2]:0,h=[];if(0===l&&e===b)return!0;if(m(e)&&!m(b)||!m(e)&&m(b))return!1;var n=Object.keys(e),d=Object.keys(b);if(n.length!==d.length)return!1;d=!0;var f=!1,c=void 0;try{for(var k=n[Symbol.iterator](),r;!(d=(r=k.next()).done);d=!0){var g=r.value;if(a(e,g)&&a(b,g)&&20>l)h.push(t(e[g],b[g],l+
1));else{var p=m(e[g])&&m(b[g])||b.hasOwnProperty(g)&&b[g]===e[g];h.push(p);if(!p)break}}}catch(A){f=!0,c=A}finally{try{!d&&k.return&&k.return()}finally{if(f)throw c;}}return-1===h.indexOf(!1)}function m(a){return!!a&&"object"===("undefined"===typeof a?"undefined":e(a))&&!Object.keys(a).length}function p(e){var b=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{},l=2<arguments.length&&void 0!==arguments[2]?arguments[2]:0,h=Object.keys(e),n=!0,d=!1,f=void 0;try{for(var c=h[Symbol.iterator](),
k;!(n=(k=c.next()).done);n=!0){var r=k.value,g=a(e,r);b[r]=g&&20>l?p(e[r],{},l+1):e[r]}}catch(z){d=!0,f=z}finally{try{!n&&c.return&&c.return()}finally{if(d)throw f;}}return b}function g(){var a=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{},b=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{},l=2<arguments.length&&void 0!==arguments[2]?arguments[2]:0,h={};if(0===Object.keys(a||{}).length)return b&&!m(b)?b:{};var q=!0,d=!1,f=void 0;try{for(var c=Object.keys(a)[Symbol.iterator](),
k;!(q=(k=c.next()).done);q=!0){var r=k.value;b[r]&&"object"===e(b[r])&&"object"===e(a[r])&&20>l?function(){var c=g(a[r],b[r],l+1);h[r]=a[r].hasOwnProperty("length")&&b[r].hasOwnProperty("length")?Object.keys(c).map(function(b){return c[b]}):c}():h[r]=b.hasOwnProperty(r)?b[r]:a[r]}}catch(v){d=!0,f=v}finally{try{!q&&c.return&&c.return()}finally{if(d)throw f;}}return h}function h(a){return(1<arguments.length&&void 0!==arguments[1]?arguments[1]:[]).reduce(function(b,e){a.hasOwnProperty(e)&&(b[e]=a[e]);
return b},{})}Object.defineProperty(la,"__esModule",{value:!0});var e="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(a){return typeof a}:function(a){return a&&"function"===typeof Symbol&&a.constructor===Symbol&&a!==Symbol.prototype?"symbol":typeof a};la.default={isDeepEqual:t,isEmptyObject:m,deepClone:p,merge:g,pick:h,antiPick:function(a){var b=1<arguments.length&&void 0!==arguments[1]?arguments[1]:[],e=Object.keys(a).filter(function(a){return!b.includes(a)});return h(a,e)},
throwErr:function(a,b){throw Error("react-d3-graph :: "+a+" :: "+b);}}};
shadow$provide[494]=function(ja,Qa,ma,bb,la,ib){function a(b){return b&&b.__esModule?b:{default:b}}function t(b,c,d){c in b?Object.defineProperty(b,c,{value:d,enumerable:!0,configurable:!0,writable:!0}):b[c]=d;return b}function m(b,c,d){b=(0,l.forceX)(b/2).strength(u.default.FORCE_X);c=(0,l.forceY)(c/2).strength(u.default.FORCE_Y);return(0,l.forceSimulation)().force("charge",(0,l.forceManyBody)().strength(d)).force("x",b).force("y",c)}function p(b,c){return b.reduce(function(b,d){var a=void 0!==d.source.id&&
null!==d.source.id?d.source.id:d.source,f=void 0!==d.target.id&&null!==d.target.id?d.target.id:d.target;b[a]||(b[a]={});b[f]||(b[f]={});d=c.collapsible&&d.isHidden?0:d.value||1;b[a][f]=d;c.directed||(b[f][a]=d);return b},{})}function g(b){for(var c={},d=b.length,a=0;a<d;a++){var f=b[a];f.highlighted=!1;f.hasOwnProperty("x")||(f.x=0);f.hasOwnProperty("y")||(f.y=0);c[f.id.toString()]=f}return c}function h(c,d){var a=arguments[3],e=4<arguments.length&&void 0!==arguments[4]?arguments[4]:{},k=(2<arguments.length&&
void 0!==arguments[2]?arguments[2]:[])[d],l=f.default.pick(c,r);return k?(e=e.config&&e.config.directed&&a.directed!==e.config.directed,k=b({},k,l),e?b({},k,{isHidden:!1}):a.collapsible?k:b({},k,{isHidden:!1})):b({index:d,source:{id:c.source,highlighted:!1},target:{id:c.target,highlighted:!1}},l)}function e(d,a){return Object.keys(d).reduce(function(f,e){var k=(0,c.computeNodeDegree)(e,a),r=k.outDegree,l=d[e];k=0===k.inDegree&&0===r?b({},l,{_orphan:!0}):l;f[e]=k;return f},{})}function n(b){b.nodes&&
b.nodes.length||f.default.throwErr("Graph",d.default.INSUFFICIENT_DATA);for(var c=b.links.length,a=function(c){var a=b.links[c];b.nodes.find(function(b){return b.id===a.source})||f.default.throwErr("Graph",d.default.INVALID_LINKS+' - "'+a.source+'" is not a valid source node id');b.nodes.find(function(b){return b.id===a.target})||f.default.throwErr("Graph",d.default.INVALID_LINKS+' - "'+a.target+'" is not a valid target node id');a&&void 0!==a.value&&"number"!==typeof a.value&&f.default.throwErr("Graph",
d.default.INVALID_LINK_VALUE+' - found in link with source "'+a.source+'" and target "'+a.target+'"')},e=0;e<c;e++)a(e)}Object.defineProperty(la,"__esModule",{value:!0});la.updateNodeHighlightedValue=la.initializeGraphState=la.getCenterAndZoomTransformation=la.checkForGraphElementsChanges=la.checkForGraphConfigChanges=void 0;var b=Object.assign||function(b){for(var c=1;c<arguments.length;c++){var d=arguments[c],a;for(a in d)Object.prototype.hasOwnProperty.call(d,a)&&(b[a]=d[a])}return b},l=ma(474);
ja=ma(489);var u=a(ja);ja=ma(490);var q=a(ja);ja=ma(491);var d=a(ja);ja=ma(493);var f=a(ja),c=ma(492),k="id highlighted x y index vy vx".split(" "),r=["color","opacity","strokeWidth","label"],v=["x","y","vx","vy","index"];la.checkForGraphConfigChanges=function(b,c){var d=b.config||{};b=d&&!f.default.isEmptyObject(d)&&!f.default.isDeepEqual(d,c.config);c=d&&d.d3&&!f.default.isDeepEqual(d.d3,c.config.d3);return{configUpdated:b,d3ConfigUpdated:c}};la.checkForGraphElementsChanges=function(b,c){var d=
b.data.nodes.map(function(b){return f.default.antiPick(b,v)});b=b.data.links;var a=c.d3Nodes.map(function(b){return f.default.antiPick(b,v)}),e=c.d3Links.map(function(b){return{source:void 0!==b.source.id&&null!==b.source.id?b.source.id:b.source,target:void 0!==b.target.id&&null!==b.target.id?b.target.id:b.target}});c=!(f.default.isDeepEqual(d,a)&&f.default.isDeepEqual(b,e));d=d.length!==a.length||b.length!==e.length||!f.default.isDeepEqual(d.map(function(b){return{id:b.id}}),a.map(function(b){return{id:b.id}}))||
!f.default.isDeepEqual(b,e.map(function(b){return{source:b.source,target:b.target}}));return{graphElementsUpdated:c,newGraphElements:d}};la.getCenterAndZoomTransformation=function(b,c){if(b)return"\n        translate("+c.width/2+", "+c.height/2+")\n        scale("+c.focusZoom+")\n        translate("+-b.x+", "+-b.y+")\n    "};la.initializeGraphState=function(b,c){var d=b.data,a=b.id,r=b.config;n(d);var l=void 0;l=c&&c.nodes?{nodes:d.nodes.map(function(b){return c.nodes[b.id]?Object.assign({},b,f.default.pick(c.nodes[b.id],
k)):Object.assign({},b)}),links:d.links.map(function(b,d){return h(b,d,c&&c.d3Links,r,c)})}:{nodes:d.nodes.map(function(b){return Object.assign({},b)}),links:d.links.map(function(b){return Object.assign({},b)})};d=Object.assign({},f.default.merge(q.default,r||{}));b=p(l.links,d);var u=e(g(l.nodes),b),v=l;l=v.nodes;v=v.links;a=a.replace(/ /g,"_");var A=m(d.width,d.height,d.d3&&d.d3.gravity),z=d.minZoom,H=d.maxZoom,E=d.focusZoom;E>H?d.focusZoom=H:E<z&&(d.focusZoom=z);return{id:a,config:d,links:b,d3Links:v,
nodes:u,d3Nodes:l,highlightedNode:"",simulation:A,newGraphElements:!1,configUpdated:!1,transform:1}};la.updateNodeHighlightedValue=function(b,c,d,a){var f=4<arguments.length&&void 0!==arguments[4]?arguments[4]:!1,e=f?a:"",k=Object.assign({},b[a],{highlighted:f}),r=Object.assign({},b,t({},a,k));c[a]&&0!==d.highlightDegree&&(r=Object.keys(c[a]).reduce(function(b,c){var d=Object.assign({},r[c],{highlighted:f});return Object.assign(b,t({},c,d))},r));return{nodes:r,highlightedNode:e}}};
shadow$provide[495]=function(ja,Qa,ma,bb,la,ib){Object.defineProperty(la,"__esModule",{value:!0});la.HIGHLIGHTED="H";la.MARKER_LARGE_OFFSET=4;la.MARKER_MEDIUM_OFFSET=2;la.MARKER_SMALL_SIZE=16;la.MARKERS={MARKER_S:"marker-small",MARKER_SH:"marker-small-highlighted",MARKER_M:"marker-medium",MARKER_MH:"marker-medium-highlighted",MARKER_L:"marker-large",MARKER_LH:"marker-large-highlighted"};la.SIZES={S:"S",M:"M",L:"L"}};
shadow$provide[496]=function(ja,Qa,ma,bb,la,ib){function a(a,e){if(!a)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!==typeof e&&"function"!==typeof e?a:e}function t(a,e){if("function"!==typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);a.prototype=Object.create(e&&e.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}});e&&(Object.setPrototypeOf?Object.setPrototypeOf(a,
e):a.__proto__=e)}Object.defineProperty(la,"__esModule",{value:!0});var m=Object.assign||function(a){for(var e=1;e<arguments.length;e++){var h=arguments[e],b;for(b in h)Object.prototype.hasOwnProperty.call(h,b)&&(a[b]=h[b])}return a},p=function(){function a(a,h){for(var b=0;b<h.length;b++){var e=h[b];e.enumerable=e.enumerable||!1;e.configurable=!0;"value"in e&&(e.writable=!0);Object.defineProperty(a,e.key,e)}}return function(e,h,b){h&&a(e.prototype,h);b&&a(e,b);return e}}(),g=(ja=ma(5))&&ja.__esModule?
ja:{default:ja};ja=function(h){function e(){var h,b,l,g;if(!(this instanceof e))throw new TypeError("Cannot call a class as a function");for(var q=arguments.length,d=Array(q),f=0;f<q;f++)d[f]=arguments[f];return g=(b=(l=a(this,(h=e.__proto__||Object.getPrototypeOf(e)).call.apply(h,[this].concat(d))),l),l.handleOnClickLink=function(){return l.props.onClickLink&&l.props.onClickLink(l.props.source,l.props.target)},l.handleOnRightClickLink=function(b){return l.props.onRightClickLink&&l.props.onRightClickLink(b,
l.props.source,l.props.target)},l.handleOnMouseOverLink=function(){return l.props.onMouseOverLink&&l.props.onMouseOverLink(l.props.source,l.props.target)},l.handleOnMouseOutLink=function(){return l.props.onMouseOutLink&&l.props.onMouseOutLink(l.props.source,l.props.target)},b),a(l,g)}t(e,h);p(e,[{key:"render",value:function(){var a={className:this.props.className,d:this.props.d,onClick:this.handleOnClickLink,onContextMenu:this.handleOnRightClickLink,onMouseOut:this.handleOnMouseOutLink,onMouseOver:this.handleOnMouseOverLink,
style:{strokeWidth:this.props.strokeWidth,stroke:this.props.stroke,opacity:this.props.opacity,fill:"none",cursor:this.props.mouseCursor}};this.props.markerId&&(a.markerEnd="url(#"+this.props.markerId+")");var b=this.props,e=b.label;b=b.id;var h={dy:-1,style:{fill:this.props.fontColor,fontSize:this.props.fontSize,fontWeight:this.props.fontWeight}};return g.default.createElement("g",null,g.default.createElement("path",m({},a,{id:b})),e&&g.default.createElement("text",m({style:{textAnchor:"middle"}},
h),g.default.createElement("textPath",{href:"#"+b,startOffset:"50%"},e)))}}]);return e}(g.default.Component);la.default=ja};
shadow$provide[497]=function(ja,Qa,ma,bb,la,ib){Object.defineProperty(la,"__esModule",{value:!0});ja=Object.assign||function(a){for(var t=1;t<arguments.length;t++){var m=arguments[t],p;for(p in m)Object.prototype.hasOwnProperty.call(m,p)&&(a[p]=m[p])}return a};Qa=(Qa=ma(490))&&Qa.__esModule?Qa:{default:Qa};ma=ma(488);la.default=ja({ARC:{START_ANGLE:0,END_ANGLE:2*Math.PI},DEFAULT_NODE_SIZE:Qa.default.node.size,NODE_LABEL_DX:".90em",NODE_LABEL_DY:".35em"},(ma&&ma.__esModule?ma:{default:ma}).default)};
shadow$provide[498]=function(ja,Qa,ma,bb,la,ib){function a(a){switch(a){case m.default.SYMBOLS.CIRCLE:return t.symbolCircle;case m.default.SYMBOLS.CROSS:return t.symbolCross;case m.default.SYMBOLS.DIAMOND:return t.symbolDiamond;case m.default.SYMBOLS.SQUARE:return t.symbolSquare;case m.default.SYMBOLS.STAR:return t.symbolStar;case m.default.SYMBOLS.TRIANGLE:return t.symbolTriangle;case m.default.SYMBOLS.WYE:return t.symbolWye;default:return t.symbolCircle}}Object.defineProperty(la,"__esModule",{value:!0});
var t=ma(484),m=(ja=ma(497))&&ja.__esModule?ja:{default:ja};la.default={buildSvgSymbol:function(){var p=0<arguments.length&&void 0!==arguments[0]?arguments[0]:m.default.DEFAULT_NODE_SIZE,g=1<arguments.length&&void 0!==arguments[1]?arguments[1]:m.default.SYMBOLS.CIRCLE;return(0,t.symbol)().size(function(){return p}).type(function(){return a(g)})()}}};
shadow$provide[499]=function(ja,Qa,ma,bb,la,ib){function a(b){return b&&b.__esModule?b:{default:b}}function t(b,a){if(!b)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!a||"object"!==typeof a&&"function"!==typeof a?b:a}function m(b,a){if("function"!==typeof a&&null!==a)throw new TypeError("Super expression must either be null or a function, not "+typeof a);b.prototype=Object.create(a&&a.prototype,{constructor:{value:b,enumerable:!1,writable:!0,configurable:!0}});
a&&(Object.setPrototypeOf?Object.setPrototypeOf(b,a):b.__proto__=a)}Object.defineProperty(la,"__esModule",{value:!0});var p=Object.assign||function(b){for(var a=1;a<arguments.length;a++){var e=arguments[a],h;for(h in e)Object.prototype.hasOwnProperty.call(e,h)&&(b[h]=e[h])}return b},g=function(){function b(b,a){for(var e=0;e<a.length;e++){var d=a[e];d.enumerable=d.enumerable||!1;d.configurable=!0;"value"in d&&(d.writable=!0);Object.defineProperty(b,d.key,d)}}return function(a,e,h){e&&b(a.prototype,
e);h&&b(a,h);return a}}();ja=ma(5);var h=a(ja);ja=ma(497);var e=a(ja);ma=ma(498);var n=a(ma);ma=function(b){function a(){var b,e,d,f;if(!(this instanceof a))throw new TypeError("Cannot call a class as a function");for(var c=arguments.length,k=Array(c),r=0;r<c;r++)k[r]=arguments[r];return f=(e=(d=t(this,(b=a.__proto__||Object.getPrototypeOf(a)).call.apply(b,[this].concat(k))),d),d.handleOnClickNode=function(){return d.props.onClickNode&&d.props.onClickNode(d.props.id)},d.handleOnRightClickNode=function(b){return d.props.onRightClickNode&&
d.props.onRightClickNode(b,d.props.id)},d.handleOnMouseOverNode=function(){return d.props.onMouseOverNode&&d.props.onMouseOverNode(d.props.id)},d.handleOnMouseOutNode=function(){return d.props.onMouseOut&&d.props.onMouseOut(d.props.id)},e),t(d,f)}m(a,b);g(a,[{key:"render",value:function(){var b={cursor:this.props.cursor,onClick:this.handleOnClickNode,onContextMenu:this.handleOnRightClickNode,onMouseOut:this.handleOnMouseOutNode,onMouseOver:this.handleOnMouseOverNode,opacity:this.props.opacity},a=
{dx:this.props.dx||e.default.NODE_LABEL_DX,dy:e.default.NODE_LABEL_DY,fill:this.props.fontColor,fontSize:this.props.fontSize,fontWeight:this.props.fontWeight,opacity:this.props.opacity},d=this.props.size,f=this.props.cx,c=this.props.cy;if(this.props.svg||this.props.viewGenerator){var k=d/10,r=d/10;d=r/2;var l=k/2;a=h.default.createElement("text",p({},a,{transform:"translate("+d+","+l+")"}),this.props.label);b=this.props.viewGenerator&&!this.props.overrideGlobalViewGenerator?h.default.createElement("svg",
p({},b,{width:r,height:k}),h.default.createElement("foreignObject",{x:"0",y:"0",width:"100%",height:"100%"},h.default.createElement("section",{style:{height:k,width:r,backgroundColor:"transparent"}},this.props.viewGenerator(this.props)))):h.default.createElement("image",p({},b,{href:this.props.svg,width:r,height:k}));f-=d;c-=l}else b.d=n.default.buildSvgSymbol(d,this.props.type),b.fill=this.props.fill,b.stroke=this.props.stroke,b.strokeWidth=this.props.strokeWidth,a=h.default.createElement("text",
a,this.props.label),b=h.default.createElement("path",b);return h.default.createElement("g",{className:this.props.className,cx:this.props.cx,cy:this.props.cy,id:this.props.id,transform:"translate("+f+","+c+")"},b,this.props.renderLabel&&a)}}]);return a}(h.default.Component);la.default=ma};
shadow$provide[500]=function(ja,Qa,ma,bb,la,ib){function a(a,g){if("function"!==typeof g&&null!==g)throw new TypeError("Super expression must either be null or a function, not "+typeof g);a.prototype=Object.create(g&&g.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}});g&&(Object.setPrototypeOf?Object.setPrototypeOf(a,g):a.__proto__=g)}Object.defineProperty(la,"__esModule",{value:!0});var t=function(){function a(a,h){for(var e=0;e<h.length;e++){var g=h[e];g.enumerable=g.enumerable||
!1;g.configurable=!0;"value"in g&&(g.writable=!0);Object.defineProperty(a,g.key,g)}}return function(g,h,e){h&&a(g.prototype,h);e&&a(g,e);return g}}(),m=(ja=ma(5))&&ja.__esModule?ja:{default:ja};ja=function(p){function g(){if(!(this instanceof g))throw new TypeError("Cannot call a class as a function");var a=(g.__proto__||Object.getPrototypeOf(g)).apply(this,arguments);if(!this)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!a||"object"!==typeof a&&"function"!==
typeof a?this:a}a(g,p);t(g,[{key:"render",value:function(){return m.default.createElement("marker",{className:"marker",id:this.props.id,viewBox:"0 -5 10 10",refX:this.props.refX,refY:"0",markerWidth:"6",markerHeight:"6",orient:"auto",fill:this.props.fill},m.default.createElement("path",{d:"M0,-5L10,0L0,5"}))}}]);return g}(m.default.Component);la.default=ja};
shadow$provide[501]=function(ja,Qa,ma,bb,la,ib){Object.defineProperty(la,"__esModule",{value:!0});la.LINE_TYPES={STRAIGHT:"STRAIGHT",CURVE_SMOOTH:"CURVE_SMOOTH",CURVE_FULL:"CURVE_FULL"}};
shadow$provide[502]=function(ja,Qa,ma,bb,la,ib){function a(a,h,e){h in a?Object.defineProperty(a,h,{value:e,enumerable:!0,configurable:!0,writable:!0}):a[h]=e;return a}Object.defineProperty(la,"__esModule",{value:!0});la.buildLinkPathDefinition=void 0;var t,m=ma(501),p=(t={},a(t,m.LINE_TYPES.STRAIGHT,function(){return 0}),a(t,m.LINE_TYPES.CURVE_SMOOTH,function(a,h,e,n){a=e-a;h=n-h;return Math.sqrt(a*a+h*h)}),a(t,m.LINE_TYPES.CURVE_FULL,function(){return 1}),t);la.buildLinkPathDefinition=function(a){var h=
a.source,e=void 0===h?{}:h;h=a.target;var g=void 0===h?{}:h;h=e.x;e=e.y;var b=g.x;g=g.y;var l=(p[m.LINE_TYPES[1<arguments.length&&void 0!==arguments[1]?arguments[1]:m.LINE_TYPES.STRAIGHT]||m.LINE_TYPES.STRAIGHT]||p[m.LINE_TYPES.STRAIGHT])(h,e,b,g);return"M"+h+","+e+"A"+l+","+l+" 0 0,1 "+b+","+g}};
shadow$provide[503]=function(ja,Qa,ma,bb,la,ib){Object.defineProperty(la,"__esModule",{value:!0});la.getMarkerId=void 0;var a=ma(495);ja=function(){var t={};return function(m,p,g){var h=g.maxZoom;g=m+";"+p+";"+h;if(t[g])return t[g];var e=h/4;m=a.MARKERS["MARKER_"+(p<e?a.SIZES.S:p>=e&&p<h/2?a.SIZES.M:a.SIZES.L)+(m?a.HIGHLIGHTED:"")];return t[g]=m}}();la.getMarkerId=ja};
shadow$provide[504]=function(ja,Qa,ma,bb,la,ib){Object.defineProperty(la,"__esModule",{value:!0});la.buildNodeProps=la.buildLinkProps=void 0;var a=Object.assign||function(a){for(var h=1;h<arguments.length;h++){var e=arguments[h],g;for(g in e)Object.prototype.hasOwnProperty.call(e,g)&&(a[g]=e[g])}return a},t=(ja=ma(489))&&ja.__esModule?ja:{default:ja},m=ma(502),p=ma(503);la.buildLinkProps=function(a,h,e,n,b,l,u,q){var d=a.source,f=a.target,c=h[d]&&h[d].x||0,k=h[d]&&h[d].y||0,r=h[f]&&h[f].x||0,g=h[f]&&
h[f].y||0;c=(0,m.buildLinkPathDefinition)({source:{x:c,y:k},target:{x:r,y:g}},n.link.type);k=!1;switch(n.highlightDegree){case 0:break;case 2:k=!0;break;default:k=d===l||f===l}r=d===(u&&u.source)&&f===(u&&u.target);h=k&&h[d].highlighted&&h[f].highlighted||r;k=a.opacity||n.link.opacity;if(l||u&&u.source)k=h?n.link.opacity:n.highlightOpacity;l=a.color||n.link.color;h&&(l=n.link.highlightColor===t.default.KEYWORDS.SAME?n.link.color:n.link.highlightColor);u=1/q*(a.strokeWidth||n.link.strokeWidth);n.link.semanticStrokeWidth&&
(u+=(e[d][f]||e[f][d]||1)*u/10);e=n.directed?(0,p.getMarkerId)(h,q,n):null;var z=g=r=null,A=null;n.link.renderLabel&&(A=a[n.link.labelProperty],r=a.fontSize||n.link.fontSize,g=a.fontColor||n.link.fontColor,z=h?n.link.highlightFontWeight:n.link.fontWeight);return{markerId:e,d:c,source:d,target:f,strokeWidth:u,stroke:l,label:A,mouseCursor:n.link.mouseCursor,fontColor:g,fontSize:1/q*r,fontWeight:z,className:t.default.LINK_CLASS_NAME,opacity:k,onClickLink:b.onClickLink,onRightClickLink:b.onRightClickLink,
onMouseOverLink:b.onMouseOverLink,onMouseOutLink:b.onMouseOutLink}};la.buildNodeProps=function(g,h){var e=2<arguments.length&&void 0!==arguments[2]?arguments[2]:{},n=arguments[4],b=arguments[5],l=g.highlighted||g.id===(n&&n.source)||g.id===(n&&n.target);var u=g.highlighted||g.id===(n&&n.source)||g.id===(n&&n.target);u=(n=!!(arguments[3]||n&&n.source&&n.target))&&0===h.highlightDegree?u?h.node.opacity:h.highlightOpacity:n?u?h.node.opacity:h.highlightOpacity:g.opacity||h.node.opacity;n=g.color||h.node.color;
l&&h.node.highlightColor!==t.default.KEYWORDS.SAME&&(n=h.node.highlightColor);var q=g.strokeColor||h.node.strokeColor;l&&h.node.highlightStrokeColor!==t.default.KEYWORDS.SAME&&(q=h.node.highlightStrokeColor);var d=g[h.node.labelProperty]||g.id;"function"===typeof h.node.labelProperty&&(d=h.node.labelProperty(g));var f=g.strokeWidth||h.node.strokeWidth;l&&h.node.highlightStrokeWidth!==t.default.KEYWORDS.SAME&&(f=h.node.highlightStrokeWidth);b=1/b;var c=g.size||h.node.size,k=l?h.node.highlightFontSize:
h.node.fontSize;return a({},g,{className:t.default.NODE_CLASS_NAME,cursor:h.node.mouseCursor,cx:g&&g.x||"0",cy:g&&g.y||"0",fill:n,fontColor:g.fontColor||h.node.fontColor,fontSize:k*b,dx:k*b+c/100+1.5,fontWeight:l?h.node.highlightFontWeight:h.node.fontWeight,id:g.id,label:d,onClickNode:e.onClickNode,onRightClickNode:e.onRightClickNode,onMouseOverNode:e.onMouseOverNode,onMouseOut:e.onMouseOut,opacity:u,renderLabel:h.node.renderLabel,size:c*b,stroke:q,strokeWidth:f*b,svg:g.svg||h.node.svg,type:g.symbolType||
h.node.symbolType,viewGenerator:g.viewGenerator||h.node.viewGenerator,overrideGlobalViewGenerator:!g.viewGenerator&&g.svg})}};
shadow$provide[505]=function(ja,Qa,ma,bb,la,ib){function a(b){return b&&b.__esModule?b:{default:b}}function t(b,c,a,d,e,l,q,y){d.collapsible&&(c=c.filter(function(b){return!b.isHidden}));return c.map(function(c){var f=c.source,k=c.target;f=void 0!==f.id&&null!==f.id?f.id:f;var r=void 0!==k.id&&null!==k.id?k.id:k;k=""+f+h.default.COORDS_SEPARATOR+r;c=(0,u.buildLinkProps)(p({},c,{source:""+f,target:""+r}),b,a,d,e,""+l,q,y);return g.default.createElement(n.default,p({key:k,id:k},c))})}function m(a,c,
d,e,l,h,n){var f=Object.keys(a);d.collapsible&&(f=f.filter(function(b){return(0,q.isNodeVisible)(b,a,n)}));return f.map(function(f){var k=(0,u.buildNodeProps)(Object.assign({},a[f],{id:""+f}),d,c,e,l,h);return g.default.createElement(b.default,p({key:f},k))})}Object.defineProperty(la,"__esModule",{value:!0});la.renderGraph=void 0;var p=Object.assign||function(b){for(var c=1;c<arguments.length;c++){var a=arguments[c],d;for(d in a)Object.prototype.hasOwnProperty.call(a,d)&&(b[d]=a[d])}return b};ja=
ma(5);var g=a(ja);ja=ma(489);var h=a(ja),e=ma(495);ja=ma(496);var n=a(ja);ja=ma(499);var b=a(ja);ja=ma(500);var l=a(ja),u=ma(504),q=ma(492),d=function(){var b=void 0;return function(c){if(b)return b;var a=e.MARKER_SMALL_SIZE,d=a+e.MARKER_MEDIUM_OFFSET*c.maxZoom/3,f=a+e.MARKER_LARGE_OFFSET*c.maxZoom/3;return b=g.default.createElement("defs",null,g.default.createElement(l.default,{id:e.MARKERS.MARKER_S,refX:a,fill:c.link.color}),g.default.createElement(l.default,{id:e.MARKERS.MARKER_SH,refX:a,fill:c.link.highlightColor}),
g.default.createElement(l.default,{id:e.MARKERS.MARKER_M,refX:d,fill:c.link.color}),g.default.createElement(l.default,{id:e.MARKERS.MARKER_MH,refX:d,fill:c.link.highlightColor}),g.default.createElement(l.default,{id:e.MARKERS.MARKER_L,refX:f,fill:c.link.color}),g.default.createElement(l.default,{id:e.MARKERS.MARKER_LH,refX:f,fill:c.link.highlightColor}))}}();la.renderGraph=function(b,c,a,e,l,h,g,q,n){return{nodes:m(b,c,h,g,q,n,e),links:t(b,a,e,h,l,g,q,n),defs:d(h)}}};
shadow$provide[506]=function(ja,Qa,ma,bb,la,ib){function a(b){if(b&&b.__esModule)return b;var c={};if(null!=b)for(var a in b)Object.prototype.hasOwnProperty.call(b,a)&&(c[a]=b[a]);c.default=b;return c}function t(b){return b&&b.__esModule?b:{default:b}}function m(b,c){if(!b)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!c||"object"!==typeof c&&"function"!==typeof c?b:c}function p(b,c){if("function"!==typeof c&&null!==c)throw new TypeError("Super expression must either be null or a function, not "+
typeof c);b.prototype=Object.create(c&&c.prototype,{constructor:{value:b,enumerable:!1,writable:!0,configurable:!0}});c&&(Object.setPrototypeOf?Object.setPrototypeOf(b,c):b.__proto__=c)}Object.defineProperty(la,"__esModule",{value:!0});var g=Object.assign||function(b){for(var c=1;c<arguments.length;c++){var a=arguments[c],d;for(d in a)Object.prototype.hasOwnProperty.call(a,d)&&(b[d]=a[d])}return b},h=function(){function b(b,c){for(var a=0;a<c.length;a++){var d=c[a];d.enumerable=d.enumerable||!1;d.configurable=
!0;"value"in d&&(d.writable=!0);Object.defineProperty(b,d.key,d)}}return function(c,a,d){a&&b(c.prototype,a);d&&b(c,d);return c}}();ja=ma(5);var e=t(ja),n=ma(460),b=ma(474),l=ma(458),u=ma(486);ja=ma(489);var q=t(ja);ja=ma(490);var d=t(ja);ja=ma(491);var f=t(ja);ja=ma(492);var c=a(ja);ja=ma(494);var k=a(ja);ja=ma(505);var r=a(ja);ma=ma(493);var v=t(ma);ma=function(a){function A(b){if(!(this instanceof A))throw new TypeError("Cannot call a class as a function");var a=m(this,(A.__proto__||Object.getPrototypeOf(A)).call(this,
b));a._generateFocusAnimationProps=function(){var b=a.state.focusedNodeId;a.state.enableFocusAnimation&&(a.focusAnimationTimeout&&clearTimeout(a.focusAnimationTimeout),a.focusAnimationTimeout=setTimeout(function(){return a.setState({enableFocusAnimation:!1})},1E3*a.state.config.focusAnimationDuration));return{style:{transitionDuration:(a.state.enableFocusAnimation?a.state.config.focusAnimationDuration:0)+"s"},transform:b?a.state.focusTransformation:null}};a._onDragEnd=function(){return!a.state.config.staticGraph&&
a.state.config.automaticRearrangeAfterDropNode&&a.state.simulation.alphaTarget(a.state.config.d3.alphaTarget).restart()};a._onDragMove=function(b,c,d){b=d[c].id;a.state.config.staticGraph||(b=a.state.nodes[b],b.x+=l.event.dx,b.y+=l.event.dy,b.fx=b.x,b.fy=b.y,a._tick())};a._onDragStart=function(){a.pauseSimulation();a.state.enableFocusAnimation&&a.setState({enableFocusAnimation:!1})};a._setNodeHighlightedValue=function(b){return a._tick(k.updateNodeHighlightedValue(a.state.nodes,a.state.links,a.state.config,
b,1<arguments.length&&void 0!==arguments[1]?arguments[1]:!1))};a._tick=function(){var b=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{},c=arguments[1];return c?a.setState(b,c):a.setState(b)};a._zoomConfig=function(){return(0,l.select)("#"+a.state.id+"-"+q.default.GRAPH_WRAPPER_ID).call((0,u.zoom)().scaleExtent([a.state.config.minZoom,a.state.config.maxZoom]).on("zoom",a._zoomed))};a._zoomed=function(){var b=l.event.transform;(0,l.selectAll)("#"+a.state.id+"-"+q.default.GRAPH_CONTAINER_ID).attr("transform",
b);a.state.config.panAndZoom&&a.setState({transform:b.k})};a.onClickGraph=function(b){a.state.enableFocusAnimation&&a.setState({enableFocusAnimation:!1});"SVG"===b.target.tagName.toUpperCase()&&b.target.attributes.name.value==="svg-container-"+a.state.id&&a.props.onClickGraph&&a.props.onClickGraph()};a.onClickNode=function(b){if(a.state.config.collapsible){var d=c.getTargetLeafConnections(b,a.state.links,a.state.config);d=c.toggleLinksMatrixConnections(a.state.links,d,a.state.config);var f=c.toggleLinksConnections(a.state.d3Links,
d);a._tick({links:d,d3Links:f},function(){return a.props.onClickNode&&a.props.onClickNode(b)})}else a.props.onClickNode&&a.props.onClickNode(b)};a.onMouseOverNode=function(b){a.props.onMouseOverNode&&a.props.onMouseOverNode(b);a.state.config.nodeHighlightBehavior&&a._setNodeHighlightedValue(b,!0)};a.onMouseOutNode=function(b){a.props.onMouseOutNode&&a.props.onMouseOutNode(b);a.state.config.nodeHighlightBehavior&&a._setNodeHighlightedValue(b,!1)};a.onMouseOverLink=function(b,c){a.props.onMouseOverLink&&
a.props.onMouseOverLink(b,c);a.state.config.linkHighlightBehavior&&(a.state.highlightedLink={source:b,target:c},a._tick())};a.onMouseOutLink=function(b,c){a.props.onMouseOutLink&&a.props.onMouseOutLink(b,c);a.state.config.linkHighlightBehavior&&(a.state.highlightedLink=void 0,a._tick())};a.pauseSimulation=function(){return a.state.simulation.stop()};a.resetNodesPositions=function(){if(!a.state.config.staticGraph){for(var b in a.state.nodes){var c=a.state.nodes[b];c.fx&&c.fy&&(Reflect.deleteProperty(c,
"fx"),Reflect.deleteProperty(c,"fy"))}a.state.simulation.alphaTarget(a.state.config.d3.alphaTarget).restart();a._tick()}};a.restartSimulation=function(){return!a.state.config.staticGraph&&a.state.simulation.restart()};a.props.id||v.default.throwErr(a.constructor.name,f.default.GRAPH_NO_ID_PROP);a.focusAnimationTimeout=null;a.state=k.initializeGraphState(a.props,a.state);return a}p(A,a);h(A,[{key:"_graphForcesConfig",value:function(){this.state.simulation.nodes(this.state.d3Nodes).on("tick",this._tick);
var a=(0,b.forceLink)(this.state.d3Links).id(function(b){return b.id}).distance(this.state.config.d3.linkLength).strength(this.state.config.d3.linkStrength);this.state.simulation.force(q.default.LINK_CLASS_NAME,a);a=(0,n.drag)().on("start",this._onDragStart).on("drag",this._onDragMove).on("end",this._onDragEnd);(0,l.select)("#"+this.state.id+"-"+q.default.GRAPH_WRAPPER_ID).selectAll(".node").call(a)}}]);h(A,[{key:"componentWillReceiveProps",value:function(b){var a=k.checkForGraphElementsChanges(b,
this.state),c=a.newGraphElements;a=a.graphElementsUpdated?k.initializeGraphState(b,this.state):this.state;var f=b.config||{},e=k.checkForGraphConfigChanges(b,this.state),r=e.configUpdated;e=e.d3ConfigUpdated;var l=r?v.default.merge(d.default,f):this.state.config;c&&this.pauseSimulation();f=f.panAndZoom!==this.state.config.panAndZoom?1:this.state.transform;var h=b.data.focusedNodeId,q=this.state.d3Nodes.find(function(b){return""+b.id===""+h});q=k.getCenterAndZoomTransformation(q,this.state.config);
this.setState(g({},a,{config:l,configUpdated:r,d3ConfigUpdated:e,newGraphElements:c,transform:f,focusedNodeId:h,enableFocusAnimation:this.props.data.focusedNodeId!==b.data.focusedNodeId,focusTransformation:q}))}},{key:"componentDidUpdate",value:function(){this.state.config.staticGraph&&this.pauseSimulation();this.state.config.staticGraph||!this.state.newGraphElements&&!this.state.d3ConfigUpdated||(this._graphForcesConfig(),this.restartSimulation(),this.setState({newGraphElements:!1,d3ConfigUpdated:!1}));
this.state.configUpdated&&(this._zoomConfig(),this.setState({configUpdated:!1}))}},{key:"componentDidMount",value:function(){this.state.config.staticGraph||this._graphForcesConfig();this._zoomConfig()}},{key:"componentWillUnmount",value:function(){this.pauseSimulation()}},{key:"render",value:function(){var b=r.renderGraph(this.state.nodes,{onClickNode:this.onClickNode,onRightClickNode:this.props.onRightClickNode,onMouseOverNode:this.onMouseOverNode,onMouseOut:this.onMouseOutNode},this.state.d3Links,
this.state.links,{onClickLink:this.props.onClickLink,onRightClickLink:this.props.onRightClickLink,onMouseOverLink:this.onMouseOverLink,onMouseOutLink:this.onMouseOutLink},this.state.config,this.state.highlightedNode,this.state.highlightedLink,this.state.transform),a=b.nodes,c=b.links;b=b.defs;var d={height:this.state.config.height,width:this.state.config.width},f=this._generateFocusAnimationProps();return e.default.createElement("div",{id:this.state.id+"-"+q.default.GRAPH_WRAPPER_ID},e.default.createElement("svg",
{name:"svg-container-"+this.state.id,style:d,onClick:this.onClickGraph},b,e.default.createElement("g",g({id:this.state.id+"-"+q.default.GRAPH_CONTAINER_ID},f),c,a)))}}]);return A}(e.default.Component);la.default=ma};
shadow$provide[507]=function(ja,Qa,ma,bb,la,ib){function a(a){return a&&a.__esModule?a:{default:a}}Object.defineProperty(la,"__esModule",{value:!0});la.Link=la.Node=la.Graph=void 0;ja=ma(506);ja=a(ja);Qa=ma(499);Qa=a(Qa);ma=ma(496);ma=a(ma);la.Graph=ja.default;la.Node=Qa.default;la.Link=ma.default};
shadow$provide[508]=function(ja,Qa,ma,bb,la,ib){function a(b){a="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(b){return typeof b}:function(b){return b&&"function"===typeof Symbol&&b.constructor===Symbol&&b!==Symbol.prototype?"symbol":typeof b};return a(b)}function t(b,a){for(var c=0;c<a.length;c++){var d=a[c];d.enumerable=d.enumerable||!1;d.configurable=!0;"value"in d&&(d.writable=!0);Object.defineProperty(b,d.key,d)}}function m(b,a,c){a&&t(b.prototype,a);c&&t(b,c);return b}
function p(b){p=Object.setPrototypeOf?Object.getPrototypeOf:function(b){return b.__proto__||Object.getPrototypeOf(b)};return p(b)}function g(b){if(void 0===b)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return b}function h(b,a){if("function"!==typeof a&&null!==a)throw new TypeError("Super expression must either be null or a function");b.prototype=Object.create(a&&a.prototype,{constructor:{value:b,writable:!0,configurable:!0}});a&&e(b,a)}function e(b,a){e=Object.setPrototypeOf||
function(b,a){b.__proto__=a;return b};return e(b,a)}Object.defineProperty(la,"__esModule",{value:!0});la.default=function(d){var f=function(b){function c(b){if(!(this instanceof c))throw new TypeError("Cannot call a class as a function");b=p(c).call(this,b);b=!b||"object"!==a(b)&&"function"!==typeof b?g(this):b;b.p=Promise.resolve();b.resizeHandler=null;b.handlers={};b.syncWindowResize=b.syncWindowResize.bind(g(b));b.syncEventHandlers=b.syncEventHandlers.bind(g(b));b.attachUpdateEvents=b.attachUpdateEvents.bind(g(b));
b.getRef=b.getRef.bind(g(b));b.handleUpdate=b.handleUpdate.bind(g(b));b.figureCallback=b.figureCallback.bind(g(b));b.updatePlotly=b.updatePlotly.bind(g(b));return b}h(c,b);m(c,[{key:"updatePlotly",value:function(b,a,c){var f=this;this.p=this.p.then(function(){if(!f.el){if(f.unmounting){var b=Error("Component is unmounting");b.reason="unmounting"}else b=Error("Missing element reference");throw b;}return d.react(f.el,{data:f.props.data,layout:f.props.layout,config:f.props.config,frames:f.props.frames})}).then(function(){return f.syncWindowResize(b)}).then(this.syncEventHandlers).then(function(){return f.figureCallback(a)}).then(c?
this.attachUpdateEvents:function(){}).catch(function(b){if("unmounting"!==b.reason&&(console.error("Error while plotting:",b),f.props.onError))f.props.onError(b)})}},{key:"componentDidMount",value:function(){this.unmounting=!1;this.updatePlotly(!0,this.props.onInitialized,!0)}},{key:"componentDidUpdate",value:function(b){this.unmounting=!1;var a=b.frames&&b.frames.length?b.frames.length:0,c=this.props.frames&&this.props.frames.length?this.props.frames.length:0,d=void 0!==b.revision,f=b.revision!==
this.props.revision;(b.layout!==this.props.layout||b.data!==this.props.data||b.config!==this.props.config||c!==a||d&&(!d||f))&&this.updatePlotly(!1,this.props.onUpdate,!1)}},{key:"componentWillUnmount",value:function(){this.unmounting=!0;this.figureCallback(this.props.onPurge);this.resizeHandler&&q&&(window.removeEventListener("resize",this.resizeHandler),this.resizeHandler=null);this.removeUpdateEvents();d.purge(this.el)}},{key:"attachUpdateEvents",value:function(){var b=this;this.el&&this.el.removeListener&&
u.forEach(function(a){b.el.on(a,b.handleUpdate)})}},{key:"removeUpdateEvents",value:function(){var b=this;this.el&&this.el.removeListener&&u.forEach(function(a){b.el.removeListener(a,b.handleUpdate)})}},{key:"handleUpdate",value:function(){this.figureCallback(this.props.onUpdate)}},{key:"figureCallback",value:function(b){if("function"===typeof b){var a=this.el;b({data:a.data,layout:a.layout,frames:this.el._transitionData?this.el._transitionData._frames:null},this.el)}}},{key:"syncWindowResize",value:function(b){var a=
this;q&&(this.props.useResizeHandler&&!this.resizeHandler?(this.resizeHandler=function(){return d.Plots.resize(a.el)},window.addEventListener("resize",this.resizeHandler),b&&this.resizeHandler()):!this.props.useResizeHandler&&this.resizeHandler&&(window.removeEventListener("resize",this.resizeHandler),this.resizeHandler=null))}},{key:"getRef",value:function(b){this.el=b;this.props.debug&&q&&(window.gd=this.el)}},{key:"syncEventHandlers",value:function(){var b=this;l.forEach(function(a){var c=b.props["on"+
a],d=!!b.handlers[a];c&&!d?(b.handlers[a]=c,b.el.on("plotly_"+a.toLowerCase(),b.handlers[a])):!c&&d&&(b.el.removeListener("plotly_"+a.toLowerCase(),b.handlers[a]),delete b.handlers[a])})}},{key:"render",value:function(){return n.default.createElement("div",{id:this.props.divId,style:this.props.style,ref:this.getRef,className:this.props.className})}}]);return c}(n.Component);f.propTypes={data:b.default.arrayOf(b.default.object),config:b.default.object,layout:b.default.object,frames:b.default.arrayOf(b.default.object),
revision:b.default.number,onInitialized:b.default.func,onPurge:b.default.func,onError:b.default.func,onUpdate:b.default.func,debug:b.default.bool,style:b.default.object,className:b.default.string,useResizeHandler:b.default.bool,divId:b.default.string};l.forEach(function(a){f.propTypes["on"+a]=b.default.func});f.defaultProps={debug:!1,useResizeHandler:!1,data:[],style:{position:"relative",display:"inline-block"}};return f};var n=function(b){if(b&&b.__esModule)return b;var a={};if(null!=b)for(var c in b)if(Object.prototype.hasOwnProperty.call(b,
c)){var d=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(b,c):{};d.get||d.set?Object.defineProperty(a,c,d):a[c]=b[c]}a.default=b;return a}(ma(5)),b=function(b){return b&&b.__esModule?b:{default:b}}(ma(129)),l="AfterExport AfterPlot Animated AnimatingFrame AnimationInterrupted AutoSize BeforeExport ButtonClicked Click ClickAnnotation Deselect DoubleClick Framework Hover LegendClick LegendDoubleClick Relayout Restyle Redraw Selected Selecting SliderChange SliderEnd SliderStart Transitioning TransitionInterrupted Unhover".split(" "),
u=["plotly_restyle","plotly_redraw","plotly_relayout","plotly_doubleclick","plotly_animated"],q="undefined"!==typeof window};
shadow$provide[509]=function(ja,Qa,ma,bb,la,ib){(function(a){"object"===typeof la&&"undefined"!==typeof bb?bb.exports=a():"function"===typeof define&&define.amd?define([],a):("undefined"!==typeof window?window:"undefined"!==typeof ja?ja:"undefined"!==typeof self?self:this).Plotly=a()})(function(){return function(){function a(t,m,p){function g(e,b){if(!m[e]){if(!t[e]){var l="function"==typeof ma&&ma;if(!b&&l)return l(e,!0);if(h)return h(e,!0);b=Error("Cannot find module '"+e+"'");throw b.code="MODULE_NOT_FOUND",
b;}b=m[e]={exports:{}};t[e][0].call(b.exports,function(b){return g(t[e][1][b]||b)},b,b.exports,a,t,m,p)}return m[e].exports}for(var h="function"==typeof ma&&ma,e=0;e<p.length;e++)g(p[e]);return g}return a}()({1:[function(a,t,m){a=a("../src/lib");t={"X,X div":"direction:ltr;font-family:'Open Sans', verdana, arial, sans-serif;margin:0;padding:0;","X input,X button":"font-family:'Open Sans', verdana, arial, sans-serif;","X input:focus,X button:focus":"outline:none;","X a":"text-decoration:none;","X a:hover":"text-decoration:none;",
"X .crisp":"shape-rendering:crispEdges;","X .user-select-none":"-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;-o-user-select:none;user-select:none;","X svg":"overflow:hidden;","X svg a":"fill:#447adb;","X svg a:hover":"fill:#3c6dc5;","X .main-svg":"position:absolute;top:0;left:0;pointer-events:none;","X .main-svg .draglayer":"pointer-events:all;","X .cursor-default":"cursor:default;","X .cursor-pointer":"cursor:pointer;","X .cursor-crosshair":"cursor:crosshair;","X .cursor-move":"cursor:move;",
"X .cursor-col-resize":"cursor:col-resize;","X .cursor-row-resize":"cursor:row-resize;","X .cursor-ns-resize":"cursor:ns-resize;","X .cursor-ew-resize":"cursor:ew-resize;","X .cursor-sw-resize":"cursor:sw-resize;","X .cursor-s-resize":"cursor:s-resize;","X .cursor-se-resize":"cursor:se-resize;","X .cursor-w-resize":"cursor:w-resize;","X .cursor-e-resize":"cursor:e-resize;","X .cursor-nw-resize":"cursor:nw-resize;","X .cursor-n-resize":"cursor:n-resize;","X .cursor-ne-resize":"cursor:ne-resize;","X .cursor-grab":"cursor:-webkit-grab;cursor:grab;",
"X .modebar":"position:absolute;top:2px;right:2px;","X .ease-bg":"-webkit-transition:background-color 0.3s ease 0s;-moz-transition:background-color 0.3s ease 0s;-ms-transition:background-color 0.3s ease 0s;-o-transition:background-color 0.3s ease 0s;transition:background-color 0.3s ease 0s;","X .modebar--hover\x3e:not(.watermark)":"opacity:0;-webkit-transition:opacity 0.3s ease 0s;-moz-transition:opacity 0.3s ease 0s;-ms-transition:opacity 0.3s ease 0s;-o-transition:opacity 0.3s ease 0s;transition:opacity 0.3s ease 0s;",
"X:hover .modebar--hover .modebar-group":"opacity:1;","X .modebar-group":"float:left;display:inline-block;box-sizing:border-box;padding-left:8px;position:relative;vertical-align:middle;white-space:nowrap;","X .modebar-btn":"position:relative;font-size:16px;padding:3px 4px;height:22px;cursor:pointer;line-height:normal;box-sizing:border-box;","X .modebar-btn svg":"position:relative;top:2px;","X .modebar.vertical":"display:flex;flex-direction:column;flex-wrap:wrap;align-content:flex-end;max-height:100%;",
"X .modebar.vertical svg":"top:-1px;","X .modebar.vertical .modebar-group":"display:block;float:none;padding-left:0px;padding-bottom:8px;","X .modebar.vertical .modebar-group .modebar-btn":"display:block;text-align:center;","X [data-title]:before,X [data-title]:after":"position:absolute;-webkit-transform:translate3d(0, 0, 0);-moz-transform:translate3d(0, 0, 0);-ms-transform:translate3d(0, 0, 0);-o-transform:translate3d(0, 0, 0);transform:translate3d(0, 0, 0);display:none;opacity:0;z-index:1001;pointer-events:none;top:110%;right:50%;",
"X [data-title]:hover:before,X [data-title]:hover:after":"display:block;opacity:1;","X [data-title]:before":"content:'';position:absolute;background:transparent;border:6px solid transparent;z-index:1002;margin-top:-12px;border-bottom-color:#69738a;margin-right:-6px;","X [data-title]:after":"content:attr(data-title);background:#69738a;color:white;padding:8px 10px;font-size:12px;line-height:12px;white-space:nowrap;margin-right:-18px;border-radius:2px;","X .vertical [data-title]:before,X .vertical [data-title]:after":"top:0%;right:200%;",
"X .vertical [data-title]:before":"border:6px solid transparent;border-left-color:#69738a;margin-top:8px;margin-right:-30px;","X .select-outline":"fill:none;stroke-width:1;shape-rendering:crispEdges;","X .select-outline-1":"stroke:white;","X .select-outline-2":"stroke:black;stroke-dasharray:2px 2px;",Y:"font-family:'Open Sans';position:fixed;top:50px;right:20px;z-index:10000;font-size:10pt;max-width:180px;","Y p":"margin:0;","Y .notifier-note":"min-width:180px;max-width:250px;border:1px solid #fff;z-index:3000;margin:0;background-color:#8c97af;background-color:rgba(140,151,175,0.9);color:#fff;padding:10px;overflow-wrap:break-word;word-wrap:break-word;-ms-hyphens:auto;-webkit-hyphens:auto;hyphens:auto;",
"Y .notifier-close":"color:#fff;opacity:0.8;float:right;padding:0 5px;background:none;border:none;font-size:20px;font-weight:bold;line-height:20px;","Y .notifier-close:hover":"color:#444;text-decoration:none;cursor:pointer;"};for(var p in t)m=p.replace(/^,/," ,").replace(/X/g,".js-plotly-plot .plotly").replace(/Y/g,".plotly-notifier"),a.addStyleRule(m,t[p])},{"../src/lib":700}],2:[function(a,t,m){t.exports={undo:{width:857.1,height:1E3,path:"m857 350q0-87-34-166t-91-137-137-92-166-34q-96 0-183 41t-147 114q-4 6-4 13t5 11l76 77q6 5 14 5 9-1 13-7 41-53 100-82t126-29q58 0 110 23t92 61 61 91 22 111-22 111-61 91-92 61-110 23q-55 0-105-20t-90-57l77-77q17-16 8-38-10-23-33-23h-250q-15 0-25 11t-11 25v250q0 24 22 33 22 10 39-8l72-72q60 57 137 88t159 31q87 0 166-34t137-92 91-137 34-166z",
transform:"matrix(1 0 0 -1 0 850)"},home:{width:928.6,height:1E3,path:"m786 296v-267q0-15-11-26t-25-10h-214v214h-143v-214h-214q-15 0-25 10t-11 26v267q0 1 0 2t0 2l321 264 321-264q1-1 1-4z m124 39l-34-41q-5-5-12-6h-2q-7 0-12 3l-386 322-386-322q-7-4-13-4-7 2-12 7l-35 41q-4 5-3 13t6 12l401 334q18 15 42 15t43-15l136-114v109q0 8 5 13t13 5h107q8 0 13-5t5-13v-227l122-102q5-5 6-12t-4-13z",transform:"matrix(1 0 0 -1 0 850)"},"camera-retro":{width:1E3,height:1E3,path:"m518 386q0 8-5 13t-13 5q-37 0-63-27t-26-63q0-8 5-13t13-5 12 5 5 13q0 23 16 38t38 16q8 0 13 5t5 13z m125-73q0-59-42-101t-101-42-101 42-42 101 42 101 101 42 101-42 42-101z m-572-320h858v71h-858v-71z m643 320q0 89-62 152t-152 62-151-62-63-152 63-151 151-63 152 63 62 151z m-571 358h214v72h-214v-72z m-72-107h858v143h-462l-36-71h-360v-72z m929 143v-714q0-30-21-51t-50-21h-858q-29 0-50 21t-21 51v714q0 30 21 51t50 21h858q29 0 50-21t21-51z",
transform:"matrix(1 0 0 -1 0 850)"},zoombox:{width:1E3,height:1E3,path:"m1000-25l-250 251c40 63 63 138 63 218 0 224-182 406-407 406-224 0-406-182-406-406s183-406 407-406c80 0 155 22 218 62l250-250 125 125z m-812 250l0 438 437 0 0-438-437 0z m62 375l313 0 0-312-313 0 0 312z",transform:"matrix(1 0 0 -1 0 850)"},pan:{width:1E3,height:1E3,path:"m1000 350l-187 188 0-125-250 0 0 250 125 0-188 187-187-187 125 0 0-250-250 0 0 125-188-188 186-187 0 125 252 0 0-250-125 0 187-188 188 188-125 0 0 250 250 0 0-126 187 188z",
transform:"matrix(1 0 0 -1 0 850)"},zoom_plus:{width:875,height:1E3,path:"m1 787l0-875 875 0 0 875-875 0z m687-500l-187 0 0-187-125 0 0 187-188 0 0 125 188 0 0 187 125 0 0-187 187 0 0-125z",transform:"matrix(1 0 0 -1 0 850)"},zoom_minus:{width:875,height:1E3,path:"m0 788l0-876 875 0 0 876-875 0z m688-500l-500 0 0 125 500 0 0-125z",transform:"matrix(1 0 0 -1 0 850)"},autoscale:{width:1E3,height:1E3,path:"m250 850l-187 0-63 0 0-62 0-188 63 0 0 188 187 0 0 62z m688 0l-188 0 0-62 188 0 0-188 62 0 0 188 0 62-62 0z m-875-938l0 188-63 0 0-188 0-62 63 0 187 0 0 62-187 0z m875 188l0-188-188 0 0-62 188 0 62 0 0 62 0 188-62 0z m-125 188l-1 0-93-94-156 156 156 156 92-93 2 0 0 250-250 0 0-2 93-92-156-156-156 156 94 92 0 2-250 0 0-250 0 0 93 93 157-156-157-156-93 94 0 0 0-250 250 0 0 0-94 93 156 157 156-157-93-93 0 0 250 0 0 250z",
transform:"matrix(1 0 0 -1 0 850)"},tooltip_basic:{width:1500,height:1E3,path:"m375 725l0 0-375-375 375-374 0-1 1125 0 0 750-1125 0z",transform:"matrix(1 0 0 -1 0 850)"},tooltip_compare:{width:1125,height:1E3,path:"m187 786l0 2-187-188 188-187 0 0 937 0 0 373-938 0z m0-499l0 1-187-188 188-188 0 0 937 0 0 376-938-1z",transform:"matrix(1 0 0 -1 0 850)"},plotlylogo:{width:1542,height:1E3,path:"m0-10h182v-140h-182v140z m228 146h183v-286h-183v286z m225 714h182v-1000h-182v1000z m225-285h182v-715h-182v715z m225 142h183v-857h-183v857z m231-428h182v-429h-182v429z m225-291h183v-138h-183v138z",
transform:"matrix(1 0 0 -1 0 850)"},"z-axis":{width:1E3,height:1E3,path:"m833 5l-17 108v41l-130-65 130-66c0 0 0 38 0 39 0-1 36-14 39-25 4-15-6-22-16-30-15-12-39-16-56-20-90-22-187-23-279-23-261 0-341 34-353 59 3 60 228 110 228 110-140-8-351-35-351-116 0-120 293-142 474-142 155 0 477 22 477 142 0 50-74 79-163 96z m-374 94c-58-5-99-21-99-40 0-24 65-43 144-43 79 0 143 19 143 43 0 19-42 34-98 40v216h87l-132 135-133-135h88v-216z m167 515h-136v1c16 16 31 34 46 52l84 109v54h-230v-71h124v-1c-16-17-28-32-44-51l-89-114v-51h245v72z",
transform:"matrix(1 0 0 -1 0 850)"},"3d_rotate":{width:1E3,height:1E3,path:"m922 660c-5 4-9 7-14 11-359 263-580-31-580-31l-102 28 58-400c0 1 1 1 2 2 118 108 351 249 351 249s-62 27-100 42c88 83 222 183 347 122 16-8 30-17 44-27-2 1-4 2-6 4z m36-329c0 0 64 229-88 296-62 27-124 14-175-11 157-78 225-208 249-266 8-19 11-31 11-31 2 5 6 15 11 32-5-13-8-20-8-20z m-775-239c70-31 117-50 198-32-121 80-199 346-199 346l-96-15-58-12c0 0 55-226 155-287z m603 133l-317-139c0 0 4-4 19-14 7-5 24-15 24-15s-177-147-389 4c235-287 536-112 536-112l31-22 100 299-4-1z m-298-153c6-4 14-9 24-15 0 0-17 10-24 15z",
transform:"matrix(1 0 0 -1 0 850)"},camera:{width:1E3,height:1E3,path:"m500 450c-83 0-150-67-150-150 0-83 67-150 150-150 83 0 150 67 150 150 0 83-67 150-150 150z m400 150h-120c-16 0-34 13-39 29l-31 93c-6 15-23 28-40 28h-340c-16 0-34-13-39-28l-31-94c-6-15-23-28-40-28h-120c-55 0-100-45-100-100v-450c0-55 45-100 100-100h800c55 0 100 45 100 100v450c0 55-45 100-100 100z m-400-550c-138 0-250 112-250 250 0 138 112 250 250 250 138 0 250-112 250-250 0-138-112-250-250-250z m365 380c-19 0-35 16-35 35 0 19 16 35 35 35 19 0 35-16 35-35 0-19-16-35-35-35z",
transform:"matrix(1 0 0 -1 0 850)"},movie:{width:1E3,height:1E3,path:"m938 413l-188-125c0 37-17 71-44 94 64 38 107 107 107 187 0 121-98 219-219 219-121 0-219-98-219-219 0-61 25-117 66-156h-115c30 33 49 76 49 125 0 103-84 187-187 187s-188-84-188-187c0-57 26-107 65-141-38-22-65-62-65-109v-250c0-70 56-126 125-126h500c69 0 125 56 125 126l188-126c34 0 62 28 62 63v375c0 35-28 63-62 63z m-750 0c-69 0-125 56-125 125s56 125 125 125 125-56 125-125-56-125-125-125z m406-1c-87 0-157 70-157 157 0 86 70 156 157 156s156-70 156-156-70-157-156-157z",
transform:"matrix(1 0 0 -1 0 850)"},question:{width:857.1,height:1E3,path:"m500 82v107q0 8-5 13t-13 5h-107q-8 0-13-5t-5-13v-107q0-8 5-13t13-5h107q8 0 13 5t5 13z m143 375q0 49-31 91t-77 65-95 23q-136 0-207-119-9-14 4-24l74-55q4-4 10-4 9 0 14 7 30 38 48 51 19 14 48 14 27 0 48-15t21-33q0-21-11-34t-38-25q-35-16-65-48t-29-70v-20q0-8 5-13t13-5h107q8 0 13 5t5 13q0 10 12 27t30 28q18 10 28 16t25 19 25 27 16 34 7 45z m214-107q0-117-57-215t-156-156-215-58-216 58-155 156-58 215 58 215 155 156 216 58 215-58 156-156 57-215z",
transform:"matrix(1 0 0 -1 0 850)"},disk:{width:857.1,height:1E3,path:"m214-7h429v214h-429v-214z m500 0h72v500q0 8-6 21t-11 20l-157 156q-5 6-19 12t-22 5v-232q0-22-15-38t-38-16h-322q-22 0-37 16t-16 38v232h-72v-714h72v232q0 22 16 38t37 16h465q22 0 38-16t15-38v-232z m-214 518v178q0 8-5 13t-13 5h-107q-7 0-13-5t-5-13v-178q0-8 5-13t13-5h107q7 0 13 5t5 13z m357-18v-518q0-22-15-38t-38-16h-750q-23 0-38 16t-16 38v750q0 22 16 38t38 16h517q23 0 50-12t42-26l156-157q16-15 27-42t11-49z",transform:"matrix(1 0 0 -1 0 850)"},
lasso:{width:1031,height:1E3,path:"m1018 538c-36 207-290 336-568 286-277-48-473-256-436-463 10-57 36-108 76-151-13-66 11-137 68-183 34-28 75-41 114-42l-55-70 0 0c-2-1-3-2-4-3-10-14-8-34 5-45 14-11 34-8 45 4 1 1 2 3 2 5l0 0 113 140c16 11 31 24 45 40 4 3 6 7 8 11 48-3 100 0 151 9 278 48 473 255 436 462z m-624-379c-80 14-149 48-197 96 42 42 109 47 156 9 33-26 47-66 41-105z m-187-74c-19 16-33 37-39 60 50-32 109-55 174-68-42-25-95-24-135 8z m360 75c-34-7-69-9-102-8 8 62-16 128-68 170-73 59-175 54-244-5-9 20-16 40-20 61-28 159 121 317 333 354s407-60 434-217c28-159-121-318-333-355z",
transform:"matrix(1 0 0 -1 0 850)"},selectbox:{width:1E3,height:1E3,path:"m0 850l0-143 143 0 0 143-143 0z m286 0l0-143 143 0 0 143-143 0z m285 0l0-143 143 0 0 143-143 0z m286 0l0-143 143 0 0 143-143 0z m-857-286l0-143 143 0 0 143-143 0z m857 0l0-143 143 0 0 143-143 0z m-857-285l0-143 143 0 0 143-143 0z m857 0l0-143 143 0 0 143-143 0z m-857-286l0-143 143 0 0 143-143 0z m286 0l0-143 143 0 0 143-143 0z m285 0l0-143 143 0 0 143-143 0z m286 0l0-143 143 0 0 143-143 0z",transform:"matrix(1 0 0 -1 0 850)"},
spikeline:{width:1E3,height:1E3,path:"M512 409c0-57-46-104-103-104-57 0-104 47-104 104 0 57 47 103 104 103 57 0 103-46 103-103z m-327-39l92 0 0 92-92 0z m-185 0l92 0 0 92-92 0z m370-186l92 0 0 93-92 0z m0-184l92 0 0 92-92 0z",transform:"matrix(1.5 0 0 -1.5 0 850)"},newplotlylogo:{name:"newplotlylogo",svg:"\x3csvg xmlns\x3d'http://www.w3.org/2000/svg' viewBox\x3d'0 0 132 132'\x3e\x3cdefs\x3e\x3cstyle\x3e.cls-1 {fill: #119dff;} .cls-2 {fill: #25fefd;} .cls-3 {fill: #fff;}\x3c/style\x3e\x3c/defs\x3e\x3ctitle\x3eplotly-logomark\x3c/title\x3e\x3cg id\x3d'symbol'\x3e\x3crect class\x3d'cls-1' width\x3d'132' height\x3d'132' rx\x3d'6' ry\x3d'6'/\x3e\x3ccircle class\x3d'cls-2' cx\x3d'78' cy\x3d'54' r\x3d'6'/\x3e\x3ccircle class\x3d'cls-2' cx\x3d'102' cy\x3d'30' r\x3d'6'/\x3e\x3ccircle class\x3d'cls-2' cx\x3d'78' cy\x3d'30' r\x3d'6'/\x3e\x3ccircle class\x3d'cls-2' cx\x3d'54' cy\x3d'30' r\x3d'6'/\x3e\x3ccircle class\x3d'cls-2' cx\x3d'30' cy\x3d'30' r\x3d'6'/\x3e\x3ccircle class\x3d'cls-2' cx\x3d'30' cy\x3d'54' r\x3d'6'/\x3e\x3cpath class\x3d'cls-3' d\x3d'M30,72a6,6,0,0,0-6,6v24a6,6,0,0,0,12,0V78A6,6,0,0,0,30,72Z'/\x3e\x3cpath class\x3d'cls-3' d\x3d'M78,72a6,6,0,0,0-6,6v24a6,6,0,0,0,12,0V78A6,6,0,0,0,78,72Z'/\x3e\x3cpath class\x3d'cls-3' d\x3d'M54,48a6,6,0,0,0-6,6v48a6,6,0,0,0,12,0V54A6,6,0,0,0,54,48Z'/\x3e\x3cpath class\x3d'cls-3' d\x3d'M102,48a6,6,0,0,0-6,6v48a6,6,0,0,0,12,0V54A6,6,0,0,0,102,48Z'/\x3e\x3c/g\x3e\x3c/svg\x3e"}}},
{}],3:[function(a,t,m){t.exports=a("../src/transforms/aggregate")},{"../src/transforms/aggregate":1183}],4:[function(a,t,m){t.exports=a("../src/traces/bar")},{"../src/traces/bar":846}],5:[function(a,t,m){t.exports=a("../src/traces/barpolar")},{"../src/traces/barpolar":858}],6:[function(a,t,m){t.exports=a("../src/traces/box")},{"../src/traces/box":868}],7:[function(a,t,m){t.exports=a("../src/components/calendars")},{"../src/components/calendars":575}],8:[function(a,t,m){t.exports=a("../src/traces/candlestick")},
{"../src/traces/candlestick":877}],9:[function(a,t,m){t.exports=a("../src/traces/carpet")},{"../src/traces/carpet":896}],10:[function(a,t,m){t.exports=a("../src/traces/choropleth")},{"../src/traces/choropleth":910}],11:[function(a,t,m){t.exports=a("../src/traces/cone")},{"../src/traces/cone":918}],12:[function(a,t,m){t.exports=a("../src/traces/contour")},{"../src/traces/contour":933}],13:[function(a,t,m){t.exports=a("../src/traces/contourcarpet")},{"../src/traces/contourcarpet":944}],14:[function(a,
t,m){t.exports=a("../src/core")},{"../src/core":679}],15:[function(a,t,m){t.exports=a("../src/transforms/filter")},{"../src/transforms/filter":1184}],16:[function(a,t,m){t.exports=a("../src/transforms/groupby")},{"../src/transforms/groupby":1185}],17:[function(a,t,m){t.exports=a("../src/traces/heatmap")},{"../src/traces/heatmap":956}],18:[function(a,t,m){t.exports=a("../src/traces/heatmapgl")},{"../src/traces/heatmapgl":965}],19:[function(a,t,m){t.exports=a("../src/traces/histogram")},{"../src/traces/histogram":977}],
20:[function(a,t,m){t.exports=a("../src/traces/histogram2d")},{"../src/traces/histogram2d":984}],21:[function(a,t,m){t.exports=a("../src/traces/histogram2dcontour")},{"../src/traces/histogram2dcontour":988}],22:[function(a,t,m){m=a("./core");m.register([a("./bar"),a("./box"),a("./heatmap"),a("./histogram"),a("./histogram2d"),a("./histogram2dcontour"),a("./contour"),a("./scatterternary"),a("./violin"),a("./waterfall"),a("./pie"),a("./sunburst"),a("./scatter3d"),a("./surface"),a("./isosurface"),a("./mesh3d"),
a("./cone"),a("./streamtube"),a("./scattergeo"),a("./choropleth"),a("./scattergl"),a("./splom"),a("./pointcloud"),a("./heatmapgl"),a("./parcoords"),a("./parcats"),a("./scattermapbox"),a("./sankey"),a("./table"),a("./carpet"),a("./scattercarpet"),a("./contourcarpet"),a("./ohlc"),a("./candlestick"),a("./scatterpolar"),a("./scatterpolargl"),a("./barpolar")]);m.register([a("./aggregate"),a("./filter"),a("./groupby"),a("./sort")]);m.register([a("./calendars")]);t.exports=m},{"./aggregate":3,"./bar":4,
"./barpolar":5,"./box":6,"./calendars":7,"./candlestick":8,"./carpet":9,"./choropleth":10,"./cone":11,"./contour":12,"./contourcarpet":13,"./core":14,"./filter":15,"./groupby":16,"./heatmap":17,"./heatmapgl":18,"./histogram":19,"./histogram2d":20,"./histogram2dcontour":21,"./isosurface":23,"./mesh3d":24,"./ohlc":25,"./parcats":26,"./parcoords":27,"./pie":28,"./pointcloud":29,"./sankey":30,"./scatter3d":31,"./scattercarpet":32,"./scattergeo":33,"./scattergl":34,"./scattermapbox":35,"./scatterpolar":36,
"./scatterpolargl":37,"./scatterternary":38,"./sort":39,"./splom":40,"./streamtube":41,"./sunburst":42,"./surface":43,"./table":44,"./violin":45,"./waterfall":46}],23:[function(a,t,m){t.exports=a("../src/traces/isosurface")},{"../src/traces/isosurface":993}],24:[function(a,t,m){t.exports=a("../src/traces/mesh3d")},{"../src/traces/mesh3d":998}],25:[function(a,t,m){t.exports=a("../src/traces/ohlc")},{"../src/traces/ohlc":1003}],26:[function(a,t,m){t.exports=a("../src/traces/parcats")},{"../src/traces/parcats":1012}],
27:[function(a,t,m){t.exports=a("../src/traces/parcoords")},{"../src/traces/parcoords":1021}],28:[function(a,t,m){t.exports=a("../src/traces/pie")},{"../src/traces/pie":1032}],29:[function(a,t,m){t.exports=a("../src/traces/pointcloud")},{"../src/traces/pointcloud":1041}],30:[function(a,t,m){t.exports=a("../src/traces/sankey")},{"../src/traces/sankey":1047}],31:[function(a,t,m){t.exports=a("../src/traces/scatter3d")},{"../src/traces/scatter3d":1083}],32:[function(a,t,m){t.exports=a("../src/traces/scattercarpet")},
{"../src/traces/scattercarpet":1089}],33:[function(a,t,m){t.exports=a("../src/traces/scattergeo")},{"../src/traces/scattergeo":1096}],34:[function(a,t,m){t.exports=a("../src/traces/scattergl")},{"../src/traces/scattergl":1104}],35:[function(a,t,m){t.exports=a("../src/traces/scattermapbox")},{"../src/traces/scattermapbox":1110}],36:[function(a,t,m){t.exports=a("../src/traces/scatterpolar")},{"../src/traces/scatterpolar":1117}],37:[function(a,t,m){t.exports=a("../src/traces/scatterpolargl")},{"../src/traces/scatterpolargl":1121}],
38:[function(a,t,m){t.exports=a("../src/traces/scatterternary")},{"../src/traces/scatterternary":1127}],39:[function(a,t,m){t.exports=a("../src/transforms/sort")},{"../src/transforms/sort":1187}],40:[function(a,t,m){t.exports=a("../src/traces/splom")},{"../src/traces/splom":1132}],41:[function(a,t,m){t.exports=a("../src/traces/streamtube")},{"../src/traces/streamtube":1137}],42:[function(a,t,m){t.exports=a("../src/traces/sunburst")},{"../src/traces/sunburst":1143}],43:[function(a,t,m){t.exports=a("../src/traces/surface")},
{"../src/traces/surface":1152}],44:[function(a,t,m){t.exports=a("../src/traces/table")},{"../src/traces/table":1160}],45:[function(a,t,m){t.exports=a("../src/traces/violin")},{"../src/traces/violin":1168}],46:[function(a,t,m){t.exports=a("../src/traces/waterfall")},{"../src/traces/waterfall":1178}],47:[function(a,t,m){function p(b,a){this._controllerNames=Object.keys(b);this._controllerList=this._controllerNames.map(function(a){return b[a]});this._mode=a;this._active=b[a];this._active||(this._mode=
"turntable",this._active=b.turntable);this.modes=this._controllerNames;this.computedMatrix=this._active.computedMatrix;this.computedEye=this._active.computedEye;this.computedUp=this._active.computedUp;this.computedCenter=this._active.computedCenter;this.computedRadius=this._active.computedRadius}t.exports=function(b){b=b||{};var a=b.eye||[0,0,1],n=b.center||[0,0,0],q=b.up||[0,1,0],d=b.distanceLimits||[0,Infinity];b=b.mode||"turntable";var f=g(),c=h(),k=e();f.setDistanceLimits(d[0],d[1]);f.lookAt(0,
a,n,q);c.setDistanceLimits(d[0],d[1]);c.lookAt(0,a,n,q);k.setDistanceLimits(d[0],d[1]);k.lookAt(0,a,n,q);return new p({turntable:f,orbit:c,matrix:k},b)};var g=a("turntable-camera-controller"),h=a("orbit-camera-controller"),e=a("matrix-camera-controller"),n=p.prototype;[["flush",1],["idle",1],["lookAt",4],["rotate",4],["pan",4],["translate",4],["setMatrix",2],["setDistanceLimits",2],["setDistance",2]].forEach(function(b){for(var a=b[0],e=[],h=0;h<b[1];++h)e.push("a"+h);b="var cc\x3dthis._controllerList;for(var i\x3d0;i\x3ccc.length;++i){cc[i]."+
b[0]+"("+e.join()+")}";n[a]=Function.apply(null,e.concat(b))});n.recalcMatrix=function(b){this._active.recalcMatrix(b)};n.getDistance=function(b){return this._active.getDistance(b)};n.getDistanceLimits=function(b){return this._active.getDistanceLimits(b)};n.lastT=function(){return this._active.lastT()};n.setMode=function(b){if(b!==this._mode){var a=this._controllerNames.indexOf(b);if(!(0>a)){var e=this._active;a=this._controllerList[a];var h=Math.max(e.lastT(),a.lastT());e.recalcMatrix(h);a.setMatrix(h,
e.computedMatrix);this._active=a;this._mode=b;this.computedMatrix=this._active.computedMatrix;this.computedEye=this._active.computedEye;this.computedUp=this._active.computedUp;this.computedCenter=this._active.computedCenter;this.computedRadius=this._active.computedRadius}}};n.getMode=function(){return this._mode}},{"matrix-camera-controller":425,"orbit-camera-controller":448,"turntable-camera-controller":526}],48:[function(a,t,m){(function(p,g){"object"===typeof m&&"undefined"!==typeof t?g(m,a("d3-array"),
a("d3-collection"),a("d3-shape")):g(p.d3=p.d3||{},p.d3,p.d3,p.d3)})(this,function(a,g,h,e){function n(b){return b.target.depth}function b(b,a){return b.sourceLinks.length?b.depth:a-1}function l(b){return function(){return b}}function u(b,a){return d(b.source,a.source)||b.index-a.index}function q(b,a){return d(b.target,a.target)||b.index-a.index}function d(b,a){return b.y0-a.y0}function f(b){return b.value}function c(b){return(b.y0+b.y1)/2}function k(b){return c(b.source)*b.value}function r(b){return c(b.target)*
b.value}function v(b){return b.index}function p(b){return b.nodes}function A(b){return b.links}function y(b,a){b=b.get(a);if(!b)throw Error("missing: "+a);return b}function w(b){return[b.source.x1,b.y0]}function x(b){return[b.target.x0,b.y1]}a.sankey=function(){function a(){var b={nodes:R.apply(null,arguments),links:T.apply(null,arguments)};e(b);n(b);z(b);w(b,P);x(b);return b}function e(b){b.nodes.forEach(function(b,a){b.index=a;b.sourceLinks=[];b.targetLinks=[]});var a=h.map(b.nodes,t);b.links.forEach(function(b,
c){b.index=c;c=b.source;var d=b.target;"object"!==typeof c&&(c=b.source=y(a,c));"object"!==typeof d&&(d=b.target=y(a,d));c.sourceLinks.push(b);d.targetLinks.push(b)})}function n(b){b.nodes.forEach(function(b){b.value=Math.max(g.sum(b.sourceLinks,f),g.sum(b.targetLinks,f))})}function z(b){var a;var c=b.nodes;var d=[];for(a=0;c.length;++a,c=d,d=[])c.forEach(function(b){b.depth=a;b.sourceLinks.forEach(function(b){0>d.indexOf(b.target)&&d.push(b.target)})});c=b.nodes;d=[];for(a=0;c.length;++a,c=d,d=[])c.forEach(function(b){b.height=
a;b.targetLinks.forEach(function(b){0>d.indexOf(b.source)&&d.push(b.source)})});var f=(I-E-L)/(a-1);b.nodes.forEach(function(b){b.x1=(b.x0=E+Math.max(0,Math.min(a-1,Math.floor(O.call(null,b,a))))*f)+L})}function w(b){function a(b){q.forEach(function(a){a.forEach(function(a){if(a.targetLinks.length){var d=(g.sum(a.targetLinks,k)/g.sum(a.targetLinks,f)-c(a))*b;a.y0+=d;a.y1+=d}})})}function e(b){q.slice().reverse().forEach(function(a){a.forEach(function(a){if(a.sourceLinks.length){var d=(g.sum(a.sourceLinks,
r)/g.sum(a.sourceLinks,f)-c(a))*b;a.y0+=d;a.y1+=d}})})}function l(){q.forEach(function(b){var a=m,c=b.length,f;b.sort(d);for(f=0;f<c;++f){var e=b[f];var k=a-e.y0;0<k&&(e.y0+=k,e.y1+=k);a=e.y1+M}k=a-M-J;if(0<k)for(a=e.y0-=k,e.y1-=k,f=c-2;0<=f;--f)e=b[f],k=e.y1+M-a,0<k&&(e.y0-=k,e.y1-=k),a=e.y0})}var q=h.nest().key(function(b){return b.x0}).sortKeys(g.ascending).entries(b.nodes).map(function(b){return b.values});(function(){var a=g.max(q,function(b){return b.length});a=S*(J-m)/(a-1);M>a&&(M=a);var c=
g.min(q,function(b){return(J-m-(b.length-1)*M)/g.sum(b,f)});q.forEach(function(b){b.forEach(function(b,a){b.y1=(b.y0=a)+b.value*c})});b.links.forEach(function(b){b.width=b.value*c})})();l();for(var n=1,u=P;0<u;--u)e(n*=.99),l(),a(n),l()}function x(b){b.nodes.forEach(function(b){b.sourceLinks.sort(q);b.targetLinks.sort(u)});b.nodes.forEach(function(b){var a=b.y0,c=a;b.sourceLinks.forEach(function(b){b.y0=a+b.width/2;a+=b.width});b.targetLinks.forEach(function(b){b.y1=c+b.width/2;c+=b.width})})}var E=
0,m=0,I=1,J=1,L=24,M=8,t=v,O=b,R=p,T=A,P=32,S=2/3;a.update=function(b){x(b);return b};a.nodeId=function(b){return arguments.length?(t="function"===typeof b?b:l(b),a):t};a.nodeAlign=function(b){return arguments.length?(O="function"===typeof b?b:l(b),a):O};a.nodeWidth=function(b){return arguments.length?(L=+b,a):L};a.nodePadding=function(b){return arguments.length?(M=+b,a):M};a.nodes=function(b){return arguments.length?(R="function"===typeof b?b:l(b),a):R};a.links=function(b){return arguments.length?
(T="function"===typeof b?b:l(b),a):T};a.size=function(b){return arguments.length?(E=m=0,I=+b[0],J=+b[1],a):[I-E,J-m]};a.extent=function(b){return arguments.length?(E=+b[0][0],I=+b[1][0],m=+b[0][1],J=+b[1][1],a):[[E,m],[I,J]]};a.iterations=function(b){return arguments.length?(P=+b,a):P};return a};a.sankeyCenter=function(b){return b.targetLinks.length?b.depth:b.sourceLinks.length?g.min(b.sourceLinks,n)-1:0};a.sankeyLeft=function(b){return b.depth};a.sankeyRight=function(b,a){return a-1-b.height};a.sankeyJustify=
b;a.sankeyLinkHorizontal=function(){return e.linkHorizontal().source(w).target(x)};Object.defineProperty(a,"__esModule",{value:!0})})},{"d3-array":142,"d3-collection":143,"d3-shape":152}],49:[function(a,t,m){m="undefined"===typeof WeakMap?a("weak-map"):WeakMap;var p=a("gl-buffer"),g=a("gl-vao"),h=new m;t.exports=function(a){var e=h.get(a),b=e&&(e._triangleBuffer.handle||e._triangleBuffer.buffer);b&&a.isBuffer(b)||(b=p(a,new Float32Array([-1,-1,-1,4,4,-1])),e=g(a,[{buffer:b,type:a.FLOAT,size:2}]),
e._triangleBuffer=b,h.set(a,e));e.bind();a.drawArrays(a.TRIANGLES,0,3);e.unbind()}},{"gl-buffer":237,"gl-vao":319,"weak-map":536}],50:[function(a,t,m){t.exports=function(a){var g=0,h=0,e=0,n=0;return a.map(function(b){b=b.slice();var a=b[0],u=a.toUpperCase();if(a!=u)switch(b[0]=u,a){case "a":b[6]+=e;b[7]+=n;break;case "v":b[1]+=n;break;case "h":b[1]+=e;break;default:for(a=1;a<b.length;)b[a++]+=e,b[a++]+=n}switch(u){case "Z":e=g;n=h;break;case "H":e=b[1];break;case "V":n=b[1];break;case "M":e=g=b[1];
n=h=b[2];break;default:e=b[b.length-2],n=b[b.length-1]}return b})}},{}],51:[function(a,t,m){var p=a("pad-left");t.exports=function(a,h,e){h="number"===typeof h?h:1;e=e||": ";a=a.split(/\r?\n/);var g=String(a.length+h-1).length;return a.map(function(b,a){a+=h;return p(a,g-String(a).length)+e+b}).join("\n")}},{"pad-left":449}],52:[function(a,t,m){t.exports=function(a){var h=a.length;if(0===h)return[];if(1===h)return[0];for(var e=a[0].length,g=[a[0]],b=[0],l=1;l<h;++l){g.push(a[l]);a:{var u=g;for(var q=
e,d=Array(q+1),f=0;f<u.length;++f)d[f]=u[f];for(f=0;f<=u.length;++f){for(var c=u.length;c<=q;++c){for(var k=Array(q),r=0;r<q;++r)k[r]=Math.pow(c+1-f,r);d[c]=k}if(p.apply(void 0,d)){u=!0;break a}}u=!1}if(u){if(b.push(l),b.length===e+1)break}else g.pop()}return b};var p=a("robust-orientation")},{"robust-orientation":494}],53:[function(a,t,m){t.exports=function(a,e){return p(e).filter(function(h){for(var b=Array(h.length),l=0;l<h.length;++l)b[l]=e[h[l]];return 1>g(b)*a})};var p=a("delaunay-triangulate"),
g=a("circumradius")},{circumradius:104,"delaunay-triangulate":156}],54:[function(a,t,m){t.exports=function(a,e){return g(p(a,e))};var p=a("alpha-complex"),g=a("simplicial-complex-boundary")},{"alpha-complex":53,"simplicial-complex-boundary":501}],55:[function(a,t,m){t.exports=function(a,g){if(!a||null==a.length)throw Error("Argument should be an array");g=null==g?1:Math.floor(g);for(var h=Array(2*g),e=0;e<g;e++){for(var n=-Infinity,b=Infinity,l=e,u=a.length;l<u;l+=g)a[l]>n&&(n=a[l]),a[l]<b&&(b=a[l]);
h[e]=b;h[g+e]=n}return h}},{}],56:[function(a,t,m){var p=a("array-bounds");t.exports=function(a,h,e){if(!a||null==a.length)throw Error("Argument should be an array");null==h&&(h=1);null==e&&(e=p(a,h));for(var g=0;g<h;g++){var b=e[h+g],l=e[g],u,q=a.length;if(Infinity===b&&-Infinity===l)for(u=g;u<q;u+=h)a[u]=a[u]===b?1:a[u]===l?0:.5;else if(Infinity===b)for(u=g;u<q;u+=h)a[u]=a[u]===b?1:0;else if(-Infinity===l)for(u=g;u<q;u+=h)a[u]=a[u]===l?0:1;else for(b-=l,u=g;u<q;u+=h)a[u]=0===b?.5:(a[u]-l)/b}return a}},
{"array-bounds":55}],57:[function(a,t,m){t.exports=function(a,g){var h="number"===typeof a,e="number"===typeof g;h&&!e?(g=a,a=0):h||e||(g=a=0);a|=0;g=(g|0)-a;if(0>g)throw Error("array length must be positive");h=Array(g);for(e=0;e<g;e++,a++)h[e]=a;return h}},{}],58:[function(a,t,m){(function(p){function g(b,a){if(b===a)return 0;for(var c=b.length,d=a.length,f=0,e=Math.min(c,d);f<e;++f)if(b[f]!==a[f]){c=b[f];d=a[f];break}return c<d?-1:d<c?1:0}function h(b){return p.Buffer&&"function"===typeof p.Buffer.isBuffer?
p.Buffer.isBuffer(b):!(null==b||!b._isBuffer)}function e(b){return h(b)||"function"!==typeof p.ArrayBuffer?!1:"function"===typeof ArrayBuffer.isView?ArrayBuffer.isView(b):b?b instanceof DataView||b.buffer&&b.buffer instanceof ArrayBuffer?!0:!1:!1}function n(b){if(z.isFunction(b))return w?b.name:(b=b.toString().match(F))&&b[1]}function b(b,a){return"string"===typeof b?b.length<a?b:b.slice(0,a):b}function l(b){if(w||!z.isFunction(b))return z.inspect(b);b=n(b);return"[Function"+(b?": "+b:"")+"]"}function u(b,
a,c,d,f){throw new x.AssertionError({message:c,actual:b,expected:a,operator:d,stackStartFunction:f});}function q(b,a){b||u(b,!0,a,"\x3d\x3d",x.ok)}function d(b,a,d,f){if(b===a)return!0;if(h(b)&&h(a))return 0===g(b,a);if(z.isDate(b)&&z.isDate(a))return b.getTime()===a.getTime();if(z.isRegExp(b)&&z.isRegExp(a))return b.source===a.source&&b.global===a.global&&b.multiline===a.multiline&&b.lastIndex===a.lastIndex&&b.ignoreCase===a.ignoreCase;if(null!==b&&"object"===typeof b||null!==a&&"object"===typeof a){if(!e(b)||
!e(a)||Object.prototype.toString.call(b)!==Object.prototype.toString.call(a)||b instanceof Float32Array||b instanceof Float64Array){if(h(b)!==h(a))return!1;f=f||{actual:[],expected:[]};var k=f.actual.indexOf(b);if(-1!==k&&k===f.expected.indexOf(a))return!0;f.actual.push(b);f.expected.push(a);return c(b,a,d,f)}return 0===g(new Uint8Array(b.buffer),new Uint8Array(a.buffer))}return d?b===a:b==a}function f(b){return"[object Arguments]"==Object.prototype.toString.call(b)}function c(b,a,c,e){if(null===
b||void 0===b||null===a||void 0===a)return!1;if(z.isPrimitive(b)||z.isPrimitive(a))return b===a;if(c&&Object.getPrototypeOf(b)!==Object.getPrototypeOf(a))return!1;var k=f(b),r=f(a);if(k&&!r||!k&&r)return!1;if(k)return b=y.call(b),a=y.call(a),d(b,a,c);k=B(b);var l=B(a);if(k.length!==l.length)return!1;k.sort();l.sort();for(r=k.length-1;0<=r;r--)if(k[r]!==l[r])return!1;for(r=k.length-1;0<=r;r--)if(l=k[r],!d(b[l],a[l],c,e))return!1;return!0}function k(b,a,c){d(b,a,!0)&&u(b,a,c,"notDeepStrictEqual",k)}
function r(b,a){if(!b||!a)return!1;if("[object RegExp]"==Object.prototype.toString.call(a))return a.test(b);try{if(b instanceof a)return!0}catch(G){}return Error.isPrototypeOf(a)?!1:!0===a.call({},b)}function v(b,a,c,d){if("function"!==typeof a)throw new TypeError('"block" argument must be a function');"string"===typeof c&&(d=c,c=null);try{a()}catch(J){var f=J}a=f;d=(c&&c.name?" ("+c.name+").":".")+(d?" "+d:".");b&&!a&&u(a,c,"Missing expected exception"+d);f="string"===typeof d;var e=!b&&z.isError(a),
k=!b&&a&&!c;(e&&f&&r(a,c)||k)&&u(a,c,"Got unwanted exception"+d);if(b&&a&&c&&!r(a,c)||!b&&a)throw a;}var z=a("util/"),A=Object.prototype.hasOwnProperty,y=Array.prototype.slice,w=function(){return"foo"===function(){}.name}(),x=t.exports=q,F=/\s*function\s+([^\(\s]*)\s*/;x.AssertionError=function(a){this.name="AssertionError";this.actual=a.actual;this.expected=a.expected;this.operator=a.operator;a.message?(this.message=a.message,this.generatedMessage=!1):(this.message=b(l(this.actual),128)+" "+this.operator+
" "+b(l(this.expected),128),this.generatedMessage=!0);var c=a.stackStartFunction||u;Error.captureStackTrace?Error.captureStackTrace(this,c):(a=Error(),a.stack&&(a=a.stack,c=n(c),c=a.indexOf("\n"+c),0<=c&&(c=a.indexOf("\n",c+1),a=a.substring(c+1)),this.stack=a))};z.inherits(x.AssertionError,Error);x.fail=u;x.ok=q;x.equal=function(b,a,c){b!=a&&u(b,a,c,"\x3d\x3d",x.equal)};x.notEqual=function(b,a,c){b==a&&u(b,a,c,"!\x3d",x.notEqual)};x.deepEqual=function(b,a,c){d(b,a,!1)||u(b,a,c,"deepEqual",x.deepEqual)};
x.deepStrictEqual=function(b,a,c){d(b,a,!0)||u(b,a,c,"deepStrictEqual",x.deepStrictEqual)};x.notDeepEqual=function(b,a,c){d(b,a,!1)&&u(b,a,c,"notDeepEqual",x.notDeepEqual)};x.notDeepStrictEqual=k;x.strictEqual=function(b,a,c){b!==a&&u(b,a,c,"\x3d\x3d\x3d",x.strictEqual)};x.notStrictEqual=function(b,a,c){b===a&&u(b,a,c,"!\x3d\x3d",x.notStrictEqual)};x.throws=function(b,a,c){v(!0,b,a,c)};x.doesNotThrow=function(b,a,c){v(!1,b,a,c)};x.ifError=function(b){if(b)throw b;};var B=Object.keys||function(b){var a=
[],c;for(c in b)A.call(b,c)&&a.push(c);return a}}).call(this,"undefined"!==typeof ja?ja:"undefined"!==typeof self?self:"undefined"!==typeof window?window:{})},{"util/":61}],59:[function(a,t,m){t.exports="function"===typeof Object.create?function(a,g){a.super_=g;a.prototype=Object.create(g.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}})}:function(a,g){a.super_=g;var h=function(){};h.prototype=g.prototype;a.prototype=new h;a.prototype.constructor=a}},{}],60:[function(a,
t,m){t.exports=function(a){return a&&"object"===typeof a&&"function"===typeof a.copy&&"function"===typeof a.fill&&"function"===typeof a.readUInt8}},{}],61:[function(a,t,m){(function(p,g){function h(b,a){var c={seen:[],stylize:n};3<=arguments.length&&(c.depth=arguments[2]);4<=arguments.length&&(c.colors=arguments[3]);r(a)?c.showHidden=a:a&&m._extend(c,a);A(c.showHidden)&&(c.showHidden=!1);A(c.depth)&&(c.depth=2);A(c.colors)&&(c.colors=!1);A(c.customInspect)&&(c.customInspect=!0);c.colors&&(c.stylize=
e);return l(c,b,c.depth)}function e(b,a){return(a=h.styles[a])?"["+h.colors[a][0]+"m"+b+"["+h.colors[a][1]+"m":b}function n(b,a){return b}function b(b){var a={};b.forEach(function(b,c){a[b]=!0});return a}function l(a,e,r){if(a.customInspect&&e&&B(e.inspect)&&e.inspect!==m.inspect&&(!e.constructor||e.constructor.prototype!==e)){var h=e.inspect(r,a);z(h)||(h=l(a,h,r));return h}if(h=u(a,e))return h;var g=Object.keys(e),n=b(g);a.showHidden&&(g=Object.getOwnPropertyNames(e));if(F(e)&&(0<=g.indexOf("message")||
0<=g.indexOf("description")))return q(e);if(0===g.length){if(B(e))return a.stylize("[Function"+(e.name?": "+e.name:"")+"]","special");if(y(e))return a.stylize(RegExp.prototype.toString.call(e),"regexp");if(x(e))return a.stylize(Date.prototype.toString.call(e),"date");if(F(e))return q(e)}h="";var v=!1,p=["{","}"];k(e)&&(v=!0,p=["[","]"]);B(e)&&(h=" [Function"+(e.name?": "+e.name:"")+"]");y(e)&&(h=" "+RegExp.prototype.toString.call(e));x(e)&&(h=" "+Date.prototype.toUTCString.call(e));F(e)&&(h=" "+q(e));
if(0===g.length&&(!v||0==e.length))return p[0]+h+p[1];if(0>r)return y(e)?a.stylize(RegExp.prototype.toString.call(e),"regexp"):a.stylize("[Object]","special");a.seen.push(e);g=v?d(a,e,r,n,g):g.map(function(b){return f(a,e,r,n,b,v)});a.seen.pop();return c(g,h,p)}function u(b,a){if(A(a))return b.stylize("undefined","undefined");if(z(a))return a="'"+JSON.stringify(a).replace(/^"|"$/g,"").replace(/'/g,"\\'").replace(/\\"/g,'"')+"'",b.stylize(a,"string");if(v(a))return b.stylize(""+a,"number");if(r(a))return b.stylize(""+
a,"boolean");if(null===a)return b.stylize("null","null")}function q(b){return"["+Error.prototype.toString.call(b)+"]"}function d(b,a,c,d,e){for(var k=[],r=0,l=a.length;r<l;++r)Object.prototype.hasOwnProperty.call(a,String(r))?k.push(f(b,a,c,d,String(r),!0)):k.push("");e.forEach(function(e){e.match(/^\d+$/)||k.push(f(b,a,c,d,e,!0))});return k}function f(b,a,c,d,f,e){var k,r;a=Object.getOwnPropertyDescriptor(a,f)||{value:a[f]};a.get?r=a.set?b.stylize("[Getter/Setter]","special"):b.stylize("[Getter]",
"special"):a.set&&(r=b.stylize("[Setter]","special"));Object.prototype.hasOwnProperty.call(d,f)||(k="["+f+"]");r||(0>b.seen.indexOf(a.value)?(r=null===c?l(b,a.value,null):l(b,a.value,c-1),-1<r.indexOf("\n")&&(r=e?r.split("\n").map(function(b){return"  "+b}).join("\n").substr(2):"\n"+r.split("\n").map(function(b){return"   "+b}).join("\n"))):r=b.stylize("[Circular]","special"));if(A(k)){if(e&&f.match(/^\d+$/))return r;k=JSON.stringify(""+f);k.match(/^"([a-zA-Z_][a-zA-Z_0-9]*)"$/)?(k=k.substr(1,k.length-
2),k=b.stylize(k,"name")):(k=k.replace(/'/g,"\\'").replace(/\\"/g,'"').replace(/(^"|"$)/g,"'"),k=b.stylize(k,"string"))}return k+": "+r}function c(b,a,c){var d=0;return 60<b.reduce(function(b,a){d++;0<=a.indexOf("\n")&&d++;return b+a.replace(/\u001b\[\d\d?m/g,"").length+1},0)?c[0]+(""===a?"":a+"\n ")+" "+b.join(",\n  ")+" "+c[1]:c[0]+a+" "+b.join(", ")+" "+c[1]}function k(b){return Array.isArray(b)}function r(b){return"boolean"===typeof b}function v(b){return"number"===typeof b}function z(b){return"string"===
typeof b}function A(b){return void 0===b}function y(b){return w(b)&&"[object RegExp]"===Object.prototype.toString.call(b)}function w(b){return"object"===typeof b&&null!==b}function x(b){return w(b)&&"[object Date]"===Object.prototype.toString.call(b)}function F(b){return w(b)&&("[object Error]"===Object.prototype.toString.call(b)||b instanceof Error)}function B(b){return"function"===typeof b}function C(b){return 10>b?"0"+b.toString(10):b.toString(10)}function D(){var b=new Date,a=[C(b.getHours()),
C(b.getMinutes()),C(b.getSeconds())].join(":");return[b.getDate(),K[b.getMonth()],a].join(" ")}var G=/%[sdj%]/g;m.format=function(b){if(!z(b)){for(var a=[],c=0;c<arguments.length;c++)a.push(h(arguments[c]));return a.join(" ")}c=1;var d=arguments,f=d.length;a=String(b).replace(G,function(b){if("%%"===b)return"%";if(c>=f)return b;switch(b){case "%s":return String(d[c++]);case "%d":return Number(d[c++]);case "%j":try{return JSON.stringify(d[c++])}catch(T){return"[Circular]"}default:return b}});for(var e=
d[c];c<f;e=d[++c])a=null!==e&&w(e)?a+(" "+h(e)):a+(" "+e);return a};m.deprecate=function(b,a){if(A(g.process))return function(){return m.deprecate(b,a).apply(this,arguments)};if(!0===p.noDeprecation)return b;var c=!1;return function(){if(!c){if(p.throwDeprecation)throw Error(a);p.traceDeprecation?console.trace(a):console.error(a);c=!0}return b.apply(this,arguments)}};var H={},E;m.debuglog=function(b){A(E)&&(E=p.env.NODE_DEBUG||"");b=b.toUpperCase();if(!H[b])if((new RegExp("\\b"+b+"\\b","i")).test(E)){var a=
p.pid;H[b]=function(){var c=m.format.apply(m,arguments);console.error("%s %d: %s",b,a,c)}}else H[b]=function(){};return H[b]};m.inspect=h;h.colors={bold:[1,22],italic:[3,23],underline:[4,24],inverse:[7,27],white:[37,39],grey:[90,39],black:[30,39],blue:[34,39],cyan:[36,39],green:[32,39],magenta:[35,39],red:[31,39],yellow:[33,39]};h.styles={special:"cyan",number:"yellow","boolean":"yellow",undefined:"grey","null":"bold",string:"green",date:"magenta",regexp:"red"};m.isArray=k;m.isBoolean=r;m.isNull=
function(b){return null===b};m.isNullOrUndefined=function(b){return null==b};m.isNumber=v;m.isString=z;m.isSymbol=function(b){return"symbol"===typeof b};m.isUndefined=A;m.isRegExp=y;m.isObject=w;m.isDate=x;m.isError=F;m.isFunction=B;m.isPrimitive=function(b){return null===b||"boolean"===typeof b||"number"===typeof b||"string"===typeof b||"symbol"===typeof b||"undefined"===typeof b};m.isBuffer=a("./support/isBuffer");var K="Jan Feb Mar Apr May Jun Jul Aug Sep Oct Nov Dec".split(" ");m.log=function(){console.log("%s - %s",
D(),m.format.apply(m,arguments))};m.inherits=a("inherits");m._extend=function(b,a){if(!a||!w(a))return b;for(var c=Object.keys(a),d=c.length;d--;)b[c[d]]=a[c[d]];return b}}).call(this,a("_process"),"undefined"!==typeof ja?ja:"undefined"!==typeof self?self:"undefined"!==typeof window?window:{})},{"./support/isBuffer":60,_process:474,inherits:59}],62:[function(a,t,m){t.exports=function(a){return atob(a)}},{}],63:[function(a,t,m){function p(a){for(var e=0,h=0;h<a.length;++h)e+=a[h];return e}t.exports=
function(a,e){for(var h=e.length,b=Array(h+1),l=0;l<h;++l){for(var u=Array(h+1),q=0;q<=h;++q)u[q]=a[q][l];b[l]=u}b[h]=Array(h+1);for(l=0;l<=h;++l)b[h][l]=1;a=Array(h+1);for(l=0;l<h;++l)a[l]=e[l];a[h]=1;e=g(b,a);b=p(e[h+1]);0===b&&(b=1);a=Array(h+1);for(l=0;l<=h;++l)a[l]=p(e[l])/b;return a};var g=a("robust-linear-solve")},{"robust-linear-solve":493}],64:[function(a,t,m){function p(b){var a=b.length;if(0<a%4)throw Error("Invalid string. Length must be a multiple of 4");b=b.indexOf("\x3d");-1===b&&(b=
a);return[b,b===a?0:4-b%4]}function g(b,a,e){for(var l=[],d=a;d<e;d+=3)a=(b[d]<<16&16711680)+(b[d+1]<<8&65280)+(b[d+2]&255),l.push(h[a>>18&63]+h[a>>12&63]+h[a>>6&63]+h[a&63]);return l.join("")}m.byteLength=function(b){b=p(b);var a=b[1];return 3*(b[0]+a)/4-a};m.toByteArray=function(b){var a=p(b);var h=a[0];a=a[1];for(var g=new n(3*(h+a)/4-a),d=0,f=0<a?h-4:h,c=0;c<f;c+=4)h=e[b.charCodeAt(c)]<<18|e[b.charCodeAt(c+1)]<<12|e[b.charCodeAt(c+2)]<<6|e[b.charCodeAt(c+3)],g[d++]=h>>16&255,g[d++]=h>>8&255,g[d++]=
h&255;2===a&&(h=e[b.charCodeAt(c)]<<2|e[b.charCodeAt(c+1)]>>4,g[d++]=h&255);1===a&&(h=e[b.charCodeAt(c)]<<10|e[b.charCodeAt(c+1)]<<4|e[b.charCodeAt(c+2)]>>2,g[d++]=h>>8&255,g[d++]=h&255);return g};m.fromByteArray=function(b){for(var a=b.length,e=a%3,q=[],d=0,f=a-e;d<f;d+=16383)q.push(g(b,d,d+16383>f?f:d+16383));1===e?(b=b[a-1],q.push(h[b>>2]+h[b<<4&63]+"\x3d\x3d")):2===e&&(b=(b[a-2]<<8)+b[a-1],q.push(h[b>>10]+h[b>>4&63]+h[b<<2&63]+"\x3d"));return q.join("")};var h=[],e=[],n="undefined"!==typeof Uint8Array?
Uint8Array:Array;for(a=0;64>a;++a)h[a]="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/"[a],e["ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/".charCodeAt(a)]=a;e[45]=62;e[95]=63},{}],65:[function(a,t,m){var p=a("./lib/rationalize");t.exports=function(a,h){return p(a[0].mul(h[1]).add(h[0].mul(a[1])),a[1].mul(h[1]))}},{"./lib/rationalize":75}],66:[function(a,t,m){t.exports=function(a,g){return a[0].mul(g[1]).cmp(g[0].mul(a[1]))}},{}],67:[function(a,t,m){var p=a("./lib/rationalize");
t.exports=function(a,h){return p(a[0].mul(h[1]),a[1].mul(h[0]))}},{"./lib/rationalize":75}],68:[function(a,t,m){function p(a,q){if(g(a))return q?l(a,p(q)):[a[0].clone(),a[1].clone()];var d=0;if(h(a))a=a.clone();else if("string"===typeof a)a=n(a);else{if(0===a)return[e(0),e(1)];if(a!==Math.floor(a))for(;a!==Math.floor(a);)a*=Math.pow(2,256),d-=256;a=e(a)}if(g(q))a.mul(q[1]),q=q[0].clone();else if(h(q))q=q.clone();else if("string"===typeof q)q=n(q);else if(q){if(q!==Math.floor(q))for(;q!==Math.floor(q);)q*=
Math.pow(2,256),d+=256;q=e(q)}else q=e(1);0<d?a=a.ushln(d):0>d&&(q=q.ushln(-d));return b(a,q)}var g=a("./is-rat"),h=a("./lib/is-bn"),e=a("./lib/num-to-bn"),n=a("./lib/str-to-bn"),b=a("./lib/rationalize"),l=a("./div");t.exports=p},{"./div":67,"./is-rat":69,"./lib/is-bn":73,"./lib/num-to-bn":74,"./lib/rationalize":75,"./lib/str-to-bn":76}],69:[function(a,t,m){var p=a("./lib/is-bn");t.exports=function(a){return Array.isArray(a)&&2===a.length&&p(a[0])&&p(a[1])}},{"./lib/is-bn":73}],70:[function(a,t,m){var p=
a("bn.js");t.exports=function(a){return a.cmp(new p(0))}},{"bn.js":84}],71:[function(a,t,m){var p=a("./bn-sign");t.exports=function(a){var h=a.length,e=a.words,g=0;if(1===h)g=e[0];else if(2===h)g=e[0]+67108864*e[1];else for(var b=0;b<h;b++)g+=e[b]*Math.pow(67108864,b);return p(a)*g}},{"./bn-sign":70}],72:[function(a,t,m){var p=a("double-bits"),g=a("bit-twiddle").countTrailingZeros;t.exports=function(a){var e=g(p.lo(a));if(32>e)return e;a=g(p.hi(a));return 20<a?52:a+32}},{"bit-twiddle":82,"double-bits":158}],
73:[function(a,t,m){a("bn.js");t.exports=function(a){return a&&"object"===typeof a&&!!a.words}},{"bn.js":84}],74:[function(a,t,m){var p=a("bn.js"),g=a("double-bits");t.exports=function(a){var e=g.exponent(a);return 52>e?new p(a):(new p(a*Math.pow(2,52-e))).ushln(e-52)}},{"bn.js":84,"double-bits":158}],75:[function(a,t,m){var p=a("./num-to-bn"),g=a("./bn-sign");t.exports=function(a,e){var h=g(a),b=g(e);if(0===h)return[p(0),p(1)];if(0===b)return[p(0),p(0)];0>b&&(a=a.neg(),e=e.neg());h=a.gcd(e);return h.cmpn(1)?
[a.div(h),e.div(h)]:[a,e]}},{"./bn-sign":70,"./num-to-bn":74}],76:[function(a,t,m){var p=a("bn.js");t.exports=function(a){return new p(a)}},{"bn.js":84}],77:[function(a,t,m){var p=a("./lib/rationalize");t.exports=function(a,h){return p(a[0].mul(h[0]),a[1].mul(h[1]))}},{"./lib/rationalize":75}],78:[function(a,t,m){var p=a("./lib/bn-sign");t.exports=function(a){return p(a[0])*p(a[1])}},{"./lib/bn-sign":70}],79:[function(a,t,m){var p=a("./lib/rationalize");t.exports=function(a,h){return p(a[0].mul(h[1]).sub(a[1].mul(h[0])),
a[1].mul(h[1]))}},{"./lib/rationalize":75}],80:[function(a,t,m){var p=a("./lib/bn-to-num"),g=a("./lib/ctz");t.exports=function(a){var e=a[0];a=a[1];if(0===e.cmpn(0))return 0;var h=e.abs().divmod(a.abs()),b=p(h.div);h=h.mod;e=e.negative!==a.negative?-1:1;if(0===h.cmpn(0))return e*b;if(b){var l=g(b)+4;a=p(h.ushln(l).divRound(a));return e*(b+a*Math.pow(2,-l))}b=a.bitLength()-h.bitLength()+53;a=p(h.ushln(b).divRound(a));if(1023>b)return e*a*Math.pow(2,-b);a*=Math.pow(2,-1023);return e*a*Math.pow(2,1023-
b)}},{"./lib/bn-to-num":71,"./lib/ctz":72}],81:[function(a,t,m){function p(a,e,g,b,l,u){a=["function ",a,"(a,l,h,",b.join(","),"){",u?"":"var i\x3d",g?"l-1":"h+1",";while(l\x3c\x3dh){var m\x3d(l+h)\x3e\x3e\x3e1,x\x3da",l?".get(m)":"[m]"];u?0>e.indexOf("c")?a.push(";if(x\x3d\x3d\x3dy){return m}else if(x\x3c\x3dy){"):a.push(";var p\x3dc(x,y);if(p\x3d\x3d\x3d0){return m}else if(p\x3c\x3d0){"):a.push(";if(",e,"){i\x3dm;");g?a.push("l\x3dm+1}else{h\x3dm-1}"):a.push("h\x3dm-1}else{l\x3dm+1}");a.push("}");
u?a.push("return -1};"):a.push("return i};");return a.join("")}function g(a,e,g,b){return(new Function([p("A","x"+a+"y",e,["y"],!1,b),p("B","x"+a+"y",e,["y"],!0,b),p("P","c(x,y)"+a+"0",e,["y","c"],!1,b),p("Q","c(x,y)"+a+"0",e,["y","c"],!0,b),"function dispatchBsearch",g,"(a,y,c,l,h){if(a.shape){if(typeof(c)\x3d\x3d\x3d'function'){return Q(a,(l\x3d\x3d\x3dundefined)?0:l|0,(h\x3d\x3d\x3dundefined)?a.shape[0]-1:h|0,y,c)}else{return B(a,(c\x3d\x3d\x3dundefined)?0:c|0,(l\x3d\x3d\x3dundefined)?a.shape[0]-1:l|0,y)}}else{if(typeof(c)\x3d\x3d\x3d'function'){return P(a,(l\x3d\x3d\x3dundefined)?0:l|0,(h\x3d\x3d\x3dundefined)?a.length-1:h|0,y,c)}else{return A(a,(c\x3d\x3d\x3dundefined)?0:c|0,(l\x3d\x3d\x3dundefined)?a.length-1:l|0,y)}}}return dispatchBsearch",
g].join("")))()}t.exports={ge:g("\x3e\x3d",!1,"GE"),gt:g("\x3e",!1,"GT"),lt:g("\x3c",!0,"LT"),le:g("\x3c\x3d",!0,"LE"),eq:g("-",!0,"EQ",!0)}},{}],82:[function(a,t,m){function p(a){var e=32;(a&=-a)&&e--;a&65535&&(e-=16);a&16711935&&(e-=8);a&252645135&&(e-=4);a&858993459&&(e-=2);a&1431655765&&--e;return e}"use restrict";m.INT_BITS=32;m.INT_MAX=2147483647;m.INT_MIN=-2147483648;m.sign=function(a){return(0<a)-(0>a)};m.abs=function(a){var e=a>>31;return(a^e)-e};m.min=function(a,e){return e^(a^e)&-(a<e)};
m.max=function(a,e){return a^(a^e)&-(a<e)};m.isPow2=function(a){return!(a&a-1)&&!!a};m.log2=function(a){var e=(65535<a)<<4;a>>>=e;var h=(255<a)<<3;a>>>=h;e|=h;h=(15<a)<<2;a>>>=h;e|=h;h=(3<a)<<1;return e|h|a>>>h>>1};m.log10=function(a){return 1E9<=a?9:1E8<=a?8:1E7<=a?7:1E6<=a?6:1E5<=a?5:1E4<=a?4:1E3<=a?3:100<=a?2:10<=a?1:0};m.popCount=function(a){a-=a>>>1&1431655765;a=(a&858993459)+(a>>>2&858993459);return 16843009*(a+(a>>>4)&252645135)>>>24};m.countTrailingZeros=p;m.nextPow2=function(a){a+=0===a;
--a;a|=a>>>1;a|=a>>>2;a|=a>>>4;a|=a>>>8;return(a|a>>>16)+1};m.prevPow2=function(a){a|=a>>>1;a|=a>>>2;a|=a>>>4;a|=a>>>8;a|=a>>>16;return a-(a>>>1)};m.parity=function(a){a^=a>>>16;a^=a>>>8;return 27030>>>((a^a>>>4)&15)&1};var g=Array(256);(function(a){for(var e=0;256>e;++e){var h=e,b=e,l=7;for(h>>>=1;h;h>>>=1)b<<=1,b|=h&1,--l;a[e]=b<<l&255}})(g);m.reverse=function(a){return g[a&255]<<24|g[a>>>8&255]<<16|g[a>>>16&255]<<8|g[a>>>24&255]};m.interleave2=function(a,e){a&=65535;a=(a|a<<8)&16711935;a=(a|a<<
4)&252645135;a=(a|a<<2)&858993459;e&=65535;e=(e|e<<8)&16711935;e=(e|e<<4)&252645135;e=(e|e<<2)&858993459;return(a|a<<1)&1431655765|((e|e<<1)&1431655765)<<1};m.deinterleave2=function(a,e){a=a>>>e&1431655765;a=(a|a>>>1)&858993459;a=(a|a>>>2)&252645135;a=(a|a>>>4)&16711935;return((a|a>>>16)&65535)<<16>>16};m.interleave3=function(a,e,g){a&=1023;a=(a|a<<16)&4278190335;a=(a|a<<8)&251719695;a=(a|a<<4)&3272356035;e&=1023;e=(e|e<<16)&4278190335;e=(e|e<<8)&251719695;e=(e|e<<4)&3272356035;g&=1023;g=(g|g<<16)&
4278190335;g=(g|g<<8)&251719695;g=(g|g<<4)&3272356035;return(a|a<<2)&1227133513|((e|e<<2)&1227133513)<<1|((g|g<<2)&1227133513)<<2};m.deinterleave3=function(a,e){a=a>>>e&1227133513;a=(a|a>>>2)&3272356035;a=(a|a>>>4)&251719695;a=(a|a>>>8)&4278190335;return((a|a>>>16)&1023)<<22>>22};m.nextCombination=function(a){var e=a|a-1;return e+1|(~e&-~e)-1>>>p(a)+1}},{}],83:[function(a,t,m){function p(a,b,e,h,q,d,f){for(var c=0;c<b;c++){for(var k=0;k<e;k++)h[k]=a[k*b+c];g(h,q,d,f,e);for(k=0;k<e;k++)a[k*b+c]=q[k]}for(k=
0;k<e;k++){for(c=0;c<b;c++)h[c]=a[k*b+c];g(h,q,d,f,b);for(c=0;c<b;c++)a[k*b+c]=Math.sqrt(q[c])}}function g(a,b,l,g,q){l[0]=0;g[0]=-e;g[1]=+e;for(var d=1,f=0;d<q;d++){for(var c=(a[d]+d*d-(a[l[f]]+l[f]*l[f]))/(2*d-2*l[f]);c<=g[f];)f--,c=(a[d]+d*d-(a[l[f]]+l[f]*l[f]))/(2*d-2*l[f]);f++;l[f]=d;g[f]=c;g[f+1]=+e}for(f=d=0;d<q;d++){for(;g[f+1]<d;)f++;b[d]=(d-l[f])*(d-l[f])+a[l[f]]}}var h=a("clamp");t.exports=function(a,b){b||(b={});var l=null==b.cutoff?.25:b.cutoff,g=null==b.radius?8:b.radius,q=b.channel||
0;if(ArrayBuffer.isView(a)||Array.isArray(a)){if(!b.width||!b.height)throw Error("For raw data width and height should be provided by options");var d=b.width;var f=b.height;var c=a;var k=b.stride?b.stride:Math.floor(a.length/d/f)}else window.HTMLCanvasElement&&a instanceof window.HTMLCanvasElement?(f=a,c=f.getContext("2d"),d=f.width,f=f.height,c=c.getImageData(0,0,d,f),c=c.data,k=4):window.CanvasRenderingContext2D&&a instanceof window.CanvasRenderingContext2D?(f=a.canvas,d=f.width,f=f.height,c=a.getImageData(0,
0,d,f),c=c.data,k=4):window.ImageData&&a instanceof window.ImageData&&(d=a.width,f=a.height,c=a.data,k=4);var r=Math.max(d,f);if(window.Uint8ClampedArray&&c instanceof window.Uint8ClampedArray||window.Uint8Array&&c instanceof window.Uint8Array){var n=c;c=Array(d*f);a=0;for(b=n.length;a<b;a++)c[a]=n[a*k+q]/255}else if(1!==k)throw Error("Raw data can have only 1 value per pixel");q=Array(d*f);k=Array(d*f);n=Array(r);var z=Array(r),A=Array(r+1);r=Array(r);a=0;for(b=d*f;a<b;a++){var y=c[a];q[a]=1===y?
0:0===y?e:Math.pow(Math.max(0,.5-y),2);k[a]=1===y?e:0===y?0:Math.pow(Math.max(0,y-.5),2)}p(q,d,f,n,z,r,A);p(k,d,f,n,z,r,A);c=window.Float32Array?new Float32Array(d*f):Array(d*f);a=0;for(b=d*f;a<b;a++)c[a]=h(1-((q[a]-k[a])/g+l),0,1);return c};var e=1E20},{clamp:105}],84:[function(a,t,m){(function(p,g){function h(b,a){if(!b)throw Error(a||"Assertion failed");}function e(b,a){b.super_=a;var c=function(){};c.prototype=a.prototype;b.prototype=new c;b.prototype.constructor=b}function n(b,a,c){if(n.isBN(b))return b;
this.negative=0;this.words=null;this.length=0;this.red=null;if(null!==b){if("le"===a||"be"===a)c=a,a=10;this._init(b||0,a||10,c||"be")}}function b(b,a,c){var d=0;for(c=Math.min(b.length,c);a<c;a++){var f=b.charCodeAt(a)-48;d<<=4;d=49<=f&&54>=f?d|f-49+10:17<=f&&22>=f?d|f-17+10:d|f&15}return d}function l(b,a,c,d){var f=0;for(c=Math.min(b.length,c);a<c;a++){var e=b.charCodeAt(a)-48;f*=d;f=49<=e?f+(e-49+10):17<=e?f+(e-17+10):f+e}return f}function u(b,a,c){c.negative=a.negative^b.negative;var d=b.length+
a.length|0;c.length=d;d=d-1|0;var f=b.words[0]|0,e=a.words[0]|0;f*=e;var k=f/67108864|0;c.words[0]=f&67108863;for(var r=1;r<d;r++){var l=k>>>26,g=k&67108863;k=Math.min(r,a.length-1);for(var q=Math.max(0,r-b.length+1);q<=k;q++)f=b.words[r-q|0]|0,e=a.words[q]|0,f=f*e+g,l+=f/67108864|0,g=f&67108863;c.words[r]=g|0;k=l|0}0!==k?c.words[r]=k|0:c.length--;return c.strip()}function q(b,a){this.x=b;this.y=a}function d(b,a){this.name=b;this.p=new n(a,16);this.n=this.p.bitLength();this.k=(new n(1)).iushln(this.n).isub(this.p);
this.tmp=this._tmp()}function f(){d.call(this,"k256","ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe fffffc2f")}function c(){d.call(this,"p224","ffffffff ffffffff ffffffff ffffffff 00000000 00000000 00000001")}function k(){d.call(this,"p192","ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff")}function r(){d.call(this,"25519","7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed")}function v(b){"string"===typeof b?(b=n._prime(b),this.m=b.p,this.prime=b):(h(b.gtn(1),
"modulus must be greater than 1"),this.m=b,this.prime=null)}function z(b){v.call(this,b);this.shift=this.m.bitLength();0!==this.shift%26&&(this.shift+=26-this.shift%26);this.r=(new n(1)).iushln(this.shift);this.r2=this.imod(this.r.sqr());this.rinv=this.r._invmp(this.m);this.minv=this.rinv.mul(this.r).isubn(1).div(this.m);this.minv=this.minv.umod(this.r);this.minv=this.r.sub(this.minv)}"object"===typeof p?p.exports=n:g.BN=n;n.BN=n;n.wordSize=26;try{var A=a("buffer").Buffer}catch(C){}n.isBN=function(b){return b instanceof
n?!0:null!==b&&"object"===typeof b&&b.constructor.wordSize===n.wordSize&&Array.isArray(b.words)};n.max=function(b,a){return 0<b.cmp(a)?b:a};n.min=function(b,a){return 0>b.cmp(a)?b:a};n.prototype._init=function(b,a,c){if("number"===typeof b)return this._initNumber(b,a,c);if("object"===typeof b)return this._initArray(b,a,c);"hex"===a&&(a=16);h(a===(a|0)&&2<=a&&36>=a);b=b.toString().replace(/\s+/g,"");var d=0;"-"===b[0]&&d++;16===a?this._parseHex(b,d):this._parseBase(b,a,d);"-"===b[0]&&(this.negative=
1);this.strip();"le"===c&&this._initArray(this.toArray(),a,c)};n.prototype._initNumber=function(b,a,c){0>b&&(this.negative=1,b=-b);67108864>b?(this.words=[b&67108863],this.length=1):4503599627370496>b?(this.words=[b&67108863,b/67108864&67108863],this.length=2):(h(9007199254740992>b),this.words=[b&67108863,b/67108864&67108863,1],this.length=3);"le"===c&&this._initArray(this.toArray(),a,c)};n.prototype._initArray=function(b,a,c){h("number"===typeof b.length);if(0>=b.length)return this.words=[0],this.length=
1,this;this.length=Math.ceil(b.length/3);this.words=Array(this.length);for(a=0;a<this.length;a++)this.words[a]=0;var d=0;if("be"===c)for(a=b.length-1,c=0;0<=a;a-=3){var f=b[a]|b[a-1]<<8|b[a-2]<<16;this.words[c]|=f<<d&67108863;this.words[c+1]=f>>>26-d&67108863;d+=24;26<=d&&(d-=26,c++)}else if("le"===c)for(c=a=0;a<b.length;a+=3)f=b[a]|b[a+1]<<8|b[a+2]<<16,this.words[c]|=f<<d&67108863,this.words[c+1]=f>>>26-d&67108863,d+=24,26<=d&&(d-=26,c++);return this.strip()};n.prototype._parseHex=function(a,c){this.length=
Math.ceil((a.length-c)/6);this.words=Array(this.length);for(var d=0;d<this.length;d++)this.words[d]=0;var f,e=0;d=a.length-6;for(f=0;d>=c;d-=6){var k=b(a,d,d+6);this.words[f]|=k<<e&67108863;this.words[f+1]|=k>>>26-e&4194303;e+=24;26<=e&&(e-=26,f++)}d+6!==c&&(k=b(a,c,d+6),this.words[f]|=k<<e&67108863,this.words[f+1]|=k>>>26-e&4194303);this.strip()};n.prototype._parseBase=function(b,a,c){this.words=[0];this.length=1;for(var d=0,f=1;67108863>=f;f*=a)d++;d--;f=f/a|0;var e=b.length-c,k=e%d;e=Math.min(e,
e-k)+c;for(var r=c;r<e;r+=d)c=l(b,r,r+d,a),this.imuln(f),67108864>this.words[0]+c?this.words[0]+=c:this._iaddn(c);if(0!==k){d=1;c=l(b,r,b.length,a);for(r=0;r<k;r++)d*=a;this.imuln(d);67108864>this.words[0]+c?this.words[0]+=c:this._iaddn(c)}};n.prototype.copy=function(b){b.words=Array(this.length);for(var a=0;a<this.length;a++)b.words[a]=this.words[a];b.length=this.length;b.negative=this.negative;b.red=this.red};n.prototype.clone=function(){var b=new n(null);this.copy(b);return b};n.prototype._expand=
function(b){for(;this.length<b;)this.words[this.length++]=0;return this};n.prototype.strip=function(){for(;1<this.length&&0===this.words[this.length-1];)this.length--;return this._normSign()};n.prototype._normSign=function(){1===this.length&&0===this.words[0]&&(this.negative=0);return this};n.prototype.inspect=function(){return(this.red?"\x3cBN-R: ":"\x3cBN: ")+this.toString(16)+"\x3e"};var y=" 0 00 000 0000 00000 000000 0000000 00000000 000000000 0000000000 00000000000 000000000000 0000000000000 00000000000000 000000000000000 0000000000000000 00000000000000000 000000000000000000 0000000000000000000 00000000000000000000 000000000000000000000 0000000000000000000000 00000000000000000000000 000000000000000000000000 0000000000000000000000000".split(" "),
w=[0,0,25,16,12,11,10,9,8,8,7,7,7,7,6,6,6,6,6,6,6,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5],x=[0,0,33554432,43046721,16777216,48828125,60466176,40353607,16777216,43046721,1E7,19487171,35831808,62748517,7529536,11390625,16777216,24137569,34012224,47045881,64E6,4084101,5153632,6436343,7962624,9765625,11881376,14348907,17210368,20511149,243E5,28629151,33554432,39135393,45435424,52521875,60466176];n.prototype.toString=function(b,a){b=b||10;a=a|0||1;if(16===b||"hex"===b){var c="";for(var d=b=0,f=0;f<this.length;f++){var e=
this.words[f],k=((e<<b|d)&16777215).toString(16);d=e>>>24-b&16777215;c=0!==d||f!==this.length-1?y[6-k.length]+k+c:k+c;b+=2;26<=b&&(b-=26,f--)}for(0!==d&&(c=d.toString(16)+c);0!==c.length%a;)c="0"+c;0!==this.negative&&(c="-"+c);return c}if(b===(b|0)&&2<=b&&36>=b){d=w[b];f=x[b];c="";e=this.clone();for(e.negative=0;!e.isZero();)k=e.modn(f).toString(b),e=e.idivn(f),c=e.isZero()?k+c:y[d-k.length]+k+c;for(this.isZero()&&(c="0"+c);0!==c.length%a;)c="0"+c;0!==this.negative&&(c="-"+c);return c}h(!1,"Base should be between 2 and 36")};
n.prototype.toNumber=function(){var b=this.words[0];2===this.length?b+=67108864*this.words[1]:3===this.length&&1===this.words[2]?b+=4503599627370496+67108864*this.words[1]:2<this.length&&h(!1,"Number can only safely store up to 53 bits");return 0!==this.negative?-b:b};n.prototype.toJSON=function(){return this.toString(16)};n.prototype.toBuffer=function(b,a){h("undefined"!==typeof A);return this.toArrayLike(A,b,a)};n.prototype.toArray=function(b,a){return this.toArrayLike(Array,b,a)};n.prototype.toArrayLike=
function(b,a,c){var d=this.byteLength();c=c||Math.max(1,d);h(d<=c,"byte array longer than desired length");h(0<c,"Requested array length \x3c\x3d 0");this.strip();var f="le"===a;b=new b(c);a=this.clone();if(f){for(f=0;!a.isZero();f++)d=a.andln(255),a.iushrn(8),b[f]=d;for(;f<c;f++)b[f]=0}else{for(f=0;f<c-d;f++)b[f]=0;for(f=0;!a.isZero();f++)d=a.andln(255),a.iushrn(8),b[c-f-1]=d}return b};n.prototype._countBits=Math.clz32?function(b){return 32-Math.clz32(b)}:function(b){var a=0;4096<=b&&(a+=13,b>>>=
13);64<=b&&(a+=7,b>>>=7);8<=b&&(a+=4,b>>>=4);2<=b&&(a+=2,b>>>=2);return a+b};n.prototype._zeroBits=function(b){if(0===b)return 26;var a=0;0===(b&8191)&&(a+=13,b>>>=13);0===(b&127)&&(a+=7,b>>>=7);0===(b&15)&&(a+=4,b>>>=4);0===(b&3)&&(a+=2,b>>>=2);0===(b&1)&&a++;return a};n.prototype.bitLength=function(){var b=this._countBits(this.words[this.length-1]);return 26*(this.length-1)+b};n.prototype.zeroBits=function(){if(this.isZero())return 0;for(var b=0,a=0;a<this.length;a++){var c=this._zeroBits(this.words[a]);
b+=c;if(26!==c)break}return b};n.prototype.byteLength=function(){return Math.ceil(this.bitLength()/8)};n.prototype.toTwos=function(b){return 0!==this.negative?this.abs().inotn(b).iaddn(1):this.clone()};n.prototype.fromTwos=function(b){return this.testn(b-1)?this.notn(b).iaddn(1).ineg():this.clone()};n.prototype.isNeg=function(){return 0!==this.negative};n.prototype.neg=function(){return this.clone().ineg()};n.prototype.ineg=function(){this.isZero()||(this.negative^=1);return this};n.prototype.iuor=
function(b){for(;this.length<b.length;)this.words[this.length++]=0;for(var a=0;a<b.length;a++)this.words[a]|=b.words[a];return this.strip()};n.prototype.ior=function(b){h(0===(this.negative|b.negative));return this.iuor(b)};n.prototype.or=function(b){return this.length>b.length?this.clone().ior(b):b.clone().ior(this)};n.prototype.uor=function(b){return this.length>b.length?this.clone().iuor(b):b.clone().iuor(this)};n.prototype.iuand=function(b){var a=this.length>b.length?b:this;for(var c=0;c<a.length;c++)this.words[c]&=
b.words[c];this.length=a.length;return this.strip()};n.prototype.iand=function(b){h(0===(this.negative|b.negative));return this.iuand(b)};n.prototype.and=function(b){return this.length>b.length?this.clone().iand(b):b.clone().iand(this)};n.prototype.uand=function(b){return this.length>b.length?this.clone().iuand(b):b.clone().iuand(this)};n.prototype.iuxor=function(b){if(this.length>b.length)var a=this;else a=b,b=this;for(var c=0;c<b.length;c++)this.words[c]=a.words[c]^b.words[c];if(this!==a)for(;c<
a.length;c++)this.words[c]=a.words[c];this.length=a.length;return this.strip()};n.prototype.ixor=function(b){h(0===(this.negative|b.negative));return this.iuxor(b)};n.prototype.xor=function(b){return this.length>b.length?this.clone().ixor(b):b.clone().ixor(this)};n.prototype.uxor=function(b){return this.length>b.length?this.clone().iuxor(b):b.clone().iuxor(this)};n.prototype.inotn=function(b){h("number"===typeof b&&0<=b);var a=Math.ceil(b/26)|0;b%=26;this._expand(a);0<b&&a--;for(var c=0;c<a;c++)this.words[c]=
~this.words[c]&67108863;0<b&&(this.words[c]=~this.words[c]&67108863>>26-b);return this.strip()};n.prototype.notn=function(b){return this.clone().inotn(b)};n.prototype.setn=function(b,a){h("number"===typeof b&&0<=b);var c=b/26|0;b%=26;this._expand(c+1);this.words[c]=a?this.words[c]|1<<b:this.words[c]&~(1<<b);return this.strip()};n.prototype.iadd=function(b){if(0!==this.negative&&0===b.negative)return this.negative=0,this.isub(b),this.negative^=1,this._normSign();if(0===this.negative&&0!==b.negative){b.negative=
0;var a=this.isub(b);b.negative=1;return a._normSign()}if(this.length>b.length)var c=this;else c=b,b=this;for(var d=a=0;d<b.length;d++)a=(c.words[d]|0)+(b.words[d]|0)+a,this.words[d]=a&67108863,a>>>=26;for(;0!==a&&d<c.length;d++)a=(c.words[d]|0)+a,this.words[d]=a&67108863,a>>>=26;this.length=c.length;if(0!==a)this.words[this.length]=a,this.length++;else if(c!==this)for(;d<c.length;d++)this.words[d]=c.words[d];return this};n.prototype.add=function(b){if(0!==b.negative&&0===this.negative){b.negative=
0;var a=this.sub(b);b.negative^=1;return a}return 0===b.negative&&0!==this.negative?(this.negative=0,a=b.sub(this),this.negative=1,a):this.length>b.length?this.clone().iadd(b):b.clone().iadd(this)};n.prototype.isub=function(b){if(0!==b.negative){b.negative=0;var a=this.iadd(b);b.negative=1;return a._normSign()}if(0!==this.negative)return this.negative=0,this.iadd(b),this.negative=1,this._normSign();a=this.cmp(b);if(0===a)return this.negative=0,this.length=1,this.words[0]=0,this;if(0<a)var c=this;
else c=b,b=this;for(var d=0,f=0;f<b.length;f++)a=(c.words[f]|0)-(b.words[f]|0)+d,d=a>>26,this.words[f]=a&67108863;for(;0!==d&&f<c.length;f++)a=(c.words[f]|0)+d,d=a>>26,this.words[f]=a&67108863;if(0===d&&f<c.length&&c!==this)for(;f<c.length;f++)this.words[f]=c.words[f];this.length=Math.max(this.length,f);c!==this&&(this.negative=1);return this.strip()};n.prototype.sub=function(b){return this.clone().isub(b)};var F=function(b,a,c){var d=b.words,f=a.words,e=c.words,k=0,r=d[0]|0,l=r&8191,g=r>>>13,q=d[1]|
0;r=q&8191;var h=q>>>13,n=d[2]|0;q=n&8191;var v=n>>>13,u=d[3]|0;n=u&8191;var p=u>>>13,z=d[4]|0;u=z&8191;var A=z>>>13,w=d[5]|0;z=w&8191;var x=w>>>13,y=d[6]|0;w=y&8191;var C=y>>>13,B=d[7]|0;y=B&8191;var F=B>>>13,D=d[8]|0;B=D&8191;D>>>=13;var m=d[9]|0;d=m&8191;m>>>=13;var G=f[0]|0,t=G&8191,ua=G>>>13,Z=f[1]|0;G=Z&8191;var qa=Z>>>13,sa=f[2]|0;Z=sa&8191;var V=sa>>>13,ia=f[3]|0;sa=ia&8191;var Ka=ia>>>13,wa=f[4]|0;ia=wa&8191;var Aa=wa>>>13,Ha=f[5]|0;wa=Ha&8191;var Ba=Ha>>>13,va=f[6]|0;Ha=va&8191;var pa=va>>>
13,ya=f[7]|0;va=ya&8191;var ka=ya>>>13,xa=f[8]|0;ya=xa&8191;xa>>>=13;var Ia=f[9]|0;f=Ia&8191;Ia>>>=13;c.negative=b.negative^a.negative;c.length=19;var aa=Math.imul(l,t);b=Math.imul(l,ua);b=b+Math.imul(g,t)|0;a=Math.imul(g,ua);var Ea=(k+aa|0)+((b&8191)<<13)|0;k=(a+(b>>>13)|0)+(Ea>>>26)|0;Ea&=67108863;aa=Math.imul(r,t);b=Math.imul(r,ua);b=b+Math.imul(h,t)|0;a=Math.imul(h,ua);aa=aa+Math.imul(l,G)|0;b=b+Math.imul(l,qa)|0;b=b+Math.imul(g,G)|0;a=a+Math.imul(g,qa)|0;var Ja=(k+aa|0)+((b&8191)<<13)|0;k=(a+
(b>>>13)|0)+(Ja>>>26)|0;Ja&=67108863;aa=Math.imul(q,t);b=Math.imul(q,ua);b=b+Math.imul(v,t)|0;a=Math.imul(v,ua);aa=aa+Math.imul(r,G)|0;b=b+Math.imul(r,qa)|0;b=b+Math.imul(h,G)|0;a=a+Math.imul(h,qa)|0;aa=aa+Math.imul(l,Z)|0;b=b+Math.imul(l,V)|0;b=b+Math.imul(g,Z)|0;a=a+Math.imul(g,V)|0;var Na=(k+aa|0)+((b&8191)<<13)|0;k=(a+(b>>>13)|0)+(Na>>>26)|0;Na&=67108863;aa=Math.imul(n,t);b=Math.imul(n,ua);b=b+Math.imul(p,t)|0;a=Math.imul(p,ua);aa=aa+Math.imul(q,G)|0;b=b+Math.imul(q,qa)|0;b=b+Math.imul(v,G)|0;
a=a+Math.imul(v,qa)|0;aa=aa+Math.imul(r,Z)|0;b=b+Math.imul(r,V)|0;b=b+Math.imul(h,Z)|0;a=a+Math.imul(h,V)|0;aa=aa+Math.imul(l,sa)|0;b=b+Math.imul(l,Ka)|0;b=b+Math.imul(g,sa)|0;a=a+Math.imul(g,Ka)|0;var Ra=(k+aa|0)+((b&8191)<<13)|0;k=(a+(b>>>13)|0)+(Ra>>>26)|0;Ra&=67108863;aa=Math.imul(u,t);b=Math.imul(u,ua);b=b+Math.imul(A,t)|0;a=Math.imul(A,ua);aa=aa+Math.imul(n,G)|0;b=b+Math.imul(n,qa)|0;b=b+Math.imul(p,G)|0;a=a+Math.imul(p,qa)|0;aa=aa+Math.imul(q,Z)|0;b=b+Math.imul(q,V)|0;b=b+Math.imul(v,Z)|0;
a=a+Math.imul(v,V)|0;aa=aa+Math.imul(r,sa)|0;b=b+Math.imul(r,Ka)|0;b=b+Math.imul(h,sa)|0;a=a+Math.imul(h,Ka)|0;aa=aa+Math.imul(l,ia)|0;b=b+Math.imul(l,Aa)|0;b=b+Math.imul(g,ia)|0;a=a+Math.imul(g,Aa)|0;var rb=(k+aa|0)+((b&8191)<<13)|0;k=(a+(b>>>13)|0)+(rb>>>26)|0;rb&=67108863;aa=Math.imul(z,t);b=Math.imul(z,ua);b=b+Math.imul(x,t)|0;a=Math.imul(x,ua);aa=aa+Math.imul(u,G)|0;b=b+Math.imul(u,qa)|0;b=b+Math.imul(A,G)|0;a=a+Math.imul(A,qa)|0;aa=aa+Math.imul(n,Z)|0;b=b+Math.imul(n,V)|0;b=b+Math.imul(p,Z)|
0;a=a+Math.imul(p,V)|0;aa=aa+Math.imul(q,sa)|0;b=b+Math.imul(q,Ka)|0;b=b+Math.imul(v,sa)|0;a=a+Math.imul(v,Ka)|0;aa=aa+Math.imul(r,ia)|0;b=b+Math.imul(r,Aa)|0;b=b+Math.imul(h,ia)|0;a=a+Math.imul(h,Aa)|0;aa=aa+Math.imul(l,wa)|0;b=b+Math.imul(l,Ba)|0;b=b+Math.imul(g,wa)|0;a=a+Math.imul(g,Ba)|0;var Eb=(k+aa|0)+((b&8191)<<13)|0;k=(a+(b>>>13)|0)+(Eb>>>26)|0;Eb&=67108863;aa=Math.imul(w,t);b=Math.imul(w,ua);b=b+Math.imul(C,t)|0;a=Math.imul(C,ua);aa=aa+Math.imul(z,G)|0;b=b+Math.imul(z,qa)|0;b=b+Math.imul(x,
G)|0;a=a+Math.imul(x,qa)|0;aa=aa+Math.imul(u,Z)|0;b=b+Math.imul(u,V)|0;b=b+Math.imul(A,Z)|0;a=a+Math.imul(A,V)|0;aa=aa+Math.imul(n,sa)|0;b=b+Math.imul(n,Ka)|0;b=b+Math.imul(p,sa)|0;a=a+Math.imul(p,Ka)|0;aa=aa+Math.imul(q,ia)|0;b=b+Math.imul(q,Aa)|0;b=b+Math.imul(v,ia)|0;a=a+Math.imul(v,Aa)|0;aa=aa+Math.imul(r,wa)|0;b=b+Math.imul(r,Ba)|0;b=b+Math.imul(h,wa)|0;a=a+Math.imul(h,Ba)|0;aa=aa+Math.imul(l,Ha)|0;b=b+Math.imul(l,pa)|0;b=b+Math.imul(g,Ha)|0;a=a+Math.imul(g,pa)|0;var dc=(k+aa|0)+((b&8191)<<13)|
0;k=(a+(b>>>13)|0)+(dc>>>26)|0;dc&=67108863;aa=Math.imul(y,t);b=Math.imul(y,ua);b=b+Math.imul(F,t)|0;a=Math.imul(F,ua);aa=aa+Math.imul(w,G)|0;b=b+Math.imul(w,qa)|0;b=b+Math.imul(C,G)|0;a=a+Math.imul(C,qa)|0;aa=aa+Math.imul(z,Z)|0;b=b+Math.imul(z,V)|0;b=b+Math.imul(x,Z)|0;a=a+Math.imul(x,V)|0;aa=aa+Math.imul(u,sa)|0;b=b+Math.imul(u,Ka)|0;b=b+Math.imul(A,sa)|0;a=a+Math.imul(A,Ka)|0;aa=aa+Math.imul(n,ia)|0;b=b+Math.imul(n,Aa)|0;b=b+Math.imul(p,ia)|0;a=a+Math.imul(p,Aa)|0;aa=aa+Math.imul(q,wa)|0;b=b+
Math.imul(q,Ba)|0;b=b+Math.imul(v,wa)|0;a=a+Math.imul(v,Ba)|0;aa=aa+Math.imul(r,Ha)|0;b=b+Math.imul(r,pa)|0;b=b+Math.imul(h,Ha)|0;a=a+Math.imul(h,pa)|0;aa=aa+Math.imul(l,va)|0;b=b+Math.imul(l,ka)|0;b=b+Math.imul(g,va)|0;a=a+Math.imul(g,ka)|0;var pb=(k+aa|0)+((b&8191)<<13)|0;k=(a+(b>>>13)|0)+(pb>>>26)|0;pb&=67108863;aa=Math.imul(B,t);b=Math.imul(B,ua);b=b+Math.imul(D,t)|0;a=Math.imul(D,ua);aa=aa+Math.imul(y,G)|0;b=b+Math.imul(y,qa)|0;b=b+Math.imul(F,G)|0;a=a+Math.imul(F,qa)|0;aa=aa+Math.imul(w,Z)|
0;b=b+Math.imul(w,V)|0;b=b+Math.imul(C,Z)|0;a=a+Math.imul(C,V)|0;aa=aa+Math.imul(z,sa)|0;b=b+Math.imul(z,Ka)|0;b=b+Math.imul(x,sa)|0;a=a+Math.imul(x,Ka)|0;aa=aa+Math.imul(u,ia)|0;b=b+Math.imul(u,Aa)|0;b=b+Math.imul(A,ia)|0;a=a+Math.imul(A,Aa)|0;aa=aa+Math.imul(n,wa)|0;b=b+Math.imul(n,Ba)|0;b=b+Math.imul(p,wa)|0;a=a+Math.imul(p,Ba)|0;aa=aa+Math.imul(q,Ha)|0;b=b+Math.imul(q,pa)|0;b=b+Math.imul(v,Ha)|0;a=a+Math.imul(v,pa)|0;aa=aa+Math.imul(r,va)|0;b=b+Math.imul(r,ka)|0;b=b+Math.imul(h,va)|0;a=a+Math.imul(h,
ka)|0;aa=aa+Math.imul(l,ya)|0;b=b+Math.imul(l,xa)|0;b=b+Math.imul(g,ya)|0;a=a+Math.imul(g,xa)|0;var Oa=(k+aa|0)+((b&8191)<<13)|0;k=(a+(b>>>13)|0)+(Oa>>>26)|0;Oa&=67108863;aa=Math.imul(d,t);b=Math.imul(d,ua);b=b+Math.imul(m,t)|0;a=Math.imul(m,ua);aa=aa+Math.imul(B,G)|0;b=b+Math.imul(B,qa)|0;b=b+Math.imul(D,G)|0;a=a+Math.imul(D,qa)|0;aa=aa+Math.imul(y,Z)|0;b=b+Math.imul(y,V)|0;b=b+Math.imul(F,Z)|0;a=a+Math.imul(F,V)|0;aa=aa+Math.imul(w,sa)|0;b=b+Math.imul(w,Ka)|0;b=b+Math.imul(C,sa)|0;a=a+Math.imul(C,
Ka)|0;aa=aa+Math.imul(z,ia)|0;b=b+Math.imul(z,Aa)|0;b=b+Math.imul(x,ia)|0;a=a+Math.imul(x,Aa)|0;aa=aa+Math.imul(u,wa)|0;b=b+Math.imul(u,Ba)|0;b=b+Math.imul(A,wa)|0;a=a+Math.imul(A,Ba)|0;aa=aa+Math.imul(n,Ha)|0;b=b+Math.imul(n,pa)|0;b=b+Math.imul(p,Ha)|0;a=a+Math.imul(p,pa)|0;aa=aa+Math.imul(q,va)|0;b=b+Math.imul(q,ka)|0;b=b+Math.imul(v,va)|0;a=a+Math.imul(v,ka)|0;aa=aa+Math.imul(r,ya)|0;b=b+Math.imul(r,xa)|0;b=b+Math.imul(h,ya)|0;a=a+Math.imul(h,xa)|0;aa=aa+Math.imul(l,f)|0;b=b+Math.imul(l,Ia)|0;
b=b+Math.imul(g,f)|0;a=a+Math.imul(g,Ia)|0;l=(k+aa|0)+((b&8191)<<13)|0;k=(a+(b>>>13)|0)+(l>>>26)|0;l&=67108863;aa=Math.imul(d,G);b=Math.imul(d,qa);b=b+Math.imul(m,G)|0;a=Math.imul(m,qa);aa=aa+Math.imul(B,Z)|0;b=b+Math.imul(B,V)|0;b=b+Math.imul(D,Z)|0;a=a+Math.imul(D,V)|0;aa=aa+Math.imul(y,sa)|0;b=b+Math.imul(y,Ka)|0;b=b+Math.imul(F,sa)|0;a=a+Math.imul(F,Ka)|0;aa=aa+Math.imul(w,ia)|0;b=b+Math.imul(w,Aa)|0;b=b+Math.imul(C,ia)|0;a=a+Math.imul(C,Aa)|0;aa=aa+Math.imul(z,wa)|0;b=b+Math.imul(z,Ba)|0;b=b+
Math.imul(x,wa)|0;a=a+Math.imul(x,Ba)|0;aa=aa+Math.imul(u,Ha)|0;b=b+Math.imul(u,pa)|0;b=b+Math.imul(A,Ha)|0;a=a+Math.imul(A,pa)|0;aa=aa+Math.imul(n,va)|0;b=b+Math.imul(n,ka)|0;b=b+Math.imul(p,va)|0;a=a+Math.imul(p,ka)|0;aa=aa+Math.imul(q,ya)|0;b=b+Math.imul(q,xa)|0;b=b+Math.imul(v,ya)|0;a=a+Math.imul(v,xa)|0;aa=aa+Math.imul(r,f)|0;b=b+Math.imul(r,Ia)|0;b=b+Math.imul(h,f)|0;a=a+Math.imul(h,Ia)|0;r=(k+aa|0)+((b&8191)<<13)|0;k=(a+(b>>>13)|0)+(r>>>26)|0;r&=67108863;aa=Math.imul(d,Z);b=Math.imul(d,V);
b=b+Math.imul(m,Z)|0;a=Math.imul(m,V);aa=aa+Math.imul(B,sa)|0;b=b+Math.imul(B,Ka)|0;b=b+Math.imul(D,sa)|0;a=a+Math.imul(D,Ka)|0;aa=aa+Math.imul(y,ia)|0;b=b+Math.imul(y,Aa)|0;b=b+Math.imul(F,ia)|0;a=a+Math.imul(F,Aa)|0;aa=aa+Math.imul(w,wa)|0;b=b+Math.imul(w,Ba)|0;b=b+Math.imul(C,wa)|0;a=a+Math.imul(C,Ba)|0;aa=aa+Math.imul(z,Ha)|0;b=b+Math.imul(z,pa)|0;b=b+Math.imul(x,Ha)|0;a=a+Math.imul(x,pa)|0;aa=aa+Math.imul(u,va)|0;b=b+Math.imul(u,ka)|0;b=b+Math.imul(A,va)|0;a=a+Math.imul(A,ka)|0;aa=aa+Math.imul(n,
ya)|0;b=b+Math.imul(n,xa)|0;b=b+Math.imul(p,ya)|0;a=a+Math.imul(p,xa)|0;aa=aa+Math.imul(q,f)|0;b=b+Math.imul(q,Ia)|0;b=b+Math.imul(v,f)|0;a=a+Math.imul(v,Ia)|0;q=(k+aa|0)+((b&8191)<<13)|0;k=(a+(b>>>13)|0)+(q>>>26)|0;q&=67108863;aa=Math.imul(d,sa);b=Math.imul(d,Ka);b=b+Math.imul(m,sa)|0;a=Math.imul(m,Ka);aa=aa+Math.imul(B,ia)|0;b=b+Math.imul(B,Aa)|0;b=b+Math.imul(D,ia)|0;a=a+Math.imul(D,Aa)|0;aa=aa+Math.imul(y,wa)|0;b=b+Math.imul(y,Ba)|0;b=b+Math.imul(F,wa)|0;a=a+Math.imul(F,Ba)|0;aa=aa+Math.imul(w,
Ha)|0;b=b+Math.imul(w,pa)|0;b=b+Math.imul(C,Ha)|0;a=a+Math.imul(C,pa)|0;aa=aa+Math.imul(z,va)|0;b=b+Math.imul(z,ka)|0;b=b+Math.imul(x,va)|0;a=a+Math.imul(x,ka)|0;aa=aa+Math.imul(u,ya)|0;b=b+Math.imul(u,xa)|0;b=b+Math.imul(A,ya)|0;a=a+Math.imul(A,xa)|0;aa=aa+Math.imul(n,f)|0;b=b+Math.imul(n,Ia)|0;b=b+Math.imul(p,f)|0;a=a+Math.imul(p,Ia)|0;n=(k+aa|0)+((b&8191)<<13)|0;k=(a+(b>>>13)|0)+(n>>>26)|0;n&=67108863;aa=Math.imul(d,ia);b=Math.imul(d,Aa);b=b+Math.imul(m,ia)|0;a=Math.imul(m,Aa);aa=aa+Math.imul(B,
wa)|0;b=b+Math.imul(B,Ba)|0;b=b+Math.imul(D,wa)|0;a=a+Math.imul(D,Ba)|0;aa=aa+Math.imul(y,Ha)|0;b=b+Math.imul(y,pa)|0;b=b+Math.imul(F,Ha)|0;a=a+Math.imul(F,pa)|0;aa=aa+Math.imul(w,va)|0;b=b+Math.imul(w,ka)|0;b=b+Math.imul(C,va)|0;a=a+Math.imul(C,ka)|0;aa=aa+Math.imul(z,ya)|0;b=b+Math.imul(z,xa)|0;b=b+Math.imul(x,ya)|0;a=a+Math.imul(x,xa)|0;aa=aa+Math.imul(u,f)|0;b=b+Math.imul(u,Ia)|0;b=b+Math.imul(A,f)|0;a=a+Math.imul(A,Ia)|0;u=(k+aa|0)+((b&8191)<<13)|0;k=(a+(b>>>13)|0)+(u>>>26)|0;u&=67108863;aa=
Math.imul(d,wa);b=Math.imul(d,Ba);b=b+Math.imul(m,wa)|0;a=Math.imul(m,Ba);aa=aa+Math.imul(B,Ha)|0;b=b+Math.imul(B,pa)|0;b=b+Math.imul(D,Ha)|0;a=a+Math.imul(D,pa)|0;aa=aa+Math.imul(y,va)|0;b=b+Math.imul(y,ka)|0;b=b+Math.imul(F,va)|0;a=a+Math.imul(F,ka)|0;aa=aa+Math.imul(w,ya)|0;b=b+Math.imul(w,xa)|0;b=b+Math.imul(C,ya)|0;a=a+Math.imul(C,xa)|0;aa=aa+Math.imul(z,f)|0;b=b+Math.imul(z,Ia)|0;b=b+Math.imul(x,f)|0;a=a+Math.imul(x,Ia)|0;z=(k+aa|0)+((b&8191)<<13)|0;k=(a+(b>>>13)|0)+(z>>>26)|0;z&=67108863;aa=
Math.imul(d,Ha);b=Math.imul(d,pa);b=b+Math.imul(m,Ha)|0;a=Math.imul(m,pa);aa=aa+Math.imul(B,va)|0;b=b+Math.imul(B,ka)|0;b=b+Math.imul(D,va)|0;a=a+Math.imul(D,ka)|0;aa=aa+Math.imul(y,ya)|0;b=b+Math.imul(y,xa)|0;b=b+Math.imul(F,ya)|0;a=a+Math.imul(F,xa)|0;aa=aa+Math.imul(w,f)|0;b=b+Math.imul(w,Ia)|0;b=b+Math.imul(C,f)|0;a=a+Math.imul(C,Ia)|0;w=(k+aa|0)+((b&8191)<<13)|0;k=(a+(b>>>13)|0)+(w>>>26)|0;w&=67108863;aa=Math.imul(d,va);b=Math.imul(d,ka);b=b+Math.imul(m,va)|0;a=Math.imul(m,ka);aa=aa+Math.imul(B,
ya)|0;b=b+Math.imul(B,xa)|0;b=b+Math.imul(D,ya)|0;a=a+Math.imul(D,xa)|0;aa=aa+Math.imul(y,f)|0;b=b+Math.imul(y,Ia)|0;b=b+Math.imul(F,f)|0;a=a+Math.imul(F,Ia)|0;y=(k+aa|0)+((b&8191)<<13)|0;k=(a+(b>>>13)|0)+(y>>>26)|0;y&=67108863;aa=Math.imul(d,ya);b=Math.imul(d,xa);b=b+Math.imul(m,ya)|0;a=Math.imul(m,xa);aa=aa+Math.imul(B,f)|0;b=b+Math.imul(B,Ia)|0;b=b+Math.imul(D,f)|0;a=a+Math.imul(D,Ia)|0;B=(k+aa|0)+((b&8191)<<13)|0;k=(a+(b>>>13)|0)+(B>>>26)|0;B&=67108863;aa=Math.imul(d,f);b=Math.imul(d,Ia);b=b+
Math.imul(m,f)|0;a=Math.imul(m,Ia);g=(k+aa|0)+((b&8191)<<13)|0;k=(a+(b>>>13)|0)+(g>>>26)|0;e[0]=Ea;e[1]=Ja;e[2]=Na;e[3]=Ra;e[4]=rb;e[5]=Eb;e[6]=dc;e[7]=pb;e[8]=Oa;e[9]=l;e[10]=r;e[11]=q;e[12]=n;e[13]=u;e[14]=z;e[15]=w;e[16]=y;e[17]=B;e[18]=g&67108863;0!==k&&(e[19]=k,c.length++);return c};Math.imul||(F=u);n.prototype.mulTo=function(b,a){var c=this.length+b.length;if(10===this.length&&10===b.length)b=F(this,b,a);else if(63>c)b=u(this,b,a);else if(1024>c){a.negative=b.negative^this.negative;a.length=
this.length+b.length;for(var d=0,f=c=0;f<a.length-1;f++){var e=c;c=0;d&=67108863;for(var k=Math.min(f,b.length-1),r=Math.max(0,f-this.length+1);r<=k;r++){var l=(this.words[f-r]|0)*(b.words[r]|0),g=l&67108863;e=e+(l/67108864|0)|0;g=g+d|0;d=g&67108863;e=e+(g>>>26)|0;c+=e>>>26;e&=67108863}a.words[f]=d;d=e}0!==d?a.words[f]=d:a.length--;b=a.strip()}else b=(new q).mulp(this,b,a);return b};q.prototype.makeRBT=function(b){for(var a=Array(b),c=n.prototype._countBits(b)-1,d=0;d<b;d++)a[d]=this.revBin(d,c,b);
return a};q.prototype.revBin=function(b,a,c){if(0===b||b===c-1)return b;for(var d=c=0;d<a;d++)c|=(b&1)<<a-d-1,b>>=1;return c};q.prototype.permute=function(b,a,c,d,f,e){for(var k=0;k<e;k++)d[k]=a[b[k]],f[k]=c[b[k]]};q.prototype.transform=function(b,a,c,d,f,e){this.permute(e,b,a,c,d,f);for(b=1;b<f;b<<=1){a=b<<1;e=Math.cos(2*Math.PI/a);for(var k=Math.sin(2*Math.PI/a),r=0;r<f;r+=a)for(var l=e,g=k,q=0;q<b;q++){var h=c[r+q],n=d[r+q],v=c[r+q+b],u=d[r+q+b],p=l*v-g*u;u=l*u+g*v;v=p;c[r+q]=h+v;d[r+q]=n+u;c[r+
q+b]=h-v;d[r+q+b]=n-u;q!==a&&(p=e*l-k*g,g=e*g+k*l,l=p)}}};q.prototype.guessLen13b=function(b,a){b=Math.max(a,b)|1;a=b&1;var c=0;for(b=b/2|0;b;b>>>=1)c++;return 1<<c+1+a};q.prototype.conjugate=function(b,a,c){if(!(1>=c))for(var d=0;d<c/2;d++){var f=b[d];b[d]=b[c-d-1];b[c-d-1]=f;f=a[d];a[d]=-a[c-d-1];a[c-d-1]=-f}};q.prototype.normalize13b=function(b,a){for(var c=0,d=0;d<a/2;d++)c=8192*Math.round(b[2*d+1]/a)+Math.round(b[2*d]/a)+c,b[d]=c&67108863,c=67108864>c?0:c/67108864|0;return b};q.prototype.convert13b=
function(b,a,c,d){for(var f=0,e=0;e<a;e++)f+=b[e]|0,c[2*e]=f&8191,f>>>=13,c[2*e+1]=f&8191,f>>>=13;for(e=2*a;e<d;++e)c[e]=0;h(0===f);h(0===(f&-8192))};q.prototype.stub=function(b){for(var a=Array(b),c=0;c<b;c++)a[c]=0;return a};q.prototype.mulp=function(b,a,c){var d=2*this.guessLen13b(b.length,a.length),f=this.makeRBT(d),e=this.stub(d),k=Array(d),r=Array(d),l=Array(d),g=Array(d),q=Array(d),h=Array(d),n=c.words;n.length=d;this.convert13b(b.words,b.length,k,d);this.convert13b(a.words,a.length,g,d);this.transform(k,
e,r,l,d,f);this.transform(g,e,q,h,d,f);for(k=0;k<d;k++)g=r[k]*q[k]-l[k]*h[k],l[k]=r[k]*h[k]+l[k]*q[k],r[k]=g;this.conjugate(r,l,d);this.transform(r,l,n,e,d,f);this.conjugate(n,e,d);this.normalize13b(n,d);c.negative=b.negative^a.negative;c.length=b.length+a.length;return c.strip()};n.prototype.mul=function(b){var a=new n(null);a.words=Array(this.length+b.length);return this.mulTo(b,a)};n.prototype.mulf=function(b){var a=new n(null);a.words=Array(this.length+b.length);return(new q).mulp(this,b,a)};
n.prototype.imul=function(b){return this.clone().mulTo(b,this)};n.prototype.imuln=function(b){h("number"===typeof b);h(67108864>b);for(var a=0,c=0;c<this.length;c++){var d=(this.words[c]|0)*b,f=(d&67108863)+(a&67108863);a>>=26;a+=d/67108864|0;a+=f>>>26;this.words[c]=f&67108863}0!==a&&(this.words[c]=a,this.length++);return this};n.prototype.muln=function(b){return this.clone().imuln(b)};n.prototype.sqr=function(){return this.mul(this)};n.prototype.isqr=function(){return this.imul(this.clone())};n.prototype.pow=
function(b){for(var a=Array(b.bitLength()),c=0;c<a.length;c++){var d=c%26;a[c]=(b.words[c/26|0]&1<<d)>>>d}if(0===a.length)return new n(1);b=this;for(c=0;c<a.length&&0===a[c];c++,b=b.sqr());if(++c<a.length)for(d=b.sqr();c<a.length;c++,d=d.sqr())0!==a[c]&&(b=b.mul(d));return b};n.prototype.iushln=function(b){h("number"===typeof b&&0<=b);var a=b%26;b=(b-a)/26;var c=67108863>>>26-a<<26-a,d;if(0!==a){var f=0;for(d=0;d<this.length;d++){var e=this.words[d]&c;this.words[d]=(this.words[d]|0)-e<<a|f;f=e>>>
26-a}f&&(this.words[d]=f,this.length++)}if(0!==b){for(d=this.length-1;0<=d;d--)this.words[d+b]=this.words[d];for(d=0;d<b;d++)this.words[d]=0;this.length+=b}return this.strip()};n.prototype.ishln=function(b){h(0===this.negative);return this.iushln(b)};n.prototype.iushrn=function(b,a,c){h("number"===typeof b&&0<=b);var d=b%26,f=Math.min((b-d)/26,this.length);b=67108863^67108863>>>d<<d;a=Math.max(0,(a?(a-a%26)/26:0)-f);if(c){for(var e=0;e<f;e++)c.words[e]=this.words[e];c.length=f}if(0!==f)if(this.length>
f)for(this.length-=f,e=0;e<this.length;e++)this.words[e]=this.words[e+f];else this.words[0]=0,this.length=1;f=0;for(e=this.length-1;0<=e&&(0!==f||e>=a);e--){var k=this.words[e]|0;this.words[e]=f<<26-d|k>>>d;f=k&b}c&&0!==f&&(c.words[c.length++]=f);0===this.length&&(this.words[0]=0,this.length=1);return this.strip()};n.prototype.ishrn=function(b,a,c){h(0===this.negative);return this.iushrn(b,a,c)};n.prototype.shln=function(b){return this.clone().ishln(b)};n.prototype.ushln=function(b){return this.clone().iushln(b)};
n.prototype.shrn=function(b){return this.clone().ishrn(b)};n.prototype.ushrn=function(b){return this.clone().iushrn(b)};n.prototype.testn=function(b){h("number"===typeof b&&0<=b);var a=b%26;b=(b-a)/26;return this.length<=b?!1:!!(this.words[b]&1<<a)};n.prototype.imaskn=function(b){h("number"===typeof b&&0<=b);var a=b%26;b=(b-a)/26;h(0===this.negative,"imaskn works only with positive numbers");if(this.length<=b)return this;0!==a&&b++;this.length=Math.min(b,this.length);0!==a&&(this.words[this.length-
1]&=67108863^67108863>>>a<<a);return this.strip()};n.prototype.maskn=function(b){return this.clone().imaskn(b)};n.prototype.iaddn=function(b){h("number"===typeof b);h(67108864>b);if(0>b)return this.isubn(-b);if(0!==this.negative){if(1===this.length&&(this.words[0]|0)<b)return this.words[0]=b-(this.words[0]|0),this.negative=0,this;this.negative=0;this.isubn(b);this.negative=1;return this}return this._iaddn(b)};n.prototype._iaddn=function(b){this.words[0]+=b;for(b=0;b<this.length&&67108864<=this.words[b];b++)this.words[b]-=
67108864,b===this.length-1?this.words[b+1]=1:this.words[b+1]++;this.length=Math.max(this.length,b+1);return this};n.prototype.isubn=function(b){h("number"===typeof b);h(67108864>b);if(0>b)return this.iaddn(-b);if(0!==this.negative)return this.negative=0,this.iaddn(b),this.negative=1,this;this.words[0]-=b;if(1===this.length&&0>this.words[0])this.words[0]=-this.words[0],this.negative=1;else for(b=0;b<this.length&&0>this.words[b];b++)this.words[b]+=67108864,--this.words[b+1];return this.strip()};n.prototype.addn=
function(b){return this.clone().iaddn(b)};n.prototype.subn=function(b){return this.clone().isubn(b)};n.prototype.iabs=function(){this.negative=0;return this};n.prototype.abs=function(){return this.clone().iabs()};n.prototype._ishlnsubmul=function(b,a,c){var d;this._expand(b.length+c);var f=0;for(d=0;d<b.length;d++){var e=(this.words[d+c]|0)+f;f=(b.words[d]|0)*a;e-=f&67108863;f=(e>>26)-(f/67108864|0);this.words[d+c]=e&67108863}for(;d<this.length-c;d++)e=(this.words[d+c]|0)+f,f=e>>26,this.words[d+c]=
e&67108863;if(0===f)return this.strip();h(-1===f);for(d=f=0;d<this.length;d++)e=-(this.words[d]|0)+f,f=e>>26,this.words[d]=e&67108863;this.negative=1;return this.strip()};n.prototype._wordDiv=function(b,a){var c=this.clone(),d=b,f=d.words[d.length-1]|0;b=26-this._countBits(f);0!==b&&(d=d.ushln(b),c.iushln(b),f=d.words[d.length-1]|0);var e=c.length-d.length;if("mod"!==a){var k=new n(null);k.length=e+1;k.words=Array(k.length);for(var r=0;r<k.length;r++)k.words[r]=0}r=c.clone()._ishlnsubmul(d,1,e);0===
r.negative&&(c=r,k&&(k.words[e]=1));for(--e;0<=e;e--){r=67108864*(c.words[d.length+e]|0)+(c.words[d.length+e-1]|0);r=Math.min(r/f|0,67108863);for(c._ishlnsubmul(d,r,e);0!==c.negative;)r--,c.negative=0,c._ishlnsubmul(d,1,e),c.isZero()||(c.negative^=1);k&&(k.words[e]=r)}k&&k.strip();c.strip();"div"!==a&&0!==b&&c.iushrn(b);return{div:k||null,mod:c}};n.prototype.divmod=function(b,a,c){h(!b.isZero());if(this.isZero())return{div:new n(0),mod:new n(0)};var d;if(0!==this.negative&&0===b.negative){var f=this.neg().divmod(b,
a);"mod"!==a&&(d=f.div.neg());if("div"!==a){var e=f.mod.neg();c&&0!==e.negative&&e.iadd(b)}return{div:d,mod:e}}return 0===this.negative&&0!==b.negative?(f=this.divmod(b.neg(),a),"mod"!==a&&(d=f.div.neg()),{div:d,mod:f.mod}):0!==(this.negative&b.negative)?(f=this.neg().divmod(b.neg(),a),"div"!==a&&(e=f.mod.neg(),c&&0!==e.negative&&e.isub(b)),{div:f.div,mod:e}):b.length>this.length||0>this.cmp(b)?{div:new n(0),mod:this}:1===b.length?"div"===a?{div:this.divn(b.words[0]),mod:null}:"mod"===a?{div:null,
mod:new n(this.modn(b.words[0]))}:{div:this.divn(b.words[0]),mod:new n(this.modn(b.words[0]))}:this._wordDiv(b,a)};n.prototype.div=function(b){return this.divmod(b,"div",!1).div};n.prototype.mod=function(b){return this.divmod(b,"mod",!1).mod};n.prototype.umod=function(b){return this.divmod(b,"mod",!0).mod};n.prototype.divRound=function(b){var a=this.divmod(b);if(a.mod.isZero())return a.div;var c=0!==a.div.negative?a.mod.isub(b):a.mod,d=b.ushrn(1);b=b.andln(1);c=c.cmp(d);return 0>c||1===b&&0===c?a.div:
0!==a.div.negative?a.div.isubn(1):a.div.iaddn(1)};n.prototype.modn=function(b){h(67108863>=b);for(var a=67108864%b,c=0,d=this.length-1;0<=d;d--)c=(a*c+(this.words[d]|0))%b;return c};n.prototype.idivn=function(b){h(67108863>=b);for(var a=0,c=this.length-1;0<=c;c--)a=(this.words[c]|0)+67108864*a,this.words[c]=a/b|0,a%=b;return this.strip()};n.prototype.divn=function(b){return this.clone().idivn(b)};n.prototype.egcd=function(b){h(0===b.negative);h(!b.isZero());var a=this,c=b.clone();a=0!==a.negative?
a.umod(b):a.clone();b=new n(1);for(var d=new n(0),f=new n(0),e=new n(1),k=0;a.isEven()&&c.isEven();)a.iushrn(1),c.iushrn(1),++k;for(var r=c.clone(),l=a.clone();!a.isZero();){for(var g=0,q=1;0===(a.words[0]&q)&&26>g;++g,q<<=1);if(0<g)for(a.iushrn(g);0<g--;){if(b.isOdd()||d.isOdd())b.iadd(r),d.isub(l);b.iushrn(1);d.iushrn(1)}g=0;for(q=1;0===(c.words[0]&q)&&26>g;++g,q<<=1);if(0<g)for(c.iushrn(g);0<g--;){if(f.isOdd()||e.isOdd())f.iadd(r),e.isub(l);f.iushrn(1);e.iushrn(1)}0<=a.cmp(c)?(a.isub(c),b.isub(f),
d.isub(e)):(c.isub(a),f.isub(b),e.isub(d))}return{a:f,b:e,gcd:c.iushln(k)}};n.prototype._invmp=function(b){h(0===b.negative);h(!b.isZero());var a=this,c=b.clone();a=0!==a.negative?a.umod(b):a.clone();for(var d=new n(1),f=new n(0),e=c.clone();0<a.cmpn(1)&&0<c.cmpn(1);){for(var k=0,r=1;0===(a.words[0]&r)&&26>k;++k,r<<=1);if(0<k)for(a.iushrn(k);0<k--;)d.isOdd()&&d.iadd(e),d.iushrn(1);k=0;for(r=1;0===(c.words[0]&r)&&26>k;++k,r<<=1);if(0<k)for(c.iushrn(k);0<k--;)f.isOdd()&&f.iadd(e),f.iushrn(1);0<=a.cmp(c)?
(a.isub(c),d.isub(f)):(c.isub(a),f.isub(d))}a=0===a.cmpn(1)?d:f;0>a.cmpn(0)&&a.iadd(b);return a};n.prototype.gcd=function(b){if(this.isZero())return b.abs();if(b.isZero())return this.abs();var a=this.clone();b=b.clone();a.negative=0;for(var c=b.negative=0;a.isEven()&&b.isEven();c++)a.iushrn(1),b.iushrn(1);do{for(;a.isEven();)a.iushrn(1);for(;b.isEven();)b.iushrn(1);var d=a.cmp(b);if(0>d)d=a,a=b,b=d;else if(0===d||0===b.cmpn(1))break;a.isub(b)}while(1);return b.iushln(c)};n.prototype.invm=function(b){return this.egcd(b).a.umod(b)};
n.prototype.isEven=function(){return 0===(this.words[0]&1)};n.prototype.isOdd=function(){return 1===(this.words[0]&1)};n.prototype.andln=function(b){return this.words[0]&b};n.prototype.bincn=function(b){h("number"===typeof b);var a=b%26;b=(b-a)/26;a=1<<a;if(this.length<=b)return this._expand(b+1),this.words[b]|=a,this;for(;0!==a&&b<this.length;b++){var c=this.words[b]|0;c+=a;a=c>>>26;c&=67108863;this.words[b]=c}0!==a&&(this.words[b]=a,this.length++);return this};n.prototype.isZero=function(){return 1===
this.length&&0===this.words[0]};n.prototype.cmpn=function(b){var a=0>b;if(0!==this.negative&&!a)return-1;if(0===this.negative&&a)return 1;this.strip();1<this.length?b=1:(a&&(b=-b),h(67108863>=b,"Number is too big"),a=this.words[0]|0,b=a===b?0:a<b?-1:1);return 0!==this.negative?-b|0:b};n.prototype.cmp=function(b){if(0!==this.negative&&0===b.negative)return-1;if(0===this.negative&&0!==b.negative)return 1;b=this.ucmp(b);return 0!==this.negative?-b|0:b};n.prototype.ucmp=function(b){if(this.length>b.length)return 1;
if(this.length<b.length)return-1;for(var a=0,c=this.length-1;0<=c;c--){var d=this.words[c]|0,f=b.words[c]|0;if(d!==f){d<f?a=-1:d>f&&(a=1);break}}return a};n.prototype.gtn=function(b){return 1===this.cmpn(b)};n.prototype.gt=function(b){return 1===this.cmp(b)};n.prototype.gten=function(b){return 0<=this.cmpn(b)};n.prototype.gte=function(b){return 0<=this.cmp(b)};n.prototype.ltn=function(b){return-1===this.cmpn(b)};n.prototype.lt=function(b){return-1===this.cmp(b)};n.prototype.lten=function(b){return 0>=
this.cmpn(b)};n.prototype.lte=function(b){return 0>=this.cmp(b)};n.prototype.eqn=function(b){return 0===this.cmpn(b)};n.prototype.eq=function(b){return 0===this.cmp(b)};n.red=function(b){return new v(b)};n.prototype.toRed=function(b){h(!this.red,"Already a number in reduction context");h(0===this.negative,"red works only with positives");return b.convertTo(this)._forceRed(b)};n.prototype.fromRed=function(){h(this.red,"fromRed works only with numbers in reduction context");return this.red.convertFrom(this)};
n.prototype._forceRed=function(b){this.red=b;return this};n.prototype.forceRed=function(b){h(!this.red,"Already a number in reduction context");return this._forceRed(b)};n.prototype.redAdd=function(b){h(this.red,"redAdd works only with red numbers");return this.red.add(this,b)};n.prototype.redIAdd=function(b){h(this.red,"redIAdd works only with red numbers");return this.red.iadd(this,b)};n.prototype.redSub=function(b){h(this.red,"redSub works only with red numbers");return this.red.sub(this,b)};n.prototype.redISub=
function(b){h(this.red,"redISub works only with red numbers");return this.red.isub(this,b)};n.prototype.redShl=function(b){h(this.red,"redShl works only with red numbers");return this.red.shl(this,b)};n.prototype.redMul=function(b){h(this.red,"redMul works only with red numbers");this.red._verify2(this,b);return this.red.mul(this,b)};n.prototype.redIMul=function(b){h(this.red,"redMul works only with red numbers");this.red._verify2(this,b);return this.red.imul(this,b)};n.prototype.redSqr=function(){h(this.red,
"redSqr works only with red numbers");this.red._verify1(this);return this.red.sqr(this)};n.prototype.redISqr=function(){h(this.red,"redISqr works only with red numbers");this.red._verify1(this);return this.red.isqr(this)};n.prototype.redSqrt=function(){h(this.red,"redSqrt works only with red numbers");this.red._verify1(this);return this.red.sqrt(this)};n.prototype.redInvm=function(){h(this.red,"redInvm works only with red numbers");this.red._verify1(this);return this.red.invm(this)};n.prototype.redNeg=
function(){h(this.red,"redNeg works only with red numbers");this.red._verify1(this);return this.red.neg(this)};n.prototype.redPow=function(b){h(this.red&&!b.red,"redPow(normalNum)");this.red._verify1(this);return this.red.pow(this,b)};var B={k256:null,p224:null,p192:null,p25519:null};d.prototype._tmp=function(){var b=new n(null);b.words=Array(Math.ceil(this.n/13));return b};d.prototype.ireduce=function(b){do{this.split(b,this.tmp);b=this.imulK(b);b=b.iadd(this.tmp);var a=b.bitLength()}while(a>this.n);
a=a<this.n?-1:b.ucmp(this.p);0===a?(b.words[0]=0,b.length=1):0<a?b.isub(this.p):b.strip();return b};d.prototype.split=function(b,a){b.iushrn(this.n,0,a)};d.prototype.imulK=function(b){return b.imul(this.k)};e(f,d);f.prototype.split=function(b,a){for(var c=Math.min(b.length,9),d=0;d<c;d++)a.words[d]=b.words[d];a.length=c;if(9>=b.length)b.words[0]=0,b.length=1;else{c=b.words[9];a.words[a.length++]=c&4194303;for(d=10;d<b.length;d++)a=b.words[d]|0,b.words[d-10]=(a&4194303)<<4|c>>>22,c=a;c>>>=22;b.words[d-
10]=c;b.length=0===c&&10<b.length?b.length-10:b.length-9}};f.prototype.imulK=function(b){b.words[b.length]=0;b.words[b.length+1]=0;b.length+=2;for(var a=0,c=0;c<b.length;c++){var d=b.words[c]|0;a+=977*d;b.words[c]=a&67108863;a=64*d+(a/67108864|0)}0===b.words[b.length-1]&&(b.length--,0===b.words[b.length-1]&&b.length--);return b};e(c,d);e(k,d);e(r,d);r.prototype.imulK=function(b){for(var a=0,c=0;c<b.length;c++){a=19*(b.words[c]|0)+a;var d=a&67108863;a>>>=26;b.words[c]=d}0!==a&&(b.words[b.length++]=
a);return b};n._prime=function(b){if(B[b])return B[b];if("k256"===b)var a=new f;else if("p224"===b)a=new c;else if("p192"===b)a=new k;else if("p25519"===b)a=new r;else throw Error("Unknown prime "+b);return B[b]=a};v.prototype._verify1=function(b){h(0===b.negative,"red works only with positives");h(b.red,"red works only with red numbers")};v.prototype._verify2=function(b,a){h(0===(b.negative|a.negative),"red works only with positives");h(b.red&&b.red===a.red,"red works only with red numbers")};v.prototype.imod=
function(b){return this.prime?this.prime.ireduce(b)._forceRed(this):b.umod(this.m)._forceRed(this)};v.prototype.neg=function(b){return b.isZero()?b.clone():this.m.sub(b)._forceRed(this)};v.prototype.add=function(b,a){this._verify2(b,a);b=b.add(a);0<=b.cmp(this.m)&&b.isub(this.m);return b._forceRed(this)};v.prototype.iadd=function(b,a){this._verify2(b,a);b=b.iadd(a);0<=b.cmp(this.m)&&b.isub(this.m);return b};v.prototype.sub=function(b,a){this._verify2(b,a);b=b.sub(a);0>b.cmpn(0)&&b.iadd(this.m);return b._forceRed(this)};
v.prototype.isub=function(b,a){this._verify2(b,a);b=b.isub(a);0>b.cmpn(0)&&b.iadd(this.m);return b};v.prototype.shl=function(b,a){this._verify1(b);return this.imod(b.ushln(a))};v.prototype.imul=function(b,a){this._verify2(b,a);return this.imod(b.imul(a))};v.prototype.mul=function(b,a){this._verify2(b,a);return this.imod(b.mul(a))};v.prototype.isqr=function(b){return this.imul(b,b.clone())};v.prototype.sqr=function(b){return this.mul(b,b)};v.prototype.sqrt=function(b){if(b.isZero())return b.clone();
var a=this.m.andln(3);h(1===a%2);if(3===a)return a=this.m.add(new n(1)).iushrn(2),this.pow(b,a);for(var c=this.m.subn(1),d=0;!c.isZero()&&0===c.andln(1);)d++,c.iushrn(1);h(!c.isZero());a=(new n(1)).toRed(this);var f=a.redNeg(),e=this.m.subn(1).iushrn(1),k=this.m.bitLength();for(k=(new n(2*k*k)).toRed(this);0!==this.pow(k,e).cmp(f);)k.redIAdd(f);e=this.pow(k,c);f=this.pow(b,c.addn(1).iushrn(1));b=this.pow(b,c);for(c=d;0!==b.cmp(a);){k=b;for(d=0;0!==k.cmp(a);d++)k=k.redSqr();h(d<c);e=this.pow(e,(new n(1)).iushln(c-
d-1));f=f.redMul(e);e=e.redSqr();b=b.redMul(e);c=d}return f};v.prototype.invm=function(b){b=b._invmp(this.m);return 0!==b.negative?(b.negative=0,this.imod(b).redNeg()):this.imod(b)};v.prototype.pow=function(b,a){if(a.isZero())return(new n(1)).toRed(this);if(0===a.cmpn(1))return b.clone();var c=Array(16);c[0]=(new n(1)).toRed(this);c[1]=b;for(var d=2;d<c.length;d++)c[d]=this.mul(c[d-1],b);b=c[0];var f=0,e=0,k=a.bitLength()%26;0===k&&(k=26);for(d=a.length-1;0<=d;d--){var r=a.words[d];for(--k;0<=k;k--){var l=
r>>k&1;b!==c[0]&&(b=this.sqr(b));if(0===l&&0===f)e=0;else if(f<<=1,f|=l,e++,4===e||0===d&&0===k)b=this.mul(b,c[f]),f=e=0}k=26}return b};v.prototype.convertTo=function(b){var a=b.umod(this.m);return a===b?a.clone():a};v.prototype.convertFrom=function(b){b=b.clone();b.red=null;return b};n.mont=function(b){return new z(b)};e(z,v);z.prototype.convertTo=function(b){return this.imod(b.ushln(this.shift))};z.prototype.convertFrom=function(b){b=this.imod(b.mul(this.rinv));b.red=null;return b};z.prototype.imul=
function(b,a){if(b.isZero()||a.isZero())return b.words[0]=0,b.length=1,b;b=b.imul(a);a=b.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m);a=b=b.isub(a).iushrn(this.shift);0<=b.cmp(this.m)?a=b.isub(this.m):0>b.cmpn(0)&&(a=b.iadd(this.m));return a._forceRed(this)};z.prototype.mul=function(b,a){if(b.isZero()||a.isZero())return(new n(0))._forceRed(this);b=b.mul(a);a=b.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m);a=b=b.isub(a).iushrn(this.shift);0<=b.cmp(this.m)?a=b.isub(this.m):
0>b.cmpn(0)&&(a=b.iadd(this.m));return a._forceRed(this)};z.prototype.invm=function(b){return this.imod(b._invmp(this.m).mul(this.r2))._forceRed(this)}})("undefined"===typeof t||t,this)},{buffer:93}],85:[function(a,t,m){t.exports=function(a){var g,h,e,n=a.length;for(g=h=0;g<n;++g)h+=a[g].length;var b=Array(h),l=0;for(g=0;g<n;++g){var u=a[g],q=u.length;for(h=0;h<q;++h){var d=b[l++]=Array(q-1),f=0;for(e=0;e<q;++e)e!==h&&(d[f++]=u[e]);h&1&&(e=d[1],d[1]=d[0],d[0]=e)}}return b}},{}],86:[function(a,t,m){function p(b,
a,d,f){for(var c=0,e=0,r=0,l=b.length;r<l;++r){var g=b[r],q;a:{for(q=0;q<a;++q)if(!(g[q]<=g[q+a])){q=!0;break a}q=!1}if(!q){for(q=0;q<2*a;++q)d[c++]=g[q];f[e++]=r}}return e}function g(a,l,d,f){var c=a.length,k=l.length;if(!(0>=c||0>=k)){var r=a[0].length>>>1;if(!(0>=r)){var g=e.mallocDouble(2*r*c),q=e.mallocInt32(c);c=p(a,r,g,q);if(0<c){if(1===r&&f){n.init(c);var h=n.sweepComplete(r,d,0,c,g,q,0,c,g,q)}else{a=e.mallocDouble(2*r*k);var u=e.mallocInt32(k);k=p(l,r,a,u);0<k&&(n.init(c+k),h=1===r?n.sweepBipartite(r,
d,0,c,g,q,0,k,a,u):b(r,d,f,c,g,q,k,a,u),e.free(a),e.free(u))}e.free(g);e.free(q)}return h}}}function h(b,a){l.push([b,a])}t.exports=function(b,a,d){switch(arguments.length){case 1:return l=[],g(b,b,h,!0),l;case 2:if("function"===typeof a)return g(b,b,a,!0);l=[];g(b,a,h,!1);return l;case 3:return g(b,a,d,!1);default:throw Error("box-intersect: Invalid arguments");}};var e=a("typedarray-pool"),n=a("./lib/sweep"),b=a("./lib/intersect"),l},{"./lib/intersect":88,"./lib/sweep":92,"typedarray-pool":529}],
87:[function(a,t,m){function p(a){function e(e,d){var f="bruteForce"+(e?"Red":"Blue")+(d?"Flip":"")+(a?"Full":""),c=["function ",f,"(",g.join(),"){","var ","es","\x3d2*","d",";"],k="for(var j\x3dbs,bp\x3des*bs;j\x3cbe;++j,bp+\x3des){var y0\x3dbb[ax+bp],"+(a?"y1\x3dbb[ax+bp+d],":"")+"yi\x3dbi[j];";e?c.push("for(var i\x3drs,rp\x3des*rs;i\x3cre;++i,rp+\x3des){var x0\x3drb[ax+rp],x1\x3drb[ax+rp+d],xi\x3dri[i];","Q",":",k):c.push(k,"Q",":","for(var i\x3drs,rp\x3des*rs;i\x3cre;++i,rp+\x3des){var x0\x3drb[ax+rp],x1\x3drb[ax+rp+d],xi\x3dri[i];");
a?c.push("if(y1\x3cx0||x1\x3cy0)continue;"):d?c.push("if(y0\x3c\x3dx0||x1\x3cy0)continue;"):c.push("if(y0\x3cx0||x1\x3cy0)continue;");c.push("for(var k\x3dax+1;k\x3cd;++k){var r0\x3drb[k+rp],r1\x3drb[k+d+rp],b0\x3dbb[k+bp],b1\x3dbb[k+d+bp];if(r1\x3cb0||b1\x3cr0)continue Q;}var rv\x3dvv(");d?c.push("yi,xi"):c.push("xi,yi");c.push(");if(rv!\x3d\x3dvoid 0)return rv;}}}");e=c.join("");b.push(e);u.push("return "+f+"("+g.join()+");")}var h="bruteForce"+(a?"Full":"Partial"),b=[],l=g.slice();a||l.splice(3,
0,"fp");var u=["function "+h+"("+l.join()+"){"];u.push("if(re-rs\x3ebe-bs){");a?(e(!0,!1),u.push("}else{"),e(!1,!1)):(u.push("if(fp){"),e(!0,!0),u.push("}else{"),e(!0,!1),u.push("}}else{if(fp){"),e(!1,!0),u.push("}else{"),e(!1,!1),u.push("}"));u.push("}}return "+h);h=b.join("")+u.join("");return(new Function(h))()}var g="d ax vv rs re rb ri bs be bb bi".split(" ");m.partial=p(!1);m.full=p(!0)},{}],88:[function(a,t,m){function p(b,a,c,d,f,e,k,r,l){var g=A*b;w[g]=a;w[g+1]=c;w[g+2]=d;w[g+3]=f;w[g+4]=
e;w[g+5]=k;b*=y;x[b]=r;x[b+1]=l}t.exports=function(a,B,C,m,G,t,E,K,I){var J=8*h.log2(m+E+1)*(a+1)|0,F=h.nextPow2(A*J);w.length<F&&(g.free(w),w=g.mallocInt32(F));J=h.nextPow2(y*J);x<J&&(g.free(x),x=g.mallocDouble(J));J=0;F=2*a;p(J++,0,0,m,0,E,C?16:0,-Infinity,Infinity);for(C||p(J++,0,0,E,0,m,1,-Infinity,Infinity);0<J;){--J;C=J*A;var D=w[C];E=w[C+1];var H=w[C+2],O=w[C+3],R=w[C+4];C=w[C+5];m=J*y;var T=x[m],P=x[m+1],S=C&1,ba=!!(C&16),da=G,ca=t,Y=K;m=I;S&&(da=K,ca=I,Y=G,m=t);if(C&2&&(H=k(a,D,E,H,da,ca,
P),E>=H))continue;if(C&4&&(E=r(a,D,E,H,da,ca,T),E>=H))continue;C=H-E;var W=R-O;if(ba){if(a*C*(C+W)<d){var ea=b.scanComplete(a,D,B,E,H,da,ca,O,R,Y,m);if(void 0!==ea)return ea;continue}}else if(a*Math.min(C,W)<u){ea=e(a,D,B,S,E,H,da,ca,O,R,Y,m);if(void 0!==ea)return ea;continue}else if(a*C*W<q){ea=b.scanBipartite(a,D,B,S,E,H,da,ca,O,R,Y,m);if(void 0!==ea)return ea;continue}C=f(a,D,E,H,da,ca,T,P);if(E<C)if(a*(C-E)<u){if(ea=n(a,D+1,B,E,C,da,ca,O,R,Y,m),void 0!==ea)return ea}else if(D===a-2){if(ea=S?b.sweepBipartite(a,
B,O,R,Y,m,E,C,da,ca):b.sweepBipartite(a,B,E,C,da,ca,O,R,Y,m),void 0!==ea)return ea}else p(J++,D+1,E,C,O,R,S,-Infinity,Infinity),p(J++,D+1,O,R,E,C,S^1,-Infinity,Infinity);if(C<H)if(E=l(a,D,O,R,Y,m),ea=Y[F*E+D],W=c(a,D,E,R,Y,m,ea),W<R&&p(J++,D,C,H,W,R,(S|4)+(ba?16:0),ea,P),O<E&&p(J++,D,C,H,O,E,(S|2)+(ba?16:0),T,ea),E+1===W){if(ba)a:{O=a;R=B;m=m[E];S=2*O;E*=S;T=Y[E+D];P=C;C*=S;b:for(;P<H;++P,C+=S)if(ba=ca[P],ba!==m&&(W=da[C+D],ea=da[C+D+O],!(T<W||ea<T))){for(var U=D+1;U<O;++U){W=da[C+U];ea=da[C+U+O];
var na=Y[E+U+O];if(ea<Y[E+U]||na<W)continue b}ba=R(ba,m);if(void 0!==ba){ea=ba;break a}}ea=void 0}else a:{O=a;R=B;m=m[E];T=2*O;E*=T;P=Y[E+D];ba=C;C*=T;b:for(;ba<H;++ba,C+=T)if(W=da[C+D],ea=da[C+D+O],!(P<W||ea<P||S&&P===W)){U=ca[ba];for(na=D+1;na<O;++na){W=da[C+na];ea=da[C+na+O];var X=Y[E+na+O];if(ea<Y[E+na]||X<W)continue b}W=S?R(m,U):R(U,m);if(void 0!==W){ea=W;break a}}ea=void 0}if(void 0!==ea)return ea}else if(E<W)if(ba){if(H=v(a,D,C,H,da,ca,ea),C<H)if(O=c(a,D,C,H,da,ca,ea),D===a-2){if(C<O&&(ea=
b.sweepComplete(a,B,C,O,da,ca,E,W,Y,m),void 0!==ea)||O<H&&(ea=b.sweepBipartite(a,B,O,H,da,ca,E,W,Y,m),void 0!==ea))return ea}else C<O&&p(J++,D+1,C,O,E,W,16,-Infinity,Infinity),O<H&&(p(J++,D+1,O,H,E,W,0,-Infinity,Infinity),p(J++,D+1,E,W,O,H,1,-Infinity,Infinity))}else H=S?z(a,D,C,H,da,ca,ea):v(a,D,C,H,da,ca,ea),C<H&&(D===a-2?S?b.sweepBipartite(a,B,E,W,Y,m,C,H,da,ca):b.sweepBipartite(a,B,C,H,da,ca,E,W,Y,m):(p(J++,D+1,C,H,E,W,S,-Infinity,Infinity),p(J++,D+1,E,W,C,H,S^1,-Infinity,Infinity)))}};var g=
a("typedarray-pool"),h=a("bit-twiddle");t=a("./brute");var e=t.partial,n=t.full,b=a("./sweep"),l=a("./median");a=a("./partition");var u=128,q=4194304,d=4194304,f=a("!(lo\x3e\x3dp0)\x26\x26!(p1\x3e\x3dhi)",["p0","p1"]),c=a("lo\x3d\x3d\x3dp0",["p0"]),k=a("lo\x3cp0",["p0"]),r=a("hi\x3c\x3dp0",["p0"]),v=a("lo\x3c\x3dp0\x26\x26p0\x3c\x3dhi",["p0"]),z=a("lo\x3cp0\x26\x26p0\x3c\x3dhi",["p0"]),A=6,y=2,w=g.mallocInt32(1024),x=g.mallocDouble(1024)},{"./brute":87,"./median":89,"./partition":90,"./sweep":92,
"bit-twiddle":82,"typedarray-pool":529}],89:[function(a,t,m){t.exports=function(a,e,n,b,l,u){if(b<=n+1)return n;var q=n,d=b;b=b+n>>>1;for(var f=2*a,c,k;q<d;){if(d-q<g){c=e;k=l;for(var r=u,h=2*a,z=h*(q+1)+c,A=q+1;A<d;++A,z+=h)for(var y=k[z],w=A,x=h*(A-1);w>q&&k[x+c]>y;--w,x-=h){for(var F=x,B=x+h,C=0;C<h;++C,++F,++B){var m=k[F];k[F]=k[B];k[B]=m}F=r[w];r[w]=r[w-1];r[w-1]=F}break}z=d-q;c=Math.random()*z+q|0;k=l[f*c+e];h=Math.random()*z+q|0;r=l[f*h+e];A=Math.random()*z+q|0;z=l[f*A+e];k<=r?z>=r?(c=h,k=
r):k>=z||(c=A,k=z):r>=z?(c=h,k=r):z>=k||(c=A,k=z);r=f*(d-1);h=f*c;for(z=0;z<f;++z,++r,++h)A=l[r],l[r]=l[h],l[h]=A;r=u[d-1];u[d-1]=u[c];u[c]=r;c=p(a,e,q,d-1,l,u,k);r=f*(d-1);h=f*c;for(z=0;z<f;++z,++r,++h)A=l[r],l[r]=l[h],l[h]=A;r=u[d-1];u[d-1]=u[c];u[c]=r;if(b<c){for(d=c-1;q<d&&l[f*(d-1)+e]===k;)--d;d+=1}else if(c<b)for(q=c+1;q<d&&l[f*q+e]===k;)q+=1;else break}return p(a,e,n,b,l,u,l[f*b+e])};var p=a("./partition")("lo\x3cp0",["p0"]),g=8},{"./partition":90}],90:[function(a,t,m){t.exports=function(a,
h){h="abcdef".split("").concat(h);var e=[];0<=a.indexOf("lo")&&e.push("lo\x3de[k+n]");0<=a.indexOf("hi")&&e.push("hi\x3de[k+o]");h.push(p.replace("_",e.join()).replace("$",a));return Function.apply(void 0,h)};var p="for(var j\x3d2*a,k\x3dj*c,l\x3dk,m\x3dc,n\x3db,o\x3da+b,p\x3dc;d\x3ep;++p,k+\x3dj){var _;if($)if(m\x3d\x3d\x3dp)m+\x3d1,l+\x3dj;else{for(var s\x3d0;j\x3es;++s){var t\x3de[k+s];e[k+s]\x3de[l],e[l++]\x3dt}var u\x3df[p];f[p]\x3df[m],f[m++]\x3du}}return m"},{}],91:[function(a,t,m){function p(b,
a,f){for(var c=2*(b+1),d=b+1;d<=a;++d){for(var e=f[c++],l=f[c++],g=d,q=c-2;g-- >b;){var h=f[q-2],n=f[q-1];if(h<e)break;else if(h===e&&n<l)break;f[q]=h;f[q+1]=n;q-=2}f[q]=e;f[q+1]=l}}function g(b,a,f){b*=2;a*=2;var c=f[b],d=f[b+1];f[b]=f[a];f[b+1]=f[a+1];f[a]=c;f[a+1]=d}function h(b,a,f){b*=2;a*=2;f[b]=f[a];f[b+1]=f[a+1]}function e(b,a,f,c,e){b*=2;a*=2;e[b]=e[a];e[a]=f;e[b+1]=e[a+1];e[a+1]=c}function n(b,a,f){b*=2;a*=2;var c=f[b],d=f[a];return c<d?!1:c===d?f[b+1]>f[a+1]:!0}function b(b,a,f,c){b*=2;
var d=c[b];return d<a?!0:d===a?c[b+1]<f:!1}function l(a,d,f){var c=(d-a+1)/6|0,k=a+c,r=d-c,q=a+d>>1,z=q-c,A=q+c,y=k,w=z,x=q,F=A,B=r;c=a+1;var C=d-1;if(n(y,w,f)){var m=y;y=w;w=m}n(F,B,f)&&(m=F,F=B,B=m);n(y,x,f)&&(m=y,y=x,x=m);n(w,x,f)&&(m=w,w=x,x=m);n(y,F,f)&&(m=y,y=F,F=m);n(x,F,f)&&(m=x,x=F,F=m);n(w,B,f)&&(m=w,w=B,B=m);n(w,x,f)&&(m=w,w=x,x=m);n(F,B,f)&&(m=F,F=B,B=m);m=f[2*w];w=f[2*w+1];var G=f[2*F];F=f[2*F+1];y*=2;x*=2;B*=2;k*=2;q*=2;r*=2;for(var t=0;2>t;++t){var E=f[x+t],K=f[B+t];f[k+t]=f[y+t];f[q+
t]=E;f[r+t]=K}h(z,a,f);h(A,d,f);for(z=c;z<=C;++z)if(b(z,m,w,f))z!==c&&g(z,c,f),++c;else if(!b(z,G,F,f))for(;;)if(b(C,G,F,f)){b(C,m,w,f)?(A=z,r=c,q=C,y=f,A*=2,r*=2,q*=2,k=y[A],x=y[A+1],y[A]=y[r],y[A+1]=y[r+1],y[r]=y[q],y[r+1]=y[q+1],y[q]=k,y[q+1]=x,++c):g(z,C,f);--C;break}else if(--C<z)break;e(a,c-1,m,w,f);e(d,C+1,G,F,f);c-2-a<=u?p(a,c-2,f):l(a,c-2,f);d-(C+2)<=u?p(C+2,d,f):l(C+2,d,f);C-c<=u?p(c,C,f):l(c,C,f)}t.exports=function(b,a){a<=4*u?p(0,a-1,b):l(0,a-1,b)};var u=32},{}],92:[function(a,t,m){function p(b,
a,c,d){d=a[d];c=b[c-1];b[d]=c;a[c]=d}t.exports={init:function(a){a=h.nextPow2(a);b.length<a&&(g.free(b),b=g.mallocInt32(a));l.length<a&&(g.free(l),l=g.mallocInt32(a));u.length<a&&(g.free(u),u=g.mallocInt32(a));q.length<a&&(g.free(q),q=g.mallocInt32(a));d.length<a&&(g.free(d),d=g.mallocInt32(a));f.length<a&&(g.free(f),f=g.mallocInt32(a));a*=8;c.length<a&&(g.free(c),c=g.mallocDouble(a))},sweepBipartite:function(a,d,f,g,h,y,w,x,F,B){var k=0,r=2*a;--a;for(var v=r-1;f<g;++f){var z=y[f],A=r*f;c[k++]=h[A+
a];c[k++]=-(z+1);c[k++]=h[A+v];c[k++]=z}for(f=w;f<x;++f)z=B[f]+n,g=r*f,c[k++]=F[g+a],c[k++]=-z,c[k++]=F[g+v],c[k++]=z;x=k>>>1;e(c,x);for(f=B=F=0;f<x;++f)if(k=c[2*f+1]|0,k>=n)k=k-n|0,p(u,q,B--,k);else if(0<=k)p(b,l,F--,k);else if(k<=-n){k=-k-n|0;for(r=0;r<F;++r)if(g=d(b[r],k),void 0!==g)return g;r=q;g=B++;u[g]=k;r[k]=g}else{k=-k-1|0;for(r=0;r<B;++r)if(g=d(k,u[r]),void 0!==g)return g;r=l;g=F++;b[g]=k;r[k]=g}},sweepComplete:function(a,r,g,h,n,y,w,x,F,B){var k=0,v=2*a;--a;for(var z=v-1;g<h;++g){var A=
y[g]+1<<1,E=v*g;c[k++]=n[E+a];c[k++]=-A;c[k++]=n[E+z];c[k++]=A}for(g=w;g<x;++g)A=B[g]+1<<1,h=v*g,c[k++]=F[h+a],c[k++]=-A|1,c[k++]=F[h+z],c[k++]=A|1;x=k>>>1;e(c,x);for(g=k=B=F=0;g<x;++g)if(v=c[2*g+1]|0,h=v&1,g<x-1&&v>>1===c[2*g+3]>>1&&(h=2,g+=1),0>v){v=-(v>>1)-1;for(n=0;n<k;++n)if(y=r(d[n],v),void 0!==y)return y;if(0!==h)for(n=0;n<F;++n)if(y=r(b[n],v),void 0!==y)return y;if(1!==h)for(n=0;n<B;++n)if(y=r(u[n],v),void 0!==y)return y;0===h?(h=l,n=F++,b[n]=v,h[v]=n):1===h?(h=q,n=B++,u[n]=v,h[v]=n):2===
h&&(h=f,n=k++,d[n]=v,h[v]=n)}else v=(v>>1)-1,0===h?p(b,l,F--,v):1===h?p(u,q,B--,v):2===h&&p(d,f,k--,v)},scanBipartite:function(a,d,f,g,h,q,u,x,F,B,C,m){var k=0,r=2*a,v=d+a,z=1,A=1;for(g?A=n:z=n;h<q;++h){var w=h+z,y=r*h;c[k++]=u[y+d];c[k++]=-w;c[k++]=u[y+v];c[k++]=w}for(h=F;h<B;++h)w=h+A,q=r*h,c[k++]=C[q+d],c[k++]=-w;B=k>>>1;e(c,B);for(h=k=0;h<B;++h)if(w=c[2*h+1]|0,0>w)if(w=-w,w>=n?(A=!g,w-=n):(A=!!g,--w),A)A=l,q=k++,b[q]=w,A[w]=q;else a:for(A=m[w],w*=r,q=C[w+d+1],F=C[w+d+1+a],v=0;v<k;++v){y=b[v];
var D=r*y;if(!(F<u[D+d+1]||u[D+d+1+a]<q)){for(var t=d+2;t<a;++t)if(C[w+t+a]<u[D+t]||u[D+t+a]<C[w+t])continue a;y=x[y];y=g?f(A,y):f(y,A);if(void 0!==y)return y}}else p(b,l,k--,w-z)},scanComplete:function(a,d,f,l,g,h,q,u,p,B,C){for(var k=0,r=2*a,v=d+a;l<g;++l){var z=l+n,A=r*l;c[k++]=h[A+d];c[k++]=-z;c[k++]=h[A+v];c[k++]=z}for(l=u;l<p;++l)z=l+1,g=r*l,c[k++]=B[g+d],c[k++]=-z;p=k>>>1;e(c,p);for(l=k=0;l<p;++l)if(g=c[2*l+1]|0,0>g)if(z=-g,z>=n)b[k++]=z-n;else a:for(--z,g=C[z],z*=r,v=B[z+d+1],A=B[z+d+1+a],
u=0;u<k;++u){var w=b[u],x=q[w];if(x===g)break;w*=r;if(!(A<h[w+d+1]||h[w+d+1+a]<v)){for(var y=d+2;y<a;++y)if(B[z+y+a]<h[w+y]||h[w+y+a]<B[z+y])continue a;x=f(x,g);if(void 0!==x)return x}}else{z=g-n;for(u=k-1;0<=u;--u)if(b[u]===z){for(y=u+1;y<k;++y)b[y-1]=b[y];break}--k}}};var g=a("typedarray-pool"),h=a("bit-twiddle"),e=a("./sort"),n=268435456,b=g.mallocInt32(1024),l=g.mallocInt32(1024),u=g.mallocInt32(1024),q=g.mallocInt32(1024),d=g.mallocInt32(1024),f=g.mallocInt32(1024),c=g.mallocDouble(8192)},{"./sort":91,
"bit-twiddle":82,"typedarray-pool":529}],93:[function(a,t,m){},{}],94:[function(a,t,m){function p(){this._events&&Object.prototype.hasOwnProperty.call(this,"_events")||(this._events=f(null),this._eventsCount=0);this._maxListeners=this._maxListeners||void 0}function g(b,a,c,d){var e;if("function"!==typeof c)throw new TypeError('"listener" argument must be a function');if(e=b._events){e.newListener&&(b.emit("newListener",a,c.listener?c.listener:c),e=b._events);var k=e[a]}else e=b._events=f(null),b._eventsCount=
0;k?("function"===typeof k?k=e[a]=d?[c,k]:[k,c]:d?k.unshift(c):k.push(c),k.warned||(c=void 0===b._maxListeners?p.defaultMaxListeners:b._maxListeners)&&0<c&&k.length>c&&(k.warned=!0,c=Error("Possible EventEmitter memory leak detected. "+k.length+' "'+String(a)+'" listeners added. Use emitter.setMaxListeners() to increase limit.'),c.name="MaxListenersExceededWarning",c.emitter=b,c.type=a,c.count=k.length,"object"===typeof console&&console.warn&&console.warn("%s: %s",c.name,c.message))):(e[a]=c,++b._eventsCount);
return b}function h(){if(!this.fired)switch(this.target.removeListener(this.type,this.wrapFn),this.fired=!0,arguments.length){case 0:return this.listener.call(this.target);case 1:return this.listener.call(this.target,arguments[0]);case 2:return this.listener.call(this.target,arguments[0],arguments[1]);case 3:return this.listener.call(this.target,arguments[0],arguments[1],arguments[2]);default:for(var b=Array(arguments.length),a=0;a<b.length;++a)b[a]=arguments[a];this.listener.apply(this.target,b)}}
function e(b,a,c){b={fired:!1,wrapFn:void 0,target:b,type:a,listener:c};a=k.call(h,b);a.listener=c;return b.wrapFn=a}function n(b,a,c){b=b._events;if(!b)return[];a=b[a];if(!a)return[];if("function"===typeof a)return c?[a.listener||a]:[a];if(c)for(c=Array(a.length),b=0;b<c.length;++b)c[b]=a[b].listener||a[b];else c=l(a,a.length);return c}function b(b){var a=this._events;if(a){b=a[b];if("function"===typeof b)return 1;if(b)return b.length}return 0}function l(b,a){for(var c=Array(a),d=0;d<a;++d)c[d]=
b[d];return c}function u(b){var a=function(){};a.prototype=b;return new a}function q(b){var a=[],c;for(c in b)Object.prototype.hasOwnProperty.call(b,c)&&a.push(c);return c}function d(b){var a=this;return function(){return a.apply(b,arguments)}}var f=Object.create||u,c=Object.keys||q,k=Function.prototype.bind||d;t.exports=p;p.EventEmitter=p;p.prototype._events=void 0;p.prototype._maxListeners=void 0;var r=10;try{a={};Object.defineProperty&&Object.defineProperty(a,"x",{value:0});var v=0===a.x}catch(z){v=
!1}v?Object.defineProperty(p,"defaultMaxListeners",{enumerable:!0,get:function(){return r},set:function(b){if("number"!==typeof b||0>b||b!==b)throw new TypeError('"defaultMaxListeners" must be a positive number');r=b}}):p.defaultMaxListeners=r;p.prototype.setMaxListeners=function(b){if("number"!==typeof b||0>b||isNaN(b))throw new TypeError('"n" argument must be a positive number');this._maxListeners=b;return this};p.prototype.getMaxListeners=function(){return void 0===this._maxListeners?p.defaultMaxListeners:
this._maxListeners};p.prototype.emit=function(b){var a,c,d;var f="error"===b;if(d=this._events)f=f&&null==d.error;else if(!f)return!1;if(f){1<arguments.length&&(a=arguments[1]);if(a instanceof Error)throw a;d=Error('Unhandled "error" event. ('+a+")");d.context=a;throw d;}a=d[b];if(!a)return!1;d="function"===typeof a;var e=arguments.length;switch(e){case 1:if(d)a.call(this);else for(d=a.length,a=l(a,d),f=0;f<d;++f)a[f].call(this);break;case 2:f=arguments[1];if(d)a.call(this,f);else for(d=a.length,
a=l(a,d),e=0;e<d;++e)a[e].call(this,f);break;case 3:f=arguments[1];e=arguments[2];if(d)a.call(this,f,e);else for(d=a.length,a=l(a,d),c=0;c<d;++c)a[c].call(this,f,e);break;case 4:f=arguments[1];e=arguments[2];c=arguments[3];if(d)a.call(this,f,e,c);else{d=a.length;a=l(a,d);for(var k=0;k<d;++k)a[k].call(this,f,e,c)}break;default:f=Array(e-1);for(c=1;c<e;c++)f[c-1]=arguments[c];if(d)a.apply(this,f);else for(d=a.length,a=l(a,d),e=0;e<d;++e)a[e].apply(this,f)}return!0};p.prototype.addListener=function(b,
a){return g(this,b,a,!1)};p.prototype.on=p.prototype.addListener;p.prototype.prependListener=function(b,a){return g(this,b,a,!0)};p.prototype.once=function(b,a){if("function"!==typeof a)throw new TypeError('"listener" argument must be a function');this.on(b,e(this,b,a));return this};p.prototype.prependOnceListener=function(b,a){if("function"!==typeof a)throw new TypeError('"listener" argument must be a function');this.prependListener(b,e(this,b,a));return this};p.prototype.removeListener=function(b,
a){var c;if("function"!==typeof a)throw new TypeError('"listener" argument must be a function');var d=this._events;if(!d)return this;var e=d[b];if(!e)return this;if(e===a||e.listener===a)0===--this._eventsCount?this._events=f(null):(delete d[b],d.removeListener&&this.emit("removeListener",b,e.listener||a));else if("function"!==typeof e){var k=-1;for(c=e.length-1;0<=c;c--)if(e[c]===a||e[c].listener===a){var r=e[c].listener;k=c;break}if(0>k)return this;if(0===k)e.shift();else{c=k+1;for(var l=e.length;c<
l;k+=1,c+=1)e[k]=e[c];e.pop()}1===e.length&&(d[b]=e[0]);d.removeListener&&this.emit("removeListener",b,r||a)}return this};p.prototype.removeAllListeners=function(b){var a=this._events;if(!a)return this;if(!a.removeListener)return 0===arguments.length?(this._events=f(null),this._eventsCount=0):a[b]&&(0===--this._eventsCount?this._events=f(null):delete a[b]),this;if(0===arguments.length){var d=c(a);for(a=0;a<d.length;++a){var e=d[a];"removeListener"!==e&&this.removeAllListeners(e)}this.removeAllListeners("removeListener");
this._events=f(null);this._eventsCount=0;return this}d=a[b];if("function"===typeof d)this.removeListener(b,d);else if(d)for(a=d.length-1;0<=a;a--)this.removeListener(b,d[a]);return this};p.prototype.listeners=function(b){return n(this,b,!0)};p.prototype.rawListeners=function(b){return n(this,b,!1)};p.listenerCount=function(a,c){return"function"===typeof a.listenerCount?a.listenerCount(c):b.call(a,c)};p.prototype.listenerCount=b;p.prototype.eventNames=function(){return 0<this._eventsCount?Reflect.ownKeys(this._events):
[]}},{}],95:[function(a,t,m){function p(b){if(b>E)throw new RangeError('The value "'+b+'" is invalid for option "size"');b=new Uint8Array(b);b.__proto__=g.prototype;return b}function g(b,a,c){if("number"===typeof b){if("string"===typeof a)throw new TypeError('The "string" argument must be of type string. Received type number');return n(b)}return h(b,a,c)}function h(a,c,d){if("string"===typeof a){var f=c;if("string"!==typeof f||""===f)f="utf8";if(!g.isEncoding(f))throw new TypeError("Unknown encoding: "+
f);c=q(a,f)|0;d=p(c);a=d.write(a,f);a!==c&&(d=d.slice(0,a));return d}if(ArrayBuffer.isView(a))return b(a);if(null==a)throw TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof a);if(D(a,ArrayBuffer)||a&&D(a.buffer,ArrayBuffer)){if(0>c||a.byteLength<c)throw new RangeError('"offset" is outside of buffer bounds');if(a.byteLength<c+(d||0))throw new RangeError('"length" is outside of buffer bounds');a=void 0===c&&void 0===d?
new Uint8Array(a):void 0===d?new Uint8Array(a,c):new Uint8Array(a,c,d);a.__proto__=g.prototype;return a}if("number"===typeof a)throw new TypeError('The "value" argument must not be of type number. Received type number');f=a.valueOf&&a.valueOf();if(null!=f&&f!==a)return g.from(f,c,d);if(f=l(a))return f;$jscomp.initSymbol();$jscomp.initSymbol();$jscomp.initSymbol();if("undefined"!==typeof Symbol&&null!=Symbol.toPrimitive&&"function"===typeof a[Symbol.toPrimitive])return $jscomp.initSymbol(),g.from(a[Symbol.toPrimitive]("string"),
c,d);throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof a);}function e(b){if("number"!==typeof b)throw new TypeError('"size" argument must be of type number');if(0>b)throw new RangeError('The value "'+b+'" is invalid for option "size"');}function n(b){e(b);return p(0>b?0:u(b)|0)}function b(b){for(var a=0>b.length?0:u(b.length)|0,c=p(a),d=0;d<a;d+=1)c[d]=b[d]&255;return c}function l(a){if(g.isBuffer(a)){var c=
u(a.length)|0,d=p(c);if(0===d.length)return d;a.copy(d,0,0,c);return d}if(void 0!==a.length)return(c="number"!==typeof a.length)||(c=a.length,c=c!==c),c?p(0):b(a);if("Buffer"===a.type&&Array.isArray(a.data))return b(a.data)}function u(b){if(b>=E)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+E.toString(16)+" bytes");return b|0}function q(b,a){if(g.isBuffer(b))return b.length;if(ArrayBuffer.isView(b)||D(b,ArrayBuffer))return b.byteLength;if("string"!==typeof b)throw new TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+
typeof b);var c=b.length,d=2<arguments.length&&!0===arguments[2];if(!d&&0===c)return 0;for(var f=!1;;)switch(a){case "ascii":case "latin1":case "binary":return c;case "utf8":case "utf-8":return F(b).length;case "ucs2":case "ucs-2":case "utf16le":case "utf-16le":return 2*c;case "hex":return c>>>1;case "base64":return G.toByteArray(x(b)).length;default:if(f)return d?-1:F(b).length;a=(""+a).toLowerCase();f=!0}}function d(b,a,c){var d=!1;if(void 0===a||0>a)a=0;if(a>this.length)return"";if(void 0===c||
c>this.length)c=this.length;if(0>=c)return"";c>>>=0;a>>>=0;if(c<=a)return"";for(b||(b="utf8");;)switch(b){case "hex":b=a;a=c;c=this.length;if(!b||0>b)b=0;if(!a||0>a||a>c)a=c;d="";for(c=b;c<a;++c)b=d,d=this[c],d=16>d?"0"+d.toString(16):d.toString(16),d=b+d;return d;case "utf8":case "utf-8":return r(this,a,c);case "ascii":b="";for(c=Math.min(this.length,c);a<c;++a)b+=String.fromCharCode(this[a]&127);return b;case "latin1":case "binary":b="";for(c=Math.min(this.length,c);a<c;++a)b+=String.fromCharCode(this[a]);
return b;case "base64":return a=0===a&&c===this.length?G.fromByteArray(this):G.fromByteArray(this.slice(a,c)),a;case "ucs2":case "ucs-2":case "utf16le":case "utf-16le":a=this.slice(a,c);c="";for(b=0;b<a.length;b+=2)c+=String.fromCharCode(a[b]+256*a[b+1]);return c;default:if(d)throw new TypeError("Unknown encoding: "+b);b=(b+"").toLowerCase();d=!0}}function f(b,a,c){var d=b[a];b[a]=b[c];b[c]=d}function c(b,a,c,d,f){if(0===b.length)return-1;"string"===typeof c?(d=c,c=0):2147483647<c?c=2147483647:-2147483648>
c&&(c=-2147483648);c=+c;c!==c&&(c=f?0:b.length-1);0>c&&(c=b.length+c);if(c>=b.length){if(f)return-1;c=b.length-1}else if(0>c)if(f)c=0;else return-1;"string"===typeof a&&(a=g.from(a,d));if(g.isBuffer(a))return 0===a.length?-1:k(b,a,c,d,f);if("number"===typeof a)return a&=255,"function"===typeof Uint8Array.prototype.indexOf?f?Uint8Array.prototype.indexOf.call(b,a,c):Uint8Array.prototype.lastIndexOf.call(b,a,c):k(b,[a],c,d,f);throw new TypeError("val must be string, number or Buffer");}function k(b,
a,c,d,f){function e(b,a){return 1===k?b[a]:b.readUInt16BE(a*k)}var k=1,r=b.length,l=a.length;if(void 0!==d&&(d=String(d).toLowerCase(),"ucs2"===d||"ucs-2"===d||"utf16le"===d||"utf-16le"===d)){if(2>b.length||2>a.length)return-1;k=2;r/=2;l/=2;c/=2}if(f)for(d=-1;c<r;c++)if(e(b,c)===e(a,-1===d?0:c-d)){if(-1===d&&(d=c),c-d+1===l)return d*k}else-1!==d&&(c-=c-d),d=-1;else for(c+l>r&&(c=r-l);0<=c;c--){r=!0;for(d=0;d<l;d++)if(e(b,c+d)!==e(a,d)){r=!1;break}if(r)return c}return-1}function r(b,a,c){c=Math.min(b.length,
c);for(var d=[];a<c;){var f=b[a],e=null,k=239<f?4:223<f?3:191<f?2:1;if(a+k<=c)switch(k){case 1:128>f&&(e=f);break;case 2:var r=b[a+1];128===(r&192)&&(f=(f&31)<<6|r&63,127<f&&(e=f));break;case 3:r=b[a+1];var l=b[a+2];128===(r&192)&&128===(l&192)&&(f=(f&15)<<12|(r&63)<<6|l&63,2047<f&&(55296>f||57343<f)&&(e=f));break;case 4:r=b[a+1];l=b[a+2];var g=b[a+3];128===(r&192)&&128===(l&192)&&128===(g&192)&&(f=(f&15)<<18|(r&63)<<12|(l&63)<<6|g&63,65535<f&&1114112>f&&(e=f))}null===e?(e=65533,k=1):65535<e&&(e-=
65536,d.push(e>>>10&1023|55296),e=56320|e&1023);d.push(e);a+=k}b=d.length;if(b<=K)d=String.fromCharCode.apply(String,d);else{c="";for(a=0;a<b;)c+=String.fromCharCode.apply(String,d.slice(a,a+=K));d=c}return d}function v(b,a,c){if(0!==b%1||0>b)throw new RangeError("offset is not uint");if(b+a>c)throw new RangeError("Trying to access beyond buffer length");}function z(b,a,c,d,f,e){if(!g.isBuffer(b))throw new TypeError('"buffer" argument must be a Buffer instance');if(a>f||a<e)throw new RangeError('"value" argument is out of bounds');
if(c+d>b.length)throw new RangeError("Index out of range");}function A(b,a,c,d,f,e){if(c+d>b.length)throw new RangeError("Index out of range");if(0>c)throw new RangeError("Index out of range");}function y(b,a,c,d,f){a=+a;c>>>=0;f||A(b,a,c,4,3.4028234663852886E38,-3.4028234663852886E38);H.write(b,a,c,d,23,4);return c+4}function w(b,a,c,d,f){a=+a;c>>>=0;f||A(b,a,c,8,1.7976931348623157E308,-1.7976931348623157E308);H.write(b,a,c,d,52,8);return c+8}function x(b){b=b.split("\x3d")[0];b=b.trim().replace(I,
"");if(2>b.length)return"";for(;0!==b.length%4;)b+="\x3d";return b}function F(b,a){a=a||Infinity;for(var c,d=b.length,f=null,e=[],k=0;k<d;++k){c=b.charCodeAt(k);if(55295<c&&57344>c){if(!f){if(56319<c){-1<(a-=3)&&e.push(239,191,189);continue}else if(k+1===d){-1<(a-=3)&&e.push(239,191,189);continue}f=c;continue}if(56320>c){-1<(a-=3)&&e.push(239,191,189);f=c;continue}c=(f-55296<<10|c-56320)+65536}else f&&-1<(a-=3)&&e.push(239,191,189);f=null;if(128>c){if(0>--a)break;e.push(c)}else if(2048>c){if(0>(a-=
2))break;e.push(c>>6|192,c&63|128)}else if(65536>c){if(0>(a-=3))break;e.push(c>>12|224,c>>6&63|128,c&63|128)}else if(1114112>c){if(0>(a-=4))break;e.push(c>>18|240,c>>12&63|128,c>>6&63|128,c&63|128)}else throw Error("Invalid code point");}return e}function B(b){for(var a=[],c=0;c<b.length;++c)a.push(b.charCodeAt(c)&255);return a}function C(b,a,c,d){for(var f=0;f<d&&!(f+c>=a.length||f>=b.length);++f)a[f+c]=b[f];return f}function D(b,a){return b instanceof a||null!=b&&null!=b.constructor&&null!=b.constructor.name&&
b.constructor.name===a.name}var G=a("base64-js"),H=a("ieee754");m.Buffer=g;m.SlowBuffer=function(b){+b!=b&&(b=0);return g.alloc(+b)};m.INSPECT_MAX_BYTES=50;var E=2147483647;m.kMaxLength=E;g.TYPED_ARRAY_SUPPORT=function(){try{var b=new Uint8Array(1);b.__proto__={__proto__:Uint8Array.prototype,foo:function(){return 42}};return 42===b.foo()}catch(L){return!1}}();g.TYPED_ARRAY_SUPPORT||"undefined"===typeof console||"function"!==typeof console.error||console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support.");
Object.defineProperty(g.prototype,"parent",{enumerable:!0,get:function(){if(g.isBuffer(this))return this.buffer}});Object.defineProperty(g.prototype,"offset",{enumerable:!0,get:function(){if(g.isBuffer(this))return this.byteOffset}});$jscomp.initSymbol();$jscomp.initSymbol();$jscomp.initSymbol();"undefined"!==typeof Symbol&&null!=Symbol.species&&g[Symbol.species]===g&&($jscomp.initSymbol(),Object.defineProperty(g,Symbol.species,{value:null,configurable:!0,enumerable:!1,writable:!1}));g.poolSize=8192;
g.from=function(b,a,c){return h(b,a,c)};g.prototype.__proto__=Uint8Array.prototype;g.__proto__=Uint8Array;g.alloc=function(b,a,c){e(b);b=0>=b?p(b):void 0!==a?"string"===typeof c?p(b).fill(a,c):p(b).fill(a):p(b);return b};g.allocUnsafe=function(b){return n(b)};g.allocUnsafeSlow=function(b){return n(b)};g.isBuffer=function(b){return null!=b&&!0===b._isBuffer&&b!==g.prototype};g.compare=function(b,a){D(b,Uint8Array)&&(b=g.from(b,b.offset,b.byteLength));D(a,Uint8Array)&&(a=g.from(a,a.offset,a.byteLength));
if(!g.isBuffer(b)||!g.isBuffer(a))throw new TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(b===a)return 0;for(var c=b.length,d=a.length,f=0,e=Math.min(c,d);f<e;++f)if(b[f]!==a[f]){c=b[f];d=a[f];break}return c<d?-1:d<c?1:0};g.isEncoding=function(b){switch(String(b).toLowerCase()){case "hex":case "utf8":case "utf-8":case "ascii":case "latin1":case "binary":case "base64":case "ucs2":case "ucs-2":case "utf16le":case "utf-16le":return!0;default:return!1}};g.concat=
function(b,a){if(!Array.isArray(b))throw new TypeError('"list" argument must be an Array of Buffers');if(0===b.length)return g.alloc(0);var c;if(void 0===a)for(c=a=0;c<b.length;++c)a+=b[c].length;a=g.allocUnsafe(a);var d=0;for(c=0;c<b.length;++c){var f=b[c];D(f,Uint8Array)&&(f=g.from(f));if(!g.isBuffer(f))throw new TypeError('"list" argument must be an Array of Buffers');f.copy(a,d);d+=f.length}return a};g.byteLength=q;g.prototype._isBuffer=!0;g.prototype.swap16=function(){var b=this.length;if(0!==
b%2)throw new RangeError("Buffer size must be a multiple of 16-bits");for(var a=0;a<b;a+=2)f(this,a,a+1);return this};g.prototype.swap32=function(){var b=this.length;if(0!==b%4)throw new RangeError("Buffer size must be a multiple of 32-bits");for(var a=0;a<b;a+=4)f(this,a,a+3),f(this,a+1,a+2);return this};g.prototype.swap64=function(){var b=this.length;if(0!==b%8)throw new RangeError("Buffer size must be a multiple of 64-bits");for(var a=0;a<b;a+=8)f(this,a,a+7),f(this,a+1,a+6),f(this,a+2,a+5),f(this,
a+3,a+4);return this};g.prototype.toString=function(){var b=this.length;return 0===b?"":0===arguments.length?r(this,0,b):d.apply(this,arguments)};g.prototype.toLocaleString=g.prototype.toString;g.prototype.equals=function(b){if(!g.isBuffer(b))throw new TypeError("Argument must be a Buffer");return this===b?!0:0===g.compare(this,b)};g.prototype.inspect=function(){var b=m.INSPECT_MAX_BYTES;var a=this.toString("hex",0,b).replace(/(.{2})/g,"$1 ").trim();this.length>b&&(a+=" ... ");return"\x3cBuffer "+
a+"\x3e"};g.prototype.compare=function(b,a,c,d,f){D(b,Uint8Array)&&(b=g.from(b,b.offset,b.byteLength));if(!g.isBuffer(b))throw new TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+typeof b);void 0===a&&(a=0);void 0===c&&(c=b?b.length:0);void 0===d&&(d=0);void 0===f&&(f=this.length);if(0>a||c>b.length||0>d||f>this.length)throw new RangeError("out of range index");if(d>=f&&a>=c)return 0;if(d>=f)return-1;if(a>=c)return 1;a>>>=0;c>>>=0;d>>>=0;f>>>=0;if(this===
b)return 0;var e=f-d,k=c-a,r=Math.min(e,k);d=this.slice(d,f);b=b.slice(a,c);for(a=0;a<r;++a)if(d[a]!==b[a]){e=d[a];k=b[a];break}return e<k?-1:k<e?1:0};g.prototype.includes=function(b,a,c){return-1!==this.indexOf(b,a,c)};g.prototype.indexOf=function(b,a,d){return c(this,b,a,d,!0)};g.prototype.lastIndexOf=function(b,a,d){return c(this,b,a,d,!1)};g.prototype.write=function(b,a,c,d){if(void 0===a)d="utf8",c=this.length,a=0;else if(void 0===c&&"string"===typeof a)d=a,c=this.length,a=0;else if(isFinite(a))a>>>=
0,isFinite(c)?(c>>>=0,void 0===d&&(d="utf8")):(d=c,c=void 0);else throw Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");var f=this.length-a;if(void 0===c||c>f)c=f;if(0<b.length&&(0>c||0>a)||a>this.length)throw new RangeError("Attempt to write outside buffer bounds");d||(d="utf8");for(f=!1;;)switch(d){case "hex":a:{a=Number(a)||0;d=this.length-a;c?(c=Number(c),c>d&&(c=d)):c=d;d=b.length;c>d/2&&(c=d/2);for(d=0;d<c;++d){f=parseInt(b.substr(2*d,2),16);if(f!==f){b=d;break a}this[a+
d]=f}b=d}return b;case "utf8":case "utf-8":return C(F(b,this.length-a),this,a,c);case "ascii":return C(B(b),this,a,c);case "latin1":case "binary":return C(B(b),this,a,c);case "base64":return C(G.toByteArray(x(b)),this,a,c);case "ucs2":case "ucs-2":case "utf16le":case "utf-16le":d=b;f=this.length-a;for(var e=[],k=0;k<d.length&&!(0>(f-=2));++k){var r=d.charCodeAt(k);b=r>>8;r%=256;e.push(r);e.push(b)}return C(e,this,a,c);default:if(f)throw new TypeError("Unknown encoding: "+d);d=(""+d).toLowerCase();
f=!0}};g.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};var K=4096;g.prototype.slice=function(b,a){var c=this.length;b=~~b;a=void 0===a?c:~~a;0>b?(b+=c,0>b&&(b=0)):b>c&&(b=c);0>a?(a+=c,0>a&&(a=0)):a>c&&(a=c);a<b&&(a=b);b=this.subarray(b,a);b.__proto__=g.prototype;return b};g.prototype.readUIntLE=function(b,a,c){b>>>=0;a>>>=0;c||v(b,a,this.length);c=this[b];for(var d=1,f=0;++f<a&&(d*=256);)c+=this[b+f]*d;return c};g.prototype.readUIntBE=function(b,
a,c){b>>>=0;a>>>=0;c||v(b,a,this.length);c=this[b+--a];for(var d=1;0<a&&(d*=256);)c+=this[b+--a]*d;return c};g.prototype.readUInt8=function(b,a){b>>>=0;a||v(b,1,this.length);return this[b]};g.prototype.readUInt16LE=function(b,a){b>>>=0;a||v(b,2,this.length);return this[b]|this[b+1]<<8};g.prototype.readUInt16BE=function(b,a){b>>>=0;a||v(b,2,this.length);return this[b]<<8|this[b+1]};g.prototype.readUInt32LE=function(b,a){b>>>=0;a||v(b,4,this.length);return(this[b]|this[b+1]<<8|this[b+2]<<16)+16777216*
this[b+3]};g.prototype.readUInt32BE=function(b,a){b>>>=0;a||v(b,4,this.length);return 16777216*this[b]+(this[b+1]<<16|this[b+2]<<8|this[b+3])};g.prototype.readIntLE=function(b,a,c){b>>>=0;a>>>=0;c||v(b,a,this.length);c=this[b];for(var d=1,f=0;++f<a&&(d*=256);)c+=this[b+f]*d;c>=128*d&&(c-=Math.pow(2,8*a));return c};g.prototype.readIntBE=function(b,a,c){b>>>=0;a>>>=0;c||v(b,a,this.length);c=a;for(var d=1,f=this[b+--c];0<c&&(d*=256);)f+=this[b+--c]*d;f>=128*d&&(f-=Math.pow(2,8*a));return f};g.prototype.readInt8=
function(b,a){b>>>=0;a||v(b,1,this.length);return this[b]&128?-1*(255-this[b]+1):this[b]};g.prototype.readInt16LE=function(b,a){b>>>=0;a||v(b,2,this.length);b=this[b]|this[b+1]<<8;return b&32768?b|4294901760:b};g.prototype.readInt16BE=function(b,a){b>>>=0;a||v(b,2,this.length);b=this[b+1]|this[b]<<8;return b&32768?b|4294901760:b};g.prototype.readInt32LE=function(b,a){b>>>=0;a||v(b,4,this.length);return this[b]|this[b+1]<<8|this[b+2]<<16|this[b+3]<<24};g.prototype.readInt32BE=function(b,a){b>>>=0;
a||v(b,4,this.length);return this[b]<<24|this[b+1]<<16|this[b+2]<<8|this[b+3]};g.prototype.readFloatLE=function(b,a){b>>>=0;a||v(b,4,this.length);return H.read(this,b,!0,23,4)};g.prototype.readFloatBE=function(b,a){b>>>=0;a||v(b,4,this.length);return H.read(this,b,!1,23,4)};g.prototype.readDoubleLE=function(b,a){b>>>=0;a||v(b,8,this.length);return H.read(this,b,!0,52,8)};g.prototype.readDoubleBE=function(b,a){b>>>=0;a||v(b,8,this.length);return H.read(this,b,!1,52,8)};g.prototype.writeUIntLE=function(b,
a,c,d){b=+b;a>>>=0;c>>>=0;d||z(this,b,a,c,Math.pow(2,8*c)-1,0);d=1;var f=0;for(this[a]=b&255;++f<c&&(d*=256);)this[a+f]=b/d&255;return a+c};g.prototype.writeUIntBE=function(b,a,c,d){b=+b;a>>>=0;c>>>=0;d||z(this,b,a,c,Math.pow(2,8*c)-1,0);d=c-1;var f=1;for(this[a+d]=b&255;0<=--d&&(f*=256);)this[a+d]=b/f&255;return a+c};g.prototype.writeUInt8=function(b,a,c){b=+b;a>>>=0;c||z(this,b,a,1,255,0);this[a]=b&255;return a+1};g.prototype.writeUInt16LE=function(b,a,c){b=+b;a>>>=0;c||z(this,b,a,2,65535,0);this[a]=
b&255;this[a+1]=b>>>8;return a+2};g.prototype.writeUInt16BE=function(b,a,c){b=+b;a>>>=0;c||z(this,b,a,2,65535,0);this[a]=b>>>8;this[a+1]=b&255;return a+2};g.prototype.writeUInt32LE=function(b,a,c){b=+b;a>>>=0;c||z(this,b,a,4,4294967295,0);this[a+3]=b>>>24;this[a+2]=b>>>16;this[a+1]=b>>>8;this[a]=b&255;return a+4};g.prototype.writeUInt32BE=function(b,a,c){b=+b;a>>>=0;c||z(this,b,a,4,4294967295,0);this[a]=b>>>24;this[a+1]=b>>>16;this[a+2]=b>>>8;this[a+3]=b&255;return a+4};g.prototype.writeIntLE=function(b,
a,c,d){b=+b;a>>>=0;d||(d=Math.pow(2,8*c-1),z(this,b,a,c,d-1,-d));d=0;var f=1,e=0;for(this[a]=b&255;++d<c&&(f*=256);)0>b&&0===e&&0!==this[a+d-1]&&(e=1),this[a+d]=(b/f>>0)-e&255;return a+c};g.prototype.writeIntBE=function(b,a,c,d){b=+b;a>>>=0;d||(d=Math.pow(2,8*c-1),z(this,b,a,c,d-1,-d));d=c-1;var f=1,e=0;for(this[a+d]=b&255;0<=--d&&(f*=256);)0>b&&0===e&&0!==this[a+d+1]&&(e=1),this[a+d]=(b/f>>0)-e&255;return a+c};g.prototype.writeInt8=function(b,a,c){b=+b;a>>>=0;c||z(this,b,a,1,127,-128);0>b&&(b=255+
b+1);this[a]=b&255;return a+1};g.prototype.writeInt16LE=function(b,a,c){b=+b;a>>>=0;c||z(this,b,a,2,32767,-32768);this[a]=b&255;this[a+1]=b>>>8;return a+2};g.prototype.writeInt16BE=function(b,a,c){b=+b;a>>>=0;c||z(this,b,a,2,32767,-32768);this[a]=b>>>8;this[a+1]=b&255;return a+2};g.prototype.writeInt32LE=function(b,a,c){b=+b;a>>>=0;c||z(this,b,a,4,2147483647,-2147483648);this[a]=b&255;this[a+1]=b>>>8;this[a+2]=b>>>16;this[a+3]=b>>>24;return a+4};g.prototype.writeInt32BE=function(b,a,c){b=+b;a>>>=
0;c||z(this,b,a,4,2147483647,-2147483648);0>b&&(b=4294967295+b+1);this[a]=b>>>24;this[a+1]=b>>>16;this[a+2]=b>>>8;this[a+3]=b&255;return a+4};g.prototype.writeFloatLE=function(b,a,c){return y(this,b,a,!0,c)};g.prototype.writeFloatBE=function(b,a,c){return y(this,b,a,!1,c)};g.prototype.writeDoubleLE=function(b,a,c){return w(this,b,a,!0,c)};g.prototype.writeDoubleBE=function(b,a,c){return w(this,b,a,!1,c)};g.prototype.copy=function(b,a,c,d){if(!g.isBuffer(b))throw new TypeError("argument should be a Buffer");
c||(c=0);d||0===d||(d=this.length);a>=b.length&&(a=b.length);a||(a=0);0<d&&d<c&&(d=c);if(d===c||0===b.length||0===this.length)return 0;if(0>a)throw new RangeError("targetStart out of bounds");if(0>c||c>=this.length)throw new RangeError("Index out of range");if(0>d)throw new RangeError("sourceEnd out of bounds");d>this.length&&(d=this.length);b.length-a<d-c&&(d=b.length-a+c);var f=d-c;if(this===b&&"function"===typeof Uint8Array.prototype.copyWithin)this.copyWithin(a,c,d);else if(this===b&&c<a&&a<d)for(d=
f-1;0<=d;--d)b[d+a]=this[d+c];else Uint8Array.prototype.set.call(b,this.subarray(c,d),a);return f};g.prototype.fill=function(b,a,c,d){if("string"===typeof b){"string"===typeof a?(d=a,a=0,c=this.length):"string"===typeof c&&(d=c,c=this.length);if(void 0!==d&&"string"!==typeof d)throw new TypeError("encoding must be a string");if("string"===typeof d&&!g.isEncoding(d))throw new TypeError("Unknown encoding: "+d);if(1===b.length){var f=b.charCodeAt(0);if("utf8"===d&&128>f||"latin1"===d)b=f}}else"number"===
typeof b&&(b&=255);if(0>a||this.length<a||this.length<c)throw new RangeError("Out of range index");if(c<=a)return this;a>>>=0;c=void 0===c?this.length:c>>>0;b||(b=0);if("number"===typeof b)for(d=a;d<c;++d)this[d]=b;else{f=g.isBuffer(b)?b:g.from(b,d);var e=f.length;if(0===e)throw new TypeError('The value "'+b+'" is invalid for argument "value"');for(d=0;d<c-a;++d)this[d+a]=f[d%e]}return this};var I=/[^+/0-9A-Za-z-_]/g},{"base64-js":64,ieee754:404}],96:[function(a,t,m){function p(b){return[Math.min(b[0],
b[1]),Math.max(b[0],b[1])]}function g(b,a){return b[0]-a[0]||b[1]-a[1]}function h(b,a,d){return a in b?b[a]:d}var e=a("./lib/monotone"),n=a("./lib/triangulation"),b=a("./lib/delaunay"),l=a("./lib/filter");t.exports=function(a,q,d){Array.isArray(q)?(d=d||{},q=q||[]):(d=q||{},q=[]);var f=!!h(d,"delaunay",!0),c=!!h(d,"interior",!0),k=!!h(d,"exterior",!0);d=!!h(d,"infinity",!1);if(!c&&!k||0===a.length)return[];var r=e(a,q);if(f||c!==k||d){q=n(a.length,q.map(p).sort(g));for(var u=0;u<r.length;++u){var z=
r[u];q.addTriangle(z[0],z[1],z[2])}f&&b(a,q);return k?c?d?l(q,0,d):q.cells():l(q,1,d):l(q,-1)}return r}},{"./lib/delaunay":97,"./lib/filter":98,"./lib/monotone":99,"./lib/triangulation":100}],97:[function(a,t,m){function p(a,e,n,b,l,u){var h=e.opposite(b,l);if(!(0>h)){if(l<b){var d=b;b=l;l=d;d=u;u=h;h=d}e.isConstraint(b,l)||0>g(a[b],a[l],a[u],a[h])&&n.push(b,l)}}var g=a("robust-in-sphere")[4];a("binary-search-bounds");t.exports=function(a,e){for(var h=[],b=a.length,l=e.stars,u=0;u<b;++u)for(var q=
l[u],d=1;d<q.length;d+=2){var f=q[d];if(!(f<u||e.isConstraint(u,f))){for(var c=q[d-1],k=-1,r=1;r<q.length;r+=2)if(q[r-1]===f){k=q[r];break}0>k||0>g(a[u],a[f],a[c],a[k])&&h.push(u,f)}}for(;0<h.length;){f=h.pop();u=h.pop();k=c=-1;q=l[u];for(b=1;b<q.length;b+=2)d=q[b-1],r=q[b],d===f?k=r:r===f&&(c=d);0>c||0>k||0<=g(a[u],a[f],a[c],a[k])||(e.flip(u,f),p(a,e,h,c,u,k),p(a,e,h,u,k,c),p(a,e,h,k,f,c),p(a,e,h,f,c,k))}}},{"binary-search-bounds":101,"robust-in-sphere":492}],98:[function(a,t,m){function p(a,g,b,
l,h,q,d){this.cells=a;this.neighbor=g;this.flags=l;this.constraint=b;this.active=h;this.next=q;this.boundary=d}function g(a,g){return a[0]-g[0]||a[1]-g[1]||a[2]-g[2]}var h=a("binary-search-bounds");t.exports=function(a,h,b){for(var e=a.cells(),n=e.length,q=0;q<n;++q){var d=e[q],f=d[0],c=d[1],k=d[2];c<k?c<f&&(d[0]=c,d[1]=k,d[2]=f):k<f&&(d[0]=k,d[1]=f,d[2]=c)}e.sort(g);var r=Array(n);for(q=0;q<r.length;++q)r[q]=0;var v=[],z=[],A=Array(3*n),y=Array(3*n),w=null;b&&(w=[]);k=new p(e,A,y,r,v,z,w);for(q=
0;q<n;++q){d=e[q];for(var x=0;3>x;++x){f=d[x];c=d[(x+1)%3];var F=A[3*q+x]=k.locate(c,f,a.opposite(c,f)),B=y[3*q+x]=a.isConstraint(f,c);0>F&&(B?z.push(q):(v.push(q),r[q]=1),b&&w.push([c,f,-1]))}}if(0===h)return b?k.cells.concat(k.boundary):k.cells;n=1;q=k.active;d=k.next;a=k.flags;e=k.cells;f=k.constraint;for(c=k.neighbor;0<q.length||0<d.length;){for(;0<q.length;)if(r=q.pop(),a[r]!==-n)for(a[r]=n,v=0;3>v;++v)z=c[3*r+v],0<=z&&0===a[z]&&(f[3*r+v]?d.push(z):(q.push(z),a[z]=n));r=d;d=q;q=r;d.length=0;
n=-n}for(q=n=0;q<e.length;++q)a[q]===h&&(e[n++]=e[q]);e.length=n;return b?e.concat(k.boundary):e};p.prototype.locate=function(){var a=[0,0,0];return function(e,b,l){var n=e,q=b,d=l;b<l?b<e&&(n=b,q=l,d=e):l<e&&(n=l,q=e,d=b);if(0>n)return-1;a[0]=n;a[1]=q;a[2]=d;return h.eq(this.cells,a,g)}}()},{"binary-search-bounds":101}],99:[function(a,t,m){function p(b,a,d,f,c){this.a=b;this.b=a;this.idx=d;this.lowerIds=f;this.upperIds=c}function g(b,a,d,f){this.a=b;this.b=a;this.type=d;this.idx=f}function h(b,a){var d=
b.a[0]-a.a[0]||b.a[1]-a.a[1]||b.type-a.type;return d||0!==b.type&&(d=l(b.a,b.b,a.b))?d:b.idx-a.idx}function e(b,a){return l(b.a,b.b,a)}function n(b,a){var d;return(d=b.a[0]<a.a[0]?l(b.a,b.b,a.a):l(a.b,a.a,b.a))?d:(d=a.b[0]<b.b[0]?l(b.a,b.b,a.b):l(a.b,a.a,b.b))||b.idx-a.idx}var b=a("binary-search-bounds"),l=a("robust-orientation")[3];t.exports=function(a,q){for(var d=a.length,f=q.length,c=[],k=0;k<d;++k)c.push(new g(a[k],null,0,k));for(k=0;k<f;++k){var r=q[k];d=a[r[0]];r=a[r[1]];d[0]<r[0]?c.push(new g(d,
r,2,k),new g(r,d,1,k)):d[0]>r[0]&&c.push(new g(r,d,2,k),new g(d,r,1,k))}c.sort(h);k=c[0].a[0]-(1+Math.abs(c[0].a[0]))*Math.pow(2,-52);q=[new p([k,1],[k,0],-1,[],[],[],[])];f=[];k=0;for(d=c.length;k<d;++k){var v=c[k];r=v.type;if(0===r){r=f;var u=q,A=a,y=v.a;v=v.idx;for(var w=b.lt(u,y,e),x=b.gt(u,y,e);w<x;++w){for(var F=u[w],B=F.lowerIds,C=B.length;1<C&&0<l(A[B[C-2]],A[B[C-1]],y);)r.push([B[C-1],B[C-2],v]),--C;B.length=C;B.push(v);F=F.upperIds;for(C=F.length;1<C&&0>l(A[F[C-2]],A[F[C-1]],y);)r.push([F[C-
2],F[C-1],v]),--C;F.length=C;F.push(v)}}else 2===r?(r=q,u=v,A=b.le(r,u,n),y=r[A],v=y.upperIds,x=v[v.length-1],y.upperIds=[x],r.splice(A+1,0,new p(u.a,u.b,u.idx,[x],v))):(r=q,u=v,A=u.a,u.a=u.b,u.b=A,u=b.eq(r,u,n),r[u-1].upperIds=r[u].upperIds,r.splice(u,1))}return f}},{"binary-search-bounds":101,"robust-orientation":494}],100:[function(a,t,m){function p(a,g){this.stars=a;this.edges=g}function g(a,g,b){for(var e=1,h=a.length;e<h;e+=2)if(a[e-1]===g&&a[e]===b){a[e-1]=a[h-2];a[e]=a[h-1];a.length=h-2;break}}
var h=a("binary-search-bounds");t.exports=function(a,g){for(var b=Array(a),e=0;e<a;++e)b[e]=[];return new p(b,g)};a=p.prototype;a.isConstraint=function(){function a(b,a){return b[0]-a[0]||b[1]-a[1]}var g=[0,0];return function(b,e){g[0]=Math.min(b,e);g[1]=Math.max(b,e);return 0<=h.eq(this.edges,g,a)}}();a.removeTriangle=function(a,h,b){var e=this.stars;g(e[a],h,b);g(e[h],b,a);g(e[b],a,h)};a.addTriangle=function(a,g,b){var e=this.stars;e[a].push(g,b);e[g].push(b,a);e[b].push(a,g)};a.opposite=function(a,
g){g=this.stars[g];for(var b=1,e=g.length;b<e;b+=2)if(g[b]===a)return g[b-1];return-1};a.flip=function(a,g){var b=this.opposite(a,g),e=this.opposite(g,a);this.removeTriangle(a,g,b);this.removeTriangle(g,a,e);this.addTriangle(a,e,b);this.addTriangle(g,b,e)};a.edges=function(){for(var a=this.stars,g=[],b=0,l=a.length;b<l;++b)for(var h=a[b],q=0,d=h.length;q<d;q+=2)g.push([h[q],h[q+1]]);return g};a.cells=function(){for(var a=this.stars,g=[],b=0,l=a.length;b<l;++b)for(var h=a[b],q=0,d=h.length;q<d;q+=
2){var f=h[q],c=h[q+1];b<Math.min(f,c)&&g.push([b,f,c])}return g}},{"binary-search-bounds":101}],101:[function(a,t,m){function p(a,e,g,b,l){a=["function ",a,"(a,l,h,",b.join(","),"){",l?"":"var i\x3d",g?"l-1":"h+1",";while(l\x3c\x3dh){var m\x3d(l+h)\x3e\x3e\x3e1,x\x3da[m]"];l?0>e.indexOf("c")?a.push(";if(x\x3d\x3d\x3dy){return m}else if(x\x3c\x3dy){"):a.push(";var p\x3dc(x,y);if(p\x3d\x3d\x3d0){return m}else if(p\x3c\x3d0){"):a.push(";if(",e,"){i\x3dm;");g?a.push("l\x3dm+1}else{h\x3dm-1}"):a.push("h\x3dm-1}else{l\x3dm+1}");
a.push("}");l?a.push("return -1};"):a.push("return i};");return a.join("")}function g(a,e,g,b){return(new Function([p("A","x"+a+"y",e,["y"],b),p("P","c(x,y)"+a+"0",e,["y","c"],b),"function dispatchBsearch",g,"(a,y,c,l,h){if(typeof(c)\x3d\x3d\x3d'function'){return P(a,(l\x3d\x3d\x3dvoid 0)?0:l|0,(h\x3d\x3d\x3dvoid 0)?a.length-1:h|0,y,c)}else{return A(a,(c\x3d\x3d\x3dvoid 0)?0:c|0,(l\x3d\x3d\x3dvoid 0)?a.length-1:l|0,y)}}return dispatchBsearch",g].join("")))()}t.exports={ge:g("\x3e\x3d",!1,"GE"),gt:g("\x3e",
!1,"GT"),lt:g("\x3c",!0,"LT"),le:g("\x3c\x3d",!0,"LE"),eq:g("-",!0,"EQ",!0)}},{}],102:[function(a,t,m){t.exports=function(a){for(var g=1,h=1;h<a.length;++h)for(var e=0;e<h;++e)if(a[h]<a[e])g=-g;else if(a[e]===a[h])return 0;return g}},{}],103:[function(a,t,m){function p(b,a){for(var e=0,g=b.length,d=0;d<g;++d)e+=b[d]*a[d];return e}function g(b){var a=b.length;if(0===a)return[];for(var g=e([b.length+1,b.length+1],1),h=e([b.length+1],1),d=g[a][a]=0;d<a;++d){for(var f=0;f<=d;++f)g[f][d]=g[d][f]=2*p(b[d],
b[f]);h[d]=p(b[d],b[d])}b=n(g,h);g=0;h=b[a+1];for(d=0;d<h.length;++d)g+=h[d];var c=Array(a);for(d=0;d<a;++d){h=b[d];var k=0;for(f=0;f<h.length;++f)k+=h[f];c[d]=k/g}return c}function h(b){if(0===b.length)return[];for(var a=b[0].length,h=e([a]),q=g(b),d=0;d<b.length;++d)for(var f=0;f<a;++f)h[f]+=b[d][f]*q[d];return h}var e=a("dup"),n=a("robust-linear-solve");h.barycenetric=g;t.exports=h},{dup:161,"robust-linear-solve":493}],104:[function(a,t,m){t.exports=function(a){for(var g=p(a),e=0,n=0;n<a.length;++n)for(var b=
a[n],l=0;l<g.length;++l)e+=Math.pow(b[l]-g[l],2);return Math.sqrt(e/a.length)};var p=a("circumcenter")},{circumcenter:103}],105:[function(a,t,m){t.exports=function(a,g,h){return g<h?a<g?g:a>h?h:a:a<h?h:a>g?g:a}},{}],106:[function(a,t,m){function p(b){b=z(b);return[y(b,-Infinity),y(b,Infinity)]}function g(b){for(var a=Array(b.length),c=0;c<b.length;++c){var d=b[c];a[c]=[y(d[0],-Infinity),y(d[1],-Infinity),y(d[0],Infinity),y(d[1],Infinity)]}return a}function h(b,a,d){var f=[];c(d,function(c,d){var e=
a[c],r=a[d];e[0]!==r[0]&&e[0]!==r[1]&&e[1]!==r[0]&&e[1]!==r[1]&&k(b[e[0]],b[e[1]],b[r[0]],b[r[1]])&&f.push([c,d])});return f}function e(b,a,d,f){var e=[];c(d,f,function(c,d){var f=a[c];if(f[0]!==d&&f[1]!==d){var r=b[d];k(b[f[0]],b[f[1]],r,r)&&e.push([c,d])}});return e}function n(b,a,c,d,f){var e,k=b.map(function(b){return[r(b[0]),r(b[1])]});for(e=0;e<c.length;++e){var g=c[e];var l=g[0];g=g[1];var h=a[l],q=a[g];if(h=w(A(b[h[0]]),A(b[h[1]]),A(b[q[0]]),A(b[q[1]])))q=b.length,b.push([z(h[0]),z(h[1])]),
k.push(h),d.push([l,q],[g,q])}d.sort(function(b,a){if(b[0]!==a[0])return b[0]-a[0];b=k[b[1]];a=k[a[1]];return v(b[0],a[0])||v(b[1],a[1])});for(e=d.length-1;0<=e;--e){g=d[e];l=g[0];h=a[l];q=h[0];c=h[1];var n=b[q],u=b[c];0>(n[0]-u[0]||n[1]-u[1])&&(n=q,q=c,c=n);h[0]=q;q=h[1]=g[1];var p;for(f&&(p=h[2]);0<e&&d[e-1][0]===l;)g=d[--e],g=g[1],f?a.push([q,g,p]):a.push([q,g]),q=g;f?a.push([q,c,p]):a.push([q,c])}return k}function b(b,a,d){d=a.length;for(var e=new f(d),k=[],r=0;r<a.length;++r){var g=a[r],l=p(g[0]);
g=p(g[1]);k.push([y(l[0],-Infinity),y(g[0],-Infinity),y(l[1],Infinity),y(g[1],Infinity)])}c(k,function(b,a){e.link(b,a)});l=!0;a=Array(d);for(r=0;r<d;++r)k=e.find(r),k!==r&&(l=!1,b[k]=[Math.min(b[r][0],b[k][0]),Math.min(b[r][1],b[k][1])]);if(l)return null;for(r=l=0;r<d;++r)k=e.find(r),k===r?(a[r]=l,b[l++]=b[r]):a[r]=-1;b.length=l;for(r=0;r<d;++r)0>a[r]&&(a[r]=a[e.find(r)]);return a}function l(b,a){return b[0]-a[0]||b[1]-a[1]}function u(b,a){var c=b[0]-a[0]||b[1]-a[1];return c?c:b[2]<a[2]?-1:b[2]>
a[2]?1:0}function q(b,a,c){if(0!==b.length){if(a)for(var d=0;d<b.length;++d){var f=b[d],e=a[f[0]],k=a[f[1]];f[0]=Math.min(e,k);f[1]=Math.max(e,k)}else for(d=0;d<b.length;++d)f=b[d],e=f[0],k=f[1],f[0]=Math.min(e,k),f[1]=Math.max(e,k);c?b.sort(u):b.sort(l);for(d=a=1;d<b.length;++d)if(f=b[d-1],e=b[d],e[0]!==f[0]||e[1]!==f[1]||c&&e[2]!==f[2])b[a++]=e;b.length=a}}function d(a,c,d){for(var f=Array(c.length),k=0;k<c.length;++k){var r=c[k],l=a[r[0]];r=a[r[1]];f[k]=[y(Math.min(l[0],r[0]),-Infinity),y(Math.min(l[1],
r[1]),-Infinity),y(Math.max(l[0],r[0]),Infinity),y(Math.max(l[1],r[1]),Infinity)]}k=h(a,c,f);l=g(a);f=e(a,c,f,l);r=n(a,c,k,f,d);a=b(a,r,l);q(c,a,d);return a?!0:0<k.length||0<f.length}t.exports=function(a,c,f){if(f){var e=c;for(var k=Array(c.length),r=0;r<c.length;++r){var l=c[r];k[r]=[l[0],l[1],f[r]]}c=k}r=c;l=!!f;k=b(a,[],g(a));q(r,k,l);for(k=!!k;d(a,c,!!f);)k=!0;if(f&&k)for(e.length=0,r=f.length=0;r<c.length;++r)l=c[r],e.push([l[0],l[1]]),f.push(l[2]);return k};var f=a("union-find"),c=a("box-intersect"),
k=a("robust-segment-intersect"),r=a("big-rat"),v=a("big-rat/cmp"),z=a("big-rat/to-float"),A=a("rat-vec"),y=a("nextafter"),w=a("./lib/rat-seg-intersect")},{"./lib/rat-seg-intersect":107,"big-rat":68,"big-rat/cmp":66,"big-rat/to-float":80,"box-intersect":86,nextafter:443,"rat-vec":478,"robust-segment-intersect":497,"union-find":530}],107:[function(a,t,m){function p(b,a){return e(g(b[0],a[1]),g(b[1],a[0]))}t.exports=function(a,d,f,c){d=b(d,a);var e=b(c,f);c=p(d,e);if(0===n(c))return null;f=b(a,f);f=
p(e,f);f=h(f,c);d=u(d,f);return l(a,d)};var g=a("big-rat/mul"),h=a("big-rat/div"),e=a("big-rat/sub"),n=a("big-rat/sign"),b=a("rat-vec/sub"),l=a("rat-vec/add"),u=a("rat-vec/muls")},{"big-rat/div":67,"big-rat/mul":77,"big-rat/sign":78,"big-rat/sub":79,"rat-vec/add":477,"rat-vec/muls":479,"rat-vec/sub":480}],108:[function(a,t,m){function p(a,e){null==e&&(e=!0);var h=a[0],b=a[1],l=a[2];a=a[3];null==a&&(a=e?1:255);e&&(h*=255,b*=255,l*=255,a*=255);h=g(h,0,255)&255;b=g(b,0,255)&255;l=g(l,0,255)&255;a=g(a,
0,255)&255;return 16777216*h+(b<<16)+(l<<8)+a}var g=a("clamp");t.exports=p;t.exports.to=p;t.exports.from=function(a,e){a=+a;var g=a>>>24,b=(a&16711680)>>>16,l=(a&65280)>>>8;a&=255;return!1===e?[g,b,l,a]:[g/255,b/255,l/255,a/255]}},{clamp:105}],109:[function(a,t,m){t.exports={aliceblue:[240,248,255],antiquewhite:[250,235,215],aqua:[0,255,255],aquamarine:[127,255,212],azure:[240,255,255],beige:[245,245,220],bisque:[255,228,196],black:[0,0,0],blanchedalmond:[255,235,205],blue:[0,0,255],blueviolet:[138,
43,226],brown:[165,42,42],burlywood:[222,184,135],cadetblue:[95,158,160],chartreuse:[127,255,0],chocolate:[210,105,30],coral:[255,127,80],cornflowerblue:[100,149,237],cornsilk:[255,248,220],crimson:[220,20,60],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],darkgoldenrod:[184,134,11],darkgray:[169,169,169],darkgreen:[0,100,0],darkgrey:[169,169,169],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,
150,122],darkseagreen:[143,188,143],darkslateblue:[72,61,139],darkslategray:[47,79,79],darkslategrey:[47,79,79],darkturquoise:[0,206,209],darkviolet:[148,0,211],deeppink:[255,20,147],deepskyblue:[0,191,255],dimgray:[105,105,105],dimgrey:[105,105,105],dodgerblue:[30,144,255],firebrick:[178,34,34],floralwhite:[255,250,240],forestgreen:[34,139,34],fuchsia:[255,0,255],gainsboro:[220,220,220],ghostwhite:[248,248,255],gold:[255,215,0],goldenrod:[218,165,32],gray:[128,128,128],green:[0,128,0],greenyellow:[173,
255,47],grey:[128,128,128],honeydew:[240,255,240],hotpink:[255,105,180],indianred:[205,92,92],indigo:[75,0,130],ivory:[255,255,240],khaki:[240,230,140],lavender:[230,230,250],lavenderblush:[255,240,245],lawngreen:[124,252,0],lemonchiffon:[255,250,205],lightblue:[173,216,230],lightcoral:[240,128,128],lightcyan:[224,255,255],lightgoldenrodyellow:[250,250,210],lightgray:[211,211,211],lightgreen:[144,238,144],lightgrey:[211,211,211],lightpink:[255,182,193],lightsalmon:[255,160,122],lightseagreen:[32,
178,170],lightskyblue:[135,206,250],lightslategray:[119,136,153],lightslategrey:[119,136,153],lightsteelblue:[176,196,222],lightyellow:[255,255,224],lime:[0,255,0],limegreen:[50,205,50],linen:[250,240,230],magenta:[255,0,255],maroon:[128,0,0],mediumaquamarine:[102,205,170],mediumblue:[0,0,205],mediumorchid:[186,85,211],mediumpurple:[147,112,219],mediumseagreen:[60,179,113],mediumslateblue:[123,104,238],mediumspringgreen:[0,250,154],mediumturquoise:[72,209,204],mediumvioletred:[199,21,133],midnightblue:[25,
25,112],mintcream:[245,255,250],mistyrose:[255,228,225],moccasin:[255,228,181],navajowhite:[255,222,173],navy:[0,0,128],oldlace:[253,245,230],olive:[128,128,0],olivedrab:[107,142,35],orange:[255,165,0],orangered:[255,69,0],orchid:[218,112,214],palegoldenrod:[238,232,170],palegreen:[152,251,152],paleturquoise:[175,238,238],palevioletred:[219,112,147],papayawhip:[255,239,213],peachpuff:[255,218,185],peru:[205,133,63],pink:[255,192,203],plum:[221,160,221],powderblue:[176,224,230],purple:[128,0,128],
rebeccapurple:[102,51,153],red:[255,0,0],rosybrown:[188,143,143],royalblue:[65,105,225],saddlebrown:[139,69,19],salmon:[250,128,114],sandybrown:[244,164,96],seagreen:[46,139,87],seashell:[255,245,238],sienna:[160,82,45],silver:[192,192,192],skyblue:[135,206,235],slateblue:[106,90,205],slategray:[112,128,144],slategrey:[112,128,144],snow:[255,250,250],springgreen:[0,255,127],steelblue:[70,130,180],tan:[210,180,140],teal:[0,128,128],thistle:[216,191,216],tomato:[255,99,71],turquoise:[64,224,208],violet:[238,
130,238],wheat:[245,222,179],white:[255,255,255],whitesmoke:[245,245,245],yellow:[255,255,0],yellowgreen:[154,205,50]}},{}],110:[function(a,t,m){var p=a("color-rgba"),g=a("clamp"),h=a("dtype");t.exports=function(a,n){"float"!==n&&n||(n="array");"uint"===n&&(n="uint8");"uint_clamped"===n&&(n="uint8_clamped");var b=new (h(n))(4);n="uint8"!==n&&"uint8_clamped"!==n;a.length&&"string"!==typeof a||(a=p(a),a[0]/=255,a[1]/=255,a[2]/=255);var e=a;e=e instanceof Uint8Array||e instanceof Uint8ClampedArray?!0:
Array.isArray(e)&&(1<e[0]||0===e[0])&&(1<e[1]||0===e[1])&&(1<e[2]||0===e[2])&&(!e[3]||1<e[3])?!0:!1;if(e)return b[0]=a[0],b[1]=a[1],b[2]=a[2],b[3]=null!=a[3]?a[3]:255,n&&(b[0]/=255,b[1]/=255,b[2]/=255,b[3]/=255),b;n?(b[0]=a[0],b[1]=a[1],b[2]=a[2],b[3]=null!=a[3]?a[3]:1):(b[0]=g(Math.floor(255*a[0]),0,255),b[1]=g(Math.floor(255*a[1]),0,255),b[2]=g(Math.floor(255*a[2]),0,255),b[3]=null==a[3]?255:g(Math.floor(255*a[3]),0,255));return b}},{clamp:105,"color-rgba":112,dtype:160}],111:[function(a,t,m){(function(p){var g=
a("color-name"),h=a("is-plain-obj"),e=a("defined");t.exports=function(b){var a,u=[],q=1;if("string"===typeof b)if(g[b]){u=g[b].slice();var d="rgb"}else if("transparent"===b)q=0,d="rgb",u=[0,0,0];else if(/^#[A-Fa-f0-9]+$/.test(b)){var f=b.slice(1),c=f.length;q=1;4>=c?(u=[parseInt(f[0]+f[0],16),parseInt(f[1]+f[1],16),parseInt(f[2]+f[2],16)],4===c&&(q=parseInt(f[3]+f[3],16)/255)):(u=[parseInt(f[0]+f[1],16),parseInt(f[2]+f[3],16),parseInt(f[4]+f[5],16)],8===c&&(q=parseInt(f[6]+f[7],16)/255));u[0]||(u[0]=
0);u[1]||(u[1]=0);u[2]||(u[2]=0);d="rgb"}else(a=/^((?:rgb|hs[lvb]|hwb|cmyk?|xy[zy]|gray|lab|lchu?v?|[ly]uv|lms)a?)\s*\(([^\)]*)\)/.exec(b))?(b=a[1],d=f=b.replace(/a$/,""),c="cmyk"===f?4:"gray"===f?1:3,u=a[2].trim().split(/\s*,\s*/).map(function(b,a){if(/%$/.test(b)){if(a===c)return parseFloat(b)/100;if("rgb"===f)return 255*parseFloat(b)/100}else if("h"===f[a]&&!/deg$/.test(b)&&void 0!==n[b])return n[b];return parseFloat(b)}),b===f&&u.push(1),q=void 0===u[c]?1:u[c],u=u.slice(0,c)):10<b.length&&/[0-9](?:\s|\/)/.test(b)&&
(u=b.match(/([0-9]+)/g).map(function(b){return parseFloat(b)}),d=b.match(/([a-z])/ig).join("").toLowerCase());else if(!isNaN(b))d="rgb",u=[b>>>16,(b&65280)>>>8,b&255];else if(h(b))a=e(b.r,b.red,b.R,null),null!==a?(d="rgb",u=[a,e(b.g,b.green,b.G),e(b.b,b.blue,b.B)]):(d="hsl",u=[e(b.h,b.hue,b.H),e(b.s,b.saturation,b.S),e(b.l,b.lightness,b.L,b.b,b.brightness)]),q=e(b.a,b.alpha,b.opacity,1),null!=b.opacity&&(q/=100);else if(Array.isArray(b)||p.ArrayBuffer&&ArrayBuffer.isView&&ArrayBuffer.isView(b))u=
[b[0],b[1],b[2]],d="rgb",q=4===b.length?b[3]:1;return{space:d,values:u,alpha:q}};var n={red:0,orange:60,yellow:120,green:180,blue:240,purple:300}}).call(this,"undefined"!==typeof ja?ja:"undefined"!==typeof self?self:"undefined"!==typeof window?window:{})},{"color-name":109,defined:155,"is-plain-obj":414}],112:[function(a,t,m){var p=a("color-parse"),g=a("color-space/hsl"),h=a("clamp");t.exports=function(a){var e=p(a);if(!e.space)return[];a=Array(3);a[0]=h(e.values[0],0,255);a[1]=h(e.values[1],0,255);
a[2]=h(e.values[2],0,255);"h"===e.space[0]&&(a=g.rgb(a));a.push(h(e.alpha,0,1));return a}},{clamp:105,"color-parse":111,"color-space/hsl":113}],113:[function(a,t,m){a=a("./rgb");t.exports={name:"hsl",min:[0,0,0],max:[360,100,100],channel:["hue","saturation","lightness"],alias:["HSL"],rgb:function(a){var g=a[0]/360,h=a[1]/100;a=a[2]/100;if(0===h){var e=255*a;return[e,e,e]}h=.5>a?a*(1+h):a+h-a*h;a=2*a-h;var n=[0,0,0];for(var b=0;3>b;b++)e=g+1/3*-(b-1),0>e?e++:1<e&&e--,e=1>6*e?a+6*(h-a)*e:1>2*e?h:2>
3*e?a+(h-a)*(2/3-e)*6:a,n[b]=255*e;return n}};a.hsl=function(a){var g=a[0]/255,h=a[1]/255,e=a[2]/255;a=Math.min(g,h,e);var n=Math.max(g,h,e),b=n-a,l;n===a?l=0:g===n?l=(h-e)/b:h===n?l=2+(e-g)/b:e===n&&(l=4+(g-h)/b);l=Math.min(60*l,360);0>l&&(l+=360);g=(a+n)/2;return[l,100*(n===a?0:.5>=g?b/(n+a):b/(2-n-a)),100*g]}},{"./rgb":114}],114:[function(a,t,m){t.exports={name:"rgb",min:[0,0,0],max:[255,255,255],channel:["red","green","blue"],alias:["RGB"]}},{}],115:[function(a,t,m){t.exports={jet:[{index:0,rgb:[0,
0,131]},{index:.125,rgb:[0,60,170]},{index:.375,rgb:[5,255,255]},{index:.625,rgb:[255,255,0]},{index:.875,rgb:[250,0,0]},{index:1,rgb:[128,0,0]}],hsv:[{index:0,rgb:[255,0,0]},{index:.169,rgb:[253,255,2]},{index:.173,rgb:[247,255,2]},{index:.337,rgb:[0,252,4]},{index:.341,rgb:[0,252,10]},{index:.506,rgb:[1,249,255]},{index:.671,rgb:[2,0,253]},{index:.675,rgb:[8,0,253]},{index:.839,rgb:[255,0,251]},{index:.843,rgb:[255,0,245]},{index:1,rgb:[255,0,6]}],hot:[{index:0,rgb:[0,0,0]},{index:.3,rgb:[230,0,
0]},{index:.6,rgb:[255,210,0]},{index:1,rgb:[255,255,255]}],cool:[{index:0,rgb:[0,255,255]},{index:1,rgb:[255,0,255]}],spring:[{index:0,rgb:[255,0,255]},{index:1,rgb:[255,255,0]}],summer:[{index:0,rgb:[0,128,102]},{index:1,rgb:[255,255,102]}],autumn:[{index:0,rgb:[255,0,0]},{index:1,rgb:[255,255,0]}],winter:[{index:0,rgb:[0,0,255]},{index:1,rgb:[0,255,128]}],bone:[{index:0,rgb:[0,0,0]},{index:.376,rgb:[84,84,116]},{index:.753,rgb:[169,200,200]},{index:1,rgb:[255,255,255]}],copper:[{index:0,rgb:[0,
0,0]},{index:.804,rgb:[255,160,102]},{index:1,rgb:[255,199,127]}],greys:[{index:0,rgb:[0,0,0]},{index:1,rgb:[255,255,255]}],yignbu:[{index:0,rgb:[8,29,88]},{index:.125,rgb:[37,52,148]},{index:.25,rgb:[34,94,168]},{index:.375,rgb:[29,145,192]},{index:.5,rgb:[65,182,196]},{index:.625,rgb:[127,205,187]},{index:.75,rgb:[199,233,180]},{index:.875,rgb:[237,248,217]},{index:1,rgb:[255,255,217]}],greens:[{index:0,rgb:[0,68,27]},{index:.125,rgb:[0,109,44]},{index:.25,rgb:[35,139,69]},{index:.375,rgb:[65,171,
93]},{index:.5,rgb:[116,196,118]},{index:.625,rgb:[161,217,155]},{index:.75,rgb:[199,233,192]},{index:.875,rgb:[229,245,224]},{index:1,rgb:[247,252,245]}],yiorrd:[{index:0,rgb:[128,0,38]},{index:.125,rgb:[189,0,38]},{index:.25,rgb:[227,26,28]},{index:.375,rgb:[252,78,42]},{index:.5,rgb:[253,141,60]},{index:.625,rgb:[254,178,76]},{index:.75,rgb:[254,217,118]},{index:.875,rgb:[255,237,160]},{index:1,rgb:[255,255,204]}],bluered:[{index:0,rgb:[0,0,255]},{index:1,rgb:[255,0,0]}],rdbu:[{index:0,rgb:[5,
10,172]},{index:.35,rgb:[106,137,247]},{index:.5,rgb:[190,190,190]},{index:.6,rgb:[220,170,132]},{index:.7,rgb:[230,145,90]},{index:1,rgb:[178,10,28]}],picnic:[{index:0,rgb:[0,0,255]},{index:.1,rgb:[51,153,255]},{index:.2,rgb:[102,204,255]},{index:.3,rgb:[153,204,255]},{index:.4,rgb:[204,204,255]},{index:.5,rgb:[255,255,255]},{index:.6,rgb:[255,204,255]},{index:.7,rgb:[255,153,255]},{index:.8,rgb:[255,102,204]},{index:.9,rgb:[255,102,102]},{index:1,rgb:[255,0,0]}],rainbow:[{index:0,rgb:[150,0,90]},
{index:.125,rgb:[0,0,200]},{index:.25,rgb:[0,25,255]},{index:.375,rgb:[0,152,255]},{index:.5,rgb:[44,255,150]},{index:.625,rgb:[151,255,0]},{index:.75,rgb:[255,234,0]},{index:.875,rgb:[255,111,0]},{index:1,rgb:[255,0,0]}],portland:[{index:0,rgb:[12,51,131]},{index:.25,rgb:[10,136,186]},{index:.5,rgb:[242,211,56]},{index:.75,rgb:[242,143,56]},{index:1,rgb:[217,30,30]}],blackbody:[{index:0,rgb:[0,0,0]},{index:.2,rgb:[230,0,0]},{index:.4,rgb:[230,210,0]},{index:.7,rgb:[255,255,255]},{index:1,rgb:[160,
200,255]}],earth:[{index:0,rgb:[0,0,130]},{index:.1,rgb:[0,180,180]},{index:.2,rgb:[40,210,40]},{index:.4,rgb:[230,230,50]},{index:.6,rgb:[120,70,20]},{index:1,rgb:[255,255,255]}],electric:[{index:0,rgb:[0,0,0]},{index:.15,rgb:[30,0,100]},{index:.4,rgb:[120,0,100]},{index:.6,rgb:[160,90,0]},{index:.8,rgb:[230,200,0]},{index:1,rgb:[255,250,220]}],alpha:[{index:0,rgb:[255,255,255,0]},{index:1,rgb:[255,255,255,1]}],viridis:[{index:0,rgb:[68,1,84]},{index:.13,rgb:[71,44,122]},{index:.25,rgb:[59,81,139]},
{index:.38,rgb:[44,113,142]},{index:.5,rgb:[33,144,141]},{index:.63,rgb:[39,173,129]},{index:.75,rgb:[92,200,99]},{index:.88,rgb:[170,220,50]},{index:1,rgb:[253,231,37]}],inferno:[{index:0,rgb:[0,0,4]},{index:.13,rgb:[31,12,72]},{index:.25,rgb:[85,15,109]},{index:.38,rgb:[136,34,106]},{index:.5,rgb:[186,54,85]},{index:.63,rgb:[227,89,51]},{index:.75,rgb:[249,140,10]},{index:.88,rgb:[249,201,50]},{index:1,rgb:[252,255,164]}],magma:[{index:0,rgb:[0,0,4]},{index:.13,rgb:[28,16,68]},{index:.25,rgb:[79,
18,123]},{index:.38,rgb:[129,37,129]},{index:.5,rgb:[181,54,122]},{index:.63,rgb:[229,80,100]},{index:.75,rgb:[251,135,97]},{index:.88,rgb:[254,194,135]},{index:1,rgb:[252,253,191]}],plasma:[{index:0,rgb:[13,8,135]},{index:.13,rgb:[75,3,161]},{index:.25,rgb:[125,3,168]},{index:.38,rgb:[168,34,150]},{index:.5,rgb:[203,70,121]},{index:.63,rgb:[229,107,93]},{index:.75,rgb:[248,148,65]},{index:.88,rgb:[253,195,40]},{index:1,rgb:[240,249,33]}],warm:[{index:0,rgb:[125,0,179]},{index:.13,rgb:[172,0,187]},
{index:.25,rgb:[219,0,170]},{index:.38,rgb:[255,0,130]},{index:.5,rgb:[255,63,74]},{index:.63,rgb:[255,123,0]},{index:.75,rgb:[234,176,0]},{index:.88,rgb:[190,228,0]},{index:1,rgb:[147,255,0]}],cool:[{index:0,rgb:[125,0,179]},{index:.13,rgb:[116,0,218]},{index:.25,rgb:[98,74,237]},{index:.38,rgb:[68,146,231]},{index:.5,rgb:[0,204,197]},{index:.63,rgb:[0,247,146]},{index:.75,rgb:[0,255,88]},{index:.88,rgb:[40,255,8]},{index:1,rgb:[147,255,0]}],"rainbow-soft":[{index:0,rgb:[125,0,179]},{index:.1,rgb:[199,
0,180]},{index:.2,rgb:[255,0,121]},{index:.3,rgb:[255,108,0]},{index:.4,rgb:[222,194,0]},{index:.5,rgb:[150,255,0]},{index:.6,rgb:[0,255,55]},{index:.7,rgb:[0,246,150]},{index:.8,rgb:[50,167,222]},{index:.9,rgb:[103,51,235]},{index:1,rgb:[124,0,186]}],bathymetry:[{index:0,rgb:[40,26,44]},{index:.13,rgb:[59,49,90]},{index:.25,rgb:[64,76,139]},{index:.38,rgb:[63,110,151]},{index:.5,rgb:[72,142,158]},{index:.63,rgb:[85,174,163]},{index:.75,rgb:[120,206,163]},{index:.88,rgb:[187,230,172]},{index:1,rgb:[253,
254,204]}],cdom:[{index:0,rgb:[47,15,62]},{index:.13,rgb:[87,23,86]},{index:.25,rgb:[130,28,99]},{index:.38,rgb:[171,41,96]},{index:.5,rgb:[206,67,86]},{index:.63,rgb:[230,106,84]},{index:.75,rgb:[242,149,103]},{index:.88,rgb:[249,193,135]},{index:1,rgb:[254,237,176]}],chlorophyll:[{index:0,rgb:[18,36,20]},{index:.13,rgb:[25,63,41]},{index:.25,rgb:[24,91,59]},{index:.38,rgb:[13,119,72]},{index:.5,rgb:[18,148,80]},{index:.63,rgb:[80,173,89]},{index:.75,rgb:[132,196,122]},{index:.88,rgb:[175,221,162]},
{index:1,rgb:[215,249,208]}],density:[{index:0,rgb:[54,14,36]},{index:.13,rgb:[89,23,80]},{index:.25,rgb:[110,45,132]},{index:.38,rgb:[120,77,178]},{index:.5,rgb:[120,113,213]},{index:.63,rgb:[115,151,228]},{index:.75,rgb:[134,185,227]},{index:.88,rgb:[177,214,227]},{index:1,rgb:[230,241,241]}],"freesurface-blue":[{index:0,rgb:[30,4,110]},{index:.13,rgb:[47,14,176]},{index:.25,rgb:[41,45,236]},{index:.38,rgb:[25,99,212]},{index:.5,rgb:[68,131,200]},{index:.63,rgb:[114,156,197]},{index:.75,rgb:[157,
181,203]},{index:.88,rgb:[200,208,216]},{index:1,rgb:[241,237,236]}],"freesurface-red":[{index:0,rgb:[60,9,18]},{index:.13,rgb:[100,17,27]},{index:.25,rgb:[142,20,29]},{index:.38,rgb:[177,43,27]},{index:.5,rgb:[192,87,63]},{index:.63,rgb:[205,125,105]},{index:.75,rgb:[216,162,148]},{index:.88,rgb:[227,199,193]},{index:1,rgb:[241,237,236]}],oxygen:[{index:0,rgb:[64,5,5]},{index:.13,rgb:[106,6,15]},{index:.25,rgb:[144,26,7]},{index:.38,rgb:[168,64,3]},{index:.5,rgb:[188,100,4]},{index:.63,rgb:[206,
136,11]},{index:.75,rgb:[220,174,25]},{index:.88,rgb:[231,215,44]},{index:1,rgb:[248,254,105]}],par:[{index:0,rgb:[51,20,24]},{index:.13,rgb:[90,32,35]},{index:.25,rgb:[129,44,34]},{index:.38,rgb:[159,68,25]},{index:.5,rgb:[182,99,19]},{index:.63,rgb:[199,134,22]},{index:.75,rgb:[212,171,35]},{index:.88,rgb:[221,210,54]},{index:1,rgb:[225,253,75]}],phase:[{index:0,rgb:[145,105,18]},{index:.13,rgb:[184,71,38]},{index:.25,rgb:[186,58,115]},{index:.38,rgb:[160,71,185]},{index:.5,rgb:[110,97,218]},{index:.63,
rgb:[50,123,164]},{index:.75,rgb:[31,131,110]},{index:.88,rgb:[77,129,34]},{index:1,rgb:[145,105,18]}],salinity:[{index:0,rgb:[42,24,108]},{index:.13,rgb:[33,50,162]},{index:.25,rgb:[15,90,145]},{index:.38,rgb:[40,118,137]},{index:.5,rgb:[59,146,135]},{index:.63,rgb:[79,175,126]},{index:.75,rgb:[120,203,104]},{index:.88,rgb:[193,221,100]},{index:1,rgb:[253,239,154]}],temperature:[{index:0,rgb:[4,35,51]},{index:.13,rgb:[23,51,122]},{index:.25,rgb:[85,59,157]},{index:.38,rgb:[129,79,143]},{index:.5,
rgb:[175,95,130]},{index:.63,rgb:[222,112,101]},{index:.75,rgb:[249,146,66]},{index:.88,rgb:[249,196,65]},{index:1,rgb:[232,250,91]}],turbidity:[{index:0,rgb:[34,31,27]},{index:.13,rgb:[65,50,41]},{index:.25,rgb:[98,69,52]},{index:.38,rgb:[131,89,57]},{index:.5,rgb:[161,112,59]},{index:.63,rgb:[185,140,66]},{index:.75,rgb:[202,174,88]},{index:.88,rgb:[216,209,126]},{index:1,rgb:[233,246,171]}],"velocity-blue":[{index:0,rgb:[17,32,64]},{index:.13,rgb:[35,52,116]},{index:.25,rgb:[29,81,156]},{index:.38,
rgb:[31,113,162]},{index:.5,rgb:[50,144,169]},{index:.63,rgb:[87,173,176]},{index:.75,rgb:[149,196,189]},{index:.88,rgb:[203,221,211]},{index:1,rgb:[254,251,230]}],"velocity-green":[{index:0,rgb:[23,35,19]},{index:.13,rgb:[24,64,38]},{index:.25,rgb:[11,95,45]},{index:.38,rgb:[39,123,35]},{index:.5,rgb:[95,146,12]},{index:.63,rgb:[152,165,18]},{index:.75,rgb:[201,186,69]},{index:.88,rgb:[233,216,137]},{index:1,rgb:[255,253,205]}],cubehelix:[{index:0,rgb:[0,0,0]},{index:.07,rgb:[22,5,59]},{index:.13,
rgb:[60,4,105]},{index:.2,rgb:[109,1,135]},{index:.27,rgb:[161,0,147]},{index:.33,rgb:[210,2,142]},{index:.4,rgb:[251,11,123]},{index:.47,rgb:[255,29,97]},{index:.53,rgb:[255,54,69]},{index:.6,rgb:[255,85,46]},{index:.67,rgb:[255,120,34]},{index:.73,rgb:[255,157,37]},{index:.8,rgb:[241,191,57]},{index:.87,rgb:[224,220,93]},{index:.93,rgb:[218,241,142]},{index:1,rgb:[227,253,198]}]}},{}],116:[function(a,t,m){function p(b){return[b[0]/255,b[1]/255,b[2]/255,b[3]]}function g(b){for(var a,e="#",g=0;3>
g;++g)a=b[g],a=a.toString(16),e+=("00"+a).substr(a.length);return e}function h(b){return"rgba("+b.join(",")+")"}var e=a("./colorScale"),n=a("lerp");t.exports=function(b){var a,u;b||(b={});var q=(b.nshades||72)-1;var d=b.format||"hex";(a=b.colormap)||(a="jet");if("string"===typeof a){a=a.toLowerCase();if(!e[a])throw Error(a+" not a supported colorscale");var f=e[a]}else if(Array.isArray(a))f=a.slice();else throw Error("unsupported colormap option",a);if(f.length>q+1)throw Error(a+" map requires nshades to be at least size "+
f.length);var c=Array.isArray(b.alpha)?2!==b.alpha.length?[1,1]:b.alpha.slice():"number"===typeof b.alpha?[b.alpha,b.alpha]:[1,1];b=f.map(function(b){return Math.round(b.index*q)});c[0]=Math.min(Math.max(c[0],0),1);c[1]=Math.min(Math.max(c[1],0),1);var k=f.map(function(b,a){b=f[a].index;a=f[a].rgb.slice();if(4===a.length&&0<=a[3]&&1>=a[3])return a;a[3]=c[0]+(c[1]-c[0])*b;return a});var r=[];for(u=0;u<b.length-1;++u){var v=b[u+1]-b[u];a=k[u];var z=k[u+1];for(var A=0;A<v;A++){var y=A/v;r.push([Math.round(n(a[0],
z[0],y)),Math.round(n(a[1],z[1],y)),Math.round(n(a[2],z[2],y)),n(a[3],z[3],y)])}}r.push(f[f.length-1].rgb.concat(c[1]));"hex"===d?r=r.map(g):"rgbaString"===d?r=r.map(h):"float"===d&&(r=r.map(p));return r}},{"./colorScale":115,lerp:417}],117:[function(a,t,m){function p(a,g,h){var d=e(a[0],-g[0]);a=e(a[1],-g[1]);var f=e(h[0],-g[0]);g=e(h[1],-g[1]);d=b(n(d,f),n(a,g));return 0<=d[d.length-1]}t.exports=function(b,a,e,d){var f=g(a,e,d);if(0===f){f=h(g(b,a,e));var c=h(g(b,a,d));return f===c?0===f&&(e=p(b,
a,e),b=p(b,a,d),e!==b)?e?1:-1:0:0===c?0<f?-1:p(b,a,d)?-1:1:0===f?0<c?1:p(b,a,e)?1:-1:h(c-f)}c=g(b,a,e);return 0<c?0<f&&0<g(b,a,d)?1:-1:0>c?0<f||0<g(b,a,d)?1:-1:0<g(b,a,d)?1:p(b,a,e)?1:-1};var g=a("robust-orientation"),h=a("signum"),e=a("two-sum"),n=a("robust-product"),b=a("robust-sum")},{"robust-orientation":494,"robust-product":495,"robust-sum":499,signum:500,"two-sum":528}],118:[function(a,t,m){function p(a,e){return a-e}t.exports=function(a,e){var h=a.length,b=a.length-e.length;if(b)return b;switch(h){case 0:return 0;
case 1:return a[0]-e[0];case 2:return a[0]+a[1]-e[0]-e[1]||g(a[0],a[1])-g(e[0],e[1]);case 3:h=a[0]+a[1];var l=e[0]+e[1];if(b=h+a[2]-(l+e[2]))return b;b=g(a[0],a[1]);var u=g(e[0],e[1]);return g(b,a[2])-g(u,e[2])||g(b+a[2],h)-g(u+e[2],l);case 4:b=a[0];h=a[1];l=a[2];a=a[3];u=e[0];var q=e[1],d=e[2];e=e[3];return b+h+l+a-(u+q+d+e)||g(b,h,l,a)-g(u,q,d,e,u)||g(b+h,b+l,b+a,h+l,h+a,l+a)-g(u+q,u+d,u+e,q+d,q+e,d+e)||g(b+h+l,b+h+a,b+l+a,h+l+a)-g(u+q+d,u+q+e,u+d+e,q+d+e);default:a=a.slice().sort(p);e=e.slice().sort(p);
for(l=0;l<h;++l)if(b=a[l]-e[l])return b;return 0}};var g=Math.min},{}],119:[function(a,t,m){var p=a("compare-cell"),g=a("cell-orientation");t.exports=function(a,e){return p(a,e)||g(a)-g(e)}},{"cell-orientation":102,"compare-cell":118}],120:[function(a,t,m){var p=a("./lib/ch1d"),g=a("./lib/ch2d"),h=a("./lib/chnd");t.exports=function(a){var e=a.length;if(0===e)return[];if(1===e)return[[0]];e=a[0].length;return 0===e?[]:1===e?p(a):2===e?g(a):h(a,e)}},{"./lib/ch1d":121,"./lib/ch2d":122,"./lib/chnd":123}],
121:[function(a,t,m){t.exports=function(a){for(var g=0,h=0,e=1;e<a.length;++e)a[e][0]<a[g][0]&&(g=e),a[e][0]>a[h][0]&&(h=e);return g<h?[[g],[h]]:g>h?[[h],[g]]:[[g]]}},{}],122:[function(a,t,m){t.exports=function(a){a=p(a);var g=a.length;if(2>=g)return[];for(var e=Array(g),n=a[g-1],b=0;b<g;++b){var l=a[b];e[b]=[n,l];n=l}return e};var p=a("monotone-convex-hull-2d")},{"monotone-convex-hull-2d":426}],123:[function(a,t,m){t.exports=function(a,e){try{return p(a,!0)}catch(c){var h=g(a);if(h.length<=e)return[];
e=a.length;for(var b=Array(e),l=0;l<h.length;++l)b[l]=a[h[l]];var u=h.length;for(l=0;l<e;++l)0>h.indexOf(l)&&(b[u++]=a[l]);a=p(b,!0);e=a.length;b=h.length;for(l=0;l<e;++l){u=a[l];for(var q=0;q<u.length;++q){var d=u[q];if(d<b)u[q]=h[d];else{d-=b;for(var f=0;f<b;++f)d>=h[f]&&(d+=1);u[q]=d}}}return a}};var p=a("incremental-convex-hull"),g=a("affine-hull")},{"affine-hull":52,"incremental-convex-hull":405}],124:[function(a,t,m){t.exports={AFG:"afghan",ALA:"\\b\\wland",ALB:"albania",DZA:"algeria",ASM:"^(?\x3d.*americ).*samoa",
AND:"andorra",AGO:"angola",AIA:"anguill?a",ATA:"antarctica",ATG:"antigua",ARG:"argentin",ARM:"armenia",ABW:"^(?!.*bonaire).*\\baruba",AUS:"australia",AUT:"^(?!.*hungary).*austria|\\baustri.*\\bemp",AZE:"azerbaijan",BHS:"bahamas",BHR:"bahrain",BGD:"bangladesh|^(?\x3d.*east).*paki?stan",BRB:"barbados",BLR:"belarus|byelo",BEL:"^(?!.*luxem).*belgium",BLZ:"belize|^(?\x3d.*british).*honduras",BEN:"benin|dahome",BMU:"bermuda",BTN:"bhutan",BOL:"bolivia",BES:"^(?\x3d.*bonaire).*eustatius|^(?\x3d.*carib).*netherlands|\\bbes.?islands",
BIH:"herzegovina|bosnia",BWA:"botswana|bechuana",BVT:"bouvet",BRA:"brazil",IOT:"british.?indian.?ocean",BRN:"brunei",BGR:"bulgaria",BFA:"burkina|\\bfaso|upper.?volta",BDI:"burundi",CPV:"verde",KHM:"cambodia|kampuchea|khmer",CMR:"cameroon",CAN:"canada",CYM:"cayman",CAF:"\\bcentral.african.republic",TCD:"\\bchad",CHL:"\\bchile",CHN:"^(?!.*\\bmac)(?!.*\\bhong)(?!.*\\btai)(?!.*\\brep).*china|^(?\x3d.*peo)(?\x3d.*rep).*china",CXR:"christmas",CCK:"\\bcocos|keeling",COL:"colombia",COM:"comoro",COG:"^(?!.*\\bdem)(?!.*\\bd[\\.]?r)(?!.*kinshasa)(?!.*zaire)(?!.*belg)(?!.*l.opoldville)(?!.*free).*\\bcongo",
COK:"\\bcook",CRI:"costa.?rica",CIV:"ivoire|ivory",HRV:"croatia",CUB:"\\bcuba",CUW:"^(?!.*bonaire).*\\bcura(c|)ao",CYP:"cyprus",CSK:"czechoslovakia",CZE:"^(?\x3d.*rep).*czech|czechia|bohemia",COD:"\\bdem.*congo|congo.*\\bdem|congo.*\\bd[\\.]?r|\\bd[\\.]?r.*congo|belgian.?congo|congo.?free.?state|kinshasa|zaire|l.opoldville|drc|droc|rdc",DNK:"denmark",DJI:"djibouti",DMA:"dominica(?!n)",DOM:"dominican.rep",ECU:"ecuador",EGY:"egypt",SLV:"el.?salvador",GNQ:"guine.*eq|eq.*guine|^(?\x3d.*span).*guinea",
ERI:"eritrea",EST:"estonia",ETH:"ethiopia|abyssinia",FLK:"falkland|malvinas",FRO:"faroe|faeroe",FJI:"fiji",FIN:"finland",FRA:"^(?!.*\\bdep)(?!.*martinique).*france|french.?republic|\\bgaul",GUF:"^(?\x3d.*french).*guiana",PYF:"french.?polynesia|tahiti",ATF:"french.?southern",GAB:"gabon",GMB:"gambia",GEO:"^(?!.*south).*georgia",DDR:"german.?democratic.?republic|democratic.?republic.*germany|east.germany",DEU:"^(?!.*east).*germany|^(?\x3d.*\\bfed.*\\brep).*german",GHA:"ghana|gold.?coast",GIB:"gibraltar",
GRC:"greece|hellenic|hellas",GRL:"greenland",GRD:"grenada",GLP:"guadeloupe",GUM:"\\bguam",GTM:"guatemala",GGY:"guernsey",GIN:"^(?!.*eq)(?!.*span)(?!.*bissau)(?!.*portu)(?!.*new).*guinea",GNB:"bissau|^(?\x3d.*portu).*guinea",GUY:"guyana|british.?guiana",HTI:"haiti",HMD:"heard.*mcdonald",VAT:"holy.?see|vatican|papal.?st",HND:"^(?!.*brit).*honduras",HKG:"hong.?kong",HUN:"^(?!.*austr).*hungary",ISL:"iceland",IND:"india(?!.*ocea)",IDN:"indonesia",IRN:"\\biran|persia",IRQ:"\\biraq|mesopotamia",IRL:"(^ireland)|(^republic.*ireland)",
IMN:"^(?\x3d.*isle).*\\bman",ISR:"israel",ITA:"italy",JAM:"jamaica",JPN:"japan",JEY:"jersey",JOR:"jordan",KAZ:"kazak",KEN:"kenya|british.?east.?africa|east.?africa.?prot",KIR:"kiribati",PRK:"^(?\x3d.*democrat|people|north|d.*p.*.r).*\\bkorea|dprk|korea.*(d.*p.*r)",KWT:"kuwait",KGZ:"kyrgyz|kirghiz",LAO:"\\blaos?\\b",LVA:"latvia",LBN:"lebanon",LSO:"lesotho|basuto",LBR:"liberia",LBY:"libya",LIE:"liechtenstein",LTU:"lithuania",LUX:"^(?!.*belg).*luxem",MAC:"maca(o|u)",MDG:"madagascar|malagasy",MWI:"malawi|nyasa",
MYS:"malaysia",MDV:"maldive",MLI:"\\bmali\\b",MLT:"\\bmalta",MHL:"marshall",MTQ:"martinique",MRT:"mauritania",MUS:"mauritius",MYT:"\\bmayotte",MEX:"\\bmexic",FSM:"fed.*micronesia|micronesia.*fed",MCO:"monaco",MNG:"mongolia",MNE:"^(?!.*serbia).*montenegro",MSR:"montserrat",MAR:"morocco|\\bmaroc",MOZ:"mozambique",MMR:"myanmar|burma",NAM:"namibia",NRU:"nauru",NPL:"nepal",NLD:"^(?!.*\\bant)(?!.*\\bcarib).*netherlands",ANT:"^(?\x3d.*\\bant).*(nether|dutch)",NCL:"new.?caledonia",NZL:"new.?zealand",NIC:"nicaragua",
NER:"\\bniger(?!ia)",NGA:"nigeria",NIU:"niue",NFK:"norfolk",MNP:"mariana",NOR:"norway",OMN:"\\boman|trucial",PAK:"^(?!.*east).*paki?stan",PLW:"palau",PSE:"palestin|\\bgaza|west.?bank",PAN:"panama",PNG:"papua|new.?guinea",PRY:"paraguay",PER:"peru",PHL:"philippines",PCN:"pitcairn",POL:"poland",PRT:"portugal",PRI:"puerto.?rico",QAT:"qatar",KOR:"^(?!.*d.*p.*r)(?!.*democrat)(?!.*people)(?!.*north).*\\bkorea(?!.*d.*p.*r)",MDA:"moldov|b(a|e)ssarabia",REU:"r(e|)union",ROU:"r(o|u|ou)mania",RUS:"\\brussia|soviet.?union|u\\.?s\\.?s\\.?r|socialist.?republics",
RWA:"rwanda",BLM:"barth(e|)lemy",SHN:"helena",KNA:"kitts|\\bnevis",LCA:"\\blucia",MAF:"^(?\x3d.*collectivity).*martin|^(?\x3d.*france).*martin(?!ique)|^(?\x3d.*french).*martin(?!ique)",SPM:"miquelon",VCT:"vincent",WSM:"^(?!.*amer).*samoa",SMR:"san.?marino",STP:"\\bs(a|)o.?tom(e|)",SAU:"\\bsa\\w*.?arabia",SEN:"senegal",SRB:"^(?!.*monte).*serbia",SYC:"seychell",SLE:"sierra",SGP:"singapore",SXM:"^(?!.*martin)(?!.*saba).*maarten",SVK:"^(?!.*cze).*slovak",SVN:"slovenia",SLB:"solomon",SOM:"somali",ZAF:"south.africa|s\\\\..?africa",
SGS:"south.?georgia|sandwich",SSD:"\\bs\\w*.?sudan",ESP:"spain",LKA:"sri.?lanka|ceylon",SDN:"^(?!.*\\bs(?!u)).*sudan",SUR:"surinam|dutch.?guiana",SJM:"svalbard",SWZ:"swaziland",SWE:"sweden",CHE:"switz|swiss",SYR:"syria",TWN:"taiwan|taipei|formosa|^(?!.*peo)(?\x3d.*rep).*china",TJK:"tajik",THA:"thailand|\\bsiam",MKD:"macedonia|fyrom",TLS:"^(?\x3d.*leste).*timor|^(?\x3d.*east).*timor",TGO:"togo",TKL:"tokelau",TON:"tonga",TTO:"trinidad|tobago",TUN:"tunisia",TUR:"turkey",TKM:"turkmen",TCA:"turks",TUV:"tuvalu",
UGA:"uganda",UKR:"ukrain",ARE:"emirates|^u\\.?a\\.?e\\.?$|united.?arab.?em",GBR:"united.?kingdom|britain|^u\\.?k\\.?$",TZA:"tanzania",USA:"united.?states\\b(?!.*islands)|\\bu\\.?s\\.?a\\.?\\b|^\\s*u\\.?s\\.?\\b(?!.*islands)",UMI:"minor.?outlying.?is",URY:"uruguay",UZB:"uzbek",VUT:"vanuatu|new.?hebrides",VEN:"venezuela",VNM:"^(?!.*republic).*viet.?nam|^(?\x3d.*socialist).*viet.?nam",VGB:"^(?\x3d.*\\bu\\.?\\s?k).*virgin|^(?\x3d.*brit).*virgin|^(?\x3d.*kingdom).*virgin",VIR:"^(?\x3d.*\\bu\\.?\\s?s).*virgin|^(?\x3d.*states).*virgin",
WLF:"futuna|wallis",ESH:"western.sahara",YEM:"^(?!.*arab)(?!.*north)(?!.*sana)(?!.*peo)(?!.*dem)(?!.*south)(?!.*aden)(?!.*\\bp\\.?d\\.?r).*yemen",YMD:"^(?\x3d.*peo).*yemen|^(?!.*rep)(?\x3d.*dem).*yemen|^(?\x3d.*south).*yemen|^(?\x3d.*aden).*yemen|^(?\x3d.*\\bp\\.?d\\.?r).*yemen",YUG:"yugoslavia",ZMB:"zambia|northern.?rhodesia",EAZ:"zanzibar",ZWE:"zimbabwe|^(?!.*northern).*rhodesia"}},{}],125:[function(a,t,m){t.exports="xx-small x-small small medium large x-large xx-large larger smaller".split(" ")},
{}],126:[function(a,t,m){t.exports="normal condensed semi-condensed extra-condensed ultra-condensed expanded semi-expanded extra-expanded ultra-expanded".split(" ")},{}],127:[function(a,t,m){t.exports=["normal","italic","oblique"]},{}],128:[function(a,t,m){t.exports="normal bold bolder lighter 100 200 300 400 500 600 700 800 900".split(" ")},{}],129:[function(a,t,m){t.exports={parse:a("./parse"),stringify:a("./stringify")}},{"./parse":131,"./stringify":132}],130:[function(a,t,m){var p=a("css-font-size-keywords");
t.exports={isSize:function(a){return/^[\d\.]/.test(a)||-1!==a.indexOf("/")||-1!==p.indexOf(a)}}},{"css-font-size-keywords":125}],131:[function(a,t,m){function p(a){if("string"!==typeof a)throw Error("Font argument must be a string.");if(f[a])return f[a];if(""===a)throw Error("Cannot parse an empty string.");if(-1!==n.indexOf(a))return f[a]={system:a};for(var c={style:"normal",variant:"normal",weight:"normal",stretch:"normal",lineHeight:"normal",size:"1rem",family:["serif"]},r=q(a,/\s+/),v;v=r.shift();){if(-1!==
e.indexOf(v))return["style","variant","weight","stretch"].forEach(function(b){c[b]=v}),f[a]=c;if(-1!==l.indexOf(v))c.style=v;else if("normal"===v||"small-caps"===v)c.variant=v;else if(-1!==u.indexOf(v))c.stretch=v;else if(-1!==b.indexOf(v))c.weight=v;else{if(d(v)){var p=q(v,"/");c.size=p[0];null!=p[1]?c.lineHeight=g(p[1]):"/"===r[0]&&(r.shift(),c.lineHeight=g(r.shift()));if(!r.length)throw Error("Missing required font-family.");c.family=q(r.join(" "),/\s*,\s*/).map(h);return f[a]=c}throw Error("Unknown or unsupported font token: "+
v);}}throw Error("Missing required font-size.");}function g(b){var a=parseFloat(b);return a.toString()===b?a:b}var h=a("unquote"),e=a("css-global-keywords"),n=a("css-system-font-keywords"),b=a("css-font-weight-keywords"),l=a("css-font-style-keywords"),u=a("css-font-stretch-keywords"),q=a("string-split-by"),d=a("./lib/util").isSize;t.exports=p;var f=p.cache={}},{"./lib/util":130,"css-font-stretch-keywords":126,"css-font-style-keywords":127,"css-font-weight-keywords":128,"css-global-keywords":133,"css-system-font-keywords":134,
"string-split-by":513,unquote:532}],132:[function(a,t,m){function p(b,a){if(b&&!a[b]&&!n[b])throw Error("Unknown keyword `"+b+"`");return b}function g(b){for(var a={},c=0;c<b.length;c++)a[b[c]]=1;return a}var h=a("pick-by-alias"),e=a("./lib/util").isSize,n=g(a("css-global-keywords")),b=g(a("css-system-font-keywords")),l=g(a("css-font-weight-keywords")),u=g(a("css-font-style-keywords")),q=g(a("css-font-stretch-keywords")),d={normal:1,"small-caps":1},f={serif:1,"sans-serif":1,monospace:1,cursive:1,
fantasy:1,"system-ui":1};t.exports=function(a){a=h(a,{style:"style fontstyle fontStyle font-style slope distinction",variant:"variant font-variant fontVariant fontvariant var capitalization",weight:"weight w font-weight fontWeight fontweight",stretch:"stretch font-stretch fontStretch fontstretch width",size:"size s font-size fontSize fontsize height em emSize",lineHeight:"lh line-height lineHeight lineheight leading",family:"font family fontFamily font-family fontfamily type typeface face",system:"system reserved default global"});
if(a.system)return a.system&&p(a.system,b),a.system;p(a.style,u);p(a.variant,d);p(a.weight,l);p(a.stretch,q);null==a.size&&(a.size="1rem");"number"===typeof a.size&&(a.size+="px");if(!e)throw Error("Bad size value `"+a.size+"`");a.family||(a.family="serif");Array.isArray(a.family)&&(a.family.length||(a.family=["serif"]),a.family=a.family.map(function(b){return f[b]?b:'"'+b+'"'}).join(", "));var c=[];c.push(a.style);a.variant!==a.style&&c.push(a.variant);a.weight!==a.variant&&a.weight!==a.style&&c.push(a.weight);
a.stretch!==a.weight&&a.stretch!==a.variant&&a.stretch!==a.style&&c.push(a.stretch);c.push(a.size+(null==a.lineHeight||"normal"===a.lineHeight||"1"===a.lineHeight+""?"":"/"+a.lineHeight));c.push(a.family);return c.filter(Boolean).join(" ")}},{"./lib/util":130,"css-font-stretch-keywords":126,"css-font-style-keywords":127,"css-font-weight-keywords":128,"css-global-keywords":133,"css-system-font-keywords":134,"pick-by-alias":457}],133:[function(a,t,m){t.exports=["inherit","initial","unset"]},{}],134:[function(a,
t,m){t.exports="caption icon menu message-box small-caption status-bar".split(" ")},{}],135:[function(a,t,m){t.exports=function(a,g,h,e,n,b){var l=n-1,u=n*n,q=l*l,d=(1+2*n)*q;q*=n;n=u*(3-2*n);l*=u;if(a.length){b||(b=Array(a.length));for(u=a.length-1;0<=u;--u)b[u]=d*a[u]+q*g[u]+n*h[u]+l*e[u];return b}return d*a+q*g+n*h+l*e};t.exports.derivative=function(a,g,h,e,n,b){var l=6*n*n-6*n,u=3*n*n-4*n+1,q=-6*n*n+6*n;n=3*n*n-2*n;if(a.length){b||(b=Array(a.length));for(var d=a.length-1;0<=d;--d)b[d]=l*a[d]+
u*g[d]+q*h[d]+n*e[d];return b}return l*a+u*g+q*h[d]+n*e}},{}],136:[function(a,t,m){function p(){this.argTypes=[];this.shimArgs=[];this.arrayArgs=[];this.arrayBlockIndices=[];this.scalarArgs=[];this.offsetArgs=[];this.offsetArgIndex=[];this.indexArgs=[];this.shapeArgs=[];this.funcName="";this.post=this.body=this.pre=null;this.debug=!1}var g=a("./lib/thunk.js");t.exports=function(a){var e=new p;e.pre=a.pre;e.body=a.body;e.post=a.post;var h=a.args.slice(0);e.argTypes=h;for(var b=0;b<h.length;++b){var l=
h[b];if("array"===l||"object"===typeof l&&l.blockIndices){e.argTypes[b]="array";e.arrayArgs.push(b);e.arrayBlockIndices.push(l.blockIndices?l.blockIndices:0);e.shimArgs.push("array"+b);if(b<e.pre.args.length&&0<e.pre.args[b].count)throw Error("cwise: pre() block may not reference array args");if(b<e.post.args.length&&0<e.post.args[b].count)throw Error("cwise: post() block may not reference array args");}else if("scalar"===l)e.scalarArgs.push(b),e.shimArgs.push("scalar"+b);else if("index"===l){e.indexArgs.push(b);
if(b<e.pre.args.length&&0<e.pre.args[b].count)throw Error("cwise: pre() block may not reference array index");if(b<e.body.args.length&&e.body.args[b].lvalue)throw Error("cwise: body() block may not write to array index");if(b<e.post.args.length&&0<e.post.args[b].count)throw Error("cwise: post() block may not reference array index");}else if("shape"===l){e.shapeArgs.push(b);if(b<e.pre.args.length&&e.pre.args[b].lvalue)throw Error("cwise: pre() block may not write to array shape");if(b<e.body.args.length&&
e.body.args[b].lvalue)throw Error("cwise: body() block may not write to array shape");if(b<e.post.args.length&&e.post.args[b].lvalue)throw Error("cwise: post() block may not write to array shape");}else if("object"===typeof l&&l.offset)e.argTypes[b]="offset",e.offsetArgs.push({array:l.array,offset:l.offset}),e.offsetArgIndex.push(b);else throw Error("cwise: Unknown argument type "+h[b]);}if(0>=e.arrayArgs.length)throw Error("cwise: No array arguments specified");if(e.pre.args.length>h.length)throw Error("cwise: Too many arguments in pre() block");
if(e.body.args.length>h.length)throw Error("cwise: Too many arguments in body() block");if(e.post.args.length>h.length)throw Error("cwise: Too many arguments in post() block");e.debug=!!a.printCode||!!a.debug;e.funcName=a.funcName||"cwise";e.blockSize=a.blockSize||64;return g(e)}},{"./lib/thunk.js":138}],137:[function(a,t,m){function p(b,a,e){var g=b.length,d=a.arrayArgs.length;a=0<a.indexArgs.length;var f=[],c=[],k=0,r,l;for(r=0;r<g;++r)c.push(["i",r,"\x3d0"].join(""));for(l=0;l<d;++l)for(r=0;r<
g;++r){var h=k;k=b[r];0===r?c.push(["d",l,"s",r,"\x3dt",l,"p",k].join("")):c.push(["d",l,"s",r,"\x3d(t",l,"p",k,"-s",h,"*t",l,"p",h,")"].join(""))}0<c.length&&f.push("var "+c.join(","));for(r=g-1;0<=r;--r)k=b[r],f.push(["for(i",r,"\x3d0;i",r,"\x3cs",k,";++i",r,"){"].join(""));f.push(e);for(r=0;r<g;++r){h=k;k=b[r];for(l=0;l<d;++l)f.push(["p",l,"+\x3dd",l,"s",r].join(""));a&&(0<r&&f.push(["index[",h,"]-\x3ds",h].join("")),f.push(["++index[",k,"]"].join("")));f.push("}")}return f.join("\n")}function g(b,
a,e,g){for(var d=a.length,f=e.arrayArgs.length,c=e.blockSize,k=0<e.indexArgs.length,r=[],l=0;l<f;++l)r.push(["var offset",l,"\x3dp",l].join(""));for(l=b;l<d;++l)r.push(["for(var j"+l+"\x3dSS[",a[l],"]|0;j",l,"\x3e0;){"].join("")),r.push(["if(j",l,"\x3c",c,"){"].join("")),r.push(["s",a[l],"\x3dj",l].join("")),r.push(["j",l,"\x3d0"].join("")),r.push(["}else{s",a[l],"\x3d",c].join("")),r.push(["j",l,"-\x3d",c,"}"].join("")),k&&r.push(["index[",a[l],"]\x3dj",l].join(""));for(l=0;l<f;++l){c=["offset"+
l];for(k=b;k<d;++k)c.push(["j",k,"*t",l,"p",a[k]].join(""));r.push(["p",l,"\x3d(",c.join("+"),")"].join(""))}r.push(p(a,e,g));for(l=b;l<d;++l)r.push("}");return r.join("\n")}function h(b,a,e){for(var g=b.body,d=[],f=[],c=0;c<b.args.length;++c){var k=b.args[c];if(!(0>=k.count)){var r=new RegExp(k.name,"g"),l="",h=a.arrayArgs.indexOf(c);switch(a.argTypes[c]){case "offset":var n=a.offsetArgIndex.indexOf(c);h=a.offsetArgs[n].array;l="+q"+n;case "array":l="p"+h+l;var u="l"+c;n="a"+h;if(0===a.arrayBlockIndices[h])1===
k.count?"generic"===e[h]?k.lvalue?(d.push(["var ",u,"\x3d",n,".get(",l,")"].join("")),g=g.replace(r,u),f.push([n,".set(",l,",",u,")"].join(""))):g=g.replace(r,[n,".get(",l,")"].join("")):g=g.replace(r,[n,"[",l,"]"].join("")):"generic"===e[h]?(d.push(["var ",u,"\x3d",n,".get(",l,")"].join("")),g=g.replace(r,u),k.lvalue&&f.push([n,".set(",l,",",u,")"].join(""))):(d.push(["var ",u,"\x3d",n,"[",l,"]"].join("")),g=g.replace(r,u),k.lvalue&&f.push([n,"[",l,"]\x3d",u].join("")));else{r=[k.name];k=[l];for(l=
0;l<Math.abs(a.arrayBlockIndices[h]);l++)r.push("\\s*\\[([^\\]]+)\\]"),k.push("$"+(l+1)+"*t"+h+"b"+l);r=new RegExp(r.join(""),"g");l=k.join("+");if("generic"===e[h])throw Error("cwise: Generic arrays not supported in combination with blocks!");g=g.replace(r,[n,"[",l,"]"].join(""))}break;case "scalar":g=g.replace(r,"Y"+a.scalarArgs.indexOf(c));break;case "index":g=g.replace(r,"index");break;case "shape":g=g.replace(r,"shape")}}}return[d.join("\n"),g,f.join("\n")].join("\n").trim()}function e(b){for(var a=
Array(b.length),e=!0,g=0;g<b.length;++g){var d=b[g],f=d.match(/\d+/);f=f?f[0]:"";0===d.charAt(0)?a[g]="u"+d.charAt(1)+f:a[g]=d.charAt(0)+f;0<g&&(e=e&&a[g]===a[g-1])}return e?a[0]:a.join("")}var n=a("uniq");t.exports=function(b,a){for(var l=a[1].length-Math.abs(b.arrayBlockIndices[0])|0,q=Array(b.arrayArgs.length),d=Array(b.arrayArgs.length),f=0;f<b.arrayArgs.length;++f)d[f]=a[2*f],q[f]=a[2*f+1];var c=[],k=[],r=[],v=[],z=[];for(f=0;f<b.arrayArgs.length;++f){0>b.arrayBlockIndices[f]?(r.push(0),v.push(l),
c.push(l),k.push(l+b.arrayBlockIndices[f])):(r.push(b.arrayBlockIndices[f]),v.push(b.arrayBlockIndices[f]+l),c.push(0),k.push(b.arrayBlockIndices[f]));for(var A=[],y=0;y<q[f].length;y++)r[f]<=q[f][y]&&q[f][y]<v[f]&&A.push(q[f][y]-r[f]);z.push(A)}k=["SS"];v=["'use strict'"];A=[];for(y=0;y<l;++y)A.push(["s",y,"\x3dSS[",y,"]"].join(""));for(f=0;f<b.arrayArgs.length;++f){k.push("a"+f);k.push("t"+f);k.push("p"+f);for(y=0;y<l;++y)A.push(["t",f,"p",y,"\x3dt",f,"[",r[f]+y,"]"].join(""));for(y=0;y<Math.abs(b.arrayBlockIndices[f]);++y)A.push(["t",
f,"b",y,"\x3dt",f,"[",c[f]+y,"]"].join(""))}for(f=0;f<b.scalarArgs.length;++f)k.push("Y"+f);0<b.shapeArgs.length&&A.push("shape\x3dSS.slice(0)");if(0<b.indexArgs.length){y=Array(l);for(f=0;f<l;++f)y[f]="0";A.push(["index\x3d[",y.join(","),"]"].join(""))}for(f=0;f<b.offsetArgs.length;++f){c=b.offsetArgs[f];r=[];for(y=0;y<c.offset.length;++y)0!==c.offset[y]&&(1===c.offset[y]?r.push(["t",c.array,"p",y].join("")):r.push([c.offset[y],"*t",c.array,"p",y].join("")));0===r.length?A.push("q"+f+"\x3d0"):A.push(["q",
f,"\x3d",r.join("+")].join(""))}f=n([].concat(b.pre.thisVars).concat(b.body.thisVars).concat(b.post.thisVars));A=A.concat(f);0<A.length&&v.push("var "+A.join(","));for(f=0;f<b.arrayArgs.length;++f)v.push("p"+f+"|\x3d0");3<b.pre.body.length&&v.push(h(b.pre,b,d));f=h(b.body,b,d);a:for(y=0,A=z[0].length;y<A;){for(c=1;c<z.length;++c)if(z[c][y]!==z[0][y])break a;++y}y<l?v.push(g(y,z[0],b,f)):v.push(p(z[0],b,f));3<b.post.body.length&&v.push(h(b.post,b,d));b.debug&&console.log("-----Generated cwise routine for ",
a,":\n"+v.join("\n")+"\n----------");b=[b.funcName||"unnamed","_cwise_loop_",q[0].join("s"),"m",y,e(d)].join("");return(new Function(["function ",b,"(",k.join(","),"){",v.join("\n"),"} return ",b].join("")))()}},{uniq:531}],138:[function(a,t,m){var p=a("./compile.js");t.exports=function(a){var g=["'use strict'","var CACHED\x3d{}"],e=[];g.push(["return function ",a.funcName+"_cwise_thunk","(",a.shimArgs.join(","),"){"].join(""));for(var n=[],b=[],l=[["array",a.arrayArgs[0],".shape.slice(",Math.max(0,
a.arrayBlockIndices[0]),0>a.arrayBlockIndices[0]?","+a.arrayBlockIndices[0]+")":")"].join("")],u=[],q=[],d=0;d<a.arrayArgs.length;++d){var f=a.arrayArgs[d];e.push(["t",f,"\x3darray",f,".dtype,r",f,"\x3darray",f,".order"].join(""));n.push("t"+f);n.push("r"+f);b.push("t"+f);b.push("r"+f+".join()");l.push("array"+f+".data");l.push("array"+f+".stride");l.push("array"+f+".offset|0");0<d&&(u.push("array"+a.arrayArgs[0]+".shape.length\x3d\x3d\x3darray"+f+".shape.length+"+(Math.abs(a.arrayBlockIndices[0])-
Math.abs(a.arrayBlockIndices[d]))),q.push("array"+a.arrayArgs[0]+".shape[shapeIndex+"+Math.max(0,a.arrayBlockIndices[0])+"]\x3d\x3d\x3darray"+f+".shape[shapeIndex+"+Math.max(0,a.arrayBlockIndices[d])+"]"))}1<a.arrayArgs.length&&(g.push("if (!("+u.join(" \x26\x26 ")+")) throw new Error('cwise: Arrays do not all have the same dimensionality!')"),g.push("for(var shapeIndex\x3darray"+a.arrayArgs[0]+".shape.length-"+Math.abs(a.arrayBlockIndices[0])+"; shapeIndex--\x3e0;) {"),g.push("if (!("+q.join(" \x26\x26 ")+
")) throw new Error('cwise: Arrays do not all have the same shape!')"),g.push("}"));for(d=0;d<a.scalarArgs.length;++d)l.push("scalar"+a.scalarArgs[d]);e.push(["type\x3d[",b.join(","),"].join()"].join(""));e.push("proc\x3dCACHED[type]");g.push("var "+e.join(","));g.push(["if(!proc){CACHED[type]\x3dproc\x3dcompile([",n.join(","),"])}return proc(",l.join(","),")}"].join(""));a.debug&&console.log("-----Generated thunk:\n"+g.join("\n")+"\n----------");return(new Function("compile",g.join("\n")))(p.bind(void 0,
a))}},{"./compile.js":137}],139:[function(a,t,m){t.exports=a("cwise-compiler")},{"cwise-compiler":136}],140:[function(a,t,m){var p=a("es5-ext/object/copy"),g=a("es5-ext/object/normalize-options"),h=a("es5-ext/object/valid-callable"),e=a("es5-ext/object/map"),n=a("es5-ext/object/valid-callable"),b=a("es5-ext/object/valid-value"),l=Function.prototype.bind,u=Object.defineProperty,q=Object.prototype.hasOwnProperty;var d=function(a,c,d){var f=b(c)&&n(c.value);var e=p(c);delete e.writable;delete e.value;
e.get=function(){if(!d.overwriteDefinition&&q.call(this,a))return f;c.value=l.call(f,d.resolveContext?d.resolveContext(this):this);u(this,a,c);return this[a]};return e};t.exports=function(b,a){var c=g(a);null!=c.resolveContext&&h(c.resolveContext);return e(b,function(b,a){return d(a,b,c)})}},{"es5-ext/object/copy":181,"es5-ext/object/map":190,"es5-ext/object/normalize-options":191,"es5-ext/object/valid-callable":195,"es5-ext/object/valid-value":197}],141:[function(a,t,m){var p=a("es5-ext/object/assign"),
g=a("es5-ext/object/normalize-options"),h=a("es5-ext/object/is-callable"),e=a("es5-ext/string/#/contains");(t.exports=function(a,b){var l;if(2>arguments.length||"string"!==typeof a){var h=b;b=a;a=null}else h=arguments[2];if(null==a){var q=l=!0;var d=!1}else q=e.call(a,"c"),d=e.call(a,"e"),l=e.call(a,"w");q={value:b,configurable:q,enumerable:d,writable:l};return h?p(g(h),q):q}).gs=function(a,b,l,u){"string"!==typeof a&&(u=l,l=b,b=a,a=null);null==b?b=void 0:h(b)?null==l?l=void 0:h(l)||(u=l,l=void 0):
(u=b,b=l=void 0);if(null==a){var q=!0;a=!1}else q=e.call(a,"c"),a=e.call(a,"e");b={get:b,set:l,configurable:q,enumerable:a};return u?p(g(u),b):b}},{"es5-ext/object/assign":178,"es5-ext/object/is-callable":184,"es5-ext/object/normalize-options":191,"es5-ext/string/#/contains":198}],142:[function(a,t,m){(function(a,g){"object"===typeof m&&"undefined"!==typeof t?g(m):g(a.d3=a.d3||{})})(this,function(a){function g(b,a){return b<a?-1:b>a?1:b>=a?0:NaN}function h(b){1===b.length&&(b=e(b));return{left:function(a,
c,d,f){null==d&&(d=0);null==f&&(f=a.length);for(;d<f;){var e=d+f>>>1;0>b(a[e],c)?d=e+1:f=e}return d},right:function(a,c,d,f){null==d&&(d=0);null==f&&(f=a.length);for(;d<f;){var e=d+f>>>1;0<b(a[e],c)?f=e:d=e+1}return d}}}function e(b){return function(a,c){return g(b(a),c)}}function n(b,a){return[b,a]}function b(b){return null===b?NaN:+b}function l(a,c){var d=a.length,f=0,e=-1,k=0,r,g=0;if(null==c)for(;++e<d;){if(!isNaN(r=b(a[e]))){var l=r-k;k+=l/++f;g+=l*(r-k)}}else for(;++e<d;)isNaN(r=b(c(a[e],e,
a)))||(l=r-k,k+=l/++f,g+=l*(r-k));if(1<f)return g/(f-1)}function u(b,a){return(b=l(b,a))?Math.sqrt(b):b}function q(b,a){var c=b.length,d=-1,f,e,k;if(null==a)for(;++d<c;){if(null!=(f=b[d])&&f>=f)for(e=k=f;++d<c;)null!=(f=b[d])&&(e>f&&(e=f),k<f&&(k=f))}else for(;++d<c;)if(null!=(f=a(b[d],d,b))&&f>=f)for(e=k=f;++d<c;)null!=(f=a(b[d],d,b))&&(e>f&&(e=f),k<f&&(k=f));return[e,k]}function d(b){return function(){return b}}function f(b){return b}function c(b,a,c){b=+b;a=+a;c=2>(f=arguments.length)?(a=b,b=0,
1):3>f?1:+c;for(var d=-1,f=Math.max(0,Math.ceil((a-b)/c))|0,e=Array(f);++d<f;)e[d]=b+d*c;return e}function k(b,a,c){a=(a-b)/Math.max(0,c);b=Math.floor(Math.log(a)/Math.LN10);a/=Math.pow(10,b);return 0<=b?(a>=t?10:a>=H?5:a>=E?2:1)*Math.pow(10,b):-Math.pow(10,-b)/(a>=t?10:a>=H?5:a>=E?2:1)}function r(b,a,c){var d=Math.abs(a-b)/Math.max(0,c);c=Math.pow(10,Math.floor(Math.log(d)/Math.LN10));d/=c;d>=t?c*=10:d>=H?c*=5:d>=E&&(c*=2);return a<b?-c:c}function v(b){return Math.ceil(Math.log(b.length)/Math.LN2)+
1}function p(a,c,d){null==d&&(d=b);if(f=a.length){if(0>=(c=+c)||2>f)return+d(a[0],0,a);if(1<=c)return+d(a[f-1],f-1,a);var f;c*=f-1;f=Math.floor(c);var e=+d(a[f],f,a);a=+d(a[f+1],f+1,a);return e+(a-e)*(c-f)}}function A(b,a){var c=b.length,d=-1,f,e;if(null==a)for(;++d<c;){if(null!=(f=b[d])&&f>=f)for(e=f;++d<c;)null!=(f=b[d])&&e>f&&(e=f)}else for(;++d<c;)if(null!=(f=a(b[d],d,b))&&f>=f)for(e=f;++d<c;)null!=(f=a(b[d],d,b))&&e>f&&(e=f);return e}function y(b){if(!(e=b.length))return[];for(var a=-1,c=A(b,
w),d=Array(c);++a<c;)for(var f=-1,e,k=d[a]=Array(e);++f<e;)k[f]=b[f][a];return d}function w(b){return b.length}var x=h(g),F=x.right;x=x.left;var B=Array.prototype,m=B.slice,D=B.map,t=Math.sqrt(50),H=Math.sqrt(10),E=Math.sqrt(2);a.bisect=F;a.bisectRight=F;a.bisectLeft=x;a.ascending=g;a.bisector=h;a.cross=function(b,a,c){var d=b.length,f=a.length,e=Array(d*f),k,r,g;null==c&&(c=n);for(k=g=0;k<d;++k){var l=b[k];for(r=0;r<f;++r,++g)e[g]=c(l,a[r])}return e};a.descending=function(b,a){return a<b?-1:a>b?
1:a>=b?0:NaN};a.deviation=u;a.extent=q;a.histogram=function(){function b(b){var d,f=b.length,g=Array(f);for(d=0;d<f;++d)g[d]=a(b[d],d,b);d=e(g);var l=d[0],h=d[1],q=k(g,l,h);Array.isArray(q)||(q=r(l,h,q),q=c(Math.ceil(l/q)*q,h,q));for(var n=q.length;q[0]<=l;)q.shift(),--n;for(;q[n-1]>h;)q.pop(),--n;var u=Array(n+1);for(d=0;d<=n;++d){var v=u[d]=[];v.x0=0<d?q[d-1]:l;v.x1=d<n?q[d]:h}for(d=0;d<f;++d)v=g[d],l<=v&&v<=h&&u[F(q,v,0,n)].push(b[d]);return u}var a=f,e=q,k=v;b.value=function(c){return arguments.length?
(a="function"===typeof c?c:d(c),b):a};b.domain=function(a){return arguments.length?(e="function"===typeof a?a:d([a[0],a[1]]),b):e};b.thresholds=function(a){return arguments.length?(k="function"===typeof a?a:Array.isArray(a)?d(m.call(a)):d(a),b):k};return b};a.thresholdFreedmanDiaconis=function(a,c,d){a=D.call(a,b).sort(g);return Math.ceil((d-c)/(2*(p(a,.75)-p(a,.25))*Math.pow(a.length,-1/3)))};a.thresholdScott=function(b,a,c){return Math.ceil((c-a)/(3.5*u(b)*Math.pow(b.length,-1/3)))};a.thresholdSturges=
v;a.max=function(b,a){var c=b.length,d=-1,f,e;if(null==a)for(;++d<c;){if(null!=(f=b[d])&&f>=f)for(e=f;++d<c;)null!=(f=b[d])&&f>e&&(e=f)}else for(;++d<c;)if(null!=(f=a(b[d],d,b))&&f>=f)for(e=f;++d<c;)null!=(f=a(b[d],d,b))&&f>e&&(e=f);return e};a.mean=function(a,c){var d=a.length,f=d,e=-1,k,r=0;if(null==c)for(;++e<d;)isNaN(k=b(a[e]))?--f:r+=k;else for(;++e<d;)isNaN(k=b(c(a[e],e,a)))?--f:r+=k;if(f)return r/f};a.median=function(a,c){var d=a.length,f=-1,e,k=[];if(null==c)for(;++f<d;)isNaN(e=b(a[f]))||
k.push(e);else for(;++f<d;)isNaN(e=b(c(a[f],f,a)))||k.push(e);return p(k.sort(g),.5)};a.merge=function(b){var a=b.length;var c=-1;for(var d=0,f,e;++c<a;)d+=b[c].length;for(f=Array(d);0<=--a;)for(e=b[a],c=e.length;0<=--c;)f[--d]=e[c];return f};a.min=A;a.pairs=function(b,a){null==a&&(a=n);for(var c=0,d=b.length-1,f=b[0],e=Array(0>d?0:d);c<d;)e[c]=a(f,f=b[++c]);return e};a.permute=function(b,a){for(var c=a.length,d=Array(c);c--;)d[c]=b[a[c]];return d};a.quantile=p;a.range=c;a.scan=function(b,a){if(c=
b.length){var c,d=0,f=0,e,k=b[f];for(null==a&&(a=g);++d<c;)if(0>a(e=b[d],k)||0!==a(k,k))k=e,f=d;if(0===a(k,k))return f}};a.shuffle=function(b,a,c){c=(null==c?b.length:c)-(a=null==a?0:+a);for(var d,f;c;)f=Math.random()*c--|0,d=b[c+a],b[c+a]=b[f+a],b[f+a]=d;return b};a.sum=function(b,a){var c=b.length,d=-1,f,e=0;if(null==a)for(;++d<c;){if(f=+b[d])e+=f}else for(;++d<c;)if(f=+a(b[d],d,b))e+=f;return e};a.ticks=function(b,a,c){var d,f=-1,e;a=+a;b=+b;c=+c;if(b===a&&0<c)return[b];if(d=a<b){var r=b;b=a;a=
r}if(0===(e=k(b,a,c))||!isFinite(e))return[];if(0<e)for(b=Math.ceil(b/e),a=Math.floor(a/e),a=Array(r=Math.ceil(a-b+1));++f<r;)a[f]=(b+f)*e;else for(b=Math.floor(b*e),a=Math.ceil(a*e),a=Array(r=Math.ceil(b-a+1));++f<r;)a[f]=(b-f)/e;d&&a.reverse();return a};a.tickIncrement=k;a.tickStep=r;a.transpose=y;a.variance=l;a.zip=function(){return y(arguments)};Object.defineProperty(a,"__esModule",{value:!0})})},{}],143:[function(a,t,m){(function(a,g){"object"===typeof m&&"undefined"!==typeof t?g(m):g(a.d3=a.d3||
{})})(this,function(a){function g(){}function h(b,a){var c=new g;if(b instanceof g)b.each(function(b,a){c.set(a,b)});else if(Array.isArray(b)){var d=-1,f=b.length,e;if(null==a)for(;++d<f;)c.set(d,b[d]);else for(;++d<f;)c.set(a(e=b[d],d,b),e)}else if(b)for(d in b)c.set(d,b[d]);return c}function e(){return{}}function n(b,a,d){b[a]=d}function b(){return h()}function l(b,a,d){b.set(a,d)}function u(){}function q(b,a){var c=new u;if(b instanceof u)b.each(function(b){c.add(b)});else if(b){var d=-1,f=b.length;
if(null==a)for(;++d<f;)c.add(b[d]);else for(;++d<f;)c.add(a(b[d],d,b))}return c}g.prototype=h.prototype={constructor:g,has:function(b){return"$"+b in this},get:function(b){return this["$"+b]},set:function(b,a){this["$"+b]=a;return this},remove:function(b){b="$"+b;return b in this&&delete this[b]},clear:function(){for(var b in this)"$"===b[0]&&delete this[b]},keys:function(){var b=[],a;for(a in this)"$"===a[0]&&b.push(a.slice(1));return b},values:function(){var b=[],a;for(a in this)"$"===a[0]&&b.push(this[a]);
return b},entries:function(){var b=[],a;for(a in this)"$"===a[0]&&b.push({key:a.slice(1),value:this[a]});return b},size:function(){var b=0,a;for(a in this)"$"===a[0]&&++b;return b},empty:function(){for(var b in this)if("$"===b[0])return!1;return!0},each:function(b){for(var a in this)"$"===a[0]&&b(this[a],a.slice(1),this)}};var d=h.prototype;u.prototype=q.prototype={constructor:u,has:d.has,add:function(b){b+="";this["$"+b]=b;return this},remove:d.remove,clear:d.clear,values:d.keys,size:d.size,empty:d.empty,
each:d.each};a.nest=function(){function a(b,c,f,e){if(c>=d.length)return null!=g&&b.sort(g),null!=q?q(b):b;for(var k=-1,r=b.length,l=d[c++],n,u,v=h(),p,z=f();++k<r;)(p=v.get(n=l(u=b[k])+""))?p.push(u):v.set(n,[u]);v.each(function(b,d){e(z,d,a(b,c,f,e))});return z}function c(b,a){if(++a>d.length)return b;var f=r[a-1];if(null!=q&&a>=d.length)var e=b.entries();else e=[],b.each(function(b,d){e.push({key:d,values:c(b,a)})});return null!=f?e.sort(function(b,a){return f(b.key,a.key)}):e}var d=[],r=[],g,
q,u;return u={object:function(b){return a(b,0,e,n)},map:function(c){return a(c,0,b,l)},entries:function(d){return c(a(d,0,b,l),0)},key:function(b){d.push(b);return u},sortKeys:function(b){r[d.length-1]=b;return u},sortValues:function(b){g=b;return u},rollup:function(b){q=b;return u}}};a.set=q;a.map=h;a.keys=function(b){var a=[],d;for(d in b)a.push(d);return a};a.values=function(b){var a=[],d;for(d in b)a.push(b[d]);return a};a.entries=function(b){var a=[],d;for(d in b)a.push({key:d,value:b[d]});return a};
Object.defineProperty(a,"__esModule",{value:!0})})},{}],144:[function(a,t,m){(function(a,g){"object"===typeof m&&"undefined"!==typeof t?g(m):g(a.d3=a.d3||{})})(this,function(a){function g(b,a,c){b.prototype=a.prototype=c;c.constructor=b}function h(b,a){b=Object.create(b.prototype);for(var c in a)b[c]=a[c];return b}function e(){}function n(a){var f;a=(a+"").trim().toLowerCase();return(f=J.exec(a))?(f=parseInt(f[1],16),new d(f>>8&15|f>>4&240,f>>4&15|f&240,(f&15)<<4|f&15,1)):(f=L.exec(a))?b(parseInt(f[1],
16)):(f=M.exec(a))?new d(f[1],f[2],f[3],1):(f=N.exec(a))?new d(255*f[1]/100,255*f[2]/100,255*f[3]/100,1):(f=O.exec(a))?l(f[1],f[2],f[3],f[4]):(f=R.exec(a))?l(255*f[1]/100,255*f[2]/100,255*f[3]/100,f[4]):(f=T.exec(a))?c(f[1],f[2]/100,f[3]/100,1):(f=P.exec(a))?c(f[1],f[2]/100,f[3]/100,f[4]):S.hasOwnProperty(a)?b(S[a]):"transparent"===a?new d(NaN,NaN,NaN,0):null}function b(b){return new d(b>>16&255,b>>8&255,b&255,1)}function l(b,a,c,f){0>=f&&(b=a=c=NaN);return new d(b,a,c,f)}function u(b){b instanceof
e||(b=n(b));if(!b)return new d;b=b.rgb();return new d(b.r,b.g,b.b,b.opacity)}function q(b,a,c,f){return 1===arguments.length?u(b):new d(b,a,c,null==f?1:f)}function d(b,a,c,d){this.r=+b;this.g=+a;this.b=+c;this.opacity=+d}function f(b){b=Math.max(0,Math.min(255,Math.round(b)||0));return(16>b?"0":"")+b.toString(16)}function c(b,a,c,d){0>=d?b=a=c=NaN:0>=c||1<=c?b=a=NaN:0>=a&&(b=NaN);return new v(b,a,c,d)}function k(b){if(b instanceof v)return new v(b.h,b.s,b.l,b.opacity);b instanceof e||(b=n(b));if(!b)return new v;
if(b instanceof v)return b;b=b.rgb();var a=b.r/255,c=b.g/255,d=b.b/255,f=Math.min(a,c,d),k=Math.max(a,c,d),r=NaN,g=k-f,l=(k+f)/2;g?(r=a===k?(c-d)/g+6*(c<d):c===k?(d-a)/g+2:(a-c)/g+4,g/=.5>l?k+f:2-k-f,r*=60):g=0<l&&1>l?0:r;return new v(r,g,l,b.opacity)}function r(b,a,c,d){return 1===arguments.length?k(b):new v(b,a,c,null==d?1:d)}function v(b,a,c,d){this.h=+b;this.s=+a;this.l=+c;this.opacity=+d}function p(b,a,c){return 255*(60>b?a+(c-a)*b/60:180>b?c:240>b?a+(c-a)*(240-b)/60:a)}function A(b){if(b instanceof
w)return new w(b.l,b.a,b.b,b.opacity);if(b instanceof H){if(isNaN(b.h))return new w(b.l,0,0,b.opacity);var a=b.h*ba;return new w(b.l,Math.cos(a)*b.c,Math.sin(a)*b.c,b.opacity)}b instanceof d||(b=u(b));var c=m(b.r),f=m(b.g),e=m(b.b);a=x(.2225045*c+.7168786*f+.0606169*e);if(c===f&&f===e)var k=c=a;else k=x((.4360747*c+.3850649*f+.1430804*e)/.96422),c=x((.0139322*c+.0971045*f+.7141733*e)/.82521);return new w(116*a-16,500*(k-a),200*(a-c),b.opacity)}function y(b,a,c,d){return 1===arguments.length?A(b):
new w(b,a,c,null==d?1:d)}function w(b,a,c,d){this.l=+b;this.a=+a;this.b=+c;this.opacity=+d}function x(b){return b>ea?Math.pow(b,1/3):b/W+ca}function F(b){return b>Y?b*b*b:W*(b-ca)}function B(b){return 255*(.0031308>=b?12.92*b:1.055*Math.pow(b,1/2.4)-.055)}function m(b){return.04045>=(b/=255)?b/12.92:Math.pow((b+.055)/1.055,2.4)}function D(b){if(b instanceof H)return new H(b.h,b.c,b.l,b.opacity);b instanceof w||(b=A(b));if(0===b.a&&0===b.b)return new H(NaN,0,b.l,b.opacity);var a=Math.atan2(b.b,b.a)*
da;return new H(0>a?a+360:a,Math.sqrt(b.a*b.a+b.b*b.b),b.l,b.opacity)}function t(b,a,c,d){return 1===arguments.length?D(b):new H(b,a,c,null==d?1:d)}function H(b,a,c,d){this.h=+b;this.c=+a;this.l=+c;this.opacity=+d}function E(b,a,c,f){if(1===arguments.length){var e=b;if(e instanceof K)e=new K(e.h,e.s,e.l,e.opacity);else{e instanceof d||(e=u(e));var k=e.g/255,r=e.b/255,g=(U*r+e.r/255*-1.7884503806-3.5172982438*k)/(U+-1.7884503806-3.5172982438);r-=g;var l=(1.97294*(k-g)- -.29227*r)/-.90649;r=(k=Math.sqrt(l*
l+r*r)/(1.97294*g*(1-g)))?Math.atan2(l,r)*da-120:NaN;e=new K(0>r?r+360:r,k,g,e.opacity)}}else e=new K(b,a,c,null==f?1:f);return e}function K(b,a,c,d){this.h=+b;this.s=+a;this.l=+c;this.opacity=+d}var I=1/.7,J=/^#([0-9a-f]{3})$/,L=/^#([0-9a-f]{6})$/,M=/^rgb\(\s*([+-]?\d+)\s*,\s*([+-]?\d+)\s*,\s*([+-]?\d+)\s*\)$/,N=/^rgb\(\s*([+-]?\d*\.?\d+(?:[eE][+-]?\d+)?)%\s*,\s*([+-]?\d*\.?\d+(?:[eE][+-]?\d+)?)%\s*,\s*([+-]?\d*\.?\d+(?:[eE][+-]?\d+)?)%\s*\)$/,O=/^rgba\(\s*([+-]?\d+)\s*,\s*([+-]?\d+)\s*,\s*([+-]?\d+)\s*,\s*([+-]?\d*\.?\d+(?:[eE][+-]?\d+)?)\s*\)$/,
R=/^rgba\(\s*([+-]?\d*\.?\d+(?:[eE][+-]?\d+)?)%\s*,\s*([+-]?\d*\.?\d+(?:[eE][+-]?\d+)?)%\s*,\s*([+-]?\d*\.?\d+(?:[eE][+-]?\d+)?)%\s*,\s*([+-]?\d*\.?\d+(?:[eE][+-]?\d+)?)\s*\)$/,T=/^hsl\(\s*([+-]?\d*\.?\d+(?:[eE][+-]?\d+)?)\s*,\s*([+-]?\d*\.?\d+(?:[eE][+-]?\d+)?)%\s*,\s*([+-]?\d*\.?\d+(?:[eE][+-]?\d+)?)%\s*\)$/,P=/^hsla\(\s*([+-]?\d*\.?\d+(?:[eE][+-]?\d+)?)\s*,\s*([+-]?\d*\.?\d+(?:[eE][+-]?\d+)?)%\s*,\s*([+-]?\d*\.?\d+(?:[eE][+-]?\d+)?)%\s*,\s*([+-]?\d*\.?\d+(?:[eE][+-]?\d+)?)\s*\)$/,S={aliceblue:15792383,
antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,
darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,
indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,
magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,
palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,
turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};g(e,n,{displayable:function(){return this.rgb().displayable()},hex:function(){return this.rgb().hex()},toString:function(){return this.rgb()+""}});g(d,q,h(e,{brighter:function(b){b=null==b?I:Math.pow(I,b);return new d(this.r*b,this.g*b,this.b*b,this.opacity)},darker:function(b){b=null==b?.7:Math.pow(.7,b);return new d(this.r*b,this.g*b,this.b*b,this.opacity)},rgb:function(){return this},
displayable:function(){return 0<=this.r&&255>=this.r&&0<=this.g&&255>=this.g&&0<=this.b&&255>=this.b&&0<=this.opacity&&1>=this.opacity},hex:function(){return"#"+f(this.r)+f(this.g)+f(this.b)},toString:function(){var b=this.opacity;b=isNaN(b)?1:Math.max(0,Math.min(1,b));return(1===b?"rgb(":"rgba(")+Math.max(0,Math.min(255,Math.round(this.r)||0))+", "+Math.max(0,Math.min(255,Math.round(this.g)||0))+", "+Math.max(0,Math.min(255,Math.round(this.b)||0))+(1===b?")":", "+b+")")}}));g(v,r,h(e,{brighter:function(b){b=
null==b?I:Math.pow(I,b);return new v(this.h,this.s,this.l*b,this.opacity)},darker:function(b){b=null==b?.7:Math.pow(.7,b);return new v(this.h,this.s,this.l*b,this.opacity)},rgb:function(){var b=this.h%360+360*(0>this.h),a=isNaN(b)||isNaN(this.s)?0:this.s,c=this.l;a=c+(.5>c?c:1-c)*a;c=2*c-a;return new d(p(240<=b?b-240:b+120,c,a),p(b,c,a),p(120>b?b+240:b-120,c,a),this.opacity)},displayable:function(){return(0<=this.s&&1>=this.s||isNaN(this.s))&&0<=this.l&&1>=this.l&&0<=this.opacity&&1>=this.opacity}}));
var ba=Math.PI/180,da=180/Math.PI,ca=4/29,Y=6/29,W=3*Y*Y,ea=Y*Y*Y;g(w,y,h(e,{brighter:function(b){return new w(this.l+18*(null==b?1:b),this.a,this.b,this.opacity)},darker:function(b){return new w(this.l-18*(null==b?1:b),this.a,this.b,this.opacity)},rgb:function(){var b=(this.l+16)/116,a=isNaN(this.a)?b:b+this.a/500,c=isNaN(this.b)?b:b-this.b/200;a=.96422*F(a);b=1*F(b);c=.82521*F(c);return new d(B(3.1338561*a-1.6168667*b-.4906146*c),B(-.9787684*a+1.9161415*b+.033454*c),B(.0719453*a-.2289914*b+1.4052427*
c),this.opacity)}}));g(H,t,h(e,{brighter:function(b){return new H(this.h,this.c,this.l+18*(null==b?1:b),this.opacity)},darker:function(b){return new H(this.h,this.c,this.l-18*(null==b?1:b),this.opacity)},rgb:function(){return A(this).rgb()}}));var U=1.78277*-.29227-.1347134789;g(K,E,h(e,{brighter:function(b){b=null==b?I:Math.pow(I,b);return new K(this.h,this.s,this.l*b,this.opacity)},darker:function(b){b=null==b?.7:Math.pow(.7,b);return new K(this.h,this.s,this.l*b,this.opacity)},rgb:function(){var b=
isNaN(this.h)?0:(this.h+120)*ba,a=+this.l,c=isNaN(this.s)?0:this.s*a*(1-a),f=Math.cos(b);b=Math.sin(b);return new d(255*(a+c*(-.14861*f+1.78277*b)),255*(a+c*(-.29227*f+-.90649*b)),255*(a+1.97294*c*f),this.opacity)}}));a.color=n;a.rgb=q;a.hsl=r;a.lab=y;a.hcl=t;a.lch=function(b,a,c,d){return 1===arguments.length?D(b):new H(c,a,b,null==d?1:d)};a.gray=function(b,a){return new w(b,0,0,null==a?1:a)};a.cubehelix=E;Object.defineProperty(a,"__esModule",{value:!0})})},{}],145:[function(a,t,m){(function(a,g){"object"===
typeof m&&"undefined"!==typeof t?g(m):g(a.d3=a.d3||{})})(this,function(a){function g(){for(var b=0,a=arguments.length,e={},d;b<a;++b){if(!(d=arguments[b]+"")||d in e)throw Error("illegal type: "+d);e[d]=[]}return new h(e)}function h(b){this._=b}function e(b,a){return b.trim().split(/^|\s+/).map(function(b){var d="",f=b.indexOf(".");0<=f&&(d=b.slice(f+1),b=b.slice(0,f));if(b&&!a.hasOwnProperty(b))throw Error("unknown type: "+b);return{type:b,name:d}})}function n(a,e,g){for(var d=0,f=a.length;d<f;++d)if(a[d].name===
e){a[d]=b;a=a.slice(0,d).concat(a.slice(d+1));break}null!=g&&a.push({name:e,value:g});return a}var b={value:function(){}};h.prototype=g.prototype={constructor:h,on:function(b,a){var g=this._,d=e(b+"",g),f,c=-1,k=d.length;if(2>arguments.length)for(;++c<k;){var r;if(r=f=(b=d[c]).type){a:{r=g[f];for(var l=0,h=r.length;l<h;++l)if((f=r[l]).name===b.name){f=f.value;break a}f=void 0}r=f}if(r)return f}else{if(null!=a&&"function"!==typeof a)throw Error("invalid callback: "+a);for(;++c<k;)if(f=(b=d[c]).type)g[f]=
n(g[f],b.name,a);else if(null==a)for(f in g)g[f]=n(g[f],b.name,null);return this}},copy:function(){var b={},a=this._,e;for(e in a)b[e]=a[e].slice();return new h(b)},call:function(b,a){if(0<(f=arguments.length-2))for(var e=Array(f),d=0,f,c;d<f;++d)e[d]=arguments[d+2];if(!this._.hasOwnProperty(b))throw Error("unknown type: "+b);c=this._[b];d=0;for(f=c.length;d<f;++d)c[d].value.apply(a,e)},apply:function(b,a,e){if(!this._.hasOwnProperty(b))throw Error("unknown type: "+b);b=this._[b];for(var d=0,f=b.length;d<
f;++d)b[d].value.apply(a,e)}};a.dispatch=g;Object.defineProperty(a,"__esModule",{value:!0})})},{}],146:[function(a,t,m){(function(p,g){"object"===typeof m&&"undefined"!==typeof t?g(m,a("d3-quadtree"),a("d3-collection"),a("d3-dispatch"),a("d3-timer")):g(p.d3=p.d3||{},p.d3,p.d3,p.d3,p.d3)})(this,function(a,g,h,e,n){function b(b){return b.x+b.vx}function l(b){return b.y+b.vy}function u(b){return b.index}function q(b,a){b=b.get(a);if(!b)throw Error("missing: "+a);return b}function d(b){return b.x}function f(b){return b.y}
var c=function(b){return function(){return b}},k=function(){return 1E-6*(Math.random()-.5)},r=Math.PI*(3-Math.sqrt(5));a.forceCenter=function(b,a){function c(){var c,f=d.length,e=0,k=0;for(c=0;c<f;++c){var r=d[c];e+=r.x;k+=r.y}e=e/f-b;k=k/f-a;for(c=0;c<f;++c)r=d[c],r.x-=e,r.y-=k}var d;null==b&&(b=0);null==a&&(a=0);c.initialize=function(b){d=b};c.x=function(a){return arguments.length?(b=+a,c):b};c.y=function(b){return arguments.length?(a=+b,c):a};return c};a.forceCollide=function(a){function d(){function a(b,
a,c,d,f){var e=b.data;b=b.r;var r=A+b;if(e)e.index>u.index&&(a=v-e.x-e.vx,c=p-e.y-e.vy,d=a*a+c*c,d<r*r&&(0===a&&(a=k(),d+=a*a),0===c&&(c=k(),d+=c*c),d=(r-(d=Math.sqrt(d)))/d*q,u.vx+=(a*=d)*(r=(b*=b)/(z+b)),u.vy+=(c*=d)*r,e.vx-=a*(r=1-r),e.vy-=c*r));else return a>v+r||d<v-r||c>p+r||f<p-r}for(var c,d=r.length,e,u,v,p,A,z,w=0;w<n;++w)for(e=g.quadtree(r,b,l).visitAfter(f),c=0;c<d;++c)u=r[c],A=h[u.index],z=A*A,v=u.x+u.vx,p=u.y+u.vy,e.visit(a)}function f(b){if(b.data)return b.r=h[b.data.index];for(var a=
b.r=0;4>a;++a)b[a]&&b[a].r>b.r&&(b.r=b[a].r)}function e(){if(r){var b,c=r.length;h=Array(c);for(b=0;b<c;++b){var d=r[b];h[d.index]=+a(d,b,r)}}}var r,h,q=1,n=1;"function"!==typeof a&&(a=c(null==a?1:+a));d.initialize=function(b){r=b;e()};d.iterations=function(b){return arguments.length?(n=+b,d):n};d.strength=function(b){return arguments.length?(q=+b,d):q};d.radius=function(b){return arguments.length?(a="function"===typeof b?b:c(+b),e(),d):a};return d};a.forceLink=function(b){function a(a){for(var c=
0,d=b.length;c<t;++c)for(var f=0,e,r,g,h,q;f<d;++f)e=b[f],r=e.source,e=e.target,g=e.x+e.vx-r.x-r.vx||k(),h=e.y+e.vy-r.y-r.vy||k(),q=Math.sqrt(g*g+h*h),q=(q-v[f])/q*a*l[f],g*=q,h*=q,e.vx-=g*(q=E[f]),e.vy-=h*q,r.vx+=g*(q=1-q),r.vy+=h*q}function d(){if(p){var a=p.length,c=b.length,d=h.map(p,r);var k=0;for(m=Array(a);k<c;++k)a=b[k],a.index=k,"object"!==typeof a.source&&(a.source=q(d,a.source)),"object"!==typeof a.target&&(a.target=q(d,a.target)),m[a.source.index]=(m[a.source.index]||0)+1,m[a.target.index]=
(m[a.target.index]||0)+1;k=0;for(E=Array(c);k<c;++k)a=b[k],E[k]=m[a.source.index]/(m[a.source.index]+m[a.target.index]);l=Array(c);f();v=Array(c);e()}}function f(){if(p)for(var a=0,c=b.length;a<c;++a)l[a]=+g(b[a],a,b)}function e(){if(p)for(var a=0,c=b.length;a<c;++a)v[a]=+n(b[a],a,b)}var r=u,g=function(b){return 1/Math.min(m[b.source.index],m[b.target.index])},l,n=c(30),v,p,m,E,t=1;null==b&&(b=[]);a.initialize=function(b){p=b;d()};a.links=function(c){return arguments.length?(b=c,d(),a):b};a.id=function(b){return arguments.length?
(r=b,a):r};a.iterations=function(b){return arguments.length?(t=+b,a):t};a.strength=function(b){return arguments.length?(g="function"===typeof b?b:c(+b),f(),a):g};a.distance=function(b){return arguments.length?(n="function"===typeof b?b:c(+b),e(),a):n};return a};a.forceManyBody=function(){function b(b){var a=l.length,c=g.quadtree(l,d,f).visitAfter(e);q=b;for(b=0;b<a;++b)h=l[b],c.visit(r)}function a(){if(l){var b,a=l.length;u=Array(a);for(b=0;b<a;++b){var c=l[b];u[c.index]=+n(c,b,l)}}}function e(b){var a=
0,c,d,f=0,e,k,r;if(b.length){for(e=k=r=0;4>r;++r)(c=b[r])&&(d=Math.abs(c.value))&&(a+=c.value,f+=d,e+=d*c.x,k+=d*c.y);b.x=e/f;b.y=k/f}else{c=b;c.x=c.data.x;c.y=c.data.y;do a+=u[c.data.index];while(c=c.next)}b.value=a}function r(b,a,c,d){if(!b.value)return!0;c=b.x-h.x;var f=b.y-h.y;a=d-a;d=c*c+f*f;if(a*a/t<d)return d<m&&(0===c&&(c=k(),d+=c*c),0===f&&(f=k(),d+=f*f),d<p&&(d=Math.sqrt(p*d)),h.vx+=c*b.value*q/d,h.vy+=f*b.value*q/d),!0;if(!(b.length||d>=m)){if(b.data!==h||b.next)0===c&&(c=k(),d+=c*c),0===
f&&(f=k(),d+=f*f),d<p&&(d=Math.sqrt(p*d));do b.data!==h&&(a=u[b.data.index]*q/d,h.vx+=c*a,h.vy+=f*a);while(b=b.next)}}var l,h,q,n=c(-30),u,p=1,m=Infinity,t=.81;b.initialize=function(b){l=b;a()};b.strength=function(d){return arguments.length?(n="function"===typeof d?d:c(+d),a(),b):n};b.distanceMin=function(a){return arguments.length?(p=a*a,b):Math.sqrt(p)};b.distanceMax=function(a){return arguments.length?(m=a*a,b):Math.sqrt(m)};b.theta=function(a){return arguments.length?(t=a*a,b):Math.sqrt(t)};return b};
a.forceRadial=function(b,a,d){function f(b){for(var c=0,f=k.length;c<f;++c){var e=k[c],r=e.x-a||1E-6,h=e.y-d||1E-6,q=Math.sqrt(r*r+h*h);q=(l[c]-q)*g[c]*b/q;e.vx+=r*q;e.vy+=h*q}}function e(){if(k){var a,c=k.length;g=Array(c);l=Array(c);for(a=0;a<c;++a)l[a]=+b(k[a],a,k),g[a]=isNaN(l[a])?0:+r(k[a],a,k)}}var k,r=c(.1),g,l;"function"!==typeof b&&(b=c(+b));null==a&&(a=0);null==d&&(d=0);f.initialize=function(b){k=b;e()};f.strength=function(b){return arguments.length?(r="function"===typeof b?b:c(+b),e(),
f):r};f.radius=function(a){return arguments.length?(b="function"===typeof a?a:c(+a),e(),f):b};f.x=function(b){return arguments.length?(a=+b,f):a};f.y=function(b){return arguments.length?(d=+b,f):d};return f};a.forceSimulation=function(b){function a(){c();t.call("tick",k);g<l&&(m.stop(),t.call("end",k))}function c(){var a,c=b.length;g+=(u-g)*q;p.each(function(b){b(g)});for(a=0;a<c;++a){var d=b[a];null==d.fx?d.x+=d.vx*=v:(d.x=d.fx,d.vx=0);null==d.fy?d.y+=d.vy*=v:(d.y=d.fy,d.vy=0)}}function d(){for(var a=
0,c=b.length,d;a<c;++a){d=b[a];d.index=a;if(isNaN(d.x)||isNaN(d.y)){var f=10*Math.sqrt(a),e=a*r;d.x=f*Math.cos(e);d.y=f*Math.sin(e)}if(isNaN(d.vx)||isNaN(d.vy))d.vx=d.vy=0}}function f(a){a.initialize&&a.initialize(b);return a}var k,g=1,l=.001,q=1-Math.pow(l,1/300),u=0,v=.6,p=h.map(),m=n.timer(a),t=e.dispatch("tick","end");null==b&&(b=[]);d();return k={tick:c,restart:function(){return m.restart(a),k},stop:function(){return m.stop(),k},nodes:function(a){return arguments.length?(b=a,d(),p.each(f),k):
b},alpha:function(b){return arguments.length?(g=+b,k):g},alphaMin:function(b){return arguments.length?(l=+b,k):l},alphaDecay:function(b){return arguments.length?(q=+b,k):+q},alphaTarget:function(b){return arguments.length?(u=+b,k):u},velocityDecay:function(b){return arguments.length?(v=1-b,k):1-v},force:function(b,a){return 1<arguments.length?(null==a?p.remove(b):p.set(b,f(a)),k):p.get(b)},find:function(a,c,d){var f,e=b.length;d=null==d?Infinity:d*d;for(f=0;f<e;++f){var k=b[f];var r=a-k.x;var g=c-
k.y;r=r*r+g*g;if(r<d){var l=k;d=r}}return l},on:function(b,a){return 1<arguments.length?(t.on(b,a),k):t.on(b)}}};a.forceX=function(b){function a(b){for(var a=0,c=e.length,d;a<c;++a)d=e[a],d.vx+=(r[a]-d.x)*k[a]*b}function d(){if(e){var a,c=e.length;k=Array(c);r=Array(c);for(a=0;a<c;++a)k[a]=isNaN(r[a]=+b(e[a],a,e))?0:+f(e[a],a,e)}}var f=c(.1),e,k,r;"function"!==typeof b&&(b=c(null==b?0:+b));a.initialize=function(b){e=b;d()};a.strength=function(b){return arguments.length?(f="function"===typeof b?b:
c(+b),d(),a):f};a.x=function(f){return arguments.length?(b="function"===typeof f?f:c(+f),d(),a):b};return a};a.forceY=function(b){function a(b){for(var a=0,c=e.length,d;a<c;++a)d=e[a],d.vy+=(r[a]-d.y)*k[a]*b}function d(){if(e){var a,c=e.length;k=Array(c);r=Array(c);for(a=0;a<c;++a)k[a]=isNaN(r[a]=+b(e[a],a,e))?0:+f(e[a],a,e)}}var f=c(.1),e,k,r;"function"!==typeof b&&(b=c(null==b?0:+b));a.initialize=function(b){e=b;d()};a.strength=function(b){return arguments.length?(f="function"===typeof b?b:c(+b),
d(),a):f};a.y=function(f){return arguments.length?(b="function"===typeof f?f:c(+f),d(),a):b};return a};Object.defineProperty(a,"__esModule",{value:!0})})},{"d3-collection":143,"d3-dispatch":145,"d3-quadtree":150,"d3-timer":153}],147:[function(a,t,m){(function(a,g){"object"===typeof m&&"undefined"!==typeof t?g(m):g(a.d3=a.d3||{})})(this,function(a){function g(b,a){return b.parent===a.parent?1:2}function h(b,a){return b+a.x}function e(b,a){return Math.max(b,a.y)}function n(b){for(var a;a=b.children;)b=
a[0];return b}function b(b){for(var a;a=b.children;)b=a[a.length-1];return b}function l(b){var a=0,c=b.children,d=c&&c.length;if(d)for(;0<=--d;)a+=c[d].value;else a=1;b.value=a}function u(b,a){var d=new c(b);b=+b.value&&(d.value=b.value);var e,k=[d],r,g,l,h;for(null==a&&(a=q);e=k.pop();)if(b&&(e.value=+e.data.value),(g=a(e.data))&&(h=g.length))for(e.children=Array(h),l=h-1;0<=l;--l)k.push(r=e.children[l]=new c(g[l])),r.parent=e,r.depth=e.depth+1;return d.eachBefore(f)}function q(b){return b.children}
function d(b){b.data=b.data.data}function f(b){var a=0;do b.height=a;while((b=b.parent)&&b.height<++a)}function c(b){this.data=b;this.depth=this.height=0;this.parent=null}function k(b){var a=0;b=Y.call(b);for(var c=b.length,d,f;c;)f=Math.random()*c--|0,d=b[c],b[c]=b[f],b[f]=d;c=b.length;d=[];for(var e;a<c;)if(f=b[a],e&&v(e,f))++a;else{a:if(a=d,p(f,a))a=[f];else{for(d=0;d<a.length;++d)if(r(f,a[d])&&p(A(a[d],f),a)){a=[a[d],f];break a}for(d=0;d<a.length-1;++d)for(e=d+1;e<a.length;++e)if(r(A(a[d],a[e]),
f)&&r(A(a[d],f),a[e])&&r(A(a[e],f),a[d])&&p(y(a[d],a[e],f),a)){a=[a[d],a[e],f];break a}throw Error();}a:{a=d=a;switch(a.length){case 1:a=a[0];a={x:a.x,y:a.y,r:a.r};break a;case 2:a=A(a[0],a[1]);break a;case 3:a=y(a[0],a[1],a[2]);break a}a=void 0}e=a;a=0}return e}function r(b,a){var c=b.r-a.r,d=a.x-b.x;b=a.y-b.y;return 0>c||c*c<d*d+b*b}function v(b,a){var c=b.r-a.r+1E-6,d=a.x-b.x;b=a.y-b.y;return 0<c&&c*c>d*d+b*b}function p(b,a){for(var c=0;c<a.length;++c)if(!v(b,a[c]))return!1;return!0}function A(b,
a){var c=b.x,d=b.y;b=b.r;var f=a.x,e=a.y;a=a.r;var k=f-c,r=e-d,g=a-b,l=Math.sqrt(k*k+r*r);return{x:(c+f+k/l*g)/2,y:(d+e+r/l*g)/2,r:(l+b+a)/2}}function y(b,a,c){var d=b.x,f=b.y;b=b.r;var e=a.x,k=a.y,r=a.r,g=c.x,l=c.y,h=c.r;c=d-e;a=d-g;var q=f-k,n=f-l,u=r-b,v=h-b,p=d*d+f*f-b*b;k=p-e*e-k*k+r*r;l=p-g*g-l*l+h*h;g=a*q-c*n;e=(q*l-n*k)/(2*g)-d;q=(n*u-q*v)/g;n=(a*k-c*l)/(2*g)-f;c=(c*v-a*u)/g;a=q*q+c*c-1;u=2*(b+e*q+n*c);b=e*e+n*n-b*b;b=-(a?(u+Math.sqrt(u*u-4*a*b))/(2*a):b/u);return{x:d+e+q*b,y:f+n+c*b,r:b}}
function w(b,a,c){var d=b.x-a.x,f=b.y-a.y,e=d*d+f*f;if(e){var k=a.r+c.r;k*=k;var r=b.r+c.r;r*=r;if(k>r){var g=(e+r-k)/(2*e);k=Math.sqrt(Math.max(0,r/e-g*g));c.x=b.x-g*d-k*f;c.y=b.y-g*f+k*d}else g=(e+k-r)/(2*e),k=Math.sqrt(Math.max(0,k/e-g*g)),c.x=a.x+g*d-k*f,c.y=a.y+g*f+k*d}else c.x=a.x+c.r,c.y=a.y}function x(b,a){var c=b.r+a.r-1E-6,d=a.x-b.x;b=a.y-b.y;return 0<c&&c*c>d*d+b*b}function F(b){var a=b._,c=b.next._,d=a.r+c.r;b=(a.x*c.r+c.x*a.r)/d;a=(a.y*c.r+c.y*a.r)/d;return b*b+a*a}function B(b){this._=
b;this.previous=this.next=null}function m(b){if(!(c=b.length))return 0;var a,c;var d=b[0];d.x=0;d.y=0;if(!(1<c))return d.r;var f=b[1];d.x=-f.r;f.x=d.r;f.y=0;if(!(2<c))return d.r+f.r;w(f,d,a=b[2]);d=new B(d);f=new B(f);a=new B(a);d.next=a.previous=f;f.next=d.previous=a;a.next=f.previous=d;var e=3;a:for(;e<c;++e){w(d._,f._,a=b[e]);a=new B(a);var r=f.next;var g=d.previous;var l=f._.r;var h=d._.r;do if(l<=h){if(x(r._,a._)){f=r;d.next=f;f.previous=d;--e;continue a}l+=r._.r;r=r.next}else{if(x(g._,a._)){d=
g;d.next=f;f.previous=d;--e;continue a}h+=g._.r;g=g.previous}while(r!==g.next);a.previous=d;a.next=f;d.next=f.previous=f=a;for(r=F(d);(a=a.next)!==f;)(g=F(a))<r&&(d=a,r=g);f=d.next}d=[f._];for(a=f;(a=a.next)!==f;)d.push(a._);a=k(d);for(e=0;e<c;++e)d=b[e],d.x-=a.x,d.y-=a.y;return a.r}function D(b){if("function"!==typeof b)throw Error();return b}function t(){return 0}function H(b){return function(){return b}}function E(b){return Math.sqrt(b.value)}function K(b){return function(a){a.children||(a.r=Math.max(0,
+b(a)||0))}}function I(b,a){return function(c){if(d=c.children){var d,f,e=d.length,k=b(c)*a||0;if(k)for(f=0;f<e;++f)d[f].r+=k;var r=m(d);if(k)for(f=0;f<e;++f)d[f].r-=k;c.r=r+k}}}function J(b){return function(a){var c=a.parent;a.r*=b;c&&(a.x=c.x+b*a.x,a.y=c.y+b*a.y)}}function L(b){b.x0=Math.round(b.x0);b.y0=Math.round(b.y0);b.x1=Math.round(b.x1);b.y1=Math.round(b.y1)}function M(b,a,c,d,f){var e=b.children,k=-1,r=e.length;for(d=b.value&&(d-a)/b.value;++k<r;)b=e[k],b.y0=c,b.y1=f,b.x0=a,b.x1=a+=b.value*
d}function N(b){return b.id}function O(b){return b.parentId}function R(b,a){return b.parent===a.parent?1:2}function T(b){var a=b.children;return a?a[0]:b.t}function P(b){var a=b.children;return a?a[a.length-1]:b.t}function S(b,a){this._=b;this.A=this.children=this.parent=null;this.a=this;this.s=this.c=this.m=this.z=0;this.t=null;this.i=a}function ba(b){b=new S(b,0);for(var a,c=[b],d,f,e;a=c.pop();)if(f=a._.children)for(a.children=Array(d=f.length),e=d-1;0<=e;--e)c.push(d=a.children[e]=new S(f[e],
e)),d.parent=a;(b.parent=new S(null,0)).children=[b];return b}function da(b,a,c,d,f){var e=b.children,k=-1,r=e.length;for(f=b.value&&(f-c)/b.value;++k<r;)b=e[k],b.x0=a,b.x1=d,b.y0=c,b.y1=c+=b.value*f}function ca(b,a,c,d,f,e){for(var k=[],r=a.children,g,l,h=g=0,q=r.length,n,u=a.value,v,p,A,z,w,x;g<q;){a=f-c;n=e-d;do v=r[h++].value;while(!v&&h<q);p=A=v;x=Math.max(n/a,a/n)/(u*b);z=v*v*x;for(w=Math.max(A/z,z/p);h<q;++h){v+=l=r[h].value;l<p&&(p=l);l>A&&(A=l);z=v*v*x;z=Math.max(A/z,z/p);if(z>w){v-=l;break}w=
z}k.push(g={value:v,dice:a<n,children:r.slice(g,h)});g.dice?M(g,c,d,f,u?d+=n*v/u:e):da(g,c,d,u?c+=a*v/u:f,e);u-=v;g=h}return k}c.prototype=u.prototype={constructor:c,count:function(){return this.eachAfter(l)},each:function(b){var a,c=[this],d;do{var f=c.reverse();for(c=[];a=f.pop();)if(b(a),a=a.children){var e=0;for(d=a.length;e<d;++e)c.push(a[e])}}while(c.length);return this},eachAfter:function(b){for(var a,c=[this],d=[],f,e;a=c.pop();)if(d.push(a),a=a.children)for(f=0,e=a.length;f<e;++f)c.push(a[f]);
for(;a=d.pop();)b(a);return this},eachBefore:function(b){for(var a,c=[this],d;a=c.pop();)if(b(a),a=a.children)for(d=a.length-1;0<=d;--d)c.push(a[d]);return this},sum:function(b){return this.eachAfter(function(a){for(var c=+b(a.data)||0,d=a.children,f=d&&d.length;0<=--f;)c+=d[f].value;a.value=c})},sort:function(b){return this.eachBefore(function(a){a.children&&a.children.sort(b)})},path:function(b){var a=this;var c=a;var d=b;if(c!==d){var f=c.ancestors(),e=d.ancestors(),k=null;c=f.pop();for(d=e.pop();c===
d;)k=c,c=f.pop(),d=e.pop();c=k}for(d=[a];a!==c;)a=a.parent,d.push(a);for(a=d.length;b!==c;)d.splice(a,0,b),b=b.parent;return d},ancestors:function(){for(var b=this,a=[b];b=b.parent;)a.push(b);return a},descendants:function(){var b=[];this.each(function(a){b.push(a)});return b},leaves:function(){var b=[];this.eachBefore(function(a){a.children||b.push(a)});return b},links:function(){var b=this,a=[];b.each(function(c){c!==b&&a.push({source:c.parent,target:c})});return a},copy:function(){return u(this).eachBefore(d)}};
var Y=Array.prototype.slice,W={depth:-1},ea={};S.prototype=Object.create(c.prototype);var U=(1+Math.sqrt(5))/2,na=function fa(b){function a(a,c,d,f,e){ca(b,a,c,d,f,e)}a.ratio=function(b){return fa(1<(b=+b)?b:1)};return a}(U);U=function oa(b){function a(a,c,d,f,e){if((k=a._squarify)&&k.ratio===b)for(var k,r,g,l=-1,h,q=k.length,n=a.value;++l<q;){a=k[l];r=a.children;g=a.value=0;for(h=r.length;g<h;++g)a.value+=r[g].value;a.dice?M(a,c,d,f,d+=(e-d)*a.value/n):da(a,c,d,c+=(f-c)*a.value/n,e);n-=a.value}else a._squarify=
k=ca(b,a,c,d,f,e),k.ratio=b}a.ratio=function(b){return oa(1<(b=+b)?b:1)};return a}(U);a.cluster=function(){function a(a){var r,g=0;a.eachAfter(function(b){var a=b.children;if(a){var d=a.reduce(h,0)/a.length;b.x=d;b.y=1+a.reduce(e,0)}else b.x=r?g+=c(b,r):0,b.y=0,r=b});var l=n(a),q=b(a),u=l.x-c(l,q)/2,v=q.x+c(q,l)/2;return a.eachAfter(k?function(b){b.x=(b.x-a.x)*d;b.y=(a.y-b.y)*f}:function(b){b.x=(b.x-u)/(v-u)*d;b.y=(1-(a.y?b.y/a.y:1))*f})}var c=g,d=1,f=1,k=!1;a.separation=function(b){return arguments.length?
(c=b,a):c};a.size=function(b){return arguments.length?(k=!1,d=+b[0],f=+b[1],a):k?null:[d,f]};a.nodeSize=function(b){return arguments.length?(k=!0,d=+b[0],f=+b[1],a):k?[d,f]:null};return a};a.hierarchy=u;a.pack=function(){function b(b){b.x=c/2;b.y=d/2;a?b.eachBefore(K(a)).eachAfter(I(f,.5)).eachBefore(J(1)):b.eachBefore(K(E)).eachAfter(I(t,1)).eachAfter(I(f,b.r/Math.min(c,d))).eachBefore(J(Math.min(c,d)/(2*b.r)));return b}var a=null,c=1,d=1,f=t;b.radius=function(c){return arguments.length?(a=null==
c?null:D(c),b):a};b.size=function(a){return arguments.length?(c=+a[0],d=+a[1],b):[c,d]};b.padding=function(a){return arguments.length?(f="function"===typeof a?a:H(+a),b):f};return b};a.packSiblings=function(b){m(b);return b};a.packEnclose=k;a.partition=function(){function b(b){var k=b.height+1;b.x0=b.y0=f;b.x1=c;b.y1=d/k;b.eachBefore(a(d,k));e&&b.eachBefore(L);return b}function a(b,a){return function(c){c.children&&M(c,c.x0,b*(c.depth+1)/a,c.x1,b*(c.depth+2)/a);var d=c.x0,e=c.y0,k=c.x1-f,r=c.y1-f;
k<d&&(d=k=(d+k)/2);r<e&&(e=r=(e+r)/2);c.x0=d;c.y0=e;c.x1=k;c.y1=r}}var c=1,d=1,f=0,e=!1;b.round=function(a){return arguments.length?(e=!!a,b):e};b.size=function(a){return arguments.length?(c=+a[0],d=+a[1],b):[c,d]};b.padding=function(a){return arguments.length?(f=+a,b):f};return b};a.stratify=function(){function b(b){var e,k=b.length,r=Array(k),g,l={};for(e=0;e<k;++e){var h=b[e];var q=r[e]=new c(h);null!=(g=a(h,e,b))&&(g+="")&&(h="$"+(q.id=g),l[h]=h in l?ea:q)}for(e=0;e<k;++e)if(q=r[e],g=d(b[e],e,
b),null!=g&&(g+="")){h=l["$"+g];if(!h)throw Error("missing: "+g);if(h===ea)throw Error("ambiguous: "+g);h.children?h.children.push(q):h.children=[q];q.parent=h}else{if(n)throw Error("multiple roots");var n=q}if(!n)throw Error("no root");n.parent=W;n.eachBefore(function(b){b.depth=b.parent.depth+1;--k}).eachBefore(f);n.parent=null;if(0<k)throw Error("cycle");return n}var a=N,d=O;b.id=function(c){return arguments.length?(a=D(c),b):a};b.parentId=function(a){return arguments.length?(d=D(a),b):d};return b};
a.tree=function(){function b(b){var g=ba(b);g.eachAfter(a);g.parent.m=-g.z;g.eachBefore(c);if(r)b.eachBefore(d);else{var l=b,h=b,q=b;b.eachBefore(function(b){b.x<l.x&&(l=b);b.x>h.x&&(h=b);b.depth>q.depth&&(q=b)});g=l===h?1:f(l,h)/2;var n=g-l.x,u=e/(h.x+g+n),v=k/(q.depth||1);b.eachBefore(function(b){b.x=(b.x+n)*u;b.y=b.depth*v})}return b}function a(b){var a=b.children,c=b.parent.children,d=b.i?c[b.i-1]:null;if(a){for(var e=0,k=0,r=b.children,g=r.length,l;0<=--g;)l=r[g],l.z+=e,l.m+=e,e+=l.s+(k+=l.c);
a=(a[0].z+a[a.length-1].z)/2;d?(b.z=d.z+f(b._,d._),b.m=b.z-a):b.z=a}else d&&(b.z=d.z+f(b._,d._));a=b.parent;c=b.parent.A||c[0];if(d){k=e=b;r=e.parent.children[0];g=e.m;l=k.m;for(var h=d.m,q=r.m,n;d=P(d),e=T(e),d&&e;){r=T(r);k=P(k);k.a=b;n=d.z+h-e.z-g+f(d._,e._);if(0<n){var u=d.a.parent===b.parent?d.a:c,v=b,p=n,A=p/(v.i-u.i);v.c-=A;v.s+=p;u.c+=A;v.z+=p;v.m+=p;g+=n;l+=n}h+=d.m;g+=e.m;q+=r.m;l+=k.m}d&&!P(k)&&(k.t=d,k.m+=h-l);e&&!T(r)&&(r.t=e,r.m+=g-q,c=b)}a.A=c}function c(b){b._.x=b.z+b.parent.m;b.m+=
b.parent.m}function d(b){b.x*=e;b.y=b.depth*k}var f=R,e=1,k=1,r=null;b.separation=function(a){return arguments.length?(f=a,b):f};b.size=function(a){return arguments.length?(r=!1,e=+a[0],k=+a[1],b):r?null:[e,k]};b.nodeSize=function(a){return arguments.length?(r=!0,e=+a[0],k=+a[1],b):r?[e,k]:null};return b};a.treemap=function(){function b(b){b.x0=b.y0=0;b.x1=f;b.y1=e;b.eachBefore(a);k=[0];d&&b.eachBefore(L);return b}function a(b){var a=k[b.depth],d=b.x0+a,f=b.y0+a,e=b.x1-a,n=b.y1-a;e<d&&(d=e=(d+e)/
2);n<f&&(f=n=(f+n)/2);b.x0=d;b.y0=f;b.x1=e;b.y1=n;b.children&&(a=k[b.depth+1]=r(b)/2,d+=q(b)-a,f+=g(b)-a,e-=l(b)-a,n-=h(b)-a,e<d&&(d=e=(d+e)/2),n<f&&(f=n=(f+n)/2),c(b,d,f,e,n))}var c=na,d=!1,f=1,e=1,k=[0],r=t,g=t,l=t,h=t,q=t;b.round=function(a){return arguments.length?(d=!!a,b):d};b.size=function(a){return arguments.length?(f=+a[0],e=+a[1],b):[f,e]};b.tile=function(a){return arguments.length?(c=D(a),b):c};b.padding=function(a){return arguments.length?b.paddingInner(a).paddingOuter(a):b.paddingInner()};
b.paddingInner=function(a){return arguments.length?(r="function"===typeof a?a:H(+a),b):r};b.paddingOuter=function(a){return arguments.length?b.paddingTop(a).paddingRight(a).paddingBottom(a).paddingLeft(a):b.paddingTop()};b.paddingTop=function(a){return arguments.length?(g="function"===typeof a?a:H(+a),b):g};b.paddingRight=function(a){return arguments.length?(l="function"===typeof a?a:H(+a),b):l};b.paddingBottom=function(a){return arguments.length?(h="function"===typeof a?a:H(+a),b):h};b.paddingLeft=
function(a){return arguments.length?(q="function"===typeof a?a:H(+a),b):q};return b};a.treemapBinary=function(b,a,c,d,f){function e(b,a,c,d,f,r,g){if(b>=a-1)b=k[b],b.x0=d,b.y0=f,b.x1=r,b.y1=g;else{for(var l=h[b],q=c/2+l,n=b+1,u=a-1;n<u;){var v=n+u>>>1;h[v]<q?n=v+1:u=v}q-h[n-1]<h[n]-q&&b+1<n&&--n;l=h[n]-l;q=c-l;r-d>g-f?(c=(d*q+r*l)/c,e(b,n,l,d,f,c,g),e(n,a,q,c,f,r,g)):(c=(f*q+g*l)/c,e(b,n,l,d,f,r,c),e(n,a,q,d,c,r,g))}}var k=b.children,r,g=k.length,l,h=Array(g+1);for(h[0]=l=r=0;r<g;++r)h[r+1]=l+=k[r].value;
e(0,g,b.value,a,c,d,f)};a.treemapDice=M;a.treemapSlice=da;a.treemapSliceDice=function(b,a,c,d,f){(b.depth&1?da:M)(b,a,c,d,f)};a.treemapSquarify=na;a.treemapResquarify=U;Object.defineProperty(a,"__esModule",{value:!0})})},{}],148:[function(a,t,m){(function(p,g){"object"===typeof m&&"undefined"!==typeof t?g(m,a("d3-color")):g(p.d3=p.d3||{},p.d3)})(this,function(a,g){function h(b,a,c,d,f){var e=b*b,k=e*b;return((1-3*b+3*e-k)*a+(4-6*e+3*k)*c+(1+3*b+3*e-3*k)*d+k*f)/6}function e(b){var a=b.length-1;return function(c){var d=
0>=c?c=0:1<=c?(c=1,a-1):Math.floor(c*a),f=b[d],e=b[d+1];return h((c-d/a)*a,0<d?b[d-1]:2*f-e,f,e,d<a-1?b[d+2]:2*e-f)}}function n(b){var a=b.length;return function(c){var d=Math.floor((0>(c%=1)?++c:c)*a);return h((c-d/a)*a,b[(d+a-1)%a],b[d%a],b[(d+1)%a],b[(d+2)%a])}}function b(b){return function(){return b}}function l(b,a){return function(c){return b+c*a}}function u(b,a,c){return b=Math.pow(b,c),a=Math.pow(a,c)-b,c=1/c,function(d){return Math.pow(b+d*a,c)}}function q(a,c){var d=c-a;return d?l(a,180<
d||-180>d?d-360*Math.round(d/360):d):b(isNaN(a)?c:a)}function d(a){return 1===(a=+a)?f:function(c,d){return d-c?u(c,d,a):b(isNaN(c)?d:c)}}function f(a,c){var d=c-a;return d?l(a,d):b(isNaN(a)?c:a)}function c(b){return function(a){var c=a.length,d=Array(c),f=Array(c),e=Array(c),k;for(k=0;k<c;++k){var r=g.rgb(a[k]);d[k]=r.r||0;f[k]=r.g||0;e[k]=r.b||0}d=b(d);f=b(f);e=b(e);r.opacity=1;return function(b){r.r=d(b);r.g=f(b);r.b=e(b);return r+""}}}function k(b,a){var c=a?a.length:0,d=b?Math.min(c,b.length):
0,f=Array(d),e=Array(c),k;for(k=0;k<d;++k)f[k]=x(b[k],a[k]);for(;k<c;++k)e[k]=a[k];return function(b){for(k=0;k<d;++k)e[k]=f[k](b);return e}}function r(b,a){var c=new Date;return b=+b,a-=b,function(d){return c.setTime(b+a*d),c}}function v(b,a){return b=+b,a-=b,function(c){return b+a*c}}function p(b,a){var c={},d={},f;if(null===b||"object"!==typeof b)b={};if(null===a||"object"!==typeof a)a={};for(f in a)f in b?c[f]=x(b[f],a[f]):d[f]=a[f];return function(b){for(f in c)d[f]=c[f](b);return d}}function A(b){return function(){return b}}
function y(b){return function(a){return b(a)+""}}function w(b,a){var c=J.lastIndex=L.lastIndex=0,d,f,e,k=-1,r=[],g=[];b+="";for(a+="";(d=J.exec(b))&&(f=L.exec(a));)(e=f.index)>c&&(e=a.slice(c,e),r[k]?r[k]+=e:r[++k]=e),(d=d[0])===(f=f[0])?r[k]?r[k]+=f:r[++k]=f:(r[++k]=null,g.push({i:k,x:v(d,f)})),c=L.lastIndex;c<a.length&&(e=a.slice(c),r[k]?r[k]+=e:r[++k]=e);return 2>r.length?g[0]?y(g[0].x):A(a):(a=g.length,function(b){for(var c=0,d;c<a;++c)r[(d=g[c]).i]=d.x(b);return r.join("")})}function x(a,c){var d=
typeof c,f;return null==c||"boolean"===d?b(c):("number"===d?v:"string"===d?(f=g.color(c))?(c=f,E):w:c instanceof g.color?E:c instanceof Date?r:Array.isArray(c)?k:"function"!==typeof c.valueOf&&"function"!==typeof c.toString||isNaN(c)?p:v)(a,c)}function F(b,a,c,d,f,e){var k,r,g;if(k=Math.sqrt(b*b+a*a))b/=k,a/=k;if(g=b*c+a*d)c-=b*g,d-=a*g;if(r=Math.sqrt(c*c+d*d))c/=r,d/=r,g/=r;b*d<a*c&&(b=-b,a=-a,g=-g,k=-k);return{translateX:f,translateY:e,rotate:Math.atan2(a,b)*M,skewX:Math.atan(g)*M,scaleX:k,scaleY:r}}
function B(b,a,c,d){function f(b){return b.length?b.pop()+" ":""}function e(b,d,f,e,k,r){b!==f||d!==e?(k=k.push("translate(",null,a,null,c),r.push({i:k-4,x:v(b,f)},{i:k-2,x:v(d,e)})):(f||e)&&k.push("translate("+f+a+e+c)}function k(b,a,c,e){b!==a?(180<b-a?a+=360:180<a-b&&(b+=360),e.push({i:c.push(f(c)+"rotate(",null,d)-2,x:v(b,a)})):a&&c.push(f(c)+"rotate("+a+d)}function r(b,a,c,e){b!==a?e.push({i:c.push(f(c)+"skewX(",null,d)-2,x:v(b,a)}):a&&c.push(f(c)+"skewX("+a+d)}function g(b,a,c,d,e,k){b!==c||
a!==d?(e=e.push(f(e)+"scale(",null,",",null,")"),k.push({i:e-4,x:v(b,c)},{i:e-2,x:v(a,d)})):1===c&&1===d||e.push(f(e)+"scale("+c+","+d+")")}return function(a,c){var d=[],f=[];a=b(a);c=b(c);e(a.translateX,a.translateY,c.translateX,c.translateY,d,f);k(a.rotate,c.rotate,d,f);r(a.skewX,c.skewX,d,f);g(a.scaleX,a.scaleY,c.scaleX,c.scaleY,d,f);a=c=null;return function(b){for(var a=-1,c=f.length,e;++a<c;)d[(e=f[a]).i]=e.x(b);return d.join("")}}}function m(b){return((b=Math.exp(b))+1/b)/2}function D(b){return function(a,
c){var d=b((a=g.hsl(a)).h,(c=g.hsl(c)).h),e=f(a.s,c.s),k=f(a.l,c.l),r=f(a.opacity,c.opacity);return function(b){a.h=d(b);a.s=e(b);a.l=k(b);a.opacity=r(b);return a+""}}}function t(b){return function(a,c){var d=b((a=g.hcl(a)).h,(c=g.hcl(c)).h),e=f(a.c,c.c),k=f(a.l,c.l),r=f(a.opacity,c.opacity);return function(b){a.h=d(b);a.c=e(b);a.l=k(b);a.opacity=r(b);return a+""}}}function H(b){return function oa(a){function c(c,d){var e=b((c=g.cubehelix(c)).h,(d=g.cubehelix(d)).h),k=f(c.s,d.s),r=f(c.l,d.l),l=f(c.opacity,
d.opacity);return function(b){c.h=e(b);c.s=k(b);c.l=r(Math.pow(b,a));c.opacity=l(b);return c+""}}a=+a;c.gamma=oa;return c}(1)}var E=function fa(b){function a(b,a){var d=c((b=g.rgb(b)).r,(a=g.rgb(a)).r),e=c(b.g,a.g),k=c(b.b,a.b),r=f(b.opacity,a.opacity);return function(a){b.r=d(a);b.g=e(a);b.b=k(a);b.opacity=r(a);return b+""}}var c=d(b);a.gamma=fa;return a}(1),K=c(e),I=c(n),J=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,L=new RegExp(J.source,"g"),M=180/Math.PI,N={translateX:0,translateY:0,rotate:0,
skewX:0,scaleX:1,scaleY:1},O,R,T,P,S=B(function(b){if("none"===b)return N;O||(O=document.createElement("DIV"),R=document.documentElement,T=document.defaultView);O.style.transform=b;b=T.getComputedStyle(R.appendChild(O),null).getPropertyValue("transform");R.removeChild(O);b=b.slice(7,-1).split(",");return F(+b[0],+b[1],+b[2],+b[3],+b[4],+b[5])},"px, ","px)","deg)"),ba=B(function(b){if(null==b)return N;P||(P=document.createElementNS("http://www.w3.org/2000/svg","g"));P.setAttribute("transform",b);if(!(b=
P.transform.baseVal.consolidate()))return N;b=b.matrix;return F(b.a,b.b,b.c,b.d,b.e,b.f)},", ",")",")"),da=Math.SQRT2,ca=D(q),Y=D(f),W=t(q),ea=t(f),U=H(q),na=H(f);a.interpolate=x;a.interpolateArray=k;a.interpolateBasis=e;a.interpolateBasisClosed=n;a.interpolateDate=r;a.interpolateDiscrete=function(b){var a=b.length;return function(c){return b[Math.max(0,Math.min(a-1,Math.floor(c*a)))]}};a.interpolateHue=function(b,a){var c=q(+b,+a);return function(b){b=c(b);return b-360*Math.floor(b/360)}};a.interpolateNumber=
v;a.interpolateObject=p;a.interpolateRound=function(b,a){return b=+b,a-=b,function(c){return Math.round(b+a*c)}};a.interpolateString=w;a.interpolateTransformCss=S;a.interpolateTransformSvg=ba;a.interpolateZoom=function(b,a){var c=b[0],d=b[1],f=b[2];b=a[2];var e=a[0]-c,k=a[1]-d,r=e*e+k*k;if(1E-12>r){var g=Math.log(b/f)/da;b=function(b){return[c+b*e,d+b*k,f*Math.exp(da*b*g)]}}else{var l=Math.sqrt(r);a=(b*b-f*f+4*r)/(4*f*l);b=(b*b-f*f-4*r)/(4*b*l);var h=Math.log(Math.sqrt(a*a+1)-a);g=(Math.log(Math.sqrt(b*
b+1)-b)-h)/da;b=function(b){b*=g;var a=m(h),r=da*b+h;var q=((r=Math.exp(2*r))-1)/(r+1);var n=h;r=((n=Math.exp(n))-1/n)/2;q=f/(2*l)*(a*q-r);return[c+q*e,d+q*k,f*a/m(da*b+h)]}}b.duration=1E3*g;return b};a.interpolateRgb=E;a.interpolateRgbBasis=K;a.interpolateRgbBasisClosed=I;a.interpolateHsl=ca;a.interpolateHslLong=Y;a.interpolateLab=function(b,a){var c=f((b=g.lab(b)).l,(a=g.lab(a)).l),d=f(b.a,a.a),e=f(b.b,a.b),k=f(b.opacity,a.opacity);return function(a){b.l=c(a);b.a=d(a);b.b=e(a);b.opacity=k(a);return b+
""}};a.interpolateHcl=W;a.interpolateHclLong=ea;a.interpolateCubehelix=U;a.interpolateCubehelixLong=na;a.piecewise=function(b,a){for(var c=0,d=a.length-1,f=a[0],e=Array(0>d?0:d);c<d;)e[c]=b(f,f=a[++c]);return function(b){var a=Math.max(0,Math.min(d-1,Math.floor(b*=d)));return e[a](b-a)}};a.quantize=function(b,a){for(var c=Array(a),d=0;d<a;++d)c[d]=b(d/(a-1));return c};Object.defineProperty(a,"__esModule",{value:!0})})},{"d3-color":144}],149:[function(a,t,m){(function(a,g){"object"===typeof m&&"undefined"!==
typeof t?g(m):g(a.d3=a.d3||{})})(this,function(a){function g(){this._x0=this._y0=this._x1=this._y1=null;this._=""}function h(){return new g}var e=Math.PI,n=2*e,b=n-1E-6;g.prototype=h.prototype={constructor:g,moveTo:function(b,a){this._+="M"+(this._x0=this._x1=+b)+","+(this._y0=this._y1=+a)},closePath:function(){null!==this._x1&&(this._x1=this._x0,this._y1=this._y0,this._+="Z")},lineTo:function(b,a){this._+="L"+(this._x1=+b)+","+(this._y1=+a)},quadraticCurveTo:function(b,a,e,d){this._+="Q"+ +b+","+
+a+","+(this._x1=+e)+","+(this._y1=+d)},bezierCurveTo:function(b,a,e,d,f,c){this._+="C"+ +b+","+ +a+","+ +e+","+ +d+","+(this._x1=+f)+","+(this._y1=+c)},arcTo:function(b,a,g,d,f){b=+b;a=+a;g=+g;d=+d;f=+f;var c=this._x1,k=this._y1,r=g-b,l=d-a,h=c-b,q=k-a,n=h*h+q*q;if(0>f)throw Error("negative radius: "+f);if(null===this._x1)this._+="M"+(this._x1=b)+","+(this._y1=a);else if(1E-6<n)if(1E-6<Math.abs(q*r-l*h)&&f){g-=c;d-=k;var u=r*r+l*l;k=Math.sqrt(u);c=Math.sqrt(n);n=f*Math.tan((e-Math.acos((u+n-(g*g+
d*d))/(2*k*c)))/2);c=n/c;n/=k;1E-6<Math.abs(c-1)&&(this._+="L"+(b+c*h)+","+(a+c*q));this._+="A"+f+","+f+",0,0,"+ +(q*g>h*d)+","+(this._x1=b+n*r)+","+(this._y1=a+n*l)}else this._+="L"+(this._x1=b)+","+(this._y1=a)},arc:function(a,g,h,d,f,c){a=+a;g=+g;h=+h;var k=h*Math.cos(d),r=h*Math.sin(d),l=a+k,q=g+r,u=1^c;d=c?d-f:f-d;if(0>h)throw Error("negative radius: "+h);if(null===this._x1)this._+="M"+l+","+q;else if(1E-6<Math.abs(this._x1-l)||1E-6<Math.abs(this._y1-q))this._+="L"+l+","+q;h&&(0>d&&(d=d%n+n),
d>b?this._+="A"+h+","+h+",0,1,"+u+","+(a-k)+","+(g-r)+"A"+h+","+h+",0,1,"+u+","+(this._x1=l)+","+(this._y1=q):1E-6<d&&(this._+="A"+h+","+h+",0,"+ +(d>=e)+","+u+","+(this._x1=a+h*Math.cos(f))+","+(this._y1=g+h*Math.sin(f))))},rect:function(b,a,e,d){this._+="M"+(this._x0=this._x1=+b)+","+(this._y0=this._y1=+a)+"h"+ +e+"v"+ +d+"h"+-e+"Z"},toString:function(){return this._}};a.path=h;Object.defineProperty(a,"__esModule",{value:!0})})},{}],150:[function(a,t,m){(function(a,g){"object"===typeof m&&"undefined"!==
typeof t?g(m):g(a.d3=a.d3||{})})(this,function(a){function g(b,a,c,e){if(isNaN(a)||isNaN(c))return b;var d,f=b._root;e={data:e};var k=b._x0,g=b._y0,l=b._x1,h=b._y1,q,n,u,p;if(!f)return b._root=e,b;for(;f.length;)if((u=a>=(q=(k+l)/2))?k=q:l=q,(p=c>=(n=(g+h)/2))?g=n:h=n,d=f,!(f=f[u|=p<<1]))return d[u]=e,b;var m=+b._x.call(null,f.data);var t=+b._y.call(null,f.data);if(a===m&&c===t)return e.next=f,d?d[u]=e:b._root=e,b;do d=d?d[u]=Array(4):b._root=Array(4),(u=a>=(q=(k+l)/2))?k=q:l=q,(p=c>=(n=(g+h)/2))?
g=n:h=n;while((u|=p<<1)===(p=(t>=n)<<1|m>=q));return d[p]=f,d[u]=e,b}function h(b){return b[0]}function e(b){return b[1]}function n(a,f,c){f=new b(null==f?h:f,null==c?e:c,NaN,NaN,NaN,NaN);return null==a?f:f.addAll(a)}function b(b,a,c,e,r,g){this._x=b;this._y=a;this._x0=c;this._y0=e;this._x1=r;this._y1=g;this._root=void 0}function l(b){for(var a={data:b.data},c=a;b=b.next;)c=c.next={data:b.data};return a}var u=function(b,a,c,e,r){this.node=b;this.x0=a;this.y0=c;this.x1=e;this.y1=r},q=n.prototype=b.prototype;
q.copy=function(){var a=new b(this._x,this._y,this._x0,this._y0,this._x1,this._y1),f=this._root,c,e;if(!f)return a;if(!f.length)return a._root=l(f),a;for(c=[{source:f,target:a._root=Array(4)}];f=c.pop();)for(var r=0;4>r;++r)if(e=f.source[r])e.length?c.push({source:e,target:f.target[r]=Array(4)}):f.target[r]=l(e);return a};q.add=function(b){var a=+this._x.call(null,b),c=+this._y.call(null,b);return g(this.cover(a,c),a,c,b)};q.addAll=function(b){var a,c,d=b.length,e,l,h=Array(d),q=Array(d),n=Infinity,
u=Infinity,p=-Infinity,F=-Infinity;for(c=0;c<d;++c)isNaN(e=+this._x.call(null,a=b[c]))||isNaN(l=+this._y.call(null,a))||(h[c]=e,q[c]=l,e<n&&(n=e),e>p&&(p=e),l<u&&(u=l),l>F&&(F=l));p<n&&(n=this._x0,p=this._x1);F<u&&(u=this._y0,F=this._y1);this.cover(n,u).cover(p,F);for(c=0;c<d;++c)g(this,h[c],q[c],b[c]);return this};q.cover=function(b,a){if(isNaN(b=+b)||isNaN(a=+a))return this;var c=this._x0,d=this._y0,f=this._x1,e=this._y1;if(isNaN(c))f=(c=Math.floor(b))+1,e=(d=Math.floor(a))+1;else if(c>b||b>f||
d>a||a>e){var g=f-c,l=this._root,h;switch(h=(a<(d+e)/2)<<1|b<(c+f)/2){case 0:do{var q=Array(4);q[h]=l;l=q}while(g*=2,f=c+g,e=d+g,b>f||a>e);break;case 1:do q=Array(4),q[h]=l,l=q;while(g*=2,c=f-g,e=d+g,c>b||a>e);break;case 2:do q=Array(4),q[h]=l,l=q;while(g*=2,f=c+g,d=e-g,b>f||d>a);break;case 3:do q=Array(4),q[h]=l,l=q;while(g*=2,c=f-g,d=e-g,c>b||d>a)}this._root&&this._root.length&&(this._root=l)}else return this;this._x0=c;this._y0=d;this._x1=f;this._y1=e;return this};q.data=function(){var b=[];this.visit(function(a){if(!a.length){do b.push(a.data);
while(a=a.next)}});return b};q.extent=function(b){return arguments.length?this.cover(+b[0][0],+b[0][1]).cover(+b[1][0],+b[1][1]):isNaN(this._x0)?void 0:[[this._x0,this._y0],[this._x1,this._y1]]};q.find=function(b,a,c){var d=this._x0,f=this._y0,e,g,l,h,q=this._x1,n=this._y1,p=[],B=this._root,m;B&&p.push(new u(B,d,f,q,n));null==c?c=Infinity:(d=b-c,f=a-c,q=b+c,n=a+c,c*=c);for(;m=p.pop();)if(!(!(B=m.node)||(e=m.x0)>q||(g=m.y0)>n||(l=m.x1)<d||(h=m.y1)<f))if(B.length){m=(e+l)/2;var D=(g+h)/2;p.push(new u(B[3],
m,D,l,h),new u(B[2],e,D,m,h),new u(B[1],m,g,l,D),new u(B[0],e,g,m,D));if(B=(a>=D)<<1|b>=m)m=p[p.length-1],p[p.length-1]=p[p.length-1-B],p[p.length-1-B]=m}else if(m=b-+this._x.call(null,B.data),D=a-+this._y.call(null,B.data),m=m*m+D*D,m<c){var t=Math.sqrt(c=m);d=b-t;f=a-t;q=b+t;n=a+t;t=B.data}return t};q.remove=function(b){if(isNaN(q=+this._x.call(null,b))||isNaN(n=+this._y.call(null,b)))return this;var a,c=this._root,d,e=this._x0,g=this._y0,l=this._x1,h=this._y1,q,n,u,p,B,m;if(!c)return this;if(c.length)for(;;){(B=
q>=(u=(e+l)/2))?e=u:l=u;(m=n>=(p=(g+h)/2))?g=p:h=p;if(!(a=c,c=c[B|=m<<1]))return this;if(!c.length)break;if(a[B+1&3]||a[B+2&3]||a[B+3&3]){var t=a;var G=B}}for(;c.data!==b;)if(!(d=c,c=c.next))return this;(b=c.next)&&delete c.next;if(d)return b?d.next=b:delete d.next,this;if(!a)return this._root=b,this;b?a[B]=b:delete a[B];(c=a[0]||a[1]||a[2]||a[3])&&c===(a[3]||a[2]||a[1]||a[0])&&!c.length&&(t?t[G]=c:this._root=c);return this};q.removeAll=function(b){for(var a=0,c=b.length;a<c;++a)this.remove(b[a]);
return this};q.root=function(){return this._root};q.size=function(){var b=0;this.visit(function(a){if(!a.length){do++b;while(a=a.next)}});return b};q.visit=function(b){var a=[],c,d=this._root,e,g,l,h;for(d&&a.push(new u(d,this._x0,this._y0,this._x1,this._y1));c=a.pop();)if(!b(d=c.node,g=c.x0,l=c.y0,h=c.x1,c=c.y1)&&d.length){var q=(g+h)/2,n=(l+c)/2;(e=d[3])&&a.push(new u(e,q,n,h,c));(e=d[2])&&a.push(new u(e,g,n,q,c));(e=d[1])&&a.push(new u(e,q,l,h,n));(e=d[0])&&a.push(new u(e,g,l,q,n))}return this};
q.visitAfter=function(b){var a=[],c=[],d;for(this._root&&a.push(new u(this._root,this._x0,this._y0,this._x1,this._y1));d=a.pop();){var e=d.node;if(e.length){var g,l=d.x0,h=d.y0,q=d.x1,n=d.y1,p=(l+q)/2,F=(h+n)/2;(g=e[0])&&a.push(new u(g,l,h,p,F));(g=e[1])&&a.push(new u(g,p,h,q,F));(g=e[2])&&a.push(new u(g,l,F,p,n));(g=e[3])&&a.push(new u(g,p,F,q,n))}c.push(d)}for(;d=c.pop();)b(d.node,d.x0,d.y0,d.x1,d.y1);return this};q.x=function(b){return arguments.length?(this._x=b,this):this._x};q.y=function(b){return arguments.length?
(this._y=b,this):this._y};a.quadtree=n;Object.defineProperty(a,"__esModule",{value:!0})})},{}],151:[function(a,t,m){(function(p,g){"object"===typeof m&&"undefined"!==typeof t?g(m,a("d3-array"),a("d3-collection"),a("d3-shape"),a("elementary-circuits-directed-graph")):g(p.d3=p.d3||{},p.d3,p.d3,p.d3,null)})(this,function(a,g,h,e,n){function b(b){return b.target.depth}function l(b,a){return b.sourceLinks.length?b.depth:a-1}function u(b){return function(){return b}}function q(b,a){return f(b.source,a.source)||
b.index-a.index}function d(b,a){return f(b.target,a.target)||b.index-a.index}function f(b,a){return b.partOfCycle===a.partOfCycle?b.y0-a.y0:"top"===b.circularLinkType||"bottom"===a.circularLinkType?-1:1}function c(b){return b.value}function k(b){return(b.y0+b.y1)/2}function r(b){return k(b.source)}function v(b){return k(b.target)}function p(b){return b.index}function A(b){return b.nodes}function y(b){return b.links}function w(b,a){b=b.get(a);if(!b)throw Error("missing: "+a);return b}function x(b,
a,c){var d=0;if(null===c){var f=[];for(a=0;a<b.links.length;a++){var e=b.links[a],k=e.source.index;e=e.target.index;f[k]||(f[k]=[]);f[e]||(f[e]=[]);-1===f[k].indexOf(e)&&f[k].push(e)}f=n(f);f.sort(function(b,a){return b.length-a.length});var r={};for(a=0;a<f.length;a++){k=f[a];e=!1;for(var g=0;g<k.length-1;g++)if(r[k[g]]||(r[k[g]]={}),r[k[g]]&&r[k[g]][k[g+1]]){e=!0;break}e||(k=k.slice(-2),r[k[0]][k[1]]=!0)}b.links.forEach(function(b){var a=b.target.index,c=b.source.index;a===c||r[c]&&r[c][a]?(b.circular=
!0,b.circularLinkID=d,d+=1):b.circular=!1})}else b.links.forEach(function(b){b.source[c]<b.target[c]?b.circular=!1:(b.circular=!0,b.circularLinkID=d,d+=1)})}function F(b,a){var c=0,d=0;b.links.forEach(function(f){f.circular&&(f.circularLinkType=f.source.circularLinkType||f.target.circularLinkType?f.source.circularLinkType?f.source.circularLinkType:f.target.circularLinkType:c<d?"top":"bottom","top"==f.circularLinkType?c+=1:d+=1,b.nodes.forEach(function(b){if(a(b)==a(f.source)||a(b)==a(f.target))b.circularLinkType=
f.circularLinkType}))});b.links.forEach(function(b){b.circular&&(b.source.circularLinkType==b.target.circularLinkType&&(b.circularLinkType=b.source.circularLinkType),da(b,a)&&(b.circularLinkType=b.source.circularLinkType))})}function B(b){return Math.atan(Math.abs(b.target.x0-b.source.x1)/Math.abs(b.y1-b.y0))}function m(b,a){var c=0;b.sourceLinks.forEach(function(b){c=b.circular&&!da(b,a)?c+1:c});var d=0;b.targetLinks.forEach(function(b){d=b.circular&&!da(b,a)?d+1:d});return c+d}function t(b){var a=
0;b.source.sourceLinks.forEach(function(b){a=b.circular?a+1:a});var c=0;b.target.targetLinks.forEach(function(b){c=b.circular?c+1:c});return 1<a||1<c?!1:!0}function G(b,a,c){b.sort(E);b.forEach(function(d,f){var e=0;if(!da(d,c)||!t(d)){var k=0;for(k;k<f;k++){var r=b[f];var g=b[k];r=r.source.column<g.target.column?!1:r.target.column>g.source.column?!1:!0;r&&(r=b[k].circularPathData.verticalBuffer+b[k].width/2+a,e=r>e?r:e)}}d.circularPathData.verticalBuffer=e+d.width/2});return b}function H(b,a,c,d){var f=
g.min(b.links,function(b){return b.source.y0});b.links.forEach(function(b){b.circular&&(b.circularPathData={})});var k=b.links.filter(function(b){return"top"==b.circularLinkType});G(k,a,d);k=b.links.filter(function(b){return"bottom"==b.circularLinkType});G(k,a,d);b.links.forEach(function(k){if(k.circular){k.circularPathData.arcRadius=k.width+10;k.circularPathData.leftNodeBuffer=5;k.circularPathData.rightNodeBuffer=5;k.circularPathData.sourceWidth=k.source.x1-k.source.x0;k.circularPathData.sourceX=
k.source.x0+k.circularPathData.sourceWidth;k.circularPathData.targetX=k.target.x0;k.circularPathData.sourceY=k.y0;k.circularPathData.targetY=k.y1;if(da(k,d)&&t(k))k.circularPathData.leftSmallArcRadius=10+k.width/2,k.circularPathData.leftLargeArcRadius=10+k.width/2,k.circularPathData.rightSmallArcRadius=10+k.width/2,k.circularPathData.rightLargeArcRadius=10+k.width/2,"bottom"==k.circularLinkType?(k.circularPathData.verticalFullExtent=k.source.y1+25+k.circularPathData.verticalBuffer,k.circularPathData.verticalLeftInnerExtent=
k.circularPathData.verticalFullExtent-k.circularPathData.leftLargeArcRadius,k.circularPathData.verticalRightInnerExtent=k.circularPathData.verticalFullExtent-k.circularPathData.rightLargeArcRadius):(k.circularPathData.verticalFullExtent=k.source.y0-25-k.circularPathData.verticalBuffer,k.circularPathData.verticalLeftInnerExtent=k.circularPathData.verticalFullExtent+k.circularPathData.leftLargeArcRadius,k.circularPathData.verticalRightInnerExtent=k.circularPathData.verticalFullExtent+k.circularPathData.rightLargeArcRadius);
else{var r=k.source.column,g=k.circularLinkType,l=b.links.filter(function(b){return b.source.column==r&&b.circularLinkType==g});"bottom"==k.circularLinkType?l.sort(I):l.sort(K);var h=0;l.forEach(function(b,c){b.circularLinkID==k.circularLinkID&&(k.circularPathData.leftSmallArcRadius=10+k.width/2+h,k.circularPathData.leftLargeArcRadius=10+k.width/2+c*a+h);h+=b.width});r=k.target.column;l=b.links.filter(function(b){return b.target.column==r&&b.circularLinkType==g});"bottom"==k.circularLinkType?l.sort(L):
l.sort(J);h=0;l.forEach(function(b,c){b.circularLinkID==k.circularLinkID&&(k.circularPathData.rightSmallArcRadius=10+k.width/2+h,k.circularPathData.rightLargeArcRadius=10+k.width/2+c*a+h);h+=b.width});"bottom"==k.circularLinkType?(k.circularPathData.verticalFullExtent=Math.max(c,k.source.y1,k.target.y1)+25+k.circularPathData.verticalBuffer,k.circularPathData.verticalLeftInnerExtent=k.circularPathData.verticalFullExtent-k.circularPathData.leftLargeArcRadius,k.circularPathData.verticalRightInnerExtent=
k.circularPathData.verticalFullExtent-k.circularPathData.rightLargeArcRadius):(k.circularPathData.verticalFullExtent=f-25-k.circularPathData.verticalBuffer,k.circularPathData.verticalLeftInnerExtent=k.circularPathData.verticalFullExtent+k.circularPathData.leftLargeArcRadius,k.circularPathData.verticalRightInnerExtent=k.circularPathData.verticalFullExtent+k.circularPathData.rightLargeArcRadius)}k.circularPathData.leftInnerExtent=k.circularPathData.sourceX+k.circularPathData.leftNodeBuffer;k.circularPathData.rightInnerExtent=
k.circularPathData.targetX-k.circularPathData.rightNodeBuffer;k.circularPathData.leftFullExtent=k.circularPathData.sourceX+k.circularPathData.leftLargeArcRadius+k.circularPathData.leftNodeBuffer;k.circularPathData.rightFullExtent=k.circularPathData.targetX-k.circularPathData.rightLargeArcRadius-k.circularPathData.rightNodeBuffer}k.circular?k.path="top"==k.circularLinkType?"M"+k.circularPathData.sourceX+" "+k.circularPathData.sourceY+" L"+k.circularPathData.leftInnerExtent+" "+k.circularPathData.sourceY+
" A"+k.circularPathData.leftLargeArcRadius+" "+k.circularPathData.leftSmallArcRadius+" 0 0 0 "+k.circularPathData.leftFullExtent+" "+(k.circularPathData.sourceY-k.circularPathData.leftSmallArcRadius)+" L"+k.circularPathData.leftFullExtent+" "+k.circularPathData.verticalLeftInnerExtent+" A"+k.circularPathData.leftLargeArcRadius+" "+k.circularPathData.leftLargeArcRadius+" 0 0 0 "+k.circularPathData.leftInnerExtent+" "+k.circularPathData.verticalFullExtent+" L"+k.circularPathData.rightInnerExtent+" "+
k.circularPathData.verticalFullExtent+" A"+k.circularPathData.rightLargeArcRadius+" "+k.circularPathData.rightLargeArcRadius+" 0 0 0 "+k.circularPathData.rightFullExtent+" "+k.circularPathData.verticalRightInnerExtent+" L"+k.circularPathData.rightFullExtent+" "+(k.circularPathData.targetY-k.circularPathData.rightSmallArcRadius)+" A"+k.circularPathData.rightLargeArcRadius+" "+k.circularPathData.rightSmallArcRadius+" 0 0 0 "+k.circularPathData.rightInnerExtent+" "+k.circularPathData.targetY+" L"+k.circularPathData.targetX+
" "+k.circularPathData.targetY:"M"+k.circularPathData.sourceX+" "+k.circularPathData.sourceY+" L"+k.circularPathData.leftInnerExtent+" "+k.circularPathData.sourceY+" A"+k.circularPathData.leftLargeArcRadius+" "+k.circularPathData.leftSmallArcRadius+" 0 0 1 "+k.circularPathData.leftFullExtent+" "+(k.circularPathData.sourceY+k.circularPathData.leftSmallArcRadius)+" L"+k.circularPathData.leftFullExtent+" "+k.circularPathData.verticalLeftInnerExtent+" A"+k.circularPathData.leftLargeArcRadius+" "+k.circularPathData.leftLargeArcRadius+
" 0 0 1 "+k.circularPathData.leftInnerExtent+" "+k.circularPathData.verticalFullExtent+" L"+k.circularPathData.rightInnerExtent+" "+k.circularPathData.verticalFullExtent+" A"+k.circularPathData.rightLargeArcRadius+" "+k.circularPathData.rightLargeArcRadius+" 0 0 1 "+k.circularPathData.rightFullExtent+" "+k.circularPathData.verticalRightInnerExtent+" L"+k.circularPathData.rightFullExtent+" "+(k.circularPathData.targetY+k.circularPathData.rightSmallArcRadius)+" A"+k.circularPathData.rightLargeArcRadius+
" "+k.circularPathData.rightSmallArcRadius+" 0 0 1 "+k.circularPathData.rightInnerExtent+" "+k.circularPathData.targetY+" L"+k.circularPathData.targetX+" "+k.circularPathData.targetY:(l=e.linkHorizontal().source(function(b){return[b.source.x0+(b.source.x1-b.source.x0),b.y0]}).target(function(b){return[b.target.x0,b.y1]}),k.path=l(k))})}function E(b,a){return M(b)==M(a)?"bottom"==b.circularLinkType?I(b,a):K(b,a):M(a)-M(b)}function K(b,a){return b.y0-a.y0}function I(b,a){return a.y0-b.y0}function J(b,
a){return b.y1-a.y1}function L(b,a){return a.y1-b.y1}function M(b){return b.target.column-b.source.column}function N(b,a){var c=B(b);a=(a.target.x0-a.source.x1)/Math.tan(c);return"up"==ba(b)?b.y1+a:b.y1-a}function O(b,a){var c=B(b);a=(a.target.x0-a.source.x1)/Math.tan(c);return"up"==ba(b)?b.y1-a:b.y1+a}function R(b,a,c,d){b.links.forEach(function(f){if(!f.circular&&1<f.target.column-f.source.column){var e=f.source.column+1,k=f.target.column-1,r=1,g=k-e+1;for(r=1;e<=k;e++,r++)b.nodes.forEach(function(k){if(k.column==
e){var l=r/(g+1),h=Math.pow(1-l,3)*f.y0+3*l*Math.pow(1-l,2)*f.y0+3*Math.pow(l,2)*(1-l)*f.y1+Math.pow(l,3)*f.y1;l=h-f.width/2;h+=f.width/2;if(l>k.y0&&l<k.y1){var q=k.y1-l+10;q="bottom"==k.circularLinkType?q:-q;k=T(k,q,a,c);b.nodes.forEach(function(b){d(b)!=d(k)&&b.column==k.column&&(k.y0>b.y0&&k.y0<b.y1||k.y1>b.y0&&k.y1<b.y1||k.y0<b.y0&&k.y1>b.y1)&&T(b,q,a,c)})}else h>k.y0&&h<k.y1?(q=h-k.y0+10,k=T(k,q,a,c),b.nodes.forEach(function(b){d(b)!=d(k)&&b.column==k.column&&b.y0<k.y1&&b.y1>k.y1&&T(b,q,a,c)})):
l<k.y0&&h>k.y1&&(q=h-k.y0+10,k=T(k,q,a,c),b.nodes.forEach(function(b){d(b)!=d(k)&&b.column==k.column&&b.y0<k.y1&&b.y1>k.y1&&T(b,q,a,c)}))}})}})}function T(b,a,c,d){b.y0+a>=c&&b.y1+a<=d&&(b.y0+=a,b.y1+=a,b.targetLinks.forEach(function(b){b.y1+=a}),b.sourceLinks.forEach(function(b){b.y0+=a}));return b}function P(b,a,c,d){b.nodes.forEach(function(f){d&&f.y+(f.y1-f.y0)>a&&(f.y-=f.y+(f.y1-f.y0)-a);var e=b.links.filter(function(b){return c(b.source)==c(f)}),k=e.length;1<k&&e.sort(function(b,a){if(!b.circular&&
!a.circular)if(b.target.column!=a.target.column&&ba(b)==ba(a)){if(b.target.column>a.target.column)return a=O(a,b),b.y1-a;if(a.target.column>b.target.column)return O(b,a)-a.y1}else return b.y1-a.y1;if(b.circular&&!a.circular)return"top"==b.circularLinkType?-1:1;if(a.circular&&!b.circular)return"top"==a.circularLinkType?1:-1;if(b.circular&&a.circular)return b.circularLinkType===a.circularLinkType&&"top"==b.circularLinkType?b.target.column===a.target.column?b.target.y1-a.target.y1:a.target.column-b.target.column:
b.circularLinkType===a.circularLinkType&&"bottom"==b.circularLinkType?b.target.column===a.target.column?a.target.y1-b.target.y1:b.target.column-a.target.column:"top"==b.circularLinkType?-1:1});var r=f.y0;e.forEach(function(b){b.y0=r+b.width/2;r+=b.width});e.forEach(function(b,a){if("bottom"==b.circularLinkType){a+=1;var c=0;for(a;a<k;a++)c+=e[a].width;b.y0=f.y1-c-b.width/2}})})}function S(b,a,c){b.nodes.forEach(function(a){var d=b.links.filter(function(b){return c(b.target)==c(a)}),f=d.length;1<f&&
d.sort(function(b,a){if(!b.circular&&!a.circular)if(b.source.column!=a.source.column&&ba(b)==ba(a)){if(a.source.column<b.source.column)return a=N(a,b),b.y0-a;if(b.source.column<a.source.column)return N(b,a)-a.y0}else return b.y0-a.y0;if(b.circular&&!a.circular)return"top"==b.circularLinkType?-1:1;if(a.circular&&!b.circular)return"top"==a.circularLinkType?1:-1;if(b.circular&&a.circular)return b.circularLinkType===a.circularLinkType&&"top"==b.circularLinkType?b.source.column===a.source.column?b.source.y1-
a.source.y1:b.source.column-a.source.column:b.circularLinkType===a.circularLinkType&&"bottom"==b.circularLinkType?b.source.column===a.source.column?b.source.y1-a.source.y1:a.source.column-b.source.column:"top"==b.circularLinkType?-1:1});var e=a.y0;d.forEach(function(b){b.y1=e+b.width/2;e+=b.width});d.forEach(function(b,c){if("bottom"==b.circularLinkType){c+=1;var e=0;for(c;c<f;c++)e+=d[c].width;b.y1=a.y1-e-b.width/2}})})}function ba(b){return 0<b.y0-b.y1?"up":"down"}function da(b,a){return a(b.source)==
a(b.target)}function ca(b,a,c){var d=b.nodes;b=b.links;var f=!1,e=!1;b.forEach(function(b){"top"==b.circularLinkType?f=!0:"bottom"==b.circularLinkType&&(e=!0)});if(0==f||0==e){var k=g.min(d,function(b){return b.y0}),r=g.max(d,function(b){return b.y1}),l=(c-a)/(r-k);d.forEach(function(b){var a=(b.y1-b.y0)*l;b.y0=(b.y0-k)*l;b.y1=b.y0+a});b.forEach(function(b){b.y0=(b.y0-k)*l;b.y1=(b.y1-k)*l;b.width*=l})}}n=n&&n.hasOwnProperty("default")?n["default"]:n;$jscomp.initSymbol();$jscomp.initSymbol();$jscomp.initSymbolIterator();
var Y="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(b){return typeof b}:function(b){$jscomp.initSymbol();$jscomp.initSymbol();$jscomp.initSymbol();return b&&"function"===typeof Symbol&&b.constructor===Symbol&&b!==Symbol.prototype?"symbol":typeof b};a.sankeyCircular=function(){function b(){var b={nodes:O.apply(null,arguments),links:N.apply(null,arguments)};a(b);x(b,K,ya);e(b);B(b);F(b,K);J(b,T,K);I(b);for(var c=0;4>c;c++)P(b,D,K),S(b,D,K),R(b,C,D,K),P(b,D,K),S(b,D,K);ca(b,
C,D);H(b,ba,D,K);return b}function a(b){b.nodes.forEach(function(b,a){b.index=a;b.sourceLinks=[];b.targetLinks=[]});var a=h.map(b.nodes,K);b.links.forEach(function(b,c){b.index=c;c=b.source;var d=b.target;"object"!==("undefined"===typeof c?"undefined":Y(c))&&(c=b.source=w(a,c));"object"!==("undefined"===typeof d?"undefined":Y(d))&&(d=b.target=w(a,d));c.sourceLinks.push(b);d.targetLinks.push(b)});return b}function e(b){b.nodes.forEach(function(b){b.partOfCycle=!1;b.value=Math.max(g.sum(b.sourceLinks,
c),g.sum(b.targetLinks,c));b.sourceLinks.forEach(function(a){a.circular&&(b.partOfCycle=!0,b.circularLinkType=a.circularLinkType)});b.targetLinks.forEach(function(a){a.circular&&(b.partOfCycle=!0,b.circularLinkType=a.circularLinkType)})})}function n(b){var a=0,c=0,d=0,f=0,e=g.max(b.nodes,function(b){return b.column});b.links.forEach(function(b){b.circular&&("top"==b.circularLinkType?a+=b.width:c+=b.width,0==b.target.column&&(f+=b.width),b.source.column==e&&(d+=b.width))});a=0<a?a+25+10:a;c=0<c?c+
25+10:c;d=0<d?d+25+10:d;f=0<f?f+25+10:f;return{top:a,bottom:c,left:f,right:d}}function z(b,a){var c=g.max(b.nodes,function(b){return b.column}),d=t-E,f=D-C;d/=d+a.right+a.left;f/=f+a.top+a.bottom;E=E*d+a.left;t=0==a.right?t:t*d;C=C*f+a.top;D*=f;b.nodes.forEach(function(b){b.x0=E+(t-E-G)/c*b.column;b.x1=b.x0+G});return f}function B(b){var a;var c=b.nodes;var d=[];for(a=0;c.length;++a,c=d,d=[])c.forEach(function(b){b.depth=a;b.sourceLinks.forEach(function(b){0>d.indexOf(b.target)&&!b.circular&&d.push(b.target)})});
c=b.nodes;d=[];for(a=0;c.length;++a,c=d,d=[])c.forEach(function(b){b.height=a;b.targetLinks.forEach(function(b){0>d.indexOf(b.source)&&!b.circular&&d.push(b.source)})});b.nodes.forEach(function(b){b.column=Math.floor(M.call(null,b,a))})}function J(b,a,d){function e(b,a){var c=q.length;q.forEach(function(d){var f=d.length,e=d[0].depth;d.forEach(function(d){if((d.sourceLinks.length||d.targetLinks.length)&&!(d.partOfCycle&&0<m(d,a)))if(0==e&&1==f){var l=d.y1-d.y0;d.y0=D/2-l/2;d.y1=D/2+l/2}else if(e==
c-1&&1==f)l=d.y1-d.y0,d.y0=D/2-l/2,d.y1=D/2+l/2;else{l=g.mean(d.sourceLinks,v);var h=g.mean(d.targetLinks,r);l=((l&&h?(l+h)/2:l||h)-k(d))*b;d.y0+=l;d.y1+=l}})})}function l(){q.forEach(function(b){var a=C,c=b.length,d;b.sort(f);for(d=0;d<c;++d){var e=b[d];var k=a-e.y0;0<k&&(e.y0+=k,e.y1+=k);a=e.y1+L}k=a-L-D;if(0<k)for(a=e.y0-=k,e.y1-=k,d=c-2;0<=d;--d)e=b[d],k=e.y1+L-a,0<k&&(e.y0-=k,e.y1-=k),a=e.y0})}var q=h.nest().key(function(b){return b.column}).sortKeys(g.ascending).entries(b.nodes).map(function(b){return b.values});
(function(a){if(da){var d=Infinity;q.forEach(function(b){b=D*da/(b.length+1);d=b<d?b:d});L=d}var f=g.min(q,function(b){return(D-C-(b.length-1)*L)/g.sum(b,c)});f*=.3;b.links.forEach(function(b){b.width=b.value*f});var e=n(b),k=z(b,e);f*=k;b.links.forEach(function(b){b.width=b.value*f});q.forEach(function(b){var c=b.length;b.forEach(function(b,d){b.depth==q.length-1&&1==c?b.y0=D/2-b.value*f:0==b.depth&&1==c?b.y0=D/2-b.value*f:b.partOfCycle?0==m(b,a)?b.y0=D/2+d:b.y0="top"==b.circularLinkType?C+d:D-b.value*
f-d:b.y0=0==e.top||0==e.bottom?(D-C)/c*d:(D-C)/2-c/2+d;b.y1=b.y0+b.value*f})})})(d);l();for(var u=1;0<a;--a)e(u*=.99,d),l()}function I(b){b.nodes.forEach(function(b){b.sourceLinks.sort(d);b.targetLinks.sort(q)});b.nodes.forEach(function(b){var a=b.y0,c=a,d=b.y1,f=d;b.sourceLinks.forEach(function(b){b.circular?(b.y0=d-b.width/2,d-=b.width):(b.y0=a+b.width/2,a+=b.width)});b.targetLinks.forEach(function(b){b.circular?(b.y1=f-b.width/2,f-=b.width):(b.y1=c+b.width/2,c+=b.width)})})}var E=0,C=0,t=1,D=1,
G=24,L,K=p,M=l,O=A,N=y,T=32,ba=2,da,ya=null;b.nodeId=function(a){return arguments.length?(K="function"===typeof a?a:u(a),b):K};b.nodeAlign=function(a){return arguments.length?(M="function"===typeof a?a:u(a),b):M};b.nodeWidth=function(a){return arguments.length?(G=+a,b):G};b.nodePadding=function(a){return arguments.length?(L=+a,b):L};b.nodes=function(a){return arguments.length?(O="function"===typeof a?a:u(a),b):O};b.links=function(a){return arguments.length?(N="function"===typeof a?a:u(a),b):N};b.size=
function(a){return arguments.length?(E=C=0,t=+a[0],D=+a[1],b):[t-E,D-C]};b.extent=function(a){return arguments.length?(E=+a[0][0],t=+a[1][0],C=+a[0][1],D=+a[1][1],b):[[E,C],[t,D]]};b.iterations=function(a){return arguments.length?(T=+a,b):T};b.circularLinkGap=function(a){return arguments.length?(ba=+a,b):ba};b.nodePaddingRatio=function(a){return arguments.length?(da=+a,b):da};b.sortNodes=function(a){return arguments.length?(ya=a,b):ya};b.update=function(b){F(b,K);I(b);b.links.forEach(function(b){b.circular&&
(b.circularLinkType=b.y0+b.y1<D?"top":"bottom",b.source.circularLinkType=b.circularLinkType,b.target.circularLinkType=b.circularLinkType)});P(b,D,K,!1);S(b,D,K);H(b,ba,D,K);return b};return b};a.sankeyCenter=function(a){return a.targetLinks.length?a.depth:a.sourceLinks.length?g.min(a.sourceLinks,b)-1:0};a.sankeyLeft=function(b){return b.depth};a.sankeyRight=function(b,a){return a-1-b.height};a.sankeyJustify=l;Object.defineProperty(a,"__esModule",{value:!0})})},{"d3-array":142,"d3-collection":143,
"d3-shape":152,"elementary-circuits-directed-graph":164}],152:[function(a,t,m){(function(p,g){"object"===typeof m&&"undefined"!==typeof t?g(m,a("d3-path")):g(p.d3=p.d3||{},p.d3)})(this,function(a,g){function h(b){return function(){return b}}function e(b){return 1<=b?Ja:-1>=b?-Ja:Math.asin(b)}function n(b){return b.innerRadius}function b(b){return b.outerRadius}function l(b){return b.startAngle}function u(b){return b.endAngle}function q(b){return b&&b.padAngle}function d(b,a,c,d,f,e,k){var r=b-c,g=
a-d;k=(k?e:-e)/aa(r*r+g*g);g*=k;r*=-k;var l=b+g,h=a+r,q=c+g,n=d+r;c=(l+q)/2;d=(h+n)/2;a=q-l;b=n-h;k=a*a+b*b;e=f-e;n=l*n-q*h;var u=(0>b?-1:1)*aa(ka(0,e*e*k-n*n));l=(n*b-a*u)/k;h=(-n*a-b*u)/k;q=(n*b+a*u)/k;a=(-n*a+b*u)/k;b=l-c;k=h-d;c=q-c;d=a-d;b*b+k*k>c*c+d*d&&(l=q,h=a);return{cx:l,cy:h,x01:-g,y01:-r,x11:l*(f/e-1),y11:h*(f/e-1)}}function f(b){this._context=b}function c(b){return new f(b)}function k(b){return b[0]}function r(b){return b[1]}function v(){function b(b){var c,k=b.length,r,h=!1,n;null==
e&&(q=l(n=g.path()));for(c=0;c<=k;++c)!(c<k&&f(r=b[c],c,b))===h&&((h=!h)?q.lineStart():q.lineEnd()),h&&q.point(+a(r,c,b),+d(r,c,b));if(n)return q=null,n+""||null}var a=k,d=r,f=h(!0),e=null,l=c,q=null;b.x=function(c){return arguments.length?(a="function"===typeof c?c:h(+c),b):a};b.y=function(a){return arguments.length?(d="function"===typeof a?a:h(+a),b):d};b.defined=function(a){return arguments.length?(f="function"===typeof a?a:h(!!a),b):f};b.curve=function(a){return arguments.length?(l=a,null!=e&&
(q=l(e)),b):l};b.context=function(a){return arguments.length?(null==a?e=q=null:q=l(e=a),b):e};return b}function p(){function b(b){var a,c,k=b.length,r,h=!1,v,A=Array(k),z=Array(k);null==n&&(p=u(v=g.path()));for(a=0;a<=k;++a){if(!(a<k&&q(r=b[a],a,b))===h)if(h=!h){var w=a;p.areaStart();p.lineStart()}else{p.lineEnd();p.lineStart();for(c=a-1;c>=w;--c)p.point(A[c],z[c]);p.lineEnd();p.areaEnd()}h&&(A[a]=+d(r,a,b),z[a]=+e(r,a,b),p.point(f?+f(r,a,b):A[a],l?+l(r,a,b):z[a]))}if(v)return p=null,v+""||null}function a(){return v().defined(q).curve(u).context(n)}
var d=k,f=null,e=h(0),l=r,q=h(!0),n=null,u=c,p=null;b.x=function(a){return arguments.length?(d="function"===typeof a?a:h(+a),f=null,b):d};b.x0=function(a){return arguments.length?(d="function"===typeof a?a:h(+a),b):d};b.x1=function(a){return arguments.length?(f=null==a?null:"function"===typeof a?a:h(+a),b):f};b.y=function(a){return arguments.length?(e="function"===typeof a?a:h(+a),l=null,b):e};b.y0=function(a){return arguments.length?(e="function"===typeof a?a:h(+a),b):e};b.y1=function(a){return arguments.length?
(l=null==a?null:"function"===typeof a?a:h(+a),b):l};b.lineX0=b.lineY0=function(){return a().x(d).y(e)};b.lineY1=function(){return a().x(d).y(l)};b.lineX1=function(){return a().x(f).y(e)};b.defined=function(a){return arguments.length?(q="function"===typeof a?a:h(!!a),b):q};b.curve=function(a){return arguments.length?(u=a,null!=n&&(p=u(n)),b):u};b.context=function(a){return arguments.length?(null==a?n=p=null:p=u(n=a),b):n};return b}function A(b,a){return a<b?-1:a>b?1:a>=b?0:NaN}function y(b){return b}
function w(b){this._curve=b}function x(b){function a(a){return new w(b(a))}a._curve=b;return a}function F(b){var a=b.curve;b.angle=b.x;delete b.x;b.radius=b.y;delete b.y;b.curve=function(b){return arguments.length?a(x(b)):a()._curve};return b}function B(){return F(v().curve(Ra))}function m(){var b=p().curve(Ra),a=b.curve,c=b.lineX0,d=b.lineX1,f=b.lineY0,e=b.lineY1;b.angle=b.x;delete b.x;b.startAngle=b.x0;delete b.x0;b.endAngle=b.x1;delete b.x1;b.radius=b.y;delete b.y;b.innerRadius=b.y0;delete b.y0;
b.outerRadius=b.y1;delete b.y1;b.lineStartAngle=function(){return F(c())};delete b.lineX0;b.lineEndAngle=function(){return F(d())};delete b.lineX1;b.lineInnerRadius=function(){return F(f())};delete b.lineY0;b.lineOuterRadius=function(){return F(e())};delete b.lineY1;b.curve=function(b){return arguments.length?a(x(b)):a()._curve};return b}function D(b,a){return[(a=+a)*Math.cos(b-=Math.PI/2),a*Math.sin(b)]}function t(b){return b.source}function H(b){return b.target}function E(b){function a(){var a,
k=rb.call(arguments),r=c.apply(this,k),h=d.apply(this,k);l||(l=a=g.path());b(l,+f.apply(this,(k[0]=r,k)),+e.apply(this,k),+f.apply(this,(k[0]=h,k)),+e.apply(this,k));if(a)return l=null,a+""||null}var c=t,d=H,f=k,e=r,l=null;a.source=function(b){return arguments.length?(c=b,a):c};a.target=function(b){return arguments.length?(d=b,a):d};a.x=function(b){return arguments.length?(f="function"===typeof b?b:h(+b),a):f};a.y=function(b){return arguments.length?(e="function"===typeof b?b:h(+b),a):e};a.context=
function(b){return arguments.length?(l=null==b?null:b,a):l};return a}function K(b,a,c,d,f){b.moveTo(a,c);b.bezierCurveTo(a=(a+d)/2,c,a,f,d,f)}function I(b,a,c,d,f){b.moveTo(a,c);b.bezierCurveTo(a,c=(c+f)/2,d,c,d,f)}function J(b,a,c,d,f){var e=D(a,c);a=D(a,c=(c+f)/2);c=D(d,c);d=D(d,f);b.moveTo(e[0],e[1]);b.bezierCurveTo(a[0],a[1],c[0],c[1],d[0],d[1])}function L(){}function M(b,a,c){b._context.bezierCurveTo((2*b._x0+b._x1)/3,(2*b._y0+b._y1)/3,(b._x0+2*b._x1)/3,(b._y0+2*b._y1)/3,(b._x0+4*b._x1+a)/6,
(b._y0+4*b._y1+c)/6)}function N(b){this._context=b}function O(b){this._context=b}function R(b){this._context=b}function T(b,a){this._basis=new N(b);this._beta=a}function P(b,a,c){b._context.bezierCurveTo(b._x1+b._k*(b._x2-b._x0),b._y1+b._k*(b._y2-b._y0),b._x2+b._k*(b._x1-a),b._y2+b._k*(b._y1-c),b._x2,b._y2)}function S(b,a){this._context=b;this._k=(1-a)/6}function ba(b,a){this._context=b;this._k=(1-a)/6}function da(b,a){this._context=b;this._k=(1-a)/6}function ca(b,a,c){var d=b._x1,f=b._y1,e=b._x2,
k=b._y2;if(1E-12<b._l01_a){var r=2*b._l01_2a+3*b._l01_a*b._l12_a+b._l12_2a,g=3*b._l01_a*(b._l01_a+b._l12_a);d=(d*r-b._x0*b._l12_2a+b._x2*b._l01_2a)/g;f=(f*r-b._y0*b._l12_2a+b._y2*b._l01_2a)/g}1E-12<b._l23_a&&(r=2*b._l23_2a+3*b._l23_a*b._l12_a+b._l12_2a,g=3*b._l23_a*(b._l23_a+b._l12_a),e=(e*r+b._x1*b._l23_2a-a*b._l12_2a)/g,k=(k*r+b._y1*b._l23_2a-c*b._l12_2a)/g);b._context.bezierCurveTo(d,f,e,k,b._x2,b._y2)}function Y(b,a){this._context=b;this._alpha=a}function W(b,a){this._context=b;this._alpha=a}
function ea(b,a){this._context=b;this._alpha=a}function U(b){this._context=b}function na(b,a,c){var d=b._x1-b._x0;a-=b._x1;var f=(b._y1-b._y0)/(d||0>a&&-0);b=(c-b._y1)/(a||0>d&&-0);return((0>f?-1:1)+(0>b?-1:1))*Math.min(Math.abs(f),Math.abs(b),.5*Math.abs((f*a+b*d)/(d+a)))||0}function X(b,a){var c=b._x1-b._x0;return c?(3*(b._y1-b._y0)/c-a)/2:a}function ha(b,a,c){var d=b._x0,f=b._x1,e=b._y1,k=(f-d)/3;b._context.bezierCurveTo(d+k,b._y0+k*a,f-k,e-k*c,f,e)}function fa(b){this._context=b}function oa(b){this._context=
new ua(b)}function ua(b){this._context=b}function Z(b){this._context=b}function qa(b){var a,c=b.length-1,d=Array(c),f=Array(c),e=Array(c);d[0]=0;f[0]=2;e[0]=b[0]+2*b[1];for(a=1;a<c-1;++a)d[a]=1,f[a]=4,e[a]=4*b[a]+2*b[a+1];d[c-1]=2;f[c-1]=7;e[c-1]=8*b[c-1]+b[c];for(a=1;a<c;++a){var k=d[a]/f[a-1];f[a]-=k;e[a]-=k*e[a-1]}d[c-1]=e[c-1]/f[c-1];for(a=c-2;0<=a;--a)d[a]=(e[a]-d[a+1])/f[a];f[c-1]=(b[c]+d[c-1])/2;for(a=0;a<c-1;++a)f[a]=2*b[a+1]-d[a+1];return[d,f]}function sa(b,a){this._context=b;this._t=a}function V(b,
a){if(1<(k=b.length))for(var c=1,d,f,e=b[a[0]],k,r=e.length;c<k;++c)for(f=e,e=b[a[c]],d=0;d<r;++d)e[d][1]+=e[d][0]=isNaN(f[d][1])?f[d][0]:f[d][1]}function ia(b){b=b.length;for(var a=Array(b);0<=--b;)a[b]=b;return a}function Ka(b,a){return b[a]}function wa(b){var a=b.map(Aa);return ia(b).sort(function(b,c){return a[b]-a[c]})}function Aa(b){for(var a=-1,c=0,d=b.length,f,e=-Infinity;++a<d;)(f=+b[a][1])>e&&(e=f,c=a);return c}function Ha(b){var a=b.map(Ba);return ia(b).sort(function(b,c){return a[b]-a[c]})}
function Ba(b){for(var a=0,c=-1,d=b.length,f;++c<d;)if(f=+b[c][1])a+=f;return a}var va=Math.abs,pa=Math.atan2,ya=Math.cos,ka=Math.max,xa=Math.min,Ia=Math.sin,aa=Math.sqrt,Ea=Math.PI,Ja=Ea/2,Na=2*Ea;f.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){(this._line||0!==this._line&&1===this._point)&&this._context.closePath();this._line=1-this._line},point:function(b,a){b=+b;a=+a;switch(this._point){case 0:this._point=
1;this._line?this._context.lineTo(b,a):this._context.moveTo(b,a);break;case 1:this._point=2;default:this._context.lineTo(b,a)}}};var Ra=x(c);w.prototype={areaStart:function(){this._curve.areaStart()},areaEnd:function(){this._curve.areaEnd()},lineStart:function(){this._curve.lineStart()},lineEnd:function(){this._curve.lineEnd()},point:function(b,a){this._curve.point(a*Math.sin(b),a*-Math.cos(b))}};var rb=Array.prototype.slice,Eb={draw:function(b,a){a=Math.sqrt(a/Ea);b.moveTo(a,0);b.arc(0,0,a,0,Na)}},
dc={draw:function(b,a){a=Math.sqrt(a/5)/2;b.moveTo(-3*a,-a);b.lineTo(-a,-a);b.lineTo(-a,-3*a);b.lineTo(a,-3*a);b.lineTo(a,-a);b.lineTo(3*a,-a);b.lineTo(3*a,a);b.lineTo(a,a);b.lineTo(a,3*a);b.lineTo(-a,3*a);b.lineTo(-a,a);b.lineTo(-3*a,a);b.closePath()}},pb=Math.sqrt(1/3),Oa=2*pb,Sa={draw:function(b,a){a=Math.sqrt(a/Oa);var c=a*pb;b.moveTo(0,-a);b.lineTo(c,0);b.lineTo(0,a);b.lineTo(-c,0);b.closePath()}},Ya=Math.sin(Ea/10)/Math.sin(7*Ea/10),ja=Math.sin(Na/10)*Ya,qb=-Math.cos(Na/10)*Ya;Ya={draw:function(b,
a){a=Math.sqrt(.8908130915292852*a);var c=ja*a,d=qb*a;b.moveTo(0,-a);b.lineTo(c,d);for(var f=1;5>f;++f){var e=Na*f/5,k=Math.cos(e);e=Math.sin(e);b.lineTo(e*a,-k*a);b.lineTo(k*c-e*d,e*c+k*d)}b.closePath()}};var gb={draw:function(b,a){a=Math.sqrt(a);var c=-a/2;b.rect(c,c,a,a)}},Pb=Math.sqrt(3),Yb={draw:function(b,a){a=-Math.sqrt(a/(3*Pb));b.moveTo(0,2*a);b.lineTo(-Pb*a,-a);b.lineTo(Pb*a,-a);b.closePath()}},db=Math.sqrt(3)/2,Lb=1/Math.sqrt(12),fb=3*(Lb/2+1),nc={draw:function(b,a){var c=Math.sqrt(a/fb);
a=c/2;var d=c*Lb;c=c*Lb+c;var f=-a;b.moveTo(a,d);b.lineTo(a,c);b.lineTo(f,c);b.lineTo(-.5*a-db*d,db*a+-.5*d);b.lineTo(-.5*a-db*c,db*a+-.5*c);b.lineTo(-.5*f-db*c,db*f+-.5*c);b.lineTo(-.5*a+db*d,-.5*d-db*a);b.lineTo(-.5*a+db*c,-.5*c-db*a);b.lineTo(-.5*f+db*c,-.5*c-db*f);b.closePath()}},nb=[Eb,dc,Sa,gb,Ya,Yb,nc];N.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN;this._point=0},lineEnd:function(){switch(this._point){case 3:M(this,
this._x1,this._y1);case 2:this._context.lineTo(this._x1,this._y1)}(this._line||0!==this._line&&1===this._point)&&this._context.closePath();this._line=1-this._line},point:function(b,a){b=+b;a=+a;switch(this._point){case 0:this._point=1;this._line?this._context.lineTo(b,a):this._context.moveTo(b,a);break;case 1:this._point=2;break;case 2:this._point=3,this._context.lineTo((5*this._x0+this._x1)/6,(5*this._y0+this._y1)/6);default:M(this,b,a)}this._x0=this._x1;this._x1=b;this._y0=this._y1;this._y1=a}};
O.prototype={areaStart:L,areaEnd:L,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._y0=this._y1=this._y2=this._y3=this._y4=NaN;this._point=0},lineEnd:function(){switch(this._point){case 1:this._context.moveTo(this._x2,this._y2);this._context.closePath();break;case 2:this._context.moveTo((this._x2+2*this._x3)/3,(this._y2+2*this._y3)/3);this._context.lineTo((this._x3+2*this._x2)/3,(this._y3+2*this._y2)/3);this._context.closePath();break;case 3:this.point(this._x2,this._y2),this.point(this._x3,
this._y3),this.point(this._x4,this._y4)}},point:function(b,a){b=+b;a=+a;switch(this._point){case 0:this._point=1;this._x2=b;this._y2=a;break;case 1:this._point=2;this._x3=b;this._y3=a;break;case 2:this._point=3;this._x4=b;this._y4=a;this._context.moveTo((this._x0+4*this._x1+b)/6,(this._y0+4*this._y1+a)/6);break;default:M(this,b,a)}this._x0=this._x1;this._x1=b;this._y0=this._y1;this._y1=a}};R.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=
this._x1=this._y0=this._y1=NaN;this._point=0},lineEnd:function(){(this._line||0!==this._line&&3===this._point)&&this._context.closePath();this._line=1-this._line},point:function(b,a){b=+b;a=+a;switch(this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3;var c=(this._x0+4*this._x1+b)/6,d=(this._y0+4*this._y1+a)/6;this._line?this._context.lineTo(c,d):this._context.moveTo(c,d);break;case 3:this._point=4;default:M(this,b,a)}this._x0=this._x1;this._x1=b;this._y0=this._y1;
this._y1=a}};T.prototype={lineStart:function(){this._x=[];this._y=[];this._basis.lineStart()},lineEnd:function(){var b=this._x,a=this._y,c=b.length-1;if(0<c)for(var d=b[0],f=a[0],e=b[c]-d,k=a[c]-f,r=-1,g;++r<=c;)g=r/c,this._basis.point(this._beta*b[r]+(1-this._beta)*(d+g*e),this._beta*a[r]+(1-this._beta)*(f+g*k));this._x=this._y=null;this._basis.lineEnd()},point:function(b,a){this._x.push(+b);this._y.push(+a)}};var Ec=function zb(b){function a(a){return 1===b?new N(a):new T(a,b)}a.beta=function(b){return zb(+b)};
return a}(.85);S.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN;this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x2,this._y2);break;case 3:P(this,this._x1,this._y1)}(this._line||0!==this._line&&1===this._point)&&this._context.closePath();this._line=1-this._line},point:function(b,a){b=+b;a=+a;switch(this._point){case 0:this._point=1;this._line?this._context.lineTo(b,
a):this._context.moveTo(b,a);break;case 1:this._point=2;this._x1=b;this._y1=a;break;case 2:this._point=3;default:P(this,b,a)}this._x0=this._x1;this._x1=this._x2;this._x2=b;this._y0=this._y1;this._y1=this._y2;this._y2=a}};var Cb=function mb(b){function a(a){return new S(a,b)}a.tension=function(b){return mb(+b)};return a}(0);ba.prototype={areaStart:L,areaEnd:L,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._x5=this._y0=this._y1=this._y2=this._y3=this._y4=this._y5=NaN;this._point=
0},lineEnd:function(){switch(this._point){case 1:this._context.moveTo(this._x3,this._y3);this._context.closePath();break;case 2:this._context.lineTo(this._x3,this._y3);this._context.closePath();break;case 3:this.point(this._x3,this._y3),this.point(this._x4,this._y4),this.point(this._x5,this._y5)}},point:function(b,a){b=+b;a=+a;switch(this._point){case 0:this._point=1;this._x3=b;this._y3=a;break;case 1:this._point=2;this._context.moveTo(this._x4=b,this._y4=a);break;case 2:this._point=3;this._x5=b;
this._y5=a;break;default:P(this,b,a)}this._x0=this._x1;this._x1=this._x2;this._x2=b;this._y0=this._y1;this._y1=this._y2;this._y2=a}};var La=function Kb(b){function a(a){return new ba(a,b)}a.tension=function(b){return Kb(+b)};return a}(0);da.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN;this._point=0},lineEnd:function(){(this._line||0!==this._line&&3===this._point)&&this._context.closePath();
this._line=1-this._line},point:function(b,a){b=+b;a=+a;switch(this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3;this._line?this._context.lineTo(this._x2,this._y2):this._context.moveTo(this._x2,this._y2);break;case 3:this._point=4;default:P(this,b,a)}this._x0=this._x1;this._x1=this._x2;this._x2=b;this._y0=this._y1;this._y1=this._y2;this._y2=a}};var Pa=function Oc(b){function a(a){return new da(a,b)}a.tension=function(b){return Oc(+b)};return a}(0);Y.prototype=
{areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN;this._l01_a=this._l12_a=this._l23_a=this._l01_2a=this._l12_2a=this._l23_2a=this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x2,this._y2);break;case 3:this.point(this._x2,this._y2)}(this._line||0!==this._line&&1===this._point)&&this._context.closePath();this._line=1-this._line},point:function(b,a){b=+b;a=+a;if(this._point){var c=
this._x2-b,d=this._y2-a;this._l23_a=Math.sqrt(this._l23_2a=Math.pow(c*c+d*d,this._alpha))}switch(this._point){case 0:this._point=1;this._line?this._context.lineTo(b,a):this._context.moveTo(b,a);break;case 1:this._point=2;break;case 2:this._point=3;default:ca(this,b,a)}this._l01_a=this._l12_a;this._l12_a=this._l23_a;this._l01_2a=this._l12_2a;this._l12_2a=this._l23_2a;this._x0=this._x1;this._x1=this._x2;this._x2=b;this._y0=this._y1;this._y1=this._y2;this._y2=a}};var Ca=function vb(b){function a(a){return b?
new Y(a,b):new S(a,0)}a.alpha=function(b){return vb(+b)};return a}(.5);W.prototype={areaStart:L,areaEnd:L,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._x5=this._y0=this._y1=this._y2=this._y3=this._y4=this._y5=NaN;this._l01_a=this._l12_a=this._l23_a=this._l01_2a=this._l12_2a=this._l23_2a=this._point=0},lineEnd:function(){switch(this._point){case 1:this._context.moveTo(this._x3,this._y3);this._context.closePath();break;case 2:this._context.lineTo(this._x3,this._y3);this._context.closePath();
break;case 3:this.point(this._x3,this._y3),this.point(this._x4,this._y4),this.point(this._x5,this._y5)}},point:function(b,a){b=+b;a=+a;if(this._point){var c=this._x2-b,d=this._y2-a;this._l23_a=Math.sqrt(this._l23_2a=Math.pow(c*c+d*d,this._alpha))}switch(this._point){case 0:this._point=1;this._x3=b;this._y3=a;break;case 1:this._point=2;this._context.moveTo(this._x4=b,this._y4=a);break;case 2:this._point=3;this._x5=b;this._y5=a;break;default:ca(this,b,a)}this._l01_a=this._l12_a;this._l12_a=this._l23_a;
this._l01_2a=this._l12_2a;this._l12_2a=this._l23_2a;this._x0=this._x1;this._x1=this._x2;this._x2=b;this._y0=this._y1;this._y1=this._y2;this._y2=a}};var Ta=function xc(b){function a(a){return b?new W(a,b):new ba(a,0)}a.alpha=function(b){return xc(+b)};return a}(.5);ea.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN;this._l01_a=this._l12_a=this._l23_a=this._l01_2a=this._l12_2a=this._l23_2a=
this._point=0},lineEnd:function(){(this._line||0!==this._line&&3===this._point)&&this._context.closePath();this._line=1-this._line},point:function(b,a){b=+b;a=+a;if(this._point){var c=this._x2-b,d=this._y2-a;this._l23_a=Math.sqrt(this._l23_2a=Math.pow(c*c+d*d,this._alpha))}switch(this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3;this._line?this._context.lineTo(this._x2,this._y2):this._context.moveTo(this._x2,this._y2);break;case 3:this._point=4;default:ca(this,
b,a)}this._l01_a=this._l12_a;this._l12_a=this._l23_a;this._l01_2a=this._l12_2a;this._l12_2a=this._l23_2a;this._x0=this._x1;this._x1=this._x2;this._x2=b;this._y0=this._y1;this._y1=this._y2;this._y2=a}};var ec=function Qd(b){function a(a){return b?new ea(a,b):new da(a,0)}a.alpha=function(b){return Qd(+b)};return a}(.5);U.prototype={areaStart:L,areaEnd:L,lineStart:function(){this._point=0},lineEnd:function(){this._point&&this._context.closePath()},point:function(b,a){b=+b;a=+a;this._point?this._context.lineTo(b,
a):(this._point=1,this._context.moveTo(b,a))}};fa.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=this._t0=NaN;this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x1,this._y1);break;case 3:ha(this,this._t0,X(this,this._t0))}(this._line||0!==this._line&&1===this._point)&&this._context.closePath();this._line=1-this._line},point:function(b,a){var c=NaN;b=+b;a=+a;if(b!==this._x1||
a!==this._y1){switch(this._point){case 0:this._point=1;this._line?this._context.lineTo(b,a):this._context.moveTo(b,a);break;case 1:this._point=2;break;case 2:this._point=3;ha(this,X(this,c=na(this,b,a)),c);break;default:ha(this,this._t0,c=na(this,b,a))}this._x0=this._x1;this._x1=b;this._y0=this._y1;this._y1=a;this._t0=c}}};(oa.prototype=Object.create(fa.prototype)).point=function(b,a){fa.prototype.point.call(this,a,b)};ua.prototype={moveTo:function(b,a){this._context.moveTo(a,b)},closePath:function(){this._context.closePath()},
lineTo:function(b,a){this._context.lineTo(a,b)},bezierCurveTo:function(b,a,c,d,f,e){this._context.bezierCurveTo(a,b,d,c,e,f)}};Z.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=[];this._y=[]},lineEnd:function(){var b=this._x,a=this._y,c=b.length;if(c)if(this._line?this._context.lineTo(b[0],a[0]):this._context.moveTo(b[0],a[0]),2===c)this._context.lineTo(b[1],a[1]);else for(var d=qa(b),f=qa(a),e=0,k=1;k<c;++e,++k)this._context.bezierCurveTo(d[0][e],
f[0][e],d[1][e],f[1][e],b[k],a[k]);(this._line||0!==this._line&&1===c)&&this._context.closePath();this._line=1-this._line;this._x=this._y=null},point:function(b,a){this._x.push(+b);this._y.push(+a)}};sa.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=this._y=NaN;this._point=0},lineEnd:function(){0<this._t&&1>this._t&&2===this._point&&this._context.lineTo(this._x,this._y);(this._line||0!==this._line&&1===this._point)&&this._context.closePath();
0<=this._line&&(this._t=1-this._t,this._line=1-this._line)},point:function(b,a){b=+b;a=+a;switch(this._point){case 0:this._point=1;this._line?this._context.lineTo(b,a):this._context.moveTo(b,a);break;case 1:this._point=2;default:if(0>=this._t)this._context.lineTo(this._x,a),this._context.lineTo(b,a);else{var c=this._x*(1-this._t)+b*this._t;this._context.lineTo(c,this._y);this._context.lineTo(c,a)}}this._x=b;this._y=a}};a.arc=function(){function a(){var b,a=+c.apply(this,arguments),l=+f.apply(this,
arguments),h=v.apply(this,arguments)-Ja,q=p.apply(this,arguments)-Ja,n=va(q-h),u=q>h;z||(z=b=g.path());if(l<a){var w=l;l=a;a=w}if(1E-12<l)if(n>Na-1E-12)z.moveTo(l*ya(h),l*Ia(h)),z.arc(0,0,l,h,q,!u),1E-12<a&&(z.moveTo(a*ya(q),a*Ia(q)),z.arc(0,0,a,q,h,u));else{var x=h,y=q;w=h;var B=q,m=n,F=n,J=A.apply(this,arguments)/2,E=1E-12<J&&(r?+r.apply(this,arguments):aa(a*a+l*l)),I=xa(va(l-a)/2,+k.apply(this,arguments)),C=I,D=I;if(1E-12<E){var t=e(E/a*Ia(J));J=e(E/l*Ia(J));1E-12<(m-=2*t)?(t*=u?1:-1,w+=t,B-=t):
(m=0,w=B=(h+q)/2);1E-12<(F-=2*J)?(J*=u?1:-1,x+=J,y-=J):(F=0,x=y=(h+q)/2)}h=l*ya(x);q=l*Ia(x);t=a*ya(B);J=a*Ia(B);if(1E-12<I){var G=l*ya(y),L=l*Ia(y),K=a*ya(w),H=a*Ia(w);if(n=n<Ea){var M=K-h;n=H-q;E=t-G;var O=J-L,N=O*M-E*n;1E-12>N*N?M=void 0:(N=(E*(q-L)-O*(h-G))/N,M=[h+N*M,q+N*n]);n=M}n&&(C=h-M[0],D=q-M[1],n=G-M[0],E=L-M[1],C=(C*n+D*E)/(aa(C*C+D*D)*aa(n*n+E*E)),D=1/Ia((1<C?0:-1>C?Ea:Math.acos(C))/2),M=aa(M[0]*M[0]+M[1]*M[1]),C=xa(I,(a-M)/(D-1)),D=xa(I,(l-M)/(D+1)))}1E-12<F?1E-12<D?(x=d(K,H,h,q,l,D,
u),y=d(G,L,t,J,l,D,u),z.moveTo(x.cx+x.x01,x.cy+x.y01),D<I?z.arc(x.cx,x.cy,D,pa(x.y01,x.x01),pa(y.y01,y.x01),!u):(z.arc(x.cx,x.cy,D,pa(x.y01,x.x01),pa(x.y11,x.x11),!u),z.arc(0,0,l,pa(x.cy+x.y11,x.cx+x.x11),pa(y.cy+y.y11,y.cx+y.x11),!u),z.arc(y.cx,y.cy,D,pa(y.y11,y.x11),pa(y.y01,y.x01),!u))):(z.moveTo(h,q),z.arc(0,0,l,x,y,!u)):z.moveTo(h,q);1E-12<a&&1E-12<m?1E-12<C?(x=d(t,J,G,L,a,-C,u),y=d(h,q,K,H,a,-C,u),z.lineTo(x.cx+x.x01,x.cy+x.y01),C<I?z.arc(x.cx,x.cy,C,pa(x.y01,x.x01),pa(y.y01,y.x01),!u):(z.arc(x.cx,
x.cy,C,pa(x.y01,x.x01),pa(x.y11,x.x11),!u),z.arc(0,0,a,pa(x.cy+x.y11,x.cx+x.x11),pa(y.cy+y.y11,y.cx+y.x11),u),z.arc(y.cx,y.cy,C,pa(y.y11,y.x11),pa(y.y01,y.x01),!u))):z.arc(0,0,a,B,w,u):z.lineTo(t,J)}else z.moveTo(0,0);z.closePath();if(b)return z=null,b+""||null}var c=n,f=b,k=h(0),r=null,v=l,p=u,A=q,z=null;a.centroid=function(){var b=(+c.apply(this,arguments)+ +f.apply(this,arguments))/2,a=(+v.apply(this,arguments)+ +p.apply(this,arguments))/2-Ea/2;return[ya(a)*b,Ia(a)*b]};a.innerRadius=function(b){return arguments.length?
(c="function"===typeof b?b:h(+b),a):c};a.outerRadius=function(b){return arguments.length?(f="function"===typeof b?b:h(+b),a):f};a.cornerRadius=function(b){return arguments.length?(k="function"===typeof b?b:h(+b),a):k};a.padRadius=function(b){return arguments.length?(r=null==b?null:"function"===typeof b?b:h(+b),a):r};a.startAngle=function(b){return arguments.length?(v="function"===typeof b?b:h(+b),a):v};a.endAngle=function(b){return arguments.length?(p="function"===typeof b?b:h(+b),a):p};a.padAngle=
function(b){return arguments.length?(A="function"===typeof b?b:h(+b),a):A};a.context=function(b){return arguments.length?(z=null==b?null:b,a):z};return a};a.area=p;a.line=v;a.pie=function(){function b(b){var r,g=b.length;var l=0;var h=Array(g),q=Array(g),n=+f.apply(this,arguments);var u=Math.min(Na,Math.max(-Na,e.apply(this,arguments)-n));var v=Math.min(Math.abs(u)/g,k.apply(this,arguments)),p=v*(0>u?-1:1),A;for(r=0;r<g;++r)0<(A=q[h[r]=r]=+a(b[r],r,b))&&(l+=A);null!=c?h.sort(function(b,a){return c(q[b],
q[a])}):null!=d&&h.sort(function(a,c){return d(b[a],b[c])});r=0;for(u=l?(u-g*p)/l:0;r<g;++r,n=z){l=h[r];A=q[l];var z=n+(0<A?A*u:0)+p;q[l]={data:b[l],index:r,value:A,startAngle:n,endAngle:z,padAngle:v}}return q}var a=y,c=A,d=null,f=h(0),e=h(Na),k=h(0);b.value=function(c){return arguments.length?(a="function"===typeof c?c:h(+c),b):a};b.sortValues=function(a){return arguments.length?(c=a,d=null,b):c};b.sort=function(a){return arguments.length?(d=a,c=null,b):d};b.startAngle=function(a){return arguments.length?
(f="function"===typeof a?a:h(+a),b):f};b.endAngle=function(a){return arguments.length?(e="function"===typeof a?a:h(+a),b):e};b.padAngle=function(a){return arguments.length?(k="function"===typeof a?a:h(+a),b):k};return b};a.areaRadial=m;a.radialArea=m;a.lineRadial=B;a.radialLine=B;a.pointRadial=D;a.linkHorizontal=function(){return E(K)};a.linkVertical=function(){return E(I)};a.linkRadial=function(){var b=E(J);b.angle=b.x;delete b.x;b.radius=b.y;delete b.y;return b};a.symbol=function(){function b(){var b;
d||(d=b=g.path());a.apply(this,arguments).draw(d,+c.apply(this,arguments));if(b)return d=null,b+""||null}var a=h(Eb),c=h(64),d=null;b.type=function(c){return arguments.length?(a="function"===typeof c?c:h(c),b):a};b.size=function(a){return arguments.length?(c="function"===typeof a?a:h(+a),b):c};b.context=function(a){return arguments.length?(d=null==a?null:a,b):d};return b};a.symbols=nb;a.symbolCircle=Eb;a.symbolCross=dc;a.symbolDiamond=Sa;a.symbolSquare=gb;a.symbolStar=Ya;a.symbolTriangle=Yb;a.symbolWye=
nc;a.curveBasisClosed=function(b){return new O(b)};a.curveBasisOpen=function(b){return new R(b)};a.curveBasis=function(b){return new N(b)};a.curveBundle=Ec;a.curveCardinalClosed=La;a.curveCardinalOpen=Pa;a.curveCardinal=Cb;a.curveCatmullRomClosed=Ta;a.curveCatmullRomOpen=ec;a.curveCatmullRom=Ca;a.curveLinearClosed=function(b){return new U(b)};a.curveLinear=c;a.curveMonotoneX=function(b){return new fa(b)};a.curveMonotoneY=function(b){return new oa(b)};a.curveNatural=function(b){return new Z(b)};a.curveStep=
function(b){return new sa(b,.5)};a.curveStepAfter=function(b){return new sa(b,1)};a.curveStepBefore=function(b){return new sa(b,0)};a.stack=function(){function b(b){var e=a.apply(this,arguments),k,r=b.length,g=e.length,l=Array(g);for(k=0;k<g;++k){for(var h=e[k],q=l[k]=Array(r),n=0,u;n<r;++n)q[n]=u=[0,+f(b[n],h,n,b)],u.data=b[n];q.key=h}k=0;for(e=c(l);k<g;++k)l[e[k]].index=k;d(l,e);return l}var a=h([]),c=ia,d=V,f=Ka;b.keys=function(c){return arguments.length?(a="function"===typeof c?c:h(rb.call(c)),
b):a};b.value=function(a){return arguments.length?(f="function"===typeof a?a:h(+a),b):f};b.order=function(a){return arguments.length?(c=null==a?ia:"function"===typeof a?a:h(rb.call(a)),b):c};b.offset=function(a){return arguments.length?(d=null==a?V:a,b):d};return b};a.stackOffsetExpand=function(b,a){if(0<(d=b.length)){for(var c,d,f=0,e=b[0].length,k;f<e;++f){for(k=c=0;c<d;++c)k+=b[c][f][1]||0;if(k)for(c=0;c<d;++c)b[c][f][1]/=k}V(b,a)}};a.stackOffsetDiverging=function(b,a){if(1<(g=b.length))for(var c,
d=0,f,e,k,r,g,l=b[a[0]].length;d<l;++d)for(c=k=r=0;c<g;++c)0<=(e=(f=b[a[c]][d])[1]-f[0])?(f[0]=k,f[1]=k+=e):0>e?(f[1]=r,f[0]=r+=e):f[0]=k};a.stackOffsetNone=V;a.stackOffsetSilhouette=function(b,a){if(0<(f=b.length)){for(var c=0,d=b[a[0]],f,e=d.length;c<e;++c){for(var k=0,r=0;k<f;++k)r+=b[k][c][1]||0;d[c][1]+=d[c][0]=-r/2}V(b,a)}};a.stackOffsetWiggle=function(b,a){if(0<(k=b.length)&&0<(e=(f=b[a[0]]).length)){for(var c=0,d=1,f,e,k;d<e;++d){for(var r=0,g=0,l=0;r<k;++r){var h=b[a[r]],q=h[d][1]||0;h=(q-
(h[d-1][1]||0))/2;for(var n=0;n<r;++n){var u=b[a[n]];h+=(u[d][1]||0)-(u[d-1][1]||0)}g+=q;l+=h*q}f[d-1][1]+=f[d-1][0]=c;g&&(c-=l/g)}f[d-1][1]+=f[d-1][0]=c;V(b,a)}};a.stackOrderAppearance=wa;a.stackOrderAscending=Ha;a.stackOrderDescending=function(b){return Ha(b).reverse()};a.stackOrderInsideOut=function(b){var a=b.length,c=b.map(Ba),d=wa(b),f=0,e=0,k=[],r=[];for(b=0;b<a;++b){var g=d[b];f<e?(f+=c[g],k.push(g)):(e+=c[g],r.push(g))}return r.reverse().concat(k)};a.stackOrderNone=ia;a.stackOrderReverse=
function(b){return ia(b).reverse()};Object.defineProperty(a,"__esModule",{value:!0})})},{"d3-path":149}],153:[function(a,t,m){(function(a,g){"object"===typeof m&&"undefined"!==typeof t?g(m):g(a.d3=a.d3||{})})(this,function(a){function g(){return p||(w(h),p=y.now()+A)}function h(){p=0}function e(){this._call=this._time=this._next=null}function n(b,a,c){var d=new e;d.restart(b,a,c);return d}function b(){g();++d;for(var b=k,a;b;)0<=(a=p-b._time)&&b._call.call(null,a),b=b._next;--d}function l(){p=(v=
y.now())+A;d=f=0;try{b()}finally{d=0;for(var a,c=k,e,g=Infinity;c;)c._call?(g>c._time&&(g=c._time),a=c,c=c._next):(e=c._next,c._next=null,c=a?a._next=e:k=e);r=a;q(g);p=0}}function u(){var b=y.now(),a=b-v;1E3<a&&(A-=a,v=b)}function q(b){d||(f&&(f=clearTimeout(f)),24<b-p?(Infinity>b&&(f=setTimeout(l,b-y.now()-A)),c&&(c=clearInterval(c))):(c||(v=y.now(),c=setInterval(u,1E3)),d=1,w(l)))}var d=0,f=0,c=0,k,r,v=0,p=0,A=0,y="object"===typeof performance&&performance.now?performance:Date,w="object"===typeof window&&
window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(b){setTimeout(b,17)};e.prototype=n.prototype={constructor:e,restart:function(b,a,c){if("function"!==typeof b)throw new TypeError("callback is not a function");c=(null==c?g():+c)+(null==a?0:+a);this._next||r===this||(r?r._next=this:k=this,r=this);this._call=b;this._time=c;q()},stop:function(){this._call&&(this._call=null,this._time=Infinity,q())}};a.now=g;a.timer=n;a.timerFlush=b;a.timeout=function(b,a,c){var d=new e;a=
null==a?0:+a;d.restart(function(c){d.stop();b(c+a)},a,c);return d};a.interval=function(b,a,c){var d=new e,f=a;if(null==a)return d.restart(b,a,c),d;a=+a;c=null==c?g():+c;d.restart(function E(e){e+=f;d.restart(E,f+=a,c);b(e)},a,c);return d};Object.defineProperty(a,"__esModule",{value:!0})})},{}],154:[function(a,t,m){!function(){function a(b){return b&&(b.ownerDocument&&b.ownerDocument.defaultView||b.document&&b||b.defaultView)}function g(b,a){return b<a?-1:b>a?1:b>=a?0:NaN}function h(b){return null===
b?NaN:+b}function e(b){return!isNaN(b)}function n(b){return{left:function(a,c,d,f){3>arguments.length&&(d=0);4>arguments.length&&(f=a.length);for(;d<f;){var e=d+f>>>1;0>b(a[e],c)?d=e+1:f=e}return d},right:function(a,c,d,f){3>arguments.length&&(d=0);4>arguments.length&&(f=a.length);for(;d<f;){var e=d+f>>>1;0<b(a[e],c)?f=e:d=e+1}return d}}}function b(b){return b.length}function l(b,a){for(var c in a)Object.defineProperty(b.prototype,c,{value:a[c],enumerable:!1})}function u(){this._=Object.create(null)}
function q(b){return"__proto__"===(b+="")||"\x00"===b[0]?"\x00"+b:b}function d(b){return"\x00"===(b+="")[0]?b.slice(1):b}function f(b){return q(b)in this._}function c(b){return(b=q(b))in this._&&delete this._[b]}function k(){var b=[],a;for(a in this._)b.push(d(a));return b}function r(){var b=0,a;for(a in this._)++b;return b}function v(){for(var b in this._)return!1;return!0}function z(){this._=Object.create(null)}function A(b){return b}function y(b,a,c){return function(){var d=c.apply(a,arguments);
return d===a?b:d}}function w(b,a){if(a in b)return a;a=a.charAt(0).toUpperCase()+a.slice(1);for(var c=0,d=Qc.length;c<d;++c){var f=Qc[c]+a;if(f in b)return f}}function x(){}function m(){}function B(b){function a(){for(var a=c,d=-1,f=a.length,e;++d<f;)(e=a[d].on)&&e.apply(this,arguments);return b}var c=[],d=new u;a.on=function(a,f){var e=d.get(a),k;if(2>arguments.length)return e&&e.on;e&&(e.on=null,c=c.slice(0,k=c.indexOf(e)).concat(c.slice(k+1)),d.remove(a));f&&c.push(d.set(a,{on:f}));return b};return a}
function C(){Q.event.preventDefault()}function D(){for(var b=Q.event,a;a=b.sourceEvent;)b=a;return b}function G(b){for(var a=new m,c=0,d=arguments.length;++c<d;)a[arguments[c]]=B(a);a.of=function(c,d){return function(f){try{var e=f.sourceEvent=Q.event;f.target=b;Q.event=f;a[f.type].apply(c,d)}finally{Q.event=e}}};return a}function H(b){Qe(b,kb);return b}function E(b){return"function"===typeof b?b:function(){return Bf(b,this)}}function K(b){return"function"===typeof b?b:function(){return ng(b,this)}}
function I(b,a){function c(){this.removeAttribute(b)}function d(){this.removeAttributeNS(b.space,b.local)}function f(){this.setAttribute(b,a)}function e(){this.setAttributeNS(b.space,b.local,a)}function k(){var c=a.apply(this,arguments);null==c?this.removeAttribute(b):this.setAttribute(b,c)}function r(){var c=a.apply(this,arguments);null==c?this.removeAttributeNS(b.space,b.local):this.setAttributeNS(b.space,b.local,c)}b=Q.ns.qualify(b);return null==a?b.local?d:c:"function"===typeof a?b.local?r:k:
b.local?e:f}function J(b){return new RegExp("(?:^|\\s+)"+Q.requote(b)+"(?:\\s+|$)","g")}function L(b,a){function c(){for(var c=-1;++c<f;)b[c](this,a)}function d(){for(var c=-1,d=a.apply(this,arguments);++c<f;)b[c](this,d)}b=(b+"").trim().split(/^|\s+/).map(M);var f=b.length;return"function"===typeof a?d:c}function M(b){var a=J(b);return function(c,d){if(f=c.classList)return d?f.add(b):f.remove(b);var f=c.getAttribute("class")||"";d?(a.lastIndex=0,a.test(f)||c.setAttribute("class",(f+" "+b).trim().replace(/\s+/g,
" "))):c.setAttribute("class",f.replace(a," ").trim().replace(/\s+/g," "))}}function N(b,a,c){function d(){this.style.removeProperty(b)}function f(){this.style.setProperty(b,a,c)}function e(){var d=a.apply(this,arguments);null==d?this.style.removeProperty(b):this.style.setProperty(b,d,c)}return null==a?d:"function"===typeof a?e:f}function O(b,a){function c(){delete this[b]}function d(){this[b]=a}function f(){var c=a.apply(this,arguments);null==c?delete this[b]:this[b]=c}return null==a?c:"function"===
typeof a?f:d}function R(b){function a(){var a=this.ownerDocument,c=this.namespaceURI;return"http://www.w3.org/1999/xhtml"===c&&"http://www.w3.org/1999/xhtml"===a.documentElement.namespaceURI?a.createElement(b):a.createElementNS(c,b)}function c(){return this.ownerDocument.createElementNS(b.space,b.local)}return"function"===typeof b?b:(b=Q.ns.qualify(b)).local?c:a}function T(){var b=this.parentNode;b&&b.removeChild(this)}function P(b){return function(){return te(this,b)}}function S(b){arguments.length||
(b=g);return function(a,c){return a&&c?b(a.__data__,c.__data__):!a-!c}}function ba(b,a){for(var c=0,d=b.length;c<d;c++)for(var f=b[c],e=0,k=f.length,r;e<k;e++)(r=f[e])&&a(r,e,c);return b}function da(b){Qe(b,vd);return b}function ca(b){var a,c;return function(d,f,e){d=b[e].update;var k=d.length;e!=c&&(c=e,a=0);for(f>=a&&(a=f+1);!(f=d[a])&&++a<k;);return f}}function Y(b,a,c){function d(){var a=this[k];a&&(this.removeEventListener(b,a,a.$),delete this[k])}function f(){var f=g(a,fc(arguments));d.call(this);
this.addEventListener(b,this[k]=f,f.$=c);f._=a}function e(){var a=new RegExp("^__on([^.]+)"+Q.requote(b)+"$"),c,d;for(d in this)if(c=d.match(a)){var f=this[d];this.removeEventListener(c[1],f,f.$);delete this[d]}}var k="__on"+b,r=b.indexOf("."),g=W;0<r&&(b=b.slice(0,r));var l=og.get(b);l&&(b=l,g=ea);return r?a?f:d:a?x:e}function W(b,a){return function(c){var d=Q.event;Q.event=c;a[0]=this.__data__;try{b.apply(this,a)}finally{Q.event=d}}}function ea(b,a){var c=W(b,a);return function(b){var a=b.relatedTarget;
a&&(a===this||a.compareDocumentPosition(this)&8)||c.call(this,b)}}function U(b){var c=".dragsuppress-"+ ++Ng,d="click"+c,f=Q.select(a(b)).on("touchmove"+c,C).on("dragstart"+c,C).on("selectstart"+c,C);null==Rc&&(Rc="onselectstart"in b?!1:w(b.style,"userSelect"));if(Rc){var e=(b&&(b.ownerDocument||b.document||b).documentElement).style,k=e[Rc];e[Rc]="none"}return function(b){f.on(c,null);Rc&&(e[Rc]=k);if(b){var a=function(){f.on(d,null)};f.on(d,function(){C();a()},!0);setTimeout(a,0)}}}function na(b,
c){c.changedTouches&&(c=c.changedTouches[0]);var d=b.ownerSVGElement||b;if(d.createSVGPoint){var f=d.createSVGPoint();if(0>pg&&(d=a(b),d.scrollX||d.scrollY)){d=Q.select("body").append("svg").style({position:"absolute",top:0,left:0,margin:0,padding:0,border:"none"},"important");var e=d[0][0].getScreenCTM();pg=!(e.f||e.e);d.remove()}pg?(f.x=c.pageX,f.y=c.pageY):(f.x=c.clientX,f.y=c.clientY);f=f.matrixTransform(b.getScreenCTM().inverse());return[f.x,f.y]}f=b.getBoundingClientRect();return[c.clientX-
f.left-b.clientLeft,c.clientY-f.top-b.clientTop]}function X(){return Q.event.changedTouches[0].identifier}function ha(b,a,c){return(a[0]-b[0])*(c[1]-b[1])-(a[1]-b[1])*(c[0]-b[0])}function fa(b){return 1<b?0:-1>b?Ua:Math.acos(b)}function oa(b){return 1<b?ab:-1>b?-ab:Math.asin(b)}function ua(b){return((b=Math.exp(b))+1/b)/2}function Z(b){return(b=Math.sin(b/2))*b}function qa(){}function sa(b,a,c){return this instanceof sa?void(this.h=+b,this.s=+a,this.l=+c):2>arguments.length?b instanceof sa?new sa(b.h,
b.s,b.l):Ia(""+b,aa,sa):new sa(b,a,c)}function V(b,a,c){function d(b){360<b?b-=360:0>b&&(b+=360);return 60>b?e+(f-e)*b/60:180>b?f:240>b?e+(f-e)*(240-b)/60:e}b=isNaN(b)?0:0>(b%=360)?b+360:b;a=isNaN(a)?0:0>a?0:1<a?1:a;c=0>c?0:1<c?1:c;var f=.5>=c?c*(1+a):c+a-c*a;var e=2*c-f;return new ya(Math.round(255*d(b+120)),Math.round(255*d(b)),Math.round(255*d(b-120)))}function ia(b,a,c){return this instanceof ia?void(this.h=+b,this.c=+a,this.l=+c):2>arguments.length?b instanceof ia?new ia(b.h,b.c,b.l):b instanceof
wa?Ha(b.l,b.a,b.b):Ha((b=Ea((b=Q.rgb(b)).r,b.g,b.b)).l,b.a,b.b):new ia(b,a,c)}function Ka(b,a,c){isNaN(b)&&(b=0);isNaN(a)&&(a=0);return new wa(c,Math.cos(b*=Wa)*a,Math.sin(b)*a)}function wa(b,a,c){return this instanceof wa?void(this.l=+b,this.a=+a,this.b=+c):2>arguments.length?b instanceof wa?new wa(b.l,b.a,b.b):b instanceof ia?Ka(b.h,b.c,b.l):Ea((b=ya(b)).r,b.g,b.b):new wa(b,a,c)}function Aa(b,a,c){b=(b+16)/116;c=b-c/200;a=Ba(b+a/500)*Re;b=Ba(b)*qg;c=Ba(c)*rg;return new ya(pa(3.2404542*a-1.5371385*
b-.4985314*c),pa(-.969266*a+1.8760108*b+.041556*c),pa(.0556434*a-.2040259*b+1.0572252*c))}function Ha(b,a,c){return 0<b?new ia(Math.atan2(c,a)*sb,Math.sqrt(a*a+c*c),b):new ia(NaN,NaN,b)}function Ba(b){return.206893034<b?b*b*b:(b-4/29)/7.787037}function va(b){return.008856<b?Math.pow(b,1/3):7.787037*b+4/29}function pa(b){return Math.round(255*(.00304>=b?12.92*b:1.055*Math.pow(b,1/2.4)-.055))}function ya(b,a,c){return this instanceof ya?void(this.r=~~b,this.g=~~a,this.b=~~c):2>arguments.length?b instanceof
ya?new ya(b.r,b.g,b.b):Ia(""+b,ya,V):new ya(b,a,c)}function ka(b){return new ya(b>>16,b>>8&255,b&255)+""}function xa(b){return 16>b?"0"+Math.max(0,b).toString(16):Math.min(255,b).toString(16)}function Ia(b,a,c){var d=0,f=0,e=0,k;if(k=/([a-z]+)\((.*)\)/.exec(b=b.toLowerCase())){var r=k[2].split(",");switch(k[1]){case "hsl":return c(parseFloat(r[0]),parseFloat(r[1])/100,parseFloat(r[2])/100);case "rgb":return a(Na(r[0]),Na(r[1]),Na(r[2]))}}if(c=Cf.get(b))return a(c.r,c.g,c.b);null==b||"#"!==b.charAt(0)||
isNaN(c=parseInt(b.slice(1),16))||(4===b.length?(d=(c&3840)>>4,d|=d>>4,f=c&240,f|=f>>4,e=c&15,e|=e<<4):7===b.length&&(d=(c&16711680)>>16,f=(c&65280)>>8,e=c&255));return a(d,f,e)}function aa(b,a,c){var d=Math.min(b/=255,a/=255,c/=255),f=Math.max(b,a,c),e=f-d,k=(f+d)/2;e?(d=.5>k?e/(f+d):e/(2-f-d),b=60*(b==f?(a-c)/e+(a<c?6:0):a==f?(c-b)/e+2:(b-a)/e+4)):(b=NaN,d=0<k&&1>k?0:b);return new sa(b,d,k)}function Ea(b,a,c){b=Ja(b);a=Ja(a);c=Ja(c);var d=va((.4124564*b+.3575761*a+.1804375*c)/Re),f=va((.2126729*
b+.7151522*a+.072175*c)/qg);b=va((.0193339*b+.119192*a+.9503041*c)/rg);return wa(116*f-16,500*(d-f),200*(f-b))}function Ja(b){return.04045>=(b/=255)?b/12.92:Math.pow((b+.055)/1.055,2.4)}function Na(b){var a=parseFloat(b);return"%"===b.charAt(b.length-1)?Math.round(2.55*a):a}function Ra(b){return"function"===typeof b?b:function(){return b}}function rb(b){return function(a,c,d){2===arguments.length&&"function"===typeof c&&(d=c,c=null);return Eb(a,c,b,d)}}function Eb(b,a,c,d){function f(){var b=g.status,
a;if(a=!b)a=(a=g.responseType)&&"text"!==a?g.response:g.responseText;if(a||200<=b&&300>b||304===b){try{var d=c.call(e,g)}catch(di){k.error.call(e,di);return}k.load.call(e,d)}else k.error.call(e,g)}var e={},k=Q.dispatch("beforesend","progress","load","error"),r={},g=new XMLHttpRequest,l=null;!this.XDomainRequest||"withCredentials"in g||!/^(http(s)?:)?\/\//.test(b)||(g=new XDomainRequest);"onload"in g?g.onload=g.onerror=f:g.onreadystatechange=function(){3<g.readyState&&f()};g.onprogress=function(b){var a=
Q.event;Q.event=b;try{k.progress.call(e,g)}finally{Q.event=a}};e.header=function(b,a){b=(b+"").toLowerCase();if(2>arguments.length)return r[b];null==a?delete r[b]:r[b]=a+"";return e};e.mimeType=function(b){if(!arguments.length)return a;a=null==b?null:b+"";return e};e.responseType=function(b){if(!arguments.length)return l;l=b;return e};e.response=function(b){c=b;return e};["get","post"].forEach(function(b){e[b]=function(){return e.send.apply(e,[b].concat(fc(arguments)))}});e.send=function(c,d,f){2===
arguments.length&&"function"===typeof d&&(f=d,d=null);g.open(c,b,!0);null==a||"accept"in r||(r.accept=a+",*/*");if(g.setRequestHeader)for(var h in r)g.setRequestHeader(h,r[h]);null!=a&&g.overrideMimeType&&g.overrideMimeType(a);null!=l&&(g.responseType=l);if(null!=f)e.on("error",f).on("load",function(b){f(null,b)});k.beforesend.call(e,g);g.send(null==d?null:d);return e};e.abort=function(){g.abort();return e};Q.rebind(e,k,"on");return null==d?e:e.get(dc(d))}function dc(b){return 1===b.length?function(a,
c){b(null==a?c:null)}:b}function pb(b,a,c){var d=arguments.length;2>d&&(a=0);3>d&&(c=Date.now());d={c:b,t:c+a,n:null};Se?Se.n=d:Td=d;Se=d;wb||(wd=clearTimeout(wd),wb=1,xd(Oa));return d}function Oa(){var b=Sa();b=Ya()-b;24<b?(isFinite(b)&&(clearTimeout(wd),wd=setTimeout(Oa,b)),wb=0):(wb=1,xd(Oa))}function Sa(){for(var b=Date.now(),a=Td;a;)b>=a.t&&a.c(b-a.t)&&(a.c=null),a=a.n;return b}function Ya(){for(var b,a=Td,c=Infinity;a;)a.c?(a.t<c&&(c=a.t),a=(b=a).n):a=b?b.n=a.n:Td=a.n;Se=b;return c}function ja(b,
a){return a-(b?Math.ceil(Math.log(b)/Math.LN10):1)}function qb(b){var a=b.decimal,c=b.thousands,d=b.grouping,f=b.currency,e=d&&c?function(b,a){for(var f=b.length,e=[],k=0,r=d[0],g=0;0<f&&0<r;){g+r+1>a&&(r=Math.max(1,a-g));e.push(b.substring(f-=r,f+r));if((g+=r+1)>a)break;r=d[k=(k+1)%d.length]}return e.reverse().join(c)}:A;return function(b){b=Te.exec(b);var c=b[1]||" ",d=b[2]||"\x3e",k=b[3]||"-",r=b[4]||"",g=b[5],l=+b[6],h=b[7],q=b[8],n=b[9],u=1,v="",p="",A=!1,z=!0;q&&(q=+q.substring(1));if(g||"0"===
c&&"\x3d"===d)g=c="0",d="\x3d";switch(n){case "n":h=!0;n="g";break;case "%":u=100;p="%";n="f";break;case "p":u=100;p="%";n="r";break;case "b":case "o":case "x":case "X":"#"===r&&(v="0"+n.toLowerCase());case "c":z=!1;case "d":A=!0;q=0;break;case "s":u=-1,n="r"}"$"===r&&(v=f[0],p=f[1]);"r"!=n||q||(n="g");if(null!=q)if("g"==n)q=Math.max(1,Math.min(21,q));else if("e"==n||"f"==n)q=Math.max(0,Math.min(20,q));n=sg.get(n)||gb;var w=g&&h;return function(b){var f=p;if(A&&b%1)return"";var r=0>b||0===b&&0>1/
b?(b=-b,"-"):"-"===k?"":k;0>u?(f=Q.formatPrefix(b,q),b=f.scale(b),f=f.symbol+p):b*=u;b=n(b,q);var x=b.lastIndexOf(".");if(0>x)if(x=z?b.lastIndexOf("e"):-1,0>x){var y=b;b=""}else y=b.substring(0,x),b=b.substring(x);else y=b.substring(0,x),b=a+b.substring(x+1);!g&&h&&(y=e(y,Infinity));x=v.length+y.length+b.length+(w?0:r.length);var ta=x<l?Array(x=l-x+1).join(c):"";w&&(y=e(ta+y,ta.length?l-b.length:Infinity));r+=v;b=y+b;return("\x3c"===d?r+b+ta:"\x3e"===d?ta+r+b:"^"===d?ta.substring(0,x>>=1)+r+b+ta.substring(x):
r+(w?b:ta+b))+f}}}function gb(b){return b+""}function Pb(){this._=new Date(1<arguments.length?Date.UTC.apply(this,arguments):arguments[0])}function Yb(b,a,c){function d(a){var c=b(a),d=e(c,1);return a-c<d-a?c:d}function f(c){a(c=b(new Qb(c-1)),1);return c}function e(b,c){a(b=new Qb(+b),c);return b}function k(b,d,e){b=f(b);var k=[];if(1<e)for(;b<d;)c(b)%e||k.push(new Date(+b)),a(b,1);else for(;b<d;)k.push(new Date(+b)),a(b,1);return k}b.floor=b;b.round=d;b.ceil=f;b.offset=e;b.range=k;var r=b.utc=db(b);
r.floor=r;r.round=db(d);r.ceil=db(f);r.offset=db(e);r.range=function(b,a,c){try{Qb=Pb;var d=new Pb;d._=b;return k(d,a,c)}finally{Qb=Date}};return b}function db(b){return function(a,c){try{Qb=Pb;var d=new Pb;d._=a;return b(d,c)._}finally{Qb=Date}}}function Lb(b){function a(b){function a(a){for(var c=[],f=-1,e=0,k,r;++f<d;)if(37===b.charCodeAt(f)){c.push(b.slice(e,f));null!=(k=Pg[e=b.charAt(++f)])&&(e=b.charAt(++f));if(r=y[e])e=r(a,null==k?"e"===e?" ":"0":k);c.push(e);e=f+1}c.push(b.slice(e,f));return c.join("")}
var d=b.length;a.parse=function(a){var d={y:1900,m:0,d:1,H:0,M:0,S:0,L:0,Z:null};if(c(d,b,a,0)!=a.length)return null;"p"in d&&(d.H=d.H%12+12*d.p);a=null!=d.Z&&Qb!==Pb;var f=new (a?Pb:Qb);"j"in d?f.setFullYear(d.y,0,d.j):"W"in d||"U"in d?("w"in d||(d.w="W"in d?1:0),f.setFullYear(d.y,0,1),f.setFullYear(d.y,0,"W"in d?(d.w+6)%7+7*d.W-(f.getDay()+5)%7:d.w+7*d.U-(f.getDay()+6)%7)):f.setFullYear(d.y,d.m,d.d);f.setHours(d.H+(d.Z/100|0),d.M+d.Z%100,d.S,d.L);return a?f._:f};a.toString=function(){return b};
return a}function c(b,a,c,d){for(var f,e=0,k=a.length,r=c.length;e<k;){if(d>=r)return-1;f=a.charCodeAt(e++);if(37===f){if(f=a.charAt(e++),f=ta[f in Pg?a.charAt(e++):f],!f||0>(d=f(b,c,d)))return-1}else if(f!=c.charCodeAt(d++))return-1}return d}var d=b.dateTime,f=b.date,e=b.time,k=b.periods,r=b.days,g=b.shortDays,l=b.months,h=b.shortMonths;a.utc=function(b){function c(b){try{Qb=Pb;var a=new Qb;a._=b;return d(a)}finally{Qb=Date}}var d=a(b);c.parse=function(b){try{Qb=Pb;var a=d.parse(b);return a&&a._}finally{Qb=
Date}};c.toString=d.toString;return c};a.multi=a.utc.multi=Qd;var q=Q.map(),n=nc(r),u=nb(r),v=nc(g),p=nb(g),A=nc(l),z=nb(l),w=nc(h),x=nb(h);k.forEach(function(b,a){q.set(b.toLowerCase(),a)});var y={a:function(b){return g[b.getDay()]},A:function(b){return r[b.getDay()]},b:function(b){return h[b.getMonth()]},B:function(b){return l[b.getMonth()]},c:a(d),d:function(b,a){return fb(b.getDate(),a,2)},e:function(b,a){return fb(b.getDate(),a,2)},H:function(b,a){return fb(b.getHours(),a,2)},I:function(b,a){return fb(b.getHours()%
12||12,a,2)},j:function(b,a){return fb(1+Da.dayOfYear(b),a,3)},L:function(b,a){return fb(b.getMilliseconds(),a,3)},m:function(b,a){return fb(b.getMonth()+1,a,2)},M:function(b,a){return fb(b.getMinutes(),a,2)},p:function(b){return k[+(12<=b.getHours())]},S:function(b,a){return fb(b.getSeconds(),a,2)},U:function(b,a){return fb(Da.sundayOfYear(b),a,2)},w:function(b){return b.getDay()},W:function(b,a){return fb(Da.mondayOfYear(b),a,2)},x:a(f),X:a(e),y:function(b,a){return fb(b.getFullYear()%100,a,2)},
Y:function(b,a){return fb(b.getFullYear()%1E4,a,4)},Z:vb,"%":function(){return"%"}},ta={a:function(b,a,c){v.lastIndex=0;return(a=v.exec(a.slice(c)))?(b.w=p.get(a[0].toLowerCase()),c+a[0].length):-1},A:function(b,a,c){n.lastIndex=0;return(a=n.exec(a.slice(c)))?(b.w=u.get(a[0].toLowerCase()),c+a[0].length):-1},b:function(b,a,c){w.lastIndex=0;return(a=w.exec(a.slice(c)))?(b.m=x.get(a[0].toLowerCase()),c+a[0].length):-1},B:function(b,a,c){A.lastIndex=0;return(a=A.exec(a.slice(c)))?(b.m=z.get(a[0].toLowerCase()),
c+a[0].length):-1},c:function(b,a,d){return c(b,y.c.toString(),a,d)},d:qd,e:qd,H:zb,I:zb,j:wc,L:Oc,m:ec,M:mb,p:function(b,a,c){a=q.get(a.slice(c,c+=2).toLowerCase());return null==a?-1:(b.p=a,c)},S:Kb,U:Cb,w:Ec,W:La,x:function(b,a,d){return c(b,y.x.toString(),a,d)},X:function(b,a,d){return c(b,y.X.toString(),a,d)},y:Ca,Y:Pa,Z:Ta,"%":xc};return a}function fb(b,a,c){var d=0>b?"-":"";b=(d?-b:b)+"";var f=b.length;return d+(f<c?Array(c-f+1).join(a)+b:b)}function nc(b){return new RegExp("^(?:"+b.map(Q.requote).join("|")+
")","i")}function nb(b){for(var a=new u,c=-1,d=b.length;++c<d;)a.set(b[c].toLowerCase(),c);return a}function Ec(b,a,c){ta.lastIndex=0;return(a=ta.exec(a.slice(c,c+1)))?(b.w=+a[0],c+a[0].length):-1}function Cb(b,a,c){ta.lastIndex=0;return(a=ta.exec(a.slice(c)))?(b.U=+a[0],c+a[0].length):-1}function La(b,a,c){ta.lastIndex=0;return(a=ta.exec(a.slice(c)))?(b.W=+a[0],c+a[0].length):-1}function Pa(b,a,c){ta.lastIndex=0;return(a=ta.exec(a.slice(c,c+4)))?(b.y=+a[0],c+a[0].length):-1}function Ca(b,a,c){ta.lastIndex=
0;if(a=ta.exec(a.slice(c,c+2))){var d=+a[0];b=(b.y=d+(68<d?1900:2E3),c+a[0].length)}else b=-1;return b}function Ta(b,a,c){return/^[+-]\d{4}$/.test(a=a.slice(c,c+5))?(b.Z=-a,c+5):-1}function ec(b,a,c){ta.lastIndex=0;return(a=ta.exec(a.slice(c,c+2)))?(b.m=a[0]-1,c+a[0].length):-1}function qd(b,a,c){ta.lastIndex=0;return(a=ta.exec(a.slice(c,c+2)))?(b.d=+a[0],c+a[0].length):-1}function wc(b,a,c){ta.lastIndex=0;return(a=ta.exec(a.slice(c,c+3)))?(b.j=+a[0],c+a[0].length):-1}function zb(b,a,c){ta.lastIndex=
0;return(a=ta.exec(a.slice(c,c+2)))?(b.H=+a[0],c+a[0].length):-1}function mb(b,a,c){ta.lastIndex=0;return(a=ta.exec(a.slice(c,c+2)))?(b.M=+a[0],c+a[0].length):-1}function Kb(b,a,c){ta.lastIndex=0;return(a=ta.exec(a.slice(c,c+2)))?(b.S=+a[0],c+a[0].length):-1}function Oc(b,a,c){ta.lastIndex=0;return(a=ta.exec(a.slice(c,c+3)))?(b.L=+a[0],c+a[0].length):-1}function vb(b){var a=b.getTimezoneOffset();b=0<a?"-":"+";var c=Va(a)/60|0;a=Va(a)%60;return b+fb(c,"0",2)+fb(a,"0",2)}function xc(b,a,c){Hh.lastIndex=
0;return(b=Hh.exec(a.slice(c,c+1)))?c+b[0].length:-1}function Qd(b){for(var a=b.length,c=-1;++c<a;)b[c][0]=this(b[c][0]);return function(a){for(var c=0,d=b[c];!d[1](a);)d=b[++c];return d[0](a)}}function Bb(){}function yc(b,a,c){var d=c.s=b+a,f=d-b;c.t=b-(d-f)+(a-f)}function Cc(b,a){if(b&&be.hasOwnProperty(b.type))be[b.type](b,a)}function Zd(b,a,c){var d=-1;c=b.length-c;for(a.lineStart();++d<c;){var f=b[d];a.point(f[0],f[1],f[2])}a.lineEnd()}function Wc(b,a){var c=-1,d=b.length;for(a.polygonStart();++c<
d;)Zd(b[c],a,1);a.polygonEnd()}function $d(){function b(b,a){b*=Wa;a=a*Wa/2+Ua/4;var c=b-d,k=0<=c?1:-1;c*=k;var r=Math.cos(a);a=Math.sin(a);var g=e*a;yd.add(Math.atan2(g*k*Math.sin(c),f*r+g*Math.cos(c)));d=b;f=r;e=a}var a,c,d,f,e;Gc.point=function(k,r){Gc.point=b;d=(a=k)*Wa;f=Math.cos(r=(c=r)*Wa/2+Ua/4);e=Math.sin(r)};Gc.lineEnd=function(){b(a,c)}}function tc(b){var a=b[0];b=b[1];var c=Math.cos(b);return[c*Math.cos(a),c*Math.sin(a),Math.sin(b)]}function Dc(b,a){return b[0]*a[0]+b[1]*a[1]+b[2]*a[2]}
function ma(b,a){return[b[1]*a[2]-b[2]*a[1],b[2]*a[0]-b[0]*a[2],b[0]*a[1]-b[1]*a[0]]}function Xc(b,a){b[0]+=a[0];b[1]+=a[1];b[2]+=a[2]}function rd(b,a){return[b[0]*a,b[1]*a,b[2]*a]}function Yc(b){var a=Math.sqrt(b[0]*b[0]+b[1]*b[1]+b[2]*b[2]);b[0]/=a;b[1]/=a;b[2]/=a}function sd(b){return[Math.atan2(b[1],b[0]),oa(b[2])]}function Zc(b,a){return 1E-6>Va(b[0]-a[0])&&1E-6>Va(b[1]-a[1])}function Rd(b,a){b*=Wa;var c=Math.cos(a*=Wa);la(c*Math.cos(b),c*Math.sin(b),Math.sin(a))}function la(b,a,c){++tg;ce+=
(b-ce)/tg;de+=(a-de)/tg;ee+=(c-ee)/tg}function ae(){function b(b,f){b*=Wa;var e=Math.cos(f*=Wa),k=e*Math.cos(b);b=e*Math.sin(b);f=Math.sin(f);var r=Math.atan2(Math.sqrt((r=c*f-d*b)*r+(r=d*k-a*f)*r+(r=a*b-c*k)*r),a*k+c*b+d*f);Qg+=r;ue+=r*(a+(a=k));ve+=r*(c+(c=b));Ud+=r*(d+(d=f));la(a,c,d)}var a,c,d;zd.point=function(f,e){f*=Wa;var k=Math.cos(e*=Wa);a=k*Math.cos(f);c=k*Math.sin(f);d=Math.sin(e);zd.point=b;la(a,c,d)}}function $c(){zd.point=Rd}function td(){function b(b,a){b*=Wa;var c=Math.cos(a*=Wa),
k=c*Math.cos(b);b=c*Math.sin(b);a=Math.sin(a);c=f*a-e*b;var r=e*k-d*a,g=d*b-f*k,l=Math.sqrt(c*c+r*r+g*g),h=d*k+f*b+e*a,q=l&&-fa(h)/l;l=Math.atan2(l,h);Df+=q*c;Ef+=q*r;we+=q*g;Qg+=l;ue+=l*(d+(d=k));ve+=l*(f+(f=b));Ud+=l*(e+(e=a));la(d,f,e)}var a,c,d,f,e;zd.point=function(k,r){a=k;c=r;zd.point=b;k*=Wa;var g=Math.cos(r*=Wa);d=g*Math.cos(k);f=g*Math.sin(k);e=Math.sin(r);la(d,f,e)};zd.lineEnd=function(){b(a,c);zd.lineEnd=$c;zd.point=Rd}}function pe(b,a){function c(c,d){return c=b(c,d),a(c[0],c[1])}b.invert&&
a.invert&&(c.invert=function(c,d){return c=a.invert(c,d),c&&b.invert(c[0],c[1])});return c}function Qa(){return!0}function zf(b,a,c,d,f){var e=[],k=[];b.forEach(function(b){if(!(0>=(a=b.length-1))){var a,c=b[0],d=b[a];if(Zc(c,d)){f.lineStart();for(d=0;d<a;++d)f.point((c=b[d])[0],c[1]);f.lineEnd()}else a=new zc(c,b,null,!0),c=new zc(c,null,a,!1),a.o=c,e.push(a),k.push(c),a=new zc(d,b,null,!1),c=new zc(d,null,a,!0),a.o=c,e.push(a),k.push(c)}});k.sort(a);qe(e);qe(k);if(e.length){b=0;a=c;for(c=k.length;b<
c;++b)k[b].e=a=!a;a=e[0];for(var r,g;;){for(var l=a,h=!0;l.v;)if((l=l.n)===a)return;r=l.z;f.lineStart();do{l.v=l.o.v=!0;if(l.e){if(h)for(b=0,c=r.length;b<c;++b)f.point((g=r[b])[0],g[1]);else d(l.x,l.n.x,1,f);l=l.n}else{if(h)for(r=l.p.z,b=r.length-1;0<=b;--b)f.point((g=r[b])[0],g[1]);else d(l.x,l.p.x,-1,f);l=l.p}l=l.o;r=l.z;h=!h}while(!l.v);f.lineEnd()}}}function qe(b){if(a=b.length){for(var a,c=0,d=b[0],f;++c<a;)d.n=f=b[c],f.p=d,d=f;d.n=f=b[0];f.p=d}}function zc(b,a,c,d){this.x=b;this.z=a;this.o=
c;this.e=d;this.v=!1;this.n=this.p=null}function re(b,a,c,d){return function(f,e){function k(a,c){var d=f(a,c);b(a=d[0],c=d[1])&&e.point(a,c)}function r(b,a){b=f(b,a);u.point(b[0],b[1])}function g(){p.point=r;u.lineStart()}function l(){p.point=k;u.lineEnd()}function h(b,a){ta.push([b,a]);b=f(b,a);w.point(b[0],b[1])}function q(){w.lineStart();ta=[]}function n(){h(ta[0][0],ta[0][1]);w.lineEnd();var b=w.clean(),a=z.buffer(),c=a.length;ta.pop();y.push(ta);ta=null;if(c)if(b&1){b=a[0];c=b.length-1;a=-1;
var d;if(0<c){x||(e.polygonStart(),x=!0);for(e.lineStart();++a<c;)e.point((d=b[a])[0],d[1]);e.lineEnd()}}else 1<c&&b&2&&a.push(a.pop().concat(a.shift())),A.push(a.filter(Ib))}var u=a(e),v=f.invert(d[0],d[1]),p={point:k,lineStart:g,lineEnd:l,polygonStart:function(){p.point=h;p.lineStart=q;p.lineEnd=n;A=[];y=[]},polygonEnd:function(){p.point=k;p.lineStart=g;p.lineEnd=l;A=Q.merge(A);var b=v;var a=y;var d=b[0],f=b[1],r=[Math.sin(d),-Math.cos(d),0],h=0,q=0;yd.reset();for(var n=0,u=a.length;n<u;++n){var z=
a[n],w=z.length;if(w){var ta=z[0],B=ta[0];b=ta[1]/2+Ua/4;for(var m=Math.sin(b),J=Math.cos(b),F=1;;){F===w&&(F=0);b=z[F];var E=b[0],I=b[1]/2+Ua/4,C=Math.sin(I);I=Math.cos(I);var D=E-B,t=0<=D?1:-1,G=t*D,L=G>Ua;m*=C;yd.add(Math.atan2(m*t*Math.sin(G),J*I+m*Math.cos(G)));h+=L?D+t*Zb:D;L^B>=d^E>=d&&(ta=ma(tc(ta),tc(b)),Yc(ta),B=ma(r,ta),Yc(B),B=(L^0<=D?-1:1)*oa(B[2]),f>B||f===B&&(ta[0]||ta[1]))&&(q+=L^0<=D?1:-1);if(!F++)break;B=E;m=C;J=I;ta=b}}}a=(-1E-6>h||1E-6>h&&-1E-6>yd)^q&1;A.length?(x||(e.polygonStart(),
x=!0),zf(A,se,a,c,e)):a&&(x||(e.polygonStart(),x=!0),e.lineStart(),c(null,null,1,e),e.lineEnd());x&&(e.polygonEnd(),x=!1);A=y=null},sphere:function(){e.polygonStart();e.lineStart();c(null,null,1,e);e.lineEnd();e.polygonEnd()}},A,z=Fc(),w=a(z),x=!1,y,ta;return p}}function Ib(b){return 1<b.length}function Fc(){var b=[],a;return{lineStart:function(){b.push(a=[])},point:function(b,c){a.push([b,c])},lineEnd:x,buffer:function(){var c=b;b=[];a=null;return c},rejoin:function(){1<b.length&&b.push(b.pop().concat(b.shift()))}}}
function se(b,a){return(0>(b=b.x)[0]?b[1]-ab-1E-6:ab-b[1])-(0>(a=a.x)[0]?a[1]-ab-1E-6:ab-a[1])}function ud(b){function a(b,a){return Math.cos(b)*Math.cos(a)>f}function c(b,a,c){var d=tc(b),e=tc(a),k=[1,0,0];e=ma(d,e);var r=Dc(e,e);d=e[0];var g=r-d*d;if(!g)return!c&&b;r=f*r/g;g=-f*d/g;d=ma(k,e);k=rd(k,r);e=rd(e,g);Xc(k,e);e=Dc(k,d);r=Dc(d,d);g=e*e-r*(Dc(k,k)-1);if(!(0>g)){var l=Math.sqrt(g);g=rd(d,(-e-l)/r);Xc(g,k);g=sd(g);if(!c)return g;c=b[0];var h=a[0];b=b[1];a=a[1];if(h<c){var q=c;c=h;h=q}var n=
h-c,u=1E-6>Va(n-Ua);!u&&a<b&&(q=b,b=a,a=q);if(u||1E-6>n?u?0<b+a^g[1]<(1E-6>Va(g[0]-c)?b:a):b<=g[1]&&g[1]<=a:n>Ua^(c<=g[0]&&g[0]<=h))return a=rd(d,(-e+l)/r),Xc(a,k),[g,sd(a)]}}function d(a,c){var d=e?b:Ua-b,f=0;a<-d?f|=1:a>d&&(f|=2);c<-d?f|=4:c>d&&(f|=8);return f}var f=Math.cos(b),e=0<f,k=1E-6<Va(f),r=Ue(b,6*Wa);return re(a,function(b){var f,r,g,l,h;return{lineStart:function(){l=g=!1;h=1},point:function(q,n){var u=[q,n],v=a(q,n);n=e?v?0:d(q,n):v?d(q+(0>q?Ua:-Ua),n):0;!f&&(l=g=v)&&b.lineStart();v!==
g&&(q=c(f,u),Zc(f,q)||Zc(u,q))&&(u[0]+=1E-6,u[1]+=1E-6,v=a(u[0],u[1]));if(v!==g)h=0,v?(b.lineStart(),q=c(u,f),b.point(q[0],q[1])):(q=c(f,u),b.point(q[0],q[1]),b.lineEnd()),f=q;else if(k&&f&&e^v){var p;n&r||!(p=c(u,f,!0))||(h=0,e?(b.lineStart(),b.point(p[0][0],p[0][1]),b.point(p[1][0],p[1][1]),b.lineEnd()):(b.point(p[1][0],p[1][1]),b.lineEnd(),b.lineStart(),b.point(p[0][0],p[0][1])))}!v||f&&Zc(f,u)||b.point(u[0],u[1]);f=u;g=v;r=n},lineEnd:function(){g&&b.lineEnd();f=null},clean:function(){return h|
(l&&g)<<1}}},r,e?[0,-b]:[-Ua,b-Ua])}function Af(b,a,c,d){return function(f){var e=f.a,k=f.b,r=e.x;e=e.y;var g=0,l=1,h=k.x-r;k=k.y-e;var q=b-r;if(h||!(0<q)){q/=h;if(0>h){if(q<g)return;q<l&&(l=q)}else if(0<h){if(q>l)return;q>g&&(g=q)}q=c-r;if(h||!(0>q)){q/=h;if(0>h){if(q>l)return;q>g&&(g=q)}else if(0<h){if(q<g)return;q<l&&(l=q)}q=a-e;if(k||!(0<q)){q/=k;if(0>k){if(q<g)return;q<l&&(l=q)}else if(0<k){if(q>l)return;q>g&&(g=q)}q=d-e;if(k||!(0>q)){q/=k;if(0>k){if(q>l)return;q>g&&(g=q)}else if(0<k){if(q<g)return;
q<l&&(l=q)}0<g&&(f.a={x:r+g*h,y:e+g*k});1>l&&(f.b={x:r+l*h,y:e+l*k});return f}}}}}}function bb(b,a,c,d){function f(d,f){return 1E-6>Va(d[0]-b)?0<f?0:3:1E-6>Va(d[0]-c)?0<f?2:1:1E-6>Va(d[1]-a)?0<f?1:0:0<f?3:2}function e(b,a){return k(b.x,a.x)}function k(b,a){var c=f(b,1),d=f(a,1);return c!==d?c-d:0===c?a[1]-b[1]:1===c?b[0]-a[0]:2===c?b[1]-a[1]:a[0]-b[0]}return function(r){function g(e,r,g,l){var h=0,q=0;if(null==e||(h=f(e,g))!==(q=f(r,g))||0>k(e,r)^0<g){do l.point(0===h||3===h?b:c,1<h?d:a);while((h=
(h+g+4)%4)!==q)}else l.point(r[0],r[1])}function l(f,e){b<=f&&f<=c&&a<=e&&e<=d&&r.point(f,e)}function h(f,e){f=Math.max(-1E9,Math.min(1E9,f));e=Math.max(-1E9,Math.min(1E9,e));var k=b<=f&&f<=c&&a<=e&&e<=d;p&&A.push([f,e]);if(J)w=f,x=e,y=k,J=!1,k&&(r.lineStart(),r.point(f,e));else if(k&&m)r.point(f,e);else{var g={a:{x:ta,y:B},b:{x:f,y:e}};u(g)?(m||(r.lineStart(),r.point(g.a.x,g.a.y)),r.point(g.b.x,g.b.y),k||r.lineEnd(),F=!1):k&&(r.lineStart(),r.point(f,e),F=!1)}ta=f;B=e;m=k}var q=r,n=Fc(),u=Af(b,a,
c,d),v,p,A,z={point:l,lineStart:function(){z.point=h;p&&p.push(A=[]);J=!0;m=!1;ta=B=NaN},lineEnd:function(){v&&(h(w,x),y&&m&&n.rejoin(),v.push(n.buffer()));z.point=l;m&&r.lineEnd()},polygonStart:function(){r=n;v=[];p=[];F=!0},polygonEnd:function(){r=q;v=Q.merge(v);var a=[b,d];for(var c=0,f=p.length,k=a[1],l=0;l<f;++l)for(var h=1,n=p[l],u=n.length,z=n[0],w;h<u;++h)w=n[h],z[1]<=k?w[1]>k&&0<ha(z,w,a)&&++c:w[1]<=k&&0>ha(z,w,a)&&--c,z=w;a=0!==c;c=F&&a;f=v.length;if(c||f)r.polygonStart(),c&&(r.lineStart(),
g(null,null,1,r),r.lineEnd()),f&&zf(v,e,a,g,r),r.polygonEnd();v=p=A=null}},w,x,y,ta,B,m,J,F;return z}}function Pc(b){var a=0,c=Ua/3,d=fe(b);b=d(a,c);b.parallels=function(b){return arguments.length?d(a=b[0]*Ua/180,c=b[1]*Ua/180):[a/Ua*180,c/Ua*180]};return b}function Sd(b,a){function c(b,a){a=Math.sqrt(f-2*d*Math.sin(a))/d;return[a*Math.sin(b*=d),e-a*Math.cos(b)]}b=Math.sin(b);var d=(b+Math.sin(a))/2,f=1+b*(2*d-b),e=Math.sqrt(f)/d;c.invert=function(b,a){a=e-a;return[Math.atan2(b,a)/d,oa((f-(b*b+a*
a)*d*d)/(2*d))]};return c}function Ve(){function b(b,a){oh+=f*b-d*a;d=b;f=a}var a,c,d,f;xe.point=function(e,k){xe.point=b;a=d=e;c=f=k};xe.lineEnd=function(){b(a,c)}}function Ff(){function b(b,a){k.push("M",b,",",a,e)}function a(b,a){k.push("M",b,",",a);r.point=c}function c(b,a){k.push("L",b,",",a)}function d(){r.point=b}function f(){k.push("Z")}var e=Ad(4.5),k=[],r={point:b,lineStart:function(){r.point=a},lineEnd:d,polygonStart:function(){r.lineEnd=f},polygonEnd:function(){r.lineEnd=d;r.point=b},
pointRadius:function(b){e=Ad(b);return r},result:function(){if(k.length){var b=k.join("");k=[];return b}}};return r}function Ad(b){return"m0,"+b+"a"+b+","+b+" 0 1,1 0,"+-2*b+"a"+b+","+b+" 0 1,1 0,"+2*b+"z"}function lb(b,a){ce+=b;de+=a;++ee}function Mb(){function b(b,d){var f=b-a,e=d-c;f=Math.sqrt(f*f+e*e);ue+=f*(a+b)/2;ve+=f*(c+d)/2;Ud+=f;lb(a=b,c=d)}var a,c;Bd.point=function(d,f){Bd.point=b;lb(a=d,c=f)}}function Rb(){Bd.point=lb}function oc(){function b(b,a){var c=b-d,e=a-f;c=Math.sqrt(c*c+e*e);
ue+=c*(d+b)/2;ve+=c*(f+a)/2;Ud+=c;c=f*b-d*a;Df+=c*(d+b);Ef+=c*(f+a);we+=3*c;lb(d=b,f=a)}var a,c,d,f;Bd.point=function(e,k){Bd.point=b;lb(a=d=e,c=f=k)};Bd.lineEnd=function(){b(a,c)}}function ge(b){function a(a,c){b.moveTo(a+k,c);b.arc(a,c,k,0,Zb)}function c(a,c){b.moveTo(a,c);r.point=d}function d(a,c){b.lineTo(a,c)}function f(){r.point=a}function e(){b.closePath()}var k=4.5,r={point:a,lineStart:function(){r.point=c},lineEnd:f,polygonStart:function(){r.lineEnd=e},polygonEnd:function(){r.lineEnd=f;r.point=
a},pointRadius:function(b){k=b;return r},result:x};return r}function Hc(b){function a(b){return(r?d:c)(b)}function c(a){return Fb(a,function(c,d){c=b(c,d);a.point(c[0],c[1])})}function d(a){function c(c,d){c=b(c,d);a.point(c[0],c[1])}function d(){w=NaN;m.point=e;a.lineStart()}function e(c,d){var e=tc([c,d]);d=b(c,d);f(w,x,z,y,ta,B,w=d[0],x=d[1],z=c,y=e[0],ta=e[1],B=e[2],r,a);a.point(w,x)}function k(){m.point=c;a.lineEnd()}function g(){d();m.point=l;m.lineEnd=h}function l(b,a){e(q=b,a);n=w;u=x;v=y;
p=ta;A=B;m.point=e}function h(){f(w,x,z,y,ta,B,n,u,q,v,p,A,r,a);m.lineEnd=k;k()}var q,n,u,v,p,A,z,w,x,y,ta,B,m={point:c,lineStart:d,lineEnd:k,polygonStart:function(){a.polygonStart();m.lineStart=g},polygonEnd:function(){a.polygonEnd();m.lineStart=d}};return m}function f(a,c,d,r,g,l,h,q,n,u,v,p,A,z){var w=h-a,x=q-c,y=w*w+x*x;if(y>4*e&&A--){var ta=r+u,B=g+v,m=l+p,J=Math.sqrt(ta*ta+B*B+m*m),F=Math.asin(m/=J),E=1E-6>Va(Va(m)-1)||1E-6>Va(d-n)?(d+n)/2:Math.atan2(B,ta),I=b(E,F);F=I[0];I=I[1];var C=F-a,D=
I-c,t=x*C-w*D;if(t*t/y>e||.3<Va((w*C+x*D)/y-.5)||r*u+g*v+l*p<k)f(a,c,d,r,g,l,F,I,E,ta/=J,B/=J,m,A,z),z.point(F,I),f(F,I,E,ta,B,m,h,q,n,u,v,p,A,z)}}var e=.5,k=Math.cos(30*Wa),r=16;a.precision=function(b){if(!arguments.length)return Math.sqrt(e);r=0<(e=b*b)&&16;return a};return a}function We(b){var a=Hc(function(a,c){return b([a*sb,c*sb])});return function(b){return uc(a(b))}}function jb(b){this.stream=b}function Fb(b,a){return{point:a,sphere:function(){b.sphere()},lineStart:function(){b.lineStart()},
lineEnd:function(){b.lineEnd()},polygonStart:function(){b.polygonStart()},polygonEnd:function(){b.polygonEnd()}}}function ad(b){return fe(function(){return b})()}function fe(b){function a(b){b=r(b[0]*Wa,b[1]*Wa);return[b[0]*l+w,x-b[1]*l]}function c(b){return(b=r.invert((b[0]-w)/l,(x-b[1])/l))&&[b[0]*sb,b[1]*sb]}function d(){r=pe(k=Ic(v,p,z),e);var b=e(n,u);w=h-b[0]*l;x=q+b[1]*l;return f()}function f(){J&&(J.valid=!1,J=null);return a}var e,k,r,g=Hc(function(b,a){b=e(b,a);return[b[0]*l+w,x-b[1]*l]}),
l=150,h=480,q=250,n=0,u=0,v=0,p=0,z=0,w,x,y=Ih,ta=A,B=null,m=null,J;a.stream=function(b){J&&(J.valid=!1);J=uc(y(k,g(ta(b))));J.valid=!0;return J};a.clipAngle=function(b){if(!arguments.length)return B;y=null==b?(B=b,Ih):ud((B=+b)*Wa);return f()};a.clipExtent=function(b){if(!arguments.length)return m;ta=(m=b)?bb(b[0][0],b[0][1],b[1][0],b[1][1]):A;return f()};a.scale=function(b){if(!arguments.length)return l;l=+b;return d()};a.translate=function(b){if(!arguments.length)return[h,q];h=+b[0];q=+b[1];return d()};
a.center=function(b){if(!arguments.length)return[n*sb,u*sb];n=b[0]%360*Wa;u=b[1]%360*Wa;return d()};a.rotate=function(b){if(!arguments.length)return[v*sb,p*sb,z*sb];v=b[0]%360*Wa;p=b[1]%360*Wa;z=2<b.length?b[2]%360*Wa:0;return d()};Q.rebind(a,g,"precision");return function(){e=b.apply(this,arguments);a.invert=e.invert&&c;return d()}}function uc(b){return Fb(b,function(a,c){b.point(a*Wa,c*Wa)})}function Cd(b,a){return[b,a]}function Dd(b,a){return[b>Ua?b-Zb:b<-Ua?b+Zb:b,a]}function Ic(b,a,c){return b?
a||c?pe(Jb(b),Xe(a,c)):Jb(b):a||c?Xe(a,c):Dd}function tb(b){return function(a,c){return a+=b,[a>Ua?a-Zb:a<-Ua?a+Zb:a,c]}}function Jb(b){var a=tb(b);a.invert=tb(-b);return a}function Xe(b,a){function c(b,a){var c=Math.cos(a),r=Math.cos(b)*c;b=Math.sin(b)*c;a=Math.sin(a);c=a*d+r*f;return[Math.atan2(b*e-c*k,r*d-a*f),oa(c*e+b*k)]}var d=Math.cos(b),f=Math.sin(b),e=Math.cos(a),k=Math.sin(a);c.invert=function(b,a){var c=Math.cos(a),r=Math.cos(b)*c;b=Math.sin(b)*c;a=Math.sin(a);c=a*e-b*k;return[Math.atan2(b*
e+a*k,r*d+c*f),oa(c*d-r*f)]};return c}function Ue(b,a){var c=Math.cos(b),d=Math.sin(b);return function(f,e,k,r){var g=k*a;if(null!=f){if(f=Gf(c,f),e=Gf(c,e),0<k?f<e:f>e)f+=k*Zb}else f=b+k*Zb,e=b-.5*g;for(var l;0<k?f>e:f<e;f-=g)r.point((l=sd([c,-d*Math.cos(f),-d*Math.sin(f)]))[0],l[1])}}function Gf(b,a){a=tc(a);a[0]-=b;Yc(a);b=fa(-a[1]);return((0>-a[2]?-b:b)+2*Math.PI-1E-6)%(2*Math.PI)}function Hf(b,a,c){var d=Q.range(b,a-1E-6,c).concat(a);return function(b){return d.map(function(a){return[b,a]})}}
function If(b,a,c){var d=Q.range(b,a-1E-6,c).concat(a);return function(b){return d.map(function(a){return[a,b]})}}function Ye(b){return b.source}function Ze(b){return b.target}function Jf(b,a,c,d){var f=Math.cos(a),e=Math.sin(a),k=Math.cos(d),r=Math.sin(d),g=f*Math.cos(b),l=f*Math.sin(b),h=k*Math.cos(c),q=k*Math.sin(c),n=2*Math.asin(Math.sqrt(Z(d-a)+f*k*Z(c-b))),u=1/Math.sin(n);c=n?function(b){var a=Math.sin(b*=n)*u;b=Math.sin(n-b)*u;var c=b*g+a*h,d=b*l+a*q;return[Math.atan2(d,c)*sb,Math.atan2(b*
e+a*r,Math.sqrt(c*c+d*d))*sb]}:function(){return[b*sb,a*sb]};c.distance=n;return c}function bd(b,a){function c(a,c){var d=Math.cos(c),f=b(Math.cos(a)*d);return[f*d*Math.sin(a),f*Math.sin(c)]}c.invert=function(b,c){var d=Math.sqrt(b*b+c*c),f=a(d),e=Math.sin(f);return[Math.atan2(b*e,d*Math.cos(f)),Math.asin(d&&c*e/d)]};return c}function Kf(b,a){function c(b,a){0<e?a<-ab+1E-6&&(a=-ab+1E-6):a>ab-1E-6&&(a=ab-1E-6);a=e/Math.pow(Math.tan(Ua/4+a/2),f);return[a*Math.sin(f*b),e-a*Math.cos(f*b)]}var d=Math.cos(b),
f=b===a?Math.sin(b):Math.log(d/Math.cos(a))/Math.log(Math.tan(Ua/4+a/2)/Math.tan(Ua/4+b/2)),e=d*Math.pow(Math.tan(Ua/4+b/2),f)/f;if(!f)return ib;c.invert=function(b,a){a=e-a;return[Math.atan2(b,a)/f,2*Math.atan(Math.pow(e/((0<f?1:0>f?-1:0)*Math.sqrt(b*b+a*a)),1/f))-ab]};return c}function Ed(b,a){function c(b,a){a=e-a;return[a*Math.sin(f*b),e-a*Math.cos(f*b)]}var d=Math.cos(b),f=b===a?Math.sin(b):(d-Math.cos(a))/(a-b),e=d/f+b;if(1E-6>Va(f))return Cd;c.invert=function(b,a){a=e-a;return[Math.atan2(b,
a)/f,e-(0<f?1:0>f?-1:0)*Math.sqrt(b*b+a*a)]};return c}function ib(b,a){return[b,Math.log(Math.tan(Ua/4+a/2))]}function Fd(b){var a=ad(b),c=a.scale,d=a.translate,f=a.clipExtent,e;a.scale=function(){var b=c.apply(a,arguments);return b===a?e?a.clipExtent(null):a:b};a.translate=function(){var b=d.apply(a,arguments);return b===a?e?a.clipExtent(null):a:b};a.clipExtent=function(b){var k=f.apply(a,arguments);if(k===a){if(e=null==b){var r=Ua*c(),g=d();f([[g[0]-r,g[1]-r],[g[0]+r,g[1]+r]])}}else e&&(k=null);
return k};return a.clipExtent(null)}function Vd(b,a){return[Math.log(Math.tan(Ua/4+a/2)),-b]}function cd(b){return b[0]}function ie(b){return b[1]}function ye(b){for(var a=b.length,c=[0,1],d=2,f=2;f<a;f++){for(;1<d&&0>=ha(b[c[d-2]],b[c[d-1]],b[f]);)--d;c[d++]=f}return c.slice(0,d)}function je(b,a){return b[0]-a[0]||b[1]-a[1]}function Gd(b,a,c){return(c[0]-a[0])*(b[1]-a[1])<(c[1]-a[1])*(b[0]-a[0])}function Hd(b,a,c,d){var f=b[0],e=c[0],k=a[0]-f,r=d[0]-e;b=b[1];c=c[1];a=a[1]-b;d=d[1]-c;e=(r*(b-c)-d*
(f-e))/(d*k-r*a);return[f+e*k,b+e*a]}function ze(b){var a=b[0];b=b[b.length-1];return!(a[0]-b[0]||a[1]-b[1])}function Lf(){Fa(this);this.edge=this.site=this.circle=null}function Ae(b){var a=Jh.pop()||new Lf;a.site=b;return a}function Be(b){dd(b);Mf.remove(b);Jh.push(b);Fa(b)}function $e(b,a){var c=b.site,d=c.x,f=c.y,e=f-a;if(!e)return d;b=b.P;if(!b)return-Infinity;c=b.site;b=c.x;c=c.y;a=c-a;if(!a)return b;var k=b-d,r=1/e-1/a,g=k/a;return r?(-g+Math.sqrt(g*g-2*r*(k*k/(-2*a)-c+a/2+f-e/2)))/r+d:(d+b)/
2}function Jc(b){this.site=b;this.edges=[]}function $b(b,a){return a.angle-b.angle}function af(){Fa(this);this.x=this.y=this.arc=this.site=this.cy=null}function ed(b){var a=b.P,c=b.N;if(a&&c){var d=a.site;a=b.site;var f=c.site;if(d!==f){c=a.x;var e=a.y,k=d.x-c,r=d.y-e;d=f.x-c;f=f.y-e;var g=2*(k*f-r*d);if(!(-1E-12<=g)){var l=k*k+r*r,h=d*d+f*f;r=(f*l-r*h)/g;k=(k*h-d*l)/g;f=k+e;e=Kh.pop()||new af;e.arc=b;e.site=a;e.x=r+c;e.y=f+Math.sqrt(r*r+k*k);e.cy=f;b.circle=e;b=null;for(a=ug._;a;)if(e.y<a.y||e.y===
a.y&&e.x<=a.x)if(a.L)a=a.L;else{b=a.P;break}else if(a.R)a=a.R;else{b=a;break}ug.insert(b,e);b||(ph=e)}}}}function dd(b){var a=b.circle;a&&(a.P||(ph=a.N),ug.remove(a),Kh.push(a),Fa(a),b.circle=null)}function bf(b,a){var c=b.b;if(c)return!0;var d=b.a;c=a[0][0];var f=a[1][0],e=a[0][1];a=a[1][1];var k=b.l,r=b.r,g=k.x;k=k.y;var l=r.x;r=r.y;var h=(g+l)/2;if(r===k){if(h<c||h>=f)return;if(g>l){if(!d)d={x:h,y:e};else if(d.y>=a)return;c={x:h,y:a}}else{if(!d)d={x:h,y:a};else if(d.y<e)return;c={x:h,y:e}}}else{var q=
(g-l)/(r-k);h=(k+r)/2-q*h;if(-1>q||1<q)if(g>l){if(!d)d={x:(e-h)/q,y:e};else if(d.y>=a)return;c={x:(a-h)/q,y:a}}else{if(!d)d={x:(a-h)/q,y:a};else if(d.y<e)return;c={x:(e-h)/q,y:e}}else if(k<r){if(!d)d={x:c,y:q*c+h};else if(d.x>=f)return;c={x:f,y:q*f+h}}else{if(!d)d={x:f,y:q*f+h};else if(d.x<c)return;c={x:c,y:q*c+h}}}b.a=d;b.b=c;return!0}function Ce(b,a){this.l=b;this.r=a;this.a=this.b=null}function Wd(b,a,c,d){var f=new Ce(b,a);Nf.push(f);c&&Gb(f,b,a,c);d&&Gb(f,a,b,d);cf[b.i].edges.push(new ac(f,b,
a));cf[a.i].edges.push(new ac(f,a,b));return f}function ke(b,a,c){b=new Ce(b,null);b.a=a;b.b=c;Nf.push(b);return b}function Gb(b,a,c,d){b.a||b.b?b.l===c?b.b=d:b.a=d:(b.a=d,b.l=a,b.r=c)}function ac(b,a,c){var d=b.a,f=b.b;this.edge=b;this.site=a;this.angle=c?Math.atan2(c.y-a.y,c.x-a.x):b.l===a?Math.atan2(f.x-d.x,d.y-f.y):Math.atan2(d.x-f.x,f.y-d.y)}function ra(){this._=null}function Fa(b){b.U=b.C=b.L=b.R=b.P=b.N=null}function eb(b,a){var c=a.R,d=a.U;d?d.L===a?d.L=c:d.R=c:b._=c;c.U=d;a.U=c;a.R=c.L;a.R&&
(a.R.U=a);c.L=a}function ob(b,a){var c=a.L,d=a.U;d?d.L===a?d.L=c:d.R=c:b._=c;c.U=d;a.U=c;a.L=c.R;a.L&&(a.L.U=a);c.R=a}function fd(b){for(;b.L;)b=b.L;return b}function za(b,a){var c=b.sort(Za).pop(),d;Nf=[];cf=Array(b.length);Mf=new ra;for(ug=new ra;;){var f=ph;if(c&&(!f||c.y<f.y||c.y===f.y&&c.x<f.x)){if(c.x!==d||c.y!==e){cf[c.i]=new Jc(c);var e=d=void 0;f=c;for(var k=f.x,r=f.y,g=Mf._;g;){var l=$e(g,r)-k;if(1E-6<l)g=g.L;else{var h=g;var q=r;var n=h.N;n?q=$e(n,q):(h=h.site,q=h.y===q?h.x:Infinity);q=
k-q;if(1E-6<q){if(!g.R){e=g;break}g=g.R}else{-1E-6<l?(e=g.P,d=g):-1E-6<q?(e=g,d=g.N):e=d=g;break}}}l=Ae(f);Mf.insert(e,l);if(e||d)if(e===d)dd(e),d=Ae(e.site),Mf.insert(l,d),l.edge=d.edge=Wd(e.site,l.site),ed(e),ed(d);else if(d){dd(e);dd(d);k=e.site;g=k.x;q=k.y;h=f.x-g;n=f.y-q;r=d.site;var u=r.x-g,v=r.y-q,p=2*(h*v-n*u),A=h*h+n*n,z=u*u+v*v;g={x:(v*A-n*z)/p+g,y:(h*z-u*A)/p+q};Gb(d.edge,k,r,g);l.edge=Wd(k,f,null,g);d.edge=Wd(f,r,null,g);ed(e);ed(d)}else l.edge=Wd(e.site,l.site);d=c.x;e=c.y}c=b.pop()}else if(f){r=
f.arc;f=r.circle;k=f.x;g=f.cy;f={x:k,y:g};h=r.P;q=r.N;l=[r];Be(r);for(r=h;r.circle&&1E-6>Va(k-r.circle.x)&&1E-6>Va(g-r.circle.cy);)h=r.P,l.unshift(r),Be(r),r=h;l.unshift(r);dd(r);for(h=q;h.circle&&1E-6>Va(k-h.circle.x)&&1E-6>Va(g-h.circle.cy);)q=h.N,l.push(h),Be(h),h=q;l.push(h);dd(h);g=l.length;for(k=1;k<g;++k)h=l[k],r=l[k-1],Gb(h.edge,r.site,h.site,f);r=l[0];h=l[g-1];h.edge=Wd(r.site,h.site,null,f);ed(r);ed(h)}else break}if(a){b=Nf;c=Af(a[0][0],a[0][1],a[1][0],a[1][1]);for(d=b.length;d--;)if(e=
b[d],!bf(e,a)||!c(e)||1E-6>Va(e.a.x-e.b.x)&&1E-6>Va(e.a.y-e.b.y))e.a=e.b=null,b.splice(d,1);b=a[0][0];c=a[1][0];d=a[0][1];a=a[1][1];k=cf;for(r=k.length;r--;)if((g=k[r])&&g.prepare())for(h=g.edges,n=h.length,q=0;q<n;)if(u=h[q].end(),f=u.x,l=u.y,v=h[++q%n].start(),e=v.x,v=v.y,1E-6<Va(f-e)||1E-6<Va(l-v))h.splice(q,0,new ac(ke(g.site,u,1E-6>Va(f-b)&&1E-6<a-l?{x:b,y:1E-6>Va(e-b)?v:a}:1E-6>Va(l-a)&&1E-6<c-f?{x:1E-6>Va(v-a)?e:c,y:a}:1E-6>Va(f-c)&&1E-6<l-d?{x:c,y:1E-6>Va(e-c)?v:d}:1E-6>Va(l-d)&&1E-6<f-b?
{x:1E-6>Va(v-d)?e:b,y:d}:null),g.site,null)),++n}a={cells:cf,edges:Nf};Mf=ug=Nf=cf=null;return a}function Za(b,a){return a.y-b.y||a.x-b.x}function $a(b){return b.x}function Ub(b){return b.y}function Sb(){return{leaf:!0,nodes:[],point:null,x:null,y:null}}function hb(b,a,c,d,f,e){if(!b(a,c,d,f,e)){var k=.5*(c+f),r=.5*(d+e);a=a.nodes;a[0]&&hb(b,a[0],c,d,k,r);a[1]&&hb(b,a[1],k,d,f,r);a[2]&&hb(b,a[2],c,r,k,e);a[3]&&hb(b,a[3],k,r,f,e)}}function xb(b,a,c,d,f,e,k){var r=Infinity,g;(function Og(b,l,h,q,n){if(!(l>
e||h>k||q<d||n<f)){if(u=b.point){var u,v=a-b.x,p=c-b.y;v=v*v+p*p;v<r&&(v=Math.sqrt(r=v),d=a-v,f=c-v,e=a+v,k=c+v,g=u)}u=b.nodes;v=.5*(l+q);p=.5*(h+n);for(var A=(c>=p)<<1|a>=v,z=A+4;A<z;++A)if(b=u[A&3])switch(A&3){case 0:Og(b,l,h,v,p);break;case 1:Og(b,v,h,q,p);break;case 2:Og(b,l,p,v,n);break;case 3:Og(b,v,p,q,n)}}})(b,d,f,e,k);return g}function df(b,a){b=Q.rgb(b);a=Q.rgb(a);var c=b.r,d=b.g,f=b.b,e=a.r-c,k=a.g-d,r=a.b-f;return function(b){return"#"+xa(Math.round(c+e*b))+xa(Math.round(d+k*b))+xa(Math.round(f+
r*b))}}function Hb(b,a){var c={},d={},f;for(f in b)f in a?c[f]=gc(b[f],a[f]):d[f]=b[f];for(f in a)f in b||(d[f]=a[f]);return function(b){for(f in c)d[f]=c[f](b);return d}}function cb(b,a){b=+b;a=+a;return function(c){return b*(1-c)+a*c}}function hc(b,a){var c=qh.lastIndex=rh.lastIndex=0,d,f,e,k=-1,r=[],g=[];b+="";for(a+="";(d=qh.exec(b))&&(f=rh.exec(a));)(e=f.index)>c&&(e=a.slice(c,e),r[k]?r[k]+=e:r[++k]=e),(d=d[0])===(f=f[0])?r[k]?r[k]+=f:r[++k]=f:(r[++k]=null,g.push({i:k,x:cb(d,f)})),c=rh.lastIndex;
c<a.length&&(e=a.slice(c),r[k]?r[k]+=e:r[++k]=e);return 2>r.length?g[0]?(a=g[0].x,function(b){return a(b)+""}):function(){return a}:(a=g.length,function(b){for(var c=0,d;c<a;++c)r[(d=g[c]).i]=d.x(b);return r.join("")})}function gc(b,a){for(var c=Q.interpolators.length,d;0<=--c&&!(d=Q.interpolators[c](b,a)););return d}function ub(b,a){var c=[],d=[],f=b.length,e=a.length,k=Math.min(b.length,a.length),r;for(r=0;r<k;++r)c.push(gc(b[r],a[r]));for(;r<f;++r)d[r]=b[r];for(;r<e;++r)d[r]=a[r];return function(b){for(r=
0;r<k;++r)d[r]=c[r](b);return d}}function ic(b){return function(a){return 0>=a?0:1<=a?1:b(a)}}function Of(b){return function(a){return 1-b(1-a)}}function Db(b){return function(a){return.5*(.5>a?b(2*a):2-b(2-2*a))}}function Id(b){return b*b}function pc(b){return b*b*b}function vg(b){if(0>=b)return 0;if(1<=b)return 1;var a=b*b,c=a*b;return 4*(.5>b?c:3*(b-a)+c-.75)}function Kc(b){return 1-Math.cos(b*ab)}function wg(b){return Math.pow(2,10*(b-1))}function Jd(b){return 1-Math.sqrt(1-b*b)}function Vb(b){return b<
1/2.75?7.5625*b*b:b<2/2.75?7.5625*(b-=1.5/2.75)*b+.75:b<2.5/2.75?7.5625*(b-=2.25/2.75)*b+.9375:7.5625*(b-=2.625/2.75)*b+.984375}function qc(b,a){a-=b;return function(c){return Math.round(b+a*c)}}function Ac(b){var a=[b.a,b.b],c=[b.c,b.d],d=Ab(a),f=a[0]*c[0]+a[1]*c[1],e=-f;c[0]+=e*a[0];c[1]+=e*a[1];e=Ab(c)||0;a[0]*c[1]<c[0]*a[1]&&(a[0]*=-1,a[1]*=-1,d*=-1,f*=-1);this.rotate=(d?Math.atan2(a[1],a[0]):Math.atan2(-c[0],c[1]))*sb;this.translate=[b.e,b.f];this.scale=[d,e];this.skew=e?Math.atan2(f,e)*sb:0}
function Ab(b){var a=Math.sqrt(b[0]*b[0]+b[1]*b[1]);a&&(b[0]/=a,b[1]/=a);return a}function jc(b){return b.length?b.pop()+",":""}function bc(b,a,c,d){b[0]!==a[0]||b[1]!==a[1]?(c=c.push("translate(",null,",",null,")"),d.push({i:c-4,x:cb(b[0],a[0])},{i:c-2,x:cb(b[1],a[1])})):(a[0]||a[1])&&c.push("translate("+a+")")}function gd(b,a,c,d){b!==a?(180<b-a?a+=360:180<a-b&&(b+=360),d.push({i:c.push(jc(c)+"rotate(",null,")")-2,x:cb(b,a)})):a&&c.push(jc(c)+"rotate("+a+")")}function hd(b,a,c,d){b!==a?d.push({i:c.push(jc(c)+
"skewX(",null,")")-2,x:cb(b,a)}):a&&c.push(jc(c)+"skewX("+a+")")}function vc(b,a,c,d){b[0]!==a[0]||b[1]!==a[1]?(c=c.push(jc(c)+"scale(",null,",",null,")"),d.push({i:c-4,x:cb(b[0],a[0])},{i:c-2,x:cb(b[1],a[1])})):1===a[0]&&1===a[1]||c.push(jc(c)+"scale("+a+")")}function cc(b,a){var c=[],d=[];b=Q.transform(b);a=Q.transform(a);bc(b.translate,a.translate,c,d);gd(b.rotate,a.rotate,c,d);hd(b.skew,a.skew,c,d);vc(b.scale,a.scale,c,d);b=a=null;return function(b){for(var a=-1,f=d.length,e;++a<f;)c[(e=d[a]).i]=
e.x(b);return c.join("")}}function Kd(b,a){a=(a-=b=+b)||1/a;return function(c){return(c-b)/a}}function xg(b,a){a=(a-=b=+b)||1/a;return function(c){return Math.max(0,Math.min(1,(c-b)/a))}}function ef(b){var a=b.source;b=b.target;var c=b;if(a===c)var d=a;else{d=Ld(a);c=Ld(c);for(var f=d.pop(),e=c.pop(),k=null;f===e;)k=f,f=d.pop(),e=c.pop();d=k}for(c=[a];a!==d;)a=a.parent,c.push(a);for(a=c.length;b!==d;)c.splice(a,0,b),b=b.parent;return c}function Ld(b){for(var a=[],c=b.parent;null!=c;)a.push(b),b=c,
c=c.parent;a.push(b);return a}function Md(b){b.fixed|=2}function rc(b){b.fixed&=-7}function kc(b){b.fixed|=4;b.px=b.x;b.py=b.y}function lc(b){b.fixed&=-5}function Rg(b,a,c){var d=0,f=0;b.charge=0;if(!b.leaf)for(var e=b.nodes,k=e.length,r=-1,g;++r<k;)g=e[r],null!=g&&(Rg(g,a,c),b.charge+=g.charge,d+=g.charge*g.cx,f+=g.charge*g.cy);b.point&&(b.leaf||(b.point.x+=Math.random()-.5,b.point.y+=Math.random()-.5),a*=c[b.point.index],b.charge+=b.pointCharge=a,d+=a*b.point.x,f+=a*b.point.y);b.cx=d/b.charge;b.cy=
f/b.charge}function Sc(b,a){Q.rebind(b,a,"sort","children","value");b.nodes=b;b.links=ff;return b}function De(b,a){for(var c=[b];null!=(b=c.pop());)if(a(b),(f=b.children)&&(d=f.length))for(var d,f;0<=--d;)c.push(f[d])}function Tc(b,a){for(var c=[b],d=[];null!=(b=c.pop());)if(d.push(b),(e=b.children)&&(f=e.length)){b=-1;for(var f,e;++b<f;)c.push(e[b])}for(;null!=(b=d.pop());)a(b)}function Ee(b){return b.children}function Pf(b){return b.value}function gf(b,a){return a.value-b.value}function ff(b){return Q.merge(b.map(function(b){return(b.children||
[]).map(function(a){return{source:b,target:a}})}))}function sh(b){return b.x}function Sg(b){return b.y}function th(b,a,c){b.y0=a;b.y=c}function yg(b){return Q.range(b.length)}function zg(b){var a=-1;b=b[0].length;for(var c=[];++a<b;)c[a]=0;return c}function Xd(b){for(var a=1,c=0,d=b[0][1],f,e=b.length;a<e;++a)(f=b[a][1])>d&&(c=a,d=f);return c}function Tg(b){return b.reduce(hf,0)}function hf(b,a){return b+a[1]}function Qf(b,a){return Rf(b,Math.ceil(Math.log(a.length)/Math.LN2+1))}function Rf(b,a){var c=
-1,d=+b[0];b=(b[1]-d)/a;for(var f=[];++c<=a;)f[c]=b*c+d;return f}function Ga(b){return[Q.min(b),Q.max(b)]}function Ag(b,a){return b.value-a.value}function jf(b,a){var c=b._pack_next;b._pack_next=a;a._pack_prev=b;a._pack_next=c;c._pack_prev=a}function Fe(b,a){b._pack_next=a;a._pack_prev=b}function kf(b,a){var c=a.x-b.x,d=a.y-b.y;b=b.r+a.r;return.999*b*b>c*c+d*d}function Sf(b){function a(b){d=Math.min(b.x-b.r,d);f=Math.max(b.x+b.r,f);e=Math.min(b.y-b.r,e);k=Math.max(b.y+b.r,k)}if((c=b.children)&&(h=
c.length)){var c,d=Infinity,f=-Infinity,e=Infinity,k=-Infinity,r,g,l,h;c.forEach(Ge);var q=c[0];q.x=-q.r;q.y=0;a(q);if(1<h){var n=c[1];n.x=n.r;n.y=0;a(n);if(2<h){var u=c[2];He(q,n,u);a(u);jf(q,u);q._pack_prev=u;jf(u,n);n=q._pack_next;for(r=3;r<h;r++){He(q,n,u=c[r]);var v=0,p=1,A=1;for(g=n._pack_next;g!==n;g=g._pack_next,p++)if(kf(g,u)){v=1;break}if(1==v)for(l=q._pack_prev;l!==g._pack_prev&&!kf(l,u);l=l._pack_prev,A++);v?(p<A||p==A&&n.r<q.r?Fe(q,n=g):Fe(q=l,n),r--):(jf(q,u),n=u,a(u))}}}q=(d+f)/2;n=
(e+k)/2;for(r=g=0;r<h;r++)u=c[r],u.x-=q,u.y-=n,g=Math.max(g,u.r+Math.sqrt(u.x*u.x+u.y*u.y));b.r=g;c.forEach(Nb)}}function Ge(b){b._pack_next=b._pack_prev=b}function Nb(b){delete b._pack_next;delete b._pack_prev}function le(b,a,c,d){var f=b.children;b.x=a+=d*b.x;b.y=c+=d*b.y;b.r*=d;if(f){b=-1;for(var e=f.length;++b<e;)le(f[b],a,c,d)}}function He(b,a,c){var d=b.r+c.r,f=a.x-b.x,e=a.y-b.y;if(d&&(f||e)){var k=a.r+c.r,r=f*f+e*e;k*=k;d*=d;a=.5+(d-k)/(2*r);k=Math.sqrt(Math.max(0,2*k*(d+r)-(d-=r)*d-k*k))/
(2*r);c.x=b.x+a*f+k*e;c.y=b.y+a*e-k*f}else c.x=b.x+d,c.y=b.y}function id(b,a){return b.parent==a.parent?1:2}function lf(b){var a=b.children;return a.length?a[0]:b.t}function me(b){var a=b.children,c;return(c=a.length)?a[c-1]:b.t}function mf(b){return 1+Q.max(b,function(b){return b.y})}function Yd(b){return b.reduce(function(b,a){return b+a.x},0)/b.length}function nf(b){var a=b.children;return a&&a.length?nf(a[0]):b}function Ma(b){var a=b.children,c;return a&&(c=a.length)?Ma(a[c-1]):b}function Xa(b){return{x:b.x,
y:b.y,dx:b.dx,dy:b.dy}}function jd(b,a){var c=b.x+a[3],d=b.y+a[0],f=b.dx-a[1]-a[3];b=b.dy-a[0]-a[2];0>f&&(c+=f/2,f=0);0>b&&(d+=b/2,b=0);return{x:c,y:d,dx:f,dy:b}}function kd(b){var a=b[0];b=b[b.length-1];return a<b?[a,b]:[b,a]}function sc(b){return b.rangeExtent?b.rangeExtent():kd(b.range())}function ld(b,a,c,d){var f=c(b[0],b[1]),e=d(a[0],a[1]);return function(b){return e(f(b))}}function Tf(b,a){var c=0,d=b.length-1,f=b[c],e=b[d];if(e<f){var k=c;c=d;d=k;k=f;f=e;e=k}b[c]=a.floor(f);b[d]=a.ceil(e);
return b}function Ie(b){return b?{floor:function(a){return Math.floor(a/b)*b},ceil:function(a){return Math.ceil(a/b)*b}}:ei}function yb(b,a,c,d){var f=[],e=[],k=0,r=Math.min(b.length,a.length)-1;b[r]<b[0]&&(b=b.slice().reverse(),a=a.slice().reverse());for(;++k<=r;)f.push(c(b[k-1],b[k])),e.push(d(a[k-1],a[k]));return function(a){var c=Q.bisect(b,a,1,r)-1;return e[c](f[c](a))}}function Je(b,a,c,d){function f(){var f=2<Math.min(b.length,a.length)?yb:ld,g=d?xg:Kd;k=f(b,a,g,c);r=f(a,b,g,gc);return e}function e(b){return k(b)}
var k,r;e.invert=function(b){return r(b)};e.domain=function(a){if(!arguments.length)return b;b=a.map(Number);return f()};e.range=function(b){if(!arguments.length)return a;a=b;return f()};e.rangeRound=function(b){return e.range(b).interpolate(qc)};e.clamp=function(b){if(!arguments.length)return d;d=b;return f()};e.interpolate=function(b){if(!arguments.length)return c;c=b;return f()};e.ticks=function(a){return Q.range.apply(Q,md(b,a))};e.tickFormat=function(a,c){return of(b,a,c)};e.nice=function(a){Uf(b,
a);return f()};e.copy=function(){return Je(b,a,c,d)};return f()}function pf(b,a){return Q.rebind(b,a,"range","rangeRound","interpolate","clamp")}function Uf(b,a){Tf(b,Ie(md(b,a)[2]));Tf(b,Ie(md(b,a)[2]));return b}function md(b,a){null==a&&(a=10);b=kd(b);var c=b[1]-b[0],d=Math.pow(10,Math.floor(Math.log(c/a)/Math.LN10));a=a/c*d;.15>=a?d*=10:.35>=a?d*=5:.75>=a&&(d*=2);b[0]=Math.ceil(b[0]/d)*d;b[1]=Math.floor(b[1]/d)*d+.5*d;b[2]=d;return b}function of(b,a,c){b=md(b,a);if(c){a=Te.exec(c);a.shift();if("s"===
a[8]){var d=Q.formatPrefix(Math.max(Va(b[0]),Va(b[1])));a[7]||(a[7]="."+Ke(d.scale(b[2])));a[8]="f";c=Q.format(a.join(""));return function(b){return c(d.scale(b))+d.symbol}}a[7]||(a[7]="."+Bg(a[8],b));c=a.join("")}else c=",."+Ke(b[2])+"f";return Q.format(c)}function Ke(b){return-Math.floor(Math.log(b)/Math.LN10+.01)}function Bg(b,a){var c=Ke(a[2]);return b in fi?Math.abs(c-Ke(Math.max(Va(a[0]),Va(a[1]))))+ +("e"!==b):c-2*("%"===b)}function Vf(b,a,c,d){function f(b){return(c?Math.log(0>b?0:b):-Math.log(0<
b?0:-b))/Math.log(a)}function e(b){return c?Math.pow(a,b):-Math.pow(a,-b)}function k(a){return b(f(a))}k.invert=function(a){return e(b.invert(a))};k.domain=function(a){if(!arguments.length)return d;c=0<=a[0];b.domain((d=a.map(Number)).map(f));return k};k.base=function(c){if(!arguments.length)return a;a=+c;b.domain(d.map(f));return k};k.nice=function(){var a=Tf(d.map(f),c?Math:gi);b.domain(a);d=a.map(e);return k};k.ticks=function(){var b=kd(d),k=[],r=b[0];b=b[1];var g=Math.floor(f(r)),l=Math.ceil(f(b)),
h=a%1?2:a;if(isFinite(l-g)){if(c){for(;g<l;g++)for(var q=1;q<h;q++)k.push(e(g)*q);k.push(e(g))}else for(k.push(e(g));g++<l;)for(q=h-1;0<q;q--)k.push(e(g)*q);for(g=0;k[g]<r;g++);for(l=k.length;k[l-1]>b;l--);k=k.slice(g,l)}return k};k.tickFormat=function(b,c){if(!arguments.length)return Lh;2>arguments.length?c=Lh:"function"!==typeof c&&(c=Q.format(c));var d=Math.max(1,a*b/k.ticks().length);return function(b){var k=b/e(Math.round(f(b)));k*a<a-.5&&(k*=a);return k<=d?c(b):""}};k.copy=function(){return Vf(b.copy(),
a,c,d)};return pf(k,b)}function qf(b,a,c){function d(a){return b(f(a))}var f=Le(a),e=Le(1/a);d.invert=function(a){return e(b.invert(a))};d.domain=function(a){if(!arguments.length)return c;b.domain((c=a.map(Number)).map(f));return d};d.ticks=function(b){return Q.range.apply(Q,md(c,b))};d.tickFormat=function(b,a){return of(c,b,a)};d.nice=function(b){return d.domain(Uf(c,b))};d.exponent=function(k){if(!arguments.length)return a;f=Le(a=k);e=Le(1/a);b.domain(c.map(f));return d};d.copy=function(){return qf(b.copy(),
a,c)};return pf(d,b)}function Le(b){return function(a){return 0>a?-Math.pow(-a,b):Math.pow(a,b)}}function Wf(b,a){function c(c){return e[((f.get(c)||("range"===a.t?f.set(c,b.push(c)):NaN))-1)%e.length]}function d(a,c){return Q.range(b.length).map(function(b){return a+c*b})}var f,e,k;c.domain=function(d){if(!arguments.length)return b;b=[];f=new u;for(var e=-1,k=d.length,r;++e<k;)f.has(r=d[e])||f.set(r,b.push(r));return c[a.t].apply(c,a.a)};c.range=function(b){if(!arguments.length)return e;e=b;k=0;
a={t:"range",a:arguments};return c};c.rangePoints=function(f,r){2>arguments.length&&(r=0);var g=f[0],l=f[1];l=2>b.length?(g=(g+l)/2,0):(l-g)/(b.length-1+r);e=d(g+l*r/2,l);k=0;a={t:"rangePoints",a:arguments};return c};c.rangeRoundPoints=function(f,r){2>arguments.length&&(r=0);var g=f[0],l=f[1],h=2>b.length?(g=l=Math.round((g+l)/2),0):(l-g)/(b.length-1+r)|0;e=d(g+Math.round(h*r/2+(l-g-(b.length-1+r)*h)/2),h);k=0;a={t:"rangeRoundPoints",a:arguments};return c};c.rangeBands=function(f,r,g){2>arguments.length&&
(r=0);3>arguments.length&&(g=r);var l=f[1]<f[0],h=f[l-0],q=(f[1-l]-h)/(b.length-r+2*g);e=d(h+q*g,q);l&&e.reverse();k=q*(1-r);a={t:"rangeBands",a:arguments};return c};c.rangeRoundBands=function(f,r,g){2>arguments.length&&(r=0);3>arguments.length&&(g=r);var l=f[1]<f[0],h=f[l-0],q=f[1-l],n=Math.floor((q-h)/(b.length-r+2*g));e=d(h+Math.round((q-h-(b.length-r)*n)/2),n);l&&e.reverse();k=Math.round(n*(1-r));a={t:"rangeRoundBands",a:arguments};return c};c.rangeBand=function(){return k};c.rangeExtent=function(){return kd(a.a[0])};
c.copy=function(){return Wf(b,a)};return c.domain(b)}function rf(b,a){function c(){var c=0,e=a.length;for(f=[];++c<e;)f[c-1]=Q.quantile(b,c/e);return d}function d(b){if(!isNaN(b=+b))return a[Q.bisect(f,b)]}var f;d.domain=function(a){if(!arguments.length)return b;b=a.map(h).filter(e).sort(g);return c()};d.range=function(b){if(!arguments.length)return a;a=b;return c()};d.quantiles=function(){return f};d.invertExtent=function(c){c=a.indexOf(c);return 0>c?[NaN,NaN]:[0<c?f[c-1]:b[0],c<f.length?f[c]:b[b.length-
1]]};d.copy=function(){return rf(b,a)};return c()}function Xf(b,a,c){function d(a){return c[Math.max(0,Math.min(k,Math.floor(e*(a-b))))]}function f(){e=c.length/(a-b);k=c.length-1;return d}var e,k;d.domain=function(c){if(!arguments.length)return[b,a];b=+c[0];a=+c[c.length-1];return f()};d.range=function(b){if(!arguments.length)return c;c=b;return f()};d.invertExtent=function(a){a=c.indexOf(a);a=0>a?NaN:a/e+b;return[a,a+1/e]};d.copy=function(){return Xf(b,a,c)};return f()}function Yf(b,a){function c(c){if(c<=
c)return a[Q.bisect(b,c)]}c.domain=function(a){if(!arguments.length)return b;b=a;return c};c.range=function(b){if(!arguments.length)return a;a=b;return c};c.invertExtent=function(c){c=a.indexOf(c);return[b[c-1],b[c]]};c.copy=function(){return Yf(b,a)};return c}function nd(b){function a(b){return+b}a.invert=a;a.domain=a.range=function(c){if(!arguments.length)return b;b=c.map(a);return a};a.ticks=function(a){return Q.range.apply(Q,md(b,a))};a.tickFormat=function(a,c){return of(b,a,c)};a.copy=function(){return nd(b)};
return a}function Zf(){return 0}function $f(b){return b.innerRadius}function Cg(b){return b.outerRadius}function Dg(b){return b.startAngle}function Eg(b){return b.endAngle}function Ug(b){return b&&b.padAngle}function sf(b,a,c,d){return 0<(b-c)*a-(a-d)*b?0:1}function tf(b,a,c,d,f){var e=b[0]-a[0],k=b[1]-a[1];f=(f?d:-d)/Math.sqrt(e*e+k*k);k*=f;e*=-f;var r=b[0]+k,g=b[1]+e,l=a[0]+k,h=a[1]+e;b=(r+l)/2;a=(g+h)/2;f=l-r;var q=h-g,n=f*f+q*q;d=c-d;h=r*h-l*g;var u=(0>q?-1:1)*Math.sqrt(Math.max(0,d*d*n-h*h));
r=(h*q-f*u)/n;g=(-h*f-q*u)/n;l=(h*q+f*u)/n;f=(-h*f+q*u)/n;q=r-b;n=g-a;b=l-b;a=f-a;q*q+n*n>b*b+a*a&&(r=l,g=f);return[[r-k,g-e],[r*c/d,g*c/d]]}function Fg(b){function a(a){function k(){g.push("M",e(b(l),r))}for(var g=[],l=[],h=-1,q=a.length,n,u=Ra(c),v=Ra(d);++h<q;)f.call(this,n=a[h],h)?l.push([+u.call(this,n,h),+v.call(this,n,h)]):l.length&&(k(),l=[]);l.length&&k();return g.length?g.join(""):null}var c=cd,d=ie,f=Qa,e=Lc,k=e.key,r=.7;a.x=function(b){if(!arguments.length)return c;c=b;return a};a.y=function(b){if(!arguments.length)return d;
d=b;return a};a.defined=function(b){if(!arguments.length)return f;f=b;return a};a.interpolate=function(b){if(!arguments.length)return k;k="function"===typeof b?e=b:(e=uh.get(b)||Lc).key;return a};a.tension=function(b){if(!arguments.length)return r;r=b;return a};return a}function Lc(b){return 1<b.length?b.join("L"):b+"Z"}function Gg(b){return b.join("L")+"Z"}function ag(b){for(var a=0,c=b.length,d=b[0],f=[d[0],",",d[1]];++a<c;)f.push("V",(d=b[a])[1],"H",d[0]);return f.join("")}function bg(b){for(var a=
0,c=b.length,d=b[0],f=[d[0],",",d[1]];++a<c;)f.push("H",(d=b[a])[0],"V",d[1]);return f.join("")}function uf(b,a){if(1>a.length||b.length!=a.length&&b.length!=a.length+2)return Lc(b);var c=b.length!=a.length,d="",f=b[0],e=b[1],k=a[0],r=k,g=1;c&&(d+="Q"+(e[0]-2*k[0]/3)+","+(e[1]-2*k[1]/3)+","+e[0]+","+e[1],f=b[1],g=2);if(1<a.length)for(r=a[1],e=b[g],g++,d+="C"+(f[0]+k[0])+","+(f[1]+k[1])+","+(e[0]-r[0])+","+(e[1]-r[1])+","+e[0]+","+e[1],f=2;f<a.length;f++,g++)e=b[g],r=a[f],d+="S"+(e[0]-r[0])+","+(e[1]-
r[1])+","+e[0]+","+e[1];c&&(b=b[g],d+="Q"+(e[0]+2*r[0]/3)+","+(e[1]+2*r[1]/3)+","+b[0]+","+b[1]);return d}function Ob(b,a){var c=[];a=(1-a)/2;for(var d,f=b[0],e=b[1],k=1,r=b.length;++k<r;)d=f,f=e,e=b[k],c.push([a*(e[0]-d[0]),a*(e[1]-d[1])]);return c}function Hg(b){if(3>b.length)return Lc(b);var a=1,c=b.length,d=b[0],f=d[0],e=d[1],k=[f,f,f,(d=b[1])[0]],r=[e,e,e,d[1]];f=[f,",",e,"L",Wb(Me,k),",",Wb(Me,r)];for(b.push(b[c-1]);++a<=c;)d=b[a],k.shift(),k.push(d[0]),r.shift(),r.push(d[1]),od(f,k,r);b.pop();
f.push("L",d);return f.join("")}function Wb(b,a){return b[0]*a[0]+b[1]*a[1]+b[2]*a[2]+b[3]*a[3]}function od(b,a,c){b.push("C",Wb(Mh,a),",",Wb(Mh,c),",",Wb(Nh,a),",",Wb(Nh,c),",",Wb(Me,a),",",Wb(Me,c))}function Uc(b,a){return(a[1]-b[1])/(a[0]-b[0])}function Mc(b){for(var a,c=-1,d=b.length,f,e;++c<d;)a=b[c],f=a[0],e=a[1]-ab,a[0]=f*Math.cos(e),a[1]=f*Math.sin(e);return b}function Nc(b){function a(a){function g(){n.push("M",r(b(v),q),h,l(b(u.reverse()),q),"Z")}for(var n=[],u=[],v=[],p=-1,A=a.length,z,
w=Ra(c),x=Ra(f),y=c===d?function(){return B}:Ra(d),ta=f===e?function(){return m}:Ra(e),B,m;++p<A;)k.call(this,z=a[p],p)?(u.push([B=+w.call(this,z,p),m=+x.call(this,z,p)]),v.push([+y.call(this,z,p),+ta.call(this,z,p)])):u.length&&(g(),u=[],v=[]);u.length&&g();return n.length?n.join(""):null}var c=cd,d=cd,f=0,e=ie,k=Qa,r=Lc,g=r.key,l=r,h="L",q=.7;a.x=function(b){if(!arguments.length)return d;c=d=b;return a};a.x0=function(b){if(!arguments.length)return c;c=b;return a};a.x1=function(b){if(!arguments.length)return d;
d=b;return a};a.y=function(b){if(!arguments.length)return e;f=e=b;return a};a.y0=function(b){if(!arguments.length)return f;f=b;return a};a.y1=function(b){if(!arguments.length)return e;e=b;return a};a.defined=function(b){if(!arguments.length)return k;k=b;return a};a.interpolate=function(b){if(!arguments.length)return g;g="function"===typeof b?r=b:(r=uh.get(b)||Lc).key;l=r.reverse||r;h=r.closed?"M":"L";return a};a.tension=function(b){if(!arguments.length)return q;q=b;return a};return a}function cg(b){return b.radius}
function Nd(b){return[b.x,b.y]}function vh(b){return function(){var a=b.apply(this,arguments),c=a[0];a=a[1]-ab;return[c*Math.cos(a),c*Math.sin(a)]}}function Ne(){return 64}function Ig(){return"circle"}function Vg(b){b=Math.sqrt(b/Ua);return"M0,"+b+"A"+b+","+b+" 0 1,1 0,"+-b+"A"+b+","+b+" 0 1,1 0,"+b+"Z"}function Wg(b){return function(){var a,c,d;(a=this[b])&&(d=a[c=a.active])&&(d.timer.c=null,d.timer.t=NaN,--a.count?delete a[c]:delete this[b],a.active+=.5,d.event&&d.event.interrupt.call(this,this.__data__,
d.index))}}function Oe(b,a,c){Qe(b,Tb);b.namespace=a;b.id=c;return b}function Od(b,a,c,d){var f=b.id,e=b.namespace;return ba(b,"function"===typeof c?function(b,k,r){b[e][f].tween.set(a,d(c.call(b,b.__data__,k,r)))}:(c=d(c),function(b){b[e][f].tween.set(a,c)}))}function pd(b){null==b&&(b="");return function(){this.textContent=b}}function Jg(b){return null==b?"__transition__":"__transition_"+b+"__"}function dg(b,a,c,d,f){function e(b){var a=l.delay;p.t=a+v;if(a<=b)return k(b-a);p.c=k}function k(c){var f=
g.active,e=g[f];e&&(e.timer.c=null,e.timer.t=NaN,--g.count,delete g[f],e.event&&e.event.interrupt.call(b,b.__data__,e.index));for(var k in g)+k<d&&(f=g[k],f.timer.c=null,f.timer.t=NaN,--g.count,delete g[k]);p.c=r;pb(function(){p.c&&r(c||1)&&(p.c=null,p.t=NaN);return 1},0,v);g.active=d;l.event&&l.event.start.call(b,b.__data__,a);n=[];l.tween.forEach(function(c,d){(d=d.call(b,b.__data__,a))&&n.push(d)});q=l.ease;h=l.duration}function r(f){f/=h;for(var e=q(f),k=n.length;0<k;)n[--k].call(b,e);if(1<=f)return l.event&&
l.event.end.call(b,b.__data__,a),--g.count?delete g[d]:delete b[c],1}var g=b[c]||(b[c]={active:0,count:0}),l=g[d],h,q,n;if(!l){var v=f.time;var p=pb(e,0,v);l=g[d]={tween:new u,time:v,timer:p,delay:f.delay,duration:f.duration,ease:f.ease,index:a};f=null;++g.count}}function wh(b,a,c){b.attr("transform",function(b){var d=a(b);return"translate("+(isFinite(d)?d:c(b))+",0)"})}function xh(b,a,c){b.attr("transform",function(b){var d=a(b);return"translate(0,"+(isFinite(d)?d:c(b))+")"})}function eg(b){return b.toISOString()}
function fg(b,a,c){function d(a){return b(a)}function f(b,c){var d=(b[1]-b[0])/c,f=Q.bisect(Xg,d);return f==Xg.length?[a.year,md(b.map(function(b){return b/31536E6}),c)[2]]:f?a[d/Xg[f-1]<Xg[f]/d?f-1:f]:[hi,md(b,c)[2]]}d.invert=function(a){return Bc(b.invert(a))};d.domain=function(a){if(!arguments.length)return b.domain().map(Bc);b.domain(a);return d};d.nice=function(b,a){function c(c){return!isNaN(c)&&!b.range(c,Bc(+c+1),a).length}var e=d.domain(),k=kd(e);if(k=null==b?f(k,10):"number"===typeof b&&
f(k,b))b=k[0],a=k[1];return d.domain(Tf(e,1<a?{floor:function(a){for(;c(a=b.floor(a));)a=Bc(a-1);return a},ceil:function(a){for(;c(a=b.ceil(a));)a=Bc(+a+1);return a}}:b))};d.ticks=function(b,a){var c=kd(d.domain()),e=null==b?f(c,10):"number"===typeof b?f(c,b):!b.range&&[{range:b},a];e&&(b=e[0],a=e[1]);return b.range(c[0],Bc(+c[1]+1),1>a?1:a)};d.tickFormat=function(){return c};d.copy=function(){return fg(b.copy(),a,c)};return pf(d,b)}function Bc(b){return new Date(b)}function yh(b){return JSON.parse(b.responseText)}
function zh(b){var a=mc.createRange();a.selectNode(mc.body);return a.createContextualFragment(b.responseText)}var Q={version:"3.5.17"},gg=[].slice,fc=function(b){return gg.call(b)},mc=this.document;if(mc)try{fc(mc.documentElement.childNodes)[0].nodeType}catch(ci){fc=function(b){for(var a=b.length,c=Array(a);a--;)c[a]=b[a];return c}}Date.now||(Date.now=function(){return+new Date});if(mc)try{mc.createElement("DIV").style.setProperty("opacity",0,"")}catch(ci){var hg=this.Element.prototype,Yg=hg.setAttribute,
Zg=hg.setAttributeNS,Pe=this.CSSStyleDeclaration.prototype,Ah=Pe.setProperty;hg.setAttribute=function(b,a){Yg.call(this,b,a+"")};hg.setAttributeNS=function(b,a,c){Zg.call(this,b,a,c+"")};Pe.setProperty=function(b,a,c){Ah.call(this,b,a+"",c)}}Q.ascending=g;Q.descending=function(b,a){return a<b?-1:a>b?1:a>=b?0:NaN};Q.min=function(b,a){var c=-1,d=b.length,f;if(1===arguments.length){for(;++c<d;)if(null!=(f=b[c])&&f>=f){var e=f;break}for(;++c<d;)null!=(f=b[c])&&e>f&&(e=f)}else{for(;++c<d;)if(null!=(f=
a.call(b,b[c],c))&&f>=f){e=f;break}for(;++c<d;)null!=(f=a.call(b,b[c],c))&&e>f&&(e=f)}return e};Q.max=function(b,a){var c=-1,d=b.length,f;if(1===arguments.length){for(;++c<d;)if(null!=(f=b[c])&&f>=f){var e=f;break}for(;++c<d;)null!=(f=b[c])&&f>e&&(e=f)}else{for(;++c<d;)if(null!=(f=a.call(b,b[c],c))&&f>=f){e=f;break}for(;++c<d;)null!=(f=a.call(b,b[c],c))&&f>e&&(e=f)}return e};Q.extent=function(b,a){var c=-1,d=b.length,f,e;if(1===arguments.length){for(;++c<d;)if(null!=(f=b[c])&&f>=f){var k=e=f;break}for(;++c<
d;)null!=(f=b[c])&&(k>f&&(k=f),e<f&&(e=f))}else{for(;++c<d;)if(null!=(f=a.call(b,b[c],c))&&f>=f){k=e=f;break}for(;++c<d;)null!=(f=a.call(b,b[c],c))&&(k>f&&(k=f),e<f&&(e=f))}return[k,e]};Q.sum=function(b,a){var c=0,d=b.length,f,e=-1;if(1===arguments.length)for(;++e<d;)isNaN(f=+b[e])||(c+=f);else for(;++e<d;)isNaN(f=+a.call(b,b[e],e))||(c+=f);return c};Q.mean=function(b,a){var c=0,d=b.length,f,e=-1,k=d;if(1===arguments.length)for(;++e<d;)isNaN(f=h(b[e]))?--k:c+=f;else for(;++e<d;)isNaN(f=h(a.call(b,
b[e],e)))?--k:c+=f;if(k)return c/k};Q.quantile=function(b,a){var c=(b.length-1)*a+1;a=Math.floor(c);var d=+b[a-1];return(c-=a)?d+c*(b[a]-d):d};Q.median=function(b,a){var c=[],d=b.length,f,e=-1;if(1===arguments.length)for(;++e<d;)isNaN(f=h(b[e]))||c.push(f);else for(;++e<d;)isNaN(f=h(a.call(b,b[e],e)))||c.push(f);if(c.length)return Q.quantile(c.sort(g),.5)};Q.variance=function(b,a){var c=b.length,d=0,f,e=0,k=-1,r=0;if(1===arguments.length)for(;++k<c;){if(!isNaN(f=h(b[k]))){var g=f-d;d+=g/++r;e+=g*
(f-d)}}else for(;++k<c;)isNaN(f=h(a.call(b,b[k],k)))||(g=f-d,d+=g/++r,e+=g*(f-d));if(1<r)return e/(r-1)};Q.deviation=function(){var b=Q.variance.apply(this,arguments);return b?Math.sqrt(b):b};var $g=n(g);Q.bisectLeft=$g.left;Q.bisect=Q.bisectRight=$g.right;Q.bisector=function(b){return n(1===b.length?function(a,c){return g(b(a),c)}:b)};Q.shuffle=function(b,a,c){3>(d=arguments.length)&&(c=b.length,2>d&&(a=0));for(var d=c-a,f,e;d;)e=Math.random()*d--|0,f=b[d+a],b[d+a]=b[e+a],b[e+a]=f;return b};Q.permute=
function(b,a){for(var c=a.length,d=Array(c);c--;)d[c]=b[a[c]];return d};Q.pairs=function(b){for(var a=0,c=b.length-1,d=b[0],f=Array(0>c?0:c);a<c;)f[a]=[d,d=b[++a]];return f};Q.transpose=function(a){if(!(k=a.length))return[];for(var c=-1,d=Q.min(a,b),f=Array(d);++c<d;)for(var e=-1,k,r=f[c]=Array(k);++e<k;)r[e]=a[e][c];return f};Q.zip=function(){return Q.transpose(arguments)};Q.keys=function(b){var a=[],c;for(c in b)a.push(c);return a};Q.values=function(b){var a=[],c;for(c in b)a.push(b[c]);return a};
Q.entries=function(b){var a=[],c;for(c in b)a.push({key:c,value:b[c]});return a};Q.merge=function(b){var a=b.length;var c=-1;for(var d=0,f,e;++c<a;)d+=b[c].length;for(f=Array(d);0<=--a;)for(e=b[a],c=e.length;0<=--c;)f[--d]=e[c];return f};var Va=Math.abs;Q.range=function(b,a,c){3>arguments.length&&(c=1,2>arguments.length&&(a=b,b=0));if(Infinity===(a-b)/c)throw Error("infinite range");var d=[];var f=Va(c);for(var e=1;f*e%1;)e*=10;f=e;e=-1;var k;b*=f;a*=f;c*=f;if(0>c)for(;(k=b+c*++e)>a;)d.push(k/f);
else for(;(k=b+c*++e)<a;)d.push(k/f);return d};Q.map=function(b,a){var c=new u;if(b instanceof u)b.forEach(function(b,a){c.set(b,a)});else if(Array.isArray(b)){var d=-1,f=b.length,e;if(1===arguments.length)for(;++d<f;)c.set(d,b[d]);else for(;++d<f;)c.set(a.call(b,e=b[d],d),e)}else for(d in b)c.set(d,b[d]);return c};l(u,{has:f,get:function(b){return this._[q(b)]},set:function(b,a){return this._[q(b)]=a},remove:c,keys:k,values:function(){var b=[],a;for(a in this._)b.push(this._[a]);return b},entries:function(){var b=
[],a;for(a in this._)b.push({key:d(a),value:this._[a]});return b},size:r,empty:v,forEach:function(b){for(var a in this._)b.call(this,d(a),this._[a])}});Q.nest=function(){function b(a,f,r){if(r>=d.length)return k?k.call(c,f):e?f.sort(e):f;for(var g=-1,l=f.length,h=d[r++],q,n,v=new u,p;++g<l;)(p=v.get(q=h(n=f[g])))?p.push(n):v.set(q,[n]);a?(n=a(),f=function(c,d){n.set(c,b(a,d,r))}):(n={},f=function(c,d){n[c]=b(a,d,r)});v.forEach(f);return n}function a(b,c){if(c>=d.length)return b;var e=[],k=f[c++];
b.forEach(function(b,d){e.push({key:b,values:a(d,c)})});return k?e.sort(function(b,a){return k(b.key,a.key)}):e}var c={},d=[],f=[],e,k;c.map=function(a,c){return b(c,a,0)};c.entries=function(c){return a(b(Q.map,c,0),0)};c.key=function(b){d.push(b);return c};c.sortKeys=function(b){f[d.length-1]=b;return c};c.sortValues=function(b){e=b;return c};c.rollup=function(b){k=b;return c};return c};Q.set=function(b){var a=new z;if(b)for(var c=0,d=b.length;c<d;++c)a.add(b[c]);return a};l(z,{has:f,add:function(b){this._[q(b+=
"")]=!0;return b},remove:c,values:k,size:r,empty:v,forEach:function(b){for(var a in this._)b.call(this,d(a))}});Q.behavior={};Q.rebind=function(b,a){for(var c=1,d=arguments.length,f;++c<d;)b[f=arguments[c]]=y(b,a,a[f]);return b};var Qc="webkit ms moz Moz o O".split(" ");Q.dispatch=function(){for(var b=new m,a=-1,c=arguments.length;++a<c;)b[arguments[a]]=B(b);return b};m.prototype.on=function(b,a){var c=b.indexOf("."),d="";0<=c&&(d=b.slice(c+1),b=b.slice(0,c));if(b)return 2>arguments.length?this[b].on(d):
this[b].on(d,a);if(2===arguments.length){if(null==a)for(b in this)if(this.hasOwnProperty(b))this[b].on(d,null);return this}};Q.event=null;Q.requote=function(b){return b.replace(Bh,"\\$\x26")};var Bh=/[\\\^\$\*\+\?\|\[\]\(\)\.\{\}]/g,Qe={}.__proto__?function(b,a){b.__proto__=a}:function(b,a){for(var c in a)b[c]=a[c]},Bf=function(b,a){return a.querySelector(b)},ng=function(b,a){return a.querySelectorAll(b)},te=function(b,a){var c=b.matches||b[w(b,"matchesSelector")];te=function(b,a){return c.call(b,
a)};return te(b,a)};"function"===typeof Sizzle&&(Bf=function(b,a){return Sizzle(b,a)[0]||null},ng=Sizzle,te=Sizzle.matchesSelector);Q.selection=function(){return Q.select(mc.documentElement)};var kb=Q.selection.prototype=[];kb.select=function(b){var a=[],c,d,f,e;b=E(b);for(var k=-1,r=this.length;++k<r;){a.push(c=[]);c.parentNode=(f=this[k]).parentNode;for(var g=-1,l=f.length;++g<l;)(e=f[g])?(c.push(d=b.call(e,e.__data__,g,k)),d&&"__data__"in e&&(d.__data__=e.__data__)):c.push(null)}return H(a)};kb.selectAll=
function(b){var a=[],c,d;b=K(b);for(var f=-1,e=this.length;++f<e;)for(var k=this[f],r=-1,g=k.length;++r<g;)if(d=k[r])a.push(c=fc(b.call(d,d.__data__,r,f))),c.parentNode=d;return H(a)};var Kg={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};Q.ns={prefix:Kg,qualify:function(b){var a=b.indexOf(":"),c=b;0<=a&&"xmlns"!==(c=b.slice(0,a))&&(b=b.slice(a+1));return Kg.hasOwnProperty(c)?
{space:Kg[c],local:b}:b}};kb.attr=function(b,a){if(2>arguments.length){if("string"===typeof b){var c=this.node();b=Q.ns.qualify(b);return b.local?c.getAttributeNS(b.space,b.local):c.getAttribute(b)}for(a in b)this.each(I(a,b[a]));return this}return this.each(I(b,a))};kb.classed=function(b,a){if(2>arguments.length){if("string"===typeof b){var c=this.node(),d=(b=(b+"").trim().split(/^|\s+/)).length,f=-1;if(a=c.classList)for(;++f<d;){if(!a.contains(b[f]))return!1}else for(a=c.getAttribute("class");++f<
d;)if(!J(b[f]).test(a))return!1;return!0}for(a in b)this.each(L(a,b[a]));return this}return this.each(L(b,a))};kb.style=function(b,c,d){var f=arguments.length;if(3>f){if("string"!==typeof b){2>f&&(c="");for(d in b)this.each(N(d,b[d],c));return this}if(2>f)return f=this.node(),a(f).getComputedStyle(f,null).getPropertyValue(b);d=""}return this.each(N(b,c,d))};kb.property=function(b,a){if(2>arguments.length){if("string"===typeof b)return this.node()[b];for(a in b)this.each(O(a,b[a]));return this}return this.each(O(b,
a))};kb.text=function(b){return arguments.length?this.each("function"===typeof b?function(){var a=b.apply(this,arguments);this.textContent=null==a?"":a}:null==b?function(){this.textContent=""}:function(){this.textContent=b}):this.node().textContent};kb.html=function(b){return arguments.length?this.each("function"===typeof b?function(){var a=b.apply(this,arguments);this.innerHTML=null==a?"":a}:null==b?function(){this.innerHTML=""}:function(){this.innerHTML=b}):this.node().innerHTML};kb.append=function(b){b=
R(b);return this.select(function(){return this.appendChild(b.apply(this,arguments))})};kb.insert=function(b,a){b=R(b);a=E(a);return this.select(function(){return this.insertBefore(b.apply(this,arguments),a.apply(this,arguments)||null)})};kb.remove=function(){return this.each(T)};kb.data=function(b,a){function c(b,c){var d,f=b.length,e=c.length,k=Math.min(f,e),h=Array(e),q=Array(e),n=Array(f),v,p;if(a){k=new u;var A=Array(f),z;for(d=-1;++d<f;)if(v=b[d])k.has(z=a.call(v,v.__data__,d))?n[d]=v:k.set(z,
v),A[d]=z;for(d=-1;++d<e;)(v=k.get(z=a.call(c,p=c[d],d)))?!0!==v&&(h[d]=v,v.__data__=p):q[d]={__data__:p},k.set(z,!0);for(d=-1;++d<f;)d in A&&!0!==k.get(A[d])&&(n[d]=b[d])}else{for(d=-1;++d<k;)v=b[d],p=c[d],v?(v.__data__=p,h[d]=v):q[d]={__data__:p};for(;d<e;++d)q[d]={__data__:c[d]};for(;d<f;++d)n[d]=b[d]}q.update=h;q.parentNode=h.parentNode=n.parentNode=b.parentNode;r.push(q);g.push(h);l.push(n)}var d=-1,f=this.length,e,k;if(!arguments.length){for(b=Array(f=(e=this[0]).length);++d<f;)if(k=e[d])b[d]=
k.__data__;return b}var r=da([]),g=H([]),l=H([]);if("function"===typeof b)for(;++d<f;)c(e=this[d],b.call(e,e.parentNode.__data__,d));else for(;++d<f;)c(e=this[d],b);g.enter=function(){return r};g.exit=function(){return l};return g};kb.datum=function(b){return arguments.length?this.property("__data__",b):this.property("__data__")};kb.filter=function(b){var a=[],c,d,f;"function"!==typeof b&&(b=P(b));for(var e=0,k=this.length;e<k;e++){a.push(c=[]);c.parentNode=(d=this[e]).parentNode;for(var r=0,g=d.length;r<
g;r++)(f=d[r])&&b.call(f,f.__data__,r,e)&&c.push(f)}return H(a)};kb.order=function(){for(var b=-1,a=this.length;++b<a;)for(var c=this[b],d=c.length-1,f=c[d],e;0<=--d;)if(e=c[d])f&&f!==e.nextSibling&&f.parentNode.insertBefore(e,f),f=e;return this};kb.sort=function(b){b=S.apply(this,arguments);for(var a=-1,c=this.length;++a<c;)this[a].sort(b);return this.order()};kb.each=function(b){return ba(this,function(a,c,d){b.call(a,a.__data__,c,d)})};kb.call=function(b){var a=fc(arguments);b.apply(a[0]=this,
a);return this};kb.empty=function(){return!this.node()};kb.node=function(){for(var b=0,a=this.length;b<a;b++)for(var c=this[b],d=0,f=c.length;d<f;d++){var e=c[d];if(e)return e}return null};kb.size=function(){var b=0;ba(this,function(){++b});return b};var vd=[];Q.selection.enter=da;Q.selection.enter.prototype=vd;vd.append=kb.append;vd.empty=kb.empty;vd.node=kb.node;vd.call=kb.call;vd.size=kb.size;vd.select=function(b){for(var a=[],c,d,f,e,k,r=-1,g=this.length;++r<g;){f=(e=this[r]).update;a.push(c=
[]);c.parentNode=e.parentNode;for(var l=-1,h=e.length;++l<h;)(k=e[l])?(c.push(f[l]=d=b.call(e.parentNode,k.__data__,l,r)),d.__data__=k.__data__):c.push(null)}return H(a)};vd.insert=function(b,a){2>arguments.length&&(a=ca(this));return kb.insert.call(this,b,a)};Q.select=function(b){if("string"===typeof b){var a=[Bf(b,mc)];a.parentNode=mc.documentElement}else a=[b],a.parentNode=b&&(b.ownerDocument||b.document||b).documentElement;return H([a])};Q.selectAll=function(b){"string"===typeof b?(b=fc(ng(b,
mc)),b.parentNode=mc.documentElement):(b=fc(b),b.parentNode=null);return H([b])};kb.on=function(b,a,c){var d=arguments.length;if(3>d){if("string"!==typeof b){2>d&&(a=!1);for(c in b)this.each(Y(c,b[c],a));return this}if(2>d)return(d=this.node()["__on"+b])&&d._;c=!1}return this.each(Y(b,a,c))};var og=Q.map({mouseenter:"mouseover",mouseleave:"mouseout"});mc&&og.forEach(function(b){"on"+b in mc&&og.remove(b)});var Rc,Ng=0;Q.mouse=function(b){return na(b,D())};var pg=this.navigator&&/WebKit/.test(this.navigator.userAgent)?
-1:0;Q.touch=function(b,a,c){3>arguments.length&&(c=a,a=D().changedTouches);if(a)for(var d=0,f=a.length,e;d<f;++d)if((e=a[d]).identifier===c)return na(b,e)};Q.behavior.drag=function(){function b(){this.on("mousedown.drag",e).on("touchstart.drag",k)}function c(b,a,c,e,k){return function(){var r=Q.event.target.correspondingElement||Q.event.target,g=this.parentNode,l=d.of(this,arguments),h=0,q=b(),n=".drag"+(null==q?"":"-"+q),u=Q.select(c(r)).on(e+n,function(){var b=a(g,q);if(b){var c=b[0]-p[0];var d=
b[1]-p[1];h|=c|d;p=b;l({type:"drag",x:b[0]+A[0],y:b[1]+A[1],dx:c,dy:d})}}).on(k+n,function(){a(g,q)&&(u.on(e+n,null).on(k+n,null),v(h),l({type:"dragend"}))}),v=U(r),p=a(g,q);if(f){var A=f.apply(this,arguments);A=[A.x-p[0],A.y-p[1]]}else A=[0,0];l({type:"dragstart"})}}var d=G(b,"drag","dragstart","dragend"),f=null,e=c(x,Q.mouse,a,"mousemove","mouseup"),k=c(X,Q.touch,A,"touchmove","touchend");b.origin=function(a){if(!arguments.length)return f;f=a;return b};return Q.rebind(b,d,"on")};Q.touches=function(b,
a){2>arguments.length&&(a=D().touches);return a?fc(a).map(function(a){var c=na(b,a);c.identifier=a.identifier;return c}):[]};var Ua=Math.PI,Zb=2*Ua,vf=Zb-1E-6,ab=Ua/2,Wa=Ua/180,sb=180/Ua,wf=Math.SQRT2;Q.interpolateZoom=function(b,a){var c=b[0],d=b[1],f=b[2];b=a[2];var e=a[0]-c,k=a[1]-d,r=e*e+k*k;if(1E-12>r){var g=Math.log(b/f)/wf;b=function(b){return[c+b*e,d+b*k,f*Math.exp(wf*b*g)]}}else{var l=Math.sqrt(r);a=(b*b-f*f+4*r)/(4*f*l);b=(b*b-f*f-4*r)/(4*b*l);var h=Math.log(Math.sqrt(a*a+1)-a);g=(Math.log(Math.sqrt(b*
b+1)-b)-h)/wf;b=function(b){b*=g;var a=ua(h),r=wf*b+h;var q=((r=Math.exp(2*r))-1)/(r+1);var n=h;r=((n=Math.exp(n))-1/n)/2;q=f/(2*l)*(a*q-r);return[c+q*e,d+q*k,f*a/ua(wf*b+h)]}}b.duration=1E3*g;return b};Q.behavior.zoom=function(){function b(b){b.on("mousedown.zoom",h).on(Lg+".zoom",n).on("dblclick.zoom",u).on("touchstart.zoom",q)}function c(b){return[(b[0]-v.x)/v.k,(b[1]-v.y)/v.k]}function d(b){v.k=Math.max(x[0],Math.min(x[1],b))}function f(b,a){a=[a[0]*v.k+v.x,a[1]*v.k+v.y];v.x+=b[0]-a[0];v.y+=b[1]-
a[1]}function e(a,c,e,k){a.__chart__={x:v.x,y:v.y,k:v.k};d(Math.pow(2,k));f(A=c,e);a=Q.select(a);0<y&&(a=a.transition().duration(y));a.call(b.event)}function k(){E&&E.domain(F.range().map(function(b){return(b-v.x)/v.k}).map(F.invert));D&&D.domain(I.range().map(function(b){return(b-v.y)/v.k}).map(I.invert))}function r(b){ta++||b({type:"zoomstart"})}function g(b){k();b({type:"zoom",scale:v.k,translate:[v.x,v.y]})}function l(b){--ta||(b({type:"zoomend"}),A=null)}function h(){var b=this,d=J.of(b,arguments),
e=0,k=Q.select(a(b)).on("mousemove.zoom",function(){e=1;f(Q.mouse(b),h);g(d)}).on("mouseup.zoom",function(){k.on("mousemove.zoom",null).on("mouseup.zoom",null);q(e);l(d)}),h=c(Q.mouse(b)),q=U(b);ah.call(b);r(d)}function q(){function b(){var b=Q.touches(u);w=v.k;b.forEach(function(b){b.identifier in A&&(A[b.identifier]=c(b))});return b}function a(){var a=Q.event.target;Q.select(a).on(y,k).on(ta,n);B.push(a);a=Q.event.changedTouches;for(var c=0,d=a.length;c<d;++c)A[a[c].identifier]=null;c=b();d=Date.now();
1===c.length?(500>d-m&&(a=c[0],e(u,a,A[a.identifier],Math.floor(Math.log(v.k)/Math.LN2)+1),C()),m=d):1<c.length&&(a=c[0],d=c[1],c=a[0]-d[0],a=a[1]-d[1],z=c*c+a*a)}function k(){var b=Q.touches(u),a;ah.call(u);for(var c=0,e=b.length;c<e;++c,a=null){var k=b[c];if(a=A[k.identifier]){if(l)break;var r=k;var l=a}}if(a){var h=(h=k[0]-r[0])*h+(h=k[1]-r[1])*h;b=z&&Math.sqrt(h/z);r=[(r[0]+k[0])/2,(r[1]+k[1])/2];l=[(l[0]+a[0])/2,(l[1]+a[1])/2];d(b*w)}m=null;f(r,l);g(p)}function n(){if(Q.event.touches.length){for(var a=
Q.event.changedTouches,c=0,d=a.length;c<d;++c)delete A[a[c].identifier];for(var f in A)return void b()}Q.selectAll(B).on(x,null);F.on("mousedown.zoom",h).on("touchstart.zoom",q);E();l(p)}var u=this,p=J.of(u,arguments),A={},z=0,w,x=".zoom-"+Q.event.changedTouches[0].identifier,y="touchmove"+x,ta="touchend"+x,B=[],F=Q.select(u),E=U(u);a();r(p);F.on("mousedown.zoom",null).on("touchstart.zoom",a)}function n(){var b=J.of(this,arguments);B?clearTimeout(B):(ah.call(this),p=c(A=z||Q.mouse(this)),r(b));B=
setTimeout(function(){B=null;l(b)},50);C();d(Math.pow(2,.002*ig())*v.k);f(A,p);g(b)}function u(){var b=Q.mouse(this),a=Math.log(v.k)/Math.LN2;e(this,b,c(b),Q.event.shiftKey?Math.ceil(a)-1:Math.floor(a)+1)}var v={x:0,y:0,k:1},p,A,z,w=[960,500],x=bh,y=250,ta=0,B,m,J=G(b,"zoomstart","zoom","zoomend"),F,E,I,D;Lg||(Lg="onwheel"in mc?(ig=function(){return-Q.event.deltaY*(Q.event.deltaMode?120:1)},"wheel"):"onmousewheel"in mc?(ig=function(){return Q.event.wheelDelta},"mousewheel"):(ig=function(){return-Q.event.detail},
"MozMousePixelScroll"));b.event=function(b){b.each(function(){var b=J.of(this,arguments),a=v;xf?Q.select(this).transition().each("start.zoom",function(){v=this.__chart__||{x:0,y:0,k:1};r(b)}).tween("zoom:zoom",function(){var c=w[0],d=w[1],f=A?A[0]:c/2,e=A?A[1]:d/2,k=Q.interpolateZoom([(f-v.x)/v.k,(e-v.y)/v.k,c/v.k],[(f-a.x)/a.k,(e-a.y)/a.k,c/a.k]);return function(a){a=k(a);var d=c/a[2];this.__chart__=v={x:f-a[0]*d,y:e-a[1]*d,k:d};g(b)}}).each("interrupt.zoom",function(){l(b)}).each("end.zoom",function(){l(b)}):
(this.__chart__=v,r(b),g(b),l(b))})};b.translate=function(a){if(!arguments.length)return[v.x,v.y];v={x:+a[0],y:+a[1],k:v.k};k();return b};b.scale=function(a){if(!arguments.length)return v.k;v={x:v.x,y:v.y,k:null};d(+a);k();return b};b.scaleExtent=function(a){if(!arguments.length)return x;x=null==a?bh:[+a[0],+a[1]];return b};b.center=function(a){if(!arguments.length)return z;z=a&&[+a[0],+a[1]];return b};b.size=function(a){if(!arguments.length)return w;w=a&&[+a[0],+a[1]];return b};b.duration=function(a){if(!arguments.length)return y;
y=+a;return b};b.x=function(a){if(!arguments.length)return E;E=a;F=a.copy();v={x:0,y:0,k:1};return b};b.y=function(a){if(!arguments.length)return D;D=a;I=a.copy();v={x:0,y:0,k:1};return b};return Q.rebind(b,J,"on")};var bh=[0,Infinity],ig,Lg;Q.color=qa;qa.prototype.toString=function(){return this.rgb()+""};Q.hsl=sa;var Mg=sa.prototype=new qa;Mg.brighter=function(b){b=Math.pow(.7,arguments.length?b:1);return new sa(this.h,this.s,this.l/b)};Mg.darker=function(b){b=Math.pow(.7,arguments.length?b:1);
return new sa(this.h,this.s,b*this.l)};Mg.rgb=function(){return V(this.h,this.s,this.l)};Q.hcl=ia;var jg=ia.prototype=new qa;jg.brighter=function(b){return new ia(this.h,this.c,Math.min(100,this.l+ne*(arguments.length?b:1)))};jg.darker=function(b){return new ia(this.h,this.c,Math.max(0,this.l-ne*(arguments.length?b:1)))};jg.rgb=function(){return Ka(this.h,this.c,this.l).rgb()};Q.lab=wa;var ne=18,Re=.95047,qg=1,rg=1.08883,kg=wa.prototype=new qa;kg.brighter=function(b){return new wa(Math.min(100,this.l+
ne*(arguments.length?b:1)),this.a,this.b)};kg.darker=function(b){return new wa(Math.max(0,this.l-ne*(arguments.length?b:1)),this.a,this.b)};kg.rgb=function(){return Aa(this.l,this.a,this.b)};Q.rgb=ya;var oe=ya.prototype=new qa;oe.brighter=function(b){b=Math.pow(.7,arguments.length?b:1);var a=this.r,c=this.g,d=this.b;if(!a&&!c&&!d)return new ya(30,30,30);a&&30>a&&(a=30);c&&30>c&&(c=30);d&&30>d&&(d=30);return new ya(Math.min(255,a/b),Math.min(255,c/b),Math.min(255,d/b))};oe.darker=function(b){b=Math.pow(.7,
arguments.length?b:1);return new ya(b*this.r,b*this.g,b*this.b)};oe.hsl=function(){return aa(this.r,this.g,this.b)};oe.toString=function(){return"#"+xa(this.r)+xa(this.g)+xa(this.b)};var Cf=Q.map({aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,
cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,
floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,
lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,
moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,
sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074});Cf.forEach(function(b,a){Cf.set(b,new ya(a>>16,a>>8&255,a&255))});Q.functor=Ra;Q.xhr=rb(A);Q.dsv=function(b,a){function c(b,c,e){3>arguments.length&&(e=c,c=null);var k=Eb(b,
a,null==c?d:f(c),e);k.row=function(b){return arguments.length?k.response(null==(c=b)?d:f(b)):c};return k}function d(b){return c.parse(b.responseText)}function f(b){return function(a){return c.parse(a.responseText,b)}}function e(a){return a.map(k).join(b)}function k(b){return r.test(b)?'"'+b.replace(/"/g,'""')+'"':b}var r=new RegExp('["'+b+"\n]"),g=b.charCodeAt(0);c.parse=function(b,a){var d;return c.parseRows(b,function(b,c){if(d)return d(b,c-1);var f=new Function("d","return {"+b.map(function(b,
a){return JSON.stringify(b)+": d["+a+"]"}).join(",")+"}");d=a?function(b,c){return a(f(b),c)}:f})};c.parseRows=function(b,a){function c(){if(r>=k)return f;if(q)return q=!1,d;var a=r;if(34===b.charCodeAt(a)){for(var c=a;c++<k;)if(34===b.charCodeAt(c)){if(34!==b.charCodeAt(c+1))break;++c}r=c+2;var e=b.charCodeAt(c+1);13===e?(q=!0,10===b.charCodeAt(c+2)&&++r):10===e&&(q=!0);return b.slice(a+1,c).replace(/""/g,'"')}for(;r<k;){e=b.charCodeAt(r++);c=1;if(10===e)q=!0;else if(13===e)q=!0,10===b.charCodeAt(r)&&
(++r,++c);else if(e!==g)continue;return b.slice(a,r-c)}return b.slice(a)}for(var d={},f={},e=[],k=b.length,r=0,l=0,h,q;(h=c())!==f;){for(var n=[];h!==d&&h!==f;)n.push(h),h=c();a&&null==(n=a(n,l++))||e.push(n)}return e};c.format=function(a){if(Array.isArray(a[0]))return c.formatRows(a);var d=new z,f=[];a.forEach(function(b){for(var a in b)d.has(a)||f.push(d.add(a))});return[f.map(k).join(b)].concat(a.map(function(a){return f.map(function(b){return k(a[b])}).join(b)})).join("\n")};c.formatRows=function(b){return b.map(e).join("\n")};
return c};Q.csv=Q.dsv(",","text/csv");Q.tsv=Q.dsv("\t","text/tab-separated-values");var Td,Se,wb,wd,xd=this[w(this,"requestAnimationFrame")]||function(b){setTimeout(b,17)};Q.timer=function(){pb.apply(this,arguments)};Q.timer.flush=function(){Sa();Ya()};Q.round=function(b,a){return a?Math.round(b*(a=Math.pow(10,a)))/a:Math.round(b)};var lg="y z a f p n  m  k M G T P E Z Y".split(" ").map(function(b,a){var c=Math.pow(10,3*Va(8-a));return{scale:8<a?function(b){return b/c}:function(b){return b*c},symbol:b}});
Q.formatPrefix=function(b,a){var c=0;if(b=+b)0>b&&(b*=-1),a&&(b=Q.round(b,ja(b,a))),c=1+Math.floor(1E-12+Math.log(b)/Math.LN10),c=Math.max(-24,Math.min(24,3*Math.floor((c-1)/3)));return lg[8+c/3]};var Te=/(?:([^{])?([<>=^]))?([+\- ])?([$#])?(0)?(\d+)?(,)?(\.-?\d+)?([a-z%])?/i,sg=Q.map({b:function(b){return b.toString(2)},c:function(b){return String.fromCharCode(b)},o:function(b){return b.toString(8)},x:function(b){return b.toString(16)},X:function(b){return b.toString(16).toUpperCase()},g:function(b,
a){return b.toPrecision(a)},e:function(b,a){return b.toExponential(a)},f:function(b,a){return b.toFixed(a)},r:function(b,a){return(b=Q.round(b,ja(b,a))).toFixed(Math.max(0,Math.min(20,ja(b*(1+1E-15),a))))}}),Da=Q.time={},Qb=Date;Pb.prototype={getDate:function(){return this._.getUTCDate()},getDay:function(){return this._.getUTCDay()},getFullYear:function(){return this._.getUTCFullYear()},getHours:function(){return this._.getUTCHours()},getMilliseconds:function(){return this._.getUTCMilliseconds()},
getMinutes:function(){return this._.getUTCMinutes()},getMonth:function(){return this._.getUTCMonth()},getSeconds:function(){return this._.getUTCSeconds()},getTime:function(){return this._.getTime()},getTimezoneOffset:function(){return 0},valueOf:function(){return this._.valueOf()},setDate:function(){Pd.setUTCDate.apply(this._,arguments)},setDay:function(){Pd.setUTCDay.apply(this._,arguments)},setFullYear:function(){Pd.setUTCFullYear.apply(this._,arguments)},setHours:function(){Pd.setUTCHours.apply(this._,
arguments)},setMilliseconds:function(){Pd.setUTCMilliseconds.apply(this._,arguments)},setMinutes:function(){Pd.setUTCMinutes.apply(this._,arguments)},setMonth:function(){Pd.setUTCMonth.apply(this._,arguments)},setSeconds:function(){Pd.setUTCSeconds.apply(this._,arguments)},setTime:function(){Pd.setTime.apply(this._,arguments)}};var Pd=Date.prototype;Da.year=Yb(function(b){b=Da.day(b);b.setMonth(0,1);return b},function(b,a){b.setFullYear(b.getFullYear()+a)},function(b){return b.getFullYear()});Da.years=
Da.year.range;Da.years.utc=Da.year.utc.range;Da.day=Yb(function(b){var a=new Qb(2E3,0);a.setFullYear(b.getFullYear(),b.getMonth(),b.getDate());return a},function(b,a){b.setDate(b.getDate()+a)},function(b){return b.getDate()-1});Da.days=Da.day.range;Da.days.utc=Da.day.utc.range;Da.dayOfYear=function(b){var a=Da.year(b);return Math.floor((b-a-6E4*(b.getTimezoneOffset()-a.getTimezoneOffset()))/864E5)};"sunday monday tuesday wednesday thursday friday saturday".split(" ").forEach(function(b,a){a=7-a;var c=
Da[b]=Yb(function(b){(b=Da.day(b)).setDate(b.getDate()-(b.getDay()+a)%7);return b},function(b,a){b.setDate(b.getDate()+7*Math.floor(a))},function(b){var c=Da.year(b).getDay();return Math.floor((Da.dayOfYear(b)+(c+a)%7)/7)-(c!==a)});Da[b+"s"]=c.range;Da[b+"s"].utc=c.utc.range;Da[b+"OfYear"]=function(b){var c=Da.year(b).getDay();return Math.floor((Da.dayOfYear(b)+(c+a)%7)/7)}});Da.week=Da.sunday;Da.weeks=Da.sunday.range;Da.weeks.utc=Da.sunday.utc.range;Da.weekOfYear=Da.sundayOfYear;var Pg={"-":"",_:" ",
0:"0"},ta=/^\s*\d+/,Hh=/^%/;Q.locale=function(b){return{numberFormat:qb(b),timeFormat:Lb(b)}};var Oh=Q.locale({decimal:".",thousands:",",grouping:[3],currency:["$",""],dateTime:"%a %b %e %X %Y",date:"%m/%d/%Y",time:"%H:%M:%S",periods:["AM","PM"],days:"Sunday Monday Tuesday Wednesday Thursday Friday Saturday".split(" "),shortDays:"Sun Mon Tue Wed Thu Fri Sat".split(" "),months:"January February March April May June July August September October November December".split(" "),shortMonths:"Jan Feb Mar Apr May Jun Jul Aug Sep Oct Nov Dec".split(" ")});
Q.format=Oh.numberFormat;Q.geo={};Bb.prototype={s:0,t:0,add:function(b){yc(b,this.t,Vc);yc(Vc.s,this.s,this);this.s?this.t+=Vc.t:this.s=Vc.t},reset:function(){this.s=this.t=0},valueOf:function(){return this.s}};var Vc=new Bb;Q.geo.stream=function(b,a){if(b&&ch.hasOwnProperty(b.type))ch[b.type](b,a);else Cc(b,a)};var ch={Feature:function(b,a){Cc(b.geometry,a)},FeatureCollection:function(b,a){b=b.features;for(var c=-1,d=b.length;++c<d;)Cc(b[c].geometry,a)}},be={Sphere:function(b,a){a.sphere()},Point:function(b,
a){b=b.coordinates;a.point(b[0],b[1],b[2])},MultiPoint:function(b,a){for(var c=b.coordinates,d=-1,f=c.length;++d<f;)b=c[d],a.point(b[0],b[1],b[2])},LineString:function(b,a){Zd(b.coordinates,a,0)},MultiLineString:function(b,a){b=b.coordinates;for(var c=-1,d=b.length;++c<d;)Zd(b[c],a,0)},Polygon:function(b,a){Wc(b.coordinates,a)},MultiPolygon:function(b,a){b=b.coordinates;for(var c=-1,d=b.length;++c<d;)Wc(b[c],a)},GeometryCollection:function(b,a){b=b.geometries;for(var c=-1,d=b.length;++c<d;)Cc(b[c],
a)}};Q.geo.area=function(b){yf=0;Q.geo.stream(b,Gc);return yf};var yf,yd=new Bb,Gc={sphere:function(){yf+=4*Ua},point:x,lineStart:x,lineEnd:x,polygonStart:function(){yd.reset();Gc.lineStart=$d},polygonEnd:function(){var b=2*yd;yf+=0>b?4*Ua+b:b;Gc.lineStart=Gc.lineEnd=Gc.point=x}};Q.geo.bounds=function(){function b(b,a){x.push(y=[h=b,n=b]);a<q&&(q=a);a>u&&(u=a)}function a(a,c){var d=tc([a*Wa,c*Wa]);if(z){var f=ma(z,d);f=ma([f[1],-f[0],0],f);Yc(f);f=sd(f);var e=a-v,k=0<e?1:-1,g=f[0]*sb*k;e=180<Va(e);
e^(k*v<g&&g<k*a)?(c=f[1]*sb,c>u&&(u=c)):(g=(g+360)%360-180,e^(k*v<g&&g<k*a))?(c=-f[1]*sb,c<q&&(q=c)):(c<q&&(q=c),c>u&&(u=c));e?a<v?r(h,a)>r(h,n)&&(n=a):r(a,n)>r(h,n)&&(h=a):n>=h?(a<h&&(h=a),a>n&&(n=a)):a>v?r(h,a)>r(h,n)&&(n=a):r(a,n)>r(h,n)&&(h=a)}else b(a,c);z=d;v=a}function c(){ta.point=a}function d(){y[0]=h;y[1]=n;ta.point=b;z=null}function f(b,c){if(z){var d=b-v;w+=180<Va(d)?d+(0<d?360:-360):d}else p=b,A=c;Gc.point(b,c);a(b,c)}function e(){Gc.lineStart()}function k(){f(p,A);Gc.lineEnd();1E-6<
Va(w)&&(h=-(n=180));y[0]=h;y[1]=n;z=null}function r(b,a){return 0>(a-=b)?a+360:a}function g(b,a){return b[0]-a[0]}function l(b,a){return a[0]<=a[1]?a[0]<=b&&b<=a[1]:b<a[0]||a[1]<b}var h,q,n,u,v,p,A,z,w,x,y,ta={point:b,lineStart:c,lineEnd:d,polygonStart:function(){ta.point=f;ta.lineStart=e;ta.lineEnd=k;w=0;Gc.polygonStart()},polygonEnd:function(){Gc.polygonEnd();ta.point=b;ta.lineStart=c;ta.lineEnd=d;0>yd?(h=-(n=180),q=-(u=90)):1E-6<w?u=90:-1E-6>w&&(q=-90);y[0]=h;y[1]=n}};return function(b){u=n=-(h=
q=Infinity);x=[];Q.geo.stream(b,ta);if(b=x.length){x.sort(g);for(var a=1,c=x[0],d,f=[c];a<b;++a)d=x[a],l(d[0],c)||l(d[1],c)?(r(c[0],d[1])>r(c[0],c[1])&&(c[1]=d[1]),r(d[0],c[1])>r(c[0],c[1])&&(c[0]=d[0])):f.push(c=d);var e=-Infinity,k;b=f.length-1;a=0;for(c=f[b];a<=b;c=d,++a)d=f[a],(k=r(c[1],d[0]))>e&&(e=k,h=d[0],n=c[1])}x=y=null;return Infinity===h||Infinity===q?[[NaN,NaN],[NaN,NaN]]:[[h,q],[n,u]]}}();Q.geo.centroid=function(b){tg=Qg=ce=de=ee=ue=ve=Ud=Df=Ef=we=0;Q.geo.stream(b,zd);b=Df;var a=Ef,c=
we,d=b*b+a*a+c*c;return 1E-12>d&&(b=ue,a=ve,c=Ud,1E-6>Qg&&(b=ce,a=de,c=ee),d=b*b+a*a+c*c,1E-12>d)?[NaN,NaN]:[Math.atan2(a,b)*sb,oa(c/Math.sqrt(d))*sb]};var tg,Qg,ce,de,ee,ue,ve,Ud,Df,Ef,we,zd={sphere:x,point:Rd,lineStart:ae,lineEnd:$c,polygonStart:function(){zd.lineStart=td},polygonEnd:function(){zd.lineStart=ae}},Ih=re(Qa,function(b){var a=NaN,c=NaN,d=NaN,f;return{lineStart:function(){b.lineStart();f=1},point:function(e,k){var r=0<e?Ua:-Ua,g=Va(e-a);if(1E-6>Va(g-Ua))b.point(a,c=0<(c+k)/2?ab:-ab),
b.point(d,c),b.lineEnd(),b.lineStart(),b.point(r,c),b.point(e,c),f=0;else if(d!==r&&g>=Ua){1E-6>Va(a-d)&&(a-=1E-6*d);1E-6>Va(e-r)&&(e-=1E-6*r);g=a;var l=c,h=e,q,n,u=Math.sin(g-h);c=1E-6<Va(u)?Math.atan((Math.sin(l)*(n=Math.cos(k))*Math.sin(h)-Math.sin(k)*(q=Math.cos(l))*Math.sin(g))/(q*n*u)):(l+k)/2;b.point(d,c);b.lineEnd();b.lineStart();b.point(r,c);f=0}b.point(a=e,c=k);d=r},lineEnd:function(){b.lineEnd();a=c=NaN},clean:function(){return 2-f}}},function(b,a,c,d){null==b?(c*=ab,d.point(-Ua,c),d.point(0,
c),d.point(Ua,c),d.point(Ua,0),d.point(Ua,-c),d.point(0,-c),d.point(-Ua,-c),d.point(-Ua,0),d.point(-Ua,c)):1E-6<Va(b[0]-a[0])?(b=b[0]<a[0]?Ua:-Ua,c=c*b/2,d.point(-b,c),d.point(0,c),d.point(b,c)):d.point(a[0],a[1])},[-Ua,-Ua/2]);Q.geo.clipExtent=function(){var b,a,c,d,f,e,k={stream:function(b){f&&(f.valid=!1);f=e(b);f.valid=!0;return f},extent:function(r){if(!arguments.length)return[[b,a],[c,d]];e=bb(b=+r[0][0],a=+r[0][1],c=+r[1][0],d=+r[1][1]);f&&(f.valid=!1,f=null);return k}};return k.extent([[0,
0],[960,500]])};(Q.geo.conicEqualArea=function(){return Pc(Sd)}).raw=Sd;Q.geo.albers=function(){return Q.geo.conicEqualArea().rotate([96,0]).center([-.6,38.7]).parallels([29.5,45.5]).scale(1070)};Q.geo.albersUsa=function(){function b(b){var a=b[0];b=b[1];f=null;(k(a,b),f)||(r(a,b),f)||g(a,b);return f}var a=Q.geo.albers(),c=Q.geo.conicEqualArea().rotate([154,0]).center([-2,58.5]).parallels([55,65]),d=Q.geo.conicEqualArea().rotate([157,0]).center([-3,19.9]).parallels([8,18]),f,e={point:function(b,a){f=
[b,a]}},k,r,g;b.invert=function(b){var f=a.scale(),e=a.translate(),k=(b[0]-e[0])/f;f=(b[1]-e[1])/f;return(.12<=f&&.234>f&&-.425<=k&&-.214>k?c:.166<=f&&.234>f&&-.214<=k&&-.115>k?d:a).invert(b)};b.stream=function(b){var f=a.stream(b),e=c.stream(b),k=d.stream(b);return{point:function(b,a){f.point(b,a);e.point(b,a);k.point(b,a)},sphere:function(){f.sphere();e.sphere();k.sphere()},lineStart:function(){f.lineStart();e.lineStart();k.lineStart()},lineEnd:function(){f.lineEnd();e.lineEnd();k.lineEnd()},polygonStart:function(){f.polygonStart();
e.polygonStart();k.polygonStart()},polygonEnd:function(){f.polygonEnd();e.polygonEnd();k.polygonEnd()}}};b.precision=function(f){if(!arguments.length)return a.precision();a.precision(f);c.precision(f);d.precision(f);return b};b.scale=function(f){if(!arguments.length)return a.scale();a.scale(f);c.scale(.35*f);d.scale(f);return b.translate(a.translate())};b.translate=function(f){if(!arguments.length)return a.translate();var l=a.scale(),h=+f[0],q=+f[1];k=a.translate(f).clipExtent([[h-.455*l,q-.238*l],
[h+.455*l,q+.238*l]]).stream(e).point;r=c.translate([h-.307*l,q+.201*l]).clipExtent([[h-.425*l+1E-6,q+.12*l+1E-6],[h-.214*l-1E-6,q+.234*l-1E-6]]).stream(e).point;g=d.translate([h-.205*l,q+.212*l]).clipExtent([[h-.214*l+1E-6,q+.166*l+1E-6],[h-.115*l-1E-6,q+.234*l-1E-6]]).stream(e).point;return b};return b.scale(1070)};var Ch,oh,xe={point:x,lineStart:x,lineEnd:x,polygonStart:function(){oh=0;xe.lineStart=Ve},polygonEnd:function(){xe.lineStart=xe.lineEnd=xe.point=x;Ch+=Va(oh/2)}},dh,eh,fh,gh,ii={point:function(b,
a){b<dh&&(dh=b);b>fh&&(fh=b);a<eh&&(eh=a);a>gh&&(gh=a)},lineStart:x,lineEnd:x,polygonStart:x,polygonEnd:x},Bd={point:lb,lineStart:Mb,lineEnd:Rb,polygonStart:function(){Bd.lineStart=oc},polygonEnd:function(){Bd.point=lb;Bd.lineStart=Mb;Bd.lineEnd=Rb}};Q.geo.path=function(){function b(b){b&&("function"===typeof c&&k.pointRadius(+c.apply(this,arguments)),r&&r.valid||(r=e(k)),Q.geo.stream(b,r));return k.result()}function a(){r=null;return b}var c=4.5,d,f,e,k,r;b.area=function(b){Ch=0;Q.geo.stream(b,e(xe));
return Ch};b.centroid=function(b){ce=de=ee=ue=ve=Ud=Df=Ef=we=0;Q.geo.stream(b,e(Bd));return we?[Df/we,Ef/we]:Ud?[ue/Ud,ve/Ud]:ee?[ce/ee,de/ee]:[NaN,NaN]};b.bounds=function(b){fh=gh=-(dh=eh=Infinity);Q.geo.stream(b,e(ii));return[[dh,eh],[fh,gh]]};b.projection=function(b){if(!arguments.length)return d;e=(d=b)?b.stream||We(b):A;return a()};b.context=function(b){if(!arguments.length)return f;k=null==(f=b)?new Ff:new ge(b);"function"!==typeof c&&k.pointRadius(c);return a()};b.pointRadius=function(a){if(!arguments.length)return c;
c="function"===typeof a?a:(k.pointRadius(+a),+a);return b};return b.projection(Q.geo.albersUsa()).context(null)};Q.geo.transform=function(b){return{stream:function(a){a=new jb(a);for(var c in b)a[c]=b[c];return a}}};jb.prototype={point:function(b,a){this.stream.point(b,a)},sphere:function(){this.stream.sphere()},lineStart:function(){this.stream.lineStart()},lineEnd:function(){this.stream.lineEnd()},polygonStart:function(){this.stream.polygonStart()},polygonEnd:function(){this.stream.polygonEnd()}};
Q.geo.projection=ad;Q.geo.projectionMutator=fe;(Q.geo.equirectangular=function(){return ad(Cd)}).raw=Cd.invert=Cd;Q.geo.rotation=function(b){function a(a){a=b(a[0]*Wa,a[1]*Wa);return a[0]*=sb,a[1]*=sb,a}b=Ic(b[0]%360*Wa,b[1]*Wa,2<b.length?b[2]*Wa:0);a.invert=function(a){a=b.invert(a[0]*Wa,a[1]*Wa);return a[0]*=sb,a[1]*=sb,a};return a};Dd.invert=Cd;Q.geo.circle=function(){function b(){var b="function"===typeof a?a.apply(this,arguments):a,c=Ic(-b[0]*Wa,-b[1]*Wa,0).invert,d=[];f(null,null,1,{point:function(b,
a){d.push(b=c(b,a));b[0]*=sb;b[1]*=sb}});return{type:"Polygon",coordinates:[d]}}var a=[0,0],c,d=6,f;b.origin=function(c){if(!arguments.length)return a;a=c;return b};b.angle=function(a){if(!arguments.length)return c;f=Ue((c=+a)*Wa,d*Wa);return b};b.precision=function(a){if(!arguments.length)return d;f=Ue(c*Wa,(d=+a)*Wa);return b};return b.angle(90)};Q.geo.distance=function(b,a){var c=(a[0]-b[0])*Wa,d=b[1]*Wa,f=a[1]*Wa;a=Math.cos(c);b=Math.sin(d);d=Math.cos(d);var e=Math.sin(f);f=Math.cos(f);var k;
return Math.atan2(Math.sqrt((k=f*Math.sin(c))*k+(k=d*e-b*f*a)*k),b*e+d*f*a)};Q.geo.graticule=function(){function b(){return{type:"MultiLineString",coordinates:a()}}function a(){return Q.range(Math.ceil(e/n)*n,f,n).map(A).concat(Q.range(Math.ceil(l/u)*u,g,u).map(z)).concat(Q.range(Math.ceil(d/h)*h,c,h).filter(function(b){return 1E-6<Va(b%n)}).map(v)).concat(Q.range(Math.ceil(r/q)*q,k,q).filter(function(b){return 1E-6<Va(b%u)}).map(p))}var c,d,f,e,k,r,g,l,h=10,q=h,n=90,u=360,v,p,A,z,w=2.5;b.lines=function(){return a().map(function(b){return{type:"LineString",
coordinates:b}})};b.outline=function(){return{type:"Polygon",coordinates:[A(e).concat(z(g).slice(1),A(f).reverse().slice(1),z(l).reverse().slice(1))]}};b.extent=function(a){return arguments.length?b.majorExtent(a).minorExtent(a):b.minorExtent()};b.majorExtent=function(a){if(!arguments.length)return[[e,l],[f,g]];e=+a[0][0];f=+a[1][0];l=+a[0][1];g=+a[1][1];e>f&&(a=e,e=f,f=a);l>g&&(a=l,l=g,g=a);return b.precision(w)};b.minorExtent=function(a){if(!arguments.length)return[[d,r],[c,k]];d=+a[0][0];c=+a[1][0];
r=+a[0][1];k=+a[1][1];d>c&&(a=d,d=c,c=a);r>k&&(a=r,r=k,k=a);return b.precision(w)};b.step=function(a){return arguments.length?b.majorStep(a).minorStep(a):b.minorStep()};b.majorStep=function(a){if(!arguments.length)return[n,u];n=+a[0];u=+a[1];return b};b.minorStep=function(a){if(!arguments.length)return[h,q];h=+a[0];q=+a[1];return b};b.precision=function(a){if(!arguments.length)return w;w=+a;v=Hf(r,k,90);p=If(d,c,w);A=Hf(l,g,90);z=If(e,f,w);return b};return b.majorExtent([[-180,-89.999999],[180,89.999999]]).minorExtent([[-180,
-80.000001],[180,80.000001]])};Q.geo.greatArc=function(){function b(){return{type:"LineString",coordinates:[c||a.apply(this,arguments),f||d.apply(this,arguments)]}}var a=Ye,c,d=Ze,f;b.distance=function(){return Q.geo.distance(c||a.apply(this,arguments),f||d.apply(this,arguments))};b.source=function(d){if(!arguments.length)return a;a=d;c="function"===typeof d?null:d;return b};b.target=function(a){if(!arguments.length)return d;d=a;f="function"===typeof a?null:a;return b};b.precision=function(){return arguments.length?
b:0};return b};Q.geo.interpolate=function(b,a){return Jf(b[0]*Wa,b[1]*Wa,a[0]*Wa,a[1]*Wa)};Q.geo.length=function(b){Dh=0;Q.geo.stream(b,mg);return Dh};var Dh,mg={sphere:x,point:x,lineStart:function(){function b(b,f){var e=Math.sin(f*=Wa);f=Math.cos(f);var k=Va((b*=Wa)-a),r=Math.cos(k);Dh+=Math.atan2(Math.sqrt((k=f*Math.sin(k))*k+(k=d*e-c*f*r)*k),c*e+d*f*r);a=b;c=e;d=f}var a,c,d;mg.point=function(f,e){a=f*Wa;c=Math.sin(e*=Wa);d=Math.cos(e);mg.point=b};mg.lineEnd=function(){mg.point=mg.lineEnd=x}},
lineEnd:x,polygonStart:x,polygonEnd:x},Ph=bd(function(b){return Math.sqrt(2/(1+b))},function(b){return 2*Math.asin(b/2)});(Q.geo.azimuthalEqualArea=function(){return ad(Ph)}).raw=Ph;var Qh=bd(function(b){return(b=Math.acos(b))&&b/Math.sin(b)},A);(Q.geo.azimuthalEquidistant=function(){return ad(Qh)}).raw=Qh;(Q.geo.conicConformal=function(){return Pc(Kf)}).raw=Kf;(Q.geo.conicEquidistant=function(){return Pc(Ed)}).raw=Ed;var Rh=bd(function(b){return 1/b},Math.atan);(Q.geo.gnomonic=function(){return ad(Rh)}).raw=
Rh;ib.invert=function(b,a){return[b,2*Math.atan(Math.exp(a))-ab]};(Q.geo.mercator=function(){return Fd(ib)}).raw=ib;var Sh=bd(function(){return 1},Math.asin);(Q.geo.orthographic=function(){return ad(Sh)}).raw=Sh;var Th=bd(function(b){return 1/(1+b)},function(b){return 2*Math.atan(b)});(Q.geo.stereographic=function(){return ad(Th)}).raw=Th;Vd.invert=function(b,a){return[-a,2*Math.atan(Math.exp(b))-ab]};(Q.geo.transverseMercator=function(){var b=Fd(Vd),a=b.center,c=b.rotate;b.center=function(b){return b?
a([-b[1],b[0]]):(b=a(),[b[1],-b[0]])};b.rotate=function(b){return b?c([b[0],b[1],2<b.length?b[2]+90:90]):(b=c(),[b[0],b[1],b[2]-90])};return c([0,0,90])}).raw=Vd;Q.geom={};Q.geom.hull=function(b){function a(b){if(3>b.length)return[];var a=Ra(c),f=Ra(d),e,k=b.length,r=[],g=[];for(e=0;e<k;e++)r.push([+a.call(this,b[e],e),+f.call(this,b[e],e),e]);r.sort(je);for(e=0;e<k;e++)g.push([r[e][0],-r[e][1]]);a=ye(r);g=ye(g);f=g[0]===a[0];k=g[g.length-1]===a[a.length-1];var l=[];for(e=a.length-1;0<=e;--e)l.push(b[r[a[e]][2]]);
for(e=+f;e<g.length-k;++e)l.push(b[r[g[e]][2]]);return l}var c=cd,d=ie;if(arguments.length)return a(b);a.x=function(b){return arguments.length?(c=b,a):c};a.y=function(b){return arguments.length?(d=b,a):d};return a};Q.geom.polygon=function(b){Qe(b,hh);return b};var hh=Q.geom.polygon.prototype=[];hh.area=function(){for(var b=-1,a=this.length,c,d=this[a-1],f=0;++b<a;)c=d,d=this[b],f+=c[1]*d[0]-c[0]*d[1];return.5*f};hh.centroid=function(b){var a=-1,c=this.length,d=0,f=0,e=this[c-1];for(arguments.length||
(b=-1/(6*this.area()));++a<c;){var k=e;e=this[a];var r=k[0]*e[1]-e[0]*k[1];d+=(k[0]+e[0])*r;f+=(k[1]+e[1])*r}return[d*b,f*b]};hh.clip=function(b){for(var a,c=ze(b),d=-1,f=this.length-ze(this),e,k,r=this[f-1],g,l,h;++d<f;){a=b.slice();b.length=0;g=this[d];l=a[(k=a.length-c)-1];for(e=-1;++e<k;)h=a[e],Gd(h,r,g)?(Gd(l,r,g)||b.push(Hd(l,h,r,g)),b.push(h)):Gd(l,r,g)&&b.push(Hd(l,h,r,g)),l=h;c&&b.push(b[0]);r=g}return b};var Nf,cf,Mf,Jh=[],ph,ug,Kh=[];Jc.prototype.prepare=function(){for(var b=this.edges,
a=b.length,c;a--;)c=b[a].edge,c.b&&c.a||b.splice(a,1);b.sort($b);return b.length};ac.prototype={start:function(){return this.edge.l===this.site?this.edge.a:this.edge.b},end:function(){return this.edge.l===this.site?this.edge.b:this.edge.a}};ra.prototype={insert:function(b,a){var c;if(b){a.P=b;if(a.N=b.N)b.N.P=a;b.N=a;if(b.R){for(b=b.R;b.L;)b=b.L;b.L=a}else b.R=a;var d=b}else this._?(b=fd(this._),a.P=null,a.N=b,b.P=b.L=a,d=b):(a.P=a.N=null,this._=a,d=null);a.L=a.R=null;a.U=d;a.C=!0;for(b=a;d&&d.C;)a=
d.U,d===a.L?(c=a.R)&&c.C?(d.C=c.C=!1,a.C=!0,b=a):(b===d.R&&(eb(this,d),b=d,d=b.U),d.C=!1,a.C=!0,ob(this,a)):(c=a.L)&&c.C?(d.C=c.C=!1,a.C=!0,b=a):(b===d.L&&(ob(this,d),b=d,d=b.U),d.C=!1,a.C=!0,eb(this,a)),d=b.U;this._.C=!1},remove:function(b){b.N&&(b.N.P=b.P);b.P&&(b.P.N=b.N);b.N=b.P=null;var a=b.U,c=b.L,d=b.R;var f=c?d?fd(d):c:d;a?a.L===b?a.L=f:a.R=f:this._=f;if(c&&d){var e=f.C;f.C=b.C;f.L=c;c.U=f;f!==d?(a=f.U,f.U=b.U,b=f.R,a.L=b,f.R=d,d.U=f):(f.U=a,a=f,b=f.R)}else e=b.C,b=f;b&&(b.U=a);if(!e)if(b&&
b.C)b.C=!1;else{do{if(b===this._)break;if(b===a.L){if(b=a.R,b.C&&(b.C=!1,a.C=!0,eb(this,a),b=a.R),b.L&&b.L.C||b.R&&b.R.C){b.R&&b.R.C||(b.L.C=!1,b.C=!0,ob(this,b),b=a.R);b.C=a.C;a.C=b.R.C=!1;eb(this,a);b=this._;break}}else if(b=a.L,b.C&&(b.C=!1,a.C=!0,ob(this,a),b=a.L),b.L&&b.L.C||b.R&&b.R.C){b.L&&b.L.C||(b.R.C=!1,b.C=!0,eb(this,b),b=a.L);b.C=a.C;a.C=b.L.C=!1;ob(this,a);b=this._;break}b.C=!0;b=a;a=a.U}while(!b.C);b&&(b.C=!1)}}};Q.geom.voronoi=function(b){function a(b){var a=Array(b.length),d=r[0][0],
f=r[0][1],e=r[1][0],k=r[1][1];za(c(b),r).cells.forEach(function(c,r){var g=c.edges;c=c.site;(a[r]=g.length?g.map(function(b){b=b.start();return[b.x,b.y]}):c.x>=d&&c.x<=e&&c.y>=f&&c.y<=k?[[d,k],[e,k],[e,f],[d,f]]:[]).point=b[r]});return a}function c(b){return b.map(function(b,a){return{x:1E-6*Math.round(e(b,a)/1E-6),y:1E-6*Math.round(k(b,a)/1E-6),i:a}})}var d=cd,f=ie,e=d,k=f,r=ih;if(b)return a(b);a.links=function(b){return za(c(b)).edges.filter(function(b){return b.l&&b.r}).map(function(a){return{source:b[a.l.i],
target:b[a.r.i]}})};a.triangles=function(b){var a=[];za(c(b)).cells.forEach(function(c,d){var f=c.site;c=c.edges.sort($b);var e=-1,k=c.length,r=c[k-1].edge;for(r=r.l===f?r.r:r.l;++e<k;){var g=r;r=c[e].edge;r=r.l===f?r.r:r.l;d<g.i&&d<r.i&&0>(f.x-r.x)*(g.y-f.y)-(f.x-g.x)*(r.y-f.y)&&a.push([b[d],b[g.i],b[r.i]])}});return a};a.x=function(b){return arguments.length?(e=Ra(d=b),a):d};a.y=function(b){return arguments.length?(k=Ra(f=b),a):f};a.clipExtent=function(b){if(!arguments.length)return r===ih?null:
r;r=null==b?ih:b;return a};a.size=function(b){return arguments.length?a.clipExtent(b&&[[0,0],b]):r===ih?null:r&&r[1]};return a};var ih=[[-1E6,-1E6],[1E6,1E6]];Q.geom.delaunay=function(b){return Q.geom.voronoi().triangles(b)};Q.geom.quadtree=function(b,a,c,d,f){function e(b){function e(b,a,c,d,f,e,k,r){if(!isNaN(c)&&!isNaN(d))if(b.leaf){var g=b.x,h=b.y;if(null!=g){if(!(.01>Va(g-c)+Va(h-d))){var q=b.point;b.x=b.y=b.point=null;l(b,q,g,h,f,e,k,r)}l(b,a,c,d,f,e,k,r)}else b.x=c,b.y=d,b.point=a}else l(b,
a,c,d,f,e,k,r)}function l(b,a,c,d,f,k,r,g){var l=.5*(f+r),h=.5*(k+g),q=c>=l,n=d>=h,u=n<<1|q;b.leaf=!1;b=b.nodes[u]||(b.nodes[u]=Sb());q?f=l:r=l;n?k=h:g=h;e(b,a,c,d,f,k,r,g)}var h=Ra(k),q=Ra(r),n;if(null!=a){var u=a;var v=c;var p=d;var A=f}else{p=A=-(u=v=Infinity);var z=[];var w=[];var x=b.length;if(g)for(n=0;n<x;++n){var y=b[n];y.x<u&&(u=y.x);y.y<v&&(v=y.y);y.x>p&&(p=y.x);y.y>A&&(A=y.y);z.push(y.x);w.push(y.y)}else for(n=0;n<x;++n){var ta=+h(y=b[n],n);y=+q(y,n);ta<u&&(u=ta);y<v&&(v=y);ta>p&&(p=ta);
y>A&&(A=y);z.push(ta);w.push(y)}}ta=p-u;y=A-v;ta>y?A=v+ta:p=u+y;var B=Sb();B.add=function(b){e(B,b,+h(b,++n),+q(b,n),u,v,p,A)};B.visit=function(b){hb(b,B,u,v,p,A)};B.find=function(b){return xb(B,b[0],b[1],u,v,p,A)};n=-1;if(null==a){for(;++n<x;)e(B,b[n],z[n],w[n],u,v,p,A);--n}else b.forEach(B.add);z=w=b=y=null;return B}var k=cd,r=ie,g;if(g=arguments.length)return k=$a,r=Ub,3===g&&(f=c,d=a,c=a=0),e(b);e.x=function(b){return arguments.length?(k=b,e):k};e.y=function(b){return arguments.length?(r=b,e):
r};e.extent=function(b){if(!arguments.length)return null==a?null:[[a,c],[d,f]];null==b?a=c=d=f=null:(a=+b[0][0],c=+b[0][1],d=+b[1][0],f=+b[1][1]);return e};e.size=function(b){if(!arguments.length)return null==a?null:[d-a,f-c];null==b?a=c=d=f=null:(a=c=0,d=+b[0],f=+b[1]);return e};return e};Q.interpolateRgb=df;Q.interpolateObject=Hb;Q.interpolateNumber=cb;Q.interpolateString=hc;var qh=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,rh=new RegExp(qh.source,"g");Q.interpolate=gc;Q.interpolators=[function(b,
a){var c=typeof a;return("string"===c?Cf.has(a.toLowerCase())||/^(#|rgb\(|hsl\()/i.test(a)?df:hc:a instanceof qa?df:Array.isArray(a)?ub:"object"===c&&isNaN(a)?Hb:cb)(b,a)}];Q.interpolateArray=ub;var Uh=function(){return A},ji=Q.map({linear:Uh,poly:function(b){return function(a){return Math.pow(a,b)}},quad:function(){return Id},cubic:function(){return pc},sin:function(){return Kc},exp:function(){return wg},circle:function(){return Jd},elastic:function(b,a){2>arguments.length&&(a=.45);if(arguments.length)var c=
a/Zb*Math.asin(1/b);else b=1,c=a/4;return function(d){return 1+b*Math.pow(2,-10*d)*Math.sin((d-c)*Zb/a)}},back:function(b){b||(b=1.70158);return function(a){return a*a*((b+1)*a-b)}},bounce:function(){return Vb}}),ki=Q.map({"in":A,out:Of,"in-out":Db,"out-in":function(b){return Db(Of(b))}});Q.ease=function(b){var a=b.indexOf("-"),c=0<=a?b.slice(0,a):b;a=0<=a?b.slice(a+1):"in";c=ji.get(c)||Uh;a=ki.get(a)||A;return ic(a(c.apply(null,gg.call(arguments,1))))};Q.interpolateHcl=function(b,a){b=Q.hcl(b);a=
Q.hcl(a);var c=b.h,d=b.c,f=b.l,e=a.h-c,k=a.c-d,r=a.l-f;isNaN(k)&&(k=0,d=isNaN(d)?a.c:d);isNaN(e)?(e=0,c=isNaN(c)?a.h:c):180<e?e-=360:-180>e&&(e+=360);return function(b){return Ka(c+e*b,d+k*b,f+r*b)+""}};Q.interpolateHsl=function(b,a){b=Q.hsl(b);a=Q.hsl(a);var c=b.h,d=b.s,f=b.l,e=a.h-c,k=a.s-d,r=a.l-f;isNaN(k)&&(k=0,d=isNaN(d)?a.s:d);isNaN(e)?(e=0,c=isNaN(c)?a.h:c):180<e?e-=360:-180>e&&(e+=360);return function(b){return V(c+e*b,d+k*b,f+r*b)+""}};Q.interpolateLab=function(b,a){b=Q.lab(b);a=Q.lab(a);
var c=b.l,d=b.a,f=b.b,e=a.l-c,k=a.a-d,r=a.b-f;return function(b){return Aa(c+e*b,d+k*b,f+r*b)+""}};Q.interpolateRound=qc;Q.transform=function(b){var a=mc.createElementNS(Q.ns.prefix.svg,"g");return(Q.transform=function(b){if(null!=b){a.setAttribute("transform",b);var c=a.transform.baseVal.consolidate()}return new Ac(c?c.matrix:li)})(b)};Ac.prototype.toString=function(){return"translate("+this.translate+")rotate("+this.rotate+")skewX("+this.skew+")scale("+this.scale+")"};var li={a:1,b:0,c:0,d:1,e:0,
f:0};Q.interpolateTransform=cc;Q.layout={};Q.layout.bundle=function(){return function(b){for(var a=[],c=-1,d=b.length;++c<d;)a.push(ef(b[c]));return a}};Q.layout.chord=function(){function b(){var b={},c=[],q=Q.range(k),n=[],u,v;d=[];f=[];var p=0;for(u=-1;++u<k;){var A=0;for(v=-1;++v<k;)A+=e[u][v];c.push(A);n.push(Q.range(k));p+=A}g&&q.sort(function(b,a){return g(c[b],c[a])});l&&n.forEach(function(b,a){b.sort(function(b,c){return l(e[a][b],e[a][c])})});p=(Zb-r*k)/p;A=0;for(u=-1;++u<k;){var z=A;for(v=
-1;++v<k;){var w=q[u],x=n[w][v],y=e[w][x],ta=A,B=A+=y*p;b[w+"-"+x]={index:w,subindex:x,startAngle:ta,endAngle:B,value:y}}f[w]={index:w,startAngle:z,endAngle:A,value:c[w]};A+=r}for(u=-1;++u<k;)for(v=u-1;++v<k;)q=b[u+"-"+v],n=b[v+"-"+u],(q.value||n.value)&&d.push(q.value<n.value?{source:n,target:q}:{source:q,target:n});h&&a()}function a(){d.sort(function(b,a){return h((b.source.value+b.target.value)/2,(a.source.value+a.target.value)/2)})}var c={},d,f,e,k,r=0,g,l,h;c.matrix=function(b){if(!arguments.length)return e;
k=(e=b)&&e.length;d=f=null;return c};c.padding=function(b){if(!arguments.length)return r;r=b;d=f=null;return c};c.sortGroups=function(b){if(!arguments.length)return g;g=b;d=f=null;return c};c.sortSubgroups=function(b){if(!arguments.length)return l;l=b;d=null;return c};c.sortChords=function(b){if(!arguments.length)return h;h=b;d&&a();return c};c.chords=function(){d||b();return d};c.groups=function(){f||b();return f};return c};Q.layout.force=function(){function b(b){return function(a,c,d,f){if(a.point!==
b){d=a.cx-b.x;var e=a.cy-b.y;c=f-c;f=d*d+e*e;if(c*c/v<f)return f<n&&(c=a.charge/f,b.px-=d*c,b.py-=e*c),!0;a.point&&f&&f<n&&(c=a.pointCharge/f,b.px-=d*c,b.py-=e*c)}return!a.charge}}function a(b){b.px=Q.event.x;b.py=Q.event.y;c.resume()}var c={},d=Q.dispatch("start","tick","end"),f,e=[1,1],k,r,g=.9,l=mi,h=ni,q=-30,n=oi,u=.1,v=.64,p=[],z=[],w,x,y;c.tick=function(){if(.005>(r*=.99))return f=null,d.end({type:"end",alpha:r=0}),!0;var a=p.length,c=z.length,k,l;for(k=0;k<c;++k){var h=z[k];var n=h.source;
var v=h.target;var A=v.x-n.x;var ta=v.y-n.y;if(l=A*A+ta*ta)l=r*x[k]*((l=Math.sqrt(l))-w[k])/l,A*=l,ta*=l,v.x-=A*(l=n.weight+v.weight?n.weight/(n.weight+v.weight):.5),v.y-=ta*l,n.x+=A*(l=1-l),n.y+=ta*l}if(l=r*u)if(A=e[0]/2,ta=e[1]/2,k=-1,l)for(;++k<a;)h=p[k],h.x+=(A-h.x)*l,h.y+=(ta-h.y)*l;if(q)for(Rg(c=Q.geom.quadtree(p),r,y),k=-1;++k<a;)(h=p[k]).fixed||c.visit(b(h));for(k=-1;++k<a;)h=p[k],h.fixed?(h.x=h.px,h.y=h.py):(h.x-=(h.px-(h.px=h.x))*g,h.y-=(h.py-(h.py=h.y))*g);d.tick({type:"tick",alpha:r})};
c.nodes=function(b){if(!arguments.length)return p;p=b;return c};c.links=function(b){if(!arguments.length)return z;z=b;return c};c.size=function(b){if(!arguments.length)return e;e=b;return c};c.linkDistance=function(b){if(!arguments.length)return l;l="function"===typeof b?b:+b;return c};c.distance=c.linkDistance;c.linkStrength=function(b){if(!arguments.length)return h;h="function"===typeof b?b:+b;return c};c.friction=function(b){if(!arguments.length)return g;g=+b;return c};c.charge=function(b){if(!arguments.length)return q;
q="function"===typeof b?b:+b;return c};c.chargeDistance=function(b){if(!arguments.length)return Math.sqrt(n);n=b*b;return c};c.gravity=function(b){if(!arguments.length)return u;u=+b;return c};c.theta=function(b){if(!arguments.length)return Math.sqrt(v);v=b*b;return c};c.alpha=function(b){if(!arguments.length)return r;b=+b;r?0<b?r=b:(f.c=null,f.t=NaN,f=null,d.end({type:"end",alpha:r=0})):0<b&&(d.start({type:"start",alpha:r=b}),f=pb(c.tick));return c};c.start=function(){function b(b,c){if(!g){g=Array(d);
for(k=0;k<d;++k)g[k]=[];for(k=0;k<f;++k){var e=z[k];g[e.source.index].push(e.target);g[e.target.index].push(e.source)}}e=g[a];for(var k=-1,r=e.length,l;++k<r;)if(!isNaN(l=e[k][b]))return l;return Math.random()*c}var a,d=p.length,f=z.length,k=e[0],r=e[1],g,n;for(a=0;a<d;++a)(n=p[a]).index=a,n.weight=0;for(a=0;a<f;++a)n=z[a],"number"==typeof n.source&&(n.source=p[n.source]),"number"==typeof n.target&&(n.target=p[n.target]),++n.source.weight,++n.target.weight;for(a=0;a<d;++a)n=p[a],isNaN(n.x)&&(n.x=
b("x",k)),isNaN(n.y)&&(n.y=b("y",r)),isNaN(n.px)&&(n.px=n.x),isNaN(n.py)&&(n.py=n.y);w=[];if("function"===typeof l)for(a=0;a<f;++a)w[a]=+l.call(this,z[a],a);else for(a=0;a<f;++a)w[a]=l;x=[];if("function"===typeof h)for(a=0;a<f;++a)x[a]=+h.call(this,z[a],a);else for(a=0;a<f;++a)x[a]=h;y=[];if("function"===typeof q)for(a=0;a<d;++a)y[a]=+q.call(this,p[a],a);else for(a=0;a<d;++a)y[a]=q;return c.resume()};c.resume=function(){return c.alpha(.1)};c.stop=function(){return c.alpha(0)};c.drag=function(){k||
(k=Q.behavior.drag().origin(A).on("dragstart.force",Md).on("drag.force",a).on("dragend.force",rc));if(!arguments.length)return k;this.on("mouseover.force",kc).on("mouseout.force",lc).call(k)};return Q.rebind(c,d,"on")};var mi=20,ni=1,oi=Infinity;Q.layout.hierarchy=function(){function b(f){var e=[f],k=[],r;for(f.depth=0;null!=(r=e.pop());)if(k.push(r),(l=c.call(b,r,r.depth))&&(g=l.length)){for(var g,l,h;0<=--g;)e.push(h=l[g]),h.parent=r,h.depth=r.depth+1;d&&(r.value=0);r.children=l}else d&&(r.value=
+d.call(b,r,r.depth)||0),delete r.children;Tc(f,function(b){var c,f;a&&(c=b.children)&&c.sort(a);d&&(f=b.parent)&&(f.value+=b.value)});return k}var a=gf,c=Ee,d=Pf;b.sort=function(c){if(!arguments.length)return a;a=c;return b};b.children=function(a){if(!arguments.length)return c;c=a;return b};b.value=function(a){if(!arguments.length)return d;d=a;return b};b.revalue=function(a){d&&(De(a,function(b){b.children&&(b.value=0)}),Tc(a,function(a){var c;a.children||(a.value=+d.call(b,a,a.depth)||0);if(c=a.parent)c.value+=
a.value}));return a};return b};Q.layout.partition=function(){function b(a,c,d,f){var e=a.children;a.x=c;a.y=a.depth*f;a.dx=d;a.dy=f;if(e&&(r=e.length)){var k=-1,r,g;for(d=a.value?d/a.value:0;++k<r;)b(g=e[k],c,a=g.value*d,f),c+=a}}function a(b){b=b.children;var c=0;if(b&&(f=b.length))for(var d=-1,f;++d<f;)c=Math.max(c,a(b[d]));return 1+c}function c(c,e){c=d.call(this,c,e);b(c[0],0,f[0],f[1]/a(c[0]));return c}var d=Q.layout.hierarchy(),f=[1,1];c.size=function(b){if(!arguments.length)return f;f=b;return c};
return Sc(c,d)};Q.layout.pie=function(){function b(k){var r=k.length,g=k.map(function(c,d){return+a.call(b,c,d)}),l=+("function"===typeof d?d.apply(this,arguments):d),h=("function"===typeof f?f.apply(this,arguments):f)-l,q=Math.min(Math.abs(h)/r,+("function"===typeof e?e.apply(this,arguments):e)),n=q*(0>h?-1:1),u=Q.sum(g),v=u?(h-r*n)/u:0;r=Q.range(r);var p=[],A;null!=c&&r.sort(c===Vh?function(b,a){return g[a]-g[b]}:function(b,a){return c(k[b],k[a])});r.forEach(function(b){p[b]={data:k[b],value:A=
g[b],startAngle:l,endAngle:l+=A*v+n,padAngle:q}});return p}var a=Number,c=Vh,d=0,f=Zb,e=0;b.value=function(c){if(!arguments.length)return a;a=c;return b};b.sort=function(a){if(!arguments.length)return c;c=a;return b};b.startAngle=function(a){if(!arguments.length)return d;d=a;return b};b.endAngle=function(a){if(!arguments.length)return f;f=a;return b};b.padAngle=function(a){if(!arguments.length)return e;e=a;return b};return b};var Vh={};Q.layout.stack=function(){function b(r,g){if(!(n=r.length))return r;
var l=r.map(function(c,d){return a.call(b,c,d)}),h=l.map(function(a){return a.map(function(a,c){return[e.call(b,a,c),k.call(b,a,c)]})}),q=c.call(b,h,g);l=Q.permute(l,q);h=Q.permute(h,q);g=d.call(b,h,g);q=l[0].length;var n,u,v,p;for(v=0;v<q;++v)for(f.call(b,l[0][v],p=g[v],h[0][v][1]),u=1;u<n;++u)f.call(b,l[u][v],p+=h[u-1][v][1],h[u][v][1]);return r}var a=A,c=yg,d=zg,f=th,e=sh,k=Sg;b.values=function(c){if(!arguments.length)return a;a=c;return b};b.order=function(a){if(!arguments.length)return c;c="function"===
typeof a?a:pi.get(a)||yg;return b};b.offset=function(a){if(!arguments.length)return d;d="function"===typeof a?a:qi.get(a)||zg;return b};b.x=function(a){if(!arguments.length)return e;e=a;return b};b.y=function(a){if(!arguments.length)return k;k=a;return b};b.out=function(a){if(!arguments.length)return f;f=a;return b};return b};var pi=Q.map({"inside-out":function(b){var a=b.length,c=b.map(Xd),d=b.map(Tg),f=Q.range(a).sort(function(b,a){return c[b]-c[a]}),e=0,k=0,r=[],g=[];for(b=0;b<a;++b){var l=f[b];
e<k?(e+=d[l],r.push(l)):(k+=d[l],g.push(l))}return g.reverse().concat(r)},reverse:function(b){return Q.range(b.length).reverse()},"default":yg}),qi=Q.map({silhouette:function(b){var a=b.length,c=b[0].length,d=[],f=0,e,k,r,g=[];for(k=0;k<c;++k){for(r=e=0;e<a;e++)r+=b[e][k][1];r>f&&(f=r);d.push(r)}for(k=0;k<c;++k)g[k]=(f-d[k])/2;return g},wiggle:function(b){var a=b.length,c=b[0],d=c.length,f,e,k,r,g,l,h,q=[];q[0]=l=h=0;for(e=1;e<d;++e){for(k=f=0;f<a;++f)k+=b[f][e][1];var n=f=0;for(g=c[e][0]-c[e-1][0];f<
a;++f){var u=0;for(r=(b[f][e][1]-b[f][e-1][1])/(2*g);u<f;++u)r+=(b[u][e][1]-b[u][e-1][1])/g;n+=r*b[f][e][1]}q[e]=l-=k?n/k*g:0;l<h&&(h=l)}for(e=0;e<d;++e)q[e]-=h;return q},expand:function(b){var a=b.length,c=b[0].length,d=1/a,f,e,k,r=[];for(e=0;e<c;++e){for(k=f=0;f<a;f++)k+=b[f][e][1];if(k)for(f=0;f<a;f++)b[f][e][1]/=k;else for(f=0;f<a;f++)b[f][e][1]=d}for(e=0;e<c;++e)r[e]=0;return r},zero:zg});Q.layout.histogram=function(){function b(b,e){var k=[],r=b.map(c,this),g=d.call(this,r,e),l=f.call(this,
g,r,e);e=-1;for(var h=r.length,q=l.length-1,n=a?1:1/h;++e<q;){var u=k[e]=[];u.dx=l[e+1]-(u.x=l[e]);u.y=0}if(0<q)for(e=-1;++e<h;)u=r[e],u>=g[0]&&u<=g[1]&&(u=k[Q.bisect(l,u,1,q)-1],u.y+=n,u.push(b[e]));return k}var a=!0,c=Number,d=Ga,f=Qf;b.value=function(a){if(!arguments.length)return c;c=a;return b};b.range=function(a){if(!arguments.length)return d;d=Ra(a);return b};b.bins=function(a){if(!arguments.length)return f;f="number"===typeof a?function(b){return Rf(b,a)}:Ra(a);return b};b.frequency=function(c){if(!arguments.length)return a;
a=!!c;return b};return b};Q.layout.pack=function(){function b(b,e){b=a.call(this,b,e);e=b[0];var k=d[0],r=d[1],g=null==f?Math.sqrt:"function"===typeof f?f:function(){return f};e.x=e.y=0;Tc(e,function(b){b.r=+g(b.value)});Tc(e,Sf);if(c){var l=c*(f?1:Math.max(2*e.r/k,2*e.r/r))/2;Tc(e,function(b){b.r+=l});Tc(e,Sf);Tc(e,function(b){b.r-=l})}le(e,k/2,r/2,f?1:1/Math.max(2*e.r/k,2*e.r/r));return b}var a=Q.layout.hierarchy().sort(Ag),c=0,d=[1,1],f;b.size=function(a){if(!arguments.length)return d;d=a;return b};
b.radius=function(a){if(!arguments.length)return f;f=null==a||"function"===typeof a?a:+a;return b};b.padding=function(a){if(!arguments.length)return c;c=+a;return b};return Sc(b,a)};Q.layout.tree=function(){function b(b,l){b=e.call(this,b,l);l=b[0];var h=a(l);Tc(h,c);h.parent.m=-h.z;De(h,d);if(g)De(l,f);else{var q=l,n=l,u=l;De(l,function(b){b.x<q.x&&(q=b);b.x>n.x&&(n=b);b.depth>u.depth&&(u=b)});var v=k(q,n)/2-q.x,p=r[0]/(n.x+k(n,q)/2+v),A=r[1]/(u.depth||1);De(l,function(b){b.x=(b.x+v)*p;b.y=b.depth*
A})}return b}function a(b){b={A:null,children:[b]};for(var a=[b],c;null!=(c=a.pop());)for(var d=c.children,f,e=0,k=d.length;e<k;++e)a.push((d[e]=f={_:d[e],parent:c,children:(f=d[e].children)&&f.slice()||[],A:null,a:null,z:0,m:0,c:0,s:0,t:null,i:e}).a=f);return b.children[0]}function c(b){var a=b.children,c=b.parent.children,d=b.i?c[b.i-1]:null;if(a.length){for(var f=0,e=0,r=b.children,g=r.length,l;0<=--g;)l=r[g],l.z+=f,l.m+=f,f+=l.s+(e+=l.c);a=(a[0].z+a[a.length-1].z)/2;d?(b.z=d.z+k(b._,d._),b.m=
b.z-a):b.z=a}else d&&(b.z=d.z+k(b._,d._));a=b.parent;c=b.parent.A||c[0];if(d){e=f=b;r=f.parent.children[0];g=f.m;l=e.m;for(var h=d.m,q=r.m,n;d=me(d),f=lf(f),d&&f;){r=lf(r);e=me(e);e.a=b;n=d.z+h-f.z-g+k(d._,f._);if(0<n){var u=d.a.parent===b.parent?d.a:c,v=b,p=n,A=p/(v.i-u.i);v.c-=A;v.s+=p;u.c+=A;v.z+=p;v.m+=p;g+=n;l+=n}h+=d.m;g+=f.m;q+=r.m;l+=e.m}d&&!me(e)&&(e.t=d,e.m+=h-l);f&&!lf(r)&&(r.t=f,r.m+=g-q,c=b)}a.A=c}function d(b){b._.x=b.z+b.parent.m;b.m+=b.parent.m}function f(b){b.x*=r[0];b.y=b.depth*
r[1]}var e=Q.layout.hierarchy().sort(null).value(null),k=id,r=[1,1],g=null;b.separation=function(a){if(!arguments.length)return k;k=a;return b};b.size=function(a){if(!arguments.length)return g?null:r;g=null==(r=a)?f:null;return b};b.nodeSize=function(a){if(!arguments.length)return g?r:null;g=null==(r=a)?null:f;return b};return Sc(b,e)};Q.layout.cluster=function(){function b(b,e){b=a.call(this,b,e);var k=b[0],r,g=0;Tc(k,function(b){var a=b.children;a&&a.length?(b.x=Yd(a),b.y=mf(a)):(b.x=r?g+=c(b,r):
0,b.y=0,r=b)});e=nf(k);var l=Ma(k),h=e.x-c(e,l)/2,q=l.x+c(l,e)/2;Tc(k,f?function(b){b.x=(b.x-k.x)*d[0];b.y=(k.y-b.y)*d[1]}:function(b){b.x=(b.x-h)/(q-h)*d[0];b.y=(1-(k.y?b.y/k.y:1))*d[1]});return b}var a=Q.layout.hierarchy().sort(null).value(null),c=id,d=[1,1],f=!1;b.separation=function(a){if(!arguments.length)return c;c=a;return b};b.size=function(a){if(!arguments.length)return f?null:d;f=null==(d=a);return b};b.nodeSize=function(a){if(!arguments.length)return f?d:null;f=null!=(d=a);return b};return Sc(b,
a)};Q.layout.treemap=function(){function b(b,a){for(var c=-1,d=b.length,f,e;++c<d;)e=(f=b[c]).value*(0>a?0:a),f.area=isNaN(e)||0>=e?0:e}function a(c){var f=c.children;if(f&&f.length){var e=l(c),k=[],r=f.slice(),g=Infinity,h,q="slice"===n?e.dx:"dice"===n?e.dy:"slice-dice"===n?c.depth&1?e.dy:e.dx:Math.min(e.dx,e.dy);b(r,e.dx*e.dy/c.value);for(k.area=0;0<(c=r.length);){k.push(c=r[c-1]);k.area+=c.area;if(!(c="squarify"!==n)){c=q;for(var v=k.area,p=0,A=Infinity,z=-1,w=k.length;++z<w;)if(h=k[z].area)h<
A&&(A=h),h>p&&(p=h);v*=v;c*=c;c=(h=v?Math.max(c*p*u/v,v/(c*A*u)):Infinity)<=g}c?(r.pop(),g=h):(k.area-=k.pop().area,d(k,q,e,!1),q=Math.min(e.dx,e.dy),k.length=k.area=0,g=Infinity)}k.length&&(d(k,q,e,!0),k.length=k.area=0);f.forEach(a)}}function c(a){var f=a.children;if(f&&f.length){var e=l(a),k=f.slice(),r=[];b(k,e.dx*e.dy/a.value);for(r.area=0;a=k.pop();)r.push(a),r.area+=a.area,null!=a.z&&(d(r,a.z?e.dx:e.dy,e,!k.length),r.length=r.area=0);f.forEach(c)}}function d(b,a,c,d){var f=-1,e=b.length,r=
c.x,g=c.y,l=a?k(b.area/a):0;if(a==c.dx){if(d||l>c.dy)l=c.dy;for(;++f<e;){var h=b[f];h.x=r;h.y=g;h.dy=l;r+=h.dx=Math.min(c.x+c.dx-r,l?k(h.area/l):0)}h.z=!0;h.dx+=c.x+c.dx-r;c.y+=l;c.dy-=l}else{if(d||l>c.dx)l=c.dx;for(;++f<e;)h=b[f],h.x=r,h.y=g,h.dx=l,g+=h.dy=Math.min(c.y+c.dy-g,l?k(h.area/l):0);h.z=!1;h.dy+=c.y+c.dy-g;c.x+=l;c.dx-=l}}function f(d){d=q||e(d);var f=d[0];f.x=f.y=0;f.value?(f.dx=r[0],f.dy=r[1]):f.dx=f.dy=0;q&&e.revalue(f);b([f],f.dx*f.dy/f.value);(q?c:a)(f);h&&(q=d);return d}var e=Q.layout.hierarchy(),
k=Math.round,r=[1,1],g=null,l=Xa,h=!1,q,n="squarify",u=.5*(1+Math.sqrt(5));f.size=function(b){if(!arguments.length)return r;r=b;return f};f.padding=function(b){function a(a){var c=b.call(f,a,a.depth);return null==c?Xa(a):jd(a,"number"===typeof c?[c,c,c,c]:c)}function c(a){return jd(a,b)}if(!arguments.length)return g;var d;l=null==(g=b)?Xa:"function"===(d=typeof b)?a:"number"===d?(b=[b,b,b,b],c):c;return f};f.round=function(b){if(!arguments.length)return k!=Number;k=b?Math.round:Number;return f};f.sticky=
function(b){if(!arguments.length)return h;h=b;q=null;return f};f.ratio=function(b){if(!arguments.length)return u;u=b;return f};f.mode=function(b){if(!arguments.length)return n;n=b+"";return f};return Sc(f,e)};Q.random={normal:function(b,a){var c=arguments.length;2>c&&(a=1);1>c&&(b=0);return function(){do{var c=2*Math.random()-1;var d=2*Math.random()-1;d=c*c+d*d}while(!d||1<d);return b+a*c*Math.sqrt(-2*Math.log(d)/d)}},logNormal:function(){var b=Q.random.normal.apply(Q,arguments);return function(){return Math.exp(b())}},
bates:function(b){var a=Q.random.irwinHall(b);return function(){return a()/b}},irwinHall:function(b){return function(){for(var a=0,c=0;c<b;c++)a+=Math.random();return a}}};Q.scale={};var ei={floor:A,ceil:A};Q.scale.linear=function(){return Je([0,1],[0,1],gc,!1)};var fi={s:1,g:1,p:1,r:1,e:1};Q.scale.log=function(){return Vf(Q.scale.linear().domain([0,1]),10,!0,[1,10])};var Lh=Q.format(".0e"),gi={floor:function(b){return-Math.ceil(-b)},ceil:function(b){return-Math.floor(-b)}};Q.scale.pow=function(){return qf(Q.scale.linear(),
1,[0,1])};Q.scale.sqrt=function(){return Q.scale.pow().exponent(.5)};Q.scale.ordinal=function(){return Wf([],{t:"range",a:[[]]})};Q.scale.category10=function(){return Q.scale.ordinal().range(ri)};Q.scale.category20=function(){return Q.scale.ordinal().range(si)};Q.scale.category20b=function(){return Q.scale.ordinal().range(ti)};Q.scale.category20c=function(){return Q.scale.ordinal().range(ui)};var ri=[2062260,16744206,2924588,14034728,9725885,9197131,14907330,8355711,12369186,1556175].map(ka),si=[2062260,
11454440,16744206,16759672,2924588,10018698,14034728,16750742,9725885,12955861,9197131,12885140,14907330,16234194,8355711,13092807,12369186,14408589,1556175,10410725].map(ka),ti=[3750777,5395619,7040719,10264286,6519097,9216594,11915115,13556636,9202993,12426809,15186514,15190932,8666169,11356490,14049643,15177372,8077683,10834324,13528509,14589654].map(ka),ui=[3244733,7057110,10406625,13032431,15095053,16616764,16625259,16634018,3253076,7652470,10607003,13101504,7695281,10394312,12369372,14342891,
6513507,9868950,12434877,14277081].map(ka);Q.scale.quantile=function(){return rf([],[])};Q.scale.quantize=function(){return Xf(0,1,[0,1])};Q.scale.threshold=function(){return Yf([.5],[0,1])};Q.scale.identity=function(){return nd([0,1])};Q.svg={};Q.svg.arc=function(){function b(){var b=Math.max(0,+c.apply(this,arguments)),l=Math.max(0,+d.apply(this,arguments)),h=k.apply(this,arguments)-ab,q=r.apply(this,arguments)-ab,n=Math.abs(q-h),u=h>q?0:1;if(l<b){var v=l;l=b;b=v}if(n>=vf)return a(l,u)+(b?a(b,1-
u):"")+"Z";var p,A=0,z=0,w=[];if(p=(+g.apply(this,arguments)||0)/2){var x=e===jh?Math.sqrt(b*b+l*l):+e.apply(this,arguments);u||(z*=-1);l&&(z=oa(x/l*Math.sin(p)));b&&(A=oa(x/b*Math.sin(p)))}if(l){x=l*Math.cos(h+z);p=l*Math.sin(h+z);var y=l*Math.cos(q-z);var ta=l*Math.sin(q-z);var B=Math.abs(q-h-2*z)<=Ua?0:1;z&&sf(x,p,y,ta)===u^B&&(y=(h+q)/2,x=l*Math.cos(y),p=l*Math.sin(y),y=ta=null)}else x=p=0;if(b){z=b*Math.cos(q-A);var m=b*Math.sin(q-A);var J=b*Math.cos(h+A);var F=b*Math.sin(h+A);var E=Math.abs(h-
q+2*A)<=Ua?0:1;A&&sf(z,m,J,F)===1-u^E&&(J=(h+q)/2,z=b*Math.cos(J),m=b*Math.sin(J),J=F=null)}else z=m=0;1E-6<n&&.001<(v=Math.min(Math.abs(l-b)/2,+f.apply(this,arguments)))?(B=b<l^u?0:1,E=h=v,n<Ua&&(n=null==J?[z,m]:null==y?[x,p]:Hd([x,p],[J,F],[y,ta],[z,m]),E=x-n[0],h=p-n[1],q=y-n[0],A=ta-n[1],h=1/Math.sin(Math.acos((E*q+h*A)/(Math.sqrt(E*E+h*h)*Math.sqrt(q*q+A*A)))/2),n=Math.sqrt(n[0]*n[0]+n[1]*n[1]),E=Math.min(v,(b-n)/(h-1)),h=Math.min(v,(l-n)/(h+1))),null!=y?(n=tf(null==J?[z,m]:[J,F],[x,p],l,h,u),
q=tf([y,ta],[z,m],l,h,u),v===h?w.push("M",n[0],"A",h,",",h," 0 0,",B," ",n[1],"A",l,",",l," 0 ",1-u^sf(n[1][0],n[1][1],q[1][0],q[1][1]),",",u," ",q[1],"A",h,",",h," 0 0,",B," ",q[0]):w.push("M",n[0],"A",h,",",h," 0 1,",B," ",q[0])):w.push("M",x,",",p),null!=J?(l=tf([x,p],[J,F],b,-E,u),y=tf([z,m],null==y?[x,p]:[y,ta],b,-E,u),v===E?w.push("L",y[0],"A",E,",",E," 0 0,",B," ",y[1],"A",b,",",b," 0 ",u^sf(y[1][0],y[1][1],l[1][0],l[1][1]),",",1-u," ",l[1],"A",E,",",E," 0 0,",B," ",l[0]):w.push("L",y[0],"A",
E,",",E," 0 0,",B," ",l[0])):w.push("L",z,",",m)):(w.push("M",x,",",p),null!=y&&w.push("A",l,",",l," 0 ",B,",",u," ",y,",",ta),w.push("L",z,",",m),null!=J&&w.push("A",b,",",b," 0 ",E,",",1-u," ",J,",",F));w.push("Z");return w.join("")}function a(b,a){return"M0,"+b+"A"+b+","+b+" 0 1,"+a+" 0,"+-b+"A"+b+","+b+" 0 1,"+a+" 0,"+b}var c=$f,d=Cg,f=Zf,e=jh,k=Dg,r=Eg,g=Ug;b.innerRadius=function(a){if(!arguments.length)return c;c=Ra(a);return b};b.outerRadius=function(a){if(!arguments.length)return d;d=Ra(a);
return b};b.cornerRadius=function(a){if(!arguments.length)return f;f=Ra(a);return b};b.padRadius=function(a){if(!arguments.length)return e;e=a==jh?jh:Ra(a);return b};b.startAngle=function(a){if(!arguments.length)return k;k=Ra(a);return b};b.endAngle=function(a){if(!arguments.length)return r;r=Ra(a);return b};b.padAngle=function(a){if(!arguments.length)return g;g=Ra(a);return b};b.centroid=function(){var b=(+c.apply(this,arguments)+ +d.apply(this,arguments))/2,a=(+k.apply(this,arguments)+ +r.apply(this,
arguments))/2-ab;return[Math.cos(a)*b,Math.sin(a)*b]};return b};var jh="auto";Q.svg.line=function(){return Fg(A)};var uh=Q.map({linear:Lc,"linear-closed":Gg,step:function(b){for(var a=0,c=b.length,d=b[0],f=[d[0],",",d[1]];++a<c;)f.push("H",(d[0]+(d=b[a])[0])/2,"V",d[1]);1<c&&f.push("H",d[0]);return f.join("")},"step-before":ag,"step-after":bg,basis:Hg,"basis-open":function(b){if(4>b.length)return Lc(b);for(var a=[],c=-1,d=b.length,f,e=[0],k=[0];3>++c;)f=b[c],e.push(f[0]),k.push(f[1]);a.push(Wb(Me,
e)+","+Wb(Me,k));for(--c;++c<d;)f=b[c],e.shift(),e.push(f[0]),k.shift(),k.push(f[1]),od(a,e,k);return a.join("")},"basis-closed":function(b){for(var a,c=-1,d=b.length,f=d+4,e,k=[],r=[];4>++c;)e=b[c%d],k.push(e[0]),r.push(e[1]);a=[Wb(Me,k),",",Wb(Me,r)];for(--c;++c<f;)e=b[c%d],k.shift(),k.push(e[0]),r.shift(),r.push(e[1]),od(a,k,r);return a.join("")},bundle:function(b,a){var c=b.length-1;if(c)for(var d=b[0][0],f=b[0][1],e=b[c][0]-d,k=b[c][1]-f,r=-1,g,l;++r<=c;)g=b[r],l=r/c,g[0]=a*g[0]+(1-a)*(d+l*e),
g[1]=a*g[1]+(1-a)*(f+l*k);return Hg(b)},cardinal:function(b,a){return 3>b.length?Lc(b):b[0]+uf(b,Ob(b,a))},"cardinal-open":function(b,a){return 4>b.length?Lc(b):b[1]+uf(b.slice(1,-1),Ob(b,a))},"cardinal-closed":function(b,a){return 3>b.length?Gg(b):b[0]+uf((b.push(b[0]),b),Ob([b[b.length-2]].concat(b,[b[1]]),a))},monotone:function(b){if(3>b.length)b=Lc(b);else{var a=b[0],c=[],d;var f=0;var e=b.length-1;var k=[];var r=b[1];for(d=k[0]=Uc(b[0],r);++f<e;)k[f]=(d+(d=Uc(r,r=b[f+1])))/2;k[f]=d;for(var g=
-1,l=b.length-1;++g<l;)f=Uc(b[g],b[g+1]),1E-6>Va(f)?k[g]=k[g+1]=0:(e=k[g]/f,r=k[g+1]/f,d=e*e+r*r,9<d&&(d=3*f/Math.sqrt(d),k[g]=d*e,k[g+1]=d*r));for(g=-1;++g<=l;)d=(b[Math.min(l,g+1)][0]-b[Math.max(0,g-1)][0])/(6*(1+k[g]*k[g])),c.push([d||0,k[g]*d||0]);b=a+uf(b,c)}return b}});uh.forEach(function(b,a){a.key=b;a.closed=/-closed$/.test(b)});var Mh=[0,2/3,1/3,0],Nh=[0,1/3,2/3,0],Me=[0,1/6,2/3,1/6];Q.svg.line.radial=function(){var b=Fg(Mc);b.radius=b.x;delete b.x;b.angle=b.y;delete b.y;return b};ag.reverse=
bg;bg.reverse=ag;Q.svg.area=function(){return Nc(A)};Q.svg.area.radial=function(){var b=Nc(Mc);b.radius=b.x;delete b.x;b.innerRadius=b.x0;delete b.x0;b.outerRadius=b.x1;delete b.x1;b.angle=b.y;delete b.y;b.startAngle=b.y0;delete b.y0;b.endAngle=b.y1;delete b.y1;return b};Q.svg.chord=function(){function b(b,e){var k=a(this,d,b,e);b=a(this,f,b,e);return"M"+k.p0+c(k.r,k.p1,k.a1-k.a0)+(k.a0==b.a0&&k.a1==b.a1?"Q 0,0 "+k.p0:"Q 0,0 "+b.p0+c(b.r,b.p1,b.a1-b.a0)+("Q 0,0 "+k.p0))+"Z"}function a(b,a,c,d){var f=
a.call(b,c,d);a=e.call(b,f,d);c=k.call(b,f,d)-ab;b=r.call(b,f,d)-ab;return{r:a,a0:c,a1:b,p0:[a*Math.cos(c),a*Math.sin(c)],p1:[a*Math.cos(b),a*Math.sin(b)]}}function c(b,a,c){return"A"+b+","+b+" 0 "+ +(c>Ua)+",1 "+a}var d=Ye,f=Ze,e=cg,k=Dg,r=Eg;b.radius=function(a){if(!arguments.length)return e;e=Ra(a);return b};b.source=function(a){if(!arguments.length)return d;d=Ra(a);return b};b.target=function(a){if(!arguments.length)return f;f=Ra(a);return b};b.startAngle=function(a){if(!arguments.length)return k;
k=Ra(a);return b};b.endAngle=function(a){if(!arguments.length)return r;r=Ra(a);return b};return b};Q.svg.diagonal=function(){function b(b,f){var e=a.call(this,b,f);b=c.call(this,b,f);f=(e.y+b.y)/2;e=[e,{x:e.x,y:f},{x:b.x,y:f},b];e=e.map(d);return"M"+e[0]+"C"+e[1]+" "+e[2]+" "+e[3]}var a=Ye,c=Ze,d=Nd;b.source=function(c){if(!arguments.length)return a;a=Ra(c);return b};b.target=function(a){if(!arguments.length)return c;c=Ra(a);return b};b.projection=function(a){if(!arguments.length)return d;d=a;return b};
return b};Q.svg.diagonal.radial=function(){var b=Q.svg.diagonal(),a=Nd,c=b.projection;b.projection=function(b){return arguments.length?c(vh(a=b)):a};return b};Q.svg.symbol=function(){function b(b,d){return(Wh.get(a.call(this,b,d))||Vg)(c.call(this,b,d))}var a=Ig,c=Ne;b.type=function(c){if(!arguments.length)return a;a=Ra(c);return b};b.size=function(a){if(!arguments.length)return c;c=Ra(a);return b};return b};var Wh=Q.map({circle:Vg,cross:function(b){b=Math.sqrt(b/5)/2;return"M"+-3*b+","+-b+"H"+-b+
"V"+-3*b+"H"+b+"V"+-b+"H"+3*b+"V"+b+"H"+b+"V"+3*b+"H"+-b+"V"+b+"H"+-3*b+"Z"},diamond:function(b){b=Math.sqrt(b/(2*Xh));var a=b*Xh;return"M0,"+-b+"L"+a+",0 0,"+b+" "+-a+",0Z"},square:function(b){b=Math.sqrt(b)/2;return"M"+-b+","+-b+"L"+b+","+-b+" "+b+","+b+" "+-b+","+b+"Z"},"triangle-down":function(b){b=Math.sqrt(b/kh);var a=b*kh/2;return"M0,"+a+"L"+b+","+-a+" "+-b+","+-a+"Z"},"triangle-up":function(b){b=Math.sqrt(b/kh);var a=b*kh/2;return"M0,"+-a+"L"+b+","+a+" "+-b+","+a+"Z"}});Q.svg.symbolTypes=
Wh.keys();var kh=Math.sqrt(3),Xh=Math.tan(30*Wa);kb.transition=function(b){var a=xf||++Yh;b=Jg(b);for(var c=[],d,f,e=lh||{time:Date.now(),ease:vg,delay:0,duration:250},k=-1,r=this.length;++k<r;){c.push(d=[]);for(var g=this[k],l=-1,h=g.length;++l<h;)(f=g[l])&&dg(f,l,b,a,e),d.push(f)}return Oe(c,b,a)};kb.interrupt=function(b){return this.each(null==b?ah:Wg(Jg(b)))};var ah=Wg(Jg()),Tb=[],Yh=0,xf,lh;Tb.call=kb.call;Tb.empty=kb.empty;Tb.node=kb.node;Tb.size=kb.size;Q.transition=function(b,a){return b&&
b.transition?xf?b.transition(a):b:Q.selection().transition(b)};Q.transition.prototype=Tb;Tb.select=function(b){var a=this.id,c=this.namespace,d=[],f,e,k;b=E(b);for(var r=-1,g=this.length;++r<g;){d.push(f=[]);for(var l=this[r],h=-1,q=l.length;++h<q;)(k=l[h])&&(e=b.call(k,k.__data__,h,r))?("__data__"in k&&(e.__data__=k.__data__),dg(e,h,c,a,k[c][a]),f.push(e)):f.push(null)}return Oe(d,c,a)};Tb.selectAll=function(b){var a=this.id,c=this.namespace,d=[],f,e;b=K(b);for(var k=-1,r=this.length;++k<r;)for(var g=
this[k],l=-1,h=g.length;++l<h;)if(f=g[l]){var q=f[c][a];var n=b.call(f,f.__data__,l,k);d.push(f=[]);for(var u=-1,v=n.length;++u<v;)(e=n[u])&&dg(e,u,c,a,q),f.push(e)}return Oe(d,c,a)};Tb.filter=function(b){var a=[],c,d;"function"!==typeof b&&(b=P(b));for(var f=0,e=this.length;f<e;f++){a.push(c=[]);var k=this[f];for(var r=0,g=k.length;r<g;r++)(d=k[r])&&b.call(d,d.__data__,r,f)&&c.push(d)}return Oe(a,this.namespace,this.id)};Tb.tween=function(b,a){var c=this.id,d=this.namespace;return 2>arguments.length?
this.node()[d][c].tween.get(b):ba(this,null==a?function(a){a[d][c].tween.remove(b)}:function(f){f[d][c].tween.set(b,a)})};Tb.attr=function(b,a){function c(){this.removeAttribute(r)}function d(){this.removeAttributeNS(r.space,r.local)}function f(b){return null==b?c:(b+="",function(){var a=this.getAttribute(r),c;return a!==b&&(c=k(a,b),function(b){this.setAttribute(r,c(b))})})}function e(b){return null==b?d:(b+="",function(){var a=this.getAttributeNS(r.space,r.local),c;return a!==b&&(c=k(a,b),function(b){this.setAttributeNS(r.space,
r.local,c(b))})})}if(2>arguments.length){for(a in b)this.attr(a,b[a]);return this}var k="transform"==b?cc:gc,r=Q.ns.qualify(b);return Od(this,"attr."+b,a,r.local?e:f)};Tb.attrTween=function(b,a){function c(b,c){var d=a.call(this,b,c,this.getAttribute(f));return d&&function(b){this.setAttribute(f,d(b))}}function d(b,c){var d=a.call(this,b,c,this.getAttributeNS(f.space,f.local));return d&&function(b){this.setAttributeNS(f.space,f.local,d(b))}}var f=Q.ns.qualify(b);return this.tween("attr."+b,f.local?
d:c)};Tb.style=function(b,c,d){function f(){this.style.removeProperty(b)}var e=arguments.length;if(3>e){if("string"!==typeof b){2>e&&(c="");for(d in b)this.style(d,b[d],c);return this}d=""}return Od(this,"style."+b,c,function(c){return null==c?f:(c+="",function(){var f=a(this).getComputedStyle(this,null).getPropertyValue(b),e;return f!==c&&(e=gc(f,c),function(a){this.style.setProperty(b,e(a),d)})})})};Tb.styleTween=function(b,c,d){3>arguments.length&&(d="");return this.tween("style."+b,function(f,
e){var k=c.call(this,f,e,a(this).getComputedStyle(this,null).getPropertyValue(b));return k&&function(a){this.style.setProperty(b,k(a),d)}})};Tb.text=function(b){return Od(this,"text",b,pd)};Tb.remove=function(){var b=this.namespace;return this.each("end.transition",function(){var a;2>this[b].count&&(a=this.parentNode)&&a.removeChild(this)})};Tb.ease=function(b){var a=this.id,c=this.namespace;if(1>arguments.length)return this.node()[c][a].ease;"function"!==typeof b&&(b=Q.ease.apply(Q,arguments));return ba(this,
function(d){d[c][a].ease=b})};Tb.delay=function(b){var a=this.id,c=this.namespace;return 1>arguments.length?this.node()[c][a].delay:ba(this,"function"===typeof b?function(d,f,e){d[c][a].delay=+b.call(d,d.__data__,f,e)}:(b=+b,function(d){d[c][a].delay=b}))};Tb.duration=function(b){var a=this.id,c=this.namespace;return 1>arguments.length?this.node()[c][a].duration:ba(this,"function"===typeof b?function(d,f,e){d[c][a].duration=Math.max(1,b.call(d,d.__data__,f,e))}:(b=Math.max(1,b),function(d){d[c][a].duration=
b}))};Tb.each=function(b,a){var c=this.id,d=this.namespace;if(2>arguments.length){var f=lh,e=xf;try{xf=c,ba(this,function(a,f,e){lh=a[d][c];b.call(a,a.__data__,f,e)})}finally{lh=f,xf=e}}else ba(this,function(f){f=f[d][c];(f.event||(f.event=Q.dispatch("start","end","interrupt"))).on(b,a)});return this};Tb.transition=function(){for(var b=this.id,a=++Yh,c=this.namespace,d=[],f,e,k,r,g=0,l=this.length;g<l;g++){d.push(f=[]);e=this[g];for(var h=0,q=e.length;h<q;h++){if(k=e[h])r=k[c][b],dg(k,h,c,a,{time:r.time,
ease:r.ease,delay:r.delay+r.duration,duration:r.duration});f.push(k)}}return Oe(d,c,a)};Q.svg.axis=function(){function b(b){b.each(function(){var b=Q.select(this),l=this.__chart__||a,h=this.__chart__=a.copy(),q=null==r?h.ticks?h.ticks.apply(h,k):h.domain():r,n=null==g?h.tickFormat?h.tickFormat.apply(h,k):A:g,u=b.selectAll(".tick").data(q,h);q=u.enter().insert("g",".domain").attr("class","tick").style("opacity",1E-6);var v=Q.transition(u.exit()).style("opacity",1E-6).remove(),p=Q.transition(u.order()).style("opacity",
1),z=Math.max(d,0)+e,w=sc(h);b=b.selectAll(".domain").data([0]);b=(b.enter().append("path").attr("class","domain"),Q.transition(b));q.append("line");q.append("text");var x=q.select("line"),y=p.select("line");u=u.select("text").text(n);var ta=q.select("text"),B=p.select("text"),m="top"===c||"left"===c?-1:1;if("bottom"===c||"top"===c){n=wh;var J="x";var F="y";var E="x2";var I="y2";u.attr("dy",0>m?"0em":".71em").style("text-anchor","middle");b.attr("d","M"+w[0]+","+m*f+"V0H"+w[1]+"V"+m*f)}else n=xh,
J="y",F="x",E="y2",I="x2",u.attr("dy",".32em").style("text-anchor",0>m?"end":"start"),b.attr("d","M"+m*f+","+w[0]+"H0V"+w[1]+"H"+m*f);x.attr(I,m*d);ta.attr(F,m*z);y.attr(E,0).attr(I,m*d);B.attr(J,0).attr(F,m*z);if(h.rangeBand){var C=h,D=C.rangeBand()/2;l=h=function(b){return C(b)+D}}else l.rangeBand?l=h:v.call(n,h,l);q.call(n,l,h);p.call(n,h,h)})}var a=Q.scale.linear(),c=Zh,d=6,f=6,e=3,k=[10],r=null,g;b.scale=function(c){if(!arguments.length)return a;a=c;return b};b.orient=function(a){if(!arguments.length)return c;
c=a in vi?a+"":Zh;return b};b.ticks=function(){if(!arguments.length)return k;k=fc(arguments);return b};b.tickValues=function(a){if(!arguments.length)return r;r=a;return b};b.tickFormat=function(a){if(!arguments.length)return g;g=a;return b};b.tickSize=function(a){var c=arguments.length;if(!c)return d;d=+a;f=+arguments[c-1];return b};b.innerTickSize=function(a){if(!arguments.length)return d;d=+a;return b};b.outerTickSize=function(a){if(!arguments.length)return f;f=+a;return b};b.tickPadding=function(a){if(!arguments.length)return e;
e=+a;return b};b.tickSubdivide=function(){return arguments.length&&b};return b};var Zh="bottom",vi={top:1,right:1,bottom:1,left:1};Q.svg.brush=function(){function b(a){a.each(function(){var a=Q.select(this).style("pointer-events","all").style("-webkit-tap-highlight-color","rgba(0,0,0,0)").on("mousedown.brush",e).on("touchstart.brush",e),k=a.selectAll(".background").data([0]);k.enter().append("rect").attr("class","background").style("visibility","hidden").style("cursor","crosshair");a.selectAll(".extent").data([0]).enter().append("rect").attr("class",
"extent").style("cursor","move");var l=a.selectAll(".resize").data(p,A);l.exit().remove();l.enter().append("g").attr("class",function(b){return"resize "+b}).style("cursor",function(b){return wi[b]}).append("rect").attr("x",function(b){return/[ew]$/.test(b)?-3:null}).attr("y",function(b){return/^[ns]/.test(b)?-3:null}).attr("width",6).attr("height",6).style("visibility","hidden");l.style("display",b.empty()?"none":null);a=Q.transition(a);k=Q.transition(k);r&&(l=sc(r),k.attr("x",l[0]).attr("width",
l[1]-l[0]),d(a));g&&(l=sc(g),k.attr("y",l[0]).attr("height",l[1]-l[0]),f(a));c(a)})}function c(b){b.selectAll(".resize").attr("transform",function(b){return"translate("+l[+/e$/.test(b)]+","+h[+/^s/.test(b)]+")"})}function d(b){b.select(".extent").attr("x",l[0]);b.selectAll(".extent,.n\x3erect,.s\x3erect").attr("width",l[1]-l[0])}function f(b){b.select(".extent").attr("y",h[0]);b.selectAll(".extent,.e\x3erect,.w\x3erect").attr("height",h[1]-h[0])}function e(){function e(){var b=Q.mouse(z),a=!1;G&&
(b[0]+=G[0],b[1]+=G[1]);J||(Q.event.altKey?(E||(E=[(l[0]+l[1])/2,(h[0]+h[1])/2]),I[0]=l[+(b[0]<E[0])],I[1]=h[+(b[1]<E[1])]):E=null);B&&p(b,r,0)&&(d(y),a=!0);m&&p(b,g,1)&&(f(y),a=!0);a&&(c(y),x({type:"brush",mode:J?"move":"resize"}))}function p(b,a,c){var d=sc(a);a=d[0];var f=d[1];d=I[c];var e=c?h:l,k=e[1]-e[0];J&&(a-=d,f-=k+d);b=(c?v:u)?Math.max(a,Math.min(f,b[c])):b[c];J?a=(b+=d)+k:(E&&(d=Math.max(a,Math.min(f,2*E[c]-b))),d<b?(a=b,b=d):a=d);if(e[0]!=b||e[1]!=a)return c?n=null:q=null,e[0]=b,e[1]=
a,!0}function A(){e();y.style("pointer-events","all").selectAll(".resize").style("display",b.empty()?"none":null);Q.select("body").style("cursor",null);D.on("mousemove.brush",null).on("mouseup.brush",null).on("touchmove.brush",null).on("touchend.brush",null).on("keydown.brush",null).on("keyup.brush",null);F();x({type:"brushend"})}var z=this,w=Q.select(Q.event.target),x=k.of(z,arguments),y=Q.select(z),ta=w.datum(),B=!/^(n|s)$/.test(ta)&&r,m=!/^(e|w)$/.test(ta)&&g,J=w.classed("extent"),F=U(z),E,I=Q.mouse(z),
D=Q.select(a(z)).on("keydown.brush",function(){32==Q.event.keyCode&&(J||(E=null,I[0]-=l[1],I[1]-=h[1],J=2),C())}).on("keyup.brush",function(){32==Q.event.keyCode&&2==J&&(I[0]+=l[1],I[1]+=h[1],J=0,C())});if(Q.event.changedTouches)D.on("touchmove.brush",e).on("touchend.brush",A);else D.on("mousemove.brush",e).on("mouseup.brush",A);y.interrupt().selectAll("*").interrupt();if(J)I[0]=l[0]-I[0],I[1]=h[0]-I[1];else if(ta){var t=+/w$/.test(ta);ta=+/^n/.test(ta);var G=[l[1-t]-I[0],h[1-ta]-I[1]];I[0]=l[t];
I[1]=h[ta]}else Q.event.altKey&&(E=I.slice());y.style("pointer-events","none").selectAll(".resize").style("display",null);Q.select("body").style("cursor",w.style("cursor"));x({type:"brushstart"});e()}var k=G(b,"brushstart","brush","brushend"),r=null,g=null,l=[0,0],h=[0,0],q,n,u=!0,v=!0,p=Eh[0];b.event=function(b){b.each(function(){var b=k.of(this,arguments),a={x:l,y:h,i:q,j:n},c=this.__chart__||a;this.__chart__=a;xf?Q.select(this).transition().each("start.brush",function(){q=c.i;n=c.j;l=c.x;h=c.y;
b({type:"brushstart"})}).tween("brush:brush",function(){var c=ub(l,a.x),d=ub(h,a.y);q=n=null;return function(f){l=a.x=c(f);h=a.y=d(f);b({type:"brush",mode:"resize"})}}).each("end.brush",function(){q=a.i;n=a.j;b({type:"brush",mode:"resize"});b({type:"brushend"})}):(b({type:"brushstart"}),b({type:"brush",mode:"resize"}),b({type:"brushend"}))})};b.x=function(a){if(!arguments.length)return r;r=a;p=Eh[!r<<1|!g];return b};b.y=function(a){if(!arguments.length)return g;g=a;p=Eh[!r<<1|!g];return b};b.clamp=
function(a){if(!arguments.length)return r&&g?[u,v]:r?u:g?v:null;r&&g?(u=!!a[0],v=!!a[1]):r?u=!!a:g&&(v=!!a);return b};b.extent=function(a){if(!arguments.length){if(r)if(q){var c=q[0];var d=q[1]}else if(c=l[0],d=l[1],r.invert&&(c=r.invert(c),d=r.invert(d)),d<c){var f=c;c=d;d=f}if(g)if(n){var e=n[0];var k=n[1]}else e=h[0],k=h[1],g.invert&&(e=g.invert(e),k=g.invert(k)),k<e&&(f=e,e=k,k=f);return r&&g?[[c,e],[d,k]]:r?[c,d]:g&&[e,k]}r&&(c=a[0],d=a[1],g&&(c=c[0],d=d[0]),q=[c,d],r.invert&&(c=r(c),d=r(d)),
d<c&&(f=c,c=d,d=f),c!=l[0]||d!=l[1])&&(l=[c,d]);g&&(e=a[0],k=a[1],r&&(e=e[1],k=k[1]),n=[e,k],g.invert&&(e=g(e),k=g(k)),k<e&&(f=e,e=k,k=f),e!=h[0]||k!=h[1])&&(h=[e,k]);return b};b.clear=function(){b.empty()||(l=[0,0],h=[0,0],q=n=null);return b};b.empty=function(){return!!r&&l[0]==l[1]||!!g&&h[0]==h[1]};return Q.rebind(b,k,"on")};var wi={n:"ns-resize",e:"ew-resize",s:"ns-resize",w:"ew-resize",nw:"nwse-resize",ne:"nesw-resize",se:"nwse-resize",sw:"nesw-resize"},Eh=["n e s w nw ne se sw".split(" "),["e",
"w"],["n","s"],[]],Fh=Da.format=Oh.timeFormat,$h=Fh.utc,ai=$h("%Y-%m-%dT%H:%M:%S.%LZ");Fh.iso=Date.prototype.toISOString&&+new Date("2000-01-01T00:00:00.000Z")?eg:ai;eg.parse=function(b){b=new Date(b);return isNaN(b)?null:b};eg.toString=ai.toString;Da.second=Yb(function(b){return new Qb(1E3*Math.floor(b/1E3))},function(b,a){b.setTime(b.getTime()+1E3*Math.floor(a))},function(b){return b.getSeconds()});Da.seconds=Da.second.range;Da.seconds.utc=Da.second.utc.range;Da.minute=Yb(function(b){return new Qb(6E4*
Math.floor(b/6E4))},function(b,a){b.setTime(b.getTime()+6E4*Math.floor(a))},function(b){return b.getMinutes()});Da.minutes=Da.minute.range;Da.minutes.utc=Da.minute.utc.range;Da.hour=Yb(function(b){var a=b.getTimezoneOffset()/60;return new Qb(36E5*(Math.floor(b/36E5-a)+a))},function(b,a){b.setTime(b.getTime()+36E5*Math.floor(a))},function(b){return b.getHours()});Da.hours=Da.hour.range;Da.hours.utc=Da.hour.utc.range;Da.month=Yb(function(b){b=Da.day(b);b.setDate(1);return b},function(b,a){b.setMonth(b.getMonth()+
a)},function(b){return b.getMonth()});Da.months=Da.month.range;Da.months.utc=Da.month.utc.range;var Xg=[1E3,5E3,15E3,3E4,6E4,3E5,9E5,18E5,36E5,108E5,216E5,432E5,864E5,1728E5,6048E5,2592E6,7776E6,31536E6],Gh=[[Da.second,1],[Da.second,5],[Da.second,15],[Da.second,30],[Da.minute,1],[Da.minute,5],[Da.minute,15],[Da.minute,30],[Da.hour,1],[Da.hour,3],[Da.hour,6],[Da.hour,12],[Da.day,1],[Da.day,2],[Da.week,1],[Da.month,1],[Da.month,3],[Da.year,1]],xi=Fh.multi([[".%L",function(b){return b.getMilliseconds()}],
[":%S",function(b){return b.getSeconds()}],["%I:%M",function(b){return b.getMinutes()}],["%I %p",function(b){return b.getHours()}],["%a %d",function(b){return b.getDay()&&1!=b.getDate()}],["%b %d",function(b){return 1!=b.getDate()}],["%B",function(b){return b.getMonth()}],["%Y",Qa]]),hi={range:function(b,a,c){return Q.range(Math.ceil(b/c)*c,+a,c).map(Bc)},floor:A,ceil:A};Gh.year=Da.year;Da.scale=function(){return fg(Q.scale.linear(),Gh,xi)};var bi=Gh.map(function(b){return[b[0].utc,b[1]]}),yi=$h.multi([[".%L",
function(b){return b.getUTCMilliseconds()}],[":%S",function(b){return b.getUTCSeconds()}],["%I:%M",function(b){return b.getUTCMinutes()}],["%I %p",function(b){return b.getUTCHours()}],["%a %d",function(b){return b.getUTCDay()&&1!=b.getUTCDate()}],["%b %d",function(b){return 1!=b.getUTCDate()}],["%B",function(b){return b.getUTCMonth()}],["%Y",Qa]]);bi.year=Da.year.utc;Da.scale.utc=function(){return fg(Q.scale.linear(),bi,yi)};Q.text=rb(function(b){return b.responseText});Q.json=function(b,a){return Eb(b,
"application/json",yh,a)};Q.html=function(b,a){return Eb(b,"text/html",zh,a)};Q.xml=rb(function(b){return b.responseXML});"object"===typeof t&&t.exports?t.exports=Q:this.d3=Q}()},{}],155:[function(a,t,m){t.exports=function(){for(var a=0;a<arguments.length;a++)if(void 0!==arguments[a])return arguments[a]}},{}],156:[function(a,t,m){function p(b,a){this.point=b;this.index=a}function g(b,a){b=b.point;a=a.point;for(var e=b.length,g=0;g<e;++g){var d=a[g]-b[g];if(d)return d}return 0}function h(b,a,e){if(1===
b)return e?[[-1,0]]:[];a=a.map(function(b,a){return[b[0],a]});a.sort(function(b,a){return b[0]-a[0]});for(var g=Array(b-1),d=1;d<b;++d)g[d-1]=[a[d-1][1],a[d][1]];e&&g.push([-1,g[0][1]],[g[b-1][1],-1]);return g}var e=a("incremental-convex-hull"),n=a("uniq");t.exports=function(b,a){var l=b.length;if(0===l)return[];var q=b[0].length;if(1>q)return[];if(1===q)return h(l,b,a);for(var d=Array(l),f=1,c=0;c<l;++c){for(var k=b[c],r=Array(q+1),v=0,z=0;z<q;++z){var A=k[z];r[z]=A;v+=A*A}r[q]=v;d[c]=new p(r,c);
f=Math.max(v,f)}n(d,g);l=d.length;b=Array(l+q+1);var y=Array(l+q+1);k=Array(q+1);for(c=0;c<=q;++c)k[c]=0;k[q]=(q+1)*(q+1)*f;b[0]=k.slice();y[0]=-1;for(c=0;c<=q;++c)r=k.slice(),r[c]=1,b[c+1]=r,y[c+1]=-1;for(c=0;c<l;++c)f=d[c],b[c+q+1]=f.point,y[c+q+1]=f.index;l=e(b,!1);l=a?l.filter(function(b){for(var a=0,c=0;c<=q;++c){var d=y[b[c]];if(0>d&&2<=++a)return!1;b[c]=d}return!0}):l.filter(function(b){for(var a=0;a<=q;++a){var c=y[b[a]];if(0>c)return!1;b[a]=c}return!0});if(q&1)for(c=0;c<l.length;++c)f=l[c],
r=f[0],f[0]=f[1],f[1]=r;return l}},{"incremental-convex-hull":405,uniq:531}],157:[function(a,t,m){function p(a,b){Array.isArray(a)&&(a=a.join(", "));var l={},n=16,q=.05;if(b)if(2===b.length&&"number"===typeof b[0])var d=g(b);else Array.isArray(b)?d=b:(b.o?d=g(b.o):b.pairs&&(d=b.pairs),b.fontSize&&(n=b.fontSize),null!=b.threshold&&(q=b.threshold));d||(d=e);h.font=n+"px "+a;for(a=0;a<d.length;a++){b=d[a];var f=h.measureText(b[0]).width+h.measureText(b[1]).width,c=h.measureText(b).width;Math.abs(f-c)>
n*q&&(l[b]=(c-f)/n*1E3)}return l}function g(a){for(var b=[],e=a[0];e<=a[1];e++)for(var g=String.fromCharCode(e),h=a[0];h<a[1];h++){var d=String.fromCharCode(h);b.push(g+d)}return b}t.exports=p;var h=(p.canvas=document.createElement("canvas")).getContext("2d"),e=g([32,126]);p.createPairs=g;p.ascii=e},{}],158:[function(a,t,m){(function(a){var g=!1;if("undefined"!==typeof Float64Array){var h=new Float64Array(1),e=new Uint32Array(h.buffer);h[0]=1;g=!0;1072693248===e[1]?(t.exports=function(b){h[0]=b;return[e[0],
e[1]]},t.exports.pack=function(b,a){e[0]=b;e[1]=a;return h[0]},t.exports.lo=function(b){h[0]=b;return e[0]},t.exports.hi=function(b){h[0]=b;return e[1]}):1072693248===e[0]?(t.exports=function(b){h[0]=b;return[e[1],e[0]]},t.exports.pack=function(b,a){e[1]=b;e[0]=a;return h[0]},t.exports.lo=function(b){h[0]=b;return e[1]},t.exports.hi=function(b){h[0]=b;return e[0]}):g=!1}if(!g){var n=new a(8);t.exports=function(b){n.writeDoubleLE(b,0,!0);return[n.readUInt32LE(0,!0),n.readUInt32LE(4,!0)]};t.exports.pack=
function(b,a){n.writeUInt32LE(b,0,!0);n.writeUInt32LE(a,4,!0);return n.readDoubleLE(0,!0)};t.exports.lo=function(b){n.writeDoubleLE(b,0,!0);return n.readUInt32LE(0,!0)};t.exports.hi=function(b){n.writeDoubleLE(b,0,!0);return n.readUInt32LE(4,!0)}}t.exports.sign=function(b){return t.exports.hi(b)>>>31};t.exports.exponent=function(b){return(t.exports.hi(b)<<1>>>21)-1023};t.exports.fraction=function(b){var a=t.exports.lo(b);b=t.exports.hi(b);var e=b&1048575;b&2146435072&&(e+=1048576);return[a,e]};t.exports.denormalized=
function(b){return!(t.exports.hi(b)&2146435072)}}).call(this,a("buffer").Buffer)},{buffer:95}],159:[function(a,t,m){var p=a("abs-svg-path"),g=a("normalize-svg-path"),h={M:"moveTo",C:"bezierCurveTo"};t.exports=function(a,n){a.beginPath();g(p(n)).forEach(function(b){var e=b[0];b=b.slice(1);a[h[e]].apply(a,b)});a.closePath()}},{"abs-svg-path":50,"normalize-svg-path":444}],160:[function(a,t,m){t.exports=function(a){switch(a){case "int8":return Int8Array;case "int16":return Int16Array;case "int32":return Int32Array;
case "uint8":return Uint8Array;case "uint16":return Uint16Array;case "uint32":return Uint32Array;case "float32":return Float32Array;case "float64":return Float64Array;case "array":return Array;case "uint8_clamped":return Uint8ClampedArray}}},{}],161:[function(a,t,m){function p(a,h,e){var g=a[e]|0;if(0>=g)return[];var b=Array(g),l;if(e===a.length-1)for(l=0;l<g;++l)b[l]=h;else for(l=0;l<g;++l)b[l]=p(a,h,e+1);return b}t.exports=function(a,h){"undefined"===typeof h&&(h=0);switch(typeof a){case "number":if(0<
a){a|=0;var e;var g=Array(a);for(e=0;e<a;++e)g[e]=h;return g}break;case "object":if("number"===typeof a.length)return p(a,h,0)}return[]}},{}],162:[function(a,t,m){function p(a,c,d){d=d||2;var f=c&&c.length,k=f?c[0]*d:a.length,r=g(a,0,k,d,!0),n=[];if(!r)return n;var u;if(f){var p=d;f=[];var A;var z=0;for(A=c.length;z<A;z++){var w=c[z]*p;var x=z<A-1?c[z+1]*p:a.length;w=g(a,w,x,p,!1);w===w.next&&(w.steiner=!0);f.push(q(w))}f.sort(b);for(z=0;z<f.length;z++){c=f[z];p=r;if(p=l(c,p))c=v(p,c),h(c,c.next);
r=h(r,r.next)}}if(a.length>80*d){var y=u=a[0];var B=f=a[1];for(p=d;p<k;p+=d)z=a[p],c=a[p+1],z<y&&(y=z),c<B&&(B=c),z>u&&(u=z),c>f&&(f=c);u=Math.max(u-y,f-B);u=0!==u?1/u:0}e(r,n,d,y,B,u);return n}function g(b,a,d,f,e){if(e===0<w(b,a,d,f))for(e=a;e<d;e+=f)var k=z(e,b[e],b[e+1],k);else for(e=d-f;e>=a;e-=f)k=z(e,b[e],b[e+1],k);k&&c(k,k.next)&&(A(k),k=k.next);return k}function h(b,a){if(!b)return b;a||(a=b);do{var d=!1;if(b.steiner||!c(b,b.next)&&0!==f(b.prev,b,b.next))b=b.next;else{A(b);b=a=b.prev;if(b===
b.next)break;d=!0}}while(d||b!==a);return a}function e(b,a,g,l,q,p,z){if(b){if(!z&&p){var w=b,x=w;do null===x.z&&(x.z=u(x.x,x.y,l,q,p)),x.prevZ=x.prev,x=x.nextZ=x.next;while(x!==w);x.prevZ.nextZ=null;x.prevZ=null;w=x;var y,B,m,F,C=1;do{x=w;var t=w=null;for(B=0;x;){B++;var D=x;for(y=m=0;y<C&&(m++,D=D.nextZ,D);y++);for(F=C;0<m||0<F&&D;)0!==m&&(0===F||!D||x.z<=D.z)?(y=x,x=x.nextZ,m--):(y=D,D=D.nextZ,F--),t?t.nextZ=y:w=y,y.prevZ=t,t=y;x=D}t.nextZ=null;C*=2}while(1<B)}for(w=b;b.prev!==b.next;){x=b.prev;
D=b.next;if(p)t=n(b,l,q,p);else a:if(t=b,B=t.prev,m=t,C=t.next,0<=f(B,m,C))t=!1;else{for(y=t.next.next;y!==t.prev;){if(d(B.x,B.y,m.x,m.y,C.x,C.y,y.x,y.y)&&0<=f(y.prev,y,y.next)){t=!1;break a}y=y.next}t=!0}if(t)a.push(x.i/g),a.push(b.i/g),a.push(D.i/g),A(b),w=b=D.next;else if(b=D,b===w){if(!z)e(h(b),a,g,l,q,p,1);else if(1===z){z=a;w=g;x=b;do D=x.prev,t=x.next.next,!c(D,t)&&k(D,x,x.next,t)&&r(D,t)&&r(t,D)&&(z.push(D.i/w),z.push(x.i/w),z.push(t.i/w),A(x),A(x.next),x=b=t),x=x.next;while(x!==b);b=x;e(b,
a,g,l,q,p,2)}else if(2===z)a:{z=b;do{for(w=z.next.next;w!==z.prev;){if(x=z.i!==w.i){x=z;D=w;if(t=x.next.i!==D.i&&x.prev.i!==D.i){b:{t=x;do{if(t.i!==x.i&&t.next.i!==x.i&&t.i!==D.i&&t.next.i!==D.i&&k(t,t.next,x,D)){t=!0;break b}t=t.next}while(t!==x);t=!1}t=!t}if(t=t&&r(x,D)&&r(D,x)){t=x;B=!1;m=(x.x+D.x)/2;D=(x.y+D.y)/2;do t.y>D!==t.next.y>D&&t.next.y!==t.y&&m<(t.next.x-t.x)*(D-t.y)/(t.next.y-t.y)+t.x&&(B=!B),t=t.next;while(t!==x);t=B}x=t}if(x){b=v(z,w);z=h(z,z.next);b=h(b,b.next);e(z,a,g,l,q,p);e(b,
a,g,l,q,p);break a}w=w.next}z=z.next}while(z!==b)}break}}}}function n(b,a,c,e){var k=b.prev,r=b.next;if(0<=f(k,b,r))return!1;var g=k.x>b.x?k.x>r.x?k.x:r.x:b.x>r.x?b.x:r.x,l=k.y>b.y?k.y>r.y?k.y:r.y:b.y>r.y?b.y:r.y,h=u(k.x<b.x?k.x<r.x?k.x:r.x:b.x<r.x?b.x:r.x,k.y<b.y?k.y<r.y?k.y:r.y:b.y<r.y?b.y:r.y,a,c,e);a=u(g,l,a,c,e);c=b.prevZ;for(e=b.nextZ;c&&c.z>=h&&e&&e.z<=a;){if(c!==b.prev&&c!==b.next&&d(k.x,k.y,b.x,b.y,r.x,r.y,c.x,c.y)&&0<=f(c.prev,c,c.next))return!1;c=c.prevZ;if(e!==b.prev&&e!==b.next&&d(k.x,
k.y,b.x,b.y,r.x,r.y,e.x,e.y)&&0<=f(e.prev,e,e.next))return!1;e=e.nextZ}for(;c&&c.z>=h;){if(c!==b.prev&&c!==b.next&&d(k.x,k.y,b.x,b.y,r.x,r.y,c.x,c.y)&&0<=f(c.prev,c,c.next))return!1;c=c.prevZ}for(;e&&e.z<=a;){if(e!==b.prev&&e!==b.next&&d(k.x,k.y,b.x,b.y,r.x,r.y,e.x,e.y)&&0<=f(e.prev,e,e.next))return!1;e=e.nextZ}return!0}function b(b,a){return b.x-a.x}function l(b,a){var c=a,f=b.x,e=b.y,k=-Infinity;do{if(e<=c.y&&e>=c.next.y&&c.next.y!==c.y){var g=c.x+(e-c.y)*(c.next.x-c.x)/(c.next.y-c.y);if(g<=f&&
g>k){k=g;if(g===f){if(e===c.y)return c;if(e===c.next.y)return c.next}var l=c.x<c.next.x?c:c.next}}c=c.next}while(c!==a);if(!l)return null;if(f===k)return l.prev;a=l;g=l.x;var h=l.y,q=Infinity;for(c=l.next;c!==a;){if(f>=c.x&&c.x>=g&&f!==c.x&&d(e<h?f:k,e,g,h,e<h?k:f,e,c.x,c.y)){var n=Math.abs(e-c.y)/(f-c.x);(n<q||n===q&&c.x>l.x)&&r(c,b)&&(l=c,q=n)}c=c.next}return l}function u(b,a,c,d,f){b=32767*(b-c)*f;a=32767*(a-d)*f;b=(b|b<<8)&16711935;b=(b|b<<4)&252645135;b=(b|b<<2)&858993459;a=(a|a<<8)&16711935;
a=(a|a<<4)&252645135;a=(a|a<<2)&858993459;return(b|b<<1)&1431655765|((a|a<<1)&1431655765)<<1}function q(b){var a=b,c=b;do a.x<c.x&&(c=a),a=a.next;while(a!==b);return c}function d(b,a,c,d,f,e,k,r){return 0<=(f-k)*(a-r)-(b-k)*(e-r)&&0<=(b-k)*(d-r)-(c-k)*(a-r)&&0<=(c-k)*(e-r)-(f-k)*(d-r)}function f(b,a,c){return(a.y-b.y)*(c.x-a.x)-(a.x-b.x)*(c.y-a.y)}function c(b,a){return b.x===a.x&&b.y===a.y}function k(b,a,d,e){return c(b,a)&&c(d,e)||c(b,e)&&c(d,a)?!0:0<f(b,a,d)!==0<f(b,a,e)&&0<f(d,e,b)!==0<f(d,e,
a)}function r(b,a){return 0>f(b.prev,b,b.next)?0<=f(b,a,b.next)&&0<=f(b,b.prev,a):0>f(b,a,b.prev)||0>f(b,b.next,a)}function v(b,a){var c=new y(b.i,b.x,b.y),d=new y(a.i,a.x,a.y),f=b.next,e=a.prev;b.next=a;a.prev=b;c.next=f;f.prev=c;d.next=c;c.prev=d;e.next=d;d.prev=e;return d}function z(b,a,c,d){b=new y(b,a,c);d?(b.next=d.next,b.prev=d,d.next.prev=b,d.next=b):(b.prev=b,b.next=b);return b}function A(b){b.next.prev=b.prev;b.prev.next=b.next;b.prevZ&&(b.prevZ.nextZ=b.nextZ);b.nextZ&&(b.nextZ.prevZ=b.prevZ)}
function y(b,a,c){this.i=b;this.x=a;this.y=c;this.nextZ=this.prevZ=this.z=this.next=this.prev=null;this.steiner=!1}function w(b,a,c,d){for(var f=0,e=c-d;a<c;a+=d)f+=(b[e]-b[a])*(b[a+1]+b[e+1]),e=a;return f}t.exports=p;t.exports.default=p;p.deviation=function(b,a,c,d){var f=a&&a.length,e=Math.abs(w(b,0,f?a[0]*c:b.length,c));if(f){f=0;for(var k=a.length;f<k;f++)e-=Math.abs(w(b,a[f]*c,f<k-1?a[f+1]*c:b.length,c))}for(f=a=0;f<d.length;f+=3){k=d[f]*c;var r=d[f+1]*c,g=d[f+2]*c;a+=Math.abs((b[k]-b[g])*(b[r+
1]-b[k+1])-(b[k]-b[r])*(b[g+1]-b[k+1]))}return 0===e&&0===a?0:Math.abs((a-e)/e)};p.flatten=function(b){for(var a=b[0][0].length,c={vertices:[],holes:[],dimensions:a},d=0,f=0;f<b.length;f++){for(var e=0;e<b[f].length;e++)for(var k=0;k<a;k++)c.vertices.push(b[f][e][k]);0<f&&(d+=b[f-1].length,c.holes.push(d))}return c}},{}],163:[function(a,t,m){t.exports=function(a,h){var e=a.length;if("number"!==typeof h){for(var g=h=0;g<e;++g){var b=a[g];h=Math.max(h,b[0],b[1])}h=(h|0)+1}h|=0;var l=Array(h);for(g=
0;g<h;++g)l[g]=[];for(g=0;g<e;++g)b=a[g],l[b[0]].push(b[1]),l[b[1]].push(b[0]);for(a=0;a<h;++a)p(l[a],function(b,a){return b-a});return l};var p=a("uniq")},{uniq:531}],164:[function(a,t,m){var p=a("strongly-connected-components");t.exports=function(a){function g(b){q[b]=!1;d.hasOwnProperty(b)&&Object.keys(d[b]).forEach(function(a){delete d[b][a];q[a]&&g(a)})}function e(b){var a=!1;u.push(b);q[b]=!0;var k;for(k=0;k<f[b].length;k++){var r=f[b][k];r===c?(a=c,a=[].concat(u).concat(a),l.push(a),a=!0):
q[r]||(a=e(r))}if(a)g(b);else for(k=0;k<f[b].length;k++){r=f[b][k];var h=d[r];h||(h={},d[r]=h);h[r]=!0}u.pop();return a}function n(b){for(var c=0;c<a.length;c++)c<b&&(a[c]=[]),a[c]=a[c].filter(function(a){return a>=b})}function b(b){n(b);var c=p(a).components.filter(function(b){return 1<b.length});b=Infinity;for(var d,f=0;f<c.length;f++)for(var e=0;e<c[f].length;e++)c[f][e]<b&&(b=c[f][e],d=f);var k=c[d];if(!k)return!1;d=a.map(function(b,a){return-1===k.indexOf(a)?[]:b.filter(function(b){return-1!==
k.indexOf(b)})});return{leastVertex:b,adjList:d}}var l=[],u=[],q=[],d={},f=[];var c=0;for(var k=a.length;c<k;){var r=b(c);c=r.leastVertex;if(f=r.adjList){for(r=0;r<f.length;r++)for(var v=0;v<f[r].length;v++){var z=f[r][v];q[+z]=!1;d[z]={}}e(c);c+=1}else c=k}return l}},{"strongly-connected-components":514}],165:[function(a,t,m){var p=a("../../object/valid-value");t.exports=function(){p(this).length=0;return this}},{"../../object/valid-value":197}],166:[function(a,t,m){t.exports=a("./is-implemented")()?
Array.from:a("./shim")},{"./is-implemented":167,"./shim":168}],167:[function(a,t,m){t.exports=function(){var a=Array.from;if("function"!==typeof a)return!1;var g=["raz","dwa"];a=a(g);return!(!a||a===g||"dwa"!==a[1])}},{}],168:[function(a,t,m){var p=a("es6-symbol").iterator,g=a("../../function/is-arguments"),h=a("../../function/is-function"),e=a("../../number/to-pos-integer"),n=a("../../object/valid-callable"),b=a("../../object/valid-value"),l=a("../../object/is-value"),u=a("../../string/is-string"),
q=Array.isArray,d=Function.prototype.call,f={configurable:!0,enumerable:!0,writable:!0,value:null},c=Object.defineProperty;t.exports=function(a,r,v){var k,A;a=Object(b(a));l(r)&&n(r);if(this&&this!==Array&&h(this))var y=this;else{if(!r){if(g(a)){var w=a.length;if(1!==w)return Array.apply(null,a);var x=Array(1);x[0]=a[0];return x}if(q(a)){x=Array(w=a.length);for(k=0;k<w;++k)x[k]=a[k];return x}}x=[]}if(!q(a))if(void 0!==(k=a[p])){w=n(k).call(a);y&&(x=new y);var m=w.next();for(k=0;!m.done;)m=r?d.call(r,
v,m.value,k):m.value,y?(f.value=m,c(x,k,f)):x[k]=m,m=w.next(),++k;w=k}else if(u(a)){w=a.length;y&&(x=new y);for(A=k=0;k<w;++k){m=a[k];if(k+1<w){var B=m.charCodeAt(0);55296<=B&&56319>=B&&(m+=a[++k])}m=r?d.call(r,v,m,A):m;y?(f.value=m,c(x,A,f)):x[A]=m;++A}w=A}if(void 0===w)for(w=e(a.length),y&&(x=new y(w)),k=0;k<w;++k)m=r?d.call(r,v,a[k],k):a[k],y?(f.value=m,c(x,k,f)):x[k]=m;y&&(f.value=null,x.length=w);return x}},{"../../function/is-arguments":169,"../../function/is-function":170,"../../number/to-pos-integer":176,
"../../object/is-value":186,"../../object/valid-callable":195,"../../object/valid-value":197,"../../string/is-string":201,"es6-symbol":211}],169:[function(a,t,m){var p=Object.prototype.toString,g=p.call(function(){return arguments}());t.exports=function(a){return p.call(a)===g}},{}],170:[function(a,t,m){var p=Object.prototype.toString,g=p.call(a("./noop"));t.exports=function(a){return"function"===typeof a&&p.call(a)===g}},{"./noop":171}],171:[function(a,t,m){t.exports=function(){}},{}],172:[function(a,
t,m){t.exports=a("./is-implemented")()?Math.sign:a("./shim")},{"./is-implemented":173,"./shim":174}],173:[function(a,t,m){t.exports=function(){var a=Math.sign;return"function"!==typeof a?!1:1===a(10)&&-1===a(-20)}},{}],174:[function(a,t,m){t.exports=function(a){a=Number(a);return isNaN(a)||0===a?a:0<a?1:-1}},{}],175:[function(a,t,m){var p=a("../math/sign"),g=Math.abs,h=Math.floor;t.exports=function(a){if(isNaN(a))return 0;a=Number(a);return 0!==a&&isFinite(a)?p(a)*h(g(a)):a}},{"../math/sign":172}],
176:[function(a,t,m){var p=a("./to-integer"),g=Math.max;t.exports=function(a){return g(0,p(a))}},{"./to-integer":175}],177:[function(a,t,m){var p=a("./valid-callable"),g=a("./valid-value"),h=Function.prototype.bind,e=Function.prototype.call,n=Object.keys,b=Object.prototype.propertyIsEnumerable;t.exports=function(a,u){return function(l,d,f,c){l=Object(g(l));p(d);var k=n(l);c&&k.sort("function"===typeof c?h.call(c,l):void 0);"function"!==typeof a&&(a=k[a]);return e.call(a,k,function(a,c){return b.call(l,
a)?e.call(d,f,l[a],a,l,c):u})}}},{"./valid-callable":195,"./valid-value":197}],178:[function(a,t,m){t.exports=a("./is-implemented")()?Object.assign:a("./shim")},{"./is-implemented":179,"./shim":180}],179:[function(a,t,m){t.exports=function(){var a=Object.assign;if("function"!==typeof a)return!1;var g={foo:"raz"};a(g,{bar:"dwa"},{trzy:"trzy"});return"razdwatrzy"===g.foo+g.bar+g.trzy}},{}],180:[function(a,t,m){var p=a("../keys"),g=a("../valid-value"),h=Math.max;t.exports=function(a,n){var b,e,u=h(arguments.length,
2);a=Object(g(a));var q=function(d){try{a[d]=n[d]}catch(f){b||(b=f)}};for(e=1;e<u;++e)n=arguments[e],p(n).forEach(q);if(void 0!==b)throw b;return a}},{"../keys":187,"../valid-value":197}],181:[function(a,t,m){var p=a("../array/from"),g=a("./assign"),h=a("./valid-value");t.exports=function(a,n,b){var e=Object(h(a)),u=Object(b);if(e!==a&&!n)return e;var q={};n?p(n,function(b){if(u.ensure||b in a)q[b]=a[b]}):g(q,a);return q}},{"../array/from":166,"./assign":178,"./valid-value":197}],182:[function(a,
t,m){var p=Object.create,g;a("./set-prototype-of/is-implemented")()||(g=a("./set-prototype-of/shim"));t.exports=function(){if(!g||1!==g.level)return p;var a={};var e={};var n={configurable:!1,enumerable:!1,writable:!0,value:void 0};Object.getOwnPropertyNames(Object.prototype).forEach(function(b){e[b]="__proto__"===b?{configurable:!0,enumerable:!1,writable:!0,value:void 0}:n});Object.defineProperties(a,e);Object.defineProperty(g,"nullPolyfill",{configurable:!1,enumerable:!1,writable:!1,value:a});return function(b,
e){return p(null===b?a:b,e)}}()},{"./set-prototype-of/is-implemented":193,"./set-prototype-of/shim":194}],183:[function(a,t,m){t.exports=a("./_iterate")("forEach")},{"./_iterate":177}],184:[function(a,t,m){t.exports=function(a){return"function"===typeof a}},{}],185:[function(a,t,m){var p=a("./is-value"),g={function:!0,object:!0};t.exports=function(a){return p(a)&&g[typeof a]||!1}},{"./is-value":186}],186:[function(a,t,m){var p=a("../function/noop")();t.exports=function(a){return a!==p&&null!==a}},
{"../function/noop":171}],187:[function(a,t,m){t.exports=a("./is-implemented")()?Object.keys:a("./shim")},{"./is-implemented":188,"./shim":189}],188:[function(a,t,m){t.exports=function(){try{return Object.keys("primitive"),!0}catch(p){return!1}}},{}],189:[function(a,t,m){var p=a("../is-value"),g=Object.keys;t.exports=function(a){return g(p(a)?Object(a):a)}},{"../is-value":186}],190:[function(a,t,m){var p=a("./valid-callable"),g=a("./for-each"),h=Function.prototype.call;t.exports=function(a,n,b){var e=
{};p(n);g(a,function(a,g,d,f){e[g]=h.call(n,b,a,g,d,f)});return e}},{"./for-each":183,"./valid-callable":195}],191:[function(a,t,m){var p=a("./is-value"),g=Array.prototype.forEach,h=Object.create;t.exports=function(a){var e=h(null);g.call(arguments,function(b){if(p(b)){b=Object(b);for(var a in b)e[a]=b[a]}});return e}},{"./is-value":186}],192:[function(a,t,m){t.exports=a("./is-implemented")()?Object.setPrototypeOf:a("./shim")},{"./is-implemented":193,"./shim":194}],193:[function(a,t,m){var p=Object.create,
g=Object.getPrototypeOf,h={};t.exports=function(a){var e=Object.setPrototypeOf;return"function"!==typeof e?!1:g(e((a||p)(null),h))===h}},{}],194:[function(a,t,m){var p=a("../is-object"),g=a("../valid-value"),h=Object.prototype.isPrototypeOf,e=Object.defineProperty,n={configurable:!0,enumerable:!1,writable:!0,value:void 0};var b=function(b,a){g(b);if(null===a||p(a))return b;throw new TypeError("Prototype must be null or an object");};t.exports=function(a){if(!a)return null;if(2===a.level)if(a.set){var g=
a.set;var l=function(a,f){g.call(b(a,f),f);return a}}else l=function(a,f){b(a,f).__proto__=f;return a};else l=function k(a,c){var f;b(a,c);(f=h.call(k.nullPolyfill,a))&&delete k.nullPolyfill.__proto__;null===c&&(c=k.nullPolyfill);a.__proto__=c;f&&e(k.nullPolyfill,"__proto__",n);return a};return Object.defineProperty(l,"level",{configurable:!1,enumerable:!1,writable:!1,value:a.level})}(function(){var b=Object.create(null),a={},e=Object.getOwnPropertyDescriptor(Object.prototype,"__proto__");if(e){try{var d=
e.set;d.call(b,a)}catch(f){}if(Object.getPrototypeOf(b)===a)return{set:d,level:2}}b.__proto__=a;if(Object.getPrototypeOf(b)===a)return{level:2};b={};b.__proto__=a;return Object.getPrototypeOf(b)===a?{level:1}:!1}());a("../create")},{"../create":182,"../is-object":185,"../valid-value":197}],195:[function(a,t,m){t.exports=function(a){if("function"!==typeof a)throw new TypeError(a+" is not a function");return a}},{}],196:[function(a,t,m){var p=a("./is-object");t.exports=function(a){if(!p(a))throw new TypeError(a+
" is not an Object");return a}},{"./is-object":185}],197:[function(a,t,m){var p=a("./is-value");t.exports=function(a){if(!p(a))throw new TypeError("Cannot use null or undefined");return a}},{"./is-value":186}],198:[function(a,t,m){t.exports=a("./is-implemented")()?String.prototype.contains:a("./shim")},{"./is-implemented":199,"./shim":200}],199:[function(a,t,m){t.exports=function(){return"function"!==typeof"razdwatrzy".contains?!1:!0==="razdwatrzy".contains("dwa")&&!1==="razdwatrzy".contains("foo")}},
{}],200:[function(a,t,m){var p=String.prototype.indexOf;t.exports=function(a,h){return-1<p.call(this,a,h)}},{}],201:[function(a,t,m){var p=Object.prototype.toString,g=p.call("");t.exports=function(a){return"string"===typeof a||a&&"object"===typeof a&&(a instanceof String||p.call(a)===g)||!1}},{}],202:[function(a,t,m){var p=Object.create(null),g=Math.random;t.exports=function(){do var a=g().toString(36).slice(2);while(p[a]);return a}},{}],203:[function(a,t,m){m=a("es5-ext/object/set-prototype-of");
var p=a("es5-ext/string/#/contains"),g=a("d"),h=a("es6-symbol"),e=a("./"),n=Object.defineProperty;var b=t.exports=function(a,h){if(!(this instanceof b))throw new TypeError("Constructor requires 'new'");e.call(this,a);h=h?p.call(h,"key+value")?"key+value":p.call(h,"key")?"key":"value":"value";n(this,"__kind__",g("",h))};m&&m(b,e);delete b.prototype.constructor;b.prototype=Object.create(e.prototype,{_resolve:g(function(b){return"value"===this.__kind__?this.__list__[b]:"key+value"===this.__kind__?[b,
this.__list__[b]]:b})});n(b.prototype,h.toStringTag,g("c","Array Iterator"))},{"./":206,d:141,"es5-ext/object/set-prototype-of":192,"es5-ext/string/#/contains":198,"es6-symbol":211}],204:[function(a,t,m){var p=a("es5-ext/function/is-arguments"),g=a("es5-ext/object/valid-callable"),h=a("es5-ext/string/is-string"),e=a("./get"),n=Array.isArray,b=Function.prototype.call,l=Array.prototype.some;t.exports=function(a,q,d){var f,c;n(a)||p(a)?f="array":h(a)?f="string":a=e(a);g(q);var k=function(){c=!0};if("array"===
f)l.call(a,function(a){b.call(q,d,a,k);return c});else if("string"===f){var r=a.length;for(f=0;f<r;++f){var u=a[f];if(f+1<r){var z=u.charCodeAt(0);55296<=z&&56319>=z&&(u+=a[++f])}b.call(q,d,u,k);if(c)break}}else for(f=a.next();!f.done;){b.call(q,d,f.value,k);if(c)break;f=a.next()}}},{"./get":205,"es5-ext/function/is-arguments":169,"es5-ext/object/valid-callable":195,"es5-ext/string/is-string":201}],205:[function(a,t,m){var p=a("es5-ext/function/is-arguments"),g=a("es5-ext/string/is-string"),h=a("./array"),
e=a("./string"),n=a("./valid-iterable"),b=a("es6-symbol").iterator;t.exports=function(a){return"function"===typeof n(a)[b]?a[b]():p(a)?new h(a):g(a)?new e(a):new h(a)}},{"./array":203,"./string":208,"./valid-iterable":209,"es5-ext/function/is-arguments":169,"es5-ext/string/is-string":201,"es6-symbol":211}],206:[function(a,t,m){var p=a("es5-ext/array/#/clear");m=a("es5-ext/object/assign");var g=a("es5-ext/object/valid-callable"),h=a("es5-ext/object/valid-value"),e=a("d"),n=a("d/auto-bind"),b=a("es6-symbol"),
l=Object.defineProperty,u=Object.defineProperties,q;t.exports=q=function(b,a){if(!(this instanceof q))throw new TypeError("Constructor requires 'new'");u(this,{__list__:e("w",h(b)),__context__:e("w",a),__nextIndex__:e("w",0)});a&&(g(a.on),a.on("_add",this._onAdd),a.on("_delete",this._onDelete),a.on("_clear",this._onClear))};delete q.prototype.constructor;u(q.prototype,m({_next:e(function(){if(this.__list__){if(this.__redo__){var b=this.__redo__.shift();if(void 0!==b)return b}if(this.__nextIndex__<
this.__list__.length)return this.__nextIndex__++;this._unBind()}}),next:e(function(){return this._createResult(this._next())}),_createResult:e(function(b){return void 0===b?{done:!0,value:void 0}:{done:!1,value:this._resolve(b)}}),_resolve:e(function(b){return this.__list__[b]}),_unBind:e(function(){this.__list__=null;delete this.__redo__;this.__context__&&(this.__context__.off("_add",this._onAdd),this.__context__.off("_delete",this._onDelete),this.__context__.off("_clear",this._onClear),this.__context__=
null)}),toString:e(function(){return"[object "+(this[b.toStringTag]||"Object")+"]"})},n({_onAdd:e(function(b){b>=this.__nextIndex__||(++this.__nextIndex__,this.__redo__?(this.__redo__.forEach(function(a,c){a>=b&&(this.__redo__[c]=++a)},this),this.__redo__.push(b)):l(this,"__redo__",e("c",[b])))}),_onDelete:e(function(b){if(!(b>=this.__nextIndex__)&&(--this.__nextIndex__,this.__redo__)){var a=this.__redo__.indexOf(b);-1!==a&&this.__redo__.splice(a,1);this.__redo__.forEach(function(a,d){a>b&&(this.__redo__[d]=
--a)},this)}}),_onClear:e(function(){this.__redo__&&p.call(this.__redo__);this.__nextIndex__=0})})));l(q.prototype,b.iterator,e(function(){return this}))},{d:141,"d/auto-bind":140,"es5-ext/array/#/clear":165,"es5-ext/object/assign":178,"es5-ext/object/valid-callable":195,"es5-ext/object/valid-value":197,"es6-symbol":211}],207:[function(a,t,m){var p=a("es5-ext/function/is-arguments"),g=a("es5-ext/object/is-value"),h=a("es5-ext/string/is-string"),e=a("es6-symbol").iterator,n=Array.isArray;t.exports=
function(b){return g(b)?n(b)||h(b)||p(b)?!0:"function"===typeof b[e]:!1}},{"es5-ext/function/is-arguments":169,"es5-ext/object/is-value":186,"es5-ext/string/is-string":201,"es6-symbol":211}],208:[function(a,t,m){m=a("es5-ext/object/set-prototype-of");var p=a("d"),g=a("es6-symbol"),h=a("./"),e=Object.defineProperty;var n=t.exports=function(b){if(!(this instanceof n))throw new TypeError("Constructor requires 'new'");b=String(b);h.call(this,b);e(this,"__length__",p("",b.length))};m&&m(n,h);delete n.prototype.constructor;
n.prototype=Object.create(h.prototype,{_next:p(function(){if(this.__list__){if(this.__nextIndex__<this.__length__)return this.__nextIndex__++;this._unBind()}}),_resolve:p(function(b){b=this.__list__[b];if(this.__nextIndex__===this.__length__)return b;var a=b.charCodeAt(0);return 55296<=a&&56319>=a?b+this.__list__[this.__nextIndex__++]:b})});e(n.prototype,g.toStringTag,p("c","String Iterator"))},{"./":206,d:141,"es5-ext/object/set-prototype-of":192,"es6-symbol":211}],209:[function(a,t,m){var p=a("./is-iterable");
t.exports=function(a){if(!p(a))throw new TypeError(a+" is not iterable");return a}},{"./is-iterable":207}],210:[function(a,t,m){(function(p,g){(function(a,e){"object"===typeof m&&"undefined"!==typeof t?t.exports=e():a.ES6Promise=e()})(this,function(){function h(){return function(){return p.nextTick(u)}}function e(){return function(){O(u)}}function n(){var b=0,a=new S(u),c=document.createTextNode("");a.observe(c,{characterData:!0});return function(){c.data=b=++b%2}}function b(){var b=new MessageChannel;
b.port1.onmessage=u;return function(){return b.port2.postMessage(0)}}function l(){var b=setTimeout;return function(){return b(u,1)}}function u(){for(var b=0;b<N;b+=2)(0,da[b])(da[b+1]),da[b]=void 0,da[b+1]=void 0;N=0}function q(){try{var b=a("vertx");O=b.runOnLoop||b.runOnContext;return e()}catch(oa){return l()}}function d(b,a){var d=arguments,f=this,e=new this.constructor(c);void 0===e[Y]&&E(e);var k=f._state;k?function(){var b=d[k-1];T(function(){return G(k,e,b,f._result)})}():B(f,e,b,a);return e}
function f(b){if(b&&"object"===typeof b&&b.constructor===this)return b;var a=new this(c);y(a,b);return a}function c(){}function k(b){try{return b.then}catch(oa){return na.error=oa,na}}function r(b,a,c,d){try{b.call(a,c,d)}catch(qa){return qa}}function v(b,a,c){T(function(b){var d=!1,f=r(c,a,function(c){d||(d=!0,a!==c?y(b,c):x(b,c))},function(a){d||(d=!0,m(b,a))},"Settle: "+(b._label||" unknown promise"));!d&&f&&(d=!0,m(b,f))},b)}function z(b,a){a._state===ea?x(b,a._result):a._state===U?m(b,a._result):
B(a,void 0,function(a){return y(b,a)},function(a){return m(b,a)})}function A(b,a,c){a.constructor===b.constructor&&c===d&&a.constructor.resolve===f?z(b,a):c===na?m(b,na.error):void 0===c?x(b,a):"function"===typeof c?v(b,a,c):x(b,a)}function y(b,a){b===a?m(b,new TypeError("You cannot resolve a promise with itself")):"function"===typeof a||"object"===typeof a&&null!==a?A(b,a,k(a)):x(b,a)}function w(b){b._onerror&&b._onerror(b._result);C(b)}function x(b,a){b._state===W&&(b._result=a,b._state=ea,0!==
b._subscribers.length&&T(C,b))}function m(b,a){b._state===W&&(b._state=U,b._result=a,T(w,b))}function B(b,a,c,d){var f=b._subscribers,e=f.length;b._onerror=null;f[e]=a;f[e+ea]=c;f[e+U]=d;0===e&&b._state&&T(C,b)}function C(b){var a=b._subscribers,c=b._state;if(0!==a.length){for(var d,f,e=b._result,k=0;k<a.length;k+=3)d=a[k],f=a[k+c],d?G(c,d,f,e):f(e);b._subscribers.length=0}}function t(){this.error=null}function G(b,a,c,d){var f="function"===typeof c,e=void 0,k=void 0,r=void 0,g=void 0;if(f){try{e=
c(d)}catch(wa){X.error=wa,e=X}e===X?(g=!0,k=e.error,e=null):r=!0;if(a===e){m(a,new TypeError("A promises callback cannot return that same promise."));return}}else e=d,r=!0;a._state===W&&(f&&r?y(a,e):g?m(a,k):b===ea?x(a,e):b===U&&m(a,e))}function H(b,a){try{a(function(a){y(b,a)},function(a){m(b,a)})}catch(ua){m(b,ua)}}function E(b){b[Y]=ha++;b._state=void 0;b._result=void 0;b._subscribers=[]}function K(b,a){this._instanceConstructor=b;this.promise=new b(c);this.promise[Y]||E(this.promise);M(a)?(this._input=
a,this._remaining=this.length=a.length,this._result=Array(this.length),0===this.length?x(this.promise,this._result):(this.length=this.length||0,this._enumerate(),0===this._remaining&&x(this.promise,this._result))):m(this.promise,Error("Array Methods must be provided an Array"))}function I(b){this[Y]=ha++;this._result=this._state=void 0;this._subscribers=[];if(c!==b){if("function"!==typeof b)throw new TypeError("You must pass a resolver function as the first argument to the promise constructor");if(this instanceof
I)H(this,b);else throw new TypeError("Failed to construct 'Promise': Please use the 'new' operator, this object constructor cannot be called as a function.");}}function J(){var b=void 0;if("undefined"!==typeof g)b=g;else if("undefined"!==typeof self)b=self;else try{b=Function("return this")()}catch(Z){throw Error("polyfill failed because global object is unavailable in this environment");}var a=b.Promise;if(a){var c=null;try{c=Object.prototype.toString.call(a.resolve())}catch(Z){}if("[object Promise]"===
c&&!a.cast)return}b.Promise=I}var L=void 0,M=L=Array.isArray?Array.isArray:function(b){return"[object Array]"===Object.prototype.toString.call(b)},N=0,O=void 0,R=void 0,T=function(b,a){da[N]=b;da[N+1]=a;N+=2;2===N&&(R?R(u):ca())},P=(L="undefined"!==typeof window?window:void 0)||{},S=P.MutationObserver||P.WebKitMutationObserver;P="undefined"===typeof self&&"undefined"!==typeof p&&"[object process]"==={}.toString.call(p);var ba="undefined"!==typeof Uint8ClampedArray&&"undefined"!==typeof importScripts&&
"undefined"!==typeof MessageChannel,da=Array(1E3),ca=void 0;ca=P?h():S?n():ba?b():void 0===L&&"function"===typeof a?q():l();var Y=Math.random().toString(36).substring(16),W=void 0,ea=1,U=2,na=new t,X=new t,ha=0;K.prototype._enumerate=function(){for(var b=this.length,a=this._input,c=0;this._state===W&&c<b;c++)this._eachEntry(a[c],c)};K.prototype._eachEntry=function(b,a){var e=this._instanceConstructor,r=e.resolve;r===f?(r=k(b),r===d&&b._state!==W?this._settledAt(b._state,a,b._result):"function"!==
typeof r?(this._remaining--,this._result[a]=b):e===I?(e=new e(c),A(e,b,r),this._willSettleAt(e,a)):this._willSettleAt(new e(function(a){return a(b)}),a)):this._willSettleAt(r(b),a)};K.prototype._settledAt=function(b,a,c){var d=this.promise;d._state===W&&(this._remaining--,b===U?m(d,c):this._result[a]=c);0===this._remaining&&x(d,this._result)};K.prototype._willSettleAt=function(b,a){var c=this;B(b,void 0,function(b){return c._settledAt(ea,a,b)},function(b){return c._settledAt(U,a,b)})};I.all=function(b){return(new K(this,
b)).promise};I.race=function(b){var a=this;return M(b)?new a(function(c,d){for(var f=b.length,e=0;e<f;e++)a.resolve(b[e]).then(c,d)}):new a(function(b,a){return a(new TypeError("You must pass an array to race."))})};I.resolve=f;I.reject=function(b){var a=new this(c);m(a,b);return a};I._setScheduler=function(b){R=b};I._setAsap=function(b){T=b};I._asap=T;I.prototype={constructor:I,then:d,"catch":function(b){return this.then(null,b)}};J();I.polyfill=J;return I.Promise=I})}).call(this,a("_process"),"undefined"!==
typeof ja?ja:"undefined"!==typeof self?self:"undefined"!==typeof window?window:{})},{_process:474}],211:[function(a,t,m){$jscomp.initSymbol();t.exports=a("./is-implemented")()?Symbol:a("./polyfill")},{"./is-implemented":212,"./polyfill":214}],212:[function(a,t,m){var p={object:!0,symbol:!0};t.exports=function(){$jscomp.initSymbol();if("function"!==typeof Symbol)return!1;$jscomp.initSymbol();var a=Symbol("test symbol");try{String(a)}catch(h){return!1}$jscomp.initSymbol();$jscomp.initSymbolIterator();
if(!p[typeof Symbol.iterator])return!1;$jscomp.initSymbol();if(!p[typeof Symbol.toPrimitive])return!1;$jscomp.initSymbol();return p[typeof Symbol.toStringTag]?!0:!1}},{}],213:[function(a,t,m){t.exports=function(a){return a?"symbol"===typeof a?!0:a.constructor&&"Symbol"===a.constructor.name?"Symbol"===a[a.constructor.toStringTag]:!1:!1}},{}],214:[function(a,t,m){var p=a("d"),g=a("./validate-symbol"),h=Object.create,e=Object.defineProperties,n=Object.defineProperty,b=Object.prototype,l,u=h(null);$jscomp.initSymbol();
if("function"===typeof Symbol){$jscomp.initSymbol();var q=Symbol;try{String(q());var d=!0}catch(k){}}var f=function(){var a=h(null);return function(c){for(var d=0,f,e;a[c+(d||"")];)++d;c+=d||"";a[c]=!0;f="@@"+c;n(b,f,p.gs(null,function(b){e||(e=!0,n(this,f,p(b)),e=!1)}));return f}}();var c=function(b){if(this instanceof c)throw new TypeError("Symbol is not a constructor");return l(b)};t.exports=l=function v(b){if(this instanceof v)throw new TypeError("Symbol is not a constructor");if(d)return q(b);
var a=h(c.prototype);b=void 0===b?"":String(b);return e(a,{__description__:p("",b),__name__:p("",f(b))})};e(l,{for:p(function(b){return u[b]?u[b]:u[b]=l(String(b))}),keyFor:p(function(b){var a;g(b);for(a in u)if(u[a]===b)return a}),hasInstance:p("",q&&q.hasInstance||l("hasInstance")),isConcatSpreadable:p("",q&&q.isConcatSpreadable||l("isConcatSpreadable")),iterator:p("",q&&q.iterator||l("iterator")),match:p("",q&&q.match||l("match")),replace:p("",q&&q.replace||l("replace")),search:p("",q&&q.search||
l("search")),species:p("",q&&q.species||l("species")),split:p("",q&&q.split||l("split")),toPrimitive:p("",q&&q.toPrimitive||l("toPrimitive")),toStringTag:p("",q&&q.toStringTag||l("toStringTag")),unscopables:p("",q&&q.unscopables||l("unscopables"))});e(c.prototype,{constructor:p(l),toString:p("",function(){return this.__name__})});e(l.prototype,{toString:p(function(){return"Symbol ("+g(this).__description__+")"}),valueOf:p(function(){return g(this)})});n(l.prototype,l.toPrimitive,p("",function(){var b=
g(this);return"symbol"===typeof b?b:b.toString()}));n(l.prototype,l.toStringTag,p("c","Symbol"));n(c.prototype,l.toStringTag,p("c",l.prototype[l.toStringTag]));n(c.prototype,l.toPrimitive,p("c",l.prototype[l.toPrimitive]))},{"./validate-symbol":215,d:141}],215:[function(a,t,m){var p=a("./is-symbol");t.exports=function(a){if(!p(a))throw new TypeError(a+" is not a symbol");return a}},{"./is-symbol":213}],216:[function(a,t,m){t.exports=a("./is-implemented")()?WeakMap:a("./polyfill")},{"./is-implemented":217,
"./polyfill":219}],217:[function(a,t,m){t.exports=function(){var a;if("function"!==typeof WeakMap)return!1;try{var g=new WeakMap([[a={},"one"],[{},"two"],[{},"three"]])}catch(h){return!1}return"[object WeakMap]"!==String(g)||"function"!==typeof g.set||g.set({},1)!==g||"function"!==typeof g.delete||"function"!==typeof g.has||"one"!==g.get(a)?!1:!0}},{}],218:[function(a,t,m){a="function"!==typeof WeakMap?!1:"[object WeakMap]"===Object.prototype.toString.call(new WeakMap);t.exports=a},{}],219:[function(a,
t,m){var p=a("es5-ext/object/set-prototype-of"),g=a("es5-ext/object/valid-object"),h=a("es5-ext/object/valid-value"),e=a("es5-ext/string/random-uniq"),n=a("d"),b=a("es6-iterator/get"),l=a("es6-iterator/for-of");m=a("es6-symbol").toStringTag;var u=a("./is-native-implemented"),q=Array.isArray,d=Object.defineProperty,f=Object.prototype.hasOwnProperty,c=Object.getPrototypeOf,k;t.exports=k=function(a){if(!(this instanceof k))throw new TypeError("Constructor requires 'new'");var f=u&&p&&WeakMap!==k?p(new WeakMap,
c(this)):this;null!=a&&(q(a)||(a=b(a)));d(f,"__weakMapData__",n("c","$weakMap$"+e()));if(!a)return f;l(a,function(b){h(b);f.set(b[0],b[1])});return f};u&&(p&&p(k,WeakMap),k.prototype=Object.create(WeakMap.prototype,{constructor:n(k)}));Object.defineProperties(k.prototype,{delete:n(function(b){return f.call(g(b),this.__weakMapData__)?(delete b[this.__weakMapData__],!0):!1}),get:n(function(b){if(f.call(g(b),this.__weakMapData__))return b[this.__weakMapData__]}),has:n(function(b){return f.call(g(b),
this.__weakMapData__)}),set:n(function(b,a){d(g(b),this.__weakMapData__,n("c",a));return this}),toString:n(function(){return"[object WeakMap]"})});d(k.prototype,m,n("c","WeakMap"))},{"./is-native-implemented":218,d:141,"es5-ext/object/set-prototype-of":192,"es5-ext/object/valid-object":196,"es5-ext/object/valid-value":197,"es5-ext/string/random-uniq":202,"es6-iterator/for-of":204,"es6-iterator/get":205,"es6-symbol":211}],220:[function(a,t,m){t.exports=function(a,g,h){g=g||0;h=h||1;return[[a[12]+a[0],
a[13]+a[1],a[14]+a[2],a[15]+a[3]],[a[12]-a[0],a[13]-a[1],a[14]-a[2],a[15]-a[3]],[a[12]+a[4],a[13]+a[5],a[14]+a[6],a[15]+a[7]],[a[12]-a[4],a[13]-a[5],a[14]-a[6],a[15]-a[7]],[g*a[12]+a[8],g*a[13]+a[9],g*a[14]+a[10],g*a[15]+a[11]],[h*a[12]-a[8],h*a[13]-a[9],h*a[14]-a[10],h*a[15]-a[11]]]}},{}],221:[function(a,t,m){var p=a("is-string-blank");t.exports=function(a){var g=typeof a;if("string"===g){if(g=a,a=+a,0===a&&p(g))return!1}else if("number"!==g)return!1;return 1>a-a}},{"is-string-blank":415}],222:[function(a,
t,m){function p(b,a,e){return Math.min(a,Math.max(b,e))}function g(b,a,e){this.dimension=b.length;this.bounds=[Array(this.dimension),Array(this.dimension)];for(var g=0;g<this.dimension;++g)this.bounds[0][g]=-Infinity,this.bounds[1][g]=Infinity;this._state=b.slice().reverse();this._velocity=a.slice().reverse();this._time=[e];this._scratch=[b.slice(),b.slice(),b.slice(),b.slice(),b.slice()]}function h(b){for(var a=Array(b),e=0;e<b;++e)a[e]=0;return a}t.exports=function(b,a,e){switch(arguments.length){case 0:return new g([0],
[0],0);case 1:if("number"===typeof b){var l=h(b);return new g(l,l,0)}return new g(b,h(b.length),0);case 2:if("number"===typeof a)return l=h(b.length),new g(b,l,+a);e=0;case 3:if(b.length!==a.length)throw Error("state and velocity lengths must match");return new g(b,a,e)}};var e=a("cubic-hermite"),n=a("binary-search-bounds");a=g.prototype;a.flush=function(b){b=n.gt(this._time,b)-1;0>=b||(this._time.splice(0,b),this._state.splice(0,b*this.dimension),this._velocity.splice(0,b*this.dimension))};a.curve=
function(b){var a=this._time,g=a.length,h=n.le(a,b),d=this._scratch[0],f=this._state,c=this._velocity,k=this.dimension,r=this.bounds;if(0>h){var v=k-1;for(a=0;a<k;++a,--v)d[a]=f[v]}else if(h>=g-1)for(v=f.length-1,b-=a[g-1],a=0;a<k;++a,--v)d[a]=f[v]+b*c[v];else{v=k*(h+1)-1;g=a[h];h=a[h+1]-g||1;var z=this._scratch[1],A=this._scratch[2],y=this._scratch[3],w=this._scratch[4],x=!0;for(a=0;a<k;++a,--v)z[a]=f[v],y[a]=c[v]*h,A[a]=f[v+k],w[a]=c[v+k]*h,x=x&&z[a]===A[a]&&y[a]===w[a]&&0===y[a];if(x)for(a=0;a<
k;++a)d[a]=z[a];else e(z,y,A,w,(b-g)/h,d)}f=r[0];r=r[1];for(a=0;a<k;++a)d[a]=p(f[a],r[a],d[a]);return d};a.dcurve=function(b){var a=this._time,g=a.length,h=n.le(a,b),d=this._scratch[0],f=this._state,c=this._velocity,k=this.dimension;if(h>=g-1)for(g=f.length-1,a=0;a<k;++a,--g)d[a]=c[g];else{g=k*(h+1)-1;var r=a[h];h=a[h+1]-r||1;var v=this._scratch[1],p=this._scratch[2],A=this._scratch[3],y=this._scratch[4],w=!0;for(a=0;a<k;++a,--g)v[a]=f[g],A[a]=c[g]*h,p[a]=f[g+k],y[a]=c[g+k]*h,w=w&&v[a]===p[a]&&A[a]===
y[a]&&0===A[a];if(w)for(a=0;a<k;++a)d[a]=0;else for(e.derivative(v,A,p,y,(b-r)/h,d),a=0;a<k;++a)d[a]/=h}return d};a.lastT=function(){var b=this._time;return b[b.length-1]};a.stable=function(){for(var b=this._velocity,a=b.length,e=this.dimension-1;0<=e;--e)if(b[--a])return!1;return!0};a.jump=function(b){var a=this.lastT(),e=this.dimension;if(!(b<a||arguments.length!==e+1)){var g=this._state,d=this._velocity,f=g.length-this.dimension,c=this.bounds,k=c[0];c=c[1];this._time.push(a,b);for(a=0;2>a;++a)for(var r=
0;r<e;++r)g.push(g[f++]),d.push(0);this._time.push(b);for(r=e;0<r;--r)g.push(p(k[r-1],c[r-1],arguments[r])),d.push(0)}};a.push=function(b){var a=this.lastT(),e=this.dimension;if(!(b<a||arguments.length!==e+1)){var g=this._state,d=this._velocity,f=g.length-this.dimension,c=b-a,k=this.bounds;a=k[0];k=k[1];c=1E-6<c?1/c:0;for(this._time.push(b);0<e;--e){var r=p(a[e-1],k[e-1],arguments[e]);g.push(r);d.push((r-g[f++])*c)}}};a.set=function(b){var a=this.dimension;if(!(b<this.lastT()||arguments.length!==
a+1)){var e=this._state,g=this._velocity,d=this.bounds,f=d[0];d=d[1];for(this._time.push(b);0<a;--a)e.push(p(f[a-1],d[a-1],arguments[a])),g.push(0)}};a.move=function(b){var a=this.lastT(),e=this.dimension;if(!(b<=a||arguments.length!==e+1)){var g=this._state,d=this._velocity,f=g.length-this.dimension,c=this.bounds,k=c[0];c=c[1];a=b-a;a=1E-6<a?1/a:0;for(this._time.push(b);0<e;--e){var r=arguments[e];g.push(p(k[e-1],c[e-1],g[f++]+r));d.push(r*a)}}};a.idle=function(b){var a=this.lastT();if(!(b<a)){var e=
this.dimension,g=this._state,d=this._velocity,f=g.length-e,c=this.bounds,k=c[0];c=c[1];a=b-a;this._time.push(b);for(b=e-1;0<=b;--b)g.push(p(k[b],c[b],g[f]+a*d[f])),d.push(0),f+=1}}},{"binary-search-bounds":81,"cubic-hermite":135}],223:[function(a,t,m){var p=a("dtype");t.exports=function(a,h,e){if(!a)throw new TypeError("must specify data as first parameter");e=+(e||0)|0;if(Array.isArray(a)&&a[0]&&"number"===typeof a[0][0]){var g=a[0].length,b=a.length*g;h&&"string"!==typeof h||(h=new (p(h||"float32"))(b+
e));var l=h.length-e;if(b!==l)throw Error("source length "+b+" ("+g+"x"+a.length+") does not match destination length "+l);for(b=0;b<a.length;b++)for(l=0;l<g;l++)h[e++]=null===a[b][l]?NaN:a[b][l]}else if(h&&"string"!==typeof h)h.set(a,e);else if(g=p(h||"float32"),Array.isArray(a)||"array"===h)for(h=new g(a.length+e),b=0,g=h.length;e<g;e++,b++)h[e]=null===a[b]?NaN:a[b];else 0===e?h=new g(a):(h=new g(a.length+e),h.set(a,e));return h}},{dtype:160}],224:[function(a,t,m){var p=a("css-font/stringify"),
g=[32,126];t.exports=function(a){a=a||{};var e=a.shape?a.shape:a.canvas?[a.canvas.width,a.canvas.height]:[512,512],h=a.canvas||document.createElement("canvas"),b=a.font,l="number"===typeof a.step?[a.step,a.step]:a.step||[32,32];a=a.chars||g;b&&"string"!==typeof b&&(b=p(b));if(!Array.isArray(a))a=String(a).split("");else if(2===a.length&&"number"===typeof a[0]&&"number"===typeof a[1]){for(var u=[],q=a[0],d=0;q<=a[1];q++)u[d++]=String.fromCharCode(q);a=u}e=e.slice();h.width=e[0];h.height=e[1];u=h.getContext("2d");
u.fillStyle="#000";u.fillRect(0,0,h.width,h.height);u.font=b;u.textAlign="center";u.textBaseline="middle";u.fillStyle="#fff";b=l[0]/2;d=l[1]/2;for(q=0;q<a.length;q++)u.fillText(a[q],b,d),(b+=l[0])>e[0]-l[0]/2&&(b=l[0]/2,d+=l[1]);return h}},{"css-font/stringify":132}],225:[function(a,t,m){function p(a,b){b||(b={});if("string"===typeof a||Array.isArray(a))b.family=a;var l=Array.isArray(b.family)?b.family.join(", "):b.family;if(!l)throw Error("`family` must be defined");var n=b.size||b.fontSize||b.em||
48;a=[b.style||b.fontStyle||"",b.weight||b.fontWeight||"",n].join(" ")+"px "+l;var q=b.origin||"top";if(p.cache[l]&&n<=p.cache[l].em)return g(p.cache[l],q);var d=b.canvas||p.canvas,f=d.getContext("2d"),c=void 0!==b.upper?b.upper:"H",k=void 0!==b.lower?b.lower:"x",r=void 0!==b.descent?b.descent:"p",v=void 0!==b.ascent?b.ascent:"h",z=void 0!==b.tittle?b.tittle:"i";b=void 0!==b.overshoot?b.overshoot:"O";var A=Math.ceil(1.5*n);d.height=A;d.width=.5*A;f.font=a;a={top:0};f.clearRect(0,0,A,A);f.textBaseline=
"top";f.fillStyle="black";f.fillText("H",0,0);d=h(f.getImageData(0,0,A,A));f.clearRect(0,0,A,A);f.textBaseline="bottom";f.fillText("H",0,A);var y=h(f.getImageData(0,0,A,A));a.lineHeight=a.bottom=A-y+d;f.clearRect(0,0,A,A);f.textBaseline="alphabetic";f.fillText("H",0,A);y=h(f.getImageData(0,0,A,A));y=A-y-1+d;a.baseline=a.alphabetic=y;f.clearRect(0,0,A,A);f.textBaseline="middle";f.fillText("H",0,.5*A);var w=h(f.getImageData(0,0,A,A));a.median=a.middle=A-w-1+d-.5*A;f.clearRect(0,0,A,A);f.textBaseline=
"hanging";f.fillText("H",0,.5*A);w=h(f.getImageData(0,0,A,A));a.hanging=A-w-1+d-.5*A;f.clearRect(0,0,A,A);f.textBaseline="ideographic";f.fillText("H",0,A);w=h(f.getImageData(0,0,A,A));a.ideographic=A-w-1+d;c&&(f.clearRect(0,0,A,A),f.textBaseline="top",f.fillText(c,0,0),a.upper=h(f.getImageData(0,0,A,A)),a.capHeight=a.baseline-a.upper);k&&(f.clearRect(0,0,A,A),f.textBaseline="top",f.fillText(k,0,0),a.lower=h(f.getImageData(0,0,A,A)),a.xHeight=a.baseline-a.lower);z&&(f.clearRect(0,0,A,A),f.textBaseline=
"top",f.fillText(z,0,0),a.tittle=h(f.getImageData(0,0,A,A)));v&&(f.clearRect(0,0,A,A),f.textBaseline="top",f.fillText(v,0,0),a.ascent=h(f.getImageData(0,0,A,A)));r&&(f.clearRect(0,0,A,A),f.textBaseline="top",f.fillText(r,0,0),a.descent=e(f.getImageData(0,0,A,A)));b&&(f.clearRect(0,0,A,A),f.textBaseline="top",f.fillText(b,0,0),f=e(f.getImageData(0,0,A,A)),a.overshoot=f-y);for(var x in a)a[x]/=n;a.em=n;p.cache[l]=a;return g(a,q)}function g(a,b){var e={};"string"===typeof b&&(b=a[b]);for(var g in a)"em"!==
g&&(e[g]=a[g]-b);return e}function h(a){var b=a.height;a=a.data;for(var e=3;e<a.length;e+=4)if(0!==a[e])return Math.floor(.25*(e-3)/b)}function e(a){var b=a.height;a=a.data;for(var e=a.length-1;0<e;e-=4)if(0!==a[e])return Math.floor(.25*(e-3)/b)}t.exports=p;p.canvas=document.createElement("canvas");p.cache={}},{}],226:[function(a,t,m){function p(b,a,d,f,e,g){this._color=b;this.key=a;this.value=d;this.left=f;this.right=e;this._count=g}function g(b){return new p(b._color,b.key,b.value,b.left,b.right,
b._count)}function h(b,a){return new p(b,a.key,a.value,a.left,a.right,a._count)}function e(b){b._count=1+(b.left?b.left._count:0)+(b.right?b.right._count:0)}function n(b,a){this._compare=b;this.root=a}function b(a,d){if(d.left){var c=b(a,d.left);if(c)return c}if(c=a(d.key,d.value))return c;if(d.right)return b(a,d.right)}function l(b,a,d,f){if(0>=a(b,f.key)){if(f.left){var c=l(b,a,d,f.left);if(c)return c}if(c=d(f.key,f.value))return c}if(f.right)return l(b,a,d,f.right)}function u(b,a,d,f,e){var c=
d(b,e.key),k=d(a,e.key);if(0>=c&&(e.left&&(c=u(b,a,d,f,e.left))||0<k&&(c=f(e.key,e.value))))return c;if(0<k&&e.right)return u(b,a,d,f,e.right)}function q(b,a){this.tree=b;this._stack=a}function d(b,a){b.key=a.key;b.value=a.value;b.left=a.left;b.right=a.right;b._color=a._color;b._count=a._count}function f(b,a){return b<a?-1:b>a?1:0}t.exports=function(b){return new n(b||f,null)};a=n.prototype;Object.defineProperty(a,"keys",{get:function(){var b=[];this.forEach(function(a,c){b.push(a)});return b}});
Object.defineProperty(a,"values",{get:function(){var b=[];this.forEach(function(a,c){b.push(c)});return b}});Object.defineProperty(a,"length",{get:function(){return this.root?this.root._count:0}});a.insert=function(b,a){for(var c=this._compare,d=this.root,f=[],k=[];d;){var g=c(b,d.key);f.push(d);k.push(g);d=0>=g?d.left:d.right}f.push(new p(0,b,a,null,null,1));for(b=f.length-2;0<=b;--b)d=f[b],f[b]=0>=k[b]?new p(d._color,d.key,d.value,f[b+1],d.right,d._count+1):new p(d._color,d.key,d.value,d.left,f[b+
1],d._count+1);for(b=f.length-1;1<b;--b){k=f[b-1];d=f[b];if(1===k._color||1===d._color)break;a=f[b-2];if(a.left===k)if(k.left===d)if((g=a.right)&&0===g._color)k._color=1,a.right=h(1,g),a._color=0,--b;else{a._color=0;a.left=k.right;k._color=1;k.right=a;f[b-2]=k;f[b-1]=d;e(a);e(k);3<=b&&(b=f[b-3],b.left===a?b.left=k:b.right=k);break}else if((g=a.right)&&0===g._color)k._color=1,a.right=h(1,g),a._color=0,--b;else{k.right=d.left;a._color=0;a.left=d.right;d._color=1;d.left=k;d.right=a;f[b-2]=d;f[b-1]=k;
e(a);e(k);e(d);3<=b&&(b=f[b-3],b.left===a?b.left=d:b.right=d);break}else if(k.right===d)if((g=a.left)&&0===g._color)k._color=1,a.left=h(1,g),a._color=0,--b;else{a._color=0;a.right=k.left;k._color=1;k.left=a;f[b-2]=k;f[b-1]=d;e(a);e(k);3<=b&&(b=f[b-3],b.right===a?b.right=k:b.left=k);break}else if((g=a.left)&&0===g._color)k._color=1,a.left=h(1,g),a._color=0,--b;else{k.left=d.right;a._color=0;a.right=d.left;d._color=1;d.right=k;d.left=a;f[b-2]=d;f[b-1]=k;e(a);e(k);e(d);3<=b&&(b=f[b-3],b.right===a?b.right=
d:b.left=d);break}}f[0]._color=1;return new n(c,f[0])};a.forEach=function(a,d,f){if(this.root)switch(arguments.length){case 1:return b(a,this.root);case 2:return l(d,this._compare,a,this.root);case 3:if(!(0<=this._compare(d,f)))return u(d,f,this._compare,a,this.root)}};Object.defineProperty(a,"begin",{get:function(){for(var b=[],a=this.root;a;)b.push(a),a=a.left;return new q(this,b)}});Object.defineProperty(a,"end",{get:function(){for(var b=[],a=this.root;a;)b.push(a),a=a.right;return new q(this,
b)}});a.at=function(b){if(0>b)return new q(this,[]);for(var a=this.root,c=[];;){c.push(a);if(a.left){if(b<a.left._count){a=a.left;continue}b-=a.left._count}if(!b)return new q(this,c);--b;if(a.right){if(b>=a.right._count)break;a=a.right}else break}return new q(this,[])};a.ge=function(b){for(var a=this._compare,c=this.root,d=[],f=0;c;){var e=a(b,c.key);d.push(c);0>=e&&(f=d.length);c=0>=e?c.left:c.right}d.length=f;return new q(this,d)};a.gt=function(b){for(var a=this._compare,c=this.root,d=[],f=0;c;){var e=
a(b,c.key);d.push(c);0>e&&(f=d.length);c=0>e?c.left:c.right}d.length=f;return new q(this,d)};a.lt=function(b){for(var a=this._compare,c=this.root,d=[],f=0;c;){var e=a(b,c.key);d.push(c);0<e&&(f=d.length);c=0>=e?c.left:c.right}d.length=f;return new q(this,d)};a.le=function(b){for(var a=this._compare,c=this.root,d=[],f=0;c;){var e=a(b,c.key);d.push(c);0<=e&&(f=d.length);c=0>e?c.left:c.right}d.length=f;return new q(this,d)};a.find=function(b){for(var a=this._compare,c=this.root,d=[];c;){var f=a(b,c.key);
d.push(c);if(0===f)return new q(this,d);c=0>=f?c.left:c.right}return new q(this,[])};a.remove=function(b){return(b=this.find(b))?b.remove():this};a.get=function(b){for(var a=this._compare,c=this.root;c;){var d=a(b,c.key);if(0===d)return c.value;c=0>=d?c.left:c.right}};a=q.prototype;Object.defineProperty(a,"valid",{get:function(){return 0<this._stack.length}});Object.defineProperty(a,"node",{get:function(){return 0<this._stack.length?this._stack[this._stack.length-1]:null},enumerable:!0});a.clone=
function(){return new q(this.tree,this._stack.slice())};a.remove=function(){var b=this._stack;if(0===b.length)return this.tree;var a=Array(b.length),f=b[b.length-1];a[a.length-1]=new p(f._color,f.key,f.value,f.left,f.right,f._count);for(var l=b.length-2;0<=l;--l)f=b[l],a[l]=f.left===b[l+1]?new p(f._color,f.key,f.value,a[l+1],f.right,f._count):new p(f._color,f.key,f.value,f.left,a[l+1],f._count);f=a[a.length-1];if(f.left&&f.right){b=a.length;for(f=f.left;f.right;)a.push(f),f=f.right;l=a[b-1];a.push(new p(f._color,
l.key,l.value,f.left,f.right,f._count));a[b-1].key=f.key;a[b-1].value=f.value;for(l=a.length-2;l>=b;--l)f=a[l],a[l]=new p(f._color,f.key,f.value,f.left,a[l+1],f._count);a[b-1].left=a[b]}f=a[a.length-1];if(0===f._color)for(l=a[a.length-2],l.left===f?l.left=null:l.right===f&&(l.right=null),a.pop(),l=0;l<a.length;++l)a[l]._count--;else if(f.left||f.right)for(f.left?d(f,f.left):f.right&&d(f,f.right),f._color=1,l=0;l<a.length-1;++l)a[l]._count--;else{if(1===a.length)return new n(this.tree._compare,null);
for(l=0;l<a.length;++l)a[l]._count--;l=a[a.length-2];for(var q,u,y,w=a.length-1;0<=w;--w){b=a[w];if(0===w){b._color=1;break}q=a[w-1];if(q.left===b){u=q.right;if(u.right&&0===u.right._color){u=q.right=g(u);y=u.right=g(u.right);q.right=u.left;u.left=q;u.right=y;u._color=q._color;b._color=1;q._color=1;y._color=1;e(q);e(u);if(1<w){var x=a[w-2];x.left===q?x.left=u:x.right=u}a[w-1]=u;break}else if(u.left&&0===u.left._color){u=q.right=g(u);y=u.left=g(u.left);q.right=y.left;u.left=y.right;y.left=q;y.right=
u;y._color=q._color;q._color=1;u._color=1;b._color=1;e(q);e(u);e(y);1<w&&(x=a[w-2],x.left===q?x.left=y:x.right=y);a[w-1]=y;break}if(1===u._color)if(0===q._color){q._color=1;q.right=h(0,u);break}else q.right=h(0,u);else u=g(u),q.right=u.left,u.left=q,u._color=q._color,q._color=0,e(q),e(u),1<w&&(x=a[w-2],x.left===q?x.left=u:x.right=u),a[w-1]=u,a[w]=q,w+1<a.length?a[w+1]=b:a.push(b),w+=2}else{u=q.left;if(u.left&&0===u.left._color){u=q.left=g(u);y=u.left=g(u.left);q.left=u.right;u.right=q;u.left=y;u._color=
q._color;b._color=1;q._color=1;y._color=1;e(q);e(u);1<w&&(x=a[w-2],x.right===q?x.right=u:x.left=u);a[w-1]=u;break}else if(u.right&&0===u.right._color){u=q.left=g(u);y=u.right=g(u.right);q.left=y.right;u.right=y.left;y.right=q;y.left=u;y._color=q._color;q._color=1;u._color=1;b._color=1;e(q);e(u);e(y);1<w&&(x=a[w-2],x.right===q?x.right=y:x.left=y);a[w-1]=y;break}if(1===u._color)if(0===q._color){q._color=1;q.left=h(0,u);break}else q.left=h(0,u);else u=g(u),q.left=u.right,u.right=q,u._color=q._color,
q._color=0,e(q),e(u),1<w&&(x=a[w-2],x.right===q?x.right=u:x.left=u),a[w-1]=u,a[w]=q,w+1<a.length?a[w+1]=b:a.push(b),w+=2}}l.left===f?l.left=null:l.right=null}return new n(this.tree._compare,a[0])};Object.defineProperty(a,"key",{get:function(){if(0<this._stack.length)return this._stack[this._stack.length-1].key},enumerable:!0});Object.defineProperty(a,"value",{get:function(){if(0<this._stack.length)return this._stack[this._stack.length-1].value},enumerable:!0});Object.defineProperty(a,"index",{get:function(){var b=
0,a=this._stack;if(0===a.length)return(b=this.tree.root)?b._count:0;a[a.length-1].left&&(b=a[a.length-1].left._count);for(var d=a.length-2;0<=d;--d)a[d+1]===a[d].right&&(++b,a[d].left&&(b+=a[d].left._count));return b},enumerable:!0});a.next=function(){var b=this._stack;if(0!==b.length){var a=b[b.length-1];if(a.right)for(a=a.right;a;)b.push(a),a=a.left;else for(b.pop();0<b.length&&b[b.length-1].right===a;)a=b[b.length-1],b.pop()}};Object.defineProperty(a,"hasNext",{get:function(){var b=this._stack;
if(0===b.length)return!1;if(b[b.length-1].right)return!0;for(var a=b.length-1;0<a;--a)if(b[a-1].left===b[a])return!0;return!1}});a.update=function(b){var a=this._stack;if(0===a.length)throw Error("Can't update empty node!");var c=Array(a.length),d=a[a.length-1];c[c.length-1]=new p(d._color,d.key,b,d.left,d.right,d._count);for(b=a.length-2;0<=b;--b)d=a[b],c[b]=d.left===a[b+1]?new p(d._color,d.key,d.value,c[b+1],d.right,d._count):new p(d._color,d.key,d.value,d.left,c[b+1],d._count);return new n(this.tree._compare,
c[0])};a.prev=function(){var b=this._stack;if(0!==b.length){var a=b[b.length-1];if(a.left)for(a=a.left;a;)b.push(a),a=a.right;else for(b.pop();0<b.length&&b[b.length-1].left===a;)a=b[b.length-1],b.pop()}};Object.defineProperty(a,"hasPrev",{get:function(){var b=this._stack;if(0===b.length)return!1;if(b[b.length-1].left)return!0;for(var a=b.length-1;0<a;--a)if(b[a-1].right===b[a])return!0;return!1}})},{}],227:[function(a,t,m){function p(a){if(0>a)return Number("0/0");for(var e=h[0],b=h.length-1;0<b;--b)e+=
h[b]/(a+b);b=a+4.7421875+.5;return.5*Math.log(2*Math.PI)+(a+.5)*Math.log(b)-b+Math.log(e)-Math.log(a)}var g=[.9999999999998099,676.5203681218851,-1259.1392167224028,771.3234287776531,-176.6150291621406,12.507343278686905,-.13857109526572012,9.984369578019572E-6,1.5056327351493116E-7],h=[.9999999999999971,57.15623566586292,-59.59796035547549,14.136097974741746,-.4919138160976202,3.399464998481189E-5,4.652362892704858E-5,-9.837447530487956E-5,1.580887032249125E-4,-2.1026444172410488E-4,2.1743961811521265E-4,
-1.643181065367639E-4,8.441822398385275E-5,-2.6190838401581408E-5,3.6899182659531625E-6];t.exports=function b(a){if(.5>a)return Math.PI/(Math.sin(Math.PI*a)*b(1-a));if(100<a)return Math.exp(p(a));--a;for(var l=g[0],h=1;9>h;h++)l+=g[h]/(a+h);h=a+7+.5;return Math.sqrt(2*Math.PI)*Math.pow(h,a+.5)*Math.exp(-h)*l};t.exports.log=p},{}],228:[function(a,t,m){t.exports=function(a,g){if("string"!==typeof a)throw new TypeError("must specify type string");g=g||{};if("undefined"===typeof document&&!g.canvas)return null;
var h=g.canvas||document.createElement("canvas");"number"===typeof g.width&&(h.width=g.width);"number"===typeof g.height&&(h.height=g.height);var e;try{var n=[a];0===a.indexOf("webgl")&&n.push("experimental-"+a);for(a=0;a<n.length;a++)if(e=h.getContext(n[a],g))return e}catch(b){e=null}return e||null}},{}],229:[function(a,t,m){function p(b,a){b[0]=a[0];b[1]=a[1];b[2]=a[2];return b}function g(b){this.gl=b;this.pixelRatio=1;this.bounds=[[-10,-10,-10],[10,10,10]];this.ticks=[[],[],[]];this.autoTicks=
!0;this.tickSpacing=[1,1,1];this.tickEnable=[!0,!0,!0];this.tickFont=["sans-serif","sans-serif","sans-serif"];this.tickSize=[12,12,12];this.tickAngle=[0,0,0];this.tickAlign=["auto","auto","auto"];this.tickColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1]];this.tickPad=[10,10,10];this.lastCubeProps={cubeEdges:[0,0,0],axis:[0,0,0]};this.labels=["x","y","z"];this.labelEnable=[!0,!0,!0];this.labelFont="sans-serif";this.labelSize=[20,20,20];this.labelAngle=[0,0,0];this.labelAlign=["auto","auto","auto"];this.labelColor=
[[0,0,0,1],[0,0,0,1],[0,0,0,1]];this.labelPad=[10,10,10];this.lineEnable=[!0,!0,!0];this.lineMirror=[!1,!1,!1];this.lineWidth=[1,1,1];this.lineColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1]];this.lineTickEnable=[!0,!0,!0];this.lineTickMirror=[!1,!1,!1];this.lineTickLength=[0,0,0];this.lineTickWidth=[1,1,1];this.lineTickColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1]];this.gridEnable=[!0,!0,!0];this.gridWidth=[1,1,1];this.gridColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1]];this.zeroEnable=[!0,!0,!0];this.zeroLineColor=[[0,0,0,1],
[0,0,0,1],[0,0,0,1]];this.zeroLineWidth=[2,2,2];this.backgroundEnable=[!1,!1,!1];this.backgroundColor=[[.8,.8,.8,.5],[.8,.8,.8,.5],[.8,.8,.8,.5]];this._firstInit=!0;this._lines=this._text=null;this._background=l(b)}function h(){this.primalOffset=[0,0,0];this.primalMinor=[0,0,0];this.mirrorOffset=[0,0,0];this.mirrorMinor=[0,0,0]}function e(b,a,c,d,f){var e=b.primalOffset,k=b.primalMinor,r=b.mirrorOffset;b=b.mirrorMinor;d=d[a];for(var g=0;3>g;++g)if(a!==g){var l=e,h=r,q=k,n=b;d&1<<g&&(l=r,h=e,q=b,n=
k);l[g]=c[0][g];h[g]=c[1][g];0<f[g]?(q[g]=-1,n[g]=0):(q[g]=0,n[g]=1)}}t.exports=function(b,a){b=new g(b);b.update(a);return b};var n=a("./lib/text.js"),b=a("./lib/lines.js"),l=a("./lib/background.js"),u=a("./lib/cube.js"),q=a("./lib/ticks.js"),d=new Float32Array([1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]);a=g.prototype;a.update=function(a){function c(b,c,d){if(d in a){var f=a[d],e=this[d],k;(b?Array.isArray(f)&&Array.isArray(f[0]):Array.isArray(f))?this[d]=k=[c(f[0]),c(f[1]),c(f[2])]:this[d]=k=[c(f),c(f),
c(f)];for(b=0;3>b;++b)if(k[b]!==e[b])return!0}return!1}a=a||{};var d=c.bind(this,!1,Number),f=c.bind(this,!1,Boolean),e=c.bind(this,!1,String),k=c.bind(this,!0,function(b){if(Array.isArray(b)){if(3===b.length)return[+b[0],+b[1],+b[2],1];if(4===b.length)return[+b[0],+b[1],+b[2],+b[3]]}return[0,0,0,1]}),r=!1,g=!1;if("bounds"in a){var l=a.bounds,h=0;for(;2>h;++h)for(var u=0;3>u;++u)l[h][u]!==this.bounds[h][u]&&(g=!0),this.bounds[h][u]=l[h][u]}if("ticks"in a){var v=a.ticks;r=!0;this.autoTicks=!1;for(h=
0;3>h;++h)this.tickSpacing[h]=0}else d("tickSpacing")&&(g=this.autoTicks=!0);this._firstInit&&("ticks"in a||"tickSpacing"in a||(this.autoTicks=!0),r=g=!0,this._firstInit=!1);g&&this.autoTicks&&(v=q.create(this.bounds,this.tickSpacing),r=!0);if(r){for(h=0;3>h;++h)v[h].sort(function(b,a){return b.x-a.x});q.equal(v,this.ticks)?r=!1:this.ticks=v}f("tickEnable");e("tickFont")&&(r=!0);d("tickSize");d("tickAngle");d("tickPad");k("tickColor");v=e("labels");e("labelFont")&&(v=!0);f("labelEnable");d("labelSize");
d("labelPad");k("labelColor");f("lineEnable");f("lineMirror");d("lineWidth");k("lineColor");f("lineTickEnable");f("lineTickMirror");d("lineTickLength");d("lineTickWidth");k("lineTickColor");f("gridEnable");d("gridWidth");k("gridColor");f("zeroEnable");k("zeroLineColor");d("zeroLineWidth");f("backgroundEnable");k("backgroundColor");this._text?this._text&&(v||r)&&this._text.update(this.bounds,this.labels,this.labelFont,this.ticks,this.tickFont):this._text=n(this.gl,this.bounds,this.labels,this.labelFont,
this.ticks,this.tickFont);this._lines&&r&&(this._lines.dispose(),this._lines=null);this._lines||(this._lines=b(this.gl,this.bounds,this.ticks))};var f=[new h,new h,new h],c=[0,0,0],k={model:d,view:d,projection:d,_ortho:!1};a.isOpaque=function(){return!0};a.isTransparent=function(){return!1};a.drawTransparent=function(b){};var r=[0,0,0],v=[0,0,0],z=[0,0,0];a.draw=function(b){function a(b){J=[0,0,0];J[b]=1}function g(b,c,d){var f=(b+1)%3;b=(b+2)%3;var e=c[f];c=c[b];var k=d[f];d=d[b];0<e&&0<d?a(f):0<
e&&0>d?a(f):0>e&&0<d?a(f):0>e&&0>d?a(f):0<c&&0<k?a(b):0<c&&0>k?a(b):0>c&&0<k?a(b):0>c&&0>k&&a(b)}b=b||k;var l=this.gl,h=b.model||d,q=b.view||d,n=b.projection||d,A=this.bounds;b=b._ortho||!1;var m=u(h,q,n,A,b),t=m.cubeEdges;m=m.axis;b=(b?2:1)*this.pixelRatio*(n[3]*q[12]+n[7]*q[13]+n[11]*q[14]+n[15]*q[15])/l.drawingBufferHeight;for(l=0;3>l;++l)this.lastCubeProps.cubeEdges[l]=t[l],this.lastCubeProps.axis[l]=m[l];for(l=0;3>l;++l)e(f[l],l,this.bounds,t,m);l=this.gl;for(l=0;3>l;++l)c[l]=this.backgroundEnable[l]?
m[l]:0;this._background.draw(h,q,n,A,c,this.backgroundColor);this._lines.bind(h,q,n,this);for(l=0;3>l;++l){var E=[0,0,0];E[l]=0<m[l]?A[1][l]:A[0][l];for(t=0;2>t;++t){var K=(l+1+t)%3,I=(l+1+(t^1))%3;this.gridEnable[K]&&this._lines.drawGrid(K,I,this.bounds,E,this.gridColor[K],this.gridWidth[K]*this.pixelRatio)}for(t=0;2>t;++t)K=(l+1+t)%3,I=(l+1+(t^1))%3,this.zeroEnable[I]&&0>=Math.min(A[0][I],A[1][I])&&0<=Math.max(A[0][I],A[1][I])&&this._lines.drawZero(K,I,this.bounds,E,this.zeroLineColor[I],this.zeroLineWidth[I]*
this.pixelRatio)}for(l=0;3>l;++l){this.lineEnable[l]&&this._lines.drawAxisLine(l,this.bounds,f[l].primalOffset,this.lineColor[l],this.lineWidth[l]*this.pixelRatio);this.lineMirror[l]&&this._lines.drawAxisLine(l,this.bounds,f[l].mirrorOffset,this.lineColor[l],this.lineWidth[l]*this.pixelRatio);m=p(r,f[l].primalMinor);E=p(v,f[l].mirrorMinor);K=this.lineTickLength;for(t=0;3>t;++t)I=b/h[5*t],m[t]=m[t]*K[t]*I,E[t]=E[t]*K[t]*I;this.lineTickEnable[l]&&this._lines.drawAxisTicks(l,f[l].primalOffset,m,this.lineTickColor[l],
this.lineTickWidth[l]*this.pixelRatio);this.lineTickMirror[l]&&this._lines.drawAxisTicks(l,f[l].mirrorOffset,E,this.lineTickColor[l],this.lineTickWidth[l]*this.pixelRatio)}this._lines.unbind();this._text.bind(h,q,n,this.pixelRatio);for(l=0;3>l;++l){q=f[l].primalMinor;n=f[l].mirrorMinor;m=p(z,f[l].primalOffset);for(t=0;3>t;++t)this.lineTickEnable[l]&&(m[t]+=b*q[t]*Math.max(this.lineTickLength[t],0)/h[5*t]);E=[0,0,0];E[l]=1;if(this.tickEnable[l]){-3600===this.tickAngle[l]?(this.tickAngle[l]=0,this.tickAlign[l]=
"auto"):this.tickAlign[l]=-1;t=1;K=[this.tickAlign[l],.5,t];K[0]="auto"===K[0]?0:parseInt(""+K[0]);var J=[0,0,0];g(l,q,n);for(t=0;3>t;++t)m[t]+=b*q[t]*this.tickPad[t]/h[5*t];this._text.drawTicks(l,this.tickSize[l],this.tickAngle[l],m,this.tickColor[l],E,J,K)}if(this.labelEnable[l]){t=0;J=[0,0,0];4<this.labels[l].length&&(a(l),t=1);K=[this.labelAlign[l],.5,t];K[0]="auto"===K[0]?0:parseInt(""+K[0]);for(t=0;3>t;++t)m[t]+=b*q[t]*this.labelPad[t]/h[5*t];m[l]+=.5*(A[0][l]+A[1][l]);this._text.drawLabel(l,
this.labelSize[l],this.labelAngle[l],m,this.labelColor[l],[0,0,0],J,K)}}this._text.unbind()};a.dispose=function(){this._text.dispose();this._lines.dispose();this._background.dispose();this.gl=this._background=this._text=this._lines=null}},{"./lib/background.js":230,"./lib/cube.js":231,"./lib/lines.js":232,"./lib/text.js":234,"./lib/ticks.js":235}],230:[function(a,t,m){function p(a,b,e,g){this.gl=a;this.buffer=b;this.vao=e;this.shader=g}t.exports=function(a){for(var b=[],l=[],n=0,q=0;3>q;++q)for(var d=
(q+1)%3,f=(q+2)%3,c=[0,0,0],k=[0,0,0],r=-1;1>=r;r+=2){l.push(n,n+2,n+1,n+1,n+2,n+3);c[q]=r;k[q]=r;for(var v=-1;1>=v;v+=2){c[d]=v;for(var z=-1;1>=z;z+=2)c[f]=z,b.push(c[0],c[1],c[2],k[0],k[1],k[2]),n+=1}v=d;d=f;f=v}b=g(a,new Float32Array(b));l=g(a,new Uint16Array(l),a.ELEMENT_ARRAY_BUFFER);l=h(a,[{buffer:b,type:a.FLOAT,size:3,offset:0,stride:24},{buffer:b,type:a.FLOAT,size:3,offset:12,stride:24}],l);n=e(a);n.attributes.position.location=0;n.attributes.normal.location=1;return new p(a,b,l,n)};var g=
a("gl-buffer"),h=a("gl-vao"),e=a("./shaders").bg;a=p.prototype;a.draw=function(a,b,e,g,h,d){for(var f=!1,c=0;3>c;++c)f=f||h[c];f&&(f=this.gl,f.enable(f.POLYGON_OFFSET_FILL),f.polygonOffset(1,2),this.shader.bind(),this.shader.uniforms={model:a,view:b,projection:e,bounds:g,enable:h,colors:d},this.vao.bind(),this.vao.draw(this.gl.TRIANGLES,36),this.vao.unbind(),f.disable(f.POLYGON_OFFSET_FILL))};a.dispose=function(){this.vao.dispose();this.buffer.dispose();this.shader.dispose()}},{"./shaders":233,"gl-buffer":237,
"gl-vao":319}],231:[function(a,t,m){t.exports=function(a,v,z,A,y){g(n,v,a);g(n,z,n);for(a=v=0;2>a;++a)for(u[2]=A[a][2],z=0;2>z;++z){u[1]=A[z][1];for(var r=0;2>r;++r){u[0]=A[r][0];for(var x=b[v],m=u,B=n,t=0;4>t;++t){x[t]=B[12+t];for(var D=0;3>D;++D)x[t]+=m[D]*B[4*D+t]}v+=1}}A=-1;for(a=0;8>a;++a){v=b[a][3];for(z=0;3>z;++z)l[a][z]=b[a][z]/v;y&&(l[a][2]*=-1);0>v&&(0>A?A=a:l[a][2]<l[A][2]&&(A=a))}if(0>A)for(a=A=0;3>a;++a){v=(a+2)%3;y=(a+1)%3;r=z=-1;for(x=0;2>x;++x)m=x<<a,B=m+(x<<v)+(1-x<<y),t=m+(1-x<<
v)+(x<<y),0>e(l[m],l[B],l[t],q)||(x?z=1:r=1);if(!(0>z||0>r))for(x=0;2>x;++x){m=x<<a;B=m+(x<<v)+(1-x<<y);t=m+(1-x<<v)+(x<<y);a:{m=[b[m],b[B],b[t],b[m+(1<<v)+(1<<y)]];for(t=0;t<d.length;++t)if(m=h.positive(m,d[t]),3>m.length){m=0;break a}t=m[0];B=t[0]/t[3];D=t[1]/t[3];var G=0;for(t=1;t+1<m.length;++t){var H=m[t],E=m[t+1];G+=Math.abs((H[0]/H[3]-B)*(E[1]/E[3]-D)-(H[1]/H[3]-D)*(E[0]/E[3]-B))}m=G}x?z=m:r=m}r>z&&(A|=1<<a)}v=7^A;x=-1;for(a=0;8>a;++a)a!==A&&a!==v&&(0>x?x=a:l[x][1]>l[a][1]&&(x=a));z=-1;for(a=
0;3>a;++a)m=x^1<<a,m!==A&&m!==v&&(0>z&&(z=m),y=l[m],y[0]<l[z][0]&&(z=m));r=-1;for(a=0;3>a;++a)m=x^1<<a,m!==A&&m!==v&&m!==z&&(0>r&&(r=m),y=l[m],y[0]>l[r][0]&&(r=m));y=f;y[0]=y[1]=y[2]=0;y[p.log2(z^x)]=x&z;y[p.log2(x^r)]=x&r;a=r^7;a===A||a===v?(a=z^7,y[p.log2(r^a)]=a&r):y[p.log2(z^a)]=a&z;y=c;for(a=0;3>a;++a)y[a]=A&1<<a?-1:1;return k};var p=a("bit-twiddle"),g=a("gl-mat4/multiply"),h=a("split-polygon"),e=a("robust-orientation"),n=Array(16),b=Array(8),l=Array(8),u=Array(3),q=[0,0,0];(function(){for(var a=
0;8>a;++a)b[a]=[1,1,1,1],l[a]=[1,1,1]})();var d=[[0,0,1,0,0],[0,0,-1,1,0],[0,-1,0,1,0],[0,1,0,1,0],[-1,0,0,1,0],[1,0,0,1,0]],f=[1,1,1],c=[0,0,0],k={cubeEdges:f,axis:c}},{"bit-twiddle":82,"gl-mat4/multiply":263,"robust-orientation":494,"split-polygon":511}],232:[function(a,t,m){function p(b){b[0]=b[1]=b[2]=0;return b}function g(b,a){b[0]=a[0];b[1]=a[1];b[2]=a[2];return b}function h(b,a,d,f,e,g,l,h){this.gl=b;this.vertBuffer=a;this.vao=d;this.shader=f;this.tickCount=e;this.tickOffset=g;this.gridCount=
l;this.gridOffset=h}t.exports=function(a,d,f){var c=[];d=[0,0,0];var k=[0,0,0],r=[0,0,0],g=[0,0,0];c.push(0,0,1,0,1,1,0,0,-1,0,0,-1,0,1,1,0,1,-1);for(var l=0;3>l;++l){for(var q=c.length/3|0,u=0;u<f[l].length;++u){var p=+f[l][u].x;c.push(p,0,1,p,1,1,p,0,-1,p,0,-1,p,1,1,p,1,-1)}p=c.length/3|0;d[l]=q;k[l]=p-q;q=c.length/3|0;for(u=0;u<f[l].length;++u)p=+f[l][u].x,c.push(p,0,1,p,1,1,p,0,-1,p,0,-1,p,1,1,p,1,-1);p=c.length/3|0;r[l]=q;g[l]=p-q}f=e(a,new Float32Array(c));c=n(a,[{buffer:f,type:a.FLOAT,size:3,
stride:0,offset:0}]);l=b(a);l.attributes.position.location=0;return new h(a,f,c,l,k,d,g,r)};var e=a("gl-buffer"),n=a("gl-vao"),b=a("./shaders").line,l=[0,0,0],u=[0,0,0],q=[0,0,0],d=[0,0,0],f=[1,1];a=h.prototype;a.bind=function(b,a,d){this.shader.bind();this.shader.uniforms.model=b;this.shader.uniforms.view=a;this.shader.uniforms.projection=d;f[0]=this.gl.drawingBufferWidth;f[1]=this.gl.drawingBufferHeight;this.shader.uniforms.screenShape=f;this.vao.bind()};a.unbind=function(){this.vao.unbind()};a.drawAxisLine=
function(b,a,f,e,l){var c=p(u);this.shader.uniforms.majorAxis=u;c[b]=a[1][b]-a[0][b];this.shader.uniforms.minorAxis=c;f=g(d,f);f[b]+=a[0][b];this.shader.uniforms.offset=f;this.shader.uniforms.lineWidth=l;this.shader.uniforms.color=e;a=p(q);a[(b+2)%3]=1;this.shader.uniforms.screenAxis=a;this.vao.draw(this.gl.TRIANGLES,6);a=p(q);a[(b+1)%3]=1;this.shader.uniforms.screenAxis=a;this.vao.draw(this.gl.TRIANGLES,6)};a.drawAxisTicks=function(b,a,d,f,e){if(this.tickCount[b]){var c=p(l);c[b]=1;this.shader.uniforms.majorAxis=
c;this.shader.uniforms.offset=a;this.shader.uniforms.minorAxis=d;this.shader.uniforms.color=f;this.shader.uniforms.lineWidth=e;a=p(q);a[b]=1;this.shader.uniforms.screenAxis=a;this.vao.draw(this.gl.TRIANGLES,this.tickCount[b],this.tickOffset[b])}};a.drawGrid=function(b,a,f,e,h,n){if(this.gridCount[b]){var c=p(u);c[a]=f[1][a]-f[0][a];this.shader.uniforms.minorAxis=c;e=g(d,e);e[a]+=f[0][a];this.shader.uniforms.offset=e;a=p(l);a[b]=1;this.shader.uniforms.majorAxis=a;a=p(q);a[b]=1;this.shader.uniforms.screenAxis=
a;this.shader.uniforms.lineWidth=n;this.shader.uniforms.color=h;this.vao.draw(this.gl.TRIANGLES,this.gridCount[b],this.gridOffset[b])}};a.drawZero=function(b,a,f,e,l,h){var c=p(u);this.shader.uniforms.majorAxis=c;c[b]=f[1][b]-f[0][b];this.shader.uniforms.minorAxis=c;e=g(d,e);e[b]+=f[0][b];this.shader.uniforms.offset=e;b=p(q);b[a]=1;this.shader.uniforms.screenAxis=b;this.shader.uniforms.lineWidth=h;this.shader.uniforms.color=l;this.vao.draw(this.gl.TRIANGLES,6)};a.dispose=function(){this.vao.dispose();
this.vertBuffer.dispose();this.shader.dispose()}},{"./shaders":233,"gl-buffer":237,"gl-vao":319}],233:[function(a,t,m){t=a("glslify");var p=a("gl-shader"),g=t(["precision highp float;\n#define GLSLIFY 1\n\nattribute vec3 position;\n\nuniform mat4 model, view, projection;\nuniform vec3 offset, majorAxis, minorAxis, screenAxis;\nuniform float lineWidth;\nuniform vec2 screenShape;\n\nvec3 project(vec3 p) {\n  vec4 pp \x3d projection * view * model * vec4(p, 1.0);\n  return pp.xyz / max(pp.w, 0.0001);\n}\n\nvoid main() {\n  vec3 major \x3d position.x * majorAxis;\n  vec3 minor \x3d position.y * minorAxis;\n\n  vec3 vPosition \x3d major + minor + offset;\n  vec3 pPosition \x3d project(vPosition);\n  vec3 offset \x3d project(vPosition + screenAxis * position.z);\n\n  vec2 screen \x3d normalize((offset - pPosition).xy * screenShape) / screenShape;\n\n  gl_Position \x3d vec4(pPosition + vec3(0.5 * screen * lineWidth, 0), 1.0);\n}\n"]),
h=t(["precision highp float;\n#define GLSLIFY 1\n\nuniform vec4 color;\nvoid main() {\n  gl_FragColor \x3d color;\n}"]);m.line=function(b){return p(b,g,h,null,[{name:"position",type:"vec3"}])};var e=t(["precision highp float;\n#define GLSLIFY 1\n\nattribute vec3 position;\n\nuniform mat4 model, view, projection;\nuniform vec3 offset, axis, alignDir, alignOpt;\nuniform float scale, angle, pixelScale;\nuniform vec2 resolution;\n\nvec3 project(vec3 p) {\n  vec4 pp \x3d projection * view * model * vec4(p, 1.0);\n  return pp.xyz / max(pp.w, 0.0001);\n}\n\nfloat computeViewAngle(vec3 a, vec3 b) {\n  vec3 A \x3d project(a);\n  vec3 B \x3d project(b);\n\n  return atan(\n    (B.y - A.y) * resolution.y,\n    (B.x - A.x) * resolution.x\n  );\n}\n\nconst float PI \x3d 3.141592;\nconst float TWO_PI \x3d 2.0 * PI;\nconst float HALF_PI \x3d 0.5 * PI;\nconst float ONE_AND_HALF_PI \x3d 1.5 * PI;\n\nint option \x3d int(floor(alignOpt.x + 0.001));\nfloat hv_ratio \x3d       alignOpt.y;\nbool enableAlign \x3d    (alignOpt.z !\x3d 0.0);\n\nfloat mod_angle(float a) {\n  return mod(a, PI);\n}\n\nfloat positive_angle(float a) {\n  return mod_angle((a \x3c 0.0) ?\n    a + TWO_PI :\n    a\n  );\n}\n\nfloat look_upwards(float a) {\n  float b \x3d positive_angle(a);\n  return ((b \x3e HALF_PI) \x26\x26 (b \x3c\x3d ONE_AND_HALF_PI)) ?\n    b - PI :\n    b;\n}\n\nfloat look_horizontal_or_vertical(float a, float ratio) {\n  // ratio controls the ratio between being horizontal to (vertical + horizontal)\n  // if ratio is set to 0.5 then it is 50%, 50%.\n  // when using a higher ratio e.g. 0.75 the result would\n  // likely be more horizontal than vertical.\n\n  float b \x3d positive_angle(a);\n\n  return\n    (b \x3c (      ratio) * HALF_PI) ? 0.0 :\n    (b \x3c (2.0 - ratio) * HALF_PI) ? -HALF_PI :\n    (b \x3c (2.0 + ratio) * HALF_PI) ? 0.0 :\n    (b \x3c (4.0 - ratio) * HALF_PI) ? HALF_PI :\n                                    0.0;\n}\n\nfloat roundTo(float a, float b) {\n  return float(b * floor((a + 0.5 * b) / b));\n}\n\nfloat look_round_n_directions(float a, int n) {\n  float b \x3d positive_angle(a);\n  float div \x3d TWO_PI / float(n);\n  float c \x3d roundTo(b, div);\n  return look_upwards(c);\n}\n\nfloat applyAlignOption(float rawAngle, float delta) {\n  return\n    (option \x3e  2) ? look_round_n_directions(rawAngle + delta, option) :       // option 3-n: round to n directions\n    (option \x3d\x3d 2) ? look_horizontal_or_vertical(rawAngle + delta, hv_ratio) : // horizontal or vertical\n    (option \x3d\x3d 1) ? rawAngle + delta :       // use free angle, and flip to align with one direction of the axis\n    (option \x3d\x3d 0) ? look_upwards(rawAngle) : // use free angle, and stay upwards\n    (option \x3d\x3d-1) ? 0.0 :                    // useful for backward compatibility, all texts remains horizontal\n                    rawAngle;                // otherwise return back raw input angle\n}\n\nbool isAxisTitle \x3d (axis.x \x3d\x3d 0.0) \x26\x26\n                   (axis.y \x3d\x3d 0.0) \x26\x26\n                   (axis.z \x3d\x3d 0.0);\n\nvoid main() {\n  //Compute world offset\n  float axisDistance \x3d position.z;\n  vec3 dataPosition \x3d axisDistance * axis + offset;\n\n  float beta \x3d angle; // i.e. user defined attributes for each tick\n\n  float axisAngle;\n  float clipAngle;\n  float flip;\n\n  if (enableAlign) {\n    axisAngle \x3d (isAxisTitle) ? HALF_PI :\n                      computeViewAngle(dataPosition, dataPosition + axis);\n    clipAngle \x3d computeViewAngle(dataPosition, dataPosition + alignDir);\n\n    axisAngle +\x3d (sin(axisAngle) \x3c 0.0) ? PI : 0.0;\n    clipAngle +\x3d (sin(clipAngle) \x3c 0.0) ? PI : 0.0;\n\n    flip \x3d (dot(vec2(cos(axisAngle), sin(axisAngle)),\n                vec2(sin(clipAngle),-cos(clipAngle))) \x3e 0.0) ? 1.0 : 0.0;\n\n    beta +\x3d applyAlignOption(clipAngle, flip * PI);\n  }\n\n  //Compute plane offset\n  vec2 planeCoord \x3d position.xy * pixelScale;\n\n  mat2 planeXform \x3d scale * mat2(\n     cos(beta), sin(beta),\n    -sin(beta), cos(beta)\n  );\n\n  vec2 viewOffset \x3d 2.0 * planeXform * planeCoord / resolution;\n\n  //Compute clip position\n  vec3 clipPosition \x3d project(dataPosition);\n\n  //Apply text offset in clip coordinates\n  clipPosition +\x3d vec3(viewOffset, 0.0);\n\n  //Done\n  gl_Position \x3d vec4(clipPosition, 1.0);\n}"]),
n=t(["precision highp float;\n#define GLSLIFY 1\n\nuniform vec4 color;\nvoid main() {\n  gl_FragColor \x3d color;\n}"]);m.text=function(b){return p(b,e,n,null,[{name:"position",type:"vec3"}])};var b=t(["precision highp float;\n#define GLSLIFY 1\n\nattribute vec3 position;\nattribute vec3 normal;\n\nuniform mat4 model, view, projection;\nuniform vec3 enable;\nuniform vec3 bounds[2];\n\nvarying vec3 colorChannel;\n\nvoid main() {\n\n  vec3 signAxis \x3d sign(bounds[1] - bounds[0]);\n\n  vec3 realNormal \x3d signAxis * normal;\n\n  if(dot(realNormal, enable) \x3e 0.0) {\n    vec3 minRange \x3d min(bounds[0], bounds[1]);\n    vec3 maxRange \x3d max(bounds[0], bounds[1]);\n    vec3 nPosition \x3d mix(minRange, maxRange, 0.5 * (position + 1.0));\n    gl_Position \x3d projection * view * model * vec4(nPosition, 1.0);\n  } else {\n    gl_Position \x3d vec4(0,0,0,0);\n  }\n\n  colorChannel \x3d abs(realNormal);\n}"]),
l=t(["precision highp float;\n#define GLSLIFY 1\n\nuniform vec4 colors[3];\n\nvarying vec3 colorChannel;\n\nvoid main() {\n  gl_FragColor \x3d colorChannel.x * colors[0] +\n                 colorChannel.y * colors[1] +\n                 colorChannel.z * colors[2];\n}"]);m.bg=function(a){return p(a,b,l,null,[{name:"position",type:"vec3"},{name:"normal",type:"vec3"}])}},{"gl-shader":297,glslify:401}],234:[function(a,t,m){(function(p){function g(b,a,f,c){this.gl=b;this.shader=a;this.buffer=f;this.vao=
c;this.tickOffset=this.tickCount=this.labelOffset=this.labelCount=null}t.exports=function(a,d,f,c,k,r){var l=h(a),q=e(a,[{buffer:l,size:3}]),n=b(a);n.attributes.position.location=0;a=new g(a,n,l,q);a.update(d,f,c,k,r);return a};var h=a("gl-buffer"),e=a("gl-vao"),n=a("vectorize-text"),b=a("./shaders").text;p=window||p.global||{};var l=p.__TEXT_CACHE||{};p.__TEXT_CACHE={};p=g.prototype;var u=[0,0];p.bind=function(b,a,f,c){this.vao.bind();this.shader.bind();var d=this.shader.uniforms;d.model=b;d.view=
a;d.projection=f;d.pixelScale=c;u[0]=this.gl.drawingBufferWidth;u[1]=this.gl.drawingBufferHeight;this.shader.uniforms.resolution=u};p.unbind=function(){this.vao.unbind()};p.update=function(b,a,f,c,e){function d(b,a,c,d,f,e){var r=l[c];r||(r=l[c]={});var g=r[a];if(!g){g=r;c={triangles:!0,font:c,textAlign:"center",textBaseline:"middle",lineSpacing:f,styletags:e};try{var h=n(a,c)}catch(M){console.warn('error vectorizing text:"'+a+'" error:',M),h={cells:[],positions:[]}}g=g[a]=h}a=(d||12)/12;d=g.positions;
g=g.cells;h=0;for(c=g.length;h<c;++h)for(f=g[h],e=2;0<=e;--e)r=d[f[e]],k.push(a*r[0],-a*r[1],b)}for(var k=[],g=[0,0,0],h=[0,0,0],q=[0,0,0],u=[0,0,0],p={breaklines:!0,bolds:!0,italics:!0,subscripts:!0,superscripts:!0},m=0;3>m;++m){q[m]=k.length/3|0;d(.5*(b[0][m]+b[1][m]),a[m],f[m],12,1.25,p);u[m]=(k.length/3|0)-q[m];g[m]=k.length/3|0;for(var B=0;B<c[m].length;++B)c[m][B].text&&d(c[m][B].x,c[m][B].text,c[m][B].font||e,c[m][B].fontSize||12,1.25,p);h[m]=(k.length/3|0)-g[m]}this.buffer.update(k);this.tickOffset=
g;this.tickCount=h;this.labelOffset=q;this.labelCount=u};p.drawTicks=function(b,a,f,c,e,r,g,l){this.tickCount[b]&&(this.shader.uniforms.axis=r,this.shader.uniforms.color=e,this.shader.uniforms.angle=f,this.shader.uniforms.scale=a,this.shader.uniforms.offset=c,this.shader.uniforms.alignDir=g,this.shader.uniforms.alignOpt=l,this.vao.draw(this.gl.TRIANGLES,this.tickCount[b],this.tickOffset[b]))};p.drawLabel=function(b,a,f,c,e,r,g,l){this.labelCount[b]&&(this.shader.uniforms.axis=r,this.shader.uniforms.color=
e,this.shader.uniforms.angle=f,this.shader.uniforms.scale=a,this.shader.uniforms.offset=c,this.shader.uniforms.alignDir=g,this.shader.uniforms.alignOpt=l,this.vao.draw(this.gl.TRIANGLES,this.labelCount[b],this.labelOffset[b]))};p.dispose=function(){this.shader.dispose();this.vao.dispose();this.buffer.dispose()}}).call(this,a("_process"))},{"./shaders":233,_process:474,"gl-buffer":237,"gl-vao":319,"vectorize-text":534}],235:[function(a,t,m){function p(a,h){var e=a+"",g=e.indexOf("."),b=0;0<=g&&(b=
e.length-g-1);e=Math.pow(10,b);a=Math.round(a*h*e);h=a+"";if(0<=h.indexOf("e"))return h;h=a/e;e=a%e;0>a?(h=-Math.ceil(h)|0,e=-e|0):(h=Math.floor(h)|0,e|=0);h=""+h;0>a&&(h="-"+h);if(b){for(e=""+e;e.length<b;)e="0"+e;return h+"."+e}return h}m.create=function(a,h){for(var e=[],g=0;3>g;++g){for(var b=[],l=0;l*h[g]<=a[1][g];++l)b.push({x:l*h[g],text:p(h[g],l)});for(l=-1;l*h[g]>=a[0][g];--l)b.push({x:l*h[g],text:p(h[g],l)});e.push(b)}return e};m.equal=function(a,h){for(var e=0;3>e;++e){if(a[e].length!==
h[e].length)return!1;for(var g=0;g<a[e].length;++g){var b=a[e][g],l=h[e][g];if(b.x!==l.x||b.text!==l.text||b.font!==l.font||b.fontColor!==l.fontColor||b.fontSize!==l.fontSize||b.dx!==l.dx||b.dy!==l.dy)return!1}}return!0}},{}],236:[function(a,t,m){function p(b,a,c){this.lo=b;this.hi=a;this.pixelsPerDataUnit=c}t.exports=function(a,v,p,A,y){var r=v.model||u,z=v.view||u,m=v.projection||u;v=v._ortho||!1;a=a.bounds;y=y||e(r,z,m,a,v);y=y.axis;n(q,z,r);n(q,m,q);r=c;for(z=0;3>z;++z)r[z].lo=Infinity,r[z].hi=
-Infinity,r[z].pixelsPerDataUnit=Infinity;m=g(b(q,q));b(q,q);for(var B=0;3>B;++B){var t=(B+1)%3,D=(B+2)%3,G=k;z=0;a:for(;2>z;++z){var H=[];if(0>y[B]!==!!z){G[B]=a[z][B];for(var E=0;2>E;++E){G[t]=a[E^z][t];for(var K=0;2>K;++K)G[D]=a[K^E^z][D],H.push(G.slice())}for(E=K=v?5:4;E===K;++E){if(0===H.length)continue a;H=h.positive(H,m[E])}for(E=0;E<H.length;++E){D=H[E];K=k;var I=q;for(var J=D,L=p,M=A,N=0;3>N;++N){for(var O=d,R=f,T=0;3>T;++T)R[T]=O[T]=J[T];R[3]=O[3]=1;R[N]+=1;l(R,R,I);0>R[3]&&(K[N]=Infinity);
--O[N];l(O,O,I);0>O[3]&&(K[N]=Infinity);T=(O[0]/O[3]-R[0]/R[3])*L;O=(O[1]/O[3]-R[1]/R[3])*M;K[N]=.25*Math.sqrt(T*T+O*O)}I=K;for(K=0;3>K;++K)r[K].lo=Math.min(r[K].lo,D[K]),r[K].hi=Math.max(r[K].hi,D[K]),K!==B&&(r[K].pixelsPerDataUnit=Math.min(r[K].pixelsPerDataUnit,Math.abs(I[K])))}}}}return r};var g=a("extract-frustum-planes"),h=a("split-polygon"),e=a("./lib/cube.js"),n=a("gl-mat4/multiply"),b=a("gl-mat4/transpose"),l=a("gl-vec4/transformMat4"),u=new Float32Array([1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]),
q=new Float32Array(16),d=[0,0,0,1],f=[0,0,0,1],c=[new p(Infinity,-Infinity,Infinity),new p(Infinity,-Infinity,Infinity),new p(Infinity,-Infinity,Infinity)],k=[0,0,0]},{"./lib/cube.js":231,"extract-frustum-planes":220,"gl-mat4/multiply":263,"gl-mat4/transpose":272,"gl-vec4/transformMat4":390,"split-polygon":511}],237:[function(a,t,m){function p(b,a,d,f,c){this.gl=b;this.type=a;this.handle=d;this.length=f;this.usage=c}function g(b,a,d,f,c,e){var k=c.length*c.BYTES_PER_ELEMENT;if(0>e)return b.bufferData(a,
c,f),k;if(k+e>d)throw Error("gl-buffer: If resizing buffer, must not specify offset");b.bufferSubData(a,e,c);return d}function h(b,a){a=e.malloc(b.length,a);for(var d=b.length,f=0;f<d;++f)a[f]=b[f];return a}var e=a("typedarray-pool"),n=a("ndarray-ops"),b=a("ndarray"),l="uint8 uint8_clamped uint16 uint32 int8 int16 int32 float32".split(" ");a=p.prototype;a.bind=function(){this.gl.bindBuffer(this.type,this.handle)};a.unbind=function(){this.gl.bindBuffer(this.type,null)};a.dispose=function(){this.gl.deleteBuffer(this.handle)};
a.update=function(a,q){"number"!==typeof q&&(q=-1);this.bind();if("object"===typeof a&&"undefined"!==typeof a.shape){var d=a.dtype;0>l.indexOf(d)&&(d="float32");this.type===this.gl.ELEMENT_ARRAY_BUFFER&&(d=gl.getExtension("OES_element_index_uint")&&"uint16"!==d?"uint32":"uint16");var f;if(f=d===a.dtype)a:{f=a.stride;for(var c=1,k=f.length-1;0<=k;--k){if(f[k]!==c){f=!1;break a}c*=a.shape[k]}f=!0}f?this.length=0===a.offset&&a.data.length===a.shape[0]?g(this.gl,this.type,this.length,this.usage,a.data,
q):g(this.gl,this.type,this.length,this.usage,a.data.subarray(a.offset,a.shape[0]),q):(d=e.malloc(a.size,d),f=b(d,a.shape),n.assign(f,a),this.length=0>q?g(this.gl,this.type,this.length,this.usage,d,q):g(this.gl,this.type,this.length,this.usage,d.subarray(0,a.size),q),e.free(d))}else if(Array.isArray(a))d=this.type===this.gl.ELEMENT_ARRAY_BUFFER?h(a,"uint16"):h(a,"float32"),this.length=0>q?g(this.gl,this.type,this.length,this.usage,d,q):g(this.gl,this.type,this.length,this.usage,d.subarray(0,a.length),
q),e.free(d);else if("object"===typeof a&&"number"===typeof a.length)this.length=g(this.gl,this.type,this.length,this.usage,a,q);else if("number"===typeof a||void 0===a){if(0<=q)throw Error("gl-buffer: Cannot specify offset when resizing buffer");a|=0;0>=a&&(a=1);this.gl.bufferData(this.type,a|0,this.usage);this.length=a}else throw Error("gl-buffer: Invalid data type");};t.exports=function(b,a,d,f){d=d||b.ARRAY_BUFFER;f=f||b.DYNAMIC_DRAW;if(d!==b.ARRAY_BUFFER&&d!==b.ELEMENT_ARRAY_BUFFER)throw Error("gl-buffer: Invalid type for webgl buffer, must be either gl.ARRAY_BUFFER or gl.ELEMENT_ARRAY_BUFFER");
if(f!==b.DYNAMIC_DRAW&&f!==b.STATIC_DRAW&&f!==b.STREAM_DRAW)throw Error("gl-buffer: Invalid usage for buffer, must be either gl.DYNAMIC_DRAW, gl.STATIC_DRAW or gl.STREAM_DRAW");var c=b.createBuffer();b=new p(b,d,c,0,f);b.update(a);return b}},{ndarray:442,"ndarray-ops":436,"typedarray-pool":529}],238:[function(a,t,m){var p=a("gl-vec3"),g=function(b,a){for(var e=0;e<b.length;e++)if(b[e]>=a)return e-1;return e},h=p.create(),e=p.create(),n=function(b,a,e){return b<a?a:b>e?e:b};t.exports=function(b,a){if(b.positions)var l=
b.positions;else{var q=b.meshgrid;l=q[0];var d=q[1];q=q[2];for(var f=[],c=0;c<q.length;c++)for(var k=0;k<d.length;k++)for(var r=0;r<l.length;r++)f.push([q[c],d[k],l[r]]);l=f}var v=b.meshgrid,z=b.vectors;d={positions:[],vertexIntensity:[],vertexIntensityBounds:b.vertexIntensityBounds,vertexNormals:[],vectors:[],cells:[],coneOffset:b.coneOffset,colormap:b.colormap};if(0===b.positions.length)return a&&(a[0]=[0,0,0],a[1]=[0,0,0]),d;r=0;var A=1/0,y=-1/0,w=1/0,x=-1/0,m=1/0,B=-1/0,t=null,D=null;q=[];k=1/
0;for(f=0;f<l.length;f++){c=l[f];A=Math.min(c[0],A);y=Math.max(c[0],y);w=Math.min(c[1],w);x=Math.max(c[1],x);m=Math.min(c[2],m);B=Math.max(c[2],B);if(v){var G=z;var H=v,E=c[0],K=c[1],I=c[2],J=H[0].length,L=H[1].length,M=H[2].length,N=g(H[0],E),O=g(H[1],K),R=g(H[2],I),T=N+1,P=O+1,S=R+1;N=n(N,0,J-1);T=n(T,0,J-1);O=n(O,0,L-1);P=n(P,0,L-1);R=n(R,0,M-1);S=n(S,0,M-1);if(0>N||0>O||0>R||T>=J||P>=L||S>=M)G=p.create();else{E=(E-H[0][N])/(H[0][T]-H[0][N]);K=(K-H[1][O])/(H[1][P]-H[1][O]);H=(I-H[2][R])/(H[2][S]-
H[2][R]);if(0>E||1<E||isNaN(E))E=0;if(0>K||1<K||isNaN(K))K=0;if(0>H||1<H||isNaN(H))H=0;R=R*J*L;L*=S*J;O*=J;J*=P;I=N;M=T;T=G[O+R+I];N=G[O+R+M];P=G[J+R+I];R=G[J+R+M];S=G[O+L+I];O=G[O+L+M];I=G[J+L+I];G=G[J+L+M];L=p.create();p.lerp(L,T,N,E);p.lerp(h,P,R,E);p.lerp(L,L,h,K);p.lerp(h,S,O,E);p.lerp(e,I,G,E);p.lerp(h,h,e,K);p.lerp(L,L,h,H);G=L}}else G=z[f];p.length(G)>r&&(r=p.length(G));f&&(k=Math.min(k,2*p.distance(t,c)/(p.length(D)+p.length(G))));t=c;D=G;q.push(G)}f=[A,w,m];c=[y,x,B];a&&(a[0]=f,a[1]=c);
0===r&&(r=1);a=1/r;if(!isFinite(k)||isNaN(k))k=1;d.vectorScale=k;k=p.create();p.set(k,0,1,0);f=b.coneSize||.5;b.absoluteConeSize&&(f=b.absoluteConeSize*a);d.coneScale=f;for(b=f=0;f<l.length;f++)for(c=l[f],r=c[0],y=c[1],c=c[2],x=q[f],B=p.length(x)*a,v=0;8>v;v++)d.positions.push([r,y,c,b++]),d.positions.push([r,y,c,b++]),d.positions.push([r,y,c,b++]),d.positions.push([r,y,c,b++]),d.positions.push([r,y,c,b++]),d.positions.push([r,y,c,b++]),d.vectors.push(x),d.vectors.push(x),d.vectors.push(x),d.vectors.push(x),
d.vectors.push(x),d.vectors.push(x),d.vertexIntensity.push(B,B,B),d.vertexIntensity.push(B,B,B),d.vertexNormals.push(k,k,k),d.vertexNormals.push(k,k,k),z=d.positions.length,d.cells.push([z-6,z-5,z-4],[z-3,z-2,z-1]);return d};t.exports.createConeMesh=a("./lib/conemesh")},{"./lib/conemesh":239,"gl-vec3":338}],239:[function(a,t,m){function p(b,a,c,d,f,e,k,r,g,l,h,q,n,u,v,p,m,t,R,T,P,S,ba,da){this.gl=b;this.pixelRatio=1;this.cells=[];this.positions=[];this.intensity=[];this.texture=a;this.dirty=!0;this.triShader=
c;this.pickShader=d;this.trianglePositions=f;this.triangleVectors=e;this.triangleColors=r;this.triangleNormals=l;this.triangleUVs=g;this.triangleIds=k;this.triangleVAO=h;this.triangleCount=0;this.lineWidth=1;this.edgePositions=q;this.edgeColors=u;this.edgeUVs=v;this.edgeIds=n;this.edgeVAO=p;this.edgeCount=0;this.pointPositions=m;this.pointColors=R;this.pointUVs=T;this.pointSizes=P;this.pointIds=t;this.pointVAO=S;this.pointCount=0;this.contourLineWidth=1;this.contourPositions=ba;this.contourVAO=da;
this.contourCount=0;this.contourColor=[0,0,0];this.contourEnable=!0;this.pickId=1;this.bounds=[[Infinity,Infinity,Infinity],[-Infinity,-Infinity,-Infinity]];this.clipBounds=[[-Infinity,-Infinity,-Infinity],[Infinity,Infinity,Infinity]];this.lightPosition=[1E5,1E5,0];this.diffuseLight=this.ambientLight=.8;this.specularLight=2;this.roughness=.5;this.fresnel=1.5;this.opacity=1;this.coneScale=2;this.vectorScale=1;this.coneOffset=.25;this._projection=this._view=this._model=z;this._resolution=[1,1]}function g(b){b=
f({colormap:b,nshades:256,format:"rgba"});for(var a=new Uint8Array(1024),c=0;256>c;++c){for(var e=b[c],k=0;3>k;++k)a[4*c+k]=e[k];a[4*c+3]=255*e[3]}return d(a,[256,256,4],[4,0,1])}var h=a("gl-shader"),e=a("gl-buffer"),n=a("gl-vao"),b=a("gl-texture2d"),l=a("normals"),u=a("gl-mat4/multiply"),q=a("gl-mat4/invert"),d=a("ndarray"),f=a("colormap"),c=a("simplicial-complex-contour"),k=a("typedarray-pool");a=a("./shaders");var r=a.meshShader,v=a.pickShader,z=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1];a=p.prototype;
a.isOpaque=function(){return 1<=this.opacity};a.isTransparent=function(){return 1>this.opacity};a.pickSlots=1;a.setPickBase=function(b){this.pickId=b};a.highlight=function(b){if(b&&this.contourEnable){var a=c(this.cells,this.intensity,b.intensity);b=a.cells;var d=a.vertexIds;a=a.vertexWeights;for(var f=b.length,e=k.mallocFloat32(6*f),r=0,g=0;g<f;++g)for(var l=b[g],h=0;2>h;++h){var q=l[0];2===l.length&&(q=l[h]);var n=a[q],u=1-n,v=this.positions[d[q][0]];q=this.positions[d[q][1]];for(var p=0;3>p;++p)e[r++]=
n*v[p]+u*q[p]}this.contourCount=r/3|0;this.contourPositions.update(e.subarray(0,r));k.free(e)}else this.contourCount=0};a.update=function(a){a=a||{};var c=this.gl;this.dirty=!0;"contourEnable"in a&&(this.contourEnable=a.contourEnable);"contourColor"in a&&(this.contourColor=a.contourColor);"lineWidth"in a&&(this.lineWidth=a.lineWidth);"lightPosition"in a&&(this.lightPosition=a.lightPosition);"opacity"in a&&(this.opacity=a.opacity);"ambient"in a&&(this.ambientLight=a.ambient);"diffuse"in a&&(this.diffuseLight=
a.diffuse);"specular"in a&&(this.specularLight=a.specular);"roughness"in a&&(this.roughness=a.roughness);"fresnel"in a&&(this.fresnel=a.fresnel);void 0!==a.vectorScale&&(this.vectorScale=a.vectorScale);void 0!==a.coneScale&&(this.coneScale=a.coneScale);void 0!==a.coneOffset&&(this.coneOffset=a.coneOffset);a.texture?(this.texture.dispose(),this.texture=b(c,a.texture)):a.colormap&&(this.texture.shape=[256,256],this.texture.minFilter=c.LINEAR_MIPMAP_LINEAR,this.texture.magFilter=c.LINEAR,this.texture.setPixels(g(a.colormap)),
this.texture.generateMipmap());c=a.cells;var d=a.positions,f=a.vectors;if(d&&c&&f){var e=[],k=[],r=[],h=[],q=[],n=[],u=[],p=[],v=[],z=[],A=[],m=[],t=[],O=[],R=[];this.cells=c;this.positions=d;var T=a.vertexNormals,P=a.cellNormals,S=void 0===a.vertexNormalsEpsilon?1E-6:a.vertexNormalsEpsilon,ba=void 0===a.faceNormalsEpsilon?1E-6:a.faceNormalsEpsilon;a.useFacetNormals&&!P&&(P=l.faceNormals(c,d,ba));P||T||(T=l.vertexNormals(c,d,S));S=a.vertexColors;ba=a.cellColors;var da=a.meshColor||[1,1,1,1],ca=a.vertexUVs,
Y=a.vertexIntensity,W=a.cellUVs,ea=a.cellIntensity,U=Infinity,na=-Infinity;if(!ca&&!W)if(Y)if(a.vertexIntensityBounds)U=+a.vertexIntensityBounds[0],na=+a.vertexIntensityBounds[1];else for(var X=0;X<Y.length;++X){var ha=Y[X];U=Math.min(U,ha);na=Math.max(na,ha)}else if(ea)for(X=0;X<ea.length;++X)ha=ea[X],U=Math.min(U,ha),na=Math.max(na,ha);else for(X=0;X<d.length;++X)ha=d[X][2],U=Math.min(U,ha),na=Math.max(na,ha);if(Y)this.intensity=Y;else if(ea){var fa=d.length;X=Array(fa);for(ha=0;ha<fa;++ha)X[ha]=
0;fa=c.length;for(ha=0;ha<fa;++ha)for(var oa=c[ha],ua=0;ua<oa.length;++ua)X[oa[ua]]=ea[ha];this.intensity=X}else{X=d.length;ha=Array(X);for(fa=0;fa<X;++fa)ha[fa]=d[fa][2];this.intensity=ha}ha=a.pointSizes;a=a.pointSize||1;this.bounds=[[Infinity,Infinity,Infinity],[-Infinity,-Infinity,-Infinity]];for(X=0;X<d.length;++X){var Z=d[X];for(fa=0;3>fa;++fa)!isNaN(Z[fa])&&isFinite(Z[fa])&&(this.bounds[0][fa]=Math.min(this.bounds[0][fa],Z[fa]),this.bounds[1][fa]=Math.max(this.bounds[1][fa],Z[fa]))}var qa=ua=
oa=0;X=0;a:for(;X<c.length;++X){var sa=c[X];switch(sa.length){case 1:var V=sa[0];Z=d[V];for(fa=0;3>fa;++fa)if(isNaN(Z[fa])||!isFinite(Z[fa]))continue a;A.push(Z[0],Z[1],Z[2],Z[3]);var ia=S?S[V]:ba?ba[X]:da;3===ia.length?m.push(ia[0],ia[1],ia[2],1):m.push(ia[0],ia[1],ia[2],ia[3]);Z=ca?ca[V]:Y?[(Y[V]-U)/(na-U),0]:W?W[X]:ea?[(ea[X]-U)/(na-U),0]:[(Z[2]-U)/(na-U),0];t.push(Z[0],Z[1]);ha?O.push(ha[V]):O.push(a);R.push(X);qa+=1;break;case 2:for(fa=0;2>fa;++fa)for(V=sa[fa],Z=d[V],V=0;3>V;++V)if(isNaN(Z[V])||
!isFinite(Z[V]))continue a;for(fa=0;2>fa;++fa)V=sa[fa],Z=d[V],u.push(Z[0],Z[1],Z[2]),ia=S?S[V]:ba?ba[X]:da,3===ia.length?p.push(ia[0],ia[1],ia[2],1):p.push(ia[0],ia[1],ia[2],ia[3]),Z=ca?ca[V]:Y?[(Y[V]-U)/(na-U),0]:W?W[X]:ea?[(ea[X]-U)/(na-U),0]:[(Z[2]-U)/(na-U),0],v.push(Z[0],Z[1]),z.push(X);ua+=1;break;case 3:for(fa=0;3>fa;++fa)for(V=sa[fa],Z=d[V],V=0;3>V;++V)if(isNaN(Z[V])||!isFinite(Z[V]))continue a;for(fa=0;3>fa;++fa)V=sa[2-fa],Z=d[V],e.push(Z[0],Z[1],Z[2],Z[3]),ia=f[V],k.push(ia[0],ia[1],ia[2]),
ia=S?S[V]:ba?ba[X]:da,3===ia.length?r.push(ia[0],ia[1],ia[2],1):r.push(ia[0],ia[1],ia[2],ia[3]),Z=ca?ca[V]:Y?[(Y[V]-U)/(na-U),0]:W?W[X]:ea?[(ea[X]-U)/(na-U),0]:[(Z[2]-U)/(na-U),0],q.push(Z[0],Z[1]),Z=T?T[V]:P[X],h.push(Z[0],Z[1],Z[2]),n.push(X);oa+=1}}this.pointCount=qa;this.edgeCount=ua;this.triangleCount=oa;this.pointPositions.update(A);this.pointColors.update(m);this.pointUVs.update(t);this.pointSizes.update(O);this.pointIds.update(new Uint32Array(R));this.edgePositions.update(u);this.edgeColors.update(p);
this.edgeUVs.update(v);this.edgeIds.update(new Uint32Array(z));this.trianglePositions.update(e);this.triangleVectors.update(k);this.triangleColors.update(r);this.triangleUVs.update(q);this.triangleNormals.update(h);this.triangleIds.update(new Uint32Array(n))}};a.drawTransparent=a.draw=function(b){b=b||{};var a=this.gl,c=b.model||z,d=b.view||z,f=b.projection||z,e=[[-1E6,-1E6,-1E6],[1E6,1E6,1E6]];for(b=0;3>b;++b)e[0][b]=Math.max(e[0][b],this.clipBounds[0][b]),e[1][b]=Math.min(e[1][b],this.clipBounds[1][b]);
c={model:c,view:d,projection:f,inverseModel:z.slice(),clipBounds:e,kambient:this.ambientLight,kdiffuse:this.diffuseLight,kspecular:this.specularLight,roughness:this.roughness,fresnel:this.fresnel,eyePosition:[0,0,0],lightPosition:[0,0,0],opacity:this.opacity,vectorScale:this.vectorScale,coneScale:this.coneScale,coneOffset:this.coneOffset,contourColor:this.contourColor,texture:0};c.inverseModel=q(c.inverseModel,c.model);a.disable(a.CULL_FACE);this.texture.bind(0);d=Array(16);u(d,c.view,c.model);u(d,
c.projection,d);q(d,d);for(b=0;3>b;++b)c.eyePosition[b]=d[12+b]/d[15];f=d[15];for(b=0;3>b;++b)f+=this.lightPosition[b]*d[4*b+3];for(b=0;3>b;++b){e=d[12+b];for(var k=0;3>k;++k)e+=d[4*k+b]*this.lightPosition[k];c.lightPosition[b]=e/f}0<this.triangleCount&&(b=this.triShader,b.bind(),b.uniforms=c,this.triangleVAO.bind(),a.drawArrays(a.TRIANGLES,0,3*this.triangleCount),this.triangleVAO.unbind())};a.drawPick=function(b){b=b||{};var a=this.gl,c=b.model||z,d=b.view||z;b=b.projection||z;for(var f=[[-1E6,-1E6,
-1E6],[1E6,1E6,1E6]],e=0;3>e;++e)f[0][e]=Math.max(f[0][e],this.clipBounds[0][e]),f[1][e]=Math.min(f[1][e],this.clipBounds[1][e]);this._model=[].slice.call(c);this._view=[].slice.call(d);this._projection=[].slice.call(b);this._resolution=[a.drawingBufferWidth,a.drawingBufferHeight];c={model:c,view:d,projection:b,clipBounds:f,vectorScale:this.vectorScale,coneScale:this.coneScale,coneOffset:this.coneOffset,pickId:this.pickId/255};d=this.pickShader;d.bind();d.uniforms=c;0<this.triangleCount&&(this.triangleVAO.bind(),
a.drawArrays(a.TRIANGLES,0,3*this.triangleCount),this.triangleVAO.unbind());0<this.edgeCount&&(this.edgeVAO.bind(),a.lineWidth(this.lineWidth*this.pixelRatio),a.drawArrays(a.LINES,0,2*this.edgeCount),this.edgeVAO.unbind())};a.pick=function(b){if(!b||b.id!==this.pickId)return null;b=this.cells[b.value[0]+256*b.value[1]+65536*b.value[2]];var a=this.positions[b[1]].slice(0,3);return{index:Math.floor(b[1]/48),position:a,dataCoordinate:a}};a.dispose=function(){this.texture.dispose();this.triShader.dispose();
this.pickShader.dispose();this.triangleVAO.dispose();this.trianglePositions.dispose();this.triangleVectors.dispose();this.triangleColors.dispose();this.triangleUVs.dispose();this.triangleNormals.dispose();this.triangleIds.dispose();this.edgeVAO.dispose();this.edgePositions.dispose();this.edgeColors.dispose();this.edgeUVs.dispose();this.edgeIds.dispose();this.pointVAO.dispose();this.pointPositions.dispose();this.pointColors.dispose();this.pointUVs.dispose();this.pointSizes.dispose();this.pointIds.dispose();
this.contourVAO.dispose();this.contourPositions.dispose()};t.exports=function(a,c){1===arguments.length&&(c=a,a=c.gl);var f;(f=c.triShader)||(f=h(a,r.vertex,r.fragment,null,r.attributes),f.attributes.position.location=0,f.attributes.color.location=2,f.attributes.uv.location=3,f.attributes.vector.location=5);var k=h(a,v.vertex,v.fragment,null,v.attributes);k.attributes.position.location=0;k.attributes.id.location=1;k.attributes.vector.location=5;var g=b(a,d(new Uint8Array([255,255,255,255]),[1,1,4]));
g.generateMipmap();g.minFilter=a.LINEAR_MIPMAP_LINEAR;g.magFilter=a.LINEAR;var l=e(a),q=e(a),u=e(a),z=e(a),A=e(a),y=e(a),m=n(a,[{buffer:l,type:a.FLOAT,size:4},{buffer:y,type:a.UNSIGNED_BYTE,size:4,normalized:!0},{buffer:u,type:a.FLOAT,size:4},{buffer:z,type:a.FLOAT,size:2},{buffer:A,type:a.FLOAT,size:3},{buffer:q,type:a.FLOAT,size:3}]),I=e(a),J=e(a),t=e(a),M=e(a),N=n(a,[{buffer:I,type:a.FLOAT,size:3},{buffer:M,type:a.UNSIGNED_BYTE,size:4,normalized:!0},{buffer:J,type:a.FLOAT,size:4},{buffer:t,type:a.FLOAT,
size:2}]),O=e(a),R=e(a),T=e(a),P=e(a),S=e(a),ba=n(a,[{buffer:O,type:a.FLOAT,size:3},{buffer:S,type:a.UNSIGNED_BYTE,size:4,normalized:!0},{buffer:R,type:a.FLOAT,size:4},{buffer:T,type:a.FLOAT,size:2},{buffer:P,type:a.FLOAT,size:1}]),da=e(a),ca=n(a,[{buffer:da,type:a.FLOAT,size:3}]);f=new p(a,g,f,k,l,q,y,u,z,A,m,I,M,J,t,N,O,S,R,T,P,ba,da,ca);f.update(c);return f}},{"./shaders":240,colormap:116,"gl-buffer":237,"gl-mat4/invert":261,"gl-mat4/multiply":263,"gl-shader":297,"gl-texture2d":314,"gl-vao":319,
ndarray:442,normals:445,"simplicial-complex-contour":502,"typedarray-pool":529}],240:[function(a,t,m){var p=a("glslify");a=p(["precision highp float;\n\nprecision highp float;\n#define GLSLIFY 1\n\nvec3 getOrthogonalVector(vec3 v) {\n  // Return up-vector for only-z vector.\n  // Return ax + by + cz \x3d 0, a point that lies on the plane that has v as a normal and that isn't (0,0,0).\n  // From the above if-statement we have ||a|| \x3e 0  U  ||b|| \x3e 0.\n  // Assign z \x3d 0, x \x3d -b, y \x3d a:\n  // a*-b + b*a + c*0 \x3d -ba + ba + 0 \x3d 0\n  if (v.x*v.x \x3e v.z*v.z || v.y*v.y \x3e v.z*v.z) {\n    return normalize(vec3(-v.y, v.x, 0.0));\n  } else {\n    return normalize(vec3(0.0, v.z, -v.y));\n  }\n}\n\n// Calculate the cone vertex and normal at the given index.\n//\n// The returned vertex is for a cone with its top at origin and height of 1.0,\n// pointing in the direction of the vector attribute.\n//\n// Each cone is made up of a top vertex, a center base vertex and base perimeter vertices.\n// These vertices are used to make up the triangles of the cone by the following:\n//   segment + 0 top vertex\n//   segment + 1 perimeter vertex a+1\n//   segment + 2 perimeter vertex a\n//   segment + 3 center base vertex\n//   segment + 4 perimeter vertex a\n//   segment + 5 perimeter vertex a+1\n// Where segment is the number of the radial segment * 6 and a is the angle at that radial segment.\n// To go from index to segment, floor(index / 6)\n// To go from segment to angle, 2*pi * (segment/segmentCount)\n// To go from index to segment index, index - (segment*6)\n//\nvec3 getConePosition(vec3 d, float rawIndex, float coneOffset, out vec3 normal) {\n\n  const float segmentCount \x3d 8.0;\n\n  float index \x3d rawIndex - floor(rawIndex /\n    (segmentCount * 6.0)) *\n    (segmentCount * 6.0);\n\n  float segment \x3d floor(0.001 + index/6.0);\n  float segmentIndex \x3d index - (segment*6.0);\n\n  normal \x3d -normalize(d);\n\n  if (segmentIndex \x3e 2.99 \x26\x26 segmentIndex \x3c 3.01) {\n    return mix(vec3(0.0), -d, coneOffset);\n  }\n\n  float nextAngle \x3d (\n    (segmentIndex \x3e 0.99 \x26\x26  segmentIndex \x3c 1.01) ||\n    (segmentIndex \x3e 4.99 \x26\x26  segmentIndex \x3c 5.01)\n  ) ? 1.0 : 0.0;\n  float angle \x3d 2.0 * 3.14159 * ((segment + nextAngle) / segmentCount);\n\n  vec3 v1 \x3d mix(d, vec3(0.0), coneOffset);\n  vec3 v2 \x3d v1 - d;\n\n  vec3 u \x3d getOrthogonalVector(d);\n  vec3 v \x3d normalize(cross(u, d));\n\n  vec3 x \x3d u * cos(angle) * length(d)*0.25;\n  vec3 y \x3d v * sin(angle) * length(d)*0.25;\n  vec3 v3 \x3d v2 + x + y;\n  if (segmentIndex \x3c 3.0) {\n    vec3 tx \x3d u * sin(angle);\n    vec3 ty \x3d v * -cos(angle);\n    vec3 tangent \x3d tx + ty;\n    normal \x3d normalize(cross(v3 - v1, tangent));\n  }\n\n  if (segmentIndex \x3d\x3d 0.0) {\n    return mix(d, vec3(0.0), coneOffset);\n  }\n  return v3;\n}\n\nattribute vec3 vector;\nattribute vec4 color, position;\nattribute vec2 uv;\nuniform float vectorScale;\nuniform float coneScale;\n\nuniform float coneOffset;\n\nuniform mat4 model\n           , view\n           , projection\n           , inverseModel;\nuniform vec3 eyePosition\n           , lightPosition;\n\nvarying vec3 f_normal\n           , f_lightDirection\n           , f_eyeDirection\n           , f_data\n           , f_position;\nvarying vec4 f_color;\nvarying vec2 f_uv;\n\nvoid main() {\n  // Scale the vector magnitude to stay constant with\n  // model \x26 view changes.\n  vec3 normal;\n  vec3 XYZ \x3d getConePosition(mat3(model) * ((vectorScale * coneScale) * vector), position.w, coneOffset, normal);\n  vec4 conePosition \x3d model * vec4(position.xyz, 1.0) + vec4(XYZ, 0.0);\n\n  //Lighting geometry parameters\n  vec4 cameraCoordinate \x3d view * conePosition;\n  cameraCoordinate.xyz /\x3d cameraCoordinate.w;\n  f_lightDirection \x3d lightPosition - cameraCoordinate.xyz;\n  f_eyeDirection   \x3d eyePosition - cameraCoordinate.xyz;\n  f_normal \x3d normalize((vec4(normal,0.0) * inverseModel).xyz);\n\n  // vec4 m_position  \x3d model * vec4(conePosition, 1.0);\n  vec4 t_position  \x3d view * conePosition;\n  gl_Position      \x3d projection * t_position;\n\n  f_color          \x3d color;\n  f_data           \x3d conePosition.xyz;\n  f_position       \x3d position.xyz;\n  f_uv             \x3d uv;\n}\n"]);
t=p(["#extension GL_OES_standard_derivatives : enable\n\nprecision highp float;\n#define GLSLIFY 1\n\nfloat beckmannDistribution(float x, float roughness) {\n  float NdotH \x3d max(x, 0.0001);\n  float cos2Alpha \x3d NdotH * NdotH;\n  float tan2Alpha \x3d (cos2Alpha - 1.0) / cos2Alpha;\n  float roughness2 \x3d roughness * roughness;\n  float denom \x3d 3.141592653589793 * roughness2 * cos2Alpha * cos2Alpha;\n  return exp(tan2Alpha / roughness2) / denom;\n}\n\nfloat cookTorranceSpecular(\n  vec3 lightDirection,\n  vec3 viewDirection,\n  vec3 surfaceNormal,\n  float roughness,\n  float fresnel) {\n\n  float VdotN \x3d max(dot(viewDirection, surfaceNormal), 0.0);\n  float LdotN \x3d max(dot(lightDirection, surfaceNormal), 0.0);\n\n  //Half angle vector\n  vec3 H \x3d normalize(lightDirection + viewDirection);\n\n  //Geometric term\n  float NdotH \x3d max(dot(surfaceNormal, H), 0.0);\n  float VdotH \x3d max(dot(viewDirection, H), 0.000001);\n  float LdotH \x3d max(dot(lightDirection, H), 0.000001);\n  float G1 \x3d (2.0 * NdotH * VdotN) / VdotH;\n  float G2 \x3d (2.0 * NdotH * LdotN) / LdotH;\n  float G \x3d min(1.0, min(G1, G2));\n  \n  //Distribution term\n  float D \x3d beckmannDistribution(NdotH, roughness);\n\n  //Fresnel term\n  float F \x3d pow(1.0 - VdotN, fresnel);\n\n  //Multiply terms and done\n  return  G * F * D / max(3.14159265 * VdotN, 0.000001);\n}\n\nbool outOfRange(float a, float b, float p) {\n  return ((p \x3e max(a, b)) || \n          (p \x3c min(a, b)));\n}\n\nbool outOfRange(vec2 a, vec2 b, vec2 p) {\n  return (outOfRange(a.x, b.x, p.x) ||\n          outOfRange(a.y, b.y, p.y));\n}\n\nbool outOfRange(vec3 a, vec3 b, vec3 p) {\n  return (outOfRange(a.x, b.x, p.x) ||\n          outOfRange(a.y, b.y, p.y) ||\n          outOfRange(a.z, b.z, p.z));\n}\n\nbool outOfRange(vec4 a, vec4 b, vec4 p) {\n  return outOfRange(a.xyz, b.xyz, p.xyz);\n}\n\nuniform vec3 clipBounds[2];\nuniform float roughness\n            , fresnel\n            , kambient\n            , kdiffuse\n            , kspecular\n            , opacity;\nuniform sampler2D texture;\n\nvarying vec3 f_normal\n           , f_lightDirection\n           , f_eyeDirection\n           , f_data\n           , f_position;\nvarying vec4 f_color;\nvarying vec2 f_uv;\n\nvoid main() {\n  if (outOfRange(clipBounds[0], clipBounds[1], f_position)) discard;\n  vec3 N \x3d normalize(f_normal);\n  vec3 L \x3d normalize(f_lightDirection);\n  vec3 V \x3d normalize(f_eyeDirection);\n\n  if(gl_FrontFacing) {\n    N \x3d -N;\n  }\n\n  float specular \x3d min(1.0, max(0.0, cookTorranceSpecular(L, V, N, roughness, fresnel)));\n  float diffuse  \x3d min(kambient + kdiffuse * max(dot(N, L), 0.0), 1.0);\n\n  vec4 surfaceColor \x3d f_color * texture2D(texture, f_uv);\n  vec4 litColor \x3d surfaceColor.a * vec4(diffuse * surfaceColor.rgb + kspecular * vec3(1,1,1) * specular,  1.0);\n\n  gl_FragColor \x3d litColor * opacity;\n}\n"]);
var g=p(["precision highp float;\n\nprecision highp float;\n#define GLSLIFY 1\n\nvec3 getOrthogonalVector(vec3 v) {\n  // Return up-vector for only-z vector.\n  // Return ax + by + cz \x3d 0, a point that lies on the plane that has v as a normal and that isn't (0,0,0).\n  // From the above if-statement we have ||a|| \x3e 0  U  ||b|| \x3e 0.\n  // Assign z \x3d 0, x \x3d -b, y \x3d a:\n  // a*-b + b*a + c*0 \x3d -ba + ba + 0 \x3d 0\n  if (v.x*v.x \x3e v.z*v.z || v.y*v.y \x3e v.z*v.z) {\n    return normalize(vec3(-v.y, v.x, 0.0));\n  } else {\n    return normalize(vec3(0.0, v.z, -v.y));\n  }\n}\n\n// Calculate the cone vertex and normal at the given index.\n//\n// The returned vertex is for a cone with its top at origin and height of 1.0,\n// pointing in the direction of the vector attribute.\n//\n// Each cone is made up of a top vertex, a center base vertex and base perimeter vertices.\n// These vertices are used to make up the triangles of the cone by the following:\n//   segment + 0 top vertex\n//   segment + 1 perimeter vertex a+1\n//   segment + 2 perimeter vertex a\n//   segment + 3 center base vertex\n//   segment + 4 perimeter vertex a\n//   segment + 5 perimeter vertex a+1\n// Where segment is the number of the radial segment * 6 and a is the angle at that radial segment.\n// To go from index to segment, floor(index / 6)\n// To go from segment to angle, 2*pi * (segment/segmentCount)\n// To go from index to segment index, index - (segment*6)\n//\nvec3 getConePosition(vec3 d, float rawIndex, float coneOffset, out vec3 normal) {\n\n  const float segmentCount \x3d 8.0;\n\n  float index \x3d rawIndex - floor(rawIndex /\n    (segmentCount * 6.0)) *\n    (segmentCount * 6.0);\n\n  float segment \x3d floor(0.001 + index/6.0);\n  float segmentIndex \x3d index - (segment*6.0);\n\n  normal \x3d -normalize(d);\n\n  if (segmentIndex \x3e 2.99 \x26\x26 segmentIndex \x3c 3.01) {\n    return mix(vec3(0.0), -d, coneOffset);\n  }\n\n  float nextAngle \x3d (\n    (segmentIndex \x3e 0.99 \x26\x26  segmentIndex \x3c 1.01) ||\n    (segmentIndex \x3e 4.99 \x26\x26  segmentIndex \x3c 5.01)\n  ) ? 1.0 : 0.0;\n  float angle \x3d 2.0 * 3.14159 * ((segment + nextAngle) / segmentCount);\n\n  vec3 v1 \x3d mix(d, vec3(0.0), coneOffset);\n  vec3 v2 \x3d v1 - d;\n\n  vec3 u \x3d getOrthogonalVector(d);\n  vec3 v \x3d normalize(cross(u, d));\n\n  vec3 x \x3d u * cos(angle) * length(d)*0.25;\n  vec3 y \x3d v * sin(angle) * length(d)*0.25;\n  vec3 v3 \x3d v2 + x + y;\n  if (segmentIndex \x3c 3.0) {\n    vec3 tx \x3d u * sin(angle);\n    vec3 ty \x3d v * -cos(angle);\n    vec3 tangent \x3d tx + ty;\n    normal \x3d normalize(cross(v3 - v1, tangent));\n  }\n\n  if (segmentIndex \x3d\x3d 0.0) {\n    return mix(d, vec3(0.0), coneOffset);\n  }\n  return v3;\n}\n\nattribute vec3 vector;\nattribute vec4 position;\nattribute vec4 id;\n\nuniform mat4 model, view, projection;\n\nuniform float vectorScale;\nuniform float coneScale;\nuniform float coneOffset;\n\nvarying vec3 f_position;\nvarying vec4 f_id;\n\nvoid main() {\n  vec3 normal;\n  vec3 XYZ \x3d getConePosition(mat3(model) * ((vectorScale * coneScale) * vector), position.w, coneOffset, normal);\n  vec4 conePosition \x3d model * vec4(position.xyz, 1.0) + vec4(XYZ, 0.0);\n  gl_Position \x3d projection * view * conePosition;\n  f_id        \x3d id;\n  f_position  \x3d position.xyz;\n}\n"]);
p=p(["precision highp float;\n#define GLSLIFY 1\n\nbool outOfRange(float a, float b, float p) {\n  return ((p \x3e max(a, b)) || \n          (p \x3c min(a, b)));\n}\n\nbool outOfRange(vec2 a, vec2 b, vec2 p) {\n  return (outOfRange(a.x, b.x, p.x) ||\n          outOfRange(a.y, b.y, p.y));\n}\n\nbool outOfRange(vec3 a, vec3 b, vec3 p) {\n  return (outOfRange(a.x, b.x, p.x) ||\n          outOfRange(a.y, b.y, p.y) ||\n          outOfRange(a.z, b.z, p.z));\n}\n\nbool outOfRange(vec4 a, vec4 b, vec4 p) {\n  return outOfRange(a.xyz, b.xyz, p.xyz);\n}\n\nuniform vec3  clipBounds[2];\nuniform float pickId;\n\nvarying vec3 f_position;\nvarying vec4 f_id;\n\nvoid main() {\n  if (outOfRange(clipBounds[0], clipBounds[1], f_position)) discard;\n\n  gl_FragColor \x3d vec4(pickId, f_id.xyz);\n}"]);
m.meshShader={vertex:a,fragment:t,attributes:[{name:"position",type:"vec4"},{name:"normal",type:"vec3"},{name:"color",type:"vec4"},{name:"uv",type:"vec2"},{name:"vector",type:"vec3"}]};m.pickShader={vertex:g,fragment:p,attributes:[{name:"position",type:"vec4"},{name:"id",type:"vec4"},{name:"vector",type:"vec3"}]}},{glslify:401}],241:[function(a,t,m){t.exports={0:"NONE",1:"ONE",2:"LINE_LOOP",3:"LINE_STRIP",4:"TRIANGLES",5:"TRIANGLE_STRIP",6:"TRIANGLE_FAN",256:"DEPTH_BUFFER_BIT",512:"NEVER",513:"LESS",
514:"EQUAL",515:"LEQUAL",516:"GREATER",517:"NOTEQUAL",518:"GEQUAL",519:"ALWAYS",768:"SRC_COLOR",769:"ONE_MINUS_SRC_COLOR",770:"SRC_ALPHA",771:"ONE_MINUS_SRC_ALPHA",772:"DST_ALPHA",773:"ONE_MINUS_DST_ALPHA",774:"DST_COLOR",775:"ONE_MINUS_DST_COLOR",776:"SRC_ALPHA_SATURATE",1024:"STENCIL_BUFFER_BIT",1028:"FRONT",1029:"BACK",1032:"FRONT_AND_BACK",1280:"INVALID_ENUM",1281:"INVALID_VALUE",1282:"INVALID_OPERATION",1285:"OUT_OF_MEMORY",1286:"INVALID_FRAMEBUFFER_OPERATION",2304:"CW",2305:"CCW",2849:"LINE_WIDTH",
2884:"CULL_FACE",2885:"CULL_FACE_MODE",2886:"FRONT_FACE",2928:"DEPTH_RANGE",2929:"DEPTH_TEST",2930:"DEPTH_WRITEMASK",2931:"DEPTH_CLEAR_VALUE",2932:"DEPTH_FUNC",2960:"STENCIL_TEST",2961:"STENCIL_CLEAR_VALUE",2962:"STENCIL_FUNC",2963:"STENCIL_VALUE_MASK",2964:"STENCIL_FAIL",2965:"STENCIL_PASS_DEPTH_FAIL",2966:"STENCIL_PASS_DEPTH_PASS",2967:"STENCIL_REF",2968:"STENCIL_WRITEMASK",2978:"VIEWPORT",3024:"DITHER",3042:"BLEND",3088:"SCISSOR_BOX",3089:"SCISSOR_TEST",3106:"COLOR_CLEAR_VALUE",3107:"COLOR_WRITEMASK",
3317:"UNPACK_ALIGNMENT",3333:"PACK_ALIGNMENT",3379:"MAX_TEXTURE_SIZE",3386:"MAX_VIEWPORT_DIMS",3408:"SUBPIXEL_BITS",3410:"RED_BITS",3411:"GREEN_BITS",3412:"BLUE_BITS",3413:"ALPHA_BITS",3414:"DEPTH_BITS",3415:"STENCIL_BITS",3553:"TEXTURE_2D",4352:"DONT_CARE",4353:"FASTEST",4354:"NICEST",5120:"BYTE",5121:"UNSIGNED_BYTE",5122:"SHORT",5123:"UNSIGNED_SHORT",5124:"INT",5125:"UNSIGNED_INT",5126:"FLOAT",5386:"INVERT",5890:"TEXTURE",6401:"STENCIL_INDEX",6402:"DEPTH_COMPONENT",6406:"ALPHA",6407:"RGB",6408:"RGBA",
6409:"LUMINANCE",6410:"LUMINANCE_ALPHA",7680:"KEEP",7681:"REPLACE",7682:"INCR",7683:"DECR",7936:"VENDOR",7937:"RENDERER",7938:"VERSION",9728:"NEAREST",9729:"LINEAR",9984:"NEAREST_MIPMAP_NEAREST",9985:"LINEAR_MIPMAP_NEAREST",9986:"NEAREST_MIPMAP_LINEAR",9987:"LINEAR_MIPMAP_LINEAR",10240:"TEXTURE_MAG_FILTER",10241:"TEXTURE_MIN_FILTER",10242:"TEXTURE_WRAP_S",10243:"TEXTURE_WRAP_T",10497:"REPEAT",10752:"POLYGON_OFFSET_UNITS",16384:"COLOR_BUFFER_BIT",32769:"CONSTANT_COLOR",32770:"ONE_MINUS_CONSTANT_COLOR",
32771:"CONSTANT_ALPHA",32772:"ONE_MINUS_CONSTANT_ALPHA",32773:"BLEND_COLOR",32774:"FUNC_ADD",32777:"BLEND_EQUATION_RGB",32778:"FUNC_SUBTRACT",32779:"FUNC_REVERSE_SUBTRACT",32819:"UNSIGNED_SHORT_4_4_4_4",32820:"UNSIGNED_SHORT_5_5_5_1",32823:"POLYGON_OFFSET_FILL",32824:"POLYGON_OFFSET_FACTOR",32854:"RGBA4",32855:"RGB5_A1",32873:"TEXTURE_BINDING_2D",32926:"SAMPLE_ALPHA_TO_COVERAGE",32928:"SAMPLE_COVERAGE",32936:"SAMPLE_BUFFERS",32937:"SAMPLES",32938:"SAMPLE_COVERAGE_VALUE",32939:"SAMPLE_COVERAGE_INVERT",
32968:"BLEND_DST_RGB",32969:"BLEND_SRC_RGB",32970:"BLEND_DST_ALPHA",32971:"BLEND_SRC_ALPHA",33071:"CLAMP_TO_EDGE",33170:"GENERATE_MIPMAP_HINT",33189:"DEPTH_COMPONENT16",33306:"DEPTH_STENCIL_ATTACHMENT",33635:"UNSIGNED_SHORT_5_6_5",33648:"MIRRORED_REPEAT",33901:"ALIASED_POINT_SIZE_RANGE",33902:"ALIASED_LINE_WIDTH_RANGE",33984:"TEXTURE0",33985:"TEXTURE1",33986:"TEXTURE2",33987:"TEXTURE3",33988:"TEXTURE4",33989:"TEXTURE5",33990:"TEXTURE6",33991:"TEXTURE7",33992:"TEXTURE8",33993:"TEXTURE9",33994:"TEXTURE10",
33995:"TEXTURE11",33996:"TEXTURE12",33997:"TEXTURE13",33998:"TEXTURE14",33999:"TEXTURE15",34E3:"TEXTURE16",34001:"TEXTURE17",34002:"TEXTURE18",34003:"TEXTURE19",34004:"TEXTURE20",34005:"TEXTURE21",34006:"TEXTURE22",34007:"TEXTURE23",34008:"TEXTURE24",34009:"TEXTURE25",34010:"TEXTURE26",34011:"TEXTURE27",34012:"TEXTURE28",34013:"TEXTURE29",34014:"TEXTURE30",34015:"TEXTURE31",34016:"ACTIVE_TEXTURE",34024:"MAX_RENDERBUFFER_SIZE",34041:"DEPTH_STENCIL",34055:"INCR_WRAP",34056:"DECR_WRAP",34067:"TEXTURE_CUBE_MAP",
34068:"TEXTURE_BINDING_CUBE_MAP",34069:"TEXTURE_CUBE_MAP_POSITIVE_X",34070:"TEXTURE_CUBE_MAP_NEGATIVE_X",34071:"TEXTURE_CUBE_MAP_POSITIVE_Y",34072:"TEXTURE_CUBE_MAP_NEGATIVE_Y",34073:"TEXTURE_CUBE_MAP_POSITIVE_Z",34074:"TEXTURE_CUBE_MAP_NEGATIVE_Z",34076:"MAX_CUBE_MAP_TEXTURE_SIZE",34338:"VERTEX_ATTRIB_ARRAY_ENABLED",34339:"VERTEX_ATTRIB_ARRAY_SIZE",34340:"VERTEX_ATTRIB_ARRAY_STRIDE",34341:"VERTEX_ATTRIB_ARRAY_TYPE",34342:"CURRENT_VERTEX_ATTRIB",34373:"VERTEX_ATTRIB_ARRAY_POINTER",34466:"NUM_COMPRESSED_TEXTURE_FORMATS",
34467:"COMPRESSED_TEXTURE_FORMATS",34660:"BUFFER_SIZE",34661:"BUFFER_USAGE",34816:"STENCIL_BACK_FUNC",34817:"STENCIL_BACK_FAIL",34818:"STENCIL_BACK_PASS_DEPTH_FAIL",34819:"STENCIL_BACK_PASS_DEPTH_PASS",34877:"BLEND_EQUATION_ALPHA",34921:"MAX_VERTEX_ATTRIBS",34922:"VERTEX_ATTRIB_ARRAY_NORMALIZED",34930:"MAX_TEXTURE_IMAGE_UNITS",34962:"ARRAY_BUFFER",34963:"ELEMENT_ARRAY_BUFFER",34964:"ARRAY_BUFFER_BINDING",34965:"ELEMENT_ARRAY_BUFFER_BINDING",34975:"VERTEX_ATTRIB_ARRAY_BUFFER_BINDING",35040:"STREAM_DRAW",
35044:"STATIC_DRAW",35048:"DYNAMIC_DRAW",35632:"FRAGMENT_SHADER",35633:"VERTEX_SHADER",35660:"MAX_VERTEX_TEXTURE_IMAGE_UNITS",35661:"MAX_COMBINED_TEXTURE_IMAGE_UNITS",35663:"SHADER_TYPE",35664:"FLOAT_VEC2",35665:"FLOAT_VEC3",35666:"FLOAT_VEC4",35667:"INT_VEC2",35668:"INT_VEC3",35669:"INT_VEC4",35670:"BOOL",35671:"BOOL_VEC2",35672:"BOOL_VEC3",35673:"BOOL_VEC4",35674:"FLOAT_MAT2",35675:"FLOAT_MAT3",35676:"FLOAT_MAT4",35678:"SAMPLER_2D",35680:"SAMPLER_CUBE",35712:"DELETE_STATUS",35713:"COMPILE_STATUS",
35714:"LINK_STATUS",35715:"VALIDATE_STATUS",35716:"INFO_LOG_LENGTH",35717:"ATTACHED_SHADERS",35718:"ACTIVE_UNIFORMS",35719:"ACTIVE_UNIFORM_MAX_LENGTH",35720:"SHADER_SOURCE_LENGTH",35721:"ACTIVE_ATTRIBUTES",35722:"ACTIVE_ATTRIBUTE_MAX_LENGTH",35724:"SHADING_LANGUAGE_VERSION",35725:"CURRENT_PROGRAM",36003:"STENCIL_BACK_REF",36004:"STENCIL_BACK_VALUE_MASK",36005:"STENCIL_BACK_WRITEMASK",36006:"FRAMEBUFFER_BINDING",36007:"RENDERBUFFER_BINDING",36048:"FRAMEBUFFER_ATTACHMENT_OBJECT_TYPE",36049:"FRAMEBUFFER_ATTACHMENT_OBJECT_NAME",
36050:"FRAMEBUFFER_ATTACHMENT_TEXTURE_LEVEL",36051:"FRAMEBUFFER_ATTACHMENT_TEXTURE_CUBE_MAP_FACE",36053:"FRAMEBUFFER_COMPLETE",36054:"FRAMEBUFFER_INCOMPLETE_ATTACHMENT",36055:"FRAMEBUFFER_INCOMPLETE_MISSING_ATTACHMENT",36057:"FRAMEBUFFER_INCOMPLETE_DIMENSIONS",36061:"FRAMEBUFFER_UNSUPPORTED",36064:"COLOR_ATTACHMENT0",36096:"DEPTH_ATTACHMENT",36128:"STENCIL_ATTACHMENT",36160:"FRAMEBUFFER",36161:"RENDERBUFFER",36162:"RENDERBUFFER_WIDTH",36163:"RENDERBUFFER_HEIGHT",36164:"RENDERBUFFER_INTERNAL_FORMAT",
36168:"STENCIL_INDEX8",36176:"RENDERBUFFER_RED_SIZE",36177:"RENDERBUFFER_GREEN_SIZE",36178:"RENDERBUFFER_BLUE_SIZE",36179:"RENDERBUFFER_ALPHA_SIZE",36180:"RENDERBUFFER_DEPTH_SIZE",36181:"RENDERBUFFER_STENCIL_SIZE",36194:"RGB565",36336:"LOW_FLOAT",36337:"MEDIUM_FLOAT",36338:"HIGH_FLOAT",36339:"LOW_INT",36340:"MEDIUM_INT",36341:"HIGH_INT",36346:"SHADER_COMPILER",36347:"MAX_VERTEX_UNIFORM_VECTORS",36348:"MAX_VARYING_VECTORS",36349:"MAX_FRAGMENT_UNIFORM_VECTORS",37440:"UNPACK_FLIP_Y_WEBGL",37441:"UNPACK_PREMULTIPLY_ALPHA_WEBGL",
37442:"CONTEXT_LOST_WEBGL",37443:"UNPACK_COLORSPACE_CONVERSION_WEBGL",37444:"BROWSER_DEFAULT_WEBGL"}},{}],242:[function(a,t,m){var p=a("./1.0/numbers");t.exports=function(a){return p[a]}},{"./1.0/numbers":241}],243:[function(a,t,m){function p(b,a,f,c){this.gl=b;this.shader=c;this.buffer=a;this.vao=f;this.pixelRatio=1;this.bounds=[[Infinity,Infinity,Infinity],[-Infinity,-Infinity,-Infinity]];this.clipBounds=[[-Infinity,-Infinity,-Infinity],[Infinity,Infinity,Infinity]];this.lineWidth=[1,1,1];this.capSize=
[10,10,10];this.lineCount=[0,0,0];this.lineOffset=[0,0,0];this.opacity=1;this.hasAlpha=!1}function g(b,a){for(var d=0;3>d;++d)b[0][d]=Math.min(b[0][d],a[d]),b[1][d]=Math.max(b[1][d],a[d])}function h(b,a,f,c){c=u[c];for(var d=0;d<c.length;++d){var e=c[d];b.push(a[0],a[1],a[2],f[0],f[1],f[2],f[3],e[0],e[1],e[2])}return c.length}t.exports=function(a){var d=a.gl,f=e(d),c=n(d,[{buffer:f,type:d.FLOAT,size:3,offset:0,stride:40},{buffer:f,type:d.FLOAT,size:4,offset:12,stride:40},{buffer:f,type:d.FLOAT,size:3,
offset:28,stride:40}]),k=b(d);k.attributes.position.location=0;k.attributes.color.location=1;k.attributes.offset.location=2;d=new p(d,f,c,k);d.update(a);return d};var e=a("gl-buffer"),n=a("gl-vao"),b=a("./shaders/index"),l=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1];a=p.prototype;a.isOpaque=function(){return!this.hasAlpha};a.isTransparent=function(){return this.hasAlpha};a.drawTransparent=a.draw=function(b){var a=this.gl,f=this.shader.uniforms;this.shader.bind();var c=f.view=b.view||l,e=f.projection=b.projection||
l;f.model=b.model||l;f.clipBounds=this.clipBounds;f.opacity=this.opacity;b=(b._ortho?2:1)*this.pixelRatio*(e[3]*c[12]+e[7]*c[13]+e[11]*c[14]+e[15]*c[15])/a.drawingBufferHeight;this.vao.bind();for(c=0;3>c;++c)a.lineWidth(this.lineWidth[c]*this.pixelRatio),f.capSize=this.capSize[c]*b,this.lineCount[c]&&a.drawArrays(a.LINES,this.lineOffset[c],this.lineCount[c]);this.vao.unbind()};var u=function(){for(var b=Array(3),a=0;3>a;++a){for(var f=[],c=1;2>=c;++c)for(var e=-1;1>=e;e+=2){var r=[0,0,0];r[(c+a)%
3]=e;f.push(r)}b[a]=f}return b}();a.update=function(b){b=b||{};"lineWidth"in b&&(this.lineWidth=b.lineWidth,Array.isArray(this.lineWidth)||(this.lineWidth=[this.lineWidth,this.lineWidth,this.lineWidth]));"capSize"in b&&(this.capSize=b.capSize,Array.isArray(this.capSize)||(this.capSize=[this.capSize,this.capSize,this.capSize]));this.hasAlpha=!1;"opacity"in b&&(this.opacity=+b.opacity,1>this.opacity&&(this.hasAlpha=!0));var a=b.color||[[0,0,0],[0,0,0],[0,0,0]],f=b.position;b=b.error;Array.isArray(a[0])||
(a=[a,a,a]);if(f&&b){var c=[],e=f.length,r=0;this.bounds=[[Infinity,Infinity,Infinity],[-Infinity,-Infinity,-Infinity]];this.lineCount=[0,0,0];for(var l=0;3>l;++l){this.lineOffset[l]=r;var q=0;a:for(;q<e;++q){for(var n=f[q],u=0;3>u;++u)if(isNaN(n[u])||!isFinite(n[u]))continue a;u=b[q];var p=a[l];Array.isArray(p[0])&&(p=a[q]);3===p.length?p=[p[0],p[1],p[2],1]:4===p.length&&(p=[p[0],p[1],p[2],p[3]],!this.hasAlpha&&1>p[3]&&(this.hasAlpha=!0));if(!isNaN(u[0][l])&&!isNaN(u[1][l])){if(0>u[0][l]){var x=
n.slice();x[l]+=u[0][l];c.push(n[0],n[1],n[2],p[0],p[1],p[2],p[3],0,0,0,x[0],x[1],x[2],p[0],p[1],p[2],p[3],0,0,0);g(this.bounds,x);r+=2+h(c,x,p,l)}0<u[1][l]&&(x=n.slice(),x[l]+=u[1][l],c.push(n[0],n[1],n[2],p[0],p[1],p[2],p[3],0,0,0,x[0],x[1],x[2],p[0],p[1],p[2],p[3],0,0,0),g(this.bounds,x),r+=2+h(c,x,p,l))}}this.lineCount[l]=r-this.lineOffset[l]}this.buffer.update(c)}};a.dispose=function(){this.shader.dispose();this.buffer.dispose();this.vao.dispose()}},{"./shaders/index":244,"gl-buffer":237,"gl-vao":319}],
244:[function(a,t,m){m=a("glslify");var p=a("gl-shader"),g=m(["precision highp float;\n#define GLSLIFY 1\n\nattribute vec3 position, offset;\nattribute vec4 color;\nuniform mat4 model, view, projection;\nuniform float capSize;\nvarying vec4 fragColor;\nvarying vec3 fragPosition;\n\nvoid main() {\n  vec4 worldPosition  \x3d model * vec4(position, 1.0);\n  worldPosition       \x3d (worldPosition / worldPosition.w) + vec4(capSize * offset, 0.0);\n  gl_Position         \x3d projection * view * worldPosition;\n  fragColor           \x3d color;\n  fragPosition        \x3d position;\n}"]),
h=m(["precision highp float;\n#define GLSLIFY 1\n\nbool outOfRange(float a, float b, float p) {\n  return ((p \x3e max(a, b)) || \n          (p \x3c min(a, b)));\n}\n\nbool outOfRange(vec2 a, vec2 b, vec2 p) {\n  return (outOfRange(a.x, b.x, p.x) ||\n          outOfRange(a.y, b.y, p.y));\n}\n\nbool outOfRange(vec3 a, vec3 b, vec3 p) {\n  return (outOfRange(a.x, b.x, p.x) ||\n          outOfRange(a.y, b.y, p.y) ||\n          outOfRange(a.z, b.z, p.z));\n}\n\nbool outOfRange(vec4 a, vec4 b, vec4 p) {\n  return outOfRange(a.xyz, b.xyz, p.xyz);\n}\n\nuniform vec3 clipBounds[2];\nuniform float opacity;\nvarying vec3 fragPosition;\nvarying vec4 fragColor;\n\nvoid main() {\n  if (\n    outOfRange(clipBounds[0], clipBounds[1], fragPosition) ||\n    fragColor.a * opacity \x3d\x3d 0.\n  ) discard;\n\n  gl_FragColor \x3d opacity * fragColor;\n}"]);
t.exports=function(a){return p(a,g,h,null,[{name:"position",type:"vec3"},{name:"color",type:"vec4"},{name:"offset",type:"vec3"}])}},{"gl-shader":297,glslify:401}],245:[function(a,t,m){function p(b){var a=b.getParameter(b.FRAMEBUFFER_BINDING),c=b.getParameter(b.RENDERBUFFER_BINDING);b=b.getParameter(b.TEXTURE_BINDING_2D);return[a,c,b]}function g(b,a){b.bindFramebuffer(b.FRAMEBUFFER,a[0]);b.bindRenderbuffer(b.RENDERBUFFER,a[1]);b.bindTexture(b.TEXTURE_2D,a[2])}function h(b){switch(b){case f:throw Error("gl-fbo: Framebuffer unsupported");
case c:throw Error("gl-fbo: Framebuffer incomplete attachment");case k:throw Error("gl-fbo: Framebuffer incomplete dimensions");case r:throw Error("gl-fbo: Framebuffer incomplete missing attachment");default:throw Error("gl-fbo: Framebuffer failed for unspecified reason");}}function e(b,a,c,d,f,e){if(!d)return null;a=q(b,a,c,f,d);a.magFilter=b.NEAREST;a.minFilter=b.NEAREST;a.mipSamples=1;a.bind();b.framebufferTexture2D(b.FRAMEBUFFER,e,b.TEXTURE_2D,a.handle,0);return a}function n(b,a,c,d,f){var e=
b.createRenderbuffer();b.bindRenderbuffer(b.RENDERBUFFER,e);b.renderbufferStorage(b.RENDERBUFFER,d,a,c);b.framebufferRenderbuffer(b.FRAMEBUFFER,f,b.RENDERBUFFER,e);return e}function b(b){var a=p(b.gl),c=b.gl,f=b.handle=c.createFramebuffer(),k=b._shape[0],r=b._shape[1],l=b.color.length,q=b._ext,u=b._useStencil,v=b._useDepth,m=b._colorType;c.bindFramebuffer(c.FRAMEBUFFER,f);for(f=0;f<l;++f)b.color[f]=e(c,k,r,m,c.RGBA,c.COLOR_ATTACHMENT0+f);0===l?(b._color_rb=n(c,k,r,c.RGBA4,c.COLOR_ATTACHMENT0),q&&
q.drawBuffersWEBGL(d[0])):1<l&&q.drawBuffersWEBGL(d[l]);(l=c.getExtension("WEBGL_depth_texture"))?u?b.depth=e(c,k,r,l.UNSIGNED_INT_24_8_WEBGL,c.DEPTH_STENCIL,c.DEPTH_STENCIL_ATTACHMENT):v&&(b.depth=e(c,k,r,c.UNSIGNED_SHORT,c.DEPTH_COMPONENT,c.DEPTH_ATTACHMENT)):v&&u?b._depth_rb=n(c,k,r,c.DEPTH_STENCIL,c.DEPTH_STENCIL_ATTACHMENT):v?b._depth_rb=n(c,k,r,c.DEPTH_COMPONENT16,c.DEPTH_ATTACHMENT):u&&(b._depth_rb=n(c,k,r,c.STENCIL_INDEX,c.STENCIL_ATTACHMENT));k=c.checkFramebufferStatus(c.FRAMEBUFFER);if(k!==
c.FRAMEBUFFER_COMPLETE){b._destroyed=!0;c.bindFramebuffer(c.FRAMEBUFFER,null);c.deleteFramebuffer(b.handle);b.handle=null;b.depth&&(b.depth.dispose(),b.depth=null);b._depth_rb&&(c.deleteRenderbuffer(b._depth_rb),b._depth_rb=null);for(f=0;f<b.color.length;++f)b.color[f].dispose(),b.color[f]=null;b._color_rb&&(c.deleteRenderbuffer(b._color_rb),b._color_rb=null);g(c,a);h(k)}g(c,a)}function l(a,c,d,f,e,k,r,g){this.gl=a;this._shape=[c|0,d|0];this._destroyed=!1;this._ext=g;this.color=Array(e);for(a=0;a<
e;++a)this.color[a]=null;this._depth_rb=this.depth=this._color_rb=null;this._colorType=f;this._useDepth=k;this._useStencil=r;var l=this;c=[c|0,d|0];Object.defineProperties(c,{0:{get:function(){return l._shape[0]},set:function(b){return l.width=b}},1:{get:function(){return l._shape[1]},set:function(b){return l.height=b}}});this._shapeVector=c;b(this)}function u(b,a,c){if(b._destroyed)throw Error("gl-fbo: Can't resize destroyed FBO");if(b._shape[0]!==a||b._shape[1]!==c){var d=b.gl,f=d.getParameter(d.MAX_RENDERBUFFER_SIZE);
if(0>a||a>f||0>c||c>f)throw Error("gl-fbo: Can't resize FBO, invalid dimensions");b._shape[0]=a;b._shape[1]=c;a=p(d);for(c=0;c<b.color.length;++c)b.color[c].shape=b._shape;b._color_rb&&(d.bindRenderbuffer(d.RENDERBUFFER,b._color_rb),d.renderbufferStorage(d.RENDERBUFFER,d.RGBA4,b._shape[0],b._shape[1]));b.depth&&(b.depth.shape=b._shape);b._depth_rb&&(d.bindRenderbuffer(d.RENDERBUFFER,b._depth_rb),b._useDepth&&b._useStencil?d.renderbufferStorage(d.RENDERBUFFER,d.DEPTH_STENCIL,b._shape[0],b._shape[1]):
b._useDepth?d.renderbufferStorage(d.RENDERBUFFER,d.DEPTH_COMPONENT16,b._shape[0],b._shape[1]):b._useStencil&&d.renderbufferStorage(d.RENDERBUFFER,d.STENCIL_INDEX,b._shape[0],b._shape[1]));d.bindFramebuffer(d.FRAMEBUFFER,b.handle);c=d.checkFramebufferStatus(d.FRAMEBUFFER);c!==d.FRAMEBUFFER_COMPLETE&&(b.dispose(),g(d,a),h(c));g(d,a)}}var q=a("gl-texture2d");t.exports=function(b,a,e,g){f||(f=b.FRAMEBUFFER_UNSUPPORTED,c=b.FRAMEBUFFER_INCOMPLETE_ATTACHMENT,k=b.FRAMEBUFFER_INCOMPLETE_DIMENSIONS,r=b.FRAMEBUFFER_INCOMPLETE_MISSING_ATTACHMENT);
var h=b.getExtension("WEBGL_draw_buffers");if(!d&&h){var q=b.getParameter(h.MAX_COLOR_ATTACHMENTS_WEBGL);d=Array(q+1);for(var n=0;n<=q;++n){for(var u=Array(q),p=0;p<n;++p)u[p]=b.COLOR_ATTACHMENT0+p;for(p=n;p<q;++p)u[p]=b.NONE;d[n]=u}}Array.isArray(a)&&(g=e,e=a[1]|0,a=a[0]|0);if("number"!==typeof a)throw Error("gl-fbo: Missing shape parameter");q=b.getParameter(b.MAX_RENDERBUFFER_SIZE);if(0>a||a>q||0>e||e>q)throw Error("gl-fbo: Parameters are too large for FBO");g=g||{};q=1;if("color"in g){q=Math.max(g.color|
0,0);if(0>q)throw Error("gl-fbo: Must specify a nonnegative number of colors");if(1<q){if(!h)throw Error("gl-fbo: Multiple draw buffer extension not supported");if(q>b.getParameter(h.MAX_COLOR_ATTACHMENTS_WEBGL))throw Error("gl-fbo: Context does not support "+q+" draw buffers");}}n=b.UNSIGNED_BYTE;u=b.getExtension("OES_texture_float");if(g.float&&0<q){if(!u)throw Error("gl-fbo: Context does not support floating point textures");n=b.FLOAT}else g.preferFloat&&0<q&&u&&(n=b.FLOAT);u=!0;"depth"in g&&(u=
!!g.depth);p=!1;"stencil"in g&&(p=!!g.stencil);return new l(b,a,e,n,q,u,p,h)};var d=null,f,c,k,r;a=l.prototype;Object.defineProperties(a,{shape:{get:function(){return this._destroyed?[0,0]:this._shapeVector},set:function(b){Array.isArray(b)||(b=[b|0,b|0]);if(2!==b.length)throw Error("gl-fbo: Shape vector must be length 2");var a=b[0]|0;b=b[1]|0;u(this,a,b);return[a,b]},enumerable:!1},width:{get:function(){return this._destroyed?0:this._shape[0]},set:function(b){b|=0;u(this,b,this._shape[1]);return b},
enumerable:!1},height:{get:function(){return this._destroyed?0:this._shape[1]},set:function(b){b|=0;u(this,this._shape[0],b);return b},enumerable:!1}});a.bind=function(){if(!this._destroyed){var b=this.gl;b.bindFramebuffer(b.FRAMEBUFFER,this.handle);b.viewport(0,0,this._shape[0],this._shape[1])}};a.dispose=function(){if(!this._destroyed){this._destroyed=!0;var b=this.gl;b.deleteFramebuffer(this.handle);this.handle=null;this.depth&&(this.depth.dispose(),this.depth=null);this._depth_rb&&(b.deleteRenderbuffer(this._depth_rb),
this._depth_rb=null);for(var a=0;a<this.color.length;++a)this.color[a].dispose(),this.color[a]=null;this._color_rb&&(b.deleteRenderbuffer(this._color_rb),this._color_rb=null)}}},{"gl-texture2d":314}],246:[function(a,t,m){var p=a("sprintf-js").sprintf,g=a("gl-constants/lookup"),h=a("glsl-shader-name"),e=a("add-line-numbers");t.exports=function(a,b,l){var n=h(b)||"of unknown name (see npm glsl-shader-name)",q="unknown type";void 0!==l&&(q=l===g.FRAGMENT_SHADER?"fragment":"vertex");l=p("Error compiling %s shader %s:\n",
q,n);n=p("%s%s",l,a);var d=a.split("\n");a={};for(q=0;q<d.length;q++){var f=d[q];if(""!==f&&"\x00"!==f){var c=parseInt(f.split(":")[2]);if(isNaN(c))throw Error(p("Could not parse error: %s",f));a[c]=f}}b=e(b).split("\n");for(q=0;q<b.length;q++)if(a[q+3]||a[q+2]||a[q+1])l+=b[q]+"\n",a[q+1]&&(d=a[q+1],d=d.substr(d.split(":",3).join(":").length+1).trim(),l+=p("^^^ %s\n\n",d));return{long:l.trim(),short:n.trim()}}},{"add-line-numbers":51,"gl-constants/lookup":242,"glsl-shader-name":393,"sprintf-js":512}],
247:[function(a,t,m){function p(b,a,f,c,e,r,g){this.plot=b;this.shader=a;this.pickShader=f;this.positionBuffer=c;this.weightBuffer=e;this.colorBuffer=r;this.idBuffer=g;this.xData=[];this.yData=[];this.shape=[0,0];this.bounds=[Infinity,Infinity,-Infinity,-Infinity];this.pickOffset=0}t.exports=function(a,d){var f=a.gl,c=n(f,l.vertex,l.fragment),e=n(f,l.pickVertex,l.pickFragment),r=b(f),g=b(f),h=b(f);f=b(f);c=new p(a,c,e,r,g,h,f);c.update(d);a.addObject(c);return c};var g=a("binary-search-bounds"),h=
a("iota-array"),e=a("typedarray-pool"),n=a("gl-shader"),b=a("gl-buffer"),l=a("./lib/shaders");a=p.prototype;var u=[0,0,1,0,0,1,1,0,1,1,0,1];a.draw=function(){var b=[1,0,0,0,1,0,0,0,1];return function(){var a=this.plot,f=this.shader,c=this.bounds,e=this.numVertices;if(!(0>=e)){var r=a.gl;a=a.dataBox;var g=c[3]-c[1],l=a[2]-a[0],h=a[3]-a[1];b[0]=2*(c[2]-c[0])/l;b[4]=2*g/h;b[6]=2*(c[0]-a[0])/l-1;b[7]=2*(c[1]-a[1])/h-1;f.bind();c=f.uniforms;c.viewTransform=b;c.shape=this.shape;f=f.attributes;this.positionBuffer.bind();
f.position.pointer();this.weightBuffer.bind();f.weight.pointer(r.UNSIGNED_BYTE,!1);this.colorBuffer.bind();f.color.pointer(r.UNSIGNED_BYTE,!0);r.drawArrays(r.TRIANGLES,0,e)}}}();a.drawPick=function(){var b=[1,0,0,0,1,0,0,0,1],a=[0,0,0,0];return function(d){var c=this.plot,f=this.pickShader,e=this.bounds,g=this.numVertices;if(!(0>=g)){var l=c.gl;c=c.dataBox;var h=e[3]-e[1],q=c[2]-c[0],n=c[3]-c[1];b[0]=2*(e[2]-e[0])/q;b[4]=2*h/n;b[6]=2*(e[0]-c[0])/q-1;b[7]=2*(e[1]-c[1])/n-1;for(e=0;4>e;++e)a[e]=d>>
8*e&255;this.pickOffset=d;f.bind();e=f.uniforms;e.viewTransform=b;e.pickOffset=a;e.shape=this.shape;f=f.attributes;this.positionBuffer.bind();f.position.pointer();this.weightBuffer.bind();f.weight.pointer(l.UNSIGNED_BYTE,!1);this.idBuffer.bind();f.pickId.pointer(l.UNSIGNED_BYTE,!1);l.drawArrays(l.TRIANGLES,0,g);return d+this.shape[0]*this.shape[1]}}}();a.pick=function(b,a,f){b=this.pickOffset;a=this.shape[0]*this.shape[1];if(f<b||f>=b+a)return null;f-=b;return{object:this,pointId:f,dataCoord:[this.xData[f%
this.shape[0]],this.yData[f/this.shape[0]|0]]}};a.update=function(b){b=b||{};var a=b.shape||[0,0],f=b.x||h(a[0]),c=b.y||h(a[1]),k=b.z||new Float32Array(a[0]*a[1]);this.xData=f;this.yData=c;var r=b.colorLevels||[0];b=b.colorValues||[0,0,0,1];var l=r.length,q=this.bounds,n=q[0]=f[0],p=q[1]=c[0],w=q[2]=f[f.length-1];q=q[3]=c[c.length-1];w=1/(w-n);q=1/(q-p);var x=a[0];a=a[1];this.shape=[x,a];var m=(x-1)*(a-1)*(u.length>>>1);this.numVertices=m;var B=e.mallocUint8(4*m),t=e.mallocFloat32(2*m),D=e.mallocUint8(2*
m);m=e.mallocUint32(m);for(var G=0,H=0;H<a-1;++H)for(var E=q*(c[H]-p),K=q*(c[H+1]-p),I=0;I<x-1;++I)for(var J=w*(f[I]-n),L=w*(f[I+1]-n),M=0;M<u.length;M+=2){var N=u[M],O=u[M+1],R=k[(H+O)*x+(I+N)],T=g.le(r,R);if(0>T){T=b[0];R=b[1];var P=b[2];var S=b[3]}else if(T===l-1)T=b[4*l-4],R=b[4*l-3],P=b[4*l-2],S=b[4*l-1];else{S=(R-r[T])/(r[T+1]-r[T]);var ba=1-S,da=4*T,ca=4*(T+1);T=ba*b[da]+S*b[ca];R=ba*b[da+1]+S*b[ca+1];P=ba*b[da+2]+S*b[ca+2];S=ba*b[da+3]+S*b[ca+3]}B[4*G]=255*T;B[4*G+1]=255*R;B[4*G+2]=255*P;
B[4*G+3]=255*S;t[2*G]=.5*J+.5*L;t[2*G+1]=.5*E+.5*K;D[2*G]=N;D[2*G+1]=O;m[G]=H*x+I;G+=1}this.positionBuffer.update(t);this.weightBuffer.update(D);this.colorBuffer.update(B);this.idBuffer.update(m);e.free(t);e.free(B);e.free(D);e.free(m)};a.dispose=function(){this.shader.dispose();this.pickShader.dispose();this.positionBuffer.dispose();this.weightBuffer.dispose();this.colorBuffer.dispose();this.idBuffer.dispose();this.plot.removeObject(this)}},{"./lib/shaders":248,"binary-search-bounds":249,"gl-buffer":237,
"gl-shader":297,"iota-array":408,"typedarray-pool":529}],248:[function(a,t,m){a=a("glslify");t.exports={fragment:a(["precision lowp float;\n#define GLSLIFY 1\nvarying vec4 fragColor;\nvoid main() {\n  gl_FragColor \x3d vec4(fragColor.rgb * fragColor.a, fragColor.a);\n}\n"]),vertex:a(["precision mediump float;\n#define GLSLIFY 1\n\nattribute vec2 position;\nattribute vec4 color;\nattribute vec2 weight;\n\nuniform vec2 shape;\nuniform mat3 viewTransform;\n\nvarying vec4 fragColor;\n\nvoid main() {\n  vec3 vPosition \x3d viewTransform * vec3( position + (weight-.5)/(shape-1.) , 1.0);\n  fragColor \x3d color;\n  gl_Position \x3d vec4(vPosition.xy, 0, vPosition.z);\n}\n"]),
pickFragment:a(["precision mediump float;\n#define GLSLIFY 1\n\nvarying vec4 fragId;\nvarying vec2 vWeight;\n\nuniform vec2 shape;\nuniform vec4 pickOffset;\n\nvoid main() {\n  vec2 d \x3d step(.5, vWeight);\n  vec4 id \x3d fragId + pickOffset;\n  id.x +\x3d d.x + d.y*shape.x;\n\n  id.y +\x3d floor(id.x / 256.0);\n  id.x -\x3d floor(id.x / 256.0) * 256.0;\n\n  id.z +\x3d floor(id.y / 256.0);\n  id.y -\x3d floor(id.y / 256.0) * 256.0;\n\n  id.w +\x3d floor(id.z / 256.0);\n  id.z -\x3d floor(id.z / 256.0) * 256.0;\n\n  gl_FragColor \x3d id/255.;\n}\n"]),
pickVertex:a(["precision mediump float;\n#define GLSLIFY 1\n\nattribute vec2 position;\nattribute vec4 pickId;\nattribute vec2 weight;\n\nuniform vec2 shape;\nuniform mat3 viewTransform;\n\nvarying vec4 fragId;\nvarying vec2 vWeight;\n\nvoid main() {\n  vWeight \x3d weight;\n\n  fragId \x3d pickId;\n\n  vec3 vPosition \x3d viewTransform * vec3( position + (weight-.5)/(shape-1.) , 1.0);\n  gl_Position \x3d vec4(vPosition.xy, 0, vPosition.z);\n}\n"])}},{glslify:401}],249:[function(a,t,m){arguments[4][101][0].apply(m,
arguments)},{dup:101}],250:[function(a,t,m){t=a("glslify");var p=a("gl-shader"),g=t(["precision highp float;\n#define GLSLIFY 1\n\nattribute vec3 position, nextPosition;\nattribute float arcLength, lineWidth;\nattribute vec4 color;\n\nuniform vec2 screenShape;\nuniform float pixelRatio;\nuniform mat4 model, view, projection;\n\nvarying vec4 fragColor;\nvarying vec3 worldPosition;\nvarying float pixelArcLength;\n\nvec4 project(vec3 p) {\n  return projection * view * model * vec4(p, 1.0);\n}\n\nvoid main() {\n  vec4 startPoint \x3d project(position);\n  vec4 endPoint   \x3d project(nextPosition);\n\n  vec2 A \x3d startPoint.xy / startPoint.w;\n  vec2 B \x3d   endPoint.xy /   endPoint.w;\n\n  float clipAngle \x3d atan(\n    (B.y - A.y) * screenShape.y,\n    (B.x - A.x) * screenShape.x\n  );\n\n  vec2 offset \x3d 0.5 * pixelRatio * lineWidth * vec2(\n    sin(clipAngle),\n    -cos(clipAngle)\n  ) / screenShape;\n\n  gl_Position \x3d vec4(startPoint.xy + startPoint.w * offset, startPoint.zw);\n\n  worldPosition \x3d position;\n  pixelArcLength \x3d arcLength;\n  fragColor \x3d color;\n}\n"]),
h=t(["precision highp float;\n#define GLSLIFY 1\n\nbool outOfRange(float a, float b, float p) {\n  return ((p \x3e max(a, b)) || \n          (p \x3c min(a, b)));\n}\n\nbool outOfRange(vec2 a, vec2 b, vec2 p) {\n  return (outOfRange(a.x, b.x, p.x) ||\n          outOfRange(a.y, b.y, p.y));\n}\n\nbool outOfRange(vec3 a, vec3 b, vec3 p) {\n  return (outOfRange(a.x, b.x, p.x) ||\n          outOfRange(a.y, b.y, p.y) ||\n          outOfRange(a.z, b.z, p.z));\n}\n\nbool outOfRange(vec4 a, vec4 b, vec4 p) {\n  return outOfRange(a.xyz, b.xyz, p.xyz);\n}\n\nuniform vec3      clipBounds[2];\nuniform sampler2D dashTexture;\nuniform float     dashScale;\nuniform float     opacity;\n\nvarying vec3    worldPosition;\nvarying float   pixelArcLength;\nvarying vec4    fragColor;\n\nvoid main() {\n  if (\n    outOfRange(clipBounds[0], clipBounds[1], worldPosition) ||\n    fragColor.a * opacity \x3d\x3d 0.\n  ) discard;\n\n  float dashWeight \x3d texture2D(dashTexture, vec2(dashScale * pixelArcLength, 0)).r;\n  if(dashWeight \x3c 0.5) {\n    discard;\n  }\n  gl_FragColor \x3d fragColor * opacity;\n}\n"]),
e=t(["precision highp float;\n#define GLSLIFY 1\n\n#define FLOAT_MAX  1.70141184e38\n#define FLOAT_MIN  1.17549435e-38\n\nlowp vec4 encode_float_1540259130(highp float v) {\n  highp float av \x3d abs(v);\n\n  //Handle special cases\n  if(av \x3c FLOAT_MIN) {\n    return vec4(0.0, 0.0, 0.0, 0.0);\n  } else if(v \x3e FLOAT_MAX) {\n    return vec4(127.0, 128.0, 0.0, 0.0) / 255.0;\n  } else if(v \x3c -FLOAT_MAX) {\n    return vec4(255.0, 128.0, 0.0, 0.0) / 255.0;\n  }\n\n  highp vec4 c \x3d vec4(0,0,0,0);\n\n  //Compute exponent and mantissa\n  highp float e \x3d floor(log2(av));\n  highp float m \x3d av * pow(2.0, -e) - 1.0;\n  \n  //Unpack mantissa\n  c[1] \x3d floor(128.0 * m);\n  m -\x3d c[1] / 128.0;\n  c[2] \x3d floor(32768.0 * m);\n  m -\x3d c[2] / 32768.0;\n  c[3] \x3d floor(8388608.0 * m);\n  \n  //Unpack exponent\n  highp float ebias \x3d e + 127.0;\n  c[0] \x3d floor(ebias / 2.0);\n  ebias -\x3d c[0] * 2.0;\n  c[1] +\x3d floor(ebias) * 128.0; \n\n  //Unpack sign bit\n  c[0] +\x3d 128.0 * step(0.0, -v);\n\n  //Scale back to range\n  return c / 255.0;\n}\n\nbool outOfRange(float a, float b, float p) {\n  return ((p \x3e max(a, b)) || \n          (p \x3c min(a, b)));\n}\n\nbool outOfRange(vec2 a, vec2 b, vec2 p) {\n  return (outOfRange(a.x, b.x, p.x) ||\n          outOfRange(a.y, b.y, p.y));\n}\n\nbool outOfRange(vec3 a, vec3 b, vec3 p) {\n  return (outOfRange(a.x, b.x, p.x) ||\n          outOfRange(a.y, b.y, p.y) ||\n          outOfRange(a.z, b.z, p.z));\n}\n\nbool outOfRange(vec4 a, vec4 b, vec4 p) {\n  return outOfRange(a.xyz, b.xyz, p.xyz);\n}\n\nuniform float pickId;\nuniform vec3 clipBounds[2];\n\nvarying vec3 worldPosition;\nvarying float pixelArcLength;\nvarying vec4 fragColor;\n\nvoid main() {\n  if (outOfRange(clipBounds[0], clipBounds[1], worldPosition)) discard;\n\n  gl_FragColor \x3d vec4(pickId/255.0, encode_float_1540259130(pixelArcLength).xyz);\n}"]),
n=[{name:"position",type:"vec3"},{name:"nextPosition",type:"vec3"},{name:"arcLength",type:"float"},{name:"lineWidth",type:"float"},{name:"color",type:"vec4"}];m.createShader=function(b){return p(b,g,h,null,n)};m.createPickShader=function(b){return p(b,g,e,null,n)}},{"gl-shader":297,glslify:401}],251:[function(a,t,m){function p(b){for(var a=[[-1E6,-1E6,-1E6],[1E6,1E6,1E6]],c=0;3>c;++c)a[0][c]=Math.max(b[0][c],a[0][c]),a[1][c]=Math.min(b[1][c],a[1][c]);return a}function g(b,a,c,d){this.arcLength=b;
this.position=a;this.index=c;this.dataCoordinate=d}function h(b,a,c,d,f,e){this.gl=b;this.shader=a;this.pickShader=c;this.buffer=d;this.vao=f;this.clipBounds=[[-Infinity,-Infinity,-Infinity],[Infinity,Infinity,Infinity]];this.points=[];this.arcLength=[];this.vertexCount=0;this.bounds=[[0,0,0],[0,0,0]];this.pickId=0;this.lineWidth=1;this.texture=e;this.opacity=this.dashScale=1;this.hasAlpha=!1;this.dirty=!0;this.pixelRatio=1}t.exports=function(a){var c=a.gl||a.scene&&a.scene.gl,k=d(c);k.attributes.position.location=
0;k.attributes.nextPosition.location=1;k.attributes.arcLength.location=2;k.attributes.lineWidth.location=3;k.attributes.color.location=4;var g=f(c);g.attributes.position.location=0;g.attributes.nextPosition.location=1;g.attributes.arcLength.location=2;g.attributes.lineWidth.location=3;g.attributes.color.location=4;for(var l=e(c),u=n(c,[{buffer:l,size:3,offset:0,stride:48},{buffer:l,size:3,offset:12,stride:48},{buffer:l,size:1,offset:24,stride:48},{buffer:l,size:1,offset:28,stride:48},{buffer:l,size:4,
offset:32,stride:48}]),p=q(Array(1024),[256,1,4]),x=0;1024>x;++x)p.data[x]=255;p=b(c,p);p.wrap=c.REPEAT;c=new h(c,k,g,l,u,p);c.update(a);return c};var e=a("gl-buffer"),n=a("gl-vao"),b=a("gl-texture2d"),l=a("glsl-read-float"),u=a("binary-search-bounds"),q=a("ndarray");a=a("./lib/shaders");var d=a.createShader,f=a.createPickShader,c=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1];a=h.prototype;a.isTransparent=function(){return this.hasAlpha};a.isOpaque=function(){return!this.hasAlpha};a.pickSlots=1;a.setPickBase=
function(b){this.pickId=b};a.drawTransparent=a.draw=function(b){if(this.vertexCount){var a=this.gl,d=this.shader,f=this.vao;d.bind();d.uniforms={model:b.model||c,view:b.view||c,projection:b.projection||c,clipBounds:p(this.clipBounds),dashTexture:this.texture.bind(),dashScale:this.dashScale/this.arcLength[this.arcLength.length-1],opacity:this.opacity,screenShape:[a.drawingBufferWidth,a.drawingBufferHeight],pixelRatio:this.pixelRatio};f.bind();f.draw(a.TRIANGLE_STRIP,this.vertexCount);f.unbind()}};
a.drawPick=function(b){if(this.vertexCount){var a=this.gl,d=this.pickShader,f=this.vao;d.bind();d.uniforms={model:b.model||c,view:b.view||c,projection:b.projection||c,pickId:this.pickId,clipBounds:p(this.clipBounds),screenShape:[a.drawingBufferWidth,a.drawingBufferHeight],pixelRatio:this.pixelRatio};f.bind();f.draw(a.TRIANGLE_STRIP,this.vertexCount);f.unbind()}};a.update=function(b){var a;this.dirty=!0;var c=!!b.connectGaps;"dashScale"in b&&(this.dashScale=b.dashScale);this.hasAlpha=!1;"opacity"in
b&&(this.opacity=+b.opacity,1>this.opacity&&(this.hasAlpha=!0));var d=[],f=[],e=[],k=0,g=0,l=[[Infinity,Infinity,Infinity],[-Infinity,-Infinity,-Infinity]],h=b.position||b.positions;if(h){var n=b.color||b.colors||[0,0,0,1],p=b.lineWidth||1,m=!1;var t=1;a:for(;t<h.length;++t){var E=h[t-1],K=h[t];f.push(k);e.push(E.slice());for(a=0;3>a;++a){if(isNaN(E[a])||isNaN(K[a])||!isFinite(E[a])||!isFinite(K[a])){if(!c&&0<d.length){for(m=0;24>m;++m)d.push(d[d.length-12]);g+=2;m=!0}continue a}l[0][a]=Math.min(l[0][a],
E[a],K[a]);l[1][a]=Math.max(l[1][a],E[a],K[a])}if(Array.isArray(n[0])){var I=n.length>t-1?n[t-1]:0<n.length?n[n.length-1]:[0,0,0,1];var J=n.length>t?n[t]:0<n.length?n[n.length-1]:[0,0,0,1]}else I=J=n;3===I.length&&(I=[I[0],I[1],I[2],1]);3===J.length&&(J=[J[0],J[1],J[2],1]);!this.hasAlpha&&1>I[3]&&(this.hasAlpha=!0);var L=Array.isArray(p)?p.length>t-1?p[t-1]:0<p.length?p[p.length-1]:[0,0,0,1]:p;var M=k;a=k;for(var N=k=0;3>N;++N){var O=E[N]-K[N];k+=O*O}k=a+Math.sqrt(k);if(m){for(a=0;2>a;++a)d.push(E[0],
E[1],E[2],K[0],K[1],K[2],M,L,I[0],I[1],I[2],I[3]);g+=2;m=!1}d.push(E[0],E[1],E[2],K[0],K[1],K[2],M,L,I[0],I[1],I[2],I[3],E[0],E[1],E[2],K[0],K[1],K[2],M,-L,I[0],I[1],I[2],I[3],K[0],K[1],K[2],E[0],E[1],E[2],k,-L,J[0],J[1],J[2],J[3],K[0],K[1],K[2],E[0],E[1],E[2],k,L,J[0],J[1],J[2],J[3]);g+=4}}this.buffer.update(d);f.push(k);e.push(h[h.length-1].slice());this.bounds=l;this.vertexCount=g;this.points=e;this.arcLength=f;if("dashes"in b){b=b.dashes.slice();b.unshift(0);for(t=1;t<b.length;++t)b[t]=b[t-1]+
b[t];c=q(Array(1024),[256,1,4]);for(t=0;256>t;++t){for(a=0;4>a;++a)c.set(t,0,a,0);u.le(b,b[b.length-1]*t/255)&1?c.set(t,0,0,0):c.set(t,0,0,255)}this.texture.setPixels(c)}};a.dispose=function(){this.shader.dispose();this.vao.dispose();this.buffer.dispose()};a.pick=function(b){if(!b||b.id!==this.pickId)return null;b=l(b.value[0],b.value[1],b.value[2],0);var a=u.le(this.arcLength,b);if(0>a)return null;if(a===this.arcLength.length-1)return new g(this.arcLength[this.arcLength.length-1],this.points[this.points.length-
1].slice(),a);for(var c=this.points[a],d=this.points[Math.min(a+1,this.points.length-1)],f=(b-this.arcLength[a])/(this.arcLength[a+1]-this.arcLength[a]),e=1-f,k=[0,0,0],h=0;3>h;++h)k[h]=e*c[h]+f*d[h];a=Math.min(.5>f?a:a+1,this.points.length-1);return new g(b,k,a,this.points[a])}},{"./lib/shaders":250,"binary-search-bounds":252,"gl-buffer":237,"gl-texture2d":314,"gl-vao":319,"glsl-read-float":392,ndarray:442}],252:[function(a,t,m){arguments[4][101][0].apply(m,arguments)},{dup:101}],253:[function(a,
t,m){t.exports=function(a,g){var h=g[0],e=g[1],n=g[2];g=g[3];var b=h*g-n*e;if(!b)return null;b=1/b;a[0]=g*b;a[1]=-e*b;a[2]=-n*b;a[3]=h*b;return a}},{}],254:[function(a,t,m){t.exports=function(a,g){var h=g[0],e=g[1],n=g[2],b=g[3],l=g[4],u=g[5],q=g[6],d=g[7];g=g[8];var f=g*l-u*d,c=-g*b+u*q,k=d*b-l*q,r=h*f+e*c+n*k;if(!r)return null;r=1/r;a[0]=f*r;a[1]=(-g*e+n*d)*r;a[2]=(u*e-n*l)*r;a[3]=c*r;a[4]=(g*h-n*q)*r;a[5]=(-u*h+n*b)*r;a[6]=k*r;a[7]=(-d*h+e*q)*r;a[8]=(l*h-e*b)*r;return a}},{}],255:[function(a,t,
m){t.exports=function(a){var g=new Float32Array(16);g[0]=a[0];g[1]=a[1];g[2]=a[2];g[3]=a[3];g[4]=a[4];g[5]=a[5];g[6]=a[6];g[7]=a[7];g[8]=a[8];g[9]=a[9];g[10]=a[10];g[11]=a[11];g[12]=a[12];g[13]=a[13];g[14]=a[14];g[15]=a[15];return g}},{}],256:[function(a,t,m){t.exports=function(){var a=new Float32Array(16);a[0]=1;a[1]=0;a[2]=0;a[3]=0;a[4]=0;a[5]=1;a[6]=0;a[7]=0;a[8]=0;a[9]=0;a[10]=1;a[11]=0;a[12]=0;a[13]=0;a[14]=0;a[15]=1;return a}},{}],257:[function(a,t,m){t.exports=function(a){var g=a[0],h=a[1],
e=a[2],n=a[3],b=a[4],l=a[5],u=a[6],q=a[7],d=a[8],f=a[9],c=a[10],k=a[11],r=a[12],p=a[13],z=a[14];a=a[15];return(g*l-h*b)*(c*a-k*z)-(g*u-e*b)*(f*a-k*p)+(g*q-n*b)*(f*z-c*p)+(h*u-e*l)*(d*a-k*r)-(h*q-n*l)*(d*z-c*r)+(e*q-n*u)*(d*p-f*r)}},{}],258:[function(a,t,m){t.exports=function(a,g){var h=g[0],e=g[1],n=g[2];g=g[3];var b=h+h,l=e+e,u=n+n;h*=b;var q=e*b;e*=l;var d=n*b,f=n*l;n*=u;b*=g;l*=g;g*=u;a[0]=1-e-n;a[1]=q+g;a[2]=d-l;a[3]=0;a[4]=q-g;a[5]=1-h-n;a[6]=f+b;a[7]=0;a[8]=d+l;a[9]=f-b;a[10]=1-h-e;a[11]=0;
a[12]=0;a[13]=0;a[14]=0;a[15]=1;return a}},{}],259:[function(a,t,m){t.exports=function(a,g,h){var e=g[0],n=g[1],b=g[2],l=g[3],u=e+e,q=n+n,d=b+b;g=e*u;var f=e*q;e*=d;var c=n*q;n*=d;b*=d;u*=l;q*=l;l*=d;a[0]=1-(c+b);a[1]=f+l;a[2]=e-q;a[3]=0;a[4]=f-l;a[5]=1-(g+b);a[6]=n+u;a[7]=0;a[8]=e+q;a[9]=n-u;a[10]=1-(g+c);a[11]=0;a[12]=h[0];a[13]=h[1];a[14]=h[2];a[15]=1;return a}},{}],260:[function(a,t,m){t.exports=function(a){a[0]=1;a[1]=0;a[2]=0;a[3]=0;a[4]=0;a[5]=1;a[6]=0;a[7]=0;a[8]=0;a[9]=0;a[10]=1;a[11]=0;
a[12]=0;a[13]=0;a[14]=0;a[15]=1;return a}},{}],261:[function(a,t,m){t.exports=function(a,g){var h=g[0],e=g[1],n=g[2],b=g[3],l=g[4],u=g[5],q=g[6],d=g[7],f=g[8],c=g[9],k=g[10],r=g[11],p=g[12],z=g[13],A=g[14];g=g[15];var y=h*u-e*l,w=h*q-n*l,x=h*d-b*l,m=e*q-n*u,B=e*d-b*u,t=n*d-b*q,D=f*z-c*p,G=f*A-k*p,H=f*g-r*p,E=c*A-k*z,K=c*g-r*z,I=k*g-r*A,J=y*I-w*K+x*E+m*H-B*G+t*D;if(!J)return null;J=1/J;a[0]=(u*I-q*K+d*E)*J;a[1]=(n*K-e*I-b*E)*J;a[2]=(z*t-A*B+g*m)*J;a[3]=(k*B-c*t-r*m)*J;a[4]=(q*H-l*I-d*G)*J;a[5]=(h*
I-n*H+b*G)*J;a[6]=(A*x-p*t-g*w)*J;a[7]=(f*t-k*x+r*w)*J;a[8]=(l*K-u*H+d*D)*J;a[9]=(e*H-h*K-b*D)*J;a[10]=(p*B-z*x+g*y)*J;a[11]=(c*x-f*B-r*y)*J;a[12]=(u*G-l*E-q*D)*J;a[13]=(h*E-e*G+n*D)*J;a[14]=(z*w-p*m-A*y)*J;a[15]=(f*m-c*w+k*y)*J;return a}},{}],262:[function(a,t,m){var p=a("./identity");t.exports=function(a,h,e,n){var b=h[0],g=h[1];h=h[2];var u=n[0];var q=n[1];var d=n[2];var f=e[0];n=e[1];var c=e[2];if(1E-6>Math.abs(b-f)&&1E-6>Math.abs(g-n)&&1E-6>Math.abs(h-c))return p(a);e=b-f;n=g-n;f=h-c;var k=1/
Math.sqrt(e*e+n*n+f*f);e*=k;n*=k;f*=k;c=q*f-d*n;d=d*e-u*f;u=u*n-q*e;(k=Math.sqrt(c*c+d*d+u*u))?(k=1/k,c*=k,d*=k,u*=k):u=d=c=0;q=n*u-f*d;var r=f*c-e*u;var v=e*d-n*c;(k=Math.sqrt(q*q+r*r+v*v))?(k=1/k,q*=k,r*=k,v*=k):v=r=q=0;a[0]=c;a[1]=q;a[2]=e;a[3]=0;a[4]=d;a[5]=r;a[6]=n;a[7]=0;a[8]=u;a[9]=v;a[10]=f;a[11]=0;a[12]=-(c*b+d*g+u*h);a[13]=-(q*b+r*g+v*h);a[14]=-(e*b+n*g+f*h);a[15]=1;return a}},{"./identity":260}],263:[function(a,t,m){t.exports=function(a,g,h){var e=g[0],n=g[1],b=g[2],l=g[3],u=g[4],q=g[5],
d=g[6],f=g[7],c=g[8],k=g[9],r=g[10],p=g[11],z=g[12],A=g[13],y=g[14];g=g[15];var w=h[0],x=h[1],m=h[2],B=h[3];a[0]=w*e+x*u+m*c+B*z;a[1]=w*n+x*q+m*k+B*A;a[2]=w*b+x*d+m*r+B*y;a[3]=w*l+x*f+m*p+B*g;w=h[4];x=h[5];m=h[6];B=h[7];a[4]=w*e+x*u+m*c+B*z;a[5]=w*n+x*q+m*k+B*A;a[6]=w*b+x*d+m*r+B*y;a[7]=w*l+x*f+m*p+B*g;w=h[8];x=h[9];m=h[10];B=h[11];a[8]=w*e+x*u+m*c+B*z;a[9]=w*n+x*q+m*k+B*A;a[10]=w*b+x*d+m*r+B*y;a[11]=w*l+x*f+m*p+B*g;w=h[12];x=h[13];m=h[14];B=h[15];a[12]=w*e+x*u+m*c+B*z;a[13]=w*n+x*q+m*k+B*A;a[14]=
w*b+x*d+m*r+B*y;a[15]=w*l+x*f+m*p+B*g;return a}},{}],264:[function(a,t,m){t.exports=function(a,g,h,e,n,b,l){var u=1/(g-h),q=1/(e-n),d=1/(b-l);a[0]=-2*u;a[1]=0;a[2]=0;a[3]=0;a[4]=0;a[5]=-2*q;a[6]=0;a[7]=0;a[8]=0;a[9]=0;a[10]=2*d;a[11]=0;a[12]=(g+h)*u;a[13]=(n+e)*q;a[14]=(l+b)*d;a[15]=1;return a}},{}],265:[function(a,t,m){t.exports=function(a,g,h,e,n){g=1/Math.tan(g/2);var b=1/(e-n);a[0]=g/h;a[1]=0;a[2]=0;a[3]=0;a[4]=0;a[5]=g;a[6]=0;a[7]=0;a[8]=0;a[9]=0;a[10]=(n+e)*b;a[11]=-1;a[12]=0;a[13]=0;a[14]=
2*n*e*b;a[15]=0;return a}},{}],266:[function(a,t,m){t.exports=function(a,g,h,e){var n=e[0],b=e[1];e=e[2];var l=Math.sqrt(n*n+b*b+e*e);if(1E-6>Math.abs(l))return null;l=1/l;n*=l;b*=l;e*=l;var u=Math.sin(h);var q=Math.cos(h);var d=1-q;h=g[0];l=g[1];var f=g[2];var c=g[3];var k=g[4];var r=g[5];var p=g[6];var z=g[7];var A=g[8];var y=g[9];var w=g[10];var x=g[11];var m=n*n*d+q;var B=b*n*d+e*u;var t=e*n*d-b*u;var D=n*b*d-e*u;var G=b*b*d+q;var H=e*b*d+n*u;var E=n*e*d+b*u;n=b*e*d-n*u;b=e*e*d+q;a[0]=h*m+k*B+
A*t;a[1]=l*m+r*B+y*t;a[2]=f*m+p*B+w*t;a[3]=c*m+z*B+x*t;a[4]=h*D+k*G+A*H;a[5]=l*D+r*G+y*H;a[6]=f*D+p*G+w*H;a[7]=c*D+z*G+x*H;a[8]=h*E+k*n+A*b;a[9]=l*E+r*n+y*b;a[10]=f*E+p*n+w*b;a[11]=c*E+z*n+x*b;g!==a&&(a[12]=g[12],a[13]=g[13],a[14]=g[14],a[15]=g[15]);return a}},{}],267:[function(a,t,m){t.exports=function(a,g,h){var e=Math.sin(h);h=Math.cos(h);var n=g[4],b=g[5],l=g[6],u=g[7],q=g[8],d=g[9],f=g[10],c=g[11];g!==a&&(a[0]=g[0],a[1]=g[1],a[2]=g[2],a[3]=g[3],a[12]=g[12],a[13]=g[13],a[14]=g[14],a[15]=g[15]);
a[4]=n*h+q*e;a[5]=b*h+d*e;a[6]=l*h+f*e;a[7]=u*h+c*e;a[8]=q*h-n*e;a[9]=d*h-b*e;a[10]=f*h-l*e;a[11]=c*h-u*e;return a}},{}],268:[function(a,t,m){t.exports=function(a,g,h){var e=Math.sin(h);h=Math.cos(h);var n=g[0],b=g[1],l=g[2],u=g[3],q=g[8],d=g[9],f=g[10],c=g[11];g!==a&&(a[4]=g[4],a[5]=g[5],a[6]=g[6],a[7]=g[7],a[12]=g[12],a[13]=g[13],a[14]=g[14],a[15]=g[15]);a[0]=n*h-q*e;a[1]=b*h-d*e;a[2]=l*h-f*e;a[3]=u*h-c*e;a[8]=n*e+q*h;a[9]=b*e+d*h;a[10]=l*e+f*h;a[11]=u*e+c*h;return a}},{}],269:[function(a,t,m){t.exports=
function(a,g,h){var e=Math.sin(h);h=Math.cos(h);var n=g[0],b=g[1],l=g[2],u=g[3],q=g[4],d=g[5],f=g[6],c=g[7];g!==a&&(a[8]=g[8],a[9]=g[9],a[10]=g[10],a[11]=g[11],a[12]=g[12],a[13]=g[13],a[14]=g[14],a[15]=g[15]);a[0]=n*h+q*e;a[1]=b*h+d*e;a[2]=l*h+f*e;a[3]=u*h+c*e;a[4]=q*h-n*e;a[5]=d*h-b*e;a[6]=f*h-l*e;a[7]=c*h-u*e;return a}},{}],270:[function(a,t,m){t.exports=function(a,g,h){var e=h[0],n=h[1];h=h[2];a[0]=g[0]*e;a[1]=g[1]*e;a[2]=g[2]*e;a[3]=g[3]*e;a[4]=g[4]*n;a[5]=g[5]*n;a[6]=g[6]*n;a[7]=g[7]*n;a[8]=
g[8]*h;a[9]=g[9]*h;a[10]=g[10]*h;a[11]=g[11]*h;a[12]=g[12];a[13]=g[13];a[14]=g[14];a[15]=g[15];return a}},{}],271:[function(a,t,m){t.exports=function(a,g,h){var e=h[0],n=h[1];h=h[2];if(g===a)a[12]=g[0]*e+g[4]*n+g[8]*h+g[12],a[13]=g[1]*e+g[5]*n+g[9]*h+g[13],a[14]=g[2]*e+g[6]*n+g[10]*h+g[14],a[15]=g[3]*e+g[7]*n+g[11]*h+g[15];else{var b=g[0];var l=g[1];var u=g[2];var q=g[3];var d=g[4];var f=g[5];var c=g[6];var k=g[7];var r=g[8];var p=g[9];var z=g[10];var A=g[11];a[0]=b;a[1]=l;a[2]=u;a[3]=q;a[4]=d;a[5]=
f;a[6]=c;a[7]=k;a[8]=r;a[9]=p;a[10]=z;a[11]=A;a[12]=b*e+d*n+r*h+g[12];a[13]=l*e+f*n+p*h+g[13];a[14]=u*e+c*n+z*h+g[14];a[15]=q*e+k*n+A*h+g[15]}return a}},{}],272:[function(a,t,m){t.exports=function(a,g){if(a===g){var h=g[1],e=g[2],n=g[3],b=g[6],l=g[7],u=g[11];a[1]=g[4];a[2]=g[8];a[3]=g[12];a[4]=h;a[6]=g[9];a[7]=g[13];a[8]=e;a[9]=b;a[11]=g[14];a[12]=n;a[13]=l;a[14]=u}else a[0]=g[0],a[1]=g[4],a[2]=g[8],a[3]=g[12],a[4]=g[1],a[5]=g[5],a[6]=g[9],a[7]=g[13],a[8]=g[2],a[9]=g[6],a[10]=g[10],a[11]=g[14],a[12]=
g[3],a[13]=g[7],a[14]=g[11],a[15]=g[15];return a}},{}],273:[function(a,t,m){t.exports=function(a,n){switch(n.length){case 0:break;case 1:a[0]=1/n[0];break;case 4:p(a,n);break;case 9:g(a,n);break;case 16:h(a,n);break;default:throw Error("currently supports matrices up to 4x4");}return a};var p=a("gl-mat2/invert"),g=a("gl-mat3/invert"),h=a("gl-mat4/invert")},{"gl-mat2/invert":253,"gl-mat3/invert":254,"gl-mat4/invert":261}],274:[function(a,t,m){function p(a,g){for(var b=[0,0,0,0],e=0;4>e;++e)for(var h=
0;4>h;++h)b[h]+=a[4*e+h]*g[e];return b}var g=a("barycentric"),h=a("polytope-closest-point/lib/closest_point_2d.js");t.exports=function(a,n,b,l,u,q){if(1===a.length)return[0,a[0].slice()];for(var d=Array(a.length),f=0;f<a.length;++f){var c=f,e=a[f],r=q;e=p(u,p(l,p(b,[e[0],e[1],e[2],1])));for(var v=0;3>v;++v)e[v]/=e[3];d[c]=[.5*r[0]*(1+e[0]),.5*r[1]*(1-e[1])]}b=0;l=Infinity;for(f=0;f<d.length;++f){for(q=u=0;2>q;++q)u+=Math.pow(d[f][q]-n[q],2);u<l&&(l=u,b=f)}if(2===d.length){for(u=l=f=0;2>u;++u)f+=Math.pow(n[u]-
d[0][u],2),l+=Math.pow(n[u]-d[1][u],2);f=Math.sqrt(f);l=Math.sqrt(l);n=1E-6>f+l?[1,0]:[l/(f+l),f/(l+f)]}else 3===d.length?(f=[0,0],h(d[0],d[1],d[2],n,f),n=g(d,f)):n=[];for(f=d=0;3>f;++f){if(-.001>n[f]||1.0001<n[f])return null;d+=n[f]}if(.001<Math.abs(d-1))return null;d=[0,0,0];for(f=0;f<a.length;++f)for(l=a[f],u=n[f],q=0;3>q;++q)d[q]+=u*l[q];return[b,d,n]}},{barycentric:63,"polytope-closest-point/lib/closest_point_2d.js":473}],275:[function(a,t,m){var p=a("glslify");a=p(["precision highp float;\n#define GLSLIFY 1\n\nattribute vec3 position, normal;\nattribute vec4 color;\nattribute vec2 uv;\n\nuniform mat4 model\n           , view\n           , projection\n           , inverseModel;\nuniform vec3 eyePosition\n           , lightPosition;\n\nvarying vec3 f_normal\n           , f_lightDirection\n           , f_eyeDirection\n           , f_data;\nvarying vec4 f_color;\nvarying vec2 f_uv;\n\nvec4 project(vec3 p) {\n  return projection * view * model * vec4(p, 1.0);\n}\n\nvoid main() {\n  gl_Position      \x3d project(position);\n\n  //Lighting geometry parameters\n  vec4 cameraCoordinate \x3d view * vec4(position , 1.0);\n  cameraCoordinate.xyz /\x3d cameraCoordinate.w;\n  f_lightDirection \x3d lightPosition - cameraCoordinate.xyz;\n  f_eyeDirection   \x3d eyePosition - cameraCoordinate.xyz;\n  f_normal  \x3d normalize((vec4(normal,0) * inverseModel).xyz);\n\n  f_color          \x3d color;\n  f_data           \x3d position;\n  f_uv             \x3d uv;\n}\n"]);
t=p(["#extension GL_OES_standard_derivatives : enable\n\nprecision highp float;\n#define GLSLIFY 1\n\nfloat beckmannDistribution(float x, float roughness) {\n  float NdotH \x3d max(x, 0.0001);\n  float cos2Alpha \x3d NdotH * NdotH;\n  float tan2Alpha \x3d (cos2Alpha - 1.0) / cos2Alpha;\n  float roughness2 \x3d roughness * roughness;\n  float denom \x3d 3.141592653589793 * roughness2 * cos2Alpha * cos2Alpha;\n  return exp(tan2Alpha / roughness2) / denom;\n}\n\nfloat cookTorranceSpecular(\n  vec3 lightDirection,\n  vec3 viewDirection,\n  vec3 surfaceNormal,\n  float roughness,\n  float fresnel) {\n\n  float VdotN \x3d max(dot(viewDirection, surfaceNormal), 0.0);\n  float LdotN \x3d max(dot(lightDirection, surfaceNormal), 0.0);\n\n  //Half angle vector\n  vec3 H \x3d normalize(lightDirection + viewDirection);\n\n  //Geometric term\n  float NdotH \x3d max(dot(surfaceNormal, H), 0.0);\n  float VdotH \x3d max(dot(viewDirection, H), 0.000001);\n  float LdotH \x3d max(dot(lightDirection, H), 0.000001);\n  float G1 \x3d (2.0 * NdotH * VdotN) / VdotH;\n  float G2 \x3d (2.0 * NdotH * LdotN) / LdotH;\n  float G \x3d min(1.0, min(G1, G2));\n  \n  //Distribution term\n  float D \x3d beckmannDistribution(NdotH, roughness);\n\n  //Fresnel term\n  float F \x3d pow(1.0 - VdotN, fresnel);\n\n  //Multiply terms and done\n  return  G * F * D / max(3.14159265 * VdotN, 0.000001);\n}\n\n//#pragma glslify: beckmann \x3d require(glsl-specular-beckmann) // used in gl-surface3d\n\nbool outOfRange(float a, float b, float p) {\n  return ((p \x3e max(a, b)) || \n          (p \x3c min(a, b)));\n}\n\nbool outOfRange(vec2 a, vec2 b, vec2 p) {\n  return (outOfRange(a.x, b.x, p.x) ||\n          outOfRange(a.y, b.y, p.y));\n}\n\nbool outOfRange(vec3 a, vec3 b, vec3 p) {\n  return (outOfRange(a.x, b.x, p.x) ||\n          outOfRange(a.y, b.y, p.y) ||\n          outOfRange(a.z, b.z, p.z));\n}\n\nbool outOfRange(vec4 a, vec4 b, vec4 p) {\n  return outOfRange(a.xyz, b.xyz, p.xyz);\n}\n\nuniform vec3 clipBounds[2];\nuniform float roughness\n            , fresnel\n            , kambient\n            , kdiffuse\n            , kspecular\n            , opacity;\nuniform sampler2D texture;\n\nvarying vec3 f_normal\n           , f_lightDirection\n           , f_eyeDirection\n           , f_data;\nvarying vec4 f_color;\nvarying vec2 f_uv;\n\nvoid main() {\n  if (outOfRange(clipBounds[0], clipBounds[1], f_data)) discard;\n\n  vec3 N \x3d normalize(f_normal);\n  vec3 L \x3d normalize(f_lightDirection);\n  vec3 V \x3d normalize(f_eyeDirection);\n\n  if(gl_FrontFacing) {\n    N \x3d -N;\n  }\n\n  float specular \x3d min(1.0, max(0.0, cookTorranceSpecular(L, V, N, roughness, fresnel)));\n  //float specular \x3d max(0.0, beckmann(L, V, N, roughness)); // used in gl-surface3d\n\n  float diffuse  \x3d min(kambient + kdiffuse * max(dot(N, L), 0.0), 1.0);\n\n  vec4 surfaceColor \x3d f_color * texture2D(texture, f_uv);\n  vec4 litColor \x3d surfaceColor.a * vec4(diffuse * surfaceColor.rgb + kspecular * vec3(1,1,1) * specular,  1.0);\n\n  gl_FragColor \x3d litColor * opacity;\n}\n"]);
var g=p(["precision highp float;\n#define GLSLIFY 1\n\nattribute vec3 position;\nattribute vec4 color;\nattribute vec2 uv;\n\nuniform mat4 model, view, projection;\n\nvarying vec4 f_color;\nvarying vec3 f_data;\nvarying vec2 f_uv;\n\nvoid main() {\n  gl_Position \x3d projection * view * model * vec4(position, 1.0);\n  f_color \x3d color;\n  f_data  \x3d position;\n  f_uv    \x3d uv;\n}"]),h=p(["precision highp float;\n#define GLSLIFY 1\n\nbool outOfRange(float a, float b, float p) {\n  return ((p \x3e max(a, b)) || \n          (p \x3c min(a, b)));\n}\n\nbool outOfRange(vec2 a, vec2 b, vec2 p) {\n  return (outOfRange(a.x, b.x, p.x) ||\n          outOfRange(a.y, b.y, p.y));\n}\n\nbool outOfRange(vec3 a, vec3 b, vec3 p) {\n  return (outOfRange(a.x, b.x, p.x) ||\n          outOfRange(a.y, b.y, p.y) ||\n          outOfRange(a.z, b.z, p.z));\n}\n\nbool outOfRange(vec4 a, vec4 b, vec4 p) {\n  return outOfRange(a.xyz, b.xyz, p.xyz);\n}\n\nuniform vec3 clipBounds[2];\nuniform sampler2D texture;\nuniform float opacity;\n\nvarying vec4 f_color;\nvarying vec3 f_data;\nvarying vec2 f_uv;\n\nvoid main() {\n  if (outOfRange(clipBounds[0], clipBounds[1], f_data)) discard;\n\n  gl_FragColor \x3d f_color * texture2D(texture, f_uv) * opacity;\n}"]),
e=p(["precision highp float;\n#define GLSLIFY 1\n\nbool outOfRange(float a, float b, float p) {\n  return ((p \x3e max(a, b)) || \n          (p \x3c min(a, b)));\n}\n\nbool outOfRange(vec2 a, vec2 b, vec2 p) {\n  return (outOfRange(a.x, b.x, p.x) ||\n          outOfRange(a.y, b.y, p.y));\n}\n\nbool outOfRange(vec3 a, vec3 b, vec3 p) {\n  return (outOfRange(a.x, b.x, p.x) ||\n          outOfRange(a.y, b.y, p.y) ||\n          outOfRange(a.z, b.z, p.z));\n}\n\nbool outOfRange(vec4 a, vec4 b, vec4 p) {\n  return outOfRange(a.xyz, b.xyz, p.xyz);\n}\n\nattribute vec3 position;\nattribute vec4 color;\nattribute vec2 uv;\nattribute float pointSize;\n\nuniform mat4 model, view, projection;\nuniform vec3 clipBounds[2];\n\nvarying vec4 f_color;\nvarying vec2 f_uv;\n\nvoid main() {\n  if (outOfRange(clipBounds[0], clipBounds[1], position)) {\n\n    gl_Position \x3d vec4(0,0,0,0);\n  } else {\n    gl_Position \x3d projection * view * model * vec4(position, 1.0);\n  }\n  gl_PointSize \x3d pointSize;\n  f_color \x3d color;\n  f_uv \x3d uv;\n}"]),
n=p(["precision highp float;\n#define GLSLIFY 1\n\nuniform sampler2D texture;\nuniform float opacity;\n\nvarying vec4 f_color;\nvarying vec2 f_uv;\n\nvoid main() {\n  vec2 pointR \x3d gl_PointCoord.xy - vec2(0.5,0.5);\n  if(dot(pointR, pointR) \x3e 0.25) {\n    discard;\n  }\n  gl_FragColor \x3d f_color * texture2D(texture, f_uv) * opacity;\n}"]),b=p(["precision highp float;\n#define GLSLIFY 1\n\nattribute vec3 position;\nattribute vec4 id;\n\nuniform mat4 model, view, projection;\n\nvarying vec3 f_position;\nvarying vec4 f_id;\n\nvoid main() {\n  gl_Position \x3d projection * view * model * vec4(position, 1.0);\n  f_id        \x3d id;\n  f_position  \x3d position;\n}"]),
l=p(["precision highp float;\n#define GLSLIFY 1\n\nbool outOfRange(float a, float b, float p) {\n  return ((p \x3e max(a, b)) || \n          (p \x3c min(a, b)));\n}\n\nbool outOfRange(vec2 a, vec2 b, vec2 p) {\n  return (outOfRange(a.x, b.x, p.x) ||\n          outOfRange(a.y, b.y, p.y));\n}\n\nbool outOfRange(vec3 a, vec3 b, vec3 p) {\n  return (outOfRange(a.x, b.x, p.x) ||\n          outOfRange(a.y, b.y, p.y) ||\n          outOfRange(a.z, b.z, p.z));\n}\n\nbool outOfRange(vec4 a, vec4 b, vec4 p) {\n  return outOfRange(a.xyz, b.xyz, p.xyz);\n}\n\nuniform vec3  clipBounds[2];\nuniform float pickId;\n\nvarying vec3 f_position;\nvarying vec4 f_id;\n\nvoid main() {\n  if (outOfRange(clipBounds[0], clipBounds[1], f_position)) discard;\n\n  gl_FragColor \x3d vec4(pickId, f_id.xyz);\n}"]),
u=p(["precision highp float;\n#define GLSLIFY 1\n\nbool outOfRange(float a, float b, float p) {\n  return ((p \x3e max(a, b)) || \n          (p \x3c min(a, b)));\n}\n\nbool outOfRange(vec2 a, vec2 b, vec2 p) {\n  return (outOfRange(a.x, b.x, p.x) ||\n          outOfRange(a.y, b.y, p.y));\n}\n\nbool outOfRange(vec3 a, vec3 b, vec3 p) {\n  return (outOfRange(a.x, b.x, p.x) ||\n          outOfRange(a.y, b.y, p.y) ||\n          outOfRange(a.z, b.z, p.z));\n}\n\nbool outOfRange(vec4 a, vec4 b, vec4 p) {\n  return outOfRange(a.xyz, b.xyz, p.xyz);\n}\n\nattribute vec3  position;\nattribute float pointSize;\nattribute vec4  id;\n\nuniform mat4 model, view, projection;\nuniform vec3 clipBounds[2];\n\nvarying vec3 f_position;\nvarying vec4 f_id;\n\nvoid main() {\n  if (outOfRange(clipBounds[0], clipBounds[1], position)) {\n\n    gl_Position \x3d vec4(0,0,0,0);\n  } else {\n    gl_Position  \x3d projection * view * model * vec4(position, 1.0);\n    gl_PointSize \x3d pointSize;\n  }\n  f_id         \x3d id;\n  f_position   \x3d position;\n}"]),
q=p(["precision highp float;\n#define GLSLIFY 1\n\nattribute vec3 position;\n\nuniform mat4 model, view, projection;\n\nvoid main() {\n  gl_Position \x3d projection * view * model * vec4(position, 1.0);\n}"]);p=p(["precision highp float;\n#define GLSLIFY 1\n\nuniform vec3 contourColor;\n\nvoid main() {\n  gl_FragColor \x3d vec4(contourColor,1);\n}\n"]);m.meshShader={vertex:a,fragment:t,attributes:[{name:"position",type:"vec3"},{name:"normal",type:"vec3"},{name:"color",type:"vec4"},{name:"uv",type:"vec2"}]};
m.wireShader={vertex:g,fragment:h,attributes:[{name:"position",type:"vec3"},{name:"color",type:"vec4"},{name:"uv",type:"vec2"}]};m.pointShader={vertex:e,fragment:n,attributes:[{name:"position",type:"vec3"},{name:"color",type:"vec4"},{name:"uv",type:"vec2"},{name:"pointSize",type:"float"}]};m.pickShader={vertex:b,fragment:l,attributes:[{name:"position",type:"vec3"},{name:"id",type:"vec4"}]};m.pointPickShader={vertex:u,fragment:l,attributes:[{name:"position",type:"vec3"},{name:"pointSize",type:"float"},
{name:"id",type:"vec4"}]};m.contourShader={vertex:q,fragment:p,attributes:[{name:"position",type:"vec3"}]}},{glslify:401}],276:[function(a,t,m){function p(b,a,c,d,f,e,k,g,r,l,h,q,n,u,v,p,z,A,w,y,x,m,t,U,na,X,ha){this.gl=b;this.pixelRatio=1;this.cells=[];this.positions=[];this.intensity=[];this.texture=a;this.dirty=!0;this.triShader=c;this.lineShader=d;this.pointShader=f;this.pickShader=e;this.pointPickShader=k;this.contourShader=g;this.trianglePositions=r;this.triangleColors=h;this.triangleNormals=
n;this.triangleUVs=q;this.triangleIds=l;this.triangleVAO=u;this.triangleCount=0;this.lineWidth=1;this.edgePositions=v;this.edgeColors=z;this.edgeUVs=A;this.edgeIds=p;this.edgeVAO=w;this.edgeCount=0;this.pointPositions=y;this.pointColors=m;this.pointUVs=t;this.pointSizes=U;this.pointIds=x;this.pointVAO=na;this.pointCount=0;this.contourLineWidth=1;this.contourPositions=X;this.contourVAO=ha;this.contourCount=0;this.contourColor=[0,0,0];this.contourEnable=!0;this.pickId=1;this.bounds=[[Infinity,Infinity,
Infinity],[-Infinity,-Infinity,-Infinity]];this.clipBounds=[[-Infinity,-Infinity,-Infinity],[Infinity,Infinity,Infinity]];this.lightPosition=[1E5,1E5,0];this.diffuseLight=this.ambientLight=.8;this.specularLight=2;this.roughness=.5;this.fresnel=1.5;this.opacity=1;this._projection=this._view=this._model=F;this._resolution=[1,1]}function g(b){b=f({colormap:b,nshades:256,format:"rgba"});for(var a=new Uint8Array(1024),c=0;256>c;++c){for(var e=b[c],k=0;3>k;++k)a[4*c+k]=e[k];a[4*c+3]=255*e[3]}return d(a,
[256,256,4],[4,0,1])}var h=a("gl-shader"),e=a("gl-buffer"),n=a("gl-vao"),b=a("gl-texture2d"),l=a("normals"),u=a("gl-mat4/multiply"),q=a("gl-mat4/invert"),d=a("ndarray"),f=a("colormap"),c=a("simplicial-complex-contour"),k=a("typedarray-pool");m=a("./lib/shaders");var r=a("./lib/closest-point"),v=m.meshShader,z=m.wireShader,A=m.pointShader,y=m.pickShader,w=m.pointPickShader,x=m.contourShader,F=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1];a=p.prototype;a.isOpaque=function(){return 1<=this.opacity};a.isTransparent=
function(){return 1>this.opacity};a.pickSlots=1;a.setPickBase=function(b){this.pickId=b};a.highlight=function(b){if(b&&this.contourEnable){var a=c(this.cells,this.intensity,b.intensity);b=a.cells;var d=a.vertexIds;a=a.vertexWeights;for(var f=b.length,e=k.mallocFloat32(6*f),g=0,r=0;r<f;++r)for(var l=b[r],h=0;2>h;++h){var q=l[0];2===l.length&&(q=l[h]);var n=a[q],u=1-n,v=this.positions[d[q][0]];q=this.positions[d[q][1]];for(var p=0;3>p;++p)e[g++]=n*v[p]+u*q[p]}this.contourCount=g/3|0;this.contourPositions.update(e.subarray(0,
g));k.free(e)}else this.contourCount=0};a.update=function(a){a=a||{};var c=this.gl;this.dirty=!0;"contourEnable"in a&&(this.contourEnable=a.contourEnable);"contourColor"in a&&(this.contourColor=a.contourColor);"lineWidth"in a&&(this.lineWidth=a.lineWidth);"lightPosition"in a&&(this.lightPosition=a.lightPosition);"opacity"in a&&(this.opacity=a.opacity);"ambient"in a&&(this.ambientLight=a.ambient);"diffuse"in a&&(this.diffuseLight=a.diffuse);"specular"in a&&(this.specularLight=a.specular);"roughness"in
a&&(this.roughness=a.roughness);"fresnel"in a&&(this.fresnel=a.fresnel);a.texture?(this.texture.dispose(),this.texture=b(c,a.texture)):a.colormap&&(this.texture.shape=[256,256],this.texture.minFilter=c.LINEAR_MIPMAP_LINEAR,this.texture.magFilter=c.LINEAR,this.texture.setPixels(g(a.colormap)),this.texture.generateMipmap());c=a.cells;var d=a.positions;if(d&&c){var f=[],e=[],k=[],r=[],h=[],q=[],n=[],u=[],v=[],p=[],z=[],A=[],w=[],y=[];this.cells=c;this.positions=d;var x=a.vertexNormals,m=a.cellNormals,
B=void 0===a.vertexNormalsEpsilon?1E-6:a.vertexNormalsEpsilon,t=void 0===a.faceNormalsEpsilon?1E-6:a.faceNormalsEpsilon;a.useFacetNormals&&!m&&(m=l.faceNormals(c,d,t));m||x||(x=l.vertexNormals(c,d,B));B=a.vertexColors;t=a.cellColors;var F=a.meshColor||[1,1,1,1],ea=a.vertexUVs,U=a.vertexIntensity,na=a.cellUVs,X=a.cellIntensity,ha=Infinity,fa=-Infinity;if(!ea&&!na)if(U)if(a.vertexIntensityBounds)ha=+a.vertexIntensityBounds[0],fa=+a.vertexIntensityBounds[1];else for(var oa=0;oa<U.length;++oa){var ua=
U[oa];ha=Math.min(ha,ua);fa=Math.max(fa,ua)}else if(X)for(oa=0;oa<X.length;++oa)ua=X[oa],ha=Math.min(ha,ua),fa=Math.max(fa,ua);else for(oa=0;oa<d.length;++oa)ua=d[oa][2],ha=Math.min(ha,ua),fa=Math.max(fa,ua);if(U)this.intensity=U;else if(X){var Z=d.length;oa=Array(Z);for(ua=0;ua<Z;++ua)oa[ua]=0;Z=c.length;for(ua=0;ua<Z;++ua)for(var qa=c[ua],sa=0;sa<qa.length;++sa)oa[qa[sa]]=X[ua];this.intensity=oa}else{oa=d.length;ua=Array(oa);for(Z=0;Z<oa;++Z)ua[Z]=d[Z][2];this.intensity=ua}ua=a.pointSizes;a=a.pointSize||
1;this.bounds=[[Infinity,Infinity,Infinity],[-Infinity,-Infinity,-Infinity]];for(oa=0;oa<d.length;++oa){var V=d[oa];for(Z=0;3>Z;++Z)!isNaN(V[Z])&&isFinite(V[Z])&&(this.bounds[0][Z]=Math.min(this.bounds[0][Z],V[Z]),this.bounds[1][Z]=Math.max(this.bounds[1][Z],V[Z]))}var ia=sa=qa=0;oa=0;a:for(;oa<c.length;++oa){var Ka=c[oa];switch(Ka.length){case 1:var wa=Ka[0];V=d[wa];for(Z=0;3>Z;++Z)if(isNaN(V[Z])||!isFinite(V[Z]))continue a;p.push(V[0],V[1],V[2]);var Aa=B?B[wa]:t?t[oa]:F;3===Aa.length?z.push(Aa[0],
Aa[1],Aa[2],1):z.push(Aa[0],Aa[1],Aa[2],Aa[3]);V=ea?ea[wa]:U?[(U[wa]-ha)/(fa-ha),0]:na?na[oa]:X?[(X[oa]-ha)/(fa-ha),0]:[(V[2]-ha)/(fa-ha),0];A.push(V[0],V[1]);ua?w.push(ua[wa]):w.push(a);y.push(oa);ia+=1;break;case 2:for(Z=0;2>Z;++Z)for(wa=Ka[Z],V=d[wa],wa=0;3>wa;++wa)if(isNaN(V[wa])||!isFinite(V[wa]))continue a;for(Z=0;2>Z;++Z)wa=Ka[Z],V=d[wa],q.push(V[0],V[1],V[2]),Aa=B?B[wa]:t?t[oa]:F,3===Aa.length?n.push(Aa[0],Aa[1],Aa[2],1):n.push(Aa[0],Aa[1],Aa[2],Aa[3]),V=ea?ea[wa]:U?[(U[wa]-ha)/(fa-ha),0]:
na?na[oa]:X?[(X[oa]-ha)/(fa-ha),0]:[(V[2]-ha)/(fa-ha),0],u.push(V[0],V[1]),v.push(oa);sa+=1;break;case 3:for(Z=0;3>Z;++Z)for(wa=Ka[Z],V=d[wa],wa=0;3>wa;++wa)if(isNaN(V[wa])||!isFinite(V[wa]))continue a;for(Z=0;3>Z;++Z)wa=Ka[2-Z],V=d[wa],f.push(V[0],V[1],V[2]),Aa=B?B[wa]:t?t[oa]:F,3===Aa.length?e.push(Aa[0],Aa[1],Aa[2],1):e.push(Aa[0],Aa[1],Aa[2],Aa[3]),V=ea?ea[wa]:U?[(U[wa]-ha)/(fa-ha),0]:na?na[oa]:X?[(X[oa]-ha)/(fa-ha),0]:[(V[2]-ha)/(fa-ha),0],r.push(V[0],V[1]),V=x?x[wa]:m[oa],k.push(V[0],V[1],V[2]),
h.push(oa);qa+=1}}this.pointCount=ia;this.edgeCount=sa;this.triangleCount=qa;this.pointPositions.update(p);this.pointColors.update(z);this.pointUVs.update(A);this.pointSizes.update(w);this.pointIds.update(new Uint32Array(y));this.edgePositions.update(q);this.edgeColors.update(n);this.edgeUVs.update(u);this.edgeIds.update(new Uint32Array(v));this.trianglePositions.update(f);this.triangleColors.update(e);this.triangleUVs.update(r);this.triangleNormals.update(k);this.triangleIds.update(new Uint32Array(h))}};
a.drawTransparent=a.draw=function(b){b=b||{};var a=this.gl,c=b.model||F,d=b.view||F,f=b.projection||F,e=[[-1E6,-1E6,-1E6],[1E6,1E6,1E6]];for(b=0;3>b;++b)e[0][b]=Math.max(e[0][b],this.clipBounds[0][b]),e[1][b]=Math.min(e[1][b],this.clipBounds[1][b]);c={model:c,view:d,projection:f,inverseModel:F.slice(),clipBounds:e,kambient:this.ambientLight,kdiffuse:this.diffuseLight,kspecular:this.specularLight,roughness:this.roughness,fresnel:this.fresnel,eyePosition:[0,0,0],lightPosition:[0,0,0],opacity:this.opacity,
contourColor:this.contourColor,texture:0};c.inverseModel=q(c.inverseModel,c.model);a.disable(a.CULL_FACE);this.texture.bind(0);d=Array(16);u(d,c.view,c.model);u(d,c.projection,d);q(d,d);for(b=0;3>b;++b)c.eyePosition[b]=d[12+b]/d[15];f=d[15];for(b=0;3>b;++b)f+=this.lightPosition[b]*d[4*b+3];for(b=0;3>b;++b){e=d[12+b];for(var k=0;3>k;++k)e+=d[4*k+b]*this.lightPosition[k];c.lightPosition[b]=e/f}0<this.triangleCount&&(b=this.triShader,b.bind(),b.uniforms=c,this.triangleVAO.bind(),a.drawArrays(a.TRIANGLES,
0,3*this.triangleCount),this.triangleVAO.unbind());0<this.edgeCount&&0<this.lineWidth&&(b=this.lineShader,b.bind(),b.uniforms=c,this.edgeVAO.bind(),a.lineWidth(this.lineWidth*this.pixelRatio),a.drawArrays(a.LINES,0,2*this.edgeCount),this.edgeVAO.unbind());0<this.pointCount&&(b=this.pointShader,b.bind(),b.uniforms=c,this.pointVAO.bind(),a.drawArrays(a.POINTS,0,this.pointCount),this.pointVAO.unbind());this.contourEnable&&0<this.contourCount&&0<this.contourLineWidth&&(b=this.contourShader,b.bind(),b.uniforms=
c,this.contourVAO.bind(),a.drawArrays(a.LINES,0,this.contourCount),this.contourVAO.unbind())};a.drawPick=function(b){b=b||{};var a=this.gl,c=b.model||F,d=b.view||F;b=b.projection||F;for(var f=[[-1E6,-1E6,-1E6],[1E6,1E6,1E6]],e=0;3>e;++e)f[0][e]=Math.max(f[0][e],this.clipBounds[0][e]),f[1][e]=Math.min(f[1][e],this.clipBounds[1][e]);this._model=[].slice.call(c);this._view=[].slice.call(d);this._projection=[].slice.call(b);this._resolution=[a.drawingBufferWidth,a.drawingBufferHeight];c={model:c,view:d,
projection:b,clipBounds:f,pickId:this.pickId/255};d=this.pickShader;d.bind();d.uniforms=c;0<this.triangleCount&&(this.triangleVAO.bind(),a.drawArrays(a.TRIANGLES,0,3*this.triangleCount),this.triangleVAO.unbind());0<this.edgeCount&&(this.edgeVAO.bind(),a.lineWidth(this.lineWidth*this.pixelRatio),a.drawArrays(a.LINES,0,2*this.edgeCount),this.edgeVAO.unbind());0<this.pointCount&&(d=this.pointPickShader,d.bind(),d.uniforms=c,this.pointVAO.bind(),a.drawArrays(a.POINTS,0,this.pointCount),this.pointVAO.unbind())};
a.pick=function(b){if(!b||b.id!==this.pickId)return null;for(var a=b.value[0]+256*b.value[1]+65536*b.value[2],c=this.cells[a],d=this.positions,f=Array(c.length),e=0;e<c.length;++e)f[e]=d[c[e]];b=r(f,[b.coord[0],this._resolution[1]-b.coord[1]],this._model,this._view,this._projection,this._resolution);if(!b)return null;d=b[2];for(e=f=0;e<c.length;++e)f+=d[e]*this.intensity[c[e]];return{position:b[1],index:c[b[0]],cell:c,cellId:a,intensity:f,dataCoordinate:this.positions[c[b[0]]]}};a.dispose=function(){this.texture.dispose();
this.triShader.dispose();this.lineShader.dispose();this.pointShader.dispose();this.pickShader.dispose();this.pointPickShader.dispose();this.triangleVAO.dispose();this.trianglePositions.dispose();this.triangleColors.dispose();this.triangleUVs.dispose();this.triangleNormals.dispose();this.triangleIds.dispose();this.edgeVAO.dispose();this.edgePositions.dispose();this.edgeColors.dispose();this.edgeUVs.dispose();this.edgeIds.dispose();this.pointVAO.dispose();this.pointPositions.dispose();this.pointColors.dispose();
this.pointUVs.dispose();this.pointSizes.dispose();this.pointIds.dispose();this.contourVAO.dispose();this.contourPositions.dispose();this.contourShader.dispose()};t.exports=function(a,c){1===arguments.length&&(c=a,a=c.gl);if(!(a.getExtension("OES_standard_derivatives")||a.getExtension("MOZ_OES_standard_derivatives")||a.getExtension("WEBKIT_OES_standard_derivatives")))throw Error("derivatives not supported");var f=h(a,v.vertex,v.fragment);f.attributes.position.location=0;f.attributes.color.location=
2;f.attributes.uv.location=3;f.attributes.normal.location=4;var k=h(a,z.vertex,z.fragment);k.attributes.position.location=0;k.attributes.color.location=2;k.attributes.uv.location=3;var g=h(a,A.vertex,A.fragment);g.attributes.position.location=0;g.attributes.color.location=2;g.attributes.uv.location=3;g.attributes.pointSize.location=4;var r=h(a,y.vertex,y.fragment);r.attributes.position.location=0;r.attributes.id.location=1;var l=h(a,w.vertex,w.fragment);l.attributes.position.location=0;l.attributes.id.location=
1;l.attributes.pointSize.location=4;var q=h(a,x.vertex,x.fragment);q.attributes.position.location=0;var u=b(a,d(new Uint8Array([255,255,255,255]),[1,1,4]));u.generateMipmap();u.minFilter=a.LINEAR_MIPMAP_LINEAR;u.magFilter=a.LINEAR;var m=e(a),B=e(a),t=e(a),F=e(a),C=e(a),T=n(a,[{buffer:m,type:a.FLOAT,size:3},{buffer:C,type:a.UNSIGNED_BYTE,size:4,normalized:!0},{buffer:B,type:a.FLOAT,size:4},{buffer:t,type:a.FLOAT,size:2},{buffer:F,type:a.FLOAT,size:3}]),P=e(a),S=e(a),ba=e(a),da=e(a),ca=n(a,[{buffer:P,
type:a.FLOAT,size:3},{buffer:da,type:a.UNSIGNED_BYTE,size:4,normalized:!0},{buffer:S,type:a.FLOAT,size:4},{buffer:ba,type:a.FLOAT,size:2}]),Y=e(a),W=e(a),ea=e(a),U=e(a),na=e(a),X=n(a,[{buffer:Y,type:a.FLOAT,size:3},{buffer:na,type:a.UNSIGNED_BYTE,size:4,normalized:!0},{buffer:W,type:a.FLOAT,size:4},{buffer:ea,type:a.FLOAT,size:2},{buffer:U,type:a.FLOAT,size:1}]),ha=e(a),fa=n(a,[{buffer:ha,type:a.FLOAT,size:3}]);f=new p(a,u,f,k,g,r,l,q,m,C,B,t,F,T,P,da,S,ba,ca,Y,na,W,ea,U,X,ha,fa);f.update(c);return f}},
{"./lib/closest-point":274,"./lib/shaders":275,colormap:116,"gl-buffer":237,"gl-mat4/invert":261,"gl-mat4/multiply":263,"gl-shader":297,"gl-texture2d":314,"gl-vao":319,ndarray:442,normals:445,"simplicial-complex-contour":502,"typedarray-pool":529}],277:[function(a,t,m){function p(a,b,e){this.plot=a;this.vbo=b;this.shader=e}t.exports=function(a){var b=a.gl,l=g(b,[0,0,0,1,1,0,1,1]);b=h(b,e.boxVert,e.lineFrag);return new p(a,l,b)};var g=a("gl-buffer"),h=a("gl-shader"),e=a("./shaders");a=p.prototype;
a.bind=function(){var a=this.shader;this.vbo.bind();this.shader.bind();a.attributes.coord.pointer();a.uniforms.screenBox=this.plot.screenBox};a.drawBox=function(){var a=[0,0],b=[0,0];return function(e,g,h,d,f){var c=this.shader,k=this.plot.gl;a[0]=e;a[1]=g;b[0]=h;b[1]=d;c.uniforms.lo=a;c.uniforms.hi=b;c.uniforms.color=f;k.drawArrays(k.TRIANGLE_STRIP,0,4)}}();a.dispose=function(){this.vbo.dispose();this.shader.dispose()}},{"./shaders":280,"gl-buffer":237,"gl-shader":297}],278:[function(a,t,m){function p(b,
a,e,d){this.plot=b;this.vbo=a;this.shader=e;this.tickShader=d;this.ticks=[[],[]]}function g(b,a){return b-a}t.exports=function(a){var g=a.gl,l=h(g),d=e(g,b.gridVert,b.gridFrag);g=e(g,b.tickVert,b.gridFrag);return new p(a,l,d,g)};var h=a("gl-buffer"),e=a("gl-shader"),n=a("binary-search-bounds"),b=a("./shaders");a=p.prototype;a.draw=function(){var b=[0,0],a=[0,0],e=[0,0];return function(){var d=this.plot,f=this.vbo,c=this.shader,k=this.ticks,g=d.gl,l=d._tickBounds,h=d.dataBox,q=d.viewBox,n=d.gridLineWidth,
u=d.gridLineColor,p=d.gridLineEnable;d=d.pixelRatio;for(var m=0;2>m;++m){var B=l[m],t=.5*(h[m+2]+h[m]),D=h[m+2]-h[m];a[m]=2*(l[m+2]-B)/D;b[m]=2*(B-t)/D}c.bind();f.bind();c.attributes.dataCoord.pointer();c.uniforms.dataShift=b;c.uniforms.dataScale=a;for(m=f=0;2>m;++m)e[0]=e[1]=0,e[m]=1,c.uniforms.dataAxis=e,c.uniforms.lineWidth=n[m]/(q[m+2]-q[m])*d,c.uniforms.color=u[m],l=6*k[m].length,p[m]&&l&&g.drawArrays(g.TRIANGLES,f,l),f+=l}}();a.drawTickMarks=function(){var b=[0,0],a=[0,0],e=[1,0],d=[0,1],f=
[0,0],c=[0,0];return function(){var k=this.plot,r=this.vbo,l=this.tickShader,h=this.ticks,q=k.gl,u=k._tickBounds,p=k.dataBox,x=k.viewBox,m=k.pixelRatio,B=k.screenBox,t=B[2]-B[0];B=B[3]-B[1];for(var D=x[2]-x[0],G=x[3]-x[1],H=0;2>H;++H){var E=u[H],K=.5*(p[H+2]+p[H]),I=p[H+2]-p[H];a[H]=2*(u[H+2]-E)/I;b[H]=2*(E-K)/I}a[0]*=D/t;b[0]*=D/t;a[1]*=G/B;b[1]*=G/B;l.bind();r.bind();l.attributes.dataCoord.pointer();r=l.uniforms;r.dataShift=b;r.dataScale=a;l=k.tickMarkLength;D=k.tickMarkWidth;k=k.tickMarkColor;
H=6*h[0].length;E=Math.min(n.ge(h[0],(p[0]-u[0])/(u[2]-u[0]),g),h[0].length);K=Math.min(n.gt(h[0],(p[2]-u[0])/(u[2]-u[0]),g),h[0].length);G=6*E;E=6*Math.max(0,K-E);K=Math.min(n.ge(h[1],(p[1]-u[1])/(u[3]-u[1]),g),h[1].length);h=Math.min(n.gt(h[1],(p[3]-u[1])/(u[3]-u[1]),g),h[1].length);u=H+6*K;h=6*Math.max(0,h-K);f[0]=2*(x[0]-l[1])/t-1;f[1]=(x[3]+x[1])/B-1;c[0]=l[1]*m/t;c[1]=D[1]*m/B;h&&(r.color=k[1],r.tickScale=c,r.dataAxis=d,r.screenOffset=f,q.drawArrays(q.TRIANGLES,u,h));f[0]=(x[2]+x[0])/t-1;f[1]=
2*(x[1]-l[0])/B-1;c[0]=D[0]*m/t;c[1]=l[0]*m/B;E&&(r.color=k[0],r.tickScale=c,r.dataAxis=e,r.screenOffset=f,q.drawArrays(q.TRIANGLES,G,E));f[0]=2*(x[2]+l[3])/t-1;f[1]=(x[3]+x[1])/B-1;c[0]=l[3]*m/t;c[1]=D[3]*m/B;h&&(r.color=k[3],r.tickScale=c,r.dataAxis=d,r.screenOffset=f,q.drawArrays(q.TRIANGLES,u,h));f[0]=(x[2]+x[0])/t-1;f[1]=2*(x[3]+l[2])/B-1;c[0]=D[2]*m/t;c[1]=l[2]*m/B;E&&(r.color=k[2],r.tickScale=c,r.dataAxis=e,r.screenOffset=f,q.drawArrays(q.TRIANGLES,G,E))}}();a.update=function(){var b=[1,1,
-1,-1,1,-1],a=[1,-1,1,1,-1,-1];return function(e){var d=e.ticks;e=e.bounds;for(var f=new Float32Array(18*(d[0].length+d[1].length)),c=0,k=[[],[]],g=0;2>g;++g)for(var l=k[g],h=d[g],q=e[g],n=e[g+2],u=0;u<h.length;++u){var p=(h[u].x-q)/(n-q);l.push(p);for(var m=0;6>m;++m)f[c++]=p,f[c++]=b[m],f[c++]=a[m]}this.ticks=k;this.vbo.update(f)}}();a.dispose=function(){this.vbo.dispose();this.shader.dispose();this.tickShader.dispose()}},{"./shaders":280,"binary-search-bounds":282,"gl-buffer":237,"gl-shader":297}],
279:[function(a,t,m){function p(a,b,e){this.plot=a;this.vbo=b;this.shader=e}t.exports=function(a){var b=a.gl,l=g(b,[-1,-1,-1,1,1,-1,1,1]);b=h(b,e.lineVert,e.lineFrag);return new p(a,l,b)};var g=a("gl-buffer"),h=a("gl-shader"),e=a("./shaders");a=p.prototype;a.bind=function(){var a=this.shader;this.vbo.bind();this.shader.bind();a.attributes.coord.pointer();a.uniforms.screenBox=this.plot.screenBox};a.drawLine=function(){var a=[0,0],b=[0,0];return function(e,g,h,d,f,c){var k=this.plot,r=this.shader,l=
k.gl;a[0]=e;a[1]=g;b[0]=h;b[1]=d;r.uniforms.start=a;r.uniforms.end=b;r.uniforms.width=f*k.pixelRatio;r.uniforms.color=c;l.drawArrays(l.TRIANGLE_STRIP,0,4)}}();a.dispose=function(){this.vbo.dispose();this.shader.dispose()}},{"./shaders":280,"gl-buffer":237,"gl-shader":297}],280:[function(a,t,m){a=a("glslify");m=a(["precision lowp float;\n#define GLSLIFY 1\nuniform vec4 color;\nvoid main() {\n  gl_FragColor \x3d vec4(color.xyz * color.w, color.w);\n}\n"]);t.exports={lineVert:a(["precision mediump float;\n#define GLSLIFY 1\n\nattribute vec2 coord;\n\nuniform vec4 screenBox;\nuniform vec2 start, end;\nuniform float width;\n\nvec2 perp(vec2 v) {\n  return vec2(v.y, -v.x);\n}\n\nvec2 screen(vec2 v) {\n  return 2.0 * (v - screenBox.xy) / (screenBox.zw - screenBox.xy) - 1.0;\n}\n\nvoid main() {\n  vec2 delta \x3d normalize(perp(start - end));\n  vec2 offset \x3d mix(start, end, 0.5 * (coord.y+1.0));\n  gl_Position \x3d vec4(screen(offset + 0.5 * width * delta * coord.x), 0, 1);\n}\n"]),
lineFrag:m,textVert:a(["#define GLSLIFY 1\nattribute vec3 textCoordinate;\n\nuniform vec2 dataScale, dataShift, dataAxis, screenOffset, textScale;\nuniform float angle;\n\nvoid main() {\n  float dataOffset  \x3d textCoordinate.z;\n  vec2 glyphOffset  \x3d textCoordinate.xy;\n  mat2 glyphMatrix \x3d mat2(cos(angle), sin(angle), -sin(angle), cos(angle));\n  vec2 screenCoordinate \x3d dataAxis * (dataScale * dataOffset + dataShift) +\n    glyphMatrix * glyphOffset * textScale + screenOffset;\n  gl_Position \x3d vec4(screenCoordinate, 0, 1);\n}\n"]),
textFrag:m,gridVert:a(["precision mediump float;\n#define GLSLIFY 1\n\nattribute vec3 dataCoord;\n\nuniform vec2 dataAxis, dataShift, dataScale;\nuniform float lineWidth;\n\nvoid main() {\n  vec2 pos \x3d dataAxis * (dataScale * dataCoord.x + dataShift);\n  pos +\x3d 10.0 * dataCoord.y * vec2(dataAxis.y, -dataAxis.x) + dataCoord.z * lineWidth;\n  gl_Position \x3d vec4(pos, 0, 1);\n}\n"]),gridFrag:m,boxVert:a(["precision mediump float;\n#define GLSLIFY 1\n\nattribute vec2 coord;\n\nuniform vec4 screenBox;\nuniform vec2 lo, hi;\n\nvec2 screen(vec2 v) {\n  return 2.0 * (v - screenBox.xy) / (screenBox.zw - screenBox.xy) - 1.0;\n}\n\nvoid main() {\n  gl_Position \x3d vec4(screen(mix(lo, hi, coord)), 0, 1);\n}\n"]),
tickVert:a(["precision mediump float;\n#define GLSLIFY 1\n\nattribute vec3 dataCoord;\n\nuniform vec2 dataAxis, dataShift, dataScale, screenOffset, tickScale;\n\nvoid main() {\n  vec2 pos \x3d dataAxis * (dataScale * dataCoord.x + dataShift);\n  gl_Position \x3d vec4(pos + tickScale*dataCoord.yz + screenOffset, 0, 1);\n}\n"])}},{glslify:401}],281:[function(a,t,m){function p(b,a,e){this.plot=b;this.vbo=a;this.shader=e;this.tickOffset=[[],[]];this.tickX=[[],[]];this.labelOffset=[0,0];this.labelCount=
[0,0]}t.exports=function(a){var e=a.gl,l=g(e);e=h(e,b.textVert,b.textFrag);return new p(a,l,e)};var g=a("gl-buffer"),h=a("gl-shader"),e=a("text-cache"),n=a("binary-search-bounds"),b=a("./shaders");a=p.prototype;a.drawTicks=function(){var b=[0,0],a=[0,0],e=[0,0];return function(d){var f=this.plot,c=this.shader,k=this.tickX[d],g=this.tickOffset[d],l=f.gl,h=f.viewBox,q=f.dataBox,u=f.screenBox,p=f.pixelRatio,x=f.tickEnable,m=f.tickPad,B=f.tickColor,t=f.tickAngle,D=f.labelEnable,G=f.labelPad,H=f.labelColor;
f=f.labelAngle;var E=this.labelOffset[d],K=this.labelCount[d],I=n.lt(k,q[d]);k=n.le(k,q[d+2]);b[0]=b[1]=0;b[d]=1;a[d]=(h[2+d]+h[d])/(u[2+d]-u[d])-1;u=2/u[2+(d^1)]-u[d^1];a[d^1]=u*h[d^1]-1;x[d]&&(a[d^1]-=u*p*m[d],I<k&&g[k]>g[I]&&(c.uniforms.dataAxis=b,c.uniforms.screenOffset=a,c.uniforms.color=B[d],c.uniforms.angle=t[d],l.drawArrays(l.TRIANGLES,g[I],g[k]-g[I])));D[d]&&K&&(a[d^1]-=u*p*G[d],c.uniforms.dataAxis=e,c.uniforms.screenOffset=a,c.uniforms.color=H[d],c.uniforms.angle=f[d],l.drawArrays(l.TRIANGLES,
E,K));a[d^1]=u*h[2+(d^1)]-1;x[d+2]&&(a[d^1]+=u*p*m[d+2],I<k&&g[k]>g[I]&&(c.uniforms.dataAxis=b,c.uniforms.screenOffset=a,c.uniforms.color=B[d+2],c.uniforms.angle=t[d+2],l.drawArrays(l.TRIANGLES,g[I],g[k]-g[I])));D[d+2]&&K&&(a[d^1]+=u*p*G[d+2],c.uniforms.dataAxis=e,c.uniforms.screenOffset=a,c.uniforms.color=H[d+2],c.uniforms.angle=f[d+2],l.drawArrays(l.TRIANGLES,E,K))}}();a.drawTitle=function(){var b=[0,0],a=[0,0];return function(){var e=this.plot,d=this.shader,f=e.gl,c=e.screenBox,k=e.titleCenter,
g=e.titleAngle,l=e.titleColor;e=e.pixelRatio;if(this.titleCount){for(var h=0;2>h;++h)a[h]=2*(k[h]*e-c[h])/(c[2+h]-c[h])-1;d.bind();d.uniforms.dataAxis=b;d.uniforms.screenOffset=a;d.uniforms.angle=g;d.uniforms.color=l;f.drawArrays(f.TRIANGLES,this.titleOffset,this.titleCount)}}}();a.bind=function(){var b=[0,0],a=[0,0],e=[0,0];return function(){var d=this.plot,f=this.shader,c=d._tickBounds,k=d.dataBox,g=d.screenBox,l=d.viewBox;f.bind();for(var h=0;2>h;++h){var q=c[h],n=.5*(k[h+2]+k[h]),u=k[h+2]-k[h],
p=l[h+2]-l[h],m=g[h+2]-g[h];a[h]=2*(c[h+2]-q)/u*p/m;b[h]=2*(q-n)/u*p/m}e[1]=2*d.pixelRatio/(g[3]-g[1]);e[0]=e[1]*(g[3]-g[1])/(g[2]-g[0]);f.uniforms.dataScale=a;f.uniforms.dataShift=b;f.uniforms.textScale=e;this.vbo.bind();f.attributes.textCoordinate.pointer()}}();a.update=function(b){var a=[],g=b.ticks,d=b.bounds,f,c;for(c=0;2>c;++c){var k=[Math.floor(a.length/3)],r=[-Infinity],l=g[c];for(f=0;f<l.length;++f){var h=l[f];var n=h.x;var p=h.text;var w=h.font||"sans-serif";h=h.fontSize||12;for(var x=1/
(d[c+2]-d[c]),m=d[c],B=p.split("\n"),t=0;t<B.length;t++){var D=e(w,B[t]).data;for(p=0;p<D.length;p+=2)a.push(D[p]*h,-D[p+1]*h-t*h*1.2,(n-m)*x)}k.push(Math.floor(a.length/3));r.push(n)}this.tickOffset[c]=k;this.tickX[c]=r}for(c=0;2>c;++c){this.labelOffset[c]=Math.floor(a.length/3);D=e(b.labelFont[c],b.labels[c],{textAlign:"center"}).data;h=b.labelSize[c];for(f=0;f<D.length;f+=2)a.push(D[f]*h,-D[f+1]*h,0);this.labelCount[c]=Math.floor(a.length/3)-this.labelOffset[c]}this.titleOffset=Math.floor(a.length/
3);D=e(b.titleFont,b.title).data;h=b.titleSize;for(f=0;f<D.length;f+=2)a.push(D[f]*h,-D[f+1]*h,0);this.titleCount=Math.floor(a.length/3)-this.titleOffset;this.vbo.update(a)};a.dispose=function(){this.vbo.dispose();this.shader.dispose()}},{"./shaders":280,"binary-search-bounds":282,"gl-buffer":237,"gl-shader":297,"text-cache":520}],282:[function(a,t,m){arguments[4][101][0].apply(m,arguments)},{dup:101}],283:[function(a,t,m){function p(b,a){this.gl=b;this.pickBuffer=a;this.screenBox=[0,0,b.drawingBufferWidth,
b.drawingBufferHeight];this.viewBox=[0,0,0,0];this.dataBox=[-10,-10,10,10];this.gridLineEnable=[!0,!0];this.gridLineWidth=[1,1];this.gridLineColor=[[0,0,0,1],[0,0,0,1]];this.pixelRatio=1;this.tickMarkLength=[0,0,0,0];this.tickMarkWidth=[0,0,0,0];this.tickMarkColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1],[0,0,0,1]];this.tickPad=[15,15,15,15];this.tickAngle=[0,0,0,0];this.tickEnable=[!0,!0,!0,!0];this.tickColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1],[0,0,0,1]];this.labelPad=[15,15,15,15];this.labelAngle=[0,Math.PI/
2,0,3*Math.PI/2];this.labelEnable=[!0,!0,!0,!0];this.labelColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1],[0,0,0,1]];this.titleCenter=[0,0];this.titleEnable=!0;this.titleAngle=0;this.titleColor=[0,0,0,1];this.borderColor=[0,0,0,0];this.backgroundColor=[0,0,0,0];this.zeroLineEnable=[!0,!0];this.zeroLineWidth=[4,4];this.zeroLineColor=[[0,0,0,1],[0,0,0,1]];this.borderLineEnable=[!0,!0,!0,!0];this.borderLineWidth=[2,2,2,2];this.borderLineColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1],[0,0,0,1]];this.box=this.line=this.text=
this.grid=null;this.objects=[];this.overlays=[];this._tickBounds=[Infinity,Infinity,-Infinity,-Infinity];this.pickDirty=this.dirty=this.static=!1;this.pickDelay=120;this.pickRadius=10;this._pickTimeout=null;this._drawPick=this.drawPick.bind(this);this._depthCounter=0}function g(b){b=b.slice();for(var a=0;a<b.length;++a)b[a]=b[a].slice();return b}function h(b,a){return b.x-a.x}t.exports=function(a){var d=a.gl,f=e(d,[d.drawingBufferWidth,d.drawingBufferHeight]);d=new p(d,f);d.grid=n(d);d.text=b(d);
d.line=l(d);d.box=u(d);d.update(a);return d};var e=a("gl-select-static"),n=a("./lib/grid"),b=a("./lib/text"),l=a("./lib/line"),u=a("./lib/box");a=p.prototype;a.setDirty=function(){this.dirty=this.pickDirty=!0};a.setOverlayDirty=function(){this.dirty=!0};a.nextDepthValue=function(){return this._depthCounter++/65536};a.draw=function(){return function(){var b=this.gl,a=this.screenBox,f=this.viewBox,c=this.dataBox,e=this.pixelRatio,g=this.grid,l=this.line,h=this.text,n=this.objects;this._depthCounter=
0;this.pickDirty&&(this._pickTimeout&&clearTimeout(this._pickTimeout),this.pickDirty=!1,this._pickTimeout=setTimeout(this._drawPick,this.pickDelay));if(this.dirty){this.dirty=!1;b.bindFramebuffer(b.FRAMEBUFFER,null);b.enable(b.SCISSOR_TEST);b.disable(b.DEPTH_TEST);b.depthFunc(b.LESS);b.depthMask(!1);b.enable(b.BLEND);b.blendEquation(b.FUNC_ADD,b.FUNC_ADD);b.blendFunc(b.ONE,b.ONE_MINUS_SRC_ALPHA);if(this.borderColor){b.scissor(a[0],a[1],a[2]-a[0],a[3]-a[1]);var u=this.borderColor;b.clearColor(u[0]*
u[3],u[1]*u[3],u[2]*u[3],u[3]);b.clear(b.COLOR_BUFFER_BIT|b.DEPTH_BUFFER_BIT)}b.scissor(f[0],f[1],f[2]-f[0],f[3]-f[1]);b.viewport(f[0],f[1],f[2]-f[0],f[3]-f[1]);u=this.backgroundColor;b.clearColor(u[0]*u[3],u[1]*u[3],u[2]*u[3],u[3]);b.clear(b.COLOR_BUFFER_BIT);g.draw();u=this.zeroLineEnable;var p=this.zeroLineColor,x=this.zeroLineWidth;if(u[0]||u[1])for(l.bind(),g=0;2>g;++g)if(u[g]&&0>=c[g]&&0<=c[g+2]){var m=a[g]-c[g]*(a[g+2]-a[g])/(c[g+2]-c[g]);0===g?l.drawLine(m,a[1],m,a[3],x[g],p[g]):l.drawLine(a[0],
m,a[2],m,x[g],p[g])}for(g=0;g<n.length;++g)n[g].draw();b.viewport(a[0],a[1],a[2]-a[0],a[3]-a[1]);b.scissor(a[0],a[1],a[2]-a[0],a[3]-a[1]);this.grid.drawTickMarks();l.bind();a=this.borderLineEnable;c=this.borderLineWidth;n=this.borderLineColor;a[1]&&l.drawLine(f[0],f[1]-.5*c[1]*e,f[0],f[3]+.5*c[3]*e,c[1],n[1]);a[0]&&l.drawLine(f[0]-.5*c[0]*e,f[1],f[2]+.5*c[2]*e,f[1],c[0],n[0]);a[3]&&l.drawLine(f[2],f[1]-.5*c[1]*e,f[2],f[3]+.5*c[3]*e,c[3],n[3]);a[2]&&l.drawLine(f[0]-.5*c[0]*e,f[3],f[2]+.5*c[2]*e,f[3],
c[2],n[2]);h.bind();for(g=0;2>g;++g)h.drawTicks(g);this.titleEnable&&h.drawTitle();f=this.overlays;for(g=0;g<f.length;++g)f[g].draw();b.disable(b.SCISSOR_TEST);b.disable(b.BLEND);b.depthMask(!0)}}}();a.drawPick=function(){return function(){if(!this.static){var b=this.pickBuffer;this._pickTimeout=null;b.begin();for(var a=1,f=this.objects,c=0;c<f.length;++c)a=f[c].drawPick(a);b.end()}}}();a.pick=function(){return function(b,a){if(!this.static){var d=this.pixelRatio,c=this.pickPixelRatio,e=this.viewBox;
b=Math.round((b-e[0]/d)*c)|0;a=Math.round((a-e[1]/d)*c)|0;d=this.pickBuffer.query(b,a,this.pickRadius);if(!d)return null;d=d.id+(d.value[0]<<8)+(d.value[1]<<16)+(d.value[2]<<24);c=this.objects;for(e=0;e<c.length;++e){var g=c[e].pick(b,a,d);if(g)return g}return null}}}();a.setScreenBox=function(b){var a=this.screenBox,f=this.pixelRatio;a[0]=Math.round(b[0]*f)|0;a[1]=Math.round(b[1]*f)|0;a[2]=Math.round(b[2]*f)|0;a[3]=Math.round(b[3]*f)|0;this.setDirty()};a.setDataBox=function(b){var a=this.dataBox;
if(a[0]!==b[0]||a[1]!==b[1]||a[2]!==b[2]||a[3]!==b[3])a[0]=b[0],a[1]=b[1],a[2]=b[2],a[3]=b[3],this.setDirty()};a.setViewBox=function(b){var a=this.pixelRatio,f=this.viewBox;f[0]=Math.round(b[0]*a)|0;f[1]=Math.round(b[1]*a)|0;f[2]=Math.round(b[2]*a)|0;f[3]=Math.round(b[3]*a)|0;a=this.pickPixelRatio;this.pickBuffer.shape=[Math.round((b[2]-b[0])*a)|0,Math.round((b[3]-b[1])*a)|0];this.setDirty()};a.update=function(b){b=b||{};var a=this.gl,f=this.pixelRatio=b.pixelRatio||1;this.pickPixelRatio=Math.max(f,
1);this.setScreenBox(b.screenBox||[0,0,a.drawingBufferWidth/f,a.drawingBufferHeight/f]);this.setViewBox(b.viewBox||[.125*(this.screenBox[2]-this.screenBox[0])/f,.125*(this.screenBox[3]-this.screenBox[1])/f,.875*(this.screenBox[2]-this.screenBox[0])/f,.875*(this.screenBox[3]-this.screenBox[1])/f]);a=this.viewBox;var c=(a[2]-a[0])/(a[3]-a[1]);this.setDataBox(b.dataBox||[-10,-10/c,10,10/c]);this.borderColor=!1!==b.borderColor?(b.borderColor||[0,0,0,0]).slice():!1;this.backgroundColor=(b.backgroundColor||
[0,0,0,0]).slice();this.gridLineEnable=(b.gridLineEnable||[!0,!0]).slice();this.gridLineWidth=(b.gridLineWidth||[1,1]).slice();this.gridLineColor=g(b.gridLineColor||[[.5,.5,.5,1],[.5,.5,.5,1]]);this.zeroLineEnable=(b.zeroLineEnable||[!0,!0]).slice();this.zeroLineWidth=(b.zeroLineWidth||[4,4]).slice();this.zeroLineColor=g(b.zeroLineColor||[[0,0,0,1],[0,0,0,1]]);this.tickMarkLength=(b.tickMarkLength||[0,0,0,0]).slice();this.tickMarkWidth=(b.tickMarkWidth||[0,0,0,0]).slice();this.tickMarkColor=g(b.tickMarkColor||
[[0,0,0,1],[0,0,0,1],[0,0,0,1],[0,0,0,1]]);this.titleCenter=(b.titleCenter||[.5*(a[0]+a[2])/f,(a[3]+120)/f]).slice();this.titleEnable=!("titleEnable"in b)||!!b.titleEnable;this.titleAngle=b.titleAngle||0;this.titleColor=(b.titleColor||[0,0,0,1]).slice();this.labelPad=(b.labelPad||[15,15,15,15]).slice();this.labelAngle=(b.labelAngle||[0,Math.PI/2,0,3*Math.PI/2]).slice();this.labelEnable=(b.labelEnable||[!0,!0,!0,!0]).slice();this.labelColor=g(b.labelColor||[[0,0,0,1],[0,0,0,1],[0,0,0,1],[0,0,0,1]]);
this.tickPad=(b.tickPad||[15,15,15,15]).slice();this.tickAngle=(b.tickAngle||[0,0,0,0]).slice();this.tickEnable=(b.tickEnable||[!0,!0,!0,!0]).slice();this.tickColor=g(b.tickColor||[[0,0,0,1],[0,0,0,1],[0,0,0,1],[0,0,0,1]]);this.borderLineEnable=(b.borderLineEnable||[!0,!0,!0,!0]).slice();this.borderLineWidth=(b.borderLineWidth||[2,2,2,2]).slice();this.borderLineColor=g(b.borderLineColor||[[0,0,0,1],[0,0,0,1],[0,0,0,1],[0,0,0,1]]);f=b.ticks||[[],[]];a=this._tickBounds;a[0]=a[1]=Infinity;a[2]=a[3]=
-Infinity;for(c=0;2>c;++c){var e=f[c].slice(0);0!==e.length&&(e.sort(h),a[c]=Math.min(a[c],e[0].x),a[c+2]=Math.max(a[c+2],e[e.length-1].x))}this.grid.update({bounds:a,ticks:f});this.text.update({bounds:a,ticks:f,labels:b.labels||["x","y"],labelSize:b.labelSize||[12,12],labelFont:b.labelFont||["sans-serif","sans-serif"],title:b.title||"",titleSize:b.titleSize||18,titleFont:b.titleFont||"sans-serif"});this.static=!!b.static;this.setDirty()};a.dispose=function(){this.box.dispose();this.grid.dispose();
this.text.dispose();this.line.dispose();for(var b=this.objects.length-1;0<=b;--b)this.objects[b].dispose();this.objects.length=0;for(b=this.overlays.length-1;0<=b;--b)this.overlays[b].dispose();this.overlays.length=0;this.gl=null};a.addObject=function(b){0>this.objects.indexOf(b)&&(this.objects.push(b),this.setDirty())};a.removeObject=function(b){for(var a=this.objects,f=0;f<a.length;++f)if(a[f]===b){a.splice(f,1);this.setDirty();break}};a.addOverlay=function(b){0>this.overlays.indexOf(b)&&(this.overlays.push(b),
this.setOverlayDirty())};a.removeOverlay=function(b){for(var a=this.overlays,f=0;f<a.length;++f)if(a[f]===b){a.splice(f,1);this.setOverlayDirty();break}}},{"./lib/box":277,"./lib/grid":278,"./lib/line":279,"./lib/text":281,"gl-select-static":296}],284:[function(a,t,m){t.exports=function(a,u){a=a||document.body;u=u||{};var l=[.01,Infinity];"distanceLimits"in u&&(l[0]=u.distanceLimits[0],l[1]=u.distanceLimits[1]);"zoomMin"in u&&(l[0]=u.zoomMin);"zoomMax"in u&&(l[1]=u.zoomMax);var d=g({center:u.center||
[0,0,0],up:u.up||[0,1,0],eye:u.eye||[0,0,10],mode:u.mode||"orbit",distanceLimits:l}),f=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],c=0,k=a.clientWidth,r=a.clientHeight,v={keyBindingMode:"rotate",enableWheel:!0,view:d,element:a,delay:u.delay||16,rotateSpeed:u.rotateSpeed||1,zoomSpeed:u.zoomSpeed||1,translateSpeed:u.translateSpeed||1,flipX:!!u.flipX,flipY:!!u.flipY,modes:d.modes,_ortho:u._ortho||u.projection&&"orthographic"===u.projection.type||!1,tick:function(){var b=p(),e=this.delay,g=b-2*e;d.idle(b-e);d.recalcMatrix(g);
d.flush(b-(100+2*e));b=!0;e=d.computedMatrix;for(g=0;16>g;++g)b=b&&f[g]===e[g],f[g]=e[g];e=a.clientWidth===k&&a.clientHeight===r;k=a.clientWidth;r=a.clientHeight;if(b)return!e;c=Math.exp(d.computedRadius[0]);return!0},lookAt:function(b,a,c){d.lookAt(d.lastT(),b,a,c)},rotate:function(b,a,c){d.rotate(d.lastT(),b,a,c)},pan:function(b,a,c){d.pan(d.lastT(),b,a,c)},translate:function(b,a,c){d.translate(d.lastT(),b,a,c)}};Object.defineProperties(v,{matrix:{get:function(){return d.computedMatrix},set:function(b){d.setMatrix(d.lastT(),
b);return d.computedMatrix},enumerable:!0},mode:{get:function(){return d.getMode()},set:function(b){var a=d.computedUp.slice(),c=d.computedEye.slice(),f=d.computedCenter.slice();d.setMode(b);"turntable"===b&&(b=p(),d._active.lookAt(b,c,f,a),d._active.lookAt(b+500,c,f,[0,0,1]),d._active.flush(b));return d.getMode()},enumerable:!0},center:{get:function(){return d.computedCenter},set:function(b){d.lookAt(d.lastT(),null,b);return d.computedCenter},enumerable:!0},eye:{get:function(){return d.computedEye},
set:function(b){d.lookAt(d.lastT(),b);return d.computedEye},enumerable:!0},up:{get:function(){return d.computedUp},set:function(b){d.lookAt(d.lastT(),null,null,b);return d.computedUp},enumerable:!0},distance:{get:function(){return c},set:function(b){d.setDistance(d.lastT(),b);return b},enumerable:!0},distanceLimits:{get:function(){return d.getDistanceLimits(l)},set:function(b){d.setDistanceLimits(b);return b},enumerable:!0}});a.addEventListener("contextmenu",function(b){b.preventDefault();return!1});
v._lastX=-1;v._lastY=-1;v._lastMods={shift:!1,control:!1,alt:!1,meta:!1};v.enableMouseListeners=function(){function f(b,f,e,k){var g=v.keyBindingMode;if(!1!==g){var r="rotate"===g,l="pan"===g;g="zoom"===g;var h=!!k.control,q=!!k.alt,n=!!k.shift,u=!!(b&1),z=!!(b&2);b=!!(b&4);var A=1/a.clientHeight,w=A*(f-v._lastX),x=A*(e-v._lastY),y=v.flipX?1:-1,m=v.flipY?1:-1,t=Math.PI*v.rotateSpeed;A=p();-1!==v._lastX&&-1!==v._lastY&&((r&&u&&!h&&!q&&!n||u&&!h&&!q&&n)&&d.rotate(A,y*t*w,-m*t*x,0),(l&&u&&!h&&!q&&!n||
z||u&&h&&!q&&!n)&&d.pan(A,-v.translateSpeed*w*c,v.translateSpeed*x*c,0),g&&u&&!h&&!q&&!n||b||u&&!h&&q&&!n)&&(r=-v.zoomSpeed*x/window.innerHeight*(A-d.lastT())*100,d.pan(A,0,0,c*(Math.exp(r)-1)));v._lastX=f;v._lastY=e;v._lastMods=k;return!0}}v.mouseListener=h(a,f);a.addEventListener("touchstart",function(b){var c=n(b.changedTouches[0],a);f(0,c[0],c[1],v._lastMods);f(1,c[0],c[1],v._lastMods);b.preventDefault()},b?{passive:!1}:!1);a.addEventListener("touchmove",function(b){var c=n(b.changedTouches[0],
a);f(1,c[0],c[1],v._lastMods);b.preventDefault()},b?{passive:!1}:!1);a.addEventListener("touchend",function(b){f(0,v._lastX,v._lastY,v._lastMods);b.preventDefault()},b?{passive:!1}:!1);v.wheelListener=e(a,function(b,a){if(!1!==v.keyBindingMode&&v.enableWheel){var f=v.flipX?1:-1,e=v.flipY?1:-1,k=p();Math.abs(b)>Math.abs(a)?d.rotate(k,0,0,-b*f*Math.PI*v.rotateSpeed/window.innerWidth):v._ortho||(b=-v.zoomSpeed*e*a/window.innerHeight*(k-d.lastT())/20,d.pan(k,0,0,c*(Math.exp(b)-1)))}},!0)};v.enableMouseListeners();
return v};var p=a("right-now"),g=a("3d-view"),h=a("mouse-change"),e=a("mouse-wheel"),n=a("mouse-event-offset"),b=a("has-passive-events")},{"3d-view":47,"has-passive-events":403,"mouse-change":427,"mouse-event-offset":428,"mouse-wheel":430,"right-now":488}],285:[function(a,t,m){m=a("glslify");var p=a("gl-shader"),g=m(["precision mediump float;\n#define GLSLIFY 1\nattribute vec2 position;\nvarying vec2 uv;\nvoid main() {\n  uv \x3d position;\n  gl_Position \x3d vec4(position, 0, 1);\n}"]),h=m(["precision mediump float;\n#define GLSLIFY 1\n\nuniform sampler2D accumBuffer;\nvarying vec2 uv;\n\nvoid main() {\n  vec4 accum \x3d texture2D(accumBuffer, 0.5 * (uv + 1.0));\n  gl_FragColor \x3d min(vec4(1,1,1,1), accum);\n}"]);
t.exports=function(a){return p(a,g,h,null,[{name:"position",type:"vec2"}])}},{"gl-shader":297,glslify:401}],286:[function(a,t,m){function p(){this.mouse=[-1,-1];this.screen=null;this.distance=Infinity;this.data=this.object=this.dataPosition=this.dataCoordinate=this.index=null}function g(b,a){var c=null;try{(c=b.getContext("webgl",a))||(c=b.getContext("experimental-webgl",a))}catch(x){return null}return c}function h(b){return"boolean"===typeof b?b:!0}var e=a("./camera.js"),n=a("gl-axes3d"),b=a("gl-axes3d/properties"),
l=a("gl-spikes3d"),u=a("gl-select-static"),q=a("gl-fbo"),d=a("a-big-triangle"),f=a("mouse-change"),c=a("mouse-wheel"),k=a("gl-mat4/perspective"),r=a("gl-mat4/ortho"),v=a("./lib/shader"),z=a("is-mobile")({tablet:!0});t.exports={createScene:function(a){function A(){if(!U._stopped&&U.autoResize){var b=C.parentNode;if(b&&b!==document.body){var a=b.clientWidth;b=b.clientHeight}else a=window.innerWidth,b=window.innerHeight;var c=Math.ceil(a*U.pixelRatio)|0,d=Math.ceil(b*U.pixelRatio)|0;if(c!==C.width||
d!==C.height)C.width=c,C.height=d,c=C.style,c.position=c.position||"absolute",c.left="0px",c.top="0px",c.width=a+"px",c.height=b+"px",S=!0}}function w(){for(var b=O.length,a=P.length,c=0;c<a;++c)T[c]=0;c=0;a:for(;c<b;++c){var d=O[c],f=d.pickSlots;if(f){for(var e=0;e<a;++e)if(255>T[e]+f){R[c]=e;d.setPickBase(T[e]+1);T[e]+=f;continue a}e=u(D,W);R[c]=a;P.push(e);T.push(f);d.setPickBase(1);a+=1}else R[c]=-1}for(;0<a&&0===T[a-1];)T.pop(),P.pop().dispose()}function x(){if(U.contextLost)return!0;if(D.isContextLost()&&
(U.contextLost=!0,U.mouseListener.enabled=!1,U.selection.object=null,U.oncontextloss))U.oncontextloss()}function m(){if(!x()){A();var a=U.camera.tick();Y.view=U.camera.matrix;S=S||a;ba=ba||a;M.pixelRatio=U.pixelRatio;N.pixelRatio=U.pixelRatio;a=O.length;var c=X[0],f=X[1];c[0]=c[1]=c[2]=Infinity;f[0]=f[1]=f[2]=-Infinity;for(var e=0;e<a;++e){var g=O[e];g.pixelRatio=U.pixelRatio;g.axes=U.axes;S=S||!!g.dirty;ba=ba||!!g.dirty;if(g=g.bounds){var l=g[0],h=g[1];for(g=0;3>g;++g)c[g]=Math.min(c[g],l[g]),f[g]=
Math.max(f[g],h[g])}}l=U.bounds;if(U.autoBounds)for(g=0;3>g;++g)f[g]<c[g]?(c[g]=-1,f[g]=1):(c[g]===f[g]&&(--c[g],f[g]+=1),e=.05*(f[g]-c[g]),c[g]-=e,f[g]+=e),l[0][g]=c[g],l[1][g]=f[g];e=!1;for(g=0;3>g;++g)e=e||ha[0][g]!==l[0][g]||ha[1][g]!==l[1][g],ha[0][g]=l[0][g],ha[1][g]=l[1][g];ba=ba||e;if(S=S||e){if(e){c=[0,0,0];for(e=0;3>e;++e)f=e,g=(l[1][e]-l[0][e])/10,h=Math.round(Math.log(Math.abs(g))/Math.log(10)),0>h?(h=Math.round(Math.pow(10,-h)),g=Math.ceil(g*h)/h):0<h?(h=Math.round(Math.pow(10,h)),g=
Math.ceil(g/h)*h):g=Math.ceil(g),c[f]=g;M.autoTicks?M.update({bounds:l,tickSpacing:c}):M.update({bounds:l})}c=D.drawingBufferWidth;f=D.drawingBufferHeight;W[0]=c;W[1]=f;na[0]=Math.max(c/U.pixelRatio,1)|0;na[1]=Math.max(f/U.pixelRatio,1)|0;I?(r(da,-c/f,c/f,-1,1,U.zNear,U.zFar),Y._ortho=!0):(k(da,U.fovy,c/f,U.zNear,U.zFar),Y._ortho=!1);for(e=0;16>e;++e)ca[e]=0;ca[15]=1;for(e=g=0;3>e;++e)g=Math.max(g,l[1][e]-l[0][e]);for(e=0;3>e;++e)ca[5*e]=U.autoScale?U.aspect[e]/(l[1][e]-l[0][e]):1/g,U.autoCenter&&
(ca[12+e]=.5*-ca[5*e]*(l[0][e]+l[1][e]));for(e=0;e<a;++e)g=O[e],g.axesBounds=l,U.clipToBounds&&(g.clipBounds=l);H.object&&(N.position=U.snapToData?H.dataCoordinate:H.dataPosition,N.bounds=l);if(ba&&(ba=!1,!x()))for(D.colorMask(!0,!0,!0,!0),D.depthMask(!0),D.disable(D.BLEND),D.enable(D.DEPTH_TEST),e=O.length,l=P.length,g=0;g<l;++g){h=P[g];h.shape=na;h.begin();for(var q=0;q<e;++q)if(R[q]===g){var n=O[q];n.drawPick&&(n.pixelRatio=1,n.drawPick(Y))}h.end()}U.axesPixels=b(U.axes,Y,c,f);if(U.onrender)U.onrender();
D.bindFramebuffer(D.FRAMEBUFFER,null);D.viewport(0,0,c,f);e=U.clearColor;D.clearColor(e[0],e[1],e[2],e[3]);D.clear(D.COLOR_BUFFER_BIT|D.DEPTH_BUFFER_BIT);D.depthMask(!0);D.colorMask(!0,!0,!0,!0);D.enable(D.DEPTH_TEST);D.depthFunc(D.LEQUAL);D.disable(D.BLEND);D.disable(D.CULL_FACE);l=!1;M.enable&&(l=l||M.isTransparent(),M.draw(Y));N.axes=M;H.object&&N.draw(Y);D.disable(D.CULL_FACE);for(e=0;e<a;++e)g=O[e],g.axes=M,g.pixelRatio=U.pixelRatio,g.isOpaque&&g.isOpaque()&&g.draw(Y),g.isTransparent&&g.isTransparent()&&
(l=!0);if(l){E.shape=W;E.bind();D.clear(D.DEPTH_BUFFER_BIT);D.colorMask(!1,!1,!1,!1);D.depthMask(!0);D.depthFunc(D.LESS);M.enable&&M.isTransparent()&&M.drawTransparent(Y);for(e=0;e<a;++e)g=O[e],g.isOpaque&&g.isOpaque()&&g.draw(Y);D.enable(D.BLEND);D.blendEquation(D.FUNC_ADD);D.blendFunc(D.ONE,D.ONE_MINUS_SRC_ALPHA);D.colorMask(!0,!0,!0,!0);D.depthMask(!1);D.clearColor(0,0,0,0);D.clear(D.COLOR_BUFFER_BIT);M.isTransparent()&&M.drawTransparent(Y);for(e=0;e<a;++e)g=O[e],g.isTransparent&&g.isTransparent()&&
g.drawTransparent(Y);D.bindFramebuffer(D.FRAMEBUFFER,null);D.blendFunc(D.ONE,D.ONE_MINUS_SRC_ALPHA);D.disable(D.DEPTH_TEST);K.bind();E.color[0].bind(0);K.uniforms.accumBuffer=0;d(D);D.disable(D.BLEND)}S=!1;for(e=0;e<a;++e)O[e].dirty=!1}}}function t(){U._stopped||U.contextLost||(m(),requestAnimationFrame(t))}a=a||{};a.camera=a.camera||{};var C=a.canvas;C||(C=document.createElement("canvas"),a.container?a.container.appendChild(C):document.body.appendChild(C));var D=a.gl;D||(D=g(C,a.glOptions||{premultipliedAlpha:!0,
antialias:!0,preserveDrawingBuffer:z}));if(!D)throw Error("webgl not supported");var G=a.bounds||[[-10,-10,-10],[10,10,10]],H=new p,E=q(D,[D.drawingBufferWidth,D.drawingBufferHeight],{preferFloat:!z}),K=v(D),I=a.cameraObject&&!0===a.cameraObject._ortho||a.camera.projection&&"orthographic"===a.camera.projection.type||!1,J={eye:a.camera.eye||[2,0,0],center:a.camera.center||[0,0,0],up:a.camera.up||[0,1,0],zoomMin:a.camera.zoomMax||.1,zoomMax:a.camera.zoomMin||100,mode:a.camera.mode||"turntable",_ortho:I},
L=a.axes||{},M=n(D,L);M.enable=!L.disable;var N=l(D,a.spikes||{}),O=[],R=[],T=[],P=[],S=!0,ba=!0,da=Array(16),ca=Array(16),Y={view:null,projection:da,model:ca,_ortho:!1};ba=!0;var W=[D.drawingBufferWidth,D.drawingBufferHeight],ea=a.cameraObject||e(C,J),U={gl:D,contextLost:!1,pixelRatio:a.pixelRatio||1,canvas:C,selection:H,camera:ea,axes:M,axesPixels:null,spikes:N,bounds:G,objects:O,shape:W,aspect:a.aspectRatio||[1,1,1],pickRadius:a.pickRadius||10,zNear:a.zNear||.01,zFar:a.zFar||1E3,fovy:a.fovy||Math.PI/
4,clearColor:a.clearColor||[0,0,0,0],autoResize:h(a.autoResize),autoBounds:h(a.autoBounds),autoScale:!!a.autoScale,autoCenter:h(a.autoCenter),clipToBounds:h(a.clipToBounds),snapToData:!!a.snapToData,onselect:a.onselect||null,onrender:a.onrender||null,onclick:a.onclick||null,cameraParams:Y,oncontextloss:null,mouseListener:null,_stopped:!1},na=[D.drawingBufferWidth/U.pixelRatio|0,D.drawingBufferHeight/U.pixelRatio|0];U.autoResize&&A();window.addEventListener("resize",A);U.update=function(b){U._stopped||
(ba=S=!0)};U.add=function(b){U._stopped||(b.axes=M,O.push(b),R.push(-1),ba=S=!0,w())};U.remove=function(b){U._stopped||(b=O.indexOf(b),0>b||(O.splice(b,1),R.pop(),ba=S=!0,w()))};U.dispose=function(){if(!U._stopped&&(U._stopped=!0,window.removeEventListener("resize",A),C.removeEventListener("webglcontextlost",x),U.mouseListener.enabled=!1,!U.contextLost)){M.dispose();N.dispose();for(var b=0;b<O.length;++b)O[b].dispose();E.dispose();for(b=0;b<P.length;++b)P[b].dispose();K.dispose();N=M=D=null;O=[]}};
U.wheelListener=c(C,function(b,a){!1!==ea.keyBindingMode&&ea.enableWheel&&ea._ortho&&(b=b>a?1.1:1/1.1,U.aspect[0]*=b,U.aspect[1]*=b,U.aspect[2]*=b,U.redraw())},!0);U._mouseRotating=!1;U._prevButtons=0;U.enableMouseListeners=function(){U.mouseListener=f(C,function(b,a,c){if(!U._stopped){var d=P.length,f=O.length,e=H.object;H.distance=Infinity;H.mouse[0]=a;H.mouse[1]=c;H.object=null;H.screen=null;H.dataCoordinate=H.dataPosition=null;var k=!1;if(b&&U._prevButtons)U._mouseRotating=!0;else{U._mouseRotating&&
(ba=!0);U._mouseRotating=!1;for(var g=0;g<d;++g){var r=P[g].query(a,na[1]-c-1,U.pickRadius);if(r&&!(r.distance>H.distance))for(var l=0;l<f;++l){var h=O[l];if(R[l]===g){var q=h.pick(r);q&&(H.buttons=b,H.screen=r.coord,H.distance=r.distance,H.object=h,H.index=q.distance,H.dataPosition=q.position,H.dataCoordinate=q.dataCoordinate,H.data=q,k=!0)}}}}e&&e!==H.object&&(e.highlight&&e.highlight(null),S=!0);H.object&&(H.object.highlight&&H.object.highlight(H.data),S=!0);if((k=k||H.object!==e)&&U.onselect)U.onselect(H);
if(b&1&&!(U._prevButtons&1)&&U.onclick)U.onclick(H);U._prevButtons=b}})};C.addEventListener("webglcontextlost",x);var X=[[Infinity,Infinity,Infinity],[-Infinity,-Infinity,-Infinity]],ha=[X[0].slice(),X[1].slice()];U.enableMouseListeners();t();U.redraw=function(){U._stopped||(S=!0,m())};return U},createCamera:e}},{"./camera.js":284,"./lib/shader":285,"a-big-triangle":49,"gl-axes3d":229,"gl-axes3d/properties":236,"gl-fbo":245,"gl-mat4/ortho":264,"gl-mat4/perspective":265,"gl-select-static":296,"gl-spikes3d":306,
"is-mobile":412,"mouse-change":427,"mouse-wheel":430}],287:[function(a,t,m){a=a("glslify");m.pointVertex=a(["precision mediump float;\n#define GLSLIFY 1\n\nattribute vec2 position;\n\nuniform mat3 matrix;\nuniform float pointSize;\nuniform float pointCloud;\n\nhighp float rand(vec2 co) {\n  highp float a \x3d 12.9898;\n  highp float b \x3d 78.233;\n  highp float c \x3d 43758.5453;\n  highp float d \x3d dot(co.xy, vec2(a, b));\n  highp float e \x3d mod(d, 3.14);\n  return fract(sin(e) * c);\n}\n\nvoid main() {\n  vec3 hgPosition \x3d matrix * vec3(position, 1);\n  gl_Position  \x3d vec4(hgPosition.xy, 0, hgPosition.z);\n    // if we don't jitter the point size a bit, overall point cloud\n    // saturation 'jumps' on zooming, which is disturbing and confusing\n  gl_PointSize \x3d pointSize * ((19.5 + rand(position)) / 20.0);\n  if(pointCloud !\x3d 0.0) { // pointCloud is truthy\n    // get the same square surface as circle would be\n    gl_PointSize *\x3d 0.886;\n  }\n}"]);
m.pointFragment=a(["precision mediump float;\n#define GLSLIFY 1\n\nuniform vec4 color, borderColor;\nuniform float centerFraction;\nuniform float pointCloud;\n\nvoid main() {\n  float radius;\n  vec4 baseColor;\n  if(pointCloud !\x3d 0.0) { // pointCloud is truthy\n    if(centerFraction \x3d\x3d 1.0) {\n      gl_FragColor \x3d color;\n    } else {\n      gl_FragColor \x3d mix(borderColor, color, centerFraction);\n    }\n  } else {\n    radius \x3d length(2.0 * gl_PointCoord.xy - 1.0);\n    if(radius \x3e 1.0) {\n      discard;\n    }\n    baseColor \x3d mix(borderColor, color, step(radius, centerFraction));\n    gl_FragColor \x3d vec4(baseColor.rgb * baseColor.a, baseColor.a);\n  }\n}\n"]);
m.pickVertex=a(["precision mediump float;\n#define GLSLIFY 1\n\nattribute vec2 position;\nattribute vec4 pickId;\n\nuniform mat3 matrix;\nuniform float pointSize;\nuniform vec4 pickOffset;\n\nvarying vec4 fragId;\n\nvoid main() {\n  vec3 hgPosition \x3d matrix * vec3(position, 1);\n  gl_Position  \x3d vec4(hgPosition.xy, 0, hgPosition.z);\n  gl_PointSize \x3d pointSize;\n\n  vec4 id \x3d pickId + pickOffset;\n  id.y +\x3d floor(id.x / 256.0);\n  id.x -\x3d floor(id.x / 256.0) * 256.0;\n\n  id.z +\x3d floor(id.y / 256.0);\n  id.y -\x3d floor(id.y / 256.0) * 256.0;\n\n  id.w +\x3d floor(id.z / 256.0);\n  id.z -\x3d floor(id.z / 256.0) * 256.0;\n\n  fragId \x3d id;\n}\n"]);
m.pickFragment=a(["precision mediump float;\n#define GLSLIFY 1\n\nvarying vec4 fragId;\n\nvoid main() {\n  float radius \x3d length(2.0 * gl_PointCoord.xy - 1.0);\n  if(radius \x3e 1.0) {\n    discard;\n  }\n  gl_FragColor \x3d fragId / 255.0;\n}\n"])},{glslify:401}],288:[function(a,t,m){function p(b,a,e,g,d){this.plot=b;this.offsetBuffer=a;this.pickBuffer=e;this.shader=g;this.pickShader=d;this.sizeMin=.5;this.sizeMinCap=2;this.sizeMax=20;this.areaRatio=1;this.pointCount=0;this.color=[1,0,0,1];this.borderColor=
[0,0,0,1];this.blend=!1;this.pickOffset=0;this.points=null}var g=a("gl-shader"),h=a("gl-buffer"),e=a("typedarray-pool"),n=a("./lib/shader");t.exports=function(b,a){var e=b.gl,l=h(e),d=h(e),f=g(e,n.pointVertex,n.pointFragment);e=g(e,n.pickVertex,n.pickFragment);l=new p(b,l,d,f,e);l.update(a);b.addObject(l);return l};a=p.prototype;a.dispose=function(){this.shader.dispose();this.pickShader.dispose();this.offsetBuffer.dispose();this.pickBuffer.dispose();this.plot.removeObject(this)};a.update=function(b){function a(a,
c){return a in b?b[a]:c}var g;b=b||{};this.sizeMin=a("sizeMin",.5);this.sizeMax=a("sizeMax",20);this.color=a("color",[1,0,0,1]).slice();this.areaRatio=a("areaRatio",1);this.borderColor=a("borderColor",[0,0,0,1]).slice();this.blend=a("blend",!1);var h=b.positions.length>>>1,d=b.positions instanceof Float32Array,f=b.idToIndex instanceof Int32Array&&b.idToIndex.length>=h,c=b.positions,k=d?c:e.mallocFloat32(c.length),r=f?b.idToIndex:e.mallocInt32(h);d||k.set(c);if(!f)for(k.set(c),g=0;g<h;g++)r[g]=g;this.points=
c;this.offsetBuffer.update(k);this.pickBuffer.update(r);d||e.free(k);f||e.free(r);this.pointCount=h;this.pickOffset=0};a.unifiedDraw=function(){var b=[1,0,0,0,1,0,0,0,1],a=[0,0,0,0];return function(e){var g=void 0!==e,d=g?this.pickShader:this.shader,f=this.plot.gl,c=this.plot.dataBox;if(0===this.pointCount)return e;var k=c[2]-c[0],r=c[3]-c[1],l=this.points,h=0,n=l.length>>>1,u;for(u=0;u<n;u++){var p=l[2*u],x=l[2*u+1];p>=c[0]&&p<=c[2]&&x>=c[1]&&x<=c[3]&&h++}l=this.plot.pickPixelRatio*Math.max(Math.min(this.sizeMinCap,
this.sizeMin),Math.min(this.sizeMax,this.sizeMax/Math.pow(h,.33333)));b[0]=2/k;b[4]=2/r;b[6]=-2*c[0]/k-1;b[7]=-2*c[1]/r-1;this.offsetBuffer.bind();d.bind();d.attributes.position.pointer();d.uniforms.matrix=b;d.uniforms.color=this.color;d.uniforms.borderColor=this.borderColor;d.uniforms.pointCloud=5>l;d.uniforms.pointSize=l;d.uniforms.centerFraction=Math.min(1,Math.max(0,Math.sqrt(1-this.areaRatio)));g&&(a[0]=e&255,a[1]=e>>8&255,a[2]=e>>16&255,a[3]=e>>24&255,this.pickBuffer.bind(),d.attributes.pickId.pointer(f.UNSIGNED_BYTE),
d.uniforms.pickOffset=a,this.pickOffset=e);g=f.getParameter(f.BLEND);d=f.getParameter(f.DITHER);g&&!this.blend&&f.disable(f.BLEND);d&&f.disable(f.DITHER);f.drawArrays(f.POINTS,0,this.pointCount);g&&!this.blend&&f.enable(f.BLEND);d&&f.enable(f.DITHER);return e+this.pointCount}}();a.draw=a.unifiedDraw;a.drawPick=a.unifiedDraw;a.pick=function(b,a,e){b=this.pickOffset;a=this.pointCount;if(e<b||e>=b+a)return null;e-=b;b=this.points;return{object:this,pointId:e,dataCoord:[b[2*e],b[2*e+1]]}}},{"./lib/shader":287,
"gl-buffer":237,"gl-shader":297,"typedarray-pool":529}],289:[function(a,t,m){t.exports=function(a,g,h,e){var n=g[0],b=g[1],l=g[2];g=g[3];var u=h[0],q=h[1],d=h[2];h=h[3];var f=n*u+b*q+l*d+g*h;0>f&&(f=-f,u=-u,q=-q,d=-d,h=-h);if(1E-6<1-f){var c=Math.acos(f);var k=Math.sin(c);f=Math.sin((1-e)*c)/k;e=Math.sin(e*c)/k}else f=1-e;a[0]=f*n+e*u;a[1]=f*b+e*q;a[2]=f*l+e*d;a[3]=f*g+e*h;return a}},{}],290:[function(a,t,m){t.exports=function(a){return a||0===a?a.toString():""}},{}],291:[function(a,t,m){var p=a("vectorize-text");
t.exports=function(a,e,n){var b=g[e];b||(b=g[e]={});if(a in b)return b[a];var l={textAlign:"center",textBaseline:"middle",lineHeight:1,font:e,lineSpacing:1.25,styletags:{breaklines:!0,bolds:!0,italics:!0,subscripts:!0,superscripts:!0},triangles:!0};e=p(a,l);l.triangles=!1;l=p(a,l);var h,q;if(n&&1!==n){for(h=0;h<e.positions.length;++h)for(q=0;q<e.positions[h].length;++q)e.positions[h][q]/=n;for(h=0;h<l.positions.length;++h)for(q=0;q<l.positions[h].length;++q)l.positions[h][q]/=n}n=[[Infinity,Infinity],
[-Infinity,-Infinity]];var d=l.positions.length;for(h=0;h<d;++h){var f=l.positions[h];for(q=0;2>q;++q)n[0][q]=Math.min(n[0][q],f[q]),n[1][q]=Math.max(n[1][q],f[q])}return b[a]=[e,l,n]};var g={}},{"vectorize-text":534}],292:[function(a,t,m){function p(b,a){b=g(b,a);a=b.attributes;a.position.location=0;a.color.location=1;a.glyph.location=2;a.id.location=3;return b}var g=a("gl-shader"),h=a("glslify");a=h(["precision highp float;\n#define GLSLIFY 1\n\nbool outOfRange(float a, float b, float p) {\n  return ((p \x3e max(a, b)) || \n          (p \x3c min(a, b)));\n}\n\nbool outOfRange(vec2 a, vec2 b, vec2 p) {\n  return (outOfRange(a.x, b.x, p.x) ||\n          outOfRange(a.y, b.y, p.y));\n}\n\nbool outOfRange(vec3 a, vec3 b, vec3 p) {\n  return (outOfRange(a.x, b.x, p.x) ||\n          outOfRange(a.y, b.y, p.y) ||\n          outOfRange(a.z, b.z, p.z));\n}\n\nbool outOfRange(vec4 a, vec4 b, vec4 p) {\n  return outOfRange(a.xyz, b.xyz, p.xyz);\n}\n\nattribute vec3 position;\nattribute vec4 color;\nattribute vec2 glyph;\nattribute vec4 id;\n\nuniform vec4 highlightId;\nuniform float highlightScale;\nuniform mat4 model, view, projection;\nuniform vec3 clipBounds[2];\n\nvarying vec4 interpColor;\nvarying vec4 pickId;\nvarying vec3 dataCoordinate;\n\nvoid main() {\n  if (outOfRange(clipBounds[0], clipBounds[1], position)) {\n\n    gl_Position \x3d vec4(0,0,0,0);\n  } else {\n    float scale \x3d 1.0;\n    if(distance(highlightId, id) \x3c 0.0001) {\n      scale \x3d highlightScale;\n    }\n\n    vec4 worldPosition \x3d model * vec4(position, 1);\n    vec4 viewPosition \x3d view * worldPosition;\n    viewPosition \x3d viewPosition / viewPosition.w;\n    vec4 clipPosition \x3d projection * (viewPosition + scale * vec4(glyph.x, -glyph.y, 0, 0));\n\n    gl_Position \x3d clipPosition;\n    interpColor \x3d color;\n    pickId \x3d id;\n    dataCoordinate \x3d position;\n  }\n}"]);
t=h(["precision highp float;\n#define GLSLIFY 1\n\nbool outOfRange(float a, float b, float p) {\n  return ((p \x3e max(a, b)) || \n          (p \x3c min(a, b)));\n}\n\nbool outOfRange(vec2 a, vec2 b, vec2 p) {\n  return (outOfRange(a.x, b.x, p.x) ||\n          outOfRange(a.y, b.y, p.y));\n}\n\nbool outOfRange(vec3 a, vec3 b, vec3 p) {\n  return (outOfRange(a.x, b.x, p.x) ||\n          outOfRange(a.y, b.y, p.y) ||\n          outOfRange(a.z, b.z, p.z));\n}\n\nbool outOfRange(vec4 a, vec4 b, vec4 p) {\n  return outOfRange(a.xyz, b.xyz, p.xyz);\n}\n\nattribute vec3 position;\nattribute vec4 color;\nattribute vec2 glyph;\nattribute vec4 id;\n\nuniform mat4 model, view, projection;\nuniform vec2 screenSize;\nuniform vec3 clipBounds[2];\nuniform float highlightScale, pixelRatio;\nuniform vec4 highlightId;\n\nvarying vec4 interpColor;\nvarying vec4 pickId;\nvarying vec3 dataCoordinate;\n\nvoid main() {\n  if (outOfRange(clipBounds[0], clipBounds[1], position)) {\n\n    gl_Position \x3d vec4(0,0,0,0);\n  } else {\n    float scale \x3d pixelRatio;\n    if(distance(highlightId.bgr, id.bgr) \x3c 0.001) {\n      scale *\x3d highlightScale;\n    }\n\n    vec4 worldPosition \x3d model * vec4(position, 1.0);\n    vec4 viewPosition \x3d view * worldPosition;\n    vec4 clipPosition \x3d projection * viewPosition;\n    clipPosition /\x3d clipPosition.w;\n\n    gl_Position \x3d clipPosition + vec4(screenSize * scale * vec2(glyph.x, -glyph.y), 0.0, 0.0);\n    interpColor \x3d color;\n    pickId \x3d id;\n    dataCoordinate \x3d position;\n  }\n}"]);
var e=h(["precision highp float;\n#define GLSLIFY 1\n\nbool outOfRange(float a, float b, float p) {\n  return ((p \x3e max(a, b)) || \n          (p \x3c min(a, b)));\n}\n\nbool outOfRange(vec2 a, vec2 b, vec2 p) {\n  return (outOfRange(a.x, b.x, p.x) ||\n          outOfRange(a.y, b.y, p.y));\n}\n\nbool outOfRange(vec3 a, vec3 b, vec3 p) {\n  return (outOfRange(a.x, b.x, p.x) ||\n          outOfRange(a.y, b.y, p.y) ||\n          outOfRange(a.z, b.z, p.z));\n}\n\nbool outOfRange(vec4 a, vec4 b, vec4 p) {\n  return outOfRange(a.xyz, b.xyz, p.xyz);\n}\n\nattribute vec3 position;\nattribute vec4 color;\nattribute vec2 glyph;\nattribute vec4 id;\n\nuniform float highlightScale;\nuniform vec4 highlightId;\nuniform vec3 axes[2];\nuniform mat4 model, view, projection;\nuniform vec2 screenSize;\nuniform vec3 clipBounds[2];\nuniform float scale, pixelRatio;\n\nvarying vec4 interpColor;\nvarying vec4 pickId;\nvarying vec3 dataCoordinate;\n\nvoid main() {\n  if (outOfRange(clipBounds[0], clipBounds[1], position)) {\n\n    gl_Position \x3d vec4(0,0,0,0);\n  } else {\n    float lscale \x3d pixelRatio * scale;\n    if(distance(highlightId, id) \x3c 0.0001) {\n      lscale *\x3d highlightScale;\n    }\n\n    vec4 clipCenter   \x3d projection * view * model * vec4(position, 1);\n    vec3 dataPosition \x3d position + 0.5*lscale*(axes[0] * glyph.x + axes[1] * glyph.y) * clipCenter.w * screenSize.y;\n    vec4 clipPosition \x3d projection * view * model * vec4(dataPosition, 1);\n\n    gl_Position \x3d clipPosition;\n    interpColor \x3d color;\n    pickId \x3d id;\n    dataCoordinate \x3d dataPosition;\n  }\n}\n"]),
n=h(["precision highp float;\n#define GLSLIFY 1\n\nbool outOfRange(float a, float b, float p) {\n  return ((p \x3e max(a, b)) || \n          (p \x3c min(a, b)));\n}\n\nbool outOfRange(vec2 a, vec2 b, vec2 p) {\n  return (outOfRange(a.x, b.x, p.x) ||\n          outOfRange(a.y, b.y, p.y));\n}\n\nbool outOfRange(vec3 a, vec3 b, vec3 p) {\n  return (outOfRange(a.x, b.x, p.x) ||\n          outOfRange(a.y, b.y, p.y) ||\n          outOfRange(a.z, b.z, p.z));\n}\n\nbool outOfRange(vec4 a, vec4 b, vec4 p) {\n  return outOfRange(a.xyz, b.xyz, p.xyz);\n}\n\nuniform vec3 fragClipBounds[2];\nuniform float opacity;\n\nvarying vec4 interpColor;\nvarying vec4 pickId;\nvarying vec3 dataCoordinate;\n\nvoid main() {\n  if (\n    outOfRange(fragClipBounds[0], fragClipBounds[1], dataCoordinate) ||\n    interpColor.a * opacity \x3d\x3d 0.\n  ) discard;\n  gl_FragColor \x3d interpColor * opacity;\n}\n"]);
h=h(["precision highp float;\n#define GLSLIFY 1\n\nbool outOfRange(float a, float b, float p) {\n  return ((p \x3e max(a, b)) || \n          (p \x3c min(a, b)));\n}\n\nbool outOfRange(vec2 a, vec2 b, vec2 p) {\n  return (outOfRange(a.x, b.x, p.x) ||\n          outOfRange(a.y, b.y, p.y));\n}\n\nbool outOfRange(vec3 a, vec3 b, vec3 p) {\n  return (outOfRange(a.x, b.x, p.x) ||\n          outOfRange(a.y, b.y, p.y) ||\n          outOfRange(a.z, b.z, p.z));\n}\n\nbool outOfRange(vec4 a, vec4 b, vec4 p) {\n  return outOfRange(a.xyz, b.xyz, p.xyz);\n}\n\nuniform vec3 fragClipBounds[2];\nuniform float pickGroup;\n\nvarying vec4 pickId;\nvarying vec3 dataCoordinate;\n\nvoid main() {\n  if (outOfRange(fragClipBounds[0], fragClipBounds[1], dataCoordinate)) discard;\n\n  gl_FragColor \x3d vec4(pickGroup, pickId.bgr);\n}"]);
var b=[{name:"position",type:"vec3"},{name:"color",type:"vec4"},{name:"glyph",type:"vec2"},{name:"id",type:"vec4"}],l={vertex:a,fragment:n,attributes:b},u={vertex:t,fragment:n,attributes:b},q={vertex:e,fragment:n,attributes:b},d={vertex:a,fragment:h,attributes:b},f={vertex:t,fragment:h,attributes:b},c={vertex:e,fragment:h,attributes:b};m.createPerspective=function(b){return p(b,l)};m.createOrtho=function(b){return p(b,u)};m.createProject=function(b){return p(b,q)};m.createPickPerspective=function(b){return p(b,
d)};m.createPickOrtho=function(b){return p(b,f)};m.createPickProject=function(b){return p(b,c)}},{"gl-shader":297,glslify:401}],293:[function(a,t,m){function p(b,a){var c=b[0],d=b[1],f=b[2],e=b[3];b[0]=a[0]*c+a[4]*d+a[8]*f+a[12]*e;b[1]=a[1]*c+a[5]*d+a[9]*f+a[13]*e;b[2]=a[2]*c+a[6]*d+a[10]*f+a[14]*e;b[3]=a[3]*c+a[7]*d+a[11]*f+a[15]*e;return b}function g(b,a,c,d){p(d,d,c);p(d,d,a);return p(d,d,b)}function h(b,a){this.index=b;this.dataCoordinate=this.position=a}function e(b){return!0===b||1<b?1:b}function n(b,
a,c,d,f,e,k,g,r,l,n,q){this.gl=b;this.pixelRatio=1;this.shader=a;this.orthoShader=c;this.projectShader=d;this.pointBuffer=f;this.colorBuffer=e;this.glyphBuffer=k;this.idBuffer=g;this.vao=r;this.lineVertexCount=this.vertexCount=0;this.opacity=1;this.hasAlpha=!1;this.lineWidth=0;this.projectScale=[2/3,2/3,2/3];this.projectOpacity=[1,1,1];this.projectHasAlpha=!1;this.pickId=0;this.pickPerspectiveShader=l;this.pickOrthoShader=n;this.pickProjectShader=q;this.points=[];this._selectResult=new h(0,[0,0,0]);
this.useOrtho=!0;this.bounds=[[Infinity,Infinity,Infinity],[-Infinity,-Infinity,-Infinity]];this.axesProject=[!0,!0,!0];this.axesBounds=[[-Infinity,-Infinity,-Infinity],[Infinity,Infinity,Infinity]];this.highlightId=[1,1,1,1];this.highlightScale=2;this.clipBounds=[[-Infinity,-Infinity,-Infinity],[Infinity,Infinity,Infinity]];this.dirty=!0}function b(b){b[0]=b[1]=b[2]=0;return b}function l(b,a){b[0]=a[0];b[1]=a[1];b[2]=a[2];b[3]=1;return b}function u(b,a,c,d){b[0]=a[0];b[1]=a[1];b[2]=a[2];b[c]=d;return b}
function q(a,c,d,f,e,k,r){var h=d.gl;if(k===d.projectHasAlpha||r){for(var n=d.axesProject,q=d.gl,p=c.uniforms,z=f.model||w,A=f.view||w,y=f.projection||w,m=d.axesBounds,J=d.clipBounds,t=E,I=0;2>I;++I)for(var L=0;3>L;++L)t[I][L]=Math.max(Math.min(J[I][L],1E8),-1E8);J=d.axes&&d.axes.lastCubeProps?d.axes.lastCubeProps.axis:[1,1,1];x[0]=2/q.drawingBufferWidth;x[1]=2/q.drawingBufferHeight;c.bind();p.view=A;p.projection=y;p.screenSize=x;p.highlightId=d.highlightId;p.highlightScale=d.highlightScale;p.clipBounds=
t;p.pickGroup=d.pickId/255;p.pixelRatio=e;for(c=0;3>c;++c)if(n[c]){p.scale=d.projectScale[c];p.opacity=d.projectOpacity[c];I=G;for(var M=0;16>M;++M)I[M]=0;for(M=0;4>M;++M)I[5*M]=1;I[5*c]=0;I[12+c]=0>J[c]?m[0][c]:m[1][c];v(I,z,I);p.model=I;I=(c+1)%3;L=(c+2)%3;var O=b(F),N=b(B);O[I]=1;N[L]=1;M=g(y,A,z,l(C,O));var R=g(y,A,z,l(D,N));if(Math.abs(M[1])>Math.abs(R[1])){var Z=M;M=R;R=Z;Z=O;O=N;N=Z;Z=I;I=L;L=Z}0>M[0]&&(O[I]=-1);0<R[1]&&(N[L]=-1);for(M=Z=R=0;4>M;++M)R+=Math.pow(z[4*I+M],2),Z+=Math.pow(z[4*
L+M],2);O[I]/=Math.sqrt(R);N[L]/=Math.sqrt(Z);p.axes[0]=O;p.axes[1]=N;p.fragClipBounds[0]=u(H,t[0],c,-1E8);p.fragClipBounds[1]=u(H,t[1],c,1E8);d.vao.bind();d.vao.draw(q.TRIANGLES,d.vertexCount);0<d.lineWidth&&(q.lineWidth(d.lineWidth*e),d.vao.draw(q.LINES,d.lineVertexCount,d.vertexCount));d.vao.unbind()}}if(k===d.hasAlpha||r)a.bind(),a=a.uniforms,a.model=f.model||w,a.view=f.view||w,a.projection=f.projection||w,x[0]=2/h.drawingBufferWidth,x[1]=2/h.drawingBufferHeight,a.screenSize=x,a.highlightId=d.highlightId,
a.highlightScale=d.highlightScale,a.fragClipBounds=K,a.clipBounds=d.axes.bounds,a.opacity=d.opacity,a.pickGroup=d.pickId/255,a.pixelRatio=e,d.vao.bind(),d.vao.draw(h.TRIANGLES,d.vertexCount),0<d.lineWidth&&(h.lineWidth(d.lineWidth*e),d.vao.draw(h.LINES,d.lineVertexCount,d.vertexCount)),d.vao.unbind()}function d(b,a,c,d){a=Array.isArray(b)?a<b.length?b[a]:void 0:b;a=y(a);b=!0;f(a)&&(a="",b=!1);c=A(a,c,d);return{mesh:c[0],lines:c[1],bounds:c[2],visible:b}}var f=a("is-string-blank"),c=a("gl-buffer"),
k=a("gl-vao"),r=a("typedarray-pool"),v=a("gl-mat4/multiply"),z=a("./lib/shaders"),A=a("./lib/glyphs"),y=a("./lib/get-simple-string"),w=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1];t.exports=function(b){var a=b.gl,d=z.createPerspective(a),f=z.createOrtho(a),e=z.createProject(a),g=z.createPickPerspective(a),r=z.createPickOrtho(a),h=z.createPickProject(a),l=c(a),q=c(a),u=c(a),p=c(a),v=k(a,[{buffer:l,size:3,type:a.FLOAT},{buffer:q,size:4,type:a.FLOAT},{buffer:u,size:2,type:a.FLOAT},{buffer:p,size:4,type:a.UNSIGNED_BYTE,
normalized:!0}]);a=new n(a,d,f,e,l,q,u,p,v,g,r,h);a.update(b);return a};a=n.prototype;a.pickSlots=1;a.setPickBase=function(b){this.pickId=b};a.isTransparent=function(){if(this.hasAlpha)return!0;for(var b=0;3>b;++b)if(this.axesProject[b]&&this.projectHasAlpha)return!0;return!1};a.isOpaque=function(){if(!this.hasAlpha)return!0;for(var b=0;3>b;++b)if(this.axesProject[b]&&!this.projectHasAlpha)return!0;return!1};var x=[0,0],F=[0,0,0],B=[0,0,0],C=[0,0,0,1],D=[0,0,0,1],G=w.slice(),H=[0,0,0],E=[[0,0,0],
[0,0,0]],K=[[-1E8,-1E8,-1E8],[1E8,1E8,1E8]];a.draw=function(b){q(this.useOrtho?this.orthoShader:this.shader,this.projectShader,this,b,this.pixelRatio,!1,!1)};a.drawTransparent=function(b){q(this.useOrtho?this.orthoShader:this.shader,this.projectShader,this,b,this.pixelRatio,!0,!1)};a.drawPick=function(b){q(this.useOrtho?this.pickOrthoShader:this.pickPerspectiveShader,this.pickProjectShader,this,b,1,!0,!0)};a.pick=function(b){if(!b||b.id!==this.pickId)return null;var a=b.value[2]+(b.value[1]<<8)+(b.value[0]<<
16);if(a>=this.pointCount||0>a)return null;b=this.points[a];var c=this._selectResult;c.index=a;for(a=0;3>a;++a)c.position[a]=c.dataCoordinate[a]=b[a];return c};a.highlight=function(b){b?(b=b.index,this.highlightId=[(b&255)/255,(b>>8&255)/255,(b>>16&255)/255,0]):this.highlightId=[1,1,1,1]};a.update=function(b){b=b||{};"perspective"in b&&(this.useOrtho=!b.perspective);"orthographic"in b&&(this.useOrtho=!!b.orthographic);"lineWidth"in b&&(this.lineWidth=b.lineWidth);if("project"in b)if(Array.isArray(b.project))this.axesProject=
b.project;else{var a=!!b.project;this.axesProject=[a,a,a]}"projectScale"in b&&(Array.isArray(b.projectScale)?this.projectScale=b.projectScale.slice():(a=+b.projectScale,this.projectScale=[a,a,a]));this.projectHasAlpha=!1;if("projectOpacity"in b){Array.isArray(b.projectOpacity)?this.projectOpacity=b.projectOpacity.slice():(a=+b.projectOpacity,this.projectOpacity=[a,a,a]);for(var c=0;3>c;++c)this.projectOpacity[c]=e(this.projectOpacity[c]),1>this.projectOpacity[c]&&(this.projectHasAlpha=!0)}this.hasAlpha=
!1;"opacity"in b&&(this.opacity=e(b.opacity),1>this.opacity&&(this.hasAlpha=!0));this.dirty=!0;a=b.position;var f=b.font||"normal",k=b.alignment||[0,0];if(2===k.length){var g=k[0];var h=k[1]}else for(g=[],h=[],c=0;c<k.length;++c)g[c]=k[c][0],h[c]=k[c][1];k=[Infinity,Infinity,Infinity];var l=[-Infinity,-Infinity,-Infinity],n=b.glyph,q=b.color,u=b.size,p=b.angle;b=b.lineColor;var v=-1,z=0,A=0,w=0;if(a.length)a:for(w=a.length,c=0;c<w;++c){for(var x=a[c],y=0;3>y;++y)if(isNaN(x[y])||!isFinite(x[y]))continue a;
var m=d(n,c,f,this.pixelRatio),t=m.mesh,B=m.lines;z+=3*t.cells.length;A+=2*B.edges.length}c=z+A;var E=r.mallocFloat(3*c),I=r.mallocFloat(4*c),F=r.mallocFloat(2*c),C=r.mallocUint32(c);if(0<c){var D=0,G=z,K=[0,0,0,1],H=[0,0,0,1],wa=Array.isArray(q)&&Array.isArray(q[0]),Aa=Array.isArray(b)&&Array.isArray(b[0]);c=0;a:for(;c<w;++c){v+=1;x=a[c];for(y=0;3>y;++y){if(isNaN(x[y])||!isFinite(x[y]))continue a;l[y]=Math.max(l[y],x[y]);k[y]=Math.min(k[y],x[y])}m=d(n,c,f,this.pixelRatio);t=m.mesh;B=m.lines;var Ha=
m.bounds;var Ba=m.visible;if(Ba)if(Array.isArray(q))if(m=wa?c<q.length?q[c]:[0,0,0,0]:q,3===m.length){for(y=0;3>y;++y)K[y]=m[y];K[3]=1}else{if(4===m.length){for(y=0;4>y;++y)K[y]=m[y];!this.hasAlpha&&1>m[3]&&(this.hasAlpha=!0)}}else K[0]=K[1]=K[2]=0,K[3]=1;else K=[1,1,1,0];if(Ba)if(Array.isArray(b))if(m=Aa?c<b.length?b[c]:[0,0,0,0]:b,3===m.length){for(y=0;3>y;++y)H[y]=m[y];H[y]=1}else{if(4===m.length){for(y=0;4>y;++y)H[y]=m[y];!this.hasAlpha&&1>m[3]&&(this.hasAlpha=!0)}}else H[0]=H[1]=H[2]=0,H[3]=
1;else H=[1,1,1,0];m=.5;Ba?Array.isArray(u)?m=c<u.length?+u[c]:12:u?m=+u:this.useOrtho&&(m=12):m=0;x=0;Array.isArray(p)?x=c<p.length?+p[c]:0:p&&(x=+p);Ba=Math.cos(x);var va=Math.sin(x);x=a[c];for(y=0;3>y;++y)l[y]=Math.max(l[y],x[y]),k[y]=Math.min(k[y],x[y]);y=0;Array.isArray(g)?y=c<g.length?g[c]:0:g&&(y=g);var pa=0;Array.isArray(h)?pa=c<h.length?h[c]:0:h&&(pa=h);y*=0<y?1-Ha[0][0]:0>y?1+Ha[1][0]:1;pa*=0<pa?1-Ha[0][1]:0>pa?1+Ha[1][1]:1;Ha=[y,pa];pa=t.cells||[];t=t.positions||[];for(y=0;y<pa.length;++y)for(var ya=
pa[y],ka=0;3>ka;++ka){for(var xa=0;3>xa;++xa)E[3*D+xa]=x[xa];for(xa=0;4>xa;++xa)I[4*D+xa]=K[xa];C[D]=v;xa=t[ya[ka]];F[2*D]=m*(Ba*xa[0]-va*xa[1]+Ha[0]);F[2*D+1]=m*(va*xa[0]+Ba*xa[1]+Ha[1]);D+=1}pa=B.edges;t=B.positions;for(y=0;y<pa.length;++y)for(ya=pa[y],ka=0;2>ka;++ka){for(xa=0;3>xa;++xa)E[3*G+xa]=x[xa];for(xa=0;4>xa;++xa)I[4*G+xa]=H[xa];C[G]=v;xa=t[ya[ka]];F[2*G]=m*(Ba*xa[0]-va*xa[1]+Ha[0]);F[2*G+1]=m*(va*xa[0]+Ba*xa[1]+Ha[1]);G+=1}}}this.bounds=[k,l];this.points=a;this.pointCount=a.length;this.vertexCount=
z;this.lineVertexCount=A;this.pointBuffer.update(E);this.colorBuffer.update(I);this.glyphBuffer.update(F);this.idBuffer.update(C);r.free(E);r.free(I);r.free(F);r.free(C)};a.dispose=function(){this.shader.dispose();this.orthoShader.dispose();this.pickPerspectiveShader.dispose();this.pickOrthoShader.dispose();this.vao.dispose();this.pointBuffer.dispose();this.colorBuffer.dispose();this.glyphBuffer.dispose();this.idBuffer.dispose()}},{"./lib/get-simple-string":290,"./lib/glyphs":291,"./lib/shaders":292,
"gl-buffer":237,"gl-mat4/multiply":263,"gl-vao":319,"is-string-blank":415,"typedarray-pool":529}],294:[function(a,t,m){a=a("glslify");m.boxVertex=a(["precision mediump float;\n#define GLSLIFY 1\n\nattribute vec2 vertex;\n\nuniform vec2 cornerA, cornerB;\n\nvoid main() {\n  gl_Position \x3d vec4(mix(cornerA, cornerB, vertex), 0, 1);\n}\n"]);m.boxFragment=a(["precision mediump float;\n#define GLSLIFY 1\n\nuniform vec4 color;\n\nvoid main() {\n  gl_FragColor \x3d color;\n}\n"])},{glslify:401}],295:[function(a,
t,m){function p(a,b,e){this.plot=a;this.boxBuffer=b;this.boxShader=e;this.enabled=!0;this.selectBox=[Infinity,Infinity,-Infinity,-Infinity];this.borderColor=[0,0,0,1];this.innerFill=!1;this.innerColor=[0,0,0,.25];this.outerFill=!0;this.outerColor=[0,0,0,.5];this.borderWidth=10}var g=a("gl-shader"),h=a("gl-buffer"),e=a("./lib/shaders");t.exports=function(a,b){var l=a.gl,n=h(l,[0,0,0,1,1,0,1,1]);l=g(l,e.boxVertex,e.boxFragment);n=new p(a,n,l);n.update(b);a.addOverlay(n);return n};a=p.prototype;a.draw=
function(){if(this.enabled){var a=this.plot,b=this.selectBox,e=this.borderWidth,g=this.innerColor,h=this.outerColor,d=this.borderColor,f=a.box,c=a.screenBox,k=a.dataBox,r=a.viewBox,p=a.pixelRatio;a=(b[0]-k[0])*(r[2]-r[0])/(k[2]-k[0])+r[0];var z=(b[1]-k[1])*(r[3]-r[1])/(k[3]-k[1])+r[1],A=(b[2]-k[0])*(r[2]-r[0])/(k[2]-k[0])+r[0];b=(b[3]-k[1])*(r[3]-r[1])/(k[3]-k[1])+r[1];a=Math.max(a,r[0]);z=Math.max(z,r[1]);A=Math.min(A,r[2]);b=Math.min(b,r[3]);A<a||b<z||(f.bind(),r=c[2]-c[0],c=c[3]-c[1],this.outerFill&&
(f.drawBox(0,0,r,z,h),f.drawBox(0,z,a,b,h),f.drawBox(0,b,r,c,h),f.drawBox(A,z,r,b,h)),this.innerFill&&f.drawBox(a,z,A,b,g),0<e&&(e*=p,f.drawBox(a-e,z-e,A+e,z+e,d),f.drawBox(a-e,b-e,A+e,b+e,d),f.drawBox(a-e,z-e,a+e,b+e,d),f.drawBox(A-e,z-e,A+e,b+e,d)))}};a.update=function(a){a=a||{};this.innerFill=!!a.innerFill;this.outerFill=!!a.outerFill;this.innerColor=(a.innerColor||[0,0,0,.5]).slice();this.outerColor=(a.outerColor||[0,0,0,.5]).slice();this.borderColor=(a.borderColor||[0,0,0,1]).slice();this.borderWidth=
a.borderWidth||0;this.selectBox=(a.selectBox||this.selectBox).slice()};a.dispose=function(){this.boxBuffer.dispose();this.boxShader.dispose();this.plot.removeOverlay(this)}},{"./lib/shaders":294,"gl-buffer":237,"gl-shader":297}],296:[function(a,t,m){function p(b,a,d,f,c){this.coord=[b,a];this.id=d;this.value=f;this.distance=c}function g(b,a,d){this.gl=b;this.fbo=a;this.buffer=d;this._readTimeout=null;var f=this;this._readCallback=function(){f.gl&&(a.bind(),b.readPixels(0,0,a.shape[0],a.shape[1],b.RGBA,
b.UNSIGNED_BYTE,f.buffer),f._readTimeout=null)}}t.exports=function(b,a){var d=h(b,a);a=e.mallocUint8(a[0]*a[1]*4);return new g(b,d,a)};var h=a("gl-fbo"),e=a("typedarray-pool"),n=a("ndarray"),b=a("bit-twiddle").nextPow2,l=a("cwise/lib/wrapper")({args:["array",{offset:[0,0,1],array:0},{offset:[0,0,2],array:0},{offset:[0,0,3],array:0},"scalar","scalar","index"],pre:{body:"{this_closestD2\x3d1e8,this_closestX\x3d-1,this_closestY\x3d-1}",args:[],thisVars:["this_closestD2","this_closestX","this_closestY"],
localVars:[]},body:{body:"{if(_inline_16_arg0_\x3c255||_inline_16_arg1_\x3c255||_inline_16_arg2_\x3c255||_inline_16_arg3_\x3c255){var _inline_16_l\x3d_inline_16_arg4_-_inline_16_arg6_[0],_inline_16_a\x3d_inline_16_arg5_-_inline_16_arg6_[1],_inline_16_f\x3d_inline_16_l*_inline_16_l+_inline_16_a*_inline_16_a;_inline_16_f\x3cthis_closestD2\x26\x26(this_closestD2\x3d_inline_16_f,this_closestX\x3d_inline_16_arg6_[0],this_closestY\x3d_inline_16_arg6_[1])}}",args:[{name:"_inline_16_arg0_",lvalue:!1,rvalue:!0,
count:1},{name:"_inline_16_arg1_",lvalue:!1,rvalue:!0,count:1},{name:"_inline_16_arg2_",lvalue:!1,rvalue:!0,count:1},{name:"_inline_16_arg3_",lvalue:!1,rvalue:!0,count:1},{name:"_inline_16_arg4_",lvalue:!1,rvalue:!0,count:1},{name:"_inline_16_arg5_",lvalue:!1,rvalue:!0,count:1},{name:"_inline_16_arg6_",lvalue:!1,rvalue:!0,count:4}],thisVars:["this_closestD2","this_closestX","this_closestY"],localVars:["_inline_16_a","_inline_16_f","_inline_16_l"]},post:{body:"{return[this_closestX,this_closestY,this_closestD2]}",
args:[],thisVars:["this_closestD2","this_closestX","this_closestY"],localVars:[]},debug:!1,funcName:"cwise",blockSize:64});a=g.prototype;Object.defineProperty(a,"shape",{get:function(){return this.gl?this.fbo.shape.slice():[0,0]},set:function(a){if(this.gl){this.fbo.shape=a;var g=this.fbo.shape[0],d=this.fbo.shape[1];if(d*g*4>this.buffer.length){e.free(this.buffer);for(var f=this.buffer=e.mallocUint8(b(d*g*4)),c=0;c<d*g*4;++c)f[c]=255}return a}}});a.begin=function(){var b=this.gl;b&&(this.fbo.bind(),
b.clearColor(1,1,1,1),b.clear(b.COLOR_BUFFER_BIT|b.DEPTH_BUFFER_BIT))};a.end=function(){var b=this.gl;b&&(b.bindFramebuffer(b.FRAMEBUFFER,null),this._readTimeout||clearTimeout(this._readTimeout),this._readTimeout=setTimeout(this._readCallback,1))};a.query=function(b,a,d){if(!this.gl)return null;var f=this.fbo.shape.slice();b|=0;a|=0;"number"!==typeof d&&(d=1);var c=Math.min(Math.max(b-d,0),f[0])|0,e=Math.min(Math.max(b+d,0),f[0])|0;b=Math.min(Math.max(a-d,0),f[1])|0;a=Math.min(Math.max(a+d,0),f[1])|
0;if(e<=c||a<=b)return null;a=[e-c,a-b];f=n(this.buffer,[a[0],a[1],4],[4,4*f[0],1],4*(c+f[0]*b));d=l(f.hi(a[0],a[1],1),d,d);a=d[0];e=d[1];if(0>a||Math.pow(this.radius,2)<d[2])return null;var g=f.get(a,e,0),h=f.get(a,e,1),q=f.get(a,e,2);f=f.get(a,e,3);return new p(a+c|0,e+b|0,g,[h,q,f],Math.sqrt(d[2]))};a.dispose=function(){this.gl&&(this.fbo.dispose(),e.free(this.buffer),this.gl=null,this._readTimeout&&clearTimeout(this._readTimeout))}},{"bit-twiddle":82,"cwise/lib/wrapper":139,"gl-fbo":245,ndarray:442,
"typedarray-pool":529}],297:[function(a,t,m){function p(b){this.gl=b;this.gl.lastAttribCount=0;this._vref=this._fref=this._relink=this.vertShader=this.fragShader=this.program=this.attributes=this.uniforms=this.types=null}function g(b,a){return b.name<a.name?-1:1}var h=a("./lib/create-uniforms"),e=a("./lib/create-attributes"),n=a("./lib/reflect"),b=a("./lib/shader-cache"),l=a("./lib/runtime-reflect"),u=a("./lib/GLError");a=p.prototype;a.bind=function(){this.program||this._relink();var b,a=this.gl.getProgramParameter(this.program,
this.gl.ACTIVE_ATTRIBUTES),f=this.gl.lastAttribCount;if(a>f)for(b=f;b<a;b++)this.gl.enableVertexAttribArray(b);else if(f>a)for(b=a;b<f;b++)this.gl.disableVertexAttribArray(b);this.gl.lastAttribCount=a;this.gl.useProgram(this.program)};a.dispose=function(){for(var b=this.gl.lastAttribCount,a=0;a<b;a++)this.gl.disableVertexAttribArray(a);this.gl.lastAttribCount=0;this._fref&&this._fref.dispose();this._vref&&this._vref.dispose();this.attributes=this.types=this.vertShader=this.fragShader=this.program=
this._relink=this._fref=this._vref=null};a.update=function(a,d,f,c){function k(){q.program=b.program(p,q._vref,q._fref,A,y);for(var a=0;a<f.length;++a)D[a]=p.getUniformLocation(q.program,f[a].name)}if(!d||1===arguments.length){var r=a;a=r.vertex;d=r.fragment;f=r.uniforms;c=r.attributes}var q=this,p=q.gl;r=q._vref;q._vref=b.shader(p,p.VERTEX_SHADER,a);r&&r.dispose();q.vertShader=q._vref.shader;r=this._fref;q._fref=b.shader(p,p.FRAGMENT_SHADER,d);r&&r.dispose();q.fragShader=q._fref.shader;if(!f||!c){r=
p.createProgram();p.attachShader(r,q.fragShader);p.attachShader(r,q.vertShader);p.linkProgram(r);if(!p.getProgramParameter(r,p.LINK_STATUS))throw r=p.getProgramInfoLog(r),new u(r,"Error linking program:"+r);f=f||l.uniforms(p,r);c=c||l.attributes(p,r);p.deleteProgram(r)}c=c.slice();c.sort(g);r=[];var A=[],y=[],w;for(w=0;w<c.length;++w){var x=c[w];if(0<=x.type.indexOf("mat")){for(var m=x.type.charAt(x.type.length-1)|0,t=Array(m),C=0;C<m;++C)t[C]=y.length,A.push(x.name+"["+C+"]"),"number"===typeof x.location?
y.push(x.location+C):Array.isArray(x.location)&&x.location.length===m&&"number"===typeof x.location[C]?y.push(x.location[C]|0):y.push(-1);r.push({name:x.name,type:x.type,locations:t})}else r.push({name:x.name,type:x.type,locations:[y.length]}),A.push(x.name),"number"===typeof x.location?y.push(x.location|0):y.push(-1)}for(w=x=0;w<y.length;++w)if(0>y[w]){for(;0<=y.indexOf(x);)x+=1;y[w]=x}var D=Array(f.length);k();q._relink=k;q.types={uniforms:n(f),attributes:n(c)};q.attributes=e(p,q,r,y);Object.defineProperty(q,
"uniforms",h(p,q,f,D))};t.exports=function(b,a,f,c,e){b=new p(b);b.update(a,f,c,e);return b}},{"./lib/GLError":298,"./lib/create-attributes":299,"./lib/create-uniforms":300,"./lib/reflect":301,"./lib/runtime-reflect":302,"./lib/shader-cache":303}],298:[function(a,t,m){function p(a,h,e){this.shortMessage=h||"";this.longMessage=e||"";this.rawError=a||"";this.message="gl-shader: "+(h||a||"")+(e?"\n"+e:"");this.stack=Error().stack}p.prototype=Error();p.prototype.name="GLError";p.prototype.constructor=
p;t.exports=p},{}],299:[function(a,t,m){function p(a,b,e,g,h,d){this._gl=a;this._wrapper=b;this._index=e;this._locations=g;this._dimension=h;this._constFunc=d}function g(a,b,e,g,h,d,f){for(var c=["gl","v"],k=[],r=0;r<h;++r)c.push("x"+r),k.push("x"+r);c.push("if(x0.length\x3d\x3d\x3dvoid 0){return gl.vertexAttrib"+h+"f(v,"+k.join()+")}else{return gl.vertexAttrib"+h+"fv(v,x0)}");var l=Function.apply(null,c),n=new p(a,b,e,g,h,l);Object.defineProperty(d,f,{set:function(b){a.disableVertexAttribArray(g[e]);
l(a,g[e],b);return b},get:function(){return n},enumerable:!0})}function h(a,b,e,h,q,d,f){for(var c=Array(q),k=Array(q),r=0;r<q;++r)g(a,b,e[r],h,q,c,r),k[r]=c[r];Object.defineProperty(c,"location",{set:function(b){if(Array.isArray(b))for(var a=0;a<q;++a)k[a].location=b[a];else for(a=0;a<q;++a)k[a].location=b+a;return b},get:function(){for(var b=Array(q),a=0;a<q;++a)b[a]=h[e[a]];return b},enumerable:!0});c.pointer=function(b,c,d,f){b=b||a.FLOAT;c=!!c;d=d||q*q;f=f||0;for(var k=0;k<q;++k){var g=h[e[k]];
a.vertexAttribPointer(g,q,b,c,d,f+k*q);a.enableVertexAttribArray(g)}};var l=Array(q),n=a["vertexAttrib"+q+"fv"];Object.defineProperty(d,f,{set:function(b){for(var c=0;c<q;++c){var d=h[e[c]];a.disableVertexAttribArray(d);if(Array.isArray(b[0]))n.call(a,d,b[c]);else{for(var f=0;f<q;++f)l[f]=b[q*c+f];n.call(a,d,l)}}return b},get:function(){return c},enumerable:!0})}t.exports=function(a,b,l,u){for(var n={},d=0,f=l.length;d<f;++d){var c=l[d],k=c.name,r=c.type;c=c.locations;switch(r){case "bool":case "int":case "float":g(a,
b,c[0],u,1,n,k);break;default:if(0<=r.indexOf("vec")){var p=r.charCodeAt(r.length-1)-48;if(2>p||4<p)throw new e("","Invalid data type for attribute "+k+": "+r);g(a,b,c[0],u,p,n,k)}else if(0<=r.indexOf("mat")){p=r.charCodeAt(r.length-1)-48;if(2>p||4<p)throw new e("","Invalid data type for attribute "+k+": "+r);h(a,b,c,u,p,n,k)}else throw new e("","Unknown data type for attribute "+k+": "+r);}}return n};var e=a("./GLError");a=p.prototype;a.pointer=function(a,b,e,g){var h=this._gl,d=this._locations[this._index];
h.vertexAttribPointer(d,this._dimension,a||h.FLOAT,!!b,e||0,g||0);h.enableVertexAttribArray(d)};a.set=function(a,b,e,g){return this._constFunc(this._locations[this._index],a,b,e,g)};Object.defineProperty(a,"location",{get:function(){return this._locations[this._index]},set:function(a){a!==this._locations[this._index]&&(this._locations[this._index]=a|0,this._wrapper.program=null);return a|0}})},{"./GLError":298}],300:[function(a,t,m){function p(a){return(new Function("y","return function(){return y}"))(a)}
function g(a,b){for(var e=Array(a),g=0;g<a;++g)e[g]=b;return e}var h=a("./reflect"),e=a("./GLError");t.exports=function(a,b,l,u){function n(b,a,c){switch(c){case "bool":case "int":case "sampler2D":case "samplerCube":return"gl.uniform1i(locations["+a+"],obj"+b+")";case "float":return"gl.uniform1f(locations["+a+"],obj"+b+")";default:var d=c.indexOf("vec");if(0<=d&&1>=d&&c.length===4+d){d=c.charCodeAt(c.length-1)-48;if(2>d||4<d)throw new e("","Invalid data type");switch(c.charAt(0)){case "b":case "i":return"gl.uniform"+
d+"iv(locations["+a+"],obj"+b+")";case "v":return"gl.uniform"+d+"fv(locations["+a+"],obj"+b+")";default:throw new e("","Unrecognized data type for vector "+name+": "+c);}}else{if(0===c.indexOf("mat")&&4===c.length){d=c.charCodeAt(c.length-1)-48;if(2>d||4<d)throw new e("","Invalid uniform dimension type for matrix "+name+": "+c);return"gl.uniformMatrix"+d+"fv(locations["+a+"],false,obj"+b+")"}throw new e("","Unknown uniform data type for "+name+": "+c);}}}function d(b,a){if("object"!==typeof a)return[[b,
a]];var c=[],f;for(f in a){var e=a[f],k=b;k=parseInt(f)+""===f?k+("["+f+"]"):k+("."+f);"object"===typeof e?c.push.apply(c,d(k,e)):c.push([k,e])}return c}function f(b){var c=["return function updateProperty(obj){"];b=d("",b);for(var f=0;f<b.length;++f){var e=b[f],k=e[0];e=e[1];u[e]&&c.push(n(k,e,l[e].type))}c.push("return obj}");return(new Function("gl","locations",c.join("\n")))(a,u)}function c(b){switch(b){case "bool":return!1;case "int":case "sampler2D":case "samplerCube":return 0;case "float":return 0;
default:var a=b.indexOf("vec");if(0<=a&&1>=a&&b.length===4+a){a=b.charCodeAt(b.length-1)-48;if(2>a||4<a)throw new e("","Invalid data type");return"b"===b.charAt(0)?g(a,!1):g(a,0)}if(0===b.indexOf("mat")&&4===b.length){a=b.charCodeAt(b.length-1)-48;if(2>a||4<a)throw new e("","Invalid uniform dimension type for matrix "+name+": "+b);return g(a*a,0)}throw new e("","Unknown uniform data type for "+name+": "+b);}}function k(d,e,k){if("object"===typeof k){var g=r(k);Object.defineProperty(d,e,{get:p(g),
set:f(k),enumerable:!0,configurable:!1})}else u[k]?Object.defineProperty(d,e,{get:(new Function("gl","wrapper","locations","return function(){return gl.getUniform(wrapper.program,locations["+k+"])}"))(a,b,u),set:f(k),enumerable:!0,configurable:!1}):d[e]=c(l[k].type)}function r(b){if(Array.isArray(b)){var a=Array(b.length);for(var c=0;c<b.length;++c)k(a,c,b[c])}else for(c in a={},b)k(a,c,b[c]);return a}var v=h(l,!0);return{get:p(r(v)),set:f(v),enumerable:!0,configurable:!0}}},{"./GLError":298,"./reflect":301}],
301:[function(a,t,m){t.exports=function(a,g){for(var h={},e=0;e<a.length;++e)for(var n=a[e].name.split("."),b=h,l=0;l<n.length;++l){var u=n[l].split("[");if(1<u.length){u[0]in b||(b[u[0]]=[]);b=b[u[0]];for(var q=1;q<u.length;++q){var d=parseInt(u[q]);q<u.length-1||l<n.length-1?(d in b||(b[d]=q<u.length-1?[]:{}),b=b[d]):b[d]=g?e:a[e].type}}else l<n.length-1?(u[0]in b||(b[u[0]]={}),b=b[u[0]]):b[u[0]]=g?e:a[e].type}return h}},{}],302:[function(a,t,m){function p(a,n){if(!h){var b=Object.keys(g);h={};
for(var e=0;e<b.length;++e){var u=b[e];h[a[u]]=g[u]}}return h[n]}m.uniforms=function(a,g){for(var b=a.getProgramParameter(g,a.ACTIVE_UNIFORMS),e=[],h=0;h<b;++h){var n=a.getActiveUniform(g,h);if(n){var d=p(a,n.type);if(1<n.size)for(var f=0;f<n.size;++f)e.push({name:n.name.replace("[0]","["+f+"]"),type:d});else e.push({name:n.name,type:d})}}return e};m.attributes=function(a,g){for(var b=a.getProgramParameter(g,a.ACTIVE_ATTRIBUTES),e=[],h=0;h<b;++h){var n=a.getActiveAttrib(g,h);n&&e.push({name:n.name,
type:p(a,n.type)})}return e};var g={FLOAT:"float",FLOAT_VEC2:"vec2",FLOAT_VEC3:"vec3",FLOAT_VEC4:"vec4",INT:"int",INT_VEC2:"ivec2",INT_VEC3:"ivec3",INT_VEC4:"ivec4",BOOL:"bool",BOOL_VEC2:"bvec2",BOOL_VEC3:"bvec3",BOOL_VEC4:"bvec4",FLOAT_MAT2:"mat2",FLOAT_MAT3:"mat3",FLOAT_MAT4:"mat4",SAMPLER_2D:"sampler2D",SAMPLER_CUBE:"samplerCube"},h=null},{}],303:[function(a,t,m){function p(b,a,d,f,c,e,g){this.id=b;this.src=a;this.type=d;this.shader=f;this.count=e;this.programs=[];this.cache=g}function g(b){this.gl=
b;this.shaders=[{},{}];this.programs={}}function h(a){var e=b.get(a);e||(e=new g(a),b.set(a,e));return e}m.shader=function(b,a,d){return h(b).getShaderReference(a,d)};m.program=function(b,a,d,f,c){return h(b).getProgram(a,d,f,c)};var e=a("./GLError"),n=a("gl-format-compiler-error"),b=new ("undefined"===typeof WeakMap?a("weakmap-shim"):WeakMap),l=0;p.prototype.dispose=function(){if(0===--this.count){for(var b=this.cache,a=b.gl,d=this.programs,f=0,c=d.length;f<c;++f){var e=b.programs[d[f]];e&&(delete b.programs[f],
a.deleteProgram(e))}a.deleteShader(this.shader);delete b.shaders[this.type===a.FRAGMENT_SHADER|0][this.src]}};a=g.prototype;a.getShaderReference=function(b,a){var d=this.gl,f=this.shaders[b===d.FRAGMENT_SHADER|0],c=f[a];if(c&&d.isShader(c.shader))c.count+=1;else{c=d.createShader(b);d.shaderSource(c,a);d.compileShader(c);if(!d.getShaderParameter(c,d.COMPILE_STATUS)){d=d.getShaderInfoLog(c);try{var k=n(d,a,b)}catch(r){throw console.warn("Failed to format compiler error: "+r),new e(d,"Error compiling shader:\n"+
d);}throw new e(d,k.short,k.long);}c=f[a]=new p(l++,a,b,c,[],1,this)}return c};a.getProgram=function(b,a,d,f){var c=[b.id,a.id,d.join(":"),f.join(":")].join("@"),k=this.programs[c];if(!k||!this.gl.isProgram(k)){k=this.programs;var g=this.gl,h=b.shader,l=a.shader,n=g.createProgram();g.attachShader(n,h);g.attachShader(n,l);for(h=0;h<d.length;++h)g.bindAttribLocation(n,f[h],d[h]);g.linkProgram(n);if(!g.getProgramParameter(n,g.LINK_STATUS))throw b=g.getProgramInfoLog(n),new e(b,"Error linking program: "+
b);k[c]=k=n;b.programs.push(c);a.programs.push(c)}return k}},{"./GLError":298,"gl-format-compiler-error":246,"weakmap-shim":539}],304:[function(a,t,m){function p(a){this.plot=a;this.enable=[!0,!0,!1,!1];this.width=[1,1,1,1];this.color=[[0,0,0,1],[0,0,0,1],[0,0,0,1],[0,0,0,1]];this.center=[Infinity,Infinity]}t.exports=function(a,h){var e=new p(a);e.update(h);a.addOverlay(e);return e};a=p.prototype;a.update=function(a){a=a||{};this.enable=(a.enable||[!0,!0,!1,!1]).slice();this.width=(a.width||[1,1,
1,1]).slice();this.color=(a.color||[[0,0,0,1],[0,0,0,1],[0,0,0,1],[0,0,0,1]]).map(function(a){return a.slice()});this.center=(a.center||[Infinity,Infinity]).slice();this.plot.setOverlayDirty()};a.draw=function(){var a=this.enable,h=this.width,e=this.color,n=this.center,b=this.plot,l=b.line,u=b.dataBox;b=b.viewBox;l.bind();if(u[0]<=n[0]&&n[0]<=u[2]&&u[1]<=n[1]&&n[1]<=u[3]){var q=b[0]+(n[0]-u[0])/(u[2]-u[0])*(b[2]-b[0]);n=b[1]+(n[1]-u[1])/(u[3]-u[1])*(b[3]-b[1]);a[0]&&l.drawLine(q,n,b[0],n,h[0],e[0]);
a[1]&&l.drawLine(q,n,q,b[1],h[1],e[1]);a[2]&&l.drawLine(q,n,b[2],n,h[2],e[2]);a[3]&&l.drawLine(q,n,q,b[3],h[3],e[3])}};a.dispose=function(){this.plot.removeOverlay(this)}},{}],305:[function(a,t,m){m=a("glslify");var p=a("gl-shader"),g=m(["precision mediump float;\n#define GLSLIFY 1\n\nattribute vec3 position, color;\nattribute float weight;\n\nuniform mat4 model, view, projection;\nuniform vec3 coordinates[3];\nuniform vec4 colors[3];\nuniform vec2 screenShape;\nuniform float lineWidth;\n\nvarying vec4 fragColor;\n\nvoid main() {\n  vec3 vertexPosition \x3d mix(coordinates[0],\n    mix(coordinates[2], coordinates[1], 0.5 * (position + 1.0)), abs(position));\n\n  vec4 clipPos \x3d projection * view * model * vec4(vertexPosition, 1.0);\n  vec2 clipOffset \x3d (projection * view * model * vec4(color, 0.0)).xy;\n  vec2 delta \x3d weight * clipOffset * screenShape;\n  vec2 lineOffset \x3d normalize(vec2(delta.y, -delta.x)) / screenShape;\n\n  gl_Position   \x3d vec4(clipPos.xy + clipPos.w * 0.5 * lineWidth * lineOffset, clipPos.z, clipPos.w);\n  fragColor     \x3d color.x * colors[0] + color.y * colors[1] + color.z * colors[2];\n}\n"]),
h=m(["precision mediump float;\n#define GLSLIFY 1\n\nvarying vec4 fragColor;\n\nvoid main() {\n  gl_FragColor \x3d fragColor;\n}"]);t.exports=function(a){return p(a,g,h,null,[{name:"position",type:"vec3"},{name:"color",type:"vec3"},{name:"weight",type:"float"}])}},{"gl-shader":297,glslify:401}],306:[function(a,t,m){function p(b,a,f,c){this.gl=b;this.buffer=a;this.vao=f;this.shader=c;this.pixelRatio=1;this.bounds=[[-1E3,-1E3,-1E3],[1E3,1E3,1E3]];this.position=[0,0,0];this.lineWidth=[2,2,2];this.colors=
[[0,0,0,1],[0,0,0,1],[0,0,0,1]];this.enabled=[!0,!0,!0];this.drawSides=[!0,!0,!0];this.axes=null}var g=a("gl-buffer"),h=a("gl-vao"),e=a("./shaders/index");t.exports=function(b,a){function d(b,a,d,f,e,k){b=[b,a,d,0,0,0,1];b[f+3]=1;b[f]=e;c.push.apply(c,b);b[6]=-1;c.push.apply(c,b);b[f]=k;c.push.apply(c,b);c.push.apply(c,b);b[6]=1;c.push.apply(c,b);b[f]=e;c.push.apply(c,b)}var c=[];d(0,0,0,0,0,1);d(0,0,0,1,0,1);d(0,0,0,2,0,1);d(1,0,0,1,-1,1);d(1,0,0,2,-1,1);d(0,1,0,0,-1,1);d(0,1,0,2,-1,1);d(0,0,1,0,
-1,1);d(0,0,1,1,-1,1);var k=g(b,c),r=h(b,[{type:b.FLOAT,buffer:k,size:3,offset:0,stride:28},{type:b.FLOAT,buffer:k,size:3,offset:12,stride:28},{type:b.FLOAT,buffer:k,size:1,offset:24,stride:28}]),l=e(b);l.attributes.position.location=0;l.attributes.color.location=1;l.attributes.weight.location=2;b=new p(b,k,r,l);b.update(a);return b};var n=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1];a=p.prototype;var b=[0,0,0],l=[0,0,0],u=[0,0];a.isTransparent=function(){return!1};a.drawTransparent=function(b){};a.draw=function(a){var d=
this.gl,f=this.vao,c=this.shader;f.bind();c.bind();var e=a.model||n,g=a.view||n;a=a.projection||n;if(this.axes)var h=this.axes.lastCubeProps.axis;for(var q=0;3>q;++q)h&&0>h[q]?(b[q]=this.bounds[0][q],l[q]=this.bounds[1][q]):(b[q]=this.bounds[1][q],l[q]=this.bounds[0][q]);u[0]=d.drawingBufferWidth;u[1]=d.drawingBufferHeight;c.uniforms.model=e;c.uniforms.view=g;c.uniforms.projection=a;c.uniforms.coordinates=[this.position,b,l];c.uniforms.colors=this.colors;c.uniforms.screenShape=u;for(q=0;3>q;++q)c.uniforms.lineWidth=
this.lineWidth[q]*this.pixelRatio,this.enabled[q]&&(f.draw(d.TRIANGLES,6,6*q),this.drawSides[q]&&f.draw(d.TRIANGLES,12,18+12*q));f.unbind()};a.update=function(b){b&&("bounds"in b&&(this.bounds=b.bounds),"position"in b&&(this.position=b.position),"lineWidth"in b&&(this.lineWidth=b.lineWidth),"colors"in b&&(this.colors=b.colors),"enabled"in b&&(this.enabled=b.enabled),"drawSides"in b&&(this.drawSides=b.drawSides))};a.dispose=function(){this.vao.dispose();this.buffer.dispose();this.shader.dispose()}},
{"./shaders/index":305,"gl-buffer":237,"gl-vao":319}],307:[function(a,t,m){var p=a("glslify");a=p(["precision highp float;\n\nprecision highp float;\n#define GLSLIFY 1\n\nvec3 getOrthogonalVector(vec3 v) {\n  // Return up-vector for only-z vector.\n  // Return ax + by + cz \x3d 0, a point that lies on the plane that has v as a normal and that isn't (0,0,0).\n  // From the above if-statement we have ||a|| \x3e 0  U  ||b|| \x3e 0.\n  // Assign z \x3d 0, x \x3d -b, y \x3d a:\n  // a*-b + b*a + c*0 \x3d -ba + ba + 0 \x3d 0\n  if (v.x*v.x \x3e v.z*v.z || v.y*v.y \x3e v.z*v.z) {\n    return normalize(vec3(-v.y, v.x, 0.0));\n  } else {\n    return normalize(vec3(0.0, v.z, -v.y));\n  }\n}\n\n// Calculate the tube vertex and normal at the given index.\n//\n// The returned vertex is for a tube ring with its center at origin, radius of length(d), pointing in the direction of d.\n//\n// Each tube segment is made up of a ring of vertices.\n// These vertices are used to make up the triangles of the tube by connecting them together in the vertex array.\n// The indexes of tube segments run from 0 to 8.\n//\nvec3 getTubePosition(vec3 d, float index, out vec3 normal) {\n  float segmentCount \x3d 8.0;\n\n  float angle \x3d 2.0 * 3.14159 * (index / segmentCount);\n\n  vec3 u \x3d getOrthogonalVector(d);\n  vec3 v \x3d normalize(cross(u, d));\n\n  vec3 x \x3d u * cos(angle) * length(d);\n  vec3 y \x3d v * sin(angle) * length(d);\n  vec3 v3 \x3d x + y;\n\n  normal \x3d normalize(v3);\n\n  return v3;\n}\n\nattribute vec4 vector;\nattribute vec4 color, position;\nattribute vec2 uv;\nuniform float vectorScale;\nuniform float tubeScale;\n\nuniform mat4 model\n           , view\n           , projection\n           , inverseModel;\nuniform vec3 eyePosition\n           , lightPosition;\n\nvarying vec3 f_normal\n           , f_lightDirection\n           , f_eyeDirection\n           , f_data\n           , f_position;\nvarying vec4 f_color;\nvarying vec2 f_uv;\n\nvoid main() {\n  // Scale the vector magnitude to stay constant with\n  // model \x26 view changes.\n  vec3 normal;\n  vec3 XYZ \x3d getTubePosition(mat3(model) * (tubeScale * vector.w * normalize(vector.xyz)), position.w, normal);\n  vec4 tubePosition \x3d model * vec4(position.xyz, 1.0) + vec4(XYZ, 0.0);\n\n  //Lighting geometry parameters\n  vec4 cameraCoordinate \x3d view * tubePosition;\n  cameraCoordinate.xyz /\x3d cameraCoordinate.w;\n  f_lightDirection \x3d lightPosition - cameraCoordinate.xyz;\n  f_eyeDirection   \x3d eyePosition - cameraCoordinate.xyz;\n  f_normal \x3d normalize((vec4(normal,0.0) * inverseModel).xyz);\n\n  // vec4 m_position  \x3d model * vec4(tubePosition, 1.0);\n  vec4 t_position  \x3d view * tubePosition;\n  gl_Position      \x3d projection * t_position;\n\n  f_color          \x3d color;\n  f_data           \x3d tubePosition.xyz;\n  f_position       \x3d position.xyz;\n  f_uv             \x3d uv;\n}\n"]);
t=p(["#extension GL_OES_standard_derivatives : enable\n\nprecision highp float;\n#define GLSLIFY 1\n\nfloat beckmannDistribution(float x, float roughness) {\n  float NdotH \x3d max(x, 0.0001);\n  float cos2Alpha \x3d NdotH * NdotH;\n  float tan2Alpha \x3d (cos2Alpha - 1.0) / cos2Alpha;\n  float roughness2 \x3d roughness * roughness;\n  float denom \x3d 3.141592653589793 * roughness2 * cos2Alpha * cos2Alpha;\n  return exp(tan2Alpha / roughness2) / denom;\n}\n\nfloat cookTorranceSpecular(\n  vec3 lightDirection,\n  vec3 viewDirection,\n  vec3 surfaceNormal,\n  float roughness,\n  float fresnel) {\n\n  float VdotN \x3d max(dot(viewDirection, surfaceNormal), 0.0);\n  float LdotN \x3d max(dot(lightDirection, surfaceNormal), 0.0);\n\n  //Half angle vector\n  vec3 H \x3d normalize(lightDirection + viewDirection);\n\n  //Geometric term\n  float NdotH \x3d max(dot(surfaceNormal, H), 0.0);\n  float VdotH \x3d max(dot(viewDirection, H), 0.000001);\n  float LdotH \x3d max(dot(lightDirection, H), 0.000001);\n  float G1 \x3d (2.0 * NdotH * VdotN) / VdotH;\n  float G2 \x3d (2.0 * NdotH * LdotN) / LdotH;\n  float G \x3d min(1.0, min(G1, G2));\n  \n  //Distribution term\n  float D \x3d beckmannDistribution(NdotH, roughness);\n\n  //Fresnel term\n  float F \x3d pow(1.0 - VdotN, fresnel);\n\n  //Multiply terms and done\n  return  G * F * D / max(3.14159265 * VdotN, 0.000001);\n}\n\nbool outOfRange(float a, float b, float p) {\n  return ((p \x3e max(a, b)) || \n          (p \x3c min(a, b)));\n}\n\nbool outOfRange(vec2 a, vec2 b, vec2 p) {\n  return (outOfRange(a.x, b.x, p.x) ||\n          outOfRange(a.y, b.y, p.y));\n}\n\nbool outOfRange(vec3 a, vec3 b, vec3 p) {\n  return (outOfRange(a.x, b.x, p.x) ||\n          outOfRange(a.y, b.y, p.y) ||\n          outOfRange(a.z, b.z, p.z));\n}\n\nbool outOfRange(vec4 a, vec4 b, vec4 p) {\n  return outOfRange(a.xyz, b.xyz, p.xyz);\n}\n\nuniform vec3 clipBounds[2];\nuniform float roughness\n            , fresnel\n            , kambient\n            , kdiffuse\n            , kspecular\n            , opacity;\nuniform sampler2D texture;\n\nvarying vec3 f_normal\n           , f_lightDirection\n           , f_eyeDirection\n           , f_data\n           , f_position;\nvarying vec4 f_color;\nvarying vec2 f_uv;\n\nvoid main() {\n  if (outOfRange(clipBounds[0], clipBounds[1], f_position)) discard;\n  vec3 N \x3d normalize(f_normal);\n  vec3 L \x3d normalize(f_lightDirection);\n  vec3 V \x3d normalize(f_eyeDirection);\n\n  if(gl_FrontFacing) {\n    N \x3d -N;\n  }\n\n  float specular \x3d min(1.0, max(0.0, cookTorranceSpecular(L, V, N, roughness, fresnel)));\n  float diffuse  \x3d min(kambient + kdiffuse * max(dot(N, L), 0.0), 1.0);\n\n  vec4 surfaceColor \x3d f_color * texture2D(texture, f_uv);\n  vec4 litColor \x3d surfaceColor.a * vec4(diffuse * surfaceColor.rgb + kspecular * vec3(1,1,1) * specular,  1.0);\n\n  gl_FragColor \x3d litColor * opacity;\n}\n"]);
var g=p(["precision highp float;\n\nprecision highp float;\n#define GLSLIFY 1\n\nvec3 getOrthogonalVector(vec3 v) {\n  // Return up-vector for only-z vector.\n  // Return ax + by + cz \x3d 0, a point that lies on the plane that has v as a normal and that isn't (0,0,0).\n  // From the above if-statement we have ||a|| \x3e 0  U  ||b|| \x3e 0.\n  // Assign z \x3d 0, x \x3d -b, y \x3d a:\n  // a*-b + b*a + c*0 \x3d -ba + ba + 0 \x3d 0\n  if (v.x*v.x \x3e v.z*v.z || v.y*v.y \x3e v.z*v.z) {\n    return normalize(vec3(-v.y, v.x, 0.0));\n  } else {\n    return normalize(vec3(0.0, v.z, -v.y));\n  }\n}\n\n// Calculate the tube vertex and normal at the given index.\n//\n// The returned vertex is for a tube ring with its center at origin, radius of length(d), pointing in the direction of d.\n//\n// Each tube segment is made up of a ring of vertices.\n// These vertices are used to make up the triangles of the tube by connecting them together in the vertex array.\n// The indexes of tube segments run from 0 to 8.\n//\nvec3 getTubePosition(vec3 d, float index, out vec3 normal) {\n  float segmentCount \x3d 8.0;\n\n  float angle \x3d 2.0 * 3.14159 * (index / segmentCount);\n\n  vec3 u \x3d getOrthogonalVector(d);\n  vec3 v \x3d normalize(cross(u, d));\n\n  vec3 x \x3d u * cos(angle) * length(d);\n  vec3 y \x3d v * sin(angle) * length(d);\n  vec3 v3 \x3d x + y;\n\n  normal \x3d normalize(v3);\n\n  return v3;\n}\n\nattribute vec4 vector;\nattribute vec4 position;\nattribute vec4 id;\n\nuniform mat4 model, view, projection;\nuniform float tubeScale;\n\nvarying vec3 f_position;\nvarying vec4 f_id;\n\nvoid main() {\n  vec3 normal;\n  vec3 XYZ \x3d getTubePosition(mat3(model) * (tubeScale * vector.w * normalize(vector.xyz)), position.w, normal);\n  vec4 tubePosition \x3d model * vec4(position.xyz, 1.0) + vec4(XYZ, 0.0);\n\n  gl_Position \x3d projection * view * tubePosition;\n  f_id        \x3d id;\n  f_position  \x3d position.xyz;\n}\n"]);
p=p(["precision highp float;\n#define GLSLIFY 1\n\nbool outOfRange(float a, float b, float p) {\n  return ((p \x3e max(a, b)) || \n          (p \x3c min(a, b)));\n}\n\nbool outOfRange(vec2 a, vec2 b, vec2 p) {\n  return (outOfRange(a.x, b.x, p.x) ||\n          outOfRange(a.y, b.y, p.y));\n}\n\nbool outOfRange(vec3 a, vec3 b, vec3 p) {\n  return (outOfRange(a.x, b.x, p.x) ||\n          outOfRange(a.y, b.y, p.y) ||\n          outOfRange(a.z, b.z, p.z));\n}\n\nbool outOfRange(vec4 a, vec4 b, vec4 p) {\n  return outOfRange(a.xyz, b.xyz, p.xyz);\n}\n\nuniform vec3  clipBounds[2];\nuniform float pickId;\n\nvarying vec3 f_position;\nvarying vec4 f_id;\n\nvoid main() {\n  if (outOfRange(clipBounds[0], clipBounds[1], f_position)) discard;\n\n  gl_FragColor \x3d vec4(pickId, f_id.xyz);\n}"]);
m.meshShader={vertex:a,fragment:t,attributes:[{name:"position",type:"vec4"},{name:"normal",type:"vec3"},{name:"color",type:"vec4"},{name:"uv",type:"vec2"},{name:"vector",type:"vec4"}]};m.pickShader={vertex:g,fragment:p,attributes:[{name:"position",type:"vec4"},{name:"id",type:"vec4"},{name:"vector",type:"vec4"}]}},{glslify:401}],308:[function(a,t,m){function p(b,a,c,d,f,e,k,g,r,h,l,n,q,u,p,v,m,t,R,T,P,S,ba,da){this.gl=b;this.cells=[];this.positions=[];this.intensity=[];this.texture=a;this.dirty=!0;
this.triShader=c;this.pickShader=d;this.trianglePositions=f;this.triangleVectors=e;this.triangleColors=g;this.triangleNormals=h;this.triangleUVs=r;this.triangleIds=k;this.triangleVAO=l;this.triangleCount=0;this.lineWidth=1;this.edgePositions=n;this.edgeColors=u;this.edgeUVs=p;this.edgeIds=q;this.edgeVAO=v;this.edgeCount=0;this.pointPositions=m;this.pointColors=R;this.pointUVs=T;this.pointSizes=P;this.pointIds=t;this.pointVAO=S;this.pointCount=0;this.contourLineWidth=1;this.contourPositions=ba;this.contourVAO=
da;this.contourCount=0;this.contourColor=[0,0,0];this.contourEnable=!1;this.pickId=1;this.bounds=[[Infinity,Infinity,Infinity],[-Infinity,-Infinity,-Infinity]];this.clipBounds=[[-Infinity,-Infinity,-Infinity],[Infinity,Infinity,Infinity]];this.lightPosition=[1E5,1E5,0];this.diffuseLight=this.ambientLight=.8;this.specularLight=2;this.roughness=.5;this.fresnel=1.5;this.tubeScale=this.opacity=1;this._projection=this._view=this._model=z;this._resolution=[1,1];this.pixelRatio=1}function g(b){b=f({colormap:b,
nshades:256,format:"rgba"});for(var a=new Uint8Array(1024),c=0;256>c;++c){for(var e=b[c],k=0;3>k;++k)a[4*c+k]=e[k];a[4*c+3]=255*e[3]}return d(a,[256,256,4],[4,0,1])}var h=a("gl-shader"),e=a("gl-buffer"),n=a("gl-vao"),b=a("gl-texture2d"),l=a("normals"),u=a("gl-mat4/multiply"),q=a("gl-mat4/invert"),d=a("ndarray"),f=a("colormap"),c=a("simplicial-complex-contour"),k=a("typedarray-pool");a=a("./shaders");var r=a.meshShader,v=a.pickShader,z=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1];a=p.prototype;a.isOpaque=function(){return 1<=
this.opacity};a.isTransparent=function(){return 1>this.opacity};a.pickSlots=1;a.setPickBase=function(b){this.pickId=b};a.highlight=function(b){if(b&&this.contourEnable){var a=c(this.cells,this.intensity,b.intensity);b=a.cells;var d=a.vertexIds;a=a.vertexWeights;for(var f=b.length,e=k.mallocFloat32(6*f),g=0,r=0;r<f;++r)for(var h=b[r],l=0;2>l;++l){var n=h[0];2===h.length&&(n=h[l]);var q=a[n],u=1-q,p=this.positions[d[n][0]];n=this.positions[d[n][1]];for(var v=0;3>v;++v)e[g++]=q*p[v]+u*n[v]}this.contourCount=
g/3|0;this.contourPositions.update(e.subarray(0,g));k.free(e)}else this.contourCount=0};a.update=function(a){a=a||{};var c=this.gl;this.dirty=!0;"contourEnable"in a&&(this.contourEnable=a.contourEnable);"contourColor"in a&&(this.contourColor=a.contourColor);"lineWidth"in a&&(this.lineWidth=a.lineWidth);"lightPosition"in a&&(this.lightPosition=a.lightPosition);"opacity"in a&&(this.opacity=a.opacity);"ambient"in a&&(this.ambientLight=a.ambient);"diffuse"in a&&(this.diffuseLight=a.diffuse);"specular"in
a&&(this.specularLight=a.specular);"roughness"in a&&(this.roughness=a.roughness);"fresnel"in a&&(this.fresnel=a.fresnel);a.texture?(this.texture.dispose(),this.texture=b(c,a.texture)):a.colormap&&(this.texture.shape=[256,256],this.texture.minFilter=c.LINEAR_MIPMAP_LINEAR,this.texture.magFilter=c.LINEAR,this.texture.setPixels(g(a.colormap)),this.texture.generateMipmap());c=a.cells;var d=a.positions,f=a.vectors;if(d&&c&&f){void 0!==a.tubeScale&&(this.tubeScale=a.tubeScale);var e=[],k=[],r=[],h=[],n=
[],q=[],u=[],p=[],v=[],z=[],A=[],m=[],t=[],O=[],R=[];this.cells=c;this.positions=d;this.vectors=f;var T=a.vertexNormals,P=a.cellNormals,S=void 0===a.vertexNormalsEpsilon?1E-6:a.vertexNormalsEpsilon,ba=void 0===a.faceNormalsEpsilon?1E-6:a.faceNormalsEpsilon;a.useFacetNormals&&!P&&(P=l.faceNormals(c,d,ba));P||T||(T=l.vertexNormals(c,d,S));S=a.vertexColors;ba=a.cellColors;var da=a.meshColor||[1,1,1,1],ca=a.vertexUVs,Y=a.vertexIntensity,W=a.cellUVs,ea=a.cellIntensity,U=Infinity,na=-Infinity;if(!ca&&!W)if(Y)if(a.vertexIntensityBounds)U=
+a.vertexIntensityBounds[0],na=+a.vertexIntensityBounds[1];else for(var X=0;X<Y.length;++X){var ha=Y[X];U=Math.min(U,ha);na=Math.max(na,ha)}else if(ea)for(X=0;X<ea.length;++X)ha=ea[X],U=Math.min(U,ha),na=Math.max(na,ha);else for(X=0;X<d.length;++X)ha=d[X][2],U=Math.min(U,ha),na=Math.max(na,ha);if(Y)this.intensity=Y;else if(ea){var fa=d.length;X=Array(fa);for(ha=0;ha<fa;++ha)X[ha]=0;fa=c.length;for(ha=0;ha<fa;++ha)for(var oa=c[ha],ua=0;ua<oa.length;++ua)X[oa[ua]]=ea[ha];this.intensity=X}else{X=d.length;
ha=Array(X);for(fa=0;fa<X;++fa)ha[fa]=d[fa][2];this.intensity=ha}ha=a.pointSizes;a=a.pointSize||1;this.bounds=[[Infinity,Infinity,Infinity],[-Infinity,-Infinity,-Infinity]];for(X=0;X<d.length;++X){var Z=d[X];for(fa=0;3>fa;++fa)!isNaN(Z[fa])&&isFinite(Z[fa])&&(this.bounds[0][fa]=Math.min(this.bounds[0][fa],Z[fa]),this.bounds[1][fa]=Math.max(this.bounds[1][fa],Z[fa]))}var qa=ua=oa=0;X=0;a:for(;X<c.length;++X){var sa=c[X];switch(sa.length){case 1:var V=sa[0];Z=d[V];for(fa=0;3>fa;++fa)if(isNaN(Z[fa])||
!isFinite(Z[fa]))continue a;A.push(Z[0],Z[1],Z[2],Z[3]);var ia=S?S[V]:ba?ba[X]:da;3===ia.length?m.push(ia[0],ia[1],ia[2],1):m.push(ia[0],ia[1],ia[2],ia[3]);Z=ca?ca[V]:Y?[(Y[V]-U)/(na-U),0]:W?W[X]:ea?[(ea[X]-U)/(na-U),0]:[(Z[2]-U)/(na-U),0];t.push(Z[0],Z[1]);ha?O.push(ha[V]):O.push(a);R.push(X);qa+=1;break;case 2:for(fa=0;2>fa;++fa)for(V=sa[fa],Z=d[V],V=0;3>V;++V)if(isNaN(Z[V])||!isFinite(Z[V]))continue a;for(fa=0;2>fa;++fa)V=sa[fa],Z=d[V],u.push(Z[0],Z[1],Z[2]),ia=S?S[V]:ba?ba[X]:da,3===ia.length?
p.push(ia[0],ia[1],ia[2],1):p.push(ia[0],ia[1],ia[2],ia[3]),Z=ca?ca[V]:Y?[(Y[V]-U)/(na-U),0]:W?W[X]:ea?[(ea[X]-U)/(na-U),0]:[(Z[2]-U)/(na-U),0],v.push(Z[0],Z[1]),z.push(X);ua+=1;break;case 3:for(fa=0;3>fa;++fa)for(V=sa[fa],Z=d[V],V=0;3>V;++V)if(isNaN(Z[V])||!isFinite(Z[V]))continue a;for(fa=0;3>fa;++fa)V=sa[2-fa],Z=d[V],e.push(Z[0],Z[1],Z[2],Z[3]),ia=f[V],k.push(ia[0],ia[1],ia[2],ia[3]),ia=S?S[V]:ba?ba[X]:da,3===ia.length?r.push(ia[0],ia[1],ia[2],1):r.push(ia[0],ia[1],ia[2],ia[3]),Z=ca?ca[V]:Y?[(Y[V]-
U)/(na-U),0]:W?W[X]:ea?[(ea[X]-U)/(na-U),0]:[(Z[2]-U)/(na-U),0],n.push(Z[0],Z[1]),Z=T?T[V]:P[X],h.push(Z[0],Z[1],Z[2]),q.push(X);oa+=1}}this.pointCount=qa;this.edgeCount=ua;this.triangleCount=oa;this.pointPositions.update(A);this.pointColors.update(m);this.pointUVs.update(t);this.pointSizes.update(O);this.pointIds.update(new Uint32Array(R));this.edgePositions.update(u);this.edgeColors.update(p);this.edgeUVs.update(v);this.edgeIds.update(new Uint32Array(z));this.trianglePositions.update(e);this.triangleVectors.update(k);
this.triangleColors.update(r);this.triangleUVs.update(n);this.triangleNormals.update(h);this.triangleIds.update(new Uint32Array(q))}};a.drawTransparent=a.draw=function(b){b=b||{};var a=this.gl,c=b.model||z,d=b.view||z,f=b.projection||z,e=[[-1E6,-1E6,-1E6],[1E6,1E6,1E6]];for(b=0;3>b;++b)e[0][b]=Math.max(e[0][b],this.clipBounds[0][b]),e[1][b]=Math.min(e[1][b],this.clipBounds[1][b]);c={model:c,view:d,projection:f,inverseModel:z.slice(),clipBounds:e,kambient:this.ambientLight,kdiffuse:this.diffuseLight,
kspecular:this.specularLight,roughness:this.roughness,fresnel:this.fresnel,eyePosition:[0,0,0],lightPosition:[0,0,0],opacity:this.opacity,tubeScale:this.tubeScale,contourColor:this.contourColor,texture:0};c.inverseModel=q(c.inverseModel,c.model);a.disable(a.CULL_FACE);this.texture.bind(0);d=Array(16);u(d,c.view,c.model);u(d,c.projection,d);q(d,d);for(b=0;3>b;++b)c.eyePosition[b]=d[12+b]/d[15];f=d[15];for(b=0;3>b;++b)f+=this.lightPosition[b]*d[4*b+3];for(b=0;3>b;++b){e=d[12+b];for(var k=0;3>k;++k)e+=
d[4*k+b]*this.lightPosition[k];c.lightPosition[b]=e/f}0<this.triangleCount&&(b=this.triShader,b.bind(),b.uniforms=c,this.triangleVAO.bind(),a.drawArrays(a.TRIANGLES,0,3*this.triangleCount),this.triangleVAO.unbind())};a.drawPick=function(b){b=b||{};var a=this.gl,c=b.model||z,d=b.view||z;b=b.projection||z;for(var f=[[-1E6,-1E6,-1E6],[1E6,1E6,1E6]],e=0;3>e;++e)f[0][e]=Math.max(f[0][e],this.clipBounds[0][e]),f[1][e]=Math.min(f[1][e],this.clipBounds[1][e]);this._model=[].slice.call(c);this._view=[].slice.call(d);
this._projection=[].slice.call(b);this._resolution=[a.drawingBufferWidth,a.drawingBufferHeight];c={model:c,view:d,projection:b,clipBounds:f,tubeScale:this.tubeScale,pickId:this.pickId/255};d=this.pickShader;d.bind();d.uniforms=c;0<this.triangleCount&&(this.triangleVAO.bind(),a.drawArrays(a.TRIANGLES,0,3*this.triangleCount),this.triangleVAO.unbind());0<this.edgeCount&&(this.edgeVAO.bind(),a.lineWidth(this.lineWidth*this.pixelRatio),a.drawArrays(a.LINES,0,2*this.edgeCount),this.edgeVAO.unbind())};a.pick=
function(b){if(!b||b.id!==this.pickId)return null;b=b.value[0]+256*b.value[1]+65536*b.value[2];var a=this.cells[b],c=this.positions[a[1]].slice(0,3),d=this.intensity[a[1]],f=this.vectors[a[1]].slice(0,3);return{index:b,position:c,intensity:d,velocity:f,divergence:this.vectors[a[1]][3],dataCoordinate:c}};a.dispose=function(){this.texture.dispose();this.triShader.dispose();this.pickShader.dispose();this.triangleVAO.dispose();this.trianglePositions.dispose();this.triangleVectors.dispose();this.triangleColors.dispose();
this.triangleUVs.dispose();this.triangleNormals.dispose();this.triangleIds.dispose();this.edgeVAO.dispose();this.edgePositions.dispose();this.edgeColors.dispose();this.edgeUVs.dispose();this.edgeIds.dispose();this.pointVAO.dispose();this.pointPositions.dispose();this.pointColors.dispose();this.pointUVs.dispose();this.pointSizes.dispose();this.pointIds.dispose();this.contourVAO.dispose();this.contourPositions.dispose()};t.exports=function(a,c){1===arguments.length&&(c=a,a=c.gl);var f;(f=c.triShader)||
(f=h(a,r.vertex,r.fragment,null,r.attributes),f.attributes.position.location=0,f.attributes.color.location=2,f.attributes.uv.location=3,f.attributes.vector.location=5);var k=h(a,v.vertex,v.fragment,null,v.attributes);k.attributes.position.location=0;k.attributes.id.location=1;k.attributes.vector.location=5;var g=b(a,d(new Uint8Array([255,255,255,255]),[1,1,4]));g.generateMipmap();g.minFilter=a.LINEAR_MIPMAP_LINEAR;g.magFilter=a.LINEAR;var l=e(a),q=e(a),u=e(a),z=e(a),A=e(a),y=e(a),m=n(a,[{buffer:l,
type:a.FLOAT,size:4},{buffer:y,type:a.UNSIGNED_BYTE,size:4,normalized:!0},{buffer:u,type:a.FLOAT,size:4},{buffer:z,type:a.FLOAT,size:2},{buffer:A,type:a.FLOAT,size:3},{buffer:q,type:a.FLOAT,size:4}]),t=e(a),J=e(a),L=e(a),M=e(a),N=n(a,[{buffer:t,type:a.FLOAT,size:3},{buffer:M,type:a.UNSIGNED_BYTE,size:4,normalized:!0},{buffer:J,type:a.FLOAT,size:4},{buffer:L,type:a.FLOAT,size:2}]),O=e(a),R=e(a),T=e(a),P=e(a),S=e(a),ba=n(a,[{buffer:O,type:a.FLOAT,size:3},{buffer:S,type:a.UNSIGNED_BYTE,size:4,normalized:!0},
{buffer:R,type:a.FLOAT,size:4},{buffer:T,type:a.FLOAT,size:2},{buffer:P,type:a.FLOAT,size:1}]),da=e(a),ca=n(a,[{buffer:da,type:a.FLOAT,size:3}]);f=new p(a,g,f,k,l,q,y,u,z,A,m,t,M,J,L,N,O,S,R,T,P,ba,da,ca);f.update(c);return f}},{"./shaders":307,colormap:116,"gl-buffer":237,"gl-mat4/invert":261,"gl-mat4/multiply":263,"gl-shader":297,"gl-texture2d":314,"gl-vao":319,ndarray:442,normals:445,"simplicial-complex-contour":502,"typedarray-pool":529}],309:[function(a,t,m){var p=a("gl-vec3"),g=a("gl-vec4"),
h=function(b,a,d,f){for(var c=0,e=0;e<b.length;e++)for(var k=b[e].velocities,r=0;r<k.length;r++){var h=p.length(k[r]);h>c&&(c=h)}b=b.map(function(b){var a=c,e=b.points,k=b.velocities;b=b.divergences;p.set(p.create(),0,1,0);p.create();p.create();p.create();var r=[],h=[],l=[],n=[],q=[],u=[],v=0;g.create();for(var z=g.create(),w=0;w<e.length;w++){var A=e[w];var x=k[w];var y=b[w];0===d&&(y=.05*f);var m=p.length(x)/a;var t=g.create();p.copy(t,x);t[3]=y;for(x=0;8>x;x++)q[x]=[A[0],A[1],A[2],x];if(0<n.length)for(x=
0;8>x;x++)A=(x+1)%8,r.push(n[x],q[x],q[A],q[A],n[A],n[x]),l.push(z,t,t,t,z,z),u.push(v,m,m,m,v,v),h.push([r.length-6,r.length-5,r.length-4],[r.length-3,r.length-2,r.length-1]);v=n;n=q;q=v;z=t;v=m}return{positions:r,cells:h,vectors:l,vertexIntensity:u}});k=[];h=[];var l=[],n=[];for(e=0;e<b.length;e++){var q=b[e],u=k.length;k=k.concat(q.positions);l=l.concat(q.vectors);n=n.concat(q.vertexIntensity);for(r=0;r<q.cells.length;r++){var v=q.cells[r],m=[];h.push(m);for(var t=0;t<v.length;t++)m.push(v[t]+
u)}}return{positions:k,cells:h,vectors:l,vertexIntensity:n,colormap:a}},e=function(b,a){var c=p.create();p.add(c,b,[1E-4,0,0]);var d=this.getVelocity(c);p.subtract(d,d,a);p.scale(d,d,1E4);p.add(c,b,[0,1E-4,0]);var f=this.getVelocity(c);p.subtract(f,f,a);p.scale(f,f,1E4);p.add(c,b,[0,0,1E-4]);b=this.getVelocity(c);p.subtract(b,b,a);p.scale(b,b,1E4);p.add(c,d,f);p.add(c,c,b);return c},n=function(a){var c=this.vectors;var d=this.meshgrid,f=this.clampBorders,e=a[0],g=a[1],h=a[2],n=d[0].length,x=d[1].length,
m=d[2].length,t=b(d[0],e),C=b(d[1],g),D=b(d[2],h);a=t+1;var G=C+1,H=D+1;d[0][t]===e&&(a=t);d[1][C]===g&&(G=C);d[2][D]===h&&(H=D);f&&(t=q(t,0,n-1),a=q(a,0,n-1),C=q(C,0,x-1),G=q(G,0,x-1),D=q(D,0,m-1),H=q(H,0,m-1));if(0>t||0>C||0>D||a>=n||G>=x||H>=m)c=p.create();else{f=(e-d[0][t])/(d[0][a]-d[0][t]);g=(g-d[1][C])/(d[1][G]-d[1][C]);d=(h-d[2][D])/(d[2][H]-d[2][D]);if(0>f||1<f||isNaN(f))f=0;if(0>g||1<g||isNaN(g))g=0;if(0>d||1<d||isNaN(d))d=0;D=D*n*x;x*=H*n;C*=n;n*=G;h=t;e=a;a=c[C+D+h];t=c[C+D+e];G=c[n+D+
h];D=c[n+D+e];H=c[C+x+h];C=c[C+x+e];h=c[n+x+h];c=c[n+x+e];x=p.create();p.lerp(x,a,t,f);p.lerp(l,G,D,f);p.lerp(x,x,l,g);p.lerp(l,H,C,f);p.lerp(u,h,c,f);p.lerp(l,l,u,g);p.lerp(x,x,l,d);c=x}return c},b=function(b,a){for(var c=0;c<b.length;c++){var d=b[c];if(d===a)break;if(d>a)return c-1}return c},l=p.create(),u=p.create(),q=function(b,a,d){return b<a?a:b>d?d:b},d=function(b){var a=1/0;b.sort(function(b,a){return b-a});for(var c=1;c<b.length;c++){var d=Math.abs(b[c]-b[c-1]);d<a&&(a=d)}return a},f=function(b){for(var a=
[],c=[],f=[],e={},g={},h={},l=0;l<b.length;l++){var n=b[l],q=n[0],u=n[1];n=n[2];e[q]||(a.push(q),e[q]=!0);g[u]||(c.push(u),g[u]=!0);h[n]||(f.push(n),h[n]=!0)}b=d(a);c=d(c);f=d(f);f=Math.min(b,c,f);return isFinite(f)?f:1};t.exports=function(b,a){var c=b.startingPositions,d=b.maxLength||1E3,k=b.tubeSize||1,g=b.absoluteTubeSize;b.getDivergence||(b.getDivergence=e);b.getVelocity||(b.getVelocity=n);void 0===b.clampBorders&&(b.clampBorders=!0);var l=[],q=a[0][0],u=a[0][1],m=a[0][2],t=a[1][0],C=a[1][1],
D=a[1][2],G=function(b,a){b=a[0];var c=a[1];a=a[2];return b>=q&&b<=t&&c>=u&&c<=C&&a>=m&&a<=D},H=10*p.distance(a[0],a[1])/d,E=H*H,K=1,I=0;p.create();2<=c.length&&(K=f(c));for(var J=0;J<c.length;J++){var L=p.create();p.copy(L,c[J]);var M=[L],N=[],O=b.getVelocity(L),R=L;N.push(O);var T=[],P=b.getDivergence(L,O);P=p.length(P);P>I&&!isNaN(P)&&isFinite(P)&&(I=P);T.push(P);l.push({points:M,velocities:N,divergences:T});for(var S=0;S<100*d&&M.length<d&&G(a,L);){S++;var ba=p.clone(O);O=p.squaredLength(ba);
if(0===O)break;else O>E&&p.scale(ba,ba,H/Math.sqrt(O));p.add(ba,ba,L);O=b.getVelocity(ba);p.squaredDistance(R,ba)-E>-1E-4*E&&(M.push(ba),R=ba,N.push(O),P=b.getDivergence(ba,O),P=p.length(P),P>I&&!isNaN(P)&&isFinite(P)&&(I=P),T.push(P));L=ba}}for(J=0;J<T.length;J++)if(P=T[J],isNaN(P)||!isFinite(P))T[J]=I;b=h(l,b.colormap,I,K);g?b.tubeScale=g:(0===I&&(I=1),b.tubeScale=.5*k*K/I);return b};t.exports.createTubeMesh=a("./lib/tubemesh")},{"./lib/tubemesh":308,"gl-vec3":338,"gl-vec4":374}],310:[function(a,
t,m){var p=a("gl-shader");a=a("glslify");var g=a(["precision highp float;\n#define GLSLIFY 1\n\nattribute vec4 uv;\nattribute vec3 f;\nattribute vec3 normal;\n\nuniform vec3 objectOffset;\nuniform mat4 model, view, projection, inverseModel;\nuniform vec3 lightPosition, eyePosition;\nuniform sampler2D colormap;\n\nvarying float value, kill;\nvarying vec3 worldCoordinate;\nvarying vec2 planeCoordinate;\nvarying vec3 lightDirection, eyeDirection, surfaceNormal;\nvarying vec4 vColor;\n\nvoid main() {\n  vec3 localCoordinate \x3d vec3(uv.zw, f.x);\n  worldCoordinate \x3d objectOffset + localCoordinate;\n  vec4 worldPosition \x3d model * vec4(worldCoordinate, 1.0);\n  vec4 clipPosition \x3d projection * view * worldPosition;\n  gl_Position \x3d clipPosition;\n  kill \x3d f.y;\n  value \x3d f.z;\n  planeCoordinate \x3d uv.xy;\n\n  vColor \x3d texture2D(colormap, vec2(value, value));\n\n  //Lighting geometry parameters\n  vec4 cameraCoordinate \x3d view * worldPosition;\n  cameraCoordinate.xyz /\x3d cameraCoordinate.w;\n  lightDirection \x3d lightPosition - cameraCoordinate.xyz;\n  eyeDirection   \x3d eyePosition - cameraCoordinate.xyz;\n  surfaceNormal  \x3d normalize((vec4(normal,0) * inverseModel).xyz);\n}\n"]),
h=a(["precision highp float;\n#define GLSLIFY 1\n\nfloat beckmannDistribution(float x, float roughness) {\n  float NdotH \x3d max(x, 0.0001);\n  float cos2Alpha \x3d NdotH * NdotH;\n  float tan2Alpha \x3d (cos2Alpha - 1.0) / cos2Alpha;\n  float roughness2 \x3d roughness * roughness;\n  float denom \x3d 3.141592653589793 * roughness2 * cos2Alpha * cos2Alpha;\n  return exp(tan2Alpha / roughness2) / denom;\n}\n\nfloat beckmannSpecular(\n  vec3 lightDirection,\n  vec3 viewDirection,\n  vec3 surfaceNormal,\n  float roughness) {\n  return beckmannDistribution(dot(surfaceNormal, normalize(lightDirection + viewDirection)), roughness);\n}\n\nbool outOfRange(float a, float b, float p) {\n  return ((p \x3e max(a, b)) || \n          (p \x3c min(a, b)));\n}\n\nbool outOfRange(vec2 a, vec2 b, vec2 p) {\n  return (outOfRange(a.x, b.x, p.x) ||\n          outOfRange(a.y, b.y, p.y));\n}\n\nbool outOfRange(vec3 a, vec3 b, vec3 p) {\n  return (outOfRange(a.x, b.x, p.x) ||\n          outOfRange(a.y, b.y, p.y) ||\n          outOfRange(a.z, b.z, p.z));\n}\n\nbool outOfRange(vec4 a, vec4 b, vec4 p) {\n  return outOfRange(a.xyz, b.xyz, p.xyz);\n}\n\nuniform vec3 lowerBound, upperBound;\nuniform float contourTint;\nuniform vec4 contourColor;\nuniform sampler2D colormap;\nuniform vec3 clipBounds[2];\nuniform float roughness, fresnel, kambient, kdiffuse, kspecular, opacity;\nuniform float vertexColor;\n\nvarying float value, kill;\nvarying vec3 worldCoordinate;\nvarying vec3 lightDirection, eyeDirection, surfaceNormal;\nvarying vec4 vColor;\n\nvoid main() {\n  if ((kill \x3e 0.0) ||\n      (outOfRange(clipBounds[0], clipBounds[1], worldCoordinate))) discard;\n\n  vec3 N \x3d normalize(surfaceNormal);\n  vec3 V \x3d normalize(eyeDirection);\n  vec3 L \x3d normalize(lightDirection);\n\n  if(gl_FrontFacing) {\n    N \x3d -N;\n  }\n\n  float specular \x3d max(beckmannSpecular(L, V, N, roughness), 0.);\n  float diffuse  \x3d min(kambient + kdiffuse * max(dot(N, L), 0.0), 1.0);\n\n  //decide how to interpolate color  in vertex or in fragment\n  vec4 surfaceColor \x3d\n    step(vertexColor, .5) * texture2D(colormap, vec2(value, value)) +\n    step(.5, vertexColor) * vColor;\n\n  vec4 litColor \x3d surfaceColor.a * vec4(diffuse * surfaceColor.rgb + kspecular * vec3(1,1,1) * specular,  1.0);\n\n  gl_FragColor \x3d mix(litColor, contourColor, contourTint) * opacity;\n}\n"]),
e=a(["precision highp float;\n#define GLSLIFY 1\n\nattribute vec4 uv;\nattribute float f;\n\nuniform vec3 objectOffset;\nuniform mat3 permutation;\nuniform mat4 model, view, projection;\nuniform float height, zOffset;\nuniform sampler2D colormap;\n\nvarying float value, kill;\nvarying vec3 worldCoordinate;\nvarying vec2 planeCoordinate;\nvarying vec3 lightDirection, eyeDirection, surfaceNormal;\nvarying vec4 vColor;\n\nvoid main() {\n  vec3 dataCoordinate \x3d permutation * vec3(uv.xy, height);\n  worldCoordinate \x3d objectOffset + dataCoordinate;\n  vec4 worldPosition \x3d model * vec4(worldCoordinate, 1.0);\n\n  vec4 clipPosition \x3d projection * view * worldPosition;\n  clipPosition.z +\x3d zOffset;\n\n  gl_Position \x3d clipPosition;\n  value \x3d f + objectOffset.z;\n  kill \x3d -1.0;\n  planeCoordinate \x3d uv.zw;\n\n  vColor \x3d texture2D(colormap, vec2(value, value));\n\n  //Don't do lighting for contours\n  surfaceNormal   \x3d vec3(1,0,0);\n  eyeDirection    \x3d vec3(0,1,0);\n  lightDirection  \x3d vec3(0,0,1);\n}\n"]),
n=a(["precision highp float;\n#define GLSLIFY 1\n\nbool outOfRange(float a, float b, float p) {\n  return ((p \x3e max(a, b)) || \n          (p \x3c min(a, b)));\n}\n\nbool outOfRange(vec2 a, vec2 b, vec2 p) {\n  return (outOfRange(a.x, b.x, p.x) ||\n          outOfRange(a.y, b.y, p.y));\n}\n\nbool outOfRange(vec3 a, vec3 b, vec3 p) {\n  return (outOfRange(a.x, b.x, p.x) ||\n          outOfRange(a.y, b.y, p.y) ||\n          outOfRange(a.z, b.z, p.z));\n}\n\nbool outOfRange(vec4 a, vec4 b, vec4 p) {\n  return outOfRange(a.xyz, b.xyz, p.xyz);\n}\n\nuniform vec2 shape;\nuniform vec3 clipBounds[2];\nuniform float pickId;\n\nvarying float value, kill;\nvarying vec3 worldCoordinate;\nvarying vec2 planeCoordinate;\nvarying vec3 surfaceNormal;\n\nvec2 splitFloat(float v) {\n  float vh \x3d 255.0 * v;\n  float upper \x3d floor(vh);\n  float lower \x3d fract(vh);\n  return vec2(upper / 255.0, floor(lower * 16.0) / 16.0);\n}\n\nvoid main() {\n  if ((kill \x3e 0.0) ||\n      (outOfRange(clipBounds[0], clipBounds[1], worldCoordinate))) discard;\n\n  vec2 ux \x3d splitFloat(planeCoordinate.x / shape.x);\n  vec2 uy \x3d splitFloat(planeCoordinate.y / shape.y);\n  gl_FragColor \x3d vec4(pickId, ux.x, uy.x, ux.y + (uy.y/16.0));\n}\n"]);
m.createShader=function(b){b=p(b,g,h,null,[{name:"uv",type:"vec4"},{name:"f",type:"vec3"},{name:"normal",type:"vec3"}]);b.attributes.uv.location=0;b.attributes.f.location=1;b.attributes.normal.location=2;return b};m.createPickShader=function(b){b=p(b,g,n,null,[{name:"uv",type:"vec4"},{name:"f",type:"vec3"},{name:"normal",type:"vec3"}]);b.attributes.uv.location=0;b.attributes.f.location=1;b.attributes.normal.location=2;return b};m.createContourShader=function(b){b=p(b,e,h,null,[{name:"uv",type:"vec4"},
{name:"f",type:"float"}]);b.attributes.uv.location=0;b.attributes.f.location=1;return b};m.createPickContourShader=function(b){b=p(b,e,n,null,[{name:"uv",type:"vec4"},{name:"f",type:"float"}]);b.attributes.uv.location=0;b.attributes.f.location=1;return b}},{"gl-shader":297,glslify:401}],311:[function(a,t,m){arguments[4][101][0].apply(m,arguments)},{dup:101}],312:[function(a,t,m){function p(b,a,c,d,f){this.position=b;this.index=a;this.uv=c;this.level=d;this.dataCoordinate=f}function g(b){b=z([r({colormap:b,
nshades:L,format:"rgba"}).map(function(b){return[b[0],b[1],b[2],255*b[3]]})]);v.divseq(b,255);return b}function h(b,a,c,d,f,e,g,r,h,l,n,q,u,v,z){this.gl=b;this.shape=a;this.bounds=c;this.objectOffset=z;this.intensityBounds=[];this._shader=d;this._pickShader=f;this._coordinateBuffer=e;this._vao=g;this._colorMap=r;this._contourShader=h;this._contourPickShader=l;this._contourBuffer=n;this._contourVAO=q;this._contourOffsets=[[],[],[]];this._contourCounts=[[],[],[]];this._vertexCount=0;this._pickResult=
new p([0,0,0],[0,0],[0,0],[0,0,0],[0,0,0]);this._dynamicBuffer=u;this._dynamicVAO=v;this._dynamicOffsets=[0,0,0];this._dynamicCounts=[0,0,0];this.contourWidth=[1,1,1];this.contourLevels=[[1],[1],[1]];this.contourTint=[0,0,0];this.contourColor=[[.5,.5,.5,1],[.5,.5,.5,1],[.5,.5,.5,1]];this.showSurface=this.showContour=!0;this.enableHighlight=[!0,!0,!0];this.highlightColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1]];this.highlightTint=[1,1,1];this.highlightLevel=[-1,-1,-1];this.enableDynamic=[!0,!0,!0];this.dynamicLevel=
[NaN,NaN,NaN];this.dynamicColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1]];this.dynamicTint=[1,1,1];this.dynamicWidth=[1,1,1];this.axesBounds=[[Infinity,Infinity,Infinity],[-Infinity,-Infinity,-Infinity]];this.surfaceProject=[!1,!1,!1];this.contourProject=[[!1,!1,!1],[!1,!1,!1],[!1,!1,!1]];this.colorBounds=[!1,!1];this._field=[A(k.mallocFloat(1024),[0,0]),A(k.mallocFloat(1024),[0,0]),A(k.mallocFloat(1024),[0,0])];this.pickId=1;this.clipBounds=[[-Infinity,-Infinity,-Infinity],[Infinity,Infinity,Infinity]];this.snapToData=
!1;this.opacity=this.pixelRatio=1;this.lightPosition=[10,1E4,0];this.diffuseLight=this.ambientLight=.8;this.specularLight=2;this.roughness=.5;this.fresnel=1.5;this.vertexColor=0;this.dirty=!0}function e(b,a){var c,d,f=a.axes&&a.axes.lastCubeProps.axis||M,e=a.showSurface,k=a.showContour;for(c=0;3>c;++c)for(e=e||a.surfaceProject[c],d=0;3>d;++d)k=k||a.contourProject[c][d];for(c=0;3>c;++c){var g=N.projections[c];for(d=0;16>d;++d)g[d]=0;for(d=0;4>d;++d)g[5*d]=1;g[5*c]=0;g[12+c]=a.axesBounds[+(0<f[c])][c];
w(g,b.model,g);var r=N.clipBounds[c];for(g=0;2>g;++g)for(d=0;3>d;++d)r[g][d]=b.clipBounds[g][d];r[0][c]=-1E8;r[1][c]=1E8}N.showSurface=e;N.showContour=k;return N}function n(b,a){b=b||{};var c=this.gl;c.disable(c.CULL_FACE);this._colorMap.bind(0);var d=O;d.model=b.model||K;d.view=b.view||K;d.projection=b.projection||K;d.lowerBound=[this.bounds[0][0],this.bounds[0][1],this.colorBounds[0]||this.bounds[0][2]];d.upperBound=[this.bounds[1][0],this.bounds[1][1],this.colorBounds[1]||this.bounds[1][2]];d.objectOffset=
this.objectOffset;d.contourColor=this.contourColor[0];d.inverseModel=x(d.inverseModel,d.model);for(b=0;2>b;++b)for(var f=d.clipBounds[b],k=0;3>k;++k)f[k]=Math.min(Math.max(this.clipBounds[b][k],-1E8),1E8);d.kambient=this.ambientLight;d.kdiffuse=this.diffuseLight;d.kspecular=this.specularLight;d.roughness=this.roughness;d.fresnel=this.fresnel;d.opacity=this.opacity;d.height=0;d.permutation=T;d.vertexColor=this.vertexColor;f=R;w(f,d.view,d.model);w(f,d.projection,f);x(f,f);for(b=0;3>b;++b)d.eyePosition[b]=
f[12+b]/f[15];var g=f[15];for(b=0;3>b;++b)g+=this.lightPosition[b]*f[4*b+3];for(b=0;3>b;++b){var r=f[12+b];for(k=0;3>k;++k)r+=f[4*k+b]*this.lightPosition[k];d.lightPosition[b]=r/g}f=e(d,this);if(f.showSurface&&a===1>this.opacity){this._shader.bind();this._shader.uniforms=d;this._vao.bind();this.showSurface&&this._vertexCount&&this._vao.draw(c.TRIANGLES,this._vertexCount);for(b=0;3>b;++b)this.surfaceProject[b]&&this.vertexCount&&(this._shader.uniforms.model=f.projections[b],this._shader.uniforms.clipBounds=
f.clipBounds[b],this._vao.draw(c.TRIANGLES,this._vertexCount));this._vao.unbind()}if(f.showContour&&!a){a=this._contourShader;d.kambient=1;d.kdiffuse=0;d.kspecular=0;d.opacity=1;a.bind();a.uniforms=d;g=this._contourVAO;g.bind();for(b=0;3>b;++b)for(a.uniforms.permutation=J[b],c.lineWidth(this.contourWidth[b]*this.pixelRatio),k=0;k<this.contourLevels[b].length;++k){if(k===this.highlightLevel[b])a.uniforms.contourColor=this.highlightColor[b],a.uniforms.contourTint=this.highlightTint[b];else if(0===k||
k-1===this.highlightLevel[b])a.uniforms.contourColor=this.contourColor[b],a.uniforms.contourTint=this.contourTint[b];this._contourCounts[b][k]&&(a.uniforms.height=this.contourLevels[b][k],g.draw(c.LINES,this._contourCounts[b][k],this._contourOffsets[b][k]))}for(b=0;3>b;++b)for(a.uniforms.model=f.projections[b],a.uniforms.clipBounds=f.clipBounds[b],k=0;3>k;++k)if(this.contourProject[b][k])for(a.uniforms.permutation=J[k],c.lineWidth(this.contourWidth[k]*this.pixelRatio),r=0;r<this.contourLevels[k].length;++r){if(r===
this.highlightLevel[k])a.uniforms.contourColor=this.highlightColor[k],a.uniforms.contourTint=this.highlightTint[k];else if(0===r||r-1===this.highlightLevel[k])a.uniforms.contourColor=this.contourColor[k],a.uniforms.contourTint=this.contourTint[k];this._contourCounts[k][r]&&(a.uniforms.height=this.contourLevels[k][r],g.draw(c.LINES,this._contourCounts[k][r],this._contourOffsets[k][r]))}g.unbind();g=this._dynamicVAO;g.bind();for(b=0;3>b;++b)if(0!==this._dynamicCounts[b])for(a.uniforms.model=d.model,
a.uniforms.clipBounds=d.clipBounds,a.uniforms.permutation=J[b],c.lineWidth(this.dynamicWidth[b]*this.pixelRatio),a.uniforms.contourColor=this.dynamicColor[b],a.uniforms.contourTint=this.dynamicTint[b],a.uniforms.height=this.dynamicLevel[b],g.draw(c.LINES,this._dynamicCounts[b],this._dynamicOffsets[b]),k=0;3>k;++k)this.contourProject[k][b]&&(a.uniforms.model=f.projections[k],a.uniforms.clipBounds=f.clipBounds[k],g.draw(c.LINES,this._dynamicCounts[b],this._dynamicOffsets[b]));g.unbind()}}function b(b,
a){return Array.isArray(b)?[a(b[0]),a(b[1]),a(b[2])]:[a(b),a(b),a(b)]}function l(b){return Array.isArray(b)?3===b.length?[b[0],b[1],b[2],1]:[b[0],b[1],b[2],b[3]]:[0,0,0,1]}function u(b){if(Array.isArray(b)){if(Array.isArray(b))return[l(b[0]),l(b[1]),l(b[2])];b=l(b);return[b.slice(),b.slice(),b.slice()]}}t.exports=function(b){var a=b.gl,e=C(a),k=G(a),g=D(a),r=H(a),l=d(a),n=f(a,[{buffer:l,size:4,stride:E,offset:0},{buffer:l,size:3,stride:E,offset:16},{buffer:l,size:3,stride:E,offset:28}]),q=d(a),u=
f(a,[{buffer:q,size:4,stride:20,offset:0},{buffer:q,size:1,stride:20,offset:16}]),p=d(a),v=f(a,[{buffer:p,size:2,type:a.FLOAT}]),z=c(a,1,L,a.RGBA,a.UNSIGNED_BYTE);z.minFilter=a.LINEAR;z.magFilter=a.LINEAR;a=new h(a,[0,0],[[0,0,0],[0,0,0]],e,k,l,n,z,g,r,q,u,p,v,[0,0,0]);e={levels:[[],[],[]]};for(var w in b)e[w]=b[w];e.colormap=e.colormap||"jet";a.update(e);return a};var q=a("bit-twiddle"),d=a("gl-buffer"),f=a("gl-vao"),c=a("gl-texture2d"),k=a("typedarray-pool"),r=a("colormap"),v=a("ndarray-ops"),z=
a("ndarray-pack"),A=a("ndarray"),y=a("surface-nets"),w=a("gl-mat4/multiply"),x=a("gl-mat4/invert"),F=a("binary-search-bounds"),B=a("ndarray-gradient");a=a("./lib/shaders");var C=a.createShader,D=a.createContourShader,G=a.createPickShader,H=a.createPickContourShader,E=40,K=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],I=[[0,0],[0,1],[1,0],[1,1],[1,0],[0,1]],J=[[0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0]];(function(){for(var b=0;3>b;++b){var a=J[b],c=(b+2)%3;a[(b+1)%3]=1;a[c+3]=1;a[b+6]=1}})();
var L=256;a=h.prototype;a.isTransparent=function(){return 1>this.opacity};a.isOpaque=function(){if(1<=this.opacity)return!0;for(var b=0;3>b;++b)if(0<this._contourCounts[b].length||0<this._dynamicCounts[b])return!0;return!1};a.pickSlots=1;a.setPickBase=function(b){this.pickId=b};var M=[0,0,0],N={showSurface:!1,showContour:!1,projections:[K.slice(),K.slice(),K.slice()],clipBounds:[[[0,0,0],[0,0,0]],[[0,0,0],[0,0,0]],[[0,0,0],[0,0,0]]]},O={model:K,view:K,projection:K,inverseModel:K.slice(),lowerBound:[0,
0,0],upperBound:[0,0,0],colorMap:0,clipBounds:[[0,0,0],[0,0,0]],height:0,contourTint:0,contourColor:[0,0,0,1],permutation:[1,0,0,0,1,0,0,0,1],zOffset:-1E-4,objectOffset:[0,0,0],kambient:1,kdiffuse:1,kspecular:1,lightPosition:[1E3,1E3,1E3],eyePosition:[0,0,0],roughness:1,fresnel:1,opacity:1,vertexColor:0},R=K.slice(),T=[1,0,0,0,1,0,0,0,1];a.draw=function(b){return n.call(this,b,!1)};a.drawTransparent=function(b){return n.call(this,b,!0)};var P={model:K,view:K,projection:K,inverseModel:K,clipBounds:[[0,
0,0],[0,0,0]],height:0,shape:[0,0],pickId:0,lowerBound:[0,0,0],upperBound:[0,0,0],zOffset:0,objectOffset:[0,0,0],permutation:[1,0,0,0,1,0,0,0,1],lightPosition:[0,0,0],eyePosition:[0,0,0]};a.drawPick=function(b){b=b||{};var a=this.gl;a.disable(a.CULL_FACE);P.model=b.model||K;P.view=b.view||K;P.projection=b.projection||K;P.shape=this._field[2].shape;P.pickId=this.pickId/255;P.lowerBound=this.bounds[0];P.upperBound=this.bounds[1];P.objectOffset=this.objectOffset;P.permutation=T;for(b=0;2>b;++b)for(var c=
P.clipBounds[b],d=0;3>d;++d)c[d]=Math.min(Math.max(this.clipBounds[b][d],-1E8),1E8);c=e(P,this);if(c.showSurface){this._pickShader.bind();this._pickShader.uniforms=P;this._vao.bind();this._vao.draw(a.TRIANGLES,this._vertexCount);for(b=0;3>b;++b)this.surfaceProject[b]&&(this._pickShader.uniforms.model=c.projections[b],this._pickShader.uniforms.clipBounds=c.clipBounds[b],this._vao.draw(a.TRIANGLES,this._vertexCount));this._vao.unbind()}if(c.showContour){var f=this._contourPickShader;f.bind();f.uniforms=
P;var k=this._contourVAO;k.bind();for(d=0;3>d;++d)for(a.lineWidth(this.contourWidth[d]*this.pixelRatio),f.uniforms.permutation=J[d],b=0;b<this.contourLevels[d].length;++b)this._contourCounts[d][b]&&(f.uniforms.height=this.contourLevels[d][b],k.draw(a.LINES,this._contourCounts[d][b],this._contourOffsets[d][b]));for(b=0;3>b;++b)for(f.uniforms.model=c.projections[b],f.uniforms.clipBounds=c.clipBounds[b],d=0;3>d;++d)if(this.contourProject[b][d]){f.uniforms.permutation=J[d];a.lineWidth(this.contourWidth[d]*
this.pixelRatio);for(var g=0;g<this.contourLevels[d].length;++g)this._contourCounts[d][g]&&(f.uniforms.height=this.contourLevels[d][g],k.draw(a.LINES,this._contourCounts[d][g],this._contourOffsets[d][g]))}k.unbind()}};a.pick=function(b){if(!b||b.id!==this.pickId)return null;var a=this._field[2].shape,c=this._pickResult,d=a[0]*(b.value[0]+(b.value[2]>>4)/16)/255,f=Math.floor(d),e=d-f;b=a[1]*(b.value[1]+(b.value[2]&15)/16)/255;var k=Math.floor(b),g=b-k;f+=1;k+=1;for(var r=c.position,h=r[0]=r[1]=r[2]=
0;2>h;++h)for(var l=h?e:1-e,n=0;2>n;++n)for(var q=f+h,u=k+n,p=l*(n?g:1-g),v=0;3>v;++v)r[v]+=this._field[v].get(q,u)*p;h=this._pickResult.level;for(l=0;3>l;++l)h[l]=F.le(this.contourLevels[l],r[l]),0>h[l]?0<this.contourLevels[l].length&&(h[l]=0):h[l]<this.contourLevels[l].length-1&&Math.abs(this.contourLevels[l][h[l]]-r[l])>Math.abs(this.contourLevels[l][h[l]+1]-r[l])&&(h[l]+=1);c.index[0]=.5>e?f:f+1;c.index[1]=.5>g?k:k+1;c.uv[0]=d/a[0];c.uv[1]=b/a[1];for(v=0;3>v;++v)c.dataCoordinate[v]=this._field[v].get(c.index[0],
c.index[1]);return c};a.padField=function(b,a){var c=a.shape.slice(),d=b.shape.slice();v.assign(b.lo(1,1).hi(c[0],c[1]),a);v.assign(b.lo(1).hi(c[0],1),a.hi(c[0],1));v.assign(b.lo(1,d[1]-1).hi(c[0],1),a.lo(0,c[1]-1).hi(c[0],1));v.assign(b.lo(0,1).hi(1,c[1]),a.hi(1));v.assign(b.lo(d[0]-1,1).hi(1,c[1]),a.lo(c[0]-1));b.set(0,0,a.get(0,0));b.set(0,d[1]-1,a.get(0,c[1]-1));b.set(d[0]-1,0,a.get(c[0]-1,0));b.set(d[0]-1,d[1]-1,a.get(c[0]-1,c[1]-1))};a.update=function(a){a=a||{};this.objectOffset=a.objectOffset||
this.objectOffset;this.dirty=!0;"contourWidth"in a&&(this.contourWidth=b(a.contourWidth,Number));"showContour"in a&&(this.showContour=b(a.showContour,Boolean));"showSurface"in a&&(this.showSurface=!!a.showSurface);"contourTint"in a&&(this.contourTint=b(a.contourTint,Boolean));"contourColor"in a&&(this.contourColor=u(a.contourColor));"contourProject"in a&&(this.contourProject=b(a.contourProject,function(a){return b(a,Boolean)}));"surfaceProject"in a&&(this.surfaceProject=a.surfaceProject);"dynamicColor"in
a&&(this.dynamicColor=u(a.dynamicColor));"dynamicTint"in a&&(this.dynamicTint=b(a.dynamicTint,Number));"dynamicWidth"in a&&(this.dynamicWidth=b(a.dynamicWidth,Number));"opacity"in a&&(this.opacity=a.opacity);"colorBounds"in a&&(this.colorBounds=a.colorBounds);"vertexColor"in a&&(this.vertexColor=a.vertexColor?1:0);var c=a.field||a.coords&&a.coords[2]||null,d=!1;c||(c=this._field[2].shape[0]||this._field[2].shape[2]?this._field[2].lo(1,1).hi(this._field[2].shape[0]-2,this._field[2].shape[1]-2):this._field[2].hi(0,
0));if("field"in a||"coords"in a){var f=(c.shape[0]+2)*(c.shape[1]+2);f>this._field[2].data.length&&(k.freeFloat(this._field[2].data),this._field[2].data=k.mallocFloat(q.nextPow2(f)));this._field[2]=A(this._field[2].data,[c.shape[0]+2,c.shape[1]+2]);this.padField(this._field[2],c);f=this.shape=c.shape.slice();for(c=0;2>c;++c)this._field[2].size>this._field[c].data.length&&(k.freeFloat(this._field[c].data),this._field[c].data=k.mallocFloat(this._field[2].size)),this._field[c]=A(this._field[c].data,
[f[0]+2,f[1]+2]);if(a.coords){var e=a.coords;if(!Array.isArray(e)||3!==e.length)throw Error("gl-surface: invalid coordinates for x/y");for(c=0;2>c;++c){var r=e[c];for(h=0;2>h;++h)if(r.shape[h]!==f[h])throw Error("gl-surface: coords have incorrect shape");this.padField(this._field[c],r)}}else if(a.ticks){h=a.ticks;if(!Array.isArray(h)||2!==h.length)throw Error("gl-surface: invalid ticks");for(c=0;2>c;++c){e=h[c];if(Array.isArray(e)||e.length)e=A(e);if(e.shape[0]!==f[c])throw Error("gl-surface: invalid tick length");
r=A(e.data,f);r.stride[c]=e.stride[0];r.stride[c^1]=0;this.padField(this._field[c],r)}}else{for(c=0;2>c;++c)h=[0,0],h[c]=1,this._field[c]=A(this._field[c].data,[f[0]+2,f[1]+2],h,0);this._field[0].set(0,0,0);for(var h=0;h<f[0];++h)this._field[0].set(h+1,0,h);this._field[0].set(f[0]+1,0,f[0]-1);this._field[1].set(0,0,0);for(h=0;h<f[1];++h)this._field[1].set(0,h+1,h);this._field[1].set(0,f[1]+1,f[1]-1)}h=this._field;e=A(k.mallocFloat(6*h[2].size),[3,f[0]+2,f[1]+2,2]);for(c=0;3>c;++c)B(e.pick(c),h[c],
"mirror");var l=A(k.mallocFloat(3*h[2].size),[f[0]+2,f[1]+2,3]);for(c=0;c<f[0]+2;++c)for(h=0;h<f[1]+2;++h){r=e.get(0,c,h,0);var n=e.get(0,c,h,1),p=e.get(1,c,h,0),v=e.get(1,c,h,1),z=e.get(2,c,h,0),w=e.get(2,c,h,1),x=p*w-v*z;z=z*n-w*r;w=r*v-n*p;r=Math.sqrt(x*x+z*z+w*w);1E-8>r?(r=Math.max(Math.abs(x),Math.abs(z),Math.abs(w)),1E-8>r?(w=1,z=x=0,r=1):r=1/r):r=1/Math.sqrt(r);l.set(c,h,0,x*r);l.set(c,h,1,z*r);l.set(c,h,2,w*r)}k.free(e.data);var m=[Infinity,Infinity,Infinity],t=[-Infinity,-Infinity,-Infinity],
J=Infinity,E=-Infinity,F=k.mallocFloat(q.nextPow2((f[0]-1)*(f[1]-1)*60)),C=0;for(c=e=0;c<f[0]-1;++c)a:for(h=0;h<f[1]-1;++h){for(x=0;2>x;++x)for(z=0;2>z;++z)for(r=0;3>r;++r)if(n=this._field[r].get(1+c+x,1+h+z),isNaN(n)||!isFinite(n))continue a;for(r=0;6>r;++r){p=c+I[r][0];v=h+I[r][1];var D=this._field[0].get(p+1,v+1),K=this._field[1].get(p+1,v+1);n=this._field[2].get(p+1,v+1);x=l.get(p+1,v+1,0);z=l.get(p+1,v+1,1);w=l.get(p+1,v+1,2);a.intensity&&(L=a.intensity.get(p,v));var L=a.intensity?a.intensity.get(p,
v):n+this.objectOffset[2];F[C++]=p;F[C++]=v;F[C++]=D;F[C++]=K;F[C++]=n;F[C++]=0;F[C++]=L;F[C++]=x;F[C++]=z;F[C++]=w;m[0]=Math.min(m[0],D+this.objectOffset[0]);m[1]=Math.min(m[1],K+this.objectOffset[1]);m[2]=Math.min(m[2],n+this.objectOffset[2]);J=Math.min(J,L);t[0]=Math.max(t[0],D+this.objectOffset[0]);t[1]=Math.max(t[1],K+this.objectOffset[1]);t[2]=Math.max(t[2],n+this.objectOffset[2]);E=Math.max(E,L);e+=1}}a.intensityBounds&&(J=+a.intensityBounds[0],E=+a.intensityBounds[1]);for(c=6;c<C;c+=10)F[c]=
(F[c]-J)/(E-J);this._vertexCount=e;this._coordinateBuffer.update(F.subarray(0,C));k.freeFloat(F);k.free(l.data);this.bounds=[m,t];this.intensity=a.intensity||this._field[2];if(this.intensityBounds[0]!==J||this.intensityBounds[1]!==E)d=!0;this.intensityBounds=[J,E]}if("levels"in a){f=a.levels;f=Array.isArray(f[0])?f.slice():[[],[],f];for(c=0;3>c;++c)f[c]=f[c].slice(),f[c].sort(function(b,a){return b-a});for(c=0;3>c;++c)for(h=0;h<f[c].length;++h)f[c][h]-=this.objectOffset[c];c=0;a:for(;3>c;++c){if(f[c].length!==
this.contourLevels[c].length){d=!0;break}for(h=0;h<f[c].length;++h)if(f[c][h]!==this.contourLevels[c][h]){d=!0;break a}}this.contourLevels=f}if(d){h=this._field;f=this.shape;d=[];for(l=0;3>l;++l){w=this.contourLevels[l];m=[];t=[];J=[0,0,0];for(c=0;c<w.length;++c){E=y(this._field[l],w[c]);m.push(d.length/5|0);h=e=0;a:for(;h<E.cells.length;++h)for(F=E.cells[h],r=0;2>r;++r){C=E.positions[F[r]];n=C[0];D=Math.floor(n)|0;K=n-D;n=C[1];L=Math.floor(n)|0;var G=n-L,H=!1,M=0;b:for(;3>M;++M){J[M]=0;var O=(l+
M+1)%3;for(x=0;2>x;++x){var T=x?K:1-K;p=Math.min(Math.max(D+x,0),f[0])|0;for(z=0;2>z;++z){var N=z?G:1-G;v=Math.min(Math.max(L+z,0),f[1])|0;n=2>M?this._field[O].get(p,v):(this.intensity.get(p,v)-this.intensityBounds[0])/(this.intensityBounds[1]-this.intensityBounds[0]);if(!isFinite(n)||isNaN(n)){H=!0;break b}J[M]+=T*N*n}}}if(H){if(0<r){for(r=0;5>r;++r)d.pop();--e}continue a}else d.push(J[0],J[1],C[0],C[1],J[2]),e+=1}t.push(e)}this._contourOffsets[l]=m;this._contourCounts[l]=t}f=k.mallocFloat(d.length);
for(c=0;c<d.length;++c)f[c]=d[c];this._contourBuffer.update(f);k.freeFloat(f)}a.colormap&&this._colorMap.setPixels(g(a.colormap))};a.dispose=function(){this._shader.dispose();this._vao.dispose();this._coordinateBuffer.dispose();this._colorMap.dispose();this._contourBuffer.dispose();this._contourVAO.dispose();this._contourShader.dispose();this._contourPickShader.dispose();this._dynamicBuffer.dispose();this._dynamicVAO.dispose();for(var b=0;3>b;++b)k.freeFloat(this._field[b].data)};a.highlight=function(b){var a;
if(b){for(a=0;3>a;++a)this.highlightLevel[a]=this.enableHighlight[a]?b.level[a]:-1;b=this.snapToData?b.dataCoordinate:b.position;for(a=0;3>a;++a)b[a]-=this.objectOffset[a];if(this.enableDynamic[0]&&b[0]!==this.dynamicLevel[0]||this.enableDynamic[1]&&b[1]!==this.dynamicLevel[1]||this.enableDynamic[2]&&b[2]!==this.dynamicLevel[2]){for(var c=0,d=this.shape,f=k.mallocFloat(12*d[0]*d[1]),e=0;3>e;++e)if(this.enableDynamic[e]){this.dynamicLevel[e]=b[e];var g=this._field[(e+1)%3],r=this._field[(e+2)%3];a=
y(this._field[e],b[e]);var h=a.cells,l=a.positions;this._dynamicOffsets[e]=c;for(a=0;a<h.length;++a)for(var n=h[a],q=0;2>q;++q){var u=l[n[q]],p=+u[0],v=p|0,z=Math.min(v+1,d[0])|0,w=p-v,A=1-w,x=+u[1];u=x|0;p=Math.min(u+1,d[1])|0;var m=x-u,t=1-m;x=A*t;A*=m;t*=w;m*=w;w=x*g.get(v,u)+A*g.get(v,p)+t*g.get(z,u)+m*g.get(z,p);v=x*r.get(v,u)+A*r.get(v,p)+t*r.get(z,u)+m*r.get(z,p);if(isNaN(w)||isNaN(v)){q&&--c;break}f[2*c]=w;f[2*c+1]=v;c+=1}this._dynamicCounts[e]=c-this._dynamicOffsets[e]}else this.dynamicLevel[e]=
NaN,this._dynamicCounts[e]=0;this._dynamicBuffer.update(f.subarray(0,2*c));k.freeFloat(f)}}else this._dynamicCounts=[0,0,0],this.dyanamicLevel=[NaN,NaN,NaN],this.highlightLevel=[-1,-1,-1]}},{"./lib/shaders":310,"binary-search-bounds":311,"bit-twiddle":82,colormap:116,"gl-buffer":237,"gl-mat4/invert":261,"gl-mat4/multiply":263,"gl-texture2d":314,"gl-vao":319,ndarray:442,"ndarray-gradient":433,"ndarray-ops":436,"ndarray-pack":437,"surface-nets":515,"typedarray-pool":529}],313:[function(a,t,m){var p=
a("css-font"),g=a("pick-by-alias"),h=a("regl"),e=a("gl-util/context");m=a("es6-weak-map");var n=a("color-normalize"),b=a("font-atlas"),l=a("typedarray-pool"),u=a("parse-rect"),q=a("is-plain-obj"),d=a("parse-unit"),f=a("to-px"),c=a("detect-kerning"),k=a("object-assign"),r=a("font-measure"),v=a("flatten-vertex-data"),z=a("bit-twiddle").nextPow2,A=new m,y=!1;document.body&&(a=document.body.appendChild(document.createElement("div")),a.style.font="italic small-caps bold condensed 16px/2 cursive",getComputedStyle(a).fontStretch&&
(y=!0),document.body.removeChild(a));var w=function(b){"function"===typeof b&&b._gl&&b.prop&&b.texture&&b.buffer?(b={regl:b},this.gl=b.regl._gl):this.gl=e(b);this.regl=(this.shader=A.get(this.gl))?this.shader.regl:b.regl||h({gl:this.gl});this.charBuffer=this.regl.buffer({type:"uint8",usage:"stream"});this.sizeBuffer=this.regl.buffer({type:"float",usage:"stream"});this.shader||(this.shader=this.createShader(),A.set(this.gl,this.shader));this.batch=[];this.fontSize=[];this.font=[];this.fontAtlas=[];
this.draw=this.shader.draw.bind(this);this.render=function(){this.regl._refresh();this.draw(this.batch)};this.canvas=this.gl.canvas;this.update(q(b)?b:{})};w.prototype.createShader=function(){var b=this.regl,a=b({blend:{enable:!0,color:[0,0,0,1],func:{srcRGB:"src alpha",dstRGB:"one minus src alpha",srcAlpha:"one minus dst alpha",dstAlpha:"one"}},stencil:{enable:!1},depth:{enable:!1},count:b.prop("count"),offset:b.prop("offset"),attributes:{charOffset:{offset:4,stride:8,buffer:b.this("sizeBuffer")},
width:{offset:0,stride:8,buffer:b.this("sizeBuffer")},char:b.this("charBuffer"),position:b.this("position")},uniforms:{atlasSize:function(b,a){return[a.atlas.width,a.atlas.height]},atlasDim:function(b,a){return[a.atlas.cols,a.atlas.rows]},atlas:function(b,a){return a.atlas.texture},charStep:function(b,a){return a.atlas.step},em:function(b,a){return a.atlas.em},color:b.prop("color"),opacity:b.prop("opacity"),viewport:b.this("viewportArray"),scale:b.this("scale"),align:b.prop("align"),baseline:b.prop("baseline"),
translate:b.this("translate"),positionOffset:b.prop("positionOffset")},primitive:"points",viewport:b.this("viewport"),vert:"\n\t\t\tprecision highp float;\n\t\t\tattribute float width, charOffset, char;\n\t\t\tattribute vec2 position;\n\t\t\tuniform float fontSize, charStep, em, align, baseline;\n\t\t\tuniform vec4 viewport;\n\t\t\tuniform vec4 color;\n\t\t\tuniform vec2 atlasSize, atlasDim, scale, translate, positionOffset;\n\t\t\tvarying vec2 charCoord, charId;\n\t\t\tvarying float charWidth;\n\t\t\tvarying vec4 fontColor;\n\t\t\tvoid main () {\n\t\t\t\t"+
(w.normalViewport?"":"vec2 positionOffset \x3d vec2(positionOffset.x,- positionOffset.y);")+"\n\n\t\t\t\tvec2 offset \x3d floor(em * (vec2(align + charOffset, baseline)\n\t\t\t\t\t+ positionOffset))\n\t\t\t\t\t/ (viewport.zw * scale.xy);\n\n\t\t\t\tvec2 position \x3d (position + translate) * scale;\n\t\t\t\tposition +\x3d offset * scale;\n\n\t\t\t\t"+(w.normalViewport?"position.y \x3d 1. - position.y;":"")+"\n\n\t\t\t\tcharCoord \x3d position * viewport.zw + viewport.xy;\n\n\t\t\t\tgl_Position \x3d vec4(position * 2. - 1., 0, 1);\n\n\t\t\t\tgl_PointSize \x3d charStep;\n\n\t\t\t\tcharId.x \x3d mod(char, atlasDim.x);\n\t\t\t\tcharId.y \x3d floor(char / atlasDim.x);\n\n\t\t\t\tcharWidth \x3d width * em;\n\n\t\t\t\tfontColor \x3d color / 255.;\n\t\t\t}",
frag:"\n\t\t\tprecision highp float;\n\t\t\tuniform sampler2D atlas;\n\t\t\tuniform float fontSize, charStep, opacity;\n\t\t\tuniform vec2 atlasSize;\n\t\t\tuniform vec4 viewport;\n\t\t\tvarying vec4 fontColor;\n\t\t\tvarying vec2 charCoord, charId;\n\t\t\tvarying float charWidth;\n\n\t\t\tfloat lightness(vec4 color) {\n\t\t\t\treturn color.r * 0.299 + color.g * 0.587 + color.b * 0.114;\n\t\t\t}\n\n\t\t\tvoid main () {\n\t\t\t\tvec2 uv \x3d gl_FragCoord.xy - charCoord + charStep * .5;\n\t\t\t\tfloat halfCharStep \x3d floor(charStep * .5 + .5);\n\n\t\t\t\t// invert y and shift by 1px (FF expecially needs that)\n\t\t\t\tuv.y \x3d charStep - uv.y;\n\n\t\t\t\t// ignore points outside of character bounding box\n\t\t\t\tfloat halfCharWidth \x3d ceil(charWidth * .5);\n\t\t\t\tif (floor(uv.x) \x3e halfCharStep + halfCharWidth ||\n\t\t\t\t\tfloor(uv.x) \x3c halfCharStep - halfCharWidth) return;\n\n\t\t\t\tuv +\x3d charId * charStep;\n\t\t\t\tuv \x3d uv / atlasSize;\n\n\t\t\t\tvec4 color \x3d fontColor;\n\t\t\t\tvec4 mask \x3d texture2D(atlas, uv);\n\n\t\t\t\tfloat maskY \x3d lightness(mask);\n\t\t\t\t// float colorY \x3d lightness(color);\n\t\t\t\tcolor.a *\x3d maskY;\n\t\t\t\tcolor.a *\x3d opacity;\n\n\t\t\t\t// color.a +\x3d .1;\n\n\t\t\t\t// antialiasing, see yiq color space y-channel formula\n\t\t\t\t// color.rgb +\x3d (1. - color.rgb) * (1. - mask.rgb);\n\n\t\t\t\tgl_FragColor \x3d color;\n\t\t\t}"});
return{regl:b,draw:a,atlas:{}}};w.prototype.update=function(a){var e=this;if("string"===typeof a)a={text:a};else if(!a)return;a=g(a,{position:"position positions coord coords coordinates",font:"font fontFace fontface typeface cssFont css-font family fontFamily",fontSize:"fontSize fontsize size font-size",text:"text texts chars characters value values symbols",align:"align alignment textAlign textbaseline",baseline:"baseline textBaseline textbaseline",direction:"dir direction textDirection",color:"color colour fill fill-color fillColor textColor textcolor",
kerning:"kerning kern",range:"range dataBox",viewport:"vp viewport viewBox viewbox viewPort",opacity:"opacity alpha transparency visible visibility opaque",offset:"offset positionOffset padding shift indent indentation"},!0);null!=a.opacity&&(Array.isArray(a.opacity)?this.opacity=a.opacity.map(function(b){return parseFloat(b)}):this.opacity=parseFloat(a.opacity));null!=a.viewport&&(this.viewport=u(a.viewport),w.normalViewport&&(this.viewport.y=this.canvas.height-this.viewport.y-this.viewport.height),
this.viewportArray=[this.viewport.x,this.viewport.y,this.viewport.width,this.viewport.height]);null==this.viewport&&(this.viewport={x:0,y:0,width:this.gl.drawingBufferWidth,height:this.gl.drawingBufferHeight},this.viewportArray=[this.viewport.x,this.viewport.y,this.viewport.width,this.viewport.height]);null!=a.kerning&&(this.kerning=a.kerning);null!=a.offset&&("number"===typeof a.offset&&(a.offset=[a.offset,0]),this.positionOffset=v(a.offset));a.direction&&(this.direction=a.direction);a.range&&(this.range=
a.range,this.scale=[1/(a.range[2]-a.range[0]),1/(a.range[3]-a.range[1])],this.translate=[-a.range[0],-a.range[1]]);a.scale&&(this.scale=a.scale);a.translate&&(this.translate=a.translate);this.scale||(this.scale=[1/this.viewport.width,1/this.viewport.height]);this.translate||(this.translate=[0,0]);this.font.length||a.font||(a.font=w.baseFontSize+"px sans-serif");var h=!1,q=!1;a.font&&(Array.isArray(a.font)?a.font:[a.font]).forEach(function(b,a){if("string"===typeof b)try{b=p.parse(b)}catch(ca){b=p.parse(w.baseFontSize+
"px "+b)}else b=p.parse(p.stringify(b));var c=p.stringify({size:w.baseFontSize,family:b.family,stretch:y?b.stretch:void 0,variant:b.variant,weight:b.weight,style:b.style}),k=d(b.size);k=Math.round(k[0]*f(k[1]));k!==e.fontSize[a]&&(q=!0,e.fontSize[a]=k);if(!e.font[a]||c!=e.font[a].baseString)if(h=!0,e.font[a]=w.fonts[c],!e.font[a]){k=b.family.join(", ");var g=[b.style];b.style!=b.variant&&g.push(b.variant);b.variant!=b.weight&&g.push(b.weight);y&&b.weight!=b.stretch&&g.push(b.stretch);e.font[a]={baseString:c,
family:k,weight:b.weight,stretch:b.stretch,style:b.style,variant:b.variant,width:{},kerning:{},metrics:r(k,{origin:"top",fontSize:w.baseFontSize,fontStyle:g.join(" ")})};w.fonts[c]=e.font[a]}});(h||q)&&this.font.forEach(function(b,c){var d=p.stringify({size:e.fontSize[c],family:b.family,stretch:y?b.stretch:void 0,variant:b.variant,weight:b.weight,style:b.style});e.fontAtlas[c]=e.shader.atlas[d];e.fontAtlas[c]||(e.shader.atlas[d]=e.fontAtlas[c]={fontString:d,step:2*Math.ceil(e.fontSize[c]*b.metrics.bottom*
.5),em:e.fontSize[c],cols:0,rows:0,height:0,width:0,chars:[],ids:{},texture:e.regl.texture()});null==a.text&&(a.text=e.text)});if("string"===typeof a.text&&a.position&&2<a.position.length){for(var A=Array(.5*a.position.length),m=0;m<A.length;m++)A[m]=a.text;a.text=A}if(null!=a.text||h){this.textOffsets=[0];if(Array.isArray(a.text)){this.count=a.text[0].length;this.counts=[this.count];for(A=1;A<a.text.length;A++)e.textOffsets[A]=e.textOffsets[A-1]+a.text[A-1].length,e.count+=a.text[A].length,e.counts.push(a.text[A].length);
this.text=a.text.join("")}else this.text=a.text,this.count=this.text.length,this.counts=[this.count];var x=[];this.font.forEach(function(b,a){w.atlasContext.font=b.baseString;a=e.fontAtlas[a];for(var d=0;d<e.text.length;d++){var f=e.text.charAt(d);null==a.ids[f]&&(a.ids[f]=a.chars.length,a.chars.push(f),x.push(f));if(null==b.width[f]&&(b.width[f]=w.atlasContext.measureText(f).width/w.baseFontSize,e.kerning)){var g=[],r;for(r in b.width)g.push(r+f,f+r);k(b.kerning,c(b.family,{pairs:g}))}}})}if(a.position)if(2<
a.position.length){A=!a.position[0].length;m=l.mallocFloat(2*this.count);for(var t=0,K=0;t<this.counts.length;t++){var I=e.counts[t];if(A)for(var J=0;J<I;J++)m[K++]=a.position[2*t],m[K++]=a.position[2*t+1];else for(J=0;J<I;J++)m[K++]=a.position[t][0],m[K++]=a.position[t][1]}this.position.call?this.position({type:"float",data:m}):this.position=this.regl.buffer({type:"float",data:m});l.freeFloat(m)}else this.position.destroy&&this.position.destroy(),this.position={constant:a.position};if(a.text||h){A=
l.mallocUint8(this.count);m=l.mallocFloat(2*this.count);this.textWidth=[];for(K=t=0;t<this.counts.length;t++){I=e.counts[t];J=e.font[t]||e.font[0];for(var L=e.fontAtlas[t]||e.fontAtlas[0],M=0;M<I;M++){var N=e.text.charAt(K),O=e.text.charAt(K-1);A[K]=L.ids[N];m[2*K]=J.width[N];if(M){var R=m[2*K-1]+.5*m[2*K-2]+.5*m[2*K];e.kerning&&(N=J.kerning[O+N])&&(R+=.001*N);m[2*K+1]=R}else m[2*K+1]=.5*m[2*K];K++}e.textWidth.push(m.length?.5*m[2*K-2]+m[2*K-1]:0)}a.align||(a.align=this.align);this.charBuffer({data:A,
type:"uint8",usage:"stream"});this.sizeBuffer({data:m,type:"float",usage:"stream"});l.freeUint8(A);l.freeFloat(m);x.length&&this.font.forEach(function(a,c){a=e.fontAtlas[c];c=a.step;var d=Math.min(Math.floor(w.maxAtlasSize/c),a.chars.length),f=Math.ceil(a.chars.length/d),k=z(d*c),g=z(f*c);a.width=k;a.height=g;a.rows=f;a.cols=d;a.em&&a.texture({data:b({canvas:w.atlasCanvas,font:a.fontString,chars:a.chars,shape:[k,g],step:[c,c]})})})}a.align&&(this.align=a.align,this.alignOffset=this.textWidth.map(function(b,
a){a=Array.isArray(e.align)?1<e.align.length?e.align[a]:e.align[0]:e.align;if("number"===typeof a)return a;switch(a){case "right":case "end":return-b;case "center":case "centre":case "middle":return.5*-b}return 0}));null==this.baseline&&null==a.baseline&&(a.baseline=0);null!=a.baseline&&(this.baseline=a.baseline,Array.isArray(this.baseline)||(this.baseline=[this.baseline]),this.baselineOffset=this.baseline.map(function(b,a){a=(e.font[a]||e.font[0]).metrics;var c=.5*a.bottom;c="number"===typeof b?
c+(b-a.baseline):c+-a[b];w.normalViewport||(c*=-1);return c}));if(null!=a.color)if(a.color||(a.color="transparent"),"string"!==typeof a.color&&isNaN(a.color)){if("number"===typeof a.color[0]&&a.color.length>this.counts.length)for(m=a.color.length,A=l.mallocUint8(m),t=(a.color.subarray||a.color.slice).bind(a.color),K=0;K<m;K+=4)A.set(n(t(K,K+4),"uint8"),K);else for(m=a.color.length,A=l.mallocUint8(4*m),t=0;t<m;t++)A.set(n(a.color[t]||0,"uint8"),4*t);this.color=A}else this.color=n(a.color,"uint8");
if(a.position||a.text||a.color||a.baseline||a.align||a.font||a.offset||a.opacity)if(4<this.color.length||1<this.baselineOffset.length||this.align&&1<this.align.length||1<this.fontAtlas.length||2<this.positionOffset.length)for(this.batch=Array(Math.max(.5*this.position.length||0,.25*this.color.length||0,this.baselineOffset.length||0,this.alignOffset.length||0,this.font.length||0,this.opacity.length||0,.5*this.positionOffset.length||0)),A=0;A<this.batch.length;A++)e.batch[A]={count:1<e.counts.length?
e.counts[A]:e.counts[0],offset:1<e.textOffsets.length?e.textOffsets[A]:e.textOffsets[0],color:e.color?4>=e.color.length?e.color:e.color.subarray(4*A,4*A+4):[0,0,0,255],opacity:Array.isArray(e.opacity)?e.opacity[A]:e.opacity,baseline:null!=e.baselineOffset[A]?e.baselineOffset[A]:e.baselineOffset[0],align:e.align?null!=e.alignOffset[A]?e.alignOffset[A]:e.alignOffset[0]:0,atlas:e.fontAtlas[A]||e.fontAtlas[0],positionOffset:2<e.positionOffset.length?e.positionOffset.subarray(2*A,2*A+2):e.positionOffset};
else this.batch=this.count?[{count:this.count,offset:0,color:this.color||[0,0,0,255],opacity:Array.isArray(this.opacity)?this.opacity[0]:this.opacity,baseline:this.baselineOffset[0],align:this.alignOffset?this.alignOffset[0]:0,atlas:this.fontAtlas[0],positionOffset:this.positionOffset}]:[]};w.prototype.destroy=function(){};w.prototype.kerning=!0;w.prototype.position={constant:new Float32Array(2)};w.prototype.translate=null;w.prototype.scale=null;w.prototype.font=null;w.prototype.text="";w.prototype.positionOffset=
[0,0];w.prototype.opacity=1;w.prototype.color=new Uint8Array([0,0,0,255]);w.prototype.alignOffset=[0,0];w.normalViewport=!1;w.maxAtlasSize=1024;w.atlasCanvas=document.createElement("canvas");w.atlasContext=w.atlasCanvas.getContext("2d",{alpha:!1});w.baseFontSize=64;w.fonts={};t.exports=w},{"bit-twiddle":82,"color-normalize":110,"css-font":129,"detect-kerning":157,"es6-weak-map":216,"flatten-vertex-data":223,"font-atlas":224,"font-measure":225,"gl-util/context":315,"is-plain-obj":414,"object-assign":446,
"parse-rect":451,"parse-unit":453,"pick-by-alias":457,regl:486,"to-px":523,"typedarray-pool":529}],314:[function(a,t,m){function p(b){return"undefined"!=typeof HTMLCanvasElement&&b instanceof HTMLCanvasElement||"undefined"!=typeof HTMLImageElement&&b instanceof HTMLImageElement||"undefined"!=typeof HTMLVideoElement&&b instanceof HTMLVideoElement||"undefined"!=typeof ImageData&&b instanceof ImageData}function g(b,a,c){var d=b.gl,f=d.getParameter(d.MAX_TEXTURE_SIZE);if(0>a||a>f||0>c||c>f)throw Error("gl-texture2d: Invalid texture size");
b._shape=[a,c];b.bind();d.texImage2D(d.TEXTURE_2D,0,b.format,a,c,0,b.format,b.type,null);b._mipLevels=[0];return b}function h(b,a,c,d,f,e){this.gl=b;this.handle=a;this.format=f;this.type=e;this._shape=[c,d];this._mipLevels=[0];this._minFilter=this._magFilter=b.NEAREST;this._wrapT=this._wrapS=b.CLAMP_TO_EDGE;this._anisoSamples=1;var k=this;b=[this._wrapS,this._wrapT];Object.defineProperties(b,[{get:function(){return k._wrapS},set:function(b){return k.wrapS=b}},{get:function(){return k._wrapT},set:function(b){return k.wrapT=
b}}]);this._wrapVector=b;b=[this._shape[0],this._shape[1]];Object.defineProperties(b,[{get:function(){return k._shape[0]},set:function(b){return k.width=b}},{get:function(){return k._shape[1]},set:function(b){return k.height=b}}]);this._shapeVector=b}function e(b,a){return 3===b.length?1===a[2]&&a[1]===b[0]*b[2]&&a[0]===b[2]:1===a[0]&&a[1]===b[0]}function n(b){var a=b.createTexture();b.bindTexture(b.TEXTURE_2D,a);b.texParameteri(b.TEXTURE_2D,b.TEXTURE_MIN_FILTER,b.NEAREST);b.texParameteri(b.TEXTURE_2D,
b.TEXTURE_MAG_FILTER,b.NEAREST);b.texParameteri(b.TEXTURE_2D,b.TEXTURE_WRAP_S,b.CLAMP_TO_EDGE);b.texParameteri(b.TEXTURE_2D,b.TEXTURE_WRAP_T,b.CLAMP_TO_EDGE);return a}function b(b,a,c,d,f){var e=b.getParameter(b.MAX_TEXTURE_SIZE);if(0>a||a>e||0>c||c>e)throw Error("gl-texture2d: Invalid texture shape");if(f===b.FLOAT&&!b.getExtension("OES_texture_float"))throw Error("gl-texture2d: Floating point textures not supported on this platform");e=n(b);b.texImage2D(b.TEXTURE_2D,0,d,a,c,0,d,f,null);return new h(b,
e,a,c,d,f)}var l=a("ndarray"),u=a("ndarray-ops"),q=a("typedarray-pool");t.exports=function(a){if(1>=arguments.length)throw Error("gl-texture2d: Missing arguments for texture2d constructor");d||(d=[a.LINEAR,a.NEAREST_MIPMAP_LINEAR,a.LINEAR_MIPMAP_NEAREST,a.LINEAR_MIPMAP_NEAREST],f=[a.NEAREST,a.LINEAR,a.NEAREST_MIPMAP_NEAREST,a.NEAREST_MIPMAP_LINEAR,a.LINEAR_MIPMAP_NEAREST,a.LINEAR_MIPMAP_LINEAR],c=[a.REPEAT,a.CLAMP_TO_EDGE,a.MIRRORED_REPEAT]);if("number"===typeof arguments[1])return b(a,arguments[1],
arguments[2],arguments[3]||a.RGBA,arguments[4]||a.UNSIGNED_BYTE);if(Array.isArray(arguments[1]))return b(a,arguments[1][0]|0,arguments[1][1]|0,arguments[2]||a.RGBA,arguments[3]||a.UNSIGNED_BYTE);if("object"===typeof arguments[1]){var k=arguments[1],g=p(k)?k:k.raw;if(g){var z=k.width|0;k=k.height|0;var A=arguments[2]||a.RGBA,m=arguments[3]||a.UNSIGNED_BYTE,w=n(a);a.texImage2D(a.TEXTURE_2D,0,A,A,m,g);return new h(a,w,z,k,A,m)}if(k.shape&&k.data&&k.stride){w=k;var x=w.dtype;g=w.shape.slice();k=a.getParameter(a.MAX_TEXTURE_SIZE);
if(0>g[0]||g[0]>k||0>g[1]||g[1]>k)throw Error("gl-texture2d: Invalid texture size");k=e(g,w.stride.slice());"float32"===x?A=a.FLOAT:"float64"===x?(A=a.FLOAT,k=!1,x="float32"):"uint8"===x?A=a.UNSIGNED_BYTE:(A=a.UNSIGNED_BYTE,k=!1,x="uint8");if(2===g.length)m=a.LUMINANCE,g=[g[0],g[1],1],w=l(w.data,g,[w.stride[0],w.stride[1],1],w.offset);else if(3===g.length)if(1===g[2])m=a.ALPHA;else if(2===g[2])m=a.LUMINANCE_ALPHA;else if(3===g[2])m=a.RGB;else if(4===g[2])m=a.RGBA;else throw Error("gl-texture2d: Invalid shape for pixel coords");
else throw Error("gl-texture2d: Invalid shape for texture");A!==a.FLOAT||a.getExtension("OES_texture_float")||(A=a.UNSIGNED_BYTE,k=!1);var t=w.size;if(k)w=0===w.offset&&w.data.length===t?w.data:w.data.subarray(w.offset,w.offset+t);else{var B=[g[2],g[2]*g[0],1];z=q.malloc(t,x);B=l(z,g,B,0);"float32"!==x&&"float64"!==x||A!==a.UNSIGNED_BYTE?u.assign(B,w):u.muls(B,w,255);w=z.subarray(0,t)}x=n(a);a.texImage2D(a.TEXTURE_2D,0,m,g[0],g[1],0,m,A,w);k||q.free(z);return new h(a,x,g[0],g[1],m,A)}}throw Error("gl-texture2d: Invalid arguments for texture2d constructor");
};var d=null,f=null,c=null;a=h.prototype;Object.defineProperties(a,{minFilter:{get:function(){return this._minFilter},set:function(b){this.bind();var a=this.gl;this.type===a.FLOAT&&0<=d.indexOf(b)&&!a.getExtension("OES_texture_float_linear")&&(b=a.NEAREST);if(0>f.indexOf(b))throw Error("gl-texture2d: Unknown filter mode "+b);a.texParameteri(a.TEXTURE_2D,a.TEXTURE_MIN_FILTER,b);return this._minFilter=b}},magFilter:{get:function(){return this._magFilter},set:function(b){this.bind();var a=this.gl;this.type===
a.FLOAT&&0<=d.indexOf(b)&&!a.getExtension("OES_texture_float_linear")&&(b=a.NEAREST);if(0>f.indexOf(b))throw Error("gl-texture2d: Unknown filter mode "+b);a.texParameteri(a.TEXTURE_2D,a.TEXTURE_MAG_FILTER,b);return this._magFilter=b}},mipSamples:{get:function(){return this._anisoSamples},set:function(b){var a=this._anisoSamples;this._anisoSamples=Math.max(b,1)|0;a!==this._anisoSamples&&(b=this.gl.getExtension("EXT_texture_filter_anisotropic"))&&this.gl.texParameterf(this.gl.TEXTURE_2D,b.TEXTURE_MAX_ANISOTROPY_EXT,
this._anisoSamples);return this._anisoSamples}},wrapS:{get:function(){return this._wrapS},set:function(b){this.bind();if(0>c.indexOf(b))throw Error("gl-texture2d: Unknown wrap mode "+b);this.gl.texParameteri(this.gl.TEXTURE_2D,this.gl.TEXTURE_WRAP_S,b);return this._wrapS=b}},wrapT:{get:function(){return this._wrapT},set:function(b){this.bind();if(0>c.indexOf(b))throw Error("gl-texture2d: Unknown wrap mode "+b);this.gl.texParameteri(this.gl.TEXTURE_2D,this.gl.TEXTURE_WRAP_T,b);return this._wrapT=b}},
wrap:{get:function(){return this._wrapVector},set:function(b){Array.isArray(b)||(b=[b,b]);if(2!==b.length)throw Error("gl-texture2d: Must specify wrap mode for rows and columns");for(var a=0;2>a;++a)if(0>c.indexOf(b[a]))throw Error("gl-texture2d: Unknown wrap mode "+b);this._wrapS=b[0];this._wrapT=b[1];a=this.gl;this.bind();a.texParameteri(a.TEXTURE_2D,a.TEXTURE_WRAP_S,this._wrapS);a.texParameteri(a.TEXTURE_2D,a.TEXTURE_WRAP_T,this._wrapT);return b}},shape:{get:function(){return this._shapeVector},
set:function(b){if(!Array.isArray(b))b=[b|0,b|0];else if(2!==b.length)throw Error("gl-texture2d: Invalid texture shape");g(this,b[0]|0,b[1]|0);return[b[0]|0,b[1]|0]}},width:{get:function(){return this._shape[0]},set:function(b){b|=0;g(this,b,this._shape[1]);return b}},height:{get:function(){return this._shape[1]},set:function(b){b|=0;g(this,this._shape[0],b);return b}}});a.bind=function(b){var a=this.gl;void 0!==b&&a.activeTexture(a.TEXTURE0+(b|0));a.bindTexture(a.TEXTURE_2D,this.handle);return void 0!==
b?b|0:a.getParameter(a.ACTIVE_TEXTURE)-a.TEXTURE0};a.dispose=function(){this.gl.deleteTexture(this.handle)};a.generateMipmap=function(){this.bind();this.gl.generateMipmap(this.gl.TEXTURE_2D);for(var b=Math.min(this._shape[0],this._shape[1]),a=0;0<b;++a,b>>>=1)0>this._mipLevels.indexOf(a)&&this._mipLevels.push(a)};a.setPixels=function(b,a,c,d){var f=this.gl;this.bind();Array.isArray(a)?(d=c,c=a[1]|0,a=a[0]|0):(a=a||0,c=c||0);d=d||0;var k=p(b)?b:b.raw;if(k)0>this._mipLevels.indexOf(d)?(f.texImage2D(f.TEXTURE_2D,
0,this.format,this.format,this.type,k),this._mipLevels.push(d)):f.texSubImage2D(f.TEXTURE_2D,d,a,c,this.format,this.type,k);else if(b.shape&&b.stride&&b.data){if(2>b.shape.length||a+b.shape[1]>this._shape[1]>>>d||c+b.shape[0]>this._shape[0]>>>d||0>a||0>c)throw Error("gl-texture2d: Texture dimensions are out of bounds");k=this.format;var g=this.type,h=this._mipLevels,r=b.dtype,n=b.shape.slice();if(2>n.length||3<n.length)throw Error("gl-texture2d: Invalid ndarray, must be 2d or 3d");var v=e(n,b.stride.slice());
"float32"===r?r=f.FLOAT:"float64"===r?(r=f.FLOAT,v=!1):"uint8"===r?r=f.UNSIGNED_BYTE:(r=f.UNSIGNED_BYTE,v=!1);if(2===n.length){var z=f.LUMINANCE;n=[n[0],n[1],1];b=l(b.data,n,[b.stride[0],b.stride[1],1],b.offset)}else if(3===n.length)if(1===n[2])z=f.ALPHA;else if(2===n[2])z=f.LUMINANCE_ALPHA;else if(3===n[2])z=f.RGB;else if(4===n[2])z=f.RGBA;else throw Error("gl-texture2d: Invalid shape for pixel coords");else throw Error("gl-texture2d: Invalid shape for texture");z!==f.LUMINANCE&&z!==f.ALPHA||k!==
f.LUMINANCE&&k!==f.ALPHA||(z=k);if(z!==k)throw Error("gl-texture2d: Incompatible texture format for setPixels");z=b.size;var m=0>h.indexOf(d);m&&h.push(d);r===g&&v?0===b.offset&&b.data.length===z?m?f.texImage2D(f.TEXTURE_2D,d,k,n[0],n[1],0,k,g,b.data):f.texSubImage2D(f.TEXTURE_2D,d,a,c,n[0],n[1],k,g,b.data):m?f.texImage2D(f.TEXTURE_2D,d,k,n[0],n[1],0,k,g,b.data.subarray(b.offset,b.offset+z)):f.texSubImage2D(f.TEXTURE_2D,d,a,c,n[0],n[1],k,g,b.data.subarray(b.offset,b.offset+z)):(h=g===f.FLOAT?q.mallocFloat32(z):
q.mallocUint8(z),v=l(h,n,[n[2],n[2]*n[0],1]),r===f.FLOAT&&g===f.UNSIGNED_BYTE?u.muls(v,b,255):u.assign(v,b),m?f.texImage2D(f.TEXTURE_2D,d,k,n[0],n[1],0,k,g,h.subarray(0,z)):f.texSubImage2D(f.TEXTURE_2D,d,a,c,n[0],n[1],k,g,h.subarray(0,z)),g===f.FLOAT?q.freeFloat32(h):q.freeUint8(h))}else throw Error("gl-texture2d: Unsupported data type");}},{ndarray:442,"ndarray-ops":436,"typedarray-pool":529}],315:[function(a,t,m){function p(a){if(a.container)if(a.container==document.body)document.body.style.width||
(a.canvas.width=a.width||a.pixelRatio*window.innerWidth),document.body.style.height||(a.canvas.height=a.height||a.pixelRatio*window.innerHeight);else{var e=a.container.getBoundingClientRect();a.canvas.width=a.width||e.right-e.left;a.canvas.height=a.height||e.bottom-e.top}}function g(a){return"function"===typeof a.getContext&&"width"in a&&"height"in a}var h=a("pick-by-alias");t.exports=function(a){a?"string"===typeof a&&(a={container:a}):a={};a=g(a)?{container:a}:"string"===typeof a.nodeName&&"function"===
typeof a.appendChild&&"function"===typeof a.getBoundingClientRect?{container:a}:"function"===typeof a.drawArrays||"function"===typeof a.drawElements?{gl:a}:h(a,{container:"container target element el canvas holder parent parentNode wrapper use ref root node",gl:"gl context webgl glContext",attrs:"attributes attrs contextAttributes",pixelRatio:"pixelRatio pxRatio px ratio pxratio pixelratio"},!0);a.pixelRatio||(a.pixelRatio=window.pixelRatio||1);if(a.gl)return a.gl;a.canvas&&(a.container=a.canvas.parentNode);
if(a.container){if("string"===typeof a.container){var e=document.querySelector(a.container);if(!e)throw Error("Element "+a.container+" is not found");a.container=e}g(a.container)?(a.canvas=a.container,a.container=a.canvas.parentNode):a.canvas||(a.canvas=document.createElement("canvas"),a.container.appendChild(a.canvas),p(a))}else a.canvas||(a.container=document.body||document.documentElement,a.canvas=document.createElement("canvas"),a.canvas.style.position="absolute",a.canvas.style.top=0,a.canvas.style.left=
0,a.container.appendChild(a.canvas),p(a));if(!a.gl)try{a.gl=a.canvas.getContext("webgl",a.attrs)}catch(b){try{a.gl=a.canvas.getContext("experimental-webgl",a.attrs)}catch(l){a.gl=a.canvas.getContext("webgl-experimental",a.attrs)}}return a.gl}},{"pick-by-alias":457}],316:[function(a,t,m){t.exports=function(a,g,h){g?g.bind():a.bindBuffer(a.ELEMENT_ARRAY_BUFFER,null);g=a.getParameter(a.MAX_VERTEX_ATTRIBS)|0;if(h){if(h.length>g)throw Error("gl-vao: Too many vertex attributes");for(var e=0;e<h.length;++e){var n=
h[e];if(n.buffer){var b=n.size||4,l=n.type||a.FLOAT,u=!!n.normalized,q=n.stride||0,d=n.offset||0;n.buffer.bind();a.enableVertexAttribArray(e);a.vertexAttribPointer(e,b,l,u,q,d)}else{if("number"===typeof n)a.vertexAttrib1f(e,n);else if(1===n.length)a.vertexAttrib1f(e,n[0]);else if(2===n.length)a.vertexAttrib2f(e,n[0],n[1]);else if(3===n.length)a.vertexAttrib3f(e,n[0],n[1],n[2]);else if(4===n.length)a.vertexAttrib4f(e,n[0],n[1],n[2],n[3]);else throw Error("gl-vao: Invalid vertex attribute");a.disableVertexAttribArray(e)}}}else a.bindBuffer(a.ARRAY_BUFFER,
null),e=0;for(;e<g;++e)a.disableVertexAttribArray(e)}},{}],317:[function(a,t,m){function p(a){this.gl=a;this._attributes=this._elements=null;this._elementsType=a.UNSIGNED_SHORT}var g=a("./do-bind.js");p.prototype.bind=function(){g(this.gl,this._elements,this._attributes)};p.prototype.update=function(a,e,g){this._elements=e;this._attributes=a;this._elementsType=g||this.gl.UNSIGNED_SHORT};p.prototype.dispose=function(){};p.prototype.unbind=function(){};p.prototype.draw=function(a,e,g){g=g||0;var b=
this.gl;this._elements?b.drawElements(a,e,this._elementsType,g):b.drawArrays(a,g,e)};t.exports=function(a){return new p(a)}},{"./do-bind.js":316}],318:[function(a,t,m){function p(a,g,b,h,u,q){this.location=a;this.dimension=g;this.a=b;this.b=h;this.c=u;this.d=q}function g(a,g,b){this.gl=a;this._ext=g;this.handle=b;this._attribs=[];this._useElements=!1;this._elementsType=a.UNSIGNED_SHORT}var h=a("./do-bind.js");p.prototype.bind=function(a){switch(this.dimension){case 1:a.vertexAttrib1f(this.location,
this.a);break;case 2:a.vertexAttrib2f(this.location,this.a,this.b);break;case 3:a.vertexAttrib3f(this.location,this.a,this.b,this.c);break;case 4:a.vertexAttrib4f(this.location,this.a,this.b,this.c,this.d)}};g.prototype.bind=function(){this._ext.bindVertexArrayOES(this.handle);for(var a=0;a<this._attribs.length;++a)this._attribs[a].bind(this.gl)};g.prototype.unbind=function(){this._ext.bindVertexArrayOES(null)};g.prototype.dispose=function(){this._ext.deleteVertexArrayOES(this.handle)};g.prototype.update=
function(a,g,b){this.bind();h(this.gl,g,a);this.unbind();this._attribs.length=0;if(a)for(var e=0;e<a.length;++e){var n=a[e];"number"===typeof n?this._attribs.push(new p(e,1,n)):Array.isArray(n)&&this._attribs.push(new p(e,n.length,n[0],n[1],n[2],n[3]))}this._useElements=!!g;this._elementsType=b||this.gl.UNSIGNED_SHORT};g.prototype.draw=function(a,g,b){b=b||0;var e=this.gl;this._useElements?e.drawElements(a,g,this._elementsType,b):e.drawArrays(a,b,g)};t.exports=function(a,h){return new g(a,h,h.createVertexArrayOES())}},
{"./do-bind.js":316}],319:[function(a,t,m){function p(a){this.bindVertexArrayOES=a.bindVertexArray.bind(a);this.createVertexArrayOES=a.createVertexArray.bind(a);this.deleteVertexArrayOES=a.deleteVertexArray.bind(a)}var g=a("./lib/vao-native.js"),h=a("./lib/vao-emulated.js");t.exports=function(a,n,b,l){var e=a.createVertexArray?new p(a):a.getExtension("OES_vertex_array_object");a=e?g(a,e):h(a);a.update(n,b,l);return a}},{"./lib/vao-emulated.js":317,"./lib/vao-native.js":318}],320:[function(a,t,m){t.exports=
function(a,g,h){a[0]=g[0]+h[0];a[1]=g[1]+h[1];a[2]=g[2]+h[2];return a}},{}],321:[function(a,t,m){t.exports=function(a,n){a=p(a[0],a[1],a[2]);n=p(n[0],n[1],n[2]);g(a,a);g(n,n);n=h(a,n);return 1<n?0:Math.acos(n)};var p=a("./fromValues"),g=a("./normalize"),h=a("./dot")},{"./dot":331,"./fromValues":337,"./normalize":348}],322:[function(a,t,m){t.exports=function(a,g){a[0]=Math.ceil(g[0]);a[1]=Math.ceil(g[1]);a[2]=Math.ceil(g[2]);return a}},{}],323:[function(a,t,m){t.exports=function(a){var g=new Float32Array(3);
g[0]=a[0];g[1]=a[1];g[2]=a[2];return g}},{}],324:[function(a,t,m){t.exports=function(a,g){a[0]=g[0];a[1]=g[1];a[2]=g[2];return a}},{}],325:[function(a,t,m){t.exports=function(){var a=new Float32Array(3);a[0]=0;a[1]=0;a[2]=0;return a}},{}],326:[function(a,t,m){t.exports=function(a,g,h){var e=g[0],n=g[1];g=g[2];var b=h[0],l=h[1];h=h[2];a[0]=n*h-g*l;a[1]=g*b-e*h;a[2]=e*l-n*b;return a}},{}],327:[function(a,t,m){t.exports=a("./distance")},{"./distance":328}],328:[function(a,t,m){t.exports=function(a,g){var h=
g[0]-a[0],e=g[1]-a[1];a=g[2]-a[2];return Math.sqrt(h*h+e*e+a*a)}},{}],329:[function(a,t,m){t.exports=a("./divide")},{"./divide":330}],330:[function(a,t,m){t.exports=function(a,g,h){a[0]=g[0]/h[0];a[1]=g[1]/h[1];a[2]=g[2]/h[2];return a}},{}],331:[function(a,t,m){t.exports=function(a,g){return a[0]*g[0]+a[1]*g[1]+a[2]*g[2]}},{}],332:[function(a,t,m){t.exports=1E-6},{}],333:[function(a,t,m){t.exports=function(a,h){var e=a[0],g=a[1];a=a[2];var b=h[0],l=h[1];h=h[2];return Math.abs(e-b)<=p*Math.max(1,Math.abs(e),
Math.abs(b))&&Math.abs(g-l)<=p*Math.max(1,Math.abs(g),Math.abs(l))&&Math.abs(a-h)<=p*Math.max(1,Math.abs(a),Math.abs(h))};var p=a("./epsilon")},{"./epsilon":332}],334:[function(a,t,m){t.exports=function(a,g){return a[0]===g[0]&&a[1]===g[1]&&a[2]===g[2]}},{}],335:[function(a,t,m){t.exports=function(a,g){a[0]=Math.floor(g[0]);a[1]=Math.floor(g[1]);a[2]=Math.floor(g[2]);return a}},{}],336:[function(a,t,m){t.exports=function(a,h,e,n,b,l){h||(h=3);e||(e=0);for(n=n?Math.min(n*h+e,a.length):a.length;e<n;e+=
h)p[0]=a[e],p[1]=a[e+1],p[2]=a[e+2],b(p,p,l),a[e]=p[0],a[e+1]=p[1],a[e+2]=p[2];return a};var p=a("./create")()},{"./create":325}],337:[function(a,t,m){t.exports=function(a,g,h){var e=new Float32Array(3);e[0]=a;e[1]=g;e[2]=h;return e}},{}],338:[function(a,t,m){t.exports={EPSILON:a("./epsilon"),create:a("./create"),clone:a("./clone"),angle:a("./angle"),fromValues:a("./fromValues"),copy:a("./copy"),set:a("./set"),equals:a("./equals"),exactEquals:a("./exactEquals"),add:a("./add"),subtract:a("./subtract"),
sub:a("./sub"),multiply:a("./multiply"),mul:a("./mul"),divide:a("./divide"),div:a("./div"),min:a("./min"),max:a("./max"),floor:a("./floor"),ceil:a("./ceil"),round:a("./round"),scale:a("./scale"),scaleAndAdd:a("./scaleAndAdd"),distance:a("./distance"),dist:a("./dist"),squaredDistance:a("./squaredDistance"),sqrDist:a("./sqrDist"),length:a("./length"),len:a("./len"),squaredLength:a("./squaredLength"),sqrLen:a("./sqrLen"),negate:a("./negate"),inverse:a("./inverse"),normalize:a("./normalize"),dot:a("./dot"),
cross:a("./cross"),lerp:a("./lerp"),random:a("./random"),transformMat4:a("./transformMat4"),transformMat3:a("./transformMat3"),transformQuat:a("./transformQuat"),rotateX:a("./rotateX"),rotateY:a("./rotateY"),rotateZ:a("./rotateZ"),forEach:a("./forEach")}},{"./add":320,"./angle":321,"./ceil":322,"./clone":323,"./copy":324,"./create":325,"./cross":326,"./dist":327,"./distance":328,"./div":329,"./divide":330,"./dot":331,"./epsilon":332,"./equals":333,"./exactEquals":334,"./floor":335,"./forEach":336,
"./fromValues":337,"./inverse":339,"./len":340,"./length":341,"./lerp":342,"./max":343,"./min":344,"./mul":345,"./multiply":346,"./negate":347,"./normalize":348,"./random":349,"./rotateX":350,"./rotateY":351,"./rotateZ":352,"./round":353,"./scale":354,"./scaleAndAdd":355,"./set":356,"./sqrDist":357,"./sqrLen":358,"./squaredDistance":359,"./squaredLength":360,"./sub":361,"./subtract":362,"./transformMat3":363,"./transformMat4":364,"./transformQuat":365}],339:[function(a,t,m){t.exports=function(a,g){a[0]=
1/g[0];a[1]=1/g[1];a[2]=1/g[2];return a}},{}],340:[function(a,t,m){t.exports=a("./length")},{"./length":341}],341:[function(a,t,m){t.exports=function(a){var g=a[0],h=a[1];a=a[2];return Math.sqrt(g*g+h*h+a*a)}},{}],342:[function(a,t,m){t.exports=function(a,g,h,e){var n=g[0],b=g[1];g=g[2];a[0]=n+e*(h[0]-n);a[1]=b+e*(h[1]-b);a[2]=g+e*(h[2]-g);return a}},{}],343:[function(a,t,m){t.exports=function(a,g,h){a[0]=Math.max(g[0],h[0]);a[1]=Math.max(g[1],h[1]);a[2]=Math.max(g[2],h[2]);return a}},{}],344:[function(a,
t,m){t.exports=function(a,g,h){a[0]=Math.min(g[0],h[0]);a[1]=Math.min(g[1],h[1]);a[2]=Math.min(g[2],h[2]);return a}},{}],345:[function(a,t,m){t.exports=a("./multiply")},{"./multiply":346}],346:[function(a,t,m){t.exports=function(a,g,h){a[0]=g[0]*h[0];a[1]=g[1]*h[1];a[2]=g[2]*h[2];return a}},{}],347:[function(a,t,m){t.exports=function(a,g){a[0]=-g[0];a[1]=-g[1];a[2]=-g[2];return a}},{}],348:[function(a,t,m){t.exports=function(a,g){var h=g[0],e=g[1],n=g[2];h=h*h+e*e+n*n;0<h&&(h=1/Math.sqrt(h),a[0]=
g[0]*h,a[1]=g[1]*h,a[2]=g[2]*h);return a}},{}],349:[function(a,t,m){t.exports=function(a,g){g=g||1;var h=2*Math.random()*Math.PI,e=2*Math.random()-1,n=Math.sqrt(1-e*e)*g;a[0]=Math.cos(h)*n;a[1]=Math.sin(h)*n;a[2]=e*g;return a}},{}],350:[function(a,t,m){t.exports=function(a,g,h,e){var n=h[1];h=h[2];var b=g[1]-n,l=g[2]-h,u=Math.sin(e);e=Math.cos(e);a[0]=g[0];a[1]=n+b*e-l*u;a[2]=h+b*u+l*e;return a}},{}],351:[function(a,t,m){t.exports=function(a,g,h,e){var n=h[0];h=h[2];var b=g[0]-n,l=g[2]-h,u=Math.sin(e);
e=Math.cos(e);a[0]=n+l*u+b*e;a[1]=g[1];a[2]=h+l*e-b*u;return a}},{}],352:[function(a,t,m){t.exports=function(a,g,h,e){var n=h[0];h=h[1];var b=g[0]-n,l=g[1]-h,u=Math.sin(e);e=Math.cos(e);a[0]=n+b*e-l*u;a[1]=h+b*u+l*e;a[2]=g[2];return a}},{}],353:[function(a,t,m){t.exports=function(a,g){a[0]=Math.round(g[0]);a[1]=Math.round(g[1]);a[2]=Math.round(g[2]);return a}},{}],354:[function(a,t,m){t.exports=function(a,g,h){a[0]=g[0]*h;a[1]=g[1]*h;a[2]=g[2]*h;return a}},{}],355:[function(a,t,m){t.exports=function(a,
g,h,e){a[0]=g[0]+h[0]*e;a[1]=g[1]+h[1]*e;a[2]=g[2]+h[2]*e;return a}},{}],356:[function(a,t,m){t.exports=function(a,g,h,e){a[0]=g;a[1]=h;a[2]=e;return a}},{}],357:[function(a,t,m){t.exports=a("./squaredDistance")},{"./squaredDistance":359}],358:[function(a,t,m){t.exports=a("./squaredLength")},{"./squaredLength":360}],359:[function(a,t,m){t.exports=function(a,g){var h=g[0]-a[0],e=g[1]-a[1];a=g[2]-a[2];return h*h+e*e+a*a}},{}],360:[function(a,t,m){t.exports=function(a){var g=a[0],h=a[1];a=a[2];return g*
g+h*h+a*a}},{}],361:[function(a,t,m){t.exports=a("./subtract")},{"./subtract":362}],362:[function(a,t,m){t.exports=function(a,g,h){a[0]=g[0]-h[0];a[1]=g[1]-h[1];a[2]=g[2]-h[2];return a}},{}],363:[function(a,t,m){t.exports=function(a,g,h){var e=g[0],n=g[1];g=g[2];a[0]=e*h[0]+n*h[3]+g*h[6];a[1]=e*h[1]+n*h[4]+g*h[7];a[2]=e*h[2]+n*h[5]+g*h[8];return a}},{}],364:[function(a,t,m){t.exports=function(a,g,h){var e=g[0],n=g[1];g=g[2];var b=h[3]*e+h[7]*n+h[11]*g+h[15];b=b||1;a[0]=(h[0]*e+h[4]*n+h[8]*g+h[12])/
b;a[1]=(h[1]*e+h[5]*n+h[9]*g+h[13])/b;a[2]=(h[2]*e+h[6]*n+h[10]*g+h[14])/b;return a}},{}],365:[function(a,t,m){t.exports=function(a,g,h){var e=g[0],n=g[1],b=g[2];g=h[0];var l=h[1],u=h[2];h=h[3];var q=h*e+l*b-u*n,d=h*n+u*e-g*b,f=h*b+g*n-l*e;e=-g*e-l*n-u*b;a[0]=q*h+e*-g+d*-u-f*-l;a[1]=d*h+e*-l+f*-g-q*-u;a[2]=f*h+e*-u+q*-l-d*-g;return a}},{}],366:[function(a,t,m){t.exports=function(a,g,h){a[0]=g[0]+h[0];a[1]=g[1]+h[1];a[2]=g[2]+h[2];a[3]=g[3]+h[3];return a}},{}],367:[function(a,t,m){t.exports=function(a){var g=
new Float32Array(4);g[0]=a[0];g[1]=a[1];g[2]=a[2];g[3]=a[3];return g}},{}],368:[function(a,t,m){t.exports=function(a,g){a[0]=g[0];a[1]=g[1];a[2]=g[2];a[3]=g[3];return a}},{}],369:[function(a,t,m){t.exports=function(){var a=new Float32Array(4);a[0]=0;a[1]=0;a[2]=0;a[3]=0;return a}},{}],370:[function(a,t,m){t.exports=function(a,g){var h=g[0]-a[0],e=g[1]-a[1],n=g[2]-a[2];a=g[3]-a[3];return Math.sqrt(h*h+e*e+n*n+a*a)}},{}],371:[function(a,t,m){t.exports=function(a,g,h){a[0]=g[0]/h[0];a[1]=g[1]/h[1];a[2]=
g[2]/h[2];a[3]=g[3]/h[3];return a}},{}],372:[function(a,t,m){t.exports=function(a,g){return a[0]*g[0]+a[1]*g[1]+a[2]*g[2]+a[3]*g[3]}},{}],373:[function(a,t,m){t.exports=function(a,g,h,e){var n=new Float32Array(4);n[0]=a;n[1]=g;n[2]=h;n[3]=e;return n}},{}],374:[function(a,t,m){t.exports={create:a("./create"),clone:a("./clone"),fromValues:a("./fromValues"),copy:a("./copy"),set:a("./set"),add:a("./add"),subtract:a("./subtract"),multiply:a("./multiply"),divide:a("./divide"),min:a("./min"),max:a("./max"),
scale:a("./scale"),scaleAndAdd:a("./scaleAndAdd"),distance:a("./distance"),squaredDistance:a("./squaredDistance"),length:a("./length"),squaredLength:a("./squaredLength"),negate:a("./negate"),inverse:a("./inverse"),normalize:a("./normalize"),dot:a("./dot"),lerp:a("./lerp"),random:a("./random"),transformMat4:a("./transformMat4"),transformQuat:a("./transformQuat")}},{"./add":366,"./clone":367,"./copy":368,"./create":369,"./distance":370,"./divide":371,"./dot":372,"./fromValues":373,"./inverse":375,"./length":376,
"./lerp":377,"./max":378,"./min":379,"./multiply":380,"./negate":381,"./normalize":382,"./random":383,"./scale":384,"./scaleAndAdd":385,"./set":386,"./squaredDistance":387,"./squaredLength":388,"./subtract":389,"./transformMat4":390,"./transformQuat":391}],375:[function(a,t,m){t.exports=function(a,g){a[0]=1/g[0];a[1]=1/g[1];a[2]=1/g[2];a[3]=1/g[3];return a}},{}],376:[function(a,t,m){t.exports=function(a){var g=a[0],h=a[1],e=a[2];a=a[3];return Math.sqrt(g*g+h*h+e*e+a*a)}},{}],377:[function(a,t,m){t.exports=
function(a,g,h,e){var n=g[0],b=g[1],l=g[2];g=g[3];a[0]=n+e*(h[0]-n);a[1]=b+e*(h[1]-b);a[2]=l+e*(h[2]-l);a[3]=g+e*(h[3]-g);return a}},{}],378:[function(a,t,m){t.exports=function(a,g,h){a[0]=Math.max(g[0],h[0]);a[1]=Math.max(g[1],h[1]);a[2]=Math.max(g[2],h[2]);a[3]=Math.max(g[3],h[3]);return a}},{}],379:[function(a,t,m){t.exports=function(a,g,h){a[0]=Math.min(g[0],h[0]);a[1]=Math.min(g[1],h[1]);a[2]=Math.min(g[2],h[2]);a[3]=Math.min(g[3],h[3]);return a}},{}],380:[function(a,t,m){t.exports=function(a,
g,h){a[0]=g[0]*h[0];a[1]=g[1]*h[1];a[2]=g[2]*h[2];a[3]=g[3]*h[3];return a}},{}],381:[function(a,t,m){t.exports=function(a,g){a[0]=-g[0];a[1]=-g[1];a[2]=-g[2];a[3]=-g[3];return a}},{}],382:[function(a,t,m){t.exports=function(a,g){var h=g[0],e=g[1],n=g[2];g=g[3];var b=h*h+e*e+n*n+g*g;0<b&&(b=1/Math.sqrt(b),a[0]=h*b,a[1]=e*b,a[2]=n*b,a[3]=g*b);return a}},{}],383:[function(a,t,m){var p=a("./normalize"),g=a("./scale");t.exports=function(a,e){e=e||1;a[0]=Math.random();a[1]=Math.random();a[2]=Math.random();
a[3]=Math.random();p(a,a);g(a,a,e);return a}},{"./normalize":382,"./scale":384}],384:[function(a,t,m){t.exports=function(a,g,h){a[0]=g[0]*h;a[1]=g[1]*h;a[2]=g[2]*h;a[3]=g[3]*h;return a}},{}],385:[function(a,t,m){t.exports=function(a,g,h,e){a[0]=g[0]+h[0]*e;a[1]=g[1]+h[1]*e;a[2]=g[2]+h[2]*e;a[3]=g[3]+h[3]*e;return a}},{}],386:[function(a,t,m){t.exports=function(a,g,h,e,n){a[0]=g;a[1]=h;a[2]=e;a[3]=n;return a}},{}],387:[function(a,t,m){t.exports=function(a,g){var h=g[0]-a[0],e=g[1]-a[1],n=g[2]-a[2];
a=g[3]-a[3];return h*h+e*e+n*n+a*a}},{}],388:[function(a,t,m){t.exports=function(a){var g=a[0],h=a[1],e=a[2];a=a[3];return g*g+h*h+e*e+a*a}},{}],389:[function(a,t,m){t.exports=function(a,g,h){a[0]=g[0]-h[0];a[1]=g[1]-h[1];a[2]=g[2]-h[2];a[3]=g[3]-h[3];return a}},{}],390:[function(a,t,m){t.exports=function(a,g,h){var e=g[0],n=g[1],b=g[2];g=g[3];a[0]=h[0]*e+h[4]*n+h[8]*b+h[12]*g;a[1]=h[1]*e+h[5]*n+h[9]*b+h[13]*g;a[2]=h[2]*e+h[6]*n+h[10]*b+h[14]*g;a[3]=h[3]*e+h[7]*n+h[11]*b+h[15]*g;return a}},{}],391:[function(a,
t,m){t.exports=function(a,g,h){var e=g[0],n=g[1],b=g[2],l=h[0],u=h[1],q=h[2];h=h[3];var d=h*e+u*b-q*n,f=h*n+q*e-l*b,c=h*b+l*n-u*e;e=-l*e-u*n-q*b;a[0]=d*h+e*-l+f*-q-c*-u;a[1]=f*h+e*-u+c*-l-d*-q;a[2]=c*h+e*-q+d*-u-f*-l;a[3]=g[3];return a}},{}],392:[function(a,t,m){t.exports=function(a,e,n,b){p[0]=b;p[1]=n;p[2]=e;p[3]=a;return g[0]};var p=new Uint8Array(4),g=new Float32Array(p.buffer)},{}],393:[function(a,t,m){var p=a("glsl-tokenizer"),g=a("atob-lite");t.exports=function(a){a=Array.isArray(a)?a:p(a);
for(var e=0;e<a.length;e++){var h=a[e];if("preprocessor"===h.type&&(h=h.data.match(/#define\s+SHADER_NAME(_B64)?\s+(.+)$/))&&h[2])return a=h[2],(h[1]?g(a):a).trim()}}},{"atob-lite":62,"glsl-tokenizer":400}],394:[function(a,t,m){t.exports=function(a){function m(b){b.length&&R.push({type:x[L],data:b,position:S,line:T,column:P})}function t(){O=O.length?[]:O;if("/"===N&&"*"===M)return S=J+I-1,L=u,N=M,I+1;if("/"===N&&"/"===M)return S=J+I-1,L=q,N=M,I+1;if("#"===M)return L=d,S=J+I,I;if(/\s/.test(M))return L=
A,S=J+I,I;ba=/\d/.test(M);da=/[^\w_]/.test(M);S=J+I;L=ba?c:da?f:l;return I}function F(){if(("\r"===M||"\n"===M)&&"\\"!==N)return m(O.join("")),L=b,I;O.push(M);N=M;return I+1}function G(){if("."===N&&/\d/.test(M))return L=k,I;if("/"===N&&"*"===M)return L=u,I;if("/"===N&&"/"===M)return L=q,I;if("."===M&&O.length){for(;H(O););L=k;return I}if(";"===M||")"===M||"("===M){if(O.length)for(;H(O););m(M);L=b;return I+1}var a=2===O.length&&"\x3d"!==M;if(/[\w_\d\s]/.test(M)||a){for(;H(O););L=b;return I}O.push(M);
N=M;return I+1}function H(b){var a=0;do{var c=g.indexOf(b.slice(0,b.length+a).join(""));var d=g[c];if(-1===c){if(0<a--+b.length)continue;d=b.slice(0,1).join("")}m(d);S+=d.length;O=O.slice(d.length);return O.length}while(1)}function E(){if("."===M||/[eE]/.test(M))return O.push(M),L=k,N=M,I+1;if("x"===M&&1===O.length&&"0"===O[0])return L=w,O.push(M),N=M,I+1;if(/[^\d]/.test(M))return m(O.join("")),L=b,I;O.push(M);N=M;return I+1}function K(){"f"===M&&(O.push(M),N=M,I+=1);if(/[eE]/.test(M)||"-"===M&&/[eE]/.test(N))return O.push(M),
N=M,I+1;if(/[^\d]/.test(M))return m(O.join("")),L=b,I;O.push(M);N=M;return I+1}var I=0,J=0,L=b,M,N,O=[],R=[],T=1,P=0,S=0,ba=!1,da=!1,ca="",Y;a=a||{};var W=h,ea=p;"300 es"===a.version&&(W=n,ea=e);return function(a){R=[];if(null!==a){a=a.replace?a.replace(/\r\n/g,"\n"):a;I=0;ca+=a;for(Y=ca.length;M=ca[I],I<Y;){a=I;switch(L){case u:"/"===M&&"*"===N?(O.push(M),m(O.join("")),L=b):(O.push(M),N=M);I+=1;break;case q:I=F();break;case d:I=F();break;case f:I=G();break;case c:I=E();break;case w:/[^a-fA-F0-9]/.test(M)?
(m(O.join("")),L=b):(O.push(M),N=M,I+=1);break;case k:I=K();break;case l:if(/[^\d\w_]/.test(M)){var e=O.join("");L=-1<ea.indexOf(e)?z:-1<W.indexOf(e)?v:r;m(O.join(""));L=b}else O.push(M),N=M,I+=1;break;case A:/[^\s]/g.test(M)?(m(O.join("")),L=b):(O.push(M),N=M,I+=1);break;case b:I=t()}if(a!==I)switch(ca[a]){case "\n":P=0;++T;break;default:++P}}J+=I;ca=ca.slice(I);return R}O.length&&m(O.join(""));L=y;m("(eof)");return R}};var p=a("./lib/literals"),g=a("./lib/operators"),h=a("./lib/builtins"),e=a("./lib/literals-300es"),
n=a("./lib/builtins-300es"),b=999,l=9999,u=0,q=1,d=2,f=3,c=4,k=5,r=6,v=7,z=8,A=9,y=10,w=11,x="block-comment line-comment preprocessor operator integer float ident builtin keyword whitespace eof integer".split(" ")},{"./lib/builtins":396,"./lib/builtins-300es":395,"./lib/literals":398,"./lib/literals-300es":397,"./lib/operators":399}],395:[function(a,t,m){a=a("./builtins");a=a.slice().filter(function(a){return!/^(gl_|texture)/.test(a)});t.exports=a.concat("gl_VertexID gl_InstanceID gl_Position gl_PointSize gl_FragCoord gl_FrontFacing gl_FragDepth gl_PointCoord gl_MaxVertexAttribs gl_MaxVertexUniformVectors gl_MaxVertexOutputVectors gl_MaxFragmentInputVectors gl_MaxVertexTextureImageUnits gl_MaxCombinedTextureImageUnits gl_MaxTextureImageUnits gl_MaxFragmentUniformVectors gl_MaxDrawBuffers gl_MinProgramTexelOffset gl_MaxProgramTexelOffset gl_DepthRangeParameters gl_DepthRange trunc round roundEven isnan isinf floatBitsToInt floatBitsToUint intBitsToFloat uintBitsToFloat packSnorm2x16 unpackSnorm2x16 packUnorm2x16 unpackUnorm2x16 packHalf2x16 unpackHalf2x16 outerProduct transpose determinant inverse texture textureSize textureProj textureLod textureOffset texelFetch texelFetchOffset textureProjOffset textureLodOffset textureProjLod textureProjLodOffset textureGrad textureGradOffset textureProjGrad textureProjGradOffset".split(" "))},
{"./builtins":396}],396:[function(a,t,m){t.exports="abs acos all any asin atan ceil clamp cos cross dFdx dFdy degrees distance dot equal exp exp2 faceforward floor fract gl_BackColor gl_BackLightModelProduct gl_BackLightProduct gl_BackMaterial gl_BackSecondaryColor gl_ClipPlane gl_ClipVertex gl_Color gl_DepthRange gl_DepthRangeParameters gl_EyePlaneQ gl_EyePlaneR gl_EyePlaneS gl_EyePlaneT gl_Fog gl_FogCoord gl_FogFragCoord gl_FogParameters gl_FragColor gl_FragCoord gl_FragData gl_FragDepth gl_FragDepthEXT gl_FrontColor gl_FrontFacing gl_FrontLightModelProduct gl_FrontLightProduct gl_FrontMaterial gl_FrontSecondaryColor gl_LightModel gl_LightModelParameters gl_LightModelProducts gl_LightProducts gl_LightSource gl_LightSourceParameters gl_MaterialParameters gl_MaxClipPlanes gl_MaxCombinedTextureImageUnits gl_MaxDrawBuffers gl_MaxFragmentUniformComponents gl_MaxLights gl_MaxTextureCoords gl_MaxTextureImageUnits gl_MaxTextureUnits gl_MaxVaryingFloats gl_MaxVertexAttribs gl_MaxVertexTextureImageUnits gl_MaxVertexUniformComponents gl_ModelViewMatrix gl_ModelViewMatrixInverse gl_ModelViewMatrixInverseTranspose gl_ModelViewMatrixTranspose gl_ModelViewProjectionMatrix gl_ModelViewProjectionMatrixInverse gl_ModelViewProjectionMatrixInverseTranspose gl_ModelViewProjectionMatrixTranspose gl_MultiTexCoord0 gl_MultiTexCoord1 gl_MultiTexCoord2 gl_MultiTexCoord3 gl_MultiTexCoord4 gl_MultiTexCoord5 gl_MultiTexCoord6 gl_MultiTexCoord7 gl_Normal gl_NormalMatrix gl_NormalScale gl_ObjectPlaneQ gl_ObjectPlaneR gl_ObjectPlaneS gl_ObjectPlaneT gl_Point gl_PointCoord gl_PointParameters gl_PointSize gl_Position gl_ProjectionMatrix gl_ProjectionMatrixInverse gl_ProjectionMatrixInverseTranspose gl_ProjectionMatrixTranspose gl_SecondaryColor gl_TexCoord gl_TextureEnvColor gl_TextureMatrix gl_TextureMatrixInverse gl_TextureMatrixInverseTranspose gl_TextureMatrixTranspose gl_Vertex greaterThan greaterThanEqual inversesqrt length lessThan lessThanEqual log log2 matrixCompMult max min mix mod normalize not notEqual pow radians reflect refract sign sin smoothstep sqrt step tan texture2D texture2DLod texture2DProj texture2DProjLod textureCube textureCubeLod texture2DLodEXT texture2DProjLodEXT textureCubeLodEXT texture2DGradEXT texture2DProjGradEXT textureCubeGradEXT".split(" ")},
{}],397:[function(a,t,m){a=a("./literals");t.exports=a.slice().concat("layout centroid smooth case mat2x2 mat2x3 mat2x4 mat3x2 mat3x3 mat3x4 mat4x2 mat4x3 mat4x4 uint uvec2 uvec3 uvec4 samplerCubeShadow sampler2DArray sampler2DArrayShadow isampler2D isampler3D isamplerCube isampler2DArray usampler2D usampler3D usamplerCube usampler2DArray coherent restrict readonly writeonly resource atomic_uint noperspective patch sample subroutine common partition active filter image1D image2D image3D imageCube iimage1D iimage2D iimage3D iimageCube uimage1D uimage2D uimage3D uimageCube image1DArray image2DArray iimage1DArray iimage2DArray uimage1DArray uimage2DArray image1DShadow image2DShadow image1DArrayShadow image2DArrayShadow imageBuffer iimageBuffer uimageBuffer sampler1DArray sampler1DArrayShadow isampler1D isampler1DArray usampler1D usampler1DArray isampler2DRect usampler2DRect samplerBuffer isamplerBuffer usamplerBuffer sampler2DMS isampler2DMS usampler2DMS sampler2DMSArray isampler2DMSArray usampler2DMSArray".split(" "))},
{"./literals":398}],398:[function(a,t,m){t.exports="precision highp mediump lowp attribute const uniform varying break continue do for while if else in out inout float int void bool true false discard return mat2 mat3 mat4 vec2 vec3 vec4 ivec2 ivec3 ivec4 bvec2 bvec3 bvec4 sampler1D sampler2D sampler3D samplerCube sampler1DShadow sampler2DShadow struct asm class union enum typedef template this packed goto switch default inline noinline volatile public static extern external interface long short double half fixed unsigned input output hvec2 hvec3 hvec4 dvec2 dvec3 dvec4 fvec2 fvec3 fvec4 sampler2DRect sampler3DRect sampler2DRectShadow sizeof cast namespace using".split(" ")},
{}],399:[function(a,t,m){t.exports="\x3c\x3c\x3d \x3e\x3e\x3d ++ -- \x3c\x3c \x3e\x3e \x3c\x3d \x3e\x3d \x3d\x3d !\x3d \x26\x26 || +\x3d -\x3d *\x3d /\x3d %\x3d \x26\x3d ^^ ^\x3d |\x3d ( ) [ ] . ! ~ * / % + - \x3c \x3e \x26 ^ | ? : \x3d , ; { }".split(" ")},{}],400:[function(a,t,m){var p=a("./index");t.exports=function(a,h){h=p(h);var e=[];e=e.concat(h(a));return e=e.concat(h(null))}},{"./index":394}],401:[function(a,t,m){t.exports=function(a){"string"===typeof a&&(a=[a]);for(var g=[].slice.call(arguments,
1),h=[],e=0;e<a.length-1;e++)h.push(a[e],g[e]||"");h.push(a[e]);return h.join("")}},{}],402:[function(a,t,m){m="undefined"!==typeof ja?ja:"undefined"!==typeof self?self:"undefined"!==typeof window?window:{};a=a("is-browser");a="function"===typeof m.matchMedia?!m.matchMedia("(hover: none)").matches:a;t.exports=a},{"is-browser":409}],403:[function(a,t,m){function p(){var a=!1;try{var h=Object.defineProperty({},"passive",{get:function(){a=!0}});window.addEventListener("test",null,h);window.removeEventListener("test",
null,h)}catch(e){a=!1}return a}a=a("is-browser");t.exports=a&&p()},{"is-browser":409}],404:[function(a,t,m){m.read=function(a,g,h,e,n){var b=8*n-e-1;var l=(1<<b)-1,u=l>>1,q=-7;n=h?n-1:0;var d=h?-1:1,f=a[g+n];n+=d;h=f&(1<<-q)-1;f>>=-q;for(q+=b;0<q;h=256*h+a[g+n],n+=d,q-=8);b=h&(1<<-q)-1;h>>=-q;for(q+=e;0<q;b=256*b+a[g+n],n+=d,q-=8);if(0===h)h=1-u;else{if(h===l)return b?NaN:Infinity*(f?-1:1);b+=Math.pow(2,e);h-=u}return(f?-1:1)*b*Math.pow(2,h-e)};m.write=function(a,g,h,e,n,b){var l,u=8*b-n-1,q=(1<<
u)-1,d=q>>1,f=23===n?Math.pow(2,-24)-Math.pow(2,-77):0;b=e?0:b-1;var c=e?1:-1,k=0>g||0===g&&0>1/g?1:0;g=Math.abs(g);isNaN(g)||Infinity===g?(g=isNaN(g)?1:0,e=q):(e=Math.floor(Math.log(g)/Math.LN2),1>g*(l=Math.pow(2,-e))&&(e--,l*=2),g=1<=e+d?g+f/l:g+f*Math.pow(2,1-d),2<=g*l&&(e++,l/=2),e+d>=q?(g=0,e=q):1<=e+d?(g=(g*l-1)*Math.pow(2,n),e+=d):(g=g*Math.pow(2,d-1)*Math.pow(2,n),e=0));for(;8<=n;a[h+b]=g&255,b+=c,g/=256,n-=8);e=e<<n|g;for(u+=n;0<u;a[h+b]=e&255,b+=c,e/=256,u-=8);a[h+b-c]|=128*k}},{}],405:[function(a,
t,m){function p(b,a,f){this.vertices=b;this.adjacent=a;this.boundary=f;this.lastVisited=-1}function g(b,a,f){this.vertices=b;this.cell=a;this.index=f}function h(b,a){return l(b.vertices,a.vertices)}function e(a){for(var d=["function orient(){var tuple\x3dthis.tuple;return test("],f=0;f<=a;++f)0<f&&d.push(","),d.push("tuple[",f,"]");d.push(")}return orient");d=new Function("test",d.join(""));(a=b[a+1])||(a=b);return d(a)}function n(b,a,f){this.dimension=b;this.vertices=a;this.simplices=f;this.interior=
f.filter(function(b){return!b.boundary});this.tuple=Array(b+1);for(a=0;a<=b;++a)this.tuple[a]=this.vertices[a];(a=u[b])||(a=u[b]=e(b));this.orient=a}t.exports=function(a,d){var f=a.length;if(0===f)throw Error("Must have at least d+1 points");var c=a[0].length;if(f<=c)throw Error("Must input at least d+1 points");var e=a.slice(0,c+1),g=b.apply(void 0,e);if(0===g)throw Error("Input not in general position");for(var h=Array(c+1),l=0;l<=c;++l)h[l]=l;0>g&&(h[0]=1,h[1]=0);g=new p(h,Array(c+1),!1);var q=
g.adjacent,u=Array(c+2);for(l=0;l<=c;++l){for(var w=h.slice(),m=0;m<=c;++m)m===l&&(w[m]=-1);m=w[0];w[0]=w[1];w[1]=m;w=new p(w,Array(c+1),!0);q[l]=w;u[l]=w}u[c+1]=g;for(l=0;l<=c;++l)for(w=q[l].vertices,h=q[l].adjacent,m=0;m<=c;++m){var t=w[m];if(0>t)h[m]=g;else for(var B=0;B<=c;++B)0>q[B].vertices.indexOf(t)&&(h[m]=q[B])}e=new n(c,e,u);d=!!d;for(l=c+1;l<f;++l)e.insert(a[l],d);return e.boundary()};var b=a("robust-orientation"),l=a("simplicial-complex").compareCells;p.prototype.flip=function(){var b=
this.vertices[0];this.vertices[0]=this.vertices[1];this.vertices[1]=b;b=this.adjacent[0];this.adjacent[0]=this.adjacent[1];this.adjacent[1]=b};var u=[];a=n.prototype;a.handleBoundaryDegeneracy=function(b,a){var d=this.dimension,c=this.vertices.length-1,e=this.tuple,g=this.vertices,h=[b];for(b.lastVisited=-c;0<h.length;){b=h.pop();b=b.adjacent;for(var l=0;l<=d;++l){var n=b[l];if(n.boundary&&!(n.lastVisited<=-c)){for(var q=n.vertices,u=0;u<=d;++u){var p=q[u];e[u]=0>p?a:g[p]}q=this.orient();if(0<q)return n;
n.lastVisited=-c;0===q&&h.push(n)}}}return null};a.walk=function(b,a){var d=this.vertices.length-1,c=this.dimension,e=this.vertices,g=this.tuple,h=this.interior[a?this.interior.length*Math.random()|0:this.interior.length-1];a:for(;!h.boundary;){var l=h.vertices;a=h.adjacent;for(var n=0;n<=c;++n)g[n]=e[l[n]];h.lastVisited=d;for(n=0;n<=c;++n)if(h=a[n],!(h.lastVisited>=d)){l=g[n];g[n]=b;var q=this.orient();g[n]=l;if(0>q)continue a;else h.lastVisited=h.boundary?-d:d}return}return h};a.addPeaks=function(b,
a){var d=this.vertices.length-1,c=this.dimension,e=this.vertices,r=this.tuple,l=this.interior,n=this.simplices,q=[a];a.lastVisited=d;a.vertices[a.vertices.indexOf(-1)]=d;a.boundary=!1;l.push(a);for(var u=[];0<q.length;){a=q.pop();var w=a.vertices,m=a.adjacent,t=w.indexOf(d);if(!(0>t))for(var B=0;B<=c;++B)if(B!==t){var C=m[B];if(C.boundary&&!(C.lastVisited>=d)){var D=C.vertices;if(C.lastVisited!==-d){for(var G=0,H=0;H<=c;++H)0>D[H]?(G=H,r[H]=b):r[H]=e[D[H]];if(0<this.orient()){D[G]=d;C.boundary=!1;
l.push(C);q.push(C);C.lastVisited=d;continue}else C.lastVisited=-d}H=C.adjacent;D=w.slice();var E=m.slice();G=new p(D,E,!0);n.push(G);var K=H.indexOf(a);if(!(0>K))for(H[K]=G,E[t]=C,D[B]=-1,E[B]=a,m[B]=G,G.flip(),H=0;H<=c;++H)if(C=D[H],!(0>C||C===d)){C=Array(c-1);for(K=E=0;K<=c;++K){var I=D[K];0>I||K===H||(C[E++]=I)}u.push(new g(C,G,H))}}}}u.sort(h);for(B=0;B+1<u.length;B+=2)b=u[B],a=u[B+1],d=a.index,0>b.index||0>d||(b.cell.adjacent[b.index]=a.cell,a.cell.adjacent[a.index]=b.cell)};a.insert=function(b,
a){var d=this.vertices;d.push(b);if(a=this.walk(b,a)){for(var c=this.dimension,e=this.tuple,g=0;g<=c;++g){var h=a.vertices[g];e[g]=0>h?b:d[h]}d=this.orient(e);if(!(0>d)){if(0===d&&(a=this.handleBoundaryDegeneracy(a,b),!a))return;this.addPeaks(b,a)}}};a.boundary=function(){for(var b=this.dimension,a=[],f=this.simplices,c=f.length,e=0;e<c;++e){var g=f[e];if(g.boundary){var h=Array(b);g=g.vertices;for(var l=0,n=0,u=0;u<=b;++u)0<=g[u]?h[l++]=g[u]:n=u&1;n===(b&1)&&(g=h[0],h[0]=h[1],h[1]=g);a.push(h)}}return a}},
{"robust-orientation":494,"simplicial-complex":504}],406:[function(a,t,m){function p(b,a,c,d,f){this.mid=b;this.left=a;this.right=c;this.leftPoints=d;this.rightPoints=f;this.count=(a?a.count:0)+(c?c.count:0)+d.length}function g(b,a){b.mid=a.mid;b.left=a.left;b.right=a.right;b.leftPoints=a.leftPoints;b.rightPoints=a.rightPoints;b.count=a.count}function h(b,a){a=f(a);b.mid=a.mid;b.left=a.left;b.right=a.right;b.leftPoints=a.leftPoints;b.rightPoints=a.rightPoints;b.count=a.count}function e(b,a){var c=
b.intervals([]);a=c.indexOf(a);if(0>a)return 0;c.splice(a,1);h(b,c);return 1}function n(b,a,c){for(var d=0;d<b.length&&b[d][0]<=a;++d){var f=c(b[d]);if(f)return f}}function b(b,a,c){for(var d=b.length-1;0<=d&&b[d][1]>=a;--d){var f=c(b[d]);if(f)return f}}function l(b,a){for(var c=0;c<b.length;++c){var d=a(b[c]);if(d)return d}}function u(b,a){return b-a}function q(b,a){var c=b[0]-a[0];return c?c:b[1]-a[1]}function d(b,a){var c=b[1]-a[1];return c?c:b[0]-a[0]}function f(b){if(0===b.length)return null;
for(var a=[],c=0;c<b.length;++c)a.push(b[c][0],b[c][1]);a.sort(u);a=a[a.length>>1];var e=[],k=[],g=[];for(c=0;c<b.length;++c){var h=b[c];h[1]<a?e.push(h):a<h[0]?k.push(h):g.push(h)}b=g.slice();g.sort(q);b.sort(d);return new p(a,f(e),f(k),g,b)}function c(b){this.root=b}var k=a("binary-search-bounds");t.exports=function(b){return b&&0!==b.length?new c(f(b)):new c(null)};a=p.prototype;a.intervals=function(b){b.push.apply(b,this.leftPoints);this.left&&this.left.intervals(b);this.right&&this.right.intervals(b);
return b};a.insert=function(b){var a=this.count-this.leftPoints.length;this.count+=1;if(b[1]<this.mid)this.left?4*(this.left.count+1)>3*(a+1)?(a=this.intervals([]),a.push(b),h(this,a)):this.left.insert(b):this.left=f([b]);else if(b[0]>this.mid)this.right?4*(this.right.count+1)>3*(a+1)?(a=this.intervals([]),a.push(b),h(this,a)):this.right.insert(b):this.right=f([b]);else{a=k.ge(this.leftPoints,b,q);var c=k.ge(this.rightPoints,b,d);this.leftPoints.splice(a,0,b);this.rightPoints.splice(c,0,b)}};a.remove=
function(b){var a=this.count-this.leftPoints;if(b[1]<this.mid){if(!this.left)return 0;if(4*(this.right?this.right.count:0)>3*(a-1))return e(this,b);a=this.left.remove(b);if(2===a)return this.left=null,--this.count,1;1===a&&--this.count;return a}if(b[0]>this.mid){if(!this.right)return 0;if(4*(this.left?this.left.count:0)>3*(a-1))return e(this,b);a=this.right.remove(b);if(2===a)return this.right=null,--this.count,1;1===a&&--this.count;return a}if(1===this.count)return this.leftPoints[0]===b?2:0;if(1===
this.leftPoints.length&&this.leftPoints[0]===b){if(this.left&&this.right){b=this;for(var c=this.left;c.right;)b=c,c=c.right;if(b===this)c.right=this.right;else{var f=this.left;a=this.right;b.count-=c.count;b.right=c.left;c.left=f;c.right=a}g(this,c);this.count=(this.left?this.left.count:0)+(this.right?this.right.count:0)+this.leftPoints.length}else this.left?g(this,this.left):g(this,this.right);return 1}for(f=k.ge(this.leftPoints,b,q);f<this.leftPoints.length&&this.leftPoints[f][0]===b[0];++f)if(this.leftPoints[f]===
b)for(--this.count,this.leftPoints.splice(f,1),a=k.ge(this.rightPoints,b,d);a<this.rightPoints.length&&this.rightPoints[a][1]===b[1];++a)if(this.rightPoints[a]===b)return this.rightPoints.splice(a,1),1;return 0};a.queryPoint=function(a,c){if(a<this.mid){if(this.left){var d=this.left.queryPoint(a,c);if(d)return d}return n(this.leftPoints,a,c)}return a>this.mid?this.right&&(d=this.right.queryPoint(a,c))?d:b(this.rightPoints,a,c):l(this.leftPoints,c)};a.queryInterval=function(a,c,d){if(a<this.mid&&this.left){var f=
this.left.queryInterval(a,c,d);if(f)return f}return c>this.mid&&this.right&&(f=this.right.queryInterval(a,c,d))?f:c<this.mid?n(this.leftPoints,c,d):a>this.mid?b(this.rightPoints,a,d):l(this.leftPoints,d)};a=c.prototype;a.insert=function(b){this.root?this.root.insert(b):this.root=new p(b[0],null,null,[b],[b])};a.remove=function(b){return this.root?(b=this.root.remove(b),2===b&&(this.root=null),0!==b):!1};a.queryPoint=function(b,a){if(this.root)return this.root.queryPoint(b,a)};a.queryInterval=function(b,
a,c){if(b<=a&&this.root)return this.root.queryInterval(b,a,c)};Object.defineProperty(a,"count",{get:function(){return this.root?this.root.count:0}});Object.defineProperty(a,"intervals",{get:function(){return this.root?this.root.intervals([]):[]}})},{"binary-search-bounds":81}],407:[function(a,t,m){t.exports=function(a,g){g=g||Array(a.length);for(var h=0;h<a.length;++h)g[a[h]]=h;return g}},{}],408:[function(a,t,m){t.exports=function(a){for(var g=Array(a),h=0;h<a;++h)g[h]=h;return g}},{}],409:[function(a,
t,m){t.exports=!0},{}],410:[function(a,t,m){function p(a){return!!a.constructor&&"function"===typeof a.constructor.isBuffer&&a.constructor.isBuffer(a)}t.exports=function(a){return null!=a&&(p(a)||"function"===typeof a.readFloatLE&&"function"===typeof a.slice&&p(a.slice(0,0))||!!a._isBuffer)}},{}],411:[function(a,t,m){t.exports="undefined"!==typeof navigator&&(/MSIE/.test(navigator.userAgent)||/Trident\//.test(navigator.appVersion))},{}],412:[function(a,t,m){function p(a){a||(a={});var e=a.ua;e||"undefined"===
typeof navigator||(e=navigator.userAgent);e&&e.headers&&"string"===typeof e.headers["user-agent"]&&(e=e.headers["user-agent"]);return"string"!==typeof e?!1:a.tablet?h.test(e):g.test(e)}t.exports=p;t.exports.isMobile=p;var g=/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\.(browser|link)|vodafone|wap|windows (ce|phone)|xda|xiino/i,
h=/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\.(browser|link)|vodafone|wap|windows (ce|phone)|xda|xiino|android|ipad|playbook|silk/i},{}],413:[function(a,t,m){t.exports=function(a){var g=typeof a;return null!==a&&("object"===g||"function"===g)}},{}],414:[function(a,t,m){var p=Object.prototype.toString;
t.exports=function(a){var g;return"[object Object]"===p.call(a)&&(g=Object.getPrototypeOf(a),null===g||g===Object.getPrototypeOf({}))}},{}],415:[function(a,t,m){t.exports=function(a){for(var g=a.length,h,e=0;e<g;e++)if(h=a.charCodeAt(e),(9>h||13<h)&&32!==h&&133!==h&&160!==h&&5760!==h&&6158!==h&&(8192>h||8205<h)&&8232!==h&&8233!==h&&8239!==h&&8287!==h&&8288!==h&&12288!==h&&65279!==h)return!1;return!0}},{}],416:[function(a,t,m){t.exports=function(a){if("string"!==typeof a)return!1;a=a.trim();return/^[mzlhvcsqta]\s*[-+.0-9][^mlhvzcsqta]+/i.test(a)&&
/[\dz]$/i.test(a)&&4<a.length?!0:!1}},{}],417:[function(a,t,m){t.exports=function(a,g,h){return a*(1-h)+g*h}},{}],418:[function(a,t,m){(function(a){(function(a,h){"object"===typeof m&&"undefined"!==typeof t?t.exports=h():a.mapboxgl=h()})(this,function(){function g(b,a){if(h)if(e){b="var sharedChunk \x3d {}; ("+h+")(sharedChunk); ("+e+")(sharedChunk);";var g={};h(g);n=a(g);n.workerUrl=window.URL.createObjectURL(new Blob([b],{type:"text/javascript"}))}else e=a;else h=a}var h,e,n;g(["exports"],function(b){function e(b){return b&&
b.__esModule&&Object.prototype.hasOwnProperty.call(b,"default")?b.default:b}function g(b,a){return b(a={exports:{}},a.exports),a.exports}function h(b,a,c,d){this.cx=3*b;this.bx=3*(c-b)-this.cx;this.ax=1-this.cx-this.bx;this.cy=3*a;this.by=3*(d-a)-this.cy;this.ay=1-this.cy-this.by;this.p1x=b;this.p1y=d;this.p2x=c;this.p2y=d}function d(b,a){this.x=b;this.y=a}function f(b,a,c,d){var f=new $e(b,a,c,d);return function(b){return f.solve(b)}}function c(b,a,c){return Math.min(c,Math.max(a,b))}function k(b){for(var a=
[],c=arguments.length-1;0<c--;)a[c]=arguments[c+1];for(c=0;c<a.length;c+=1){var d=a[c],f;for(f in d)b[f]=d[f]}return b}function r(b,a){b.forEach(function(b){a[b]&&(a[b]=a[b].bind(a))})}function n(b,a){return-1!==b.indexOf(a,b.length-a.length)}function p(b,a,c){var d={},f;for(f in b)d[f]=a.call(c||this,b[f],f,b);return d}function A(b,a,c){var d={},f;for(f in b)a.call(c||this,b[f],f,b)&&(d[f]=b[f]);return d}function m(b){return Array.isArray(b)?b.map(m):"object"==typeof b&&b?p(b,m):b}function w(b){dd[b]||
("undefined"!=typeof console&&console.warn(b),dd[b]=!0)}function x(b,a,c){return(c.y-b.y)*(a.x-b.x)>(a.y-b.y)*(c.x-b.x)}function t(b){var a=new self.XMLHttpRequest,c;for(c in a.open("GET",b.url,!0),b.headers)a.setRequestHeader(c,b.headers[c]);return a.withCredentials="include"===b.credentials,a}function B(b,a,c){c&&c[b]&&(a=c[b].indexOf(a),-1!==a&&c[b].splice(a,1))}function C(b){var a=b.key;return(b=b.value)?[new Fa(a,b,"constants have been deprecated as of v8")]:[]}function D(b){for(var a=[],c=arguments.length-
1;0<c--;)a[c]=arguments[c+1];for(c=0;c<a.length;c+=1){var d=a[c],f;for(f in d)b[f]=d[f]}return b}function G(b){return b instanceof Number||b instanceof String||b instanceof Boolean?b.valueOf():b}function H(b){return Array.isArray(b)?b.map(H):G(b)}function E(b,a){return{kind:"array",itemType:b,N:a}}function K(b){if("array"===b.kind){var a=K(b.itemType);return"number"==typeof b.N?"array\x3c"+a+", "+b.N+"\x3e":"value"===b.itemType.kind?"array":"array\x3c"+a+"\x3e"}return b.kind}function I(b,a){if("error"===
a.kind)return null;if("array"===b.kind){if("array"===a.kind&&!I(b.itemType,a.itemType)&&("number"!=typeof b.N||b.N===a.N))return null}else{if(b.kind===a.kind)return null;if("value"===b.kind)for(var c=0,d=df;c<d.length;c+=1)if(!I(d[c],a))return null}return"Expected "+K(b)+" but found "+K(a)+" instead."}function J(b,a,c,d){return"number"==typeof b&&0<=b&&255>=b&&"number"==typeof a&&0<=a&&255>=a&&"number"==typeof c&&0<=c&&255>=c?void 0===d||"number"==typeof d&&0<=d&&1>=d?null:"Invalid rgba value ["+
[b,a,c,d].join(", ")+"]: 'a' must be between 0 and 1.":"Invalid rgba value ["+("number"==typeof d?[b,a,c,d]:[b,a,c]).join(", ")+"]: 'r', 'g', and 'b' must be between 0 and 255."}function L(b){if(null===b)return fd;if("string"==typeof b)return Za;if("boolean"==typeof b)return $a;if("number"==typeof b)return za;if(b instanceof cb)return Ub;if(b instanceof hc)return xb;if(Array.isArray(b)){for(var a,c=b.length,d=0;d<b.length;d+=1){var f=L(b[d]);if(a){if(a===f)continue;a=hb;break}a=f}return E(a||hb,c)}return Sb}
function M(b){if(b instanceof Vb&&("get"===b.name&&1===b.args.length||"has"===b.name&&1===b.args.length||"properties"===b.name||"geometry-type"===b.name||"id"===b.name||/^filter-/.test(b.name)))return!1;var a=!0;return b.eachChild(function(b){a&&!M(b)&&(a=!1)}),a}function N(b,a){if(b instanceof Vb&&0<=a.indexOf(b.name))return!1;var c=!0;return b.eachChild(function(b){c&&!N(b,a)&&(c=!1)}),c}function O(b,a){for(var c,d,f=0,e=b.length-1,k=0;f<=e;){if(c=b[k=Math.floor((f+e)/2)],d=b[k+1],a===c||a>c&&a<
d)return k;if(c<a)f=k+1;else{if(!(c>a))throw new ic("Input is not a number.");e=k-1}}return Math.max(k-1,0)}function R(b,a,c){return b*(1-c)+a*c}function T(b,a,c,d){d-=c;b-=c;return 0===d?0:1===a?b/d:(Math.pow(a,b)-1)/(Math.pow(a,d)-1)}function P(b){return"string"===b.kind||"number"===b.kind||"boolean"===b.kind||"null"===b.kind}function S(b,a){return function(){function c(b,a,c){this.type=$a;this.lhs=b;this.rhs=a;this.collator=c}return c.parse=function(b,a){if(3!==b.length&&4!==b.length)return a.error("Expected two or three arguments.");
var d=a.parse(b[1],1,hb);if(!d)return null;var f=a.parse(b[2],2,hb);if(!f)return null;if(!P(d.type)&&!P(f.type))return a.error("Expected at least one argument to be a string, number, boolean, or null, but found ("+K(d.type)+", "+K(f.type)+") instead.");if(d.type.kind!==f.type.kind&&"value"!==d.type.kind&&"value"!==f.type.kind)return a.error("Cannot compare "+K(d.type)+" and "+K(f.type)+".");var e=null;if(4===b.length){if("string"!==d.type.kind&&"string"!==f.type.kind)return a.error("Cannot use collator to compare non-string types.");
if(!(e=a.parse(b[3],3,xb)))return null}return new c(d,f,e)},c.prototype.evaluate=function(b){b=this.collator?0===this.collator.evaluate(b).compare(this.lhs.evaluate(b),this.rhs.evaluate(b)):this.lhs.evaluate(b)===this.rhs.evaluate(b);return a?!b:b},c.prototype.eachChild=function(b){b(this.lhs);b(this.rhs);this.collator&&b(this.collator)},c.prototype.possibleOutputs=function(){return[!0,!1]},c.prototype.serialize=function(){var a=[b];return this.eachChild(function(b){a.push(b.serialize())}),a},c}()}
function ba(b,a){var c=a[0],d=a[1],f=a[2];a=a[3];c=c.evaluate(b);d=d.evaluate(b);f=f.evaluate(b);b=a?a.evaluate(b):1;if(a=J(c,d,f,b))throw new ic(a);return new cb(c/255*b,d/255*b,f/255*b,b)}function da(b,a){b=a[b];return void 0===b?null:b}function ca(b,a){var c=a[1];return a[0].evaluate(b)<c.evaluate(b)}function Y(b,a){var c=a[1];return a[0].evaluate(b)>c.evaluate(b)}function W(b,a){var c=a[1];return a[0].evaluate(b)<=c.evaluate(b)}function ea(b,a){var c=a[1];return a[0].evaluate(b)>=c.evaluate(b)}
function U(b){return{result:"error",value:b}}function na(b){return b>Rg?Math.pow(b,1/3):b/lc+rc}function X(b){return b>kc?b*b*b:lc*(b-rc)}function ha(b){return 255*(.0031308>=b?12.92*b:1.055*Math.pow(b,1/2.4)-.055)}function fa(b){return.04045>=(b/=255)?b/12.92:Math.pow((b+.055)/1.055,2.4)}function oa(b){var a=fa(b.r),c=fa(b.g),d=fa(b.b),f=na((.4124564*a+.3575761*c+.1804375*d)/.95047),e=na(.2126729*a+.7151522*c+.072175*d);return{l:116*e-16,a:500*(f-e),b:200*(e-na((.0193339*a+.119192*c+.9503041*d)/
1.08883)),alpha:b.a}}function ua(b){var a=(b.l+16)/116,c=isNaN(b.a)?a:a+b.a/500,d=isNaN(b.b)?a:a-b.b/200;return a=1*X(a),c=.95047*X(c),d=1.08883*X(d),new cb(ha(3.2404542*c-1.5371385*a-.4985314*d),ha(-.969266*c+1.8760108*a+.041556*d),ha(.0556434*c-.2040259*a+1.0572252*d),b.alpha)}function Z(b){return b instanceof Number?"number":b instanceof String?"string":b instanceof Boolean?"boolean":Array.isArray(b)?"array":null===b?"null":typeof b}function qa(b){return"object"==typeof b&&null!==b&&!Array.isArray(b)}
function sa(b){return b}function V(b,a,c){return void 0!==b?b:void 0!==a?a:void 0!==c?c:void 0}function ia(b,a,c,d,f){return V(typeof c===f?d[c]:void 0,b.default,a.default)}function Ka(b,a,c){if("number"!==Z(c))return V(b.default,a.default);a=b.stops.length;if(1===a||c<=b.stops[0][0])return b.stops[0][1];if(c>=b.stops[a-1][0])return b.stops[a-1][1];c=Ha(b.stops,c);return b.stops[c][1]}function wa(b,a,c){var d=void 0!==b.base?b.base:1;if("number"!==Z(c))return V(b.default,a.default);var f=b.stops.length;
if(1===f||c<=b.stops[0][0])return b.stops[0][1];if(c>=b.stops[f-1][0])return b.stops[f-1][1];f=Ha(b.stops,c);var e=function(b,a,c,d){d-=c;b-=c;return 0===d?0:1===a?b/d:(Math.pow(a,b)-1)/(Math.pow(a,d)-1)}(c,d,b.stops[f][0],b.stops[f+1][0]),k=b.stops[f][1],g=b.stops[f+1][1],h=jc[a.type]||sa;if(b.colorSpace&&"rgb"!==b.colorSpace){var l=Tc[b.colorSpace];h=function(b,a){return l.reverse(l.interpolate(l.forward(b),l.forward(a),e))}}return"function"==typeof k.evaluate?{evaluate:function(){for(var b=[],
a=arguments.length;a--;)b[a]=arguments[a];a=k.evaluate.apply(void 0,b);b=g.evaluate.apply(void 0,b);if(void 0!==a&&void 0!==b)return h(a,b,e)}}:h(k,g,e)}function Aa(b,a,c){return"color"===a.type?c=cb.parse(c):Z(c)===a.type||"enum"===a.type&&a.values[c]||(c=void 0),V(c,b.default,a.default)}function Ha(b,a){for(var c,d,f=0,e=b.length-1,k=0;f<=e;){if(c=b[k=Math.floor((f+e)/2)][0],d=b[k+1][0],a===c||a>c&&a<d)return k;c<a?f=k+1:c>a&&(e=k-1)}return Math.max(k-1,0)}function Ba(b){return Array.isArray(b)&&
0<b.length&&"string"==typeof b[0]&&b[0]in Md}function va(b,a){var c=Ac;var d={color:Ub,string:Za,number:za,enum:Za,boolean:$a};d="array"===a.type?E(d[a.value]||hb,a.length):d[a.type]||null;c=new c(Md,[],d);return(b=c.parse(b))?{result:"success",value:new Ee(b,a)}:U(c.errors)}function pa(b,a){if("error"===(b=va(b,a)).result)return b;var c=b.value.expression,d=M(c);if(!d&&!a["property-function"])return U([new eb("","property expressions not supported")]);var f=N(c,["zoom"]);return f||!1!==a["zoom-function"]?
(c=function yd(b){var a=null;if(b instanceof hd)a=yd(b.result);else if(b instanceof gd)for(var c=0,d=b.args;c<d.length&&!(a=yd(d[c]));c+=1);else(b instanceof Ab||b instanceof bc)&&b.input instanceof Vb&&"zoom"===b.input.name&&(a=b);if(a instanceof eb)return a;b.eachChild(function(b){b=yd(b);b instanceof eb?a=b:!a&&b?a=new eb("",'"zoom" expression may only be used as input to a top-level "step" or "interpolate" expression.'):a&&b&&a!==b&&(a=new eb("",'Only one zoom-based "step" or "interpolate" subexpression may be used in an expression.'))});
return a}(c))||f?c instanceof eb?U([c]):c instanceof bc&&"piecewise-constant"===a.function?U([new eb("",'"interpolate" expressions cannot be used with this property')]):{result:"success",value:c?new gf(d?"camera":"composite",b.value,c):new Pf(d?"constant":"source",b.value)}:U([new eb("",'"zoom" expression may only be used as input to a top-level "step" or "interpolate" expression.')]):U([new eb("","zoom expressions not supported")])}function ya(b,a){if(qa(b))return new ff(b,a);if(Ba(b)){b=pa(b,a);
if("error"===b.result)throw Error(b.value.map(function(b){return b.key+": "+b.message}).join(", "));return b.value}var c=b;return"string"==typeof b&&"color"===a.type&&(c=cb.parse(b)),{kind:"constant",evaluate:function(){return c}}}function ka(b){var a=b.key,c=b.value,d=b.valueSpec||{},f=b.objectElementValidators||{},e=b.style;b=b.styleSpec;var k=[],g=Z(c);if("object"!==g)return[new Fa(a,c,"object expected, "+g+" found")];for(var h in c){var l=h.split(".")[0];g=d[l]||d["*"];if(f[l])l=f[l];else if(d[l])l=
fb;else if(f["*"])l=f["*"];else{if(!d["*"]){k.push(new Fa(a,c[h],'unknown property "'+h+'"'));continue}l=fb}k=k.concat(l({key:(a?a+".":a)+h,value:c[h],valueSpec:g,style:e,styleSpec:b,object:c,objectKey:h},c))}for(var r in d)f[r]||d[r].required&&void 0===d[r].default&&void 0===c[r]&&k.push(new Fa(a,c,'missing required property "'+r+'"'));return k}function xa(b){var a=b.value,c=b.valueSpec,d=b.style,f=b.styleSpec,e=b.key;b=b.arrayElementValidator||fb;if("array"!==Z(a))return[new Fa(e,a,"array expected, "+
Z(a)+" found")];if(c.length&&a.length!==c.length)return[new Fa(e,a,"array length "+c.length+" expected, length "+a.length+" found")];if(c["min-length"]&&a.length<c["min-length"])return[new Fa(e,a,"array length at least "+c["min-length"]+" expected, length "+a.length+" found")];var k={type:c.value};7>f.$version&&(k.function=c.function);"object"===Z(c.value)&&(k=c.value);c=[];for(var g=0;g<a.length;g++)c=c.concat(b({array:a,arrayIndex:g,value:a[g],valueSpec:k,style:d,styleSpec:f,key:e+"["+g+"]"}));
return c}function Ia(b){var a=b.key,c=b.value;b=b.valueSpec;var d=Z(c);return"number"!==d?[new Fa(a,c,"number expected, "+d+" found")]:"minimum"in b&&c<b.minimum?[new Fa(a,c,c+" is less than the minimum value "+b.minimum)]:"maximum"in b&&c>b.maximum?[new Fa(a,c,c+" is greater than the maximum value "+b.maximum)]:[]}function aa(b){function a(b){var a=[],d=b.value,g=b.key;if("array"!==Z(d))return[new Fa(g,d,"array expected, "+Z(d)+" found")];if(2!==d.length)return[new Fa(g,d,"array length 2 expected, length "+
d.length+" found")];if(n){if("object"!==Z(d[0]))return[new Fa(g,d,"object expected, "+Z(d[0])+" found")];if(void 0===d[0].zoom)return[new Fa(g,d,"object stop key must have zoom")];if(void 0===d[0].value)return[new Fa(g,d,"object stop key must have value")];if(e&&e>G(d[0].zoom))return[new Fa(g,d[0].zoom,"stop zoom values must appear in ascending order")];G(d[0].zoom)!==e&&(e=G(d[0].zoom),f=void 0,h={});a=a.concat(ka({key:g+"[0]",value:d[0],valueSpec:{zoom:{}},style:b.style,styleSpec:b.styleSpec,objectElementValidators:{zoom:Ia,
value:c}}))}else a=a.concat(c({key:g+"[0]",value:d[0],valueSpec:{},style:b.style,styleSpec:b.styleSpec},d));return a.concat(fb({key:g+"[1]",value:d[1],valueSpec:k,style:b.style,styleSpec:b.styleSpec}))}function c(b,a){var c=Z(b.value),e=G(b.value);a=null!==b.value?b.value:a;if(d){if(c!==d)return[new Fa(b.key,a,c+" stop domain type must match previous stop domain type "+d)]}else d=c;return"number"!==c&&"string"!==c&&"boolean"!==c?[new Fa(b.key,a,"stop domain value must be a number, string, or boolean")]:
"number"!==c&&"categorical"!==g?(c="number expected, "+c+" found",k["property-function"]&&void 0===g&&(c+='\nIf you intended to use a categorical function, specify `"type": "categorical"`.'),[new Fa(b.key,a,c)]):"categorical"!==g||"number"!==c||isFinite(e)&&Math.floor(e)===e?"categorical"!==g&&"number"===c&&void 0!==f&&e<f?[new Fa(b.key,a,"stop domain values must appear in ascending order")]:(f=e,"categorical"===g&&e in h?[new Fa(b.key,a,"stop domain values must be unique")]:(h[e]=!0,[])):[new Fa(b.key,
a,"integer expected, found "+e)]}var d,f,e,k=b.valueSpec,g=G(b.value.type),h={},l="categorical"!==g&&void 0===b.value.property,r=!l,n="array"===Z(b.value.stops)&&"array"===Z(b.value.stops[0])&&"object"===Z(b.value.stops[0][0]),q=ka({key:b.key,value:b.value,valueSpec:b.styleSpec.function,style:b.style,styleSpec:b.styleSpec,objectElementValidators:{stops:function(b){if("identity"===g)return[new Fa(b.key,b.value,'identity function may not have a "stops" property')];var c=[],d=b.value;c=c.concat(xa({key:b.key,
value:d,valueSpec:b.valueSpec,style:b.style,styleSpec:b.styleSpec,arrayElementValidator:a}));"array"===Z(d)&&0===d.length&&c.push(new Fa(b.key,d,"array must have at least one stop"));return c},default:function(b){return fb({key:b.key,value:b.value,valueSpec:k,style:b.style,styleSpec:b.styleSpec})}}});return"identity"===g&&l&&q.push(new Fa(b.key,b.value,'missing required property "property"')),"identity"===g||b.value.stops||q.push(new Fa(b.key,b.value,'missing required property "stops"')),"exponential"===
g&&"piecewise-constant"===b.valueSpec.function&&q.push(new Fa(b.key,b.value,"exponential functions not supported")),8<=b.styleSpec.$version&&(r&&!b.valueSpec["property-function"]?q.push(new Fa(b.key,b.value,"property functions not supported")):l&&!b.valueSpec["zoom-function"]&&"heatmap-color"!==b.objectKey&&"line-gradient"!==b.objectKey&&q.push(new Fa(b.key,b.value,"zoom functions not supported"))),"categorical"!==g&&!n||void 0!==b.value.property||q.push(new Fa(b.key,b.value,'"property" property is required')),
q}function Ea(b){var a=("property"===b.expressionContext?pa:va)(H(b.value),b.valueSpec);return"error"===a.result?a.value.map(function(a){return new Fa(""+b.key+a.key,b.value,a.message)}):"property"===b.expressionContext&&"text-font"===b.propertyKey&&-1!==a.value._styleExpression.expression.possibleOutputs().indexOf(void 0)?[new Fa(b.key,b.value,'Invalid data expression for "text-font". Output values must be contained as literals within the expression.')]:[]}function Ja(b){var a=b.key,c=b.value;b=
b.valueSpec;var d=[];return Array.isArray(b.values)?-1===b.values.indexOf(G(c))&&d.push(new Fa(a,c,"expected one of ["+b.values.join(", ")+"], "+JSON.stringify(c)+" found")):-1===Object.keys(b.values).indexOf(G(c))&&d.push(new Fa(a,c,"expected one of ["+Object.keys(b.values).join(", ")+"], "+JSON.stringify(c)+" found")),d}function Na(b){if(!Array.isArray(b)||0===b.length)return!1;switch(b[0]){case "has":return 2<=b.length&&"$id"!==b[1]&&"$type"!==b[1];case "in":case "!in":case "!has":case "none":return!1;
case "\x3d\x3d":case "!\x3d":case "\x3e":case "\x3e\x3d":case "\x3c":case "\x3c\x3d":return 3===b.length&&(Array.isArray(b[1])||Array.isArray(b[2]));case "any":case "all":var a=0;for(b=b.slice(1);a<b.length;a+=1){var c=b[a];if(!Na(c)&&"boolean"!=typeof c)return!1}return!0;default:return!0}}function Ra(b){if(!b)return function(){return!0};Na(b)||(b=Eb(b));var a=va(b,sh);if("error"===a.result)throw Error(a.value.map(function(b){return b.key+": "+b.message}).join(", "));return function(b,c){return a.value.evaluate(b,
c)}}function rb(b,a){return b<a?-1:b>a?1:0}function Eb(b){if(!b)return!0;var a,c=b[0];return 1>=b.length?"any"!==c:"\x3d\x3d"===c?dc(b[1],b[2],"\x3d\x3d"):"!\x3d"===c?Sa(dc(b[1],b[2],"\x3d\x3d")):"\x3c"===c||"\x3e"===c||"\x3c\x3d"===c||"\x3e\x3d"===c?dc(b[1],b[2],c):"any"===c?(a=b.slice(1),["any"].concat(a.map(Eb))):"all"===c?["all"].concat(b.slice(1).map(Eb)):"none"===c?["all"].concat(b.slice(1).map(Eb).map(Sa)):"in"===c?pb(b[1],b.slice(2)):"!in"===c?Sa(pb(b[1],b.slice(2))):"has"===c?Oa(b[1]):"!has"!==
c||Sa(Oa(b[1]))}function dc(b,a,c){switch(b){case "$type":return["filter-type-"+c,a];case "$id":return["filter-id-"+c,a];default:return["filter-"+c,b,a]}}function pb(b,a){if(0===a.length)return!1;switch(b){case "$type":return["filter-type-in",["literal",a]];case "$id":return["filter-id-in",["literal",a]];default:return 200<a.length&&!a.some(function(b){return typeof b!=typeof a[0]})?["filter-in-large",b,["literal",a.sort(rb)]]:["filter-in-small",b,["literal",a]]}}function Oa(b){switch(b){case "$type":return!0;
case "$id":return["filter-has-id"];default:return["filter-has",b]}}function Sa(b){return["!",b]}function Ya(b){return Na(H(b.value))?Ea(D({},b,{expressionContext:"filter",valueSpec:{value:"boolean"}})):function Vc(b){var a=b.value,c=b.key;if("array"!==Z(a))return[new Fa(c,a,"array expected, "+Z(a)+" found")];var d=b.styleSpec,f,e=[];if(1>a.length)return[new Fa(c,a,"filter array must have at least 1 element")];e=e.concat(Ja({key:c+"[0]",value:a[0],valueSpec:d.filter_operator,style:b.style,styleSpec:b.styleSpec}));
switch(G(a[0])){case "\x3c":case "\x3c\x3d":case "\x3e":case "\x3e\x3d":2<=a.length&&"$type"===G(a[1])&&e.push(new Fa(c,a,'"$type" cannot be use with operator "'+a[0]+'"'));case "\x3d\x3d":case "!\x3d":3!==a.length&&e.push(new Fa(c,a,'filter array for operator "'+a[0]+'" must have 3 elements'));case "in":case "!in":2<=a.length&&"string"!==(f=Z(a[1]))&&e.push(new Fa(c+"[1]",a[1],"string expected, "+f+" found"));for(var k=2;k<a.length;k++)f=Z(a[k]),"$type"===G(a[1])?e=e.concat(Ja({key:c+"["+k+"]",value:a[k],
valueSpec:d.geometry_type,style:b.style,styleSpec:b.styleSpec})):"string"!==f&&"number"!==f&&"boolean"!==f&&e.push(new Fa(c+"["+k+"]",a[k],"string, number, or boolean expected, "+f+" found"));break;case "any":case "all":case "none":for(d=1;d<a.length;d++)e=e.concat(Vc({key:c+"["+d+"]",value:a[d],style:b.style,styleSpec:b.styleSpec}));break;case "has":case "!has":f=Z(a[1]),2!==a.length?e.push(new Fa(c,a,'filter array for "'+a[0]+'" operator must have 2 elements')):"string"!==f&&e.push(new Fa(c+"[1]",
a[1],"string expected, "+f+" found"))}return e}(b)}function ja(b,a){var c=b.key,d=b.style,f=b.styleSpec,e=b.value,k=b.objectKey,g=f[a+"_"+b.layerType];if(!g)return[];var h=k.match(/^(.*)-transition$/);if("paint"===a&&h&&g[h[1]]&&g[h[1]].transition)return fb({key:c,value:e,valueSpec:f.transition,style:d,styleSpec:f});var l;a=b.valueSpec||g[k];if(!a)return[new Fa(c,e,'unknown property "'+k+'"')];if("string"===Z(e)&&a["property-function"]&&!a.tokens&&(l=/^{([^}]+)}$/.exec(e)))return[new Fa(c,e,'"'+k+
'" does not support interpolation syntax\nUse an identity property function instead: `{ "type": "identity", "property": '+JSON.stringify(l[1])+" }`.")];l=[];return"symbol"===b.layerType&&("text-field"===k&&d&&!d.glyphs&&l.push(new Fa(c,e,'use of "text-field" requires a style "glyphs" property')),"text-font"===k&&qa(H(e))&&"identity"===G(e.type)&&l.push(new Fa(c,e,'"text-font" does not support identity functions'))),l.concat(fb({key:b.key,value:e,valueSpec:a,style:d,styleSpec:f,expressionContext:"property",
propertyKey:k}))}function qb(b){return ja(b,"paint")}function gb(b){return ja(b,"layout")}function Pb(b){var a=[],c=b.value,d=b.key,f=b.style,e=b.styleSpec;c.type||c.ref||a.push(new Fa(d,c,'either "type" or "ref" is required'));var k,g=G(c.type),h=G(c.ref);if(c.id)for(var l=G(c.id),r=0;r<b.arrayIndex;r++){var n=f.layers[r];G(n.id)===l&&a.push(new Fa(d,c.id,'duplicate layer id "'+c.id+'", previously used at line '+n.id.__line__))}"ref"in c?(["type","source","source-layer","filter","layout"].forEach(function(b){b in
c&&a.push(new Fa(d,c[b],'"'+b+'" is prohibited for ref layers'))}),f.layers.forEach(function(b){G(b.id)===h&&(k=b)}),k?k.ref?a.push(new Fa(d,c.ref,"ref cannot reference another ref layer")):g=G(k.type):a.push(new Fa(d,c.ref,'ref layer "'+h+'" not found'))):"background"!==g&&(c.source?(l=(f=f.sources&&f.sources[c.source])&&G(f.type),f?"vector"===l&&"raster"===g?a.push(new Fa(d,c.source,'layer "'+c.id+'" requires a raster source')):"raster"===l&&"raster"!==g?a.push(new Fa(d,c.source,'layer "'+c.id+
'" requires a vector source')):"vector"!==l||c["source-layer"]?"raster-dem"===l&&"hillshade"!==g?a.push(new Fa(d,c.source,"raster-dem source can only be used with layer type 'hillshade'.")):"line"!==g||!c.paint||!c.paint["line-gradient"]||"geojson"===l&&f.lineMetrics||a.push(new Fa(d,c,'layer "'+c.id+'" specifies a line-gradient, which requires a GeoJSON source with `lineMetrics` enabled.')):a.push(new Fa(d,c,'layer "'+c.id+'" must specify a "source-layer"')):a.push(new Fa(d,c.source,'source "'+c.source+
'" not found'))):a.push(new Fa(d,c,'missing required property "source"')));return a=a.concat(ka({key:d,value:c,valueSpec:e.layer,style:b.style,styleSpec:b.styleSpec,objectElementValidators:{"*":function(){return[]},type:function(){return fb({key:d+".type",value:c.type,valueSpec:e.layer.type,style:b.style,styleSpec:b.styleSpec,object:c,objectKey:"type"})},filter:Ya,layout:function(b){return ka({layer:c,key:b.key,value:b.value,style:b.style,styleSpec:b.styleSpec,objectElementValidators:{"*":function(b){return gb(D({layerType:g},
b))}}})},paint:function(b){return ka({layer:c,key:b.key,value:b.value,style:b.style,styleSpec:b.styleSpec,objectElementValidators:{"*":function(b){return qb(D({layerType:g},b))}}})}}}))}function Yb(b){var a=b.value,c=b.key,d=b.styleSpec,f=b.style;if(!a.type)return[new Fa(c,a,'"type" is required')];var e=G(a.type),k=[];switch(e){case "vector":case "raster":case "raster-dem":if(k=k.concat(ka({key:c,value:a,valueSpec:d["source_"+e.replace("-","_")],style:b.style,styleSpec:d})),"url"in a)for(var g in a)0>
["type","url","tileSize"].indexOf(g)&&k.push(new Fa(c+"."+g,a[g],'a source with a "url" property may not include a "'+g+'" property'));return k;case "geojson":return ka({key:c,value:a,valueSpec:d.source_geojson,style:f,styleSpec:d});case "video":return ka({key:c,value:a,valueSpec:d.source_video,style:f,styleSpec:d});case "image":return ka({key:c,value:a,valueSpec:d.source_image,style:f,styleSpec:d});case "canvas":return k.push(new Fa(c,null,"Please use runtime APIs to add canvas sources, rather than including them in stylesheets.",
"source.canvas")),k;default:return Ja({key:c+".type",value:a.type,valueSpec:{values:"vector raster raster-dem geojson video image".split(" ")},style:f,styleSpec:d})}}function db(b){var a=b.value,c=b.styleSpec,d=c.light;b=b.style;var f=[],e=Z(a);if(void 0===a)return f;if("object"!==e)return f.concat([new Fa("light",a,"object expected, "+e+" found")]);for(var k in a)f=(e=k.match(/^(.*)-transition$/))&&d[e[1]]&&d[e[1]].transition?f.concat(fb({key:k,value:a[k],valueSpec:c.transition,style:b,styleSpec:c})):
d[k]?f.concat(fb({key:k,value:a[k],valueSpec:d[k],style:b,styleSpec:c})):f.concat([new Fa(k,a[k],'unknown property "'+k+'"')]);return f}function Lb(b){var a=b.value;b=b.key;var c=Z(a);return"string"!==c?[new Fa(b,a,"string expected, "+c+" found")]:[]}function fb(b){var a=b.value,c=b.valueSpec,d=b.styleSpec;return c.function&&qa(G(a))?aa(b):c.function&&Ba(H(a))?Ea(b):c.type&&Sg[c.type]?Sg[c.type](b):ka(D({},b,{valueSpec:c.type?d[c.type]:c}))}function nc(b){var a=b.value,c=b.key;b=Lb(b);return b.length?
b:(-1===a.indexOf("{fontstack}")&&b.push(new Fa(c,a,'"glyphs" url must include a "{fontstack}" token')),-1===a.indexOf("{range}")&&b.push(new Fa(c,a,'"glyphs" url must include a "{range}" token')),b)}function nb(b,a){a=a||ra;var c=[];return c=c.concat(fb({key:"",value:b,valueSpec:a.$root,styleSpec:a,style:b,objectElementValidators:{glyphs:nc,"*":function(){return[]}}})),b.constants&&(c=c.concat(C({key:"constants",value:b.constants,style:b,styleSpec:a}))),Ec(c)}function Ec(b){return[].concat(b).sort(function(b,
a){return b.line-a.line})}function Cb(b){return function(){return Ec(b.apply(this,arguments))}}function La(b,a){var c=!1;if(a&&a.length)for(var d=0;d<a.length;d+=1)b.fire(new Gb(Error(a[d].message))),c=!0;return c}function Pa(b,a,c){var d=this.cells=[];if(b instanceof ArrayBuffer){this.arrayBuffer=b;var f=new Int32Array(this.arrayBuffer);b=f[0];a=f[1];c=f[2];this.d=a+2*c;for(var e=0;e<this.d*this.d;e++){var k=f[Xd+e],g=f[Xd+e+1];d.push(k===g?null:f.subarray(k,g))}e=f[Xd+d.length+1];this.keys=f.subarray(f[Xd+
d.length],e);this.bboxes=f.subarray(e);this.insert=this._insertReadonly}else{this.d=a+2*c;for(f=0;f<this.d*this.d;f++)d.push([]);this.keys=[];this.bboxes=[]}this.n=a;this.extent=b;this.padding=c;this.scale=a/b;this.uid=0;a=c/a*b;this.min=-a;this.max=b+a}function Ca(b,a,c){void 0===c&&(c={});Object.defineProperty(a,"_classRegistryKey",{value:b,writeable:!1});hf[b]={klass:a,omit:c.omit||[],shallow:c.shallow||[]}}function Ta(b,a){if(null==b||"boolean"==typeof b||"number"==typeof b||"string"==typeof b||
b instanceof Boolean||b instanceof Number||b instanceof String||b instanceof Date||b instanceof RegExp)return b;if(b instanceof ArrayBuffer)return a&&a.push(b),b;if(ArrayBuffer.isView(b))return a&&a.push(b.buffer),b;if(b instanceof Tg)return a&&a.push(b.data.buffer),b;if(Array.isArray(b)){for(var c=[],d=0;d<b.length;d+=1)c.push(Ta(b[d],a));return c}if("object"==typeof b){var f=b.constructor;c=f._classRegistryKey;if(!c)throw Error("can't serialize object of unregistered class");d={};if(f.serialize)d._serialized=
f.serialize(b,a);else{for(var e in b)!b.hasOwnProperty(e)||0<=hf[c].omit.indexOf(e)||(f=b[e],d[e]=0<=hf[c].shallow.indexOf(e)?f:Ta(f,a));b instanceof Error&&(d.message=b.message)}return{name:c,properties:d}}throw Error("can't serialize object of type "+typeof b);}function ec(b){if(null==b||"boolean"==typeof b||"number"==typeof b||"string"==typeof b||b instanceof Boolean||b instanceof Number||b instanceof String||b instanceof Date||b instanceof RegExp||b instanceof ArrayBuffer||ArrayBuffer.isView(b)||
b instanceof Tg)return b;if(Array.isArray(b))return b.map(function(b){return ec(b)});if("object"==typeof b){var a=b.name;b=b.properties;if(!a)throw Error("can't deserialize object of anonymous class");var c=hf[a].klass;if(!c)throw Error("can't deserialize unregistered class "+a);if(c.deserialize)return c.deserialize(b._serialized);c=Object.create(c.prototype);for(var d=0,f=Object.keys(b);d<f.length;d+=1){var e=f[d];c[e]=0<=hf[a].shallow.indexOf(e)?b[e]:ec(b[e])}return c}throw Error("can't deserialize object of type "+
typeof b);}function qd(b){for(var a=0;a<b.length;a+=1)if(wc(b[a].charCodeAt(0)))return!0;return!1}function wc(b){return 746===b||747===b||!(4352>b)&&(!!Ga["Bopomofo Extended"](b)||!!Ga.Bopomofo(b)||!(!Ga["CJK Compatibility Forms"](b)||65097<=b&&65103>=b)||!!Ga["CJK Compatibility Ideographs"](b)||!!Ga["CJK Compatibility"](b)||!!Ga["CJK Radicals Supplement"](b)||!!Ga["CJK Strokes"](b)||!(!Ga["CJK Symbols and Punctuation"](b)||12296<=b&&12305>=b||12308<=b&&12319>=b||12336===b)||!!Ga["CJK Unified Ideographs Extension A"](b)||
!!Ga["CJK Unified Ideographs"](b)||!!Ga["Enclosed CJK Letters and Months"](b)||!!Ga["Hangul Compatibility Jamo"](b)||!!Ga["Hangul Jamo Extended-A"](b)||!!Ga["Hangul Jamo Extended-B"](b)||!!Ga["Hangul Jamo"](b)||!!Ga["Hangul Syllables"](b)||!!Ga.Hiragana(b)||!!Ga["Ideographic Description Characters"](b)||!!Ga.Kanbun(b)||!!Ga["Kangxi Radicals"](b)||!!Ga["Katakana Phonetic Extensions"](b)||!(!Ga.Katakana(b)||12540===b)||!(!Ga["Halfwidth and Fullwidth Forms"](b)||65288===b||65289===b||65293===b||65306<=
b&&65310>=b||65339===b||65341===b||65343===b||65371<=b&&65503>=b||65507===b||65512<=b&&65519>=b)||!(!Ga["Small Form Variants"](b)||65112<=b&&65118>=b||65123<=b&&65126>=b)||!!Ga["Unified Canadian Aboriginal Syllabics"](b)||!!Ga["Unified Canadian Aboriginal Syllabics Extended"](b)||!!Ga["Vertical Forms"](b)||!!Ga["Yijing Hexagram Symbols"](b)||!!Ga["Yi Syllables"](b)||!!Ga["Yi Radicals"](b))}function zb(b){var a;(a=wc(b))||(a=!!(Ga["Latin-1 Supplement"](b)&&(167===b||169===b||174===b||177===b||188===
b||189===b||190===b||215===b||247===b)||Ga["General Punctuation"](b)&&(8214===b||8224===b||8225===b||8240===b||8241===b||8251===b||8252===b||8258===b||8263===b||8264===b||8265===b||8273===b)||Ga["Letterlike Symbols"](b)||Ga["Number Forms"](b)||Ga["Miscellaneous Technical"](b)&&(8960<=b&&8967>=b||8972<=b&&8991>=b||8996<=b&&9E3>=b||9003===b||9085<=b&&9114>=b||9150<=b&&9165>=b||9167===b||9169<=b&&9179>=b||9186<=b&&9215>=b)||Ga["Control Pictures"](b)&&9251!==b||Ga["Optical Character Recognition"](b)||
Ga["Enclosed Alphanumerics"](b)||Ga["Geometric Shapes"](b)||Ga["Miscellaneous Symbols"](b)&&!(9754<=b&&9759>=b)||Ga["Miscellaneous Symbols and Arrows"](b)&&(11026<=b&&11055>=b||11088<=b&&11097>=b||11192<=b&&11243>=b)||Ga["CJK Symbols and Punctuation"](b)||Ga.Katakana(b)||Ga["Private Use Area"](b)||Ga["CJK Compatibility Forms"](b)||Ga["Small Form Variants"](b)||Ga["Halfwidth and Fullwidth Forms"](b)||8734===b||8756===b||8757===b||9984<=b&&10087>=b||10102<=b&&10131>=b||65532===b||65533===b));return!a}
function mb(b,a){void 0===a&&(a=1);var c=0,d=0;return{members:b.map(function(b){var f,e=(f=b.type,Tf[f].BYTES_PER_ELEMENT);f=c=Kb(c,Math.max(a,e));var k=b.components||1;return d=Math.max(d,e),c+=e*k,{name:b.name,type:b.type,components:k,offset:f}}),size:Kb(c,Math.max(d,a)),alignment:a}}function Kb(b,a){return Math.ceil(b/a)*a}function Oc(b){return[Hg(255*b.r,255*b.g),Hg(255*b.b,255*b.a)]}function vb(b){var a=8192/b.extent;b=b.loadGeometry();for(var c=0;c<b.length;c++)for(var d=b[c],f=0;f<d.length;f++){var e=
d[f];e.x=Math.round(e.x*a);e.y=Math.round(e.y*a);(e.x<cg.min||e.x>cg.max||e.y<cg.min||e.y>cg.max)&&w("Geometry exceeds allowed extent, reduce your vector tile buffer size")}return b}function xc(b,a,c,d,f){b.emplaceBack(2*a+(d+1)/2,2*c+(f+1)/2)}function Qd(b,a,c){for(var d=0;d<b.length;d++){var f=b[d];if(tc(f,a)||Zd(a,f,c))return!0}return!1}function Bb(b,a){if(1===b.length&&1===b[0].length)return $d(a,b[0][0]);for(var c=0;c<a.length;c++)for(var d=a[c],f=0;f<d.length;f++)if($d(b,d[f]))return!0;for(c=
0;c<b.length;c++){d=b[c];for(f=0;f<d.length;f++)if($d(a,d[f]))return!0;for(f=0;f<a.length;f++)if(Cc(d,a[f]))return!0}return!1}function yc(b,a,c){for(var d=0;d<a.length;d++)for(var f=a[d],e=0;e<b.length;e++){var k=b[e];if(3<=k.length)for(var g=0;g<f.length;g++)if(tc(k,f[g]))return!0;a:{g=f;var h=c;if(1<k.length){if(Cc(k,g)){k=!0;break a}for(var l=0;l<g.length;l++)if(Zd(g[l],k,h)){k=!0;break a}}for(l=0;l<k.length;l++)if(Zd(k[l],g,h)){k=!0;break a}k=!1}if(k)return!0}return!1}function Cc(b,a){if(0===
b.length||0===a.length)return!1;for(var c=0;c<b.length-1;c++)for(var d=b[c],f=b[c+1],e=0;e<a.length-1;e++){var k=d,g=f,h=a[e],l=a[e+1];if(x(k,h,l)!==x(g,h,l)&&x(k,g,h)!==x(k,g,l))return!0}return!1}function Zd(b,a,c){c*=c;if(1===a.length)return b.distSqr(a[0])<c;for(var d=1;d<a.length;d++)if(Wc(b,a[d-1],a[d])<c)return!0;return!1}function Wc(b,a,c){var d=a.distSqr(c);if(0===d)return b.distSqr(a);d=((b.x-a.x)*(c.x-a.x)+(b.y-a.y)*(c.y-a.y))/d;return 0>d?b.distSqr(a):1<d?b.distSqr(c):b.distSqr(c.sub(a)._mult(d)._add(a))}
function $d(b,a){for(var c,d,f,e=!1,k=0;k<b.length;k++){var g=0;for(f=(c=b[k]).length-1;g<c.length;f=g++)d=c[g],f=c[f],d.y>a.y!=f.y>a.y&&a.x<(f.x-d.x)*(a.y-d.y)/(f.y-d.y)+d.x&&(e=!e)}return e}function tc(b,a){for(var c=!1,d=0,f=b.length-1;d<b.length;f=d++){var e=b[d];f=b[f];e.y>a.y!=f.y>a.y&&a.x<(f.x-e.x)*(a.y-e.y)/(f.y-e.y)+e.x&&(c=!c)}return c}function Dc(b,a,c){var d=a.paint.get(b).value;return"constant"===d.kind?d.value:c.programConfigurations.get(a.id).binders[b].statistics.max}function ma(b){return Math.sqrt(b[0]*
b[0]+b[1]*b[1])}function Xc(b,a,c,d,f){if(!a[0]&&!a[1])return b;a=$b.convert(a);"viewport"===c&&a._rotate(-d);c=[];for(d=0;d<b.length;d++){for(var e=b[d],k=[],g=0;g<e.length;g++)k.push(e[g].sub(a._mult(f)));c.push(k)}return c}function rd(b,a,c){b=Ig.transformMat4([],[b.x,b.y,0,1],a);return new $b((b[0]/b[3]+1)*c.width*.5,(b[1]/b[3]+1)*c.height*.5)}function Yc(b,a,c,d){var f=a.width;a=a.height;if(d){if(d.length!==f*a*c)throw new RangeError("mismatched image size");}else d=new Uint8Array(f*a*c);return b.width=
f,b.height=a,b.data=d,b}function sd(b,a,c){var d=a.width;a=a.height;if(d!==b.width||a!==b.height){var f=Yc({},{width:d,height:a},c);Zc(b,f,{x:0,y:0},{x:0,y:0},{width:Math.min(b.width,d),height:Math.min(b.height,a)},c);b.width=d;b.height=a;b.data=f.data}}function Zc(b,a,c,d,f,e){if(0===f.width||0===f.height)return a;if(f.width>b.width||f.height>b.height||c.x>b.width-f.width||c.y>b.height-f.height)throw new RangeError("out of range source coordinates for image copy");if(f.width>a.width||f.height>a.height||
d.x>a.width-f.width||d.y>a.height-f.height)throw new RangeError("out of range destination coordinates for image copy");for(var k=b.data,g=a.data,h=0;h<f.height;h++)for(var l=((c.y+h)*b.width+c.x)*e,r=((d.y+h)*a.width+d.x)*e,n=0;n<f.width*e;n++)g[r+n]=k[l+n];return a}function Rd(b,a){for(var c=new Uint8Array(1024),d={},f=0,e=0;256>f;f++,e+=4){d[a]=f/255;var k=b.evaluate(d);c[e+0]=Math.floor(255*k.r/k.a);c[e+1]=Math.floor(255*k.g/k.a);c[e+2]=Math.floor(255*k.b/k.a);c[e+3]=Math.floor(255*k.a)}return new pd({width:256,
height:1},c)}function la(b,a,c){c=c||2;var d,f,e,k=a&&a.length,g=k?a[0]*c:b.length,h=ae(b,0,g,c,!0),l=[];if(!h)return l;if(k){k=c;var r,n=[];var q=0;for(r=a.length;q<r;q++){var u=a[q]*k;var v=q<r-1?a[q+1]*k:b.length;(d=ae(b,u,v,k,!1))===d.next&&(d.steiner=!0);n.push(qe(d))}n.sort(pe);for(q=0;q<n.length;q++)Qa(n[q],h),h=$c(h,h.next)}if(b.length>80*c){var p=a=b[0];var z=d=b[1];for(k=c;k<g;k+=c)(f=b[k])<p&&(p=f),(e=b[k+1])<z&&(z=e),f>a&&(a=f),e>d&&(d=e);var w=0!==(w=Math.max(a-p,d-z))?1/w:0}return td(h,
l,c,p,z,w),l}function ae(b,a,c,d,f){if(f===0<Ve(b,a,c,d))for(f=a;f<c;f+=d)var e=ib(f,b[f],b[f+1],e);else for(f=c-d;f>=a;f-=d)e=ib(f,b[f],b[f+1],e);return e&&Fc(e,e.next)&&(Pc(e),e=e.next),e}function $c(b,a){if(!b)return b;a||(a=b);var c=b;do if(b=!1,c.steiner||!Fc(c,c.next)&&0!==Ib(c.prev,c,c.next))c=c.next;else{if(Pc(c),(c=a=c.prev)===c.next)break;b=!0}while(b||c!==a);return a}function td(b,a,c,d,f,e,k){if(b){if(!k&&e){var g=b,h=g;do null===h.z&&(h.z=zf(h.x,h.y,d,f,e)),h.prevZ=h.prev,h=h.nextZ=h.next;
while(h!==g);h.prevZ.nextZ=null;h.prevZ=null;g=h;var l,r,n,q,u=1;do{h=g;var v=g=null;for(n=0;h;){n++;var p=h;for(l=q=0;l<u&&(q++,p=p.nextZ);l++);for(l=u;0<q||0<l&&p;)0!==q&&(0===l||!p||h.z<=p.z)?(r=h,h=h.nextZ,q--):(r=p,p=p.nextZ,l--),v?v.nextZ=r:g=r,r.prevZ=v,v=r;h=p}v.nextZ=null;u*=2}while(1<n)}for(h=b;b.prev!==b.next;){r=b.prev;g=b.next;if(e)a:{p=b;u=d;l=f;var z=e;v=p.prev;n=p.next;if(0<=Ib(v,p,n))p=!1;else{var w=v.x>p.x?v.x>n.x?v.x:n.x:p.x>n.x?p.x:n.x,A=v.y>p.y?v.y>n.y?v.y:n.y:p.y>n.y?p.y:n.y;
q=zf(v.x<p.x?v.x<n.x?v.x:n.x:p.x<n.x?p.x:n.x,v.y<p.y?v.y<n.y?v.y:n.y:p.y<n.y?p.y:n.y,u,l,z);u=zf(w,A,u,l,z);l=p.prevZ;for(z=p.nextZ;l&&l.z>=q&&z&&z.z<=u;){if(l!==p.prev&&l!==p.next&&zc(v.x,v.y,p.x,p.y,n.x,n.y,l.x,l.y)&&0<=Ib(l.prev,l,l.next)||(l=l.prevZ,z!==p.prev&&z!==p.next&&zc(v.x,v.y,p.x,p.y,n.x,n.y,z.x,z.y)&&0<=Ib(z.prev,z,z.next))){p=!1;break a}z=z.nextZ}for(;l&&l.z>=q;){if(l!==p.prev&&l!==p.next&&zc(v.x,v.y,p.x,p.y,n.x,n.y,l.x,l.y)&&0<=Ib(l.prev,l,l.next)){p=!1;break a}l=l.prevZ}for(;z&&z.z<=
u;){if(z!==p.prev&&z!==p.next&&zc(v.x,v.y,p.x,p.y,n.x,n.y,z.x,z.y)&&0<=Ib(z.prev,z,z.next)){p=!1;break a}z=z.nextZ}p=!0}}else a:if(p=b,v=p.prev,n=p.next,0<=Ib(v,p,n))p=!1;else{for(q=p.next.next;q!==p.prev;){if(zc(v.x,v.y,p.x,p.y,n.x,n.y,q.x,q.y)&&0<=Ib(q.prev,q,q.next)){p=!1;break a}q=q.next}p=!0}if(p)a.push(r.i/c),a.push(b.i/c),a.push(g.i/c),Pc(b),h=b=g.next;else if((b=g)===h){if(k)if(1===k){k=td;r=a;g=c;h=b;do p=h.prev,v=h.next.next,!Fc(p,v)&&se(p,h,h.next,v)&&ud(p,v)&&ud(v,p)&&(r.push(p.i/g),r.push(h.i/
g),r.push(v.i/g),Pc(h),Pc(h.next),h=b=v),h=h.next;while(h!==b);k(h,a,c,d,f,e,2)}else{if(2===k)a:{k=b;do{for(r=k.next.next;r!==k.prev;){if(k.i!==r.i&&re(k,r)){b=bb(k,r);k=$c(k,k.next);b=$c(b,b.next);td(k,a,c,d,f,e);td(b,a,c,d,f,e);break a}r=r.next}k=k.next}while(k!==b)}}else td($c(b),a,c,d,f,e,1);break}}}}function pe(b,a){return b.x-a.x}function Qa(b,a){if(a=function(b,a){var c=a,d=b.x,f=b.y,e=-1/0;do{if(f<=c.y&&f>=c.next.y&&c.next.y!==c.y){var k=c.x+(f-c.y)*(c.next.x-c.x)/(c.next.y-c.y);if(k<=d&&
k>e){if(e=k,k===d){if(f===c.y)return c;if(f===c.next.y)return c.next}var g=c.x<c.next.x?c:c.next}}c=c.next}while(c!==a);if(!g)return null;if(d===e)return g.prev;var h;a=g;k=g.x;var l=g.y,r=1/0;for(c=g.next;c!==a;)d>=c.x&&c.x>=k&&d!==c.x&&zc(f<l?d:e,f,k,l,f<l?e:d,f,c.x,c.y)&&((h=Math.abs(f-c.y)/(d-c.x))<r||h===r&&c.x>g.x)&&ud(c,b)&&(g=c,r=h),c=c.next;return g}(b,a))b=bb(a,b),$c(b,b.next)}function zf(b,a,c,d,f){return 1431655765&((b=858993459&((b=252645135&((b=16711935&((b=32767*(b-c)*f)|b<<8))|b<<
4))|b<<2))|b<<1)|(1431655765&((a=858993459&((a=252645135&((a=16711935&((a=32767*(a-d)*f)|a<<8))|a<<4))|a<<2))|a<<1))<<1}function qe(b){var a=b,c=b;do a.x<c.x&&(c=a),a=a.next;while(a!==b);return c}function zc(b,a,c,d,f,e,k,g){return 0<=(f-k)*(a-g)-(b-k)*(e-g)&&0<=(b-k)*(d-g)-(c-k)*(a-g)&&0<=(c-k)*(e-g)-(f-k)*(d-g)}function re(b,a){return b.next.i!==a.i&&b.prev.i!==a.i&&!function(b,a){var c=b;do{if(c.i!==b.i&&c.next.i!==b.i&&c.i!==a.i&&c.next.i!==a.i&&se(c,c.next,b,a))return!0;c=c.next}while(c!==b);
return!1}(b,a)&&ud(b,a)&&ud(a,b)&&function(b,a){var c=b,d=!1,f=(b.x+a.x)/2;a=(b.y+a.y)/2;do c.y>a!=c.next.y>a&&c.next.y!==c.y&&f<(c.next.x-c.x)*(a-c.y)/(c.next.y-c.y)+c.x&&(d=!d),c=c.next;while(c!==b);return d}(b,a)}function Ib(b,a,c){return(a.y-b.y)*(c.x-a.x)-(a.x-b.x)*(c.y-a.y)}function Fc(b,a){return b.x===a.x&&b.y===a.y}function se(b,a,c,d){return!!(Fc(b,a)&&Fc(c,d)||Fc(b,d)&&Fc(c,a))||0<Ib(b,a,c)!=0<Ib(b,a,d)&&0<Ib(c,d,b)!=0<Ib(c,d,a)}function ud(b,a){return 0>Ib(b.prev,b,b.next)?0<=Ib(b,a,b.next)&&
0<=Ib(b,b.prev,a):0>Ib(b,a,b.prev)||0>Ib(b,b.next,a)}function bb(b,a){var c=new Sd(b.i,b.x,b.y),d=new Sd(a.i,a.x,a.y),f=b.next,e=a.prev;return b.next=a,a.prev=b,c.next=f,f.prev=c,d.next=c,c.prev=d,e.next=d,d.prev=e,d}function ib(b,a,c,d){b=new Sd(b,a,c);return d?(b.next=d.next,b.prev=d,d.next.prev=b,d.next=b):(b.prev=b,b.next=b),b}function Pc(b){b.next.prev=b.prev;b.prev.next=b.next;b.prevZ&&(b.prevZ.nextZ=b.nextZ);b.nextZ&&(b.nextZ.prevZ=b.prevZ)}function Sd(b,a,c){this.i=b;this.x=a;this.y=c;this.nextZ=
this.prevZ=this.z=this.next=this.prev=null;this.steiner=!1}function Ve(b,a,c,d){for(var f=0,e=c-d;a<c;a+=d)f+=(b[e]-b[a])*(b[a+1]+b[e+1]),e=a;return f}function Ff(b,a,c,d,f){!function ce(b,a,c,d,f){for(;d>c;){if(600<d-c){var e=d-c+1,k=a-c+1,g=Math.log(e),h=.5*Math.exp(2*g/3);g=.5*Math.sqrt(g*h*(e-h)/e)*(0>k-e/2?-1:1);ce(b,a,Math.max(c,Math.floor(a-k*h/e+g)),Math.min(d,Math.floor(a+(e-k)*h/e+g)),f)}e=b[a];k=c;h=d;Ad(b,c,a);for(0<f(b[d],e)&&Ad(b,c,d);k<h;){Ad(b,k,h);k++;for(h--;0>f(b[k],e);)k++;for(;0<
f(b[h],e);)h--}0===f(b[c],e)?Ad(b,c,h):Ad(b,++h,d);h<=a&&(c=h+1);a<=h&&(d=h-1)}}(b,a,c||0,d||b.length-1,f||lb)}function Ad(b,a,c){var d=b[a];b[a]=b[c];b[c]=d}function lb(b,a){return b<a?-1:b>a?1:0}function Mb(b,a){var c=b.length;if(1>=c)return[b];for(var d,f,e=[],k=0;k<c;k++){var g=b[k];for(var h=0,l=0,r=g.length,n=r-1,q,u=void 0;l<r;n=l++)q=g[l],h+=((u=g[n]).x-q.x)*(q.y+u.y);g=h;0!==g&&(b[k].area=Math.abs(g),void 0===f&&(f=0>g),f===0>g?(d&&e.push(d),d=[b[k]]):d.push(b[k]))}if(d&&e.push(d),1<a)for(b=
0;b<e.length;b++)e[b].length<=a||(fg(e[b],a,1,e[b].length-1,Rb),e[b]=e[b].slice(0,a));return e}function Rb(b,a){return a.area-b.area}function oc(b,a,c,d,f,e,k,g){b.emplaceBack(a,c,2*Math.floor(d*gg)+k,f*gg*2,e*gg*2,Math.round(g))}function ge(b){return b.every(function(b){return 0>b.x})||b.every(function(b){return 8192<b.x})||b.every(function(b){return 0>b.y})||b.every(function(b){return 8192<b.y})}function Hc(b,a,c,d,f){this.properties={};this.extent=c;this.type=0;this._pbf=b;this._geometry=-1;this._keys=
d;this._values=f;b.readFields(We,this,a)}function We(b,a,c){if(1==b)a.id=c.readVarint();else if(2==b)for(b=c.readVarint()+c.pos;c.pos<b;){var d=a._keys[c.readVarint()],f=a._values[c.readVarint()];a.properties[d]=f}else 3==b?a.type=c.readVarint():4==b&&(a._geometry=c.pos)}function jb(b,a){this.version=1;this.name=null;this.extent=4096;this.length=0;this._pbf=b;this._keys=[];this._values=[];this._features=[];b.readFields(Fb,this,a);this.length=this._features.length}function Fb(b,a,c){15===b?a.version=
c.readVarint():1===b?a.name=c.readString():5===b?a.extent=c.readVarint():2===b?a._features.push(c.pos):3===b?a._keys.push(c.readString()):4===b&&a._values.push(function(b){for(var a=null,c=b.readVarint()+b.pos;b.pos<c;)a=b.readVarint()>>3,a=1===a?b.readString():2===a?b.readFloat():3===a?b.readDouble():4===a?b.readVarint64():5===a?b.readVarint():6===a?b.readSVarint():7===a?b.readBoolean():null;return a}(c))}function ad(b,a,c){3===b&&(b=new Zg(c,c.readVarint()+c.pos),b.length&&(a[b.name]=b))}function fe(b,
a,c,d,f,e,k){b.emplaceBack(a.x,a.y,d?1:0,f?1:-1,Math.round(63*c.x)+128,Math.round(63*c.y)+128,1+(0===e?0:0>e?-1:1)|(.5*k&63)<<2,.5*k>>6)}function uc(b,a,c){a=a.layout.get("text-transform").evaluate(c);return"uppercase"===a?b=b.toLocaleUpperCase():"lowercase"===a&&(b=b.toLocaleLowerCase()),Ge.applyArabicShaping&&(b=Ge.applyArabicShaping(b)),b}function Cd(b,a){var c=a.expression;if("constant"===c.kind)return{functionType:"constant",layoutSize:c.evaluate(new Nb(b+1))};if("source"===c.kind)return{functionType:"source"};
for(var d=c.zoomStops,f=0;f<d.length&&d[f]<=b;)f++;for(var e=f=Math.max(0,f-1);e<d.length&&d[e]<b+1;)e++;e=Math.min(d.length-1,e);d={min:d[f],max:d[e]};return"composite"===c.kind?{functionType:"composite",zoomRange:d,propertyValue:a.value}:{functionType:"camera",layoutSize:c.evaluate(new Nb(b+1)),zoomRange:d,sizeRange:{min:c.evaluate(new Nb(d.min)),max:c.evaluate(new Nb(d.max))},propertyValue:a.value}}function Dd(b,a,c,d,f,e,k,g){b.emplaceBack(a,c,Math.round(32*d),Math.round(32*f),e,k,g?g[0]:0,g?
g[1]:0)}function Ic(b,a,c){b.emplaceBack(a.x,a.y,c);b.emplaceBack(a.x,a.y,c);b.emplaceBack(a.x,a.y,c);b.emplaceBack(a.x,a.y,c)}function tb(b){this.buf=ArrayBuffer.isView&&ArrayBuffer.isView(b)?b:new Uint8Array(b||0);this.type=this.pos=0;this.length=this.buf.length}function Jb(b){return b.type===tb.Bytes?b.readVarint()+b.pos:b.pos+1}function Xe(b,a,c){a=16383>=a?1:2097151>=a?2:268435455>=a?3:Math.ceil(Math.log(a)/(7*Math.LN2));c.realloc(a);for(var d=c.pos-1;d>=b;d--)c.buf[d+a]=c.buf[d]}function Ue(b,
a){for(var c=0;c<b.length;c++)a.writeVarint(b[c])}function Gf(b,a){for(var c=0;c<b.length;c++)a.writeSVarint(b[c])}function Hf(b,a){for(var c=0;c<b.length;c++)a.writeFloat(b[c])}function If(b,a){for(var c=0;c<b.length;c++)a.writeDouble(b[c])}function Ye(b,a){for(var c=0;c<b.length;c++)a.writeBoolean(b[c])}function Ze(b,a){for(var c=0;c<b.length;c++)a.writeFixed32(b[c])}function Jf(b,a){for(var c=0;c<b.length;c++)a.writeSFixed32(b[c])}function bd(b,a){for(var c=0;c<b.length;c++)a.writeFixed64(b[c])}
function Kf(b,a){for(var c=0;c<b.length;c++)a.writeSFixed64(b[c])}function Ed(b,a){return(b[a]|b[a+1]<<8|b[a+2]<<16)+16777216*b[a+3]}function he(b,a,c){b[c]=a;b[c+1]=a>>>8;b[c+2]=a>>>16;b[c+3]=a>>>24}function Fd(b,a){return(b[a]|b[a+1]<<8|b[a+2]<<16)+(b[a+3]<<24)}function Vd(b,a,c){1===b&&c.readMessage(cd,a)}function cd(b,a,c){if(3===b){b=c.readMessage(ie,{});c=b.width;var d=b.height,f=b.left,e=b.top,k=b.advance;a.push({id:b.id,bitmap:new Od({width:c+6,height:d+6},b.bitmap),metrics:{width:c,height:d,
left:f,top:e,advance:k}})}}function ie(b,a,c){1===b?a.id=c.readVarint():2===b?a.bitmap=c.readBytes():3===b?a.width=c.readVarint():4===b?a.height=c.readVarint():5===b?a.left=c.readSVarint():6===b?a.top=c.readSVarint():7===b&&(a.advance=c.readVarint())}function ye(b,a,c,d){0>(b*=2)&&(b=-1*b-1);var f=1<<a;return 32*(f*f*b+f*d+c)+a}function je(b,a){return a-b}function Gd(b,a,c,d){var f=Math.pow(b-a,2);return d?b<a?f/2:2*f:f+Math.abs(c)*c}function Hd(b,a){var c=0;return 10===b&&(c-=1E4),40!==b&&65288!==
b||(c+=50),41!==a&&65289!==a||(c+=50),c}function ze(b,a,c,d,f,e){for(var k=null,g=Gd(a,c,f,e),h=0;h<d.length;h+=1){var l=d[h],r=Gd(a-l.x,c,f,e)+l.badness;r<=g&&(k=l,g=r)}return{index:b,x:a,priorBreak:k,badness:g}}function Lf(b,a,c,d){if(!c||!b)return[];var f,e=[];c=function(b,a,c,d){for(var f=0,e=0;e<b.length;e++){var k=d[b.charCodeAt(e)];k&&(f+=k.metrics.advance+a)}return f/Math.max(1,Math.ceil(f/c))}(b,a,c,d);for(var k=0,g=0;g<b.length;g++){var h=b.charCodeAt(g),l=d[h];l&&!Pd[h]&&(k+=l.metrics.advance+
a);g<b.length-1&&(Pg[h]||!(11904>(f=h))&&(Ga["Bopomofo Extended"](f)||Ga.Bopomofo(f)||Ga["CJK Compatibility Forms"](f)||Ga["CJK Compatibility Ideographs"](f)||Ga["CJK Compatibility"](f)||Ga["CJK Radicals Supplement"](f)||Ga["CJK Strokes"](f)||Ga["CJK Symbols and Punctuation"](f)||Ga["CJK Unified Ideographs Extension A"](f)||Ga["CJK Unified Ideographs"](f)||Ga["Enclosed CJK Letters and Months"](f)||Ga["Halfwidth and Fullwidth Forms"](f)||Ga.Hiragana(f)||Ga["Ideographic Description Characters"](f)||
Ga["Kangxi Radicals"](f)||Ga["Katakana Phonetic Extensions"](f)||Ga.Katakana(f)||Ga["Vertical Forms"](f)||Ga["Yi Radicals"](f)||Ga["Yi Syllables"](f)))&&e.push(ze(g+1,k,c,e,Hd(h,b.charCodeAt(g+1)),!1))}return function de(b){return b?de(b.priorBreak).concat(b.index):[]}(ze(b.length,k,c,e,0,!0))}function Ae(b){var a=.5,c=.5;switch(b){case "right":case "top-right":case "bottom-right":a=1;break;case "left":case "top-left":case "bottom-left":a=0}switch(b){case "bottom":case "bottom-right":case "bottom-left":c=
1;break;case "top":case "top-right":case "top-left":c=0}return{horizontalAlign:a,verticalAlign:c}}var Be="undefined"!=typeof window?window:"undefined"!=typeof a?a:"undefined"!=typeof self?self:{},$e=h;h.prototype.sampleCurveX=function(b){return((this.ax*b+this.bx)*b+this.cx)*b};h.prototype.sampleCurveY=function(b){return((this.ay*b+this.by)*b+this.cy)*b};h.prototype.sampleCurveDerivativeX=function(b){return(3*this.ax*b+2*this.bx)*b+this.cx};h.prototype.solveCurveX=function(b,a){var c,d;void 0===a&&
(a=1E-6);var f=b;for(c=0;8>c;c++){if(d=this.sampleCurveX(f)-b,Math.abs(d)<a)return f;var e=this.sampleCurveDerivativeX(f);if(1E-6>Math.abs(e))break;f-=d/e}if((f=b)<(c=0))return c;if(f>(e=1))return e;for(;c<e&&!(d=this.sampleCurveX(f),Math.abs(d-b)<a);)b>d?c=f:e=f,f=.5*(e-c)+c;return f};h.prototype.solve=function(b,a){return this.sampleCurveY(this.solveCurveX(b,a))};var Jc=function(b,a,c){this.column=b;this.row=a;this.zoom=c};Jc.prototype.clone=function(){return new Jc(this.column,this.row,this.zoom)};
Jc.prototype.zoomTo=function(b){return this.clone()._zoomTo(b)};Jc.prototype.sub=function(b){return this.clone()._sub(b)};Jc.prototype._zoomTo=function(b){var a=Math.pow(2,b-this.zoom);return this.column*=a,this.row*=a,this.zoom=b,this};Jc.prototype._sub=function(b){return b=b.zoomTo(this.zoom),this.column-=b.column,this.row-=b.row,this};var $b=d;d.prototype={clone:function(){return new d(this.x,this.y)},add:function(b){return this.clone()._add(b)},sub:function(b){return this.clone()._sub(b)},multByPoint:function(b){return this.clone()._multByPoint(b)},
divByPoint:function(b){return this.clone()._divByPoint(b)},mult:function(b){return this.clone()._mult(b)},div:function(b){return this.clone()._div(b)},rotate:function(b){return this.clone()._rotate(b)},rotateAround:function(b,a){return this.clone()._rotateAround(b,a)},matMult:function(b){return this.clone()._matMult(b)},unit:function(){return this.clone()._unit()},perp:function(){return this.clone()._perp()},round:function(){return this.clone()._round()},mag:function(){return Math.sqrt(this.x*this.x+
this.y*this.y)},equals:function(b){return this.x===b.x&&this.y===b.y},dist:function(b){return Math.sqrt(this.distSqr(b))},distSqr:function(b){var a=b.x-this.x;b=b.y-this.y;return a*a+b*b},angle:function(){return Math.atan2(this.y,this.x)},angleTo:function(b){return Math.atan2(this.y-b.y,this.x-b.x)},angleWith:function(b){return this.angleWithSep(b.x,b.y)},angleWithSep:function(b,a){return Math.atan2(this.x*a-this.y*b,this.x*b+this.y*a)},_matMult:function(b){var a=b[2]*this.x+b[3]*this.y;return this.x=
b[0]*this.x+b[1]*this.y,this.y=a,this},_add:function(b){return this.x+=b.x,this.y+=b.y,this},_sub:function(b){return this.x-=b.x,this.y-=b.y,this},_mult:function(b){return this.x*=b,this.y*=b,this},_div:function(b){return this.x/=b,this.y/=b,this},_multByPoint:function(b){return this.x*=b.x,this.y*=b.y,this},_divByPoint:function(b){return this.x/=b.x,this.y/=b.y,this},_unit:function(){return this._div(this.mag()),this},_perp:function(){var b=this.y;return this.y=this.x,this.x=-b,this},_rotate:function(b){var a=
Math.cos(b);b=Math.sin(b);var c=b*this.x+a*this.y;return this.x=a*this.x-b*this.y,this.y=c,this},_rotateAround:function(b,a){var c=Math.cos(b);b=Math.sin(b);var d=a.y+b*(this.x-a.x)+c*(this.y-a.y);return this.x=a.x+c*(this.x-a.x)-b*(this.y-a.y),this.y=d,this},_round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this}};d.convert=function(b){return b instanceof d?b:Array.isArray(b)?new d(b[0],b[1]):b};var af=f(.25,.1,.25,1),ed=1,dd={},bf={Unknown:"Unknown",Style:"Style",Source:"Source",
Tile:"Tile",Glyphs:"Glyphs",SpriteImage:"SpriteImage",SpriteJSON:"SpriteJSON",Image:"Image"};"function"==typeof Object.freeze&&Object.freeze(bf);var Ce=function(b){function a(a,c,d){b.call(this,a);this.status=c;this.url=d;this.name=this.constructor.name;this.message=a}return b&&(a.__proto__=b),a.prototype=Object.create(b&&b.prototype),a.prototype.constructor=a,a.prototype.toString=function(){return this.name+": "+this.message+" ("+this.status+"): "+this.url},a}(Error),Wd=function(b,a){var c=t(b);
return c.responseType="arraybuffer",c.onerror=function(){a(Error(c.statusText))},c.onload=function(){var d=c.response;if(0===d.byteLength&&200===c.status)return a(Error("http status 200 returned without content."));200<=c.status&&300>c.status&&c.response?a(null,{data:d,cacheControl:c.getResponseHeader("Cache-Control"),expires:c.getResponseHeader("Expires")}):a(new Ce(c.statusText,c.status,b.url))},c.send(),c},ke=function(b,a){void 0===a&&(a={});k(this,a);this.type=b},Gb=function(b){function a(a,c){void 0===
c&&(c={});b.call(this,"error",k({error:a},c))}return b&&(a.__proto__=b),a.prototype=Object.create(b&&b.prototype),a.prototype.constructor=a,a}(ke),ac=function(){};ac.prototype.on=function(b,a){var c=this._listeners=this._listeners||{};c[b]=c[b]||[];c[b].push(a);return this};ac.prototype.off=function(b,a){return B(b,a,this._listeners),B(b,a,this._oneTimeListeners),this};ac.prototype.once=function(b,a){var c=this._oneTimeListeners=this._oneTimeListeners||{};c[b]=c[b]||[];c[b].push(a);return this};ac.prototype.fire=
function(b,a){"string"==typeof b&&(b=new ke(b,a||{}));a=b.type;if(this.listens(a)){b.target=this;for(var c=0,d=this._listeners&&this._listeners[a]?this._listeners[a].slice():[];c<d.length;c+=1)d[c].call(this,b);c=0;for(d=this._oneTimeListeners&&this._oneTimeListeners[a]?this._oneTimeListeners[a].slice():[];c<d.length;c+=1){var f=d[c];B(a,f,this._oneTimeListeners);f.call(this,b)}(a=this._eventedParent)&&(k(b,"function"==typeof this._eventedParentData?this._eventedParentData():this._eventedParentData),
a.fire(b))}else n(a,"error")?console.error(b&&b.error||b||"Empty error event"):n(a,"warning")&&console.warn(b&&b.warning||b||"Empty warning event");return this};ac.prototype.listens=function(b){return this._listeners&&this._listeners[b]&&0<this._listeners[b].length||this._oneTimeListeners&&this._oneTimeListeners[b]&&0<this._oneTimeListeners[b].length||this._eventedParent&&this._eventedParent.listens(b)};ac.prototype.setEventedParent=function(b,a){return this._eventedParent=b,this._eventedParentData=
a,this};var ra={$version:8,$root:{version:{required:!0,type:"enum",values:[8]},name:{type:"string"},metadata:{type:"*"},center:{type:"array",value:"number"},zoom:{type:"number"},bearing:{type:"number",default:0,period:360,units:"degrees"},pitch:{type:"number",default:0,units:"degrees"},light:{type:"light"},sources:{required:!0,type:"sources"},sprite:{type:"string"},glyphs:{type:"string"},transition:{type:"transition"},layers:{required:!0,type:"array",value:"layer"}},sources:{"*":{type:"source"}},
source:"source_vector source_raster source_raster_dem source_geojson source_video source_image".split(" "),source_vector:{type:{required:!0,type:"enum",values:{vector:{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.0511,180,85.0511]},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},attribution:{type:"string"},"*":{type:"*"}},source_raster:{type:{required:!0,type:"enum",values:{raster:{}}},url:{type:"string"},
tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.0511,180,85.0511]},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},tileSize:{type:"number",default:512,units:"pixels"},scheme:{type:"enum",values:{xyz:{},tms:{}},default:"xyz"},attribution:{type:"string"},"*":{type:"*"}},source_raster_dem:{type:{required:!0,type:"enum",values:{"raster-dem":{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",
length:4,default:[-180,-85.0511,180,85.0511]},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},tileSize:{type:"number",default:512,units:"pixels"},attribution:{type:"string"},encoding:{type:"enum",values:{terrarium:{},mapbox:{}},default:"mapbox"},"*":{type:"*"}},source_geojson:{type:{required:!0,type:"enum",values:{geojson:{}}},data:{type:"*"},maxzoom:{type:"number",default:18},buffer:{type:"number",default:128,maximum:512,minimum:0},tolerance:{type:"number",default:.375},cluster:{type:"boolean",
default:!1},clusterRadius:{type:"number",default:50,minimum:0},clusterMaxZoom:{type:"number"},lineMetrics:{type:"boolean",default:!1}},source_video:{type:{required:!0,type:"enum",values:{video:{}}},urls:{required:!0,type:"array",value:"string"},coordinates:{required:!0,type:"array",length:4,value:{type:"array",length:2,value:"number"}}},source_image:{type:{required:!0,type:"enum",values:{image:{}}},url:{required:!0,type:"string"},coordinates:{required:!0,type:"array",length:4,value:{type:"array",
length:2,value:"number"}}},layer:{id:{type:"string",required:!0},type:{type:"enum",values:{fill:{},line:{},symbol:{},circle:{},heatmap:{},"fill-extrusion":{},raster:{},hillshade:{},background:{}},required:!0},metadata:{type:"*"},source:{type:"string"},"source-layer":{type:"string"},minzoom:{type:"number",minimum:0,maximum:24},maxzoom:{type:"number",minimum:0,maximum:24},filter:{type:"filter"},layout:{type:"layout"},paint:{type:"paint"}},layout:"layout_fill layout_line layout_circle layout_heatmap layout_fill-extrusion layout_symbol layout_raster layout_hillshade layout_background".split(" "),
layout_background:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible"}},layout_fill:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible"}},layout_circle:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible"}},layout_heatmap:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible"}},layout_line:{"line-cap":{type:"enum",function:"piecewise-constant","zoom-function":!0,values:{butt:{},round:{},square:{}},default:"butt"},"line-join":{type:"enum",
function:"piecewise-constant","zoom-function":!0,"property-function":!0,values:{bevel:{},round:{},miter:{}},default:"miter"},"line-miter-limit":{type:"number",default:2,function:"interpolated","zoom-function":!0,requires:[{"line-join":"miter"}]},"line-round-limit":{type:"number",default:1.05,function:"interpolated","zoom-function":!0,requires:[{"line-join":"round"}]},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible"}},layout_symbol:{"symbol-placement":{type:"enum",function:"piecewise-constant",
"zoom-function":!0,values:{point:{},line:{}},default:"point"},"symbol-spacing":{type:"number",default:250,minimum:1,function:"interpolated","zoom-function":!0,units:"pixels",requires:[{"symbol-placement":"line"}]},"symbol-avoid-edges":{type:"boolean",function:"piecewise-constant","zoom-function":!0,default:!1},"icon-allow-overlap":{type:"boolean",function:"piecewise-constant","zoom-function":!0,default:!1,requires:["icon-image"]},"icon-ignore-placement":{type:"boolean",function:"piecewise-constant",
"zoom-function":!0,default:!1,requires:["icon-image"]},"icon-optional":{type:"boolean",function:"piecewise-constant","zoom-function":!0,default:!1,requires:["icon-image","text-field"]},"icon-rotation-alignment":{type:"enum",function:"piecewise-constant","zoom-function":!0,values:{map:{},viewport:{},auto:{}},default:"auto",requires:["icon-image"]},"icon-size":{type:"number",default:1,minimum:0,function:"interpolated","zoom-function":!0,"property-function":!0,units:"factor of the original icon size",
requires:["icon-image"]},"icon-text-fit":{type:"enum",function:"piecewise-constant","zoom-function":!0,values:{none:{},width:{},height:{},both:{}},default:"none",requires:["icon-image","text-field"]},"icon-text-fit-padding":{type:"array",value:"number",length:4,default:[0,0,0,0],units:"pixels",function:"interpolated","zoom-function":!0,requires:["icon-image","text-field",{"icon-text-fit":["both","width","height"]}]},"icon-image":{type:"string",function:"piecewise-constant","zoom-function":!0,"property-function":!0,
tokens:!0},"icon-rotate":{type:"number",default:0,period:360,function:"interpolated","zoom-function":!0,"property-function":!0,units:"degrees",requires:["icon-image"]},"icon-padding":{type:"number",default:2,minimum:0,function:"interpolated","zoom-function":!0,units:"pixels",requires:["icon-image"]},"icon-keep-upright":{type:"boolean",function:"piecewise-constant","zoom-function":!0,default:!1,requires:["icon-image",{"icon-rotation-alignment":"map"},{"symbol-placement":"line"}]},"icon-offset":{type:"array",
value:"number",length:2,default:[0,0],function:"interpolated","zoom-function":!0,"property-function":!0,requires:["icon-image"]},"icon-anchor":{type:"enum",function:"piecewise-constant","zoom-function":!0,"property-function":!0,values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},default:"center",requires:["icon-image"]},"icon-pitch-alignment":{type:"enum",function:"piecewise-constant","zoom-function":!0,values:{map:{},viewport:{},auto:{}},
default:"auto",requires:["icon-image"]},"text-pitch-alignment":{type:"enum",function:"piecewise-constant","zoom-function":!0,values:{map:{},viewport:{},auto:{}},default:"auto",requires:["text-field"]},"text-rotation-alignment":{type:"enum",function:"piecewise-constant","zoom-function":!0,values:{map:{},viewport:{},auto:{}},default:"auto",requires:["text-field"]},"text-field":{type:"string",function:"piecewise-constant","zoom-function":!0,"property-function":!0,default:"",tokens:!0},"text-font":{type:"array",
value:"string",function:"piecewise-constant","zoom-function":!0,"property-function":!0,default:["Open Sans Regular","Arial Unicode MS Regular"],requires:["text-field"]},"text-size":{type:"number",default:16,minimum:0,units:"pixels",function:"interpolated","zoom-function":!0,"property-function":!0,requires:["text-field"]},"text-max-width":{type:"number",default:10,minimum:0,units:"ems",function:"interpolated","zoom-function":!0,"property-function":!0,requires:["text-field"]},"text-line-height":{type:"number",
default:1.2,units:"ems",function:"interpolated","zoom-function":!0,requires:["text-field"]},"text-letter-spacing":{type:"number",default:0,units:"ems",function:"interpolated","zoom-function":!0,"property-function":!0,requires:["text-field"]},"text-justify":{type:"enum",function:"piecewise-constant","zoom-function":!0,"property-function":!0,values:{left:{},center:{},right:{}},default:"center",requires:["text-field"]},"text-anchor":{type:"enum",function:"piecewise-constant","zoom-function":!0,"property-function":!0,
values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},default:"center",requires:["text-field"]},"text-max-angle":{type:"number",default:45,units:"degrees",function:"interpolated","zoom-function":!0,requires:["text-field",{"symbol-placement":"line"}]},"text-rotate":{type:"number",default:0,period:360,units:"degrees",function:"interpolated","zoom-function":!0,"property-function":!0,requires:["text-field"]},"text-padding":{type:"number",
default:2,minimum:0,units:"pixels",function:"interpolated","zoom-function":!0,requires:["text-field"]},"text-keep-upright":{type:"boolean",function:"piecewise-constant","zoom-function":!0,default:!0,requires:["text-field",{"text-rotation-alignment":"map"},{"symbol-placement":"line"}]},"text-transform":{type:"enum",function:"piecewise-constant","zoom-function":!0,"property-function":!0,values:{none:{},uppercase:{},lowercase:{}},default:"none",requires:["text-field"]},"text-offset":{type:"array",value:"number",
units:"ems",function:"interpolated","zoom-function":!0,"property-function":!0,length:2,default:[0,0],requires:["text-field"]},"text-allow-overlap":{type:"boolean",function:"piecewise-constant","zoom-function":!0,default:!1,requires:["text-field"]},"text-ignore-placement":{type:"boolean",function:"piecewise-constant","zoom-function":!0,default:!1,requires:["text-field"]},"text-optional":{type:"boolean",function:"piecewise-constant","zoom-function":!0,default:!1,requires:["text-field","icon-image"]},
visibility:{type:"enum",values:{visible:{},none:{}},default:"visible"}},layout_raster:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible"}},layout_hillshade:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible"}},filter:{type:"array",value:"*"},filter_operator:{type:"enum",values:{"\x3d\x3d":{},"!\x3d":{},"\x3e":{},"\x3e\x3d":{},"\x3c":{},"\x3c\x3d":{},in:{},"!in":{},all:{},any:{},none:{},has:{},"!has":{}}},geometry_type:{type:"enum",values:{Point:{},LineString:{},
Polygon:{}}},function_stop:{type:"array",minimum:0,maximum:22,value:["number","color"],length:2},expression:{type:"array",value:"*",minimum:1},expression_name:{type:"enum",values:{let:{group:"Variable binding"},var:{group:"Variable binding"},literal:{group:"Types"},array:{group:"Types"},at:{group:"Lookup"},case:{group:"Decision"},match:{group:"Decision"},coalesce:{group:"Decision"},step:{group:"Ramps, scales, curves"},interpolate:{group:"Ramps, scales, curves"},ln2:{group:"Math"},pi:{group:"Math"},
e:{group:"Math"},typeof:{group:"Types"},string:{group:"Types"},number:{group:"Types"},boolean:{group:"Types"},object:{group:"Types"},collator:{group:"Types"},"to-string":{group:"Types"},"to-number":{group:"Types"},"to-boolean":{group:"Types"},"to-rgba":{group:"Color"},"to-color":{group:"Types"},rgb:{group:"Color"},rgba:{group:"Color"},get:{group:"Lookup"},has:{group:"Lookup"},length:{group:"Lookup"},properties:{group:"Feature data"},"geometry-type":{group:"Feature data"},id:{group:"Feature data"},
zoom:{group:"Zoom"},"heatmap-density":{group:"Heatmap"},"line-progress":{group:"Heatmap"},"+":{group:"Math"},"*":{group:"Math"},"-":{group:"Math"},"/":{group:"Math"},"%":{group:"Math"},"^":{group:"Math"},sqrt:{group:"Math"},log10:{group:"Math"},ln:{group:"Math"},log2:{group:"Math"},sin:{group:"Math"},cos:{group:"Math"},tan:{group:"Math"},asin:{group:"Math"},acos:{group:"Math"},atan:{group:"Math"},min:{group:"Math"},max:{group:"Math"},round:{group:"Math"},abs:{group:"Math"},ceil:{group:"Math"},floor:{group:"Math"},
"\x3d\x3d":{group:"Decision"},"!\x3d":{group:"Decision"},"\x3e":{group:"Decision"},"\x3c":{group:"Decision"},"\x3e\x3d":{group:"Decision"},"\x3c\x3d":{group:"Decision"},all:{group:"Decision"},any:{group:"Decision"},"!":{group:"Decision"},"is-supported-script":{group:"String"},upcase:{group:"String"},downcase:{group:"String"},concat:{group:"String"},"resolved-locale":{group:"String"}}},light:{anchor:{type:"enum",default:"viewport",values:{map:{},viewport:{}},transition:!1,"zoom-function":!0,"property-function":!1,
function:"piecewise-constant"},position:{type:"array",default:[1.15,210,30],length:3,value:"number",transition:!0,function:"interpolated","zoom-function":!0,"property-function":!1},color:{type:"color",default:"#ffffff",function:"interpolated","zoom-function":!0,"property-function":!1,transition:!0},intensity:{type:"number",default:.5,minimum:0,maximum:1,function:"interpolated","zoom-function":!0,"property-function":!1,transition:!0}},paint:"paint_fill paint_line paint_circle paint_heatmap paint_fill-extrusion paint_symbol paint_raster paint_hillshade paint_background".split(" "),
paint_fill:{"fill-antialias":{type:"boolean",function:"piecewise-constant","zoom-function":!0,default:!0},"fill-opacity":{type:"number",function:"interpolated","zoom-function":!0,"property-function":!0,default:1,minimum:0,maximum:1,transition:!0},"fill-color":{type:"color",default:"#000000",function:"interpolated","zoom-function":!0,"property-function":!0,transition:!0,requires:[{"!":"fill-pattern"}]},"fill-outline-color":{type:"color",function:"interpolated","zoom-function":!0,"property-function":!0,
transition:!0,requires:[{"!":"fill-pattern"},{"fill-antialias":!0}]},"fill-translate":{type:"array",value:"number",length:2,default:[0,0],function:"interpolated","zoom-function":!0,transition:!0,units:"pixels"},"fill-translate-anchor":{type:"enum",function:"piecewise-constant","zoom-function":!0,values:{map:{},viewport:{}},default:"map",requires:["fill-translate"]},"fill-pattern":{type:"string",function:"piecewise-constant","zoom-function":!0,transition:!0}},paint_line:{"line-opacity":{type:"number",
function:"interpolated","zoom-function":!0,"property-function":!0,default:1,minimum:0,maximum:1,transition:!0},"line-color":{type:"color",default:"#000000",function:"interpolated","zoom-function":!0,"property-function":!0,transition:!0,requires:[{"!":"line-pattern"}]},"line-translate":{type:"array",value:"number",length:2,default:[0,0],function:"interpolated","zoom-function":!0,transition:!0,units:"pixels"},"line-translate-anchor":{type:"enum",function:"piecewise-constant","zoom-function":!0,values:{map:{},
viewport:{}},default:"map",requires:["line-translate"]},"line-width":{type:"number",default:1,minimum:0,function:"interpolated","zoom-function":!0,"property-function":!0,transition:!0,units:"pixels"},"line-gap-width":{type:"number",default:0,minimum:0,function:"interpolated","zoom-function":!0,"property-function":!0,transition:!0,units:"pixels"},"line-offset":{type:"number",default:0,function:"interpolated","zoom-function":!0,"property-function":!0,transition:!0,units:"pixels"},"line-blur":{type:"number",
default:0,minimum:0,function:"interpolated","zoom-function":!0,"property-function":!0,transition:!0,units:"pixels"},"line-dasharray":{type:"array",value:"number",function:"piecewise-constant","zoom-function":!0,minimum:0,transition:!0,units:"line widths",requires:[{"!":"line-pattern"}]},"line-pattern":{type:"string",function:"piecewise-constant","zoom-function":!0,transition:!0},"line-gradient":{type:"color",function:"interpolated","zoom-function":!1,"property-function":!1,transition:!1,requires:[{"!":"line-dasharray"},
{"!":"line-pattern"},{source:"geojson",has:{lineMetrics:!0}}]}},paint_circle:{"circle-radius":{type:"number",default:5,minimum:0,function:"interpolated","zoom-function":!0,"property-function":!0,transition:!0,units:"pixels"},"circle-color":{type:"color",default:"#000000",function:"interpolated","zoom-function":!0,"property-function":!0,transition:!0},"circle-blur":{type:"number",default:0,function:"interpolated","zoom-function":!0,"property-function":!0,transition:!0},"circle-opacity":{type:"number",
default:1,minimum:0,maximum:1,function:"interpolated","zoom-function":!0,"property-function":!0,transition:!0},"circle-translate":{type:"array",value:"number",length:2,default:[0,0],function:"interpolated","zoom-function":!0,transition:!0,units:"pixels"},"circle-translate-anchor":{type:"enum",function:"piecewise-constant","zoom-function":!0,values:{map:{},viewport:{}},default:"map",requires:["circle-translate"]},"circle-pitch-scale":{type:"enum",function:"piecewise-constant","zoom-function":!0,values:{map:{},
viewport:{}},default:"map"},"circle-pitch-alignment":{type:"enum",function:"piecewise-constant","zoom-function":!0,values:{map:{},viewport:{}},default:"viewport"},"circle-stroke-width":{type:"number",default:0,minimum:0,function:"interpolated","zoom-function":!0,"property-function":!0,transition:!0,units:"pixels"},"circle-stroke-color":{type:"color",default:"#000000",function:"interpolated","zoom-function":!0,"property-function":!0,transition:!0},"circle-stroke-opacity":{type:"number",default:1,minimum:0,
maximum:1,function:"interpolated","zoom-function":!0,"property-function":!0,transition:!0}},paint_heatmap:{"heatmap-radius":{type:"number",default:30,minimum:1,function:"interpolated","zoom-function":!0,"property-function":!0,transition:!0,units:"pixels"},"heatmap-weight":{type:"number",default:1,minimum:0,function:"interpolated","zoom-function":!0,"property-function":!0,transition:!1},"heatmap-intensity":{type:"number",default:1,minimum:0,function:"interpolated","zoom-function":!0,"property-function":!1,
transition:!0},"heatmap-color":{type:"color",default:["interpolate",["linear"],["heatmap-density"],0,"rgba(0, 0, 255, 0)",.1,"royalblue",.3,"cyan",.5,"lime",.7,"yellow",1,"red"],function:"interpolated","zoom-function":!1,"property-function":!1,transition:!1},"heatmap-opacity":{type:"number",default:1,minimum:0,maximum:1,function:"interpolated","zoom-function":!0,"property-function":!1,transition:!0}},paint_symbol:{"icon-opacity":{type:"number",default:1,minimum:0,maximum:1,function:"interpolated",
"zoom-function":!0,"property-function":!0,transition:!0,requires:["icon-image"]},"icon-color":{type:"color",default:"#000000",function:"interpolated","zoom-function":!0,"property-function":!0,transition:!0,requires:["icon-image"]},"icon-halo-color":{type:"color",default:"rgba(0, 0, 0, 0)",function:"interpolated","zoom-function":!0,"property-function":!0,transition:!0,requires:["icon-image"]},"icon-halo-width":{type:"number",default:0,minimum:0,function:"interpolated","zoom-function":!0,"property-function":!0,
transition:!0,units:"pixels",requires:["icon-image"]},"icon-halo-blur":{type:"number",default:0,minimum:0,function:"interpolated","zoom-function":!0,"property-function":!0,transition:!0,units:"pixels",requires:["icon-image"]},"icon-translate":{type:"array",value:"number",length:2,default:[0,0],function:"interpolated","zoom-function":!0,transition:!0,units:"pixels",requires:["icon-image"]},"icon-translate-anchor":{type:"enum",function:"piecewise-constant","zoom-function":!0,values:{map:{},viewport:{}},
default:"map",requires:["icon-image","icon-translate"]},"text-opacity":{type:"number",default:1,minimum:0,maximum:1,function:"interpolated","zoom-function":!0,"property-function":!0,transition:!0,requires:["text-field"]},"text-color":{type:"color",default:"#000000",function:"interpolated","zoom-function":!0,"property-function":!0,transition:!0,requires:["text-field"]},"text-halo-color":{type:"color",default:"rgba(0, 0, 0, 0)",function:"interpolated","zoom-function":!0,"property-function":!0,transition:!0,
requires:["text-field"]},"text-halo-width":{type:"number",default:0,minimum:0,function:"interpolated","zoom-function":!0,"property-function":!0,transition:!0,units:"pixels",requires:["text-field"]},"text-halo-blur":{type:"number",default:0,minimum:0,function:"interpolated","zoom-function":!0,"property-function":!0,transition:!0,units:"pixels",requires:["text-field"]},"text-translate":{type:"array",value:"number",length:2,default:[0,0],function:"interpolated","zoom-function":!0,transition:!0,units:"pixels",
requires:["text-field"]},"text-translate-anchor":{type:"enum",function:"piecewise-constant","zoom-function":!0,values:{map:{},viewport:{}},default:"map",requires:["text-field","text-translate"]}},paint_raster:{"raster-opacity":{type:"number",default:1,minimum:0,maximum:1,function:"interpolated","zoom-function":!0,transition:!0},"raster-hue-rotate":{type:"number",default:0,period:360,function:"interpolated","zoom-function":!0,transition:!0,units:"degrees"},"raster-brightness-min":{type:"number",function:"interpolated",
"zoom-function":!0,default:0,minimum:0,maximum:1,transition:!0},"raster-brightness-max":{type:"number",function:"interpolated","zoom-function":!0,default:1,minimum:0,maximum:1,transition:!0},"raster-saturation":{type:"number",default:0,minimum:-1,maximum:1,function:"interpolated","zoom-function":!0,transition:!0},"raster-contrast":{type:"number",default:0,minimum:-1,maximum:1,function:"interpolated","zoom-function":!0,transition:!0},"raster-fade-duration":{type:"number",default:300,minimum:0,function:"interpolated",
"zoom-function":!0,transition:!1,units:"milliseconds"}},paint_hillshade:{"hillshade-illumination-direction":{type:"number",default:335,minimum:0,maximum:359,function:"interpolated","zoom-function":!0,transition:!1},"hillshade-illumination-anchor":{type:"enum",function:"piecewise-constant","zoom-function":!0,values:{map:{},viewport:{}},default:"viewport"},"hillshade-exaggeration":{type:"number",default:.5,minimum:0,maximum:1,function:"interpolated","zoom-function":!0,transition:!0},"hillshade-shadow-color":{type:"color",
default:"#000000",function:"interpolated","zoom-function":!0,transition:!0},"hillshade-highlight-color":{type:"color",default:"#FFFFFF",function:"interpolated","zoom-function":!0,transition:!0},"hillshade-accent-color":{type:"color",default:"#000000",function:"interpolated","zoom-function":!0,transition:!0}},paint_background:{"background-color":{type:"color",default:"#000000",function:"interpolated","zoom-function":!0,transition:!0,requires:[{"!":"background-pattern"}]},"background-pattern":{type:"string",
function:"piecewise-constant","zoom-function":!0,transition:!0},"background-opacity":{type:"number",default:1,minimum:0,maximum:1,function:"interpolated","zoom-function":!0,transition:!0}},transition:{duration:{type:"number",default:300,minimum:0,units:"milliseconds"},delay:{type:"number",default:0,minimum:0,units:"milliseconds"}},"layout_fill-extrusion":{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible"}},function:{expression:{type:"expression"},stops:{type:"array",value:"function_stop"},
base:{type:"number",default:1,minimum:0},property:{type:"string",default:"$zoom"},type:{type:"enum",values:{identity:{},exponential:{},interval:{},categorical:{}},default:"exponential"},colorSpace:{type:"enum",values:{rgb:{},lab:{},hcl:{}},default:"rgb"},default:{type:"*",required:!1}},"paint_fill-extrusion":{"fill-extrusion-opacity":{type:"number",function:"interpolated","zoom-function":!0,"property-function":!1,default:1,minimum:0,maximum:1,transition:!0},"fill-extrusion-color":{type:"color",default:"#000000",
function:"interpolated","zoom-function":!0,"property-function":!0,transition:!0,requires:[{"!":"fill-extrusion-pattern"}]},"fill-extrusion-translate":{type:"array",value:"number",length:2,default:[0,0],function:"interpolated","zoom-function":!0,transition:!0,units:"pixels"},"fill-extrusion-translate-anchor":{type:"enum",function:"piecewise-constant","zoom-function":!0,values:{map:{},viewport:{}},default:"map",requires:["fill-extrusion-translate"]},"fill-extrusion-pattern":{type:"string",function:"piecewise-constant",
"zoom-function":!0,transition:!0},"fill-extrusion-height":{type:"number",function:"interpolated","zoom-function":!0,"property-function":!0,default:0,minimum:0,units:"meters",transition:!0},"fill-extrusion-base":{type:"number",function:"interpolated","zoom-function":!0,"property-function":!0,default:0,minimum:0,units:"meters",transition:!0,requires:["fill-extrusion-height"]}}},Fa=function(b,a,c,d){this.message=(b?b+": ":"")+c;d&&(this.identifier=d);null!=a&&a.__line__&&(this.line=a.__line__)},eb=function(b){function a(a,
c){b.call(this,c);this.message=c;this.key=a}return b&&(a.__proto__=b),a.prototype=Object.create(b&&b.prototype),a.prototype.constructor=a,a}(Error),ob=function(b,a){void 0===a&&(a=[]);this.parent=b;this.bindings={};for(b=0;b<a.length;b+=1){var c=a[b];this.bindings[c[0]]=c[1]}};ob.prototype.concat=function(b){return new ob(this,b)};ob.prototype.get=function(b){if(this.bindings[b])return this.bindings[b];if(this.parent)return this.parent.get(b);throw Error(b+" not found in scope.");};ob.prototype.has=
function(b){return!!this.bindings[b]||!!this.parent&&this.parent.has(b)};var fd={kind:"null"},za={kind:"number"},Za={kind:"string"},$a={kind:"boolean"},Ub={kind:"color"},Sb={kind:"object"},hb={kind:"value"},xb={kind:"collator"},df=[fd,za,Za,$a,Ub,Sb,E(hb)],Hb=g(function(b,a){function c(b){return 0>(b=Math.round(b))?0:255<b?255:b}function d(b){return 0>b?0:1<b?1:b}function f(b){return"%"===b[b.length-1]?c(parseFloat(b)/100*255):c(parseInt(b))}function e(b){return"%"===b[b.length-1]?d(parseFloat(b)/
100):d(parseFloat(b))}function k(b,a,c){return 0>c?c+=1:1<c&&--c,1>6*c?b+(a-b)*c*6:1>2*c?a:2>3*c?b+(a-b)*(2/3-c)*6:b}var g={transparent:[0,0,0,0],aliceblue:[240,248,255,1],antiquewhite:[250,235,215,1],aqua:[0,255,255,1],aquamarine:[127,255,212,1],azure:[240,255,255,1],beige:[245,245,220,1],bisque:[255,228,196,1],black:[0,0,0,1],blanchedalmond:[255,235,205,1],blue:[0,0,255,1],blueviolet:[138,43,226,1],brown:[165,42,42,1],burlywood:[222,184,135,1],cadetblue:[95,158,160,1],chartreuse:[127,255,0,1],chocolate:[210,
105,30,1],coral:[255,127,80,1],cornflowerblue:[100,149,237,1],cornsilk:[255,248,220,1],crimson:[220,20,60,1],cyan:[0,255,255,1],darkblue:[0,0,139,1],darkcyan:[0,139,139,1],darkgoldenrod:[184,134,11,1],darkgray:[169,169,169,1],darkgreen:[0,100,0,1],darkgrey:[169,169,169,1],darkkhaki:[189,183,107,1],darkmagenta:[139,0,139,1],darkolivegreen:[85,107,47,1],darkorange:[255,140,0,1],darkorchid:[153,50,204,1],darkred:[139,0,0,1],darksalmon:[233,150,122,1],darkseagreen:[143,188,143,1],darkslateblue:[72,61,
139,1],darkslategray:[47,79,79,1],darkslategrey:[47,79,79,1],darkturquoise:[0,206,209,1],darkviolet:[148,0,211,1],deeppink:[255,20,147,1],deepskyblue:[0,191,255,1],dimgray:[105,105,105,1],dimgrey:[105,105,105,1],dodgerblue:[30,144,255,1],firebrick:[178,34,34,1],floralwhite:[255,250,240,1],forestgreen:[34,139,34,1],fuchsia:[255,0,255,1],gainsboro:[220,220,220,1],ghostwhite:[248,248,255,1],gold:[255,215,0,1],goldenrod:[218,165,32,1],gray:[128,128,128,1],green:[0,128,0,1],greenyellow:[173,255,47,1],
grey:[128,128,128,1],honeydew:[240,255,240,1],hotpink:[255,105,180,1],indianred:[205,92,92,1],indigo:[75,0,130,1],ivory:[255,255,240,1],khaki:[240,230,140,1],lavender:[230,230,250,1],lavenderblush:[255,240,245,1],lawngreen:[124,252,0,1],lemonchiffon:[255,250,205,1],lightblue:[173,216,230,1],lightcoral:[240,128,128,1],lightcyan:[224,255,255,1],lightgoldenrodyellow:[250,250,210,1],lightgray:[211,211,211,1],lightgreen:[144,238,144,1],lightgrey:[211,211,211,1],lightpink:[255,182,193,1],lightsalmon:[255,
160,122,1],lightseagreen:[32,178,170,1],lightskyblue:[135,206,250,1],lightslategray:[119,136,153,1],lightslategrey:[119,136,153,1],lightsteelblue:[176,196,222,1],lightyellow:[255,255,224,1],lime:[0,255,0,1],limegreen:[50,205,50,1],linen:[250,240,230,1],magenta:[255,0,255,1],maroon:[128,0,0,1],mediumaquamarine:[102,205,170,1],mediumblue:[0,0,205,1],mediumorchid:[186,85,211,1],mediumpurple:[147,112,219,1],mediumseagreen:[60,179,113,1],mediumslateblue:[123,104,238,1],mediumspringgreen:[0,250,154,1],
mediumturquoise:[72,209,204,1],mediumvioletred:[199,21,133,1],midnightblue:[25,25,112,1],mintcream:[245,255,250,1],mistyrose:[255,228,225,1],moccasin:[255,228,181,1],navajowhite:[255,222,173,1],navy:[0,0,128,1],oldlace:[253,245,230,1],olive:[128,128,0,1],olivedrab:[107,142,35,1],orange:[255,165,0,1],orangered:[255,69,0,1],orchid:[218,112,214,1],palegoldenrod:[238,232,170,1],palegreen:[152,251,152,1],paleturquoise:[175,238,238,1],palevioletred:[219,112,147,1],papayawhip:[255,239,213,1],peachpuff:[255,
218,185,1],peru:[205,133,63,1],pink:[255,192,203,1],plum:[221,160,221,1],powderblue:[176,224,230,1],purple:[128,0,128,1],rebeccapurple:[102,51,153,1],red:[255,0,0,1],rosybrown:[188,143,143,1],royalblue:[65,105,225,1],saddlebrown:[139,69,19,1],salmon:[250,128,114,1],sandybrown:[244,164,96,1],seagreen:[46,139,87,1],seashell:[255,245,238,1],sienna:[160,82,45,1],silver:[192,192,192,1],skyblue:[135,206,235,1],slateblue:[106,90,205,1],slategray:[112,128,144,1],slategrey:[112,128,144,1],snow:[255,250,250,
1],springgreen:[0,255,127,1],steelblue:[70,130,180,1],tan:[210,180,140,1],teal:[0,128,128,1],thistle:[216,191,216,1],tomato:[255,99,71,1],turquoise:[64,224,208,1],violet:[238,130,238,1],wheat:[245,222,179,1],white:[255,255,255,1],whitesmoke:[245,245,245,1],yellow:[255,255,0,1],yellowgreen:[154,205,50,1]};try{a.parseCSSColor=function(b){var a;b=b.replace(/ /g,"").toLowerCase();if(b in g)return g[b].slice();if("#"===b[0])return 4===b.length?0<=(a=parseInt(b.substr(1),16))&&4095>=a?[(3840&a)>>4|(3840&
a)>>8,240&a|(240&a)>>4,15&a|(15&a)<<4,1]:null:7===b.length&&0<=(a=parseInt(b.substr(1),16))&&16777215>=a?[(16711680&a)>>16,(65280&a)>>8,255&a,1]:null;var d=b.indexOf("("),h=b.indexOf(")");if(-1!==d&&h+1===b.length)switch(a=b.substr(0,d),d=b.substr(d+1,h-(d+1)).split(","),b=1,a){case "rgba":if(4!==d.length)break;b=e(d.pop());case "rgb":return 3!==d.length?null:[f(d[0]),f(d[1]),f(d[2]),b];case "hsla":if(4!==d.length)break;b=e(d.pop());case "hsl":if(3===d.length)return a=(parseFloat(d[0])%360+360)%360/
360,h=e(d[1]),d=e(d[2]),h=.5>=d?d*(h+1):d+h-d*h,d=2*d-h,[c(255*k(d,h,a+1/3)),c(255*k(d,h,a)),c(255*k(d,h,a-1/3)),b]}return null}}catch(Gc){}}).parseCSSColor,cb=function(b,a,c,d){void 0===d&&(d=1);this.r=b;this.g=a;this.b=c;this.a=d};cb.parse=function(b){if(b){if(b instanceof cb)return b;if("string"==typeof b&&(b=Hb(b)))return new cb(b[0]/255*b[3],b[1]/255*b[3],b[2]/255*b[3],b[3])}};cb.prototype.toString=function(){var b=this.toArray();return"rgba("+Math.round(b[0])+","+Math.round(b[1])+","+Math.round(b[2])+
","+b[3]+")"};cb.prototype.toArray=function(){var b=this.r,a=this.g,c=this.b,d=this.a;return 0===d?[0,0,0,0]:[255*b/d,255*a/d,255*c/d,d]};cb.black=new cb(0,0,0,1);cb.white=new cb(1,1,1,1);cb.transparent=new cb(0,0,0,0);var hc=function(b,a,c){this.sensitivity=b?a?"variant":"case":a?"accent":"base";this.locale=c;this.collator=new Intl.Collator(this.locale?this.locale:[],{sensitivity:this.sensitivity,usage:"search"})};hc.prototype.compare=function(b,a){return this.collator.compare(b,a)};hc.prototype.resolvedLocale=
function(){return(new Intl.Collator(this.locale?this.locale:[])).resolvedOptions().locale};var gc=function(b,a,c){this.type=xb;this.locale=c;this.caseSensitive=b;this.diacriticSensitive=a};gc.parse=function(b,a){if(2!==b.length)return a.error("Expected one argument.");b=b[1];if("object"!=typeof b||Array.isArray(b))return a.error("Collator options argument must be an object.");var c=a.parse(void 0!==b["case-sensitive"]&&b["case-sensitive"],1,$a);if(!c)return null;var d=a.parse(void 0!==b["diacritic-sensitive"]&&
b["diacritic-sensitive"],1,$a);if(!d)return null;var f=null;return b.locale&&!(f=a.parse(b.locale,1,Za))?null:new gc(c,d,f)};gc.prototype.evaluate=function(b){return new hc(this.caseSensitive.evaluate(b),this.diacriticSensitive.evaluate(b),this.locale?this.locale.evaluate(b):null)};gc.prototype.eachChild=function(b){b(this.caseSensitive);b(this.diacriticSensitive);this.locale&&b(this.locale)};gc.prototype.possibleOutputs=function(){return[void 0]};gc.prototype.serialize=function(){var b={};return b["case-sensitive"]=
this.caseSensitive.serialize(),b["diacritic-sensitive"]=this.diacriticSensitive.serialize(),this.locale&&(b.locale=this.locale.serialize()),["collator",b]};var ub=function(b,a){this.type=b;this.value=a};ub.parse=function(b,a){if(2!==b.length)return a.error("'literal' expression requires exactly one argument, but found "+(b.length-1)+" instead.");if(!function be(b){if(null===b||"string"==typeof b||"boolean"==typeof b||"number"==typeof b||b instanceof cb||b instanceof hc)return!0;if(Array.isArray(b)){for(var a=
0;a<b.length;a+=1)if(!be(b[a]))return!1;return!0}if("object"==typeof b){for(a in b)if(!be(b[a]))return!1;return!0}return!1}(b[1]))return a.error("invalid value");b=b[1];var c=L(b);a=a.expectedType;return"array"!==c.kind||0!==c.N||!a||"array"!==a.kind||"number"==typeof a.N&&0!==a.N||(c=a),new ub(c,b)};ub.prototype.evaluate=function(){return this.value};ub.prototype.eachChild=function(){};ub.prototype.possibleOutputs=function(){return[this.value]};ub.prototype.serialize=function(){return"array"===this.type.kind||
"object"===this.type.kind?["literal",this.value]:this.value instanceof cb?["rgba"].concat(this.value.toArray()):this.value};var ic=function(b){this.name="ExpressionEvaluationError";this.message=b};ic.prototype.toJSON=function(){return this.message};var Of={string:Za,number:za,boolean:$a,object:Sb},Db=function(b,a){this.type=b;this.args=a};Db.parse=function(b,a){if(2>b.length)return a.error("Expected at least one argument.");for(var c=Of[b[0]],d=[],f=1;f<b.length;f++){var e=a.parse(b[f],f,hb);if(!e)return null;
d.push(e)}return new Db(c,d)};Db.prototype.evaluate=function(b){for(var a=0;a<this.args.length;a++){var c=this.args[a].evaluate(b);if(!I(this.type,L(c)))return c;if(a===this.args.length-1)throw new ic("Expected value to be of type "+K(this.type)+", but found "+K(L(c))+" instead.");}return null};Db.prototype.eachChild=function(b){this.args.forEach(b)};Db.prototype.possibleOutputs=function(){return(b=[]).concat.apply(b,this.args.map(function(b){return b.possibleOutputs()}));var b};Db.prototype.serialize=
function(){return[this.type.kind].concat(this.args.map(function(b){return b.serialize()}))};var Id={string:Za,number:za,boolean:$a},pc=function(b,a){this.type=b;this.input=a};pc.parse=function(b,a){if(2>b.length||4<b.length)return a.error("Expected 1, 2, or 3 arguments, but found "+(b.length-1)+" instead.");if(2<b.length){var c=b[1];if("string"!=typeof c||!(c in Id))return a.error('The item type argument of "array" must be one of string, number, boolean',1);c=Id[c]}else c=hb;if(3<b.length){if("number"!=
typeof b[2]||0>b[2]||b[2]!==Math.floor(b[2]))return a.error('The length argument to "array" must be a positive integer literal',2);var d=b[2]}d=E(c,d);return(b=a.parse(b[b.length-1],b.length-1,hb))?new pc(d,b):null};pc.prototype.evaluate=function(b){b=this.input.evaluate(b);if(I(this.type,L(b)))throw new ic("Expected value to be of type "+K(this.type)+", but found "+K(L(b))+" instead.");return b};pc.prototype.eachChild=function(b){b(this.input)};pc.prototype.possibleOutputs=function(){return this.input.possibleOutputs()};
pc.prototype.serialize=function(){var b=["array"],a=this.type.itemType;if("string"===a.kind||"number"===a.kind||"boolean"===a.kind)b.push(a.kind),a=this.type.N,"number"==typeof a&&b.push(a);return b.push(this.input.serialize()),b};var vg={"to-number":za,"to-color":Ub},Kc=function(b,a){this.type=b;this.args=a};Kc.parse=function(b,a){if(2>b.length)return a.error("Expected at least one argument.");for(var c=vg[b[0]],d=[],f=1;f<b.length;f++){var e=a.parse(b[f],f,hb);if(!e)return null;d.push(e)}return new Kc(c,
d)};Kc.prototype.evaluate=function(b){if("color"===this.type.kind){for(var a,c,d=0,f=this.args;d<f.length;d+=1)if(c=null,"string"==typeof(a=f[d].evaluate(b))){var e=b.parseColor(a);if(e)return e}else if(Array.isArray(a)&&!(c=3>a.length||4<a.length?"Invalid rbga value "+JSON.stringify(a)+": expected an array containing either three or four numeric values.":J(a[0],a[1],a[2],a[3])))return new cb(a[0]/255,a[1]/255,a[2]/255,a[3]);throw new ic(c||"Could not parse color from value '"+("string"==typeof a?
a:JSON.stringify(a))+"'");}a=null;c=0;for(d=this.args;c<d.length;c+=1)if(null!==(a=d[c].evaluate(b))&&(f=Number(a),!isNaN(f)))return f;throw new ic("Could not convert "+JSON.stringify(a)+" to number.");};Kc.prototype.eachChild=function(b){this.args.forEach(b)};Kc.prototype.possibleOutputs=function(){return(b=[]).concat.apply(b,this.args.map(function(b){return b.possibleOutputs()}));var b};Kc.prototype.serialize=function(){var b=["to-"+this.type.kind];return this.eachChild(function(a){b.push(a.serialize())}),
b};var wg=["Unknown","Point","LineString","Polygon"],Jd=function(){this._parseColorCache={}};Jd.prototype.id=function(){return this.feature&&"id"in this.feature?this.feature.id:null};Jd.prototype.geometryType=function(){return this.feature?"number"==typeof this.feature.type?wg[this.feature.type]:this.feature.type:null};Jd.prototype.properties=function(){return this.feature&&this.feature.properties||{}};Jd.prototype.parseColor=function(b){var a=this._parseColorCache[b];return a||(a=this._parseColorCache[b]=
cb.parse(b)),a};var Vb=function(b,a,c,d){this.name=b;this.type=a;this._evaluate=c;this.args=d};Vb.prototype.evaluate=function(b){return this._evaluate(b,this.args)};Vb.prototype.eachChild=function(b){this.args.forEach(b)};Vb.prototype.possibleOutputs=function(){return[void 0]};Vb.prototype.serialize=function(){return[this.name].concat(this.args.map(function(b){return b.serialize()}))};Vb.parse=function(b,a){var c=b[0],d=Vb.definitions[c];if(!d)return a.error('Unknown expression "'+c+'". If you wanted a literal array, use ["literal", [...]].',
0);var f=Array.isArray(d)?d[0]:d.type,e=Array.isArray(d)?[[d[1],d[2]]]:d.overloads,k=e.filter(function(a){a=a[0];return!Array.isArray(a)||a.length===b.length-1});d=[];for(var g=1;g<b.length;g++){var h=b[g],l=void 0;1===k.length&&(l=k[0][0],l=Array.isArray(l)?l[g-1]:l.type);h=a.parse(h,1+d.length,l);if(!h)return null;d.push(h)}l=null;for(g=0;g<k.length;g+=1){l=k[g];h=l[0];var r=l[1];if(l=new Ac(a.registry,a.path,null,a.scope),Array.isArray(h)&&h.length!==d.length)l.error("Expected "+h.length+" arguments, but found "+
d.length+" instead.");else{for(var n=0;n<d.length;n++){var q=Array.isArray(h)?h[n]:h.type,u=d[n];l.concat(n+1).checkSubtype(q,u.type)}if(0===l.errors.length)return new Vb(c,f,r,d)}}1===k.length?a.errors.push.apply(a.errors,l.errors):(c=(k.length?k:e).map(function(b){var a;return a=b[0],Array.isArray(a)?"("+a.map(K).join(", ")+")":"("+K(a.type)+"...)"}).join(" | "),f=d.map(function(b){return K(b.type)}).join(", "),a.error("Expected arguments of type "+c+", but found ("+f+") instead."));return null};
Vb.register=function(b,a){for(var c in Vb.definitions=a,a)b[c]=Vb};var qc=function(b,a){this.type=a.type;this.name=b;this.boundExpression=a};qc.parse=function(b,a){if(2!==b.length||"string"!=typeof b[1])return a.error("'var' expression requires exactly one string literal argument.");b=b[1];return a.scope.has(b)?new qc(b,a.scope.get(b)):a.error('Unknown variable "'+b+'". Make sure "'+b+'" has been bound in an enclosing "let" expression before using it.',1)};qc.prototype.evaluate=function(b){return this.boundExpression.evaluate(b)};
qc.prototype.eachChild=function(){};qc.prototype.possibleOutputs=function(){return[void 0]};qc.prototype.serialize=function(){return["var",this.name]};var Ac=function(b,a,c,d,f){void 0===a&&(a=[]);void 0===d&&(d=new ob);void 0===f&&(f=[]);this.registry=b;this.path=a;this.key=a.map(function(b){return"["+b+"]"}).join("");this.scope=d;this.errors=f;this.expectedType=c};Ac.prototype.parse=function(b,a,c,d,f){return void 0===f&&(f={}),a?this.concat(a,c,d)._parse(b,f):this._parse(b,f)};Ac.prototype._parse=
function(b,a){if(null!==b&&"string"!=typeof b&&"boolean"!=typeof b&&"number"!=typeof b||(b=["literal",b]),Array.isArray(b)){if(0===b.length)return this.error('Expected an array with at least one element. If you wanted a literal array, use ["literal", []].');var c=b[0];if("string"!=typeof c)return this.error("Expression name must be a string, but found "+typeof c+' instead. If you wanted a literal array, use ["literal", [...]].',0),null;var d=this.registry[c];if(d){b=d.parse(b,this);if(!b)return null;
if(this.expectedType)if(c=this.expectedType,d=b.type,"string"!==c.kind&&"number"!==c.kind&&"boolean"!==c.kind&&"object"!==c.kind||"value"!==d.kind)if("array"===c.kind&&"value"===d.kind)a.omitTypeAnnotations||(b=new pc(c,b));else if("color"!==c.kind||"value"!==d.kind&&"string"!==d.kind){if(this.checkSubtype(this.expectedType,b.type))return null}else a.omitTypeAnnotations||(b=new Kc(c,[b]));else a.omitTypeAnnotations||(b=new Db(c,[b]));if(!(b instanceof ub)&&function yf(b){if(b instanceof qc)return yf(b.boundExpression);
if(b instanceof Vb&&"error"===b.name||b instanceof gc)return!1;var a=b instanceof Kc||b instanceof Db||b instanceof pc,c=!0;b.eachChild(function(b){c=a?c&&yf(b):c&&b instanceof ub});return c?M(b)&&N(b,["zoom","heatmap-density","line-progress","is-supported-script"]):!1}(b)){a=new Jd;try{b=new ub(b.type,b.evaluate(a))}catch(be){return this.error(be.message),null}}return b}return this.error('Unknown expression "'+c+'". If you wanted a literal array, use ["literal", [...]].',0)}return void 0===b?this.error("'undefined' value invalid. Use null instead."):
"object"==typeof b?this.error('Bare objects invalid. Use ["literal", {...}] instead.'):this.error("Expected an array, but found "+typeof b+" instead.")};Ac.prototype.concat=function(b,a,c){b="number"==typeof b?this.path.concat(b):this.path;c=c?this.scope.concat(c):this.scope;return new Ac(this.registry,b,a||null,c,this.errors)};Ac.prototype.error=function(b){for(var a=[],c=arguments.length-1;0<c--;)a[c]=arguments[c+1];a=""+this.key+a.map(function(b){return"["+b+"]"}).join("");this.errors.push(new eb(a,
b))};Ac.prototype.checkSubtype=function(b,a){b=I(b,a);return b&&this.error(b),b};var Ab=function(b,a,c){this.type=b;this.input=a;this.labels=[];this.outputs=[];for(b=0;b<c.length;b+=1){a=c[b];var d=a[1];this.labels.push(a[0]);this.outputs.push(d)}};Ab.parse=function(b,a){var c=b[1],d=b.slice(2);if(4>b.length-1)return a.error("Expected at least 4 arguments, but found only "+(b.length-1)+".");if(0!=(b.length-1)%2)return a.error("Expected an even number of arguments.");if(!(c=a.parse(c,1,za)))return null;
b=[];var f=null;a.expectedType&&"value"!==a.expectedType.kind&&(f=a.expectedType);d.unshift(-1/0);for(var e=0;e<d.length;e+=2){var k=d[e],g=d[e+1],h=e+1,l=e+2;if("number"!=typeof k)return a.error('Input/output pairs for "step" expressions must be defined using literal numeric values (not computed expressions) for the input values.',h);if(b.length&&b[b.length-1][0]>=k)return a.error('Input/output pairs for "step" expressions must be arranged with input values in strictly ascending order.',h);g=a.parse(g,
l,f);if(!g)return null;f=f||g.type;b.push([k,g])}return new Ab(f,c,b)};Ab.prototype.evaluate=function(b){var a=this.labels,c=this.outputs;if(1===a.length)return c[0].evaluate(b);var d=this.input.evaluate(b);if(d<=a[0])return c[0].evaluate(b);var f=a.length;return d>=a[f-1]?c[f-1].evaluate(b):c[O(a,d)].evaluate(b)};Ab.prototype.eachChild=function(b){b(this.input);for(var a=0,c=this.outputs;a<c.length;a+=1)b(c[a])};Ab.prototype.possibleOutputs=function(){return(b=[]).concat.apply(b,this.outputs.map(function(b){return b.possibleOutputs()}));
var b};Ab.prototype.serialize=function(){for(var b=["step",this.input.serialize()],a=0;a<this.labels.length;a++)0<a&&b.push(this.labels[a]),b.push(this.outputs[a].serialize());return b};var jc=Object.freeze({number:R,color:function(b,a,c){return new cb(R(b.r,a.r,c),R(b.g,a.g,c),R(b.b,a.b,c),R(b.a,a.a,c))},array:function(b,a,c){return b.map(function(b,d){return R(b,a[d],c)})}}),bc=function(b,a,c,d){this.type=b;this.interpolation=a;this.input=c;this.labels=[];this.outputs=[];for(b=0;b<d.length;b+=1)a=
d[b],c=a[1],this.labels.push(a[0]),this.outputs.push(c)};bc.interpolationFactor=function(b,a,c,d){var f=0;"exponential"===b.name?f=T(a,b.base,c,d):"linear"===b.name?f=T(a,1,c,d):"cubic-bezier"===b.name&&(b=b.controlPoints,f=(new $e(b[0],b[1],b[2],b[3])).solve(T(a,1,c,d)));return f};bc.parse=function(b,a){var c=b[1],d=b[2],f=b.slice(3);if(!Array.isArray(c)||0===c.length)return a.error("Expected an interpolation type expression.",1);if("linear"===c[0])c={name:"linear"};else if("exponential"===c[0]){c=
c[1];if("number"!=typeof c)return a.error("Exponential interpolation requires a numeric base.",1,1);c={name:"exponential",base:c}}else{if("cubic-bezier"!==c[0])return a.error("Unknown interpolation type "+String(c[0]),1,0);c=c.slice(1);if(4!==c.length||c.some(function(b){return"number"!=typeof b||0>b||1<b}))return a.error("Cubic bezier interpolation requires four numeric arguments with values between 0 and 1.",1);c={name:"cubic-bezier",controlPoints:c}}if(4>b.length-1)return a.error("Expected at least 4 arguments, but found only "+
(b.length-1)+".");if(0!=(b.length-1)%2)return a.error("Expected an even number of arguments.");if(!(d=a.parse(d,2,za)))return null;b=[];var e=null;a.expectedType&&"value"!==a.expectedType.kind&&(e=a.expectedType);for(var k=0;k<f.length;k+=2){var g=f[k],h=f[k+1],l=k+3,r=k+4;if("number"!=typeof g)return a.error('Input/output pairs for "interpolate" expressions must be defined using literal numeric values (not computed expressions) for the input values.',l);if(b.length&&b[b.length-1][0]>=g)return a.error('Input/output pairs for "interpolate" expressions must be arranged with input values in strictly ascending order.',
l);h=a.parse(h,r,e);if(!h)return null;e=e||h.type;b.push([g,h])}return"number"===e.kind||"color"===e.kind||"array"===e.kind&&"number"===e.itemType.kind&&"number"==typeof e.N?new bc(e,c,d,b):a.error("Type "+K(e)+" is not interpolatable.")};bc.prototype.evaluate=function(b){var a=this.labels,c=this.outputs;if(1===a.length)return c[0].evaluate(b);var d=this.input.evaluate(b);if(d<=a[0])return c[0].evaluate(b);var f=a.length;if(d>=a[f-1])return c[f-1].evaluate(b);f=O(a,d);a=bc.interpolationFactor(this.interpolation,
d,a[f],a[f+1]);d=c[f].evaluate(b);b=c[f+1].evaluate(b);return jc[this.type.kind.toLowerCase()](d,b,a)};bc.prototype.eachChild=function(b){b(this.input);for(var a=0,c=this.outputs;a<c.length;a+=1)b(c[a])};bc.prototype.possibleOutputs=function(){return(b=[]).concat.apply(b,this.outputs.map(function(b){return b.possibleOutputs()}));var b};bc.prototype.serialize=function(){for(var b=["interpolate","linear"===this.interpolation.name?["linear"]:"exponential"===this.interpolation.name?1===this.interpolation.base?
["linear"]:["exponential",this.interpolation.base]:["cubic-bezier"].concat(this.interpolation.controlPoints),this.input.serialize()],a=0;a<this.labels.length;a++)b.push(this.labels[a],this.outputs[a].serialize());return b};var gd=function(b,a){this.type=b;this.args=a};gd.parse=function(b,a){if(2>b.length)return a.error("Expectected at least one argument.");var c=null,d=a.expectedType;d&&"value"!==d.kind&&(c=d);var f=[],e=0;for(b=b.slice(1);e<b.length;e+=1){var k=a.parse(b[e],1+f.length,c,void 0,{omitTypeAnnotations:!0});
if(!k)return null;c=c||k.type;f.push(k)}a=d&&f.some(function(b){return I(d,b.type)});return new gd(a?hb:c,f)};gd.prototype.evaluate=function(b){for(var a=null,c=0,d=this.args;c<d.length&&null===(a=d[c].evaluate(b));c+=1);return a};gd.prototype.eachChild=function(b){this.args.forEach(b)};gd.prototype.possibleOutputs=function(){return(b=[]).concat.apply(b,this.args.map(function(b){return b.possibleOutputs()}));var b};gd.prototype.serialize=function(){var b=["coalesce"];return this.eachChild(function(a){b.push(a.serialize())}),
b};var hd=function(b,a){this.type=a.type;this.bindings=[].concat(b);this.result=a};hd.prototype.evaluate=function(b){return this.result.evaluate(b)};hd.prototype.eachChild=function(b){for(var a=0,c=this.bindings;a<c.length;a+=1)b(c[a][1]);b(this.result)};hd.parse=function(b,a){if(4>b.length)return a.error("Expected at least 3 arguments, but found "+(b.length-1)+" instead.");for(var c=[],d=1;d<b.length-1;d+=2){var f=b[d];if("string"!=typeof f)return a.error("Expected string, but found "+typeof f+" instead.",
d);if(/[^a-zA-Z0-9_]/.test(f))return a.error("Variable names must contain only alphanumeric characters or '_'.",d);var e=a.parse(b[d+1],d+1);if(!e)return null;c.push([f,e])}return(b=a.parse(b[b.length-1],b.length-1,void 0,c))?new hd(c,b):null};hd.prototype.possibleOutputs=function(){return this.result.possibleOutputs()};hd.prototype.serialize=function(){for(var b=["let"],a=0,c=this.bindings;a<c.length;a+=1){var d=c[a];b.push(d[0],d[1].serialize())}return b.push(this.result.serialize()),b};var vc=
function(b,a,c){this.type=b;this.index=a;this.input=c};vc.parse=function(b,a){if(3!==b.length)return a.error("Expected 2 arguments, but found "+(b.length-1)+" instead.");var c=a.parse(b[1],1,za);b=a.parse(b[2],2,E(a.expectedType||hb));return c&&b?new vc(b.type.itemType,c,b):null};vc.prototype.evaluate=function(b){var a=this.index.evaluate(b);b=this.input.evaluate(b);if(0>a)throw new ic("Array index out of bounds: "+a+" \x3c 0.");if(a>=b.length)throw new ic("Array index out of bounds: "+a+" \x3e "+
(b.length-1)+".");if(a!==Math.floor(a))throw new ic("Array index must be an integer, but found "+a+" instead.");return b[a]};vc.prototype.eachChild=function(b){b(this.index);b(this.input)};vc.prototype.possibleOutputs=function(){return[void 0]};vc.prototype.serialize=function(){return["at",this.index.serialize(),this.input.serialize()]};var cc=function(b,a,c,d,f,e){this.inputType=b;this.type=a;this.input=c;this.cases=d;this.outputs=f;this.otherwise=e};cc.parse=function(b,a){if(5>b.length)return a.error("Expected at least 4 arguments, but found only "+
(b.length-1)+".");if(1!=b.length%2)return a.error("Expected an even number of arguments.");var c;a.expectedType&&"value"!==a.expectedType.kind&&(c=a.expectedType);for(var d={},f=[],e=2;e<b.length-1;e+=2){var k=b[e],g=b[e+1];Array.isArray(k)||(k=[k]);var h=a.concat(e);if(0===k.length)return h.error("Expected at least one branch label.");for(var l=0;l<k.length;l+=1){var r=k[l];if("number"!=typeof r&&"string"!=typeof r)return h.error("Branch labels must be numbers or strings.");if("number"==typeof r&&
Math.abs(r)>Number.MAX_SAFE_INTEGER)return h.error("Branch labels must be integers no larger than "+Number.MAX_SAFE_INTEGER+".");if("number"==typeof r&&Math.floor(r)!==r)return h.error("Numeric branch labels must be integer values.");if(n){if(h.checkSubtype(n,L(r)))return null}else var n=L(r);if(void 0!==d[String(r)])return h.error("Branch labels must be unique.");d[String(r)]=f.length}g=a.parse(g,e,c);if(!g)return null;c=c||g.type;f.push(g)}e=a.parse(b[1],1,n);return e?(b=a.parse(b[b.length-1],b.length-
1,c))?new cc(n,c,e,d,f,b):null:null};cc.prototype.evaluate=function(b){var a=this.input.evaluate(b);return(this.outputs[this.cases[a]]||this.otherwise).evaluate(b)};cc.prototype.eachChild=function(b){b(this.input);this.outputs.forEach(b);b(this.otherwise)};cc.prototype.possibleOutputs=function(){return(b=[]).concat.apply(b,this.outputs.map(function(b){return b.possibleOutputs()})).concat(this.otherwise.possibleOutputs());var b};cc.prototype.serialize=function(){for(var b=this,a=["match",this.input.serialize()],
c=[],d={},f=0,e=Object.keys(this.cases).sort();f<e.length;f+=1){var k=e[f],g=d[b.cases[k]];void 0===g?(d[b.cases[k]]=c.length,c.push([b.cases[k],[k]])):c[g][1].push(k)}d=function(a){return"number"===b.input.type.kind?Number(a):a};for(f=0;f<c.length;f+=1)k=c[f],e=k[0],k=k[1],1===k.length?a.push(d(k[0])):a.push(k.map(d)),a.push(b.outputs[e].serialize());return a.push(this.otherwise.serialize()),a};var Kd=function(b,a,c){this.type=b;this.branches=a;this.otherwise=c};Kd.parse=function(b,a){if(4>b.length)return a.error("Expected at least 3 arguments, but found only "+
(b.length-1)+".");if(0!=b.length%2)return a.error("Expected an odd number of arguments.");var c;a.expectedType&&"value"!==a.expectedType.kind&&(c=a.expectedType);for(var d=[],f=1;f<b.length-1;f+=2){var e=a.parse(b[f],f,$a);if(!e)return null;var k=a.parse(b[f+1],f+1,c);if(!k)return null;d.push([e,k]);c=c||k.type}return(b=a.parse(b[b.length-1],b.length-1,c))?new Kd(c,d,b):null};Kd.prototype.evaluate=function(b){for(var a=0,c=this.branches;a<c.length;a+=1){var d=c[a],f=d[1];if(d[0].evaluate(b))return f.evaluate(b)}return this.otherwise.evaluate(b)};
Kd.prototype.eachChild=function(b){for(var a=0,c=this.branches;a<c.length;a+=1){var d=c[a],f=d[1];b(d[0]);b(f)}b(this.otherwise)};Kd.prototype.possibleOutputs=function(){return(b=[]).concat.apply(b,this.branches.map(function(b){b[0];return b[1].possibleOutputs()})).concat(this.otherwise.possibleOutputs());var b};Kd.prototype.serialize=function(){var b=["case"];return this.eachChild(function(a){b.push(a.serialize())}),b};var xg=S("\x3d\x3d",!1),ef=S("!\x3d",!0),Ld=function(b){this.type=za;this.input=
b};Ld.parse=function(b,a){return 2!==b.length?a.error("Expected 1 argument, but found "+(b.length-1)+" instead."):(b=a.parse(b[1],1))?"array"!==b.type.kind&&"string"!==b.type.kind&&"value"!==b.type.kind?a.error("Expected argument of type string or array, but found "+K(b.type)+" instead."):new Ld(b):null};Ld.prototype.evaluate=function(b){b=this.input.evaluate(b);if("string"==typeof b||Array.isArray(b))return b.length;throw new ic("Expected value to be of type string or array, but found "+K(L(b))+
" instead.");};Ld.prototype.eachChild=function(b){b(this.input)};Ld.prototype.possibleOutputs=function(){return[void 0]};Ld.prototype.serialize=function(){var b=["length"];return this.eachChild(function(a){b.push(a.serialize())}),b};var Md={"\x3d\x3d":xg,"!\x3d":ef,array:pc,at:vc,boolean:Db,case:Kd,coalesce:gd,collator:gc,interpolate:bc,length:Ld,let:hd,literal:ub,match:cc,number:Db,object:Db,step:Ab,string:Db,"to-color":Kc,"to-number":Kc,var:qc};Vb.register(Md,{error:[{kind:"error"},[Za],function(b,
a){throw new ic(a[0].evaluate(b));}],typeof:[Za,[hb],function(b,a){return K(L(a[0].evaluate(b)))}],"to-string":[Za,[hb],function(b,a){a=a[0];b=typeof(a=a.evaluate(b));return null===a?"":"string"===b||"number"===b||"boolean"===b?String(a):a instanceof cb?a.toString():JSON.stringify(a)}],"to-boolean":[$a,[hb],function(b,a){return!!a[0].evaluate(b)}],"to-rgba":[E(za,4),[Ub],function(b,a){return a[0].evaluate(b).toArray()}],rgb:[Ub,[za,za,za],ba],rgba:[Ub,[za,za,za,za],ba],has:{type:$a,overloads:[[[Za],
function(b,a){a=a[0].evaluate(b);b=b.properties();return a in b}],[[Za,Sb],function(b,a){var c=a[1];a=a[0].evaluate(b);b=c.evaluate(b);return a in b}]]},get:{type:hb,overloads:[[[Za],function(b,a){return da(a[0].evaluate(b),b.properties())}],[[Za,Sb],function(b,a){var c=a[1];return da(a[0].evaluate(b),c.evaluate(b))}]]},properties:[Sb,[],function(b){return b.properties()}],"geometry-type":[Za,[],function(b){return b.geometryType()}],id:[hb,[],function(b){return b.id()}],zoom:[za,[],function(b){return b.globals.zoom}],
"heatmap-density":[za,[],function(b){return b.globals.heatmapDensity||0}],"line-progress":[za,[],function(b){return b.globals.lineProgress||0}],"+":[za,{type:za},function(b,a){for(var c=0,d=0;d<a.length;d+=1)c+=a[d].evaluate(b);return c}],"*":[za,{type:za},function(b,a){for(var c=1,d=0;d<a.length;d+=1)c*=a[d].evaluate(b);return c}],"-":{type:za,overloads:[[[za,za],function(b,a){var c=a[1];return a[0].evaluate(b)-c.evaluate(b)}],[[za],function(b,a){return-a[0].evaluate(b)}]]},"/":[za,[za,za],function(b,
a){var c=a[1];return a[0].evaluate(b)/c.evaluate(b)}],"%":[za,[za,za],function(b,a){var c=a[1];return a[0].evaluate(b)%c.evaluate(b)}],ln2:[za,[],function(){return Math.LN2}],pi:[za,[],function(){return Math.PI}],e:[za,[],function(){return Math.E}],"^":[za,[za,za],function(b,a){var c=a[1];return Math.pow(a[0].evaluate(b),c.evaluate(b))}],sqrt:[za,[za],function(b,a){return Math.sqrt(a[0].evaluate(b))}],log10:[za,[za],function(b,a){return Math.log10(a[0].evaluate(b))}],ln:[za,[za],function(b,a){return Math.log(a[0].evaluate(b))}],
log2:[za,[za],function(b,a){return Math.log2(a[0].evaluate(b))}],sin:[za,[za],function(b,a){return Math.sin(a[0].evaluate(b))}],cos:[za,[za],function(b,a){return Math.cos(a[0].evaluate(b))}],tan:[za,[za],function(b,a){return Math.tan(a[0].evaluate(b))}],asin:[za,[za],function(b,a){return Math.asin(a[0].evaluate(b))}],acos:[za,[za],function(b,a){return Math.acos(a[0].evaluate(b))}],atan:[za,[za],function(b,a){return Math.atan(a[0].evaluate(b))}],min:[za,{type:za},function(b,a){return Math.min.apply(Math,
a.map(function(a){return a.evaluate(b)}))}],max:[za,{type:za},function(b,a){return Math.max.apply(Math,a.map(function(a){return a.evaluate(b)}))}],abs:[za,[za],function(b,a){return Math.abs(a[0].evaluate(b))}],round:[za,[za],function(b,a){b=a[0].evaluate(b);return 0>b?-Math.round(-b):Math.round(b)}],floor:[za,[za],function(b,a){return Math.floor(a[0].evaluate(b))}],ceil:[za,[za],function(b,a){return Math.ceil(a[0].evaluate(b))}],"filter-\x3d\x3d":[$a,[Za,hb],function(b,a){var c=a[0];a=a[1];return b.properties()[c.value]===
a.value}],"filter-id-\x3d\x3d":[$a,[hb],function(b,a){a=a[0];return b.id()===a.value}],"filter-type-\x3d\x3d":[$a,[Za],function(b,a){a=a[0];return b.geometryType()===a.value}],"filter-\x3c":[$a,[Za,hb],function(b,a){var c=a[0];a=a[1];b=b.properties()[c.value];c=a.value;return typeof b==typeof c&&b<c}],"filter-id-\x3c":[$a,[hb],function(b,a){a=a[0];b=b.id();a=a.value;return typeof b==typeof a&&b<a}],"filter-\x3e":[$a,[Za,hb],function(b,a){var c=a[0];a=a[1];b=b.properties()[c.value];c=a.value;return typeof b==
typeof c&&b>c}],"filter-id-\x3e":[$a,[hb],function(b,a){a=a[0];b=b.id();a=a.value;return typeof b==typeof a&&b>a}],"filter-\x3c\x3d":[$a,[Za,hb],function(b,a){var c=a[0];a=a[1];b=b.properties()[c.value];c=a.value;return typeof b==typeof c&&b<=c}],"filter-id-\x3c\x3d":[$a,[hb],function(b,a){a=a[0];b=b.id();a=a.value;return typeof b==typeof a&&b<=a}],"filter-\x3e\x3d":[$a,[Za,hb],function(b,a){var c=a[0];a=a[1];b=b.properties()[c.value];c=a.value;return typeof b==typeof c&&b>=c}],"filter-id-\x3e\x3d":[$a,
[hb],function(b,a){a=a[0];b=b.id();a=a.value;return typeof b==typeof a&&b>=a}],"filter-has":[$a,[hb],function(b,a){return a[0].value in b.properties()}],"filter-has-id":[$a,[],function(b){return null!==b.id()}],"filter-type-in":[$a,[E(Za)],function(b,a){return 0<=a[0].value.indexOf(b.geometryType())}],"filter-id-in":[$a,[E(hb)],function(b,a){return 0<=a[0].value.indexOf(b.id())}],"filter-in-small":[$a,[Za,E(hb)],function(b,a){var c=a[0];return 0<=a[1].value.indexOf(b.properties()[c.value])}],"filter-in-large":[$a,
[Za,E(hb)],function(b,a){var c=a[0];a=a[1];a:{b=b.properties()[c.value];c=a.value;var d=0;for(a=a.value.length-1;d<=a;){var f=d+a>>1;if(c[f]===b){a=!0;break a}c[f]>b?a=f-1:d=f+1}a=!1}return a}],"\x3e":{type:$a,overloads:[[[za,za],Y],[[Za,Za],Y],[[Za,Za,xb],function(b,a){var c=a[0],d=a[1];return 0<a[2].evaluate(b).compare(c.evaluate(b),d.evaluate(b))}]]},"\x3c":{type:$a,overloads:[[[za,za],ca],[[Za,Za],ca],[[Za,Za,xb],function(b,a){var c=a[0],d=a[1];return 0>a[2].evaluate(b).compare(c.evaluate(b),
d.evaluate(b))}]]},"\x3e\x3d":{type:$a,overloads:[[[za,za],ea],[[Za,Za],ea],[[Za,Za,xb],function(b,a){var c=a[0],d=a[1];return 0<=a[2].evaluate(b).compare(c.evaluate(b),d.evaluate(b))}]]},"\x3c\x3d":{type:$a,overloads:[[[za,za],W],[[Za,Za],W],[[Za,Za,xb],function(b,a){var c=a[0],d=a[1];return 0>=a[2].evaluate(b).compare(c.evaluate(b),d.evaluate(b))}]]},all:{type:$a,overloads:[[[$a,$a],function(b,a){var c=a[1];return a[0].evaluate(b)&&c.evaluate(b)}],[{type:$a},function(b,a){for(var c=0;c<a.length;c+=
1)if(!a[c].evaluate(b))return!1;return!0}]]},any:{type:$a,overloads:[[[$a,$a],function(b,a){var c=a[1];return a[0].evaluate(b)||c.evaluate(b)}],[{type:$a},function(b,a){for(var c=0;c<a.length;c+=1)if(a[c].evaluate(b))return!0;return!1}]]},"!":[$a,[$a],function(b,a){return!a[0].evaluate(b)}],"is-supported-script":[$a,[Za],function(b,a){a=a[0];var c=b.globals&&b.globals.isSupportedScript;return!c||c(a.evaluate(b))}],upcase:[Za,[Za],function(b,a){return a[0].evaluate(b).toUpperCase()}],downcase:[Za,
[Za],function(b,a){return a[0].evaluate(b).toLowerCase()}],concat:[Za,{type:Za},function(b,a){return a.map(function(a){return a.evaluate(b)}).join("")}],"resolved-locale":[Za,[xb],function(b,a){return a[0].evaluate(b).resolvedLocale()}]});var rc=4/29,kc=6/29,lc=3*kc*kc,Rg=kc*kc*kc,Sc=Math.PI/180,De=180/Math.PI,Tc=Object.freeze({lab:{forward:oa,reverse:ua,interpolate:function(b,a,c){return{l:R(b.l,a.l,c),a:R(b.a,a.a,c),b:R(b.b,a.b,c),alpha:R(b.alpha,a.alpha,c)}}},hcl:{forward:function(b){var a=oa(b),
c=a.a,d=a.b,f=Math.atan2(d,c)*De;return{h:0>f?f+360:f,c:Math.sqrt(c*c+d*d),l:a.l,alpha:b.a}},reverse:function(b){var a=b.h*Sc,c=b.c;return ua({l:b.l,a:Math.cos(a)*c,b:Math.sin(a)*c,alpha:b.alpha})},interpolate:function(b,a,c){var d=b.h,f=a.h-d;return{h:d+c*(180<f||-180>f?f-360*Math.round(f/360):f),c:R(b.c,a.c,c),l:R(b.l,a.l,c),alpha:R(b.alpha,a.alpha,c)}}}}),Ee=function(b,a){this.expression=b;this._warningHistory={};this._defaultValue="color"===a.type&&qa(a.default)?new cb(0,0,0,0):"color"===a.type?
cb.parse(a.default)||null:void 0===a.default?null:a.default;"enum"===a.type&&(this._enumValues=a.values)};Ee.prototype.evaluateWithoutErrorHandling=function(b,a){return this._evaluator||(this._evaluator=new Jd),this._evaluator.globals=b,this._evaluator.feature=a,this.expression.evaluate(this._evaluator)};Ee.prototype.evaluate=function(b,a){this._evaluator||(this._evaluator=new Jd);this._evaluator.globals=b;this._evaluator.feature=a;try{var c=this.expression.evaluate(this._evaluator);if(null==c)return this._defaultValue;
if(this._enumValues&&!(c in this._enumValues))throw new ic("Expected value to be one of "+Object.keys(this._enumValues).map(function(b){return JSON.stringify(b)}).join(", ")+", but found "+JSON.stringify(c)+" instead.");return c}catch(Vc){return this._warningHistory[Vc.message]||(this._warningHistory[Vc.message]=!0,"undefined"!=typeof console&&console.warn(Vc.message)),this._defaultValue}};var Pf=function(b,a){this.kind=b;this._styleExpression=a};Pf.prototype.evaluateWithoutErrorHandling=function(b,
a){return this._styleExpression.evaluateWithoutErrorHandling(b,a)};Pf.prototype.evaluate=function(b,a){return this._styleExpression.evaluate(b,a)};var gf=function(b,a,c){this.kind=b;this.zoomStops=c.labels;this._styleExpression=a;c instanceof bc&&(this._interpolationType=c.interpolation)};gf.prototype.evaluateWithoutErrorHandling=function(b,a){return this._styleExpression.evaluateWithoutErrorHandling(b,a)};gf.prototype.evaluate=function(b,a){return this._styleExpression.evaluate(b,a)};gf.prototype.interpolationFactor=
function(b,a,c){return this._interpolationType?bc.interpolationFactor(this._interpolationType,b,a,c):0};var ff=function(b,a){this._parameters=b;this._specification=a;D(this,function be(b,a){var c=b.stops&&"object"==typeof b.stops[0][0],d=c||void 0!==b.property;d=c||!d;var f=b.type||("interpolated"===a.function?"exponential":"interval");if("color"===a.type&&((b=D({},b)).stops&&(b.stops=b.stops.map(function(b){return[b[0],cb.parse(b[1])]})),b.default?b.default=cb.parse(b.default):b.default=cb.parse(a.default)),
b.colorSpace&&"rgb"!==b.colorSpace&&!Tc[b.colorSpace])throw Error("Unknown color space: "+b.colorSpace);if("exponential"===f)var e=wa;else if("interval"===f)e=Ka;else if("categorical"===f){e=ia;var k=Object.create(null);for(var g=0,h=b.stops;g<h.length;g+=1){var l=h[g];k[l[0]]=l[1]}var r=typeof b.stops[0][0]}else{if("identity"!==f)throw Error('Unknown function type "'+f+'"');e=Aa}if(c){c={};d=[];for(f=0;f<b.stops.length;f++)g=b.stops[f],h=g[0].zoom,void 0===c[h]&&(c[h]={zoom:h,type:b.type,property:b.property,
default:b.default,stops:[]},d.push(h)),c[h].stops.push([g[0].value,g[1]]);var n=[];for(f=0;f<d.length;f+=1)g=d[f],n.push([c[g].zoom,be(c[g],a)]);return{kind:"composite",interpolationFactor:bc.interpolationFactor.bind(void 0,{name:"linear"}),zoomStops:n.map(function(b){return b[0]}),evaluate:function(c,d){c=c.zoom;return wa({stops:n,base:b.base},a,c).evaluate(c,d)}}}return d?{kind:"camera",interpolationFactor:"exponential"===f?bc.interpolationFactor.bind(void 0,{name:"exponential",base:void 0!==b.base?
b.base:1}):function(){return 0},zoomStops:b.stops.map(function(b){return b[0]}),evaluate:function(c){return e(b,a,c.zoom,k,r)}}:{kind:"source",evaluate:function(c,d){c=d&&d.properties?d.properties[b.property]:void 0;return void 0===c?V(b.default,a.default):e(b,a,c,k,r)}}}(this._parameters,this._specification))};ff.deserialize=function(b){return new ff(b._parameters,b._specification)};ff.serialize=function(b){return{_parameters:b._parameters,_specification:b._specification}};var sh={type:"boolean",
default:!1,function:!0,"property-function":!0,"zoom-function":!0},Sg={"*":function(){return[]},array:xa,boolean:function(b){var a=b.value;b=b.key;var c=Z(a);return"boolean"!==c?[new Fa(b,a,"boolean expected, "+c+" found")]:[]},number:Ia,color:function(b){var a=b.key;b=b.value;var c=Z(b);return"string"!==c?[new Fa(a,b,"color expected, "+c+" found")]:null===Hb(b)?[new Fa(a,b,'color expected, "'+b+'" found')]:[]},constants:C,enum:Ja,filter:Ya,function:aa,layer:Pb,object:ka,source:Yb,light:db,string:Lb};
nb.source=Cb(Yb);nb.light=Cb(db);nb.layer=Cb(Pb);nb.filter=Cb(Ya);nb.paintProperty=Cb(qb);nb.layoutProperty=Cb(gb);var th=nb.light,yg=nb.paintProperty,zg=nb.layoutProperty,Xd=3;Pa.prototype.insert=function(b,a,c,d,f){this._forEachCell(a,c,d,f,this._insertCell,this.uid++);this.keys.push(b);this.bboxes.push(a);this.bboxes.push(c);this.bboxes.push(d);this.bboxes.push(f)};Pa.prototype._insertReadonly=function(){throw"Cannot insert into a GridIndex created from an ArrayBuffer.";};Pa.prototype._insertCell=
function(b,a,c,d,f,e){this.cells[f].push(e)};Pa.prototype.query=function(b,a,c,d){var f=this.min,e=this.max;if(b<=f&&a<=f&&e<=c&&e<=d)return Array.prototype.slice.call(this.keys);f=[];return this._forEachCell(b,a,c,d,this._queryCell,f,{}),f};Pa.prototype._queryCell=function(b,a,c,d,f,e,k){f=this.cells[f];if(null!==f)for(var g=this.keys,h=this.bboxes,l=0;l<f.length;l++){var r=f[l];if(void 0===k[r]){var n=4*r;b<=h[n+2]&&a<=h[n+3]&&c>=h[n+0]&&d>=h[n+1]?(k[r]=!0,e.push(g[r])):k[r]=!1}}};Pa.prototype._forEachCell=
function(b,a,c,d,f,e,k){for(var g=this._convertToCellCoord(b),h=this._convertToCellCoord(a),l=this._convertToCellCoord(c),r=this._convertToCellCoord(d);g<=l;g++)for(var n=h;n<=r;n++)if(f.call(this,b,a,c,d,this.d*n+g,e,k))return};Pa.prototype._convertToCellCoord=function(b){return Math.max(0,Math.min(this.d-1,Math.floor(b*this.scale)+this.padding))};Pa.prototype.toArrayBuffer=function(){if(this.arrayBuffer)return this.arrayBuffer;for(var b=this.cells,a=Xd+this.cells.length+1+1,c=0,d=0;d<this.cells.length;d++)c+=
this.cells[d].length;c=new Int32Array(a+c+this.keys.length+this.bboxes.length);c[0]=this.extent;c[1]=this.n;c[2]=this.padding;for(d=0;d<b.length;d++){var f=b[d];c[Xd+d]=a;c.set(f,a);a+=f.length}return c[Xd+b.length]=a,c.set(this.keys,a),a+=this.keys.length,c[Xd+b.length+1]=a,c.set(this.bboxes,a),c.buffer};var Tg=self.ImageData,hf={},Qf;for(Qf in Ca("Object",Object),Pa.serialize=function(b,a){b=b.toArrayBuffer();return a&&a.push(b),b},Pa.deserialize=function(b){return new Pa(b)},Ca("Grid",Pa),Ca("Color",
cb),Ca("Error",Error),Ca("StylePropertyFunction",ff),Ca("StyleExpression",Ee,{omit:["_evaluator"]}),Ca("ZoomDependentExpression",gf),Ca("ZoomConstantExpression",Pf),Ca("CompoundExpression",Vb,{omit:["_evaluate"]}),Md)Md[Qf]._classRegistryKey||Ca("Expression_"+Qf,Md[Qf]);var Rf=function(){this.first=!0};Rf.prototype.update=function(b,a){var c=Math.floor(b);return this.first?(this.first=!1,this.lastIntegerZoom=c,this.lastIntegerZoomTime=0,this.lastZoom=b,this.lastFloorZoom=c,!0):(this.lastFloorZoom>
c?(this.lastIntegerZoom=c+1,this.lastIntegerZoomTime=a):this.lastFloorZoom<c&&(this.lastIntegerZoom=c,this.lastIntegerZoomTime=a),b!==this.lastZoom&&(this.lastZoom=b,this.lastFloorZoom=c,!0))};var Ga={"Latin-1 Supplement":function(b){return 128<=b&&255>=b},Arabic:function(b){return 1536<=b&&1791>=b},"Arabic Supplement":function(b){return 1872<=b&&1919>=b},"Arabic Extended-A":function(b){return 2208<=b&&2303>=b},"Hangul Jamo":function(b){return 4352<=b&&4607>=b},"Unified Canadian Aboriginal Syllabics":function(b){return 5120<=
b&&5759>=b},Khmer:function(b){return 6016<=b&&6143>=b},"Unified Canadian Aboriginal Syllabics Extended":function(b){return 6320<=b&&6399>=b},"General Punctuation":function(b){return 8192<=b&&8303>=b},"Letterlike Symbols":function(b){return 8448<=b&&8527>=b},"Number Forms":function(b){return 8528<=b&&8591>=b},"Miscellaneous Technical":function(b){return 8960<=b&&9215>=b},"Control Pictures":function(b){return 9216<=b&&9279>=b},"Optical Character Recognition":function(b){return 9280<=b&&9311>=b},"Enclosed Alphanumerics":function(b){return 9312<=
b&&9471>=b},"Geometric Shapes":function(b){return 9632<=b&&9727>=b},"Miscellaneous Symbols":function(b){return 9728<=b&&9983>=b},"Miscellaneous Symbols and Arrows":function(b){return 11008<=b&&11263>=b},"CJK Radicals Supplement":function(b){return 11904<=b&&12031>=b},"Kangxi Radicals":function(b){return 12032<=b&&12255>=b},"Ideographic Description Characters":function(b){return 12272<=b&&12287>=b},"CJK Symbols and Punctuation":function(b){return 12288<=b&&12351>=b},Hiragana:function(b){return 12352<=
b&&12447>=b},Katakana:function(b){return 12448<=b&&12543>=b},Bopomofo:function(b){return 12544<=b&&12591>=b},"Hangul Compatibility Jamo":function(b){return 12592<=b&&12687>=b},Kanbun:function(b){return 12688<=b&&12703>=b},"Bopomofo Extended":function(b){return 12704<=b&&12735>=b},"CJK Strokes":function(b){return 12736<=b&&12783>=b},"Katakana Phonetic Extensions":function(b){return 12784<=b&&12799>=b},"Enclosed CJK Letters and Months":function(b){return 12800<=b&&13055>=b},"CJK Compatibility":function(b){return 13056<=
b&&13311>=b},"CJK Unified Ideographs Extension A":function(b){return 13312<=b&&19903>=b},"Yijing Hexagram Symbols":function(b){return 19904<=b&&19967>=b},"CJK Unified Ideographs":function(b){return 19968<=b&&40959>=b},"Yi Syllables":function(b){return 40960<=b&&42127>=b},"Yi Radicals":function(b){return 42128<=b&&42191>=b},"Hangul Jamo Extended-A":function(b){return 43360<=b&&43391>=b},"Hangul Syllables":function(b){return 44032<=b&&55215>=b},"Hangul Jamo Extended-B":function(b){return 55216<=b&&
55295>=b},"Private Use Area":function(b){return 57344<=b&&63743>=b},"CJK Compatibility Ideographs":function(b){return 63744<=b&&64255>=b},"Arabic Presentation Forms-A":function(b){return 64336<=b&&65023>=b},"Vertical Forms":function(b){return 65040<=b&&65055>=b},"CJK Compatibility Forms":function(b){return 65072<=b&&65103>=b},"Small Form Variants":function(b){return 65104<=b&&65135>=b},"Arabic Presentation Forms-B":function(b){return 65136<=b&&65279>=b},"Halfwidth and Fullwidth Forms":function(b){return 65280<=
b&&65519>=b}},Ag,jf=!1,Fe=null,kf=!1,Sf=new ac,Ge={applyArabicShaping:null,processBidirectionalText:null,isLoaded:function(){return kf||null!=Ge.applyArabicShaping}},Nb=function(b,a){this.zoom=b;a?(this.now=a.now,this.fadeDuration=a.fadeDuration,this.zoomHistory=a.zoomHistory,this.transition=a.transition):(this.now=0,this.fadeDuration=0,this.zoomHistory=new Rf,this.transition={})};Nb.prototype.isSupportedScript=function(b){a:{for(var a=Ge.isLoaded(),c=0;c<b.length;c+=1){var d=b[c].charCodeAt(0);if(!a&&
(1424<=d&&2303>=d||Ga["Arabic Presentation Forms-A"](d)||Ga["Arabic Presentation Forms-B"](d))||2304<=d&&3583>=d||3840<=d&&4255>=d||Ga.Khmer(d)){b=!1;break a}}b=!0}return b};Nb.prototype.crossFadingFactor=function(){return 0===this.fadeDuration?1:Math.min((this.now-this.zoomHistory.lastIntegerZoomTime)/this.fadeDuration,1)};var le=function(b,a){this.property=b;this.value=a;this.expression=ya(void 0===a?b.specification.default:a,b.specification)};le.prototype.isDataDriven=function(){return"source"===
this.expression.kind||"composite"===this.expression.kind};le.prototype.possiblyEvaluate=function(b){return this.property.possiblyEvaluate(this,b)};var He=function(b){this.property=b;this.value=new le(b,void 0)};He.prototype.transitioned=function(b,a){return new lf(this.property,this.value,a,k({},b.transition,this.transition),b.now)};He.prototype.untransitioned=function(){return new lf(this.property,this.value,null,{},0)};var id=function(b){this._properties=b;this._values=Object.create(b.defaultTransitionablePropertyValues)};
id.prototype.getValue=function(b){return m(this._values[b].value.value)};id.prototype.setValue=function(b,a){this._values.hasOwnProperty(b)||(this._values[b]=new He(this._values[b].property));this._values[b].value=new le(this._values[b].property,null===a?void 0:m(a))};id.prototype.getTransition=function(b){return m(this._values[b].transition)};id.prototype.setTransition=function(b,a){this._values.hasOwnProperty(b)||(this._values[b]=new He(this._values[b].property));this._values[b].transition=m(a)||
void 0};id.prototype.serialize=function(){for(var b={},a=0,c=Object.keys(this._values);a<c.length;a+=1){var d=c[a],f=this.getValue(d);void 0!==f&&(b[d]=f);f=this.getTransition(d);void 0!==f&&(b[d+"-transition"]=f)}return b};id.prototype.transitioned=function(b,a){for(var c=new me(this._properties),d=0,f=Object.keys(this._values);d<f.length;d+=1){var e=f[d];c._values[e]=this._values[e].transitioned(b,a._values[e])}return c};id.prototype.untransitioned=function(){for(var b=new me(this._properties),
a=0,c=Object.keys(this._values);a<c.length;a+=1){var d=c[a];b._values[d]=this._values[d].untransitioned()}return b};var lf=function(b,a,c,d,f){this.property=b;this.value=a;this.begin=f+d.delay||0;this.end=this.begin+d.duration||0;b.specification.transition&&(d.delay||d.duration)&&(this.prior=c)};lf.prototype.possiblyEvaluate=function(b){var a=b.now||0,c=this.value.possiblyEvaluate(b),d=this.prior;if(d){if(a>this.end||this.value.isDataDriven())return this.prior=null,c;if(a<this.begin)return d.possiblyEvaluate(b);
a=(a-this.begin)/(this.end-this.begin);return this.property.interpolate(d.possiblyEvaluate(b),c,function(b){if(0>=b)return 0;if(1<=b)return 1;var a=b*b,c=a*b;return 4*(.5>b?c:3*(b-a)+c-.75)}(a))}return c};var me=function(b){this._properties=b;this._values=Object.create(b.defaultTransitioningPropertyValues)};me.prototype.possiblyEvaluate=function(b){for(var a=new nf(this._properties),c=0,d=Object.keys(this._values);c<d.length;c+=1){var f=d[c];a._values[f]=this._values[f].possiblyEvaluate(b)}return a};
me.prototype.hasTransition=function(){for(var b=0,a=Object.keys(this._values);b<a.length;b+=1)if(this._values[a[b]].prior)return!0;return!1};var mf=function(b){this._properties=b;this._values=Object.create(b.defaultPropertyValues)};mf.prototype.getValue=function(b){return m(this._values[b].value)};mf.prototype.setValue=function(b,a){this._values[b]=new le(this._values[b].property,null===a?void 0:m(a))};mf.prototype.serialize=function(){for(var b={},a=0,c=Object.keys(this._values);a<c.length;a+=1){var d=
c[a],f=this.getValue(d);void 0!==f&&(b[d]=f)}return b};mf.prototype.possiblyEvaluate=function(b){for(var a=new nf(this._properties),c=0,d=Object.keys(this._values);c<d.length;c+=1){var f=d[c];a._values[f]=this._values[f].possiblyEvaluate(b)}return a};var Yd=function(b,a,c){this.property=b;this.value=a;this.globals=c};Yd.prototype.isConstant=function(){return"constant"===this.value.kind};Yd.prototype.constantOr=function(b){return"constant"===this.value.kind?this.value.value:b};Yd.prototype.evaluate=
function(b){return this.property.evaluate(this.value,this.globals,b)};var nf=function(b){this._properties=b;this._values=Object.create(b.defaultPossiblyEvaluatedValues)};nf.prototype.get=function(b){return this._values[b]};var Ma=function(b){this.specification=b};Ma.prototype.possiblyEvaluate=function(b,a){return b.expression.evaluate(a)};Ma.prototype.interpolate=function(b,a,c){var d=jc[this.specification.type];return d?d(b,a,c):b};var Xa=function(b){this.specification=b};Xa.prototype.possiblyEvaluate=
function(b,a){return"constant"===b.expression.kind||"camera"===b.expression.kind?new Yd(this,{kind:"constant",value:b.expression.evaluate(a)},a):new Yd(this,b.expression,a)};Xa.prototype.interpolate=function(b,a,c){if("constant"!==b.value.kind||"constant"!==a.value.kind)return b;if(void 0===b.value.value||void 0===a.value.value)return new Yd(this,{kind:"constant",value:void 0},b.globals);var d=jc[this.specification.type];return d?new Yd(this,{kind:"constant",value:d(b.value.value,a.value.value,c)},
b.globals):b};Xa.prototype.evaluate=function(b,a,c){return"constant"===b.kind?b.value:b.evaluate(a,c)};var jd=function(b){this.specification=b};jd.prototype.possiblyEvaluate=function(b,a){if(void 0!==b.value)return"constant"===b.expression.kind?(b=b.expression.evaluate(a),this._calculate(b,b,b,a)):this._calculate(b.expression.evaluate(new Nb(Math.floor(a.zoom-1),a)),b.expression.evaluate(new Nb(Math.floor(a.zoom),a)),b.expression.evaluate(new Nb(Math.floor(a.zoom+1),a)),a)};jd.prototype._calculate=
function(b,a,c,d){var f=d.zoom,e=f-Math.floor(f),k=d.crossFadingFactor();return f>d.zoomHistory.lastIntegerZoom?{from:b,to:a,fromScale:2,toScale:1,t:e+(1-e)*k}:{from:c,to:a,fromScale:.5,toScale:1,t:1-(1-k)*e}};jd.prototype.interpolate=function(b){return b};var kd=function(b){this.specification=b};kd.prototype.possiblyEvaluate=function(b,a){return!!b.expression.evaluate(a)};kd.prototype.interpolate=function(){return!1};var sc=function(b){for(var a in this.properties=b,this.defaultPropertyValues={},
this.defaultTransitionablePropertyValues={},this.defaultTransitioningPropertyValues={},this.defaultPossiblyEvaluatedValues={},b){var c=b[a],d=this.defaultPropertyValues[a]=new le(c,void 0);c=this.defaultTransitionablePropertyValues[a]=new He(c);this.defaultTransitioningPropertyValues[a]=c.untransitioned();this.defaultPossiblyEvaluatedValues[a]=d.possiblyEvaluate({})}};Ca("DataDrivenProperty",Xa);Ca("DataConstantProperty",Ma);Ca("CrossFadedProperty",jd);Ca("ColorRampProperty",kd);var ld=function(b){function a(a,
c){for(var d in b.call(this),this.id=a.id,this.metadata=a.metadata,this.type=a.type,this.minzoom=a.minzoom,this.maxzoom=a.maxzoom,this.visibility="visible","background"!==a.type&&(this.source=a.source,this.sourceLayer=a["source-layer"],this.filter=a.filter),this._featureFilter=function(){return!0},c.layout&&(this._unevaluatedLayout=new mf(c.layout)),this._transitionablePaint=new id(c.paint),a.paint)this.setPaintProperty(d,a.paint[d],{validate:!1});for(var f in a.layout)this.setLayoutProperty(f,a.layout[f],
{validate:!1});this._transitioningPaint=this._transitionablePaint.untransitioned()}return b&&(a.__proto__=b),a.prototype=Object.create(b&&b.prototype),a.prototype.constructor=a,a.prototype.getLayoutProperty=function(b){return"visibility"===b?this.visibility:this._unevaluatedLayout.getValue(b)},a.prototype.setLayoutProperty=function(b,a,c){null!=a&&this._validate(zg,"layers."+this.id+".layout."+b,b,a,c)||("visibility"!==b?this._unevaluatedLayout.setValue(b,a):this.visibility="none"===a?a:"visible")},
a.prototype.getPaintProperty=function(b){return n(b,"-transition")?this._transitionablePaint.getTransition(b.slice(0,-11)):this._transitionablePaint.getValue(b)},a.prototype.setPaintProperty=function(b,a,c){null!=a&&this._validate(yg,"layers."+this.id+".paint."+b,b,a,c)||(n(b,"-transition")?this._transitionablePaint.setTransition(b.slice(0,-11),a||void 0):this._transitionablePaint.setValue(b,a))},a.prototype.isHidden=function(b){return!!(this.minzoom&&b<this.minzoom)||!!(this.maxzoom&&b>=this.maxzoom)||
"none"===this.visibility},a.prototype.updateTransitions=function(b){this._transitioningPaint=this._transitionablePaint.transitioned(b,this._transitioningPaint)},a.prototype.hasTransition=function(){return this._transitioningPaint.hasTransition()},a.prototype.recalculate=function(b){this._unevaluatedLayout&&(this.layout=this._unevaluatedLayout.possiblyEvaluate(b));this.paint=this._transitioningPaint.possiblyEvaluate(b)},a.prototype.serialize=function(){var b={id:this.id,type:this.type,source:this.source,
"source-layer":this.sourceLayer,metadata:this.metadata,minzoom:this.minzoom,maxzoom:this.maxzoom,filter:this.filter,layout:this._unevaluatedLayout&&this._unevaluatedLayout.serialize(),paint:this._transitionablePaint&&this._transitionablePaint.serialize()};return"none"===this.visibility&&(b.layout=b.layout||{},b.layout.visibility="none"),A(b,function(b,a){return!(void 0===b||"layout"===a&&!Object.keys(b).length||"paint"===a&&!Object.keys(b).length)})},a.prototype._validate=function(b,a,c,d,f){return(!f||
!1!==f.validate)&&La(this,b.call(nb,{key:a,layerType:this.type,objectKey:c,value:d,styleSpec:ra,style:{glyphs:!0,sprite:!0}}))},a.prototype.hasOffscreenPass=function(){return!1},a.prototype.resize=function(){},a}(ac),Tf={Int8:Int8Array,Uint8:Uint8Array,Int16:Int16Array,Uint16:Uint16Array,Int32:Int32Array,Uint32:Uint32Array,Float32:Float32Array},Ie=function(b,a){this._structArray=b;this._pos1=a*this.size;this._pos2=this._pos1/2;this._pos4=this._pos1/4;this._pos8=this._pos1/8},yb=function(){this.isTransferred=
!1;this.capacity=-1;this.resize(0)};yb.serialize=function(b,a){return b._trim(),a&&(b.isTransferred=!0,a.push(b.arrayBuffer)),{length:b.length,arrayBuffer:b.arrayBuffer}};yb.deserialize=function(b){var a=Object.create(this.prototype);return a.arrayBuffer=b.arrayBuffer,a.length=b.length,a.capacity=b.arrayBuffer.byteLength/a.bytesPerElement,a._refreshViews(),a};yb.prototype._trim=function(){this.length!==this.capacity&&(this.capacity=this.length,this.arrayBuffer=this.arrayBuffer.slice(0,this.length*
this.bytesPerElement),this._refreshViews())};yb.prototype.clear=function(){this.length=0};yb.prototype.resize=function(b){this.reserve(b);this.length=b};yb.prototype.reserve=function(b){b>this.capacity&&(this.capacity=Math.max(b,Math.floor(5*this.capacity),128),this.arrayBuffer=new ArrayBuffer(this.capacity*this.bytesPerElement),b=this.uint8,this._refreshViews(),b&&this.uint8.set(b))};yb.prototype._refreshViews=function(){throw Error("_refreshViews() must be implemented by each concrete StructArray layout");
};var Je=function(b){function a(){b.apply(this,arguments)}return b&&(a.__proto__=b),a.prototype=Object.create(b&&b.prototype),a.prototype.constructor=a,a.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer);this.int16=new Int16Array(this.arrayBuffer)},a.prototype.emplaceBack=function(b,a){var c=this.length;this.resize(c+1);var d=2*c;return this.int16[d+0]=b,this.int16[d+1]=a,c},a}(yb);Je.prototype.bytesPerElement=4;Ca("StructArrayLayout2i4",Je);var pf=function(b){function a(){b.apply(this,
arguments)}return b&&(a.__proto__=b),a.prototype=Object.create(b&&b.prototype),a.prototype.constructor=a,a.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer);this.int16=new Int16Array(this.arrayBuffer)},a.prototype.emplaceBack=function(b,a,c,d){var f=this.length;this.resize(f+1);var e=4*f;return this.int16[e+0]=b,this.int16[e+1]=a,this.int16[e+2]=c,this.int16[e+3]=d,f},a}(yb);pf.prototype.bytesPerElement=8;Ca("StructArrayLayout4i8",pf);var Uf=function(b){function a(){b.apply(this,
arguments)}return b&&(a.__proto__=b),a.prototype=Object.create(b&&b.prototype),a.prototype.constructor=a,a.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer);this.int16=new Int16Array(this.arrayBuffer)},a.prototype.emplaceBack=function(b,a,c,d,f,e){var k=this.length;this.resize(k+1);var g=6*k;return this.int16[g+0]=b,this.int16[g+1]=a,this.int16[g+2]=c,this.int16[g+3]=d,this.int16[g+4]=f,this.int16[g+5]=e,k},a}(yb);Uf.prototype.bytesPerElement=12;Ca("StructArrayLayout2i4i12",
Uf);var md=function(b){function a(){b.apply(this,arguments)}return b&&(a.__proto__=b),a.prototype=Object.create(b&&b.prototype),a.prototype.constructor=a,a.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer);this.int16=new Int16Array(this.arrayBuffer)},a.prototype.emplaceBack=function(b,a,c,d,f,e,k,g){var h=this.length;this.resize(h+1);var l=6*h,r=12*h;return this.int16[l+0]=b,this.int16[l+1]=a,this.int16[l+2]=c,this.int16[l+3]=d,this.uint8[r+8]=f,this.uint8[r+9]=e,this.uint8[r+
10]=k,this.uint8[r+11]=g,h},a}(yb);md.prototype.bytesPerElement=12;Ca("StructArrayLayout4i4ub12",md);var of=function(b){function a(){b.apply(this,arguments)}return b&&(a.__proto__=b),a.prototype=Object.create(b&&b.prototype),a.prototype.constructor=a,a.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer);this.int16=new Int16Array(this.arrayBuffer);this.uint16=new Uint16Array(this.arrayBuffer)},a.prototype.emplaceBack=function(b,a,c,d,f,e,k,g){var h=this.length;this.resize(h+
1);var l=8*h;return this.int16[l+0]=b,this.int16[l+1]=a,this.int16[l+2]=c,this.int16[l+3]=d,this.uint16[l+4]=f,this.uint16[l+5]=e,this.uint16[l+6]=k,this.uint16[l+7]=g,h},a}(yb);of.prototype.bytesPerElement=16;Ca("StructArrayLayout4i4ui16",of);var Ke=function(b){function a(){b.apply(this,arguments)}return b&&(a.__proto__=b),a.prototype=Object.create(b&&b.prototype),a.prototype.constructor=a,a.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer);this.float32=new Float32Array(this.arrayBuffer)},
a.prototype.emplaceBack=function(b,a,c){var d=this.length;this.resize(d+1);var f=3*d;return this.float32[f+0]=b,this.float32[f+1]=a,this.float32[f+2]=c,d},a}(yb);Ke.prototype.bytesPerElement=12;Ca("StructArrayLayout3f12",Ke);var Bg=function(b){function a(){b.apply(this,arguments)}return b&&(a.__proto__=b),a.prototype=Object.create(b&&b.prototype),a.prototype.constructor=a,a.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer);this.uint32=new Uint32Array(this.arrayBuffer)},
a.prototype.emplaceBack=function(b){var a=this.length;this.resize(a+1);return this.uint32[1*a]=b,a},a}(yb);Bg.prototype.bytesPerElement=4;Ca("StructArrayLayout1ul4",Bg);var Vf=function(b){function a(){b.apply(this,arguments)}return b&&(a.__proto__=b),a.prototype=Object.create(b&&b.prototype),a.prototype.constructor=a,a.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer);this.int16=new Int16Array(this.arrayBuffer);this.uint32=new Uint32Array(this.arrayBuffer);this.uint16=
new Uint16Array(this.arrayBuffer)},a.prototype.emplaceBack=function(b,a,c,d,f,e,k,g,h,l,r){var n=this.length;this.resize(n+1);var q=12*n;return this.int16[q+0]=b,this.int16[q+1]=a,this.int16[q+2]=c,this.int16[q+3]=d,this.int16[q+4]=f,this.int16[q+5]=e,this.uint32[6*n+3]=k,this.uint16[q+8]=g,this.uint16[q+9]=h,this.int16[q+10]=l,this.int16[q+11]=r,n},a}(yb);Vf.prototype.bytesPerElement=24;Ca("StructArrayLayout6i1ul2ui2i24",Vf);var qf=function(b){function a(){b.apply(this,arguments)}return b&&(a.__proto__=
b),a.prototype=Object.create(b&&b.prototype),a.prototype.constructor=a,a.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer);this.int16=new Int16Array(this.arrayBuffer)},a.prototype.emplaceBack=function(b,a,c,d,f,e){var k=this.length;this.resize(k+1);var g=6*k;return this.int16[g+0]=b,this.int16[g+1]=a,this.int16[g+2]=c,this.int16[g+3]=d,this.int16[g+4]=f,this.int16[g+5]=e,k},a}(yb);qf.prototype.bytesPerElement=12;Ca("StructArrayLayout2i2i2i12",qf);var Le=function(b){function a(){b.apply(this,
arguments)}return b&&(a.__proto__=b),a.prototype=Object.create(b&&b.prototype),a.prototype.constructor=a,a.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer)},a.prototype.emplaceBack=function(b,a){var c=this.length;this.resize(c+1);var d=4*c;return this.uint8[d+0]=b,this.uint8[d+1]=a,c},a}(yb);Le.prototype.bytesPerElement=4;Ca("StructArrayLayout2ub4",Le);var Wf=function(b){function a(){b.apply(this,arguments)}return b&&(a.__proto__=b),a.prototype=Object.create(b&&b.prototype),
a.prototype.constructor=a,a.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer);this.int16=new Int16Array(this.arrayBuffer);this.uint16=new Uint16Array(this.arrayBuffer);this.uint32=new Uint32Array(this.arrayBuffer);this.float32=new Float32Array(this.arrayBuffer)},a.prototype.emplaceBack=function(b,a,c,d,f,e,k,g,h,l,r,n,q,u){var p=this.length;this.resize(p+1);var v=20*p,z=10*p,w=40*p;return this.int16[v+0]=b,this.int16[v+1]=a,this.uint16[v+2]=c,this.uint16[v+3]=d,this.uint32[z+
2]=f,this.uint32[z+3]=e,this.uint32[z+4]=k,this.uint16[v+10]=g,this.uint16[v+11]=h,this.uint16[v+12]=l,this.float32[z+7]=r,this.float32[z+8]=n,this.uint8[w+36]=q,this.uint8[w+37]=u,p},a}(yb);Wf.prototype.bytesPerElement=40;Ca("StructArrayLayout2i2ui3ul3ui2f2ub40",Wf);var rf=function(b){function a(){b.apply(this,arguments)}return b&&(a.__proto__=b),a.prototype=Object.create(b&&b.prototype),a.prototype.constructor=a,a.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer);this.float32=
new Float32Array(this.arrayBuffer)},a.prototype.emplaceBack=function(b){var a=this.length;this.resize(a+1);return this.float32[1*a]=b,a},a}(yb);rf.prototype.bytesPerElement=4;Ca("StructArrayLayout1f4",rf);var Xf=function(b){function a(){b.apply(this,arguments)}return b&&(a.__proto__=b),a.prototype=Object.create(b&&b.prototype),a.prototype.constructor=a,a.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer);this.int16=new Int16Array(this.arrayBuffer)},a.prototype.emplaceBack=
function(b,a,c){var d=this.length;this.resize(d+1);var f=3*d;return this.int16[f+0]=b,this.int16[f+1]=a,this.int16[f+2]=c,d},a}(yb);Xf.prototype.bytesPerElement=6;Ca("StructArrayLayout3i6",Xf);var Yf=function(b){function a(){b.apply(this,arguments)}return b&&(a.__proto__=b),a.prototype=Object.create(b&&b.prototype),a.prototype.constructor=a,a.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer);this.uint32=new Uint32Array(this.arrayBuffer);this.uint16=new Uint16Array(this.arrayBuffer)},
a.prototype.emplaceBack=function(b,a,c){var d=this.length;this.resize(d+1);var f=4*d;return this.uint32[2*d]=b,this.uint16[f+2]=a,this.uint16[f+3]=c,d},a}(yb);Yf.prototype.bytesPerElement=8;Ca("StructArrayLayout1ul2ui8",Yf);var nd=function(b){function a(){b.apply(this,arguments)}return b&&(a.__proto__=b),a.prototype=Object.create(b&&b.prototype),a.prototype.constructor=a,a.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer);this.uint16=new Uint16Array(this.arrayBuffer)},
a.prototype.emplaceBack=function(b,a,c){var d=this.length;this.resize(d+1);var f=3*d;return this.uint16[f+0]=b,this.uint16[f+1]=a,this.uint16[f+2]=c,d},a}(yb);nd.prototype.bytesPerElement=6;Ca("StructArrayLayout3ui6",nd);var Zf=function(b){function a(){b.apply(this,arguments)}return b&&(a.__proto__=b),a.prototype=Object.create(b&&b.prototype),a.prototype.constructor=a,a.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer);this.uint16=new Uint16Array(this.arrayBuffer)},a.prototype.emplaceBack=
function(b,a){var c=this.length;this.resize(c+1);var d=2*c;return this.uint16[d+0]=b,this.uint16[d+1]=a,c},a}(yb);Zf.prototype.bytesPerElement=4;Ca("StructArrayLayout2ui4",Zf);var $f=function(b){function a(){b.apply(this,arguments)}return b&&(a.__proto__=b),a.prototype=Object.create(b&&b.prototype),a.prototype.constructor=a,a.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer);this.float32=new Float32Array(this.arrayBuffer)},a.prototype.emplaceBack=function(b,a){var c=this.length;
this.resize(c+1);var d=2*c;return this.float32[d+0]=b,this.float32[d+1]=a,c},a}(yb);$f.prototype.bytesPerElement=8;Ca("StructArrayLayout2f8",$f);var Cg=function(b){function a(){b.apply(this,arguments)}return b&&(a.__proto__=b),a.prototype=Object.create(b&&b.prototype),a.prototype.constructor=a,a.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer);this.float32=new Float32Array(this.arrayBuffer)},a.prototype.emplaceBack=function(b,a,c,d){var f=this.length;this.resize(f+1);
var e=4*f;return this.float32[e+0]=b,this.float32[e+1]=a,this.float32[e+2]=c,this.float32[e+3]=d,f},a}(yb);Cg.prototype.bytesPerElement=16;Ca("StructArrayLayout4f16",Cg);var Dg=function(b){function a(){b.apply(this,arguments)}b&&(a.__proto__=b);a.prototype=Object.create(b&&b.prototype);a.prototype.constructor=a;var c={anchorPointX:{configurable:!0},anchorPointY:{configurable:!0},x1:{configurable:!0},y1:{configurable:!0},x2:{configurable:!0},y2:{configurable:!0},featureIndex:{configurable:!0},sourceLayerIndex:{configurable:!0},
bucketIndex:{configurable:!0},radius:{configurable:!0},signedDistanceFromAnchor:{configurable:!0},anchorPoint:{configurable:!0}};return c.anchorPointX.get=function(){return this._structArray.int16[this._pos2+0]},c.anchorPointX.set=function(b){this._structArray.int16[this._pos2+0]=b},c.anchorPointY.get=function(){return this._structArray.int16[this._pos2+1]},c.anchorPointY.set=function(b){this._structArray.int16[this._pos2+1]=b},c.x1.get=function(){return this._structArray.int16[this._pos2+2]},c.x1.set=
function(b){this._structArray.int16[this._pos2+2]=b},c.y1.get=function(){return this._structArray.int16[this._pos2+3]},c.y1.set=function(b){this._structArray.int16[this._pos2+3]=b},c.x2.get=function(){return this._structArray.int16[this._pos2+4]},c.x2.set=function(b){this._structArray.int16[this._pos2+4]=b},c.y2.get=function(){return this._structArray.int16[this._pos2+5]},c.y2.set=function(b){this._structArray.int16[this._pos2+5]=b},c.featureIndex.get=function(){return this._structArray.uint32[this._pos4+
3]},c.featureIndex.set=function(b){this._structArray.uint32[this._pos4+3]=b},c.sourceLayerIndex.get=function(){return this._structArray.uint16[this._pos2+8]},c.sourceLayerIndex.set=function(b){this._structArray.uint16[this._pos2+8]=b},c.bucketIndex.get=function(){return this._structArray.uint16[this._pos2+9]},c.bucketIndex.set=function(b){this._structArray.uint16[this._pos2+9]=b},c.radius.get=function(){return this._structArray.int16[this._pos2+10]},c.radius.set=function(b){this._structArray.int16[this._pos2+
10]=b},c.signedDistanceFromAnchor.get=function(){return this._structArray.int16[this._pos2+11]},c.signedDistanceFromAnchor.set=function(b){this._structArray.int16[this._pos2+11]=b},c.anchorPoint.get=function(){return new $b(this.anchorPointX,this.anchorPointY)},Object.defineProperties(a.prototype,c),a}(Ie);Dg.prototype.size=24;var Eg=function(b){function a(){b.apply(this,arguments)}return b&&(a.__proto__=b),a.prototype=Object.create(b&&b.prototype),a.prototype.constructor=a,a.prototype.get=function(b){return new Dg(this,
b)},a}(Vf);Ca("CollisionBoxArray",Eg);var Ug=function(b){function a(){b.apply(this,arguments)}b&&(a.__proto__=b);a.prototype=Object.create(b&&b.prototype);a.prototype.constructor=a;var c={anchorX:{configurable:!0},anchorY:{configurable:!0},glyphStartIndex:{configurable:!0},numGlyphs:{configurable:!0},vertexStartIndex:{configurable:!0},lineStartIndex:{configurable:!0},lineLength:{configurable:!0},segment:{configurable:!0},lowerSize:{configurable:!0},upperSize:{configurable:!0},lineOffsetX:{configurable:!0},
lineOffsetY:{configurable:!0},writingMode:{configurable:!0},hidden:{configurable:!0}};return c.anchorX.get=function(){return this._structArray.int16[this._pos2+0]},c.anchorX.set=function(b){this._structArray.int16[this._pos2+0]=b},c.anchorY.get=function(){return this._structArray.int16[this._pos2+1]},c.anchorY.set=function(b){this._structArray.int16[this._pos2+1]=b},c.glyphStartIndex.get=function(){return this._structArray.uint16[this._pos2+2]},c.glyphStartIndex.set=function(b){this._structArray.uint16[this._pos2+
2]=b},c.numGlyphs.get=function(){return this._structArray.uint16[this._pos2+3]},c.numGlyphs.set=function(b){this._structArray.uint16[this._pos2+3]=b},c.vertexStartIndex.get=function(){return this._structArray.uint32[this._pos4+2]},c.vertexStartIndex.set=function(b){this._structArray.uint32[this._pos4+2]=b},c.lineStartIndex.get=function(){return this._structArray.uint32[this._pos4+3]},c.lineStartIndex.set=function(b){this._structArray.uint32[this._pos4+3]=b},c.lineLength.get=function(){return this._structArray.uint32[this._pos4+
4]},c.lineLength.set=function(b){this._structArray.uint32[this._pos4+4]=b},c.segment.get=function(){return this._structArray.uint16[this._pos2+10]},c.segment.set=function(b){this._structArray.uint16[this._pos2+10]=b},c.lowerSize.get=function(){return this._structArray.uint16[this._pos2+11]},c.lowerSize.set=function(b){this._structArray.uint16[this._pos2+11]=b},c.upperSize.get=function(){return this._structArray.uint16[this._pos2+12]},c.upperSize.set=function(b){this._structArray.uint16[this._pos2+
12]=b},c.lineOffsetX.get=function(){return this._structArray.float32[this._pos4+7]},c.lineOffsetX.set=function(b){this._structArray.float32[this._pos4+7]=b},c.lineOffsetY.get=function(){return this._structArray.float32[this._pos4+8]},c.lineOffsetY.set=function(b){this._structArray.float32[this._pos4+8]=b},c.writingMode.get=function(){return this._structArray.uint8[this._pos1+36]},c.writingMode.set=function(b){this._structArray.uint8[this._pos1+36]=b},c.hidden.get=function(){return this._structArray.uint8[this._pos1+
37]},c.hidden.set=function(b){this._structArray.uint8[this._pos1+37]=b},Object.defineProperties(a.prototype,c),a}(Ie);Ug.prototype.size=40;var sf=function(b){function a(){b.apply(this,arguments)}return b&&(a.__proto__=b),a.prototype=Object.create(b&&b.prototype),a.prototype.constructor=a,a.prototype.get=function(b){return new Ug(this,b)},a}(Wf);Ca("PlacedSymbolArray",sf);var tf=function(b){function a(){b.apply(this,arguments)}b&&(a.__proto__=b);a.prototype=Object.create(b&&b.prototype);a.prototype.constructor=
a;var c={offsetX:{configurable:!0}};return c.offsetX.get=function(){return this._structArray.float32[this._pos4+0]},c.offsetX.set=function(b){this._structArray.float32[this._pos4+0]=b},Object.defineProperties(a.prototype,c),a}(Ie);tf.prototype.size=4;var Fg=function(b){function a(){b.apply(this,arguments)}return b&&(a.__proto__=b),a.prototype=Object.create(b&&b.prototype),a.prototype.constructor=a,a.prototype.getoffsetX=function(b){return this.float32[1*b]},a.prototype.get=function(b){return new tf(this,
b)},a}(rf);Ca("GlyphOffsetArray",Fg);var Lc=function(b){function a(){b.apply(this,arguments)}b&&(a.__proto__=b);a.prototype=Object.create(b&&b.prototype);a.prototype.constructor=a;var c={x:{configurable:!0},y:{configurable:!0},tileUnitDistanceFromAnchor:{configurable:!0}};return c.x.get=function(){return this._structArray.int16[this._pos2+0]},c.x.set=function(b){this._structArray.int16[this._pos2+0]=b},c.y.get=function(){return this._structArray.int16[this._pos2+1]},c.y.set=function(b){this._structArray.int16[this._pos2+
1]=b},c.tileUnitDistanceFromAnchor.get=function(){return this._structArray.int16[this._pos2+2]},c.tileUnitDistanceFromAnchor.set=function(b){this._structArray.int16[this._pos2+2]=b},Object.defineProperties(a.prototype,c),a}(Ie);Lc.prototype.size=6;var Gg=function(b){function a(){b.apply(this,arguments)}return b&&(a.__proto__=b),a.prototype=Object.create(b&&b.prototype),a.prototype.constructor=a,a.prototype.getx=function(b){return this.int16[3*b]},a.prototype.gety=function(b){return this.int16[3*b+
1]},a.prototype.gettileUnitDistanceFromAnchor=function(b){return this.int16[3*b+2]},a.prototype.get=function(b){return new Lc(this,b)},a}(Xf);Ca("SymbolLineVertexArray",Gg);var ag=function(b){function a(){b.apply(this,arguments)}b&&(a.__proto__=b);a.prototype=Object.create(b&&b.prototype);a.prototype.constructor=a;var c={featureIndex:{configurable:!0},sourceLayerIndex:{configurable:!0},bucketIndex:{configurable:!0}};return c.featureIndex.get=function(){return this._structArray.uint32[this._pos4+0]},
c.featureIndex.set=function(b){this._structArray.uint32[this._pos4+0]=b},c.sourceLayerIndex.get=function(){return this._structArray.uint16[this._pos2+2]},c.sourceLayerIndex.set=function(b){this._structArray.uint16[this._pos2+2]=b},c.bucketIndex.get=function(){return this._structArray.uint16[this._pos2+3]},c.bucketIndex.set=function(b){this._structArray.uint16[this._pos2+3]=b},Object.defineProperties(a.prototype,c),a}(Ie);ag.prototype.size=8;var bg=function(b){function a(){b.apply(this,arguments)}
return b&&(a.__proto__=b),a.prototype=Object.create(b&&b.prototype),a.prototype.constructor=a,a.prototype.get=function(b){return new ag(this,b)},a}(Yf);Ca("FeatureIndexArray",bg);var uf=mb([{name:"a_pos",components:2,type:"Int16"}],4).members,Ob=function(b){void 0===b&&(b=[]);this.segments=b};Ob.prototype.prepareSegment=function(b,a,c){var d=this.segments[this.segments.length-1];return b>Ob.MAX_VERTEX_ARRAY_LENGTH&&w("Max vertices per segment is "+Ob.MAX_VERTEX_ARRAY_LENGTH+": bucket requested "+
b),(!d||d.vertexLength+b>Ob.MAX_VERTEX_ARRAY_LENGTH)&&(d={vertexOffset:a.length,primitiveOffset:c.length,vertexLength:0,primitiveLength:0},this.segments.push(d)),d};Ob.prototype.get=function(){return this.segments};Ob.prototype.destroy=function(){for(var b=0,a=this.segments;b<a.length;b+=1){var c=a[b],d;for(d in c.vaos)c.vaos[d].destroy()}};Ob.MAX_VERTEX_ARRAY_LENGTH=Math.pow(2,16)-1;Ca("SegmentVector",Ob);var Hg=function(b,a){return 256*c(Math.floor(b),0,255)+c(Math.floor(a),0,255)},Wb=function(b,
a,c){this.value=b;this.name=a;this.type=c;this.statistics={max:-1/0}};Wb.prototype.defines=function(){return["#define HAS_UNIFORM_u_"+this.name]};Wb.prototype.populatePaintArray=function(){};Wb.prototype.upload=function(){};Wb.prototype.destroy=function(){};Wb.prototype.setUniforms=function(b,a,c,d){c=d.constantOr(this.value);b=b.gl;"color"===this.type?b.uniform4f(a.uniforms["u_"+this.name],c.r,c.g,c.b,c.a):b.uniform1f(a.uniforms["u_"+this.name],c)};var od=function(b,a,c){this.expression=b;this.name=
a;this.type=c;this.statistics={max:-1/0};b="color"===c?$f:rf;this.paintVertexAttributes=[{name:"a_"+a,type:"Float32",components:"color"===c?2:1,offset:0}];this.paintVertexArray=new b};od.prototype.defines=function(){return[]};od.prototype.populatePaintArray=function(b,a){var c=this.paintVertexArray,d=c.length;c.reserve(b);a=this.expression.evaluate(new Nb(0),a);if("color"===this.type)for(a=Oc(a);d<b;d++)c.emplaceBack(a[0],a[1]);else{for(;d<b;d++)c.emplaceBack(a);this.statistics.max=Math.max(this.statistics.max,
a)}};od.prototype.upload=function(b){this.paintVertexArray&&(this.paintVertexBuffer=b.createVertexBuffer(this.paintVertexArray,this.paintVertexAttributes))};od.prototype.destroy=function(){this.paintVertexBuffer&&this.paintVertexBuffer.destroy()};od.prototype.setUniforms=function(b,a){b.gl.uniform1f(a.uniforms["a_"+this.name+"_t"],0)};var Uc=function(b,a,c,d,f){this.expression=b;this.name=a;this.type=c;this.useIntegerZoom=d;this.zoom=f;this.statistics={max:-1/0};b="color"===c?Cg:$f;this.paintVertexAttributes=
[{name:"a_"+a,type:"Float32",components:"color"===c?4:2,offset:0}];this.paintVertexArray=new b};Uc.prototype.defines=function(){return[]};Uc.prototype.populatePaintArray=function(b,a){var c=this.paintVertexArray,d=c.length;c.reserve(b);var f=this.expression.evaluate(new Nb(this.zoom),a);a=this.expression.evaluate(new Nb(this.zoom+1),a);if("color"===this.type)for(f=Oc(f),a=Oc(a);d<b;d++)c.emplaceBack(f[0],f[1],a[0],a[1]);else{for(;d<b;d++)c.emplaceBack(f,a);this.statistics.max=Math.max(this.statistics.max,
f,a)}};Uc.prototype.upload=function(b){this.paintVertexArray&&(this.paintVertexBuffer=b.createVertexBuffer(this.paintVertexArray,this.paintVertexAttributes))};Uc.prototype.destroy=function(){this.paintVertexBuffer&&this.paintVertexBuffer.destroy()};Uc.prototype.interpolationFactor=function(b){return this.useIntegerZoom?this.expression.interpolationFactor(Math.floor(b),this.zoom,this.zoom+1):this.expression.interpolationFactor(b,this.zoom,this.zoom+1)};Uc.prototype.setUniforms=function(b,a,c){b.gl.uniform1f(a.uniforms["a_"+
this.name+"_t"],this.interpolationFactor(c.zoom))};var Mc=function(){this.binders={};this.cacheKey="";this._buffers=[]};Mc.createDynamic=function(b,a,c){var d=new Mc,f=[],e;for(e in b.paint._values)if(c(e)){var k=b.paint.get(e);if(k instanceof Yd&&k.property.specification["property-function"]){var g={"text-opacity":"opacity","icon-opacity":"opacity","text-color":"fill_color","icon-color":"fill_color","text-halo-color":"halo_color","icon-halo-color":"halo_color","text-halo-blur":"halo_blur","icon-halo-blur":"halo_blur",
"text-halo-width":"halo_width","icon-halo-width":"halo_width","line-gap-width":"gapwidth"}[e]||e.replace(b.type+"-","").replace(/-/g,"_"),h=k.property.specification.type,l=k.property.useIntegerZoom;"constant"===k.value.kind?(d.binders[e]=new Wb(k.value,g,h),f.push("/u_"+g)):"source"===k.value.kind?(d.binders[e]=new od(k.value,g,h),f.push("/a_"+g)):(d.binders[e]=new Uc(k.value,g,h,l,a),f.push("/z_"+g))}}return d.cacheKey=f.sort().join(""),d};Mc.prototype.populatePaintArrays=function(b,a){for(var c in this.binders)this.binders[c].populatePaintArray(b,
a)};Mc.prototype.defines=function(){var b=[],a;for(a in this.binders)b.push.apply(b,this.binders[a].defines());return b};Mc.prototype.setUniforms=function(b,a,c,d){for(var f in this.binders)this.binders[f].setUniforms(b,a,d,c.get(f))};Mc.prototype.getPaintVertexBuffers=function(){return this._buffers};Mc.prototype.upload=function(b){for(var a in this.binders)this.binders[a].upload(b);b=[];for(var c in this.binders)a=this.binders[c],(a instanceof od||a instanceof Uc)&&a.paintVertexBuffer&&b.push(a.paintVertexBuffer);
this._buffers=b};Mc.prototype.destroy=function(){for(var b in this.binders)this.binders[b].destroy()};var Nc=function(b,a,c,d){void 0===d&&(d=function(){return!0});this.programConfigurations={};for(var f=0;f<a.length;f+=1){var e=a[f];this.programConfigurations[e.id]=Mc.createDynamic(e,c,d);this.programConfigurations[e.id].layoutAttributes=b}};Nc.prototype.populatePaintArrays=function(b,a){for(var c in this.programConfigurations)this.programConfigurations[c].populatePaintArrays(b,a)};Nc.prototype.get=
function(b){return this.programConfigurations[b]};Nc.prototype.upload=function(b){for(var a in this.programConfigurations)this.programConfigurations[a].upload(b)};Nc.prototype.destroy=function(){for(var b in this.programConfigurations)this.programConfigurations[b].destroy()};Ca("ConstantBinder",Wb);Ca("SourceExpressionBinder",od);Ca("CompositeExpressionBinder",Uc);Ca("ProgramConfiguration",Mc,{omit:["_buffers"]});Ca("ProgramConfigurationSet",Nc);var cg={min:-1*Math.pow(2,15),max:Math.pow(2,15)-1},
Nd=function(b){this.zoom=b.zoom;this.overscaling=b.overscaling;this.layers=b.layers;this.layerIds=this.layers.map(function(b){return b.id});this.index=b.index;this.layoutVertexArray=new Je;this.indexArray=new nd;this.segments=new Ob;this.programConfigurations=new Nc(uf,b.layers,b.zoom)};Nd.prototype.populate=function(b,a){for(var c=0;c<b.length;c+=1){var d=b[c],f=d.feature,e=d.index;d=d.sourceLayerIndex;if(this.layers[0]._featureFilter(new Nb(this.zoom),f)){var k=vb(f);this.addFeature(f,k);a.featureIndex.insert(f,
k,e,d,this.index)}}};Nd.prototype.isEmpty=function(){return 0===this.layoutVertexArray.length};Nd.prototype.upload=function(b){this.layoutVertexBuffer=b.createVertexBuffer(this.layoutVertexArray,uf);this.indexBuffer=b.createIndexBuffer(this.indexArray);this.programConfigurations.upload(b)};Nd.prototype.destroy=function(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy())};Nd.prototype.addFeature=function(b,
a){for(var c=0;c<a.length;c+=1)for(var d=0,f=a[c];d<f.length;d+=1){var e=f[d],k=e.x;e=e.y;if(!(0>k||8192<=k||0>e||8192<=e)){var g=this.segments.prepareSegment(4,this.layoutVertexArray,this.indexArray),h=g.vertexLength;xc(this.layoutVertexArray,k,e,-1,-1);xc(this.layoutVertexArray,k,e,1,-1);xc(this.layoutVertexArray,k,e,1,1);xc(this.layoutVertexArray,k,e,-1,1);this.indexArray.emplaceBack(h,h+1,h+2);this.indexArray.emplaceBack(h,h+3,h+2);g.vertexLength+=4;g.primitiveLength+=2}}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,
b)};Ca("CircleBucket",Nd,{omit:["layers"]});var vh={paint:new sc({"circle-radius":new Xa(ra.paint_circle["circle-radius"]),"circle-color":new Xa(ra.paint_circle["circle-color"]),"circle-blur":new Xa(ra.paint_circle["circle-blur"]),"circle-opacity":new Xa(ra.paint_circle["circle-opacity"]),"circle-translate":new Ma(ra.paint_circle["circle-translate"]),"circle-translate-anchor":new Ma(ra.paint_circle["circle-translate-anchor"]),"circle-pitch-scale":new Ma(ra.paint_circle["circle-pitch-scale"]),"circle-pitch-alignment":new Ma(ra.paint_circle["circle-pitch-alignment"]),
"circle-stroke-width":new Xa(ra.paint_circle["circle-stroke-width"]),"circle-stroke-color":new Xa(ra.paint_circle["circle-stroke-color"]),"circle-stroke-opacity":new Xa(ra.paint_circle["circle-stroke-opacity"])})},Ne=g(function(b,a){var c;b.exports=((c=new Float32Array(3))[0]=0,c[1]=0,c[2]=0,function(){var b=new Float32Array(4);b[0]=0;b[1]=0;b[2]=0;b[3]=0}(),{vec3:{transformMat3:function(b,a,c){var d=a[0],f=a[1];a=a[2];return b[0]=d*c[0]+f*c[3]+a*c[6],b[1]=d*c[1]+f*c[4]+a*c[7],b[2]=d*c[2]+f*c[5]+
a*c[8],b}},vec4:{transformMat4:function(b,a,c){var d=a[0],f=a[1],e=a[2];a=a[3];return b[0]=c[0]*d+c[4]*f+c[8]*e+c[12]*a,b[1]=c[1]*d+c[5]*f+c[9]*e+c[13]*a,b[2]=c[2]*d+c[6]*f+c[10]*e+c[14]*a,b[3]=c[3]*d+c[7]*f+c[11]*e+c[15]*a,b}},mat2:{create:function(){var b=new Float32Array(4);return b[0]=1,b[1]=0,b[2]=0,b[3]=1,b},rotate:function(b,a,c){var d=a[0],f=a[1],e=a[2];a=a[3];var k=Math.sin(c);c=Math.cos(c);return b[0]=d*c+e*k,b[1]=f*c+a*k,b[2]=d*-k+e*c,b[3]=f*-k+a*c,b},scale:function(b,a,c){var d=a[1],f=
a[2],e=a[3],k=c[0];c=c[1];return b[0]=a[0]*k,b[1]=d*k,b[2]=f*c,b[3]=e*c,b}},mat3:{create:function(){var b=new Float32Array(9);return b[0]=1,b[1]=0,b[2]=0,b[3]=0,b[4]=1,b[5]=0,b[6]=0,b[7]=0,b[8]=1,b},fromRotation:function(b,a){var c=Math.sin(a);a=Math.cos(a);return b[0]=a,b[1]=c,b[2]=0,b[3]=-c,b[4]=a,b[5]=0,b[6]=0,b[7]=0,b[8]=1,b}},mat4:{create:function(){var b=new Float32Array(16);return b[0]=1,b[1]=0,b[2]=0,b[3]=0,b[4]=0,b[5]=1,b[6]=0,b[7]=0,b[8]=0,b[9]=0,b[10]=1,b[11]=0,b[12]=0,b[13]=0,b[14]=0,
b[15]=1,b},identity:function(b){return b[0]=1,b[1]=0,b[2]=0,b[3]=0,b[4]=0,b[5]=1,b[6]=0,b[7]=0,b[8]=0,b[9]=0,b[10]=1,b[11]=0,b[12]=0,b[13]=0,b[14]=0,b[15]=1,b},translate:function(b,a,c){var d,f,e,k,g,h,l,r,n,q,u,p,v=c[0],z=c[1];c=c[2];return a===b?(b[12]=a[0]*v+a[4]*z+a[8]*c+a[12],b[13]=a[1]*v+a[5]*z+a[9]*c+a[13],b[14]=a[2]*v+a[6]*z+a[10]*c+a[14],b[15]=a[3]*v+a[7]*z+a[11]*c+a[15]):(d=a[0],f=a[1],e=a[2],k=a[3],g=a[4],h=a[5],l=a[6],r=a[7],n=a[8],q=a[9],u=a[10],p=a[11],b[0]=d,b[1]=f,b[2]=e,b[3]=k,b[4]=
g,b[5]=h,b[6]=l,b[7]=r,b[8]=n,b[9]=q,b[10]=u,b[11]=p,b[12]=d*v+g*z+n*c+a[12],b[13]=f*v+h*z+q*c+a[13],b[14]=e*v+l*z+u*c+a[14],b[15]=k*v+r*z+p*c+a[15]),b},scale:function(b,a,c){var d=c[0],f=c[1];c=c[2];return b[0]=a[0]*d,b[1]=a[1]*d,b[2]=a[2]*d,b[3]=a[3]*d,b[4]=a[4]*f,b[5]=a[5]*f,b[6]=a[6]*f,b[7]=a[7]*f,b[8]=a[8]*c,b[9]=a[9]*c,b[10]=a[10]*c,b[11]=a[11]*c,b[12]=a[12],b[13]=a[13],b[14]=a[14],b[15]=a[15],b},multiply:function(b,a,c){var d=a[0],f=a[1],e=a[2],k=a[3],g=a[4],h=a[5],l=a[6],r=a[7],n=a[8],q=a[9],
u=a[10],p=a[11],v=a[12],z=a[13],w=a[14];a=a[15];var A=c[0],m=c[1],x=c[2],y=c[3];return b[0]=A*d+m*g+x*n+y*v,b[1]=A*f+m*h+x*q+y*z,b[2]=A*e+m*l+x*u+y*w,b[3]=A*k+m*r+x*p+y*a,A=c[4],m=c[5],x=c[6],y=c[7],b[4]=A*d+m*g+x*n+y*v,b[5]=A*f+m*h+x*q+y*z,b[6]=A*e+m*l+x*u+y*w,b[7]=A*k+m*r+x*p+y*a,A=c[8],m=c[9],x=c[10],y=c[11],b[8]=A*d+m*g+x*n+y*v,b[9]=A*f+m*h+x*q+y*z,b[10]=A*e+m*l+x*u+y*w,b[11]=A*k+m*r+x*p+y*a,A=c[12],m=c[13],x=c[14],y=c[15],b[12]=A*d+m*g+x*n+y*v,b[13]=A*f+m*h+x*q+y*z,b[14]=A*e+m*l+x*u+y*w,b[15]=
A*k+m*r+x*p+y*a,b},perspective:function(b,a,c,d,f){a=1/Math.tan(a/2);var e=1/(d-f);return b[0]=a/c,b[1]=0,b[2]=0,b[3]=0,b[4]=0,b[5]=a,b[6]=0,b[7]=0,b[8]=0,b[9]=0,b[10]=(f+d)*e,b[11]=-1,b[12]=0,b[13]=0,b[14]=2*f*d*e,b[15]=0,b},rotateX:function(b,a,c){var d=Math.sin(c);c=Math.cos(c);var f=a[4],e=a[5],k=a[6],g=a[7],h=a[8],l=a[9],r=a[10],n=a[11];return a!==b&&(b[0]=a[0],b[1]=a[1],b[2]=a[2],b[3]=a[3],b[12]=a[12],b[13]=a[13],b[14]=a[14],b[15]=a[15]),b[4]=f*c+h*d,b[5]=e*c+l*d,b[6]=k*c+r*d,b[7]=g*c+n*d,b[8]=
h*c-f*d,b[9]=l*c-e*d,b[10]=r*c-k*d,b[11]=n*c-g*d,b},rotateZ:function(b,a,c){var d=Math.sin(c);c=Math.cos(c);var f=a[0],e=a[1],k=a[2],g=a[3],h=a[4],l=a[5],r=a[6],n=a[7];return a!==b&&(b[8]=a[8],b[9]=a[9],b[10]=a[10],b[11]=a[11],b[12]=a[12],b[13]=a[13],b[14]=a[14],b[15]=a[15]),b[0]=f*c+h*d,b[1]=e*c+l*d,b[2]=k*c+r*d,b[3]=g*c+n*d,b[4]=h*c-f*d,b[5]=l*c-e*d,b[6]=r*c-k*d,b[7]=n*c-g*d,b},invert:function(b,a){var c=a[0],d=a[1],f=a[2],e=a[3],k=a[4],g=a[5],h=a[6],l=a[7],r=a[8],n=a[9],q=a[10],u=a[11],p=a[12],
v=a[13],z=a[14];a=a[15];var w=c*g-d*k,A=c*h-f*k,m=c*l-e*k,x=d*h-f*g,y=d*l-e*g,t=f*l-e*h,J=r*v-n*p,B=r*z-q*p,E=r*a-u*p,I=n*z-q*v,C=n*a-u*v,F=q*a-u*z,D=w*F-A*C+m*I+x*E-y*B+t*J;return D?(D=1/D,b[0]=(g*F-h*C+l*I)*D,b[1]=(f*C-d*F-e*I)*D,b[2]=(v*t-z*y+a*x)*D,b[3]=(q*y-n*t-u*x)*D,b[4]=(h*E-k*F-l*B)*D,b[5]=(c*F-f*E+e*B)*D,b[6]=(z*m-p*t-a*A)*D,b[7]=(r*t-q*m+u*A)*D,b[8]=(k*C-g*E+l*J)*D,b[9]=(d*E-c*C-e*J)*D,b[10]=(p*y-v*m+a*w)*D,b[11]=(n*m-r*y-u*w)*D,b[12]=(g*B-k*I-h*J)*D,b[13]=(c*I-d*B+f*J)*D,b[14]=(v*A-p*
x-z*w)*D,b[15]=(r*x-n*A+q*w)*D,b):null},ortho:function(b,a,c,d,f,e,k){var g=1/(a-c),h=1/(d-f),l=1/(e-k);return b[0]=-2*g,b[1]=0,b[2]=0,b[3]=0,b[4]=0,b[5]=-2*h,b[6]=0,b[7]=0,b[8]=0,b[9]=0,b[10]=2*l,b[11]=0,b[12]=(a+c)*g,b[13]=(f+d)*h,b[14]=(k+e)*l,b[15]=1,b}}})}),Ig=(Ne.vec3,Ne.vec4),Vg=(Ne.mat2,Ne.mat3,Ne.mat4),Wg=function(b){function a(a){b.call(this,a,vh)}return b&&(a.__proto__=b),a.prototype=Object.create(b&&b.prototype),a.prototype.constructor=a,a.prototype.createBucket=function(b){return new Nd(b)},
a.prototype.queryRadius=function(b){return Dc("circle-radius",this,b)+Dc("circle-stroke-width",this,b)+ma(this.paint.get("circle-translate"))},a.prototype.queryIntersectsFeature=function(b,a,c,d,f,e,k){b=Xc(b,this.paint.get("circle-translate"),this.paint.get("circle-translate-anchor"),f.angle,e);d=this.paint.get("circle-radius").evaluate(a)+this.paint.get("circle-stroke-width").evaluate(a);b=(a="map"===this.paint.get("circle-pitch-alignment"))?b:function(b,a,c){return b.map(function(b){return b.map(function(b){return rd(b,
a,c)})})}(b,k,f);e=a?d*e:d;for(d=0;d<c.length;d+=1)for(var g=0,h=c[d];g<h.length;g+=1){var l=h[g],r=a?l:rd(l,k,f),n=e;l=Ig.transformMat4([],[l.x,l.y,0,1],k);if("viewport"===this.paint.get("circle-pitch-scale")&&"map"===this.paint.get("circle-pitch-alignment")?n*=l[3]/f.cameraToCenterDistance:"map"===this.paint.get("circle-pitch-scale")&&"viewport"===this.paint.get("circle-pitch-alignment")&&(n*=f.cameraToCenterDistance/l[3]),Qd(b,r,n))return!0}return!1},a}(ld),Oe=function(b){function a(){b.apply(this,
arguments)}return b&&(a.__proto__=b),a.prototype=Object.create(b&&b.prototype),a.prototype.constructor=a,a}(Nd);Ca("HeatmapBucket",Oe,{omit:["layers"]});var Od=function(b,a){Yc(this,b,1,a)};Od.prototype.resize=function(b){sd(this,b,1)};Od.prototype.clone=function(){return new Od({width:this.width,height:this.height},new Uint8Array(this.data))};Od.copy=function(b,a,c,d,f){Zc(b,a,c,d,f,1)};var pd=function(b,a){Yc(this,b,4,a)};pd.prototype.resize=function(b){sd(this,b,4)};pd.prototype.clone=function(){return new pd({width:this.width,
height:this.height},new Uint8Array(this.data))};pd.copy=function(b,a,c,d,f){Zc(b,a,c,d,f,4)};Ca("AlphaImage",Od);Ca("RGBAImage",pd);var Jg={paint:new sc({"heatmap-radius":new Xa(ra.paint_heatmap["heatmap-radius"]),"heatmap-weight":new Xa(ra.paint_heatmap["heatmap-weight"]),"heatmap-intensity":new Ma(ra.paint_heatmap["heatmap-intensity"]),"heatmap-color":new kd(ra.paint_heatmap["heatmap-color"]),"heatmap-opacity":new Ma(ra.paint_heatmap["heatmap-opacity"])})},dg=function(b){function a(a){b.call(this,
a,Jg);this._updateColorRamp()}return b&&(a.__proto__=b),a.prototype=Object.create(b&&b.prototype),a.prototype.constructor=a,a.prototype.createBucket=function(b){return new Oe(b)},a.prototype.setPaintProperty=function(a,c,d){b.prototype.setPaintProperty.call(this,a,c,d);"heatmap-color"===a&&this._updateColorRamp()},a.prototype._updateColorRamp=function(){this.colorRamp=Rd(this._transitionablePaint._values["heatmap-color"].value.expression,"heatmapDensity");this.colorRampTexture=null},a.prototype.resize=
function(){this.heatmapFbo&&(this.heatmapFbo.destroy(),this.heatmapFbo=null)},a.prototype.queryRadius=function(){return 0},a.prototype.queryIntersectsFeature=function(){return!1},a.prototype.hasOffscreenPass=function(){return 0!==this.paint.get("heatmap-opacity")&&"none"!==this.visibility},a}(ld),wh={paint:new sc({"hillshade-illumination-direction":new Ma(ra.paint_hillshade["hillshade-illumination-direction"]),"hillshade-illumination-anchor":new Ma(ra.paint_hillshade["hillshade-illumination-anchor"]),
"hillshade-exaggeration":new Ma(ra.paint_hillshade["hillshade-exaggeration"]),"hillshade-shadow-color":new Ma(ra.paint_hillshade["hillshade-shadow-color"]),"hillshade-highlight-color":new Ma(ra.paint_hillshade["hillshade-highlight-color"]),"hillshade-accent-color":new Ma(ra.paint_hillshade["hillshade-accent-color"])})},xh=function(b){function a(a){b.call(this,a,wh)}return b&&(a.__proto__=b),a.prototype=Object.create(b&&b.prototype),a.prototype.constructor=a,a.prototype.hasOffscreenPass=function(){return 0!==
this.paint.get("hillshade-exaggeration")&&"none"!==this.visibility},a}(ld),eg=mb([{name:"a_pos",components:2,type:"Int16"}],4).members;la.deviation=function(b,a,c,d){var f=a&&a.length,e=Math.abs(Ve(b,0,f?a[0]*c:b.length,c));if(f){f=0;for(var k=a.length;f<k;f++)e-=Math.abs(Ve(b,a[f]*c,f<k-1?a[f+1]*c:b.length,c))}for(f=a=0;f<d.length;f+=3){k=d[f]*c;var g=d[f+1]*c,h=d[f+2]*c;a+=Math.abs((b[k]-b[h])*(b[g+1]-b[k+1])-(b[k]-b[g])*(b[h+1]-b[k+1]))}return 0===e&&0===a?0:Math.abs((a-e)/e)};la.flatten=function(b){for(var a=
b[0][0].length,c={vertices:[],holes:[],dimensions:a},d=0,f=0;f<b.length;f++){for(var e=0;e<b[f].length;e++)for(var k=0;k<a;k++)c.vertices.push(b[f][e][k]);0<f&&(d+=b[f-1].length,c.holes.push(d))}return c};la.default=la;var fg=Ff;fg.default=Ff;var Bc=function(b){this.zoom=b.zoom;this.overscaling=b.overscaling;this.layers=b.layers;this.layerIds=this.layers.map(function(b){return b.id});this.index=b.index;this.layoutVertexArray=new Je;this.indexArray=new nd;this.indexArray2=new Zf;this.programConfigurations=
new Nc(eg,b.layers,b.zoom);this.segments=new Ob;this.segments2=new Ob};Bc.prototype.populate=function(b,a){for(var c=0;c<b.length;c+=1){var d=b[c],f=d.feature,e=d.index;d=d.sourceLayerIndex;if(this.layers[0]._featureFilter(new Nb(this.zoom),f)){var k=vb(f);this.addFeature(f,k);a.featureIndex.insert(f,k,e,d,this.index)}}};Bc.prototype.isEmpty=function(){return 0===this.layoutVertexArray.length};Bc.prototype.upload=function(b){this.layoutVertexBuffer=b.createVertexBuffer(this.layoutVertexArray,eg);
this.indexBuffer=b.createIndexBuffer(this.indexArray);this.indexBuffer2=b.createIndexBuffer(this.indexArray2);this.programConfigurations.upload(b)};Bc.prototype.destroy=function(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.indexBuffer2.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.segments2.destroy())};Bc.prototype.addFeature=function(b,a){var c=0;for(a=Mb(a,500);c<a.length;c+=1){for(var d=a[c],f=0,e=0,k=d;e<k.length;e+=
1)f+=k[e].length;e=this.segments.prepareSegment(f,this.layoutVertexArray,this.indexArray);k=e.vertexLength;for(var g=[],h=[],l=0,r=d;l<r.length;l+=1){var n=r[l];if(0!==n.length){n!==d[0]&&h.push(g.length/2);var q=this.segments2.prepareSegment(n.length,this.layoutVertexArray,this.indexArray2),u=q.vertexLength;this.layoutVertexArray.emplaceBack(n[0].x,n[0].y);this.indexArray2.emplaceBack(u+n.length-1,u);g.push(n[0].x);g.push(n[0].y);for(var p=1;p<n.length;p++)this.layoutVertexArray.emplaceBack(n[p].x,
n[p].y),this.indexArray2.emplaceBack(u+p-1,u+p),g.push(n[p].x),g.push(n[p].y);q.vertexLength+=n.length;q.primitiveLength+=n.length}}d=la(g,h);for(g=0;g<d.length;g+=3)this.indexArray.emplaceBack(k+d[g],k+d[g+1],k+d[g+2]);e.vertexLength+=f;e.primitiveLength+=d.length/3}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,b)};Ca("FillBucket",Bc,{omit:["layers"]});var yh={paint:new sc({"fill-antialias":new Ma(ra.paint_fill["fill-antialias"]),"fill-opacity":new Xa(ra.paint_fill["fill-opacity"]),
"fill-color":new Xa(ra.paint_fill["fill-color"]),"fill-outline-color":new Xa(ra.paint_fill["fill-outline-color"]),"fill-translate":new Ma(ra.paint_fill["fill-translate"]),"fill-translate-anchor":new Ma(ra.paint_fill["fill-translate-anchor"]),"fill-pattern":new jd(ra.paint_fill["fill-pattern"])})},zh=function(b){function a(a){b.call(this,a,yh)}return b&&(a.__proto__=b),a.prototype=Object.create(b&&b.prototype),a.prototype.constructor=a,a.prototype.recalculate=function(b){this.paint=this._transitioningPaint.possiblyEvaluate(b);
b=this.paint._values["fill-outline-color"];"constant"===b.value.kind&&void 0===b.value.value&&(this.paint._values["fill-outline-color"]=this.paint._values["fill-color"])},a.prototype.createBucket=function(b){return new Bc(b)},a.prototype.queryRadius=function(){return ma(this.paint.get("fill-translate"))},a.prototype.queryIntersectsFeature=function(b,a,c,d,f,e){return Bb(Xc(b,this.paint.get("fill-translate"),this.paint.get("fill-translate-anchor"),f.angle,e),c)},a}(ld),Q=mb([{name:"a_pos",components:2,
type:"Int16"},{name:"a_normal_ed",components:4,type:"Int16"}],4).members,gg=Math.pow(2,13),fc=function(b){this.zoom=b.zoom;this.overscaling=b.overscaling;this.layers=b.layers;this.layerIds=this.layers.map(function(b){return b.id});this.index=b.index;this.layoutVertexArray=new Uf;this.indexArray=new nd;this.programConfigurations=new Nc(Q,b.layers,b.zoom);this.segments=new Ob};fc.prototype.populate=function(b,a){for(var c=0;c<b.length;c+=1){var d=b[c],f=d.feature,e=d.index;d=d.sourceLayerIndex;if(this.layers[0]._featureFilter(new Nb(this.zoom),
f)){var k=vb(f);this.addFeature(f,k);a.featureIndex.insert(f,k,e,d,this.index)}}};fc.prototype.isEmpty=function(){return 0===this.layoutVertexArray.length};fc.prototype.upload=function(b){this.layoutVertexBuffer=b.createVertexBuffer(this.layoutVertexArray,Q);this.indexBuffer=b.createIndexBuffer(this.indexArray);this.programConfigurations.upload(b)};fc.prototype.destroy=function(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),
this.segments.destroy())};fc.prototype.addFeature=function(b,a){var c=0;for(a=Mb(a,500);c<a.length;c+=1){for(var d=a[c],f=0,e=0,k=d;e<k.length;e+=1)f+=k[e].length;e=this.segments.prepareSegment(4,this.layoutVertexArray,this.indexArray);k=0;for(var g=d;k<g.length;k+=1){var h=g[k];if(0!==h.length&&!ge(h))for(var l=0,r=0;r<h.length;r++){var n=h[r];if(1<=r){var q=h[r-1];if(!(n.x===q.x&&(0>n.x||8192<n.x)||n.y===q.y&&(0>n.y||8192<n.y))){e.vertexLength+4>Ob.MAX_VERTEX_ARRAY_LENGTH&&(e=this.segments.prepareSegment(4,
this.layoutVertexArray,this.indexArray));var u=n.sub(q)._perp()._unit(),p=q.dist(n);32768<l+p&&(l=0);oc(this.layoutVertexArray,n.x,n.y,u.x,u.y,0,0,l);oc(this.layoutVertexArray,n.x,n.y,u.x,u.y,0,1,l);l+=p;oc(this.layoutVertexArray,q.x,q.y,u.x,u.y,0,0,l);oc(this.layoutVertexArray,q.x,q.y,u.x,u.y,0,1,l);n=e.vertexLength;this.indexArray.emplaceBack(n,n+1,n+2);this.indexArray.emplaceBack(n+1,n+2,n+3);e.vertexLength+=4;e.primitiveLength+=2}}}}e.vertexLength+f>Ob.MAX_VERTEX_ARRAY_LENGTH&&(e=this.segments.prepareSegment(f,
this.layoutVertexArray,this.indexArray));g=[];h=[];k=e.vertexLength;l=0;for(r=d;l<r.length;l+=1)if(n=r[l],0!==n.length)for(n!==d[0]&&h.push(g.length/2),q=0;q<n.length;q++)u=n[q],oc(this.layoutVertexArray,u.x,u.y,0,0,1,1,0),g.push(u.x),g.push(u.y);d=la(g,h);for(g=0;g<d.length;g+=3)this.indexArray.emplaceBack(k+d[g],k+d[g+1],k+d[g+2]);e.primitiveLength+=d.length/3;e.vertexLength+=f}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,b)};Ca("FillExtrusionBucket",fc,{omit:["layers"]});
var mc={paint:new sc({"fill-extrusion-opacity":new Ma(ra["paint_fill-extrusion"]["fill-extrusion-opacity"]),"fill-extrusion-color":new Xa(ra["paint_fill-extrusion"]["fill-extrusion-color"]),"fill-extrusion-translate":new Ma(ra["paint_fill-extrusion"]["fill-extrusion-translate"]),"fill-extrusion-translate-anchor":new Ma(ra["paint_fill-extrusion"]["fill-extrusion-translate-anchor"]),"fill-extrusion-pattern":new jd(ra["paint_fill-extrusion"]["fill-extrusion-pattern"]),"fill-extrusion-height":new Xa(ra["paint_fill-extrusion"]["fill-extrusion-height"]),
"fill-extrusion-base":new Xa(ra["paint_fill-extrusion"]["fill-extrusion-base"])})},hg=function(b){function a(a){b.call(this,a,mc)}return b&&(a.__proto__=b),a.prototype=Object.create(b&&b.prototype),a.prototype.constructor=a,a.prototype.createBucket=function(b){return new fc(b)},a.prototype.queryRadius=function(){return ma(this.paint.get("fill-extrusion-translate"))},a.prototype.queryIntersectsFeature=function(b,a,c,d,f,e){return Bb(Xc(b,this.paint.get("fill-extrusion-translate"),this.paint.get("fill-extrusion-translate-anchor"),
f.angle,e),c)},a.prototype.hasOffscreenPass=function(){return 0!==this.paint.get("fill-extrusion-opacity")&&"none"!==this.visibility},a.prototype.resize=function(){this.viewportFrame&&(this.viewportFrame.destroy(),this.viewportFrame=null)},a}(ld),Yg=mb([{name:"a_pos_normal",components:4,type:"Int16"},{name:"a_data",components:4,type:"Uint8"}],4).members;Hc.types=["Unknown","Point","LineString","Polygon"];Hc.prototype.loadGeometry=function(){var b=this._pbf;b.pos=this._geometry;for(var a,c=b.readVarint()+
b.pos,d=1,f=0,e=0,k=0,g=[];b.pos<c;)if(0>=f&&(f=b.readVarint(),d=7&f,f>>=3),f--,1===d||2===d)e+=b.readSVarint(),k+=b.readSVarint(),1===d&&(a&&g.push(a),a=[]),a.push(new $b(e,k));else{if(7!==d)throw Error("unknown command "+d);a&&a.push(a[0].clone())}return a&&g.push(a),g};Hc.prototype.bbox=function(){var b=this._pbf;b.pos=this._geometry;for(var a=b.readVarint()+b.pos,c=1,d=0,f=0,e=0,k=1/0,g=-1/0,h=1/0,l=-1/0;b.pos<a;)if(0>=d&&(d=b.readVarint(),c=7&d,d>>=3),d--,1===c||2===c)(f+=b.readSVarint())<k&&
(k=f),f>g&&(g=f),(e+=b.readSVarint())<h&&(h=e),e>l&&(l=e);else if(7!==c)throw Error("unknown command "+c);return[k,h,g,l]};Hc.prototype.toGeoJSON=function(b,a,c){function d(b){for(var a=0;a<b.length;a++){var c=b[a];b[a]=[360*(c.x+e)/f-180,360/Math.PI*Math.atan(Math.exp((180-360*(c.y+k)/f)*Math.PI/180))-90]}}var f=this.extent*Math.pow(2,c),e=this.extent*b,k=this.extent*a;a=this.loadGeometry();c=Hc.types[this.type];switch(this.type){case 1:var g=[];for(b=0;b<a.length;b++)g[b]=a[b][0];d(a=g);break;case 2:for(b=
0;b<a.length;b++)d(a[b]);break;case 3:for(a=function(b){var a=b.length;if(1>=a)return[b];for(var c,d,f=[],e=0;e<a;e++){var k=void 0;for(var g,h=b[e],l=0,r=0,n=h.length,q=n-1;r<n;q=r++)g=h[r],l+=((k=h[q]).x-g.x)*(g.y+k.y);k=l;0!==k&&(void 0===d&&(d=0>k),d===0>k?(c&&f.push(c),c=[b[e]]):c.push(b[e]))}c&&f.push(c);return f}(a),b=0;b<a.length;b++)for(g=0;g<a[b].length;g++)d(a[b][g])}1===a.length?a=a[0]:c="Multi"+c;b={type:"Feature",geometry:{type:c,coordinates:a},properties:this.properties};return"id"in
this&&(b.id=this.id),b};var Zg=jb;jb.prototype.feature=function(b){if(0>b||b>=this._features.length)throw Error("feature index out of bounds");this._pbf.pos=this._features[b];b=this._pbf.readVarint()+this._pbf.pos;return new Hc(this._pbf,b,this.extent,this._keys,this._values)};var Pe={VectorTile:function(b,a){this.layers=b.readFields(ad,{},a)},VectorTileFeature:Hc,VectorTileLayer:Zg},Ah=Pe.VectorTileFeature.types,$g=Math.cos(Math.PI/180*37.5),Va=Math.pow(2,14)/.5,Qc=function(b){this.zoom=b.zoom;this.overscaling=
b.overscaling;this.layers=b.layers;this.layerIds=this.layers.map(function(b){return b.id});this.index=b.index;this.layoutVertexArray=new md;this.indexArray=new nd;this.programConfigurations=new Nc(Yg,b.layers,b.zoom);this.segments=new Ob};Qc.prototype.populate=function(b,a){for(var c=0;c<b.length;c+=1){var d=b[c],f=d.feature,e=d.index;d=d.sourceLayerIndex;if(this.layers[0]._featureFilter(new Nb(this.zoom),f)){var k=vb(f);this.addFeature(f,k);a.featureIndex.insert(f,k,e,d,this.index)}}};Qc.prototype.isEmpty=
function(){return 0===this.layoutVertexArray.length};Qc.prototype.upload=function(b){this.layoutVertexBuffer=b.createVertexBuffer(this.layoutVertexArray,Yg);this.indexBuffer=b.createIndexBuffer(this.indexArray);this.programConfigurations.upload(b)};Qc.prototype.destroy=function(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy())};Qc.prototype.addFeature=function(b,a){var c=this.layers[0].layout,d=c.get("line-join").evaluate(b),
f=c.get("line-cap"),e=c.get("line-miter-limit");c=c.get("line-round-limit");for(var k=0;k<a.length;k+=1)this.addLine(a[k],b,d,f,e,c)};Qc.prototype.addLine=function(b,a,c,d,f,e){var k=null;a.properties&&a.properties.hasOwnProperty("mapbox_clip_start")&&a.properties.hasOwnProperty("mapbox_clip_end")&&(k={start:a.properties.mapbox_clip_start,end:a.properties.mapbox_clip_end,tileTotal:void 0});for(var g="Polygon"===Ah[a.type],h=b.length;2<=h&&b[h-1].equals(b[h-2]);)h--;for(var l=0;l<h-1&&b[l].equals(b[l+
1]);)l++;if(!(h<(g?3:2))){if(k){for(var r=k,n=h,q,u,p=0,v=l;v<n-1;v++)q=b[v],u=b[v+1],p+=q.dist(u);r.tileTotal=p}"bevel"===c&&(f=1.05);r=8192/(512*this.overscaling)*15;var z=b[l];n=this.segments.prepareSegment(10*h,this.layoutVertexArray,this.indexArray);this.distance=0;var w,A,m;q=g?"butt":d;var x=!0,y=v=p=u=void 0;this.e1=this.e2=this.e3=-1;g&&(w=b[h-2],y=z.sub(w)._unit()._perp());for(z=l;z<h;z++)if(!(p=g&&z===h-1?b[l+1]:b[z+1])||!b[z].equals(p)){y&&(v=y);w&&(u=w);w=b[z];y=p?p.sub(w)._unit()._perp():
v;var t=(v=v||y).add(y);0===t.x&&0===t.y||t._unit();var J=t.x*y.x+t.y*y.y,B=0!==J?1/J:1/0,E=J<$g&&u&&p;if(E&&z>l){var I=w.dist(u);I>2*r&&(I=w.sub(w.sub(u)._mult(r/I)._round()),this.distance+=I.dist(u),this.addCurrentVertex(I,this.distance,v.mult(1),0,0,!1,n,k),u=I)}var C=(I=u&&p)?c:p?d:q;if(I&&"round"===C&&(B<e?C="miter":2>=B&&(C="fakeround")),"miter"===C&&B>f&&(C="bevel"),"bevel"===C&&(2<B&&(C="flipbevel"),B<f&&(C="miter")),u&&(this.distance+=w.dist(u)),"miter"===C)t._mult(B),this.addCurrentVertex(w,
this.distance,t,0,0,!1,n,k);else if("flipbevel"===C)100<B?t=y.clone().mult(-1):(x=0<v.x*y.y-v.y*y.x?-1:1,I=B*v.add(y).mag()/v.sub(y).mag(),t._perp()._mult(I*x)),this.addCurrentVertex(w,this.distance,t,0,0,!1,n,k),this.addCurrentVertex(w,this.distance,t.mult(-1),0,0,!1,n,k);else if("bevel"===C||"fakeround"===C){I=0<v.x*y.y-v.y*y.x;B=-Math.sqrt(B*B-1);if(I?(m=0,A=B):(A=0,m=B),x||this.addCurrentVertex(w,this.distance,v,A,m,!1,n,k),"fakeround"===C){x=Math.floor(8*(.5-(J-.5)));for(B=0;B<x;B++)J=y.mult((B+
1)/(x+1))._add(v)._unit(),this.addPieSliceVertex(w,this.distance,J,I,n,k);this.addPieSliceVertex(w,this.distance,t,I,n,k);for(t=x-1;0<=t;t--)J=v.mult((t+1)/(x+1))._add(y)._unit(),this.addPieSliceVertex(w,this.distance,J,I,n,k)}p&&this.addCurrentVertex(w,this.distance,y,-A,-m,!1,n,k)}else"butt"===C?(x||this.addCurrentVertex(w,this.distance,v,0,0,!1,n,k),p&&this.addCurrentVertex(w,this.distance,y,0,0,!1,n,k)):"square"===C?(x||(this.addCurrentVertex(w,this.distance,v,1,1,!1,n,k),this.e1=this.e2=-1),
p&&this.addCurrentVertex(w,this.distance,y,-1,-1,!1,n,k)):"round"===C&&(x||(this.addCurrentVertex(w,this.distance,v,0,0,!1,n,k),this.addCurrentVertex(w,this.distance,v,1,1,!0,n,k),this.e1=this.e2=-1),p&&(this.addCurrentVertex(w,this.distance,y,-1,-1,!0,n,k),this.addCurrentVertex(w,this.distance,y,0,0,!1,n,k)));E&&z<h-1&&(E=w.dist(p),E>2*r&&(E=w.add(p.sub(w)._mult(r/E)._round()),this.distance+=E.dist(w),this.addCurrentVertex(E,this.distance,y.mult(1),0,0,!1,n,k),w=E));x=!1}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,
a)}};Qc.prototype.addCurrentVertex=function(b,a,c,d,f,e,k,g){var h=this.layoutVertexArray,l=this.indexArray;g&&(a=(a/g.tileTotal*(g.end-g.start)+g.start)*(Va-1));var r=c.clone();d&&r._sub(c.perp()._mult(d));fe(h,b,r,e,!1,d,a);this.e3=k.vertexLength++;0<=this.e1&&0<=this.e2&&(l.emplaceBack(this.e1,this.e2,this.e3),k.primitiveLength++);this.e1=this.e2;this.e2=this.e3;r=c.mult(-1);f&&r._sub(c.perp()._mult(f));fe(h,b,r,e,!0,-f,a);this.e3=k.vertexLength++;0<=this.e1&&0<=this.e2&&(l.emplaceBack(this.e1,
this.e2,this.e3),k.primitiveLength++);this.e1=this.e2;this.e2=this.e3;a>Va/2&&!g&&(this.distance=0,this.addCurrentVertex(b,this.distance,c,d,f,e,k))};Qc.prototype.addPieSliceVertex=function(b,a,c,d,f,e){c=c.mult(d?-1:1);var k=this.layoutVertexArray,g=this.indexArray;e&&(a=(a/e.tileTotal*(e.end-e.start)+e.start)*(Va-1));fe(k,b,c,!1,d,0,a);this.e3=f.vertexLength++;0<=this.e1&&0<=this.e2&&(g.emplaceBack(this.e1,this.e2,this.e3),f.primitiveLength++);d?this.e2=this.e3:this.e1=this.e3};Ca("LineBucket",
Qc,{omit:["layers"]});var Bh=new sc({"line-cap":new Ma(ra.layout_line["line-cap"]),"line-join":new Xa(ra.layout_line["line-join"]),"line-miter-limit":new Ma(ra.layout_line["line-miter-limit"]),"line-round-limit":new Ma(ra.layout_line["line-round-limit"])}),Qe={paint:new sc({"line-opacity":new Xa(ra.paint_line["line-opacity"]),"line-color":new Xa(ra.paint_line["line-color"]),"line-translate":new Ma(ra.paint_line["line-translate"]),"line-translate-anchor":new Ma(ra.paint_line["line-translate-anchor"]),
"line-width":new Xa(ra.paint_line["line-width"]),"line-gap-width":new Xa(ra.paint_line["line-gap-width"]),"line-offset":new Xa(ra.paint_line["line-offset"]),"line-blur":new Xa(ra.paint_line["line-blur"]),"line-dasharray":new jd(ra.paint_line["line-dasharray"]),"line-pattern":new jd(ra.paint_line["line-pattern"]),"line-gradient":new kd(ra.paint_line["line-gradient"])}),layout:Bh},Bf=new (function(b){function a(){b.apply(this,arguments)}return b&&(a.__proto__=b),a.prototype=Object.create(b&&b.prototype),
a.prototype.constructor=a,a.prototype.possiblyEvaluate=function(a,c){return c=new Nb(Math.floor(c.zoom),{now:c.now,fadeDuration:c.fadeDuration,zoomHistory:c.zoomHistory,transition:c.transition}),b.prototype.possiblyEvaluate.call(this,a,c)},a.prototype.evaluate=function(a,c,d){return c=k({},c,{zoom:Math.floor(c.zoom)}),b.prototype.evaluate.call(this,a,c,d)},a}(Xa))(Qe.paint.properties["line-width"].specification);Bf.useIntegerZoom=!0;var ng=function(b){function a(a){b.call(this,a,Qe)}return b&&(a.__proto__=
b),a.prototype=Object.create(b&&b.prototype),a.prototype.constructor=a,a.prototype.setPaintProperty=function(a,c,d){b.prototype.setPaintProperty.call(this,a,c,d);"line-gradient"===a&&this._updateGradient()},a.prototype._updateGradient=function(){this.gradient=Rd(this._transitionablePaint._values["line-gradient"].value.expression,"lineProgress");this.gradientTexture=null},a.prototype.recalculate=function(a){b.prototype.recalculate.call(this,a);this.paint._values["line-floorwidth"]=Bf.possiblyEvaluate(this._transitioningPaint._values["line-width"].value,
a)},a.prototype.createBucket=function(b){return new Qc(b)},a.prototype.queryRadius=function(b){var a=Dc("line-width",this,b);var c=Dc("line-gap-width",this,b);a=0<c?c+2*a:a;b=Dc("line-offset",this,b);return a/2+Math.abs(b)+ma(this.paint.get("line-translate"))},a.prototype.queryIntersectsFeature=function(b,a,c,d,f,e){b=Xc(b,this.paint.get("line-translate"),this.paint.get("line-translate-anchor"),f.angle,e);d=this.paint.get("line-width").evaluate(a);f=this.paint.get("line-gap-width").evaluate(a);d=
e/2*(0<f?f+2*d:d);if(a=this.paint.get("line-offset").evaluate(a)){e*=a;a=[];f=new $b(0,0);for(var k=0;k<c.length;k++){for(var g=c[k],h=[],l=0;l<g.length;l++){var r=g[l-1],n=g[l],q=g[l+1];r=0===l?f:n.sub(r)._unit()._perp();q=l===g.length-1?f:q.sub(n)._unit()._perp();r=r._add(q)._unit();r._mult(1/(r.x*q.x+r.y*q.y));h.push(r._mult(e)._add(n))}a.push(h)}c=a}return yc(b,c,d)},a}(ld),te=mb([{name:"a_pos_offset",components:4,type:"Int16"},{name:"a_data",components:4,type:"Uint16"}]),kb=mb([{name:"a_projected_pos",
components:3,type:"Float32"}],4),Kg=(mb([{name:"a_fade_opacity",components:1,type:"Uint32"}],4),mb([{name:"a_placed",components:2,type:"Uint8"}],4)),vd=(mb([{type:"Int16",name:"anchorPointX"},{type:"Int16",name:"anchorPointY"},{type:"Int16",name:"x1"},{type:"Int16",name:"y1"},{type:"Int16",name:"x2"},{type:"Int16",name:"y2"},{type:"Uint32",name:"featureIndex"},{type:"Uint16",name:"sourceLayerIndex"},{type:"Uint16",name:"bucketIndex"},{type:"Int16",name:"radius"},{type:"Int16",name:"signedDistanceFromAnchor"}]),
mb([{name:"a_pos",components:2,type:"Int16"},{name:"a_anchor_pos",components:2,type:"Int16"},{name:"a_extrude",components:2,type:"Int16"}],4)),og=mb([{name:"a_pos",components:2,type:"Int16"},{name:"a_anchor_pos",components:2,type:"Int16"},{name:"a_extrude",components:2,type:"Int16"}],4);mb([{type:"Int16",name:"anchorX"},{type:"Int16",name:"anchorY"},{type:"Uint16",name:"glyphStartIndex"},{type:"Uint16",name:"numGlyphs"},{type:"Uint32",name:"vertexStartIndex"},{type:"Uint32",name:"lineStartIndex"},
{type:"Uint32",name:"lineLength"},{type:"Uint16",name:"segment"},{type:"Uint16",name:"lowerSize"},{type:"Uint16",name:"upperSize"},{type:"Float32",name:"lineOffsetX"},{type:"Float32",name:"lineOffsetY"},{type:"Uint8",name:"writingMode"},{type:"Uint8",name:"hidden"}]);mb([{type:"Float32",name:"offsetX"}]);mb([{type:"Int16",name:"x"},{type:"Int16",name:"y"},{type:"Int16",name:"tileUnitDistanceFromAnchor"}]);var Rc={"!":"","#":"",$:"","%":"","\x26":"","(":"",")":"","*":"","+":"",",":"","-":"",
".":"","/":"",":":"",";":"","\x3c":"","\x3d":"","\x3e":"","?":"","@":"","[":"","\\":"","]":"","^":"",_:"","`":"","{":"","|":"","}":"","~":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"",
"":"","":"","":"","":"","":"","":"","":"","":"","":"","":""},Ng=function(b){function a(a,c,d,f){b.call(this,a,c);this.angle=d;void 0!==f&&(this.segment=f)}return b&&(a.__proto__=b),a.prototype=Object.create(b&&b.prototype),a.prototype.constructor=a,a.prototype.clone=function(){return new a(this.x,this.y,this.angle,this.segment)},a}($b);Ca("Anchor",Ng);var pg=Pe.VectorTileFeature.types,Ua=[{name:"a_fade_opacity",components:1,type:"Uint8",offset:0}],Zb=function(b){this.layoutVertexArray=
new of;this.indexArray=new nd;this.programConfigurations=b;this.segments=new Ob;this.dynamicLayoutVertexArray=new Ke;this.opacityVertexArray=new Bg;this.placedSymbolArray=new sf};Zb.prototype.upload=function(b,a){this.layoutVertexBuffer=b.createVertexBuffer(this.layoutVertexArray,te.members);this.indexBuffer=b.createIndexBuffer(this.indexArray,a);this.programConfigurations.upload(b);this.dynamicLayoutVertexBuffer=b.createVertexBuffer(this.dynamicLayoutVertexArray,kb.members,!0);this.opacityVertexBuffer=
b.createVertexBuffer(this.opacityVertexArray,Ua,!0);this.opacityVertexBuffer.itemSize=1};Zb.prototype.destroy=function(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.dynamicLayoutVertexBuffer.destroy(),this.opacityVertexBuffer.destroy())};Ca("SymbolBuffers",Zb);var vf=function(b,a,c){this.layoutVertexArray=new b;this.layoutAttributes=a;this.indexArray=new c;this.segments=new Ob;this.collisionVertexArray=
new Le};vf.prototype.upload=function(b){this.layoutVertexBuffer=b.createVertexBuffer(this.layoutVertexArray,this.layoutAttributes);this.indexBuffer=b.createIndexBuffer(this.indexArray);this.collisionVertexBuffer=b.createVertexBuffer(this.collisionVertexArray,Kg.members,!0)};vf.prototype.destroy=function(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.segments.destroy(),this.collisionVertexBuffer.destroy())};Ca("CollisionBuffers",vf);var ab=function(b){this.collisionBoxArray=
b.collisionBoxArray;this.zoom=b.zoom;this.overscaling=b.overscaling;this.layers=b.layers;this.layerIds=this.layers.map(function(b){return b.id});this.index=b.index;this.pixelRatio=b.pixelRatio;this.sourceLayerIndex=b.sourceLayerIndex;b=this.layers[0]._unevaluatedLayout._values;this.textSizeData=Cd(this.zoom,b["text-size"]);this.iconSizeData=Cd(this.zoom,b["icon-size"]);b=this.layers[0].layout;this.sortFeaturesByY=b.get("text-allow-overlap")||b.get("icon-allow-overlap")||b.get("text-ignore-placement")||
b.get("icon-ignore-placement")};ab.prototype.createArrays=function(){this.text=new Zb(new Nc(te.members,this.layers,this.zoom,function(b){return/^text/.test(b)}));this.icon=new Zb(new Nc(te.members,this.layers,this.zoom,function(b){return/^icon/.test(b)}));this.collisionBox=new vf(qf,vd.members,Zf);this.collisionCircle=new vf(qf,og.members,nd);this.glyphOffsetArray=new Fg;this.lineVertexArray=new Gg};ab.prototype.populate=function(b,a){var c=this.layers[0],d=c.layout,f=d.get("text-font"),e=d.get("text-field"),
k=d.get("icon-image");e=("constant"!==e.value.kind||0<e.value.value.length)&&("constant"!==f.value.kind||0<f.value.value.length);k="constant"!==k.value.kind||k.value.value&&0<k.value.value.length;if(this.features=[],e||k){var g=a.iconDependencies;a=a.glyphDependencies;for(var h=new Nb(this.zoom),l=0;l<b.length;l+=1){var r=b[l],n=r.feature,q=r.index,u=r.sourceLayerIndex;if(c._featureFilter(h,n)){r=void 0;e&&(r=uc(r=c.getValueAndResolveTokens("text-field",n),c,n));var p=void 0;if(k&&(p=c.getValueAndResolveTokens("icon-image",
n)),r||p)if(q={text:r,icon:p,index:q,sourceLayerIndex:u,geometry:vb(n),properties:n.properties,type:pg[n.type]},void 0!==n.id&&(q.id=n.id),this.features.push(q),p&&(g[p]=!0),r)for(n=f.evaluate(n).join(","),n=a[n]=a[n]||{},q="map"===d.get("text-rotation-alignment")&&"line"===d.get("symbol-placement"),p=qd(r),u=0;u<r.length;u++)if(n[r.charCodeAt(u)]=!0,q&&p){var v=Rc[r.charAt(u)];v&&(n[v.charCodeAt(0)]=!0)}}}"line"===d.get("symbol-placement")&&(this.features=function(b){function a(b,a,c){var d=e[b];
return delete e[b],e[a]=d,k[d].geometry[0].pop(),k[d].geometry[0]=k[d].geometry[0].concat(c[0]),d}function c(b,a,c){var d=f[a];return delete f[a],f[b]=d,k[d].geometry[0].shift(),k[d].geometry[0]=c[0].concat(k[d].geometry[0]),d}function d(b,a,c){a=c?a[0][a[0].length-1]:a[0][0];return b+":"+a.x+":"+a.y}for(var f={},e={},k=[],g=0,h=0;h<b.length;h++){var l=b[h],r=l.geometry;if(l=l.text){var n=d(l,r),q=d(l,r,!0);if(n in e&&q in f&&e[n]!==f[q]){r=c(n,q,r);var u=a(n,q,k[r].geometry);delete f[n];delete e[q];
e[d(l,k[u].geometry,!0)]=u;k[r].geometry=null}else n in e?a(n,q,r):q in f?c(n,q,r):(k.push(b[h]),g++,f[n]=g-1,e[q]=g-1)}else k.push(b[h]),g++}return k.filter(function(b){return b.geometry})}(this.features))}};ab.prototype.isEmpty=function(){return 0===this.symbolInstances.length};ab.prototype.upload=function(b){this.text.upload(b,this.sortFeaturesByY);this.icon.upload(b,this.sortFeaturesByY);this.collisionBox.upload(b);this.collisionCircle.upload(b)};ab.prototype.destroy=function(){this.text.destroy();
this.icon.destroy();this.collisionBox.destroy();this.collisionCircle.destroy()};ab.prototype.addToLineVertexArray=function(b,a){var c=this.lineVertexArray.length;if(void 0!==b.segment){for(var d=b.dist(a[b.segment+1]),f=b.dist(a[b.segment]),e={},k=b.segment+1;k<a.length;k++)e[k]={x:a[k].x,y:a[k].y,tileUnitDistanceFromAnchor:d},k<a.length-1&&(d+=a[k+1].dist(a[k]));for(b=b.segment||0;0<=b;b--)e[b]={x:a[b].x,y:a[b].y,tileUnitDistanceFromAnchor:f},0<b&&(f+=a[b-1].dist(a[b]));for(f=0;f<a.length;f++)b=
e[f],this.lineVertexArray.emplaceBack(b.x,b.y,b.tileUnitDistanceFromAnchor)}return{lineStartIndex:c,lineLength:this.lineVertexArray.length-c}};ab.prototype.addSymbols=function(b,a,c,d,f,e,k,g,h,l){f=b.indexArray;for(var r=b.layoutVertexArray,n=b.dynamicLayoutVertexArray,q=b.segments.prepareSegment(4*a.length,b.layoutVertexArray,b.indexArray),u=this.glyphOffsetArray.length,p=q.vertexLength,v=0;v<a.length;v+=1){var z=a[v],w=z.tl,A=z.tr,m=z.bl,x=z.br,y=z.tex,t=q.vertexLength,J=z.glyphOffset[1];Dd(r,
g.x,g.y,w.x,J+w.y,y.x,y.y,c);Dd(r,g.x,g.y,A.x,J+A.y,y.x+y.w,y.y,c);Dd(r,g.x,g.y,m.x,J+m.y,y.x,y.y+y.h,c);Dd(r,g.x,g.y,x.x,J+x.y,y.x+y.w,y.y+y.h,c);Ic(n,g,0);f.emplaceBack(t,t+1,t+2);f.emplaceBack(t+1,t+2,t+3);q.vertexLength+=4;q.primitiveLength+=2;this.glyphOffsetArray.emplaceBack(z.glyphOffset[0])}b.placedSymbolArray.emplaceBack(g.x,g.y,u,this.glyphOffsetArray.length-u,p,h,l,g.segment,c?c[0]:0,c?c[1]:0,d[0],d[1],k,!1);b.programConfigurations.populatePaintArrays(b.layoutVertexArray.length,e)};ab.prototype._addCollisionDebugVertex=
function(b,a,c,d,f){return a.emplaceBack(0,0),b.emplaceBack(c.x,c.y,d.x,d.y,Math.round(f.x),Math.round(f.y))};ab.prototype.addCollisionDebugVertices=function(b,a,c,d,f,e,k,g){var h=f.segments.prepareSegment(4,f.layoutVertexArray,f.indexArray),l=h.vertexLength,r=f.layoutVertexArray,n=f.collisionVertexArray;(this._addCollisionDebugVertex(r,n,e,k.anchor,new $b(b,a)),this._addCollisionDebugVertex(r,n,e,k.anchor,new $b(c,a)),this._addCollisionDebugVertex(r,n,e,k.anchor,new $b(c,d)),this._addCollisionDebugVertex(r,
n,e,k.anchor,new $b(b,d)),h.vertexLength+=4,g)?(b=f.indexArray,b.emplaceBack(l,l+1,l+2),b.emplaceBack(l,l+2,l+3),h.primitiveLength+=2):(b=f.indexArray,b.emplaceBack(l,l+1),b.emplaceBack(l+1,l+2),b.emplaceBack(l+2,l+3),b.emplaceBack(l+3,l),h.primitiveLength+=4)};ab.prototype.generateCollisionDebugBuffers=function(){for(var b=0,a=this.symbolInstances;b<a.length;b+=1){var c=a[b];c.textCollisionFeature={boxStartIndex:c.textBoxStartIndex,boxEndIndex:c.textBoxEndIndex};c.iconCollisionFeature={boxStartIndex:c.iconBoxStartIndex,
boxEndIndex:c.iconBoxEndIndex};for(var d=0;2>d;d++){var f=c[0===d?"textCollisionFeature":"iconCollisionFeature"];if(f)for(var e=f.boxStartIndex;e<f.boxEndIndex;e++){var k=this.collisionBoxArray.get(e),g=0<k.radius;this.addCollisionDebugVertices(k.x1,k.y1,k.x2,k.y2,g?this.collisionCircle:this.collisionBox,k.anchorPoint,c,g)}}}};ab.prototype.deserializeCollisionBoxes=function(b,a,c,d,f){for(var e={};a<c;a++){var k=b.get(a);if(0===k.radius){e.textBox={x1:k.x1,y1:k.y1,x2:k.x2,y2:k.y2,anchorPointX:k.anchorPointX,
anchorPointY:k.anchorPointY};e.textFeatureIndex=k.featureIndex;break}e.textCircles||(e.textCircles=[],e.textFeatureIndex=k.featureIndex);e.textCircles.push(k.anchorPointX,k.anchorPointY,k.radius,k.signedDistanceFromAnchor,1)}for(c=d;c<f;c++)if(d=b.get(c),0===d.radius){e.iconBox={x1:d.x1,y1:d.y1,x2:d.x2,y2:d.y2,anchorPointX:d.anchorPointX,anchorPointY:d.anchorPointY};e.iconFeatureIndex=d.featureIndex;break}return e};ab.prototype.hasTextData=function(){return 0<this.text.segments.get().length};ab.prototype.hasIconData=
function(){return 0<this.icon.segments.get().length};ab.prototype.hasCollisionBoxData=function(){return 0<this.collisionBox.segments.get().length};ab.prototype.hasCollisionCircleData=function(){return 0<this.collisionCircle.segments.get().length};ab.prototype.sortFeatures=function(b){var a=this;if(this.sortFeaturesByY&&this.sortedAngle!==b&&(this.sortedAngle=b,!(1<this.text.segments.get().length||1<this.icon.segments.get().length))){for(var c=[],d=0;d<this.symbolInstances.length;d++)c.push(d);var f=
Math.sin(b),e=Math.cos(b);c.sort(function(b,c){b=a.symbolInstances[b];c=a.symbolInstances[c];return(f*b.anchor.x+e*b.anchor.y|0)-(f*c.anchor.x+e*c.anchor.y|0)||c.featureIndex-b.featureIndex});this.text.indexArray.clear();this.icon.indexArray.clear();this.featureSortOrder=[];for(b=0;b<c.length;b+=1){d=c[b];var k=a.symbolInstances[d];a.featureSortOrder.push(k.featureIndex);var g=0;for(k=k.placedTextSymbolIndices;g<k.length;g+=1){var h=a.text.placedSymbolArray.get(k[g]),l=h.vertexStartIndex+4*h.numGlyphs;
for(h=h.vertexStartIndex;h<l;h+=4)a.text.indexArray.emplaceBack(h,h+1,h+2),a.text.indexArray.emplaceBack(h+1,h+2,h+3)}d=a.icon.placedSymbolArray.get(d);d.numGlyphs&&(d=d.vertexStartIndex,a.icon.indexArray.emplaceBack(d,d+1,d+2),a.icon.indexArray.emplaceBack(d+1,d+2,d+3))}this.text.indexBuffer&&this.text.indexBuffer.updateData(this.text.indexArray);this.icon.indexBuffer&&this.icon.indexBuffer.updateData(this.icon.indexArray)}};Ca("SymbolBucket",ab,{omit:["layers","collisionBoxArray","features","compareText"],
shallow:["symbolInstances"]});ab.MAX_GLYPHS=65535;ab.addDynamicAttributes=Ic;var Wa=new sc({"symbol-placement":new Ma(ra.layout_symbol["symbol-placement"]),"symbol-spacing":new Ma(ra.layout_symbol["symbol-spacing"]),"symbol-avoid-edges":new Ma(ra.layout_symbol["symbol-avoid-edges"]),"icon-allow-overlap":new Ma(ra.layout_symbol["icon-allow-overlap"]),"icon-ignore-placement":new Ma(ra.layout_symbol["icon-ignore-placement"]),"icon-optional":new Ma(ra.layout_symbol["icon-optional"]),"icon-rotation-alignment":new Ma(ra.layout_symbol["icon-rotation-alignment"]),
"icon-size":new Xa(ra.layout_symbol["icon-size"]),"icon-text-fit":new Ma(ra.layout_symbol["icon-text-fit"]),"icon-text-fit-padding":new Ma(ra.layout_symbol["icon-text-fit-padding"]),"icon-image":new Xa(ra.layout_symbol["icon-image"]),"icon-rotate":new Xa(ra.layout_symbol["icon-rotate"]),"icon-padding":new Ma(ra.layout_symbol["icon-padding"]),"icon-keep-upright":new Ma(ra.layout_symbol["icon-keep-upright"]),"icon-offset":new Xa(ra.layout_symbol["icon-offset"]),"icon-anchor":new Xa(ra.layout_symbol["icon-anchor"]),
"icon-pitch-alignment":new Ma(ra.layout_symbol["icon-pitch-alignment"]),"text-pitch-alignment":new Ma(ra.layout_symbol["text-pitch-alignment"]),"text-rotation-alignment":new Ma(ra.layout_symbol["text-rotation-alignment"]),"text-field":new Xa(ra.layout_symbol["text-field"]),"text-font":new Xa(ra.layout_symbol["text-font"]),"text-size":new Xa(ra.layout_symbol["text-size"]),"text-max-width":new Xa(ra.layout_symbol["text-max-width"]),"text-line-height":new Ma(ra.layout_symbol["text-line-height"]),"text-letter-spacing":new Xa(ra.layout_symbol["text-letter-spacing"]),
"text-justify":new Xa(ra.layout_symbol["text-justify"]),"text-anchor":new Xa(ra.layout_symbol["text-anchor"]),"text-max-angle":new Ma(ra.layout_symbol["text-max-angle"]),"text-rotate":new Xa(ra.layout_symbol["text-rotate"]),"text-padding":new Ma(ra.layout_symbol["text-padding"]),"text-keep-upright":new Ma(ra.layout_symbol["text-keep-upright"]),"text-transform":new Xa(ra.layout_symbol["text-transform"]),"text-offset":new Xa(ra.layout_symbol["text-offset"]),"text-allow-overlap":new Ma(ra.layout_symbol["text-allow-overlap"]),
"text-ignore-placement":new Ma(ra.layout_symbol["text-ignore-placement"]),"text-optional":new Ma(ra.layout_symbol["text-optional"])}),sb={paint:new sc({"icon-opacity":new Xa(ra.paint_symbol["icon-opacity"]),"icon-color":new Xa(ra.paint_symbol["icon-color"]),"icon-halo-color":new Xa(ra.paint_symbol["icon-halo-color"]),"icon-halo-width":new Xa(ra.paint_symbol["icon-halo-width"]),"icon-halo-blur":new Xa(ra.paint_symbol["icon-halo-blur"]),"icon-translate":new Ma(ra.paint_symbol["icon-translate"]),"icon-translate-anchor":new Ma(ra.paint_symbol["icon-translate-anchor"]),
"text-opacity":new Xa(ra.paint_symbol["text-opacity"]),"text-color":new Xa(ra.paint_symbol["text-color"]),"text-halo-color":new Xa(ra.paint_symbol["text-halo-color"]),"text-halo-width":new Xa(ra.paint_symbol["text-halo-width"]),"text-halo-blur":new Xa(ra.paint_symbol["text-halo-blur"]),"text-translate":new Ma(ra.paint_symbol["text-translate"]),"text-translate-anchor":new Ma(ra.paint_symbol["text-translate-anchor"])}),layout:Wa},wf=function(b){function a(a){b.call(this,a,sb)}return b&&(a.__proto__=
b),a.prototype=Object.create(b&&b.prototype),a.prototype.constructor=a,a.prototype.recalculate=function(a){b.prototype.recalculate.call(this,a);"auto"===this.layout.get("icon-rotation-alignment")&&("line"===this.layout.get("symbol-placement")?this.layout._values["icon-rotation-alignment"]="map":this.layout._values["icon-rotation-alignment"]="viewport");"auto"===this.layout.get("text-rotation-alignment")&&("line"===this.layout.get("symbol-placement")?this.layout._values["text-rotation-alignment"]=
"map":this.layout._values["text-rotation-alignment"]="viewport");"auto"===this.layout.get("text-pitch-alignment")&&(this.layout._values["text-pitch-alignment"]=this.layout.get("text-rotation-alignment"));"auto"===this.layout.get("icon-pitch-alignment")&&(this.layout._values["icon-pitch-alignment"]=this.layout.get("icon-rotation-alignment"))},a.prototype.getValueAndResolveTokens=function(b,a){var c,d=this.layout.get(b).evaluate(a);b=this._unevaluatedLayout._values[b];return b.isDataDriven()||Ba(b.value)?
d:(c=a.properties,d.replace(/{([^{}]+)}/g,function(b,a){return a in c?String(c[a]):""}))},a.prototype.createBucket=function(b){return new ab(b)},a.prototype.queryRadius=function(){return 0},a.prototype.queryIntersectsFeature=function(){return!1},a}(ld),bh={paint:new sc({"background-color":new Ma(ra.paint_background["background-color"]),"background-pattern":new jd(ra.paint_background["background-pattern"]),"background-opacity":new Ma(ra.paint_background["background-opacity"])})},ig=function(b){function a(a){b.call(this,
a,bh)}return b&&(a.__proto__=b),a.prototype=Object.create(b&&b.prototype),a.prototype.constructor=a,a}(ld),Lg={paint:new sc({"raster-opacity":new Ma(ra.paint_raster["raster-opacity"]),"raster-hue-rotate":new Ma(ra.paint_raster["raster-hue-rotate"]),"raster-brightness-min":new Ma(ra.paint_raster["raster-brightness-min"]),"raster-brightness-max":new Ma(ra.paint_raster["raster-brightness-max"]),"raster-saturation":new Ma(ra.paint_raster["raster-saturation"]),"raster-contrast":new Ma(ra.paint_raster["raster-contrast"]),
"raster-fade-duration":new Ma(ra.paint_raster["raster-fade-duration"])})},Mg={circle:Wg,heatmap:dg,hillshade:xh,fill:zh,"fill-extrusion":hg,line:ng,symbol:wf,background:ig,raster:function(b){function a(a){b.call(this,a,Lg)}return b&&(a.__proto__=b),a.prototype=Object.create(b&&b.prototype),a.prototype.constructor=a,a}(ld)},jg=g(function(b,a){b.exports=function(){function b(b,a,c){c=c||{};this.w=b||64;this.h=a||64;this.autoResize=!!c.autoResize;this.shelves=[];this.freebins=[];this.stats={};this.bins=
{};this.maxId=0}function a(b,a,c){this.x=0;this.y=b;this.w=this.free=a;this.h=c}return b.prototype.pack=function(b,a){b=[].concat(b);a=a||{};for(var c,d,f,e=[],k=0;k<b.length;k++)if(c=b[k].w||b[k].width,d=b[k].h||b[k].height,f=b[k].id,c&&d)if(f=this.packOne(c,d,f))a.inPlace&&(b[k].x=f.x,b[k].y=f.y,b[k].id=f.id),e.push(f);return this.shrink(),e},b.prototype.packOne=function(b,c,d){var f,e,k,g,h,l,r,n,q=-1,u=-1,p=1/0,v=0;if("string"==typeof d||"number"==typeof d){if(f=this.getBin(d))return this.ref(f),
f;"number"==typeof d&&(this.maxId=Math.max(d,this.maxId))}else d=++this.maxId;for(g=0;g<this.freebins.length;g++){if(c===(f=this.freebins[g]).maxh&&b===f.maxw)return this.allocFreebin(g,b,c,d);c>f.maxh||b>f.maxw||c<=f.maxh&&b<=f.maxw&&(k=f.maxw*f.maxh-b*c)<p&&(p=k,q=g)}for(g=0;g<this.shelves.length;g++)if(v+=(e=this.shelves[g]).h,!(b>e.free)){if(c===e.h)return this.allocShelf(g,b,c,d);c>e.h||c<e.h&&(k=(e.h-c)*b)<p&&(q=-1,p=k,u=g)}return-1!==q?this.allocFreebin(q,b,c,d):-1!==u?this.allocShelf(u,b,
c,d):c<=this.h-v&&b<=this.w?(e=new a(v,this.w,c),this.allocShelf(this.shelves.push(e)-1,b,c,d)):this.autoResize?(h=l=this.h,((r=n=this.w)<=h||b>r)&&(n=2*Math.max(b,r)),(h<r||c>h)&&(l=2*Math.max(c,h)),this.resize(n,l),this.packOne(b,c,d)):null},b.prototype.allocFreebin=function(b,a,c,d){b=this.freebins.splice(b,1)[0];return b.id=d,b.w=a,b.h=c,b.refcount=0,this.bins[d]=b,this.ref(b),b},b.prototype.allocShelf=function(b,a,c,d){b=this.shelves[b].alloc(a,c,d);return this.bins[d]=b,this.ref(b),b},b.prototype.shrink=
function(){if(0<this.shelves.length){for(var b=0,a=0,c=0;c<this.shelves.length;c++){var d=this.shelves[c];a+=d.h;b=Math.max(d.w-d.free,b)}this.resize(b,a)}},b.prototype.getBin=function(b){return this.bins[b]},b.prototype.ref=function(b){if(1==++b.refcount){var a=b.h;this.stats[a]=1+(0|this.stats[a])}return b.refcount},b.prototype.unref=function(b){return 0===b.refcount?0:(0==--b.refcount&&(this.stats[b.h]--,delete this.bins[b.id],this.freebins.push(b)),b.refcount)},b.prototype.clear=function(){this.shelves=
[];this.freebins=[];this.stats={};this.bins={};this.maxId=0},b.prototype.resize=function(b,a){this.w=b;this.h=a;for(a=0;a<this.shelves.length;a++)this.shelves[a].resize(b);return!0},a.prototype.alloc=function(b,a,c){if(b>this.free||a>this.h)return null;var d=this.x;return this.x+=b,this.free-=b,new function(b,a,c,d,f,e,k){this.id=b;this.x=a;this.y=c;this.w=d;this.h=f;this.maxw=e||d;this.maxh=k||f;this.refcount=0}(c,d,this.y,b,a,b,this.h)},a.prototype.resize=function(b){return this.free+=b-this.w,
this.w=b,!0},b}()}),ne=function(b,a){a=a.pixelRatio;this.paddedRect=b;this.pixelRatio=a},Re={tl:{configurable:!0},br:{configurable:!0},displaySize:{configurable:!0}};Re.tl.get=function(){return[this.paddedRect.x+1,this.paddedRect.y+1]};Re.br.get=function(){return[this.paddedRect.x+this.paddedRect.w-1,this.paddedRect.y+this.paddedRect.h-1]};Re.displaySize.get=function(){return[(this.paddedRect.w-2)/this.pixelRatio,(this.paddedRect.h-2)/this.pixelRatio]};Object.defineProperties(ne.prototype,Re);var qg=
function(b){var a=new pd({width:0,height:0}),c={},d=new jg(0,0,{autoResize:!0}),f;for(f in b){var e=b[f],k=d.packOne(e.data.width+2,e.data.height+2);a.resize({width:d.w,height:d.h});pd.copy(e.data,a,{x:0,y:0},{x:k.x+1,y:k.y+1},e.data);c[f]=new ne(k,e)}d.shrink();a.resize({width:d.w,height:d.h});this.image=a;this.positions=c};Ca("ImagePosition",ne);Ca("ImageAtlas",qg);var rg=function(b,a,c,d,f){var e=8*f-d-1;var k=(1<<e)-1,g=k>>1,h=-7;f=c?f-1:0;var l=c?-1:1,r=b[a+f];f+=l;c=r&(1<<-h)-1;r>>=-h;for(h+=
e;0<h;c=256*c+b[a+f],f+=l,h-=8);e=c&(1<<-h)-1;c>>=-h;for(h+=d;0<h;e=256*e+b[a+f],f+=l,h-=8);if(0===c)c=1-g;else{if(c===k)return e?NaN:1/0*(r?-1:1);e+=Math.pow(2,d);c-=g}return(r?-1:1)*e*Math.pow(2,c-d)},kg=function(b,a,c,d,f,e){var k,g,h,l=8*e-f-1,r=(1<<l)-1,n=r>>1,q=23===f?Math.pow(2,-24)-Math.pow(2,-77):0;e=d?0:e-1;d=d?1:-1;var u=0>a||0===a&&0>1/a?1:0;a=Math.abs(a);for(isNaN(a)||a===1/0?(g=isNaN(a)?1:0,k=r):(k=Math.floor(Math.log(a)/Math.LN2),1>a*(h=Math.pow(2,-k))&&(k--,h*=2),2<=(a+=1<=k+n?q/h:
q*Math.pow(2,1-n))*h&&(k++,h/=2),k+n>=r?(g=0,k=r):1<=k+n?(g=(a*h-1)*Math.pow(2,f),k+=n):(g=a*Math.pow(2,n-1)*Math.pow(2,f),k=0));8<=f;b[c+e]=255&g,e+=d,g/=256,f-=8);k=k<<f|g;for(l+=f;0<l;b[c+e]=255&k,e+=d,k/=256,l-=8);b[c+e-d]|=128*u};tb.Varint=0;tb.Fixed64=1;tb.Bytes=2;tb.Fixed32=5;tb.prototype={destroy:function(){this.buf=null},readFields:function(b,a,c){for(c=c||this.length;this.pos<c;){var d=this.readVarint(),f=d>>3,e=this.pos;this.type=7&d;b(f,a,this);this.pos===e&&this.skip(d)}return a},readMessage:function(b,
a){return this.readFields(b,a,this.readVarint()+this.pos)},readFixed32:function(){var b=Ed(this.buf,this.pos);return this.pos+=4,b},readSFixed32:function(){var b=Fd(this.buf,this.pos);return this.pos+=4,b},readFixed64:function(){var b=Ed(this.buf,this.pos)+4294967296*Ed(this.buf,this.pos+4);return this.pos+=8,b},readSFixed64:function(){var b=Ed(this.buf,this.pos)+4294967296*Fd(this.buf,this.pos+4);return this.pos+=8,b},readFloat:function(){var b=rg(this.buf,this.pos,!0,23,4);return this.pos+=4,b},
readDouble:function(){var b=rg(this.buf,this.pos,!0,52,8);return this.pos+=8,b},readVarint:function(b){var a,c=this.buf;var d=127&(a=c[this.pos++]);if(128>a)b=d;else if(d|=(127&(a=c[this.pos++]))<<7,128>a)b=d;else if(d|=(127&(a=c[this.pos++]))<<14,128>a)b=d;else if(d|=(127&(a=c[this.pos++]))<<21,128>a)b=d;else{d|=(15&c[this.pos])<<28;var f,e;a=this.buf;if((e=a[this.pos++],f=(112&e)>>4,128>e)||(e=a[this.pos++],f|=(127&e)<<3,128>e)||(e=a[this.pos++],f|=(127&e)<<10,128>e)||(e=a[this.pos++],f|=(127&e)<<
17,128>e)||(e=a[this.pos++],f|=(127&e)<<24,128>e)||(e=a[this.pos++],f|=(1&e)<<31,128>e))b=b?4294967296*f+(d>>>0):4294967296*(f>>>0)+(d>>>0);else throw Error("Expected varint not more than 10 bytes");}return b},readVarint64:function(){return this.readVarint(!0)},readSVarint:function(){var b=this.readVarint();return 1==b%2?(b+1)/-2:b/2},readBoolean:function(){return!!this.readVarint()},readString:function(){for(var b=this.readVarint()+this.pos,a=this.buf,c="",d=this.pos;d<b;){var f,e,k,g=a[d],h=null,
l=239<g?4:223<g?3:191<g?2:1;if(d+l>b)break;1===l?128>g&&(h=g):2===l?128==(192&(f=a[d+1]))&&127>=(h=(31&g)<<6|63&f)&&(h=null):3===l?(f=a[d+1],e=a[d+2],128==(192&f)&&128==(192&e)&&(2047>=(h=(15&g)<<12|(63&f)<<6|63&e)||55296<=h&&57343>=h)&&(h=null)):4===l&&(f=a[d+1],e=a[d+2],k=a[d+3],128==(192&f)&&128==(192&e)&&128==(192&k)&&(65535>=(h=(15&g)<<18|(63&f)<<12|(63&e)<<6|63&k)||1114112<=h)&&(h=null));null===h?(h=65533,l=1):65535<h&&(h-=65536,c+=String.fromCharCode(h>>>10&1023|55296),h=56320|1023&h);c+=String.fromCharCode(h);
d+=l}return this.pos=b,c},readBytes:function(){var b=this.readVarint()+this.pos,a=this.buf.subarray(this.pos,b);return this.pos=b,a},readPackedVarint:function(b,a){var c=Jb(this);for(b=b||[];this.pos<c;)b.push(this.readVarint(a));return b},readPackedSVarint:function(b){var a=Jb(this);for(b=b||[];this.pos<a;)b.push(this.readSVarint());return b},readPackedBoolean:function(b){var a=Jb(this);for(b=b||[];this.pos<a;)b.push(this.readBoolean());return b},readPackedFloat:function(b){var a=Jb(this);for(b=
b||[];this.pos<a;)b.push(this.readFloat());return b},readPackedDouble:function(b){var a=Jb(this);for(b=b||[];this.pos<a;)b.push(this.readDouble());return b},readPackedFixed32:function(b){var a=Jb(this);for(b=b||[];this.pos<a;)b.push(this.readFixed32());return b},readPackedSFixed32:function(b){var a=Jb(this);for(b=b||[];this.pos<a;)b.push(this.readSFixed32());return b},readPackedFixed64:function(b){var a=Jb(this);for(b=b||[];this.pos<a;)b.push(this.readFixed64());return b},readPackedSFixed64:function(b){var a=
Jb(this);for(b=b||[];this.pos<a;)b.push(this.readSFixed64());return b},skip:function(b){b&=7;if(b===tb.Varint)for(;127<this.buf[this.pos++];);else if(b===tb.Bytes)this.pos=this.readVarint()+this.pos;else if(b===tb.Fixed32)this.pos+=4;else{if(b!==tb.Fixed64)throw Error("Unimplemented type: "+b);this.pos+=8}},writeTag:function(b,a){this.writeVarint(b<<3|a)},realloc:function(b){for(var a=this.length||16;a<this.pos+b;)a*=2;a!==this.length&&(b=new Uint8Array(a),b.set(this.buf),this.buf=b,this.length=a)},
finish:function(){return this.length=this.pos,this.pos=0,this.buf.subarray(0,this.length)},writeFixed32:function(b){this.realloc(4);he(this.buf,b,this.pos);this.pos+=4},writeSFixed32:function(b){this.realloc(4);he(this.buf,b,this.pos);this.pos+=4},writeFixed64:function(b){this.realloc(8);he(this.buf,-1&b,this.pos);he(this.buf,Math.floor(1/4294967296*b),this.pos+4);this.pos+=8},writeSFixed64:function(b){this.realloc(8);he(this.buf,-1&b,this.pos);he(this.buf,Math.floor(1/4294967296*b),this.pos+4);this.pos+=
8},writeVarint:function(b){268435455<(b=+b||0)||0>b?function(b,a){var c,d;0<=b?(c=b%4294967296|0,d=b/4294967296|0):(d=~(-b/4294967296),4294967295^(c=~(-b%4294967296))?c=c+1|0:(c=0,d=d+1|0));if(1.8446744073709552E19<=b||-1.8446744073709552E19>b)throw Error("Given varint doesn't fit into 10 bytes");a.realloc(10);(function(b,a,c){c.buf[c.pos++]=127&b|128;b>>>=7;c.buf[c.pos++]=127&b|128;b>>>=7;c.buf[c.pos++]=127&b|128;b>>>=7;c.buf[c.pos++]=127&b|128;c.buf[c.pos]=127&b>>>7})(c,0,a);(function(b,a){if(a.buf[a.pos++]|=
(7&b)<<4|((b>>>=3)?128:0),b)if(a.buf[a.pos++]=127&b|((b>>>=7)?128:0),b)if(a.buf[a.pos++]=127&b|((b>>>=7)?128:0),b)if(a.buf[a.pos++]=127&b|((b>>>=7)?128:0),b)if(a.buf[a.pos++]=127&b|((b>>>=7)?128:0),b)a.buf[a.pos++]=127&b})(d,a)}(b,this):(this.realloc(4),this.buf[this.pos++]=127&b|(127<b?128:0),127>=b||(this.buf[this.pos++]=127&(b>>>=7)|(127<b?128:0),127>=b||(this.buf[this.pos++]=127&(b>>>=7)|(127<b?128:0),127>=b||(this.buf[this.pos++]=b>>>7&127))))},writeSVarint:function(b){this.writeVarint(0>b?2*
-b-1:2*b)},writeBoolean:function(b){this.writeVarint(!!b)},writeString:function(b){b=String(b);this.realloc(4*b.length);this.pos++;for(var a=this.pos,c=this.buf,d=this.pos,f,e,k=0;k<b.length;k++){if(55295<(f=b.charCodeAt(k))&&57344>f){if(!e){56319<f||k+1===b.length?(c[d++]=239,c[d++]=191,c[d++]=189):e=f;continue}if(56320>f){c[d++]=239;c[d++]=191;c[d++]=189;e=f;continue}f=e-55296<<10|f-56320|65536;e=null}else e&&(c[d++]=239,c[d++]=191,c[d++]=189,e=null);128>f?c[d++]=f:(2048>f?c[d++]=f>>6|192:(65536>
f?c[d++]=f>>12|224:(c[d++]=f>>18|240,c[d++]=f>>12&63|128),c[d++]=f>>6&63|128),c[d++]=63&f|128)}this.pos=d;c=this.pos-a;128<=c&&Xe(a,c,this);this.pos=a-1;this.writeVarint(c);this.pos+=c},writeFloat:function(b){this.realloc(4);kg(this.buf,b,this.pos,!0,23,4);this.pos+=4},writeDouble:function(b){this.realloc(8);kg(this.buf,b,this.pos,!0,52,8);this.pos+=8},writeBytes:function(b){var a=b.length;this.writeVarint(a);this.realloc(a);for(var c=0;c<a;c++)this.buf[this.pos++]=b[c]},writeRawMessage:function(b,
a){this.pos++;var c=this.pos;b(a,this);b=this.pos-c;128<=b&&Xe(c,b,this);this.pos=c-1;this.writeVarint(b);this.pos+=b},writeMessage:function(b,a,c){this.writeTag(b,tb.Bytes);this.writeRawMessage(a,c)},writePackedVarint:function(b,a){this.writeMessage(b,Ue,a)},writePackedSVarint:function(b,a){this.writeMessage(b,Gf,a)},writePackedBoolean:function(b,a){this.writeMessage(b,Ye,a)},writePackedFloat:function(b,a){this.writeMessage(b,Hf,a)},writePackedDouble:function(b,a){this.writeMessage(b,If,a)},writePackedFixed32:function(b,
a){this.writeMessage(b,Ze,a)},writePackedSFixed32:function(b,a){this.writeMessage(b,Jf,a)},writePackedFixed64:function(b,a){this.writeMessage(b,bd,a)},writePackedSFixed64:function(b,a){this.writeMessage(b,Kf,a)},writeBytesField:function(b,a){this.writeTag(b,tb.Bytes);this.writeBytes(a)},writeFixed32Field:function(b,a){this.writeTag(b,tb.Fixed32);this.writeFixed32(a)},writeSFixed32Field:function(b,a){this.writeTag(b,tb.Fixed32);this.writeSFixed32(a)},writeFixed64Field:function(b,a){this.writeTag(b,
tb.Fixed64);this.writeFixed64(a)},writeSFixed64Field:function(b,a){this.writeTag(b,tb.Fixed64);this.writeSFixed64(a)},writeVarintField:function(b,a){this.writeTag(b,tb.Varint);this.writeVarint(a)},writeSVarintField:function(b,a){this.writeTag(b,tb.Varint);this.writeSVarint(a)},writeStringField:function(b,a){this.writeTag(b,tb.Bytes);this.writeString(a)},writeFloatField:function(b,a){this.writeTag(b,tb.Fixed32);this.writeFloat(a)},writeDoubleField:function(b,a){this.writeTag(b,tb.Fixed64);this.writeDouble(a)},
writeBooleanField:function(b,a){this.writeVarintField(b,!!a)}};var oe=function(b,a,c){this.target=b;this.parent=a;this.mapId=c;this.callbacks={};this.callbackID=0;r(["receive"],this);this.target.addEventListener("message",this.receive,!1)};oe.prototype.send=function(b,a,c,d){var f=c?this.mapId+":"+this.callbackID++:null;c&&(this.callbacks[f]=c);c=[];this.target.postMessage({targetMapId:d,sourceMapId:this.mapId,type:b,id:String(f),data:Ta(a,c)},c)};oe.prototype.receive=function(b){var a=this;b=b.data;
var c=b.id;if(!b.targetMapId||this.mapId===b.targetMapId){var d=function(b,d){var f=[];a.target.postMessage({sourceMapId:a.mapId,type:"\x3cresponse\x3e",id:String(c),error:b?Ta(b):null,data:Ta(d,f)},f)};if("\x3cresponse\x3e"===b.type)d=this.callbacks[b.id],delete this.callbacks[b.id],d&&b.error?d(ec(b.error)):d&&d(null,ec(b.data));else if(void 0!==b.id&&this.parent[b.type])this.parent[b.type](b.sourceMapId,ec(b.data),d);else if(void 0!==b.id&&this.parent.getWorkerSource){var f=b.type.split(".");this.parent.getWorkerSource(b.sourceMapId,
f[0],f[1])[f[2]](ec(b.data),d)}else this.parent[b.type](ec(b.data))}};oe.prototype.remove=function(){this.target.removeEventListener("message",this.receive,!1)};var Cf=e(g(function(b,a){!function(b){function a(b,a,d){a=Math.pow(2,d)-a-1;var f=c(256*b,256*a,d);b=c(256*(b+1),256*(a+1),d);return f[0]+","+f[1]+","+b[0]+","+b[1]}function c(b,a,c){c=12756274*Math.PI/256/Math.pow(2,c);return[b*c-12756274*Math.PI/2,a*c-12756274*Math.PI/2]}b.getURL=function(b,c,d,f,e,k){return k=k||{},b+"?"+["bbox\x3d"+a(d,
f,e),"format\x3d"+(k.format||"image/png"),"service\x3d"+(k.service||"WMS"),"version\x3d"+(k.version||"1.1.1"),"request\x3d"+(k.request||"GetMap"),"srs\x3d"+(k.srs||"EPSG:3857"),"width\x3d"+(k.width||256),"height\x3d"+(k.height||256),"layers\x3d"+c].join("\x26")};b.getTileBBox=a;b.getMercCoords=c;Object.defineProperty(b,"__esModule",{value:!0})}(a)})),Td=function(b,a,c){this.z=b;this.x=a;this.y=c;this.key=ye(0,b,a,c)};Td.prototype.equals=function(b){return this.z===b.z&&this.x===b.x&&this.y===b.y};
Td.prototype.url=function(b,a){for(var c=Cf.getTileBBox(this.x,this.y,this.z),d,f="",e=this.z;0<e;e--)f+=(this.x&(d=1<<e-1)?1:0)+(this.y&d?2:0);d=f;return b[(this.x+this.y)%b.length].replace("{prefix}",(this.x%16).toString(16)+(this.y%16).toString(16)).replace("{z}",String(this.z)).replace("{x}",String(this.x)).replace("{y}",String("tms"===a?Math.pow(2,this.z)-this.y-1:this.y)).replace("{quadkey}",d).replace("{bbox-epsg-3857}",c)};var Se=function(b,a){this.wrap=b;this.canonical=a;this.key=ye(b,a.z,
a.x,a.y)},wb=function(b,a,c,d,f){this.overscaledZ=b;this.wrap=a;this.canonical=new Td(c,+d,+f);this.key=ye(a,b,d,f)};wb.prototype.equals=function(b){return this.overscaledZ===b.overscaledZ&&this.wrap===b.wrap&&this.canonical.equals(b.canonical)};wb.prototype.scaledTo=function(b){var a=this.canonical.z-b;return b>this.canonical.z?new wb(b,this.wrap,this.canonical.z,this.canonical.x,this.canonical.y):new wb(b,this.wrap,b,this.canonical.x>>a,this.canonical.y>>a)};wb.prototype.isChildOf=function(b){var a=
this.canonical.z-b.canonical.z;return 0===b.overscaledZ||b.overscaledZ<this.overscaledZ&&b.canonical.x===this.canonical.x>>a&&b.canonical.y===this.canonical.y>>a};wb.prototype.children=function(b){if(this.overscaledZ>=b)return[new wb(this.overscaledZ+1,this.wrap,this.canonical.z,this.canonical.x,this.canonical.y)];b=this.canonical.z+1;var a=2*this.canonical.x,c=2*this.canonical.y;return[new wb(b,this.wrap,b,a,c),new wb(b,this.wrap,b,a+1,c),new wb(b,this.wrap,b,a,c+1),new wb(b,this.wrap,b,a+1,c+1)]};
wb.prototype.isLessThan=function(b){return this.wrap<b.wrap||!(this.wrap>b.wrap)&&(this.overscaledZ<b.overscaledZ||!(this.overscaledZ>b.overscaledZ)&&(this.canonical.x<b.canonical.x||!(this.canonical.x>b.canonical.x)&&this.canonical.y<b.canonical.y))};wb.prototype.wrapped=function(){return new wb(this.overscaledZ,0,this.canonical.z,this.canonical.x,this.canonical.y)};wb.prototype.unwrapTo=function(b){return new wb(this.overscaledZ,b,this.canonical.z,this.canonical.x,this.canonical.y)};wb.prototype.overscaleFactor=
function(){return Math.pow(2,this.overscaledZ-this.canonical.z)};wb.prototype.toUnwrapped=function(){return new Se(this.wrap,this.canonical)};wb.prototype.toString=function(){return this.overscaledZ+"/"+this.canonical.x+"/"+this.canonical.y};wb.prototype.toCoordinate=function(){return new Jc(this.canonical.x+Math.pow(2,this.wrap),this.canonical.y,this.canonical.z)};Ca("CanonicalTileID",Td);Ca("OverscaledTileID",wb,{omit:["posMatrix"]});var wd=function(b,a,c){if(0>=b)throw new RangeError("Level must have positive dimension");
this.dim=b;this.border=a;this.stride=this.dim+2*this.border;this.data=c||new Int32Array((this.dim+2*this.border)*(this.dim+2*this.border))};wd.prototype.set=function(b,a,c){this.data[this._idx(b,a)]=c+65536};wd.prototype.get=function(b,a){return this.data[this._idx(b,a)]-65536};wd.prototype._idx=function(b,a){if(b<-this.border||b>=this.dim+this.border||a<-this.border||a>=this.dim+this.border)throw new RangeError("out of range source coordinates for DEM data");return(a+this.border)*this.stride+(b+
this.border)};Ca("Level",wd);var xd=function(b,a,c){this.uid=b;this.scale=a||1;this.level=c||new wd(256,512);this.loaded=!!c};xd.prototype.loadFromImage=function(b,a){if(b.height!==b.width)throw new RangeError("DEM tiles must be square");if(a&&"mapbox"!==a&&"terrarium"!==a)return w('"'+a+'" is not a valid encoding type. Valid types include "mapbox" and "terrarium".');var c=this.level=new wd(b.width,b.width/2);this._unpackData(c,b.data,a||"mapbox");for(b=0;b<c.dim;b++)c.set(-1,b,c.get(0,b)),c.set(c.dim,
b,c.get(c.dim-1,b)),c.set(b,-1,c.get(b,0)),c.set(b,c.dim,c.get(b,c.dim-1));c.set(-1,-1,c.get(0,0));c.set(c.dim,-1,c.get(c.dim-1,0));c.set(-1,c.dim,c.get(0,c.dim-1));c.set(c.dim,c.dim,c.get(c.dim-1,c.dim-1));this.loaded=!0};xd.prototype._unpackMapbox=function(b,a,c){return(65536*b+256*a+c)/10-1E4};xd.prototype._unpackTerrarium=function(b,a,c){return 256*b+a+c/256-32768};xd.prototype._unpackData=function(b,a,c){c={mapbox:this._unpackMapbox,terrarium:this._unpackTerrarium}[c];for(var d=0;d<b.dim;d++)for(var f=
0;f<b.dim;f++){var e=4*(d*b.dim+f);b.set(f,d,this.scale*c(a[e],a[e+1],a[e+2]))}};xd.prototype.getPixels=function(){return new pd({width:this.level.dim+2*this.level.border,height:this.level.dim+2*this.level.border},new Uint8Array(this.level.data.buffer))};xd.prototype.backfillBorder=function(b,a,d){var f=this.level;b=b.level;if(f.dim!==b.dim)throw Error("level mismatch (dem dimension)");var e=a*f.dim,k=a*f.dim+f.dim,g=d*f.dim,h=d*f.dim+f.dim;switch(a){case -1:e=k-1;break;case 1:k=e+1}switch(d){case -1:g=
h-1;break;case 1:h=g+1}e=c(e,-f.border,f.dim+f.border);k=c(k,-f.border,f.dim+f.border);g=c(g,-f.border,f.dim+f.border);h=c(h,-f.border,f.dim+f.border);a=-a*f.dim;for(d=-d*f.dim;g<h;g++)for(var l=e;l<k;l++)f.set(l,g,b.get(l+a,g+d))};Ca("DEMData",xd);var lg=function(b){this._stringToNumber={};this._numberToString=[];for(var a=0;a<b.length;a++){var c=b[a];this._stringToNumber[c]=a;this._numberToString[a]=c}};lg.prototype.encode=function(b){return this._stringToNumber[b]};lg.prototype.decode=function(b){return this._numberToString[b]};
var Te=function(b,a,c,d){this.type="Feature";this._vectorTileFeature=b;b._z=a;b._x=c;b._y=d;this.properties=b.properties;null!=b.id&&(this.id=b.id)},sg={geometry:{configurable:!0}};sg.geometry.get=function(){return void 0===this._geometry&&(this._geometry=this._vectorTileFeature.toGeoJSON(this._vectorTileFeature._x,this._vectorTileFeature._y,this._vectorTileFeature._z).geometry),this._geometry};sg.geometry.set=function(b){this._geometry=b};Te.prototype.toJSON=function(){var b={geometry:this.geometry},
a;for(a in this)"_geometry"!==a&&"_vectorTileFeature"!==a&&(b[a]=this[a]);return b};Object.defineProperties(Te.prototype,sg);var Da=function(b,a,c){this.tileID=b;this.x=b.canonical.x;this.y=b.canonical.y;this.z=b.canonical.z;this.grid=a||new Pa(8192,16,0);this.featureIndexArray=c||new bg};Da.prototype.insert=function(b,a,c,d,f){b=this.featureIndexArray.length;this.featureIndexArray.emplaceBack(c,d,f);for(c=0;c<a.length;c++){d=a[c];f=[1/0,1/0,-1/0,-1/0];for(var e=0;e<d.length;e++){var k=d[e];f[0]=
Math.min(f[0],k.x);f[1]=Math.min(f[1],k.y);f[2]=Math.max(f[2],k.x);f[3]=Math.max(f[3],k.y)}8192>f[0]&&8192>f[1]&&0<=f[2]&&0<=f[3]&&this.grid.insert(b,f[0],f[1],f[2],f[3])}};Da.prototype.loadVTLayers=function(){return this.vtLayers||(this.vtLayers=(new Pe.VectorTile(new tb(this.rawTileData))).layers,this.sourceLayerCoder=new lg(this.vtLayers?Object.keys(this.vtLayers).sort():["_geojsonTileLayer"])),this.vtLayers};Da.prototype.query=function(b,a){var c=this;this.loadVTLayers();for(var d=b.params||{},
f=8192/b.tileSize/b.scale,e=Ra(d.filter),k=b.queryGeometry,g=b.queryPadding*f,h=1/0,l=1/0,r=-1/0,n=-1/0,q=0;q<k.length;q++)for(var u=k[q],p=0;p<u.length;p++){var v=u[p];h=Math.min(h,v.x);l=Math.min(l,v.y);r=Math.max(r,v.x);n=Math.max(n,v.y)}var z=this.grid.query(h-g,l-g,r+g,n+g);z.sort(je);var w,A={};g=function(g){g=z[g];if(g!==w){w=g;g=c.featureIndexArray.get(g);var h=null;c.loadMatchingFeature(A,g.bucketIndex,g.sourceLayerIndex,g.featureIndex,e,d.layers,a,function(a,d){return h||(h=vb(a)),d.queryIntersectsFeature(k,
a,h,c.z,b.transform,f,b.posMatrix)})}};for(h=0;h<z.length;h++)g(h);return A};Da.prototype.loadMatchingFeature=function(b,a,c,d,f,e,k,g){a=this.bucketLayerIDs[a];var h;if(!(h=!e))a:{for(h=0;h<e.length;h++)if(0<=a.indexOf(e[h])){h=!0;break a}h=!1}if(h&&(c=this.sourceLayerCoder.decode(c),c=this.vtLayers[c].feature(d),f(new Nb(this.tileID.overscaledZ),c)))for(f=0;f<a.length;f++)if(h=a[f],!(e&&0>e.indexOf(h))){var l=k[h];if(l&&(!g||g(c,l))){var r=new Te(c,this.z,this.x,this.y);r.layer=l.serialize();l=
b[h];void 0===l&&(l=b[h]=[]);l.push({featureIndex:d,feature:r})}}};Da.prototype.lookupSymbolFeatures=function(b,a,c,d,f,e){var k={};this.loadVTLayers();d=Ra(d);for(var g=0;g<b.length;g+=1)this.loadMatchingFeature(k,a,c,b[g],d,f,e);return k};Da.prototype.hasLayer=function(b){for(var a=0,c=this.bucketLayerIDs;a<c.length;a+=1)for(var d=0,f=c[a];d<f.length;d+=1)if(b===f[d])return!0;return!1};Ca("FeatureIndex",Da,{omit:["rawTileData","sourceLayerCoder"]});var Qb={horizontal:1,vertical:2,horizontalOnly:3},
Pd={9:!0,10:!0,11:!0,12:!0,13:!0,32:!0},Pg={10:!0,32:!0,38:!0,40:!0,41:!0,43:!0,45:!0,47:!0,173:!0,183:!0,8203:!0,8208:!0,8211:!0,8231:!0};b.commonjsGlobal=Be;b.unwrapExports=e;b.createCommonjsModule=g;b.default=self;b.default$1=$b;b.getJSON=function(b,a){var c=t(b);return c.setRequestHeader("Accept","application/json"),c.onerror=function(){a(Error(c.statusText))},c.onload=function(){if(200<=c.status&&300>c.status&&c.response){try{var d=JSON.parse(c.response)}catch(ch){return a(ch)}a(null,d)}else 401===
c.status&&b.url.match(/mapbox.com/)?a(new Ce(c.statusText+": you may have provided an invalid Mapbox access token. See https://www.mapbox.com/api-documentation/#access-tokens",c.status,b.url)):a(new Ce(c.statusText,c.status,b.url))},c.send(),c};b.getImage=function(b,a){return Wd(b,function(b,c){if(b)a(b);else if(c){var d=new self.Image,f=self.URL||self.webkitURL;d.onload=function(){a(null,d);f.revokeObjectURL(d.src)};b=new self.Blob([new Uint8Array(c.data)],{type:"image/png"});d.cacheControl=c.cacheControl;
d.expires=c.expires;d.src=c.data.byteLength?f.createObjectURL(b):"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAAC0lEQVQYV2NgAAIAAAUAAarVyFEAAAAASUVORK5CYII\x3d"}})};b.ResourceType=bf;b.RGBAImage=pd;b.default$2=jg;b.ImagePosition=ne;b.getArrayBuffer=Wd;b.default$3=function(b){return(new tb(b)).readFields(Vd,[])};b.default$4=Ga;b.asyncAll=function(b,a,c){if(!b.length)return c(null,[]);var d=b.length,f=Array(b.length),e=null;b.forEach(function(b,k){a(b,function(b,a){b&&(e=b);
f[k]=a;0==--d&&c(e,f)})})};b.AlphaImage=Od;b.default$5=ra;b.endsWith=n;b.extend=k;b.sphericalToCartesian=function(b){var a=b[0],c=b[1];b=b[2];return c+=90,c*=Math.PI/180,b*=Math.PI/180,{x:a*Math.cos(c)*Math.sin(b),y:a*Math.sin(c)*Math.sin(b),z:a*Math.cos(b)}};b.Evented=ac;b.validateStyle=nb;b.validateLight=th;b.emitValidationErrors=La;b.default$6=cb;b.number=R;b.Properties=sc;b.Transitionable=id;b.Transitioning=me;b.PossiblyEvaluated=nf;b.DataConstantProperty=Ma;b.warnOnce=w;b.uniqueId=function(){return ed++};
b.default$7=oe;b.pick=function(b,a){for(var c={},d=0;d<a.length;d++){var f=a[d];f in b&&(c[f]=b[f])}return c};b.wrap=function(b,a,c){var d=c-a;b=((b-a)%d+d)%d+a;return b===a?c:b};b.clamp=c;b.Event=ke;b.ErrorEvent=Gb;b.OverscaledTileID=wb;b.default$8=8192;b.createLayout=mb;b.getCoordinatesCenter=function(b){for(var a=1/0,c=1/0,d=-1/0,f=-1/0,e=0;e<b.length;e++)a=Math.min(a,b[e].column),c=Math.min(c,b[e].row),d=Math.max(d,b[e].column),f=Math.max(f,b[e].row);b=Math.max(0,Math.floor(-Math.log(Math.max(d-
a,f-c))/Math.LN2));return(new Jc((a+d)/2,(c+f)/2,0)).zoomTo(b)};b.CanonicalTileID=Td;b.RasterBoundsArray=pf;b.getVideo=function(b,a){var c=self.document.createElement("video");c.onloadstart=function(){a(null,c)};for(var d=0;d<b.length;d++){var f=self.document.createElement("source");var e=b[d];var k=void 0;(k=self.document.createElement("a")).href=e;k.protocol===self.document.location.protocol&&k.host===self.document.location.host||(c.crossOrigin="Anonymous");f.src=b[d];c.appendChild(f)}return c};
b.default$9=Fa;b.bindAll=r;b.default$10=function Vc(b,a){if(Array.isArray(b)){if(!Array.isArray(a)||b.length!==a.length)return!1;for(var c=0;c<b.length;c++)if(!Vc(b[c],a[c]))return!1;return!0}if("object"==typeof b&&null!==b&&null!==a){if("object"!=typeof a||Object.keys(b).length!==Object.keys(a).length)return!1;for(c in b)if(!Vc(b[c],a[c]))return!1;return!0}return b===a};b.parseCacheControl=function(b){var a={};if(b.replace(/(?:^|(?:\s*,\s*))([^\x00-\x20\(\)<>@,;:\\"\/\[\]\?=\{\}\x7F]+)(?:=(?:([^\x00-\x20\(\)<>@,;:\\"\/\[\]\?=\{\}\x7F]+)|(?:"((?:[^"\\]|\\.)*)")))?/g,
function(b,c,d,f){b=d||f;return a[c]=!b||b.toLowerCase(),""}),a["max-age"])b=parseInt(a["max-age"],10),isNaN(b)?delete a["max-age"]:a["max-age"]=b;return a};b.default$11=Da;b.default$12=Te;b.default$13=Ra;b.default$14=ab;b.CollisionBoxArray=Eg;b.default$15=Ob;b.TriangleIndexArray=nd;b.default$16=Nb;b.default$17=Jc;b.keysDifference=function(b,a){var c=[],d;for(d in b)d in a||c.push(d);return c};b.default$18="type source source-layer minzoom maxzoom filter layout".split(" ");b.mat4=Vg;b.vec4=Ig;b.getSizeData=
Cd;b.evaluateSizeForFeature=function(b,a,c){return"source"===b.functionType?c.lowerSize/10:"composite"===b.functionType?R(c.lowerSize/10,c.upperSize/10,a.uSizeT):a.uSize};b.evaluateSizeForZoom=function(b,a,d){if("constant"===b.functionType)return{uSizeT:0,uSize:b.layoutSize};if("source"===b.functionType)return{uSizeT:0,uSize:0};if("camera"===b.functionType){var f=b.zoomRange,e=b.sizeRange;b=c(ya(b.propertyValue,d.specification).interpolationFactor(a,f.min,f.max),0,1);return{uSizeT:0,uSize:e.min+b*
(e.max-e.min)}}e=b.zoomRange;return{uSizeT:c(ya(b.propertyValue,d.specification).interpolationFactor(a,e.min,e.max),0,1),uSize:0}};b.addDynamicAttributes=Ic;b.default$19=sb;b.WritingMode=Qb;b.multiPolygonIntersectsBufferedPoint=Qd;b.multiPolygonIntersectsMultiPolygon=Bb;b.multiPolygonIntersectsBufferedMultiLine=yc;b.polygonIntersectsPolygon=function(b,a){for(var c=0;c<b.length;c++)if(tc(a,b[c]))return!0;for(c=0;c<a.length;c++)if(tc(b,a[c]))return!0;return!!Cc(b,a)};b.distToSegmentSquared=Wc;b.default$20=
Ne;b.default$21=ld;b.default$22=function(b){return new Mg[b.type](b)};b.clone=m;b.filterObject=A;b.mapObject=p;b.registerForPluginAvailability=function(b){return Fe?b({pluginURL:Fe,completionCallback:Ag}):Sf.once("pluginAvailable",b),b};b.evented=Sf;b.default$23=Rf;b.default$24=Mc;b.PosArray=Je;b.UnwrappedTileID=Se;b.ease=af;b.bezier=f;b.setRTLTextPlugin=function(b,a){if(jf)throw Error("setRTLTextPlugin cannot be called multiple times.");jf=!0;Fe=b;Ag=function(b){b?(jf=!1,Fe=null,a&&a(b)):kf=!0};
Sf.fire(new ke("pluginAvailable",{pluginURL:Fe,completionCallback:Ag}))};b.values=function(b){var a=[],c;for(c in b)a.push(b[c]);return a};b.default$25=Ng;b.register=Ca;b.GLYPH_PBF_BORDER=3;b.shapeText=function(b,a,c,d,f,e,k,g,h,l){b=b.trim();l===Qb.vertical&&(b=function(b){for(var a="",c=0;c<b.length;c++){var d=b.charCodeAt(c+1)||null,f=b.charCodeAt(c-1)||null;d&&zb(d)&&!Rc[b[c+1]]||f&&zb(f)&&!Rc[b[c-1]]||!Rc[b[c]]?a+=b[c]:a+=Rc[b[c]]}return a}(b));var r=[];g={positionedGlyphs:r,text:b,top:g[1],
bottom:g[1],left:g[0],right:g[0],writingMode:l};var n=Ge.processBidirectionalText;return function(b,a,c,d,f,e,k,g,h){var l=0,r=-17,n=0,q=b.positionedGlyphs;e="right"===e?1:"left"===e?0:.5;for(var u=0;u<c.length;u+=1){var p=c[u];if((p=p.trim()).length){for(var v=q.length,z=0;z<p.length;z++){var w=p.charCodeAt(z),A=a[w];A&&(wc(w)&&k!==Qb.horizontal?(q.push({glyph:w,x:l,y:0,vertical:!0}),l+=h+g):(q.push({glyph:w,x:l,y:r,vertical:!1}),l+=A.metrics.advance+g))}if(q.length!==v&&(n=Math.max(l-g,n),l=q,p=
q.length-1,e&&(z=a[l[p].glyph])))for(z=(l[p].x+z.metrics.advance)*e;v<=p;v++)l[v].x-=z;l=0}r+=d}f=Ae(f);a=f.horizontalAlign;f=f.verticalAlign;e=(e-a)*n;k=(-f*c.length+.5)*d;for(g=0;g<q.length;g++)q[g].x+=e,q[g].y+=k;!0;c=c.length*d;b.top+=-f*c;b.bottom=b.top+c;b.left+=-a*n;b.right=b.left+n}(g,a,n?n(b,Lf(b,k,c,a)):function(b,a){for(var c=[],d=0,f=0;f<a.length;f+=1){var e=a[f];c.push(b.substring(d,e));d=e}return d<b.length&&c.push(b.substring(d,b.length)),c}(b,Lf(b,k,c,a)),d,f,e,l,k,h),!!r.length&&
g};b.shapeIcon=function(b,a,c){var d=Ae(c);c=a[0]-b.displaySize[0]*d.horizontalAlign;a=a[1]-b.displaySize[1]*d.verticalAlign;return{image:b,top:a,bottom:a+b.displaySize[1],left:c,right:c+b.displaySize[0]}};b.allowsVerticalWritingMode=qd;b.allowsLetterSpacing=function(b){for(var a=0;a<b.length;a+=1){var c=b[a].charCodeAt(0);if(Ga.Arabic(c)||Ga["Arabic Supplement"](c)||Ga["Arabic Extended-A"](c)||Ga["Arabic Presentation Forms-A"](c)||Ga["Arabic Presentation Forms-B"](c))return!1}return!0};b.default$26=
Mb;b.default$27=lg;b.default$28=qg;b.default$29=Pe;b.default$30=tb;b.default$31=xd;b.__moduleExports=Pe;b.default$32=$b;b.__moduleExports$1=tb;b.plugin=Ge});g(["./chunk1.js"],function(b){function a(b){var c=typeof b;if("number"===c||"boolean"===c||"string"===c||null==b)return JSON.stringify(b);if(Array.isArray(b)){c="[";for(var d=0;d<b.length;d+=1)c+=a(b[d])+",";return c+"]"}c=Object.keys(b).sort();d="{";for(var f=0;f<c.length;f++)d+=JSON.stringify(c[f])+":"+a(b[c[f]])+",";return d+"}"}function e(a,
c,d,f,e,k,g,h,l){e=Math.max(f?f.right-f.left:0,e?e.right-e.left:0);var r=0===a[0].x||a[0].x===l||0===a[0].y||a[0].y===l;return c-e*g<c/4&&(c=e*g+c/4),function vb(a,c,d,f,e,k,g,h,l){for(var r=k/2,n=0,q=0;q<a.length-1;q++)n+=a[q].dist(a[q+1]);q=0;c-=d;for(var u=[],p=0;p<a.length-1;p++){for(var v=a[p],z=a[p+1],w=v.dist(z),A=z.angleTo(v);c+d<q+w;){var m=((c+=d)-q)/w,x=b.number(v.x,z.x,m);m=b.number(v.y,z.y,m);if(0<=x&&x<l&&0<=m&&m<l&&0<=c-r&&c+r<=n){x=new b.default$25(x,m,A,p);x._round();if(m=f){a:{m=
a;var y=k,t=f,J=e;if(void 0!==x.segment){for(var B=x,E=x.segment+1,I=0;I>-y/2;){if(0>--E){m=!1;break a}I-=m[E].dist(B);B=m[E]}I+=m[E].dist(m[E+1]);E++;B=[];for(var C=0;I<y/2;){var F=m[E-1],D=m[E],K=m[E+1];if(!K){m=!1;break a}F=F.angleTo(D)-D.angleTo(K);F=Math.abs((F+3*Math.PI)%(2*Math.PI)-Math.PI);B.push({distance:I,angleDelta:F});for(C+=F;I-B[0].distance>t;)C-=B.shift().angleDelta;if(C>J){m=!1;break a}E++;I+=D.dist(K)}}m=!0}m=!m}m||u.push(x)}}q+=w}h||u.length||g||(u=vb(a,q/2,d,f,e,k,g,!0,l));return u}(a,
r?c/2*h%c:(e/2+2*k)*g*h%c,c,f?.6*k*g:0,d,e*g,r,!1,l)}function g(b,a){if(!(this instanceof g))return new g(b,a);if(this.data=b||[],this.length=this.data.length,this.compare=a||d,0<this.length)for(b=(this.length>>1)-1;0<=b;b--)this._down(b)}function d(b,a){return b<a?-1:b>a?1:0}function f(a,d,f){void 0===d&&(d=1);void 0===f&&(f=!1);for(var e=1/0,g=1/0,h=-1/0,l=-1/0,r=a[0],n=0;n<r.length;n++){var q=r[n];(!n||q.x<e)&&(e=q.x);(!n||q.y<g)&&(g=q.y);(!n||q.x>h)&&(h=q.x);(!n||q.y>l)&&(l=q.y)}q=Math.min(h-
e,l-g);r=q/2;n=new aa(null,c);if(0===q)return new b.default$1(e,g);for(;e<h;e+=q)for(var u=g;u<l;u+=q)n.push(new k(e+r,u+r,r,a));l=h=g=0;e=a[0];q=0;u=e.length;for(var p=u-1;q<u;p=q++){var v=e[q];p=e[p];var z=v.x*p.y-p.x*v.y;h+=(v.x+p.x)*z;l+=(v.y+p.y)*z;g+=3*z}g=new k(h/g,l/g,0,a);for(h=n.length;n.length;)l=n.pop(),(l.d>g.d||!g.d)&&(g=l,f&&console.log("found best %d after %d probes",Math.round(1E4*l.d)/1E4,h)),l.max-g.d<=d||(r=l.h/2,n.push(new k(l.p.x-r,l.p.y-r,r,a)),n.push(new k(l.p.x+r,l.p.y-r,
r,a)),n.push(new k(l.p.x-r,l.p.y+r,r,a)),n.push(new k(l.p.x+r,l.p.y+r,r,a)),h+=4);return f&&(console.log("num probes: "+h),console.log("best distance: "+g.d)),g.p}function c(b,a){return a.max-b.max}function k(a,c,d,f){this.p=new b.default$1(a,c);this.h=d;a=this.p;c=!1;d=1/0;for(var e=0;e<f.length;e++)for(var k=f[e],g=0,h=k.length,l=h-1;g<h;l=g++){var r=k[g];l=k[l];r.y>a.y!=l.y>a.y&&a.x<(l.x-r.x)*(a.y-r.y)/(l.y-r.y)+r.x&&(c=!c);d=Math.min(d,b.distToSegmentSquared(a,r,l))}this.d=(c?1:-1)*Math.sqrt(d);
this.max=this.d+this.h*Math.SQRT2}function h(a,c,d,f,e,k){a.createArrays();a.symbolInstances=[];a.tilePixelRatio=b.default$8/(512*a.overscaling);a.compareText={};a.iconsNeedLinear=!1;var g=a.layers[0].layout,h=a.layers[0]._unevaluatedLayout._values,l={};if("composite"===a.textSizeData.functionType){var r=a.textSizeData.zoomRange,q=r.max;l.compositeTextSizes=[h["text-size"].possiblyEvaluate(new b.default$16(r.min)),h["text-size"].possiblyEvaluate(new b.default$16(q))]}"composite"===a.iconSizeData.functionType&&
(r=a.iconSizeData.zoomRange,q=r.max,l.compositeIconSizes=[h["icon-size"].possiblyEvaluate(new b.default$16(r.min)),h["icon-size"].possiblyEvaluate(new b.default$16(q))]);l.layoutTextSize=h["text-size"].possiblyEvaluate(new b.default$16(a.zoom+1));l.layoutIconSize=h["icon-size"].possiblyEvaluate(new b.default$16(a.zoom+1));l.textMaxSize=h["text-size"].possiblyEvaluate(new b.default$16(18));h=24*g.get("text-line-height");r="map"===g.get("text-rotation-alignment")&&"line"===g.get("symbol-placement");
q=g.get("text-keep-upright");for(var u=0,p=a.features;u<p.length;u+=1){var v=p[u],z=g.get("text-font").evaluate(v).join(","),w=c[z]||{};z=d[z]||{};var A={},m=v.text;if(m){var x=g.get("text-offset").evaluate(v).map(function(b){return 24*b}),y=24*g.get("text-letter-spacing").evaluate(v);y=b.allowsLetterSpacing(m)?y:0;var t=g.get("text-anchor").evaluate(v),J=g.get("text-justify").evaluate(v),B="line"!==g.get("symbol-placement")?24*g.get("text-max-width").evaluate(v):0;A.horizontal=b.shapeText(m,w,B,
h,t,J,y,x,24,b.WritingMode.horizontal);b.allowsVerticalWritingMode(m)&&r&&q&&(A.vertical=b.shapeText(m,w,B,h,t,J,y,x,24,b.WritingMode.vertical))}w=void 0;v.icon&&(m=f[v.icon])&&(w=b.shapeIcon(e[v.icon],g.get("icon-offset").evaluate(v),g.get("icon-anchor").evaluate(v)),void 0===a.sdfIcons?a.sdfIcons=m.sdf:a.sdfIcons!==m.sdf&&b.warnOnce("Style sheet warning: Cannot mix SDF and non-SDF icons in one buffer"),m.pixelRatio!==a.pixelRatio?a.iconsNeedLinear=!0:0!==g.get("icon-rotate").constantOr(1)&&(a.iconsNeedLinear=
!0));(A.horizontal||w)&&n(a,v,A,w,z,l)}k&&a.generateCollisionDebugBuffers()}function n(a,c,d,k,g,h){var l=h.layoutTextSize.evaluate(c),r=h.layoutIconSize.evaluate(c),n=h.textMaxSize.evaluate(c);void 0===n&&(n=l);var q=a.layers[0].layout,u=q.get("text-offset").evaluate(c),v=q.get("icon-offset").evaluate(c),z=l/24*a.tilePixelRatio;l=a.tilePixelRatio*n/24;var w=a.tilePixelRatio*r;n=a.tilePixelRatio*q.get("symbol-spacing");var m=q.get("text-padding")*a.tilePixelRatio,x=q.get("icon-padding")*a.tilePixelRatio,
y=q.get("text-max-angle")/180*Math.PI,t="map"===q.get("text-rotation-alignment")&&"line"===q.get("symbol-placement"),J="map"===q.get("icon-rotation-alignment")&&"line"===q.get("symbol-placement"),B=n/2;r=function(f,e){0>e.x||e.x>=b.default$8||0>e.y||e.y>=b.default$8||a.symbolInstances.push(function(a,c,d,f,e,k,g,h,l,r,n,q,u,v,z,w,A,m,x,y,t){var J,B=a.addToLineVertexArray(c,d),E=0,I=0,C=0,F=f.horizontal?f.horizontal.text:"",D=[];f.horizontal&&(J=new Ia(g,d,c,h,l,r,f.horizontal,n,q,u,a.overscaling),
I+=p(a,c,f.horizontal,k,u,x,v,B,f.vertical?b.WritingMode.horizontal:b.WritingMode.horizontalOnly,D,y,t),f.vertical&&(C+=p(a,c,f.vertical,k,u,x,v,B,b.WritingMode.vertical,D,y,t)));n=J?J.boxStartIndex:a.collisionBoxArray.length;J=J?J.boxEndIndex:a.collisionBoxArray.length;if(e){y=f.horizontal;E=e.image;var K=k.layout;var L=e.top-1/E.pixelRatio;u=e.left-1/E.pixelRatio;q=e.bottom+1/E.pixelRatio;var G=e.right+1/E.pixelRatio;if("none"!==K.get("icon-text-fit")&&y){f=G-u;var H=q-L;L=K.get("text-size").evaluate(x)/
24;q=y.left*L;u=y.top*L;var M=y.right*L-q,O=y.bottom*L-u,N=K.get("icon-text-fit-padding")[0];var R=K.get("icon-text-fit-padding")[1];y=K.get("icon-text-fit-padding")[2];L=K.get("icon-text-fit-padding")[3];G="width"===K.get("icon-text-fit")?.5*(O-H):0;var T="height"===K.get("icon-text-fit")?.5*(M-f):0;M="width"===K.get("icon-text-fit")||"both"===K.get("icon-text-fit")?M:f;H="height"===K.get("icon-text-fit")||"both"===K.get("icon-text-fit")?O:H;K=new b.default$1(q+T-L,u+G-N);f=new b.default$1(q+T+R+
M,u+G-N);R=new b.default$1(q+T+R+M,u+G+y+H);q=new b.default$1(q+T-L,u+G+y+H)}else K=new b.default$1(u,L),f=new b.default$1(G,L),R=new b.default$1(G,q),q=new b.default$1(u,q);if(y=k.layout.get("icon-rotate").evaluate(x)*Math.PI/180)u=Math.sin(y),y=Math.cos(y),u=[y,-u,u,y],K._matMult(u),f._matMult(u),q._matMult(u),R._matMult(u);f=[{tl:K,tr:f,bl:q,br:R,tex:E.paddedRect,writingMode:void 0,glyphOffset:[0,0]}];K=new Ia(g,d,c,h,l,r,e,z,w,!1,a.overscaling);E=4*f.length;e=a.iconSizeData;g=null;"source"===
e.functionType?g=[10*k.layout.get("icon-size").evaluate(x)]:"composite"===e.functionType&&(g=[10*t.compositeIconSizes[0].evaluate(x),10*t.compositeIconSizes[1].evaluate(x)]);a.addSymbols(a.icon,f,g,m,A,x,!1,c,B.lineStartIndex,B.lineLength)}k=K?K.boxStartIndex:a.collisionBoxArray.length;A=K?K.boxEndIndex:a.collisionBoxArray.length;a.glyphOffsetArray.length>=b.default$14.MAX_GLYPHS&&b.warnOnce("Too many glyphs being rendered in a tile. See https://github.com/mapbox/mapbox-gl-js/issues/2907");a=new xa;
t=new xa;return{key:F,textBoxStartIndex:n,textBoxEndIndex:J,iconBoxStartIndex:k,iconBoxEndIndex:A,textOffset:v,iconOffset:m,anchor:c,line:d,featureIndex:h,feature:x,numGlyphVertices:I,numVerticalGlyphVertices:C,numIconVertices:E,textOpacityState:a,iconOpacityState:t,isDuplicate:!1,placedTextSymbolIndices:D,crossTileID:0}}(a,e,f,d,k,a.layers[0],a.collisionBoxArray,c.index,c.sourceLayerIndex,a.index,z,m,t,u,w,x,J,v,c,g,h))};if("line"===q.get("symbol-placement")){q=0;for(var E=function(a,c,d,f,e){for(var k=
[],g=0;g<a.length;g++)for(var h=a[g],l=void 0,r=0;r<h.length-1;r++){var n=h[r],q=h[r+1];n.x<c&&q.x<c||(n.x<c?n=(new b.default$1(c,n.y+(c-n.x)/(q.x-n.x)*(q.y-n.y)))._round():q.x<c&&(q=(new b.default$1(c,n.y+(c-n.x)/(q.x-n.x)*(q.y-n.y)))._round()),n.y<d&&q.y<d||(n.y<d?n=(new b.default$1(n.x+(d-n.y)/(q.y-n.y)*(q.x-n.x),d))._round():q.y<d&&(q=(new b.default$1(n.x+(d-n.y)/(q.y-n.y)*(q.x-n.x),d))._round()),n.x>=f&&q.x>=f||(n.x>=f?n=(new b.default$1(f,n.y+(f-n.x)/(q.x-n.x)*(q.y-n.y)))._round():q.x>=f&&(q=
(new b.default$1(f,n.y+(f-n.x)/(q.x-n.x)*(q.y-n.y)))._round()),n.y>=e&&q.y>=e||(n.y>=e?n=(new b.default$1(n.x+(e-n.y)/(q.y-n.y)*(q.x-n.x),e))._round():q.y>=e&&(q=(new b.default$1(n.x+(e-n.y)/(q.y-n.y)*(q.x-n.x),e))._round()),l&&n.equals(l[l.length-1])||(l=[n],k.push(l)),l.push(q)))))}return k}(c.geometry,0,0,b.default$8,b.default$8);q<E.length;q+=1)for(var I=E[q],C=0,F=e(I,n,y,d.vertical||d.horizontal,k,24,l,a.overscaling,b.default$8);C<F.length;C+=1){var D=F[C],K=d.horizontal;K&&A(a,K.text,B,D)||
r(I,D)}}else if("Polygon"===c.type)for(l=0,n=b.default$26(c.geometry,0);l<n.length;l+=1)y=n[l],B=f(y,16),r(y[0],new b.default$25(B.x,B.y,0));else if("LineString"===c.type)for(l=0,n=c.geometry;l<n.length;l+=1)y=n[l],r(y,new b.default$25(y[0].x,y[0].y,0));else if("Point"===c.type)for(l=0,n=c.geometry;l<n.length;l+=1)for(y=0,B=n[l];y<B.length;y+=1)q=B[y],r([q],new b.default$25(q.x,q.y,0))}function p(a,c,d,f,e,k,g,h,l,r,n,q){d=function(a,c,d,f,e,k){a=d.layout.get("text-rotate").evaluate(e)*Math.PI/180;
d=d.layout.get("text-offset").evaluate(e).map(function(b){return 24*b});e=c.positionedGlyphs;for(var g=[],h=0;h<e.length;h++){var l=e[h],r=k[l.glyph];if(r){var n=r.rect;if(n){var q=b.GLYPH_PBF_BORDER+1,u=r.metrics.advance/2,p=f?[l.x+u,l.y]:[0,0],v=f?[0,0]:[l.x+u+d[0],l.y+d[1]],z=r.metrics.left-q-u+v[0];q=-r.metrics.top-q+v[1];v=z+n.w;var w=q+n.h;r=new b.default$1(z,q);q=new b.default$1(v,q);z=new b.default$1(z,w);v=new b.default$1(v,w);f&&l.vertical&&(l=new b.default$1(-u,u),u=-Math.PI/2,w=new b.default$1(5,
0),r._rotateAround(u,l)._add(w),q._rotateAround(u,l)._add(w),z._rotateAround(u,l)._add(w),v._rotateAround(u,l)._add(w));a&&(l=Math.sin(a),u=Math.cos(a),l=[u,-l,l,u],r._matMult(l),q._matMult(l),z._matMult(l),v._matMult(l));g.push({tl:r,tr:q,bl:z,br:v,tex:n,writingMode:c.writingMode,glyphOffset:p})}}}return g}(0,d,f,e,k,n);n=a.textSizeData;var u=null;return"source"===n.functionType?u=[10*f.layout.get("text-size").evaluate(k)]:"composite"===n.functionType&&(u=[10*q.compositeTextSizes[0].evaluate(k),
10*q.compositeTextSizes[1].evaluate(k)]),a.addSymbols(a.text,d,u,g,e,k,l,c,h.lineStartIndex,h.lineLength),r.push(a.text.placedSymbolArray.length-1),4*d.length}function A(b,a,c,d){b=b.compareText;if(a in b)for(var f=b[a],e=f.length-1;0<=e;e--){if(d.dist(f[e])<c)return!0}else b[a]=[];return b[a].push(d),!1}function m(a,c){c=new b.default$16(c);for(var d=0;d<a.length;d+=1)a[d].recalculate(c)}function w(a,c){var d=b.getArrayBuffer(a.request,function(a,d){a?c(a):d&&c(null,{vectorTile:new b.default$29.VectorTile(new b.default$30(d.data)),
rawData:d.data,cacheControl:d.cacheControl,expires:d.expires})});return function(){d.abort();c()}}function x(b){var a=0;if(b&&0<b.length){a+=Math.abs(t(b[0]));for(var c=1;c<b.length;c++)a-=Math.abs(t(b[c]))}return a}function t(b){var a,c,d,f,e=0,k=b.length;if(2<k){for(f=0;f<k;f++){f===k-2?(a=k-2,c=k-1,d=0):f===k-1?(a=k-1,c=0,d=1):(a=f,c=f+1,d=f+2);var g=b[a];var h=b[c];e+=(b[d][0]*Math.PI/180-g[0]*Math.PI/180)*Math.sin(h[1]*Math.PI/180)}e=e*rb.RADIUS*rb.RADIUS/2}return e}function B(b,a){return function(c){return b(c,
a)}}function C(b,a){a=!!a;b[0]=D(b[0],a);for(var c=1;c<b.length;c++)b[c]=D(b[c],!a);return b}function D(b,a){return 0<=Eb.ring(b)===a?b:b.reverse()}function G(b,a){this.options=a||{};this.features=b;this.length=b.length}function H(b,a){this.id="number"==typeof b.id?b.id:void 0;this.type=b.type;this.rawGeometry=1===b.type?[b.geometry]:b.geometry;this.properties=b.tags;this.extent=a||4096}function E(a){var c=new b.__moduleExports$1,d;for(d in a.layers)c.writeMessage(3,K,a.layers[d]);return c.finish()}
function K(b,a){var c;a.writeVarintField(15,b.version||1);a.writeStringField(1,b.name||"");a.writeVarintField(5,b.extent||4096);var d={keys:[],values:[],keycache:{},valuecache:{}};for(c=0;c<b.length;c++)d.feature=b.feature(c),a.writeMessage(2,I,d);b=d.keys;for(c=0;c<b.length;c++)a.writeStringField(3,b[c]);d=d.values;for(c=0;c<d.length;c++)a.writeMessage(4,M,d[c])}function I(b,a){var c=b.feature;void 0!==c.id&&a.writeVarintField(1,c.id);a.writeMessage(2,J,b);a.writeVarintField(3,c.type);a.writeMessage(4,
L,c)}function J(b,a){var c=b.feature,d=b.keys,f=b.values,e=b.keycache;b=b.valuecache;for(var k in c.properties){var g=e[k];void 0===g&&(d.push(k),g=d.length-1,e[k]=g);a.writeVarint(g);g=c.properties[k];var h=typeof g;"string"!==h&&"boolean"!==h&&"number"!==h&&(g=JSON.stringify(g));h=h+":"+g;var l=b[h];void 0===l&&(f.push(g),l=f.length-1,b[h]=l);a.writeVarint(l)}}function L(b,a){var c=b.loadGeometry();b=b.type;for(var d=0,f=0,e=c.length,k=0;k<e;k++){var g=c[k],h=1;1===b&&(h=g.length);a.writeVarint((h<<
3)+1);h=3===b?g.length-1:g.length;for(var l=0;l<h;l++){1===l&&1!==b&&a.writeVarint((h-1<<3)+2);var r=g[l].x-d,n=g[l].y-f;a.writeVarint(r<<1^r>>31);a.writeVarint(n<<1^n>>31);d+=r;f+=n}3===b&&a.writeVarint(7)}}function M(b,a){var c=typeof b;"string"===c?a.writeStringField(1,b):"boolean"===c?a.writeBooleanField(7,b):"number"===c&&(0!=b%1?a.writeDoubleField(3,b):0>b?a.writeSVarintField(6,b):a.writeVarintField(5,b))}function N(b,a,c,d){O(b,c,d);O(a,2*c,2*d);O(a,2*c+1,2*d+1)}function O(b,a,c){var d=b[a];
b[a]=b[c];b[c]=d}function R(b,a,c,d,f){a=a||T;c=c||P;f=f||Array;this.nodeSize=d||64;this.points=b;this.ids=new f(b.length);this.coords=new f(2*b.length);for(d=0;d<b.length;d++)this.ids[d]=d,this.coords[2*d]=a(b[d]),this.coords[2*d+1]=c(b[d]);qb(this.ids,this.coords,this.nodeSize,0,this.ids.length-1,0)}function T(b){return b[0]}function P(b){return b[1]}function S(b){this.options=W(Object.create(this.options),b);this.trees=Array(this.options.maxZoom+1)}function ba(b,a){b=b.geometry.coordinates;return{x:b[0]/
360+.5,y:Y(b[1]),zoom:1/0,id:a,parentId:-1}}function da(b){return{type:"Feature",properties:ca(b),geometry:{type:"Point",coordinates:[(d=b.x,360*(d-.5)),(a=b.y,c=(180-360*a)*Math.PI/180,360*Math.atan(Math.exp(c))/Math.PI-90)]}};var a,c,d}function ca(b){var a=b.numPoints,c=1E4<=a?Math.round(a/1E3)+"k":1E3<=a?Math.round(a/100)/10+"k":a;return W(W({},b.properties),{cluster:!0,cluster_id:b.id,point_count:a,point_count_abbreviated:c})}function Y(b){b=Math.sin(b*Math.PI/180);b=.5-.25*Math.log((1+b)/(1-
b))/Math.PI;return 0>b?0:1<b?1:b}function W(b,a){for(var c in a)b[c]=a[c];return b}function ea(b){return b.x}function U(b){return b.y}function na(b,a,c,d){b={id:b||null,type:a,geometry:c,tags:d,minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0};a=b.geometry;c=b.type;if("Point"===c||"MultiPoint"===c||"LineString"===c)X(b,a);else if("Polygon"===c||"MultiLineString"===c)for(c=0;c<a.length;c++)X(b,a[c]);else if("MultiPolygon"===c)for(c=0;c<a.length;c++)for(d=0;d<a[c].length;d++)X(b,a[c][d]);return b}function X(b,
a){for(var c=0;c<a.length;c+=3)b.minX=Math.min(b.minX,a[c]),b.minY=Math.min(b.minY,a[c+1]),b.maxX=Math.max(b.maxX,a[c]),b.maxY=Math.max(b.maxY,a[c+1])}function ha(b,a,c){if(a.geometry){var d=a.geometry.coordinates,f=a.geometry.type,e=Math.pow(c.tolerance/((1<<c.maxZoom)*c.extent),2),k=[];if("Point"===f)fa(d,k);else if("MultiPoint"===f)for(var g=0;g<d.length;g++)fa(d[g],k);else if("LineString"===f)oa(d,k,e,!1);else if("MultiLineString"===f)if(c.lineMetrics)for(g=0;g<d.length;)return k=[],oa(d[g],k,
e,!1),void b.push(na(a.id,"LineString",k,a.properties));else ua(d,k,e,!1);else if("Polygon"===f)ua(d,k,e,!0);else{if("MultiPolygon"!==f){if("GeometryCollection"===f){for(g=0;g<a.geometry.geometries.length;g++)ha(b,{id:a.id,geometry:a.geometry.geometries[g],properties:a.properties},c);return}throw Error("Input data is not a valid GeoJSON object.");}for(g=0;g<d.length;g++)c=[],ua(d[g],c,e,!0),k.push(c)}b.push(na(a.id,f,k,a.properties))}}function fa(b,a){a.push(b[0]/360+.5);a.push(Z(b[1]));a.push(0)}
function oa(b,a,c,d){for(var f,e,k=0,g=0;g<b.length;g++){var h=b[g][0]/360+.5,l=Z(b[g][1]);a.push(h);a.push(l);a.push(0);0<g&&(k+=d?(f*l-h*e)/2:Math.sqrt(Math.pow(h-f,2)+Math.pow(l-e,2)));f=h;e=l}b=a.length-3;a[2]=1;(function wc(b,a,c,d){for(var f,e=d,k=b[a],g=b[a+1],h=b[c],l=b[c+1],r=a+3;r<c;r+=3){var n=b[r];var q=b[r+1],u=k,p=g,v=h-u,z=l-p;if(0!==v||0!==z){var w=((n-u)*v+(q-p)*z)/(v*v+z*z);1<w?(u=h,p=l):0<w&&(u+=v*w,p+=z*w)}n=(v=n-u)*v+(z=q-p)*z;n>e&&(f=r,e=n)}e>d&&(3<f-a&&wc(b,a,f,d),b[f+2]=e,
3<c-f&&wc(b,f,c,d))})(a,0,b,c);a[b+2]=1;a.size=Math.abs(k);a.start=0;a.end=a.size}function ua(b,a,c,d){for(var f=0;f<b.length;f++){var e=[];oa(b[f],e,c,d);a.push(e)}}function Z(b){b=Math.sin(b*Math.PI/180);b=.5-.25*Math.log((1+b)/(1-b))/Math.PI;return 0>b?0:1<b?1:b}function qa(b,a,c,d,f,e,k,g){if(d/=a,e>=(c/=a)&&k<=d)return b;if(e>d||k<c)return null;a=[];for(e=0;e<b.length;e++){k=b[e];var h=k.geometry,l=k.type,r=0===f?k.minX:k.minY,n=0===f?k.maxX:k.maxY;if(r>=c&&n<=d)a.push(k);else if(!(r>d||n<c)){r=
[];if("Point"===l||"MultiPoint"===l){n=r;for(var q=c,u=d,p=f,v=0;v<h.length;v+=3){var z=h[v+p];z>=q&&z<=u&&(n.push(h[v]),n.push(h[v+1]),n.push(h[v+2]))}}else if("LineString"===l)sa(h,r,c,d,f,!1,g.lineMetrics);else if("MultiLineString"===l)ia(h,r,c,d,f,!1);else if("Polygon"===l)ia(h,r,c,d,f,!0);else if("MultiPolygon"===l)for(n=0;n<h.length;n++)q=[],ia(h[n],q,c,d,f,!0),q.length&&r.push(q);if(r.length)if(g.lineMetrics&&"LineString"===l)for(n=0;n<r.length;n++)a.push(na(k.id,l,r[n],k.tags));else"LineString"!==
l&&"MultiLineString"!==l||(1===r.length?(l="LineString",r=r[0]):l="MultiLineString"),"Point"!==l&&"MultiPoint"!==l||(l=3===r.length?"Point":"MultiPoint"),a.push(na(k.id,l,r,k.tags))}}return a.length?a:null}function sa(b,a,c,d,f,e,k){for(var g,h,l=V(b),r=0===f?Ka:wa,n=b.start,q=0;q<b.length-3;q+=3){var u=b[q],v=b[q+1],p=b[q+2],z=b[q+3],w=b[q+4],A=0===f?u:v,m=0===f?z:w,y=!1;k&&(g=Math.sqrt(Math.pow(u-z,2)+Math.pow(v-w,2)));if(A<c)m>=c&&(h=r(l,u,v,z,w,c),k&&(l.start=n+g*h));else if(A>d)m<=d&&(h=r(l,
u,v,z,w,d),k&&(l.start=n+g*h));else{var x=l,t=v;x.push(u);x.push(t);x.push(p)}m<c&&A>=c&&(h=r(l,u,v,z,w,c),y=!0);m>d&&A<=d&&(h=r(l,u,v,z,w,d),y=!0);!e&&y&&(k&&(l.end=n+g*h),a.push(l),l=V(b));k&&(n+=g)}p=b.length-3;u=b[p];v=b[p+1];p=b[p+2];(A=0===f?u:v)>=c&&A<=d&&(b=l,c=p,b.push(u),b.push(v),b.push(c));p=l.length-3;e&&3<=p&&(l[p]!==l[0]||l[p+1]!==l[1])&&(e=l,u=l[1],v=l[2],e.push(l[0]),e.push(u),e.push(v));l.length&&a.push(l)}function V(b){var a=[];return a.size=b.size,a.start=b.start,a.end=b.end,a}
function ia(b,a,c,d,f,e){for(var k=0;k<b.length;k++)sa(b[k],a,c,d,f,e,!1)}function Ka(b,a,c,d,f,e){a=(e-a)/(d-a);return b.push(e),b.push(c+(f-c)*a),b.push(1),a}function wa(b,a,c,d,f,e){c=(e-c)/(f-c);return b.push(a+(d-a)*c),b.push(e),b.push(1),c}function Aa(b,a){for(var c=[],d=0;d<b.length;d++){var f=b[d],e=f.type;if("Point"===e||"MultiPoint"===e||"LineString"===e)var k=Ha(f.geometry,a);else if("MultiLineString"===e||"Polygon"===e){k=[];for(var g=0;g<f.geometry.length;g++)k.push(Ha(f.geometry[g],
a))}else if("MultiPolygon"===e)for(k=[],g=0;g<f.geometry.length;g++){for(var h=[],l=0;l<f.geometry[g].length;l++)h.push(Ha(f.geometry[g][l],a));k.push(h)}c.push(na(f.id,e,k,f.tags))}return c}function Ha(b,a){var c=[];c.size=b.size;void 0!==b.start&&(c.start=b.start,c.end=b.end);for(var d=0;d<b.length;d+=3)c.push(b[d]+a,b[d+1],b[d+2]);return c}function Ba(b,a){if(b.transformed)return b;var c,d,f=1<<b.z,e=b.x,k=b.y;for(c=0;c<b.features.length;c++){var g=b.features[c],h=g.geometry;var l=g.type;if(g.geometry=
[],1===l)for(l=0;l<h.length;l+=2)g.geometry.push([Math.round(a*(h[l]*f-e)),Math.round(a*(h[l+1]*f-k))]);else for(l=0;l<h.length;l++){var r=[];for(d=0;d<h[l].length;d+=2)r.push([Math.round(a*(h[l][d]*f-e)),Math.round(a*(h[l][d+1]*f-k))]);g.geometry.push(r)}}return b.transformed=!0,b}function va(b,a,c,d,f,e){var k=d*d;if(0<d&&a.size<(f?k:d))c.numPoints+=a.length/3;else{for(var g=[],h=0;h<a.length;h+=3)(0===d||a[h+2]>k)&&(c.numSimplified++,g.push(a[h]),g.push(a[h+1])),c.numPoints++;if(f){a=d=0;c=g.length;
for(f=c-2;a<c;f=a,a+=2)d+=(g[a]-g[f])*(g[a+1]+g[f+1]);if(0<d===e)for(a=0,c=g.length;a<c/2;a+=2)e=g[a],d=g[a+1],g[a]=g[c-2-a],g[a+1]=g[c-1-a],g[c-2-a]=e,g[c-1-a]=d}b.push(g)}}function pa(b,a){var c=(a=this.options=function(b,a){for(var c in a)b[c]=a[c];return b}(Object.create(this.options),a)).debug;if(c&&console.time("preprocess data"),0>a.maxZoom||24<a.maxZoom)throw Error("maxZoom should be in the 0-24 range");b=function(b,a){var c=[];if("FeatureCollection"===b.type)for(var d=0;d<b.features.length;d++)ha(c,
b.features[d],a);else"Feature"===b.type?ha(c,b,a):ha(c,{geometry:b},a);return c}(b,a);this.tiles={};this.tileCoords=[];c&&(console.timeEnd("preprocess data"),console.log("index: maxZoom: %d, maxPoints: %d",a.indexMaxZoom,a.indexMaxPoints),console.time("generate tiles"),this.stats={},this.total=0);(b=function(b,a){var c=a.buffer/a.extent,d=b,f=qa(b,1,-1-c,c,0,-1,2,a),e=qa(b,1,1-c,2+c,0,-1,2,a);return(f||e)&&(d=qa(b,1,-c,1+c,0,-1,2,a)||[],f&&(d=Aa(f,1).concat(d)),e&&(d=d.concat(Aa(e,-1)))),d}(b,a)).length&&
this.splitTile(b,0,0,0);c&&(b.length&&console.log("features: %d, points: %d",this.tiles[0].numFeatures,this.tiles[0].numPoints),console.timeEnd("generate tiles"),console.log("tiles generated:",this.total,JSON.stringify(this.stats)))}function ya(b,a){b=b.tileID.canonical;if(!this._geoJSONIndex)return a(null,null);b=this._geoJSONIndex.getTile(b.z,b.x,b.y);if(!b)return a(null,null);b=new Sa(b.features);var c=ja(b);0===c.byteOffset&&c.byteLength===c.buffer.byteLength||(c=new Uint8Array(c));a(null,{vectorTile:b,
rawData:c.buffer})}var ka=function(b){b&&this.replace(b)};ka.prototype.replace=function(b){this._layerConfigs={};this._layers={};this.update(b,[])};ka.prototype.update=function(c,d){for(var f=this,e=0;e<c.length;e+=1){var k=c[e];f._layerConfigs[k.id]=k;k=f._layers[k.id]=b.default$22(k);k._featureFilter=b.default$13(k.filter)}for(c=0;c<d.length;c+=1)e=d[c],delete f._layerConfigs[e],delete f._layers[e];this.familiesBySource={};d=0;for(c=function(c){for(var d={},f=0;f<c.length;f++){var e=c[f];for(var k=
"",g=0,h=b.default$18;g<h.length;g+=1)k+="/"+a(e[h[g]]);e=k;(k=d[e])||(k=d[e]=[]);k.push(c[f])}c=[];for(var l in d)c.push(d[l]);return c}(b.values(this._layerConfigs));d<c.length;d+=1){e=c[d].map(function(b){return f._layers[b.id]});var g=e[0];if("none"!==g.visibility){var h=g.source||"";(k=f.familiesBySource[h])||(k=f.familiesBySource[h]={});g=g.sourceLayer||"_geojsonTileLayer";(h=k[g])||(h=k[g]=[]);h.push(e)}}};var xa=function(){this.time=this.targetOpacity=this.opacity=0};xa.prototype.clone=function(){var b=
new xa;return b.opacity=this.opacity,b.targetOpacity=this.targetOpacity,b.time=this.time,b};b.register("OpacityState",xa);var Ia=function(b,a,c,d,f,e,k,g,h,l,r){var n=k.top*g-h,q=k.bottom*g+h,u=k.left*g-h;k=k.right*g+h;(this.boxStartIndex=b.length,l)?(l=q-n,0<l&&(l=Math.max(10*g,l),this._addLineCollisionCircles(b,a,c,c.segment,k-u,l,d,f,e,r))):b.emplaceBack(c.x,c.y,u,n,k,q,d,f,e,0,0);this.boxEndIndex=b.length};Ia.prototype._addLineCollisionCircles=function(b,a,c,d,f,e,k,g,h,l){var r=e/2,n=Math.floor(f/
r);l=Math.floor(n*(1+.4*Math.log(l)/Math.LN2)/2);var q=-e/2,u=c;d+=1;c=q;var v=-f/2,p=v-f/4;do{if(0>--d){if(c>v)return;d=0;break}c-=a[d].dist(u);u=a[d]}while(c>p);u=a[d].dist(a[d+1]);for(p=-l;p<n+l;p++){var z=p*r,w=v+z;if(0>z&&(w+=z),z>f&&(w+=z-f),!(w<c)){for(;c+u<w;){if(c+=u,++d+1>=a.length)return;u=a[d].dist(a[d+1])}z=w-c;var A=a[d];z=a[d+1].sub(A)._unit()._mult(z)._add(A)._round();b.emplaceBack(z.x,z.y,-e/2,-e/2,e/2,e/2,k,g,h,e/2,Math.abs(w-q)<r?0:.8*(w-q))}}};var aa=g;g.prototype={push:function(b){this.data.push(b);
this.length++;this._up(this.length-1)},pop:function(){if(0!==this.length){var b=this.data[0];return this.length--,0<this.length&&(this.data[0]=this.data[this.length],this._down(0)),this.data.pop(),b}},peek:function(){return this.data[0]},_up:function(b){for(var a=this.data,c=this.compare,d=a[b];0<b;){var f=b-1>>1,e=a[f];if(0<=c(d,e))break;a[b]=e;b=f}a[b]=d},_down:function(b){for(var a=this.data,c=this.compare,d=this.length>>1,f=a[b];b<d;){var e=1+(b<<1),k=e+1,g=a[e];if(k<this.length&&0>c(a[k],g)&&
(e=k,g=a[k]),0<=c(g,f))break;a[b]=g;b=e}a[b]=f}};aa.default=g;var Ea=function(a){var c=new b.AlphaImage({width:0,height:0}),d={},f=new b.default$2(0,0,{autoResize:!0}),e;for(e in a){var k=a[e],g=d[e]={},h;for(h in k){var l=k[+h];if(l&&0!==l.bitmap.width&&0!==l.bitmap.height){var r=f.packOne(l.bitmap.width+2,l.bitmap.height+2);c.resize({width:f.w,height:f.h});b.AlphaImage.copy(l.bitmap,c,{x:0,y:0},{x:r.x+1,y:r.y+1},l.bitmap);g[h]={rect:r,metrics:l.metrics}}}}f.shrink();c.resize({width:f.w,height:f.h});
this.image=c;this.positions=d};b.register("GlyphAtlas",Ea);var Ja=function(a){this.tileID=new b.OverscaledTileID(a.tileID.overscaledZ,a.tileID.wrap,a.tileID.canonical.z,a.tileID.canonical.x,a.tileID.canonical.y);this.uid=a.uid;this.zoom=a.zoom;this.pixelRatio=a.pixelRatio;this.tileSize=a.tileSize;this.source=a.source;this.overscaling=this.tileID.overscaleFactor();this.showCollisionBoxes=a.showCollisionBoxes;this.collectResourceTiming=!!a.collectResourceTiming};Ja.prototype.parse=function(a,c,d,f){function e(){if(r)return f(r);
if(n&&q){var a=new Ea(n),c=new b.default$28(q),d;for(d in u){var e=u[d];e instanceof b.default$14&&(m(e.layers,this.zoom),h(e,n,a.positions,q,c.positions,this.showCollisionBoxes))}this.status="done";f(null,{buckets:b.values(u).filter(function(b){return!b.isEmpty()}),featureIndex:l,collisionBoxArray:this.collisionBoxArray,glyphAtlasImage:a.image,iconAtlasImage:c.image})}}var k=this;this.status="parsing";this.data=a;this.collisionBoxArray=new b.CollisionBoxArray;var g=new b.default$27(Object.keys(a.layers).sort()),
l=new b.default$11(this.tileID);l.bucketLayerIDs=[];var r,n,q,u={},v={featureIndex:l,iconDependencies:{},glyphDependencies:{}};c=c.familiesBySource[this.source];for(var p in c){var z=a.layers[p];if(z){1===z.version&&b.warnOnce('Vector tile source "'+k.source+'" layer "'+p+'" does not use vector tile spec v2 and therefore may have some rendering errors.');for(var w=g.encode(p),A=[],y=0;y<z.length;y++){var x=z.feature(y);A.push({feature:x,index:y,sourceLayerIndex:w})}z=0;for(y=c[p];z<y.length;z+=1){x=
y[z];var t=x[0];t.minzoom&&k.zoom<Math.floor(t.minzoom)||t.maxzoom&&k.zoom>=t.maxzoom||"none"===t.visibility||(m(x,k.zoom),(u[t.id]=t.createBucket({index:l.bucketLayerIDs.length,layers:x,zoom:k.zoom,pixelRatio:k.pixelRatio,overscaling:k.overscaling,collisionBoxArray:k.collisionBoxArray,sourceLayerIndex:w})).populate(A,v),l.bucketLayerIDs.push(x.map(function(b){return b.id})))}}}a=b.mapObject(v.glyphDependencies,function(b){return Object.keys(b).map(Number)});Object.keys(a).length?d.send("getGlyphs",
{uid:this.uid,stacks:a},function(b,a){r||(r=b,n=a,e.call(k))}):n={};v=Object.keys(v.iconDependencies);v.length?d.send("getImages",{icons:v},function(b,a){r||(r=b,q=a,e.call(k))}):q={};e.call(this)};var Na=function(b,a,c){this.actor=b;this.layerIndex=a;this.loadVectorData=c||w;this.loading={};this.loaded={}};Na.prototype.loadTile=function(a,c){var d=this,f=a.uid;this.loading||(this.loading={});var e=this.loading[f]=new Ja(a);e.abort=this.loadVectorData(a,function(k,g){if(delete d.loading[f],k||!g)return c(k);
var h=g.rawData,l={};g.expires&&(l.expires=g.expires);g.cacheControl&&(l.cacheControl=g.cacheControl);var r={};a.request&&a.request.collectResourceTiming&&(k=!(!performance||!performance.getEntriesByName)&&performance.getEntriesByName(a.request.url))&&(r.resourceTiming=JSON.parse(JSON.stringify(k)));e.vectorTile=g.vectorTile;e.parse(g.vectorTile,d.layerIndex,d.actor,function(a,d){if(a||!d)return c(a);c(null,b.extend({rawTileData:h.slice(0)},d,l,r))});d.loaded=d.loaded||{};d.loaded[f]=e})};Na.prototype.reloadTile=
function(b,a){var c=this.loaded,d=b.uid,f=this;if(c&&c[d]){var e=c[d];e.showCollisionBoxes=b.showCollisionBoxes;b=function(b,c){var d=e.reloadCallback;d&&(delete e.reloadCallback,e.parse(e.vectorTile,f.layerIndex,f.actor,d));a(b,c)};"parsing"===e.status?e.reloadCallback=b:"done"===e.status&&e.parse(e.vectorTile,this.layerIndex,this.actor,b)}};Na.prototype.abortTile=function(b,a){var c=this.loading;b=b.uid;c&&c[b]&&c[b].abort&&(c[b].abort(),delete c[b]);a()};Na.prototype.removeTile=function(b,a){var c=
this.loaded;b=b.uid;c&&c[b]&&delete c[b];a()};var Ra=function(){this.loading={};this.loaded={}};Ra.prototype.loadTile=function(a,c){var d=a.uid,f=a.encoding,e=new b.default$31(d);this.loading[d]=e;e.loadFromImage(a.rawImageData,f);delete this.loading[d];this.loaded=this.loaded||{};this.loaded[d]=e;c(null,e)};Ra.prototype.removeTile=function(b){var a=this.loaded;b=b.uid;a&&a[b]&&delete a[b]};var rb={RADIUS:6378137,FLATTENING:1/298.257223563,POLAR_RADIUS:6356752.3142},Eb={geometry:function db(b){var a,
c=0;switch(b.type){case "Polygon":return x(b.coordinates);case "MultiPolygon":for(a=0;a<b.coordinates.length;a++)c+=x(b.coordinates[a]);return c;case "Point":case "MultiPoint":case "LineString":case "MultiLineString":return 0;case "GeometryCollection":for(a=0;a<b.geometries.length;a++)c+=db(b.geometries[a]);return c}},ring:t},dc=function fb(b,a){switch(b&&b.type||null){case "FeatureCollection":return b.features=b.features.map(B(fb,a)),b;case "Feature":return b.geometry=fb(b.geometry,a),b;case "Polygon":case "MultiPolygon":return"Polygon"===
b.type?b.coordinates=C(b.coordinates,a):"MultiPolygon"===b.type&&(b.coordinates=b.coordinates.map(B(C,a))),b;default:return b}},pb=b.default$29.VectorTileFeature.prototype.toGeoJSON,Oa=function(a){this._feature=a;this.extent=b.default$8;this.type=a.type;this.properties=a.tags;"id"in a&&!isNaN(a.id)&&(this.id=parseInt(a.id,10))};Oa.prototype.loadGeometry=function(){if(1===this._feature.type){for(var a=[],c=0,d=this._feature.geometry;c<d.length;c+=1){var f=d[c];a.push([new b.default$1(f[0],f[1])])}return a}a=
[];c=0;for(d=this._feature.geometry;c<d.length;c+=1){f=[];for(var e=0,k=d[c];e<k.length;e+=1){var g=k[e];f.push(new b.default$1(g[0],g[1]))}a.push(f)}return a};Oa.prototype.toGeoJSON=function(b,a,c){return pb.call(this,b,a,c)};var Sa=function(a){this.layers={_geojsonTileLayer:this};this.name="_geojsonTileLayer";this.extent=b.default$8;this.length=a.length;this._features=a};Sa.prototype.feature=function(b){return new Oa(this._features[b])};var Ya=b.__moduleExports.VectorTileFeature;G.prototype.feature=
function(b){return new H(this.features[b],this.options.extent)};H.prototype.loadGeometry=function(){var a=this.rawGeometry;this.geometry=[];for(var c=0;c<a.length;c++){for(var d=a[c],f=[],e=0;e<d.length;e++)f.push(new b.default$32(d[e][0],d[e][1]));this.geometry.push(f)}return this.geometry};H.prototype.bbox=function(){this.geometry||this.loadGeometry();for(var b=this.geometry,a=1/0,c=-1/0,d=1/0,f=-1/0,e=0;e<b.length;e++)for(var k=b[e],g=0;g<k.length;g++){var h=k[g];a=Math.min(a,h.x);c=Math.max(c,
h.x);d=Math.min(d,h.y);f=Math.max(f,h.y)}return[a,d,c,f]};H.prototype.toGeoJSON=Ya.prototype.toGeoJSON;var ja=E;ja.fromVectorTileJs=E;ja.fromGeojsonVt=function(b,a){a=a||{};var c={},d;for(d in b)c[d]=new G(b[d].features,a),c[d].name=d,c[d].version=a.version,c[d].extent=a.extent;return E({layers:c})};ja.GeoJSONWrapper=G;var qb=function La(b,a,c,d,f,e){if(!(f-d<=c)){var k=Math.floor((d+f)/2);!function Kb(b,a,c,d,f,e){for(;f>d;){if(600<f-d){var k=f-d+1,g=c-d+1,h=Math.log(k),l=.5*Math.exp(2*h/3);h=.5*
Math.sqrt(h*l*(k-l)/k)*(0>g-k/2?-1:1);Kb(b,a,c,Math.max(d,Math.floor(c-g*l/k+h)),Math.min(f,Math.floor(c+(k-g)*l/k+h)),e)}k=a[2*c+e];g=d;l=f;N(b,a,d,c);for(a[2*f+e]>k&&N(b,a,d,f);g<l;){N(b,a,g,l);g++;for(l--;a[2*g+e]<k;)g++;for(;a[2*l+e]>k;)l--}a[2*d+e]===k?N(b,a,d,l):N(b,a,++l,f);l<=c&&(d=l+1);c<=l&&(f=l-1)}}(b,a,k,d,f,e%2);La(b,a,c,d,k-1,e+1);La(b,a,c,k+1,f,e+1)}};R.prototype={range:function(b,a,c,d){for(var f=this.ids,e=this.coords,k=this.nodeSize,g,h,l=[0,f.length-1,0],r=[];l.length;){var n=l.pop(),
q=l.pop(),u=l.pop();if(q-u<=k)for(n=u;n<=q;n++)g=e[2*n],h=e[2*n+1],g>=b&&g<=c&&h>=a&&h<=d&&r.push(f[n]);else{var v=Math.floor((u+q)/2);g=e[2*v];h=e[2*v+1];g>=b&&g<=c&&h>=a&&h<=d&&r.push(f[v]);var p=(n+1)%2;(0===n?b<=g:a<=h)&&(l.push(u),l.push(v-1),l.push(p));(0===n?c>=g:d>=h)&&(l.push(v+1),l.push(q),l.push(p))}}return r},within:function(b,a,c){for(var d=this.ids,f=this.coords,e=this.nodeSize,k=[0,d.length-1,0],g=[],h=c*c;k.length;){var l=k.pop(),r=k.pop(),n=k.pop();if(r-n<=e)for(l=n;l<=r;l++){n=f[2*
l]-b;var q=f[2*l+1]-a;n*n+q*q<=h&&g.push(d[l])}else{q=Math.floor((n+r)/2);var u=f[2*q],v=f[2*q+1],p=u-b,z=v-a;p*p+z*z<=h&&g.push(d[q]);p=(l+1)%2;(0===l?b-c<=u:a-c<=v)&&(k.push(n),k.push(q-1),k.push(p));(0===l?b+c>=u:a+c>=v)&&(k.push(q+1),k.push(r),k.push(p))}}return g}};S.prototype={options:{minZoom:0,maxZoom:16,radius:40,extent:512,nodeSize:64,log:!1,reduce:null,initial:function(){return{}},map:function(b){return b}},load:function(b){var a=this.options.log;a&&console.time("total time");var c="prepare "+
b.length+" points";a&&console.time(c);this.points=b;b=b.map(ba);a&&console.timeEnd(c);for(c=this.options.maxZoom;c>=this.options.minZoom;c--){var d=+Date.now();this.trees[c+1]=new R(b,ea,U,this.options.nodeSize,Float32Array);b=this._cluster(b,c);a&&console.log("z%d: %d clusters in %dms",c,b.length,+Date.now()-d)}return this.trees[this.options.minZoom]=new R(b,ea,U,this.options.nodeSize,Float32Array),a&&console.timeEnd("total time"),this},getClusters:function(b,a){a=this.trees[this._limitZoom(a)];
b=a.range(b[0]/360+.5,Y(b[3]),b[2]/360+.5,Y(b[1]));for(var c=[],d=0;d<b.length;d++){var f=a.points[b[d]];c.push(f.numPoints?da(f):this.points[f.id])}return c},getChildren:function(b,a){var c=this.trees[a+1].points[b];c=this.trees[a+1].within(c.x,c.y,this.options.radius/(this.options.extent*Math.pow(2,a)));for(var d=[],f=0;f<c.length;f++){var e=this.trees[a+1].points[c[f]];e.parentId===b&&d.push(e.numPoints?da(e):this.points[e.id])}return d},getLeaves:function(b,a,c,d){var f=[];return this._appendLeaves(f,
b,a,c||10,d||0,0),f},getTile:function(b,a,c){var d=this.trees[this._limitZoom(b)];b=Math.pow(2,b);var f=this.options.radius/this.options.extent,e=(c-f)/b,k=(c+1+f)/b,g={features:[]};return this._addTileFeatures(d.range((a-f)/b,e,(a+1+f)/b,k),d.points,a,c,b,g),0===a&&this._addTileFeatures(d.range(1-f/b,e,1,k),d.points,b,c,b,g),a===b-1&&this._addTileFeatures(d.range(0,e,f/b,k),d.points,-1,c,b,g),g.features.length?g:null},getClusterExpansionZoom:function(b,a){for(;a<this.options.maxZoom;){b=this.getChildren(b,
a);if(a++,1!==b.length)break;b=b[0].properties.cluster_id}return a},_appendLeaves:function(b,a,c,d,f,e){a=this.getChildren(a,c);for(var k=0;k<a.length;k++){var g=a[k].properties;if(g.cluster?e+g.point_count<=f?e+=g.point_count:e=this._appendLeaves(b,g.cluster_id,c+1,d,f,e):e<f?e++:b.push(a[k]),b.length===d)break}return e},_addTileFeatures:function(b,a,c,d,f,e){for(var k=0;k<b.length;k++){var g=a[b[k]];e.features.push({type:1,geometry:[[Math.round(this.options.extent*(g.x*f-c)),Math.round(this.options.extent*
(g.y*f-d))]],tags:g.numPoints?ca(g):this.points[g.id].properties})}},_limitZoom:function(b){return Math.max(this.options.minZoom,Math.min(b,this.options.maxZoom+1))},_cluster:function(b,a){for(var c=[],d=this.options.radius/(this.options.extent*Math.pow(2,a)),f=0;f<b.length;f++){var e=b[f];if(!(e.zoom<=a)){e.zoom=a;var k=this.trees[a+1],g=k.within(e.x,e.y,d),h=e.numPoints||1,l=e.x*h,r=e.y*h,n=null;this.options.reduce&&(n=this.options.initial(),this._accumulate(n,e));for(var q=0;q<g.length;q++){var u=
k.points[g[q]];if(a<u.zoom){var v=u.numPoints||1;u.zoom=a;l+=u.x*v;r+=u.y*v;h+=v;u.parentId=f;this.options.reduce&&this._accumulate(n,u)}}1===h?c.push(e):(e.parentId=f,c.push({x:l/h,y:r/h,zoom:1/0,id:f,properties:n,parentId:-1,numPoints:h}))}}return c},_accumulate:function(b,a){a=a.numPoints?a.properties:this.options.map(this.points[a.id].properties);this.options.reduce(b,a)}};pa.prototype.options={maxZoom:14,indexMaxZoom:5,indexMaxPoints:1E5,tolerance:3,extent:4096,buffer:64,lineMetrics:!1,debug:0};
pa.prototype.splitTile=function(b,a,c,d,f,e,k){for(var g=[b,a,c,d],h=this.options,l=h.debug;g.length;){d=g.pop();c=g.pop();a=g.pop();b=g.pop();var r=1<<a,n=32*((1<<a)*d+c)+a,q=this.tiles[n],u;if(u=!q){1<l&&console.time("creation");q=this.tiles;u=b;for(var v=h,p=a===v.maxZoom?0:v.tolerance/((1<<a)*v.extent),z={features:[],numPoints:0,numSimplified:0,numFeatures:0,source:null,x:c,y:d,z:a,transformed:!1,minX:2,minY:1,maxX:-1,maxY:0},w=0;w<u.length;w++){z.numFeatures++;var A=void 0,m=z,y=u[w],x=p,t=v,
J=y.geometry,B=y.type,E=[];if("Point"===B||"MultiPoint"===B)for(var I=0;I<J.length;I+=3)E.push(J[I]),E.push(J[I+1]),m.numPoints++,m.numSimplified++;else if("LineString"===B)va(E,J,m,x,!1,!1);else if("MultiLineString"===B||"Polygon"===B)for(I=0;I<J.length;I++)va(E,J[I],m,x,"Polygon"===B,0===I);else if("MultiPolygon"===B)for(var C=0;C<J.length;C++){var F=J[C];for(I=0;I<F.length;I++)va(E,F[I],m,x,!0,0===I)}if(E.length){x=y.tags||null;if("LineString"===B&&t.lineMetrics){for(A in x={},y.tags)x[A]=y.tags[A];
x.mapbox_clip_start=J.start/J.size;x.mapbox_clip_end=J.end/J.size}A={geometry:E,type:"Polygon"===B||"MultiPolygon"===B?3:"LineString"===B||"MultiLineString"===B?2:1,tags:x};null!==y.id&&(A.id=y.id);m.features.push(A)}m=u[w].minX;y=u[w].minY;A=u[w].maxX;t=u[w].maxY;m<z.minX&&(z.minX=m);y<z.minY&&(z.minY=y);A>z.maxX&&(z.maxX=A);t>z.maxY&&(z.maxY=t)}u=(q=q[n]=z,this.tileCoords.push({z:a,x:c,y:d}),l)}u&&(1<l&&(console.log("tile z%d-%d-%d (features: %d, points: %d, simplified: %d)",a,c,d,q.numFeatures,
q.numPoints,q.numSimplified),console.timeEnd("creation")),n="z"+a,this.stats[n]=(this.stats[n]||0)+1,this.total++);if(q.source=b,f){if(a===h.maxZoom||a===f)continue;n=1<<f-a;if(c!==Math.floor(e/n)||d!==Math.floor(k/n))continue}else if(a===h.indexMaxZoom||q.numPoints<=h.indexMaxPoints)continue;if(q.source=null,0!==b.length)1<l&&console.time("clipping"),w=.5*h.buffer/h.extent,m=.5-w,y=.5+w,A=1+w,n=u=v=p=null,z=qa(b,r,c-w,c+y,0,q.minX,q.maxX,h),b=qa(b,r,c+m,c+A,0,q.minX,q.maxX,h),z&&(n=qa(z,r,d-w,d+
y,1,q.minY,q.maxY,h),u=qa(z,r,d+m,d+A,1,q.minY,q.maxY,h)),b&&(v=qa(b,r,d-w,d+y,1,q.minY,q.maxY,h),p=qa(b,r,d+m,d+A,1,q.minY,q.maxY,h)),1<l&&console.timeEnd("clipping"),g.push(n||[],a+1,2*c,2*d),g.push(u||[],a+1,2*c,2*d+1),g.push(v||[],a+1,2*c+1,2*d),g.push(p||[],a+1,2*c+1,2*d+1)}};pa.prototype.getTile=function(b,a,c){var d=this.options,f=d.extent;d=d.debug;if(0>b||24<b)return null;var e=1<<b;e=a=(a%e+e)%e;e=32*((1<<b)*c+e)+b;if(this.tiles[e])return Ba(this.tiles[e],f);1<d&&console.log("drilling down to z%d-%d-%d",
b,a,c);for(var k,g=b,h=a,l=c;!k&&0<g;)g--,h=Math.floor(h/2),l=Math.floor(l/2),k=this.tiles[32*((1<<g)*l+h)+g];return k&&k.source?(1<d&&console.log("found parent tile z%d-%d-%d",g,h,l),1<d&&console.time("drilling down"),this.splitTile(k.source,g,h,l,b,a,c),1<d&&console.timeEnd("drilling down"),this.tiles[e]?Ba(this.tiles[e],f):null):null};var gb=function(a){function c(b,c,d){a.call(this,b,c,ya);d&&(this.loadGeoJSON=d)}return a&&(c.__proto__=a),c.prototype=Object.create(a&&a.prototype),c.prototype.constructor=
c,c.prototype.loadData=function(b,a){this._pendingCallback&&this._pendingCallback(null,{abandoned:!0});this._pendingCallback=a;this._pendingLoadDataParams=b;this._state&&"Idle"!==this._state?this._state="NeedsLoadData":(this._state="Coalescing",this._loadData())},c.prototype._loadData=function(){var b=this;if(this._pendingCallback&&this._pendingLoadDataParams){var a=this._pendingCallback,c=this._pendingLoadDataParams;delete this._pendingCallback;delete this._pendingLoadDataParams;this.loadGeoJSON(c,
function(d,f){if(d||!f)return a(d);if("object"!=typeof f)return a(Error("Input data is not a valid GeoJSON object."));dc(f,!0);try{b._geoJSONIndex=c.cluster?(new S(c.superclusterOptions)).load(f.features):new pa(f,c.geojsonVtOptions)}catch(Pa){return a(Pa)}b.loaded={};d={};c.request&&c.request.collectResourceTiming&&(f=!(!performance||!performance.getEntriesByName)&&performance.getEntriesByName(c.request.url))&&(d.resourceTiming={},d.resourceTiming[c.source]=JSON.parse(JSON.stringify(f)));a(null,
d)})}},c.prototype.coalesce=function(){"Coalescing"===this._state?this._state="Idle":"NeedsLoadData"===this._state&&(this._state="Coalescing",this._loadData())},c.prototype.reloadTile=function(b,c){var d=this.loaded,f=b.uid;return d&&d[f]?a.prototype.reloadTile.call(this,b,c):this.loadTile(b,c)},c.prototype.loadGeoJSON=function(a,c){if(a.request)b.getJSON(a.request,c);else{if("string"!=typeof a.data)return c(Error("Input data is not a valid GeoJSON object."));try{return c(null,JSON.parse(a.data))}catch(Ec){return c(Error("Input data is not a valid GeoJSON object."))}}},
c.prototype.removeSource=function(b,a){this._pendingCallback&&this._pendingCallback(null,{abandoned:!0});a()},c}(Na);Ya=function(a){var c=this;this.self=a;this.actor=new b.default$7(a,this);this.layerIndexes={};this.workerSourceTypes={vector:Na,geojson:gb};this.workerSources={};this.demWorkerSources={};this.self.registerWorkerSource=function(b,a){if(c.workerSourceTypes[b])throw Error('Worker source with name "'+b+'" already registered.');c.workerSourceTypes[b]=a};this.self.registerRTLTextPlugin=function(a){if(b.plugin.isLoaded())throw Error("RTL text plugin already registered.");
b.plugin.applyArabicShaping=a.applyArabicShaping;b.plugin.processBidirectionalText=a.processBidirectionalText}};return Ya.prototype.setLayers=function(b,a,c){this.getLayerIndex(b).replace(a);c()},Ya.prototype.updateLayers=function(b,a,c){this.getLayerIndex(b).update(a.layers,a.removedIds);c()},Ya.prototype.loadTile=function(b,a,c){this.getWorkerSource(b,a.type,a.source).loadTile(a,c)},Ya.prototype.loadDEMTile=function(b,a,c){this.getDEMWorkerSource(b,a.source).loadTile(a,c)},Ya.prototype.reloadTile=
function(b,a,c){this.getWorkerSource(b,a.type,a.source).reloadTile(a,c)},Ya.prototype.abortTile=function(b,a,c){this.getWorkerSource(b,a.type,a.source).abortTile(a,c)},Ya.prototype.removeTile=function(b,a,c){this.getWorkerSource(b,a.type,a.source).removeTile(a,c)},Ya.prototype.removeDEMTile=function(b,a){this.getDEMWorkerSource(b,a.source).removeTile(a)},Ya.prototype.removeSource=function(b,a,c){if(this.workerSources[b]&&this.workerSources[b][a.type]&&this.workerSources[b][a.type][a.source]){var d=
this.workerSources[b][a.type][a.source];delete this.workerSources[b][a.type][a.source];void 0!==d.removeSource?d.removeSource(a,c):c()}},Ya.prototype.loadWorkerSource=function(b,a,c){try{this.self.importScripts(a.url),c()}catch(nb){c(nb.toString())}},Ya.prototype.loadRTLTextPlugin=function(a,c,d){try{b.plugin.isLoaded()||(this.self.importScripts(c),d(b.plugin.isLoaded()?null:Error("RTL Text Plugin failed to import scripts from "+c)))}catch(nb){d(nb.toString())}},Ya.prototype.getLayerIndex=function(b){var a=
this.layerIndexes[b];return a||(a=this.layerIndexes[b]=new ka),a},Ya.prototype.getWorkerSource=function(b,a,c){var d=this;(this.workerSources[b]||(this.workerSources[b]={}),this.workerSources[b][a]||(this.workerSources[b][a]={}),this.workerSources[b][a][c])||(this.workerSources[b][a][c]=new this.workerSourceTypes[a]({send:function(a,c,f){d.actor.send(a,c,f,b)}},this.getLayerIndex(b)));return this.workerSources[b][a][c]},Ya.prototype.getDEMWorkerSource=function(b,a){return this.demWorkerSources[b]||
(this.demWorkerSources[b]={}),this.demWorkerSources[b][a]||(this.demWorkerSources[b][a]=new Ra),this.demWorkerSources[b][a]},"undefined"!=typeof WorkerGlobalScope&&"undefined"!=typeof self&&self instanceof WorkerGlobalScope&&new Ya(self),Ya});g(["./chunk1.js"],function(b){function a(b){if(!xa)return null;for(var a=0;a<b.length;a++)if(b[a]in xa)return b[a];return b[0]}function e(b,a){var c=d(rb.API_URL);if(b.protocol=c.protocol,b.authority=c.authority,"/"!==c.path&&(b.path=""+c.path+b.path),!rb.REQUIRE_ACCESS_TOKEN)return f(b);
if(!(a=a||rb.ACCESS_TOKEN))throw Error("An API access token is required to use Mapbox GL. See https://www.mapbox.com/api-documentation/#access-tokens");if("s"===a[0])throw Error("Use a public access token (pk.*) with Mapbox GL, not a secret access token (sk.*). See https://www.mapbox.com/api-documentation/#access-tokens");return b.params.push("access_token\x3d"+a),f(b)}function g(b){return 0===b.indexOf("mapbox:")}function d(b){b=b.match(Ya);if(!b)throw Error("Unable to parse URL object");return{protocol:b[1],
authority:b[2],path:b[3]||"/",params:b[4]?b[4].split("\x26"):[]}}function f(b){var a=b.params.length?"?"+b.params.join("\x26"):"";return b.protocol+"://"+b.authority+b.path+a}function c(b,a,c,d,f,e){this.fontSize=b||24;this.buffer=void 0===a?3:a;this.cutoff=d||.25;this.fontFamily=f||"sans-serif";this.fontWeight=e||"normal";this.radius=c||8;b=this.size=this.fontSize+2*this.buffer;this.canvas=document.createElement("canvas");this.canvas.width=this.canvas.height=b;this.ctx=this.canvas.getContext("2d");
this.ctx.font=this.fontWeight+" "+this.fontSize+"px "+this.fontFamily;this.ctx.textBaseline="middle";this.ctx.fillStyle="black";this.gridOuter=new Float64Array(b*b);this.gridInner=new Float64Array(b*b);this.f=new Float64Array(b);this.d=new Float64Array(b);this.z=new Float64Array(b+1);this.v=new Int16Array(b);this.middle=Math.round(b/2*(0<=navigator.userAgent.indexOf("Gecko/")?1.2:1))}function k(b,a,c,d,f,e,k){for(var g=0;g<a;g++){for(var l=0;l<c;l++)d[l]=b[l*a+g];h(d,f,e,k,c);for(l=0;l<c;l++)b[l*
a+g]=f[l]}for(l=0;l<c;l++){for(g=0;g<a;g++)d[g]=b[l*a+g];h(d,f,e,k,a);for(g=0;g<a;g++)b[l*a+g]=Math.sqrt(f[g])}}function h(b,a,c,d,f){c[0]=0;d[0]=-1E20;d[1]=1E20;for(var e=1,k=0;e<f;e++){for(var g=(b[e]+e*e-(b[c[k]]+c[k]*c[k]))/(2*e-2*c[k]);g<=d[k];)k--,g=(b[e]+e*e-(b[c[k]]+c[k]*c[k]))/(2*e-2*c[k]);c[++k]=e;d[k]=g;d[k+1]=1E20}for(k=e=0;e<f;e++){for(;d[k+1]<e;)k++;a[e]=(e-c[k])*(e-c[k])+b[c[k]]}}function n(a,c,d){var f=function(a,c){if(a)return d(a);c&&(a=b.pick(c,"tiles minzoom maxzoom attribution mapbox_logo bounds".split(" ")),
c.vector_layers&&(a.vectorLayers=c.vector_layers,a.vectorLayerIds=a.vectorLayers.map(function(b){return b.id})),d(null,a))};a.url?b.getJSON(c(dc(a.url),b.ResourceType.Source),f):pa.frame(function(){return f(null,a)})}function p(b,a,c,d,f){var e=f.maxPitchScaleFactor(),k=b.tilesIn(c,e);k.sort(A);c=[];for(var g=0;g<k.length;g+=1){var h=k[g];c.push({wrappedTileID:h.tileID.wrapped().key,queryResults:h.tile.queryRenderedFeatures(a,h.queryGeometry,h.scale,d,f,e,b.transform.calculatePosMatrix(h.tileID.toUnwrapped()))})}b=
{};a={};for(d=0;d<c.length;d+=1){e=c[d];f=e.queryResults;e=e.wrappedTileID;e=a[e]=a[e]||{};for(var l in f){var r=f[l];k=e[l]=e[l]||{};g=b[l]=b[l]||[];for(h=0;h<r.length;h+=1){var n=r[h];k[n.featureIndex]||(k[n.featureIndex]=!0,g.push(n.feature))}}}return b}function A(b,a){b=b.tileID;a=a.tileID;return b.overscaledZ-a.overscaledZ||b.canonical.y-a.canonical.y||b.wrap-a.wrap||b.canonical.x-a.canonical.x}function m(a,c){c=c.zoomTo(a.canonical.z);return new b.default$1((c.column-(a.canonical.x+a.wrap*Math.pow(2,
a.canonical.z)))*b.default$8,(c.row-a.canonical.y)*b.default$8)}function w(b){return"raster"===b||"image"===b||"video"===b}function x(){return new b.default.Worker(ef.workerUrl)}function t(a,c){var d={},f;for(f in a)"ref"!==f&&(d[f]=a[f]);return b.default$18.forEach(function(b){b in c&&(d[b]=c[b])}),d}function B(b){b=b.slice();for(var a=Object.create(null),c=0;c<b.length;c++)a[b[c].id]=b[c];for(c=0;c<b.length;c++)"ref"in b[c]&&(b[c]=t(b[c],a[b[c].ref]));return b}function C(a,c,d,f,e,k){for(var g in c=
c||{},a=a||{})a.hasOwnProperty(g)&&(b.default$10(a[g],c[g])||d.push({command:k,args:[f,g,c[g],e]}));for(g in c)c.hasOwnProperty(g)&&!a.hasOwnProperty(g)&&(b.default$10(a[g],c[g])||d.push({command:k,args:[f,g,c[g],e]}))}function D(b){return b.id}function G(b,a){return b[a.id]=a,b}function H(a,c){if(!a)return[{command:jb.setStyle,args:[c]}];var d=[];try{if(!b.default$10(a.version,c.version))return[{command:jb.setStyle,args:[c]}];b.default$10(a.center,c.center)||d.push({command:jb.setCenter,args:[c.center]});
b.default$10(a.zoom,c.zoom)||d.push({command:jb.setZoom,args:[c.zoom]});b.default$10(a.bearing,c.bearing)||d.push({command:jb.setBearing,args:[c.bearing]});b.default$10(a.pitch,c.pitch)||d.push({command:jb.setPitch,args:[c.pitch]});b.default$10(a.sprite,c.sprite)||d.push({command:jb.setSprite,args:[c.sprite]});b.default$10(a.glyphs,c.glyphs)||d.push({command:jb.setGlyphs,args:[c.glyphs]});b.default$10(a.transition,c.transition)||d.push({command:jb.setTransition,args:[c.transition]});b.default$10(a.light,
c.light)||d.push({command:jb.setLight,args:[c.light]});var f={},e=[];!function(a,c,d,f){for(var e in c=c||{},a=a||{})if(a.hasOwnProperty(e)&&!c.hasOwnProperty(e)){var k=e,g=f;d.push({command:jb.removeSource,args:[k]});g[k]=!0}for(e in c)if(c.hasOwnProperty(e))if(a.hasOwnProperty(e)){if(!b.default$10(a[e],c[e])){if(k="geojson"===a[e].type&&"geojson"===c[e].type)a:{k=void 0;g=a;var h=c,l=e;for(k in g[l])if(g[l].hasOwnProperty(k)&&"data"!==k&&!b.default$10(g[l][k],h[l][k])){k=!1;break a}for(k in h[l])if(h[l].hasOwnProperty(k)&&
"data"!==k&&!b.default$10(g[l][k],h[l][k])){k=!1;break a}k=!0}if(k)d.push({command:jb.setGeoJSONSourceData,args:[e,c[e].data]});else{k=e;g=c;h=d;l=k;var r=f;h.push({command:jb.removeSource,args:[l]});r[l]=!0;h.push({command:jb.addSource,args:[k,g[k]]})}}}else d.push({command:jb.addSource,args:[e,c[e]]})}(a.sources,c.sources,e,f);var k=[];a.layers&&a.layers.forEach(function(b){f[b.source]?d.push({command:jb.removeLayer,args:[b.id]}):k.push(b)});d=d.concat(e);(function(a,c,d){c=c||[];var f,e,k,g,h,
l=(a=a||[]).map(D),r=c.map(D);a=a.reduce(G,{});var n=c.reduce(G,{}),q=l.slice(),u=Object.create(null);for(f=c=0;c<l.length;c++){var v=l[c];n.hasOwnProperty(v)?f++:(d.push({command:jb.removeLayer,args:[v]}),q.splice(q.indexOf(v,f),1))}for(f=c=0;c<r.length;c++)v=r[r.length-1-c],q[q.length-1-c]!==v&&(a.hasOwnProperty(v)?(d.push({command:jb.removeLayer,args:[v]}),q.splice(q.lastIndexOf(v,q.length-f),1)):f++,g=q[q.length-c],d.push({command:jb.addLayer,args:[n[v],g]}),q.splice(q.length-c,0,v),u[v]=!0);
for(c=0;c<r.length;c++)if(e=a[v=r[c]],k=n[v],!u[v]&&!b.default$10(e,k))if(b.default$10(e.source,k.source)&&b.default$10(e["source-layer"],k["source-layer"])&&b.default$10(e.type,k.type)){for(h in C(e.layout,k.layout,d,v,null,jb.setLayoutProperty),C(e.paint,k.paint,d,v,null,jb.setPaintProperty),b.default$10(e.filter,k.filter)||d.push({command:jb.setFilter,args:[v,k.filter]}),b.default$10(e.minzoom,k.minzoom)&&b.default$10(e.maxzoom,k.maxzoom)||d.push({command:jb.setLayerZoomRange,args:[v,k.minzoom,
k.maxzoom]}),e)e.hasOwnProperty(h)&&"layout"!==h&&"paint"!==h&&"filter"!==h&&"metadata"!==h&&"minzoom"!==h&&"maxzoom"!==h&&(0===h.indexOf("paint.")?C(e[h],k[h],d,v,h.slice(6),jb.setPaintProperty):b.default$10(e[h],k[h])||d.push({command:jb.setLayerProperty,args:[v,h,k[h]]}));for(h in k)k.hasOwnProperty(h)&&!e.hasOwnProperty(h)&&"layout"!==h&&"paint"!==h&&"filter"!==h&&"metadata"!==h&&"minzoom"!==h&&"maxzoom"!==h&&(0===h.indexOf("paint.")?C(e[h],k[h],d,v,h.slice(6),jb.setPaintProperty):b.default$10(e[h],
k[h])||d.push({command:jb.setLayerProperty,args:[v,h,k[h]]}))}else d.push({command:jb.removeLayer,args:[v]}),g=q[q.lastIndexOf(v)+1],d.push({command:jb.addLayer,args:[k,g]})})(k,c.layers,d)}catch(Sc){console.warn("Unable to compute style diff:",Sc),d=[{command:jb.setStyle,args:[c]}]}return d}function E(a,c,d,f,e){var k=b.mat4.identity(new Float32Array(16));return c?(b.mat4.identity(k),b.mat4.scale(k,k,[1/e,1/e,1]),d||b.mat4.rotateZ(k,k,f.angle)):(b.mat4.scale(k,k,[f.width/2,-f.height/2,1]),b.mat4.translate(k,
k,[1,-1,0]),b.mat4.multiply(k,k,a)),k}function K(a,c){a=[a.x,a.y,0,1];R(a,a,c);c=a[3];return{point:new b.default$1(a[0]/c,a[1]/c),signedDistanceFromCamera:c}}function I(b,a,c,d,f,e,k,g,h,l,r,n){var q=g.glyphStartIndex+g.numGlyphs,u=g.lineStartIndex,v=g.lineStartIndex+g.lineLength,p=a.getoffsetX(g.glyphStartIndex);a=a.getoffsetX(q-1);p=N(b*p,c,d,f,e,k,g.segment,u,v,h,l,r,n);return p?(b=N(b*a,c,d,f,e,k,g.segment,u,v,h,l,r,n))?{first:p,last:b}:null:null}function J(a,c,d,f){return a===b.WritingMode.horizontal&&
Math.abs(d.y-c.y)>Math.abs(d.x-c.x)*f?{useVertical:!0}:(a===b.WritingMode.vertical?c.y<d.y:c.x>d.x)?{needsFlipping:!0}:null}function L(a,c,d,f,e,k,g,h,l,r,n,q,u,v){var p=c/24,z=a.lineOffsetX*c;c*=a.lineOffsetY;if(1<a.numGlyphs){e=a.glyphStartIndex+a.numGlyphs;var w=a.lineStartIndex,A=a.lineStartIndex+a.lineLength,m=I(p,h,z,c,d,n,q,a,l,k,u,!1);if(!m)return{notEnoughRoom:!0};var y=K(m.first.point,g).point;g=K(m.last.point,g).point;if(f&&!d&&(v=J(a.writingMode,y,g,v)))return v;v=[m.first];for(f=a.glyphStartIndex+
1;f<e-1;f++)v.push(N(p*h.getoffsetX(f),z,c,d,n,q,a.segment,w,A,l,k,u,!1));v.push(m.last)}else{if(f&&!d&&(w=K(q,e).point,A=a.lineStartIndex+a.segment+1,A=new b.default$1(l.getx(A),l.gety(A)),m=K(A,e),e=0<m.signedDistanceFromCamera?m.point:M(q,A,w,1,e),v=J(a.writingMode,w,e,v)))return v;a=N(p*h.getoffsetX(a.glyphStartIndex),z,c,d,n,q,a.segment,a.lineStartIndex,a.lineStartIndex+a.lineLength,l,k,u,!1);if(!a)return{notEnoughRoom:!0};v=[a]}a=0;for(d=v;a<d.length;a+=1)k=d[a],b.addDynamicAttributes(r,k.point,
k.angle);return{}}function M(b,a,c,d,f){b=K(b.add(b.sub(a)._unit()),f).point;b=c.sub(b);return c.add(b._mult(d/b.mag()))}function N(a,c,d,f,e,k,g,h,l,r,n,q,u){var v=f?a-c:a+c;a=0<v?1:-1;c=0;f&&(a*=-1,c=Math.PI);0>a&&(c+=Math.PI);g=f=0<a?h+g:h+g+1;var p=e,z=0,w=0;for(v=Math.abs(v);z+w<=v;){if((f+=a)<h||f>=l)return null;if(e=p,void 0===(p=q[f])){p=new b.default$1(r.getx(f),r.gety(f));var A=K(p,n);0<A.signedDistanceFromCamera?p=q[f]=A.point:(A=f-a,p=M(0===z?k:new b.default$1(r.getx(A),r.gety(A)),p,e,
v-z+1,n))}z+=w;w=e.dist(p)}h=(v-z)/w;k=p.sub(e);h=k.mult(h)._add(e);return h._add(k._unit()._perp()._mult(d*a)),{point:h,angle:c+Math.atan2(p.y-e.y,p.x-e.x),tileDistance:u?{prevTileDistance:f-a===g?0:r.gettileUnitDistanceFromAnchor(f-a),lastSegmentViewportDistance:v-z}:null}}function O(b,a){for(var c=0;c<b;c++){var d=a.length;a.resize(d+4);a.float32.set(fe,3*d)}}function R(b,a,c){var d=a[0];a=a[1];return b[0]=c[0]*d+c[4]*a+c[12],b[1]=c[1]*d+c[5]*a+c[13],b[3]=c[3]*d+c[7]*a+c[15],b}function T(a,c,d){return b.default$8/
(a.tileSize*Math.pow(2,d-a.tileID.overscaledZ))*c}function P(b,a,c){b.emplaceBack(a?1:0,c?1:0);b.emplaceBack(a?1:0,c?1:0);b.emplaceBack(a?1:0,c?1:0);b.emplaceBack(a?1:0,c?1:0)}function S(b){if(0===b.opacity&&!b.placed)return 0;if(1===b.opacity&&b.placed)return 4294967295;var a=b.placed?1:0;b=Math.floor(127*b.opacity);return b*Xe+a*Ue+b*Gf+a*Hf+b*If+a*Ye+b*Ze+a}function ba(a,c,d,f,e){for(var k=0;k<d.length;k++){var g=d[k];if(f.isLessThan(g.tileID))break;if(c.key===g.tileID.key)return;if(g.tileID.isChildOf(c)){c=
c.children(1/0);for(g=0;g<c.length;g++)ba(a,c[g],d.slice(k),f,e);return}}d=c.overscaledZ-a.overscaledZ;a=new b.CanonicalTileID(d,c.canonical.x-(a.canonical.x<<d),c.canonical.y-(a.canonical.y<<d));e[a.key]=e[a.key]||a}function da(b,a,c,d,f){var e=b.context,k=e.gl,g=f?b.useProgram("collisionCircle"):b.useProgram("collisionBox");e.setDepthMode(lb.disabled);e.setStencilMode(Mb.disabled);e.setColorMode(b.colorModeForRenderPass());for(var h=0;h<d.length;h++){var l=d[h],r=a.getTile(l),n=r.getBucket(c);if(n&&
(n=f?n.collisionCircle:n.collisionBox)){k.uniformMatrix4fv(g.uniforms.u_matrix,!1,l.posMatrix);f||e.lineWidth.set(1);k.uniform1f(g.uniforms.u_camera_to_center_distance,b.transform.cameraToCenterDistance);l=T(r,1,b.transform.zoom);var q=Math.pow(2,b.transform.zoom-r.tileID.overscaledZ);k.uniform1f(g.uniforms.u_pixels_to_tile_units,l);k.uniform2f(g.uniforms.u_extrude_scale,b.transform.pixelsToGLUnits[0]/(l*q),b.transform.pixelsToGLUnits[1]/(l*q));k.uniform1f(g.uniforms.u_overscale_factor,r.tileID.overscaleFactor());
g.draw(e,f?k.TRIANGLES:k.LINES,c.id,n.layoutVertexBuffer,n.indexBuffer,n.segments,null,n.collisionVertexBuffer,null)}}}function ca(a,c,d,f,e,k,g,h,l,r){var n=a.context,q=n.gl,u=a.transform;h="map"===h;l="map"===l;var v=h&&"line"===d.layout.get("symbol-placement"),p=h&&!l&&!v;n.setDepthMode(l?a.depthModeForSublayer(0,lb.ReadOnly):lb.disabled);for(var z=0;z<f.length;z+=1){var w=f[z],A=c.getTile(w),m=A.getBucket(d);if(m){var y=e?m.text:m.icon;if(y&&y.segments.get().length){var x=y.programConfigurations.get(d.id),
t=e||m.sdfIcons,J=e?m.textSizeData:m.iconSizeData;if(!B){var B=a.useProgram(t?"symbolSDF":"symbolIcon",x);x.setUniforms(a.context,B,d.paint,{zoom:a.transform.zoom});x=B;var I=e,C=p,F=J;J=a.context.gl;var D=a.transform;J.uniform1i(x.uniforms.u_pitch_with_map,l?1:0);J.uniform1f(x.uniforms.u_is_text,I?1:0);J.uniform1f(x.uniforms.u_pitch,D.pitch/360*2*Math.PI);var G="constant"===F.functionType||"camera"===F.functionType;J.uniform1i(x.uniforms.u_is_size_zoom_constant,"constant"===F.functionType||"source"===
F.functionType?1:0);J.uniform1i(x.uniforms.u_is_size_feature_constant,G?1:0);J.uniform1f(x.uniforms.u_camera_to_center_distance,D.cameraToCenterDistance);I=b.evaluateSizeForZoom(F,D.zoom,Jc.properties[I?"text-size":"icon-size"]);void 0!==I.uSizeT&&J.uniform1f(x.uniforms.u_size_t,I.uSizeT);void 0!==I.uSize&&J.uniform1f(x.uniforms.u_size,I.uSize);J.uniform1f(x.uniforms.u_aspect_ratio,D.width/D.height);J.uniform1i(x.uniforms.u_rotate_symbol,C?1:0)}(n.activeTexture.set(q.TEXTURE0),q.uniform1i(B.uniforms.u_texture,
0),e)?(A.glyphAtlasTexture.bind(q.LINEAR,q.CLAMP_TO_EDGE),q.uniform2fv(B.uniforms.u_texsize,A.glyphAtlasTexture.size)):(x=1!==d.layout.get("icon-size").constantOr(0)||m.iconsNeedLinear,C=l||0!==u.pitch,A.iconAtlasTexture.bind(t||a.options.rotating||a.options.zooming||x||C?q.LINEAR:q.NEAREST,q.CLAMP_TO_EDGE),q.uniform2fv(B.uniforms.u_texsize,A.iconAtlasTexture.size));q.uniformMatrix4fv(B.uniforms.u_matrix,!1,a.translatePosMatrix(w.posMatrix,A,k,g));F=T(A,1,a.transform.zoom);C=E(w.posMatrix,l,h,a.transform,
F);x=w.posMatrix;I=l;J=h;D=a.transform;G=b.mat4.identity(new Float32Array(16));I=(I?(b.mat4.multiply(G,G,x),b.mat4.scale(G,G,[F,F,1]),J||b.mat4.rotateZ(G,G,-D.angle)):(b.mat4.scale(G,G,[1,-1,1]),b.mat4.translate(G,G,[-1,-1,0]),b.mat4.scale(G,G,[2/D.width,2/D.height,1])),G);q.uniformMatrix4fv(B.uniforms.u_gl_coord_matrix,!1,a.translatePosMatrix(I,A,k,g,!0));if(v){q.uniformMatrix4fv(B.uniforms.u_label_plane_matrix,!1,$e);A=m;w=w.posMatrix;m=a;x=e;J=l;D=r;F=x?A.textSizeData:A.iconSizeData;G=b.evaluateSizeForZoom(F,
m.transform.zoom,ad.properties[x?"text-size":"icon-size"]);var H=[256/m.width*2+1,256/m.height*2+1],M=x?A.text.dynamicLayoutVertexArray:A.icon.dynamicLayoutVertexArray;M.clear();for(var Md=A.lineVertexArray,N=x?A.text.placedSymbolArray:A.icon.placedSymbolArray,R=m.transform.width/m.transform.height,kc=!1,P=0;P<N.length;P++){var rc=N.get(P);if(rc.hidden||rc.writingMode===b.WritingMode.vertical&&!kc)O(rc.numGlyphs,M);else{kc=!1;var lc=[rc.anchorX,rc.anchorY,0,1];b.vec4.transformMat4(lc,lc,w);var S=
lc[0]/lc[3],ba=lc[1]/lc[3];if(S>=-H[0]&&S<=H[0]&&ba>=-H[1]&&ba<=H[1]){kc=.5+lc[3]/m.transform.cameraToCenterDistance*.5;lc=b.evaluateSizeForFeature(F,G,rc);lc=J?lc*kc:lc/kc;S=new b.default$1(rc.anchorX,rc.anchorY);ba=K(S,C).point;var ca={},da=L(rc,lc,!1,D,w,C,I,A.glyphOffsetArray,Md,M,ba,S,ca,R);kc=da.useVertical;(da.notEnoughRoom||kc||da.needsFlipping&&L(rc,lc,!0,D,w,C,I,A.glyphOffsetArray,Md,M,ba,S,ca,R).notEnoughRoom)&&O(rc.numGlyphs,M)}else O(rc.numGlyphs,M)}}x?A.text.dynamicLayoutVertexBuffer.updateData(M):
A.icon.dynamicLayoutVertexBuffer.updateData(M)}else q.uniformMatrix4fv(B.uniforms.u_label_plane_matrix,!1,C);q.uniform1f(B.uniforms.u_fade_change,a.options.fadeDuration?a.symbolFadeChange:1);A=B;w=d;m=l;x=a.context;C=x.gl;I=a.transform;t&&(t=0!==w.paint.get(e?"text-halo-width":"icon-halo-width").constantOr(1),C.uniform1f(A.uniforms.u_gamma_scale,m?Math.cos(I._pitch)*I.cameraToCenterDistance:1),t&&(C.uniform1f(A.uniforms.u_is_halo,1),Y(y,w,x,A)),C.uniform1f(A.uniforms.u_is_halo,0));Y(y,w,x,A)}}}}function Y(b,
a,c,d){d.draw(c,c.gl.TRIANGLES,a.id,b.layoutVertexBuffer,b.indexBuffer,b.segments,b.programConfigurations.get(a.id),b.dynamicLayoutVertexBuffer,b.opacityVertexBuffer)}function W(b,a,c,d,f){if(!$b(c.paint.get("fill-pattern"),b))for(var e=!0,k=0;k<d.length;k+=1){var g=d[k],h=a.getTile(g),l=h.getBucket(c);l&&(b.context.setStencilMode(b.stencilModeForClipping(g)),f(b,a,c,h,g,l,e),e=!1)}}function ea(b,a,c,d,f,e,k){a=b.context.gl;var g=e.programConfigurations.get(c.id);na("fill",c.paint.get("fill-pattern"),
b,g,c,d,f,k).draw(b.context,a.TRIANGLES,c.id,e.layoutVertexBuffer,e.indexBuffer,e.segments,g)}function U(b,a,c,d,f,e,k){a=b.context.gl;var g=e.programConfigurations.get(c.id);d=na("fillOutline",c.getPaintProperty("fill-outline-color")?null:c.paint.get("fill-pattern"),b,g,c,d,f,k);a.uniform2f(d.uniforms.u_world,a.drawingBufferWidth,a.drawingBufferHeight);d.draw(b.context,a.LINES,c.id,e.layoutVertexBuffer,e.indexBuffer2,e.segments2,g)}function na(b,a,c,d,f,e,k,g){var h,l=c.context.program.get();return a?
(h=c.useProgram(b+"Pattern",d),(g||h.program!==l)&&(d.setUniforms(c.context,h,f.paint,{zoom:c.transform.zoom}),af(a,c,h)),ed(e,c,h)):(h=c.useProgram(b,d),(g||h.program!==l)&&d.setUniforms(c.context,h,f.paint,{zoom:c.transform.zoom})),c.context.gl.uniformMatrix4fv(h.uniforms.u_matrix,!1,c.translatePosMatrix(k.posMatrix,e,f.paint.get("fill-translate"),f.paint.get("fill-translate-anchor"))),h}function X(b,a,c,d,f,e,k){a=b.context;var g=a.gl,h=c.paint.get("fill-extrusion-pattern"),l=b.context.program.get(),
r=e.programConfigurations.get(c.id),n=b.useProgram(h?"fillExtrusionPattern":"fillExtrusion",r);if((k||n.program!==l)&&r.setUniforms(a,n,c.paint,{zoom:b.transform.zoom}),h){if($b(h,b))return;af(h,b,n);ed(d,b,n);g.uniform1f(n.uniforms.u_height_factor,-Math.pow(2,f.overscaledZ)/d.tileSize/8)}b.context.gl.uniformMatrix4fv(n.uniforms.u_matrix,!1,b.translatePosMatrix(f.posMatrix,d,c.paint.get("fill-extrusion-translate"),c.paint.get("fill-extrusion-translate-anchor")));d=b.context.gl;f=b.style.light;k=f.properties.get("position");
k=[k.x,k.y,k.z];h=dd.create();"viewport"===f.properties.get("anchor")&&dd.fromRotation(h,-b.transform.angle);Ce.transformMat3(k,k,h);b=f.properties.get("color");d.uniform3fv(n.uniforms.u_lightpos,k);d.uniform1f(n.uniforms.u_lightintensity,f.properties.get("intensity"));d.uniform3f(n.uniforms.u_lightcolor,b.r,b.g,b.b);n.draw(a,g.TRIANGLES,c.id,e.layoutVertexBuffer,e.indexBuffer,e.segments,r)}function ha(a,c,d){var f=a.context,e=f.gl,k=c.fbo;if(k){var g=a.useProgram("hillshade"),h=a.transform.calculatePosMatrix(c.tileID.toUnwrapped(),
!0);!function(b,a,c){var d=c.paint.get("hillshade-illumination-direction")*(Math.PI/180);"viewport"===c.paint.get("hillshade-illumination-anchor")&&(d-=a.transform.angle);a.context.gl.uniform2f(b.uniforms.u_light,c.paint.get("hillshade-exaggeration"),d)}(g,a,d);var l=function(a,c){c=c.toCoordinate();var d=new b.default$17(c.column,c.row+1,c.zoom);return[a.transform.coordinateLocation(c).lat,a.transform.coordinateLocation(d).lat]}(a,c.tileID);f.activeTexture.set(e.TEXTURE0);e.bindTexture(e.TEXTURE_2D,
k.colorAttachment.get());e.uniformMatrix4fv(g.uniforms.u_matrix,!1,h);e.uniform2fv(g.uniforms.u_latrange,l);e.uniform1i(g.uniforms.u_image,0);k=d.paint.get("hillshade-shadow-color");e.uniform4f(g.uniforms.u_shadow,k.r,k.g,k.b,k.a);k=d.paint.get("hillshade-highlight-color");e.uniform4f(g.uniforms.u_highlight,k.r,k.g,k.b,k.a);k=d.paint.get("hillshade-accent-color");(e.uniform4f(g.uniforms.u_accent,k.r,k.g,k.b,k.a),c.maskedBoundsBuffer&&c.maskedIndexBuffer&&c.segments)?g.draw(f,e.TRIANGLES,d.id,c.maskedBoundsBuffer,
c.maskedIndexBuffer,c.segments):(c=a.rasterBoundsBuffer,a.rasterBoundsVAO.bind(f,g,c,[]),e.drawArrays(e.TRIANGLE_STRIP,0,c.length))}}function fa(a,c,d,f,e){var k=f.paint.get("raster-fade-duration");if(0<k){var g=pa.now();f=(g-a.timeAdded)/k;k=c?(g-c.timeAdded)/k:-1;d=d.getSource();e=e.coveringZoomLevel({tileSize:d.tileSize,roundZoom:d.roundZoom});e=(e=!c||Math.abs(c.tileID.overscaledZ-e)>Math.abs(a.tileID.overscaledZ-e))&&a.refreshedUponExpiration?1:b.clamp(e?f:1-k,0,1);return a.refreshedUponExpiration&&
1<=f&&(a.refreshedUponExpiration=!1),c?{opacity:1,mix:1-e}:{opacity:e,mix:0}}return{opacity:1,mix:0}}function oa(b,a){if(b.row>a.row){var c=b;b=a;a=c}return{x0:b.column,y0:b.row,x1:a.column,y1:a.row,dx:a.column-b.column,dy:a.row-b.row}}function ua(b,a,c,d,f){c=Math.max(c,Math.floor(a.y0));d=Math.min(d,Math.ceil(a.y1));if(b.x0===a.x0&&b.y0===a.y0?b.x0+a.dy/b.dy*b.dx<a.x1:b.x1-a.dy/b.dy*b.dx<a.x0){var e=b;b=a;a=e}e=b.dx/b.dy;for(var k=a.dx/a.dy,g=0<b.dx,h=0>a.dx;c<d;c++)f(Math.floor(k*Math.max(0,Math.min(a.dy,
c+h-a.y0))+a.x0),Math.ceil(e*Math.max(0,Math.min(b.dy,c+g-b.y0))+b.x0),c)}function Z(b,a,c,d,f,e){var k,g=oa(b,a);a=oa(a,c);b=oa(c,b);g.dy>a.dy&&(k=g,g=a,a=k);g.dy>b.dy&&(k=g,g=b,b=k);a.dy>b.dy&&(k=a,a=b,b=k);g.dy&&ua(b,g,d,f,e);a.dy&&ua(b,a,d,f,e)}function qa(b){return b*(2-b)}function sa(b){b.parentNode&&b.parentNode.removeChild(b)}function V(b,a,c){if(b=new La(b.lng,b.lat),a){var d=new La(b.lng-360,b.lat),f=new La(b.lng+360,b.lat),e=c.locationPoint(b).distSqr(a);c.locationPoint(d).distSqr(a)<e?
b=d:c.locationPoint(f).distSqr(a)<e&&(b=f)}for(;180<Math.abs(b.lng-c.center.lng);){a=c.locationPoint(b);if(0<=a.x&&0<=a.y&&a.x<=c.width&&a.y<=c.height)break;b.lng>c.center.lng?b.lng-=360:b.lng+=360}return b}function ia(b,a,c){b=b.classList;for(var d in Ac)b.remove("mapboxgl-"+c+"-anchor-"+d);b.add("mapboxgl-"+c+"-anchor-"+a)}function Ka(b,a,c){var d,f,e,k,g,h,l=c&&c.maxWidth||100,r=b._container.clientHeight/2;b=(d=b.unproject([0,r]),f=b.unproject([l,r]),e=Math.PI/180,k=d.lat*e,g=f.lat*e,h=Math.sin(k)*
Math.sin(g)+Math.cos(k)*Math.cos(g)*Math.cos((f.lng-d.lng)*e),6371E3*Math.acos(Math.min(h,1)));c&&"imperial"===c.unit?(c=3.2808*b,5280<c?wa(a,l,c/5280,"mi"):wa(a,l,c,"ft")):c&&"nautical"===c.unit?wa(a,l,b/1852,"nm"):wa(a,l,b,"m")}function wa(b,a,c,d){var f,e,k=(f=Math.pow(10,(""+Math.floor(c)).length-1))*(10<=(e=c/f)?10:5<=e?5:3<=e?3:2<=e?2:1);c=k/c;"m"===d&&1E3<=k&&(k/=1E3,d="km");b.style.width=a*c+"px";b.innerHTML=k+d}var Aa=b.createCommonjsModule(function(b){function a(b){return!!("undefined"!=
typeof window&&"undefined"!=typeof document&&Array.prototype&&Array.prototype.every&&Array.prototype.filter&&Array.prototype.forEach&&Array.prototype.indexOf&&Array.prototype.lastIndexOf&&Array.prototype.map&&Array.prototype.some&&Array.prototype.reduce&&Array.prototype.reduceRight&&Array.isArray&&Function.prototype&&Function.prototype.bind&&Object.keys&&Object.create&&Object.getPrototypeOf&&Object.getOwnPropertyNames&&Object.isSealed&&Object.isFrozen&&Object.isExtensible&&Object.getOwnPropertyDescriptor&&
Object.defineProperty&&Object.defineProperties&&Object.seal&&Object.freeze&&Object.preventExtensions&&"JSON"in window&&"parse"in JSON&&"stringify"in JSON&&function(){if(!("Worker"in window&&"Blob"in window&&"URL"in window))return!1;var b=new Blob([""],{type:"text/javascript"});b=URL.createObjectURL(b);try{var a=new Worker(b);var c=!0}catch(De){c=!1}a&&a.terminate();return URL.revokeObjectURL(b),c}()&&"Uint8ClampedArray"in window&&function(b){if(void 0===c[b]){var d=c;var f=document.createElement("canvas");
var e=Object.create(a.webGLContextAttributes);f=(e.failIfMajorPerformanceCaveat=b,f.probablySupportsContext?f.probablySupportsContext("webgl",e)||f.probablySupportsContext("experimental-webgl",e):f.supportsContext?f.supportsContext("webgl",e)||f.supportsContext("experimental-webgl",e):f.getContext("webgl",e)||f.getContext("experimental-webgl",e));d[b]=f}return c[b]}(b&&b.failIfMajorPerformanceCaveat))}b.exports?b.exports=a:window&&(window.mapboxgl=window.mapboxgl||{},window.mapboxgl.supported=a);
var c={};a.webGLContextAttributes={antialias:!1,alpha:!0,stencil:!0,depth:!0}}),Ha=b.default.performance&&b.default.performance.now?b.default.performance.now.bind(b.default.performance):Date.now.bind(Date),Ba=b.default.requestAnimationFrame||b.default.mozRequestAnimationFrame||b.default.webkitRequestAnimationFrame||b.default.msRequestAnimationFrame,va=b.default.cancelAnimationFrame||b.default.mozCancelAnimationFrame||b.default.webkitCancelAnimationFrame||b.default.msCancelAnimationFrame,pa={now:Ha,
frame:function(b){return Ba(b)},cancelFrame:function(b){return va(b)},getImageData:function(a){var c=b.default.document.createElement("canvas"),d=c.getContext("2d");if(!d)throw Error("failed to create canvas 2d context");return c.width=a.width,c.height=a.height,d.drawImage(a,0,0,a.width,a.height),d.getImageData(0,0,a.width,a.height)},hardwareConcurrency:b.default.navigator.hardwareConcurrency||4,get devicePixelRatio(){return b.default.devicePixelRatio},supportsWebp:!1};if(b.default.document){var ya=
b.default.document.createElement("img");ya.onload=function(){pa.supportsWebp=!0};ya.src="data:image/webp;base64,UklGRh4AAABXRUJQVlA4TBEAAAAvAQAAAAfQ//73v/+BiOh/AAA\x3d"}var ka={create:function(a,c,d){a=b.default.document.createElement(a);return c&&(a.className=c),d&&d.appendChild(a),a},createNS:function(a,c){return b.default.document.createElementNS(a,c)}},xa=b.default.document?b.default.document.documentElement.style:null,Ia,aa=a(["userSelect","MozUserSelect","WebkitUserSelect","msUserSelect"]);
ka.disableDrag=function(){xa&&aa&&(Ia=xa[aa],xa[aa]="none")};ka.enableDrag=function(){xa&&aa&&(xa[aa]=Ia)};var Ea=a(["transform","WebkitTransform"]);ka.setTransform=function(b,a){b.style[Ea]=a};var Ja=!1;try{var Na=Object.defineProperty({},"passive",{get:function(){Ja=!0}});b.default.addEventListener("test",Na,Na);b.default.removeEventListener("test",Na,Na)}catch(Ld){Ja=!1}ka.addEventListener=function(b,a,c,d){void 0===d&&(d={});"passive"in d&&Ja?b.addEventListener(a,c,d):b.addEventListener(a,c,d.capture)};
ka.removeEventListener=function(b,a,c,d){void 0===d&&(d={});"passive"in d&&Ja?b.removeEventListener(a,c,d):b.removeEventListener(a,c,d.capture)};var Ra=function(a){a.preventDefault();a.stopPropagation();b.default.removeEventListener("click",Ra,!0)};ka.suppressClick=function(){b.default.addEventListener("click",Ra,!0);b.default.setTimeout(function(){b.default.removeEventListener("click",Ra,!0)},0)};ka.mousePos=function(a,c){var d=a.getBoundingClientRect();return c=c.touches?c.touches[0]:c,new b.default$1(c.clientX-
d.left-a.clientLeft,c.clientY-d.top-a.clientTop)};ka.touchPos=function(a,c){var d=a.getBoundingClientRect(),f=[];c="touchend"===c.type?c.changedTouches:c.touches;for(var e=0;e<c.length;e++)f.push(new b.default$1(c[e].clientX-d.left-a.clientLeft,c[e].clientY-d.top-a.clientTop));return f};ka.mouseButton=function(a){return void 0!==b.default.InstallTrigger&&2===a.button&&a.ctrlKey&&0<=b.default.navigator.platform.toUpperCase().indexOf("MAC")?0:a.button};ka.remove=function(b){b.parentNode&&b.parentNode.removeChild(b)};
var rb={API_URL:"https://api.mapbox.com",REQUIRE_ACCESS_TOKEN:!0,ACCESS_TOKEN:null},Eb=function(b,a){if(!g(b))return b;b=d(b);return b.path="/fonts/v1"+b.path,e(b,a)},dc=function(b,a){if(!g(b))return b;b=d(b);return b.path="/v4/"+b.authority+".json",b.params.push("secure"),e(b,a)},pb=function(b,a,c,k){var h=d(b);return g(b)?(h.path="/styles/v1"+h.path+"/sprite"+a+c,e(h,k)):(h.path+=""+a+c,f(h))},Oa=/(\.(png|jpg)\d*)(?=$)/,Sa=function(b,a,c){if(!a||!g(a))return b;b=d(b);b.path=b.path.replace(Oa,(2<=
pa.devicePixelRatio||512===c?"@2x":"")+(pa.supportsWebp?".webp":"$1"));c=b.params;for(a=0;a<c.length;a++)0===c[a].indexOf("access_token\x3dtk.")&&(c[a]="access_token\x3d"+(rb.ACCESS_TOKEN||""));return f(b)},Ya=/^(\w+):\/\/([^/?]*)(\/[^?]+)?\??(.+)?/,ja=b.default.HTMLImageElement,qb=b.default.HTMLCanvasElement,gb=b.default.HTMLVideoElement,ma=b.default.ImageData,la=function(b,a,c,d){this.context=b;this.format=c;this.texture=b.gl.createTexture();this.update(a,d)};la.prototype.update=function(b,a){var c=
b.width,d=b.height,f=!this.size||this.size[0]!==c||this.size[1]!==d,e=this.context,k=e.gl;this.useMipmap=!(!a||!a.useMipmap);k.bindTexture(k.TEXTURE_2D,this.texture);f?(this.size=[c,d],e.pixelStoreUnpack.set(1),this.format!==k.RGBA||a&&!1===a.premultiply||e.pixelStoreUnpackPremultiplyAlpha.set(!0),b instanceof ja||b instanceof qb||b instanceof gb||b instanceof ma?k.texImage2D(k.TEXTURE_2D,0,this.format,this.format,k.UNSIGNED_BYTE,b):k.texImage2D(k.TEXTURE_2D,0,this.format,c,d,0,this.format,k.UNSIGNED_BYTE,
b.data)):b instanceof ja||b instanceof qb||b instanceof gb||b instanceof ma?k.texSubImage2D(k.TEXTURE_2D,0,0,0,k.RGBA,k.UNSIGNED_BYTE,b):k.texSubImage2D(k.TEXTURE_2D,0,0,0,c,d,k.RGBA,k.UNSIGNED_BYTE,b.data);this.useMipmap&&this.isSizePowerOfTwo()&&k.generateMipmap(k.TEXTURE_2D)};la.prototype.bind=function(b,a,c){var d=this.context.gl;d.bindTexture(d.TEXTURE_2D,this.texture);c!==d.LINEAR_MIPMAP_NEAREST||this.isSizePowerOfTwo()||(c=d.LINEAR);b!==this.filter&&(d.texParameteri(d.TEXTURE_2D,d.TEXTURE_MAG_FILTER,
b),d.texParameteri(d.TEXTURE_2D,d.TEXTURE_MIN_FILTER,c||b),this.filter=b);a!==this.wrap&&(d.texParameteri(d.TEXTURE_2D,d.TEXTURE_WRAP_S,a),d.texParameteri(d.TEXTURE_2D,d.TEXTURE_WRAP_T,a),this.wrap=a)};la.prototype.isSizePowerOfTwo=function(){return this.size[0]===this.size[1]&&0==Math.log(this.size[0])/Math.LN2%1};la.prototype.destroy=function(){this.context.gl.deleteTexture(this.texture);this.texture=null};var db=function(){this.images={};this.loaded=!1;this.requestors=[];this.shelfPack=new b.default$2(64,
64,{autoResize:!0});this.patterns={};this.atlasImage=new b.RGBAImage({width:64,height:64});this.dirty=!0};db.prototype.isLoaded=function(){return this.loaded};db.prototype.setLoaded=function(b){if(this.loaded!==b&&(this.loaded=b,b)){b=0;for(var a=this.requestors;b<a.length;b+=1){var c=a[b];this._notify(c.ids,c.callback)}this.requestors=[]}};db.prototype.getImage=function(b){return this.images[b]};db.prototype.addImage=function(b,a){this.images[b]=a};db.prototype.removeImage=function(b){delete this.images[b];
var a=this.patterns[b];a&&(this.shelfPack.unref(a.bin),delete this.patterns[b])};db.prototype.getImages=function(b,a){var c=!0;if(!this.isLoaded())for(var d=0;d<b.length;d+=1)this.images[b[d]]||(c=!1);this.isLoaded()||c?this._notify(b,a):this.requestors.push({ids:b,callback:a})};db.prototype._notify=function(b,a){for(var c={},d=0;d<b.length;d+=1){var f=b[d],e=this.images[f];e&&(c[f]={data:e.data.clone(),pixelRatio:e.pixelRatio,sdf:e.sdf})}a(null,c)};db.prototype.getPixelSize=function(){return{width:this.shelfPack.w,
height:this.shelfPack.h}};db.prototype.getPattern=function(a){var c=this.patterns[a];if(c)return c.position;var d=this.getImage(a);if(!d)return null;c=this.shelfPack.packOne(d.data.width+2,d.data.height+2);if(!c)return null;this.atlasImage.resize(this.getPixelSize());var f=d.data,e=this.atlasImage,k=c.x+1,g=c.y+1,h=f.width,l=f.height;b.RGBAImage.copy(f,e,{x:0,y:0},{x:k,y:g},{width:h,height:l});b.RGBAImage.copy(f,e,{x:0,y:l-1},{x:k,y:g-1},{width:h,height:1});b.RGBAImage.copy(f,e,{x:0,y:0},{x:k,y:g+
l},{width:h,height:1});b.RGBAImage.copy(f,e,{x:h-1,y:0},{x:k-1,y:g},{width:1,height:l});b.RGBAImage.copy(f,e,{x:0,y:0},{x:k+h,y:g},{width:1,height:l});this.dirty=!0;d=new b.ImagePosition(c,d);return this.patterns[a]={bin:c,position:d},d};db.prototype.bind=function(b){var a=b.gl;this.atlasTexture?this.dirty&&(this.atlasTexture.update(this.atlasImage),this.dirty=!1):this.atlasTexture=new la(b,this.atlasImage,a.RGBA);this.atlasTexture.bind(a.LINEAR,a.CLAMP_TO_EDGE)};c.prototype.draw=function(b){this.ctx.clearRect(0,
0,this.size,this.size);this.ctx.fillText(b,this.buffer,this.middle);b=this.ctx.getImageData(0,0,this.size,this.size);for(var a=new Uint8ClampedArray(this.size*this.size),c=0;c<this.size*this.size;c++){var d=b.data[4*c+3]/255;this.gridOuter[c]=1===d?0:0===d?1E20:Math.pow(Math.max(0,.5-d),2);this.gridInner[c]=1===d?1E20:0===d?0:Math.pow(Math.max(0,d-.5),2)}k(this.gridOuter,this.size,this.size,this.f,this.d,this.v,this.z);k(this.gridInner,this.size,this.size,this.f,this.d,this.v,this.z);for(c=0;c<this.size*
this.size;c++)a[c]=Math.max(0,Math.min(255,Math.round(255-255*((this.gridOuter[c]-this.gridInner[c])/this.radius+this.cutoff))));return a};var Lb=function(b,a){this.requestTransform=b;this.localIdeographFontFamily=a;this.entries={}};Lb.prototype.setURL=function(b){this.url=b};Lb.prototype.getGlyphs=function(a,c){var d=this,f=[],e;for(e in a)for(var k=0,g=a[e];k<g.length;k+=1)f.push({stack:e,id:g[k]});b.asyncAll(f,function(b,a){var c=b.stack,f=b.id,e=d.entries[c];e||(e=d.entries[c]={glyphs:{},requests:{}});
b=e.glyphs[f];if(void 0===b)if(b=d._tinySDF(e,c,f))a(null,{stack:c,id:f,glyph:b});else{var k=Math.floor(f/256);if(65535<256*k)a(Error("glyphs \x3e 65535 not supported"));else{var g=e.requests[k];g||(g=e.requests[k]=[],Lb.loadGlyphRange(c,k,d.url,d.requestTransform,function(b,a){if(a)for(var c in a)e.glyphs[+c]=a[+c];c=0;for(var d=g;c<d.length;c+=1)(0,d[c])(b,a);delete e.requests[k]}));g.push(function(b,d){b?a(b):d&&a(null,{stack:c,id:f,glyph:d[f]||null})})}}else a(null,{stack:c,id:f,glyph:b})},function(b,
a){if(b)c(b);else if(a){b={};for(var d=0;d<a.length;d+=1){var f=a[d],e=f.stack,k=f.id;f=f.glyph;(b[e]||(b[e]={}))[k]=f&&{id:f.id,bitmap:f.bitmap.clone(),metrics:f.metrics}}c(null,b)}})};Lb.prototype._tinySDF=function(a,c,d){var f=this.localIdeographFontFamily;if(f&&(b.default$4["CJK Unified Ideographs"](d)||b.default$4["Hangul Syllables"](d))){var e=a.tinySDF;e||(e="400",/bold/i.test(c)?e="900":/medium/i.test(c)?e="500":/light/i.test(c)&&(e="200"),e=a.tinySDF=new Lb.TinySDF(24,3,8,.25,f,e));return{id:d,
bitmap:new b.AlphaImage({width:30,height:30},e.draw(String.fromCharCode(d))),metrics:{width:24,height:24,left:0,top:-8,advance:24}}}};Lb.loadGlyphRange=function(a,c,d,f,e){c*=256;var k=c+255;a=f(Eb(d).replace("{fontstack}",a).replace("{range}",c+"-"+k),b.ResourceType.Glyphs);b.getArrayBuffer(a,function(a,c){if(a)e(a);else if(c){a={};var d=0;for(c=b.default$3(c.data);d<c.length;d+=1){var f=c[d];a[f.id]=f}e(null,a)}})};Lb.TinySDF=c;var fb=function(){this.specification=b.default$5.light.position};fb.prototype.possiblyEvaluate=
function(a,c){return b.sphericalToCartesian(a.expression.evaluate(c))};fb.prototype.interpolate=function(a,c,d){return{x:b.number(a.x,c.x,d),y:b.number(a.y,c.y,d),z:b.number(a.z,c.z,d)}};var nc=new b.Properties({anchor:new b.DataConstantProperty(b.default$5.light.anchor),position:new fb,color:new b.DataConstantProperty(b.default$5.light.color),intensity:new b.DataConstantProperty(b.default$5.light.intensity)}),nb=function(a){function c(c){a.call(this);this._transitionable=new b.Transitionable(nc);
this.setLight(c);this._transitioning=this._transitionable.untransitioned()}return a&&(c.__proto__=a),c.prototype=Object.create(a&&a.prototype),c.prototype.constructor=c,c.prototype.getLight=function(){return this._transitionable.serialize()},c.prototype.setLight=function(a){if(!this._validate(b.validateLight,a))for(var c in a){var d=a[c];b.endsWith(c,"-transition")?this._transitionable.setTransition(c.slice(0,-11),d):this._transitionable.setValue(c,d)}},c.prototype.updateTransitions=function(b){this._transitioning=
this._transitionable.transitioned(b,this._transitioning)},c.prototype.hasTransition=function(){return this._transitioning.hasTransition()},c.prototype.recalculate=function(b){this.properties=this._transitioning.possiblyEvaluate(b)},c.prototype._validate=function(a,c){return b.emitValidationErrors(this,a.call(b.validateStyle,b.extend({value:c,style:{glyphs:!0,sprite:!0},styleSpec:b.default$5})))},c}(b.Evented),Ec=function(b,a){this.width=b;this.height=a;this.nextRow=0;this.bytes=4;this.data=new Uint8Array(this.width*
this.height*this.bytes);this.positions={}};Ec.prototype.getDash=function(b,a){var c=b.join(",")+String(a);return this.positions[c]||(this.positions[c]=this.addDash(b,a)),this.positions[c]};Ec.prototype.addDash=function(a,c){var d=c?7:0,f=2*d+1;if(this.nextRow+f>this.height)return b.warnOnce("LineAtlas out of space"),null;for(var e=0,k=0;k<a.length;k++)e+=a[k];k=this.width/e;for(var g=k/2,h=1==a.length%2,l=-d;l<=d;l++)for(var r=this.width*(this.nextRow+d+l),n=h?-a[a.length-1]:0,q=a[0],u=1,v=0;v<this.width;v++){for(;q<
v/k;)n=q,q+=a[u],h&&u===a.length-1&&(q+=a[0]),u++;var p=Math.min(Math.abs(v-n*k),Math.abs(v-q*k)),z=1==u%2;if(c){var w=d?l/d*(g+1):0;z?(z=g-Math.abs(w),p=Math.sqrt(p*p+z*z)):p=g-Math.sqrt(p*p+w*w)}else p*=z?1:-1;this.data[3+4*(r+v)]=Math.max(0,Math.min(255,p+128))}a={y:(this.nextRow+d+.5)/this.height,height:2*d/this.height,width:e};return this.nextRow+=f,this.dirty=!0,a};Ec.prototype.bind=function(b){b=b.gl;this.texture?(b.bindTexture(b.TEXTURE_2D,this.texture),this.dirty&&(this.dirty=!1,b.texSubImage2D(b.TEXTURE_2D,
0,0,0,this.width,this.height,b.RGBA,b.UNSIGNED_BYTE,this.data))):(this.texture=b.createTexture(),b.bindTexture(b.TEXTURE_2D,this.texture),b.texParameteri(b.TEXTURE_2D,b.TEXTURE_WRAP_S,b.REPEAT),b.texParameteri(b.TEXTURE_2D,b.TEXTURE_WRAP_T,b.REPEAT),b.texParameteri(b.TEXTURE_2D,b.TEXTURE_MIN_FILTER,b.LINEAR),b.texParameteri(b.TEXTURE_2D,b.TEXTURE_MAG_FILTER,b.LINEAR),b.texImage2D(b.TEXTURE_2D,0,b.RGBA,this.width,this.height,0,b.RGBA,b.UNSIGNED_BYTE,this.data))};var Cb=function kc(a,c){this.workerPool=
a;this.actors=[];this.currentActor=0;this.id=b.uniqueId();a=this.workerPool.acquire(this.id);for(var d=0;d<a.length;d++){var f=new kc.Actor(a[d],c,this.id);f.name="Worker "+d;this.actors.push(f)}};Cb.prototype.broadcast=function(a,c,d){b.asyncAll(this.actors,function(b,d){b.send(a,c,d)},d||function(){})};Cb.prototype.send=function(b,a,c,d){return("number"!=typeof d||isNaN(d))&&(d=this.currentActor=(this.currentActor+1)%this.actors.length),this.actors[d].send(b,a,c),d};Cb.prototype.remove=function(){this.actors.forEach(function(b){b.remove()});
this.actors=[];this.workerPool.release(this.id)};Cb.Actor=b.default$7;var La=function(b,a){if(isNaN(b)||isNaN(a))throw Error("Invalid LngLat object: ("+b+", "+a+")");if(this.lng=+b,this.lat=+a,90<this.lat||-90>this.lat)throw Error("Invalid LngLat latitude value: must be between -90 and 90");};La.prototype.wrap=function(){return new La(b.wrap(this.lng,-180,180),this.lat)};La.prototype.toArray=function(){return[this.lng,this.lat]};La.prototype.toString=function(){return"LngLat("+this.lng+", "+this.lat+
")"};La.prototype.toBounds=function(b){b=360*b/40075017;var a=b/Math.cos(Math.PI/180*this.lat);return new Pa(new La(this.lng-a,this.lat-b),new La(this.lng+a,this.lat+b))};La.convert=function(b){if(b instanceof La)return b;if(Array.isArray(b)&&(2===b.length||3===b.length))return new La(Number(b[0]),Number(b[1]));if(!Array.isArray(b)&&"object"==typeof b&&null!==b)return new La(Number(b.lng),Number(b.lat));throw Error("`LngLatLike` argument must be specified as a LngLat instance, an object {lng: \x3clng\x3e, lat: \x3clat\x3e}, or an array of [\x3clng\x3e, \x3clat\x3e]");
};var Pa=function(b,a){b&&(a?this.setSouthWest(b).setNorthEast(a):4===b.length?this.setSouthWest([b[0],b[1]]).setNorthEast([b[2],b[3]]):this.setSouthWest(b[0]).setNorthEast(b[1]))};Pa.prototype.setNorthEast=function(b){return this._ne=b instanceof La?new La(b.lng,b.lat):La.convert(b),this};Pa.prototype.setSouthWest=function(b){return this._sw=b instanceof La?new La(b.lng,b.lat):La.convert(b),this};Pa.prototype.extend=function(b){var a,c=this._sw,d=this._ne;if(b instanceof La)var f=a=b;else{if(!(b instanceof
Pa))return Array.isArray(b)?b.every(Array.isArray)?this.extend(Pa.convert(b)):this.extend(La.convert(b)):this;if(a=b._sw,f=b._ne,!a||!f)return this}return c||d?(c.lng=Math.min(a.lng,c.lng),c.lat=Math.min(a.lat,c.lat),d.lng=Math.max(f.lng,d.lng),d.lat=Math.max(f.lat,d.lat)):(this._sw=new La(a.lng,a.lat),this._ne=new La(f.lng,f.lat)),this};Pa.prototype.getCenter=function(){return new La((this._sw.lng+this._ne.lng)/2,(this._sw.lat+this._ne.lat)/2)};Pa.prototype.getSouthWest=function(){return this._sw};
Pa.prototype.getNorthEast=function(){return this._ne};Pa.prototype.getNorthWest=function(){return new La(this.getWest(),this.getNorth())};Pa.prototype.getSouthEast=function(){return new La(this.getEast(),this.getSouth())};Pa.prototype.getWest=function(){return this._sw.lng};Pa.prototype.getSouth=function(){return this._sw.lat};Pa.prototype.getEast=function(){return this._ne.lng};Pa.prototype.getNorth=function(){return this._ne.lat};Pa.prototype.toArray=function(){return[this._sw.toArray(),this._ne.toArray()]};
Pa.prototype.toString=function(){return"LngLatBounds("+this._sw.toString()+", "+this._ne.toString()+")"};Pa.prototype.isEmpty=function(){return!(this._sw&&this._ne)};Pa.convert=function(b){return!b||b instanceof Pa?b:new Pa(b)};var Ca=function(b,a,c){this.bounds=Pa.convert(this.validateBounds(b));this.minzoom=a||0;this.maxzoom=c||24};Ca.prototype.validateBounds=function(b){return Array.isArray(b)&&4===b.length?[Math.max(-180,b[0]),Math.max(-90,b[1]),Math.min(180,b[2]),Math.min(90,b[3])]:[-180,-90,
180,90]};Ca.prototype.contains=function(b){var a=Math.floor(this.lngX(this.bounds.getWest(),b.z)),c=Math.floor(this.latY(this.bounds.getNorth(),b.z)),d=Math.ceil(this.lngX(this.bounds.getEast(),b.z)),f=Math.ceil(this.latY(this.bounds.getSouth(),b.z));return b.x>=a&&b.x<d&&b.y>=c&&b.y<f};Ca.prototype.lngX=function(b,a){return Math.pow(2,a)/360*(b+180)};Ca.prototype.latY=function(a,c){a=b.clamp(Math.sin(Math.PI/180*a),-.9999,.9999);return Math.pow(2,c-1)+.5*Math.log((1+a)/(1-a))*-(Math.pow(2,c)/(2*
Math.PI))};var Ta=function(a){function c(c,d,f,e){if(a.call(this),this.id=c,this.dispatcher=f,this.type="vector",this.minzoom=0,this.maxzoom=22,this.scheme="xyz",this.tileSize=512,this.reparseOverscaled=!0,this.isTileClipped=!0,b.extend(this,b.pick(d,["url","scheme","tileSize"])),this._options=b.extend({type:"vector"},d),this._collectResourceTiming=d.collectResourceTiming,512!==this.tileSize)throw Error("vector tile sources must have a tileSize of 512");this.setEventedParent(e)}return a&&(c.__proto__=
a),c.prototype=Object.create(a&&a.prototype),c.prototype.constructor=c,c.prototype.load=function(){var a=this;this.fire(new b.Event("dataloading",{dataType:"source"}));n(this._options,this.map._transformRequest,function(c,d){c?a.fire(new b.ErrorEvent(c)):d&&(b.extend(a,d),d.bounds&&(a.tileBounds=new Ca(d.bounds,a.minzoom,a.maxzoom)),a.fire(new b.Event("data",{dataType:"source",sourceDataType:"metadata"})),a.fire(new b.Event("data",{dataType:"source",sourceDataType:"content"})))})},c.prototype.hasTile=
function(b){return!this.tileBounds||this.tileBounds.contains(b.canonical)},c.prototype.onAdd=function(b){this.map=b;this.load()},c.prototype.serialize=function(){return b.extend({},this._options)},c.prototype.loadTile=function(a,c){function d(b,d){return a.aborted?c(null):b?c(b):(d&&d.resourceTiming&&(a.resourceTiming=d.resourceTiming),this.map._refreshExpiredTiles&&a.setExpiryData(d),a.loadVectorData(d,this.map.painter),c(null),void(a.reloadCallback&&(this.loadTile(a,a.reloadCallback),a.reloadCallback=
null)))}var f=Sa(a.tileID.canonical.url(this.tiles,this.scheme),this.url);f={request:this.map._transformRequest(f,b.ResourceType.Tile),uid:a.uid,tileID:a.tileID,zoom:a.tileID.overscaledZ,tileSize:this.tileSize*a.tileID.overscaleFactor(),type:this.type,source:this.id,pixelRatio:pa.devicePixelRatio,showCollisionBoxes:this.map.showCollisionBoxes};f.request.collectResourceTiming=this._collectResourceTiming;void 0===a.workerID||"expired"===a.state?a.workerID=this.dispatcher.send("loadTile",f,d.bind(this)):
"loading"===a.state?a.reloadCallback=c:this.dispatcher.send("reloadTile",f,d.bind(this),a.workerID)},c.prototype.abortTile=function(b){this.dispatcher.send("abortTile",{uid:b.uid,type:this.type,source:this.id},void 0,b.workerID)},c.prototype.unloadTile=function(b){b.unloadVectorData();this.dispatcher.send("removeTile",{uid:b.uid,type:this.type,source:this.id},void 0,b.workerID)},c.prototype.hasTransition=function(){return!1},c}(b.Evented),ec=function(a){function c(c,d,f,e){a.call(this);this.id=c;
this.dispatcher=f;this.setEventedParent(e);this.type="raster";this.minzoom=0;this.maxzoom=22;this.roundZoom=!0;this.scheme="xyz";this.tileSize=512;this._loaded=!1;this._options=b.extend({},d);b.extend(this,b.pick(d,["url","scheme","tileSize"]))}return a&&(c.__proto__=a),c.prototype=Object.create(a&&a.prototype),c.prototype.constructor=c,c.prototype.load=function(){var a=this;this.fire(new b.Event("dataloading",{dataType:"source"}));n(this._options,this.map._transformRequest,function(c,d){c?a.fire(new b.ErrorEvent(c)):
d&&(b.extend(a,d),d.bounds&&(a.tileBounds=new Ca(d.bounds,a.minzoom,a.maxzoom)),a.fire(new b.Event("data",{dataType:"source",sourceDataType:"metadata"})),a.fire(new b.Event("data",{dataType:"source",sourceDataType:"content"})))})},c.prototype.onAdd=function(b){this.map=b;this.load()},c.prototype.serialize=function(){return b.extend({},this._options)},c.prototype.hasTile=function(b){return!this.tileBounds||this.tileBounds.contains(b.canonical)},c.prototype.loadTile=function(a,c){var d=this,f=Sa(a.tileID.canonical.url(this.tiles,
this.scheme),this.url,this.tileSize);a.request=b.getImage(this.map._transformRequest(f,b.ResourceType.Tile),function(b,f){if(delete a.request,a.aborted)a.state="unloaded",c(null);else if(b)a.state="errored",c(b);else if(f){d.map._refreshExpiredTiles&&a.setExpiryData(f);delete f.cacheControl;delete f.expires;b=d.map.painter.context;var e=b.gl;a.texture=d.map.painter.getTileTexture(f.width);a.texture?a.texture.update(f,{useMipmap:!0}):(a.texture=new la(b,f,e.RGBA,{useMipmap:!0}),a.texture.bind(e.LINEAR,
e.CLAMP_TO_EDGE,e.LINEAR_MIPMAP_NEAREST),b.extTextureFilterAnisotropic&&e.texParameterf(e.TEXTURE_2D,b.extTextureFilterAnisotropic.TEXTURE_MAX_ANISOTROPY_EXT,b.extTextureFilterAnisotropicMax));a.state="loaded";c(null)}})},c.prototype.abortTile=function(b,a){b.request&&(b.request.abort(),delete b.request);a()},c.prototype.unloadTile=function(b,a){b.texture&&this.map.painter.saveTileTexture(b.texture);a()},c.prototype.hasTransition=function(){return!1},c}(b.Evented),qd=function(a){function c(c,d,f,
e){a.call(this,c,d,f,e);this.type="raster-dem";this.maxzoom=22;this._options=b.extend({},d);this.encoding=d.encoding||"mapbox"}return a&&(c.__proto__=a),c.prototype=Object.create(a&&a.prototype),c.prototype.constructor=c,c.prototype.serialize=function(){return{type:"raster-dem",url:this.url,tileSize:this.tileSize,tiles:this.tiles,bounds:this.bounds,encoding:this.encoding}},c.prototype.loadTile=function(a,c){var d=Sa(a.tileID.canonical.url(this.tiles,this.scheme),this.url,this.tileSize);a.request=
b.getImage(this.map._transformRequest(d,b.ResourceType.Tile),function(b,d){(delete a.request,a.aborted)?(a.state="unloaded",c(null)):b?(a.state="errored",c(b)):d&&(this.map._refreshExpiredTiles&&a.setExpiryData(d),delete d.cacheControl,delete d.expires,b=pa.getImageData(d),b={uid:a.uid,coord:a.tileID,source:this.id,rawImageData:b,encoding:this.encoding},a.workerID&&"expired"!==a.state||(a.workerID=this.dispatcher.send("loadDEMTile",b,function(b,d){b&&(a.state="errored",c(b));d&&(a.dem=d,a.needsHillshadePrepare=
!0,a.state="loaded",c(null))}.bind(this))))}.bind(this));a.neighboringTiles=this._getNeighboringTiles(a.tileID)},c.prototype._getNeighboringTiles=function(a){var c=a.canonical,d=Math.pow(2,c.z),f=(c.x-1+d)%d,e=0===c.x?a.wrap-1:a.wrap,k=(c.x+1+d)%d,g=c.x+1===d?a.wrap+1:a.wrap,h={};return h[(new b.OverscaledTileID(a.overscaledZ,e,c.z,f,c.y)).key]={backfilled:!1},h[(new b.OverscaledTileID(a.overscaledZ,g,c.z,k,c.y)).key]={backfilled:!1},0<c.y&&(h[(new b.OverscaledTileID(a.overscaledZ,e,c.z,f,c.y-1)).key]=
{backfilled:!1},h[(new b.OverscaledTileID(a.overscaledZ,a.wrap,c.z,c.x,c.y-1)).key]={backfilled:!1},h[(new b.OverscaledTileID(a.overscaledZ,g,c.z,k,c.y-1)).key]={backfilled:!1}),c.y+1<d&&(h[(new b.OverscaledTileID(a.overscaledZ,e,c.z,f,c.y+1)).key]={backfilled:!1},h[(new b.OverscaledTileID(a.overscaledZ,a.wrap,c.z,c.x,c.y+1)).key]={backfilled:!1},h[(new b.OverscaledTileID(a.overscaledZ,g,c.z,k,c.y+1)).key]={backfilled:!1}),h},c.prototype.unloadTile=function(b){b.demTexture&&this.map.painter.saveTileTexture(b.demTexture);
b.fbo&&(b.fbo.destroy(),delete b.fbo);b.dem&&delete b.dem;delete b.neighboringTiles;b.state="unloaded";this.dispatcher.send("removeDEMTile",{uid:b.uid,source:this.id},void 0,b.workerID)},c}(ec),wc=function(a){function c(c,d,f,e){a.call(this);this.id=c;this.type="geojson";this.minzoom=0;this.maxzoom=18;this.tileSize=512;this.reparseOverscaled=this.isTileClipped=!0;this._removed=!1;this.dispatcher=f;this.setEventedParent(e);this._data=d.data;this._options=b.extend({},d);this._collectResourceTiming=
d.collectResourceTiming;this._resourceTiming=[];void 0!==d.maxzoom&&(this.maxzoom=d.maxzoom);d.type&&(this.type=d.type);c=b.default$8/this.tileSize;this.workerOptions=b.extend({source:this.id,cluster:d.cluster||!1,geojsonVtOptions:{buffer:(void 0!==d.buffer?d.buffer:128)*c,tolerance:(void 0!==d.tolerance?d.tolerance:.375)*c,extent:b.default$8,maxZoom:this.maxzoom,lineMetrics:d.lineMetrics||!1},superclusterOptions:{maxZoom:void 0!==d.clusterMaxZoom?Math.min(d.clusterMaxZoom,this.maxzoom-1):this.maxzoom-
1,extent:b.default$8,radius:(d.clusterRadius||50)*c,log:!1}},d.workerOptions)}return a&&(c.__proto__=a),c.prototype=Object.create(a&&a.prototype),c.prototype.constructor=c,c.prototype.load=function(){var a=this;this.fire(new b.Event("dataloading",{dataType:"source"}));this._updateWorkerData(function(c){c?a.fire(new b.ErrorEvent(c)):(c={dataType:"source",sourceDataType:"metadata"},a._collectResourceTiming&&a._resourceTiming&&0<a._resourceTiming.length&&(c.resourceTiming=a._resourceTiming,a._resourceTiming=
[]),a.fire(new b.Event("data",c)))})},c.prototype.onAdd=function(b){this.map=b;this.load()},c.prototype.setData=function(a){var c=this;return this._data=a,this.fire(new b.Event("dataloading",{dataType:"source"})),this._updateWorkerData(function(a){if(a)return c.fire(new b.ErrorEvent(a));a={dataType:"source",sourceDataType:"content"};c._collectResourceTiming&&c._resourceTiming&&0<c._resourceTiming.length&&(a.resourceTiming=c._resourceTiming,c._resourceTiming=[]);c.fire(new b.Event("data",a))}),this},
c.prototype._updateWorkerData=function(a){var c,d=this,f=b.extend({},this.workerOptions),e=this._data;"string"==typeof e?(f.request=this.map._transformRequest(((c=b.default.document.createElement("a")).href=e,c.href),b.ResourceType.Source),f.request.collectResourceTiming=this._collectResourceTiming):f.data=JSON.stringify(e);this.workerID=this.dispatcher.send(this.type+"."+f.source+".loadData",f,function(b,c){d._removed||c&&c.abandoned||(d._loaded=!0,c&&c.resourceTiming&&c.resourceTiming[d.id]&&(d._resourceTiming=
c.resourceTiming[d.id].slice(0)),d.dispatcher.send(d.type+"."+f.source+".coalesce",null,null,d.workerID),a(b))},this.workerID)},c.prototype.loadTile=function(b,a){var c=this,d=void 0===b.workerID?"loadTile":"reloadTile";b.workerID=this.dispatcher.send(d,{type:this.type,uid:b.uid,tileID:b.tileID,zoom:b.tileID.overscaledZ,maxZoom:this.maxzoom,tileSize:this.tileSize,source:this.id,pixelRatio:pa.devicePixelRatio,showCollisionBoxes:this.map.showCollisionBoxes},function(f,e){return b.unloadVectorData(),
b.aborted?a(null):f?a(f):(b.loadVectorData(e,c.map.painter,"reloadTile"===d),a(null))},this.workerID)},c.prototype.abortTile=function(b){b.aborted=!0},c.prototype.unloadTile=function(b){b.unloadVectorData();this.dispatcher.send("removeTile",{uid:b.uid,type:this.type,source:this.id},null,b.workerID)},c.prototype.onRemove=function(){this._removed=!0;this.dispatcher.send("removeSource",{type:this.type,source:this.id},null,this.workerID)},c.prototype.serialize=function(){return b.extend({},this._options,
{type:this.type,data:this._data})},c.prototype.hasTransition=function(){return!1},c}(b.Evented),zb=b.createLayout([{name:"a_pos",type:"Int16",components:2},{name:"a_texture_pos",type:"Int16",components:2}]),mb=function(){this.boundLayoutVertexBuffer=this.boundProgram=null;this.boundPaintVertexBuffers=[];this.vao=this.boundDynamicVertexBuffer=this.boundVertexOffset=this.boundIndexBuffer=null};mb.prototype.bind=function(b,a,c,d,f,e,k,g){this.context=b;for(var h=this.boundPaintVertexBuffers.length!==
d.length,l=0;!h&&l<d.length;l++)this.boundPaintVertexBuffers[l]!==d[l]&&(h=!0);h=!this.vao||this.boundProgram!==a||this.boundLayoutVertexBuffer!==c||h||this.boundIndexBuffer!==f||this.boundVertexOffset!==e||this.boundDynamicVertexBuffer!==k||this.boundDynamicVertexBuffer2!==g;!b.extVertexArrayObject||h?this.freshBind(a,c,d,f,e,k,g):(b.bindVertexArrayOES.set(this.vao),k&&k.bind(),f&&f.dynamicDraw&&f.bind(),g&&g.bind())};mb.prototype.freshBind=function(b,a,c,d,f,e,k){var g=b.numAttributes,h=this.context,
l=h.gl;if(h.extVertexArrayObject)this.vao&&this.destroy(),this.vao=h.extVertexArrayObject.createVertexArrayOES(),h.bindVertexArrayOES.set(this.vao),this.boundProgram=b,this.boundLayoutVertexBuffer=a,this.boundPaintVertexBuffers=c,this.boundIndexBuffer=d,this.boundVertexOffset=f,this.boundDynamicVertexBuffer=e,this.boundDynamicVertexBuffer2=k;else{var r=h.currentNumAttributes||0;for(var n=g;n<r;n++)l.disableVertexAttribArray(n)}a.enableAttributes(l,b);for(r=0;r<c.length;r+=1)c[r].enableAttributes(l,
b);e&&e.enableAttributes(l,b);k&&k.enableAttributes(l,b);a.bind();a.setVertexAttribPointers(l,b,f);for(a=0;a<c.length;a+=1)r=c[a],r.bind(),r.setVertexAttribPointers(l,b,f);e&&(e.bind(),e.setVertexAttribPointers(l,b,f));d&&d.bind();k&&(k.bind(),k.setVertexAttribPointers(l,b,f));h.currentNumAttributes=g};mb.prototype.destroy=function(){this.vao&&(this.context.extVertexArrayObject.deleteVertexArrayOES(this.vao),this.vao=null)};var Kb=function(a){function c(b,c,d,f){a.call(this);this.id=b;this.dispatcher=
d;this.coordinates=c.coordinates;this.type="image";this.minzoom=0;this.maxzoom=22;this.tileSize=512;this.tiles={};this.setEventedParent(f);this.options=c}return a&&(c.__proto__=a),c.prototype=Object.create(a&&a.prototype),c.prototype.constructor=c,c.prototype.load=function(){var a=this;this.fire(new b.Event("dataloading",{dataType:"source"}));this.url=this.options.url;b.getImage(this.map._transformRequest(this.url,b.ResourceType.Image),function(c,d){c?a.fire(new b.ErrorEvent(c)):d&&(a.image=pa.getImageData(d),
a._finishLoading())})},c.prototype._finishLoading=function(){this.map&&(this.setCoordinates(this.coordinates),this.fire(new b.Event("data",{dataType:"source",sourceDataType:"metadata"})))},c.prototype.onAdd=function(b){this.map=b;this.load()},c.prototype.setCoordinates=function(a){this.coordinates=a;var c=this.map;a=a.map(function(b){return c.transform.locationCoordinate(La.convert(b)).zoomTo(0)});var d=this.centerCoord=b.getCoordinatesCenter(a);d.column=Math.floor(d.column);d.row=Math.floor(d.row);
this.tileID=new b.CanonicalTileID(d.zoom,d.column,d.row);this.minzoom=this.maxzoom=d.zoom;a=a.map(function(a){a=a.zoomTo(d.zoom);return new b.default$1(Math.round((a.column-d.column)*b.default$8),Math.round((a.row-d.row)*b.default$8))});return this._boundsArray=new b.RasterBoundsArray,this._boundsArray.emplaceBack(a[0].x,a[0].y,0,0),this._boundsArray.emplaceBack(a[1].x,a[1].y,b.default$8,0),this._boundsArray.emplaceBack(a[3].x,a[3].y,0,b.default$8),this._boundsArray.emplaceBack(a[2].x,a[2].y,b.default$8,
b.default$8),this.boundsBuffer&&(this.boundsBuffer.destroy(),delete this.boundsBuffer),this.fire(new b.Event("data",{dataType:"source",sourceDataType:"content"})),this},c.prototype.prepare=function(){if(0!==Object.keys(this.tiles).length&&this.image){var b=this.map.painter.context,a=b.gl,c;for(c in this.boundsBuffer||(this.boundsBuffer=b.createVertexBuffer(this._boundsArray,zb.members)),this.boundsVAO||(this.boundsVAO=new mb),this.texture||(this.texture=new la(b,this.image,a.RGBA),this.texture.bind(a.LINEAR,
a.CLAMP_TO_EDGE)),this.tiles)b=this.tiles[c],"loaded"!==b.state&&(b.state="loaded",b.texture=this.texture)}},c.prototype.loadTile=function(b,a){this.tileID&&this.tileID.equals(b.tileID.canonical)?(this.tiles[String(b.tileID.wrap)]=b,b.buckets={},a(null)):(b.state="errored",a(null))},c.prototype.serialize=function(){return{type:"image",url:this.options.url,coordinates:this.coordinates}},c.prototype.hasTransition=function(){return!1},c}(b.Evented),Oc=function(a){function c(b,c,d,f){a.call(this,b,c,
d,f);this.roundZoom=!0;this.type="video";this.options=c}return a&&(c.__proto__=a),c.prototype=Object.create(a&&a.prototype),c.prototype.constructor=c,c.prototype.load=function(){var a=this,c=this.options;this.urls=[];var d=0;for(c=c.urls;d<c.length;d+=1)a.urls.push(a.map._transformRequest(c[d],b.ResourceType.Source).url);b.getVideo(this.urls,function(c,d){c?a.fire(new b.ErrorEvent(c)):d&&(a.video=d,a.video.loop=!0,a.video.addEventListener("playing",function(){a.map._rerender()}),a.map&&a.video.play(),
a._finishLoading())})},c.prototype.getVideo=function(){return this.video},c.prototype.onAdd=function(b){this.map||(this.map=b,this.load(),this.video&&(this.video.play(),this.setCoordinates(this.coordinates)))},c.prototype.prepare=function(){if(!(0===Object.keys(this.tiles).length||2>this.video.readyState)){var b=this.map.painter.context,a=b.gl,c;for(c in this.boundsBuffer||(this.boundsBuffer=b.createVertexBuffer(this._boundsArray,zb.members)),this.boundsVAO||(this.boundsVAO=new mb),this.texture?this.video.paused||
(this.texture.bind(a.LINEAR,a.CLAMP_TO_EDGE),a.texSubImage2D(a.TEXTURE_2D,0,0,0,a.RGBA,a.UNSIGNED_BYTE,this.video)):(this.texture=new la(b,this.video,a.RGBA),this.texture.bind(a.LINEAR,a.CLAMP_TO_EDGE)),this.tiles)b=this.tiles[c],"loaded"!==b.state&&(b.state="loaded",b.texture=this.texture)}},c.prototype.serialize=function(){return{type:"video",urls:this.urls,coordinates:this.coordinates}},c.prototype.hasTransition=function(){return this.video&&!this.video.paused},c}(Kb),vb=function(a){function c(c,
d,f,e){a.call(this,c,d,f,e);d.coordinates?Array.isArray(d.coordinates)&&4===d.coordinates.length&&!d.coordinates.some(function(b){return!Array.isArray(b)||2!==b.length||b.some(function(b){return"number"!=typeof b})})||this.fire(new b.ErrorEvent(new b.default$9("sources."+c,null,'"coordinates" property must be an array of 4 longitude/latitude array pairs'))):this.fire(new b.ErrorEvent(new b.default$9("sources."+c,null,'missing required property "coordinates"')));d.animate&&"boolean"!=typeof d.animate&&
this.fire(new b.ErrorEvent(new b.default$9("sources."+c,null,'optional "animate" property must be a boolean value')));d.canvas?"string"==typeof d.canvas||d.canvas instanceof b.default.HTMLCanvasElement||this.fire(new b.ErrorEvent(new b.default$9("sources."+c,null,'"canvas" must be either a string representing the ID of the canvas element from which to read, or an HTMLCanvasElement instance'))):this.fire(new b.ErrorEvent(new b.default$9("sources."+c,null,'missing required property "canvas"')));this.options=
d;this.animate=void 0===d.animate||d.animate}return a&&(c.__proto__=a),c.prototype=Object.create(a&&a.prototype),c.prototype.constructor=c,c.prototype.load=function(){this.canvas||(this.canvas=this.options.canvas instanceof b.default.HTMLCanvasElement?this.options.canvas:b.default.document.getElementById(this.options.canvas));this.width=this.canvas.width;this.height=this.canvas.height;this._hasInvalidDimensions()?this.fire(new b.ErrorEvent(Error("Canvas dimensions cannot be less than or equal to zero."))):
(this.play=function(){this._playing=!0;this.map._rerender()},this.pause=function(){this._playing=!1},this._finishLoading())},c.prototype.getCanvas=function(){return this.canvas},c.prototype.onAdd=function(b){this.map=b;this.load();this.canvas&&this.animate&&this.play()},c.prototype.onRemove=function(){this.pause()},c.prototype.prepare=function(){var b=!1;if(this.canvas.width!==this.width&&(this.width=this.canvas.width,b=!0),this.canvas.height!==this.height&&(this.height=this.canvas.height,b=!0),!this._hasInvalidDimensions()&&
0!==Object.keys(this.tiles).length){var a=this.map.painter.context,c=a.gl,d;for(d in this.boundsBuffer||(this.boundsBuffer=a.createVertexBuffer(this._boundsArray,zb.members)),this.boundsVAO||(this.boundsVAO=new mb),this.texture?b?this.texture.update(this.canvas):this._playing&&(this.texture.bind(c.LINEAR,c.CLAMP_TO_EDGE),c.texSubImage2D(c.TEXTURE_2D,0,0,0,c.RGBA,c.UNSIGNED_BYTE,this.canvas)):(this.texture=new la(a,this.canvas,c.RGBA),this.texture.bind(c.LINEAR,c.CLAMP_TO_EDGE)),this.tiles)b=this.tiles[d],
"loaded"!==b.state&&(b.state="loaded",b.texture=this.texture)}},c.prototype.serialize=function(){return{type:"canvas",coordinates:this.coordinates}},c.prototype.hasTransition=function(){return this._playing},c.prototype._hasInvalidDimensions=function(){for(var b=0,a=[this.canvas.width,this.canvas.height];b<a.length;b+=1){var c=a[b];if(isNaN(c)||0>=c)return!0}return!1},c}(Kb),xc={vector:Ta,raster:ec,"raster-dem":qd,geojson:wc,video:Oc,image:Kb,canvas:vb},Qd=function(a,c,d,f){c=new xc[c.type](a,c,d,
f);if(c.id!==a)throw Error("Expected Source id to be "+a+" instead of "+c.id);return b.bindAll(["load","abort","unload","serialize","prepare"],c),c},Bb=function(a,c){this.tileID=a;this.uid=b.uniqueId();this.uses=0;this.tileSize=c;this.buckets={};this.expirationTime=null;this.expiredRequestCount=this.queryPadding=0;this.state="loading"};Bb.prototype.registerFadeDuration=function(b){b+=this.timeAdded;b<pa.now()||this.fadeEndTime&&b<this.fadeEndTime||(this.fadeEndTime=b)};Bb.prototype.wasRequested=function(){return"errored"===
this.state||"loaded"===this.state||"reloading"===this.state};Bb.prototype.loadVectorData=function(a,c,d){if(this.hasData()&&this.unloadVectorData(),this.state="loaded",a){if(a.featureIndex&&(this.latestFeatureIndex=a.featureIndex,a.rawTileData?(this.latestRawTileData=a.rawTileData,this.latestFeatureIndex.rawTileData=a.rawTileData):this.latestRawTileData&&(this.latestFeatureIndex.rawTileData=this.latestRawTileData)),this.collisionBoxArray=a.collisionBoxArray,this.buckets=function(b,a){var c={};if(!a)return c;
for(var d=0;d<b.length;d+=1){var f=b[d],e=f.layerIds.map(function(b){return a.getLayer(b)}).filter(Boolean);if(0!==e.length){f.layers=e;for(var k=0;k<e.length;k+=1)c[e[k].id]=f}}return c}(a.buckets,c.style),d)for(var f in this.buckets)d=this.buckets[f],d instanceof b.default$14&&(d.justReloaded=!0);for(var e in this.queryPadding=0,this.buckets)f=this.buckets[e],this.queryPadding=Math.max(this.queryPadding,c.style.getLayer(f.layerIds[0]).queryRadius(f));a.iconAtlasImage&&(this.iconAtlasImage=a.iconAtlasImage);
a.glyphAtlasImage&&(this.glyphAtlasImage=a.glyphAtlasImage)}else this.collisionBoxArray=new b.CollisionBoxArray};Bb.prototype.unloadVectorData=function(){for(var b in this.buckets)this.buckets[b].destroy();this.buckets={};this.iconAtlasTexture&&this.iconAtlasTexture.destroy();this.glyphAtlasTexture&&this.glyphAtlasTexture.destroy();this.latestFeatureIndex=null;this.state="unloaded"};Bb.prototype.unloadDEMData=function(){this.neighboringTiles=this.dem=null;this.state="unloaded"};Bb.prototype.getBucket=
function(b){return this.buckets[b.id]};Bb.prototype.upload=function(b){for(var a in this.buckets){var c=this.buckets[a];c.uploaded||(c.upload(b),c.uploaded=!0)}a=b.gl;this.iconAtlasImage&&(this.iconAtlasTexture=new la(b,this.iconAtlasImage,a.RGBA),this.iconAtlasImage=null);this.glyphAtlasImage&&(this.glyphAtlasTexture=new la(b,this.glyphAtlasImage,a.ALPHA),this.glyphAtlasImage=null)};Bb.prototype.queryRenderedFeatures=function(b,a,c,d,f,e,k){return this.latestFeatureIndex&&this.latestFeatureIndex.rawTileData?
this.latestFeatureIndex.query({queryGeometry:a,scale:c,tileSize:this.tileSize,posMatrix:k,transform:f,params:d,queryPadding:this.queryPadding*e},b):{}};Bb.prototype.querySourceFeatures=function(a,c){if(this.latestFeatureIndex&&this.latestFeatureIndex.rawTileData){var d=this.latestFeatureIndex.loadVTLayers(),f=c?c.sourceLayer:"";if(d=d._geojsonTileLayer||d[f]){c=b.default$13(c&&c.filter);f={z:this.tileID.overscaledZ,x:this.tileID.canonical.x,y:this.tileID.canonical.y};for(var e=0;e<d.length;e++){var k=
d.feature(e);c(new b.default$16(this.tileID.overscaledZ),k)&&(k=new b.default$12(k,f.z,f.x,f.y),k.tile=f,a.push(k))}}}};Bb.prototype.clearMask=function(){this.segments&&(this.segments.destroy(),delete this.segments);this.maskedBoundsBuffer&&(this.maskedBoundsBuffer.destroy(),delete this.maskedBoundsBuffer);this.maskedIndexBuffer&&(this.maskedIndexBuffer.destroy(),delete this.maskedIndexBuffer)};Bb.prototype.setMask=function(a,c){if(!b.default$10(this.mask,a)&&(this.mask=a,this.clearMask(),!b.default$10(a,
{0:!0}))){var d=new b.RasterBoundsArray,f=new b.TriangleIndexArray;this.segments=new b.default$15;this.segments.prepareSegment(0,d,f);for(var e=Object.keys(a),k=0;k<e.length;k++){var g=a[e[k]],h=b.default$8>>g.z;g=new b.default$1(g.x*h,g.y*h);var l=new b.default$1(g.x+h,g.y+h);h=this.segments.prepareSegment(4,d,f);d.emplaceBack(g.x,g.y,g.x,g.y);d.emplaceBack(l.x,g.y,l.x,g.y);d.emplaceBack(g.x,l.y,g.x,l.y);d.emplaceBack(l.x,l.y,l.x,l.y);g=h.vertexLength;f.emplaceBack(g,g+1,g+2);f.emplaceBack(g+1,g+
2,g+3);h.vertexLength+=4;h.primitiveLength+=2}this.maskedBoundsBuffer=c.createVertexBuffer(d,zb.members);this.maskedIndexBuffer=c.createIndexBuffer(f)}};Bb.prototype.hasData=function(){return"loaded"===this.state||"reloading"===this.state||"expired"===this.state};Bb.prototype.setExpiryData=function(a){var c=this.expirationTime;a.cacheControl?(a=b.parseCacheControl(a.cacheControl),a["max-age"]&&(this.expirationTime=Date.now()+1E3*a["max-age"])):a.expires&&(this.expirationTime=(new Date(a.expires)).getTime());
if(this.expirationTime){a=Date.now();var d=!1;this.expirationTime>a?d=!1:c?this.expirationTime<c?d=!0:(c=this.expirationTime-c)?this.expirationTime=a+Math.max(c,3E4):d=!0:d=!0;d?(this.expiredRequestCount++,this.state="expired"):this.expiredRequestCount=0}};Bb.prototype.getExpiryTimeout=function(){if(this.expirationTime)return this.expiredRequestCount?1E3*(1<<Math.min(this.expiredRequestCount-1,31)):Math.min(this.expirationTime-(new Date).getTime(),Math.pow(2,31)-1)};var yc=function(b,a){this.max=
b;this.onRemove=a;this.reset()};yc.prototype.reset=function(){for(var b in this.data)for(var a=0,c=this.data[b];a<c.length;a+=1){var d=c[a];d.timeout&&clearTimeout(d.timeout);this.onRemove(d.value)}return this.data={},this.order=[],this};yc.prototype.add=function(b,a,c){var d=this,f=b.wrapped().key;void 0===this.data[f]&&(this.data[f]=[]);var e={value:a,timeout:void 0};(void 0!==c&&(e.timeout=setTimeout(function(){d.remove(b,e)},c)),this.data[f].push(e),this.order.push(f),this.order.length>this.max)&&
(a=this._getAndRemoveByKey(this.order[0]))&&this.onRemove(a);return this};yc.prototype.has=function(b){return b.wrapped().key in this.data};yc.prototype.getAndRemove=function(b){return this.has(b)?this._getAndRemoveByKey(b.wrapped().key):null};yc.prototype._getAndRemoveByKey=function(b){var a=this.data[b].shift();return a.timeout&&clearTimeout(a.timeout),0===this.data[b].length&&delete this.data[b],this.order.splice(this.order.indexOf(b),1),a.value};yc.prototype.get=function(b){return this.has(b)?
this.data[b.wrapped().key][0].value:null};yc.prototype.remove=function(b,a){if(!this.has(b))return this;b=b.wrapped().key;a=void 0===a?0:this.data[b].indexOf(a);var c=this.data[b][a];return this.data[b].splice(a,1),c.timeout&&clearTimeout(c.timeout),0===this.data[b].length&&delete this.data[b],this.onRemove(c.value),this.order.splice(this.order.indexOf(b),1),this};yc.prototype.setMaxSize=function(b){for(this.max=b;this.order.length>this.max;)(b=this._getAndRemoveByKey(this.order[0]))&&this.onRemove(b);
return this};var Cc=function(b,a,c){this.context=b;var d=b.gl;this.buffer=d.createBuffer();this.dynamicDraw=!!c;this.unbindVAO();b.bindElementBuffer.set(this.buffer);d.bufferData(d.ELEMENT_ARRAY_BUFFER,a.arrayBuffer,this.dynamicDraw?d.DYNAMIC_DRAW:d.STATIC_DRAW);this.dynamicDraw||delete a.arrayBuffer};Cc.prototype.unbindVAO=function(){this.context.extVertexArrayObject&&this.context.bindVertexArrayOES.set(null)};Cc.prototype.bind=function(){this.context.bindElementBuffer.set(this.buffer)};Cc.prototype.updateData=
function(b){var a=this.context.gl;this.unbindVAO();this.bind();a.bufferSubData(a.ELEMENT_ARRAY_BUFFER,0,b.arrayBuffer)};Cc.prototype.destroy=function(){var b=this.context.gl;this.buffer&&(b.deleteBuffer(this.buffer),delete this.buffer)};var Zd={Int8:"BYTE",Uint8:"UNSIGNED_BYTE",Int16:"SHORT",Uint16:"UNSIGNED_SHORT",Int32:"INT",Uint32:"UNSIGNED_INT",Float32:"FLOAT"},Wc=function(b,a,c,d){this.length=a.length;this.attributes=c;this.itemSize=a.bytesPerElement;this.dynamicDraw=d;this.context=b;c=b.gl;
this.buffer=c.createBuffer();b.bindVertexBuffer.set(this.buffer);c.bufferData(c.ARRAY_BUFFER,a.arrayBuffer,this.dynamicDraw?c.DYNAMIC_DRAW:c.STATIC_DRAW);this.dynamicDraw||delete a.arrayBuffer};Wc.prototype.bind=function(){this.context.bindVertexBuffer.set(this.buffer)};Wc.prototype.updateData=function(b){var a=this.context.gl;this.bind();a.bufferSubData(a.ARRAY_BUFFER,0,b.arrayBuffer)};Wc.prototype.enableAttributes=function(b,a){for(var c=0;c<this.attributes.length;c++){var d=a.attributes[this.attributes[c].name];
void 0!==d&&b.enableVertexAttribArray(d)}};Wc.prototype.setVertexAttribPointers=function(b,a,c){for(var d=0;d<this.attributes.length;d++){var f=this.attributes[d],e=a.attributes[f.name];void 0!==e&&b.vertexAttribPointer(e,f.components,b[Zd[f.type]],!1,this.itemSize,f.offset+this.itemSize*(c||0))}};Wc.prototype.destroy=function(){var b=this.context.gl;this.buffer&&(b.deleteBuffer(this.buffer),delete this.buffer)};var $d=function(a){this.context=a;this.current=b.default$6.transparent};$d.prototype.get=
function(){return this.current};$d.prototype.set=function(b){var a=this.current;b.r===a.r&&b.g===a.g&&b.b===a.b&&b.a===a.a||(this.context.gl.clearColor(b.r,b.g,b.b,b.a),this.current=b)};var tc=function(b){this.context=b;this.current=1};tc.prototype.get=function(){return this.current};tc.prototype.set=function(b){this.current!==b&&(this.context.gl.clearDepth(b),this.current=b)};var Dc=function(b){this.context=b;this.current=0};Dc.prototype.get=function(){return this.current};Dc.prototype.set=function(b){this.current!==
b&&(this.context.gl.clearStencil(b),this.current=b)};var Qa=function(b){this.context=b;this.current=[!0,!0,!0,!0]};Qa.prototype.get=function(){return this.current};Qa.prototype.set=function(b){var a=this.current;b[0]===a[0]&&b[1]===a[1]&&b[2]===a[2]&&b[3]===a[3]||(this.context.gl.colorMask(b[0],b[1],b[2],b[3]),this.current=b)};var Xc=function(b){this.context=b;this.current=!0};Xc.prototype.get=function(){return this.current};Xc.prototype.set=function(b){this.current!==b&&(this.context.gl.depthMask(b),
this.current=b)};var rd=function(b){this.context=b;this.current=255};rd.prototype.get=function(){return this.current};rd.prototype.set=function(b){this.current!==b&&(this.context.gl.stencilMask(b),this.current=b)};var Yc=function(b){this.context=b;this.current={func:b.gl.ALWAYS,ref:0,mask:255}};Yc.prototype.get=function(){return this.current};Yc.prototype.set=function(b){var a=this.current;b.func===a.func&&b.ref===a.ref&&b.mask===a.mask||(this.context.gl.stencilFunc(b.func,b.ref,b.mask),this.current=
b)};var sd=function(b){this.context=b;b=this.context.gl;this.current=[b.KEEP,b.KEEP,b.KEEP]};sd.prototype.get=function(){return this.current};sd.prototype.set=function(b){var a=this.current;b[0]===a[0]&&b[1]===a[1]&&b[2]===a[2]||(this.context.gl.stencilOp(b[0],b[1],b[2]),this.current=b)};var Zc=function(b){this.context=b;this.current=!1};Zc.prototype.get=function(){return this.current};Zc.prototype.set=function(b){if(this.current!==b){var a=this.context.gl;b?a.enable(a.STENCIL_TEST):a.disable(a.STENCIL_TEST);
this.current=b}};var Rd=function(b){this.context=b;this.current=[0,1]};Rd.prototype.get=function(){return this.current};Rd.prototype.set=function(b){var a=this.current;b[0]===a[0]&&b[1]===a[1]||(this.context.gl.depthRange(b[0],b[1]),this.current=b)};var mh=function(b){this.context=b;this.current=!1};mh.prototype.get=function(){return this.current};mh.prototype.set=function(b){if(this.current!==b){var a=this.context.gl;b?a.enable(a.DEPTH_TEST):a.disable(a.DEPTH_TEST);this.current=b}};var ae=function(b){this.context=
b;this.current=b.gl.LESS};ae.prototype.get=function(){return this.current};ae.prototype.set=function(b){this.current!==b&&(this.context.gl.depthFunc(b),this.current=b)};var $c=function(b){this.context=b;this.current=!1};$c.prototype.get=function(){return this.current};$c.prototype.set=function(b){if(this.current!==b){var a=this.context.gl;b?a.enable(a.BLEND):a.disable(a.BLEND);this.current=b}};var td=function(b){this.context=b;b=this.context.gl;this.current=[b.ONE,b.ZERO]};td.prototype.get=function(){return this.current};
td.prototype.set=function(b){var a=this.current;b[0]===a[0]&&b[1]===a[1]||(this.context.gl.blendFunc(b[0],b[1]),this.current=b)};var pe=function(a){this.context=a;this.current=b.default$6.transparent};pe.prototype.get=function(){return this.current};pe.prototype.set=function(b){var a=this.current;b.r===a.r&&b.g===a.g&&b.b===a.b&&b.a===a.a||(this.context.gl.blendColor(b.r,b.g,b.b,b.a),this.current=b)};var bb=function(b){this.context=b;this.current=null};bb.prototype.get=function(){return this.current};
bb.prototype.set=function(b){this.current!==b&&(this.context.gl.useProgram(b),this.current=b)};var ib=function(b){this.context=b;this.current=1};ib.prototype.get=function(){return this.current};ib.prototype.set=function(a){var c=this.context.lineWidthRange;c=b.clamp(a,c[0],c[1]);this.current!==c&&(this.context.gl.lineWidth(c),this.current=a)};var qe=function(b){this.context=b;this.current=b.gl.TEXTURE0};qe.prototype.get=function(){return this.current};qe.prototype.set=function(b){this.current!==b&&
(this.context.gl.activeTexture(b),this.current=b)};var zc=function(b){this.context=b;b=this.context.gl;this.current=[0,0,b.drawingBufferWidth,b.drawingBufferHeight]};zc.prototype.get=function(){return this.current};zc.prototype.set=function(b){var a=this.current;b[0]===a[0]&&b[1]===a[1]&&b[2]===a[2]&&b[3]===a[3]||(this.context.gl.viewport(b[0],b[1],b[2],b[3]),this.current=b)};var re=function(b){this.context=b;this.current=null};re.prototype.get=function(){return this.current};re.prototype.set=function(b){if(this.current!==
b){var a=this.context.gl;a.bindFramebuffer(a.FRAMEBUFFER,b);this.current=b}};var Ib=function(b){this.context=b;this.current=null};Ib.prototype.get=function(){return this.current};Ib.prototype.set=function(b){if(this.current!==b){var a=this.context.gl;a.bindRenderbuffer(a.RENDERBUFFER,b);this.current=b}};var Fc=function(b){this.context=b;this.current=null};Fc.prototype.get=function(){return this.current};Fc.prototype.set=function(b){if(this.current!==b){var a=this.context.gl;a.bindTexture(a.TEXTURE_2D,
b);this.current=b}};var se=function(b){this.context=b;this.current=null};se.prototype.get=function(){return this.current};se.prototype.set=function(b){if(this.current!==b){var a=this.context.gl;a.bindBuffer(a.ARRAY_BUFFER,b);this.current=b}};var ud=function(b){this.context=b;this.current=null};ud.prototype.get=function(){return this.current};ud.prototype.set=function(b){var a=this.context.gl;a.bindBuffer(a.ELEMENT_ARRAY_BUFFER,b);this.current=b};var Af=function(b){this.context=b;this.current=null};
Af.prototype.get=function(){return this.current};Af.prototype.set=function(b){this.current!==b&&this.context.extVertexArrayObject&&(this.context.extVertexArrayObject.bindVertexArrayOES(b),this.current=b)};var nh=function(b){this.context=b;this.current=4};nh.prototype.get=function(){return this.current};nh.prototype.set=function(b){if(this.current!==b){var a=this.context.gl;a.pixelStorei(a.UNPACK_ALIGNMENT,b);this.current=b}};var Pc=function(b){this.context=b;this.current=!1};Pc.prototype.get=function(){return this.current};
Pc.prototype.set=function(b){if(this.current!==b){var a=this.context.gl;a.pixelStorei(a.UNPACK_PREMULTIPLY_ALPHA_WEBGL,b);this.current=b}};var Sd=function(b,a){this.context=b;this.current=null;this.parent=a};Sd.prototype.get=function(){return this.current};var Ve=function(b){function a(a,c){b.call(this,a,c);this.dirty=!1}return b&&(a.__proto__=b),a.prototype=Object.create(b&&b.prototype),a.prototype.constructor=a,a.prototype.set=function(b){if(this.dirty||this.current!==b){var a=this.context.gl;this.context.bindFramebuffer.set(this.parent);
a.framebufferTexture2D(a.FRAMEBUFFER,a.COLOR_ATTACHMENT0,a.TEXTURE_2D,b,0);this.current=b;this.dirty=!1}},a.prototype.setDirty=function(){this.dirty=!0},a}(Sd),Ff=function(b){function a(){b.apply(this,arguments)}return b&&(a.__proto__=b),a.prototype=Object.create(b&&b.prototype),a.prototype.constructor=a,a.prototype.set=function(b){if(this.current!==b){var a=this.context.gl;this.context.bindFramebuffer.set(this.parent);a.framebufferRenderbuffer(a.FRAMEBUFFER,a.DEPTH_ATTACHMENT,a.RENDERBUFFER,b);this.current=
b}},a}(Sd),Ad=function(b,a,c){this.context=b;this.width=a;this.height=c;a=this.framebuffer=b.gl.createFramebuffer();this.colorAttachment=new Ve(b,a);this.depthAttachment=new Ff(b,a)};Ad.prototype.destroy=function(){var b=this.context.gl,a=this.colorAttachment.get();a&&b.deleteTexture(a);(a=this.depthAttachment.get())&&b.deleteRenderbuffer(a);b.deleteFramebuffer(this.framebuffer)};var lb=function(b,a,c){this.func=b;this.mask=a;this.range=c};lb.ReadOnly=!1;lb.ReadWrite=!0;lb.disabled=new lb(519,lb.ReadOnly,
[0,1]);var Mb=function(b,a,c,d,f,e){this.test=b;this.ref=a;this.mask=c;this.fail=d;this.depthFail=f;this.pass=e};Mb.disabled=new Mb({func:519,mask:0},0,0,7680,7680,7680);var Rb=function(b,a,c){this.blendFunction=b;this.blendColor=a;this.mask=c};Rb.Replace=[1,0];Rb.disabled=new Rb(Rb.Replace,b.default$6.transparent,[!1,!1,!1,!1]);Rb.unblended=new Rb(Rb.Replace,b.default$6.transparent,[!0,!0,!0,!0]);Rb.alphaBlended=new Rb([1,771],b.default$6.transparent,[!0,!0,!0,!0]);var oc=function(b){this.gl=b;this.extVertexArrayObject=
this.gl.getExtension("OES_vertex_array_object");this.lineWidthRange=b.getParameter(b.ALIASED_LINE_WIDTH_RANGE);this.clearColor=new $d(this);this.clearDepth=new tc(this);this.clearStencil=new Dc(this);this.colorMask=new Qa(this);this.depthMask=new Xc(this);this.stencilMask=new rd(this);this.stencilFunc=new Yc(this);this.stencilOp=new sd(this);this.stencilTest=new Zc(this);this.depthRange=new Rd(this);this.depthTest=new mh(this);this.depthFunc=new ae(this);this.blend=new $c(this);this.blendFunc=new td(this);
this.blendColor=new pe(this);this.program=new bb(this);this.lineWidth=new ib(this);this.activeTexture=new qe(this);this.viewport=new zc(this);this.bindFramebuffer=new re(this);this.bindRenderbuffer=new Ib(this);this.bindTexture=new Fc(this);this.bindVertexBuffer=new se(this);this.bindElementBuffer=new ud(this);this.bindVertexArrayOES=this.extVertexArrayObject&&new Af(this);this.pixelStoreUnpack=new nh(this);this.pixelStoreUnpackPremultiplyAlpha=new Pc(this);(this.extTextureFilterAnisotropic=b.getExtension("EXT_texture_filter_anisotropic")||
b.getExtension("MOZ_EXT_texture_filter_anisotropic")||b.getExtension("WEBKIT_EXT_texture_filter_anisotropic"))&&(this.extTextureFilterAnisotropicMax=b.getParameter(this.extTextureFilterAnisotropic.MAX_TEXTURE_MAX_ANISOTROPY_EXT));(this.extTextureHalfFloat=b.getExtension("OES_texture_half_float"))&&b.getExtension("OES_texture_half_float_linear")};oc.prototype.createIndexBuffer=function(b,a){return new Cc(this,b,a)};oc.prototype.createVertexBuffer=function(b,a,c){return new Wc(this,b,a,c)};oc.prototype.createRenderbuffer=
function(b,a,c){var d=this.gl,f=d.createRenderbuffer();return this.bindRenderbuffer.set(f),d.renderbufferStorage(d.RENDERBUFFER,b,a,c),this.bindRenderbuffer.set(null),f};oc.prototype.createFramebuffer=function(b,a){return new Ad(this,b,a)};oc.prototype.clear=function(b){var a=b.color;b=b.depth;var c=this.gl,d=0;a&&(d|=c.COLOR_BUFFER_BIT,this.clearColor.set(a),this.colorMask.set([!0,!0,!0,!0]));void 0!==b&&(d|=c.DEPTH_BUFFER_BIT,this.clearDepth.set(b),this.depthMask.set(!0));c.clear(d)};oc.prototype.setDepthMode=
function(b){b.func!==this.gl.ALWAYS||b.mask?(this.depthTest.set(!0),this.depthFunc.set(b.func),this.depthMask.set(b.mask),this.depthRange.set(b.range)):this.depthTest.set(!1)};oc.prototype.setStencilMode=function(b){b.test.func!==this.gl.ALWAYS||b.mask?(this.stencilTest.set(!0),this.stencilMask.set(b.mask),this.stencilOp.set([b.fail,b.depthFail,b.pass]),this.stencilFunc.set({func:b.test.func,ref:b.ref,mask:b.test.mask})):this.stencilTest.set(!1)};oc.prototype.setColorMode=function(a){b.default$10(a.blendFunction,
Rb.Replace)?this.blend.set(!1):(this.blend.set(!0),this.blendFunc.set(a.blendFunction),this.blendColor.set(a.blendColor));this.colorMask.set(a.mask)};var ge=function(a){function c(b,c,d){var f=this;a.call(this);this.id=b;this.dispatcher=d;this.on("data",function(b){"source"===b.dataType&&"metadata"===b.sourceDataType&&(f._sourceLoaded=!0);f._sourceLoaded&&!f._paused&&"source"===b.dataType&&"content"===b.sourceDataType&&(f.reload(),f.transform&&f.update(f.transform))});this.on("error",function(){f._sourceErrored=
!0});this._source=Qd(b,c,d,this);this._tiles={};this._cache=new yc(0,this._unloadTile.bind(this));this._timers={};this._cacheTimers={};this._maxTileCacheSize=null;this._isIdRenderable=this._isIdRenderable.bind(this);this._coveredTiles={}}return a&&(c.__proto__=a),c.prototype=Object.create(a&&a.prototype),c.prototype.constructor=c,c.prototype.onAdd=function(b){this._maxTileCacheSize=(this.map=b)?b._maxTileCacheSize:null;this._source&&this._source.onAdd&&this._source.onAdd(b)},c.prototype.onRemove=
function(b){this._source&&this._source.onRemove&&this._source.onRemove(b)},c.prototype.loaded=function(){if(this._sourceErrored)return!0;if(!this._sourceLoaded)return!1;for(var b in this._tiles){var a=this._tiles[b];if("loaded"!==a.state&&"errored"!==a.state)return!1}return!0},c.prototype.getSource=function(){return this._source},c.prototype.pause=function(){this._paused=!0},c.prototype.resume=function(){if(this._paused){var b=this._shouldReloadOnResume;this._shouldReloadOnResume=this._paused=!1;
b&&this.reload();this.transform&&this.update(this.transform)}},c.prototype._loadTile=function(b,a){return this._source.loadTile(b,a)},c.prototype._unloadTile=function(b){if(this._source.unloadTile)return this._source.unloadTile(b,function(){})},c.prototype._abortTile=function(b){if(this._source.abortTile)return this._source.abortTile(b,function(){})},c.prototype.serialize=function(){return this._source.serialize()},c.prototype.prepare=function(b){for(var a in this._source.prepare&&this._source.prepare(),
this._tiles)this._tiles[a].upload(b)},c.prototype.getIds=function(){var a=this;return Object.keys(this._tiles).map(Number).sort(function(c,d){c=a._tiles[c].tileID;d=a._tiles[d].tileID;var f=(new b.default$1(c.canonical.x,c.canonical.y)).rotate(a.transform.angle),e=(new b.default$1(d.canonical.x,d.canonical.y)).rotate(a.transform.angle);return c.overscaledZ-d.overscaledZ||e.y-f.y||e.x-f.x})},c.prototype.getRenderableIds=function(){return this.getIds().filter(this._isIdRenderable)},c.prototype.hasRenderableParent=
function(b){b=this.findLoadedParent(b,0,{});return!!b&&this._isIdRenderable(b.tileID.key)},c.prototype._isIdRenderable=function(b){return this._tiles[b]&&this._tiles[b].hasData()&&!this._coveredTiles[b]},c.prototype.reload=function(){if(this._paused)this._shouldReloadOnResume=!0;else for(var b in this._cache.reset(),this._tiles)this._reloadTile(b,"reloading")},c.prototype._reloadTile=function(b,a){var c=this._tiles[b];c&&("loading"!==c.state&&(c.state=a),this._loadTile(c,this._tileLoaded.bind(this,
c,b,a)))},c.prototype._tileLoaded=function(a,c,d,f){if(f)return a.state="errored",void(404!==f.status?this._source.fire(new b.ErrorEvent(f,{tile:a})):this.update(this.transform));a.timeAdded=pa.now();"expired"===d&&(a.refreshedUponExpiration=!0);this._setTileReloadTimer(c,a);"raster-dem"===this.getSource().type&&a.dem&&this._backfillDEM(a);this._source.fire(new b.Event("data",{dataType:"source",tile:a,coord:a.tileID}));this.map&&(this.map.painter.tileExtentVAO.vao=null)},c.prototype._backfillDEM=
function(b){function a(b,a){b.needsHillshadePrepare=!0;var c=a.tileID.canonical.x-b.tileID.canonical.x,d=a.tileID.canonical.y-b.tileID.canonical.y,f=Math.pow(2,b.tileID.canonical.z),e=a.tileID.key;0===c&&0===d||1<Math.abs(d)||(1<Math.abs(c)&&(1===Math.abs(c+f)?c+=f:1===Math.abs(c-f)&&(c-=f)),a.dem&&b.dem&&(b.dem.backfillBorder(a.dem,c,d),b.neighboringTiles&&b.neighboringTiles[e]&&(b.neighboringTiles[e].backfilled=!0)))}for(var c=this.getRenderableIds(),d=0;d<c.length;d++){var f=c[d];b.neighboringTiles&&
b.neighboringTiles[f]&&(f=this.getTileByID(f),a(b,f),a(f,b))}},c.prototype.getTile=function(b){return this.getTileByID(b.key)},c.prototype.getTileByID=function(b){return this._tiles[b]},c.prototype.getZoom=function(b){return b.zoom+b.scaleZoom(b.tileSize/this._source.tileSize)},c.prototype._findLoadedChildren=function(b,a,c){var d=!1,f;for(f in this._tiles){var e=this._tiles[f];if(!(c[f]||!e.hasData()||e.tileID.overscaledZ<=b.overscaledZ||e.tileID.overscaledZ>a)){var k=Math.pow(2,e.tileID.canonical.z-
b.canonical.z);if(Math.floor(e.tileID.canonical.x/k)===b.canonical.x&&Math.floor(e.tileID.canonical.y/k)===b.canonical.y)for(c[f]=e.tileID,d=!0;e&&e.tileID.overscaledZ-1>b.overscaledZ;){k=e.tileID.scaledTo(e.tileID.overscaledZ-1);if(!k)break;(e=this._tiles[k.key])&&e.hasData()&&(delete c[f],c[k.key]=k)}}}return d},c.prototype.findLoadedParent=function(b,a,c){for(var d=b.overscaledZ-1;d>=a;d--){var f=b.scaledTo(d);if(!f)break;var e=String(f.key),k=this._tiles[e];if(k&&k.hasData())return c[e]=f,k;if(this._cache.has(f))return c[e]=
f,this._cache.get(f)}},c.prototype.updateCacheSize=function(b){b=Math.floor(5*(Math.ceil(b.width/this._source.tileSize)+1)*(Math.ceil(b.height/this._source.tileSize)+1));this._cache.setMaxSize("number"==typeof this._maxTileCacheSize?Math.min(this._maxTileCacheSize,b):b)},c.prototype.handleWrapJump=function(b){var a=Math.round((b-(void 0===this._prevLng?b:this._prevLng))/360);if(this._prevLng=b,a){b={};for(var c in this._tiles){var d=this._tiles[c];d.tileID=d.tileID.unwrapTo(d.tileID.wrap+a);b[d.tileID.key]=
d}for(var f in this._tiles=b,this._timers)clearTimeout(this._timers[f]),delete this._timers[f];for(var e in this._tiles)this._setTileReloadTimer(e,this._tiles[e])}},c.prototype.update=function(a){var d=this;if(this.transform=a,this._sourceLoaded&&!this._paused){var f;this.updateCacheSize(a);this.handleWrapJump(this.transform.center.lng);this._coveredTiles={};this.used?this._source.tileID?f=a.getVisibleUnwrappedCoordinates(this._source.tileID).map(function(a){return new b.OverscaledTileID(a.canonical.z,
a.wrap,a.canonical.z,a.canonical.x,a.canonical.y)}):(f=a.coveringTiles({tileSize:this._source.tileSize,minzoom:this._source.minzoom,maxzoom:this._source.maxzoom,roundZoom:this._source.roundZoom,reparseOverscaled:this._source.reparseOverscaled}),this._source.hasTile&&(f=f.filter(function(b){return d._source.hasTile(b)}))):f=[];var e=(this._source.roundZoom?Math.round:Math.floor)(this.getZoom(a));a=Math.max(e-c.maxOverzooming,this._source.minzoom);var k=Math.max(e+c.maxUnderzooming,this._source.minzoom);
f=this._updateRetainedTiles(f,e);e={};if(w(this._source.type))for(var g=Object.keys(f),h=0;h<g.length;h++){var l=g[h],r=f[l],n=d._tiles[l];n&&(void 0===n.fadeEndTime||n.fadeEndTime>=pa.now())&&(d._findLoadedChildren(r,k,f)&&(f[l]=r),(l=d.findLoadedParent(r,a,e))&&d._addTile(l.tileID))}for(q in e)f[q]||(d._coveredTiles[q]=!0);for(q in e)f[q]=e[q];var q=b.keysDifference(this._tiles,f);for(a=0;a<q.length;a++)d._removeTile(q[a])}},c.prototype._updateRetainedTiles=function(b,a){for(var d={},f={},e=Math.max(a-
c.maxOverzooming,this._source.minzoom),k=Math.max(a+c.maxUnderzooming,this._source.minzoom),g=0;g<b.length;g++){var h=b[g],l=this._addTile(h);if(l.hasData())d[h.key]=h;else{var r=l.wasRequested();d[h.key]=h;var n=!0;if(a+1>this._source.maxzoom){var q=h.children(this._source.maxzoom)[0],u=this.getTile(q);u&&u.hasData()?d[q.key]=q:n=!1}else for(this._findLoadedChildren(h,k,d),q=h.children(this._source.maxzoom),u=0;u<q.length;u++)if(!d[q[u].key]){n=!1;break}if(!n)for(n=h.overscaledZ-1;n>=e;--n){q=h.scaledTo(n);
if(f[q.key])break;if(f[q.key]=!0,!(l=this.getTile(q))&&r&&(l=this._addTile(q)),l&&(d[q.key]=q,r=l.wasRequested(),l.hasData()))break}}}return d},c.prototype._addTile=function(a){var c=this._tiles[a.key];if(c)return c;(c=this._cache.getAndRemove(a))&&(this._setTileReloadTimer(a.key,c),c.tileID=a);var d=!!c;return d||(c=new Bb(a,this._source.tileSize*a.overscaleFactor()),this._loadTile(c,this._tileLoaded.bind(this,c,a.key,c.state))),c?(c.uses++,this._tiles[a.key]=c,d||this._source.fire(new b.Event("dataloading",
{tile:c,coord:c.tileID,dataType:"source"})),c):null},c.prototype._setTileReloadTimer=function(b,a){var c=this;b in this._timers&&(clearTimeout(this._timers[b]),delete this._timers[b]);(a=a.getExpiryTimeout())&&(this._timers[b]=setTimeout(function(){c._reloadTile(b,"expired");delete c._timers[b]},a))},c.prototype._removeTile=function(b){var a=this._tiles[b];a&&(a.uses--,delete this._tiles[b],this._timers[b]&&(clearTimeout(this._timers[b]),delete this._timers[b]),0<a.uses||(a.hasData()?this._cache.add(a.tileID,
a,a.getExpiryTimeout()):(a.aborted=!0,this._abortTile(a),this._unloadTile(a))))},c.prototype.clearTiles=function(){for(var b in this._shouldReloadOnResume=!1,this._paused=!1,this._tiles)this._removeTile(b);this._cache.reset()},c.prototype.tilesIn=function(a,c){for(var d=[],f=this.getIds(),e=1/0,k=1/0,g=-1/0,h=-1/0,l=a[0].zoom,r=0;r<a.length;r++){var n=a[r];e=Math.min(e,n.column);k=Math.min(k,n.row);g=Math.max(g,n.column);h=Math.max(h,n.row)}for(r=0;r<f.length;r++){n=this._tiles[f[r]];var q=n.tileID,
u=Math.pow(2,this.transform.zoom-n.tileID.overscaledZ),v=c*n.queryPadding*b.default$8/n.tileSize/u,p=[m(q,new b.default$17(e,k,l)),m(q,new b.default$17(g,h,l))];if(p[0].x-v<b.default$8&&p[0].y-v<b.default$8&&0<=p[1].x+v&&0<=p[1].y+v){v=[];for(p=0;p<a.length;p++)v.push(m(q,a[p]));d.push({tile:n,tileID:q,queryGeometry:[v],scale:u})}}return d},c.prototype.getVisibleCoordinates=function(){for(var b=this,a=this.getRenderableIds().map(function(a){return b._tiles[a].tileID}),c=0;c<a.length;c+=1){var d=a[c];
d.posMatrix=b.transform.calculatePosMatrix(d.toUnwrapped())}return a},c.prototype.hasTransition=function(){if(this._source.hasTransition())return!0;if(w(this._source.type))for(var b in this._tiles){var a=this._tiles[b];if(void 0!==a.fadeEndTime&&a.fadeEndTime>=pa.now())return!0}return!1},c}(b.Evented);ge.maxOverzooming=10;ge.maxUnderzooming=3;var Hc,We=function(){this.active={}};We.prototype.acquire=function(b){if(!this.workers){var a=ef.workerCount;for(this.workers=[];this.workers.length<a;)this.workers.push(new x)}return this.active[b]=
!0,this.workers.slice()};We.prototype.release=function(b){delete this.active[b];0===Object.keys(this.active).length&&(this.workers.forEach(function(b){b.terminate()}),this.workers=null)};var jb={setStyle:"setStyle",addLayer:"addLayer",removeLayer:"removeLayer",setPaintProperty:"setPaintProperty",setLayoutProperty:"setLayoutProperty",setFilter:"setFilter",addSource:"addSource",removeSource:"removeSource",setGeoJSONSourceData:"setGeoJSONSourceData",setLayerZoomRange:"setLayerZoomRange",setLayerProperty:"setLayerProperty",
setCenter:"setCenter",setZoom:"setZoom",setBearing:"setBearing",setPitch:"setPitch",setSprite:"setSprite",setGlyphs:"setGlyphs",setTransition:"setTransition",setLight:"setLight"},Fb=function(b,a,c){var d=this.boxCells=[],f=this.circleCells=[];this.xCellCount=Math.ceil(b/c);this.yCellCount=Math.ceil(a/c);for(c=0;c<this.xCellCount*this.yCellCount;c++)d.push([]),f.push([]);this.circleKeys=[];this.boxKeys=[];this.bboxes=[];this.circles=[];this.width=b;this.height=a;this.xScale=this.xCellCount/b;this.yScale=
this.yCellCount/a;this.circleUid=this.boxUid=0};Fb.prototype.keysLength=function(){return this.boxKeys.length+this.circleKeys.length};Fb.prototype.insert=function(b,a,c,d,f){this._forEachCell(a,c,d,f,this._insertBoxCell,this.boxUid++);this.boxKeys.push(b);this.bboxes.push(a);this.bboxes.push(c);this.bboxes.push(d);this.bboxes.push(f)};Fb.prototype.insertCircle=function(b,a,c,d){this._forEachCell(a-d,c-d,a+d,c+d,this._insertCircleCell,this.circleUid++);this.circleKeys.push(b);this.circles.push(a);
this.circles.push(c);this.circles.push(d)};Fb.prototype._insertBoxCell=function(b,a,c,d,f,e){this.boxCells[f].push(e)};Fb.prototype._insertCircleCell=function(b,a,c,d,f,e){this.circleCells[f].push(e)};Fb.prototype._query=function(b,a,c,d,f){if(0>c||b>this.width||0>d||a>this.height)return!f&&[];var e=[];if(0>=b&&0>=a&&this.width<=c&&this.height<=d){if(f)return!0;for(b=0;b<this.boxKeys.length;b++)e.push({key:this.boxKeys[b],x1:this.bboxes[4*b],y1:this.bboxes[4*b+1],x2:this.bboxes[4*b+2],y2:this.bboxes[4*
b+3]});for(b=0;b<this.circleKeys.length;b++)a=this.circles[3*b],c=this.circles[3*b+1],d=this.circles[3*b+2],e.push({key:this.circleKeys[b],x1:a-d,y1:c-d,x2:a+d,y2:c+d})}else this._forEachCell(b,a,c,d,this._queryCell,e,{hitTest:f,seenUids:{box:{},circle:{}}});return f?0<e.length:e};Fb.prototype._queryCircle=function(b,a,c,d){var f=b-c,e=b+c,k=a-c,g=a+c;if(0>e||f>this.width||0>g||k>this.height)return!d&&[];var h=[];return this._forEachCell(f,k,e,g,this._queryCellCircle,h,{hitTest:d,circle:{x:b,y:a,
radius:c},seenUids:{box:{},circle:{}}}),d?0<h.length:h};Fb.prototype.query=function(b,a,c,d){return this._query(b,a,c,d,!1)};Fb.prototype.hitTest=function(b,a,c,d){return this._query(b,a,c,d,!0)};Fb.prototype.hitTestCircle=function(b,a,c){return this._queryCircle(b,a,c,!0)};Fb.prototype._queryCell=function(b,a,c,d,f,e,k){var g=k.seenUids,h=this.boxCells[f];if(null!==h)for(var l=this.bboxes,r=0;r<h.length;r+=1){var n=h[r];if(!g.box[n]){g.box[n]=!0;var q=4*n;if(b<=l[q+2]&&a<=l[q+3]&&c>=l[q+0]&&d>=l[q+
1]){if(k.hitTest)return e.push(!0),!0;e.push({key:this.boxKeys[n],x1:l[q],y1:l[q+1],x2:l[q+2],y2:l[q+3]})}}}f=this.circleCells[f];if(null!==f)for(h=this.circles,l=0;l<f.length;l+=1)if(r=f[l],!g.circle[r]){g.circle[r]=!0;var u=3*r;if(this._circleAndRectCollide(h[u],h[u+1],h[u+2],b,a,c,d)){if(k.hitTest)return e.push(!0),!0;n=h[u];q=h[u+1];u=h[u+2];e.push({key:this.circleKeys[r],x1:n-u,y1:q-u,x2:n+u,y2:q+u})}}};Fb.prototype._queryCellCircle=function(b,a,c,d,f,e,k){b=k.circle;k=k.seenUids;a=this.boxCells[f];
if(null!==a)for(c=this.bboxes,d=0;d<a.length;d+=1){var g=a[d];if(!k.box[g]&&(k.box[g]=!0,g*=4,this._circleAndRectCollide(b.x,b.y,b.radius,c[g+0],c[g+1],c[g+2],c[g+3])))return e.push(!0),!0}f=this.circleCells[f];if(null!==f)for(a=this.circles,c=0;c<f.length;c+=1)if(d=f[c],!k.circle[d]&&(k.circle[d]=!0,d*=3,this._circlesCollide(a[d],a[d+1],a[d+2],b.x,b.y,b.radius)))return e.push(!0),!0};Fb.prototype._forEachCell=function(b,a,c,d,f,e,k){for(var g=this._convertToXCellCoord(b),h=this._convertToYCellCoord(a),
l=this._convertToXCellCoord(c),r=this._convertToYCellCoord(d);g<=l;g++)for(var n=h;n<=r;n++)if(f.call(this,b,a,c,d,this.xCellCount*n+g,e,k))return};Fb.prototype._convertToXCellCoord=function(b){return Math.max(0,Math.min(this.xCellCount-1,Math.floor(b*this.xScale)))};Fb.prototype._convertToYCellCoord=function(b){return Math.max(0,Math.min(this.yCellCount-1,Math.floor(b*this.yScale)))};Fb.prototype._circlesCollide=function(b,a,c,d,f,e){b=d-b;a=f-a;c+=e;return c*c>b*b+a*a};Fb.prototype._circleAndRectCollide=
function(b,a,c,d,f,e,k){e=(e-d)/2;b=Math.abs(b-(d+e));if(b>e+c)return!1;k=(k-f)/2;a=Math.abs(a-(f+k));if(a>k+c)return!1;if(b<=e||a<=k)return!0;f=b-e;a-=k;return f*f+a*a<=c*c};var ad=b.default$19.layout,fe=new Float32Array([-1/0,-1/0,0,-1/0,-1/0,0,-1/0,-1/0,0,-1/0,-1/0,0]);b.default$20.mat4;var uc=function(b,a,c){void 0===a&&(a=new Fb(b.width+200,b.height+200,25));void 0===c&&(c=new Fb(b.width+200,b.height+200,25));this.transform=b;this.grid=a;this.ignoredGrid=c;this.pitchfactor=Math.cos(b._pitch)*
b.cameraToCenterDistance;this.screenRightBoundary=b.width+100;this.screenBottomBoundary=b.height+100};uc.prototype.placeCollisionBox=function(b,a,c,d){d=this.projectAndGetPerspectiveRatio(d,b.anchorPointX,b.anchorPointY);var f=c*d.perspectiveRatio;c=b.x1*f+d.point.x;var e=b.y1*f+d.point.y,k=b.x2*f+d.point.x;b=b.y2*f+d.point.y;return!a&&this.grid.hitTest(c,e,k,b)?{box:[],offscreen:!1}:{box:[c,e,k,b],offscreen:this.isOffscreen(c,e,k,b)}};uc.prototype.approximateTileDistance=function(b,a,c,d,f){c*=b.lastSegmentViewportDistance;
return b.prevTileDistance+c+((f?1:d/this.pitchfactor)-1)*c*Math.abs(Math.sin(a))};uc.prototype.placeCollisionCircles=function(a,c,d,f,e,k,g,h,l,r,n,q,u){e=[];var v=this.projectAnchor(r,k.anchorX,k.anchorY),p=l/24,z=k.lineOffsetX*l;l*=k.lineOffsetY;var w=new b.default$1(k.anchorX,k.anchorY);k=I(p,h,z,l,!1,K(w,n).point,w,k,g,n,{},!0);g=!1;h=!0;n=v.perspectiveRatio*f;p=1/(f*d);f=d=0;k&&(d=this.approximateTileDistance(k.first.tileDistance,k.first.angle,p,v.cameraDistance,u),f=this.approximateTileDistance(k.last.tileDistance,
k.last.angle,p,v.cameraDistance,u));for(u=0;u<a.length;u+=5)if(v=a[u],z=a[u+1],p=a[u+2],l=a[u+3],!k||l<-d||l>f)a[u+4]=0;else{v=this.projectPoint(r,v,z);p*=n;if(0<e.length&&(z=v.x-e[e.length-4],l=v.y-e[e.length-3],p*p*2>z*z+l*l&&u+8<a.length&&(z=a[u+8],z>-d&&z<f))){a[u+4]=0;continue}e.push(v.x,v.y,p,u/5);a[u+4]=1;if(h=h&&this.isOffscreen(v.x-p,v.y-p,v.x+p,v.y+p),!c&&this.grid.hitTestCircle(v.x,v.y,p)){if(!q)return{circles:[],offscreen:!1};g=!0}}return{circles:g?[]:e,offscreen:h}};uc.prototype.queryRenderedSymbols=
function(a){if(0===a.length||0===this.grid.keysLength()&&0===this.ignoredGrid.keysLength())return{};for(var c=[],d=1/0,f=1/0,e=-1/0,k=-1/0,g=0;g<a.length;g+=1){var h=a[g];h=new b.default$1(h.x+100,h.y+100);d=Math.min(d,h.x);f=Math.min(f,h.y);e=Math.max(e,h.x);k=Math.max(k,h.y);c.push(h)}a={};g={};h=0;for(d=this.grid.query(d,f,e,k).concat(this.ignoredGrid.query(d,f,e,k));h<d.length;h+=1)e=d[h],f=e.key,(void 0===a[f.bucketInstanceId]&&(a[f.bucketInstanceId]={}),a[f.bucketInstanceId][f.featureIndex])||
(e=[new b.default$1(e.x1,e.y1),new b.default$1(e.x2,e.y1),new b.default$1(e.x2,e.y2),new b.default$1(e.x1,e.y2)],b.polygonIntersectsPolygon(c,e)&&(a[f.bucketInstanceId][f.featureIndex]=!0,void 0===g[f.bucketInstanceId]&&(g[f.bucketInstanceId]=[]),g[f.bucketInstanceId].push(f.featureIndex)));return g};uc.prototype.insertCollisionBox=function(b,a,c,d){(a?this.ignoredGrid:this.grid).insert({bucketInstanceId:c,featureIndex:d},b[0],b[1],b[2],b[3])};uc.prototype.insertCollisionCircles=function(b,a,c,d){a=
a?this.ignoredGrid:this.grid;c={bucketInstanceId:c,featureIndex:d};for(d=0;d<b.length;d+=4)a.insertCircle(c,b[d],b[d+1],b[d+2])};uc.prototype.projectAnchor=function(b,a,c){a=[a,c,0,1];return R(a,a,b),{perspectiveRatio:.5+this.transform.cameraToCenterDistance/a[3]*.5,cameraDistance:a[3]}};uc.prototype.projectPoint=function(a,c,d){c=[c,d,0,1];return R(c,c,a),new b.default$1((c[0]/c[3]+1)/2*this.transform.width+100,(-c[1]/c[3]+1)/2*this.transform.height+100)};uc.prototype.projectAndGetPerspectiveRatio=
function(a,c,d){c=[c,d,0,1];return R(c,c,a),{point:new b.default$1((c[0]/c[3]+1)/2*this.transform.width+100,(-c[1]/c[3]+1)/2*this.transform.height+100),perspectiveRatio:.5+this.transform.cameraToCenterDistance/c[3]*.5}};uc.prototype.isOffscreen=function(b,a,c,d){return 100>c||b>=this.screenRightBoundary||100>d||a>this.screenBottomBoundary};var Cd=b.default$19.layout,Dd=function(b,a,c,d){this.opacity=b?Math.max(0,Math.min(1,b.opacity+(b.placed?a:-a))):d&&c?1:0;this.placed=c};Dd.prototype.isHidden=
function(){return 0===this.opacity&&!this.placed};var Ic=function(b,a,c,d,f){this.text=new Dd(b?b.text:null,a,c,f);this.icon=new Dd(b?b.icon:null,a,d,f)};Ic.prototype.isHidden=function(){return this.text.isHidden()&&this.icon.isHidden()};var tb=function(b,a,c){this.text=b;this.icon=a;this.skipFade=c},Jb=function(b,a){this.transform=b.clone();this.collisionIndex=new uc(this.transform);this.placements={};this.opacities={};this.stale=!1;this.fadeDuration=a;this.retainedQueryData={}};Jb.prototype.placeLayerTile=
function(a,c,d,f){var e=c.getBucket(a),k=c.latestFeatureIndex;if(e&&k&&a.id===e.layerIds[0]){a=c.collisionBoxArray;var g=e.layers[0].layout,h=Math.pow(2,this.transform.zoom-c.tileID.overscaledZ),l=c.tileSize/b.default$8,r=this.transform.calculatePosMatrix(c.tileID.toUnwrapped()),n=E(r,"map"===g.get("text-pitch-alignment"),"map"===g.get("text-rotation-alignment"),this.transform,T(c,1,this.transform.zoom));g=E(r,"map"===g.get("icon-pitch-alignment"),"map"===g.get("icon-rotation-alignment"),this.transform,
T(c,1,this.transform.zoom));this.retainedQueryData[e.bucketInstanceId]=new function(b,a,c,d,f){this.bucketInstanceId=b;this.featureIndex=a;this.sourceLayerIndex=c;this.bucketIndex=d;this.tileID=f}(e.bucketInstanceId,k,e.sourceLayerIndex,e.index,c.tileID);this.placeLayerBucket(e,r,n,g,h,l,d,f,a)}};Jb.prototype.placeLayerBucket=function(a,c,d,f,e,k,g,h,l){f=a.layers[0].layout;for(var r=b.evaluateSizeForZoom(a.textSizeData,this.transform.zoom,Cd.properties["text-size"]),n=!a.hasTextData()||f.get("text-optional"),
q=!a.hasIconData()||f.get("icon-optional"),u=0,v=a.symbolInstances;u<v.length;u+=1){var p=v[u];if(!h[p.crossTileID]){var z=void 0!==p.feature.text,w=void 0!==p.feature.icon,A=!0,m=null,x=null,y=null,t=0,J=0;p.collisionArrays||(p.collisionArrays=a.deserializeCollisionBoxes(l,p.textBoxStartIndex,p.textBoxEndIndex,p.iconBoxStartIndex,p.iconBoxEndIndex));p.collisionArrays.textFeatureIndex&&(t=p.collisionArrays.textFeatureIndex);p.collisionArrays.textBox&&(z=0<(m=this.collisionIndex.placeCollisionBox(p.collisionArrays.textBox,
f.get("text-allow-overlap"),k,c)).box.length,A=A&&m.offscreen);var B=p.collisionArrays.textCircles;B&&(z=a.text.placedSymbolArray.get(p.placedTextSymbolIndices[0]),x=b.evaluateSizeForFeature(a.textSizeData,r,z),x=this.collisionIndex.placeCollisionCircles(B,f.get("text-allow-overlap"),e,k,p.key,z,a.lineVertexArray,a.glyphOffsetArray,x,c,d,g,"map"===f.get("text-pitch-alignment")),z=f.get("text-allow-overlap")||0<x.circles.length,A=A&&x.offscreen);p.collisionArrays.iconFeatureIndex&&(J=p.collisionArrays.iconFeatureIndex);
p.collisionArrays.iconBox&&(w=0<(y=this.collisionIndex.placeCollisionBox(p.collisionArrays.iconBox,f.get("icon-allow-overlap"),k,c)).box.length,A=A&&y.offscreen);n||q?q?n||(w=w&&z):z=w&&z:w=z=w&&z;z&&m&&this.collisionIndex.insertCollisionBox(m.box,f.get("text-ignore-placement"),a.bucketInstanceId,t);w&&y&&this.collisionIndex.insertCollisionBox(y.box,f.get("icon-ignore-placement"),a.bucketInstanceId,J);z&&x&&this.collisionIndex.insertCollisionCircles(x.circles,f.get("text-ignore-placement"),a.bucketInstanceId,
t);this.placements[p.crossTileID]=new tb(z,w,A||a.justReloaded);h[p.crossTileID]=!0}}a.justReloaded=!1};Jb.prototype.commit=function(b,a){this.commitTime=a;var c=!1,d=b&&0!==this.fadeDuration?(this.commitTime-b.commitTime)/this.fadeDuration:1,f=b?b.opacities:{};for(h in this.placements){var e=this.placements[h],k=f[h];k?(this.opacities[h]=new Ic(k,d,e.text,e.icon),c=c||e.text!==k.text.placed||e.icon!==k.icon.placed):(this.opacities[h]=new Ic(null,d,e.text,e.icon,e.skipFade),c=c||e.text||e.icon)}for(var g in f){var h=
f[g];this.opacities[g]||(e=new Ic(h,d,!1,!1),e.isHidden()||(this.opacities[g]=e,c=c||h.text.placed||h.icon.placed))}c?this.lastPlacementChangeTime=a:"number"!=typeof this.lastPlacementChangeTime&&(this.lastPlacementChangeTime=b?b.lastPlacementChangeTime:a)};Jb.prototype.updateLayerOpacities=function(b,a){for(var c={},d=0;d<a.length;d+=1){var f=a[d],e=f.getBucket(b);e&&f.latestFeatureIndex&&b.id===e.layerIds[0]&&this.updateBucketOpacities(e,c,f.collisionBoxArray)}};Jb.prototype.updateBucketOpacities=
function(b,a,c){b.hasTextData()&&b.text.opacityVertexArray.clear();b.hasIconData()&&b.icon.opacityVertexArray.clear();b.hasCollisionBoxData()&&b.collisionBox.collisionVertexArray.clear();b.hasCollisionCircleData()&&b.collisionCircle.collisionVertexArray.clear();var d=b.layers[0].layout,f=new Ic(null,0,!1,!1,!0);d=new Ic(null,0,d.get("text-allow-overlap"),d.get("icon-allow-overlap"),!0);for(var e=0;e<b.symbolInstances.length;e++){var k=b.symbolInstances[e],g=a[k.crossTileID],h=this.opacities[k.crossTileID];
g?h=f:h||(h=d,this.opacities[k.crossTileID]=h);a[k.crossTileID]=!0;var l=0<k.numIconVertices;if(0<k.numGlyphVertices||0<k.numVerticalGlyphVertices){for(var r=S(h.text),n=(k.numGlyphVertices+k.numVerticalGlyphVertices)/4,q=0;q<n;q++)b.text.opacityVertexArray.emplaceBack(r);r=0;for(n=k.placedTextSymbolIndices;r<n.length;r+=1)b.text.placedSymbolArray.get(n[r]).hidden=h.text.isHidden()}if(l){l=S(h.icon);for(r=0;r<k.numIconVertices/4;r++)b.icon.opacityVertexArray.emplaceBack(l);b.icon.placedSymbolArray.get(e).hidden=
h.icon.isHidden()}k.collisionArrays||(k.collisionArrays=b.deserializeCollisionBoxes(c,k.textBoxStartIndex,k.textBoxEndIndex,k.iconBoxStartIndex,k.iconBoxEndIndex));if(k=k.collisionArrays)if(k.textBox&&b.hasCollisionBoxData()&&P(b.collisionBox.collisionVertexArray,h.text.placed,!1),k.iconBox&&b.hasCollisionBoxData()&&P(b.collisionBox.collisionVertexArray,h.icon.placed,!1),(k=k.textCircles)&&b.hasCollisionCircleData())for(l=0;l<k.length;l+=5)P(b.collisionCircle.collisionVertexArray,h.text.placed,g||
0===k[l+4])}b.sortFeatures(this.transform.angle);this.retainedQueryData[b.bucketInstanceId]&&(this.retainedQueryData[b.bucketInstanceId].featureSortOrder=b.featureSortOrder);b.hasTextData()&&b.text.opacityVertexBuffer&&b.text.opacityVertexBuffer.updateData(b.text.opacityVertexArray);b.hasIconData()&&b.icon.opacityVertexBuffer&&b.icon.opacityVertexBuffer.updateData(b.icon.opacityVertexArray);b.hasCollisionBoxData()&&b.collisionBox.collisionVertexBuffer&&b.collisionBox.collisionVertexBuffer.updateData(b.collisionBox.collisionVertexArray);
b.hasCollisionCircleData()&&b.collisionCircle.collisionVertexBuffer&&b.collisionCircle.collisionVertexBuffer.updateData(b.collisionCircle.collisionVertexArray)};Jb.prototype.symbolFadeChange=function(b){return 0===this.fadeDuration?1:(b-this.commitTime)/this.fadeDuration};Jb.prototype.hasTransitions=function(b){return this.stale||b-this.lastPlacementChangeTime<this.fadeDuration};Jb.prototype.stillRecent=function(b){return"undefined"!==this.commitTime&&this.commitTime+this.fadeDuration>b};Jb.prototype.setStale=
function(){this.stale=!0};var Xe=Math.pow(2,25),Ue=Math.pow(2,24),Gf=Math.pow(2,17),Hf=Math.pow(2,16),If=Math.pow(2,9),Ye=Math.pow(2,8),Ze=Math.pow(2,1),Jf=function(){this._currentTileIndex=0;this._seenCrossTileIDs={}};Jf.prototype.continuePlacement=function(b,a,c,d,f){for(;this._currentTileIndex<b.length;)if(a.placeLayerTile(d,b[this._currentTileIndex],c,this._seenCrossTileIDs),this._currentTileIndex++,f())return!0};var bd=function(b,a,c,d,f){this.placement=new Jb(b,f);this._currentPlacementIndex=
a.length-1;this._forceFullPlacement=c;this._showCollisionBoxes=d;this._done=!1};bd.prototype.isDone=function(){return this._done};bd.prototype.continuePlacement=function(b,a,c){for(var d=this,f=pa.now(),e=function(){var b=pa.now()-f;return!d._forceFullPlacement&&2<b};0<=this._currentPlacementIndex;){var k=a[b[d._currentPlacementIndex]],g=d.placement.collisionIndex.transform.zoom;if("symbol"===k.type&&(!k.minzoom||k.minzoom<=g)&&(!k.maxzoom||k.maxzoom>g)){if(d._inProgressLayer||(d._inProgressLayer=
new Jf),d._inProgressLayer.continuePlacement(c[k.source],d.placement,d._showCollisionBoxes,k,e))return;delete d._inProgressLayer}d._currentPlacementIndex--}this._done=!0};bd.prototype.commit=function(b,a){return this.placement.commit(b,a),this.placement};var Kf=512/b.default$8/2,Ed=function(b,a,c){this.tileID=b;this.indexedSymbolInstances={};this.bucketInstanceId=c;for(c=0;c<a.length;c+=1){var d=a[c],f=d.key;this.indexedSymbolInstances[f]||(this.indexedSymbolInstances[f]=[]);this.indexedSymbolInstances[f].push({crossTileID:d.crossTileID,
coord:this.getScaledCoordinates(d,b)})}};Ed.prototype.getScaledCoordinates=function(a,c){var d=Kf/Math.pow(2,c.canonical.z-this.tileID.canonical.z);a=a.anchor;return{x:Math.floor((c.canonical.x*b.default$8+a.x)*d),y:Math.floor((c.canonical.y*b.default$8+a.y)*d)}};Ed.prototype.findMatches=function(b,a,c){for(var d=this.tileID.canonical.z<a.canonical.z?1:Math.pow(2,this.tileID.canonical.z-a.canonical.z),f=0;f<b.length;f+=1){var e=b[f];if(!e.crossTileID){var k=this.indexedSymbolInstances[e.key];if(k)for(var g=
this.getScaledCoordinates(e,a),h=0;h<k.length;h+=1){var l=k[h];if(Math.abs(l.coord.x-g.x)<=d&&Math.abs(l.coord.y-g.y)<=d&&!c[l.crossTileID]){c[l.crossTileID]=!0;e.crossTileID=l.crossTileID;break}}}}};var he=function(){this.maxCrossTileID=0};he.prototype.generate=function(){return++this.maxCrossTileID};var Fd=function(){this.indexes={};this.usedCrossTileIDs={};this.lng=0};Fd.prototype.handleWrapJump=function(b){var a=Math.round((b-this.lng)/360);if(0!==a)for(var c in this.indexes){var d=this.indexes[c],
f={},e;for(e in d){var k=d[e];k.tileID=k.tileID.unwrapTo(k.tileID.wrap+a);f[k.tileID.key]=k}this.indexes[c]=f}this.lng=b};Fd.prototype.addBucket=function(b,a,c){if(this.indexes[b.overscaledZ]&&this.indexes[b.overscaledZ][b.key]){if(this.indexes[b.overscaledZ][b.key].bucketInstanceId===a.bucketInstanceId)return!1;this.removeBucketCrossTileIDs(b.overscaledZ,this.indexes[b.overscaledZ][b.key])}for(var d=0,f=a.symbolInstances;d<f.length;d+=1)f[d].crossTileID=0;this.usedCrossTileIDs[b.overscaledZ]||(this.usedCrossTileIDs[b.overscaledZ]=
{});d=this.usedCrossTileIDs[b.overscaledZ];for(var e in this.indexes)if(f=this.indexes[e],Number(e)>b.overscaledZ)for(var k in f){var g=f[k];g.tileID.isChildOf(b)&&g.findMatches(a.symbolInstances,b,d)}else(f=f[b.scaledTo(Number(e)).key])&&f.findMatches(a.symbolInstances,b,d);e=0;for(k=a.symbolInstances;e<k.length;e+=1)f=k[e],f.crossTileID||(f.crossTileID=c.generate(),d[f.crossTileID]=!0);return void 0===this.indexes[b.overscaledZ]&&(this.indexes[b.overscaledZ]={}),this.indexes[b.overscaledZ][b.key]=
new Ed(b,a.symbolInstances,a.bucketInstanceId),!0};Fd.prototype.removeBucketCrossTileIDs=function(b,a){for(var c in a.indexedSymbolInstances)for(var d=0,f=a.indexedSymbolInstances[c];d<f.length;d+=1)delete this.usedCrossTileIDs[b][f[d].crossTileID]};Fd.prototype.removeStaleBuckets=function(b){var a=!1,c;for(c in this.indexes){var d=this.indexes[c],f;for(f in d)b[d[f].bucketInstanceId]||(this.removeBucketCrossTileIDs(c,d[f]),delete d[f],a=!0)}return a};var Vd=function(){this.layerIndexes={};this.crossTileIDs=
new he;this.maxBucketInstanceId=0;this.bucketsInCurrentPlacement={}};Vd.prototype.addLayer=function(b,a,c){var d=this.layerIndexes[b.id];void 0===d&&(d=this.layerIndexes[b.id]=new Fd);var f=!1,e={};d.handleWrapJump(c);for(c=0;c<a.length;c+=1){var k=a[c],g=k.getBucket(b);g&&b.id===g.layerIds[0]&&(g.bucketInstanceId||(g.bucketInstanceId=++this.maxBucketInstanceId),d.addBucket(k.tileID,g,this.crossTileIDs)&&(f=!0),e[g.bucketInstanceId]=!0)}return d.removeStaleBuckets(e)&&(f=!0),f};Vd.prototype.pruneUnusedLayers=
function(b){var a={},c;for(c in b.forEach(function(b){a[b]=!0}),this.layerIndexes)a[c]||delete this.layerIndexes[c]};var cd=function(a,c){return b.emitValidationErrors(a,c&&c.filter(function(b){return"source.canvas"!==b.identifier}))},ie=b.pick(jb,"addLayer removeLayer setPaintProperty setLayoutProperty setFilter addSource removeSource setLayerZoomRange setLight setTransition setGeoJSONSourceData".split(" ")),ye=b.pick(jb,["setCenter","setZoom","setBearing","setPitch"]),je=function(a){function c(d,
f){var e=this;void 0===f&&(f={});a.call(this);this.map=d;this.dispatcher=new Cb((Hc||(Hc=new We),Hc),this);this.imageManager=new db;this.glyphManager=new Lb(d._transformRequest,f.localIdeographFontFamily);this.lineAtlas=new Ec(256,512);this.crossTileSymbolIndex=new Vd;this._layers={};this._order=[];this.sourceCaches={};this.zoomHistory=new b.default$23;this._loaded=!1;this._resetUpdates();var k=this;this._rtlTextPluginCallback=c.registerForPluginAvailability(function(b){for(var a in k.dispatcher.broadcast("loadRTLTextPlugin",
b.pluginURL,b.completionCallback),k.sourceCaches)k.sourceCaches[a].reload()});this.on("data",function(b){if("source"===b.dataType&&"metadata"===b.sourceDataType&&(b=e.sourceCaches[b.sourceId])&&(b=b.getSource())&&b.vectorLayerIds)for(var a in e._layers){var c=e._layers[a];c.source===b.id&&e._validateLayer(c)}})}return a&&(c.__proto__=a),c.prototype=Object.create(a&&a.prototype),c.prototype.constructor=c,c.prototype.loadURL=function(a,c){var f=this;void 0===c&&(c={});this.fire(new b.Event("dataloading",
{dataType:"style"}));var k="boolean"==typeof c.validate?c.validate:!g(a);a=function(b,a){if(!g(b))return b;b=d(b);return b.path="/styles/v1"+b.path,e(b,a)}(a,c.accessToken);a=this.map._transformRequest(a,b.ResourceType.Style);b.getJSON(a,function(a,c){a?f.fire(new b.ErrorEvent(a)):c&&f._load(c,k)})},c.prototype.loadJSON=function(a,c){var d=this;void 0===c&&(c={});this.fire(new b.Event("dataloading",{dataType:"style"}));pa.frame(function(){d._load(a,!1!==c.validate)})},c.prototype._load=function(a,
c){var d=this;if(!c||!cd(this,b.validateStyle(a))){for(var f in this._loaded=!0,this.stylesheet=a,a.sources)d.addSource(f,a.sources[f],{validate:!1});a.sprite?function(a,c,d){function f(){if(g)d(g);else if(e&&k){var a=pa.getImageData(k),c={},f;for(f in e){var h=e[f],l=h.width,r=h.height,n=h.x,q=h.y,u=h.sdf;h=h.pixelRatio;var v=new b.RGBAImage({width:l,height:r});b.RGBAImage.copy(a,v,{x:n,y:q},{x:0,y:0},{width:l,height:r});c[f]={data:v,pixelRatio:h,sdf:u}}d(null,c)}}var e,k,g,h=1<pa.devicePixelRatio?
"@2x":"";b.getJSON(c(pb(a,h,".json"),b.ResourceType.SpriteJSON),function(b,a){g||(g=b,e=a,f())});b.getImage(c(pb(a,h,".png"),b.ResourceType.SpriteImage),function(b,a){g||(g=b,k=a,f())})}(a.sprite,this.map._transformRequest,function(a,c){if(a)d.fire(new b.ErrorEvent(a));else if(c)for(var f in c)d.imageManager.addImage(f,c[f]);d.imageManager.setLoaded(!0);d.fire(new b.Event("data",{dataType:"style"}))}):this.imageManager.setLoaded(!0);this.glyphManager.setURL(a.glyphs);a=B(this.stylesheet.layers);this._order=
a.map(function(b){return b.id});this._layers={};for(c=0;c<a.length;c+=1)f=a[c],(f=b.default$22(f)).setEventedParent(d,{layer:{id:f.id}}),d._layers[f.id]=f;this.dispatcher.broadcast("setLayers",this._serializeLayers(this._order));this.light=new nb(this.stylesheet.light);this.fire(new b.Event("data",{dataType:"style"}));this.fire(new b.Event("style.load"))}},c.prototype._validateLayer=function(a){var c=this.sourceCaches[a.source];if(c){var d=a.sourceLayer;d&&(c=c.getSource(),("geojson"===c.type||c.vectorLayerIds&&
-1===c.vectorLayerIds.indexOf(d))&&this.fire(new b.ErrorEvent(Error('Source layer "'+d+'" does not exist on source "'+c.id+'" as specified by style layer "'+a.id+'"'))))}},c.prototype.loaded=function(){if(!this._loaded||Object.keys(this._updatedSources).length)return!1;for(var b in this.sourceCaches)if(!this.sourceCaches[b].loaded())return!1;return!!this.imageManager.isLoaded()},c.prototype._serializeLayers=function(b){var a=this;return b.map(function(b){return a._layers[b].serialize()})},c.prototype.hasTransitions=
function(){if(this.light&&this.light.hasTransition())return!0;for(var b in this.sourceCaches)if(this.sourceCaches[b].hasTransition())return!0;for(var a in this._layers)if(this._layers[a].hasTransition())return!0;return!1},c.prototype._checkLoaded=function(){if(!this._loaded)throw Error("Style is not done loading");},c.prototype.update=function(a){if(this._loaded){if(this._changed){var c=Object.keys(this._updatedLayers),d=Object.keys(this._removedLayers);for(k in(c.length||d.length)&&this._updateWorkerLayers(c,
d),this._updatedSources)c=this._updatedSources[k],"reload"===c?this._reloadSource(k):"clear"===c&&this._clearSource(k);for(var f in this._updatedPaintProps)this._layers[f].updateTransitions(a);this.light.updateTransitions(a);this._resetUpdates();this.fire(new b.Event("data",{dataType:"style"}))}for(var e in this.sourceCaches)this.sourceCaches[e].used=!1;var k=0;for(f=this._order;k<f.length;k+=1)e=this._layers[f[k]],e.recalculate(a),!e.isHidden(a.zoom)&&e.source&&(this.sourceCaches[e.source].used=
!0);this.light.recalculate(a);this.z=a.zoom}},c.prototype._updateWorkerLayers=function(b,a){this.dispatcher.broadcast("updateLayers",{layers:this._serializeLayers(b),removedIds:a})},c.prototype._resetUpdates=function(){this._changed=!1;this._updatedLayers={};this._removedLayers={};this._updatedSources={};this._updatedPaintProps={}},c.prototype.setState=function(a){var c=this;if(this._checkLoaded(),cd(this,b.validateStyle(a)))return!1;(a=b.clone(a)).layers=B(a.layers);var d=H(this.serialize(),a).filter(function(b){return!(b.command in
ye)});if(0===d.length)return!1;var f=d.filter(function(b){return!(b.command in ie)});if(0<f.length)throw Error("Unimplemented: "+f.map(function(b){return b.command}).join(", ")+".");return d.forEach(function(b){"setTransition"!==b.command&&c[b.command].apply(c,b.args)}),this.stylesheet=a,!0},c.prototype.addImage=function(a,c){if(this.getImage(a))return this.fire(new b.ErrorEvent(Error("An image with this name already exists.")));this.imageManager.addImage(a,c);this.fire(new b.Event("data",{dataType:"style"}))},
c.prototype.getImage=function(b){return this.imageManager.getImage(b)},c.prototype.removeImage=function(a){if(!this.getImage(a))return this.fire(new b.ErrorEvent(Error("No image with this name exists.")));this.imageManager.removeImage(a);this.fire(new b.Event("data",{dataType:"style"}))},c.prototype.addSource=function(a,c,d){var f=this;if(this._checkLoaded(),void 0!==this.sourceCaches[a])throw Error("There is already a source with this ID");if(!c.type)throw Error("The type property must be defined, but the only the following properties were given: "+
Object.keys(c).join(", ")+".");if(!(0<=["vector","raster","geojson","video","image"].indexOf(c.type)&&this._validate(b.validateStyle.source,"sources."+a,c,null,d))){this.map&&this.map._collectResourceTiming&&(c.collectResourceTiming=!0);var e=this.sourceCaches[a]=new ge(a,c,this.dispatcher);e.style=this;e.setEventedParent(this,function(){return{isSourceLoaded:f.loaded(),source:e.serialize(),sourceId:a}});e.onAdd(this.map);this._changed=!0}},c.prototype.removeSource=function(a){if(this._checkLoaded(),
void 0===this.sourceCaches[a])throw Error("There is no source with this ID");for(var c in this._layers)if(this._layers[c].source===a)return this.fire(new b.ErrorEvent(Error('Source "'+a+'" cannot be removed while layer "'+c+'" is using it.')));c=this.sourceCaches[a];delete this.sourceCaches[a];delete this._updatedSources[a];c.fire(new b.Event("data",{sourceDataType:"metadata",dataType:"source",sourceId:a}));c.setEventedParent(null);c.clearTiles();c.onRemove&&c.onRemove(this.map);this._changed=!0},
c.prototype.setGeoJSONSourceData=function(b,a){this._checkLoaded();this.sourceCaches[b].getSource().setData(a);this._changed=!0},c.prototype.getSource=function(b){return this.sourceCaches[b]&&this.sourceCaches[b].getSource()},c.prototype.addLayer=function(a,c,d){this._checkLoaded();var f=a.id;if(this.getLayer(f))this.fire(new b.ErrorEvent(Error('Layer with id "'+f+'" already exists on this map')));else if("object"==typeof a.source&&(this.addSource(f,a.source),a=b.clone(a),a=b.extend(a,{source:f})),
!this._validate(b.validateStyle.layer,"layers."+f,a,{arrayIndex:-1},d))if(a=b.default$22(a),this._validateLayer(a),a.setEventedParent(this,{layer:{id:f}}),d=c?this._order.indexOf(c):this._order.length,c&&-1===d)this.fire(new b.ErrorEvent(Error('Layer with id "'+c+'" does not exist on this map.')));else{if(this._order.splice(d,0,f),this._layerOrderChanged=!0,this._layers[f]=a,this._removedLayers[f]&&a.source)c=this._removedLayers[f],delete this._removedLayers[f],c.type!==a.type?this._updatedSources[a.source]=
"clear":(this._updatedSources[a.source]="reload",this.sourceCaches[a.source].pause());this._updateLayer(a)}},c.prototype.moveLayer=function(a,c){if(this._checkLoaded(),this._changed=!0,this._layers[a]){if(a!==c){var d=this._order.indexOf(a);this._order.splice(d,1);d=c?this._order.indexOf(c):this._order.length;c&&-1===d?this.fire(new b.ErrorEvent(Error('Layer with id "'+c+'" does not exist on this map.'))):(this._order.splice(d,0,a),this._layerOrderChanged=!0)}}else this.fire(new b.ErrorEvent(Error("The layer '"+
a+"' does not exist in the map's style and cannot be moved.")))},c.prototype.removeLayer=function(a){this._checkLoaded();var c=this._layers[a];if(c){c.setEventedParent(null);var d=this._order.indexOf(a);this._order.splice(d,1);this._changed=this._layerOrderChanged=!0;this._removedLayers[a]=c;delete this._layers[a];delete this._updatedLayers[a];delete this._updatedPaintProps[a]}else this.fire(new b.ErrorEvent(Error("The layer '"+a+"' does not exist in the map's style and cannot be removed.")))},c.prototype.getLayer=
function(b){return this._layers[b]},c.prototype.setLayerZoomRange=function(a,c,d){this._checkLoaded();var f=this.getLayer(a);f?f.minzoom===c&&f.maxzoom===d||(null!=c&&(f.minzoom=c),null!=d&&(f.maxzoom=d),this._updateLayer(f)):this.fire(new b.ErrorEvent(Error("The layer '"+a+"' does not exist in the map's style and cannot have zoom extent.")))},c.prototype.setFilter=function(a,c){this._checkLoaded();var d=this.getLayer(a);if(d){if(!b.default$10(d.filter,c))return null==c?(d.filter=void 0,void this._updateLayer(d)):
void(this._validate(b.validateStyle.filter,"layers."+d.id+".filter",c)||(d.filter=b.clone(c),this._updateLayer(d)))}else this.fire(new b.ErrorEvent(Error("The layer '"+a+"' does not exist in the map's style and cannot be filtered.")))},c.prototype.getFilter=function(a){return b.clone(this.getLayer(a).filter)},c.prototype.setLayoutProperty=function(a,c,d){this._checkLoaded();var f=this.getLayer(a);f?b.default$10(f.getLayoutProperty(c),d)||(f.setLayoutProperty(c,d),this._updateLayer(f)):this.fire(new b.ErrorEvent(Error("The layer '"+
a+"' does not exist in the map's style and cannot be styled.")))},c.prototype.getLayoutProperty=function(b,a){return this.getLayer(b).getLayoutProperty(a)},c.prototype.setPaintProperty=function(a,c,d){this._checkLoaded();var f=this.getLayer(a);if(f){if(!b.default$10(f.getPaintProperty(c),d)){var e=f._transitionablePaint._values[c].value.isDataDriven();f.setPaintProperty(c,d);(f._transitionablePaint._values[c].value.isDataDriven()||e)&&this._updateLayer(f);this._changed=!0;this._updatedPaintProps[a]=
!0}}else this.fire(new b.ErrorEvent(Error("The layer '"+a+"' does not exist in the map's style and cannot be styled.")))},c.prototype.getPaintProperty=function(b,a){return this.getLayer(b).getPaintProperty(a)},c.prototype.getTransition=function(){return b.extend({duration:300,delay:0},this.stylesheet&&this.stylesheet.transition)},c.prototype.serialize=function(){var a=this;return b.filterObject({version:this.stylesheet.version,name:this.stylesheet.name,metadata:this.stylesheet.metadata,light:this.stylesheet.light,
center:this.stylesheet.center,zoom:this.stylesheet.zoom,bearing:this.stylesheet.bearing,pitch:this.stylesheet.pitch,sprite:this.stylesheet.sprite,glyphs:this.stylesheet.glyphs,transition:this.stylesheet.transition,sources:b.mapObject(this.sourceCaches,function(b){return b.serialize()}),layers:this._order.map(function(b){return a._layers[b].serialize()})},function(b){return void 0!==b})},c.prototype._updateLayer=function(b){this._updatedLayers[b.id]=!0;b.source&&!this._updatedSources[b.source]&&(this._updatedSources[b.source]=
"reload",this.sourceCaches[b.source].pause());this._changed=!0},c.prototype._flattenRenderedFeatures=function(b){for(var a=[],c=this._order.length-1;0<=c;c--)for(var d=this._order[c],f=0,e=b;f<e.length;f+=1){var k=e[f][d];if(k)for(var g=0;g<k.length;g+=1)a.push(k[g])}return a},c.prototype.queryRenderedFeatures=function(a,c,d){c&&c.filter&&this._validate(b.validateStyle.filter,"queryRenderedFeatures.filter",c.filter);var f={};if(c&&c.layers){if(!Array.isArray(c.layers))return this.fire(new b.ErrorEvent(Error("parameters.layers must be an Array."))),
[];for(var e=0,k=c.layers;e<k.length;e+=1){var g=k[e],h=this._layers[g];if(!h)return this.fire(new b.ErrorEvent(Error("The layer '"+g+"' does not exist in the map's style and cannot be queried for features."))),[];f[h.source]=!0}}e=[];for(var l in this.sourceCaches)c.layers&&!f[l]||e.push(p(this.sourceCaches[l],this._layers,a.worldCoordinate,c,d));return this.placement&&e.push(function(b,a,c,d,f){var e={},k=d.queryRenderedSymbols(a);a=[];d=0;for(var g=Object.keys(k).map(Number);d<g.length;d+=1)a.push(f[g[d]]);
a.sort(A);f=function(){var a=l[h],d=a.featureIndex.lookupSymbolFeatures(k[a.bucketInstanceId],a.bucketIndex,a.sourceLayerIndex,c.filter,c.layers,b),f;for(f in d){var g=e[f]=e[f]||[],r=d[f];r.sort(function(b,c){var d=a.featureSortOrder;return d?(b=d.indexOf(b.featureIndex),d.indexOf(c.featureIndex)-b):c.featureIndex-b.featureIndex});for(var n=0;n<r.length;n+=1)g.push(r[n].feature)}};for(var h=0,l=a;h<l.length;h+=1)f();return e}(this._layers,a.viewport,c,this.placement.collisionIndex,this.placement.retainedQueryData)),
this._flattenRenderedFeatures(e)},c.prototype.querySourceFeatures=function(a,c){c&&c.filter&&this._validate(b.validateStyle.filter,"querySourceFeatures.filter",c.filter);return(a=this.sourceCaches[a])?function(b,a){for(var c=b.getRenderableIds().map(function(a){return b.getTileByID(a)}),d=[],f={},e=0;e<c.length;e++){var k=c[e],g=k.tileID.canonical.key;f[g]||(f[g]=!0,k.querySourceFeatures(d,a))}return d}(a,c):[]},c.prototype.addSourceType=function(b,a,d){return c.getSourceType(b)?d(Error('A source type called "'+
b+'" already exists.')):(c.setSourceType(b,a),a.workerSourceURL?void this.dispatcher.broadcast("loadWorkerSource",{name:b,url:a.workerSourceURL},d):d(null,null))},c.prototype.getLight=function(){return this.light.getLight()},c.prototype.setLight=function(a){this._checkLoaded();var c=this.light.getLight(),d=!1,f;for(f in a)if(!b.default$10(a[f],c[f])){d=!0;break}d&&(c={now:pa.now(),transition:b.extend({duration:300,delay:0},this.stylesheet.transition)},this.light.setLight(a),this.light.updateTransitions(c))},
c.prototype._validate=function(a,c,d,f,e){return(!e||!1!==e.validate)&&cd(this,a.call(b.validateStyle,b.extend({key:c,style:this.serialize(),value:d,styleSpec:b.default$5},f)))},c.prototype._remove=function(){for(var a in b.evented.off("pluginAvailable",this._rtlTextPluginCallback),this.sourceCaches)this.sourceCaches[a].clearTiles();this.dispatcher.remove()},c.prototype._clearSource=function(b){this.sourceCaches[b].clearTiles()},c.prototype._reloadSource=function(b){this.sourceCaches[b].resume();
this.sourceCaches[b].reload()},c.prototype._updateSources=function(b){for(var a in this.sourceCaches)this.sourceCaches[a].update(b)},c.prototype._generateCollisionBoxes=function(){for(var b in this.sourceCaches)this._reloadSource(b)},c.prototype._updatePlacement=function(b,a,c){for(var d=!1,f=!1,e={},k=0,g=this._order;k<g.length;k+=1){var h=this._layers[g[k]];if("symbol"===h.type){if(!e[h.source]){var l=this.sourceCaches[h.source];e[h.source]=l.getRenderableIds().map(function(b){return l.getTileByID(b)}).sort(function(b,
a){return a.tileID.overscaledZ-b.tileID.overscaledZ||(b.tileID.isLessThan(a.tileID)?-1:1)})}h=this.crossTileSymbolIndex.addLayer(h,e[h.source],b.center.lng);d=d||h}}this.crossTileSymbolIndex.pruneUnusedLayers(this._order);k=this._layerOrderChanged;if((k||!this.pauseablePlacement||this.pauseablePlacement.isDone()&&!this.placement.stillRecent(pa.now()))&&(this.pauseablePlacement=new bd(b,this._order,k,a,c),this._layerOrderChanged=!1),this.pauseablePlacement.isDone()?this.placement.setStale():(this.pauseablePlacement.continuePlacement(this._order,
this._layers,e),this.pauseablePlacement.isDone()&&(this.placement=this.pauseablePlacement.commit(this.placement,pa.now()),f=!0),d&&this.pauseablePlacement.placement.setStale()),f||d)for(b=0,a=this._order;b<a.length;b+=1)c=this._layers[a[b]],"symbol"===c.type&&this.placement.updateLayerOpacities(c,e[c.source]);return!this.pauseablePlacement.isDone()||this.placement.hasTransitions(pa.now())},c.prototype.getImages=function(b,a,c){this.imageManager.getImages(a.icons,c)},c.prototype.getGlyphs=function(b,
a,c){this.glyphManager.getGlyphs(a.stacks,c)},c}(b.Evented);je.getSourceType=function(b){return xc[b]};je.setSourceType=function(b,a){xc[b]=a};je.registerForPluginAvailability=b.registerForPluginAvailability;var Gd=b.createLayout([{name:"a_pos",type:"Int16",components:2}]),Hd={prelude:{fragmentSource:"#ifdef GL_ES\nprecision mediump float;\n#else\n\n#if !defined(lowp)\n#define lowp\n#endif\n\n#if !defined(mediump)\n#define mediump\n#endif\n\n#if !defined(highp)\n#define highp\n#endif\n\n#endif\n",
vertexSource:"#ifdef GL_ES\nprecision highp float;\n#else\n\n#if !defined(lowp)\n#define lowp\n#endif\n\n#if !defined(mediump)\n#define mediump\n#endif\n\n#if !defined(highp)\n#define highp\n#endif\n\n#endif\n\n// Unpack a pair of values that have been packed into a single float.\n// The packed values are assumed to be 8-bit unsigned integers, and are\n// packed like so:\n// packedValue \x3d floor(input[0]) * 256 + input[1],\nvec2 unpack_float(const float packedValue) {\n    int packedIntValue \x3d int(packedValue);\n    int v0 \x3d packedIntValue / 256;\n    return vec2(v0, packedIntValue - v0 * 256);\n}\n\nvec2 unpack_opacity(const float packedOpacity) {\n    int intOpacity \x3d int(packedOpacity) / 2;\n    return vec2(float(intOpacity) / 127.0, mod(packedOpacity, 2.0));\n}\n\n// To minimize the number of attributes needed, we encode a 4-component\n// color into a pair of floats (i.e. a vec2) as follows:\n// [ floor(color.r * 255) * 256 + color.g * 255,\n//   floor(color.b * 255) * 256 + color.g * 255 ]\nvec4 decode_color(const vec2 encodedColor) {\n    return vec4(\n        unpack_float(encodedColor[0]) / 255.0,\n        unpack_float(encodedColor[1]) / 255.0\n    );\n}\n\n// Unpack a pair of paint values and interpolate between them.\nfloat unpack_mix_vec2(const vec2 packedValue, const float t) {\n    return mix(packedValue[0], packedValue[1], t);\n}\n\n// Unpack a pair of paint values and interpolate between them.\nvec4 unpack_mix_vec4(const vec4 packedColors, const float t) {\n    vec4 minColor \x3d decode_color(vec2(packedColors[0], packedColors[1]));\n    vec4 maxColor \x3d decode_color(vec2(packedColors[2], packedColors[3]));\n    return mix(minColor, maxColor, t);\n}\n\n// The offset depends on how many pixels are between the world origin and the edge of the tile:\n// vec2 offset \x3d mod(pixel_coord, size)\n//\n// At high zoom levels there are a ton of pixels between the world origin and the edge of the tile.\n// The glsl spec only guarantees 16 bits of precision for highp floats. We need more than that.\n//\n// The pixel_coord is passed in as two 16 bit values:\n// pixel_coord_upper \x3d floor(pixel_coord / 2^16)\n// pixel_coord_lower \x3d mod(pixel_coord, 2^16)\n//\n// The offset is calculated in a series of steps that should preserve this precision:\nvec2 get_pattern_pos(const vec2 pixel_coord_upper, const vec2 pixel_coord_lower,\n    const vec2 pattern_size, const float tile_units_to_pixels, const vec2 pos) {\n\n    vec2 offset \x3d mod(mod(mod(pixel_coord_upper, pattern_size) * 256.0, pattern_size) * 256.0 + pixel_coord_lower, pattern_size);\n    return (tile_units_to_pixels * pos + offset) / pattern_size;\n}\n"},
background:{fragmentSource:"uniform vec4 u_color;\nuniform float u_opacity;\n\nvoid main() {\n    gl_FragColor \x3d u_color * u_opacity;\n\n#ifdef OVERDRAW_INSPECTOR\n    gl_FragColor \x3d vec4(1.0);\n#endif\n}\n",vertexSource:"attribute vec2 a_pos;\n\nuniform mat4 u_matrix;\n\nvoid main() {\n    gl_Position \x3d u_matrix * vec4(a_pos, 0, 1);\n}\n"},backgroundPattern:{fragmentSource:"uniform vec2 u_pattern_tl_a;\nuniform vec2 u_pattern_br_a;\nuniform vec2 u_pattern_tl_b;\nuniform vec2 u_pattern_br_b;\nuniform vec2 u_texsize;\nuniform float u_mix;\nuniform float u_opacity;\n\nuniform sampler2D u_image;\n\nvarying vec2 v_pos_a;\nvarying vec2 v_pos_b;\n\nvoid main() {\n    vec2 imagecoord \x3d mod(v_pos_a, 1.0);\n    vec2 pos \x3d mix(u_pattern_tl_a / u_texsize, u_pattern_br_a / u_texsize, imagecoord);\n    vec4 color1 \x3d texture2D(u_image, pos);\n\n    vec2 imagecoord_b \x3d mod(v_pos_b, 1.0);\n    vec2 pos2 \x3d mix(u_pattern_tl_b / u_texsize, u_pattern_br_b / u_texsize, imagecoord_b);\n    vec4 color2 \x3d texture2D(u_image, pos2);\n\n    gl_FragColor \x3d mix(color1, color2, u_mix) * u_opacity;\n\n#ifdef OVERDRAW_INSPECTOR\n    gl_FragColor \x3d vec4(1.0);\n#endif\n}\n",
vertexSource:"uniform mat4 u_matrix;\nuniform vec2 u_pattern_size_a;\nuniform vec2 u_pattern_size_b;\nuniform vec2 u_pixel_coord_upper;\nuniform vec2 u_pixel_coord_lower;\nuniform float u_scale_a;\nuniform float u_scale_b;\nuniform float u_tile_units_to_pixels;\n\nattribute vec2 a_pos;\n\nvarying vec2 v_pos_a;\nvarying vec2 v_pos_b;\n\nvoid main() {\n    gl_Position \x3d u_matrix * vec4(a_pos, 0, 1);\n\n    v_pos_a \x3d get_pattern_pos(u_pixel_coord_upper, u_pixel_coord_lower, u_scale_a * u_pattern_size_a, u_tile_units_to_pixels, a_pos);\n    v_pos_b \x3d get_pattern_pos(u_pixel_coord_upper, u_pixel_coord_lower, u_scale_b * u_pattern_size_b, u_tile_units_to_pixels, a_pos);\n}\n"},
circle:{fragmentSource:"#pragma mapbox: define highp vec4 color\n#pragma mapbox: define mediump float radius\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define highp vec4 stroke_color\n#pragma mapbox: define mediump float stroke_width\n#pragma mapbox: define lowp float stroke_opacity\n\nvarying vec3 v_data;\n\nvoid main() {\n    #pragma mapbox: initialize highp vec4 color\n    #pragma mapbox: initialize mediump float radius\n    #pragma mapbox: initialize lowp float blur\n    #pragma mapbox: initialize lowp float opacity\n    #pragma mapbox: initialize highp vec4 stroke_color\n    #pragma mapbox: initialize mediump float stroke_width\n    #pragma mapbox: initialize lowp float stroke_opacity\n\n    vec2 extrude \x3d v_data.xy;\n    float extrude_length \x3d length(extrude);\n\n    lowp float antialiasblur \x3d v_data.z;\n    float antialiased_blur \x3d -max(blur, antialiasblur);\n\n    float opacity_t \x3d smoothstep(0.0, antialiased_blur, extrude_length - 1.0);\n\n    float color_t \x3d stroke_width \x3c 0.01 ? 0.0 : smoothstep(\n        antialiased_blur,\n        0.0,\n        extrude_length - radius / (radius + stroke_width)\n    );\n\n    gl_FragColor \x3d opacity_t * mix(color * opacity, stroke_color * stroke_opacity, color_t);\n\n#ifdef OVERDRAW_INSPECTOR\n    gl_FragColor \x3d vec4(1.0);\n#endif\n}\n",
vertexSource:"uniform mat4 u_matrix;\nuniform bool u_scale_with_map;\nuniform bool u_pitch_with_map;\nuniform vec2 u_extrude_scale;\nuniform highp float u_camera_to_center_distance;\n\nattribute vec2 a_pos;\n\n#pragma mapbox: define highp vec4 color\n#pragma mapbox: define mediump float radius\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define highp vec4 stroke_color\n#pragma mapbox: define mediump float stroke_width\n#pragma mapbox: define lowp float stroke_opacity\n\nvarying vec3 v_data;\n\nvoid main(void) {\n    #pragma mapbox: initialize highp vec4 color\n    #pragma mapbox: initialize mediump float radius\n    #pragma mapbox: initialize lowp float blur\n    #pragma mapbox: initialize lowp float opacity\n    #pragma mapbox: initialize highp vec4 stroke_color\n    #pragma mapbox: initialize mediump float stroke_width\n    #pragma mapbox: initialize lowp float stroke_opacity\n\n    // unencode the extrusion vector that we snuck into the a_pos vector\n    vec2 extrude \x3d vec2(mod(a_pos, 2.0) * 2.0 - 1.0);\n\n    // multiply a_pos by 0.5, since we had it * 2 in order to sneak\n    // in extrusion data\n    vec2 circle_center \x3d floor(a_pos * 0.5);\n    if (u_pitch_with_map) {\n        vec2 corner_position \x3d circle_center;\n        if (u_scale_with_map) {\n            corner_position +\x3d extrude * (radius + stroke_width) * u_extrude_scale;\n        } else {\n            // Pitching the circle with the map effectively scales it with the map\n            // To counteract the effect for pitch-scale: viewport, we rescale the\n            // whole circle based on the pitch scaling effect at its central point\n            vec4 projected_center \x3d u_matrix * vec4(circle_center, 0, 1);\n            corner_position +\x3d extrude * (radius + stroke_width) * u_extrude_scale * (projected_center.w / u_camera_to_center_distance);\n        }\n\n        gl_Position \x3d u_matrix * vec4(corner_position, 0, 1);\n    } else {\n        gl_Position \x3d u_matrix * vec4(circle_center, 0, 1);\n\n        if (u_scale_with_map) {\n            gl_Position.xy +\x3d extrude * (radius + stroke_width) * u_extrude_scale * u_camera_to_center_distance;\n        } else {\n            gl_Position.xy +\x3d extrude * (radius + stroke_width) * u_extrude_scale * gl_Position.w;\n        }\n    }\n\n    // This is a minimum blur distance that serves as a faux-antialiasing for\n    // the circle. since blur is a ratio of the circle's size and the intent is\n    // to keep the blur at roughly 1px, the two are inversely related.\n    lowp float antialiasblur \x3d 1.0 / DEVICE_PIXEL_RATIO / (radius + stroke_width);\n\n    v_data \x3d vec3(extrude.x, extrude.y, antialiasblur);\n}\n"},
clippingMask:{fragmentSource:"void main() {\n    gl_FragColor \x3d vec4(1.0);\n}\n",vertexSource:"attribute vec2 a_pos;\n\nuniform mat4 u_matrix;\n\nvoid main() {\n    gl_Position \x3d u_matrix * vec4(a_pos, 0, 1);\n}\n"},heatmap:{fragmentSource:"#pragma mapbox: define highp float weight\n\nuniform highp float u_intensity;\nvarying vec2 v_extrude;\n\n// Gaussian kernel coefficient: 1 / sqrt(2 * PI)\n#define GAUSS_COEF 0.3989422804014327\n\nvoid main() {\n    #pragma mapbox: initialize highp float weight\n\n    // Kernel density estimation with a Gaussian kernel of size 5x5\n    float d \x3d -0.5 * 3.0 * 3.0 * dot(v_extrude, v_extrude);\n    float val \x3d weight * u_intensity * GAUSS_COEF * exp(d);\n\n    gl_FragColor \x3d vec4(val, 1.0, 1.0, 1.0);\n\n#ifdef OVERDRAW_INSPECTOR\n    gl_FragColor \x3d vec4(1.0);\n#endif\n}\n",
vertexSource:"#pragma mapbox: define highp float weight\n#pragma mapbox: define mediump float radius\n\nuniform mat4 u_matrix;\nuniform float u_extrude_scale;\nuniform float u_opacity;\nuniform float u_intensity;\n\nattribute vec2 a_pos;\n\nvarying vec2 v_extrude;\n\n// Effective \"0\" in the kernel density texture to adjust the kernel size to;\n// this empirically chosen number minimizes artifacts on overlapping kernels\n// for typical heatmap cases (assuming clustered source)\nconst highp float ZERO \x3d 1.0 / 255.0 / 16.0;\n\n// Gaussian kernel coefficient: 1 / sqrt(2 * PI)\n#define GAUSS_COEF 0.3989422804014327\n\nvoid main(void) {\n    #pragma mapbox: initialize highp float weight\n    #pragma mapbox: initialize mediump float radius\n\n    // unencode the extrusion vector that we snuck into the a_pos vector\n    vec2 unscaled_extrude \x3d vec2(mod(a_pos, 2.0) * 2.0 - 1.0);\n\n    // This 'extrude' comes in ranging from [-1, -1], to [1, 1].  We'll use\n    // it to produce the vertices of a square mesh framing the point feature\n    // we're adding to the kernel density texture.  We'll also pass it as\n    // a varying, so that the fragment shader can determine the distance of\n    // each fragment from the point feature.\n    // Before we do so, we need to scale it up sufficiently so that the\n    // kernel falls effectively to zero at the edge of the mesh.\n    // That is, we want to know S such that\n    // weight * u_intensity * GAUSS_COEF * exp(-0.5 * 3.0^2 * S^2) \x3d\x3d ZERO\n    // Which solves to:\n    // S \x3d sqrt(-2.0 * log(ZERO / (weight * u_intensity * GAUSS_COEF))) / 3.0\n    float S \x3d sqrt(-2.0 * log(ZERO / weight / u_intensity / GAUSS_COEF)) / 3.0;\n\n    // Pass the varying in units of radius\n    v_extrude \x3d S * unscaled_extrude;\n\n    // Scale by radius and the zoom-based scale factor to produce actual\n    // mesh position\n    vec2 extrude \x3d v_extrude * radius * u_extrude_scale;\n\n    // multiply a_pos by 0.5, since we had it * 2 in order to sneak\n    // in extrusion data\n    vec4 pos \x3d vec4(floor(a_pos * 0.5) + extrude, 0, 1);\n\n    gl_Position \x3d u_matrix * pos;\n}\n"},
heatmapTexture:{fragmentSource:"uniform sampler2D u_image;\nuniform sampler2D u_color_ramp;\nuniform float u_opacity;\nvarying vec2 v_pos;\n\nvoid main() {\n    float t \x3d texture2D(u_image, v_pos).r;\n    vec4 color \x3d texture2D(u_color_ramp, vec2(t, 0.5));\n    gl_FragColor \x3d color * u_opacity;\n\n#ifdef OVERDRAW_INSPECTOR\n    gl_FragColor \x3d vec4(0.0);\n#endif\n}\n",vertexSource:"uniform mat4 u_matrix;\nuniform vec2 u_world;\nattribute vec2 a_pos;\nvarying vec2 v_pos;\n\nvoid main() {\n    gl_Position \x3d u_matrix * vec4(a_pos * u_world, 0, 1);\n\n    v_pos.x \x3d a_pos.x;\n    v_pos.y \x3d 1.0 - a_pos.y;\n}\n"},
collisionBox:{fragmentSource:"\nvarying float v_placed;\nvarying float v_notUsed;\n\nvoid main() {\n\n    float alpha \x3d 0.5;\n\n    // Red \x3d collision, hide label\n    gl_FragColor \x3d vec4(1.0, 0.0, 0.0, 1.0) * alpha;\n\n    // Blue \x3d no collision, label is showing\n    if (v_placed \x3e 0.5) {\n        gl_FragColor \x3d vec4(0.0, 0.0, 1.0, 0.5) * alpha;\n    }\n\n    if (v_notUsed \x3e 0.5) {\n        // This box not used, fade it out\n        gl_FragColor *\x3d .1;\n    }\n}",vertexSource:"attribute vec2 a_pos;\nattribute vec2 a_anchor_pos;\nattribute vec2 a_extrude;\nattribute vec2 a_placed;\n\nuniform mat4 u_matrix;\nuniform vec2 u_extrude_scale;\nuniform float u_camera_to_center_distance;\n\nvarying float v_placed;\nvarying float v_notUsed;\n\nvoid main() {\n    vec4 projectedPoint \x3d u_matrix * vec4(a_anchor_pos, 0, 1);\n    highp float camera_to_anchor_distance \x3d projectedPoint.w;\n    highp float collision_perspective_ratio \x3d clamp(\n        0.5 + 0.5 * (u_camera_to_center_distance / camera_to_anchor_distance),\n        0.0, // Prevents oversized near-field boxes in pitched/overzoomed tiles\n        4.0);\n\n    gl_Position \x3d u_matrix * vec4(a_pos, 0.0, 1.0);\n    gl_Position.xy +\x3d a_extrude * u_extrude_scale * gl_Position.w * collision_perspective_ratio;\n\n    v_placed \x3d a_placed.x;\n    v_notUsed \x3d a_placed.y;\n}\n"},
collisionCircle:{fragmentSource:"uniform float u_overscale_factor;\n\nvarying float v_placed;\nvarying float v_notUsed;\nvarying float v_radius;\nvarying vec2 v_extrude;\nvarying vec2 v_extrude_scale;\n\nvoid main() {\n    float alpha \x3d 0.5;\n\n    // Red \x3d collision, hide label\n    vec4 color \x3d vec4(1.0, 0.0, 0.0, 1.0) * alpha;\n\n    // Blue \x3d no collision, label is showing\n    if (v_placed \x3e 0.5) {\n        color \x3d vec4(0.0, 0.0, 1.0, 0.5) * alpha;\n    }\n\n    if (v_notUsed \x3e 0.5) {\n        // This box not used, fade it out\n        color *\x3d .2;\n    }\n\n    float extrude_scale_length \x3d length(v_extrude_scale);\n    float extrude_length \x3d length(v_extrude) * extrude_scale_length;\n    float stroke_width \x3d 15.0 * extrude_scale_length / u_overscale_factor;\n    float radius \x3d v_radius * extrude_scale_length;\n\n    float distance_to_edge \x3d abs(extrude_length - radius);\n    float opacity_t \x3d smoothstep(-stroke_width, 0.0, -distance_to_edge);\n\n    gl_FragColor \x3d opacity_t * color;\n}\n",
vertexSource:"attribute vec2 a_pos;\nattribute vec2 a_anchor_pos;\nattribute vec2 a_extrude;\nattribute vec2 a_placed;\n\nuniform mat4 u_matrix;\nuniform vec2 u_extrude_scale;\nuniform float u_camera_to_center_distance;\n\nvarying float v_placed;\nvarying float v_notUsed;\nvarying float v_radius;\n\nvarying vec2 v_extrude;\nvarying vec2 v_extrude_scale;\n\nvoid main() {\n    vec4 projectedPoint \x3d u_matrix * vec4(a_anchor_pos, 0, 1);\n    highp float camera_to_anchor_distance \x3d projectedPoint.w;\n    highp float collision_perspective_ratio \x3d clamp(\n        0.5 + 0.5 * (u_camera_to_center_distance / camera_to_anchor_distance),\n        0.0, // Prevents oversized near-field circles in pitched/overzoomed tiles\n        4.0);\n\n    gl_Position \x3d u_matrix * vec4(a_pos, 0.0, 1.0);\n\n    highp float padding_factor \x3d 1.2; // Pad the vertices slightly to make room for anti-alias blur\n    gl_Position.xy +\x3d a_extrude * u_extrude_scale * padding_factor * gl_Position.w * collision_perspective_ratio;\n\n    v_placed \x3d a_placed.x;\n    v_notUsed \x3d a_placed.y;\n    v_radius \x3d abs(a_extrude.y); // We don't pitch the circles, so both units of the extrusion vector are equal in magnitude to the radius\n\n    v_extrude \x3d a_extrude * padding_factor;\n    v_extrude_scale \x3d u_extrude_scale * u_camera_to_center_distance * collision_perspective_ratio;\n}\n"},
debug:{fragmentSource:"uniform highp vec4 u_color;\n\nvoid main() {\n    gl_FragColor \x3d u_color;\n}\n",vertexSource:"attribute vec2 a_pos;\n\nuniform mat4 u_matrix;\n\nvoid main() {\n    gl_Position \x3d u_matrix * vec4(a_pos, 0, 1);\n}\n"},fill:{fragmentSource:"#pragma mapbox: define highp vec4 color\n#pragma mapbox: define lowp float opacity\n\nvoid main() {\n    #pragma mapbox: initialize highp vec4 color\n    #pragma mapbox: initialize lowp float opacity\n\n    gl_FragColor \x3d color * opacity;\n\n#ifdef OVERDRAW_INSPECTOR\n    gl_FragColor \x3d vec4(1.0);\n#endif\n}\n",
vertexSource:"attribute vec2 a_pos;\n\nuniform mat4 u_matrix;\n\n#pragma mapbox: define highp vec4 color\n#pragma mapbox: define lowp float opacity\n\nvoid main() {\n    #pragma mapbox: initialize highp vec4 color\n    #pragma mapbox: initialize lowp float opacity\n\n    gl_Position \x3d u_matrix * vec4(a_pos, 0, 1);\n}\n"},fillOutline:{fragmentSource:"#pragma mapbox: define highp vec4 outline_color\n#pragma mapbox: define lowp float opacity\n\nvarying vec2 v_pos;\n\nvoid main() {\n    #pragma mapbox: initialize highp vec4 outline_color\n    #pragma mapbox: initialize lowp float opacity\n\n    float dist \x3d length(v_pos - gl_FragCoord.xy);\n    float alpha \x3d 1.0 - smoothstep(0.0, 1.0, dist);\n    gl_FragColor \x3d outline_color * (alpha * opacity);\n\n#ifdef OVERDRAW_INSPECTOR\n    gl_FragColor \x3d vec4(1.0);\n#endif\n}\n",
vertexSource:"attribute vec2 a_pos;\n\nuniform mat4 u_matrix;\nuniform vec2 u_world;\n\nvarying vec2 v_pos;\n\n#pragma mapbox: define highp vec4 outline_color\n#pragma mapbox: define lowp float opacity\n\nvoid main() {\n    #pragma mapbox: initialize highp vec4 outline_color\n    #pragma mapbox: initialize lowp float opacity\n\n    gl_Position \x3d u_matrix * vec4(a_pos, 0, 1);\n    v_pos \x3d (gl_Position.xy / gl_Position.w + 1.0) / 2.0 * u_world;\n}\n"},fillOutlinePattern:{fragmentSource:"uniform vec2 u_pattern_tl_a;\nuniform vec2 u_pattern_br_a;\nuniform vec2 u_pattern_tl_b;\nuniform vec2 u_pattern_br_b;\nuniform vec2 u_texsize;\nuniform float u_mix;\n\nuniform sampler2D u_image;\n\nvarying vec2 v_pos_a;\nvarying vec2 v_pos_b;\nvarying vec2 v_pos;\n\n#pragma mapbox: define lowp float opacity\n\nvoid main() {\n    #pragma mapbox: initialize lowp float opacity\n\n    vec2 imagecoord \x3d mod(v_pos_a, 1.0);\n    vec2 pos \x3d mix(u_pattern_tl_a / u_texsize, u_pattern_br_a / u_texsize, imagecoord);\n    vec4 color1 \x3d texture2D(u_image, pos);\n\n    vec2 imagecoord_b \x3d mod(v_pos_b, 1.0);\n    vec2 pos2 \x3d mix(u_pattern_tl_b / u_texsize, u_pattern_br_b / u_texsize, imagecoord_b);\n    vec4 color2 \x3d texture2D(u_image, pos2);\n\n    // find distance to outline for alpha interpolation\n\n    float dist \x3d length(v_pos - gl_FragCoord.xy);\n    float alpha \x3d 1.0 - smoothstep(0.0, 1.0, dist);\n\n\n    gl_FragColor \x3d mix(color1, color2, u_mix) * alpha * opacity;\n\n#ifdef OVERDRAW_INSPECTOR\n    gl_FragColor \x3d vec4(1.0);\n#endif\n}\n",
vertexSource:"uniform mat4 u_matrix;\nuniform vec2 u_world;\nuniform vec2 u_pattern_size_a;\nuniform vec2 u_pattern_size_b;\nuniform vec2 u_pixel_coord_upper;\nuniform vec2 u_pixel_coord_lower;\nuniform float u_scale_a;\nuniform float u_scale_b;\nuniform float u_tile_units_to_pixels;\n\nattribute vec2 a_pos;\n\nvarying vec2 v_pos_a;\nvarying vec2 v_pos_b;\nvarying vec2 v_pos;\n\n#pragma mapbox: define lowp float opacity\n\nvoid main() {\n    #pragma mapbox: initialize lowp float opacity\n\n    gl_Position \x3d u_matrix * vec4(a_pos, 0, 1);\n\n    v_pos_a \x3d get_pattern_pos(u_pixel_coord_upper, u_pixel_coord_lower, u_scale_a * u_pattern_size_a, u_tile_units_to_pixels, a_pos);\n    v_pos_b \x3d get_pattern_pos(u_pixel_coord_upper, u_pixel_coord_lower, u_scale_b * u_pattern_size_b, u_tile_units_to_pixels, a_pos);\n\n    v_pos \x3d (gl_Position.xy / gl_Position.w + 1.0) / 2.0 * u_world;\n}\n"},
fillPattern:{fragmentSource:"uniform vec2 u_pattern_tl_a;\nuniform vec2 u_pattern_br_a;\nuniform vec2 u_pattern_tl_b;\nuniform vec2 u_pattern_br_b;\nuniform vec2 u_texsize;\nuniform float u_mix;\n\nuniform sampler2D u_image;\n\nvarying vec2 v_pos_a;\nvarying vec2 v_pos_b;\n\n#pragma mapbox: define lowp float opacity\n\nvoid main() {\n    #pragma mapbox: initialize lowp float opacity\n\n    vec2 imagecoord \x3d mod(v_pos_a, 1.0);\n    vec2 pos \x3d mix(u_pattern_tl_a / u_texsize, u_pattern_br_a / u_texsize, imagecoord);\n    vec4 color1 \x3d texture2D(u_image, pos);\n\n    vec2 imagecoord_b \x3d mod(v_pos_b, 1.0);\n    vec2 pos2 \x3d mix(u_pattern_tl_b / u_texsize, u_pattern_br_b / u_texsize, imagecoord_b);\n    vec4 color2 \x3d texture2D(u_image, pos2);\n\n    gl_FragColor \x3d mix(color1, color2, u_mix) * opacity;\n\n#ifdef OVERDRAW_INSPECTOR\n    gl_FragColor \x3d vec4(1.0);\n#endif\n}\n",
vertexSource:"uniform mat4 u_matrix;\nuniform vec2 u_pattern_size_a;\nuniform vec2 u_pattern_size_b;\nuniform vec2 u_pixel_coord_upper;\nuniform vec2 u_pixel_coord_lower;\nuniform float u_scale_a;\nuniform float u_scale_b;\nuniform float u_tile_units_to_pixels;\n\nattribute vec2 a_pos;\n\nvarying vec2 v_pos_a;\nvarying vec2 v_pos_b;\n\n#pragma mapbox: define lowp float opacity\n\nvoid main() {\n    #pragma mapbox: initialize lowp float opacity\n\n    gl_Position \x3d u_matrix * vec4(a_pos, 0, 1);\n\n    v_pos_a \x3d get_pattern_pos(u_pixel_coord_upper, u_pixel_coord_lower, u_scale_a * u_pattern_size_a, u_tile_units_to_pixels, a_pos);\n    v_pos_b \x3d get_pattern_pos(u_pixel_coord_upper, u_pixel_coord_lower, u_scale_b * u_pattern_size_b, u_tile_units_to_pixels, a_pos);\n}\n"},
fillExtrusion:{fragmentSource:"varying vec4 v_color;\n#pragma mapbox: define lowp float base\n#pragma mapbox: define lowp float height\n#pragma mapbox: define highp vec4 color\n\nvoid main() {\n    #pragma mapbox: initialize lowp float base\n    #pragma mapbox: initialize lowp float height\n    #pragma mapbox: initialize highp vec4 color\n\n    gl_FragColor \x3d v_color;\n\n#ifdef OVERDRAW_INSPECTOR\n    gl_FragColor \x3d vec4(1.0);\n#endif\n}\n",vertexSource:"uniform mat4 u_matrix;\nuniform vec3 u_lightcolor;\nuniform lowp vec3 u_lightpos;\nuniform lowp float u_lightintensity;\n\nattribute vec2 a_pos;\nattribute vec4 a_normal_ed;\n\nvarying vec4 v_color;\n\n#pragma mapbox: define lowp float base\n#pragma mapbox: define lowp float height\n\n#pragma mapbox: define highp vec4 color\n\nvoid main() {\n    #pragma mapbox: initialize lowp float base\n    #pragma mapbox: initialize lowp float height\n    #pragma mapbox: initialize highp vec4 color\n\n    vec3 normal \x3d a_normal_ed.xyz;\n\n    base \x3d max(0.0, base);\n    height \x3d max(0.0, height);\n\n    float t \x3d mod(normal.x, 2.0);\n\n    gl_Position \x3d u_matrix * vec4(a_pos, t \x3e 0.0 ? height : base, 1);\n\n    // Relative luminance (how dark/bright is the surface color?)\n    float colorvalue \x3d color.r * 0.2126 + color.g * 0.7152 + color.b * 0.0722;\n\n    v_color \x3d vec4(0.0, 0.0, 0.0, 1.0);\n\n    // Add slight ambient lighting so no extrusions are totally black\n    vec4 ambientlight \x3d vec4(0.03, 0.03, 0.03, 1.0);\n    color +\x3d ambientlight;\n\n    // Calculate cos(theta), where theta is the angle between surface normal and diffuse light ray\n    float directional \x3d clamp(dot(normal / 16384.0, u_lightpos), 0.0, 1.0);\n\n    // Adjust directional so that\n    // the range of values for highlight/shading is narrower\n    // with lower light intensity\n    // and with lighter/brighter surface colors\n    directional \x3d mix((1.0 - u_lightintensity), max((1.0 - colorvalue + u_lightintensity), 1.0), directional);\n\n    // Add gradient along z axis of side surfaces\n    if (normal.y !\x3d 0.0) {\n        directional *\x3d clamp((t + base) * pow(height / 150.0, 0.5), mix(0.7, 0.98, 1.0 - u_lightintensity), 1.0);\n    }\n\n    // Assign final color based on surface + ambient light color, diffuse light directional, and light color\n    // with lower bounds adjusted to hue of light\n    // so that shading is tinted with the complementary (opposite) color to the light color\n    v_color.r +\x3d clamp(color.r * directional * u_lightcolor.r, mix(0.0, 0.3, 1.0 - u_lightcolor.r), 1.0);\n    v_color.g +\x3d clamp(color.g * directional * u_lightcolor.g, mix(0.0, 0.3, 1.0 - u_lightcolor.g), 1.0);\n    v_color.b +\x3d clamp(color.b * directional * u_lightcolor.b, mix(0.0, 0.3, 1.0 - u_lightcolor.b), 1.0);\n}\n"},
fillExtrusionPattern:{fragmentSource:"uniform vec2 u_pattern_tl_a;\nuniform vec2 u_pattern_br_a;\nuniform vec2 u_pattern_tl_b;\nuniform vec2 u_pattern_br_b;\nuniform vec2 u_texsize;\nuniform float u_mix;\n\nuniform sampler2D u_image;\n\nvarying vec2 v_pos_a;\nvarying vec2 v_pos_b;\nvarying vec4 v_lighting;\n\n#pragma mapbox: define lowp float base\n#pragma mapbox: define lowp float height\n\nvoid main() {\n    #pragma mapbox: initialize lowp float base\n    #pragma mapbox: initialize lowp float height\n\n    vec2 imagecoord \x3d mod(v_pos_a, 1.0);\n    vec2 pos \x3d mix(u_pattern_tl_a / u_texsize, u_pattern_br_a / u_texsize, imagecoord);\n    vec4 color1 \x3d texture2D(u_image, pos);\n\n    vec2 imagecoord_b \x3d mod(v_pos_b, 1.0);\n    vec2 pos2 \x3d mix(u_pattern_tl_b / u_texsize, u_pattern_br_b / u_texsize, imagecoord_b);\n    vec4 color2 \x3d texture2D(u_image, pos2);\n\n    vec4 mixedColor \x3d mix(color1, color2, u_mix);\n\n    gl_FragColor \x3d mixedColor * v_lighting;\n\n#ifdef OVERDRAW_INSPECTOR\n    gl_FragColor \x3d vec4(1.0);\n#endif\n}\n",
vertexSource:"uniform mat4 u_matrix;\nuniform vec2 u_pattern_size_a;\nuniform vec2 u_pattern_size_b;\nuniform vec2 u_pixel_coord_upper;\nuniform vec2 u_pixel_coord_lower;\nuniform float u_scale_a;\nuniform float u_scale_b;\nuniform float u_tile_units_to_pixels;\nuniform float u_height_factor;\n\nuniform vec3 u_lightcolor;\nuniform lowp vec3 u_lightpos;\nuniform lowp float u_lightintensity;\n\nattribute vec2 a_pos;\nattribute vec4 a_normal_ed;\n\nvarying vec2 v_pos_a;\nvarying vec2 v_pos_b;\nvarying vec4 v_lighting;\nvarying float v_directional;\n\n#pragma mapbox: define lowp float base\n#pragma mapbox: define lowp float height\n\nvoid main() {\n    #pragma mapbox: initialize lowp float base\n    #pragma mapbox: initialize lowp float height\n\n    vec3 normal \x3d a_normal_ed.xyz;\n    float edgedistance \x3d a_normal_ed.w;\n\n    base \x3d max(0.0, base);\n    height \x3d max(0.0, height);\n\n    float t \x3d mod(normal.x, 2.0);\n    float z \x3d t \x3e 0.0 ? height : base;\n\n    gl_Position \x3d u_matrix * vec4(a_pos, z, 1);\n\n    vec2 pos \x3d normal.x \x3d\x3d 1.0 \x26\x26 normal.y \x3d\x3d 0.0 \x26\x26 normal.z \x3d\x3d 16384.0\n        ? a_pos // extrusion top\n        : vec2(edgedistance, z * u_height_factor); // extrusion side\n\n    v_pos_a \x3d get_pattern_pos(u_pixel_coord_upper, u_pixel_coord_lower, u_scale_a * u_pattern_size_a, u_tile_units_to_pixels, pos);\n    v_pos_b \x3d get_pattern_pos(u_pixel_coord_upper, u_pixel_coord_lower, u_scale_b * u_pattern_size_b, u_tile_units_to_pixels, pos);\n\n    v_lighting \x3d vec4(0.0, 0.0, 0.0, 1.0);\n    float directional \x3d clamp(dot(normal / 16383.0, u_lightpos), 0.0, 1.0);\n    directional \x3d mix((1.0 - u_lightintensity), max((0.5 + u_lightintensity), 1.0), directional);\n\n    if (normal.y !\x3d 0.0) {\n        directional *\x3d clamp((t + base) * pow(height / 150.0, 0.5), mix(0.7, 0.98, 1.0 - u_lightintensity), 1.0);\n    }\n\n    v_lighting.rgb +\x3d clamp(directional * u_lightcolor, mix(vec3(0.0), vec3(0.3), 1.0 - u_lightcolor), vec3(1.0));\n}\n"},
extrusionTexture:{fragmentSource:"uniform sampler2D u_image;\nuniform float u_opacity;\nvarying vec2 v_pos;\n\nvoid main() {\n    gl_FragColor \x3d texture2D(u_image, v_pos) * u_opacity;\n\n#ifdef OVERDRAW_INSPECTOR\n    gl_FragColor \x3d vec4(0.0);\n#endif\n}\n",vertexSource:"uniform mat4 u_matrix;\nuniform vec2 u_world;\nattribute vec2 a_pos;\nvarying vec2 v_pos;\n\nvoid main() {\n    gl_Position \x3d u_matrix * vec4(a_pos * u_world, 0, 1);\n\n    v_pos.x \x3d a_pos.x;\n    v_pos.y \x3d 1.0 - a_pos.y;\n}\n"},
hillshadePrepare:{fragmentSource:"#ifdef GL_ES\nprecision highp float;\n#endif\n\nuniform sampler2D u_image;\nvarying vec2 v_pos;\nuniform vec2 u_dimension;\nuniform float u_zoom;\nuniform float u_maxzoom;\n\nfloat getElevation(vec2 coord, float bias) {\n    // Convert encoded elevation value to meters\n    vec4 data \x3d texture2D(u_image, coord) * 255.0;\n    return (data.r + data.g * 256.0 + data.b * 256.0 * 256.0) / 4.0;\n}\n\nvoid main() {\n    vec2 epsilon \x3d 1.0 / u_dimension;\n\n    // queried pixels:\n    // +-----------+\n    // |   |   |   |\n    // | a | b | c |\n    // |   |   |   |\n    // +-----------+\n    // |   |   |   |\n    // | d | e | f |\n    // |   |   |   |\n    // +-----------+\n    // |   |   |   |\n    // | g | h | i |\n    // |   |   |   |\n    // +-----------+\n\n    float a \x3d getElevation(v_pos + vec2(-epsilon.x, -epsilon.y), 0.0);\n    float b \x3d getElevation(v_pos + vec2(0, -epsilon.y), 0.0);\n    float c \x3d getElevation(v_pos + vec2(epsilon.x, -epsilon.y), 0.0);\n    float d \x3d getElevation(v_pos + vec2(-epsilon.x, 0), 0.0);\n    float e \x3d getElevation(v_pos, 0.0);\n    float f \x3d getElevation(v_pos + vec2(epsilon.x, 0), 0.0);\n    float g \x3d getElevation(v_pos + vec2(-epsilon.x, epsilon.y), 0.0);\n    float h \x3d getElevation(v_pos + vec2(0, epsilon.y), 0.0);\n    float i \x3d getElevation(v_pos + vec2(epsilon.x, epsilon.y), 0.0);\n\n    // here we divide the x and y slopes by 8 * pixel size\n    // where pixel size (aka meters/pixel) is:\n    // circumference of the world / (pixels per tile * number of tiles)\n    // which is equivalent to: 8 * 40075016.6855785 / (512 * pow(2, u_zoom))\n    // which can be reduced to: pow(2, 19.25619978527 - u_zoom)\n    // we want to vertically exaggerate the hillshading though, because otherwise\n    // it is barely noticeable at low zooms. to do this, we multiply this by some\n    // scale factor pow(2, (u_zoom - u_maxzoom) * a) where a is an arbitrary value\n    // Here we use a\x3d0.3 which works out to the expression below. see \n    // nickidlugash's awesome breakdown for more info\n    // https://github.com/mapbox/mapbox-gl-js/pull/5286#discussion_r148419556\n    float exaggeration \x3d u_zoom \x3c 2.0 ? 0.4 : u_zoom \x3c 4.5 ? 0.35 : 0.3;\n\n    vec2 deriv \x3d vec2(\n        (c + f + f + i) - (a + d + d + g),\n        (g + h + h + i) - (a + b + b + c)\n    ) /  pow(2.0, (u_zoom - u_maxzoom) * exaggeration + 19.2562 - u_zoom);\n\n    gl_FragColor \x3d clamp(vec4(\n        deriv.x / 2.0 + 0.5,\n        deriv.y / 2.0 + 0.5,\n        1.0,\n        1.0), 0.0, 1.0);\n\n#ifdef OVERDRAW_INSPECTOR\n    gl_FragColor \x3d vec4(1.0);\n#endif\n}\n",
vertexSource:"uniform mat4 u_matrix;\n\nattribute vec2 a_pos;\nattribute vec2 a_texture_pos;\n\nvarying vec2 v_pos;\n\nvoid main() {\n    gl_Position \x3d u_matrix * vec4(a_pos, 0, 1);\n    v_pos \x3d (a_texture_pos / 8192.0) / 2.0 + 0.25;\n}\n"},hillshade:{fragmentSource:"uniform sampler2D u_image;\nvarying vec2 v_pos;\n\nuniform vec2 u_latrange;\nuniform vec2 u_light;\nuniform vec4 u_shadow;\nuniform vec4 u_highlight;\nuniform vec4 u_accent;\n\n#define PI 3.141592653589793\n\nvoid main() {\n    vec4 pixel \x3d texture2D(u_image, v_pos);\n\n    vec2 deriv \x3d ((pixel.rg * 2.0) - 1.0);\n\n    // We divide the slope by a scale factor based on the cosin of the pixel's approximate latitude\n    // to account for mercator projection distortion. see #4807 for details\n    float scaleFactor \x3d cos(radians((u_latrange[0] - u_latrange[1]) * (1.0 - v_pos.y) + u_latrange[1]));\n    // We also multiply the slope by an arbitrary z-factor of 1.25\n    float slope \x3d atan(1.25 * length(deriv) / scaleFactor);\n    float aspect \x3d deriv.x !\x3d 0.0 ? atan(deriv.y, -deriv.x) : PI / 2.0 * (deriv.y \x3e 0.0 ? 1.0 : -1.0);\n\n    float intensity \x3d u_light.x;\n    // We add PI to make this property match the global light object, which adds PI/2 to the light's azimuthal\n    // position property to account for 0deg corresponding to north/the top of the viewport in the style spec\n    // and the original shader was written to accept (-illuminationDirection - 90) as the azimuthal.\n    float azimuth \x3d u_light.y + PI;\n\n    // We scale the slope exponentially based on intensity, using a calculation similar to\n    // the exponential interpolation function in the style spec:\n    // https://github.com/mapbox/mapbox-gl-js/blob/master/src/style-spec/expression/definitions/interpolate.js#L217-L228\n    // so that higher intensity values create more opaque hillshading.\n    float base \x3d 1.875 - intensity * 1.75;\n    float maxValue \x3d 0.5 * PI;\n    float scaledSlope \x3d intensity !\x3d 0.5 ? ((pow(base, slope) - 1.0) / (pow(base, maxValue) - 1.0)) * maxValue : slope;\n\n    // The accent color is calculated with the cosine of the slope while the shade color is calculated with the sine\n    // so that the accent color's rate of change eases in while the shade color's eases out.\n    float accent \x3d cos(scaledSlope);\n    // We multiply both the accent and shade color by a clamped intensity value\n    // so that intensities \x3e\x3d 0.5 do not additionally affect the color values\n    // while intensity values \x3c 0.5 make the overall color more transparent.\n    vec4 accent_color \x3d (1.0 - accent) * u_accent * clamp(intensity * 2.0, 0.0, 1.0);\n    float shade \x3d abs(mod((aspect + azimuth) / PI + 0.5, 2.0) - 1.0);\n    vec4 shade_color \x3d mix(u_shadow, u_highlight, shade) * sin(scaledSlope) * clamp(intensity * 2.0, 0.0, 1.0);\n    gl_FragColor \x3d accent_color * (1.0 - shade_color.a) + shade_color;\n\n#ifdef OVERDRAW_INSPECTOR\n    gl_FragColor \x3d vec4(1.0);\n#endif\n}\n",
vertexSource:"uniform mat4 u_matrix;\n\nattribute vec2 a_pos;\nattribute vec2 a_texture_pos;\n\nvarying vec2 v_pos;\n\nvoid main() {\n    gl_Position \x3d u_matrix * vec4(a_pos, 0, 1);\n    v_pos \x3d a_texture_pos / 8192.0;\n}\n"},line:{fragmentSource:"#pragma mapbox: define highp vec4 color\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\n\nvarying vec2 v_width2;\nvarying vec2 v_normal;\nvarying float v_gamma_scale;\n\nvoid main() {\n    #pragma mapbox: initialize highp vec4 color\n    #pragma mapbox: initialize lowp float blur\n    #pragma mapbox: initialize lowp float opacity\n\n    // Calculate the distance of the pixel from the line in pixels.\n    float dist \x3d length(v_normal) * v_width2.s;\n\n    // Calculate the antialiasing fade factor. This is either when fading in\n    // the line in case of an offset line (v_width2.t) or when fading out\n    // (v_width2.s)\n    float blur2 \x3d (blur + 1.0 / DEVICE_PIXEL_RATIO) * v_gamma_scale;\n    float alpha \x3d clamp(min(dist - (v_width2.t - blur2), v_width2.s - dist) / blur2, 0.0, 1.0);\n\n    gl_FragColor \x3d color * (alpha * opacity);\n\n#ifdef OVERDRAW_INSPECTOR\n    gl_FragColor \x3d vec4(1.0);\n#endif\n}\n",
vertexSource:"\n\n// the distance over which the line edge fades out.\n// Retina devices need a smaller distance to avoid aliasing.\n#define ANTIALIASING 1.0 / DEVICE_PIXEL_RATIO / 2.0\n\n// floor(127 / 2) \x3d\x3d 63.0\n// the maximum allowed miter limit is 2.0 at the moment. the extrude normal is\n// stored in a byte (-128..127). we scale regular normals up to length 63, but\n// there are also \"special\" normals that have a bigger length (of up to 126 in\n// this case).\n// #define scale 63.0\n#define scale 0.015873016\n\nattribute vec4 a_pos_normal;\nattribute vec4 a_data;\n\nuniform mat4 u_matrix;\nuniform mediump float u_ratio;\nuniform vec2 u_gl_units_to_pixels;\n\nvarying vec2 v_normal;\nvarying vec2 v_width2;\nvarying float v_gamma_scale;\nvarying highp float v_linesofar;\n\n#pragma mapbox: define highp vec4 color\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define mediump float gapwidth\n#pragma mapbox: define lowp float offset\n#pragma mapbox: define mediump float width\n\nvoid main() {\n    #pragma mapbox: initialize highp vec4 color\n    #pragma mapbox: initialize lowp float blur\n    #pragma mapbox: initialize lowp float opacity\n    #pragma mapbox: initialize mediump float gapwidth\n    #pragma mapbox: initialize lowp float offset\n    #pragma mapbox: initialize mediump float width\n\n    vec2 a_extrude \x3d a_data.xy - 128.0;\n    float a_direction \x3d mod(a_data.z, 4.0) - 1.0;\n\n    v_linesofar \x3d (floor(a_data.z / 4.0) + a_data.w * 64.0) * 2.0;\n\n    vec2 pos \x3d a_pos_normal.xy;\n\n    // x is 1 if it's a round cap, 0 otherwise\n    // y is 1 if the normal points up, and -1 if it points down\n    mediump vec2 normal \x3d a_pos_normal.zw;\n    v_normal \x3d normal;\n\n    // these transformations used to be applied in the JS and native code bases.\n    // moved them into the shader for clarity and simplicity.\n    gapwidth \x3d gapwidth / 2.0;\n    float halfwidth \x3d width / 2.0;\n    offset \x3d -1.0 * offset;\n\n    float inset \x3d gapwidth + (gapwidth \x3e 0.0 ? ANTIALIASING : 0.0);\n    float outset \x3d gapwidth + halfwidth * (gapwidth \x3e 0.0 ? 2.0 : 1.0) + ANTIALIASING;\n\n    // Scale the extrusion vector down to a normal and then up by the line width\n    // of this vertex.\n    mediump vec2 dist \x3d outset * a_extrude * scale;\n\n    // Calculate the offset when drawing a line that is to the side of the actual line.\n    // We do this by creating a vector that points towards the extrude, but rotate\n    // it when we're drawing round end points (a_direction \x3d -1 or 1) since their\n    // extrude vector points in another direction.\n    mediump float u \x3d 0.5 * a_direction;\n    mediump float t \x3d 1.0 - abs(u);\n    mediump vec2 offset2 \x3d offset * a_extrude * scale * normal.y * mat2(t, -u, u, t);\n\n    vec4 projected_extrude \x3d u_matrix * vec4(dist / u_ratio, 0.0, 0.0);\n    gl_Position \x3d u_matrix * vec4(pos + offset2 / u_ratio, 0.0, 1.0) + projected_extrude;\n\n    // calculate how much the perspective view squishes or stretches the extrude\n    float extrude_length_without_perspective \x3d length(dist);\n    float extrude_length_with_perspective \x3d length(projected_extrude.xy / gl_Position.w * u_gl_units_to_pixels);\n    v_gamma_scale \x3d extrude_length_without_perspective / extrude_length_with_perspective;\n\n    v_width2 \x3d vec2(outset, inset);\n}\n"},
lineGradient:{fragmentSource:"\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\n\nuniform sampler2D u_image;\n\nvarying vec2 v_width2;\nvarying vec2 v_normal;\nvarying float v_gamma_scale;\nvarying highp float v_lineprogress;\n\nvoid main() {\n    #pragma mapbox: initialize lowp float blur\n    #pragma mapbox: initialize lowp float opacity\n\n    // Calculate the distance of the pixel from the line in pixels.\n    float dist \x3d length(v_normal) * v_width2.s;\n\n    // Calculate the antialiasing fade factor. This is either when fading in\n    // the line in case of an offset line (v_width2.t) or when fading out\n    // (v_width2.s)\n    float blur2 \x3d (blur + 1.0 / DEVICE_PIXEL_RATIO) * v_gamma_scale;\n    float alpha \x3d clamp(min(dist - (v_width2.t - blur2), v_width2.s - dist) / blur2, 0.0, 1.0);\n\n    // For gradient lines, v_lineprogress is the ratio along the entire line,\n    // scaled to [0, 2^15), and the gradient ramp is stored in a texture.\n    vec4 color \x3d texture2D(u_image, vec2(v_lineprogress, 0.5));\n\n    gl_FragColor \x3d color * (alpha * opacity);\n\n#ifdef OVERDRAW_INSPECTOR\n    gl_FragColor \x3d vec4(1.0);\n#endif\n}\n",
vertexSource:"\n// the attribute conveying progress along a line is scaled to [0, 2^15)\n#define MAX_LINE_DISTANCE 32767.0\n\n// the distance over which the line edge fades out.\n// Retina devices need a smaller distance to avoid aliasing.\n#define ANTIALIASING 1.0 / DEVICE_PIXEL_RATIO / 2.0\n\n// floor(127 / 2) \x3d\x3d 63.0\n// the maximum allowed miter limit is 2.0 at the moment. the extrude normal is\n// stored in a byte (-128..127). we scale regular normals up to length 63, but\n// there are also \"special\" normals that have a bigger length (of up to 126 in\n// this case).\n// #define scale 63.0\n#define scale 0.015873016\n\nattribute vec4 a_pos_normal;\nattribute vec4 a_data;\n\nuniform mat4 u_matrix;\nuniform mediump float u_ratio;\nuniform vec2 u_gl_units_to_pixels;\n\nvarying vec2 v_normal;\nvarying vec2 v_width2;\nvarying float v_gamma_scale;\nvarying highp float v_lineprogress;\n\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define mediump float gapwidth\n#pragma mapbox: define lowp float offset\n#pragma mapbox: define mediump float width\n\nvoid main() {\n    #pragma mapbox: initialize lowp float blur\n    #pragma mapbox: initialize lowp float opacity\n    #pragma mapbox: initialize mediump float gapwidth\n    #pragma mapbox: initialize lowp float offset\n    #pragma mapbox: initialize mediump float width\n\n    vec2 a_extrude \x3d a_data.xy - 128.0;\n    float a_direction \x3d mod(a_data.z, 4.0) - 1.0;\n\n    v_lineprogress \x3d (floor(a_data.z / 4.0) + a_data.w * 64.0) * 2.0 / MAX_LINE_DISTANCE;\n\n    vec2 pos \x3d a_pos_normal.xy;\n\n    // x is 1 if it's a round cap, 0 otherwise\n    // y is 1 if the normal points up, and -1 if it points down\n    mediump vec2 normal \x3d a_pos_normal.zw;\n    v_normal \x3d normal;\n\n    // these transformations used to be applied in the JS and native code bases.\n    // moved them into the shader for clarity and simplicity.\n    gapwidth \x3d gapwidth / 2.0;\n    float halfwidth \x3d width / 2.0;\n    offset \x3d -1.0 * offset;\n\n    float inset \x3d gapwidth + (gapwidth \x3e 0.0 ? ANTIALIASING : 0.0);\n    float outset \x3d gapwidth + halfwidth * (gapwidth \x3e 0.0 ? 2.0 : 1.0) + ANTIALIASING;\n\n    // Scale the extrusion vector down to a normal and then up by the line width\n    // of this vertex.\n    mediump vec2 dist \x3d outset * a_extrude * scale;\n\n    // Calculate the offset when drawing a line that is to the side of the actual line.\n    // We do this by creating a vector that points towards the extrude, but rotate\n    // it when we're drawing round end points (a_direction \x3d -1 or 1) since their\n    // extrude vector points in another direction.\n    mediump float u \x3d 0.5 * a_direction;\n    mediump float t \x3d 1.0 - abs(u);\n    mediump vec2 offset2 \x3d offset * a_extrude * scale * normal.y * mat2(t, -u, u, t);\n\n    vec4 projected_extrude \x3d u_matrix * vec4(dist / u_ratio, 0.0, 0.0);\n    gl_Position \x3d u_matrix * vec4(pos + offset2 / u_ratio, 0.0, 1.0) + projected_extrude;\n\n    // calculate how much the perspective view squishes or stretches the extrude\n    float extrude_length_without_perspective \x3d length(dist);\n    float extrude_length_with_perspective \x3d length(projected_extrude.xy / gl_Position.w * u_gl_units_to_pixels);\n    v_gamma_scale \x3d extrude_length_without_perspective / extrude_length_with_perspective;\n\n    v_width2 \x3d vec2(outset, inset);\n}\n"},
linePattern:{fragmentSource:"uniform vec2 u_pattern_size_a;\nuniform vec2 u_pattern_size_b;\nuniform vec2 u_pattern_tl_a;\nuniform vec2 u_pattern_br_a;\nuniform vec2 u_pattern_tl_b;\nuniform vec2 u_pattern_br_b;\nuniform vec2 u_texsize;\nuniform float u_fade;\n\nuniform sampler2D u_image;\n\nvarying vec2 v_normal;\nvarying vec2 v_width2;\nvarying float v_linesofar;\nvarying float v_gamma_scale;\n\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\n\nvoid main() {\n    #pragma mapbox: initialize lowp float blur\n    #pragma mapbox: initialize lowp float opacity\n\n    // Calculate the distance of the pixel from the line in pixels.\n    float dist \x3d length(v_normal) * v_width2.s;\n\n    // Calculate the antialiasing fade factor. This is either when fading in\n    // the line in case of an offset line (v_width2.t) or when fading out\n    // (v_width2.s)\n    float blur2 \x3d (blur + 1.0 / DEVICE_PIXEL_RATIO) * v_gamma_scale;\n    float alpha \x3d clamp(min(dist - (v_width2.t - blur2), v_width2.s - dist) / blur2, 0.0, 1.0);\n\n    float x_a \x3d mod(v_linesofar / u_pattern_size_a.x, 1.0);\n    float x_b \x3d mod(v_linesofar / u_pattern_size_b.x, 1.0);\n\n    // v_normal.y is 0 at the midpoint of the line, -1 at the lower edge, 1 at the upper edge\n    // we clamp the line width outset to be between 0 and half the pattern height plus padding (2.0)\n    // to ensure we don't sample outside the designated symbol on the sprite sheet.\n    // 0.5 is added to shift the component to be bounded between 0 and 1 for interpolation of\n    // the texture coordinate\n    float y_a \x3d 0.5 + (v_normal.y * clamp(v_width2.s, 0.0, (u_pattern_size_a.y + 2.0) / 2.0) / u_pattern_size_a.y);\n    float y_b \x3d 0.5 + (v_normal.y * clamp(v_width2.s, 0.0, (u_pattern_size_b.y + 2.0) / 2.0) / u_pattern_size_b.y);\n    vec2 pos_a \x3d mix(u_pattern_tl_a / u_texsize, u_pattern_br_a / u_texsize, vec2(x_a, y_a));\n    vec2 pos_b \x3d mix(u_pattern_tl_b / u_texsize, u_pattern_br_b / u_texsize, vec2(x_b, y_b));\n\n    vec4 color \x3d mix(texture2D(u_image, pos_a), texture2D(u_image, pos_b), u_fade);\n\n    gl_FragColor \x3d color * alpha * opacity;\n\n#ifdef OVERDRAW_INSPECTOR\n    gl_FragColor \x3d vec4(1.0);\n#endif\n}\n",
vertexSource:"// floor(127 / 2) \x3d\x3d 63.0\n// the maximum allowed miter limit is 2.0 at the moment. the extrude normal is\n// stored in a byte (-128..127). we scale regular normals up to length 63, but\n// there are also \"special\" normals that have a bigger length (of up to 126 in\n// this case).\n// #define scale 63.0\n#define scale 0.015873016\n\n// We scale the distance before adding it to the buffers so that we can store\n// long distances for long segments. Use this value to unscale the distance.\n#define LINE_DISTANCE_SCALE 2.0\n\n// the distance over which the line edge fades out.\n// Retina devices need a smaller distance to avoid aliasing.\n#define ANTIALIASING 1.0 / DEVICE_PIXEL_RATIO / 2.0\n\nattribute vec4 a_pos_normal;\nattribute vec4 a_data;\n\nuniform mat4 u_matrix;\nuniform mediump float u_ratio;\nuniform vec2 u_gl_units_to_pixels;\n\nvarying vec2 v_normal;\nvarying vec2 v_width2;\nvarying float v_linesofar;\nvarying float v_gamma_scale;\n\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp float offset\n#pragma mapbox: define mediump float gapwidth\n#pragma mapbox: define mediump float width\n\nvoid main() {\n    #pragma mapbox: initialize lowp float blur\n    #pragma mapbox: initialize lowp float opacity\n    #pragma mapbox: initialize lowp float offset\n    #pragma mapbox: initialize mediump float gapwidth\n    #pragma mapbox: initialize mediump float width\n\n    vec2 a_extrude \x3d a_data.xy - 128.0;\n    float a_direction \x3d mod(a_data.z, 4.0) - 1.0;\n    float a_linesofar \x3d (floor(a_data.z / 4.0) + a_data.w * 64.0) * LINE_DISTANCE_SCALE;\n\n    vec2 pos \x3d a_pos_normal.xy;\n\n    // x is 1 if it's a round cap, 0 otherwise\n    // y is 1 if the normal points up, and -1 if it points down\n    mediump vec2 normal \x3d a_pos_normal.zw;\n    v_normal \x3d normal;\n\n    // these transformations used to be applied in the JS and native code bases.\n    // moved them into the shader for clarity and simplicity.\n    gapwidth \x3d gapwidth / 2.0;\n    float halfwidth \x3d width / 2.0;\n    offset \x3d -1.0 * offset;\n\n    float inset \x3d gapwidth + (gapwidth \x3e 0.0 ? ANTIALIASING : 0.0);\n    float outset \x3d gapwidth + halfwidth * (gapwidth \x3e 0.0 ? 2.0 : 1.0) + ANTIALIASING;\n\n    // Scale the extrusion vector down to a normal and then up by the line width\n    // of this vertex.\n    mediump vec2 dist \x3d outset * a_extrude * scale;\n\n    // Calculate the offset when drawing a line that is to the side of the actual line.\n    // We do this by creating a vector that points towards the extrude, but rotate\n    // it when we're drawing round end points (a_direction \x3d -1 or 1) since their\n    // extrude vector points in another direction.\n    mediump float u \x3d 0.5 * a_direction;\n    mediump float t \x3d 1.0 - abs(u);\n    mediump vec2 offset2 \x3d offset * a_extrude * scale * normal.y * mat2(t, -u, u, t);\n\n    vec4 projected_extrude \x3d u_matrix * vec4(dist / u_ratio, 0.0, 0.0);\n    gl_Position \x3d u_matrix * vec4(pos + offset2 / u_ratio, 0.0, 1.0) + projected_extrude;\n\n    // calculate how much the perspective view squishes or stretches the extrude\n    float extrude_length_without_perspective \x3d length(dist);\n    float extrude_length_with_perspective \x3d length(projected_extrude.xy / gl_Position.w * u_gl_units_to_pixels);\n    v_gamma_scale \x3d extrude_length_without_perspective / extrude_length_with_perspective;\n\n    v_linesofar \x3d a_linesofar;\n    v_width2 \x3d vec2(outset, inset);\n}\n"},
lineSDF:{fragmentSource:"\nuniform sampler2D u_image;\nuniform float u_sdfgamma;\nuniform float u_mix;\n\nvarying vec2 v_normal;\nvarying vec2 v_width2;\nvarying vec2 v_tex_a;\nvarying vec2 v_tex_b;\nvarying float v_gamma_scale;\n\n#pragma mapbox: define highp vec4 color\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define mediump float width\n#pragma mapbox: define lowp float floorwidth\n\nvoid main() {\n    #pragma mapbox: initialize highp vec4 color\n    #pragma mapbox: initialize lowp float blur\n    #pragma mapbox: initialize lowp float opacity\n    #pragma mapbox: initialize mediump float width\n    #pragma mapbox: initialize lowp float floorwidth\n\n    // Calculate the distance of the pixel from the line in pixels.\n    float dist \x3d length(v_normal) * v_width2.s;\n\n    // Calculate the antialiasing fade factor. This is either when fading in\n    // the line in case of an offset line (v_width2.t) or when fading out\n    // (v_width2.s)\n    float blur2 \x3d (blur + 1.0 / DEVICE_PIXEL_RATIO) * v_gamma_scale;\n    float alpha \x3d clamp(min(dist - (v_width2.t - blur2), v_width2.s - dist) / blur2, 0.0, 1.0);\n\n    float sdfdist_a \x3d texture2D(u_image, v_tex_a).a;\n    float sdfdist_b \x3d texture2D(u_image, v_tex_b).a;\n    float sdfdist \x3d mix(sdfdist_a, sdfdist_b, u_mix);\n    alpha *\x3d smoothstep(0.5 - u_sdfgamma / floorwidth, 0.5 + u_sdfgamma / floorwidth, sdfdist);\n\n    gl_FragColor \x3d color * (alpha * opacity);\n\n#ifdef OVERDRAW_INSPECTOR\n    gl_FragColor \x3d vec4(1.0);\n#endif\n}\n",
vertexSource:"// floor(127 / 2) \x3d\x3d 63.0\n// the maximum allowed miter limit is 2.0 at the moment. the extrude normal is\n// stored in a byte (-128..127). we scale regular normals up to length 63, but\n// there are also \"special\" normals that have a bigger length (of up to 126 in\n// this case).\n// #define scale 63.0\n#define scale 0.015873016\n\n// We scale the distance before adding it to the buffers so that we can store\n// long distances for long segments. Use this value to unscale the distance.\n#define LINE_DISTANCE_SCALE 2.0\n\n// the distance over which the line edge fades out.\n// Retina devices need a smaller distance to avoid aliasing.\n#define ANTIALIASING 1.0 / DEVICE_PIXEL_RATIO / 2.0\n\nattribute vec4 a_pos_normal;\nattribute vec4 a_data;\n\nuniform mat4 u_matrix;\nuniform mediump float u_ratio;\nuniform vec2 u_patternscale_a;\nuniform float u_tex_y_a;\nuniform vec2 u_patternscale_b;\nuniform float u_tex_y_b;\nuniform vec2 u_gl_units_to_pixels;\n\nvarying vec2 v_normal;\nvarying vec2 v_width2;\nvarying vec2 v_tex_a;\nvarying vec2 v_tex_b;\nvarying float v_gamma_scale;\n\n#pragma mapbox: define highp vec4 color\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define mediump float gapwidth\n#pragma mapbox: define lowp float offset\n#pragma mapbox: define mediump float width\n#pragma mapbox: define lowp float floorwidth\n\nvoid main() {\n    #pragma mapbox: initialize highp vec4 color\n    #pragma mapbox: initialize lowp float blur\n    #pragma mapbox: initialize lowp float opacity\n    #pragma mapbox: initialize mediump float gapwidth\n    #pragma mapbox: initialize lowp float offset\n    #pragma mapbox: initialize mediump float width\n    #pragma mapbox: initialize lowp float floorwidth\n\n    vec2 a_extrude \x3d a_data.xy - 128.0;\n    float a_direction \x3d mod(a_data.z, 4.0) - 1.0;\n    float a_linesofar \x3d (floor(a_data.z / 4.0) + a_data.w * 64.0) * LINE_DISTANCE_SCALE;\n\n    vec2 pos \x3d a_pos_normal.xy;\n\n    // x is 1 if it's a round cap, 0 otherwise\n    // y is 1 if the normal points up, and -1 if it points down\n    mediump vec2 normal \x3d a_pos_normal.zw;\n    v_normal \x3d normal;\n\n    // these transformations used to be applied in the JS and native code bases.\n    // moved them into the shader for clarity and simplicity.\n    gapwidth \x3d gapwidth / 2.0;\n    float halfwidth \x3d width / 2.0;\n    offset \x3d -1.0 * offset;\n\n    float inset \x3d gapwidth + (gapwidth \x3e 0.0 ? ANTIALIASING : 0.0);\n    float outset \x3d gapwidth + halfwidth * (gapwidth \x3e 0.0 ? 2.0 : 1.0) + ANTIALIASING;\n\n    // Scale the extrusion vector down to a normal and then up by the line width\n    // of this vertex.\n    mediump vec2 dist \x3doutset * a_extrude * scale;\n\n    // Calculate the offset when drawing a line that is to the side of the actual line.\n    // We do this by creating a vector that points towards the extrude, but rotate\n    // it when we're drawing round end points (a_direction \x3d -1 or 1) since their\n    // extrude vector points in another direction.\n    mediump float u \x3d 0.5 * a_direction;\n    mediump float t \x3d 1.0 - abs(u);\n    mediump vec2 offset2 \x3d offset * a_extrude * scale * normal.y * mat2(t, -u, u, t);\n\n    vec4 projected_extrude \x3d u_matrix * vec4(dist / u_ratio, 0.0, 0.0);\n    gl_Position \x3d u_matrix * vec4(pos + offset2 / u_ratio, 0.0, 1.0) + projected_extrude;\n\n    // calculate how much the perspective view squishes or stretches the extrude\n    float extrude_length_without_perspective \x3d length(dist);\n    float extrude_length_with_perspective \x3d length(projected_extrude.xy / gl_Position.w * u_gl_units_to_pixels);\n    v_gamma_scale \x3d extrude_length_without_perspective / extrude_length_with_perspective;\n\n    v_tex_a \x3d vec2(a_linesofar * u_patternscale_a.x / floorwidth, normal.y * u_patternscale_a.y + u_tex_y_a);\n    v_tex_b \x3d vec2(a_linesofar * u_patternscale_b.x / floorwidth, normal.y * u_patternscale_b.y + u_tex_y_b);\n\n    v_width2 \x3d vec2(outset, inset);\n}\n"},
raster:{fragmentSource:"uniform float u_fade_t;\nuniform float u_opacity;\nuniform sampler2D u_image0;\nuniform sampler2D u_image1;\nvarying vec2 v_pos0;\nvarying vec2 v_pos1;\n\nuniform float u_brightness_low;\nuniform float u_brightness_high;\n\nuniform float u_saturation_factor;\nuniform float u_contrast_factor;\nuniform vec3 u_spin_weights;\n\nvoid main() {\n\n    // read and cross-fade colors from the main and parent tiles\n    vec4 color0 \x3d texture2D(u_image0, v_pos0);\n    vec4 color1 \x3d texture2D(u_image1, v_pos1);\n    if (color0.a \x3e 0.0) {\n        color0.rgb \x3d color0.rgb / color0.a;\n    }\n    if (color1.a \x3e 0.0) {\n        color1.rgb \x3d color1.rgb / color1.a;\n    }\n    vec4 color \x3d mix(color0, color1, u_fade_t);\n    color.a *\x3d u_opacity;\n    vec3 rgb \x3d color.rgb;\n\n    // spin\n    rgb \x3d vec3(\n        dot(rgb, u_spin_weights.xyz),\n        dot(rgb, u_spin_weights.zxy),\n        dot(rgb, u_spin_weights.yzx));\n\n    // saturation\n    float average \x3d (color.r + color.g + color.b) / 3.0;\n    rgb +\x3d (average - rgb) * u_saturation_factor;\n\n    // contrast\n    rgb \x3d (rgb - 0.5) * u_contrast_factor + 0.5;\n\n    // brightness\n    vec3 u_high_vec \x3d vec3(u_brightness_low, u_brightness_low, u_brightness_low);\n    vec3 u_low_vec \x3d vec3(u_brightness_high, u_brightness_high, u_brightness_high);\n\n    gl_FragColor \x3d vec4(mix(u_high_vec, u_low_vec, rgb) * color.a, color.a);\n\n#ifdef OVERDRAW_INSPECTOR\n    gl_FragColor \x3d vec4(1.0);\n#endif\n}\n",
vertexSource:"uniform mat4 u_matrix;\nuniform vec2 u_tl_parent;\nuniform float u_scale_parent;\nuniform float u_buffer_scale;\n\nattribute vec2 a_pos;\nattribute vec2 a_texture_pos;\n\nvarying vec2 v_pos0;\nvarying vec2 v_pos1;\n\nvoid main() {\n    gl_Position \x3d u_matrix * vec4(a_pos, 0, 1);\n    // We are using Int16 for texture position coordinates to give us enough precision for\n    // fractional coordinates. We use 8192 to scale the texture coordinates in the buffer\n    // as an arbitrarily high number to preserve adequate precision when rendering.\n    // This is also the same value as the EXTENT we are using for our tile buffer pos coordinates,\n    // so math for modifying either is consistent.\n    v_pos0 \x3d (((a_texture_pos / 8192.0) - 0.5) / u_buffer_scale ) + 0.5;\n    v_pos1 \x3d (v_pos0 * u_scale_parent) + u_tl_parent;\n}\n"},
symbolIcon:{fragmentSource:"uniform sampler2D u_texture;\n\n#pragma mapbox: define lowp float opacity\n\nvarying vec2 v_tex;\nvarying float v_fade_opacity;\n\nvoid main() {\n    #pragma mapbox: initialize lowp float opacity\n\n    lowp float alpha \x3d opacity * v_fade_opacity;\n    gl_FragColor \x3d texture2D(u_texture, v_tex) * alpha;\n\n#ifdef OVERDRAW_INSPECTOR\n    gl_FragColor \x3d vec4(1.0);\n#endif\n}\n",vertexSource:"const float PI \x3d 3.141592653589793;\n\nattribute vec4 a_pos_offset;\nattribute vec4 a_data;\nattribute vec3 a_projected_pos;\nattribute float a_fade_opacity;\n\nuniform bool u_is_size_zoom_constant;\nuniform bool u_is_size_feature_constant;\nuniform highp float u_size_t; // used to interpolate between zoom stops when size is a composite function\nuniform highp float u_size; // used when size is both zoom and feature constant\nuniform highp float u_camera_to_center_distance;\nuniform highp float u_pitch;\nuniform bool u_rotate_symbol;\nuniform highp float u_aspect_ratio;\nuniform float u_fade_change;\n\n#pragma mapbox: define lowp float opacity\n\nuniform mat4 u_matrix;\nuniform mat4 u_label_plane_matrix;\nuniform mat4 u_gl_coord_matrix;\n\nuniform bool u_is_text;\nuniform bool u_pitch_with_map;\n\nuniform vec2 u_texsize;\n\nvarying vec2 v_tex;\nvarying float v_fade_opacity;\n\nvoid main() {\n    #pragma mapbox: initialize lowp float opacity\n\n    vec2 a_pos \x3d a_pos_offset.xy;\n    vec2 a_offset \x3d a_pos_offset.zw;\n\n    vec2 a_tex \x3d a_data.xy;\n    vec2 a_size \x3d a_data.zw;\n\n    highp float segment_angle \x3d -a_projected_pos[2];\n\n    float size;\n    if (!u_is_size_zoom_constant \x26\x26 !u_is_size_feature_constant) {\n        size \x3d mix(a_size[0], a_size[1], u_size_t) / 10.0;\n    } else if (u_is_size_zoom_constant \x26\x26 !u_is_size_feature_constant) {\n        size \x3d a_size[0] / 10.0;\n    } else if (!u_is_size_zoom_constant \x26\x26 u_is_size_feature_constant) {\n        size \x3d u_size;\n    } else {\n        size \x3d u_size;\n    }\n\n    vec4 projectedPoint \x3d u_matrix * vec4(a_pos, 0, 1);\n    highp float camera_to_anchor_distance \x3d projectedPoint.w;\n    // See comments in symbol_sdf.vertex\n    highp float distance_ratio \x3d u_pitch_with_map ?\n        camera_to_anchor_distance / u_camera_to_center_distance :\n        u_camera_to_center_distance / camera_to_anchor_distance;\n    highp float perspective_ratio \x3d clamp(\n            0.5 + 0.5 * distance_ratio,\n            0.0, // Prevents oversized near-field symbols in pitched/overzoomed tiles\n            4.0);\n\n    size *\x3d perspective_ratio;\n\n    float fontScale \x3d u_is_text ? size / 24.0 : size;\n\n    highp float symbol_rotation \x3d 0.0;\n    if (u_rotate_symbol) {\n        // See comments in symbol_sdf.vertex\n        vec4 offsetProjectedPoint \x3d u_matrix * vec4(a_pos + vec2(1, 0), 0, 1);\n\n        vec2 a \x3d projectedPoint.xy / projectedPoint.w;\n        vec2 b \x3d offsetProjectedPoint.xy / offsetProjectedPoint.w;\n\n        symbol_rotation \x3d atan((b.y - a.y) / u_aspect_ratio, b.x - a.x);\n    }\n\n    highp float angle_sin \x3d sin(segment_angle + symbol_rotation);\n    highp float angle_cos \x3d cos(segment_angle + symbol_rotation);\n    mat2 rotation_matrix \x3d mat2(angle_cos, -1.0 * angle_sin, angle_sin, angle_cos);\n\n    vec4 projected_pos \x3d u_label_plane_matrix * vec4(a_projected_pos.xy, 0.0, 1.0);\n    gl_Position \x3d u_gl_coord_matrix * vec4(projected_pos.xy / projected_pos.w + rotation_matrix * (a_offset / 32.0 * fontScale), 0.0, 1.0);\n\n    v_tex \x3d a_tex / u_texsize;\n    vec2 fade_opacity \x3d unpack_opacity(a_fade_opacity);\n    float fade_change \x3d fade_opacity[1] \x3e 0.5 ? u_fade_change : -u_fade_change;\n    v_fade_opacity \x3d max(0.0, min(1.0, fade_opacity[0] + fade_change));\n}\n"},
symbolSDF:{fragmentSource:"#define SDF_PX 8.0\n#define EDGE_GAMMA 0.105/DEVICE_PIXEL_RATIO\n\nuniform bool u_is_halo;\n#pragma mapbox: define highp vec4 fill_color\n#pragma mapbox: define highp vec4 halo_color\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp float halo_width\n#pragma mapbox: define lowp float halo_blur\n\nuniform sampler2D u_texture;\nuniform highp float u_gamma_scale;\nuniform bool u_is_text;\n\nvarying vec2 v_data0;\nvarying vec3 v_data1;\n\nvoid main() {\n    #pragma mapbox: initialize highp vec4 fill_color\n    #pragma mapbox: initialize highp vec4 halo_color\n    #pragma mapbox: initialize lowp float opacity\n    #pragma mapbox: initialize lowp float halo_width\n    #pragma mapbox: initialize lowp float halo_blur\n\n    vec2 tex \x3d v_data0.xy;\n    float gamma_scale \x3d v_data1.x;\n    float size \x3d v_data1.y;\n    float fade_opacity \x3d v_data1[2];\n\n    float fontScale \x3d u_is_text ? size / 24.0 : size;\n\n    lowp vec4 color \x3d fill_color;\n    highp float gamma \x3d EDGE_GAMMA / (fontScale * u_gamma_scale);\n    lowp float buff \x3d (256.0 - 64.0) / 256.0;\n    if (u_is_halo) {\n        color \x3d halo_color;\n        gamma \x3d (halo_blur * 1.19 / SDF_PX + EDGE_GAMMA) / (fontScale * u_gamma_scale);\n        buff \x3d (6.0 - halo_width / fontScale) / SDF_PX;\n    }\n\n    lowp float dist \x3d texture2D(u_texture, tex).a;\n    highp float gamma_scaled \x3d gamma * gamma_scale;\n    highp float alpha \x3d smoothstep(buff - gamma_scaled, buff + gamma_scaled, dist);\n\n    gl_FragColor \x3d color * (alpha * opacity * fade_opacity);\n\n#ifdef OVERDRAW_INSPECTOR\n    gl_FragColor \x3d vec4(1.0);\n#endif\n}\n",
vertexSource:"const float PI \x3d 3.141592653589793;\n\nattribute vec4 a_pos_offset;\nattribute vec4 a_data;\nattribute vec3 a_projected_pos;\nattribute float a_fade_opacity;\n\n// contents of a_size vary based on the type of property value\n// used for {text,icon}-size.\n// For constants, a_size is disabled.\n// For source functions, we bind only one value per vertex: the value of {text,icon}-size evaluated for the current feature.\n// For composite functions:\n// [ text-size(lowerZoomStop, feature),\n//   text-size(upperZoomStop, feature) ]\nuniform bool u_is_size_zoom_constant;\nuniform bool u_is_size_feature_constant;\nuniform highp float u_size_t; // used to interpolate between zoom stops when size is a composite function\nuniform highp float u_size; // used when size is both zoom and feature constant\n\n#pragma mapbox: define highp vec4 fill_color\n#pragma mapbox: define highp vec4 halo_color\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp float halo_width\n#pragma mapbox: define lowp float halo_blur\n\nuniform mat4 u_matrix;\nuniform mat4 u_label_plane_matrix;\nuniform mat4 u_gl_coord_matrix;\n\nuniform bool u_is_text;\nuniform bool u_pitch_with_map;\nuniform highp float u_pitch;\nuniform bool u_rotate_symbol;\nuniform highp float u_aspect_ratio;\nuniform highp float u_camera_to_center_distance;\nuniform float u_fade_change;\n\nuniform vec2 u_texsize;\n\nvarying vec2 v_data0;\nvarying vec3 v_data1;\n\nvoid main() {\n    #pragma mapbox: initialize highp vec4 fill_color\n    #pragma mapbox: initialize highp vec4 halo_color\n    #pragma mapbox: initialize lowp float opacity\n    #pragma mapbox: initialize lowp float halo_width\n    #pragma mapbox: initialize lowp float halo_blur\n\n    vec2 a_pos \x3d a_pos_offset.xy;\n    vec2 a_offset \x3d a_pos_offset.zw;\n\n    vec2 a_tex \x3d a_data.xy;\n    vec2 a_size \x3d a_data.zw;\n\n    highp float segment_angle \x3d -a_projected_pos[2];\n    float size;\n\n    if (!u_is_size_zoom_constant \x26\x26 !u_is_size_feature_constant) {\n        size \x3d mix(a_size[0], a_size[1], u_size_t) / 10.0;\n    } else if (u_is_size_zoom_constant \x26\x26 !u_is_size_feature_constant) {\n        size \x3d a_size[0] / 10.0;\n    } else if (!u_is_size_zoom_constant \x26\x26 u_is_size_feature_constant) {\n        size \x3d u_size;\n    } else {\n        size \x3d u_size;\n    }\n\n    vec4 projectedPoint \x3d u_matrix * vec4(a_pos, 0, 1);\n    highp float camera_to_anchor_distance \x3d projectedPoint.w;\n    // If the label is pitched with the map, layout is done in pitched space,\n    // which makes labels in the distance smaller relative to viewport space.\n    // We counteract part of that effect by multiplying by the perspective ratio.\n    // If the label isn't pitched with the map, we do layout in viewport space,\n    // which makes labels in the distance larger relative to the features around\n    // them. We counteract part of that effect by dividing by the perspective ratio.\n    highp float distance_ratio \x3d u_pitch_with_map ?\n        camera_to_anchor_distance / u_camera_to_center_distance :\n        u_camera_to_center_distance / camera_to_anchor_distance;\n    highp float perspective_ratio \x3d clamp(\n        0.5 + 0.5 * distance_ratio,\n        0.0, // Prevents oversized near-field symbols in pitched/overzoomed tiles\n        4.0);\n\n    size *\x3d perspective_ratio;\n\n    float fontScale \x3d u_is_text ? size / 24.0 : size;\n\n    highp float symbol_rotation \x3d 0.0;\n    if (u_rotate_symbol) {\n        // Point labels with 'rotation-alignment: map' are horizontal with respect to tile units\n        // To figure out that angle in projected space, we draw a short horizontal line in tile\n        // space, project it, and measure its angle in projected space.\n        vec4 offsetProjectedPoint \x3d u_matrix * vec4(a_pos + vec2(1, 0), 0, 1);\n\n        vec2 a \x3d projectedPoint.xy / projectedPoint.w;\n        vec2 b \x3d offsetProjectedPoint.xy / offsetProjectedPoint.w;\n\n        symbol_rotation \x3d atan((b.y - a.y) / u_aspect_ratio, b.x - a.x);\n    }\n\n    highp float angle_sin \x3d sin(segment_angle + symbol_rotation);\n    highp float angle_cos \x3d cos(segment_angle + symbol_rotation);\n    mat2 rotation_matrix \x3d mat2(angle_cos, -1.0 * angle_sin, angle_sin, angle_cos);\n\n    vec4 projected_pos \x3d u_label_plane_matrix * vec4(a_projected_pos.xy, 0.0, 1.0);\n    gl_Position \x3d u_gl_coord_matrix * vec4(projected_pos.xy / projected_pos.w + rotation_matrix * (a_offset / 32.0 * fontScale), 0.0, 1.0);\n    float gamma_scale \x3d gl_Position.w;\n\n    vec2 tex \x3d a_tex / u_texsize;\n    vec2 fade_opacity \x3d unpack_opacity(a_fade_opacity);\n    float fade_change \x3d fade_opacity[1] \x3e 0.5 ? u_fade_change : -u_fade_change;\n    float interpolated_fade_opacity \x3d max(0.0, min(1.0, fade_opacity[0] + fade_change));\n\n    v_data0 \x3d vec2(tex.x, tex.y);\n    v_data1 \x3d vec3(gamma_scale, size, interpolated_fade_opacity);\n}\n"}},
ze=/#pragma mapbox: ([\w]+) ([\w]+) ([\w]+) ([\w]+)/g,Lf=function(b){b=Hd[b];var a={};b.fragmentSource=b.fragmentSource.replace(ze,function(b,c,d,f,e){return a[e]=!0,"define"===c?"\n#ifndef HAS_UNIFORM_u_"+e+"\nvarying "+d+" "+f+" "+e+";\n#else\nuniform "+d+" "+f+" u_"+e+";\n#endif\n":"\n#ifdef HAS_UNIFORM_u_"+e+"\n    "+d+" "+f+" "+e+" \x3d u_"+e+";\n#endif\n"});b.vertexSource=b.vertexSource.replace(ze,function(b,c,d,f,e){b="float"===f?"vec2":"vec4";return a[e]?"define"===c?"\n#ifndef HAS_UNIFORM_u_"+
e+"\nuniform lowp float a_"+e+"_t;\nattribute "+d+" "+b+" a_"+e+";\nvarying "+d+" "+f+" "+e+";\n#else\nuniform "+d+" "+f+" u_"+e+";\n#endif\n":"\n#ifndef HAS_UNIFORM_u_"+e+"\n    "+e+" \x3d unpack_mix_"+b+"(a_"+e+", a_"+e+"_t);\n#else\n    "+d+" "+f+" "+e+" \x3d u_"+e+";\n#endif\n":"define"===c?"\n#ifndef HAS_UNIFORM_u_"+e+"\nuniform lowp float a_"+e+"_t;\nattribute "+d+" "+b+" a_"+e+";\n#else\nuniform "+d+" "+f+" u_"+e+";\n#endif\n":"\n#ifndef HAS_UNIFORM_u_"+e+"\n    "+d+" "+f+" "+e+" \x3d unpack_mix_"+
b+"(a_"+e+", a_"+e+"_t);\n#else\n    "+d+" "+f+" "+e+" \x3d u_"+e+";\n#endif\n"})},Ae;for(Ae in Hd)Lf(Ae);var Be=function(b,a,c,d){b=b.gl;this.program=b.createProgram();var f=c.defines().concat("#define DEVICE_PIXEL_RATIO "+pa.devicePixelRatio.toFixed(1));d&&f.push("#define OVERDRAW_INSPECTOR;");d=f.concat(Hd.prelude.fragmentSource,a.fragmentSource).join("\n");a=f.concat(Hd.prelude.vertexSource,a.vertexSource).join("\n");f=b.createShader(b.FRAGMENT_SHADER);b.shaderSource(f,d);b.compileShader(f);b.attachShader(this.program,
f);d=b.createShader(b.VERTEX_SHADER);b.shaderSource(d,a);b.compileShader(d);b.attachShader(this.program,d);c=c.layoutAttributes||[];for(a=0;a<c.length;a++)b.bindAttribLocation(this.program,a,c[a].name);b.linkProgram(this.program);this.numAttributes=b.getProgramParameter(this.program,b.ACTIVE_ATTRIBUTES);this.attributes={};this.uniforms={};for(c=0;c<this.numAttributes;c++)(a=b.getActiveAttrib(this.program,c))&&(this.attributes[a.name]=b.getAttribLocation(this.program,a.name));c=b.getProgramParameter(this.program,
b.ACTIVE_UNIFORMS);for(a=0;a<c;a++)(d=b.getActiveUniform(this.program,a))&&(this.uniforms[d.name]=b.getUniformLocation(this.program,d.name))};Be.prototype.draw=function(b,a,c,d,f,e,k,g,h){var l,r=b.gl,n=(l={},l[r.LINES]=2,l[r.TRIANGLES]=3,l)[a];l=0;for(e=e.get();l<e.length;l+=1){var q=e[l],u=q.vaos||(q.vaos={});(u[c]||(u[c]=new mb)).bind(b,this,d,k?k.getPaintVertexBuffers():[],f,q.vertexOffset,g,h);r.drawElements(a,q.primitiveLength*n,r.UNSIGNED_SHORT,q.primitiveOffset*n*2)}};var $e=b.mat4.identity(new Float32Array(16)),
Jc=b.default$19.layout,$b=function(b,a){if(!b)return!1;var c=a.imageManager.getPattern(b.from);b=a.imageManager.getPattern(b.to);return!c||!b},af=function(b,a,c){var d=a.context,f=d.gl,e=a.imageManager.getPattern(b.from),k=a.imageManager.getPattern(b.to);f.uniform1i(c.uniforms.u_image,0);f.uniform2fv(c.uniforms.u_pattern_tl_a,e.tl);f.uniform2fv(c.uniforms.u_pattern_br_a,e.br);f.uniform2fv(c.uniforms.u_pattern_tl_b,k.tl);f.uniform2fv(c.uniforms.u_pattern_br_b,k.br);var g=a.imageManager.getPixelSize();
f.uniform2fv(c.uniforms.u_texsize,[g.width,g.height]);f.uniform1f(c.uniforms.u_mix,b.t);f.uniform2fv(c.uniforms.u_pattern_size_a,e.displaySize);f.uniform2fv(c.uniforms.u_pattern_size_b,k.displaySize);f.uniform1f(c.uniforms.u_scale_a,b.fromScale);f.uniform1f(c.uniforms.u_scale_b,b.toScale);d.activeTexture.set(f.TEXTURE0);a.imageManager.bind(a.context)},ed=function(b,a,c){var d=a.context.gl;d.uniform1f(c.uniforms.u_tile_units_to_pixels,1/T(b,1,a.transform.tileZoom));var f=Math.pow(2,b.tileID.overscaledZ);
a=b.tileSize*Math.pow(2,a.transform.tileZoom)/f;f=a*(b.tileID.canonical.x+b.tileID.wrap*f);b=a*b.tileID.canonical.y;d.uniform2f(c.uniforms.u_pixel_coord_upper,f>>16,b>>16);d.uniform2f(c.uniforms.u_pixel_coord_lower,65535&f,65535&b)},dd=b.default$20.mat3,bf=b.default$20.mat4,Ce=b.default$20.vec3,Wd={" ":[16,[]],"!":[10,[5,21,5,7,-1,-1,5,2,4,1,5,0,6,1,5,2]],'"':[16,[4,21,4,14,-1,-1,12,21,12,14]],"#":[21,[11,25,4,-7,-1,-1,17,25,10,-7,-1,-1,4,12,18,12,-1,-1,3,6,17,6]],$:[20,[8,25,8,-4,-1,-1,12,25,12,
-4,-1,-1,17,18,15,20,12,21,8,21,5,20,3,18,3,16,4,14,5,13,7,12,13,10,15,9,16,8,17,6,17,3,15,1,12,0,8,0,5,1,3,3]],"%":[24,[21,21,3,0,-1,-1,8,21,10,19,10,17,9,15,7,14,5,14,3,16,3,18,4,20,6,21,8,21,10,20,13,19,16,19,19,20,21,21,-1,-1,17,7,15,6,14,4,14,2,16,0,18,0,20,1,21,3,21,5,19,7,17,7]],"\x26":[26,[23,12,23,13,22,14,21,14,20,13,19,11,17,6,15,3,13,1,11,0,7,0,5,1,4,2,3,4,3,6,4,8,5,9,12,13,13,14,14,16,14,18,13,20,11,21,9,20,8,18,8,16,9,13,11,10,16,3,18,1,20,0,22,0,23,1,23,2]],"'":[10,[5,19,4,20,5,21,
6,20,6,18,5,16,4,15]],"(":[14,[11,25,9,23,7,20,5,16,4,11,4,7,5,2,7,-2,9,-5,11,-7]],")":[14,[3,25,5,23,7,20,9,16,10,11,10,7,9,2,7,-2,5,-5,3,-7]],"*":[16,[8,21,8,9,-1,-1,3,18,13,12,-1,-1,13,18,3,12]],"+":[26,[13,18,13,0,-1,-1,4,9,22,9]],",":[10,[6,1,5,0,4,1,5,2,6,1,6,-1,5,-3,4,-4]],"-":[26,[4,9,22,9]],".":[10,[5,2,4,1,5,0,6,1,5,2]],"/":[22,[20,25,2,-7]],0:[20,[9,21,6,20,4,17,3,12,3,9,4,4,6,1,9,0,11,0,14,1,16,4,17,9,17,12,16,17,14,20,11,21,9,21]],1:[20,[6,17,8,18,11,21,11,0]],2:[20,[4,16,4,17,5,19,6,
20,8,21,12,21,14,20,15,19,16,17,16,15,15,13,13,10,3,0,17,0]],3:[20,[5,21,16,21,10,13,13,13,15,12,16,11,17,8,17,6,16,3,14,1,11,0,8,0,5,1,4,2,3,4]],4:[20,[13,21,3,7,18,7,-1,-1,13,21,13,0]],5:[20,[15,21,5,21,4,12,5,13,8,14,11,14,14,13,16,11,17,8,17,6,16,3,14,1,11,0,8,0,5,1,4,2,3,4]],6:[20,[16,18,15,20,12,21,10,21,7,20,5,17,4,12,4,7,5,3,7,1,10,0,11,0,14,1,16,3,17,6,17,7,16,10,14,12,11,13,10,13,7,12,5,10,4,7]],7:[20,[17,21,7,0,-1,-1,3,21,17,21]],8:[20,[8,21,5,20,4,18,4,16,5,14,7,13,11,12,14,11,16,9,17,
7,17,4,16,2,15,1,12,0,8,0,5,1,4,2,3,4,3,7,4,9,6,11,9,12,13,13,15,14,16,16,16,18,15,20,12,21,8,21]],9:[20,[16,14,15,11,13,9,10,8,9,8,6,9,4,11,3,14,3,15,4,18,6,20,9,21,10,21,13,20,15,18,16,14,16,9,15,4,13,1,10,0,8,0,5,1,4,3]],":":[10,[5,14,4,13,5,12,6,13,5,14,-1,-1,5,2,4,1,5,0,6,1,5,2]],";":[10,[5,14,4,13,5,12,6,13,5,14,-1,-1,6,1,5,0,4,1,5,2,6,1,6,-1,5,-3,4,-4]],"\x3c":[24,[20,18,4,9,20,0]],"\x3d":[26,[4,12,22,12,-1,-1,4,6,22,6]],"\x3e":[24,[4,18,20,9,4,0]],"?":[18,[3,16,3,17,4,19,5,20,7,21,11,21,13,
20,14,19,15,17,15,15,14,13,13,12,9,10,9,7,-1,-1,9,2,8,1,9,0,10,1,9,2]],"@":[27,[18,13,17,15,15,16,12,16,10,15,9,14,8,11,8,8,9,6,11,5,14,5,16,6,17,8,-1,-1,12,16,10,14,9,11,9,8,10,6,11,5,-1,-1,18,16,17,8,17,6,19,5,21,5,23,7,24,10,24,12,23,15,22,17,20,19,18,20,15,21,12,21,9,20,7,19,5,17,4,15,3,12,3,9,4,6,5,4,7,2,9,1,12,0,15,0,18,1,20,2,21,3,-1,-1,19,16,18,8,18,6,19,5]],A:[18,[9,21,1,0,-1,-1,9,21,17,0,-1,-1,4,7,14,7]],B:[21,[4,21,4,0,-1,-1,4,21,13,21,16,20,17,19,18,17,18,15,17,13,16,12,13,11,-1,-1,4,
11,13,11,16,10,17,9,18,7,18,4,17,2,16,1,13,0,4,0]],C:[21,[18,16,17,18,15,20,13,21,9,21,7,20,5,18,4,16,3,13,3,8,4,5,5,3,7,1,9,0,13,0,15,1,17,3,18,5]],D:[21,[4,21,4,0,-1,-1,4,21,11,21,14,20,16,18,17,16,18,13,18,8,17,5,16,3,14,1,11,0,4,0]],E:[19,[4,21,4,0,-1,-1,4,21,17,21,-1,-1,4,11,12,11,-1,-1,4,0,17,0]],F:[18,[4,21,4,0,-1,-1,4,21,17,21,-1,-1,4,11,12,11]],G:[21,[18,16,17,18,15,20,13,21,9,21,7,20,5,18,4,16,3,13,3,8,4,5,5,3,7,1,9,0,13,0,15,1,17,3,18,5,18,8,-1,-1,13,8,18,8]],H:[22,[4,21,4,0,-1,-1,18,21,
18,0,-1,-1,4,11,18,11]],I:[8,[4,21,4,0]],J:[16,[12,21,12,5,11,2,10,1,8,0,6,0,4,1,3,2,2,5,2,7]],K:[21,[4,21,4,0,-1,-1,18,21,4,7,-1,-1,9,12,18,0]],L:[17,[4,21,4,0,-1,-1,4,0,16,0]],M:[24,[4,21,4,0,-1,-1,4,21,12,0,-1,-1,20,21,12,0,-1,-1,20,21,20,0]],N:[22,[4,21,4,0,-1,-1,4,21,18,0,-1,-1,18,21,18,0]],O:[22,[9,21,7,20,5,18,4,16,3,13,3,8,4,5,5,3,7,1,9,0,13,0,15,1,17,3,18,5,19,8,19,13,18,16,17,18,15,20,13,21,9,21]],P:[21,[4,21,4,0,-1,-1,4,21,13,21,16,20,17,19,18,17,18,14,17,12,16,11,13,10,4,10]],Q:[22,[9,
21,7,20,5,18,4,16,3,13,3,8,4,5,5,3,7,1,9,0,13,0,15,1,17,3,18,5,19,8,19,13,18,16,17,18,15,20,13,21,9,21,-1,-1,12,4,18,-2]],R:[21,[4,21,4,0,-1,-1,4,21,13,21,16,20,17,19,18,17,18,15,17,13,16,12,13,11,4,11,-1,-1,11,11,18,0]],S:[20,[17,18,15,20,12,21,8,21,5,20,3,18,3,16,4,14,5,13,7,12,13,10,15,9,16,8,17,6,17,3,15,1,12,0,8,0,5,1,3,3]],T:[16,[8,21,8,0,-1,-1,1,21,15,21]],U:[22,[4,21,4,6,5,3,7,1,10,0,12,0,15,1,17,3,18,6,18,21]],V:[18,[1,21,9,0,-1,-1,17,21,9,0]],W:[24,[2,21,7,0,-1,-1,12,21,7,0,-1,-1,12,21,
17,0,-1,-1,22,21,17,0]],X:[20,[3,21,17,0,-1,-1,17,21,3,0]],Y:[18,[1,21,9,11,9,0,-1,-1,17,21,9,11]],Z:[20,[17,21,3,0,-1,-1,3,21,17,21,-1,-1,3,0,17,0]],"[":[14,[4,25,4,-7,-1,-1,5,25,5,-7,-1,-1,4,25,11,25,-1,-1,4,-7,11,-7]],"\\":[14,[0,21,14,-3]],"]":[14,[9,25,9,-7,-1,-1,10,25,10,-7,-1,-1,3,25,10,25,-1,-1,3,-7,10,-7]],"^":[16,[6,15,8,18,10,15,-1,-1,3,12,8,17,13,12,-1,-1,8,17,8,0]],_:[16,[0,-2,16,-2]],"`":[10,[6,21,5,20,4,18,4,16,5,15,6,16,5,17]],a:[19,[15,14,15,0,-1,-1,15,11,13,13,11,14,8,14,6,13,4,
11,3,8,3,6,4,3,6,1,8,0,11,0,13,1,15,3]],b:[19,[4,21,4,0,-1,-1,4,11,6,13,8,14,11,14,13,13,15,11,16,8,16,6,15,3,13,1,11,0,8,0,6,1,4,3]],c:[18,[15,11,13,13,11,14,8,14,6,13,4,11,3,8,3,6,4,3,6,1,8,0,11,0,13,1,15,3]],d:[19,[15,21,15,0,-1,-1,15,11,13,13,11,14,8,14,6,13,4,11,3,8,3,6,4,3,6,1,8,0,11,0,13,1,15,3]],e:[18,[3,8,15,8,15,10,14,12,13,13,11,14,8,14,6,13,4,11,3,8,3,6,4,3,6,1,8,0,11,0,13,1,15,3]],f:[12,[10,21,8,21,6,20,5,17,5,0,-1,-1,2,14,9,14]],g:[19,[15,14,15,-2,14,-5,13,-6,11,-7,8,-7,6,-6,-1,-1,15,
11,13,13,11,14,8,14,6,13,4,11,3,8,3,6,4,3,6,1,8,0,11,0,13,1,15,3]],h:[19,[4,21,4,0,-1,-1,4,10,7,13,9,14,12,14,14,13,15,10,15,0]],i:[8,[3,21,4,20,5,21,4,22,3,21,-1,-1,4,14,4,0]],j:[10,[5,21,6,20,7,21,6,22,5,21,-1,-1,6,14,6,-3,5,-6,3,-7,1,-7]],k:[17,[4,21,4,0,-1,-1,14,14,4,4,-1,-1,8,8,15,0]],l:[8,[4,21,4,0]],m:[30,[4,14,4,0,-1,-1,4,10,7,13,9,14,12,14,14,13,15,10,15,0,-1,-1,15,10,18,13,20,14,23,14,25,13,26,10,26,0]],n:[19,[4,14,4,0,-1,-1,4,10,7,13,9,14,12,14,14,13,15,10,15,0]],o:[19,[8,14,6,13,4,11,
3,8,3,6,4,3,6,1,8,0,11,0,13,1,15,3,16,6,16,8,15,11,13,13,11,14,8,14]],p:[19,[4,14,4,-7,-1,-1,4,11,6,13,8,14,11,14,13,13,15,11,16,8,16,6,15,3,13,1,11,0,8,0,6,1,4,3]],q:[19,[15,14,15,-7,-1,-1,15,11,13,13,11,14,8,14,6,13,4,11,3,8,3,6,4,3,6,1,8,0,11,0,13,1,15,3]],r:[13,[4,14,4,0,-1,-1,4,8,5,11,7,13,9,14,12,14]],s:[17,[14,11,13,13,10,14,7,14,4,13,3,11,4,9,6,8,11,7,13,6,14,4,14,3,13,1,10,0,7,0,4,1,3,3]],t:[12,[5,21,5,4,6,1,8,0,10,0,-1,-1,2,14,9,14]],u:[19,[4,14,4,4,5,1,7,0,10,0,12,1,15,4,-1,-1,15,14,15,
0]],v:[16,[2,14,8,0,-1,-1,14,14,8,0]],w:[22,[3,14,7,0,-1,-1,11,14,7,0,-1,-1,11,14,15,0,-1,-1,19,14,15,0]],x:[17,[3,14,14,0,-1,-1,14,14,3,0]],y:[16,[2,14,8,0,-1,-1,14,14,8,0,6,-4,4,-6,2,-7,1,-7]],z:[17,[14,14,3,0,-1,-1,3,14,14,14,-1,-1,3,0,14,0]],"{":[14,[9,25,7,24,6,23,5,21,5,19,6,17,7,16,8,14,8,12,6,10,-1,-1,7,24,6,22,6,20,7,18,8,17,9,15,9,13,8,11,4,9,8,7,9,5,9,3,8,1,7,0,6,-2,6,-4,7,-6,-1,-1,6,8,8,6,8,4,7,2,6,1,5,-1,5,-3,6,-5,7,-6,9,-7]],"|":[8,[4,25,4,-7]],"}":[14,[5,25,7,24,8,23,9,21,9,19,8,17,
7,16,6,14,6,12,8,10,-1,-1,7,24,8,22,8,20,7,18,6,17,5,15,5,13,6,11,10,9,6,7,5,5,5,3,6,1,7,0,8,-2,8,-4,7,-6,-1,-1,8,8,6,6,6,4,7,2,8,1,9,-1,9,-3,8,-5,7,-6,5,-7]],"~":[24,[3,6,3,8,4,11,6,12,8,12,10,11,14,8,16,7,18,7,20,8,21,10,-1,-1,3,8,4,10,6,11,8,11,10,10,14,7,16,6,18,6,20,7,21,10,21,12]]},ke={symbol:function(b,a,c,d){if("translucent"===b.renderPass){var f=b.context;f.setStencilMode(Mb.disabled);f.setColorMode(b.colorModeForRenderPass());0!==c.paint.get("icon-opacity").constantOr(1)&&ca(b,a,c,d,!1,
c.paint.get("icon-translate"),c.paint.get("icon-translate-anchor"),c.layout.get("icon-rotation-alignment"),c.layout.get("icon-pitch-alignment"),c.layout.get("icon-keep-upright"));0!==c.paint.get("text-opacity").constantOr(1)&&ca(b,a,c,d,!0,c.paint.get("text-translate"),c.paint.get("text-translate-anchor"),c.layout.get("text-rotation-alignment"),c.layout.get("text-pitch-alignment"),c.layout.get("text-keep-upright"));a.map.showCollisionBoxes&&(da(b,a,c,d,!1),da(b,a,c,d,!0))}},circle:function(b,a,c,
d){if("translucent"===b.renderPass){var f=c.paint.get("circle-opacity"),e=c.paint.get("circle-stroke-width"),k=c.paint.get("circle-stroke-opacity");if(0!==f.constantOr(1)||0!==e.constantOr(1)&&0!==k.constantOr(1)){f=b.context;e=f.gl;f.setDepthMode(b.depthModeForSublayer(0,lb.ReadOnly));f.setStencilMode(Mb.disabled);f.setColorMode(b.colorModeForRenderPass());k=!0;for(var g=0;g<d.length;g++){var h=d[g],l=a.getTile(h),r=l.getBucket(c);if(r){var n=b.context.program.get(),q=r.programConfigurations.get(c.id),
u=b.useProgram("circle",q);((k||u.program!==n)&&(q.setUniforms(f,u,c.paint,{zoom:b.transform.zoom}),k=!1),e.uniform1f(u.uniforms.u_camera_to_center_distance,b.transform.cameraToCenterDistance),e.uniform1i(u.uniforms.u_scale_with_map,"map"===c.paint.get("circle-pitch-scale")?1:0),"map"===c.paint.get("circle-pitch-alignment"))?(e.uniform1i(u.uniforms.u_pitch_with_map,1),n=T(l,1,b.transform.zoom),e.uniform2f(u.uniforms.u_extrude_scale,n,n)):(e.uniform1i(u.uniforms.u_pitch_with_map,0),e.uniform2fv(u.uniforms.u_extrude_scale,
b.transform.pixelsToGLUnits));e.uniformMatrix4fv(u.uniforms.u_matrix,!1,b.translatePosMatrix(h.posMatrix,l,c.paint.get("circle-translate"),c.paint.get("circle-translate-anchor")));u.draw(f,e.TRIANGLES,c.id,r.layoutVertexBuffer,r.indexBuffer,r.segments,q)}}}}},heatmap:function(a,c,d,f){if(0!==d.paint.get("heatmap-opacity"))if("offscreen"===a.renderPass){var e=a.context,k=e.gl;e.setDepthMode(a.depthModeForSublayer(0,lb.ReadOnly));e.setStencilMode(Mb.disabled);(function(b,a,c){var d=b.gl;b.activeTexture.set(d.TEXTURE1);
b.viewport.set([0,0,a.width/4,a.height/4]);var f=c.heatmapFbo;if(f)d.bindTexture(d.TEXTURE_2D,f.colorAttachment.get()),b.bindFramebuffer.set(f.framebuffer);else{var e=d.createTexture();d.bindTexture(d.TEXTURE_2D,e);d.texParameteri(d.TEXTURE_2D,d.TEXTURE_WRAP_S,d.CLAMP_TO_EDGE);d.texParameteri(d.TEXTURE_2D,d.TEXTURE_WRAP_T,d.CLAMP_TO_EDGE);d.texParameteri(d.TEXTURE_2D,d.TEXTURE_MIN_FILTER,d.LINEAR);d.texParameteri(d.TEXTURE_2D,d.TEXTURE_MAG_FILTER,d.LINEAR);f=c.heatmapFbo=b.createFramebuffer(a.width/
4,a.height/4);(function kf(b,a,c,d){var f=b.gl;f.texImage2D(f.TEXTURE_2D,0,f.RGBA,a.width/4,a.height/4,0,f.RGBA,b.extTextureHalfFloat?b.extTextureHalfFloat.HALF_FLOAT_OES:f.UNSIGNED_BYTE,null);d.colorAttachment.set(c);b.extTextureHalfFloat&&f.checkFramebufferStatus(f.FRAMEBUFFER)!==f.FRAMEBUFFER_COMPLETE&&(b.extTextureHalfFloat=null,d.colorAttachment.setDirty(),kf(b,a,c,d))})(b,a,e,f)}})(e,a,d);e.clear({color:b.default$6.transparent});e.setColorMode(new Rb([k.ONE,k.ONE],b.default$6.transparent,[!0,
!0,!0,!0]));for(var g=!0,h=0;h<f.length;h++){var l=f[h];if(!c.hasRenderableParent(l)){var r=c.getTile(l),n=r.getBucket(d);if(n){var q=a.context.program.get(),u=n.programConfigurations.get(d.id),v=a.useProgram("heatmap",u),p=a.transform.zoom;(g||v.program!==q)&&(u.setUniforms(a.context,v,d.paint,{zoom:p}),g=!1);k.uniform1f(v.uniforms.u_extrude_scale,T(r,1,p));k.uniform1f(v.uniforms.u_intensity,d.paint.get("heatmap-intensity"));k.uniformMatrix4fv(v.uniforms.u_matrix,!1,l.posMatrix);v.draw(e,k.TRIANGLES,
d.id,n.layoutVertexBuffer,n.indexBuffer,n.segments,u)}}}e.viewport.set([0,0,a.width,a.height])}else"translucent"===a.renderPass&&(a.context.setColorMode(a.colorModeForRenderPass()),function(a,c){var d=a.context,f=d.gl,e=c.heatmapFbo;e&&(d.activeTexture.set(f.TEXTURE0),f.bindTexture(f.TEXTURE_2D,e.colorAttachment.get()),d.activeTexture.set(f.TEXTURE1),(e=c.colorRampTexture)||(e=c.colorRampTexture=new la(d,c.colorRamp,f.RGBA)),e.bind(f.LINEAR,f.CLAMP_TO_EDGE),d.setDepthMode(lb.disabled),d=a.useProgram("heatmapTexture"),
c=c.paint.get("heatmap-opacity"),f.uniform1f(d.uniforms.u_opacity,c),f.uniform1i(d.uniforms.u_image,0),f.uniform1i(d.uniforms.u_color_ramp,1),c=b.mat4.create(),b.mat4.ortho(c,0,a.width,a.height,0,0,1),f.uniformMatrix4fv(d.uniforms.u_matrix,!1,c),f.uniform2f(d.uniforms.u_world,f.drawingBufferWidth,f.drawingBufferHeight),a.viewportVAO.bind(a.context,d,a.viewportBuffer,[]),f.drawArrays(f.TRIANGLE_STRIP,0,4))}(a,d))},line:function(b,a,c,d){if("translucent"===b.renderPass&&0!==c.paint.get("line-opacity").constantOr(1)){var f=
b.context;f.setDepthMode(b.depthModeForSublayer(0,lb.ReadOnly));f.setColorMode(b.colorModeForRenderPass());var e;f=c.paint.get("line-dasharray")?"lineSDF":c.paint.get("line-pattern")?"linePattern":c.paint.get("line-gradient")?"lineGradient":"line";for(var k=!0,g=0;g<d.length;g+=1){var h=d[g],l=a.getTile(h),r=l.getBucket(c);if(r){var n=r.programConfigurations.get(c.id),q=b.context.program.get(),u=b.useProgram(f,n),v=k||u.program!==q,p=e!==l.tileID.overscaledZ;v&&n.setUniforms(b.context,u,c.paint,{zoom:b.transform.zoom});
a:{var z=q=k=e=void 0,w=b,A=l,m=c,x=v,y=p;v=w.context;p=v.gl;var t=m.paint.get("line-dasharray"),J=m.paint.get("line-pattern");if(x||y){y=1/T(A,1,w.transform.tileZoom);if(t){z=w.lineAtlas.getDash(t.from,"round"===m.layout.get("line-cap"));q=w.lineAtlas.getDash(t.to,"round"===m.layout.get("line-cap"));var B=z.width*t.fromScale,E=q.width*t.toScale;p.uniform2f(u.uniforms.u_patternscale_a,y/B,-z.height/2);p.uniform2f(u.uniforms.u_patternscale_b,y/E,-q.height/2);p.uniform1f(u.uniforms.u_sdfgamma,w.lineAtlas.width/
(256*Math.min(B,E)*pa.devicePixelRatio)/2)}else if(J){if(k=w.imageManager.getPattern(J.from),e=w.imageManager.getPattern(J.to),!k||!e)break a;p.uniform2f(u.uniforms.u_pattern_size_a,k.displaySize[0]*J.fromScale/y,k.displaySize[1]);p.uniform2f(u.uniforms.u_pattern_size_b,e.displaySize[0]*J.toScale/y,e.displaySize[1]);y=w.imageManager.getPixelSize();p.uniform2fv(u.uniforms.u_texsize,[y.width,y.height])}p.uniform2f(u.uniforms.u_gl_units_to_pixels,1/w.transform.pixelsToGLUnits[0],1/w.transform.pixelsToGLUnits[1])}x&&
(t?(p.uniform1i(u.uniforms.u_image,0),v.activeTexture.set(p.TEXTURE0),w.lineAtlas.bind(v),p.uniform1f(u.uniforms.u_tex_y_a,z.y),p.uniform1f(u.uniforms.u_tex_y_b,q.y),p.uniform1f(u.uniforms.u_mix,t.t)):J&&(p.uniform1i(u.uniforms.u_image,0),v.activeTexture.set(p.TEXTURE0),w.imageManager.bind(v),p.uniform2fv(u.uniforms.u_pattern_tl_a,k.tl),p.uniform2fv(u.uniforms.u_pattern_br_a,k.br),p.uniform2fv(u.uniforms.u_pattern_tl_b,e.tl),p.uniform2fv(u.uniforms.u_pattern_br_b,e.br),p.uniform1f(u.uniforms.u_fade,
J.t)));v.setStencilMode(w.stencilModeForClipping(h));e=w.translatePosMatrix(h.posMatrix,A,m.paint.get("line-translate"),m.paint.get("line-translate-anchor"));if(p.uniformMatrix4fv(u.uniforms.u_matrix,!1,e),p.uniform1f(u.uniforms.u_ratio,1/T(A,1,w.transform.zoom)),m.paint.get("line-gradient")){v.activeTexture.set(p.TEXTURE0);e=m.gradientTexture;if(!m.gradient)break a;e||(e=m.gradientTexture=new la(v,m.gradient,p.RGBA));e.bind(p.LINEAR,p.CLAMP_TO_EDGE);p.uniform1i(u.uniforms.u_image,0)}u.draw(v,p.TRIANGLES,
m.id,r.layoutVertexBuffer,r.indexBuffer,r.segments,n)}e=l.tileID.overscaledZ;k=!1}}}},fill:function(a,c,d,f){var e=d.paint.get("fill-color"),k=d.paint.get("fill-opacity");if(0!==k.constantOr(1)){var g=a.context;g.setColorMode(a.colorModeForRenderPass());e=d.paint.get("fill-pattern")||1!==e.constantOr(b.default$6.transparent).a||1!==k.constantOr(0)?"translucent":"opaque";a.renderPass===e&&(g.setDepthMode(a.depthModeForSublayer(1,"opaque"===a.renderPass?lb.ReadWrite:lb.ReadOnly)),W(a,c,d,f,ea));"translucent"===
a.renderPass&&d.paint.get("fill-antialias")&&(g.lineWidth.set(2),g.setDepthMode(a.depthModeForSublayer(d.getPaintProperty("fill-outline-color")?2:0,lb.ReadOnly)),W(a,c,d,f,U))}},"fill-extrusion":function(a,c,d,f){if(0!==d.paint.get("fill-extrusion-opacity"))if("offscreen"===a.renderPass){!function(a,c){var d=a.context,f=d.gl,e=c.viewportFrame;if(a.depthRboNeedsClear&&a.setupOffscreenDepthRenderbuffer(),!e){var k=new la(d,{width:a.width,height:a.height,data:null},f.RGBA);k.bind(f.LINEAR,f.CLAMP_TO_EDGE);
(e=c.viewportFrame=d.createFramebuffer(a.width,a.height)).colorAttachment.set(k.texture)}d.bindFramebuffer.set(e.framebuffer);e.depthAttachment.set(a.depthRbo);a.depthRboNeedsClear&&(d.clear({depth:1}),a.depthRboNeedsClear=!1);d.clear({color:b.default$6.transparent});d.setStencilMode(Mb.disabled);d.setDepthMode(new lb(f.LEQUAL,lb.ReadWrite,[0,1]));d.setColorMode(a.colorModeForRenderPass())}(a,d);for(var e=!0,k=0;k<f.length;k+=1){var g=f[k],h=c.getTile(g),l=h.getBucket(d);l&&(X(a,0,d,h,g,l,e),e=!1)}}else"translucent"===
a.renderPass&&function(b,a){var c=a.viewportFrame;if(c){var d=b.context,f=d.gl,e=b.useProgram("extrusionTexture");d.setStencilMode(Mb.disabled);d.setDepthMode(lb.disabled);d.setColorMode(b.colorModeForRenderPass());d.activeTexture.set(f.TEXTURE0);f.bindTexture(f.TEXTURE_2D,c.colorAttachment.get());f.uniform1f(e.uniforms.u_opacity,a.paint.get("fill-extrusion-opacity"));f.uniform1i(e.uniforms.u_image,0);a=bf.create();bf.ortho(a,0,b.width,b.height,0,0,1);f.uniformMatrix4fv(e.uniforms.u_matrix,!1,a);
f.uniform2f(e.uniforms.u_world,f.drawingBufferWidth,f.drawingBufferHeight);b.viewportVAO.bind(d,e,b.viewportBuffer,[]);f.drawArrays(f.TRIANGLE_STRIP,0,4)}}(a,d)},hillshade:function(a,c,d,f){if("offscreen"===a.renderPass||"translucent"===a.renderPass){var e=a.context,k=c.getSource().maxzoom;e.setDepthMode(a.depthModeForSublayer(0,lb.ReadOnly));e.setStencilMode(Mb.disabled);e.setColorMode(a.colorModeForRenderPass());for(var g=0;g<f.length;g+=1){var h=c.getTile(f[g]);if(h.needsHillshadePrepare&&"offscreen"===
a.renderPass){var l=a,r=k,n=l.context,q=n.gl;if(h.dem&&h.dem.level){var u=h.dem.level.dim,v=h.dem.getPixels();if(n.activeTexture.set(q.TEXTURE1),n.pixelStoreUnpackPremultiplyAlpha.set(!1),h.demTexture=h.demTexture||l.getTileTexture(h.tileSize),h.demTexture){var p=h.demTexture;p.update(v,{premultiply:!1});p.bind(q.NEAREST,q.CLAMP_TO_EDGE)}else h.demTexture=new la(n,v,q.RGBA,{premultiply:!1}),h.demTexture.bind(q.NEAREST,q.CLAMP_TO_EDGE);n.activeTexture.set(q.TEXTURE0);v=h.fbo;v||(p=new la(n,{width:u,
height:u,data:null},q.RGBA),p.bind(q.LINEAR,q.CLAMP_TO_EDGE),(v=h.fbo=n.createFramebuffer(u,u)).colorAttachment.set(p.texture));n.bindFramebuffer.set(v.framebuffer);n.viewport.set([0,0,u,u]);p=b.mat4.create();b.mat4.ortho(p,0,b.default$8,-b.default$8,0,0,1);b.mat4.translate(p,p,[0,-b.default$8,0]);v=l.useProgram("hillshadePrepare");q.uniformMatrix4fv(v.uniforms.u_matrix,!1,p);q.uniform1f(v.uniforms.u_zoom,h.tileID.overscaledZ);q.uniform2fv(v.uniforms.u_dimension,[2*u,2*u]);q.uniform1i(v.uniforms.u_image,
1);q.uniform1f(v.uniforms.u_maxzoom,r);r=l.rasterBoundsBuffer;l.rasterBoundsVAO.bind(n,v,r,[]);q.drawArrays(q.TRIANGLE_STRIP,0,r.length);h.needsHillshadePrepare=!1}}else"translucent"===a.renderPass&&ha(a,h,d)}e.viewport.set([0,0,a.width,a.height])}},raster:function(b,a,c,d){if("translucent"===b.renderPass&&0!==c.paint.get("raster-opacity")){var f,e,k=b.context,g=k.gl,h=a.getSource(),l=b.useProgram("raster");k.setStencilMode(Mb.disabled);k.setColorMode(b.colorModeForRenderPass());g.uniform1f(l.uniforms.u_brightness_low,
c.paint.get("raster-brightness-min"));g.uniform1f(l.uniforms.u_brightness_high,c.paint.get("raster-brightness-max"));g.uniform1f(l.uniforms.u_saturation_factor,0<(f=c.paint.get("raster-saturation"))?1-1/(1.001-f):-f);g.uniform1f(l.uniforms.u_contrast_factor,0<(e=c.paint.get("raster-contrast"))?1/(1-e):1+e);g.uniform3fv(l.uniforms.u_spin_weights,function(b){b*=Math.PI/180;var a=Math.sin(b);b=Math.cos(b);return[(2*b+1)/3,(-Math.sqrt(3)*a-b+1)/3,(Math.sqrt(3)*a-b+1)/3]}(c.paint.get("raster-hue-rotate")));
g.uniform1f(l.uniforms.u_buffer_scale,1);g.uniform1i(l.uniforms.u_image0,0);g.uniform1i(l.uniforms.u_image1,1);f=d.length&&d[0].overscaledZ;for(e=0;e<d.length;e+=1){var r=d[e];k.setDepthMode(b.depthModeForSublayer(r.overscaledZ-f,1===c.paint.get("raster-opacity")?lb.ReadWrite:lb.ReadOnly,g.LESS));var n=a.getTile(r),q=b.transform.calculatePosMatrix(r.toUnwrapped(),!0);n.registerFadeDuration(c.paint.get("raster-fade-duration"));g.uniformMatrix4fv(l.uniforms.u_matrix,!1,q);r=a.findLoadedParent(r,0,{});
q=fa(n,r,a,c,b.transform);var u=void 0,v=void 0;(k.activeTexture.set(g.TEXTURE0),n.texture.bind(g.LINEAR,g.CLAMP_TO_EDGE,g.LINEAR_MIPMAP_NEAREST),k.activeTexture.set(g.TEXTURE1),r?(r.texture.bind(g.LINEAR,g.CLAMP_TO_EDGE,g.LINEAR_MIPMAP_NEAREST),u=Math.pow(2,r.tileID.overscaledZ-n.tileID.overscaledZ),v=[n.tileID.canonical.x*u%1,n.tileID.canonical.y*u%1]):n.texture.bind(g.LINEAR,g.CLAMP_TO_EDGE,g.LINEAR_MIPMAP_NEAREST),g.uniform2fv(l.uniforms.u_tl_parent,v||[0,0]),g.uniform1f(l.uniforms.u_scale_parent,
u||1),g.uniform1f(l.uniforms.u_fade_t,q.mix),g.uniform1f(l.uniforms.u_opacity,q.opacity*c.paint.get("raster-opacity")),h instanceof Kb)?(n=h.boundsBuffer,h.boundsVAO.bind(k,l,n,[]),g.drawArrays(g.TRIANGLE_STRIP,0,n.length)):n.maskedBoundsBuffer&&n.maskedIndexBuffer&&n.segments?l.draw(k,g.TRIANGLES,c.id,n.maskedBoundsBuffer,n.maskedIndexBuffer,n.segments):(n=b.rasterBoundsBuffer,b.rasterBoundsVAO.bind(k,l,n,[]),g.drawArrays(g.TRIANGLE_STRIP,0,n.length))}}},background:function(b,a,c){var d=c.paint.get("background-color"),
f=c.paint.get("background-opacity");if(0!==f){var e=b.context;a=e.gl;var k=b.transform,g=k.tileSize,h=(c=c.paint.get("background-pattern"))||1!==d.a||1!==f?"translucent":"opaque";if(b.renderPass===h){if(e.setStencilMode(Mb.disabled),e.setDepthMode(b.depthModeForSublayer(0,"opaque"===h?lb.ReadWrite:lb.ReadOnly)),e.setColorMode(b.colorModeForRenderPass()),c){if($b(c,b))return;h=b.useProgram("backgroundPattern");af(c,b,h);b.tileExtentPatternVAO.bind(e,h,b.tileExtentBuffer,[])}else h=b.useProgram("background"),
a.uniform4fv(h.uniforms.u_color,[d.r,d.g,d.b,d.a]),b.tileExtentVAO.bind(e,h,b.tileExtentBuffer,[]);a.uniform1f(h.uniforms.u_opacity,f);d=0;for(k=k.coveringTiles({tileSize:g});d<k.length;d+=1)f=k[d],c&&ed({tileID:f,tileSize:g},b,h),a.uniformMatrix4fv(h.uniforms.u_matrix,!1,b.transform.calculatePosMatrix(f.toUnwrapped())),a.drawArrays(a.TRIANGLE_STRIP,0,b.tileExtentBuffer.length)}}},debug:function(a,c,d){for(var f=0;f<d.length;f++){var e=void 0,k=void 0,g,h,l,r=a,n=c,q=d[f],u=r.context,v=u.gl;u.lineWidth.set(1*
pa.devicePixelRatio);var p=q.posMatrix,z=r.useProgram("debug");u.setDepthMode(lb.disabled);u.setStencilMode(Mb.disabled);u.setColorMode(r.colorModeForRenderPass());v.uniformMatrix4fv(z.uniforms.u_matrix,!1,p);v.uniform4f(z.uniforms.u_color,1,0,0,1);r.debugVAO.bind(u,z,r.debugBuffer,[]);v.drawArrays(v.LINE_STRIP,0,r.debugBuffer.length);var w=q.toString(),A=50,m=5;m=m||1;var x=[];var y=0;for(l=w.length;y<l;y++)if(g=Wd[w[y]]){var t=null;var J=0;for(h=g[1].length;J<h;J+=2)-1===g[1][J]&&-1===g[1][J+1]?
t=null:(k=A+g[1][J]*m,e=200-g[1][J+1]*m,t&&x.push(t.x,t.y,k,e),t={x:k,y:e});A+=g[0]*m}t=new b.PosArray;for(e=0;e<x.length;e+=2)t.emplaceBack(x[e],x[e+1]);x=u.createVertexBuffer(t,Gd.members);(new mb).bind(u,z,x,[]);v.uniform4f(z.uniforms.u_color,1,1,1,1);n=n.getTile(q).tileSize;r=b.default$8/(Math.pow(2,r.transform.zoom-q.overscaledZ)*n);q=[[-1,-1],[-1,1],[1,-1],[1,1]];for(n=0;n<q.length;n++)u=q[n],v.uniformMatrix4fv(z.uniforms.u_matrix,!1,b.mat4.translate([],p,[r*u[0],r*u[1],0])),v.drawArrays(v.LINES,
0,x.length);v.uniform4f(z.uniforms.u_color,0,0,0,1);v.uniformMatrix4fv(z.uniforms.u_matrix,!1,p);v.drawArrays(v.LINES,0,x.length)}}},Gb=function(a,c){this.context=new oc(a);this.transform=c;this._tileTextures={};this.setup();this.numSublayers=ge.maxUnderzooming+ge.maxOverzooming+1;this.depthEpsilon=1/Math.pow(2,16);this.depthRboNeedsClear=!0;this.emptyProgramConfiguration=new b.default$24;this.crossTileSymbolIndex=new Vd};Gb.prototype.resize=function(b,a){var c=this.context.gl;if(this.width=b*pa.devicePixelRatio,
this.height=a*pa.devicePixelRatio,this.context.viewport.set([0,0,this.width,this.height]),this.style)for(b=0,a=this.style._order;b<a.length;b+=1)this.style._layers[a[b]].resize();this.depthRbo&&(c.deleteRenderbuffer(this.depthRbo),this.depthRbo=null)};Gb.prototype.setup=function(){var a=this.context,c=new b.PosArray;c.emplaceBack(0,0);c.emplaceBack(b.default$8,0);c.emplaceBack(0,b.default$8);c.emplaceBack(b.default$8,b.default$8);this.tileExtentBuffer=a.createVertexBuffer(c,Gd.members);this.tileExtentVAO=
new mb;this.tileExtentPatternVAO=new mb;c=new b.PosArray;c.emplaceBack(0,0);c.emplaceBack(b.default$8,0);c.emplaceBack(b.default$8,b.default$8);c.emplaceBack(0,b.default$8);c.emplaceBack(0,0);this.debugBuffer=a.createVertexBuffer(c,Gd.members);this.debugVAO=new mb;c=new b.RasterBoundsArray;c.emplaceBack(0,0,0,0);c.emplaceBack(b.default$8,0,b.default$8,0);c.emplaceBack(0,b.default$8,0,b.default$8);c.emplaceBack(b.default$8,b.default$8,b.default$8,b.default$8);this.rasterBoundsBuffer=a.createVertexBuffer(c,
zb.members);this.rasterBoundsVAO=new mb;c=new b.PosArray;c.emplaceBack(0,0);c.emplaceBack(1,0);c.emplaceBack(0,1);c.emplaceBack(1,1);this.viewportBuffer=a.createVertexBuffer(c,Gd.members);this.viewportVAO=new mb};Gb.prototype.clearStencil=function(){var a=this.context,c=a.gl;a.setColorMode(Rb.disabled);a.setDepthMode(lb.disabled);a.setStencilMode(new Mb({func:c.ALWAYS,mask:0},0,255,c.ZERO,c.ZERO,c.ZERO));var d=b.mat4.create();b.mat4.ortho(d,0,this.width,this.height,0,0,1);b.mat4.scale(d,d,[c.drawingBufferWidth,
c.drawingBufferHeight,0]);var f=this.useProgram("clippingMask");c.uniformMatrix4fv(f.uniforms.u_matrix,!1,d);this.viewportVAO.bind(a,f,this.viewportBuffer,[]);c.drawArrays(c.TRIANGLE_STRIP,0,4)};Gb.prototype._renderTileClippingMasks=function(b){var a=this.context,c=a.gl;a.setColorMode(Rb.disabled);a.setDepthMode(lb.disabled);var d=1;this._tileClippingMaskIDs={};for(var f=0;f<b.length;f+=1){var e=b[f],k=this._tileClippingMaskIDs[e.key]=d++;a.setStencilMode(new Mb({func:c.ALWAYS,mask:0},k,255,c.KEEP,
c.KEEP,c.REPLACE));k=this.useProgram("clippingMask");c.uniformMatrix4fv(k.uniforms.u_matrix,!1,e.posMatrix);this.tileExtentVAO.bind(this.context,k,this.tileExtentBuffer,[]);c.drawArrays(c.TRIANGLE_STRIP,0,this.tileExtentBuffer.length)}};Gb.prototype.stencilModeForClipping=function(b){var a=this.context.gl;return new Mb({func:a.EQUAL,mask:255},this._tileClippingMaskIDs[b.key],0,a.KEEP,a.KEEP,a.REPLACE)};Gb.prototype.colorModeForRenderPass=function(){var a=this.context.gl;return this._showOverdrawInspector?
new Rb([a.CONSTANT_COLOR,a.ONE],new b.default$6(.125,.125,.125,0),[!0,!0,!0,!0]):"opaque"===this.renderPass?Rb.unblended:Rb.alphaBlended};Gb.prototype.depthModeForSublayer=function(b,a,c){b=1-((1+this.currentLayer)*this.numSublayers+b)*this.depthEpsilon;return new lb(c||this.context.gl.LEQUAL,a,[b-1+this.depthRange,b])};Gb.prototype.render=function(a,c){var d=this;for(e in this.style=a,this.options=c,this.lineAtlas=a.lineAtlas,this.imageManager=a.imageManager,this.glyphManager=a.glyphManager,this.symbolFadeChange=
a.placement.symbolFadeChange(pa.now()),a.sourceCaches){var f=d.style.sourceCaches[e];f.used&&f.prepare(d.context)}var e=this.style._order;var k=b.filterObject(this.style.sourceCaches,function(b){return"raster"===b.getSource().type||"raster-dem"===b.getSource().type});f=function(a){var c=k[a];!function(a,c){a=a.sort(function(b,a){return b.tileID.isLessThan(a.tileID)?-1:a.tileID.isLessThan(b.tileID)?1:0});for(var d=0;d<a.length;d++){var f={},e=a[d],k=a.slice(d+1);ba(e.tileID.wrapped(),e.tileID,k,new b.OverscaledTileID(0,
e.tileID.wrap+1,0,0,0),f);e.setMask(f,c)}}(c.getVisibleCoordinates().map(function(b){return c.getTile(b)}),d.context)};for(var g in k)f(g);this.renderPass="offscreen";var h;g=[];this.depthRboNeedsClear=!0;for(f=0;f<e.length;f++){var l=d.style._layers[e[f]];l.hasOffscreenPass()&&!l.isHidden(d.transform.zoom)&&(l.source!==(h&&h.id)&&(g=[],(h=d.style.sourceCaches[l.source])&&(g=h.getVisibleCoordinates()).reverse()),g.length&&d.renderLayer(d,h,l,g))}this.context.bindFramebuffer.set(null);this.context.clear({color:c.showOverdrawInspector?
b.default$6.black:b.default$6.transparent,depth:1});this._showOverdrawInspector=c.showOverdrawInspector;this.depthRange=(a._order.length+2)*this.numSublayers*this.depthEpsilon;this.renderPass="opaque";var r;a=[];this.currentLayer=e.length-1;for(this.currentLayer;0<=this.currentLayer;this.currentLayer--)c=d.style._layers[e[d.currentLayer]],c.source!==(r&&r.id)&&(a=[],(r=d.style.sourceCaches[c.source])&&(d.clearStencil(),a=r.getVisibleCoordinates(),r.getSource().isTileClipped&&d._renderTileClippingMasks(a))),
d.renderLayer(d,r,c,a);this.renderPass="translucent";var n;r=[];this.currentLayer=0;for(this.currentLayer;this.currentLayer<e.length;this.currentLayer++)a=d.style._layers[e[d.currentLayer]],a.source!==(n&&n.id)&&(r=[],(n=d.style.sourceCaches[a.source])&&(d.clearStencil(),r=n.getVisibleCoordinates(),n.getSource().isTileClipped&&d._renderTileClippingMasks(r)),r.reverse()),d.renderLayer(d,n,a,r);this.options.showTileBoundaries&&(n=this.style.sourceCaches[Object.keys(this.style.sourceCaches)[0]])&&ke.debug(this,
n,n.getVisibleCoordinates())};Gb.prototype.setupOffscreenDepthRenderbuffer=function(){var b=this.context;this.depthRbo||(this.depthRbo=b.createRenderbuffer(b.gl.DEPTH_COMPONENT16,this.width,this.height))};Gb.prototype.renderLayer=function(b,a,c,d){c.isHidden(this.transform.zoom)||("background"===c.type||d.length)&&(this.id=c.id,ke[c.type](b,a,c,d))};Gb.prototype.translatePosMatrix=function(a,c,d,f,e){if(!d[0]&&!d[1])return a;var k=e?"map"===f?this.transform.angle:0:"viewport"===f?-this.transform.angle:
0;k&&(f=Math.sin(k),k=Math.cos(k),d=[d[0]*k-d[1]*f,d[0]*f+d[1]*k]);c=[e?d[0]:T(c,d[0],this.transform.zoom),e?d[1]:T(c,d[1],this.transform.zoom),0];d=new Float32Array(16);return b.mat4.translate(d,a,c),d};Gb.prototype.saveTileTexture=function(b){var a=this._tileTextures[b.size[0]];a?a.push(b):this._tileTextures[b.size[0]]=[b]};Gb.prototype.getTileTexture=function(b){return(b=this._tileTextures[b])&&0<b.length?b.pop():null};Gb.prototype._createProgramCached=function(b,a){this.cache=this.cache||{};var c=
""+b+(a.cacheKey||"")+(this._showOverdrawInspector?"/overdraw":"");return this.cache[c]||(this.cache[c]=new Be(this.context,Hd[b],a,this._showOverdrawInspector)),this.cache[c]};Gb.prototype.useProgram=function(b,a){b=this._createProgramCached(b,a||this.emptyProgramConfiguration);return this.context.program.set(b.program),b};var ac=b.default$20.vec4,ra=b.default$20.mat4,Fa=b.default$20.mat2,eb=function(b,a,c){this.tileSize=512;this._renderWorldCopies=void 0===c||c;this._minZoom=b||0;this._maxZoom=
a||22;this.latRange=[-85.05113,85.05113];this.height=this.width=0;this._center=new La(0,0);this.angle=this.zoom=0;this._fov=.6435011087932844;this._pitch=0;this._unmodified=!0;this._posMatrixCache={};this._alignedPosMatrixCache={}},ob={minZoom:{configurable:!0},maxZoom:{configurable:!0},renderWorldCopies:{configurable:!0},worldSize:{configurable:!0},centerPoint:{configurable:!0},size:{configurable:!0},bearing:{configurable:!0},pitch:{configurable:!0},fov:{configurable:!0},zoom:{configurable:!0},center:{configurable:!0},
unmodified:{configurable:!0},x:{configurable:!0},y:{configurable:!0},point:{configurable:!0}};eb.prototype.clone=function(){var b=new eb(this._minZoom,this._maxZoom,this._renderWorldCopies);return b.tileSize=this.tileSize,b.latRange=this.latRange,b.width=this.width,b.height=this.height,b._center=this._center,b.zoom=this.zoom,b.angle=this.angle,b._fov=this._fov,b._pitch=this._pitch,b._unmodified=this._unmodified,b._calcMatrices(),b};ob.minZoom.get=function(){return this._minZoom};ob.minZoom.set=function(b){this._minZoom!==
b&&(this._minZoom=b,this.zoom=Math.max(this.zoom,b))};ob.maxZoom.get=function(){return this._maxZoom};ob.maxZoom.set=function(b){this._maxZoom!==b&&(this._maxZoom=b,this.zoom=Math.min(this.zoom,b))};ob.renderWorldCopies.get=function(){return this._renderWorldCopies};ob.renderWorldCopies.set=function(b){void 0===b?b=!0:null===b&&(b=!1);this._renderWorldCopies=b};ob.worldSize.get=function(){return this.tileSize*this.scale};ob.centerPoint.get=function(){return this.size._div(2)};ob.size.get=function(){return new b.default$1(this.width,
this.height)};ob.bearing.get=function(){return-this.angle/Math.PI*180};ob.bearing.set=function(a){a=-b.wrap(a,-180,180)*Math.PI/180;this.angle!==a&&(this._unmodified=!1,this.angle=a,this._calcMatrices(),this.rotationMatrix=Fa.create(),Fa.rotate(this.rotationMatrix,this.rotationMatrix,this.angle))};ob.pitch.get=function(){return this._pitch/Math.PI*180};ob.pitch.set=function(a){a=b.clamp(a,0,60)/180*Math.PI;this._pitch!==a&&(this._unmodified=!1,this._pitch=a,this._calcMatrices())};ob.fov.get=function(){return this._fov/
Math.PI*180};ob.fov.set=function(b){b=Math.max(.01,Math.min(60,b));this._fov!==b&&(this._unmodified=!1,this._fov=b/180*Math.PI,this._calcMatrices())};ob.zoom.get=function(){return this._zoom};ob.zoom.set=function(b){b=Math.min(Math.max(b,this.minZoom),this.maxZoom);this._zoom!==b&&(this._unmodified=!1,this._zoom=b,this.scale=this.zoomScale(b),this.tileZoom=Math.floor(b),this.zoomFraction=b-this.tileZoom,this._constrain(),this._calcMatrices())};ob.center.get=function(){return this._center};ob.center.set=
function(b){b.lat===this._center.lat&&b.lng===this._center.lng||(this._unmodified=!1,this._center=b,this._constrain(),this._calcMatrices())};eb.prototype.coveringZoomLevel=function(b){return(b.roundZoom?Math.round:Math.floor)(this.zoom+this.scaleZoom(this.tileSize/b.tileSize))};eb.prototype.getVisibleUnwrappedCoordinates=function(a){var c=this.pointCoordinate(new b.default$1(0,0),0),d=this.pointCoordinate(new b.default$1(this.width,0),0);c=Math.floor(c.column);d=Math.floor(d.column);var f=[new b.UnwrappedTileID(0,
a)];if(this._renderWorldCopies)for(;c<=d;c++)0!==c&&f.push(new b.UnwrappedTileID(c,a));return f};eb.prototype.coveringTiles=function(a){var c=this.coveringZoomLevel(a),d=c;if(void 0!==a.minzoom&&c<a.minzoom)return[];void 0!==a.maxzoom&&c>a.maxzoom&&(c=a.maxzoom);var f=this.pointCoordinate(this.centerPoint,c),e=new b.default$1(f.column-.5,f.row-.5);return function(a,c,d,f){function e(c,e,h){var l;if(0<=h&&h<=k)for(;c<e;c++){var r=Math.floor(c/k);var n=(c%k+k)%k;0!==r&&!0!==f||(l=new b.OverscaledTileID(d,
r,a,n,h),g[l.key]=l)}}void 0===f&&(f=!0);var k=1<<a,g={};return Z(c[0],c[1],c[2],0,k,e),Z(c[2],c[3],c[0],0,k,e),Object.keys(g).map(function(b){return g[b]})}(c,[this.pointCoordinate(new b.default$1(0,0),c),this.pointCoordinate(new b.default$1(this.width,0),c),this.pointCoordinate(new b.default$1(this.width,this.height),c),this.pointCoordinate(new b.default$1(0,this.height),c)],a.reparseOverscaled?d:c,this._renderWorldCopies).sort(function(b,a){return e.dist(b.canonical)-e.dist(a.canonical)})};eb.prototype.resize=
function(b,a){this.width=b;this.height=a;this.pixelsToGLUnits=[2/b,-2/a];this._constrain();this._calcMatrices()};ob.unmodified.get=function(){return this._unmodified};eb.prototype.zoomScale=function(b){return Math.pow(2,b)};eb.prototype.scaleZoom=function(b){return Math.log(b)/Math.LN2};eb.prototype.project=function(a){return new b.default$1(this.lngX(a.lng),this.latY(a.lat))};eb.prototype.unproject=function(b){return new La(this.xLng(b.x),this.yLat(b.y))};ob.x.get=function(){return this.lngX(this.center.lng)};
ob.y.get=function(){return this.latY(this.center.lat)};ob.point.get=function(){return new b.default$1(this.x,this.y)};eb.prototype.lngX=function(b){return(180+b)*this.worldSize/360};eb.prototype.latY=function(b){return(180-180/Math.PI*Math.log(Math.tan(Math.PI/4+b*Math.PI/360)))*this.worldSize/360};eb.prototype.xLng=function(b){return 360*b/this.worldSize-180};eb.prototype.yLat=function(b){return 360/Math.PI*Math.atan(Math.exp((180-360*b/this.worldSize)*Math.PI/180))-90};eb.prototype.setLocationAtPoint=
function(b,a){a=this.pointCoordinate(a)._sub(this.pointCoordinate(this.centerPoint));this.center=this.coordinateLocation(this.locationCoordinate(b)._sub(a));this._renderWorldCopies&&(this.center=this.center.wrap())};eb.prototype.locationPoint=function(b){return this.coordinatePoint(this.locationCoordinate(b))};eb.prototype.pointLocation=function(b){return this.coordinateLocation(this.pointCoordinate(b))};eb.prototype.locationCoordinate=function(a){return(new b.default$17(this.lngX(a.lng)/this.tileSize,
this.latY(a.lat)/this.tileSize,this.zoom)).zoomTo(this.tileZoom)};eb.prototype.coordinateLocation=function(b){b=b.zoomTo(this.zoom);return new La(this.xLng(b.column*this.tileSize),this.yLat(b.row*this.tileSize))};eb.prototype.pointCoordinate=function(a,c){void 0===c&&(c=this.tileZoom);var d=[a.x,a.y,0,1];a=[a.x,a.y,1,1];ac.transformMat4(d,d,this.pixelMatrixInverse);ac.transformMat4(a,a,this.pixelMatrixInverse);var f=d[3],e=a[3],k=d[1]/f,g=a[1]/e,h=d[2]/f,l=a[2]/e;h=h===l?0:(0-h)/(l-h);return(new b.default$17(b.number(d[0]/
f,a[0]/e,h)/this.tileSize,b.number(k,g,h)/this.tileSize,this.zoom))._zoomTo(c)};eb.prototype.coordinatePoint=function(a){a=a.zoomTo(this.zoom);a=[a.column*this.tileSize,a.row*this.tileSize,0,1];return ac.transformMat4(a,a,this.pixelMatrix),new b.default$1(a[0]/a[3],a[1]/a[3])};eb.prototype.calculatePosMatrix=function(a,c){void 0===c&&(c=!1);var d=a.key,f=c?this._alignedPosMatrixCache:this._posMatrixCache;if(f[d])return f[d];var e=a.canonical,k=this.worldSize/this.zoomScale(e.z);a=e.x+Math.pow(2,e.z)*
a.wrap;var g=ra.identity(new Float64Array(16));return ra.translate(g,g,[a*k,e.y*k,0]),ra.scale(g,g,[k/b.default$8,k/b.default$8,1]),ra.multiply(g,c?this.alignedProjMatrix:this.projMatrix,g),f[d]=new Float32Array(g),f[d]};eb.prototype._constrain=function(){if(this.center&&this.width&&this.height&&!this._constraining){this._constraining=!0;var a,c,d=-90,f=90,e=-180,k=180,g=this.size,h=this._unmodified;if(this.latRange){var l=this.latRange;d=this.latY(l[1]);l=(f=this.latY(l[0]))-d<g.y?g.y/(f-d):0}if(this.lngRange){var r=
this.lngRange;e=this.lngX(r[0]);r=(k=this.lngX(r[1]))-e<g.x?g.x/(k-e):0}var n=Math.max(r||0,l||0);if(n)return this.center=this.unproject(new b.default$1(r?(k+e)/2:this.x,l?(f+d)/2:this.y)),this.zoom+=this.scaleZoom(n),this._unmodified=h,void(this._constraining=!1);this.latRange&&(l=this.y,r=g.y/2,l-r<d&&(c=d+r),l+r>f&&(c=f-r));this.lngRange&&(d=this.x,g=g.x/2,d-g<e&&(a=e+g),d+g>k&&(a=k-g));void 0===a&&void 0===c||(this.center=this.unproject(new b.default$1(void 0!==a?a:this.x,void 0!==c?c:this.y)));
this._unmodified=h;this._constraining=!1}};eb.prototype._calcMatrices=function(){if(this.height){this.cameraToCenterDistance=.5/Math.tan(this._fov/2)*this.height;var b=this._fov/2,a=this.x,c=this.y,d=1.01*(Math.sin(b)*this.cameraToCenterDistance/Math.sin(Math.PI-(Math.PI/2+this._pitch)-b)*Math.cos(Math.PI/2-this._pitch)+this.cameraToCenterDistance);b=new Float64Array(16);ra.perspective(b,this._fov,this.width/this.height,1,d);ra.scale(b,b,[1,-1,1]);ra.translate(b,b,[0,0,-this.cameraToCenterDistance]);
ra.rotateX(b,b,this._pitch);ra.rotateZ(b,b,this.angle);ra.translate(b,b,[-a,-c,0]);ra.scale(b,b,[1,1,this.worldSize/(12756274*Math.PI*Math.abs(Math.cos(Math.PI/180*this.center.lat))),1]);this.projMatrix=b;d=this.width%2/2;var f=this.height%2/2,e=Math.cos(this.angle),k=Math.sin(this.angle);a=a-Math.round(a)+e*d+k*f;c=c-Math.round(c)+e*f+k*d;d=new Float64Array(b);if(ra.translate(d,d,[.5<a?a-1:a,.5<c?c-1:c,0]),this.alignedProjMatrix=d,b=ra.create(),ra.scale(b,b,[this.width/2,-this.height/2,1]),ra.translate(b,
b,[1,-1,0]),this.pixelMatrix=ra.multiply(new Float64Array(16),b,this.projMatrix),!(b=ra.invert(new Float64Array(16),this.pixelMatrix)))throw Error("failed to invert matrix");this.pixelMatrixInverse=b;this._posMatrixCache={};this._alignedPosMatrixCache={}}};eb.prototype.maxPitchScaleFactor=function(){if(!this.pixelMatrixInverse)return 1;var a=this.pointCoordinate(new b.default$1(0,0)).zoomTo(this.zoom);a=[a.column*this.tileSize,a.row*this.tileSize,0,1];return ac.transformMat4(a,a,this.pixelMatrix)[3]/
this.cameraToCenterDistance};Object.defineProperties(eb.prototype,ob);var fd=function(){var a,c,d,f;b.bindAll(["_onHashChange","_updateHash"],this);this._updateHash=(a=this._updateHashUnthrottled.bind(this),c=!1,d=0,f=function(){d=0;c&&(a(),d=setTimeout(f,300),c=!1)},function(){return c=!0,d||f(),d})};fd.prototype.addTo=function(a){return this._map=a,b.default.addEventListener("hashchange",this._onHashChange,!1),this._map.on("moveend",this._updateHash),this};fd.prototype.remove=function(){return b.default.removeEventListener("hashchange",
this._onHashChange,!1),this._map.off("moveend",this._updateHash),clearTimeout(this._updateHash()),delete this._map,this};fd.prototype.getHashString=function(b){var a=this._map.getCenter(),c=Math.round(100*this._map.getZoom())/100,d=Math.pow(10,Math.ceil((c*Math.LN2+Math.log(512/360/.5))/Math.LN10)),f=Math.round(a.lng*d)/d;a=Math.round(a.lat*d)/d;d=this._map.getBearing();var e=this._map.getPitch(),k="";return k+=b?"#/"+f+"/"+a+"/"+c:"#"+c+"/"+a+"/"+f,(d||e)&&(k+="/"+Math.round(10*d)/10),e&&(k+="/"+
Math.round(e)),k};fd.prototype._onHashChange=function(){var a=b.default.location.hash.replace("#","").split("/");return 3<=a.length&&(this._map.jumpTo({center:[+a[2],+a[1]],zoom:+a[0],bearing:+(a[3]||0),pitch:+(a[4]||0)}),!0)};fd.prototype._updateHashUnthrottled=function(){var a=this.getHashString();b.default.history.replaceState(b.default.history.state,"",a)};var za=function(a){function c(c,d,f,e){void 0===e&&(e={});var k=ka.mousePos(d.getCanvasContainer(),f),g=d.unproject(k);a.call(this,c,b.extend({point:k,
lngLat:g,originalEvent:f},e));this._defaultPrevented=!1;this.target=d}a&&(c.__proto__=a);c.prototype=Object.create(a&&a.prototype);c.prototype.constructor=c;var d={defaultPrevented:{configurable:!0}};return c.prototype.preventDefault=function(){this._defaultPrevented=!0},d.defaultPrevented.get=function(){return this._defaultPrevented},Object.defineProperties(c.prototype,d),c}(b.Event),Za=function(a){function c(c,d,f){var e=ka.touchPos(d.getCanvasContainer(),f),k=e.map(function(b){return d.unproject(b)}),
g=e.reduce(function(b,a,c,d){return b.add(a.div(d.length))},new b.default$1(0,0)),h=d.unproject(g);a.call(this,c,{points:e,point:g,lngLats:k,lngLat:h,originalEvent:f});this._defaultPrevented=!1}a&&(c.__proto__=a);c.prototype=Object.create(a&&a.prototype);c.prototype.constructor=c;var d={defaultPrevented:{configurable:!0}};return c.prototype.preventDefault=function(){this._defaultPrevented=!0},d.defaultPrevented.get=function(){return this._defaultPrevented},Object.defineProperties(c.prototype,d),c}(b.Event),
$a=function(b){function a(a,c,d){b.call(this,a,{originalEvent:d});this._defaultPrevented=!1}b&&(a.__proto__=b);a.prototype=Object.create(b&&b.prototype);a.prototype.constructor=a;var c={defaultPrevented:{configurable:!0}};return a.prototype.preventDefault=function(){this._defaultPrevented=!0},c.defaultPrevented.get=function(){return this._defaultPrevented},Object.defineProperties(a.prototype,c),a}(b.Event),Ub=function(a){this._map=a;this._el=a.getCanvasContainer();this._delta=0;b.bindAll(["_onWheel",
"_onTimeout","_onScrollFrame","_onScrollFinished"],this)};Ub.prototype.isEnabled=function(){return!!this._enabled};Ub.prototype.isActive=function(){return!!this._active};Ub.prototype.enable=function(b){this.isEnabled()||(this._enabled=!0,this._aroundCenter=b&&"center"===b.around)};Ub.prototype.disable=function(){this.isEnabled()&&(this._enabled=!1)};Ub.prototype.onWheel=function(a){if(this.isEnabled()){var c=a.deltaMode===b.default.WheelEvent.DOM_DELTA_LINE?40*a.deltaY:a.deltaY,d=pa.now(),f=d-(this._lastWheelEventTime||
0);this._lastWheelEventTime=d;0!==c&&0==c%4.000244140625?this._type="wheel":0!==c&&4>Math.abs(c)?this._type="trackpad":400<f?(this._type=null,this._lastValue=c,this._timeout=setTimeout(this._onTimeout,40,a)):this._type||(this._type=200>Math.abs(f*c)?"trackpad":"wheel",this._timeout&&(clearTimeout(this._timeout),this._timeout=null,c+=this._lastValue));a.shiftKey&&c&&(c/=4);this._type&&(this._lastWheelEvent=a,this._delta-=c,this.isActive()||this._start(a));a.preventDefault()}};Ub.prototype._onTimeout=
function(b){this._type="wheel";this._delta-=this._lastValue;this.isActive()||this._start(b)};Ub.prototype._start=function(a){this._delta&&(this._frameId&&(this._map._cancelRenderFrame(this._frameId),this._frameId=null),this._active=!0,this._map.fire(new b.Event("movestart",{originalEvent:a})),this._map.fire(new b.Event("zoomstart",{originalEvent:a})),this._finishTimeout&&clearTimeout(this._finishTimeout),a=ka.mousePos(this._el,a),this._around=La.convert(this._aroundCenter?this._map.getCenter():this._map.unproject(a)),
this._aroundPoint=this._map.transform.locationPoint(this._around),this._frameId||(this._frameId=this._map._requestRenderFrame(this._onScrollFrame)))};Ub.prototype._onScrollFrame=function(){var a=this;if(this._frameId=null,this.isActive()){var c=this._map.transform;if(0!==this._delta){var d=2/(1+Math.exp(-Math.abs(this._delta*("wheel"===this._type&&4.000244140625<Math.abs(this._delta)?1/450:.01))));0>this._delta&&0!==d&&(d=1/d);var f="number"==typeof this._targetZoom?c.zoomScale(this._targetZoom):
c.scale;this._targetZoom=Math.min(c.maxZoom,Math.max(c.minZoom,c.scaleZoom(f*d)));"wheel"===this._type&&(this._startZoom=c.zoom,this._easing=this._smoothOutEasing(200));this._delta=0}d=!1;if("wheel"===this._type){f=Math.min((pa.now()-this._lastWheelEventTime)/200,1);var e=this._easing(f);c.zoom=b.number(this._startZoom,this._targetZoom,e);1>f?this._frameId||(this._frameId=this._map._requestRenderFrame(this._onScrollFrame)):d=!0}else c.zoom=this._targetZoom,d=!0;c.setLocationAtPoint(this._around,this._aroundPoint);
this._map.fire(new b.Event("move",{originalEvent:this._lastWheelEvent}));this._map.fire(new b.Event("zoom",{originalEvent:this._lastWheelEvent}));d&&(this._active=!1,this._finishTimeout=setTimeout(function(){a._map.fire(new b.Event("zoomend",{originalEvent:a._lastWheelEvent}));a._map.fire(new b.Event("moveend",{originalEvent:a._lastWheelEvent}));delete a._targetZoom},200))}};Ub.prototype._smoothOutEasing=function(a){var c=b.ease;if(this._prevEase){c=this._prevEase;var d=(pa.now()-c.start)/c.duration;
c=c.easing(d+.01)-c.easing(d);c=.27/Math.sqrt(c*c+1E-4)*.01;c=b.bezier(c,Math.sqrt(.0729-c*c),.25,1)}return this._prevEase={start:pa.now(),duration:a,easing:c},c};var Sb=function(a){this._map=a;this._el=a.getCanvasContainer();this._container=a.getContainer();b.bindAll(["_onMouseMove","_onMouseUp","_onKeyDown"],this)};Sb.prototype.isEnabled=function(){return!!this._enabled};Sb.prototype.isActive=function(){return!!this._active};Sb.prototype.enable=function(){this.isEnabled()||(this._enabled=!0)};Sb.prototype.disable=
function(){this.isEnabled()&&(this._enabled=!1)};Sb.prototype.onMouseDown=function(a){this.isEnabled()&&a.shiftKey&&0===a.button&&(b.default.document.addEventListener("mousemove",this._onMouseMove,!1),b.default.document.addEventListener("keydown",this._onKeyDown,!1),b.default.document.addEventListener("mouseup",this._onMouseUp,!1),ka.disableDrag(),this._startPos=ka.mousePos(this._el,a),this._active=!0)};Sb.prototype._onMouseMove=function(b){var a=this._startPos,c=ka.mousePos(this._el,b);this._box||
(this._box=ka.create("div","mapboxgl-boxzoom",this._container),this._container.classList.add("mapboxgl-crosshair"),this._fireEvent("boxzoomstart",b));b=Math.min(a.x,c.x);var d=Math.max(a.x,c.x),f=Math.min(a.y,c.y);a=Math.max(a.y,c.y);ka.setTransform(this._box,"translate("+b+"px,"+f+"px)");this._box.style.width=d-b+"px";this._box.style.height=a-f+"px"};Sb.prototype._onMouseUp=function(a){if(0===a.button){var c=this._startPos,d=ka.mousePos(this._el,a),f=(new Pa).extend(this._map.unproject(c)).extend(this._map.unproject(d));
this._finish();ka.suppressClick();c.x===d.x&&c.y===d.y?this._fireEvent("boxzoomcancel",a):this._map.fitBounds(f,{linear:!0}).fire(new b.Event("boxzoomend",{originalEvent:a,boxZoomBounds:f}))}};Sb.prototype._onKeyDown=function(b){27===b.keyCode&&(this._finish(),this._fireEvent("boxzoomcancel",b))};Sb.prototype._finish=function(){this._active=!1;b.default.document.removeEventListener("mousemove",this._onMouseMove,!1);b.default.document.removeEventListener("keydown",this._onKeyDown,!1);b.default.document.removeEventListener("mouseup",
this._onMouseUp,!1);this._container.classList.remove("mapboxgl-crosshair");this._box&&(ka.remove(this._box),this._box=null);ka.enableDrag()};Sb.prototype._fireEvent=function(a,c){return this._map.fire(new b.Event(a,{originalEvent:c}))};var hb=b.bezier(0,0,.25,1),xb=function(a,c){this._map=a;this._el=c.element||a.getCanvasContainer();this._state="disabled";this._button=c.button||"right";this._bearingSnap=c.bearingSnap||0;this._pitchWithRotate=!1!==c.pitchWithRotate;b.bindAll(["_onMouseMove","_onMouseUp",
"_onBlur","_onDragFrame"],this)};xb.prototype.isEnabled=function(){return"disabled"!==this._state};xb.prototype.isActive=function(){return"active"===this._state};xb.prototype.enable=function(){this.isEnabled()||(this._state="enabled")};xb.prototype.disable=function(){if(this.isEnabled())switch(this._state){case "active":this._state="disabled";this._unbind();this._deactivate();this._fireEvent("rotateend");this._pitchWithRotate&&this._fireEvent("pitchend");this._fireEvent("moveend");break;case "pending":this._state=
"disabled";this._unbind();break;default:this._state="disabled"}};xb.prototype.onMouseDown=function(a){if("enabled"===this._state){if("right"===this._button){if(this._eventButton=ka.mouseButton(a),this._eventButton!==(a.ctrlKey?0:2))return}else{if(a.ctrlKey||0!==ka.mouseButton(a))return;this._eventButton=0}ka.disableDrag();b.default.document.addEventListener("mousemove",this._onMouseMove,{capture:!0});b.default.document.addEventListener("mouseup",this._onMouseUp);b.default.addEventListener("blur",
this._onBlur);this._state="pending";this._inertia=[[pa.now(),this._map.getBearing()]];this._previousPos=ka.mousePos(this._el,a);this._center=this._map.transform.centerPoint;a.preventDefault()}};xb.prototype._onMouseMove=function(b){this._lastMoveEvent=b;this._pos=ka.mousePos(this._el,b);"pending"===this._state&&(this._state="active",this._fireEvent("rotatestart",b),this._fireEvent("movestart",b),this._pitchWithRotate&&this._fireEvent("pitchstart",b));this._frameId||(this._frameId=this._map._requestRenderFrame(this._onDragFrame))};
xb.prototype._onDragFrame=function(){this._frameId=null;var b=this._lastMoveEvent;if(b){var a=this._map.transform,c=this._previousPos,d=this._pos,f=a.bearing-.8*(c.x-d.x);c=a.pitch- -.5*(c.y-d.y);d=this._inertia;var e=d[d.length-1];this._drainInertiaBuffer();d.push([pa.now(),this._map._normalizeBearing(f,e[1])]);a.bearing=f;this._pitchWithRotate&&(this._fireEvent("pitch",b),a.pitch=c);this._fireEvent("rotate",b);this._fireEvent("move",b);delete this._lastMoveEvent;this._previousPos=this._pos}};xb.prototype._onMouseUp=
function(b){if(ka.mouseButton(b)===this._eventButton)switch(this._state){case "active":this._state="enabled";ka.suppressClick();this._unbind();this._deactivate();this._inertialRotate(b);break;case "pending":this._state="enabled",this._unbind()}};xb.prototype._onBlur=function(b){switch(this._state){case "active":this._state="enabled";this._unbind();this._deactivate();this._fireEvent("rotateend",b);this._pitchWithRotate&&this._fireEvent("pitchend",b);this._fireEvent("moveend",b);break;case "pending":this._state=
"enabled",this._unbind()}};xb.prototype._unbind=function(){b.default.document.removeEventListener("mousemove",this._onMouseMove,{capture:!0});b.default.document.removeEventListener("mouseup",this._onMouseUp);b.default.removeEventListener("blur",this._onBlur);ka.enableDrag()};xb.prototype._deactivate=function(){this._frameId&&(this._map._cancelRenderFrame(this._frameId),this._frameId=null);delete this._lastMoveEvent;delete this._previousPos};xb.prototype._inertialRotate=function(b){var a=this;this._fireEvent("rotateend",
b);this._drainInertiaBuffer();var c=this._map,d=c.getBearing(),f=this._inertia,e=function(){Math.abs(d)<a._bearingSnap?c.resetNorth({noMoveStart:!0},{originalEvent:b}):a._fireEvent("moveend",b);a._pitchWithRotate&&a._fireEvent("pitchend",b)};if(2>f.length)e();else{var k=f[0],g=f[f.length-1];f=c._normalizeBearing(d,f[f.length-2][1]);var h=g[1]-k[1],l=0>h?-1:1;k=(g[0]-k[0])/1E3;0!==h&&0!==k?(e=Math.abs(.25/k*h),180<e&&(e=180),k=e/180,f+=k/2*e*l,Math.abs(c._normalizeBearing(f,0))<this._bearingSnap&&
(f=c._normalizeBearing(0,f)),c.rotateTo(f,{duration:1E3*k,easing:hb,noMoveStart:!0},{originalEvent:b})):e()}};xb.prototype._fireEvent=function(a,c){return this._map.fire(new b.Event(a,c?{originalEvent:c}:{}))};xb.prototype._drainInertiaBuffer=function(){for(var b=this._inertia,a=pa.now();0<b.length&&160<a-b[0][0];)b.shift()};var df=b.bezier(0,0,.3,1),Hb=function(a){this._map=a;this._el=a.getCanvasContainer();this._state="disabled";b.bindAll(["_onMove","_onMouseUp","_onTouchEnd","_onBlur","_onDragFrame"],
this)};Hb.prototype.isEnabled=function(){return"disabled"!==this._state};Hb.prototype.isActive=function(){return"active"===this._state};Hb.prototype.enable=function(){this.isEnabled()||(this._el.classList.add("mapboxgl-touch-drag-pan"),this._state="enabled")};Hb.prototype.disable=function(){if(this.isEnabled())switch(this._el.classList.remove("mapboxgl-touch-drag-pan"),this._state){case "active":this._state="disabled";this._unbind();this._deactivate();this._fireEvent("dragend");this._fireEvent("moveend");
break;case "pending":this._state="disabled";this._unbind();break;default:this._state="disabled"}};Hb.prototype.onMouseDown=function(a){"enabled"===this._state&&(a.ctrlKey||0!==ka.mouseButton(a)||(ka.addEventListener(b.default.document,"mousemove",this._onMove,{capture:!0}),ka.addEventListener(b.default.document,"mouseup",this._onMouseUp),this._start(a)))};Hb.prototype.onTouchStart=function(a){"enabled"===this._state&&(1<a.touches.length||(ka.addEventListener(b.default.document,"touchmove",this._onMove,
{capture:!0,passive:!1}),ka.addEventListener(b.default.document,"touchend",this._onTouchEnd),this._start(a)))};Hb.prototype._start=function(a){b.default.addEventListener("blur",this._onBlur);this._state="pending";this._previousPos=ka.mousePos(this._el,a);this._inertia=[[pa.now(),this._previousPos]]};Hb.prototype._onMove=function(b){this._lastMoveEvent=b;b.preventDefault();this._pos=ka.mousePos(this._el,b);this._drainInertiaBuffer();this._inertia.push([pa.now(),this._pos]);"pending"===this._state&&
(this._state="active",this._fireEvent("dragstart",b),this._fireEvent("movestart",b));this._frameId||(this._frameId=this._map._requestRenderFrame(this._onDragFrame))};Hb.prototype._onDragFrame=function(){this._frameId=null;var b=this._lastMoveEvent;if(b){var a=this._map.transform;a.setLocationAtPoint(a.pointLocation(this._previousPos),this._pos);this._fireEvent("drag",b);this._fireEvent("move",b);this._previousPos=this._pos;delete this._lastMoveEvent}};Hb.prototype._onMouseUp=function(b){if(0===ka.mouseButton(b))switch(this._state){case "active":this._state=
"enabled";ka.suppressClick();this._unbind();this._deactivate();this._inertialPan(b);break;case "pending":this._state="enabled",this._unbind()}};Hb.prototype._onTouchEnd=function(b){switch(this._state){case "active":this._state="enabled";this._unbind();this._deactivate();this._inertialPan(b);break;case "pending":this._state="enabled",this._unbind()}};Hb.prototype._onBlur=function(b){switch(this._state){case "active":this._state="enabled";this._unbind();this._deactivate();this._fireEvent("dragend",
b);this._fireEvent("moveend",b);break;case "pending":this._state="enabled",this._unbind()}};Hb.prototype._unbind=function(){ka.removeEventListener(b.default.document,"touchmove",this._onMove,{capture:!0,passive:!1});ka.removeEventListener(b.default.document,"touchend",this._onTouchEnd);ka.removeEventListener(b.default.document,"mousemove",this._onMove,{capture:!0});ka.removeEventListener(b.default.document,"mouseup",this._onMouseUp);ka.removeEventListener(b.default,"blur",this._onBlur)};Hb.prototype._deactivate=
function(){this._frameId&&(this._map._cancelRenderFrame(this._frameId),this._frameId=null);delete this._lastMoveEvent;delete this._previousPos;delete this._pos};Hb.prototype._inertialPan=function(b){this._fireEvent("dragend",b);this._drainInertiaBuffer();var a=this._inertia;if(2>a.length)this._fireEvent("moveend",b);else{var c=a[a.length-1];a=a[0];var d=c[1].sub(a[1]),f=(c[0]-a[0])/1E3;0===f||c[1].equals(a[1])?this._fireEvent("moveend",b):(c=d.mult(.3/f),a=c.mag(),1400<a&&(a=1400,c._unit()._mult(a)),
a/=750,c=c.mult(-a/2),this._map.panBy(c,{duration:1E3*a,easing:df,noMoveStart:!0},{originalEvent:b}))}};Hb.prototype._fireEvent=function(a,c){return this._map.fire(new b.Event(a,c?{originalEvent:c}:{}))};Hb.prototype._drainInertiaBuffer=function(){for(var b=this._inertia,a=pa.now();0<b.length&&160<a-b[0][0];)b.shift()};var cb=function(a){this._map=a;this._el=a.getCanvasContainer();b.bindAll(["_onKeyDown"],this)};cb.prototype.isEnabled=function(){return!!this._enabled};cb.prototype.enable=function(){this.isEnabled()||
(this._el.addEventListener("keydown",this._onKeyDown,!1),this._enabled=!0)};cb.prototype.disable=function(){this.isEnabled()&&(this._el.removeEventListener("keydown",this._onKeyDown),this._enabled=!1)};cb.prototype._onKeyDown=function(b){if(!(b.altKey||b.ctrlKey||b.metaKey)){var a=0,c=0,d=0,f=0,e=0;switch(b.keyCode){case 61:case 107:case 171:case 187:a=1;break;case 189:case 109:case 173:a=-1;break;case 37:b.shiftKey?c=-1:(b.preventDefault(),f=-1);break;case 39:b.shiftKey?c=1:(b.preventDefault(),f=
1);break;case 38:b.shiftKey?d=1:(b.preventDefault(),e=-1);break;case 40:b.shiftKey?d=-1:(e=1,b.preventDefault());break;default:return}var k=this._map,g=k.getZoom();a={duration:300,delayEndEvents:500,easing:qa,zoom:a?Math.round(g)+a*(b.shiftKey?2:1):g,bearing:k.getBearing()+15*c,pitch:k.getPitch()+10*d,offset:[100*-f,100*-e],center:k.getCenter()};k.easeTo(a,{originalEvent:b})}};var hc=function(a){this._map=a;b.bindAll(["_onDblClick","_onZoomEnd"],this)};hc.prototype.isEnabled=function(){return!!this._enabled};
hc.prototype.isActive=function(){return!!this._active};hc.prototype.enable=function(){this.isEnabled()||(this._enabled=!0)};hc.prototype.disable=function(){this.isEnabled()&&(this._enabled=!1)};hc.prototype.onTouchStart=function(b){var a=this;this.isEnabled()&&(1<b.points.length||(this._tapped?(clearTimeout(this._tapped),this._tapped=null,this._zoom(b)):this._tapped=setTimeout(function(){a._tapped=null},300)))};hc.prototype.onDblClick=function(b){this.isEnabled()&&(b.originalEvent.preventDefault(),
this._zoom(b))};hc.prototype._zoom=function(b){this._active=!0;this._map.on("zoomend",this._onZoomEnd);this._map.zoomTo(this._map.getZoom()+(b.originalEvent.shiftKey?-1:1),{around:b.lngLat},b)};hc.prototype._onZoomEnd=function(){this._active=!1;this._map.off("zoomend",this._onZoomEnd)};var gc=b.bezier(0,0,.15,1),ub=function(a){this._map=a;this._el=a.getCanvasContainer();b.bindAll(["_onMove","_onEnd","_onTouchFrame"],this)};ub.prototype.isEnabled=function(){return!!this._enabled};ub.prototype.enable=
function(b){this.isEnabled()||(this._el.classList.add("mapboxgl-touch-zoom-rotate"),this._enabled=!0,this._aroundCenter=!!b&&"center"===b.around)};ub.prototype.disable=function(){this.isEnabled()&&(this._el.classList.remove("mapboxgl-touch-zoom-rotate"),this._enabled=!1)};ub.prototype.disableRotation=function(){this._rotationDisabled=!0};ub.prototype.enableRotation=function(){this._rotationDisabled=!1};ub.prototype.onStart=function(a){if(this.isEnabled()&&2===a.touches.length){var c=ka.mousePos(this._el,
a.touches[0]);a=ka.mousePos(this._el,a.touches[1]);this._startVec=c.sub(a);this._gestureIntent=void 0;this._inertia=[];ka.addEventListener(b.default.document,"touchmove",this._onMove,{passive:!1});ka.addEventListener(b.default.document,"touchend",this._onEnd)}};ub.prototype._getTouchEventData=function(b){var a=ka.mousePos(this._el,b.touches[0]);b=ka.mousePos(this._el,b.touches[1]);var c=a.sub(b);return{vec:c,center:a.add(b).div(2),scale:c.mag()/this._startVec.mag(),bearing:this._rotationDisabled?
0:180*c.angleWith(this._startVec)/Math.PI}};ub.prototype._onMove=function(a){if(2===a.touches.length){var c=this._getTouchEventData(a),d=c.vec,f=c.scale;c=c.bearing;this._gestureIntent||(f=.15<Math.abs(1-f),10<Math.abs(c)?this._gestureIntent="rotate":f&&(this._gestureIntent="zoom"),this._gestureIntent&&(this._map.fire(new b.Event(this._gestureIntent+"start",{originalEvent:a})),this._map.fire(new b.Event("movestart",{originalEvent:a})),this._startVec=d));this._lastTouchEvent=a;this._frameId||(this._frameId=
this._map._requestRenderFrame(this._onTouchFrame));a.preventDefault()}};ub.prototype._onTouchFrame=function(){this._frameId=null;var a=this._gestureIntent;if(a){var c=this._map.transform;this._startScale||(this._startScale=c.scale,this._startBearing=c.bearing);var d=this._getTouchEventData(this._lastTouchEvent),f=d.center,e=d.bearing;d=d.scale;var k=c.pointLocation(f),g=c.locationPoint(k);"rotate"===a&&(c.bearing=this._startBearing+e);c.zoom=c.scaleZoom(this._startScale*d);c.setLocationAtPoint(k,
g);this._map.fire(new b.Event(a,{originalEvent:this._lastTouchEvent}));this._map.fire(new b.Event("move",{originalEvent:this._lastTouchEvent}));this._drainInertiaBuffer();this._inertia.push([pa.now(),d,f])}};ub.prototype._onEnd=function(a){ka.removeEventListener(b.default.document,"touchmove",this._onMove,{passive:!1});ka.removeEventListener(b.default.document,"touchend",this._onEnd);var c=this._gestureIntent,d=this._startScale;if(this._frameId&&(this._map._cancelRenderFrame(this._frameId),this._frameId=
null),delete this._gestureIntent,delete this._startScale,delete this._startBearing,delete this._lastTouchEvent,c){this._map.fire(new b.Event(c+"end",{originalEvent:a}));this._drainInertiaBuffer();var f=this._inertia;c=this._map;if(2>f.length)c.snapToNorth({},{originalEvent:a});else{var e=f[f.length-1],k=f[0];f=c.transform.scaleZoom(d*e[1]);d=c.transform.scaleZoom(d*k[1]);var g=f-d;k=(e[0]-k[0])/1E3;e=e[2];0!==k&&f!==d?(g=.15*g/k,2.5<Math.abs(g)&&(g=0<g?2.5:-2.5),d=1E3*Math.abs(g/(12*.15)),f+=g*d/
2E3,0>f&&(f=0),c.easeTo({zoom:f,duration:d,easing:gc,around:this._aroundCenter?c.getCenter():c.unproject(e),noMoveStart:!0},{originalEvent:a})):c.snapToNorth({},{originalEvent:a})}}};ub.prototype._drainInertiaBuffer=function(){for(var b=this._inertia,a=pa.now();2<b.length&&160<a-b[0][0];)b.shift()};var ic={scrollZoom:Ub,boxZoom:Sb,dragRotate:xb,dragPan:Hb,keyboard:cb,doubleClickZoom:hc,touchZoomRotate:ub},Of=function(a){function c(c,d){a.call(this);this._zooming=this._moving=!1;this.transform=c;this._bearingSnap=
d.bearingSnap;b.bindAll(["_renderFrameCallback"],this)}return a&&(c.__proto__=a),c.prototype=Object.create(a&&a.prototype),c.prototype.constructor=c,c.prototype.getCenter=function(){return this.transform.center},c.prototype.setCenter=function(b,a){return this.jumpTo({center:b},a)},c.prototype.panBy=function(a,c,d){return a=b.default$1.convert(a).mult(-1),this.panTo(this.transform.center,b.extend({offset:a},c),d)},c.prototype.panTo=function(a,c,d){return this.easeTo(b.extend({center:a},c),d)},c.prototype.getZoom=
function(){return this.transform.zoom},c.prototype.setZoom=function(b,a){return this.jumpTo({zoom:b},a),this},c.prototype.zoomTo=function(a,c,d){return this.easeTo(b.extend({zoom:a},c),d)},c.prototype.zoomIn=function(b,a){return this.zoomTo(this.getZoom()+1,b,a),this},c.prototype.zoomOut=function(b,a){return this.zoomTo(this.getZoom()-1,b,a),this},c.prototype.getBearing=function(){return this.transform.bearing},c.prototype.setBearing=function(b,a){return this.jumpTo({bearing:b},a),this},c.prototype.rotateTo=
function(a,c,d){return this.easeTo(b.extend({bearing:a},c),d)},c.prototype.resetNorth=function(a,c){return this.rotateTo(0,b.extend({duration:1E3},a),c),this},c.prototype.snapToNorth=function(b,a){return Math.abs(this.getBearing())<this._bearingSnap?this.resetNorth(b,a):this},c.prototype.getPitch=function(){return this.transform.pitch},c.prototype.setPitch=function(b,a){return this.jumpTo({pitch:b},a),this},c.prototype.fitBounds=function(a,c,d){if("number"==typeof(c=b.extend({padding:{top:0,bottom:0,
right:0,left:0},offset:[0,0],maxZoom:this.transform.maxZoom},c)).padding){var f=c.padding;c.padding={top:f,bottom:f,right:f,left:f}}if(!b.default$10(Object.keys(c.padding).sort(function(b,a){return b<a?-1:b>a?1:0}),["bottom","left","right","top"]))return b.warnOnce("options.padding must be a positive number, or an Object with keys 'bottom', 'left', 'right', 'top'"),this;a=Pa.convert(a);var e=[(c.padding.left-c.padding.right)/2,(c.padding.top-c.padding.bottom)/2],k=Math.min(c.padding.right,c.padding.left);
f=Math.min(c.padding.top,c.padding.bottom);c.offset=[c.offset[0]+e[0],c.offset[1]+e[1]];var g=b.default$1.convert(c.offset);e=this.transform;var h=e.project(a.getNorthWest());a=e.project(a.getSouthEast());var l=a.sub(h);k=(e.width-2*k-2*Math.abs(g.x))/l.x;f=(e.height-2*f-2*Math.abs(g.y))/l.y;return 0>f||0>k?(b.warnOnce("Map cannot fit within canvas with the given bounds, padding, and/or offset."),this):(c.center=e.unproject(h.add(a).div(2)),c.zoom=Math.min(e.scaleZoom(e.scale*Math.min(k,f)),c.maxZoom),
c.bearing=0,c.linear?this.easeTo(c,d):this.flyTo(c,d))},c.prototype.jumpTo=function(a,c){this.stop();var d=this.transform,f=!1,e=!1,k=!1;return"zoom"in a&&d.zoom!==+a.zoom&&(f=!0,d.zoom=+a.zoom),void 0!==a.center&&(d.center=La.convert(a.center)),"bearing"in a&&d.bearing!==+a.bearing&&(e=!0,d.bearing=+a.bearing),"pitch"in a&&d.pitch!==+a.pitch&&(k=!0,d.pitch=+a.pitch),this.fire(new b.Event("movestart",c)).fire(new b.Event("move",c)),f&&this.fire(new b.Event("zoomstart",c)).fire(new b.Event("zoom",
c)).fire(new b.Event("zoomend",c)),e&&this.fire(new b.Event("rotatestart",c)).fire(new b.Event("rotate",c)).fire(new b.Event("rotateend",c)),k&&this.fire(new b.Event("pitchstart",c)).fire(new b.Event("pitch",c)).fire(new b.Event("pitchend",c)),this.fire(new b.Event("moveend",c))},c.prototype.easeTo=function(a,c){var d=this;this.stop();!1===(a=b.extend({offset:[0,0],duration:500,easing:b.ease},a)).animate&&(a.duration=0);var f=this.transform,e=this.getZoom(),k=this.getBearing(),g=this.getPitch(),h=
"zoom"in a?+a.zoom:e,l="bearing"in a?this._normalizeBearing(a.bearing,k):k,r="pitch"in a?+a.pitch:g,n=f.centerPoint.add(b.default$1.convert(a.offset)),q=f.pointLocation(n),u=La.convert(a.center||q);this._normalizeCenter(u);var v,p,z=f.project(q),w=f.project(u).sub(z),A=f.zoomScale(h-e);return a.around&&(v=La.convert(a.around),p=f.locationPoint(v)),this._zooming=h!==e,this._rotating=k!==l,this._pitching=r!==g,this._prepareEase(c,a.noMoveStart),clearTimeout(this._easeEndTimeoutID),this._ease(function(a){if(d._zooming&&
(f.zoom=b.number(e,h,a)),d._rotating&&(f.bearing=b.number(k,l,a)),d._pitching&&(f.pitch=b.number(g,r,a)),v)f.setLocationAtPoint(v,p);else{var q=f.zoomScale(f.zoom-e);a=f.unproject(z.add(w.mult(a*Math.pow(h>e?Math.min(2,A):Math.max(.5,A),1-a))).mult(q));f.setLocationAtPoint(f.renderWorldCopies?a.wrap():a,n)}d._fireMoveEvents(c)},function(){a.delayEndEvents?d._easeEndTimeoutID=setTimeout(function(){return d._afterEase(c)},a.delayEndEvents):d._afterEase(c)},a),this},c.prototype._prepareEase=function(a,
c){this._moving=!0;c||this.fire(new b.Event("movestart",a));this._zooming&&this.fire(new b.Event("zoomstart",a));this._rotating&&this.fire(new b.Event("rotatestart",a));this._pitching&&this.fire(new b.Event("pitchstart",a))},c.prototype._fireMoveEvents=function(a){this.fire(new b.Event("move",a));this._zooming&&this.fire(new b.Event("zoom",a));this._rotating&&this.fire(new b.Event("rotate",a));this._pitching&&this.fire(new b.Event("pitch",a))},c.prototype._afterEase=function(a){var c=this._zooming,
d=this._rotating,f=this._pitching;this._pitching=this._rotating=this._zooming=this._moving=!1;c&&this.fire(new b.Event("zoomend",a));d&&this.fire(new b.Event("rotateend",a));f&&this.fire(new b.Event("pitchend",a));this.fire(new b.Event("moveend",a))},c.prototype.flyTo=function(a,c){function d(b){b=(y*y-x*x+(b?-1:1)*J*J*t*t)/(2*(b?y:x)*J*t);return Math.log(Math.sqrt(b*b+1)-b)}function f(b){return(Math.exp(b)+Math.exp(-b))/2}var e=this;this.stop();a=b.extend({offset:[0,0],speed:1.2,curve:1.42,easing:b.ease},
a);var k=this.transform,g=this.getZoom(),h=this.getBearing(),l=this.getPitch(),r="zoom"in a?b.clamp(+a.zoom,k.minZoom,k.maxZoom):g,n="bearing"in a?this._normalizeBearing(a.bearing,h):h,q="pitch"in a?+a.pitch:l,u=k.zoomScale(r-g),v=k.centerPoint.add(b.default$1.convert(a.offset)),p=k.pointLocation(v),z=La.convert(a.center||p);this._normalizeCenter(z);var w=k.project(p),A=k.project(z).sub(w),m=a.curve,x=Math.max(k.width,k.height),y=x/u,t=A.mag();"minZoom"in a&&(r=b.clamp(Math.min(a.minZoom,g,r),k.minZoom,
k.maxZoom),r=x/k.zoomScale(r-g),m=Math.sqrt(r/t*2));var J=m*m,B=d(0),E=function(b){return f(B)/f(B+m*b)},I=function(b){var a=f(B);b=c=B+m*b;return x*((a*((Math.exp(b)-Math.exp(-b))/2/f(c))-(Math.exp(B)-Math.exp(-B))/2)/J)/t;var c},C=(d(1)-B)/m;if(1E-6>Math.abs(t)||!isFinite(C)){if(1E-6>Math.abs(x-y))return this.easeTo(a,c);var F=y<x?-1:1;C=Math.abs(Math.log(y/x))/m;I=function(){return 0};E=function(b){return Math.exp(F*m*b)}}a.duration="duration"in a?+a.duration:1E3*C/("screenSpeed"in a?+a.screenSpeed/
m:+a.speed);return a.maxDuration&&a.duration>a.maxDuration&&(a.duration=0),this._zooming=!0,this._rotating=h!==n,this._pitching=q!==l,this._prepareEase(c,!1),this._ease(function(a){var d=a*C,f=1/E(d);k.zoom=g+k.scaleZoom(f);e._rotating&&(k.bearing=b.number(h,n,a));e._pitching&&(k.pitch=b.number(l,q,a));a=k.unproject(w.add(A.mult(I(d))).mult(f));k.setLocationAtPoint(k.renderWorldCopies?a.wrap():a,v);e._fireMoveEvents(c)},function(){return e._afterEase(c)},a),this},c.prototype.isEasing=function(){return!!this._easeFrameId},
c.prototype.stop=function(){if(this._easeFrameId&&(this._cancelRenderFrame(this._easeFrameId),delete this._easeFrameId,delete this._onEaseFrame),this._onEaseEnd){var b=this._onEaseEnd;delete this._onEaseEnd;b.call(this)}return this},c.prototype._ease=function(b,a,c){!1===c.animate||0===c.duration?(b(1),a()):(this._easeStart=pa.now(),this._easeOptions=c,this._onEaseFrame=b,this._onEaseEnd=a,this._easeFrameId=this._requestRenderFrame(this._renderFrameCallback))},c.prototype._renderFrameCallback=function(){var b=
Math.min((pa.now()-this._easeStart)/this._easeOptions.duration,1);this._onEaseFrame(this._easeOptions.easing(b));1>b?this._easeFrameId=this._requestRenderFrame(this._renderFrameCallback):this.stop()},c.prototype._normalizeBearing=function(a,c){a=b.wrap(a,-180,180);var d=Math.abs(a-c);return Math.abs(a-360-c)<d&&(a-=360),Math.abs(a+360-c)<d&&(a+=360),a},c.prototype._normalizeCenter=function(b){var a=this.transform;a.renderWorldCopies&&!a.lngRange&&(a=b.lng-a.center.lng,b.lng+=180<a?-360:-180>a?360:
0)},c}(b.Evented),Db=function(a){void 0===a&&(a={});this.options=a;b.bindAll(["_updateEditLink","_updateData","_updateCompact"],this)};Db.prototype.getDefaultPosition=function(){return"bottom-right"};Db.prototype.onAdd=function(b){var a=this.options&&this.options.compact;return this._map=b,this._container=ka.create("div","mapboxgl-ctrl mapboxgl-ctrl-attrib"),a&&this._container.classList.add("mapboxgl-compact"),this._updateAttributions(),this._updateEditLink(),this._map.on("sourcedata",this._updateData),
this._map.on("moveend",this._updateEditLink),void 0===a&&(this._map.on("resize",this._updateCompact),this._updateCompact()),this._container};Db.prototype.onRemove=function(){ka.remove(this._container);this._map.off("sourcedata",this._updateData);this._map.off("moveend",this._updateEditLink);this._map.off("resize",this._updateCompact);this._map=void 0};Db.prototype._updateEditLink=function(){var b=this._editLink;b||(b=this._editLink=this._container.querySelector(".mapbox-improve-map"));var a=[{key:"owner",
value:this.styleOwner},{key:"id",value:this.styleId},{key:"access_token",value:rb.ACCESS_TOKEN}];if(b){var c=a.reduce(function(b,c,d){return c.value&&(b+=c.key+"\x3d"+c.value+(d<a.length-1?"\x26":"")),b},"?");b.href="https://www.mapbox.com/feedback/"+c+(this._map._hash?this._map._hash.getHashString(!0):"")}};Db.prototype._updateData=function(b){b&&"metadata"===b.sourceDataType&&(this._updateAttributions(),this._updateEditLink())};Db.prototype._updateAttributions=function(){if(this._map.style){var b=
[];if(this._map.style.stylesheet){var a=this._map.style.stylesheet;this.styleOwner=a.owner;this.styleId=a.id}a=this._map.style.sourceCaches;for(var c in a){var d=a[c].getSource();d.attribution&&0>b.indexOf(d.attribution)&&b.push(d.attribution)}b.sort(function(b,a){return b.length-a.length});(b=b.filter(function(a,c){for(c+=1;c<b.length;c++)if(0<=b[c].indexOf(a))return!1;return!0})).length?(this._container.innerHTML=b.join(" | "),this._container.classList.remove("mapboxgl-attrib-empty")):this._container.classList.add("mapboxgl-attrib-empty");
this._editLink=null}};Db.prototype._updateCompact=function(){640>=this._map.getCanvasContainer().offsetWidth?this._container.classList.add("mapboxgl-compact"):this._container.classList.remove("mapboxgl-compact")};var Id=function(){b.bindAll(["_updateLogo"],this)};Id.prototype.onAdd=function(b){this._map=b;this._container=ka.create("div","mapboxgl-ctrl");b=ka.create("a","mapboxgl-ctrl-logo");return b.target="_blank",b.href="https://www.mapbox.com/",b.setAttribute("aria-label","Mapbox logo"),this._container.appendChild(b),
this._container.style.display="none",this._map.on("sourcedata",this._updateLogo),this._updateLogo(),this._container};Id.prototype.onRemove=function(){ka.remove(this._container);this._map.off("sourcedata",this._updateLogo)};Id.prototype.getDefaultPosition=function(){return"bottom-left"};Id.prototype._updateLogo=function(b){b&&"metadata"!==b.sourceDataType||(this._container.style.display=this._logoRequired()?"block":"none")};Id.prototype._logoRequired=function(){if(this._map.style){var b=this._map.style.sourceCaches,
a;for(a in b)if(b[a].getSource().mapbox_logo)return!0;return!1}};var pc=function(){this._queue=[];this._id=0;this._currentlyRunning=this._cleared=!1};pc.prototype.add=function(b){var a=++this._id;return this._queue.push({callback:b,id:a,cancelled:!1}),a};pc.prototype.remove=function(b){var a=this._currentlyRunning,c=0;for(a=a?this._queue.concat(a):this._queue;c<a.length;c+=1){var d=a[c];if(d.id===b)return void(d.cancelled=!0)}};pc.prototype.run=function(){var b=this._currentlyRunning=this._queue;
this._queue=[];for(var a=0;a<b.length;a+=1){var c=b[a];if(!c.cancelled&&(c.callback(),this._cleared))break}this._currentlyRunning=this._cleared=!1};pc.prototype.clear=function(){this._currentlyRunning&&(this._cleared=!0);this._queue=[]};var vg=b.default.HTMLImageElement,Kc=b.default.HTMLElement,wg={center:[0,0],zoom:0,bearing:0,pitch:0,minZoom:0,maxZoom:22,interactive:!0,scrollZoom:!0,boxZoom:!0,dragRotate:!0,dragPan:!0,keyboard:!0,doubleClickZoom:!0,touchZoomRotate:!0,bearingSnap:7,hash:!1,attributionControl:!0,
failIfMajorPerformanceCaveat:!1,preserveDrawingBuffer:!1,trackResize:!0,renderWorldCopies:!0,refreshExpiredTiles:!0,maxTileCacheSize:null,transformRequest:null,fadeDuration:300},Jd=function(a){function c(c){if(null!=(c=b.extend({},wg,c)).minZoom&&null!=c.maxZoom&&c.minZoom>c.maxZoom)throw Error("maxZoom must be greater than minZoom");var d=new eb(c.minZoom,c.maxZoom,c.renderWorldCopies);a.call(this,d,c);this._interactive=c.interactive;this._maxTileCacheSize=c.maxTileCacheSize;this._failIfMajorPerformanceCaveat=
c.failIfMajorPerformanceCaveat;this._preserveDrawingBuffer=c.preserveDrawingBuffer;this._trackResize=c.trackResize;this._bearingSnap=c.bearingSnap;this._refreshExpiredTiles=c.refreshExpiredTiles;this._fadeDuration=c.fadeDuration;this._crossFadingFactor=1;this._collectResourceTiming=c.collectResourceTiming;this._renderTaskQueue=new pc;var f=c.transformRequest;if(this._transformRequest=f?function(b,a){return f(b,a)||{url:b}}:function(b){return{url:b}},"string"==typeof c.container){d=b.default.document.getElementById(c.container);
if(!d)throw Error("Container '"+c.container+"' not found.");this._container=d}else{if(!(c.container instanceof Kc))throw Error("Invalid type: 'container' must be a String or HTMLElement.");this._container=c.container}c.maxBounds&&this.setMaxBounds(c.maxBounds);b.bindAll("_onWindowOnline _onWindowResize _contextLost _contextRestored _update _render _onData _onDataLoading".split(" "),this);this._setupContainer();this._setupPainter();this.on("move",this._update.bind(this,!1));this.on("zoom",this._update.bind(this,
!0));void 0!==b.default&&(b.default.addEventListener("online",this._onWindowOnline,!1),b.default.addEventListener("resize",this._onWindowResize,!1));(function(b,a){var c=b.getCanvasContainer(),d=null,f=!1,e;for(e in ic)b[e]=new ic[e](b,a),a.interactive&&a[e]&&b[e].enable(a[e]);ka.addEventListener(c,"mouseout",function(a){b.fire(new za("mouseout",b,a))});ka.addEventListener(c,"mousedown",function(c){f=!0;var d=new za("mousedown",b,c);b.fire(d);d.defaultPrevented||(a.interactive&&!b.doubleClickZoom.isActive()&&
b.stop(),b.boxZoom.onMouseDown(c),b.boxZoom.isActive()||b.dragPan.isActive()||b.dragRotate.onMouseDown(c),b.boxZoom.isActive()||b.dragRotate.isActive()||b.dragPan.onMouseDown(c))});ka.addEventListener(c,"mouseup",function(a){var c=b.dragRotate.isActive();d&&!c&&b.fire(new za("contextmenu",b,d));d=null;f=!1;b.fire(new za("mouseup",b,a))});ka.addEventListener(c,"mousemove",function(a){if(!b.dragPan.isActive()&&!b.dragRotate.isActive()){for(var d=a.toElement||a.target;d&&d!==c;)d=d.parentNode;d===c&&
b.fire(new za("mousemove",b,a))}});ka.addEventListener(c,"mouseover",function(a){for(var d=a.toElement||a.target;d&&d!==c;)d=d.parentNode;d===c&&b.fire(new za("mouseover",b,a))});ka.addEventListener(c,"touchstart",function(c){var d=new Za("touchstart",b,c);b.fire(d);d.defaultPrevented||(a.interactive&&b.stop(),b.boxZoom.isActive()||b.dragRotate.isActive()||b.dragPan.onTouchStart(c),b.touchZoomRotate.onStart(c),b.doubleClickZoom.onTouchStart(d))},{passive:!1});ka.addEventListener(c,"touchmove",function(a){b.fire(new Za("touchmove",
b,a))},{passive:!1});ka.addEventListener(c,"touchend",function(a){b.fire(new Za("touchend",b,a))});ka.addEventListener(c,"touchcancel",function(a){b.fire(new Za("touchcancel",b,a))});ka.addEventListener(c,"click",function(a){b.fire(new za("click",b,a))});ka.addEventListener(c,"dblclick",function(a){a=new za("dblclick",b,a);b.fire(a);a.defaultPrevented||b.doubleClickZoom.onDblClick(a)});ka.addEventListener(c,"contextmenu",function(a){var c=b.dragRotate.isActive();f||c?f&&(d=a):b.fire(new za("contextmenu",
b,a));a.preventDefault()});ka.addEventListener(c,"wheel",function(a){var c=new $a("wheel",b,a);b.fire(c);c.defaultPrevented||b.scrollZoom.onWheel(a)},{passive:!1})})(this,c);(this._hash=c.hash&&(new fd).addTo(this))&&this._hash._onHashChange()||this.jumpTo({center:c.center,zoom:c.zoom,bearing:c.bearing,pitch:c.pitch});this.resize();c.style&&this.setStyle(c.style,{localIdeographFontFamily:c.localIdeographFontFamily});c.attributionControl&&this.addControl(new Db);this.addControl(new Id,c.logoPosition);
this.on("style.load",function(){this.transform.unmodified&&this.jumpTo(this.style.stylesheet)});this.on("data",this._onData);this.on("dataloading",this._onDataLoading)}a&&(c.__proto__=a);c.prototype=Object.create(a&&a.prototype);c.prototype.constructor=c;var d={showTileBoundaries:{configurable:!0},showCollisionBoxes:{configurable:!0},showOverdrawInspector:{configurable:!0},repaint:{configurable:!0},vertices:{configurable:!0}};return c.prototype.addControl=function(b,a){void 0===a&&b.getDefaultPosition&&
(a=b.getDefaultPosition());void 0===a&&(a="top-right");b=b.onAdd(this);var c=this._controlPositions[a];return-1!==a.indexOf("bottom")?c.insertBefore(b,c.firstChild):c.appendChild(b),this},c.prototype.removeControl=function(b){return b.onRemove(this),this},c.prototype.resize=function(a){var c=this._containerDimensions(),d=c[0];c=c[1];return this._resizeCanvas(d,c),this.transform.resize(d,c),this.painter.resize(d,c),this.fire(new b.Event("movestart",a)).fire(new b.Event("move",a)).fire(new b.Event("resize",
a)).fire(new b.Event("moveend",a))},c.prototype.getBounds=function(){var a=new Pa(this.transform.pointLocation(new b.default$1(0,this.transform.height)),this.transform.pointLocation(new b.default$1(this.transform.width,0)));return(this.transform.angle||this.transform.pitch)&&(a.extend(this.transform.pointLocation(new b.default$1(this.transform.size.x,0))),a.extend(this.transform.pointLocation(new b.default$1(0,this.transform.size.y)))),a},c.prototype.getMaxBounds=function(){return this.transform.latRange&&
2===this.transform.latRange.length&&this.transform.lngRange&&2===this.transform.lngRange.length?new Pa([this.transform.lngRange[0],this.transform.latRange[0]],[this.transform.lngRange[1],this.transform.latRange[1]]):null},c.prototype.setMaxBounds=function(b){b?(b=Pa.convert(b),this.transform.lngRange=[b.getWest(),b.getEast()],this.transform.latRange=[b.getSouth(),b.getNorth()],this.transform._constrain(),this._update()):null==b&&(this.transform.lngRange=null,this.transform.latRange=null,this._update());
return this},c.prototype.setMinZoom=function(b){if(0<=(b=null==b?0:b)&&b<=this.transform.maxZoom)return this.transform.minZoom=b,this._update(),this.getZoom()<b&&this.setZoom(b),this;throw Error("minZoom must be between 0 and the current maxZoom, inclusive");},c.prototype.getMinZoom=function(){return this.transform.minZoom},c.prototype.setMaxZoom=function(b){if((b=null==b?22:b)>=this.transform.minZoom)return this.transform.maxZoom=b,this._update(),this.getZoom()>b&&this.setZoom(b),this;throw Error("maxZoom must be greater than the current minZoom");
},c.prototype.getRenderWorldCopies=function(){return this.transform.renderWorldCopies},c.prototype.setRenderWorldCopies=function(b){return this.transform.renderWorldCopies=b,this._update(),this},c.prototype.getMaxZoom=function(){return this.transform.maxZoom},c.prototype.project=function(b){return this.transform.locationPoint(La.convert(b))},c.prototype.unproject=function(a){return this.transform.pointLocation(b.default$1.convert(a))},c.prototype.isMoving=function(){return this._moving||this.dragPan.isActive()||
this.dragRotate.isActive()||this.scrollZoom.isActive()},c.prototype.isZooming=function(){return this._zooming||this.scrollZoom.isActive()},c.prototype.isRotating=function(){return this._rotating||this.dragRotate.isActive()},c.prototype.on=function(b,c,d){var f,e=this;if(void 0===d)return a.prototype.on.call(this,b,c);var k=function(){if("mouseenter"===b||"mouseover"===b){var a=!1;return{layer:c,listener:d,delegates:{mousemove:function(f){var k=e.getLayer(c)?e.queryRenderedFeatures(f.point,{layers:[c]}):
[];k.length?a||(a=!0,d.call(e,new za(b,e,f.originalEvent,{features:k}))):a=!1},mouseout:function(){a=!1}}}}if("mouseleave"===b||"mouseout"===b){var k=!1;return{layer:c,listener:d,delegates:{mousemove:function(a){(e.getLayer(c)?e.queryRenderedFeatures(a.point,{layers:[c]}):[]).length?k=!0:k&&(k=!1,d.call(e,new za(b,e,a.originalEvent)))},mouseout:function(a){k&&(k=!1,d.call(e,new za(b,e,a.originalEvent)))}}}}return{layer:c,listener:d,delegates:(f={},f[b]=function(b){var a=e.getLayer(c)?e.queryRenderedFeatures(b.point,
{layers:[c]}):[];a.length&&(b.features=a,d.call(e,b),delete b.features)},f)}}(),g;for(g in this._delegatedListeners=this._delegatedListeners||{},this._delegatedListeners[b]=this._delegatedListeners[b]||[],this._delegatedListeners[b].push(k),k.delegates)e.on(g,k.delegates[g]);return this},c.prototype.off=function(b,c,d){if(void 0===d)return a.prototype.off.call(this,b,c);if(this._delegatedListeners&&this._delegatedListeners[b]){b=this._delegatedListeners[b];for(var f=0;f<b.length;f++){var e=b[f];if(e.layer===
c&&e.listener===d){for(var k in e.delegates)this.off(k,e.delegates[k]);return b.splice(f,1),this}}}return this},c.prototype.queryRenderedFeatures=function(a,c){var d;return 2===arguments.length?(a=arguments[0],c=arguments[1]):1===arguments.length&&((d=arguments[0])instanceof b.default$1||Array.isArray(d))?(a=arguments[0],c={}):1===arguments.length?(a=void 0,c=arguments[0]):(a=void 0,c={}),this.style?this.style.queryRenderedFeatures(this._makeQueryGeometry(a),c,this.transform):[]},c.prototype._makeQueryGeometry=
function(a){var c=this;(void 0===a&&(a=[b.default$1.convert([0,0]),b.default$1.convert([this.transform.width,this.transform.height])]),a instanceof b.default$1||"number"==typeof a[0])?a=[b.default$1.convert(a)]:(a=[b.default$1.convert(a[0]),b.default$1.convert(a[1])],a=[a[0],new b.default$1(a[1].x,a[0].y),a[1],new b.default$1(a[0].x,a[1].y),a[0]]);return{viewport:a,worldCoordinate:a.map(function(b){return c.transform.pointCoordinate(b)})}},c.prototype.querySourceFeatures=function(b,a){return this.style.querySourceFeatures(b,
a)},c.prototype.setStyle=function(a,c){if((!c||!1!==c.diff&&!c.localIdeographFontFamily)&&this.style&&a&&"object"==typeof a)try{return this.style.setState(a)&&this._update(!0),this}catch(Sc){b.warnOnce("Unable to perform style diff: "+(Sc.message||Sc.error||Sc)+".  Rebuilding the style from scratch.")}return this.style&&(this.style.setEventedParent(null),this.style._remove()),a?(this.style=new je(this,c||{}),this.style.setEventedParent(this,{style:this.style}),"string"==typeof a?this.style.loadURL(a):
this.style.loadJSON(a),this):(delete this.style,this)},c.prototype.getStyle=function(){if(this.style)return this.style.serialize()},c.prototype.isStyleLoaded=function(){return this.style?this.style.loaded():b.warnOnce("There is no style added to the map.")},c.prototype.addSource=function(b,a){return this.style.addSource(b,a),this._update(!0),this},c.prototype.isSourceLoaded=function(a){var c=this.style&&this.style.sourceCaches[a];if(void 0!==c)return c.loaded();this.fire(new b.ErrorEvent(Error("There is no source with ID '"+
a+"'")))},c.prototype.areTilesLoaded=function(){var b=this.style&&this.style.sourceCaches,a;for(a in b){var c=b[a]._tiles,d;for(d in c){var f=c[d];if("loaded"!==f.state&&"errored"!==f.state)return!1}}return!0},c.prototype.addSourceType=function(b,a,c){return this.style.addSourceType(b,a,c)},c.prototype.removeSource=function(b){return this.style.removeSource(b),this._update(!0),this},c.prototype.getSource=function(b){return this.style.getSource(b)},c.prototype.addImage=function(a,c,d){void 0===d&&
(d={});var f=d.pixelRatio;void 0===f&&(f=1);d=d.sdf;if(void 0===d&&(d=!1),c instanceof vg)c=pa.getImageData(c),this.style.addImage(a,{data:new b.RGBAImage({width:c.width,height:c.height},c.data),pixelRatio:f,sdf:d});else{if(void 0===c.width||void 0===c.height)return this.fire(new b.ErrorEvent(Error("Invalid arguments to map.addImage(). The second argument must be an `HTMLImageElement`, `ImageData`, or object with `width`, `height`, and `data` properties with the same format as `ImageData`")));this.style.addImage(a,
{data:new b.RGBAImage({width:c.width,height:c.height},c.data.slice(0)),pixelRatio:f,sdf:d})}},c.prototype.hasImage=function(a){return a?!!this.style.getImage(a):(this.fire(new b.ErrorEvent(Error("Missing required image id"))),!1)},c.prototype.removeImage=function(b){this.style.removeImage(b)},c.prototype.loadImage=function(a,c){b.getImage(this._transformRequest(a,b.ResourceType.Image),c)},c.prototype.addLayer=function(b,a){return this.style.addLayer(b,a),this._update(!0),this},c.prototype.moveLayer=
function(b,a){return this.style.moveLayer(b,a),this._update(!0),this},c.prototype.removeLayer=function(b){return this.style.removeLayer(b),this._update(!0),this},c.prototype.getLayer=function(b){return this.style.getLayer(b)},c.prototype.setFilter=function(b,a){return this.style.setFilter(b,a),this._update(!0),this},c.prototype.setLayerZoomRange=function(b,a,c){return this.style.setLayerZoomRange(b,a,c),this._update(!0),this},c.prototype.getFilter=function(b){return this.style.getFilter(b)},c.prototype.setPaintProperty=
function(b,a,c){return this.style.setPaintProperty(b,a,c),this._update(!0),this},c.prototype.getPaintProperty=function(b,a){return this.style.getPaintProperty(b,a)},c.prototype.setLayoutProperty=function(b,a,c){return this.style.setLayoutProperty(b,a,c),this._update(!0),this},c.prototype.getLayoutProperty=function(b,a){return this.style.getLayoutProperty(b,a)},c.prototype.setLight=function(b){return this.style.setLight(b),this._update(!0),this},c.prototype.getLight=function(){return this.style.getLight()},
c.prototype.getContainer=function(){return this._container},c.prototype.getCanvasContainer=function(){return this._canvasContainer},c.prototype.getCanvas=function(){return this._canvas},c.prototype._containerDimensions=function(){var b=0,a=0;return this._container&&(b=this._container.offsetWidth||400,a=this._container.offsetHeight||300),[b,a]},c.prototype._setupContainer=function(){var b=this._container;b.classList.add("mapboxgl-map");(this._missingCSSContainer=ka.create("div","mapboxgl-missing-css",
b)).innerHTML="Missing Mapbox GL JS CSS";var a=this._canvasContainer=ka.create("div","mapboxgl-canvas-container",b);this._interactive&&a.classList.add("mapboxgl-interactive");this._canvas=ka.create("canvas","mapboxgl-canvas",a);this._canvas.style.position="absolute";this._canvas.addEventListener("webglcontextlost",this._contextLost,!1);this._canvas.addEventListener("webglcontextrestored",this._contextRestored,!1);this._canvas.setAttribute("tabindex","0");this._canvas.setAttribute("aria-label","Map");
a=this._containerDimensions();this._resizeCanvas(a[0],a[1]);var c=this._controlContainer=ka.create("div","mapboxgl-control-container",b),d=this._controlPositions={};["top-left","top-right","bottom-left","bottom-right"].forEach(function(b){d[b]=ka.create("div","mapboxgl-ctrl-"+b,c)})},c.prototype._resizeCanvas=function(a,c){var d=b.default.devicePixelRatio||1;this._canvas.width=d*a;this._canvas.height=d*c;this._canvas.style.width=a+"px";this._canvas.style.height=c+"px"},c.prototype._setupPainter=function(){var a=
b.extend({failIfMajorPerformanceCaveat:this._failIfMajorPerformanceCaveat,preserveDrawingBuffer:this._preserveDrawingBuffer},Aa.webGLContextAttributes);(a=this._canvas.getContext("webgl",a)||this._canvas.getContext("experimental-webgl",a))?this.painter=new Gb(a,this.transform):this.fire(new b.ErrorEvent(Error("Failed to initialize WebGL")))},c.prototype._contextLost=function(a){a.preventDefault();this._frameId&&(pa.cancelFrame(this._frameId),this._frameId=null);this.fire(new b.Event("webglcontextlost",
{originalEvent:a}))},c.prototype._contextRestored=function(a){this._setupPainter();this.resize();this._update();this.fire(new b.Event("webglcontextrestored",{originalEvent:a}))},c.prototype.loaded=function(){return!this._styleDirty&&!this._sourcesDirty&&!(!this.style||!this.style.loaded())},c.prototype._update=function(b){this.style&&(this._styleDirty=this._styleDirty||b,this._sourcesDirty=!0,this._rerender())},c.prototype._requestRenderFrame=function(b){return this._update(),this._renderTaskQueue.add(b)},
c.prototype._cancelRenderFrame=function(b){this._renderTaskQueue.remove(b)},c.prototype._render=function(){this._renderTaskQueue.run();var a=!1;if(this.style&&this._styleDirty){this._styleDirty=!1;var c=this.transform.zoom,d=pa.now();this.style.zoomHistory.update(c,d);c=new b.default$16(c,{now:d,fadeDuration:this._fadeDuration,zoomHistory:this.style.zoomHistory,transition:this.style.getTransition()});d=c.crossFadingFactor();1===d&&d===this._crossFadingFactor||(a=!0,this._crossFadingFactor=d);this.style.update(c)}return this.style&&
this._sourcesDirty&&(this._sourcesDirty=!1,this.style._updateSources(this.transform)),this._placementDirty=this.style&&this.style._updatePlacement(this.painter.transform,this.showCollisionBoxes,this._fadeDuration),this.painter.render(this.style,{showTileBoundaries:this.showTileBoundaries,showOverdrawInspector:this._showOverdrawInspector,rotating:this.isRotating(),zooming:this.isZooming(),fadeDuration:this._fadeDuration}),this.fire(new b.Event("render")),this.loaded()&&!this._loaded&&(this._loaded=
!0,this.fire(new b.Event("load"))),this.style&&(this.style.hasTransitions()||a)&&(this._styleDirty=!0),(this._sourcesDirty||this._repaint||this._styleDirty||this._placementDirty)&&this._rerender(),this},c.prototype.remove=function(){this._hash&&this._hash.remove();pa.cancelFrame(this._frameId);this._renderTaskQueue.clear();this._frameId=null;this.setStyle(null);void 0!==b.default&&(b.default.removeEventListener("resize",this._onWindowResize,!1),b.default.removeEventListener("online",this._onWindowOnline,
!1));var a=this.painter.context.gl.getExtension("WEBGL_lose_context");a&&a.loseContext();sa(this._canvasContainer);sa(this._controlContainer);sa(this._missingCSSContainer);this._container.classList.remove("mapboxgl-map");this.fire(new b.Event("remove"))},c.prototype._rerender=function(){var b=this;this.style&&!this._frameId&&(this._frameId=pa.frame(function(){b._frameId=null;b._render()}))},c.prototype._onWindowOnline=function(){this._update()},c.prototype._onWindowResize=function(){this._trackResize&&
this.stop().resize()._update()},d.showTileBoundaries.get=function(){return!!this._showTileBoundaries},d.showTileBoundaries.set=function(b){this._showTileBoundaries!==b&&(this._showTileBoundaries=b,this._update())},d.showCollisionBoxes.get=function(){return!!this._showCollisionBoxes},d.showCollisionBoxes.set=function(b){this._showCollisionBoxes!==b&&(this._showCollisionBoxes=b,b?this.style._generateCollisionBoxes():this._update())},d.showOverdrawInspector.get=function(){return!!this._showOverdrawInspector},
d.showOverdrawInspector.set=function(b){this._showOverdrawInspector!==b&&(this._showOverdrawInspector=b,this._update())},d.repaint.get=function(){return!!this._repaint},d.repaint.set=function(b){this._repaint=b;this._update()},d.vertices.get=function(){return!!this._vertices},d.vertices.set=function(b){this._vertices=b;this._update()},c.prototype._onData=function(a){this._update("style"===a.dataType);this.fire(new b.Event(a.dataType+"data",a))},c.prototype._onDataLoading=function(a){this.fire(new b.Event(a.dataType+
"dataloading",a))},Object.defineProperties(c.prototype,d),c}(Of),Vb={showCompass:!0,showZoom:!0},qc=function(a){var c=this;this.options=b.extend({},Vb,a);this._container=ka.create("div","mapboxgl-ctrl mapboxgl-ctrl-group");this._container.addEventListener("contextmenu",function(b){return b.preventDefault()});this.options.showZoom&&(this._zoomInButton=this._createButton("mapboxgl-ctrl-icon mapboxgl-ctrl-zoom-in","Zoom In",function(){return c._map.zoomIn()}),this._zoomOutButton=this._createButton("mapboxgl-ctrl-icon mapboxgl-ctrl-zoom-out",
"Zoom Out",function(){return c._map.zoomOut()}));this.options.showCompass&&(b.bindAll(["_rotateCompassArrow"],this),this._compass=this._createButton("mapboxgl-ctrl-icon mapboxgl-ctrl-compass","Reset North",function(){return c._map.resetNorth()}),this._compassArrow=ka.create("span","mapboxgl-ctrl-compass-arrow",this._compass))};qc.prototype._rotateCompassArrow=function(){this._compassArrow.style.transform="rotate("+180/Math.PI*this._map.transform.angle+"deg)"};qc.prototype.onAdd=function(b){return this._map=
b,this.options.showCompass&&(this._map.on("rotate",this._rotateCompassArrow),this._rotateCompassArrow(),this._handler=new xb(b,{button:"left",element:this._compass}),this._handler.enable()),this._container};qc.prototype.onRemove=function(){ka.remove(this._container);this.options.showCompass&&(this._map.off("rotate",this._rotateCompassArrow),this._handler.disable(),delete this._handler);delete this._map};qc.prototype._createButton=function(b,a,c){b=ka.create("button",b,this._container);return b.type=
"button",b.setAttribute("aria-label",a),b.addEventListener("click",c),b};var Ac={center:"translate(-50%,-50%)",top:"translate(-50%,0)","top-left":"translate(0,0)","top-right":"translate(-100%,0)",bottom:"translate(-50%,-100%)","bottom-left":"translate(0,-100%)","bottom-right":"translate(-100%,-100%)",left:"translate(0,-50%)",right:"translate(-100%,-50%)"},Ab=function(a){if((arguments[0]instanceof b.default.HTMLElement||2===arguments.length)&&(a=b.extend({element:a},arguments[1])),b.bindAll(["_update",
"_onMapClick"],this),this._anchor=a&&a.anchor||"center",this._color=a&&a.color||"#3FB1CE",a&&a.element)this._element=a.element,this._offset=b.default$1.convert(a&&a.offset||[0,0]);else{this._defaultMarker=!0;this._element=ka.create("div");var c=ka.createNS("http://www.w3.org/2000/svg","svg");c.setAttributeNS(null,"height","41px");c.setAttributeNS(null,"width","27px");c.setAttributeNS(null,"viewBox","0 0 27 41");var d=ka.createNS("http://www.w3.org/2000/svg","g");d.setAttributeNS(null,"stroke","none");
d.setAttributeNS(null,"stroke-width","1");d.setAttributeNS(null,"fill","none");d.setAttributeNS(null,"fill-rule","evenodd");d=ka.createNS("http://www.w3.org/2000/svg","g");d.setAttributeNS(null,"fill-rule","nonzero");var f=ka.createNS("http://www.w3.org/2000/svg","g");f.setAttributeNS(null,"transform","translate(3.0, 29.0)");f.setAttributeNS(null,"fill","#000000");for(var e=0,k=[{rx:"10.5",ry:"5.25002273"},{rx:"10.5",ry:"5.25002273"},{rx:"9.5",ry:"4.77275007"},{rx:"8.5",ry:"4.29549936"},{rx:"7.5",
ry:"3.81822308"},{rx:"6.5",ry:"3.34094679"},{rx:"5.5",ry:"2.86367051"},{rx:"4.5",ry:"2.38636864"}];e<k.length;e+=1){var g=k[e],h=ka.createNS("http://www.w3.org/2000/svg","ellipse");h.setAttributeNS(null,"opacity","0.04");h.setAttributeNS(null,"cx","10.5");h.setAttributeNS(null,"cy","5.80029008");h.setAttributeNS(null,"rx",g.rx);h.setAttributeNS(null,"ry",g.ry);f.appendChild(h)}e=ka.createNS("http://www.w3.org/2000/svg","g");e.setAttributeNS(null,"fill",this._color);k=ka.createNS("http://www.w3.org/2000/svg",
"path");k.setAttributeNS(null,"d","M27,13.5 C27,19.074644 20.250001,27.000002 14.75,34.500002 C14.016665,35.500004 12.983335,35.500004 12.25,34.500002 C6.7499993,27.000002 0,19.222562 0,13.5 C0,6.0441559 6.0441559,0 13.5,0 C20.955844,0 27,6.0441559 27,13.5 Z");e.appendChild(k);k=ka.createNS("http://www.w3.org/2000/svg","g");k.setAttributeNS(null,"opacity","0.25");k.setAttributeNS(null,"fill","#000000");g=ka.createNS("http://www.w3.org/2000/svg","path");g.setAttributeNS(null,"d","M13.5,0 C6.0441559,0 0,6.0441559 0,13.5 C0,19.222562 6.7499993,27 12.25,34.5 C13,35.522727 14.016664,35.500004 14.75,34.5 C20.250001,27 27,19.074644 27,13.5 C27,6.0441559 20.955844,0 13.5,0 Z M13.5,1 C20.415404,1 26,6.584596 26,13.5 C26,15.898657 24.495584,19.181431 22.220703,22.738281 C19.945823,26.295132 16.705119,30.142167 13.943359,33.908203 C13.743445,34.180814 13.612715,34.322738 13.5,34.441406 C13.387285,34.322738 13.256555,34.180814 13.056641,33.908203 C10.284481,30.127985 7.4148684,26.314159 5.015625,22.773438 C2.6163816,19.232715 1,15.953538 1,13.5 C1,6.584596 6.584596,1 13.5,1 Z");
k.appendChild(g);g=ka.createNS("http://www.w3.org/2000/svg","g");g.setAttributeNS(null,"transform","translate(6.0, 7.0)");g.setAttributeNS(null,"fill","#FFFFFF");h=ka.createNS("http://www.w3.org/2000/svg","g");h.setAttributeNS(null,"transform","translate(8.0, 8.0)");var l=ka.createNS("http://www.w3.org/2000/svg","circle");l.setAttributeNS(null,"fill","#000000");l.setAttributeNS(null,"opacity","0.25");l.setAttributeNS(null,"cx","5.5");l.setAttributeNS(null,"cy","5.5");l.setAttributeNS(null,"r","5.4999962");
var r=ka.createNS("http://www.w3.org/2000/svg","circle");r.setAttributeNS(null,"fill","#FFFFFF");r.setAttributeNS(null,"cx","5.5");r.setAttributeNS(null,"cy","5.5");r.setAttributeNS(null,"r","5.4999962");h.appendChild(l);h.appendChild(r);d.appendChild(f);d.appendChild(e);d.appendChild(k);d.appendChild(g);d.appendChild(h);c.appendChild(d);this._element.appendChild(c);this._offset=b.default$1.convert(a&&a.offset||[0,-14])}this._element.classList.add("mapboxgl-marker");this._popup=null};Ab.prototype.addTo=
function(b){return this.remove(),this._map=b,b.getCanvasContainer().appendChild(this._element),b.on("move",this._update),b.on("moveend",this._update),this._update(),this._map.on("click",this._onMapClick),this};Ab.prototype.remove=function(){return this._map&&(this._map.off("click",this._onMapClick),this._map.off("move",this._update),this._map.off("moveend",this._update),delete this._map),ka.remove(this._element),this._popup&&this._popup.remove(),this};Ab.prototype.getLngLat=function(){return this._lngLat};
Ab.prototype.setLngLat=function(b){return this._lngLat=La.convert(b),this._pos=null,this._popup&&this._popup.setLngLat(this._lngLat),this._update(),this};Ab.prototype.getElement=function(){return this._element};Ab.prototype.setPopup=function(b){if(this._popup&&(this._popup.remove(),this._popup=null),b){if(!("offset"in b.options)){var a=Math.sqrt(Math.pow(13.5,2)/2);b.options.offset=this._defaultMarker?{top:[0,0],"top-left":[0,0],"top-right":[0,0],bottom:[0,-38.1],"bottom-left":[a,-1*(24.6+a)],"bottom-right":[-a,
-1*(24.6+a)],left:[13.5,-24.6],right:[-13.5,-24.6]}:this._offset}this._popup=b;this._lngLat&&this._popup.setLngLat(this._lngLat)}return this};Ab.prototype._onMapClick=function(b){b=b.originalEvent.target;var a=this._element;this._popup&&(b===a||a.contains(b))&&this.togglePopup()};Ab.prototype.getPopup=function(){return this._popup};Ab.prototype.togglePopup=function(){var b=this._popup;return b?(b.isOpen()?b.remove():b.addTo(this._map),this):this};Ab.prototype._update=function(b){this._map&&(this._map.transform.renderWorldCopies&&
(this._lngLat=V(this._lngLat,this._pos,this._map.transform)),this._pos=this._map.project(this._lngLat)._add(this._offset),b&&"moveend"!==b.type||(this._pos=this._pos.round()),ka.setTransform(this._element,Ac[this._anchor]+" translate("+this._pos.x+"px, "+this._pos.y+"px)"),ia(this._element,this._anchor,"marker"))};Ab.prototype.getOffset=function(){return this._offset};Ab.prototype.setOffset=function(a){return this._offset=b.default$1.convert(a),this._update(),this};var jc,bc={positionOptions:{enableHighAccuracy:!1,
maximumAge:0,timeout:6E3},fitBoundsOptions:{maxZoom:15},trackUserLocation:!1,showUserLocation:!0},gd=function(a){function c(c){a.call(this);this.options=b.extend({},bc,c);b.bindAll("_onSuccess _onError _finish _setupUI _updateCamera _updateMarker".split(" "),this)}return a&&(c.__proto__=a),c.prototype=Object.create(a&&a.prototype),c.prototype.constructor=c,c.prototype.onAdd=function(a){var c;return this._map=a,this._container=ka.create("div","mapboxgl-ctrl mapboxgl-ctrl-group"),c=this._setupUI,void 0!==
jc?c(jc):void 0!==b.default.navigator.permissions?b.default.navigator.permissions.query({name:"geolocation"}).then(function(b){jc="denied"!==b.state;c(jc)}):(jc=!!b.default.navigator.geolocation,c(jc)),this._container},c.prototype.onRemove=function(){void 0!==this._geolocationWatchID&&(b.default.navigator.geolocation.clearWatch(this._geolocationWatchID),this._geolocationWatchID=void 0);this.options.showUserLocation&&this._userLocationDotMarker.remove();ka.remove(this._container);this._map=void 0},
c.prototype._onSuccess=function(a){if(this.options.trackUserLocation)switch(this._lastKnownPosition=a,this._watchState){case "WAITING_ACTIVE":case "ACTIVE_LOCK":case "ACTIVE_ERROR":this._watchState="ACTIVE_LOCK";this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-waiting");this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active-error");this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active");break;case "BACKGROUND":case "BACKGROUND_ERROR":this._watchState="BACKGROUND",
this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background-error"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-background")}this.options.showUserLocation&&"OFF"!==this._watchState&&this._updateMarker(a);this.options.trackUserLocation&&"ACTIVE_LOCK"!==this._watchState||this._updateCamera(a);this.options.showUserLocation&&this._dotElement.classList.remove("mapboxgl-user-location-dot-stale");this.fire(new b.Event("geolocate",
a));this._finish()},c.prototype._updateCamera=function(b){var a=new La(b.coords.longitude,b.coords.latitude);this._map.fitBounds(a.toBounds(b.coords.accuracy),this.options.fitBoundsOptions,{geolocateSource:!0})},c.prototype._updateMarker=function(b){b?this._userLocationDotMarker.setLngLat([b.coords.longitude,b.coords.latitude]).addTo(this._map):this._userLocationDotMarker.remove()},c.prototype._onError=function(a){if(this.options.trackUserLocation)if(1===a.code)this._watchState="OFF",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-waiting"),
this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active-error"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background-error"),void 0!==this._geolocationWatchID&&this._clearWatch();else switch(this._watchState){case "WAITING_ACTIVE":this._watchState="ACTIVE_ERROR";this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active");
this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active-error");break;case "ACTIVE_LOCK":this._watchState="ACTIVE_ERROR";this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active");this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active-error");this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting");break;case "BACKGROUND":this._watchState="BACKGROUND_ERROR",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-background-error"),
this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting")}"OFF"!==this._watchState&&this.options.showUserLocation&&this._dotElement.classList.add("mapboxgl-user-location-dot-stale");this.fire(new b.Event("error",a));this._finish()},c.prototype._finish=function(){this._timeoutId&&clearTimeout(this._timeoutId);this._timeoutId=void 0},c.prototype._setupUI=function(a){var c=this;!1!==a&&(this._container.addEventListener("contextmenu",function(b){return b.preventDefault()}),this._geolocateButton=
ka.create("button","mapboxgl-ctrl-icon mapboxgl-ctrl-geolocate",this._container),this._geolocateButton.type="button",this._geolocateButton.setAttribute("aria-label","Geolocate"),this.options.trackUserLocation&&(this._geolocateButton.setAttribute("aria-pressed","false"),this._watchState="OFF"),this.options.showUserLocation&&(this._dotElement=ka.create("div","mapboxgl-user-location-dot"),this._userLocationDotMarker=new Ab(this._dotElement),this.options.trackUserLocation&&(this._watchState="OFF")),this._geolocateButton.addEventListener("click",
this.trigger.bind(this)),this._setup=!0,this.options.trackUserLocation&&this._map.on("movestart",function(a){a.geolocateSource||"ACTIVE_LOCK"!==c._watchState||(c._watchState="BACKGROUND",c._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-background"),c._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active"),c.fire(new b.Event("trackuserlocationend")))}))},c.prototype.trigger=function(){if(!this._setup)return b.warnOnce("Geolocate control triggered before added to a map"),!1;if(this.options.trackUserLocation){switch(this._watchState){case "OFF":this._watchState=
"WAITING_ACTIVE";this.fire(new b.Event("trackuserlocationstart"));break;case "WAITING_ACTIVE":case "ACTIVE_LOCK":case "ACTIVE_ERROR":case "BACKGROUND_ERROR":this._watchState="OFF";this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-waiting");this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active");this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active-error");this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background");this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background-error");
this.fire(new b.Event("trackuserlocationend"));break;case "BACKGROUND":this._watchState="ACTIVE_LOCK",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background"),this._lastKnownPosition&&this._updateCamera(this._lastKnownPosition),this.fire(new b.Event("trackuserlocationstart"))}switch(this._watchState){case "WAITING_ACTIVE":this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting");this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active");break;case "ACTIVE_LOCK":this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active");
break;case "ACTIVE_ERROR":this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting");this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active-error");break;case "BACKGROUND":this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-background");break;case "BACKGROUND_ERROR":this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-background-error")}"OFF"===this._watchState&&void 0!==this._geolocationWatchID?
this._clearWatch():void 0===this._geolocationWatchID&&(this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.setAttribute("aria-pressed","true"),this._geolocationWatchID=b.default.navigator.geolocation.watchPosition(this._onSuccess,this._onError,this.options.positionOptions))}else b.default.navigator.geolocation.getCurrentPosition(this._onSuccess,this._onError,this.options.positionOptions),this._timeoutId=setTimeout(this._finish,1E4);return!0},c.prototype._clearWatch=
function(){b.default.navigator.geolocation.clearWatch(this._geolocationWatchID);this._geolocationWatchID=void 0;this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-waiting");this._geolocateButton.setAttribute("aria-pressed","false");this.options.showUserLocation&&this._updateMarker(null)},c}(b.Evented),hd={maxWidth:100,unit:"metric"},vc=function(a){this.options=b.extend({},hd,a);b.bindAll(["_onMove","setUnit"],this)};vc.prototype.getDefaultPosition=function(){return"bottom-left"};vc.prototype._onMove=
function(){Ka(this._map,this._container,this.options)};vc.prototype.onAdd=function(b){return this._map=b,this._container=ka.create("div","mapboxgl-ctrl mapboxgl-ctrl-scale",b.getContainer()),this._map.on("move",this._onMove),this._onMove(),this._container};vc.prototype.onRemove=function(){ka.remove(this._container);this._map.off("move",this._onMove);this._map=void 0};vc.prototype.setUnit=function(b){this.options.unit=b;Ka(this._map,this._container,this.options)};var cc=function(){this._fullscreen=
!1;b.bindAll(["_onClickFullscreen","_changeIcon"],this);"onfullscreenchange"in b.default.document?this._fullscreenchange="fullscreenchange":"onmozfullscreenchange"in b.default.document?this._fullscreenchange="mozfullscreenchange":"onwebkitfullscreenchange"in b.default.document?this._fullscreenchange="webkitfullscreenchange":"onmsfullscreenchange"in b.default.document&&(this._fullscreenchange="MSFullscreenChange");this._className="mapboxgl-ctrl"};cc.prototype.onAdd=function(a){return this._map=a,this._mapContainer=
this._map.getContainer(),this._container=ka.create("div",this._className+" mapboxgl-ctrl-group"),this._checkFullscreenSupport()?this._setupUI():(this._container.style.display="none",b.warnOnce("This device does not support fullscreen mode.")),this._container};cc.prototype.onRemove=function(){ka.remove(this._container);this._map=null;b.default.document.removeEventListener(this._fullscreenchange,this._changeIcon)};cc.prototype._checkFullscreenSupport=function(){return!!(b.default.document.fullscreenEnabled||
b.default.document.mozFullScreenEnabled||b.default.document.msFullscreenEnabled||b.default.document.webkitFullscreenEnabled)};cc.prototype._setupUI=function(){var a=this._fullscreenButton=ka.create("button",this._className+"-icon "+this._className+"-fullscreen",this._container);a.setAttribute("aria-label","Toggle fullscreen");a.type="button";this._fullscreenButton.addEventListener("click",this._onClickFullscreen);b.default.document.addEventListener(this._fullscreenchange,this._changeIcon)};cc.prototype._isFullscreen=
function(){return this._fullscreen};cc.prototype._changeIcon=function(){(b.default.document.fullscreenElement||b.default.document.mozFullScreenElement||b.default.document.webkitFullscreenElement||b.default.document.msFullscreenElement)===this._mapContainer!==this._fullscreen&&(this._fullscreen=!this._fullscreen,this._fullscreenButton.classList.toggle(this._className+"-shrink"),this._fullscreenButton.classList.toggle(this._className+"-fullscreen"))};cc.prototype._onClickFullscreen=function(){this._isFullscreen()?
b.default.document.exitFullscreen?b.default.document.exitFullscreen():b.default.document.mozCancelFullScreen?b.default.document.mozCancelFullScreen():b.default.document.msExitFullscreen?b.default.document.msExitFullscreen():b.default.document.webkitCancelFullScreen&&b.default.document.webkitCancelFullScreen():this._mapContainer.requestFullscreen?this._mapContainer.requestFullscreen():this._mapContainer.mozRequestFullScreen?this._mapContainer.mozRequestFullScreen():this._mapContainer.msRequestFullscreen?
this._mapContainer.msRequestFullscreen():this._mapContainer.webkitRequestFullscreen&&this._mapContainer.webkitRequestFullscreen()};var Kd={closeButton:!0,closeOnClick:!0},xg=function(a){function c(c){a.call(this);this.options=b.extend(Object.create(Kd),c);b.bindAll(["_update","_onClickClose"],this)}return a&&(c.__proto__=a),c.prototype=Object.create(a&&a.prototype),c.prototype.constructor=c,c.prototype.addTo=function(a){return this._map=a,this._map.on("move",this._update),this.options.closeOnClick&&
this._map.on("click",this._onClickClose),this._update(),this.fire(new b.Event("open")),this},c.prototype.isOpen=function(){return!!this._map},c.prototype.remove=function(){return this._content&&ka.remove(this._content),this._container&&(ka.remove(this._container),delete this._container),this._map&&(this._map.off("move",this._update),this._map.off("click",this._onClickClose),delete this._map),this.fire(new b.Event("close")),this},c.prototype.getLngLat=function(){return this._lngLat},c.prototype.setLngLat=
function(b){return this._lngLat=La.convert(b),this._pos=null,this._update(),this},c.prototype.setText=function(a){return this.setDOMContent(b.default.document.createTextNode(a))},c.prototype.setHTML=function(a){var c=b.default.document.createDocumentFragment(),d=b.default.document.createElement("body");for(d.innerHTML=a;a=d.firstChild;)c.appendChild(a);return this.setDOMContent(c)},c.prototype.setDOMContent=function(b){return this._createContent(),this._content.appendChild(b),this._update(),this},
c.prototype._createContent=function(){this._content&&ka.remove(this._content);this._content=ka.create("div","mapboxgl-popup-content",this._container);this.options.closeButton&&(this._closeButton=ka.create("button","mapboxgl-popup-close-button",this._content),this._closeButton.type="button",this._closeButton.setAttribute("aria-label","Close popup"),this._closeButton.innerHTML="\x26#215;",this._closeButton.addEventListener("click",this._onClickClose))},c.prototype._update=function(){if(this._map&&this._lngLat&&
this._content){this._container||(this._container=ka.create("div","mapboxgl-popup",this._map.getContainer()),this._tip=ka.create("div","mapboxgl-popup-tip",this._container),this._container.appendChild(this._content));this._map.transform.renderWorldCopies&&(this._lngLat=V(this._lngLat,this._pos,this._map.transform));var a=this._pos=this._map.project(this._lngLat),c=this.options.anchor,d=function Ee(a){if(a){if("number"==typeof a){var c=Math.round(Math.sqrt(.5*Math.pow(a,2)));return{center:new b.default$1(0,
0),top:new b.default$1(0,a),"top-left":new b.default$1(c,c),"top-right":new b.default$1(-c,c),bottom:new b.default$1(0,-a),"bottom-left":new b.default$1(c,-c),"bottom-right":new b.default$1(-c,-c),left:new b.default$1(a,0),right:new b.default$1(-a,0)}}return a instanceof b.default$1||Array.isArray(a)?(a=b.default$1.convert(a),{center:a,top:a,"top-left":a,"top-right":a,bottom:a,"bottom-left":a,"bottom-right":a,left:a,right:a}):{center:b.default$1.convert(a.center||[0,0]),top:b.default$1.convert(a.top||
[0,0]),"top-left":b.default$1.convert(a["top-left"]||[0,0]),"top-right":b.default$1.convert(a["top-right"]||[0,0]),bottom:b.default$1.convert(a.bottom||[0,0]),"bottom-left":b.default$1.convert(a["bottom-left"]||[0,0]),"bottom-right":b.default$1.convert(a["bottom-right"]||[0,0]),left:b.default$1.convert(a.left||[0,0]),right:b.default$1.convert(a.right||[0,0])}}return Ee(new b.default$1(0,0))}(this.options.offset);if(!c){c=this._container.offsetWidth;var f=this._container.offsetHeight;f=a.y+d.bottom.y<
f?["top"]:a.y>this._map.transform.height-f?["bottom"]:[];a.x<c/2?f.push("left"):a.x>this._map.transform.width-c/2&&f.push("right");c=0===f.length?"bottom":f.join("-")}a=a.add(d[c]).round();ka.setTransform(this._container,Ac[c]+" translate("+a.x+"px,"+a.y+"px)");ia(this._container,c,"popup")}},c.prototype._onClickClose=function(){this.remove()},c}(b.Evented),ef={version:"0.45.0",supported:Aa,workerCount:Math.max(Math.floor(pa.hardwareConcurrency/2),1),setRTLTextPlugin:b.setRTLTextPlugin,Map:Jd,NavigationControl:qc,
GeolocateControl:gd,AttributionControl:Db,ScaleControl:vc,FullscreenControl:cc,Popup:xg,Marker:Ab,Style:je,LngLat:La,LngLatBounds:Pa,Point:b.default$1,Evented:b.Evented,config:rb,get accessToken(){return rb.ACCESS_TOKEN},set accessToken(b){rb.ACCESS_TOKEN=b},workerUrl:""};return ef});return n})}).call(this,"undefined"!==typeof ja?ja:"undefined"!==typeof self?self:"undefined"!==typeof window?window:{})},{}],419:[function(a,t,m){function p(a,e,g){for(var b=Array(a),h=0;h<a;++h)b[h]=0,h===e&&(b[h]+=
.5),h===g&&(b[h]+=.5);return b}t.exports=function(a){for(var e=1<<a+1,h=Array(e),b=0;b<e;++b){var l=b;var u=a,q=b;if(0===q||q===(1<<u+1)-1)var d=[];else{var f=[];d=[];for(var c=0;c<=u;++c)if(q&1<<c){f.push(p(u,c-1,c-1));d.push(null);for(var k=0;k<=u;++k)~q&1<<k&&(f.push(p(u,c-1,k-1)),d.push([c,k]))}u=g(f);q=[];c=0;b:for(;c<u.length;++c){f=u[c];var r=[];for(k=0;k<f.length;++k){if(!d[f[k]])continue b;r.push(d[f[k]].slice())}q.push(r)}d=q}h[l]=d}return h};var g=a("convex-hull")},{"convex-hull":120}],
420:[function(a,t,m){function p(b,a,c,d,f){b[0]=a[0]*d+c[0]*f;b[1]=a[1]*d+c[1]*f;b[2]=a[2]*d+c[2]*f}var g=a("./normalize");m=a("gl-mat4/create");var h=a("gl-mat4/clone"),e=a("gl-mat4/determinant"),n=a("gl-mat4/invert"),b=a("gl-mat4/transpose"),l={length:a("gl-vec3/length"),normalize:a("gl-vec3/normalize"),dot:a("gl-vec3/dot"),cross:a("gl-vec3/cross")},u=m(),q=m(),d=[0,0,0,0],f=[[0,0,0],[0,0,0],[0,0,0]],c=[0,0,0];t.exports=function(a,r,v,z,A,m){r||(r=[0,0,0]);v||(v=[0,0,0]);z||(z=[0,0,0]);A||(A=[0,
0,0,1]);m||(m=[0,0,0,1]);if(!g(u,a))return!1;h(q,u);q[3]=0;q[7]=0;q[11]=0;q[15]=1;if(Math.abs(1E-8>e(q)))return!1;var k=u[3],x=u[7],y=u[11];a=u[12];var t=u[13],C=u[14],D=u[15];if(0!==k||0!==x||0!==y){d[0]=k;d[1]=x;d[2]=y;d[3]=D;if(!n(q,q))return!1;b(q,q);k=d[0];x=d[1];y=d[2];D=d[3];A[0]=q[0]*k+q[4]*x+q[8]*y+q[12]*D;A[1]=q[1]*k+q[5]*x+q[9]*y+q[13]*D;A[2]=q[2]*k+q[6]*x+q[10]*y+q[14]*D;A[3]=q[3]*k+q[7]*x+q[11]*y+q[15]*D}else A[0]=A[1]=A[2]=0,A[3]=1;r[0]=a;r[1]=t;r[2]=C;f[0][0]=u[0];f[0][1]=u[1];f[0][2]=
u[2];f[1][0]=u[4];f[1][1]=u[5];f[1][2]=u[6];f[2][0]=u[8];f[2][1]=u[9];f[2][2]=u[10];v[0]=l.length(f[0]);l.normalize(f[0],f[0]);z[0]=l.dot(f[0],f[1]);p(f[1],f[1],f[0],1,-z[0]);v[1]=l.length(f[1]);l.normalize(f[1],f[1]);z[0]/=v[1];z[1]=l.dot(f[0],f[2]);p(f[2],f[2],f[0],1,-z[1]);z[2]=l.dot(f[1],f[2]);p(f[2],f[2],f[1],1,-z[2]);v[2]=l.length(f[2]);l.normalize(f[2],f[2]);z[1]/=v[2];z[2]/=v[2];l.cross(c,f[1],f[2]);if(0>l.dot(f[0],c))for(r=0;3>r;r++)v[r]*=-1,f[r][0]*=-1,f[r][1]*=-1,f[r][2]*=-1;m[0]=.5*Math.sqrt(Math.max(1+
f[0][0]-f[1][1]-f[2][2],0));m[1]=.5*Math.sqrt(Math.max(1-f[0][0]+f[1][1]-f[2][2],0));m[2]=.5*Math.sqrt(Math.max(1-f[0][0]-f[1][1]+f[2][2],0));m[3]=.5*Math.sqrt(Math.max(1+f[0][0]+f[1][1]+f[2][2],0));f[2][1]>f[1][2]&&(m[0]=-m[0]);f[0][2]>f[2][0]&&(m[1]=-m[1]);f[1][0]>f[0][1]&&(m[2]=-m[2]);return!0}},{"./normalize":421,"gl-mat4/clone":255,"gl-mat4/create":256,"gl-mat4/determinant":257,"gl-mat4/invert":261,"gl-mat4/transpose":272,"gl-vec3/cross":326,"gl-vec3/dot":331,"gl-vec3/length":341,"gl-vec3/normalize":348}],
421:[function(a,t,m){t.exports=function(a,g){var h=g[15];if(0===h)return!1;h=1/h;for(var e=0;16>e;e++)a[e]=g[e]*h;return!0}},{}],422:[function(a,t,m){function p(){return{translate:[0,0,0],scale:[1,1,1],skew:[0,0,0],perspective:[0,0,0,1],quaternion:[0,0,0,1]}}var g=a("gl-vec3/lerp"),h=a("mat4-recompose"),e=a("mat4-decompose"),n=a("gl-mat4/determinant"),b=a("quat-slerp"),l=p(),u=p(),q=p();t.exports=function(a,f,c,k){if(0===n(f)||0===n(c))return!1;f=e(f,l.translate,l.scale,l.skew,l.perspective,l.quaternion);
c=e(c,u.translate,u.scale,u.skew,u.perspective,u.quaternion);if(!f||!c)return!1;g(q.translate,l.translate,u.translate,k);g(q.skew,l.skew,u.skew,k);g(q.scale,l.scale,u.scale,k);g(q.perspective,l.perspective,u.perspective,k);b(q.quaternion,l.quaternion,u.quaternion,k);h(a,q.translate,q.scale,q.skew,q.perspective,q.quaternion);return!0}},{"gl-mat4/determinant":257,"gl-vec3/lerp":342,"mat4-decompose":420,"mat4-recompose":423,"quat-slerp":475}],423:[function(a,t,m){var p={identity:a("gl-mat4/identity"),
translate:a("gl-mat4/translate"),multiply:a("gl-mat4/multiply"),create:a("gl-mat4/create"),scale:a("gl-mat4/scale"),fromRotationTranslation:a("gl-mat4/fromRotationTranslation")};p.create();var g=p.create();t.exports=function(a,e,n,b,l,u){p.identity(a);p.fromRotationTranslation(a,u,e);a[3]=l[0];a[7]=l[1];a[11]=l[2];a[15]=l[3];p.identity(g);0!==b[2]&&(g[9]=b[2],p.multiply(a,a,g));0!==b[1]&&(g[9]=0,g[8]=b[1],p.multiply(a,a,g));0!==b[0]&&(g[8]=0,g[4]=b[0],p.multiply(a,a,g));p.scale(a,a,n);return a}},
{"gl-mat4/create":256,"gl-mat4/fromRotationTranslation":259,"gl-mat4/identity":260,"gl-mat4/multiply":263,"gl-mat4/scale":270,"gl-mat4/translate":271}],424:[function(a,t,m){t.exports=Math.log2||function(a){return Math.log(a)*Math.LOG2E}},{}],425:[function(a,t,m){function p(b){this._components=b.slice();this._time=[0];this.prevMatrix=b.slice();this.nextMatrix=b.slice();this.computedMatrix=b.slice();this.computedInverse=b.slice();this.computedEye=[0,0,0];this.computedUp=[0,0,0];this.computedCenter=
[0,0,0];this.computedRadius=[0];this._limits=[-Infinity,Infinity]}var g=a("binary-search-bounds"),h=a("mat4-interpolate"),e=a("gl-mat4/invert"),n=a("gl-mat4/rotateX"),b=a("gl-mat4/rotateY"),l=a("gl-mat4/rotateZ"),u=a("gl-mat4/lookAt"),q=a("gl-mat4/translate");a("gl-mat4/scale");var d=a("gl-vec3/normalize"),f=[0,0,0];t.exports=function(b){b=b||{};return new p(b.matrix||[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1])};a=p.prototype;a.recalcMatrix=function(b){var a=this._time,c=g.le(a,b),f=this.computedMatrix;if(!(0>
c)){var k=this._components;if(c===a.length-1)for(var l=16*c,n=0;16>n;++n)f[n]=k[l++];else{var q=a[c+1]-a[c];l=16*c;var u=this.prevMatrix,p=!0;for(n=0;16>n;++n)u[n]=k[l++];var m=this.nextMatrix;for(n=0;16>n;++n)m[n]=k[l++],p=p&&u[n]===m[n];if(1E-6>q||p)for(n=0;16>n;++n)f[n]=u[n];else h(f,u,m,(b-a[c])/q)}n=this.computedUp;n[0]=f[1];n[1]=f[5];n[2]=f[9];d(n,n);n=this.computedInverse;e(n,f);b=this.computedEye;a=n[15];b[0]=n[12]/a;b[1]=n[13]/a;b[2]=n[14]/a;a=this.computedCenter;c=Math.exp(this.computedRadius[0]);
for(n=0;3>n;++n)a[n]=b[n]-f[2+4*n]*c}};a.idle=function(b){if(!(b<this.lastT())){for(var a=this._components,c=a.length-16,d=0;16>d;++d)a.push(a[c++]);this._time.push(b)}};a.flush=function(b){b=g.gt(this._time,b)-2;0>b||(this._time.splice(0,b),this._components.splice(0,16*b))};a.lastT=function(){return this._time[this._time.length-1]};a.lookAt=function(b,a,c,d){this.recalcMatrix(b);a=a||this.computedEye;c=c||f;d=d||this.computedUp;this.setMatrix(b,u(this.computedMatrix,a,c,d));for(d=b=0;3>d;++d)b+=
Math.pow(c[d]-a[d],2);b=Math.log(Math.sqrt(b));this.computedRadius[0]=b};a.rotate=function(a,c,d,f){this.recalcMatrix(a);var k=this.computedInverse;c&&b(k,k,c);d&&n(k,k,d);f&&l(k,k,f);this.setMatrix(a,e(this.computedMatrix,k))};var c=[0,0,0];a.pan=function(b,a,d,f){c[0]=-(a||0);c[1]=-(d||0);c[2]=-(f||0);this.recalcMatrix(b);a=this.computedInverse;q(a,a,c);this.setMatrix(b,e(a,a))};a.translate=function(b,a,d,f){c[0]=a||0;c[1]=d||0;c[2]=f||0;this.recalcMatrix(b);a=this.computedMatrix;q(a,a,c);this.setMatrix(b,
a)};a.setMatrix=function(b,a){if(!(b<this.lastT()))for(this._time.push(b),b=0;16>b;++b)this._components.push(a[b])};a.setDistance=function(b,a){this.computedRadius[0]=a};a.setDistanceLimits=function(b,a){var c=this._limits;c[0]=b;c[1]=a};a.getDistanceLimits=function(b){var a=this._limits;return b?(b[0]=a[0],b[1]=a[1],b):a}},{"binary-search-bounds":81,"gl-mat4/invert":261,"gl-mat4/lookAt":262,"gl-mat4/rotateX":267,"gl-mat4/rotateY":268,"gl-mat4/rotateZ":269,"gl-mat4/scale":270,"gl-mat4/translate":271,
"gl-vec3/normalize":348,"mat4-interpolate":422}],426:[function(a,t,m){t.exports=function(a){var g=a.length;if(3>g){for(var e=Array(g),n=0;n<g;++n)e[n]=n;return 2===g&&a[0][0]===a[1][0]&&a[0][1]===a[1][1]?[0]:e}e=Array(g);for(n=0;n<g;++n)e[n]=n;e.sort(function(b,c){var d=a[b][0]-a[c][0];return d?d:a[b][1]-a[c][1]});var b=[e[0],e[1]],l=[e[0],e[1]];for(n=2;n<g;++n){for(var u=e[n],q=a[u],d=b.length;1<d&&0>=p(a[b[d-2]],a[b[d-1]],q);)--d,b.pop();b.push(u);for(d=l.length;1<d&&0<=p(a[l[d-2]],a[l[d-1]],q);)--d,
l.pop();l.push(u)}e=Array(l.length+b.length-2);n=g=0;for(u=b.length;n<u;++n)e[g++]=b[n];for(n=l.length-2;0<n;--n)e[g++]=l[n];return e};var p=a("robust-orientation")[3]},{"robust-orientation":494}],427:[function(a,t,m){t.exports=function(a,h){function e(b){var a=!1;"altKey"in b&&(a=a||b.altKey!==z.alt,z.alt=!!b.altKey);"shiftKey"in b&&(a=a||b.shiftKey!==z.shift,z.shift=!!b.shiftKey);"ctrlKey"in b&&(a=a||b.ctrlKey!==z.control,z.control=!!b.ctrlKey);"metaKey"in b&&(a=a||b.metaKey!==z.meta,z.meta=!!b.metaKey);
return a}function g(b,a){var c=p.x(a),d=p.y(a);"buttons"in a&&(b=a.buttons|0);if(b!==k||c!==r||d!==v||e(a))k=b|0,r=c||0,v=d||0,h&&h(k,r,v,z)}function b(b){g(0,b)}function l(){if(k||r||v||z.shift||z.alt||z.meta||z.control)k=r=v=0,z.shift=z.alt=z.control=z.meta=!1,h&&h(0,0,0,z)}function u(b){e(b)&&h&&h(k,r,v,z)}function q(b){0===p.buttons(b)?g(0,b):g(k,b)}function d(b){g(k|p.buttons(b),b)}function f(b){g(k&~p.buttons(b),b)}function c(){m||(m=!0,a.addEventListener("mousemove",q),a.addEventListener("mousedown",
d),a.addEventListener("mouseup",f),a.addEventListener("mouseleave",b),a.addEventListener("mouseenter",b),a.addEventListener("mouseout",b),a.addEventListener("mouseover",b),a.addEventListener("blur",l),a.addEventListener("keyup",u),a.addEventListener("keydown",u),a.addEventListener("keypress",u),a!==window&&(window.addEventListener("blur",l),window.addEventListener("keyup",u),window.addEventListener("keydown",u),window.addEventListener("keypress",u)))}h||(h=a,a=window);var k=0,r=0,v=0,z={shift:!1,
alt:!1,control:!1,meta:!1},m=!1;c();var y={element:a};Object.defineProperties(y,{enabled:{get:function(){return m},set:function(e){e?c():m&&(m=!1,a.removeEventListener("mousemove",q),a.removeEventListener("mousedown",d),a.removeEventListener("mouseup",f),a.removeEventListener("mouseleave",b),a.removeEventListener("mouseenter",b),a.removeEventListener("mouseout",b),a.removeEventListener("mouseover",b),a.removeEventListener("blur",l),a.removeEventListener("keyup",u),a.removeEventListener("keydown",
u),a.removeEventListener("keypress",u),a!==window&&(window.removeEventListener("blur",l),window.removeEventListener("keyup",u),window.removeEventListener("keydown",u),window.removeEventListener("keypress",u)))},enumerable:!0},buttons:{get:function(){return k},enumerable:!0},x:{get:function(){return r},enumerable:!0},y:{get:function(){return v},enumerable:!0},mods:{get:function(){return z},enumerable:!0}});return y};var p=a("mouse-event")},{"mouse-event":429}],428:[function(a,t,m){var p={left:0,top:0};
t.exports=function(a,h,e){h=h||a.currentTarget||a.srcElement;Array.isArray(e)||(e=[0,0]);var g=a.clientX||0;a=a.clientY||0;h=h===window||h===document||h===document.body?p:h.getBoundingClientRect();e[0]=g-h.left;e[1]=a-h.top;return e}},{}],429:[function(a,t,m){function p(a){return a.target||a.srcElement||window}m.buttons=function(a){if("object"===typeof a){if("buttons"in a)return a.buttons;if("which"in a){a=a.which;if(2===a)return 4;if(3===a)return 2;if(0<a)return 1<<a-1}else if("button"in a){a=a.button;
if(1===a)return 4;if(2===a)return 2;if(0<=a)return 1<<a}}return 0};m.element=p;m.x=function(a){if("object"===typeof a){if("offsetX"in a)return a.offsetX;var g=p(a).getBoundingClientRect();return a.clientX-g.left}return 0};m.y=function(a){if("object"===typeof a){if("offsetY"in a)return a.offsetY;var g=p(a).getBoundingClientRect();return a.clientY-g.top}return 0}},{}],430:[function(a,t,m){var p=a("to-px");t.exports=function(a,h,e){"function"===typeof a&&(e=!!h,h=a,a=window);var g=p("ex",a),b=function(b){e&&
b.preventDefault();var a=b.deltaX||0,l=b.deltaY||0,d=b.deltaZ||0,f=1;switch(b.deltaMode){case 1:f=g;break;case 2:f=window.innerHeight}a*=f;l*=f;d*=f;if(a||l||d)return h(a,l,d,b)};a.addEventListener("wheel",b);return b}},{"to-px":523}],431:[function(a,t,m){function p(b,a,c){for(var d=0,f=0;f<b;++f)a&1<<f&&(d|=1<<c[f]);return d}function g(a,f,c,k,g,v){function d(b,a){C.push("for(","i"+g[b],"\x3d",a,";","i"+g[b],"\x3c","s"+g[b],";","++","i"+g[b],"){")}function r(b){for(var a=0;a<x;++a)C.push("p"+a,"+\x3d",
"u"+a+"_"+g[b],";");C.push("}")}function m(){for(var b=1;b<1<<t;++b)C.push(q,"\x3d","e"+b,";","e"+b,"\x3d","y"+b,";","y"+b,"\x3d",q,";")}function w(a,c){if(0>a){for(var f=0;f<x;++f)v[f]?C.push("c"+f+"_0","\x3d","d"+f,".get(","p"+f,");"):C.push("c"+f+"_0","\x3d","d"+f,"[","p"+f,"];");a=[];for(f=0;f<x;++f)a.push("c"+f+"_0");for(f=0;f<k;++f)a.push("x"+f);C.push("b0","\x3d",n,"[",u,"]\x3dphase(",a.join(),");");for(a=1;a<1<<t;++a)C.push("b"+a,"\x3d",n,"[",u,"+","e"+a,"];");f=[];for(a=1;a<1<<t;++a)f.push("(b0!\x3d\x3db"+
a+")");C.push("if(",f.join("||"),"){");var h=[];for(f=0;f<t;++f)h.push("i"+f);for(f=0;f<x;++f)for(h.push("c"+f+"_0"),a=1;a<1<<t;++a)v[f]?C.push("c"+f+"_"+a,"\x3d","d"+f,".get(","p"+f,"+","d"+f+"_"+a,");"):C.push("c"+f+"_"+a,"\x3d","d"+f,"[","p"+f,"+","d"+f+"_"+a,"];"),h.push("c"+f+"_"+a);for(f=0;f<1<<t;++f)h.push("b"+f);for(f=0;f<k;++f)h.push("x"+f);C.push("vertex(",h.join(),");","v0","\x3d",e,"[",u,"]\x3d",b,"++;");f=(1<<t)-1;h="b"+f;for(a=0;a<t;++a)if(0===(c&~(1<<a))){for(var l=f^1<<a,q="b"+l,p=
[],z=l;0<z;z=z-1&l)p.push(e+"["+u+"+"+("e"+z)+"]");p.push("v0");for(z=0;z<x;++z)a&1?p.push("c"+z+"_"+f,"c"+z+"_"+l):p.push("c"+z+"_"+l,"c"+z+"_"+f);a&1?p.push(h,q):p.push(q,h);for(z=0;z<k;++z)p.push("x"+z);C.push("if(",h,"!\x3d\x3d",q,"){","face(",p.join(),")}")}C.push("}",u,"+\x3d1;")}else{for(f=a-1;0<=f;--f)d(f,0);h=[];for(f=0;f<x;++f)v[f]?h.push("d"+f+".get("+("p"+f)+")"):h.push("d"+f+"["+("p"+f)+"]");for(f=0;f<k;++f)h.push("x"+f);C.push(n,"[",u,"++]\x3dphase(",h.join(),");");for(f=0;f<a;++f)r(f);
for(f=0;f<x;++f)C.push("p"+f,"+\x3d","u"+f+"_"+g[a],";");C.push("if(","s"+g[a],"\x3e0){","i"+g[a],"\x3d1;");w(a-1,c|1<<g[a]);for(f=0;f<x;++f)C.push("p"+f,"+\x3d","u"+f+"_"+g[a],";");a===t-1&&(C.push(u,"\x3d0;"),m());d(a,2);w(a-1,c);a===t-1&&(C.push("if(","i"+g[t-1],"\x261){",u,"\x3d0;}"),m());r(a);C.push("}")}}var x=v.length,t=g.length;if(2>t)throw Error("ndarray-extract-contour: Dimension must be at least 2");for(var B="extractContour"+g.join("_"),C=[],D=[],G=[],H=0;H<x;++H)G.push("a"+H);for(H=0;H<
k;++H)G.push("x"+H);for(H=0;H<t;++H)D.push("s"+H+"\x3da0.shape["+H+"]|0");for(H=0;H<x;++H){D.push("d"+H+"\x3d"+("a"+H)+".data","o"+H+"\x3d"+("a"+H)+".offset|0");for(var E=0;E<t;++E)D.push("t"+H+"_"+E+"\x3d"+("a"+H)+".stride["+E+"]|0")}for(H=0;H<x;++H)for(D.push("p"+H+"\x3d"+("o"+H)),D.push("c"+H+"_0"),E=1;E<1<<t;++E){for(var K=[],I=0;I<t;++I)E&1<<I&&K.push("-"+("t"+H+"_"+I));D.push("d"+H+"_"+E+"\x3d("+K.join("")+")|0");D.push("c"+H+"_"+E+"\x3d0")}for(H=0;H<x;++H)for(E=0;E<t;++E)I=["t"+H+"_"+g[E]],
0<E&&I.push("t"+H+"_"+g[E-1]+"*"+("s"+g[E-1])),D.push("u"+H+"_"+g[E]+"\x3d("+I.join("-")+")|0");for(H=0;H<t;++H)D.push("i"+H+"\x3d0");D.push(b+"\x3d0");E=["2"];for(H=t-2;0<=H;--H)E.push("s"+g[H]);D.push(l+"\x3d("+E.join("*")+")|0",n+"\x3dmallocUint32("+l+")",e+"\x3dmallocUint32("+l+")",u+"\x3d0");D.push("b0\x3d0");for(E=1;E<1<<t;++E){H=[];K=[];for(I=0;I<t;++I)E&1<<I&&(0===K.length?H.push("1"):H.unshift(K.join("*"))),K.push("s"+g[I]);I="";0>H[0].indexOf("s"+g[t-2])&&(I="-");K=p(t,E,g);D.push("e"+K+
"\x3d(-"+H.join("-")+")|0","y"+K+"\x3d("+I+H.join("-")+")|0","b"+K+"\x3d0")}D.push("v0\x3d0",q+"\x3d0");w(t-1,0);C.push("freeUint32(",e,");freeUint32(",n,");");B=["'use strict';function ",B,"(",G.join(),"){var ",D.join(),";",C.join(""),"}return ",B].join("");return(new Function("vertex","face","phase","mallocUint32","freeUint32",B))(a,f,c,h.mallocUint32,h.freeUint32)}var h=a("typedarray-pool");t.exports=function(b){function a(b){throw Error("ndarray-extract-contour: "+b);}"object"!==typeof b&&a("Must specify arguments");
var c=b.order;Array.isArray(c)||a("Must specify order");var d=b.arrayArguments||1;1>d&&a("Must have at least one array argument");var e=b.scalarArguments||0;0>e&&a("Scalar arg count must be \x3e 0");"function"!==typeof b.vertex&&a("Must specify vertex creation function");"function"!==typeof b.cell&&a("Must specify cell creation function");"function"!==typeof b.phase&&a("Must specify phase function");for(var h=b.getters||[],l=Array(d),n=0;n<d;++n)0<=h.indexOf(n)?l[n]=!0:l[n]=!1;return g(b.vertex,b.cell,
b.phase,e,c,l)};var e="V",n="P",b="N",l="Q",u="X",q="T"},{"typedarray-pool":529}],432:[function(a,t,m){var p=a("cwise/lib/wrapper")({args:["index","array","scalar"],pre:{body:"{}",args:[],thisVars:[],localVars:[]},body:{body:"{_inline_1_arg1_\x3d_inline_1_arg2_.apply(void 0,_inline_1_arg0_)}",args:[{name:"_inline_1_arg0_",lvalue:!1,rvalue:!0,count:1},{name:"_inline_1_arg1_",lvalue:!0,rvalue:!1,count:1},{name:"_inline_1_arg2_",lvalue:!1,rvalue:!0,count:1}],thisVars:[],localVars:[]},post:{body:"{}",
args:[],thisVars:[],localVars:[]},debug:!1,funcName:"cwise",blockSize:64});t.exports=function(a,h){p(a,h);return a}},{"cwise/lib/wrapper":139}],433:[function(a,t,m){function p(a){if(a in e)return e[a];for(var d=[],f=0;f<a;++f)d.push("out",f,"s\x3d0.5*(inp",f,"l-inp",f,"r);");var c=["array"],k=["junk"];for(f=0;f<a;++f){c.push("array");k.push("out"+f+"s");var l=g(a);l[f]=-1;c.push({array:0,offset:l.slice()});l[f]=1;c.push({array:0,offset:l.slice()});k.push("inp"+f+"l","inp"+f+"r")}return e[a]=h({args:c,
pre:b,post:b,body:{body:d.join(""),args:k.map(function(b){return{name:b,lvalue:0===b.indexOf("out"),rvalue:0===b.indexOf("inp"),count:"junk"!==b|0}}),thisVars:[],localVars:[]},funcName:"fdTemplate"+a})}t.exports=function(b,a,f){if(Array.isArray(f)){if(f.length!==a.dimension)throw Error("ndarray-gradient: invalid boundary conditions");}else f="string"===typeof f?g(a.dimension,f):g(a.dimension,"clamp");if(b.dimension!==a.dimension+1)throw Error("ndarray-gradient: output dimension must be +1 input dimension");
if(b.shape[a.dimension]!==a.dimension)throw Error("ndarray-gradient: output shape must match input shape");for(var c=0;c<a.dimension;++c)if(b.shape[c]!==a.shape[c])throw Error("ndarray-gradient: shape mismatch");if(0===a.size)return b;if(0>=a.dimension)return b.set(0),b;var d=f;f=d.join();c=n[f];if(!c){c=d.length;for(var h=["function gradient(dst,src){var s\x3dsrc.shape.slice();"],q=0;q<1<<c;++q){for(var z=[],m=0;m<c;++m)q&1<<m&&z.push(m+1);for(var y=0;y<1<<z.length;++y){var w=z.slice();for(m=0;m<
z.length;++m)y&1<<m&&(w[m]=-w[m]);m=w;w=c-m.length;for(var x=[],t=[],B=[],C=0;C<c;++C)0<=m.indexOf(C+1)?B.push("0"):0<=m.indexOf(-(C+1))?B.push("s["+C+"]-1"):(B.push("-1"),x.push("1"),t.push("s["+C+"]-2"));t=".lo("+x.join()+").hi("+t.join()+")";0===x.length&&(t="");if(0<w){h.push("if(1");for(C=0;C<c;++C)0<=m.indexOf(C+1)||0<=m.indexOf(-(C+1))||h.push("\x26\x26s[",C,"]\x3e2");h.push("){grad",w,"(src.pick(",B.join(),")",t);for(C=0;C<c;++C)0<=m.indexOf(C+1)||0<=m.indexOf(-(C+1))||h.push(",dst.pick(",
B.join(),",",C,")",t);h.push(");")}for(C=0;C<m.length;++C){x=Math.abs(m[C])-1;var D="dst.pick("+B.join()+","+x+")"+t;switch(d[x]){case "clamp":var G=B.slice(),H=B.slice();0>m[C]?G[x]="s["+x+"]-2":H[x]="1";0===w?h.push("if(s[",x,"]\x3e1){dst.set(",B.join(),",",x,",0.5*(src.get(",G.join(),")-src.get(",H.join(),")))}else{dst.set(",B.join(),",",x,",0)};"):h.push("if(s[",x,"]\x3e1){diff(",D,",src.pick(",G.join(),")",t,",src.pick(",H.join(),")",t,");}else{zero(",D,");};");break;case "mirror":0===w?h.push("dst.set(",
B.join(),",",x,",0);"):h.push("zero(",D,");");break;case "wrap":G=B.slice();H=B.slice();0>m[C]?(G[x]="s["+x+"]-2",H[x]="0"):(G[x]="s["+x+"]-1",H[x]="1");0===w?h.push("if(s[",x,"]\x3e2){dst.set(",B.join(),",",x,",0.5*(src.get(",G.join(),")-src.get(",H.join(),")))}else{dst.set(",B.join(),",",x,",0)};"):h.push("if(s[",x,"]\x3e2){diff(",D,",src.pick(",G.join(),")",t,",src.pick(",H.join(),")",t,");}else{zero(",D,");};");break;default:throw Error("ndarray-gradient: Invalid boundary condition");}}0<w&&h.push("};")}}h.push("return dst;};return gradient");
d=["diff","zero"];z=[l,u];for(q=1;q<=c;++q)d.push("grad"+q),z.push(p(q));d.push(h.join(""));c=Function.apply(void 0,d).apply(void 0,z);e[f]=c}return c(b,a)};var g=a("dup"),h=a("cwise-compiler"),e={},n={},b={body:"",args:[],thisVars:[],localVars:[]},l=h({args:["array","array","array"],pre:b,post:b,body:{args:[{name:"out",lvalue:!0,rvalue:!1,count:1},{name:"left",lvalue:!1,rvalue:!0,count:1},{name:"right",lvalue:!1,rvalue:!0,count:1}],body:"out\x3d0.5*(left-right)",thisVars:[],localVars:[]},funcName:"cdiff"}),
u=h({args:["array"],pre:b,post:b,body:{args:[{name:"out",lvalue:!0,rvalue:!1,count:1}],body:"out\x3d0",thisVars:[],localVars:[]},funcName:"zero"})},{"cwise-compiler":136,dup:161}],434:[function(a,t,m){var p=a("ndarray-warp"),g=a("gl-matrix-invert");t.exports=function(a,e,n){var b=e.dimension,h=g([],n);p(a,e,function(a,e){for(var d=0;d<b;++d){a[d]=h[(b+1)*b+d];for(var f=0;f<b;++f)a[d]+=h[(b+1)*f+d]*e[f]}d=h[(b+1)*(b+1)-1];for(f=0;f<b;++f)d+=h[(b+1)*f+b]*e[f];e=1/d;for(d=0;d<b;++d)a[d]*=e;return a});
return a}},{"gl-matrix-invert":273,"ndarray-warp":441}],435:[function(a,t,m){function p(a,b){var e=Math.floor(b);b-=e;var g=0<=e+1&&e+1<a.shape[0],h=0<=e&&e<a.shape[0]?+a.get(e):0;a=g?+a.get(e+1):0;return(1-b)*h+b*a}function g(a,b,e){var g=Math.floor(b);b-=g;var h=0<=g&&g<a.shape[0],d=0<=g+1&&g+1<a.shape[0],f=Math.floor(e);e-=f;var c=0<=f&&f<a.shape[1],k=0<=f+1&&f+1<a.shape[1],l=h&&c?a.get(g,f):0;h=h&&k?a.get(g,f+1):0;c=d&&c?a.get(g+1,f):0;a=d&&k?a.get(g+1,f+1):0;return(1-e)*((1-b)*l+b*c)+e*((1-b)*
h+b*a)}function h(a,b,e,g){var h=Math.floor(b);b-=h;var d=0<=h&&h<a.shape[0],f=0<=h+1&&h+1<a.shape[0],c=Math.floor(e);e-=c;var k=0<=c&&c<a.shape[1],l=0<=c+1&&c+1<a.shape[1],n=Math.floor(g);g-=n;var u=0<=n&&n<a.shape[2],p=0<=n+1&&n+1<a.shape[2],m=d&&k&&u?a.get(h,c,n):0,w=d&&l&&u?a.get(h,c+1,n):0,x=f&&k&&u?a.get(h+1,c,n):0;u=f&&l&&u?a.get(h+1,c+1,n):0;var t=d&&k&&p?a.get(h,c,n+1):0;d=d&&l&&p?a.get(h,c+1,n+1):0;k=f&&k&&p?a.get(h+1,c,n+1):0;a=f&&l&&p?a.get(h+1,c+1,n+1):0;return(1-g)*((1-e)*((1-b)*m+b*
x)+e*((1-b)*w+b*u))+g*((1-e)*((1-b)*t+b*k)+e*((1-b)*d+b*a))}function e(a){var b=a.shape.length|0,e=Array(b),g=Array(b),h=Array(b),d=Array(b),f;for(f=0;f<b;++f){var c=+arguments[f+1];e[f]=Math.floor(c);g[f]=c-e[f];h[f]=0<=e[f]&&e[f]<a.shape[f];d[f]=0<=e[f]+1&&e[f]+1<a.shape[f]}c=0;var k;f=0;a:for(;f<1<<b;++f){var r=1;var n=a.offset;for(k=0;k<b;++k)if(f&1<<k){if(!d[k])continue a;r*=g[k];n+=a.stride[k]*(e[k]+1)}else{if(!h[k])continue a;r*=1-g[k];n+=a.stride[k]*e[k]}c+=r*a.data[n]}return c}t.exports=
function(a,b,l,u){switch(a.shape.length){case 0:return 0;case 1:return p(a,b);case 2:return g(a,b,l);case 3:return h(a,b,l,u);default:return e.apply(void 0,arguments)}};t.exports.d1=p;t.exports.d2=g;t.exports.d3=h},{}],436:[function(a,t,m){function p(b){if(!b)return e;for(var a=0;a<b.args.length;++a){var d=b.args[a];b.args[a]=0===a?{name:d,lvalue:!0,rvalue:!!b.rvalue,count:b.count||1}:{name:d,lvalue:!1,rvalue:!0,count:1}}b.thisVars||(b.thisVars=[]);b.localVars||(b.localVars=[]);return b}function g(b){for(var a=
[],d=0;d<b.args.length;++d)a.push("a"+d);a=new Function("P",["return function ",b.funcName,"_ndarrayops(",a.join(","),") {P(",a.join(","),");return a0}"].join(""));b=h({args:b.args,pre:p(b.pre),body:p(b.body),post:p(b.proc),funcName:b.funcName});return a(b)}var h=a("cwise-compiler"),e={body:"",args:[],thisVars:[],localVars:[]},n={add:"+",sub:"-",mul:"*",div:"/",mod:"%",band:"\x26",bor:"|",bxor:"^",lshift:"\x3c\x3c",rshift:"\x3e\x3e",rrshift:"\x3e\x3e\x3e"};(function(){for(var b in n){var a=n[b];m[b]=
g({args:["array","array","array"],body:{args:["a","b","c"],body:"a\x3db"+a+"c"},funcName:b});m[b+"eq"]=g({args:["array","array"],body:{args:["a","b"],body:"a"+a+"\x3db"},rvalue:!0,funcName:b+"eq"});m[b+"s"]=g({args:["array","array","scalar"],body:{args:["a","b","s"],body:"a\x3db"+a+"s"},funcName:b+"s"});m[b+"seq"]=g({args:["array","scalar"],body:{args:["a","s"],body:"a"+a+"\x3ds"},rvalue:!0,funcName:b+"seq"})}})();var b={not:"!",bnot:"~",neg:"-",recip:"1.0/"};(function(){for(var a in b){var c=b[a];
m[a]=g({args:["array","array"],body:{args:["a","b"],body:"a\x3d"+c+"b"},funcName:a});m[a+"eq"]=g({args:["array"],body:{args:["a"],body:"a\x3d"+c+"a"},rvalue:!0,count:2,funcName:a+"eq"})}})();var l={and:"\x26\x26",or:"||",eq:"\x3d\x3d\x3d",neq:"!\x3d\x3d",lt:"\x3c",gt:"\x3e",leq:"\x3c\x3d",geq:"\x3e\x3d"};(function(){for(var b in l){var a=l[b];m[b]=g({args:["array","array","array"],body:{args:["a","b","c"],body:"a\x3db"+a+"c"},funcName:b});m[b+"s"]=g({args:["array","array","scalar"],body:{args:["a",
"b","s"],body:"a\x3db"+a+"s"},funcName:b+"s"});m[b+"eq"]=g({args:["array","array"],body:{args:["a","b"],body:"a\x3da"+a+"b"},rvalue:!0,count:2,funcName:b+"eq"});m[b+"seq"]=g({args:["array","scalar"],body:{args:["a","s"],body:"a\x3da"+a+"s"},rvalue:!0,count:2,funcName:b+"seq"})}})();var u="abs acos asin atan ceil cos exp floor log round sin sqrt tan".split(" ");(function(){for(var b=0;b<u.length;++b){var a=u[b];m[a]=g({args:["array","array"],pre:{args:[],body:"this_f\x3dMath."+a,thisVars:["this_f"]},
body:{args:["a","b"],body:"a\x3dthis_f(b)",thisVars:["this_f"]},funcName:a});m[a+"eq"]=g({args:["array"],pre:{args:[],body:"this_f\x3dMath."+a,thisVars:["this_f"]},body:{args:["a"],body:"a\x3dthis_f(a)",thisVars:["this_f"]},rvalue:!0,count:2,funcName:a+"eq"})}})();var q=["max","min","atan2","pow"];(function(){for(var b=0;b<q.length;++b){var a=q[b];m[a]=g({args:["array","array","array"],pre:{args:[],body:"this_f\x3dMath."+a,thisVars:["this_f"]},body:{args:["a","b","c"],body:"a\x3dthis_f(b,c)",thisVars:["this_f"]},
funcName:a});m[a+"s"]=g({args:["array","array","scalar"],pre:{args:[],body:"this_f\x3dMath."+a,thisVars:["this_f"]},body:{args:["a","b","c"],body:"a\x3dthis_f(b,c)",thisVars:["this_f"]},funcName:a+"s"});m[a+"eq"]=g({args:["array","array"],pre:{args:[],body:"this_f\x3dMath."+a,thisVars:["this_f"]},body:{args:["a","b"],body:"a\x3dthis_f(a,b)",thisVars:["this_f"]},rvalue:!0,count:2,funcName:a+"eq"});m[a+"seq"]=g({args:["array","scalar"],pre:{args:[],body:"this_f\x3dMath."+a,thisVars:["this_f"]},body:{args:["a",
"b"],body:"a\x3dthis_f(a,b)",thisVars:["this_f"]},rvalue:!0,count:2,funcName:a+"seq"})}})();var d=["atan2","pow"];(function(){for(var b=0;b<d.length;++b){var a=d[b];m[a+"op"]=g({args:["array","array","array"],pre:{args:[],body:"this_f\x3dMath."+a,thisVars:["this_f"]},body:{args:["a","b","c"],body:"a\x3dthis_f(c,b)",thisVars:["this_f"]},funcName:a+"op"});m[a+"ops"]=g({args:["array","array","scalar"],pre:{args:[],body:"this_f\x3dMath."+a,thisVars:["this_f"]},body:{args:["a","b","c"],body:"a\x3dthis_f(c,b)",
thisVars:["this_f"]},funcName:a+"ops"});m[a+"opeq"]=g({args:["array","array"],pre:{args:[],body:"this_f\x3dMath."+a,thisVars:["this_f"]},body:{args:["a","b"],body:"a\x3dthis_f(b,a)",thisVars:["this_f"]},rvalue:!0,count:2,funcName:a+"opeq"});m[a+"opseq"]=g({args:["array","scalar"],pre:{args:[],body:"this_f\x3dMath."+a,thisVars:["this_f"]},body:{args:["a","b"],body:"a\x3dthis_f(b,a)",thisVars:["this_f"]},rvalue:!0,count:2,funcName:a+"opseq"})}})();m.any=h({args:["array"],pre:e,body:{args:[{name:"a",
lvalue:!1,rvalue:!0,count:1}],body:"if(a){return true}",localVars:[],thisVars:[]},post:{args:[],localVars:[],thisVars:[],body:"return false"},funcName:"any"});m.all=h({args:["array"],pre:e,body:{args:[{name:"x",lvalue:!1,rvalue:!0,count:1}],body:"if(!x){return false}",localVars:[],thisVars:[]},post:{args:[],localVars:[],thisVars:[],body:"return true"},funcName:"all"});m.sum=h({args:["array"],pre:{args:[],localVars:[],thisVars:["this_s"],body:"this_s\x3d0"},body:{args:[{name:"a",lvalue:!1,rvalue:!0,
count:1}],body:"this_s+\x3da",localVars:[],thisVars:["this_s"]},post:{args:[],localVars:[],thisVars:["this_s"],body:"return this_s"},funcName:"sum"});m.prod=h({args:["array"],pre:{args:[],localVars:[],thisVars:["this_s"],body:"this_s\x3d1"},body:{args:[{name:"a",lvalue:!1,rvalue:!0,count:1}],body:"this_s*\x3da",localVars:[],thisVars:["this_s"]},post:{args:[],localVars:[],thisVars:["this_s"],body:"return this_s"},funcName:"prod"});m.norm2squared=h({args:["array"],pre:{args:[],localVars:[],thisVars:["this_s"],
body:"this_s\x3d0"},body:{args:[{name:"a",lvalue:!1,rvalue:!0,count:2}],body:"this_s+\x3da*a",localVars:[],thisVars:["this_s"]},post:{args:[],localVars:[],thisVars:["this_s"],body:"return this_s"},funcName:"norm2squared"});m.norm2=h({args:["array"],pre:{args:[],localVars:[],thisVars:["this_s"],body:"this_s\x3d0"},body:{args:[{name:"a",lvalue:!1,rvalue:!0,count:2}],body:"this_s+\x3da*a",localVars:[],thisVars:["this_s"]},post:{args:[],localVars:[],thisVars:["this_s"],body:"return Math.sqrt(this_s)"},
funcName:"norm2"});m.norminf=h({args:["array"],pre:{args:[],localVars:[],thisVars:["this_s"],body:"this_s\x3d0"},body:{args:[{name:"a",lvalue:!1,rvalue:!0,count:4}],body:"if(-a\x3ethis_s){this_s\x3d-a}else if(a\x3ethis_s){this_s\x3da}",localVars:[],thisVars:["this_s"]},post:{args:[],localVars:[],thisVars:["this_s"],body:"return this_s"},funcName:"norminf"});m.norm1=h({args:["array"],pre:{args:[],localVars:[],thisVars:["this_s"],body:"this_s\x3d0"},body:{args:[{name:"a",lvalue:!1,rvalue:!0,count:3}],
body:"this_s+\x3da\x3c0?-a:a",localVars:[],thisVars:["this_s"]},post:{args:[],localVars:[],thisVars:["this_s"],body:"return this_s"},funcName:"norm1"});m.sup=h({args:["array"],pre:{body:"this_h\x3d-Infinity",args:[],thisVars:["this_h"],localVars:[]},body:{body:"if(_inline_1_arg0_\x3ethis_h)this_h\x3d_inline_1_arg0_",args:[{name:"_inline_1_arg0_",lvalue:!1,rvalue:!0,count:2}],thisVars:["this_h"],localVars:[]},post:{body:"return this_h",args:[],thisVars:["this_h"],localVars:[]}});m.inf=h({args:["array"],
pre:{body:"this_h\x3dInfinity",args:[],thisVars:["this_h"],localVars:[]},body:{body:"if(_inline_1_arg0_\x3cthis_h)this_h\x3d_inline_1_arg0_",args:[{name:"_inline_1_arg0_",lvalue:!1,rvalue:!0,count:2}],thisVars:["this_h"],localVars:[]},post:{body:"return this_h",args:[],thisVars:["this_h"],localVars:[]}});m.argmin=h({args:["index","array","shape"],pre:{body:"{this_v\x3dInfinity;this_i\x3d_inline_0_arg2_.slice(0)}",args:[{name:"_inline_0_arg0_",lvalue:!1,rvalue:!1,count:0},{name:"_inline_0_arg1_",lvalue:!1,
rvalue:!1,count:0},{name:"_inline_0_arg2_",lvalue:!1,rvalue:!0,count:1}],thisVars:["this_i","this_v"],localVars:[]},body:{body:"{if(_inline_1_arg1_\x3cthis_v){this_v\x3d_inline_1_arg1_;for(var _inline_1_k\x3d0;_inline_1_k\x3c_inline_1_arg0_.length;++_inline_1_k){this_i[_inline_1_k]\x3d_inline_1_arg0_[_inline_1_k]}}}",args:[{name:"_inline_1_arg0_",lvalue:!1,rvalue:!0,count:2},{name:"_inline_1_arg1_",lvalue:!1,rvalue:!0,count:2}],thisVars:["this_i","this_v"],localVars:["_inline_1_k"]},post:{body:"{return this_i}",
args:[],thisVars:["this_i"],localVars:[]}});m.argmax=h({args:["index","array","shape"],pre:{body:"{this_v\x3d-Infinity;this_i\x3d_inline_0_arg2_.slice(0)}",args:[{name:"_inline_0_arg0_",lvalue:!1,rvalue:!1,count:0},{name:"_inline_0_arg1_",lvalue:!1,rvalue:!1,count:0},{name:"_inline_0_arg2_",lvalue:!1,rvalue:!0,count:1}],thisVars:["this_i","this_v"],localVars:[]},body:{body:"{if(_inline_1_arg1_\x3ethis_v){this_v\x3d_inline_1_arg1_;for(var _inline_1_k\x3d0;_inline_1_k\x3c_inline_1_arg0_.length;++_inline_1_k){this_i[_inline_1_k]\x3d_inline_1_arg0_[_inline_1_k]}}}",
args:[{name:"_inline_1_arg0_",lvalue:!1,rvalue:!0,count:2},{name:"_inline_1_arg1_",lvalue:!1,rvalue:!0,count:2}],thisVars:["this_i","this_v"],localVars:["_inline_1_k"]},post:{body:"{return this_i}",args:[],thisVars:["this_i"],localVars:[]}});m.random=g({args:["array"],pre:{args:[],body:"this_f\x3dMath.random",thisVars:["this_f"]},body:{args:["a"],body:"a\x3dthis_f()",thisVars:["this_f"]},funcName:"random"});m.assign=g({args:["array","array"],body:{args:["a","b"],body:"a\x3db"},funcName:"assign"});
m.assigns=g({args:["array","scalar"],body:{args:["a","b"],body:"a\x3db"},funcName:"assigns"});m.equals=h({args:["array","array"],pre:e,body:{args:[{name:"x",lvalue:!1,rvalue:!0,count:1},{name:"y",lvalue:!1,rvalue:!0,count:1}],body:"if(x!\x3d\x3dy){return false}",localVars:[],thisVars:[]},post:{args:[],localVars:[],thisVars:[],body:"return true"},funcName:"equals"})},{"cwise-compiler":136}],437:[function(a,t,m){var p=a("ndarray"),g=a("./doConvert.js");t.exports=function(a,e){for(var h=[],b=a,l=1;Array.isArray(b);)h.push(b.length),
l*=b.length,b=b[0];if(0===h.length)return p();e||(e=p(new Float64Array(l),h));g(e,a);return e}},{"./doConvert.js":438,ndarray:442}],438:[function(a,t,m){t.exports=a("cwise-compiler")({args:["array","scalar","index"],pre:{body:"{}",args:[],thisVars:[],localVars:[]},body:{body:"{\nvar _inline_1_v\x3d_inline_1_arg1_,_inline_1_i\nfor(_inline_1_i\x3d0;_inline_1_i\x3c_inline_1_arg2_.length-1;++_inline_1_i) {\n_inline_1_v\x3d_inline_1_v[_inline_1_arg2_[_inline_1_i]]\n}\n_inline_1_arg0_\x3d_inline_1_v[_inline_1_arg2_[_inline_1_arg2_.length-1]]\n}",
args:[{name:"_inline_1_arg0_",lvalue:!0,rvalue:!1,count:1},{name:"_inline_1_arg1_",lvalue:!1,rvalue:!0,count:1},{name:"_inline_1_arg2_",lvalue:!1,rvalue:!0,count:4}],thisVars:[],localVars:["_inline_1_i","_inline_1_v"]},post:{body:"{}",args:[],thisVars:[],localVars:[]},funcName:"convert",blockSize:64})},{"cwise-compiler":136}],439:[function(a,t,m){function p(b){switch(b){case "uint8":return[n.mallocUint8,n.freeUint8];case "uint16":return[n.mallocUint16,n.freeUint16];case "uint32":return[n.mallocUint32,
n.freeUint32];case "int8":return[n.mallocInt8,n.freeInt8];case "int16":return[n.mallocInt16,n.freeInt16];case "int32":return[n.mallocInt32,n.freeInt32];case "float32":return[n.mallocFloat,n.freeFloat];case "float64":return[n.mallocDouble,n.freeDouble];default:return null}}function g(b){for(var a=[],e=0;e<b;++e)a.push("s"+e);for(e=0;e<b;++e)a.push("n"+e);for(e=1;e<b;++e)a.push("d"+e);for(e=1;e<b;++e)a.push("e"+e);for(e=1;e<b;++e)a.push("f"+e);return a}function h(b,a){function e(b){return"generic"===
a?["data.get(",b,")"].join(""):["data[",b,"]"].join("")}function h(b,c){return"generic"===a?["data.set(",b,",",c,")"].join(""):["data[",b,"]\x3d",c].join("")}var d=["'use strict'"],f=["ndarrayInsertionSort",b.join("d"),a].join(""),c=["left","right","data","offset"].concat(g(b.length)),k=p(a),l=["i,j,cptr,ptr\x3dleft*s0+offset"];if(1<b.length){for(var n=[],z=1;z<b.length;++z)l.push("i"+z),n.push("n"+z);k?l.push("scratch\x3dmalloc("+n.join("*")+")"):l.push("scratch\x3dnew Array("+n.join("*")+")");l.push("dptr",
"sptr","a","b")}else l.push("scratch");d.push(["function ",f,"(",c.join(","),"){var ",l.join(",")].join(""),"for(i\x3dleft+1;i\x3c\x3dright;++i){","j\x3di;ptr+\x3ds0","cptr\x3dptr");if(1<b.length){d.push("dptr\x3d0;sptr\x3dptr");for(z=b.length-1;0<=z;--z)c=b[z],0!==c&&d.push(["for(i",c,"\x3d0;i",c,"\x3cn",c,";++i",c,"){"].join(""));d.push("scratch[dptr++]\x3d",e("sptr"));for(z=0;z<b.length;++z)c=b[z],0!==c&&d.push("sptr+\x3dd"+c,"}");d.push("__g:while(j--\x3eleft){","dptr\x3d0","sptr\x3dcptr-s0");
for(z=1;z<b.length;++z)1===z&&d.push("__l:"),d.push(["for(i",z,"\x3d0;i",z,"\x3cn",z,";++i",z,"){"].join(""));d.push(["a\x3d",e("sptr"),"\nb\x3dscratch[dptr]\nif(a\x3cb){break __g}\nif(a\x3eb){break __l}"].join(""));for(z=b.length-1;1<=z;--z)d.push("sptr+\x3de"+z,"dptr+\x3df"+z,"}");d.push("dptr\x3dcptr;sptr\x3dcptr-s0");for(z=b.length-1;0<=z;--z)c=b[z],0!==c&&d.push(["for(i",c,"\x3d0;i",c,"\x3cn",c,";++i",c,"){"].join(""));d.push(h("dptr",e("sptr")));for(z=0;z<b.length;++z)c=b[z],0!==c&&d.push(["dptr+\x3dd",
c,";sptr+\x3dd",c].join(""),"}");d.push("cptr-\x3ds0\n}");d.push("dptr\x3dcptr;sptr\x3d0");for(z=b.length-1;0<=z;--z)c=b[z],0!==c&&d.push(["for(i",c,"\x3d0;i",c,"\x3cn",c,";++i",c,"){"].join(""));d.push(h("dptr","scratch[sptr++]"));for(z=0;z<b.length;++z)c=b[z],0!==c&&d.push("dptr+\x3dd"+c,"}")}else d.push("scratch\x3d"+e("ptr"),"while((j--\x3eleft)\x26\x26("+e("cptr-s0")+"\x3escratch)){",h("cptr",e("cptr-s0")),"cptr-\x3ds0","}",h("cptr","scratch"));d.push("}");1<b.length&&k&&d.push("free(scratch)");
d.push("} return "+f);if(k)return b=new Function("malloc","free",d.join("\n")),b(k[0],k[1]);b=new Function(d.join("\n"));return b()}function e(b,a,e){function h(b){return["(offset+",b,"*s0)"].join("")}function d(b){return"generic"===a?["data.get(",b,")"].join(""):["data[",b,"]"].join("")}function f(b,c){return"generic"===a?["data.set(",b,",",c,")"].join(""):["data[",b,"]\x3d",c].join("")}function c(a,c,d){if(1===a.length)D.push("ptr0\x3d"+h(a[0]));else for(var f=0;f<a.length;++f)D.push(["b_ptr",f,
"\x3ds0*",a[f]].join(""));c&&D.push("pivot_ptr\x3d0");D.push("ptr_shift\x3doffset");for(f=b.length-1;0<=f;--f){var e=b[f];0!==e&&D.push(["for(i",e,"\x3d0;i",e,"\x3cn",e,";++i",e,"){"].join(""))}if(1<a.length)for(f=0;f<a.length;++f)D.push(["ptr",f,"\x3db_ptr",f,"+ptr_shift"].join(""));D.push(d);c&&D.push("++pivot_ptr");for(f=0;f<b.length;++f)e=b[f],0!==e&&(1<a.length?D.push("ptr_shift+\x3dd"+e):D.push("ptr0+\x3dd"+e),D.push("}"))}function k(a,c,d,f){if(1===c.length)D.push("ptr0\x3d"+h(c[0]));else{for(var e=
0;e<c.length;++e)D.push(["b_ptr",e,"\x3ds0*",c[e]].join(""));D.push("ptr_shift\x3doffset")}d&&D.push("pivot_ptr\x3d0");a&&D.push(a+":");for(e=1;e<b.length;++e)D.push(["for(i",e,"\x3d0;i",e,"\x3cn",e,";++i",e,"){"].join(""));if(1<c.length)for(e=0;e<c.length;++e)D.push(["ptr",e,"\x3db_ptr",e,"+ptr_shift"].join(""));D.push(f);for(e=b.length-1;1<=e;--e)d&&D.push("pivot_ptr+\x3df"+e),1<c.length?D.push("ptr_shift+\x3de"+e):D.push("ptr0+\x3de"+e),D.push("}")}function l(){1<b.length&&E&&D.push("free(pivot1)",
"free(pivot2)")}function n(a,c){a="el"+a;c="el"+c;if(1<b.length){var f="__l"+ ++K;k(f,[a,c],!1,["comp\x3d",d("ptr0"),"-",d("ptr1"),"\nif(comp\x3e0){tmp0\x3d",a,";",a,"\x3d",c,";",c,"\x3dtmp0;break ",f,"}\nif(comp\x3c0){break ",f,"}"].join(""))}else D.push(["if(",d(h(a)),"\x3e",d(h(c)),"){tmp0\x3d",a,";",a,"\x3d",c,";",c,"\x3dtmp0}"].join(""))}function u(a,e){1<b.length?c([a,e],!1,f("ptr0",d("ptr1"))):D.push(f(h(a),d(h(e))))}function m(a,c,f){if(1<b.length){var e="__l"+ ++K;k(e,[c],!0,[a,"\x3d",d("ptr0"),
"-pivot",f,"[pivot_ptr]\nif(",a,"!\x3d\x3d0){break ",e,"}"].join(""))}else D.push([a,"\x3d",d(h(c)),"-pivot",f].join(""))}function y(a,e){1<b.length?c([a,e],!1,["tmp\x3d",d("ptr0"),"\n",f("ptr0",d("ptr1")),"\n",f("ptr1","tmp")].join("")):D.push(["ptr0\x3d",h(a),"\nptr1\x3d",h(e),"\ntmp\x3d",d("ptr0"),"\n",f("ptr0",d("ptr1")),"\n",f("ptr1","tmp")].join(""))}function w(a,e,k){1<b.length?(c([a,e,k],!1,["tmp\x3d",d("ptr0"),"\n",f("ptr0",d("ptr1")),"\n",f("ptr1",d("ptr2")),"\n",f("ptr2","tmp")].join("")),
D.push("++"+e,"--"+k)):D.push(["ptr0\x3d",h(a),"\nptr1\x3d",h(e),"\nptr2\x3d",h(k),"\n++",e,"\n--",k,"\ntmp\x3d",d("ptr0"),"\n",f("ptr0",d("ptr1")),"\n",f("ptr1",d("ptr2")),"\n",f("ptr2","tmp")].join(""))}function x(b,a){y(b,a);D.push("--"+a)}function t(a,e,k){1<b.length?c([a,e],!0,[f("ptr0",d("ptr1")),"\n",f("ptr1",["pivot",k,"[pivot_ptr]"].join(""))].join("")):D.push(f(h(a),d(h(e))),f(h(e),"pivot"+k))}function B(a,c){D.push(["if((",c,"-",a,")\x3c\x3d32){\ninsertionSort(",a,",",c,",data,offset,",
g(b.length).join(","),")\n}else{\n",G,"(",a,",",c,",data,offset,",g(b.length).join(","),")\n}"].join(""))}function C(a,f,e){1<b.length?(D.push(["__l",++K,":while(true){"].join("")),c([a],!0,["if(",d("ptr0"),"!\x3d\x3dpivot",f,"[pivot_ptr]){break __l",K,"}"].join("")),D.push(e,"}")):D.push(["while(",d(h(a)),"\x3d\x3d\x3dpivot",f,"){",e,"}"].join(""))}var D=["'use strict'"],G=["ndarrayQuickSort",b.join("d"),a].join(""),H=["left","right","data","offset"].concat(g(b.length)),E=p(a),K=0;D.push(["function ",
G,"(",H.join(","),"){"].join(""));H="sixth\x3d((right-left+1)/6)|0 index1\x3dleft+sixth index5\x3dright-sixth index3\x3d(left+right)\x3e\x3e1 index2\x3dindex3-sixth index4\x3dindex3+sixth el1\x3dindex1 el2\x3dindex2 el3\x3dindex3 el4\x3dindex4 el5\x3dindex5 less\x3dleft+1 great\x3dright-1 pivots_are_equal\x3dtrue tmp tmp0 x y z k ptr0 ptr1 ptr2 comp_pivot1\x3d0 comp_pivot2\x3d0 comp\x3d0".split(" ");if(1<b.length){for(var I=[],J=1;J<b.length;++J)I.push("n"+J),H.push("i"+J);for(J=0;8>J;++J)H.push("b_ptr"+
J);H.push("ptr3","ptr4","ptr5","ptr6","ptr7","pivot_ptr","ptr_shift","elementSize\x3d"+I.join("*"));E?H.push("pivot1\x3dmalloc(elementSize)","pivot2\x3dmalloc(elementSize)"):H.push("pivot1\x3dnew Array(elementSize),pivot2\x3dnew Array(elementSize)")}else H.push("pivot1","pivot2");D.push("var "+H.join(","));n(1,2);n(4,5);n(1,3);n(2,3);n(1,4);n(3,4);n(2,5);n(2,3);n(4,5);1<b.length?c("el1 el2 el3 el4 el5 index1 index3 index5".split(" "),!0,["pivot1[pivot_ptr]\x3d",d("ptr1"),"\npivot2[pivot_ptr]\x3d",
d("ptr3"),"\npivots_are_equal\x3dpivots_are_equal\x26\x26(pivot1[pivot_ptr]\x3d\x3d\x3dpivot2[pivot_ptr])\nx\x3d",d("ptr0"),"\ny\x3d",d("ptr2"),"\nz\x3d",d("ptr4"),"\n",f("ptr5","x"),"\n",f("ptr6","y"),"\n",f("ptr7","z")].join("")):D.push(["pivot1\x3d",d(h("el2")),"\npivot2\x3d",d(h("el4")),"\npivots_are_equal\x3dpivot1\x3d\x3d\x3dpivot2\nx\x3d",d(h("el1")),"\ny\x3d",d(h("el3")),"\nz\x3d",d(h("el5")),"\n",f(h("index1"),"x"),"\n",f(h("index3"),"y"),"\n",f(h("index5"),"z")].join(""));u("index2","left");
u("index4","right");D.push("if(pivots_are_equal){");D.push("for(k\x3dless;k\x3c\x3dgreat;++k){");m("comp","k",1);D.push("if(comp\x3d\x3d\x3d0){continue}");D.push("if(comp\x3c0){");D.push("if(k!\x3d\x3dless){");y("k","less");D.push("}");D.push("++less");D.push("}else{");D.push("while(true){");m("comp","great",1);D.push("if(comp\x3e0){");D.push("great--");D.push("}else if(comp\x3c0){");w("k","less","great");D.push("break");D.push("}else{");x("k","great");D.push("break");D.push("}");D.push("}");D.push("}");
D.push("}");D.push("}else{");D.push("for(k\x3dless;k\x3c\x3dgreat;++k){");m("comp_pivot1","k",1);D.push("if(comp_pivot1\x3c0){");D.push("if(k!\x3d\x3dless){");y("k","less");D.push("}");D.push("++less");D.push("}else{");m("comp_pivot2","k",2);D.push("if(comp_pivot2\x3e0){");D.push("while(true){");m("comp","great",2);D.push("if(comp\x3e0){");D.push("if(--great\x3ck){break}");D.push("continue");D.push("}else{");m("comp","great",1);D.push("if(comp\x3c0){");w("k","less","great");D.push("}else{");x("k",
"great");D.push("}");D.push("break");D.push("}");D.push("}");D.push("}");D.push("}");D.push("}");D.push("}");t("left","(less-1)",1);t("right","(great+1)",2);B("left","(less-2)");B("(great+2)","right");D.push("if(pivots_are_equal){");l();D.push("return");D.push("}");D.push("if(less\x3cindex1\x26\x26great\x3eindex5){");C("less",1,"++less");C("great",2,"--great");D.push("for(k\x3dless;k\x3c\x3dgreat;++k){");m("comp_pivot1","k",1);D.push("if(comp_pivot1\x3d\x3d\x3d0){");D.push("if(k!\x3d\x3dless){");
y("k","less");D.push("}");D.push("++less");D.push("}else{");m("comp_pivot2","k",2);D.push("if(comp_pivot2\x3d\x3d\x3d0){");D.push("while(true){");m("comp","great",2);D.push("if(comp\x3d\x3d\x3d0){");D.push("if(--great\x3ck){break}");D.push("continue");D.push("}else{");m("comp","great",1);D.push("if(comp\x3c0){");w("k","less","great");D.push("}else{");x("k","great");D.push("}");D.push("break");D.push("}");D.push("}");D.push("}");D.push("}");D.push("}");D.push("}");l();B("less","great");D.push("}return "+
G);if(1<b.length&&E)return H=new Function("insertionSort","malloc","free",D.join("\n")),H(e,E[0],E[1]);H=new Function("insertionSort",D.join("\n"));return H(e)}var n=a("typedarray-pool");t.exports=function(b,a){var l=["'use strict'"],n=["ndarraySortWrapper",b.join("d"),a].join("");l.push(["function ",n,"(array){"].join(""));for(var d=["data\x3darray.data,offset\x3darray.offset|0,shape\x3darray.shape,stride\x3darray.stride"],f=0;f<b.length;++f)d.push(["s",f,"\x3dstride[",f,"]|0,n",f,"\x3dshape[",f,
"]|0"].join(""));var c=Array(b.length),k=[];for(f=0;f<b.length;++f){var r=b[f];0!==r&&(c[r]=0===k.length?"1":k.join("*"),k.push("n"+r))}var p=k=-1;for(f=0;f<b.length;++f)r=b[f],0!==r&&(0<k?d.push(["d",r,"\x3ds",r,"-d",k,"*n",k].join("")):d.push(["d",r,"\x3ds",r].join("")),k=r),r=b.length-1-f,0!==r&&(0<p?d.push(["e",r,"\x3ds",r,"-e",p,"*n",p,",f",r,"\x3d",c[r],"-f",p,"*n",p].join("")):d.push(["e",r,"\x3ds",r,",f",r,"\x3d",c[r]].join("")),p=r);l.push("var "+d.join(","));d=["0","n0-1","data","offset"].concat(g(b.length));
l.push(["if(n0\x3c\x3d32){insertionSort(",d.join(","),")}else{quickSort(",d.join(","),")}"].join(""));l.push("}return "+n);l=new Function("insertionSort","quickSort",l.join("\n"));n=h(b,a);b=e(b,a,n);return l(n,b)}},{"typedarray-pool":529}],440:[function(a,t,m){var p=a("./lib/compile_sort.js"),g={};t.exports=function(a){var e=a.order,h=a.dtype,b=[e,h].join(":"),l=g[b];l||(g[b]=l=p(e,h));l(a);return a}},{"./lib/compile_sort.js":439}],441:[function(a,t,m){var p=a("ndarray-linear-interpolate"),g=a("cwise/lib/wrapper")({args:["index",
"array","scalar","scalar","scalar"],pre:{body:"{this_warped\x3dnew Array(_inline_3_arg4_)}",args:[{name:"_inline_3_arg0_",lvalue:!1,rvalue:!1,count:0},{name:"_inline_3_arg1_",lvalue:!1,rvalue:!1,count:0},{name:"_inline_3_arg2_",lvalue:!1,rvalue:!1,count:0},{name:"_inline_3_arg3_",lvalue:!1,rvalue:!1,count:0},{name:"_inline_3_arg4_",lvalue:!1,rvalue:!0,count:1}],thisVars:["this_warped"],localVars:[]},body:{body:"{_inline_4_arg2_(this_warped,_inline_4_arg0_),_inline_4_arg1_\x3d_inline_4_arg3_.apply(void 0,this_warped)}",
args:[{name:"_inline_4_arg0_",lvalue:!1,rvalue:!0,count:1},{name:"_inline_4_arg1_",lvalue:!0,rvalue:!1,count:1},{name:"_inline_4_arg2_",lvalue:!1,rvalue:!0,count:1},{name:"_inline_4_arg3_",lvalue:!1,rvalue:!0,count:1},{name:"_inline_4_arg4_",lvalue:!1,rvalue:!1,count:0}],thisVars:["this_warped"],localVars:[]},post:{body:"{}",args:[],thisVars:[],localVars:[]},debug:!1,funcName:"warpND",blockSize:64}),h=a("cwise/lib/wrapper")({args:["index","array","scalar","scalar","scalar"],pre:{body:"{this_warped\x3d[0]}",
args:[],thisVars:["this_warped"],localVars:[]},body:{body:"{_inline_7_arg2_(this_warped,_inline_7_arg0_),_inline_7_arg1_\x3d_inline_7_arg3_(_inline_7_arg4_,this_warped[0])}",args:[{name:"_inline_7_arg0_",lvalue:!1,rvalue:!0,count:1},{name:"_inline_7_arg1_",lvalue:!0,rvalue:!1,count:1},{name:"_inline_7_arg2_",lvalue:!1,rvalue:!0,count:1},{name:"_inline_7_arg3_",lvalue:!1,rvalue:!0,count:1},{name:"_inline_7_arg4_",lvalue:!1,rvalue:!0,count:1}],thisVars:["this_warped"],localVars:[]},post:{body:"{}",
args:[],thisVars:[],localVars:[]},debug:!1,funcName:"warp1D",blockSize:64}),e=a("cwise/lib/wrapper")({args:["index","array","scalar","scalar","scalar"],pre:{body:"{this_warped\x3d[0,0]}",args:[],thisVars:["this_warped"],localVars:[]},body:{body:"{_inline_10_arg2_(this_warped,_inline_10_arg0_),_inline_10_arg1_\x3d_inline_10_arg3_(_inline_10_arg4_,this_warped[0],this_warped[1])}",args:[{name:"_inline_10_arg0_",lvalue:!1,rvalue:!0,count:1},{name:"_inline_10_arg1_",lvalue:!0,rvalue:!1,count:1},{name:"_inline_10_arg2_",
lvalue:!1,rvalue:!0,count:1},{name:"_inline_10_arg3_",lvalue:!1,rvalue:!0,count:1},{name:"_inline_10_arg4_",lvalue:!1,rvalue:!0,count:1}],thisVars:["this_warped"],localVars:[]},post:{body:"{}",args:[],thisVars:[],localVars:[]},debug:!1,funcName:"warp2D",blockSize:64}),n=a("cwise/lib/wrapper")({args:["index","array","scalar","scalar","scalar"],pre:{body:"{this_warped\x3d[0,0,0]}",args:[],thisVars:["this_warped"],localVars:[]},body:{body:"{_inline_13_arg2_(this_warped,_inline_13_arg0_),_inline_13_arg1_\x3d_inline_13_arg3_(_inline_13_arg4_,this_warped[0],this_warped[1],this_warped[2])}",
args:[{name:"_inline_13_arg0_",lvalue:!1,rvalue:!0,count:1},{name:"_inline_13_arg1_",lvalue:!0,rvalue:!1,count:1},{name:"_inline_13_arg2_",lvalue:!1,rvalue:!0,count:1},{name:"_inline_13_arg3_",lvalue:!1,rvalue:!0,count:1},{name:"_inline_13_arg4_",lvalue:!1,rvalue:!0,count:1}],thisVars:["this_warped"],localVars:[]},post:{body:"{}",args:[],thisVars:[],localVars:[]},debug:!1,funcName:"warp3D",blockSize:64});t.exports=function(b,a,u){switch(a.shape.length){case 1:h(b,u,p.d1,a);break;case 2:e(b,u,p.d2,
a);break;case 3:n(b,u,p.d3,a);break;default:g(b,u,p.bind(void 0,a),a.shape.length)}return b}},{"cwise/lib/wrapper":139,"ndarray-linear-interpolate":435}],442:[function(a,t,m){function p(b,a){return b[0]-a[0]}function g(){var b=this.stride,a=Array(b.length),f;for(f=0;f<a.length;++f)a[f]=[Math.abs(b[f]),f];a.sort(p);b=Array(a.length);for(f=0;f<b.length;++f)b[f]=a[f][1];return b}function h(b,a){var d=["View",a,"d",b].join("");0>a&&(d="View_Nil"+b);var c="generic"===b;if(-1===a)return a=new Function("function "+
d+"(a){this.data\x3da;};var proto\x3d"+d+".prototype;proto.dtype\x3d'"+b+"';proto.index\x3dfunction(){return -1};proto.size\x3d0;proto.dimension\x3d-1;proto.shape\x3dproto.stride\x3dproto.order\x3d[];proto.lo\x3dproto.hi\x3dproto.transpose\x3dproto.step\x3dfunction(){return new "+d+"(this.data);};proto.get\x3dproto.set\x3dfunction(){};proto.pick\x3dfunction(){return null};return function construct_"+d+"(a){return new "+d+"(a);}"),a();if(0===a)return a=new Function("TrivialArray","function "+d+"(a,d) {this.data \x3d a;this.offset \x3d d};var proto\x3d"+
d+".prototype;proto.dtype\x3d'"+b+"';proto.index\x3dfunction(){return this.offset};proto.dimension\x3d0;proto.size\x3d1;proto.shape\x3dproto.stride\x3dproto.order\x3d[];proto.lo\x3dproto.hi\x3dproto.transpose\x3dproto.step\x3dfunction "+d+"_copy() {return new "+d+"(this.data,this.offset)};proto.pick\x3dfunction "+d+"_pick(){return TrivialArray(this.data);};proto.valueOf\x3dproto.get\x3dfunction "+d+"_get(){return "+(c?"this.data.get(this.offset)":"this.data[this.offset]")+"};proto.set\x3dfunction "+
d+"_set(v){return "+(c?"this.data.set(this.offset,v)":"this.data[this.offset]\x3dv")+"};return function construct_"+d+"(a,b,c,d){return new "+d+"(a,d)}"),a(u[b][0]);var e=["'use strict'"];var h=n(a),l=h.map(function(b){return"i"+b}),q="this.offset+"+h.map(function(b){return"this.stride["+b+"]*i"+b}).join("+"),p=h.map(function(b){return"b"+b}).join(","),m=h.map(function(b){return"c"+b}).join(",");e.push("function "+d+"(a,"+p+","+m+",d){this.data\x3da","this.shape\x3d["+p+"]","this.stride\x3d["+m+"]",
"this.offset\x3dd|0}","var proto\x3d"+d+".prototype","proto.dtype\x3d'"+b+"'","proto.dimension\x3d"+a);e.push("Object.defineProperty(proto,'size',{get:function "+d+"_size(){return "+h.map(function(b){return"this.shape["+b+"]"}).join("*"),"}})");1===a?e.push("proto.order\x3d[0]"):(e.push("Object.defineProperty(proto,'order',{get:"),4>a?(e.push("function "+d+"_order(){"),2===a?e.push("return (Math.abs(this.stride[0])\x3eMath.abs(this.stride[1]))?[1,0]:[0,1]}})"):3===a&&e.push("var s0\x3dMath.abs(this.stride[0]),s1\x3dMath.abs(this.stride[1]),s2\x3dMath.abs(this.stride[2]);if(s0\x3es1){if(s1\x3es2){return [2,1,0];}else if(s0\x3es2){return [1,2,0];}else{return [1,0,2];}}else if(s0\x3es2){return [2,0,1];}else if(s2\x3es1){return [0,1,2];}else{return [0,2,1];}}})")):
e.push("ORDER})"));e.push("proto.set\x3dfunction "+d+"_set("+l.join(",")+",v){");c?e.push("return this.data.set("+q+",v)}"):e.push("return this.data["+q+"]\x3dv}");e.push("proto.get\x3dfunction "+d+"_get("+l.join(",")+"){");c?e.push("return this.data.get("+q+")}"):e.push("return this.data["+q+"]}");e.push("proto.index\x3dfunction "+d+"_index(",l.join(),"){return "+q+"}");e.push("proto.hi\x3dfunction "+d+"_hi("+l.join(",")+"){return new "+d+"(this.data,"+h.map(function(b){return["(typeof i",b,"!\x3d\x3d'number'||i",
b,"\x3c0)?this.shape[",b,"]:i",b,"|0"].join("")}).join(",")+","+h.map(function(b){return"this.stride["+b+"]"}).join(",")+",this.offset)}");c=h.map(function(b){return"a"+b+"\x3dthis.shape["+b+"]"});q=h.map(function(b){return"c"+b+"\x3dthis.stride["+b+"]"});e.push("proto.lo\x3dfunction "+d+"_lo("+l.join(",")+"){var b\x3dthis.offset,d\x3d0,"+c.join(",")+","+q.join(","));for(c=0;c<a;++c)e.push("if(typeof i"+c+"\x3d\x3d\x3d'number'\x26\x26i"+c+"\x3e\x3d0){d\x3di"+c+"|0;b+\x3dc"+c+"*d;a"+c+"-\x3dd}");e.push("return new "+
d+"(this.data,"+h.map(function(b){return"a"+b}).join(",")+","+h.map(function(b){return"c"+b}).join(",")+",b)}");e.push("proto.step\x3dfunction "+d+"_step("+l.join(",")+"){var "+h.map(function(b){return"a"+b+"\x3dthis.shape["+b+"]"}).join(",")+","+h.map(function(b){return"b"+b+"\x3dthis.stride["+b+"]"}).join(",")+",c\x3dthis.offset,d\x3d0,ceil\x3dMath.ceil");for(c=0;c<a;++c)e.push("if(typeof i"+c+"\x3d\x3d\x3d'number'){d\x3di"+c+"|0;if(d\x3c0){c+\x3db"+c+"*(a"+c+"-1);a"+c+"\x3dceil(-a"+c+"/d)}else{a"+
c+"\x3dceil(a"+c+"/d)}b"+c+"*\x3dd}");e.push("return new "+d+"(this.data,"+h.map(function(b){return"a"+b}).join(",")+","+h.map(function(b){return"b"+b}).join(",")+",c)}");q=Array(a);p=Array(a);for(c=0;c<a;++c)q[c]="a[i"+c+"]",p[c]="b[i"+c+"]";e.push("proto.transpose\x3dfunction "+d+"_transpose("+l+"){"+l.map(function(b,a){return b+"\x3d("+b+"\x3d\x3d\x3dundefined?"+a+":"+b+"|0)"}).join(";"),"var a\x3dthis.shape,b\x3dthis.stride;return new "+d+"(this.data,"+q.join(",")+","+p.join(",")+",this.offset)}");
e.push("proto.pick\x3dfunction "+d+"_pick("+l+"){var a\x3d[],b\x3d[],c\x3dthis.offset");for(c=0;c<a;++c)e.push("if(typeof i"+c+"\x3d\x3d\x3d'number'\x26\x26i"+c+"\x3e\x3d0){c\x3d(c+this.stride["+c+"]*i"+c+")|0}else{a.push(this.shape["+c+"]);b.push(this.stride["+c+"])}");e.push("var ctor\x3dCTOR_LIST[a.length+1];return ctor(this.data,a,b,c)}");e.push("return function construct_"+d+"(data,shape,stride,offset){return new "+d+"(data,"+h.map(function(b){return"shape["+b+"]"}).join(",")+","+h.map(function(b){return"stride["+
b+"]"}).join(",")+",offset)}");a=new Function("CTOR_LIST","ORDER",e.join("\n"));return a(u[b],g)}function e(a){if(b(a))return"buffer";if(l)switch(Object.prototype.toString.call(a)){case "[object Float64Array]":return"float64";case "[object Float32Array]":return"float32";case "[object Int8Array]":return"int8";case "[object Int16Array]":return"int16";case "[object Int32Array]":return"int32";case "[object Uint8Array]":return"uint8";case "[object Uint16Array]":return"uint16";case "[object Uint32Array]":return"uint32";
case "[object Uint8ClampedArray]":return"uint8_clamped"}return Array.isArray(a)?"array":"generic"}var n=a("iota-array"),b=a("is-buffer"),l="undefined"!==typeof Float64Array,u={float32:[],float64:[],int8:[],int16:[],int32:[],uint8:[],uint16:[],uint32:[],array:[],uint8_clamped:[],buffer:[],generic:[]};(function(){for(var b in u)u[b].push(h(b,-1))});t.exports=function(b,a,f,c){if(void 0===b){var d=u.array[0];return d([])}"number"===typeof b&&(b=[b]);void 0===a&&(a=[b.length]);d=a.length;if(void 0===
f){f=Array(d);for(var g=d-1,l=1;0<=g;--g)f[g]=l,l*=a[g]}if(void 0===c)for(g=c=0;g<d;++g)0>f[g]&&(c-=(a[g]-1)*f[g]);g=e(b);for(l=u[g];l.length<=d+1;)l.push(h(g,l.length-1));d=l[d+1];return d(b,a,f,c)}},{"iota-array":408,"is-buffer":410}],443:[function(a,t,m){var p=a("double-bits"),g=Math.pow(2,-1074);t.exports=function(a,e){if(isNaN(a)||isNaN(e))return NaN;if(a===e)return a;if(0===a)return 0>e?-g:g;var h=p.hi(a),b=p.lo(a);e>a===0<a?4294967295===b?(h+=1,b=0):b+=1:0===b?(b=4294967295,--h):--b;return p.pack(b,
h)}},{"double-bits":158}],444:[function(a,t,m){function p(b,a,e,d){return["C",b,a,e,d,e,d]}function g(b,a,e,d,f,c){return["C",b/3+2/3*e,a/3+2/3*d,f/3+2/3*e,c/3+2/3*d,f,c]}function h(a,g,q,d,f,c,k,r,p,z){if(z)m=z[0],c=z[1],u=z[2],v=z[3];else{m=e(a,g,-f);a=m.x;g=m.y;m=e(r,p,-f);r=m.x;p=m.y;m=(a-r)/2;u=(g-p)/2;v=m*m/(q*q)+u*u/(d*d);1<v&&(v=Math.sqrt(v),q*=v,d*=v);v=q*q;var l=d*d;c=(c==k?-1:1)*Math.sqrt(Math.abs((v*l-v*u*u-l*m*m)/(v*u*u+l*m*m)));Infinity==c&&(c=1);var u=c*q*u/d+(a+r)/2,v=c*-d*m/q+(g+
p)/2,m=Math.asin(((g-v)/d).toFixed(9));c=Math.asin(((p-v)/d).toFixed(9));m=a<u?n-m:m;c=r<u?n-c:c;0>m&&(m=2*n+m);0>c&&(c=2*n+c);k&&m>c&&(m-=2*n);!k&&c>m&&(c-=2*n)}if(Math.abs(c-m)>b){var t=c;l=r;var B=p;c=m+b*(k&&c>m?1:-1);r=u+q*Math.cos(c);p=v+d*Math.sin(c);t=h(r,p,q,d,f,0,k,l,B,[c,t,u,v])}k=Math.tan((c-m)/4);q=4/3*q*k;d=4/3*d*k;a=[2*a-(a+q*Math.sin(m)),2*g-(g-d*Math.cos(m)),r+q*Math.sin(c),p-d*Math.cos(c),r,p];if(z)return a;t&&(a=a.concat(t));for(z=0;z<a.length;)g=e(a[z],a[z+1],f),a[z++]=g.x,a[z++]=
g.y;return a}function e(b,a,e){return{x:b*Math.cos(e)-a*Math.sin(e),y:b*Math.sin(e)+a*Math.cos(e)}}var n=Math.PI,b=n/180*120;t.exports=function(b){for(var a,e=[],d=0,f=0,c=0,k=0,l=null,v=null,z=0,m=0,y=0,w=b.length;y<w;y++){var x=b[y],t=x[0];switch(t){case "M":c=x[1];k=x[2];break;case "A":x=h(z,m,x[1],x[2],n/180*x[3],x[4],x[5],x[6],x[7]);x.unshift("C");7<x.length&&(e.push(x.splice(0,7)),x.unshift("C"));break;case "S":if("C"==a||"S"==a)z+=z-d,m+=m-f;x=["C",z,m,x[1],x[2],x[3],x[4]];break;case "T":"Q"==
a||"T"==a?(l=2*z-l,v=2*m-v):(l=z,v=m);x=g(z,m,l,v,x[1],x[2]);break;case "Q":l=x[1];v=x[2];x=g(z,m,x[1],x[2],x[3],x[4]);break;case "L":x=p(z,m,x[1],x[2]);break;case "H":x=p(z,m,x[1],m);break;case "V":x=p(z,m,z,x[1]);break;case "Z":x=p(z,m,c,k)}a=t;z=x[x.length-2];m=x[x.length-1];4<x.length?(d=x[x.length-4],f=x[x.length-3]):(d=z,f=m);e.push(x)}return e}},{}],445:[function(a,t,m){m.vertexNormals=function(a,g,h){var e=g.length,n=Array(e);h=void 0===h?1E-6:h;for(var b=0;b<e;++b)n[b]=[0,0,0];for(b=0;b<
a.length;++b)for(var l=a[b],u,q=l[l.length-1],d=l[0],f=0;f<l.length;++f){u=q;q=d;d=l[(f+1)%l.length];var c=g[u],k=g[q],r=g[d],p=Array(3),z=0,m=Array(3),y=0;for(u=0;3>u;++u)p[u]=c[u]-k[u],z+=p[u]*p[u],m[u]=r[u]-k[u],y+=m[u]*m[u];if(z*y>h)for(c=n[q],z=1/Math.sqrt(z*y),u=0;3>u;++u)y=(u+1)%3,k=(u+2)%3,c[u]+=z*(m[y]*p[k]-m[k]*p[y])}for(b=0;b<e;++b){c=n[b];for(u=a=0;3>u;++u)a+=c[u]*c[u];if(a>h)for(z=1/Math.sqrt(a),u=0;3>u;++u)c[u]*=z;else for(u=0;3>u;++u)c[u]=0}return n};m.faceNormals=function(a,g,h){var e=
a.length,n=Array(e);h=void 0===h?1E-6:h;for(var b=0;b<e;++b){for(var l=a[b],u=Array(3),q=0;3>q;++q)u[q]=g[l[q]];l=Array(3);var d=Array(3);for(q=0;3>q;++q)l[q]=u[1][q]-u[0][q],d[q]=u[2][q]-u[0][q];u=Array(3);var f=0;for(q=0;3>q;++q){var c=(q+1)%3,k=(q+2)%3;u[q]=l[c]*d[k]-l[k]*d[c];f+=u[q]*u[q]}f=f>h?1/Math.sqrt(f):0;for(q=0;3>q;++q)u[q]*=f;n[b]=u}return n}},{}],446:[function(a,t,m){var p=Object.getOwnPropertySymbols,g=Object.prototype.hasOwnProperty,h=Object.prototype.propertyIsEnumerable;t.exports=
function(){try{if(!Object.assign)return!1;var a=new String("abc");a[5]="de";if("5"===Object.getOwnPropertyNames(a)[0])return!1;var g={};for(a=0;10>a;a++)g["_"+String.fromCharCode(a)]=a;if("0123456789"!==Object.getOwnPropertyNames(g).map(function(b){return g[b]}).join(""))return!1;var b={};"abcdefghijklmnopqrst".split("").forEach(function(a){b[a]=a});return"abcdefghijklmnopqrst"!==Object.keys(Object.assign({},b)).join("")?!1:!0}catch(l){return!1}}()?Object.assign:function(a,n){if(null===a||void 0===
a)throw new TypeError("Object.assign cannot be called with null or undefined");var b=Object(a);for(var e,u=1;u<arguments.length;u++){var q=Object(arguments[u]);for(var d in q)g.call(q,d)&&(b[d]=q[d]);if(p){e=p(q);for(var f=0;f<e.length;f++)h.call(q,e[f])&&(b[e[f]]=q[e[f]])}}return b}},{}],447:[function(a,t,m){t.exports=function(a,g,h,e,n,b,l,u,q,d){var f=g+b+d;if(0<c){var c=Math.sqrt(f+1);a[0]=.5*(l-q)/c;a[1]=.5*(u-e)/c;a[2]=.5*(h-b)/c;a[3]=.5*c}else d=Math.max(g,b,d),c=Math.sqrt(2*d-f+1),g>=d?(a[0]=
.5*c,a[1]=.5*(n+h)/c,a[2]=.5*(u+e)/c,a[3]=.5*(l-q)/c):b>=d?(a[0]=.5*(h+n)/c,a[1]=.5*c,a[2]=.5*(q+l)/c,a[3]=.5*(u-e)/c):(a[0]=.5*(e+u)/c,a[1]=.5*(l+q)/c,a[2]=.5*c,a[3]=.5*(h-n)/c);return a}},{}],448:[function(a,t,m){function p(b,a,c){return Math.sqrt(Math.pow(b,2)+Math.pow(a,2)+Math.pow(c,2))}function g(b,a,c,e){return Math.sqrt(Math.pow(b,2)+Math.pow(a,2)+Math.pow(c,2)+Math.pow(e,2))}function h(b,a){var c=a[0],d=a[1],f=a[2];a=a[3];var e=g(c,d,f,a);1E-6<e?(b[0]=c/e,b[1]=d/e,b[2]=f/e,b[3]=a/e):(b[0]=
b[1]=b[2]=0,b[3]=1)}function e(b,a,c){this.radius=n([c]);this.center=n(a);this.rotation=n(b);this.computedRadius=this.radius.curve(0);this.computedCenter=this.center.curve(0);this.computedRotation=this.rotation.curve(0);this.computedUp=[.1,0,0];this.computedEye=[.1,0,0];this.computedMatrix=[.1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0];this.recalcMatrix(0)}t.exports=function(b){b=b||{};var a=b.center||[0,0,0],c=b.rotation||[0,0,0,1],d=b.radius||1;a=[].slice.call(a,0,3);c=[].slice.call(c,0,4);h(c,c);a=new e(c,
a,Math.log(d));a.setDistanceLimits(b.zoomMin,b.zoomMax);("eye"in b||"up"in b)&&a.lookAt(0,b.eye,b.center,b.up);return a};var n=a("filtered-vector"),b=a("gl-mat4/lookAt"),l=a("gl-mat4/fromQuat"),u=a("gl-mat4/invert"),q=a("./lib/quatFromFrame");a=e.prototype;a.lastT=function(){return Math.max(this.radius.lastT(),this.center.lastT(),this.rotation.lastT())};a.recalcMatrix=function(b){this.radius.curve(b);this.center.curve(b);this.rotation.curve(b);var a=this.computedRotation;h(a,a);b=this.computedMatrix;
l(b,a);var c=this.computedCenter;a=this.computedEye;var d=this.computedUp,e=Math.exp(this.computedRadius[0]);a[0]=c[0]+e*b[2];a[1]=c[1]+e*b[6];a[2]=c[2]+e*b[10];d[0]=b[1];d[1]=b[5];d[2]=b[9];for(c=0;3>c;++c){for(e=d=0;3>e;++e)d+=b[c+4*e]*a[e];b[12+c]=-d}};a.getMatrix=function(b,a){this.recalcMatrix(b);b=this.computedMatrix;if(a){for(var c=0;16>c;++c)a[c]=b[c];return a}return b};a.idle=function(b){this.center.idle(b);this.radius.idle(b);this.rotation.idle(b)};a.flush=function(b){this.center.flush(b);
this.radius.flush(b);this.rotation.flush(b)};a.pan=function(b,a,c,e){a=a||0;c=c||0;e=e||0;this.recalcMatrix(b);var d=this.computedMatrix,f=d[1],k=d[5],g=d[9],h=p(f,k,g);f/=h;k/=h;g/=h;h=d[0];var l=d[4],n=d[8],q=h*f+l*k+n*g;h-=f*q;l-=k*q;n-=g*q;q=p(h,l,n);h/=q;l/=q;n/=q;q=d[2];var u=d[6];d=d[10];var m=q*f+u*k+d*g,t=q*h+u*l+d*n;p(q-(m*f+t*h),u-(m*k+t*l),d-(m*g+t*n));this.center.move(b,h*a+f*c,l*a+k*c,n*a+g*c);a=Math.exp(this.computedRadius[0]);a=Math.max(1E-4,a+e);this.radius.set(b,Math.log(a))};a.rotate=
function(b,a,c,e){this.recalcMatrix(b);a=a||0;c=c||0;var d=this.computedMatrix,f=d[2],k=d[6],h=d[10],l=a*d[0]+c*d[1],n=a*d[4]+c*d[5];d=a*d[8]+c*d[9];c=-(k*d-h*n);d=-(h*l-f*d);l=-(f*n-k*l);n=Math.sqrt(Math.max(0,1-Math.pow(c,2)-Math.pow(d,2)-Math.pow(l,2)));var q=g(c,d,l,n);1E-6<q?(c/=q,d/=q,l/=q,n/=q):(c=d=l=0,n=1);q=this.computedRotation;var u=q[0],m=q[1],t=q[2],D=q[3];q=u*n+D*c+m*l-t*d;var G=m*n+D*d+t*c-u*l,H=t*n+D*l+u*d-m*c;u=D*n-u*c-m*d-t*l;e&&(c=f,d=k,l=h,e=Math.sin(e)/p(c,d,l),c*=e,d*=e,l*=
e,n=Math.cos(a),q=q*n+u*c+G*l-H*d,G=G*n+u*d+H*c-q*l,H=H*n+u*l+q*d-G*c,u=u*n-q*c-G*d-H*l);a=g(q,G,H,u);1E-6<a?(q/=a,G/=a,H/=a,u/=a):(q=G=H=0,u=1);this.rotation.set(b,q,G,H,u)};a.lookAt=function(a,f,c,e){this.recalcMatrix(a);c=c||this.computedCenter;f=f||this.computedEye;e=e||this.computedUp;var d=this.computedMatrix;b(d,f,c,e);e=this.computedRotation;q(e,d[0],d[1],d[2],d[4],d[5],d[6],d[8],d[9],d[10]);h(e,e);this.rotation.set(a,e[0],e[1],e[2],e[3]);for(e=d=0;3>e;++e)d+=Math.pow(c[e]-f[e],2);this.radius.set(a,
.5*Math.log(Math.max(d,1E-6)));this.center.set(a,c[0],c[1],c[2])};a.translate=function(b,a,c,e){this.center.move(b,a||0,c||0,e||0)};a.setMatrix=function(b,a){var c=this.computedRotation;q(c,a[0],a[1],a[2],a[4],a[5],a[6],a[8],a[9],a[10]);h(c,c);this.rotation.set(b,c[0],c[1],c[2],c[3]);c=this.computedMatrix;u(c,a);var d=c[15];if(1E-6<Math.abs(d)){a=c[12]/d;var f=c[13]/d;d=c[14]/d;this.recalcMatrix(b);var e=Math.exp(this.computedRadius[0]);this.center.set(b,a-c[2]*e,f-c[6]*e,d-c[10]*e)}else this.center.idle(b);
this.radius.idle(b)};a.setDistance=function(b,a){0<a&&this.radius.set(b,Math.log(a))};a.setDistanceLimits=function(b,a){b=0<b?Math.log(b):-Infinity;a=0<a?Math.log(a):Infinity;a=Math.max(a,b);this.radius.bounds[0][0]=b;this.radius.bounds[1][0]=a};a.getDistanceLimits=function(b){var a=this.radius.bounds;return b?(b[0]=Math.exp(a[0][0]),b[1]=Math.exp(a[1][0]),b):[Math.exp(a[0][0]),Math.exp(a[1][0])]};a.toJSON=function(){this.recalcMatrix(this.lastT());return{center:this.computedCenter.slice(),rotation:this.computedRotation.slice(),
distance:Math.log(this.computedRadius[0]),zoomMin:this.radius.bounds[0][0],zoomMax:this.radius.bounds[1][0]}};a.fromJSON=function(b){var a=this.lastT(),c=b.center;c&&this.center.set(a,c[0],c[1],c[2]);(c=b.rotation)&&this.rotation.set(a,c[0],c[1],c[2],c[3]);(c=b.distance)&&0<c&&this.radius.set(a,Math.log(c));this.setDistanceLimits(b.zoomMin,b.zoomMax)}},{"./lib/quatFromFrame":447,"filtered-vector":222,"gl-mat4/fromQuat":258,"gl-mat4/invert":261,"gl-mat4/lookAt":262}],449:[function(a,t,m){var p=a("repeat-string");
t.exports=function(a,h,e){return p("undefined"!==typeof e?e+"":" ",h)+a}},{"repeat-string":487}],450:[function(a,t,m){function p(a,g){function b(a,f,c){c=[];for(var d,e=0;d=n.exec(a);){if(1E4<e++)throw Error("Circular references in parenthesis");c.push(a.slice(0,d.index));c.push(b(f[d[1]],f));a=a.slice(d.index+d[0].length)}c.push(a);return c}if("string"!==typeof a)return[a];var e=[a];"string"===typeof g||Array.isArray(g)?g={brackets:g}:g||(g={});a=g.brackets?Array.isArray(g.brackets)?g.brackets:[g.brackets]:
["{}","[]","()"];var h=g.escape||"___";g=!!g.flat;a.forEach(function(b){function a(a,c,f){a=e.push(a.slice(b[0].length,-b[1].length))-1;d.push(a);return h+a}var c=new RegExp(["\\",b[0],"[^\\",b[0],"\\",b[1],"]*\\",b[1]].join("")),d=[];e.forEach(function(b,d){for(var f,k=0;b!=f;)if(f=b,b=b.replace(c,a),1E4<k++)throw Error("References have circular dependency. Please, check them.");e[d]=b});d=d.reverse();e=e.map(function(a){d.forEach(function(c){a=a.replace(new RegExp("(\\"+h+c+"(?![0-9]))","g"),b[0]+
"$1"+b[1])});return a})});var n=new RegExp("\\"+h+"([0-9]+)");return g?e:b(e[0],e)}function g(a,g){function b(b,f){if(null==a[f])throw Error("Reference "+f+"is undefined");return a[f]}if(g&&g.flat){var e=a[0];if(!e)return"";g=new RegExp("\\"+(g&&g.escape||"___")+"([0-9]+)");for(var h=0;e!=n;){if(1E4<h++)throw Error("Circular references in "+a);var n=e;e=e.replace(g,b)}return e}return a.reduce(function k(b,a){Array.isArray(a)&&(a=a.reduce(k,""));return b+a},"")}function h(a,h){return Array.isArray(a)?
g(a,h):p(a,h)}h.parse=p;h.stringify=g;t.exports=h},{}],451:[function(a,t,m){var p=a("pick-by-alias");t.exports=function(a){1<arguments.length&&(a=arguments);"string"===typeof a?a=a.split(/\s/).map(parseFloat):"number"===typeof a&&(a=[a]);if(a.length&&"number"===typeof a[0])var g=1===a.length?{width:a[0],height:a[0],x:0,y:0}:2===a.length?{width:a[0],height:a[1],x:0,y:0}:{x:a[0],y:a[1],width:a[2]-a[0]||0,height:a[3]-a[1]||0};else a&&(a=p(a,{left:"x l left Left",top:"y t top Top",width:"w width W Width",
height:"h height W Width",bottom:"b bottom Bottom",right:"r right Right"}),g={x:a.left||0,y:a.top||0},g.width=null==a.width?a.right?a.right-g.x:0:a.width,g.height=null==a.height?a.bottom?a.bottom-g.y:0:a.height);return g}},{"pick-by-alias":457}],452:[function(a,t,m){t.exports=function(a){var e=[];a.replace(g,function(b,a,g){b=a.toLowerCase();g=(g=g.match(h))?g.map(Number):[];"m"==b&&2<g.length&&(e.push([a].concat(g.splice(0,2))),b="l",a="m"==a?"l":"L");for(;;){if(g.length==p[b])return g.unshift(a),
e.push(g);if(g.length<p[b])throw Error("malformed path data");e.push([a].concat(g.splice(0,p[b])))}});return e};var p={a:7,c:6,h:1,l:2,m:2,q:4,s:4,t:2,v:1,z:0},g=/([astvzqmhlc])([^astvzqmhlc]*)/ig,h=/-?[0-9]*\.?[0-9]+(?:e[-+]?\d+)?/ig},{}],453:[function(a,t,m){t.exports=function(a,g){g||(g=[0,""]);a=String(a);var h=parseFloat(a,10);g[0]=h;g[1]=a.match(/[\d.\-\+]*\s*(.*)/)[1]||"";return g}},{}],454:[function(a,t,m){(function(a){(function(){if("undefined"!==typeof performance&&null!==performance&&performance.now)t.exports=
function(){return performance.now()};else if("undefined"!==typeof a&&null!==a&&a.hrtime){t.exports=function(){return(h()-b)/1E6};var g=a.hrtime;var h=function(){var b=g();return 1E9*b[0]+b[1]};var e=h();var n=1E9*a.uptime();var b=e-n}else if(Date.now){t.exports=function(){return Date.now()-l};var l=Date.now()}else t.exports=function(){return(new Date).getTime()-l},l=(new Date).getTime()}).call(this)}).call(this,a("_process"))},{_process:474}],455:[function(a,t,m){t.exports=function(a){var e=a.length;
if(e<p)for(var h=1,b=0;b<e;++b)for(var l=0;l<b;++l)if(a[b]<a[l])h=-h;else{if(a[b]===a[l])return 0}else{var u=g.mallocUint8(e);for(b=0;b<e;++b)u[b]=0;h=1;for(b=0;b<e;++b)if(!u[b]){var q=1;u[b]=1;for(l=a[b];l!==b;l=a[l]){if(u[l])return g.freeUint8(u),0;q+=1;u[l]=1}q&1||(h=-h)}g.freeUint8(u)}return h};var p=32,g=a("typedarray-pool")},{"typedarray-pool":529}],456:[function(a,t,m){var p=a("typedarray-pool"),g=a("invert-permutation");m.rank=function(a){var e=a.length;switch(e){case 0:case 1:return 0;case 2:return a[1]}var h=
p.mallocUint32(e),b=p.mallocUint32(e),l=0,u;g(a,b);for(u=0;u<e;++u)h[u]=a[u];for(u=e-1;0<u;--u)e=b[u],a=h[u],h[u]=h[e],h[e]=a,b[u]=b[a],b[a]=e,l=(l+a)*u;p.freeUint32(b);p.freeUint32(h);return l};m.unrank=function(a,e,g){switch(a){case 0:return g?g:[];case 1:return g?(g[0]=0,g):[0];case 2:return g?(e?(g[0]=0,g[1]=1):(g[0]=1,g[1]=0),g):e?[0,1]:[1,0]}g=g||Array(a);var b,h=1;g[0]=0;for(b=1;b<a;++b)g[b]=b,h=h*b|0;for(b=a-1;0<b;--b){a=e/h|0;e=e-a*h|0;h=h/b|0;var n=g[b]|0;g[b]=g[a]|0;g[a]=n|0}return g}},
{"invert-permutation":407,"typedarray-pool":529}],457:[function(a,t,m){function p(a){if(g[a])return g[a];"string"===typeof a&&(a=g[a]=a.split(/\s*,\s*|\s+/));return a}t.exports=function(a,e,g){var b={},h,n;"string"===typeof e&&(e=p(e));if(Array.isArray(e)){var q={};for(n=0;n<e.length;n++)q[e[n]]=!0;e=q}for(h in e)e[h]=p(e[h]);q={};for(h in e){var d=e[h];if(Array.isArray(d))for(n=0;n<d.length;n++){var f=d[n];g&&(q[f]=!0);if(f in a){b[h]=a[f];if(g)for(;n<d.length;n++)q[d[n]]=!0;break}}else h in a&&
(e[h]&&(b[h]=a[h]),g&&(q[h]=!0))}if(g)for(h in a)q[h]||(b[h]=a[h]);return b};var g={}},{}],458:[function(a,t,m){t.exports=function(a,h){function e(b,a){a=q[a][b[a]];a.splice(a.indexOf(b),1)}function g(b,a,c){var d;for(d=0;2>d;++d)if(0<q[d][a].length){var f=q[d][a][0];var k=d;break}d=f[k^1];for(var g=0;2>g;++g)for(var l=q[g][a],r=0;r<l.length;++r){var n=l[r],u=n[g^1];0<p(h[b],h[a],h[d],h[u])&&(f=n,d=u,k=g)}if(c)return d;f&&e(f,k);return d}function b(b,a){var c=q[a][b][0],d=[b];e(c,a);for(a=c[a^1];;){for(;a!==
b;)d.push(a),a=g(d[d.length-2],a,!1);if(0===q[0][b].length+q[1][b].length)break;a=d[d.length-1];c=b;var f=d[1],k=g(a,c,!0);if(0>p(h[a],h[c],h[f],h[k]))break;d.push(b);a=g(a,c)}return d}for(var l=h.length|0,u=a.length,q=[Array(l),Array(l)],d=0;d<l;++d)q[0][d]=[],q[1][d]=[];for(d=0;d<u;++d){var f=a[d];q[0][f[0]].push(f);q[1][f[1]].push(f)}a=[];for(d=0;d<l;++d)0===q[0][d].length+q[1][d].length&&a.push([d]);for(d=0;d<l;++d)for(u=0;2>u;++u){for(f=[];0<q[u][d].length;){var c=b(d,u);c[1]===c[c.length-1]?
f.push.apply(f,c):(0<f.length&&a.push(f),f=c)}0<f.length&&a.push(f)}return a};var p=a("compare-angle")},{"compare-angle":117}],459:[function(a,t,m){t.exports=function(a,h){for(var e=p(a,h.length),g=Array(h.length),b=Array(h.length),l=[],u=0;u<h.length;++u){var q=e[u].length;b[u]=q;g[u]=!0;1>=q&&l.push(u)}for(;0<l.length;)for(q=l.pop(),g[q]=!1,q=e[q],u=0;u<q.length;++u){var d=q[u];0===--b[d]&&l.push(d)}e=Array(h.length);b=[];for(u=0;u<h.length;++u)g[u]?(q=b.length,e[u]=q,b.push(h[u])):e[u]=-1;h=[];
for(u=0;u<a.length;++u)l=a[u],g[l[0]]&&g[l[1]]&&h.push([e[l[0]],e[l[1]]]);return[h,b]};var p=a("edges-to-adjacency-list")},{"edges-to-adjacency-list":163}],460:[function(a,t,m){function p(b,a){for(var c=Array(b),d=0;d<b;++d)c[d]=a;return c}function g(b){for(var a=Array(b),c=0;c<b;++c)a[c]=[];return a}t.exports=function(a,f){function c(b){for(var a=b.length,c=0;c<a;++c)if(!H[b[c]])return!1;return!0}var d=q(a,f);a=d[0];f=d[1];for(var r=f.length,v=h(a,f.length),z=0;z<r;++z)if(1===v[z].length%2)throw Error("planar-graph-to-polyline: graph must be manifold");
a=e(a,f);a=a.filter(function(a){for(var c=a.length,d=[0],e=0;e<c;++e){var k=f[a[e]],g=f[a[(e+1)%c]],h=b(-k[0],k[1]),r=b(-k[0],g[1]);k=b(g[0],k[1]);g=b(g[0],g[1]);d=l(d,l(l(h,r),l(k,g)))}return 0<d[d.length-1]});d=a.length;var m=Array(d),y=Array(d);for(z=0;z<d;++z){m[z]=z;var w=Array(d);v=a[z].map(function(b){return f[b]});var x=n([v]),t=0,B=0;a:for(;B<d;++B)if(w[B]=0,z!==B){v=a[B];for(var C=v.length,D=0;D<C;++D){var G=x(f[v[D]]);if(0!==G){0>G&&(w[B]=1,t+=1);continue a}}w[B]=1;t+=1}y[z]=[t,z,w]}y.sort(function(b,
a){return a[0]-b[0]});for(z=0;z<d;++z)for(w=y[z],v=w[1],C=w[2],B=0;B<d;++B)C[B]&&(m[B]=v);y=g(d);for(z=0;z<d;++z)y[z].push(m[z]),y[m[z]].push(z);w={};var H=p(r,!1);for(z=0;z<d;++z)for(v=a[z],C=v.length,B=0;B<C;++B)r=v[B],x=v[(B+1)%C],t=Math.min(r,x)+":"+Math.max(r,x),t in w?(t=w[t],y[t].push(z),y[z].push(t),H[r]=H[x]=!0):w[t]=z;B=[];r=p(d,-1);for(z=0;z<d;++z)m[z]!==z||c(a[z])?r[z]=-1:(B.push(z),r[z]=0);for(d=[];0<B.length;){z=B.pop();m=y[z];u(m,function(b,a){return b-a});C=m.length;w=r[z];if(0===
w){v=a[z];var E=[v]}for(z=0;z<C;++z)v=m[z],0<=r[v]||(r[v]=w^1,B.push(v),0===w&&(v=a[v],c(v)||(v.reverse(),E.push(v))));0===w&&d.push(E)}return d};var h=a("edges-to-adjacency-list"),e=a("planar-dual"),n=a("point-in-big-polygon"),b=a("two-product"),l=a("robust-sum"),u=a("uniq"),q=a("./lib/trim-leaves")},{"./lib/trim-leaves":459,"edges-to-adjacency-list":163,"planar-dual":458,"point-in-big-polygon":464,"robust-sum":499,"two-product":527,uniq:531}],461:[function(a,t,m){t.exports=a("./quad")},{"./quad":463}],
462:[function(a,t,m){arguments[4][101][0].apply(m,arguments)},{dup:101}],463:[function(a,t,m){function p(b,a){var c=a[0],d=a[1],f=1/(a[2]-c);a=1/(a[3]-d);for(var e=Array(b.length),k=0,g=b.length/2;k<g;k++)e[2*k]=h((b[2*k]-c)*f,0,1),e[2*k+1]=h((b[2*k+1]-d)*a,0,1);return e}var g=a("binary-search-bounds"),h=a("clamp"),e=a("parse-rect"),n=a("array-bounds"),b=a("pick-by-alias"),l=a("defined"),u=a("flatten-vertex-data"),q=a("is-obj"),d=a("dtype"),f=a("math-log2");t.exports=function(a,k){function c(b,a,
d,f,e,k){if(!f.length)return null;var g=B[e]||(B[e]=[]),h=D[e]||(D[e]=[]),l=C[e]||(C[e]=[]),r=g.length;e++;if(e>m){for(b=0;b<f.length;b++)g.push(f[b]),h.push(k),l.push(null,null,null,null);return r}g.push(f[0]);h.push(k);if(1>=f.length)return l.push(null,null,null,null),r;g=.5*d;h=b+g;d=a+g;for(var n=[],q=[],u=[],p=[],v=1,z=f.length;v<z;v++){var A=f[v],x=w[2*A+1];w[2*A]<h?x<d?n.push(A):q.push(A):x<d?u.push(A):p.push(A)}k<<=2;l.push(c(b,a,g,n,e,k),c(b,d,g,q,e,k+1),c(h,a,g,u,e,k+2),c(h,d,g,p,e,k+3));
return r}function h(b,a,c,d,f){for(var e=[],k=0;k<f;k++){var h=D[k],l=G[k][0],r=z(b,a,k),n=z(c,d,k);r=g.ge(h,r);h=g.gt(h,n,r,h.length-1);e[k]=[r+l,h+l]}return e}function z(b,a,c){for(var d=1,f=.5,e=.5,k=.5,g=0;g<c;g++)d<<=2,d+=b<f?a<e?0:1:a<e?2:3,k*=.5,f+=b<f?-k:k,e+=a<e?-k:k;return d}k||(k={});a=u(a,"float64");k=b(k,{bounds:"range bounds dataBox databox",maxDepth:"depth maxDepth maxdepth level maxLevel maxlevel levels",dtype:"type dtype format out dst output destination"});var m=l(k.maxDepth,255),
y=l(k.bounds,n(a,2));y[0]===y[2]&&y[2]++;y[1]===y[3]&&y[3]++;var w=p(a,y),x=a.length>>>1;k.dtype||(k.dtype="array");if("string"===typeof k.dtype)var t=new (d(k.dtype))(x);else k.dtype&&(t=k.dtype,Array.isArray(t)&&(t.length=x));for(k=0;k<x;++k)t[k]=k;var B=[],C=[],D=[],G=[];c(0,0,1,t,0,1);for(k=x=0;k<B.length;k++){var H=B[k];if(t.set)t.set(H,x);else for(var E=0,K=H.length;E<K;E++)t[E+x]=H[E];H=x+B[k].length;G[k]=[x,H];x=H}t.range=function(){function c(b,d,f,e,k,g){if(null!==k&&null!==g&&!(z>b+f||
m>d+f||w<b||A<d||e>=x||k===g)){var h=B[e];void 0===g&&(g=h.length);for(var l=k;l<g;l++){var q=h[l],p=a[2*q],y=a[2*q+1];p>=r&&p<=u&&y>=n&&y<=v&&E.push(q)}p=C[e];g=p[4*k];h=p[4*k+1];l=p[4*k+2];q=p[4*k+3];a:{y=null;for(var t=0;null===y;)if(y=p[4*(k+1)+t],t++,t>p.length){k=null;break a}k=y}f*=.5;e+=1;c(b,d,f,e,g,h||l||q||k);c(b,d+f,f,e,h,l||q||k);c(b+f,d,f,e,l,q||k);c(b+f,d+f,f,e,q,k)}}for(var d=[],k=arguments.length;k--;)d[k]=arguments[k];if(q(d[d.length-1])){var g=d.pop();d.length||null==g.x&&null==
g.l&&null==g.left||(d=[g],k={});k=b(g,{level:"level maxLevel",d:"d diam diameter r radius px pxSize pixel pixelSize maxD size minSize",lod:"lod details ranges offsets"})}else k={};d.length||(d=y);d=e.apply(void 0,d);d=[Math.min(d.x,d.x+d.width),Math.min(d.y,d.y+d.height),Math.max(d.x,d.x+d.width),Math.max(d.y,d.y+d.height)];var r=d[0],n=d[1],u=d[2],v=d[3];d=p([r,n,u,v],y);var z=d[0],m=d[1],w=d[2],A=d[3],x=l(k.level,B.length);if(null!=k.d){if("number"===typeof k.d)var t=[k.d,k.d];else k.d.length&&
(t=k.d);x=Math.min(Math.max(Math.ceil(-f(Math.abs(t[0])/(y[2]-y[0]))),Math.ceil(-f(Math.abs(t[1])/(y[3]-y[1])))),x)}x=Math.min(x,B.length);if(k.lod)return h(z,m,w,A,x);var E=[];c(0,0,1,0,0,1);return E};return t}},{"array-bounds":55,"binary-search-bounds":462,clamp:105,defined:155,dtype:160,"flatten-vertex-data":223,"is-obj":413,"math-log2":424,"parse-rect":451,"pick-by-alias":457}],464:[function(a,t,m){function p(){return!0}function g(b){return function(a,c){return(a=b[a])?!!a.queryPoint(c,p):!1}}
function h(b){for(var a={},c=0;c<b.length;++c){var f=b[c],e=f[0][0],h=f[0][1];f=f[1][1];h=[Math.min(h,f),Math.max(h,f)];e in a?a[e].push(h):a[e]=[h]}b={};e=Object.keys(a);for(c=0;c<e.length;++c)b[e[c]]=d(a[e[c]]);return g(b)}function e(b,a){return function(c){var d=f.le(a,c[0]);if(0>d)return 1;var e=b[d];if(!e)if(0<d&&a[d]===c[0])e=b[d-1];else return 1;for(d=1;e;){var k=e.key,g=u(c,k[0],k[1]);if(k[0][0]<k[1][0])if(0>g)e=e.left;else if(0<g)d=-1,e=e.right;else return 0;else if(0<g)e=e.left;else if(0>
g)d=1,e=e.right;else return 0}return d}}function n(b){return 1}function b(b){return function(a){return b(a[0],a[1])?0:1}}function l(b,a){return function(c){return b(c[0],c[1])?0:a(c)}}t.exports=function(a){for(var c=a.length,d=[],f=[],g=0;g<c;++g)for(var u=a[g],p=u.length,m=p-1,x=0;x<p;m=x++){m=u[m];var t=u[x];m[0]===t[0]?f.push([m,t]):d.push([m,t])}if(0===d.length)return 0===f.length?n:b(h(f));a=q(d);a=e(a.slabs,a.coordinates);return 0===f.length?a:l(h(f),a)};var u=a("robust-orientation")[3],q=a("slab-decomposition"),
d=a("interval-tree-1d"),f=a("binary-search-bounds")},{"binary-search-bounds":81,"interval-tree-1d":406,"robust-orientation":494,"slab-decomposition":510}],465:[function(a,t,m){function p(b,a,c){b=q.segments(b);a=q.segments(a);a=q.combine(b,a);c=c(a);return q.polygon(c)}var g=a("./lib/build-log");m=a("./lib/epsilon");var h=a("./lib/intersecter"),e=a("./lib/segment-chainer"),n=a("./lib/segment-selector"),b=a("./lib/geojson"),l=!1,u=m();var q={buildLog:function(b){!0===b?l=g():!1===b&&(l=!1);return!1===
l?!1:l.list},epsilon:function(b){return u.epsilon(b)},segments:function(b){var a=h(!0,u,l);b.regions.forEach(a.addRegion);return{segments:a.calculate(b.inverted),inverted:b.inverted}},combine:function(b,a){return{combined:h(!1,u,l).calculate(b.segments,b.inverted,a.segments,a.inverted),inverted1:b.inverted,inverted2:a.inverted}},selectUnion:function(b){return{segments:n.union(b.combined,l),inverted:b.inverted1||b.inverted2}},selectIntersect:function(b){return{segments:n.intersect(b.combined,l),inverted:b.inverted1&&
b.inverted2}},selectDifference:function(b){return{segments:n.difference(b.combined,l),inverted:b.inverted1&&!b.inverted2}},selectDifferenceRev:function(b){return{segments:n.differenceRev(b.combined,l),inverted:!b.inverted1&&b.inverted2}},selectXor:function(b){return{segments:n.xor(b.combined,l),inverted:b.inverted1!==b.inverted2}},polygon:function(b){return{regions:e(b.segments,u,l),inverted:b.inverted}},polygonFromGeoJSON:function(a){return b.toPolygon(q,a)},polygonToGeoJSON:function(a){return b.fromPolygon(q,
u,a)},union:function(b,a){return p(b,a,q.selectUnion)},intersect:function(b,a){return p(b,a,q.selectIntersect)},difference:function(b,a){return p(b,a,q.selectDifference)},differenceRev:function(b,a){return p(b,a,q.selectDifferenceRev)},xor:function(b,a){return p(b,a,q.selectXor)}};"object"===typeof window&&(window.PolyBool=q);t.exports=q},{"./lib/build-log":466,"./lib/epsilon":467,"./lib/geojson":468,"./lib/intersecter":469,"./lib/segment-chainer":471,"./lib/segment-selector":472}],466:[function(a,
t,m){t.exports=function(){function a(a,b){g.list.push({type:a,data:b?JSON.parse(JSON.stringify(b)):void 0});return g}var g,h=0,e=!1;return g={list:[],segmentId:function(){return h++},checkIntersection:function(e,b){return a("check",{seg1:e,seg2:b})},segmentChop:function(e,b){a("div_seg",{seg:e,pt:b});return a("chop",{seg:e,pt:b})},statusRemove:function(e){return a("pop_seg",{seg:e})},segmentUpdate:function(e){return a("seg_update",{seg:e})},segmentNew:function(e,b){return a("new_seg",{seg:e,primary:b})},
segmentRemove:function(e){return a("rem_seg",{seg:e})},tempStatus:function(e,b,g){return a("temp_status",{seg:e,above:b,below:g})},rewind:function(e){return a("rewind",{seg:e})},status:function(e,b,g){return a("status",{seg:e,above:b,below:g})},vert:function(h){if(h===e)return g;e=h;return a("vert",{x:h})},log:function(e){"string"!==typeof e&&(e=JSON.stringify(e,!1,"  "));return a("log",{txt:e})},reset:function(){return a("reset")},selected:function(e){return a("selected",{segs:e})},chainStart:function(e){return a("chain_start",
{seg:e})},chainRemoveHead:function(e,b){return a("chain_rem_head",{index:e,pt:b})},chainRemoveTail:function(e,b){return a("chain_rem_tail",{index:e,pt:b})},chainNew:function(e,b){return a("chain_new",{pt1:e,pt2:b})},chainMatch:function(e){return a("chain_match",{index:e})},chainClose:function(e){return a("chain_close",{index:e})},chainAddHead:function(e,b){return a("chain_add_head",{index:e,pt:b})},chainAddTail:function(e,b){return a("chain_add_tail",{index:e,pt:b})},chainConnect:function(e,b){return a("chain_con",
{index1:e,index2:b})},chainReverse:function(e){return a("chain_rev",{index:e})},chainJoin:function(e,b){return a("chain_join",{index1:e,index2:b})},done:function(){return a("done")}}}},{}],467:[function(a,t,m){t.exports=function(a){"number"!==typeof a&&(a=1E-10);var g={epsilon:function(g){"number"===typeof g&&(a=g);return a},pointAboveOrOnLine:function(g,e,n){var b=e[0];e=e[1];return(n[0]-b)*(g[1]-e)-(n[1]-e)*(g[0]-b)>=-a},pointBetween:function(g,e,n){var b=n[0]-e[0];n=n[1]-e[1];g=(g[0]-e[0])*b+(g[1]-
e[1])*n;return g<a||g-(b*b+n*n)>-a?!1:!0},pointsSameX:function(g,e){return Math.abs(g[0]-e[0])<a},pointsSameY:function(g,e){return Math.abs(g[1]-e[1])<a},pointsSame:function(a,e){return g.pointsSameX(a,e)&&g.pointsSameY(a,e)},pointsCompare:function(a,e){return g.pointsSameX(a,e)?g.pointsSameY(a,e)?0:a[1]<e[1]?-1:1:a[0]<e[0]?-1:1},pointsCollinear:function(g,e,n){return Math.abs((g[0]-e[0])*(e[1]-n[1])-(e[0]-n[0])*(g[1]-e[1]))<a},linesIntersect:function(g,e,n,b){var h=e[0]-g[0];e=e[1]-g[1];var u=b[0]-
n[0],q=b[1]-n[1];b=h*q-e*u;if(Math.abs(b)<a)return!1;var d=g[0]-n[0];n=g[1]-n[1];u=(u*n-q*d)/b;n=(h*n-e*d)/b;g={alongA:0,alongB:0,pt:[g[0]+u*h,g[1]+u*e]};g.alongA=u<=-a?-2:u<a?-1:u-1<=-a?0:u-1<a?1:2;g.alongB=n<=-a?-2:n<a?-1:n-1<=-a?0:n-1<a?1:2;return g},pointInsideRegion:function(g,e){var h=g[0];g=g[1];for(var b=e[e.length-1][0],l=e[e.length-1][1],u=!1,q=0;q<e.length;q++){var d=e[q][0],f=e[q][1];f-g>a!=l-g>a&&(b-d)*(g-f)/(l-f)+d-h>a&&(u=!u);b=d;l=f}return u}};return g}},{}],468:[function(a,t,m){t.exports=
{toPolygon:function(a,g){function h(b){function e(b){b=b.slice(0,b.length-1);return a.segments({inverted:!1,regions:[b]})}if(0>=b.length)return a.segments({inverted:!1,regions:[]});for(var g=e(b[0]),h=1;h<b.length;h++)g=a.selectDifference(a.combine(g,e(b[h])));return g}if("Polygon"===g.type)return a.polygon(h(g.coordinates));if("MultiPolygon"===g.type){for(var e=a.segments({inverted:!1,regions:[]}),n=0;n<g.coordinates.length;n++)e=a.selectUnion(a.combine(e,h(g.coordinates[n])));return a.polygon(e)}throw Error("PolyBool: Cannot convert GeoJSON object to PolyBool polygon");
},fromPolygon:function(a,g,h){function e(b,a){return g.pointInsideRegion([.5*(b[0][0]+b[1][0]),.5*(b[0][1]+b[1][1])],a)}function n(b,a){for(var c=0;c<b.children.length;c++){var d=b.children[c];if(e(a,d.region)){n(d,a);return}}var f={region:a,children:[]};for(c=0;c<b.children.length;c++)d=b.children[c],e(d.region,a)&&(f.children.push(d),b.children.splice(c,1),c--);b.children.push(f)}function b(b,a){for(var c=0,d=b[b.length-1][0],f=b[b.length-1][1],e=[],k=0;k<b.length;k++){var g=b[k][0],h=b[k][1];e.push([g,
h]);c+=h*d-g*f;d=g;f=h}0>c!==a&&e.reverse();e.push([e[0][0],e[0][1]]);return e}function l(a){var c=[b(a.region,!1)];f.push(c);for(var d=0;d<a.children.length;d++)c.push(u(a.children[d]))}function u(a){for(var c=0;c<a.children.length;c++)l(a.children[c]);return b(a.region,!0)}h=a.polygon(a.segments(h));a={region:null,children:[]};for(var q=0;q<h.regions.length;q++){var d=h.regions[q];3>d.length||n(a,d)}var f=[];for(q=0;q<a.children.length;q++)l(a.children[q]);return 0>=f.length?{type:"Polygon",coordinates:[]}:
1==f.length?{type:"Polygon",coordinates:f[0]}:{type:"MultiPolygon",coordinates:f}}}},{}],469:[function(a,t,m){var p=a("./linked-list");t.exports=function(a,h,e){function g(b,a,d){return{id:e?e.segmentId():-1,start:b,end:a,myFill:{above:d.myFill.above,below:d.myFill.below},otherFill:null}}function b(b,a){d.insertBefore(b,function(c){var d=b.isStart;var f=c.isStart,e=c.pt;c=c.other.pt;var k=h.pointsCompare(b.pt,e);d=0!==k?k:h.pointsSame(a,c)?0:d!==f?d?1:-1:h.pointAboveOrOnLine(a,f?e:c,f?c:e)?1:-1;return 0>
d})}function l(a,c){var d=p.node({isStart:!0,pt:a.start,seg:a,primary:c,other:null,status:null});b(d,a.end);a=p.node({isStart:!1,pt:a.end,seg:a,primary:c,other:d,status:null});d.other=a;b(a,d.pt);return d}function u(a,c){var d=g(c,a.seg.end,a.seg);e&&e.segmentChop(a.seg,c);a.other.remove();a.seg.end=c;a.other.pt=c;b(a.other,a.pt);return l(d,a.primary)}function q(b,c){function f(b){return l.findTransition(function(a){var c=a.ev;a=b.seg.start;var d=b.seg.end,f=c.seg.start;c=c.seg.end;a=h.pointsCollinear(a,
f,c)?h.pointsCollinear(d,f,c)?1:h.pointAboveOrOnLine(d,f,c)?1:-1:h.pointAboveOrOnLine(a,f,c)?1:-1;return 0<a})}function g(b,a){var c=b.seg,d=a.seg,f=c.start,k=c.end,g=d.start,l=d.end;e&&e.checkIntersection(c,d);c=h.linesIntersect(f,k,g,l);if(!1===c){if(!h.pointsCollinear(f,k,g)||h.pointsSame(f,l)||h.pointsSame(k,g))return!1;c=h.pointsSame(f,g);d=h.pointsSame(k,l);if(c&&d)return a;var r=!c&&h.pointBetween(f,g,l);g=!d&&h.pointBetween(k,g,l);if(c)return g?u(a,k):u(b,l),a;r&&(d||(g?u(a,k):u(b,l)),u(a,
f))}else 0===c.alongA&&(-1===c.alongB?u(b,g):0===c.alongB?u(b,c.pt):1===c.alongB&&u(b,l)),0===c.alongB&&(-1===c.alongA?u(a,f):0===c.alongA?u(a,c.pt):1===c.alongA&&u(a,k));return!1}for(var l=p.create(),n=[];!d.isEmpty();){var q=d.getHead();e&&e.vert(q.pt[0]);if(q.isStart){e&&e.segmentNew(q.seg,q.primary);var m=f(q),w=m.before?m.before.ev:null,x=m.after?m.after.ev:null;e&&e.tempStatus(q.seg,w?w.seg:!1,x?x.seg:!1);var t=function(){if(w){var b=g(q,w);if(b)return b}return x?g(q,x):!1}();if(t){if(a){var B;
if(B=null===q.seg.myFill.below?!0:q.seg.myFill.above!==q.seg.myFill.below)t.seg.myFill.above=!t.seg.myFill.above}else t.seg.otherFill=q.seg.myFill;e&&e.segmentUpdate(t.seg);q.other.remove();q.remove()}if(d.getHead()!==q){e&&e.rewind(q.seg);continue}a?(B=null===q.seg.myFill.below?!0:q.seg.myFill.above!==q.seg.myFill.below,q.seg.myFill.below=x?x.seg.myFill.above:b,q.seg.myFill.above=B?!q.seg.myFill.below:q.seg.myFill.below):null===q.seg.otherFill&&(t=x?q.primary===x.primary?x.seg.otherFill.above:x.seg.myFill.above:
q.primary?c:b,q.seg.otherFill={above:t,below:t});e&&e.status(q.seg,w?w.seg:!1,x?x.seg:!1);q.other.status=m.insert(p.node({ev:q}))}else{m=q.status;if(null===m)throw Error("PolyBool: Zero-length segment detected; your epsilon is probably too small or too large");l.exists(m.prev)&&l.exists(m.next)&&g(m.prev.ev,m.next.ev);e&&e.statusRemove(m.ev.seg);m.remove();q.primary||(m=q.seg.myFill,q.seg.myFill=q.seg.otherFill,q.seg.otherFill=m);n.push(q.seg)}d.getHead().remove()}e&&e.done();return n}var d=p.create();
return a?{addRegion:function(b){for(var a,d=b[b.length-1],f=0;f<b.length;f++){a=d;d=b[f];var g=h.pointsCompare(a,d);if(0!==g){var n=0>g?a:d;a=0>g?d:a;n={id:e?e.segmentId():-1,start:n,end:a,myFill:{above:null,below:null},otherFill:null};l(n,!0)}}},calculate:function(b){return q(b,!1)}}:{calculate:function(b,a,d,e){b.forEach(function(b){l(g(b.start,b.end,b),!0)});d.forEach(function(b){l(g(b.start,b.end,b),!1)});return q(a,e)}}}},{"./linked-list":470}],470:[function(a,t,m){t.exports={create:function(){var a=
{root:{root:!0,next:null},exists:function(g){return null===g||g===a.root?!1:!0},isEmpty:function(){return null===a.root.next},getHead:function(){return a.root.next},insertBefore:function(g,h){for(var e=a.root,n=a.root.next;null!==n;){if(h(n)){g.prev=n.prev;g.next=n;n.prev.next=g;n.prev=g;return}e=n;n=n.next}e.next=g;g.prev=e;g.next=null},findTransition:function(g){for(var h=a.root,e=a.root.next;null!==e&&!g(e);)h=e,e=e.next;return{before:h===a.root?null:h,after:e,insert:function(a){a.prev=h;a.next=
e;h.next=a;null!==e&&(e.prev=a);return a}}}};return a},node:function(a){a.prev=null;a.next=null;a.remove=function(){if(a.prev.next=a.next)a.next.prev=a.prev;a.prev=null;a.next=null};return a}}},{}],471:[function(a,t,m){t.exports=function(a,g,h){var e=[],n=[];a.forEach(function(b){function a(b,a,d){r.index=b;r.matches_head=a;r.matches_pt1=d;if(r===c)return r=k,!1;r=null;return!0}function u(b){h&&h.chainReverse(b);e[b].reverse()}function q(b,a){var c=e[b],d=e[a],f=c[c.length-1],k=c[c.length-2],l=d[0],
r=d[1];g.pointsCollinear(k,f,l)&&(h&&h.chainRemoveTail(b,f),c.pop(),f=k);g.pointsCollinear(f,l,r)&&(h&&h.chainRemoveHead(a,l),d.shift());h&&h.chainJoin(b,a);e[b]=c.concat(d);e.splice(a,1)}var d=b.start,f=b.end;if(g.pointsSame(d,f))console.warn("PolyBool: Warning: Zero-length segment detected; your epsilon is probably too small or too large");else{h&&h.chainStart(b);for(var c={index:0,matches_head:!1,matches_pt1:!1},k={index:0,matches_head:!1,matches_pt1:!1},r=c,p=0;p<e.length;p++){b=e[p];var z=b[0];
b=b[b.length-1];if(g.pointsSame(z,d)){if(a(p,!0,!0))break}else if(g.pointsSame(z,f)){if(a(p,!0,!1))break}else if(g.pointsSame(b,d)){if(a(p,!1,!0))break}else if(g.pointsSame(b,f)&&a(p,!1,!1))break}if(r===c)e.push([d,f]),h&&h.chainNew(d,f);else if(r===k){h&&h.chainMatch(c.index);p=c.index;d=c.matches_pt1?f:d;f=c.matches_head;b=e[p];z=f?b[0]:b[b.length-1];var m=f?b[1]:b[b.length-2],y=f?b[b.length-1]:b[0],w=f?b[b.length-2]:b[1];g.pointsCollinear(m,z,d)&&(f?(h&&h.chainRemoveHead(c.index,d),b.shift()):
(h&&h.chainRemoveTail(c.index,d),b.pop()),z=m);g.pointsSame(y,d)?(e.splice(p,1),g.pointsCollinear(w,y,z)&&(f?(h&&h.chainRemoveTail(c.index,z),b.pop()):(h&&h.chainRemoveHead(c.index,z),b.shift())),h&&h.chainClose(c.index),n.push(b)):f?(h&&h.chainAddHead(c.index,d),b.unshift(d)):(h&&h.chainAddTail(c.index,d),b.push(d))}else b=c.index,p=k.index,h&&h.chainConnect(b,p),d=e[b].length<e[p].length,c.matches_head?k.matches_head?d?(u(b),q(b,p)):(u(p),q(p,b)):q(p,b):k.matches_head?q(b,p):d?(u(b),q(p,b)):(u(p),
q(b,p))}});return n}},{}],472:[function(a,t,m){function p(a,h,e){var g=[];a.forEach(function(b){var a=(b.myFill.above?8:0)+(b.myFill.below?4:0)+(b.otherFill&&b.otherFill.above?2:0)+(b.otherFill&&b.otherFill.below?1:0);0!==h[a]&&g.push({id:e?e.segmentId():-1,start:b.start,end:b.end,myFill:{above:1===h[a],below:2===h[a]},otherFill:null})});e&&e.selected(g);return g}t.exports={union:function(a,h){return p(a,[0,2,1,0,2,2,0,0,1,0,1,0,0,0,0,0],h)},intersect:function(a,h){return p(a,[0,0,0,0,0,2,0,2,0,0,
1,1,0,2,1,0],h)},difference:function(a,h){return p(a,[0,0,0,0,2,0,2,0,1,1,0,0,0,1,2,0],h)},differenceRev:function(a,h){return p(a,[0,2,1,0,0,0,1,1,0,2,0,2,0,0,0,0],h)},xor:function(a,h){return p(a,[0,2,1,0,2,0,0,1,1,0,0,2,0,1,2,0],h)}}},{}],473:[function(a,t,m){var p=new Float64Array(4),g=new Float64Array(4),h=new Float64Array(4);t.exports=function(a,n,b,l,u){p.length<l.length&&(p=new Float64Array(l.length),g=new Float64Array(l.length),h=new Float64Array(l.length));for(var e=0;e<l.length;++e)p[e]=
a[e]-l[e],g[e]=n[e]-a[e],h[e]=b[e]-a[e];var d=0,f=0,c=0,k=0,r=0,v=0;for(e=0;e<l.length;++e){var z=g[e],m=h[e],y=p[e];d+=z*z;f+=z*m;c+=m*m;k+=y*z;r+=y*m;v+=y*y}e=Math.abs(d*c-f*f);z=f*r-c*k;m=f*k-d*r;z+m<=e?0>z?0>m?0>k?(m=0,-k>=d?(z=1,d=d+2*k+v):(z=-k/d,d=k*z+v)):(z=0,0<=r?(m=0,d=v):-r>=c?(m=1,d=c+2*r+v):(m=-r/c,d=r*m+v)):(z=0,0<=r?(m=0,d=v):-r>=c?(m=1,d=c+2*r+v):(m=-r/c,d=r*m+v)):0>m?(m=0,0<=k?(z=0,d=v):-k>=d?(z=1,d=d+2*k+v):(z=-k/d,d=k*z+v)):(e=1/e,z*=e,m*=e,d=z*(d*z+f*m+2*k)+m*(f*z+c*m+2*r)+v):
0>z?(z=f+k,e=c+r,e>z?(e-=z,z=d-2*f+c,e>=z?(z=1,m=0,d=d+2*k+v):(z=e/z,m=1-z,d=z*(d*z+f*m+2*k)+m*(f*z+c*m+2*r)+v)):(z=0,0>=e?(m=1,d=c+2*r+v):0<=r?(m=0,d=v):(m=-r/c,d=r*m+v))):0>m?(z=f+r,e=d+k,e>z?(e-=z,z=d-2*f+c,e>=z?(m=1,z=0,d=c+2*r+v):(m=e/z,z=1-m,d=z*(d*z+f*m+2*k)+m*(f*z+c*m+2*r)+v)):(m=0,0>=e?(z=1,d=d+2*k+v):0<=k?(z=0,d=v):(z=-k/d,d=k*z+v))):(e=c+r-f-k,0>=e?(z=0,m=1,d=c+2*r+v):(z=d-2*f+c,e>=z?(z=1,m=0,d=d+2*k+v):(z=e/z,m=1-z,d=z*(d*z+f*m+2*k)+m*(f*z+c*m+2*r)+v)));f=1-z-m;for(e=0;e<l.length;++e)u[e]=
f*a[e]+z*n[e]+m*b[e];return 0>d?0:d}},{}],474:[function(a,t,m){function p(){throw Error("setTimeout has not been defined");}function g(){throw Error("clearTimeout has not been defined");}function h(b){if(q===setTimeout)return setTimeout(b,0);if((q===p||!q)&&setTimeout)return q=setTimeout,setTimeout(b,0);try{return q(b,0)}catch(z){try{return q.call(null,b,0)}catch(A){return q.call(this,b,0)}}}function e(b){if(d===clearTimeout)return clearTimeout(b);if((d===g||!d)&&clearTimeout)return d=clearTimeout,
clearTimeout(b);try{return d(b)}catch(z){try{return d.call(null,b)}catch(A){return d.call(this,b)}}}function n(){c&&k&&(c=!1,k.length?f=k.concat(f):r=-1,f.length&&b())}function b(){if(!c){var b=h(n);c=!0;for(var a=f.length;a;){k=f;for(f=[];++r<a;)k&&k[r].run();r=-1;a=f.length}k=null;c=!1;e(b)}}function l(b,a){this.fun=b;this.array=a}function u(){}a=t.exports={};try{var q="function"===typeof setTimeout?setTimeout:p}catch(v){q=p}try{var d="function"===typeof clearTimeout?clearTimeout:g}catch(v){d=g}var f=
[],c=!1,k,r=-1;a.nextTick=function(a){var d=Array(arguments.length-1);if(1<arguments.length)for(var e=1;e<arguments.length;e++)d[e-1]=arguments[e];f.push(new l(a,d));1!==f.length||c||h(b)};l.prototype.run=function(){this.fun.apply(null,this.array)};a.title="browser";a.browser=!0;a.env={};a.argv=[];a.version="";a.versions={};a.on=u;a.addListener=u;a.once=u;a.off=u;a.removeListener=u;a.removeAllListeners=u;a.emit=u;a.prependListener=u;a.prependOnceListener=u;a.listeners=function(b){return[]};a.binding=
function(b){throw Error("process.binding is not supported");};a.cwd=function(){return"/"};a.chdir=function(b){throw Error("process.chdir is not supported");};a.umask=function(){return 0}},{}],475:[function(a,t,m){t.exports=a("gl-quat/slerp")},{"gl-quat/slerp":289}],476:[function(a,t,m){(function(p){var g=a("performance-now"),h="undefined"===typeof window?p:window;p=["moz","webkit"];for(var e=h.requestAnimationFrame,n=h.cancelAnimationFrame||h.cancelRequestAnimationFrame,b=0;!e&&b<p.length;b++)e=h[p[b]+
"RequestAnimationFrame"],n=h[p[b]+"CancelAnimationFrame"]||h[p[b]+"CancelRequestAnimationFrame"];if(!e||!n){var l=0,u=0,q=[],d=1E3/60;e=function(b){if(0===q.length){var a=g(),f=Math.max(0,d-(a-l));l=f+a;setTimeout(function(){for(var b=q.slice(0),a=q.length=0;a<b.length;a++)if(!b[a].cancelled)try{b[a].callback(l)}catch(z){setTimeout(function(){throw z;},0)}},Math.round(f))}q.push({handle:++u,callback:b,cancelled:!1});return u};n=function(b){for(var a=0;a<q.length;a++)q[a].handle===b&&(q[a].cancelled=
!0)}}t.exports=function(b){return e.call(h,b)};t.exports.cancel=function(){n.apply(h,arguments)};t.exports.polyfill=function(b){b||(b=h);b.requestAnimationFrame=e;b.cancelAnimationFrame=n}}).call(this,"undefined"!==typeof ja?ja:"undefined"!==typeof self?self:"undefined"!==typeof window?window:{})},{"performance-now":454}],477:[function(a,t,m){var p=a("big-rat/add");t.exports=function(a,h){for(var e=a.length,g=Array(e),b=0;b<e;++b)g[b]=p(a[b],h[b]);return g}},{"big-rat/add":65}],478:[function(a,t,
m){t.exports=function(a){for(var g=Array(a.length),e=0;e<a.length;++e)g[e]=p(a[e]);return g};var p=a("big-rat")},{"big-rat":68}],479:[function(a,t,m){var p=a("big-rat"),g=a("big-rat/mul");t.exports=function(a,e){e=p(e);for(var h=a.length,b=Array(h),l=0;l<h;++l)b[l]=g(a[l],e);return b}},{"big-rat":68,"big-rat/mul":77}],480:[function(a,t,m){var p=a("big-rat/sub");t.exports=function(a,h){for(var e=a.length,g=Array(e),b=0;b<e;++b)g[b]=p(a[b],h[b]);return g}},{"big-rat/sub":79}],481:[function(a,t,m){var p=
a("compare-cell"),g=a("compare-oriented-cell"),h=a("cell-orientation");t.exports=function(a){a.sort(g);for(var e=a.length,b=0,l=0;l<e;++l){var u=a[l],q=h(u);if(0!==q){if(0<b){var d=a[b-1];if(0===p(u,d)&&h(d)!==q){--b;continue}}a[b++]=u}}a.length=b;return a}},{"cell-orientation":102,"compare-cell":118,"compare-oriented-cell":119}],482:[function(a,t,m){var p=a("array-bounds"),g=a("color-normalize"),h=a("update-diff"),e=a("pick-by-alias"),n=a("object-assign"),b=a("flatten-vertex-data");a=a("to-float32");
var l=a.float32,u=a.fract32;t.exports=function(a,f){function c(b){b?v(b):null===b&&z();d()}function d(b){if("number"===typeof b)return r(b);b&&!Array.isArray(b)&&(b=[b]);a._refresh();w.forEach(function(a,c){a&&(b&&(a.draw=b[c]?!0:!1),a.draw?r(c):a.draw=!0)})}function r(b){"number"===typeof b&&(b=w[b]);null!=b&&b&&b.count&&b.color&&b.opacity&&b.positions&&1<b.positions.length&&(b.scaleRatio=[b.scale[0]*b.viewport.width,b.scale[1]*b.viewport.height],G(b),b.after&&b.after(b))}function v(a){if(a){null!=
a.length?"number"===typeof a[0]&&(a=[{positions:a}]):Array.isArray(a)||(a=[a]);var d=0,f=0;c.groups=w=a.map(function(a,c){var k=w[c];if(a)"function"===typeof a?a={after:a}:"number"===typeof a[0]&&(a={positions:a});else return k;a=e(a,{color:"color colors fill",capSize:"capSize cap capsize cap-size",lineWidth:"lineWidth line-width width line thickness",opacity:"opacity alpha",range:"range dataBox",viewport:"viewport viewBox",errors:"errors error",positions:"positions position data points"});k||(w[c]=
k={id:c,scale:null,translate:null,scaleFract:null,translateFract:null,draw:!0},a=n({},y,a));h(k,a,[{lineWidth:function(b){return.5*+b},capSize:function(b){return.5*+b},opacity:parseFloat,errors:function(a){a=b(a);f+=a.length;return a},positions:function(a,c){a=b(a,"float64");c.count=Math.floor(a.length/2);c.bounds=p(a,2);c.offset=d;d+=c.count;return a}},{color:function(b,a){a=a.count;b||(b="transparent");if(!Array.isArray(b)||"number"===typeof b[0]){var c=b;b=Array(a);for(var d=0;d<a;d++)b[d]=c}if(b.length<
a)throw Error("Not enough colors");c=new Uint8Array(4*a);for(d=0;d<a;d++){var f=g(b[d],"uint8");c.set(f,4*d)}return c},range:function(b,a,c){c=a.bounds;b||(b=c);a.scale=[1/(b[2]-b[0]),1/(b[3]-b[1])];a.translate=[-b[0],-b[1]];a.scaleFract=u(a.scale);a.translateFract=u(a.translate);return b},viewport:function(b){if(Array.isArray(b))var a={x:b[0],y:b[1],width:b[2]-b[0],height:b[3]-b[1]};else b?(a={x:b.x||b.left||0,y:b.y||b.top||0},a.width=b.right?b.right-a.x:b.w||b.width||0,a.height=b.bottom?b.bottom-
a.y:b.h||b.height||0):a={x:0,y:0,width:m.drawingBufferWidth,height:m.drawingBufferHeight};return a}}]);return k});if(d||f){a=w.reduce(function(b,a,c){return b+(a?a.count:0)},0);var k=new Float64Array(2*a),r=new Uint8Array(4*a),q=new Float32Array(4*a);w.forEach(function(b,a){if(b){a=b.positions;var c=b.offset,d=b.errors;b.count&&(r.set(b.color,4*c),q.set(d,4*c),k.set(a,2*c))}});t(l(k));B(u(k));x(r);C(q)}}}function z(){t.destroy();B.destroy();x.destroy();C.destroy();D.destroy()}"function"===typeof a?
(f||(f={}),f.regl=a):f=a;f.length&&(f.positions=f);a=f.regl;if(!a.hasExtension("ANGLE_instanced_arrays"))throw Error("regl-error2d: `ANGLE_instanced_arrays` extension should be enabled");var m=a._gl,y={color:"black",capSize:5,lineWidth:1,opacity:1,viewport:null,range:null,offset:0,count:0,bounds:null,positions:[],errors:[]},w=[];var x=a.buffer({usage:"dynamic",type:"uint8",data:new Uint8Array(0)});var t=a.buffer({usage:"dynamic",type:"float",data:new Uint8Array(0)});var B=a.buffer({usage:"dynamic",
type:"float",data:new Uint8Array(0)});var C=a.buffer({usage:"dynamic",type:"float",data:new Uint8Array(0)});var D=a.buffer({usage:"static",type:"float",data:q});v(f);var G=a({vert:"\n\t\tprecision highp float;\n\n\t\tattribute vec2 position, positionFract;\n\t\tattribute vec4 error;\n\t\tattribute vec4 color;\n\n\t\tattribute vec2 direction, lineOffset, capOffset;\n\n\t\tuniform vec4 viewport;\n\t\tuniform float lineWidth, capSize;\n\t\tuniform vec2 scale, scaleFract, translate, translateFract;\n\n\t\tvarying vec4 fragColor;\n\n\t\tvoid main() {\n\t\t\tfragColor \x3d color / 255.;\n\n\t\t\tvec2 pixelOffset \x3d lineWidth * lineOffset + (capSize + lineWidth) * capOffset;\n\n\t\t\tvec2 dxy \x3d -step(.5, direction.xy) * error.xz + step(direction.xy, vec2(-.5)) * error.yw;\n\n\t\t\tvec2 position \x3d position + dxy;\n\n\t\t\tvec2 pos \x3d (position + translate) * scale\n\t\t\t\t+ (positionFract + translateFract) * scale\n\t\t\t\t+ (position + translate) * scaleFract\n\t\t\t\t+ (positionFract + translateFract) * scaleFract;\n\n\t\t\tpos +\x3d pixelOffset / viewport.zw;\n\n\t\t\tgl_Position \x3d vec4(pos * 2. - 1., 0, 1);\n\t\t}\n\t\t",
frag:"\n\t\tprecision mediump float;\n\n\t\tvarying vec4 fragColor;\n\n\t\tuniform float opacity;\n\n\t\tvoid main() {\n\t\t\tgl_FragColor \x3d fragColor;\n\t\t\tgl_FragColor.a *\x3d opacity;\n\t\t}\n\t\t",uniforms:{range:a.prop("range"),lineWidth:a.prop("lineWidth"),capSize:a.prop("capSize"),opacity:a.prop("opacity"),scale:a.prop("scale"),translate:a.prop("translate"),scaleFract:a.prop("scaleFract"),translateFract:a.prop("translateFract"),viewport:function(b,a){return[a.viewport.x,a.viewport.y,b.viewportWidth,
b.viewportHeight]}},attributes:{color:{buffer:x,offset:function(b,a){return 4*a.offset},divisor:1},position:{buffer:t,offset:function(b,a){return 8*a.offset},divisor:1},positionFract:{buffer:B,offset:function(b,a){return 8*a.offset},divisor:1},error:{buffer:C,offset:function(b,a){return 16*a.offset},divisor:1},direction:{buffer:D,stride:24,offset:0},lineOffset:{buffer:D,stride:24,offset:8},capOffset:{buffer:D,stride:24,offset:16}},primitive:"triangles",blend:{enable:!0,color:[0,0,0,0],equation:{rgb:"add",
alpha:"add"},func:{srcRGB:"src alpha",dstRGB:"one minus src alpha",srcAlpha:"one minus dst alpha",dstAlpha:"one"}},depth:{enable:!1},scissor:{enable:!0,box:a.prop("viewport")},viewport:a.prop("viewport"),stencil:!1,instances:a.prop("count"),count:q.length});n(c,{update:v,draw:d,destroy:z,regl:a,gl:m,canvas:m.canvas,groups:w});return c};var q=[[1,0,0,1,0,0],[1,0,0,-1,0,0],[-1,0,0,-1,0,0],[-1,0,0,-1,0,0],[-1,0,0,1,0,0],[1,0,0,1,0,0],[1,0,-1,0,0,1],[1,0,-1,0,0,-1],[1,0,1,0,0,-1],[1,0,1,0,0,-1],[1,0,
1,0,0,1],[1,0,-1,0,0,1],[-1,0,-1,0,0,1],[-1,0,-1,0,0,-1],[-1,0,1,0,0,-1],[-1,0,1,0,0,-1],[-1,0,1,0,0,1],[-1,0,-1,0,0,1],[0,1,1,0,0,0],[0,1,-1,0,0,0],[0,-1,-1,0,0,0],[0,-1,-1,0,0,0],[0,1,1,0,0,0],[0,-1,1,0,0,0],[0,1,0,-1,1,0],[0,1,0,-1,-1,0],[0,1,0,1,-1,0],[0,1,0,1,1,0],[0,1,0,-1,1,0],[0,1,0,1,-1,0],[0,-1,0,-1,1,0],[0,-1,0,-1,-1,0],[0,-1,0,1,-1,0],[0,-1,0,1,1,0],[0,-1,0,-1,1,0],[0,-1,0,1,-1,0]]},{"array-bounds":55,"color-normalize":110,"flatten-vertex-data":223,"object-assign":446,"pick-by-alias":457,
"to-float32":522,"update-diff":533}],483:[function(a,t,m){function p(b,a){if(!(this instanceof p))return new p(b,a);"function"===typeof b?(a||(a={}),a.regl=b):a=b;a.length&&(a.positions=a);b=a.regl;if(!b.hasExtension("ANGLE_instanced_arrays"))throw Error("regl-error2d: `ANGLE_instanced_arrays` extension should be enabled");this.gl=b._gl;this.regl=b;this.passes=[];this.shaders=p.shaders.has(b)?p.shaders.get(b):p.shaders.set(b,p.createShaders(b)).get(b);this.update(a)}var g=a("color-normalize"),h=a("array-bounds"),
e=a("object-assign"),n=a("glslify"),b=a("pick-by-alias"),l=a("flatten-vertex-data"),u=a("earcut"),q=a("array-normalize");m=a("to-float32");var d=m.float32,f=m.fract32;m=a("es6-weak-map");var c=a("parse-rect");t.exports=p;p.dashMult=2;p.maxPatternLength=256;p.precisionThreshold=3E6;p.maxPoints=1E4;p.maxLines=2048;p.shaders=new m;p.createShaders=function(b){var a=b.buffer({usage:"static",type:"float",data:[0,1,0,0,1,1,1,0]}),c={primitive:"triangle strip",instances:b.prop("count"),count:4,offset:0,uniforms:{miterMode:function(b,
a){return"round"===a.join?2:1},miterLimit:b.prop("miterLimit"),scale:b.prop("scale"),scaleFract:b.prop("scaleFract"),translateFract:b.prop("translateFract"),translate:b.prop("translate"),thickness:b.prop("thickness"),dashPattern:b.prop("dashTexture"),opacity:b.prop("opacity"),pixelRatio:b.context("pixelRatio"),id:b.prop("id"),dashSize:b.prop("dashLength"),viewport:function(b,a){return[a.viewport.x,a.viewport.y,b.viewportWidth,b.viewportHeight]},depth:b.prop("depth")},blend:{enable:!0,color:[0,0,0,
0],equation:{rgb:"add",alpha:"add"},func:{srcRGB:"src alpha",dstRGB:"one minus src alpha",srcAlpha:"one minus dst alpha",dstAlpha:"one"}},depth:{enable:function(b,a){return!a.overlay}},stencil:{enable:!1},scissor:{enable:!0,box:b.prop("viewport")},viewport:b.prop("viewport")},d=b(e({vert:n(["precision highp float;\n#define GLSLIFY 1\n\nattribute vec2 aCoord, bCoord, aCoordFract, bCoordFract;\nattribute vec4 color;\nattribute float lineEnd, lineTop;\n\nuniform vec2 scale, scaleFract, translate, translateFract;\nuniform float thickness, pixelRatio, id, depth;\nuniform vec4 viewport;\n\nvarying vec4 fragColor;\nvarying vec2 tangent;\n\nvec2 project(vec2 position, vec2 positionFract, vec2 scale, vec2 scaleFract, vec2 translate, vec2 translateFract) {\n\t// the order is important\n\treturn position * scale + translate\n       + positionFract * scale + translateFract\n       + position * scaleFract\n       + positionFract * scaleFract;\n}\n\nvoid main() {\n\tfloat lineStart \x3d 1. - lineEnd;\n\tfloat lineOffset \x3d lineTop * 2. - 1.;\n\n\tvec2 diff \x3d (bCoord + bCoordFract - aCoord - aCoordFract);\n\ttangent \x3d normalize(diff * scale * viewport.zw);\n\tvec2 normal \x3d vec2(-tangent.y, tangent.x);\n\n\tvec2 position \x3d project(aCoord, aCoordFract, scale, scaleFract, translate, translateFract) * lineStart\n\t\t+ project(bCoord, bCoordFract, scale, scaleFract, translate, translateFract) * lineEnd\n\n\t\t+ thickness * normal * .5 * lineOffset / viewport.zw;\n\n\tgl_Position \x3d vec4(position * 2.0 - 1.0, depth, 1);\n\n\tfragColor \x3d color / 255.;\n}\n"]),
frag:n(["precision highp float;\n#define GLSLIFY 1\n\nuniform sampler2D dashPattern;\n\nuniform float dashSize, pixelRatio, thickness, opacity, id;\n\nvarying vec4 fragColor;\nvarying vec2 tangent;\n\nvoid main() {\n\tfloat alpha \x3d 1.;\n\n\tfloat t \x3d fract(dot(tangent, gl_FragCoord.xy) / dashSize) * .5 + .25;\n\tfloat dash \x3d texture2D(dashPattern, vec2(t, .5)).r;\n\n\tgl_FragColor \x3d fragColor;\n\tgl_FragColor.a *\x3d alpha * opacity * dash;\n}\n"]),attributes:{lineEnd:{buffer:a,divisor:0,
stride:8,offset:0},lineTop:{buffer:a,divisor:0,stride:8,offset:4},aCoord:{buffer:b.prop("positionBuffer"),stride:8,offset:8,divisor:1},bCoord:{buffer:b.prop("positionBuffer"),stride:8,offset:16,divisor:1},aCoordFract:{buffer:b.prop("positionFractBuffer"),stride:8,offset:8,divisor:1},bCoordFract:{buffer:b.prop("positionFractBuffer"),stride:8,offset:16,divisor:1},color:{buffer:b.prop("colorBuffer"),stride:4,offset:0,divisor:1}}},c));try{var f=b(e({cull:{enable:!0,face:"back"},vert:n(["precision highp float;\n#define GLSLIFY 1\n\nattribute vec2 aCoord, bCoord, nextCoord, prevCoord;\nattribute vec4 aColor, bColor;\nattribute float lineEnd, lineTop;\n\nuniform vec2 scale, translate;\nuniform float thickness, pixelRatio, id, depth;\nuniform vec4 viewport;\nuniform float miterLimit, miterMode;\n\nvarying vec4 fragColor;\nvarying vec4 startCutoff, endCutoff;\nvarying vec2 tangent;\nvarying vec2 startCoord, endCoord;\nvarying float enableStartMiter, enableEndMiter;\n\nconst float REVERSE_THRESHOLD \x3d -.875;\nconst float MIN_DIFF \x3d 1e-6;\n\n// TODO: possible optimizations: avoid overcalculating all for vertices and calc just one instead\n// TODO: precalculate dot products, normalize things beforehead etc.\n// TODO: refactor to rectangular algorithm\n\nfloat distToLine(vec2 p, vec2 a, vec2 b) {\n\tvec2 diff \x3d b - a;\n\tvec2 perp \x3d normalize(vec2(-diff.y, diff.x));\n\treturn dot(p - a, perp);\n}\n\nbool isNaN( float val ){\n  return ( val \x3c 0.0 || 0.0 \x3c val || val \x3d\x3d 0.0 ) ? false : true;\n}\n\nvoid main() {\n\tvec2 aCoord \x3d aCoord, bCoord \x3d bCoord, prevCoord \x3d prevCoord, nextCoord \x3d nextCoord;\n\n  vec2 adjustedScale;\n  adjustedScale.x \x3d (abs(scale.x) \x3c MIN_DIFF) ? MIN_DIFF : scale.x;\n  adjustedScale.y \x3d (abs(scale.y) \x3c MIN_DIFF) ? MIN_DIFF : scale.y;\n\n  vec2 scaleRatio \x3d adjustedScale * viewport.zw;\n\tvec2 normalWidth \x3d thickness / scaleRatio;\n\n\tfloat lineStart \x3d 1. - lineEnd;\n\tfloat lineBot \x3d 1. - lineTop;\n\n\tfragColor \x3d (lineStart * aColor + lineEnd * bColor) / 255.;\n\n\tif (isNaN(aCoord.x) || isNaN(aCoord.y) || isNaN(bCoord.x) || isNaN(bCoord.y)) return;\n\n\tif (aCoord \x3d\x3d prevCoord) prevCoord \x3d aCoord + normalize(bCoord - aCoord);\n\tif (bCoord \x3d\x3d nextCoord) nextCoord \x3d bCoord - normalize(bCoord - aCoord);\n\n\tvec2 prevDiff \x3d aCoord - prevCoord;\n\tvec2 currDiff \x3d bCoord - aCoord;\n\tvec2 nextDiff \x3d nextCoord - bCoord;\n\n\tvec2 prevTangent \x3d normalize(prevDiff * scaleRatio);\n\tvec2 currTangent \x3d normalize(currDiff * scaleRatio);\n\tvec2 nextTangent \x3d normalize(nextDiff * scaleRatio);\n\n\tvec2 prevNormal \x3d vec2(-prevTangent.y, prevTangent.x);\n\tvec2 currNormal \x3d vec2(-currTangent.y, currTangent.x);\n\tvec2 nextNormal \x3d vec2(-nextTangent.y, nextTangent.x);\n\n\tvec2 startJoinDirection \x3d normalize(prevTangent - currTangent);\n\tvec2 endJoinDirection \x3d normalize(currTangent - nextTangent);\n\n\t// collapsed/unidirectional segment cases\n\t// FIXME: there should be more elegant solution\n\tvec2 prevTanDiff \x3d abs(prevTangent - currTangent);\n\tvec2 nextTanDiff \x3d abs(nextTangent - currTangent);\n\tif (max(prevTanDiff.x, prevTanDiff.y) \x3c MIN_DIFF) {\n\t\tstartJoinDirection \x3d currNormal;\n\t}\n\tif (max(nextTanDiff.x, nextTanDiff.y) \x3c MIN_DIFF) {\n\t\tendJoinDirection \x3d currNormal;\n\t}\n\tif (aCoord \x3d\x3d bCoord) {\n\t\tendJoinDirection \x3d startJoinDirection;\n\t\tcurrNormal \x3d prevNormal;\n\t\tcurrTangent \x3d prevTangent;\n\t}\n\n\ttangent \x3d currTangent;\n\n\t//calculate join shifts relative to normals\n\tfloat startJoinShift \x3d dot(currNormal, startJoinDirection);\n\tfloat endJoinShift \x3d dot(currNormal, endJoinDirection);\n\n\tfloat startMiterRatio \x3d abs(1. / startJoinShift);\n\tfloat endMiterRatio \x3d abs(1. / endJoinShift);\n\n\tvec2 startJoin \x3d startJoinDirection * startMiterRatio;\n\tvec2 endJoin \x3d endJoinDirection * endMiterRatio;\n\n\tvec2 startTopJoin, startBotJoin, endTopJoin, endBotJoin;\n\tstartTopJoin \x3d sign(startJoinShift) * startJoin * .5;\n\tstartBotJoin \x3d -startTopJoin;\n\n\tendTopJoin \x3d sign(endJoinShift) * endJoin * .5;\n\tendBotJoin \x3d -endTopJoin;\n\n\tvec2 aTopCoord \x3d aCoord + normalWidth * startTopJoin;\n\tvec2 bTopCoord \x3d bCoord + normalWidth * endTopJoin;\n\tvec2 aBotCoord \x3d aCoord + normalWidth * startBotJoin;\n\tvec2 bBotCoord \x3d bCoord + normalWidth * endBotJoin;\n\n\t//miter anti-clipping\n\tfloat baClipping \x3d distToLine(bCoord, aCoord, aBotCoord) / dot(normalize(normalWidth * endBotJoin), normalize(normalWidth.yx * vec2(-startBotJoin.y, startBotJoin.x)));\n\tfloat abClipping \x3d distToLine(aCoord, bCoord, bTopCoord) / dot(normalize(normalWidth * startBotJoin), normalize(normalWidth.yx * vec2(-endBotJoin.y, endBotJoin.x)));\n\n\t//prevent close to reverse direction switch\n\tbool prevReverse \x3d dot(currTangent, prevTangent) \x3c\x3d REVERSE_THRESHOLD \x26\x26 abs(dot(currTangent, prevNormal)) * min(length(prevDiff), length(currDiff)) \x3c  length(normalWidth * currNormal);\n\tbool nextReverse \x3d dot(currTangent, nextTangent) \x3c\x3d REVERSE_THRESHOLD \x26\x26 abs(dot(currTangent, nextNormal)) * min(length(nextDiff), length(currDiff)) \x3c  length(normalWidth * currNormal);\n\n\tif (prevReverse) {\n\t\t//make join rectangular\n\t\tvec2 miterShift \x3d normalWidth * startJoinDirection * miterLimit * .5;\n\t\tfloat normalAdjust \x3d 1. - min(miterLimit / startMiterRatio, 1.);\n\t\taBotCoord \x3d aCoord + miterShift - normalAdjust * normalWidth * currNormal * .5;\n\t\taTopCoord \x3d aCoord + miterShift + normalAdjust * normalWidth * currNormal * .5;\n\t}\n\telse if (!nextReverse \x26\x26 baClipping \x3e 0. \x26\x26 baClipping \x3c length(normalWidth * endBotJoin)) {\n\t\t//handle miter clipping\n\t\tbTopCoord -\x3d normalWidth * endTopJoin;\n\t\tbTopCoord +\x3d normalize(endTopJoin * normalWidth) * baClipping;\n\t}\n\n\tif (nextReverse) {\n\t\t//make join rectangular\n\t\tvec2 miterShift \x3d normalWidth * endJoinDirection * miterLimit * .5;\n\t\tfloat normalAdjust \x3d 1. - min(miterLimit / endMiterRatio, 1.);\n\t\tbBotCoord \x3d bCoord + miterShift - normalAdjust * normalWidth * currNormal * .5;\n\t\tbTopCoord \x3d bCoord + miterShift + normalAdjust * normalWidth * currNormal * .5;\n\t}\n\telse if (!prevReverse \x26\x26 abClipping \x3e 0. \x26\x26 abClipping \x3c length(normalWidth * startBotJoin)) {\n\t\t//handle miter clipping\n\t\taBotCoord -\x3d normalWidth * startBotJoin;\n\t\taBotCoord +\x3d normalize(startBotJoin * normalWidth) * abClipping;\n\t}\n\n\tvec2 aTopPosition \x3d (aTopCoord) * adjustedScale + translate;\n\tvec2 aBotPosition \x3d (aBotCoord) * adjustedScale + translate;\n\n\tvec2 bTopPosition \x3d (bTopCoord) * adjustedScale + translate;\n\tvec2 bBotPosition \x3d (bBotCoord) * adjustedScale + translate;\n\n\t//position is normalized 0..1 coord on the screen\n\tvec2 position \x3d (aTopPosition * lineTop + aBotPosition * lineBot) * lineStart + (bTopPosition * lineTop + bBotPosition * lineBot) * lineEnd;\n\n\tstartCoord \x3d aCoord * scaleRatio + translate * viewport.zw + viewport.xy;\n\tendCoord \x3d bCoord * scaleRatio + translate * viewport.zw + viewport.xy;\n\n\tgl_Position \x3d vec4(position  * 2.0 - 1.0, depth, 1);\n\n\tenableStartMiter \x3d step(dot(currTangent, prevTangent), .5);\n\tenableEndMiter \x3d step(dot(currTangent, nextTangent), .5);\n\n\t//bevel miter cutoffs\n\tif (miterMode \x3d\x3d 1.) {\n\t\tif (enableStartMiter \x3d\x3d 1.) {\n\t\t\tvec2 startMiterWidth \x3d vec2(startJoinDirection) * thickness * miterLimit * .5;\n\t\t\tstartCutoff \x3d vec4(aCoord, aCoord);\n\t\t\tstartCutoff.zw +\x3d vec2(-startJoinDirection.y, startJoinDirection.x) / scaleRatio;\n\t\t\tstartCutoff \x3d startCutoff * scaleRatio.xyxy + translate.xyxy * viewport.zwzw;\n\t\t\tstartCutoff +\x3d viewport.xyxy;\n\t\t\tstartCutoff +\x3d startMiterWidth.xyxy;\n\t\t}\n\n\t\tif (enableEndMiter \x3d\x3d 1.) {\n\t\t\tvec2 endMiterWidth \x3d vec2(endJoinDirection) * thickness * miterLimit * .5;\n\t\t\tendCutoff \x3d vec4(bCoord, bCoord);\n\t\t\tendCutoff.zw +\x3d vec2(-endJoinDirection.y, endJoinDirection.x)  / scaleRatio;\n\t\t\tendCutoff \x3d endCutoff * scaleRatio.xyxy + translate.xyxy * viewport.zwzw;\n\t\t\tendCutoff +\x3d viewport.xyxy;\n\t\t\tendCutoff +\x3d endMiterWidth.xyxy;\n\t\t}\n\t}\n\n\t//round miter cutoffs\n\telse if (miterMode \x3d\x3d 2.) {\n\t\tif (enableStartMiter \x3d\x3d 1.) {\n\t\t\tvec2 startMiterWidth \x3d vec2(startJoinDirection) * thickness * abs(dot(startJoinDirection, currNormal)) * .5;\n\t\t\tstartCutoff \x3d vec4(aCoord, aCoord);\n\t\t\tstartCutoff.zw +\x3d vec2(-startJoinDirection.y, startJoinDirection.x) / scaleRatio;\n\t\t\tstartCutoff \x3d startCutoff * scaleRatio.xyxy + translate.xyxy * viewport.zwzw;\n\t\t\tstartCutoff +\x3d viewport.xyxy;\n\t\t\tstartCutoff +\x3d startMiterWidth.xyxy;\n\t\t}\n\n\t\tif (enableEndMiter \x3d\x3d 1.) {\n\t\t\tvec2 endMiterWidth \x3d vec2(endJoinDirection) * thickness * abs(dot(endJoinDirection, currNormal)) * .5;\n\t\t\tendCutoff \x3d vec4(bCoord, bCoord);\n\t\t\tendCutoff.zw +\x3d vec2(-endJoinDirection.y, endJoinDirection.x)  / scaleRatio;\n\t\t\tendCutoff \x3d endCutoff * scaleRatio.xyxy + translate.xyxy * viewport.zwzw;\n\t\t\tendCutoff +\x3d viewport.xyxy;\n\t\t\tendCutoff +\x3d endMiterWidth.xyxy;\n\t\t}\n\t}\n}\n"]),
frag:n(["precision highp float;\n#define GLSLIFY 1\n\nuniform sampler2D dashPattern;\nuniform float dashSize, pixelRatio, thickness, opacity, id, miterMode;\n\nvarying vec4 fragColor;\nvarying vec2 tangent;\nvarying vec4 startCutoff, endCutoff;\nvarying vec2 startCoord, endCoord;\nvarying float enableStartMiter, enableEndMiter;\n\nfloat distToLine(vec2 p, vec2 a, vec2 b) {\n\tvec2 diff \x3d b - a;\n\tvec2 perp \x3d normalize(vec2(-diff.y, diff.x));\n\treturn dot(p - a, perp);\n}\n\nvoid main() {\n\tfloat alpha \x3d 1., distToStart, distToEnd;\n\tfloat cutoff \x3d thickness * .5;\n\n\t//bevel miter\n\tif (miterMode \x3d\x3d 1.) {\n\t\tif (enableStartMiter \x3d\x3d 1.) {\n\t\t\tdistToStart \x3d distToLine(gl_FragCoord.xy, startCutoff.xy, startCutoff.zw);\n\t\t\tif (distToStart \x3c -1.) {\n\t\t\t\tdiscard;\n\t\t\t\treturn;\n\t\t\t}\n\t\t\talpha *\x3d min(max(distToStart + 1., 0.), 1.);\n\t\t}\n\n\t\tif (enableEndMiter \x3d\x3d 1.) {\n\t\t\tdistToEnd \x3d distToLine(gl_FragCoord.xy, endCutoff.xy, endCutoff.zw);\n\t\t\tif (distToEnd \x3c -1.) {\n\t\t\t\tdiscard;\n\t\t\t\treturn;\n\t\t\t}\n\t\t\talpha *\x3d min(max(distToEnd + 1., 0.), 1.);\n\t\t}\n\t}\n\n\t// round miter\n\telse if (miterMode \x3d\x3d 2.) {\n\t\tif (enableStartMiter \x3d\x3d 1.) {\n\t\t\tdistToStart \x3d distToLine(gl_FragCoord.xy, startCutoff.xy, startCutoff.zw);\n\t\t\tif (distToStart \x3c 0.) {\n\t\t\t\tfloat radius \x3d length(gl_FragCoord.xy - startCoord);\n\n\t\t\t\tif(radius \x3e cutoff + .5) {\n\t\t\t\t\tdiscard;\n\t\t\t\t\treturn;\n\t\t\t\t}\n\n\t\t\t\talpha -\x3d smoothstep(cutoff - .5, cutoff + .5, radius);\n\t\t\t}\n\t\t}\n\n\t\tif (enableEndMiter \x3d\x3d 1.) {\n\t\t\tdistToEnd \x3d distToLine(gl_FragCoord.xy, endCutoff.xy, endCutoff.zw);\n\t\t\tif (distToEnd \x3c 0.) {\n\t\t\t\tfloat radius \x3d length(gl_FragCoord.xy - endCoord);\n\n\t\t\t\tif(radius \x3e cutoff + .5) {\n\t\t\t\t\tdiscard;\n\t\t\t\t\treturn;\n\t\t\t\t}\n\n\t\t\t\talpha -\x3d smoothstep(cutoff - .5, cutoff + .5, radius);\n\t\t\t}\n\t\t}\n\t}\n\n\tfloat t \x3d fract(dot(tangent, gl_FragCoord.xy) / dashSize) * .5 + .25;\n\tfloat dash \x3d texture2D(dashPattern, vec2(t, .5)).r;\n\n\tgl_FragColor \x3d fragColor;\n\tgl_FragColor.a *\x3d alpha * opacity * dash;\n}\n"]),
attributes:{lineEnd:{buffer:a,divisor:0,stride:8,offset:0},lineTop:{buffer:a,divisor:0,stride:8,offset:4},aColor:{buffer:b.prop("colorBuffer"),stride:4,offset:0,divisor:1},bColor:{buffer:b.prop("colorBuffer"),stride:4,offset:4,divisor:1},prevCoord:{buffer:b.prop("positionBuffer"),stride:8,offset:0,divisor:1},aCoord:{buffer:b.prop("positionBuffer"),stride:8,offset:8,divisor:1},bCoord:{buffer:b.prop("positionBuffer"),stride:8,offset:16,divisor:1},nextCoord:{buffer:b.prop("positionBuffer"),stride:8,
offset:24,divisor:1}}},c))}catch(y){f=d}return{fill:b({primitive:"triangle",elements:function(b,a){return a.triangles},offset:0,vert:n(["precision highp float;\n#define GLSLIFY 1\n\nattribute vec2 position, positionFract;\n\nuniform vec4 color;\nuniform vec2 scale, scaleFract, translate, translateFract;\nuniform float pixelRatio, id;\nuniform vec4 viewport;\nuniform float opacity;\n\nvarying vec4 fragColor;\n\nconst float MAX_LINES \x3d 256.;\n\nvoid main() {\n\tfloat depth \x3d (MAX_LINES - 4. - id) / (MAX_LINES);\n\n\tvec2 position \x3d position * scale + translate\n       + positionFract * scale + translateFract\n       + position * scaleFract\n       + positionFract * scaleFract;\n\n\tgl_Position \x3d vec4(position * 2.0 - 1.0, depth, 1);\n\n\tfragColor \x3d color / 255.;\n\tfragColor.a *\x3d opacity;\n}\n"]),
frag:n(["precision highp float;\n#define GLSLIFY 1\n\nvarying vec4 fragColor;\n\nvoid main() {\n\tgl_FragColor \x3d fragColor;\n}\n"]),uniforms:{scale:b.prop("scale"),color:b.prop("fill"),scaleFract:b.prop("scaleFract"),translateFract:b.prop("translateFract"),translate:b.prop("translate"),opacity:b.prop("opacity"),pixelRatio:b.context("pixelRatio"),id:b.prop("id"),viewport:function(b,a){return[a.viewport.x,a.viewport.y,b.viewportWidth,b.viewportHeight]}},attributes:{position:{buffer:b.prop("positionBuffer"),
stride:8,offset:8},positionFract:{buffer:b.prop("positionFractBuffer"),stride:8,offset:8}},blend:c.blend,depth:{enable:!1},scissor:c.scissor,stencil:c.stencil,viewport:c.viewport}),rect:d,miter:f}};p.defaults={dashes:null,join:"miter",miterLimit:1,thickness:10,cap:"square",color:"black",opacity:1,overlay:!1,viewport:null,range:null,close:!1,fill:null};p.prototype.render=function(){for(var b=[],a=arguments.length;a--;)b[a]=arguments[a];b.length&&this.update.apply(this,b);this.draw()};p.prototype.draw=
function(){for(var b=this,a=[],c=arguments.length;c--;)a[c]=arguments[c];(a.length?a:this.passes).forEach(function(a,c){if(a&&Array.isArray(a))return b.draw.apply(b,a);"number"===typeof a&&(a=b.passes[a]);a&&1<a.count&&a.opacity&&(b.regl._refresh(),a.fill&&a.triangles&&2<a.triangles.length&&b.shaders.fill(a),a.thickness&&(a.scale[0]*a.viewport.width>p.precisionThreshold||a.scale[1]*a.viewport.height>p.precisionThreshold?b.shaders.rect(a):"rect"===a.join||!a.join&&(2>=a.thickness||a.count>=p.maxPoints)?
b.shaders.rect(a):b.shaders.miter(a)))});return this};p.prototype.update=function(a){var k=this;if(a){null!=a.length?"number"===typeof a[0]&&(a=[{positions:a}]):Array.isArray(a)||(a=[a]);var n=this.regl,z=this.gl;a.forEach(function(a,r){var v=k.passes[r];if(void 0!==a)if(null===a)k.passes[r]=null;else{"number"===typeof a[0]&&(a={positions:a});a=b(a,{positions:"positions points data coords",thickness:"thickness lineWidth lineWidths line-width linewidth width stroke-width strokewidth strokeWidth",join:"lineJoin linejoin join type mode",
miterLimit:"miterlimit miterLimit",dashes:"dash dashes dasharray dash-array dashArray",color:"color colour stroke colors colours stroke-color strokeColor",fill:"fill fill-color fillColor",opacity:"alpha opacity",overlay:"overlay crease overlap intersect",close:"closed close closed-path closePath",range:"range dataBox",viewport:"viewport viewBox",hole:"holes hole hollow"});v||(k.passes[r]=v={id:r,scale:null,scaleFract:null,translate:null,translateFract:null,count:0,hole:[],depth:0,dashLength:1,dashTexture:n.texture({channels:1,
data:new Uint8Array([255]),width:1,height:1,mag:"linear",min:"linear"}),colorBuffer:n.buffer({usage:"dynamic",type:"uint8",data:new Uint8Array}),positionBuffer:n.buffer({usage:"dynamic",type:"float",data:new Uint8Array}),positionFractBuffer:n.buffer({usage:"dynamic",type:"float",data:new Uint8Array})},a=e({},p.defaults,a));null!=a.thickness&&(v.thickness=parseFloat(a.thickness));null!=a.opacity&&(v.opacity=parseFloat(a.opacity));null!=a.miterLimit&&(v.miterLimit=parseFloat(a.miterLimit));null!=a.overlay&&
(v.overlay=!!a.overlay,r<p.maxLines&&(v.depth=2*(p.maxLines-1-r%p.maxLines)/p.maxLines-1));null!=a.join&&(v.join=a.join);null!=a.hole&&(v.hole=a.hole);null!=a.fill&&(v.fill=a.fill?g(a.fill,"uint8"):null);null!=a.viewport&&(v.viewport=c(a.viewport));v.viewport||(v.viewport=c([z.drawingBufferWidth,z.drawingBufferHeight]));null!=a.close&&(v.close=a.close);null===a.positions&&(a.positions=[]);if(a.positions){if(a.positions.x&&a.positions.y){var m=a.positions.x,w=a.positions.y;var A=v.count=Math.max(m.length,
w.length);r=new Float64Array(2*A);for(var x=0;x<A;x++)r[2*x]=m[x],r[2*x+1]=w[x]}else r=l(a.positions,"float64"),A=v.count=Math.floor(r.length/2);m=v.bounds=h(r,2);if(v.fill){x=[];w={};for(var y=0,t=0,K=0,I=v.count;t<I;t++){var J=r[2*t],L=r[2*t+1];isNaN(J)||isNaN(L)||null==J||null==L?(J=r[2*y],L=r[2*y+1],w[t]=y):y=t;x[K++]=J;x[K++]=L}x=u(x,v.hole||[]);y=0;for(t=x.length;y<t;y++)null!=w[x[y]]&&(x[y]=w[x[y]]);v.triangles=x}w=new Float64Array(r);q(w,2,m);m=new Float64Array(2*A+6);v.close?r[0]===r[2*A-
2]&&r[1]===r[2*A-1]?(m[0]=w[2*A-4],m[1]=w[2*A-3]):(m[0]=w[2*A-2],m[1]=w[2*A-1]):(m[0]=w[0],m[1]=w[1]);m.set(w,2);v.close?r[0]===r[2*A-2]&&r[1]===r[2*A-1]?(m[2*A+2]=w[2],m[2*A+3]=w[3],--v.count):(m[2*A+2]=w[0],m[2*A+3]=w[1],m[2*A+4]=w[2],m[2*A+5]=w[3]):(m[2*A+2]=w[2*A-2],m[2*A+3]=w[2*A-1],m[2*A+4]=w[2*A-2],m[2*A+5]=w[2*A-1]);v.positionBuffer(d(m));v.positionFractBuffer(f(m))}a.range?v.range=a.range:v.range||(v.range=v.bounds);(a.range||a.positions)&&v.count&&(r=v.bounds,A=v.range[2]-v.range[0],m=v.range[3]-
v.range[1],v.scale=[(r[2]-r[0])/A,(r[3]-r[1])/m],v.translate=[-v.range[0]/A+r[0]/A||0,-v.range[1]/m+r[1]/m||0],v.scaleFract=f(v.scale),v.translateFract=f(v.translate));if(a.dashes){if(!a.dashes||2>a.dashes.length)r=1,A=new Uint8Array([255,255,255,255,255,255,255,255]);else{for(A=r=0;A<a.dashes.length;++A)r+=a.dashes[A];A=new Uint8Array(r*p.dashMult);m=0;w=255;for(x=0;2>x;x++)for(y=0;y<a.dashes.length;++y){t=0;for(K=a.dashes[y]*p.dashMult*.5;t<K;++t)A[m++]=w;w^=255}}v.dashLength=r;v.dashTexture({channels:1,
data:A,width:A.length,height:1,mag:"linear",min:"linear"},0,0)}if(a.color){r=v.count;(A=a.color)||(A="transparent");a=new Uint8Array(4*r+4);if(Array.isArray(A)&&"number"!==typeof A[0]){for(m=0;m<r;m++)w=g(A[m],"uint8"),a.set(w,4*m);a.set(g(A[0],"uint8"),4*r)}else for(A=g(A,"uint8"),m=0;m<r+1;m++)a.set(A,4*m);v.colorBuffer({usage:"dynamic",type:"uint8",data:a})}}});if(a.length<this.passes.length){for(var m=a.length;m<this.passes.length;m++){var y=k.passes[m];y&&(y.colorBuffer.destroy(),y.positionBuffer.destroy(),
y.dashTexture.destroy())}this.passes.length=a.length}a=[];for(m=0;m<this.passes.length;m++)null!==k.passes[m]&&a.push(k.passes[m]);this.passes=a;return this}};p.prototype.destroy=function(){this.passes.forEach(function(b){b.colorBuffer.destroy();b.positionBuffer.destroy();b.dashTexture.destroy()});this.passes.length=0;return this}},{"array-bounds":55,"array-normalize":56,"color-normalize":110,earcut:162,"es6-weak-map":216,"flatten-vertex-data":223,glslify:401,"object-assign":446,"parse-rect":451,
"pick-by-alias":457,"to-float32":522}],484:[function(a,t,m){function p(b){if(Array.isArray(b)){var a=0;for(var c=Array(b.length);a<b.length;a++)c[a]=b[a];a=c}else a=void 0;a||($jscomp.initSymbol(),$jscomp.initSymbolIterator(),a=Symbol.iterator in Object(b)||"[object Arguments]"===Object.prototype.toString.call(b)?Array.from(b):void 0);if(!(b=a))throw new TypeError("Invalid attempt to spread non-iterable instance");return b}function g(b,a){var d=this;if(!(this instanceof g))return new g(b,a);"function"===
typeof b?(a||(a={}),a.regl=b):(a=b,b=null);a&&a.length&&(a.positions=a);b=a.regl;var f=b._gl,e=[];this.tooManyColors=c;var k=b.texture({data:new Uint8Array(1020),width:255,height:1,type:"uint8",format:"rgba",wrapS:"clamp",wrapT:"clamp",mag:"nearest",min:"nearest"});l(this,{regl:b,gl:f,groups:[],markerCache:[null],markerTextures:[null],palette:e,paletteIds:{},paletteTexture:k,maxColors:255,maxSize:100,canvas:f.canvas});this.update(a);f={uniforms:{pixelRatio:b.context("pixelRatio"),palette:k,paletteSize:function(b,
a){return[d.tooManyColors?0:255,k.height]},scale:b.prop("scale"),scaleFract:b.prop("scaleFract"),translate:b.prop("translate"),translateFract:b.prop("translateFract"),opacity:b.prop("opacity"),marker:b.prop("markerTexture")},attributes:{x:function(b,a){return a.xAttr||{buffer:a.positionBuffer,stride:8,offset:0}},y:function(b,a){return a.yAttr||{buffer:a.positionBuffer,stride:8,offset:4}},xFract:function(b,a){return a.xAttr?{constant:[0,0]}:{buffer:a.positionFractBuffer,stride:8,offset:0}},yFract:function(b,
a){return a.yAttr?{constant:[0,0]}:{buffer:a.positionFractBuffer,stride:8,offset:4}},size:function(b,a){return a.size.length?{buffer:a.sizeBuffer,stride:2,offset:0}:{constant:[Math.round(255*a.size/d.maxSize)]}},borderSize:function(b,a){return a.borderSize.length?{buffer:a.sizeBuffer,stride:2,offset:1}:{constant:[Math.round(255*a.borderSize/d.maxSize)]}},colorId:function(b,a){return a.color.length?{buffer:a.colorBuffer,stride:d.tooManyColors?8:4,offset:0}:{constant:d.tooManyColors?e.slice(4*a.color,
4*a.color+4):[a.color]}},borderColorId:function(b,a){return a.borderColor.length?{buffer:a.colorBuffer,stride:d.tooManyColors?8:4,offset:d.tooManyColors?4:2}:{constant:d.tooManyColors?e.slice(4*a.borderColor,4*a.borderColor+4):[a.borderColor]}},isActive:function(b,a){return!0===a.activation?{constant:[1]}:a.activation?a.activation:{constant:[0]}}},blend:{enable:!0,color:[0,0,0,1],func:{srcRGB:"src alpha",dstRGB:"one minus src alpha",srcAlpha:"one minus dst alpha",dstAlpha:"one"}},scissor:{enable:!0,
box:b.prop("viewport")},viewport:b.prop("viewport"),stencil:{enable:!1},depth:{enable:!1},elements:b.prop("elements"),count:b.prop("count"),offset:b.prop("offset"),primitive:"points"};a=l({},f);a.frag=u(["precision highp float;\n#define GLSLIFY 1\n\nvarying vec4 fragColor, fragBorderColor;\nvarying float fragWidth, fragBorderColorLevel, fragColorLevel;\n\nuniform sampler2D marker;\nuniform float pixelRatio, opacity;\n\nfloat smoothStep(float x, float y) {\n  return 1.0 / (1.0 + exp(50.0*(x - y)));\n}\n\nvoid main() {\n  float dist \x3d texture2D(marker, gl_PointCoord).r, delta \x3d fragWidth;\n\n  // max-distance alpha\n  if (dist \x3c 0.003) discard;\n\n  // null-border case\n  if (fragBorderColorLevel \x3d\x3d fragColorLevel || fragBorderColor.a \x3d\x3d 0.) {\n    float colorAmt \x3d smoothstep(.5 - delta, .5 + delta, dist);\n    gl_FragColor \x3d vec4(fragColor.rgb, colorAmt * fragColor.a * opacity);\n  }\n  else {\n    float borderColorAmt \x3d smoothstep(fragBorderColorLevel - delta, fragBorderColorLevel + delta, dist);\n    float colorAmt \x3d smoothstep(fragColorLevel - delta, fragColorLevel + delta, dist);\n\n    vec4 color \x3d fragBorderColor;\n    color.a *\x3d borderColorAmt;\n    color \x3d mix(color, fragColor, colorAmt);\n    color.a *\x3d opacity;\n\n    gl_FragColor \x3d color;\n  }\n\n}\n"]);
a.vert=u(["precision highp float;\n#define GLSLIFY 1\n\nattribute float x, y, xFract, yFract;\nattribute float size, borderSize;\nattribute vec4 colorId, borderColorId;\nattribute float isActive;\n\nuniform vec2 scale, scaleFract, translate, translateFract, paletteSize;\nuniform float pixelRatio;\nuniform sampler2D palette;\n\nconst float maxSize \x3d 100.;\nconst float borderLevel \x3d .5;\n\nvarying vec4 fragColor, fragBorderColor;\nvarying float fragPointSize, fragBorderRadius, fragWidth, fragBorderColorLevel, fragColorLevel;\n\nbool isDirect \x3d (paletteSize.x \x3c 1.);\n\nvec4 getColor(vec4 id) {\n  return isDirect ? id / 255. : texture2D(palette,\n    vec2(\n      (id.x + .5) / paletteSize.x,\n      (id.y + .5) / paletteSize.y\n    )\n  );\n}\n\nvoid main() {\n  if (isActive \x3d\x3d 0.) return;\n\n  vec2 position \x3d vec2(x, y);\n  vec2 positionFract \x3d vec2(xFract, yFract);\n\n  vec4 color \x3d getColor(colorId);\n  vec4 borderColor \x3d getColor(borderColorId);\n\n  float size \x3d size * maxSize / 255.;\n  float borderSize \x3d borderSize * maxSize / 255.;\n\n  gl_PointSize \x3d 2. * size * pixelRatio;\n  fragPointSize \x3d size * pixelRatio;\n\n  vec2 pos \x3d (position + translate) * scale\n      + (positionFract + translateFract) * scale\n      + (position + translate) * scaleFract\n      + (positionFract + translateFract) * scaleFract;\n\n  gl_Position \x3d vec4(pos * 2. - 1., 0, 1);\n\n  fragColor \x3d color;\n  fragBorderColor \x3d borderColor;\n  fragWidth \x3d 1. / gl_PointSize;\n\n  fragBorderColorLevel \x3d clamp(borderLevel - borderLevel * borderSize / size, 0., 1.);\n  fragColorLevel \x3d clamp(borderLevel + (1. - borderLevel) * borderSize / size, 0., 1.);\n}"]);
this.drawMarker=b(a);f=l({},f);f.frag=u(["precision highp float;\n#define GLSLIFY 1\n\nvarying vec4 fragColor, fragBorderColor;\n\nuniform float opacity;\nvarying float fragBorderRadius, fragWidth;\n\nfloat smoothStep(float edge0, float edge1, float x) {\n\tfloat t;\n\tt \x3d clamp((x - edge0) / (edge1 - edge0), 0.0, 1.0);\n\treturn t * t * (3.0 - 2.0 * t);\n}\n\nvoid main() {\n\tfloat radius, alpha \x3d 1.0, delta \x3d fragWidth;\n\n\tradius \x3d length(2.0 * gl_PointCoord.xy - 1.0);\n\n\tif (radius \x3e 1.0 + delta) {\n\t\tdiscard;\n\t}\n\n\talpha -\x3d smoothstep(1.0 - delta, 1.0 + delta, radius);\n\n\tfloat borderRadius \x3d fragBorderRadius;\n\tfloat ratio \x3d smoothstep(borderRadius - delta, borderRadius + delta, radius);\n\tvec4 color \x3d mix(fragColor, fragBorderColor, ratio);\n\tcolor.a *\x3d alpha * opacity;\n\tgl_FragColor \x3d color;\n}\n"]);
f.vert=u(["precision highp float;\n#define GLSLIFY 1\n\nattribute float x, y, xFract, yFract;\nattribute float size, borderSize;\nattribute vec4 colorId, borderColorId;\nattribute float isActive;\n\nuniform vec2 scale, scaleFract, translate, translateFract;\nuniform float pixelRatio;\nuniform sampler2D palette;\nuniform vec2 paletteSize;\n\nconst float maxSize \x3d 100.;\n\nvarying vec4 fragColor, fragBorderColor;\nvarying float fragBorderRadius, fragWidth;\n\nbool isDirect \x3d (paletteSize.x \x3c 1.);\n\nvec4 getColor(vec4 id) {\n  return isDirect ? id / 255. : texture2D(palette,\n    vec2(\n      (id.x + .5) / paletteSize.x,\n      (id.y + .5) / paletteSize.y\n    )\n  );\n}\n\nvoid main() {\n  // ignore inactive points\n  if (isActive \x3d\x3d 0.) return;\n\n  vec2 position \x3d vec2(x, y);\n  vec2 positionFract \x3d vec2(xFract, yFract);\n\n  vec4 color \x3d getColor(colorId);\n  vec4 borderColor \x3d getColor(borderColorId);\n\n  float size \x3d size * maxSize / 255.;\n  float borderSize \x3d borderSize * maxSize / 255.;\n\n  gl_PointSize \x3d (size + borderSize) * pixelRatio;\n\n  vec2 pos \x3d (position + translate) * scale\n      + (positionFract + translateFract) * scale\n      + (position + translate) * scaleFract\n      + (positionFract + translateFract) * scaleFract;\n\n  gl_Position \x3d vec4(pos * 2. - 1., 0, 1);\n\n  fragBorderRadius \x3d 1. - 2. * borderSize / (size + borderSize);\n  fragColor \x3d color;\n  fragBorderColor \x3d borderColor.a \x3d\x3d 0. || borderSize \x3d\x3d 0. ? vec4(color.rgb, 0.) : borderColor;\n  fragWidth \x3d 1. / gl_PointSize;\n}\n"]);
c&&(f.frag=f.frag.replace("smoothstep","smoothStep"),a.frag=a.frag.replace("smoothstep","smoothStep"));this.drawCircle=b(f)}var h=a("color-normalize"),e=a("array-bounds"),n=a("color-id"),b=a("point-cluster"),l=a("object-assign"),u=a("glslify"),q=a("pick-by-alias"),d=a("update-diff"),f=a("flatten-vertex-data"),c=a("is-iexplorer"),k=a("to-float32"),r=a("parse-rect");g.defaults={color:"black",borderColor:"transparent",borderSize:0,size:12,opacity:1,marker:void 0,viewport:null,range:null,pixelSize:null,
count:0,offset:0,bounds:null,positions:[],snap:1E4};g.prototype.render=function(){arguments.length&&this.update.apply(this,arguments);this.draw();return this};g.prototype.draw=function(){for(var b=this,a=arguments.length,c=Array(a),d=0;d<a;d++)c[d]=arguments[d];a=this.groups;1===c.length&&Array.isArray(c[0])&&(null===c[0][0]||Array.isArray(c[0][0]))&&(c=c[0]);this.regl._refresh();if(c.length)for(a=0;a<c.length;a++)this.drawItem(a,c[a]);else a.forEach(function(a,c){b.drawItem(c)});return this};g.prototype.drawItem=
function(b,a){var c=this.groups;b=c[b];"number"===typeof a&&(b=c[a],a=null);if(b&&b.count&&b.opacity){b.activation[0]&&this.drawCircle(this.getMarkerDrawOptions(0,b,a));c=[];for(var d=1;d<b.activation.length;d++)b.activation[d]&&(!0===b.activation[d]||b.activation[d].data.length)&&c.push.apply(c,p(this.getMarkerDrawOptions(d,b,a)));c.length&&this.drawMarker(c)}};g.prototype.getMarkerDrawOptions=function(b,a,c){var d=a.range,f=a.tree,e=a.viewport,g=a.activation,k=a.selectionBuffer,h=a.count;if(!f)return c?
[l({},a,{markerTexture:this.markerTextures[b],activation:g[b],count:c.length,elements:c,offset:0})]:[l({},a,{markerTexture:this.markerTextures[b],activation:g[b],offset:0})];var r=[];d=f.range(d,{lod:!0,px:[(d[2]-d[0])/e.width,(d[3]-d[1])/e.height]});if(c){f=g[b].data;h=new Uint8Array(h);for(e=0;e<c.length;e++){var n=c[e];h[n]=f?f[n]:1}k.subdata(h)}for(h=d.length;h--;){e=d[h];f=e;f=Array.isArray(f)?f:void 0;if(!f){f=void 0;n=[];var q=!0,u=!1,p=void 0;try{$jscomp.initSymbol();$jscomp.initSymbolIterator();
for(var v=e[Symbol.iterator]();!(q=(f=v.next()).done)&&(n.push(f.value),2!==n.length);q=!0);}catch(L){u=!0,p=L}finally{try{if(!q&&null!=v["return"])v["return"]()}finally{if(u)throw p;}}f=n}if(!f)throw new TypeError("Invalid attempt to destructure non-iterable instance");e=f[0];r.push(l({},a,{markerTexture:this.markerTextures[b],activation:c?k:g[b],offset:e,count:f[1]-e}))}return r};g.prototype.update=function(){for(var a=this,c=arguments.length,h=Array(c),n=0;n<c;n++)h[n]=arguments[n];if(h.length){1===
h.length&&Array.isArray(h[0])&&(h=h[0]);var u=this.groups,p=this.gl,v=this.regl,m=this.maxSize,t=this.maxColors,G=this.palette;this.groups=u=h.map(function(c,h){var n=u[h];if(void 0===c)return n;null===c?c={positions:null}:"function"===typeof c?c={ondraw:c}:"number"===typeof c[0]&&(c={positions:c});c=q(c,{positions:"positions data points",snap:"snap cluster lod tree",size:"sizes size radius",borderSize:"borderSizes borderSize border-size bordersize borderWidth borderWidths border-width borderwidth stroke-width strokeWidth strokewidth outline",
color:"colors color fill fill-color fillColor",borderColor:"borderColors borderColor stroke stroke-color strokeColor",marker:"markers marker shape",range:"range dataBox databox",viewport:"viewport viewPort viewBox viewbox",opacity:"opacity alpha transparency",bounds:"bound bounds boundaries limits",tooManyColors:"tooManyColors palette paletteMode optimizePalette enablePalette"});null===c.positions&&(c.positions=[]);null!=c.tooManyColors&&(a.tooManyColors=c.tooManyColors);n||(u[h]=n={id:h,scale:null,
translate:null,scaleFract:null,translateFract:null,activation:[],selectionBuffer:v.buffer({data:new Uint8Array(0),usage:"stream",type:"uint8"}),sizeBuffer:v.buffer({data:new Uint8Array(0),usage:"dynamic",type:"uint8"}),colorBuffer:v.buffer({data:new Uint8Array(0),usage:"dynamic",type:"uint8"}),positionBuffer:v.buffer({data:new Uint8Array(0),usage:"dynamic",type:"float"}),positionFractBuffer:v.buffer({data:new Uint8Array(0),usage:"dynamic",type:"float"})},c=l({},g.defaults,c));!c.positions||"marker"in
c||(c.marker=n.marker,delete n.marker);!c.marker||"positions"in c||(c.positions=n.positions,delete n.positions);var z=0,w=0;d(n,c,[{snap:!0,size:function(b,a){null==b&&(b=g.defaults.size);z+=b&&b.length?1:0;return b},borderSize:function(b,a){null==b&&(b=g.defaults.borderSize);z+=b&&b.length?1:0;return b},opacity:parseFloat,color:function(b,c){null==b&&(b=g.defaults.color);b=a.updateColor(b);w++;return b},borderColor:function(b,c){null==b&&(b=g.defaults.borderColor);b=a.updateColor(b);w++;return b},
bounds:function(b,a,c){"range"in c||(c.range=null);return b},positions:function(a,c,d){var g=c.snap,h=c.positionBuffer,l=c.positionFractBuffer,r=c.selectionBuffer;if(a.x||a.y)return c.xAttr=a.x.length?{buffer:v.buffer(a.x),offset:0,stride:4,count:a.x.length}:{buffer:a.x.buffer,offset:4*a.x.offset||0,stride:4*(a.x.stride||1),count:a.x.count},c.yAttr=a.y.length?{buffer:v.buffer(a.y),offset:0,stride:4,count:a.y.length}:{buffer:a.y.buffer,offset:4*a.y.offset||0,stride:4*(a.y.stride||1),count:a.y.count},
c.count=Math.max(c.xAttr.count,c.yAttr.count),a;a=f(a,"float64");var n=c.count=Math.floor(a.length/2),q=c.bounds=n?e(a,2):null;d.range||c.range||(delete c.range,d.range=q);d.marker||c.marker||(delete c.marker,d.marker=null);g&&(!0===g||n>g)?c.tree=b(a,{bounds:q}):g&&g.length&&(c.tree=g);c.tree&&(d={primitive:"points",usage:"static",data:c.tree,type:"uint32"},c.elements?c.elements(d):c.elements=v.elements(d));h({data:k.float(a),usage:"dynamic"});l({data:k.fract(a),usage:"dynamic"});r({data:new Uint8Array(n),
type:"uint8",usage:"stream"});return a}},{marker:function(b,c,d){d=c.activation;d.forEach(function(b){return b&&b.destroy&&b.destroy()});d.length=0;if(b&&"number"!==typeof b[0]){for(var f=[],e=0,g=Math.min(b.length,c.count);e<g;e++){var k=a.addMarker(b[e]);f[k]||(f[k]=new Uint8Array(c.count));f[k][e]=1}for(c=0;c<f.length;c++)if(f[c]){e={data:f[c],type:"uint8",usage:"static"};if(d[c])d[c](e);else d[c]=v.buffer(e);d[c].data=f[c]}}else f=a.addMarker(b),d[f]=!0;return b},range:function(b,a,c){if(c=a.bounds)return b||
(b=c),a.scale=[1/(b[2]-b[0]),1/(b[3]-b[1])],a.translate=[-b[0],-b[1]],a.scaleFract=k.fract(a.scale),a.translateFract=k.fract(a.translate),b},viewport:function(b){return r(b||[p.drawingBufferWidth,p.drawingBufferHeight])}}]);if(z){var A=n;c=A.count;h=A.size;var x=A.borderSize;A=A.sizeBuffer;var y=new Uint8Array(2*c);if(h.length||x.length)for(var B=0;B<c;B++)y[2*B]=Math.round(255*(null==h[B]?h:h[B])/m),y[2*B+1]=Math.round(255*(null==x[B]?x:x[B])/m);A({data:y,usage:"dynamic"})}if(w){A=n;c=A.count;h=
A.color;x=A.borderColor;A=A.colorBuffer;if(a.tooManyColors){if(h.length||x.length){var E=new Uint8Array(8*c);for(y=0;y<c;y++)B=h[y],E[8*y]=G[4*B],E[8*y+1]=G[4*B+1],E[8*y+2]=G[4*B+2],E[8*y+3]=G[4*B+3],B=x[y],E[8*y+4]=G[4*B],E[8*y+5]=G[4*B+1],E[8*y+6]=G[4*B+2],E[8*y+7]=G[4*B+3]}}else if(h.length||x.length)for(E=new Uint8Array(4*c+2),y=0;y<c;y++)null!=h[y]&&(E[4*y]=h[y]%t,E[4*y+1]=Math.floor(h[y]/t)),null!=x[y]&&(E[4*y+2]=x[y]%t,E[4*y+3]=Math.floor(x[y]/t));A({data:E||new Uint8Array(0),type:"uint8",
usage:"dynamic"})}return n})}};g.prototype.addMarker=function(b){var a=this.markerTextures,c=this.regl,d=this.markerCache,f=null==b?0:d.indexOf(b);if(0<=f)return f;if(b instanceof Uint8Array||b instanceof Uint8ClampedArray)var e=b;else{e=new Uint8Array(b.length);f=0;for(var g=b.length;f<g;f++)e[f]=255*b[f]}g=Math.floor(Math.sqrt(e.length));f=a.length;d.push(b);a.push(c.texture({channels:1,data:e,radius:g,mag:"linear",min:"linear"}));return f};g.prototype.updateColor=function(b){var a=this.paletteIds,
c=this.palette,d=this.maxColors;Array.isArray(b)||(b=[b]);var f=[];if("number"===typeof b[0]){var e=[];if(Array.isArray(b))for(var g=0;g<b.length;g+=4)e.push(b.slice(g,g+4));else for(g=0;g<b.length;g+=4)e.push(b.subarray(g,g+4));b=e}for(e=0;e<b.length;e++){g=b[e];g=h(g,"uint8");var k=n(g,!1);if(null==a[k]){var l=c.length;a[k]=Math.floor(l/4);c[l]=g[0];c[l+1]=g[1];c[l+2]=g[2];c[l+3]=g[3]}f[e]=a[k]}!this.tooManyColors&&c.length>4*d&&(this.tooManyColors=!0);this.updatePalette(c);return 1===f.length?
f[0]:f};g.prototype.updatePalette=function(b){if(!this.tooManyColors){var a=this.maxColors,c=this.paletteTexture,d=Math.ceil(.25*b.length/a);if(1<d){b=b.slice();for(var f=.25*b.length%a;f<d*a;f++)b.push(0,0,0,0)}c.height<d&&c.resize(a,d);c.subimage({width:Math.min(.25*b.length,a),height:d,data:b},0,0)}};g.prototype.destroy=function(){this.groups.forEach(function(b){b.sizeBuffer.destroy();b.positionBuffer.destroy();b.positionFractBuffer.destroy();b.colorBuffer.destroy();b.activation.forEach(function(b){return b&&
b.destroy&&b.destroy()});b.selectionBuffer.destroy();b.elements&&b.elements.destroy()});this.groups.length=0;this.paletteTexture.destroy();this.markerTextures.forEach(function(b){return b&&b.destroy&&b.destroy()});return this};var v=a("object-assign");t.exports=function(b,a){b=new g(b,a);a=b.render.bind(b);v(a,{render:a,update:b.update.bind(b),draw:b.draw.bind(b),destroy:b.destroy.bind(b),regl:b.regl,gl:b.gl,canvas:b.gl.canvas,groups:b.groups,markers:b.markerCache,palette:b.palette});return a}},{"array-bounds":55,
"color-id":108,"color-normalize":110,"flatten-vertex-data":223,glslify:401,"is-iexplorer":411,"object-assign":446,"parse-rect":451,"pick-by-alias":457,"point-cluster":461,"to-float32":522,"update-diff":533}],485:[function(a,t,m){function p(b,a){if(!(this instanceof p))return new p(b,a);this.traces=[];this.passes={};this.regl=b;this.scatter=e(b);this.canvas=this.scatter.canvas}function g(b,a,d){a=b[a];var c=b[d];2<a.length?(b=a[1],a=a[3]):a.length?(b=a[0],a=a[1]):(b=a.y,a=a.y+a.height);2<c.length?
(d=c[0],c=c[2]):c.length?(d=c[0],c=c[1]):(d=c.x,c=c.x+c.width);return[d,b,c,a]}function h(b){if("number"===typeof b)return[b,b,b,b];if(2===b.length)return[b[0],b[1],b[0],b[1]];b=q(b);return[b.x,b.y,b.x+b.width,b.y+b.height]}var e=a("regl-scatter2d"),n=a("pick-by-alias"),b=a("array-bounds"),l=a("raf"),u=a("array-range"),q=a("parse-rect"),d=a("flatten-vertex-data");t.exports=p;p.prototype.render=function(){for(var b=this,a=[],d=arguments.length;d--;)a[d]=arguments[d];a.length&&this.update.apply(this,
a);if(this.regl.attributes.preserveDrawingBuffer)return this.draw();this.dirty?null==this.planned&&(this.planned=l(function(){b.draw();b.dirty=!0;b.planned=null})):(this.draw(),this.dirty=!0,l(function(){b.dirty=!1}));return this};p.prototype.update=function(){for(var b,a=[],d=arguments.length;d--;)a[d]=arguments[d];if(a.length){for(d=0;d<a.length;d++)this.updateItem(d,a[d]);this.traces=this.traces.filter(Boolean);a=[];for(var e=d=0;e<this.traces.length;e++){for(var g=this.traces[e],h=this.traces[e].passes,
l=0;l<h.length;l++)a.push(this.passes[h[l]]);g.passOffset=d;d+=g.passes.length}(b=this.scatter).update.apply(b,a);return this}};p.prototype.updateItem=function(a,c){var f=this.regl;if(null===c)return this.traces[a]=null,this;if(!c)return this;c=n(c,{data:"data items columns rows values dimensions samples x",snap:"snap cluster",size:"sizes size radius",color:"colors color fill fill-color fillColor",opacity:"opacity alpha transparency opaque",borderSize:"borderSizes borderSize border-size bordersize borderWidth borderWidths border-width borderwidth stroke-width strokeWidth strokewidth outline",
borderColor:"borderColors borderColor bordercolor stroke stroke-color strokeColor",marker:"markers marker shape",range:"range ranges databox dataBox",viewport:"viewport viewBox viewbox",domain:"domain domains area areas",padding:"pad padding paddings pads margin margins",transpose:"transpose transposed",diagonal:"diagonal diag showDiagonal",upper:"upper up top upperhalf upperHalf showupperhalf showUpper showUpperHalf",lower:"lower low bottom lowerhalf lowerHalf showlowerhalf showLowerHalf showLower"});
a=this.traces[a]||(this.traces[a]={id:a,buffer:f.buffer({usage:"dynamic",type:"float",data:new Uint8Array}),color:"black",marker:null,size:12,borderColor:"transparent",borderSize:1,viewport:q([f._gl.drawingBufferWidth,f._gl.drawingBufferHeight]),padding:[0,0,0,0],opacity:1,diagonal:!0,upper:!0,lower:!0});null!=c.color&&(a.color=c.color);null!=c.size&&(a.size=c.size);null!=c.marker&&(a.marker=c.marker);null!=c.borderColor&&(a.borderColor=c.borderColor);null!=c.borderSize&&(a.borderSize=c.borderSize);
null!=c.opacity&&(a.opacity=c.opacity);c.viewport&&(a.viewport=q(c.viewport));null!=c.diagonal&&(a.diagonal=c.diagonal);null!=c.upper&&(a.upper=c.upper);null!=c.lower&&(a.lower=c.lower);if(c.data)for(a.buffer(d(c.data)),a.columns=c.data.length,a.count=c.data[0].length,a.bounds=[],f=0;f<a.columns;f++)a.bounds[f]=b(c.data[f],1);if(c.range){a.range=c.range;var e=a.range&&"number"!==typeof a.range[0]}c.domain&&(a.domain=c.domain);f=!1;null!=c.padding&&(Array.isArray(c.padding)&&c.padding.length===a.columns&&
"number"===typeof c.padding[c.padding.length-1]?(a.padding=c.padding.map(h),f=!0):a.padding=h(c.padding));var l=a.columns,u=a.count,p=a.viewport.width,m=a.viewport.height,w=a.viewport.x,x=a.viewport.y,t=p/l,B=m/l;a.passes=[];for(var C=0;C<l;C++)for(var D=0;D<l;D++)if(a.diagonal||D!==C)if(a.upper||!(C>D))if(a.lower||!(C<D)){var G=a.id;G=(null!=G.id?G.id:G)<<16|(C&255)<<8|D&255;var H=this.passes[G]||(this.passes[G]={});c.data&&(H.positions=c.transpose?{x:{buffer:a.buffer,offset:D,count:u,stride:l},
y:{buffer:a.buffer,offset:C,count:u,stride:l}}:{x:{buffer:a.buffer,offset:D*u,count:u},y:{buffer:a.buffer,offset:C*u,count:u}},H.bounds=g(a.bounds,C,D));if(c.domain||c.viewport||c.data){var E=f?g(a.padding,C,D):a.padding;if(a.domain){var K=g(a.domain,C,D);H.viewport=[w+K[0]*p+E[0],x+K[1]*m+E[1],w+K[2]*p-E[2],x+K[3]*m-E[3]]}else H.viewport=[w+D*t+t*E[0],x+C*B+B*E[1],w+(D+1)*t-t*E[2],x+(C+1)*B-B*E[3]]}c.color&&(H.color=a.color);c.size&&(H.size=a.size);c.marker&&(H.marker=a.marker);c.borderSize&&(H.borderSize=
a.borderSize);c.borderColor&&(H.borderColor=a.borderColor);c.opacity&&(H.opacity=a.opacity);c.range&&(H.range=e?g(a.range,C,D):a.range||H.bounds);a.passes.push(G)}return this};p.prototype.draw=function(){for(var b,a=[],d=arguments.length;d--;)a[d]=arguments[d];if(a.length){var e=[];for(d=0;d<a.length;d++)if("number"===typeof a[d]){var g=this.traces[a[d]],h=g.passOffset;e.push.apply(e,u(h,h+g.passes.length))}else if(a[d].length){var l=a[d];g=this.traces[d];h=g.passes;var n=g.passOffset;h=h.map(function(b,
a){e[n+a]=l})}(b=this.scatter).draw.apply(b,e)}else this.scatter.draw();return this};p.prototype.destroy=function(){this.traces.forEach(function(b){b.buffer&&b.buffer.destroy&&b.buffer.destroy()});this.passes=this.traces=null;this.scatter.destroy();return this}},{"array-bounds":55,"array-range":57,"flatten-vertex-data":223,"parse-rect":451,"pick-by-alias":457,raf:476,"regl-scatter2d":484}],486:[function(a,t,m){(function(a,g){"object"===typeof m&&"undefined"!==typeof t?t.exports=g():a.createREGL=g()})(this,
function(){function a(b,a){this.id=fa++;this.type=b;this.data=a}function g(b){if(0===b.length)return[];var a=b.charAt(0),c=b.charAt(b.length-1);if(1<b.length&&a===c&&('"'===a||"'"===a))return['"'+b.substr(1,b.length-2).replace(/\\/g,"\\\\").replace(/"/g,'\\"')+'"'];if(a=/\[(false|true|null|\d+|'[^']*'|"[^"]*")\]/.exec(b))return g(b.substr(0,a.index)).concat(g(a[1])).concat(g(b.substr(a.index+a[0].length)));a=b.split(".");if(1===a.length)return['"'+b.replace(/\\/g,"\\\\").replace(/"/g,'\\"')+'"'];
b=[];for(c=0;c<a.length;++c)b=b.concat(g(a[c]));return b}function h(b){return"["+g(b).join("][")+"]"}function e(){var b={"":0},a=[""];return{id:function(c){var d=b[c];if(d)return d;d=b[c]=a.length;a.push(c);return d},str:function(b){return a[b]}}}function n(b,a,c){function d(){var a=window.innerWidth,d=window.innerHeight;b!==document.body&&(d=b.getBoundingClientRect(),a=d.right-d.left,d=d.bottom-d.top);f.width=c*a;f.height=c*d;ha(f.style,{width:a+"px",height:d+"px"})}var f=document.createElement("canvas");
ha(f.style,{border:0,margin:0,padding:0,top:0,left:0});b.appendChild(f);b===document.body&&(f.style.position="absolute",ha(b.style,{margin:0,padding:0}));window.addEventListener("resize",d,!1);d();return{canvas:f,onDestroy:function(){window.removeEventListener("resize",d);b.removeChild(f)}}}function b(b,a){function c(c){try{return b.getContext(c,a)}catch(Ca){return null}}return c("webgl")||c("experimental-webgl")||c("webgl-experimental")}function l(b){return"string"===typeof b?b.split():b}function u(b){return"string"===
typeof b?document.querySelector(b):b}function q(a){var c=a||{},d,f,e,g;a={};var k=[],h=[],r="undefined"===typeof window?1:window.devicePixelRatio,q=!1,p=function(b){},v=function(){};"string"===typeof c?d=document.querySelector(c):"object"===typeof c&&("string"===typeof c.nodeName&&"function"===typeof c.appendChild&&"function"===typeof c.getBoundingClientRect?d=c:"function"===typeof c.drawArrays||"function"===typeof c.drawElements?(g=c,e=g.canvas):("gl"in c?g=c.gl:"canvas"in c?e=u(c.canvas):"container"in
c&&(f=u(c.container)),"attributes"in c&&(a=c.attributes),"extensions"in c&&(k=l(c.extensions)),"optionalExtensions"in c&&(h=l(c.optionalExtensions)),"onDone"in c&&(p=c.onDone),"profile"in c&&(q=!!c.profile),"pixelRatio"in c&&(r=+c.pixelRatio)));d&&("canvas"===d.nodeName.toLowerCase()?e=d:f=d);if(!g){if(!e){d=n(f||document.body,p,r);if(!d)return null;e=d.canvas;v=d.onDestroy}g=b(e,a)}return g?{gl:g,canvas:e,container:f,extensions:k,optionalExtensions:h,pixelRatio:r,profile:q,onDone:p,onDestroy:v}:
(v(),p("webgl not supported, try upgrading your browser or graphics drivers http://get.webgl.org"),null)}function d(b,a){function c(a){a=a.toLowerCase();try{var c=d[a]=b.getExtension(a)}catch(wc){}return!!c}for(var d={},f=0;f<a.extensions.length;++f){var e=a.extensions[f];if(!c(e))return a.onDestroy(),a.onDone('"'+e+'" extension is not supported by the current WebGL context, try upgrading your system or a different browser'),null}a.optionalExtensions.forEach(c);return{extensions:d,restore:function(){Object.keys(d).forEach(function(b){if(d[b]&&
!c(b))throw Error("(regl): error restoring extension "+b);})}}}function f(b,a){for(var c=Array(b),d=0;d<b;++d)c[d]=a(d);return c}function c(b){var a=(65535<b)<<4;b>>>=a;var c=(255<b)<<3;b>>>=c;a|=c;c=(15<b)<<2;b>>>=c;a|=c;c=(3<b)<<1;return a|c|b>>>c>>1}function k(){function b(b){a:{for(var a=16;268435456>=a;a*=16)if(b<=a){b=a;break a}b=0}a=d[c(b)>>2];return 0<a.length?a.pop():new ArrayBuffer(b)}function a(b){d[c(b.byteLength)>>2].push(b)}var d=f(8,function(){return[]});return{alloc:b,free:a,allocType:function(a,
c){switch(a){case 5120:a=new Int8Array(b(c),0,c);break;case 5121:a=new Uint8Array(b(c),0,c);break;case 5122:a=new Int16Array(b(2*c),0,c);break;case 5123:a=new Uint16Array(b(2*c),0,c);break;case 5124:a=new Int32Array(b(4*c),0,c);break;case 5125:a=new Uint32Array(b(4*c),0,c);break;case 5126:a=new Float32Array(b(4*c),0,c);break;default:return null}return a.length!==c?a.subarray(0,c):a},freeType:function(b){a(b.buffer)}}}function r(b){return!!b&&"object"===typeof b&&Array.isArray(b.shape)&&Array.isArray(b.stride)&&
"number"===typeof b.offset&&b.shape.length===b.stride.length&&(Array.isArray(b.data)||V(b.data))}function v(b,a,c,d,f,e){for(var g=0;g<a;++g)for(var k=b[g],h=0;h<c;++h)for(var l=k[h],r=0;r<d;++r)f[e++]=l[r]}function m(b,a,c,d,f){for(var e=1,g=c+1;g<a.length;++g)e*=a[g];var k=a[c];if(4===a.length-c){var h=a[c+1],l=a[c+2];a=a[c+3];for(g=0;g<k;++g)v(b[g],h,l,a,d,f),f+=e}else for(g=0;g<k;++g)m(b[g],a,c+1,d,f),f+=e}function A(b){return wa[Object.prototype.toString.call(b)]|0}function y(b,a){for(var c=
0;c<a.length;++c)b[c]=a[c]}function w(b,a,c,d,f,e,g){for(var k=0,h=0;h<c;++h)for(var l=0;l<d;++l)b[k++]=a[f*h+e*l+g]}function x(b,a,c,d){function f(a){this.id=h++;this.buffer=b.createBuffer();this.type=a;this.usage=35044;this.byteLength=0;this.dimension=1;this.dtype=5121;this.persistentData=null;c.profile&&(this.stats={size:0})}function e(a,c,d){a.byteLength=c.byteLength;b.bufferData(a.type,c,d)}function g(b,a,c,d,f,g){b.usage=c;if(Array.isArray(a)){if(b.dtype=d||5126,0<a.length)if(Array.isArray(a[0])){f=
va(a);for(var k=d=1;k<f.length;++k)d*=f[k];b.dimension=d;a=Ba(a,f,b.dtype);e(b,a,c);g?b.persistentData=a:qa.freeType(a)}else"number"===typeof a[0]?(b.dimension=f,f=qa.allocType(b.dtype,a.length),y(f,a),e(b,f,c),g?b.persistentData=f:qa.freeType(f)):V(a[0])&&(b.dimension=a[0].length,b.dtype=d||A(a[0])||5126,a=Ba(a,[a.length,a[0].length],b.dtype),e(b,a,c),g?b.persistentData=a:qa.freeType(a))}else if(V(a))b.dtype=d||A(a),b.dimension=f,e(b,a,c),g&&(b.persistentData=new Uint8Array(new Uint8Array(a.buffer)));
else if(r(a)){f=a.shape;var h=a.stride;k=a.offset;var l=0,n=0,q=0,u=0;1===f.length?(l=f[0],n=1,q=h[0],u=0):2===f.length&&(l=f[0],n=f[1],q=h[0],u=h[1]);b.dtype=d||A(a.data)||5126;b.dimension=n;f=qa.allocType(b.dtype,l*n);w(f,a.data,l,n,q,u,k);e(b,f,c);g?b.persistentData=f:qa.freeType(f)}}function k(c){a.bufferCount--;for(var f=0;f<d.state.length;++f){var e=d.state[f];e.buffer===c&&(b.disableVertexAttribArray(f),e.buffer=null)}b.deleteBuffer(c.buffer);c.buffer=null;delete l[c.id]}var h=0,l={};f.prototype.bind=
function(){b.bindBuffer(this.type,this.buffer)};f.prototype.destroy=function(){k(this)};var n=[];c.profile&&(a.getTotalBufferSize=function(){var b=0;Object.keys(l).forEach(function(a){b+=l[a].stats.size});return b});return{create:function(d,e,h,n){function q(a){var d=35044,f=null,e=0,k=0,h=1;Array.isArray(a)||V(a)||r(a)?f=a:"number"===typeof a?e=a|0:a&&("data"in a&&(f=a.data),"usage"in a&&(d=Ha[a.usage]),"type"in a&&(k=Aa[a.type]),"dimension"in a&&(h=a.dimension|0),"length"in a&&(e=a.length|0));u.bind();
f?g(u,f,d,k,h,n):(e&&b.bufferData(u.type,e,d),u.dtype=k||5121,u.usage=d,u.dimension=h,u.byteLength=e);c.profile&&(u.stats.size=u.byteLength*pa[u.dtype]);return q}a.bufferCount++;var u=new f(e);l[u.id]=u;h||q(d);q._reglType="buffer";q._buffer=u;q.subdata=function(a,c){c=(c||0)|0;u.bind();if(V(a))b.bufferSubData(u.type,c,a);else if(Array.isArray(a)){if(0<a.length)if("number"===typeof a[0]){var d=qa.allocType(u.dtype,a.length);y(d,a);b.bufferSubData(u.type,c,d);qa.freeType(d)}else if(Array.isArray(a[0])||
V(a[0])){var f=va(a);d=Ba(a,f,u.dtype);b.bufferSubData(u.type,c,d);qa.freeType(d)}}else if(r(a)){f=a.shape;var e=a.stride,g=d=0,k=0,h=0;1===f.length?(d=f[0],g=1,k=e[0],h=0):2===f.length&&(d=f[0],g=f[1],k=e[0],h=e[1]);f=Array.isArray(a.data)?u.dtype:A(a.data);f=qa.allocType(f,d*g);w(f,a.data,d,g,k,h,a.offset);b.bufferSubData(u.type,c,f);qa.freeType(f)}return q};c.profile&&(q.stats=u.stats);q.destroy=function(){k(u)};return q},createStream:function(b,a){var c=n.pop();c||(c=new f(b));c.bind();g(c,a,
35040,0,1,!1);return c},destroyStream:function(b){n.push(b)},clear:function(){ia(l).forEach(k);n.forEach(k)},getBuffer:function(b){return b&&b._buffer instanceof f?b._buffer:null},restore:function(){ia(l).forEach(function(a){a.buffer=b.createBuffer();b.bindBuffer(a.type,a.buffer);b.bufferData(a.type,a.persistentData||a.byteLength,a.usage)})},_initBuffer:g}}function t(b,a,c,d){function f(b){this.id=h++;k[this.id]=this;this.buffer=b;this.primType=4;this.type=this.vertCount=0}function e(d,f,e,g,k,h,
l){d.buffer.bind();if(f){var n=l;l||V(f)&&(!r(f)||V(f.data))||(n=a.oes_element_index_uint?5125:5123);c._initBuffer(d.buffer,f,e,n,3)}else b.bufferData(34963,h,e),d.buffer.dtype=n||5121,d.buffer.usage=e,d.buffer.dimension=3,d.buffer.byteLength=h;n=l;if(!l){switch(d.buffer.dtype){case 5121:case 5120:n=5121;break;case 5123:case 5122:n=5123;break;case 5125:case 5124:n=5125}d.buffer.dtype=n}d.type=n;f=k;0>f&&(f=d.buffer.byteLength,5123===n?f>>=1:5125===n&&(f>>=2));d.vertCount=f;f=g;0>g&&(f=4,g=d.buffer.dimension,
1===g&&(f=0),2===g&&(f=1),3===g&&(f=4));d.primType=f}function g(b){d.elementsCount--;delete k[b.id];b.buffer.destroy();b.buffer=null}var k={},h=0,l={uint8:5121,uint16:5123};a.oes_element_index_uint&&(l.uint32=5125);f.prototype.bind=function(){this.buffer.bind()};var n=[];return{create:function(b,a){function k(b){if(b)if("number"===typeof b)h(b),n.primType=4,n.vertCount=b|0,n.type=5121;else{var a=null,c=35044,d=-1,f=-1,g=0,q=0;if(Array.isArray(b)||V(b)||r(b))a=b;else if("data"in b&&(a=b.data),"usage"in
b&&(c=Ha[b.usage]),"primitive"in b&&(d=ya[b.primitive]),"count"in b&&(f=b.count|0),"type"in b&&(q=l[b.type]),"length"in b)g=b.length|0;else if(g=f,5123===q||5122===q)g*=2;else if(5125===q||5124===q)g*=4;e(n,a,c,d,f,g,q)}else h(),n.primType=4,n.vertCount=0,n.type=5121;return k}var h=c.create(null,34963,!0),n=new f(h._buffer);d.elementsCount++;k(b);k._reglType="elements";k._elements=n;k.subdata=function(b,a){h.subdata(b,a);return k};k.destroy=function(){g(n)};return k},createStream:function(b){var a=
n.pop();a||(a=new f(c.create(null,34963,!0,!1)._buffer));e(a,b,35040,-1,-1,0,0);return a},destroyStream:function(b){n.push(b)},getElements:function(b){return"function"===typeof b&&b._elements instanceof f?b._elements:null},clear:function(){ia(k).forEach(g)}}}function B(b){for(var a=qa.allocType(5123,b.length),c=0;c<b.length;++c)if(isNaN(b[c]))a[c]=65535;else if(Infinity===b[c])a[c]=31744;else if(-Infinity===b[c])a[c]=64512;else{ka[0]=b[c];var d=xa[0],f=d>>>31<<15,e=(d<<1>>>24)-127;d=d>>13&1023;a[c]=
-24>e?f:-14>e?f+(d+1024>>-14-e):15<e?f+31744:f+(e+15<<10)+d}return a}function C(b){return Array.isArray(b)||V(b)}function D(b){return"[object "+b+"]"}function G(b){return Array.isArray(b)&&(0===b.length||"number"===typeof b[0])}function H(b){return Array.isArray(b)&&0!==b.length&&C(b[0])?!0:!1}function E(b){return Object.prototype.toString.call(b)}function K(b){if(!b)return!1;var a=E(b);return 0<=dc.indexOf(a)?!0:G(b)||H(b)||r(b)}function I(b,a){36193===b.type?(b.data=B(a),qa.freeType(a)):b.data=
a}function J(b,a,c,d,f,e){b="undefined"!==typeof Oa[b]?Oa[b]:Ea[b]*pb[a];e&&(b*=6);if(f){for(d=0;1<=c;)d+=b*c*c,c/=2;return d}return b*c*d}function L(b,a,c,d,f,e,g){function k(){this.format=this.internalformat=6408;this.type=5121;this.flipY=this.premultiplyAlpha=this.compressed=!1;this.unpackAlignment=1;this.colorSpace=37444;this.channels=this.height=this.width=0}function h(b,a){b.internalformat=a.internalformat;b.format=a.format;b.type=a.type;b.compressed=a.compressed;b.premultiplyAlpha=a.premultiplyAlpha;
b.flipY=a.flipY;b.unpackAlignment=a.unpackAlignment;b.colorSpace=a.colorSpace;b.width=a.width;b.height=a.height;b.channels=a.channels}function l(b,a){if("object"===typeof a&&a){"premultiplyAlpha"in a&&(b.premultiplyAlpha=a.premultiplyAlpha);"flipY"in a&&(b.flipY=a.flipY);"alignment"in a&&(b.unpackAlignment=a.alignment);"colorSpace"in a&&(b.colorSpace=ca[a.colorSpace]);"type"in a&&(b.type=da[a.type]);var c=b.width,d=b.height,f=b.channels,e=!1;"shape"in a?(c=a.shape[0],d=a.shape[1],3===a.shape.length&&
(f=a.shape[2],e=!0)):("radius"in a&&(c=d=a.radius),"width"in a&&(c=a.width),"height"in a&&(d=a.height),"channels"in a&&(f=a.channels,e=!0));b.width=c|0;b.height=d|0;b.channels=f|0;c=!1;"format"in a&&(c=a.format,d=b.internalformat=Y[c],b.format=Ha[d],c in da&&!("type"in a)&&(b.type=da[c]),c in X&&(b.compressed=!0),c=!0);!e&&c?b.channels=Ea[b.format]:e&&!c&&b.channels!==aa[b.format]&&(b.format=b.internalformat=aa[b.channels])}}function n(a){b.pixelStorei(37440,a.flipY);b.pixelStorei(37441,a.premultiplyAlpha);
b.pixelStorei(37443,a.colorSpace);b.pixelStorei(3317,a.unpackAlignment)}function q(){k.call(this);this.yOffset=this.xOffset=0;this.data=null;this.needsFree=!1;this.element=null;this.needsCopy=!1}function u(b,a){var c=null;K(a)?c=a:a&&(l(b,a),"x"in a&&(b.xOffset=a.x|0),"y"in a&&(b.yOffset=a.y|0),K(a.data)&&(c=a.data));if(a.copy){a=f.viewportWidth;var d=f.viewportHeight;b.width=b.width||a-b.xOffset;b.height=b.height||d-b.yOffset;b.needsCopy=!0}else if(!c)b.width=b.width||1,b.height=b.height||1,b.channels=
b.channels||4;else if(V(c))b.channels=b.channels||4,b.data=c,"type"in a||5121!==b.type||(b.type=wa[Object.prototype.toString.call(c)]|0);else if(G(c)){b.channels=b.channels||4;a=c;d=a.length;switch(b.type){case 5121:case 5123:case 5125:case 5126:d=qa.allocType(b.type,d);d.set(a);b.data=d;break;case 36193:b.data=B(a)}b.alignment=1;b.needsFree=!0}else if(r(c)){a=c.data;Array.isArray(a)||5121!==b.type||(b.type=wa[Object.prototype.toString.call(a)]|0);d=c.shape;var e=c.stride,g,k;3===d.length?(g=d[2],
k=e[2]):k=g=1;var h=d[0];var n=d[1];d=e[0];e=e[1];b.alignment=1;b.width=h;b.height=n;b.channels=g;b.format=b.internalformat=aa[g];b.needsFree=!0;h=k;c=c.offset;g=b.width;k=b.height;n=b.channels;for(var q=qa.allocType(36193===b.type?5126:b.type,g*k*n),u=0,p=0;p<k;++p)for(var v=0;v<g;++v)for(var m=0;m<n;++m)q[u++]=a[d*v+e*p+h*m+c];I(b,q)}else if(E(c)===Ja||E(c)===Na)E(c)===Ja?b.element=c:b.element=c.canvas,b.width=b.element.width,b.height=b.element.height,b.channels=4;else if(E(c)===Ra)b.element=c,
b.width=c.width,b.height=c.height,b.channels=4;else if(E(c)===rb)b.element=c,b.width=c.naturalWidth,b.height=c.naturalHeight,b.channels=4;else if(E(c)===Eb)b.element=c,b.width=c.videoWidth,b.height=c.videoHeight,b.channels=4;else if(H(c)){a=b.width||c[0].length;d=b.height||c.length;e=b.channels;e=C(c[0][0])?e||c[0][0].length:e||1;h=Ka.shape(c);g=1;for(k=0;k<h.length;++k)g*=h[k];g=qa.allocType(36193===b.type?5126:b.type,g);Ka.flatten(c,h,"",g);I(b,g);b.alignment=1;b.width=a;b.height=d;b.channels=e;
b.format=b.internalformat=aa[e];b.needsFree=!0}}function p(a,c,f,e,g){var k=a.element,h=a.data,l=a.internalformat,r=a.format,q=a.type,u=a.width,p=a.height;n(a);k?b.texSubImage2D(c,g,f,e,r,q,k):a.compressed?b.compressedTexSubImage2D(c,g,f,e,l,u,p,h):a.needsCopy?(d(),b.copyTexSubImage2D(c,g,f,e,a.xOffset,a.yOffset,u,p)):b.texSubImage2D(c,g,f,e,u,p,r,q,h)}function v(){return pa.pop()||new q}function m(b){b.needsFree&&qa.freeType(b.data);q.call(b);pa.push(b)}function z(){k.call(this);this.genMipmaps=
!1;this.mipmapHint=4352;this.mipmask=0;this.images=Array(16)}function w(b,a,c){var d=b.images[0]=v();b.mipmask=1;d.width=b.width=a;d.height=b.height=c;d.channels=b.channels=4}function A(b,a){if(K(a)){var c=b.images[0]=v();h(c,b);u(c,a);b.mipmask=1}else if(l(b,a),Array.isArray(a.mipmap)){a=a.mipmap;for(var d=0;d<a.length;++d)c=b.images[d]=v(),h(c,b),c.width>>=d,c.height>>=d,u(c,a[d]),b.mipmask|=1<<d}else c=b.images[0]=v(),h(c,b),u(c,a),b.mipmask=1;h(b,b.images[0])}function x(a,c){a=a.images;for(var f=
0;f<a.length&&a[f];++f){var e=a[f],g=c,k=f,h=e.element,l=e.data,r=e.internalformat,q=e.format,u=e.type,p=e.width,v=e.height,m=e.channels;n(e);h?b.texImage2D(g,k,q,q,u,h):e.compressed?b.compressedTexImage2D(g,k,r,p,v,0,l):e.needsCopy?(d(),b.copyTexImage2D(g,k,q,e.xOffset,e.yOffset,p,v,0)):((e=!l)&&(l=qa.zero.allocType(u,p*v*m)),b.texImage2D(g,k,q,p,v,0,q,u,l),e&&l&&qa.zero.freeType(l))}}function y(){var b=fa.pop()||new z;k.call(b);for(var a=b.mipmask=0;16>a;++a)b.images[a]=null;return b}function t(b){for(var a=
b.images,c=0;c<a.length;++c)a[c]&&m(a[c]),a[c]=null;fa.push(b)}function D(){this.magFilter=this.minFilter=9728;this.wrapT=this.wrapS=33071;this.anisotropic=1;this.genMipmaps=!1;this.mipmapHint=4352}function F(b,a){"min"in a&&(b.minFilter=ba[a.min],0<=Ia.indexOf(b.minFilter)&&!("faces"in a)&&(b.genMipmaps=!0));"mag"in a&&(b.magFilter=S[a.mag]);var c=b.wrapS,d=b.wrapT;if("wrap"in a){var f=a.wrap;"string"===typeof f?c=d=P[f]:Array.isArray(f)&&(c=P[f[0]],d=P[f[1]])}else"wrapS"in a&&(c=P[a.wrapS]),"wrapT"in
a&&(d=P[a.wrapT]);b.wrapS=c;b.wrapT=d;"anisotropic"in a&&(b.anisotropic=a.anisotropic);if("mipmap"in a){c=!1;switch(typeof a.mipmap){case "string":b.mipmapHint=T[a.mipmap];c=b.genMipmaps=!0;break;case "boolean":c=b.genMipmaps=a.mipmap;break;case "object":b.genMipmaps=!1,c=!0}!c||"min"in a||(b.minFilter=9984)}}function L(c,d){b.texParameteri(d,10241,c.minFilter);b.texParameteri(d,10240,c.magFilter);b.texParameteri(d,10242,c.wrapS);b.texParameteri(d,10243,c.wrapT);a.ext_texture_filter_anisotropic&&
b.texParameteri(d,34046,c.anisotropic);c.genMipmaps&&(b.hint(33170,c.mipmapHint),b.generateMipmap(d))}function M(a){k.call(this);this.mipmask=0;this.internalformat=6408;this.id=Ba++;this.refCount=1;this.target=a;this.texture=b.createTexture();this.unit=-1;this.bindCount=0;this.texInfo=new D;g.profile&&(this.stats={size:0})}function O(a){b.activeTexture(33984);b.bindTexture(a.target,a.texture)}function N(){var a=Z[0];a?b.bindTexture(a.target,a.texture):b.bindTexture(3553,null)}function R(a){var c=
a.texture,d=a.unit,f=a.target;0<=d&&(b.activeTexture(33984+d),b.bindTexture(f,null),Z[d]=null);b.deleteTexture(c);a.texture=null;a.params=null;a.pixels=null;a.refCount=0;delete va[a.id];e.textureCount--}var T={"don't care":4352,"dont care":4352,nice:4354,fast:4353},P={repeat:10497,clamp:33071,mirror:33648},S={nearest:9728,linear:9729},ba=ha({mipmap:9987,"nearest mipmap nearest":9984,"linear mipmap nearest":9985,"nearest mipmap linear":9986,"linear mipmap linear":9987},S),ca={none:0,browser:37444},
da={uint8:5121,rgba4:32819,rgb565:33635,"rgb5 a1":32820},Y={alpha:6406,luminance:6409,"luminance alpha":6410,rgb:6407,rgba:6408,rgba4:32854,"rgb5 a1":32855,rgb565:36194},X={};a.ext_srgb&&(Y.srgb=35904,Y.srgba=35906);a.oes_texture_float&&(da.float32=da["float"]=5126);a.oes_texture_half_float&&(da.float16=da["half float"]=36193);a.webgl_depth_texture&&(ha(Y,{depth:6402,"depth stencil":34041}),ha(da,{uint16:5123,uint32:5125,"depth stencil":34042}));a.webgl_compressed_texture_s3tc&&ha(X,{"rgb s3tc dxt1":33776,
"rgba s3tc dxt1":33777,"rgba s3tc dxt3":33778,"rgba s3tc dxt5":33779});a.webgl_compressed_texture_atc&&ha(X,{"rgb atc":35986,"rgba atc explicit alpha":35987,"rgba atc interpolated alpha":34798});a.webgl_compressed_texture_pvrtc&&ha(X,{"rgb pvrtc 4bppv1":35840,"rgb pvrtc 2bppv1":35841,"rgba pvrtc 4bppv1":35842,"rgba pvrtc 2bppv1":35843});a.webgl_compressed_texture_etc1&&(X["rgb etc1"]=36196);var ea=Array.prototype.slice.call(b.getParameter(34467));Object.keys(X).forEach(function(b){var a=X[b];0<=ea.indexOf(a)&&
(Y[b]=a)});var U=Object.keys(Y);c.textureFormats=U;var W=[];Object.keys(Y).forEach(function(b){W[Y[b]]=b});var ka=[];Object.keys(da).forEach(function(b){ka[da[b]]=b});var na=[];Object.keys(S).forEach(function(b){na[S[b]]=b});var Aa=[];Object.keys(ba).forEach(function(b){Aa[ba[b]]=b});var xa=[];Object.keys(P).forEach(function(b){xa[P[b]]=b});var Ha=U.reduce(function(b,a){var c=Y[a];6409===c||6406===c||6409===c||6410===c||6402===c||34041===c?b[c]=c:32855===c||0<=a.indexOf("rgba")?b[c]=6408:b[c]=6407;
return b},{}),pa=[],fa=[],Ba=0,va={},ya=c.maxTextureUnits,Z=Array(ya).map(function(){return null});ha(M.prototype,{bind:function(){this.bindCount+=1;var a=this.unit;if(0>a){for(var c=0;c<ya;++c){var d=Z[c];if(d){if(0<d.bindCount)continue;d.unit=-1}Z[c]=this;a=c;break}g.profile&&e.maxTextureUnits<a+1&&(e.maxTextureUnits=a+1);this.unit=a;b.activeTexture(33984+a);b.bindTexture(this.target,this.texture)}return a},unbind:function(){--this.bindCount},decRef:function(){0>=--this.refCount&&R(this)}});g.profile&&
(e.getTotalTextureSize=function(){var b=0;Object.keys(va).forEach(function(a){b+=va[a].stats.size});return b});return{create2D:function(a,c){function d(b,a){var c=f.texInfo;D.call(c);var e=y();"number"===typeof b?"number"===typeof a?w(e,b|0,a|0):w(e,b|0,b|0):b?(F(c,b),A(e,b)):w(e,1,1);c.genMipmaps&&(e.mipmask=(e.width<<1)-1);f.mipmask=e.mipmask;h(f,e);f.internalformat=e.internalformat;d.width=e.width;d.height=e.height;O(f);x(e,3553);L(c,3553);N();t(e);g.profile&&(f.stats.size=J(f.internalformat,f.type,
e.width,e.height,c.genMipmaps,!1));d.format=W[f.internalformat];d.type=ka[f.type];d.mag=na[c.magFilter];d.min=Aa[c.minFilter];d.wrapS=xa[c.wrapS];d.wrapT=xa[c.wrapT];return d}var f=new M(3553);va[f.id]=f;e.textureCount++;d(a,c);d.subimage=function(b,a,c,e){a|=0;c|=0;e|=0;var g=v();h(g,f);g.width=0;g.height=0;u(g,b);g.width=g.width||(f.width>>e)-a;g.height=g.height||(f.height>>e)-c;O(f);p(g,3553,a,c,e);N();m(g);return d};d.resize=function(a,c){a|=0;c=c|0||a;if(a===f.width&&c===f.height)return d;d.width=
f.width=a;d.height=f.height=c;O(f);for(var e,k=f.channels,h=f.type,l=0;f.mipmask>>l;++l){var r=a>>l,n=c>>l;if(!r||!n)break;e=qa.zero.allocType(h,r*n*k);b.texImage2D(3553,l,f.format,r,n,0,f.format,f.type,e);e&&qa.zero.freeType(e)}N();g.profile&&(f.stats.size=J(f.internalformat,f.type,a,c,!1,!1));return d};d._reglType="texture2d";d._texture=f;g.profile&&(d.stats=f.stats);d.destroy=function(){f.decRef()};return d},createCube:function(a,c,d,f,k,r){function n(b,a,c,d,f,e){var k,r=q.texInfo;D.call(r);for(k=
0;6>k;++k)z[k]=y();if("number"===typeof b||!b)for(b=b|0||1,k=0;6>k;++k)w(z[k],b,b);else if("object"===typeof b)if(a)A(z[0],b),A(z[1],a),A(z[2],c),A(z[3],d),A(z[4],f),A(z[5],e);else if(F(r,b),l(q,b),"faces"in b)for(b=b.faces,k=0;6>k;++k)h(z[k],q),A(z[k],b[k]);else for(k=0;6>k;++k)A(z[k],b);h(q,z[0]);q.mipmask=r.genMipmaps?(z[0].width<<1)-1:z[0].mipmask;q.internalformat=z[0].internalformat;n.width=z[0].width;n.height=z[0].height;O(q);for(k=0;6>k;++k)x(z[k],34069+k);L(r,34067);N();g.profile&&(q.stats.size=
J(q.internalformat,q.type,n.width,n.height,r.genMipmaps,!0));n.format=W[q.internalformat];n.type=ka[q.type];n.mag=na[r.magFilter];n.min=Aa[r.minFilter];n.wrapS=xa[r.wrapS];n.wrapT=xa[r.wrapT];for(k=0;6>k;++k)t(z[k]);return n}var q=new M(34067);va[q.id]=q;e.cubeCount++;var z=Array(6);n(a,c,d,f,k,r);n.subimage=function(b,a,c,d,f){c|=0;d|=0;f|=0;var e=v();h(e,q);e.width=0;e.height=0;u(e,a);e.width=e.width||(q.width>>f)-c;e.height=e.height||(q.height>>f)-d;O(q);p(e,34069+b,c,d,f);N();m(e);return n};n.resize=
function(a){a|=0;if(a!==q.width){n.width=q.width=a;n.height=q.height=a;O(q);for(var c=0;6>c;++c)for(var d=0;q.mipmask>>d;++d)b.texImage2D(34069+c,d,q.format,a>>d,a>>d,0,q.format,q.type,null);N();g.profile&&(q.stats.size=J(q.internalformat,q.type,n.width,n.height,!1,!0));return n}};n._reglType="textureCube";n._texture=q;g.profile&&(n.stats=q.stats);n.destroy=function(){q.decRef()};return n},clear:function(){for(var a=0;a<ya;++a)b.activeTexture(33984+a),b.bindTexture(3553,null),Z[a]=null;ia(va).forEach(R);
e.cubeCount=0;e.textureCount=0},getTexture:function(b){return null},restore:function(){for(var a=0;a<ya;++a){var c=Z[a];c&&(c.bindCount=0,c.unit=-1,Z[a]=null)}ia(va).forEach(function(a){a.texture=b.createTexture();b.bindTexture(a.target,a.texture);for(var c=0;32>c;++c)if(0!==(a.mipmask&1<<c))if(3553===a.target)b.texImage2D(3553,c,a.internalformat,a.width>>c,a.height>>c,0,a.internalformat,a.type,null);else for(var d=0;6>d;++d)b.texImage2D(34069+d,c,a.internalformat,a.width>>c,a.height>>c,0,a.internalformat,
a.type,null);L(a.texInfo,a.target)})}}}function M(b,a,c,d,f,e){function g(b,a,c){this.target=b;this.texture=a;this.renderbuffer=c;var d=b=0;a?(b=a.width,d=a.height):c&&(b=c.width,d=c.height);this.width=b;this.height=d}function k(b){b&&(b.texture&&b.texture._texture.decRef(),b.renderbuffer&&b.renderbuffer._renderbuffer.decRef())}function h(b,a,c){b&&(b.texture?b.texture._texture.refCount+=1:b.renderbuffer._renderbuffer.refCount+=1)}function l(a,c){c&&(c.texture?b.framebufferTexture2D(36160,a,c.target,
c.texture._texture.texture,0):b.framebufferRenderbuffer(36160,a,36161,c.renderbuffer._renderbuffer.renderbuffer))}function r(b){var a=3553,c=null,d=null,f=b;"object"===typeof b&&(f=b.data,"target"in b&&(a=b.target|0));b=f._reglType;"texture2d"===b?c=f:"textureCube"===b?c=f:"renderbuffer"===b&&(d=f,a=36161);return new g(a,c,d)}function n(b,a,c,e,k){if(c)return b=d.create2D({width:b,height:a,format:e,type:k}),b._texture.refCount=0,new g(3553,b,null);b=f.create({width:b,height:a,format:e});b._renderbuffer.refCount=
0;return new g(36161,null,b)}function q(b){return b&&(b.texture||b.renderbuffer)}function u(b,a,c){b&&(b.texture?b.texture.resize(a,c):b.renderbuffer&&b.renderbuffer.resize(a,c),b.width=a,b.height=c)}function p(){this.id=J++;B[this.id]=this;this.framebuffer=b.createFramebuffer();this.height=this.width=0;this.colorAttachments=[];this.depthStencilAttachment=this.stencilAttachment=this.depthAttachment=null}function v(b){b.colorAttachments.forEach(k);k(b.depthAttachment);k(b.stencilAttachment);k(b.depthStencilAttachment)}
function m(a){b.deleteFramebuffer(a.framebuffer);a.framebuffer=null;e.framebufferCount--;delete B[a.id]}function z(a){var d;b.bindFramebuffer(36160,a.framebuffer);var f=a.colorAttachments;for(d=0;d<f.length;++d)l(36064+d,f[d]);for(d=f.length;d<c.maxColorAttachments;++d)b.framebufferTexture2D(36160,36064+d,3553,null,0);b.framebufferTexture2D(36160,33306,3553,null,0);b.framebufferTexture2D(36160,36096,3553,null,0);b.framebufferTexture2D(36160,36128,3553,null,0);l(36096,a.depthAttachment);l(36128,a.stencilAttachment);
l(33306,a.depthStencilAttachment);b.checkFramebufferStatus(36160);b.isContextLost();b.bindFramebuffer(36160,A.next?A.next.framebuffer:null);A.cur=A.next;b.getError()}function w(b,a){function c(b,a){var f=0,e=0,g=!0,k=!0;var l=null;var u=!0,p="rgba",m="uint8",w=1,A=null,t=null,J=null,B=!1;if("number"===typeof b)f=b|0,e=a|0||f;else if(b){"shape"in b?(e=b.shape,f=e[0],e=e[1]):("radius"in b&&(f=e=b.radius),"width"in b&&(f=b.width),"height"in b&&(e=b.height));if("color"in b||"colors"in b)l=b.color||b.colors,
Array.isArray(l);if(!l){"colorCount"in b&&(w=b.colorCount|0);"colorTexture"in b&&(u=!!b.colorTexture,p="rgba4");if("colorType"in b&&(m=b.colorType,!u))if("half float"===m||"float16"===m)p="rgba16f";else if("float"===m||"float32"===m)p="rgba32f";"colorFormat"in b&&(p=b.colorFormat,0<=x.indexOf(p)?u=!0:0<=y.indexOf(p)&&(u=!1))}if("depthTexture"in b||"depthStencilTexture"in b)B=!(!b.depthTexture&&!b.depthStencilTexture);"depth"in b&&("boolean"===typeof b.depth?g=b.depth:(A=b.depth,k=!1));"stencil"in
b&&("boolean"===typeof b.stencil?k=b.stencil:(t=b.stencil,g=!1));"depthStencil"in b&&("boolean"===typeof b.depthStencil?g=k=b.depthStencil:(J=b.depthStencil,k=g=!1))}else f=e=1;var E=a=null,I=null;if(Array.isArray(l))b=l.map(r);else if(l)b=[r(l)];else for(b=Array(w),l=0;l<w;++l)b[l]=n(f,e,u,p,m);f=f||b[0].width;e=e||b[0].height;A?a=r(A):g&&!k&&(a=n(f,e,B,"depth","uint32"));t?E=r(t):k&&!g&&(E=n(f,e,!1,"stencil","uint8"));J?I=r(J):!A&&!t&&k&&g&&(I=n(f,e,B,"depth stencil","depth stencil"));g=null;for(l=
0;l<b.length;++l)h(b[l],f,e),b[l]&&b[l].texture&&(k=ja[b[l].texture._texture.format]*la[b[l].texture._texture.type],null===g&&(g=k));h(a,f,e);h(E,f,e);h(I,f,e);v(d);d.width=f;d.height=e;d.colorAttachments=b;d.depthAttachment=a;d.stencilAttachment=E;d.depthStencilAttachment=I;c.color=b.map(q);c.depth=q(a);c.stencil=q(E);c.depthStencil=q(I);c.width=d.width;c.height=d.height;z(d);return c}var d=new p;e.framebufferCount++;c(b,a);return ha(c,{resize:function(b,a){b=Math.max(b|0,1);a=Math.max(a|0||b,1);
if(b===d.width&&a===d.height)return c;for(var f=d.colorAttachments,e=0;e<f.length;++e)u(f[e],b,a);u(d.depthAttachment,b,a);u(d.stencilAttachment,b,a);u(d.depthStencilAttachment,b,a);d.width=c.width=b;d.height=c.height=a;z(d);return c},_reglType:"framebuffer",_framebuffer:d,destroy:function(){m(d);v(d)},use:function(b){A.setFBO({framebuffer:c},b)}})}var A={cur:null,next:null,dirty:!1,setFBO:null},x=["rgba"],y=["rgba4","rgb565","rgb5 a1"];a.ext_srgb&&y.push("srgba");a.ext_color_buffer_half_float&&y.push("rgba16f",
"rgb16f");a.webgl_color_buffer_float&&y.push("rgba32f");var t=["uint8"];a.oes_texture_half_float&&t.push("half float","float16");a.oes_texture_float&&t.push("float","float32");var J=0,B={};return ha(A,{getFramebuffer:function(b){return"function"===typeof b&&"framebuffer"===b._reglType&&(b=b._framebuffer,b instanceof p)?b:null},create:w,createCube:function(b){function a(b){var f={color:null},e=0,g=null;var k="rgba";var h="uint8",l=1;if("number"===typeof b)e=b|0;else if(b){"shape"in b?e=b.shape[0]:
("radius"in b&&(e=b.radius|0),"width"in b?e=b.width|0:"height"in b&&(e=b.height|0));if("color"in b||"colors"in b)g=b.color||b.colors,Array.isArray(g);g||("colorCount"in b&&(l=b.colorCount|0),"colorType"in b&&(h=b.colorType),"colorFormat"in b&&(k=b.colorFormat));"depth"in b&&(f.depth=b.depth);"stencil"in b&&(f.stencil=b.stencil);"depthStencil"in b&&(f.depthStencil=b.depthStencil)}else e=1;if(g)if(Array.isArray(g))for(b=[],k=0;k<g.length;++k)b[k]=g[k];else b=[g];else for(b=Array(l),g={radius:e,format:k,
type:h},k=0;k<l;++k)b[k]=d.createCube(g);f.color=Array(b.length);for(k=0;k<b.length;++k)l=b[k],e=e||l.width,f.color[k]={target:34069,data:b[k]};for(k=0;6>k;++k){for(l=0;l<b.length;++l)f.color[l].target=34069+k;0<k&&(f.depth=c[0].depth,f.stencil=c[0].stencil,f.depthStencil=c[0].depthStencil);if(c[k])c[k](f);else c[k]=w(f)}return ha(a,{width:e,height:e,color:b})}var c=Array(6);a(b);return ha(a,{faces:c,resize:function(b){var d=b|0;if(d===a.width)return a;var f=a.color;for(b=0;b<f.length;++b)f[b].resize(d);
for(b=0;6>b;++b)c[b].resize(d);a.width=a.height=d;return a},_reglType:"framebufferCube",destroy:function(){c.forEach(function(b){b.destroy()})}})},clear:function(){ia(B).forEach(m)},restore:function(){A.cur=null;A.next=null;A.dirty=!0;ia(B).forEach(function(a){a.framebuffer=b.createFramebuffer();z(a)})}})}function N(){this.w=this.z=this.y=this.x=this.state=0;this.buffer=null;this.size=0;this.normalized=!1;this.type=5126;this.divisor=this.stride=this.offset=0}function O(b,a,c,d){b=c.maxAttributes;
a=Array(b);for(c=0;c<b;++c)a[c]=new N;return{Record:N,scope:{},state:a}}function R(b,a,c,d){function f(b,a,c,d){this.name=b;this.id=a;this.location=c;this.info=d}function e(b,a){for(var c=0;c<b.length;++c)if(b[c].id===a.id){b[c].location=a.location;return}b.push(a)}function g(c,d,f){f=35632===c?l:r;var e=f[d];if(!e){var g=a.str(d);e=b.createShader(c);b.shaderSource(e,g);b.compileShader(e);f[d]=e}return e}function k(b,a){this.id=u++;this.fragId=b;this.vertId=a;this.program=null;this.uniforms=[];this.attributes=
[];d.profile&&(this.stats={uniformsCount:0,attributesCount:0})}function h(c,k){k=g(35632,c.fragId);var h=g(35633,c.vertId);var l=c.program=b.createProgram();b.attachShader(l,k);b.attachShader(l,h);b.linkProgram(l);var r=b.getProgramParameter(l,35718);d.profile&&(c.stats.uniformsCount=r);var n=c.uniforms;for(k=0;k<r;++k)if(h=b.getActiveUniform(l,k))if(1<h.size)for(var q=0;q<h.size;++q){var u=h.name.replace("[0]","["+q+"]");e(n,new f(u,a.id(u),b.getUniformLocation(l,u),h))}else e(n,new f(h.name,a.id(h.name),
b.getUniformLocation(l,h.name),h));r=b.getProgramParameter(l,35721);d.profile&&(c.stats.attributesCount=r);n=c.attributes;for(k=0;k<r;++k)(h=b.getActiveAttrib(l,k))&&e(n,new f(h.name,a.id(h.name),b.getAttribLocation(l,h.name),h))}var l={},r={},n={},q=[],u=0;d.profile&&(c.getMaxUniformsCount=function(){var b=0;q.forEach(function(a){a.stats.uniformsCount>b&&(b=a.stats.uniformsCount)});return b},c.getMaxAttributesCount=function(){var b=0;q.forEach(function(a){a.stats.attributesCount>b&&(b=a.stats.attributesCount)});
return b});return{clear:function(){var a=b.deleteShader.bind(b);ia(l).forEach(a);l={};ia(r).forEach(a);r={};q.forEach(function(a){b.deleteProgram(a.program)});q.length=0;n={};c.shaderCount=0},program:function(b,a,d){var f=n[a];f||(f=n[a]={});var e=f[b];e||(e=new k(a,b),c.shaderCount++,h(e,d),f[b]=e,q.push(e));return e},restore:function(){l={};r={};for(var b=0;b<q.length;++b)h(q[b])},shader:g,frag:-1,vert:-1}}function T(b,a,c,d,f,e,g){function k(f){var e=null===a.next?5121:a.next.colorAttachments[0].texture._texture.type;
var g=0,k=0,h=d.framebufferWidth,l=d.framebufferHeight,r=null;V(f)?r=f:f&&(g=f.x|0,k=f.y|0,h=(f.width||d.framebufferWidth-g)|0,l=(f.height||d.framebufferHeight-k)|0,r=f.data||null);c();f=h*l*4;r||(5121===e?r=new Uint8Array(f):5126===e&&(r=r||new Float32Array(f)));b.pixelStorei(3333,4);b.readPixels(g,k,h,l,6408,e,r);return r}function h(b){var c;a.setFBO({framebuffer:b.framebuffer},function(){c=k(b)});return c}return function(b){return b&&"framebuffer"in b?h(b):k(b)}}function P(b){return Array.prototype.slice.call(b)}
function S(b){return P(b).join("")}function ba(){function b(){var b=[],a=[];return ha(function(){b.push.apply(b,P(arguments))},{def:function(){var d="v"+c++;a.push(d);0<arguments.length&&(b.push(d,"\x3d"),b.push.apply(b,P(arguments)),b.push(";"));return d},toString:function(){return S([0<a.length?"var "+a+";":"",S(b)])}})}function a(){function a(b,a){d(b,a,"\x3d",c.def(b,a),";")}var c=b(),d=b(),f=c.toString,e=d.toString;return ha(function(){c.apply(c,P(arguments))},{def:c.def,entry:c,exit:d,save:a,
set:function(b,d,f){a(b,d);c(b,d,"\x3d",f,";")},toString:function(){return f()+e()}})}var c=0,d=[],f=[],e=b(),g={};return{global:e,link:function(b){for(var a=0;a<f.length;++a)if(f[a]===b)return d[a];a="g"+c++;d.push(a);f.push(b);return a},block:b,proc:function(b,c){function d(){var b="a"+f.length;f.push(b);return b}var f=[];c=c||0;for(var e=0;e<c;++e)d();e=a();var k=e.toString;return g[b]=ha(e,{arg:d,toString:function(){return S(["function(",f.join(),"){",k(),"}"])}})},scope:a,cond:function(){var b=
S(arguments),c=a(),d=a(),f=c.toString,e=d.toString;return ha(c,{then:function(){c.apply(c,P(arguments));return this},"else":function(){d.apply(d,P(arguments));return this},toString:function(){var a=e();a&&(a="else{"+a+"}");return S(["if(",b,"){",f(),"}",a])}})},compile:function(){var b=['"use strict";',e,"return {"];Object.keys(g).forEach(function(a){b.push('"',a,'":',g[a].toString(),",")});b.push("}");var a=S(b).replace(/;/g,";\n").replace(/}/g,"}\n").replace(/{/g,"{\n");return Function.apply(null,
d.concat(a)).apply(null,f)}}}function da(b){return Array.isArray(b)||V(b)||r(b)}function ca(b){return b.sort(function(b,a){return"viewport"===b?-1:"viewport"===a?1:b<a?-1:1})}function Y(b,a,c,d){this.thisDep=b;this.contextDep=a;this.propDep=c;this.append=d}function W(b){return b&&!(b.thisDep||b.contextDep||b.propDep)}function ea(b){return new Y(!1,!1,!1,b)}function U(b,a){var c=b.type;return 0===c?(c=b.data.length,new Y(!0,1<=c,2<=c,a)):4===c?(c=b.data,new Y(c.thisDep,c.contextDep,c.propDep,a)):new Y(3===
c,2===c,1===c,a)}function na(b,a,c,d,e,g,k,h,l,r,n,q,u,p,v){function m(b){return b.replace(".","_")}function z(b,a,c){var d=m(b);V.push(b);Z[d]=Ja[d]=!!c;Ea[d]=a}function w(b,a,c){var d=m(b);V.push(b);Array.isArray(c)?(Ja[d]=c.slice(),Z[d]=c.slice()):Ja[d]=Z[d]=c;Na[d]=a}function A(){var b=ba(),c=b.link,d=b.global;b.id=Ra++;b.batchId="0";var f=c(ia),e=b.shared={props:"a0"};Object.keys(ia).forEach(function(b){e[b]=d.def(f,".",b)});var g=b.next={},k=b.current={};Object.keys(Na).forEach(function(b){Array.isArray(Ja[b])&&
(g[b]=d.def(e.next,".",b),k[b]=d.def(e.current,".",b))});var h=b.constants={};Object.keys(ua).forEach(function(b){h[b]=d.def(JSON.stringify(ua[b]))});b.invoke=function(a,d){switch(d.type){case 0:var f=["this",e.context,e.props,b.batchId];return a.def(c(d.data),".call(",f.slice(0,Math.max(d.data.length+1,4)),")");case 1:return a.def(e.props,d.data);case 2:return a.def(e.context,d.data);case 3:return a.def("this",d.data);case 4:return d.data.append(b,a),d.data.ref}};b.attribCache={};var l={};b.scopeAttrib=
function(b){b=a.id(b);if(b in l)return l[b];var d=r.scope[b];d||(d=r.scope[b]=new Ia);return l[b]=c(d)};return b}function x(b){var a=b["static"];b=b.dynamic;if("profile"in a){var c=!!a.profile;var d=ea(function(b,a){return c});d.enable=c}else if("profile"in b){var f=b.profile;d=U(f,function(b,a){return b.invoke(a,f)})}return d}function y(b,a){a=b["static"];b=b.dynamic;if("framebuffer"in a){var c=a.framebuffer;return c?(c=h.getFramebuffer(c),ea(function(b,a){var d=b.link(c);b=b.shared;a.set(b.framebuffer,
".next",d);b=b.context;a.set(b,".framebufferWidth",d+".width");a.set(b,".framebufferHeight",d+".height");return d})):ea(function(b,a){b=b.shared;a.set(b.framebuffer,".next","null");b=b.context;a.set(b,".framebufferWidth",b+".drawingBufferWidth");a.set(b,".framebufferHeight",b+".drawingBufferHeight");return"null"})}if("framebuffer"in b){var d=b.framebuffer;return U(d,function(b,a){var c=b.invoke(a,d);b=b.shared;var f=b.framebuffer;c=a.def(f,".getFramebuffer(",c,")");a.set(f,".next",c);b=b.context;
a.set(b,".framebufferWidth",c+"?"+c+".width:"+b+".drawingBufferWidth");a.set(b,".framebufferHeight",c+"?"+c+".height:"+b+".drawingBufferHeight");return c})}return null}function t(b,a,c){function d(b){if(b in f){var c=f[b];b=!0;var d=c.x|0,g=c.y|0,k,h;"width"in c?k=c.width|0:b=!1;"height"in c?h=c.height|0:b=!1;return new Y(!b&&a&&a.thisDep,!b&&a&&a.contextDep,!b&&a&&a.propDep,function(b,a){b=b.shared.context;var f=k;"width"in c||(f=a.def(b,".","framebufferWidth","-",d));var e=h;"height"in c||(e=a.def(b,
".","framebufferHeight","-",g));return[d,g,f,e]})}if(b in e){var l=e[b];b=U(l,function(b,a){var c=b.invoke(a,l);b=b.shared.context;var d=a.def(c,".x|0"),f=a.def(c,".y|0"),e=a.def('"width" in ',c,"?",c,".width|0:","(",b,".","framebufferWidth","-",d,")");c=a.def('"height" in ',c,"?",c,".height|0:","(",b,".","framebufferHeight","-",f,")");return[d,f,e,c]});a&&(b.thisDep=b.thisDep||a.thisDep,b.contextDep=b.contextDep||a.contextDep,b.propDep=b.propDep||a.propDep);return b}return a?new Y(a.thisDep,a.contextDep,
a.propDep,function(b,a){b=b.shared.context;return[0,0,a.def(b,".","framebufferWidth"),a.def(b,".","framebufferHeight")]}):null}var f=b["static"],e=b.dynamic;if(b=d("viewport")){var g=b;b=new Y(b.thisDep,b.contextDep,b.propDep,function(b,a){var c=g.append(b,a);b=b.shared.context;a.set(b,".viewportWidth",c[2]);a.set(b,".viewportHeight",c[3]);return c})}return{viewport:b,scissor_box:d("scissor.box")}}function J(b){function c(b){if(b in d){var c=a.id(d[b]);b=ea(function(){return c});b.id=c;return b}if(b in
f){var e=f[b];return U(e,function(b,a){var c=b.invoke(a,e);return a.def(b.shared.strings,".id(",c,")")})}return null}var d=b["static"],f=b.dynamic,e=c("frag"),g=c("vert"),k=null;W(e)&&W(g)?(k=n.program(g.id,e.id),b=ea(function(b,a){return b.link(k)})):b=new Y(e&&e.thisDep||g&&g.thisDep,e&&e.contextDep||g&&g.contextDep,e&&e.propDep||g&&g.propDep,function(b,a){var c=b.shared.shader;var d=e?e.append(b,a):a.def(c,".","frag");b=g?g.append(b,a):a.def(c,".","vert");return a.def(c+".program("+b+","+d+")")});
return{frag:e,vert:g,progVar:b,program:k}}function B(b,a){function c(b,a){if(b in d){var c=d[b]|0;return ea(function(b,d){a&&(b.OFFSET=c);return c})}if(b in f){var g=f[b];return U(g,function(b,c){c=b.invoke(c,g);a&&(b.OFFSET=c);return c})}return a&&e?ea(function(b,a){b.OFFSET="0";return 0}):null}var d=b["static"],f=b.dynamic,e=function(){if("elements"in d){var b=d.elements;da(b)?b=g.getElements(g.create(b,!0)):b&&(b=g.getElements(b));var a=ea(function(a,c){return b?(c=a.link(b),a.ELEMENTS=c):a.ELEMENTS=
null});a.value=b;return a}if("elements"in f){var c=f.elements;return U(c,function(b,a){var d=b.shared,f=d.isBufferArgs;d=d.elements;var e=b.invoke(a,c),g=a.def("null");f=a.def(f,"(",e,")");e=b.cond(f).then(g,"\x3d",d,".createStream(",e,");")["else"](g,"\x3d",d,".getElements(",e,");");a.entry(e);a.exit(b.cond(f).then(d,".destroyStream(",g,");"));return b.ELEMENTS=g})}return null}(),k=c("offset",!0);return{elements:e,primitive:function(){if("primitive"in d){var b=d.primitive;return ea(function(a,c){return ya[b]})}if("primitive"in
f){var a=f.primitive;return U(a,function(b,c){var d=b.constants.primTypes;b=b.invoke(c,a);return c.def(d,"[",b,"]")})}return e?W(e)?e.value?ea(function(b,a){return a.def(b.ELEMENTS,".primType")}):ea(function(){return 4}):new Y(e.thisDep,e.contextDep,e.propDep,function(b,a){b=b.ELEMENTS;return a.def(b,"?",b,".primType:",4)}):null}(),count:function(){if("count"in d){var b=d.count|0;return ea(function(){return b})}if("count"in f){var a=f.count;return U(a,function(b,c){return b.invoke(c,a)})}return e?
W(e)?e?k?new Y(k.thisDep,k.contextDep,k.propDep,function(b,a){return a.def(b.ELEMENTS,".vertCount-",b.OFFSET)}):ea(function(b,a){return a.def(b.ELEMENTS,".vertCount")}):ea(function(){return-1}):new Y(e.thisDep||k.thisDep,e.contextDep||k.contextDep,e.propDep||k.propDep,function(b,a){var c=b.ELEMENTS;return b.OFFSET?a.def(c,"?",c,".vertCount-",b.OFFSET,":-1"):a.def(c,"?",c,".vertCount:-1")}):null}(),instances:c("instances",!1),offset:k}}function E(b,a){var c=b["static"],d=b.dynamic,e={};V.forEach(function(b){function a(a,
f){if(b in c){var k=a(c[b]);e[g]=ea(function(){return k})}else if(b in d){var h=d[b];e[g]=U(h,function(b,a){return f(b,a,b.invoke(a,h))})}}var g=m(b);switch(b){case "cull.enable":case "blend.enable":case "dither":case "stencil.enable":case "depth.enable":case "scissor.enable":case "polygonOffset.enable":case "sample.alpha":case "sample.enable":case "depth.mask":return a(function(b){return b},function(b,a,c){return c});case "depth.func":return a(function(b){return db[b]},function(b,a,c){return a.def(b.constants.compareFuncs,
"[",c,"]")});case "depth.range":return a(function(b){return b},function(b,a,c){b=a.def("+",c,"[0]");a=a.def("+",c,"[1]");return[b,a]});case "blend.func":return a(function(b){return[Yb["srcRGB"in b?b.srcRGB:b.src],Yb["dstRGB"in b?b.dstRGB:b.dst],Yb["srcAlpha"in b?b.srcAlpha:b.src],Yb["dstAlpha"in b?b.dstAlpha:b.dst]]},function(b,a,c){function d(b,d){return a.def('"',b,d,'" in ',c,"?",c,".",b,d,":",c,".",b)}b=b.constants.blendFuncs;var f=d("src","RGB"),e=d("dst","RGB");f=a.def(b,"[",f,"]");var g=a.def(b,
"[",d("src","Alpha"),"]");e=a.def(b,"[",e,"]");b=a.def(b,"[",d("dst","Alpha"),"]");return[f,e,g,b]});case "blend.equation":return a(function(b){if("string"===typeof b)return[fa[b],fa[b]];if("object"===typeof b)return[fa[b.rgb],fa[b.alpha]]},function(b,a,c){var d=b.constants.blendEquations,f=a.def(),e=a.def();b=b.cond("typeof ",c,'\x3d\x3d\x3d"string"');b.then(f,"\x3d",e,"\x3d",d,"[",c,"];");b["else"](f,"\x3d",d,"[",c,".rgb];",e,"\x3d",d,"[",c,".alpha];");a(b);return[f,e]});case "blend.color":return a(function(b){return f(4,
function(a){return+b[a]})},function(b,a,c){return f(4,function(b){return a.def("+",c,"[",b,"]")})});case "stencil.mask":return a(function(b){return b|0},function(b,a,c){return a.def(c,"|0")});case "stencil.func":return a(function(b){return[db[b.cmp||"keep"],b.ref||0,"mask"in b?b.mask:-1]},function(b,a,c){b=a.def('"cmp" in ',c,"?",b.constants.compareFuncs,"[",c,".cmp]",":",7680);var d=a.def(c,".ref|0");a=a.def('"mask" in ',c,"?",c,".mask|0:-1");return[b,d,a]});case "stencil.opFront":case "stencil.opBack":return a(function(a){return["stencil.opBack"===
b?1029:1028,Lb[a.fail||"keep"],Lb[a.zfail||"keep"],Lb[a.zpass||"keep"]]},function(a,c,d){function f(b){return c.def('"',b,'" in ',d,"?",e,"[",d,".",b,"]:",7680)}var e=a.constants.stencilOps;return["stencil.opBack"===b?1029:1028,f("fail"),f("zfail"),f("zpass")]});case "polygonOffset.offset":return a(function(b){return[b.factor|0,b.units|0]},function(b,a,c){b=a.def(c,".factor|0");a=a.def(c,".units|0");return[b,a]});case "cull.face":return a(function(b){var a=0;"front"===b?a=1028:"back"===b&&(a=1029);
return a},function(b,a,c){return a.def(c,'\x3d\x3d\x3d"front"?',1028,":",1029)});case "lineWidth":return a(function(b){return b},function(b,a,c){return c});case "frontFace":return a(function(b){return fb[b]},function(b,a,c){return a.def(c+'\x3d\x3d\x3d"cw"?2304:2305')});case "colorMask":return a(function(b){return b.map(function(b){return!!b})},function(b,a,c){return f(4,function(b){return"!!"+c+"["+b+"]"})});case "sample.coverage":return a(function(b){return["value"in b?b.value:1,!!b.invert]},function(b,
a,c){b=a.def('"value" in ',c,"?+",c,".value:1");a=a.def("!!",c,".invert");return[b,a]})}});return e}function I(b,a){var c=b["static"],d=b.dynamic,e={};Object.keys(c).forEach(function(b){var a=c[b];if("number"===typeof a||"boolean"===typeof a)var d=ea(function(){return a});else if("function"===typeof a){var g=a._reglType;if("texture2d"===g||"textureCube"===g)d=ea(function(b){return b.link(a)});else if("framebuffer"===g||"framebufferCube"===g)d=ea(function(b){return b.link(a.color[0])})}else C(a)&&
(d=ea(function(b){return b.global.def("[",f(a.length,function(b){return a[b]}),"]")}));d.value=a;e[b]=d});Object.keys(d).forEach(function(b){var a=d[b];e[b]=U(a,function(b,c){return b.invoke(c,a)})});return e}function D(b,c){var d=b["static"],f=b.dynamic,g={};Object.keys(d).forEach(function(b){var c=d[b],f=a.id(b),k=new Ia;if(da(c))k.state=1,k.buffer=e.getBuffer(e.create(c,34962,!1,!0)),k.type=0;else{var h=e.getBuffer(c);if(h)k.state=1,k.buffer=h,k.type=0;else if("constant"in c){var l=c.constant;
k.buffer="null";k.state=2;"number"===typeof l?k.x=l:gb.forEach(function(b,a){a<l.length&&(k[b]=l[a])})}else{h=da(c.buffer)?e.getBuffer(e.create(c.buffer,34962,!1,!0)):e.getBuffer(c.buffer);var r=c.offset|0,n=c.stride|0,q=c.size|0,u=!!c.normalized,p=0;"type"in c&&(p=Aa[c.type]);c=c.divisor|0;k.buffer=h;k.state=1;k.size=q;k.normalized=u;k.type=p||h.dtype;k.offset=r;k.stride=n;k.divisor=c}}g[b]=ea(function(b,a){a=b.attribCache;if(f in a)return a[f];var c={isStream:!1};Object.keys(k).forEach(function(b){c[b]=
k[b]});k.buffer&&(c.buffer=b.link(k.buffer),c.type=c.type||c.buffer+".dtype");return a[f]=c})});Object.keys(f).forEach(function(b){var a=f[b];g[b]=U(a,function(b,c){function d(b){c(k[b],"\x3d",f,".",b,"|0;")}var f=b.invoke(c,a);b=b.shared;var e=b.isBufferArgs,g=b.buffer,k={isStream:c.def(!1)},h=new Ia;h.state=1;Object.keys(h).forEach(function(b){k[b]=c.def(""+h[b])});var l=k.buffer,r=k.type;c("if(",e,"(",f,")){",k.isStream,"\x3dtrue;",l,"\x3d",g,".createStream(",34962,",",f,");",r,"\x3d",l,".dtype;",
"}else{",l,"\x3d",g,".getBuffer(",f,");","if(",l,"){",r,"\x3d",l,".dtype;",'}else if("constant" in ',f,"){",k.state,"\x3d",2,";","if(typeof "+f+'.constant \x3d\x3d\x3d "number"){',k[gb[0]],"\x3d",f,".constant;",gb.slice(1).map(function(b){return k[b]}).join("\x3d"),"\x3d0;","}else{",gb.map(function(b,a){return k[b]+"\x3d"+f+".constant.length\x3e"+a+"?"+f+".constant["+a+"]:0;"}).join(""),"}}else{","if(",e,"(",f,".buffer)){",l,"\x3d",g,".createStream(",34962,",",f,".buffer);","}else{",l,"\x3d",g,".getBuffer(",
f,".buffer);","}",r,'\x3d"type" in ',f,"?",b.glTypes,"[",f,".type]:",l,".dtype;",k.normalized,"\x3d!!",f,".normalized;");d("size");d("offset");d("stride");d("divisor");c("}}");c.exit("if(",k.isStream,"){",g,".destroyStream(",l,");","}");return k})});return g}function K(b){var a=b["static"],c=b.dynamic,d={};Object.keys(a).forEach(function(b){var c=a[b];d[b]=ea(function(b,a){return"number"===typeof c||"boolean"===typeof c?""+c:b.link(c)})});Object.keys(c).forEach(function(b){var a=c[b];d[b]=U(a,function(b,
c){return b.invoke(c,a)})});return d}function F(b,a,c,d,f){var e=y(b,f),g=t(b,e,f),k=B(b,f),h=E(b,f),l=J(b,f),r=g.viewport;r&&(h.viewport=r);r=m("scissor.box");(g=g[r])&&(h[r]=g);g=0<Object.keys(h).length;e={framebuffer:e,draw:k,shader:l,state:h,dirty:g};e.profile=x(b,f);e.uniforms=I(c,f);e.attributes=D(a,f);e.context=K(d,f);return e}function G(b,a,c){var d=b.shared.context,f=b.scope();Object.keys(c).forEach(function(e){a.save(d,"."+e);f(d,".",e,"\x3d",c[e].append(b,a),";")});a(f)}function L(b,a,
c,d){var f=b.shared,e=f.gl,g=f.framebuffer,k;va&&(k=a.def(f.extensions,".webgl_draw_buffers"));var h=b.constants;f=h.drawBuffer;h=h.backBuffer;b=c?c.append(b,a):a.def(g,".next");d||a("if(",b,"!\x3d\x3d",g,".cur){");a("if(",b,"){",e,".bindFramebuffer(",36160,",",b,".framebuffer);");va&&a(k,".drawBuffersWEBGL(",f,"[",b,".colorAttachments.length]);");a("}else{",e,".bindFramebuffer(",36160,",null);");va&&a(k,".drawBuffersWEBGL(",h,");");a("}",g,".cur\x3d",b,";");d||a("}")}function H(b,a,c){var d=b.shared,
e=d.gl,g=b.current,k=b.next,h=d.current,l=d.next,r=b.cond(h,".dirty");V.forEach(function(a){a=m(a);if(!(a in c.state))if(a in k){var d=k[a];var n=g[a];var q=f(Ja[a].length,function(b){return r.def(d,"[",b,"]")});r(b.cond(q.map(function(b,a){return b+"!\x3d\x3d"+n+"["+a+"]"}).join("||")).then(e,".",Na[a],"(",q,");",q.map(function(b,a){return n+"["+a+"]\x3d"+b}).join(";"),";"))}else d=r.def(l,".",a),q=b.cond(d,"!\x3d\x3d",h,".",a),r(q),a in Ea?q(b.cond(d).then(e,".enable(",Ea[a],");")["else"](e,".disable(",
Ea[a],");"),h,".",a,"\x3d",d,";"):q(e,".",Na[a],"(",d,");",h,".",a,"\x3d",d,";")});0===Object.keys(c.state).length&&r(h,".dirty\x3dfalse;");a(r)}function M(b,a,c,d){var f=b.shared,e=b.current,g=f.current,k=f.gl;ca(Object.keys(c)).forEach(function(f){var h=c[f];if(!d||d(h)){var l=h.append(b,a);if(Ea[f]){var r=Ea[f];W(h)?l?a(k,".enable(",r,");"):a(k,".disable(",r,");"):a(b.cond(l).then(k,".enable(",r,");")["else"](k,".disable(",r,");"));a(g,".",f,"\x3d",l,";")}else if(C(l)){var n=e[f];a(k,".",Na[f],
"(",l,");",l.map(function(b,a){return n+"["+a+"]\x3d"+b}).join(";"),";")}else a(k,".",Na[f],"(",l,");",g,".",f,"\x3d",l,";")}})}function O(b,a){Ba&&(b.instancing=a.def(b.shared.extensions,".angle_instanced_arrays"))}function N(b,a,c,d,f){function e(){return"undefined"===typeof performance?"Date.now()":"performance.now()"}function g(b){u=a.def();b(u,"\x3d",e(),";");"string"===typeof f?b(r,".count+\x3d",f,";"):b(r,".count++;");p&&(d?(v=a.def(),b(v,"\x3d",q,".getNumPendingQueries();")):b(q,".beginQuery(",
r,");"))}function k(b){b(r,".cpuTime+\x3d",e(),"-",u,";");p&&(d?b(q,".pushScopeStats(",v,",",q,".getNumPendingQueries(),",r,");"):b(q,".endQuery();"))}function h(b){var c=a.def(n,".profile");a(n,".profile\x3d",b,";");a.exit(n,".profile\x3d",c,";")}var l=b.shared,r=b.stats,n=l.current,q=l.timer;c=c.profile;var u,v;if(c){if(W(c)){c.enable?(g(a),k(a.exit),h("true")):h("false");return}c=c.append(b,a);h(c)}else c=a.def(n,".profile");l=b.block();g(l);a("if(",c,"){",l,"}");b=b.block();k(b);a.exit("if(",
c,"){",b,"}")}function R(b,a,c,d,f){function e(b){switch(b){case 35664:case 35667:case 35671:return 2;case 35665:case 35668:case 35672:return 3;case 35666:case 35669:case 35673:return 4;default:return 1}}function g(c,d,f){function e(){a("if(!",r,".buffer){",h,".enableVertexAttribArray(",l,");}");var c=f.type;var e=f.size?a.def(f.size,"||",d):d;a("if(",r,".type!\x3d\x3d",c,"||",r,".size!\x3d\x3d",e,"||",u.map(function(b){return r+"."+b+"!\x3d\x3d"+f[b]}).join("||"),"){",h,".bindBuffer(",34962,",",
n,".buffer);",h,".vertexAttribPointer(",[l,e,c,f.normalized,f.stride,f.offset],");",r,".type\x3d",c,";",r,".size\x3d",e,";",u.map(function(b){return r+"."+b+"\x3d"+f[b]+";"}).join(""),"}");Ba&&(c=f.divisor,a("if(",r,".divisor!\x3d\x3d",c,"){",b.instancing,".vertexAttribDivisorANGLE(",[l,c],");",r,".divisor\x3d",c,";}"))}function g(){a("if(",r,".buffer){",h,".disableVertexAttribArray(",l,");","}if(",gb.map(function(b,a){return r+"."+b+"!\x3d\x3d"+q[a]}).join("||"),"){",h,".vertexAttrib4f(",l,",",q,
");",gb.map(function(b,a){return r+"."+b+"\x3d"+q[a]+";"}).join(""),"}")}var h=k.gl,l=a.def(c,".location"),r=a.def(k.attributes,"[",l,"]");c=f.state;var n=f.buffer,q=[f.x,f.y,f.z,f.w],u=["buffer","normalized","offset","stride"];1===c?e():2===c?g():(a("if(",c,"\x3d\x3d\x3d",1,"){"),e(),a("}else{"),g(),a("}"))}var k=b.shared;d.forEach(function(d){var k=d.name,h=c.attributes[k];if(h){if(!f(h))return;var l=h.append(b,a)}else{if(!f(nc))return;var r=b.scopeAttrib(k);l={};Object.keys(new Ia).forEach(function(b){l[b]=
a.def(r,".",b)})}g(b.link(d),e(d.info.type),l)})}function T(b,c,d,e,g){for(var k=b.shared,h=k.gl,l,r=0;r<e.length;++r){var n=e[r],q=n.name,u=n.info.type,p=d.uniforms[q];n=b.link(n)+".location";if(p){if(!g(p))continue;if(W(p)){q=p.value;if(35678===u||35680===u)u=b.link(q._texture||q.color[0]._texture),c(h,".uniform1i(",n,",",u+".bind());"),c.exit(u,".unbind();");else if(35674===u||35675===u||35676===u)q=b.global.def("new Float32Array(["+Array.prototype.slice.call(q)+"])"),p=2,35675===u?p=3:35676===
u&&(p=4),c(h,".uniformMatrix",p,"fv(",n,",false,",q,");");else{switch(u){case 5126:l="1f";break;case 35664:l="2f";break;case 35665:l="3f";break;case 35666:l="4f";break;case 35670:l="1i";break;case 5124:l="1i";break;case 35671:l="2i";break;case 35667:l="2i";break;case 35672:l="3i";break;case 35668:l="3i";break;case 35673:l="4i";break;case 35669:l="4i"}c(h,".uniform",l,"(",n,",",C(q)?Array.prototype.slice.call(q):q,");")}continue}else var v=p.append(b,c)}else{if(!g(nc))continue;v=c.def(k.uniforms,"[",
a.id(q),"]")}35678===u?c("if(",v,"\x26\x26",v,'._reglType\x3d\x3d\x3d"framebuffer"){',v,"\x3d",v,".color[0];","}"):35680===u&&c("if(",v,"\x26\x26",v,'._reglType\x3d\x3d\x3d"framebufferCube"){',v,"\x3d",v,".color[0];","}");q=1;switch(u){case 35678:case 35680:u=c.def(v,"._texture");c(h,".uniform1i(",n,",",u,".bind());");c.exit(u,".unbind();");continue;case 5124:case 35670:l="1i";break;case 35667:case 35671:l="2i";q=2;break;case 35668:case 35672:l="3i";q=3;break;case 35669:case 35673:l="4i";q=4;break;
case 5126:l="1f";break;case 35664:l="2f";q=2;break;case 35665:l="3f";q=3;break;case 35666:l="4f";q=4;break;case 35674:l="Matrix2fv";break;case 35675:l="Matrix3fv";break;case 35676:l="Matrix4fv"}c(h,".uniform",l,"(",n,",");if("M"===l.charAt(0)){n=Math.pow(u-35674+2,2);var m=b.global.def("new Float32Array(",n,")");c("false,(Array.isArray(",v,")||",v," instanceof Float32Array)?",v,":(",f(n,function(b){return m+"["+b+"]\x3d"+v+"["+b+"]"}),",",m,")")}else 1<q?c(f(q,function(b){return v+"["+b+"]"})):c(v);
c(");")}}function P(b,a,c,d){function f(f){var e=r[f];return e?e.contextDep&&d.contextDynamic||e.propDep?e.append(b,c):e.append(b,a):a.def(l,".",f)}function e(){function b(){c(m,".drawElementsInstancedANGLE(",[q,p,z,u+"\x3c\x3c(("+z+"-5121)\x3e\x3e1)",v],");")}function a(){c(m,".drawArraysInstancedANGLE(",[q,u,p,v],");")}n?w?b():(c("if(",n,"){"),b(),c("}else{"),a(),c("}")):a()}function g(){function b(){c(h+".drawElements("+[q,p,z,u+"\x3c\x3c(("+z+"-5121)\x3e\x3e1)"]+");")}function a(){c(h+".drawArrays("+
[q,u,p]+");")}n?w?b():(c("if(",n,"){"),b(),c("}else{"),a(),c("}")):a()}var k=b.shared,h=k.gl,l=k.draw,r=d.draw,n=function(){var f=r.elements,e=a;if(f){if(f.contextDep&&d.contextDynamic||f.propDep)e=c;f=f.append(b,e)}else f=e.def(l,".","elements");f&&e("if("+f+")"+h+".bindBuffer(34963,"+f+".buffer.buffer);");return f}(),q=f("primitive"),u=f("offset"),p=function(){var f=r.count,e=a;if(f){if(f.contextDep&&d.contextDynamic||f.propDep)e=c;f=f.append(b,e)}else f=e.def(l,".","count");return f}();if("number"===
typeof p){if(0===p)return}else c("if(",p,"){"),c.exit("}");var v,m;Ba&&(v=f("instances"),m=b.instancing);var z=n+".type",w=r.elements&&W(r.elements);Ba&&("number"!==typeof v||0<=v)?"string"===typeof v?(c("if(",v,"\x3e0){"),e(),c("}else if(",v,"\x3c0){"),g(),c("}")):e():g()}function S(b,a,c,d,f){a=A();f=a.proc("body",f);Ba&&(a.instancing=f.def(a.shared.extensions,".angle_instanced_arrays"));b(a,f,c,d);return a.compile().body}function X(b,a,c,d){O(b,a);R(b,a,c,d.attributes,function(){return!0});T(b,
a,c,d.uniforms,function(){return!0});P(b,a,a,c)}function ka(b,a){var c=b.proc("draw",1);O(b,c);G(b,c,a.context);L(b,c,a.framebuffer);H(b,c,a);M(b,c,a.state);N(b,c,a,!1,!0);var d=a.shader.progVar.append(b,c);c(b.shared.gl,".useProgram(",d,".program);");if(a.shader.program)X(b,c,a,a.shader.program);else{var f=b.global.def("{}"),e=c.def(d,".id"),g=c.def(f,"[",e,"]");c(b.cond(g).then(g,".call(this,a0);")["else"](g,"\x3d",f,"[",e,"]\x3d",b.link(function(c){return S(X,b,a,c,1)}),"(",d,");",g,".call(this,a0);"))}0<
Object.keys(a.state).length&&c(b.shared.current,".dirty\x3dtrue;")}function na(b,a,c,d){function f(){return!0}b.batchId="a1";O(b,a);R(b,a,c,d.attributes,f);T(b,a,c,d.uniforms,f);P(b,a,a,c)}function xa(b,a,c,d){function f(b){return b.contextDep&&g||b.propDep}function e(b){return!f(b)}O(b,a);var g=c.contextDep,k=a.def(),h=a.def();b.shared.props=h;b.batchId=k;var l=b.scope(),r=b.scope();a(l.entry,"for(",k,"\x3d0;",k,"\x3c","a1",";++",k,"){",h,"\x3d","a0","[",k,"];",r,"}",l.exit);c.needsContext&&G(b,
r,c.context);c.needsFramebuffer&&L(b,r,c.framebuffer);M(b,r,c.state,f);c.profile&&f(c.profile)&&N(b,r,c,!1,!0);d?(R(b,l,c,d.attributes,e),R(b,r,c,d.attributes,f),T(b,l,c,d.uniforms,e),T(b,r,c,d.uniforms,f),P(b,l,r,c)):(a=b.global.def("{}"),d=c.shader.progVar.append(b,r),h=r.def(d,".id"),l=r.def(a,"[",h,"]"),r(b.shared.gl,".useProgram(",d,".program);","if(!",l,"){",l,"\x3d",a,"[",h,"]\x3d",b.link(function(a){return S(na,b,c,a,2)}),"(",d,");}",l,".call(this,a0[",k,"],",k,");"))}function Ha(b,a){function c(b){return b.contextDep&&
f||b.propDep}var d=b.proc("batch",2);b.batchId="0";O(b,d);var f=!1,e=!0;Object.keys(a.context).forEach(function(b){f=f||a.context[b].propDep});f||(G(b,d,a.context),e=!1);var g=a.framebuffer,k=!1;g?(g.propDep?f=k=!0:g.contextDep&&f&&(k=!0),k||L(b,d,g)):L(b,d,null);a.state.viewport&&a.state.viewport.propDep&&(f=!0);H(b,d,a);M(b,d,a.state,function(b){return!c(b)});a.profile&&c(a.profile)||N(b,d,a,!1,"a1");a.contextDep=f;a.needsContext=e;a.needsFramebuffer=k;e=a.shader.progVar;if(e.contextDep&&f||e.propDep)xa(b,
d,a,null);else if(e=e.append(b,d),d(b.shared.gl,".useProgram(",e,".program);"),a.shader.program)xa(b,d,a,a.shader.program);else{g=b.global.def("{}");k=d.def(e,".id");var h=d.def(g,"[",k,"]");d(b.cond(h).then(h,".call(this,a0,a1);")["else"](h,"\x3d",g,"[",k,"]\x3d",b.link(function(c){return S(xa,b,a,c,2)}),"(",e,");",h,".call(this,a0,a1);"))}0<Object.keys(a.state).length&&d(b.shared.current,".dirty\x3dtrue;")}function ha(b,c){function d(a){var d=c.shader[a];d&&f.set(e.shader,"."+a,d.append(b,f))}var f=
b.proc("scope",3);b.batchId="a2";var e=b.shared,g=e.current;G(b,f,c.context);c.framebuffer&&c.framebuffer.append(b,f);ca(Object.keys(c.state)).forEach(function(a){var d=c.state[a].append(b,f);C(d)?d.forEach(function(c,d){f.set(b.next[a],"["+d+"]",c)}):f.set(e.next,"."+a,d)});N(b,f,c,!0,!0);["elements","offset","count","instances","primitive"].forEach(function(a){var d=c.draw[a];d&&f.set(e.draw,"."+a,""+d.append(b,f))});Object.keys(c.uniforms).forEach(function(d){f.set(e.uniforms,"["+a.id(d)+"]",c.uniforms[d].append(b,
f))});Object.keys(c.attributes).forEach(function(a){var d=c.attributes[a].append(b,f),e=b.scopeAttrib(a);Object.keys(new Ia).forEach(function(b){f.set(e,"."+b,d[b])})});d("vert");d("frag");0<Object.keys(c.state).length&&(f(g,".dirty\x3dtrue;"),f.exit(g,".dirty\x3dtrue;"));f("a1(",b.shared.context,",a0,",b.batchId,");")}function pa(b){if("object"===typeof b&&!C(b)){for(var a=Object.keys(b),c=0;c<a.length;++c)if(oa.isDynamic(b[a[c]]))return!0;return!1}}function aa(b,a,c){function d(b,a){g.forEach(function(c){var d=
f[c];oa.isDynamic(d)&&(d=b.invoke(a,d),a(r,".",c,"\x3d",d,";"))})}var f=a["static"][c];if(f&&pa(f)){var e=b.global,g=Object.keys(f),k=!1,h=!1,l=!1,r=b.global.def("{}");g.forEach(function(a){var c=f[a];if(oa.isDynamic(c))"function"===typeof c&&(c=f[a]=oa.unbox(c)),a=U(c,null),k=k||a.thisDep,l=l||a.propDep,h=h||a.contextDep;else{e(r,".",a,"\x3d");switch(typeof c){case "number":e(c);break;case "string":e('"',c,'"');break;case "object":Array.isArray(c)&&e("[",c.join(),"]");break;default:e(b.link(c))}e(";")}});
a.dynamic[c]=new oa.DynamicVariable(4,{thisDep:k,contextDep:h,propDep:l,ref:r,append:d});delete a["static"][c]}}var Ia=r.Record,fa={add:32774,subtract:32778,"reverse subtract":32779};c.ext_blend_minmax&&(fa.min=32775,fa.max=32776);var Ba=c.angle_instanced_arrays,va=c.webgl_draw_buffers,Ja={dirty:!0,profile:v.profile},Z={},V=[],Ea={},Na={};z("dither",3024);z("blend.enable",3042);w("blend.color","blendColor",[0,0,0,0]);w("blend.equation","blendEquationSeparate",[32774,32774]);w("blend.func","blendFuncSeparate",
[1,0,1,0]);z("depth.enable",2929,!0);w("depth.func","depthFunc",513);w("depth.range","depthRange",[0,1]);w("depth.mask","depthMask",!0);w("colorMask","colorMask",[!0,!0,!0,!0]);z("cull.enable",2884);w("cull.face","cullFace",1029);w("frontFace","frontFace",2305);w("lineWidth","lineWidth",1);z("polygonOffset.enable",32823);w("polygonOffset.offset","polygonOffset",[0,0]);z("sample.alpha",32926);z("sample.enable",32928);w("sample.coverage","sampleCoverage",[1,!1]);z("stencil.enable",2960);w("stencil.mask",
"stencilMask",-1);w("stencil.func","stencilFunc",[519,0,-1]);w("stencil.opFront","stencilOpSeparate",[1028,7680,7680,7680]);w("stencil.opBack","stencilOpSeparate",[1029,7680,7680,7680]);z("scissor.enable",3089);w("scissor.box","scissor",[0,0,b.drawingBufferWidth,b.drawingBufferHeight]);w("viewport","viewport",[0,0,b.drawingBufferWidth,b.drawingBufferHeight]);var ia={gl:b,context:u,strings:a,next:Z,current:Ja,draw:q,elements:g,buffer:e,shader:n,attributes:r.state,uniforms:l,framebuffer:h,extensions:c,
timer:p,isBufferArgs:da},ua={primTypes:ya,compareFuncs:db,blendFuncs:Yb,blendEquations:fa,stencilOps:Lb,glTypes:Aa,orientationType:fb};va&&(ua.backBuffer=[1029],ua.drawBuffer=f(d.maxDrawbuffers,function(b){return 0===b?[0]:f(b,function(b){return 36064+b})}));var Ra=0;return{next:Z,current:Ja,procs:function(){var b=A(),a=b.proc("poll"),c=b.proc("refresh"),e=b.block();a(e);c(e);var g=b.shared,k=g.gl,h=g.next,l=g.current;e(l,".dirty\x3dfalse;");L(b,a);L(b,c,null,!0);var r;Ba&&(r=b.link(Ba));for(var n=
0;n<d.maxAttributes;++n){var q=c.def(g.attributes,"[",n,"]"),u=b.cond(q,".buffer");u.then(k,".enableVertexAttribArray(",n,");",k,".bindBuffer(",34962,",",q,".buffer.buffer);",k,".vertexAttribPointer(",n,",",q,".size,",q,".type,",q,".normalized,",q,".stride,",q,".offset);")["else"](k,".disableVertexAttribArray(",n,");",k,".vertexAttrib4f(",n,",",q,".x,",q,".y,",q,".z,",q,".w);",q,".buffer\x3dnull;");c(u);Ba&&c(r,".vertexAttribDivisorANGLE(",n,",",q,".divisor);")}Object.keys(Ea).forEach(function(d){var f=
Ea[d],g=e.def(h,".",d),r=b.block();r("if(",g,"){",k,".enable(",f,")}else{",k,".disable(",f,")}",l,".",d,"\x3d",g,";");c(r);a("if(",g,"!\x3d\x3d",l,".",d,"){",r,"}")});Object.keys(Na).forEach(function(d){var g=Na[d],r=Ja[d],n,q,u=b.block();u(k,".",g,"(");C(r)?(g=r.length,n=b.global.def(h,".",d),q=b.global.def(l,".",d),u(f(g,function(b){return n+"["+b+"]"}),");",f(g,function(b){return q+"["+b+"]\x3d"+n+"["+b+"];"}).join("")),a("if(",f(g,function(b){return n+"["+b+"]!\x3d\x3d"+q+"["+b+"]"}).join("||"),
"){",u,"}")):(n=e.def(h,".",d),q=e.def(l,".",d),u(n,");",l,".",d,"\x3d",n,";"),a("if(",n,"!\x3d\x3d",q,"){",u,"}"));c(u)});return b.compile()}(),compile:function(b,a,c,d,f){var e=A();e.stats=e.link(f);Object.keys(a["static"]).forEach(function(b){aa(e,a,b)});ma.forEach(function(a){aa(e,b,a)});c=F(b,a,c,d,e);ka(e,c);ha(e,c);Ha(e,c);return e.compile()}}}function X(b,a){for(var c=0;c<b.length;++c)if(b[c]===a)return c;return-1}var ha=function(b,a){for(var c=Object.keys(a),d=0;d<c.length;++d)b[c[d]]=a[c[d]];
return b},fa=0,oa={DynamicVariable:a,define:function(b,c){return new a(b,h(c+""))},isDynamic:function(b){return"function"===typeof b&&!b._reglType||b instanceof a},unbox:function(b,c){return"function"===typeof b?new a(0,b):b},accessor:h},ua={next:"function"===typeof requestAnimationFrame?function(b){return requestAnimationFrame(b)}:function(b){return setTimeout(b,16)},cancel:"function"===typeof cancelAnimationFrame?function(b){return cancelAnimationFrame(b)}:clearTimeout},Z="undefined"!==typeof performance&&
performance.now?function(){return performance.now()}:function(){return+new Date},qa=k();qa.zero=k();var sa=function(b,a){var c=1;a.ext_texture_filter_anisotropic&&(c=b.getParameter(34047));var d=1,f=1;a.webgl_draw_buffers&&(d=b.getParameter(34852),f=b.getParameter(36063));var e=!!a.oes_texture_float;if(e){e=b.createTexture();b.bindTexture(3553,e);b.texImage2D(3553,0,6408,1,1,0,6408,5126,null);var g=b.createFramebuffer();b.bindFramebuffer(36160,g);b.framebufferTexture2D(36160,36064,3553,e,0);b.bindTexture(3553,
null);if(36053!==b.checkFramebufferStatus(36160))e=!1;else{b.viewport(0,0,1,1);b.clearColor(1,0,0,1);b.clear(16384);var k=qa.allocType(5126,4);b.readPixels(0,0,1,1,6408,5126,k);b.getError()?e=!1:(b.deleteFramebuffer(g),b.deleteTexture(e),e=1===k[0]);qa.freeType(k)}}k=!0;"undefined"!==typeof navigator&&(/MSIE/.test(navigator.userAgent)||/Trident\//.test(navigator.appVersion)||/Edge/.test(navigator.userAgent))||(k=b.createTexture(),g=qa.allocType(5121,36),b.activeTexture(33984),b.bindTexture(34067,
k),b.texImage2D(34069,0,6408,3,3,0,6408,5121,g),qa.freeType(g),b.bindTexture(34067,null),b.deleteTexture(k),k=!b.getError());return{colorBits:[b.getParameter(3410),b.getParameter(3411),b.getParameter(3412),b.getParameter(3413)],depthBits:b.getParameter(3414),stencilBits:b.getParameter(3415),subpixelBits:b.getParameter(3408),extensions:Object.keys(a).filter(function(b){return!!a[b]}),maxAnisotropic:c,maxDrawbuffers:d,maxColorAttachments:f,pointSizeDims:b.getParameter(33901),lineWidthDims:b.getParameter(33902),
maxViewportDims:b.getParameter(3386),maxCombinedTextureUnits:b.getParameter(35661),maxCubeMapSize:b.getParameter(34076),maxRenderbufferSize:b.getParameter(34024),maxTextureUnits:b.getParameter(34930),maxTextureSize:b.getParameter(3379),maxAttributes:b.getParameter(34921),maxVertexUniforms:b.getParameter(36347),maxVertexTextureUnits:b.getParameter(35660),maxVaryingVectors:b.getParameter(36348),maxFragmentUniforms:b.getParameter(36349),glsl:b.getParameter(35724),renderer:b.getParameter(7937),vendor:b.getParameter(7936),
version:b.getParameter(7938),readFloat:e,npotTextureCube:k}},V=function(b){return b instanceof Uint8Array||b instanceof Uint16Array||b instanceof Uint32Array||b instanceof Int8Array||b instanceof Int16Array||b instanceof Int32Array||b instanceof Float32Array||b instanceof Float64Array||b instanceof Uint8ClampedArray},ia=function(b){return Object.keys(b).map(function(a){return b[a]})},Ka={shape:function(b){for(var a=[];b.length;b=b[0])a.push(b.length);return a},flatten:function(b,a,c,d){var f=1;if(a.length)for(var e=
0;e<a.length;++e)f*=a[e];else f=0;c=d||qa.allocType(c,f);switch(a.length){case 0:break;case 1:d=a[0];for(a=0;a<d;++a)c[a]=b[a];break;case 2:d=a[0];a=a[1];for(e=f=0;e<d;++e)for(var g=b[e],k=0;k<a;++k)c[f++]=g[k];break;case 3:v(b,a[0],a[1],a[2],c,0);break;default:m(b,a,0,c,0)}return c}},wa={"[object Int8Array]":5120,"[object Int16Array]":5122,"[object Int32Array]":5124,"[object Uint8Array]":5121,"[object Uint8ClampedArray]":5121,"[object Uint16Array]":5123,"[object Uint32Array]":5125,"[object Float32Array]":5126,
"[object Float64Array]":5121,"[object ArrayBuffer]":5121},Aa={int8:5120,int16:5122,int32:5124,uint8:5121,uint16:5123,uint32:5125,"float":5126,float32:5126},Ha={dynamic:35048,stream:35040,"static":35044},Ba=Ka.flatten,va=Ka.shape,pa=[];pa[5120]=1;pa[5122]=2;pa[5124]=4;pa[5121]=1;pa[5123]=2;pa[5125]=4;pa[5126]=4;var ya={points:0,point:0,lines:1,line:1,triangles:4,triangle:4,"line loop":2,"line strip":3,"triangle strip":5,"triangle fan":6},ka=new Float32Array(1),xa=new Uint32Array(ka.buffer),Ia=[9984,
9986,9985,9987],aa=[0,6409,6410,6407,6408],Ea={};Ea[6409]=Ea[6406]=Ea[6402]=1;Ea[34041]=Ea[6410]=2;Ea[6407]=Ea[35904]=3;Ea[6408]=Ea[35906]=4;var Ja=D("HTMLCanvasElement"),Na=D("CanvasRenderingContext2D"),Ra=D("ImageBitmap"),rb=D("HTMLImageElement"),Eb=D("HTMLVideoElement"),dc=Object.keys(wa).concat([Ja,Na,Ra,rb,Eb]),pb=[];pb[5121]=1;pb[5126]=4;pb[36193]=2;pb[5123]=2;pb[5125]=4;var Oa=[];Oa[32854]=2;Oa[32855]=2;Oa[36194]=2;Oa[34041]=4;Oa[33776]=.5;Oa[33777]=.5;Oa[33778]=1;Oa[33779]=1;Oa[35986]=.5;
Oa[35987]=1;Oa[34798]=1;Oa[35840]=.5;Oa[35841]=.25;Oa[35842]=.5;Oa[35843]=.25;Oa[36196]=.5;var Sa=[];Sa[32854]=2;Sa[32855]=2;Sa[36194]=2;Sa[33189]=2;Sa[36168]=1;Sa[34041]=4;Sa[35907]=4;Sa[34836]=16;Sa[34842]=8;Sa[34843]=6;var Ya=function(b,a,c,d,f){function e(b){this.id=l++;this.refCount=1;this.renderbuffer=b;this.format=32854;this.height=this.width=0;f.profile&&(this.stats={size:0})}function g(a){var c=a.renderbuffer;b.bindRenderbuffer(36161,null);b.deleteRenderbuffer(c);a.renderbuffer=null;a.refCount=
0;delete r[a.id];d.renderbufferCount--}var k={rgba4:32854,rgb565:36194,"rgb5 a1":32855,depth:33189,stencil:36168,"depth stencil":34041};a.ext_srgb&&(k.srgba=35907);a.ext_color_buffer_half_float&&(k.rgba16f=34842,k.rgb16f=34843);a.webgl_color_buffer_float&&(k.rgba32f=34836);var h=[];Object.keys(k).forEach(function(b){h[k[b]]=b});var l=0,r={};e.prototype.decRef=function(){0>=--this.refCount&&g(this)};f.profile&&(d.getTotalRenderbufferSize=function(){var b=0;Object.keys(r).forEach(function(a){b+=r[a].stats.size});
return b});return{create:function(a,c){function g(a,c){var d=0,e=0,r=32854;"object"===typeof a&&a?("shape"in a?(e=a.shape,d=e[0]|0,e=e[1]|0):("radius"in a&&(d=e=a.radius|0),"width"in a&&(d=a.width|0),"height"in a&&(e=a.height|0)),"format"in a&&(r=k[a.format])):"number"===typeof a?(d=a|0,e="number"===typeof c?c|0:d):a||(d=e=1);if(d!==l.width||e!==l.height||r!==l.format)return g.width=l.width=d,g.height=l.height=e,l.format=r,b.bindRenderbuffer(36161,l.renderbuffer),b.renderbufferStorage(36161,r,d,e),
f.profile&&(l.stats.size=Sa[l.format]*l.width*l.height),g.format=h[l.format],g}var l=new e(b.createRenderbuffer());r[l.id]=l;d.renderbufferCount++;g(a,c);g.resize=function(a,c){a|=0;c=c|0||a;if(a===l.width&&c===l.height)return g;g.width=l.width=a;g.height=l.height=c;b.bindRenderbuffer(36161,l.renderbuffer);b.renderbufferStorage(36161,l.format,a,c);f.profile&&(l.stats.size=Sa[l.format]*l.width*l.height);return g};g._reglType="renderbuffer";g._renderbuffer=l;f.profile&&(g.stats=l.stats);g.destroy=function(){l.decRef()};
return g},clear:function(){ia(r).forEach(g)},restore:function(){ia(r).forEach(function(a){a.renderbuffer=b.createRenderbuffer();b.bindRenderbuffer(36161,a.renderbuffer);b.renderbufferStorage(36161,a.format,a.width,a.height)});b.bindRenderbuffer(36161,null)}}},ja=[];ja[6408]=4;ja[6407]=3;var la=[];la[5121]=1;la[5126]=4;la[36193]=2;var gb=["x","y","z","w"],ma="blend.func blend.equation stencil.func stencil.opFront stencil.opBack sample.coverage viewport scissor.box polygonOffset.offset".split(" "),
Yb={0:0,1:1,zero:0,one:1,"src color":768,"one minus src color":769,"src alpha":770,"one minus src alpha":771,"dst color":774,"one minus dst color":775,"dst alpha":772,"one minus dst alpha":773,"constant color":32769,"one minus constant color":32770,"constant alpha":32771,"one minus constant alpha":32772,"src alpha saturate":776},db={never:512,less:513,"\x3c":513,equal:514,"\x3d":514,"\x3d\x3d":514,"\x3d\x3d\x3d":514,lequal:515,"\x3c\x3d":515,greater:516,"\x3e":516,notequal:517,"!\x3d":517,"!\x3d\x3d":517,
gequal:518,"\x3e\x3d":518,always:519},Lb={0:0,zero:0,keep:7680,replace:7681,increment:7682,decrement:7683,"increment wrap":34055,"decrement wrap":34056,invert:5386},fb={cw:2304,ccw:2305},nc=new Y(!1,!1,!1,function(){}),nb=function(b,a){function c(){this.endQueryIndex=this.startQueryIndex=-1;this.sum=0;this.stats=null}function d(b,a,d){var f=g.pop()||new c;f.startQueryIndex=b;f.endQueryIndex=a;f.sum=0;f.stats=d;k.push(f)}if(!a.ext_disjoint_timer_query)return null;var f=[],e=[],g=[],k=[],h=[],l=[];
return{beginQuery:function(b){var c=f.pop()||a.ext_disjoint_timer_query.createQueryEXT();a.ext_disjoint_timer_query.beginQueryEXT(35007,c);e.push(c);d(e.length-1,e.length,b)},endQuery:function(){a.ext_disjoint_timer_query.endQueryEXT(35007)},pushScopeStats:d,update:function(){var b;var c=e.length;if(0!==c){l.length=Math.max(l.length,c+1);h.length=Math.max(h.length,c+1);h[0]=0;var d=l[0]=0;for(b=c=0;b<e.length;++b){var r=e[b];a.ext_disjoint_timer_query.getQueryObjectEXT(r,34919)?(d+=a.ext_disjoint_timer_query.getQueryObjectEXT(r,
34918),f.push(r)):e[c++]=r;h[b+1]=d;l[b+1]=c}e.length=c;for(b=c=0;b<k.length;++b){d=k[b];var n=d.startQueryIndex;r=d.endQueryIndex;d.sum+=h[r]-h[n];n=l[n];r=l[r];r===n?(d.stats.gpuTime+=d.sum/1E6,g.push(d)):(d.startQueryIndex=n,d.endQueryIndex=r,k[c++]=d)}k.length=c}},getNumPendingQueries:function(){return e.length},clear:function(){f.push.apply(f,e);for(var b=0;b<f.length;b++)a.ext_disjoint_timer_query.deleteQueryEXT(f[b]);e.length=0;f.length=0},restore:function(){e.length=0;f.length=0}}};return function(b){function a(){if(0===
Y.length)B&&B.update(),ka=null;else{ka=ua.next(a);u();for(var b=Y.length-1;0<=b;--b){var c=Y[b];c&&c(D,null,0)}m.flush();B&&B.update()}}function c(){!ka&&0<Y.length&&(ka=ua.next(a))}function f(){ka&&(ua.cancel(a),ka=null)}function g(b){b.preventDefault();f();ea.forEach(function(b){b()})}function k(b){m.getError();w.restore();H.restore();F.restore();N.restore();P.restore();S.restore();B&&B.restore();ba.procs.refresh();c();U.forEach(function(b){b()})}function h(b){function a(b){var a={},c={};Object.keys(b).forEach(function(d){var f=
b[d];oa.isDynamic(f)?c[d]=oa.unbox(f,d):a[d]=f});return{dynamic:c,"static":a}}function c(b){for(;r.length<b;)r.push(null);return r}var d=a(b.context||{}),f=a(b.uniforms||{}),e=a(b.attributes||{}),g=a(function(b){function a(b){if(b in c){var a=c[b];delete c[b];Object.keys(a).forEach(function(d){c[b+"."+d]=a[d]})}}var c=ha({},b);delete c.uniforms;delete c.attributes;delete c.context;"stencil"in c&&c.stencil.op&&(c.stencil.opBack=c.stencil.opFront=c.stencil.op,delete c.stencil.op);a("blend");a("depth");
a("cull");a("stencil");a("polygonOffset");a("scissor");a("sample");return c}(b));b={gpuTime:0,cpuTime:0,count:0};d=ba.compile(g,e,f,d,b);var k=d.draw,h=d.batch,l=d.scope,r=[];return ha(function(b,a){var d;if("function"===typeof b)return l.call(this,null,b,0);if("function"===typeof a)if("number"===typeof b)for(d=0;d<b;++d)l.call(this,null,a,d);else if(Array.isArray(b))for(d=0;d<b.length;++d)l.call(this,b[d],a,d);else return l.call(this,b,a,0);else if("number"===typeof b){if(0<b)return h.call(this,
c(b|0),b|0)}else if(Array.isArray(b)){if(b.length)return h.call(this,b,b.length)}else return k.call(this,b)},{stats:b})}function l(b,a){b=0;ba.procs.poll();var c=a.color;c&&(m.clearColor(+c[0]||0,+c[1]||0,+c[2]||0,+c[3]||0),b|=16384);"depth"in a&&(m.clearDepth(+a.depth),b|=256);"stencil"in a&&(m.clearStencil(a.stencil|0),b|=1024);m.clear(b)}function r(b){Y.push(b);c();return{cancel:function(){function a(){var b=X(Y,a);Y[b]=Y[Y.length-1];--Y.length;0>=Y.length&&f()}var c=X(Y,b);Y[c]=a}}}function n(){var b=
ca.viewport,a=ca.scissor_box;b[0]=b[1]=a[0]=a[1]=0;D.viewportWidth=D.framebufferWidth=D.drawingBufferWidth=b[2]=a[2]=m.drawingBufferWidth;D.viewportHeight=D.framebufferHeight=D.drawingBufferHeight=b[3]=a[3]=m.drawingBufferHeight}function u(){D.tick+=1;D.time=v();n();ba.procs.poll()}function p(){n();ba.procs.refresh();B&&B.update()}function v(){return(Z()-E)/1E3}b=q(b);if(!b)return null;var m=b.gl,z=m.getContextAttributes();m.isContextLost();var w=d(m,b);if(!w)return null;var A=e(),y={bufferCount:0,
elementsCount:0,framebufferCount:0,shaderCount:0,textureCount:0,cubeCount:0,renderbufferCount:0,maxTextureUnits:0},J=w.extensions,B=nb(m,J),E=Z(),I=m.drawingBufferWidth,C=m.drawingBufferHeight,D={tick:0,time:0,viewportWidth:I,viewportHeight:C,framebufferWidth:I,framebufferHeight:C,drawingBufferWidth:I,drawingBufferHeight:C,pixelRatio:b.pixelRatio},K=sa(m,J);I=O(m,J,K,A);var F=x(m,y,b,I),G=t(m,J,F,y),H=R(m,A,y,b),N=L(m,J,K,function(){ba.procs.poll()},D,y,b),P=Ya(m,J,K,y,b),S=M(m,J,K,N,P,y),ba=na(m,
A,J,K,F,G,N,S,{},I,H,{elements:null,primitive:4,count:-1,offset:0,instances:-1},D,B,b);A=T(m,S,ba.procs.poll,D,z,J,K);var ca=ba.next,da=m.canvas,Y=[],ea=[],U=[],W=[b.onDestroy],ka=null;da&&(da.addEventListener("webglcontextlost",g,!1),da.addEventListener("webglcontextrestored",k,!1));var Aa=S.setFBO=h({framebuffer:oa.define.call(null,1,"framebuffer")});p();z=ha(h,{clear:function(b){if("framebuffer"in b)if(b.framebuffer&&"framebufferCube"===b.framebuffer_reglType)for(var a=0;6>a;++a)Aa(ha({framebuffer:b.framebuffer.faces[a]},
b),l);else Aa(b,l);else l(null,b)},prop:oa.define.bind(null,1),context:oa.define.bind(null,2),"this":oa.define.bind(null,3),draw:h({}),buffer:function(b){return F.create(b,34962,!1,!1)},elements:function(b){return G.create(b,!1)},texture:N.create2D,cube:N.createCube,renderbuffer:P.create,framebuffer:S.create,framebufferCube:S.createCube,attributes:z,frame:r,on:function(b,a){switch(b){case "frame":return r(a);case "lost":var c=ea;break;case "restore":c=U;break;case "destroy":c=W}c.push(a);return{cancel:function(){for(var b=
0;b<c.length;++b)if(c[b]===a){c[b]=c[c.length-1];c.pop();break}}}},limits:K,hasExtension:function(b){return 0<=K.extensions.indexOf(b.toLowerCase())},read:A,destroy:function(){Y.length=0;f();da&&(da.removeEventListener("webglcontextlost",g),da.removeEventListener("webglcontextrestored",k));H.clear();S.clear();P.clear();N.clear();G.clear();F.clear();B&&B.clear();W.forEach(function(b){b()})},_gl:m,_refresh:p,poll:function(){u();B&&B.update()},now:v,stats:y});b.onDone(null,z);return z}})},{}],487:[function(a,
t,m){var p="",g;t.exports=function(a,e){if("string"!==typeof a)throw new TypeError("expected a string");if(1===e)return a;if(2===e)return a+a;var h=a.length*e;if(g!==a||"undefined"===typeof g)g=a,p="";else if(p.length>=h)return p.substr(0,h);for(;h>p.length&&1<e;)e&1&&(p+=a),e>>=1,a+=a;p+=a;return p=p.substr(0,h)}},{}],488:[function(a,t,m){(function(a){t.exports=a.performance&&a.performance.now?function(){return performance.now()}:Date.now||function(){return+new Date}}).call(this,"undefined"!==typeof ja?
ja:"undefined"!==typeof self?self:"undefined"!==typeof window?window:{})},{}],489:[function(a,t,m){t.exports=function(a){for(var g=a.length,h=a[a.length-1],e=g,n=g-2;0<=n;--n){var b=h,l=a[n];h=b+l;b=h-b;if(l-=b)a[--e]=h,h=l}var u=0;for(n=e;n<g;++n)b=a[n],l=h,h=b+l,b=h-b,(l-=b)&&(a[u++]=l);a[u++]=h;a.length=u;return a}},{}],490:[function(a,t,m){function p(b,a){for(var c=Array(b.length-1),d=1;d<b.length;++d)for(var f=c[d-1]=Array(b.length-1),e=0,g=0;e<b.length;++e)e!==a&&(f[g++]=b[d][e]);return c}function g(b){if(1===
b.length)return b[0];if(2===b.length)return["sum(",b[0],",",b[1],")"].join("");var a=b.length>>1;return["sum(",g(b.slice(0,a)),",",g(b.slice(a)),")"].join("")}function h(b){if(2===b.length)return["sum(prod(",b[0][0],",",b[1][1],"),prod(-",b[0][1],",",b[1][0],"))"].join("");for(var a=[],c=0;c<b.length;++c)a.push(["scale(",h(p(b,c)),",",c&1?"-":"",b[0][c],")"].join(""));return g(a)}function e(a){for(var d=Function,c=Array(a),e=0;e<a;++e){c[e]=Array(a);for(var g=0;g<a;++g)c[e][g]=["m[",e,"][",g,"]"].join("")}return(new d("sum",
"scale","prod","compress",["function robustDeterminant",a,"(m){return compress(",h(c),")};return robustDeterminant",a].join("")))(b,l,n,u)}var n=a("two-product"),b=a("robust-sum"),l=a("robust-scale"),u=a("robust-compress"),q=[function(){return[0]},function(b){return[b[0][0]]}];(function(){for(;6>q.length;)q.push(e(q.length));for(var b=[],a=["function robustDeterminant(m){switch(m.length){"],c=0;6>c;++c)b.push("det"+c),a.push("case ",c,":return det",c,"(m);");a.push("}var det\x3dCACHE[m.length];if(!det)det\x3dCACHE[m.length]\x3dgen(m.length);return det(m);}return robustDeterminant");
b.push("CACHE","gen",a.join(""));b=Function.apply(void 0,b);t.exports=b.apply(void 0,q.concat([q,e]));for(c=0;c<q.length;++c)t.exports[c]=q[c]})()},{"robust-compress":489,"robust-scale":496,"robust-sum":499,"two-product":527}],491:[function(a,t,m){var p=a("two-product"),g=a("robust-sum");t.exports=function(a,e){for(var h=p(a[0],e[0]),b=1;b<a.length;++b)h=g(h,p(a[b],e[b]));return h}},{"robust-sum":499,"two-product":527}],492:[function(a,t,m){function p(b,a){for(var c=Array(b.length-1),d=1;d<b.length;++d)for(var f=
c[d-1]=Array(b.length-1),e=0,g=0;e<b.length;++e)e!==a&&(f[g++]=b[d][e]);return c}function g(b){if(1===b.length)return b[0];if(2===b.length)return["sum(",b[0],",",b[1],")"].join("");var a=b.length>>1;return["sum(",g(b.slice(0,a)),",",g(b.slice(a)),")"].join("")}function h(b,a){return"m"===b.charAt(0)?"w"===a.charAt(0)?(b=b.split("["),["w",a.substr(1),"m",b[0].substr(1)].join("")):["prod(",b,",",a,")"].join(""):h(a,b)}function e(b){if(2===b.length)return[["diff(",h(b[0][0],b[1][1]),",",h(b[1][0],b[0][1]),
")"].join("")];for(var a=[],c=0;c<b.length;++c)a.push(["scale(",g(e(p(b,c))),",",c&1?"-":"",b[0][c],")"].join(""));return a}function n(b,a){for(var c=[],d=0;d<a-2;++d)c.push(["prod(m",b,"[",d,"],m",b,"[",d,"])"].join(""));return g(c)}function b(b){for(var a=[],c=[],k=Array(b),h=0;h<b;++h){k[h]=Array(b);for(var l=0;l<b;++l)k[h][l]=["m",l,"[",b-h-2,"]"].join("")}for(h=0;h<b;++h)k[0][h]="1",k[b-1][h]="w"+h;for(h=0;h<b;++h)0===(h&1)?a.push.apply(a,e(p(k,h))):c.push.apply(c,e(p(k,h)));a=g(a);c=g(c);k=
"exactInSphere"+b;l=[];for(h=0;h<b;++h)l.push("m"+h);l=["function ",k,"(",l.join(),"){"];for(h=0;h<b;++h){l.push("var w",h,"\x3d",n(h,b),";");for(var m=0;m<b;++m)m!==h&&l.push("var w",h,"m",m,"\x3dscale(w",h,",m",m,"[0]);")}l.push("var p\x3d",a,",n\x3d",c,",d\x3ddiff(p,n);return d[d.length-1];}return ",k);return(new Function("sum","diff","prod","scale",l.join("")))(q,d,u,f)}function l(a){var d=c[a.length];d||(d=c[a.length]=b(a.length));return d.apply(void 0,a)}var u=a("two-product"),q=a("robust-sum"),
d=a("robust-subtract"),f=a("robust-scale"),c=[function(){return 0},function(){return 0},function(){return 0}];(function(){for(;6>=c.length;)c.push(b(c.length));for(var a=[],d=["slow"],f=0;6>=f;++f)a.push("a"+f),d.push("o"+f);var e=["function testInSphere(",a.join(),"){switch(arguments.length){case 0:case 1:return 0;"];for(f=2;6>=f;++f)e.push("case ",f,":return o",f,"(",a.slice(0,f).join(),");");e.push("}var s\x3dnew Array(arguments.length);for(var i\x3d0;i\x3carguments.length;++i){s[i]\x3darguments[i]};return slow(s);}return testInSphere");
d.push(e.join(""));a=Function.apply(void 0,d);t.exports=a.apply(void 0,[l].concat(c));for(f=0;6>=f;++f)t.exports[f]=c[f]})()},{"robust-scale":496,"robust-subtract":498,"robust-sum":499,"two-product":527}],493:[function(a,t,m){function p(a){for(var e="robustLinearSolve"+a+"d",b=["function ",e,"(A,b){return ["],h=0;h<a;++h){b.push("det([");for(var u=0;u<a;++u){0<u&&b.push(",");b.push("[");for(var q=0;q<a;++q)0<q&&b.push(","),q===h?b.push("+b[",u,"]"):b.push("+A[",u,"][",q,"]");b.push("]")}b.push("]),")}b.push("det(A)]}return ",
e);e=new Function("det",b.join(""));return 6>a?e(g[a]):e(g)}var g=a("robust-determinant"),h=[function(){return[0]},function(a,g){return[[g[0]],[a[0][0]]]}];(function(){for(;6>h.length;)h.push(p(h.length));for(var a=[],g=["function dispatchLinearSolve(A,b){switch(A.length){"],b=0;6>b;++b)a.push("s"+b),g.push("case ",b,":return s",b,"(A,b);");g.push("}var s\x3dCACHE[A.length];if(!s)s\x3dCACHE[A.length]\x3dg(A.length);return s(A,b)}return dispatchLinearSolve");a.push("CACHE","g",g.join(""));a=Function.apply(void 0,
a);t.exports=a.apply(void 0,h.concat([h,p]));for(b=0;6>b;++b)t.exports[b]=h[b]})()},{"robust-determinant":490}],494:[function(a,t,m){function p(b,a){for(var c=Array(b.length-1),d=1;d<b.length;++d)for(var f=c[d-1]=Array(b.length-1),e=0,g=0;e<b.length;++e)e!==a&&(f[g++]=b[d][e]);return c}function g(b){if(1===b.length)return b[0];if(2===b.length)return["sum(",b[0],",",b[1],")"].join("");var a=b.length>>1;return["sum(",g(b.slice(0,a)),",",g(b.slice(a)),")"].join("")}function h(b){if(2===b.length)return[["sum(prod(",
b[0][0],",",b[1][1],"),prod(-",b[0][1],",",b[1][0],"))"].join("")];for(var a=[],c=0;c<b.length;++c)a.push(["scale(",g(h(p(b,c))),",",c&1?"-":"",b[0][c],")"].join(""));return a}function e(a){for(var c=[],d=[],f=Array(a),e=0;e<a;++e){f[e]=Array(a);for(var k=0;k<a;++k)f[e][k]=["m",k,"[",a-e-1,"]"].join("")}e=[];for(k=0;k<a;++k)0===(k&1)?c.push.apply(c,h(p(f,k))):d.push.apply(d,h(p(f,k))),e.push("m"+k);c=g(c);d=g(d);a="orientation"+a+"Exact";a=["function ",a,"(",e.join(),"){var p\x3d",c,",n\x3d",d,",d\x3dsub(p,n);return d[d.length-1];};return ",
a].join("");return(new Function("sum","prod","scale","sub",a))(l,b,u,q)}function n(b){var a=c[b.length];a||(a=c[b.length]=e(b.length));return a.apply(void 0,b)}var b=a("two-product"),l=a("robust-sum"),u=a("robust-scale"),q=a("robust-subtract"),d=e(3),f=e(4),c=[function(){return 0},function(){return 0},function(b,a){return a[0]-b[0]},function(b,a,c){var f=(b[1]-c[1])*(a[0]-c[0]),e=(b[0]-c[0])*(a[1]-c[1]),g=f-e;if(0<f){if(0>=e)return g;f+=e}else if(0>f){if(0<=e)return g;f=-(f+e)}else return g;f*=3.3306690738754716E-16;
return g>=f||g<=-f?g:d(b,a,c)},function(b,a,c,d){var e=b[0]-d[0],g=a[0]-d[0],k=c[0]-d[0],h=b[1]-d[1],l=a[1]-d[1],r=c[1]-d[1],n=b[2]-d[2],q=a[2]-d[2],u=c[2]-d[2],p=g*r,v=k*l;k*=h;r*=e;e*=l;h*=g;g=n*(p-v)+q*(k-r)+u*(e-h);n=7.771561172376103E-16*((Math.abs(p)+Math.abs(v))*Math.abs(n)+(Math.abs(k)+Math.abs(r))*Math.abs(q)+(Math.abs(e)+Math.abs(h))*Math.abs(u));return g>n||-g>n?g:f(b,a,c,d)}];(function(){for(;5>=c.length;)c.push(e(c.length));for(var b=[],a=["slow"],d=0;5>=d;++d)b.push("a"+d),a.push("o"+
d);var f=["function getOrientation(",b.join(),"){switch(arguments.length){case 0:case 1:return 0;"];for(d=2;5>=d;++d)f.push("case ",d,":return o",d,"(",b.slice(0,d).join(),");");f.push("}var s\x3dnew Array(arguments.length);for(var i\x3d0;i\x3carguments.length;++i){s[i]\x3darguments[i]};return slow(s);}return getOrientation");a.push(f.join(""));b=Function.apply(void 0,a);t.exports=b.apply(void 0,[n].concat(c));for(d=0;5>=d;++d)t.exports[d]=c[d]})()},{"robust-scale":496,"robust-subtract":498,"robust-sum":499,
"two-product":527}],495:[function(a,t,m){var p=a("robust-sum"),g=a("robust-scale");t.exports=function(a,e){if(1===a.length)return g(e,a[0]);if(1===e.length)return g(a,e[0]);if(0===a.length||0===e.length)return[0];var h=[0];if(a.length<e.length)for(var b=0;b<a.length;++b)h=p(h,g(e,a[b]));else for(b=0;b<e.length;++b)h=p(h,g(a,e[b]));return h}},{"robust-scale":496,"robust-sum":499}],496:[function(a,t,m){var p=a("two-product"),g=a("two-sum");t.exports=function(a,e){var h=a.length;if(1===h)return a=p(a[0],
e),a[0]?a:[a[1]];var b=Array(2*h),l=[.1,.1],u=[.1,.1],q=0;p(a[0],e,l);l[0]&&(b[q++]=l[0]);for(var d=1;d<h;++d){p(a[d],e,u);g(l[1],u[0],l);l[0]&&(b[q++]=l[0]);var f=u[1],c=l[1],k=f+c;f=c-(k-f);l[1]=k;f&&(b[q++]=f)}l[1]&&(b[q++]=l[1]);0===q&&(b[q++]=0);b.length=q;return b}},{"two-product":527,"two-sum":528}],497:[function(a,t,m){t.exports=function(a,h,e,n){var b=p(a,e,n),g=p(h,e,n);if(0<b&&0<g||0>b&&0>g)return!1;var u=p(e,a,h),q=p(n,a,h);if(0<u&&0<q||0>u&&0>q)return!1;if(0===b&&0===g&&0===u&&0===q){a:{for(b=
0;2>b;++b){g=a[b];u=h[b];q=Math.max(g,u);var d=e[b],f=n[b],c=Math.min(d,f);if(Math.max(d,f)<Math.min(g,u)||q<c){a=!1;break a}}a=!0}return a}return!0};var p=a("robust-orientation")[3]},{"robust-orientation":494}],498:[function(a,t,m){t.exports=function(a,g){var h=a.length|0,e=g.length|0;if(1===h&&1===e)return a=a[0],h=-g[0],g=a+h,e=g-a,g=(a=a-(g-e)+(h-e))?[a,g]:[g],g;var n=Array(h+e),b=0,l=0,u=0,q=Math.abs,d=a[l],f=q(d),c=-g[u],k=q(c);if(f<k){var r=d;l+=1;l<h&&(d=a[l],f=q(d))}else r=c,u+=1,u<e&&(c=
-g[u],k=q(c));if(l<h&&f<k||u>=e){var p=d;l+=1;l<h&&(d=a[l],f=q(d))}else p=c,u+=1,u<e&&(c=-g[u],k=q(c));var m=p+r;r-=m-p;for(var A=m,y;l<h&&u<e;)f<k?(p=d,l+=1,l<h&&(d=a[l],f=q(d))):(p=c,u+=1,u<e&&(c=-g[u],k=q(c))),m=p+r,p=m-p,(p=r-p)&&(n[b++]=p),p=A+m,y=p-A,r=p-y,m-=y,A-=r,r=A+m,A=p;for(;l<h;)p=d,m=p+r,p=m-p,(p=r-p)&&(n[b++]=p),p=A+m,y=p-A,r=p-y,m-=y,A-=r,r=A+m,A=p,l+=1,l<h&&(d=a[l]);for(;u<e;)p=c,m=p+r,p=m-p,(p=r-p)&&(n[b++]=p),p=A+m,y=p-A,r=p-y,m-=y,A-=r,r=A+m,A=p,u+=1,u<e&&(c=-g[u]);r&&(n[b++]=
r);A&&(n[b++]=A);b||(n[b++]=0);n.length=b;return n}},{}],499:[function(a,t,m){t.exports=function(a,g){var h=a.length|0,e=g.length|0;if(1===h&&1===e)return a=a[0],h=g[0],g=a+h,e=g-a,g=(a=a-(g-e)+(h-e))?[a,g]:[g],g;var n=Array(h+e),b=0,l=0,u=0,q=Math.abs,d=a[l],f=q(d),c=g[u],k=q(c);if(f<k){var r=d;l+=1;l<h&&(d=a[l],f=q(d))}else r=c,u+=1,u<e&&(c=g[u],k=q(c));if(l<h&&f<k||u>=e){var p=d;l+=1;l<h&&(d=a[l],f=q(d))}else p=c,u+=1,u<e&&(c=g[u],k=q(c));var m=p+r;r-=m-p;for(var A=m,y;l<h&&u<e;)f<k?(p=d,l+=1,
l<h&&(d=a[l],f=q(d))):(p=c,u+=1,u<e&&(c=g[u],k=q(c))),m=p+r,p=m-p,(p=r-p)&&(n[b++]=p),p=A+m,y=p-A,r=p-y,m-=y,A-=r,r=A+m,A=p;for(;l<h;)p=d,m=p+r,p=m-p,(p=r-p)&&(n[b++]=p),p=A+m,y=p-A,r=p-y,m-=y,A-=r,r=A+m,A=p,l+=1,l<h&&(d=a[l]);for(;u<e;)p=c,m=p+r,p=m-p,(p=r-p)&&(n[b++]=p),p=A+m,y=p-A,r=p-y,m-=y,A-=r,r=A+m,A=p,u+=1,u<e&&(c=g[u]);r&&(n[b++]=r);A&&(n[b++]=A);b||(n[b++]=0);n.length=b;return n}},{}],500:[function(a,t,m){t.exports=function(a){return 0>a?-1:0<a?1:0}},{}],501:[function(a,t,m){t.exports=function(a){return g(p(a))};
var p=a("boundary-cells"),g=a("reduce-simplicial-complex")},{"boundary-cells":85,"reduce-simplicial-complex":481}],502:[function(a,t,m){t.exports=function(a,b,l,u){l=l||0;if("undefined"===typeof u){for(var n=a.length,d=u=0;d<n;++d)u=Math.max(u,a[d].length)|0;--u}if(0===a.length||1>u)return{cells:[],vertexIds:[],vertexWeights:[]};d=+l;var f=b.length;n=g.mallocUint8(f);for(var c=0;c<f;++c)n[c]=b[c]<d|0;var k=u,r=a.length;d=g.mallocUint32(2*(k*(k+1)/2*r|0));for(c=f=0;c<r;++c){var v=a[c];k=v.length;for(var m=
0;m<k;++m)for(var A=0;A<m;++A){var y=v[A],w=v[m];d[f++]=Math.min(y,w)|0;d[f++]=Math.max(y,w)|0}}h(p(d,[f/2|0,2]));for(c=k=2;c<f;c+=2)if(d[c-2]!==d[c]||d[c-1]!==d[c+1])d[k++]=d[c],d[k++]=d[c+1];d=p(d,[k/2|0,2]);l=+l;f=d.data;c=d.shape[0];k=g.mallocDouble(c);for(v=r=0;v<c;++v)m=f[2*v],A=f[2*v+1],n[m]!==n[A]&&(y=b[m],w=b[A],f[2*r]=m,f[2*r+1]=A,k[r++]=(w-l)/(w-y));d.shape[0]=r;l=p(k,[r]);f=b.length|0;b=g.mallocInt32(2*f);c=d.shape[0];k=d.data;for(v=r=b[0]=0;v<c;++v)if(m=k[2*v],m!==r){for(b[2*r+1]=v;++r<
m;)b[2*r]=v,b[2*r+1]=v;b[2*r]=v}for(b[2*r+1]=c;++r<f;)b[2*r]=b[2*r+1]=c;a=e(u)(a,d.data,b,n);f=d.shape[0]|0;c=d.data;u=Array(f);for(k=0;k<f;++k)u[k]=[c[2*k],c[2*k+1]];f=[].slice.call(l.data,0,l.shape[0]);g.free(n);g.free(d.data);g.free(l.data);g.free(b);return{cells:a,vertexIds:u,vertexWeights:f}};var p=a("ndarray"),g=a("typedarray-pool"),h=a("ndarray-sort"),e=a("./lib/codegen")},{"./lib/codegen":503,ndarray:442,"ndarray-sort":440,"typedarray-pool":529}],503:[function(a,t,m){t.exports=function(a){var e=
h[a];if(!e){e=h;var b=Array(a+1);b[0]=[[]];for(var l=1;l<=a;++l)for(var u=b[l]=g(l),q=0;q<u.length;++q);var d=["function B(C,E,i,j){","var a\x3dMath.min(i,j)|0,b\x3dMath.max(i,j)|0,l\x3dC[2*a],h\x3dC[2*a+1];","while(l\x3ch){","var m\x3d(l+h)\x3e\x3e1,v\x3dE[2*m+1];","if(v\x3d\x3d\x3db){return m}","if(b\x3cv){h\x3dm}else{l\x3dm+1}","}","return l;","};","function getContour",a,"d(F,E,C,S){","var n\x3dF.length,R\x3d[];","for(var i\x3d0;i\x3cn;++i){var c\x3dF[i],l\x3dc.length;"];for(l=a+1;1<l;--l){l<
a+1&&d.push("else ");d.push("if(l\x3d\x3d\x3d",l,"){");u=[];for(q=0;q<l;++q)u.push("(S[c["+q+"]]\x3c\x3c"+q+")");d.push("var M\x3d",u.join("+"),";if(M\x3d\x3d\x3d0||M\x3d\x3d\x3d",(1<<l)-1,"){continue}switch(M){");u=b[l-1];for(q=0;q<u.length;++q){d.push("case ",q,":");var f=u[q];if(!(0>=f.length)){d.push("R.push(");for(var c=0;c<f.length;++c){var k=f[c];0<c&&d.push(",");d.push("[");for(var r=0;r<k.length;++r){var v=k[r];0<r&&d.push(",");d.push("B(C,E,c[",v[0],"],c[",v[1],"])")}d.push("]")}d.push(");")}d.push("break;")}d.push("}}")}d.push("}return R;};return getContour",
a,"d");b=(new Function("pool",d.join("")))(p);e=e[a]=b}return e};var p=a("typedarray-pool"),g=a("marching-simplex-table"),h={}},{"marching-simplex-table":419,"typedarray-pool":529}],504:[function(a,t,m){function p(b,a){var c=b.length,d=b.length-a.length,f=Math.min;if(d)return d;switch(c){case 0:return 0;case 1:return b[0]-a[0];case 2:return(c=b[0]+b[1]-a[0]-a[1])?c:f(b[0],b[1])-f(a[0],a[1]);case 3:d=b[0]+b[1];var e=a[0]+a[1];if(c=d+b[2]-(e+a[2]))return c;var g=f(b[0],b[1]),h=f(a[0],a[1]);return(c=
f(g,b[2])-f(h,a[2]))?c:f(g+b[2],d)-f(h+a[2],e);default:b=b.slice(0);b.sort();a=a.slice(0);a.sort();for(f=0;f<c;++f)if(d=b[f]-a[f])return d;return 0}}function g(b,a){return p(b[0],a[0])}function h(b,a){if(a){for(var c=b.length,d=Array(c),f=0;f<c;++f)d[f]=[b[f],a[f]];d.sort(g);for(f=0;f<c;++f)b[f]=d[f][0],a[f]=d[f][1]}else b.sort(p);return b}function e(b){if(0===b.length)return[];for(var a=1,c=b.length,d=1;d<c;++d){var e=b[d];p(e,b[d-1])&&(d===a?a++:b[a++]=e)}b.length=a;return b}function n(b,a){for(var c=
0,d=b.length-1,f=-1;c<=d;){var e=c+d>>1,g=p(b[e],a);0>=g?(0===g&&(f=e),c=e+1):0<g&&(d=e-1)}return f}function b(b,a){for(var c=Array(b.length),d=0,f=c.length;d<f;++d)c[d]=[];f=[];d=0;for(var e=a.length;d<e;++d)for(var g=a[d],h=g.length,l=1,q=1<<h;l<q;++l){f.length=u.popCount(l);for(var m=0,t=0;t<h;++t)l&1<<t&&(f[m++]=g[t]);m=n(b,f);if(!(0>m))for(;!(c[m++].push(d),m>=b.length||0!==p(b[m],f)););}return c}function l(b,a){if(0>a)return[];for(var c=[],d=(1<<a+1)-1,f=0;f<b.length;++f)for(var e=b[f],g=d;g<
1<<e.length;g=u.nextCombination(g)){for(var l=Array(a+1),n=0,q=0;q<e.length;++q)g&1<<q&&(l[n++]=e[q]);c.push(l)}return h(c)}"use restrict";var u=a("bit-twiddle"),q=a("union-find");m.dimension=function(b){for(var a=0,c=Math.max,d=0,e=b.length;d<e;++d)a=c(a,b[d].length);return a-1};m.countVertices=function(b){for(var a=-1,c=Math.max,d=0,e=b.length;d<e;++d)for(var g=b[d],h=0,l=g.length;h<l;++h)a=c(a,g[h]);return a+1};m.cloneCells=function(b){for(var a=Array(b.length),c=0,d=b.length;c<d;++c)a[c]=b[c].slice(0);
return a};m.compareCells=p;m.normalize=h;m.unique=e;m.findCell=n;m.incidence=b;m.dual=function(a,f){if(!f)return b(e(l(a,0)),a,0);for(var c=Array(f),d=0;d<f;++d)c[d]=[];d=0;for(f=a.length;d<f;++d)for(var g=a[d],h=0,n=g.length;h<n;++h)c[g[h]].push(d);return c};m.explode=function(b){for(var a=[],c=0,d=b.length;c<d;++c)for(var e=b[c],g=e.length|0,l=1,n=1<<g;l<n;++l){for(var q=[],u=0;u<g;++u)l>>>u&1&&q.push(e[u]);a.push(q)}return h(a)};m.skeleton=l;m.boundary=function(b){for(var a=[],c=0,d=b.length;c<
d;++c)for(var e=b[c],g=0,l=e.length;g<l;++g){for(var n=Array(e.length-1),q=0,u=0;q<l;++q)q!==g&&(n[u++]=e[q]);a.push(n)}return h(a)};m.connectedComponents=function(b,a){if(a){a=new q(a);for(var c=0;c<b.length;++c)for(var d=b[c],f=0;f<d.length;++f)for(var g=f+1;g<d.length;++g)a.link(d[f],d[g]);d=[];f=a.ranks;for(c=0;c<f.length;++c)f[c]=-1;for(c=0;c<b.length;++c)g=a.find(b[c][0]),0>f[g]?(f[g]=d.length,d.push([b[c].slice(0)])):d[f[g]].push(b[c].slice(0));return d}a=e(h(l(b,0)));c=new q(a.length);for(d=
0;d<b.length;++d)for(f=b[d],g=0;g<f.length;++g)for(var u=n(a,[f[g]]),p=g+1;p<f.length;++p)c.link(u,n(a,[f[p]]));f=[];g=c.ranks;for(d=0;d<g.length;++d)g[d]=-1;for(d=0;d<b.length;++d)u=c.find(n(a,[b[d][0]])),0>g[u]?(g[u]=f.length,f.push([b[d].slice(0)])):f[g[u]].push(b[d].slice(0));return f}},{"bit-twiddle":82,"union-find":530}],505:[function(a,t,m){arguments[4][82][0].apply(m,arguments)},{dup:82}],506:[function(a,t,m){arguments[4][504][0].apply(m,arguments)},{"bit-twiddle":505,dup:504,"union-find":507}],
507:[function(a,t,m){function p(a){this.roots=Array(a);this.ranks=Array(a);for(var g=0;g<a;++g)this.roots[g]=g,this.ranks[g]=0}"use restrict";t.exports=p;p.prototype.length=function(){return this.roots.length};p.prototype.makeSet=function(){var a=this.roots.length;this.roots.push(a);this.ranks.push(0);return a};p.prototype.find=function(a){for(var g=this.roots;g[a]!==a;){var e=g[a];g[a]=g[e];a=e}return a};p.prototype.link=function(a,h){a=this.find(a);h=this.find(h);if(a!==h){var e=this.ranks,g=this.roots,
b=e[a],l=e[h];b<l?g[a]=h:l<b?g[h]=a:(g[h]=a,++e[a])}}},{}],508:[function(a,t,m){t.exports=function(a,e,n){function b(b){if(w[b])return Infinity;var a=m[b],c=A[b];if(0>a||0>c)return Infinity;a=e[a];c=e[c];return Math.abs(p(e[b],a,c))/Math.sqrt(Math.pow(a[0]-c[0],2)+Math.pow(a[1]-c[1],2))}function h(b,a){var c=C[b],d=C[a];C[b]=d;C[a]=c;D[c]=a;D[d]=b}function u(b){for(var a=y[C[b]];;){var c=a,d=2*b+1,f=2*(b+1),e=b;if(d<G){var g=y[C[d]];g<c&&(e=d,c=g)}f<G&&y[C[f]]<c&&(e=f);if(e===b)return b;h(b,e);b=
e}}function q(b){for(var a=y[C[b]];0<b;){var c=b&1?b-1>>1:(b>>1)-1;if(0<=c&&a<y[C[c]])h(b,c),b=c;else return b}}function d(){if(0<G){var b=C[0];h(0,G-1);--G;u(0);return b}return-1}function f(b,a){var c=C[b];if(y[c]===a)return b;y[c]=-Infinity;q(b);d();y[c]=a;G+=1;return q(G-1)}function c(a){if(!w[a]){w[a]=!0;var c=m[a];a=A[a];0<=m[a]&&(m[a]=c);0<=A[c]&&(A[c]=a);0<=D[c]&&f(D[c],b(c));0<=D[a]&&f(D[a],b(a))}}function k(b,a){if(0>b[a])return a;var c=a,d=a;do{var f=b[d];if(!w[d]||0>f||f===d)break;d=f;
f=b[d];if(!w[d]||0>f||f===d)break;d=f;c=b[c]}while(c!==d);for(;a!==d;a=b[a])b[a]=d;return d}for(var r=e.length,v=a.length,m=Array(r),A=Array(r),y=Array(r),w=Array(r),x=0;x<r;++x)m[x]=A[x]=-1,y[x]=Infinity,w[x]=!1;for(x=0;x<v;++x){var t=a[x];if(2!==t.length)throw Error("Input must be a graph");var B=t[1];t=t[0];A[t]=-1!==A[t]?-2:B;m[B]=-1!==m[B]?-2:t}var C=[],D=Array(r);for(x=0;x<r;++x)Infinity>(y[x]=b(x))?(D[x]=C.length,C.push(x)):D[x]=-1;var G=C.length;for(x=G>>1;0<=x;--x)u(x);for(;;){x=d();if(0>
x||y[x]>n)break;c(x)}n=[];for(x=0;x<r;++x)w[x]||(D[x]=n.length,n.push(e[x].slice()));var H=[];a.forEach(function(b){var a=k(m,b[0]);b=k(A,b[1]);0<=a&&0<=b&&a!==b&&(a=D[a],b=D[b],a!==b&&H.push([a,b]))});g.unique(g.normalize(H));return{positions:n,edges:H}};var p=a("robust-orientation"),g=a("simplicial-complex")},{"robust-orientation":494,"simplicial-complex":506}],509:[function(a,t,m){function p(a,e){if(e[0][0]<e[1][0]){var h=e[0];e=e[1]}else if(e[0][0]>e[1][0])h=e[1],e=e[0];else{h=Math.min(a[0][1],
a[1][1]);a=Math.max(a[0][1],a[1][1]);var b=Math.min(e[0][1],e[1][1]);e=Math.max(e[0][1],e[1][1]);return a<b?a-b:h>e?h-e:a-e}a[0][1]<a[1][1]?(b=a[0],a=a[1]):(b=a[1],a=a[0]);return(b=g(e,h,b))?b:(b=g(e,h,a))?b:a-e}t.exports=function(a,e){if(e[0][0]<e[1][0]){var h=e[0];var b=e[1]}else if(e[0][0]>e[1][0])h=e[1],b=e[0];else return p(e,a);if(a[0][0]<a[1][0])e=a[0],a=a[1];else if(a[0][0]>a[1][0])e=a[1],a=a[0];else return-p(a,e);var l=g(h,b,a),u=g(h,b,e);if(0>l){if(0>=u)return l}else if(0<l){if(0<=u)return l}else if(u)return u;
l=g(a,e,b);u=g(a,e,h);if(0>l){if(0>=u)return l}else if(0<l){if(0<=u)return l}else if(u)return u;return b[0]-a[0]};var g=a("robust-orientation")},{"robust-orientation":494}],510:[function(a,t,m){function p(b,a,c){this.slabs=b;this.coordinates=a;this.horizontal=c}function g(b,a){return b.y-a}function h(b,a){for(var c=null;b;){var d=b.key;if(d[0][0]<d[1][0]){var f=d[0];var e=d[1]}else f=d[1],e=d[0];f=u(f,e,a);if(0>f)b=b.left;else if(0<f)if(a[0]!==d[1][0])c=b,b=b.right;else{if(d=h(b.right,a))return d;
b=b.left}else{if(a[0]!==d[1][0])return b;if(d=h(b.right,a))return d;b=b.left}}return c}function e(b,a,c,e){this.y=b;this.index=a;this.start=c;this.closed=e}function n(b,a,c,e){this.x=b;this.segment=a;this.create=c;this.index=e}t.exports=function(b){for(var a=b.length,c=2*a,d=Array(c),g=0;g<a;++g){var h=b[g],u=h[0][0]<h[1][0];d[2*g]=new n(h[0][0],h,u,g);d[2*g+1]=new n(h[1][0],h,!u,g)}d.sort(function(b,a){var c=b.x-a.x;return c?c:(c=b.create-a.create)?c:Math.min(b.segment[0][1],b.segment[1][1])-Math.min(a.segment[0][1],
a.segment[1][1])});b=l(q);a=[];h=[];u=[];for(g=0;g<c;){for(var m=d[g].x,y=[];g<c;){var w=d[g];if(w.x!==m)break;g+=1;w.segment[0][0]===w.x&&w.segment[1][0]===w.x?w.create&&(w.segment[0][1]<w.segment[1][1]?(y.push(new e(w.segment[0][1],w.index,!0,!0)),y.push(new e(w.segment[1][1],w.index,!1,!1))):(y.push(new e(w.segment[1][1],w.index,!0,!1)),y.push(new e(w.segment[0][1],w.index,!1,!0)))):b=w.create?b.insert(w.segment,w.index):b.remove(w.segment)}a.push(b.root);h.push(m);u.push(y)}return new p(a,h,u)};
var b=a("binary-search-bounds"),l=a("functional-red-black-tree"),u=a("robust-orientation"),q=a("./lib/order-segments");p.prototype.castUp=function(a){var d=b.le(this.coordinates,a[0]);if(0>d)return-1;var c=h(this.slabs[d],a),e=-1;c&&(e=c.value);if(this.coordinates[d]===a[0]){var l=null;c&&(l=c.key);0<d&&(c=h(this.slabs[d-1],a))&&(l?0<q(c.key,l)&&(l=c.key,e=c.value):(e=c.value,l=c.key));c=this.horizontal[d];if(0<c.length){var n=b.ge(c,a[1],g);if(n<c.length){d=c[n];if(a[1]===d.y){if(d.closed)return d.index;
for(;n<c.length-1&&c[n+1].y===a[1];)if(n+=1,d=c[n],d.closed)return d.index;if(d.y===a[1]&&!d.start){n+=1;if(n>=c.length)return e;d=c[n]}}d.start?l?(a=u(l[0],l[1],[a[0],d.y]),l[0][0]>l[1][0]&&(a=-a),0<a&&(e=d.index)):e=d.index:d.y!==a[1]&&(e=d.index)}}}return e}},{"./lib/order-segments":509,"binary-search-bounds":81,"functional-red-black-tree":226,"robust-orientation":494}],511:[function(a,t,m){function p(a,b){a=e(h(a,b),[b[b.length-1]]);return a[a.length-1]}function g(a,b,e,g){b=-b/(g-b);0>b?b=0:
1<b&&(b=1);g=1-b;for(var h=a.length,d=Array(h),f=0;f<h;++f)d[f]=b*a[f]+g*e[f];return d}var h=a("robust-dot-product"),e=a("robust-sum");t.exports=function(a,b){for(var e=[],h=[],n=p(a[a.length-1],b),d=a[a.length-1],f,c=0;c<a.length;++c,d=f){f=a[c];var k=p(f,b);if(0>n&&0<k||0<n&&0>k)n=g(d,k,f,n),e.push(n),h.push(n.slice());0>k?h.push(f.slice()):0<k?e.push(f.slice()):(e.push(f.slice()),h.push(f.slice()));n=k}return{positive:e,negative:h}};t.exports.positive=function(a,b){for(var e=[],h=p(a[a.length-
1],b),n=a[a.length-1],d,f=0;f<a.length;++f,n=d){d=a[f];var c=p(d,b);(0>h&&0<c||0<h&&0>c)&&e.push(g(n,c,d,h));0<=c&&e.push(d.slice());h=c}return e};t.exports.negative=function(a,b){for(var e=[],h=p(a[a.length-1],b),n=a[a.length-1],d,f=0;f<a.length;++f,n=d){d=a[f];var c=p(d,b);(0>h&&0<c||0<h&&0>c)&&e.push(g(n,c,d,h));0>=c&&e.push(d.slice());h=c}return e}},{"robust-dot-product":491,"robust-sum":499}],512:[function(a,t,m){!function(){function a(g){var b=g;if(e[b])b=e[b];else{for(var l=b,n,q=[],d=0;l;){if(null!==
(n=h.text.exec(l)))q.push(n[0]);else if(null!==(n=h.modulo.exec(l)))q.push("%");else if(null!==(n=h.placeholder.exec(l))){if(n[2]){d|=1;var f=[],c=n[2],k;if(null!==(k=h.key.exec(c)))for(f.push(k[1]);""!==(c=c.substring(k[0].length));)if(null!==(k=h.key_access.exec(c)))f.push(k[1]);else if(null!==(k=h.index_access.exec(c)))f.push(k[1]);else throw new SyntaxError("[sprintf] failed to parse named argument key");else throw new SyntaxError("[sprintf] failed to parse named argument key");n[2]=f}else d|=
2;if(3===d)throw Error("[sprintf] mixing positional and named placeholders is not (yet) supported");q.push({placeholder:n[0],param_no:n[1],keys:n[2],sign:n[3],pad_char:n[4],align:n[5],width:n[6],precision:n[7],type:n[8]})}else throw new SyntaxError("[sprintf] unexpected placeholder");l=l.substring(n[0].length)}b=e[b]=q}l=arguments;n=1;q=b.length;f="";var r,p;for(c=0;c<q;c++)if("string"===typeof b[c])f+=b[c];else if("object"===typeof b[c]){k=b[c];if(k.keys)for(d=l[n],r=0;r<k.keys.length;r++){if(void 0==
d)throw Error(a('[sprintf] Cannot access property "%s" of undefined value "%s"',k.keys[r],k.keys[r-1]));d=d[k.keys[r]]}else d=k.param_no?l[k.param_no]:l[n++];h.not_type.test(k.type)&&h.not_primitive.test(k.type)&&d instanceof Function&&(d=d());if(h.numeric_arg.test(k.type)&&"number"!==typeof d&&isNaN(d))throw new TypeError(a("[sprintf] expecting number but found %T",d));h.number.test(k.type)&&(p=0<=d);switch(k.type){case "b":d=parseInt(d,10).toString(2);break;case "c":d=String.fromCharCode(parseInt(d,
10));break;case "d":case "i":d=parseInt(d,10);break;case "j":d=JSON.stringify(d,null,k.width?parseInt(k.width):0);break;case "e":d=k.precision?parseFloat(d).toExponential(k.precision):parseFloat(d).toExponential();break;case "f":d=k.precision?parseFloat(d).toFixed(k.precision):parseFloat(d);break;case "g":d=k.precision?String(Number(d.toPrecision(k.precision))):parseFloat(d);break;case "o":d=(parseInt(d,10)>>>0).toString(8);break;case "s":d=String(d);d=k.precision?d.substring(0,k.precision):d;break;
case "t":d=String(!!d);d=k.precision?d.substring(0,k.precision):d;break;case "T":d=Object.prototype.toString.call(d).slice(8,-1).toLowerCase();d=k.precision?d.substring(0,k.precision):d;break;case "u":d=parseInt(d,10)>>>0;break;case "v":d=d.valueOf();d=k.precision?d.substring(0,k.precision):d;break;case "x":d=(parseInt(d,10)>>>0).toString(16);break;case "X":d=(parseInt(d,10)>>>0).toString(16).toUpperCase()}if(h.json.test(k.type))f+=d;else{if(!h.number.test(k.type)||p&&!k.sign)var m="";else m=p?"+":
"-",d=d.toString().replace(h.sign,"");r=k.pad_char?"0"===k.pad_char?"0":k.pad_char.charAt(1):" ";var A=k.width-(m+d).length;A=k.width?0<A?r.repeat(A):"":"";f+=k.align?m+d+A:"0"===r?m+A+d:A+m+d}}return f}function g(e,b){return a.apply(null,[e].concat(b||[]))}var h={not_string:/[^s]/,not_bool:/[^t]/,not_type:/[^T]/,not_primitive:/[^v]/,number:/[diefg]/,numeric_arg:/[bcdiefguxX]/,json:/[j]/,not_json:/[^j]/,text:/^[^\x25]+/,modulo:/^\x25{2}/,placeholder:/^\x25(?:([1-9]\d*)\$|\(([^)]+)\))?(\+)?(0|'[^$])?(-)?(\d+)?(?:\.(\d+))?([b-gijostTuvxX])/,
key:/^([a-z_][a-z_\d]*)/i,key_access:/^\.([a-z_][a-z_\d]*)/i,index_access:/^\[(\d+)\]/,sign:/^[+-]/},e=Object.create(null);"undefined"!==typeof m&&(m.sprintf=a,m.vsprintf=g);"undefined"!==typeof window&&(window.sprintf=a,window.vsprintf=g)}()},{}],513:[function(a,t,m){var p=a("parenthesis");t.exports=function(a,h,e){if(null==a)throw Error("First argument should be a string");if(null==h)throw Error("Separator should be a string or a RegExp");if(!e)e={};else if("string"===typeof e||Array.isArray(e))e=
{ignore:e};null==e.escape&&(e.escape=!0);null==e.ignore?e.ignore="[] () {} \x3c\x3e \"\" '' ``  ".split(" "):("string"===typeof e.ignore&&(e.ignore=[e.ignore]),e.ignore=e.ignore.map(function(b){1===b.length&&(b+=b);return b}));a=p.parse(a,{flat:!0,brackets:e.ignore});var g=a[0].split(h);if(e.escape){e=[];for(var b=0;b<g.length;b++){var l=g[b],u=g[b+1];"\\"===l[l.length-1]&&"\\"!==l[l.length-2]?(e.push(l+h+u),b++):e.push(l)}g=e}for(b=0;b<g.length;b++)a[0]=g[b],g[b]=p.stringify(a,{flat:!0});return g}},
{parenthesis:450}],514:[function(a,t,m){t.exports=function(a){function g(d){var g=[d],h=[d];e[d]=n[d]=f;b[d]=!0;for(f+=1;0<h.length;){d=h[h.length-1];var r=a[d];if(l[d]<r.length){for(var p=l[d];p<r.length;++p){var v=r[p];if(0>e[v]){e[v]=n[v]=f;b[v]=!0;f+=1;g.push(v);h.push(v);break}else b[v]&&(n[d]=Math.min(n[d],n[v])|0);0<=u[v]&&q[d].push(u[v])}l[d]=p}else{if(n[d]===e[d]){var m=[];r=[];v=0;for(p=g.length-1;0<=p;--p){var z=g[p];b[z]=!1;m.push(z);r.push(q[z]);v+=q[z].length;u[z]=c.length;if(z===d){g.length=
p;break}}c.push(m);d=Array(v);for(p=0;p<r.length;p++)for(m=0;m<r[p].length;m++)d[--v]=r[p][m];k.push(d)}h.pop()}}}for(var h=a.length,e=Array(h),n=Array(h),b=Array(h),l=Array(h),u=Array(h),q=Array(h),d=0;d<h;++d)e[d]=-1,n[d]=0,b[d]=!1,l[d]=0,u[d]=-1,q[d]=[];var f=0,c=[],k=[];for(d=0;d<h;++d)0>e[d]&&g(d);for(d=0;d<k.length;d++){var r=k[d];if(0!==r.length){r.sort(function(b,a){return b-a});h=[r[0]];for(var p=1;p<r.length;p++)r[p]!==r[p-1]&&h.push(r[p]);k[d]=h}}return{components:c,adjacencyList:k}}},
{}],515:[function(a,t,m){function p(b,a){var e=b.length,l=["'use strict';"],d="surfaceNets"+b.join("_")+"d"+a;l.push("var contour\x3dgenContour({","order:[",b.join(),"],","scalarArguments: 3,","phase:function phaseFunc(p,a,b,c) { return (p \x3e c)|0 },");"generic"===a&&l.push("getters:[0],");var f=[];a=[];for(b=0;b<e;++b)f.push("d"+b),a.push("d"+b);for(b=0;b<1<<e;++b)f.push("v"+b),a.push("v"+b);for(b=0;b<1<<e;++b)f.push("p"+b),a.push("p"+b);f.push("a","b","c");a.push("a","c");l.push("vertex:function vertexFunc(",
f.join(),"){");f=[];for(b=0;b<1<<e;++b)f.push("(p"+b+"\x3c\x3c"+b+")");l.push("var m\x3d(",f.join("+"),")|0;if(m\x3d\x3d\x3d0||m\x3d\x3d\x3d",(1<<(1<<e))-1,"){return}");f=[];var c=[];128>=1<<(1<<e)?(l.push("switch(m){"),c=l):l.push("switch(m\x3e\x3e\x3e7){");for(b=0;b<1<<(1<<e);++b){128<1<<(1<<e)&&0===b%128&&(0<f.length&&c.push("}}"),c="vExtra"+f.length,l.push("case ",b>>>7,":",c,"(m\x260x7f,",a.join(),");break;"),c=["function ",c,"(m,",a.join(),"){switch(m){"],f.push(c));c.push("case ",b&127,":");
for(var k=Array(e),r=Array(e),n=Array(e),p=Array(e),m=0,y=0;y<e;++y)k[y]=[],r[y]=[],n[y]=0,p[y]=0;for(y=0;y<1<<e;++y)for(var w=0;w<e;++w){var x=y^1<<w;if(!(x>y)&&!(b&1<<x)!==!(b&1<<y)){var t=1;b&1<<x?r[w].push("v"+x+"-v"+y):(r[w].push("v"+y+"-v"+x),t=-t);0>t?(k[w].push("-v"+y+"-v"+x),n[w]+=2):(k[w].push("v"+y+"+v"+x),n[w]-=2);m+=1;for(t=0;t<e;++t)t!==w&&(x&1<<t?p[t]+=1:--p[t])}}y=[];for(w=0;w<e;++w)0===k[w].length?y.push("d"+w+"-0.5"):(x="",0>n[w]?x=n[w]+"*c":0<n[w]&&(x="+"+n[w]+"*c"),y.push("d"+
w+"-"+(.5+p[w]/m*.5)+"-"+k[w].length/m*.5+"*("+k[w].join("+")+x+")/("+r[w].join("+")+")"));c.push("a.push([",y.join(),"]);","break;")}l.push("}},");0<f.length&&c.push("}}");a=[];for(b=0;b<1<<e-1;++b)a.push("v"+b);a.push("c0","c1","p0","p1","a","b","c");l.push("cell:function cellFunc(",a.join(),"){");e=h(e-1);l.push("if(p0){b.push(",e.map(function(b){return"["+b.map(function(b){return"v"+b})+"]"}).join(),")}else{b.push(",e.map(function(b){b=b.slice();b.reverse();return"["+b.map(function(b){return"v"+
b})+"]"}).join(),")}}});function ",d,"(array,level){var verts\x3d[],cells\x3d[];contour(array,verts,cells,level);return {positions:verts,cells:cells};} return ",d,";");for(b=0;b<f.length;++b)l.push(f[b].join(""));return(new Function("genContour",l.join("")))(g)}t.exports=function(b,a){if(0>=b.dimension)return{positions:[],cells:[]};if(1===b.dimension){b=e(b,a);a=b.length;for(var g=Array(a),h=Array(a),d=0;d<a;++d)g[d]=[b[d]],h[d]=[d];return{positions:g,cells:h}}g=b.order.join()+"-"+b.dtype;h=n[g];
a=+a||0;h||(h=n[g]=p(b.order,b.dtype));return h(b,a)};var g=a("ndarray-extract-contour"),h=a("triangulate-hypercube"),e=a("zero-crossings"),n={}},{"ndarray-extract-contour":431,"triangulate-hypercube":525,"zero-crossings":558}],516:[function(a,t,m){Object.defineProperty(m,"__esModule",{value:!0});var p=function(){return function(b,a){if(Array.isArray(b))return b;$jscomp.initSymbol();$jscomp.initSymbolIterator();if(Symbol.iterator in Object(b)){var e=[],d=!0,f=!1,c=void 0;try{$jscomp.initSymbol();
$jscomp.initSymbolIterator();for(var g=b[Symbol.iterator](),h;!(d=(h=g.next()).done)&&(e.push(h.value),!a||e.length!==a);d=!0);}catch(v){f=!0,c=v}finally{try{if(!d&&g["return"])g["return"]()}finally{if(f)throw c;}}return e}throw new TypeError("Invalid attempt to destructure non-iterable instance");}}(),g=2*Math.PI,h=function(b,a,e,d,f,c,g){var k=b.x;b=b.y;k*=a;b*=e;return{x:d*k-f*b+c,y:f*k+d*b+g}},e=function(b,a){var e=Math.cos(b),d=Math.sin(b),f=Math.cos(b+a);b=Math.sin(b+a);return[{x:e-.551915024494*
d,y:d+.551915024494*e},{x:f+.551915024494*b,y:b-.551915024494*f},{x:f,y:b}]},n=function(b,a,e,d){var f=(b*e+a*d)/(Math.sqrt(b*b+a*a)*Math.sqrt(b*b+a*a));1<f&&(f=1);-1>f&&(f=-1);return(0>b*d-a*e?-1:1)*Math.acos(f)},b=function(b,a,e,d,f,c,k,h,p,m,A,y){var l=Math.pow(f,2),r=Math.pow(c,2),q=Math.pow(A,2),u=Math.pow(y,2),v=l*r-l*u-r*q;0>v&&(v=0);v=Math.sqrt(v/(l*u+r*q))*(k===h?-1:1);k=v*f/c*y;v=v*-c/f*A;b=m*k-p*v+(b+e)/2;a=p*k+m*v+(a+d)/2;d=(A-k)/f;p=(y-v)/c;f=(-A-k)/f;y=(-y-v)/c;c=n(1,0,d,p);y=n(d,p,
f,y);0===h&&0<y&&(y-=g);1===h&&0>y&&(y+=g);return[b,a,c,y]};m.default=function(a){var l=a.px,n=a.py,d=a.cx,f=a.cy,c=a.rx,k=a.ry,r=a.xAxisRotation,v=void 0===r?0:r;r=a.largeArcFlag;var m=a.sweepFlag;a=[];if(0===c||0===k)return[];var A=Math.sin(v*g/360),y=Math.cos(v*g/360);v=y*(l-d)/2+A*(n-f)/2;var w=-A*(l-d)/2+y*(n-f)/2;if(0===v&&0===w)return[];c=Math.abs(c);k=Math.abs(k);var x=Math.pow(v,2)/Math.pow(c,2)+Math.pow(w,2)/Math.pow(k,2);1<x&&(c*=Math.sqrt(x),k*=Math.sqrt(x));l=b(l,n,d,f,c,k,void 0===r?
0:r,void 0===m?0:m,A,y,v,w);n=p(l,4);var t=n[0],B=n[1];l=n[2];n=n[3];d=Math.abs(n)/(g/4);1E-7>Math.abs(1-d)&&(d=1);d=Math.max(Math.ceil(d),1);n/=d;for(f=0;f<d;f++)a.push(e(l,n)),l+=n;return a.map(function(b){var a=h(b[0],c,k,y,A,t,B),d=a.x;a=a.y;var f=h(b[1],c,k,y,A,t,B),e=f.x;f=f.y;b=h(b[2],c,k,y,A,t,B);return{x1:d,y1:a,x2:e,y2:f,x:b.x,y:b.y}})};t.exports=m.default},{}],517:[function(a,t,m){var p=a("parse-svg-path"),g=a("abs-svg-path"),h=a("normalize-svg-path"),e=a("is-svg-path"),n=a("assert");t.exports=
function(b){Array.isArray(b)&&1===b.length&&"string"===typeof b[0]&&(b=b[0]);"string"===typeof b&&(n(e(b),"String is not an SVG path."),b=p(b));n(Array.isArray(b),"Argument should be a string or an array of path segments.");b=g(b);b=h(b);if(!b.length)return[0,0,0,0];for(var a=[Infinity,Infinity,-Infinity,-Infinity],u=0,q=b.length;u<q;u++)for(var d=b[u].slice(1),f=0;f<d.length;f+=2)d[f+0]<a[0]&&(a[0]=d[f+0]),d[f+1]<a[1]&&(a[1]=d[f+1]),d[f+0]>a[2]&&(a[2]=d[f+0]),d[f+1]>a[3]&&(a[3]=d[f+1]);return a}},
{"abs-svg-path":50,assert:58,"is-svg-path":416,"normalize-svg-path":518,"parse-svg-path":452}],518:[function(a,t,m){function p(a,g,b,h){return["C",a,g,b,h,b,h]}function g(a,g,b,h,u,q){return["C",a/3+2/3*b,g/3+2/3*h,u/3+2/3*b,q/3+2/3*h,u,q]}t.exports=function(a){for(var e,b=[],l=0,u=0,q=0,d=0,f=null,c=null,k=0,r=0,v=0,m=a.length;v<m;v++){var A=a[v],y=A[0];switch(y){case "M":q=A[1];d=A[2];break;case "A":var w=h({px:k,py:r,cx:A[6],cy:A[7],rx:A[1],ry:A[2],xAxisRotation:A[3],largeArcFlag:A[4],sweepFlag:A[5]});
if(!w.length)continue;for(e=0;e<w.length;e++)A=w[e],A=["C",A.x1,A.y1,A.x2,A.y2,A.x,A.y],e<w.length-1&&b.push(A);break;case "S":w=k;if("C"==e||"S"==e)w+=w-l,r+=r-u;A=["C",w,r,A[1],A[2],A[3],A[4]];break;case "T":"Q"==e||"T"==e?(f=2*k-f,c=2*r-c):(f=k,c=r);A=g(k,r,f,c,A[1],A[2]);break;case "Q":f=A[1];c=A[2];A=g(k,r,A[1],A[2],A[3],A[4]);break;case "L":A=p(k,r,A[1],A[2]);break;case "H":A=p(k,r,A[1],r);break;case "V":A=p(k,r,k,A[1]);break;case "Z":A=p(k,r,q,d)}e=y;k=A[A.length-2];r=A[A.length-1];4<A.length?
(l=A[A.length-4],u=A[A.length-3]):(l=k,u=r);b.push(A)}return b};var h=a("svg-arc-to-cubic-bezier")},{"svg-arc-to-cubic-bezier":516}],519:[function(a,t,m){function p(){if(null!=q)return q;var b=document.createElement("canvas").getContext("2d");b.canvas.width=b.canvas.height=1;if(!window.Path2D)return q=!1;var a=new Path2D("M0,0h1v1h-1v-1Z");b.fillStyle="black";b.fill(a);return q=(b=b.getImageData(0,0,1,1))&&b.data&&255===b.data[3]}var g=a("svg-path-bounds"),h=a("parse-svg-path"),e=a("draw-svg-path"),
n=a("is-svg-path"),b=a("bitmap-sdf"),l=document.createElement("canvas"),u=l.getContext("2d");t.exports=function(a,f){if(!n(a))throw Error("Argument should be valid svg path string");f||(f={});if(f.shape){var c=f.shape[0];var d=f.shape[1]}else c=l.width=f.w||f.width||200,d=l.height=f.h||f.height||200;var r=Math.min(c,d),q=f.stroke||0,m=f.viewbox||f.viewBox||g(a);m=[c/(m[2]-m[0]),d/(m[3]-m[1])];m=Math.min(m[0]||0,m[1]||0)/2;u.fillStyle="black";u.fillRect(0,0,c,d);u.fillStyle="white";q&&("number"!=typeof q&&
(q=1),u.strokeStyle=0<q?"white":"black",u.lineWidth=Math.abs(q));u.translate(.5*c,.5*d);u.scale(m,m);p()?(a=new Path2D(a),u.fill(a),q&&u.stroke(a)):(a=h(a),e(u,a),u.fill(),q&&u.stroke());u.setTransform(1,0,0,1,0,0);return b(u,{cutoff:null!=f.cutoff?f.cutoff:.5,radius:null!=f.radius?f.radius:.5*r})};var q},{"bitmap-sdf":83,"draw-svg-path":159,"is-svg-path":416,"parse-svg-path":452,"svg-path-bounds":517}],520:[function(a,t,m){(function(p){function g(a,b,l){l=l||{};var n=e[a];n||(n=e[a]={" ":{data:new Float32Array(0),
shape:.2}});var q=n[b];if(!q)if(1>=b.length||!/\d/.test(b)){q=h(b,{triangles:!0,font:a,textAlign:l.textAlign||"left",textBaseline:"alphabetic",styletags:{breaklines:!0,bolds:!0,italics:!0,subscripts:!0,superscripts:!0}});l=q.cells;q=q.positions;for(var d=new Float32Array(6*l.length),f=a=0,c=0;c<l.length;++c)for(var k=l[c],r=0;3>r;++r){var p=q[k[r]];d[a++]=p[0];d[a++]=p[1]+1.4;f=Math.max(p[0],f)}q=n[b]={data:d,shape:f}}else{f=b.split(/(\d|\s)/);l=Array(f.length);for(d=q=c=0;d<f.length;++d)l[d]=g(a,
f[d]),c+=l[d].data.length,q+=l[d].shape,0<d&&(q+=.02);a=new Float32Array(c);f=0;c=-.5*q;for(d=0;d<l.length;++d){k=l[d].data;for(r=0;r<k.length;r+=2)a[f++]=k[r]+c,a[f++]=k[r+1];c+=l[d].shape+.02}q=n[b]={data:a,shape:q}}return q}t.exports=g;var h=a("vectorize-text");p=window||p.global||{};var e=p.__TEXT_CACHE||{};p.__TEXT_CACHE={}}).call(this,a("_process"))},{_process:474,"vectorize-text":534}],521:[function(a,t,m){(function(a){function g(b,c){var d,f;b=b?b:"";c=c||{};if(b instanceof g)return b;if(!(this instanceof
g))return new g(b,c);var k=b;var h={r:0,g:0,b:0};var l=1;var r=d=!1;if("string"==typeof k)a:{k=k.replace(H,"").replace(E,"").toLowerCase();var n=!1;if(N[k])k=N[k],n=!0;else if("transparent"==k){k={r:0,g:0,b:0,a:0,format:"name"};break a}k=(f=R.rgb.exec(k))?{r:f[1],g:f[2],b:f[3]}:(f=R.rgba.exec(k))?{r:f[1],g:f[2],b:f[3],a:f[4]}:(f=R.hsl.exec(k))?{h:f[1],s:f[2],l:f[3]}:(f=R.hsla.exec(k))?{h:f[1],s:f[2],l:f[3],a:f[4]}:(f=R.hsv.exec(k))?{h:f[1],s:f[2],v:f[3]}:(f=R.hsva.exec(k))?{h:f[1],s:f[2],v:f[3],a:f[4]}:
(f=R.hex8.exec(k))?{r:parseInt(f[1],16),g:parseInt(f[2],16),b:parseInt(f[3],16),a:parseInt(f[4],16)/255,format:n?"name":"hex8"}:(f=R.hex6.exec(k))?{r:parseInt(f[1],16),g:parseInt(f[2],16),b:parseInt(f[3],16),format:n?"name":"hex"}:(f=R.hex4.exec(k))?{r:parseInt(f[1]+""+f[1],16),g:parseInt(f[2]+""+f[2],16),b:parseInt(f[3]+""+f[3],16),a:parseInt(f[4]+""+f[4],16)/255,format:n?"name":"hex8"}:(f=R.hex3.exec(k))?{r:parseInt(f[1]+""+f[1],16),g:parseInt(f[2]+""+f[2],16),b:parseInt(f[3]+""+f[3],16),format:n?
"name":"hex"}:!1}if("object"==typeof k){if(G(k.r)&&G(k.g)&&G(k.b))h=k.g,d=k.b,h={r:255*B(k.r,255),g:255*B(h,255),b:255*B(d,255)},d=!0,r="%"===String(k.r).substr(-1)?"prgb":"rgb";else if(G(k.h)&&G(k.s)&&G(k.v)){h=D(k.s);r=D(k.v);f=k.h;d=h;h=r;f=6*B(f,360);d=B(d,100);h=B(h,100);r=a.floor(f);var q=f-r;f=h*(1-d);n=h*(1-q*d);d=h*(1-(1-q)*d);r%=6;h={r:255*[h,n,f,f,d,h][r],g:255*[d,h,h,n,f,f][r],b:255*[f,f,d,h,h,n][r]};d=!0;r="hsv"}else G(k.h)&&G(k.s)&&G(k.l)&&(h=D(k.s),d=D(k.l),h=e(k.h,h,d),d=!0,r="hsl");
k.hasOwnProperty("a")&&(l=k.a)}l=F(l);k=k.format||r;r=J(255,L(h.r,0));f=J(255,L(h.g,0));h=J(255,L(h.b,0));this._originalInput=b;this._r=r;this._g=f;this._b=h;this._a=l;this._roundA=I(100*this._a)/100;this._format=c.format||k;this._gradientType=c.gradientType;1>this._r&&(this._r=I(this._r));1>this._g&&(this._g=I(this._g));1>this._b&&(this._b=I(this._b));this._ok=d;this._tc_id=K++}function h(b,a,c){b=B(b,255);a=B(a,255);c=B(c,255);var d=L(b,a,c),f=J(b,a,c),e=(d+f)/2;if(d==f)var g=f=0;else{var k=d-f;
f=.5<e?k/(2-d-f):k/(d+f);switch(d){case b:g=(a-c)/k+(a<c?6:0);break;case a:g=(c-b)/k+2;break;case c:g=(b-a)/k+4}g/=6}return{h:g,s:f,l:e}}function e(b,a,c){function d(b,a,c){0>c&&(c+=1);1<c&&--c;return c<1/6?b+6*(a-b)*c:.5>c?a:c<2/3?b+(a-b)*(2/3-c)*6:b}b=B(b,360);a=B(a,100);c=B(c,100);if(0===a)c=a=b=c;else{var f=.5>c?c*(1+a):c+a-c*a,e=2*c-f;c=d(e,f,b+1/3);a=d(e,f,b);b=d(e,f,b-1/3)}return{r:255*c,g:255*a,b:255*b}}function n(b,a,c){b=B(b,255);a=B(a,255);c=B(c,255);var d=L(b,a,c),f=J(b,a,c),e=d-f;if(d==
f)var g=0;else{switch(d){case b:g=(a-c)/e+(a<c?6:0);break;case a:g=(c-b)/e+2;break;case c:g=(b-a)/e+4}g/=6}return{h:g,s:0===d?0:e/d,v:d}}function b(b,a,c,d){b=[C(I(b).toString(16)),C(I(a).toString(16)),C(I(c).toString(16))];return d&&b[0].charAt(0)==b[0].charAt(1)&&b[1].charAt(0)==b[1].charAt(1)&&b[2].charAt(0)==b[2].charAt(1)?b[0].charAt(0)+b[1].charAt(0)+b[2].charAt(0):b.join("")}function l(b,c,d,f){return[C(a.round(255*parseFloat(f)).toString(16)),C(I(b).toString(16)),C(I(c).toString(16)),C(I(d).toString(16))].join("")}
function u(b,a){a=0===a?0:a||10;b=g(b).toHsl();b.s-=a/100;b.s=J(1,L(0,b.s));return g(b)}function q(b,a){a=0===a?0:a||10;b=g(b).toHsl();b.s+=a/100;b.s=J(1,L(0,b.s));return g(b)}function d(b){return g(b).desaturate(100)}function f(b,a){a=0===a?0:a||10;b=g(b).toHsl();b.l+=a/100;b.l=J(1,L(0,b.l));return g(b)}function c(b,a){a=0===a?0:a||10;b=g(b).toRgb();b.r=L(0,J(255,b.r-I(255*-(a/100))));b.g=L(0,J(255,b.g-I(255*-(a/100))));b.b=L(0,J(255,b.b-I(255*-(a/100))));return g(b)}function k(b,a){a=0===a?0:a||
10;b=g(b).toHsl();b.l-=a/100;b.l=J(1,L(0,b.l));return g(b)}function r(b,a){b=g(b).toHsl();a=(b.h+a)%360;b.h=0>a?360+a:a;return g(b)}function p(b){b=g(b).toHsl();b.h=(b.h+180)%360;return g(b)}function m(b){var a=g(b).toHsl(),c=a.h;return[g(b),g({h:(c+120)%360,s:a.s,l:a.l}),g({h:(c+240)%360,s:a.s,l:a.l})]}function A(b){var a=g(b).toHsl(),c=a.h;return[g(b),g({h:(c+90)%360,s:a.s,l:a.l}),g({h:(c+180)%360,s:a.s,l:a.l}),g({h:(c+270)%360,s:a.s,l:a.l})]}function y(b){var a=g(b).toHsl(),c=a.h;return[g(b),g({h:(c+
72)%360,s:a.s,l:a.l}),g({h:(c+216)%360,s:a.s,l:a.l})]}function w(b,a,c){a=a||6;c=c||30;var d=g(b).toHsl();c=360/c;b=[g(b)];for(d.h=(d.h-(c*a>>1)+720)%360;--a;)d.h=(d.h+c)%360,b.push(g(d));return b}function x(b,a){a=a||6;var c=g(b).toHsv();b=c.h;var d=c.s;c=c.v;for(var f=[],e=1/a;a--;)f.push(g({h:b,s:d,v:c})),c=(c+e)%1;return f}function F(b){b=parseFloat(b);if(isNaN(b)||0>b||1<b)b=1;return b}function B(b,c){var d=b;"string"==typeof d&&-1!=d.indexOf(".")&&1===parseFloat(d)&&(b="100%");d="string"===
typeof b&&-1!=b.indexOf("%");b=J(c,L(0,parseFloat(b)));d&&(b=parseInt(b*c,10)/100);return 1E-6>a.abs(b-c)?1:b%c/parseFloat(c)}function C(b){return 1==b.length?"0"+b:""+b}function D(b){1>=b&&(b=100*b+"%");return b}function G(b){return!!R.CSS_UNIT.exec(b)}var H=/^\s+/,E=/\s+$/,K=0,I=a.round,J=a.min,L=a.max,M=a.random;g.prototype={isDark:function(){return 128>this.getBrightness()},isLight:function(){return!this.isDark()},isValid:function(){return this._ok},getOriginalInput:function(){return this._originalInput},
getFormat:function(){return this._format},getAlpha:function(){return this._a},getBrightness:function(){var b=this.toRgb();return(299*b.r+587*b.g+114*b.b)/1E3},getLuminance:function(){var b=this.toRgb();var c=b.r/255;var d=b.g/255;b=b.b/255;c=.03928>=c?c/12.92:a.pow((c+.055)/1.055,2.4);d=.03928>=d?d/12.92:a.pow((d+.055)/1.055,2.4);b=.03928>=b?b/12.92:a.pow((b+.055)/1.055,2.4);return.2126*c+.7152*d+.0722*b},setAlpha:function(b){this._a=F(b);this._roundA=I(100*this._a)/100;return this},toHsv:function(){var b=
n(this._r,this._g,this._b);return{h:360*b.h,s:b.s,v:b.v,a:this._a}},toHsvString:function(){var b=n(this._r,this._g,this._b),a=I(360*b.h),c=I(100*b.s);b=I(100*b.v);return 1==this._a?"hsv("+a+", "+c+"%, "+b+"%)":"hsva("+a+", "+c+"%, "+b+"%, "+this._roundA+")"},toHsl:function(){var b=h(this._r,this._g,this._b);return{h:360*b.h,s:b.s,l:b.l,a:this._a}},toHslString:function(){var b=h(this._r,this._g,this._b),a=I(360*b.h),c=I(100*b.s);b=I(100*b.l);return 1==this._a?"hsl("+a+", "+c+"%, "+b+"%)":"hsla("+a+
", "+c+"%, "+b+"%, "+this._roundA+")"},toHex:function(a){return b(this._r,this._g,this._b,a)},toHexString:function(b){return"#"+this.toHex(b)},toHex8:function(b){var c=this._g,d=this._b,f=this._a;c=[C(I(this._r).toString(16)),C(I(c).toString(16)),C(I(d).toString(16)),C(a.round(255*parseFloat(f)).toString(16))];b=b&&c[0].charAt(0)==c[0].charAt(1)&&c[1].charAt(0)==c[1].charAt(1)&&c[2].charAt(0)==c[2].charAt(1)&&c[3].charAt(0)==c[3].charAt(1)?c[0].charAt(0)+c[1].charAt(0)+c[2].charAt(0)+c[3].charAt(0):
c.join("");return b},toHex8String:function(b){return"#"+this.toHex8(b)},toRgb:function(){return{r:I(this._r),g:I(this._g),b:I(this._b),a:this._a}},toRgbString:function(){return 1==this._a?"rgb("+I(this._r)+", "+I(this._g)+", "+I(this._b)+")":"rgba("+I(this._r)+", "+I(this._g)+", "+I(this._b)+", "+this._roundA+")"},toPercentageRgb:function(){return{r:I(100*B(this._r,255))+"%",g:I(100*B(this._g,255))+"%",b:I(100*B(this._b,255))+"%",a:this._a}},toPercentageRgbString:function(){return 1==this._a?"rgb("+
I(100*B(this._r,255))+"%, "+I(100*B(this._g,255))+"%, "+I(100*B(this._b,255))+"%)":"rgba("+I(100*B(this._r,255))+"%, "+I(100*B(this._g,255))+"%, "+I(100*B(this._b,255))+"%, "+this._roundA+")"},toName:function(){return 0===this._a?"transparent":1>this._a?!1:O[b(this._r,this._g,this._b,!0)]||!1},toFilter:function(b){var a="#"+l(this._r,this._g,this._b,this._a),c=a,d=this._gradientType?"GradientType \x3d 1, ":"";b&&(b=g(b),c="#"+l(b._r,b._g,b._b,b._a));return"progid:DXImageTransform.Microsoft.gradient("+
d+"startColorstr\x3d"+a+",endColorstr\x3d"+c+")"},toString:function(b){var a=!!b;b=b||this._format;var c=!1,d=1>this._a&&0<=this._a;if(!a&&d&&("hex"===b||"hex6"===b||"hex3"===b||"hex4"===b||"hex8"===b||"name"===b))return"name"===b&&0===this._a?this.toName():this.toRgbString();"rgb"===b&&(c=this.toRgbString());"prgb"===b&&(c=this.toPercentageRgbString());if("hex"===b||"hex6"===b)c=this.toHexString();"hex3"===b&&(c=this.toHexString(!0));"hex4"===b&&(c=this.toHex8String(!0));"hex8"===b&&(c=this.toHex8String());
"name"===b&&(c=this.toName());"hsl"===b&&(c=this.toHslString());"hsv"===b&&(c=this.toHsvString());return c||this.toHexString()},clone:function(){return g(this.toString())},_applyModification:function(b,a){b=b.apply(null,[this].concat([].slice.call(a)));this._r=b._r;this._g=b._g;this._b=b._b;this.setAlpha(b._a);return this},lighten:function(){return this._applyModification(f,arguments)},brighten:function(){return this._applyModification(c,arguments)},darken:function(){return this._applyModification(k,
arguments)},desaturate:function(){return this._applyModification(u,arguments)},saturate:function(){return this._applyModification(q,arguments)},greyscale:function(){return this._applyModification(d,arguments)},spin:function(){return this._applyModification(r,arguments)},_applyCombination:function(b,a){return b.apply(null,[this].concat([].slice.call(a)))},analogous:function(){return this._applyCombination(w,arguments)},complement:function(){return this._applyCombination(p,arguments)},monochromatic:function(){return this._applyCombination(x,
arguments)},splitcomplement:function(){return this._applyCombination(y,arguments)},triad:function(){return this._applyCombination(m,arguments)},tetrad:function(){return this._applyCombination(A,arguments)}};g.fromRatio=function(b,a){if("object"==typeof b){var c={},d;for(d in b)b.hasOwnProperty(d)&&(c[d]="a"===d?b[d]:D(b[d]));b=c}return g(b,a)};g.equals=function(b,a){return b&&a?g(b).toRgbString()==g(a).toRgbString():!1};g.random=function(){return g.fromRatio({r:M(),g:M(),b:M()})};g.mix=function(b,
a,c){c=0===c?0:c||50;b=g(b).toRgb();a=g(a).toRgb();c/=100;return g({r:(a.r-b.r)*c+b.r,g:(a.g-b.g)*c+b.g,b:(a.b-b.b)*c+b.b,a:(a.a-b.a)*c+b.a})};g.readability=function(b,c){b=g(b);c=g(c);return(a.max(b.getLuminance(),c.getLuminance())+.05)/(a.min(b.getLuminance(),c.getLuminance())+.05)};g.isReadable=function(b,a,c){b=g.readability(b,a);a=!1;var d=c||{level:"AA",size:"small"};c=(d.level||"AA").toUpperCase();d=(d.size||"small").toLowerCase();"AA"!==c&&"AAA"!==c&&(c="AA");"small"!==d&&"large"!==d&&(d=
"small");switch(c+d){case "AAsmall":case "AAAlarge":a=4.5<=b;break;case "AAlarge":a=3<=b;break;case "AAAsmall":a=7<=b}return a};g.mostReadable=function(b,a,c){var d=null,f=0;c=c||{};var e=c.includeFallbackColors;var k=c.level;var h=c.size;for(var l=0;l<a.length;l++){var r=g.readability(b,a[l]);r>f&&(f=r,d=g(a[l]))}if(g.isReadable(b,d,{level:k,size:h})||!e)return d;c.includeFallbackColors=!1;return g.mostReadable(b,["#fff","#000"],c)};var N=g.names={aliceblue:"f0f8ff",antiquewhite:"faebd7",aqua:"0ff",
aquamarine:"7fffd4",azure:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"000",blanchedalmond:"ffebcd",blue:"00f",blueviolet:"8a2be2",brown:"a52a2a",burlywood:"deb887",burntsienna:"ea7e5d",cadetblue:"5f9ea0",chartreuse:"7fff00",chocolate:"d2691e",coral:"ff7f50",cornflowerblue:"6495ed",cornsilk:"fff8dc",crimson:"dc143c",cyan:"0ff",darkblue:"00008b",darkcyan:"008b8b",darkgoldenrod:"b8860b",darkgray:"a9a9a9",darkgreen:"006400",darkgrey:"a9a9a9",darkkhaki:"bdb76b",darkmagenta:"8b008b",darkolivegreen:"556b2f",
darkorange:"ff8c00",darkorchid:"9932cc",darkred:"8b0000",darksalmon:"e9967a",darkseagreen:"8fbc8f",darkslateblue:"483d8b",darkslategray:"2f4f4f",darkslategrey:"2f4f4f",darkturquoise:"00ced1",darkviolet:"9400d3",deeppink:"ff1493",deepskyblue:"00bfff",dimgray:"696969",dimgrey:"696969",dodgerblue:"1e90ff",firebrick:"b22222",floralwhite:"fffaf0",forestgreen:"228b22",fuchsia:"f0f",gainsboro:"dcdcdc",ghostwhite:"f8f8ff",gold:"ffd700",goldenrod:"daa520",gray:"808080",green:"008000",greenyellow:"adff2f",
grey:"808080",honeydew:"f0fff0",hotpink:"ff69b4",indianred:"cd5c5c",indigo:"4b0082",ivory:"fffff0",khaki:"f0e68c",lavender:"e6e6fa",lavenderblush:"fff0f5",lawngreen:"7cfc00",lemonchiffon:"fffacd",lightblue:"add8e6",lightcoral:"f08080",lightcyan:"e0ffff",lightgoldenrodyellow:"fafad2",lightgray:"d3d3d3",lightgreen:"90ee90",lightgrey:"d3d3d3",lightpink:"ffb6c1",lightsalmon:"ffa07a",lightseagreen:"20b2aa",lightskyblue:"87cefa",lightslategray:"789",lightslategrey:"789",lightsteelblue:"b0c4de",lightyellow:"ffffe0",
lime:"0f0",limegreen:"32cd32",linen:"faf0e6",magenta:"f0f",maroon:"800000",mediumaquamarine:"66cdaa",mediumblue:"0000cd",mediumorchid:"ba55d3",mediumpurple:"9370db",mediumseagreen:"3cb371",mediumslateblue:"7b68ee",mediumspringgreen:"00fa9a",mediumturquoise:"48d1cc",mediumvioletred:"c71585",midnightblue:"191970",mintcream:"f5fffa",mistyrose:"ffe4e1",moccasin:"ffe4b5",navajowhite:"ffdead",navy:"000080",oldlace:"fdf5e6",olive:"808000",olivedrab:"6b8e23",orange:"ffa500",orangered:"ff4500",orchid:"da70d6",
palegoldenrod:"eee8aa",palegreen:"98fb98",paleturquoise:"afeeee",palevioletred:"db7093",papayawhip:"ffefd5",peachpuff:"ffdab9",peru:"cd853f",pink:"ffc0cb",plum:"dda0dd",powderblue:"b0e0e6",purple:"800080",rebeccapurple:"663399",red:"f00",rosybrown:"bc8f8f",royalblue:"4169e1",saddlebrown:"8b4513",salmon:"fa8072",sandybrown:"f4a460",seagreen:"2e8b57",seashell:"fff5ee",sienna:"a0522d",silver:"c0c0c0",skyblue:"87ceeb",slateblue:"6a5acd",slategray:"708090",slategrey:"708090",snow:"fffafa",springgreen:"00ff7f",
steelblue:"4682b4",tan:"d2b48c",teal:"008080",thistle:"d8bfd8",tomato:"ff6347",turquoise:"40e0d0",violet:"ee82ee",wheat:"f5deb3",white:"fff",whitesmoke:"f5f5f5",yellow:"ff0",yellowgreen:"9acd32"},O=g.hexNames=function(b){var a={},c;for(c in b)b.hasOwnProperty(c)&&(a[b[c]]=c);return a}(N),R={CSS_UNIT:/(?:[-\+]?\d*\.\d+%?)|(?:[-\+]?\d+%?)/,rgb:/rgb[\s|\(]+((?:[-\+]?\d*\.\d+%?)|(?:[-\+]?\d+%?))[,|\s]+((?:[-\+]?\d*\.\d+%?)|(?:[-\+]?\d+%?))[,|\s]+((?:[-\+]?\d*\.\d+%?)|(?:[-\+]?\d+%?))\s*\)?/,rgba:/rgba[\s|\(]+((?:[-\+]?\d*\.\d+%?)|(?:[-\+]?\d+%?))[,|\s]+((?:[-\+]?\d*\.\d+%?)|(?:[-\+]?\d+%?))[,|\s]+((?:[-\+]?\d*\.\d+%?)|(?:[-\+]?\d+%?))[,|\s]+((?:[-\+]?\d*\.\d+%?)|(?:[-\+]?\d+%?))\s*\)?/,
hsl:/hsl[\s|\(]+((?:[-\+]?\d*\.\d+%?)|(?:[-\+]?\d+%?))[,|\s]+((?:[-\+]?\d*\.\d+%?)|(?:[-\+]?\d+%?))[,|\s]+((?:[-\+]?\d*\.\d+%?)|(?:[-\+]?\d+%?))\s*\)?/,hsla:/hsla[\s|\(]+((?:[-\+]?\d*\.\d+%?)|(?:[-\+]?\d+%?))[,|\s]+((?:[-\+]?\d*\.\d+%?)|(?:[-\+]?\d+%?))[,|\s]+((?:[-\+]?\d*\.\d+%?)|(?:[-\+]?\d+%?))[,|\s]+((?:[-\+]?\d*\.\d+%?)|(?:[-\+]?\d+%?))\s*\)?/,hsv:/hsv[\s|\(]+((?:[-\+]?\d*\.\d+%?)|(?:[-\+]?\d+%?))[,|\s]+((?:[-\+]?\d*\.\d+%?)|(?:[-\+]?\d+%?))[,|\s]+((?:[-\+]?\d*\.\d+%?)|(?:[-\+]?\d+%?))\s*\)?/,
hsva:/hsva[\s|\(]+((?:[-\+]?\d*\.\d+%?)|(?:[-\+]?\d+%?))[,|\s]+((?:[-\+]?\d*\.\d+%?)|(?:[-\+]?\d+%?))[,|\s]+((?:[-\+]?\d*\.\d+%?)|(?:[-\+]?\d+%?))[,|\s]+((?:[-\+]?\d*\.\d+%?)|(?:[-\+]?\d+%?))\s*\)?/,hex3:/^#?([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,hex6:/^#?([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})$/,hex4:/^#?([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,hex8:/^#?([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})$/};"undefined"!==typeof t&&t.exports?
t.exports=g:window.tinycolor=g})(Math)},{}],522:[function(a,t,m){function p(a){if(a.length){if(a instanceof Float32Array)return a;var e=new Float32Array(a);e.set(a);return e}g[0]=a;return g[0]}t.exports=p;t.exports.float32=t.exports.float=p;t.exports.fract32=t.exports.fract=function(a){if(a.length){for(var e=p(a),g=0,b=e.length;g<b;g++)e[g]=a[g]-e[g];return e}return p(a-p(a))};var g=new Float32Array(1)},{}],523:[function(a,t,m){function p(a,b){b=h(getComputedStyle(a).getPropertyValue(b));return b[0]*
g(b[1],a)}function g(a,b){b=b||document.body;a=(a||"px").trim().toLowerCase();if(b===window||b===document)b=document.body;switch(a){case "%":return b.clientHeight/100;case "ch":case "ex":var g=document.createElement("div");g.style["font-size"]="128"+a;b.appendChild(g);a=p(g,"font-size")/128;b.removeChild(g);return a;case "em":return p(b,"font-size");case "rem":return p(document.body,"font-size");case "vw":return window.innerWidth/100;case "vh":return window.innerHeight/100;case "vmin":return Math.min(window.innerWidth,
window.innerHeight)/100;case "vmax":return Math.max(window.innerWidth,window.innerHeight)/100;case "in":return e;case "cm":return e/2.54;case "mm":return e/25.4;case "pt":return e/72;case "pc":return e/6}return 1}var h=a("parse-unit");t.exports=g;var e=96},{"parse-unit":453}],524:[function(a,t,m){(function(a,g){"object"===typeof m&&"undefined"!==typeof t?g(m):g(a.topojson=a.topojson||{})})(this,function(a){function g(b,a){var c=a.id,d=a.bbox,f=null==a.properties?{}:a.properties;b=h(b,a);return null==
c&&null==d?{type:"Feature",properties:f,geometry:b}:null==d?{type:"Feature",id:c,properties:f,geometry:b}:{type:"Feature",id:c,bbox:d,properties:f,geometry:b}}function h(b,a){function c(b){return k(b.slice())}function d(b){for(var a=[],c=0,d=b.length;c<d;++c){var f=b[c],e=a;e.length&&e.pop();for(var g=h[0>f?~f:f],l=0,r=g.length;l<r;++l)e.push(k(g[l].slice(),l));if(0>f)for(f=e,e=f.length,g=e-r;g<--e;)r=f[g],f[g++]=f[e],f[e]=r}2>a.length&&a.push(a[0].slice());return a}function f(b){for(b=d(b);4>b.length;)b.push(b[0].slice());
return b}function e(b){return b.map(f)}function g(b){var a=b.type;switch(a){case "GeometryCollection":return{type:a,geometries:b.geometries.map(g)};case "Point":b=c(b.coordinates);break;case "MultiPoint":b=b.coordinates.map(c);break;case "LineString":b=d(b.arcs);break;case "MultiLineString":b=b.arcs.map(d);break;case "Polygon":b=e(b.arcs);break;case "MultiPolygon":b=b.arcs.map(e);break;default:return null}return{type:a,coordinates:b}}var k=u(b),h=b.arcs;return g(a)}function e(b,a,f){var c;if(1<arguments.length)var e=
n(b,a,f);else{var g=0;for(e=Array(c=b.arcs.length);g<c;++g)e[g]=g}return{type:"MultiLineString",arcs:d(b,e)}}function n(b,a,d){function c(b){var a=0>b?~b:b;(h[a]||(h[a]=[])).push({i:b,g:l})}function f(b){b.forEach(c)}function e(b){b.forEach(f)}function g(b){switch(l=b,b.type){case "GeometryCollection":b.geometries.forEach(g);break;case "LineString":f(b.arcs);break;case "MultiLineString":case "Polygon":e(b.arcs);break;case "MultiPolygon":b.arcs.forEach(e)}}var k=[],h=[],l;g(a);h.forEach(null==d?function(b){k.push(b[0].i)}:
function(b){d(b[0].g,b[b.length-1].g)&&k.push(b[0].i)});return k}function b(b,a){function c(b){switch(b.type){case "GeometryCollection":b.geometries.forEach(c);break;case "Polygon":f(b.arcs);break;case "MultiPolygon":b.arcs.forEach(f)}}function f(b){b.forEach(function(a){a.forEach(function(a){(g[a=0>a?~a:a]||(g[a]=[])).push(b)})});k.push(b)}function e(a){a=h(b,{type:"Polygon",arcs:[a]}).coordinates[0];for(var c=-1,d=a.length,f,e=a[d-1],g=0;++c<d;)f=e,e=a[c],g+=f[0]*e[1]-f[1]*e[0];return Math.abs(g)}
var g={},k=[],l=[];a.forEach(c);k.forEach(function(b){if(!b._){var a=[],c=[b];b._=1;for(l.push(a);b=c.pop();)a.push(b),b.forEach(function(b){b.forEach(function(b){g[0>b?~b:b].forEach(function(b){b._||(b._=1,c.push(b))})})})}});k.forEach(function(b){delete b._});return{type:"MultiPolygon",arcs:l.map(function(a){var c=[];a.forEach(function(b){b.forEach(function(b){b.forEach(function(b){2>g[0>b?~b:b].length&&c.push(b)})})});c=d(b,c);if(1<(a=c.length))for(var f=1,k=e(c[0]),h;f<a;++f)(h=e(c[f]))>k&&(k=
c[0],c[0]=c[f],c[f]=k,k=h);return c})}}var l=function(b){return b},u=function(b){if(null==(b=b.transform))return l;var a,c,d=b.scale[0],f=b.scale[1],e=b.translate[0],g=b.translate[1];return function(b,k){k||(a=c=0);b[0]=(a+=b[0])*d+e;b[1]=(c+=b[1])*f+g;return b}},q=function(b){function a(b){g[0]=b[0];g[1]=b[1];f(g);g[0]<l&&(l=g[0]);g[0]>q&&(q=g[0]);g[1]<n&&(n=g[1]);g[1]>p&&(p=g[1])}function c(b){switch(b.type){case "GeometryCollection":b.geometries.forEach(c);break;case "Point":a(b.coordinates);break;
case "MultiPoint":b.coordinates.forEach(a)}}var d=b.bbox;if(!d){var f=u(b),e,g=Array(2),h,l=Infinity,n=l,q=-l,p=-l;b.arcs.forEach(function(b){for(var a=-1,c=b.length;++a<c;)e=b[a],g[0]=e[0],g[1]=e[1],f(g,a),g[0]<l&&(l=g[0]),g[0]>q&&(q=g[0]),g[1]<n&&(n=g[1]),g[1]>p&&(p=g[1])});for(h in b.objects)c(b.objects[h]);d=b.bbox=[l,n,q,p]}return d},d=function(b,a){function c(a){var c=b.arcs[0>a?~a:a],d=c[0];if(b.transform){var f=[0,0];c.forEach(function(b){f[0]+=b[0];f[1]+=b[1]})}else f=c[c.length-1];return 0>
a?[f,d]:[d,f]}function d(b,a){for(var c in b){var d=b[c];delete a[d.start];delete d.start;delete d.end;d.forEach(function(b){f[0>b?~b:b]=1});k.push(d)}}var f={},e={},g={},k=[],h=-1;a.forEach(function(c,d){var f=b.arcs[0>c?~c:c];3>f.length&&!f[1][0]&&!f[1][1]&&(f=a[++h],a[h]=c,a[d]=f)});a.forEach(function(b){var a=c(b),d=a[0],f=a[1];(a=g[d])?(delete g[a.end],a.push(b),a.end=f,(b=e[f])?(delete e[b.start],d=b===a?a:a.concat(b),e[d.start=a.start]=g[d.end=b.end]=d):e[a.start]=g[a.end]=a):(a=e[f])?(delete e[a.start],
a.unshift(b),a.start=d,(b=g[d])?(delete g[b.end],d=b===a?a:b.concat(a),e[d.start=b.start]=g[d.end=a.end]=d):e[a.start]=g[a.end]=a):(a=[b],e[a.start=d]=g[a.end=f]=a)});d(g,e);d(e,g);a.forEach(function(b){f[0>b?~b:b]||k.push([b])});return k},f=function(b,a){for(var c=0,d=b.length;c<d;){var f=c+d>>>1;b[f]<a?c=f+1:d=f}return c};a.bbox=q;a.feature=function(b,a){return"GeometryCollection"===a.type?{type:"FeatureCollection",features:a.geometries.map(function(a){return g(b,a)})}:g(b,a)};a.mesh=function(b){return h(b,
e.apply(this,arguments))};a.meshArcs=e;a.merge=function(a){return h(a,b.apply(this,arguments))};a.mergeArcs=b;a.neighbors=function(b){function a(b,a){b.forEach(function(b){0>b&&(b=~b);var c=e[b];c?c.push(a):e[b]=[a]})}function c(b,c){b.forEach(function(b){a(b,c)})}function d(b,a){if("GeometryCollection"===b.type)b.geometries.forEach(function(b){d(b,a)});else if(b.type in h)h[b.type](b.arcs,a)}var e={},g=b.map(function(){return[]}),h={LineString:a,MultiLineString:c,Polygon:c,MultiPolygon:function(b,
a){b.forEach(function(b){c(b,a)})}};b.forEach(d);for(var l in e){b=e[l];for(var n=b.length,q=0;q<n;++q)for(var u=q+1;u<n;++u){var p=b[q],m=b[u],t;(t=g[p])[l=f(t,m)]!==m&&t.splice(l,0,m);(t=g[m])[l=f(t,p)]!==p&&t.splice(l,0,p)}}return g};a.quantize=function(b,a){function c(b){b[0]=Math.round((b[0]-g)/k);b[1]=Math.round((b[1]-h)/l)}function d(b){switch(b.type){case "GeometryCollection":b.geometries.forEach(d);break;case "Point":c(b.coordinates);break;case "MultiPoint":b.coordinates.forEach(c)}}if(!(2<=
(a=Math.floor(a))))throw Error("n must be 2");if(b.transform)throw Error("already quantized");var f=q(b),e,g=f[0],k=(f[2]-g)/(a-1)||1,h=f[1],l=(f[3]-h)/(a-1)||1;b.arcs.forEach(function(b){for(var a=1,c=1,d=b.length,f=b[0],e=f[0]=Math.round((f[0]-g)/k),r=f[1]=Math.round((f[1]-h)/l),n,q;a<d;++a)if(f=b[a],n=Math.round((f[0]-g)/k),q=Math.round((f[1]-h)/l),n!==e||q!==r)f=b[c++],f[0]=n-e,e=n,f[1]=q-r,r=q;2>c&&(f=b[c++],f[0]=0,f[1]=0);b.length=c});for(e in b.objects)d(b.objects[e]);b.transform={scale:[k,
l],translate:[g,h]};return b};a.transform=u;a.untransform=function(b){if(null==(b=b.transform))return l;var a,c,d=b.scale[0],f=b.scale[1],e=b.translate[0],g=b.translate[1];return function(b,k){k||(a=c=0);k=Math.round((b[0]-e)/d);var h=Math.round((b[1]-g)/f);b[0]=k-a;a=k;b[1]=h-c;c=h;return b}};Object.defineProperty(a,"__esModule",{value:!0})})},{}],525:[function(a,t,m){t.exports=function(a){if(0>a)return[];if(0===a)return[[0]];for(var e=Math.round(h(a+1))|0,b=[],l=0;l<e;++l){for(var u=p.unrank(a,
l),q=[0],d=0,f=0;f<u.length;++f)d+=1<<u[f],q.push(d);1>g(u)&&(q[0]=d,q[a]=0);b.push(q)}return b};var p=a("permutation-rank"),g=a("permutation-parity"),h=a("gamma")},{gamma:227,"permutation-parity":455,"permutation-rank":456}],526:[function(a,t,m){function p(b,a,d){return Math.sqrt(Math.pow(b,2)+Math.pow(a,2)+Math.pow(d,2))}function g(b){var a=Math.abs(b[0]),d=Math.abs(b[1]),f=Math.abs(b[2]),e=[0,0,0];a>Math.max(d,f)?e[2]=1:d>Math.max(a,f)?e[0]=1:e[1]=1;for(f=d=a=0;3>f;++f)a+=b[f]*b[f],d+=e[f]*b[f];
for(f=0;3>f;++f)e[f]-=d/a*b[f];u(e,e);return e}function h(b,a,d,g,h,l,n,q){this.center=e(d);this.up=e(g);this.right=e(h);this.radius=e([l]);this.angle=e([n,q]);this.angle.bounds=[[-Infinity,-Math.PI/2],[Infinity,Math.PI/2]];this.setDistanceLimits(b,a);this.computedCenter=this.center.curve(0);this.computedUp=this.up.curve(0);this.computedRight=this.right.curve(0);this.computedRadius=this.radius.curve(0);this.computedAngle=this.angle.curve(0);this.computedToward=[0,0,0];this.computedEye=[0,0,0];this.computedMatrix=
Array(16);for(b=0;16>b;++b)this.computedMatrix[b]=.5;this.recalcMatrix(0)}t.exports=function(b){b=b||{};var a=b.center||[0,0,0],d=b.up||[0,1,0],f=b.right||g(d),e=b.radius||1,n=b.theta||0,m=b.phi||0;a=[].slice.call(a,0,3);d=[].slice.call(d,0,3);u(d,d);f=[].slice.call(f,0,3);u(f,f);"eye"in b&&(e=b.eye,n=[e[0]-a[0],e[1]-a[1],e[2]-a[2]],l(f,n,d),1E-6>p(f[0],f[1],f[2])?f=g(d):u(f,f),e=p(n[0],n[1],n[2]),m=q(d,n)/e,n=q(f,n)/e,m=Math.acos(m),n=Math.acos(n));e=Math.log(e);return new h(b.zoomMin,b.zoomMax,
a,d,f,e,n,m)};var e=a("filtered-vector"),n=a("gl-mat4/invert"),b=a("gl-mat4/rotate"),l=a("gl-vec3/cross"),u=a("gl-vec3/normalize"),q=a("gl-vec3/dot");a=h.prototype;a.setDistanceLimits=function(b,a){b=0<b?Math.log(b):-Infinity;a=0<a?Math.log(a):Infinity;a=Math.max(a,b);this.radius.bounds[0][0]=b;this.radius.bounds[1][0]=a};a.getDistanceLimits=function(b){var a=this.radius.bounds[0];return b?(b[0]=Math.exp(a[0][0]),b[1]=Math.exp(a[1][0]),b):[Math.exp(a[0][0]),Math.exp(a[1][0])]};a.recalcMatrix=function(b){this.center.curve(b);
this.up.curve(b);this.right.curve(b);this.radius.curve(b);this.angle.curve(b);for(var a=this.computedUp,d=this.computedRight,f=0,e=0,g=0;3>g;++g)e+=a[g]*d[g],f+=a[g]*a[g];var h=Math.sqrt(f);for(g=b=0;3>g;++g)d[g]-=a[g]*e/f,b+=d[g]*d[g],a[g]/=h;b=Math.sqrt(b);for(g=0;3>g;++g)d[g]/=b;var n=this.computedToward;l(n,a,d);u(n,n);b=Math.exp(this.computedRadius[0]);h=this.computedAngle[0];f=this.computedAngle[1];e=Math.cos(h);h=Math.sin(h);var q=Math.cos(f),m=Math.sin(f);f=this.computedCenter;var t=e*q,B=
h*q,C=-e*m,D=-h*m;e=this.computedEye;h=this.computedMatrix;for(g=0;3>g;++g){var G=t*d[g]+B*n[g]+m*a[g];h[4*g+1]=C*d[g]+D*n[g]+q*a[g];h[4*g+2]=G;h[4*g+3]=0}d=h[1];g=h[5];m=h[9];n=h[2];q=h[6];t=h[10];a=g*t-m*q;m=m*n-d*t;d=d*q-g*n;g=p(a,m,d);h[0]=a/g;h[4]=m/g;h[8]=d/g;for(g=0;3>g;++g)e[g]=f[g]+h[2+4*g]*b;for(g=0;3>g;++g){for(f=b=0;3>f;++f)b+=h[g+4*f]*e[f];h[12+g]=-b}h[15]=1};a.getMatrix=function(b,a){this.recalcMatrix(b);b=this.computedMatrix;if(a){for(var c=0;16>c;++c)a[c]=b[c];return a}return b};var d=
[0,0,0];a.rotate=function(a,c,e,g){this.angle.move(a,c,e);if(g){this.recalcMatrix(a);c=this.computedMatrix;d[0]=c[2];d[1]=c[6];d[2]=c[10];e=this.computedUp;for(var f=this.computedRight,k=this.computedToward,h=0;3>h;++h)c[4*h]=e[h],c[4*h+1]=f[h],c[4*h+2]=k[h];b(c,c,g,d);for(h=0;3>h;++h)e[h]=c[4*h],f[h]=c[4*h+1];this.up.set(a,e[0],e[1],e[2]);this.right.set(a,f[0],f[1],f[2])}};a.pan=function(b,a,d,e){a=a||0;d=d||0;e=e||0;this.recalcMatrix(b);var c=this.computedMatrix,f=c[1],g=c[5],k=c[9],h=p(f,g,k);
f/=h;g/=h;k/=h;h=c[0];var l=c[4];c=c[8];var r=h*f+l*g+c*k;h-=f*r;l-=g*r;c-=k*r;r=p(h,l,c);this.center.move(b,h/r*a+f*d,l/r*a+g*d,c/r*a+k*d);a=Math.exp(this.computedRadius[0]);a=Math.max(1E-4,a+e);this.radius.set(b,Math.log(a))};a.translate=function(b,a,d,e){this.center.move(b,a||0,d||0,e||0)};a.setMatrix=function(b,a,d,e){var c=1;"number"===typeof d&&(c=d|0);if(0>c||3<c)c=1;var f=(c+2)%3;a||(this.recalcMatrix(b),a=this.computedMatrix);d=a[c];var g=a[c+4],k=a[c+8];if(e){e=Math.abs(d);var h=Math.abs(k),
l=Math.max(e,Math.abs(g),h);e===l?(d=0>d?-1:1,g=k=0):h===l?(k=0>k?-1:1,d=g=0):(g=0>g?-1:1,d=k=0)}else e=p(d,g,k),d/=e,g/=e,k/=e;e=a[f];h=a[f+4];f=a[f+8];l=e*d+h*g+f*k;e-=d*l;h-=g*l;f-=k*l;l=p(e,h,f);e/=l;h/=l;f/=l;l=g*f-k*h;var r=k*e-d*f,q=d*h-g*e,u=p(l,r,q);l/=u;r/=u;q/=u;this.center.jump(b,t,H,E);this.radius.idle(b);this.up.jump(b,d,g,k);this.right.jump(b,e,h,f);if(2===c)H=a[1],E=a[5],d=a[9],t=0>m?-Math.PI/2:Math.PI/2,H=Math.atan2(H*l+E*r+d*q,H*e+E*h+d*f);else{H=a[2];E=a[6];var m=a[10];t=Math.asin(Math.min(1,
Math.max(-1,H*d+E*g+m*k)));H=Math.atan2(H*l+E*r+m*q,H*e+E*h+m*f)}this.angle.jump(b,H,t);this.recalcMatrix(b);m=a[2];d=a[6];g=a[10];E=this.computedMatrix;n(E,a);a=E[15];var t=E[12]/a,H=E[13]/a,E=E[14]/a;a=Math.exp(this.computedRadius[0]);this.center.jump(b,t-m*a,H-d*a,E-g*a)};a.lastT=function(){return Math.max(this.center.lastT(),this.up.lastT(),this.right.lastT(),this.radius.lastT(),this.angle.lastT())};a.idle=function(b){this.center.idle(b);this.up.idle(b);this.right.idle(b);this.radius.idle(b);
this.angle.idle(b)};a.flush=function(b){this.center.flush(b);this.up.flush(b);this.right.flush(b);this.radius.flush(b);this.angle.flush(b)};a.setDistance=function(b,a){0<a&&this.radius.set(b,Math.log(a))};a.lookAt=function(b,a,d,e){this.recalcMatrix(b);a=a||this.computedEye;d=d||this.computedCenter;e=e||this.computedUp;var c=e[0],f=e[1];e=e[2];var g=p(c,f,e);if(!(1E-6>g)){c/=g;f/=g;e/=g;g=a[0]-d[0];var k=a[1]-d[1];a=a[2]-d[2];var h=p(g,k,a);if(!(1E-6>h)){g/=h;k/=h;a/=h;var l=this.computedRight,r=
l[0],n=l[1];l=l[2];var q=c*r+f*n+e*l;r-=q*c;n-=q*f;l-=q*e;q=p(r,n,l);if(.01>q&&(r=f*a-e*k,n=e*g-c*a,l=c*k-f*g,q=p(r,n,l),1E-6>q))return;r/=q;n/=q;l/=q;this.up.set(b,c,f,e);this.right.set(b,r,n,l);this.center.set(b,d[0],d[1],d[2]);this.radius.set(b,Math.log(h));d=f*l-e*n;h=e*r-c*l;q=c*n-f*r;var u=p(d,h,q);c=Math.asin(Math.min(1,Math.max(-1,c*g+f*k+e*a)));f=Math.atan2(d/u*g+h/u*k+q/u*a,r*g+n*k+l*a);g=this.angle._state;e=g[g.length-1];g=g[g.length-2];e%=2*Math.PI;k=Math.abs(e-f);a=Math.abs(e-2*Math.PI-
f);Math.abs(e+2*Math.PI-f)<k&&(e+=2*Math.PI);a<k&&(e-=2*Math.PI);this.angle.jump(this.angle.lastT(),e,g);this.angle.set(b,f,c)}}}},{"filtered-vector":222,"gl-mat4/invert":261,"gl-mat4/rotate":266,"gl-vec3/cross":326,"gl-vec3/dot":331,"gl-vec3/normalize":348}],527:[function(a,t,m){t.exports=function(a,h,e){var g=a*h,b=p*a;b-=b-a;a-=b;var l=p*h;l-=l-h;h-=l;h=a*h-(g-b*l-a*l-b*h);return e?(e[0]=h,e[1]=g,e):[h,g]};var p=+(Math.pow(2,27)+1)},{}],528:[function(a,t,m){t.exports=function(a,g,h){var e=a+g,
n=e-a;g-=n;a-=e-n;return h?(h[0]=a+g,h[1]=e,h):[a+g,e]}},{}],529:[function(a,t,m){(function(p,g){function h(b){if(b){var a=z.log2(b.length||b.byteLength);x[a].push(b)}}function e(b){b=z.nextPow2(b);var a=z.log2(b);a=x[a];return 0<a.length?a.pop():new ArrayBuffer(b)}function n(b){return new Uint8Array(e(b),0,b)}function b(b){return new Uint16Array(e(2*b),0,b)}function l(b){return new Uint32Array(e(4*b),0,b)}function u(b){return new Int8Array(e(b),0,b)}function q(b){return new Int16Array(e(2*b),0,b)}
function d(b){return new Int32Array(e(4*b),0,b)}function f(b){return new Float32Array(e(4*b),0,b)}function c(b){return new Float64Array(e(8*b),0,b)}function k(b){return y?new Uint8ClampedArray(e(b),0,b):n(b)}function r(b){return new DataView(e(b),0,b)}function v(b){b=z.nextPow2(b);var a=z.log2(b);a=F[a];return 0<a.length?a.pop():new g(b)}var z=a("bit-twiddle"),t=a("dup");p.__TYPEDARRAY_POOL||(p.__TYPEDARRAY_POOL={UINT8:t([32,0]),UINT16:t([32,0]),UINT32:t([32,0]),INT8:t([32,0]),INT16:t([32,0]),INT32:t([32,
0]),FLOAT:t([32,0]),DOUBLE:t([32,0]),DATA:t([32,0]),UINT8C:t([32,0]),BUFFER:t([32,0])});var y="undefined"!==typeof Uint8ClampedArray,w=p.__TYPEDARRAY_POOL;w.UINT8C||(w.UINT8C=t([32,0]));w.BUFFER||(w.BUFFER=t([32,0]));var x=w.DATA,F=w.BUFFER;m.free=function(b){if(g.isBuffer(b))F[z.log2(b.length)].push(b);else if("[object ArrayBuffer]"!==Object.prototype.toString.call(b)&&(b=b.buffer),b){var a=z.log2(b.length||b.byteLength)|0;x[a].push(b)}};m.freeUint8=m.freeUint16=m.freeUint32=m.freeInt8=m.freeInt16=
m.freeInt32=m.freeFloat32=m.freeFloat=m.freeFloat64=m.freeDouble=m.freeUint8Clamped=m.freeDataView=function(b){h(b.buffer)};m.freeArrayBuffer=h;m.freeBuffer=function(b){F[z.log2(b.length)].push(b)};m.malloc=function(a,g){if(void 0===g||"arraybuffer"===g)return e(a);switch(g){case "uint8":return n(a);case "uint16":return b(a);case "uint32":return l(a);case "int8":return u(a);case "int16":return q(a);case "int32":return d(a);case "float":case "float32":return f(a);case "double":case "float64":return c(a);
case "uint8_clamped":return k(a);case "buffer":return v(a);case "data":case "dataview":return r(a)}return null};m.mallocArrayBuffer=e;m.mallocUint8=n;m.mallocUint16=b;m.mallocUint32=l;m.mallocInt8=u;m.mallocInt16=q;m.mallocInt32=d;m.mallocFloat32=m.mallocFloat=f;m.mallocFloat64=m.mallocDouble=c;m.mallocUint8Clamped=k;m.mallocDataView=r;m.mallocBuffer=v;m.clearCache=function(){for(var b=0;32>b;++b)w.UINT8[b].length=0,w.UINT16[b].length=0,w.UINT32[b].length=0,w.INT8[b].length=0,w.INT16[b].length=0,
w.INT32[b].length=0,w.FLOAT[b].length=0,w.DOUBLE[b].length=0,w.UINT8C[b].length=0,x[b].length=0,F[b].length=0}}).call(this,"undefined"!==typeof ja?ja:"undefined"!==typeof self?self:"undefined"!==typeof window?window:{},a("buffer").Buffer)},{"bit-twiddle":82,buffer:95,dup:161}],530:[function(a,t,m){function p(a){this.roots=Array(a);this.ranks=Array(a);for(var g=0;g<a;++g)this.roots[g]=g,this.ranks[g]=0}"use restrict";t.exports=p;a=p.prototype;Object.defineProperty(a,"length",{get:function(){return this.roots.length}});
a.makeSet=function(){var a=this.roots.length;this.roots.push(a);this.ranks.push(0);return a};a.find=function(a){for(var g=a,e=this.roots;e[a]!==a;)a=e[a];for(;e[g]!==a;){var n=e[g];e[g]=a;g=n}return a};a.link=function(a,h){a=this.find(a);h=this.find(h);if(a!==h){var e=this.ranks,g=this.roots,b=e[a],l=e[h];b<l?g[a]=h:l<b?g[h]=a:(g[h]=a,++e[a])}}},{}],531:[function(a,t,m){t.exports=function(a,g,h){if(0===a.length)return a;if(g){h||a.sort(g);h=1;for(var e=a.length,n=a[0],b,l=1;l<e;++l)b=n,n=a[l],g(n,
b)&&(l===h?h++:a[h++]=n);a.length=h;return a}h||a.sort();g=1;h=a.length;e=a[0];for(b=1;b<h;++b)n=e,e=a[b],e!==n&&(b===g?g++:a[g++]=e);a.length=g;return a}},{}],532:[function(a,t,m){var p=/['"]/;t.exports=function(a){if(!a)return"";p.test(a.charAt(0))&&(a=a.substr(1));p.test(a.charAt(a.length-1))&&(a=a.substr(0,a.length-1));return a}},{}],533:[function(a,t,m){t.exports=function(a,g,h){Array.isArray(h)||(h=[].slice.call(arguments,2));for(var e=0,n=h.length;e<n;e++){var b=h[e],l;for(l in b)if((void 0===
g[l]||Array.isArray(g[l])||a[l]!==g[l])&&l in g){if(!0===b[l])var u=g[l];else if(!1===b[l])continue;else if("function"===typeof b[l]&&(u=b[l](g[l],a,g),void 0===u))continue;a[l]=u}}return a}},{}],534:[function(a,t,m){t.exports=function(a,n){if("object"!==typeof n||null===n)n={};return p(a,n.canvas||g,n.context||h,n)};var p=a("./lib/vtext"),g=null,h=null;"undefined"!==typeof document&&(g=document.createElement("canvas"),g.width=8192,g.height=1024,h=g.getContext("2d"))},{"./lib/vtext":535}],535:[function(a,
t,m){function p(b,a,c,d){var f="\x3c"+b+"\x3e";b="\x3c/"+b+"\x3e";for(var e=f.length,g=b.length,k=a[0]===A||a[0]===x,h=0,l;-1<h;){h=c.indexOf(f,h);if(-1===h)break;l=c.indexOf(b,h+e);if(-1===l)break;if(l<=h)break;for(var r=h;r<l+g;++r)if(r<h+e||r>=l)d[r]=null,c=c.substr(0,r)+" "+c.substr(r+1);else if(null!==d[r]){var n=d[r].indexOf(a[0]);-1===n?d[r]+=a:k&&(d[r]=d[r].substr(0,n+1)+(1+parseInt(d[r][n+1]))+d[r].substr(n+2))}h+=e;h=c.substr(h,l-h).indexOf(f);h=-1!==h?h:l+g}return d}function g(b,a,c){for(var d=
a.textAlign||"start",f=a.textBaseline||"alphabetic",e=[1073741824,1073741824],g=[0,0],k=b.length,h=0;h<k;++h)for(var l=b[h],r=0;2>r;++r)e[r]=Math.min(e[r],l[r])|0,g[r]=Math.max(g[r],l[r])|0;var n=0;switch(d){case "center":n=-.5*(e[0]+g[0]);break;case "right":case "end":n=-g[0];break;case "left":case "start":n=-e[0];break;default:throw Error("vectorize-text: Unrecognized textAlign: '"+d+"'");}var q=0;switch(f){case "hanging":case "top":q=-e[1];break;case "middle":q=-.5*(e[1]+g[1]);break;case "alphabetic":case "ideographic":q=
-3*c;break;case "bottom":q=-g[1];break;default:throw Error("vectorize-text: Unrecoginized textBaseline: '"+f+"'");}var u=1/c;"lineHeight"in a?u*=+a.lineHeight:"width"in a?u=a.width/(g[0]-e[0]):"height"in a&&(u=a.height/(g[1]-e[1]));return b.map(function(b){return[u*(b[0]+n),u*(b[1]+q)]})}function h(b,a,d,f,e,g){function h(){if(""!==H){var b=a.measureText(H).width;a.fillText(H,C+ca,D+Y);ca+=b}}function n(){return""+Math.round(W)+"px "}function q(b,c){var d=""+a.font;if(!0===g.subscripts){var f=b.indexOf(x),
e=c.indexOf(x);f=-1<f?parseInt(b[1+f]):0;e=-1<e?parseInt(c[1+e]):0;f!==e&&(d=d.replace(n(),"?px "),W*=Math.pow(.75,e-f),d=d.replace("?px ",n()));Y+=.25*B*(e-f)}!0===g.superscripts&&(f=b.indexOf(A),e=c.indexOf(A),f=-1<f?parseInt(b[1+f]):0,e=-1<e?parseInt(c[1+e]):0,f!==e&&(d=d.replace(n(),"?px "),W*=Math.pow(.75,e-f),d=d.replace("?px ",n())),Y-=.25*B*(e-f));!0===g.bolds&&(e=-1<b.indexOf(k),f=-1<c.indexOf(k),!e&&f&&(d=h?d.replace("italic ","italic bold "):"bold "+d),e&&!f&&(d=d.replace("bold ","")));
if(!0===g.italics){var h=-1<b.indexOf(v);b=-1<c.indexOf(v);!h&&b&&(d="italic "+d);h&&!b&&(d=d.replace("italic ",""))}a.font=d}d=d.replace(/\n/g,"");d=!0===g.breaklines?d.replace(/<br>/g,"\n"):d.replace(/<br>/g," ");var u="",m=[];for(G=0;G<d.length;++G)m[G]=u;!0===g.bolds&&(m=p(c,k,d,m));!0===g.italics&&(m=p(r,v,d,m));!0===g.superscripts&&(m=p(z,y,d,m));!0===g.subscripts&&(m=p(w,F,d,m));var t=[],E="";for(G=0;G<d.length;++G)null!==m[G]&&(E+=d[G],t.push(m[G]));m=E.split("\n");d=m.length;var B=Math.round(e*
f),C=f,D=2*f;e=0;G=d*B+D;b.height<G&&(b.height=G);a.fillStyle="#000";a.fillRect(0,0,b.width,b.height);a.fillStyle="#fff";var G;E=0;var H="";for(b=0;b<d;++b){var da=m[b]+"\n";var ca=0;var Y=b*B;var W=f;H="";for(G=0;G<da.length;++G){var ea=G+E<t.length?t[G+E]:t[t.length-1];u===ea?H+=da[G]:(h(),H=da[G],void 0!==ea&&(q(u,ea),u=ea))}h();E+=da.length;G=Math.round(ca+2*C)|0;e<G&&(e=G)}f=e;u=D+B*d;return l(a.getImageData(0,0,f,u).data,[u,f,4]).pick(-1,-1,0).transpose(1,0)}function e(a,c,e,k){a=b(a,128);k=
k?u(a.cells,a.positions,.25):{edges:a.cells,positions:a.positions};e=g(k.positions,c,e);a=k.edges;k="ccw"===c.orientation;q(e,a);if(c.polygons||c.polygon||c.polyline){c=f(a,e);a=Array(c.length);for(var h=0;h<c.length;++h){for(var l=c[h],r=Array(l.length),n=0;n<l.length;++n){for(var p=l[n],m=Array(p.length),v=0;v<p.length;++v)m[v]=e[p[v]].slice();k&&m.reverse();r[n]=m}a[h]=r}return a}return c.triangles||c.triangulate||c.triangle?{cells:d(e,a,{delaunay:!1,exterior:!1,interior:!0}),positions:e}:{edges:a,
positions:e}}function n(b,a,c){try{return e(b,a,c,!0)}catch(G){}try{return e(b,a,c,!1)}catch(G){}return a.polygons||a.polyline||a.polygon?[]:a.triangles||a.triangulate||a.triangle?{cells:[],positions:[]}:{edges:[],positions:[]}}t.exports=function(b,a,c,d){var f=64,e=1.25,g={breaklines:!1,bolds:!1,italics:!1,subscripts:!1,superscripts:!1};d&&(d.size&&0<d.size&&(f=d.size),d.lineSpacing&&0<d.lineSpacing&&(e=d.lineSpacing),d.styletags&&d.styletags.breaklines&&(g.breaklines=d.styletags.breaklines?!0:!1),
d.styletags&&d.styletags.bolds&&(g.bolds=d.styletags.bolds?!0:!1),d.styletags&&d.styletags.italics&&(g.italics=d.styletags.italics?!0:!1),d.styletags&&d.styletags.subscripts&&(g.subscripts=d.styletags.subscripts?!0:!1),d.styletags&&d.styletags.superscripts&&(g.superscripts=d.styletags.superscripts?!0:!1));c.font=[d.fontStyle,d.fontVariant,d.fontWeight,f+"px",d.font].filter(function(b){return b}).join(" ");c.textAlign="start";c.textBaseline="alphabetic";c.direction="ltr";b=h(a,c,b,f,e,g);return n(b,
d,f)};t.exports.processPixels=n;var b=a("surface-nets"),l=a("ndarray"),u=a("simplify-planar-graph"),q=a("clean-pslg"),d=a("cdt2d"),f=a("planar-graph-to-polyline"),c="b",k="b|",r="i",v="i|",z="sup",A="+",y="+1",w="sub",x="-",F="-1"},{cdt2d:96,"clean-pslg":106,ndarray:442,"planar-graph-to-polyline":460,"simplify-planar-graph":508,"surface-nets":515}],536:[function(a,t,m){(function(){function a(b){b.permitHostObjects___&&b.permitHostObjects___(a)}function g(b){return!("weakmap:"==b.substr(0,8)&&"___"===
b.substr(b.length-3))}function h(b){if(b!==Object(b))throw new TypeError("Not an object: "+b);var a=b[k];if(a&&a.key===b)return a;if(c(b)){a={key:b};try{return f(b,k,{value:a,writable:!1,enumerable:!1,configurable:!1}),a}catch(x){}}}function e(b){b.prototype=null;return Object.freeze(b)}function n(){m||"undefined"===typeof console||(m=!0,console.warn("WeakMap should be invoked as new WeakMap(), not WeakMap(). This will be an error in the future."))}if("undefined"===typeof ses||!ses.ok||ses.ok()){"undefined"!==
typeof ses&&(ses.weakMapPermitHostObjects=a);var b=!1;if("function"===typeof WeakMap){var l=WeakMap;if("undefined"===typeof navigator||!/Firefox/.test(navigator.userAgent)){var u=new l,q=Object.freeze({});u.set(q,1);if(1!==u.get(q))b=!0;else{t.exports=WeakMap;return}}}var d=Object.getOwnPropertyNames,f=Object.defineProperty,c=Object.isExtensible,k="weakmap:ident:"+Math.random()+"___";"undefined"!==typeof crypto&&"function"===typeof crypto.getRandomValues&&"function"===typeof ArrayBuffer&&"function"===
typeof Uint8Array&&(u=new ArrayBuffer(25),u=new Uint8Array(u),crypto.getRandomValues(u),k="weakmap:rand:"+Array.prototype.map.call(u,function(b){return(b%36).toString(36)}).join("")+"___");f(Object,"getOwnPropertyNames",{value:function(b){return d(b).filter(g)}});if("getPropertyNames"in Object){var r=Object.getPropertyNames;f(Object,"getPropertyNames",{value:function(b){return r(b).filter(g)}})}(function(){var b=Object.freeze;f(Object,"freeze",{value:function(a){h(a);return b(a)}});var a=Object.seal;
f(Object,"seal",{value:function(b){h(b);return a(b)}});var c=Object.preventExtensions;f(Object,"preventExtensions",{value:function(b){h(b);return c(b)}})})();var m=!1,z=0,A=function(){this instanceof A||n();var b=[],a=[],c=z++;return Object.create(A.prototype,{get___:{value:e(function(d,f){var e=h(d);if(e)return c in e?e[c]:f;d=b.indexOf(d);return 0<=d?a[d]:f})},has___:{value:e(function(a){var d=h(a);return d?c in d:0<=b.indexOf(a)})},set___:{value:e(function(d,f){var e;(e=h(d))?e[c]=f:(e=b.indexOf(d),
0<=e?a[e]=f:(e=b.length,a[e]=f,b[e]=d));return this})},delete___:{value:e(function(d){var f=h(d);if(f)return c in f&&delete f[c];d=b.indexOf(d);if(0>d)return!1;f=b.length-1;b[d]=void 0;a[d]=a[f];b[d]=b[f];b.length=f;a.length=f;return!0})}})};A.prototype=Object.create(Object.prototype,{get:{value:function(b,a){return this.get___(b,a)},writable:!0,configurable:!0},has:{value:function(b){return this.has___(b)},writable:!0,configurable:!0},set:{value:function(b,a){return this.set___(b,a)},writable:!0,
configurable:!0},"delete":{value:function(b){return this.delete___(b)},writable:!0,configurable:!0}});"function"===typeof l?function(){function c(){this instanceof A||n();var c=new l,d=void 0,f=!1;var g=b?function(b,a){c.set(b,a);c.has(b)||(d||(d=new A),d.set(b,a));return this}:function(b,a){if(f)try{c.set(b,a)}catch(G){d||(d=new A),d.set___(b,a)}else c.set(b,a);return this};return Object.create(A.prototype,{get___:{value:e(function(b,a){return d?c.has(b)?c.get(b):d.get___(b,a):c.get(b,a)})},has___:{value:e(function(b){return c.has(b)||
(d?d.has___(b):!1)})},set___:{value:e(g)},delete___:{value:e(function(b){var a=!!c["delete"](b);return d?d.delete___(b)||a:a})},permitHostObjects___:{value:e(function(b){if(b===a)f=!0;else throw Error("bogus call to permitHostObjects___");})}})}b&&"undefined"!==typeof Proxy&&(Proxy=void 0);c.prototype=A.prototype;t.exports=c;Object.defineProperty(WeakMap.prototype,"constructor",{value:WeakMap,enumerable:!1,configurable:!0,writable:!0})}():("undefined"!==typeof Proxy&&(Proxy=void 0),t.exports=A)}})()},
{}],537:[function(a,t,m){var p=a("./hidden-store.js");t.exports=function(){var a={};return function(g){if(("object"!==typeof g||null===g)&&"function"!==typeof g)throw Error("Weakmap-shim: Key must be object");var e=g.valueOf(a);return e&&e.identity===a?e:p(g,a)}}},{"./hidden-store.js":538}],538:[function(a,t,m){t.exports=function(a,g){var h={identity:g},e=a.valueOf;Object.defineProperty(a,"valueOf",{value:function(a){return a!==g?e.apply(this,arguments):h},writable:!0});return h}},{}],539:[function(a,
t,m){var p=a("./create-store.js");t.exports=function(){var a=p();return{get:function(g,e){g=a(g);return g.hasOwnProperty("value")?g.value:e},set:function(g,e){a(g).value=e;return this},has:function(g){return"value"in a(g)},"delete":function(g){return delete a(g).value}}}},{"./create-store.js":537}],540:[function(a,t,m){var p=a("get-canvas-context");t.exports=function(a){return p("webgl",a)}},{"get-canvas-context":228}],541:[function(a,t,m){function p(b){this.local=this.regionalOptions[b||""]||this.regionalOptions[""]}
var g=a("../main");a=a("object-assign");var h=g.instance();p.prototype=new g.baseCalendar;a(p.prototype,{name:"Chinese",jdEpoch:1721425.5,hasYearZero:!1,minMonth:0,firstMonth:0,minDay:1,regionalOptions:{"":{name:"Chinese",epochs:["BEC","EC"],monthNumbers:function(b,a){if("string"===typeof b)return(a=b.match(n))?a[0]:"";var c=this._validateYear(b);b=b.month();var d=""+this.toChineseMonth(c,b);a&&2>d.length&&(d="0"+d);this.isIntercalaryMonth(c,b)&&(d+="i");return d},monthNames:function(a){if("string"===
typeof a){var d=a.match(b);return d?d[0]:""}d=this._validateYear(a);a=a.month();var c="           ".split(" ")[this.toChineseMonth(d,a)-1];this.isIntercalaryMonth(d,a)&&(c=""+c);return c},monthNamesShort:function(b){if("string"===typeof b){var a=b.match(l);return a?a[0]:""}a=this._validateYear(b);b=b.month();var c="           ".split(" ")[this.toChineseMonth(a,b)-1];this.isIntercalaryMonth(a,b)&&(c=""+c);return c},parseMonth:function(b,a){b=this._validateYear(b);
var c=parseInt(a);if(isNaN(c)){if(""===a[0]){var d=!0;a=a.substring(1)}""===a[a.length-1]&&(a=a.substring(0,a.length-1));c=1+"           ".split(" ").indexOf(a)}else a=a[a.length-1],d="i"===a||"I"===a;return this.toMonthIndex(b,c,d)},dayNames:"Sunday Monday Tuesday Wednesday Thursday Friday Saturday".split(" "),dayNamesShort:"Sun Mon Tue Wed Thu Fri Sat".split(" "),dayNamesMin:"Su Mo Tu We Th Fr Sa".split(" "),digits:null,dateFormat:"yyyy/mm/dd",firstDay:1,isRTL:!1}},_validateYear:function(b,
a){b.year&&(b=b.year());if("number"!==typeof b||1888>b||2111<b)throw a.replace(/\{0\}/,this.local.name);return b},toMonthIndex:function(b,a,c){b=this.intercalaryMonth(b);if(c&&a!==b||1>a||12<a)throw g.local.invalidMonth.replace(/\{0\}/,this.local.name);return b?!c&&a<=b?a-1:a:a-1},toChineseMonth:function(b,a){b.year&&(b=b.year(),a=b.month());b=this.intercalaryMonth(b);if(0>a||a>(b?12:11))throw g.local.invalidMonth.replace(/\{0\}/,this.local.name);return b?a<b?a+1:a:a+1},intercalaryMonth:function(b){b=
this._validateYear(b);return u[b-u[0]]>>13},isIntercalaryMonth:function(b,a){b.year&&(b=b.year(),a=b.month());b=this.intercalaryMonth(b);return!!b&&b===a},leapYear:function(b){return 0!==this.intercalaryMonth(b)},weekOfYear:function(b,a,c){var d=this._validateYear(b,g.local.invalidyear);d=q[d-q[0]];d=h.newDate(d>>9&4095,d>>5&15,d&31);d.add(4-(d.dayOfWeek()||7),"d");b=this.toJD(b,a,c)-d.toJD();return 1+Math.floor(b/7)},monthsInYear:function(b){return this.leapYear(b)?13:12},daysInMonth:function(b,
a){b.year&&(a=b.month(),b=b.year());b=this._validateYear(b);b=u[b-u[0]];if(a>(b>>13?12:11))throw g.local.invalidMonth.replace(/\{0\}/,this.local.name);return b&1<<12-a?30:29},weekDay:function(b,a,c){return 6>(this.dayOfWeek(b,a,c)||7)},toJD:function(b,a,c){e=this._validate(b,e,c,g.local.invalidDate);b=this._validateYear(e.year());a=e.month();c=e.day();var d=this.isIntercalaryMonth(b,a),e=this.toChineseMonth(b,a);if("object"===typeof b)a=e||{};else{if(!("number"===typeof b&&1888<=b&&2111>=b))throw Error("Lunar year outside range 1888-2111");
if(!("number"===typeof e&&1<=e&&12>=e))throw Error("Lunar month outside range 1 - 12");if(!("number"===typeof c&&1<=c&&30>=c))throw Error("Lunar day outside range 1 - 30");if("object"===typeof d){var f=!1;a=d}else f=!!d,a={};b={year:b,month:e,day:c,isIntercalary:f}}e=b.day-1;c=u[b.year-u[0]];d=(d=c>>13)?b.month>d?b.month:b.isIntercalary?b.month:b.month-1:b.month-1;for(f=0;f<d;f++)e+=c&1<<12-f?30:29;b=q[b.year-q[0]];b=new Date(b>>9&4095,(b>>5&15)-1,(b&31)+e);a.year=b.getFullYear();a.month=1+b.getMonth();
a.day=b.getDate();return h.toJD(a.year,a.month,a.day)},fromJD:function(b){var a=h.fromJD(b),c=a.year();b=a.month();a=a.day();if("object"===typeof c)b=b||{};else{if(!("number"===typeof c&&1888<=c&&2111>=c))throw Error("Solar year outside range 1888-2111");if(!("number"===typeof b&&1<=b&&12>=b))throw Error("Solar month outside range 1 - 12");if(!("number"===typeof a&&1<=a&&31>=a))throw Error("Solar day outside range 1 - 31");c={year:c,month:b,day:a};b={}}a=q[c.year-q[0]];b.year=(c.year<<9|c.month<<
5|c.day)>=a?c.year:c.year-1;a=q[b.year-q[0]];c=Math.round((new Date(c.year,c.month-1,c.day)-new Date(a>>9&4095,(a>>5&15)-1,a&31))/864E5);var d=u[b.year-u[0]];for(a=0;13>a;a++){var e=d&1<<12-a?30:29;if(c<e)break;c-=e}d>>=13;!d||a<d?(b.isIntercalary=!1,b.month=1+a):(b.isIntercalary=a===d?!0:!1,b.month=a);b.day=1+c;c=this.toMonthIndex(b.year,b.month,b.isIntercalary);return this.newDate(b.year,c,b.day)},fromString:function(b){b=b.match(e);var a=this._validateYear(+b[1]),c=this.toMonthIndex(a,+b[2],!!b[3]);
return this.newDate(a,c,+b[4])},add:function(b,a,c){var d=b.year(),e=b.month(),f=this.isIntercalaryMonth(d,e);d=this.toChineseMonth(d,e);b=Object.getPrototypeOf(p.prototype).add.call(this,b,a,c);"y"===c&&(a=b.year(),c=b.month(),e=this.isIntercalaryMonth(a,d),f=f&&e?this.toMonthIndex(a,d,!0):this.toMonthIndex(a,d,!1),f!==c&&b.month(f));return b}});var e=/^\s*(-?\d\d\d\d|\d\d)[-/](\d?\d)([iI]?)[-/](\d?\d)/m,n=/^\d?\d[iI]?/m,b=/^??[]?/m,l=/^??[]?/m;g.calendars.chinese=p;var u=
[1887,5780,5802,19157,2742,50359,1198,2646,46378,7466,3412,30122,5482,67949,2396,5294,43597,6732,6954,36181,2772,4954,18781,2396,54427,5274,6730,47781,5800,6868,21210,4790,59703,2350,5270,46667,3402,3496,38325,1388,4782,18735,2350,52374,6804,7498,44457,2906,1388,29294,4700,63789,6442,6804,56138,5802,2772,38235,1210,4698,22827,5418,63125,3476,5802,43701,2484,5302,27223,2646,70954,7466,3412,54698,5482,2412,38062,5294,2636,32038,6954,60245,2772,4826,43357,2394,5274,39501,6730,72357,5800,5844,53978,4790,
2358,38039,5270,87627,3402,3496,54708,5484,4782,43311,2350,3222,27978,7498,68965,2904,5484,45677,4700,6444,39573,6804,6986,19285,2772,62811,1210,4698,47403,5418,5780,38570,5546,76469,2420,5302,51799,2646,5414,36501,3412,5546,18869,2412,54446,5276,6732,48422,6822,2900,28010,4826,92509,2394,5274,55883,6730,6820,47956,5812,2778,18779,2358,62615,5270,5450,46757,3492,5556,27318,4718,67887,2350,3222,52554,7498,3428,38252,5468,4700,31022,6444,64149,6804,6986,43861,2772,5338,35421,2650,70955,5418,5780,54954,
5546,2740,38074,5302,2646,29991,3366,61011,3412,5546,43445,2412,5294,35406,6732,72998,6820,6996,52586,2778,2396,38045,5274,6698,23333,6820,64338,5812,2746,43355,2358,5270,39499,5450,79525,3492,5548],q=[1887,966732,967231,967733,968265,968766,969297,969798,970298,970829,971330,971830,972362,972863,973395,973896,974397,974928,975428,975929,976461,976962,977462,977994,978494,979026,979526,980026,980558,981059,981559,982091,982593,983124,983624,984124,984656,985157,985656,986189,986690,987191,987722,
988222,988753,989254,989754,990286,990788,991288,991819,992319,992851,993352,993851,994383,994885,995385,995917,996418,996918,997450,997949,998481,998982,999483,1000014,1000515,1001016,1001548,1002047,1002578,1003080,1003580,1004111,1004613,1005113,1005645,1006146,1006645,1007177,1007678,1008209,1008710,1009211,1009743,1010243,1010743,1011275,1011775,1012306,1012807,1013308,1013840,1014341,1014841,1015373,1015874,1016404,1016905,1017405,1017937,1018438,1018939,1019471,1019972,1020471,1021002,1021503,
1022035,1022535,1023036,1023568,1024069,1024568,1025100,1025601,1026102,1026633,1027133,1027666,1028167,1028666,1029198,1029699,1030199,1030730,1031231,1031763,1032264,1032764,1033296,1033797,1034297,1034828,1035329,1035830,1036362,1036861,1037393,1037894,1038394,1038925,1039427,1039927,1040459,1040959,1041491,1041992,1042492,1043023,1043524,1044024,1044556,1045057,1045558,1046090,1046590,1047121,1047622,1048122,1048654,1049154,1049655,1050187,1050689,1051219,1051720,1052220,1052751,1053252,1053752,
1054284,1054786,1055285,1055817,1056317,1056849,1057349,1057850,1058382,1058883,1059383,1059915,1060415,1060947,1061447,1061947,1062479,1062981,1063480,1064012,1064514,1065014,1065545,1066045,1066577,1067078,1067578,1068110,1068611,1069112,1069642,1070142,1070674,1071175,1071675,1072207,1072709,1073209,1073740,1074241,1074741,1075273,1075773,1076305,1076807,1077308,1077839,1078340,1078840,1079372,1079871,1080403,1080904]},{"../main":555,"object-assign":446}],542:[function(a,t,m){function p(a){this.local=
this.regionalOptions[a||""]||this.regionalOptions[""]}var g=a("../main");a=a("object-assign");p.prototype=new g.baseCalendar;a(p.prototype,{name:"Coptic",jdEpoch:1825029.5,daysPerMonth:[30,30,30,30,30,30,30,30,30,30,30,30,5],hasYearZero:!1,minMonth:1,firstMonth:1,minDay:1,regionalOptions:{"":{name:"Coptic",epochs:["BAM","AM"],monthNames:"Thout;Paopi;Hathor;Koiak;Tobi;Meshir;Paremhat;Paremoude;Pashons;Paoni;Epip;Mesori;Pi Kogi Enavot".split(";"),monthNamesShort:"Tho Pao Hath Koi Tob Mesh Pat Pad Pash Pao Epi Meso PiK".split(" "),
dayNames:"Tkyriaka Pesnau Pshoment Peftoou Ptiou Psoou Psabbaton".split(" "),dayNamesShort:"Tky Pes Psh Pef Pti Pso Psa".split(" "),dayNamesMin:"Tk Pes Psh Pef Pt Pso Psa".split(" "),digits:null,dateFormat:"dd/mm/yyyy",firstDay:0,isRTL:!1}},leapYear:function(a){a=this._validate(a,this.minMonth,this.minDay,g.local.invalidYear);a=a.year()+(0>a.year()?1:0);return 3===a%4||-1===a%4},monthsInYear:function(a){this._validate(a,this.minMonth,this.minDay,g.local.invalidYear||g.regionalOptions[""].invalidYear);
return 13},weekOfYear:function(a,e,g){a=this.newDate(a,e,g);a.add(-a.dayOfWeek(),"d");return Math.floor((a.dayOfYear()-1)/7)+1},daysInMonth:function(a,e){a=this._validate(a,e,this.minDay,g.local.invalidMonth);return this.daysPerMonth[a.month()-1]+(13===a.month()&&this.leapYear(a.year())?1:0)},weekDay:function(a,e,g){return 6>(this.dayOfWeek(a,e,g)||7)},toJD:function(a,e,n){e=this._validate(a,e,n,g.local.invalidDate);a=e.year();0>a&&a++;return e.day()+30*(e.month()-1)+365*(a-1)+Math.floor(a/4)+this.jdEpoch-
1},fromJD:function(a){var e=Math.floor(a)+.5-this.jdEpoch,g=Math.floor((e-Math.floor((e+366)/1461))/365)+1;0>=g&&g--;e=Math.floor(a)+.5-this.newDate(g,1,1).toJD();a=Math.floor(e/30)+1;return this.newDate(g,a,e-30*(a-1)+1)}});g.calendars.coptic=p},{"../main":555,"object-assign":446}],543:[function(a,t,m){function p(a){this.local=this.regionalOptions[a||""]||this.regionalOptions[""]}var g=a("../main");a=a("object-assign");p.prototype=new g.baseCalendar;a(p.prototype,{name:"Discworld",jdEpoch:1721425.5,
daysPerMonth:[16,32,32,32,32,32,32,32,32,32,32,32,32],hasYearZero:!1,minMonth:1,firstMonth:1,minDay:1,regionalOptions:{"":{name:"Discworld",epochs:["BUC","UC"],monthNames:"Ick Offle February March April May June Grune August Spune Sektober Ember December".split(" "),monthNamesShort:"Ick Off Feb Mar Apr May Jun Gru Aug Spu Sek Emb Dec".split(" "),dayNames:"Sunday Octeday Monday Tuesday Wednesday Thursday Friday Saturday".split(" "),dayNamesShort:"Sun Oct Mon Tue Wed Thu Fri Sat".split(" "),dayNamesMin:"Su Oc Mo Tu We Th Fr Sa".split(" "),
digits:null,dateFormat:"yyyy/mm/dd",firstDay:2,isRTL:!1}},leapYear:function(a){this._validate(a,this.minMonth,this.minDay,g.local.invalidYear);return!1},monthsInYear:function(a){this._validate(a,this.minMonth,this.minDay,g.local.invalidYear);return 13},daysInYear:function(a){this._validate(a,this.minMonth,this.minDay,g.local.invalidYear);return 400},weekOfYear:function(a,g,b){a=this.newDate(a,g,b);a.add(-a.dayOfWeek(),"d");return Math.floor((a.dayOfYear()-1)/8)+1},daysInMonth:function(a,h){a=this._validate(a,
h,this.minDay,g.local.invalidMonth);return this.daysPerMonth[a.month()-1]},daysInWeek:function(){return 8},dayOfWeek:function(a,h,b){return(this._validate(a,h,b,g.local.invalidDate).day()+1)%8},weekDay:function(a,g,b){a=this.dayOfWeek(a,g,b);return 2<=a&&6>=a},extraInfo:function(a,n,b){a=this._validate(a,n,b,g.local.invalidDate);return{century:h[Math.floor((a.year()-1)/100)+1]||""}},toJD:function(a,h,b){b=this._validate(a,h,b,g.local.invalidDate);a=b.year()+(0>b.year()?1:0);h=b.month();b=b.day();
return b+(1<h?16:0)+(2<h?32*(h-2):0)+400*(a-1)+this.jdEpoch-1},fromJD:function(a){a=Math.floor(a+.5)-Math.floor(this.jdEpoch)-1;var e=Math.floor(a/400)+1;a-=400*(e-1);a+=15<a?16:0;var b=Math.floor(a/32)+1;return this.newDate(0>=e?e-1:e,b,a-32*(b-1)+1)}});var h={20:"Fruitbat",21:"Anchovy"};g.calendars.discworld=p},{"../main":555,"object-assign":446}],544:[function(a,t,m){function p(a){this.local=this.regionalOptions[a||""]||this.regionalOptions[""]}var g=a("../main");a=a("object-assign");p.prototype=
new g.baseCalendar;a(p.prototype,{name:"Ethiopian",jdEpoch:1724220.5,daysPerMonth:[30,30,30,30,30,30,30,30,30,30,30,30,5],hasYearZero:!1,minMonth:1,firstMonth:1,minDay:1,regionalOptions:{"":{name:"Ethiopian",epochs:["BEE","EE"],monthNames:"Meskerem Tikemet Hidar Tahesas Tir Yekatit Megabit Miazia Genbot Sene Hamle Nehase Pagume".split(" "),monthNamesShort:"Mes Tik Hid Tah Tir Yek Meg Mia Gen Sen Ham Neh Pag".split(" "),dayNames:"Ehud Segno Maksegno Irob Hamus Arb Kidame".split(" "),dayNamesShort:"Ehu Seg Mak Iro Ham Arb Kid".split(" "),
dayNamesMin:"Eh Se Ma Ir Ha Ar Ki".split(" "),digits:null,dateFormat:"dd/mm/yyyy",firstDay:0,isRTL:!1}},leapYear:function(a){a=this._validate(a,this.minMonth,this.minDay,g.local.invalidYear);a=a.year()+(0>a.year()?1:0);return 3===a%4||-1===a%4},monthsInYear:function(a){this._validate(a,this.minMonth,this.minDay,g.local.invalidYear||g.regionalOptions[""].invalidYear);return 13},weekOfYear:function(a,e,g){a=this.newDate(a,e,g);a.add(-a.dayOfWeek(),"d");return Math.floor((a.dayOfYear()-1)/7)+1},daysInMonth:function(a,
e){a=this._validate(a,e,this.minDay,g.local.invalidMonth);return this.daysPerMonth[a.month()-1]+(13===a.month()&&this.leapYear(a.year())?1:0)},weekDay:function(a,e,g){return 6>(this.dayOfWeek(a,e,g)||7)},toJD:function(a,e,n){e=this._validate(a,e,n,g.local.invalidDate);a=e.year();0>a&&a++;return e.day()+30*(e.month()-1)+365*(a-1)+Math.floor(a/4)+this.jdEpoch-1},fromJD:function(a){var e=Math.floor(a)+.5-this.jdEpoch,g=Math.floor((e-Math.floor((e+366)/1461))/365)+1;0>=g&&g--;e=Math.floor(a)+.5-this.newDate(g,
1,1).toJD();a=Math.floor(e/30)+1;return this.newDate(g,a,e-30*(a-1)+1)}});g.calendars.ethiopian=p},{"../main":555,"object-assign":446}],545:[function(a,t,m){function p(a){this.local=this.regionalOptions[a||""]||this.regionalOptions[""]}function g(a,g){return a-g*Math.floor(a/g)}var h=a("../main");a=a("object-assign");p.prototype=new h.baseCalendar;a(p.prototype,{name:"Hebrew",jdEpoch:347995.5,daysPerMonth:[30,29,30,29,30,29,30,29,30,29,30,29,29],hasYearZero:!1,minMonth:1,firstMonth:7,minDay:1,regionalOptions:{"":{name:"Hebrew",
epochs:["BAM","AM"],monthNames:"Nisan;Iyar;Sivan;Tammuz;Av;Elul;Tishrei;Cheshvan;Kislev;Tevet;Shevat;Adar;Adar II".split(";"),monthNamesShort:"Nis Iya Siv Tam Av Elu Tis Che Kis Tev She Ada Ad2".split(" "),dayNames:"Yom Rishon;Yom Sheni;Yom Shlishi;Yom Revi'i;Yom Chamishi;Yom Shishi;Yom Shabbat".split(";"),dayNamesShort:"Ris She Shl Rev Cha Shi Sha".split(" "),dayNamesMin:"Ri She Shl Re Ch Shi Sha".split(" "),digits:null,dateFormat:"dd/mm/yyyy",firstDay:0,isRTL:!1}},leapYear:function(a){a=this._validate(a,
this.minMonth,this.minDay,h.local.invalidYear);return this._leapYear(a.year())},_leapYear:function(a){return 7>g(7*(0>a?a+1:a)+1,19)},monthsInYear:function(a){this._validate(a,this.minMonth,this.minDay,h.local.invalidYear);return this._leapYear(a.year?a.year():a)?13:12},weekOfYear:function(a,g,b){a=this.newDate(a,g,b);a.add(-a.dayOfWeek(),"d");return Math.floor((a.dayOfYear()-1)/7)+1},daysInYear:function(a){a=this._validate(a,this.minMonth,this.minDay,h.local.invalidYear).year();return this.toJD(-1===
a?1:a+1,7,1)-this.toJD(a,7,1)},daysInMonth:function(a,n){a.year&&(n=a.month(),a=a.year());this._validate(a,n,this.minDay,h.local.invalidMonth);return 12===n&&this.leapYear(a)?30:8===n&&5===g(this.daysInYear(a),10)?30:9===n&&3===g(this.daysInYear(a),10)?29:this.daysPerMonth[n-1]},weekDay:function(a,g,b){return 6!==this.dayOfWeek(a,g,b)},extraInfo:function(a,g,b){a=this._validate(a,g,b,h.local.invalidDate);return{yearType:(this.leapYear(a)?"embolismic":"common")+" "+["deficient","regular","complete"][this.daysInYear(a)%
10-3]}},toJD:function(a,g,b){b=this._validate(a,g,b,h.local.invalidDate);a=b.year();g=b.month();b=b.day();var e=0>=a?a+1:a;b=this.jdEpoch+this._delay1(e)+this._delay2(e)+b+1;if(7>g){for(e=7;e<=this.monthsInYear(a);e++)b+=this.daysInMonth(a,e);e=1}else e=7;for(;e<g;e++)b+=this.daysInMonth(a,e);return b},_delay1:function(a){a=Math.floor((235*a-234)/19);a=29*a+Math.floor((12084+13753*a)/25920);3>g(3*(a+1),7)&&a++;return a},_delay2:function(a){var e=this._delay1(a-1),b=this._delay1(a);return 356===this._delay1(a+
1)-b?2:382===b-e?1:0},fromJD:function(a){a=Math.floor(a)+.5;for(var e=Math.floor(98496*(a-this.jdEpoch)/35975351)-1;a>=this.toJD(-1===e?1:e+1,7,1);)e++;for(var b=a<this.toJD(e,1,1)?7:1;a>this.toJD(e,b,this.daysInMonth(e,b));)b++;a=a-this.toJD(e,b,1)+1;return this.newDate(e,b,a)}});h.calendars.hebrew=p},{"../main":555,"object-assign":446}],546:[function(a,t,m){function p(a){this.local=this.regionalOptions[a||""]||this.regionalOptions[""]}var g=a("../main");a=a("object-assign");p.prototype=new g.baseCalendar;
a(p.prototype,{name:"Islamic",jdEpoch:1948439.5,daysPerMonth:[30,29,30,29,30,29,30,29,30,29,30,29],hasYearZero:!1,minMonth:1,firstMonth:1,minDay:1,regionalOptions:{"":{name:"Islamic",epochs:["BH","AH"],monthNames:"Muharram;Safar;Rabi' al-awwal;Rabi' al-thani;Jumada al-awwal;Jumada al-thani;Rajab;Sha'aban;Ramadan;Shawwal;Dhu al-Qi'dah;Dhu al-Hijjah".split(";"),monthNamesShort:"Muh Saf Rab1 Rab2 Jum1 Jum2 Raj Sha' Ram Shaw DhuQ DhuH".split(" "),dayNames:"Yawm al-ahad;Yawm al-ithnayn;Yawm ath-thulaathaa';Yawm al-arbi'aa';Yawm al-khams;Yawm al-jum'a;Yawm as-sabt".split(";"),
dayNamesShort:"Aha Ith Thu Arb Kha Jum Sab".split(" "),dayNamesMin:"Ah It Th Ar Kh Ju Sa".split(" "),digits:null,dateFormat:"yyyy/mm/dd",firstDay:6,isRTL:!1}},leapYear:function(a){return 11>(11*this._validate(a,this.minMonth,this.minDay,g.local.invalidYear).year()+14)%30},weekOfYear:function(a,e,g){a=this.newDate(a,e,g);a.add(-a.dayOfWeek(),"d");return Math.floor((a.dayOfYear()-1)/7)+1},daysInYear:function(a){return this.leapYear(a)?355:354},daysInMonth:function(a,e){a=this._validate(a,e,this.minDay,
g.local.invalidMonth);return this.daysPerMonth[a.month()-1]+(12===a.month()&&this.leapYear(a.year())?1:0)},weekDay:function(a,e,g){return 5!==this.dayOfWeek(a,e,g)},toJD:function(a,e,n){n=this._validate(a,e,n,g.local.invalidDate);a=n.year();e=n.month();n=n.day();a=0>=a?a+1:a;return n+Math.ceil(29.5*(e-1))+354*(a-1)+Math.floor((3+11*a)/30)+this.jdEpoch-1},fromJD:function(a){a=Math.floor(a)+.5;var e=Math.floor((30*(a-this.jdEpoch)+10646)/10631);e=0>=e?e-1:e;var g=Math.min(12,Math.ceil((a-29-this.toJD(e,
1,1))/29.5)+1);a=a-this.toJD(e,g,1)+1;return this.newDate(e,g,a)}});g.calendars.islamic=p},{"../main":555,"object-assign":446}],547:[function(a,t,m){function p(a){this.local=this.regionalOptions[a||""]||this.regionalOptions[""]}var g=a("../main");a=a("object-assign");p.prototype=new g.baseCalendar;a(p.prototype,{name:"Julian",jdEpoch:1721423.5,daysPerMonth:[31,28,31,30,31,30,31,31,30,31,30,31],hasYearZero:!1,minMonth:1,firstMonth:1,minDay:1,regionalOptions:{"":{name:"Julian",epochs:["BC","AD"],monthNames:"January February March April May June July August September October November December".split(" "),
monthNamesShort:"Jan Feb Mar Apr May Jun Jul Aug Sep Oct Nov Dec".split(" "),dayNames:"Sunday Monday Tuesday Wednesday Thursday Friday Saturday".split(" "),dayNamesShort:"Sun Mon Tue Wed Thu Fri Sat".split(" "),dayNamesMin:"Su Mo Tu We Th Fr Sa".split(" "),digits:null,dateFormat:"mm/dd/yyyy",firstDay:0,isRTL:!1}},leapYear:function(a){a=this._validate(a,this.minMonth,this.minDay,g.local.invalidYear);a=0>a.year()?a.year()+1:a.year();return 0===a%4},weekOfYear:function(a,e,g){a=this.newDate(a,e,g);a.add(4-
(a.dayOfWeek()||7),"d");return Math.floor((a.dayOfYear()-1)/7)+1},daysInMonth:function(a,e){a=this._validate(a,e,this.minDay,g.local.invalidMonth);return this.daysPerMonth[a.month()-1]+(2===a.month()&&this.leapYear(a.year())?1:0)},weekDay:function(a,e,g){return 6>(this.dayOfWeek(a,e,g)||7)},toJD:function(a,e,n){n=this._validate(a,e,n,g.local.invalidDate);a=n.year();e=n.month();n=n.day();0>a&&a++;2>=e&&(a--,e+=12);return Math.floor(365.25*(a+4716))+Math.floor(30.6001*(e+1))+n-1524.5},fromJD:function(a){var e=
Math.floor(a+.5)+1524,g=Math.floor((e-122.1)/365.25),b=Math.floor(365.25*g),h=Math.floor((e-b)/30.6001);a=h-Math.floor(14>h?1:13);g-=Math.floor(2<a?4716:4715);e=e-b-Math.floor(30.6001*h);0>=g&&g--;return this.newDate(g,a,e)}});g.calendars.julian=p},{"../main":555,"object-assign":446}],548:[function(a,t,m){function p(a){this.local=this.regionalOptions[a||""]||this.regionalOptions[""]}function g(a,g){return a-g*Math.floor(a/g)}var h=a("../main");a=a("object-assign");p.prototype=new h.baseCalendar;a(p.prototype,
{name:"Mayan",jdEpoch:584282.5,hasYearZero:!0,minMonth:0,firstMonth:0,minDay:0,regionalOptions:{"":{name:"Mayan",epochs:["",""],monthNames:"0 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17".split(" "),monthNamesShort:"0 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17".split(" "),dayNames:"0 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19".split(" "),dayNamesShort:"0 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19".split(" "),dayNamesMin:"0 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19".split(" "),digits:null,
dateFormat:"YYYY.m.d",firstDay:0,isRTL:!1,haabMonths:"Pop Uo Zip Zotz Tzec Xul Yaxkin Mol Chen Yax Zac Ceh Mac Kankin Muan Pax Kayab Cumku Uayeb".split(" "),tzolkinMonths:"Imix Ik Akbal Kan Chicchan Cimi Manik Lamat Muluc Oc Chuen Eb Ben Ix Men Cib Caban Etznab Cauac Ahau".split(" ")}},leapYear:function(a){this._validate(a,this.minMonth,this.minDay,h.local.invalidYear);return!1},formatYear:function(a){a=this._validate(a,this.minMonth,this.minDay,h.local.invalidYear).year();var e=Math.floor(a/400);
a%=400;a+=0>a?400:0;return e+"."+Math.floor(a/20)+"."+a%20},forYear:function(a){a=a.split(".");if(3>a.length)throw"Invalid Mayan year";for(var e=0,b=0;b<a.length;b++){var g=parseInt(a[b],10);if(19<Math.abs(g)||0<b&&0>g)throw"Invalid Mayan year";e=20*e+g}return e},monthsInYear:function(a){this._validate(a,this.minMonth,this.minDay,h.local.invalidYear);return 18},weekOfYear:function(a,g,b){this._validate(a,g,b,h.local.invalidDate);return 0},daysInYear:function(a){this._validate(a,this.minMonth,this.minDay,
h.local.invalidYear);return 360},daysInMonth:function(a,g){this._validate(a,g,this.minDay,h.local.invalidMonth);return 20},daysInWeek:function(){return 5},dayOfWeek:function(a,g,b){return this._validate(a,g,b,h.local.invalidDate).day()},weekDay:function(a,g,b){this._validate(a,g,b,h.local.invalidDate);return!0},extraInfo:function(a,g,b){g=this._validate(a,g,b,h.local.invalidDate).toJD();a=this._toHaab(g);g=this._toTzolkin(g);return{haabMonthName:this.local.haabMonths[a[0]-1],haabMonth:a[0],haabDay:a[1],
tzolkinDayName:this.local.tzolkinMonths[g[0]-1],tzolkinDay:g[0],tzolkinTrecena:g[1]}},_toHaab:function(a){a-=this.jdEpoch;a=g(a+8+340,365);return[Math.floor(a/20)+1,g(a,20)]},_toTzolkin:function(a){a-=this.jdEpoch;return[g(a+20-1,20)+1,g(a+4-1,13)+1]},toJD:function(a,g,b){a=this._validate(a,g,b,h.local.invalidDate);return a.day()+20*a.month()+360*a.year()+this.jdEpoch},fromJD:function(a){a=Math.floor(a)+.5-this.jdEpoch;var e=Math.floor(a/360);a%=360;a+=0>a?360:0;return this.newDate(e,Math.floor(a/
20),a%20)}});h.calendars.mayan=p},{"../main":555,"object-assign":446}],549:[function(a,t,m){function p(a){this.local=this.regionalOptions[a||""]||this.regionalOptions[""]}var g=a("../main");a=a("object-assign");p.prototype=new g.baseCalendar;var h=g.instance("gregorian");a(p.prototype,{name:"Nanakshahi",jdEpoch:2257673.5,daysPerMonth:[31,31,31,31,31,30,30,30,30,30,30,30],hasYearZero:!1,minMonth:1,firstMonth:1,minDay:1,regionalOptions:{"":{name:"Nanakshahi",epochs:["BN","AN"],monthNames:"Chet Vaisakh Jeth Harh Sawan Bhadon Assu Katak Maghar Poh Magh Phagun".split(" "),
monthNamesShort:"Che Vai Jet Har Saw Bha Ass Kat Mgr Poh Mgh Pha".split(" "),dayNames:"Somvaar Mangalvar Budhvaar Veervaar Shukarvaar Sanicharvaar Etvaar".split(" "),dayNamesShort:"Som Mangal Budh Veer Shukar Sanichar Et".split(" "),dayNamesMin:"So Ma Bu Ve Sh Sa Et".split(" "),digits:null,dateFormat:"dd-mm-yyyy",firstDay:0,isRTL:!1}},leapYear:function(a){a=this._validate(a,this.minMonth,this.minDay,g.local.invalidYear||g.regionalOptions[""].invalidYear);return h.leapYear(a.year()+(1>a.year()?1:0)+
1469)},weekOfYear:function(a,g,b){a=this.newDate(a,g,b);a.add(1-(a.dayOfWeek()||7),"d");return Math.floor((a.dayOfYear()-1)/7)+1},daysInMonth:function(a,h){a=this._validate(a,h,this.minDay,g.local.invalidMonth);return this.daysPerMonth[a.month()-1]+(12===a.month()&&this.leapYear(a.year())?1:0)},weekDay:function(a,g,b){return 6>(this.dayOfWeek(a,g,b)||7)},toJD:function(a,n,b){n=this._validate(a,n,b,g.local.invalidMonth);a=n.year();0>a&&a++;b=n.day();for(var e=1;e<n.month();e++)b+=this.daysPerMonth[e-
1];return b+h.toJD(a+1468,3,13)},fromJD:function(a){a=Math.floor(a+.5);for(var e=Math.floor((a-(this.jdEpoch-1))/366);a>=this.toJD(e+1,1,1);)e++;a=a-Math.floor(this.toJD(e,1,1)+.5)+1;for(var b=1;a>this.daysInMonth(e,b);)a-=this.daysInMonth(e,b),b++;return this.newDate(e,b,a)}});g.calendars.nanakshahi=p},{"../main":555,"object-assign":446}],550:[function(a,t,m){function p(a){this.local=this.regionalOptions[a||""]||this.regionalOptions[""]}var g=a("../main");a=a("object-assign");p.prototype=new g.baseCalendar;
a(p.prototype,{name:"Nepali",jdEpoch:1700709.5,daysPerMonth:[31,31,32,32,31,30,30,29,30,29,30,30],hasYearZero:!1,minMonth:1,firstMonth:1,minDay:1,daysPerYear:365,regionalOptions:{"":{name:"Nepali",epochs:["BBS","ABS"],monthNames:"Baisakh Jestha Ashadh Shrawan Bhadra Ashwin Kartik Mangsir Paush Mangh Falgun Chaitra".split(" "),monthNamesShort:"Bai Je As Shra Bha Ash Kar Mang Pau Ma Fal Chai".split(" "),dayNames:"Aaitabaar Sombaar Manglbaar Budhabaar Bihibaar Shukrabaar Shanibaar".split(" "),dayNamesShort:"Aaita Som Mangl Budha Bihi Shukra Shani".split(" "),
dayNamesMin:"Aai So Man Bu Bi Shu Sha".split(" "),digits:null,dateFormat:"dd/mm/yyyy",firstDay:1,isRTL:!1}},leapYear:function(a){return this.daysInYear(a)!==this.daysPerYear},weekOfYear:function(a,e,g){a=this.newDate(a,e,g);a.add(-a.dayOfWeek(),"d");return Math.floor((a.dayOfYear()-1)/7)+1},daysInYear:function(a){a=this._validate(a,this.minMonth,this.minDay,g.local.invalidYear).year();if("undefined"===typeof this.NEPALI_CALENDAR_DATA[a])return this.daysPerYear;for(var e=0,h=this.minMonth;12>=h;h++)e+=
this.NEPALI_CALENDAR_DATA[a][h];return e},daysInMonth:function(a,e){a.year&&(e=a.month(),a=a.year());this._validate(a,e,this.minDay,g.local.invalidMonth);return"undefined"===typeof this.NEPALI_CALENDAR_DATA[a]?this.daysPerMonth[e-1]:this.NEPALI_CALENDAR_DATA[a][e]},weekDay:function(a,e,g){return 6!==this.dayOfWeek(a,e,g)},toJD:function(a,e,n){n=this._validate(a,e,n,g.local.invalidDate);a=n.year();e=n.month();n=n.day();var b=g.instance(),h=0,u=e,q=a;this._createMissingCalendarData(a);a-=9<u||9===u&&
n>=this.NEPALI_CALENDAR_DATA[q][0]?56:57;9!==e&&(h=n,u--);for(;9!==u;)0>=u&&(u=12,q--),h+=this.NEPALI_CALENDAR_DATA[q][u],u--;9===e?(h+=n-this.NEPALI_CALENDAR_DATA[q][0],0>h&&(h+=b.daysInYear(a))):h+=this.NEPALI_CALENDAR_DATA[q][9]-this.NEPALI_CALENDAR_DATA[q][0];return b.newDate(a,1,1).add(h,"d").toJD()},fromJD:function(a){a=g.instance().fromJD(a);var e=a.year();a=a.dayOfYear();e+=56;this._createMissingCalendarData(e);for(var h=9,b=this.NEPALI_CALENDAR_DATA[e][h]-this.NEPALI_CALENDAR_DATA[e][0]+
1;a>b;)h++,12<h&&(h=1,e++),b+=this.NEPALI_CALENDAR_DATA[e][h];return this.newDate(e,h,this.NEPALI_CALENDAR_DATA[e][h]-(b-a))},_createMissingCalendarData:function(a){var e=this.daysPerMonth.slice(0);e.unshift(17);for(var g=a-1;g<a+2;g++)"undefined"===typeof this.NEPALI_CALENDAR_DATA[g]&&(this.NEPALI_CALENDAR_DATA[g]=e)},NEPALI_CALENDAR_DATA:{1970:[18,31,31,32,31,31,31,30,29,30,29,30,30],1971:[18,31,31,32,31,32,30,30,29,30,29,30,30],1972:[17,31,32,31,32,31,30,30,30,29,29,30,30],1973:[19,30,32,31,32,
31,30,30,30,29,30,29,31],1974:[19,31,31,32,30,31,31,30,29,30,29,30,30],1975:[18,31,31,32,32,30,31,30,29,30,29,30,30],1976:[17,31,32,31,32,31,30,30,30,29,29,30,31],1977:[18,31,32,31,32,31,31,29,30,29,30,29,31],1978:[18,31,31,32,31,31,31,30,29,30,29,30,30],1979:[18,31,31,32,32,31,30,30,29,30,29,30,30],1980:[17,31,32,31,32,31,30,30,30,29,29,30,31],1981:[18,31,31,31,32,31,31,29,30,30,29,30,30],1982:[18,31,31,32,31,31,31,30,29,30,29,30,30],1983:[18,31,31,32,32,31,30,30,29,30,29,30,30],1984:[17,31,32,31,
32,31,30,30,30,29,29,30,31],1985:[18,31,31,31,32,31,31,29,30,30,29,30,30],1986:[18,31,31,32,31,31,31,30,29,30,29,30,30],1987:[18,31,32,31,32,31,30,30,29,30,29,30,30],1988:[17,31,32,31,32,31,30,30,30,29,29,30,31],1989:[18,31,31,31,32,31,31,30,29,30,29,30,30],1990:[18,31,31,32,31,31,31,30,29,30,29,30,30],1991:[18,31,32,31,32,31,30,30,29,30,29,30,30],1992:[17,31,32,31,32,31,30,30,30,29,30,29,31],1993:[18,31,31,31,32,31,31,30,29,30,29,30,30],1994:[18,31,31,32,31,31,31,30,29,30,29,30,30],1995:[17,31,32,
31,32,31,30,30,30,29,29,30,30],1996:[17,31,32,31,32,31,30,30,30,29,30,29,31],1997:[18,31,31,32,31,31,31,30,29,30,29,30,30],1998:[18,31,31,32,31,31,31,30,29,30,29,30,30],1999:[17,31,32,31,32,31,30,30,30,29,29,30,31],2E3:[17,30,32,31,32,31,30,30,30,29,30,29,31],2001:[18,31,31,32,31,31,31,30,29,30,29,30,30],2002:[18,31,31,32,32,31,30,30,29,30,29,30,30],2003:[17,31,32,31,32,31,30,30,30,29,29,30,31],2004:[17,30,32,31,32,31,30,30,30,29,30,29,31],2005:[18,31,31,32,31,31,31,30,29,30,29,30,30],2006:[18,31,
31,32,32,31,30,30,29,30,29,30,30],2007:[17,31,32,31,32,31,30,30,30,29,29,30,31],2008:[17,31,31,31,32,31,31,29,30,30,29,29,31],2009:[18,31,31,32,31,31,31,30,29,30,29,30,30],2010:[18,31,31,32,32,31,30,30,29,30,29,30,30],2011:[17,31,32,31,32,31,30,30,30,29,29,30,31],2012:[17,31,31,31,32,31,31,29,30,30,29,30,30],2013:[18,31,31,32,31,31,31,30,29,30,29,30,30],2014:[18,31,31,32,32,31,30,30,29,30,29,30,30],2015:[17,31,32,31,32,31,30,30,30,29,29,30,31],2016:[17,31,31,31,32,31,31,29,30,30,29,30,30],2017:[18,
31,31,32,31,31,31,30,29,30,29,30,30],2018:[18,31,32,31,32,31,30,30,29,30,29,30,30],2019:[17,31,32,31,32,31,30,30,30,29,30,29,31],2020:[17,31,31,31,32,31,31,30,29,30,29,30,30],2021:[18,31,31,32,31,31,31,30,29,30,29,30,30],2022:[17,31,32,31,32,31,30,30,30,29,29,30,30],2023:[17,31,32,31,32,31,30,30,30,29,30,29,31],2024:[17,31,31,31,32,31,31,30,29,30,29,30,30],2025:[18,31,31,32,31,31,31,30,29,30,29,30,30],2026:[17,31,32,31,32,31,30,30,30,29,29,30,31],2027:[17,30,32,31,32,31,30,30,30,29,30,29,31],2028:[17,
31,31,32,31,31,31,30,29,30,29,30,30],2029:[18,31,31,32,31,32,30,30,29,30,29,30,30],2030:[17,31,32,31,32,31,30,30,30,30,30,30,31],2031:[17,31,32,31,32,31,31,31,31,31,31,31,31],2032:[17,32,32,32,32,32,32,32,32,32,32,32,32],2033:[18,31,31,32,32,31,30,30,29,30,29,30,30],2034:[17,31,32,31,32,31,30,30,30,29,29,30,31],2035:[17,30,32,31,32,31,31,29,30,30,29,29,31],2036:[17,31,31,32,31,31,31,30,29,30,29,30,30],2037:[18,31,31,32,32,31,30,30,29,30,29,30,30],2038:[17,31,32,31,32,31,30,30,30,29,29,30,31],2039:[17,
31,31,31,32,31,31,29,30,30,29,30,30],2040:[17,31,31,32,31,31,31,30,29,30,29,30,30],2041:[18,31,31,32,32,31,30,30,29,30,29,30,30],2042:[17,31,32,31,32,31,30,30,30,29,29,30,31],2043:[17,31,31,31,32,31,31,29,30,30,29,30,30],2044:[17,31,31,32,31,31,31,30,29,30,29,30,30],2045:[18,31,32,31,32,31,30,30,29,30,29,30,30],2046:[17,31,32,31,32,31,30,30,30,29,29,30,31],2047:[17,31,31,31,32,31,31,30,29,30,29,30,30],2048:[17,31,31,32,31,31,31,30,29,30,29,30,30],2049:[17,31,32,31,32,31,30,30,30,29,29,30,30],2050:[17,
31,32,31,32,31,30,30,30,29,30,29,31],2051:[17,31,31,31,32,31,31,30,29,30,29,30,30],2052:[17,31,31,32,31,31,31,30,29,30,29,30,30],2053:[17,31,32,31,32,31,30,30,30,29,29,30,30],2054:[17,31,32,31,32,31,30,30,30,29,30,29,31],2055:[17,31,31,32,31,31,31,30,29,30,30,29,30],2056:[17,31,31,32,31,32,30,30,29,30,29,30,30],2057:[17,31,32,31,32,31,30,30,30,29,29,30,31],2058:[17,30,32,31,32,31,30,30,30,29,30,29,31],2059:[17,31,31,32,31,31,31,30,29,30,29,30,30],2060:[17,31,31,32,32,31,30,30,29,30,29,30,30],2061:[17,
31,32,31,32,31,30,30,30,29,29,30,31],2062:[17,30,32,31,32,31,31,29,30,29,30,29,31],2063:[17,31,31,32,31,31,31,30,29,30,29,30,30],2064:[17,31,31,32,32,31,30,30,29,30,29,30,30],2065:[17,31,32,31,32,31,30,30,30,29,29,30,31],2066:[17,31,31,31,32,31,31,29,30,30,29,29,31],2067:[17,31,31,32,31,31,31,30,29,30,29,30,30],2068:[17,31,31,32,32,31,30,30,29,30,29,30,30],2069:[17,31,32,31,32,31,30,30,30,29,29,30,31],2070:[17,31,31,31,32,31,31,29,30,30,29,30,30],2071:[17,31,31,32,31,31,31,30,29,30,29,30,30],2072:[17,
31,32,31,32,31,30,30,29,30,29,30,30],2073:[17,31,32,31,32,31,30,30,30,29,29,30,31],2074:[17,31,31,31,32,31,31,30,29,30,29,30,30],2075:[17,31,31,32,31,31,31,30,29,30,29,30,30],2076:[16,31,32,31,32,31,30,30,30,29,29,30,30],2077:[17,31,32,31,32,31,30,30,30,29,30,29,31],2078:[17,31,31,31,32,31,31,30,29,30,29,30,30],2079:[17,31,31,32,31,31,31,30,29,30,29,30,30],2080:[16,31,32,31,32,31,30,30,30,29,29,30,30],2081:[17,31,31,32,32,31,30,30,30,29,30,30,30],2082:[17,31,32,31,32,31,30,30,30,29,30,30,30],2083:[17,
31,31,32,31,31,30,30,30,29,30,30,30],2084:[17,31,31,32,31,31,30,30,30,29,30,30,30],2085:[17,31,32,31,32,31,31,30,30,29,30,30,30],2086:[17,31,32,31,32,31,30,30,30,29,30,30,30],2087:[16,31,31,32,31,31,31,30,30,29,30,30,30],2088:[16,30,31,32,32,30,31,30,30,29,30,30,30],2089:[17,31,32,31,32,31,30,30,30,29,30,30,30],2090:[17,31,32,31,32,31,30,30,30,29,30,30,30],2091:[16,31,31,32,31,31,31,30,30,29,30,30,30],2092:[16,31,31,32,32,31,30,30,30,29,30,30,30],2093:[17,31,32,31,32,31,30,30,30,29,30,30,30],2094:[17,
31,31,32,31,31,30,30,30,29,30,30,30],2095:[17,31,31,32,31,31,31,30,29,30,30,30,30],2096:[17,30,31,32,32,31,30,30,29,30,29,30,30],2097:[17,31,32,31,32,31,30,30,30,29,30,30,30],2098:[17,31,31,32,31,31,31,29,30,29,30,30,31],2099:[17,31,31,32,31,31,31,30,29,29,30,30,30],2100:[17,31,32,31,32,30,31,30,29,30,29,30,30]}});g.calendars.nepali=p},{"../main":555,"object-assign":446}],551:[function(a,t,m){function p(a){this.local=this.regionalOptions[a||""]||this.regionalOptions[""]}var g=a("../main");a=a("object-assign");
p.prototype=new g.baseCalendar;a(p.prototype,{name:"Persian",jdEpoch:1948320.5,daysPerMonth:[31,31,31,31,31,31,30,30,30,30,30,29],hasYearZero:!1,minMonth:1,firstMonth:1,minDay:1,regionalOptions:{"":{name:"Persian",epochs:["BP","AP"],monthNames:"Farvardin Ordibehesht Khordad Tir Mordad Shahrivar Mehr Aban Azar Day Bahman Esfand".split(" "),monthNamesShort:"Far Ord Kho Tir Mor Sha Meh Aba Aza Day Bah Esf".split(" "),dayNames:"Yekshambe Doshambe Seshambe Chharshambe Panjshambe Jom'e Shambe".split(" "),
dayNamesShort:"Yek Do Se Ch Panj Jom Sha".split(" "),dayNamesMin:"Ye Do Se Ch Pa Jo Sh".split(" "),digits:null,dateFormat:"yyyy/mm/dd",firstDay:6,isRTL:!1}},leapYear:function(a){a=this._validate(a,this.minMonth,this.minDay,g.local.invalidYear);return 682>682*((a.year()-(0<a.year()?474:473))%2820+512)%2816},weekOfYear:function(a,e,g){a=this.newDate(a,e,g);a.add(-((a.dayOfWeek()+1)%7),"d");return Math.floor((a.dayOfYear()-1)/7)+1},daysInMonth:function(a,e){a=this._validate(a,e,this.minDay,g.local.invalidMonth);
return this.daysPerMonth[a.month()-1]+(12===a.month()&&this.leapYear(a.year())?1:0)},weekDay:function(a,e,g){return 5!==this.dayOfWeek(a,e,g)},toJD:function(a,e,n){n=this._validate(a,e,n,g.local.invalidDate);a=n.year();e=n.month();n=n.day();a-=0<=a?474:473;var b=474+(a-2820*Math.floor(a/2820));return n+(7>=e?31*(e-1):30*(e-1)+6)+Math.floor((682*b-110)/2816)+365*(b-1)+1029983*Math.floor(a/2820)+this.jdEpoch-1},fromJD:function(a){a=Math.floor(a)+.5;var e=a-this.toJD(475,1,1),g=Math.floor(e/1029983);
e-=1029983*Math.floor(e/1029983);var b=2820;1029982!==e&&(b=Math.floor(e/366),b=Math.floor((2134*b+2816*(e-366*Math.floor(e/366))+2815)/1028522)+b+1);g=b+2820*g+474;g=0>=g?g-1:g;e=a-this.toJD(g,1,1)+1;e=186>=e?Math.ceil(e/31):Math.ceil((e-6)/30);a=a-this.toJD(g,e,1)+1;return this.newDate(g,e,a)}});g.calendars.persian=p;g.calendars.jalali=p},{"../main":555,"object-assign":446}],552:[function(a,t,m){function p(a){this.local=this.regionalOptions[a||""]||this.regionalOptions[""]}var g=a("../main");a=
a("object-assign");var h=g.instance();p.prototype=new g.baseCalendar;a(p.prototype,{name:"Taiwan",jdEpoch:2419402.5,yearsOffset:1911,daysPerMonth:[31,28,31,30,31,30,31,31,30,31,30,31],hasYearZero:!1,minMonth:1,firstMonth:1,minDay:1,regionalOptions:{"":{name:"Taiwan",epochs:["BROC","ROC"],monthNames:"January February March April May June July August September October November December".split(" "),monthNamesShort:"Jan Feb Mar Apr May Jun Jul Aug Sep Oct Nov Dec".split(" "),dayNames:"Sunday Monday Tuesday Wednesday Thursday Friday Saturday".split(" "),
dayNamesShort:"Sun Mon Tue Wed Thu Fri Sat".split(" "),dayNamesMin:"Su Mo Tu We Th Fr Sa".split(" "),digits:null,dateFormat:"yyyy/mm/dd",firstDay:1,isRTL:!1}},leapYear:function(a){a=this._validate(a,this.minMonth,this.minDay,g.local.invalidYear);a=this._t2gYear(a.year());return h.leapYear(a)},weekOfYear:function(a,n,b){n=this._validate(a,this.minMonth,this.minDay,g.local.invalidYear);a=this._t2gYear(n.year());return h.weekOfYear(a,n.month(),n.day())},daysInMonth:function(a,h){a=this._validate(a,h,
this.minDay,g.local.invalidMonth);return this.daysPerMonth[a.month()-1]+(2===a.month()&&this.leapYear(a.year())?1:0)},weekDay:function(a,g,b){return 6>(this.dayOfWeek(a,g,b)||7)},toJD:function(a,n,b){n=this._validate(a,n,b,g.local.invalidDate);a=this._t2gYear(n.year());return h.toJD(a,n.month(),n.day())},fromJD:function(a){a=h.fromJD(a);var e=this._g2tYear(a.year());return this.newDate(e,a.month(),a.day())},_t2gYear:function(a){return a+this.yearsOffset+(a>=-this.yearsOffset&&-1>=a?1:0)},_g2tYear:function(a){return a-
this.yearsOffset-(1<=a&&a<=this.yearsOffset?1:0)}});g.calendars.taiwan=p},{"../main":555,"object-assign":446}],553:[function(a,t,m){function p(a){this.local=this.regionalOptions[a||""]||this.regionalOptions[""]}var g=a("../main");a=a("object-assign");var h=g.instance();p.prototype=new g.baseCalendar;a(p.prototype,{name:"Thai",jdEpoch:1523098.5,yearsOffset:543,daysPerMonth:[31,28,31,30,31,30,31,31,30,31,30,31],hasYearZero:!1,minMonth:1,firstMonth:1,minDay:1,regionalOptions:{"":{name:"Thai",epochs:["BBE",
"BE"],monthNames:"January February March April May June July August September October November December".split(" "),monthNamesShort:"Jan Feb Mar Apr May Jun Jul Aug Sep Oct Nov Dec".split(" "),dayNames:"Sunday Monday Tuesday Wednesday Thursday Friday Saturday".split(" "),dayNamesShort:"Sun Mon Tue Wed Thu Fri Sat".split(" "),dayNamesMin:"Su Mo Tu We Th Fr Sa".split(" "),digits:null,dateFormat:"dd/mm/yyyy",firstDay:0,isRTL:!1}},leapYear:function(a){a=this._validate(a,this.minMonth,this.minDay,g.local.invalidYear);
a=this._t2gYear(a.year());return h.leapYear(a)},weekOfYear:function(a,n,b){n=this._validate(a,this.minMonth,this.minDay,g.local.invalidYear);a=this._t2gYear(n.year());return h.weekOfYear(a,n.month(),n.day())},daysInMonth:function(a,h){a=this._validate(a,h,this.minDay,g.local.invalidMonth);return this.daysPerMonth[a.month()-1]+(2===a.month()&&this.leapYear(a.year())?1:0)},weekDay:function(a,g,b){return 6>(this.dayOfWeek(a,g,b)||7)},toJD:function(a,n,b){n=this._validate(a,n,b,g.local.invalidDate);a=
this._t2gYear(n.year());return h.toJD(a,n.month(),n.day())},fromJD:function(a){a=h.fromJD(a);var e=this._g2tYear(a.year());return this.newDate(e,a.month(),a.day())},_t2gYear:function(a){return a-this.yearsOffset-(1<=a&&a<=this.yearsOffset?1:0)},_g2tYear:function(a){return a+this.yearsOffset+(a>=-this.yearsOffset&&-1>=a?1:0)}});g.calendars.thai=p},{"../main":555,"object-assign":446}],554:[function(a,t,m){function p(a){this.local=this.regionalOptions[a||""]||this.regionalOptions[""]}var g=a("../main");
a=a("object-assign");p.prototype=new g.baseCalendar;a(p.prototype,{name:"UmmAlQura",hasYearZero:!1,minMonth:1,firstMonth:1,minDay:1,regionalOptions:{"":{name:"Umm al-Qura",epochs:["BH","AH"],monthNames:"Al-Muharram;Safar;Rabi' al-awwal;Rabi' Al-Thani;Jumada Al-Awwal;Jumada Al-Thani;Rajab;Sha'aban;Ramadan;Shawwal;Dhu al-Qi'dah;Dhu al-Hijjah".split(";"),monthNamesShort:"Muh Saf Rab1 Rab2 Jum1 Jum2 Raj Sha' Ram Shaw DhuQ DhuH".split(" "),dayNames:"Yawm al-Ahad;Yawm al-Ithnain;Yawm al-Thalth;Yawm al-Arba;Yawm al-Khams;Yawm al-Juma;Yawm al-Sabt".split(";"),
dayNamesMin:"Ah Ith Th Ar Kh Ju Sa".split(" "),digits:null,dateFormat:"yyyy/mm/dd",firstDay:6,isRTL:!0}},leapYear:function(a){a=this._validate(a,this.minMonth,this.minDay,g.local.invalidYear);return 355===this.daysInYear(a.year())},weekOfYear:function(a,g,b){a=this.newDate(a,g,b);a.add(-a.dayOfWeek(),"d");return Math.floor((a.dayOfYear()-1)/7)+1},daysInYear:function(a){for(var e=0,b=1;12>=b;b++)e+=this.daysInMonth(a,b);return e},daysInMonth:function(a,n){a=this._validate(a,n,this.minDay,g.local.invalidMonth).toJD()-
24E5+.5;for(var b=n=0;b<h.length;b++){if(h[b]>a)return h[n]-h[n-1];n++}return 30},weekDay:function(a,g,b){return 5!==this.dayOfWeek(a,g,b)},toJD:function(a,n,b){a=this._validate(a,n,b,g.local.invalidDate);n=12*(a.year()-1)+a.month()-15292;return a.day()+h[n-1]-1+24E5-.5},fromJD:function(a){a=a-24E5+.5;for(var e=0,b=0;b<h.length&&!(h[b]>a);b++)e++;b=e+15292;var g=Math.floor((b-1)/12);return this.newDate(g+1,b-12*g,a-h[e-1]+1)},isValid:function(a,h,b){var e=g.baseCalendar.prototype.isValid.apply(this,
arguments);e&&(a=null!=a.year?a.year:a,e=1276<=a&&1500>=a);return e},_validate:function(a,h,b,l){var e=g.baseCalendar.prototype._validate.apply(this,arguments);if(1276>e.year||1500<e.year)throw l.replace(/\{0\}/,this.local.name);return e}});g.calendars.ummalqura=p;var h=[20,50,79,109,138,168,197,227,256,286,315,345,374,404,433,463,492,522,551,581,611,641,670,700,729,759,788,818,847,877,906,936,965,995,1024,1054,1083,1113,1142,1172,1201,1231,1260,1290,1320,1350,1379,1409,1438,1468,1497,1527,1556,1586,
1615,1645,1674,1704,1733,1763,1792,1822,1851,1881,1910,1940,1969,1999,2028,2058,2087,2117,2146,2176,2205,2235,2264,2294,2323,2353,2383,2413,2442,2472,2501,2531,2560,2590,2619,2649,2678,2708,2737,2767,2796,2826,2855,2885,2914,2944,2973,3003,3032,3062,3091,3121,3150,3180,3209,3239,3268,3298,3327,3357,3386,3416,3446,3476,3505,3535,3564,3594,3623,3653,3682,3712,3741,3771,3800,3830,3859,3889,3918,3948,3977,4007,4036,4066,4095,4125,4155,4185,4214,4244,4273,4303,4332,4362,4391,4421,4450,4480,4509,4539,4568,
4598,4627,4657,4686,4716,4745,4775,4804,4834,4863,4893,4922,4952,4981,5011,5040,5070,5099,5129,5158,5188,5218,5248,5277,5307,5336,5366,5395,5425,5454,5484,5513,5543,5572,5602,5631,5661,5690,5720,5749,5779,5808,5838,5867,5897,5926,5956,5985,6015,6044,6074,6103,6133,6162,6192,6221,6251,6281,6311,6340,6370,6399,6429,6458,6488,6517,6547,6576,6606,6635,6665,6694,6724,6753,6783,6812,6842,6871,6901,6930,6960,6989,7019,7048,7078,7107,7137,7166,7196,7225,7255,7284,7314,7344,7374,7403,7433,7462,7492,7521,7551,
7580,7610,7639,7669,7698,7728,7757,7787,7816,7846,7875,7905,7934,7964,7993,8023,8053,8083,8112,8142,8171,8201,8230,8260,8289,8319,8348,8378,8407,8437,8466,8496,8525,8555,8584,8614,8643,8673,8702,8732,8761,8791,8821,8850,8880,8909,8938,8968,8997,9027,9056,9086,9115,9145,9175,9205,9234,9264,9293,9322,9352,9381,9410,9440,9470,9499,9529,9559,9589,9618,9648,9677,9706,9736,9765,9794,9824,9853,9883,9913,9943,9972,10002,10032,10061,10090,10120,10149,10178,10208,10237,10267,10297,10326,10356,10386,10415,10445,
10474,10504,10533,10562,10592,10621,10651,10680,10710,10740,10770,10799,10829,10858,10888,10917,10947,10976,11005,11035,11064,11094,11124,11153,11183,11213,11242,11272,11301,11331,11360,11389,11419,11448,11478,11507,11537,11567,11596,11626,11655,11685,11715,11744,11774,11803,11832,11862,11891,11921,11950,11980,12010,12039,12069,12099,12128,12158,12187,12216,12246,12275,12304,12334,12364,12393,12423,12453,12483,12512,12542,12571,12600,12630,12659,12688,12718,12747,12777,12807,12837,12866,12896,12926,
12955,12984,13014,13043,13072,13102,13131,13161,13191,13220,13250,13280,13310,13339,13368,13398,13427,13456,13486,13515,13545,13574,13604,13634,13664,13693,13723,13752,13782,13811,13840,13870,13899,13929,13958,13988,14018,14047,14077,14107,14136,14166,14195,14224,14254,14283,14313,14342,14372,14401,14431,14461,14490,14520,14550,14579,14609,14638,14667,14697,14726,14756,14785,14815,14844,14874,14904,14933,14963,14993,15021,15051,15081,15110,15140,15169,15199,15228,15258,15287,15317,15347,15377,15406,
15436,15465,15494,15524,15553,15582,15612,15641,15671,15701,15731,15760,15790,15820,15849,15878,15908,15937,15966,15996,16025,16055,16085,16114,16144,16174,16204,16233,16262,16292,16321,16350,16380,16409,16439,16468,16498,16528,16558,16587,16617,16646,16676,16705,16734,16764,16793,16823,16852,16882,16912,16941,16971,17001,17030,17060,17089,17118,17148,17177,17207,17236,17266,17295,17325,17355,17384,17414,17444,17473,17502,17532,17561,17591,17620,17650,17679,17709,17738,17768,17798,17827,17857,17886,
17916,17945,17975,18004,18034,18063,18093,18122,18152,18181,18211,18241,18270,18300,18330,18359,18388,18418,18447,18476,18506,18535,18565,18595,18625,18654,18684,18714,18743,18772,18802,18831,18860,18890,18919,18949,18979,19008,19038,19068,19098,19127,19156,19186,19215,19244,19274,19303,19333,19362,19392,19422,19452,19481,19511,19540,19570,19599,19628,19658,19687,19717,19746,19776,19806,19836,19865,19895,19924,19954,19983,20012,20042,20071,20101,20130,20160,20190,20219,20249,20279,20308,20338,20367,
20396,20426,20455,20485,20514,20544,20573,20603,20633,20662,20692,20721,20751,20780,20810,20839,20869,20898,20928,20957,20987,21016,21046,21076,21105,21135,21164,21194,21223,21253,21282,21312,21341,21371,21400,21430,21459,21489,21519,21548,21578,21607,21637,21666,21696,21725,21754,21784,21813,21843,21873,21902,21932,21962,21991,22021,22050,22080,22109,22138,22168,22197,22227,22256,22286,22316,22346,22375,22405,22434,22464,22493,22522,22552,22581,22611,22640,22670,22700,22730,22759,22789,22818,22848,
22877,22906,22936,22965,22994,23024,23054,23083,23113,23143,23173,23202,23232,23261,23290,23320,23349,23379,23408,23438,23467,23497,23527,23556,23586,23616,23645,23674,23704,23733,23763,23792,23822,23851,23881,23910,23940,23970,23999,24029,24058,24088,24117,24147,24176,24206,24235,24265,24294,24324,24353,24383,24413,24442,24472,24501,24531,24560,24590,24619,24648,24678,24707,24737,24767,24796,24826,24856,24885,24915,24944,24974,25003,25032,25062,25091,25121,25150,25180,25210,25240,25269,25299,25328,
25358,25387,25416,25446,25475,25505,25534,25564,25594,25624,25653,25683,25712,25742,25771,25800,25830,25859,25888,25918,25948,25977,26007,26037,26067,26096,26126,26155,26184,26214,26243,26272,26302,26332,26361,26391,26421,26451,26480,26510,26539,26568,26598,26627,26656,26686,26715,26745,26775,26805,26834,26864,26893,26923,26952,26982,27011,27041,27070,27099,27129,27159,27188,27218,27248,27277,27307,27336,27366,27395,27425,27454,27484,27513,27542,27572,27602,27631,27661,27691,27720,27750,27779,27809,
27838,27868,27897,27926,27956,27985,28015,28045,28074,28104,28134,28163,28193,28222,28252,28281,28310,28340,28369,28399,28428,28458,28488,28517,28547,28577,28607,28636,28665,28695,28724,28754,28783,28813,28843,28872,28901,28931,28960,28990,29019,29049,29078,29108,29137,29167,29196,29226,29255,29285,29315,29345,29375,29404,29434,29463,29492,29522,29551,29580,29610,29640,29669,29699,29729,29759,29788,29818,29847,29876,29906,29935,29964,29994,30023,30053,30082,30112,30141,30171,30200,30230,30259,30289,
30318,30348,30378,30408,30437,30467,30496,30526,30555,30585,30614,30644,30673,30703,30732,30762,30791,30821,30850,30880,30909,30939,30968,30998,31027,31057,31086,31116,31145,31175,31204,31234,31263,31293,31322,31352,31381,31411,31441,31471,31500,31530,31559,31589,31618,31648,31676,31706,31736,31766,31795,31825,31854,31884,31913,31943,31972,32002,32031,32061,32090,32120,32150,32180,32209,32239,32268,32298,32327,32357,32386,32416,32445,32475,32504,32534,32563,32593,32622,32652,32681,32711,32740,32770,
32799,32829,32858,32888,32917,32947,32976,33006,33035,33065,33094,33124,33153,33183,33213,33243,33272,33302,33331,33361,33390,33420,33450,33479,33509,33539,33568,33598,33627,33657,33686,33716,33745,33775,33804,33834,33863,33893,33922,33952,33981,34011,34040,34069,34099,34128,34158,34187,34217,34247,34277,34306,34336,34365,34395,34424,34454,34483,34512,34542,34571,34601,34631,34660,34690,34719,34749,34778,34808,34837,34867,34896,34926,34955,34985,35015,35044,35074,35103,35133,35162,35192,35222,35251,
35280,35310,35340,35370,35399,35429,35458,35488,35517,35547,35576,35605,35635,35665,35694,35723,35753,35782,35811,35841,35871,35901,35930,35960,35989,36019,36048,36078,36107,36136,36166,36195,36225,36254,36284,36314,36343,36373,36403,36433,36462,36492,36521,36551,36580,36610,36639,36669,36698,36728,36757,36786,36816,36845,36875,36904,36934,36963,36993,37022,37052,37081,37111,37141,37170,37200,37229,37259,37288,37318,37347,37377,37406,37436,37465,37495,37524,37554,37584,37613,37643,37672,37701,37731,
37760,37790,37819,37849,37878,37908,37938,37967,37997,38027,38056,38085,38115,38144,38174,38203,38233,38262,38292,38322,38351,38381,38410,38440,38469,38499,38528,38558,38587,38617,38646,38676,38705,38735,38764,38794,38823,38853,38882,38912,38941,38971,39001,39030,39059,39089,39118,39148,39178,39208,39237,39267,39297,39326,39355,39385,39414,39444,39473,39503,39532,39562,39592,39621,39650,39680,39709,39739,39768,39798,39827,39857,39886,39916,39946,39975,40005,40035,40064,40094,40123,40153,40182,40212,
40241,40271,40300,40330,40359,40389,40418,40448,40477,40507,40536,40566,40595,40625,40655,40685,40714,40744,40773,40803,40832,40862,40892,40921,40951,40980,41009,41039,41068,41098,41127,41157,41186,41216,41245,41275,41304,41334,41364,41393,41422,41452,41481,41511,41540,41570,41599,41629,41658,41688,41718,41748,41777,41807,41836,41865,41894,41924,41953,41983,42012,42042,42072,42102,42131,42161,42190,42220,42249,42279,42308,42337,42367,42397,42426,42456,42485,42515,42545,42574,42604,42633,42662,42692,
42721,42751,42780,42810,42839,42869,42899,42929,42958,42988,43017,43046,43076,43105,43135,43164,43194,43223,43253,43283,43312,43342,43371,43401,43430,43460,43489,43519,43548,43578,43607,43637,43666,43696,43726,43755,43785,43814,43844,43873,43903,43932,43962,43991,44021,44050,44080,44109,44139,44169,44198,44228,44258,44287,44317,44346,44375,44405,44434,44464,44493,44523,44553,44582,44612,44641,44671,44700,44730,44759,44788,44818,44847,44877,44906,44936,44966,44996,45025,45055,45084,45114,45143,45172,
45202,45231,45261,45290,45320,45350,45380,45409,45439,45468,45498,45527,45556,45586,45615,45644,45674,45704,45733,45763,45793,45823,45852,45882,45911,45940,45970,45999,46028,46058,46088,46117,46147,46177,46206,46236,46265,46295,46324,46354,46383,46413,46442,46472,46501,46531,46560,46590,46620,46649,46679,46708,46738,46767,46797,46826,46856,46885,46915,46944,46974,47003,47033,47063,47092,47122,47151,47181,47210,47240,47269,47298,47328,47357,47387,47417,47446,47476,47506,47535,47565,47594,47624,47653,
47682,47712,47741,47771,47800,47830,47860,47890,47919,47949,47978,48008,48037,48066,48096,48125,48155,48184,48214,48244,48273,48303,48333,48362,48392,48421,48450,48480,48509,48538,48568,48598,48627,48657,48687,48717,48746,48776,48805,48834,48864,48893,48922,48952,48982,49011,49041,49071,49100,49130,49160,49189,49218,49248,49277,49306,49336,49365,49395,49425,49455,49484,49514,49543,49573,49602,49632,49661,49690,49720,49749,49779,49809,49838,49868,49898,49927,49957,49986,50016,50045,50075,50104,50133,
50163,50192,50222,50252,50281,50311,50340,50370,50400,50429,50459,50488,50518,50547,50576,50606,50635,50665,50694,50724,50754,50784,50813,50843,50872,50902,50931,50960,50990,51019,51049,51078,51108,51138,51167,51197,51227,51256,51286,51315,51345,51374,51403,51433,51462,51492,51522,51552,51582,51611,51641,51670,51699,51729,51758,51787,51816,51846,51876,51906,51936,51965,51995,52025,52054,52083,52113,52142,52171,52200,52230,52260,52290,52319,52349,52379,52408,52438,52467,52497,52526,52555,52585,52614,
52644,52673,52703,52733,52762,52792,52822,52851,52881,52910,52939,52969,52998,53028,53057,53087,53116,53146,53176,53205,53235,53264,53294,53324,53353,53383,53412,53441,53471,53500,53530,53559,53589,53619,53648,53678,53708,53737,53767,53796,53825,53855,53884,53913,53943,53973,54003,54032,54062,54092,54121,54151,54180,54209,54239,54268,54297,54327,54357,54387,54416,54446,54476,54505,54535,54564,54593,54623,54652,54681,54711,54741,54770,54800,54830,54859,54889,54919,54948,54977,55007,55036,55066,55095,
55125,55154,55184,55213,55243,55273,55302,55332,55361,55391,55420,55450,55479,55508,55538,55567,55597,55627,55657,55686,55716,55745,55775,55804,55834,55863,55892,55922,55951,55981,56011,56040,56070,56100,56129,56159,56188,56218,56247,56276,56306,56335,56365,56394,56424,56454,56483,56513,56543,56572,56601,56631,56660,56690,56719,56749,56778,56808,56837,56867,56897,56926,56956,56985,57015,57044,57074,57103,57133,57162,57192,57221,57251,57280,57310,57340,57369,57399,57429,57458,57487,57517,57546,57576,
57605,57634,57664,57694,57723,57753,57783,57813,57842,57871,57901,57930,57959,57989,58018,58048,58077,58107,58137,58167,58196,58226,58255,58285,58314,58343,58373,58402,58432,58461,58491,58521,58551,58580,58610,58639,58669,58698,58727,58757,58786,58816,58845,58875,58905,58934,58964,58994,59023,59053,59082,59111,59141,59170,59200,59229,59259,59288,59318,59348,59377,59407,59436,59466,59495,59525,59554,59584,59613,59643,59672,59702,59731,59761,59791,59820,59850,59879,59909,59939,59968,59997,60027,60056,
60086,60115,60145,60174,60204,60234,60264,60293,60323,60352,60381,60411,60440,60469,60499,60528,60558,60588,60618,60648,60677,60707,60736,60765,60795,60824,60853,60883,60912,60942,60972,61002,61031,61061,61090,61120,61149,61179,61208,61237,61267,61296,61326,61356,61385,61415,61445,61474,61504,61533,61563,61592,61621,61651,61680,61710,61739,61769,61799,61828,61858,61888,61917,61947,61976,62006,62035,62064,62094,62123,62153,62182,62212,62242,62271,62301,62331,62360,62390,62419,62448,62478,62507,62537,
62566,62596,62625,62655,62685,62715,62744,62774,62803,62832,62862,62891,62921,62950,62980,63009,63039,63069,63099,63128,63157,63187,63216,63246,63275,63305,63334,63363,63393,63423,63453,63482,63512,63541,63571,63600,63630,63659,63689,63718,63747,63777,63807,63836,63866,63895,63925,63955,63984,64014,64043,64073,64102,64131,64161,64190,64220,64249,64279,64309,64339,64368,64398,64427,64457,64486,64515,64545,64574,64603,64633,64663,64692,64722,64752,64782,64811,64841,64870,64899,64929,64958,64987,65017,
65047,65076,65106,65136,65166,65195,65225,65254,65283,65313,65342,65371,65401,65431,65460,65490,65520,65549,65579,65608,65638,65667,65697,65726,65755,65785,65815,65844,65874,65903,65933,65963,65992,66022,66051,66081,66110,66140,66169,66199,66228,66258,66287,66317,66346,66376,66405,66435,66465,66494,66524,66553,66583,66612,66641,66671,66700,66730,66760,66789,66819,66849,66878,66908,66937,66967,66996,67025,67055,67084,67114,67143,67173,67203,67233,67262,67292,67321,67351,67380,67409,67439,67468,67497,
67527,67557,67587,67617,67646,67676,67705,67735,67764,67793,67823,67852,67882,67911,67941,67971,68E3,68030,68060,68089,68119,68148,68177,68207,68236,68266,68295,68325,68354,68384,68414,68443,68473,68502,68532,68561,68591,68620,68650,68679,68708,68738,68768,68797,68827,68857,68886,68916,68946,68975,69004,69034,69063,69092,69122,69152,69181,69211,69240,69270,69300,69330,69359,69388,69418,69447,69476,69506,69535,69565,69595,69624,69654,69684,69713,69743,69772,69802,69831,69861,69890,69919,69949,69978,
70008,70038,70067,70097,70126,70156,70186,70215,70245,70274,70303,70333,70362,70392,70421,70451,70481,70510,70540,70570,70599,70629,70658,70687,70717,70746,70776,70805,70835,70864,70894,70924,70954,70983,71013,71042,71071,71101,71130,71159,71189,71218,71248,71278,71308,71337,71367,71397,71426,71455,71485,71514,71543,71573,71602,71632,71662,71691,71721,71751,71781,71810,71839,71869,71898,71927,71957,71986,72016,72046,72075,72105,72135,72164,72194,72223,72253,72282,72311,72341,72370,72400,72429,72459,
72489,72518,72548,72577,72607,72637,72666,72695,72725,72754,72784,72813,72843,72872,72902,72931,72961,72991,73020,73050,73080,73109,73139,73168,73197,73227,73256,73286,73315,73345,73375,73404,73434,73464,73493,73523,73552,73581,73611,73640,73669,73699,73729,73758,73788,73818,73848,73877,73907,73936,73965,73995,74024,74053,74083,74113,74142,74172,74202,74231,74261,74291,74320,74349,74379,74408,74437,74467,74497,74526,74556,74586,74615,74645,74675,74704,74733,74763,74792,74822,74851,74881,74910,74940,
74969,74999,75029,75058,75088,75117,75147,75176,75206,75235,75264,75294,75323,75353,75383,75412,75442,75472,75501,75531,75560,75590,75619,75648,75678,75707,75737,75766,75796,75826,75856,75885,75915,75944,75974,76003,76032,76062,76091,76121,76150,76180,76210,76239,76269,76299,76328,76358,76387,76416,76446,76475,76505,76534,76564,76593,76623,76653,76682,76712,76741,76771,76801,76830,76859,76889,76918,76948,76977,77007,77036,77066,77096,77125,77155,77185,77214,77243,77273,77302,77332,77361,77390,77420,
77450,77479,77509,77539,77569,77598,77627,77657,77686,77715,77745,77774,77804,77833,77863,77893,77923,77952,77982,78011,78041,78070,78099,78129,78158,78188,78217,78247,78277,78307,78336,78366,78395,78425,78454,78483,78513,78542,78572,78601,78631,78661,78690,78720,78750,78779,78808,78838,78867,78897,78926,78956,78985,79015,79044,79074,79104,79133,79163,79192,79222,79251,79281,79310,79340,79369,79399,79428,79458,79487,79517,79546,79576,79606,79635,79665,79695,79724,79753,79783,79812,79841,79871,79900,
79930,79960,79990]},{"../main":555,"object-assign":446}],555:[function(a,t,m){function p(){this.regionalOptions=[];this.regionalOptions[""]={invalidCalendar:"Calendar {0} not found",invalidDate:"Invalid {0} date",invalidMonth:"Invalid {0} month",invalidYear:"Invalid {0} year",differentCalendars:"Cannot mix {0} and {1} dates"};this.local=this.regionalOptions[""];this.calendars={};this._localCals={}}function g(a,e,g,d){this._calendar=a;this._year=e;this._month=g;this._day=d;if(0===this._calendar._validateLevel&&
!this._calendar.isValid(this._year,this._month,this._day))throw(b.local.invalidDate||b.regionalOptions[""].invalidDate).replace(/\{0\}/,this._calendar.local.name);}function h(b,a){b=""+b;return"000000".substring(0,a-b.length)+b}function e(){this.shortYearCutoff="+10"}function n(b){this.local=this.regionalOptions[b]||this.regionalOptions[""]}a=a("object-assign");a(p.prototype,{instance:function(b,a){b=(b||"gregorian").toLowerCase();a=a||"";var e=this._localCals[b+"-"+a];!e&&this.calendars[b]&&(e=new this.calendars[b](a),
this._localCals[b+"-"+a]=e);if(!e)throw(this.local.invalidCalendar||this.regionalOptions[""].invalidCalendar).replace(/\{0\}/,b);return e},newDate:function(b,a,e,d,f){d=(null!=b&&b.year?b.calendar():"string"===typeof d?this.instance(d,f):d)||this.instance();return d.newDate(b,a,e)},substituteDigits:function(b){return function(a){return(a+"").replace(/[0-9]/g,function(a){return b[a]})}},substituteChineseDigits:function(b,a){return function(e){for(var d="",f=0;0<e;){var c=e%10;d=(0===c?"":b[c]+a[f])+
d;f++;e=Math.floor(e/10)}0===d.indexOf(b[1]+a[1])&&(d=d.substr(1));return d||b[0]}}});a(g.prototype,{newDate:function(b,a,e){return this._calendar.newDate(null==b?this:b,a,e)},year:function(b){return 0===arguments.length?this._year:this.set(b,"y")},month:function(b){return 0===arguments.length?this._month:this.set(b,"m")},day:function(b){return 0===arguments.length?this._day:this.set(b,"d")},date:function(a,e,g){if(!this._calendar.isValid(a,e,g))throw(b.local.invalidDate||b.regionalOptions[""].invalidDate).replace(/\{0\}/,
this._calendar.local.name);this._year=a;this._month=e;this._day=g;return this},leapYear:function(){return this._calendar.leapYear(this)},epoch:function(){return this._calendar.epoch(this)},formatYear:function(){return this._calendar.formatYear(this)},monthOfYear:function(){return this._calendar.monthOfYear(this)},weekOfYear:function(){return this._calendar.weekOfYear(this)},daysInYear:function(){return this._calendar.daysInYear(this)},dayOfYear:function(){return this._calendar.dayOfYear(this)},daysInMonth:function(){return this._calendar.daysInMonth(this)},
dayOfWeek:function(){return this._calendar.dayOfWeek(this)},weekDay:function(){return this._calendar.weekDay(this)},extraInfo:function(){return this._calendar.extraInfo(this)},add:function(b,a){return this._calendar.add(this,b,a)},set:function(b,a){return this._calendar.set(this,b,a)},compareTo:function(a){if(this._calendar.name!==a._calendar.name)throw(b.local.differentCalendars||b.regionalOptions[""].differentCalendars).replace(/\{0\}/,this._calendar.local.name).replace(/\{1\}/,a._calendar.local.name);
a=this._year!==a._year?this._year-a._year:this._month!==a._month?this.monthOfYear()-a.monthOfYear():this._day-a._day;return 0===a?0:0>a?-1:1},calendar:function(){return this._calendar},toJD:function(){return this._calendar.toJD(this)},fromJD:function(b){return this._calendar.fromJD(b)},toJSDate:function(){return this._calendar.toJSDate(this)},fromJSDate:function(b){return this._calendar.fromJSDate(b)},toString:function(){return(0>this.year()?"-":"")+h(Math.abs(this.year()),4)+"-"+h(this.month(),2)+
"-"+h(this.day(),2)}});a(e.prototype,{_validateLevel:0,newDate:function(a,e,h){if(null==a)return this.today();a.year&&(this._validate(a,e,h,b.local.invalidDate||b.regionalOptions[""].invalidDate),h=a.day(),e=a.month(),a=a.year());return new g(this,a,e,h)},today:function(){return this.fromJSDate(new Date)},epoch:function(a){return 0>this._validate(a,this.minMonth,this.minDay,b.local.invalidYear||b.regionalOptions[""].invalidYear).year()?this.local.epochs[0]:this.local.epochs[1]},formatYear:function(a){a=
this._validate(a,this.minMonth,this.minDay,b.local.invalidYear||b.regionalOptions[""].invalidYear);return(0>a.year()?"-":"")+h(Math.abs(a.year()),4)},monthsInYear:function(a){this._validate(a,this.minMonth,this.minDay,b.local.invalidYear||b.regionalOptions[""].invalidYear);return 12},monthOfYear:function(a,e){a=this._validate(a,e,this.minDay,b.local.invalidMonth||b.regionalOptions[""].invalidMonth);return(a.month()+this.monthsInYear(a)-this.firstMonth)%this.monthsInYear(a)+this.minMonth},fromMonthOfYear:function(a,
e){e=(e+this.firstMonth-2*this.minMonth)%this.monthsInYear(a)+this.minMonth;this._validate(a,e,this.minDay,b.local.invalidMonth||b.regionalOptions[""].invalidMonth);return e},daysInYear:function(a){a=this._validate(a,this.minMonth,this.minDay,b.local.invalidYear||b.regionalOptions[""].invalidYear);return this.leapYear(a)?366:365},dayOfYear:function(a,e,g){a=this._validate(a,e,g,b.local.invalidDate||b.regionalOptions[""].invalidDate);return a.toJD()-this.newDate(a.year(),this.fromMonthOfYear(a.year(),
this.minMonth),this.minDay).toJD()+1},daysInWeek:function(){return 7},dayOfWeek:function(a,e,g){a=this._validate(a,e,g,b.local.invalidDate||b.regionalOptions[""].invalidDate);return(Math.floor(this.toJD(a))+2)%this.daysInWeek()},extraInfo:function(a,e,g){this._validate(a,e,g,b.local.invalidDate||b.regionalOptions[""].invalidDate);return{}},add:function(a,e,g){this._validate(a,this.minMonth,this.minDay,b.local.invalidDate||b.regionalOptions[""].invalidDate);return this._correctAdd(a,this._add(a,e,
g),e,g)},_add:function(b,a,e){this._validateLevel++;if("d"===e||"w"===e){a=b.toJD()+a*("w"===e?this.daysInWeek():1);var d=b.calendar().fromJD(a);this._validateLevel--;return[d.year(),d.month(),d.day()]}try{var f=b.year()+("y"===e?a:0),c=b.monthOfYear()+("m"===e?a:0);d=b.day();if("y"===e)b.month()!==this.fromMonthOfYear(f,c)&&(c=this.newDate(f,b.month(),this.minDay).monthOfYear()),c=Math.min(c,this.monthsInYear(f)),d=Math.min(d,this.daysInMonth(f,this.fromMonthOfYear(f,c)));else if("m"===e){for(;c<
this.minMonth;)f--,c+=this.monthsInYear(f);for(var g=this.monthsInYear(f);c>g-1+this.minMonth;)f++,c-=g,g=this.monthsInYear(f);d=Math.min(d,this.daysInMonth(f,this.fromMonthOfYear(f,c)))}var h=[f,this.fromMonthOfYear(f,c),d];this._validateLevel--;return h}catch(v){throw this._validateLevel--,v;}},_correctAdd:function(b,a,e,d){this.hasYearZero||"y"!==d&&"m"!==d||0!==a[0]&&0<b.year()===0<a[0]||(a={y:[1,1,"y"],m:[1,this.monthsInYear(-1),"m"],w:[this.daysInWeek(),this.daysInYear(-1),"d"],d:[1,this.daysInYear(-1),
"d"]}[d],a=this._add(b,e*a[0]+(0>e?-1:1)*a[1],a[2]));return b.date(a[0],a[1],a[2])},set:function(a,e,g){this._validate(a,this.minMonth,this.minDay,b.local.invalidDate||b.regionalOptions[""].invalidDate);var d="y"===g?e:a.year(),f="m"===g?e:a.month();e="d"===g?e:a.day();if("y"===g||"m"===g)e=Math.min(e,this.daysInMonth(d,f));return a.date(d,f,e)},isValid:function(b,a,e){this._validateLevel++;var d=this.hasYearZero||0!==b;d&&(b=this.newDate(b,a,this.minDay),d=a>=this.minMonth&&a-this.minMonth<this.monthsInYear(b)&&
e>=this.minDay&&e-this.minDay<this.daysInMonth(b));this._validateLevel--;return d},toJSDate:function(a,e,g){a=this._validate(a,e,g,b.local.invalidDate||b.regionalOptions[""].invalidDate);return b.instance().fromJD(this.toJD(a)).toJSDate()},fromJSDate:function(a){return this.fromJD(b.instance().fromJSDate(a).toJD())},_validate:function(a,e,g,d){if(a.year){if(0===this._validateLevel&&this.name!==a.calendar().name)throw(b.local.differentCalendars||b.regionalOptions[""].differentCalendars).replace(/\{0\}/,
this.local.name).replace(/\{1\}/,a.calendar().local.name);return a}try{this._validateLevel++;if(1===this._validateLevel&&!this.isValid(a,e,g))throw d.replace(/\{0\}/,this.local.name);var f=this.newDate(a,e,g);this._validateLevel--;return f}catch(c){throw this._validateLevel--,c;}}});n.prototype=new e;a(n.prototype,{name:"Gregorian",jdEpoch:1721425.5,daysPerMonth:[31,28,31,30,31,30,31,31,30,31,30,31],hasYearZero:!1,minMonth:1,firstMonth:1,minDay:1,regionalOptions:{"":{name:"Gregorian",epochs:["BCE",
"CE"],monthNames:"January February March April May June July August September October November December".split(" "),monthNamesShort:"Jan Feb Mar Apr May Jun Jul Aug Sep Oct Nov Dec".split(" "),dayNames:"Sunday Monday Tuesday Wednesday Thursday Friday Saturday".split(" "),dayNamesShort:"Sun Mon Tue Wed Thu Fri Sat".split(" "),dayNamesMin:"Su Mo Tu We Th Fr Sa".split(" "),digits:null,dateFormat:"mm/dd/yyyy",firstDay:0,isRTL:!1}},leapYear:function(a){a=this._validate(a,this.minMonth,this.minDay,b.local.invalidYear||
b.regionalOptions[""].invalidYear);a=a.year()+(0>a.year()?1:0);return 0===a%4&&(0!==a%100||0===a%400)},weekOfYear:function(b,a,e){b=this.newDate(b,a,e);b.add(4-(b.dayOfWeek()||7),"d");return Math.floor((b.dayOfYear()-1)/7)+1},daysInMonth:function(a,e){a=this._validate(a,e,this.minDay,b.local.invalidMonth||b.regionalOptions[""].invalidMonth);return this.daysPerMonth[a.month()-1]+(2===a.month()&&this.leapYear(a.year())?1:0)},weekDay:function(b,a,e){return 6>(this.dayOfWeek(b,a,e)||7)},toJD:function(a,
e,g){g=this._validate(a,e,g,b.local.invalidDate||b.regionalOptions[""].invalidDate);a=g.year();e=g.month();g=g.day();0>a&&a++;3>e&&(e+=12,a--);var d=Math.floor(a/100);return Math.floor(365.25*(a+4716))+Math.floor(30.6001*(e+1))+g+(2-d+Math.floor(d/4))-1524.5},fromJD:function(b){b=Math.floor(b+.5);var a=Math.floor((b-1867216.25)/36524.25);a=b+1+a-Math.floor(a/4);var e=a+1524;b=Math.floor((e-122.1)/365.25);var d=Math.floor(365.25*b);a=Math.floor((e-d)/30.6001);e=e-d-Math.floor(30.6001*a);a-=13.5<a?
13:1;b-=2.5<a?4716:4715;0>=b&&b--;return this.newDate(b,a,e)},toJSDate:function(a,e,g){a=this._validate(a,e,g,b.local.invalidDate||b.regionalOptions[""].invalidDate);a=new Date(a.year(),a.month()-1,a.day());a.setHours(0);a.setMinutes(0);a.setSeconds(0);a.setMilliseconds(0);a.setHours(12<a.getHours()?a.getHours()+2:0);return a},fromJSDate:function(b){return this.newDate(b.getFullYear(),b.getMonth()+1,b.getDate())}});var b=t.exports=new p;b.cdate=g;b.baseCalendar=e;b.calendars.gregorian=n},{"object-assign":446}],
556:[function(a,t,m){t=a("object-assign");var p=a("./main");t(p.regionalOptions[""],{invalidArguments:"Invalid arguments",invalidFormat:"Cannot format a date from another calendar",missingNumberAt:"Missing number at position {0}",unknownNameAt:"Unknown name at position {0}",unexpectedLiteralAt:"Unexpected literal at position {0}",unexpectedText:"Additional text found at end"});p.local=p.regionalOptions[""];t(p.cdate.prototype,{formatDate:function(a,h){"string"!==typeof a&&(h=a,a="");return this._calendar.formatDate(a||
"",this,h)}});t(p.baseCalendar.prototype,{UNIX_EPOCH:p.instance().newDate(1970,1,1).toJD(),SECS_PER_DAY:86400,TICKS_EPOCH:p.instance().jdEpoch,TICKS_PER_DAY:864E9,ATOM:"yyyy-mm-dd",COOKIE:"D, dd M yyyy",FULL:"DD, MM d, yyyy",ISO_8601:"yyyy-mm-dd",JULIAN:"J",RFC_822:"D, d M yy",RFC_850:"DD, dd-M-yy",RFC_1036:"D, d M yy",RFC_1123:"D, d M yyyy",RFC_2822:"D, d M yyyy",RSS:"D, d M yy",TICKS:"!",TIMESTAMP:"@",W3C:"yyyy-mm-dd",formatDate:function(a,h,e){"string"!==typeof a&&(e=h,h=a,a="");if(!h)return"";
if(h.calendar()!==this)throw p.local.invalidFormat||p.regionalOptions[""].invalidFormat;a=a||this.local.dateFormat;e=e||{};for(var g=e.dayNamesShort||this.local.dayNamesShort,b=e.dayNames||this.local.dayNames,l=e.monthNumbers||this.local.monthNumbers,u=e.monthNamesShort||this.local.monthNamesShort,q=e.monthNames||this.local.monthNames,d=function(b,c){for(var d=1;x+d<a.length&&a.charAt(x+d)===b;)d++;x+=d-1;return 1<Math.floor(d/(c||1))},f=function(b,a,c,f){a=""+a;if(d(b,f))for(;a.length<c;)a="0"+a;
return a},c=function(b,a,c,f){return d(b)?f[a]:c[a]},k=this,r=function(b){return"function"===typeof l?l.call(k,b,d("m")):t(f("m",b.month(),2))},m=function(b,a){return a?"function"===typeof q?q.call(k,b):q[b.month()-k.minMonth]:"function"===typeof u?u.call(k,b):u[b.month()-k.minMonth]},z=this.local.digits,t=function(b){return e.localNumbers&&z?z(b):b},y="",w=!1,x=0;x<a.length;x++)if(w)"'"!==a.charAt(x)||d("'")?y+=a.charAt(x):w=!1;else switch(a.charAt(x)){case "d":y+=t(f("d",h.day(),2));break;case "D":y+=
c("D",h.dayOfWeek(),g,b);break;case "o":y+=f("o",h.dayOfYear(),3);break;case "w":y+=f("w",h.weekOfYear(),2);break;case "m":y+=r(h);break;case "M":y+=m(h,d("M"));break;case "y":y+=d("y",2)?h.year():(10>h.year()%100?"0":"")+h.year()%100;break;case "Y":d("Y",2);y+=h.formatYear();break;case "J":y+=h.toJD();break;case "@":y+=(h.toJD()-this.UNIX_EPOCH)*this.SECS_PER_DAY;break;case "!":y+=(h.toJD()-this.TICKS_EPOCH)*this.TICKS_PER_DAY;break;case "'":d("'")?y+="'":w=!0;break;default:y+=a.charAt(x)}return y},
parseDate:function(a,h,e){if(null==h)throw p.local.invalidArguments||p.regionalOptions[""].invalidArguments;h="object"===typeof h?h.toString():h+"";if(""===h)return null;a=a||this.local.dateFormat;e=e||{};var g=e.shortYearCutoff||this.shortYearCutoff;g="string"!==typeof g?g:this.today().year()%100+parseInt(g,10);for(var b=e.dayNamesShort||this.local.dayNamesShort,l=e.dayNames||this.local.dayNames,u=e.parseMonth||this.local.parseMonth,q=e.monthNumbers||this.local.monthNumbers,d=e.monthNamesShort||
this.local.monthNamesShort,f=e.monthNames||this.local.monthNames,c=e=-1,k=-1,r=-1,m=-1,z=!1,t=!1,y=function(b,c){for(var d=1;H+d<a.length&&a.charAt(H+d)===b;)d++;H+=d-1;return 1<Math.floor(d/(c||1))},w=function(b,a){a=y(b,a);b=[2,3,a?4:2,a?4:2,10,11,20]["oyYJ@!".indexOf(b)+1];b=new RegExp("^-?\\d{1,"+b+"}");b=h.substring(G).match(b);if(!b)throw(p.local.missingNumberAt||p.regionalOptions[""].missingNumberAt).replace(/\{0\}/,G);G+=b[0].length;return parseInt(b[0],10)},x=this,F=function(){if("function"===
typeof q){y("m");var b=q.call(x,h.substring(G));G+=b.length;return b}return w("m")},B=function(b,a,c,d){b=y(b,d)?c:a;for(a=0;a<b.length;a++)if(h.substr(G,b[a].length).toLowerCase()===b[a].toLowerCase())return G+=b[a].length,a+x.minMonth;throw(p.local.unknownNameAt||p.regionalOptions[""].unknownNameAt).replace(/\{0\}/,G);},C=function(){if("function"===typeof f){var b=y("M")?f.call(x,h.substring(G)):d.call(x,h.substring(G));G+=b.length;return b}return B("M",d,f)},D=function(){if(h.charAt(G)!==a.charAt(H))throw(p.local.unexpectedLiteralAt||
p.regionalOptions[""].unexpectedLiteralAt).replace(/\{0\}/,G);G++},G=0,H=0;H<a.length;H++)if(t)"'"!==a.charAt(H)||y("'")?D():t=!1;else switch(a.charAt(H)){case "d":r=w("d");break;case "D":B("D",b,l);break;case "o":m=w("o");break;case "w":w("w");break;case "m":k=F();break;case "M":k=C();break;case "y":c=H;z=!y("y",2);H=c;c=w("y",2);break;case "Y":c=w("Y",2);break;case "J":e=w("J")+.5;"."===h.charAt(G)&&(G++,w("J"));break;case "@":e=w("@")/this.SECS_PER_DAY+this.UNIX_EPOCH;break;case "!":e=w("!")/this.TICKS_PER_DAY+
this.TICKS_EPOCH;break;case "*":G=h.length;break;case "'":y("'")?D():t=!0;break;default:D()}if(G<h.length)throw p.local.unexpectedText||p.regionalOptions[""].unexpectedText;-1===c?c=this.today().year():100>c&&z&&(c+=-1===g?1900:this.today().year()-this.today().year()%100-(c<=g?0:100));"string"===typeof k&&(k=u.call(this,c,k));if(-1<m)for(k=1,r=m,g=this.daysInMonth(c,k);r>g;g=this.daysInMonth(c,k))k++,r-=g;return-1<e?this.fromJD(e):this.newDate(c,k,r)},determineDate:function(a,h,e,n,b){e&&"object"!==
typeof e&&(b=n,n=e,e=null);"string"!==typeof n&&(b=n,n="");h=h?h.newDate():null;if(null==a)a=h;else{if("string"===typeof a)a:{try{var g=this.parseDate(n,a,b);break a}catch(u){}a=a.toLowerCase();e=(a.match(/^c/)&&e?e.newDate():null)||this.today();n=/([+-]?[0-9]+)\s*(d|w|m|y)?/g;for(b=n.exec(a);b;)e.add(parseInt(b[1],10),b[2]||"d"),b=n.exec(a);g=e}else g="number"===typeof a?isNaN(a)||Infinity===a||-Infinity===a?h:this.today().add(a,"d"):this.newDate(a);a=g}return a}})},{"./main":555,"object-assign":446}],
557:[function(a,t,m){t.exports=a("cwise-compiler")({args:["array",{offset:[1],array:0},"scalar","scalar","index"],pre:{body:"{}",args:[],thisVars:[],localVars:[]},post:{body:"{}",args:[],thisVars:[],localVars:[]},body:{body:"{\n        var _inline_1_da \x3d _inline_1_arg0_ - _inline_1_arg3_\n        var _inline_1_db \x3d _inline_1_arg1_ - _inline_1_arg3_\n        if((_inline_1_da \x3e\x3d 0) !\x3d\x3d (_inline_1_db \x3e\x3d 0)) {\n          _inline_1_arg2_.push(_inline_1_arg4_[0] + 0.5 + 0.5 * (_inline_1_da + _inline_1_db) / (_inline_1_da - _inline_1_db))\n        }\n      }",
args:[{name:"_inline_1_arg0_",lvalue:!1,rvalue:!0,count:1},{name:"_inline_1_arg1_",lvalue:!1,rvalue:!0,count:1},{name:"_inline_1_arg2_",lvalue:!1,rvalue:!0,count:1},{name:"_inline_1_arg3_",lvalue:!1,rvalue:!0,count:2},{name:"_inline_1_arg4_",lvalue:!1,rvalue:!0,count:1}],thisVars:[],localVars:["_inline_1_da","_inline_1_db"]},funcName:"zeroCrossings"})},{"cwise-compiler":136}],558:[function(a,t,m){t.exports=function(a,h){var e=[];h=+h||0;p(a.hi(a.shape[0]-1),e,h);return e};var p=a("./lib/zc-core")},
{"./lib/zc-core":557}],559:[function(a,t,m){t.exports=[{path:"",backoff:0},{path:"M-2.4,-3V3L0.6,0Z",backoff:.6},{path:"M-3.7,-2.5V2.5L1.3,0Z",backoff:1.3},{path:"M-4.45,-3L-1.65,-0.2V0.2L-4.45,3L1.55,0Z",backoff:1.55},{path:"M-2.2,-2.2L-0.2,-0.2V0.2L-2.2,2.2L-1.4,3L1.6,0L-1.4,-3Z",backoff:1.6},{path:"M-4.4,-2.1L-0.6,-0.2V0.2L-4.4,2.1L-4,3L2,0L-4,-3Z",backoff:2},{path:"M2,0A2,2 0 1,1 0,-2A2,2 0 0,1 2,0Z",backoff:0,noRotate:!0},{path:"M2,2V-2H-2V2Z",backoff:0,noRotate:!0}]},{}],560:[function(a,t,m){m=
a("./arrow_paths");var p=a("../../plots/font_attributes"),g=a("../../plots/cartesian/constants");a=a("../../plot_api/plot_template").templatedArray;t.exports=a("annotation",{visible:{valType:"boolean",dflt:!0,editType:"calc+arraydraw"},text:{valType:"string",editType:"calc+arraydraw"},textangle:{valType:"angle",dflt:0,editType:"calc+arraydraw"},font:p({editType:"calc+arraydraw",colorEditType:"arraydraw"}),width:{valType:"number",min:1,dflt:null,editType:"calc+arraydraw"},height:{valType:"number",
min:1,dflt:null,editType:"calc+arraydraw"},opacity:{valType:"number",min:0,max:1,dflt:1,editType:"arraydraw"},align:{valType:"enumerated",values:["left","center","right"],dflt:"center",editType:"arraydraw"},valign:{valType:"enumerated",values:["top","middle","bottom"],dflt:"middle",editType:"arraydraw"},bgcolor:{valType:"color",dflt:"rgba(0,0,0,0)",editType:"arraydraw"},bordercolor:{valType:"color",dflt:"rgba(0,0,0,0)",editType:"arraydraw"},borderpad:{valType:"number",min:0,dflt:1,editType:"calc+arraydraw"},
borderwidth:{valType:"number",min:0,dflt:1,editType:"calc+arraydraw"},showarrow:{valType:"boolean",dflt:!0,editType:"calc+arraydraw"},arrowcolor:{valType:"color",editType:"arraydraw"},arrowhead:{valType:"integer",min:0,max:m.length,dflt:1,editType:"arraydraw"},startarrowhead:{valType:"integer",min:0,max:m.length,dflt:1,editType:"arraydraw"},arrowside:{valType:"flaglist",flags:["end","start"],extras:["none"],dflt:"end",editType:"arraydraw"},arrowsize:{valType:"number",min:.3,dflt:1,editType:"calc+arraydraw"},
startarrowsize:{valType:"number",min:.3,dflt:1,editType:"calc+arraydraw"},arrowwidth:{valType:"number",min:.1,editType:"calc+arraydraw"},standoff:{valType:"number",min:0,dflt:0,editType:"calc+arraydraw"},startstandoff:{valType:"number",min:0,dflt:0,editType:"calc+arraydraw"},ax:{valType:"any",editType:"calc+arraydraw"},ay:{valType:"any",editType:"calc+arraydraw"},axref:{valType:"enumerated",dflt:"pixel",values:["pixel",g.idRegex.x.toString()],editType:"calc"},ayref:{valType:"enumerated",dflt:"pixel",
values:["pixel",g.idRegex.y.toString()],editType:"calc"},xref:{valType:"enumerated",values:["paper",g.idRegex.x.toString()],editType:"calc"},x:{valType:"any",editType:"calc+arraydraw"},xanchor:{valType:"enumerated",values:["auto","left","center","right"],dflt:"auto",editType:"calc+arraydraw"},xshift:{valType:"number",dflt:0,editType:"calc+arraydraw"},yref:{valType:"enumerated",values:["paper",g.idRegex.y.toString()],editType:"calc"},y:{valType:"any",editType:"calc+arraydraw"},yanchor:{valType:"enumerated",
values:["auto","top","middle","bottom"],dflt:"auto",editType:"calc+arraydraw"},yshift:{valType:"number",dflt:0,editType:"calc+arraydraw"},clicktoshow:{valType:"enumerated",values:[!1,"onoff","onout"],dflt:!1,editType:"arraydraw"},xclick:{valType:"any",editType:"arraydraw"},yclick:{valType:"any",editType:"arraydraw"},hovertext:{valType:"string",editType:"arraydraw"},hoverlabel:{bgcolor:{valType:"color",editType:"arraydraw"},bordercolor:{valType:"color",editType:"arraydraw"},font:p({editType:"arraydraw"}),
editType:"arraydraw"},captureevents:{valType:"boolean",editType:"arraydraw"},editType:"calc",_deprecated:{ref:{valType:"string",editType:"calc"}}})},{"../../plot_api/plot_template":738,"../../plots/cartesian/constants":754,"../../plots/font_attributes":774,"./arrow_paths":559}],561:[function(a,t,m){function p(b){h.filterVisible(b._fullLayout.annotations).forEach(function(a){var h=e.getFromId(b,a.xref),l=e.getFromId(b,a.yref);a._extremes={};h&&g(a,h);l&&g(a,l)})}function g(b,a){var g=a._id,h=g.charAt(0),
d=b[h],f=b["a"+h],c=b["_"+h+"padplus"],k=b["_"+h+"padminus"],l={x:1,y:-1}[h]*b[h+"shift"],n=3*b.arrowsize*b.arrowwidth||0,p=n+l,m=n-l,t=3*b.startarrowsize*b.arrowwidth||0;n=t+l;l=t-l;b["a"+h+"ref"]===b[h+"ref"]?(h=e.findExtremes(a,[a.r2c(d)],{ppadplus:p,ppadminus:m}),a=e.findExtremes(a,[a.r2c(f)],{ppadplus:Math.max(c,n),ppadminus:Math.max(k,l)}),a={min:[h.min[0],a.min[0]],max:[h.max[0],a.max[0]]}):(n=f?n+f:n,l=f?l-f:l,a=e.findExtremes(a,[a.r2c(d)],{ppadplus:Math.max(c,p,n),ppadminus:Math.max(k,m,
l)}));b._extremes[g]=a}var h=a("../../lib"),e=a("../../plots/cartesian/axes"),n=a("./draw").draw;t.exports=function(b){if(h.filterVisible(b._fullLayout.annotations).length&&b._fullData.length)return h.syncOrAsync([n,p],b)}},{"../../lib":700,"../../plots/cartesian/axes":748,"./draw":566}],562:[function(a,t,m){function p(b,a){b=b._fullLayout.annotations;var e=[],h=[],d=[],f=(a||[]).length,c,k,l;for(c=0;c<b.length;c++){var n=b[c];if(l=n.clicktoshow){for(k=0;k<f;k++){var p=a[k];var m=p.xaxis;var t=p.yaxis;
if(m._id===n.xref&&t._id===n.yref&&m.d2r(p.x)===g(n._xclick,m)&&t.d2r(p.y)===g(n._yclick,t)){p=n.visible?"onout"===l?h:d:e;p.push(c);break}}k===f&&n.visible&&"onout"===l&&h.push(c)}}return{on:e,off:h,explicitOff:d}}function g(b,a){return"log"===a.type?a.l2r(b):a.d2r(b)}var h=a("../../lib"),e=a("../../registry"),n=a("../../plot_api/plot_template").arrayEditor;t.exports={hasClickToShow:function(b,a){b=p(b,a);return 0<b.on.length||0<b.explicitOff.length},onClick:function(b,a){var g=p(b,a);a=g.on;g=g.off.concat(g.explicitOff);
var l={},d=b._fullLayout.annotations,f;if(a.length||g.length){for(f=0;f<a.length;f++){var c=n(b.layout,"annotations",d[a[f]]);c.modifyItem("visible",!0);h.extendFlat(l,c.getUpdateObj())}for(f=0;f<g.length;f++)c=n(b.layout,"annotations",d[g[f]]),c.modifyItem("visible",!1),h.extendFlat(l,c.getUpdateObj());return e.call("update",b,{},l)}}}},{"../../lib":700,"../../plot_api/plot_template":738,"../../registry":829}],563:[function(a,t,m){var p=a("../../lib"),g=a("../color");t.exports=function(a,e,n,b){b("opacity");
a=b("bgcolor");var h=b("bordercolor");h=g.opacity(h);b("borderpad");var u=b("borderwidth"),q=b("showarrow");b("text",q?" ":n._dfltTitle.annotation);b("textangle");p.coerceFont(b,"font",n.font);b("width");b("align");b("height")&&b("valign");if(q){q=b("arrowside");if(-1!==q.indexOf("end")){var d=b("arrowhead");var f=b("arrowsize")}-1!==q.indexOf("start")&&(b("startarrowhead",d),b("startarrowsize",f));b("arrowcolor",h?e.bordercolor:g.defaultLine);b("arrowwidth",2*(h&&u||1));b("standoff");b("startstandoff")}e=
b("hovertext");n=n.hoverlabel||{};e&&(a=b("hoverlabel.bgcolor",n.bgcolor||(g.opacity(a)?g.rgb(a):g.defaultLine)),a=b("hoverlabel.bordercolor",n.bordercolor||g.contrast(a)),p.coerceFont(b,"hoverlabel.font",{family:n.font.family,size:n.font.size,color:n.font.color||a}));b("captureevents",!!e)}},{"../../lib":700,"../color":577}],564:[function(a,t,m){var p=a("fast-isnumeric"),g=a("../../lib/to_log_range");t.exports=function(a,e,n,b){function h(a){var c=q[a];c=u?g(c,e.range):Math.pow(10,c);p(c)||(c=null);
b(d+a,c)}e=e||{};var u="log"===n&&"linear"===e.type;n="linear"===n&&"log"===e.type;if(u||n){a=a._fullLayout.annotations;n=e._id.charAt(0);for(var q,d,f=0;f<a.length;f++)q=a[f],d="annotations["+f+"].",q[n+"ref"]===e._id&&h(n),q["a"+n+"ref"]===e._id&&h("a"+n)}}},{"../../lib/to_log_range":726,"fast-isnumeric":221}],565:[function(a,t,m){function p(a,e,q){function d(c,d){return g.coerce(a,e,b,c,d)}var f=d("visible"),c=d("clicktoshow");if(f||c){n(a,e,q,d);f=e.showarrow;var k=["x","y"],l=[-10,-30];q={_fullLayout:q};
for(var u=0;2>u;u++){var p=k[u],m=h.coerceRef(a,e,q,p,"","paper");"paper"!==m&&h.getFromId(q,m)._annIndices.push(e._index);h.coercePosition(e,q,d,m,p,.5);if(f){var t="a"+p,w=h.coerceRef(a,e,q,t,"pixel");"pixel"!==w&&w!==m&&(w=e[t]="pixel");h.coercePosition(e,q,d,w,t,"pixel"===w?l[u]:.4)}d(p+"anchor");d(p+"shift")}g.noneOrAll(a,e,["x","y"]);f&&g.noneOrAll(a,e,["ax","ay"]);c&&(c=d("xclick"),f=d("yclick"),e._xclick=void 0===c?e.x:h.cleanPosition(c,q,e.xref),e._yclick=void 0===f?e.y:h.cleanPosition(f,
q,e.yref))}}var g=a("../../lib"),h=a("../../plots/cartesian/axes"),e=a("../../plots/array_container_defaults"),n=a("./common_defaults"),b=a("./attributes");t.exports=function(b,a){e(b,a,{name:"annotations",handleItemDefaults:p})}},{"../../lib":700,"../../plots/array_container_defaults":744,"../../plots/cartesian/axes":748,"./attributes":560,"./common_defaults":563}],566:[function(a,t,m){function p(b,a){var c=b._fullLayout.annotations[a]||{},d=l.getFromId(b,c.xref),f=l.getFromId(b,c.yref);d&&d.setScale();
f&&f.setScale();g(b,c,a,!1,d,f)}function g(a,g,l,n,p,m){function w(b){b.call(q.font,ea).attr({"text-anchor":{left:"start",right:"end"}[g.align]||"middle"});f.convertToTspans(b,a,z);return b}function z(){function d(b,a){"auto"===a&&(a=b<1/3?"left":b>2/3?"right":"center");return{center:0,middle:0,left:.5,bottom:-.5,right:-.5,top:.5}[a]}var h=U.selectAll("a");1===h.size()&&h.text()===U.text()&&S.insert("a",":first-child").attr({"xlink:xlink:href":h.attr("xlink:href"),"xlink:xlink:show":h.attr("xlink:show")}).style({cursor:"pointer"}).node().appendChild(ca.node());
h=S.select(".annotation-text-math-group");for(var l=!h.empty(),r=q.bBox((l?h:U).node()),w=r.width,z=r.height,A=g.width||w,E=g.height||z,B=Math.round(A+2*da),C=Math.round(E+2*da),D=!1,K=["x","y"],G=0;G<K.length;G++){var H=K[G],M=g[H+"ref"]||H,ea=g["a"+H+"ref"],va={x:p,y:m}[H],pa=(O+("x"===H?0:-90))*Math.PI/180,ya=B*Math.cos(pa),ka=C*Math.sin(pa);pa=Math.abs(ya)+Math.abs(ka);var xa=g[H+"anchor"],Ia=g[H+"shift"]*("x"===H?1:-1),aa=N[H];if(va){var Ea=va.r2fraction(g[H]);if(0>Ea||1<Ea)if(ea===M){if(Ea=
va.r2fraction(g["a"+H]),0>Ea||1<Ea)D=!0}else D=!0;Ea=va._offset+va.r2p(g[H]);var Ja=.5}else"x"===H?(Ja=g[H],Ea=x.l+x.w*Ja):(Ja=1-g[H],Ea=x.t+x.h*Ja),Ja=g.showarrow?.5:Ja;g.showarrow?(aa.head=Ea,xa=g["a"+H],ya=ya*d(.5,g.xanchor)-ka*d(.5,g.yanchor),ea===M?(aa.tail=va._offset+va.r2p(xa),va=ya):(aa.tail=Ea+xa,va=ya+xa),aa.text=aa.tail+ya,Ea=t["x"===H?"width":"height"],"paper"===M&&(aa.head=b.constrain(aa.head,1,Ea-1)),"pixel"===ea&&(M=-Math.max(aa.tail-3,aa.text),ea=Math.min(aa.tail+3,aa.text)-Ea,0<M?
(aa.tail+=M,aa.text+=M):0<ea&&(aa.tail-=ea,aa.text-=ea)),aa.tail+=Ia,aa.head+=Ia):(va=ya=pa*d(Ja,xa),aa.text=Ea+ya);aa.text+=Ia;ya+=Ia;va+=Ia;g["_"+H+"padplus"]=pa/2+va;g["_"+H+"padminus"]=pa/2-va;g["_"+H+"size"]=pa;g["_"+H+"shift"]=ya}if(!a._dragging&&D)S.remove();else{K=D=0;"left"!==g.align&&(D=(A-w)*("center"===g.align?.5:1));"top"!==g.valign&&(K=(E-z)*("middle"===g.valign?.5:1));l?h.select("svg").attr({x:da+D-1,y:da+K}).call(q.setClipUrl,Y?F:null,a):U.call(f.positionText,da+D-r.left,da+K-r.top).call(q.setClipUrl,
Y?F:null,a);W.select("rect").call(q.setRect,da,da,A,E);ca.call(q.setRect,ba/2,ba/2,B-ba,C-ba);S.call(q.setTranslate,Math.round(N.x.text-B/2),Math.round(N.y.text-C/2));T.attr({transform:"rotate("+O+","+N.x.text+","+N.y.text+")"});var Na=function(c,d){R.selectAll(".annotation-arrow-g").remove();var f=N.x.head,h=N.y.head,l=N.x.tail+c,r=N.y.tail+d,w=N.x.text+c;c=N.y.text+d;d=b.rotationXYMatrix(O,w,c);var z=b.apply2DTransform(d);d=b.apply2DTransform2(d);var t=+ca.attr("width"),A=+ca.attr("height");w-=
.5*t;t=w+t;c-=.5*A;A=c+A;d=[[w,c,w,A],[w,A,t,A],[t,A,t,c],[t,c,w,c]].map(d);if(!d.reduce(function(a,c){return a^!!b.segmentsIntersect(f,h,f+1E6,h+1E6,c[0],c[1],c[2],c[3])},!1)){d.forEach(function(a){if(a=b.segmentsIntersect(l,r,f,h,a[0],a[1],a[2],a[3]))l=a.x,r=a.y});d=g.arrowwidth;A=g.arrowcolor;c=g.arrowside;var E=R.append("g").style({opacity:u.opacity(A)}).classed("annotation-arrow-g",!0);A=E.append("path").attr("d","M"+l+","+r+"L"+f+","+h).style("stroke-width",d+"px").call(u.stroke,u.rgb(A));v(A,
c,g);if(y.annotationPosition&&A.node().parentNode&&!n){c=f;A=h;g.standoff&&(w=Math.sqrt(Math.pow(f-l,2)+Math.pow(h-r,2)),c+=g.standoff*(l-f)/w,A+=g.standoff*(r-h)/w);d=E.append("path").classed("annotation-arrow",!0).classed("anndrag",!0).classed("cursor-move",!0).attr({d:"M3,3H-3V-3H3ZM0,0L"+(l-c)+","+(r-A),transform:"translate("+c+","+A+")"}).style("stroke-width",d+6+"px").call(u.stroke,"rgba(0,0,0,0)").call(u.fill,"rgba(0,0,0,0)");var B,C;k.init({element:d.node(),gd:a,prepFn:function(){var b=q.getTranslate(S);
B=b.x;C=b.y;p&&p.autorange&&I(p._name+".autorange",!0);m&&m.autorange&&I(m._name+".autorange",!0)},moveFn:function(b,a){var c=z(B,C),d=c[0]+b;c=c[1]+a;S.call(q.setTranslate,d,c);J("x",p?p.p2r(p.r2p(g.x)+b):g.x+b/x.w);J("y",m?m.p2r(m.r2p(g.y)+a):g.y-a/x.h);g.axref===g.xref&&J("ax",p.p2r(p.r2p(g.ax)+b));g.ayref===g.yref&&J("ay",m.p2r(m.r2p(g.ay)+a));E.attr("transform","translate("+b+","+a+")");T.attr({transform:"rotate("+O+","+d+","+c+")"})},doneFn:function(){e.call("_guiRelayout",a,L());var b=document.querySelector(".js-notes-box-panel");
b&&b.redraw(b.selectedObj)}})}}};g.showarrow&&Na(0,0);if(P){var Ra;k.init({element:S.node(),gd:a,prepFn:function(){Ra=T.attr("transform")},moveFn:function(b,a){var d="pointer";if(g.showarrow)g.axref===g.xref?J("ax",p.p2r(p.r2p(g.ax)+b)):J("ax",g.ax+b),g.ayref===g.yref?J("ay",m.p2r(m.r2p(g.ay)+a)):J("ay",g.ay+a),Na(b,a);else{if(n)return;if(p)var f=p.p2r(p.r2p(g.x)+b);else f=g._xsize/x.w,f=k.align(g.x+(g._xshift-g.xshift)/x.w-f/2+b/x.w,f,0,1,g.xanchor);if(m)var e=m.p2r(m.r2p(g.y)+a);else e=g._ysize/
x.h,e=k.align(g.y-(g._yshift+g.yshift)/x.h-e/2-a/x.h,e,0,1,g.yanchor);J("x",f);J("y",e);p&&m||(d=k.getCursor(p?.5:f,m?.5:e,g.xanchor,g.yanchor))}T.attr({transform:"translate("+b+","+a+")"+Ra});c(S,d)},doneFn:function(){c(S);e.call("_guiRelayout",a,L());var b=document.querySelector(".js-notes-box-panel");b&&b.redraw(b.selectedObj)}})}}}var t=a._fullLayout,x=a._fullLayout._size,y=a._context.edits;if(n){var A="annotation-"+n;var K=n+".annotations"}else A="annotation",K="annotations";K=r(a.layout,K,g);
var I=K.modifyBase,J=K.modifyItem,L=K.getUpdateObj;t._infolayer.selectAll("."+A+'[data-index\x3d"'+l+'"]').remove();var F="clip"+t._uid+"_ann"+l;if(g._input&&!1!==g.visible){var N={x:{},y:{}},O=+g.textangle||0,R=t._infolayer.append("g").classed(A,!0).attr("data-index",String(l)).style("opacity",g.opacity),T=R.append("g").classed("annotation-text-g",!0),P=y[g.showarrow?"annotationTail":"annotationPosition"];A=g.captureevents||y.annotationText||P;var S=T.append("g").style("pointer-events",A?"all":null).call(c,
"pointer").on("click",function(){a._dragging=!1;var b={index:l,annotation:g._input,fullAnnotation:g,event:h.event};n&&(b.subplotId=n);a.emit("plotly_clickannotation",b)});if(g.hovertext)S.on("mouseover",function(){var b=g.hoverlabel,c=b.font,f=this.getBoundingClientRect(),e=a.getBoundingClientRect();d.loneHover({x0:f.left-e.left,x1:f.right-e.left,y:(f.top+f.bottom)/2-e.top,text:g.hovertext,color:b.bgcolor,borderColor:b.bordercolor,fontFamily:c.family,fontSize:c.size,fontColor:c.color},{container:t._hoverlayer.node(),
outerContainer:t._paper.node(),gd:a})}).on("mouseout",function(){d.loneUnhover(t._hoverlayer.node())});var ba=g.borderwidth,da=ba+g.borderpad,ca=S.append("rect").attr("class","bg").style("stroke-width",ba+"px").call(u.stroke,g.bordercolor).call(u.fill,g.bgcolor),Y=g.width||g.height,W=t._topclips.selectAll("#"+F).data(Y?[0]:[]);W.enter().append("clipPath").classed("annclip",!0).attr("id",F).append("rect");W.exit().remove();var ea=g.font;A=t.meta?b.templateString(g.text,{meta:t.meta}):g.text;var U=
S.append("text").classed("annotation-text",!0).text(A);if(y.annotationText)U.call(f.makeEditable,{delegate:S,gd:a}).call(w).on("edit",function(b){g.text=b;this.call(w);J("text",b);p&&p.autorange&&I(p._name+".autorange",!0);m&&m.autorange&&I(m._name+".autorange",!0);e.call("_guiRelayout",a,L())});else U.call(w)}else h.selectAll("#"+F).remove()}var h=a("d3"),e=a("../../registry"),n=a("../../plots/plots"),b=a("../../lib"),l=a("../../plots/cartesian/axes"),u=a("../color"),q=a("../drawing"),d=a("../fx"),
f=a("../../lib/svg_text_utils"),c=a("../../lib/setcursor"),k=a("../dragelement"),r=a("../../plot_api/plot_template").arrayEditor,v=a("./draw_arrow_head");t.exports={draw:function(b){var a=b._fullLayout;a._infolayer.selectAll(".annotation").remove();for(var c=0;c<a.annotations.length;c++)a.annotations[c].visible&&p(b,c);return n.previousPromises(b)},drawOne:p,drawRaw:g}},{"../../lib":700,"../../lib/setcursor":720,"../../lib/svg_text_utils":724,"../../plot_api/plot_template":738,"../../plots/cartesian/axes":748,
"../../plots/plots":810,"../../registry":829,"../color":577,"../dragelement":595,"../drawing":598,"../fx":616,"./draw_arrow_head":567,d3:154}],567:[function(a,t,m){var p=a("d3"),g=a("../color"),h=a("./arrow_paths");t.exports=function(a,n,b){function e(){a.style("stroke-dasharray","0px,100px")}function u(c,d,f,e){c.path&&(c.noRotate&&(f=0),p.select(q.parentNode).append("path").attr({"class":a.attr("class"),d:c.path,transform:"translate("+d.x+","+d.y+")"+(f?"rotate("+180*f/Math.PI+")":"")+"scale("+
e+")"}).style({fill:g.rgb(b.arrowcolor),"stroke-width":0}))}var q=a.node(),d=h[b.arrowhead||0],f=h[b.startarrowhead||0],c=(b.arrowwidth||1)*(b.arrowsize||1),k=(b.arrowwidth||1)*(b.startarrowsize||1),r=0<=n.indexOf("start");n=0<=n.indexOf("end");var m=d.backoff*c+b.standoff,z=f.backoff*k+b.startstandoff;if("line"===q.nodeName){var t={x:+a.attr("x1"),y:+a.attr("y1")};var y={x:+a.attr("x2"),y:+a.attr("y2")};var w=t.x-y.x,x=t.y-y.y;var F=Math.atan2(x,w);var B=F+Math.PI;if(m&&z&&m+z>Math.sqrt(w*w+x*x)){e();
return}if(m){if(m*m>w*w+x*x){e();return}var C=m*Math.sin(F);y.x+=m*Math.cos(F);y.y+=C;a.attr({x2:y.x,y2:y.y})}if(z){if(z*z>w*w+x*x){e();return}m=z*Math.sin(F);t.x-=z*Math.cos(F);t.y-=m;a.attr({x1:t.x,y1:t.y})}}else if("path"===q.nodeName){w=q.getTotalLength();x="";if(w<m+z){e();return}t=q.getPointAtLength(0);F=q.getPointAtLength(.1);F=Math.atan2(t.y-F.y,t.x-F.x);t=q.getPointAtLength(Math.min(z,w));x="0px,"+z+"px,";y=q.getPointAtLength(w);B=q.getPointAtLength(w-.1);B=Math.atan2(y.y-B.y,y.x-B.x);y=
q.getPointAtLength(Math.max(0,w-m));a.style("stroke-dasharray",x+(w-(x?z+m:m)+"px,"+w+"px"))}r&&u(f,t,F,k);n&&u(d,y,B,c)}},{"../color":577,"./arrow_paths":559,d3:154}],568:[function(a,t,m){m=a("./draw");var p=a("./click");t.exports={moduleType:"component",name:"annotations",layoutAttributes:a("./attributes"),supplyLayoutDefaults:a("./defaults"),includeBasePlot:a("../../plots/cartesian/include_components")("annotations"),calcAutorange:a("./calc_autorange"),draw:m.draw,drawOne:m.drawOne,drawRaw:m.drawRaw,
hasClickToShow:p.hasClickToShow,onClick:p.onClick,convertCoords:a("./convert_coords")}},{"../../plots/cartesian/include_components":758,"./attributes":560,"./calc_autorange":561,"./click":562,"./convert_coords":564,"./defaults":565,"./draw":566}],569:[function(a,t,m){m=a("../annotations/attributes");var p=a("../../plot_api/edit_types").overrideAll;a=a("../../plot_api/plot_template").templatedArray;t.exports=p(a("annotation",{visible:m.visible,x:{valType:"any"},y:{valType:"any"},z:{valType:"any"},
ax:{valType:"number"},ay:{valType:"number"},xanchor:m.xanchor,xshift:m.xshift,yanchor:m.yanchor,yshift:m.yshift,text:m.text,textangle:m.textangle,font:m.font,width:m.width,height:m.height,opacity:m.opacity,align:m.align,valign:m.valign,bgcolor:m.bgcolor,bordercolor:m.bordercolor,borderpad:m.borderpad,borderwidth:m.borderwidth,showarrow:m.showarrow,arrowcolor:m.arrowcolor,arrowhead:m.arrowhead,startarrowhead:m.startarrowhead,arrowside:m.arrowside,arrowsize:m.arrowsize,startarrowsize:m.startarrowsize,
arrowwidth:m.arrowwidth,standoff:m.standoff,startstandoff:m.startstandoff,hovertext:m.hovertext,hoverlabel:m.hoverlabel,captureevents:m.captureevents}),"calc","from-root")},{"../../plot_api/edit_types":731,"../../plot_api/plot_template":738,"../annotations/attributes":560}],570:[function(a,t,m){function p(a,n){var b=n.fullSceneLayout.domain,e=n.fullLayout._size;n={pdata:null,type:"linear",autorange:!1,range:[-Infinity,Infinity]};a._xa={};g.extendFlat(a._xa,n);h.setConvert(a._xa);a._xa._offset=e.l+
b.x[0]*e.w;a._xa.l2p=function(){return.5*(1+a._pdata[0]/a._pdata[3])*e.w*(b.x[1]-b.x[0])};a._ya={};g.extendFlat(a._ya,n);h.setConvert(a._ya);a._ya._offset=e.t+(1-b.y[1])*e.h;a._ya.l2p=function(){return.5*(1-a._pdata[1]/a._pdata[3])*e.h*(b.y[1]-b.y[0])}}var g=a("../../lib"),h=a("../../plots/cartesian/axes");t.exports=function(a){for(var e=a.fullSceneLayout.annotations,b=0;b<e.length;b++)p(e[b],a);a.fullLayout._infolayer.selectAll(".annotation-"+a.id).remove()}},{"../../lib":700,"../../plots/cartesian/axes":748}],
571:[function(a,t,m){function p(a,e,q,d){function f(c,d){return g.coerce(a,e,b,c,d)}function c(b){var a=b+"axis",c={_fullLayout:{}};c._fullLayout[a]=q[a];return h.coercePosition(e,c,f,b,b,.5)}f("visible")&&(n(a,e,d.fullLayout,f),c("x"),c("y"),c("z"),g.noneOrAll(a,e,["x","y","z"]),e.xref="x",e.yref="y",e.zref="z",f("xanchor"),f("yanchor"),f("xshift"),f("yshift"),e.showarrow&&(e.axref="pixel",e.ayref="pixel",f("ax",-10),f("ay",-30),g.noneOrAll(a,e,["ax","ay"])))}var g=a("../../lib"),h=a("../../plots/cartesian/axes"),
e=a("../../plots/array_container_defaults"),n=a("../annotations/common_defaults"),b=a("./attributes");t.exports=function(b,a,g){e(b,a,{name:"annotations",handleItemDefaults:p,fullLayout:g.fullLayout})}},{"../../lib":700,"../../plots/array_container_defaults":744,"../../plots/cartesian/axes":748,"../annotations/common_defaults":563,"./attributes":569}],572:[function(a,t,m){var p=a("../annotations/draw").drawRaw,g=a("../../plots/gl3d/project"),h=["x","y","z"];t.exports=function(a){for(var e=a.fullSceneLayout,
b=a.dataScale,l=e.annotations,u=0;u<l.length;u++){for(var q=l[u],d=!1,f=0;3>f;f++){var c=h[f];c=e[c+"axis"].r2fraction(q[c]);if(0>c||1<c){d=!0;break}}d?a.fullLayout._infolayer.select(".annotation-"+a.id+'[data-index\x3d"'+u+'"]').remove():(q._pdata=g(a.glplot.cameraParams,[e.xaxis.r2l(q.x)*b[0],e.yaxis.r2l(q.y)*b[1],e.zaxis.r2l(q.z)*b[2]]),p(a.graphDiv,q,u,a.id,q._xa,q._ya))}}},{"../../plots/gl3d/project":798,"../annotations/draw":566}],573:[function(a,t,m){var p=a("../../registry"),g=a("../../lib");
t.exports={moduleType:"component",name:"annotations3d",schema:{subplots:{scene:{annotations:a("./attributes")}}},layoutAttributes:a("./attributes"),handleDefaults:a("./defaults"),includeBasePlot:function(a,e){var h=p.subplotsRegistry.gl3d;if(h)for(var b=h.attrRegex,l=Object.keys(a),u=0;u<l.length;u++){var q=l[u];b.test(q)&&(a[q].annotations||[]).length&&(g.pushUnique(e._basePlotModules,h),g.pushUnique(e._subplots.gl3d,q))}},convert:a("./convert"),draw:a("./draw")}},{"../../lib":700,"../../registry":829,
"./attributes":569,"./convert":570,"./defaults":571,"./draw":572}],574:[function(a,t,m){t.exports=a("world-calendars/dist/main");a("world-calendars/dist/plus");a("world-calendars/dist/calendars/chinese");a("world-calendars/dist/calendars/coptic");a("world-calendars/dist/calendars/discworld");a("world-calendars/dist/calendars/ethiopian");a("world-calendars/dist/calendars/hebrew");a("world-calendars/dist/calendars/islamic");a("world-calendars/dist/calendars/julian");a("world-calendars/dist/calendars/mayan");
a("world-calendars/dist/calendars/nanakshahi");a("world-calendars/dist/calendars/nepali");a("world-calendars/dist/calendars/persian");a("world-calendars/dist/calendars/taiwan");a("world-calendars/dist/calendars/thai");a("world-calendars/dist/calendars/ummalqura")},{"world-calendars/dist/calendars/chinese":541,"world-calendars/dist/calendars/coptic":542,"world-calendars/dist/calendars/discworld":543,"world-calendars/dist/calendars/ethiopian":544,"world-calendars/dist/calendars/hebrew":545,"world-calendars/dist/calendars/islamic":546,
"world-calendars/dist/calendars/julian":547,"world-calendars/dist/calendars/mayan":548,"world-calendars/dist/calendars/nanakshahi":549,"world-calendars/dist/calendars/nepali":550,"world-calendars/dist/calendars/persian":551,"world-calendars/dist/calendars/taiwan":552,"world-calendars/dist/calendars/thai":553,"world-calendars/dist/calendars/ummalqura":554,"world-calendars/dist/main":555,"world-calendars/dist/plus":556}],575:[function(a,t,m){function p(b){var a=f[b];return a?a:a=f[b]=e.instance(b)}
function g(b){return n.extendFlat({},u,{description:b})}function h(b){return"Sets the calendar system to use with `"+b+"` date data."}var e=a("./calendars"),n=a("../../lib");a=a("../../constants/numerical");var b=a.EPOCHJD,l=a.ONEDAY,u={valType:"enumerated",values:Object.keys(e.calendars),editType:"calc",dflt:"gregorian"},q=function(b,a,c,d){var f={};f[c]=u;return n.coerce(b,a,f,c,d)},d={d:{0:"dd","-":"d"},e:{0:"d","-":"d"},a:{0:"D","-":"D"},A:{0:"DD","-":"DD"},j:{0:"oo","-":"o"},W:{0:"ww","-":"w"},
m:{0:"mm","-":"m"},b:{0:"M","-":"M"},B:{0:"MM","-":"MM"},y:{0:"yy","-":"yy"},Y:{0:"yyyy","-":"yyyy"},U:"##",w:"##",c:{0:"D M d %X yyyy","-":"D M d %X yyyy"},x:{0:"mm/dd/yyyy","-":"mm/dd/yyyy"}},f={};a={xcalendar:g(h("x"))};m=n.extendFlat({},a,{ycalendar:g(h("y"))});var c=n.extendFlat({},m,{zcalendar:g(h("z"))}),k=g("Sets the calendar system to use for `range` and `tick0` if this is a date axis. This does not set the calendar for interpreting data on this axis, that's specified in the trace or via the global `layout.calendar`");
t.exports={moduleType:"component",name:"calendars",schema:{traces:{scatter:m,bar:m,box:m,heatmap:m,contour:m,histogram:m,histogram2d:m,histogram2dcontour:m,scatter3d:c,surface:c,mesh3d:c,scattergl:m,ohlc:a,candlestick:a},layout:{calendar:g("Sets the default calendar system to use for interpreting and displaying dates throughout the plot.")},subplots:{xaxis:{calendar:k},yaxis:{calendar:k},scene:{xaxis:{calendar:k},yaxis:{calendar:k},zaxis:{calendar:k}},polar:{radialaxis:{calendar:k}}},transforms:{filter:{valuecalendar:g("Sets the calendar system to use for `value`, if it is a date."),
targetcalendar:g("Sets the calendar system to use for `target`, if it is an array of dates. If `target` is a string (eg *x*) we use the corresponding trace attribute (eg `xcalendar`) if it exists, even if `targetcalendar` is provided.")}}},layoutAttributes:u,handleDefaults:q,handleTraceDefaults:function(b,a,c,d){for(var f=0;f<c.length;f++)q(b,a,c[f]+"calendar",d.calendar)},CANONICAL_SUNDAY:{chinese:"2000-01-02",coptic:"2000-01-03",discworld:"2000-01-03",ethiopian:"2000-01-05",hebrew:"5000-01-01",
islamic:"1000-01-02",julian:"2000-01-03",mayan:"5000-01-01",nanakshahi:"1000-01-05",nepali:"2000-01-05",persian:"1000-01-01",jalali:"1000-01-01",taiwan:"1000-01-04",thai:"2000-01-04",ummalqura:"1400-01-06"},CANONICAL_TICK:{chinese:"2000-01-01",coptic:"2000-01-01",discworld:"2000-01-01",ethiopian:"2000-01-01",hebrew:"5000-01-01",islamic:"1000-01-01",julian:"2000-01-01",mayan:"5000-01-01",nanakshahi:"1000-01-01",nepali:"2000-01-01",persian:"1000-01-01",jalali:"1000-01-01",taiwan:"1000-01-01",thai:"2000-01-01",
ummalqura:"1400-01-01"},DFLTRANGE:{chinese:["2000-01-01","2001-01-01"],coptic:["1700-01-01","1701-01-01"],discworld:["1800-01-01","1801-01-01"],ethiopian:["2000-01-01","2001-01-01"],hebrew:["5700-01-01","5701-01-01"],islamic:["1400-01-01","1401-01-01"],julian:["2000-01-01","2001-01-01"],mayan:["5200-01-01","5201-01-01"],nanakshahi:["0500-01-01","0501-01-01"],nepali:["2000-01-01","2001-01-01"],persian:["1400-01-01","1401-01-01"],jalali:["1400-01-01","1401-01-01"],taiwan:["0100-01-01","0101-01-01"],
thai:["2500-01-01","2501-01-01"],ummalqura:["1400-01-01","1401-01-01"]},getCal:p,worldCalFmt:function(a,c,f){c=Math.floor((c+.05)/l)+b;f=p(f).fromJD(c);c=0;for(var e,g,k;-1!==(c=a.indexOf("%",c));)e=a.charAt(c+1),"0"===e||"-"===e||"_"===e?(k=3,g=a.charAt(c+2),"_"===e&&(e="-")):(g=e,e="0",k=2),(g=d[g])?(e="##"===g?"##":f.formatDate(g[e]),a=a.substr(0,c)+e+a.substr(c+k),c+=e.length):c+=k;return a}}},{"../../constants/numerical":677,"../../lib":700,"./calendars":574}],576:[function(a,t,m){m.defaults=
"#1f77b4 #ff7f0e #2ca02c #d62728 #9467bd #8c564b #e377c2 #7f7f7f #bcbd22 #17becf".split(" ");m.defaultLine="#444";m.lightLine="#eee";m.background="#fff";m.borderLine="#BEC8D9";m.lightFraction=1E3/11},{}],577:[function(a,t,m){function p(b){if(h(b)||"string"!==typeof b)return b;var a=b.trim();if("rgb"!==a.substr(0,3))return b;var e=a.match(/^rgba?\s*\(([^()]*)\)$/);if(!e)return b;e=e[1].trim().split(/\s*[\s,]\s*/);a="a"===a.charAt(3)&&4===e.length;if(!a&&3!==e.length)return b;for(var d=0;d<e.length;d++){if(!e[d].length)return b;
e[d]=Number(e[d]);if(!(0<=e[d]))return b;if(3===d)1<e[d]&&(e[d]=1);else if(1<=e[d])return b}b=Math.round(255*e[0])+", "+Math.round(255*e[1])+", "+Math.round(255*e[2]);return a?"rgba("+b+", "+e[3]+")":"rgb("+b+")"}var g=a("tinycolor2"),h=a("fast-isnumeric"),e=t.exports={};a=a("./attributes");e.defaults=a.defaults;var n=e.defaultLine=a.defaultLine;e.lightLine=a.lightLine;var b=e.background=a.background;e.tinyRGB=function(b){b=b.toRgb();return"rgb("+Math.round(b.r)+", "+Math.round(b.g)+", "+Math.round(b.b)+
")"};e.rgb=function(b){return e.tinyRGB(g(b))};e.opacity=function(b){return b?g(b).getAlpha():0};e.addOpacity=function(b,a){b=g(b).toRgb();return"rgba("+Math.round(b.r)+", "+Math.round(b.g)+", "+Math.round(b.b)+", "+a+")"};e.combine=function(a,e){var h=g(a).toRgb();if(1===h.a)return g(a).toRgbString();a=g(e||b).toRgb();a=1===a.a?a:{r:255*(1-a.a)+a.r*a.a,g:255*(1-a.a)+a.g*a.a,b:255*(1-a.a)+a.b*a.a};return g({r:a.r*(1-h.a)+h.r*h.a,g:a.g*(1-h.a)+h.g*h.a,b:a.b*(1-h.a)+h.b*h.a}).toRgbString()};e.contrast=
function(a,h,q){var d=g(a);1!==d.getAlpha()&&(d=g(e.combine(a,b)));return(d.isDark()?h?d.lighten(h):b:q?d.darken(q):n).toString()};e.stroke=function(b,a){a=g(a);b.style({stroke:e.tinyRGB(a),"stroke-opacity":a.getAlpha()})};e.fill=function(b,a){a=g(a);b.style({fill:e.tinyRGB(a),"fill-opacity":a.getAlpha()})};e.clean=function(b){if(b&&"object"===typeof b){var a=Object.keys(b),g;for(g=0;g<a.length;g++){var d=a[g];var f=b[d];if("color"===d.substr(d.length-5))if(Array.isArray(f))for(d=0;d<f.length;d++)f[d]=
p(f[d]);else b[d]=p(f);else if("colorscale"===d.substr(d.length-10)&&Array.isArray(f))for(d=0;d<f.length;d++)Array.isArray(f[d])&&(f[d][1]=p(f[d][1]));else if(Array.isArray(f)){if(d=f[0],!Array.isArray(d)&&d&&"object"===typeof d)for(d=0;d<f.length;d++)e.clean(f[d])}else f&&"object"===typeof f&&e.clean(f)}}}},{"./attributes":576,"fast-isnumeric":221,tinycolor2:521}],578:[function(a,t,m){m=a("../../plots/cartesian/layout_attributes");var p=a("../../plots/font_attributes"),g=a("../../lib/extend").extendFlat;
a=a("../../plot_api/edit_types").overrideAll;t.exports=a({thicknessmode:{valType:"enumerated",values:["fraction","pixels"],dflt:"pixels"},thickness:{valType:"number",min:0,dflt:30},lenmode:{valType:"enumerated",values:["fraction","pixels"],dflt:"fraction"},len:{valType:"number",min:0,dflt:1},x:{valType:"number",dflt:1.02,min:-2,max:3},xanchor:{valType:"enumerated",values:["left","center","right"],dflt:"left"},xpad:{valType:"number",min:0,dflt:10},y:{valType:"number",dflt:.5,min:-2,max:3},yanchor:{valType:"enumerated",
values:["top","middle","bottom"],dflt:"middle"},ypad:{valType:"number",min:0,dflt:10},outlinecolor:m.linecolor,outlinewidth:m.linewidth,bordercolor:m.linecolor,borderwidth:{valType:"number",min:0,dflt:0},bgcolor:{valType:"color",dflt:"rgba(0,0,0,0)"},tickmode:m.tickmode,nticks:m.nticks,tick0:m.tick0,dtick:m.dtick,tickvals:m.tickvals,ticktext:m.ticktext,ticks:g({},m.ticks,{dflt:""}),ticklen:m.ticklen,tickwidth:m.tickwidth,tickcolor:m.tickcolor,showticklabels:m.showticklabels,tickfont:p({}),tickangle:m.tickangle,
tickformat:m.tickformat,tickformatstops:m.tickformatstops,tickprefix:m.tickprefix,showtickprefix:m.showtickprefix,ticksuffix:m.ticksuffix,showticksuffix:m.showticksuffix,separatethousands:m.separatethousands,exponentformat:m.exponentformat,showexponent:m.showexponent,title:{text:{valType:"string"},font:p({}),side:{valType:"enumerated",values:["right","top","bottom"],dflt:"top"}},_deprecated:{title:{valType:"string"},titlefont:p({}),titleside:{valType:"enumerated",values:["right","top","bottom"],dflt:"top"}}},
"colorbars","from-root")},{"../../lib/extend":690,"../../plot_api/edit_types":731,"../../plots/cartesian/layout_attributes":760,"../../plots/font_attributes":774}],579:[function(a,t,m){var p=a("./draw"),g=a("../colorscale/helpers").flipScale;t.exports=function(a,e,n){if("function"===typeof n)return n(a,e);var b=e[0].trace,h="cb"+b.uid;n=Array.isArray(n)?n:[n];for(var u=0;u<n.length;u++){var q=n[u].container;q=q?b[q]:b;a._fullLayout._infolayer.selectAll("."+h).remove();if(q&&q.showscale){a=e[0].t.cb=
p(a,h);e=q.reversescale?g(q.colorscale):q.colorscale;a.fillgradient(e).zrange([q[n[u].min],q[n[u].max]]).options(q.colorbar)();break}}}},{"../colorscale/helpers":588,"./draw":582}],580:[function(a,t,m){t.exports={cn:{colorbar:"colorbar",cbbg:"cbbg",cbfill:"cbfill",cbfills:"cbfills",cbline:"cbline",cblines:"cblines",cbaxis:"cbaxis",cbtitleunshift:"cbtitleunshift",cbtitle:"cbtitle",cboutline:"cboutline",crisp:"crisp",jsPlaceholder:"js-placeholder"}}},{}],581:[function(a,t,m){var p=a("../../lib"),g=
a("../../plot_api/plot_template"),h=a("../../plots/cartesian/tick_value_defaults"),e=a("../../plots/cartesian/tick_mark_defaults"),n=a("../../plots/cartesian/tick_label_defaults"),b=a("./attributes");t.exports=function(a,u,q){function d(a,d){return p.coerce(c,f,b,a,d)}var f=g.newContainer(u,"colorbar"),c=a.colorbar||{};a=d("thicknessmode");d("thickness","fraction"===a?30/(q.width-q.margin.l-q.margin.r):30);a=d("lenmode");d("len","fraction"===a?1:q.height-q.margin.t-q.margin.b);d("x");d("xanchor");
d("xpad");d("y");d("yanchor");d("ypad");p.noneOrAll(c,f,["x","y"]);d("outlinecolor");d("outlinewidth");d("bordercolor");d("borderwidth");d("bgcolor");h(c,f,d,"linear");a={outerTicks:!1,font:q.font};n(c,f,d,"linear",a);e(c,f,d,"linear",a);d("title.text",q._dfltTitle.colorbar);p.coerceFont(d,"title.font",q.font);d("title.side")}},{"../../lib":700,"../../plot_api/plot_template":738,"../../plots/cartesian/tick_label_defaults":767,"../../plots/cartesian/tick_mark_defaults":768,"../../plots/cartesian/tick_value_defaults":769,
"./attributes":578}],582:[function(a,t,m){var p=a("d3"),g=a("tinycolor2"),h=a("../../plots/plots"),e=a("../../registry"),n=a("../../plots/cartesian/axes"),b=a("../dragelement"),l=a("../../lib"),u=a("../../lib/extend").extendFlat,q=a("../../lib/setcursor"),d=a("../drawing"),f=a("../color"),c=a("../titles"),k=a("../../lib/svg_text_utils");m=a("../../constants/alignment");var r=m.LINE_SPACING,v=m.FROM_TL,z=m.FROM_BR,A=a("../../plots/cartesian/axis_defaults"),y=a("../../plots/cartesian/position_defaults"),
w=a("../../plots/cartesian/layout_attributes"),x=a("./attributes"),F=a("./constants").cn;t.exports=function(a,m){function t(){function x(b,a){return l.coerce(sa,V,w,b,a)}function J(b,d){var f={propContainer:V,propName:C("title"),traceIndex:B().index,placeholder:D._dfltTitle.colorbar,containerGroup:ia.select(".cbtitle")},e="h"===b.charAt(0)?b.substr(1):"h"+b;ia.selectAll("."+e+",."+e+"-math-group").remove();c.draw(a,b,u(f,d||{}))}var D=a._fullLayout,K=D._size;if("function"===typeof E.fillcolor||"function"===
typeof E.line.color||E.fillgradient){var G=E.zrange||p.extent(("function"===typeof E.fillcolor?E.fillcolor:E.line.color).domain()),H=[],R=[],T="function"===typeof E.line.color?E.line.color:function(){return E.line.color},P="function"===typeof E.fillcolor?E.fillcolor:function(){return E.fillcolor},S,ba=E.levels.end+E.levels.size/100,da=E.levels.size,ca=1.001*G[0]-.001*G[1],Y=1.001*G[1]-.001*G[0];for(S=0;1E5>S;S++){var W=E.levels.start+S*da;if(0<da?W>=ba:W<=ba)break;W>ca&&W<Y&&H.push(W)}if(E.fillgradient)R=
[0];else if("function"===typeof E.fillcolor)if(E.filllevels)for(ba=E.filllevels.end+E.filllevels.size/100,da=E.filllevels.size,S=0;1E5>S;S++){W=E.filllevels.start+S*da;if(0<da?W>=ba:W<=ba)break;W>G[0]&&W<G[1]&&R.push(W)}else R=H.map(function(b){return b-E.levels.size/2}),R.push(R[R.length-1]+E.levels.size);else E.fillcolor&&"string"===typeof E.fillcolor&&(R=[0]);0>E.levels.size&&(H.reverse(),R.reverse());W=K.h;S=K.w;var ea=Math.round(E.thickness*("fraction"===E.thicknessmode?S:1)),U=ea/K.w;ba=Math.round(E.len*
("fraction"===E.lenmode?W:1));var na=ba/K.h;W=E.xpad/K.w;var X=(E.borderwidth+E.outlinewidth)/2;S=E.ypad/K.h;var ha=Math.round(E.x*K.w+E.xpad),fa=E.x-U*({middle:.5,right:1}[E.xanchor]||0),oa=E.y+na*(({top:-.5,bottom:.5}[E.yanchor]||0)-.5),ua=Math.round(K.h*(1-oa)),Z=ua-ba,qa,sa={type:"linear",range:G,tickmode:E.tickmode,nticks:E.nticks,tick0:E.tick0,dtick:E.dtick,tickvals:E.tickvals,ticktext:E.ticktext,ticks:E.ticks,ticklen:E.ticklen,tickwidth:E.tickwidth,tickcolor:E.tickcolor,showticklabels:E.showticklabels,
tickfont:E.tickfont,tickangle:E.tickangle,tickformat:E.tickformat,exponentformat:E.exponentformat,separatethousands:E.separatethousands,showexponent:E.showexponent,showtickprefix:E.showtickprefix,tickprefix:E.tickprefix,showticksuffix:E.showticksuffix,ticksuffix:E.ticksuffix,title:E.title,showline:!0,anchor:"free",side:"right",position:1},V={type:"linear",_id:"y"+m};ba={letter:"y",font:D.font,noHover:!0,noTickson:!0,calendar:D.calendar};A(sa,V,x,ba,D);y(sa,V,x,ba);V.position=E.x+W+U;t.axis=V;-1!==
["top","bottom"].indexOf(E.title.side)&&(V.title.side=E.title.side,V.titlex=E.x+W,V.titley=oa+("top"===E.title.side?na-S:S));E.line.color&&"auto"===E.tickmode&&(V.tickmode="linear",V.tick0=E.levels.start,ba=E.levels.size,da=l.constrain((ua-Z)/50,4,15)+1,da=(G[1]-G[0])/((E.nticks||da)*ba),1<da&&(ca=Math.pow(10,Math.floor(Math.log(da)/Math.LN10)),ba*=ca*l.roundUp(da/ca,[2,5,10]),2E-6>(Math.abs(E.levels.start)/E.levels.size+1E-6)%1&&(V.tick0=0)),V.dtick=ba);V.domain=[oa+S,oa+na-S];V.setScale();var ia=
l.ensureSingle(D._infolayer,"g",m,function(b){b.classed(F.colorbar,!0).each(function(){var b=p.select(this);b.append("rect").classed(F.cbbg,!0);b.append("g").classed(F.cbfills,!0);b.append("g").classed(F.cblines,!0);b.append("g").classed(F.cbaxis,!0).classed(F.crisp,!0);b.append("g").classed(F.cbtitleunshift,!0).append("g").classed(F.cbtitle,!0);b.append("rect").classed(F.cboutline,!0);b.select(".cbtitle").datum(0)})});ia.attr("transform","translate("+Math.round(K.l)+","+Math.round(K.t)+")");var Ka=
ia.select(".cbtitleunshift").attr("transform","translate(-"+Math.round(K.l)+",-"+Math.round(K.t)+")"),wa=ia.select(".cbaxis"),Aa=0;-1!==["top","bottom"].indexOf(E.title.side)&&(ba=V.title.font.size,J(V._id+"title",{attributes:{x:K.l+(E.x+W)*K.w,y:"top"===E.title.side?(1-(oa+na-S))*K.h+K.t+3+.75*ba:(1-(oa+S))*K.h+K.t-3-.25*ba,"text-anchor":"start"}}));(W=l.syncOrAsync([h.previousPromises,function(){if(-1!==["top","bottom"].indexOf(E.title.side)){var b=ia.select(".cbtitle"),c=b.select("text"),f=[-E.outlinewidth/
2,E.outlinewidth/2],e=b.select(".h"+V._id+"title-math-group").node(),h=15.6;c.node()&&(h=parseInt(c.node().style.fontSize,10)*r);e?(Aa=d.bBox(e).height,Aa>h&&(f[1]-=(Aa-h)/2)):c.node()&&!c.classed(F.jsPlaceholder)&&(Aa=d.bBox(c.node()).height);Aa&&(Aa+=5,"top"===E.title.side?(V.domain[1]-=Aa/K.h,f[1]*=-1):(V.domain[0]+=Aa/K.h,c=k.lineCount(c),f[1]+=(1-c)*h),b.attr("transform","translate("+f+")"),V.setScale())}ia.selectAll(".cbfills,.cblines").attr("transform","translate(0,"+Math.round(K.h*(1-V.domain[1]))+
")");wa.attr("transform","translate(0,"+Math.round(-K.t)+")");b=ia.select(".cbfills").selectAll("rect.cbfill").data(R);b.enter().append("rect").classed(F.cbfill,!0).style("stroke","none");b.exit().remove();var q=G.map(V.c2p).map(Math.round).sort(function(b,a){return b-a});b.each(function(b,c){c=[0===c?G[0]:(R[c]+R[c-1])/2,c===R.length-1?G[1]:(R[c]+R[c+1])/2].map(V.c2p).map(Math.round);c[1]=l.constrain(c[1]+(c[1]>c[0])?1:-1,q[0],q[1]);c=p.select(this).attr({x:ha,width:Math.max(ea,2),y:p.min(c),height:Math.max(p.max(c)-
p.min(c),2)});E.fillgradient?d.gradient(c,a,m,"vertical",E.fillgradient,"fill"):(b=P(b).replace("e-",""),c.attr("fill",g(b).toHexString()))});b=ia.select(".cblines").selectAll("path.cbline").data(E.line.color&&E.line.width?H:[]);b.enter().append("path").classed(F.cbline,!0);b.exit().remove();b.each(function(b){p.select(this).attr("d","M"+ha+","+(Math.round(V.c2p(b))+E.line.width/2%1)+"h"+ea).call(d.lineGroupStyle,E.line.width,T(b),E.line.dash)});wa.selectAll("g."+V._id+"tick,path").remove();return l.syncOrAsync([function(){var b=
ha+ea+(E.outlinewidth||0)/2-("outside"===E.ticks?1:0),c=n.calcTicks(V),d=n.makeTransFn(V),f=n.getTickSigns(V)[2];n.drawTicks(a,V,{vals:"inside"===V.ticks?n.clipEnds(V,c):c,layer:wa,path:n.makeTickPath(V,b,f),transFn:d});return n.drawLabels(a,V,{vals:c,layer:wa,transFn:d,labelFns:n.makeLabelFns(V,b)})},function(){if(-1===["top","bottom"].indexOf(E.title.side)){var b=V.title.font.size,c=V._offset+V._length/2;b=K.l+(V.position||0)*K.w+("right"===V.side?10+b*(V.showticklabels?1:.5):-10-b*(V.showticklabels?
.5:0));J("h"+V._id+"title",{avoid:{selection:p.select(a).selectAll("g."+V._id+"tick"),side:E.title.side,offsetLeft:K.l,offsetTop:0,maxShift:D.width},attributes:{x:b,y:c,"text-anchor":"middle"},transform:{rotate:"-90",offset:0}})}}])},h.previousPromises,function(){var b=ea+E.outlinewidth/2+d.bBox(wa.node()).width;qa=Ka.select("text");if(qa.node()&&!qa.classed(F.jsPlaceholder)){var c=Ka.select(".h"+V._id+"title-math-group").node();c=c&&-1!==["top","bottom"].indexOf(E.title.side)?d.bBox(c).width:d.bBox(Ka.node()).right-
ha-K.l;b=Math.max(b,c)}c=2*E.xpad+b+E.borderwidth+E.outlinewidth/2;var e=ua-Z;ia.select(".cbbg").attr({x:ha-E.xpad-(E.borderwidth+E.outlinewidth)/2,y:Z-X,width:Math.max(c,2),height:Math.max(e+2*X,2)}).call(f.fill,E.bgcolor).call(f.stroke,E.bordercolor).style({"stroke-width":E.borderwidth});ia.selectAll(".cboutline").attr({x:ha,y:Z+E.ypad+("top"===E.title.side?Aa:0),width:Math.max(ea,2),height:Math.max(e-2*E.ypad-Aa,2)}).call(f.stroke,E.outlinecolor).style({fill:"None","stroke-width":E.outlinewidth});
ia.attr("transform","translate("+(K.l-({center:.5,right:1}[E.xanchor]||0)*c)+","+K.t+")");b={};var g=v[E.yanchor],k=z[E.yanchor];"pixels"===E.lenmode?(b.y=E.y,b.t=e*g,b.b=e*k):(b.t=b.b=0,b.yt=E.y+E.len*g,b.yb=E.y-E.len*k);e=v[E.xanchor];g=z[E.xanchor];"pixels"===E.thicknessmode?(b.x=E.x,b.l=c*e,b.r=c*g):(c-=ea,b.l=c*e,b.r=c*g,b.xl=E.x-E.thickness*e,b.xr=E.x+E.thickness*g);h.autoMargin(a,m,b)}],a))&&W.then&&(a._promises||[]).push(W);if(a._context.edits.colorbarPosition){var Ha,Ba,va;b.init({element:ia.node(),
gd:a,prepFn:function(){Ha=ia.attr("transform");q(ia)},moveFn:function(a,c){ia.attr("transform",Ha+" translate("+a+","+c+")");Ba=b.align(fa+a/K.w,U,0,1,E.xanchor);va=b.align(oa-c/K.h,na,0,1,E.yanchor);a=b.getCursor(Ba,va,E.xanchor,E.yanchor);q(ia,a)},doneFn:function(){q(ia);if(void 0!==Ba&&void 0!==va){var b={};b[C("x")]=Ba;b[C("y")]=va;e.call("_guiRestyle",a,b,B().index)}}})}return W}D._infolayer.selectAll("g."+m).remove()}function B(){for(var b=m.substr(2),c=0;c<a._fullData.length;c++){var d=a._fullData[c];
if(d.uid===b)return d}}function C(b){var a="colorbar.",c=B()._module.colorbar.container;c&&(a=c+"."+a);return a+b}var E={},K;for(K in x)E[K]=null;E.fillcolor=null;E.line={color:null,width:null,dash:null};E.levels={start:null,end:null,size:null};E.filllevels=null;E.fillgradient=null;E.zrange=null;Object.keys(E).forEach(function(b){t[b]=function(a){if(!arguments.length)return E[b];E[b]=l.isPlainObject(E[b])?l.extendFlat(E[b],a):a;return t}});t.options=function(b){for(var a in b)if("function"===typeof t[a])t[a](b[a]);
return t};t._opts=E;return t}},{"../../constants/alignment":672,"../../lib":700,"../../lib/extend":690,"../../lib/setcursor":720,"../../lib/svg_text_utils":724,"../../plots/cartesian/axes":748,"../../plots/cartesian/axis_defaults":750,"../../plots/cartesian/layout_attributes":760,"../../plots/cartesian/position_defaults":763,"../../plots/plots":810,"../../registry":829,"../color":577,"../dragelement":595,"../drawing":598,"../titles":665,"./attributes":578,"./constants":580,d3:154,tinycolor2:521}],
583:[function(a,t,m){var p=a("../../lib");t.exports=function(a){return p.isPlainObject(a.colorbar)}},{"../../lib":700}],584:[function(a,t,m){var p=a("./scales.js").scales;Object.keys(p);t.exports=function(a,h){h=h||{};var e=h.cLetter||"c";a="noScale"in h?h.noScale:"marker.line"===(a||"");var g="showScaleDflt"in h?h.showScaleDflt:"z"===e,b="string"===typeof h.colorscaleDflt?p[h.colorscaleDflt]:null,l=h.editTypeOverride||"";var u="colorAttr"in h?h.colorAttr:{z:"z",c:"color"}[e];var q=e+"auto",d=e+"min",
f=e+"max",c={};c[d]=c[f]=void 0;var k={};k[q]=!1;var r={};"color"===u&&(r.color={valType:"color",arrayOk:!0,editType:l||"style"},h.anim&&(r.color.anim=!0));r[q]={valType:"boolean",dflt:!0,editType:"calc",impliedEdits:c};r[d]={valType:"number",dflt:null,editType:l||"plot",impliedEdits:k};r[f]={valType:"number",dflt:null,editType:l||"plot",impliedEdits:k};r[e+"mid"]={valType:"number",dflt:null,editType:"calc",impliedEdits:c};r.colorscale={valType:"colorscale",editType:"calc",dflt:b,impliedEdits:{autocolorscale:!1}};
r.autocolorscale={valType:"boolean",dflt:!1===h.autoColorDflt?!1:!0,editType:"calc",impliedEdits:{colorscale:void 0}};r.reversescale={valType:"boolean",dflt:!1,editType:"plot"};a||(r.showscale={valType:"boolean",dflt:g,editType:"calc"});return r}},{"./scales.js":592}],585:[function(a,t,m){var p=a("../../lib");t.exports=function(a,h,e){a=a._fullLayout;var g=e.vals,b=e.containerStr;e=e.cLetter;h=b?p.nestedProperty(h,b).get():h;b=e+"min";var l=e+"max",u=h[e+"auto"],q=h[b],d=h[l];e=h[e+"mid"];if(!1!==
u||void 0===q)q=p.aggNums(Math.min,null,g);if(!1!==u||void 0===d)d=p.aggNums(Math.max,null,g);!1!==u&&void 0!==e&&(d-e>e-q?q=e-(d-e):d-e<e-q&&(d=e+(e-q)));q===d&&(q-=.5,d+=.5);h["_"+b]=h[b]=q;h["_"+l]=h[l]=d;h.autocolorscale&&(a=0>q*d?a.colorscale.diverging:0<=q?a.colorscale.sequential:a.colorscale.sequentialminus,h._colorscale=h.colorscale=a)}},{"../../lib":700}],586:[function(a,t,m){var p=a("../../lib"),g=a("./helpers").hasColorscale;t.exports=function(a){function e(b,a){var c=b["_"+a];void 0!==
c&&(b[a]=c)}function h(b,a){if(b=a.container?p.nestedProperty(b,a.container).get():b){var c=b.zauto||b.cauto,d=a.min;a=a.max;(c||void 0===b[d])&&e(b,d);(c||void 0===b[a])&&e(b,a);b.autocolorscale&&e(b,"colorscale")}}for(var b=0;b<a.length;b++){var l=a[b],u=l._module.colorbar;if(u)if(Array.isArray(u))for(var q=0;q<u.length;q++)h(l,u[q]);else h(l,u);g(l,"marker.line")&&h(l,{container:"marker.line",min:"cmin",max:"cmax"});g(l,"line")&&h(l,{container:"line",min:"cmin",max:"cmax"})}}},{"../../lib":700,
"./helpers":588}],587:[function(a,t,m){function p(b,a){var e=a.slice(0,a.length-1);return a?h.nestedProperty(b,e).get()||{}:b}var g=a("fast-isnumeric"),h=a("../../lib"),e=a("../colorbar/has_colorbar"),n=a("../colorbar/defaults"),b=a("./scales").isValid;t.exports=function(a,h,q,d,f){var c=f.prefix,k=f.cLetter;a=p(a,c);var l=p(h,c);h=p(h._template||{},c)||{};var u=a[k+"min"],m=a[k+"max"];u=g(u)&&g(m)&&u<m;d(c+k+"auto",!u)?d(c+k+"mid"):(d(c+k+"min"),d(c+k+"max"));k=a.colorscale;h=h.colorscale;var t;
void 0!==k&&(t=!b(k));void 0!==h&&(t=!b(h));d(c+"autocolorscale",t);d(c+"colorscale");d(c+"reversescale");if(!f.noScale&&"marker.line."!==c){var y;c&&(y=e(a));d(c+"showscale",y)&&n(a,l,q)}}},{"../../lib":700,"../colorbar/defaults":581,"../colorbar/has_colorbar":583,"./scales":592,"fast-isnumeric":221}],588:[function(a,t,m){function p(b){var a=b.length,f=Array(a);--a;for(var c=0;0<=a;a--,c++){var e=b[a];f[c]=[1-e[0],e[1]]}return f}function g(b){return e({r:b[0],g:b[1],b:b[2],a:b[3]}).toRgbString()}
var h=a("d3"),e=a("tinycolor2"),n=a("fast-isnumeric"),b=a("../../lib"),l=a("../color"),u=a("./scales").isValid;t.exports={hasColorscale:function(a,d){a=d?b.nestedProperty(a,d).get()||{}:a;d=a.color;var f=!1;if(b.isArrayOrTypedArray(d))for(var c=0;c<d.length;c++)if(n(d[c])){f=!0;break}return b.isPlainObject(a)&&(f||!0===a.showscale||n(a.cmin)&&n(a.cmax)||u(a.colorscale)||b.isPlainObject(a.colorbar))},extractScale:function(b,a){var d=a.cLetter;a=b.reversescale?p(b.colorscale):b.colorscale;var c=b[d+
"min"];b=b[d+"max"];d=a.length;for(var e=Array(d),g=Array(d),h=0;h<d;h++){var l=a[h];e[h]=c+l[0]*(b-c);g[h]=l[1]}return{domain:e,range:g}},flipScale:p,makeColorScaleFunc:function(b,a){a=a||{};var d=b.domain,c=b.range;b=c.length;for(var k=Array(b),r=0;r<b;r++){var q=e(c[r]).toRgb();k[r]=[q.r,q.g,q.b,q.a]}var u=h.scale.linear().domain(d).range(k).clamp(!0);d=a.noNumericCheck;a=a.returnArray;a=d&&a?u:d?function(b){return g(u(b))}:a?function(b){return n(b)?u(b):e(b).isValid()?b:l.defaultLine}:function(b){return n(b)?
g(u(b)):e(b).isValid()?b:l.defaultLine};a.domain=u.domain;a.range=function(){return c};return a}}},{"../../lib":700,"../color":577,"./scales":592,d3:154,"fast-isnumeric":221,tinycolor2:521}],589:[function(a,t,m){m=a("./scales");var p=a("./helpers");t.exports={moduleType:"component",name:"colorscale",attributes:a("./attributes"),layoutAttributes:a("./layout_attributes"),supplyLayoutDefaults:a("./layout_defaults"),handleDefaults:a("./defaults"),crossTraceDefaults:a("./cross_trace_defaults"),calc:a("./calc"),
scales:m.scales,defaultScale:m.defaultScale,getScale:m.get,isValidScale:m.isValid,hasColorscale:p.hasColorscale,flipScale:p.flipScale,extractScale:p.extractScale,makeColorScaleFunc:p.makeColorScaleFunc}},{"./attributes":584,"./calc":585,"./cross_trace_defaults":586,"./defaults":587,"./helpers":588,"./layout_attributes":590,"./layout_defaults":591,"./scales":592}],590:[function(a,t,m){a=a("./scales").scales;t.exports={editType:"calc",sequential:{valType:"colorscale",dflt:a.Reds,editType:"calc"},sequentialminus:{valType:"colorscale",
dflt:a.Blues,editType:"calc"},diverging:{valType:"colorscale",dflt:a.RdBu,editType:"calc"}}},{"./scales":592}],591:[function(a,t,m){var p=a("../../lib"),g=a("./layout_attributes"),h=a("../../plot_api/plot_template");t.exports=function(a,n){a=a.colorscale;n=h.newContainer(n,"colorscale");p.coerce(a,n,g,"sequential",void 0);p.coerce(a,n,g,"sequentialminus",void 0);p.coerce(a,n,g,"diverging",void 0)}},{"../../lib":700,"../../plot_api/plot_template":738,"./layout_attributes":590}],592:[function(a,t,m){function p(a){var b=
0;if(!Array.isArray(a)||2>a.length||!a[0]||!a[a.length-1]||0!==+a[0][0]||1!==+a[a.length-1][0])return!1;for(var e=0;e<a.length;e++){var h=a[e];if(2!==h.length||+h[0]<b||!g(h[1]).isValid())return!1;b=+h[0]}return!0}var g=a("tinycolor2"),h={Greys:[[0,"rgb(0,0,0)"],[1,"rgb(255,255,255)"]],YlGnBu:[[0,"rgb(8,29,88)"],[.125,"rgb(37,52,148)"],[.25,"rgb(34,94,168)"],[.375,"rgb(29,145,192)"],[.5,"rgb(65,182,196)"],[.625,"rgb(127,205,187)"],[.75,"rgb(199,233,180)"],[.875,"rgb(237,248,217)"],[1,"rgb(255,255,217)"]],
Greens:[[0,"rgb(0,68,27)"],[.125,"rgb(0,109,44)"],[.25,"rgb(35,139,69)"],[.375,"rgb(65,171,93)"],[.5,"rgb(116,196,118)"],[.625,"rgb(161,217,155)"],[.75,"rgb(199,233,192)"],[.875,"rgb(229,245,224)"],[1,"rgb(247,252,245)"]],YlOrRd:[[0,"rgb(128,0,38)"],[.125,"rgb(189,0,38)"],[.25,"rgb(227,26,28)"],[.375,"rgb(252,78,42)"],[.5,"rgb(253,141,60)"],[.625,"rgb(254,178,76)"],[.75,"rgb(254,217,118)"],[.875,"rgb(255,237,160)"],[1,"rgb(255,255,204)"]],Bluered:[[0,"rgb(0,0,255)"],[1,"rgb(255,0,0)"]],RdBu:[[0,"rgb(5,10,172)"],
[.35,"rgb(106,137,247)"],[.5,"rgb(190,190,190)"],[.6,"rgb(220,170,132)"],[.7,"rgb(230,145,90)"],[1,"rgb(178,10,28)"]],Reds:[[0,"rgb(220,220,220)"],[.2,"rgb(245,195,157)"],[.4,"rgb(245,160,105)"],[1,"rgb(178,10,28)"]],Blues:[[0,"rgb(5,10,172)"],[.35,"rgb(40,60,190)"],[.5,"rgb(70,100,245)"],[.6,"rgb(90,120,245)"],[.7,"rgb(106,137,247)"],[1,"rgb(220,220,220)"]],Picnic:[[0,"rgb(0,0,255)"],[.1,"rgb(51,153,255)"],[.2,"rgb(102,204,255)"],[.3,"rgb(153,204,255)"],[.4,"rgb(204,204,255)"],[.5,"rgb(255,255,255)"],
[.6,"rgb(255,204,255)"],[.7,"rgb(255,153,255)"],[.8,"rgb(255,102,204)"],[.9,"rgb(255,102,102)"],[1,"rgb(255,0,0)"]],Rainbow:[[0,"rgb(150,0,90)"],[.125,"rgb(0,0,200)"],[.25,"rgb(0,25,255)"],[.375,"rgb(0,152,255)"],[.5,"rgb(44,255,150)"],[.625,"rgb(151,255,0)"],[.75,"rgb(255,234,0)"],[.875,"rgb(255,111,0)"],[1,"rgb(255,0,0)"]],Portland:[[0,"rgb(12,51,131)"],[.25,"rgb(10,136,186)"],[.5,"rgb(242,211,56)"],[.75,"rgb(242,143,56)"],[1,"rgb(217,30,30)"]],Jet:[[0,"rgb(0,0,131)"],[.125,"rgb(0,60,170)"],[.375,
"rgb(5,255,255)"],[.625,"rgb(255,255,0)"],[.875,"rgb(250,0,0)"],[1,"rgb(128,0,0)"]],Hot:[[0,"rgb(0,0,0)"],[.3,"rgb(230,0,0)"],[.6,"rgb(255,210,0)"],[1,"rgb(255,255,255)"]],Blackbody:[[0,"rgb(0,0,0)"],[.2,"rgb(230,0,0)"],[.4,"rgb(230,210,0)"],[.7,"rgb(255,255,255)"],[1,"rgb(160,200,255)"]],Earth:[[0,"rgb(0,0,130)"],[.1,"rgb(0,180,180)"],[.2,"rgb(40,210,40)"],[.4,"rgb(230,230,50)"],[.6,"rgb(120,70,20)"],[1,"rgb(255,255,255)"]],Electric:[[0,"rgb(0,0,0)"],[.15,"rgb(30,0,100)"],[.4,"rgb(120,0,100)"],[.6,
"rgb(160,90,0)"],[.8,"rgb(230,200,0)"],[1,"rgb(255,250,220)"]],Viridis:[[0,"#440154"],[.06274509803921569,"#48186a"],[.12549019607843137,"#472d7b"],[.18823529411764706,"#424086"],[.25098039215686274,"#3b528b"],[.3137254901960784,"#33638d"],[.3764705882352941,"#2c728e"],[.4392156862745098,"#26828e"],[.5019607843137255,"#21918c"],[.5647058823529412,"#1fa088"],[.6274509803921569,"#28ae80"],[.6901960784313725,"#3fbc73"],[.7529411764705882,"#5ec962"],[.8156862745098039,"#84d44b"],[.8784313725490196,"#addc30"],
[.9411764705882353,"#d8e219"],[1,"#fde725"]],Cividis:[[0,"rgb(0,32,76)"],[.058824,"rgb(0,42,102)"],[.117647,"rgb(0,52,110)"],[.176471,"rgb(39,63,108)"],[.235294,"rgb(60,74,107)"],[.294118,"rgb(76,85,107)"],[.352941,"rgb(91,95,109)"],[.411765,"rgb(104,106,112)"],[.470588,"rgb(117,117,117)"],[.529412,"rgb(131,129,120)"],[.588235,"rgb(146,140,120)"],[.647059,"rgb(161,152,118)"],[.705882,"rgb(176,165,114)"],[.764706,"rgb(192,177,109)"],[.823529,"rgb(209,191,102)"],[.882353,"rgb(225,204,92)"],[.941176,
"rgb(243,219,79)"],[1,"rgb(255,233,69)"]]},e=h.RdBu;t.exports={scales:h,defaultScale:e,get:function(a,b){function g(){try{a=h[a]||JSON.parse(a)}catch(u){a=b}}b||(b=e);if(!a)return b;"string"===typeof a&&(g(),"string"===typeof a&&g());return p(a)?a:b},isValid:function(a){return void 0!==h[a]?!0:p(a)}}},{tinycolor2:521}],593:[function(a,t,m){t.exports=function(a,g,h,e,n){a=(a-h)/(e-h);g=a+g/(e-h);h=(a+g)/2;return"left"===n||"bottom"===n?a:"center"===n||"middle"===n?h:"right"===n||"top"===n?g:a<2/3-
h?a:g>4/3-h?g:h}},{}],594:[function(a,t,m){var p=a("../../lib"),g=[["sw-resize","s-resize","se-resize"],["w-resize","move","e-resize"],["nw-resize","n-resize","ne-resize"]];t.exports=function(a,e,n,b){a="left"===n?0:"center"===n?1:"right"===n?2:p.constrain(Math.floor(3*a),0,2);e="bottom"===b?0:"middle"===b?1:"top"===b?2:p.constrain(Math.floor(3*e),0,2);return g[e][a]}},{"../../lib":700}],595:[function(a,t,m){function p(){var b=document.createElement("div");b.className="dragcover";var a=b.style;a.position=
"fixed";a.left=0;a.right=0;a.top=0;a.bottom=0;a.zIndex=999999999;a.background="none";document.body.appendChild(b);return b}function g(b){return h(b.changedTouches?b.changedTouches[0]:b,document.body)}var h=a("mouse-event-offset"),e=a("has-hover"),n=a("has-passive-events"),b=a("../../registry"),l=a("../../lib"),u=a("../../plots/cartesian/constants"),q=a("../../constants/interactions"),d=t.exports={};d.align=a("./align");d.getCursor=a("./cursor");a=a("./unhover");d.unhover=a.wrapped;d.unhoverRaw=a.raw;
d.init=function(a){function c(b,a,c){Math.abs(b)<c&&(b=0);Math.abs(a)<c&&(a=0);return[b,a]}function f(b){z._dragged=!1;z._dragging=!0;var c=g(b);x=c[0];F=c[1];H=b.target;G=b;E=2===b.buttons||b.ctrlKey;"undefined"===typeof b.clientX&&"undefined"===typeof b.clientY&&(b.clientX=x,b.clientY=F);B=(new Date).getTime();B-z._mouseDownTime<y?t+=1:(t=1,z._mouseDownTime=B);a.prepFn&&a.prepFn(b,x,F);e&&!E?(D=p(),D.style.cursor=window.getComputedStyle(w).cursor):e||(D=document,C=window.getComputedStyle(document.documentElement).cursor,
document.documentElement.style.cursor=window.getComputedStyle(w).cursor);document.addEventListener("mouseup",m);document.addEventListener("touchend",m);!1!==a.dragmode&&(b.preventDefault(),document.addEventListener("mousemove",h),document.addEventListener("touchmove",h))}function h(b){b.preventDefault();b=g(b);var c=K(b[0]-x,b[1]-F,a.minDrag||u.MINDRAG);b=c[0];c=c[1];if(b||c)z._dragged=!0,d.unhover(z);z._dragged&&a.moveFn&&!E&&a.moveFn(b,c)}function m(c){!1!==a.dragmode&&(c.preventDefault(),document.removeEventListener("mousemove",
h),document.removeEventListener("touchmove",h));document.removeEventListener("mouseup",m);document.removeEventListener("touchend",m);e?l.removeElement(D):C&&(D.documentElement.style.cursor=C,C=null);if(z._dragging){z._dragging=!1;(new Date).getTime()-z._mouseDownTime>y&&(t=Math.max(t-1,1));if(z._dragged)a.doneFn&&a.doneFn();else if(a.clickFn&&a.clickFn(t,G),!E){try{var d=new MouseEvent("click",c)}catch(M){var f=g(c);d=document.createEvent("MouseEvents");d.initMouseEvent("click",c.bubbles,c.cancelable,
c.view,c.detail,c.screenX,c.screenY,f[0],f[1],c.ctrlKey,c.altKey,c.shiftKey,c.metaKey,c.button,c.relatedTarget)}H.dispatchEvent(d)}c=z;c._dragging=!1;c._replotPending&&b.call("plot",c)}z._dragged=!1}var z=a.gd,t=1,y=q.DBLCLICKDELAY,w=a.element,x,F,B,C,D,G,H,E;z._mouseDownTime||(z._mouseDownTime=0);w.style.pointerEvents="all";w.onmousedown=f;n?(w._ontouchstart&&w.removeEventListener("touchstart",w._ontouchstart),w._ontouchstart=f,w.addEventListener("touchstart",f,{passive:!1})):w.ontouchstart=f;var K=
a.clampFn||c};d.coverSlip=p},{"../../constants/interactions":676,"../../lib":700,"../../plots/cartesian/constants":754,"../../registry":829,"./align":593,"./cursor":594,"./unhover":596,"has-hover":402,"has-passive-events":403,"mouse-event-offset":428}],596:[function(a,t,m){var p=a("../../lib/events"),g=a("../../lib/throttle"),h=a("../../lib/get_graph_div"),e=a("../fx/constants"),n=t.exports={};n.wrapped=function(b,a,u){b=h(b);b._fullLayout&&g.clear(b._fullLayout._uid+e.HOVERID);n.raw(b,a,u)};n.raw=
function(b,a){var e=b._fullLayout,g=b._hoverdata;a||(a={});a.target&&!1===p.triggerHandler(b,"plotly_beforehover",a)||(e._hoverlayer.selectAll("g").remove(),e._hoverlayer.selectAll("line").remove(),e._hoverlayer.selectAll("circle").remove(),b._hoverdata=void 0,a.target&&g&&b.emit("plotly_unhover",{event:a,points:g}))}},{"../../lib/events":689,"../../lib/get_graph_div":696,"../../lib/throttle":725,"../fx/constants":610}],597:[function(a,t,m){m.dash={valType:"string",values:"solid dot dash longdash dashdot longdashdot".split(" "),
dflt:"solid",editType:"style"}},{}],598:[function(a,t,m){function p(b,a){return w.symbolFuncs[b%100](a)+(200<=b?"M0,0.5L0.5,0L0,-0.5L-0.5,0Z":"")}function g(a,c,d,f){var e=b.select(a.node().parentNode),g=-1!==c.indexOf("top")?"top":-1!==c.indexOf("bottom")?"bottom":"middle";c=-1!==c.indexOf("left")?"end":-1!==c.indexOf("right")?"start":"middle";var h=f?f/.8+1:0,l=(k.lineCount(a)-1)*v+1;f=D[c]*h;d=.75*d+D[g]*h+(D[g]-1)*l*d/2;a.attr("text-anchor",c);e.attr("transform","translate("+f+","+d+")")}function h(b,
a){b=b.ts||a.textfont.size;return l(b)&&0<b?b:0}function e(a,c,d,f){var e=a[0]-c[0],g=a[1]-c[1],k=d[0]-c[0],h=d[1]-c[1];d=Math.pow(e*e+g*g,.25);a=Math.pow(k*k+h*h,.25);e=(a*a*e-d*d*k)*f;f*=a*a*g-d*d*h;g=3*a*(d+a);d=3*d*(d+a);return[[b.round(c[0]+(g&&e/g),2),b.round(c[1]+(g&&f/g),2)],[b.round(c[0]-(d&&e/d),2),b.round(c[1]-(d&&f/d),2)]]}function n(b){var a=b.getAttribute("data-unformatted");if(null!==a)return a+b.getAttribute("data-math")+b.getAttribute("text-anchor")+b.getAttribute("style")}var b=
a("d3"),l=a("fast-isnumeric"),u=a("tinycolor2"),q=a("../../registry"),d=a("../color"),f=a("../colorscale"),c=a("../../lib"),k=a("../../lib/svg_text_utils"),r=a("../../constants/xmlns_namespaces"),v=a("../../constants/alignment").LINE_SPACING,z=a("../../constants/interactions").DESELECTDIM,A=a("../../traces/scatter/subtypes"),y=a("../../traces/scatter/make_bubble_size_func"),w=t.exports={};w.font=function(b,a,f,e){c.isPlainObject(a)&&(e=a.color,f=a.size,a=a.family);a&&b.style("font-family",a);f+1&&
b.style("font-size",f+"px");e&&b.call(d.fill,e)};w.setPosition=function(b,a,c){b.attr("x",a).attr("y",c)};w.setSize=function(b,a,c){b.attr("width",a).attr("height",c)};w.setRect=function(b,a,c,d,f){b.call(w.setPosition,a,c).call(w.setSize,d,f)};w.translatePoint=function(b,a,c,d){c=c.c2p(b.x);b=d.c2p(b.y);if(l(c)&&l(b)&&a.node())"text"===a.node().nodeName?a.attr("x",c).attr("y",b):a.attr("transform","translate("+c+","+b+")");else return!1;return!0};w.translatePoints=function(a,c,d){a.each(function(a){var f=
b.select(this);w.translatePoint(a,f,c,d)})};w.hideOutsideRangePoint=function(b,a,c,d,f,e){a.attr("display",c.isPtWithinRange(b,f)&&d.isPtWithinRange(b,e)?null:"none")};w.hideOutsideRangePoints=function(a,c){if(c._hasClipOnAxisFalse){var d=c.xaxis,f=c.yaxis;a.each(function(c){c=c[0].trace;var e=c.xcalendar,g=c.ycalendar;a.selectAll("bar"===c.type?".bartext":"waterfall"===c.type?".bartext,.line":".point,.textpoint").each(function(a){w.hideOutsideRangePoint(a,b.select(this),d,f,e,g)})})}};w.crispRound=
function(b,a,c){return a&&l(a)?b._context.staticPlot?a:1>a?1:Math.round(a):c||0};w.singleLineStyle=function(b,a,c,f,e){a.style("fill","none");b=(((b||[])[0]||{}).trace||{}).line||{};c=c||b.width||0;e=e||b.dash||"";d.stroke(a,f||b.color);w.dashLine(a,e,c)};w.lineGroupStyle=function(a,c,f,e){a.style("fill","none").each(function(a){a=(((a||[])[0]||{}).trace||{}).line||{};var g=c||a.width||0,k=e||a.dash||"";b.select(this).call(d.stroke,f||a.color).call(w.dashLine,k,g)})};w.dashLine=function(b,a,c){c=
+c||0;a=w.dashStyle(a,c);b.style({"stroke-dasharray":a,"stroke-width":c+"px"})};w.dashStyle=function(b,a){a=Math.max(+a||1,3);"solid"===b?b="":"dot"===b?b=a+"px,"+a+"px":"dash"===b?b=3*a+"px,"+3*a+"px":"longdash"===b?b=5*a+"px,"+5*a+"px":"dashdot"===b?b=3*a+"px,"+a+"px,"+a+"px,"+a+"px":"longdashdot"===b&&(b=5*a+"px,"+2*a+"px,"+a+"px,"+2*a+"px");return b};w.singleFillStyle=function(a){var c=(((b.select(a.node()).data()[0]||[])[0]||{}).trace||{}).fillcolor;c&&a.call(d.fill,c)};w.fillGroupStyle=function(a){a.style("stroke-width",
0).each(function(a){var c=b.select(this);a[0].trace&&c.call(d.fill,a[0].trace.fillcolor)})};var x=a("./symbol_defs");w.symbolNames=[];w.symbolFuncs=[];w.symbolNeedLines={};w.symbolNoDot={};w.symbolNoFill={};w.symbolList=[];Object.keys(x).forEach(function(b){var a=x[b];w.symbolList=w.symbolList.concat([a.n,b,a.n+100,b+"-open"]);w.symbolNames[a.n]=b;w.symbolFuncs[a.n]=a.f;a.needLine&&(w.symbolNeedLines[a.n]=!0);a.noDot?w.symbolNoDot[a.n]=!0:w.symbolList=w.symbolList.concat([a.n+200,b+"-dot",a.n+300,
b+"-open-dot"]);a.noFill&&(w.symbolNoFill[a.n]=!0)});var F=w.symbolNames.length;w.symbolNumber=function(b){if("string"===typeof b){var a=0;0<b.indexOf("-open")&&(a=100,b=b.replace("-open",""));0<b.indexOf("-dot")&&(a+=200,b=b.replace("-dot",""));b=w.symbolNames.indexOf(b);0<=b&&(b+=a)}return b%100>=F||400<=b?0:Math.floor(Math.max(b,0))};a={x1:1,x2:0,y1:0,y2:0};t={x1:0,x2:0,y1:1,y2:0};var B=b.format("~.1f"),C={radial:{node:"radialGradient"},radialreversed:{node:"radialGradient",reversed:!0},horizontal:{node:"linearGradient",
attrs:a},horizontalreversed:{node:"linearGradient",attrs:a,reversed:!0},vertical:{node:"linearGradient",attrs:t},verticalreversed:{node:"linearGradient",attrs:t,reversed:!0}};w.gradient=function(a,f,e,g,k,h){for(var l=k.length,r=C[g],n=Array(l),q=0;q<l;q++)r.reversed?n[l-1-q]=[B(100*(1-k[q][0])),k[q][1]]:n[q]=[B(100*k[q][0]),k[q][1]];var p="g"+f._fullLayout._uid+"-"+e;f=f._fullLayout._defs.select(".gradients").selectAll("#"+p).data([g+n.join(";")],c.identity);f.exit().remove();f.enter().append(r.node).each(function(){var a=
b.select(this);r.attrs&&a.attr(r.attrs);a.attr("id",p);a=a.selectAll("stop").data(n);a.exit().remove();a.enter().append("stop");a.each(function(a){var c=u(a[1]);b.select(this).attr({offset:a[0]+"%","stop-color":d.tinyRGB(c),"stop-opacity":c.getAlpha()})})});a.style(h,"url(#"+p+")").style(h+"-opacity",null)};w.initGradients=function(b){c.ensureSingle(b._fullLayout._defs,"g","gradients").selectAll("linearGradient,radialGradient").remove()};w.pointStyle=function(a,c,d){if(a.size()){var f=w.makePointStyleFns(c);
a.each(function(a){w.singlePointStyle(a,b.select(this),c,f,d)})}};w.singlePointStyle=function(b,a,f,e,g){var k=f.marker,h=k.line;a.style("opacity",e.selectedOpacityFn?e.selectedOpacityFn(b):void 0===b.mo?k.opacity:b.mo);if(e.ms2mrc){var l="various"===b.ms||"various"===k.size?3:e.ms2mrc(b.ms);b.mrc=l;e.selectedSizeFn&&(l=b.mrc=e.selectedSizeFn(b));var r=w.symbolNumber(b.mx||k.symbol)||0;b.om=100<=r%200;a.attr("d",p(r,l))}l=!1;if(b.so){r=h.outlierwidth;var n=h.outliercolor;h=k.outliercolor}else r=(h||
{}).width,r=(b.mlw+1||r+1||(b.trace?(b.trace.marker.line||{}).width:0)+1)-1||0,n="mlc"in b?b.mlcc=e.lineScale(b.mlc):c.isArrayOrTypedArray(h.color)?d.defaultLine:h.color,c.isArrayOrTypedArray(k.color)&&(l=!0),h="mc"in b?b.mcc=e.markerScale(b.mc):k.color||"rgba(0,0,0,0)",e.selectedColorFn&&(h=e.selectedColorFn(b));if(b.om)a.call(d.stroke,h).style({"stroke-width":(r||1)+"px",fill:"none"});else{a.style("stroke-width",r+"px");var q=k.gradient;(e=b.mgt)?l=!0:e=q&&q.type;Array.isArray(e)&&(e=e[0],C[e]||
(e=0));e&&"none"!==e?((k=b.mgc)?l=!0:k=q.color,f=f.uid,l&&(f+="-"+b.i),w.gradient(a,g,f,e,[[0,k],[1,h]],"fill")):d.fill(a,h);r&&d.stroke(a,n)}};w.makePointStyleFns=function(b){var a={},d=b.marker;a.markerScale=w.tryColorscale(d,"");a.lineScale=w.tryColorscale(d,"line");q.traceIs(b,"symbols")&&(a.ms2mrc=A.isBubble(b)?y(b):function(){return(d.size||6)/2});b.selectedpoints&&c.extendFlat(a,w.makeSelectedPointStyleFns(b));return a};w.makeSelectedPointStyleFns=function(b){var a={},d=b.marker||{},f=(b.selected||
{}).marker||{},e=(b.unselected||{}).marker||{},g=f.opacity,k=e.opacity,h=void 0!==g,l=void 0!==k;if(c.isArrayOrTypedArray(d.opacity)||h||l)a.selectedOpacityFn=function(b){var a=void 0===b.mo?d.opacity:b.mo;return b.selected?h?g:a:l?k:z*a};var r=d.color,n=f.color,u=e.color;if(n||u)a.selectedColorFn=function(b){var a=b.mcc||r;return b.selected?n||a:u||a};var p=d.size,m=f.size,v=e.size,w=void 0!==m,t=void 0!==v;q.traceIs(b,"symbols")&&(w||t)&&(a.selectedSizeFn=function(b){var a=b.mrc||p/2;return b.selected?
w?m/2:a:t?v/2:a});return a};w.makeSelectedTextStyleFns=function(b){var a={},c=(b.textfont||{}).color,f=((b.selected||{}).textfont||{}).color,e=((b.unselected||{}).textfont||{}).color;a.selectedTextColorFn=function(b){var a=b.tc||c;return b.selected?f||a:e?e:f?a:d.addOpacity(a,z)};return a};w.selectedPointStyle=function(a,c){if(a.size()&&c.selectedpoints){var f=w.makeSelectedPointStyleFns(c),e=c.marker||{},g=[];f.selectedOpacityFn&&g.push(function(b,a){b.style("opacity",f.selectedOpacityFn(a))});f.selectedColorFn&&
g.push(function(b,a){d.fill(b,f.selectedColorFn(a))});f.selectedSizeFn&&g.push(function(b,a){var c=a.mx||e.symbol||0,d=f.selectedSizeFn(a);b.attr("d",p(w.symbolNumber(c),d));a.mrc2=d});g.length&&a.each(function(a){for(var c=b.select(this),d=0;d<g.length;d++)g[d](c,a)})}};w.tryColorscale=function(b,a){if(b=a?c.nestedProperty(b,a).get():b)if(a=b.color,b.colorscale&&c.isArrayOrTypedArray(a))return f.makeColorScaleFunc(f.extractScale(b,{cLetter:"c"}));return c.identity};var D={start:1,end:-1,middle:0,
bottom:1,top:-1};w.textPointStyle=function(a,d,f){if(a.size()){if(d.selectedpoints)var e=w.makeSelectedTextStyleFns(d).selectedTextColorFn;a.each(function(a){var l=b.select(this),r=c.extractOption(a,d,"tx","text");if(r||0===r){var n=a.tp||d.textposition,q=h(a,d),u=e?e(a):a.tc||d.textfont.color;l.call(w.font,a.tf||d.textfont.family,q,u).text(r).call(k.convertToTspans,f).call(g,n,q,a.mrc)}else l.remove()})}};w.selectedTextStyle=function(a,c){if(a.size()&&c.selectedpoints){var f=w.makeSelectedTextStyleFns(c);
a.each(function(a){var e=b.select(this),k=f.selectedTextColorFn(a),l=a.tp||c.textposition,r=h(a,c);d.fill(e,k);g(e,l,r,a.mrc2||a.mrc)})}};w.smoothopen=function(b,a){if(3>b.length)return"M"+b.join("L");var c="M"+b[0],d=[],f;for(f=1;f<b.length-1;f++)d.push(e(b[f-1],b[f],b[f+1],a));c+="Q"+d[0][0]+" "+b[1];for(f=2;f<b.length-1;f++)c+="C"+d[f-2][1]+" "+d[f-1][0]+" "+b[f];return c+="Q"+d[b.length-3][1]+" "+b[b.length-1]};w.smoothclosed=function(b,a){if(3>b.length)return"M"+b.join("L")+"Z";var c="M"+b[0],
d=b.length-1,f=[e(b[d],b[0],b[1],a)],g;for(g=1;g<d;g++)f.push(e(b[g-1],b[g],b[g+1],a));f.push(e(b[d-1],b[d],b[0],a));for(g=1;g<=d;g++)c+="C"+f[g-1][1]+" "+f[g][0]+" "+b[g];return c+="C"+f[d][1]+" "+f[0][0]+" "+b[0]+"Z"};var G={hv:function(a,c){return"H"+b.round(c[0],2)+"V"+b.round(c[1],2)},vh:function(a,c){return"V"+b.round(c[1],2)+"H"+b.round(c[0],2)},hvh:function(a,c){return"H"+b.round((a[0]+c[0])/2,2)+"V"+b.round(c[1],2)+"H"+b.round(c[0],2)},vhv:function(a,c){return"V"+b.round((a[1]+c[1])/2,2)+
"H"+b.round(c[0],2)+"V"+b.round(c[1],2)}},H=function(a,c){return"L"+b.round(c[0],2)+","+b.round(c[1],2)};w.steps=function(a){var c=G[a]||H;return function(a){for(var d="M"+b.round(a[0][0],2)+","+b.round(a[0][1],2),f=1;f<a.length;f++)d+=c(a[f-1],a[f]);return d}};w.makeTester=function(){var a=c.ensureSingleById(b.select("body"),"svg","js-plotly-tester",function(b){b.attr(r.svgAttrs).style({position:"absolute",left:"-10000px",top:"-10000px",width:"9000px",height:"9000px","z-index":"1"})}),d=c.ensureSingle(a,
"path","js-reference-point",function(b){b.attr("d","M0,0H1V1H0Z").style({"stroke-width":0,fill:"black"})});w.tester=a;w.testref=d};w.savedBBoxes={};var E=0;w.bBox=function(a,d,f){f||(f=n(a));var e;if(f){if(e=w.savedBBoxes[f])return c.extendFlat({},e)}else if(1===a.childNodes.length){var g=a.childNodes[0];if(f=n(g)){e=+g.getAttribute("x")||0;var h=+g.getAttribute("y")||0,l=g.getAttribute("transform");if(!l)return f=w.bBox(g,!1,f),e&&(f.left+=e,f.right+=e),h&&(f.top+=h,f.bottom+=h),f;f+="~"+e+"~"+h+
"~"+l;if(e=w.savedBBoxes[f])return c.extendFlat({},e)}}if(!d){var r=w.tester.node();a=a.cloneNode(!0);r.appendChild(a)}b.select(a).attr("transform",null).call(k.positionText,0,0);e=a.getBoundingClientRect();h=w.testref.node().getBoundingClientRect();d||r.removeChild(a);d={height:e.height,width:e.width,left:e.left-h.left,top:e.top-h.top,right:e.right-h.left,bottom:e.bottom-h.top};1E4<=E&&(w.savedBBoxes={},E=0);f&&(w.savedBBoxes[f]=d);E++;return c.extendFlat({},d)};w.setClipUrl=function(b,a,c){a?(c=
c._context,b.attr("clip-path","url("+(c._exportedPlot?"":c._baseUrl||"")+"#"+a+")")):b.attr("clip-path",null)};w.getTranslate=function(b){b=(b[b.attr?"attr":"getAttribute"]("transform")||"").replace(/.*\btranslate\((-?\d*\.?\d*)[^-\d]*(-?\d*\.?\d*)[^\d].*/,function(b,a,c){return[a,c].join(" ")}).split(" ");return{x:+b[0]||0,y:+b[1]||0}};w.setTranslate=function(b,a,c){var d=b.attr?"attr":"setAttribute",f=b[b.attr?"attr":"getAttribute"]("transform")||"";a=a||0;c=c||0;f=f.replace(/(\btranslate\(.*?\);?)/,
"").trim();f=(f+(" translate("+a+", "+c+")")).trim();b[d]("transform",f);return f};w.getScale=function(b){b=(b[b.attr?"attr":"getAttribute"]("transform")||"").replace(/.*\bscale\((\d*\.?\d*)[^\d]*(\d*\.?\d*)[^\d].*/,function(b,a,c){return[a,c].join(" ")}).split(" ");return{x:+b[0]||1,y:+b[1]||1}};w.setScale=function(b,a,c){var d=b.attr?"attr":"setAttribute",f=b[b.attr?"attr":"getAttribute"]("transform")||"";a=a||1;c=c||1;f=f.replace(/(\bscale\(.*?\);?)/,"").trim();f=(f+(" scale("+a+", "+c+")")).trim();
b[d]("transform",f);return f};var K=/\s*sc.*/;w.setPointGroupScale=function(b,a,c){a=a||1;c=c||1;if(b){var d=1===a&&1===c?"":" scale("+a+","+c+")";b.each(function(){var b=(this.getAttribute("transform")||"").replace(K,"");b+=d;b=b.trim();this.setAttribute("transform",b)})}};var I=/translate\([^)]*\)\s*$/;w.setTextPointsScale=function(a,c,d){a&&a.each(function(){var a=b.select(this),f=a.select("text");if(f.node()){var e=parseFloat(f.attr("x")||0);var g=parseFloat(f.attr("y")||0);f=(a.attr("transform")||
"").match(I);e=1===c&&1===d?[]:["translate("+e+","+g+")","scale("+c+","+d+")","translate("+-e+","+-g+")"];f&&e.push(f);a.attr("transform",e.join(" "))}})}},{"../../constants/alignment":672,"../../constants/interactions":676,"../../constants/xmlns_namespaces":678,"../../lib":700,"../../lib/svg_text_utils":724,"../../registry":829,"../../traces/scatter/make_bubble_size_func":1068,"../../traces/scatter/subtypes":1075,"../color":577,"../colorscale":589,"./symbol_defs":599,d3:154,"fast-isnumeric":221,
tinycolor2:521}],599:[function(a,t,m){var p=a("d3");t.exports={circle:{n:0,f:function(a){a=p.round(a,2);return"M"+a+",0A"+a+","+a+" 0 1,1 0,-"+a+"A"+a+","+a+" 0 0,1 "+a+",0Z"}},square:{n:1,f:function(a){a=p.round(a,2);return"M"+a+","+a+"H-"+a+"V-"+a+"H"+a+"Z"}},diamond:{n:2,f:function(a){a=p.round(1.3*a,2);return"M"+a+",0L0,"+a+"L-"+a+",0L0,-"+a+"Z"}},cross:{n:3,f:function(a){var g=p.round(.4*a,2);a=p.round(1.2*a,2);return"M"+a+","+g+"H"+g+"V"+a+"H-"+g+"V"+g+"H-"+a+"V-"+g+"H-"+g+"V-"+a+"H"+g+"V-"+
g+"H"+a+"Z"}},x:{n:4,f:function(a){a=p.round(.8*a/Math.sqrt(2),2);var g="l"+a+","+a,e="l"+a+",-"+a,n="l-"+a+",-"+a,b="l-"+a+","+a;return"M0,"+a+g+e+n+e+n+b+n+b+g+b+g+"Z"}},"triangle-up":{n:5,f:function(a){var g=p.round(2*a/Math.sqrt(3),2),e=p.round(a/2,2);a=p.round(a,2);return"M-"+g+","+e+"H"+g+"L0,-"+a+"Z"}},"triangle-down":{n:6,f:function(a){var g=p.round(2*a/Math.sqrt(3),2),e=p.round(a/2,2);a=p.round(a,2);return"M-"+g+",-"+e+"H"+g+"L0,"+a+"Z"}},"triangle-left":{n:7,f:function(a){var g=p.round(2*
a/Math.sqrt(3),2),e=p.round(a/2,2);a=p.round(a,2);return"M"+e+",-"+g+"V"+g+"L-"+a+",0Z"}},"triangle-right":{n:8,f:function(a){var g=p.round(2*a/Math.sqrt(3),2),e=p.round(a/2,2);a=p.round(a,2);return"M-"+e+",-"+g+"V"+g+"L"+a+",0Z"}},"triangle-ne":{n:9,f:function(a){var g=p.round(.6*a,2);a=p.round(1.2*a,2);return"M-"+a+",-"+g+"H"+g+"V"+a+"Z"}},"triangle-se":{n:10,f:function(a){var g=p.round(.6*a,2);a=p.round(1.2*a,2);return"M"+g+",-"+a+"V"+g+"H-"+a+"Z"}},"triangle-sw":{n:11,f:function(a){var g=p.round(.6*
a,2);a=p.round(1.2*a,2);return"M"+a+","+g+"H-"+g+"V-"+a+"Z"}},"triangle-nw":{n:12,f:function(a){var g=p.round(.6*a,2);a=p.round(1.2*a,2);return"M-"+g+","+a+"V-"+g+"H"+a+"Z"}},pentagon:{n:13,f:function(a){var g=p.round(.951*a,2),e=p.round(.588*a,2),n=p.round(-a,2),b=p.round(-.309*a,2);a=p.round(.809*a,2);return"M"+g+","+b+"L"+e+","+a+"H-"+e+"L-"+g+","+b+"L0,"+n+"Z"}},hexagon:{n:14,f:function(a){var g=p.round(a,2),e=p.round(a/2,2);a=p.round(a*Math.sqrt(3)/2,2);return"M"+a+",-"+e+"V"+e+"L0,"+g+"L-"+
a+","+e+"V-"+e+"L0,-"+g+"Z"}},hexagon2:{n:15,f:function(a){var g=p.round(a,2),e=p.round(a/2,2);a=p.round(a*Math.sqrt(3)/2,2);return"M-"+e+","+a+"H"+e+"L"+g+",0L"+e+",-"+a+"H-"+e+"L-"+g+",0Z"}},octagon:{n:16,f:function(a){var g=p.round(.924*a,2);a=p.round(.383*a,2);return"M-"+a+",-"+g+"H"+a+"L"+g+",-"+a+"V"+a+"L"+a+","+g+"H-"+a+"L-"+g+","+a+"V-"+a+"Z"}},star:{n:17,f:function(a){var g=1.4*a;a=p.round(.225*g,2);var e=p.round(.951*g,2),n=p.round(.363*g,2),b=p.round(.588*g,2),l=p.round(-g,2),u=p.round(-.309*
g,2),q=p.round(.118*g,2),d=p.round(.809*g,2);g=p.round(.382*g,2);return"M"+a+","+u+"H"+e+"L"+n+","+q+"L"+b+","+d+"L0,"+g+"L-"+b+","+d+"L-"+n+","+q+"L-"+e+","+u+"H-"+a+"L0,"+l+"Z"}},hexagram:{n:18,f:function(a){var g=p.round(.66*a,2),e=p.round(.38*a,2);a=p.round(.76*a,2);return"M-"+a+",0l-"+e+",-"+g+"h"+a+"l"+e+",-"+g+"l"+e+","+g+"h"+a+"l-"+e+","+g+"l"+e+","+g+"h-"+a+"l-"+e+","+g+"l-"+e+",-"+g+"h-"+a+"Z"}},"star-triangle-up":{n:19,f:function(a){var g=p.round(a*Math.sqrt(3)*.8,2),e=p.round(.8*a,2),
n=p.round(1.6*a,2);a=p.round(4*a,2);a="A "+a+","+a+" 0 0 1 ";return"M-"+g+","+e+a+g+","+e+a+"0,-"+n+a+"-"+g+","+e+"Z"}},"star-triangle-down":{n:20,f:function(a){var g=p.round(a*Math.sqrt(3)*.8,2),e=p.round(.8*a,2),n=p.round(1.6*a,2);a=p.round(4*a,2);a="A "+a+","+a+" 0 0 1 ";return"M"+g+",-"+e+a+"-"+g+",-"+e+a+"0,"+n+a+g+",-"+e+"Z"}},"star-square":{n:21,f:function(a){var g=p.round(1.1*a,2);a=p.round(2*a,2);a="A "+a+","+a+" 0 0 1 ";return"M-"+g+",-"+g+a+"-"+g+","+g+a+g+","+g+a+g+",-"+g+a+"-"+g+",-"+
g+"Z"}},"star-diamond":{n:22,f:function(a){var g=p.round(1.4*a,2);a=p.round(1.9*a,2);a="A "+a+","+a+" 0 0 1 ";return"M-"+g+",0"+a+"0,"+g+a+g+",0"+a+"0,-"+g+a+"-"+g+",0Z"}},"diamond-tall":{n:23,f:function(a){var g=p.round(.7*a,2);a=p.round(1.4*a,2);return"M0,"+a+"L"+g+",0L0,-"+a+"L-"+g+",0Z"}},"diamond-wide":{n:24,f:function(a){var g=p.round(1.4*a,2);a=p.round(.7*a,2);return"M0,"+a+"L"+g+",0L0,-"+a+"L-"+g+",0Z"}},hourglass:{n:25,f:function(a){a=p.round(a,2);return"M"+a+","+a+"H-"+a+"L"+a+",-"+a+"H-"+
a+"Z"},noDot:!0},bowtie:{n:26,f:function(a){a=p.round(a,2);return"M"+a+","+a+"V-"+a+"L-"+a+","+a+"V-"+a+"Z"},noDot:!0},"circle-cross":{n:27,f:function(a){a=p.round(a,2);return"M0,"+a+"V-"+a+"M"+a+",0H-"+a+"M"+a+",0A"+a+","+a+" 0 1,1 0,-"+a+"A"+a+","+a+" 0 0,1 "+a+",0Z"},needLine:!0,noDot:!0},"circle-x":{n:28,f:function(a){var g=p.round(a,2);a=p.round(a/Math.sqrt(2),2);return"M"+a+","+a+"L-"+a+",-"+a+"M"+a+",-"+a+"L-"+a+","+a+"M"+g+",0A"+g+","+g+" 0 1,1 0,-"+g+"A"+g+","+g+" 0 0,1 "+g+",0Z"},needLine:!0,
noDot:!0},"square-cross":{n:29,f:function(a){a=p.round(a,2);return"M0,"+a+"V-"+a+"M"+a+",0H-"+a+"M"+a+","+a+"H-"+a+"V-"+a+"H"+a+"Z"},needLine:!0,noDot:!0},"square-x":{n:30,f:function(a){a=p.round(a,2);return"M"+a+","+a+"L-"+a+",-"+a+"M"+a+",-"+a+"L-"+a+","+a+"M"+a+","+a+"H-"+a+"V-"+a+"H"+a+"Z"},needLine:!0,noDot:!0},"diamond-cross":{n:31,f:function(a){a=p.round(1.3*a,2);return"M"+a+",0L0,"+a+"L-"+a+",0L0,-"+a+"ZM0,-"+a+"V"+a+"M-"+a+",0H"+a},needLine:!0,noDot:!0},"diamond-x":{n:32,f:function(a){var g=
p.round(1.3*a,2);a=p.round(.65*a,2);return"M"+g+",0L0,"+g+"L-"+g+",0L0,-"+g+"ZM-"+a+",-"+a+"L"+a+","+a+"M-"+a+","+a+"L"+a+",-"+a},needLine:!0,noDot:!0},"cross-thin":{n:33,f:function(a){a=p.round(1.4*a,2);return"M0,"+a+"V-"+a+"M"+a+",0H-"+a},needLine:!0,noDot:!0,noFill:!0},"x-thin":{n:34,f:function(a){a=p.round(a,2);return"M"+a+","+a+"L-"+a+",-"+a+"M"+a+",-"+a+"L-"+a+","+a},needLine:!0,noDot:!0,noFill:!0},asterisk:{n:35,f:function(a){var g=p.round(1.2*a,2);a=p.round(.85*a,2);return"M0,"+g+"V-"+g+"M"+
g+",0H-"+g+"M"+a+","+a+"L-"+a+",-"+a+"M"+a+",-"+a+"L-"+a+","+a},needLine:!0,noDot:!0,noFill:!0},hash:{n:36,f:function(a){var g=p.round(a/2,2);a=p.round(a,2);return"M"+g+","+a+"V-"+a+"m-"+a+",0V"+a+"M"+a+","+g+"H-"+a+"m0,-"+a+"H"+a},needLine:!0,noFill:!0},"y-up":{n:37,f:function(a){var g=p.round(1.2*a,2),e=p.round(1.6*a,2);a=p.round(.8*a,2);return"M-"+g+","+a+"L0,0M"+g+","+a+"L0,0M0,-"+e+"L0,0"},needLine:!0,noDot:!0,noFill:!0},"y-down":{n:38,f:function(a){var g=p.round(1.2*a,2),e=p.round(1.6*a,2);
a=p.round(.8*a,2);return"M-"+g+",-"+a+"L0,0M"+g+",-"+a+"L0,0M0,"+e+"L0,0"},needLine:!0,noDot:!0,noFill:!0},"y-left":{n:39,f:function(a){var g=p.round(1.2*a,2),e=p.round(1.6*a,2);a=p.round(.8*a,2);return"M"+a+","+g+"L0,0M"+a+",-"+g+"L0,0M-"+e+",0L0,0"},needLine:!0,noDot:!0,noFill:!0},"y-right":{n:40,f:function(a){var g=p.round(1.2*a,2),e=p.round(1.6*a,2);a=p.round(.8*a,2);return"M-"+a+","+g+"L0,0M-"+a+",-"+g+"L0,0M"+e+",0L0,0"},needLine:!0,noDot:!0,noFill:!0},"line-ew":{n:41,f:function(a){a=p.round(1.4*
a,2);return"M"+a+",0H-"+a},needLine:!0,noDot:!0,noFill:!0},"line-ns":{n:42,f:function(a){a=p.round(1.4*a,2);return"M0,"+a+"V-"+a},needLine:!0,noDot:!0,noFill:!0},"line-ne":{n:43,f:function(a){a=p.round(a,2);return"M"+a+",-"+a+"L-"+a+","+a},needLine:!0,noDot:!0,noFill:!0},"line-nw":{n:44,f:function(a){a=p.round(a,2);return"M"+a+","+a+"L-"+a+",-"+a},needLine:!0,noDot:!0,noFill:!0}}},{d3:154}],600:[function(a,t,m){t.exports={visible:{valType:"boolean",editType:"calc"},type:{valType:"enumerated",values:["percent",
"constant","sqrt","data"],editType:"calc"},symmetric:{valType:"boolean",editType:"calc"},array:{valType:"data_array",editType:"calc"},arrayminus:{valType:"data_array",editType:"calc"},value:{valType:"number",min:0,dflt:10,editType:"calc"},valueminus:{valType:"number",min:0,dflt:10,editType:"calc"},traceref:{valType:"integer",min:0,dflt:0,editType:"style"},tracerefminus:{valType:"integer",min:0,dflt:0,editType:"style"},copy_ystyle:{valType:"boolean",editType:"plot"},copy_zstyle:{valType:"boolean",
editType:"style"},color:{valType:"color",editType:"style"},thickness:{valType:"number",min:0,dflt:2,editType:"style"},width:{valType:"number",min:0,editType:"plot"},editType:"calc",_deprecated:{opacity:{valType:"number",editType:"style"}}}},{}],601:[function(a,t,m){function p(a,h,q,d){var f=h["error_"+d]||{},c=[];if(f.visible&&-1!==["linear","log"].indexOf(q.type)){f=b(f);for(var k=0;k<a.length;k++){var l=a[k],u=l.i;if(void 0===u)u=k;else if(null===u)continue;var p=l[d];if(g(q.c2l(p))){var m=f(p,
u);g(m[0])&&g(m[1])&&(u=l[d+"s"]=p-m[0],l=l[d+"h"]=p+m[1],c.push(u,l))}}a=h._extremes[q._id];q=e.findExtremes(q,c,n.extendFlat({tozero:a.opts.tozero},{padded:!0}));a.min=a.min.concat(q.min);a.max=a.max.concat(q.max)}}var g=a("fast-isnumeric"),h=a("../../registry"),e=a("../../plots/cartesian/axes"),n=a("../../lib"),b=a("./compute_error");t.exports=function(b){for(var a=b.calcdata,g=0;g<a.length;g++){var d=a[g],f=d[0].trace;if(!0===f.visible&&h.traceIs(f,"errorBarsOK")){var c=e.getFromId(b,f.xaxis),
k=e.getFromId(b,f.yaxis);p(d,f,c,"x");p(d,f,k,"y")}}}},{"../../lib":700,"../../plots/cartesian/axes":748,"../../registry":829,"./compute_error":602,"fast-isnumeric":221}],602:[function(a,t,m){function p(a,h){if("percent"===a)return function(a){return Math.abs(a*h/100)};if("constant"===a)return function(){return Math.abs(h)};if("sqrt"===a)return function(a){return Math.sqrt(Math.abs(a))}}t.exports=function(a){var g=a.type,e=a.symmetric;if("data"===g){var n=a.array||[];if(e)return function(b,a){b=+n[a];
return[b,b]};var b=a.arrayminus||[];return function(a,d){a=+n[d];d=+b[d];return isNaN(a)&&isNaN(d)?[NaN,NaN]:[d||0,a||0]}}var l=p(g,a.value),u=p(g,a.valueminus);return e||void 0===a.valueminus?function(b){b=l(b);return[b,b]}:function(b){return[u(b),l(b)]}}},{}],603:[function(a,t,m){var p=a("fast-isnumeric"),g=a("../../registry"),h=a("../../lib"),e=a("../../plot_api/plot_template"),n=a("./attributes");t.exports=function(b,a,u,q){function d(b,a){return h.coerce(k,c,n,b,a)}var f="error_"+q.axis,c=e.newContainer(a,
f),k=b[f]||{};if(!1!==d("visible",void 0!==k.array||void 0!==k.value||"sqrt"===k.type)){b=d("type","array"in k?"data":"percent");f=!0;"sqrt"!==b&&(f=d("symmetric",!(("data"===b?"arrayminus":"valueminus")in k)));if("data"===b)d("array"),d("traceref"),f||(d("arrayminus"),d("tracerefminus"));else if("percent"===b||"constant"===b)d("value"),f||d("valueminus");b="copy_"+q.inherit+"style";q.inherit&&(a["error_"+q.inherit]||{}).visible&&d(b,!(k.color||p(k.thickness)||p(k.width)));q.inherit&&c[b]||(d("color",
u),d("thickness"),d("width",g.traceIs(a,"gl3d")?0:4))}}},{"../../lib":700,"../../plot_api/plot_template":738,"../../registry":829,"./attributes":600,"fast-isnumeric":221}],604:[function(a,t,m){var p=a("../../lib");m=a("../../plot_api/edit_types").overrideAll;var g=a("./attributes"),h={error_x:p.extendFlat({},g),error_y:p.extendFlat({},g)};delete h.error_x.copy_zstyle;delete h.error_y.copy_zstyle;delete h.error_y.copy_ystyle;p={error_x:p.extendFlat({},g),error_y:p.extendFlat({},g),error_z:p.extendFlat({},
g)};delete p.error_x.copy_ystyle;delete p.error_y.copy_ystyle;delete p.error_z.copy_ystyle;delete p.error_z.copy_zstyle;t.exports={moduleType:"component",name:"errorbars",schema:{traces:{scatter:h,bar:h,histogram:h,scatter3d:m(p,"calc","nested"),scattergl:m(h,"calc","nested")}},supplyDefaults:a("./defaults"),calc:a("./calc"),makeComputeError:a("./compute_error"),plot:a("./plot"),style:a("./style"),hoverInfo:function(a,g,b){(g.error_y||{}).visible&&(b.yerr=a.yh-a.y,g.error_y.symmetric||(b.yerrneg=
a.y-a.ys));(g.error_x||{}).visible&&(b.xerr=a.xh-a.x,g.error_x.symmetric||(b.xerrneg=a.x-a.xs))}}},{"../../lib":700,"../../plot_api/edit_types":731,"./attributes":600,"./calc":601,"./compute_error":602,"./defaults":603,"./plot":605,"./style":606}],605:[function(a,t,m){var p=a("d3"),g=a("fast-isnumeric"),h=a("../drawing"),e=a("../../traces/scatter/subtypes");t.exports=function(a,b,l,u){var n,d=l.xaxis,f=l.yaxis,c=u&&0<u.duration;b.each(function(b){var k=b[0].trace,q=k.error_x||{},m=k.error_y||{},t;
k.ids&&(t=function(b){return b.id});var y=e.hasMarkers(k)&&0<k.marker.maxdisplayed;m.visible||q.visible||(b=[]);k=p.select(this).selectAll("g.errorbar").data(b,t);k.exit().remove();b.length&&(q.visible||k.selectAll("path.xerror").remove(),m.visible||k.selectAll("path.yerror").remove(),k.style("opacity",1),b=k.enter().append("g").classed("errorbar",!0),c&&b.style("opacity",0).transition().duration(u.duration).style("opacity",1),h.setClipUrl(k,l.layerClipId,a),k.each(function(b){var a=p.select(this),
e=d.c2p(b.x),k=f.c2p(b.y);if(void 0!==b.yh){var h=f.c2p(b.yh);var l=f.c2p(b.ys);if(!g(l)){var r=!0;l=f.c2p(b.ys,!0)}}if(void 0!==b.xh){var v=d.c2p(b.xh);var w=d.c2p(b.xs);if(!g(w)){var z=!0;w=d.c2p(b.xs,!0)}}if(!y||b.vis){b=a.select("path.yerror");if(m.visible&&g(e)&&g(h)&&g(l)){var t=m.width;e="M"+(e-t)+","+h+"h"+2*t+"m-"+t+",0V"+l;r||(e+="m-"+t+",0h"+2*t);(n=!b.size())?b=a.append("path").style("vector-effect","non-scaling-stroke").classed("yerror",!0):c&&(b=b.transition().duration(u.duration).ease(u.easing));
b.attr("d",e)}else b.remove();r=a.select("path.xerror");q.visible&&g(k)&&g(v)&&g(w)?(h=(q.copy_ystyle?m:q).width,e="M"+v+","+(k-h)+"v"+2*h+"m0,-"+h+"H"+w,z||(e+="m0,-"+h+"v"+2*h),(n=!r.size())?r=a.append("path").style("vector-effect","non-scaling-stroke").classed("xerror",!0):c&&(r=r.transition().duration(u.duration).ease(u.easing)),r.attr("d",e)):r.remove()}}))})}},{"../../traces/scatter/subtypes":1075,"../drawing":598,d3:154,"fast-isnumeric":221}],606:[function(a,t,m){var p=a("d3"),g=a("../color");
t.exports=function(a){a.each(function(a){var e=a[0].trace;a=e.error_y||{};e=e.error_x||{};var b=p.select(this);b.selectAll("path.yerror").style("stroke-width",a.thickness+"px").call(g.stroke,a.color);e.copy_ystyle&&(e=a);b.selectAll("path.xerror").style("stroke-width",e.thickness+"px").call(g.stroke,e.color)})}},{"../color":577,d3:154}],607:[function(a,t,m){a=a("../../plots/font_attributes");t.exports={hoverlabel:{bgcolor:{valType:"color",arrayOk:!0,editType:"none"},bordercolor:{valType:"color",arrayOk:!0,
editType:"none"},font:a({arrayOk:!0,editType:"none"}),namelength:{valType:"integer",min:-1,arrayOk:!0,editType:"none"},editType:"calc"}}},{"../../plots/font_attributes":774}],608:[function(a,t,m){function p(a,h,b,l){l=l||g.identity;Array.isArray(a)&&(h[0][b]=l(a))}var g=a("../../lib"),h=a("../../registry");t.exports=function(a){function e(b){return function(a){return g.coerceHoverinfo({hoverinfo:a},{_module:b._module},l)}}var b=a.calcdata,l=a._fullLayout;for(a=0;a<b.length;a++){var u=b[a],q=u[0].trace;
if(!h.traceIs(q,"pie")){var d=h.traceIs(q,"2dMap")?p:g.fillArray;d(q.hoverinfo,u,"hi",e(q));q.hovertemplate&&d(q.hovertemplate,u,"ht");q.hoverlabel&&(d(q.hoverlabel.bgcolor,u,"hbg"),d(q.hoverlabel.bordercolor,u,"hbc"),d(q.hoverlabel.font.size,u,"hts"),d(q.hoverlabel.font.color,u,"htc"),d(q.hoverlabel.font.family,u,"htf"),d(q.hoverlabel.namelength,u,"hnl"))}}}},{"../../lib":700,"../../registry":829}],609:[function(a,t,m){var p=a("../../registry"),g=a("./hover").hover;t.exports=function(a,e,n){function b(){a.emit("plotly_click",
{points:a._hoverdata,event:e})}var h=p.getComponentMethod("annotations","onClick")(a,a._hoverdata);void 0!==n&&g(a,e,n,!0);a._hoverdata&&e&&e.target&&(h&&h.then?h.then(b):b(),e.stopImmediatePropagation&&e.stopImmediatePropagation())}},{"../../registry":829,"./hover":613}],610:[function(a,t,m){t.exports={YANGLE:60,HOVERARROWSIZE:6,HOVERTEXTPAD:3,HOVERFONTSIZE:13,HOVERFONT:"Arial, sans-serif",HOVERMINTIME:50,HOVERID:"-hover"}},{}],611:[function(a,t,m){var p=a("../../lib"),g=a("./attributes"),h=a("./hoverlabel_defaults");
t.exports=function(a,n,b,l){h(a,n,function(b,e){return p.coerce(a,n,g,b,e)},l.hoverlabel)}},{"../../lib":700,"./attributes":607,"./hoverlabel_defaults":614}],612:[function(a,t,m){function p(a,g){if(Array.isArray(g)){if(Array.isArray(a)&&Array.isArray(a[g[0]]))return a[g[0]][g[1]]}else return a[g]}var g=a("../../lib");m.getSubplot=function(a){return a.subplot||a.xaxis+a.yaxis||a.geo};m.isTraceInSubplots=function(a,g){if("splom"===a.type){var b=a.xaxes||[];a=a.yaxes||[];for(var e=0;e<b.length;e++)for(var h=
0;h<a.length;h++)if(-1!==g.indexOf(b[e]+a[h]))return!0;return!1}return-1!==g.indexOf(m.getSubplot(a))};m.flat=function(a,g){for(var b=Array(a.length),e=0;e<a.length;e++)b[e]=g;return b};m.p2c=function(a,g){for(var b=Array(a.length),e=0;e<a.length;e++)b[e]=a[e].p2c(g);return b};m.getDistanceFunction=function(a,g,b,h){return"closest"===a?h||m.quadrature(g,b):"x"===a?g:b};m.getClosest=function(a,g,b){if(!1!==b.index)0<=b.index&&b.index<a.length?b.distance=0:b.index=!1;else for(var e=0;e<a.length;e++){var h=
g(a[e]);h<=b.distance&&(b.index=e,b.distance=h)}return b};m.inbox=function(a,g,b){return 0>a*g||0===a?b:Infinity};m.quadrature=function(a,g){return function(b){var e=a(b);b=g(b);return Math.sqrt(e*e+b*b)}};m.makeEventData=function(a,g,b){var e="index"in a?a.index:a.pointNumber,h={data:g._input,fullData:g,curveNumber:g.index,pointNumber:e};if(g._indexToPoints){var n=g._indexToPoints[e];1===n.length?h.pointIndex=n[0]:h.pointIndices=n}else h.pointIndex=e;g._module.eventData?h=g._module.eventData(h,a,
g,b,e):("xVal"in a?h.x=a.xVal:"x"in a&&(h.x=a.x),"yVal"in a?h.y=a.yVal:"y"in a&&(h.y=a.y),a.xa&&(h.xaxis=a.xa),a.ya&&(h.yaxis=a.ya),void 0!==a.zLabelVal&&(h.z=a.zLabelVal));m.appendArrayPointValue(h,g,e);return h};m.appendArrayPointValue=function(a,n,b){var e=n._arrayAttrs;if(e)for(var u=0;u<e.length;u++){var q=e[u],d=h[q]||q;void 0===a[d]&&(q=g.nestedProperty(n,q).get(),q=p(q,b),void 0!==q&&(a[d]=q))}};m.appendArrayMultiPointValues=function(a,n,b){var e=n._arrayAttrs;if(e)for(var u=0;u<e.length;u++){var q=
e[u],d=h[q]||q;if(void 0===a[d]){q=g.nestedProperty(n,q).get();for(var f=Array(b.length),c=0;c<b.length;c++)f[c]=p(q,b[c]);a[d]=f}}};var h={ids:"id",locations:"location",labels:"label",values:"value","marker.colors":"color",parents:"parent"}},{"../../lib":700}],613:[function(a,t,m){function p(a,d,k,p){function m(b,a){for(var c=null,d=Infinity,f,e=0;e<b.length;e++)f=b[e].spikeDistance,f<d&&f<=a&&(c=b[e],d=f);return c}function v(b){return b?{xa:b.xa,ya:b.ya,x:void 0!==b.xSpike?b.xSpike:(b.x0+b.x1)/
2,y:void 0!==b.ySpike?b.ySpike:(b.y0+b.y1)/2,distance:b.distance,spikeDistance:b.spikeDistance,curveNumber:b.trace.index,color:b.color,pointNumber:b.index}:null}k||(k="xy");var t=Array.isArray(k)?k:[k],E=a._fullLayout,I=E._plots||[];k=I[k];var J=E._has("cartesian");k&&(k=k.overlays.map(function(b){return b.id}),t=t.concat(k));var B=t.length;k=Array(B);for(var C=Array(B),D=!1,K=0;K<B;K++){var G=t[K],F=I[G];F?(D=!0,k[K]=y.getFromId(a,F.xaxis._id),C[K]=y.getFromId(a,F.yaxis._id)):(G=E[G]._subplot,k[K]=
G.xaxis,C[K]=G.yaxis)}(I=d.hovermode||E.hovermode)&&!D&&(I="closest");if(-1===["x","y","closest"].indexOf(I)||!a.calcdata||a.querySelector(".zoombox")||a._dragging)return A.unhoverRaw(a,d);F=-1===E.hoverdistance?Infinity:E.hoverdistance;var H=-1===E.spikedistance?Infinity:E.spikedistance;D=[];B=[];var L,M;G={hLinePoint:null,vLinePoint:null};K=!1;if(Array.isArray(d))for(I="array",L=0;L<d.length;L++){if(M=a.calcdata[d[L].curveNumber||0]){var ha=M[0].trace;"skip"!==M[0].trace.hoverinfo&&(B.push(M),"h"===
ha.orientation&&(K=!0))}}else{for(L=0;L<a.calcdata.length;L++)M=a.calcdata[L],ha=M[0].trace,"skip"!==ha.hoverinfo&&x.isTraceInSubplots(ha,t)&&(B.push(M),"h"===ha.orientation&&(K=!0));if(d.target){if(!1===c.triggerHandler(a,"plotly_beforehover",d))return;var fa=d.target.getBoundingClientRect();var oa=d.clientX-fa.left;fa=d.clientY-fa.top;if(0>oa||oa>k[0]._length||0>fa||fa>C[0]._length)return A.unhoverRaw(a,d)}else oa="xpx"in d?d.xpx:k[0]._length/2,fa="ypx"in d?d.ypx:C[0]._length/2;d.pointerX=oa+k[0]._offset;
d.pointerY=fa+C[0]._offset;oa="xval"in d?x.flat(t,d.xval):x.p2c(k,oa);fa="yval"in d?x.flat(t,d.yval):x.p2c(C,fa);if(!q(oa[0])||!q(fa[0]))return f.warn("Fx.hover failed",d,a),A.unhoverRaw(a,d)}var ua=Infinity;for(L=0;L<B.length;L++)if((M=B[L])&&M[0]&&M[0].trace&&!0===M[0].trace.visible&&(ha=M[0].trace,-1===["carpet","contourcarpet"].indexOf(ha._module.name))){if("splom"===ha.type){var Z=0;var qa=t[Z]}else qa=x.getSubplot(ha),Z=t.indexOf(qa);var sa=I;M={cd:M,trace:ha,xa:k[Z],ya:C[Z],maxHoverDistance:F,
maxSpikeDistance:H,index:!1,distance:Math.min(ua,F),spikeDistance:Infinity,xSpike:void 0,ySpike:void 0,color:z.defaultLine,name:ha.name,x0:void 0,x1:void 0,y0:void 0,y1:void 0,xLabelVal:void 0,yLabelVal:void 0,zLabelVal:void 0,text:void 0};E[qa]&&(M.subplot=E[qa]._subplot);E._splomScenes&&E._splomScenes[ha.uid]&&(M.scene=E._splomScenes[ha.uid]);qa=D.length;if("array"===sa)if(Z=d[L],"pointNumber"in Z)M.index=Z.pointNumber,sa="closest";else{sa="";if("xval"in Z){var V=Z.xval;sa="x"}if("yval"in Z){var ia=
Z.yval;sa=sa?"closest":"y"}}else V=oa[Z],ia=fa[Z];if(0!==F)if(ha._module&&ha._module.hoverPoints){if(sa=ha._module.hoverPoints(M,V,ia,sa,E._hoverlayer))for(var Ka=0;Ka<sa.length;Ka++)Z=sa[Ka],q(Z.x0)&&q(Z.y0)&&D.push(n(Z,I))}else f.log("Unrecognized trace type in hover:",ha);"closest"===I&&D.length>qa&&(D.splice(0,qa),ua=D[0].distance);J&&0!==H&&0===D.length&&(M.distance=H,M.index=!1,(ha=ha._module.hoverPoints(M,V,ia,"closest",E._hoverlayer))&&(ha=ha.filter(function(b){return b.spikeDistance<=H})),
ha&&ha.length)&&(M=ha.filter(function(b){return b.xa.showspikes}),M.length&&(M=M[0],q(M.x0)&&q(M.y0)&&(M=v(M),!G.vLinePoint||G.vLinePoint.spikeDistance>M.spikeDistance))&&(G.vLinePoint=M),ha=ha.filter(function(b){return b.ya.showspikes}),ha.length&&(ha=ha[0],q(ha.x0)&&q(ha.y0)&&(M=v(ha),!G.hLinePoint||G.hLinePoint.spikeDistance>M.spikeDistance))&&(G.hLinePoint=M))}t={fullLayout:E,container:E._hoverlayer,outerContainer:E._paperdiv,event:d};a._spikepoints={vLinePoint:G.vLinePoint,hLinePoint:G.hLinePoint};
J&&0!==H&&0!==D.length&&(V=D.filter(function(b){return b.ya.showspikes}),V=m(V,H),G.hLinePoint=v(V),V=D.filter(function(b){return b.xa.showspikes}),V=m(V,H),G.vLinePoint=v(V));if(0===D.length)return a=A.unhoverRaw(a,d),!J||null===G.hLinePoint&&null===G.vLinePoint||b(G,t),a;J&&b(G,t);D.sort(function(b,a){return b.distance-a.distance});J=a._hoverdata;t=[];for(L=0;L<D.length;L++)V=D[L],ia=x.makeEventData(V,V.trace,V.cd),!1!==V.hovertemplate&&(G=!1,V.cd[V.index]&&V.cd[V.index].ht&&(G=V.cd[V.index].ht),
V.hovertemplate=G||V.trace.hovertemplate||!1),V.eventData=[ia],t.push(ia);a._hoverdata=t;B="y"===I&&(1<B.length||1<D.length)||"closest"===I&&K&&1<D.length;V=z.combine(E.plot_bgcolor||z.background,E.paper_bgcolor);I=g(D,{hovermode:I,rotateLabels:B,bgColor:V,container:E._hoverlayer,outerContainer:E._paperdiv,commonLabelOpts:E.hoverlabel,hoverdistance:E.hoverdistance},a);h(I,B?"xa":"ya",E);e(I,B);d.target&&d.target.tagName&&(E=w.getComponentMethod("annotations","hasClickToShow")(a,t),r(u.select(d.target),
E?"pointer":""));d.target&&!p&&l(a,d,J)&&(J&&a.emit("plotly_unhover",{event:d,points:J}),a.emit("plotly_hover",{event:d,points:a._hoverdata,xaxes:k,yaxes:C,xvals:oa,yvals:fa}))}function g(b,a,c){var d=c._fullLayout,e=a.hovermode,g=a.rotateLabels,h=a.bgColor,l=a.container,r=a.outerContainer,n=a.commonLabelOpts||{},q=a.fontFamily||F.HOVERFONT,p=a.fontSize||F.HOVERFONTSIZE,m=b[0],w=m.xa,t=m.ya,x="y"===e?"yLabel":"xLabel",y=m[x],A=(String(y)||"").split(" ")[0];r=r.node().getBoundingClientRect();var I=
r.top,J=r.width,D=r.height,C=void 0!==y&&m.distance<=a.hoverdistance&&("x"===e||"y"===e);if(C){a=!0;var G;for(r=0;r<b.length;r++)if(a&&void 0===b[r].zLabel&&(a=!1),G=b[r].hoverinfo||b[r].trace.hoverinfo)if(G=Array.isArray(G)?G:G.split("+"),-1===G.indexOf("all")&&-1===G.indexOf(e)){C=!1;break}a&&(C=!1)}a=l.selectAll("g.axistext").data(C?[0]:[]);a.enter().append("g").classed("axistext",!0);a.exit().remove();a.each(function(){var a=u.select(this),d=f.ensureSingle(a,"path","",function(b){b.style({"stroke-width":"1px"})}),
g=f.ensureSingle(a,"text","",function(b){b.attr("data-notex",1)}),h=n.bgcolor||z.defaultLine,l=n.bordercolor||z.contrast(h),r=z.contrast(h);d.style({fill:h,stroke:l});g.text(y).call(v.font,n.font.family||q,n.font.size||p,n.font.color||r).call(k.positionText,0,0).call(k.convertToTspans,c);a.attr("transform","");h=g.node().getBoundingClientRect();"x"===e?(g.attr("text-anchor","middle").call(k.positionText,0,"top"===w.side?I-h.bottom-H-E:I-h.top+H+E),g="top"===w.side?"-":"",d.attr("d","M0,0L"+H+","+
g+H+"H"+(E+h.width/2)+"v"+g+(2*E+h.height)+"H-"+(E+h.width/2)+"V"+g+H+"H-"+H+"Z"),a.attr("transform","translate("+(w._offset+(m.x0+m.x1)/2)+","+(t._offset+("top"===w.side?0:t._length))+")")):(g.attr("text-anchor","right"===t.side?"start":"end").call(k.positionText,("right"===t.side?1:-1)*(E+H),I-h.top-h.height/2),g="right"===t.side?"":"-",d.attr("d","M0,0L"+g+H+","+H+"V"+(E+h.height/2)+"h"+g+(2*E+h.width)+"V-"+(E+h.height/2)+"H"+g+H+"V-"+H+"Z"),a.attr("transform","translate("+(w._offset+("right"===
t.side?w._length:0))+","+(t._offset+(m.y0+m.y1)/2)+")"));b=b.filter(function(b){return void 0!==b.zLabelVal||(b[x]||"").split(" ")[0]===A})});l=l.selectAll("g.hovertext").data(b,function(b){return[b.trace.index,b.index,b.x0,b.y0,b.name,b.attr,b.xa,b.ya||""].join()});l.enter().append("g").classed("hovertext",!0).each(function(){var b=u.select(this);b.append("rect").call(z.fill,z.addOpacity(h,.8));b.append("text").classed("name",!0);b.append("path").style("stroke-width","1px");b.append("text").classed("nums",
!0).call(v.font,q,p)});l.exit().remove();l.each(function(b){var a=u.select(this).attr("transform",""),l="",r="",n=b.bgcolor||b.color,m=z.combine(z.opacity(n)?n:z.defaultLine,h),w=z.combine(z.opacity(b.color)?b.color:z.defaultLine,h),t=b.borderColor||z.contrast(m);void 0!==b.nameOverride&&(b.name=b.nameOverride);b.name&&(d.meta&&(b.name=f.templateString(b.name,{meta:d.meta})),l=k.plainText(b.name||"",{len:b.nameLength,allowedTags:"br sub sup b i em".split(" ")}));void 0!==b.zLabel?(void 0!==b.xLabel&&
(r+="x: "+b.xLabel+"\x3cbr\x3e"),void 0!==b.yLabel&&(r+="y: "+b.yLabel+"\x3cbr\x3e"),r+=(r?"z: ":"")+b.zLabel):C&&b[e+"Label"]===y?r=b[("x"===e?"y":"x")+"Label"]||"":void 0===b.xLabel?void 0!==b.yLabel&&"scattercarpet"!==b.trace.type&&(r=b.yLabel):r=void 0===b.yLabel?b.xLabel:"("+b.xLabel+", "+b.yLabel+")";!b.text&&0!==b.text||Array.isArray(b.text)||(r+=(r?"\x3cbr\x3e":"")+b.text);void 0!==b.extraText&&(r+=(r?"\x3cbr\x3e":"")+b.extraText);""!==r||b.hovertemplate||(""===l&&a.remove(),r=l);n=c._fullLayout._d3locale;
var x=b.hovertemplate||!1,A=b.hovertemplateLabels||b,G=b.eventData[0]||{};x&&(r=f.hovertemplateString(x,A,n,G,{meta:d.meta}),r=r.replace(K,function(b,a){l=a;return""}));n=a.select("text.nums").call(v.font,b.fontFamily||q,b.fontSize||p,b.fontColor||t).text(r).attr("data-notex",1).call(k.positionText,0,0).call(k.convertToTspans,c);x=a.select("text.name");G=A=0;l&&l!==r?(x.call(v.font,b.fontFamily||q,b.fontSize||p,w).text(l).attr("data-notex",1).call(k.positionText,0,0).call(k.convertToTspans,c),G=x.node().getBoundingClientRect(),
A=G.width+2*E,G=G.height+2*E):(x.remove(),a.select("rect").remove());a.select("path").style({fill:m,stroke:t});var F=n.node().getBoundingClientRect();r=b.xa._offset+(b.x0+b.x1)/2;m=b.ya._offset+(b.y0+b.y1)/2;t=Math.abs(b.x1-b.x0);w=Math.abs(b.y1-b.y0);var L=F.width+H+E+A;b.ty0=I-F.top;b.bx=F.width+2*E;b.by=Math.max(F.height+2*E,G);b.anchor="start";b.txwidth=F.width;b.tx2width=A;b.offset=0;g?(b.pos=r,G=m+w/2+L<=D,("top"===b.idealAlign||!G)&&0<=m-w/2-L?(m-=w/2,b.anchor="end"):G?(m+=w/2,b.anchor="start"):
b.anchor="middle"):(b.pos=m,G=r+t/2+L<=J,("left"===b.idealAlign||!G)&&0<=r-t/2-L?(r-=t/2,b.anchor="end"):G?(r+=t/2,b.anchor="start"):(b.anchor="middle",t=L/2,G=r+t-J,t=r-t,0<G&&(r-=G),0>t&&(r+=-t)));n.attr("text-anchor",b.anchor);A&&x.attr("text-anchor",b.anchor);a.attr("transform","translate("+r+","+m+")"+(g?"rotate("+B+")":""))});return l}function h(b,a,c){function d(b){var a=b[0],c=b[b.length-1];l=a.pmin-a.pos-a.dp+a.size;r=c.pos+c.dp+c.size-a.pmax;if(.01<l){for(q=b.length-1;0<=q;q--)b[q].dp+=
l;h=!1}if(!(.01>r)){if(-.01>l){for(q=b.length-1;0<=q;q--)b[q].dp-=r;h=!1}if(h){for(n=c=0;n<b.length;n++)u=b[n],u.pos+u.dp+u.size>a.pmax&&c++;for(n=b.length-1;0<=n&&!(0>=c);n--)u=b[n],u.pos>a.pmax-1&&(u.del=!0,c--);for(n=0;n<b.length&&!(0>=c);n++)if(u=b[n],u.pos<a.pmin+1)for(u.del=!0,c--,r=2*u.size,q=b.length-1;0<=q;q--)b[q].dp-=r;for(n=b.length-1;0<=n&&!(0>=c);n--)u=b[n],u.pos+u.dp+u.size>a.pmax&&(u.del=!0,c--)}}}var f=0,e=1,g=b.size(),k=Array(g);b.each(function(b,d){var f=b[a],g="x"===f._id.charAt(0);
f=f.range;!d&&f&&f[0]>f[1]!==g&&(e=-1);k[d]=[{datum:b,i:d,traceIndex:b.trace.index,dp:0,pos:b.pos,posref:b.posref,size:b.by*(g?C:1)/2,pmin:0,pmax:g?c.width:c.height}]});k.sort(function(b,a){return b[0].posref-a[0].posref||e*(a[0].traceIndex-b[0].traceIndex)});for(var h,l,r,n,q,u,p;!h&&f<=g;){f++;h=!0;for(n=0;n<k.length-1;){b=k[n];p=k[n+1];var m=b[b.length-1],v=p[0];l=m.pos+m.dp+m.size-v.pos-v.dp+v.size;if(.01<l&&m.pmin===v.pmin&&m.pmax===v.pmax){for(q=p.length-1;0<=q;q--)p[q].dp+=l;b.push.apply(b,
p);k.splice(n+1,1);p=0;for(q=b.length-1;0<=q;q--)p+=b[q].dp;r=p/b.length;for(q=b.length-1;0<=q;q--)b[q].dp-=r;h=!1}else n++}k.forEach(d)}for(n=k.length-1;0<=n;n--)for(f=k[n],q=f.length-1;0<=q;q--)g=f[q],b=g.datum,b.offset=g.dp,b.del=g.del}function e(b,a){b.each(function(b){var c=u.select(this);if(b.del)c.remove();else{var d="end"===b.anchor?-1:1,f=c.select("text.nums"),e={start:1,end:-1,middle:0}[b.anchor],g=e*(H+E),h=g+e*(b.txwidth+E),l=0,r=b.offset;"middle"===b.anchor&&(g-=b.tx2width/2,h+=b.txwidth/
2+E);a&&(r*=-G,l=b.offset*D);c.select("path").attr("d","middle"===b.anchor?"M-"+(b.bx/2+b.tx2width/2)+","+(r-b.by/2)+"h"+b.bx+"v"+b.by+"h-"+b.bx+"Z":"M0,0L"+(d*H+l)+","+(H+r)+"v"+(b.by/2-H)+"h"+d*b.bx+"v-"+b.by+"H"+(d*H+l)+"V"+(r-H)+"Z");f.call(k.positionText,g+l,r+b.ty0-b.by/2+E);b.tx2width&&(c.select("text.name").call(k.positionText,h+e*E+l,r+b.ty0-b.by/2+E),c.select("rect").call(v.setRect,h+(e-1)*b.tx2width/2+l,r-b.by/2-1,b.tx2width,b.by+2))}})}function n(b,a){function c(a,c,d){(c=h(c,d))&&(b[a]=
c)}var d=b.index,e=b.trace||{},g=b.cd[0],k=b.cd[d]||{},h=Array.isArray(d)?function(b,a){return f.castOption(g,d,b)||f.extractOption({},e,"",a)}:function(b,a){return f.extractOption(k,e,b,a)};c("hoverinfo","hi","hoverinfo");c("bgcolor","hbg","hoverlabel.bgcolor");c("borderColor","hbc","hoverlabel.bordercolor");c("fontFamily","htf","hoverlabel.font.family");c("fontSize","hts","hoverlabel.font.size");c("fontColor","htc","hoverlabel.font.color");c("nameLength","hnl","hoverlabel.namelength");b.posref=
"y"===a||"closest"===a&&"h"===e.orientation?b.xa._offset+(b.x0+b.x1)/2:b.ya._offset+(b.y0+b.y1)/2;b.x0=f.constrain(b.x0,0,b.xa._length);b.x1=f.constrain(b.x1,0,b.xa._length);b.y0=f.constrain(b.y0,0,b.ya._length);b.y1=f.constrain(b.y1,0,b.ya._length);void 0!==b.xLabelVal&&(b.xLabel="xLabel"in b?b.xLabel:y.hoverLabelText(b.xa,b.xLabelVal),b.xVal=b.xa.c2d(b.xLabelVal));void 0!==b.yLabelVal&&(b.yLabel="yLabel"in b?b.yLabel:y.hoverLabelText(b.ya,b.yLabelVal),b.yVal=b.ya.c2d(b.yLabelVal));void 0!==b.zLabelVal&&
void 0===b.zLabel&&(b.zLabel=String(b.zLabelVal));if(!(isNaN(b.xerr)||"log"===b.xa.type&&0>=b.xerr)){var l=y.tickText(b.xa,b.xa.c2l(b.xerr),"hover").text;b.xLabel=void 0!==b.xerrneg?b.xLabel+(" +"+l+" / -"+y.tickText(b.xa,b.xa.c2l(b.xerrneg),"hover").text):b.xLabel+("  "+l);"x"===a&&(b.distance+=1)}isNaN(b.yerr)||"log"===b.ya.type&&0>=b.yerr||(l=y.tickText(b.ya,b.ya.c2l(b.yerr),"hover").text,b.yLabel=void 0!==b.yerrneg?b.yLabel+(" +"+l+" / -"+y.tickText(b.ya,b.ya.c2l(b.yerrneg),"hover").text):b.yLabel+
("  "+l),"y"===a&&(b.distance+=1));(a=b.hoverinfo||b.trace.hoverinfo)&&"all"!==a&&(a=Array.isArray(a)?a:a.split("+"),-1===a.indexOf("x")&&(b.xLabel=void 0),-1===a.indexOf("y")&&(b.yLabel=void 0),-1===a.indexOf("z")&&(b.zLabel=void 0),-1===a.indexOf("text")&&(b.text=void 0),-1===a.indexOf("name")&&(b.name=void 0));return b}function b(b,a){var c=a.container,f=a.fullLayout;a=a.event;var e=!!b.hLinePoint,g=!!b.vLinePoint;c.selectAll(".spikeline").remove();if(g||e){f=z.combine(f.plot_bgcolor,f.paper_bgcolor);
if(e){var k=b.hLinePoint;var h=k&&k.xa;e=k&&k.ya;if("cursor"===e.spikesnap){h=a.pointerX;var l=a.pointerY}else h=h._offset+k.x,l=e._offset+k.y;var r=1.5>d.readability(k.color,f)?z.contrast(f):k.color;k=e.spikemode;var n=e.spikethickness;r=e.spikecolor||r;var q=e._boundingBox;q=(q.left+q.right)/2<h?q.right:q.left;if(-1!==k.indexOf("toaxis")||-1!==k.indexOf("across")){if(-1!==k.indexOf("toaxis")){var u=q;var p=h}-1!==k.indexOf("across")&&(u=e._counterSpan[0],p=e._counterSpan[1]);c.insert("line",":first-child").attr({x1:u,
x2:p,y1:l,y2:l,"stroke-width":n,stroke:r,"stroke-dasharray":v.dashStyle(e.spikedash,n)}).classed("spikeline",!0).classed("crisp",!0);c.insert("line",":first-child").attr({x1:u,x2:p,y1:l,y2:l,"stroke-width":n+2,stroke:f}).classed("spikeline",!0).classed("crisp",!0)}-1!==k.indexOf("marker")&&c.insert("circle",":first-child").attr({cx:q+("right"!==e.side?n:-n),cy:l,r:n,fill:r}).classed("spikeline",!0)}if(g){h=(u=b.vLinePoint)&&u.xa;e=u&&u.ya;"cursor"===h.spikesnap?(b=a.pointerX,a=a.pointerY):(b=h._offset+
u.x,a=e._offset+u.y);g=1.5>d.readability(u.color,f)?z.contrast(f):u.color;u=h.spikemode;p=h.spikethickness;g=h.spikecolor||g;e=h._boundingBox;e=(e.top+e.bottom)/2<a?e.bottom:e.top;if(-1!==u.indexOf("toaxis")||-1!==u.indexOf("across")){if(-1!==u.indexOf("toaxis")){var m=e;var w=a}-1!==u.indexOf("across")&&(m=h._counterSpan[0],w=h._counterSpan[1]);c.insert("line",":first-child").attr({x1:b,x2:b,y1:m,y2:w,"stroke-width":p,stroke:g,"stroke-dasharray":v.dashStyle(h.spikedash,p)}).classed("spikeline",!0).classed("crisp",
!0);c.insert("line",":first-child").attr({x1:b,x2:b,y1:m,y2:w,"stroke-width":p+2,stroke:f}).classed("spikeline",!0).classed("crisp",!0)}-1!==u.indexOf("marker")&&c.insert("circle",":first-child").attr({cx:b,cy:e-("top"!==h.side?p:-p),r:p,fill:g}).classed("spikeline",!0)}}}function l(b,a,c){if(!c||c.length!==b._hoverdata.length)return!0;for(a=c.length-1;0<=a;a--){var d=c[a],f=b._hoverdata[a];if(d.curveNumber!==f.curveNumber||String(d.pointNumber)!==String(f.pointNumber)||String(d.pointNumbers)!==String(f.pointNumbers))return!0}return!1}
var u=a("d3"),q=a("fast-isnumeric"),d=a("tinycolor2"),f=a("../../lib"),c=a("../../lib/events"),k=a("../../lib/svg_text_utils"),r=a("../../lib/override_cursor"),v=a("../drawing"),z=a("../color"),A=a("../dragelement"),y=a("../../plots/cartesian/axes"),w=a("../../registry"),x=a("./helpers"),F=a("./constants"),B=F.YANGLE;a=Math.PI*B/180;var C=1/Math.sin(a),D=Math.cos(a),G=Math.sin(a),H=F.HOVERARROWSIZE,E=F.HOVERTEXTPAD;m.hover=function(b,a,c,d){b=f.getGraphDiv(b);f.throttle(b._fullLayout._uid+F.HOVERID,
F.HOVERMINTIME,function(){p(b,a,c,d)})};m.loneHover=function(b,a){b={color:b.color||z.defaultLine,x0:b.x0||b.x||0,x1:b.x1||b.x||0,y0:b.y0||b.y||0,y1:b.y1||b.y||0,xLabel:b.xLabel,yLabel:b.yLabel,zLabel:b.zLabel,text:b.text,name:b.name,idealAlign:b.idealAlign,borderColor:b.borderColor,fontFamily:b.fontFamily,fontSize:b.fontSize,fontColor:b.fontColor,trace:b.trace||{index:0,hoverinfo:""},xa:{_offset:0},ya:{_offset:0},index:0,hovertemplate:b.hovertemplate||!1,eventData:b.eventData||!1,hovertemplateLabels:b.hovertemplateLabels||
!1};var c=u.select(a.container),d=a.outerContainer?u.select(a.outerContainer):c;c={hovermode:"closest",rotateLabels:!1,bgColor:a.bgColor||z.background,container:c,outerContainer:d};a=g([b],c,a.gd);e(a,c.rotateLabels);return a.node()};m.multiHovers=function(b,a){Array.isArray(b)||(b=[b]);b=b.map(function(b){return{color:b.color||z.defaultLine,x0:b.x0||b.x||0,x1:b.x1||b.x||0,y0:b.y0||b.y||0,y1:b.y1||b.y||0,xLabel:b.xLabel,yLabel:b.yLabel,zLabel:b.zLabel,text:b.text,name:b.name,idealAlign:b.idealAlign,
borderColor:b.borderColor,fontFamily:b.fontFamily,fontSize:b.fontSize,fontColor:b.fontColor,trace:b.trace||{index:0,hoverinfo:""},xa:{_offset:0},ya:{_offset:0},index:0,hovertemplate:b.hovertemplate||!1,eventData:b.eventData||!1,hovertemplateLabels:b.hovertemplateLabels||!1}});var c=u.select(a.container),d=a.outerContainer?u.select(a.outerContainer):c;c={hovermode:"closest",rotateLabels:!1,bgColor:a.bgColor||z.background,container:c,outerContainer:d};a=g(b,c,a.gd);var f=0;a.sort(function(b,a){return b.y0-
a.y0}).each(function(b){var a=b.y0-b.by/2;b.offset=a-5<f?f-a+5:0;f=a+b.by+b.offset});e(a,c.rotateLabels);return a.node()};var K=/<extra>([\s\S]*)<\/extra>/},{"../../lib":700,"../../lib/events":689,"../../lib/override_cursor":711,"../../lib/svg_text_utils":724,"../../plots/cartesian/axes":748,"../../registry":829,"../color":577,"../dragelement":595,"../drawing":598,"./constants":610,"./helpers":612,d3:154,"fast-isnumeric":221,tinycolor2:521}],614:[function(a,t,m){var p=a("../../lib");t.exports=function(a,
h,e,n){n=n||{};e("hoverlabel.bgcolor",n.bgcolor);e("hoverlabel.bordercolor",n.bordercolor);e("hoverlabel.namelength",n.namelength);p.coerceFont(e,"hoverlabel.font",n.font)}},{"../../lib":700}],615:[function(a,t,m){t.exports=function(a,g){a=a||{};g=g||{};g=g.keys||[];if(0<g.length){for(var h=[],e=0;e<g.length;e++)h[e]="`"+g[e]+"`";1!==g.length&&(h.slice(0,-1).join(", "),h.slice(-1))}g={valType:"string",dflt:"",editType:a.editType||"none"};!1!==a.arrayOk&&(g.arrayOk=!0);return g}},{}],616:[function(a,
t,m){var p=a("d3"),g=a("../../lib");m=a("../dragelement");var h=a("./helpers"),e=a("./layout_attributes"),n=a("./hover");t.exports={moduleType:"component",name:"fx",constants:a("./constants"),schema:{layout:e},attributes:a("./attributes"),layoutAttributes:e,supplyLayoutGlobalDefaults:a("./layout_global_defaults"),supplyDefaults:a("./defaults"),supplyLayoutDefaults:a("./layout_defaults"),calc:a("./calc"),getDistanceFunction:h.getDistanceFunction,getClosest:h.getClosest,inbox:h.inbox,quadrature:h.quadrature,
appendArrayPointValue:h.appendArrayPointValue,castHoverOption:function(b,a,e){return g.castOption(b,a,"hoverlabel."+e)},castHoverinfo:function(b,a,e){return g.castOption(b,e,"hoverinfo",function(e){return g.coerceHoverinfo({hoverinfo:e},{_module:b._module},a)})},hover:n.hover,unhover:m.unhover,loneHover:n.loneHover,multiHovers:n.multiHovers,loneUnhover:function(b){b=g.isD3Selection(b)?b:p.select(b);b.selectAll("g.hovertext").remove();b.selectAll(".spikeline").remove()},click:a("./click")}},{"../../lib":700,
"../dragelement":595,"./attributes":607,"./calc":608,"./click":609,"./constants":610,"./defaults":611,"./helpers":612,"./hover":613,"./layout_attributes":617,"./layout_defaults":618,"./layout_global_defaults":619,d3:154}],617:[function(a,t,m){m=a("./constants");a=a("../../plots/font_attributes")({editType:"none"});a.family.dflt=m.HOVERFONT;a.size.dflt=m.HOVERFONTSIZE;t.exports={clickmode:{valType:"flaglist",flags:["event","select"],dflt:"event",editType:"plot",extras:["none"]},dragmode:{valType:"enumerated",
values:["zoom","pan","select","lasso","orbit","turntable",!1],dflt:"zoom",editType:"modebar"},hovermode:{valType:"enumerated",values:["x","y","closest",!1],editType:"modebar"},hoverdistance:{valType:"integer",min:-1,dflt:20,editType:"none"},spikedistance:{valType:"integer",min:-1,dflt:20,editType:"none"},hoverlabel:{bgcolor:{valType:"color",editType:"none"},bordercolor:{valType:"color",editType:"none"},font:a,namelength:{valType:"integer",min:-1,dflt:15,editType:"none"},editType:"none"},selectdirection:{valType:"enumerated",
values:["h","v","d","any"],dflt:"any",editType:"none"}}},{"../../plots/font_attributes":774,"./constants":610}],618:[function(a,t,m){function p(a,g){g=g._scatterStackOpts||{};for(var b=0;b<a.length;b++){var e=a[b],h=(g[e.xaxis+e.yaxis]||{})[e.stackgroup]||{};if("h"!==e.orientation&&"h"!==h.orientation)return!1}return!0}var g=a("../../lib"),h=a("./layout_attributes");t.exports=function(a,n,b){function e(b,f){return g.coerce(a,n,h,b,f)}var u=e("clickmode");"select"===e("dragmode")&&e("selectdirection");
n._has("cartesian")?-1<u.indexOf("select")?b="closest":(n._isHoriz=p(b,n),b=n._isHoriz?"y":"x"):b="closest";e("hovermode",b)&&(e("hoverdistance"),e("spikedistance"));b=n._has("mapbox");u=n._has("geo");var q=n._basePlotModules.length;"zoom"===n.dragmode&&((b||u)&&1===q||b&&u&&2===q)&&(n.dragmode="pan")}},{"../../lib":700,"./layout_attributes":617}],619:[function(a,t,m){var p=a("../../lib"),g=a("./hoverlabel_defaults"),h=a("./layout_attributes");t.exports=function(a,n){g(a,n,function(b,e){return p.coerce(a,
n,h,b,e)})}},{"../../lib":700,"./hoverlabel_defaults":614,"./layout_attributes":617}],620:[function(a,t,m){function p(b,a,f){a=a[f+"axes"];b=Object.keys((b._splomAxes||{})[f]||{});if(Array.isArray(a))return a;if(b.length)return b}function g(b,a,f,c,e,g){f=a(b+"gap",f);var d=a("domain."+b);a(b+"side",c);b=Array(e);a=d[0];d=(d[1]-a)/(e-f);f=d*(1-f);for(c=0;c<e;c++){var k=a+d*c;b[g?e-1-c:c]=[k,k+f]}return b}function h(b,a,f,c,e){function d(b,d){-1!==a.indexOf(d)&&void 0===c[d]?(g[b]=d,c[d]=b):g[b]=""}
var g=Array(f),k;if(Array.isArray(b))for(k=0;k<f;k++)d(k,b[k]);else for(d(0,e),k=1;k<f;k++)d(k,e+(k+1));return g}var e=a("../../lib");m=a("../../lib/regex").counter;var n=a("../../plots/domain").attributes,b=a("../../plots/cartesian/constants").idRegex,l=a("../../plot_api/plot_template"),u={rows:{valType:"integer",min:1,editType:"plot"},roworder:{valType:"enumerated",values:["top to bottom","bottom to top"],dflt:"top to bottom",editType:"plot"},columns:{valType:"integer",min:1,editType:"plot"},subplots:{valType:"info_array",
freeLength:!0,dimensions:2,items:{valType:"enumerated",values:[m("xy").toString(),""],editType:"plot"},editType:"plot"},xaxes:{valType:"info_array",freeLength:!0,items:{valType:"enumerated",values:[b.x.toString(),""],editType:"plot"},editType:"plot"},yaxes:{valType:"info_array",freeLength:!0,items:{valType:"enumerated",values:[b.y.toString(),""],editType:"plot"},editType:"plot"},pattern:{valType:"enumerated",values:["independent","coupled"],dflt:"coupled",editType:"plot"},xgap:{valType:"number",min:0,
max:1,editType:"plot"},ygap:{valType:"number",min:0,max:1,editType:"plot"},domain:n({name:"grid",editType:"plot",noGridCell:!0},{}),xside:{valType:"enumerated",values:["bottom","bottom plot","top plot","top"],dflt:"bottom plot",editType:"plot"},yside:{valType:"enumerated",values:["left","left plot","right plot","right"],dflt:"left plot",editType:"plot"},editType:"plot"};t.exports={moduleType:"component",name:"grid",schema:{layout:{grid:u}},layoutAttributes:u,sizeDefaults:function(b,a){function d(b,
a){return e.coerce(c,x,u,b,a)}var c=b.grid||{},k=p(a,c,"x"),h=p(a,c,"y");if(b.grid||k||h){b=Array.isArray(c.subplots)&&Array.isArray(c.subplots[0]);var n=Array.isArray(k),q=Array.isArray(h),m=n&&k!==c.xaxes&&q&&h!==c.yaxes;if(b){var t=c.subplots.length;var w=c.subplots[0].length}else q&&(t=h.length),n&&(w=k.length);var x=l.newContainer(a,"grid");k=d("rows",t);w=d("columns",w);if(1<k*w){b||n||q||"independent"===d("pattern")&&(b=!0);x._hasSubplotGrid=b;n="top to bottom"===d("roworder");q=b?.3:.1;if(m&&
a._splomGridDflt){var F=a._splomGridDflt.xside;var B=a._splomGridDflt.yside}x._domains={x:g("x",d,b?.2:.1,F,w),y:g("y",d,q,B,k,n)}}else delete a.grid}},contentDefaults:function(b,a){var d=a.grid;if(d&&d._domains){var c=b.grid||{};b=a._subplots;var e=d._hasSubplotGrid,g=d.rows,l=d.columns,n="independent"===d.pattern,q,u=d._axisMap={};if(e){var m=c.subplots||[];var t=d.subplots=Array(g);var F=1;for(a=0;a<g;a++){var B=t[a]=Array(l),C=m[a]||[];for(q=0;q<l;q++)if(n?(c=1===F?"xy":"x"+F+"y"+F,F++):c=C[q],
B[q]="",-1!==b.cartesian.indexOf(c)){var D=c.indexOf("y");var G=c.slice(0,D);D=c.slice(D);void 0!==u[G]&&u[G]!==q||void 0!==u[D]&&u[D]!==a||(B[q]=c,u[G]=q,u[D]=a)}}}else D=p(a,c,"x"),a=p(a,c,"y"),d.xaxes=h(D,b.xaxis,l,u,"x"),d.yaxes=h(a,b.yaxis,g,u,"y");n=d._anchors={};q="top to bottom"===d.roworder;for(var H in u)if(a=H.charAt(0),c=d[a+"side"],8>c.length)n[H]="free";else if("x"===a)if("t"===c.charAt(0)===q?(a=0,m=1,F=g):(a=g-1,F=m=-1),e)for(G=u[H];a!==F;a+=m){if(c=t[a][G])if(D=c.indexOf("y"),c.slice(0,
D)===H){n[H]=c.slice(D);break}}else for(;a!==F;a+=m){if(D=d.yaxes[a],-1!==b.cartesian.indexOf(H+D)){n[H]=D;break}}else if("l"===c.charAt(0)?(a=0,m=1,F=l):(a=l-1,F=m=-1),e)for(G=u[H];a!==F;a+=m){if(c=t[G][a])if(D=c.indexOf("y"),c.slice(D)===H){n[H]=c.slice(0,D);break}}else for(;a!==F;a+=m)if(G=d.xaxes[a],-1!==b.cartesian.indexOf(G+H)){n[H]=G;break}}}}},{"../../lib":700,"../../lib/regex":716,"../../plot_api/plot_template":738,"../../plots/cartesian/constants":754,"../../plots/domain":773}],621:[function(a,
t,m){m=a("../../plots/cartesian/constants");a=a("../../plot_api/plot_template").templatedArray;t.exports=a("image",{visible:{valType:"boolean",dflt:!0,editType:"arraydraw"},source:{valType:"string",editType:"arraydraw"},layer:{valType:"enumerated",values:["below","above"],dflt:"above",editType:"arraydraw"},sizex:{valType:"number",dflt:0,editType:"arraydraw"},sizey:{valType:"number",dflt:0,editType:"arraydraw"},sizing:{valType:"enumerated",values:["fill","contain","stretch"],dflt:"contain",editType:"arraydraw"},
opacity:{valType:"number",min:0,max:1,dflt:1,editType:"arraydraw"},x:{valType:"any",dflt:0,editType:"arraydraw"},y:{valType:"any",dflt:0,editType:"arraydraw"},xanchor:{valType:"enumerated",values:["left","center","right"],dflt:"left",editType:"arraydraw"},yanchor:{valType:"enumerated",values:["top","middle","bottom"],dflt:"top",editType:"arraydraw"},xref:{valType:"enumerated",values:["paper",m.idRegex.x.toString()],dflt:"paper",editType:"arraydraw"},yref:{valType:"enumerated",values:["paper",m.idRegex.y.toString()],
dflt:"paper",editType:"arraydraw"},editType:"arraydraw"})},{"../../plot_api/plot_template":738,"../../plots/cartesian/constants":754}],622:[function(a,t,m){var p=a("fast-isnumeric"),g=a("../../lib/to_log_range");t.exports=function(a,e,n,b){e=e||{};var h="log"===n&&"linear"===e.type;n="linear"===n&&"log"===e.type;if(h||n){a=a._fullLayout.images;n=e._id.charAt(0);for(var u,q,d=0;d<a.length;d++)if(u=a[d],q="images["+d+"].",u[n+"ref"]===e._id){var f=u[n];u=u["size"+n];h?(f=g(f,e.range),u=u/Math.pow(10,
f)/2,u=2*Math.log(u+Math.sqrt(1+u*u))/Math.LN10):(f=Math.pow(10,f),u=f*(Math.pow(10,u/2)-Math.pow(10,-u/2)));p(f)?p(u)||(u=null):u=f=null;b(q+n,f);b(q+"size"+n,u)}}}},{"../../lib/to_log_range":726,"fast-isnumeric":221}],623:[function(a,t,m){function p(b,a,e){function l(c,d){return g.coerce(b,a,n,c,d)}var d=l("source");if(!l("visible",!!d))return a;l("layer");l("xanchor");l("yanchor");l("sizex");l("sizey");l("sizing");l("opacity");e={_fullLayout:e};d=["x","y"];for(var f=0;2>f;f++){var c=d[f],k=h.coerceRef(b,
a,e,c,"paper");"paper"!==k&&h.getFromId(e,k)._imgIndices.push(a._index);h.coercePosition(a,e,l,k,c,0)}return a}var g=a("../../lib"),h=a("../../plots/cartesian/axes"),e=a("../../plots/array_container_defaults"),n=a("./attributes");t.exports=function(b,a){e(b,a,{name:"images",handleItemDefaults:p})}},{"../../lib":700,"../../plots/array_container_defaults":744,"../../plots/cartesian/axes":748,"./attributes":621}],624:[function(a,t,m){var p=a("d3"),g=a("../drawing"),h=a("../../plots/cartesian/axes"),
e=a("../../constants/xmlns_namespaces");t.exports=function(a){function b(b){var c=p.select(this);if(!this.img||this.img.src!==b.source){c.attr("xmlns",e.svg);var d=new Promise(function(a){function d(){c.remove();a()}var f=new Image;this.img=f;f.setAttribute("crossOrigin","anonymous");f.onerror=d;f.onload=function(){var b=document.createElement("canvas");b.width=this.width;b.height=this.height;b.getContext("2d").drawImage(this,0,0);b=b.toDataURL("image/png");c.attr("xlink:href",b);a()};c.on("error",
d);f.src=b.source}.bind(this));a._promises.push(d)}}function l(b){var c=p.select(this),d=h.getFromId(a,b.xref),f=h.getFromId(a,b.yref),e=n._size,k=d?Math.abs(d.l2p(b.sizex)-d.l2p(0)):b.sizex*e.w,l=f?Math.abs(f.l2p(b.sizey)-f.l2p(0)):b.sizey*e.h,r=k*t.x[b.xanchor].offset,q=l*t.y[b.yanchor].offset,u=t.x[b.xanchor].sizing+t.y[b.yanchor].sizing;r=(d?d.r2p(b.x)+d._offset:b.x*e.w+e.l)+r;e=(f?f.r2p(b.y)+f._offset:e.h-b.y*e.h+e.t)+q;switch(b.sizing){case "fill":u+=" slice";break;case "stretch":u="none"}c.attr({x:r,
y:e,width:k,height:l,preserveAspectRatio:u,opacity:b.opacity});b=(d?d._id:"")+(f?f._id:"");g.setClipUrl(c,b?"clip"+n._uid+b:null,a)}var n=a._fullLayout,q=[],d={},f=[],c;for(c=0;c<n.images.length;c++){var k=n.images[c];if(k.visible)if("below"===k.layer&&"paper"!==k.xref&&"paper"!==k.yref){var r=k.xref+k.yref;var m=n._plots[r];m?(m.mainplot&&(r=m.mainplot.id),d[r]||(d[r]=[]),d[r].push(k)):f.push(k)}else"above"===k.layer?q.push(k):f.push(k)}var t={x:{left:{sizing:"xMin",offset:0},center:{sizing:"xMid",
offset:-.5},right:{sizing:"xMax",offset:-1}},y:{top:{sizing:"YMin",offset:0},middle:{sizing:"YMid",offset:-.5},bottom:{sizing:"YMax",offset:-1}}};c=n._imageLowerLayer.selectAll("image").data(f);r=n._imageUpperLayer.selectAll("image").data(q);c.enter().append("image");r.enter().append("image");c.exit().remove();r.exit().remove();c.each(function(a){b.bind(this)(a);l.bind(this)(a)});r.each(function(a){b.bind(this)(a);l.bind(this)(a)});q=Object.keys(n._plots);for(c=0;c<q.length;c++)r=q[c],f=n._plots[r],
f.imagelayer&&(r=f.imagelayer.selectAll("image").data(d[r]||[]),r.enter().append("image"),r.exit().remove(),r.each(function(a){b.bind(this)(a);l.bind(this)(a)}))}},{"../../constants/xmlns_namespaces":678,"../../plots/cartesian/axes":748,"../drawing":598,d3:154}],625:[function(a,t,m){t.exports={moduleType:"component",name:"images",layoutAttributes:a("./attributes"),supplyLayoutDefaults:a("./defaults"),includeBasePlot:a("../../plots/cartesian/include_components")("images"),draw:a("./draw"),convertCoords:a("./convert_coords")}},
{"../../plots/cartesian/include_components":758,"./attributes":621,"./convert_coords":622,"./defaults":623,"./draw":624}],626:[function(a,t,m){m=a("../../plots/font_attributes");a=a("../color/attributes");t.exports={bgcolor:{valType:"color",editType:"legend"},bordercolor:{valType:"color",dflt:a.defaultLine,editType:"legend"},borderwidth:{valType:"number",min:0,dflt:0,editType:"legend"},font:m({editType:"legend"}),orientation:{valType:"enumerated",values:["v","h"],dflt:"v",editType:"legend"},traceorder:{valType:"flaglist",
flags:["reversed","grouped"],extras:["normal"],editType:"legend"},tracegroupgap:{valType:"number",min:0,dflt:10,editType:"legend"},x:{valType:"number",min:-2,max:3,dflt:1.02,editType:"legend"},xanchor:{valType:"enumerated",values:["auto","left","center","right"],dflt:"left",editType:"legend"},y:{valType:"number",min:-2,max:3,dflt:1,editType:"legend"},yanchor:{valType:"enumerated",values:["auto","top","middle","bottom"],dflt:"auto",editType:"legend"},uirevision:{valType:"any",editType:"none"},valign:{valType:"enumerated",
values:["top","middle","bottom"],dflt:"middle",editType:"legend"},editType:"legend"}},{"../../plots/font_attributes":774,"../color/attributes":576}],627:[function(a,t,m){t.exports={scrollBarWidth:6,scrollBarMinHeight:20,scrollBarColor:"#808BA4",scrollBarMargin:4,textOffsetX:40}},{}],628:[function(a,t,m){var p=a("../../registry"),g=a("../../lib"),h=a("../../plot_api/plot_template"),e=a("./attributes"),n=a("../../plots/layout_attributes"),b=a("./helpers");t.exports=function(a,u,q){function d(b,a){return g.coerce(f,
F,e,b,a)}for(var f=a.legend||{},c=0,k=!1,l="normal",m,t,A,y,w=0;w<q.length;w++){var x=q[w];if(x.visible){if(x.showlegend||x._dfltShowLegend)c++,x.showlegend&&(k=!0,(p.traceIs(x,"pie")||!0===x._input.showlegend)&&c++);if(p.traceIs(x,"bar")&&"stack"===u.barmode||-1!==["tonextx","tonexty"].indexOf(x.fill))l=b.isGrouped({traceorder:l})?"grouped+reversed":"reversed";void 0!==x.legendgroup&&""!==x.legendgroup&&(l=b.isReversed({traceorder:l})?"reversed+grouped":"grouped")}}q=g.coerce(a,u,n,"showlegend",
k&&1<c);if(!1!==q||f.uirevision){var F=h.newContainer(u,"legend");d("uirevision",u.uirevision);!1!==q&&(d("bgcolor",u.paper_bgcolor),d("bordercolor"),d("borderwidth"),g.coerceFont(d,"font",u.font),d("orientation"),"h"===F.orientation&&(a=a.xaxis,p.getComponentMethod("rangeslider","isVisible")(a)?(m=0,A="left",t=1.1,y="bottom"):(m=0,A="left",t=-.1,y="top")),d("traceorder",l),b.isGrouped(u.legend)&&d("tracegroupgap"),d("x",m),d("xanchor",A),d("y",t),d("yanchor",y),d("valign"),g.noneOrAll(f,F,["x","y"]))}}},
{"../../lib":700,"../../plot_api/plot_template":738,"../../plots/layout_attributes":801,"../../registry":829,"./attributes":626,"./helpers":632}],629:[function(a,t,m){function p(b,a,d,f,e){var g=d.data()[0][0].trace;e={event:e,node:d.node(),curveNumber:g.index,expandedIndex:g._expandedIndex,data:b.data,layout:b.layout,frames:b._transitionData._frames,config:b._context,fullData:b._fullData,fullLayout:b._fullLayout};g._group&&(e.group=g._group);"pie"===g.type&&(e.label=d.datum()[0].label);!1!==c.triggerHandler(b,
"plotly_legendclick",e)&&(1===f?a._clickTimeout=setTimeout(function(){A(d,b,f)},H):2===f&&(a._clickTimeout&&clearTimeout(a._clickTimeout),b._legendMouseDownTime=0,!1!==c.triggerHandler(b,"plotly_legenddoubleclick",e)&&A(d,b,f)))}function g(b,a,c){function d(c){z.convertToTspans(c,a,function(){var c=b.data()[0][0];if(c.trace.showlegend){var d=b.select("g[class*\x3dmath-group]"),f=d.node(),e=a._fullLayout.legend.font.size*x;if(f){var g=r.bBox(f);f=g.height;g=g.width;r.setTranslate(d,0,f/4)}else{d=b.select(".legendtext");
var k=z.lineCount(d);g=d.node();f=e*k;g=g?r.bBox(g).width:0;z.positionText(d,y.textOffsetX,e*(.3+(1-k)/2))}c.lineHeight=e;c.height=Math.max(f,16)+3;c.width=g}else b.remove()})}var e=b.data()[0][0],g=a._fullLayout,k=e.trace,l=f.traceIs(k,"pie"),n=k.index,u=a._context.edits.legendText&&!l;k=l?e.label:k.name;g.meta&&(k=q.templateString(k,{meta:g.meta}));l=q.ensureSingle(b,"text","legendtext");l.attr("text-anchor","start").classed("user-select-none",!0).call(r.font,g.legend.font).text(u?h(k,c):k);z.positionText(l,
y.textOffsetX,0);if(u)l.call(z.makeEditable,{gd:a,text:k}).call(d).on("edit",function(b){this.text(h(b,c)).call(d);var g=e.trace._fullInput||{},k={};f.hasTransform(g,"groupby")?(k=f.getTransformIndices(g,"groupby"),g=q.keyedContainer(g,"transforms["+k[k.length-1]+"].styles","target","value.name"),g.set(e.trace._group,b),k=g.constructUpdate()):k.name=b;return f.call("_guiRestyle",a,k,n)});else d(l)}function h(b,a){a=Math.max(4,a);if(b&&b.trim().length>=a/2)return b;b=b||"";for(a-=b.length;0<a;a--)b+=
" ";return b}function e(b,a){var c,d=1,f=q.ensureSingle(b,"rect","legendtoggle",function(b){b.style("cursor","pointer").attr("pointer-events","all").call(v.fill,"rgba(0,0,0,0)")});f.on("mousedown",function(){c=(new Date).getTime();c-a._legendMouseDownTime<H?d+=1:(d=1,a._legendMouseDownTime=c)});f.on("mouseup",function(){if(!a._dragged&&!a._editing){var c=a._fullLayout.legend;(new Date).getTime()-a._legendMouseDownTime>H&&(d=Math.max(d-1,1));p(a,c,b,d,u.event)}})}function n(b,a,c){var d=b._fullLayout,
f=d.legend,e=f.borderwidth,g=G.isGrouped(f),k=0;f._width=0;f._height=0;if(G.isVertical(f))g&&a.each(function(b,a){r.setTranslate(this,0,a*f.tracegroupgap)}),c.each(function(b){var a=b[0];b=a.height;a=a.width;r.setTranslate(this,e,5+e+f._height+b/2);f._height+=b;f._width=Math.max(f._width,a)}),f._width+=45+2*e,f._height+=10+2*e,g&&(f._height+=(f._lgroupsLength-1)*f.tracegroupgap),k=40;else if(g){var h=0;g=0;var l=a.data(),n;for(n=0;n<l.length;n++){var p=l[n],m=p.map(function(b){return b[0].width});
m=q.aggNums(Math.max,null,m);p=p.reduce(function(b,a){return b+a[0].height},0);g=Math.max(g,m);h=Math.max(h,p)}g=g+5+40;var v=[f._width],w=[];for(n=p=0;n<l.length;n++)d._size.w<e+f._width+5+g?(v[v.length-1]=v[0],f._width=g,p++):f._width+=g+e,m=p*h,m+=0<p?f.tracegroupgap:0,w.push(m),v.push(f._width);a.each(function(b,a){r.setTranslate(this,v[a],w[a])});a.each(function(){var b=0;u.select(this).selectAll("g.traces").each(function(a){a=a[0].height;r.setTranslate(this,0,5+e+b+a/2);b+=a})});f._height=10+
2*e+(w[w.length-1]+h);a=Math.max.apply(null,v);f._width=a+g+40;f._width+=2*e}else{var t=0,z=0,x=0,y=0,A=0;c.each(function(b){x=Math.max(40+b[0].width,x);A+=40+b[0].width+5});var E=d._size.w>e+A-5;c.each(function(b){var a=b[0];b=E?40+b[0].width:x;e+y+5+b>d._size.w&&(y=0,t+=z,f._height+=z,z=0);r.setTranslate(this,e+y,5+e+a.height/2+t);f._width+=5+b;y+=5+b;z=Math.max(a.height,z)});f._height=E?z:f._height+z;f._width+=2*e;f._height+=10+2*e}f._width=Math.ceil(f._width);f._height=Math.ceil(f._height);var B=
b._context.edits.legendText||b._context.edits.legendPosition;c.each(function(b){b=b[0];var a=u.select(this).select(".legendtoggle");r.setRect(a,0,-b.height/2,(B?0:f._width)+k,b.height)})}function b(b){var a=b._fullLayout.legend,c="left";q.isRightAnchor(a)?c="right":q.isCenterAnchor(a)&&(c="center");var f="top";q.isBottomAnchor(a)?f="bottom":q.isMiddleAnchor(a)&&(f="middle");d.autoMargin(b,"legend",{x:a.x,y:a.y,l:a._width*F[c],r:a._width*B[c],b:a._height*B[f],t:a._height*F[f]})}function l(b){var a=
b._fullLayout.legend,c="left";q.isRightAnchor(a)?c="right":q.isCenterAnchor(a)&&(c="center");d.autoMargin(b,"legend",{x:a.x,y:.5,l:a._width*F[c],r:a._width*B[c],b:0,t:0})}var u=a("d3"),q=a("../../lib"),d=a("../../plots/plots"),f=a("../../registry"),c=a("../../lib/events"),k=a("../dragelement"),r=a("../drawing"),v=a("../color"),z=a("../../lib/svg_text_utils"),A=a("./handle_click"),y=a("./constants");m=a("../../constants/interactions");var w=a("../../constants/alignment"),x=w.LINE_SPACING,F=w.FROM_TL,
B=w.FROM_BR,C=a("./get_legend_data"),D=a("./style"),G=a("./helpers"),H=m.DBLCLICKDELAY;t.exports=function(a){var c=a._fullLayout,h="legend"+c._uid;if(c._infolayer&&a.calcdata){a._legendMouseDownTime||(a._legendMouseDownTime=0);var m=c.legend,w=c.showlegend&&C(a.calcdata,m),t=c.hiddenlabels||[];if(c.showlegend&&w.length){for(var z=0,x=0;x<w.length;x++)for(var A=0;A<w[x].length;A++){var E=w[x][A][0],B=E.trace;E=f.traceIs(B,"pie")?E.label:B.name;z=Math.max(z,E&&E.length||0)}var G=!1,F=q.ensureSingle(c._infolayer,
"g","legend",function(b){b.attr("pointer-events","all");G=!0}),H=q.ensureSingleById(c._topdefs,"clipPath",h,function(b){b.append("rect")}),ca=q.ensureSingle(F,"rect","bg",function(b){b.attr("shape-rendering","crispEdges")});ca.call(v.stroke,m.bordercolor).call(v.fill,m.bgcolor).style("stroke-width",m.borderwidth+"px");var Y=q.ensureSingle(F,"g","scrollbox"),W=q.ensureSingle(F,"rect","scrollbar",function(b){b.attr({rx:20,ry:3,width:0,height:0}).call(v.fill,"#808BA4")}),ea=Y.selectAll("g.groups").data(w);
ea.enter().append("g").attr("class","groups");ea.exit().remove();var U=ea.selectAll("g.traces").data(q.identity);U.enter().append("g").attr("class","traces");U.exit().remove();U.style("opacity",function(b){var a=b[0].trace;return f.traceIs(a,"pie")?-1!==t.indexOf(b[0].label)?.5:1:"legendonly"===a.visible?.5:1}).each(function(){u.select(this).call(g,a,z)}).call(D,a).each(function(){u.select(this).call(e,a)});q.syncOrAsync([d.previousPromises,function(){function d(b,c,d){m._scrollY=a._fullLayout.legend._scrollY=
b;r.setTranslate(Y,0,-b);r.setRect(W,z,y.scrollBarMargin+b*d,y.scrollBarWidth,c);H.select("rect").attr({y:m.borderwidth+b})}G&&(n(a,ea,U),b(a));var e=c.width,g=c.height;n(a,ea,U);m._height>g?l(a):b(a);var v=c._size,w=v.l+v.w*m.x,t=v.t+v.h*(1-m.y);q.isRightAnchor(m)?w-=m._width:q.isCenterAnchor(m)&&(w-=m._width/2);q.isBottomAnchor(m)?t-=m._height:q.isMiddleAnchor(m)&&(t-=m._height/2);var z=m._width,x=v.w;z>x?(w=v.l,z=x):(w+z>e&&(w=e-z),0>w&&(w=0),z=Math.min(e-w,m._width));e=m._height;x=v.h;e>x?(t=
v.t,e=x):(t+e>g&&(t=g-e),0>t&&(t=0),e=Math.min(g-t,m._height));r.setTranslate(F,w,t);W.on(".drag",null);F.on("wheel",null);if(m._height<=e||a._context.staticPlot)ca.attr({width:z-m.borderwidth,height:e-m.borderwidth,x:m.borderwidth/2,y:m.borderwidth/2}),r.setTranslate(Y,0,0),H.select("rect").attr({width:z-2*m.borderwidth,height:e-2*m.borderwidth,x:m.borderwidth,y:m.borderwidth}),r.setClipUrl(Y,h,a),r.setRect(W,0,0,0,0),delete m._scrollY;else{var A=Math.max(y.scrollBarMinHeight,e*e/m._height),E=e-
A-2*y.scrollBarMargin,B=m._height-e,I=E/B,J=Math.min(m._scrollY||0,B);ca.attr({width:z-2*m.borderwidth+y.scrollBarWidth+y.scrollBarMargin,height:e-m.borderwidth,x:m.borderwidth/2,y:m.borderwidth/2});H.select("rect").attr({width:z-2*m.borderwidth+y.scrollBarWidth+y.scrollBarMargin,height:e-2*m.borderwidth,x:m.borderwidth,y:m.borderwidth+J});r.setClipUrl(Y,h,a);d(J,A,I);F.on("wheel",function(){J=q.constrain(m._scrollY+u.event.deltaY/E*B,0,B);d(J,A,I);0!==J&&J!==B&&u.event.preventDefault()});var D,C;
g=u.behavior.drag().on("dragstart",function(){D=u.event.sourceEvent.clientY;C=J}).on("drag",function(){var b=u.event.sourceEvent;2===b.buttons||b.ctrlKey||(J=q.constrain((b.clientY-D)/I+C,0,B),d(J,A,I))});W.call(g)}if(a._context.edits.legendPosition){var K,L,M,O;F.classed("cursor-move",!0);k.init({element:F.node(),gd:a,prepFn:function(){var b=r.getTranslate(F);M=b.x;O=b.y},moveFn:function(b,a){b=M+b;a=O+a;r.setTranslate(F,b,a);K=k.align(b,0,v.l,v.l+v.w,m.xanchor);L=k.align(a,0,v.t+v.h,v.t,m.yanchor)},
doneFn:function(){void 0!==K&&void 0!==L&&f.call("_guiRelayout",a,{"legend.x":K,"legend.y":L})},clickFn:function(b,d){var f=c._infolayer.selectAll("g.traces").filter(function(){var b=this.getBoundingClientRect();return d.clientX>=b.left&&d.clientX<=b.right&&d.clientY>=b.top&&d.clientY<=b.bottom});0<f.size()&&p(a,F,f,b,d)}})}}],a)}else c._infolayer.selectAll(".legend").remove(),c._topdefs.select("#"+h).remove(),d.autoMargin(a,"legend")}}},{"../../constants/alignment":672,"../../constants/interactions":676,
"../../lib":700,"../../lib/events":689,"../../lib/svg_text_utils":724,"../../plots/plots":810,"../../registry":829,"../color":577,"../dragelement":595,"../drawing":598,"./constants":627,"./get_legend_data":630,"./handle_click":631,"./helpers":632,"./style":634,d3:154}],630:[function(a,t,m){var p=a("../../registry"),g=a("./helpers");t.exports=function(a,e){function h(a,c){""!==a&&g.isGrouped(e)?-1===l.indexOf(a)?(l.push(a),u=!0,b[a]=[[c]]):b[a].push([c]):(a="~~i"+d,l.push(a),b[a]=[[c]],d++)}var b=
{},l=[],u=!1,q={},d=0,f;for(f=0;f<a.length;f++){var c=a[f];var k=c[0];var r=k.trace,m=r.legendgroup;if(r.visible&&r.showlegend)if(p.traceIs(r,"pie"))for(q[m]||(q[m]={}),k=0;k<c.length;k++){var t=c[k].label;q[m][t]||(h(m,{label:t,color:c[k].color,i:c[k].i,trace:r,pts:c[k].pts}),q[m][t]=!0)}else h(m,k)}if(!l.length)return[];a=l.length;if(u&&g.isGrouped(e))for(c=Array(a),f=0;f<a;f++)q=b[l[f]],c[f]=g.isReversed(e)?q.reverse():q;else{c=[Array(a)];for(f=0;f<a;f++)q=b[l[f]][0],c[0][g.isReversed(e)?a-f-1:
f]=q;a=1}e._lgroupsLength=a;return c}},{"../../registry":829,"./helpers":632}],631:[function(a,t,m){var p=a("../../lib"),g=a("../../registry"),h=!0;t.exports=function(a,n,b){function e(b,a,c){var d=r.indexOf(b),f=k[a];f||(f=k[a]=[]);-1===r.indexOf(b)&&(r.push(b),d=r.length-1);f[d]=c;return d}function u(b,a){var c=b._fullInput;if(g.hasTransform(c,"groupby")){var d=m[c.index];d||(d=g.getTransformIndices(c,"groupby"),d=p.keyedContainer(c,"transforms["+d[d.length-1]+"].styles","target","value.visible"),
m[c.index]=d);var f=d.get(b._group);void 0===f&&(f=!0);!1!==f&&d.set(b._group,a);t[c.index]=e(c.index,"visible",!1===c.visible?!1:!0)}else e(c.index,"visible",!1===c.visible?!1:a)}if(!n._dragged&&!n._editing){var q=n._fullLayout.hiddenlabels?n._fullLayout.hiddenlabels.slice():[];a=a.data()[0][0];var d=n._fullData,f=a.trace,c=f.legendgroup,k={},r=[],m=[],t=[];1===b&&h&&n.data&&n._context.showTips&&p.notifier(p._(n,"Double-click on legend to isolate one trace"),"long");h=!1;if(g.traceIs(f,"pie")){var A=
a.label;a=q.indexOf(A);1===b?-1===a?q.push(A):q.splice(a,1):2===b&&(q=[],n.calcdata[0].forEach(function(b){A!==b.label&&q.push(b.label)}),n._fullLayout.hiddenlabels&&n._fullLayout.hiddenlabels.length===q.length&&-1===a&&(q=[]));g.call("_guiRelayout",n,"hiddenlabels",q)}else{var y=c&&c.length,w=[];if(y)for(a=0;a<d.length;a++){var x=d[a];x.visible&&x.legendgroup===c&&w.push(a)}if(1===b){switch(f.visible){case !0:var F="legendonly";break;case !1:F=!1;break;case "legendonly":F=!0}if(y)for(a=0;a<d.length;a++)!1!==
d[a].visible&&d[a].legendgroup===c&&u(d[a],F);else u(f,F)}else if(2===b){F=!0;for(a=0;a<d.length;a++)if(w=d[a]===f,!w&&(w=y&&d[a].legendgroup===c,!w&&!0===d[a].visible&&!g.traceIs(d[a],"notLegendIsolatable"))){F=!1;break}for(a=0;a<d.length;a++)if(!1!==d[a].visible&&!g.traceIs(d[a],"notLegendIsolatable"))switch(f.visible){case "legendonly":u(d[a],!0);break;case !0:b=F?!0:"legendonly",w=(w=d[a]===f)||y&&d[a].legendgroup===c,u(d[a],w?!0:b)}}for(a=0;a<m.length;a++)if(d=m[a])for(y=d.constructUpdate(),
b=Object.keys(y),d=0;d<b.length;d++)f=b[d],c=k[f]=k[f]||[],c[t[a]]=y[f];c=Object.keys(k);for(a=0;a<c.length;a++)for(f=c[a],d=0;d<r.length;d++)k[f].hasOwnProperty(d)||(k[f][d]=void 0);g.call("_guiRestyle",n,k,r)}}}},{"../../lib":700,"../../registry":829}],632:[function(a,t,m){m.isGrouped=function(a){return-1!==(a.traceorder||"").indexOf("grouped")};m.isVertical=function(a){return"h"!==a.orientation};m.isReversed=function(a){return-1!==(a.traceorder||"").indexOf("reversed")}},{}],633:[function(a,t,
m){t.exports={moduleType:"component",name:"legend",layoutAttributes:a("./attributes"),supplyLayoutDefaults:a("./defaults"),draw:a("./draw"),style:a("./style")}},{"./attributes":626,"./defaults":628,"./draw":629,"./style":634}],634:[function(a,t,m){var p=a("d3"),g=a("../../registry"),h=a("../../lib"),e=a("../drawing"),n=a("../color"),b=a("../../traces/scatter/subtypes"),l=a("../../traces/pie/style_one");t.exports=function(a,q){a.each(function(b){var a=p.select(this);a=h.ensureSingle(a,"g","layers");
a.style("opacity",b[0].trace.opacity);var c=q._fullLayout.legend.valign,d=b[0].lineHeight,e=b[0].height;"middle"!==c&&d&&e?a.attr("transform","translate(0,"+.5*{top:1,bottom:-1}[c]*(d-e+3)+")"):a.attr("transform",null);a.selectAll("g.legendfill").data([b]).enter().append("g").classed("legendfill",!0);a.selectAll("g.legendlines").data([b]).enter().append("g").classed("legendlines",!0);a=a.selectAll("g.legendsymbols").data([b]);a.enter().append("g").classed("legendsymbols",!0);a.selectAll("g.legendpoints").data([b]).enter().append("g").classed("legendpoints",
!0)}).each(function(b){var a=b[0].trace,c=[];"waterfall"===a.type&&a.visible&&(c=b[0].hasTotals?[["increasing","M-6,-6V6H0Z"],["totals","M6,6H0L-6,-6H-0Z"],["decreasing","M6,6V-6H0Z"]]:[["increasing","M-6,-6V6H6Z"],["decreasing","M6,6V-6H-6Z"]]);b=p.select(this).select("g.legendpoints").selectAll("path.legendwaterfall").data(c);b.enter().append("path").classed("legendwaterfall",!0).attr("transform","translate(20,0)").style("stroke-miterlimit",1);b.exit().remove();b.each(function(b){var c=p.select(this),
d=a[b[0]].marker;c.attr("d",b[1]).style("stroke-width",d.line.width+"px").call(n.fill,d.color);d.line.width&&c.call(n.stroke,d.line.color)})}).each(function(b){var a=b[0].trace,c=a.marker||{},d=c.line||{};b=p.select(this).select("g.legendpoints").selectAll("path.legendbar").data(g.traceIs(a,"bar")?[b]:[]);b.enter().append("path").classed("legendbar",!0).attr("d","M6,6H-6V-6H6Z").attr("transform","translate(20,0)");b.exit().remove();b.each(function(b){var a=p.select(this);b=b[0];var f=(b.mlw+1||d.width+
1)-1;a.style("stroke-width",f+"px").call(n.fill,b.mc||c.color);f&&a.call(n.stroke,b.mlc||d.color)})}).each(function(b){var a=b[0].trace;b=p.select(this).select("g.legendpoints").selectAll("path.legendbox").data(g.traceIs(a,"box-violin")&&a.visible?[b]:[]);b.enter().append("path").classed("legendbox",!0).attr("d","M6,6H-6V-6H6Z").attr("transform","translate(20,0)");b.exit().remove();b.each(function(){var b=a.line.width,d=p.select(this);d.style("stroke-width",b+"px").call(n.fill,a.fillcolor);b&&n.stroke(d,
a.line.color)})}).each(function(b){var a=b[0].trace,c=p.select(this).select("g.legendpoints").selectAll("path.legendpie").data(g.traceIs(a,"pie")&&a.visible?[b]:[]);c.enter().append("path").classed("legendpie",!0).attr("d","M6,6H-6V-6H6Z").attr("transform","translate(20,0)");c.exit().remove();c.size()&&c.call(l,b[0],a)}).each(function(a){function d(b){b.size()&&e.gradient(b,q,"legendfill-"+g.uid,"horizontalreversed",g.colorscale,"fill")}function c(b){if(b.size()){var a="legendline-"+g.uid;e.lineGroupStyle(b);
e.gradient(b,q,a,"horizontalreversed",g.colorscale,"stroke")}}var g=a[0].trace,h=g.visible&&g.fill&&"none"!==g.fill,l=b.hasLines(g),n=g.contours,u=!1,m=!1;if(n){var w=n.coloring;"lines"===w?u=!0:l="none"===w||"heatmap"===w||n.showlines;if("constraint"===n.type)h="\x3d"!==n._operation;else if("fill"===w||"heatmap"===w)m=!0}n=b.hasMarkers(g)||b.hasText(g)||!h&&!m?"M5,0":l||u?"M5,-2":"M5,-3";w=p.select(this);m=w.select(".legendfill").selectAll("path").data(h||m?[a]:[]);m.enter().append("path").classed("js-fill",
!0);m.exit().remove();m.attr("d",n+"h30v6h-30z").call(h?e.fillGroupStyle:d);a=w.select(".legendlines").selectAll("path").data(l||u?[a]:[]);a.enter().append("path").classed("js-line",!0);a.exit().remove();a.attr("d",n+(u?"l30,0.0001":"h30")).call(l?e.lineGroupStyle:c)}).each(function(a){function d(b,a,c){b=h.nestedProperty(l,b).get();a=h.isArrayOrTypedArray(b)&&a?a(b):b;if(c){if(a<c[0])return c[0];if(a>c[1])return c[1]}return a}function c(b){return b[0]}var g=a[0],l=g.trace;a=b.hasMarkers(l);var n=
b.hasText(l),u=b.hasLines(l);if(a||n||u){var m={};var t={};if(a){m.mc=d("marker.color",c);m.mx=d("marker.symbol",c);m.mo=d("marker.opacity",h.mean,[.2,1]);m.mlc=d("marker.line.color",c);m.mlw=d("marker.line.width",h.mean,[0,5]);t.marker={sizeref:1,sizemin:1,sizemode:"diameter"};var w=d("marker.size",h.mean,[2,16]);m.ms=w;t.marker.size=w}u&&(t.line={width:d("line.width",c,[0,10])});n&&(m.tx="Aa",m.tp=d("textposition",c),m.ts=10,m.tc=d("textfont.color",c),m.tf=d("textfont.family",c));m=[h.minExtend(g,
m)];t=h.minExtend(l,t);t.selectedpoints=null}g=p.select(this).select("g.legendpoints");u=g.selectAll("path.scatterpts").data(a?m:[]);u.enter().insert("path",":first-child").classed("scatterpts",!0).attr("transform","translate(20,0)");u.exit().remove();u.call(e.pointStyle,t,q);a&&(m[0].mrc=3);a=g.selectAll("g.pointtext").data(n?m:[]);a.enter().append("g").classed("pointtext",!0).append("text").attr("transform","translate(20,0)");a.exit().remove();a.selectAll("text").call(e.textPointStyle,t,q)}).each(function(b){var a=
b[0].trace;b=p.select(this).select("g.legendpoints").selectAll("path.legendcandle").data("candlestick"===a.type&&a.visible?[b,b]:[]);b.enter().append("path").classed("legendcandle",!0).attr("d",function(b,a){return a?"M-15,0H-8M-8,6V-6H8Z":"M15,0H8M8,-6V6H-8Z"}).attr("transform","translate(20,0)").style("stroke-miterlimit",1);b.exit().remove();b.each(function(b,d){b=a[d?"increasing":"decreasing"];d=b.line.width;var c=p.select(this);c.style("stroke-width",d+"px").call(n.fill,b.fillcolor);d&&n.stroke(c,
b.line.color)})}).each(function(b){var a=b[0].trace;b=p.select(this).select("g.legendpoints").selectAll("path.legendohlc").data("ohlc"===a.type&&a.visible?[b,b]:[]);b.enter().append("path").classed("legendohlc",!0).attr("d",function(b,a){return a?"M-15,0H0M-8,-6V0":"M15,0H0M8,6V0"}).attr("transform","translate(20,0)").style("stroke-miterlimit",1);b.exit().remove();b.each(function(b,d){b=a[d?"increasing":"decreasing"];d=b.line.width;var c=p.select(this);c.style("fill","none").call(e.dashLine,b.line.dash,
d);d&&n.stroke(c,b.line.color)})})}},{"../../lib":700,"../../registry":829,"../../traces/pie/style_one":1037,"../../traces/scatter/subtypes":1075,"../color":577,"../drawing":598,d3:154}],635:[function(a,t,m){function p(b,a){var c=a.currentTarget,d=c.getAttribute("data-attr");a=c.getAttribute("data-val")||!0;var e=b._fullLayout,g={},k=f.list(b,null,!0),h="on",l;if("zoom"===d){c="in"===a?.5:2;d=(1+c)/2;var r=(1-c)/2;for(l=0;l<k.length;l++)if(c=k[l],!c.fixedrange){var n=c._name;if("auto"===a)g[n+".autorange"]=
!0;else if("reset"===a){if(void 0===c._rangeInitial)g[n+".autorange"]=!0;else{var u=c._rangeInitial.slice();g[n+".range[0]"]=u[0];g[n+".range[1]"]=u[1]}void 0!==c._showSpikeInitial&&(g[n+".showspikes"]=c._showSpikeInitial,"on"!==h||c._showSpikeInitial||(h="off"))}else u=[c.r2l(c.range[0]),c.r2l(c.range[1])],u=[d*u[0]+r*u[1],d*u[1]+r*u[0]],g[n+".range[0]"]=c.l2r(u[0]),g[n+".range[1]"]=c.l2r(u[1])}e._cartesianSpikesEnabled=h}else{if("hovermode"===d&&("x"===a||"y"===a))a=e._isHoriz?"y":"x",c.setAttribute("data-val",
a);else if("hovermode"===d&&"closest"===a){for(l=0;l<k.length;l++)c=k[l],"on"!==h||c.showspikes||(h="off");e._cartesianSpikesEnabled=h}g[d]=a}q.call("_guiRelayout",b,g)}function g(b,a){a=a.currentTarget;var c=a.getAttribute("data-attr");a=a.getAttribute("data-val")||!0;var d=b._fullLayout._subplots.gl3d,f={};c=c.split(".");for(var e=0;e<d.length;e++)f[d[e]+"."+c[1]]=a;f.dragmode="pan"===a?a:"zoom";q.call("_guiRelayout",b,f)}function h(b,a){a=a.currentTarget.getAttribute("data-attr");for(var c=b._fullLayout,
d=c._subplots.gl3d,f={},e=0;e<d.length;e++){var g=d[e],k=g+".camera";g=c[g]._scene;"resetLastSave"===a?(f[k+".up"]=g.viewInitial.up,f[k+".eye"]=g.viewInitial.eye,f[k+".center"]=g.viewInitial.center):"resetDefault"===a&&(f[k+".up"]=null,f[k+".eye"]=null,f[k+".center"]=null)}q.call("_guiRelayout",b,f)}function e(b,a){a=a.currentTarget;var c=a._previousVal;b=b._fullLayout;var d=b._subplots.gl3d,f=["xaxis","yaxis","zaxis"],e={},g={};if(c)g=c,a._previousVal=null;else{for(c=0;c<d.length;c++){var k=d[c],
h=b[k],l=k+".hovermode";e[l]=h.hovermode;g[l]=!1;for(l=0;3>l;l++){var r=f[l],n=k+"."+r+".showspikes";g[n]=!1;e[n]=h[r].showspikes}}a._previousVal=e}return g}function n(b,a){var c=a.currentTarget;a=c.getAttribute("data-attr");c=c.getAttribute("data-val")||!0;for(var d=b._fullLayout,f=d._subplots.geo,e=0;e<f.length;e++){var g=f[e],k=d[g];"zoom"===a?(k=k.projection.scale,q.call("_guiRelayout",b,g+".projection.scale","in"===c?2*k:.5*k)):"reset"===a&&u(b,"geo")}}function b(b){b=b._fullLayout;return b.hovermode?
!1:b._has("cartesian")?b._isHoriz?"y":"x":"closest"}function l(a){var c=b(a);q.call("_guiRelayout",a,"hovermode",c)}function u(b,a){var c=b._fullLayout;a=c._subplots[a];for(var d={},f=0;f<a.length;f++)for(var e=a[f],g=c[e]._subplot.viewInitial,k=Object.keys(g),h=0;h<k.length;h++){var l=k[h];d[e+"."+l]=g[l]}q.call("_guiRelayout",b,d)}var q=a("../../registry"),d=a("../../plots/plots"),f=a("../../plots/cartesian/axis_ids"),c=a("../../lib");a=a("../../../build/ploticon");var k=c._;t=t.exports={};t.toImage=
{name:"toImage",title:function(b){return"png"===((b._context.toImageButtonOptions||{}).format||"png")?k(b,"Download plot as a png"):k(b,"Download plot")},icon:a.camera,click:function(b){var a=b._context.toImageButtonOptions,d={format:a.format||"png"};c.notifier(k(b,"Taking snapshot - this may take a few seconds"),"long");"svg"!==d.format&&c.isIE()&&(c.notifier(k(b,"IE only supports svg.  Changing format to svg."),"long"),d.format="svg");["filename","width","height","scale"].forEach(function(b){a[b]&&
(d[b]=a[b])});q.call("downloadImage",b,d).then(function(a){c.notifier(k(b,"Snapshot succeeded")+" - "+a,"long")}).catch(function(){c.notifier(k(b,"Sorry, there was a problem downloading your snapshot!"),"long")})}};t.sendDataToCloud={name:"sendDataToCloud",title:function(b){return k(b,"Edit in Chart Studio")},icon:a.disk,click:function(b){d.sendDataToCloud(b)}};t.zoom2d={name:"zoom2d",title:function(b){return k(b,"Zoom")},attr:"dragmode",val:"zoom",icon:a.zoombox,click:p};t.pan2d={name:"pan2d",title:function(b){return k(b,
"Pan")},attr:"dragmode",val:"pan",icon:a.pan,click:p};t.select2d={name:"select2d",title:function(b){return k(b,"Box Select")},attr:"dragmode",val:"select",icon:a.selectbox,click:p};t.lasso2d={name:"lasso2d",title:function(b){return k(b,"Lasso Select")},attr:"dragmode",val:"lasso",icon:a.lasso,click:p};t.zoomIn2d={name:"zoomIn2d",title:function(b){return k(b,"Zoom in")},attr:"zoom",val:"in",icon:a.zoom_plus,click:p};t.zoomOut2d={name:"zoomOut2d",title:function(b){return k(b,"Zoom out")},attr:"zoom",
val:"out",icon:a.zoom_minus,click:p};t.autoScale2d={name:"autoScale2d",title:function(b){return k(b,"Autoscale")},attr:"zoom",val:"auto",icon:a.autoscale,click:p};t.resetScale2d={name:"resetScale2d",title:function(b){return k(b,"Reset axes")},attr:"zoom",val:"reset",icon:a.home,click:p};t.hoverClosestCartesian={name:"hoverClosestCartesian",title:function(b){return k(b,"Show closest data on hover")},attr:"hovermode",val:"closest",icon:a.tooltip_basic,gravity:"ne",click:p};t.hoverCompareCartesian={name:"hoverCompareCartesian",
title:function(b){return k(b,"Compare data on hover")},attr:"hovermode",val:function(b){return b._fullLayout._isHoriz?"y":"x"},icon:a.tooltip_compare,gravity:"ne",click:p};t.zoom3d={name:"zoom3d",title:function(b){return k(b,"Zoom")},attr:"scene.dragmode",val:"zoom",icon:a.zoombox,click:g};t.pan3d={name:"pan3d",title:function(b){return k(b,"Pan")},attr:"scene.dragmode",val:"pan",icon:a.pan,click:g};t.orbitRotation={name:"orbitRotation",title:function(b){return k(b,"Orbital rotation")},attr:"scene.dragmode",
val:"orbit",icon:a["3d_rotate"],click:g};t.tableRotation={name:"tableRotation",title:function(b){return k(b,"Turntable rotation")},attr:"scene.dragmode",val:"turntable",icon:a["z-axis"],click:g};t.resetCameraDefault3d={name:"resetCameraDefault3d",title:function(b){return k(b,"Reset camera to default")},attr:"resetDefault",icon:a.home,click:h};t.resetCameraLastSave3d={name:"resetCameraLastSave3d",title:function(b){return k(b,"Reset camera to last save")},attr:"resetLastSave",icon:a.movie,click:h};
t.hoverClosest3d={name:"hoverClosest3d",title:function(b){return k(b,"Toggle show closest data on hover")},attr:"hovermode",val:null,toggle:!0,icon:a.tooltip_basic,gravity:"ne",click:function(b,a){a=e(b,a);q.call("_guiRelayout",b,a)}};t.zoomInGeo={name:"zoomInGeo",title:function(b){return k(b,"Zoom in")},attr:"zoom",val:"in",icon:a.zoom_plus,click:n};t.zoomOutGeo={name:"zoomOutGeo",title:function(b){return k(b,"Zoom out")},attr:"zoom",val:"out",icon:a.zoom_minus,click:n};t.resetGeo={name:"resetGeo",
title:function(b){return k(b,"Reset")},attr:"reset",val:null,icon:a.autoscale,click:n};t.hoverClosestGeo={name:"hoverClosestGeo",title:function(b){return k(b,"Toggle show closest data on hover")},attr:"hovermode",val:null,toggle:!0,icon:a.tooltip_basic,gravity:"ne",click:l};t.hoverClosestGl2d={name:"hoverClosestGl2d",title:function(b){return k(b,"Toggle show closest data on hover")},attr:"hovermode",val:null,toggle:!0,icon:a.tooltip_basic,gravity:"ne",click:l};t.hoverClosestPie={name:"hoverClosestPie",
title:function(b){return k(b,"Toggle show closest data on hover")},attr:"hovermode",val:"closest",icon:a.tooltip_basic,gravity:"ne",click:l};t.toggleHover={name:"toggleHover",title:function(b){return k(b,"Toggle show closest data on hover")},attr:"hovermode",val:null,toggle:!0,icon:a.tooltip_basic,gravity:"ne",click:function(a,c){c=e(a,c);c.hovermode=b(a);q.call("_guiRelayout",a,c)}};t.resetViews={name:"resetViews",title:function(b){return k(b,"Reset views")},icon:a.home,click:function(b,a){var c=
a.currentTarget;c.setAttribute("data-attr","zoom");c.setAttribute("data-val","reset");p(b,a);c.setAttribute("data-attr","resetLastSave");h(b,a);u(b,"geo");u(b,"mapbox")}};t.toggleSpikelines={name:"toggleSpikelines",title:function(b){return k(b,"Toggle Spike Lines")},icon:a.spikeline,attr:"_cartesianSpikesEnabled",val:"on",click:function(b){var a=b._fullLayout;a._cartesianSpikesEnabled="on"===a._cartesianSpikesEnabled?"off":"on";a=b._fullLayout;for(var c=f.list(b,null,!0),d={},e,g,k=0;k<c.length;k++)e=
c[k],g=e._name,d[g+".showspikes"]="on"===a._cartesianSpikesEnabled?!0:e._showSpikeInitial;q.call("_guiRelayout",b,d)}};t.resetViewMapbox={name:"resetViewMapbox",title:function(b){return k(b,"Reset view")},attr:"reset",icon:a.home,click:function(b){u(b,"mapbox")}}},{"../../../build/ploticon":2,"../../lib":700,"../../plots/cartesian/axis_ids":751,"../../plots/plots":810,"../../registry":829}],636:[function(a,t,m){m.manage=a("./manage")},{"./manage":637}],637:[function(a,t,m){function p(b,a,c,k){function d(b){if(b.length){for(var c=
[],d=0;d<b.length;d++){var f=b[d];-1===a.indexOf(f)&&c.push(q[f])}D.push(c)}}var f=b._fullLayout;b=b._fullData;var l=f._has("cartesian"),n=f._has("gl3d"),u=f._has("geo"),p=f._has("pie"),m=f._has("gl2d"),t=f._has("ternary"),B=f._has("mapbox"),C=f._has("polar");f=g(f);var D=[],G=["toImage"];k&&G.push("sendDataToCloud");d(G);k=[];G=[];var H=[],E=[];1<(l||m||p||t)+u+n+B+C?(G=["toggleHover"],H=["resetViews"]):u?(k=["zoomInGeo","zoomOutGeo"],G=["hoverClosestGeo"],H=["resetGeo"]):n?(G=["hoverClosest3d"],
H=["resetCameraDefault3d","resetCameraLastSave3d"]):B?(G=["toggleHover"],H=["resetViewMapbox"]):G=m?["hoverClosestGl2d"]:p?["hoverClosestPie"]:["toggleHover"];l&&(G=["toggleSpikelines","hoverClosestCartesian","hoverCompareCartesian"]);!l&&!m||f||(k=["zoomIn2d","zoomOut2d","autoScale2d"],"resetViews"!==H[0]&&(H=["resetScale2d"]));n?E=["zoom3d","pan3d","orbitRotation","tableRotation"]:(l||m)&&!f||t?E=["zoom2d","pan2d"]:B||u?E=["pan2d"]:C&&(E=["zoom2d"]);h(b)&&E.push("select2d","lasso2d");d(E);d(k.concat(H));
d(G);return e(D,c)}function g(b){b=n.list({_fullLayout:b},null,!0);for(var a=0;a<b.length;a++)if(!b[a].fixedrange)return!1;return!0}function h(a){for(var d=!1,c=0;c<a.length&&!d;c++){var e=a[c];if(e._module&&e._module.selectPoints)if(l.traceIs(e,"scatter-like")){if(b.hasMarkers(e)||b.hasText(e))d=!0}else if(l.traceIs(e,"box-violin")){if("all"===e.boxpoints||"all"===e.points)d=!0}else d=!0}return d}function e(b,a){if(a.length)if(Array.isArray(a[0]))for(var c=0;c<a.length;c++)b.push(a[c]);else b.push(a);
return b}var n=a("../../plots/cartesian/axis_ids"),b=a("../../traces/scatter/subtypes"),l=a("../../registry"),u=a("./modebar"),q=a("./buttons");t.exports=function(b){var a=b._fullLayout,c=b._context,d=a._modeBar;if(c.displayModeBar||c.watermark){if(!Array.isArray(c.modeBarButtonsToRemove))throw Error("*modeBarButtonsToRemove* configuration options must be an array.");if(!Array.isArray(c.modeBarButtonsToAdd))throw Error("*modeBarButtonsToAdd* configuration options must be an array.");var e=c.modeBarButtons;
if(Array.isArray(e)&&e.length)for(c=0;c<e.length;c++)for(var g=e[c],h=0;h<g.length;h++){var l=g[h];if("string"===typeof l)if(void 0!==q[l])e[c][h]=q[l];else throw Error("*modeBarButtons* configuration options invalid button name");}else e=!c.displayModeBar&&c.watermark?[]:p(b,c.modeBarButtonsToRemove,c.modeBarButtonsToAdd,c.showSendToCloud);d?d.update(b,e):a._modeBar=u(b,e)}else d&&(d.destroy(),delete a._modeBar)}},{"../../plots/cartesian/axis_ids":751,"../../registry":829,"../../traces/scatter/subtypes":1075,
"./buttons":635,"./modebar":638}],638:[function(a,t,m){function p(b){this.container=b.container;this.element=document.createElement("div");this.update(b.graphInfo,b.buttons);this.container.appendChild(this.element)}var g=a("d3"),h=a("fast-isnumeric"),e=a("../../lib"),n=a("../../../build/ploticon"),b=new DOMParser;a=p.prototype;a.update=function(b,a){this.graphInfo=b;b=this.graphInfo._context;var g=this.graphInfo._fullLayout,d="modebar-"+g._uid;this.element.setAttribute("id",d);this._uid=d;this.element.className=
"modebar";"hover"===b.displayModeBar&&(this.element.className+=" modebar--hover ease-bg");"v"===g.modebar.orientation&&(this.element.className+=" vertical",a=a.reverse());var f=g.modebar,c="hover"===b.displayModeBar?".js-plotly-plot .plotly:hover ":"";e.deleteRelatedStyleRule(d);e.addRelatedStyleRule(d,c+"#"+d+" .modebar-group","background-color: "+f.bgcolor);e.addRelatedStyleRule(d,"#"+d+" .modebar-btn .icon path","fill: "+f.color);e.addRelatedStyleRule(d,"#"+d+" .modebar-btn:hover .icon path","fill: "+
f.activecolor);e.addRelatedStyleRule(d,"#"+d+" .modebar-btn.active .icon path","fill: "+f.activecolor);d=!this.hasButtons(a);f=this.hasLogo!==b.displaylogo;c=this.locale!==b.locale;this.locale=b.locale;if(d||f||c)if(this.removeAllButtons(),this.updateButtons(a),b.watermark||b.displaylogo)a=this.getLogo(),b.watermark&&(a.className+=" watermark"),"v"===g.modebar.orientation?this.element.insertBefore(a,this.element.childNodes[0]):this.element.appendChild(a),this.hasLogo=!0;this.updateActiveButton()};
a.updateButtons=function(b){var a=this;this.buttons=b;this.buttonElements=[];this.buttonsNames=[];this.buttons.forEach(function(b){var d=a.createGroup();b.forEach(function(b){var c=b.name;if(!c)throw Error("must provide button 'name' in button config");if(-1!==a.buttonsNames.indexOf(c))throw Error("button name '"+c+"' is taken");a.buttonsNames.push(c);b=a.createButton(b);a.buttonElements.push(b);d.appendChild(b)});a.element.appendChild(d)})};a.createGroup=function(){var b=document.createElement("div");
b.className="modebar-group";return b};a.createButton=function(b){var a=this,e=document.createElement("a");e.setAttribute("rel","tooltip");e.className="modebar-btn";var d=b.title;void 0===d?d=b.name:"function"===typeof d&&(d=d(this.graphInfo));(d||0===d)&&e.setAttribute("data-title",d);void 0!==b.attr&&e.setAttribute("data-attr",b.attr);d=b.val;void 0!==d&&("function"===typeof d&&(d=d(this.graphInfo)),e.setAttribute("data-val",d));if("function"!==typeof b.click)throw Error("must provide button 'click' function in button config");
e.addEventListener("click",function(d){b.click(a.graphInfo,d);a.updateActiveButton(d.currentTarget)});e.setAttribute("data-toggle",b.toggle||!1);b.toggle&&g.select(e).classed("active",!0);d=b.icon;"function"===typeof d?e.appendChild(d()):e.appendChild(this.createIcon(d||n.question));e.setAttribute("data-gravity",b.gravity||"n");return e};a.createIcon=function(a){var e=h(a.height)?Number(a.height):a.ascent-a.descent;if(a.path){var g=document.createElementNS("http://www.w3.org/2000/svg","svg");g.setAttribute("viewBox",
[0,0,a.width,e].join(" "));g.setAttribute("class","icon");e=document.createElementNS("http://www.w3.org/2000/svg","path");e.setAttribute("d",a.path);a.transform?e.setAttribute("transform",a.transform):void 0!==a.ascent&&e.setAttribute("transform","matrix(1 0 0 -1 0 "+a.ascent+")");g.appendChild(e)}a.svg&&(g=b.parseFromString(a.svg,"application/xml").childNodes[0]);g.setAttribute("height","1em");g.setAttribute("width","1em");return g};a.updateActiveButton=function(b){var a=this.graphInfo._fullLayout,
h=void 0!==b?b.getAttribute("data-attr"):null;this.buttonElements.forEach(function(b){var d=b.getAttribute("data-val")||!0,c=b.getAttribute("data-attr"),k="true"===b.getAttribute("data-toggle");b=g.select(b);k?c===h&&b.classed("active",!b.classed("active")):(c=null===c?c:e.nestedProperty(a,c).get(),b.classed("active",c===d))})};a.hasButtons=function(b){var a=this.buttons;if(!a||b.length!==a.length)return!1;for(var e=0;e<b.length;++e){if(b[e].length!==a[e].length)return!1;for(var d=0;d<b[e].length;d++)if(b[e][d].name!==
a[e][d].name)return!1}return!0};a.getLogo=function(){var b=this.createGroup(),a=document.createElement("a");a.href="https://plot.ly/";a.target="_blank";a.setAttribute("data-title",e._(this.graphInfo,"Produced with Plotly"));a.className="modebar-btn plotlyjsicon modebar-btn--logo";a.appendChild(this.createIcon(n.newplotlylogo));b.appendChild(a);return b};a.removeAllButtons=function(){for(;this.element.firstChild;)this.element.removeChild(this.element.firstChild);this.hasLogo=!1};a.destroy=function(){e.removeElement(this.container.querySelector(".modebar"));
e.deleteRelatedStyleRule(this._uid)};t.exports=function(b,a){var e=b._fullLayout;b=new p({graphInfo:b,container:e._modebardiv.node(),buttons:a});e._privateplot&&g.select(b.element).append("span").classed("badge-private float--left",!0).text("PRIVATE");return b}},{"../../../build/ploticon":2,"../../lib":700,d3:154,"fast-isnumeric":221}],639:[function(a,t,m){m=a("../../plots/font_attributes");var p=a("../color/attributes");a=a("../../plot_api/plot_template").templatedArray;a=a("button",{visible:{valType:"boolean",
dflt:!0,editType:"plot"},step:{valType:"enumerated",values:"month year day hour minute second all".split(" "),dflt:"month",editType:"plot"},stepmode:{valType:"enumerated",values:["backward","todate"],dflt:"backward",editType:"plot"},count:{valType:"number",min:0,dflt:1,editType:"plot"},label:{valType:"string",editType:"plot"},editType:"plot"});t.exports={visible:{valType:"boolean",editType:"plot"},buttons:a,x:{valType:"number",min:-2,max:3,editType:"plot"},xanchor:{valType:"enumerated",values:["auto",
"left","center","right"],dflt:"left",editType:"plot"},y:{valType:"number",min:-2,max:3,editType:"plot"},yanchor:{valType:"enumerated",values:["auto","top","middle","bottom"],dflt:"bottom",editType:"plot"},font:m({editType:"plot"}),bgcolor:{valType:"color",dflt:p.lightLine,editType:"plot"},activecolor:{valType:"color",editType:"plot"},bordercolor:{valType:"color",dflt:p.defaultLine,editType:"plot"},borderwidth:{valType:"number",min:0,dflt:0,editType:"plot"},editType:"plot"}},{"../../plot_api/plot_template":738,
"../../plots/font_attributes":774,"../color/attributes":576}],640:[function(a,t,m){t.exports={yPad:.02,minButtonWidth:30,rx:3,ry:3,lightAmount:25,darkAmount:10}},{}],641:[function(a,t,m){function p(b,a,f,c){function d(c,d){return h.coerce(b,a,l.buttons,c,d)}f=c.calendar;d("visible")&&(c=d("step"),"all"!==c&&(!f||"gregorian"===f||"month"!==c&&"year"!==c?d("stepmode"):a.stepmode="backward",d("count")),d("label"))}function g(b,a,f){f=f.filter(function(c){return a[c].anchor===b._id});for(var c=0,d=0;d<
f.length;d++){var e=a[f[d]].domain;e&&(c=Math.max(e[1],c))}return[b.domain[0],c+u.yPad]}var h=a("../../lib"),e=a("../color"),n=a("../../plot_api/plot_template"),b=a("../../plots/array_container_defaults"),l=a("./attributes"),u=a("./constants");t.exports=function(a,d,f,c,k){function r(b,a){return h.coerce(q,m,l,b,a)}var q=a.rangeselector||{},m=n.newContainer(d,"rangeselector");k=b(q,m,{name:"buttons",handleItemDefaults:p,calendar:k});r("visible",0<k.length)&&(c=g(d,f,c),r("x",c[0]),r("y",c[1]),h.noneOrAll(a,
d,["x","y"]),r("xanchor"),r("yanchor"),h.coerceFont(r,"font",f.font),a=r("bgcolor"),r("activecolor",e.contrast(a,u.lightAmount,u.darkAmount)),r("bordercolor"),r("borderwidth"))}},{"../../lib":700,"../../plot_api/plot_template":738,"../../plots/array_container_defaults":744,"../color":577,"./attributes":639,"./constants":640}],642:[function(a,t,m){function p(b){b=v.list(b,"x",!0);for(var a=[],c=0;c<b.length;c++){var d=b[c];d.rangeselector&&d.rangeselector.visible&&a.push(d)}return a}function g(b){return b._id}
function h(b,a,c){if("all"===a.step)return!0===b.autorange;a=Object.keys(c);return b.range[0]===c[a[0]]&&b.range[1]===c[a[1]]}function e(b,a,c){b=k.ensureSingle(b,"rect","selector-rect",function(b){b.attr("shape-rendering","crispEdges")});b.attr({rx:w.rx,ry:w.ry});b.call(f.stroke,a.bordercolor).call(f.fill,c._isActive||c._isHovered?a.activecolor:a.bgcolor).style("stroke-width",a.borderwidth+"px")}function n(a,d,f,e){k.ensureSingle(a,"text","selector-text",function(b){b.classed("user-select-none",
!0).attr("text-anchor","middle")}).call(c.font,d.font).text(b(f,e._fullLayout.meta)).call(function(b){r.convertToTspans(b,e)})}function b(b,a){return b.label?a?k.templateString(b.label,{meta:a}):b.label:"all"===b.step?"all":b.count+b.step.charAt(0)}function l(b,a,f,e,g){var h=0,l=0,n=f.borderwidth;a.each(function(){var b=u.select(this).select(".selector-text");b=Math.max(f.font.size*z*r.lineCount(b),16)+3;l=Math.max(l,b)});a.each(function(){var b=u.select(this),a=b.select(".selector-rect"),d=b.select(".selector-text"),
e=d.node()&&c.bBox(d.node()).width,g=f.font.size*z,k=r.lineCount(d);e=Math.max(e+10,w.minButtonWidth);b.attr("transform","translate("+(n+h)+","+n+")");a.attr({x:0,y:0,width:e,height:l});r.positionText(d,e/2,l/2-(k-1)*g/2+3);h+=e+5});var q=b._fullLayout._size;a=q.l+q.w*f.x;q=q.t+q.h*(1-f.y);var p="left";k.isRightAnchor(f)&&(a-=h,p="right");k.isCenterAnchor(f)&&(a-=h/2,p="center");var m="top";k.isBottomAnchor(f)&&(q-=l,m="bottom");k.isMiddleAnchor(f)&&(q-=l/2,m="middle");h=Math.ceil(h);l=Math.ceil(l);
a=Math.round(a);q=Math.round(q);d.autoMargin(b,e+"-range-selector",{x:f.x,y:f.y,l:h*A[p],r:h*y[p],b:l*y[m],t:l*A[m]});g.attr("transform","translate("+a+","+q+")")}var u=a("d3"),q=a("../../registry"),d=a("../../plots/plots"),f=a("../color"),c=a("../drawing"),k=a("../../lib"),r=a("../../lib/svg_text_utils"),v=a("../../plots/cartesian/axis_ids");m=a("../../constants/alignment");var z=m.LINE_SPACING,A=m.FROM_TL,y=m.FROM_BR,w=a("./constants"),x=a("./get_update_object");t.exports=function(b){var a=b._fullLayout._infolayer.selectAll(".rangeselector").data(p(b),
g);a.enter().append("g").classed("rangeselector",!0);a.exit().remove();a.style({cursor:"pointer","pointer-events":"all"});a.each(function(a){var c=u.select(this),d=a.rangeselector,f=c.selectAll("g.button").data(k.filterVisible(d.buttons));f.enter().append("g").classed("button",!0);f.exit().remove();f.each(function(c){var f=u.select(this),g=x(a,c);c._isActive=h(a,c,g);f.call(e,d,c);f.call(n,d,c,b);f.on("click",function(){b._dragged||q.call("_guiRelayout",b,g)});f.on("mouseover",function(){c._isHovered=
!0;f.call(e,d,c)});f.on("mouseout",function(){c._isHovered=!1;f.call(e,d,c)})});l(b,f,d,a._name,c)})}},{"../../constants/alignment":672,"../../lib":700,"../../lib/svg_text_utils":724,"../../plots/cartesian/axis_ids":751,"../../plots/plots":810,"../../registry":829,"../color":577,"../drawing":598,"./constants":640,"./get_update_object":643,d3:154}],643:[function(a,t,m){var p=a("d3");t.exports=function(a,h){var e=a._name,g={};if("all"===h.step)g[e+".autorange"]=!0;else{var b=a.range,l=new Date(a.r2l(b[1])),
u=h.step,q=h.count;switch(h.stepmode){case "backward":var d=a.l2r(+p.time[u].utc.offset(l,-q));break;case "todate":h=p.time[u].utc.offset(l,-q),d=a.l2r(+p.time[u].utc.ceil(h))}a=[d,b[1]];g[e+".range[0]"]=a[0];g[e+".range[1]"]=a[1]}return g}},{d3:154}],644:[function(a,t,m){t.exports={moduleType:"component",name:"rangeselector",schema:{subplots:{xaxis:{rangeselector:a("./attributes")}}},layoutAttributes:a("./attributes"),handleDefaults:a("./defaults"),draw:a("./draw")}},{"./attributes":639,"./defaults":641,
"./draw":642}],645:[function(a,t,m){a=a("../color/attributes");t.exports={bgcolor:{valType:"color",dflt:a.background,editType:"plot"},bordercolor:{valType:"color",dflt:a.defaultLine,editType:"plot"},borderwidth:{valType:"integer",dflt:0,min:0,editType:"plot"},autorange:{valType:"boolean",dflt:!0,editType:"calc",impliedEdits:{"range[0]":void 0,"range[1]":void 0}},range:{valType:"info_array",items:[{valType:"any",editType:"calc",impliedEdits:{"^autorange":!1}},{valType:"any",editType:"calc",impliedEdits:{"^autorange":!1}}],
editType:"calc",impliedEdits:{autorange:!1}},thickness:{valType:"number",dflt:.15,min:0,max:1,editType:"plot"},visible:{valType:"boolean",dflt:!0,editType:"calc"},editType:"calc"}},{"../color/attributes":576}],646:[function(a,t,m){var p=a("../../plots/cartesian/axis_ids").list,g=a("../../plots/cartesian/autorange").getAutoRange,h=a("./constants");t.exports=function(a){for(var e=p(a,"x",!0),b=0;b<e.length;b++){var l=e[b],u=l[h.name];u&&u.visible&&u.autorange&&(u._input.autorange=!0,u._input.range=
u.range=g(a,l))}}},{"../../plots/cartesian/autorange":747,"../../plots/cartesian/axis_ids":751,"./constants":647}],647:[function(a,t,m){t.exports={name:"rangeslider",containerClassName:"rangeslider-container",bgClassName:"rangeslider-bg",rangePlotClassName:"rangeslider-rangeplot",maskMinClassName:"rangeslider-mask-min",maskMaxClassName:"rangeslider-mask-max",slideBoxClassName:"rangeslider-slidebox",grabberMinClassName:"rangeslider-grabber-min",grabAreaMinClassName:"rangeslider-grabarea-min",handleMinClassName:"rangeslider-handle-min",
grabberMaxClassName:"rangeslider-grabber-max",grabAreaMaxClassName:"rangeslider-grabarea-max",handleMaxClassName:"rangeslider-handle-max",maskMinOppAxisClassName:"rangeslider-mask-min-opp-axis",maskMaxOppAxisClassName:"rangeslider-mask-max-opp-axis",maskColor:"rgba(0,0,0,0.4)",maskOppAxisColor:"rgba(0,0,0,0.2)",slideBoxFill:"transparent",slideBoxCursor:"ew-resize",grabAreaFill:"transparent",grabAreaCursor:"col-resize",grabAreaWidth:10,handleWidth:4,handleRadius:1,handleStrokeWidth:1,extraPad:15}},
{}],648:[function(a,t,m){var p=a("../../lib"),g=a("../../plot_api/plot_template"),h=a("../../plots/cartesian/axis_ids"),e=a("./attributes"),n=a("./oppaxis_attributes");t.exports=function(b,a,u){function l(b,a){return p.coerce(c,k,e,b,a)}function d(b,a){return p.coerce(m,t,n,b,a)}b=b[u];var f=a[u];if(b.rangeslider||a._requestRangeslider[f._id]){p.isPlainObject(b.rangeslider)||(b.rangeslider={});var c=b.rangeslider,k=g.newContainer(f,"rangeslider");if(l("visible")){l("bgcolor",a.plot_bgcolor);l("bordercolor");
l("borderwidth");l("thickness");l("autorange",!f.isValidRange(c.range));l("range");if(b=a._subplots)for(b=b.cartesian.filter(function(b){return b.substr(0,b.indexOf("y"))===h.name2id(u)}).map(function(b){return b.substr(b.indexOf("y"),b.length)}),b=p.simpleMap(b,h.id2name),f=0;f<b.length;f++){var r=b[f];var m=c[r]||{};var t=g.newContainer(k,r,"yaxis");r=a[r];var A;m.range&&r.isValidRange(m.range)&&(A="fixed");"match"!==d("rangemode",A)&&d("range",r.range.slice())}k._input=c}}}},{"../../lib":700,"../../plot_api/plot_template":738,
"../../plots/cartesian/axis_ids":751,"./attributes":645,"./oppaxis_attributes":652}],649:[function(a,t,m){function p(b,a,c,d){var e=b.select("rect."+B.slideBoxClassName).node(),k=b.select("rect."+B.grabAreaMinClassName).node(),h=b.select("rect."+B.grabAreaMaxClassName).node();b.on("mousedown",function(){function l(l){var r=+l.clientX-p;switch(u){case e:var n="ew-resize";l=v+r;r=t+r;break;case k:n="col-resize";l=v+r;r=t;break;case h:n="col-resize";l=v;r=t+r;break;default:n="ew-resize",l=m,r=m+r}if(r<
l){var q=r;r=l;l=q}d._pixelMin=l;d._pixelMax=r;F(f.select(w),n);g(b,a,c,d)}function n(){w.removeEventListener("mousemove",l);w.removeEventListener("mouseup",n);r.removeElement(w)}var q=f.event,u=q.target,p=q.clientX,m=p-b.node().getBoundingClientRect().left,v=d.d2p(c._rl[0]),t=d.d2p(c._rl[1]),w=x.coverSlip();w.addEventListener("mousemove",l);w.addEventListener("mouseup",n)})}function g(b,a,d,f){var e=d.l2r(r.constrain(f.p2d(f._pixelMin),f._rl[0],f._rl[1])),g=d.l2r(r.constrain(f.p2d(f._pixelMax),f._rl[0],
f._rl[1]));window.requestAnimationFrame(function(){c.call("_guiRelayout",a,d._name+".range",[e,g])})}function h(b,a,c,d,f,e){a=B.handleWidth/2;var g=r.constrain(d.d2p(c._rl[0]),0,d._width);c=r.constrain(d.d2p(c._rl[1]),0,d._width);b.select("rect."+B.slideBoxClassName).attr("x",g).attr("width",c-g);b.select("rect."+B.maskMinClassName).attr("width",g);b.select("rect."+B.maskMaxClassName).attr("x",c).attr("width",d._width-c);"match"!==e.rangemode&&(e=d._height-r.constrain(d.d2pOppAxis(f._rl[1]),0,d._height),
f=d._height-r.constrain(d.d2pOppAxis(f._rl[0]),0,d._height),b.select("rect."+B.maskMinOppAxisClassName).attr("x",g).attr("height",e).attr("width",c-g),b.select("rect."+B.maskMaxOppAxisClassName).attr("x",g).attr("y",f).attr("height",d._height-f).attr("width",c-g),b.select("rect."+B.slideBoxClassName).attr("y",e).attr("height",f-e));f=Math.round(r.constrain(g-a,-a,d._width+a))-.5;d=Math.round(r.constrain(c-a,-a,d._width+a))+.5;b.select("g."+B.grabberMinClassName).attr("transform","translate("+f+",0.5)");
b.select("g."+B.grabberMaxClassName).attr("transform","translate("+d+",0.5)")}function e(b,a,c,d){b=r.ensureSingle(b,"rect",B.bgClassName,function(b){b.attr({x:0,y:0,"shape-rendering":"crispEdges"})});c=0===d.borderwidth%2?d.borderwidth:d.borderwidth-1;var f=-d._offsetShift;a=v.crispRound(a,d.borderwidth);b.attr({width:d._width+c,height:d._height+c,transform:"translate("+f+","+f+")",fill:d.bgcolor,stroke:d.bordercolor,"stroke-width":a})}function n(b,a,c,d){r.ensureSingleById(a._fullLayout._topdefs,
"clipPath",d._clipId,function(b){b.append("rect").attr({x:0,y:0})}).select("rect").attr({width:d._width,height:d._height})}function b(b,a,c,d){var e=a.calcdata;b=b.selectAll("g."+B.rangePlotClassName).data(c._subplotsWith,r.identity);b.enter().append("g").attr("class",function(b){return B.rangePlotClassName+" "+b}).call(v.setClipUrl,d._clipId,a);b.order();b.exit().remove();var g;b.each(function(b,h){var r=f.select(this);h=0===h;var n=w.getFromId(a,b,"y"),q=n._name,u=d[q],p={data:[],layout:{xaxis:{type:c.type,
domain:[0,1],range:d.range.slice(),calendar:c.calendar},width:d._width,height:d._height,margin:{t:0,b:0,l:0,r:0}},_context:a._context};p.layout[q]={type:n.type,domain:[0,1],range:"match"!==u.rangemode?u.range.slice():n.range.slice(),calendar:n.calendar};k.supplyDefaults(p);n=p._fullLayout.xaxis;q=p._fullLayout[q];n.clearCalc();n.setScale();q.clearCalc();q.setScale();r={id:b,plotgroup:r,xaxis:n,yaxis:q,isRangePlot:!0};h?g=r:(r.mainplot="xy",r.mainplotinfo=g);y.rangePlot(a,r,l(e,b))})}function l(b,
a){for(var c=[],d=0;d<b.length;d++){var f=b[d],e=f[0].trace;e.xaxis+e.yaxis===a&&c.push(f)}return c}function u(b,a,c,d,f){r.ensureSingle(b,"rect",B.maskMinClassName,function(b){b.attr({x:0,y:0,"shape-rendering":"crispEdges"})}).attr("height",d._height).call(z.fill,B.maskColor);r.ensureSingle(b,"rect",B.maskMaxClassName,function(b){b.attr({y:0,"shape-rendering":"crispEdges"})}).attr("height",d._height).call(z.fill,B.maskColor);"match"!==f.rangemode&&(r.ensureSingle(b,"rect",B.maskMinOppAxisClassName,
function(b){b.attr({y:0,"shape-rendering":"crispEdges"})}).attr("width",d._width).call(z.fill,B.maskOppAxisColor),r.ensureSingle(b,"rect",B.maskMaxOppAxisClassName,function(b){b.attr({y:0,"shape-rendering":"crispEdges"})}).attr("width",d._width).style("border-top",B.maskOppBorder).call(z.fill,B.maskOppAxisColor))}function q(b,a,c,d){a._context.staticPlot||r.ensureSingle(b,"rect",B.slideBoxClassName,function(b){b.attr({y:0,cursor:B.slideBoxCursor,"shape-rendering":"crispEdges"})}).attr({height:d._height,
fill:B.slideBoxFill})}function d(b,a,c,d){c=r.ensureSingle(b,"g",B.grabberMinClassName);b=r.ensureSingle(b,"g",B.grabberMaxClassName);var f={x:0,width:B.handleWidth,rx:B.handleRadius,fill:z.background,stroke:z.defaultLine,"stroke-width":B.handleStrokeWidth,"shape-rendering":"crispEdges"},e={y:Math.round(d._height/4),height:Math.round(d._height/2)};r.ensureSingle(c,"rect",B.handleMinClassName,function(b){b.attr(f)}).attr(e);r.ensureSingle(b,"rect",B.handleMaxClassName,function(b){b.attr(f)}).attr(e);
if(!a._context.staticPlot){var g={width:B.grabAreaWidth,x:0,y:0,fill:B.grabAreaFill,cursor:B.grabAreaCursor};r.ensureSingle(c,"rect",B.grabAreaMinClassName,function(b){b.attr(g)}).attr("height",d._height);r.ensureSingle(b,"rect",B.grabAreaMaxClassName,function(b){b.attr(g)}).attr("height",d._height)}}var f=a("d3"),c=a("../../registry"),k=a("../../plots/plots"),r=a("../../lib"),v=a("../drawing"),z=a("../color"),A=a("../titles"),y=a("../../plots/cartesian"),w=a("../../plots/cartesian/axis_ids"),x=a("../dragelement"),
F=a("../../lib/setcursor"),B=a("./constants");t.exports=function(a){for(var c=a._fullLayout,g=c._rangeSliderData,k=0;k<g.length;k++){var l=g[k][B.name];l._clipId=l._id+"-"+c._uid}k=c._infolayer.selectAll("g."+B.containerClassName).data(g,function(b){return b._name});k.exit().each(function(b){c._topdefs.select("#"+b[B.name]._clipId).remove()}).remove();0!==g.length&&(k.enter().append("g").classed(B.containerClassName,!0).attr("pointer-events","all"),k.each(function(g){var k=f.select(this),l=g[B.name],
m=c[w.id2name(g.anchor)],v=l[w.id2name(g.anchor)];if(l.range){var t=r.simpleMap(l.range,g.r2l),z=r.simpleMap(g.range,g.r2l);l.range=l._input.range=r.simpleMap(z[0]<z[1]?[Math.min(t[0],z[0]),Math.max(t[1],z[1])]:[Math.max(t[0],z[0]),Math.min(t[1],z[1])],g.l2r)}g.cleanRange("rangeslider.range");t=c.margin;z=c._size;var x=g.domain,y=l._tickHeight,E=l._oppBottom;l._width=z.w*(x[1]-x[0]);y=Math.round(z.t+z.h*(1-E)+y+l._offsetShift+B.extraPad);k.attr("transform","translate("+Math.round(t.l+z.w*x[0])+","+
y+")");var D=g.r2l(l.range[0]);t=g.r2l(l.range[1]);var C=t-D;l.p2d=function(b){return b/l._width*C+D};l.d2p=function(b){return(b-D)/C*l._width};l._rl=[D,t];if("match"!==v.rangemode){var G=m.r2l(v.range[0]),K=m.r2l(v.range[1])-G;l.d2pOppAxis=function(b){return(b-G)/K*l._height}}k.call(e,a,g,l).call(n,a,g,l).call(b,a,g,l).call(u,a,g,l,v).call(q,a,g,l).call(d,a,g,l);p(k,a,g,l);h(k,a,g,l,m,v);"bottom"===g.side&&A.draw(a,g._id+"title",{propContainer:g,propName:g._name+".title",placeholder:c._dfltTitle.x,
attributes:{x:g._offset+g._length/2,y:y+l._height+l._offsetShift+10+1.5*g.title.font.size,"text-anchor":"middle"}})}))}},{"../../lib":700,"../../lib/setcursor":720,"../../plots/cartesian":759,"../../plots/cartesian/axis_ids":751,"../../plots/plots":810,"../../registry":829,"../color":577,"../dragelement":595,"../drawing":598,"../titles":665,"./constants":647,d3:154}],650:[function(a,t,m){function p(a){return(a=a&&a[e])&&a.visible}var g=a("../../plots/cartesian/axis_ids"),h=a("./constants"),e=h.name;
m.isVisible=p;m.makeData=function(a){var b=g.list({_fullLayout:a},"x",!0),h=a.margin,n=[];if(!a._has("gl2d"))for(var q=0;q<b.length;q++){var d=b[q];if(p(d)){n.push(d);var f=d[e];f._id=e+d._id;f._height=(a.height-h.b-h.t)*f.thickness;f._offsetShift=Math.floor(f.borderwidth/2)}}a._rangeSliderData=n};m.autoMarginOpts=function(a,b){for(var l=b[e],n=Infinity,q=b._counterAxes,d=0;d<q.length;d++){var f=g.getFromId(a,q[d]);n=Math.min(n,f.domain[0])}l._oppBottom=n;b="bottom"===b.side&&b._boundingBox.height||
0;l._tickHeight=b;return{x:0,y:n,l:0,r:0,t:0,b:l._height+a._fullLayout.margin.b+b,pad:h.extraPad+2*l._offsetShift}}},{"../../plots/cartesian/axis_ids":751,"./constants":647}],651:[function(a,t,m){m=a("../../lib");var p=a("./attributes"),g=a("./oppaxis_attributes"),h=a("./helpers");t.exports={moduleType:"component",name:"rangeslider",schema:{subplots:{xaxis:{rangeslider:m.extendFlat({},p,{yaxis:g})}}},layoutAttributes:a("./attributes"),handleDefaults:a("./defaults"),calcAutorange:a("./calc_autorange"),
draw:a("./draw"),isVisible:h.isVisible,makeData:h.makeData,autoMarginOpts:h.autoMarginOpts}},{"../../lib":700,"./attributes":645,"./calc_autorange":646,"./defaults":648,"./draw":649,"./helpers":650,"./oppaxis_attributes":652}],652:[function(a,t,m){t.exports={_isSubplotObj:!0,rangemode:{valType:"enumerated",values:["auto","fixed","match"],dflt:"match",editType:"calc"},range:{valType:"info_array",items:[{valType:"any",editType:"plot"},{valType:"any",editType:"plot"}],editType:"plot"},editType:"calc"}},
{}],653:[function(a,t,m){m=a("../annotations/attributes");var p=a("../../traces/scatter/attributes").line,g=a("../drawing/attributes").dash,h=a("../../lib/extend").extendFlat;a=a("../../plot_api/plot_template").templatedArray;t.exports=a("shape",{visible:{valType:"boolean",dflt:!0,editType:"calc+arraydraw"},type:{valType:"enumerated",values:["circle","rect","path","line"],editType:"calc+arraydraw"},layer:{valType:"enumerated",values:["below","above"],dflt:"above",editType:"arraydraw"},xref:h({},m.xref,
{}),xsizemode:{valType:"enumerated",values:["scaled","pixel"],dflt:"scaled",editType:"calc+arraydraw"},xanchor:{valType:"any",editType:"calc+arraydraw"},x0:{valType:"any",editType:"calc+arraydraw"},x1:{valType:"any",editType:"calc+arraydraw"},yref:h({},m.yref,{}),ysizemode:{valType:"enumerated",values:["scaled","pixel"],dflt:"scaled",editType:"calc+arraydraw"},yanchor:{valType:"any",editType:"calc+arraydraw"},y0:{valType:"any",editType:"calc+arraydraw"},y1:{valType:"any",editType:"calc+arraydraw"},
path:{valType:"string",editType:"calc+arraydraw"},opacity:{valType:"number",min:0,max:1,dflt:1,editType:"arraydraw"},line:{color:h({},p.color,{editType:"arraydraw"}),width:h({},p.width,{editType:"calc+arraydraw"}),dash:h({},g,{editType:"arraydraw"}),editType:"calc+arraydraw"},fillcolor:{valType:"color",dflt:"rgba(0,0,0,0)",editType:"arraydraw"},editType:"arraydraw"})},{"../../lib/extend":690,"../../plot_api/plot_template":738,"../../traces/scatter/attributes":1051,"../annotations/attributes":560,
"../drawing/attributes":597}],654:[function(a,t,m){function p(a,e,g,d,f,c){a/=2;return"pixel"===e?(g=f?b.extractPathCoords(f,c?n.paramIsY:n.paramIsX):[g,d],e=h.aggNums(Math.max,null,g),g=h.aggNums(Math.min,null,g),g=0>g?Math.abs(g)+a:a,e=0<e?e+a:a,{ppad:a,ppadplus:c?g:e,ppadminus:c?e:g}):{ppad:a}}function g(a,e,g,d,f){var c="category"===a.type||"multicategory"===a.type?a.r2c:a.d2c;if(void 0!==e)return[c(e),c(g)];if(d){e=Infinity;g=-Infinity;d=d.match(n.segmentRE);var k;"date"===a.type&&(c=b.decodeDate(c));
for(a=0;a<d.length;a++){var h=d[a];h=f[h.charAt(0)].drawn;void 0!==h&&(!(k=d[a].substr(1).match(n.paramRE))||k.length<h||(h=c(k[h]),h<e&&(e=h),h>g&&(g=h)))}if(g>=e)return[e,g]}}var h=a("../../lib"),e=a("../../plots/cartesian/axes"),n=a("./constants"),b=a("./helpers");t.exports=function(b){var a=h.filterVisible(b._fullLayout.shapes);if(a.length&&b._fullData.length)for(var l=0;l<a.length;l++){var d=a[l];d._extremes={};if("paper"!==d.xref){var f="pixel"===d.xsizemode?d.xanchor:d.x0;var c="pixel"===d.xsizemode?
d.xanchor:d.x1;var k=e.getFromId(b,d.xref);(f=g(k,f,c,d.path,n.paramIsX))&&(d._extremes[k._id]=e.findExtremes(k,f,p(d.line.width,d.xsizemode,d.x0,d.x1,d.path,!1)))}"paper"!==d.yref&&(f="pixel"===d.ysizemode?d.yanchor:d.y0,c="pixel"===d.ysizemode?d.yanchor:d.y1,k=e.getFromId(b,d.yref),(f=g(k,f,c,d.path,n.paramIsY))&&(d._extremes[k._id]=e.findExtremes(k,f,p(d.line.width,d.ysizemode,d.y0,d.y1,d.path,!0))))}}},{"../../lib":700,"../../plots/cartesian/axes":748,"./constants":655,"./helpers":658}],655:[function(a,
t,m){t.exports={segmentRE:/[MLHVQCTSZ][^MLHVQCTSZ]*/g,paramRE:/[^\s,]+/g,paramIsX:{M:{0:!0,drawn:0},L:{0:!0,drawn:0},H:{0:!0,drawn:0},V:{},Q:{0:!0,2:!0,drawn:2},C:{0:!0,2:!0,4:!0,drawn:4},T:{0:!0,drawn:0},S:{0:!0,2:!0,drawn:2},Z:{}},paramIsY:{M:{1:!0,drawn:1},L:{1:!0,drawn:1},H:{},V:{0:!0,drawn:0},Q:{1:!0,3:!0,drawn:3},C:{1:!0,3:!0,5:!0,drawn:5},T:{1:!0,drawn:1},S:{1:!0,3:!0,drawn:5},Z:{}},numParams:{M:2,L:2,H:1,V:1,Q:4,C:6,T:2,S:4,Z:0}}},{}],656:[function(a,t,m){function p(a,e,q){function d(b,c){return g.coerce(a,
e,n,b,c)}if(d("visible")){d("layer");d("opacity");d("fillcolor");d("line.color");d("line.width");d("line.dash");for(var f=d("type",a.path?"path":"rect"),c=d("xsizemode"),k=d("ysizemode"),l=["x","y"],u=0;2>u;u++){var p=l[u],m=p+"anchor",t="x"===p?c:k,w={_fullLayout:q},x=h.coerceRef(a,e,w,p,"","paper");if("paper"!==x){var F=h.getFromId(w,x);F._shapeIndices.push(e._index);var B=b.rangeToShapePosition(F);F=b.shapePositionToRange(F)}else F=B=g.identity;if("path"!==f){var C=p+"0";p+="1";var D=a[C],G=a[p];
a[C]=F(a[C],!0);a[p]=F(a[p],!0);"pixel"===t?(d(C,0),d(p,10)):(h.coercePosition(e,w,d,x,C,.25),h.coercePosition(e,w,d,x,p,.75));e[C]=B(e[C]);e[p]=B(e[p]);a[C]=D;a[p]=G}"pixel"===t&&(t=a[m],a[m]=F(a[m],!0),h.coercePosition(e,w,d,x,m,.25),e[m]=B(e[m]),a[m]=t)}"path"===f?d("path"):g.noneOrAll(a,e,["x0","x1","y0","y1"])}}var g=a("../../lib"),h=a("../../plots/cartesian/axes"),e=a("../../plots/array_container_defaults"),n=a("./attributes"),b=a("./helpers");t.exports=function(b,a){e(b,a,{name:"shapes",handleItemDefaults:p})}},
{"../../lib":700,"../../plots/array_container_defaults":744,"../../plots/cartesian/axes":748,"./attributes":653,"./helpers":658}],657:[function(a,t,m){function p(b,a){function c(c){var l={"data-index":a,"fill-rule":"evenodd",d:e(b,k)},r=k.line.width?k.line.color:"rgba(0,0,0,0)";l=c.append("path").attr(l).style("opacity",k.opacity).call(d.stroke,r).call(d.fill,k.fillcolor).call(f.dashLine,k.line.dash,k.line.width);g(l,b,k);b._context.edits.shapePosition&&h(b,l,k,a,c)}b._fullLayout._paperdiv.selectAll('.shapelayer [data-index\x3d"'+
a+'"]').remove();var k=b._fullLayout.shapes[a]||{};if(k._input&&!1!==k.visible)if("below"!==k.layer)c(b._fullLayout._shapeUpperLayer);else if("paper"===k.xref||"paper"===k.yref)c(b._fullLayout._shapeLowerLayer);else{var l=b._fullLayout._plots[k.xref+k.yref];l?c((l.mainplotinfo||l).shapelayer):c(b._fullLayout._shapeLowerLayer)}}function g(b,a,c){c=(c.xref+c.yref).replace(/paper/g,"");f.setClipUrl(b,c?"clip"+a._fullLayout._uid+c:null,a)}function h(a,d,h,n,p){function m(){var b=Math.max(h.line.width,
10),a=p.append("g").attr("data-index",n);a.append("path").attr("d",d.attr("d")).style({cursor:"move","stroke-width":b,"stroke-opacity":"0"});var c={"fill-opacity":"0"};b=10<b/2?b/2:10;a.append("circle").attr({"data-line-point":"start-point",cx:A?oa(h.xanchor)+h.x0:oa(h.x0),cy:K?ua(h.yanchor)-h.y0:ua(h.y0),r:b}).style(c).classed("cursor-grab",!0);a.append("circle").attr({"data-line-point":"end-point",cx:A?oa(h.xanchor)+h.x1:oa(h.x1),cy:K?ua(h.yanchor)-h.y1:ua(h.y1),r:b}).style(c).classed("cursor-grab",
!0);return a}function t(b){if(I)ia="path"===b.target.tagName?"move":"start-point"===b.target.attributes["data-line-point"].value?"resize-over-start-point":"resize-over-end-point";else{var a=V.element.getBoundingClientRect(),c=a.right-a.left,f=a.bottom-a.top,e=b.clientX-a.left;a=b.clientY-a.top;b=!J&&10<c&&10<f&&!b.shiftKey?k.getCursor(e/c,1-a/f):"move";r(d,b);ia=b.split("-")[0]}}function w(c,f){if("path"===h.type){var g=function(b){return b},k=g;A?M("xanchor",h.xanchor=Z(P+c)):(k=function(b){return Z(oa(b)+
c)},ha&&"date"===ha.type&&(k=z.encodeDate(k)));K?M("yanchor",h.yanchor=qa(S+f)):(g=function(b){return qa(ua(b)+f)},fa&&"date"===fa.type&&(g=z.encodeDate(g)));M("path",h.path=b(X,k,g))}else A?M("xanchor",h.xanchor=Z(P+c)):(M("x0",h.x0=Z(N+c)),M("x1",h.x1=Z(R+c))),K?M("yanchor",h.yanchor=qa(S+f)):(M("y0",h.y0=qa(O+f)),M("y1",h.y1=qa(T+f)));d.attr("d",e(a,h));y(p,h)}function x(c,f){if(J){var g=function(b){return b},k=g;A?M("xanchor",h.xanchor=Z(P+c)):(k=function(b){return Z(oa(b)+c)},ha&&"date"===ha.type&&
(k=z.encodeDate(k)));K?M("yanchor",h.yanchor=qa(S+f)):(g=function(b){return qa(ua(b)+f)},fa&&"date"===fa.type&&(g=z.encodeDate(g)));M("path",h.path=b(X,k,g))}else if(I)"resize-over-start-point"===ia?(k=N+c,g=K?O-f:O+f,M("x0",h.x0=A?k:Z(k)),M("y0",h.y0=K?g:qa(g))):"resize-over-end-point"===ia&&(k=R+c,g=K?T-f:T+f,M("x1",h.x1=A?k:Z(k)),M("y1",h.y1=K?g:qa(g)));else{k=~ia.indexOf("n")?ba+f:ba;g=~ia.indexOf("s")?da+f:da;var l=~ia.indexOf("w")?ca+c:ca,r=~ia.indexOf("e")?Y+c:Y;~ia.indexOf("n")&&K&&(k=ba-
f);~ia.indexOf("s")&&K&&(g=da-f);if(!K&&10<g-k||K&&10<k-g)M(W,h[W]=K?k:qa(k)),M(ea,h[ea]=K?g:qa(g));10<r-l&&(M(U,h[U]=A?l:Z(l)),M(na,h[na]=A?r:Z(r)))}d.attr("d",e(a,h));y(p,h)}function y(b,a){if(A||K){var c="path"!==a.type;b=b.selectAll(".visual-cue").data([0]);b.enter().append("path").attr({fill:"#fff","fill-rule":"evenodd",stroke:"#000","stroke-width":1}).classed("visual-cue",!0);var d=oa(A?a.xanchor:u.midRange(c?[a.x0,a.x1]:z.extractPathCoords(a.path,v.paramIsX)));a=ua(K?a.yanchor:u.midRange(c?
[a.y0,a.y1]:z.extractPathCoords(a.path,v.paramIsY)));d=z.roundPositionForSharpStrokeRendering(d,1);a=z.roundPositionForSharpStrokeRendering(a,1);A&&K?b.attr("d","M"+(d-1-1)+","+(a-1-1)+"h-8v2h8 v8h2v-8 h8v-2h-8 v-8h-2 Z"):A?b.attr("d","M"+(d-1-1)+","+(a-9-1)+"v18 h2 v-18 Z"):b.attr("d","M"+(d-9-1)+","+(a-1-1)+"h18 v2 h-18 Z")}}var A="pixel"===h.xsizemode,K="pixel"===h.ysizemode,I="line"===h.type,J="path"===h.type,F=c(a.layout,"shapes",h),M=F.modifyItem,N,O,R,T,P,S,ba,da,ca,Y,W,ea,U,na,X,ha=q.getFromId(a,
h.xref),fa=q.getFromId(a,h.yref),oa=z.getDataToPixel(a,ha),ua=z.getDataToPixel(a,fa,!0),Z=z.getPixelToData(a,ha),qa=z.getPixelToData(a,fa,!0),sa=I?m():d,V={element:sa.node(),gd:a,prepFn:function(b){A&&(P=oa(h.xanchor));K&&(S=ua(h.yanchor));"path"===h.type?X=h.path:(N=A?h.x0:oa(h.x0),O=K?h.y0:ua(h.y0),R=A?h.x1:oa(h.x1),T=K?h.y1:ua(h.y1));N<R?(ca=N,U="x0",Y=R,na="x1"):(ca=R,U="x1",Y=N,na="x0");!K&&O<T||K&&O>T?(ba=O,W="y0",da=T,ea="y1"):(ba=T,W="y1",da=O,ea="y0");t(b);y(p,h);b=h.xref;var c=h.yref,e=
q.getFromId(a,b),g=q.getFromId(a,c),k="";"paper"===b||e.autorange||(k+=b);"paper"===c||g.autorange||(k+=c);f.setClipUrl(d,k?"clip"+a._fullLayout._uid+k:null,a);V.moveFn="move"===ia?w:x},doneFn:function(){r(d);p.selectAll(".visual-cue").remove();g(d,a,h);l.call("_guiRelayout",a,F.getUpdateObj())},clickFn:function(){p.selectAll(".visual-cue").remove()}},ia;k.init(V);sa.node().onmousemove=t}function e(b,a){var c=a.type,d=q.getFromId(b,a.xref),f=q.getFromId(b,a.yref),e=b._fullLayout._size;if(d){var g=
z.shapePositionToRange(d);var k=function(b){return d._offset+d.r2p(g(b,!0))}}else k=function(b){return e.l+e.w*b};if(f){var h=z.shapePositionToRange(f);var l=function(b){return f._offset+f.r2p(h(b,!0))}}else l=function(b){return e.t+e.h*(1-b)};if("path"===c)return d&&"date"===d.type&&(k=z.decodeDate(k)),f&&"date"===f.type&&(l=z.decodeDate(l)),n(a,k,l);if("pixel"===a.xsizemode){k=k(a.xanchor);b=k+a.x0;var r=k+a.x1}else b=k(a.x0),r=k(a.x1);"pixel"===a.ysizemode?(l=l(a.yanchor),k=l-a.y0,a=l-a.y1):(k=
l(a.y0),a=l(a.y1));if("line"===c)return"M"+b+","+k+"L"+r+","+a;if("rect"===c)return"M"+b+","+k+"H"+r+"V"+a+"H"+b+"Z";c=(b+r)/2;a=(k+a)/2;b=Math.abs(c-b);k=Math.abs(a-k);l="A"+b+","+k;b=c+b+","+a;return"M"+b+l+" 0 1,1 "+(c+","+(a-k))+l+" 0 0,1 "+b+"Z"}function n(b,a,c){var d=b.xsizemode,f=b.ysizemode,e=b.xanchor,g=b.yanchor;return b.path.replace(v.segmentRE,function(b){var k=0,h=b.charAt(0),l=v.paramIsX[h],r=v.paramIsY[h],n=v.numParams[h],q=b.substr(1).replace(v.paramRE,function(b){l[k]?b="pixel"===
d?a(e)+Number(b):a(b):r[k]&&(b="pixel"===f?c(g)-Number(b):c(b));k++;k>n&&(b="X");return b});k>n&&(q=q.replace(/[\s,]*X.*/,""),u.log("Ignoring extra params in segment "+b));return h+q})}function b(b,a,c){return b.replace(v.segmentRE,function(b){var d=0,f=b.charAt(0),e=v.paramIsX[f],g=v.paramIsY[f],k=v.numParams[f];b=b.substr(1).replace(v.paramRE,function(b){if(d>=k)return b;e[d]?b=a(b):g[d]&&(b=c(b));d++;return b});return f+b})}var l=a("../../registry"),u=a("../../lib"),q=a("../../plots/cartesian/axes"),
d=a("../color"),f=a("../drawing"),c=a("../../plot_api/plot_template").arrayEditor,k=a("../dragelement"),r=a("../../lib/setcursor"),v=a("./constants"),z=a("./helpers");t.exports={draw:function(b){var a=b._fullLayout;a._shapeUpperLayer.selectAll("path").remove();a._shapeLowerLayer.selectAll("path").remove();for(var c in a._plots){var d=a._plots[c].shapelayer;d&&d.selectAll("path").remove()}for(c=0;c<a.shapes.length;c++)a.shapes[c].visible&&p(b,c)},drawOne:p}},{"../../lib":700,"../../lib/setcursor":720,
"../../plot_api/plot_template":738,"../../plots/cartesian/axes":748,"../../registry":829,"../color":577,"../dragelement":595,"../drawing":598,"./constants":655,"./helpers":658}],658:[function(a,t,m){var p=a("./constants"),g=a("../../lib");m.rangeToShapePosition=function(a){return"log"===a.type?a.r2d:function(a){return a}};m.shapePositionToRange=function(a){return"log"===a.type?a.d2r:function(a){return a}};m.decodeDate=function(a){return function(e){e.replace&&(e=e.replace("_"," "));return a(e)}};
m.encodeDate=function(a){return function(e){return a(e).replace(" ","_")}};m.extractPathCoords=function(a,e){var h=[];a.match(p.segmentRE).forEach(function(b){var a=e[b.charAt(0)].drawn;void 0!==a&&(b=b.substr(1).match(p.paramRE),!b||b.length<a||h.push(g.cleanNumber(b[a])))});return h};m.getDataToPixel=function(a,e,g){var b=a._fullLayout._size;if(e){var h=m.shapePositionToRange(e);a=function(b){return e._offset+e.r2p(h(b,!0))};"date"===e.type&&(a=m.decodeDate(a))}else a=g?function(a){return b.t+b.h*
(1-a)}:function(a){return b.l+b.w*a};return a};m.getPixelToData=function(a,e,g){var b=a._fullLayout._size;if(e){var h=m.rangeToShapePosition(e);a=function(b){return h(e.p2r(b-e._offset))}}else a=g?function(a){return 1-(a-b.t)/b.h}:function(a){return(a-b.l)/b.w};return a};m.roundPositionForSharpStrokeRendering=function(a,e){a=Math.round(a);return 1===Math.round(e%2)?a+.5:a}},{"../../lib":700,"./constants":655}],659:[function(a,t,m){m=a("./draw");t.exports={moduleType:"component",name:"shapes",layoutAttributes:a("./attributes"),
supplyLayoutDefaults:a("./defaults"),includeBasePlot:a("../../plots/cartesian/include_components")("shapes"),calcAutorange:a("./calc_autorange"),draw:m.draw,drawOne:m.drawOne}},{"../../plots/cartesian/include_components":758,"./attributes":653,"./calc_autorange":654,"./defaults":656,"./draw":657}],660:[function(a,t,m){m=a("../../plots/font_attributes");var p=a("../../plots/pad_attributes"),g=a("../../lib/extend").extendDeepAll,h=a("../../plot_api/edit_types").overrideAll,e=a("../../plots/animation_attributes"),
n=a("../../plot_api/plot_template").templatedArray;a=a("./constants");var b=n("step",{visible:{valType:"boolean",dflt:!0},method:{valType:"enumerated",values:["restyle","relayout","animate","update","skip"],dflt:"restyle"},args:{valType:"info_array",freeLength:!0,items:[{valType:"any"},{valType:"any"},{valType:"any"}]},label:{valType:"string"},value:{valType:"string"},execute:{valType:"boolean",dflt:!0}});t.exports=h(n("slider",{visible:{valType:"boolean",dflt:!0},active:{valType:"number",min:0,dflt:0},
steps:b,lenmode:{valType:"enumerated",values:["fraction","pixels"],dflt:"fraction"},len:{valType:"number",min:0,dflt:1},x:{valType:"number",min:-2,max:3,dflt:0},pad:g(p({editType:"arraydraw"}),{},{t:{dflt:20}}),xanchor:{valType:"enumerated",values:["auto","left","center","right"],dflt:"left"},y:{valType:"number",min:-2,max:3,dflt:0},yanchor:{valType:"enumerated",values:["auto","top","middle","bottom"],dflt:"top"},transition:{duration:{valType:"number",min:0,dflt:150},easing:{valType:"enumerated",
values:e.transition.easing.values,dflt:"cubic-in-out"}},currentvalue:{visible:{valType:"boolean",dflt:!0},xanchor:{valType:"enumerated",values:["left","center","right"],dflt:"left"},offset:{valType:"number",dflt:10},prefix:{valType:"string"},suffix:{valType:"string"},font:m({})},font:m({}),activebgcolor:{valType:"color",dflt:a.gripBgActiveColor},bgcolor:{valType:"color",dflt:a.railBgColor},bordercolor:{valType:"color",dflt:a.railBorderColor},borderwidth:{valType:"number",min:0,dflt:a.railBorderWidth},
ticklen:{valType:"number",min:0,dflt:a.tickLength},tickcolor:{valType:"color",dflt:a.tickColor},tickwidth:{valType:"number",min:0,dflt:1},minorticklen:{valType:"number",min:0,dflt:a.minorTickLength}}),"arraydraw","from-root")},{"../../lib/extend":690,"../../plot_api/edit_types":731,"../../plot_api/plot_template":738,"../../plots/animation_attributes":743,"../../plots/font_attributes":774,"../../plots/pad_attributes":809,"./constants":661}],661:[function(a,t,m){t.exports={name:"sliders",containerClassName:"slider-container",
groupClassName:"slider-group",inputAreaClass:"slider-input-area",railRectClass:"slider-rail-rect",railTouchRectClass:"slider-rail-touch-rect",gripRectClass:"slider-grip-rect",tickRectClass:"slider-tick-rect",inputProxyClass:"slider-input-proxy",labelsClass:"slider-labels",labelGroupClass:"slider-label-group",labelClass:"slider-label",currentValueClass:"slider-current-value",railHeight:5,menuIndexAttrName:"slider-active-index",autoMarginIdRoot:"slider-",minWidth:30,minHeight:30,textPadX:40,arrowOffsetX:4,
railRadius:2,railWidth:5,railBorder:4,railBorderWidth:1,railBorderColor:"#bec8d9",railBgColor:"#f8fafc",railInset:8,stepInset:10,gripRadius:10,gripWidth:20,gripHeight:20,gripBorder:20,gripBorderWidth:1,gripBorderColor:"#bec8d9",gripBgColor:"#f6f8fa",gripBgActiveColor:"#dbdde0",labelPadding:8,labelOffset:0,tickWidth:1,tickColor:"#333",tickOffset:25,tickLength:7,minorTickOffset:25,minorTickColor:"#333",minorTickLength:4,currentValuePadding:8,currentValueInset:0}},{}],662:[function(a,t,m){function p(b,
a,d){function f(c,d){return h.coerce(b,a,n,c,d)}for(var c=e(b,a,{name:"steps",handleItemDefaults:g}),k=0,l=0;l<c.length;l++)c[l].visible&&k++;if(2>k?a.visible=!1:f("visible"))a._stepCount=k,k=a._visibleSteps=h.filterVisible(c),l=f("active"),(c[l]||{}).visible||(a.active=k[0]._index),f("x"),f("y"),h.noneOrAll(b,a,["x","y"]),f("xanchor"),f("yanchor"),f("len"),f("lenmode"),f("pad.t"),f("pad.r"),f("pad.b"),f("pad.l"),h.coerceFont(f,"font",d.font),f("currentvalue.visible")&&(f("currentvalue.xanchor"),
f("currentvalue.prefix"),f("currentvalue.suffix"),f("currentvalue.offset"),h.coerceFont(f,"currentvalue.font",a.font)),f("transition.duration"),f("transition.easing"),f("bgcolor"),f("activebgcolor"),f("bordercolor"),f("borderwidth"),f("ticklen"),f("tickwidth"),f("tickcolor"),f("minorticklen")}function g(b,a){function d(c,d){return h.coerce(b,a,l,c,d)}if("skip"===b.method||Array.isArray(b.args)?d("visible"):a.visible=!1){d("method");d("args");var f=d("label","step-"+a._index);d("value",f);d("execute")}}
var h=a("../../lib"),e=a("../../plots/array_container_defaults"),n=a("./attributes"),b=a("./constants").name,l=n.steps;t.exports=function(a,g){e(a,g,{name:b,handleItemDefaults:p})}},{"../../lib":700,"../../plots/array_container_defaults":744,"./attributes":660,"./constants":661}],663:[function(a,t,m){function p(b,a){b=b[H.name];for(var c=[],d=0;d<b.length;d++){var f=b[d];f.visible&&(f._gd=a,c.push(f))}return c}function g(b){return b._index}function h(b,a){var c=B.tester.selectAll("g."+H.labelGroupClass).data(a._visibleSteps);
c.enter().append("g").classed(H.labelGroupClass,!0);var d=0,f=0;c.each(function(b){var c=w.select(this);if(b=l(c,{step:b},a).node())b=B.bBox(b),f=Math.max(f,b.height),d=Math.max(d,b.width)});c.remove();var e=a._dims={};e.inputAreaWidth=Math.max(H.railWidth,H.gripHeight);var g=b._fullLayout._size;e.lx=g.l+g.w*a.x;e.ly=g.t+g.h*(1-a.y);e.outerLength="fraction"===a.lenmode?Math.round(g.w*a.len):a.len;e.inputAreaStart=0;e.inputAreaLength=Math.round(e.outerLength-a.pad.l-a.pad.r);e.labelStride=Math.max(1,
Math.ceil((d+H.labelPadding)/((e.inputAreaLength-2*H.stepInset)/(a._stepCount-1))));e.labelHeight=f;e.currentValueMaxWidth=0;e.currentValueHeight=0;e.currentValueTotalHeight=0;e.currentValueMaxLines=1;if(a.currentvalue.visible){var k=B.tester.append("g");c.each(function(b){var c=n(k,a,b.label);b=c.node()&&B.bBox(c.node())||{width:0,height:0};c=D.lineCount(c);e.currentValueMaxWidth=Math.max(e.currentValueMaxWidth,Math.ceil(b.width));e.currentValueHeight=Math.max(e.currentValueHeight,Math.ceil(b.height));
e.currentValueMaxLines=Math.max(e.currentValueMaxLines,c)});e.currentValueTotalHeight=e.currentValueHeight+a.currentvalue.offset;k.remove()}e.height=e.currentValueTotalHeight+H.tickOffset+a.ticklen+H.labelOffset+e.labelHeight+a.pad.t+a.pad.b;c="left";C.isRightAnchor(a)&&(e.lx-=e.outerLength,c="right");C.isCenterAnchor(a)&&(e.lx-=e.outerLength/2,c="center");g="top";C.isBottomAnchor(a)&&(e.ly-=e.height,g="bottom");C.isMiddleAnchor(a)&&(e.ly-=e.height/2,g="middle");e.outerLength=Math.ceil(e.outerLength);
e.height=Math.ceil(e.height);e.lx=Math.round(e.lx);e.ly=Math.round(e.ly);g={y:a.y,b:e.height*I[g],t:e.height*K[g]};"fraction"===a.lenmode?(g.l=0,g.xl=a.x-a.len*K[c],g.r=0,g.xr=a.x+a.len*I[c]):(g.x=a.x,g.l=e.outerLength*K[c],g.r=e.outerLength*I[c]);x.autoMargin(b,H.autoMarginIdRoot+a._index,g)}function e(a,d,f){(f.steps[f.active]||{}).visible||(f.active=f._visibleSteps[0]._index);d.call(n,f).call(y,f).call(u,f).call(c,f).call(A,a,f).call(b,a,f);a=f._dims;B.setTranslate(d,a.lx+f.pad.l,a.ly+f.pad.t);
d.call(r,f,!1);d.call(n,f)}function n(b,a,c){if(a.currentvalue.visible){var d=a._dims;switch(a.currentvalue.xanchor){case "right":var f=d.inputAreaLength-H.currentValueInset-d.currentValueMaxWidth;var e="left";break;case "center":f=.5*d.inputAreaLength;e="middle";break;default:f=H.currentValueInset,e="left"}b=C.ensureSingle(b,"text",H.labelClass,function(b){b.classed("user-select-none",!0).attr({"text-anchor":e,"data-notex":1})});var g=a.currentvalue.prefix?a.currentvalue.prefix:"";if("string"===
typeof c)g+=c;else{c=a.steps[a.active].label;var k=a._gd._fullLayout.meta;k&&(c=C.templateString(c,{meta:k}));g+=c}a.currentvalue.suffix&&(g+=a.currentvalue.suffix);b.call(B.font,a.currentvalue.font).text(g).call(D.convertToTspans,a._gd);g=D.lineCount(b);D.positionText(b,f,(d.currentValueMaxLines+1-g)*a.currentvalue.font.size*E);return b}}function b(b,a,c){C.ensureSingle(b,"rect",H.gripRectClass,function(d){d.call(f,a,b,c).style("pointer-events","all")}).attr({width:H.gripWidth,height:H.gripHeight,
rx:H.gripRadius,ry:H.gripRadius}).call(F.stroke,c.bordercolor).call(F.fill,c.bgcolor).style("stroke-width",c.borderwidth+"px")}function l(b,a,c){b=C.ensureSingle(b,"text",H.labelClass,function(b){b.classed("user-select-none",!0).attr({"text-anchor":"middle","data-notex":1})});a=a.step.label;var d=c._gd._fullLayout.meta;d&&(a=C.templateString(a,{meta:d}));b.call(B.font,c.font).text(a).call(D.convertToTspans,c._gd);return b}function u(b,a){b=C.ensureSingle(b,"g",H.labelsClass);var c=a._dims;b=b.selectAll("g."+
H.labelGroupClass).data(c.labelSteps);b.enter().append("g").classed(H.labelGroupClass,!0);b.exit().remove();b.each(function(b){var d=w.select(this);d.call(l,b,a);B.setTranslate(d,v(a,b.fraction),H.tickOffset+a.ticklen+a.font.size*E+H.labelOffset+c.currentValueTotalHeight)})}function q(b,a,c,f,e){f=c._visibleSteps[Math.round(f*(c._stepCount-1))]._index;f!==c.active&&d(b,a,c,f,!0,e)}function d(b,a,c,d,f,e){var g=c.active;c.active=d;G(b.layout,H.name,c).applyUpdate("active",d);d=c.steps[c.active];a.call(r,
c,e);a.call(n,c);b.emit("plotly_sliderchange",{slider:c,step:c.steps[c.active],interaction:f,previousActive:g});d&&d.method&&f&&(a._nextMethod?(a._nextMethod.step=d,a._nextMethod.doCallback=f,a._nextMethod.doTransition=e):(a._nextMethod={step:d,doCallback:f,doTransition:e},a._nextMethodRaf=window.requestAnimationFrame(function(){var c=a._nextMethod.step;c.method&&(c.execute&&x.executeAPICommand(b,c.method,c.args),a._nextMethod=null,a._nextMethodRaf=null)})))}function f(b,a,c){var d=c.node(),f=w.select(a);
b.on("mousedown",function(){var b=c.data()[0];a.emit("plotly_sliderstart",{slider:b});var e=c.select("."+H.gripRectClass);w.event.stopPropagation();w.event.preventDefault();e.call(F.fill,b.activebgcolor);var g=z(b,w.mouse(d)[0]);q(a,c,b,g,!0);b._dragging=!0;f.on("mousemove",function(){var b=c.data()[0],f=z(b,w.mouse(d)[0]);q(a,c,b,f,!1)});f.on("mouseup",function(){var b=c.data()[0];b._dragging=!1;e.call(F.fill,b.bgcolor);f.on("mouseup",null);f.on("mousemove",null);a.emit("plotly_sliderend",{slider:b,
step:b.steps[b.active]})})})}function c(b,a){b=b.selectAll("rect."+H.tickRectClass).data(a._visibleSteps);var c=a._dims;b.enter().append("rect").classed(H.tickRectClass,!0);b.exit().remove();b.attr({width:a.tickwidth+"px","shape-rendering":"crispEdges"});b.each(function(b,d){b=0===d%c.labelStride;var f=w.select(this);f.attr({height:b?a.ticklen:a.minorticklen}).call(F.fill,a.tickcolor);B.setTranslate(f,v(a,d/(a._stepCount-1))-.5*a.tickwidth,(b?H.tickOffset:H.minorTickOffset)+c.currentValueTotalHeight)})}
function k(b){var a=b._dims;a.labelSteps=[];for(var c=b._stepCount,d=0;d<c;d+=a.labelStride)a.labelSteps.push({fraction:d/(c-1),step:b._visibleSteps[d]})}function r(b,a,c){b=b.select("rect."+H.gripRectClass);for(var d=0,f=0;f<a._stepCount;f++)if(a._visibleSteps[f]._index===a.active){d=f;break}d=v(a,d/(a._stepCount-1));a._invokingCommand||(c&&0<a.transition.duration&&(b=b.transition().duration(a.transition.duration).ease(a.transition.easing)),b.attr("transform","translate("+(d-.5*H.gripWidth)+","+
a._dims.currentValueTotalHeight+")"))}function v(b,a){b=b._dims;return b.inputAreaStart+H.stepInset+(b.inputAreaLength-2*H.stepInset)*Math.min(1,Math.max(0,a))}function z(b,a){b=b._dims;return Math.min(1,Math.max(0,(a-H.stepInset-b.inputAreaStart)/(b.inputAreaLength-2*H.stepInset-2*b.inputAreaStart)))}function A(b,a,c){var d=c._dims,e=C.ensureSingle(b,"rect",H.railTouchRectClass,function(d){d.call(f,a,b,c).style("pointer-events","all")});e.attr({width:d.inputAreaLength,height:Math.max(d.inputAreaWidth,
H.tickOffset+c.ticklen+d.labelHeight)}).call(F.fill,c.bgcolor).attr("opacity",0);B.setTranslate(e,0,d.currentValueTotalHeight)}function y(b,a){var c=a._dims,d=c.inputAreaLength-2*H.railInset;b=C.ensureSingle(b,"rect",H.railRectClass);b.attr({width:d,height:H.railWidth,rx:H.railRadius,ry:H.railRadius,"shape-rendering":"crispEdges"}).call(F.stroke,a.bordercolor).call(F.fill,a.bgcolor).style("stroke-width",a.borderwidth+"px");B.setTranslate(b,H.railInset,.5*(c.inputAreaWidth-H.railWidth)+c.currentValueTotalHeight)}
var w=a("d3"),x=a("../../plots/plots"),F=a("../color"),B=a("../drawing"),C=a("../../lib"),D=a("../../lib/svg_text_utils"),G=a("../../plot_api/plot_template").arrayEditor,H=a("./constants");a=a("../../constants/alignment");var E=a.LINE_SPACING,K=a.FROM_TL,I=a.FROM_BR;t.exports=function(b){function a(a){a._commandObserver&&(a._commandObserver.remove(),delete a._commandObserver);x.autoMargin(b,H.autoMarginIdRoot+a._index)}var c=b._fullLayout,f=p(c,b);c=c._infolayer.selectAll("g."+H.containerClassName).data(0<
f.length?[0]:[]);c.enter().append("g").classed(H.containerClassName,!0).style("cursor","ew-resize");c.exit().each(function(){w.select(this).selectAll("g."+H.groupClassName).each(a)}).remove();if(0!==f.length){c=c.selectAll("g."+H.groupClassName).data(f,g);c.enter().append("g").classed(H.groupClassName,!0);c.exit().each(a).remove();for(var l=0;l<f.length;l++)h(b,f[l]);c.each(function(a){var c=w.select(this);k(a);x.manageCommandObserver(b,a,a._visibleSteps,function(a){var f=c.data()[0];f.active!==a.index&&
(f._dragging||d(b,c,f,a.index,!1,!0))});e(b,w.select(this),a)})}}},{"../../constants/alignment":672,"../../lib":700,"../../lib/svg_text_utils":724,"../../plot_api/plot_template":738,"../../plots/plots":810,"../color":577,"../drawing":598,"./constants":661,d3:154}],664:[function(a,t,m){m=a("./constants");t.exports={moduleType:"component",name:m.name,layoutAttributes:a("./attributes"),supplyLayoutDefaults:a("./defaults"),draw:a("./draw")}},{"./attributes":660,"./constants":661,"./defaults":662,"./draw":663}],
665:[function(a,t,m){var p=a("d3"),g=a("fast-isnumeric"),h=a("../../plots/plots"),e=a("../../registry"),n=a("../../lib"),b=a("../drawing"),l=a("../color"),u=a("../../lib/svg_text_utils"),q=a("../../constants/interactions");t.exports={draw:function(a,c,k){function f(b){n.syncOrAsync([m,t],b)}function m(b){if(C){var c="";C.rotate&&(c+="rotate("+[C.rotate,B.x,B.y]+")");C.offset&&(c+="translate(0, "+C.offset+")")}else c=null;b.attr("transform",c);b.style({"font-family":I,"font-size":p.round(J,2)+"px",
fill:l.rgb(L),opacity:H*l.opacity(L),"font-weight":h.fontWeight}).attr(B).call(u.convertToTspans,a);return h.previousPromises(a)}function t(a){a=p.select(a.node().parentNode);if(F&&F.selection&&F.side&&K){a.attr("transform",null);var c=0,d={left:"right",right:"left",top:"bottom",bottom:"top"}[F.side],f=-1!==["left","top"].indexOf(F.side)?-1:1,e=g(F.pad)?F.pad:2,k=b.bBox(a.node()),h={left:0,top:0,right:G.width,bottom:G.height};h=F.maxShift||(h[F.side]-k[F.side])*("left"===F.side||"top"===F.side?-1:
1);if(0>h)c=h;else{var l=F.offsetLeft||0,r=F.offsetTop||0;k.left-=l;k.right-=l;k.top-=r;k.bottom-=r;F.selection.each(function(){var a=b.bBox(this);n.bBoxIntersect(k,a,e)&&(c=Math.max(c,f*(a[F.side]-k[d])+e))});c=Math.min(h,c)}(0<c||0>h)&&a.attr("transform","translate("+{left:[-c,0],right:[c,0],top:[0,-c],bottom:[0,c]}[F.side]+")")}}function A(){H=0;E=!0;N.text(w).on("mouseover.opacity",function(){p.select(this).transition().duration(q.SHOW_PLACEHOLDER).style("opacity",1)}).on("mouseout.opacity",function(){p.select(this).transition().duration(q.HIDE_PLACEHOLDER).style("opacity",
0)})}var y=k.propName,w=k.placeholder,x=k.traceIndex,F=k.avoid||{},B=k.attributes,C=k.transform,D=k.containerGroup,G=a._fullLayout,H=1,E=!1;k=k.propContainer.title;var K=(k&&k.text?k.text:"").trim();k=k&&k.font?k.font:{};var I=k.family,J=k.size,L=k.color,M;"title.text"===y?M="titleText":-1!==y.indexOf("axis")?M="axisTitleText":y.indexOf(!0)&&(M="colorbarTitleText");M=a._context.edits[M];""===K?H=0:K.replace(d," % ")===w.replace(d," % ")&&(H=.2,E=!0,M||(K=""));G.meta&&(K=n.templateString(K,{meta:G.meta}));
k=K||M;D||(D=n.ensureSingle(G._infolayer,"g","g-"+c));var N=D.selectAll("text").data(k?[0]:[]);N.enter().append("text");N.text(K).attr("class",c);N.exit().remove();if(!k)return D;N.call(f);if(M){if(K)N.on(".opacity",null);else A();N.call(u.makeEditable,{gd:a}).on("edit",function(b){void 0!==x?e.call("_guiRestyle",a,y,b,x):e.call("_guiRelayout",a,y,b)}).on("cancel",function(){this.text(this.attr("data-unformatted")).call(f)}).on("input",function(b){this.text(b||" ").call(u.positionText,B.x,B.y)})}N.classed("js-placeholder",
E);return D}};var d=/ [XY][0-9]* /},{"../../constants/interactions":676,"../../lib":700,"../../lib/svg_text_utils":724,"../../plots/plots":810,"../../registry":829,"../color":577,"../drawing":598,d3:154,"fast-isnumeric":221}],666:[function(a,t,m){m=a("../../plots/font_attributes");var p=a("../color/attributes"),g=a("../../lib/extend").extendFlat,h=a("../../plot_api/edit_types").overrideAll,e=a("../../plots/pad_attributes");a=a("../../plot_api/plot_template").templatedArray;var n=a("button",{visible:{valType:"boolean"},
method:{valType:"enumerated",values:["restyle","relayout","animate","update","skip"],dflt:"restyle"},args:{valType:"info_array",freeLength:!0,items:[{valType:"any"},{valType:"any"},{valType:"any"}]},label:{valType:"string",dflt:""},execute:{valType:"boolean",dflt:!0}});t.exports=h(a("updatemenu",{_arrayAttrRegexps:[/^updatemenus\[(0|[1-9][0-9]+)\]\.buttons/],visible:{valType:"boolean"},type:{valType:"enumerated",values:["dropdown","buttons"],dflt:"dropdown"},direction:{valType:"enumerated",values:["left",
"right","up","down"],dflt:"down"},active:{valType:"integer",min:-1,dflt:0},showactive:{valType:"boolean",dflt:!0},buttons:n,x:{valType:"number",min:-2,max:3,dflt:-.05},xanchor:{valType:"enumerated",values:["auto","left","center","right"],dflt:"right"},y:{valType:"number",min:-2,max:3,dflt:1},yanchor:{valType:"enumerated",values:["auto","top","middle","bottom"],dflt:"top"},pad:g(e({editType:"arraydraw"}),{}),font:m({}),bgcolor:{valType:"color"},bordercolor:{valType:"color",dflt:p.borderLine},borderwidth:{valType:"number",
min:0,dflt:1,editType:"arraydraw"}}),"arraydraw","from-root")},{"../../lib/extend":690,"../../plot_api/edit_types":731,"../../plot_api/plot_template":738,"../../plots/font_attributes":774,"../../plots/pad_attributes":809,"../color/attributes":576}],667:[function(a,t,m){t.exports={name:"updatemenus",containerClassName:"updatemenu-container",headerGroupClassName:"updatemenu-header-group",headerClassName:"updatemenu-header",headerArrowClassName:"updatemenu-header-arrow",dropdownButtonGroupClassName:"updatemenu-dropdown-button-group",
dropdownButtonClassName:"updatemenu-dropdown-button",buttonClassName:"updatemenu-button",itemRectClassName:"updatemenu-item-rect",itemTextClassName:"updatemenu-item-text",menuIndexAttrName:"updatemenu-active-index",autoMarginIdRoot:"updatemenu-",blankHeaderOpts:{label:"  "},minWidth:30,minHeight:30,textPadX:24,arrowPadX:16,rx:2,ry:2,textOffsetX:12,textOffsetY:3,arrowOffsetX:4,gapButtonHeader:5,gapButton:2,activeColor:"#F4FAFF",hoverColor:"#F4FAFF",arrowSymbol:{left:"",right:"",up:"",down:""}}},
{}],668:[function(a,t,m){function p(b,a,d){function f(c,d){return h.coerce(b,a,n,c,d)}var c=e(b,a,{name:"buttons",handleItemDefaults:g});f("visible",0<c.length)&&(f("active"),f("direction"),f("type"),f("showactive"),f("x"),f("y"),h.noneOrAll(b,a,["x","y"]),f("xanchor"),f("yanchor"),f("pad.t"),f("pad.r"),f("pad.b"),f("pad.l"),h.coerceFont(f,"font",d.font),f("bgcolor",d.paper_bgcolor),f("bordercolor"),f("borderwidth"))}function g(b,a){function d(d,c){return h.coerce(b,a,l,d,c)}d("visible","skip"===
b.method||Array.isArray(b.args))&&(d("method"),d("args"),d("label"),d("execute"))}var h=a("../../lib"),e=a("../../plots/array_container_defaults"),n=a("./attributes"),b=a("./constants").name,l=n.buttons;t.exports=function(a,g){e(a,g,{name:b,handleItemDefaults:p})}},{"../../lib":700,"../../plots/array_container_defaults":744,"./attributes":666,"./constants":667}],669:[function(a,t,m){function p(b){return b._index}function g(b,a){return+b.attr(G.menuIndexAttrName)===a._index}function h(b,a,c,d,f,g,
k,h){a.active=k;C(b.layout,G.name,a).applyUpdate("active",k);"buttons"===a.type?n(b,d,null,null,a):"dropdown"===a.type&&(f.attr(G.menuIndexAttrName,"-1"),e(b,d,f,g,a),h||n(b,d,f,g,a))}function e(b,a,d,f,e){var h=F.ensureSingle(a,"g",G.headerClassName,function(b){b.style("pointer-events","all")}),l=e._dims,r={y:e.pad.t,yPad:0,x:e.pad.l,xPad:0,index:0},q={width:l.headerWidth,height:l.headerHeight};h.call(u,e,e.buttons[e.active]||G.blankHeaderOpts,b).call(v,e,r,q);F.ensureSingle(a,"text",G.headerArrowClassName,
function(b){b.classed("user-select-none",!0).attr("text-anchor","end").call(x.font,e.font).text(G.arrowSymbol[e.direction])}).attr({x:l.headerWidth-G.arrowOffsetX+e.pad.l,y:l.headerHeight/2+G.textOffsetY+e.pad.t});h.on("click",function(){d.call(z,String(g(d,e)?-1:e._index));n(b,a,d,f,e)});h.on("mouseover",function(){h.call(c)});h.on("mouseout",function(){h.call(k,e)});x.setTranslate(a,l.lx,l.ly)}function n(a,d,e,g,r){e||(e=d,e.attr("pointer-events","all"));var n=-1!==+e.attr(G.menuIndexAttrName)||
"buttons"===r.type?r.buttons:[],q="dropdown"===r.type?G.dropdownButtonClassName:G.buttonClassName,p=e.selectAll("g."+q).data(F.filterVisible(n));n=p.enter().append("g").classed(q,!0);q=p.exit();"dropdown"===r.type?(n.attr("opacity","0").transition().attr("opacity","1"),q.transition().attr("opacity","0").remove()):q.remove();var m=0,t=0;n=r._dims;q=-1!==["up","down"].indexOf(r.direction);"dropdown"===r.type&&(q?t=n.headerHeight+G.gapButtonHeader:m=n.headerWidth+G.gapButtonHeader);"dropdown"===r.type&&
"up"===r.direction&&(t=-G.gapButtonHeader+G.gapButton-n.openHeight);"dropdown"===r.type&&"left"===r.direction&&(m=-G.gapButtonHeader+G.gapButton-n.openWidth);var w={x:n.lx+m+r.pad.l,y:n.ly+t+r.pad.t,yPad:G.gapButton,xPad:G.gapButton,index:0};m={l:w.x+r.borderwidth,t:w.y+r.borderwidth};p.each(function(b,l){var n=A.select(this);n.call(u,r,b,a).call(v,r,w);n.on("click",function(){A.event.defaultPrevented||(h(a,r,b,d,e,g,l),b.execute&&y.executeAPICommand(a,b.method,b.args),a.emit("plotly_buttonclicked",
{menu:r,button:b,active:r.active}))});n.on("mouseover",function(){n.call(c)});n.on("mouseout",function(){n.call(k,r);p.call(f,r)})});p.call(f,r);q?(m.w=Math.max(n.openWidth,n.headerWidth),m.h=w.y-m.t):(m.w=w.x-m.l,m.h=Math.max(n.openHeight,n.headerHeight));m.direction=r.direction;g&&(p.size()?b(a,d,e,g,r,m):l(g))}function b(b,a,c,d,f,e){a=f.direction;b=f._dims;f=f.active;var g,k;if("up"===a||"down"===a)for(a=k=0;a<f;a++)k+=b.heights[a]+G.gapButton;else for(a=g=0;a<f;a++)g+=b.widths[a]+G.gapButton;
d.enable(e,g,k);d.hbar&&d.hbar.attr("opacity","0").transition().attr("opacity","1");d.vbar&&d.vbar.attr("opacity","0").transition().attr("opacity","1")}function l(b){var a=!!b.hbar,c=!!b.vbar;a&&b.hbar.transition().attr("opacity","0").each("end",function(){a=!1;c||b.disable()});c&&b.vbar.transition().attr("opacity","0").each("end",function(){c=!1;a||b.disable()})}function u(b,a,c,f){b.call(q,a).call(d,a,c,f)}function q(b,a){F.ensureSingle(b,"rect",G.itemRectClassName,function(b){b.attr({rx:G.rx,ry:G.ry,
"shape-rendering":"crispEdges"})}).call(w.stroke,a.bordercolor).call(w.fill,a.bgcolor).style("stroke-width",a.borderwidth+"px")}function d(b,a,c,d){b=F.ensureSingle(b,"text",G.itemTextClassName,function(b){b.classed("user-select-none",!0).attr({"text-anchor":"start","data-notex":1})});c=c.label;var f=d._fullLayout.meta;f&&(c=F.templateString(c,{meta:f}));b.call(x.font,a.font).text(c).call(B.convertToTspans,d)}function f(b,a){var c=a.active;b.each(function(b,d){b=A.select(this);d===c&&a.showactive&&
b.select("rect."+G.itemRectClassName).call(w.fill,G.activeColor)})}function c(b){b.select("rect."+G.itemRectClassName).call(w.fill,G.hoverColor)}function k(b,a){b.select("rect."+G.itemRectClassName).call(w.fill,a.bgcolor)}function r(b,a){var c=a._dims={width1:0,height1:0,heights:[],widths:[],totalWidth:0,totalHeight:0,openWidth:0,openHeight:0,lx:0,ly:0},d=x.tester.selectAll("g."+G.dropdownButtonClassName).data(F.filterVisible(a.buttons));d.enter().append("g").classed(G.dropdownButtonClassName,!0);
var f=-1!==["up","down"].indexOf(a.direction);d.each(function(d,e){var g=A.select(this);g.call(u,a,d,b);g=g.select("."+G.itemTextClassName);d=g.node()&&x.bBox(g.node()).width;d=Math.max(d+G.textPadX,G.minWidth);var k=a.font.size*D;g=B.lineCount(g);g=Math.max(k*g,G.minHeight)+G.textOffsetY;g=Math.ceil(g);d=Math.ceil(d);c.widths[e]=d;c.heights[e]=g;c.height1=Math.max(c.height1,g);c.width1=Math.max(c.width1,d);f?(c.totalWidth=Math.max(c.totalWidth,d),c.openWidth=c.totalWidth,c.totalHeight+=g+G.gapButton,
c.openHeight+=g+G.gapButton):(c.totalWidth+=d+G.gapButton,c.openWidth+=d+G.gapButton,c.totalHeight=Math.max(c.totalHeight,g),c.openHeight=c.totalHeight)});f?c.totalHeight-=G.gapButton:c.totalWidth-=G.gapButton;c.headerWidth=c.width1+G.arrowPadX;c.headerHeight=c.height1;"dropdown"===a.type&&(f?(c.width1+=G.arrowPadX,c.totalHeight=c.height1):c.totalWidth=c.width1,c.totalWidth+=G.arrowPadX);d.remove();d=c.totalWidth+a.pad.l+a.pad.r;var e=c.totalHeight+a.pad.t+a.pad.b,g=b._fullLayout._size;c.lx=g.l+g.w*
a.x;c.ly=g.t+g.h*(1-a.y);g="left";F.isRightAnchor(a)&&(c.lx-=d,g="right");F.isCenterAnchor(a)&&(c.lx-=d/2,g="center");var k="top";F.isBottomAnchor(a)&&(c.ly-=e,k="bottom");F.isMiddleAnchor(a)&&(c.ly-=e/2,k="middle");c.totalWidth=Math.ceil(c.totalWidth);c.totalHeight=Math.ceil(c.totalHeight);c.lx=Math.round(c.lx);c.ly=Math.round(c.ly);y.autoMargin(b,G.autoMarginIdRoot+a._index,{x:a.x,y:a.y,l:d*({right:1,center:.5}[g]||0),r:d*({left:1,center:.5}[g]||0),b:e*({top:1,middle:.5}[k]||0),t:e*({bottom:1,middle:.5}[k]||
0)})}function v(b,a,c,d){d=d||{};var f=b.select("."+G.itemRectClassName),e=b.select("."+G.itemTextClassName),g=a.borderwidth,k=c.index,h=a._dims;x.setTranslate(b,g+c.x,g+c.y);b=-1!==["up","down"].indexOf(a.direction);g=d.height||(b?h.heights[k]:h.height1);f.attr({x:0,y:0,width:d.width||(b?h.width1:h.widths[k]),height:g});a=a.font.size*D;d=B.lineCount(e);B.positionText(e,G.textOffsetX,g/2-(d-1)*a/2+G.textOffsetY);b?c.y+=h.heights[k]+c.yPad:c.x+=h.widths[k]+c.xPad;c.index++}function z(b,a){b.attr(G.menuIndexAttrName,
a||"-1").selectAll("g."+G.dropdownButtonClassName).remove()}var A=a("d3"),y=a("../../plots/plots"),w=a("../color"),x=a("../drawing"),F=a("../../lib"),B=a("../../lib/svg_text_utils"),C=a("../../plot_api/plot_template").arrayEditor,D=a("../../constants/alignment").LINE_SPACING,G=a("./constants"),H=a("./scrollbox");t.exports=function(b){function a(a){y.autoMargin(b,G.autoMarginIdRoot+a._index)}var c=b._fullLayout,d=F.filterVisible(c[G.name]),f=c._menulayer.selectAll("g."+G.containerClassName).data(0<
d.length?[0]:[]);f.enter().append("g").classed(G.containerClassName,!0).style("cursor","pointer");f.exit().each(function(){A.select(this).selectAll("g."+G.headerGroupClassName).each(a)}).remove();if(0!==d.length){var k=f.selectAll("g."+G.headerGroupClassName).data(d,p);k.enter().append("g").classed(G.headerGroupClassName,!0);var l=F.ensureSingle(f,"g",G.dropdownButtonGroupClassName,function(b){b.style("pointer-events","all")});for(f=0;f<d.length;f++)r(b,d[f]);var q=new H(b,l,"updatemenus"+c._uid);
k.enter().size()&&(l.node().parentNode.appendChild(l.node()),l.call(z));k.exit().each(function(b){l.call(z);a(b)}).remove();k.each(function(a){var c=A.select(this),d="dropdown"===a.type?l:null;y.manageCommandObserver(b,a,a.buttons,function(f){h(b,a,a.buttons[f.index],c,d,q,f.index,!0)});"dropdown"===a.type?(e(b,c,l,q,a),g(l,a)&&n(b,c,l,q,a)):n(b,c,null,null,a)})}}},{"../../constants/alignment":672,"../../lib":700,"../../lib/svg_text_utils":724,"../../plot_api/plot_template":738,"../../plots/plots":810,
"../color":577,"../drawing":598,"./constants":667,"./scrollbox":671,d3:154}],670:[function(a,t,m){arguments[4][664][0].apply(m,arguments)},{"./attributes":666,"./constants":667,"./defaults":668,"./draw":669,dup:664}],671:[function(a,t,m){function p(b,a,e){this.gd=b;this.container=a;this.id=e;this.vbar=this.hbar=this.translateY=this.translateX=this.position=null;this.bg=this.container.selectAll("rect.scrollbox-bg").data([0]);this.bg.exit().on(".drag",null).on("wheel",null).remove();this.bg.enter().append("rect").classed("scrollbox-bg",
!0).style("pointer-events","all").attr({opacity:0,x:0,y:0,width:0,height:0})}t.exports=p;var g=a("d3"),h=a("../color"),e=a("../drawing"),n=a("../../lib");p.barWidth=2;p.barLength=20;p.barRadius=2;p.barPad=1;p.barColor="#808BA4";p.prototype.enable=function(b,a,n){var l=this.gd._fullLayout,d=l.width,f=l.height;this.position=b;b=this.position.l;var c=this.position.w,k=this.position.t,r=this.position.h,u=this.position.direction,m="down"===u,t="left"===u,y="up"===u,w=c,x=r;m||t||"right"===u||y||(this.position.direction=
"down",m=!0);if(m||y){var F=b;var B=F+w;m?(y=k,u=Math.min(y+x,f)):(u=k+x,y=Math.max(u-x,0));x=u-y}else y=k,u=y+x,t?(B=b+w,F=Math.max(B-w,0)):(F=b,B=Math.min(F+w,d)),w=B-F;this._box={l:F,t:y,w:w,h:x};m=c>w;var C=p.barLength+2*p.barPad;t=p.barWidth+2*p.barPad;var D=k+r;D+t>f&&(D=f-t);f=this.container.selectAll("rect.scrollbar-horizontal").data(m?[0]:[]);f.exit().on(".drag",null).remove();f.enter().append("rect").classed("scrollbar-horizontal",!0).call(h.fill,p.barColor);m?(this.hbar=f.attr({rx:p.barRadius,
ry:p.barRadius,x:b,y:D,width:C,height:t}),this._hbarXMin=b+C/2,this._hbarTranslateMax=w-C):(delete this.hbar,delete this._hbarXMin,delete this._hbarTranslateMax);f=r>x;w=p.barWidth+2*p.barPad;C=p.barLength+2*p.barPad;D=b+c;D+w>d&&(D=d-w);d=this.container.selectAll("rect.scrollbar-vertical").data(f?[0]:[]);d.exit().on(".drag",null).remove();d.enter().append("rect").classed("scrollbar-vertical",!0).call(h.fill,p.barColor);f?(this.vbar=d.attr({rx:p.barRadius,ry:p.barRadius,x:D,y:k,width:w,height:C}),
this._vbarYMin=k+C/2,this._vbarTranslateMax=x-C):(delete this.vbar,delete this._vbarYMin,delete this._vbarTranslateMax);d=this.id;x=F-.5;B=f?B+w+.5:B+.5;y-=.5;u=m?u+t+.5:u+.5;l=l._topdefs.selectAll("#"+d).data(m||f?[0]:[]);l.exit().remove();l.enter().append("clipPath").attr("id",d).append("rect");m||f?(this._clipRect=l.select("rect").attr({x:Math.floor(x),y:Math.floor(y),width:Math.ceil(B)-Math.floor(x),height:Math.ceil(u)-Math.floor(y)}),this.container.call(e.setClipUrl,d,this.gd),this.bg.attr({x:b,
y:k,width:c,height:r})):(this.bg.attr({width:0,height:0}),this.container.on("wheel",null).on(".drag",null).call(e.setClipUrl,null),delete this._clipRect);if(m||f)l=g.behavior.drag().on("dragstart",function(){g.event.sourceEvent.preventDefault()}).on("drag",this._onBoxDrag.bind(this)),this.container.on("wheel",null).on("wheel",this._onBoxWheel.bind(this)).on(".drag",null).call(l),l=g.behavior.drag().on("dragstart",function(){g.event.sourceEvent.preventDefault();g.event.sourceEvent.stopPropagation()}).on("drag",
this._onBarDrag.bind(this)),m&&this.hbar.on(".drag",null).call(l),f&&this.vbar.on(".drag",null).call(l);this.setTranslate(a,n)};p.prototype.disable=function(){if(this.hbar||this.vbar)this.bg.attr({width:0,height:0}),this.container.on("wheel",null).on(".drag",null).call(e.setClipUrl,null),delete this._clipRect;this.hbar&&(this.hbar.on(".drag",null),this.hbar.remove(),delete this.hbar,delete this._hbarXMin,delete this._hbarTranslateMax);this.vbar&&(this.vbar.on(".drag",null),this.vbar.remove(),delete this.vbar,
delete this._vbarYMin,delete this._vbarTranslateMax)};p.prototype._onBoxDrag=function(){var b=this.translateX,a=this.translateY;this.hbar&&(b-=g.event.dx);this.vbar&&(a-=g.event.dy);this.setTranslate(b,a)};p.prototype._onBoxWheel=function(){var b=this.translateX,a=this.translateY;this.hbar&&(b+=g.event.deltaY);this.vbar&&(a+=g.event.deltaY);this.setTranslate(b,a)};p.prototype._onBarDrag=function(){var b=this.translateX,a=this.translateY;if(this.hbar){b+=this._hbarXMin;var e=b+this._hbarTranslateMax;
b=(n.constrain(g.event.x,b,e)-b)/(e-b)*(this.position.w-this._box.w)}this.vbar&&(a+=this._vbarYMin,e=a+this._vbarTranslateMax,a=(n.constrain(g.event.y,a,e)-a)/(e-a)*(this.position.h-this._box.h));this.setTranslate(b,a)};p.prototype.setTranslate=function(b,a){var g=this.position.w-this._box.w,h=this.position.h-this._box.h;b=n.constrain(b||0,0,g);a=n.constrain(a||0,0,h);this.translateX=b;this.translateY=a;this.container.call(e.setTranslate,this._box.l-this.position.l-b,this._box.t-this.position.t-a);
this._clipRect&&this._clipRect.attr({x:Math.floor(this.position.l+b-.5),y:Math.floor(this.position.t+a-.5)});this.hbar&&this.hbar.call(e.setTranslate,b+b/g*this._hbarTranslateMax,a);this.vbar&&this.vbar.call(e.setTranslate,b,a+a/h*this._vbarTranslateMax)}},{"../../lib":700,"../color":577,"../drawing":598,d3:154}],672:[function(a,t,m){t.exports={FROM_BL:{left:0,center:.5,right:1,bottom:0,middle:.5,top:1},FROM_TL:{left:0,center:.5,right:1,bottom:1,middle:.5,top:0},FROM_BR:{left:1,center:.5,right:0,
bottom:0,middle:.5,top:1},LINE_SPACING:1.3,CAP_SHIFT:.7,MID_SHIFT:.35,OPPOSITE_SIDE:{left:"right",right:"left",top:"bottom",bottom:"top"}}},{}],673:[function(a,t,m){t.exports={COMPARISON_OPS:"\x3d !\x3d \x3c \x3e\x3d \x3e \x3c\x3d".split(" "),COMPARISON_OPS2:["\x3d","\x3c","\x3e\x3d","\x3e","\x3c\x3d"],INTERVAL_OPS:"[] () [) (] ][ )( ]( )[".split(" "),SET_OPS:["{}","}{"],CONSTRAINT_REDUCTION:{"\x3d":"\x3d","\x3c":"\x3c","\x3c\x3d":"\x3c","\x3e":"\x3e","\x3e\x3d":"\x3e","[]":"[]","()":"[]","[)":"[]",
"(]":"[]","][":"][",")(":"][","](":"][",")[":"]["}}},{}],674:[function(a,t,m){t.exports={solid:[[],0],dot:[[.5,1],200],dash:[[.5,1],50],longdash:[[.5,1],10],dashdot:[[.5,.625,.875,1],50],longdashdot:[[.5,.7,.8,1],10]}},{}],675:[function(a,t,m){t.exports={circle:"","circle-open":"",square:"","square-open":"",diamond:"","diamond-open":"",cross:"+",x:""}},{}],676:[function(a,t,m){t.exports={SHOW_PLACEHOLDER:100,HIDE_PLACEHOLDER:1E3,DBLCLICKDELAY:300,DESELECTDIM:.2}},{}],677:[function(a,t,m){t.exports=
{BADNUM:void 0,FP_SAFE:Number.MAX_VALUE/1E4,ONEAVGYEAR:315576E5,ONEAVGMONTH:26298E5,ONEDAY:864E5,ONEHOUR:36E5,ONEMIN:6E4,ONESEC:1E3,EPOCHJD:2440587.5,ALMOST_EQUAL:.999999,LOG_CLIP:10,MINUS_SIGN:""}},{}],678:[function(a,t,m){m.xmlns="http://www.w3.org/2000/xmlns/";m.svg="http://www.w3.org/2000/svg";m.xlink="http://www.w3.org/1999/xlink";m.svgAttrs={xmlns:m.svg,"xmlns:xlink":m.xlink}},{}],679:[function(a,t,m){m.version="1.46.1";a("es6-promise").polyfill();a("../build/plotcss");a("./fonts/mathjax_config")();
t=a("./registry");t=m.register=t.register;for(var p=a("./plot_api"),g=Object.keys(p),h=0;h<g.length;h++){var e=g[h];"_"!==e.charAt(0)&&(m[e]=p[e]);t({moduleType:"apiMethod",name:e,fn:p[e]})}t(a("./traces/scatter"));t([a("./components/fx"),a("./components/legend"),a("./components/annotations"),a("./components/annotations3d"),a("./components/shapes"),a("./components/images"),a("./components/updatemenus"),a("./components/sliders"),a("./components/rangeslider"),a("./components/rangeselector"),a("./components/grid"),
a("./components/errorbars"),a("./components/colorscale")]);t([a("./locale-en"),a("./locale-en-us")]);m.Icons=a("../build/ploticon");m.Plots=a("./plots/plots");m.Fx=a("./components/fx");m.Snapshot=a("./snapshot");m.PlotSchema=a("./plot_api/plot_schema");m.Queue=a("./lib/queue");m.d3=a("d3")},{"../build/plotcss":1,"../build/ploticon":2,"./components/annotations":568,"./components/annotations3d":573,"./components/colorscale":589,"./components/errorbars":604,"./components/fx":616,"./components/grid":620,
"./components/images":625,"./components/legend":633,"./components/rangeselector":644,"./components/rangeslider":651,"./components/shapes":659,"./components/sliders":664,"./components/updatemenus":670,"./fonts/mathjax_config":680,"./lib/queue":715,"./locale-en":729,"./locale-en-us":728,"./plot_api":733,"./plot_api/plot_schema":737,"./plots/plots":810,"./registry":829,"./snapshot":834,"./traces/scatter":1063,d3:154,"es6-promise":210}],680:[function(a,t,m){t.exports=function(){"undefined"!==typeof MathJax&&
"local"!==(window.PlotlyConfig||{}).MathJaxConfig&&(MathJax.Hub.Config({messageStyle:"none",skipStartupTypeset:!0,displayAlign:"left",tex2jax:{inlineMath:[["$","$"],["\\(","\\)"]]}}),MathJax.Hub.Configured())}},{}],681:[function(a,t,m){m.isLeftAnchor=function(a){return"left"===a.xanchor||"auto"===a.xanchor&&a.x<=1/3};m.isCenterAnchor=function(a){return"center"===a.xanchor||"auto"===a.xanchor&&a.x>1/3&&a.x<2/3};m.isRightAnchor=function(a){return"right"===a.xanchor||"auto"===a.xanchor&&a.x>=2/3};m.isTopAnchor=
function(a){return"top"===a.yanchor||"auto"===a.yanchor&&a.y>=2/3};m.isMiddleAnchor=function(a){return"middle"===a.yanchor||"auto"===a.yanchor&&a.y>1/3&&a.y<2/3};m.isBottomAnchor=function(a){return"bottom"===a.yanchor||"auto"===a.yanchor&&a.y<=1/3}},{}],682:[function(a,t,m){function p(b){return Math.abs(b[1]-b[0])>u-1E-14}function g(a,d){return b(d-a,u)}function h(b,a){if(p(a))return!0;if(a[0]<a[1]){var d=a[0];a=a[1]}else d=a[1],a=a[0];d=n(d,u);a=n(a,u);d>a&&(a+=u);b=n(b,u);var c=b+u;return b>=d&&
b<=a||c>=d&&c<=a}function e(b,a,f,c,e,g,h){function d(b,a){return[b*Math.cos(a)+e,g-b*Math.sin(a)]}function k(b,a,c){return"A"+[b,b]+" "+[0,m,c]+" "+d(b,a)}e=e||0;g=g||0;var r=p([f,c]);if(r){var n=0;var q=l;f=u}else f<c?(n=f,f=c):n=c;b<a?(c=b,b=a):c=a;var m=Math.abs(f-n)<=l?0:1;r?r=null===c?"M"+d(b,n)+k(b,q,0)+k(b,f,0)+"Z":"M"+d(c,n)+k(c,q,0)+k(c,f,0)+"ZM"+d(b,n)+k(b,q,1)+k(b,f,1)+"Z":null===c?(r="M"+d(b,n)+k(b,f,0),h&&(r+="L0,0Z")):r="M"+d(c,n)+"L"+d(b,n)+k(b,f,0)+"L"+d(c,f)+k(c,n,1)+"Z";return r}
a=a("./mod");var n=a.mod,b=a.modHalf,l=Math.PI,u=2*l;t.exports={deg2rad:function(b){return b/180*l},rad2deg:function(b){return b/l*180},angleDelta:g,angleDist:function(b,a){return Math.abs(g(b,a))},isFullCircle:p,isAngleInsideSector:h,isPtInsideSector:function(b,a,f,c){if(!h(a,c))return!1;f[0]<f[1]?(a=f[0],f=f[1]):(a=f[1],f=f[0]);return b>=a&&b<=f},pathArc:function(b,a,f,c,g){return e(null,b,a,f,c,g,0)},pathSector:function(b,a,f,c,g){return e(null,b,a,f,c,g,1)},pathAnnulus:function(b,a,f,c,g,h){return e(b,
a,f,c,g,h,1)}}},{"./mod":707}],683:[function(a,t,m){function p(a){return n.isView(a)&&!(a instanceof b)}function g(b){return e(b)||p(b)}function h(b,a,e){if(g(b)){if(g(b[0])){for(var d=0;d<b.length;d++)e=a(e,b[d].length);return e}return b.length}return 0}var e=Array.isArray,n="undefined"!==typeof ArrayBuffer&&ArrayBuffer.isView?ArrayBuffer:{isView:function(){return!1}},b="undefined"===typeof DataView?function(){}:DataView;m.isTypedArray=p;m.isArrayOrTypedArray=g;m.isArray1D=function(b){return!g(b[0])};
m.ensureArray=function(b,a){e(b)||(b=[]);b.length=a;return b};m.concat=function(){var b=[],a=!0,g=0,d,f;for(d=0;d<arguments.length;d++){var c=arguments[d];if(f=c.length){if(k)b.push(c);else{var k=c;var h=f}if(e(c))var n=!1;else a=!1,g?n!==c.constructor&&(n=!1):n=c.constructor;g+=f}}if(!g)return[];if(!b.length)return k;if(a)return k.concat.apply(k,b);if(n){a=new n(g);a.set(k);for(d=0;d<b.length;d++)c=b[d],a.set(c,h),h+=c.length;return a}a=Array(g);for(g=0;g<k.length;g++)a[g]=k[g];for(d=0;d<b.length;d++){c=
b[d];for(g=0;g<c.length;g++)a[h+g]=c[g];h+=g}return a};m.maxRowLength=function(b){return h(b,Math.max,0)};m.minRowLength=function(b){return h(b,Math.min,Infinity)}},{}],684:[function(a,t,m){var p=a("fast-isnumeric"),g=a("../constants/numerical").BADNUM,h=/^['"%,$#\s']+|[, ]|['"%,$#\s']+$/g;t.exports=function(a){"string"===typeof a&&(a=a.replace(h,""));return p(a)?Number(a):g}},{"../constants/numerical":677,"fast-isnumeric":221}],685:[function(a,t,m){t.exports=function(a){a=a._fullLayout;a._glcanvas&&
a._glcanvas.size()&&a._glcanvas.each(function(a){a.regl&&a.regl.clear({color:!0,depth:!0})})}},{}],686:[function(a,t,m){t.exports=function(a){a._responsiveChartHandler&&(window.removeEventListener("resize",a._responsiveChartHandler),delete a._responsiveChartHandler)}},{}],687:[function(a,t,m){function p(b,a){var c=m.valObjectMeta[a.valType];if(a.arrayOk&&d(b))return!0;if(c.validateFunction)return c.validateFunction(b,a);var f={},e=f;c.coerceFunction(b,{set:function(b){e=b}},f,a);return e!==f}var g=
a("fast-isnumeric"),h=a("tinycolor2"),e=a("../plots/attributes"),n=a("../components/colorscale/scales"),b=a("../constants/interactions").DESELECTDIM,l=a("./nested_property"),u=a("./regex").counter,q=a("./mod").modHalf,d=a("./array").isArrayOrTypedArray;m.valObjectMeta={data_array:{coerceFunction:function(b,a,e){d(b)?a.set(b):void 0!==e&&a.set(e)}},enumerated:{coerceFunction:function(b,a,d,e){e.coerceNumber&&(b=+b);-1===e.values.indexOf(b)?a.set(d):a.set(b)},validateFunction:function(b,a){a.coerceNumber&&
(b=+b);a=a.values;for(var c=0;c<a.length;c++){var d=String(a[c]);if("/"===d.charAt(0)&&"/"===d.charAt(d.length-1)){if((new RegExp(d.substr(1,d.length-2))).test(b))return!0}else if(b===a[c])return!0}return!1}},"boolean":{coerceFunction:function(b,a,d){!0===b||!1===b?a.set(b):a.set(d)}},number:{coerceFunction:function(b,a,d,e){!g(b)||void 0!==e.min&&b<e.min||void 0!==e.max&&b>e.max?a.set(d):a.set(+b)}},integer:{coerceFunction:function(b,a,d,e){b%1||!g(b)||void 0!==e.min&&b<e.min||void 0!==e.max&&b>
e.max?a.set(d):a.set(+b)}},string:{coerceFunction:function(b,a,d,e){"string"!==typeof b?!0===e.strict||"number"!==typeof b?a.set(d):a.set(String(b)):e.noBlank&&!b?a.set(d):a.set(b)}},color:{coerceFunction:function(b,a,d){h(b).isValid()?a.set(b):a.set(d)}},colorlist:{coerceFunction:function(b,a,d){function c(b){return h(b).isValid()}Array.isArray(b)&&b.length?b.every(c)?a.set(b):a.set(d):a.set(d)}},colorscale:{coerceFunction:function(b,a,d){a.set(n.get(b,d))}},angle:{coerceFunction:function(b,a,d){"auto"===
b?a.set("auto"):g(b)?a.set(q(+b,360)):a.set(d)}},subplotid:{coerceFunction:function(b,a,d,e){e=e.regex||u(d);"string"===typeof b&&e.test(b)?a.set(b):a.set(d)},validateFunction:function(b,a){a=a.dflt;return b===a?!0:"string"!==typeof b?!1:u(a).test(b)?!0:!1}},flaglist:{coerceFunction:function(b,a,d,e){if("string"!==typeof b)a.set(d);else if(-1!==(e.extras||[]).indexOf(b))a.set(b);else{b=b.split("+");for(var c=0;c<b.length;){var f=b[c];-1===e.flags.indexOf(f)||b.indexOf(f)<c?b.splice(c,1):c++}b.length?
a.set(b.join("+")):a.set(d)}}},any:{coerceFunction:function(b,a,d){void 0===b?a.set(d):a.set(b)}},info_array:{coerceFunction:function(b,a,d,e){function c(b,a,c){var d;void 0===c&&(c=a.dflt);m.valObjectMeta[a.valType].coerceFunction(b,{set:function(b){d=b}},c,a);return d}var f=2===e.dimensions||"1-2"===e.dimensions&&Array.isArray(b)&&Array.isArray(b[0]);if(Array.isArray(b)){e=e.items;var g=[],k=Array.isArray(e),h=k&&f&&Array.isArray(e[0]);h=f&&k&&!h;var l=k&&!h?e.length:b.length,r;d=Array.isArray(d)?
d:[];if(f)for(f=0;f<l;f++){g[f]=[];var n=Array.isArray(b[f])?b[f]:[];var q=h?e.length:k?e[f].length:n.length;for(r=0;r<q;r++){var u=h?e[r]:k?e[f][r]:e;u=c(n[r],u,(d[f]||[])[r]);void 0!==u&&(g[f][r]=u)}}else for(f=0;f<l;f++)u=c(b[f],k?e[f]:e,d[f]),void 0!==u&&(g[f]=u);a.set(g)}else a.set(d)},validateFunction:function(b,a){if(!Array.isArray(b))return!1;var c=a.items,d=Array.isArray(c),e=2===a.dimensions;if(!a.freeLength&&b.length!==c.length)return!1;for(var f=0;f<b.length;f++)if(e){if(!Array.isArray(b[f])||
!a.freeLength&&b[f].length!==c[f].length)return!1;for(var g=0;g<b[f].length;g++)if(!p(b[f][g],d?c[f][g]:c))return!1}else if(!p(b[f],d?c[f]:c))return!1;return!0}}};m.coerce=function(b,a,e,g,h){e=l(e,g).get();var c=l(b,g);b=l(a,g);c=c.get();a=a._template;void 0===c&&a&&(c=l(a,g).get(),a=0);void 0===h&&(h=e.dflt);if(e.arrayOk&&d(c))return b.set(c),c;var f=m.valObjectMeta[e.valType].coerceFunction;f(c,b,h,e);var k=b.get();a&&k===h&&!p(c,e)&&(c=l(a,g).get(),f(c,b,h,e),k=b.get());return k};m.coerce2=function(b,
a,d,e,g){var c=l(b,e);b=m.coerce(b,a,d,e,g);c=c.get();return void 0!==c&&null!==c?b:!1};m.coerceFont=function(b,a,d){var c={};d=d||{};c.family=b(a+".family",d.family);c.size=b(a+".size",d.size);c.color=b(a+".color",d.color);return c};m.coerceHoverinfo=function(b,a,d){var c=a._module.attributes;c=c.hoverinfo?c:e;var f=c.hoverinfo;if(1===d._dataLength){d="all"===f.dflt?f.flags.slice():f.dflt.split("+");d.splice(d.indexOf("name"),1);var g=d.join("+")}return m.coerce(b,a,c,"hoverinfo",g)};m.coerceSelectionMarkerOpacity=
function(a,c){if(a.marker){var e=a.marker.opacity;if(void 0!==e){if(!d(e)&&!a.selected&&!a.unselected){var f=e;var g=b*e}c("selected.marker.opacity",f);c("unselected.marker.opacity",g)}}};m.validate=p},{"../components/colorscale/scales":592,"../constants/interactions":676,"../plots/attributes":745,"./array":683,"./mod":707,"./nested_property":708,"./regex":716,"fast-isnumeric":221,tinycolor2:521}],688:[function(a,t,m){function p(b){return b&&v.componentsRegistry.calendars&&"string"===typeof b&&"gregorian"!==
b}function g(b,a){return String(b+Math.pow(10,a)).substr(1)}function h(b,a,c,d,e){if(a||c||d||e)if(b+=" "+g(a,2)+":"+g(c,2),d||e)if(b+=":"+g(d,2),e){for(a=4;0===e%10;)--a,e/=10;b+="."+g(e,a)}return b}function e(b,a,c,d){b=b.replace(G,function(b){b=Math.min(+b.charAt(1)||6,6);return(a/1E3%1+2).toFixed(b).substr(2).replace(/0+$/,"")||"0"});var e=new Date(Math.floor(a+.05));if(p(d))try{b=v.getComponentMethod("calendars","worldCalFmt")(b,a,d)}catch(N){return"Invalid"}return c(b)(e)}var n=a("d3"),b=a("fast-isnumeric"),
l=a("./loggers"),u=a("./mod").mod;t=a("../constants/numerical");var q=t.BADNUM,d=t.ONEDAY,f=t.ONEHOUR,c=t.ONEMIN,k=t.ONESEC,r=t.EPOCHJD,v=a("../registry"),z=n.time.format.utc,A=/^\s*(-?\d\d\d\d|\d\d)(-(\d?\d)(-(\d?\d)([ Tt]([01]?\d|2[0-3])(:([0-5]\d)(:([0-5]\d(\.\d+)?))?(Z|z|[+\-]\d\d:?\d\d)?)?)?)?)?\s*$/m,y=/^\s*(-?\d\d\d\d|\d\d)(-(\d?\di?)(-(\d?\d)([ Tt]([01]?\d|2[0-3])(:([0-5]\d)(:([0-5]\d(\.\d+)?))?(Z|z|[+\-]\d\d:?\d\d)?)?)?)?)?\s*$/m,w=(new Date).getFullYear()-70;m.dateTick0=function(b,a){return p(b)?
a?v.getComponentMethod("calendars","CANONICAL_SUNDAY")[b]:v.getComponentMethod("calendars","CANONICAL_TICK")[b]:a?"2000-01-02":"2000-01-01"};m.dfltRange=function(b){return p(b)?v.getComponentMethod("calendars","DFLTRANGE")[b]:["2000-01-01","2001-01-01"]};m.isJSDate=function(b){return"object"===typeof b&&null!==b&&"function"===typeof b.getTime};m.dateTime2ms=function(b,a){if(m.isJSDate(b)){a=b.getTimezoneOffset()*c;var e=(b.getUTCMinutes()-b.getMinutes())*c+(b.getUTCSeconds()-b.getSeconds())*k+(b.getUTCMilliseconds()-
b.getMilliseconds());if(e){var g=3*c;a=a-g/2+u(e-a+g/2,g)}b=Number(b)-a;return b>=x&&b<=F?b:q}if("string"!==typeof b&&"number"!==typeof b)return q;b=String(b);e=p(a);var h=b.charAt(0);!e||"G"!==h&&"g"!==h||(b=b.substr(1),a="");h=e&&"chinese"===a.substr(0,7);var l=b.match(h?y:A);if(!l)return q;b=l[1];var n=l[3]||"1",t=Number(l[5]||1),z=Number(l[7]||0),E=Number(l[9]||0);l=Number(l[11]||0);if(e){if(2===b.length)return q;b=Number(b);try{var B=v.getComponentMethod("calendars","getCal")(a);if(h){var I=
"i"===n.charAt(n.length-1);n=parseInt(n,10);g=B.newDate(b,B.toMonthIndex(b,n,I),t)}else g=B.newDate(b,Number(n),t)}catch(da){return q}return g?(g.toJD()-r)*d+z*f+E*c+l*k:q}b=2===b.length?(Number(b)+2E3-w)%100+w:Number(b);--n;a=new Date(Date.UTC(2E3,n,t,z,E));a.setUTCFullYear(b);return a.getUTCMonth()!==n||a.getUTCDate()!==t?q:a.getTime()+l*k};var x=m.MIN_MS=m.dateTime2ms("-9999");var F=m.MAX_MS=m.dateTime2ms("9999-12-31 23:59:59.9999");m.isDateTime=function(b,a){return m.dateTime2ms(b,a)!==q};var B=
90*d,C=3*f,D=5*c;m.ms2DateTime=function(b,a,e){if("number"!==typeof b||!(b>=x&&b<=F))return q;a||(a=0);var g=Math.floor(10*u(b+.05,1)),l=Math.round(b-g/10);if(p(e)){var n=Math.floor(l/d)+r;b=Math.floor(u(b,d));try{var m=v.getComponentMethod("calendars","getCal")(e).fromJD(n).formatDate("yyyy-mm-dd")}catch(R){m=z("G%Y-%m-%d")(new Date(l))}if("-"===m.charAt(0))for(;11>m.length;)m="-0"+m.substr(1);else for(;10>m.length;)m="0"+m;e=a<B?Math.floor(b/f):0;l=a<B?Math.floor(b%f/c):0;n=a<C?Math.floor(b%c/k):
0;a=a<D?b%k*10+g:0}else b=new Date(l),m=z("%Y-%m-%d")(b),e=a<B?b.getUTCHours():0,l=a<B?b.getUTCMinutes():0,n=a<C?b.getUTCSeconds():0,a=a<D?10*b.getUTCMilliseconds()+g:0;return h(m,e,l,n,a)};m.ms2DateTimeLocal=function(b){if(!(b>=x+d&&b<=F-d))return q;var a=Math.floor(10*u(b+.05,1)),c=new Date(Math.round(b-a/10));b=n.time.format("%Y-%m-%d")(c);var e=c.getHours(),f=c.getMinutes(),g=c.getSeconds();a=10*c.getUTCMilliseconds()+a;return h(b,e,f,g,a)};m.cleanDate=function(b,a,c){if(b===q)return a;if(m.isJSDate(b)||
"number"===typeof b&&isFinite(b)){if(p(c))return l.error("JS Dates and milliseconds are incompatible with world calendars",b),a;b=m.ms2DateTimeLocal(+b);if(!b&&void 0!==a)return a}else if(!m.isDateTime(b,c))return l.error("unrecognized date",b),a;return b};var G=/%\d?f/g,H=[59,59.9,59.99,59.999,59.9999];m.formatDate=function(a,h,l,n,r,q){r=p(r)&&r;if(!h)if("y"===l)h=q.year;else if("m"===l)h=q.month;else if("d"===l)h=q.dayMonth+"\n"+q.year;else{h=l;l=u(a+.05,d);l=g(Math.floor(l/f),2)+":"+g(u(Math.floor(l/
c),60),2);if("M"!==h){b(h)||(h=0);var m=(100+Math.min(u(a/k,60),H[h])).toFixed(h).substr(1);0<h&&(m=m.replace(/0+$/,"").replace(/[\.]$/,""));l+=":"+m}return l+"\n"+e(q.dayMonthYear,a,n,r)}return e(h,a,n,r)};var E=3*d;m.incrementMonth=function(b,a,c){c=p(c)&&c;var e=u(b,d);b=Math.round(b-e);if(c)try{var f=Math.round(b/d)+r,g=v.getComponentMethod("calendars","getCal")(c),k=g.fromJD(f);a%12?g.add(k,a,"m"):g.add(k,a/12,"y");return(k.toJD()-r)*d+e}catch(R){l.error("invalid ms "+b+" in calendar "+c)}b=
new Date(b+E);return b.setUTCMonth(b.getUTCMonth()+a)+e-E};m.findExactDates=function(a,c){for(var e=0,f=0,g=0,k=0,h,l=p(c)&&v.getComponentMethod("calendars","getCal")(c),n=0;n<a.length;n++)if(c=a[n],!b(c))k++;else if(!(c%d))if(l)try{h=l.fromJD(c/d+r),1===h.day()?1===h.month()?e++:f++:g++}catch(P){}else h=new Date(c),1===h.getUTCDate()?0===h.getUTCMonth()?e++:f++:g++;f+=e;a=a.length-k;return{exactYears:e/a,exactMonths:f/a,exactDays:(g+f)/a}}},{"../constants/numerical":677,"../registry":829,"./loggers":704,
"./mod":707,d3:154,"fast-isnumeric":221}],689:[function(a,t,m){var p=a("events").EventEmitter;t.exports={init:function(a){if(a._ev instanceof p)return a;var g=new p,e=new p;a._ev=g;a._internalEv=e;a.on=g.on.bind(g);a.once=g.once.bind(g);a.removeListener=g.removeListener.bind(g);a.removeAllListeners=g.removeAllListeners.bind(g);a._internalOn=e.on.bind(e);a._internalOnce=e.once.bind(e);a._removeInternalListener=e.removeListener.bind(e);a._removeAllInternalListeners=e.removeAllListeners.bind(e);a.emit=
function(h,b){"undefined"!==typeof jQuery&&jQuery(a).trigger(h,b);g.emit(h,b);e.emit(h,b)};return a},triggerHandler:function(a,h,e){function g(b){if(b.listener){if(l.removeListener(h,b.listener),!b.fired)return b.fired=!0,b.listener.apply(l,[e])}else return b.apply(l,[e])}var b;"undefined"!==typeof jQuery&&(b=jQuery(a).triggerHandler(h,e));var l=a._ev;if(!l)return b;a=l._events[h];if(!a)return b;a=Array.isArray(a)?a:[a];var u;for(u=0;u<a.length-1;u++)g(a[u]);a=g(a[u]);return void 0!==b?b:a},purge:function(a){delete a._ev;
delete a.on;delete a.once;delete a.removeListener;delete a.removeAllListeners;delete a.emit;delete a._ev;delete a._internalEv;delete a._internalOn;delete a._internalOnce;delete a._removeInternalListener;delete a._removeAllInternalListeners;return a}}},{events:94}],690:[function(a,t,m){function p(a,n,b,l){var e=a[0],q=a.length,d,f,c;if(2===q&&h(e)&&h(a[1])&&0===e.length){a:{var k=a[1];for(f=0;f<k.length;f++){var r=k[f];if(null!==r&&"object"===typeof r){k=!1;break a}void 0!==r&&(e[f]=r)}k=!0}if(k)return e;
e.splice(0,e.length)}for(r=1;r<q;r++)for(d in k=a[r],k){var m=e[d];f=k[d];if(l&&h(f))e[d]=f;else if(n&&f&&(g(f)||(c=h(f))))c?(c=!1,m=m&&h(m)?m:[]):m=m&&g(m)?m:{},e[d]=p([m,f],n,b,l);else if("undefined"!==typeof f||b)e[d]=f}return e}var g=a("./is_plain_object.js"),h=Array.isArray;m.extendFlat=function(){return p(arguments,!1,!1,!1)};m.extendDeep=function(){return p(arguments,!0,!1,!1)};m.extendDeepAll=function(){return p(arguments,!0,!0,!1)};m.extendDeepNoArrays=function(){return p(arguments,!0,!1,
!0)}},{"./is_plain_object.js":701}],691:[function(a,t,m){t.exports=function(a){for(var g={},h=[],e=0,n=0;n<a.length;n++){var b=a[n];1!==g[b]&&(g[b]=1,h[e++]=b)}return h}},{}],692:[function(a,t,m){function p(a){return!0===a.visible}function g(a){return!0===a[0].trace.visible}t.exports=function(a){for(var e=Array.isArray(a)&&Array.isArray(a[0])&&a[0][0]&&a[0][0].trace?g:p,h=[],b=0;b<a.length;b++){var l=a[b];e(l)&&h.push(l)}return h}},{}],693:[function(a,t,m){var p=a("country-regex"),g=a("../lib"),h=
Object.keys(p),e={"ISO-3":g.identity,"USA-states":g.identity,"country names":function(a){for(var b=0;b<h.length;b++){var e=h[b];if((new RegExp(p[e])).test(a.trim().toLowerCase()))return e}g.log("Unrecognized country name: "+a+".");return!1}};m.locationToFeature=function(a,b,h){if(!b||"string"!==typeof b)return!1;if(a=(0,e[a])(b)){for(b=0;b<h.length;b++){var l=h[b];if(l.id===a)return l}g.log(["Location with id",a,"does not have a matching topojson feature at this resolution."].join(" "))}return!1}},
{"../lib":700,"country-regex":124}],694:[function(a,t,m){var p=a("../constants/numerical").BADNUM;m.calcTraceToLineCoords=function(a){for(var g=a[0].trace.connectgaps,e=[],n=[],b=0;b<a.length;b++){var l=a[b].lonlat;l[0]!==p?n.push(l):!g&&0<n.length&&(e.push(n),n=[])}0<n.length&&e.push(n);return e};m.makeLine=function(a){return 1===a.length?{type:"LineString",coordinates:a[0]}:{type:"MultiLineString",coordinates:a}};m.makePolygon=function(a){if(1===a.length)return{type:"Polygon",coordinates:a};for(var g=
Array(a.length),e=0;e<a.length;e++)g[e]=[a[e]];return{type:"MultiPolygon",coordinates:g}};m.makeBlank=function(){return{type:"Point",coordinates:[]}}},{"../constants/numerical":677}],695:[function(a,t,m){function p(b,a,e,d,f,c,g,h){e-=b;var k=f-b;f=g-f;d-=a;g=c-a;h-=c;c=e*h-f*d;if(0===c)return null;h=(k*h-f*g)/c;k=(k*d-e*g)/c;return 0>k||1<k||0>h||1<h?null:{x:b+e*h,y:a+d*h}}function g(b,a,e,d,f){var c=d*b+f*a;if(0>c)return d*d+f*f;if(c>e)return e=d-b,a=f-a,e*e+a*a;a=d*a-f*b;return a*a/e}var h=a("./mod").mod;
m.segmentsIntersect=p;m.segmentDistance=function(b,a,e,d,f,c,k,h){if(p(b,a,e,d,f,c,k,h))return 0;var l=e-b,n=d-a,r=k-f,q=h-c,u=l*l+n*n,m=r*r+q*q;b=Math.min(g(l,n,u,f-b,c-a),g(l,n,u,k-b,h-a),g(r,q,m,b-f,a-c),g(r,q,m,e-f,d-c));return Math.sqrt(b)};var e,n,b;m.getTextLocation=function(a,g,q,d){if(a!==n||d!==b)e={},n=a,b=d;if(e[q])return e[q];var f=a.getPointAtLength(h(q-d/2,g));d=a.getPointAtLength(h(q+d/2,g));var c=Math.atan((d.y-f.y)/(d.x-f.x));a=a.getPointAtLength(h(q,g));f={x:(4*a.x+f.x+d.x)/6,y:(4*
a.y+f.y+d.y)/6,theta:c};return e[q]=f};m.clearLocationCache=function(){n=null};m.getVisibleSegment=function(b,a,e){function d(a){var d=b.getPointAtLength(a);0===a?q=d:a===l&&(u=d);a=d.x<f?f-d.x:d.x>c?d.x-c:0;d=d.y<g?g-d.y:d.y>h?d.y-h:0;return Math.sqrt(a*a+d*d)}var f=a.left,c=a.right,g=a.top,h=a.bottom;a=0;for(var l=b.getTotalLength(),n=l,q,u,p=d(a);p;){a+=p+e;if(a>n)return;p=d(a)}for(p=d(n);p;){n-=p+e;if(a>n)return;p=d(n)}return{min:a,max:n,len:n-a,total:l,isClosed:0===a&&n===l&&.1>Math.abs(q.x-
u.x)&&.1>Math.abs(q.y-u.y)}};m.findPointOnPath=function(b,a,e,d){d=d||{};var f=d.pathLength||b.getTotalLength(),c=d.tolerance||.001;d=d.iterationLimit||30;for(var g=b.getPointAtLength(0)[e]>b.getPointAtLength(f)[e]?-1:1,h=0,l=0,n,q,u;h<d&&!(n=(l+f)/2,q=b.getPointAtLength(n),u=q[e]-a,Math.abs(u)<c);)0<g*u?f=n:l=n,h++;return q}},{"./mod":707}],696:[function(a,t,m){t.exports=function(a){if("string"===typeof a){var g=document.getElementById(a);if(null===g)throw Error("No DOM element with id '"+a+"' exists on the page.");
return g}if(null===a||void 0===a)throw Error("DOM element provided is null or undefined");return a}},{}],697:[function(a,t,m){function p(b,a){b[3]*=a;return b}function g(a){if(e(a))return q;a=b(a);return a.length?a:q}function h(b){return e(b)?b:1}var e=a("fast-isnumeric"),n=a("tinycolor2"),b=a("color-normalize"),l=a("../components/colorscale");m=a("../components/color/attributes").defaultLine;var u=a("./array").isArrayOrTypedArray,q=b(m);t.exports={formatColor:function(a,e,c){var d=a.color,f=u(d),
n=u(e),m=[];var t=void 0!==a.colorscale?l.makeColorScaleFunc(l.extractScale(a,{cLetter:"c"})):g;a=f?function(a,c){return void 0===a[c]?q:b(t(a[c]))}:g;var y=n?function(b,a){return void 0===b[a]?1:h(b[a])}:h;if(f||n)for(var w=0;w<c;w++)f=a(d,w),n=y(e,w),m[w]=p(f,n);else m=p(b(d),e);return m},parseColorScale:function(b,a){void 0===a&&(a=1);return(b.reversescale?l.flipScale(b.colorscale):b.colorscale).map(function(b){var c=b[0];b=n(b[1]).toRgb();return{index:c,rgb:[b.r,b.g,b.b,a]}})}}},{"../components/color/attributes":576,
"../components/colorscale":589,"./array":683,"color-normalize":110,"fast-isnumeric":221,tinycolor2:521}],698:[function(a,t,m){function p(a){return[a]}a=a("./identity");t.exports={keyFun:function(a){return a.key},repeat:p,descend:a,wrap:p,unwrap:function(a){return a[0]}}},{"./identity":699}],699:[function(a,t,m){t.exports=function(a){return a}},{}],700:[function(a,t,m){function p(b){var a={},c;for(c in b)for(var d=b[c],e=0;e<d.length;e++)a[d[e]]=+c;return a}var g=a("d3"),h=a("fast-isnumeric");m=a("../constants/numerical");
var e=m.FP_SAFE,n=m.BADNUM,b=t.exports={};b.nestedProperty=a("./nested_property");b.keyedContainer=a("./keyed_container");b.relativeAttr=a("./relative_attr");b.isPlainObject=a("./is_plain_object");b.toLogRange=a("./to_log_range");b.relinkPrivateKeys=a("./relink_private");t=a("./array");b.isTypedArray=t.isTypedArray;b.isArrayOrTypedArray=t.isArrayOrTypedArray;b.isArray1D=t.isArray1D;b.ensureArray=t.ensureArray;b.concat=t.concat;b.maxRowLength=t.maxRowLength;b.minRowLength=t.minRowLength;t=a("./mod");
b.mod=t.mod;b.modHalf=t.modHalf;t=a("./coerce");b.valObjectMeta=t.valObjectMeta;b.coerce=t.coerce;b.coerce2=t.coerce2;b.coerceFont=t.coerceFont;b.coerceHoverinfo=t.coerceHoverinfo;b.coerceSelectionMarkerOpacity=t.coerceSelectionMarkerOpacity;b.validate=t.validate;t=a("./dates");b.dateTime2ms=t.dateTime2ms;b.isDateTime=t.isDateTime;b.ms2DateTime=t.ms2DateTime;b.ms2DateTimeLocal=t.ms2DateTimeLocal;b.cleanDate=t.cleanDate;b.isJSDate=t.isJSDate;b.formatDate=t.formatDate;b.incrementMonth=t.incrementMonth;
b.dateTick0=t.dateTick0;b.dfltRange=t.dfltRange;b.findExactDates=t.findExactDates;b.MIN_MS=t.MIN_MS;b.MAX_MS=t.MAX_MS;t=a("./search");b.findBin=t.findBin;b.sorterAsc=t.sorterAsc;b.sorterDes=t.sorterDes;b.distinctVals=t.distinctVals;b.roundUp=t.roundUp;b.sort=t.sort;b.findIndexOfMin=t.findIndexOfMin;t=a("./stats");b.aggNums=t.aggNums;b.len=t.len;b.mean=t.mean;b.midRange=t.midRange;b.variance=t.variance;b.stdev=t.stdev;b.interp=t.interp;t=a("./matrix");b.init2dArray=t.init2dArray;b.transposeRagged=
t.transposeRagged;b.dot=t.dot;b.translationMatrix=t.translationMatrix;b.rotationMatrix=t.rotationMatrix;b.rotationXYMatrix=t.rotationXYMatrix;b.apply2DTransform=t.apply2DTransform;b.apply2DTransform2=t.apply2DTransform2;t=a("./angles");b.deg2rad=t.deg2rad;b.rad2deg=t.rad2deg;b.angleDelta=t.angleDelta;b.angleDist=t.angleDist;b.isFullCircle=t.isFullCircle;b.isAngleInsideSector=t.isAngleInsideSector;b.isPtInsideSector=t.isPtInsideSector;b.pathArc=t.pathArc;b.pathSector=t.pathSector;b.pathAnnulus=t.pathAnnulus;
t=a("./anchor_utils");b.isLeftAnchor=t.isLeftAnchor;b.isCenterAnchor=t.isCenterAnchor;b.isRightAnchor=t.isRightAnchor;b.isTopAnchor=t.isTopAnchor;b.isMiddleAnchor=t.isMiddleAnchor;b.isBottomAnchor=t.isBottomAnchor;t=a("./geometry2d");b.segmentsIntersect=t.segmentsIntersect;b.segmentDistance=t.segmentDistance;b.getTextLocation=t.getTextLocation;b.clearLocationCache=t.clearLocationCache;b.getVisibleSegment=t.getVisibleSegment;b.findPointOnPath=t.findPointOnPath;t=a("./extend");b.extendFlat=t.extendFlat;
b.extendDeep=t.extendDeep;b.extendDeepAll=t.extendDeepAll;b.extendDeepNoArrays=t.extendDeepNoArrays;t=a("./loggers");b.log=t.log;b.warn=t.warn;b.error=t.error;t=a("./regex");b.counterRegex=t.counter;t=a("./throttle");b.throttle=t.throttle;b.throttleDone=t.done;b.clearThrottle=t.clear;b.getGraphDiv=a("./get_graph_div");b.clearResponsive=a("./clear_responsive");b.makeTraceGroups=a("./make_trace_groups");b._=a("./localize");b.notifier=a("./notifier");b.filterUnique=a("./filter_unique");b.filterVisible=
a("./filter_visible");b.pushUnique=a("./push_unique");b.cleanNumber=a("./clean_number");b.ensureNumber=function(b){if(!h(b))return n;b=Number(b);return b<-e||b>e?n:h(b)?Number(b):n};b.isIndex=function(b,a){return void 0!==a&&b>=a?!1:h(b)&&0<=b&&0===b%1};b.noop=a("./noop");b.identity=a("./identity");b.repeat=function(b,a){for(var c=Array(a),d=0;d<a;d++)c[d]=b;return c};b.swapAttrs=function(a,c,d,e){d||(d="x");e||(e="y");for(var f=0;f<c.length;f++){var g=c[f],k=b.nestedProperty(a,g.replace("?",d));
g=b.nestedProperty(a,g.replace("?",e));var h=k.get();k.set(g.get());g.set(h)}};b.raiseToTop=function(b){b.parentNode.appendChild(b)};b.cancelTransition=function(b){return b.transition().duration(0)};b.constrain=function(b,a,c){return a>c?Math.max(c,Math.min(a,b)):Math.max(a,Math.min(c,b))};b.bBoxIntersect=function(b,a,c){c=c||0;return b.left<=a.right+c&&a.left<=b.right+c&&b.top<=a.bottom+c&&a.top<=b.bottom+c};b.simpleMap=function(b,a,c,d){for(var e=b.length,f=Array(e),g=0;g<e;g++)f[g]=a(b[g],c,d);
return f};b.randstr=function y(a,c,d,e){d||(d=16);void 0===c&&(c=24);if(0>=c)return"0";var f=Math.log(Math.pow(2,c))/Math.log(d),g="",h;for(h=2;Infinity===f;h*=2)f=Math.log(Math.pow(2,c/h))/Math.log(d)*h;var l=f-Math.floor(f);for(h=0;h<Math.floor(f);h++){var n=Math.floor(Math.random()*d).toString(d);g=n+g}l&&(f=Math.pow(d,l),n=Math.floor(Math.random()*f).toString(d),g=n+g);f=parseInt(g,d);return a&&a[g]||Infinity!==f&&f>=Math.pow(2,c)?10<e?(b.warn("randstr failed uniqueness"),g):y(a,c,d,(e||0)+1):
g};b.OptionControl=function(b,a){b||(b={});a||(a="opt");var c={optionList:[],_newoption:function(d){d[a]=b;c[d.name]=d;c.optionList.push(d)}};c["_"+a]=b;return c};b.smooth=function(b,a){a=Math.round(a)||0;if(2>a)return b;var c=b.length,d=2*c,e=2*a-1,f=Array(e),g=Array(c),h,l,n;for(h=0;h<e;h++)f[h]=(1-Math.cos(Math.PI*(h+1)/a))/(2*a);for(h=0;h<c;h++){for(l=n=0;l<e;l++){var r=h+l+1-a;r<-c?r-=d*Math.round(r/d):r>=d&&(r-=d*Math.floor(r/d));0>r?r=-1-r:r>=c&&(r=d-1-r);n+=b[r]*f[l]}g[h]=n}return g};b.syncOrAsync=
function(a,c,d){function e(){return b.syncOrAsync(a,c,d)}for(var f;a.length;)if(f=a.splice(0,1)[0],(f=f(c))&&f.then)return f.then(e).then(void 0,b.promiseError);return d&&d(c)};b.stripTrailingSlash=function(b){return"/"===b.substr(-1)?b.substr(0,b.length-1):b};b.noneOrAll=function(b,a,c){if(b){var d=!1,e=!0,f;for(f=0;f<c.length;f++){var g=b[c[f]];void 0!==g&&null!==g?d=!0:e=!1}if(d&&!e)for(f=0;f<c.length;f++)b[c[f]]=a[c[f]]}};b.mergeArray=function(a,c,d){if(b.isArrayOrTypedArray(a))for(var e=Math.min(a.length,
c.length),f=0;f<e;f++)c[f][d]=a[f]};b.fillArray=function(a,c,d,e){e=e||b.identity;if(b.isArrayOrTypedArray(a))for(var f=0;f<c.length;f++)c[f][d]=e(a[f])};b.castOption=function(a,c,d,e){e=e||b.identity;a=b.nestedProperty(a,d).get();return b.isArrayOrTypedArray(a)?Array.isArray(c)&&b.isArrayOrTypedArray(a[c[0]])?e(a[c[0]][c[1]]):e(a[c]):a};b.extractOption=function(a,c,d,e){if(d in a)return a[d];a=b.nestedProperty(c,e).get();if(!Array.isArray(a))return a};b.tagSelected=function(a,c,d){var e=c.selectedpoints;
c=c._indexToPoints;var f;c&&(f=p(c));for(c=0;c<e.length;c++){var g=e[c];b.isIndex(g)&&(g=f?f[g]:g,g=d?d[g]:g,void 0!==g&&g<a.length&&(a[g].selected=1))}};b.selIndices2selPoints=function(a){var c=a.selectedpoints;if(a=a._indexToPoints){a=p(a);for(var d=[],e=0;e<c.length;e++){var f=c[e];b.isIndex(f)&&(f=a[f],b.isIndex(f)&&d.push(f))}return d}return c};b.getTargetArray=function(a,c){c=c.target;return"string"===typeof c&&c?(a=b.nestedProperty(a,c).get(),Array.isArray(a)?a:!1):Array.isArray(c)?c:!1};b.minExtend=
function(a,c){var d={};"object"!==typeof c&&(c={});var e=Object.keys(a),f;for(f=0;f<e.length;f++){var g=e[f];var h=a[g];"_"!==g.charAt(0)&&"function"!==typeof h&&("module"===g?d[g]=h:Array.isArray(h)?d[g]="colorscale"===g?h.slice():h.slice(0,3):d[g]=h&&"object"===typeof h?b.minExtend(a[g],c[g]):h)}e=Object.keys(c);for(f=0;f<e.length;f++)g=e[f],h=c[g],"object"===typeof h&&g in d&&"object"===typeof d[g]||(d[g]=h);return d};b.titleCase=function(b){return b.charAt(0).toUpperCase()+b.substr(1)};b.containsAny=
function(b,a){for(var c=0;c<a.length;c++)if(-1!==b.indexOf(a[c]))return!0;return!1};b.isPlotDiv=function(b){b=g.select(b);return b.node()instanceof HTMLElement&&b.size()&&b.classed("js-plotly-plot")};b.removeElement=function(b){var a=b&&b.parentNode;a&&a.removeChild(b)};b.addStyleRule=function(a,c){b.addRelatedStyleRule("global",a,c)};b.addRelatedStyleRule=function(a,c,d){a="plotly.js-style-"+a;var e=document.getElementById(a);e||(e=document.createElement("style"),e.setAttribute("id",a),e.appendChild(document.createTextNode("")),
document.head.appendChild(e));a=e.sheet;a.insertRule?a.insertRule(c+"{"+d+"}",0):a.addRule?a.addRule(c,d,0):b.warn("addStyleRule failed")};b.deleteRelatedStyleRule=function(a){(a=document.getElementById("plotly.js-style-"+a))&&b.removeElement(a)};b.isIE=function(){return"undefined"!==typeof window.navigator.msSaveBlob};b.isD3Selection=function(b){return b&&"function"===typeof b.classed};b.ensureSingle=function(b,a,c,d){var e=b.select(a+(c?"."+c:""));if(e.size())return e;b=b.append(a);c&&b.classed(c,
!0);d&&b.call(d);return b};b.ensureSingleById=function(b,a,c,d){var e=b.select(a+"#"+c);if(e.size())return e;b=b.append(a).attr("id",c);d&&b.call(d);return b};b.objectFromPath=function(b,a){b=b.split(".");for(var c,d=c={},e=0;e<b.length;e++){var f=b[e],g;(g=b[e].match(/(.*)\[([0-9]+)\]/))?(f=g[1],g=g[2],c=c[f]=[],c[g]=e===b.length-1?a:{},c=c[g]):(c[f]=e===b.length-1?a:{},c=c[f])}return d};var l=/^([^\[\.]+)\.(.+)?/,u=/^([^\.]+)\[([0-9]+)\](\.)?(.+)?/;b.expandObjectPaths=function(a){var c,d;if("object"===
typeof a&&!Array.isArray(a))for(d in a)if(a.hasOwnProperty(d))if(c=d.match(l)){var e=a[d];var f=c[1];delete a[d];a[f]=b.extendDeepNoArrays(a[f]||{},b.objectFromPath(d,b.expandObjectPaths(e))[f])}else if(c=d.match(u)){e=a[d];f=c[1];var g=parseInt(c[2]);delete a[d];a[f]=a[f]||[];"."===c[3]?(c=c[4],f=a[f][g]=a[f][g]||{},b.extendDeepNoArrays(f,b.objectFromPath(c,b.expandObjectPaths(e)))):a[f][g]=b.expandObjectPaths(e)}else a[d]=b.expandObjectPaths(a[d]);return a};b.numSeparate=function(b,a,c){c||(c=!1);
if("string"!==typeof a||0===a.length)throw Error("Separator string required for formatting!");"number"===typeof b&&(b=String(b));var d=/(\d+)(\d{3})/,e=a.charAt(0);a=a.charAt(1);b=b.split(".");var f=b[0];e=1<b.length?e+b[1]:"";if(a&&(1<b.length||4<f.length||c))for(;d.test(f);)f=f.replace(d,"$1"+a+"$2");return f+e};b.TEMPLATE_STRING_REGEX=/%{([^\s%{}:]*)(:[^}]*)?}/g;var q=/^\w*$/;b.templateString=function(a,c){var d={};return a.replace(b.TEMPLATE_STRING_REGEX,function(a,e){if(q.test(e))return c[e]||
"";d[e]=d[e]||b.nestedProperty(c,e).get;return d[e]()||""})};var d=/^:/,f=0;b.hovertemplateString=function(a,c,e){var h=arguments,l={};return a.replace(b.TEMPLATE_STRING_REGEX,function(a,n,r){var u;for(u=3;u<h.length;u++){var p=h[u];if(p.hasOwnProperty(n)){var m=p[n];break}q.test(n)||(m=l[n]||b.nestedProperty(p,n).get())&&(l[n]=m);if(void 0!==m)break}void 0===m&&(10>f&&(b.warn("Variable '"+n+"' in hovertemplate could not be found!"),m=a),10===f&&b.warn("Too many hovertemplate warnings - additional warnings will be suppressed"),
f++);r?m=(e?e.numberFormat:g.format)(r.replace(d,""))(m):c.hasOwnProperty(n+"Label")&&(m=c[n+"Label"]);return m})};b.subplotSort=function(b,a){for(var c=Math.min(b.length,a.length)+1,d=0,e=0,f=0;f<c;f++){var g=b.charCodeAt(f)||0,h=a.charCodeAt(f)||0,l=48<=g&&57>=g,n=48<=h&&57>=h;l&&(d=10*d+g-48);n&&(e=10*e+h-48);if(!l||!n){if(d!==e)return d-e;if(g!==h)return g-h}}return e-d};var c=2E9;b.seedPseudoRandom=function(){c=2E9};b.pseudoRandom=function(){var a=c;c=(69069*c+1)%4294967296;return 429496729>
Math.abs(c-a)?b.pseudoRandom():c/4294967296}},{"../constants/numerical":677,"./anchor_utils":681,"./angles":682,"./array":683,"./clean_number":684,"./clear_responsive":686,"./coerce":687,"./dates":688,"./extend":690,"./filter_unique":691,"./filter_visible":692,"./geometry2d":695,"./get_graph_div":696,"./identity":699,"./is_plain_object":701,"./keyed_container":702,"./localize":703,"./loggers":704,"./make_trace_groups":705,"./matrix":706,"./mod":707,"./nested_property":708,"./noop":709,"./notifier":710,
"./push_unique":714,"./regex":716,"./relative_attr":717,"./relink_private":718,"./search":719,"./stats":722,"./throttle":725,"./to_log_range":726,d3:154,"fast-isnumeric":221}],701:[function(a,t,m){t.exports=function(a){return window&&window.process&&window.process.versions?"[object Object]"===Object.prototype.toString.call(a):"[object Object]"===Object.prototype.toString.call(a)&&Object.getPrototypeOf(a)===Object.prototype}},{}],702:[function(a,t,m){var p=a("./nested_property"),g=/^\w*$/;t.exports=
function(a,e,n,b){n=n||"name";b=b||"value";var h,u={};if(e&&e.length){var q=p(a,e);var d=q.get()}else d=a;e=e||"";var f={};if(d)for(h=0;h<d.length;h++)f[d[h][n]]=h;var c=g.test(b),k={set:function(a,e){var g=null===e?4:0;if(!d){if(!q||4===g)return;d=[];q.set(d)}var h=f[a];if(void 0===h){if(4===g)return;g|=3;h=d.length;f[a]=h}else e!==(c?d[h][b]:p(d[h],b).get())&&(g|=2);var l=d[h]=d[h]||{};l[n]=a;c?l[b]=e:p(l,b).set(e);null!==e&&(g&=-5);u[h]|=g;return k},get:function(a){if(d&&(a=f[a],void 0!==a))return c?
d[a][b]:p(d[a],b).get()},rename:function(b,a){var c=f[b];if(void 0===c)return k;u[c]|=1;f[a]=c;delete f[b];d[c][n]=a;return k},remove:function(a){var e=f[a];if(void 0===e)return k;var g=d[e];if(2<Object.keys(g).length)return u[e]|=2,k.set(a,null);if(c){for(h=e;h<d.length;h++)u[h]|=3;for(h=e;h<d.length;h++)f[d[h][n]]--;d.splice(e,1);delete f[a]}else p(g,b).set(null),u[e]|=6;return k},constructUpdate:function(){for(var a,f,g={},k=Object.keys(u),h=0;h<k.length;h++)f=k[h],a=e+"["+f+"]",d[f]?(u[f]&1&&
(g[a+"."+n]=d[f][n]),u[f]&2&&(g[a+"."+b]=c?u[f]&4?null:d[f][b]:u[f]&4?null:p(d[f],b).get())):g[a]=null;return g}};return k}},{"./nested_property":708}],703:[function(a,t,m){var p=a("../registry");t.exports=function(a,h){for(var e=a._context.locale,g=0;2>g;g++){for(var b=a._context.locales,l=0;2>l;l++){if(b=(b[e]||{}).dictionary)if(b=b[h])return b;b=p.localeRegistry}l=e.split("-")[0];if(l===e)break;e=l}return h}},{"../registry":829}],704:[function(a,t,m){function p(a,e){if(a&&a.apply)try{a.apply(console,
e);return}catch(b){}for(var g=0;g<e.length;g++)try{a(e[g])}catch(b){console.log(e[g])}}var g=a("../plot_api/plot_config").dfltConfig;a=t.exports={};a.log=function(){if(1<g.logging){for(var a=["LOG:"],e=0;e<arguments.length;e++)a.push(arguments[e]);p(console.trace||console.log,a)}};a.warn=function(){if(0<g.logging){for(var a=["WARN:"],e=0;e<arguments.length;e++)a.push(arguments[e]);p(console.trace||console.log,a)}};a.error=function(){if(0<g.logging){for(var a=["ERROR:"],e=0;e<arguments.length;e++)a.push(arguments[e]);
p(console.error,a)}}},{"../plot_api/plot_config":736}],705:[function(a,t,m){t.exports=function(a,g,h){a=a.selectAll("g."+h.replace(/\s/g,".")).data(g,function(a){return a[0].trace.uid});a.exit().remove();a.enter().append("g").attr("class",h);a.order();return a}},{}],706:[function(a,t,m){m.init2dArray=function(a,g){for(var h=Array(a),e=0;e<a;e++)h[e]=Array(g);return h};m.transposeRagged=function(a){var g=0,h=a.length,e,n;for(e=0;e<h;e++)g=Math.max(g,a[e].length);var b=Array(g);for(e=0;e<g;e++)for(b[e]=
Array(h),n=0;n<h;n++)b[e][n]=a[n][e];return b};m.dot=function(a,g){if(!a.length||!g.length||a.length!==g.length)return null;var h=a.length,e;if(a[0].length){var n=Array(h);for(e=0;e<h;e++)n[e]=m.dot(a[e],g)}else if(g[0].length)for(g=m.transposeRagged(g),n=Array(g.length),e=0;e<g.length;e++)n[e]=m.dot(a,g[e]);else for(e=n=0;e<h;e++)n+=a[e]*g[e];return n};m.translationMatrix=function(a,g){return[[1,0,a],[0,1,g],[0,0,1]]};m.rotationMatrix=function(a){a=a*Math.PI/180;return[[Math.cos(a),-Math.sin(a),
0],[Math.sin(a),Math.cos(a),0],[0,0,1]]};m.rotationXYMatrix=function(a,g,h){return m.dot(m.dot(m.translationMatrix(g,h),m.rotationMatrix(a)),m.translationMatrix(-g,-h))};m.apply2DTransform=function(a){return function(){var g=arguments;3===g.length&&(g=g[0]);g=1===arguments.length?g[0]:[g[0],g[1]];return m.dot(a,[g[0],g[1],1]).slice(0,2)}};m.apply2DTransform2=function(a){var g=m.apply2DTransform(a);return function(a){return g(a.slice(0,2)).concat(g(a.slice(2,4)))}}},{}],707:[function(a,t,m){t.exports=
{mod:function(a,g){a%=g;return 0>a?a+g:a},modHalf:function(a,g){return Math.abs(a)>g/2?a-Math.round(a/g)*g:a}}},{}],708:[function(a,t,m){function p(b,a){return function(){var d=b,c,e;for(c=0;c<a.length-1;c++){var g=a[c];if(-1===g){g=!0;var h=[];for(e=0;e<d.length;e++)h[e]=p(d[e],a.slice(c+1))(),h[e]!==h[0]&&(g=!1);return g?h[0]:h}if("number"===typeof g&&!l(d))return;d=d[g];if("object"!==typeof d||null===d)return}if("object"===typeof d&&null!==d&&(h=d[a[c]],null!==h))return h}}function g(b,a){return void 0===
b||null===b&&!a.match(u)}function h(a,d,f){return function(c){var k=a,n="",q=[[a,n]],u=g(c,f),p;for(p=0;p<d.length-1;p++){var m=d[p];if("number"===typeof m&&!l(k))throw"array index but container is not an array";if(-1===m){u=k;n=d.slice(p+1);m=c;var t=f,x=l(m),F=!0,B=m,C=t.replace("-1",0),D=x?!1:g(m,C),G=n[0];for(q=0;q<u.length;q++)C=t.replace("-1",q),x&&(B=m[q%m.length],D=g(B,C)),D&&(F=!1),e(u,q,G,D)&&h(u[q],n,t.replace("-1",q))(B);if(u=!F)break;else return}if(!e(k,m,d[p+1],u))break;k=k[m];if("object"!==
typeof k||null===k)throw"container is not an object";t=m;b(m)?t="["+m+"]":n&&(t="."+m);n+=t;q.push([k,n])}if(u){if(p===d.length-1&&(delete k[d[p]],Array.isArray(k)&&+d[p]===k.length-1))for(;k.length&&void 0===k[k.length-1];)k.pop()}else k[d[p]]=c}}function e(b,a,e,c){if(void 0===b[a]){if(c)return!1;b[a]="number"===typeof e?[]:{}}return!0}function n(b,a,e){return{set:function(){throw"bad container";},get:function(){},astr:a,parts:e,obj:b}}var b=a("fast-isnumeric"),l=a("./array").isArrayOrTypedArray;
t.exports=function(a,d){if(b(d))d=String(d);else if("string"!==typeof d||"[-1]"===d.substr(d.length-4))throw"bad property string";for(var e=0,c=d.split("."),g,l;e<c.length;){if(g=String(c[e]).match(/^([^\[\]]*)((\[\-?[0-9]*\])+)$/)){if(g[1])c[e]=g[1];else if(0===e)c.splice(0,1);else throw"bad property string";g=g[2].substr(1,g[2].length-2).split("][");for(l=0;l<g.length;l++)e++,c.splice(e,0,Number(g[l]))}e++}return"object"!==typeof a?n(a,d,c):{set:h(a,c,d),get:p(a,c),astr:d,parts:c,obj:a}};var u=
/(^|\.)args\[/},{"./array":683,"fast-isnumeric":221}],709:[function(a,t,m){t.exports=function(){}},{}],710:[function(a,t,m){var p=a("d3"),g=a("fast-isnumeric"),h=[];t.exports=function(a,n){function b(b){b.duration(700).style("opacity",0).each("end",function(b){b=h.indexOf(b);-1!==b&&h.splice(b,1);p.select(this).remove()})}if(-1===h.indexOf(a)){h.push(a);var e=1E3;g(n)?e=n:"long"===n&&(e=3E3);a=p.select("body").selectAll(".plotly-notifier").data([0]);a.enter().append("div").classed("plotly-notifier",
!0);a.selectAll(".notifier-note").data(h).enter().append("div").classed("notifier-note",!0).style("opacity",0).each(function(a){var g=p.select(this);g.append("button").classed("notifier-close",!0).html("\x26times;").on("click",function(){g.transition().call(b)});var d=g.append("p");a=a.split(/<br\s*\/?>/g);for(var f=0;f<a.length;f++)f&&d.append("br"),d.append("span").text(a[f]);g.transition().duration(700).style("opacity",1).transition().delay(e).call(b)})}}},{d3:154,"fast-isnumeric":221}],711:[function(a,
t,m){var p=a("./setcursor");t.exports=function(a,h){var e=a.attr("data-savedcursor");if(h){if(!e){e=(a.attr("class")||"").split(" ");for(var g=0;g<e.length;g++){var b=e[g];0===b.indexOf("cursor-")&&a.attr("data-savedcursor",b.substr(7)).classed(b,!1)}a.attr("data-savedcursor")||a.attr("data-savedcursor","!!")}p(a,h)}else e&&(a.attr("data-savedcursor",null),"!!"===e?p(a):p(a,e))}},{"./setcursor":720}],712:[function(a,t,m){var p=a("./matrix").dot,g=a("../constants/numerical").BADNUM;a=t.exports={};
a.tester=function(a){function e(b,a){var c=b[0],e=b[1];return c===g||c<u||c>q||e===g||e<d||e>f||a&&k(b)?!1:!0}function b(b,a){var c=b[0];b=b[1];if(c===g||c<u||c>q||b===g||b<d||b>f)return!1;var e=h.length,k=h[0][0],l=h[0][1],n=0,r;for(r=1;r<e;r++){var p=k;var m=l;k=h[r][0];l=h[r][1];var v=Math.min(p,k);if(!(c<v||c>Math.max(p,k)||b>Math.max(m,l)))if(b<Math.min(m,l))c!==v&&n++;else{p=k===p?b:m+(c-p)*(l-m)/(k-p);if(b===p)return 1===r&&a?!1:!0;b<=p&&c!==v&&n++}}return 1===n%2}var h=a.slice(),u=h[0][0],
q=u,d=h[0][1],f=d;h.push(h[0]);for(a=1;a<h.length;a++)u=Math.min(u,h[a][0]),q=Math.max(q,h[a][0]),d=Math.min(d,h[a][1]),f=Math.max(f,h[a][1]);var c=!1;if(5===h.length)if(h[0][0]===h[1][0]){if(h[2][0]===h[3][0]&&h[0][1]===h[3][1]&&h[1][1]===h[2][1]){c=!0;var k=function(b){return b[0]===h[0][0]}}}else h[0][1]===h[1][1]&&h[2][1]===h[3][1]&&h[0][0]===h[3][0]&&h[1][0]===h[2][0]&&(c=!0,k=function(b){return b[1]===h[0][1]});var r=!0,p=h[0];for(a=1;a<h.length;a++)if(p[0]!==h[a][0]||p[1]!==h[a][1]){r=!1;break}return{xmin:u,
xmax:q,ymin:d,ymax:f,pts:h,contains:c?e:b,isRect:c,degenerate:r}};var h=a.isSegmentBent=function(a,g,b,h){var e=a[g],l=[a[b][0]-e[0],a[b][1]-e[1]],d=p(l,l),f=Math.sqrt(d);f=[-l[1]/f,l[0]/f];for(g+=1;g<b;g++){var c=[a[g][0]-e[0],a[g][1]-e[1]];var k=p(c,l);if(0>k||k>d||Math.abs(p(c,f))>h)return!0}return!1};a.filter=function(a,g){function b(b){a.push(b);b=e.length;var c=n;e.splice(q+1);for(var d=c+1;d<a.length;d++)if(d===a.length-1||h(a,c,d+1,g))e.push(a[d]),e.length<b-2&&(n=d,q=e.length-1),c=d}var e=
[a[0]],n=0,q=0;if(1<a.length){var d=a.pop();b(d)}return{addPt:b,raw:a,filtered:e}}},{"../constants/numerical":677,"./matrix":706}],713:[function(a,t,m){(function(p){var g=a("./show_no_webgl_msg"),h=a("regl");t.exports=function(a,n){var b=a._fullLayout,e=!0;b._glcanvas.each(function(g){if(!g.regl&&(!g.pick||b._has("parcoords"))){try{g.regl=h({canvas:this,attributes:{antialias:!g.pick,preserveDrawingBuffer:!0},pixelRatio:a._context.plotGlPixelRatio||p.devicePixelRatio,extensions:n||[]})}catch(q){e=
!1}e&&this.addEventListener("webglcontextlost",function(b){a&&a.emit&&a.emit("plotly_webglcontextlost",{event:b,layer:g.key})},!1)}});e||g({container:b._glcontainer.node()});return e}}).call(this,"undefined"!==typeof ja?ja:"undefined"!==typeof self?self:"undefined"!==typeof window?window:{})},{"./show_no_webgl_msg":721,regl:486}],714:[function(a,t,m){t.exports=function(a,g){if(g instanceof RegExp){for(var h=g.toString(),e=0;e<a.length;e++)if(a[e]instanceof RegExp&&a[e].toString()===h)return a;a.push(g)}else!g&&
0!==g||-1!==a.indexOf(g)||a.push(g);return a}},{}],715:[function(a,t,m){var p=a("../lib"),g=a("../plot_api/plot_config").dfltConfig,h={add:function(a,h,b,l,u){a.undoQueue=a.undoQueue||{index:0,queue:[],sequence:!1};var e=a.undoQueue.index;if(a.autoplay)a.undoQueue.inSequence||(a.autoplay=!1);else{if(!a.undoQueue.sequence||a.undoQueue.beginSequence){var d={undo:{calls:[],args:[]},redo:{calls:[],args:[]}};a.undoQueue.queue.splice(e,a.undoQueue.queue.length-e,d);a.undoQueue.index+=1}else d=a.undoQueue.queue[e-
1];a.undoQueue.beginSequence=!1;d&&(d.undo.calls.unshift(h),d.undo.args.unshift(b),d.redo.calls.push(l),d.redo.args.push(u));a.undoQueue.queue.length>g.queueLength&&(a.undoQueue.queue.shift(),a.undoQueue.index--)}},startSequence:function(a){a.undoQueue=a.undoQueue||{index:0,queue:[],sequence:!1};a.undoQueue.sequence=!0;a.undoQueue.beginSequence=!0},stopSequence:function(a){a.undoQueue=a.undoQueue||{index:0,queue:[],sequence:!1};a.undoQueue.sequence=!1;a.undoQueue.beginSequence=!1},undo:function(a){var e;
if(a.framework&&a.framework.isPolar)a.framework.undo();else if(!(void 0===a.undoQueue||isNaN(a.undoQueue.index)||0>=a.undoQueue.index)){a.undoQueue.index--;var b=a.undoQueue.queue[a.undoQueue.index];a.undoQueue.inSequence=!0;for(e=0;e<b.undo.calls.length;e++)h.plotDo(a,b.undo.calls[e],b.undo.args[e]);a.undoQueue.inSequence=!1;a.autoplay=!1}},redo:function(a){var e;if(a.framework&&a.framework.isPolar)a.framework.redo();else if(!(void 0===a.undoQueue||isNaN(a.undoQueue.index)||a.undoQueue.index>=a.undoQueue.queue.length)){var b=
a.undoQueue.queue[a.undoQueue.index];a.undoQueue.inSequence=!0;for(e=0;e<b.redo.calls.length;e++)h.plotDo(a,b.redo.calls[e],b.redo.args[e]);a.undoQueue.inSequence=!1;a.autoplay=!1;a.undoQueue.index++}},plotDo:function(a,g,b){a.autoplay=!0;for(var e=[],h,n=0;n<b.length;n++)h=b[n],e[n]=h===a?h:"object"===typeof h?Array.isArray(h)?p.extendDeep([],h):p.extendDeepAll({},h):h;g.apply(null,e)}};t.exports=h},{"../lib":700,"../plot_api/plot_config":736}],716:[function(a,t,m){m.counter=function(a,g,h,e){g=
(g||"")+(h?"":"$");e=!1===e?"":"^";return"xy"===a?new RegExp(e+"x([2-9]|[1-9][0-9]+)?y([2-9]|[1-9][0-9]+)?"+g):new RegExp(e+a+"([2-9]|[1-9][0-9]+)?"+g)}},{}],717:[function(a,t,m){var p=/^(.*)(\.[^\.\[\]]+|\[\d\])$/,g=/^[^\.\[\]]+$/;t.exports=function(a,e){for(;e;){var h=a.match(p);if(h)a=h[1];else if(a.match(g))a="";else throw Error("bad relativeAttr call:"+[a,e]);if("^"===e.charAt(0))e=e.slice(1);else break}return a&&"["!==e.charAt(0)?a+"."+e:a+e}},{}],718:[function(a,t,m){var p=a("./array").isArrayOrTypedArray,
g=a("./is_plain_object");t.exports=function b(a,n){for(var e in n){var u=n[e],q=a[e];if(q!==u)if("_"===e.charAt(0)||"function"===typeof u)e in a||(a[e]=u);else if(p(u)&&p(q)&&g(u[0])){if("customdata"!==e&&"ids"!==e)for(var d=Math.min(u.length,q.length),f=0;f<d;f++)q[f]!==u[f]&&g(u[f])&&g(q[f])&&b(q[f],u[f])}else g(u)&&g(q)&&(b(q,u),Object.keys(q).length||delete a[e])}}},{"./array":683,"./is_plain_object":701}],719:[function(a,t,m){function p(a,b){return a<b}function g(a,b){return a<=b}function h(a,
b){return a>b}function e(a,b){return a>=b}var n=a("fast-isnumeric"),b=a("./loggers"),l=a("./identity");m.findBin=function(a,l,d){if(n(l.start))return d?Math.ceil((a-l.start)/l.size-1E-9)-1:Math.floor((a-l.start)/l.size+1E-9);var f=0,c=l.length,k=0,r=1<c?(l[c-1]-l[0])/(c-1):1;var q=0<=r?d?p:g:d?e:h;for(a+=1E-9*r*(d?-1:1)*(0<=r?1:-1);f<c&&100>k++;)d=Math.floor((f+c)/2),q(l[d],a)?f=d+1:c=d;90<k&&b.log("Long binary search...");return f-1};m.sorterAsc=function(a,b){return a-b};m.sorterDes=function(a,b){return b-
a};m.distinctVals=function(a){a=a.slice();a.sort(m.sorterAsc);for(var b=a.length-1,d=a[b]-a[0]||1,e=d/(b||1)/1E4,c=[a[0]],g=0;g<b;g++)a[g+1]>a[g]+e&&(d=Math.min(d,a[g+1]-a[g]),c.push(a[g+1]));return{vals:c,minDiff:d}};m.roundUp=function(a,b,d){for(var e=0,c=b.length-1,g=0,h=d?0:1,l=d?1:0,n=d?Math.ceil:Math.floor;e<c&&100>g++;)d=n((e+c)/2),b[d]<=a?e=d+h:c=d-l;return b[e]};m.sort=function(a,b){for(var d=0,e=0,c=1;c<a.length;c++){var g=b(a[c],a[c-1]);0>g?d=1:0<g&&(e=1);if(d&&e)return a.sort(b)}return e?
a:a.reverse()};m.findIndexOfMin=function(a,b){b=b||l;for(var d=Infinity,e,c=0;c<a.length;c++){var g=b(a[c]);g<d&&(d=g,e=c)}return e}},{"./identity":699,"./loggers":704,"fast-isnumeric":221}],720:[function(a,t,m){t.exports=function(a,g){(a.attr("class")||"").split(" ").forEach(function(g){0===g.indexOf("cursor-")&&a.classed(g,!1)});g&&a.classed("cursor-"+g,!0)}},{}],721:[function(a,t,m){var p=a("../components/color"),g=function(){};t.exports=function(a){for(var e in a)"function"===typeof a[e]&&(a[e]=
g);a.destroy=function(){a.container.parentNode.removeChild(a.container)};e=document.createElement("div");e.className="no-webgl";e.style.cursor="pointer";e.style.fontSize="24px";e.style.color=p.defaults[0];e.style.position="absolute";e.style.left=e.style.top="0px";e.style.width=e.style.height="100%";e.style["background-color"]=p.lightLine;e.style["z-index"]=30;var h=document.createElement("p");h.textContent="WebGL is not supported by your browser - visit https://get.webgl.org for more info";h.style.position=
"relative";h.style.top="50%";h.style.left="50%";h.style.height="30%";h.style.width="50%";h.style.margin="-15% 0 0 -25%";e.appendChild(h);a.container.appendChild(e);a.container.style.background="#FFFFFF";a.container.onclick=function(){window.open("https://get.webgl.org")};return!1}},{"../components/color":577}],722:[function(a,t,m){var p=a("fast-isnumeric"),g=a("./array").isArrayOrTypedArray;m.aggNums=function(a,e,n,b){var h;if(!b||b>n.length)b=n.length;p(e)||(e=!1);if(g(n[0])){var u=Array(b);for(h=
0;h<b;h++)u[h]=m.aggNums(a,e,n[h]);n=u}for(h=0;h<b;h++)p(e)?p(n[h])&&(e=a(+e,+n[h])):e=n[h];return e};m.len=function(a){return m.aggNums(function(a){return a+1},0,a)};m.mean=function(a,e){e||(e=m.len(a));return m.aggNums(function(a,b){return a+b},0,a)/e};m.midRange=function(a){if(void 0!==a&&0!==a.length)return(m.aggNums(Math.max,null,a)+m.aggNums(Math.min,null,a))/2};m.variance=function(a,e,g){e||(e=m.len(a));p(g)||(g=m.mean(a,e));return m.aggNums(function(a,e){return a+Math.pow(e-g,2)},0,a)/e};
m.stdev=function(a,e,g){return Math.sqrt(m.variance(a,e,g))};m.interp=function(a,e){if(!p(e))throw"n should be a finite number";e=e*a.length-.5;if(0>e)return a[0];if(e>a.length-1)return a[a.length-1];var g=e%1;return g*a[Math.ceil(e)]+(1-g)*a[Math.floor(e)]}},{"./array":683,"fast-isnumeric":221}],723:[function(a,t,m){var p=a("color-normalize");t.exports=function(a){return a?p(a):[0,0,0,1]}},{"color-normalize":110}],724:[function(a,t,m){function p(a,d,e){var g,k,h,n;MathJax.Hub.Queue(function(){k=
l.extendDeepAll({},MathJax.Hub.config);h=MathJax.Hub.processSectionDelay;void 0!==MathJax.Hub.processSectionDelay&&(MathJax.Hub.processSectionDelay=0);return MathJax.Hub.Config({messageStyle:"none",tex2jax:{inlineMath:[["$","$"],["\\(","\\)"]]},displayAlign:"left"})},function(){g=MathJax.Hub.config.menuSettings.renderer;if("SVG"!==g)return MathJax.Hub.setRenderer("SVG")},function(){var e="math-output-"+l.randstr({},64);n=b.select("body").append("div").attr({id:e}).style({visibility:"hidden",position:"absolute"}).style({"font-size":d.fontSize+
"px"}).text(a.replace(f,"\\lt ").replace(c,"\\gt "));return MathJax.Hub.Typeset(n.node())},function(){var c=b.select("body").select("#MathJax_SVG_glyphs");if(n.select(".MathJax_SVG").empty()||!n.select("svg").node())l.log("There was an error in the tex syntax.",a),e();else{var d=n.select("svg").node().getBoundingClientRect();e(n.select(".MathJax_SVG"),c,d)}n.remove();if("SVG"!==g)return MathJax.Hub.setRenderer(g)},function(){void 0!==h&&(MathJax.Hub.processSectionDelay=h);return MathJax.Hub.Config(k)})}
function g(a,b){return a?(a=(a=a.match(b))&&(a[3]||a[4]))&&h(a):null}function h(a){return a.replace(K,function(a,b){if("#"===b.charAt(0))if(b="x"===b.charAt(1)?parseInt(b.substr(2),16):parseInt(b.substr(1),10),1114111<b)b=void 0;else{var c=String.fromCodePoint;c?b=c(b):(c=String.fromCharCode,b=65535>=b?c(b):c((b>>10)+55232,b%1024+56320))}else b=E[b];return b||a})}function e(a,c){function d(){t++;var c=document.createElementNS(u.svg,"tspan");b.select(c).attr({class:"line",dy:t*q+"em"});a.appendChild(c);
E=c;var d=m;m=[{node:c}];if(1<d.length)for(c=1;c<d.length;c++)e(d[c])}function e(a){var c=a.type,d={};if("a"===c){var e="a";var g=a.target,k=a.href,h=a.popup;k&&(d={"xlink:xlink:show":"_blank"===g||"_"!==g.charAt(0)?"new":"replace",target:g,"xlink:xlink:href":k},h&&(d.onclick='window.open(this.href.baseVal,this.target.baseVal,"'+h+'");return false;'))}else e="tspan";a.style&&(d.style=a.style);e=document.createElementNS(u.svg,e);"sup"===c||"sub"===c?(f(E,z),E.appendChild(e),g=document.createElementNS(u.svg,
"tspan"),f(g,z),b.select(g).attr("dy",v[c]),d.dy=r[c],E.appendChild(e),E.appendChild(g)):E.appendChild(e);b.select(e).attr(d);E=a.node=e;m.push(a)}function f(a,b){a.appendChild(document.createTextNode(b))}function n(a){if(1===m.length)l.log("Ignoring unexpected end tag \x3c/"+a+"\x3e.",c);else{var b=m.pop();a!==b.type&&l.log("Start tag \x3c"+b.type+"\x3e doesnt match end tag \x3c"+a+"\x3e. Pretending it did match.",c);E=m[m.length-1].node}}c=c.replace(y," ");var p=!1,m=[],t=-1;if(F.test(c))d();else{var E=
a;m=[{node:a}]}for(var I=c.split(w),J=0;J<I.length;J++){var K=I[J],Y=K.match(x),W=Y&&Y[2].toLowerCase(),ea=k[W];if("br"===W)d();else if(void 0===ea)f(E,h(K));else if(Y[1])n(W);else{K=Y[4];Y={type:W};var U=g(K,B);U?(U=U.replace(H,"$1 fill:"),ea&&(U+=";"+ea)):ea&&(U=ea);U&&(Y.style=U);"a"===W&&(p=!0,W=g(K,C))&&(ea=document.createElement("a"),ea.href=W,-1!==A.indexOf(ea.protocol)&&(Y.href=encodeURI(decodeURI(W)),Y.target=g(K,D)||"_blank",Y.popup=g(K,G)));e(Y)}}return p}function n(a,b,c){var d=c.horizontalAlign;
c=c.verticalAlign||"top";var e=a.node().getBoundingClientRect(),f=b.node().getBoundingClientRect(),g;var k="bottom"===c?function(){return e.bottom-g.height}:"middle"===c?function(){return e.top+(e.height-g.height)/2}:function(){return e.top};var h="right"===d?function(){return e.right-g.width}:"center"===d?function(){return e.left+(e.width-g.width)/2}:function(){return e.left};return function(){g=this.node().getBoundingClientRect();this.style({top:k()-f.top+"px",left:h()-f.left+"px","z-index":1E3});
return this}}var b=a("d3"),l=a("../lib"),u=a("../constants/xmlns_namespaces"),q=a("../constants/alignment").LINE_SPACING,d=/([^$]*)([$]+[^$]*[$]+)([^$]*)/;m.convertToTspans=function(a,c,f){function g(){l.empty()||(n=a.attr("class")+"-math",l.select("svg."+n).remove());a.text("").style("white-space","pre");e(a.node(),k)&&a.style("pointer-events","all");m.positionText(a);f&&f.call(a)}var k=a.text(),h=!a.attr("data-notex")&&"undefined"!==typeof MathJax&&k.match(d),l=b.select(a.node().parentNode);if(!l.empty()){var n=
a.attr("class")?a.attr("class").split(" ")[0]:"text";n+="-math";l.selectAll("svg."+n).remove();l.selectAll("g."+n+"-group").remove();a.style("display",null).attr({"data-unformatted":k,"data-math":"N"});h?(c&&c._promises||[]).push(new Promise(function(b){a.style("display","none");var c=parseInt(a.node().style.fontSize,10);p(h[2],{fontSize:c},function(d,e,h){l.selectAll("svg."+n).remove();l.selectAll("g."+n+"-group").remove();if((d=d&&d.select("svg"))&&d.node()){var r=l.append("g").classed(n+"-group",
!0).attr({"pointer-events":"none","data-unformatted":k,"data-math":"Y"});r.node().appendChild(d.node());e&&e.node()&&d.node().insertBefore(e.node().cloneNode(!0),d.node().firstChild);d.attr({"class":n,height:h.height,preserveAspectRatio:"xMinYMin meet"}).style({overflow:"visible","pointer-events":"none"});e=a.node().style.fill||"black";d.select("g").attr({fill:e,stroke:e});e=d.node().getBoundingClientRect().width;h=d.node().getBoundingClientRect().height;var q=+a.attr("x")-e*{start:0,middle:.5,end:1}[a.attr("text-anchor")||
"start"],u=-(c||a.node().getBoundingClientRect().height)/4;"y"===n[0]?(r.attr({transform:"rotate("+[-90,+a.attr("x"),+a.attr("y")]+") translate("+[-e/2,u-h/2]+")"}),d.attr({x:+a.attr("x"),y:+a.attr("y")})):"l"===n[0]?d.attr({x:a.attr("x"),y:u-h/2}):"a"===n[0]&&0!==n.indexOf("atitle")?d.attr({x:0,y:u}):d.attr({x:q,y:+a.attr("y")+u-h/2});f&&f.call(a,r);b(r)}else g(),b()})})):g();return a}};var f=/(<|&lt;|&#60;)/g,c=/(>|&gt;|&#62;)/g,k={sup:"font-size:70%",sub:"font-size:70%",b:"font-weight:bold",i:"font-style:italic",
a:"cursor:pointer",span:"",em:"font-style:italic;font-weight:bold"},r={sub:"0.3em",sup:"-0.6em"},v={sub:"-0.21em",sup:"0.42em"},z="",A=["http:","https:","mailto:","",void 0,":"],y=/(\r\n?|\n)/g,w=/(<[^<>]*>)/,x=/<(\/?)([^ >]*)(\s+(.*))?>/i,F=/<br(\s+.*)?>/i,B=/(^|[\s"'])style\s*=\s*("([^"]*);?"|'([^']*);?')/i,C=/(^|[\s"'])href\s*=\s*("([^"]*)"|'([^']*)')/i,D=/(^|[\s"'])target\s*=\s*("([^"\s]*)"|'([^'\s]*)')/i,G=/(^|[\s"'])popup\s*=\s*("([\w=,]*)"|'([\w=,]*)')/i,H=/(^|;)\s*color:/;m.plainText=function(a,
b){b=b||{};var c=void 0!==b.len&&-1!==b.len?b.len:Infinity;b=void 0!==b.allowedTags?b.allowedTags:["br"];var d=a.split(w);a=[];for(var e="",f=0,g=0;g<d.length;g++){var k=d[g],h=k.match(x);if(h=h&&h[2].toLowerCase())-1!==b.indexOf(h)&&(a.push(k),e=h);else{h=k.length;if(f+h<c)a.push(k),f+=h;else if(f<c){b=c-f;e&&("br"!==e||3>=b||3>=h)&&a.pop();3<c?a.push(k.substr(0,b-3)+"..."):a.push(k.substr(0,b));break}e=""}}return a.join("")};var E={mu:"",amp:"\x26",lt:"\x3c",gt:"\x3e",nbsp:"",times:"",plusmn:"",
deg:""},K=/&(#\d+|#x[\da-fA-F]+|[a-z]+);/g;m.convertEntities=h;m.lineCount=function(a){return a.selectAll("tspan.line").size()||1};m.positionText=function(a,c,d){return a.each(function(){function a(a,b){void 0===b?(b=e.attr(a),null===b&&(e.attr(a,0),b=0)):e.attr(a,b);return b}var e=b.select(this),f=a("x",c),g=a("y",d);"text"===this.nodeName&&e.selectAll("tspan.line").attr({x:f,y:g})})};m.makeEditable=function(a,c){function d(){f();a.style({opacity:0});var c=l.attr("class");(c=c?"."+c.split(" ")[0]+
"-math-group":"[class*\x3d-math-group]")&&b.select(a.node().parentNode).select(c).style({opacity:0})}function e(a){a=a.node();var b=document.createRange();b.selectNodeContents(a);var c=window.getSelection();c.removeAllRanges();c.addRange(b);a.focus()}function f(){var d=b.select(g).select(".svg-container"),f=d.append("div"),k=a.node().style,l=parseFloat(k.fontSize||12),r=c.text;void 0===r&&(r=a.attr("data-unformatted"));f.classed("plugin-editable editable",!0).style({position:"absolute","font-family":k.fontFamily||
"Arial","font-size":l,color:c.fill||k.fill||"black",opacity:1,"background-color":c.background||"transparent",outline:"#ffffff33 1px solid",margin:[-l/8+1,0,0,-1].join("px ")+"px",padding:"0","box-sizing":"border-box"}).attr({contenteditable:!0}).text(r).call(n(a,d,c)).on("blur",function(){g._editing=!1;a.text(this.textContent).style({opacity:1});var c=b.select(this).attr("class");(c=c?"."+c.split(" ")[0]+"-math-group":"[class*\x3d-math-group]")&&b.select(a.node().parentNode).select(c).style({opacity:0});
c=this.textContent;b.select(this).transition().duration(0).remove();b.select(document).on("mouseup",null);h.edit.call(a,c)}).on("focus",function(){var a=this;g._editing=!0;b.select(document).on("mouseup",function(){if(b.event.target===a)return!1;document.activeElement===f.node()&&f.node().blur()})}).on("keyup",function(){27===b.event.which?(g._editing=!1,a.style({opacity:1}),b.select(this).style({opacity:0}).on("blur",function(){return!1}).transition().remove(),h.cancel.call(a,this.textContent)):
(h.input.call(a,this.textContent),b.select(this).call(n(a,d,c)))}).on("keydown",function(){13===b.event.which&&this.blur()}).call(e)}var g=c.gd,k=c.delegate,h=b.dispatch("edit","input","cancel"),l=k||a;a.style({"pointer-events":k?"none":"all"});if(1!==a.size())throw Error("boo");if(c.immediate)d();else l.on("click",d);return b.rebind(a,h,"on")}},{"../constants/alignment":672,"../constants/xmlns_namespaces":678,"../lib":700,d3:154}],725:[function(a,t,m){function p(a){a&&null!==a.timer&&(clearTimeout(a.timer),
a.timer=null)}var g={};m.throttle=function(a,e,n){function b(){n();h.ts=Date.now();h.onDone&&(h.onDone(),h.onDone=null)}var h=g[a],u=Date.now();if(!h){for(var q in g)g[q].ts<u-6E4&&delete g[q];h=g[a]={ts:0,timer:null}}p(h);u>h.ts+e?b():h.timer=setTimeout(function(){b();h.timer=null},e)};m.done=function(a){var e=g[a];return e&&e.timer?new Promise(function(a){var b=e.onDone;e.onDone=function(){b&&b();a();e.onDone=null}}):Promise.resolve()};m.clear=function(a){if(a)p(g[a]),delete g[a];else for(var e in g)m.clear(e)}},
{}],726:[function(a,t,m){var p=a("fast-isnumeric");t.exports=function(a,h){if(0<a)return Math.log(a)/Math.LN10;a=Math.log(Math.min(h[0],h[1]))/Math.LN10;p(a)||(a=Math.log(Math.max(h[0],h[1]))/Math.LN10-6);return a}},{"fast-isnumeric":221}],727:[function(a,t,m){t=t.exports={};var p=a("../plots/geo/constants").locationmodeToLayer,g=a("topojson-client").feature;t.getTopojsonName=function(a){return[a.scope.replace(/ /g,"-"),"_",a.resolution.toString(),"m"].join("")};t.getTopojsonPath=function(a,e){return a+
e+".json"};t.getTopojsonFeatures=function(a,e){return g(e,e.objects[p[a.locationmode]]).features}},{"../plots/geo/constants":776,"topojson-client":524}],728:[function(a,t,m){t.exports={moduleType:"locale",name:"en-US",dictionary:{"Click to enter Colorscale title":"Click to enter Colorscale title"},format:{date:"%m/%d/%Y"}}},{}],729:[function(a,t,m){t.exports={moduleType:"locale",name:"en",dictionary:{"Click to enter Colorscale title":"Click to enter Colourscale title"},format:{days:"Sunday Monday Tuesday Wednesday Thursday Friday Saturday".split(" "),
shortDays:"Sun Mon Tue Wed Thu Fri Sat".split(" "),months:"January February March April May June July August September October November December".split(" "),shortMonths:"Jan Feb Mar Apr May Jun Jul Aug Sep Oct Nov Dec".split(" "),periods:["AM","PM"],dateTime:"%a %b %e %X %Y",date:"%d/%m/%Y",time:"%H:%M:%S",decimal:".",thousands:",",grouping:[3],currency:["$",""],year:"%Y",month:"%b %Y",dayMonth:"%b %-d",dayMonthYear:"%b %-d, %Y"}}},{}],730:[function(a,t,m){var p=a("../registry");t.exports=function(a){for(var g=
p.layoutArrayContainers,e=p.layoutArrayRegexes,n=a.split("[")[0],b,l,u=0;u<e.length;u++)if((l=a.match(e[u]))&&0===l.index){b=l[0];break}b||(b=g[g.indexOf(n)]);if(!b)return!1;a=a.substr(b.length);return a?(l=a.match(/^\[(0|[1-9][0-9]*)\](\.(.+))?$/))?{array:b,index:Number(l[1]),property:l[3]||""}:!1:{array:b,index:"",property:""}}},{"../registry":829}],731:[function(a,t,m){function p(a){for(var b={},d=0;d<a.length;d++)b[a[d]]=!1;return b}function g(a,b,d){a=e({},a);for(var f in a){var c=a[f];n(c)&&
(a[f]=h(c,b,d,f))}"from-root"===d&&(a.editType=b);return a}function h(a,b,d,f){if(a.valType){d=e({},a);d.editType=b;if(Array.isArray(a.items))for(d.items=Array(a.items.length),f=0;f<a.items.length;f++)d.items[f]=h(a.items[f],b,"from-root");return d}return g(a,b,"_"===f.charAt(0)?"nested":"from-root")}a=a("../lib");var e=a.extendFlat,n=a.isPlainObject;a={valType:"flaglist",extras:["none"],flags:"calc clearAxisTypes plot style markerSize colorbars".split(" ")};m={valType:"flaglist",extras:["none"],
flags:"calc plot legend ticks axrange layoutstyle modebar camera arraydraw".split(" ")};var b=a.flags.slice().concat(["fullReplot"]),l=m.flags.slice().concat("layoutReplot");t.exports={traces:a,layout:m,traceFlags:function(){return p(b)},layoutFlags:function(){return p(l)},update:function(a,b){if((b=b.editType)&&"none"!==b){b=b.split("+");for(var d=0;d<b.length;d++)a[b[d]]=!0}},overrideAll:g}},{"../lib":700}],732:[function(a,t,m){function p(a,b){var c=a[b],d=b.charAt(0);c&&"paper"!==c&&(a[b]=k(c,
d))}function g(a){function b(b,c){var d=a.title&&a.title[c];a[b]&&!d&&(a.title||(a.title={}),a.title[c]=a[b],delete a[b])}if(a){if("string"===typeof a.title||"number"===typeof a.title)a.title={text:a.title};b("titlefont","font");b("titleposition","position");b("titleside","side");b("titleoffset","offset")}}function h(a){if(!d.isPlainObject(a))return!1;var b=a.name;delete a.name;delete a.showlegend;return("string"===typeof b||"number"===typeof b)&&String(b)}function e(a){var b="middle",c="center";
"string"===typeof a&&(-1!==a.indexOf("top")?b="top":-1!==a.indexOf("bottom")&&(b="bottom"),-1!==a.indexOf("left")?c="left":-1!==a.indexOf("right")&&(c="right"));return b+" "+c}function n(a,b){return b in a&&"object"===typeof a[b]&&0===Object.keys(a[b]).length}function b(a){var b=a.search(z);if(0<b)return a.substr(0,b)}var l=a("fast-isnumeric"),u=a("gl-mat4/fromQuat"),q=a("../registry"),d=a("../lib"),f=a("../plots/plots");t=a("../plots/cartesian/axis_ids");var c=a("../components/color"),k=t.cleanId,
r=t.getFromTrace,v=q.traceIs;m.clearPromiseQueue=function(a){Array.isArray(a._promises)&&0<a._promises.length&&d.log("Clearing previous rejected promises from queue.");a._promises=[]};m.cleanLayout=function(a){var b;a||(a={});a.xaxis1&&(a.xaxis||(a.xaxis=a.xaxis1),delete a.xaxis1);a.yaxis1&&(a.yaxis||(a.yaxis=a.yaxis1),delete a.yaxis1);a.scene1&&(a.scene||(a.scene=a.scene1),delete a.scene1);var e=(f.subplotsRegistry.cartesian||{}).attrRegex,h=(f.subplotsRegistry.polar||{}).attrRegex,l=(f.subplotsRegistry.ternary||
{}).attrRegex,r=(f.subplotsRegistry.gl3d||{}).attrRegex,q=Object.keys(a);for(b=0;b<q.length;b++){var v=q[b];if(e&&e.test(v)){v=a[v];v.anchor&&"free"!==v.anchor&&(v.anchor=k(v.anchor));v.overlaying&&(v.overlaying=k(v.overlaying));v.type||(v.isdate?v.type="date":v.islog?v.type="log":!1===v.isdate&&!1===v.islog&&(v.type="linear"));if("withzero"===v.autorange||"tozero"===v.autorange)v.autorange=!0,v.rangemode="tozero";delete v.islog;delete v.isdate;delete v.categories;n(v,"domain")&&delete v.domain;void 0!==
v.autotick&&(void 0===v.tickmode&&(v.tickmode=v.autotick?"auto":"linear"),delete v.autotick);g(v)}else if(h&&h.test(v))g(a[v].radialaxis);else if(l&&l.test(v))v=a[v],g(v.aaxis),g(v.baxis),g(v.caxis);else if(r&&r.test(v)){v=a[v];var t=v.cameraposition;if(Array.isArray(t)&&4===t[0].length){var z=t[1],A=t[2],y=u([],t[0]),J=[];for(t=0;3>t;++t)J[t]=z[t]+A*y[2+4*t];v.camera={eye:{x:J[0],y:J[1],z:J[2]},center:{x:z[0],y:z[1],z:z[2]},up:{x:0,y:0,z:1}};delete v.cameraposition}g(v.xaxis);g(v.yaxis);g(v.zaxis)}}e=
Array.isArray(a.annotations)?a.annotations.length:0;for(b=0;b<e;b++)h=a.annotations[b],d.isPlainObject(h)&&(h.ref&&("paper"===h.ref?(h.xref="paper",h.yref="paper"):"data"===h.ref&&(h.xref="x",h.yref="y"),delete h.ref),p(h,"xref"),p(h,"yref"));e=Array.isArray(a.shapes)?a.shapes.length:0;for(b=0;b<e;b++)h=a.shapes[b],d.isPlainObject(h)&&(p(h,"xref"),p(h,"yref"));if(b=a.legend)3<b.x?(b.x=1.02,b.xanchor="left"):-2>b.x&&(b.x=-.02,b.xanchor="right"),3<b.y?(b.y=1.02,b.yanchor="bottom"):-2>b.y&&(b.y=-.02,
b.yanchor="top");g(a);"rotate"===a.dragmode&&(a.dragmode="orbit");c.clean(a);a.template&&a.template.layout&&m.cleanLayout(a.template.layout);return a};m.cleanData=function(a){for(var b=0;b<a.length;b++){var l=a[b];"histogramy"===l.type&&"xbins"in l&&!("ybins"in l)&&(l.ybins=l.xbins,delete l.xbins);if(l.error_y&&"opacity"in l.error_y){var r=c.defaults;r=l.error_y.color||(v(l,"bar")?c.defaultLine:r[b%r.length]);l.error_y.color=c.addOpacity(c.rgb(r),c.opacity(r)*l.error_y.opacity);delete l.error_y.opacity}"bardir"in
l&&("h"!==l.bardir||!v(l,"bar")&&"histogram"!==l.type.substr(0,9)||(l.orientation="h",m.swapXYData(l)),delete l.bardir);"histogramy"===l.type&&m.swapXYData(l);if("histogramx"===l.type||"histogramy"===l.type)l.type="histogram";"scl"in l&&!("colorscale"in l)&&(l.colorscale=l.scl,delete l.scl);"reversescl"in l&&!("reversescale"in l)&&(l.reversescale=l.reversescl,delete l.reversescl);l.xaxis&&(l.xaxis=k(l.xaxis,"x"));l.yaxis&&(l.yaxis=k(l.yaxis,"y"));v(l,"gl3d")&&l.scene&&(l.scene=f.subplotsRegistry.gl3d.cleanId(l.scene));
if(!v(l,"pie")&&!v(l,"bar")&&"waterfall"!==l.type)if(Array.isArray(l.textposition))for(r=0;r<l.textposition.length;r++)l.textposition[r]=e(l.textposition[r]);else l.textposition&&(l.textposition=e(l.textposition));(r=q.getModule(l))&&r.colorbar&&(r=(r=r.colorbar.container)?l[r]:l)&&r.colorscale&&("YIGnBu"===r.colorscale&&(r.colorscale="YlGnBu"),"YIOrRd"===r.colorscale&&(r.colorscale="YlOrRd"));if("surface"===l.type&&d.isPlainObject(l.contours)){var u=["x","y","z"];for(r=0;r<u.length;r++){var p=l.contours[u[r]];
d.isPlainObject(p)&&(p.highlightColor&&(p.highlightcolor=p.highlightColor,delete p.highlightColor),p.highlightWidth&&(p.highlightwidth=p.highlightWidth,delete p.highlightWidth))}}if("candlestick"===l.type||"ohlc"===l.type){u=!1!==(l.increasing||{}).showlegend;p=!1!==(l.decreasing||{}).showlegend;r=h(l.increasing);var t=h(l.decreasing);if(!1!==r&&!1!==t){if(!u||p)if(p&&!u)r=t;else if(r.trim()){if(t.trim()){p=Math.min(r.length,t.length);for(u=0;u<p&&r.charAt(u)===t.charAt(u);u++);r=r.substr(0,u).trim()}}else r=
t;r&&(l.name=r)}else!r&&!t||l.name||(l.name=r||t)}if(Array.isArray(l.transforms))for(u=l.transforms,r=0;r<u.length;r++)if(p=u[r],d.isPlainObject(p))switch(p.type){case "filter":p.filtersrc&&(p.target=p.filtersrc,delete p.filtersrc);p.calendar&&(p.valuecalendar||(p.valuecalendar=p.calendar),delete p.calendar);break;case "groupby":if(p.styles=p.styles||p.style,p.styles&&!Array.isArray(p.styles)){t=p.styles;var z=Object.keys(t);p.styles=[];for(var A=0;A<z.length;A++)p.styles.push({target:z[A],value:t[z[A]]})}}n(l,
"line")&&delete l.line;"marker"in l&&(n(l.marker,"line")&&delete l.marker.line,n(l,"marker")&&delete l.marker);c.clean(l);l.autobinx&&(delete l.autobinx,delete l.xbins);l.autobiny&&(delete l.autobiny,delete l.ybins);g(l);l.colorbar&&g(l.colorbar);l.marker&&l.marker.colorbar&&g(l.marker.colorbar);l.line&&l.line.colorbar&&g(l.line.colorbar);l.aaxis&&g(l.aaxis);l.baxis&&g(l.baxis)}};m.swapXYData=function(a){d.swapAttrs(a,"? ?0 d? ?bins nbins? autobin? ?src error_?".split(" "));Array.isArray(a.z)&&Array.isArray(a.z[0])&&
(a.transpose?delete a.transpose:a.transpose=!0);if(a.error_x&&a.error_y){var b=a.error_y;b="copy_ystyle"in b?b.copy_ystyle:!(b.color||b.thickness||b.width);d.swapAttrs(a,["error_?.copy_ystyle"]);b&&d.swapAttrs(a,["error_?.color","error_?.thickness","error_?.width"])}if("string"===typeof a.hoverinfo){var c=a.hoverinfo.split("+");for(b=0;b<c.length;b++)"x"===c[b]?c[b]="y":"y"===c[b]&&(c[b]="x");a.hoverinfo=c.join("+")}};m.coerceTraceIndices=function(a,b){if(l(b))return[b];if(!Array.isArray(b)||!b.length)return a.data.map(function(a,
b){return b});if(Array.isArray(b)){for(var c=[],e=0;e<b.length;e++)d.isIndex(b[e],a.data.length)?c.push(b[e]):d.warn("trace index (",b[e],") is not a number or is out of bounds");return c}return b};m.manageArrayContainers=function(a,b,c){var e=a.obj,f=a.parts,g=f.length,k=f[g-1],h=l(k);h&&null===b?(a=f.slice(0,g-1).join("."),d.nestedProperty(e,a).get().splice(k,1)):(h&&void 0===a.get()&&void 0===a.get()&&(c[a.astr]=null),a.set(b))};var z=/(\.[^\[\]\.]+|\[[^\[\]\.]+\])$/;m.hasParent=function(a,c){for(c=
b(c);c;){if(c in a)return!0;c=b(c)}return!1};var A=["x","y","z"];m.clearAxisTypes=function(a,b,c){for(var e=0;e<b.length;e++)for(var f=a._fullData[e],g=0;3>g;g++){var k=r(a,f,A[g]);if(k&&"log"!==k.type){var h=k._name;k=k._id.substr(1);if("scene"===k.substr(0,5)){if(void 0!==c[k])continue;h=k+"."+h}k=h+".type";void 0===c[h]&&void 0===c[k]&&d.nestedProperty(a.layout,k).set(null)}}}},{"../components/color":577,"../lib":700,"../plots/cartesian/axis_ids":751,"../plots/plots":810,"../registry":829,"fast-isnumeric":221,
"gl-mat4/fromQuat":258}],733:[function(a,t,m){t=a("./plot_api");m.plot=t.plot;m.newPlot=t.newPlot;m.restyle=t.restyle;m.relayout=t.relayout;m.redraw=t.redraw;m.update=t.update;m._guiRestyle=t._guiRestyle;m._guiRelayout=t._guiRelayout;m._guiUpdate=t._guiUpdate;m._storeDirectGUIEdit=t._storeDirectGUIEdit;m.react=t.react;m.extendTraces=t.extendTraces;m.prependTraces=t.prependTraces;m.addTraces=t.addTraces;m.deleteTraces=t.deleteTraces;m.moveTraces=t.moveTraces;m.purge=t.purge;m.addFrames=t.addFrames;
m.deleteFrames=t.deleteFrames;m.animate=t.animate;m.setPlotConfig=t.setPlotConfig;m.toImage=a("./to_image");m.validate=a("./validate");m.downloadImage=a("../snapshot/download");a=a("./template_api");m.makeTemplate=a.makeTemplate;m.validateTemplate=a.validateTemplate},{"../snapshot/download":831,"./plot_api":735,"./template_api":740,"./to_image":741,"./validate":742}],734:[function(a,t,m){var p=a("../lib/is_plain_object"),g=a("../lib/noop"),h=a("../lib/loggers"),e=a("../lib/search").sorterAsc,n=a("../registry");
m.containerArrayMatch=a("./container_array_match");var b=m.isAddVal=function(a){return"add"===a||p(a)},l=m.isRemoveVal=function(a){return null===a||"remove"===a};m.applyContainerArrayChanges=function(a,q,d,f,c){var k=q.astr,r=n.getComponentMethod(k,"supplyLayoutDefaults"),u=n.getComponentMethod(k,"draw"),p=n.getComponentMethod(k,"drawOne");f=f.replot||f.recalc||r===g||u===g;var m=a.layout,t=a._fullLayout;if(d[""]){1<Object.keys(d).length&&h.warn("Full array edits are incompatible with other edits",
k);p=d[""][""];if(l(p))q.set(null);else if(Array.isArray(p))q.set(p);else return h.warn("Unrecognized full array edit value",k,p),!0;if(f)return!1;r(m,t);u(a);return!0}var w=Object.keys(d).map(Number).sort(e),x=q.get(),F=x||[],B=c(t,k).get(),C=[],D=-1,G=F.length,H;for(H=0;H<w.length;H++){var E=w[H];var K=d[E];var I=Object.keys(K);var J=K[""];var L=b(J);if(0>E||E>F.length-(L?0:1))h.warn("index out of range",k,E);else if(void 0!==J)1<I.length&&h.warn("Insertion \x26 removal are incompatible with edits to the same index.",
k,E),l(J)?C.push(E):L?("add"===J&&(J={}),F.splice(E,0,J),B&&B.splice(E,0,{})):h.warn("Unrecognized full object edit value",k,E,J),-1===D&&(D=E);else for(J=0;J<I.length;J++)L=k+"["+E+"].",c(F[E],I[J],L).set(K[I[J]])}for(H=C.length-1;0<=H;H--)F.splice(C[H],1),B&&B.splice(C[H],1);F.length?x||q.set(F):q.set(null);if(f)return!1;r(m,t);if(p!==g){if(-1===D)q=w;else{G=Math.max(F.length,G);q=[];for(H=0;H<w.length;H++){E=w[H];if(E>=D)break;q.push(E)}for(H=D;H<G;H++)q.push(H)}for(H=0;H<q.length;H++)p(a,q[H])}else u(a);
return!0}},{"../lib/is_plain_object":701,"../lib/loggers":704,"../lib/noop":709,"../lib/search":719,"../registry":829,"./container_array_match":730}],735:[function(a,t,m){function p(a){var b=a._fullLayout;b._redrawFromAutoMarginCount?b._redrawFromAutoMarginCount--:a.emit("plotly_afterplot")}function g(a,b){try{a._fullLayout._paper.style("background",b)}catch(Ia){P.error(Ia)}}function h(a,b){b=X.combine(b,"white");g(a,b)}function e(a,b){if(!a._context){a._context=P.extendDeep({},qa);var c=O.select("base");
a._context._baseUrl=c.size()&&c.attr("href")?window.location.href.split("#")[0]:""}var d=a._context;if(b){var e=Object.keys(b);for(c=0;c<e.length;c++){var f=e[c];"editable"!==f&&"edits"!==f&&f in d&&(d[f]="setBackground"===f&&"opaque"===b[f]?h:b[f])}b.plot3dPixelRatio&&!d.plotGlPixelRatio&&(d.plotGlPixelRatio=d.plot3dPixelRatio);f=b.editable;if(void 0!==f)for(d.editable=f,e=Object.keys(d.edits),c=0;c<e.length;c++)d.edits[e[c]]=f;if(b.edits)for(e=Object.keys(b.edits),c=0;c<e.length;c++)f=e[c],f in
d.edits&&(d.edits[f]=b.edits[f]);d._exportedPlot=b._exportedPlot}d.staticPlot&&(d.editable=!1,d.edits={},d.autosizable=!1,d.scrollZoom=!1,d.doubleClick=!1,d.showTips=!1,d.showLink=!1,d.displayModeBar=!1);"hover"!==d.displayModeBar||T||(d.displayModeBar=!0);if("transparent"===d.setBackground||"function"!==typeof d.setBackground)d.setBackground=g;d._hasZeroHeight=d._hasZeroHeight||0===a.clientHeight;d._hasZeroWidth=d._hasZeroWidth||0===a.clientWidth;c=d.scrollZoom;a=d._scrollZoom={};if(!0===c)a.cartesian=
1,a.gl3d=1,a.geo=1,a.mapbox=1;else if("string"===typeof c)for(b=c.split("+"),c=0;c<b.length;c++)a[b[c]]=1;else!1!==c&&(a.gl3d=1,a.geo=1,a.mapbox=1)}function n(a,b,c){var d=O.select(a).selectAll(".plot-container").data([0]);d.enter().insert("div",":first-child").classed("plot-container plotly",!0);d=d.selectAll(".svg-container").data([0]);d.enter().append("div").classed("svg-container",!0).style("position","relative");d.html("");b&&(a.data=b);c&&(a.layout=c);ea.manager.fillLayout(a);d.style({width:a._fullLayout.width+
"px",height:a._fullLayout.height+"px"});a.framework=ea.manager.framework(a);a.framework({data:a.data,layout:a.layout},d.node());a.framework.setUndoPoint();d=a.framework.svg();b=1;c=a._fullLayout.title?a._fullLayout.title.text:"";""!==c&&c||(b=0);var e=function(){this.call(ua.convertToTspans,a)};d=d.select(".title-group text").call(e);if(a._context.edits.titleText){var f=P._(a,"Click to enter Plot title");c&&c!==f||(b=.2,d.attr({"data-unformatted":f}).text(f).style({opacity:b}).on("mouseover.opacity",
function(){O.select(this).transition().duration(100).style("opacity",1)}).on("mouseout.opacity",function(){O.select(this).transition().duration(1E3).style("opacity",0)}));var g=function(){this.call(ua.makeEditable,{gd:a}).on("edit",function(b){a.framework({layout:{title:{text:b}}});this.text(b).call(e);this.call(g)}).on("cancel",function(){var a=this.attr("data-unformatted");this.text(a).call(e)})};d.call(g)}a._context.setBackground(a,a._fullLayout.paper_bgcolor);W.addLinks(a);return Promise.resolve()}
function b(a,b){b+=1;var c=[],d;for(d=0;d<a.length;d++){var e=a[d];0>e?c.push(b+e):c.push(e)}return c}function l(a,b,c){var d;for(d=0;d<b.length;d++){var e=b[d];if(e!==parseInt(e,10))throw Error("all values in "+c+" must be integers");if(e>=a.data.length||e<-a.data.length)throw Error(c+" must be valid indices for gd.data.");if(-1<b.indexOf(e,d+1)||0<=e&&-1<b.indexOf(-a.data.length+e)||0>e&&-1<b.indexOf(a.data.length+e))throw Error("each index in "+c+" must be unique.");}}function u(a,b,c){if(!Array.isArray(a.data))throw Error("gd.data must be an array.");
if("undefined"===typeof b)throw Error("currentIndices is a required argument.");Array.isArray(b)||(b=[b]);l(a,b,"currentIndices");"undefined"===typeof c||Array.isArray(c)||(c=[c]);"undefined"!==typeof c&&l(a,c,"newIndices");if("undefined"!==typeof c&&b.length!==c.length)throw Error("current and new indices must be of equal length.");}function q(a,b,c){if(!Array.isArray(a.data))throw Error("gd.data must be an array.");if("undefined"===typeof b)throw Error("traces must be defined.");Array.isArray(b)||
(b=[b]);for(a=0;a<b.length;a++){var d=b[a];if("object"!==typeof d||Array.isArray(d)||null===d)throw Error("all values in traces array must be non-array objects");}"undefined"===typeof c||Array.isArray(c)||(c=[c]);if("undefined"!==typeof c&&c.length!==b.length)throw Error("if indices is specified, traces.length must equal indices.length");}function d(a,c,d,e,f){var g=P.isPlainObject(e);if(!Array.isArray(a.data))throw Error("gd.data must be an array");if(!P.isPlainObject(c))throw Error("update must be a key:value object");
if("undefined"===typeof d)throw Error("indices must be an integer or array of integers");l(a,d,"indices");for(var k in c){if(!Array.isArray(c[k])||c[k].length!==d.length)throw Error("attribute "+k+" must be an array of length equal to indices array length");if(g&&!(k in e&&Array.isArray(e[k])&&e[k].length===c[k].length))throw Error("when maxPoints is set as a key:value object it must contain a 1:1 corrispondence with the keys and number of traces in the update object");}g=d;k=P.isPlainObject(e);d=
[];Array.isArray(g)||(g=[g]);g=b(g,a.data.length-1);for(var h in c)for(var n=0;n<g.length;n++){var r=a.data[g[n]];var q=S(r,h);r=q.get();var u=c[h][n];if(!P.isArrayOrTypedArray(u))throw Error("attribute: "+h+" index: "+n+" must be an array");if(!P.isArrayOrTypedArray(r))throw Error("cannot extend missing or non-array attribute: "+h);if(r.constructor!==u.constructor)throw Error("cannot extend array with an array of a different type: "+h);var p=k?e[h][n]:e;R(p)||(p=-1);d.push({prop:q,target:r,insert:u,
maxp:Math.floor(p)})}a={};c={};for(e=0;e<d.length;e++)h=d[e].prop,g=f(d[e].target,d[e].insert,d[e].maxp),h.set(g[0]),Array.isArray(a[h.astr])||(a[h.astr]=[]),a[h.astr].push(g[1]),Array.isArray(c[h.astr])||(c[h.astr]=[]),c[h.astr].push(d[e].target.length);return{update:a,maxPoints:c}}function f(a,b){var c=new a.constructor(a.length+b.length);c.set(a);c.set(b,a.length);return c}function c(a,b,d,e){a=P.getGraphDiv(a);V.clearPromiseQueue(a);var f={};if("string"===typeof b)f[b]=d;else if(P.isPlainObject(b))f=
P.extendFlat({},b),void 0===e&&(e=d);else return P.warn("Restyle fail.",b,d,e),Promise.reject();Object.keys(f).length&&(a.changed=!0);b=V.coerceTraceIndices(a,e);var g=z(a,f,b);f=g.flags;f.calc&&(a.calcdata=void 0);f.clearAxisTypes&&V.clearAxisTypes(a,b,{});b=[];f.fullReplot?b.push(m.plot):(b.push(W.previousPromises),W.supplyDefaults(a),f.markerSize&&(W.doCalcdata(a),x(b)),f.style&&b.push(ia.doTraceStyle),f.colorbars&&b.push(ia.doColorBars),b.push(p));b.push(W.rehover);da.add(a,c,[a,g.undoit,g.traces],
c,[a,g.redoit,g.traces]);(f=P.syncOrAsync(b,a))&&f.then||(f=Promise.resolve());return f.then(function(){a.emit("plotly_restyle",g.eventData);return a})}function k(a){return void 0===a?null:a}function r(a,b){return b?function(b,c,d){var e=S(b,c),f=e.set;e.set=function(b){v((d||"")+c,e.get(),b,a);f(b)};return e}:S}function v(a,b,c,d){if(Array.isArray(b)||Array.isArray(c)){var e=Array.isArray(b)?b:[];c=Array.isArray(c)?c:[];b=Math.max(e.length,c.length);for(var f=0;f<b;f++)v(a+"["+f+"]",e[f],c[f],d)}else if(P.isPlainObject(b)||
P.isPlainObject(c))for(e in b=P.isPlainObject(b)?b:{},c=P.isPlainObject(c)?c:{},f=P.extendFlat({},b,c),f)v(a+"."+e,b[e],c[e],d);else void 0===d[a]&&(d[a]=k(b))}function z(a,b,c){function d(){return c.map(function(){})}function e(a){a=U.id2name(a);-1===T.indexOf(a)&&T.push(a)}function f(a){return"LAYOUT"+a+".autorange"}function g(a){return"LAYOUT"+a+".range"}function h(a){for(var b=a;b<p.length;b++)if(p[b]._input===m[a])return p[b]}function l(e,f,g){if(Array.isArray(e))e.forEach(function(a){l(a,f,
g)});else if(!(e in b||V.hasParent(b,e))){if("LAYOUT"===e.substr(0,6))var n=t(a.layout,e.replace("LAYOUT",""));else{n=c[g];var q=u._tracePreGUI[h(n)._fullInput.uid];n=r(q,v)(m[n],e)}e in E||(E[e]=d());void 0===E[e][g]&&(E[e][g]=k(n.get()));void 0!==f&&n.set(f)}}function n(a){return function(b){return p[b][a]}}function q(a){return function(b,d){return!1===b?p[c[d]][a]:null}}var u=a._fullLayout,p=a._fullData,m=a.data,v=u._guiEditing,t=r(u._preGUI,v),w=P.extendDeepAll({},b),z;A(b);var x=Ka.traceFlags(),
y={},E={};for(I in b){if(V.hasParent(b,I))throw Error("cannot set "+I+" and a parent attribute simultaneously");var B=b[I],D;if("autobinx"===I||"autobiny"===I){var I=I.charAt(I.length-1)+"bins";B=Array.isArray(B)?B.map(q(I)):!1===B?c.map(n(I)):null}y[I]=B;if("LAYOUT"===I.substr(0,6)){var J=t(a.layout,I.replace("LAYOUT",""));E[I]=[k(J.get())];J.set(Array.isArray(B)?B[0]:B);x.calc=!0}else{E[I]=d();for(z=0;z<c.length;z++){var C=m[c[z]];var G=h(c[z]);J=r(u._tracePreGUI[G._fullInput.uid],v)(C,I);var K=
J.get();var H=Array.isArray(B)?B[z%B.length]:B;if(void 0!==H){var F=J.parts[J.parts.length-1],L=(D=I.substr(0,I.length-F.length-1))?D+".":"",M=D?S(G,D).get():G;if((D=Y.getTraceValObject(G,J.parts))&&D.impliedEdits&&null!==H)for(var O in D.impliedEdits)l(P.relativeAttr(I,O),D.impliedEdits[O],z);else if("thicknessmode"!==F&&"lenmode"!==F||K===H||"fraction"!==H&&"pixels"!==H||!M)"type"===I&&"pie"===H!==("pie"===K)&&(L="x",M="y","bar"!==H&&"bar"!==K||"h"!==C.orientation||(L="y",M="x"),P.swapAttrs(C,["?",
"?src"],"labels",L),P.swapAttrs(C,["d?","?0"],"label",L),P.swapAttrs(C,["?","?src"],"values",M),"pie"===K?(S(C,"marker.color").set(S(C,"marker.colors").get()),u._pielayer.selectAll("g.trace").remove()):ca.traceIs(C,"cartesian")&&S(C,"marker.colors").set(S(C,"marker.color").get()));else{var N=u._size,R=M.orient;R="top"===R||"bottom"===R;"thicknessmode"===F?(F=R?N.h:N.w,l(L+"thickness",M.thickness*("fraction"===H?1/F:F),z)):(F=R?N.w:N.h,l(L+"len",M.len*("fraction"===H?1/F:F),z))}E[I][z]=k(K);if(-1!==
["swapxy","swapxyaxes","orientation","orientationaxes"].indexOf(I)){if("orientation"===I){if(J.set(H),K=C.x&&!C.y?"h":"v",(J.get()||K)===G.orientation)continue}else"orientationaxes"===I&&(C.orientation={v:"h",h:"v"}[G.orientation]);V.swapXYData(C);x.calc=x.clearAxisTypes=!0}else-1!==W.dataArrayContainers.indexOf(J.parts[0])?(V.manageArrayContainers(J,H,E),x.calc=!0):(D?D.arrayOk&&!ca.traceIs(G,"regl")&&(P.isArrayOrTypedArray(H)||P.isArrayOrTypedArray(K))?x.calc=!0:Ka.update(x,D):x.calc=!0,J.set(H))}}-1!==
["swapxyaxes","orientationaxes"].indexOf(I)&&U.swap(a,c);"orientationaxes"===I&&(z=S(a.layout,"hovermode"),"x"===z.get()?z.set("y"):"y"===z.get()&&z.set("x"));if(-1!==["orientation","type"].indexOf(I)){var T=[];for(z=0;z<c.length;z++)B=m[c[z]],ca.traceIs(B,"cartesian")&&(e(B.xaxis||"x"),e(B.yaxis||"y"));l(T.map(f),!0,0);l(T.map(g),[0,1],0)}}}if(x.calc||x.plot)x.fullReplot=!0;return{flags:x,undoit:E,redoit:y,traces:c,eventData:P.extendDeepNoArrays([],[w,c])}}function A(a){function b(b,c){a[c]=a[b];
delete a[b]}var c=P.counterRegex("axis",".title",!1,!1),d=/colorbar\.title$/,e=Object.keys(a),f;for(f=0;f<e.length;f++){var g=e[f];var k=a[g];"title"!==g&&!c.test(g)&&!d.test(g)||"string"!==typeof k&&"number"!==typeof k?-1<g.indexOf("titlefont")?b(g,g.replace("titlefont","title.font")):-1<g.indexOf("titleposition")?b(g,g.replace("titleposition","title.position")):-1<g.indexOf("titleside")?b(g,g.replace("titleside","title.side")):-1<g.indexOf("titleoffset")&&b(g,g.replace("titleoffset","title.offset")):
b(g,g.replace("title","title.text"))}}function y(a,b,c){a=P.getGraphDiv(a);V.clearPromiseQueue(a);if(a.framework&&a.framework.isPolar)return Promise.resolve(a);var d={};if("string"===typeof b)d[b]=c;else if(P.isPlainObject(b))d=P.extendFlat({},b);else return P.warn("Relayout fail.",b,c),Promise.reject();Object.keys(d).length&&(a.changed=!0);var e=F(a,d);b=e.flags;b.calc&&(a.calcdata=void 0);c=[W.previousPromises];b.layoutReplot?c.push(ia.layoutReplot):Object.keys(d).length&&(w(a,b,e)||W.supplyDefaults(a),
b.legend&&c.push(ia.doLegend),b.layoutstyle&&c.push(ia.layoutStyles),b.axrange&&x(c,e.rangesAltered),b.ticks&&c.push(ia.doTicksRelayout),b.modebar&&c.push(ia.doModeBar),b.camera&&c.push(ia.doCamera),c.push(p));c.push(W.rehover);da.add(a,y,[a,e.undoit],y,[a,e.redoit]);(d=P.syncOrAsync(c,a))&&d.then||(d=Promise.resolve(a));return d.then(function(){a.emit("plotly_relayout",e.eventData);return a})}function w(a,b,c){var d=a._fullLayout;if(!b.axrange)return!1;for(var e in b)if("axrange"!==e&&b[e])return!1;
for(var f in c.rangesAltered)if(c=U.id2name(f),b=a.layout[c],c=d[c],c.autorange=b.autorange,c.range=b.range.slice(),c.cleanRange(),c._matchGroup)for(var g in c._matchGroup)g!==f&&(b=d[U.id2name(g)],b.autorange=c.autorange,b.range=c.range.slice(),b._input.range=c.range.slice());return!0}function x(a,b){a.push(function(a){(a=a._fullLayout._zoomlayer)&&Z(a)},ia.doAutoRangeAndConstraints,b?function(a){var c=[],d=!0,e;for(e in b){var f=U.getFromId(a,e);c.push(e);if(f._matchGroup)for(var g in f._matchGroup)b[g]||
c.push(g);f.automargin&&(d=!1)}return U.draw(a,c,{skipTitle:d})}:function(a){return U.draw(a,"redraw")},ia.drawData,ia.finalDraw)}function F(a,b){function c(a,d){if(Array.isArray(a))a.forEach(function(a){c(a,d)});else if(!(a in b||V.hasParent(b,a))){var f=g(e,a);a in v||(v[a]=k(f.get()));void 0!==d&&f.set(d)}}function d(a){a=U.name2id(a.split(".")[0]);t[a]=1;return a}var e=a.layout,f=a._fullLayout,g=r(f._preGUI,f._guiEditing),h=Object.keys(b),l=U.list(a),n=P.extendDeepAll({},b),q={},u,p;A(b);h=Object.keys(b);
for(u=0;u<h.length;u++)if(0===h[u].indexOf("allaxes")){for(p=0;p<l.length;p++){var m=l[p]._id.substr(1);m=-1!==m.indexOf("scene")?m+".":"";m=h[u].replace("allaxes",m+l[p]._name);b[m]||(b[m]=b[h[u]])}delete b[h[u]]}h=Ka.layoutFlags();l={};var v={},t={},w,z;for(z in b){if(V.hasParent(b,z))throw Error("cannot set "+z+" and a parent attribute simultaneously");u=g(e,z);p=b[z];for(m=u.parts.length-1;0<m&&"string"!==typeof u.parts[m];)m--;var x=u.parts[m],y=u.parts[m-1]+"."+x,E=u.parts.slice(0,m).join("."),
I=S(a.layout,E).get(),D=S(f,E).get(),J=u.get();if(void 0!==p){l[z]=p;v[z]="reverse"===x?p:k(J);if((m=Y.getLayoutValObject(f,u.parts))&&m.impliedEdits&&null!==p)for(var C in m.impliedEdits)c(P.relativeAttr(z,C),m.impliedEdits[C]);-1!==["width","height"].indexOf(z)?p?(c("autosize",null),y="height"===z?"width":"height",c(y,f[y])):f[z]=a._initialAutoSize[z]:"autosize"===z?(c("width",p?null:f.width),c("height",p?null:f.height)):y.match(Ha)?(d(y),S(f,E+"._inputRange").set(null)):y.match(Ba)?(d(y),S(f,E+
"._inputRange").set(null),y=S(f,E).get(),y._inputDomain&&(y._input.domain=y._inputDomain.slice())):y.match(va)&&S(f,E+"._inputDomain").set(null);if("type"===x){var G=I;y="linear"===D.type&&"log"===p;var K="log"===D.type&&"linear"===p;y||K?(G&&G.range?D.autorange?y&&(G.range=G.range[1]>G.range[0]?[1,2]:[2,1]):(K=G.range[0],G=G.range[1],y?(0>=K&&0>=G&&c(E+".autorange",!0),0>=K?K=G/1E6:0>=G&&(G=K/1E6),c(E+".range[0]",Math.log(K)/Math.LN10),c(E+".range[1]",Math.log(G)/Math.LN10)):(c(E+".range[0]",Math.pow(10,
K)),c(E+".range[1]",Math.pow(10,G)))):c(E+".autorange",!0),Array.isArray(f._subplots.polar)&&f._subplots.polar.length&&f[u.parts[0]]&&"radialaxis"===u.parts[1]&&delete f[u.parts[0]]._subplot.viewInitial["radialaxis.range"],ca.getComponentMethod("annotations","convertCoords")(a,D,p,c),ca.getComponentMethod("images","convertCoords")(a,D,p,c)):(c(E+".autorange",!0),c(E+".range",null));S(f,E+"._inputRange").set(null)}else x.match(wa)&&(y=S(f,z).get(),(G=(p||{}).type)&&"-"!==G||(G="linear"),ca.getComponentMethod("annotations",
"convertCoords")(a,y,G,c),ca.getComponentMethod("images","convertCoords")(a,y,G,c));if(y=sa.containerArrayMatch(z)){var H=y.array;u=y.index;x=y.property;m=m||{editType:"calc"};""!==u&&""===x&&(sa.isAddVal(p)?v[z]=null:sa.isRemoveVal(p)?v[z]=(S(e,H).get()||[])[u]:P.warn("unrecognized full object value",b));Ka.update(h,m);q[H]||(q[H]={});(m=q[H][u])||(m=q[H][u]={});m[x]=p;delete b[z]}else"reverse"===x?(I.range?I.range.reverse():(c(E+".autorange",!0),I.range=[1,0]),D.autorange?h.calc=!0:h.plot=!0):(f._has("scatter-like")&&
f._has("regl")&&"dragmode"===z&&("lasso"===p||"select"===p)&&"lasso"!==J&&"select"!==J?h.plot=!0:f._has("gl2d")?h.plot=!0:m?Ka.update(h,m):h.calc=!0,u.set(p))}}for(H in q)sa.applyContainerArrayChanges(a,g(e,H),q[H],h,g)||(h.plot=!0);f=f._axisConstraintGroups||[];for(w in t)for(u=0;u<f.length;u++)if(q=f[u],q[w]){h.calc=!0;for(var F in q)t[F]||(U.getFromId(a,F)._constraintShrinkable=!0)}if(B(a)||b.height||b.width)h.plot=!0;if(h.plot||h.calc)h.layoutReplot=!0;return{flags:h,rangesAltered:t,undoit:v,
redoit:l,eventData:n}}function B(a){var b=a._fullLayout,c=b.width,d=b.height;a.layout.autosize&&W.plotAutoSize(a,a.layout,b);return b.width!==c||b.height!==d}function C(a,b,c,d){a=P.getGraphDiv(a);V.clearPromiseQueue(a);if(a.framework&&a.framework.isPolar)return Promise.resolve(a);P.isPlainObject(b)||(b={});P.isPlainObject(c)||(c={});Object.keys(b).length&&(a.changed=!0);Object.keys(c).length&&(a.changed=!0);d=V.coerceTraceIndices(a,d);var e=z(a,P.extendFlat({},b),d);b=e.flags;var f=F(a,P.extendFlat({},
c)),g=f.flags;if(b.calc||g.calc)a.calcdata=void 0;b.clearAxisTypes&&V.clearAxisTypes(a,d,c);c=[];if(b.fullReplot&&g.layoutReplot){var k=a.data,h=a.layout;a.data=void 0;a.layout=void 0;c.push(function(){return m.plot(a,k,h)})}else b.fullReplot?c.push(m.plot):g.layoutReplot?c.push(ia.layoutReplot):(c.push(W.previousPromises),w(a,g,f)||W.supplyDefaults(a),b.style&&c.push(ia.doTraceStyle),b.colorbars&&c.push(ia.doColorBars),g.legend&&c.push(ia.doLegend),g.layoutstyle&&c.push(ia.layoutStyles),g.axrange&&
x(c,f.rangesAltered),g.ticks&&c.push(ia.doTicksRelayout),g.modebar&&c.push(ia.doModeBar),g.camera&&c.push(ia.doCamera),c.push(p));c.push(W.rehover);da.add(a,C,[a,e.undoit,f.undoit,e.traces],C,[a,e.redoit,f.redoit,e.traces]);(c=P.syncOrAsync(c,a))&&c.then||(c=Promise.resolve(a));return c.then(function(){a.emit("plotly_update",{data:e.eventData,layout:f.eventData});return a})}function D(a){return function(b){b._fullLayout._guiEditing=!0;var c=a.apply(null,arguments);b._fullLayout._guiEditing=!1;return c}}
function G(a,b){for(var c=0;c<b.length;c++){var d=b[c],e=a.match(d.pattern);if(e)return{head:e[1],attr:d.attr}}}function H(a,b){var c=S(b,a).get();if(void 0!==c)return c;a=a.split(".");for(a.pop();1<a.length;)if(a.pop(),c=S(b,a.join(".")+".uirevision").get(),void 0!==c)return c;return b.uirevision}function E(a,b){var c=P.isPlainObject(a),d=Array.isArray(a);return c||d?(c&&P.isPlainObject(b)||d&&Array.isArray(b))&&JSON.stringify(a)===JSON.stringify(b):a===b}function K(a,b,c,d){var e=d._preGUI,f,g,
h,l=[],n={};for(f in e){if(g=G(f,pa)){if(g=g.attr||g.head+".uirevision",(g=(h=S(d,g).get())&&H(g,b))&&g===h){h=e[f];null===h&&(h=void 0);g=S(b,f);var r=g.get();if(E(r,h)){void 0===r&&"autorange"===f.substr(f.length-9)&&l.push(f.substr(0,f.length-10));g.set(k(S(d,f).get()));continue}}}else P.warn("unrecognized GUI edit: "+f);delete e[f];"range["===f.substr(f.length-8,6)&&(n[f.substr(0,f.length-9)]=1)}for(e=0;e<l.length;e++)h=l[e],n[h]&&(h=S(b,h).get())&&delete h.autorange;l=d._tracePreGUI;for(var q in l)for(f in n=
l[q],e=null,n){if(!e){a:{for(e=0;e<c.length;e++)if(c[e]._fullInput.uid===q)break a;e=-1}if(0>e){delete l[q];break}var u=c[e]._fullInput;a:{e=u.index;for(h=0;h<a.length;h++)if(a[h].uid===q){e=h;break a}e=!a[e]||a[e].uid?-1:e}if(0>e){delete l[q];break}e=a[e]}if(g=G(f,ya)){if(g.attr?g=(h=S(d,g.attr).get())&&H(g.attr,b):(h=u.uirevision,g=e.uirevision,void 0===g&&(g=b.uirevision)),g&&g===h&&(h=n[f],null===h&&(h=void 0),g=S(e,f),r=g.get(),E(r,h))){g.set(k(S(u,f).get()));continue}}else P.warn("unrecognized GUI edit: "+
f+" in trace uid "+q);delete n[f]}}function I(a,b,c,d,e,f){var g=b.length===c.length;if(!e&&!g)return{fullReplot:!0,calc:!0};var k=Ka.traceFlags();k.arrays={};k.nChanges=0;k.nChangesAnim=0;d={getValObject:function(a){return Y.getTraceValObject(h,a)},flags:k,immutable:d,transition:e,newDataRevision:f,gd:a};f={};for(a=0;a<b.length;a++)if(c[a]){var h=c[a]._fullInput;W.hasMakesDataTransform(h)&&(h=c[a]);f[h.uid]||(f[h.uid]=1,L(b[a]._fullInput,h,[],d))}if(k.calc||k.plot)k.fullReplot=!0;e&&k.nChanges&&
k.nChangesAnim&&(k.anim=k.nChanges===k.nChangesAnim&&g?"all":"some");return k}function J(a,b,c,d,e){var f=Ka.layoutFlags();f.arrays={};f.rangesAltered={};f.nChanges=0;f.nChangesAnim=0;L(b,c,[],{getValObject:function(a){return Y.getLayoutValObject(c,a)},flags:f,immutable:d,transition:e,gd:a});if(f.plot||f.calc)f.layoutReplot=!0;e&&f.nChanges&&f.nChangesAnim&&(f.anim=f.nChanges===f.nChangesAnim?"all":"some");return f}function L(a,b,c,d){function e(){var a=f.editType;if(n&&-1!==a.indexOf("arraydraw"))P.pushUnique(h.arrays[n],
r);else{Ka.update(h,f);"none"!==a&&h.nChanges++;d.transition&&f.anim&&h.nChangesAnim++;if(Ha.test(m)||Ba.test(m))h.rangesAltered[c[0]]=1;va.test(m)&&S(b,"_inputDomain").set(null);"datarevision"===g&&(h.newDataRevision=1)}}var f,g,k=d.getValObject,h=d.flags,l=d.immutable,n=d.inArray,r=d.arrayIndex;for(g in a){if(h.calc&&!d.transition)return;var q=a[g],u=b[g],p=c.concat(g);var m=p.join(".");if("_"!==g.charAt(0)&&"function"!==typeof q&&q!==u){if(("tick0"===g||"dtick"===g)&&"geo"!==c[0]){var v=b.tickmode;
if("auto"===v||"array"===v||!v)continue}if(!("range"===g&&b.autorange||("zmin"===g||"zmax"===g)&&"contourcarpet"===b.type||!(f=k(p))||f._compareAsJSON&&JSON.stringify(q)===JSON.stringify(u))){v=f.valType;var t="data_array"===f.valType||f.arrayOk,w=Array.isArray(q),z=Array.isArray(u);if(w&&z){var x="_input_"+g,A=a[x];x=b[x];if(Array.isArray(A)&&A===x)continue}if(void 0===u)t&&w?h.calc=!0:e();else if(f._isLinkedToArray){t=[];w=!1;n||(h.arrays[g]=t);z=Math.min(q.length,u.length);A=Math.max(q.length,
u.length);if(z!==A)if("arraydraw"===f.editType)w=!0;else{e();continue}for(v=0;v<z;v++)L(q[v],u[v],p.concat(v),P.extendFlat({inArray:g,arrayIndex:v},d));if(w)for(v=z;v<A;v++)t.push(v)}else!v&&P.isPlainObject(q)?L(q,u,p,d):t?w&&z?(l&&(h.calc=!0),(l||d.newDataRevision)&&e()):w!==z?h.calc=!0:e():w&&z?(q.length!==u.length||String(q)!==String(u))&&e():e()}}}for(g in b)if(!(g in a||"_"===g.charAt(0)||"function"===typeof b[g]))if(f=k(c.concat(g)),("data_array"===f.valType||f.arrayOk)&&Array.isArray(b[g])){h.calc=
!0;break}else e()}function M(a,b){for(var c in a)if("_"!==c.charAt(0)){var d=a[c],e=b[c];if(d!==e)if(P.isPlainObject(d)&&P.isPlainObject(e)){if(M(d,e))return!0}else if(Array.isArray(d)&&Array.isArray(e)){if(d.length!==e.length)return!0;for(var f=0;f<d.length;f++)if(d[f]!==e[f])if(P.isPlainObject(d[f])&&P.isPlainObject(e[f])){if(M(d[f],e[f]))return!0}else return!0}else return!0}}function N(a){var b=O.select(a),c=a._fullLayout;c._container=b.selectAll(".plot-container").data([0]);c._container.enter().insert("div",
":first-child").classed("plot-container",!0).classed("plotly",!0);c._paperdiv=c._container.selectAll(".svg-container").data([0]);c._paperdiv.enter().append("div").classed("svg-container",!0).style("position","relative");c._glcontainer=c._paperdiv.selectAll(".gl-container").data([{}]);c._glcontainer.enter().append("div").classed("gl-container",!0);c._paperdiv.selectAll(".main-svg").remove();c._paperdiv.select(".modebar-container").remove();c._paper=c._paperdiv.insert("svg",":first-child").classed("main-svg",
!0);c._toppaper=c._paperdiv.append("svg").classed("main-svg",!0);c._modebardiv=c._paperdiv.append("div");c._hoverpaper=c._paperdiv.append("svg").classed("main-svg",!0);if(!c._uid){var d={};O.selectAll("defs").each(function(){this.id&&(d[this.id.split("-")[1]]=1)});c._uid=P.randstr(d)}c._paperdiv.selectAll(".main-svg").attr(oa.svgAttrs);c._defs=c._paper.append("defs").attr("id","defs-"+c._uid);c._clips=c._defs.append("g").classed("clips",!0);c._topdefs=c._toppaper.append("defs").attr("id","topdefs-"+
c._uid);c._topclips=c._topdefs.append("g").classed("clips",!0);c._bgLayer=c._paper.append("g").classed("bglayer",!0);c._draggers=c._paper.append("g").classed("draglayer",!0);b=c._paper.append("g").classed("layer-below",!0);c._imageLowerLayer=b.append("g").classed("imagelayer",!0);c._shapeLowerLayer=b.append("g").classed("shapelayer",!0);c._cartesianlayer=c._paper.append("g").classed("cartesianlayer",!0);c._polarlayer=c._paper.append("g").classed("polarlayer",!0);c._ternarylayer=c._paper.append("g").classed("ternarylayer",
!0);c._geolayer=c._paper.append("g").classed("geolayer",!0);c._pielayer=c._paper.append("g").classed("pielayer",!0);c._sunburstlayer=c._paper.append("g").classed("sunburstlayer",!0);c._glimages=c._paper.append("g").classed("glimages",!0);b=c._toppaper.append("g").classed("layer-above",!0);c._imageUpperLayer=b.append("g").classed("imagelayer",!0);c._shapeUpperLayer=b.append("g").classed("shapelayer",!0);c._infolayer=c._toppaper.append("g").classed("infolayer",!0);c._menulayer=c._toppaper.append("g").classed("menulayer",
!0);c._zoomlayer=c._toppaper.append("g").classed("zoomlayer",!0);c._hoverlayer=c._hoverpaper.append("g").classed("hoverlayer",!0);c._modebardiv.classed("modebar-container",!0).style("position","absolute").style("top","0px").style("right","0px");a.emit("plotly_framework")}var O=a("d3"),R=a("fast-isnumeric"),T=a("has-hover"),P=a("../lib"),S=P.nestedProperty,ba=a("../lib/events"),da=a("../lib/queue"),ca=a("../registry"),Y=a("./plot_schema"),W=a("../plots/plots"),ea=a("../plots/polar/legacy"),U=a("../plots/cartesian/axes"),
na=a("../components/drawing"),X=a("../components/color"),ha=a("../components/colorbar/connect"),fa=a("../plots/cartesian/graph_interact").initInteractions,oa=a("../constants/xmlns_namespaces"),ua=a("../lib/svg_text_utils"),Z=a("../plots/cartesian/select").clearSelect,qa=a("./plot_config").dfltConfig,sa=a("./manage_arrays"),V=a("./helpers"),ia=a("./subroutines"),Ka=a("./edit_types"),wa=a("../plots/cartesian/constants").AX_NAME_PATTERN,Aa=0;m.plot=function(a,b,c,d){function f(){for(var b=v._basePlotModules,
c=0;c<b.length;c++)b[c].drawFramework&&b[c].drawFramework(a);!v._glcanvas&&v._has("gl")&&(v._glcanvas=v._glcontainer.selectAll(".gl-canvas").data([{key:"contextLayer",context:!0,pick:!1},{key:"focusLayer",context:!1,pick:!1},{key:"pickLayer",context:!1,pick:!0}],function(a){return a.key}),v._glcanvas.enter().append("canvas").attr("class",function(a){return"gl-canvas gl-canvas-"+a.key.replace("Layer","")}).style({position:"absolute",top:0,left:0,overflow:"visible","pointer-events":"none"}));if(v._glcanvas&&
(v._glcanvas.attr("width",v.width).attr("height",v.height),(b=v._glcanvas.data()[0].regl)&&(Math.floor(v.width)!==b._gl.drawingBufferWidth||Math.floor(v.height)!==b._gl.drawingBufferHeight)))if(z)P.error("WebGL context buffer and canvas dimensions do not match due to browser/WebGL bug.");else return P.log("WebGL context buffer and canvas dimensions do not match due to browser/WebGL bug. Clearing graph and plotting again."),W.cleanPlot([],{},a._fullData,v),W.supplyDefaults(a),v=a._fullLayout,W.doCalcdata(a),
z++,f();"h"===v.modebar.orientation?v._modebardiv.style("height",null).style("width","100%"):v._modebardiv.style("width",null).style("height",v.height+"px");return W.previousPromises(a)}function g(){var b=a.calcdata,c;W.clearAutoMarginIds(a);ia.drawMarginPushers(a);U.allowAutoMargin(a);for(c=0;c<b.length;c++){var d=b[c];var e=d[0].trace;var f=e._module.colorbar;!0===e.visible&&f?ha(a,d,f):W.autoMargin(a,"cb"+e.uid)}W.doAutoMargin(a);return W.previousPromises(a)}function k(){if(t)return P.syncOrAsync([ca.getComponentMethod("shapes",
"calcAutorange"),ca.getComponentMethod("annotations","calcAutorange"),h],a);h()}function h(){a._transitioning||(ia.doAutoRangeAndConstraints(a),u&&U.saveRangeInitial(a),ca.getComponentMethod("rangeslider","calcAutorange")(a))}function l(){return U.draw(a,u?"":"redraw")}a=P.getGraphDiv(a);ba.init(a);if(P.isPlainObject(b)){var r=b;b=r.data;c=r.layout;d=r.config;var q=r.frames}if(!1===ba.triggerHandler(a,"plotly_beforeplot",[b,c,d]))return Promise.reject();b||c||P.isPlotDiv(a)||P.warn("Calling Plotly.plot as if redrawing but this container doesn't yet have a plot.",
a);e(a,d);c||(c={});O.select(a).classed("js-plotly-plot",!0);na.makeTester();Array.isArray(a._promises)||(a._promises=[]);var u=0===(a.data||[]).length&&Array.isArray(b);Array.isArray(b)&&(V.cleanData(b),u?a.data=b:a.data.push.apply(a.data,b),a.empty=!1);if(!a.layout||u)a.layout=V.cleanLayout(c);if(a._dragging&&!a._transitioning)return a._replotPending=!0,Promise.reject();a._replotPending=!1;W.supplyDefaults(a);var v=a._fullLayout;d=v._has("cartesian");if(!v._has("polar")&&b&&b[0]&&b[0].r)return P.log("Legacy polar charts are deprecated!"),
n(a,b,c);v._replotting=!0;u&&N(a);a.framework!==N&&(a.framework=N,N(a));na.initGradients(a);u&&U.saveShowSpikeInitial(a);var t=!a.calcdata||a.calcdata.length!==(a._fullData||[]).length;t&&W.doCalcdata(a);for(b=0;b<a.calcdata.length;b++)a.calcdata[b][0].trace=a._fullData[b];a._context.responsive?a._responsiveChartHandler||(a._responsiveChartHandler=function(){W.resize(a)},window.addEventListener("resize",a._responsiveChartHandler)):P.clearResponsive(a);var w=JSON.stringify(v._size),z=0;b=[W.previousPromises,
function(){if(q)return m.addFrames(a,q)},f,g,function(){if(JSON.stringify(v._size)!==w)return P.syncOrAsync([g,ia.layoutStyles],a)}];d&&b.push(k);b.push(ia.layoutStyles);d&&b.push(l);b.push(ia.drawData,ia.finalDraw,fa,W.addLinks,W.rehover,W.doAutoMargin,W.previousPromises);(b=P.syncOrAsync(b,a))&&b.then||(b=Promise.resolve());return b.then(function(){p(a);return a})};m.setPlotConfig=function(a){return P.extendFlat(qa,a)};m.redraw=function(a){a=P.getGraphDiv(a);if(!P.isPlotDiv(a))throw Error("This element is not a Plotly plot: "+
a);V.cleanData(a.data);V.cleanLayout(a.layout);a.calcdata=void 0;return m.plot(a).then(function(){a.emit("plotly_redraw");return a})};m.newPlot=function(a,b,c,d){a=P.getGraphDiv(a);W.cleanPlot([],{},a._fullData||[],a._fullLayout||{});W.purge(a);return m.plot(a,b,c,d)};m.extendTraces=function Ja(a,b,c,e){a=P.getGraphDiv(a);var g=d(a,b,c,e,function(a,b,c){if(P.isTypedArray(a))if(0>c){var d=new a.constructor(0);a=f(a,b);if(0>c)var e=a;else e=d,d=a}else if(e=new a.constructor(c),d=new a.constructor(a.length+
b.length-c),c===b.length)e.set(b),d.set(a);else if(c<b.length)c=b.length-c,e.set(b.subarray(c)),d.set(a),d.set(b.subarray(0,c),a.length);else{c-=b.length;var g=a.length-c;e.set(a.subarray(g));e.set(b,c);d.set(a.subarray(0,g))}else e=a.concat(b),d=0<=c&&c<e.length?e.splice(0,e.length-c):[];return[e,d]}),k=m.redraw(a);da.add(a,m.prependTraces,[a,g.update,c,g.maxPoints],Ja,arguments);return k};m.prependTraces=function Na(a,b,c,e){a=P.getGraphDiv(a);var g=d(a,b,c,e,function(a,b,c){if(P.isTypedArray(a))if(0>=
c){var d=new a.constructor(0);a=f(b,a);if(0>c)var e=a;else e=d,d=a}else e=new a.constructor(c),d=new a.constructor(a.length+b.length-c),c===b.length?(e.set(b),d.set(a)):c<b.length?(c=b.length-c,e.set(b.subarray(0,c)),d.set(b.subarray(c)),d.set(a,c)):(c-=b.length,e.set(b),e.set(a.subarray(0,c),b.length),d.set(a.subarray(c)));else e=b.concat(a),d=0<=c&&c<e.length?e.splice(c,e.length):[];return[e,d]}),k=m.redraw(a);da.add(a,m.extendTraces,[a,g.update,c,g.maxPoints],Na,arguments);return k};m.addTraces=
function Na(a,b,c){a=P.getGraphDiv(a);var d=[],e=m.deleteTraces,f=[a,d],g=[a,b],k;q(a,b,c);Array.isArray(b)||(b=[b]);b=b.map(function(a){return P.extendFlat({},a)});V.cleanData(b);for(k=0;k<b.length;k++)a.data.push(b[k]);for(k=0;k<b.length;k++)d.push(-b.length+k);if("undefined"===typeof c)return b=m.redraw(a),da.add(a,e,f,Na,g),b;Array.isArray(c)||(c=[c]);try{u(a,d,c)}catch(Oa){throw a.data.splice(a.data.length-b.length,b.length),Oa;}da.startSequence(a);da.add(a,e,f,Na,g);b=m.moveTraces(a,d,c);da.stopSequence(a);
return b};m.deleteTraces=function Na(a,c){a=P.getGraphDiv(a);var d=[],e=m.addTraces,f=[a,d,c],g=[a,c],k;if("undefined"===typeof c)throw Error("indices must be an integer or array of integers.");Array.isArray(c)||(c=[c]);l(a,c,"indices");c=b(c,a.data.length-1);c.sort(P.sorterDes);for(k=0;k<c.length;k+=1){var h=a.data.splice(c[k],1)[0];d.push(h)}c=m.redraw(a);da.add(a,e,f,Na,g);return c};m.moveTraces=function rb(a,c,d){a=P.getGraphDiv(a);var e=[],f=[],g=[a,d,c],k=[a,c,d],h;u(a,c,d);c=Array.isArray(c)?
c:[c];if("undefined"===typeof d)for(d=[],h=0;h<c.length;h++)d.push(-c.length+h);d=Array.isArray(d)?d:[d];c=b(c,a.data.length-1);d=b(d,a.data.length-1);for(h=0;h<a.data.length;h++)-1===c.indexOf(h)&&e.push(a.data[h]);for(h=0;h<c.length;h++)f.push({newIndex:d[h],trace:a.data[c[h]]});f.sort(function(a,b){return a.newIndex-b.newIndex});for(h=0;h<f.length;h+=1)e.splice(f[h].newIndex,0,f[h].trace);a.data=e;c=m.redraw(a);da.add(a,rb,g,rb,k);return c};m.restyle=c;m._storeDirectGUIEdit=function(a,b,c){for(var d in c){var e=
S(a,d);v(d,e.get(),c[d],b)}};m.relayout=y;var Ha=/^[xyz]axis[0-9]*\.range(\[[0|1]\])?$/,Ba=/^[xyz]axis[0-9]*\.autorange$/,va=/^[xyz]axis[0-9]*\.domain(\[[0|1]\])?$/;m.update=C;m._guiRestyle=D(c);m._guiRelayout=D(y);m._guiUpdate=D(C);var pa=[{pattern:/^hiddenlabels/,attr:"legend.uirevision"},{pattern:/^((x|y)axis\d*)\.((auto)?range|title\.text)/},{pattern:/axis\d*\.showspikes$/,attr:"modebar.uirevision"},{pattern:/(hover|drag)mode$/,attr:"modebar.uirevision"},{pattern:/^(scene\d*)\.camera/},{pattern:/^(geo\d*)\.(projection|center)/},
{pattern:/^(ternary\d*\.[abc]axis)\.(min|title\.text)$/},{pattern:/^(polar\d*\.radialaxis)\.((auto)?range|angle|title\.text)/},{pattern:/^(polar\d*\.angularaxis)\.rotation/},{pattern:/^(mapbox\d*)\.(center|zoom|bearing|pitch)/},{pattern:/^legend\.(x|y)$/,attr:"editrevision"},{pattern:/^(shapes|annotations)/,attr:"editrevision"},{pattern:/^title\.text$/,attr:"editrevision"}],ya=[{pattern:/^selectedpoints$/,attr:"selectionrevision"},{pattern:/(^|value\.)visible$/,attr:"legend.uirevision"},{pattern:/^dimensions\[\d+\]\.constraintrange/},
{pattern:/^node\.(x|y)/},{pattern:/^level$/},{pattern:/(^|value\.)name$/},{pattern:/colorbar\.title\.text$/},{pattern:/colorbar\.(x|y)$/,attr:"editrevision"}];m.react=function(a,b,c,d){function f(){return m.addFrames(a,n)}var g;a=P.getGraphDiv(a);var k=a._fullData,h=a._fullLayout;if(P.isPlotDiv(a)&&k&&h){if(P.isPlainObject(b)){var l=b;b=l.data;c=l.layout;d=l.config;var n=l.frames}l=!1;d&&(l=P.extendDeep({},a._context),a._context=void 0,e(a,d),l=M(l,a._context));a.data=b||[];V.cleanData(a.data);a.layout=
c||{};V.cleanLayout(a.layout);K(a.data,a.layout,k,h);W.supplyDefaults(a,{skipUpdateCalc:!0});var r=a._fullData;d=a._fullLayout;var q=void 0===d.datarevision,u=d.transition,v=J(a,h,d,q,u),t=I(a,k,r,q,u,v.newDataRevision);B(a)&&(v.layoutReplot=!0);t.calc||v.calc?a.calcdata=void 0:W.supplyDefaultsUpdateCalc(a.calcdata,r);k=[];n&&(a._transitionData={},W.createTransitionData(a),k.push(f));if(d.transition&&!l&&(t.anim||v.anim))W.doCalcdata(a),ia.doAutoRangeAndConstraints(a),k.push(function(){return W.transitionFromReact(a,
t,v,h)});else if(t.fullReplot||v.layoutReplot||l)a._fullLayout._skipDefaults=!0,k.push(m.plot);else{for(g in v.arrays)if(l=v.arrays[g],l.length)if(d=ca.getComponentMethod(g,"drawOne"),d!==P.noop)for(r=0;r<l.length;r++)d(a,l[r]);else{l=ca.getComponentMethod(g,"draw");if(l===P.noop)throw Error("cannot draw components: "+g);l(a)}k.push(W.previousPromises);t.style&&k.push(ia.doTraceStyle);t.colorbars&&k.push(ia.doColorBars);v.legend&&k.push(ia.doLegend);v.layoutstyle&&k.push(ia.layoutStyles);v.axrange&&
x(k);v.ticks&&k.push(ia.doTicksRelayout);v.modebar&&k.push(ia.doModeBar);v.camera&&k.push(ia.doCamera);k.push(p)}k.push(W.rehover);(g=P.syncOrAsync(k,a))&&g.then||(g=Promise.resolve(a))}else g=m.newPlot(a,b,c,d);return g.then(function(){a.emit("plotly_react",{data:b,layout:c});return a})};m.animate=function(a,b,c){function d(a,b){var c=0;return function(){if(a&&++c===b)return a()}}a=P.getGraphDiv(a);if(!P.isPlotDiv(a))throw Error("This element is not a Plotly plot: "+a+". It's likely that you've failed to create a plot before animating it. For more details, see https://plot.ly/javascript/animations/");
var e=a._transitionData;e._frameQueue||(e._frameQueue=[]);c=W.supplyAnimationDefaults(c);var f=c.transition,g=c.frame;void 0===e._frameWaitingCnt&&(e._frameWaitingCnt=0);return new Promise(function(k,h){function l(){if(0!==e._frameQueue.length){for(;e._frameQueue.length;){var b=e._frameQueue.pop();if(b.onInterrupt)b.onInterrupt()}a.emit("plotly_animationinterrupted",[])}}function n(b){if(0!==b.length){for(var l=0;l<b.length;l++){var n="byname"===b[l].type?W.computeFrame(a,b[l].name):b[l].data;var r=
l;r=Array.isArray(g)?r>=g.length?g[0]:g[r]:g;var u=l;u=Array.isArray(f)?u>=f.length?f[0]:f[u]:f;u.duration=Math.min(u.duration,r.duration);n={frame:n,name:b[l].name,frameOpts:r,transitionOpts:u};l===b.length-1&&(n.onComplete=d(k,2),n.onInterrupt=h);e._frameQueue.push(n)}"immediate"===c.mode&&(e._lastFrameAt=-Infinity);e._animationRaf||q()}}function r(){if(e._currentFrame&&e._currentFrame.onComplete)e._currentFrame.onComplete();var b=e._currentFrame=e._frameQueue.shift();if(b){var c=b.name?b.name.toString():
null;a._fullLayout._currentFrame=c;e._lastFrameAt=Date.now();e._timeToNext=b.frameOpts.duration;W.transition(a,b.frame.data,b.frame.layout,V.coerceTraceIndices(a,b.frame.traces),b.frameOpts,b.transitionOpts).then(function(){if(b.onComplete)b.onComplete()});a.emit("plotly_animatingframe",{name:c,frame:b.frame,animation:{frame:b.frameOpts,transition:b.transitionOpts}})}else a.emit("plotly_animated"),window.cancelAnimationFrame(e._animationRaf),e._animationRaf=null}function q(){a.emit("plotly_animating");
e._lastFrameAt=-Infinity;e._timeToNext=0;e._runningTransitions=0;e._currentFrame=null;var b=function(){e._animationRaf=window.requestAnimationFrame(b);Date.now()-e._lastFrameAt>e._timeToNext&&r()};b()}function u(a){Array.isArray(f)?a.transitionOpts=p>=f.length?f[p]:f[0]:a.transitionOpts=f;p++;return a}var p=0,m,v=[],t=void 0===b||null===b;var w=Array.isArray(b);if(!t&&!w&&P.isPlainObject(b))v.push({type:"object",data:u(P.extendFlat({},b))});else if(t||-1!==["string","number"].indexOf(typeof b))for(w=
0;w<e._frames.length;w++)(m=e._frames[w])&&(t||String(m.group)===String(b))&&v.push({type:"byname",name:String(m.name),data:u({name:m.name})});else if(w)for(w=0;w<b.length;w++)m=b[w],-1!==["number","string"].indexOf(typeof m)?(m=String(m),v.push({type:"byname",name:m,data:u({name:m})})):P.isPlainObject(m)&&v.push({type:"object",data:u(P.extendFlat({},m))});for(w=0;w<v.length;w++)if(m=v[w],"byname"===m.type&&!e._frameHash[m.data.name]){P.warn('animate failure: frame not found: "'+m.data.name+'"');
h();return}-1!==["next","immediate"].indexOf(c.mode)&&l();"reverse"===c.direction&&v.reverse();var z=a._fullLayout._currentFrame;if(z&&c.fromcurrent){t=-1;for(w=0;w<v.length;w++)if(m=v[w],"byname"===m.type&&m.name===z){t=w;break}if(0<t&&t<v.length-1){z=[];for(w=0;w<v.length;w++)m=v[w],("byname"!==v[w].type||w>t)&&z.push(m);v=z}}0<v.length?n(v):(a.emit("plotly_animated"),k())})};m.addFrames=function(a,b,c){a=P.getGraphDiv(a);if(null===b||void 0===b)return Promise.resolve();if(!P.isPlotDiv(a))throw Error("This element is not a Plotly plot: "+
a+". It's likely that you've failed to create a plot before adding frames. For more details, see https://plot.ly/javascript/animations/");var d,e=a._transitionData._frames,f=a._transitionData._frameHash;if(!Array.isArray(b))throw Error("addFrames failure: frameList must be an Array of frame definitions"+b);var g=e.length+2*b.length;var k=[],h={};for(d=b.length-1;0<=d;d--)if(P.isPlainObject(b[d])){var l=b[d].name;var n=(f[l]||h[l]||{}).name,r=b[d].name,q=f[n]||h[n];n&&r&&"number"===typeof r&&q&&5>
Aa&&(Aa++,P.warn('addFrames: overwriting frame "'+(f[n]||h[n]).name+'" with a frame whose name of type "number" also equates to "'+n+'". This is valid but may potentially lead to unexpected behavior since all plotly.js frame names are stored internally as strings.'),5===Aa&&P.warn("addFrames: This API call has yielded too many of these warnings. For the rest of this call, further warnings about numeric frame names will be suppressed."));h[l]={name:l};k.push({frame:W.supplyFrameDefaults(b[d]),index:c&&
void 0!==c[d]&&null!==c[d]?c[d]:g+d})}k.sort(function(a,b){return a.index>b.index?-1:a.index<b.index?1:0});b=[];c=[];h=e.length;for(d=k.length-1;0<=d;d--){g=k[d].frame;"number"===typeof g.name&&P.warn("Warning: addFrames accepts frames with numeric names, but the numbers areimplicitly cast to strings");if(!g.name)for(;f[g.name="frame "+a._transitionData._counter++];);if(f[g.name]){for(l=0;l<e.length&&(e[l]||{}).name!==g.name;l++);b.push({type:"replace",index:l,value:g});c.unshift({type:"replace",
index:l,value:e[l]})}else l=Math.max(0,Math.min(k[d].index,h)),b.push({type:"insert",index:l,value:g}),c.unshift({type:"delete",index:l}),h++}e=d=W.modifyFrames;f=[a,c];k=[a,b];da&&da.add(a,d,f,e,k);return W.modifyFrames(a,b)};m.deleteFrames=function(a,b){a=P.getGraphDiv(a);if(!P.isPlotDiv(a))throw Error("This element is not a Plotly plot: "+a);var c,d=a._transitionData._frames,e=[],f=[];if(!b)for(b=[],c=0;c<d.length;c++)b.push(c);b=b.slice(0);b.sort();for(c=b.length-1;0<=c;c--){var g=b[c];e.push({type:"delete",
index:g});f.unshift({type:"insert",index:g,value:d[g]})}c=b=W.modifyFrames;f=[a,f];g=[a,e];da&&da.add(a,b,f,c,g);return W.modifyFrames(a,e)};m.purge=function(a){a=P.getGraphDiv(a);var b=a._fullLayout||{};W.cleanPlot([],{},a._fullData||[],b);W.purge(a);ba.purge(a);b._container&&b._container.remove();delete a._context;return a}},{"../components/color":577,"../components/colorbar/connect":579,"../components/drawing":598,"../constants/xmlns_namespaces":678,"../lib":700,"../lib/events":689,"../lib/queue":715,
"../lib/svg_text_utils":724,"../plots/cartesian/axes":748,"../plots/cartesian/constants":754,"../plots/cartesian/graph_interact":757,"../plots/cartesian/select":765,"../plots/plots":810,"../plots/polar/legacy":818,"../registry":829,"./edit_types":731,"./helpers":732,"./manage_arrays":734,"./plot_config":736,"./plot_schema":737,"./subroutines":739,d3:154,"fast-isnumeric":221,"has-hover":402}],736:[function(a,t,m){function p(a,h){for(var e in a){var g=a[e];g.valType?h[e]=g.dflt:(h[e]||(h[e]={}),p(g,
h[e]))}}a={staticPlot:{valType:"boolean",dflt:!1},plotlyServerURL:{valType:"string",dflt:"https://plot.ly"},editable:{valType:"boolean",dflt:!1},edits:{annotationPosition:{valType:"boolean",dflt:!1},annotationTail:{valType:"boolean",dflt:!1},annotationText:{valType:"boolean",dflt:!1},axisTitleText:{valType:"boolean",dflt:!1},colorbarPosition:{valType:"boolean",dflt:!1},colorbarTitleText:{valType:"boolean",dflt:!1},legendPosition:{valType:"boolean",dflt:!1},legendText:{valType:"boolean",dflt:!1},shapePosition:{valType:"boolean",
dflt:!1},titleText:{valType:"boolean",dflt:!1}},autosizable:{valType:"boolean",dflt:!1},responsive:{valType:"boolean",dflt:!1},fillFrame:{valType:"boolean",dflt:!1},frameMargins:{valType:"number",dflt:0,min:0,max:.5},scrollZoom:{valType:"flaglist",flags:["cartesian","gl3d","geo","mapbox"],extras:[!0,!1],dflt:"gl3d+geo+mapbox"},doubleClick:{valType:"enumerated",values:[!1,"reset","autosize","reset+autosize"],dflt:"reset+autosize"},showAxisDragHandles:{valType:"boolean",dflt:!0},showAxisRangeEntryBoxes:{valType:"boolean",
dflt:!0},showTips:{valType:"boolean",dflt:!0},showLink:{valType:"boolean",dflt:!1},linkText:{valType:"string",dflt:"Edit chart",noBlank:!0},sendData:{valType:"boolean",dflt:!0},showSources:{valType:"any",dflt:!1},displayModeBar:{valType:"enumerated",values:["hover",!0,!1],dflt:"hover"},showSendToCloud:{valType:"boolean",dflt:!1},modeBarButtonsToRemove:{valType:"any",dflt:[]},modeBarButtonsToAdd:{valType:"any",dflt:[]},modeBarButtons:{valType:"any",dflt:!1},toImageButtonOptions:{valType:"any",dflt:{}},
displaylogo:{valType:"boolean",dflt:!0},watermark:{valType:"boolean",dflt:!1},plotGlPixelRatio:{valType:"number",dflt:2,min:1,max:4},setBackground:{valType:"any",dflt:"transparent"},topojsonURL:{valType:"string",noBlank:!0,dflt:"https://cdn.plot.ly/"},mapboxAccessToken:{valType:"string",dflt:null},logging:{valType:"boolean",dflt:1},queueLength:{valType:"integer",min:0,dflt:0},globalTransforms:{valType:"any",dflt:[]},locale:{valType:"string",dflt:"en-US"},locales:{valType:"any",dflt:{}}};m={};p(a,
m);t.exports={configAttributes:a,dfltConfig:m}},{}],737:[function(a,t,m){function p(a,b){var c,d,e=a._basePlotModules;if(e){for(c=0;c<e.length;c++){var f=e[c];if(f.attrRegex&&f.attrRegex.test(b)){if(f.layoutAttrOverrides)return f.layoutAttrOverrides;if(!g&&f.layoutAttributes)var g=f.layoutAttributes}if((f=f.baseLayoutAttrOverrides)&&b in f)return f[b]}if(g)return g}if(e=a._modules)for(c=0;c<e.length;c++)if((a=e[c].layoutAttributes)&&b in a)return a[b];for(d in k.componentsRegistry)if(f=k.componentsRegistry[d],
!f.schema&&b===f.name)return f.layoutAttributes;return b in z?z[b]:"radialaxis"===b||"angularaxis"===b?F[b]:F.layout[b]||!1}function g(a,b,c){if(!a)return!1;if(a._isLinkedToArray)if(h(b[c]))c++;else if(c<b.length)return!1;for(;c<b.length;c++){var d=a[b[c]];if(G(d))a=d;else break;if(c===b.length-1)break;if(a._isLinkedToArray){if(c++,!h(b[c]))return!1}else if("info_array"===a.valType){c++;d=b[c];if(!h(d))return!1;var e=a.items;if(Array.isArray(e)){if(d>=e.length)return!1;if(2===a.dimensions){c++;if(b.length===
c)break;a=b[c];if(!h(a))return!1;a=e[d][a]}else a=e[d]}else a=e}}return a}function h(a){return a===Math.round(a)&&0<=a}function e(a){if("area"===a){var b={attributes:x};var c={}}else b=k.modules[a]._module,c=b.basePlotModule;var d={type:null},e=D({},v),f=D({},b.attributes);m.crawl(f,function(a,b,c,d,g){r.nestedProperty(e,g).set(void 0);void 0===a&&r.nestedProperty(f,g).set(void 0)});D(d,e);D(d,f);c.attributes&&D(d,c.attributes);d.type=a;a={meta:b.meta||{},attributes:u(d)};b.layoutAttributes&&(c={},
D(c,b.layoutAttributes),a.layoutAttributes=u(c));return a}function n(){var a={},b;D(a,z);for(b in k.subplotsRegistry){var d=k.subplotsRegistry[b];if(d.layoutAttributes)if(Array.isArray(d.attr))for(var e=0;e<d.attr.length;e++)c(a,d,d.attr[e]);else c(a,d,"subplot"===d.attr?d.name:d.attr)}C(a,{radialaxis:F.radialaxis,angularaxis:F.angularaxis});C(a,F.layout);for(b in k.componentsRegistry)if(d=k.componentsRegistry[b],(e=d.schema)&&(e.subplots||e.layout)){if((d=e.subplots)&&d.xaxis&&!d.yaxis)for(var f in d.xaxis)delete a.yaxis[f]}else d.layoutAttributes&&
(e=d.layoutAttributes,d=r.nestedProperty(a,d.name),d.set(D(d.get()||{},e)));return{layoutAttributes:u(a)}}function b(a){var b=D({},k.transformsRegistry[a].attributes);Object.keys(k.componentsRegistry).forEach(function(c){var d=k.componentsRegistry[c];d.schema&&d.schema.transforms&&d.schema.transforms[a]&&Object.keys(d.schema.transforms[a]).forEach(function(c){var e=d.schema.transforms[a][c];c=r.nestedProperty(b,c);c.set(D(c.get()||{},e))})});return{attributes:u(b)}}function l(){var a={frames:r.extendDeepAll({},
A)};u(a);return a.frames}function u(a){q(a);d(a);f(a);return a}function q(a){m.crawl(a,function(a,b,c){m.isValObject(a)?"data_array"===a.valType?(a.role="data",c[b+"src"]={valType:"string",editType:"none"}):!0===a.arrayOk&&(c[b+"src"]={valType:"string",editType:"none"}):G(a)&&(a.role="object")})}function d(a){m.crawl(a,function(a,b,c){if(a){var d=a._isLinkedToArray;d&&(delete a._isLinkedToArray,c[b]={items:{}},c[b].items[d]=a,c[b].role="object")}})}function f(a){function b(a){for(var c in a)if(G(a[c]))b(a[c]);
else if(Array.isArray(a[c]))for(var d=0;d<a[c].length;d++)b(a[c][d]);else a[c]instanceof RegExp&&(a[c]=a[c].toString())}b(a)}function c(a,b,c){a=r.nestedProperty(a,c);b=D({},b.layoutAttributes);b._isSubplotObj=!0;a.set(b)}var k=a("../registry"),r=a("../lib"),v=a("../plots/attributes"),z=a("../plots/layout_attributes"),A=a("../plots/frame_attributes"),y=a("../plots/animation_attributes"),w=a("./plot_config").configAttributes,x=a("../plots/polar/legacy/area_attributes"),F=a("../plots/polar/legacy/axis_attributes"),
B=a("./edit_types"),C=r.extendFlat,D=r.extendDeepAll,G=r.isPlainObject,H=["_isSubplotObj","_isLinkedToArray","_arrayAttrRegexps","_deprecated"];m.IS_SUBPLOT_OBJ="_isSubplotObj";m.IS_LINKED_TO_ARRAY="_isLinkedToArray";m.DEPRECATED="_deprecated";m.UNDERSCORE_ATTRS=H;m.get=function(){var a={};k.allTypes.concat("area").forEach(function(b){a[b]=e(b)});var c={};Object.keys(k.transformsRegistry).forEach(function(a){c[a]=b(a)});return{defs:{valObjects:r.valObjectMeta,metaKeys:H.concat(["description","role",
"editType","impliedEdits"]),editType:{traces:B.traces,layout:B.layout},impliedEdits:{}},traces:a,layout:n(),transforms:c,frames:l(),animation:u(y),config:u(w)}};m.crawl=function(a,b,c,d){var e=c||0;d=d||"";Object.keys(a).forEach(function(c){var f=a[c];if(-1===H.indexOf(c)){var g=(d?d+".":"")+c;b(f,c,a,e,g);m.isValObject(f)||G(f)&&"impliedEdits"!==c&&m.crawl(f,b,e+1,g)}})};m.isValObject=function(a){return a&&void 0!==a.valType};m.findArrayAttributes=function(a){function b(a,b,d,k){e=e.slice(0,k).concat([b]);
f=f.slice(0,k).concat([a&&a._isLinkedToArray]);!a||"data_array"!==a.valType&&!0!==a.arrayOk||"colorbar"===e[k-1]&&("ticktext"===b||"tickvals"===b)||c(g,0,"")}function c(a,b,g){a=a[e[b]];g+=e[b];if(b===e.length-1)r.isArrayOrTypedArray(a)&&d.push(k+g);else if(f[b]){if(Array.isArray(a))for(var h=0;h<a.length;h++)r.isPlainObject(a[h])&&c(a[h],b+1,g+"["+h+"].")}else r.isPlainObject(a)&&c(a,b+1,g+".")}var d=[],e=[],f=[];var g=a;var k="";m.crawl(v,b);a._module&&a._module.attributes&&m.crawl(a._module.attributes,
b);if(a=a.transforms)for(var h=0;h<a.length;h++){var l=a[h],n=l._module;n&&(k="transforms["+h+"].",g=l,m.crawl(n.attributes,b))}return d};m.getTraceValObject=function(a,b){var c=b[0],d=1;if("transforms"===c){if(1===b.length)return v.transforms;c=a.transforms;if(!Array.isArray(c)||!c.length)return!1;d=b[1];if(!h(d)||d>=c.length)return!1;a=(a=(k.transformsRegistry[c[d].type]||{}).attributes)&&a[b[2]];d=3}else if("area"===a.type)a=x[c];else{var e=a._module;e||(e=(k.modules[a.type||v.type.dflt]||{})._module);
if(!e)return!1;a=(a=e.attributes)&&a[c];a||(e=e.basePlotModule)&&e.attributes&&(a=e.attributes[c]);a||(a=v[c])}return g(a,b,d)};m.getLayoutValObject=function(a,b){a=p(a,b[0]);return g(a,b,1)}},{"../lib":700,"../plots/animation_attributes":743,"../plots/attributes":745,"../plots/frame_attributes":775,"../plots/layout_attributes":801,"../plots/polar/legacy/area_attributes":816,"../plots/polar/legacy/axis_attributes":817,"../registry":829,"./edit_types":731,"./plot_config":736}],738:[function(a,t,m){function p(a){"s"!==
a.charAt(a.length-1)&&g.warn("bad argument to arrayDefaultKey: "+a);return a.substr(0,a.length-1)+"defaults"}var g=a("../lib"),h=a("../plots/attributes"),e={name:{valType:"string",editType:"none"},templateitemname:{valType:"string",editType:"calc"}};m.templatedArray=function(a,b){b._isLinkedToArray=a;b.name=e.name;b.templateitemname=e.templateitemname;return b};m.traceTemplater=function(a){var b={},e;for(e in a){var n=a[e];Array.isArray(n)&&n.length&&(b[e]=0)}return{newTrace:function(l){e=g.coerce(l,
{},h,"type");l={type:e,_template:null};if(e in b){n=a[e];var d=b[e]%n.length;b[e]++;l._template=n[d]}return l}}};m.newContainer=function(a,b,e){var h=a._template;e=h&&(h[b]||e&&h[e]);g.isPlainObject(e)||(e=null);return a[b]={_template:e}};m.arrayTemplater=function(a,b,e){var g=(a=a._template)&&a[p(b)],h=a&&a[b];Array.isArray(h)&&h.length||(h=[]);var d={};return{newItem:function(a){var b={name:a.name,_input:a},f=b.templateitemname=a.templateitemname;if(!f||"string"!==typeof f)return b._template=g,
b;for(var l=0;l<h.length;l++){var n=h[l];if(n.name===f)return d[f]=1,b._template=n,b}b[e]=a[e]||!1;b._template=!1;return b},defaultItems:function(){for(var a=[],b=0;b<h.length;b++){var e=h[b],g=e.name;if(g&&"string"===typeof g&&!d[g]){var l={_template:e,name:g,_input:{_templateitemname:g}};l.templateitemname=e.templateitemname;a.push(l);d[g]=1}}return a}}};m.arrayDefaultKey=p;m.arrayEditor=function(a,b,e){function h(){p={};k&&(p[n]={},p[n].templateitemname=k)}function l(a,b){k?g.nestedProperty(p[n],
a).set(b):p[n+"."+a]=b}function d(){var a=p;h();return a}var f=(g.nestedProperty(a,b).get()||[]).length,c=e._index,k=c>=f&&(e._input||{})._templateitemname;k&&(c=f);var n=b+"["+c+"]",p;h();return{modifyBase:function(a,b){p[a]=b},modifyItem:l,getUpdateObj:d,applyUpdate:function(b,c){b&&l(b,c);b=d();for(var e in b)g.nestedProperty(a,e).set(b[e])}}}},{"../lib":700,"../plots/attributes":745}],739:[function(a,t,m){function p(a,b,c){for(var d=0;d<c.length;d++){var e=c[d][0],f=c[d][1];if(!(e[0]>=a[1]||e[1]<=
a[0])&&f[0]<b[1]&&f[1]>b[0])return!0}return!1}function g(a){function b(a,b,c){var d=a._lw/2;return"x"===a._id.charAt(0)?b?"top"===c?b._offset-t-d:b._offset+b._length+t+d:v.t+v.h*(1-(a.position||0))+d%1:b?"right"===c?b._offset+b._length+t+d:b._offset-t-d:v.l+v.w*(a.position||0)+d%1}function c(a){return"M"+ea+","+a+"H"+U}function d(a){return"M"+Y._offset+","+a+"h"+Y._length}function e(a){return"M"+a+","+X+"V"+na}function g(a){return"M"+a+","+W._offset+"v"+W._length}function l(a,b,c){if(!a.showline||
B!==a._mainSubplot)return"";if(!a._anchorAxis)return c(a._mainLinePosition);c=b(a._mainLinePosition);a.mirror&&(c+=b(a._mainMirrorPosition));return c}var q=a._fullLayout,v=q._size,t=v.p,w=A.list(a,"",!0),x,B;q._paperdiv.style({width:a._context.responsive&&q.autosize&&!a._context._hasZeroWidth&&!a.layout.width?"100%":q.width+"px",height:a._context.responsive&&q.autosize&&!a._context._hasZeroHeight&&!a.layout.height?"100%":q.height+"px"}).selectAll(".main-svg").call(r.setSize,q.width,q.height);a._context.setBackground(a,
q.paper_bgcolor);m.drawMainTitle(a);z.manage(a);if(!q._has("cartesian"))return a._promises.length&&Promise.all(a._promises);for(x=0;x<w.length;x++){var F=w[x];var T=F._anchorAxis;F._linepositions={};F._lw=r.crispRound(a,F.linewidth,1);F._mainLinePosition=b(F,T,F.side);F._mainMirrorPosition=F.mirror&&T?b(F,T,y.OPPOSITE_SIDE[F.side]):null}x=[];T=[];var P=[],S=1===k.opacity(q.paper_bgcolor)&&1===k.opacity(q.plot_bgcolor)&&q.paper_bgcolor===q.plot_bgcolor;for(B in q._plots)if(F=q._plots[B],F.mainplot)F.bg&&
F.bg.remove(),F.bg=void 0;else{var ba=F.xaxis.domain,da=F.yaxis.domain,ca=F.plotgroup;p(ba,da,P)?(ba=ca.node(),F=F.bg=f.ensureSingle(ca,"rect","bg"),ba.insertBefore(F.node(),ba.childNodes[0]),T.push(B)):(ca.select("rect.bg").remove(),P.push([ba,da]),S||(x.push(B),T.push(B)))}F=q._bgLayer.selectAll(".bg").data(x);F.enter().append("rect").classed("bg",!0);F.exit().remove();F.each(function(a){q._plots[a].bg=u.select(this)});for(x=0;x<T.length;x++){F=q._plots[T[x]];var Y=F.xaxis;var W=F.yaxis;F.bg&&F.bg.call(r.setRect,
Y._offset-t,W._offset-t,Y._length+2*t,W._length+2*t).call(k.fill,q.plot_bgcolor).style("stroke-width",0)}if(!q._hasOnlyLargeSploms)for(B in q._plots)F=q._plots[B],Y=F.xaxis,W=F.yaxis,T=F.clipId="clip"+q._uid+B+"plot",x=f.ensureSingleById(q._clips,"clipPath",T,function(a){a.classed("plotclip",!0).append("rect")}),F.clipRect=x.select("rect").attr({width:Y._length,height:W._length}),r.setTranslate(F.plot,Y._offset,W._offset),F._hasClipOnAxisFalse?x=null:(x=T,T=null),r.setClipUrl(F.plot,x,a),F.layerClipId=
T;for(B in q._plots){F=q._plots[B];Y=F.xaxis;W=F.yaxis;S="M0,0";if(h(Y,B)){T=n(Y,"left",W,w);var ea=Y._offset-(T?t+T:0);T=n(Y,"right",W,w);var U=Y._offset+Y._length+(T?t+T:0);x=b(Y,W,"bottom");P=b(Y,W,"top");T=!Y._anchorAxis||B!==Y._mainSubplot;!T||"allticks"!==Y.mirror&&"all"!==Y.mirror||(Y._linepositions[B]=[x,P]);S=l(Y,c,d);T&&Y.showline&&("all"===Y.mirror||"allticks"===Y.mirror)&&(S+=c(x)+c(P));F.xlines.style("stroke-width",Y._lw+"px").call(k.stroke,Y.showline?Y.linecolor:"rgba(0,0,0,0)")}F.xlines.attr("d",
S);S="M0,0";if(h(W,B)){T=n(W,"bottom",Y,w);var na=W._offset+W._length+(T?t:0);T=n(W,"top",Y,w);var X=W._offset-(T?t:0);x=b(W,Y,"left");P=b(W,Y,"right");T=!W._anchorAxis||B!==W._mainSubplot;!T||"allticks"!==W.mirror&&"all"!==W.mirror||(W._linepositions[B]=[x,P]);S=l(W,e,g);T&&W.showline&&("all"===W.mirror||"allticks"===W.mirror)&&(S+=e(x)+e(P));F.ylines.style("stroke-width",W._lw+"px").call(k.stroke,W.showline?W.linecolor:"rgba(0,0,0,0)")}F.ylines.attr("d",S)}A.makeClipPaths(a);return a._promises.length&&
Promise.all(a._promises)}function h(a,b){return(a.ticks||a.showline)&&(b===a._mainSubplot||"all"===a.mirror||"allticks"===a.mirror)}function e(a,b,c){if(!c.showline||!c._lw)return!1;if("all"===c.mirror||"allticks"===c.mirror)return!0;var d=c._anchorAxis;if(!d)return!1;var e=y.FROM_BL[b];return c.side===b?d.domain[e]===a.domain[e]:c.mirror&&d.domain[1-e]===a.domain[1-e]}function n(a,b,c,d){if(e(a,b,c))return c._lw;for(var f=0;f<d.length;f++){var g=d[f];if(g._mainAxis===c._mainAxis&&e(a,b,g))return g._lw}return 0}
function b(a,b){var c=a.title,d=a._size,e=0;"start"===b?e=c.pad.l:"end"===b&&(e=-c.pad.r);switch(c.xref){case "paper":return d.l+d.w*c.x+e;default:return a.width*c.x+e}}function l(a,b){var c=a.title,d=a._size,e=0;"0em"!==b&&b?b===y.CAP_SHIFT+"em"&&(e=c.pad.t):e=-c.pad.b;if("auto"===c.y)return d.t/2;switch(c.yref){case "paper":return d.t+d.h-d.h*c.y+e;default:return a.height-a.height*c.y+e}}var u=a("d3"),q=a("../registry"),d=a("../plots/plots"),f=a("../lib"),c=a("../lib/clear_gl_canvases"),k=a("../components/color"),
r=a("../components/drawing"),v=a("../components/titles"),z=a("../components/modebar"),A=a("../plots/cartesian/axes"),y=a("../constants/alignment");t=a("../plots/cartesian/constraints");var w=t.enforce,x=t.clean,F=a("../plots/cartesian/autorange").doAutoRange;m.layoutStyles=function(a){return f.syncOrAsync([d.doAutoMargin,g],a)};m.drawMainTitle=function(a){var c=a._fullLayout;var d=c.title;var e="middle";f.isRightAnchor(d)?e="end":f.isLeftAnchor(d)&&(e="start");d=e;e=c.title;var g="0em";f.isTopAnchor(e)?
g=y.CAP_SHIFT+"em":f.isMiddleAnchor(e)&&(g=y.MID_SHIFT+"em");e=g;v.draw(a,"gtitle",{propContainer:c,propName:"title.text",placeholder:c._dfltTitle.plot,attributes:{x:b(c,d),y:l(c,e),"text-anchor":d,dy:e}})};m.doTraceStyle=function(a){var b=a.calcdata,e=[],f;for(f=0;f<b.length;f++){var g=b[f],k=g[0]||{},h=k.trace||{},l=h._module||{},n=l.arraysToCalcdata;n&&n(g,h);(g=l.editStyle)&&e.push({fn:g,cd0:k})}if(e.length){for(f=0;f<e.length;f++)b=e[f],b.fn(a,b.cd0);c(a);m.redrawReglTraces(a)}d.style(a);q.getComponentMethod("legend",
"draw")(a);return d.previousPromises(a)};m.doColorBars=function(a){for(var b=0;b<a.calcdata.length;b++){var c=a.calcdata[b][0];if((c.t||{}).cb){var e=c.trace;c=c.t.cb;q.traceIs(e,"contour")&&c.line({width:!1!==e.contours.showlines?e.line.width:0,dash:e.line.dash,color:"line"===e.contours.coloring?c._opts.line.color:e.line.color});var f=e._module.colorbar.container;c.options((f?e[f]:e).colorbar)()}}return d.previousPromises(a)};m.layoutReplot=function(a){var b=a.layout;a.layout=void 0;return q.call("plot",
a,"",b)};m.doLegend=function(a){q.getComponentMethod("legend","draw")(a);return d.previousPromises(a)};m.doTicksRelayout=function(a){A.draw(a,"redraw");a._fullLayout._hasOnlyLargeSploms&&(q.subplotsRegistry.splom.updateGrid(a),c(a),m.redrawReglTraces(a));m.drawMainTitle(a);return d.previousPromises(a)};m.doModeBar=function(a){var b=a._fullLayout;z.manage(a);for(var c=0;c<b._basePlotModules.length;c++){var e=b._basePlotModules[c].updateFx;e&&e(a)}return d.previousPromises(a)};m.doCamera=function(a){a=
a._fullLayout;for(var b=a._subplots.gl3d,c=0;c<b.length;c++){var d=a[b[c]];d._scene.setCamera(d.camera)}};m.drawData=function(a){var b=a._fullLayout,e=a.calcdata,f;for(f=0;f<e.length;f++){var g=e[f][0].trace;!0===g.visible&&g._module.colorbar||b._infolayer.select(".cb"+g.uid).remove()}c(a);e=b._basePlotModules;for(f=0;f<e.length;f++)e[f].plot(a);m.redrawReglTraces(a);d.style(a);q.getComponentMethod("shapes","draw")(a);q.getComponentMethod("annotations","draw")(a);b._replotting=!1;return d.previousPromises(a)};
m.redrawReglTraces=function(a){var b=a._fullLayout;if(b._has("regl")){var c=a._fullData;a=[];var d=[],e;b._hasOnlyLargeSploms&&b._splomGrid.draw();for(e=0;e<c.length;e++){var g=c[e];!0===g.visible&&("splom"===g.type?b._splomScenes[g.uid].draw():"scattergl"===g.type?f.pushUnique(a,g.xaxis+g.yaxis):"scatterpolargl"===g.type&&f.pushUnique(d,g.subplot))}for(e=0;e<a.length;e++)c=b._plots[a[e]],c._scene&&c._scene.draw();for(e=0;e<d.length;e++)c=b[d[e]]._subplot,c._scene&&c._scene.draw()}};m.doAutoRangeAndConstraints=
function(a){var b=a._fullLayout,c=A.list(a,"",!0);b=b._axisMatchGroups||[];for(var d,e=0;e<c.length;e++)d=c[e],x(a,d),F(a,d);w(a);c=0;a:for(;c<b.length;c++){e=b[c];var f=null,g;for(g in e){d=A.getFromId(a,g);if(!1===d.autorange)continue a;f?f[0]<f[1]?(f[0]=Math.min(f[0],d.range[0]),f[1]=Math.max(f[1],d.range[1])):(f[0]=Math.max(f[0],d.range[0]),f[1]=Math.min(f[1],d.range[1])):f=d.range}for(g in e)d=A.getFromId(a,g),d.range=f.slice(),d._input.range=f.slice(),d.setScale()}};m.finalDraw=function(a){q.getComponentMethod("shapes",
"draw")(a);q.getComponentMethod("images","draw")(a);q.getComponentMethod("annotations","draw")(a);q.getComponentMethod("rangeslider","draw")(a);q.getComponentMethod("rangeselector","draw")(a)};m.drawMarginPushers=function(a){q.getComponentMethod("legend","draw")(a);q.getComponentMethod("rangeselector","draw")(a);q.getComponentMethod("sliders","draw")(a);q.getComponentMethod("updatemenus","draw")(a)}},{"../components/color":577,"../components/drawing":598,"../components/modebar":636,"../components/titles":665,
"../constants/alignment":672,"../lib":700,"../lib/clear_gl_canvases":685,"../plots/cartesian/autorange":747,"../plots/cartesian/axes":748,"../plots/cartesian/constraints":755,"../plots/plots":810,"../registry":829,d3:154}],740:[function(a,t,m){function p(a,b){function c(b,c,d){if(q(c)&&q(b))p(b,c);else if(Array.isArray(c)&&Array.isArray(b)){b=k.arrayTemplater({_template:a},d);for(f=0;f<c.length;f++){d=c[f];var e=b.newItem(d)._template;e&&p(e,d)}b=b.defaultItems();for(f=0;f<b.length;f++)c.push(b[f]._template);
for(f=0;f<c.length;f++)delete c[f].templateitemname}}a=u.extendDeep({},a);var d=Object.keys(a).sort(),e,f;for(e=0;e<d.length;e++){var h=d[e],l=a[h];h in b?c(l,b[h],h):b[h]=l;if(g(h)===h)for(var n in b){var r=g(n);n===r||r!==h||n in a||c(l,b[n],h)}}}function g(a){return a.replace(/[0-9]+$/,"")}function h(a,c,d,e,f){var l=f&&d(f),n;for(n in a){var r=a[n],p=b(a,n,e),m=b(a,n,f),v=d(m);if(!v){var t=g(n);t!==n&&(m=b(a,t,f),v=d(m))}if(!(l&&l===v||!v||v._noTemplating||"data_array"===v.valType||v.arrayOk&&
Array.isArray(r)))if(!v.valType&&q(r))h(r,c,d,p,m);else if(v._isLinkedToArray&&Array.isArray(r)){var w=!1;v=0;t={};for(var z=0;z<r.length;z++){var A=r[z];if(q(A)){var y=A.name;y?t[y]||(h(A,c,d,b(r,v,p),b(r,v,m)),v++,t[y]=1):w||(w=k.arrayDefaultKey(n),w=b(a,w,e),y=b(r,v,p),h(A,c,d,y,b(r,v,m)),A=u.nestedProperty(c,y),u.nestedProperty(c,w).set(A.get()),A.set(null),w=!0)}}}else u.nestedProperty(c,p).set(r)}}function e(a,b){return d.getLayoutValObject(a,u.nestedProperty({},b).parts)}function n(a,b){return d.getTraceValObject(a,
u.nestedProperty({},b).parts)}function b(a,b,c){return c?Array.isArray(a)?c+"["+b+"]":c+"."+b:b}function l(a){switch(a.code){case "data":var b="The template has no key data.";break;case "layout":b="The template has no key layout.";break;case "missing":b=a.path?"There are no templates for item "+a.path+" with name "+a.templateitemname:"There are no templates for trace "+a.index+", of type "+a.traceType+".";break;case "unused":b=a.path?"The template item at "+a.path+" was not used in constructing the plot.":
a.dataCount?"Some of the templates of type "+a.traceType+" were not used. The template has "+a.templateCount+" traces, the data only has "+a.dataCount+" of this type.":"The template has "+a.templateCount+" traces of type "+a.traceType+" but there are none in the data.";break;case "reused":b="Some of the templates of type "+a.traceType+" were used more than once. The template has "+a.templateCount+" traces, the data has "+a.dataCount+" of this type."}a.msg=b;return a}var u=a("../lib"),q=u.isPlainObject,
d=a("./plot_schema"),f=a("../plots/plots"),c=a("../plots/attributes"),k=a("./plot_template"),r=a("./plot_config").dfltConfig;m.makeTemplate=function(a){a=u.isPlainObject(a)?a:u.getGraphDiv(a);a=u.extendDeep({_context:r},{data:a.data,layout:a.layout});f.supplyDefaults(a);var b=a.data||[],d=a.layout||{};d._basePlotModules=a._fullLayout._basePlotModules;d._modules=a._fullLayout._modules;var g={data:{},layout:{}};b.forEach(function(a){var b={};h(a,b,n.bind(null,a));a=u.coerce(a,{},c,"type");var d=g.data[a];
d||(d=g.data[a]=[]);d.push(b)});h(d,g.layout,e.bind(null,d));delete g.layout.template;a=d.template;if(q(a)){b=a.layout;var k;q(b)&&p(b,g.layout);var l=a.data;if(q(l)){for(k in g.data)if(b=l[k],Array.isArray(b)){var m=g.data[k];var v=m.length;d=b.length;for(a=0;a<v;a++)p(b[a%d],m[a]);for(a=v;a<d;a++)m.push(u.extendDeep({},b[a]))}for(k in l)k in g.data||(g.data[k]=u.extendDeep([],l[k]))}}return g};m.validateTemplate=function(a,c){function d(a,c){for(var e in a)if("_"!==e.charAt(0)&&q(a[e])){var f=g(e),
k=[],h;for(h=0;h<c.length;h++)k.push(b(a,e,c[h])),f!==e&&k.push(b(a,f,c[h]));for(h=0;h<k.length;h++)v[k[h]]=1;d(a[e],k)}}function e(a,c){for(var d in a)if(-1===d.indexOf("defaults")&&q(a[d])){var f=b(a,d,c);v[f]?e(a[d],f):m.push({code:"unused",path:f})}}function k(a,c){for(var d in a)if("_"!==d.charAt(0)){var e=a[d],f=b(a,d,c);if(q(e))Array.isArray(a)&&!1===e._template&&e.templateitemname&&m.push({code:"missing",path:f,templateitemname:e.templateitemname}),k(e,f);else{var g;if(g=Array.isArray(e))a:{g=
e;for(var h=0;h<g.length;h++)if(q(g[h])){g=!0;break a}g=void 0}g&&k(e,f)}}}var h=u.extendDeep({},{_context:r,data:a.data,layout:a.layout}),n=h.layout||{};q(c)||(c=n.template||{});var p=c.layout;a=c.data;var m=[];h.layout=n;h.layout.template=c;f.supplyDefaults(h);c=h._fullLayout;h=h._fullData;var v={};q(p)?(d(c,["layout"]),e(p,"layout")):m.push({code:"layout"});if(q(a)){p={};for(n=0;n<h.length;n++){var t=h[n];var z=t.type;p[z]=(p[z]||0)+1;t._fullInput._template||m.push({code:"missing",index:t._fullInput.index,
traceType:z})}for(z in a)n=a[z].length,t=p[z]||0,n>t?m.push({code:"unused",traceType:z,templateCount:n,dataCount:t}):t>n&&m.push({code:"reused",traceType:z,templateCount:n,dataCount:t})}else m.push({code:"data"});k({data:h,layout:c},"");if(m.length)return m.map(l)}},{"../lib":700,"../plots/attributes":745,"../plots/plots":810,"./plot_config":736,"./plot_schema":737,"./plot_template":738}],741:[function(a,t,m){var p=a("./plot_api"),g=a("../lib"),h=a("../snapshot/helpers"),e=a("../snapshot/tosvg"),
n=a("../snapshot/svgtoimg"),b={format:{valType:"enumerated",values:["png","jpeg","webp","svg"],dflt:"png"},width:{valType:"number",min:1},height:{valType:"number",min:1},scale:{valType:"number",min:0,dflt:1},setBackground:{valType:"any",dflt:!1},imageDataOnly:{valType:"boolean",dflt:!1}},l=/^data:image\/\w+;base64,/;t.exports=function(a,q){function d(a){return!(a in q)||g.validate(q[a],b[a])}function f(a,c){return g.coerce(q,m,b,a,c)}function c(){return new Promise(function(a){setTimeout(a,h.getDelay(C._fullLayout))})}
function k(){return new Promise(function(a,b){var c=e(C,t,x),d=C._fullLayout.width,f=C._fullLayout.height;p.purge(C);document.body.removeChild(C);if("svg"===t)return B?a(c):a("data:image/svg+xml,"+encodeURIComponent(c));var k=document.createElement("canvas");k.id=g.randstr();n({format:t,width:d,height:f,scale:x,canvas:k,svg:c,promise:!0}).then(a).catch(b)})}q=q||{};if(g.isPlainObject(a)){var r=a.data||[];var u=a.layout||{};a=a.config||{}}else a=g.getGraphDiv(a),r=g.extendDeep([],a.data),u=g.extendDeep({},
a.layout),a=a._context;if(!d("width")||!d("height"))throw Error("Height and width should be pixel values.");if(!d("format"))throw Error("Image format is not jpeg, png, svg or webp.");var m={},t=f("format"),y=f("width"),w=f("height"),x=f("scale"),F=f("setBackground"),B=f("imageDataOnly"),C=document.createElement("div");C.style.position="absolute";C.style.left="-5000px";document.body.appendChild(C);var D=g.extendFlat({},u);y&&(D.width=y);w&&(D.height=w);var G=g.extendFlat({},a,{_exportedPlot:!0,staticPlot:!0,
setBackground:F}),H=h.getRedrawFunc(C);return new Promise(function(a,b){p.plot(C,r,D,G).then(H).then(c).then(k).then(function(b){b=B?b.replace(l,""):b;a(b)}).catch(function(a){b(a)})})}},{"../lib":700,"../snapshot/helpers":833,"../snapshot/svgtoimg":835,"../snapshot/tosvg":837,"./plot_api":735}],742:[function(a,t,m){function p(a,b,c,g,k,l){l=l||[];for(var r=Object.keys(a),u=0;u<r.length;u++){var m=r[u];if("transforms"!==m){var v=l.slice();v.push(m);var t=a[m],w=b[m];var z=c;if(m in z)var A=z[m];else A=
e(m),A=z[A.keyMinusId];var y="info_array"===(A||{}).valType,I="colorscale"===(A||{}).valType;z=(A||{}).items;var J=c;var L=m,M=e(L),N=M.keyMinusId;M=M.id;J=N in J&&J[N]._isSubplotObj&&M?!0:L in J;if(J)if(q(t)&&q(w))p(t,w,A,g,k,v);else if(y&&d(t))if(t.length>w.length&&g.push(h("unused",k,v.concat(w.length))),m=w.length,(y=Array.isArray(z))&&(m=Math.min(m,z.length)),2===A.dimensions)for(I=0;I<m;I++)if(d(t[I]))for(t[I].length>w[I].length&&g.push(h("unused",k,v.concat(I,w[I].length))),M=w[I].length,A=
0;A<(y?Math.min(M,z[I].length):M);A++)J=y?z[I][A]:z,L=t[I][A],N=w[I][A],n.validate(L,J)?N!==L&&N!==+L&&g.push(h("dynamic",k,v.concat(I,A),L,N)):g.push(h("value",k,v.concat(I,A),L));else g.push(h("array",k,v.concat(I),t[I]));else for(I=0;I<m;I++)J=y?z[I]:z,L=t[I],N=w[I],n.validate(L,J)?N!==L&&N!==+L&&g.push(h("dynamic",k,v.concat(I),L,N)):g.push(h("value",k,v.concat(I),L));else if(A.items&&!y&&d(t)){z=z[Object.keys(z)[0]];m=[];for(A=0;A<w.length;A++)I=w[A]._index||A,y=v.slice(),y.push(I),q(t[I])&&
q(w[A])&&(m.push(I),I=t[I],J=w[A],q(I)&&!1!==I.visible&&!1===J.visible?g.push(h("invisible",k,y)):p(I,J,z,g,k,y));for(A=0;A<t.length;A++)y=v.slice(),y.push(A),q(t[A])?-1===m.indexOf(A)&&g.push(h("unused",k,y)):g.push(h("object",k,y,t[A]))}else!q(t)&&q(w)?g.push(h("object",k,v,t)):f(t)||!f(w)||y||I?m in b?n.validate(t,A)?"enumerated"===A.valType&&(A.coerceNumber&&t!==+w||t!==w)&&g.push(h("dynamic",k,v,t,w)):g.push(h("value",k,v,t)):g.push(h("unused",k,v,t)):g.push(h("array",k,v,t));else g.push(h("schema",
k,v))}}return g}function g(a){return d(a)?"In data trace "+a[1]+", ":"In "+a+", "}function h(a,b,e,f,g){e=e||"";if(d(b)){var k=b[0];var h=b[1]}else k=b,h=null;var l=e;if(d(l)){for(var r="",q=0;q<l.length;q++){var u=l[q];r="number"===typeof u?r.substr(0,r.length-1)+"["+u+"]":r+u;q<l.length-1&&(r+=".")}l=r}else l=String(l);b=c[a](b,l,f,g);n.log(b);return{code:a,container:k,trace:h,path:e,astr:l,msg:b}}function e(a){a=a.match(k);return{keyMinusId:a&&a[1],id:a&&a[2]}}var n=a("../lib"),b=a("../plots/plots"),
l=a("./plot_schema"),u=a("./plot_config").dfltConfig,q=n.isPlainObject,d=Array.isArray,f=n.isArrayOrTypedArray;t.exports=function(a,c){var e=l.get(),f=[],g={_context:n.extendFlat({},u)};if(d(a)){g.data=n.extendDeep([],a);var k=a}else g.data=[],k=[],f.push(h("array","data"));if(q(c)){g.layout=n.extendDeep({},c);var r=c}else g.layout={},r={},1<arguments.length&&f.push(h("object","layout"));b.supplyDefaults(g);for(var m=g._fullData,v=k.length,t=0;t<v;t++){var D=k[t],G=["data",t];if(q(D)){var H=m[t],
E=H.type,K=e.traces[E].attributes;K.type={valType:"enumerated",values:[E]};!1===H.visible&&!1!==D.visible&&f.push(h("invisible",G));p(D,H,K,f,G);D=D.transforms;H=H.transforms;if(D)for(d(D)||f.push(h("array",G,["transforms"])),G.push("transforms"),E=0;E<D.length;E++){K=["transforms",E];var I=D[E].type;q(D[E])?(I=e.transforms[I]?e.transforms[I].attributes:{},I.type={valType:"enumerated",values:Object.keys(e.transforms)},p(D[E],H[E],I,f,G,K)):f.push(h("object",G,K))}}else f.push(h("object",G))}g=g._fullLayout;
k=e.layout.layoutAttributes;for(v=0;v<m.length;v++)t=m[v],G=e.traces[t.type],(D=G.layoutAttributes)&&(t.subplot?n.extendFlat(k[G.attributes.subplot.dflt],D):n.extendFlat(k,D));p(r,g,k,f,"layout");return 0===f.length?void 0:f};var c={object:function(a,b){return("layout"===a&&""===b?"The layout argument":"data"===a[0]&&""===b?"Trace "+a[1]+" in the data argument":g(a)+"key "+b)+" must be linked to an object container"},array:function(a,b){return("data"===a?"The data argument":g(a)+"key "+b)+" must be linked to an array container"},
schema:function(a,b){return g(a)+"key "+b+" is not part of the schema"},unused:function(a,b,c){c=q(c)?"container":"key";return g(a)+c+" "+b+" did not get coerced"},dynamic:function(a,b,c,d){return[g(a)+"key",b,"(set to '"+c+"')","got reset to","'"+d+"'","during defaults."].join(" ")},invisible:function(a,b){return(b?g(a)+"item "+b:"Trace "+a[1])+" got defaulted to be not visible"},value:function(a,b,c){return[g(a)+"key "+b,"is set to an invalid value ("+c+")"].join(" ")}},k=n.counterRegex("([a-z]+)")},
{"../lib":700,"../plots/plots":810,"./plot_config":736,"./plot_schema":737}],743:[function(a,t,m){t.exports={mode:{valType:"enumerated",dflt:"afterall",values:["immediate","next","afterall"]},direction:{valType:"enumerated",values:["forward","reverse"],dflt:"forward"},fromcurrent:{valType:"boolean",dflt:!1},frame:{duration:{valType:"number",min:0,dflt:500},redraw:{valType:"boolean",dflt:!0}},transition:{duration:{valType:"number",min:0,dflt:500,editType:"none"},easing:{valType:"enumerated",dflt:"cubic-in-out",
values:"linear quad cubic sin exp circle elastic back bounce linear-in quad-in cubic-in sin-in exp-in circle-in elastic-in back-in bounce-in linear-out quad-out cubic-out sin-out exp-out circle-out elastic-out back-out bounce-out linear-in-out quad-in-out cubic-in-out sin-in-out exp-in-out circle-in-out elastic-in-out back-in-out bounce-in-out".split(" "),editType:"none"},ordering:{valType:"enumerated",values:["layout first","traces first"],dflt:"layout first",editType:"none"}}}},{}],744:[function(a,
t,m){var p=a("../lib"),g=a("../plot_api/plot_template");t.exports=function(a,e,n){var b=n.name,h=n.inclusionAttr||"visible",u=e[b],q=p.isArrayOrTypedArray(a[b])?a[b]:[];a=e[b]=[];var d=g.arrayTemplater(e,b,h);for(b=0;b<q.length;b++){var f=q[b];if(p.isPlainObject(f))var c=d.newItem(f);else c=d.newItem({}),c[h]=!1;c._index=b;!1!==c[h]&&n.handleItemDefaults(f,c,e,n);a.push(c)}h=d.defaultItems();for(b=0;b<h.length;b++)c=h[b],c._index=a.length,n.handleItemDefaults({},c,e,n,{}),a.push(c);if(p.isArrayOrTypedArray(u))for(e=
Math.min(u.length,a.length),b=0;b<e;b++)p.relinkPrivateKeys(a[b],u[b]);return a}},{"../lib":700,"../plot_api/plot_template":738}],745:[function(a,t,m){a=a("../components/fx/attributes");t.exports={type:{valType:"enumerated",values:[],dflt:"scatter",editType:"calc+clearAxisTypes",_noTemplating:!0},visible:{valType:"enumerated",values:[!0,!1,"legendonly"],dflt:!0,editType:"calc"},showlegend:{valType:"boolean",dflt:!0,editType:"style"},legendgroup:{valType:"string",dflt:"",editType:"style"},opacity:{valType:"number",
min:0,max:1,dflt:1,editType:"style"},name:{valType:"string",editType:"style"},uid:{valType:"string",editType:"plot",anim:!0},ids:{valType:"data_array",editType:"calc",anim:!0},customdata:{valType:"data_array",editType:"calc"},selectedpoints:{valType:"any",editType:"calc"},hoverinfo:{valType:"flaglist",flags:["x","y","z","text","name"],extras:["all","none","skip"],arrayOk:!0,dflt:"all",editType:"none"},hoverlabel:a.hoverlabel,stream:{token:{valType:"string",noBlank:!0,strict:!0,editType:"calc"},maxpoints:{valType:"number",
min:0,max:1E4,dflt:500,editType:"calc"},editType:"calc"},transforms:{_isLinkedToArray:"transform",editType:"calc"},uirevision:{valType:"any",editType:"none"}}},{"../components/fx/attributes":607}],746:[function(a,t,m){t.exports={xaxis:{valType:"subplotid",dflt:"x",editType:"calc+clearAxisTypes"},yaxis:{valType:"subplotid",dflt:"y",editType:"calc+clearAxisTypes"}}},{}],747:[function(a,t,m){function p(a,b){function c(a,b){return Math.max(a,k(b))}var d,e,f=[],k=g(b);f=h(a,b);var l=f.min,n=f.max;if(0===
l.length||0===n.length)return q.simpleMap(b.range,b.r2l);f=l[0].val;var u=n[0].val;for(d=1;d<l.length&&f===u;d++)f=Math.min(f,l[d].val);for(d=1;d<n.length&&f===u;d++)u=Math.max(u,n[d].val);a=!1;b.range&&(a=q.simpleMap(b.range,b.r2l),a=a[1]<a[0]);"reversed"===b.autorange&&(a=!0,b.autorange=!0);var p=b.rangemode,m="tozero"===p,t="nonnegative"===p;p=b._length;var G=p/10,H=0;for(d=0;d<l.length;d++){var E=l[d];for(e=0;e<n.length;e++){var K=n[e];var I=K.val-E.val;if(0<I){var J=p-k(E)-k(K);if(J>G){if(I/
J>H){var L=E;var M=K;H=I/J}}else I/p>H&&(L={val:E.val,pad:0},M={val:K.val,pad:0},H=I/p)}}}f===u?(L=f-1,M=f+1,m?0===f?f=[0,1]:(l=(0<f?n:l).reduce(c,0),l=f/(1-Math.min(.5,l/p)),f=0<f?[0,l]:[l,0]):f=t?[Math.max(0,L),Math.max(1,M)]:[L,M]):(m?(0<=L.val&&(L={val:0,pad:0}),0>=M.val&&(M={val:0,pad:0})):t&&(0>L.val-H*k(L)&&(L={val:0,pad:0}),0>=M.val&&(M={val:1,pad:0})),H=(M.val-L.val)/(p-k(L)-k(M)),f=[L.val-H*k(L),M.val+H*k(M)]);a&&f.reverse();return q.simpleMap(f,b.l2r||Number)}function g(a){var b=a._length/
20;"domain"===a.constrain&&a._inputDomain&&(b*=(a._inputDomain[1]-a._inputDomain[0])/(a.domain[1]-a.domain[0]));return function(a){return a.pad+(a.extrapad?b:0)}}function h(a,d){function c(a,c){for(n=0;n<c.length;n++){var d=a[c[n]],g=(d._extremes||{})[f];if(!0===d.visible&&g){for(q=0;q<g.min.length;q++)u=g.min[q],e(k,u.val,u.pad,{extrapad:u.extrapad},b);for(q=0;q<g.max.length;q++)u=g.max[q],e(h,u.val,u.pad,{extrapad:u.extrapad},l)}}}var f=d._id,g=a._fullLayout,k=[],h=[],n,q,u;c(a._fullData,d._traceIndices);
c(g.annotations||[],d._annIndices||[]);c(g.shapes||[],d._shapeIndices||[]);return{min:k,max:h}}function e(a,b,d,e,f){var c=e.tozero;e=e.extrapad;for(var g=!0,k=0;k<a.length&&g;k++){var h=a[k];if(f(h.val,b)&&h.pad>=d&&(h.extrapad||!e)){g=!1;break}else f(b,h.val)&&h.pad<=d&&(e||!h.extrapad)&&(a.splice(k,1),k--)}g&&(f=c&&0===b,a.push({val:b,pad:f?0:d,extrapad:f?!1:e}))}function n(a){return u(a)&&Math.abs(a)<d}function b(a,b){return a<=b}function l(a,b){return a>=b}var u=a("fast-isnumeric"),q=a("../../lib"),
d=a("../../constants/numerical").FP_SAFE,f=a("../../registry");t.exports={getAutoRange:p,makePadFn:g,doAutoRange:function(a,b){b.setScale();if(b.autorange){b.range=p(a,b);b._r=b.range.slice();b._rl=q.simpleMap(b._r,b.r2l);var c=b._input,d={};d[b._attr+".range"]=b.range;d[b._attr+".autorange"]=b.autorange;f.call("_storeDirectGUIEdit",a.layout,a._fullLayout._preGUI,d);c.range=b.range.slice();c.autorange=b.autorange}(c=b._anchorAxis)&&c.rangeslider&&((d=c.rangeslider[b._name])&&"auto"===d.rangemode&&
(d.range=p(a,b)),c._input.rangeslider[b._name]=q.extendFlat({},d))},findExtremes:function(a,f,g){function c(a){if(Array.isArray(a))return C=!0,function(b){return Math.max(Number(a[b]||0),0)};var b=Math.max(Number(a||0),0);return function(){return b}}function k(c){G=f[c];u(G)&&(K=J(c),I=L(c),O=G-N(c),R=G+M(c),t&&O<R/10&&(O=R/10),H=a.c2l(O),E=a.c2l(R),m&&(H=Math.min(0,H),E=Math.max(0,E)),n(H)&&e(h,H,I,P,b),n(E)&&e(r,E,K,P,l))}g||(g={});a._m||a.setScale();var h=[],r=[],q=f.length,p=g.padded||!1,m=g.tozero&&
("linear"===a.type||"-"===a.type),t="log"===a.type,C=!1,D,G,H,E,K,I,J=c((0<a._m?g.ppadplus:g.ppadminus)||g.ppad||0),L=c((0<a._m?g.ppadminus:g.ppadplus)||g.ppad||0),M=c(g.vpadplus||g.vpad),N=c(g.vpadminus||g.vpad);if(!C){var O=Infinity;var R=-Infinity;if(t)for(D=0;D<q;D++){var T=f[D];T<O&&0<T&&(O=T);T>R&&T<d&&(R=T)}else for(D=0;D<q;D++)T=f[D],T<O&&T>-d&&(O=T),T>R&&T<d&&(R=T);f=[O,R];q=2}var P={tozero:m,extrapad:p};p=Math.min(6,q);for(D=0;D<p;D++)k(D);for(D=q-1;D>=p;D--)k(D);return{min:h,max:r,opts:g}},
concatExtremes:h}},{"../../constants/numerical":677,"../../lib":700,"../../registry":829,"fast-isnumeric":221}],748:[function(a,t,m){function p(a){return+a}function g(a){return String(a)}function h(a,b,c,d,e){function f(b){return 2>(1+100*(b-a)/c.dtick)%100}for(var g=0,k=0,h=0,l=0,n=0;n<b.length;n++)0===b[n]%1?h++:E(b[n])||l++,f(b[n])&&g++,f(b[n]+c.dtick/2)&&k++;b=b.length-l;h===b&&"date"!==c.type?1>c.dtick?a=d-.5*c.dtick:(a-=.5,a+c.dtick<d&&(a+=c.dtick)):k<.1*b&&(g>.3*b||f(d)||f(e))&&(e=c.dtick/
2,a+=a+e<d?e:-e);return a}function e(a,b,c){return b*J.roundUp(a/b,c)}function n(a){var b=a.dtick;a._tickexponent=0;E(b)||"string"===typeof b||(b=1);if("category"===a.type||"multicategory"===a.type)a._tickround=null;if("date"===a.type){var c=a.r2l(a.tick0),d=a.l2r(c).replace(/(^-|i)/g,""),e=d.length;"M"===String(b).charAt(0)?10<e||"01-01"!==d.substr(5)?a._tickround="d":a._tickround=0===+b.substr(1)%12?"y":"m":b>=ba&&10>=e||b>=15*ba?a._tickround="d":b>=ca&&16>=e||b>=da?a._tickround="M":b>=Y&&19>=e||
b>=ca?a._tickround="S":(b=a.l2r(c+b).replace(/^-/,"").length,a._tickround=Math.max(e,b)-20,0>a._tickround&&(a._tickround=4))}else E(b)||"L"===b.charAt(0)?(e=a.range.map(a.r2d||Number),E(b)||(b=Number(b.substr(1))),a._tickround=2-Math.floor(Math.log(b)/Math.LN10+.01),b=Math.floor(Math.log(Math.max(Math.abs(e[0]),Math.abs(e[1])))/Math.LN10+.01),3<Math.abs(b)&&(!r(a.exponentformat)||14<b||-15>b?a._tickexponent=b:a._tickexponent=3*Math.round((b-1)/3))):a._tickround=null}function b(a,b,c){a=a.tickfont||
{};return{x:b,dx:0,dy:0,text:c||"",fontSize:a.size,font:a.family,fontColor:a.color}}function l(a,b,c,d){var e=a._tickround,f=c&&a.hoverformat||X.getTickFormat(a);d&&(e=E(e)?4:{y:"m",m:"d",d:"M",M:"S",S:4}[e]);f=J.formatDate(b.x,f,e,a._dateFormat,a.calendar,a._extraFormat);var g=f.indexOf("\n");if(-1!==g){var k=f.substr(g+1);f=f.substr(0,g)}d&&("00:00:00"===f||"00:00"===f?(f=k,k=""):8===f.length&&(f=f.replace(/:00$/,"")));k&&(c?f="d"===e?f+(", "+k):k+(f?", "+f:""):a._inCalcTicks&&k===a._prevDateHead||
(f+="\x3cbr\x3e"+k,a._prevDateHead=k));b.text=f}function u(a,b,c,d,e){var f=a.dtick;c=b.x;var g=a.tickformat,k="string"===typeof f&&f.charAt(0);"never"===e&&(e="");d&&"L"!==k&&(f="L3",k="L");if(g||"L"===k)b.text=v(Math.pow(10,c),a,e,d);else if(E(f)||"D"===k&&.1>J.mod(c+.01,1))d=Math.round(c),e=Math.abs(d),g=a.exponentformat,"power"===g||r(g)&&(14<d||-15>d)?(b.text=0===d?1:1===d?"10":"10\x3csup\x3e"+(1<d?"":W)+e+"\x3c/sup\x3e",b.fontSize*=1.25):("e"===g||"E"===g)&&2<e?b.text="1"+g+(0<d?"+":W)+e:(b.text=
v(Math.pow(10,c),a,"","fakehover"),"D1"===f&&"y"===a._id.charAt(0)&&(b.dy-=b.fontSize/6));else if("D"===k)b.text=String(Math.round(Math.pow(10,J.mod(c,1)))),b.fontSize*=.75;else throw"unrecognized dtick "+String(f);"D1"===a.dtick&&(f=String(b.text).charAt(0),"0"===f||"1"===f)&&("y"===a._id.charAt(0)?b.dx-=b.fontSize/4:(b.dy+=b.fontSize/2,b.dx+=(a.range[1]>a.range[0]?1:-1)*b.fontSize*(0>c?.5:.25)))}function q(a,b){a=a._categories[Math.round(b.x)];void 0===a&&(a="");b.text=String(a)}function d(a,b,
c){var d=a._categories[Math.round(b.x)]||[];a=void 0===d[1]?"":String(d[1]);d=void 0===d[0]?"":String(d[0]);c?b.text=d+" - "+a:(b.text=a,b.text2=d)}function f(a,b,c,d,e){"never"===e?e="":"all"===a.showexponent&&1E-6>Math.abs(b.x/a.dtick)&&(e="hide");b.text=v(b.x,a,e,d)}function c(a,b,c,d,e){"radians"!==a.thetaunit||c?b.text=v(b.x,a,e,d):(c=b.x/180,0===c?b.text="0":(c=k(c),100<=c[1]?b.text=v(J.deg2rad(b.x),a,e,d):(a=0>b.x,b.text=1===c[1]?1===c[0]?"":c[0]+"":["\x3csup\x3e",c[0],"\x3c/sup\x3e\x3csub\x3e",
c[1],"\x3c/sub\x3e"].join(""),a&&(b.text=W+b.text))))}function k(a){function b(a,c){return 1E-6>=Math.abs(c-0)?a:b(c,a%c)}var c=function(a){for(var b=1;!(1E-6>=Math.abs(Math.round(a*b)/b-a));)b*=10;return b}(a);a*=c;var d=Math.abs(b(a,c));return[Math.round(a/d),Math.round(c/d)]}function r(a){return"SI"===a||"B"===a}function v(a,b,c,d){var e=0>a,f=b._tickround;c=c||b.exponentformat||"B";var g=b._tickexponent,k=X.getTickFormat(b),h=b.separatethousands;d&&(g={exponentformat:c,dtick:"none"===b.showexponent?
b.dtick:E(a)?Math.abs(a)||1:1,range:"none"===b.showexponent?b.range.map(b.r2d):[0,a||1]},n(g),f=(Number(g._tickround)||0)+4,g=g._tickexponent,b.hoverformat&&(k=b.hoverformat));if(k)return b._numFormat(k)(a).replace(/-/g,W);d=Math.pow(10,-f)/2;"none"===c&&(g=0);a=Math.abs(a);if(a<d)a="0",e=!1;else{a+=d;g&&(a*=Math.pow(10,-g),f+=g);if(0===f)a=String(Math.floor(a));else if(0>f)for(a=String(Math.round(a)),a=a.substr(0,a.length+f);0>f;f++)a+="0";else a=String(a),(d=a.indexOf(".")+1)&&(a=a.substr(0,d+f).replace(/\.?0+$/,
""));a=J.numSeparate(a,b._separators,h)}g&&"hide"!==c&&(r(c)&&(14<g||-15>g)&&(c="power"),b=0>g?W+-g:"power"!==c?"+"+g:String(g),"e"===c||"E"===c?a+=c+b:"power"===c?a+="10\x3csup\x3e"+b+"\x3c/sup\x3e":"B"===c&&9===g?a+="B":r(c)&&(a+=wa[g/3+5]));return e?W+a:a}function z(a,b){var c=[],d=function(a,b){b=a.xbnd[b];null!==b&&c.push(J.extendFlat({},a,{x:b}))};if(b.length){for(a=0;a<b.length;a++)d(b[a],0);d(b[a-1],1)}return c}function A(a,c){for(var d=[],e={},f=0;f<c.length;f++){var g=c[f];e[g.text2]?e[g.text2].push(g.x):
e[g.text2]=[g.x]}for(var k in e)d.push(b(a,J.interp(e[k],.5),k));return d}function y(a,b){var c=[],d=function(a,b){b=a.xbnd[b];null!==b&&c.push(J.extendFlat({},a,{x:b}))};if(a.showdividers&&b.length){for(a=0;a<b.length;a++){var e=b[a];e.text2!==f&&d(e,0);var f=e.text2}d(b[a-1],1)}return c}function w(a,b){var c=a._id.charAt(0),d=J.deg2rad(a._tickAngles[b]||0),e=Math.sin(d),f=Math.cos(d),g=0,k=0;a._selections[b].each(function(){var a=D(this),b=O.bBox(a.node());a=b.width;b=b.height;g=Math.max(g,f*a,
e*b);k=Math.max(k,e*a,f*b)});return{x:k,y:g}[c]}function x(a){return[a.text,a.x,a.axInfo,a.font,a.fontSize,a.fontColor].join("_")}function F(a,b){var c=a._fullLayout._size,d=b._id.charAt(0),e=b.side,f;"free"!==b.anchor?f=fa.getFromId(a,b.anchor):"x"===d?f={_offset:c.t+(1-(b.position||0))*c.h,_length:0}:"y"===d&&(f={_offset:c.l+(b.position||0)*c.w,_length:0});if("top"===e||"left"===e)return f._offset;if("bottom"===e||"right"===e)return f._offset+f._length}function B(a,b){b=a.l2p(b);return 1<b&&b<a._length-
1}function C(a,b,c,d){function e(a){function c(a){return"number"===typeof a&&Math.abs(a-l)<d}if(!a.showline||!a.linewidth)return!1;var d=Math.max((a.linewidth+b.zerolinewidth)/2,1);if(c(a._mainLinePosition)||c(a._mainMirrorPosition))return!0;a=a._linepositions||{};for(var e in a)if(c(a[e][0])||c(a[e][1]))return!0}var f=c._mainAxis;if(f){var g=a._fullLayout,k=b._id.charAt(0),h=X.counterLetter(b._id),l=b._offset+(Math.abs(d[0])<Math.abs(d[1])===("x"===k)?0:b._length);d=g._plots[c._mainSubplot];if(!(d.mainplotinfo||
d).overlays.length)return e(c,l);a=X.list(a,h);for(c=0;c<a.length;c++)if(h=a[c],h._mainAxis===f&&e(h,l))return!0}}function D(a){a=H.select(a);var b=a.select(".text-math-group");return b.empty()?a.select("text"):b}function G(a,b){for(var c=0;c<b.length;c++)-1===a.indexOf(b[c])&&a.push(b[c])}var H=a("d3"),E=a("fast-isnumeric"),K=a("../../plots/plots"),I=a("../../registry"),J=a("../../lib"),L=a("../../lib/svg_text_utils"),M=a("../../components/titles"),N=a("../../components/color"),O=a("../../components/drawing"),
R=a("./layout_attributes"),T=a("./clean_ticks");m=a("../../constants/numerical");var P=m.ONEAVGYEAR,S=m.ONEAVGMONTH,ba=m.ONEDAY,da=m.ONEHOUR,ca=m.ONEMIN,Y=m.ONESEC,W=m.MINUS_SIGN,ea=m.BADNUM,U=a("../../constants/alignment").MID_SHIFT,na=a("../../constants/alignment").LINE_SPACING,X=t.exports={};X.setConvert=a("./set_convert");var ha=a("./axis_autotype"),fa=a("./axis_ids");X.id2name=fa.id2name;X.name2id=fa.name2id;X.cleanId=fa.cleanId;X.list=fa.list;X.listIds=fa.listIds;X.getFromId=fa.getFromId;X.getFromTrace=
fa.getFromTrace;a=a("./autorange");X.getAutoRange=a.getAutoRange;X.findExtremes=a.findExtremes;X.coerceRef=function(a,b,c,d,e,f){var g=d.charAt(d.length-1);c=c._fullLayout._subplots[g+"axis"];d+="ref";g={};e||(e=c[0]||f);f||(f=e);g[d]={valType:"enumerated",values:c.concat(f?[f]:[]),dflt:e};return J.coerce(a,b,g,d)};X.coercePosition=function(a,b,c,d,e,f){"paper"===d||"pixel"===d?(b=J.ensureNumber,c=c(e,f)):(b=X.getFromId(b,d),f=b.fraction2r(f),c=c(e,f),b=b.cleanPos);a[e]=b(c)};X.cleanPosition=function(a,
b,c){return("paper"===c||"pixel"===c?J.ensureNumber:X.getFromId(b,c).cleanPos)(a)};X.redrawComponents=function(a,b){function c(c,e,f,g){c=I.getComponentMethod(c,e);e={};for(var k=0;k<b.length;k++)for(var h=d[X.id2name(b[k])][f],l=0;l<h.length;l++){var n=h[l];if(!e[n]&&(c(a,n),e[n]=1,g))return}}b=b?b:X.listIds(a);var d=a._fullLayout;c("annotations","drawOne","_annIndices");c("shapes","drawOne","_shapeIndices");c("images","draw","_imgIndices",!0)};var oa=X.getDataConversions=function(a,b,c,d){c="x"===
c||"y"===c||"z"===c?c:d;if(Array.isArray(c)){if(a={type:ha(d),_categories:[]},X.setConvert(a),"category"===a.type)for(b=0;b<d.length;b++)a.d2c(d[b])}else a=X.getFromTrace(a,b,c);return a?{d2c:a.d2c,c2d:a.c2d}:"ids"===c?{d2c:g,c2d:g}:{d2c:p,c2d:p}};X.getDataToCoordFunc=function(a,b,c,d){return oa(a,b,c,d).d2c};X.counterLetter=function(a){a=a.charAt(0);if("x"===a)return"y";if("y"===a)return"x"};X.minDtick=function(a,b,c,d){if(-1!==["log","category","multicategory"].indexOf(a.type)||!d)a._minDtick=0;
else if(void 0===a._minDtick)a._minDtick=b,a._forceTick0=c;else if(a._minDtick)if(2E-6>(a._minDtick/b+1E-6)%1&&2E-6>((c-a._forceTick0)/b%1+1.000001)%1)a._minDtick=b,a._forceTick0=c;else if(2E-6<(b/a._minDtick+1E-6)%1||2E-6<((c-a._forceTick0)/a._minDtick%1+1.000001)%1)a._minDtick=0};X.saveRangeInitial=function(a,b){a=X.list(a,"",!0);for(var c=!1,d=0;d<a.length;d++){var e=a[d],f=void 0===e._rangeInitial,g=f||!(e.range[0]===e._rangeInitial[0]&&e.range[1]===e._rangeInitial[1]);if(f&&!1===e.autorange||
b&&g)e._rangeInitial=e.range.slice(),c=!0}return c};X.saveShowSpikeInitial=function(a,b){for(var c=X.list(a,"",!0),d=!1,e="on",f=0;f<c.length;f++){var g=c[f],k=void 0===g._showSpikeInitial,h=k||g.showspikes!==g._showspikes;if(k||b&&h)g._showSpikeInitial=g.showspikes,d=!0;"on"!==e||g.showspikes||(e="off")}a._fullLayout._cartesianSpikesEnabled=e;return d};X.autoBin=function(a,b,c,d,e,f){var g=J.aggNums(Math.min,null,a),k=J.aggNums(Math.max,null,a);if("category"===b.type||"multicategory"===b.type)return{start:g-
.5,end:k+.5,size:Math.max(1,Math.round(f)||1),_dataSpan:k-g};e||(e=b.calendar);var l="log"===b.type?{type:"linear",range:[g,k]}:{type:b.type,range:J.simpleMap([g,k],b.c2r,0,e),calendar:e};X.setConvert(l);(f=f&&T.dtick(f,l.type))?(l.dtick=f,l.tick0=T.tick0(void 0,l.type,e)):(c?d=(k-g)/c:(c=J.distinctVals(a),f=Math.pow(10,Math.floor(Math.log(c.minDiff)/Math.LN10)),c=f*J.roundUp(c.minDiff/f,[.9,1.9,4.9,9.9],!0),d=Math.max(c,2*J.stdev(a)/Math.pow(a.length,d?.25:.4)),E(d)||(d=1)),X.autoTicks(l,d));d=l.dtick;
c=X.tickIncrement(X.tickFirst(l),d,"reverse",e);if("number"===typeof d)c=h(c,a,l,g,k),l=1+Math.floor((k-c)/d),a=c+l*d;else{if("M"===l.dtick.charAt(0))a:{l=c;a=J.findExactDates(a,e);if(.8<a.exactDays&&(c=Number(d.substr(1)),l=.8<a.exactYears&&0===c%12?X.tickIncrement(l,"M6","reverse")+1.5*ba:.8<a.exactMonths?X.tickIncrement(l,"M1","reverse")+15.5*ba:l-ba/2,a=X.tickIncrement(l,d),a<=g)){c=a;break a}c=l}a=c;for(l=0;a<=k;)a=X.tickIncrement(a,d,!1,e),l++}return{start:b.c2r(c,0,e),end:b.c2r(a,0,e),size:d,
_dataSpan:k-g}};X.prepTicks=function(a){var b=J.simpleMap(a.range,a.r2l);if("auto"===a.tickmode||!a.dtick){var c=a.nticks;c||("category"===a.type||"multicategory"===a.type?(c=a.tickfont?1.2*(a.tickfont.size||12):15,c=a._length/c):(c="y"===a._id.charAt(0)?40:80,c=J.constrain(a._length/c,4,9)+1),"radialaxis"===a._name&&(c*=2));"array"===a.tickmode&&(c*=100);X.autoTicks(a,Math.abs(b[1]-b[0])/c);0<a._minDtick&&a.dtick<2*a._minDtick&&(a.dtick=a._minDtick,a.tick0=a.l2r(a._forceTick0))}a.tick0||(a.tick0=
"date"===a.type?"2000-01-01":0);"date"===a.type&&.1>a.dtick&&(a.dtick=.1);n(a)};X.calcTicks=function(a){X.prepTicks(a);var c=J.simpleMap(a.range,a.r2l);if("array"===a.tickmode){var d=a.tickvals;c=a.ticktext;var e=Array(d.length),f=J.simpleMap(a.range,a.r2l),g=1.0001*f[0]-1E-4*f[1],k=1.0001*f[1]-1E-4*f[0];f=Math.min(g,k);g=Math.max(g,k);k=0;Array.isArray(c)||(c=[]);var h="category"===a.type?a.d2l_noadd:a.d2l;"log"===a.type&&"L"!==String(a.dtick).charAt(0)&&(a.dtick="L"+Math.pow(10,Math.floor(Math.min(a.range[0],
a.range[1]))-1));for(var l=0;l<d.length;l++){var n=h(d[l]);n>f&&n<g&&(e[k]=void 0===c[l]?X.tickText(a,n):b(a,n,String(c[l])),k++)}k<d.length&&e.splice(k,d.length-k);return e}a._tmin=X.tickFirst(a);e=1.0001*c[1]-1E-4*c[0];f=c[1]<c[0];if(a._tmin<1.0001*c[0]-1E-4*c[1]!==f)return[];d=[];if("category"===a.type||"multicategory"===a.type)e=f?Math.max(-.5,e):Math.min(a._categories.length-.5,e);g=null;k=Math.max(1E3,a._length||0);for(h=a._tmin;(f?h>=e:h<=e)&&!(d.length>k||h===g);h=X.tickIncrement(h,a.dtick,
f,a.calendar))g=h,d.push(h);"angularaxis"===a._id&&360===Math.abs(c[1]-c[0])&&d.pop();a._tmax=d[d.length-1];a._prevDateHead="";a._inCalcTicks=!0;c=Array(d.length);for(e=0;e<d.length;e++)c[e]=X.tickText(a,d[e]);a._inCalcTicks=!1;return c};var ua=[2,5,10],Z=[1,2,3,6,12],qa=[1,2,5,10,15,30],sa=[1,2,3,7,14],V=[-.046,0,.301,.477,.602,.699,.778,.845,.903,.954,1],ia=[-.301,0,.301,.699,1],Ka=[15,30,45,90,180];X.autoTicks=function(a,b){function c(a){return Math.pow(a,Math.floor(Math.log(b)/Math.LN10))}if("date"===
a.type){a.tick0=J.dateTick0(a.calendar);var d=2*b;d>P?(b/=P,d=c(10),a.dtick="M"+12*e(b,d,ua)):d>S?(b/=S,a.dtick="M"+e(b,1,Z)):d>ba?(a.dtick=e(b,ba,sa),a.tick0=J.dateTick0(a.calendar,!0)):d>da?a.dtick=e(b,da,Z):d>ca?a.dtick=e(b,ca,qa):d>Y?a.dtick=e(b,Y,qa):(d=c(10),a.dtick=e(b,d,ua))}else"log"===a.type?(a.tick0=0,d=J.simpleMap(a.range,a.r2l),.7<b?a.dtick=Math.ceil(b):1>Math.abs(d[1]-d[0])?(b=Math.abs(Math.pow(10,d[1])-Math.pow(10,d[0]))/(1.5*Math.abs((d[1]-d[0])/b)),d=c(10),a.dtick="L"+e(b,d,ua)):
a.dtick=.3<b?"D2":"D1"):"category"===a.type||"multicategory"===a.type?(a.tick0=0,a.dtick=Math.ceil(Math.max(b,1))):"angularaxis"===a._id?(a.tick0=0,a.dtick=e(b,1,Ka)):(a.tick0=0,d=c(10),a.dtick=e(b,d,ua));0===a.dtick&&(a.dtick=1);if(!E(a.dtick)&&"string"!==typeof a.dtick)throw d=a.dtick,a.dtick=1,"ax.dtick error: "+String(d);};X.tickIncrement=function(a,b,c,d){var e=c?-1:1;if(E(b))return a+e*b;var f=b.charAt(0),g=e*Number(b.substr(1));if("M"===f)return J.incrementMonth(a,g,d);if("L"===f)return Math.log(Math.pow(10,
a)+g)/Math.LN10;if("D"===f)return b="D2"===b?ia:V,a+=.01*e,c=J.roundUp(J.mod(a,1),b,c),Math.floor(a)+Math.log(H.round(Math.pow(10,c),1))/Math.LN10;throw"unrecognized dtick "+String(b);};X.tickFirst=function(a){var b=a.r2l||Number,c=J.simpleMap(a.range,b),d=c[1]<c[0],e=d?Math.floor:Math.ceil;c=1.0001*c[0]-1E-4*c[1];var f=a.dtick,g=b(a.tick0);if(E(f)){d=e((c-g)/f)*f+g;if("category"===a.type||"multicategory"===a.type)d=J.constrain(d,0,a._categories.length-1);return d}b=f.charAt(0);var k=Number(f.substr(1));
if("M"===b){e=0;for(var h,l;10>e;){h=X.tickIncrement(g,f,d,a.calendar);if(0>=(h-c)*(g-c))return d?Math.min(g,h):Math.max(g,h);h=(c-(g+h)/2)/(h-g);l=b+(Math.abs(Math.round(h))||1)*k;g=X.tickIncrement(g,l,0>h?!d:d,a.calendar);e++}J.error("tickFirst did not converge",a);return g}if("L"===b)return Math.log(e((Math.pow(10,c)-g)/k)*k+g)/Math.LN10;if("D"===b)return a="D2"===f?ia:V,a=J.roundUp(J.mod(c,1),a,d),Math.floor(c)+Math.log(H.round(Math.pow(10,a),1))/Math.LN10;throw"unrecognized dtick "+String(f);
};X.tickText=function(a,e,g){function k(b){if(void 0===b)return!0;if(g)return"none"===b;var c={first:a._tmin,last:a._tmax}[b];return"all"!==b&&e!==c}var h=b(a,e),n="array"===a.tickmode,r=g||n,p=a.type,m="category"===p?a.d2l_noadd:a.d2l;if(n&&Array.isArray(a.ticktext)){n=J.simpleMap(a.range,a.r2l);var t=Math.abs(n[1]-n[0])/1E4;for(n=0;n<a.ticktext.length&&!(Math.abs(e-m(a.tickvals[n]))<t);n++);if(n<a.ticktext.length)return h.text=String(a.ticktext[n]),h}m=g?"never":"none"!==a.exponentformat&&k(a.showexponent)?
"hide":"";"date"===p?l(a,h,g,r):"log"===p?u(a,h,g,r,m):"category"===p?q(a,h):"multicategory"===p?d(a,h,g):"angularaxis"===a._id?c(a,h,g,r,m):f(a,h,g,r,m);a.tickprefix&&!k(a.showtickprefix)&&(h.text=a.tickprefix+h.text);a.ticksuffix&&!k(a.showticksuffix)&&(h.text+=a.ticksuffix);if("boundaries"===a.tickson||a.showdividers)r=function(b){var c=a.l2p(b);return 0<=c&&c<=a._length?b:null},h.xbnd=[r(h.x-.5),r(h.x+a.dtick-.5)];return h};X.hoverLabelText=function(a,b,c){if(c!==ea&&c!==b)return X.hoverLabelText(a,
b)+" - "+X.hoverLabelText(a,c);c="log"===a.type&&0>=b;a=X.tickText(a,a.c2l(c?-b:b),"hover").text;return c?0===b?"0":W+a:a};var wa="f p n  m  k M G T".split(" ");X.getTickFormat=function(a){function b(a){return"string"!==typeof a?a:Number(a.replace("M",""))*S}function c(a,b){var c=["L","D"];if(typeof a===typeof b){if("number"===typeof a)return a-b;var d=c.indexOf(a.charAt(0));c=c.indexOf(b.charAt(0));return d===c?Number(a.replace(/(L|D)/g,""))-Number(b.replace(/(L|D)/g,"")):d-c}return"number"===typeof a?
1:-1}function d(a,b,c){c=c||function(a){return a};var d=b[0];b=b[1];return(!d&&"number"!==typeof d||c(d)<=c(a))&&(!b&&"number"!==typeof b||c(b)>=c(a))}function e(a,b){var d=null===b[0],e=null===b[1],f=0<=c(a,b[0]);a=0>=c(a,b[1]);return(d||f)&&(e||a)}var f;if(a.tickformatstops&&0<a.tickformatstops.length)switch(a.type){case "date":case "linear":for(f=0;f<a.tickformatstops.length;f++){var g=a.tickformatstops[f];if(g.enabled&&d(a.dtick,g.dtickrange,b)){var k=g;break}}break;case "log":for(f=0;f<a.tickformatstops.length;f++)if(g=
a.tickformatstops[f],g.enabled&&e(a.dtick,g.dtickrange)){k=g;break}}return k?k.value:a.tickformat};X.getSubplots=function(a,b){a=a._fullLayout._subplots;a=a.cartesian.concat(a.gl2d||[]);b=b?X.findSubplotsWithAxis(a,b):a;b.sort(function(a,b){a=a.substr(1).split("y");b=b.substr(1).split("y");return a[0]===b[0]?+a[1]-+b[1]:+a[0]-+b[0]});return b};X.findSubplotsWithAxis=function(a,b){b=new RegExp("x"===b._id.charAt(0)?"^"+b._id+"y":b._id+"$");for(var c=[],d=0;d<a.length;d++){var e=a[d];b.test(e)&&c.push(e)}return c};
X.makeClipPaths=function(a){var b=a._fullLayout;if(!b._hasOnlyLargeSploms){var c={_offset:0,_length:b.width,_id:""},d={_offset:0,_length:b.height,_id:""},e=X.list(a,"x",!0);a=X.list(a,"y",!0);var f=[],g,k;for(g=0;g<e.length;g++)for(f.push({x:e[g],y:d}),k=0;k<a.length;k++)0===g&&f.push({x:c,y:a[k]}),f.push({x:e[g],y:a[k]});c=b._clips.selectAll(".axesclip").data(f,function(a){return a.x._id+a.y._id});c.enter().append("clipPath").classed("axesclip",!0).attr("id",function(a){return"clip"+b._uid+a.x._id+
a.y._id}).append("rect");c.exit().remove();c.each(function(a){H.select(this).select("rect").attr({x:a.x._offset||0,y:a.y._offset||0,width:a.x._length||1,height:a.y._length||1})})}};X.draw=function(a,b,c){var d=a._fullLayout;"redraw"===b&&d._paper.selectAll("g.subplot").each(function(a){a=d._plots[a[0]];var b=a.xaxis,c=a.yaxis;a.xaxislayer.selectAll("."+b._id+"tick").remove();a.yaxislayer.selectAll("."+c._id+"tick").remove();a.xaxislayer.selectAll("."+b._id+"tick2").remove();a.yaxislayer.selectAll("."+
c._id+"tick2").remove();a.xaxislayer.selectAll("."+b._id+"divider").remove();a.yaxislayer.selectAll("."+c._id+"divider").remove();a.gridlayer&&a.gridlayer.selectAll("path").remove();a.zerolinelayer&&a.zerolinelayer.selectAll("path").remove();d._infolayer.select(".g-"+b._id+"title").remove();d._infolayer.select(".g-"+c._id+"title").remove()});b=b&&"redraw"!==b?b:X.listIds(a);return J.syncOrAsync(b.map(function(b){return function(){if(b){var d=X.getFromId(a,b),e=X.drawOne(a,d,c);d._r=d.range.slice();
d._rl=J.simpleMap(d._r,d.r2l);return e}}}))};X.drawOne=function(a,b,c){function d(a,b){a[0]=Math.min(a[0],b[0]);a[1]=Math.max(a[1],b[1])}c=c||{};var e;b.setScale();var f=a._fullLayout,g=b._id,k=g.charAt(0),h=X.counterLetter(g),l=b._mainLinePosition,n=b._mainMirrorPosition,r=f._plots[b._mainSubplot][k+"axislayer"],q=b._subplotsWith,u=b._vals=X.calcTicks(b),p=[b.mirror,l,n].join("_");for(e=0;e<u.length;e++)u[e].axInfo=p;if(b.visible){b._selections={};b._tickAngles={};var m=X.makeTransFn(b);"boundaries"===
b.tickson?(p=z(b,u),e=X.clipEnds(b,p),p="inside"===b.ticks?e:p):(e=X.clipEnds(b,u),p="inside"===b.ticks?e:u);var t=b._gridVals=e,v=y(b,u);if(!f._hasOnlyLargeSploms){var E={};for(e=0;e<q.length;e++){var B=q[e];var D=f._plots[B];B=D[h+"axis"];var C=B._mainAxis._id;E[C]||(E[C]=1,C="x"===k?"M0,"+B._offset+"v"+B._length:"M"+B._offset+",0h"+B._length,X.drawGrid(a,b,{vals:t,counterAxis:B,layer:D.gridlayer.select("."+g),path:C,transFn:m}),X.drawZeroLine(a,b,{counterAxis:B,layer:D.zerolinelayer,path:C,transFn:m}))}}t=
X.getTickSigns(b);E=[];if(b.ticks){e=X.makeTickPath(b,l,t[2]);if(b._anchorAxis&&b.mirror&&!0!==b.mirror){var G=X.makeTickPath(b,n,t[3]);var H=e+G}else G="",H=e;if(b.showdividers&&"outside"===b.ticks&&"boundaries"===b.tickson){var L={};for(e=0;e<v.length;e++)L[v[e].x]=1;n=function(a){return L[a.x]?G:H}}else n=H;X.drawTicks(a,b,{vals:p,layer:r,path:n,transFn:m});E=Object.keys(b._linepositions||{})}for(e=0;e<E.length;e++)B=E[e],D=f._plots[B],n=b._linepositions[B]||[],n=X.makeTickPath(b,n[0],t[0])+X.makeTickPath(b,
n[1],t[1]),X.drawTicks(a,b,{vals:p,layer:D[k+"axislayer"],path:n,transFn:m});p=[];p.push(function(){return X.drawLabels(a,b,{vals:u,layer:r,transFn:m,labelFns:X.makeLabelFns(b,l)})});if("multicategory"===b.type){var R=0,P={x:2,y:10}[k],ca=t[2]*("inside"===b.ticks?-1:1);p.push(function(){R+=w(b,g+"tick")+P;R+=b._tickAngles[g+"tick"]?b.tickfont.size*na:0;return X.drawLabels(a,b,{vals:A(b,u),layer:r,cls:g+"tick2",repositionOnUpdate:!0,secondary:!0,transFn:m,labelFns:X.makeLabelFns(b,l+R*ca)})});p.push(function(){R+=
w(b,g+"tick2");b._labelLength=R;var c=X.makeTickPath(b,l,ca,R),d=b._id+"divider",e=r.selectAll("path."+d).data(v,x);e.exit().remove();e.enter().insert("path",":first-child").classed(d,1).classed("crisp",1).call(N.stroke,b.dividercolor).style("stroke-width",O.crispRound(a,b.dividerwidth,1)+"px");e.attr("transform",m).attr("d",c)})}var T=I.getComponentMethod("rangeslider","isVisible")(b);p.push(function(){if(b.showticklabels){var c=a.getBoundingClientRect(),e=r.node().getBoundingClientRect();b._boundingBox=
{width:e.width,height:e.height,left:e.left-c.left,right:e.right-c.left,top:e.top-c.top,bottom:e.bottom-c.top}}else c=f._size,"x"===k?(c="free"===b.anchor?c.t+c.h*(1-b.position):c.t+c.h*(1-b._anchorAxis.domain[{bottom:0,top:1}[b.side]]),b._boundingBox={top:c,bottom:c,left:b._offset,right:b._offset+b._length,width:b._length,height:0}):(c="free"===b.anchor?c.l+c.w*b.position:c.l+c.w*b._anchorAxis.domain[{left:0,right:1}[b.side]],b._boundingBox={left:c,right:c,bottom:b._offset+b._length,top:b._offset,
height:b._length,width:0});if(q){c=b._counterSpan=[Infinity,-Infinity];for(e=0;e<q.length;e++){var g=f._plots[q[e]]["x"===k?"yaxis":"xaxis"];d(c,[g._offset,g._offset+g._length])}"free"===b.anchor&&d(c,"x"===k?[b._boundingBox.bottom,b._boundingBox.top]:[b._boundingBox.right,b._boundingBox.left])}},function(){var c=b.side.charAt(0),d;T&&(d=I.getComponentMethod("rangeslider","autoMarginOpts")(a,b));K.autoMargin(a,b._id+".rangeslider",d);if(b.automargin&&(!T||"b"!==c)){var e={x:0,y:0,r:0,l:0,t:0,b:0};
d=b._boundingBox;var g=F(a,b);switch(k+c){case "xb":var l=0;var n=d.top-g;e[c]=d.height;break;case "xt":l=1;n=g-d.bottom;e[c]=d.height;break;case "yl":l=0;n=g-d.right;e[c]=d.width;break;case "yr":l=1,n=d.left-g,e[c]=d.width}e[h]="free"===b.anchor?b.position:b._anchorAxis.domain[l];0<e[c]&&(e[c]+=n);b.title.text!==f._dfltTitle[k]&&(e[c]+=b.title.font.size);"x"===k&&0<d.width?(c=d.right-(b._offset+b._length),0<c&&(e.x=1,e.r=c),d=b._offset-d.left,0<d&&(e.x=0,e.l=d)):"y"===k&&0<d.height&&(c=d.bottom-
(b._offset+b._length),0<c&&(e.y=0,e.b=c),d=b._offset-d.top,0<d&&(e.y=1,e.t=d))}K.autoMargin(a,b._id+".automargin",e)});c.skipTitle||T&&b._boundingBox&&"bottom"===b.side||p.push(function(){var c=a._fullLayout,d=b._id,e=d.charAt(0),f=b.title.font.size;var g="multicategory"===b.type?b._labelLength:10+1.5*f+(b.linewidth?b.linewidth-1:0);var k=F(a,b);if("x"===e){var h=b._offset+b._length/2;var l="top"===b.side?-g-f*(b.showticklabels?1:0):g+f*(b.showticklabels?1.5:.5);l+=k}else{l=b._offset+b._length/2;
h="right"===b.side?g+f*(b.showticklabels?1:.5):-g-f*(b.showticklabels?.5:0);h+=k;var n={rotate:"-90",offset:0}}if("multicategory"!==b.type){f=b._selections[b._id+"tick"];var r={selection:f,side:b.side};f&&f.node()&&f.node().parentNode&&(f=O.getTranslate(f.node().parentNode),r.offsetLeft=f.x,r.offsetTop=f.y)}return M.draw(a,d+"title",{propContainer:b,propName:b._name+".title.text",placeholder:c._dfltTitle[e],avoid:r,transform:n,attributes:{x:h,y:l,"text-anchor":"middle"}})});return J.syncOrAsync(p)}};
X.getTickSigns=function(a){var b=a._id.charAt(0),c=a.side==={x:"top",y:"right"}[b]?1:-1;c=[-1,1,c,-c];"inside"!==a.ticks===("x"===b)&&(c=c.map(function(a){return-a}));return c};X.makeTransFn=function(a){var b=a._id.charAt(0),c=a._offset;return"x"===b?function(b){return"translate("+(c+a.l2p(b.x))+",0)"}:function(b){return"translate(0,"+(c+a.l2p(b.x))+")"}};X.makeTickPath=function(a,b,c,d){d=void 0!==d?d:a.ticklen;var e=a._id.charAt(0);a=(a.linewidth||1)/2;return"x"===e?"M0,"+(b+a*c)+"v"+d*c:"M"+(b+
a*c)+",0h"+d*c};X.makeLabelFns=function(a,b,c){var d=a._id.charAt(0),e="boundaries"!==a.tickson&&"outside"===a.ticks,f=0,g=0;e&&(f+=a.ticklen);c&&"outside"===a.ticks&&(g=J.deg2rad(c),f=a.ticklen*Math.cos(g)+1,g=a.ticklen*Math.sin(g));a.showticklabels&&(e||a.showline)&&(f+=.2*a.tickfont.size);f+=(a.linewidth||1)/2;e={labelStandoff:f,labelShift:g};if("x"===d){var k="bottom"===a.side?1:-1;var h=g*k;var l=b+f*k;var n="bottom"===a.side?1:-.2;e.xFn=function(a){return a.dx+h};e.yFn=function(a){return a.dy+
l+a.fontSize*n};e.anchorFn=function(a,b){return E(b)&&0!==b&&180!==b?0>b*k?"end":"start":"middle"};e.heightFn=function(b,c,d){return-60>c||60<c?-.5*d:"top"===a.side?-d:0}}else"y"===d&&(k="right"===a.side?1:-1,h=f,l=-g*k,n=90===Math.abs(a.tickangle)?.5:0,e.xFn=function(a){return a.dx+b+(h+a.fontSize*n)*k},e.yFn=function(a){return a.dy+l+a.fontSize*U},e.anchorFn=function(b,c){return E(c)&&90===Math.abs(c)?"middle":"right"===a.side?"start":"end"},e.heightFn=function(b,c,d){c*="left"===a.side?1:-1;return-30>
c?-d:30>c?-.5*d:0});return e};X.drawTicks=function(a,b,c){c=c||{};var d=b._id+"tick",e=c.layer.selectAll("path."+d).data(b.ticks?c.vals:[],x);e.exit().remove();e.enter().append("path").classed(d,1).classed("ticks",1).classed("crisp",!1!==c.crisp).call(N.stroke,b.tickcolor).style("stroke-width",O.crispRound(a,b.tickwidth,1)+"px").attr("d",c.path);e.attr("transform",c.transFn)};X.drawGrid=function(a,b,c){c=c||{};var d=b._id+"grid",e=c.vals,f=c.counterAxis;if(!1===b.showgrid)e=[];else if(f&&X.shouldShowZeroLine(a,
b,f)){f="array"===b.tickmode;for(var g=0;g<e.length;g++){var k=e[g].x;if(f?!k:Math.abs(k)<b.dtick/100)if(e=e.slice(0,g).concat(e.slice(g+1)),f)g--;else break}}e=c.layer.selectAll("path."+d).data(e,x);e.exit().remove();e.enter().append("path").classed(d,1).classed("crisp",!1!==c.crisp);b._gw=O.crispRound(a,b.gridwidth,1);e.attr("transform",c.transFn).attr("d",c.path).call(N.stroke,b.gridcolor||"#ddd").style("stroke-width",b._gw+"px");"function"===typeof c.path&&e.attr("d",c.path)};X.drawZeroLine=function(a,
b,c){c=c||c;var d=b._id+"zl",e=X.shouldShowZeroLine(a,b,c.counterAxis);e=c.layer.selectAll("path."+d).data(e?[{x:0,id:b._id}]:[]);e.exit().remove();e.enter().append("path").classed(d,1).classed("zl",1).classed("crisp",!1!==c.crisp).each(function(){c.layer.selectAll("path").sort(function(a,b){return fa.idSort(a.id,b.id)})});e.attr("transform",c.transFn).attr("d",c.path).call(N.stroke,b.zerolinecolor||N.defaultLine).style("stroke-width",O.crispRound(a,b.zerolinewidth,b._gw||1)+"px")};X.drawLabels=function(a,
b,c){function d(a,b){a.each(function(a){var d=H.select(this),e=d.select(".text-math-group"),f=h.anchorFn(a,b),g=c.transFn.call(d.node(),a)+(E(b)&&0!==+b?" rotate("+b+","+h.xFn(a)+","+(h.yFn(a)-a.fontSize/2)+")":""),k=L.lineCount(d),l=na*a.fontSize;(a=h.heightFn(a,E(b)?+b:0,(k-1)*l))&&(g+=" translate(0, "+a+")");e.empty()?d.select("text").attr({transform:g,"text-anchor":f}):(d=O.bBox(e.node()).width*{end:-.5,start:.5}[f],e.attr("transform",g+(d?"translate("+d+",0)":"")))})}c=c||{};var e=b._id,f=e.charAt(0),
g=c.cls||e+"tick",k=c.vals,h=c.labelFns,l=c.secondary?0:b.tickangle;e=(b._tickAngles||{})[g];var n=c.layer.selectAll("g."+g).data(b.showticklabels?k:[],x),r=[];n.enter().append("g").classed(g,1).append("text").attr("text-anchor","middle").each(function(b){var c=H.select(this),e=a._promises.length;c.call(L.positionText,h.xFn(b),h.yFn(b)).call(O.font,b.font,b.fontSize,b.fontColor).text(b.text).call(L.convertToTspans,a);a._promises[e]?r.push(a._promises.pop().then(function(){d(c,l)})):d(c,l)});n.exit().remove();
c.repositionOnUpdate&&n.each(function(a){H.select(this).select("text").call(L.positionText,h.xFn(a),h.yFn(a))});d(n,e||l);b._selections&&(b._selections[g]=n);(e=J.syncOrAsync([function(){return r.length&&Promise.all(r)},function(){d(n,l);var a=null;if(k.length&&"x"===f&&!E(l)&&("log"!==b.type||"D"!==String(b.dtick).charAt(0))){var e=a=0,h=[];n.each(function(a){e=Math.max(e,a.fontSize);a=b.l2p(a.x);var c=D(this);c=O.bBox(c.node());h.push({top:0,bottom:10,height:10,left:a-c.width/2,right:a+c.width/
2+2,width:c.width+2})});if("boundaries"!==b.tickson&&!b.showdividers||c.secondary){var r=k.length;var q=Math.abs((k[r-1].x-k[0].x)*b._m)/(r-1)<2.5*e||"multicategory"===b.type;for(r=0;r<h.length-1;r++)if(J.bBoxIntersect(h[r],h[r+1])){a=q?90:30;break}}else for(q=2,b.ticks&&(q+=b.tickwidth/2),r=0;r<h.length;r++){var u=k[r].xbnd,p=h[r];if(null!==u[0]&&p.left-b.l2p(u[0])<q||null!==u[1]&&b.l2p(u[1])-p.right<q){a=90;break}}a&&d(n,a)}b._tickAngles&&(b._tickAngles[g]=null===a?E(l)?l:0:a)}]))&&e.then&&a._promises.push(e);
return e};X.shouldShowZeroLine=function(a,b,c){var d=J.simpleMap(b.range,b.r2l),e;if(e=0>=d[0]*d[1]&&b.zeroline&&("linear"===b.type||"-"===b.type)&&b._gridVals.length){if(!(c=B(b,0)||!C(a,b,c,d)))a:{a=a._fullData;c=b._mainSubplot;b=b._id.charAt(0);for(d=0;d<a.length;d++)if(e=a[d],!0===e.visible&&e.xaxis+e.yaxis===c){if((I.traceIs(e,"bar")||"waterfall"===e.type)&&e.orientation==={x:"h",y:"v"}[b]){c=!0;break a}if(e.fill&&e.fill.charAt(e.fill.length-1)===b){c=!0;break a}}c=!1}e=c}return e};X.clipEnds=
function(a,b){return b.filter(function(b){return B(a,b.x)})};X.allowAutoMargin=function(a){for(var b=X.list(a,"",!0),c=0;c<b.length;c++){var d=b[c];d.automargin&&K.allowAutoMargin(a,d._id+".automargin");I.getComponentMethod("rangeslider","isVisible")(d)&&K.allowAutoMargin(a,d._id+".rangeslider")}};X.swap=function(a,b){var c=[],d,e;for(d=0;d<b.length;d++){var f=[],g=a._fullData[b[d]].xaxis,k=a._fullData[b[d]].yaxis;if(g&&k){for(e=0;e<c.length;e++)-1===c[e].x.indexOf(g)&&-1===c[e].y.indexOf(k)||f.push(e);
if(f.length){var h=c[f[0]];if(1<f.length)for(e=1;e<f.length;e++){var l=c[f[e]];G(h.x,l.x);G(h.y,l.y)}G(h.x,[g]);G(h.y,[k])}else c.push({x:[g],y:[k]})}}for(b=0;b<c.length;b++){var n;e=a;f=c[b].x;g=c[b].y;h=[];l=[];k=e.layout;for(d=0;d<f.length;d++)h.push(X.getFromId(e,f[d]));for(d=0;d<g.length;d++)l.push(X.getFromId(e,g[d]));var r=Object.keys(R),q="anchor domain overlaying position side tickangle editType".split(" "),u=["linear","log"];for(d=0;d<r.length;d++){var p=r[d],m=h[0][p],t=l[0][p],v=!0,w=
!1,z=!1;if("_"!==p.charAt(0)&&"function"!==typeof m&&-1===q.indexOf(p)){for(n=1;n<h.length&&v;n++){var x=h[n][p];"type"===p&&-1!==u.indexOf(m)&&-1!==u.indexOf(x)&&m!==x?w=!0:x!==m&&(v=!1)}for(n=1;n<l.length&&v;n++)m=l[n][p],"type"===p&&-1!==u.indexOf(t)&&-1!==u.indexOf(m)&&t!==m?z=!0:l[n][p]!==t&&(v=!1);if(v){w&&(k[h[0]._name].type="linear");z&&(k[l[0]._name].type="linear");n=k;t=h;v=l;x=e._fullLayout._dfltTitle;w=J.nestedProperty;z=w(n[t[0]._name],p).get();m=w(n[v[0]._name],p).get();"title"===p&&
(z&&z.text===x.x&&(z.text=x.y),m&&m.text===x.y&&(m.text=x.x));for(x=0;x<t.length;x++)w(n,t[x]._name+"."+p).set(m);for(x=0;x<v.length;x++)w(n,v[x]._name+"."+p).set(z)}}}for(d=0;d<e._fullLayout.annotations.length;d++)h=e._fullLayout.annotations[d],-1!==f.indexOf(h.xref)&&-1!==g.indexOf(h.yref)&&J.swapAttrs(k.annotations[d],["?"])}}},{"../../components/color":577,"../../components/drawing":598,"../../components/titles":665,"../../constants/alignment":672,"../../constants/numerical":677,"../../lib":700,
"../../lib/svg_text_utils":724,"../../plots/plots":810,"../../registry":829,"./autorange":747,"./axis_autotype":749,"./axis_ids":751,"./clean_ticks":753,"./layout_attributes":760,"./set_convert":766,d3:154,"fast-isnumeric":221}],749:[function(a,t,m){var p=a("fast-isnumeric"),g=a("../../lib"),h=a("../../constants/numerical").BADNUM;t.exports=function(a,n,b){b=b||{};if(b=!b.noMultiCategory)b=g.isArrayOrTypedArray(a[0])&&g.isArrayOrTypedArray(a[1]);if(b)return"multicategory";b=Math.max(1,(a.length-1)/
1E3);for(var e=0,u=0,q={},d=0;d<a.length;d+=b){var f=a[Math.round(d)],c=String(f);q[c]||(q[c]=1,g.isDateTime(f,n)&&(e+=1),p(f)&&(u+=1))}if(e>2*u)return"date";n=Math.max(1,(a.length-1)/1E3);e=b=0;u={};for(q=0;q<a.length;q+=n)d=a[Math.round(q)],f=String(d),u[f]||(u[f]=1,"boolean"===typeof d?e++:g.cleanNumber(d)!==h?b++:"string"===typeof d&&e++);if(e>2*b)return"category";a:{if(a)for(n=0;n<a.length;n++)if(p(a[n])){a=!0;break a}a=!1}return a?"linear":"-"}},{"../../constants/numerical":677,"../../lib":700,
"fast-isnumeric":221}],750:[function(a,t,m){var p=a("../../registry"),g=a("../../lib"),h=a("./layout_attributes"),e=a("./tick_value_defaults"),n=a("./tick_mark_defaults"),b=a("./tick_label_defaults"),l=a("./category_order_defaults"),u=a("./line_grid_defaults"),q=a("./set_convert");t.exports=function(a,f,c,k,r){var d=k.letter,m=k.font||{},t=k.splomStash||{},y=c("visible",!k.cheateronly),w=f.type;"date"===w&&p.getComponentMethod("calendars","handleDefaults")(a,f,"calendar",k.calendar);q(f,r);!c("autorange",
!f.isValidRange(a.range))||"linear"!==w&&"-"!==w||c("rangemode");c("range");f.cleanRange();l(a,f,c,k);"category"===w||k.noHover||c("hoverformat");if(!y)return f;y=c("color");var x=y!==h.color.dflt?y:m.color;c("title.text",t.label||r._dfltTitle[d]);g.coerceFont(c,"title.font",{family:m.family,size:Math.round(1.2*m.size),color:x});e(a,f,c,w);b(a,f,c,w,k);n(a,f,c,k);u(a,f,c,{dfltColor:y,bgColor:k.bgColor,showGrid:k.showGrid,attributes:h});(f.showline||f.ticks)&&c("mirror");k.automargin&&c("automargin");
a="multicategory"===f.type;if(!k.noTickson&&("category"===f.type||a)&&(f.ticks||f.showgrid)){var F;a&&(F="boundaries");c("tickson",F)}a&&c("showdividers")&&(c("dividercolor"),c("dividerwidth"));return f}},{"../../lib":700,"../../registry":829,"./category_order_defaults":752,"./layout_attributes":760,"./line_grid_defaults":762,"./set_convert":766,"./tick_label_defaults":767,"./tick_mark_defaults":768,"./tick_value_defaults":769}],751:[function(a,t,m){var p=a("../../registry"),g=a("./constants");m.id2name=
function(a){if("string"===typeof a&&a.match(g.AX_ID_PATTERN)){var e=a.substr(1);"1"===e&&(e="");return a.charAt(0)+"axis"+e}};m.name2id=function(a){if(a.match(g.AX_NAME_PATTERN)){var e=a.substr(5);"1"===e&&(e="");return a.charAt(0)+e}};m.cleanId=function(a,e){if(a.match(g.AX_ID_PATTERN)&&(!e||a.charAt(0)===e))return e=a.substr(1).replace(/^0+/,""),"1"===e&&(e=""),a.charAt(0)+e};m.list=function(a,e,g){var b=a._fullLayout;if(!b)return[];var h=m.listIds(a,e);a=Array(h.length);var n;for(n=0;n<h.length;n++){var q=
h[n];a[n]=b[q.charAt(0)+"axis"+q.substr(1)]}if(!g)for(g=b._subplots.gl3d||[],n=0;n<g.length;n++)h=b[g[n]],e?a.push(h[e+"axis"]):a.push(h.xaxis,h.yaxis,h.zaxis);return a};m.listIds=function(a,e){a=a._fullLayout;if(!a)return[];a=a._subplots;return e?a[e+"axis"]:a.xaxis.concat(a.yaxis)};m.getFromId=function(a,e,g){a=a._fullLayout;"x"===g?e=e.replace(/y[0-9]*/,""):"y"===g&&(e=e.replace(/x[0-9]*/,""));return a[m.id2name(e)]};m.getFromTrace=function(a,e,g){var b=a._fullLayout,h=null;p.traceIs(e,"gl3d")?
(a=e.scene,"scene"===a.substr(0,5)&&(h=b[a][g+"axis"])):h=m.getFromId(a,e[g+"axis"]||g);return h};m.idSort=function(a,e){var g=a.charAt(0),b=e.charAt(0);return g!==b?g>b?1:-1:+(a.substr(1)||1)-+(e.substr(1)||1)};m.getAxisGroup=function(a,e){a=a._axisMatchGroups;for(var g=0;g<a.length;g++)if(a[g][e])return"g"+g;return e}},{"../../registry":829,"./constants":754}],752:[function(a,t,m){t.exports=function(a,g,h,e){if("category"===g.type){a=a.categoryarray;a=Array.isArray(a)&&0<a.length;var n;a&&(n="array");
n=h("categoryorder",n);var b;"array"===n&&(b=h("categoryarray"));a||"array"!==n||(n=g.categoryorder="trace");if("trace"===n)g._initialCategories=[];else if("array"===n)g._initialCategories=b.slice();else{h=e.dataAttr||g._id.charAt(0);b={};var l;if(e.axData)a=e.axData;else for(a=[],l=0;l<e.data.length;l++){var u=e.data[l];u[h+"axis"]===g._id&&a.push(u)}for(l=0;l<a.length;l++)for(u=a[l][h],e=0;e<u.length;e++){var q=u[e];null!==q&&void 0!==q&&(b[q]=1)}b=Object.keys(b).sort();"category ascending"===n?
g._initialCategories=b:"category descending"===n&&(g._initialCategories=b.reverse())}}}},{}],753:[function(a,t,m){var p=a("fast-isnumeric"),g=a("../../lib"),h=a("../../constants/numerical").ONEDAY;m.dtick=function(a,g){var b="log"===g,e="date"===g,n="category"===g;g=e?h:1;if(!a)return g;if(p(a))return a=Number(a),0>=a?g:n?Math.max(1,Math.round(a)):e?Math.max(.1,a):a;if("string"!==typeof a||!e&&!b)return g;n=a.charAt(0);var q=a.substr(1);q=p(q)?Number(q):0;return 0>=q||!(e&&"M"===n&&q===Math.round(q)||
b&&"L"===n||b&&"D"===n&&(1===q||2===q))?g:a};m.tick0=function(a,h,b,l){if("date"===h)return g.cleanDate(a,g.dateTick0(b));if("D1"!==l&&"D2"!==l)return p(a)?Number(a):0}},{"../../constants/numerical":677,"../../lib":700,"fast-isnumeric":221}],754:[function(a,t,m){a=a("../../lib/regex").counter;t.exports={idRegex:{x:a("x"),y:a("y")},attrRegex:a("[xy]axis"),xAxisMatch:a("xaxis"),yAxisMatch:a("yaxis"),AX_ID_PATTERN:/^[xyz][0-9]*$/,AX_NAME_PATTERN:/^[xyz]axis[0-9]*$/,SUBPLOT_PATTERN:/^x([0-9]*)y([0-9]*)$/,
MINDRAG:8,MINSELECT:12,MINZOOM:20,DRAGGERSIZE:20,BENDPX:1.5,REDRAWDELAY:50,SELECTDELAY:100,SELECTID:"-select",DFLTRANGEX:[-1,6],DFLTRANGEY:[-1,4],traceLayerClasses:"heatmaplayer contourcarpetlayer contourlayer waterfalllayer barlayer carpetlayer violinlayer boxlayer ohlclayer scattercarpetlayer scatterlayer".split(" "),layerValue2layerClass:{"above traces":"above","below traces":"below"}}},{"../../lib/regex":716}],755:[function(a,t,m){function p(a,b,d,e,g){var c="range"!==g,f=e[n(b)].type,k;g=[];
for(k=0;k<d.length;k++){var h=d[k];if(h!==b){var l=e[n(h)];l.type===f&&(l.fixedrange?c&&l.anchor&&e[n(l.anchor)].fixedrange&&g.push(h):g.push(h))}}for(k=0;k<a.length;k++)if(a[k][b]){a=a[k];b=[];for(k=0;k<g.length;k++)h=g[k],a[h]||b.push(h);return{linkableAxes:b,thisGroup:a}}return{linkableAxes:g,thisGroup:null}}function g(a,b,d,e,g){var c;if(null===b){b={};b[d]=1;var f=a.length;a.push(b)}else f=a.indexOf(b);var k=Object.keys(b);for(c=0;c<a.length;c++)if(d=a[c],c!==f&&d[e]){var h=d[e];for(c=0;c<k.length;c++)e=
k[c],d[e]=h*g*b[e];a.splice(f,1);return}if(1!==g)for(c=0;c<k.length;c++)b[k[c]]*=g;b[e]=1}function h(a,b){var c=a._inputDomain,e=c[0]+(c[1]-c[0])*d[a.constraintoward];a.domain=a._input.domain=[e+(c[0]-e)/b,e+(c[1]-e)/b];a.setScale()}var e=a("../../lib"),n=a("./axis_ids").id2name,b=a("./scale_zoom"),l=a("./autorange").makePadFn,u=a("./autorange").concatExtremes,q=a("../../constants/numerical").ALMOST_EQUAL,d=a("../../constants/alignment").FROM_BL;m.handleConstraintDefaults=function(a,b,d,h,l){var c=
l._axisConstraintGroups,f=l._axisMatchGroups,k=b._id,n=k.charAt(0);n=((l._splomAxes||{})[n]||{})[k]||{};k=b._id;var r=k.charAt(0),q=d("constrain");e.coerce(a,b,{constraintoward:{valType:"enumerated",values:"x"===r?["left","center","right"]:["bottom","middle","top"],dflt:"x"===r?"center":"middle"}},"constraintoward");if((a.matches||n.matches)&&!b.fixedrange){var u=p(f,k,h,l);var m=e.coerce(a,b,{matches:{valType:"enumerated",values:u.linkableAxes||[],dflt:n.matches}},"matches")}if(!m&&a.scaleanchor&&
(!b.fixedrange||"domain"===q)){var t=p(c,k,h,l,q);var v=e.coerce(a,b,{scaleanchor:{valType:"enumerated",values:t.linkableAxes||[]}},"scaleanchor")}m?(delete b.constrain,g(f,u.thisGroup,k,m,1)):-1!==h.indexOf(a.matches)&&e.warn("ignored "+b._name+'.matches: "'+a.matches+'" to avoid either an infinite loop or because the target axis has fixed range.');v?(a=d("scaleratio"),a||(a=b.scaleratio=1),g(c,t.thisGroup,k,v,a)):-1!==h.indexOf(a.scaleanchor)&&e.warn("ignored "+b._name+'.scaleanchor: "'+a.scaleanchor+
'" to avoid either an infinite loop and possibly inconsistent scaleratios, or because the target axis has fixed range or this axis declares a *matches* constraint.')};m.enforce=function(a){var c=a._fullLayout,d=c._axisConstraintGroups||[],e,f,g,p;for(e=0;e<d.length;e++){var m=d[e],t=Object.keys(m),x=Infinity,F=0,B=Infinity,C={},D={},G=!1;for(f=0;f<t.length;f++){var H=t[f];D[H]=g=c[n(H)];g._inputDomain?g.domain=g._inputDomain.slice():g._inputDomain=g.domain.slice();g._inputRange||(g._inputRange=g.range.slice());
g.setScale();C[H]=p=Math.abs(g._m)/m[H];x=Math.min(x,p);"domain"!==g.constrain&&g._constraintShrinkable||(B=Math.min(B,p));delete g._constraintShrinkable;F=Math.max(F,p);"domain"===g.constrain&&(G=!0)}if(!(x>q*F)||G)for(f=0;f<t.length;f++)if(H=t[f],p=C[H],g=D[H],H=g.constrain,p!==B||"domain"===H)if(p/=B,"range"===H)b(g,p);else if(H=g._inputDomain,m=(g.domain[1]-g.domain[0])/(H[1]-H[0]),x=(g.r2l(g.range[1])-g.r2l(g.range[0]))/(g.r2l(g._inputRange[1])-g.r2l(g._inputRange[0])),p/=m,1>p*x)g.domain=g._input.domain=
H.slice(),b(g,p);else{1>x&&(g.range=g._input.range=g._inputRange.slice(),p*=x);if(g.autorange){H=g.r2l(g.range[0]);m=g.r2l(g.range[1]);var E=(H+m)/2;F=x=E;G=Math.abs(m-E);var K=E-G*p*1.0001;E+=G*p*1.0001;var I=l(g);h(g,p);var J=Math.abs(g._m),L=u(a,g),M=L.min;L=L.max;var N;for(N=0;N<M.length;N++){var O=M[N].val-I(M[N])/J;O>K&&O<x&&(x=O)}for(N=0;N<L.length;N++)O=L[N].val+I(L[N])/J,O<E&&O>F&&(F=O);p/=(F-x)/(2*G);x=g.l2r(x);F=g.l2r(F);g.range=g._input.range=H<m?[x,F]:[F,x]}h(g,p)}}};m.clean=function(a,
b){if(b._inputDomain){var c=!1,d=b._id;a=a._fullLayout._axisConstraintGroups;for(var e=0;e<a.length;e++)if(a[e][d]){c=!0;break}c&&"domain"===b.constrain||(b._input.domain=b.domain=b._inputDomain,delete b._inputDomain)}}},{"../../constants/alignment":672,"../../constants/numerical":677,"../../lib":700,"./autorange":747,"./axis_ids":751,"./scale_zoom":764}],756:[function(a,t,m){function p(a,b,c,d){b=C.ensureSingle(a.draglayer,b,c,function(b){b.classed("drag",!0).style({fill:"transparent","stroke-width":0}).attr("data-subplot",
a.id)});b.call(I,d);return b.node()}function g(a,b,c,d,e,f,g){a=p(a,"rect",b,c);w.select(a).call(H.setRect,d,e,f,g);return a}function h(a,b){for(var c=0;c<a.length;c++)if(!a[c].fixedrange)return b;return""}function e(a,b){var c=a.range[b];b=Math.abs(c-a.range[1-b]);if("date"===a.type)return c;if("log"===a.type)return a=Math.ceil(Math.max(0,-Math.log(b)/Math.LN10))+3,w.format("."+a+"g")(Math.pow(10,c));a=Math.floor(Math.log(Math.abs(c))/Math.LN10)-Math.floor(Math.log(b)/Math.LN10)+4;return w.format("."+
String(a)+"g")(c)}function n(a,b,c,d,e){for(var f=0;f<a.length;f++){var g=a[f];if(!g.fixedrange){var k=g._rl[0],h=g._rl[1]-k;g.range=[g.l2r(k+h*b),g.l2r(k+h*c)];d[g._name+".range[0]"]=g.range[0];d[g._name+".range[1]"]=g.range[1]}}e&&e.length&&(a=(b+(1-c))/2,n(e,a,1-a,d,[],[]))}function b(a,b){for(var c=0;c<a.length;c++){var d=a[c];d.fixedrange||(d.range=[d.l2r(d._rl[0]-b/d._m),d.l2r(d._rl[1]-b/d._m)])}}function l(a,b,c){return a?"nsew"===a?c?"":"pan"===b?"move":"crosshair":a.toLowerCase()+"-resize":
"pointer"}function u(a,b,c,d,e){return a.append("path").attr("class","zoombox").style({fill:.2<b?"rgba(0,0,0,0)":"rgba(255,255,255,0)","stroke-width":0}).attr("transform","translate("+c+", "+d+")").attr("d",e+"Z")}function q(a,b,c){return a.append("path").attr("class","zoombox-corners").style({fill:G.background,stroke:G.defaultLine,"stroke-width":1,opacity:0}).attr("transform","translate("+b+", "+c+")").attr("d","M0,0Z")}function d(a,b,c,d,e,g){a.attr("d",d+"M"+c.l+","+c.t+"v"+c.h+"h"+c.w+"v-"+c.h+
"h-"+c.w+"Z");f(a,b,e,g)}function f(a,b,c,d){c||(a.transition().style("fill",.2<d?"rgba(0,0,0,0.4)":"rgba(255,255,255,0.3)").duration(200),b.transition().style("opacity",1).duration(200))}function c(a){w.select(a).selectAll(".zoombox,.js-zoombox-backdrop,.js-zoombox-menu,.zoombox-corners").remove()}function k(a){W&&a.data&&a._context.showTips&&(C.notifier(C._(a,"Double-click to zoom back out"),"long"),W=!1)}function r(a){return"lasso"===a||"select"===a}function v(a){var b=Math.floor(Math.min(a.b-
a.t,a.r-a.l,Y)/2);return"M"+(a.l-3.5)+","+(a.t-.5+b)+"h3v"+-b+"h"+b+"v-3h-"+(b+3)+"ZM"+(a.r+3.5)+","+(a.t-.5+b)+"h-3v"+-b+"h"+-b+"v-3h"+(b+3)+"ZM"+(a.r+3.5)+","+(a.b+.5-b)+"h-3v"+b+"h"+-b+"v3h"+(b+3)+"ZM"+(a.l-3.5)+","+(a.b+.5-b)+"h3v"+b+"h"+b+"v3h-"+(b+3)+"Z"}function z(a,b,c,d){for(var e=!1,f={},g={},k,h,l,n,r=0;r<b.length;r++){var q=b[r];for(k in c)if(q[k]){for(l in q)("x"===l.charAt(0)?c:d)[l]||(f[l]=k);for(h in d)q[h]&&(e=!0)}for(h in d)if(q[h])for(n in q)("x"===n.charAt(0)?c:d)[n]||(g[n]=h)}e&&
(C.extendFlat(f,g),g={});b={};c=[];for(l in f)d=R(a,l),c.push(d),b[d._id]=d;l={};d=[];for(n in g)k=R(a,n),d.push(k),l[k._id]=k;return{xaHash:b,yaHash:l,xaxes:c,yaxes:d,xLinks:f,yLinks:g,isSubplotConstrained:e}}function A(a,b){if(F){var c=void 0!==a.onwheel?"wheel":"mousewheel";a._onwheel&&a.removeEventListener(c,a._onwheel);a._onwheel=b;a.addEventListener(c,b,{passive:!1})}else void 0!==a.onwheel?a.onwheel=b:void 0!==a.onmousewheel&&(a.onmousewheel=b)}function y(a){var b=[],c;for(c in a)b.push(a[c]);
return b}var w=a("d3"),x=a("tinycolor2"),F=a("has-passive-events"),B=a("../../registry"),C=a("../../lib"),D=a("../../lib/svg_text_utils"),G=a("../../components/color"),H=a("../../components/drawing"),E=a("../../components/fx"),K=a("./axes"),I=a("../../lib/setcursor"),J=a("../../components/dragelement"),L=a("../../constants/alignment").FROM_TL,M=a("../../lib/clear_gl_canvases"),N=a("../../plot_api/subroutines").redrawReglTraces,O=a("../plots"),R=a("./axis_ids").getFromId,T=a("./select").prepSelect,
P=a("./select").clearSelect,S=a("./select").selectOnClick,ba=a("./scale_zoom"),da=a("./constants"),ca=da.MINDRAG,Y=da.MINZOOM,W=!0;t.exports={makeDragBox:function(a,f,p,m,t,I,G,F){function U(){Ea=f.xaxis;Ja=f.yaxis;Oa=Ea._length;Sa=Ja._length;Qa=Ea._offset;pb=Ja._offset;Na={};Na[Ea._id]=Ea;ja={};ja[Ja._id]=Ja;if(G&&F)for(var b=f.overlays,c=0;c<b.length;c++){var d=b[c].xaxis;Na[d._id]=d;d=b[c].yaxis;ja[d._id]=d}la=y(Na);ma=y(ja);qb=h(la,F);gb=h(ma,G);Pb=!gb&&!qb;Ya=z(a,a._fullLayout._axisConstraintGroups,
Na,ja);Xb=z(a,a._fullLayout._axisMatchGroups,Na,ja);bb=F||Ya.isSubplotConstrained||Xb.isSubplotConstrained;db=G||Ya.isSubplotConstrained||Xb.isSubplotConstrained;b=a._fullLayout;ib=b._has("scattergl");fb=b._has("splom");nc=b._has("svg")}function X(b,d){var g=a._fullLayout.clickmode;c(a);2!==b||aa||ua();if(Ia)-1<g.indexOf("select")&&S(d,a,la,ma,f.id,La),-1<g.indexOf("event")&&E.click(a,d,f.id);else if(1===b&&aa){var k=G?Ja:Ea;b="s"===G||"w"===F?0:1;var h=k._name+".range["+b+"]";b=e(k,b);d="left";g=
"middle";if(!k.fixedrange&&(G?(g="n"===G?"top":"bottom","right"===k.side&&(d="right")):"e"===F&&(d="right"),a._context.showAxisRangeEntryBoxes))w.select(Cb).call(D.makeEditable,{gd:a,immediate:!0,background:a._fullLayout.paper_bgcolor,text:String(b),fill:k.tickfont?k.tickfont.color:"#444",horizontalAlign:d,verticalAlign:g}).on("edit",function(b){b=k.d2r(b);void 0!==b&&B.call("_guiRelayout",a,h,b)})}}function W(b,c){function e(){zb="";Ta.r=Ta.l;Ta.t=Ta.b;Kb.attr("d","M0,0Z")}if(a._transitioningWithDuration)return!1;
b=Math.max(0,Math.min(Oa,b+Pa));c=Math.max(0,Math.min(Sa,c+Ca));var f=Math.abs(b-Pa),g=Math.abs(c-Ca);Ta.l=Math.min(Pa,b);Ta.r=Math.max(Pa,b);Ta.t=Math.min(Ca,c);Ta.b=Math.max(Ca,c);Ya.isSubplotConstrained?f>Y||g>Y?(zb="xy",f/Oa>g/Sa?(g=f*Sa/Oa,Ca>c?Ta.t=Ca-g:Ta.b=Ca+g):(f=g*Oa/Sa,Pa>b?Ta.l=Pa-f:Ta.r=Pa+f),Kb.attr("d",v(Ta))):e():Xb.isSubplotConstrained?f>Y||g>Y?(zb="xy",b=Math.min(Ta.l/Oa,(Sa-Ta.b)/Sa),c=Math.max(Ta.r/Oa,(Sa-Ta.t)/Sa),Ta.l=b*Oa,Ta.r=c*Oa,Ta.b=(1-b)*Sa,Ta.t=(1-c)*Sa,Kb.attr("d",v(Ta))):
e():!gb||g<Math.min(Math.max(.6*f,ca),Y)?f<ca||!qb?e():(Ta.t=0,Ta.b=Sa,zb="x",Kb.attr("d","M"+(Ta.l-.5)+","+(Ca-Y-.5)+"h-3v"+(2*Y+1)+"h3ZM"+(Ta.r+.5)+","+(Ca-Y-.5)+"h3v"+(2*Y+1)+"h-3Z")):!qb||f<Math.min(.6*g,Y)?(Ta.l=0,Ta.r=Oa,zb="y",Kb.attr("d","M"+(Pa-Y-.5)+","+(Ta.t-.5)+"v-3h"+(2*Y+1)+"v3ZM"+(Pa-Y-.5)+","+(Ta.b+.5)+"v3h"+(2*Y+1)+"v-3Z")):(zb="xy",Kb.attr("d",v(Ta)));Ta.w=Ta.r-Ta.l;Ta.h=Ta.b-Ta.t;zb&&(Oc=!0);a._dragged=Oc;d(mb,Kb,Ta,qd,wc,ec);wc=!0}function ea(){nb={};if(Math.min(Ta.h,Ta.w)<2*ca)return c(a);
if("xy"===zb||"x"===zb)n(la,Ta.l/Oa,Ta.r/Oa,nb,Ya.xaxes),fa("x",nb);if("xy"===zb||"y"===zb)n(ma,(Sa-Ta.b)/Sa,(Sa-Ta.t)/Sa,nb,Ya.yaxes),fa("y",nb);c(a);Ba();k(a)}function na(b){function c(a,b,c){if(!a.fixedrange){var d=C.simpleMap(a.range,a.r2l),e=d[0]+(d[1]-d[0])*b;a.range=d.map(function(b){return a.l2r(e+(b-e)*c)})}}if(a._context._scrollZoom.cartesian||a._fullLayout._enablescrollzoom)if(La.plotinfo.selection=!1,P(xa),a._transitioningWithDuration)b.preventDefault(),b.stopPropagation();else{U();clearTimeout(xc);
var d=-b.deltaY;isFinite(d)||(d=b.wheelDelta/10);if(isFinite(d)){d=Math.exp(-Math.min(Math.max(d,-20),20)/200);var e=Bb.draglayer.select(".nsewdrag").node().getBoundingClientRect(),f=(b.clientX-e.left)/e.width;e=(e.bottom-b.clientY)/e.height;var g;if(bb){F||(f=.5);for(g=0;g<la.length;g++)c(la[g],f,d);fa("x");vb[2]*=d;vb[0]+=vb[2]*f*(1/d-1)}if(db){G||(e=.5);for(g=0;g<ma.length;g++)c(ma[g],e,d);fa("y");vb[3]*=d;vb[1]+=vb[3]*(1-e)*(1/d-1)}va(vb);oa();xc=setTimeout(function(){vb=[0,0,Oa,Sa];Ba()},Qd);
b.preventDefault()}else C.log("Did not find wheel motion attributes: ",b)}}function ha(c,d){function e(a,b,c){for(var d=1-b,e,f,g=0;g<a.length;g++){var k=a[g];if(!k.fixedrange){e=k;f=c/k._length;f=k._rl[d]+(k._rl[b]-k._rl[d])/(1-(0<=f?Math.min(f,.9):1/(1/Math.max(f,-.3)+3.222)));var h=k.l2r(f);!1!==h&&void 0!==h&&(k.range[b]=h)}}return e._length*(e._rl[b]-f)/(e._rl[b]-e._rl[d])}if(!a._transitioningWithDuration){a._fullLayout._replotting=!0;if("ew"===qb||"ns"===gb)qb&&(b(la,c),fa("x")),gb&&(b(ma,d),
fa("y")),va([qb?-c:0,gb?-d:0,Oa,Sa]);else{if(Ya.isSubplotConstrained&&qb&&gb){var f="w"===qb===("n"===gb)?1:-1;d=(c/Oa+f*d/Sa)/2;c=d*Oa;d=f*d*Sa}"w"===qb?c=e(la,0,c):"e"===qb?c=e(la,1,-c):qb||(c=0);"n"===gb?d=e(ma,1,d):"s"===gb?d=e(ma,0,-d):gb||(d=0);f="w"===qb?c:0;var g="n"===gb?d:0;if(Ya.isSubplotConstrained){var k;if(!qb&&1===gb.length){for(k=0;k<la.length;k++)la[k].range=la[k]._r.slice(),ba(la[k],1-d/Sa);c=d*Oa/Sa;f=c/2}if(!gb&&1===qb.length){for(k=0;k<ma.length;k++)ma[k].range=ma[k]._r.slice(),
ba(ma[k],1-c/Oa);d=c*Sa/Oa;g=d/2}}fa("x");fa("y");va([f,g,Oa-c,Sa-d])}oa()}}function fa(a,b){var c=Xb.isSubplotConstrained?{x:ma,y:la}[a]:Xb[a+"axes"];a=Xb.isSubplotConstrained?{x:la,y:ma}[a]:[];for(var d=0;d<c.length;d++){var e=c[d],f=e._id;f=Xb.xLinks[f]||Xb.yLinks[f];if(f=a[0]||Na[f]||ja[f])f=f.range,b?(b[e._name+".range[0]"]=f[0],b[e._name+".range[1]"]=f[1]):e.range=f}}function oa(){function b(a){for(d=0;d<a.length;d++)a[d].fixedrange||c.push(a[d]._id)}var c=[],d;bb&&(b(la),b(Ya.xaxes),b(Xb.xaxes));
db&&(b(ma),b(Ya.yaxes),b(Xb.yaxes));nb={};for(d=0;d<c.length;d++){var e=R(a,c[d]);K.drawOne(a,e,{skipTitle:!0});nb[e._name+".range[0]"]=e.range[0];nb[e._name+".range[1]"]=e.range[1]}K.redrawComponents(a,c)}function ua(){if(!a._transitioningWithDuration){var b=a._context.doubleClick,c=[];qb&&(c=c.concat(la));gb&&(c=c.concat(ma));Xb.xaxes&&(c=c.concat(Xb.xaxes));Xb.yaxes&&(c=c.concat(Xb.yaxes));var d={},e;if("reset+autosize"===b)for(b="autosize",e=0;e<c.length;e++){var f=c[e];if(f._rangeInitial&&(f.range[0]!==
f._rangeInitial[0]||f.range[1]!==f._rangeInitial[1])||!f._rangeInitial&&!f.autorange){b="reset";break}}if("autosize"===b)for(e=0;e<c.length;e++)f=c[e],f.fixedrange||(d[f._name+".autorange"]=!0);else if("reset"===b){if(qb||Ya.isSubplotConstrained)c=c.concat(Ya.xaxes);gb&&!Ya.isSubplotConstrained&&(c=c.concat(Ya.yaxes));Ya.isSubplotConstrained&&(qb?gb||(c=c.concat(ma)):c=c.concat(la));for(e=0;e<c.length;e++)f=c[e],f.fixedrange||(f._rangeInitial?(b=f._rangeInitial,d[f._name+".range[0]"]=b[0],d[f._name+
".range[1]"]=b[1]):d[f._name+".autorange"]=!0)}a.emit("plotly_doubleclick",null);B.call("_guiRelayout",a,d)}}function Ba(){va([0,0,Oa,Sa]);C.syncOrAsync([O.previousPromises,function(){a._fullLayout._replotting=!1;B.call("_guiRelayout",a,nb)}],a)}function va(b){var c=a._fullLayout,d=c._plots;c=c._subplots.cartesian;var e;fb&&B.subplotsRegistry.splom.drag(a);if(ib)for(e=0;e<c.length;e++){var f=d[c[e]];var g=f.xaxis;var k=f.yaxis;if(f._scene){var h=C.simpleMap(g.range,g.r2l);k=C.simpleMap(k.range,k.r2l);
f._scene.update({range:[h[0],k[0],h[1],k[1]]})}}if(fb||ib)M(a),N(a);if(nc){h=b[2]/Ea._length;var l=b[3]/Ja._length;for(e=0;e<c.length;e++){f=d[c[e]];g=f.xaxis;k=f.yaxis;var n=db&&!k.fixedrange&&ja[k._id];if(bb&&!g.fixedrange&&Na[g._id]){var r=h;var q=F?b[0]:ka(g,r)}else Xb.xaHash[g._id]?(r=h,q=b[0]*g._length/Ea._length):Xb.yaHash[g._id]?(r=l,q="ns"===gb?-b[1]*g._length/Ja._length:ka(g,r,{n:"top",s:"bottom"}[gb])):(r=pa(g,h,l),q=ya(g,r));if(n){n=l;var u=G?b[1]:ka(k,n)}else Xb.yaHash[k._id]?(n=l,u=
b[1]*k._length/Ja._length):Xb.xaHash[k._id]?(n=h,u="ew"===qb?-b[0]*k._length/Ea._length:ka(k,n,{e:"right",w:"left"}[qb])):(n=pa(k,h,l),u=ya(k,n));if(r||n){r||(r=1);n||(n=1);g=g._offset-q/r;k=k._offset-u/n;f.clipRect.call(H.setTranslate,q,u).call(H.setScale,r,n);f.plot.call(H.setTranslate,g,k).call(H.setScale,1/r,1/n);if(r!==f.xScaleFactor||n!==f.yScaleFactor)H.setPointGroupScale(f.zoomScalePts,r,n),H.setTextPointsScale(f.zoomScaleTxt,r,n);H.hideOutsideRangePoints(f.clipOnAxisFalseTraces,f);f.xScaleFactor=
r;f.yScaleFactor=n}}}}function pa(a,b,c){return a.fixedrange?0:bb&&Ya.xaHash[a._id]?b:db&&(Ya.isSubplotConstrained?Ya.xaHash:Ya.yaHash)[a._id]?c:0}function ya(a,b){return b?(a.range=a._r.slice(),ba(a,b),ka(a,b)):0}function ka(a,b,c){return a._length*(1-b)*L[c||a.constraintoward||"middle"]}var xa=a._fullLayout._zoomlayer,Ia="nsew"===G+F,aa=1===(G+F).length,Ea,Ja,Na,ja,la,ma,Qa,pb,Oa,Sa,Ya,Xb,qb,gb,Pb,bb,db,ib,fb,nc,nb;U();var Ec=l(gb+qb,a._fullLayout.dragmode,Ia),Cb=g(f,G+F+"drag",Ec,p,m,t,I);if(Pb&&
!Ia)return Cb.onmousedown=null,Cb.style.pointerEvents="none",Cb;var La={element:Cb,gd:a,plotinfo:f,prepFn:function(b,c,d){var e=La.dragmode,f=a._fullLayout.dragmode;f!==e&&(La.dragmode=f);U();Pb||(Ia?b.shiftKey?"pan"===f?f="zoom":r(f)||(f="pan"):b.ctrlKey&&(f="pan"):f="pan");La.minDrag="lasso"===f?1:void 0;r(f)?(La.xaxes=la,La.yaxes=ma,T(b,c,d,La,f)):(La.clickFn=X,r(e)&&(La.plotinfo.selection=!1,P(xa)),Pb||("zoom"===f?(La.moveFn=W,La.doneFn=ea,La.minDrag=1,b=Cb.getBoundingClientRect(),Pa=c-b.left,
Ca=d-b.top,Ta={l:Pa,r:Pa,w:0,t:Ca,b:Ca,h:0},ec=a._hmpixcount?a._hmlumcount/a._hmpixcount:x(a._fullLayout.plot_bgcolor).getLuminance(),qd="M0,0H"+Oa+"V"+Sa+"H0V0",wc=!1,zb="xy",Oc=!1,mb=u(xa,ec,Qa,pb,qd),Kb=q(xa,Qa,pb)):"pan"===f&&(La.moveFn=ha,La.doneFn=Ba)))}};J.init(La);var Pa,Ca,Ta,ec,qd,wc,zb,mb,Kb,Oc,vb=[0,0,Oa,Sa],xc=null,Qd=da.REDRAWDELAY,Bb=f.mainplot?a._fullLayout._plots[f.mainplot]:f;1!==G.length*F.length&&A(Cb,na);return Cb},makeDragger:p,makeRectDragger:g,makeZoombox:u,makeCorners:q,updateZoombox:d,
xyCorners:v,transitionZoombox:f,removeZoombox:c,showDoubleClickNotifier:k,attachWheelEventHandler:A}},{"../../components/color":577,"../../components/dragelement":595,"../../components/drawing":598,"../../components/fx":616,"../../constants/alignment":672,"../../lib":700,"../../lib/clear_gl_canvases":685,"../../lib/setcursor":720,"../../lib/svg_text_utils":724,"../../plot_api/subroutines":739,"../../registry":829,"../plots":810,"./axes":748,"./axis_ids":751,"./constants":754,"./scale_zoom":764,"./select":765,
d3:154,"has-passive-events":403,tinycolor2:521}],757:[function(a,t,m){var p=a("d3"),g=a("../../components/fx"),h=a("../../components/dragelement"),e=a("../../lib/setcursor"),n=a("./dragbox").makeDragBox,b=a("./constants").DRAGGERSIZE;m.initInteractions=function(a){var e=a._fullLayout;if(a._context.staticPlot)p.select(a).selectAll(".drag").remove();else if(e._has("cartesian")||e._has("splom")){Object.keys(e._plots||{}).sort(function(a,b){return(e._plots[a].mainplot&&!0)===(e._plots[b].mainplot&&!0)?
(a=a.split("y"),b=b.split("y"),a[0]===b[0]?Number(a[1]||1)-Number(b[1]||1):Number(a[0]||1)-Number(b[0]||1)):e._plots[a].mainplot?1:-1}).forEach(function(d){var f=e._plots[d],c=f.xaxis,k=f.yaxis;if(!f.mainplot){var l=n(a,f,c._offset,k._offset,c._length,k._length,"ns","ew");l.onmousemove=function(b){a._fullLayout._rehover=function(){a._fullLayout._hoversubplot===d&&g.hover(a,b,d)};g.hover(a,b,d);a._fullLayout._lasthover=l;a._fullLayout._hoversubplot=d};l.onmouseout=function(b){a._dragging||(a._fullLayout._hoversubplot=
null,h.unhover(a,b))};a._context.showAxisDragHandles&&(n(a,f,c._offset-b,k._offset-b,b,b,"n","w"),n(a,f,c._offset+c._length,k._offset-b,b,b,"n","e"),n(a,f,c._offset-b,k._offset+k._length,b,b,"s","w"),n(a,f,c._offset+c._length,k._offset+k._length,b,b,"s","e"))}if(a._context.showAxisDragHandles){if(d===c._mainSubplot){var q=c._mainLinePosition;"top"===c.side&&(q-=b);n(a,f,c._offset+.1*c._length,q,.8*c._length,b,"","ew");n(a,f,c._offset,q,.1*c._length,b,"","w");n(a,f,c._offset+.9*c._length,q,.1*c._length,
b,"","e")}d===k._mainSubplot&&(c=k._mainLinePosition,"right"!==k.side&&(c-=b),n(a,f,c,k._offset+.1*k._length,b,.8*k._length,"ns",""),n(a,f,c,k._offset+.9*k._length,b,.1*k._length,"s",""),n(a,f,c,k._offset,b,.1*k._length,"n",""))}});var l=e._hoverlayer.node();l.onmousemove=function(b){b.target=a._fullLayout._lasthover;g.hover(a,b,e._hoversubplot)};l.onclick=function(b){b.target=a._fullLayout._lasthover;g.click(a,b)};l.onmousedown=function(b){a._fullLayout._lasthover.onmousedown(b)};m.updateFx(a)}};
m.updateFx=function(a){a=a._fullLayout;e(a._draggers,"pan"===a.dragmode?"move":"crosshair")}},{"../../components/dragelement":595,"../../components/fx":616,"../../lib/setcursor":720,"./constants":754,"./dragbox":756,d3:154}],758:[function(a,t,m){var p=a("../../registry"),g=a("../../lib");t.exports=function(a){return function(e,h){e=e[a];if(Array.isArray(e)){var b=p.subplotsRegistry.cartesian,l=b.idRegex,n=h._subplots,q=n.xaxis,d=n.yaxis;n=n.cartesian;for(var f=h._has("cartesian")||h._has("gl2d"),
c=0;c<e.length;c++){var k=e[c];if(g.isPlainObject(k)){var r=k.xref;k=k.yref;var m=l.x.test(r),t=l.y.test(k);if(m||t){f||g.pushUnique(h._basePlotModules,b);var A=!1;m&&-1===q.indexOf(r)&&(q.push(r),A=!0);t&&-1===d.indexOf(k)&&(d.push(k),A=!0);A&&m&&t&&n.push(r+k)}}}}}}},{"../../lib":700,"../../registry":829}],759:[function(a,t,m){function p(a,b,c){return q.ensureSingle(a,b,c,function(a){a.datum(c)})}function g(a,b,d,e,g){for(var k=r.traceLayerClasses,h=a._fullLayout,n=h._modules,q,p,m=[],t=[],v=0;v<
n.length;v++){q=n[v];p=q.name;var w=u.modules[p].categories;if(w.svg){var z=q.layerName||p+"layer";q=q.plot;d=c(d,q);p=d[0];d=d[1];p.length&&m.push({i:k.indexOf(z),className:z,plotMethod:q,cdModule:p});w.zoomScale&&t.push("."+z)}}m.sort(function(a,b){return a.i-b.i});k=b.plot.selectAll("g.mlayer").data(m,function(a){return a.className});k.enter().append("g").attr("class",function(a){return a.className}).classed("mlayer",!0);k.exit().remove();k.order();k.each(function(c){var d=l.select(this),k=c.className;
c.plotMethod(a,b,c.cdModule,d,e,g);"scatterlayer"!==k&&"barlayer"!==k&&"waterfalllayer"!==k&&f.setClipUrl(d,b.layerClipId,a)});h._has("scattergl")&&(q=u.getModule("scattergl"),p=c(d,q)[0],q.plot(a,b,p));a._context.staticPlot||(b._hasClipOnAxisFalse&&(b.clipOnAxisFalseTraces=b.plot.selectAll(".scatterlayer, .barlayer, .waterfalllayer").selectAll(".trace")),t.length&&(h=b.plot.selectAll(t.join(",")).selectAll(".trace"),b.zoomScalePts=h.selectAll("path.point"),b.zoomScaleTxt=h.selectAll(".textpoint")))}
function h(a){a=a._fullLayout;var b=a._subplots.cartesian,c=b.length,d,e=[],f=[];for(d=0;d<c;d++){var g=b[d];var k=a._plots[g];var h=k.xaxis;var l=k.yaxis;h=h._mainAxis._id+l._mainAxis._id;l=a._plots[h];k.overlays=[];h!==g&&l?(k.mainplot=h,k.mainplotinfo=l,f.push(g)):(k.mainplot=void 0,k.mainPlotinfo=void 0,e.push(g))}for(d=0;d<f.length;d++)g=f[d],k=a._plots[g],k.mainplotinfo.overlays.push(k);b=e.concat(f);e=Array(c);for(d=0;d<c;d++){g=b[d];k=a._plots[g];h=k.xaxis;l=k.yaxis;h=[g,h.layer,l.layer,h.overlaying||
"",l.overlaying||""];for(g=0;g<k.overlays.length;g++)h.push(k.overlays[g].id);e[d]=h}return e}function e(a,b){var c=b.plotgroup,d=b.id,e=r.layerValue2layerClass[b.xaxis.layer],f=r.layerValue2layerClass[b.yaxis.layer];a=a._fullLayout._hasOnlyLargeSploms;if(b.mainplot){c=b.mainplotinfo;var g=c.plotgroup,h=d+"-x",l=d+"-y";b.gridlayer=c.gridlayer;b.zerolinelayer=c.zerolinelayer;z(c.overlinesBelow,"path",h);z(c.overlinesBelow,"path",l);z(c.overaxesBelow,"g",h);z(c.overaxesBelow,"g",l);b.plot=z(c.overplot,
"g",d);z(c.overlinesAbove,"path",h);z(c.overlinesAbove,"path",l);z(c.overaxesAbove,"g",h);z(c.overaxesAbove,"g",l);b.xlines=g.select(".overlines-"+e).select("."+h);b.ylines=g.select(".overlines-"+f).select("."+l);b.xaxislayer=g.select(".overaxes-"+e).select("."+h);b.yaxislayer=g.select(".overaxes-"+f).select("."+l)}else a?(b.xlines=z(c,"path","xlines-above"),b.ylines=z(c,"path","ylines-above"),b.xaxislayer=z(c,"g","xaxislayer-above"),b.yaxislayer=z(c,"g","yaxislayer-above")):(d=z(c,"g","layer-subplot"),
b.shapelayer=z(d,"g","shapelayer"),b.imagelayer=z(d,"g","imagelayer"),b.gridlayer=z(c,"g","gridlayer"),b.zerolinelayer=z(c,"g","zerolinelayer"),z(c,"path","xlines-below"),z(c,"path","ylines-below"),b.overlinesBelow=z(c,"g","overlines-below"),z(c,"g","xaxislayer-below"),z(c,"g","yaxislayer-below"),b.overaxesBelow=z(c,"g","overaxes-below"),b.plot=z(c,"g","plot"),b.overplot=z(c,"g","overplot"),b.xlines=z(c,"path","xlines-above"),b.ylines=z(c,"path","ylines-above"),b.overlinesAbove=z(c,"g","overlines-above"),
z(c,"g","xaxislayer-above"),z(c,"g","yaxislayer-above"),b.overaxesAbove=z(c,"g","overaxes-above"),b.xlines=c.select(".xlines-"+e),b.ylines=c.select(".ylines-"+f),b.xaxislayer=c.select(".xaxislayer-"+e),b.yaxislayer=c.select(".yaxislayer-"+f));a||(p(b.gridlayer,"g",b.xaxis._id),p(b.gridlayer,"g",b.yaxis._id),b.gridlayer.selectAll("g").map(function(a){return a[0]}).sort(k.idSort));b.xlines.style("fill","none").classed("crisp",!0);b.ylines.style("fill","none").classed("crisp",!0)}function n(a,c){if(a){var d=
{};a.each(function(a){a=a[0];l.select(this).remove();b(a,c);d[a]=!0});for(var e in c._plots){a=c._plots[e].overlays||[];for(var f=0;f<a.length;f++){var g=a[f];d[g.id]&&g.plot.selectAll(".trace").remove()}}}}function b(a,b){b._draggers.selectAll("g."+a).remove();b._defs.select("#clip"+b._uid+a+"plot").remove()}var l=a("d3"),u=a("../../registry"),q=a("../../lib"),d=a("../plots"),f=a("../../components/drawing"),c=a("../get_data").getModuleCalcData,k=a("./axis_ids"),r=a("./constants"),v=a("../../constants/xmlns_namespaces"),
z=q.ensureSingle;m.name="cartesian";m.attr=["xaxis","yaxis"];m.idRoot=["x","y"];m.idRegex=r.idRegex;m.attrRegex=r.attrRegex;m.attributes=a("./attributes");m.layoutAttributes=a("./layout_attributes");m.supplyLayoutDefaults=a("./layout_defaults");m.transitionAxes=a("./transition_axes");m.finalizeSubplots=function(a,b){var c=b._subplots;b=c.xaxis;var d=c.yaxis,e=c.cartesian;c=e.concat(c.gl2d||[]);var f={},g={},h;for(h=0;h<c.length;h++){var l=c[h].split("y");f[l[0]]=1;g["y"+l[1]]=1}for(h=0;h<b.length;h++)if(l=
b[h],!f[l]){var n=(a[k.id2name(l)]||{}).anchor;r.idRegex.y.test(n)||(n="y");e.push(l+n);c.push(l+n);g[n]||(g[n]=1,q.pushUnique(d,n))}for(h=0;h<d.length;h++)n=d[h],g[n]||(l=(a[k.id2name(n)]||{}).anchor,r.idRegex.x.test(l)||(l="x"),e.push(l+n),c.push(l+n),f[l]||(f[l]=1,q.pushUnique(b,l)));if(!c.length){n=l="";for(var u in a)if(r.attrRegex.test(u))if("x"===u.charAt(0)){if(!l||+u.substr(5)<+l.substr(5))l=u}else if(!n||+u.substr(5)<+n.substr(5))n=u;l=l?k.name2id(l):"x";n=n?k.name2id(n):"y";b.push(l);d.push(n);
e.push(l+n)}};m.plot=function(a,b,c,d){var e=a._fullLayout,f=e._subplots.cartesian,k=a.calcdata,h;if(null!==b){if(!Array.isArray(b))for(b=[],h=0;h<k.length;h++)b.push(h);for(h=0;h<f.length;h++){for(var l=f[h],n=e._plots[l],r=[],q,u=0;u<k.length;u++){var p=k[u],m=p[0].trace;if(m.xaxis+m.yaxis===l){if(-1!==b.indexOf(m.index)||m.carpet)q&&q[0].trace.xaxis+q[0].trace.yaxis===l&&-1!==["tonextx","tonexty","tonext"].indexOf(m.fill)&&-1===r.indexOf(q)&&r.push(q),r.push(p);q=p}}g(a,n,r,c,d)}}};m.clean=function(a,
c,d,e){var f=e._plots||{};a=c._plots||{};d=e._subplots||{};var g;if(e._hasOnlyLargeSploms&&!c._hasOnlyLargeSploms)for(g in f){var h=f[g];h.plotgroup&&h.plotgroup.remove()}h=e._has&&e._has("gl");var l=c._has&&c._has("gl");if(h&&!l)for(g in f)h=f[g],h._scene&&h._scene.destroy();if(d.xaxis&&d.yaxis)for(f=k.listIds({_fullLayout:e}),g=0;g<f.length;g++)h=f[g],c[k.id2name(h)]||e._infolayer.selectAll(".g-"+h+"title").remove();g=e._has&&e._has("cartesian");c=c._has&&c._has("cartesian");if(g&&!c)n(e._cartesianlayer.selectAll(".subplot"),
e),e._defs.selectAll(".axesclip").remove(),delete e._axisConstraintGroups;else if(d.cartesian)for(g=0;g<d.cartesian.length;g++)c=d.cartesian[g],a[c]||(e._cartesianlayer.selectAll("."+c+",."+c+"-x,."+c+"-y").remove(),b(c,e))};m.drawFramework=function(a){var b=a._fullLayout,c=h(a);c=b._cartesianlayer.selectAll(".subplot").data(c,String);c.enter().append("g").attr("class",function(a){return"subplot "+a[0]});c.order();c.exit().call(n,b);c.each(function(c){c=c[0];var d=b._plots[c];d.plotgroup=l.select(this);
e(a,d);d.draglayer=z(b._draggers,"g",c)})};m.rangePlot=function(a,b,c){e(a,b);g(a,b,c);d.style(a)};m.toSVG=function(a){var b=a._fullLayout._glimages,c=l.select(a).selectAll(".svg-container");c.filter(function(a,b){return b===c.size()-1}).selectAll(".gl-canvas-context, .gl-canvas-focus").each(function(){var a=this.toDataURL("image/png");b.append("svg:image").attr({xmlns:v.svg,"xlink:href":a,preserveAspectRatio:"none",x:0,y:0,width:this.width,height:this.height})})};m.updateFx=a("./graph_interact").updateFx},
{"../../components/drawing":598,"../../constants/xmlns_namespaces":678,"../../lib":700,"../../registry":829,"../get_data":784,"../plots":810,"./attributes":746,"./axis_ids":751,"./constants":754,"./graph_interact":757,"./layout_attributes":760,"./layout_defaults":761,"./transition_axes":770,d3:154}],760:[function(a,t,m){m=a("../font_attributes");var p=a("../../components/color/attributes"),g=a("../../components/drawing/attributes").dash,h=a("../../lib/extend").extendFlat,e=a("../../plot_api/plot_template").templatedArray;
a=a("./constants");t.exports={visible:{valType:"boolean",editType:"plot"},color:{valType:"color",dflt:p.defaultLine,editType:"ticks"},title:{text:{valType:"string",editType:"ticks"},font:m({editType:"ticks"}),editType:"ticks"},type:{valType:"enumerated",values:"- linear log date category multicategory".split(" "),dflt:"-",editType:"calc",_noTemplating:!0},autorange:{valType:"enumerated",values:[!0,!1,"reversed"],dflt:!0,editType:"axrange",impliedEdits:{"range[0]":void 0,"range[1]":void 0}},rangemode:{valType:"enumerated",
values:["normal","tozero","nonnegative"],dflt:"normal",editType:"plot"},range:{valType:"info_array",items:[{valType:"any",editType:"axrange",impliedEdits:{"^autorange":!1},anim:!0},{valType:"any",editType:"axrange",impliedEdits:{"^autorange":!1},anim:!0}],editType:"axrange",impliedEdits:{autorange:!1},anim:!0},fixedrange:{valType:"boolean",dflt:!1,editType:"calc"},scaleanchor:{valType:"enumerated",values:[a.idRegex.x.toString(),a.idRegex.y.toString()],editType:"plot"},scaleratio:{valType:"number",
min:0,dflt:1,editType:"plot"},constrain:{valType:"enumerated",values:["range","domain"],dflt:"range",editType:"plot"},constraintoward:{valType:"enumerated",values:"left center right top middle bottom".split(" "),editType:"plot"},matches:{valType:"enumerated",values:[a.idRegex.x.toString(),a.idRegex.y.toString()],editType:"calc"},tickmode:{valType:"enumerated",values:["auto","linear","array"],editType:"ticks",impliedEdits:{tick0:void 0,dtick:void 0}},nticks:{valType:"integer",min:0,dflt:0,editType:"ticks"},
tick0:{valType:"any",editType:"ticks",impliedEdits:{tickmode:"linear"}},dtick:{valType:"any",editType:"ticks",impliedEdits:{tickmode:"linear"}},tickvals:{valType:"data_array",editType:"ticks"},ticktext:{valType:"data_array",editType:"ticks"},ticks:{valType:"enumerated",values:["outside","inside",""],editType:"ticks"},tickson:{valType:"enumerated",values:["labels","boundaries"],dflt:"labels",editType:"ticks"},mirror:{valType:"enumerated",values:[!0,"ticks",!1,"all","allticks"],dflt:!1,editType:"ticks+layoutstyle"},
ticklen:{valType:"number",min:0,dflt:5,editType:"ticks"},tickwidth:{valType:"number",min:0,dflt:1,editType:"ticks"},tickcolor:{valType:"color",dflt:p.defaultLine,editType:"ticks"},showticklabels:{valType:"boolean",dflt:!0,editType:"ticks"},automargin:{valType:"boolean",dflt:!1,editType:"ticks"},showspikes:{valType:"boolean",dflt:!1,editType:"modebar"},spikecolor:{valType:"color",dflt:null,editType:"none"},spikethickness:{valType:"number",dflt:3,editType:"none"},spikedash:h({},g,{dflt:"dash",editType:"none"}),
spikemode:{valType:"flaglist",flags:["toaxis","across","marker"],dflt:"toaxis",editType:"none"},spikesnap:{valType:"enumerated",values:["data","cursor"],dflt:"data",editType:"none"},tickfont:m({editType:"ticks"}),tickangle:{valType:"angle",dflt:"auto",editType:"ticks"},tickprefix:{valType:"string",dflt:"",editType:"ticks"},showtickprefix:{valType:"enumerated",values:["all","first","last","none"],dflt:"all",editType:"ticks"},ticksuffix:{valType:"string",dflt:"",editType:"ticks"},showticksuffix:{valType:"enumerated",
values:["all","first","last","none"],dflt:"all",editType:"ticks"},showexponent:{valType:"enumerated",values:["all","first","last","none"],dflt:"all",editType:"ticks"},exponentformat:{valType:"enumerated",values:"none e E power SI B".split(" "),dflt:"B",editType:"ticks"},separatethousands:{valType:"boolean",dflt:!1,editType:"ticks"},tickformat:{valType:"string",dflt:"",editType:"ticks"},tickformatstops:e("tickformatstop",{enabled:{valType:"boolean",dflt:!0,editType:"ticks"},dtickrange:{valType:"info_array",
items:[{valType:"any",editType:"ticks"},{valType:"any",editType:"ticks"}],editType:"ticks"},value:{valType:"string",dflt:"",editType:"ticks"},editType:"ticks"}),hoverformat:{valType:"string",dflt:"",editType:"none"},showline:{valType:"boolean",dflt:!1,editType:"ticks+layoutstyle"},linecolor:{valType:"color",dflt:p.defaultLine,editType:"layoutstyle"},linewidth:{valType:"number",min:0,dflt:1,editType:"ticks+layoutstyle"},showgrid:{valType:"boolean",editType:"ticks"},gridcolor:{valType:"color",dflt:p.lightLine,
editType:"ticks"},gridwidth:{valType:"number",min:0,dflt:1,editType:"ticks"},zeroline:{valType:"boolean",editType:"ticks"},zerolinecolor:{valType:"color",dflt:p.defaultLine,editType:"ticks"},zerolinewidth:{valType:"number",dflt:1,editType:"ticks"},showdividers:{valType:"boolean",dflt:!0,editType:"ticks"},dividercolor:{valType:"color",dflt:p.defaultLine,editType:"ticks"},dividerwidth:{valType:"number",dflt:1,editType:"ticks"},anchor:{valType:"enumerated",values:["free",a.idRegex.x.toString(),a.idRegex.y.toString()],
editType:"plot"},side:{valType:"enumerated",values:["top","bottom","left","right"],editType:"plot"},overlaying:{valType:"enumerated",values:["free",a.idRegex.x.toString(),a.idRegex.y.toString()],editType:"plot"},layer:{valType:"enumerated",values:["above traces","below traces"],dflt:"above traces",editType:"plot"},domain:{valType:"info_array",items:[{valType:"number",min:0,max:1,editType:"plot"},{valType:"number",min:0,max:1,editType:"plot"}],dflt:[0,1],editType:"plot"},position:{valType:"number",
min:0,max:1,dflt:0,editType:"plot"},categoryorder:{valType:"enumerated",values:["trace","category ascending","category descending","array"],dflt:"trace",editType:"calc"},categoryarray:{valType:"data_array",editType:"calc"},uirevision:{valType:"any",editType:"none"},editType:"calc",_deprecated:{autotick:{valType:"boolean",editType:"ticks"},title:{valType:"string",editType:"ticks"},titlefont:m({editType:"ticks"})}}},{"../../components/color/attributes":576,"../../components/drawing/attributes":597,
"../../lib/extend":690,"../../plot_api/plot_template":738,"../font_attributes":774,"./constants":754}],761:[function(a,t,m){function p(a,b,c){Array.isArray(a[b])?a[b].push(c):a[b]=[c]}var g=a("../../lib"),h=a("../../components/color"),e=a("../../plot_api/plot_template"),n=a("../layout_attributes"),b=a("./layout_attributes"),l=a("./type_defaults"),u=a("./axis_defaults"),q=a("./constraints").handleConstraintDefaults,d=a("./position_defaults");m=a("./axis_ids");var f=m.id2name,c=m.name2id;a=a("../../registry");
var k=a.traceIs,r=a.getComponentMethod;t.exports=function(a,m,t){function v(a,c){return g.coerce(O,R,b,a,c)}function w(a,c){return g.coerce2(O,R,b,a,c)}function z(b,d){b="x"===b?L:M;for(var e=[],f=0;f<b.length;f++){var g=b[f];g===d||(a[g]||{}).overlaying||e.push(c(g))}return e}var A={},B={},C={},D={},G={},H,E;for(H=0;H<t.length;H++){var K=t[H];if(k(K,"cartesian")||k(K,"gl2d")){if(K.xaxis){var I=f(K.xaxis);p(A,I,K)}else if(K.xaxes)for(E=0;E<K.xaxes.length;E++)p(A,f(K.xaxes[E]),K);if(K.yaxis){var J=
f(K.yaxis);p(A,J,K)}else if(K.yaxes)for(E=0;E<K.yaxes.length;E++)p(A,f(K.yaxes[E]),K);(!k(K,"carpet")||"carpet"===K.type&&!K._cheater)&&I&&(C[I]=1);"carpet"===K.type&&K._cheater&&I&&(B[I]=1);k(K,"2dMap")&&(D[I]=1,D[J]=1);k(K,"oriented")&&(G["h"===K.orientation?J:I]=1)}}E=m._subplots;H=E.xaxis;t=E.yaxis;var L=g.simpleMap(H,f),M=g.simpleMap(t,f);E=L.concat(M);K=h.background;H.length&&t.length&&(K=g.coerce(a,m,n,"plot_bgcolor"));K=h.combine(K,m.paper_bgcolor);J={x:t,y:H};t=J.x.concat(J.y);for(H=0;H<
E.length;H++){var N=E[H];I=N.charAt(0);g.isPlainObject(a[N])||(a[N]={});var O=a[N];var R=e.newContainer(m,N,I+"axis");var T=A[N]||[];R._traceIndices=T.map(function(a){return a._expandedIndex});R._annIndices=[];R._shapeIndices=[];R._imgIndices=[];R._subplotsWith=[];R._counterAxes=[];R._name=R._attr=N;var P=R._id=c(N),S=z(I,N);N={letter:I,font:m.font,outerTicks:D[N],showGrid:!G[N],data:T,bgColor:K,calendar:m.calendar,automargin:!0,cheateronly:"x"===I&&B[N]&&!C[N],splomStash:((m._splomAxes||{})[I]||
{})[P]};v("uirevision",m.uirevision);l(O,R,v,N);u(O,R,v,N,m);N=w("spikecolor");T=w("spikethickness");P=w("spikedash");var ba=w("spikemode"),da=w("spikesnap");v("showspikes",!!N||!!T||!!P||!!ba||!!da)||(delete R.spikecolor,delete R.spikethickness,delete R.spikedash,delete R.spikemode,delete R.spikesnap);d(O,R,v,{letter:I,counterAxes:J[I],overlayableAxes:S,grid:m.grid});R._input=O}A=r("rangeslider","handleDefaults");B=r("rangeselector","handleDefaults");for(H=0;H<L.length;H++)N=L[H],O=a[N],R=m[N],A(a,
m,N),"date"===R.type&&B(O,R,m,M,R.calendar),v("fixedrange");for(H=0;H<M.length;H++)N=M[H],O=a[N],R=m[N],A=m[f(R.anchor)],A=r("rangeslider","isVisible")(A),v("fixedrange",A);A=m._axisConstraintGroups=[];B=m._axisMatchGroups=[];for(H=0;H<E.length;H++)N=E[H],I=N.charAt(0),O=a[N],R=m[N],q(O,R,v,t,m);for(H=0;H<B.length;H++){C=B[H];G=D=null;for(var ca in C)R=m[f(ca)],R.matches||(D=R.range,G=R.autorange);if(null===D||null===G)for(ca in C){R=m[f(ca)];D=R.range;G=R.autorange;break}for(ca in C)R=m[f(ca)],R.matches&&
(R.range=D.slice(),R.autorange=G),R._matchGroup=C;if(A.length)for(ca in C)for(E=0;E<A.length;E++){C=A[E];for(var Y in C)ca===Y&&(g.warn("Axis "+Y+" is set with both a *scaleanchor* and *matches* constraint; ignoring the scale constraint."),delete C[Y],2>Object.keys(C).length&&A.splice(E,1))}}}},{"../../components/color":577,"../../lib":700,"../../plot_api/plot_template":738,"../../registry":829,"../layout_attributes":801,"./axis_defaults":750,"./axis_ids":751,"./constraints":755,"./layout_attributes":760,
"./position_defaults":763,"./type_defaults":771}],762:[function(a,t,m){var p=a("tinycolor2").mix,g=a("../../components/color/attributes").lightFraction,h=a("../../lib");t.exports=function(a,n,b,l){function e(b,d){return h.coerce2(a,n,l.attributes,b,d)}l=l||{};var q=l.dfltColor,d=e("linecolor",q),f=e("linewidth");b("showline",l.showLine||!!d||!!f)||(delete n.linecolor,delete n.linewidth);d=p(q,l.bgColor,l.blend||g).toRgbString();d=e("gridcolor",d);f=e("gridwidth");b("showgrid",l.showGrid||!!d||!!f)||
(delete n.gridcolor,delete n.gridwidth);l.noZeroLine||(q=e("zerolinecolor",q),d=e("zerolinewidth"),b("zeroline",l.showGrid||!!q||!!d)||(delete n.zerolinecolor,delete n.zerolinewidth))}},{"../../components/color/attributes":576,"../../lib":700,tinycolor2:521}],763:[function(a,t,m){var p=a("fast-isnumeric"),g=a("../../lib");t.exports=function(a,e,n,b){var h=b.counterAxes||[],u=b.overlayableAxes||[],q=b.letter;b=b.grid;if(b){var d=b._domains[q][b._axisMap[e._id]];var f=b._anchors[e._id];if(d){var c=
b[q+"side"].split(" ")[0];var k=b.domain[q]["right"===c||"top"===c?1:0]}}d=d||[0,1];f=f||(p(a.position)?"free":h[0]||"free");c=c||("x"===q?"bottom":"left");k=k||0;"free"===g.coerce(a,e,{anchor:{valType:"enumerated",values:["free"].concat(h),dflt:f}},"anchor")&&n("position",k);g.coerce(a,e,{side:{valType:"enumerated",values:"x"===q?["bottom","top"]:["left","right"],dflt:c}},"side");h=!1;u.length&&(h=g.coerce(a,e,{overlaying:{valType:"enumerated",values:[!1].concat(u),dflt:!1}},"overlaying"));h||(u=
n("domain",d),u[0]>u[1]-1/4096&&(e.domain=d),g.noneOrAll(a.domain,e.domain,d));n("layer");return e}},{"../../lib":700,"fast-isnumeric":221}],764:[function(a,t,m){var p=a("../../constants/alignment").FROM_BL;t.exports=function(a,h,e){void 0===e&&(e=p[a.constraintoward||"center"]);var g=[a.r2l(a.range[0]),a.r2l(a.range[1])];e=g[0]+(g[1]-g[0])*e;a.range=a._input.range=[a.l2r(e+(g[0]-e)*h),a.l2r(e+(g[1]-e)*h)]}},{"../../constants/alignment":672}],765:[function(a,t,m){function p(a){return a._id}function g(a,
c,e,g,h,r,p){var m=c._hoverdata,t=-1<c._fullLayout.clickmode.indexOf("event"),v=[],w;if(m&&Array.isArray(m)&&!0!==m[0].hoverOnBox){b(a,c,r);e=u(c,e,g,h);m=m[0];g=-1;h=[];var z;for(z=0;z<e.length;z++){var x=e[z];if(m.fullData._expandedIndex===x.cd[0].trace._expandedIndex){if(!0===m.hoverOnBox)break;void 0!==m.pointNumber?g=m.pointNumber:void 0!==m.binNumber&&(g=m.binNumber,h=m.pointNumbers);break}}x={pointNumber:g,pointNumbers:h,searchInfo:x};if(0<x.pointNumbers.length)a:{g=[];for(m=0;m<e.length;m++)h=
e[m],h.cd[0].trace.selectedpoints&&0<h.cd[0].trace.selectedpoints.length&&g.push(h);if(1===g.length&&(m=g[0]===x.searchInfo)&&(g=x.searchInfo.cd[0].trace,g.selectedpoints.length===x.pointNumbers.length)){for(m=0;m<x.pointNumbers.length;m++)if(0>g.selectedpoints.indexOf(x.pointNumbers[m])){m=!1;break a}m=!0;break a}m=!1}else{a:{for(g=m=0;g<e.length;g++)if(h=e[g],h=h.cd[0].trace,h.selectedpoints){if(1<h.selectedpoints.length){m=!1;break a}m+=h.selectedpoints.length;if(1<m){m=!1;break a}}m=1===m}m=m&&
(w=d(x))}if(m){p&&p.remove();for(w=0;w<e.length;w++)p=e[w],p._module.selectPoints(p,!1);f(c,e);l(r);t&&c.emit("plotly_deselect",null)}else{a=a.shiftKey&&(void 0!==w?w:d(x));a={pointNumber:x.pointNumber,searchInfo:x.searchInfo,subtract:a};w=r.selectionDefs.concat([a]);x=n(w);for(w=0;w<e.length;w++)if(m=e[w]._module.selectPoints(e[w],x),m=k(m,e[w]),v.length)for(g=0;g<m.length;g++)v.push(m[g]);else v=m;v={points:v};f(c,e,v);a&&r&&r.selectionDefs.push(a);p&&q(r.mergedPolygons,p);t&&c.emit("plotly_selected",
v)}}}function h(a){return"pointNumber"in a&&"searchInfo"in a}function e(a){return{xmin:0,xmax:0,ymin:0,ymax:0,pts:[],contains:function(b,c,d,e){return e.cd[0].trace._expandedIndex===a.searchInfo.cd[0].trace._expandedIndex&&d===a.pointNumber},isRect:!1,degenerate:!1,subtract:a.subtract}}function n(a){for(var b=[],c=h(a[0])?0:a[0][0][0],d=c,f=h(a[0])?0:a[0][0][1],g=f,k=0;k<a.length;k++)if(h(a[k]))b.push(e(a[k]));else{var l=w.tester(a[k]);l.subtract=a[k].subtract;b.push(l);c=Math.min(c,l.xmin);d=Math.max(d,
l.xmax);f=Math.min(f,l.ymin);g=Math.max(g,l.ymax)}return{xmin:c,xmax:d,ymin:f,ymax:g,pts:[],contains:function(a,c,d,e){for(var f=!1,g=0;g<b.length;g++)b[g].contains(a,c,d,e)&&(f=!1===b[g].subtract);return f},isRect:!1,degenerate:!1}}function b(a,b,c){b=b._fullLayout;var d=b._zoomlayer,e=c.plotinfo,f=b._lastSelectedSubplot&&b._lastSelectedSubplot===e.id;a=a.shiftKey||a.altKey;f&&a&&e.selection&&e.selection.selectionDefs&&!c.selectionDefs?(c.selectionDefs=e.selection.selectionDefs,c.mergedPolygons=
e.selection.mergedPolygons):a&&e.selection||l(c);f||(r(d),b._lastSelectedSubplot=e.id)}function l(a){var b=a.plotinfo;b.selection={};b.selection.selectionDefs=a.selectionDefs=[];b.selection.mergedPolygons=a.mergedPolygons=[]}function u(a,b,c,d){function e(a,b,c,d){return{_module:a,cd:b,xaxis:c,yaxis:d}}var f=[],g=b.map(p),k=c.map(p),h;for(h=0;h<a.calcdata.length;h++){var l=a.calcdata[h];var n=l[0].trace;!0===n.visible&&n._module&&n._module.selectPoints&&(!d||n.subplot!==d&&n.geo!==d?"splom"===n.type&&
n._xaxes[g[0]]&&n._yaxes[k[0]]?(l=e(n._module,l,b[0],c[0]),l.scene=a._fullLayout._splomScenes[n.uid],f.push(l)):-1!==g.indexOf(n.xaxis)&&-1!==k.indexOf(n.yaxis)&&f.push(e(n._module,l,B(a,n.xaxis),B(a,n.yaxis))):f.push(e(n._module,l,b[0],c[0])))}return f}function q(a,b){var c=[],d;for(d=0;d<a.length;d++){var e=a[d];c.push(e.join("L")+"L"+e[0])}a=0<a.length?"M"+c.join("M")+"Z":"M0,0Z";b.attr("d",a)}function d(a){var b=a.searchInfo.cd[0].trace,c=a.pointNumber;a=a.pointNumbers;c=0<a.length?a[0]:c;return b.selectedpoints?
-1<b.selectedpoints.indexOf(c):!1}function f(a,b,c){var d;for(d=0;d<b.length;d++){var e=b[d].cd[0].trace._fullInput;var f=a._fullLayout._tracePreGUI[e.uid];void 0===f.selectedpoints&&(f.selectedpoints=e._input.selectedpoints||null)}if(c){c=c.points||[];for(d=0;d<b.length;d++){var g=b[d].cd[0].trace;g._input.selectedpoints=g._fullInput.selectedpoints=[];g._fullInput!==g&&(g.selectedpoints=[])}for(d=0;d<c.length;d++){e=c[d];f=e.data;var k=e.fullData;e.pointIndices?([].push.apply(f.selectedpoints,e.pointIndices),
g._fullInput!==g&&[].push.apply(k.selectedpoints,e.pointIndices)):(f.selectedpoints.push(e.pointIndex),g._fullInput!==g&&k.selectedpoints.push(e.pointIndex))}}else for(d=0;d<b.length;d++)g=b[d].cd[0].trace,delete g.selectedpoints,delete g._input.selectedpoints,g._fullInput!==g&&delete g._fullInput.selectedpoints;e=!1;for(d=0;d<b.length;d++)f=b[d],c=f.cd,g=c[0].trace,z.traceIs(g,"regl")&&(e=!0),g=f._module,(g=g.styleOnSelect||g.style)&&g(a,c);e&&(C(a),D(a))}function c(a,b,c){if(c)return a=v.difference({regions:a,
inverted:!1},{regions:[b],inverted:!1}),a.regions;a=v.union({regions:a,inverted:!1},{regions:[b],inverted:!1});return a.regions}function k(a,b){if(Array.isArray(a)){var c=b.cd;b=b.cd[0].trace;for(var d=0;d<a.length;d++)a[d]=F(a[d],b,c)}return a}function r(a){a.selectAll(".select-outline").remove()}var v=a("polybooljs"),z=a("../../registry"),A=a("../../components/color"),y=a("../../components/fx"),w=a("../../lib/polygon"),x=a("../../lib/throttle"),F=a("../../components/fx/helpers").makeEventData,B=
a("./axis_ids").getFromId,C=a("../../lib/clear_gl_canvases"),D=a("../../plot_api/subroutines").redrawReglTraces,G=a("./constants"),H=G.MINSELECT,E=w.filter,K=w.tester;t.exports={prepSelect:function(a,d,e,h,r){function p(a){var b="y"===a._id.charAt(0)?1:0;return function(c){return a.p2d(c[b])}}function m(a,b){return a-b}var t=h.gd,v=t._fullLayout,w=v._zoomlayer,z=h.element.getBoundingClientRect(),B=h.plotinfo,J=B.xaxis._offset,D=B.yaxis._offset,C=d-z.left,I=e-z.top,F=C,L=I;d="M"+C+","+I;var M=h.xaxes[0]._length,
N=h.yaxes[0]._length,fa=h.xaxes.concat(h.yaxes),oa=a.altKey,ua,Z,qa,sa,V,ia,Ka;b(a,t,h);"lasso"===r&&(ua=E([[C,I]],G.BENDPX));var wa=w.selectAll("path.select-outline-"+B.id).data([1,2]);wa.enter().append("path").attr("class",function(a){return"select-outline select-outline-"+a+" select-outline-"+B.id}).attr("transform","translate("+J+", "+D+")").attr("d",d+"Z");var ja=w.append("path").attr("class","zoombox-corners").style({fill:A.background,stroke:A.defaultLine,"stroke-width":1}).attr("transform",
"translate("+J+", "+D+")").attr("d","M0,0Z"),Ha=v._uid+G.SELECTID,Ba=[],va=u(t,h.xaxes,h.yaxes,h.subplot);var pa=B.fillRangeItems?B.fillRangeItems:"select"===r?function(a,b){a=a.range={};for(V=0;V<fa.length;V++){var c=fa[V],d=c._id.charAt(0);a[c._id]=[c.p2d(b[d+"min"]),c.p2d(b[d+"max"])].sort(m)}}:function(a,b,c){a=a.lassoPoints={};for(V=0;V<fa.length;V++)b=fa[V],a[b._id]=c.filtered.map(p(b))};h.moveFn=function(a,b){F=Math.max(0,Math.min(M,a+C));L=Math.max(0,Math.min(N,b+I));a=Math.abs(F-C);b=Math.abs(L-
I);if("select"===r){var d=v.selectdirection;d="any"===v.selectdirection?b<Math.min(.6*a,H)?"h":a<Math.min(.6*b,H)?"v":"d":v.selectdirection;"h"===d?(sa=[[C,0],[C,N],[F,N],[F,0]],sa.xmin=Math.min(C,F),sa.xmax=Math.max(C,F),sa.ymin=Math.min(0,N),sa.ymax=Math.max(0,N),ja.attr("d","M"+sa.xmin+","+(I-H)+"h-4v"+2*H+"h4ZM"+(sa.xmax-1)+","+(I-H)+"h4v"+2*H+"h-4Z")):"v"===d?(sa=[[0,I],[0,L],[M,L],[M,I]],sa.xmin=Math.min(0,M),sa.xmax=Math.max(0,M),sa.ymin=Math.min(I,L),sa.ymax=Math.max(I,L),ja.attr("d","M"+
(C-H)+","+sa.ymin+"v-4h"+2*H+"v4ZM"+(C-H)+","+(sa.ymax-1)+"v4h"+2*H+"v-4Z")):"d"===d&&(sa=[[C,I],[C,L],[F,L],[F,I]],sa.xmin=Math.min(C,F),sa.xmax=Math.max(C,F),sa.ymin=Math.min(I,L),sa.ymax=Math.max(I,L),ja.attr("d","M0,0Z"))}else"lasso"===r&&(ua.addPt([F,L]),sa=ua.filtered);h.selectionDefs&&h.selectionDefs.length?(qa=c(h.mergedPolygons,sa,oa),sa.subtract=oa,Z=n(h.selectionDefs.concat([sa]))):(qa=[sa],Z=K(sa));q(qa,wa);x.throttle(Ha,G.SELECTDELAY,function(){Ba=[];var a=[];for(V=0;V<va.length;V++){ia=
va[V];var b=ia._module.selectPoints(ia,Z);a.push(b);b=k(b,ia);if(Ba.length)for(var c=0;c<b.length;c++)Ba.push(b[c]);else Ba=b}Ka={points:Ba};f(t,va,Ka);pa(Ka,sa,ua);h.gd.emit("plotly_selecting",Ka)})};h.clickFn=function(a,b){var c=v.clickmode;ja.remove();x.done(Ha).then(function(){x.clear(Ha);if(2===a){wa.remove();for(V=0;V<va.length;V++)ia=va[V],ia._module.selectPoints(ia,!1);f(t,va);l(h);t.emit("plotly_deselect",null)}else-1<c.indexOf("select")&&g(b,t,h.xaxes,h.yaxes,h.subplot,h,wa),"event"===c&&
t.emit("plotly_selected",void 0);y.click(t,b)})};h.doneFn=function(){ja.remove();x.done(Ha).then(function(){x.clear(Ha);h.gd.emit("plotly_selected",Ka);sa&&h.selectionDefs&&(sa.subtract=oa,h.selectionDefs.push(sa),h.mergedPolygons.length=0,[].push.apply(h.mergedPolygons,qa))})}},clearSelect:r,selectOnClick:g}},{"../../components/color":577,"../../components/fx":616,"../../components/fx/helpers":612,"../../lib/clear_gl_canvases":685,"../../lib/polygon":712,"../../lib/throttle":725,"../../plot_api/subroutines":739,
"../../registry":829,"./axis_ids":751,"./constants":754,polybooljs:465}],766:[function(a,t,m){function p(a){return Math.pow(10,a)}var g=a("d3"),h=a("fast-isnumeric"),e=a("../../lib"),n=e.cleanNumber,b=e.ms2DateTime,l=e.dateTime2ms,u=e.ensureNumber,q=e.isArrayOrTypedArray;m=a("../../constants/numerical");var d=m.FP_SAFE,f=m.BADNUM,c=m.LOG_CLIP,k=a("./constants"),r=a("./axis_ids");t.exports=function(a,m){function t(b,d){return 0<b?Math.log(b)/Math.LN10:0>=b&&d&&a.range&&2===a.range.length?(b=a.range[0],
d=a.range[1],.5*(b+d-2*c*Math.abs(b-d))):f}function v(b,c,d){c=l(b,d||a.calendar);if(c===f)if(h(b))b=+b,c=Math.floor(10*e.mod(b+.05,1)),c=l(new Date(Math.round(b-c/10)))+c/10;else return f;return c}function w(c,d,e){return b(c,d,e||a.calendar)}function z(b){return a._categories[Math.round(b)]}function F(b){if(null!==b&&void 0!==b){void 0===a._categoriesMap&&(a._categoriesMap={});if(void 0!==a._categoriesMap[b])return a._categoriesMap[b];a._categories.push(b);var c=a._categories.length-1;return a._categoriesMap[b]=
c}return f}function B(b){if(a._categoriesMap)return a._categoriesMap[b]}function C(a){var b=B(a);if(void 0!==b)return b;if(h(a))return+a}function D(b){return h(b)?g.round(a._b+a._m*b,2):f}function G(b){return(b-a._b)/a._m}m=m||{};var H=a._id||"x",E=H.charAt(0);a.c2l="log"===a.type?t:u;a.l2c="log"===a.type?p:u;a.l2p=D;a.p2l=G;a.c2p="log"===a.type?function(a,b){return D(t(a,b))}:D;a.p2c="log"===a.type?function(a){return p(G(a))}:G;-1!==["linear","-"].indexOf(a.type)?(a.d2r=a.r2d=a.d2c=a.r2c=a.d2l=a.r2l=
n,a.c2d=a.c2r=a.l2d=a.l2r=u,a.d2p=a.r2p=function(b){return a.l2p(n(b))},a.p2d=a.p2r=G,a.cleanPos=u):"log"===a.type?(a.d2r=a.d2l=function(a,b){return t(n(a),b)},a.r2d=a.r2c=function(a){return p(n(a))},a.d2c=a.r2l=n,a.c2d=a.l2r=u,a.c2r=t,a.l2d=p,a.d2p=function(b,c){return a.l2p(a.d2r(b,c))},a.p2d=function(a){return p(G(a))},a.r2p=function(b){return a.l2p(n(b))},a.p2r=G,a.cleanPos=u):"date"===a.type?(a.d2r=a.r2d=e.identity,a.d2c=a.r2c=a.d2l=a.r2l=v,a.c2d=a.c2r=a.l2d=a.l2r=w,a.d2p=a.r2p=function(b,c,
d){return a.l2p(v(b,0,d))},a.p2d=a.p2r=function(a,b,c){return w(G(a),b,c)},a.cleanPos=function(b){return e.cleanDate(b,f,a.calendar)}):"category"===a.type?(a.d2c=a.d2l=F,a.r2d=a.c2d=a.l2d=z,a.d2r=a.d2l_noadd=C,a.r2c=function(b){b=C(b);return void 0!==b?b:a.fraction2r(.5)},a.l2r=a.c2r=u,a.r2l=C,a.d2p=function(b){return a.l2p(a.r2c(b))},a.p2d=function(a){return z(G(a))},a.r2p=a.d2p,a.p2r=G,a.cleanPos=function(a){return"string"===typeof a&&""!==a?a:u(a)}):"multicategory"===a.type&&(a.r2d=a.c2d=a.l2d=
z,a.d2r=a.d2l_noadd=C,a.r2c=function(b){b=C(b);return void 0!==b?b:a.fraction2r(.5)},a.r2c_just_indices=B,a.l2r=a.c2r=u,a.r2l=C,a.d2p=function(b){return a.l2p(a.r2c(b))},a.p2d=function(a){return z(G(a))},a.r2p=a.d2p,a.p2r=G,a.cleanPos=function(a){return Array.isArray(a)||"string"===typeof a&&""!==a?a:u(a)},a.setupMultiCategory=function(b){var c=a._traceIndices,d,f=m._axisMatchGroups;if(f&&f.length&&0===a._categories.length)for(d=0;d<f.length;d++){var g=f[d];if(g[H])for(var k in g)k!==H&&(g=m[r.id2name(k)],
c=c.concat(g._traceIndices))}var h=[[0,{}],[0,{}]];f=[];for(d=0;d<c.length;d++)if(g=b[c[d]],E in g){k=g[E];var l=g._length||e.minRowLength(k);if(q(k[0])&&q(k[1]))for(g=0;g<l;g++){var n=k[0][g],u=k[1][g];null!==n&&void 0!==n&&null!==u&&void 0!==u&&(f.push([n,u]),n in h[0][1]||(h[0][1][n]=h[0][0]++),u in h[1][1]||(h[1][1][u]=h[1][0]++))}}f.sort(function(a,b){var c=h[0][1];if(c=c[a[0]]-c[b[0]])return c;c=h[1][1];return c[a[1]]-c[b[1]]});for(d=0;d<f.length;d++)F(f[d])});a.fraction2r=function(b){var c=
a.r2l(a.range[0]),d=a.r2l(a.range[1]);return a.l2r(c+b*(d-c))};a.r2fraction=function(b){var c=a.r2l(a.range[0]),d=a.r2l(a.range[1]);return(a.r2l(b)-c)/(d-c)};a.cleanRange=function(b,c){c||(c={});b||(b="range");var g=e.nestedProperty(a,b).get();var l="date"===a.type?e.dfltRange(a.calendar):"y"===E?k.DFLTRANGEY:c.dfltRange||k.DFLTRANGEX;l=l.slice();if(g&&2===g.length)for("date"===a.type&&(g[0]=e.cleanDate(g[0],f,a.calendar),g[1]=e.cleanDate(g[1],f,a.calendar)),c=0;2>c;c++)if("date"===a.type){if(!e.isDateTime(g[c],
a.calendar)){a[b]=l;break}if(a.r2l(g[0])===a.r2l(g[1])){b=e.constrain(a.r2l(g[0]),e.MIN_MS+1E3,e.MAX_MS-1E3);g[0]=a.l2r(b-1E3);g[1]=a.l2r(b+1E3);break}}else{if(!h(g[c]))if(h(g[1-c]))g[c]=g[1-c]*(c?10:.1);else{a[b]=l;break}g[c]<-d?g[c]=-d:g[c]>d&&(g[c]=d);if(g[0]===g[1]){var n=Math.max(1,Math.abs(1E-6*g[0]));g[0]-=n;g[1]+=n}}else e.nestedProperty(a,b).set(l)};a.setScale=function(b){var c=m._size;if(a.overlaying){var d=r.getFromId({_fullLayout:m},a.overlaying);a.domain=d.domain}d=b&&a._r?"_r":"range";
var e=a.calendar;a.cleanRange(d);b=a.r2l(a[d][0],e);d=a.r2l(a[d][1],e);"y"===E?(a._offset=c.t+(1-a.domain[1])*c.h,a._length=c.h*(a.domain[1]-a.domain[0]),a._m=a._length/(b-d),a._b=-a._m*d):(a._offset=c.l+a.domain[0]*c.w,a._length=c.w*(a.domain[1]-a.domain[0]),a._m=a._length/(d-b),a._b=-a._m*b);if(!isFinite(a._m)||!isFinite(a._b)||0>a._length)throw m._replotting=!1,Error("Something went wrong with axis scaling");};a.makeCalcdata=function(b,c){var d,f=a.type,g="date"===f&&b[c+"calendar"];if(c in b){c=
b[c];b=b._length||e.minRowLength(c);if(e.isTypedArray(c)&&("linear"===f||"log"===f)){if(b===c.length)return c;if(c.subarray)return c.subarray(0,b)}if("multicategory"===f){g=Array(b);for(f=0;f<b;f++)g[f]=B([(c[0]||[])[f],(c[1]||[])[f]]);return g}var k=Array(b);for(d=0;d<b;d++)k[d]=a.d2c(c[d],0,g)}else for(g=(c+"0"in b)?a.d2c(b[c+"0"],0,g):0,f=b["d"+c]?Number(b["d"+c]):1,c=b[{x:"y",y:"x"}[c]],b=b._length||c.length,k=Array(b),d=0;d<b;d++)k[d]=g+d*f;return k};a.isValidRange=function(b){return Array.isArray(b)&&
2===b.length&&h(a.r2l(b[0]))&&h(a.r2l(b[1]))};a.isPtWithinRange=function(b,c){b=a.c2l(b[E],null,c);c=a.r2l(a.range[0]);var d=a.r2l(a.range[1]);return c<d?c<=b&&b<=d:d<=b&&b<=c};a.clearCalc=function(){var b=function(){a._categories=[];a._categoriesMap={}},c=m._axisMatchGroups;if(c&&c.length){for(var d=!1,e=0;e<c.length;e++){var f=c[e];if(f[H]){d=!0;e=c=null;for(var g in f)if(f=m[r.id2name(g)],f._categories){c=f._categories;e=f._categoriesMap;break}c&&e?(a._categories=c,a._categoriesMap=e):b();break}}d||
b()}else b();if(a._initialCategories)for(b=0;b<a._initialCategories.length;b++)F(a._initialCategories[b])};var K=m._d3locale;"date"===a.type&&(a._dateFormat=K?K.timeFormat.utc:g.time.format.utc,a._extraFormat=m._extraFormat);a._separators=m.separators;a._numFormat=K?K.numberFormat:g.format;delete a._minDtick;delete a._forceTick0}},{"../../constants/numerical":677,"../../lib":700,"./axis_ids":751,"./constants":754,d3:154,"fast-isnumeric":221}],767:[function(a,t,m){function p(a){var b=["showexponent",
"showtickprefix","showticksuffix"].filter(function(b){return void 0!==a[b]});if(b.every(function(e){return a[e]===a[b[0]]})||1===b.length)return a[b[0]]}function g(a,g){h.coerce(a,g,e.tickformatstops,"enabled",void 0)&&(h.coerce(a,g,e.tickformatstops,"dtickrange",void 0),h.coerce(a,g,e.tickformatstops,"value",void 0))}var h=a("../../lib"),e=a("./layout_attributes"),n=a("../array_container_defaults");t.exports=function(a,l,u,q,d){var b=p(a);u("tickprefix")&&u("showtickprefix",b);u("ticksuffix",d.tickSuffixDflt)&&
u("showticksuffix",b);if(u("showticklabels")){d=d.font||{};var c=l.color;h.coerceFont(u,"tickfont",{family:d.family,size:d.size,color:c&&c!==e.color.dflt?c:d.color});u("tickangle");"category"!==q&&(d=u("tickformat"),c=a.tickformatstops,Array.isArray(c)&&c.length&&n(a,l,{name:"tickformatstops",inclusionAttr:"enabled",handleItemDefaults:g}),d||"date"===q||(u("showexponent",b),u("exponentformat"),u("separatethousands")))}}},{"../../lib":700,"../array_container_defaults":744,"./layout_attributes":760}],
768:[function(a,t,m){var p=a("../../lib"),g=a("./layout_attributes");t.exports=function(a,e,n,b){var h=p.coerce2(a,e,g,"ticklen"),u=p.coerce2(a,e,g,"tickwidth");a=p.coerce2(a,e,g,"tickcolor",e.color);n("ticks",b.outerTicks||h||u||a?"outside":"")||(delete e.ticklen,delete e.tickwidth,delete e.tickcolor)}},{"../../lib":700,"./layout_attributes":760}],769:[function(a,t,m){var p=a("./clean_ticks");t.exports=function(a,h,e,n){if("array"!==a.tickmode||"log"!==n&&"date"!==n){var b=Array.isArray(a.tickvals)?
"array":a.dtick?"linear":"auto";b=e("tickmode",b)}else b=h.tickmode="auto";"auto"===b?e("nticks"):"linear"===b?(e=h.dtick=p.dtick(a.dtick,n),h.tick0=p.tick0(a.tick0,n,h.calendar,e)):"multicategory"!==n&&(void 0===e("tickvals")?h.tickmode="auto":e("ticktext"))}},{"./clean_ticks":753}],770:[function(a,t,m){var p=a("d3"),g=a("../../registry"),h=a("../../components/drawing"),e=a("./axes");t.exports=function(a,b,l,u){function n(a){var b=a.xaxis,c=a.yaxis;k._defs.select("#"+a.clipId+"\x3e rect").call(h.setTranslate,
0,0).call(h.setScale,1,1);a.plot.call(h.setTranslate,b._offset,c._offset).call(h.setScale,1,1);b=a.plot.selectAll(".scatterlayer .trace");b.selectAll(".point").call(h.setPointGroupScale,1,1);b.selectAll(".textpoint").call(h.setTextPointsScale,1,1);b.call(h.hideOutsideRangePoints,a)}function d(){for(var c={},d=0;d<b.length;d++){var e=b[d];e.xr1&&(c[e.plotinfo.xaxis._name+".range"]=e.xr1.slice());e.yr1&&(c[e.plotinfo.yaxis._name+".range"]=e.yr1.slice())}r&&r();return g.call("relayout",a,c).then(function(){for(var a=
0;a<b.length;a++)n(b[a].plotinfo)})}function f(){for(var c={},d=0;d<b.length;d++){var e=b[d];e.xr0&&(c[e.plotinfo.xaxis._name+".range"]=e.xr0.slice());e.yr0&&(c[e.plotinfo.yaxis._name+".range"]=e.yr0.slice())}return g.call("relayout",a,c).then(function(){for(var a=0;a<b.length;a++)n(b[a].plotinfo)})}function c(){m=Date.now();for(var f=t(Math.min(1,(m-A)/l.duration)),g=0;g<b.length;g++){var k=b[g],n=f,r=k.plotinfo,q=r.xaxis,u=r.yaxis,p=k.xr0,v=k.xr1,z=q._length,I=k.yr0,J=k.yr1,L=u._length;k=!!v;var M=
!!J,N=[];if(k){var O=p[1]-p[0],R=v[1]-v[0];N[0]=(p[0]*(1-n)+n*v[0]-p[0])/(p[1]-p[0])*z;N[2]=z*(1-n+n*R/O);q.range[0]=p[0]*(1-n)+n*v[0];q.range[1]=p[1]*(1-n)+n*v[1]}else N[0]=0,N[2]=z;M?(p=I[1]-I[0],v=J[1]-J[0],N[1]=(I[1]*(1-n)+n*J[1]-I[1])/(I[0]-I[1])*L,N[3]=L*(1-n+n*v/p),u.range[0]=I[0]*(1-n)+n*J[0],u.range[1]=I[1]*(1-n)+n*J[1]):(N[1]=0,N[3]=L);e.drawOne(a,q,{skipTitle:!0});e.drawOne(a,u,{skipTitle:!0});e.redrawComponents(a,[q._id,u._id]);n=k?z/N[2]:1;I=M?L/N[3]:1;q=q._offset-(k?N[0]/N[2]*z:0);u=
u._offset-(M?N[1]/N[3]*L:0);r.clipRect.call(h.setTranslate,k?N[0]:0,M?N[1]:0).call(h.setScale,1/n,1/I);r.plot.call(h.setTranslate,q,u).call(h.setScale,n,I);h.setPointGroupScale(r.zoomScalePts,1/n,1/I);h.setTextPointsScale(r.zoomScaleTxt,1/n,1/I)}m-A>l.duration?(d(),y=window.cancelAnimationFrame(c)):y=window.requestAnimationFrame(c)}var k=a._fullLayout;if(0===b.length)e.redrawComponents(a);else{var r;u&&(r=u());var m,t=p.ease(l.easing);a._transitionData._interruptCallbacks.push(function(){window.cancelAnimationFrame(y);
y=null;return f()});var A=Date.now();var y=window.requestAnimationFrame(c);return Promise.resolve()}}},{"../../components/drawing":598,"../../registry":829,"./axes":748,d3:154}],771:[function(a,t,m){function p(a,h){var b={v:"x",h:"y"}[a.orientation||"v"],e=g(a,"box-violin"),n=g(a._fullInput||{},"candlestick");return e&&!n&&h===b&&void 0===a[b]&&void 0===a[b+"0"]}var g=a("../../registry").traceIs,h=a("./axis_autotype");t.exports=function(a,n,b,l){if("-"===b("type",(l.splomStash||{}).type)){l=l.data;
if("-"===n.type){b=n._id;var e=b.charAt(0);-1!==b.indexOf("scene")&&(b=e);b:{for(var q=b,d=0;d<l.length;d++){var f=l[d];if("splom"===f.type&&0<f._length&&(f["_"+e+"axes"]||{})[q]||(f[e+"axis"]||e)===q&&(p(f,e)||(f[e]||[]).length||f[e+"0"]))break b}f=void 0}if(f)if("histogram"===f.type&&e==={v:"y",h:"x"}[f.orientation||"v"])n.type="linear";else{var c=e+"calendar";q=f[c];d={noMultiCategory:!g(f,"cartesian")||g(f,"noMultiCategory")};if(p(f,e)){var k={v:"x",h:"y"}[f.orientation||"v"],r=[];for(f=0;f<l.length;f++){var m=
l[f];g(m,"box-violin")&&(m[e+"axis"]||e)===b&&(void 0!==m[k]?r.push(m[k][0]):void 0!==m.name?r.push(m.name):r.push("text"),m[c]!==q&&(q=void 0))}n.type=h(r,q,d)}else if("splom"===f.type)for(l=f.dimensions,e=f._diag,f=0;f<l.length;f++){if(c=l[f],c.visible&&(e[f][0]===b||e[f][1]===b)){n.type=h(c.values,q,d);break}}else n.type=h(f[e]||[f[e+"0"]],q,d)}}"-"===n.type?n.type="linear":a.type=n.type}}},{"../../registry":829,"./axis_autotype":749}],772:[function(a,t,m){function p(a,e,g){var d=!1;if("data"===
e.type)a=a._fullData[null!==e.traces?e.traces[0]:0];else if("layout"===e.type)a=a._fullLayout;else return!1;a=b.nestedProperty(a,e.prop).get();g=g[e.type]=g[e.type]||{};g.hasOwnProperty(e.prop)&&g[e.prop]!==a&&(d=!0);g[e.prop]=a;return{changed:d,value:a}}function g(a,g){var h=[];a=g[0];var d={};if("string"===typeof a)d[a]=g[1];else if(b.isPlainObject(a))d=a;else return h;e(d,function(a,b,d){h.push({type:"layout",prop:a,value:d})},"",0);return h}function h(a,g){var h=[];var d=g[0];var f=g[1];var c=
g[2];g={};if("string"===typeof d)g[d]=f;else if(b.isPlainObject(d))g=d,void 0===c&&(c=f);else return h;void 0===c&&(c=null);e(g,function(b,d,e){if(Array.isArray(e)){var f=Math.min(e.length,a.data.length);c&&(f=Math.min(f,c.length));d=[];for(var g=0;g<f;g++)d[g]=c?c[g]:g}else d=c?c.slice(0):null;if(null===d)Array.isArray(e)&&(e=e[0]);else if(Array.isArray(d)){if(!Array.isArray(e))for(f=e,e=[],g=0;g<d.length;g++)e[g]=f;e.length=Math.min(d.length,e.length)}h.push({type:"data",prop:b,traces:d,value:e})},
"",0);return h}function e(a,g,h,d){Object.keys(a).forEach(function(f){var c=a[f];if("_"!==f[0]){var k=h+(0<d?".":"")+f;b.isPlainObject(c)?e(c,g,k,d+1):g(k,f,c)}})}var n=a("../registry"),b=a("../lib");m.manageCommandObserver=function(a,e,g,d){var f={},c=!0;e&&e._commandObserver&&(f=e._commandObserver);f.cache||(f.cache={});f.lookupTable={};var k=m.hasSimpleAPICommandBindings(a,g,f.lookupTable);if(e&&e._commandObserver){if(k)return f;if(e._commandObserver.remove)return e._commandObserver.remove(),e._commandObserver=
null,f}if(k){p(a,k,f.cache);f.check=function(){if(c){var b=p(a,k,f.cache);b.changed&&d&&void 0!==f.lookupTable[b.value]&&(f.disable(),Promise.resolve(d({value:b.value,type:k.type,prop:k.prop,traces:k.traces,index:f.lookupTable[b.value]})).then(f.enable,f.enable));return b.changed}};var h="plotly_relayout plotly_redraw plotly_restyle plotly_update plotly_animatingframe plotly_afterplot".split(" ");for(g=0;g<h.length;g++)a._internalOn(h[g],f.check);f.remove=function(){for(var b=0;b<h.length;b++)a._removeInternalListener(h[b],
f.check)}}else b.log("Unable to automatically bind plot updates to API command"),f.lookupTable={},f.remove=function(){};f.disable=function(){c=!1};f.enable=function(){c=!0};e&&(e._commandObserver=f);return f};m.hasSimpleAPICommandBindings=function(a,b,e){var d,f=b.length;for(d=0;d<f;d++){var c=b[d];var g=c.method;c=c.args;Array.isArray(c)||(c=[]);if(!g)return!1;c=m.computeAPICommandBindings(a,g,c);if(1!==c.length)return!1;if(l){g=c[0];if(g.type!==l.type||g.prop!==l.prop)return!1;if(Array.isArray(l.traces))if(Array.isArray(g.traces)){g.traces.sort();
for(var h=0;h<l.traces.length;h++)if(l.traces[h]!==g.traces[h])return!1}else return!1;else if(g.prop!==l.prop)return!1}else{var l=c[0];Array.isArray(l.traces)&&l.traces.sort()}g=c[0];g=g.value;if(Array.isArray(g))if(1===g.length)g=g[0];else return!1;e&&(e[g]=d)}return l};m.executeAPICommand=function(a,e,g){if("skip"===e)return Promise.resolve();var d=n.apiMethodRegistry[e];a=[a];Array.isArray(g)||(g=[]);for(var f=0;f<g.length;f++)a.push(g[f]);return d.apply(null,a).catch(function(a){b.warn("API call to Plotly."+
e+" rejected.",a);return Promise.reject(a)})};m.computeAPICommandBindings=function(a,b,e){Array.isArray(e)||(e=[]);switch(b){case "restyle":a=h(a,e);break;case "relayout":a=g(a,e);break;case "update":a=h(a,[e[0],e[2]]).concat(g(a,[e[1]]));break;case "animate":a=e;a=Array.isArray(a[0])&&1===a[0].length&&-1!==["string","number"].indexOf(typeof a[0][0])?[{type:"layout",prop:"_currentFrame",value:a[0][0].toString()}]:[];break;default:a=[]}return a}},{"../lib":700,"../registry":829}],773:[function(a,t,
m){var p=a("../lib/extend").extendFlat;m.attributes=function(a,h){a=a||{};h={valType:"info_array",editType:a.editType,items:[{valType:"number",min:0,max:1,editType:a.editType},{valType:"number",min:0,max:1,editType:a.editType}],dflt:[0,1]};h={x:p({},h,{}),y:p({},h,{}),editType:a.editType};a.noGridCell||(h.row={valType:"integer",min:0,dflt:0,editType:a.editType},h.column={valType:"integer",min:0,dflt:0,editType:a.editType});return h};m.defaults=function(a,h,e,n){var b=n&&n.x||[0,1];n=n&&n.y||[0,1];
if(h=h.grid){var g=e("domain.column");void 0!==g&&(g<h.columns?b=h._domains.x[g]:delete a.domain.column);g=e("domain.row");void 0!==g&&(g<h.rows?n=h._domains.y[g]:delete a.domain.row)}e("domain.x",b);e("domain.y",n)}},{"../lib/extend":690}],774:[function(a,t,m){t.exports=function(a){var g=a.editType,h=a.colorEditType;void 0===h&&(h=g);g={family:{valType:"string",noBlank:!0,strict:!0,editType:g},size:{valType:"number",min:1,editType:g},color:{valType:"color",editType:h},editType:g};a.arrayOk&&(g.family.arrayOk=
!0,g.size.arrayOk=!0,g.color.arrayOk=!0);return g}},{}],775:[function(a,t,m){t.exports={_isLinkedToArray:"frames_entry",group:{valType:"string"},name:{valType:"string"},traces:{valType:"any"},baseframe:{valType:"string"},data:{valType:"any"},layout:{valType:"any"}}},{}],776:[function(a,t,m){m.projNames={equirectangular:"equirectangular",mercator:"mercator",orthographic:"orthographic","natural earth":"naturalEarth",kavrayskiy7:"kavrayskiy7",miller:"miller",robinson:"robinson",eckert4:"eckert4","azimuthal equal area":"azimuthalEqualArea",
"azimuthal equidistant":"azimuthalEquidistant","conic equal area":"conicEqualArea","conic conformal":"conicConformal","conic equidistant":"conicEquidistant",gnomonic:"gnomonic",stereographic:"stereographic",mollweide:"mollweide",hammer:"hammer","transverse mercator":"transverseMercator","albers usa":"albersUsa","winkel tripel":"winkel3",aitoff:"aitoff",sinusoidal:"sinusoidal"};m.axesNames=["lonaxis","lataxis"];m.lonaxisSpan={orthographic:180,"azimuthal equal area":360,"azimuthal equidistant":360,
"conic conformal":180,gnomonic:160,stereographic:180,"transverse mercator":180,"*":360};m.lataxisSpan={"conic conformal":150,stereographic:179.5,"*":180};m.scopeDefaults={world:{lonaxisRange:[-180,180],lataxisRange:[-90,90],projType:"equirectangular",projRotate:[0,0,0]},usa:{lonaxisRange:[-180,-50],lataxisRange:[15,80],projType:"albers usa"},europe:{lonaxisRange:[-30,60],lataxisRange:[30,85],projType:"conic conformal",projRotate:[15,0,0],projParallels:[0,60]},asia:{lonaxisRange:[22,160],lataxisRange:[-15,
55],projType:"mercator",projRotate:[0,0,0]},africa:{lonaxisRange:[-30,60],lataxisRange:[-40,40],projType:"mercator",projRotate:[0,0,0]},"north america":{lonaxisRange:[-180,-45],lataxisRange:[5,85],projType:"conic conformal",projRotate:[-100,0,0],projParallels:[29.5,45.5]},"south america":{lonaxisRange:[-100,-30],lataxisRange:[-60,15],projType:"mercator",projRotate:[0,0,0]}};m.clipPad=.001;m.precision=.1;m.landColor="#F0DC82";m.waterColor="#3399FF";m.locationmodeToLayer={"ISO-3":"countries","USA-states":"subunits",
"country names":"countries"};m.sphereSVG={type:"Sphere"};m.fillLayers={ocean:1,land:1,lakes:1};m.lineLayers={subunits:1,countries:1,coastlines:1,rivers:1,frame:1};m.layers="bg ocean land lakes subunits countries coastlines rivers lataxis lonaxis frame backplot frontplot".split(" ");m.layersForChoropleth="bg ocean land subunits countries coastlines lataxis lonaxis frame backplot rivers lakes frontplot".split(" ");m.layerNameToAdjective={ocean:"ocean",land:"land",lakes:"lake",subunits:"subunit",countries:"country",
coastlines:"coastline",rivers:"river",frame:"frame"}},{}],777:[function(a,t,m){function p(a){this.id=a.id;this.graphDiv=a.graphDiv;this.container=a.container;this.topojsonURL=a.topojsonURL;this.isStatic=a.staticPlot;this.midPt=this.bounds=this.fitScale=this.viewInitial=this.projection=this.topojson=this.topojsonName=null;this.hasChoropleth=!1;this.traceHash={};this.layers={};this.basePaths={};this.dataPaths={};this.dataPoints={};this.bgRect=this.clipRect=this.clipDef=null;this.makeFramework()}function g(a){var b=
a.projection.type,c=e.geo[z.projNames[b]](),d=a._isClipped?z.lonaxisSpan[b]/2:null;a=["center","rotate","parallels","clipExtent"];b=function(a){return a?c:[]};for(var f=0;f<a.length;f++){var g=a[f];"function"!==typeof c[g]&&(c[g]=b)}c.isLonLatOverEdges=function(a){if(null===c(a))return!0;if(d){var b=c.rotate();return e.geo.distance(a,[-b[0],-b[1]])>d*Math.PI/180}return!1};c.getPath=function(){return e.geo.path().projection(c)};c.getBounds=function(a){return c.getPath().bounds(a)};c.fitExtent=function(a,
b){var d=a[1][0]-a[0][0],e=a[1][1]-a[0][1],f=c.clipExtent&&c.clipExtent();c.scale(150).translate([0,0]);f&&c.clipExtent(null);var g=c.getBounds(b);b=Math.min(d/(g[1][0]-g[0][0]),e/(g[1][1]-g[0][1]));d=+a[0][0]+(d-b*(g[1][0]+g[0][0]))/2;a=+a[0][1]+(e-b*(g[1][1]+g[0][1]))/2;f&&c.clipExtent(f);return c.scale(150*b).translate([d,a])};c.precision(z.precision);d&&c.clipAngle(d-z.clipPad);return c}function h(a,b){var c=b[a].dtick,d=z.scopeDefaults[b.scope];b=d.lonaxisRange;d=d.lataxisRange;a="lonaxis"===
a?[c]:[0,c];return e.geo.graticule().extent([[b[0],d[0]],[b[1],d[1]]]).step(a)}var e=a("d3"),n=a("../../registry"),b=a("../../lib"),l=a("../../components/color"),u=a("../../components/drawing"),q=a("../../components/fx"),d=a("../plots"),f=a("../cartesian/axes"),c=a("../../components/dragelement"),k=a("../cartesian/select").prepSelect,r=a("../cartesian/select").selectOnClick,v=a("./zoom"),z=a("./constants"),A=a("../../lib/topojson_utils"),y=a("topojson-client").feature;a("./projections")(e);a=p.prototype;
t.exports=function(a){return new p(a)};a.plot=function(a,b,c){var d=this,e=A.getTopojsonName(b[this.id]);null===d.topojson||e!==d.topojsonName?(d.topojsonName=e,void 0===PlotlyGeoAssets.topojson[d.topojsonName]?c.push(d.fetchTopojson().then(function(c){PlotlyGeoAssets.topojson[d.topojsonName]=c;d.topojson=c;d.update(a,b)})):(d.topojson=PlotlyGeoAssets.topojson[d.topojsonName],d.update(a,b))):d.update(a,b)};a.fetchTopojson=function(){var a=A.getTopojsonPath(this.topojsonURL,this.topojsonName);return new Promise(function(b,
c){e.json(a,function(d,e){if(d)return 404===d.status?c(Error(["plotly.js could not find topojson file at",a,". Make sure the *topojsonURL* plot config option is set properly."].join(" "))):c(Error(["unexpected error while fetching topojson file at",a].join(" ")));b(e)})})};a.update=function(a,b){var c=b[this.id];if(!this.updateProjection(b,c)){this.hasChoropleth=!1;for(var e=0;e<a.length;e++)if("choropleth"===a[e][0].trace.type){this.hasChoropleth=!0;break}this.viewInitial||this.saveViewInitial(c);
this.updateBaseLayers(b,c);this.updateDims(b,c);this.updateFx(b,c);d.generalUpdatePerTraceModule(this.graphDiv,this,a,c);a=this.layers.frontplot.select(".scatterlayer");this.dataPoints.point=a.selectAll(".point");this.dataPoints.text=a.selectAll("text");this.dataPaths.line=a.selectAll(".js-line");a=this.layers.backplot.select(".choroplethlayer");this.dataPaths.choropleth=a.selectAll("path");this.render()}};a.updateProjection=function(a,c){var d=a._size,e=c.domain,f=c.projection,k=f.rotation||{},h=
c.center||{};a=this.projection=g(c);a.center([h.lon-k.lon,h.lat-k.lat]).rotate([-k.lon,-k.lat,k.roll]).parallels(f.parallels);d=[[d.l+d.w*e.x[0],d.t+d.h*(1-e.y[1])],[d.l+d.w*e.x[1],d.t+d.h*(1-e.y[0])]];k=c.lonaxis.range;var l=c.lataxis.range,r=z.clipPad;e=k[0]+r;k=k[1]-r;var q=l[0]+r;l=l[1]-r;0<e&&0>k&&(k+=360);r=(k-e)/4;e={type:"Polygon",coordinates:[[[e,q],[e,l],[e+r,l],[e+2*r,l],[e+3*r,l],[k,l],[k,q],[k-r,q],[k-2*r,q],[k-3*r,q],[e,q]]]};a.fitExtent(d,e);d=this.bounds=a.getBounds(e);e=this.fitScale=
a.scale();k=a.translate();if(!(isFinite(d[0][0])&&isFinite(d[0][1])&&isFinite(d[1][0])&&isFinite(d[1][1]))||isNaN(k[0])||isNaN(k[0])){a=this.graphDiv;c=["projection.rotation","center","lonaxis.range","lataxis.range"];f={};for(h=0;h<c.length;h++)f[this.id+"."+c[h]]=null;this.viewInitial=null;b.warn("Invalid geo settings, relayout'ing to default view.");a._promises.push(n.call("relayout",a,f));return"Invalid geo settings, relayout'ing to default view."}q=this.midPt=[(d[0][0]+d[1][0])/2,(d[0][1]+d[1][1])/
2];a.scale(f.scale*e).translate([k[0]+(q[0]-k[0]),k[1]+(q[1]-k[1])]).clipExtent(d);c._isAlbersUsa&&(c=a([h.lon,h.lat]),f=a.translate(),a.translate([f[0]-(c[0]-f[0]),f[1]-(c[1]-f[1])]))};a.updateBaseLayers=function(a,b){function c(a){return"lonaxis"===a||"lataxis"===a}var d=this,f=d.topojson,g=d.layers,k=d.basePaths;a=(this.hasChoropleth?z.layersForChoropleth:z.layers).filter(function(a){return z.lineLayers[a]||z.fillLayers[a]?b["show"+a]:c(a)?b[a].showgrid:!0});a=d.framework.selectAll(".layer").data(a,
String);a.exit().each(function(a){delete g[a];delete k[a];e.select(this).remove()});a.enter().append("g").attr("class",function(a){return"layer "+a}).each(function(a){var b=g[a]=e.select(this);"bg"===a?d.bgRect=b.append("rect").style("pointer-events","all"):c(a)?k[a]=b.append("path").style("fill","none"):"backplot"===a?b.append("g").classed("choroplethlayer",!0):"frontplot"===a?b.append("g").classed("scatterlayer",!0):z.lineLayers[a]?k[a]=b.append("path").style("fill","none").style("stroke-miterlimit",
2):z.fillLayers[a]&&(k[a]=b.append("path").style("stroke","none"))});a.order();a.each(function(a){var d=k[a],e=z.layerNameToAdjective[a];"frame"===a?d.datum(z.sphereSVG):z.lineLayers[a]||z.fillLayers[a]?d.datum(y(f,f.objects[a])):c(a)&&d.datum(h(a,b)).call(l.stroke,b[a].gridcolor).call(u.dashLine,"",b[a].gridwidth);z.lineLayers[a]?d.call(l.stroke,b[e+"color"]).call(u.dashLine,"",b[e+"width"]):z.fillLayers[a]&&d.call(l.fill,b[e+"color"])})};a.updateDims=function(a,b){var c=this.bounds,d=(b.framewidth||
0)/2;a=c[0][0]-d;var e=c[0][1]-d,f=c[1][0]-a+d;c=c[1][1]-e+d;u.setRect(this.clipRect,a,e,f,c);this.bgRect.call(u.setRect,a,e,f,c).call(l.fill,b.bgcolor);this.xaxis._offset=a;this.xaxis._length=f;this.yaxis._offset=e;this.yaxis._length=c};a.updateFx=function(a,b){function d(){var a=g.viewInitial,b={},c;for(c in a)b[g.id+"."+c]=a[c];n.call("_guiRelayout",h,b);h.emit("plotly_doubleclick",null)}function f(a){return g.projection.invert([a[0]+g.xaxis._offset,a[1]+g.yaxis._offset])}var g=this,h=g.graphDiv,
l=g.bgRect,u=a.dragmode,p=a.clickmode;if(!g.isStatic){var m;"select"===u?m=function(a,b){(a.range={})[g.id]=[f([b.xmin,b.ymin]),f([b.xmax,b.ymax])]}:"lasso"===u&&(m=function(a,b,c){(a.lassoPoints={})[g.id]=c.filtered.map(f)});var t={element:g.bgRect.node(),gd:h,plotinfo:{id:g.id,xaxis:g.xaxis,yaxis:g.yaxis,fillRangeItems:m},xaxes:[g.xaxis],yaxes:[g.yaxis],subplot:g.id,clickFn:function(b){2===b&&a._zoomlayer.selectAll(".select-outline").remove()}};if("pan"===u){if(l.node().onmousedown=null,l.call(v(g,
b)),l.on("dblclick.zoom",d),!h._context._scrollZoom.geo)l.on("wheel.zoom",null)}else if("select"===u||"lasso"===u)l.on(".zoom",null),t.prepFn=function(a,b,c){k(a,b,c,t,u)},c.init(t);l.on("mousemove",function(){var a=g.projection.invert(e.mouse(this));if(!a||isNaN(a[0])||isNaN(a[1]))return c.unhover(h,e.event);g.xaxis.p2c=function(){return a[0]};g.yaxis.p2c=function(){return a[1]};q.hover(h,e.event,g.id)});l.on("mouseout",function(){h._dragging||c.unhover(h,e.event)});l.on("click",function(){"select"!==
u&&"lasso"!==u&&(-1<p.indexOf("select")&&r(e.event,h,[g.xaxis],[g.yaxis],g.id,t),-1<p.indexOf("event")&&q.click(h,e.event))})}};a.makeFramework=function(){var a=this,b=a.graphDiv,c=b._fullLayout,d="clip"+c._uid+a.id;a.clipDef=c._clips.append("clipPath").attr("id",d);a.clipRect=a.clipDef.append("rect");a.framework=e.select(a.container).append("g").attr("class","geo "+a.id).call(u.setClipUrl,d,b);a.project=function(b){return(b=a.projection(b))?[b[0]-a.xaxis._offset,b[1]-a.yaxis._offset]:[null,null]};
a.xaxis={_id:"x",c2p:function(b){return a.project(b)[0]}};a.yaxis={_id:"y",c2p:function(b){return a.project(b)[1]}};a.mockAxis={type:"linear",showexponent:"all",exponentformat:"B"};f.setConvert(a.mockAxis,c)};a.saveViewInitial=function(a){var b=a.center||{},c=a.projection,d=c.rotation||{};this.viewInitial=a._isScoped?{"center.lon":b.lon,"center.lat":b.lat,"projection.scale":c.scale}:a._isClipped?{"projection.scale":c.scale,"projection.rotation.lon":d.lon,"projection.rotation.lat":d.lat}:{"center.lon":b.lon,
"center.lat":b.lat,"projection.scale":c.scale,"projection.rotation.lon":d.lon}};a.render=function(){function a(a){return(a=c(a.lonlat))?"translate("+a[0]+","+a[1]+")":null}function b(a){return c.isLonLatOverEdges(a.lonlat)?"none":null}var c=this.projection,d=c.getPath(),e;for(e in this.basePaths)this.basePaths[e].attr("d",d);for(e in this.dataPaths)this.dataPaths[e].attr("d",function(a){return d(a.geojson)});for(e in this.dataPoints)this.dataPoints[e].attr("display",b).attr("transform",a)}},{"../../components/color":577,
"../../components/dragelement":595,"../../components/drawing":598,"../../components/fx":616,"../../lib":700,"../../lib/topojson_utils":727,"../../registry":829,"../cartesian/axes":748,"../cartesian/select":765,"../plots":810,"./constants":776,"./projections":782,"./zoom":783,d3:154,"topojson-client":524}],778:[function(a,t,m){var p=a("./geo"),g=a("../../plots/get_data").getSubplotCalcData;t=a("../../lib").counterRegex;m.name="geo";m.attr="geo";m.idRoot="geo";m.idRegex=m.attrRegex=t("geo");m.attributes=
a("./layout/attributes");m.layoutAttributes=a("./layout/layout_attributes");m.supplyLayoutDefaults=a("./layout/defaults");m.plot=function(a){var e=a._fullLayout,h=a.calcdata,b=e._subplots.geo;void 0===window.PlotlyGeoAssets&&(window.PlotlyGeoAssets={topojson:{}});for(var l=0;l<b.length;l++){var u=b[l],q=g(h,"geo",u),d=e[u]._subplot;d||(d=p({id:u,graphDiv:a,container:e._geolayer.node(),topojsonURL:a._context.topojsonURL,staticPlot:a._context.staticPlot}),e[u]._subplot=d);d.plot(q,e,a._promises)}};
m.clean=function(a,e,g,b){a=b._subplots.geo||[];for(g=0;g<a.length;g++){var h=a[g],n=b[h]._subplot;!e[h]&&n&&(n.framework.remove(),n.clipDef.remove())}};m.updateFx=function(a){a=a._fullLayout;for(var e=a._subplots.geo,g=0;g<e.length;g++){var b=a[e[g]];b._subplot.updateFx(a,b)}}},{"../../lib":700,"../../plots/get_data":784,"./geo":777,"./layout/attributes":779,"./layout/defaults":780,"./layout/layout_attributes":781}],779:[function(a,t,m){t.exports={geo:{valType:"subplotid",dflt:"geo",editType:"calc"}}},
{}],780:[function(a,t,m){function p(a,e,g){a=g("resolution");var b=g("scope"),d=h.scopeDefaults[b],f=g("projection.type",d.projType),c=e._isAlbersUsa="albers usa"===f;c&&(b=e.scope="usa");var k=e._isScoped="world"!==b,l=e._isConic=-1!==f.indexOf("conic");e._isClipped=!!h.lonaxisSpan[f];for(var u=0;u<n.length;u++){var p=n[u];var m=[30,10][u];if(k)var t=d[p+"Range"];else{t=h[p+"Span"];t=(t[f]||t["*"])/2;var w=g("projection.rotation."+p.substr(0,3),d.projRotate[u]);t=[w-t,w+t]}t=g(p+".range",t);g(p+
".tick0",t[0]);g(p+".dtick",m);if(m=g(p+".showgrid"))g(p+".gridcolor"),g(p+".gridwidth")}f=e.lonaxis.range;e=e.lataxis.range;u=f[0];f=f[1];0<u&&0>f&&(f+=360);f=(u+f)/2;if(!c){u=k?d.projRotate:[f,0,0];var x=g("projection.rotation.lon",u[0]);g("projection.rotation.lat",u[1]);g("projection.rotation.roll",u[2]);if(m=g("showcoastlines",!k))g("coastlinecolor"),g("coastlinewidth");(m=g("showocean"))&&g("oceancolor")}c?(x=-96.6,c=38.7):(x=k?f:x,c=(e[0]+e[1])/2);g("center.lon",x);g("center.lat",c);l&&g("projection.parallels",
d.projParallels||[0,60]);g("projection.scale");(m=g("showland"))&&g("landcolor");(m=g("showlakes"))&&g("lakecolor");if(m=g("showrivers"))g("rivercolor"),g("riverwidth");if(m=g("showcountries",k&&"usa"!==b))g("countrycolor"),g("countrywidth");if("usa"===b||"north america"===b&&50===a)g("showsubunits",!0),g("subunitcolor"),g("subunitwidth");!k&&(m=g("showframe",!0))&&(g("framecolor"),g("framewidth"));g("bgcolor")}var g=a("../../subplot_defaults"),h=a("../constants"),e=a("./layout_attributes"),n=h.axesNames;
t.exports=function(a,h,n){g(a,h,n,{type:"geo",attributes:e,handleDefaults:p,partition:"y"})}},{"../../subplot_defaults":824,"../constants":776,"./layout_attributes":781}],781:[function(a,t,m){m=a("../../../components/color/attributes");var p=a("../../domain").attributes,g=a("../constants");a=a("../../../plot_api/edit_types").overrideAll;var h={range:{valType:"info_array",items:[{valType:"number"},{valType:"number"}]},showgrid:{valType:"boolean",dflt:!1},tick0:{valType:"number"},dtick:{valType:"number"},
gridcolor:{valType:"color",dflt:m.lightLine},gridwidth:{valType:"number",min:0,dflt:1}};(t.exports=a({domain:p({name:"geo"},{}),resolution:{valType:"enumerated",values:[110,50],dflt:110,coerceNumber:!0},scope:{valType:"enumerated",values:Object.keys(g.scopeDefaults),dflt:"world"},projection:{type:{valType:"enumerated",values:Object.keys(g.projNames)},rotation:{lon:{valType:"number"},lat:{valType:"number"},roll:{valType:"number"}},parallels:{valType:"info_array",items:[{valType:"number"},{valType:"number"}]},
scale:{valType:"number",min:0,dflt:1}},center:{lon:{valType:"number"},lat:{valType:"number"}},showcoastlines:{valType:"boolean"},coastlinecolor:{valType:"color",dflt:m.defaultLine},coastlinewidth:{valType:"number",min:0,dflt:1},showland:{valType:"boolean",dflt:!1},landcolor:{valType:"color",dflt:g.landColor},showocean:{valType:"boolean",dflt:!1},oceancolor:{valType:"color",dflt:g.waterColor},showlakes:{valType:"boolean",dflt:!1},lakecolor:{valType:"color",dflt:g.waterColor},showrivers:{valType:"boolean",
dflt:!1},rivercolor:{valType:"color",dflt:g.waterColor},riverwidth:{valType:"number",min:0,dflt:1},showcountries:{valType:"boolean"},countrycolor:{valType:"color",dflt:m.defaultLine},countrywidth:{valType:"number",min:0,dflt:1},showsubunits:{valType:"boolean"},subunitcolor:{valType:"color",dflt:m.defaultLine},subunitwidth:{valType:"number",min:0,dflt:1},showframe:{valType:"boolean"},framecolor:{valType:"color",dflt:m.defaultLine},framewidth:{valType:"number",min:0,dflt:1},bgcolor:{valType:"color",
dflt:m.background},lonaxis:h,lataxis:h},"plot","from-root")).uirevision={valType:"any",editType:"none"}},{"../../../components/color/attributes":576,"../../../plot_api/edit_types":731,"../../domain":773,"../constants":776}],782:[function(a,t,m){t.exports=function(a){function g(a,b){return{type:"Feature",id:a.id,properties:a.properties,geometry:h(a.geometry,b)}}function h(b,c){if(!b)return null;if("GeometryCollection"===b.type)return{type:"GeometryCollection",geometries:object.geometries.map(function(a){return h(a,
c)})};if(!D.hasOwnProperty(b.type))return null;var d=D[b.type];a.geo.stream(b,c(d));return d.result()}function e(){}function n(a){return 1<a?H:-1>a?-H:Math.asin(a)}function b(a){return 1<a?0:-1>a?G:Math.acos(a)}function l(a,b){var c=(2+H)*Math.sin(b);b/=2;for(var d=0,e=Infinity;10>d&&1E-6<Math.abs(e);d++)e=Math.cos(b),b-=e=(b+Math.sin(b)*(e+2)-c)/(2*e*(1+e));return[2/Math.sqrt(G*(4+G))*a*(1+Math.cos(b)),2*Math.sqrt(G/(4+G))*Math.sin(b)]}function u(a,b){function c(c,d){c=L(c/b,d);c[0]*=a;return c}
2>arguments.length&&(b=a);if(1===b)return L;if(Infinity===b)return q;c.invert=function(c,d){c=L.invert(c/a,d);c[0]*=b;return c};return c}function q(a,b){return[a*Math.cos(b)/Math.cos(b/=2),2*Math.sin(b)]}function d(a,b){return[3*a/(2*G)*Math.sqrt(G*G/3-b*b),b]}function f(a,b){return[a,1.25*Math.log(Math.tan(G/4+.4*b))]}function c(a){return function(b){var c=a*Math.sin(b),d=30,e;do b-=e=(b+Math.sin(b)-c)/(1+Math.cos(b));while(1E-6<Math.abs(e)&&0<--d);return b/2}}function k(a,b){var c=b*b,d=c*c;return[a*
(.8707-.131979*c+d*(-.013791+d*(.003971*c-.001529*d))),b*(1.007226+c*(.015085+d*(-.044475+.028874*c-.005916*d)))]}function r(a,b){var c=Math.min(18,36*Math.abs(b)/G),d=Math.floor(c);c-=d;var e=(h=N[d])[0],f=h[1],g=(h=N[++d])[0],k=h[1];d=(h=N[Math.min(19,++d)])[0];h=h[1];var h;return[a*(g+c*(d-e)/2+c*c*(d-2*g+e)/2),(0<b?H:-H)*(k+c*(h-f)/2+c*c*(h-2*k+f)/2)]}function p(a,b){return[a*Math.cos(b),b]}function m(a,c){var d=Math.cos(c);var e=(e=b(d*Math.cos(a/=2)))?e/Math.sin(e):1;return[2*d*Math.sin(a)*
e,Math.sin(c)*e]}function t(a,b){var c=m(a,b);return[(c[0]+a/H)/2,(c[1]+b)/2]}a.geo.project=function(a,b){b=b.stream;if(!b)throw Error("not yet supported");return(a&&y.hasOwnProperty(a.type)?y[a.type]:h)(a,b)};var y={Feature:g,FeatureCollection:function(a,b){return{type:"FeatureCollection",features:a.features.map(function(a){return g(a,b)})}}},w=[],x=[],F={point:function(a,b){w.push([a,b])},result:function(){var a=w.length?2>w.length?{type:"Point",coordinates:w[0]}:{type:"MultiPoint",coordinates:w}:
null;w=[];return a}},B={lineStart:e,point:function(a,b){w.push([a,b])},lineEnd:function(){w.length&&(x.push(w),w=[])},result:function(){var a=x.length?2>x.length?{type:"LineString",coordinates:x[0]}:{type:"MultiLineString",coordinates:x}:null;x=[];return a}},C={polygonStart:e,lineStart:e,point:function(a,b){w.push([a,b])},lineEnd:function(){var a=w.length;if(a){do w.push(w[0].slice());while(4>++a);x.push(w);w=[]}},polygonEnd:e,result:function(){if(!x.length)return null;var a=[],b=[];x.forEach(function(c){if(4>
(e=c.length))var d=!1;else{d=0;for(var e,f=c[e-1][1]*c[0][0]-c[e-1][0]*c[0][1];++d<e;)f+=c[d-1][1]*c[d][0]-c[d-1][0]*c[d][1];d=0>=f}d?a.push([c]):b.push(c)});b.forEach(function(b){var c=b[0];a.some(function(a){for(var d=a[0],e=c[0],f=c[1],g=!1,k=0,h=d.length,l=h-1;k<h;l=k++){var n=d[k],r=n[0];n=n[1];var q=d[l];l=q[0];q=q[1];n>f^q>f&&e<(l-r)*(f-n)/(q-n)+r&&(g=!g)}if(g)return a.push(b),!0})||a.push([b])});x=[];return a.length?1<a.length?{type:"MultiPolygon",coordinates:a}:{type:"Polygon",coordinates:a[0]}:
null}},D={Point:F,MultiPoint:F,LineString:B,MultiLineString:B,Polygon:C,MultiPolygon:C,Sphere:C},G=Math.PI,H=G/2,E=G/180,K=180/G,I=a.geo.projection,J=a.geo.projectionMutator;a.geo.interrupt=function(b){function c(a,c){for(var d=0>c?-1:1,e=g[+(0>c)],f=0,k=e.length-1;f<k&&a>e[f][2][0];++f);a=b(a-e[f][1][0],c);a[0]+=b(e[f][1][0],d*c>d*e[f][0][1]?e[f][0][1]:c)[0];return a}function d(){k=g.map(function(a){return a.map(function(a){var c=b(a[0][0],a[0][1])[0],d=b(a[2][0],a[2][1])[0],e=b(a[1][0],a[0][1])[1];
a=b(a[1][0],a[1][1])[1];if(e>a){var f=e;e=a;a=f}return[[c,e],[d,a]]})})}function e(){for(var b=[],c=0,d=g[0].length;c<d;++c){var e=g[0][c],k=180*e[0][0]/G,h=180*e[0][1]/G,l=180*e[1][1]/G,n=180*e[2][0]/G;e=180*e[2][1]/G;b.push(f([[k+1E-6,h+1E-6],[k+1E-6,l-1E-6],[n-1E-6,l-1E-6],[n-1E-6,e+1E-6]],30))}for(c=g[1].length-1;0<=c;--c)e=g[1][c],k=180*e[0][0]/G,h=180*e[0][1]/G,l=180*e[1][1]/G,n=180*e[2][0]/G,e=180*e[2][1]/G,b.push(f([[n-1E-6,e-1E-6],[n-1E-6,l+1E-6],[k+1E-6,l+1E-6],[k+1E-6,h-1E-6]],30));return{type:"Polygon",
coordinates:[a.merge(b)]}}function f(a,b){for(var c=-1,d=a.length,e=a[0],f,g,k,h=[];++c<d;){f=a[c];g=(f[0]-e[0])/b;k=(f[1]-e[1])/b;for(var l=0;l<b;++l)h.push([e[0]+l*g,e[1]+l*k]);e=f}h.push(f);return h}var g=[[[[-G,0],[0,H],[G,0]]],[[[-G,0],[0,-H],[G,0]]]],k;b.invert&&(c.invert=function(a,d){for(var e=k[+(0>d)],f=g[+(0>d)],h=0,l=e.length;h<l;++h){var n=e[h];if(n[0][0]<=a&&a<n[1][0]&&n[0][1]<=d&&d<n[1][1])return e=b.invert(a-b(f[h][1][0],0)[0],d),e[0]+=f[h][1][0],f=c(e[0],e[1]),a=[a,d],1E-6>Math.abs(f[0]-
a[0])&&1E-6>Math.abs(f[1]-a[1])?e:null}});var h=a.geo.projection(c),l=h.stream;h.stream=function(b){var c=h.rotate(),d=l(b),f=(h.rotate([0,0]),l(b));h.rotate(c);d.sphere=function(){a.geo.stream(e(),f)};return d};h.lobes=function(a){if(!arguments.length)return g.map(function(a){return a.map(function(a){return[[180*a[0][0]/G,180*a[0][1]/G],[180*a[1][0]/G,180*a[1][1]/G],[180*a[2][0]/G,180*a[2][1]/G]]})});g=a.map(function(a){return a.map(function(a){return[[a[0][0]*G/180,a[0][1]*G/180],[a[1][0]*G/180,
a[1][1]*G/180],[a[2][0]*G/180,a[2][1]*G/180]]})});d();return h};return h};l.invert=function(a,b){b=.5*b*Math.sqrt((4+G)/G);var c=n(b),d=Math.cos(c);return[a/(2/Math.sqrt(G*(4+G))*(1+d)),n((c+b*(d+2))/(2+H))]};(a.geo.eckert4=function(){return I(l)}).raw=l;var L=a.geo.azimuthalEqualArea.raw;q.invert=function(a,b){b=2*n(b/2);return[a*Math.cos(b/2)/Math.cos(b),b]};(a.geo.hammer=function(){var a=2,b=J(u),c=b(a);c.coefficient=function(c){return arguments.length?b(a=+c):a};return c}).raw=u;d.invert=function(a,
b){return[2/3*G*a/Math.sqrt(G*G/3-b*b),b]};(a.geo.kavrayskiy7=function(){return I(d)}).raw=d;f.invert=function(a,b){return[a,2.5*Math.atan(Math.exp(.8*b))-.625*G]};(a.geo.miller=function(){return I(f)}).raw=f;c(G);var M=function(a,b,d){function e(c,d){return[a*c*Math.cos(d=f(d)),b*Math.sin(d)]}var f=c(d);e.invert=function(c,e){e=n(e/b);return[c/(a*Math.cos(e)),n((2*e+Math.sin(2*e))/d)]};return e}(Math.SQRT2/H,Math.SQRT2,G);(a.geo.mollweide=function(){return I(M)}).raw=M;k.invert=function(a,b){var c=
b,d=25;do{var e=c*c;var f=e*e;c-=f=(c*(1.007226+e*(.015085+f*(-.044475+.028874*e-.005916*f)))-b)/(1.007226+e*(.045255+f*(-.311325+.259866*e-.005916*11*f)))}while(1E-6<Math.abs(f)&&0<--d);return[a/(.8707+(e=c*c)*(-.131979+e*(-.013791+e*e*e*(.003971-.001529*e)))),c]};(a.geo.naturalEarth=function(){return I(k)}).raw=k;var N=[[.9986,-.062],[1,0],[.9986,.062],[.9954,.124],[.99,.186],[.9822,.248],[.973,.31],[.96,.372],[.9427,.434],[.9216,.4958],[.8962,.5571],[.8679,.6176],[.835,.6769],[.7986,.7346],[.7597,
.7903],[.7186,.8435],[.6732,.8936],[.6213,.9394],[.5722,.9761],[.5322,1]];N.forEach(function(a){a[1]*=1.0144});r.invert=function(a,b){var c=b/H,d=90*c,e=Math.min(18,Math.abs(d/5)),f=Math.max(0,Math.floor(e));do{var g=N[f][1],k=N[f+1][1],h=N[Math.min(19,f+2)][1],l=h-g,n=2*(Math.abs(c)-k)/l;g=(h-2*k+g)/l;n*=1-g*n*(1-2*g*n);if(0<=n||1===f){d=(0<=b?5:-5)*(n+e);c=50;do e=Math.min(18,Math.abs(d)/5),f=Math.floor(e),n=e-f,g=N[f][1],k=N[f+1][1],h=N[Math.min(19,f+2)][1],d-=(e=(0<=b?H:-H)*(k+n*(h-g)/2+n*n*(h-
2*k+g)/2)-b)*K;while(1E-12<Math.abs(e)&&0<--c);break}}while(0<=--f);b=N[f][0];e=N[f+1][0];f=N[Math.min(19,f+2)][0];return[a/(e+n*(f-b)/2+n*n*(f-2*e+b)/2),d*E]};(a.geo.robinson=function(){return I(r)}).raw=r;p.invert=function(a,b){return[a/Math.cos(b),b]};(a.geo.sinusoidal=function(){return I(p)}).raw=p;m.invert=function(a,c){if(!(a*a+4*c*c>G*G+1E-6)){var d=a,e=c,f=25;do{var g=Math.sin(d),k=Math.sin(d/2),h=Math.cos(d/2),l=Math.sin(e),n=Math.cos(e),r=Math.sin(2*e),q=l*l,u=n*n,p=k*k,m=1-u*h*h,t=m?b(n*
h)*Math.sqrt(v=1/m):v=0,v;m=2*t*n*k-a;var w=t*l-c,z=v*(u*p+t*n*h*q),x=v*(.5*g*r-2*t*l*k);g=.25*v*(r*k-t*l*u*g);n=v*(q*h+t*p*n);h=x*g-n*z;if(!h)break;x=(w*x-m*n)/h;m=(m*g-w*z)/h;d-=x;e-=m}while((1E-6<Math.abs(x)||1E-6<Math.abs(m))&&0<--f);return[d,e]}};(a.geo.aitoff=function(){return I(m)}).raw=m;t.invert=function(a,c){var d=a,e=c,f=25;do{var g=Math.cos(e),k=Math.sin(e),h=Math.sin(2*e),l=k*k,n=g*g,r=Math.sin(d),q=Math.cos(d/2),u=Math.sin(d/2),p=u*u,m=1-n*q*q,t=m?b(g*q)*Math.sqrt(v=1/m):v=0,v;m=.5*
(2*t*g*u+d/H)-a;var w=.5*(t*k+e)-c,z=.5*v*(n*p+t*g*q*l)+.5/H,x=v*(r*h/4-t*k*u);k=.125*v*(h*u-t*k*n*r);l=.5*v*(l*q+t*p*g)+.5;g=x*k-l*z;x=(w*x-m*l)/g;m=(m*k-w*z)/g;d-=x;e-=m}while((1E-6<Math.abs(x)||1E-6<Math.abs(m))&&0<--f);return[d,e]};(a.geo.winkel3=function(){return I(t)}).raw=t}},{}],783:[function(a,t,m){function p(a,b){return c.behavior.zoom().translate(b.translate()).scale(b.scale())}function g(a,b,c){function d(a,b){q[e+"."+a]=k.nestedProperty(h,a).get();r.call("_storeDirectGUIEdit",g,l._preGUI,
q);var c=k.nestedProperty(n,a);c.get()!==b&&(c.set(b),k.nestedProperty(h,a).set(b),u[e+"."+a]=b)}var e=a.id,f=a.graphDiv,g=f.layout,h=g[e],l=f._fullLayout,n=l[e],q={},u={};c(d);d("projection.scale",b.scale()/a.fitScale);f.emit("plotly_relayout",u)}function h(a,b){function d(c){var d=b.invert(a.midPt);c("center.lon",d[0]);c("center.lat",d[1])}var e=p(a,b);e.on("zoomstart",function(){c.select(this).style(A)}).on("zoom",function(){b.scale(c.event.scale).translate(c.event.translate);a.render()}).on("zoomend",
function(){c.select(this).style(y);g(a,b,d)});return e}function e(a,b){function d(c){var d=b.rotate(),e=b.invert(a.midPt);c("projection.rotation.lon",-d[0]);c("center.lon",e[0]);c("center.lat",e[1])}var e=p(a,b),f,k,h,l,n,r,q,u,m;e.on("zoomstart",function(){c.select(this).style(A);f=c.mouse(this);k=b.rotate();h=b.translate();l=k;n=b.invert(f)}).on("zoom",function(){r=c.mouse(this);var d=f;var g=b.invert(d);g?(g=b(g),d=2<Math.abs(g[0]-d[0])||2<Math.abs(g[1]-d[1])):d=!0;d?(e.scale(b.scale()),e.translate(b.translate())):
(b.scale(c.event.scale),b.translate([h[0],c.event.translate[1]]),n?b.invert(r)&&(u=b.invert(r),q=[l[0]+(u[0]-n[0]),k[1],k[2]],b.rotate(q),l=q):(f=r,n=b.invert(f)),m=!0,a.render())}).on("zoomend",function(){c.select(this).style(y);m&&g(a,b,d)});return e}function n(a,e){function k(a){m++||a({type:"zoomstart"})}function h(a){var b=e.rotate();a("projection.rotation.lon",-b[0]);a("projection.rotation.lat",-b[1])}e.rotate();e.scale();var n=p(a,e),r=f(n,"zoomstart","zoom","zoomend"),m=0,t=n.on,v;n.on("zoomstart",
function(){c.select(this).style(A);var a=c.mouse(this),f=e.rotate(),g=f,h=e.translate(),p=l(f);v=b(e,a);t.call(n,"zoom",function(){var k=c.mouse(this);e.scale(c.event.scale);if(!v)a=k,v=b(e,a);else if(b(e,k)){e.rotate(f).translate(h);var l=b(e,k);var n=v;if(n&&l){k=[n[1]*l[2]-n[2]*l[1],n[2]*l[0]-n[0]*l[2],n[0]*l[1]-n[1]*l[0]];var m=Math.sqrt(d(k,k));l=.5*Math.acos(Math.max(-1,Math.min(1,d(n,l))));n=Math.sin(l)/m;var t=m&&[Math.cos(l),k[2]*n,-k[1]*n,k[0]*n]}else t=void 0;k=p[0];m=p[1];l=p[2];n=p[3];
var w=t[0],x=t[1],A=t[2];t=t[3];k=[k*w-m*x-l*A-n*t,k*x+m*w+l*t-n*A,k*A-m*t+l*w+n*x,k*t+m*A-l*x+n*w];l=[Math.atan2(2*(k[0]*k[1]+k[2]*k[3]),1-2*(k[1]*k[1]+k[2]*k[2]))*z,Math.asin(Math.max(-1,Math.min(1,2*(k[0]*k[2]-k[3]*k[1]))))*z,Math.atan2(2*(k[0]*k[3]+k[1]*k[2]),1-2*(k[2]*k[2]+k[3]*k[3]))*z];m=v;k=g;w=q(m,2,l[0]);w=q(w,1,l[1]);w=q(w,0,l[2]-k[2]);n=m[0];t=m[1];m=m[2];l=w[0];x=w[1];w=w[2];A=Math.atan2(t,n)*z;t=Math.sqrt(n*n+t*t);Math.abs(x)>t?(n=(0<x?90:-90)-A,t=0):(n=Math.asin(x/t)*z-A,t=Math.sqrt(t*
t-x*x));x=180-n-2*A;A=(Math.atan2(w,l)-Math.atan2(m,t))*z;m=(Math.atan2(w,l)-Math.atan2(m,-t))*z;l=u(k[0],k[1],n,A);w=u(k[0],k[1],x,m);k=l<=w?[n,A,k[2]]:[x,m,k[2]];isFinite(k[0])&&isFinite(k[1])&&isFinite(k[2])||(k=g);e.rotate(k);g=k}r.of(this,arguments)({type:"zoom"})});k(r.of(this,arguments))}).on("zoomend",function(){c.select(this).style(y);t.call(n,"zoom",null);var b=r.of(this,arguments);--m||b({type:"zoomend"});g(a,e,h)}).on("zoom.redraw",function(){a.render()});return c.rebind(n,r,"on")}function b(a,
b){if(a=(b=a.invert(b))&&isFinite(b[0])&&isFinite(b[1])){a=b[0]*v;b=b[1]*v;var c=Math.cos(b);a=[c*Math.cos(a),c*Math.sin(a),Math.sin(b)]}return a}function l(a){var b=.5*a[0]*v,c=.5*a[1]*v,d=.5*a[2]*v;a=Math.sin(b);b=Math.cos(b);var e=Math.sin(c);c=Math.cos(c);var f=Math.sin(d);d=Math.cos(d);return[b*c*d+a*e*f,a*c*d-b*e*f,b*e*d+a*c*f,b*c*f-a*e*d]}function u(a,b,c,d){a=((c-a)%360+540)%360-180;b=((d-b)%360+540)%360-180;return Math.sqrt(a*a+b*b)}function q(a,b,c){var d=c*v;c=a.slice();var e=0===b?1:0;
b=2===b?1:2;var f=Math.cos(d);d=Math.sin(d);c[e]=a[e]*f-a[b]*d;c[b]=a[b]*f+a[e]*d;return c}function d(a,b){for(var c=0,d=0,e=a.length;d<e;++d)c+=a[d]*b[d];return c}function f(a){for(var b=0,d=arguments.length,e=[];++b<d;)e.push(arguments[b]);var f=c.dispatch.apply(null,e);f.of=function(b,d){return function(e){try{var g=e.sourceEvent=c.event;e.target=a;c.event=e;f[e.type].apply(b,d)}finally{c.event=g}}};return f}var c=a("d3"),k=a("../../lib"),r=a("../../registry"),v=Math.PI/180,z=180/Math.PI,A={cursor:"pointer"},
y={cursor:"auto"};t.exports=function(a,b){return(b._isScoped?h:b._isClipped?n:e)(a,a.projection)}},{"../../lib":700,"../../registry":829,d3:154}],784:[function(a,t,m){var p=a("../registry"),g=a("./cartesian/constants").SUBPLOT_PATTERN;m.getSubplotCalcData=function(a,e,g){e=p.subplotsRegistry[e];if(!e)return[];e=e.attr;for(var b=[],h=0;h<a.length;h++){var n=a[h];n[0].trace[e]===g&&b.push(n)}return b};m.getModuleCalcData=function(a,e){var g=[],b=[];e="string"===typeof e?p.getModule(e).plot:"function"===
typeof e?e:e.plot;if(!e)return[g,a];for(var h=0;h<a.length;h++){var u=a[h],q=u[0].trace;!0===q.visible&&(q._module.plot===e?g.push(u):b.push(u))}return[g,b]};m.getSubplotData=function(a,e,n){if(!p.subplotsRegistry[e])return[];var b=p.subplotsRegistry[e].attr,h=[];if("gl2d"===e){var u=n.match(g);var q="x"+u[1];var d="y"+u[2]}for(var f=0;f<a.length;f++)u=a[f],"gl2d"===e&&p.traceIs(u,"gl2d")?u[b[0]]===q&&u[b[1]]===d&&h.push(u):u[b]===n&&h.push(u);return h}},{"../registry":829,"./cartesian/constants":754}],
785:[function(a,t,m){function p(a,b){this.element=a;this.plot=b;this.wheelListener=this.mouseListener=null;this.lastInputTime=Date.now();this.lastPos=[0,0];this.boxInited=this.boxEnabled=!1;this.boxStart=[0,0];this.boxEnd=[0,0];this.dragStart=[0,0]}var g=a("mouse-change"),h=a("mouse-wheel"),e=a("mouse-event-offset"),n=a("../cartesian/constants"),b=a("has-passive-events");t.exports=function(a){function l(){for(var b=a.graphDiv._fullLayout._axisConstraintGroups,c=a.xaxis._id,d=a.yaxis._id,e=0;e<b.length;e++)if(-1!==
b[e][c]){if(-1!==b[e][d])return!0;break}return!1}function q(b,d,e){function g(b,d,e){var f=Math.min(d,e);d=Math.max(d,e);f!==d?(k[b]=f,k[b+2]=d,c.dataBox=k,a.setRanges(k)):(a.selectBox.selectBox=[0,0,1,1],a.glplot.setDirty())}var k=a.calcDataBox(),h=f.viewBox,r=c.lastPos[0],q=c.lastPos[1],u=n.MINDRAG*f.pixelRatio,m=n.MINZOOM*f.pixelRatio;d*=f.pixelRatio;e*=f.pixelRatio;e=h[3]-h[1]-e;switch(a.fullLayout.dragmode){case "zoom":b?(q=d/(h[2]-h[0])*(k[2]-k[0])+k[0],h=e/(h[3]-h[1])*(k[3]-k[1])+k[1],c.boxInited||
(c.boxStart[0]=q,c.boxStart[1]=h,c.dragStart[0]=d,c.dragStart[1]=e),c.boxEnd[0]=q,c.boxEnd[1]=h,c.boxInited=!0,c.boxEnabled||c.boxStart[0]===c.boxEnd[0]&&c.boxStart[1]===c.boxEnd[1]||(c.boxEnabled=!0),h=Math.abs(c.dragStart[0]-d)<m,m=Math.abs(c.dragStart[1]-e)<m,!l()||h&&m?(h&&(c.boxEnd[0]=c.boxStart[0]),m&&(c.boxEnd[1]=c.boxStart[1])):(m=c.boxEnd[0]-c.boxStart[0],h=c.boxEnd[1]-c.boxStart[1],q=(k[3]-k[1])/(k[2]-k[0]),Math.abs(m*q)>Math.abs(h)?(c.boxEnd[1]=c.boxStart[1]+Math.abs(m)*q*(0<=h?1:-1),c.boxEnd[1]<
k[1]?(c.boxEnd[1]=k[1],c.boxEnd[0]=c.boxStart[0]+(k[1]-c.boxStart[1])/Math.abs(q)):c.boxEnd[1]>k[3]&&(c.boxEnd[1]=k[3],c.boxEnd[0]=c.boxStart[0]+(k[3]-c.boxStart[1])/Math.abs(q))):(c.boxEnd[0]=c.boxStart[0]+Math.abs(h)/q*(0<=m?1:-1),c.boxEnd[0]<k[0]?(c.boxEnd[0]=k[0],c.boxEnd[1]=c.boxStart[1]+(k[0]-c.boxStart[0])*Math.abs(q)):c.boxEnd[0]>k[2]&&(c.boxEnd[0]=k[2],c.boxEnd[1]=c.boxStart[1]+(k[2]-c.boxStart[0])*Math.abs(q))))):c.boxEnabled?(m=c.boxStart[0]!==c.boxEnd[0],h=c.boxStart[1]!==c.boxEnd[1],
m||h?(m&&(g(0,c.boxStart[0],c.boxEnd[0]),a.xaxis.autorange=!1),h&&(g(1,c.boxStart[1],c.boxEnd[1]),a.yaxis.autorange=!1),a.relayoutCallback()):a.glplot.setDirty(),c.boxEnabled=!1,c.boxInited=!1):c.boxInited&&(c.boxInited=!1);break;case "pan":c.boxEnabled=!1,c.boxInited=!1,b?(c.panning||(c.dragStart[0]=d,c.dragStart[1]=e),Math.abs(c.dragStart[0]-d)<u&&(d=c.dragStart[0]),Math.abs(c.dragStart[1]-e)<u&&(e=c.dragStart[1]),m=(r-d)*(k[2]-k[0])/(f.viewBox[2]-f.viewBox[0]),h=(q-e)*(k[3]-k[1])/(f.viewBox[3]-
f.viewBox[1]),k[0]+=m,k[2]+=m,k[1]+=h,k[3]+=h,a.setRanges(k),c.panning=!0,c.lastInputTime=Date.now(),a.xaxis.autorange=!1,a.yaxis.autorange=!1,a.cameraChanged(),a.handleAnnotations()):c.panning&&(c.panning=!1,a.relayoutCallback())}c.lastPos[0]=d;c.lastPos[1]=e}var d=a.mouseContainer,f=a.glplot,c=new p(d,f);c.mouseListener=g(d,q);d.addEventListener("touchstart",function(a){var b=e(a.changedTouches[0],d);q(0,b[0],b[1]);q(1,b[0],b[1]);a.preventDefault()},b?{passive:!1}:!1);d.addEventListener("touchmove",
function(a){a.preventDefault();var b=e(a.changedTouches[0],d);q(1,b[0],b[1]);a.preventDefault()},b?{passive:!1}:!1);d.addEventListener("touchend",function(a){q(0,c.lastPos[0],c.lastPos[1]);a.preventDefault()},b?{passive:!1}:!1);c.wheelListener=h(d,function(b,d){if(!a.scrollZoom)return!1;b=a.calcDataBox();var e=f.viewBox;d=Math.exp(5*d/(e[3]-e[1]));var g=c.lastPos[0]/(e[2]-e[0])*(b[2]-b[0])+b[0];e=c.lastPos[1]/(e[3]-e[1])*(b[3]-b[1])+b[1];b[0]=(b[0]-g)*d+g;b[2]=(b[2]-g)*d+g;b[1]=(b[1]-e)*d+e;b[3]=
(b[3]-e)*d+e;a.setRanges(b);c.lastInputTime=Date.now();a.xaxis.autorange=!1;a.yaxis.autorange=!1;a.cameraChanged();a.handleAnnotations();a.relayoutCallback();return!0},!0);return c}},{"../cartesian/constants":754,"has-passive-events":403,"mouse-change":427,"mouse-event-offset":428,"mouse-wheel":430}],786:[function(a,t,m){function p(a){this.scene=a;this.gl=a.gl;this.pixelRatio=a.pixelRatio;this.screenBox=[0,0,1,1];this.viewBox=[0,0,1,1];this.dataBox=[-1,-1,1,1];this.borderLineEnable=[!1,!1,!1,!1];
this.borderLineWidth=[1,1,1,1];this.borderLineColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1],[0,0,0,1]];this.ticks=[[],[]];this.tickEnable=[!0,!0,!1,!1];this.tickPad=[15,15,15,15];this.tickAngle=[0,0,0,0];this.tickColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1],[0,0,0,1]];this.tickMarkLength=[0,0,0,0];this.tickMarkWidth=[0,0,0,0];this.tickMarkColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1],[0,0,0,1]];this.labels=["x","y"];this.labelEnable=[!0,!0,!1,!1];this.labelAngle=[0,Math.PI/2,0,3*Math.PI/2];this.labelPad=[15,15,15,15];this.labelSize=
[12,12];this.labelFont=["sans-serif","sans-serif"];this.labelColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1],[0,0,0,1]];this.title="";this.titleEnable=!0;this.titleCenter=[0,0,0,0];this.titleAngle=0;this.titleColor=[0,0,0,1];this.titleFont="sans-serif";this.titleSize=18;this.gridLineEnable=[!0,!0];this.gridLineColor=[[0,0,0,.5],[0,0,0,.5]];this.gridLineWidth=[1,1];this.zeroLineEnable=[!0,!0];this.zeroLineWidth=[1,1];this.zeroLineColor=[[0,0,0,1],[0,0,0,1]];this.borderColor=[0,0,0,0];this.backgroundColor=[0,
0,0,0];this.static=this.scene.staticPlot}var g=a("../cartesian/axes"),h=a("../../lib/str2rgbarray");a=p.prototype;var e=["xaxis","yaxis"];a.merge=function(a){this.titleEnable=!1;this.backgroundColor=h(a.plot_bgcolor);var b,g;for(g=0;2>g;++g){var n=e[g];var q=n.charAt(0);var d=a[this.scene[n]._name];q=d.title.text===this.scene.fullLayout._dfltTitle[q]?"":d.title.text;for(b=0;2>=b;b+=2)this.labelEnable[g+b]=!1,this.labels[g+b]=q,this.labelColor[g+b]=h(d.title.font.color),this.labelFont[g+b]=d.title.font.family,
this.labelSize[g+b]=d.title.font.size,this.labelPad[g+b]=this.getLabelPad(n,d),this.tickEnable[g+b]=!1,this.tickColor[g+b]=h((d.tickfont||{}).color),this.tickAngle[g+b]="auto"===d.tickangle?0:Math.PI*-d.tickangle/180,this.tickPad[g+b]=this.getTickPad(d),this.tickMarkLength[g+b]=0,this.tickMarkWidth[g+b]=d.tickwidth||0,this.tickMarkColor[g+b]=h(d.tickcolor),this.borderLineEnable[g+b]=!1,this.borderLineColor[g+b]=h(d.linecolor),this.borderLineWidth[g+b]=d.linewidth||0;b=this.hasSharedAxis(d);q=this.hasAxisInDfltPos(n,
d)&&!b;n=this.hasAxisInAltrPos(n,d)&&!b;var f=d.mirror||!1;var c=b?-1!==String(f).indexOf("all"):!!f;b=b?"allticks"===f:-1!==String(f).indexOf("ticks");q?this.labelEnable[g]=!0:n&&(this.labelEnable[g+2]=!0);q?this.tickEnable[g]=d.showticklabels:n&&(this.tickEnable[g+2]=d.showticklabels);if(q||c)this.borderLineEnable[g]=d.showline;if(n||c)this.borderLineEnable[g+2]=d.showline;if(q||b)this.tickMarkLength[g]=this.getTickMarkLength(d);if(n||b)this.tickMarkLength[g+2]=this.getTickMarkLength(d);this.gridLineEnable[g]=
d.showgrid;this.gridLineColor[g]=h(d.gridcolor);this.gridLineWidth[g]=d.gridwidth;this.zeroLineEnable[g]=d.zeroline;this.zeroLineColor[g]=h(d.zerolinecolor);this.zeroLineWidth[g]=d.zerolinewidth}};a.hasSharedAxis=function(a){var b=this.scene;return 0!==g.findSubplotsWithAxis(b.fullLayout._subplots.gl2d,a).indexOf(b.id)};a.hasAxisInDfltPos=function(a,b){b=b.side;if("xaxis"===a)return"bottom"===b;if("yaxis"===a)return"left"===b};a.hasAxisInAltrPos=function(a,b){b=b.side;if("xaxis"===a)return"top"===
b;if("yaxis"===a)return"right"===b};a.getLabelPad=function(a,b){var e=b.title.font.size,g=b.showticklabels;if("xaxis"===a)return"top"===b.side?-10+e*(1.5+(g?1:0)):-10+e*(1.5+(g?.5:0));if("yaxis"===a)return"right"===b.side?10+e*(1.5+(g?1:.5)):10+e*(1.5+(g?.5:0))};a.getTickPad=function(a){return"outside"===a.ticks?10+a.ticklen:15};a.getTickMarkLength=function(a){if(!a.ticks)return 0;var b=a.ticklen;return"inside"===a.ticks?-b:b};t.exports=function(a){return new p(a)}},{"../../lib/str2rgbarray":723,
"../cartesian/axes":748}],787:[function(a,t,m){t=a("../../plot_api/edit_types").overrideAll;var p=a("./scene2d"),g=a("../layout_attributes"),h=a("../../constants/xmlns_namespaces"),e=a("../cartesian/constants"),n=a("../cartesian"),b=a("../../components/fx/layout_attributes"),l=a("../get_data").getSubplotData;m.name="gl2d";m.attr=["xaxis","yaxis"];m.idRoot=["x","y"];m.idRegex=e.idRegex;m.attrRegex=e.attrRegex;m.attributes=a("../cartesian/attributes");m.supplyLayoutDefaults=function(a,b,d){b._has("cartesian")||
n.supplyLayoutDefaults(a,b,d)};m.layoutAttrOverrides=t(n.layoutAttributes,"plot","from-root");m.baseLayoutAttrOverrides=t({plot_bgcolor:g.plot_bgcolor,hoverlabel:b.hoverlabel},"plot","nested");m.plot=function(a){for(var b=a._fullLayout,d=a._fullData,e=b._subplots.gl2d,c=0;c<e.length;c++){var g=e[c],h=b._plots[g],n=l(d,"gl2d",g),m=h._scene2d;void 0===m&&(m=new p({id:g,graphDiv:a,container:a.querySelector(".gl-container"),staticPlot:a._context.staticPlot,plotGlPixelRatio:a._context.plotGlPixelRatio},
b),h._scene2d=m);m.plot(n,a.calcdata,b,a.layout)}};m.clean=function(a,b,d,e){for(var c=e._subplots.gl2d||[],f=0;f<c.length;f++){var g=c[f],h=e._plots[g];h._scene2d&&0===l(a,"gl2d",g).length&&(h._scene2d.destroy(),delete e._plots[g])}n.clean.apply(this,arguments)};m.drawFramework=function(a){a._context.staticPlot||n.drawFramework(a)};m.toSVG=function(a){a=a._fullLayout;for(var b=a._subplots.gl2d,d=0;d<b.length;d++){var e=a._plots[b[d]]._scene2d,c=e.toImage("png");a._glimages.append("svg:image").attr({xmlns:h.svg,
"xlink:href":c,x:0,y:0,width:"100%",height:"100%",preserveAspectRatio:"none"});e.destroy()}};m.updateFx=function(a){a=a._fullLayout;for(var b=a._subplots.gl2d,d=0;d<b.length;d++)a._plots[b[d]]._scene2d.updateFx(a.dragmode)}},{"../../components/fx/layout_attributes":617,"../../constants/xmlns_namespaces":678,"../../plot_api/edit_types":731,"../cartesian":759,"../cartesian/attributes":746,"../cartesian/constants":754,"../get_data":784,"../layout_attributes":801,"./scene2d":788}],788:[function(a,t,m){function p(a,
c){this.container=a.container;this.graphDiv=a.graphDiv;this.pixelRatio=a.plotGlPixelRatio||window.devicePixelRatio;this.id=a.id;this.staticPlot=!!a.staticPlot;this.scrollZoom=this.graphDiv._context._scrollZoom.cartesian;this.fullData=null;this.updateRefs(c);this.makeFramework();this.stopped||(this.glplotOptions=q(this),this.glplotOptions.merge(c),this.glplot=n(this.glplotOptions),this.camera=d(this),this.traces={},this.spikes=b(this.glplot),this.selectBox=l(this.glplot,{innerFill:!1,outerFill:!0}),
this.lastButtonState=0,this.pickResult=null,this.isMouseOver=!0,this.stopped=!1,this.redraw=this.draw.bind(this),this.redraw())}var g=a("../../registry"),h=a("../../plots/cartesian/axes"),e=a("../../components/fx"),n=a("gl-plot2d"),b=a("gl-spikes2d"),l=a("gl-select-box"),u=a("webgl-context"),q=a("./convert"),d=a("./camera"),f=a("../../lib/show_no_webgl_msg");m=a("../cartesian/constraints");var c=m.enforce,k=m.clean,r=a("../cartesian/autorange").doAutoRange,v=["xaxis","yaxis"],z,A,y=a("../cartesian/constants").SUBPLOT_PATTERN;
t.exports=p;a=p.prototype;a.makeFramework=function(){if(this.staticPlot){if(!A&&(z=document.createElement("canvas"),A=u({canvas:z,preserveDrawingBuffer:!1,premultipliedAlpha:!0,antialias:!0}),!A))throw Error("Error creating static canvas/context for image server");this.canvas=z;this.gl=A}else{var a=this.container.querySelector(".gl-canvas-focus"),b=u({canvas:a,preserveDrawingBuffer:!0,premultipliedAlpha:!0});if(!b){f(this);this.stopped=!0;return}this.canvas=a;this.gl=b}a=this.canvas;a.style.width=
"100%";a.style.height="100%";a.style.position="absolute";a.style.top="0px";a.style.left="0px";a.style["pointer-events"]="none";this.updateSize(a);a.className+=" user-select-none";a=this.svgContainer=document.createElementNS("http://www.w3.org/2000/svg","svg");a.style.position="absolute";a.style.top=a.style.left="0px";a.style.width=a.style.height="100%";a.style["z-index"]=20;a.style["pointer-events"]="none";b=this.mouseContainer=document.createElement("div");b.style.position="absolute";b.style["pointer-events"]=
"auto";this.pickCanvas=this.container.querySelector(".gl-canvas-pick");var c=this.container;c.appendChild(a);c.appendChild(b);var d=this;b.addEventListener("mouseout",function(){d.isMouseOver=!1;d.unhover()});b.addEventListener("mouseover",function(){d.isMouseOver=!0})};a.toImage=function(a){a||(a="png");this.stopped=!0;this.staticPlot&&this.container.appendChild(z);this.updateSize(this.canvas);var b=this.glplot.gl,c=b.drawingBufferWidth,d=b.drawingBufferHeight;b.clearColor(1,1,1,0);b.clear(b.COLOR_BUFFER_BIT|
b.DEPTH_BUFFER_BIT);this.glplot.setDirty();this.glplot.draw();b.bindFramebuffer(b.FRAMEBUFFER,null);var e=new Uint8Array(c*d*4);b.readPixels(0,0,c,d,b.RGBA,b.UNSIGNED_BYTE,e);b=0;for(var f=d-1;b<f;++b,--f)for(var g=0;g<c;++g)for(var k=0;4>k;++k){var h=e[4*(c*b+g)+k];e[4*(c*b+g)+k]=e[4*(c*f+g)+k];e[4*(c*f+g)+k]=h}b=document.createElement("canvas");b.width=c;b.height=d;f=b.getContext("2d");c=f.createImageData(c,d);c.data.set(e);f.putImageData(c,0,0);switch(a){case "jpeg":a=b.toDataURL("image/jpeg");
break;case "webp":a=b.toDataURL("image/webp");break;default:a=b.toDataURL("image/png")}this.staticPlot&&this.container.removeChild(z);return a};a.updateSize=function(a){a||(a=this.canvas);var b=this.pixelRatio,c=this.fullLayout,d=Math.ceil(b*c.width)|0;b=Math.ceil(b*c.height)|0;if(a.width!==d||a.height!==b)a.width=d,a.height=b;return a};a.computeTickMarks=function(){this.xaxis.setScale();this.yaxis.setScale();for(var a=[h.calcTicks(this.xaxis),h.calcTicks(this.yaxis)],b=0;2>b;++b)for(var c=0;c<a[b].length;++c)a[b][c].text+=
"";return a};a.updateRefs=function(a){this.fullLayout=a;a=this.id.match(y);var b="yaxis"+a[2];this.xaxis=this.fullLayout["xaxis"+a[1]];this.yaxis=this.fullLayout[b]};a.relayoutCallback=function(){var a=this.graphDiv,b=this.xaxis,c=this.yaxis,d=a.layout,e={},f=e[b._name+".range"]=b.range.slice(),k=e[c._name+".range"]=c.range.slice();e[b._name+".autorange"]=b.autorange;e[c._name+".autorange"]=c.autorange;g.call("_storeDirectGUIEdit",a.layout,a._fullLayout._preGUI,e);var h=d[b._name];h.range=f;h.autorange=
b.autorange;b=d[c._name];b.range=k;b.autorange=c.autorange;e.lastInputTime=this.camera.lastInputTime;a.emit("plotly_relayout",e)};a.cameraChanged=function(){var a=this.camera;this.glplot.setDataBox(this.calcDataBox());var b=this.computeTickMarks(),c=this.glplotOptions.ticks;a:{for(var d=0;2>d;++d){var e=b[d],f=c[d];if(e.length!==f.length){c=!0;break a}for(var g=0;g<e.length;++g)if(e[g].x!==f[g].x){c=!0;break a}}c=!1}c&&(this.glplotOptions.ticks=b,this.glplotOptions.dataBox=a.dataBox,this.glplot.update(this.glplotOptions),
this.handleAnnotations())};a.handleAnnotations=function(){for(var a=this.graphDiv,b=this.fullLayout.annotations,c=0;c<b.length;c++){var d=b[c];d.xref===this.xaxis._id&&d.yref===this.yaxis._id&&g.getComponentMethod("annotations","drawOne")(a,c)}};a.destroy=function(){if(this.glplot){var a=this.traces;a&&Object.keys(a).map(function(b){a[b].dispose();delete a[b]});this.glplot.dispose();this.container.removeChild(this.svgContainer);this.container.removeChild(this.mouseContainer);this.glplot=this.fullData=
null;this.stopped=!0;this.camera.mouseListener.enabled=!1;this.mouseContainer.removeEventListener("wheel",this.camera.wheelListener);this.camera=null}};a.plot=function(a,b,d){var e=this.glplot;this.updateRefs(d);this.xaxis.clearCalc();this.yaxis.clearCalc();this.updateTraces(a,b);this.updateFx(d.dragmode);var f=d.width,g=d.height;this.updateSize(this.canvas);a=this.glplotOptions;a.merge(d);a.screenBox=[0,0,f,g];b={_fullLayout:{_axisConstraintGroups:this.graphDiv._fullLayout._axisConstraintGroups,
xaxis:this.xaxis,yaxis:this.yaxis}};k(b,this.xaxis);k(b,this.yaxis);var h=d._size,l=this.xaxis.domain,n=this.yaxis.domain;a.viewBox=[h.l+l[0]*h.w,h.b+n[0]*h.h,f-h.r-(1-l[1])*h.w,g-h.t-(1-n[1])*h.h];this.mouseContainer.style.width=h.w*(l[1]-l[0])+"px";this.mouseContainer.style.height=h.h*(n[1]-n[0])+"px";this.mouseContainer.height=h.h*(n[1]-n[0]);this.mouseContainer.style.left=h.l+l[0]*h.w+"px";this.mouseContainer.style.top=h.t+(1-n[1])*h.h+"px";for(g=0;2>g;++g)f=this[v[g]],f._length=a.viewBox[g+2]-
a.viewBox[g],r(this.graphDiv,f),f.setScale();c(b);a.ticks=this.computeTickMarks();a.dataBox=this.calcDataBox();a.merge(d);e.update(a);this.glplot.draw()};a.calcDataBox=function(){var a=this.xaxis,b=this.yaxis,c=a.range,d=b.range;a=a.r2l;b=b.r2l;return[a(c[0]),b(d[0]),a(c[1]),b(d[1])]};a.setRanges=function(a){var b=this.xaxis,c=this.yaxis,d=b.l2r,e=c.l2r;b.range=[d(a[0]),d(a[2])];c.range=[e(a[1]),e(a[3])]};a.updateTraces=function(a,b){var c=Object.keys(this.traces),d;this.fullData=a;var e=0;a:for(;e<
c.length;e++){var f=c[e],g=this.traces[f];for(d=0;d<a.length;d++){var k=a[d];if(k.uid===f&&k.type===g.type)continue a}g.dispose();delete this.traces[f]}for(e=0;e<a.length;e++)k=a[e],c=b[e],(d=this.traces[k.uid])?d.update(k,c):(d=k._module.plot(this,k,c),this.traces[k.uid]=d);this.glplot.objects.sort(function(a,b){return a._trace.index-b._trace.index})};a.updateFx=function(a){"lasso"===a||"select"===a?(this.pickCanvas.style["pointer-events"]="none",this.mouseContainer.style["pointer-events"]="none"):
(this.pickCanvas.style["pointer-events"]="auto",this.mouseContainer.style["pointer-events"]="auto");this.mouseContainer.style.cursor="pan"===a?"move":"zoom"===a?"crosshair":null};a.emitPointAction=function(a,b){for(var c=a.trace.uid,d=a.pointIndex,f,g=0;g<this.fullData.length;g++)this.fullData[g].uid===c&&(f=this.fullData[g]);a={x:a.traceCoord[0],y:a.traceCoord[1],curveNumber:f.index,pointNumber:d,data:f._input,fullData:this.fullData,xaxis:this.xaxis,yaxis:this.yaxis};e.appendArrayPointValue(a,f,
d);this.graphDiv.emit(b,{points:[a]})};a.draw=function(){if(!this.stopped){requestAnimationFrame(this.redraw);var a=this.glplot,b=this.camera,c=b.mouseListener,d=1===this.lastButtonState&&0===c.buttons,f=this.fullLayout;this.lastButtonState=c.buttons;this.cameraChanged();var g=c.x*a.pixelRatio;c=this.canvas.height-a.pixelRatio*c.y;if(b.boxEnabled&&"zoom"===f.dragmode){this.selectBox.enabled=!0;f=this.selectBox.selectBox=[Math.min(b.boxStart[0],b.boxEnd[0]),Math.min(b.boxStart[1],b.boxEnd[1]),Math.max(b.boxStart[0],
b.boxEnd[0]),Math.max(b.boxStart[1],b.boxEnd[1])];for(d=0;2>d;d++)b.boxStart[d]===b.boxEnd[d]&&(f[d]=a.dataBox[d],f[d+2]=a.dataBox[d+2]);a.setDirty()}else if(!b.panning&&this.isMouseOver){this.selectBox.enabled=!1;var k=f._size;(b=(k=a.pick(g/a.pixelRatio+k.l+this.xaxis.domain[0]*k.w,c/a.pixelRatio-(k.t+(1-this.yaxis.domain[1])*k.h)))&&k.object._trace.handlePick(k))&&d&&this.emitPointAction(b,"plotly_click");k&&"skip"!==k.object._trace.hoverinfo&&f.hovermode&&b&&(!this.lastPickResult||this.lastPickResult.traceUid!==
b.trace.uid||this.lastPickResult.dataCoord[0]!==b.dataCoord[0]||this.lastPickResult.dataCoord[1]!==b.dataCoord[1])&&(this.lastPickResult={traceUid:b.trace?b.trace.uid:null,dataCoord:b.dataCoord.slice()},this.spikes.update({center:k.dataCoord}),b.screenCoord=[((a.viewBox[2]-a.viewBox[0])*(k.dataCoord[0]-a.dataBox[0])/(a.dataBox[2]-a.dataBox[0])+a.viewBox[0])/a.pixelRatio,(this.canvas.height-(a.viewBox[3]-a.viewBox[1])*(k.dataCoord[1]-a.dataBox[1])/(a.dataBox[3]-a.dataBox[1])-a.viewBox[1])/a.pixelRatio],
this.emitPointAction(b,"plotly_hover"),d=this.fullData[b.trace.index]||{},g=b.pointIndex,(f=e.castHoverinfo(d,f,g))&&"all"!==f&&(f=f.split("+"),-1===f.indexOf("x")&&(b.traceCoord[0]=void 0),-1===f.indexOf("y")&&(b.traceCoord[1]=void 0),-1===f.indexOf("z")&&(b.traceCoord[2]=void 0),-1===f.indexOf("text")&&(b.textLabel=void 0),-1===f.indexOf("name")&&(b.name=void 0)),e.loneHover({x:b.screenCoord[0],y:b.screenCoord[1],xLabel:this.hoverFormatter("xaxis",b.traceCoord[0]),yLabel:this.hoverFormatter("yaxis",
b.traceCoord[1]),zLabel:b.traceCoord[2],text:b.textLabel,name:b.name,color:e.castHoverOption(d,g,"bgcolor")||b.color,borderColor:e.castHoverOption(d,g,"bordercolor"),fontFamily:e.castHoverOption(d,g,"font.family"),fontSize:e.castHoverOption(d,g,"font.size"),fontColor:e.castHoverOption(d,g,"font.color")},{container:this.svgContainer,gd:this.graphDiv}))}k||this.unhover();a.draw()}};a.unhover=function(){this.lastPickResult&&(this.spikes.update({}),this.lastPickResult=null,this.graphDiv.emit("plotly_unhover"),
e.loneUnhover(this.svgContainer))};a.hoverFormatter=function(a,b){if(void 0!==b)return a=this[a],h.tickText(a,a.c2l(b),"hover").text}},{"../../components/fx":616,"../../lib/show_no_webgl_msg":721,"../../plots/cartesian/axes":748,"../../registry":829,"../cartesian/autorange":747,"../cartesian/constants":754,"../cartesian/constraints":755,"./camera":785,"./convert":786,"gl-plot2d":283,"gl-select-box":295,"gl-spikes2d":304,"webgl-context":540}],789:[function(a,t,m){t=a("../../plot_api/edit_types").overrideAll;
var p=a("../../components/fx/layout_attributes"),g=a("./scene"),h=a("../get_data").getSubplotData,e=a("../../lib"),n=a("../../constants/xmlns_namespaces");m.name="gl3d";m.attr="scene";m.idRoot="scene";m.idRegex=m.attrRegex=e.counterRegex("scene");m.attributes=a("./layout/attributes");m.layoutAttributes=a("./layout/layout_attributes");m.baseLayoutAttrOverrides=t({hoverlabel:p.hoverlabel},"plot","nested");m.supplyLayoutDefaults=a("./layout/defaults");m.plot=function(a){for(var b=a._fullLayout,e=a._fullData,
n=b._subplots.gl3d,d=0;d<n.length;d++){var f=n[d],c=h(e,"gl3d",f),k=b[f],r=k.camera,m=k._scene;m||(m=new g({id:f,graphDiv:a,container:a.querySelector(".gl-container"),staticPlot:a._context.staticPlot,plotGlPixelRatio:a._context.plotGlPixelRatio,camera:r},b),k._scene=m);m.viewInitial||(m.viewInitial={up:{x:r.up.x,y:r.up.y,z:r.up.z},eye:{x:r.eye.x,y:r.eye.y,z:r.eye.z},center:{x:r.center.x,y:r.center.y,z:r.center.z}});m.plot(c,b,a.layout)}};m.clean=function(a,e,g,h){a=h._subplots.gl3d||[];for(g=0;g<
a.length;g++){var b=a[g];!e[b]&&h[b]._scene&&(h[b]._scene.destroy(),h._infolayer&&h._infolayer.selectAll(".annotation-"+b).remove())}};m.toSVG=function(a){a=a._fullLayout;for(var b=a._subplots.gl3d,e=a._size,g=0;g<b.length;g++){var d=a[b[g]],f=d.domain;d=d._scene;var c=d.toImage("png");a._glimages.append("svg:image").attr({xmlns:n.svg,"xlink:href":c,x:e.l+e.w*f.x[0],y:e.t+e.h*(1-f.y[1]),width:e.w*(f.x[1]-f.x[0]),height:e.h*(f.y[1]-f.y[0]),preserveAspectRatio:"none"});d.destroy()}};m.cleanId=function(a){if(a.match(/^scene[0-9]*$/))return a=
a.substr(5),"1"===a&&(a=""),"scene"+a};m.updateFx=function(a){a=a._fullLayout;for(var b=a._subplots.gl3d,e=0;e<b.length;e++)a[b[e]]._scene.updateFx(a.dragmode,a.hovermode)}},{"../../components/fx/layout_attributes":617,"../../constants/xmlns_namespaces":678,"../../lib":700,"../../plot_api/edit_types":731,"../get_data":784,"./layout/attributes":790,"./layout/defaults":794,"./layout/layout_attributes":795,"./scene":799}],790:[function(a,t,m){t.exports={scene:{valType:"subplotid",dflt:"scene",editType:"calc+clearAxisTypes"}}},
{}],791:[function(a,t,m){m=a("../../../components/color");var p=a("../../cartesian/layout_attributes"),g=a("../../../lib/extend").extendFlat;a=a("../../../plot_api/edit_types").overrideAll;t.exports=a({visible:p.visible,showspikes:{valType:"boolean",dflt:!0},spikesides:{valType:"boolean",dflt:!0},spikethickness:{valType:"number",min:0,dflt:2},spikecolor:{valType:"color",dflt:m.defaultLine},showbackground:{valType:"boolean",dflt:!1},backgroundcolor:{valType:"color",dflt:"rgba(204, 204, 204, 0.5)"},
showaxeslabels:{valType:"boolean",dflt:!0},color:p.color,categoryorder:p.categoryorder,categoryarray:p.categoryarray,title:p.title,type:g({},p.type,{values:["-","linear","log","date","category"]}),autorange:p.autorange,rangemode:p.rangemode,range:g({},p.range,{items:[{valType:"any",editType:"plot",impliedEdits:{"^autorange":!1}},{valType:"any",editType:"plot",impliedEdits:{"^autorange":!1}}],anim:!1}),tickmode:p.tickmode,nticks:p.nticks,tick0:p.tick0,dtick:p.dtick,tickvals:p.tickvals,ticktext:p.ticktext,
ticks:p.ticks,mirror:p.mirror,ticklen:p.ticklen,tickwidth:p.tickwidth,tickcolor:p.tickcolor,showticklabels:p.showticklabels,tickfont:p.tickfont,tickangle:p.tickangle,tickprefix:p.tickprefix,showtickprefix:p.showtickprefix,ticksuffix:p.ticksuffix,showticksuffix:p.showticksuffix,showexponent:p.showexponent,exponentformat:p.exponentformat,separatethousands:p.separatethousands,tickformat:p.tickformat,tickformatstops:p.tickformatstops,hoverformat:p.hoverformat,showline:p.showline,linecolor:p.linecolor,
linewidth:p.linewidth,showgrid:p.showgrid,gridcolor:g({},p.gridcolor,{dflt:"rgb(204, 204, 204)"}),gridwidth:p.gridwidth,zeroline:p.zeroline,zerolinecolor:p.zerolinecolor,zerolinewidth:p.zerolinewidth,_deprecated:{title:p._deprecated.title,titlefont:p._deprecated.titlefont}},"plot","from-root")},{"../../../components/color":577,"../../../lib/extend":690,"../../../plot_api/edit_types":731,"../../cartesian/layout_attributes":760}],792:[function(a,t,m){var p=a("tinycolor2").mix,g=a("../../../lib"),h=
a("../../../plot_api/plot_template"),e=a("./axis_attributes"),n=a("../../cartesian/type_defaults"),b=a("../../cartesian/axis_defaults"),l=["xaxis","yaxis","zaxis"],u=13600/187;t.exports=function(a,d,f){function c(a,b){return g.coerce(k,r,e,a,b)}for(var k,r,q=0;q<l.length;q++){var m=l[q];k=a[m]||{};r=h.newContainer(d,m);r._id=m[0]+f.scene;r._name=m;n(k,r,c,f);b(k,r,c,{font:f.font,letter:m[0],data:f.data,showGrid:!0,noTickson:!0,bgColor:f.bgColor,calendar:f.calendar},f.fullLayout);c("gridcolor",p(r.color,
f.bgColor,u).toRgbString());c("title.text",m[0]);r.setScale=g.noop;c("showspikes")&&(c("spikesides"),c("spikethickness"),c("spikecolor",r.color));c("showaxeslabels");c("showbackground")&&c("backgroundcolor")}}},{"../../../lib":700,"../../../plot_api/plot_template":738,"../../cartesian/axis_defaults":750,"../../cartesian/type_defaults":771,"./axis_attributes":791,tinycolor2:521}],793:[function(a,t,m){function p(){this.bounds=[[-10,-10,-10],[10,10,10]];this.ticks=[[],[],[]];this.tickEnable=[!0,!0,!0];
this.tickFont=["sans-serif","sans-serif","sans-serif"];this.tickSize=[12,12,12];this.tickAngle=[0,0,0];this.tickColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1]];this.tickPad=[18,18,18];this.labels=["x","y","z"];this.labelEnable=[!0,!0,!0];this.labelFont=["Open Sans","Open Sans","Open Sans"];this.labelSize=[20,20,20];this.labelColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1]];this.labelPad=[30,30,30];this.lineEnable=[!0,!0,!0];this.lineMirror=[!1,!1,!1];this.lineWidth=[1,1,1];this.lineColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1]];
this.lineTickEnable=[!0,!0,!0];this.lineTickMirror=[!1,!1,!1];this.lineTickLength=[10,10,10];this.lineTickWidth=[1,1,1];this.lineTickColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1]];this.gridEnable=[!0,!0,!0];this.gridWidth=[1,1,1];this.gridColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1]];this.zeroEnable=[!0,!0,!0];this.zeroLineColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1]];this.zeroLineWidth=[2,2,2];this.backgroundEnable=[!0,!0,!0];this.backgroundColor=[[.8,.8,.8,.5],[.8,.8,.8,.5],[.8,.8,.8,.5]];this._defaultTickPad=this.tickPad.slice();
this._defaultLabelPad=this.labelPad.slice();this._defaultLineTickLength=this.lineTickLength.slice()}var g=a("../../../lib/str2rgbarray"),h=a("../../../lib"),e=["xaxis","yaxis","zaxis"];p.prototype.merge=function(a,b){for(var l=0;3>l;++l){var n=b[e[l]];n.visible?(this.labels[l]=a.meta?h.templateString(n.title.text,{meta:a.meta}):n.title.text,"font"in n.title&&(n.title.font.color&&(this.labelColor[l]=g(n.title.font.color)),n.title.font.family&&(this.labelFont[l]=n.title.font.family),n.title.font.size&&
(this.labelSize[l]=n.title.font.size)),"showline"in n&&(this.lineEnable[l]=n.showline),"linecolor"in n&&(this.lineColor[l]=g(n.linecolor)),"linewidth"in n&&(this.lineWidth[l]=n.linewidth),"showgrid"in n&&(this.gridEnable[l]=n.showgrid),"gridcolor"in n&&(this.gridColor[l]=g(n.gridcolor)),"gridwidth"in n&&(this.gridWidth[l]=n.gridwidth),"log"===n.type?this.zeroEnable[l]=!1:"zeroline"in n&&(this.zeroEnable[l]=n.zeroline),"zerolinecolor"in n&&(this.zeroLineColor[l]=g(n.zerolinecolor)),"zerolinewidth"in
n&&(this.zeroLineWidth[l]=n.zerolinewidth),this.lineTickEnable[l]="ticks"in n&&n.ticks?!0:!1,"ticklen"in n&&(this.lineTickLength[l]=this._defaultLineTickLength[l]=n.ticklen),"tickcolor"in n&&(this.lineTickColor[l]=g(n.tickcolor)),"tickwidth"in n&&(this.lineTickWidth[l]=n.tickwidth),"tickangle"in n&&(this.tickAngle[l]="auto"===n.tickangle?-3600:Math.PI*-n.tickangle/180),"showticklabels"in n&&(this.tickEnable[l]=n.showticklabels),"tickfont"in n&&(n.tickfont.color&&(this.tickColor[l]=g(n.tickfont.color)),
n.tickfont.family&&(this.tickFont[l]=n.tickfont.family),n.tickfont.size&&(this.tickSize[l]=n.tickfont.size)),"mirror"in n?-1!==["ticks","all","allticks"].indexOf(n.mirror)?(this.lineTickMirror[l]=!0,this.lineMirror[l]=!0):!0===n.mirror?(this.lineTickMirror[l]=!1,this.lineMirror[l]=!0):(this.lineTickMirror[l]=!1,this.lineMirror[l]=!1):this.lineMirror[l]=!1,"showbackground"in n&&!1!==n.showbackground?(this.backgroundEnable[l]=!0,this.backgroundColor[l]=g(n.backgroundcolor)):this.backgroundEnable[l]=
!1):(this.tickEnable[l]=!1,this.labelEnable[l]=!1,this.lineEnable[l]=!1,this.lineTickEnable[l]=!1,this.gridEnable[l]=!1,this.zeroEnable[l]=!1,this.backgroundEnable[l]=!1)}};t.exports=function(a,b){var e=new p;e.merge(a,b);return e}},{"../../../lib":700,"../../../lib/str2rgbarray":723}],794:[function(a,t,m){function p(a,d,f,c){var g=f("bgcolor");g=h.combine(g,c.paper_bgcolor);for(var l=["up","center","eye"],n=0;n<l.length;n++)f("camera."+l[n]+".x"),f("camera."+l[n]+".y"),f("camera."+l[n]+".z");f("camera.projection.type");
l=!!f("aspectratio.x")&&!!f("aspectratio.y")&&!!f("aspectratio.z");n=f("aspectmode",l?"manual":"auto");l||(a.aspectratio=d.aspectratio={x:1,y:1,z:1},"manual"===n&&(d.aspectmode="auto"),a.aspectmode=d.aspectmode);l=u(c.fullData,"gl3d",c.id);b(a,d,{font:c.font,scene:c.id,data:l,bgColor:g,calendar:c.calendar,fullLayout:c.fullLayout});e.getComponentMethod("annotations3d","handleDefaults")(a,d,c);d=c.getDfltFromLayout("dragmode");!1===d||d||(d="orbit",a.camera&&a.camera.up?(g=a.camera.up.x,l=a.camera.up.y,
a=a.camera.up.z,0!==a&&(g&&l&&a?.999<a/Math.sqrt(g*g+l*l+a*a)&&(d="turntable"):d="turntable")):d="turntable");f("dragmode",d);f("hovermode",c.getDfltFromLayout("hovermode"))}var g=a("../../../lib"),h=a("../../../components/color"),e=a("../../../registry"),n=a("../../subplot_defaults"),b=a("./axis_defaults"),l=a("./layout_attributes"),u=a("../../get_data").getSubplotData;t.exports=function(a,b,e){var c=1<b._basePlotModules.length;n(a,b,e,{type:"gl3d",attributes:l,handleDefaults:p,fullLayout:b,font:b.font,
fullData:e,getDfltFromLayout:function(b){if(!c&&g.validate(a[b],l[b]))return a[b]},paper_bgcolor:b.paper_bgcolor,calendar:b.calendar})}},{"../../../components/color":577,"../../../lib":700,"../../../registry":829,"../../get_data":784,"../../subplot_defaults":824,"./axis_defaults":792,"./layout_attributes":795}],795:[function(a,t,m){function p(a,g,b){return{x:{valType:"number",dflt:a,editType:"camera"},y:{valType:"number",dflt:g,editType:"camera"},z:{valType:"number",dflt:b,editType:"camera"},editType:"camera"}}
m=a("./axis_attributes");var g=a("../../domain").attributes,h=a("../../../lib/extend").extendFlat;a=a("../../../lib").counterRegex;t.exports={_arrayAttrRegexps:[a("scene",".annotations",!0)],bgcolor:{valType:"color",dflt:"rgba(0,0,0,0)",editType:"plot"},camera:{up:h(p(0,0,1),{}),center:h(p(0,0,0),{}),eye:h(p(1.25,1.25,1.25),{}),projection:{type:{valType:"enumerated",values:["perspective","orthographic"],dflt:"perspective",editType:"calc"},editType:"calc"},editType:"camera"},domain:g({name:"scene",
editType:"plot"}),aspectmode:{valType:"enumerated",values:["auto","cube","data","manual"],dflt:"auto",editType:"plot",impliedEdits:{"aspectratio.x":void 0,"aspectratio.y":void 0,"aspectratio.z":void 0}},aspectratio:{x:{valType:"number",min:0,editType:"plot",impliedEdits:{"^aspectmode":"manual"}},y:{valType:"number",min:0,editType:"plot",impliedEdits:{"^aspectmode":"manual"}},z:{valType:"number",min:0,editType:"plot",impliedEdits:{"^aspectmode":"manual"}},editType:"plot",impliedEdits:{aspectmode:"manual"}},
xaxis:m,yaxis:m,zaxis:m,dragmode:{valType:"enumerated",values:["orbit","turntable","zoom","pan",!1],editType:"plot"},hovermode:{valType:"enumerated",values:["closest",!1],dflt:"closest",editType:"modebar"},uirevision:{valType:"any",editType:"none"},editType:"plot",_deprecated:{cameraposition:{valType:"info_array",editType:"camera"}}}},{"../../../lib":700,"../../../lib/extend":690,"../../domain":773,"./axis_attributes":791}],796:[function(a,t,m){function p(){this.enabled=[!0,!0,!0];this.colors=[[0,
0,0,1],[0,0,0,1],[0,0,0,1]];this.drawSides=[!0,!0,!0];this.lineWidth=[1,1,1]}var g=a("../../../lib/str2rgbarray"),h=["xaxis","yaxis","zaxis"];p.prototype.merge=function(a){for(var e=0;3>e;++e){var b=a[h[e]];b.visible?(this.enabled[e]=b.showspikes,this.colors[e]=g(b.spikecolor),this.drawSides[e]=b.spikesides,this.lineWidth[e]=b.spikethickness):(this.enabled[e]=!1,this.drawSides[e]=!1)}};t.exports=function(a){var e=new p;e.merge(a);return e}},{"../../../lib/str2rgbarray":723}],797:[function(a,t,m){t.exports=
function(a){for(var e=a.axesOptions,b=a.glplot.axesPixels,l=a.fullSceneLayout,m=[[],[],[]],q=0;3>q;++q){var d=l[h[q]];d._length=(b[q].hi-b[q].lo)*b[q].pixelsPerDataUnit/a.dataScale[q];if(Infinity===Math.abs(d._length)||isNaN(d._length))m[q]=[];else{d._input_range=d.range.slice();d.range[0]=b[q].lo/a.dataScale[q];d.range[1]=b[q].hi/a.dataScale[q];d._m=1/(a.dataScale[q]*b[q].pixelsPerDataUnit);d.range[0]===d.range[1]&&(--d.range[0],d.range[1]+=1);var f=d.tickmode;if("auto"===d.tickmode){d.tickmode=
"linear";var c=d.nticks||g.constrain(d._length/40,4,9);p.autoTicks(d,Math.abs(d.range[1]-d.range[0])/c)}c=p.calcTicks(d);for(var k=0;k<c.length;++k)c[k].x*=a.dataScale[q],"date"===d.type&&(c[k].text=c[k].text.replace(/<br>/g," "));m[q]=c;d.tickmode=f}}e.ticks=m;for(q=0;3>q;++q)for(k=0;2>k;++k)e.bounds[k][q]=a.glplot.bounds[k][q];e=Array(3);for(b=0;3>b;++b){l=m[b];q=Array(l.length);for(d=0;d<l.length;++d)q[d]=l[d].x;e[b]=q}a.contourLevels=e};var p=a("../../cartesian/axes"),g=a("../../../lib"),h=["xaxis",
"yaxis","zaxis"]},{"../../../lib":700,"../../cartesian/axes":748}],798:[function(a,t,m){function p(a,h){var e=[0,0,0,0],g,b;for(g=0;4>g;++g)for(b=0;4>b;++b)e[b]+=a[4*g+b]*h[g];return e}t.exports=function(a,h){return p(a.projection,p(a.view,p(a.model,[h[0],h[1],h[2],1])))}},{}],799:[function(a,t,m){function p(a){function b(b,c){b=a.fullSceneLayout[b];return r.tickText(b,b.d2l(c),"hover").text}var c=a.svgContainer;var d=a.container.getBoundingClientRect();var e=d.width,f=d.height;c.setAttributeNS(null,
"viewBox","0 0 "+e+" "+f);c.setAttributeNS(null,"width",e);c.setAttributeNS(null,"height",f);F(a);a.glplot.axes.update(a.axesOptions);for(var g=Object.keys(a.traces),h=null,l=a.glplot.selection,n=0;n<g.length;++n)d=a.traces[g[n]],"skip"!==d.data.hoverinfo&&d.handlePick(l)&&(h=d),d.setContourLevels&&d.setContourLevels();if(null!==h){var q=y(a.glplot.cameraParams,l.dataCoordinate);d=h.data;g=l.index;n={xLabel:b("xaxis",l.traceCoordinate[0]),yLabel:b("yaxis",l.traceCoordinate[1]),zLabel:b("zaxis",l.traceCoordinate[2])};
var m=v.castHoverinfo(d,a.fullLayout,g),p=(m||"").split("+");m=m&&"all"===m;d.hovertemplate||m||(-1===p.indexOf("x")&&(n.xLabel=void 0),-1===p.indexOf("y")&&(n.yLabel=void 0),-1===p.indexOf("z")&&(n.zLabel=void 0),-1===p.indexOf("text")&&(l.textLabel=void 0),-1===p.indexOf("name")&&(h.name=void 0));var u=[];"cone"===d.type||"streamtube"===d.type?(n.uLabel=b("xaxis",l.traceCoordinate[3]),(m||-1!==p.indexOf("u"))&&u.push("u: "+n.uLabel),n.vLabel=b("yaxis",l.traceCoordinate[4]),(m||-1!==p.indexOf("v"))&&
u.push("v: "+n.vLabel),n.wLabel=b("zaxis",l.traceCoordinate[5]),(m||-1!==p.indexOf("w"))&&u.push("w: "+n.wLabel),n.normLabel=l.traceCoordinate[6].toPrecision(3),(m||-1!==p.indexOf("norm"))&&u.push("norm: "+n.normLabel),"streamtube"===d.type&&(n.divergenceLabel=l.traceCoordinate[7].toPrecision(3),(m||-1!==p.indexOf("divergence"))&&u.push("divergence: "+n.divergenceLabel)),l.textLabel&&u.push(l.textLabel),p=u.join("\x3cbr\x3e")):"isosurface"===d.type?(n.valueLabel=r.tickText(a.mockAxis,a.mockAxis.d2l(l.traceCoordinate[3]),
"hover").text,u.push("value: "+n.valueLabel),l.textLabel&&u.push(l.textLabel),p=u.join("\x3cbr\x3e")):p=l.textLabel;m={x:l.traceCoordinate[0],y:l.traceCoordinate[1],z:l.traceCoordinate[2],data:d._input,fullData:d,curveNumber:d.index,pointNumber:g};v.appendArrayPointValue(m,d,g);d._module.eventData&&(m=d._module.eventData(m,l,d,{},g));u={points:[m]};a.fullSceneLayout.hovermode&&v.loneHover({trace:d,x:(.5+.5*q[0]/q[3])*e,y:(.5-.5*q[1]/q[3])*f,xLabel:n.xLabel,yLabel:n.yLabel,zLabel:n.zLabel,text:p,name:h.name,
color:v.castHoverOption(d,g,"bgcolor")||h.color,borderColor:v.castHoverOption(d,g,"bordercolor"),fontFamily:v.castHoverOption(d,g,"font.family"),fontSize:v.castHoverOption(d,g,"font.size"),fontColor:v.castHoverOption(d,g,"font.color"),hovertemplate:k.castOption(d,g,"hovertemplate"),hovertemplateLabels:k.extendFlat({},m,n),eventData:[m]},{container:c,gd:a.graphDiv});l.buttons&&5>l.distance?a.graphDiv.emit("plotly_click",u):a.graphDiv.emit("plotly_hover",u);q=u}else v.loneUnhover(c),a.graphDiv.emit("plotly_unhover",
q);a.drawAnnotations(a)}function g(a,b,c,e,f){b={canvas:e,gl:f,container:a.container,axes:a.axesOptions,spikes:a.spikeOptions,pickRadius:10,snapToData:!0,autoScale:!0,autoBounds:!1,cameraObject:b,pixelRatio:c};if(a.staticMode){if(!C&&(B=document.createElement("canvas"),C=d({canvas:B,preserveDrawingBuffer:!0,premultipliedAlpha:!0,antialias:!0}),!C))throw Error("error creating static canvas/context for image server");b.pixelRatio=a.pixelRatio;b.gl=C;b.canvas=B}try{a.glplot=q(b)}catch(J){return!1}return!0}
function h(a,b,c,d){a.initializeGLCamera();if(!g(a,a.camera,b,c,d))return A(a);var e=a.graphDiv,k=function(a){if(!1!==a.fullSceneLayout.dragmode){var b={};b[a.id+".camera"]=l(a.camera);a.saveCamera(e.layout);a.graphDiv.emit("plotly_relayout",b)}};a.glplot.canvas.addEventListener("mouseup",function(){k(a)});a.glplot.canvas.addEventListener("wheel",function(){e._context._scrollZoom.gl3d&&k(a)},f?{passive:!1}:!1);a.staticMode||a.glplot.canvas.addEventListener("webglcontextlost",function(b){e&&e.emit&&
e.emit("plotly_webglcontextlost",{event:b,layer:a.id})},!1);a.glplot.camera=a.camera;a.glplot.oncontextloss=function(){a.recoverContext()};a.glplot.onrender=p.bind(null,a);a.traces={};a.make4thDimension();return!0}function e(a,b){var d=document.createElement("div"),e=a.container;this.graphDiv=a.graphDiv;var f=document.createElementNS("http://www.w3.org/2000/svg","svg");f.style.position="absolute";f.style.top=f.style.left="0px";f.style.width=f.style.height="100%";f.style["z-index"]=20;f.style["pointer-events"]=
"none";d.appendChild(f);this.svgContainer=f;d.id=a.id;d.style.position="absolute";d.style.top=d.style.left="0px";d.style.width=d.style.height="100%";e.appendChild(d);this.fullLayout=b;this.id=a.id||"scene";this.fullSceneLayout=b[this.id];this.plotArgs=[[],{},{}];this.axesOptions=w(b,b[this.id]);this.spikeOptions=x(b[this.id]);this.container=d;this.staticMode=!!a.staticPlot;this.pixelRatio=this.pixelRatio||a.plotGlPixelRatio||2;this.dataScale=[1,1,1];this.contourLevels=[[],[],[]];this.convertAnnotations=
c.getComponentMethod("annotations3d","convert");this.drawAnnotations=c.getComponentMethod("annotations3d","draw");h(this,this.pixelRatio)}function n(a,b,c){a=a.fullSceneLayout;for(var d=0;3>d;d++){var e=D[d],f=e.charAt(0);e=a[e];var g=b[f],h=b[f+"calendar"];f=b["_"+f+"length"];if(k.isArrayOrTypedArray(g))for(var l,n=0;n<(f||g.length);n++)if(k.isArrayOrTypedArray(g[n]))for(var r=0;r<g[n].length;++r)l=e.d2l(g[n][r],0,h),!isNaN(l)&&isFinite(l)&&(c[0][d]=Math.min(c[0][d],l),c[1][d]=Math.max(c[1][d],l));
else l=e.d2l(g[n],0,h),!isNaN(l)&&isFinite(l)&&(c[0][d]=Math.min(c[0][d],l),c[1][d]=Math.max(c[1][d],l));else c[0][d]=Math.min(c[0][d],0),c[1][d]=Math.max(c[1][d],f-1)}}function b(a,b){a=a.fullSceneLayout;for(var c=a.annotations||[],d=0;3>d;d++){var e=D[d],f=e.charAt(0);e=a[e];for(var g=0;g<c.length;g++){var k=c[g];k.visible&&(k=e.r2l(k[f]),!isNaN(k)&&isFinite(k)&&(b[0][d]=Math.min(b[0][d],k),b[1][d]=Math.max(b[1][d],k)))}}}function l(a){return{up:{x:a.up[0],y:a.up[1],z:a.up[2]},center:{x:a.center[0],
y:a.center[1],z:a.center[2]},eye:{x:a.eye[0],y:a.eye[1],z:a.eye[2]},projection:{type:!0===a._ortho?"orthographic":"perspective"}}}var u=a("gl-plot3d").createCamera,q=a("gl-plot3d").createScene,d=a("webgl-context"),f=a("has-passive-events"),c=a("../../registry"),k=a("../../lib"),r=a("../../plots/cartesian/axes"),v=a("../../components/fx"),z=a("../../lib/str2rgbarray"),A=a("../../lib/show_no_webgl_msg"),y=a("./project"),w=a("./layout/convert"),x=a("./layout/spikes"),F=a("./layout/tick_marks"),B,C;a=
e.prototype;a.initializeGLCamera=function(){var a=this.fullSceneLayout.camera;this.camera=u(this.container,{center:[a.center.x,a.center.y,a.center.z],eye:[a.eye.x,a.eye.y,a.eye.z],up:[a.up.x,a.up.y,a.up.z],_ortho:"orthographic"===a.projection.type,zoomMin:.01,zoomMax:100,mode:"orbit"})};a.recoverContext=function(){function a(){c.isContextLost()?requestAnimationFrame(a):h(b,e,f,d,c)?b.plot.apply(b,b.plotArgs):k.error("Catastrophic and unrecoverable WebGL error. Context lost.")}var b=this,c=this.glplot.gl,
d=this.glplot.canvas,e=this.glplot.camera,f=this.glplot.pixelRatio;this.glplot.dispose();requestAnimationFrame(a)};var D=["xaxis","yaxis","zaxis"];a.plot=function(a,c,d){this.plotArgs=[a,c,d];if(!this.glplot.contextLost){var e,f,g=c[this.id];d=d[this.id];this.glplot.clearColor=g.bgcolor?z(g.bgcolor):[0,0,0,0];this.glplot.snapToData=!0;this.fullLayout=c;this.glplotLayout=this.fullSceneLayout=g;this.axesOptions.merge(c,g);this.spikeOptions.merge(g);this.setCamera(g.camera);this.updateFx(g.dragmode,
g.hovermode);this.camera.enableWheel=this.graphDiv._context._scrollZoom.gl3d;this.glplot.update({});this.setConvert(h);a?Array.isArray(a)||(a=[a]):a=[];var k=[[Infinity,Infinity,Infinity],[-Infinity,-Infinity,-Infinity]];for(e=0;e<a.length;++e){var h=a[e];!0===h.visible&&n(this,h,k)}b(this,k);var l=[1,1,1];for(f=0;3>f;++f)l[f]=k[1][f]===k[0][f]?1:1/(k[1][f]-k[0][f]);this.dataScale=l;this.convertAnnotations(this);for(e=0;e<a.length;++e)h=a[e],!0===h.visible&&((k=this.traces[h.uid])?k.data.type===h.type?
k.update(h):(k.dispose(),k=h._module.plot(this,h),this.traces[h.uid]=k):(k=h._module.plot(this,h),this.traces[h.uid]=k),k.name=h.name);h=Object.keys(this.traces);e=0;a:for(;e<h.length;++e){for(f=0;f<a.length;++f)if(a[f].uid===h[e]&&!0===a[f].visible)continue a;k=this.traces[h[e]];k.dispose();delete this.traces[h[e]]}this.glplot.objects.sort(function(a,b){return a._trace.data.index-b._trace.data.index});k=[[0,0,0],[0,0,0]];a={};for(e=0;3>e;++e){h=g[D[e]];f=h.type;f in a?(a[f].acc*=l[e],a[f].count+=
1):a[f]={acc:l[e],count:1};if(h.autorange){k[0][e]=Infinity;k[1][e]=-Infinity;var r=this.glplot.objects,q=this.fullSceneLayout.annotations||[],m=h._name.charAt(0);for(f=0;f<r.length;f++){var p=r[f],u=p.bounds,t=p._trace.data._pad||0;k[0][e]="ErrorBars"===p.constructor.name&&h._lowerLogErrorBound?Math.min(k[0][e],h._lowerLogErrorBound):Math.min(k[0][e],u[0][e]/l[e]-t);k[1][e]=Math.max(k[1][e],u[1][e]/l[e]+t)}for(f=0;f<q.length;f++)r=q[f],r.visible&&(r=h.r2l(r[m]),k[0][e]=Math.min(k[0][e],r),k[1][e]=
Math.max(k[1][e],r));"rangemode"in h&&"tozero"===h.rangemode&&(k[0][e]=Math.min(k[0][e],0),k[1][e]=Math.max(k[1][e],0));k[0][e]>k[1][e]?(k[0][e]=-1,k[1][e]=1):(f=k[1][e]-k[0][e],k[0][e]-=f/32,k[1][e]+=f/32);"reversed"===h.autorange&&(h=k[0][e],k[0][e]=k[1][e],k[1][e]=h)}else f=h.range,k[0][e]=h.r2l(f[0]),k[1][e]=h.r2l(f[1]);k[0][e]===k[1][e]&&(--k[0][e],k[1][e]+=1);this.glplot.bounds[0][e]=k[0][e]*l[e];this.glplot.bounds[1][e]=k[1][e]*l[e]}k=[1,1,1];for(e=0;3>e;++e)h=g[D[e]],f=h.type,h=a[f],k[e]=
Math.pow(h.acc,1/h.count)/l[e];if("auto"===g.aspectmode)e=4>=Math.max.apply(null,k)/Math.min.apply(null,k)?k:[1,1,1];else if("cube"===g.aspectmode)e=[1,1,1];else if("data"===g.aspectmode)e=k;else if("manual"===g.aspectmode)e=g.aspectratio,e=[e.x,e.y,e.z];else throw Error("scene.js aspectRatio was not one of the enumerated types");g.aspectratio.x=d.aspectratio.x=e[0];g.aspectratio.y=d.aspectratio.y=e[1];g.aspectratio.z=d.aspectratio.z=e[2];this.glplot.aspect=e;g=g.domain||null;c=c._size||null;g&&c&&
(d=this.container.style,d.position="absolute",d.left=c.l+g.x[0]*c.w+"px",d.top=c.t+(1-g.y[1])*c.h+"px",d.width=c.w*(g.x[1]-g.x[0])+"px",d.height=c.h*(g.y[1]-g.y[0])+"px");this.glplot.redraw()}};a.destroy=function(){this.glplot&&(this.camera.mouseListener.enabled=!1,this.container.removeEventListener("wheel",this.camera.wheelListener),this.camera=this.glplot.camera=null,this.glplot.dispose(),this.container.parentNode.removeChild(this.container),this.glplot=null)};a.getCamera=function(){this.glplot.camera.view.recalcMatrix(this.camera.view.lastT());
return l(this.glplot.camera)};a.setCamera=function(a){this.glplot.camera.lookAt.apply(this,[[a.eye.x,a.eye.y,a.eye.z],[a.center.x,a.center.y,a.center.z],[a.up.x,a.up.y,a.up.z]]);a="orthographic"===a.projection.type;if(a!==this.glplot.camera._ortho){this.glplot.redraw();var b=this.glplot.pixelRatio,c=this.glplot.clearColor;this.glplot.gl.clearColor(c[0],c[1],c[2],c[3]);this.glplot.gl.clear(this.glplot.gl.DEPTH_BUFFER_BIT|this.glplot.gl.COLOR_BUFFER_BIT);this.glplot.dispose();h(this,b);this.glplot.camera._ortho=
a}};a.saveCamera=function(a){var b=this.fullLayout,d=this.getCamera(),e=k.nestedProperty(a,this.id+".camera"),f=e.get(),g=!1;if(void 0===f)g=!0;else{for(var h=0;3>h;h++)for(var l=0;3>l;l++){var n=["up","center","eye"],r=["x","y","z"];if(!f[n[h]]||d[n[h]][r[l]]!==f[n[h]][r[l]]){g=!0;break}}if(!f.projection||d.projection&&d.projection.type!==f.projection.type)g=!0}g&&(h={},h[this.id+".camera"]=f,c.call("_storeDirectGUIEdit",a,b._preGUI,h),e.set(d),k.nestedProperty(b,this.id+".camera").set(d));return g};
a.updateFx=function(a,b){var d=this.camera;if(d)if("orbit"===a)d.mode="orbit",d.keyBindingMode="rotate";else if("turntable"===a){d.up=[0,0,1];d.mode="turntable";d.keyBindingMode="rotate";var e=this.graphDiv;a=e._fullLayout;d=this.fullSceneLayout.camera;var f=d.up.x,g=d.up.y,h=d.up.z;.999>h/Math.sqrt(f*f+g*g+h*h)&&(f=this.id+".camera.up",g={x:0,y:0,z:1},h={},h[f]=g,e=e.layout,c.call("_storeDirectGUIEdit",e,a._preGUI,h),d.up=g,k.nestedProperty(e,f).set(g))}else d.keyBindingMode=a;this.fullSceneLayout.hovermode=
b};a.toImage=function(a){a||(a="png");this.staticMode&&this.container.appendChild(B);this.glplot.redraw();var b=this.glplot.gl,c=b.drawingBufferWidth,d=b.drawingBufferHeight;b.bindFramebuffer(b.FRAMEBUFFER,null);var e=new Uint8Array(c*d*4);b.readPixels(0,0,c,d,b.RGBA,b.UNSIGNED_BYTE,e);b=0;for(var f=d-1;b<f;++b,--f)for(var g=0;g<c;++g)for(var k=0;4>k;++k){var h=e[4*(c*b+g)+k];e[4*(c*b+g)+k]=e[4*(c*f+g)+k];e[4*(c*f+g)+k]=h}b=document.createElement("canvas");b.width=c;b.height=d;f=b.getContext("2d");
c=f.createImageData(c,d);c.data.set(e);f.putImageData(c,0,0);switch(a){case "jpeg":a=b.toDataURL("image/jpeg");break;case "webp":a=b.toDataURL("image/webp");break;default:a=b.toDataURL("image/png")}this.staticMode&&this.container.removeChild(B);return a};a.setConvert=function(){for(var a=0;3>a;a++){var b=this.fullSceneLayout[D[a]];r.setConvert(b,this.fullLayout);b.setScale=k.noop}};a.make4thDimension=function(){var a=this.graphDiv._fullLayout;this.mockAxis={type:"linear",showexponent:"all",exponentformat:"B"};
r.setConvert(this.mockAxis,a)};t.exports=e},{"../../components/fx":616,"../../lib":700,"../../lib/show_no_webgl_msg":721,"../../lib/str2rgbarray":723,"../../plots/cartesian/axes":748,"../../registry":829,"./layout/convert":793,"./layout/spikes":796,"./layout/tick_marks":797,"./project":798,"gl-plot3d":286,"has-passive-events":403,"webgl-context":540}],800:[function(a,t,m){t.exports=function(a,g,h,e){e=e||a.length;for(var n=Array(e),b=0;b<e;b++)n[b]=[a[b],g[b],h[b]];return n}},{}],801:[function(a,
t,m){m=a("./font_attributes");var p=a("./animation_attributes"),g=a("../components/color/attributes"),h=a("../components/colorscale/layout_attributes"),e=a("./pad_attributes");a=a("../lib/extend").extendFlat;var n=m({editType:"calc"});n.family.dflt='"Open Sans", verdana, arial, sans-serif';n.size.dflt=12;n.color.dflt=g.defaultLine;t.exports={font:n,title:{text:{valType:"string",editType:"layoutstyle"},font:m({editType:"layoutstyle"}),xref:{valType:"enumerated",dflt:"container",values:["container",
"paper"],editType:"layoutstyle"},yref:{valType:"enumerated",dflt:"container",values:["container","paper"],editType:"layoutstyle"},x:{valType:"number",min:0,max:1,dflt:.5,editType:"layoutstyle"},y:{valType:"number",min:0,max:1,dflt:"auto",editType:"layoutstyle"},xanchor:{valType:"enumerated",dflt:"auto",values:["auto","left","center","right"],editType:"layoutstyle"},yanchor:{valType:"enumerated",dflt:"auto",values:["auto","top","middle","bottom"],editType:"layoutstyle"},pad:a(e({editType:"layoutstyle"}),
{}),editType:"layoutstyle"},autosize:{valType:"boolean",dflt:!1,editType:"none"},width:{valType:"number",min:10,dflt:700,editType:"plot"},height:{valType:"number",min:10,dflt:450,editType:"plot"},margin:{l:{valType:"number",min:0,dflt:80,editType:"plot"},r:{valType:"number",min:0,dflt:80,editType:"plot"},t:{valType:"number",min:0,dflt:100,editType:"plot"},b:{valType:"number",min:0,dflt:80,editType:"plot"},pad:{valType:"number",min:0,dflt:0,editType:"plot"},autoexpand:{valType:"boolean",dflt:!0,editType:"plot"},
editType:"plot"},paper_bgcolor:{valType:"color",dflt:g.background,editType:"plot"},plot_bgcolor:{valType:"color",dflt:g.background,editType:"layoutstyle"},separators:{valType:"string",editType:"plot"},hidesources:{valType:"boolean",dflt:!1,editType:"plot"},showlegend:{valType:"boolean",editType:"legend"},colorway:{valType:"colorlist",dflt:g.defaults,editType:"calc"},colorscale:h,datarevision:{valType:"any",editType:"calc"},uirevision:{valType:"any",editType:"none"},editrevision:{valType:"any",editType:"none"},
selectionrevision:{valType:"any",editType:"none"},template:{valType:"any",editType:"calc"},modebar:{orientation:{valType:"enumerated",values:["v","h"],dflt:"h",editType:"modebar"},bgcolor:{valType:"color",editType:"modebar"},color:{valType:"color",editType:"modebar"},activecolor:{valType:"color",editType:"modebar"},uirevision:{valType:"any",editType:"none"},editType:"modebar"},meta:{valType:"data_array",editType:"plot"},transition:a({},p.transition,{editType:"none"}),_deprecated:{title:{valType:"string",
editType:"layoutstyle"},titlefont:m({editType:"layoutstyle"})}}},{"../components/color/attributes":576,"../components/colorscale/layout_attributes":590,"../lib/extend":690,"./animation_attributes":743,"./font_attributes":774,"./pad_attributes":809}],802:[function(a,t,m){t.exports={requiredVersion:"0.45.0",styleUrlPrefix:"mapbox://styles/mapbox/",styleUrlSuffix:"v9",controlContainerClassName:"mapboxgl-control-container",wrongVersionErrorMsg:"Your custom plotly.js bundle is not using the correct mapbox-gl version\nPlease install mapbox-gl@0.45.0.",
noAccessTokenErrorMsg:"Missing Mapbox access token.\nMapbox trace type require a Mapbox access token to be registered.\nFor example:\n  Plotly.plot(gd, data, layout, { mapboxAccessToken: 'my-access-token' });\nMore info here: https://www.mapbox.com/help/define-access-token/",mapOnErrorMsg:"Mapbox error.",styleRules:{map:"overflow:hidden;position:relative;","missing-css":"display:none"}}},{}],803:[function(a,t,m){var p=a("../../lib");t.exports=function(a,h){var e=a.split(" ");a=e[0];e=e[1];var g=p.isArrayOrTypedArray(h)?
p.mean(h):h;h=.5+g/100;g=1.5+g/100;var b=["",""],l=[0,0];switch(a){case "top":b[0]="top";l[1]=-g;break;case "bottom":b[0]="bottom",l[1]=g}switch(e){case "left":b[1]="right";l[0]=-h;break;case "right":b[1]="left",l[0]=h}return{anchor:b[0]&&b[1]?b.join("-"):b[0]?b[0]:b[1]?b[1]:"center",offset:l}}},{"../../lib":700}],804:[function(a,t,m){var p=a("mapbox-gl"),g=a("../../lib"),h=a("../../plots/get_data").getSubplotCalcData,e=a("../../constants/xmlns_namespaces"),n=a("./mapbox"),b=a("./constants"),l;for(l in b.styleRules)g.addStyleRule(".mapboxgl-"+
l,b.styleRules[l]);m.name="mapbox";m.attr="subplot";m.idRoot="mapbox";m.idRegex=m.attrRegex=g.counterRegex("mapbox");m.attributes={subplot:{valType:"subplotid",dflt:"mapbox",editType:"calc"}};m.layoutAttributes=a("./layout_attributes");m.supplyLayoutDefaults=a("./layout_defaults");m.plot=function(a){var e=a._fullLayout,d=a.calcdata,f=e._subplots.mapbox;if(p.version!==b.requiredVersion)throw Error(b.wrongVersionErrorMsg);a:{var c=a._fullLayout;if(""===a._context.mapboxAccessToken)c="";else{for(var k=
0;k<f.length;k++){var l=c[f[k]];if(l.accesstoken){c=l.accesstoken;break a}}throw Error(b.noAccessTokenErrorMsg);}}p.accessToken=c;for(c=0;c<f.length;c++){k=f[c];l=h(d,"mapbox",k);var m=e[k],u=m._subplot;u||(u=n({gd:a,container:e._glcontainer.node(),id:k,fullLayout:e,staticPlot:a._context.staticPlot}),e[k]._subplot=u);u.viewInitial||(u.viewInitial={center:g.extendFlat({},m.center),zoom:m.zoom,bearing:m.bearing,pitch:m.pitch});u.plot(l,e,a._promises)}};m.clean=function(a,b,d,e){a=e._subplots.mapbox||
[];for(d=0;d<a.length;d++){var c=a[d];!b[c]&&e[c]._subplot&&e[c]._subplot.destroy()}};m.toSVG=function(a){a=a._fullLayout;for(var b=a._subplots.mapbox,d=a._size,f=0;f<b.length;f++){var c=a[b[f]],g=c.domain;c=c._subplot;var h=c.toImage("png");a._glimages.append("svg:image").attr({xmlns:e.svg,"xlink:href":h,x:d.l+d.w*g.x[0],y:d.t+d.h*(1-g.y[1]),width:d.w*(g.x[1]-g.x[0]),height:d.h*(g.y[1]-g.y[0]),preserveAspectRatio:"none"});c.destroy()}};m.updateFx=function(a){a=a._fullLayout;for(var b=a._subplots.mapbox,
d=0;d<b.length;d++)a[b[d]]._subplot.updateFx(a)}},{"../../constants/xmlns_namespaces":678,"../../lib":700,"../../plots/get_data":784,"./constants":802,"./layout_attributes":806,"./layout_defaults":807,"./mapbox":808,"mapbox-gl":418}],805:[function(a,t,m){function p(a,e){this.mapbox=a;this.map=a.map;this.uid=a.uid+"-layer"+e;this.idSource=this.uid+"-source";this.idLayer=this.uid+"-layer";this.below=this.layerType=this.source=this.sourceType=null;this.visible=!1}function g(a){var b=a.source;return a.visible&&
(e.isPlainObject(b)||"string"===typeof b&&0<b.length)}function h(a){var b={},g={};switch(a.type){case "circle":e.extendFlat(g,{"circle-radius":a.circle.radius,"circle-color":a.color,"circle-opacity":a.opacity});break;case "line":e.extendFlat(g,{"line-width":a.line.width,"line-color":a.color,"line-opacity":a.opacity,"line-dasharray":a.line.dash});break;case "fill":e.extendFlat(g,{"fill-color":a.color,"fill-outline-color":a.fill.outlinecolor,"fill-opacity":a.opacity});break;case "symbol":var h=a.symbol,
d=n(h.textposition,h.iconsize);e.extendFlat(b,{"icon-image":h.icon+"-15","icon-size":h.iconsize/10,"text-field":h.text,"text-size":h.textfont.size,"text-anchor":d.anchor,"text-offset":d.offset,"symbol-placement":h.placement});e.extendFlat(g,{"icon-color":a.color,"text-color":h.textfont.color,"text-opacity":a.opacity})}return{layout:b,paint:g}}var e=a("../../lib"),n=a("./convert_text_opts");a=p.prototype;a.update=function(a){this.visible?this.needsNewSource(a)?(this.removeLayer(),this.updateSource(a),
this.updateLayer(a)):this.needsNewLayer(a)?this.updateLayer(a):this.updateStyle(a):(this.updateSource(a),this.updateLayer(a));this.visible=g(a)};a.needsNewSource=function(a){return this.sourceType!==a.sourcetype||this.source!==a.source||this.layerType!==a.type};a.needsNewLayer=function(a){return this.layerType!==a.type||this.below!==a.below};a.updateSource=function(a){var b=this.map;b.getSource(this.idSource)&&b.removeSource(this.idSource);this.sourceType=a.sourcetype;this.source=a.source;if(g(a)){var e=
a.sourcetype;a=a.source;var h={type:e},d;"geojson"===e?d="data":"vector"===e&&(d="string"===typeof a?"url":"tiles");h[d]=a;b.addSource(this.idSource,h)}};a.updateLayer=function(a){var b=this.map,e=h(a);this.removeLayer();this.layerType=a.type;g(a)&&b.addLayer({id:this.idLayer,source:this.idSource,"source-layer":a.sourcelayer||"",type:a.type,minzoom:a.minzoom,maxzoom:a.maxzoom,layout:e.layout,paint:e.paint},a.below)};a.updateStyle=function(a){g(a)&&(a=h(a),this.mapbox.setOptions(this.idLayer,"setLayoutProperty",
a.layout),this.mapbox.setOptions(this.idLayer,"setPaintProperty",a.paint))};a.removeLayer=function(){var a=this.map;a.getLayer(this.idLayer)&&a.removeLayer(this.idLayer)};a.dispose=function(){var a=this.map;a.removeLayer(this.idLayer);a.removeSource(this.idSource)};t.exports=function(a,e,g){a=new p(a,e);a.update(g);return a}},{"../../lib":700,"./convert_text_opts":803}],806:[function(a,t,m){m=a("../../lib");var p=a("../../components/color").defaultLine,g=a("../domain").attributes,h=a("../font_attributes"),
e=a("../../traces/scatter/attributes").textposition,n=a("../../plot_api/edit_types").overrideAll;a=a("../../plot_api/plot_template").templatedArray;h=h({});h.family.dflt="Open Sans Regular, Arial Unicode MS Regular";(t.exports=n({_arrayAttrRegexps:[m.counterRegex("mapbox",".layers",!0)],domain:g({name:"mapbox"}),accesstoken:{valType:"string",noBlank:!0,strict:!0},style:{valType:"any",values:"basic streets outdoors light dark satellite satellite-streets".split(" "),dflt:"basic"},center:{lon:{valType:"number",
dflt:0},lat:{valType:"number",dflt:0}},zoom:{valType:"number",dflt:1},bearing:{valType:"number",dflt:0},pitch:{valType:"number",dflt:0},layers:a("layer",{visible:{valType:"boolean",dflt:!0},sourcetype:{valType:"enumerated",values:["geojson","vector"],dflt:"geojson"},source:{valType:"any"},sourcelayer:{valType:"string",dflt:""},type:{valType:"enumerated",values:["circle","line","fill","symbol"],dflt:"circle"},below:{valType:"string",dflt:""},color:{valType:"color",dflt:p},opacity:{valType:"number",
min:0,max:1,dflt:1},minzoom:{valType:"number",min:0,max:24,dflt:0},maxzoom:{valType:"number",min:0,max:24,dflt:24},circle:{radius:{valType:"number",dflt:15}},line:{width:{valType:"number",dflt:2},dash:{valType:"data_array"}},fill:{outlinecolor:{valType:"color",dflt:p}},symbol:{icon:{valType:"string",dflt:"marker"},iconsize:{valType:"number",dflt:10},text:{valType:"string",dflt:""},placement:{valType:"enumerated",values:["point","line","line-center"],dflt:"point"},textfont:h,textposition:m.extendFlat({},
e,{arrayOk:!1})}})},"plot","from-root")).uirevision={valType:"any",editType:"none"}},{"../../components/color":577,"../../lib":700,"../../plot_api/edit_types":731,"../../plot_api/plot_template":738,"../../traces/scatter/attributes":1051,"../domain":773,"../font_attributes":774}],807:[function(a,t,m){function p(a,b,e,d){e("accesstoken",d.accessToken);e("style");e("center.lon");e("center.lat");e("zoom");e("bearing");e("pitch");n(a,b,{name:"layers",handleItemDefaults:g});b._input=a}function g(a,e){function g(d,
c){return h.coerce(a,e,b.layers,d,c)}if(g("visible")){var d=g("sourcetype");g("source");"vector"===d&&g("sourcelayer");d=g("type");g("below");g("color");g("opacity");g("minzoom");g("maxzoom");"circle"===d&&g("circle.radius");"line"===d&&(g("line.width"),g("line.dash"));"fill"===d&&g("fill.outlinecolor");"symbol"===d&&(g("symbol.icon"),g("symbol.iconsize"),g("symbol.text"),h.coerceFont(g,"symbol.textfont"),g("symbol.textposition"),g("symbol.placement"))}}var h=a("../../lib"),e=a("../subplot_defaults"),
n=a("../array_container_defaults"),b=a("./layout_attributes");t.exports=function(a,g,h){e(a,g,h,{type:"mapbox",attributes:b,handleDefaults:p,partition:"y",accessToken:g._mapboxAccessToken})}},{"../../lib":700,"../array_container_defaults":744,"../subplot_defaults":824,"./layout_attributes":806}],808:[function(a,t,m){function p(a){this.id=a.id;this.gd=a.gd;this.container=a.container;this.isStatic=a.staticPlot;a=a.fullLayout;this.uid=a._uid+"-"+this.id;this.yaxis=this.xaxis=this.div=null;this.createFramework(a);
this.styleObj=this.accessToken=this.map=null;this.traceHash={};this.layerList=[]}function g(a){var d=c.style.values,e=c.style.dflt,g={};b.isPlainObject(a)?(g.id=a.id,g.style=a):"string"===typeof a?(g.id=a,g.style=-1!==d.indexOf(a)?f.styleUrlPrefix+a+"-"+f.styleUrlSuffix:a):(g.id=e,g.style=f.styleUrlPrefix+e+"-"+f.styleUrlSuffix);g.transition={duration:0,delay:0};return g}function h(a){return[a.lon,a.lat]}var e=a("mapbox-gl"),n=a("../../components/fx"),b=a("../../lib"),l=a("../../registry"),u=a("../../components/dragelement"),
q=a("../cartesian/select").prepSelect,d=a("../cartesian/select").selectOnClick,f=a("./constants"),c=a("./layout_attributes"),k=a("./layers");a=p.prototype;t.exports=function(a){return new p(a)};a.plot=function(a,b,c){var d=this,e=b[d.id];d.map&&e.accesstoken!==d.accessToken&&(d.map.remove(),d.map=null,d.styleObj=null,d.traceHash=[],d.layerList={});e=d.map?new Promise(function(c,e){d.updateMap(a,b,c,e)}):new Promise(function(c,e){d.createMap(a,b,c,e)});c.push(e)};a.createMap=function(a,b,c,k){function r(){n.loneUnhover(b._toppaper)}
var q=this,m=q.gd,p=b[q.id],u=q.styleObj=g(p.style);q.accessToken=p.accesstoken;var t=q.map=new e.Map({container:q.div,style:u.style,center:h(p.center),zoom:p.zoom,bearing:p.bearing,pitch:p.pitch,interactive:!q.isStatic,preserveDrawingBuffer:q.isStatic,doubleClickZoom:!1,boxZoom:!1});p=q.div.getElementsByClassName(f.controlContainerClassName)[0];q.div.removeChild(p);t._canvas.style.left="0px";t._canvas.style.top="0px";q.rejectOnError(k);t.once("load",function(){q.updateData(a);q.updateLayout(b);q.resolveOnRender(c)});
if(!q.isStatic){var v=!1;t.on("moveend",function(a){if(q.map){if(a.originalEvent||v){a=m._fullLayout[q.id];l.call("_storeDirectGUIEdit",m.layout,m._fullLayout._preGUI,q.getViewEdits(a));var b=q.getView();a._input.center=a.center=b.center;a._input.zoom=a.zoom=b.zoom;a._input.bearing=a.bearing=b.bearing;a._input.pitch=a.pitch=b.pitch;m.emit("plotly_relayout",q.getViewEdits(b))}v=!1}});t.on("wheel",function(){v=!0});t.on("mousemove",function(a){var b=q.div.getBoundingClientRect();a.clientX=a.point.x+
b.left;a.clientY=a.point.y+b.top;a.target.getBoundingClientRect=function(){return b};q.xaxis.p2c=function(){return a.lngLat.lng};q.yaxis.p2c=function(){return a.lngLat.lat};n.hover(m,a,q.id)});t.on("dragstart",r);t.on("zoomstart",r);t.on("dblclick",function(){var a=m._fullLayout[q.id];l.call("_storeDirectGUIEdit",m.layout,m._fullLayout._preGUI,q.getViewEdits(a));var b=q.viewInitial;t.setCenter(h(b.center));t.setZoom(b.zoom);t.setBearing(b.bearing);t.setPitch(b.pitch);b=q.getView();a._input.center=
a.center=b.center;a._input.zoom=a.zoom=b.zoom;a._input.bearing=a.bearing=b.bearing;a._input.pitch=a.pitch=b.pitch;m.emit("plotly_doubleclick",null);m.emit("plotly_relayout",q.getViewEdits(b))});q.clearSelect=function(){m._fullLayout._zoomlayer.selectAll(".select-outline").remove()};q.onClickInPanFn=function(a){return function(b){var c=m._fullLayout.clickmode;-1<c.indexOf("select")&&d(b.originalEvent,m,[q.xaxis],[q.yaxis],q.id,a);-1<c.indexOf("event")&&n.click(m,b.originalEvent)}}}};a.updateMap=function(a,
b,c,d){var e=this,f=e.map,k=b[this.id];e.rejectOnError(d);d=g(k.style);e.styleObj.id!==d.id?(e.styleObj=d,f.setStyle(d.style),f.once("styledata",function(){e.traceHash={};e.updateData(a);e.updateLayout(b);e.resolveOnRender(c)})):(e.updateData(a),e.updateLayout(b),e.resolveOnRender(c));this.gd._context._scrollZoom.mapbox?f.scrollZoom.enable():f.scrollZoom.disable()};a.updateData=function(a){var b=this.traceHash,c,d;for(d=0;d<a.length;d++){var e=a[d];var f=e[0].trace;(c=b[f.uid])?c.update(e):f._module&&
(b[f.uid]=f._module.plot(this,e))}e=Object.keys(b);d=0;a:for(;d<e.length;d++){var g=e[d];for(c=0;c<a.length;c++)if(f=a[c][0].trace,g===f.uid)continue a;c=b[g];c.dispose();delete b[g]}};a.updateLayout=function(a){var b=this.map,c=a[this.id];b.setCenter(h(c.center));b.setZoom(c.zoom);b.setBearing(c.bearing);b.setPitch(c.pitch);this.updateLayers(a);this.updateFramework(a);this.updateFx(a);this.map.resize()};a.resolveOnRender=function(a){var b=this.map;b.on("render",function A(){b.loaded()&&(b.off("render",
A),setTimeout(a,0))})};a.rejectOnError=function(a){function b(){a(Error(f.mapOnErrorMsg))}var c=this.map;c.once("error",b);c.once("style.error",b);c.once("source.error",b);c.once("tile.error",b);c.once("layer.error",b)};a.createFramework=function(a){var b=this,c=b.div=document.createElement("div");c.id=b.uid;c.style.position="absolute";b.container.appendChild(c);b.xaxis={_id:"x",c2p:function(a){return b.project(a).x}};b.yaxis={_id:"y",c2p:function(a){return b.project(a).y}};b.updateFramework(a)};
a.updateFx=function(a){function c(a){a=d.map.unproject(a);return[a.lng,a.lat]}var d=this,e=d.map,f=d.gd;if(!d.isStatic){var g=a.dragmode;d.dragOptions=b.extendDeep(d.dragOptions||{},{element:d.div,gd:f,plotinfo:{id:d.id,xaxis:d.xaxis,yaxis:d.yaxis,fillRangeItems:"select"===g?function(a,b){(a.range={})[d.id]=[c([b.xmin,b.ymin]),c([b.xmax,b.ymax])]}:function(a,b,e){(a.lassoPoints={})[d.id]=e.filtered.map(c)}},xaxes:[d.xaxis],yaxes:[d.yaxis],subplot:d.id});e.off("click",d.onClickInPanHandler);"select"===
g||"lasso"===g?(e.dragPan.disable(),e.on("zoomstart",d.clearSelect),d.dragOptions.prepFn=function(a,b,c){q(a,b,c,d.dragOptions,g)},u.init(d.dragOptions)):(e.dragPan.enable(),e.off("zoomstart",d.clearSelect),d.div.onmousedown=null,d.onClickInPanHandler=d.onClickInPanFn(d.dragOptions),e.on("click",d.onClickInPanHandler))}};a.updateFramework=function(a){var b=a[this.id].domain;a=a._size;var c=this.div.style;c.width=a.w*(b.x[1]-b.x[0])+"px";c.height=a.h*(b.y[1]-b.y[0])+"px";c.left=a.l+b.x[0]*a.w+"px";
c.top=a.t+(1-b.y[1])*a.h+"px";this.xaxis._offset=a.l+b.x[0]*a.w;this.xaxis._length=a.w*(b.x[1]-b.x[0]);this.yaxis._offset=a.t+(1-b.y[1])*a.h;this.yaxis._length=a.h*(b.y[1]-b.y[0])};a.updateLayers=function(a){a=a[this.id].layers;var b=this.layerList,c;if(a.length!==b.length){for(c=0;c<b.length;c++)b[c].dispose();b=this.layerList=[];for(c=0;c<a.length;c++)b.push(k(this,c,a[c]))}else for(c=0;c<a.length;c++)b[c].update(a[c])};a.destroy=function(){this.map&&(this.map.remove(),this.map=null,this.container.removeChild(this.div))};
a.toImage=function(){this.map.stop();return this.map.getCanvas().toDataURL()};a.setOptions=function(a,b,c){for(var d in c)this.map[b](a,d,c[d])};a.project=function(a){return this.map.project(new e.LngLat(a[0],a[1]))};a.getView=function(){var a=this.map,b=a.getCenter();return{center:{lon:b.lng,lat:b.lat},zoom:a.getZoom(),bearing:a.getBearing(),pitch:a.getPitch()}};a.getViewEdits=function(a){for(var b=this.id,c=["center","zoom","bearing","pitch"],d={},e=0;e<c.length;e++){var f=c[e];d[b+"."+f]=a[f]}return d}},
{"../../components/dragelement":595,"../../components/fx":616,"../../lib":700,"../../registry":829,"../cartesian/select":765,"./constants":802,"./layers":805,"./layout_attributes":806,"mapbox-gl":418}],809:[function(a,t,m){t.exports=function(a){a=a.editType;return{t:{valType:"number",dflt:0,editType:a},r:{valType:"number",dflt:0,editType:a},b:{valType:"number",dflt:0,editType:a},l:{valType:"number",dflt:0,editType:a},editType:a}}},{}],810:[function(a,t,m){function p(a,b){b.text("");b=b.append("a").attr({"xlink:xlink:href":"#",
"class":"link--impt link--embedview","font-weight":"bold"}).text(a._context.linkText+" "+String.fromCharCode(187));if(a._context.sendData)b.on("click",function(){C.sendDataToCloud(a)});else{var c=window.location.pathname.split("/"),d=window.location.search;b.attr({"xlink:xlink:show":"new","xlink:xlink:href":"/"+c[2].split(".")[0]+"/"+c[1]+d})}}function g(a,b){function c(a,b){l[b]=a;n[a]=1}function d(a,b){if(a&&"string"===typeof a&&!n[a])return c(a,b),!0}var e=b.length,f=[],g;for(g=0;g<a.length;g++){var k=
a[g]._fullInput;k!==h&&f.push(k);var h=k}a=f.length;var l=Array(e),n={};for(g=0;g<e;g++)h=b[g].uid,"number"===typeof h&&(h=String(h)),d(h,g)||g<a&&d(f[g].uid,g)||c(v.randstr(n),g);return l}function h(a,b){function d(a){for(var c=!0,d=0;d<b.length;d++){var e=b[d];g[e]||(a[e]?g[e]=a[e]:c=!1)}c&&(f=!0)}var e=a._context.locale;e||"en-US"===e;for(var f=!1,g={},k=0;2>k;k++){for(var h=a._context.locales,l=0;2>l;l++){if(h=(h[e]||{}).format)if(d(h),f)break;h=c.localeRegistry}l=e.split("-")[0];if(f||l===e)break;
e=l}f||d(c.localeRegistry.en.format);return g}function e(a){a=a.transforms;if(Array.isArray(a)&&a.length)for(var b=0;b<a.length;b++){var c=a[b];if((c=c._module||D[c.type])&&c.makesData)return!0}return!1}function n(a,b,c,d){for(var e=a.transforms,f=[a],g=0;g<e.length;g++){var k=e[g],h=D[k.type];h&&h.transform&&(f=h.transform(f,{transform:k,fullTrace:a,fullData:b,layout:c,fullLayout:d,transformIndex:g}))}return f}function b(a){var b=a.margin;a._size||(b=a._size={l:Math.round(b.l),r:Math.round(b.r),
t:Math.round(b.t),b:Math.round(b.b),p:Math.round(b.pad)},b.w=Math.round(a.width)-b.l-b.r,b.h=Math.round(a.height)-b.t-b.b);a._pushmargin||(a._pushmargin={});a._pushmarginIds||(a._pushmarginIds={})}function l(a,b,d){function e(a){if(a)for(;a.length;)a.shift()}function f(b){if(a._transitionData)return e(a._transitionData._interruptCallbacks),Promise.resolve().then(function(){if(d.redraw)return c.call("redraw",a)}).then(function(){a._transitioning=!1;a._transitioningWithDuration=!1;a.emit("plotly_transitioned",
[])}).then(b)}var g=!1,k=v.syncOrAsync([C.previousPromises,function(){if(a._transitionData){a._transitioning=!1;var b=a._transitionData._interruptCallbacks,c=Promise.resolve();if(b)for(;b.length;)c=c.then(b.shift());return c}},d.prepareFn,C.rehover,function(){a.emit("plotly_transitioning",[]);return new Promise(function(e){function k(){h++;return function(){l++;g||l!==h||f(e)}}a._transitioning=!0;0<b.duration&&(a._transitioningWithDuration=!0);a._transitionData._interruptCallbacks.push(function(){g=
!0});d.redraw&&a._transitionData._interruptCallbacks.push(function(){return c.call("redraw",a)});a._transitionData._interruptCallbacks.push(function(){a.emit("plotly_transitioninterrupted",[])});var h=0,l=0;d.runFn(k);setTimeout(k())})}],a);k&&k.then||(k=Promise.resolve());return k.then(function(){return a})}function u(a,b){for(var c=0;c<a.length;c++){var d=a[c];d.clearCalc();"multicategory"===d.type&&d.setupMultiCategory(b)}}function q(a){var b=a._fullLayout,c=b._visibleModules,d={},e,f;for(e=0;e<
c.length;e++){var g=c[e],k=g.crossTraceCalc;k&&(g=g.basePlotModule.name,d[g]?v.pushUnique(d[g],k):d[g]=[k])}for(f in d)if(k=d[f],g=b._subplots[f],Array.isArray(g))for(c=0;c<g.length;c++){var h=g[c],l="cartesian"===f?b._plots[h]:b[h];for(e=0;e<k.length;e++)k[e](a,l,h)}else for(e=0;e<k.length;e++)k[e](a)}var d=a("d3"),f=a("fast-isnumeric"),c=a("../registry"),k=a("../plot_api/plot_schema"),r=a("../plot_api/plot_template"),v=a("../lib"),z=a("../components/color"),A=a("../constants/numerical").BADNUM,
y=a("../plots/cartesian/axis_ids"),w=a("./animation_attributes"),x=a("./frame_attributes"),F=v.relinkPrivateKeys,B=v._,C=t.exports={};v.extendFlat(C,c);C.attributes=a("./attributes");C.attributes.type.values=C.allTypes;C.fontAttrs=a("./font_attributes");C.layoutAttributes=a("./layout_attributes");C.fontWeight="normal";var D=C.transformsRegistry;a=a("./command");C.executeAPICommand=a.executeAPICommand;C.computeAPICommandBindings=a.computeAPICommandBindings;C.manageCommandObserver=a.manageCommandObserver;
C.hasSimpleAPICommandBindings=a.hasSimpleAPICommandBindings;C.redrawText=function(a){a=v.getGraphDiv(a);if(!(a.data&&a.data[0]&&a.data[0].r))return new Promise(function(b){setTimeout(function(){c.getComponentMethod("annotations","draw")(a);c.getComponentMethod("legend","draw")(a);(a.calcdata||[]).forEach(function(a){a[0]&&a[0].t&&a[0].t.cb&&a[0].t.cb()});b(C.previousPromises(a))},300)})};C.resize=function(a){a=v.getGraphDiv(a);return new Promise(function(b,d){function e(a){a=window.getComputedStyle(a).display;
return!a||"none"===a}a&&!e(a)||d(Error("Resize must be passed a displayed plot div element."));a._redrawTimer&&clearTimeout(a._redrawTimer);a._redrawTimer=setTimeout(function(){if(!a.layout||a.layout.width&&a.layout.height||e(a))b(a);else{delete a.layout.width;delete a.layout.height;var d=a.changed;a.autoplay=!0;c.call("relayout",a,{autosize:!0}).then(function(){a.changed=d;b(a)})}},100)})};C.previousPromises=function(a){if((a._promises||[]).length)return Promise.all(a._promises).then(function(){a._promises=
[]})};C.addLinks=function(a){if(a._context.showLink||a._context.showSources){var b=a._fullLayout,c=v.ensureSingle(b._paper,"text","js-plot-link-container",function(a){a.style({"font-family":'"Open Sans", Arial, sans-serif',"font-size":"12px",fill:z.defaultLine,"pointer-events":"all"}).each(function(){var a=d.select(this);a.append("tspan").classed("js-link-to-tool",!0);a.append("tspan").classed("js-link-spacer",!0);a.append("tspan").classed("js-sourcelinks",!0)})}),e=c.node(),f={y:b._paper.attr("height")-
9};document.body.contains(e)&&e.getComputedTextLength()>=b.width-20?(f["text-anchor"]="start",f.x=5):(f["text-anchor"]="end",f.x=b._paper.attr("width")-7);c.attr(f);b=c.select(".js-link-to-tool");e=c.select(".js-link-spacer");c=c.select(".js-sourcelinks");a._context.showSources&&a._context.showSources(a);a._context.showLink&&p(a,b);e.text(b.text()&&c.text()?" - ":"")}};C.sendDataToCloud=function(a){a.emit("plotly_beforeexport");var b=(window.PLOTLYENV||{}).BASE_URL||a._context.plotlyServerURL,c=d.select(a).append("div").attr("id",
"hiddenform").style("display","none");b=c.append("form").attr({action:b+"/external",method:"post",target:"_blank"});b.append("input").attr({type:"text",name:"data"}).node().value=C.graphJson(a,!1,"keepdata");b.node().submit();c.remove();a.emit("plotly_afterexport");return!1};var G="days shortDays months shortMonths periods dateTime date time decimal thousands grouping currency".split(" "),H=["year","month","dayMonth","dayMonthYear"];C.supplyDefaults=function(a,e){e=e&&e.skipUpdateCalc;var f=a._fullLayout||
{};if(f._skipDefaults)delete f._skipDefaults;else{var k=a._fullLayout={},l=a.layout||{},n=a._fullData||[],r=a._fullData=[],q=a.data||[],m=a.calcdata||[],p=a._context||{};a._transitionData||C.createTransitionData(a);k._dfltTitle={plot:B(a,"Click to enter Plot title"),x:B(a,"Click to enter X axis title"),y:B(a,"Click to enter Y axis title"),colorbar:B(a,"Click to enter Colorscale title"),annotation:B(a,"new text")};k._traceWord=B(a,"trace");var u=h(a,G);k._mapboxAccessToken=p.mapboxAccessToken;if(f._initialAutoSizeIsDone){var t=
f.width,z=f.height;C.supplyLayoutGlobalDefaults(l,k,u);l.width||(k.width=t);l.height||(k.height=z);C.sanitizeMargins(k)}else C.supplyLayoutGlobalDefaults(l,k,u),t=!l.width||!l.height,z=k.autosize,p=p.autosizable,t&&(z||p)?C.plotAutoSize(a,l,k):t&&C.sanitizeMargins(k),!z&&t&&(l.width=k.width,l.height=k.height);t=k.separators;u.decimal=t.charAt(0);u.thousands=t.charAt(1);u=d.locale(u);k._d3locale=u;k._extraFormat=h(a,H);k._initialAutoSizeIsDone=!0;k._dataLength=q.length;k._modules=[];k._visibleModules=
[];k._basePlotModules=[];u=c.collectableSubplotTypes;t={};var w;if(!u)for(w in u=[],p=c.subplotsRegistry,p){var x=p[w].attr;if(x&&(u.push(w),Array.isArray(x)))for(z=0;z<x.length;z++)v.pushUnique(u,x[z])}for(w=0;w<u.length;w++)t[u[w]]=[];t=k._subplots=t;u=k._splomAxes={x:{},y:{}};z=k._splomSubplots={};k._splomGridDflt={};k._scatterStackOpts={};k._firstScatter={};k._alignmentOpts={};k._requestRangeslider={};k._traceUids=g(n,q);k._globalTransforms=(a._context||{}).globalTransforms;C.supplyDataDefaults(q,
r,l,k);w=Object.keys(u.x);u=Object.keys(u.y);if(1<w.length&&1<u.length){c.getComponentMethod("grid","sizeDefaults")(l,k);for(q=0;q<w.length;q++)v.pushUnique(t.xaxis,w[q]);for(q=0;q<u.length;q++)v.pushUnique(t.yaxis,u[q]);for(var A in z)v.pushUnique(t.cartesian,A)}k._has=C._hasPlotType.bind(k);if(n.length===r.length)for(q=0;q<r.length;q++)F(r[q],n[q]);C.supplyLayoutModuleDefaults(l,k,r,a._transitionData);a=k._visibleModules;A=[];for(q=0;q<a.length;q++)(l=a[q].crossTraceDefaults)&&v.pushUnique(A,l);
for(q=0;q<A.length;q++)A[q](r,k);c.getComponentMethod("colorscale","crossTraceDefaults")(r,k);k._hasOnlyLargeSploms=1===k._basePlotModules.length&&"splom"===k._basePlotModules[0].name&&15<w.length&&15<u.length&&0===k.shapes.length&&0===k.images.length;k._hasCartesian=k._has("cartesian");k._hasGeo=k._has("geo");k._hasGL3D=k._has("gl3d");k._hasGL2D=k._has("gl2d");k._hasTernary=k._has("ternary");k._hasPie=k._has("pie");C.linkSubplots(r,k,n,f);C.cleanPlot(r,k,n,f);F(k,f);k._preGUI||(k._preGUI={});k._tracePreGUI||
(k._tracePreGUI={});f=k._tracePreGUI;n={};for(var y in f)n[y]="old";for(q=0;q<r.length;q++)y=r[q]._fullInput.uid,n[y]||(f[y]={}),n[y]="new";for(y in n)"old"===n[y]&&delete f[y];b(k);c.getComponentMethod("rangeslider","makeData")(k);e||m.length!==r.length||C.supplyDefaultsUpdateCalc(m,r)}};C.supplyDefaultsUpdateCalc=function(a,b){for(var c=0;c<b.length;c++){var d=b[c],e=(a[c]||[])[0];if(e&&e.trace){var f=e.trace;if(f._hasCalcTransform){var g=f._arrayAttrs,k;for(k=0;k<g.length;k++){var h=g[k];var l=
v.nestedProperty(f,h).get().slice();v.nestedProperty(d,h).set(l)}}e.trace=d}}};C.createTransitionData=function(a){a._transitionData||(a._transitionData={});a._transitionData._frames||(a._transitionData._frames=[]);a._transitionData._frameHash||(a._transitionData._frameHash={});a._transitionData._counter||(a._transitionData._counter=0);a._transitionData._interruptCallbacks||(a._transitionData._interruptCallbacks=[])};C._hasPlotType=function(a){var b,d=this._basePlotModules||[];for(b=0;b<d.length;b++)if(d[b].name===
a)return!0;d=this._modules||[];for(b=0;b<d.length;b++){var e=d[b].name;if(e===a||(e=c.modules[e])&&e.categories[a])return!0}return!1};C.cleanPlot=function(a,b,c,d){var e,f=d._basePlotModules||[];for(e=0;e<f.length;e++){var g=f[e];g.clean&&g.clean(a,b,c,d)}e=d._has&&d._has("gl");b=b._has&&b._has("gl");e&&!b&&void 0!==d._glcontainer&&(d._glcontainer.selectAll(".gl-canvas").remove(),d._glcontainer.selectAll(".no-webgl").remove(),d._glcanvas=null);f=!!d._infolayer;e=0;a:for(;e<c.length;e++){g=c[e].uid;
for(b=0;b<a.length;b++)if(g===a[b].uid)continue a;f&&d._infolayer.select(".cb"+g).remove()}d._zoomlayer&&d._zoomlayer.selectAll(".select-outline").remove()};C.linkSubplots=function(a,b,c,d){var e=d._plots||{},f=b._plots={};c=b._subplots;d={_fullData:a,_fullLayout:b};var g=c.cartesian.concat(c.gl2d||[]);for(c=0;c<g.length;c++){var k=g[c];var h=e[k],l=y.getFromId(d,k,"x"),n=y.getFromId(d,k,"y");h?h=f[k]=h:(h=f[k]={},h.id=k);l._counterAxes.push(n._id);n._counterAxes.push(l._id);l._subplotsWith.push(k);
n._subplotsWith.push(k);h.xaxis=l;h.yaxis=n;h._hasClipOnAxisFalse=!1;for(k=0;k<a.length;k++)if(l=a[k],l.xaxis===h.xaxis._id&&l.yaxis===h.yaxis._id&&!1===l.cliponaxis){h._hasClipOnAxisFalse=!0;break}}a=y.list(d,null,!0);for(c=0;c<a.length;c++)e=a[c],f=null,e.overlaying&&(f=y.getFromId(d,e.overlaying))&&f.overlaying&&(e.overlaying=!1,f=null),e._mainAxis=f||e,f&&(e.domain=f.domain.slice()),e._anchorAxis="free"===e.anchor?null:y.getFromId(d,e.anchor);for(c=0;c<a.length;c++){e=a[c];e._counterAxes.sort(y.idSort);
e._subplotsWith.sort(v.subplotSort);d=e;n=b;f={_fullLayout:n};g="x"===e._id.charAt(0);var r=e._mainAxis._anchorAxis;l=k=h="";r&&(l=r._mainAxis._id,h=g?e._id+l:l+e._id);if(!h||!n._plots[h])for(h="",n=e._counterAxes,r=0;r<n.length;r++){var q=n[r],m=g?e._id+q:q+e._id;k||(k=m);q=y.getFromId(f,q);if(l&&q.overlaying===l){h=m;break}}d._mainSubplot=h||k}};C.clearExpandedTraceDefaultColors=function(a){function b(a,b,c,f){d[f]=b;d.length=f+1;"color"===a.valType&&void 0===a.dflt&&e.push(d.join("."))}var c;var d=
[];var e=a._module._colorAttrs;e||(a._module._colorAttrs=e=[],k.crawl(a._module.attributes,b));for(c=0;c<e.length;c++)v.nestedProperty(a,"_input."+e[c]).get()||v.nestedProperty(a,e[c]).set(null)};C.supplyDataDefaults=function(a,b,d,e){function f(a){b.push(a);var c=a._module;c&&(v.pushUnique(g,c),!0===a.visible&&v.pushUnique(k,c),v.pushUnique(h,a._module.basePlotModule),l++,!1!==a._input.visible&&q++)}var g=e._modules,k=e._visibleModules,h=e._basePlotModules,l=0,q=0,m;e._transformModules=[];var p=
{},u=[],t=r.traceTemplater((d.template||{}).data||{});for(m=0;m<a.length;m++){var z=a[m];var w=t.newTrace(z);w.uid=e._traceUids[m];C.supplyTraceDefaults(z,w,q,e,m);w.index=m;w._input=z;w._expandedIndex=l;if(w.transforms&&w.transforms.length)for(var x=!1!==z.visible&&!1===w.visible,A=n(w,b,d,e),y=0;y<A.length;y++){var B=A[y],E={_template:w._template,type:w.type,uid:w.uid+y};x&&!1===B.visible&&delete B.visible;C.supplyTraceDefaults(B,E,l,e,m);F(E,B);E.index=m;E._input=z;E._fullInput=w;E._expandedIndex=
l;E._expandedInput=B;f(E)}else w._fullInput=w,w._expandedInput=w,f(w);c.traceIs(w,"carpetAxis")&&(p[w.carpet]=w);c.traceIs(w,"carpetDependent")&&u.push(m)}for(m=0;m<u.length;m++)w=b[u[m]],w.visible&&(a=p[w.carpet],(w._carpet=a)&&a.visible?(w.xaxis=a.xaxis,w.yaxis=a.yaxis):w.visible=!1)};C.supplyAnimationDefaults=function(a){a=a||{};var b,c={};v.coerce(a||{},c,w,"mode",void 0);v.coerce(a||{},c,w,"direction",void 0);v.coerce(a||{},c,w,"fromcurrent",void 0);if(Array.isArray(a.frame))for(c.frame=[],b=
0;b<a.frame.length;b++)c.frame[b]=C.supplyAnimationFrameDefaults(a.frame[b]||{});else c.frame=C.supplyAnimationFrameDefaults(a.frame||{});if(Array.isArray(a.transition))for(c.transition=[],b=0;b<a.transition.length;b++)c.transition[b]=C.supplyAnimationTransitionDefaults(a.transition[b]||{});else c.transition=C.supplyAnimationTransitionDefaults(a.transition||{});return c};C.supplyAnimationFrameDefaults=function(a){var b={};v.coerce(a||{},b,w.frame,"duration",void 0);v.coerce(a||{},b,w.frame,"redraw",
void 0);return b};C.supplyAnimationTransitionDefaults=function(a){var b={};v.coerce(a||{},b,w.transition,"duration",void 0);v.coerce(a||{},b,w.transition,"easing",void 0);return b};C.supplyFrameDefaults=function(a){function b(b,d){return v.coerce(a,c,x,b,d)}var c={};b("group");b("name");b("traces");b("baseframe");b("data");b("layout");return c};C.supplyTraceDefaults=function(a,b,d,e,f){function g(c,d){return v.coerce(a,b,C.attributes,c,d)}function k(a,b,c){n&&a in n.attributes&&void 0===n.attributes[a]||
(c&&"function"===typeof c?c():g(a,b))}var h=e.colorway||z.defaults,l=h[d%h.length];d=g("visible");g("type");g("name",e._traceWord+" "+f);g("uirevision",e.uirevision);var n=C.getModule(b);if(b._module=n){h=n.basePlotModule;var r=h.attr,q=h.attributes;if(r&&q){var m=e._subplots,p="";if("gl2d"!==h.name||d){if(Array.isArray(r))for(f=0;f<r.length;f++){var u=r[f],t=v.coerce(a,b,q,u);m[u]&&v.pushUnique(m[u],t);p+=t}else p=v.coerce(a,b,q,r);m[h.name]&&v.pushUnique(m[h.name],p)}}}d&&(g("customdata"),g("ids"),
c.traceIs(b,"showLegend")?(b._dfltShowLegend=!0,g("showlegend"),g("legendgroup")):b._dfltShowLegend=!1,k("hoverlabel","",function(){c.getComponentMethod("fx","supplyDefaults")(a,b,l,e)}),n&&(n.supplyDefaults(a,b,l,e),b.hovertemplate||v.coerceHoverinfo(a,b,e)),c.traceIs(b,"noOpacity")||g("opacity"),c.traceIs(b,"notLegendIsolatable")&&(b.visible=!!b.visible),n&&n.selectPoints&&g("selectedpoints"),C.supplyTransformDefaults(a,b,e));return b};C.hasMakesDataTransform=e;C.supplyTransformDefaults=function(a,
b,c){if(b._length||e(a)){var d=c._globalTransforms||[],f=c._transformModules||[];if(Array.isArray(a.transforms)||0!==d.length){d=d.concat(a.transforms||[]);for(var g=b.transforms=[],k=0;k<d.length;k++){var h=d[k],l=h.type,n=D[l],r=!(h._module&&h._module===n),q=n&&"function"===typeof n.transform;n||v.warn("Unrecognized transform type "+l+".");n&&n.supplyDefaults&&(r||q)?(h=n.supplyDefaults(h,b,c,a),h.type=l,h._module=n,v.pushUnique(f,n)):h=v.extendFlat({},h);g.push(h)}}}};C.supplyLayoutGlobalDefaults=
function(a,b,d){function e(c,d){return v.coerce(a,b,C.layoutAttributes,c,d)}var f=a.template;v.isPlainObject(f)&&(b.template=f,b._template=f.layout,b._dataTemplate=f.data);f=v.coerceFont(e,"font");e("title.text",b._dfltTitle.plot);v.coerceFont(e,"title.font",{family:f.family,size:Math.round(1.4*f.size),color:f.color});e("title.xref");e("title.yref");e("title.x");e("title.y");e("title.xanchor");e("title.yanchor");e("title.pad.t");e("title.pad.r");e("title.pad.b");e("title.pad.l");e("autosize",!(a.width&&
a.height));e("width");e("height");e("margin.l");e("margin.r");e("margin.t");e("margin.b");e("margin.pad");e("margin.autoexpand");a.width&&a.height&&C.sanitizeMargins(b);c.getComponentMethod("grid","sizeDefaults")(a,b);e("paper_bgcolor");e("separators",d.decimal+d.thousands);e("hidesources");e("colorway");e("datarevision");d=e("uirevision");e("editrevision",d);e("selectionrevision",d);e("modebar.orientation");e("modebar.bgcolor",z.addOpacity(b.paper_bgcolor,.5));f=z.contrast(z.rgb(b.modebar.bgcolor));
e("modebar.color",z.addOpacity(f,.3));e("modebar.activecolor",z.addOpacity(f,.7));e("modebar.uirevision",d);e("meta");v.isPlainObject(a.transition)&&(e("transition.duration"),e("transition.easing"),e("transition.ordering"));c.getComponentMethod("calendars","handleDefaults")(a,b,"calendar");c.getComponentMethod("fx","supplyLayoutGlobalDefaults")(a,b,e)};C.plotAutoSize=function(a,b,c){var d=a._context||{},e=d.frameMargins,g;(g=v.isPlotDiv(a))&&a.emit("plotly_autosize");d.fillFrame?(d=window.innerWidth,
g=window.innerHeight,document.body.style.overflow="hidden"):(g=g?window.getComputedStyle(a):{},d=parseFloat(g.width)||parseFloat(g.maxWidth)||c.width,g=parseFloat(g.height)||parseFloat(g.maxHeight)||c.height,f(e)&&0<e&&(e=1-2*e,d=Math.round(e*d),g=Math.round(e*g)));e=C.layoutAttributes.width.min;var k=C.layoutAttributes.height.min;d<e&&(d=e);g<k&&(g=k);e=!b.width&&1<Math.abs(c.width-d);if((b=!b.height&&1<Math.abs(c.height-g))||e)e&&(c.width=d),b&&(c.height=g);a._initialAutoSize||(a._initialAutoSize=
{width:d,height:g});C.sanitizeMargins(c)};C.supplyLayoutModuleDefaults=function(a,b,d,e){var f=c.componentsRegistry,g=b._basePlotModules,k;var h=c.subplotsRegistry.cartesian;for(k in f){var l=f[k];l.includeBasePlot&&l.includeBasePlot(a,b)}g.length||g.push(h);b._has("cartesian")&&(c.getComponentMethod("grid","contentDefaults")(a,b),h.finalizeSubplots(a,b));for(var n in b._subplots)b._subplots[n].sort(v.subplotSort);for(h=0;h<g.length;h++)l=g[h],l.supplyLayoutDefaults&&l.supplyLayoutDefaults(a,b,d);
g=b._modules;for(h=0;h<g.length;h++)l=g[h],l.supplyLayoutDefaults&&l.supplyLayoutDefaults(a,b,d);g=b._transformModules;for(h=0;h<g.length;h++)l=g[h],l.supplyLayoutDefaults&&l.supplyLayoutDefaults(a,b,d,e);for(k in f)l=f[k],l.supplyLayoutDefaults&&l.supplyLayoutDefaults(a,b,d)};C.purge=function(a){var b=a._fullLayout||{};void 0!==b._glcontainer&&(b._glcontainer.selectAll(".gl-canvas").remove(),b._glcontainer.remove(),b._glcanvas=null);void 0!==b._geocontainer&&b._geocontainer.remove();b._modeBar&&
b._modeBar.destroy();a._transitionData&&(a._transitionData._interruptCallbacks&&(a._transitionData._interruptCallbacks.length=0),a._transitionData._animationRaf&&window.cancelAnimationFrame(a._transitionData._animationRaf));v.clearThrottle();v.clearResponsive(a);delete a.data;delete a.layout;delete a._fullData;delete a._fullLayout;delete a.calcdata;delete a.framework;delete a.empty;delete a.fid;delete a.undoqueue;delete a.undonum;delete a.autoplay;delete a.changed;delete a._promises;delete a._redrawTimer;
delete a._hmlumcount;delete a._hmpixcount;delete a._transitionData;delete a._transitioning;delete a._initialAutoSize;delete a._transitioningWithDuration;delete a._dragging;delete a._dragged;delete a._hoverdata;delete a._snapshotInProgress;delete a._editing;delete a._replotPending;delete a._mouseDownTime;delete a._legendMouseDownTime;a.removeAllListeners&&a.removeAllListeners()};C.style=function(a){var b=a._fullLayout._visibleModules,c=[],d;for(d=0;d<b.length;d++){var e=b[d];e.style&&v.pushUnique(c,
e.style)}for(d=0;d<c.length;d++)c[d](a)};C.sanitizeMargins=function(a){if(a&&a.margin){var b=a.width,c=a.height;a=a.margin;var d=c-(a.t+a.b);0>b-(a.l+a.r)&&(b=(b-1)/(a.l+a.r),a.l=Math.floor(b*a.l),a.r=Math.floor(b*a.r));0>d&&(b=(c-1)/(a.t+a.b),a.t=Math.floor(b*a.t),a.b=Math.floor(b*a.b))}};C.clearAutoMarginIds=function(a){a._fullLayout._pushmarginIds={}};C.allowAutoMargin=function(a,b){a._fullLayout._pushmarginIds[b]=1};C.autoMargin=function(a,b,c){var d=a._fullLayout,e=d._pushmargin,f=d._pushmarginIds;
if(!1!==d.margin.autoexpand){if(c){var g=c.pad;void 0===g&&(g=d.margin,g=Math.min(12,g.l,g.r,g.t,g.b));c.l+c.r>.5*d.width&&(c.l=c.r=0);c.b+c.t>.5*d.height&&(c.b=c.t=0);e[b]={l:{val:void 0!==c.xl?c.xl:c.x,size:c.l+g},r:{val:void 0!==c.xr?c.xr:c.x,size:c.r+g},b:{val:void 0!==c.yb?c.yb:c.y,size:c.b+g},t:{val:void 0!==c.yt?c.yt:c.y,size:c.t+g}};f[b]=1}else delete e[b],delete f[b];d._replotting||C.doAutoMargin(a)}};C.doAutoMargin=function(a){var d=a._fullLayout;d._size||(d._size={});b(d);var e=d._size,
g=JSON.stringify(e),k=d.margin,h=k.l,l=k.r,n=k.t,r=k.b,q=d.width,m=d.height,p=d._pushmargin,u=d._pushmarginIds;if(!1!==d.margin.autoexpand){for(var t in p)u[t]||delete p[t];p.base={l:{val:0,size:h},r:{val:1,size:l},t:{val:1,size:n},b:{val:0,size:r}};for(var v in p){t=p[v].l||{};var z=p[v].b||{};u=t.val;t=t.size;var w=z.val;z=z.size;for(var x in p){if(f(t)&&p[x].r){var A=p[x].r.val,y=p[x].r.size;if(A>u){var B=(t*A+(y-q)*u)/(A-u);A=(y*(1-u)+(t-q)*(1-A))/(A-u);0<=B&&0<=A&&0<q-(B+A)&&B+A>h+l&&(h=B,l=
A)}}f(z)&&p[x].t&&(A=p[x].t.val,y=p[x].t.size,A>w&&(B=(z*A+(y-m)*w)/(A-w),A=(y*(1-w)+(z-m)*(1-A))/(A-w),0<=B&&0<=A&&0<m-(A+B)&&B+A>r+n&&(r=B,n=A)))}}}e.l=Math.round(h);e.r=Math.round(l);e.t=Math.round(n);e.b=Math.round(r);e.p=Math.round(k.pad);e.w=Math.round(q)-e.l-e.r;e.h=Math.round(m)-e.t-e.b;if(!d._replotting&&"{}"!==g&&g!==JSON.stringify(d._size))return"_redrawFromAutoMarginCount"in d?d._redrawFromAutoMarginCount++:d._redrawFromAutoMarginCount=1,c.call("plot",a)};C.graphJson=function(a,b,c,d,
e){function f(a){if("function"===typeof a)return null;if(v.isPlainObject(a)){var b={},d;for(d in a)if("function"!==typeof a[d]&&-1===["_","["].indexOf(d.charAt(0))){if("keepdata"===c){if("src"===d.substr(d.length-3))continue}else if("keepstream"===c){var e=a[d+"src"];if("string"===typeof e&&0<e.indexOf(":")&&!v.isPlainObject(a.stream))continue}else if("keepall"!==c&&(e=a[d+"src"],"string"===typeof e&&0<e.indexOf(":")))continue;b[d]=f(a[d])}return b}return Array.isArray(a)?a.map(f):v.isTypedArray(a)?
v.simpleMap(a,v.identity):v.isJSDate(a)?v.ms2DateTimeLocal(+a):a}(e&&b&&!a._fullData||e&&!b&&!a._fullLayout)&&C.supplyDefaults(a);var g=e?a._fullLayout:a.layout,k=(a._transitionData||{})._frames;e={data:((e?a._fullData:a.data)||[]).map(function(a){a=f(a);b&&delete a.fit;return a})};b||(e.layout=f(g));a.framework&&a.framework.isPolar&&(e=a.framework.getConfig());k&&(e.frames=f(k));return"object"===d?e:JSON.stringify(e)};C.modifyFrames=function(a,b){var c=a._transitionData._frames,d=a._transitionData._frameHash;
for(a=0;a<b.length;a++){var e=b[a];switch(e.type){case "replace":var f=e.value;var g=(c[e.index]||{}).name,k=f.name;c[e.index]=d[k]=f;k!==g&&(delete d[g],d[k]=f);break;case "insert":f=e.value;d[f.name]=f;c.splice(e.index,0,f);break;case "delete":f=c[e.index],delete d[f.name],c.splice(e.index,1)}}return Promise.resolve()};C.computeFrame=function(a,b){var c=a._transitionData._frameHash,d;if(!b)throw Error("computeFrame must be given a string frame name");b=c[b.toString()];if(!b)return!1;a=[b];for(d=
[b.name];b.baseframe&&(b=c[b.baseframe.toString()])&&-1===d.indexOf(b.name);)a.push(b),d.push(b.name);for(var e={};b=a.pop();)if(b.layout&&(e.layout=C.extendLayout(e.layout,b.layout)),b.data){e.data||(e.data=[]);d=b.traces;if(!d)for(d=[],c=0;c<b.data.length;c++)d[c]=c;e.traces||(e.traces=[]);for(c=0;c<b.data.length;c++){var f=d[c];if(void 0!==f&&null!==f){var g=e.traces.indexOf(f);-1===g&&(g=e.data.length,e.traces[g]=f);e.data[g]=C.extendTrace(e.data[g],b.data[c])}}}return e};C.recomputeFrameHash=
function(a){var b=a._transitionData._frameHash={};a=a._transitionData._frames;for(var c=0;c<a.length;c++){var d=a[c];d&&d.name&&(b[d.name]=d)}};C.extendObjectWithContainers=function(a,b,c){b=v.extendDeepNoArrays({},b||{});var d=v.expandObjectPaths(b);var e={};if(c&&c.length)for(b=0;b<c.length;b++){var f=v.nestedProperty(d,c[b]);var g=f.get();void 0===g?v.nestedProperty(e,c[b]).set(null):(f.set(null),v.nestedProperty(e,c[b]).set(g))}a=v.extendDeepNoArrays(a||{},d);if(c&&c.length)for(b=0;b<c.length;b++)if(f=
v.nestedProperty(e,c[b]),d=f.get()){g=v.nestedProperty(a,c[b]);var k=g.get();Array.isArray(k)||(k=[],g.set(k));for(f=0;f<d.length;f++){var h=d[f];k[f]=null===h?null:C.extendObjectWithContainers(k[f],h)}g.set(k)}return a};C.dataArrayContainers=["transforms","dimensions"];C.layoutArrayContainers=c.layoutArrayContainers;C.extendTrace=function(a,b){return C.extendObjectWithContainers(a,b,C.dataArrayContainers)};C.extendLayout=function(a,b){return C.extendObjectWithContainers(a,b,C.layoutArrayContainers)};
C.transition=function(a,b,c,d,e,f){e={redraw:e.redraw};var g=[],k=[];e.prepareFn=function(){var e=Array.isArray(b)?b.length:0;e=d.slice(0,e);for(var f=0;f<e.length;f++){var h=e[f],l=a._fullData[h]._module;l&&(l.animatable&&g.push(h),a.data[e[f]]=C.extendTrace(a.data[e[f]],b[f]))}e=v.expandObjectPaths(v.extendDeepNoArrays({},c));f=/^[xy]axis[0-9]*$/;for(var n in e)f.test(n)&&delete e[n].range;C.extendLayout(a.layout,e);delete a.calcdata;C.supplyDefaults(a);C.doCalcdata(a);if(n=v.expandObjectPaths(c)){e=
a._fullLayout._plots;for(var r in e){f=e[r];h=f.xaxis;l=f.yaxis;var q=h.range.slice(),m=l.range.slice(),p;Array.isArray(n[h._name+".range"])?p=n[h._name+".range"].slice():Array.isArray((n[h._name]||{}).range)&&(p=n[h._name].range.slice());var u;Array.isArray(n[l._name+".range"])?u=n[l._name+".range"].slice():Array.isArray((n[l._name]||{}).range)&&(u=n[l._name].range.slice());var t;q&&p&&(q[0]!==p[0]||q[1]!==p[1])&&(t={xr0:q,xr1:p});var z;m&&u&&(m[0]!==u[0]||m[1]!==u[1])&&(z={yr0:m,yr1:u});(t||z)&&
k.push(v.extendFlat({plotinfo:f},t,z))}}return Promise.resolve()};e.runFn=function(b){var d=a._fullLayout._basePlotModules;var e=k.length;var h;if(c)for(h=0;h<d.length;h++)d[h].transitionAxes&&d[h].transitionAxes(a,k,f,b);e?(e=v.extendFlat({},f),e.duration=0,g=null):e=f;for(h=0;h<d.length;h++)d[h].plot(a,g,e,b)};return l(a,f,e)};C.transitionFromReact=function(a,b,c,d){var e=a._fullLayout,f=e.transition,g={},k=[];g.prepareFn=function(){var a=e._plots;g.redraw=!1;"some"===b.anim&&(g.redraw=!0);"some"===
c.anim&&(g.redraw=!0);for(var f in a){var h=a[f],l=h.xaxis,n=h.yaxis,r=d[l._name].range.slice(),q=d[n._name].range.slice(),m=l.range.slice(),p=n.range.slice();l.setScale();n.setScale();if(r[0]!==m[0]||r[1]!==m[1])var u={xr0:r,xr1:m};if(q[0]!==p[0]||q[1]!==p[1])var t={yr0:q,yr1:p};(u||t)&&k.push(v.extendFlat({plotinfo:h},u,t))}return Promise.resolve()};g.runFn=function(c){function d(){for(var b=0;b<h.length;b++)h[b].transitionAxes&&h[b].transitionAxes(a,k,l,c)}function e(){for(var b=0;b<h.length;b++)h[b].plot(a,
r,n,c)}for(var g=a._fullData,h=a._fullLayout._basePlotModules,l,n,r,q=[],m=0;m<g.length;m++)q.push(m);k.length&&b.anim?"traces first"===f.ordering?(l=v.extendFlat({},f,{duration:0}),r=q,n=f,e(),setTimeout(d,f.duration)):(l=f,r=null,n=v.extendFlat({},f,{duration:0}),d(),e()):k.length?(l=f,d()):b.anim&&(r=q,n=f,e())};return l(a,f,g)};C.doCalcdata=function(a,b){function d(b,c){p=f[b];h=p._module;if(!!h.isContainer===c){c=[];if(!0===p.visible){delete p._indexToPoints;var d=p.transforms||[];for(n=d.length-
1;0<=n;n--)if(d[n].enabled){p._indexToPoints=d[n]._indexToPoints;break}h&&h.calc&&(c=h.calc(a,p))}Array.isArray(c)&&c[0]||(c=[{x:A,y:A}]);c[0].t||(c[0].t={});c[0].trace=p;r[b]=c}}var e=y.list(a),f=a._fullData,g=a._fullLayout,h,l,n,r=Array(f.length),m=(a.calcdata||[]).slice(0);a.calcdata=r;g._numBoxes=0;g._numViolins=0;g._violinScaleGroupStats={};a._hmpixcount=0;a._hmlumcount=0;g._piecolormap={};g._sunburstcolormap={};for(l=0;l<f.length;l++)Array.isArray(b)&&-1===b.indexOf(l)&&(r[l]=m[l]);for(l=0;l<
f.length;l++){var p=f[l];p._arrayAttrs=k.findArrayAttributes(p);p._extremes={}}b=g._subplots.polar||[];for(l=0;l<b.length;l++)e.push(g[b[l]].radialaxis,g[b[l]].angularaxis);u(e,f);g=!1;for(l=0;l<f.length;l++)if(p=f[l],!0===p.visible&&p.transforms)for((h=p._module)&&h.calc&&(b=h.calc(a,p),b[0]&&b[0].t&&b[0].t._scene&&delete b[0].t._scene.dirty),n=0;n<p.transforms.length;n++)b=p.transforms[n],(h=D[b.type])&&h.calcTransform&&(g=p._hasCalcTransform=!0,h.calcTransform(a,p,b));g&&u(e,f);for(l=0;l<f.length;l++)d(l,
!0);for(l=0;l<f.length;l++)d(l,!1);q(a);c.getComponentMethod("fx","calc")(a);c.getComponentMethod("errorbars","calc")(a)};C.rehover=function(a){a._fullLayout._rehover&&a._fullLayout._rehover()};C.generalUpdatePerTraceModule=function(a,b,c,d){var e=b.traceHash,f={},g;for(g=0;g<c.length;g++){var k=c[g],h=k[0].trace;h.visible&&(f[h.type]=f[h.type]||[],f[h.type].push(k))}for(var l in e)f[l]||(c=e[l][0],c[0].trace.visible=!1,f[l]=[c]);for(var n in f)e=f[n],e[0][0].trace._module.plot(a,b,v.filterVisible(e),
d);b.traceHash=f}},{"../components/color":577,"../constants/numerical":677,"../lib":700,"../plot_api/plot_schema":737,"../plot_api/plot_template":738,"../plots/cartesian/axis_ids":751,"../registry":829,"./animation_attributes":743,"./attributes":745,"./command":772,"./font_attributes":774,"./frame_attributes":775,"./layout_attributes":801,d3:154,"fast-isnumeric":221}],811:[function(a,t,m){t.exports={attr:"subplot",name:"polar",axisNames:["angularaxis","radialaxis"],axisName2dataArray:{angularaxis:"theta",
radialaxis:"r"},layerNames:"draglayer plotbg backplot angular-grid radial-grid frontplot angular-line radial-line angular-axis radial-axis".split(" "),radialDragBoxSize:50,angularDragBoxSize:30,cornerLen:25,cornerHalfWidth:2,MINDRAG:8,MINZOOM:20,OFFEDGE:20}},{}],812:[function(a,t,m){function p(a,b,d,f){var c=f[0];f=f[1];var g=e(Math.sin(b)-Math.sin(a));a=e(Math.cos(b)-Math.cos(a));d=Math.tan(d);var k=e(1/d),h=g/a;b=f-h*c;k?g&&a?(g=b/(d-h),c=d*g):a?(g=f*k,c=f):(g=c,c*=d):g&&a?(g=0,c=b):a?(g=0,c=f):
g=c=NaN;return[g,c]}function g(a,d,e,g){function c(b,c,d){return p(b,c,d,[a*Math.cos(b),a*Math.sin(b)])}var k=g.length,h=[];var l=u(g,function(a){return q(a,[d,e])?f(a,d):Infinity});var n=c(g[l],g[b.mod(l-1,k)],d);h.push(n);for(n=0;n<k;l++,n++){var r=g[b.mod(l,k)];if(!q(r,[d,e]))break;h.push([a*Math.cos(r),a*Math.sin(r)])}l=u(g,function(a){return q(a,[d,e])?f(a,e):Infinity});g=c(g[l],g[b.mod(l+1,k)],e);h.push(g);h.push([0,0]);h.push(h[0].slice());return h}function h(a,d,e,f){if(b.isFullCircle([d,
e])){d=f.length;e=Array(d+1);var c;for(c=0;c<d;c++){var k=f[c];e[c]=[a*Math.cos(k),a*Math.sin(k)]}e[c]=e[0].slice();a=e}else a=g(a,d,e,f);return a}function e(a){return 1E-10<Math.abs(a)?a:0}function n(a,b,d){b=b||0;d=d||0;for(var c=a.length,e=Array(c),f=0;f<c;f++){var g=a[f];e[f]=[b+g[0],d-g[1]]}return e}var b=a("../../lib"),l=a("../../lib/polygon").tester,u=b.findIndexOfMin,q=b.isAngleInsideSector,d=b.angleDelta,f=b.angleDist;t.exports={isPtInsidePolygon:function(a,b,d,e,f){if(!q(b,e))return!1;if(d[0]<
d[1]){var c=d[0];d=d[1]}else c=d[1],d=d[0];c=l(h(c,e[0],e[1],f));e=l(h(d,e[0],e[1],f));a=[a*Math.cos(b),a*Math.sin(b)];return e.contains(a)&&!c.contains(a)},findPolygonOffset:function(a,b,d,e){var c=Infinity,f=Infinity;a=h(a,b,d,e);for(b=0;b<a.length;b++)d=a[b],c=Math.min(c,d[0]),f=Math.min(f,-d[1]);return[c,f]},findEnclosingVertexAngles:function(a,e){var c=u(e,function(b){b=d(b,a);return 0<b?b:Infinity}),f=b.mod(c+1,e.length);return[e[c],e[f]]},findIntersectionXY:p,findXYatLength:function(a,b,d,
e){var c=-b*d,f=b*b+1,g=2*(b*c-d);d=Math.sqrt(g*g-4*f*(c*c+d*d-a*a));a=(-g+d)/(2*f);f=(-g-d)/(2*f);return[[a,b*a+c+e],[f,b*f+c+e]]},clampTiny:e,pathPolygon:function(a,b,d,e,f,g){a=h(a,b,d,e);return"M"+n(a,f,g).join("L")},pathPolygonAnnulus:function(a,b,d,e,f,g,l){if(a<b){var c=a;a=b}else c=b;c=n(h(c,d,e,f),g,l);return"M"+n(h(a,d,e,f),g,l).reverse().join("L")+"M"+c.join("L")}}},{"../../lib":700,"../../lib/polygon":712}],813:[function(a,t,m){var p=a("../get_data").getSubplotCalcData,g=a("../../lib").counterRegex,
h=a("./polar"),e=a("./constants");m=e.attr;var n=e.name;g=g(n);e={};e[m]={valType:"subplotid",dflt:n,editType:"calc"};t.exports={attr:m,name:n,idRoot:n,idRegex:g,attrRegex:g,attributes:e,layoutAttributes:a("./layout_attributes"),supplyLayoutDefaults:a("./layout_defaults"),plot:function(a){for(var b=a._fullLayout,e=a.calcdata,g=b._subplots[n],d=0;d<g.length;d++){var f=g[d],c=p(e,n,f),k=b[f]._subplot;k||(k=h(a,f),b[f]._subplot=k);k.plot(c,b,a._promises)}},clean:function(a,e,g,h){a=h._subplots[n]||[];
g=h._has&&h._has("gl");var b=e._has&&e._has("gl");g=g&&!b;for(b=0;b<a.length;b++){var f=a[b],c=h[f]._subplot;if(!e[f]&&c){c.framework.remove();c.layers["radial-axis-title"].remove();for(var k in c.clipPaths)c.clipPaths[k].remove()}g&&c._scene&&(c._scene.destroy(),c._scene=null)}},toSVG:a("../cartesian").toSVG}},{"../../lib":700,"../cartesian":759,"../get_data":784,"./constants":811,"./layout_attributes":814,"./layout_defaults":815,"./polar":822}],814:[function(a,t,m){m=a("../../components/color/attributes");
var p=a("../cartesian/layout_attributes"),g=a("../domain").attributes,h=a("../../lib").extendFlat,e=a("../../plot_api/edit_types").overrideAll;a=e({color:p.color,showline:h({},p.showline,{dflt:!0}),linecolor:p.linecolor,linewidth:p.linewidth,showgrid:h({},p.showgrid,{dflt:!0}),gridcolor:p.gridcolor,gridwidth:p.gridwidth},"plot","from-root");var n=e({tickmode:p.tickmode,nticks:p.nticks,tick0:p.tick0,dtick:p.dtick,tickvals:p.tickvals,ticktext:p.ticktext,ticks:p.ticks,ticklen:p.ticklen,tickwidth:p.tickwidth,
tickcolor:p.tickcolor,showticklabels:p.showticklabels,showtickprefix:p.showtickprefix,tickprefix:p.tickprefix,showticksuffix:p.showticksuffix,ticksuffix:p.ticksuffix,showexponent:p.showexponent,exponentformat:p.exponentformat,separatethousands:p.separatethousands,tickfont:p.tickfont,tickangle:p.tickangle,tickformat:p.tickformat,tickformatstops:p.tickformatstops,layer:p.layer},"plot","from-root");e={visible:h({},p.visible,{dflt:!0}),type:h({},p.type,{values:["-","linear","log","date","category"]}),
autorange:h({},p.autorange,{editType:"plot"}),rangemode:{valType:"enumerated",values:["tozero","nonnegative","normal"],dflt:"tozero",editType:"calc"},range:h({},p.range,{items:[{valType:"any",editType:"plot",impliedEdits:{"^autorange":!1}},{valType:"any",editType:"plot",impliedEdits:{"^autorange":!1}}],editType:"plot"}),categoryorder:p.categoryorder,categoryarray:p.categoryarray,angle:{valType:"angle",editType:"plot"},side:{valType:"enumerated",values:["clockwise","counterclockwise"],dflt:"clockwise",
editType:"plot"},title:e(p.title,"plot","from-root"),hoverformat:p.hoverformat,uirevision:{valType:"any",editType:"none"},editType:"calc",_deprecated:{title:p._deprecated.title,titlefont:p._deprecated.titlefont}};e.title.text.dflt="";h(e,a,n);p={visible:h({},p.visible,{dflt:!0}),type:{valType:"enumerated",values:["-","linear","category"],dflt:"-",editType:"calc",_noTemplating:!0},categoryorder:p.categoryorder,categoryarray:p.categoryarray,thetaunit:{valType:"enumerated",values:["radians","degrees"],
dflt:"degrees",editType:"calc"},period:{valType:"number",editType:"calc",min:0},direction:{valType:"enumerated",values:["counterclockwise","clockwise"],dflt:"counterclockwise",editType:"calc"},rotation:{valType:"angle",editType:"calc"},hoverformat:p.hoverformat,uirevision:{valType:"any",editType:"none"},editType:"calc"};h(p,a,n);t.exports={domain:g({name:"polar",editType:"plot"}),sector:{valType:"info_array",items:[{valType:"number",editType:"plot"},{valType:"number",editType:"plot"}],dflt:[0,360],
editType:"plot"},hole:{valType:"number",min:0,max:1,dflt:0,editType:"plot"},bgcolor:{valType:"color",editType:"plot",dflt:m.background},radialaxis:e,angularaxis:p,gridshape:{valType:"enumerated",values:["circular","linear"],dflt:"circular",editType:"plot"},uirevision:{valType:"any",editType:"none"},editType:"calc"}},{"../../components/color/attributes":576,"../../lib":700,"../../plot_api/edit_types":731,"../cartesian/layout_attributes":760,"../domain":773}],815:[function(a,t,m){function p(a,b,k,m){function p(a,
b){return k(y+"."+a,b)}var t=k("bgcolor");m.bgColor=e.combine(t,m.paper_bgcolor);t=k("sector");k("hole");for(var w=l(m.fullData,z.name,m.id),x=m.layoutOut,y,E=0;E<A.length;E++){y=A[E];h.isPlainObject(a[y])||(a[y]={});var F=a[y],I=n.newContainer(b,y);I._id=I._name=y;I._attr=m.id+"."+y;I._traceIndices=w.map(function(a){return a._expandedIndex});var J=z.axisName2dataArray[y],L=g(F,I,p,w,J);f(F,I,p,{axData:w,dataAttr:J});J=p("visible");v(I,b,x);p("uirevision",b.uirevision);if(J){var M=p("color");var N=
M===F.color?M:m.font.color}I._m=1;switch(y){case "radialaxis":var O=p("autorange",!I.isValidRange(F.range));F.autorange=O;!O||"linear"!==L&&"-"!==L||p("rangemode");"reversed"===O&&(I._m=-1);p("range");I.cleanRange("range",{dfltRange:[0,1]});J&&(p("side"),p("angle",t[0]),p("title.text"),h.coerceFont(p,"title.font",{family:m.font.family,size:Math.round(1.2*m.font.size),color:N}));break;case "angularaxis":if("date"===L){h.log("Polar plots do not support date angular axes yet.");for(L=0;L<w.length;L++)w[L].visible=
!1;L=F.type=I.type="linear"}"linear"===L?p("thetaunit"):p("period");O=p("direction");p("rotation",{counterclockwise:0,clockwise:90}[O])}J&&(u(F,I,p,I.type),d(F,I,p,I.type,{tickSuffixDflt:"degrees"===I.thetaunit?"":void 0}),q(F,I,p,{outerTicks:!0}),p("showticklabels")&&(h.coerceFont(p,"tickfont",{family:m.font.family,size:m.font.size,color:N}),p("tickangle"),p("tickformat")),c(F,I,p,{dfltColor:M,bgColor:m.bgColor,blend:60,showLine:!0,showGrid:!0,noZeroLine:!0,attributes:r[y]}),p("layer"));"category"!==
L&&p("hoverformat");I._input=F}"category"===b.angularaxis.type&&k("gridshape")}function g(a,b,c,d,e){if("-"===c("type")){for(c=0;c<d.length;c++)if(d[c].visible){var f=d[c];break}f&&f[e]&&(b.type=k(f[e],"gregorian"));"-"===b.type?b.type="linear":a.type=b.type}return b.type}var h=a("../../lib"),e=a("../../components/color"),n=a("../../plot_api/plot_template"),b=a("../subplot_defaults"),l=a("../get_data").getSubplotData,u=a("../cartesian/tick_value_defaults"),q=a("../cartesian/tick_mark_defaults"),d=
a("../cartesian/tick_label_defaults"),f=a("../cartesian/category_order_defaults"),c=a("../cartesian/line_grid_defaults"),k=a("../cartesian/axis_autotype"),r=a("./layout_attributes"),v=a("./set_convert"),z=a("./constants"),A=z.axisNames;t.exports=function(a,c,d){b(a,c,d,{type:z.name,attributes:r,handleDefaults:p,font:c.font,paper_bgcolor:c.paper_bgcolor,fullData:d,layoutOut:c})}},{"../../components/color":577,"../../lib":700,"../../plot_api/plot_template":738,"../cartesian/axis_autotype":749,"../cartesian/category_order_defaults":752,
"../cartesian/line_grid_defaults":762,"../cartesian/tick_label_defaults":767,"../cartesian/tick_mark_defaults":768,"../cartesian/tick_value_defaults":769,"../get_data":784,"../subplot_defaults":824,"./constants":811,"./layout_attributes":814,"./set_convert":823}],816:[function(a,t,m){m=a("../../../traces/scatter/attributes");var p=m.marker;a=a("../../../lib/extend").extendFlat;t.exports={r:a({},m.r,{}),t:a({},m.t,{}),marker:{color:a({},p.color,{}),size:a({},p.size,{}),symbol:a({},p.symbol,{}),opacity:a({},
p.opacity,{}),editType:"calc"}}},{"../../../lib/extend":690,"../../../traces/scatter/attributes":1051}],817:[function(a,t,m){function p(a,e){return g({},e,{showline:{valType:"boolean"},showticklabels:{valType:"boolean"},tickorientation:{valType:"enumerated",values:["horizontal","vertical"]},ticklen:{valType:"number",min:0},tickcolor:{valType:"color"},ticksuffix:{valType:"string"},endpadding:{valType:"number",description:"Legacy polar charts are deprecated! Please switch to *polar* subplots."},visible:{valType:"boolean"}})}
m=a("../../cartesian/layout_attributes");var g=a("../../../lib/extend").extendFlat;a=a("../../../plot_api/edit_types").overrideAll;m=g({},m.domain,{});t.exports=a({radialaxis:p("radial",{range:{valType:"info_array",items:[{valType:"number"},{valType:"number"}]},domain:m,orientation:{valType:"number"}}),angularaxis:p("angular",{range:{valType:"info_array",items:[{valType:"number",dflt:0},{valType:"number",dflt:360}]},domain:m}),layout:{direction:{valType:"enumerated",values:["clockwise","counterclockwise"]},
orientation:{valType:"angle"}}},"plot","nested")},{"../../../lib/extend":690,"../../../plot_api/edit_types":731,"../../cartesian/layout_attributes":760}],818:[function(a,t,m){(t.exports=a("./micropolar")).manager=a("./micropolar_manager")},{"./micropolar":819,"./micropolar_manager":820}],819:[function(a,t,m){var p=a("d3"),g=a("../../../lib").extendDeepAll,h=a("../../../constants/alignment").MID_SHIFT,e=t.exports={version:"0.2.2"};e.Axis=function(){function a(a){d=a||d;a=b.data;var f=b.layout;if("string"==
typeof d||d.nodeName)d=p.select(d);d.datum(a).each(function(a,b){a=a.slice();m={data:e.util.cloneJson(a),layout:e.util.cloneJson(f)};var d=0;a.forEach(function(a,b){a.color||(a.color=f.defaultColorRange[d],d=(d+1)%f.defaultColorRange.length);a.strokeColor||(a.strokeColor="LinePlot"===a.geometry?a.color:p.rgb(a.color).darker().toString());m.data[b].color=a.color;m.data[b].strokeColor=a.strokeColor;m.data[b].strokeDash=a.strokeDash;m.data[b].strokeSize=a.strokeSize});a=a.filter(function(a,b){a=a.visible;
return"undefined"===typeof a||!0===a});var l=!1;b=a.map(function(a,b){l=l||"undefined"!==typeof a.groupId;return a});if(l){var n=[];a=p.nest().key(function(a,b){return"undefined"!=typeof a.groupId?a.groupId:"unstacked"}).entries(b).map(function(a,b){if("unstacked"!==a.key){var c=a.values[0].r.map(function(a,b){return 0});a.values.forEach(function(a,b,d){a.yStack=[c];n.push(c);c=e.util.sumArrays(a.r,c)})}return a.values});a=p.merge(a)}a.forEach(function(a,b){a.t=Array.isArray(a.t[0])?a.t:[a.t];a.r=
Array.isArray(a.r[0])?a.r:[a.r]});var r=Math.min(f.width-f.margin.left-f.margin.right,f.height-f.margin.top-f.margin.bottom)/2;r=Math.max(10,r);var u=[f.margin.left+r,f.margin.top+r];b=l?[0,p.max(e.util.sumArrays(e.util.arrayLast(a).r[0],e.util.arrayLast(n)))]:p.extent(e.util.flattenArray(a.map(function(a,b){return a.r})));f.radialAxis.domain!=e.DATAEXTENT&&(b[0]=0);c=p.scale.linear().domain(f.radialAxis.domain!=e.DATAEXTENT&&f.radialAxis.domain?f.radialAxis.domain:b).range([0,r]);m.layout.radialAxis.domain=
c.domain();var t=e.util.flattenArray(a.map(function(a,b){return a.t})),v="string"===typeof t[0];if(v){t=e.util.deduplicate(t);var z=t.slice();t=p.range(t.length);a=a.map(function(a,b){a.t=[t];l&&(a.yStack=a.yStack);return a})}var A=a.filter(function(a,b){return"LinePlot"===a.geometry||"DotPlot"===a.geometry}).length===a.length;b=null===f.needsEndSpacing?v||!A:f.needsEndSpacing;var y=f.angularAxis.domain&&f.angularAxis.domain!=e.DATAEXTENT&&!v&&0<=f.angularAxis.domain[0]?f.angularAxis.domain:p.extent(t),
I=Math.abs(t[1]-t[0]);A&&!v&&(I=0);y=y.slice();b&&v&&(y[1]+=I);A=f.angularAxis.ticksCount||4;8<A&&(A=A/(A/8)+A%8);f.angularAxis.ticksStep&&(A=(y[1]-y[0])/A);A=f.angularAxis.ticksStep||(y[1]-y[0])/(A*(f.minorTicks+1));z&&(A=Math.max(Math.round(A),1));y[2]||(y[2]=A);A=p.range.apply(this,y);A=A.map(function(a,b){return parseFloat(a.toPrecision(12))});k=p.scale.linear().domain(y.slice(0,2)).range("clockwise"===f.direction?[0,360]:[360,0]);m.layout.angularAxis.domain=k.domain();m.layout.angularAxis.endPadding=
b?I:0;q=p.select(this).select("svg.chart-root");if("undefined"===typeof q||q.empty())b=(new DOMParser).parseFromString("\x3csvg xmlns\x3d'http://www.w3.org/2000/svg' class\x3d'chart-root'\x3e' + '\x3cg class\x3d'outer-group'\x3e' + '\x3cg class\x3d'chart-group'\x3e' + '\x3ccircle class\x3d'background-circle'\x3e\x3c/circle\x3e' + '\x3cg class\x3d'geometry-group'\x3e\x3c/g\x3e' + '\x3cg class\x3d'radial axis-group'\x3e' + '\x3ccircle class\x3d'outside-circle'\x3e\x3c/circle\x3e' + '\x3c/g\x3e' + '\x3cg class\x3d'angular axis-group'\x3e\x3c/g\x3e' + '\x3cg class\x3d'guides-group'\x3e\x3cline\x3e\x3c/line\x3e\x3ccircle r\x3d'0'\x3e\x3c/circle\x3e\x3c/g\x3e' + '\x3c/g\x3e' + '\x3cg class\x3d'legend-group'\x3e\x3c/g\x3e' + '\x3cg class\x3d'tooltips-group'\x3e\x3c/g\x3e' + '\x3cg class\x3d'title-group'\x3e\x3ctext\x3e\x3c/text\x3e\x3c/g\x3e' + '\x3c/g\x3e' + '\x3c/svg\x3e",
"application/xml"),b=this.appendChild(this.ownerDocument.importNode(b.documentElement,!0)),q=p.select(b);q.select(".guides-group").style({"pointer-events":"none"});q.select(".angular.axis-group").style({"pointer-events":"none"});q.select(".radial.axis-group").style({"pointer-events":"none"});b=q.select(".chart-group");y={fill:"none",stroke:f.tickColor};var J={"font-size":f.font.size,"font-family":f.font.family,fill:f.font.color,"text-shadow":["-1px 0px","1px -1px","-1px 1px","1px 1px"].map(function(a,
b){return" "+a+" 0 "+f.font.outlineColor}).join(",")};if(f.showLegend){I=q.select(".legend-group").attr({transform:"translate("+[r,f.margin.top]+")"}).style({display:"block"});var L=a.map(function(a,b){b=e.util.cloneJson(a);b.symbol="DotPlot"===a.geometry?a.dotType||"circle":"LinePlot"!=a.geometry?"square":"line";b.visibleInLegend="undefined"===typeof a.visibleInLegend||a.visibleInLegend;b.color="LinePlot"===a.geometry?a.strokeColor:a.color;return b});e.Legend().config({data:a.map(function(a,b){return a.name||
"Element"+b}),legendConfig:g({},e.Legend.defaultConfig().legendConfig,{container:I,elements:L,reverseOrder:f.legend.reverseOrder})})();L=I.node().getBBox();r=Math.min(f.width-L.width-f.margin.left-f.margin.right,f.height-f.margin.top-f.margin.bottom)/2;r=Math.max(10,r);u=[f.margin.left+r,f.margin.top+r];c.range([0,r]);m.layout.radialAxis.domain=c.domain();I.attr("transform","translate("+[u[0]+r,u[1]-r]+")")}else I=q.select(".legend-group").style({display:"none"});q.attr({width:f.width,height:f.height}).style({opacity:f.opacity});
b.attr("transform","translate("+u+")").style({cursor:"crosshair"});var M=[(f.width-(f.margin.left+f.margin.right+2*r+(L?L.width:0)))/2,(f.height-(f.margin.top+f.margin.bottom+2*r))/2];M[0]=Math.max(0,M[0]);M[1]=Math.max(0,M[1]);q.select(".outer-group").attr("transform","translate("+M+")");if(f.title&&f.title.text){L=q.select("g.title-group text").style(J).text(f.title.text);var N=L.node().getBBox();L.attr({x:u[0]-N.width/2,y:u[1]-r-20})}L=q.select(".radial.axis-group");f.radialAxis.gridLinesVisible&&
(N=L.selectAll("circle.grid-circle").data(c.ticks(5)),N.enter().append("circle").attr({"class":"grid-circle"}).style(y),N.attr("r",c),N.exit().remove());L.select("circle.outside-circle").attr({r:r}).style(y);var O=q.select("circle.background-circle").attr({r:r}).style({fill:f.backgroundColor,stroke:f.stroke});f.radialAxis.visible&&(N=p.svg.axis().scale(c).ticks(5).tickSize(5),L.call(N).attr({transform:"rotate("+f.radialAxis.orientation+")"}),L.selectAll(".domain").style(y),L.selectAll("g\x3etext").text(function(a,
b){return this.textContent+f.radialAxis.ticksSuffix}).style(J).style({"text-anchor":"start"}).attr({x:0,y:0,dx:0,dy:0,transform:function(a,b){return"horizontal"===f.radialAxis.tickOrientation?"rotate("+-f.radialAxis.orientation+") translate("+[0,J["font-size"]]+")":"translate("+[0,J["font-size"]]+")"}}),L.selectAll("g\x3eline").style({stroke:"black"}));L=q.select(".angular.axis-group").selectAll("g.angular-tick").data(A);A=L.enter().append("g").classed("angular-tick",!0);L.attr({transform:function(a,
b){return"rotate("+(k(a)%360+f.orientation)+")"}}).style({display:f.angularAxis.visible?"block":"none"});L.exit().remove();A.append("line").classed("grid-line",!0).classed("major",function(a,b){return 0==b%(f.minorTicks+1)}).classed("minor",function(a,b){return 0!=b%(f.minorTicks+1)}).style(y);A.selectAll(".minor").style({stroke:f.minorTickColor});L.select("line.grid-line").attr({x1:f.tickLength?r-f.tickLength:0,x2:r}).style({display:f.angularAxis.gridLinesVisible?"block":"none"});A.append("text").classed("axis-text",
!0).style(J);L=L.select("text.axis-text").attr({x:r+f.labelOffset,dy:h+"em",transform:function(a,b){a=k(a)%360+f.orientation;b=r+f.labelOffset;var c=f.angularAxis.tickOrientation;return"horizontal"==c?"rotate("+-a+" "+b+" 0)":"radial"==c?270>a&&90<a?"rotate(180 "+b+" 0)":null:"rotate("+(180>=a&&0<a?-90:90)+" "+b+" 0)"}}).style({"text-anchor":"middle",display:f.angularAxis.labelsVisible?"block":"none"}).text(function(a,b){return 0!=b%(f.minorTicks+1)?"":z?z[a]+f.angularAxis.ticksSuffix:a+f.angularAxis.ticksSuffix}).style(J);
f.angularAxis.rewriteTicks&&L.text(function(a,b){return 0!=b%(f.minorTicks+1)?"":f.angularAxis.rewriteTicks(this.textContent,b)});L=p.max(b.selectAll(".angular-tick text")[0].map(function(a,b){return a.getCTM().e+a.getBBox().width}));I.attr({transform:"translate("+[r+L,f.margin.top]+")"});L=0<q.select("g.geometry-group").selectAll("g").size();var R=q.select("g.geometry-group").selectAll("g.geometry").data(a);R.enter().append("g").attr({"class":function(a,b){return"geometry geometry"+b}});R.exit().remove();
if(a[0]||L){var T=[];a.forEach(function(a,b){var d={};d.radialScale=c;d.angularScale=k;d.container=R.filter(function(a,c){return c==b});d.geometry=a.geometry;d.orientation=f.orientation;d.direction=f.direction;d.index=b;T.push({data:a,geometryConfig:d})});var P=[];p.nest().key(function(a,b){return"undefined"!=typeof a.data.groupId||"unstacked"}).entries(T).forEach(function(a,b){"unstacked"===a.key?P=P.concat(a.values.map(function(a,b){return[a]})):P.push(a.values)});P.forEach(function(a,b){var c=
Array.isArray(a)?a[0].geometryConfig.geometry:a.geometryConfig.geometry;a=a.map(function(a,b){return g(e[c].defaultConfig(),a)});e[c]().config(a)()})}var S=q.select(".guides-group");a=q.select(".tooltips-group");var ba=e.tooltipPanel().config({container:a,fontSize:8})(),da=e.tooltipPanel().config({container:a,fontSize:8})(),ca=e.tooltipPanel().config({container:a,hasTick:!0})(),Y,W;if(!v){var ea=S.select("line").attr({x1:0,y1:0,y2:0}).style({stroke:"grey","pointer-events":"none"});b.on("mousemove.angular-guide",
function(a,b){a=e.util.getMousePos(O).angle;ea.attr({x2:-r,transform:"rotate("+a+")"}).style({opacity:.5});Y=k.invert((a+180+360-f.orientation)%360);a=e.util.convertToCartesian(r+12,a+180);ba.text(e.util.round(Y)).move([a[0]+u[0],a[1]+u[1]])}).on("mouseout.angular-guide",function(a,b){S.select("line").style({opacity:0})})}var U=S.select("circle").style({stroke:"grey",fill:"none"});b.on("mousemove.radial-guide",function(a,b){a=e.util.getMousePos(O).radius;U.attr({r:a}).style({opacity:.5});W=c.invert(e.util.getMousePos(O).radius);
a=e.util.convertToCartesian(a,f.radialAxis.orientation);da.text(e.util.round(W)).move([a[0]+u[0],a[1]+u[1]])}).on("mouseout.radial-guide",function(a,b){U.style({opacity:0});ca.hide();ba.hide();da.hide()});q.selectAll(".geometry-group .mark").on("mouseover.tooltip",function(a,b){var c=p.select(this);b=this.style.fill;c.attr({"data-opacity":this.style.opacity||1});if(b&&"none"!==b){c.attr({"data-fill":b});b=p.hsl(b).darker().toString();c.style({fill:b,opacity:1});c=e.util.round(a[0]);var d=e.util.round(a[1]);
v&&(c=z[a[0]]);a="t: "+c+", r: "+d;c=this.getBoundingClientRect();d=q.node().getBoundingClientRect();c=[c.left+c.width/2-M[0]-d.left,c.top+c.height/2-M[1]-d.top];ca.config({color:b}).text(a);ca.move(c)}else b=this.style.stroke||"black",c.attr({"data-stroke":b}),b=p.hsl(b).darker().toString(),c.style({stroke:b,opacity:1})}).on("mousemove.tooltip",function(a,b){if(0!=p.event.which)return!1;p.select(this).attr("data-fill")&&ca.show()}).on("mouseout.tooltip",function(a,b){ca.hide();a=p.select(this);(b=
a.attr("data-fill"))?a.style({fill:b,opacity:a.attr("data-opacity")}):a.style({stroke:a.attr("data-stroke"),opacity:a.attr("data-opacity")})})});return r}var b={data:[],layout:{}},l={},m={},q,d,f=p.dispatch("hover"),c,k,r={render:function(b){a(b);return this},config:function(a){if(!arguments.length)return b;var c=e.util.cloneJson(a);c.data.forEach(function(a,c){b.data[c]||(b.data[c]={});g(b.data[c],e.Axis.defaultConfig().data[0]);g(b.data[c],a)});g(b.layout,e.Axis.defaultConfig().layout);g(b.layout,
c.layout);return this},getLiveConfig:function(){return m},getinputConfig:function(){return l},radialScale:function(a){return c},angularScale:function(a){return k},svg:function(){return q}};p.rebind(r,f,"on");return r};e.Axis.defaultConfig=function(a,b){return{data:[{t:[1,2,3,4],r:[10,11,12,13],name:"Line1",geometry:"LinePlot",color:null,strokeDash:"solid",strokeColor:null,strokeSize:"1",visibleInLegend:!0,opacity:1}],layout:{defaultColorRange:p.scale.category10().range(),title:null,height:450,width:500,
margin:{top:40,right:40,bottom:40,left:40},font:{size:12,color:"gray",outlineColor:"white",family:"Tahoma, sans-serif"},direction:"clockwise",orientation:0,labelOffset:10,radialAxis:{domain:null,orientation:-45,ticksSuffix:"",visible:!0,gridLinesVisible:!0,tickOrientation:"horizontal",rewriteTicks:null},angularAxis:{domain:[0,360],ticksSuffix:"",visible:!0,gridLinesVisible:!0,labelsVisible:!0,tickOrientation:"horizontal",rewriteTicks:null,ticksCount:null,ticksStep:null},minorTicks:0,tickLength:null,
tickColor:"silver",minorTickColor:"#eee",backgroundColor:"none",needsEndSpacing:null,showLegend:!0,legend:{reverseOrder:!1},opacity:1}}};e.util={};e.DATAEXTENT="dataExtent";e.AREA="AreaChart";e.LINE="LinePlot";e.DOT="DotPlot";e.BAR="BarChart";e.util._override=function(a,b){for(var e in a)e in b&&(b[e]=a[e])};e.util._extend=function(a,b){for(var e in a)b[e]=a[e]};e.util._rndSnd=function(){return 2*Math.random()-1+(2*Math.random()-1)+(2*Math.random()-1)};e.util.dataFromEquation2=function(a,b){b=b||
6;return p.range(0,360+b,b).map(function(b,e){e=a(b*Math.PI/180);return[b,e]})};e.util.dataFromEquation=function(a,b,e){b=b||6;var g=[],h=[];p.range(0,360+b,b).forEach(function(b,e){e=a(b*Math.PI/180);g.push(b);h.push(e)});b={t:g,r:h};e&&(b.name=e);return b};e.util.ensureArray=function(a,b){if("undefined"===typeof a)return null;var e=[].concat(a);return p.range(b).map(function(a,b){return e[b]||e[0]})};e.util.fillArrays=function(a,b,g){b.forEach(function(b,h){a[b]=e.util.ensureArray(a[b],g)});return a};
e.util.cloneJson=function(a){return JSON.parse(JSON.stringify(a))};e.util.validateKeys=function(a,b){"string"===typeof b&&(b=b.split("."));var e=b.shift();return a[e]&&(!b.length||objHasKeys(a[e],b))};e.util.sumArrays=function(a,b){return p.zip(a,b).map(function(a,b){return p.sum(a)})};e.util.arrayLast=function(a){return a[a.length-1]};e.util.arrayEqual=function(a,b){for(var e=Math.max(a.length,b.length,1);0<=e--&&a[e]===b[e];);return-2===e};e.util.flattenArray=function(a){for(var b=[];!e.util.arrayEqual(b,
a);)b=a,a=[].concat.apply([],a);return a};e.util.deduplicate=function(a){return a.filter(function(a,e,g){return g.indexOf(a)==e})};e.util.convertToCartesian=function(a,b){b=b*Math.PI/180;return[a*Math.cos(b),a*Math.sin(b)]};e.util.round=function(a,b){b=Math.pow(10,b||2);return Math.round(a*b)/b};e.util.getMousePos=function(a){a=p.mouse(a.node());var b=a[0],e=a[1],g={};g.x=b;g.y=e;g.pos=a;g.angle=180*(Math.atan2(e,b)+Math.PI)/Math.PI;g.radius=Math.sqrt(b*b+e*e);return g};e.util.duplicatesCount=function(a){for(var b=
{},e,g={},h=0,d=a.length;h<d;h++)e=a[h],e in b?(b[e]++,g[e]=b[e]):b[e]=1;return g};e.util.duplicates=function(a){return Object.keys(e.util.duplicatesCount(a))};e.util.translator=function(a,b,e,g){g&&(g=e.slice(),e=b,b=g);var h=b.reduce(function(a,b){if("undefined"!=typeof a)return a[b]},a);"undefined"!==typeof h&&(b.reduce(function(a,e,c){if("undefined"!=typeof a)return c===b.length-1&&delete a[e],a[e]},a),e.reduce(function(a,b,c){"undefined"===typeof a[b]&&(a[b]={});c===e.length-1&&(a[b]=h);return a[b]},
a))};e.PolyChart=function(){function a(){var a=b[0].geometryConfig,d=a.container;"string"==typeof d&&(d=p.select(d));d.datum(b).each(function(b,c){var d=!!b[0].data.yStack,e=b.map(function(a,b){return d?p.zip(a.data.t[0],a.data.r[0],a.data.yStack[0]):p.zip(a.data.t[0],a.data.r[0])}),f=a.angularScale,g=a.radialScale.domain()[0],h={bar:function(c,d,e){e=b[e].data;d=a.radialScale(c[1])-a.radialScale(0);c=a.radialScale(c[2]||0);e=e.barWidth;p.select(this).attr({"class":"mark bar",d:"M"+[[d+c,-e/2],[d+
c,e/2],[c,e/2],[c,-e/2]].join("L")+"Z",transform:function(b,c){return"rotate("+(a.orientation+f(b[0]))+")"}})},dot:function(c,d,e){var f=c[2]?[c[0],c[1]+c[2]]:c;c=p.svg.symbol().size(b[e].data.dotSize).type(b[e].data.dotType)(c,d);p.select(this).attr({"class":"mark dot",d:c,transform:function(b,c){b=a.radialScale(f[1]);c=(a.angularScale(f[0])+a.orientation)*Math.PI/180;return"translate("+[b*Math.cos(c),b*Math.sin(c)]+")"}})}},l=p.svg.line.radial().interpolate(b[0].data.lineInterpolation).radius(function(b){return a.radialScale(b[1])}).angle(function(b){return a.angularScale(b[0])*
Math.PI/180});h.line=function(c,d,f){var g=c[2]?e[f].map(function(a,b){return[a[0],a[1]+a[2]]}):e[f];p.select(this).each(h.dot).style({opacity:function(a,c){return+b[f].data.dotVisible},fill:u.stroke(c,d,f)}).attr({"class":"mark dot"});if(!(0<d)){var k=p.select(this.parentNode).selectAll("path.line").data([0]);k.enter().insert("path");k.attr({"class":"line",d:l(g),transform:function(b,c){return"rotate("+(a.orientation+90)+")"},"pointer-events":"none"}).style({fill:function(a,b){return u.fill(c,d,
f)},"fill-opacity":0,stroke:function(a,b){return u.stroke(c,d,f)},"stroke-width":function(a,b){return u["stroke-width"](c,d,f)},"stroke-dasharray":function(a,b){return u["stroke-dasharray"](c,d,f)},opacity:function(a,b){return u.opacity(c,d,f)},display:function(a,b){return u.display(c,d,f)}})}};c=a.angularScale.range();var n=Math.abs(c[1]-c[0])/e[0].length*Math.PI/180,q=p.svg.arc().startAngle(function(a){return-n/2}).endAngle(function(a){return n/2}).innerRadius(function(b){return a.radialScale(g+
(b[2]||0))}).outerRadius(function(b){return a.radialScale(g+(b[2]||0))+a.radialScale(b[1])});h.arc=function(b,c,d){p.select(this).attr({"class":"mark arc",d:q,transform:function(b,c){return"rotate("+(a.orientation+f(b[0])+90)+")"}})};var u={fill:function(a,c,d){return b[d].data.color},stroke:function(a,c,d){return b[d].data.strokeColor},"stroke-width":function(a,c,d){return b[d].data.strokeSize+"px"},"stroke-dasharray":function(a,c,d){return m[b[d].data.strokeDash]},opacity:function(a,c,d){return b[d].data.opacity},
display:function(a,c,d){return"undefined"===typeof b[d].data.visible||b[d].data.visible?"block":"none"}};c=p.select(this).selectAll("g.layer").data(e);c.enter().append("g").attr({"class":"layer"});var t=c.selectAll("path.mark").data(function(a,b){return a});t.enter().append("path").attr({"class":"mark"});t.style(u).each(h[a.geometryType]);t.exit().remove();c.exit().remove()})}var b=[e.PolyChart.defaultConfig()],h=p.dispatch("hover"),m={solid:"none",dash:[5,2],dot:[2,5]};a.config=function(a){if(!arguments.length)return b;
a.forEach(function(a,f){b[f]||(b[f]={});g(b[f],e.PolyChart.defaultConfig());g(b[f],a)});return this};a.getColorScale=function(){};p.rebind(a,h,"on");return a};e.PolyChart.defaultConfig=function(){return{data:{name:"geom1",t:[[1,2,3,4]],r:[[1,2,3,4]],dotType:"circle",dotSize:64,dotVisible:!1,barWidth:20,color:"#ffa500",strokeSize:1,strokeColor:"silver",strokeDash:"solid",opacity:1,index:0,visible:!0,visibleInLegend:!0},geometryConfig:{geometry:"LinePlot",geometryType:"arc",direction:"clockwise",orientation:0,
container:"body",radialScale:null,angularScale:null,colorScale:p.scale.category20()}}};e.BarChart=function(){return e.PolyChart()};e.BarChart.defaultConfig=function(){return{geometryConfig:{geometryType:"bar"}}};e.AreaChart=function(){return e.PolyChart()};e.AreaChart.defaultConfig=function(){return{geometryConfig:{geometryType:"arc"}}};e.DotPlot=function(){return e.PolyChart()};e.DotPlot.defaultConfig=function(){return{geometryConfig:{geometryType:"dot",dotType:"circle"}}};e.LinePlot=function(){return e.PolyChart()};
e.LinePlot.defaultConfig=function(){return{geometryConfig:{geometryType:"line"}}};e.Legend=function(){function a(){var e=b.legendConfig,h=b.data.map(function(a,b){return[].concat(a).map(function(a,c){var d=g({},e.elements[b]);d.name=a;d.color=[].concat(e.elements[b].color)[c];return d})}),d=p.merge(h);d=d.filter(function(a,b){return e.elements[b]&&(e.elements[b].visibleInLegend||"undefined"===typeof e.elements[b].visibleInLegend)});e.reverseOrder&&(d=d.reverse());var f=e.container;if("string"==typeof f||
f.nodeName)f=p.select(f);var c=d.map(function(a,b){return a.color}),k=e.fontSize,l=(h=null==e.isContinuous?"number"===typeof d[0]:e.isContinuous)?e.height:k*d.length;f=f.classed("legend-group",!0).selectAll("svg").data([0]);var n=f.enter().append("svg").attr({width:300,height:l+k,xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink",version:"1.1"});n.append("g").classed("legend-axis",!0);n.append("g").classed("legend-marks",!0);n=p.range(d.length);var m=p.scale[h?"linear":
"ordinal"]().domain(n).range(c),t=p.scale[h?"linear":"ordinal"]().domain(n)[h?"range":"rangePoints"]([0,l]);h?(l=f.select(".legend-marks").append("defs").append("linearGradient").attr({id:"grad1",x1:"0%",y1:"0%",x2:"0%",y2:"100%"}).selectAll("stop").data(c),l.enter().append("stop"),l.attr({offset:function(a,b){return b/(c.length-1)*100+"%"}}).style({"stop-color":function(a,b){return a}}),f.append("rect").classed("legend-mark",!0).attr({height:e.height,width:e.colorBandWidth,fill:"url(#grad1)"})):
(l=f.select(".legend-marks").selectAll("path.legend-mark").data(d),l.enter().append("path").classed("legend-mark",!0),l.attr({transform:function(a,b){return"translate("+[k/2,t(b)+k/2]+")"},d:function(a,b){a=a.symbol;b=3*k;a="line"===a?"M"+[[-k/2,-k/12],[k/2,-k/12],[k/2,k/12],[-k/2,k/12]]+"Z":-1!=p.svg.symbolTypes.indexOf(a)?p.svg.symbol().type(a).size(b)():p.svg.symbol().type("square").size(b)();return a},fill:function(a,b){return m(b)}}),l.exit().remove());l=p.svg.axis().scale(t).orient("right");
f=f.select("g.legend-axis").attr({transform:"translate("+[h?e.colorBandWidth:k,k/2]+")"}).call(l);f.selectAll(".domain").style({fill:"none",stroke:"none"});f.selectAll("line").style({fill:"none",stroke:h?e.textColor:"none"});f.selectAll("text").style({fill:e.textColor,"font-size":e.fontSize}).text(function(a,b){return d[b].name});return a}var b=e.Legend.defaultConfig(),h=p.dispatch("hover");a.config=function(a){if(!arguments.length)return b;g(b,a);return this};p.rebind(a,h,"on");return a};e.Legend.defaultConfig=
function(a,b){return{data:["a","b","c"],legendConfig:{elements:[{symbol:"line",color:"red"},{symbol:"square",color:"yellow"},{symbol:"diamond",color:"limegreen"}],height:150,colorBandWidth:30,fontSize:12,container:"body",isContinuous:null,textColor:"grey",reverseOrder:!1}}};e.tooltipPanel=function(){var a,b,h,m={container:null,hasTick:!1,fontSize:12,color:"white",padding:5},q="tooltip-"+e.tooltipPanel.uid++,d=function(){a=m.container.selectAll("g."+q).data([0]);var e=a.enter().append("g").classed(q,
!0).style({"pointer-events":"none",display:"none"});h=e.append("path").style({fill:"white","fill-opacity":.9}).attr({d:"M0 0"});b=e.append("text").attr({dx:m.padding+10,dy:.3*+m.fontSize});return d};d.text=function(e){var c=p.hsl(m.color).l,f=.5<=c?"#aaa":"white";e=e||"";b.style({fill:.5<=c?"black":"white","font-size":m.fontSize+"px"}).text(e);c=m.padding;e=b.node().getBBox();f={fill:m.color,stroke:f,"stroke-width":"2px"};var g=e.width+2*c+10;e=e.height+2*c;h.attr({d:"M"+[[10,-e/2],[10,-e/4],[m.hasTick?
0:10,0],[10,e/4],[10,e/2],[g,e/2],[g,-e/2]].join("L")+"Z"}).style(f);a.attr({transform:"translate("+[10,-e/2+2*c]+")"});a.style({display:"block"});return d};d.move=function(b){if(a)return a.attr({transform:"translate("+[b[0],b[1]]+")"}).style({display:"block"}),d};d.hide=function(){if(a)return a.style({display:"none"}),d};d.show=function(){if(a)return a.style({display:"block"}),d};d.config=function(a){g(m,a);return d};return d};e.tooltipPanel.uid=1;e.adapter={};e.adapter.plotly=function(){return{convert:function(a,
b){var h={};if(a.data&&(h.data=a.data.map(function(a,d){a=g({},a);[[a,["marker","color"],["color"]],[a,["marker","opacity"],["opacity"]],[a,["marker","line","color"],["strokeColor"]],[a,["marker","line","dash"],["strokeDash"]],[a,["marker","line","width"],["strokeSize"]],[a,["marker","symbol"],["dotType"]],[a,["marker","size"],["dotSize"]],[a,["marker","barWidth"],["barWidth"]],[a,["line","interpolation"],["lineInterpolation"]],[a,["showlegend"],["visibleInLegend"]]].forEach(function(a,c){e.util.translator.apply(null,
a.concat(b))});b||delete a.marker;b&&delete a.groupId;b?("LinePlot"===a.geometry?(a.type="scatter",!0===a.dotVisible?(delete a.dotVisible,a.mode="lines+markers"):a.mode="lines"):"DotPlot"===a.geometry?(a.type="scatter",a.mode="markers"):"AreaChart"===a.geometry?a.type="area":"BarChart"===a.geometry&&(a.type="bar"),delete a.geometry):("scatter"===a.type?"lines"===a.mode?a.geometry="LinePlot":"markers"===a.mode?a.geometry="DotPlot":"lines+markers"===a.mode&&(a.geometry="LinePlot",a.dotVisible=!0):"area"===
a.type?a.geometry="AreaChart":"bar"===a.type&&(a.geometry="BarChart"),delete a.mode,delete a.type);return a}),!b&&a.layout&&"stack"===a.layout.barmode)){var n=e.util.duplicates(h.data.map(function(a,b){return a.geometry}));h.data.forEach(function(a,b){a=n.indexOf(a.geometry);-1!=a&&(h.data[b].groupId=a)})}if(a.layout){a=g({},a.layout);[[a,["plot_bgcolor"],["backgroundColor"]],[a,["showlegend"],["showLegend"]],[a,["radialaxis"],["radialAxis"]],[a,["angularaxis"],["angularAxis"]],[a.angularaxis,["showline"],
["gridLinesVisible"]],[a.angularaxis,["showticklabels"],["labelsVisible"]],[a.angularaxis,["nticks"],["ticksCount"]],[a.angularaxis,["tickorientation"],["tickOrientation"]],[a.angularaxis,["ticksuffix"],["ticksSuffix"]],[a.angularaxis,["range"],["domain"]],[a.angularaxis,["endpadding"],["endPadding"]],[a.radialaxis,["showline"],["gridLinesVisible"]],[a.radialaxis,["tickorientation"],["tickOrientation"]],[a.radialaxis,["ticksuffix"],["ticksSuffix"]],[a.radialaxis,["range"],["domain"]],[a.angularAxis,
["showline"],["gridLinesVisible"]],[a.angularAxis,["showticklabels"],["labelsVisible"]],[a.angularAxis,["nticks"],["ticksCount"]],[a.angularAxis,["tickorientation"],["tickOrientation"]],[a.angularAxis,["ticksuffix"],["ticksSuffix"]],[a.angularAxis,["range"],["domain"]],[a.angularAxis,["endpadding"],["endPadding"]],[a.radialAxis,["showline"],["gridLinesVisible"]],[a.radialAxis,["tickorientation"],["tickOrientation"]],[a.radialAxis,["ticksuffix"],["ticksSuffix"]],[a.radialAxis,["range"],["domain"]],
[a.font,["outlinecolor"],["outlineColor"]],[a.legend,["traceorder"],["reverseOrder"]],[a,["labeloffset"],["labelOffset"]],[a,["defaultcolorrange"],["defaultColorRange"]]].forEach(function(a,d){e.util.translator.apply(null,a.concat(b))});b?("undefined"!==typeof a.tickLength&&(a.angularaxis.ticklen=a.tickLength,delete a.tickLength),a.tickColor&&(a.angularaxis.tickcolor=a.tickColor,delete a.tickColor)):(a.angularAxis&&"undefined"!==typeof a.angularAxis.ticklen&&(a.tickLength=a.angularAxis.ticklen),a.angularAxis&&
"undefined"!==typeof a.angularAxis.tickcolor&&(a.tickColor=a.angularAxis.tickcolor));a.legend&&"boolean"!=typeof a.legend.reverseOrder&&(a.legend.reverseOrder="normal"!=a.legend.reverseOrder);a.legend&&"boolean"==typeof a.legend.traceorder&&(a.legend.traceorder=a.legend.traceorder?"reversed":"normal",delete a.legend.reverseOrder);if(a.margin&&"undefined"!=typeof a.margin.t){var q=["t","r","b","l","pad"],d=["top","right","bottom","left","pad"],f={};p.entries(a.margin).forEach(function(a,b){f[d[q.indexOf(a.key)]]=
a.value});a.margin=f}b&&(delete a.needsEndSpacing,delete a.minorTickColor,delete a.minorTicks,delete a.angularaxis.ticksCount,delete a.angularaxis.ticksCount,delete a.angularaxis.ticksStep,delete a.angularaxis.rewriteTicks,delete a.angularaxis.nticks,delete a.radialaxis.ticksCount,delete a.radialaxis.ticksCount,delete a.radialaxis.ticksStep,delete a.radialaxis.rewriteTicks,delete a.radialaxis.nticks);h.layout=a}return h}}}},{"../../../constants/alignment":672,"../../../lib":700,d3:154}],820:[function(a,
t,m){var p=a("d3");m=a("../../../lib");var g=a("../../../components/color"),h=a("./micropolar"),e=a("./undo_manager"),n=m.extendDeepAll,b=t.exports={};b.framework=function(a){function g(d,e){e&&(k=e);p.select(p.select(k).node().parentNode).selectAll(".svg-container\x3e*:not(.chart-root)").remove();l=l?n(l,d):d;f||(f=h.Axis());c=h.adapter.plotly().convert(l);f.config(c).render(k);a.data=l.data;a.layout=l.layout;b.fillLayout(a);return l}var l,d,f,c,k,r=new e;g.isPolar=!0;g.svg=function(){return f.svg()};
g.getConfig=function(){return l};g.getLiveConfig=function(){return h.adapter.plotly().convert(f.getLiveConfig(),!0)};g.getLiveScales=function(){return{t:f.angularScale(),r:f.radialScale()}};g.setUndoPoint=function(){var a=this,b=h.util.cloneJson(l);(function(b,c){r.add({undo:function(){c&&a(c)},redo:function(){a(b)}})})(b,d);d=h.util.cloneJson(b)};g.undo=function(){r.undo()};g.redo=function(){r.redo()};return g};b.fillLayout=function(a){var b=p.select(a).selectAll(".plot-container"),e=b.selectAll(".svg-container"),
d=a.framework&&a.framework.svg&&a.framework.svg();a._fullLayout=n({width:800,height:600,paper_bgcolor:g.background,_container:b,_paperdiv:e,_paper:d},a.layout)}},{"../../../components/color":577,"../../../lib":700,"./micropolar":819,"./undo_manager":821,d3:154}],821:[function(a,t,m){t.exports=function(){function a(a,g){if(!a)return this;e=!0;a[g]();e=!1;return this}var g=[],h=-1,e=!1,n;return{add:function(a){if(e)return this;g.splice(h+1,g.length-h);g.push(a);h=g.length-1;return this},setCallback:function(a){n=
a},undo:function(){var b=g[h];if(!b)return this;a(b,"undo");--h;n&&n(b.undo);return this},redo:function(){var b=g[h+1];if(!b)return this;a(b,"redo");h+=1;n&&n(b.redo);return this},clear:function(){g=[];h=-1},hasUndo:function(){return-1!==h},hasRedo:function(){return h<g.length-1},getCommands:function(){return g},getPreviousCommand:function(){return g[h-1]},getIndex:function(){return h}}}},{}],822:[function(a,t,m){function p(a,b){this.id=b;this.gd=a;this.radialAxisAngle=this.vangles=this._hasClipOnAxisFalse=
null;this.traceHash={};this.layers={};this.clipPaths={};this.clipIds={};this.viewInitial={};a=a._fullLayout;this.clipIds.forTraces="clip"+a._uid+b+"-for-traces";this.clipPaths.forTraces=a._clips.append("clipPath").attr("id",this.clipIds.forTraces);this.clipPaths.forTraces.append("path");this.framework=a._polarlayer.append("g").attr("class",b);this.angularTickLayout=this.radialTickLayout=null}function g(a){var b=a.ticks+String(a.ticklen)+String(a.showticklabels);"side"in a&&(b+=a.side);return b}function h(a,
b){var c=d.findIndexOfMin(b,function(b){return d.angleDist(a,b)});return b[c]}function e(a,b,c){b?(a.attr("display",null),a.attr(c)):a&&a.attr("display","none");return a}function n(a,b){return"translate("+a+","+b+")"}function b(a){return"rotate("+a+")"}var l=a("d3"),u=a("tinycolor2"),q=a("../../registry"),d=a("../../lib"),f=a("../../components/color"),c=a("../../components/drawing"),k=a("../plots"),r=a("../../plots/cartesian/axes"),v=a("../cartesian/set_convert"),z=a("./set_convert"),A=a("../cartesian/autorange").doAutoRange,
y=a("../cartesian/dragbox"),w=a("../../components/dragelement"),x=a("../../components/fx"),F=a("../../components/titles"),B=a("../cartesian/select").prepSelect,C=a("../cartesian/select").selectOnClick,D=a("../cartesian/select").clearSelect,G=a("../../lib/setcursor"),H=a("../../lib/clear_gl_canvases"),E=a("../../plot_api/subroutines").redrawReglTraces,K=a("../../constants/alignment").MID_SHIFT,I=a("./constants"),J=a("./helpers"),L=d._,M=d.mod,N=d.deg2rad,O=d.rad2deg;a=p.prototype;t.exports=function(a,
b){return new p(a,b)};a.plot=function(a,b){var c=b[this.id];this._hasClipOnAxisFalse=!1;for(var d=0;d<a.length;d++)if(!1===a[d][0].trace.cliponaxis){this._hasClipOnAxisFalse=!0;break}this.updateLayers(b,c);this.updateLayout(b,c);k.generalUpdatePerTraceModule(this.gd,this,a,c);this.updateFx(b,c)};a.updateLayers=function(a,b){var c=this.layers;a=b.radialaxis;b=b.angularaxis;var d=I.layerNames,e=d.indexOf("frontplot");d=d.slice(0,e);b="below traces"===b.layer;a="below traces"===a.layer;b&&d.push("angular-line");
a&&d.push("radial-line");b&&d.push("angular-axis");a&&d.push("radial-axis");d.push("frontplot");b||d.push("angular-line");a||d.push("radial-line");b||d.push("angular-axis");a||d.push("radial-axis");a=this.framework.selectAll(".polarsublayer").data(d,String);a.enter().append("g").attr("class",function(a){return"polarsublayer "+a}).each(function(a){var b=c[a]=l.select(this);switch(a){case "frontplot":b.append("g").classed("barlayer",!0);b.append("g").classed("scatterlayer",!0);break;case "backplot":b.append("g").classed("maplayer",
!0);break;case "plotbg":c.bg=b.append("path");break;case "radial-grid":b.style("fill","none");break;case "angular-grid":b.style("fill","none");break;case "radial-line":b.append("line").style("fill","none");break;case "angular-line":b.append("path").style("fill","none")}});a.order()};a.updateLayout=function(a,b){var d=this.layers,e=a._size,g=b.radialaxis,k=b.angularaxis,h=b.domain.x,l=b.domain.y;this.xOffset=e.l+e.w*h[0];this.yOffset=e.t+e.h*(1-l[1]);var r=this.xLength=e.w*(h[1]-h[0]),q=this.yLength=
e.h*(l[1]-l[0]),m=b.sector;this.sectorInRad=m.map(N);var p=m[0];m=m[1]-p;p=M(p,360);m=p+m;var u=Math.cos(N(p)),t=Math.sin(N(p)),v=Math.cos(N(m)),w=Math.sin(N(m));var z=90>=p&&90<=m||90<p&&450<=m?1:0>=t&&0>=w?0:Math.max(t,w);var x=180>=p&&180<=m||180<p&&540<=m?-1:0<=u&&0<=v?0:Math.min(u,v);p=this.sectorBBox=[x,270>=p&&270<=m||270<p&&630<=m?-1:0<=t&&0<=w?0:Math.min(t,w),360<=m?1:0>=u&&0>=v?0:Math.max(u,v),z];m=p[2]-p[0];t=Math.abs((p[3]-p[1])/m);q/r>t?(u=r,t*=r,r=(q-t)/e.h/2,h=[h[0],h[1]],l=[l[0]+r,
l[1]-r]):(u=q/t,t=q,r=(r-u)/e.w/2,h=[h[0]+r,h[1]-r],l=[l[0],l[1]]);this.xLength2=u;this.yLength2=t;this.xDomain2=h;this.yDomain2=l;r=this.xOffset2=e.l+e.w*h[0];q=this.yOffset2=e.t+e.h*(1-l[1]);u=this.radius=u/m;t=this.innerRadius=b.hole*u;m=this.cx=r-u*p[0];p=this.cy=q+u*p[3];v=this.cxx=m-r;w=this.cyy=p-q;this.radialAxis=this.mockAxis(a,b,g,{_id:"x",side:{counterclockwise:"top",clockwise:"bottom"}[g.side],domain:[t/e.w,u/e.w]});this.angularAxis=this.mockAxis(a,b,k,{side:"right",domain:[0,Math.PI],
autorange:!1});this.doAutoRange(a,b);this.updateAngularAxis(a,b);this.updateRadialAxis(a,b);this.updateRadialAxisTitle(a,b);this.xaxis=this.mockCartesianAxis(a,b,{_id:"x",domain:h});this.yaxis=this.mockCartesianAxis(a,b,{_id:"y",domain:l});a=this.pathSubplot();this.clipPaths.forTraces.select("path").attr("d",a).attr("transform",n(v,w));d.frontplot.attr("transform",n(r,q)).call(c.setClipUrl,this._hasClipOnAxisFalse?null:this.clipIds.forTraces,this.gd);d.bg.attr("d",a).attr("transform",n(m,p)).call(f.fill,
b.bgcolor)};a.mockAxis=function(a,b,c,e){c=d.extendFlat({anchor:"free",position:0},c,e);z(c,b,a);return c};a.mockCartesianAxis=function(a,b,c){var e=this,f=c._id,g=d.extendFlat({type:"linear"},c);v(g,a);var h={x:[0,2],y:[1,3]};g.setRange=function(){var a=e.sectorBBox,c=h[f],d=e.radialAxis._rl;d=(d[1]-d[0])/(1-b.hole);g.range=[a[c[0]]*d,a[c[1]]*d]};g.isPtWithinRange="x"===f?function(a){return e.isPtInside(a)}:function(){return!0};g.setRange();g.setScale();return g};a.doAutoRange=function(a,b){var c=
this.gd;a=this.radialAxis;b=b.radialaxis;a.setScale();A(c,a);c=a.range;b.range=c.slice();b._input.range=c.slice();a._rl=[a.r2l(c[0],null,"gregorian"),a.r2l(c[1],null,"gregorian")]};a.updateRadialAxis=function(a,c){var k=this,l=k.gd;a=k.layers;var q=k.radius,m=k.innerRadius,p=k.cx,u=k.cy,t=c.radialaxis,v=M(c.sector[0],360),w=k.radialAxis;c=m<q;k.fillViewInitialKey("radialaxis.angle",t.angle);k.fillViewInitialKey("radialaxis.range",w.range.slice());w.setGeometry();"auto"===w.tickangle&&90<v&&270>=v&&
(w.tickangle=180);v=function(a){return"translate("+(w.l2p(a.x)+m)+",0)"};var z=function(a){return k.pathArc(w.r2p(a.x)+m)},x=g(t);k.radialTickLayout!==x&&(a["radial-axis"].selectAll(".xtick").remove(),k.radialTickLayout=x);if(c){w.setScale();x=r.calcTicks(w);var A=r.clipEnds(w,x),y=r.getTickSigns(w)[2];r.drawTicks(l,w,{vals:x,layer:a["radial-axis"],path:r.makeTickPath(w,0,y),transFn:v,crisp:!1});r.drawGrid(l,w,{vals:A,layer:a["radial-grid"],path:z,transFn:d.noop,crisp:!1});r.drawLabels(l,w,{vals:x,
layer:a["radial-axis"],transFn:v,labelFns:r.makeLabelFns(w,0)})}l=k.radialAxisAngle=k.vangles?O(h(N(t.angle),k.vangles)):t.angle;p=n(p,u);u=p+b(-l);e(a["radial-axis"],c&&(t.showticklabels||t.ticks),{transform:u});e(a["radial-grid"],c&&t.showgrid,{transform:p});e(a["radial-line"].select("line"),c&&t.showline,{x1:m,y1:0,x2:q,y2:0,transform:u}).attr("stroke-width",t.linewidth).call(f.stroke,t.linecolor)};a.updateRadialAxisTitle=function(a,b,d){a=this.gd;var e=this.radius,f=this.cx,g=this.cy;b=b.radialaxis;
var k=this.id+"title";d=void 0!==d?d:this.radialAxisAngle;var h=N(d),l=Math.cos(h);h=Math.sin(h);var n=0;if(b.title){n=c.bBox(this.layers["radial-axis"].node()).height;var r=b.title.font.size;n="counterclockwise"===b.side?-n-.4*r:n+.8*r}this.layers["radial-axis-title"]=F.draw(a,k,{propContainer:b,propName:this.id+".radialaxis.title",placeholder:L(a,"Click to enter radial axis title"),attributes:{x:f+e/2*l+n*h,y:g-e/2*h+n*l,"text-anchor":"middle"},transform:{rotate:-d}})};a.updateAngularAxis=function(a,
c){var k=this;a=k.gd;var h=k.layers,l=k.radius,q=k.innerRadius,m=k.cx,p=k.cy,u=c.angularaxis,t=k.angularAxis;k.fillViewInitialKey("angularaxis.rotation",u.rotation);t.setGeometry();t.setScale();var v=function(a){return t.t2g(a.x)};"linear"===t.type&&"radians"===t.thetaunit&&(t.tick0=O(t.tick0),t.dtick=O(t.dtick));var w=function(a){return n(m+l*Math.cos(a),p-l*Math.sin(a))},z=function(a){return w(v(a))},x=function(a){a=v(a);return w(a)+b(-O(a))},A=function(a){var b=v(a);a=Math.cos(b);b=Math.sin(b);
return"M"+[m+q*a,p-q*b]+"L"+[m+l*a,p-l*b]},y=r.makeLabelFns(t,0).labelStandoff,B={xFn:function(a){a=v(a);return Math.cos(a)*y},yFn:function(a){var b=v(a);return-Math.sin(b)*(y+a.fontSize*(0<Math.sin(b)?.2:1))+Math.abs(Math.cos(b))*a.fontSize*K},anchorFn:function(a){a=v(a);a=Math.cos(a);return.1>Math.abs(a)?"middle":0<a?"start":"end"},heightFn:function(a,b,c){a=v(a);return-.5*(1+Math.sin(a))*c}},D=g(u);k.angularTickLayout!==D&&(h["angular-axis"].selectAll("."+t._id+"tick").remove(),k.angularTickLayout=
D);D=r.calcTicks(t);"linear"===c.gridshape?(c=D.map(v),0>d.angleDelta(c[0],c[1])&&(c=c.slice().reverse())):c=null;k.vangles=c;"category"===t.type&&(D=D.filter(function(a){return d.isAngleInsideSector(v(a),k.sectorInRad)}));t.visible&&(c="inside"===t.ticks?-1:1,r.drawTicks(a,t,{vals:D,layer:h["angular-axis"],path:"M"+(t.linewidth||1)/2*c+",0h"+c*t.ticklen,transFn:x,crisp:!1}),r.drawGrid(a,t,{vals:D,layer:h["angular-grid"],path:A,transFn:d.noop,crisp:!1}),r.drawLabels(a,t,{vals:D,layer:h["angular-axis"],
repositionOnUpdate:!0,transFn:z,labelFns:B}));e(h["angular-line"].select("path"),u.showline,{d:k.pathSubplot(),transform:n(m,p)}).attr("stroke-width",u.linewidth).call(f.stroke,u.linecolor)};a.updateFx=function(a,b){this.gd._context.staticPlot||(this.updateAngularDrag(a),this.updateRadialDrag(a,b,0),this.updateRadialDrag(a,b,1),this.updateMainDrag(a))};a.updateMainDrag=function(a){function b(a,b){return Math.sqrt(a*a+b*b)}function c(a,b){return[a*Math.cos(b),a*Math.sin(-b)]}function d(a,b){if(0===
a)return t.pathSector(2*ya);var d=ka/a,e=b-d;b+=d;d=Math.max(0,Math.min(a,G));a=d-ya;d+=ya;return"M"+c(a,e)+"A"+[a,a]+" 0,0,0 "+c(a,b)+"L"+c(d,b)+"A"+[d,d]+" 0,0,1 "+c(d,e)+"Z"}function e(a,b,d){if(0===a)return t.pathSector(2*ya);b=c(a,b);d=c(a,d);a=Ba((b[0]+d[0])/2);d=Ba((b[1]+d[1])/2);if(a&&d){b=d/a;var e=-1/b;a=va(ya,b,a,d);b=va(ka,e,a[0][0],a[0][1]);a=va(ka,e,a[1][0],a[1][1])}else{if(d){e=ka;var f=ya}else e=ya,f=ka;b=[[a-e,d-f],[a+e,d-f]];a=[[a-e,d+f],[a+e,d+f]]}return"M"+b.join("L")+"L"+a.reverse().join("L")+
"Z"}function f(a,b){b=Math.max(Math.min(b,G),F);a<E?a=0:G-a<E?a=G:b<E?b=0:G-b<E&&(b=G);if(Math.abs(b-a)>A)return a<b?(Ja=a,ja=b):(Ja=b,ja=a),!0;ja=Ja=null;return!1}function g(a,b){a=a||la;b=b||"M0,0Z";bb.attr("d",a);pb.attr("d",b);y.transitionZoombox(bb,pb,ma,Qa);ma=!0}function k(a,c){a=aa+a;var e=Ea+c;c=b(aa-M,Ea-L);a=Math.min(b(a-M,e-L),G);e=Math.atan2(L-Ea,aa-M);if(f(c,a)){var k=la+t.pathSector(ja);Ja&&(k+=t.pathSector(Ja));var h=d(Ja,e)+d(ja,e)}g(k,h)}function h(a,c,d,e){a=J.findIntersectionXY(d,
e,d,[a-M,L-c]);return b(a[0],a[1])}function r(a,b){a=aa+a;var c=Ea+b,d=Math.atan2(L-c,a-M);b=pa(Math.atan2(L-Ea,aa-M),N);var k=pa(d,N);d=h(aa,Ea,b[0],b[1]);a=Math.min(h(a,c,k[0],k[1]),G);if(f(d,a)){var l=la+t.pathSector(ja);Ja&&(l+=t.pathSector(Ja));var n=[e(Ja,b[0],b[1]),e(ja,b[0],b[1])].join(" ")}g(l,n)}function m(){y.removeZoombox(v);if(null!==Ja&&null!==ja){y.showDoubleClickNotifier(v);var a=R._rl,b=(a[1]-a[0])/(1-F/G)/G;q.call("_guiRelayout",v,t.id+".radialaxis.range",[a[0]+(Ja-F)*b,a[0]+(ja-
F)*b])}}function p(a,b){var c=v._fullLayout.clickmode;y.removeZoombox(v);if(2===a){var d={},e;for(e in t.viewInitial)d[t.id+"."+e]=t.viewInitial[e];v.emit("plotly_doubleclick",null);q.call("_guiRelayout",v,d)}-1<c.indexOf("select")&&1===a&&C(b,v,[t.xaxis],[t.yaxis],t.id,Ia);-1<c.indexOf("event")&&x.click(v,b,t.id)}var t=this,v=t.gd,z=a._zoomlayer,A=I.MINZOOM,E=I.OFFEDGE,G=t.radius,F=t.innerRadius,H=t.cx,K=t.cy,M=t.cxx,L=t.cyy,O=t.sectorInRad,N=t.vangles,R=t.radialAxis,Ba=J.clampTiny,va=J.findXYatLength,
pa=J.findEnclosingVertexAngles,ya=I.cornerHalfWidth,ka=I.cornerLen/2,xa=y.makeDragger(t.layers,"path","maindrag","crosshair");l.select(xa).attr("d",t.pathSubplot()).attr("transform",n(H,K));var Ia={element:xa,gd:v,subplot:t.id,plotinfo:{id:t.id,xaxis:t.xaxis,yaxis:t.yaxis},xaxes:[t.xaxis],yaxes:[t.yaxis]},aa,Ea,Ja,ja,la,ma,Qa,bb,pb;Ia.prepFn=function(a,b,c){var d=v._fullLayout.dragmode,e=xa.getBoundingClientRect();aa=b-e.left;Ea=c-e.top;N&&(e=J.findPolygonOffset(G,O[0],O[1],N),aa+=M+e[0],Ea+=L+e[1]);
switch(d){case "zoom":Ia.moveFn=N?r:k;Ia.clickFn=p;Ia.doneFn=m;ja=Ja=null;la=t.pathSubplot();ma=!1;Qa=u(v._fullLayout[t.id].bgcolor).getLuminance();bb=y.makeZoombox(z,Qa,H,K,la);bb.attr("fill-rule","evenodd");pb=y.makeCorners(z,H,K);D(z);break;case "select":case "lasso":B(a,b,c,Ia,d)}};xa.onmousemove=function(a){x.hover(v,a,t.id);v._fullLayout._lasthover=xa;v._fullLayout._hoversubplot=t.id};xa.onmouseout=function(a){v._dragging||w.unhover(v,a)};w.init(Ia)};a.updateRadialDrag=function(a,c,f){function g(a,
b){Ba?Ba(a,b):(a=[a,-b],a=Math.abs(d.dot(a,[Math.cos(F),Math.sin(F)])/Math.sqrt(d.dot(a,a))),isNaN(a)||(Ba=.5>a?r:m))}function k(){null!==va?q.call("_guiRelayout",u,p.id+".radialaxis.angle",va):null!==pa&&q.call("_guiRelayout",u,p.id+".radialaxis.range["+f+"]",pa)}function r(a,c){0!==f&&(va=Math.atan2(A-(T+c),R+a-x),p.vangles&&(va=h(va,p.vangles)),va=O(va),a=n(x,A)+b(-va),t["radial-axis"].attr("transform",a),t["radial-line"].select("line").attr("transform",a),a=p.gd._fullLayout,p.updateRadialAxisTitle(a,
a[p.id],va))}function m(a,b){a=d.dot([a,-b],[Math.cos(F),Math.sin(F)]);pa=L-P*a;if(0<P!==(f?pa>K:pa<M))pa=null;else{b=u._fullLayout;a=b[p.id];B.range[f]=pa;B._rl[f]=pa;p.updateRadialAxis(b,a);p.xaxis.setRange();p.xaxis.setScale();p.yaxis.setRange();p.yaxis.setScale();b=!1;for(var c in p.traceHash){var e=p.traceHash[c],g=d.filterVisible(e);e[0][0].trace._module.plot(u,p,g,a);q.traceIs(c,"gl")&&g.length&&(b=!0)}b&&(H(u),E(u))}}var p=this,u=p.gd,t=p.layers,v=p.radius,z=p.innerRadius,x=p.cx,A=p.cy,B=
p.radialAxis,C=I.radialDragBoxSize,G=C/2;if(B.visible){var F=N(p.radialAxisAngle),J=B._rl,K=J[0],M=J[1],L=J[f],P=.75*(J[1]-J[0])/(1-c.hole)/v;if(f){var R=x+(v+G)*Math.cos(F);var T=A-(v+G)*Math.sin(F);c="radialdrag"}else R=x+(z-G)*Math.cos(F),T=A-(z-G)*Math.sin(F),c="radialdrag-inner";C=y.makeRectDragger(t,c,"crosshair",-G,-G,C,C);var Ha={element:C,gd:u};e(l.select(C),B.visible&&z<v,{transform:n(R,T)});var Ba,va,pa;Ha.prepFn=function(){pa=va=Ba=null;Ha.moveFn=g;Ha.doneFn=k;D(a._zoomlayer)};Ha.clampFn=
function(a,b){Math.sqrt(a*a+b*b)<I.MINDRAG&&(b=a=0);return[a,b]};w.init(Ha)}};a.updateAngularDrag=function(a){function e(a,e){var f=g.gd._fullLayout,r=f[g.id],w=O(Math.atan2(v+z-(K+e),J+a-t-z)-R);L=M+w;h.frontplot.attr("transform",n(g.xOffset2,g.yOffset2)+b([-w,t,v]));g.vangles?(N=g.radialAxisAngle+w,a=n(p,u)+b(-w),e=n(p,u)+b(-N),h.bg.attr("transform",a),h["radial-grid"].attr("transform",a),h["radial-axis"].attr("transform",e),h["radial-line"].select("line").attr("transform",e),g.updateRadialAxisTitle(f,
r,N)):g.clipPaths.forTraces.select("path").attr("transform",n(t,v)+b(w));C.each(function(){var a=l.select(this),d=c.getTranslate(a);a.attr("transform",n(d.x,d.y)+b([w]))});F.each(function(){var a=l.select(this),d=a.select("text"),e=c.getTranslate(a);a.attr("transform",b([w,d.attr("x"),d.attr("y")])+n(e.x,e.y))});m.rotation=d.modHalf(L,360);g.updateAngularAxis(f,r);g._hasClipOnAxisFalse&&!d.isFullCircle(g.sectorInRad)&&B.call(c.hideOutsideRangePoints,g);f=!1;for(var x in g.traceHash)q.traceIs(x,"gl")&&
(a=g.traceHash[x],e=d.filterVisible(a),a[0][0].trace._module.plot(k,g,e,r),e.length&&(f=!0));f&&(H(k),E(k))}function f(){F.select("text").attr("transform",null);var a={};a[g.id+".angularaxis.rotation"]=L;g.vangles&&(a[g.id+".radialaxis.angle"]=N);q.call("_guiRelayout",k,a)}var g=this,k=g.gd,h=g.layers,r=g.radius,m=g.angularAxis,p=g.cx,u=g.cy,t=g.cxx,v=g.cyy,z=I.angularDragBoxSize,x=y.makeDragger(h,"path","angulardrag","move"),A={element:x,gd:k};l.select(x).attr("d",g.pathAnnulus(r,r+z)).attr("transform",
n(p,u)).call(G,"move");var B=h.frontplot.select(".scatterlayer").selectAll(".trace"),C=B.selectAll(".point"),F=B.selectAll(".textpoint"),J,K,M,L,N,R;A.prepFn=function(b,c,d){M=a[g.id].angularaxis.rotation;b=x.getBoundingClientRect();J=c-b.left;K=d-b.top;R=Math.atan2(v+z-K,J-t-z);A.moveFn=e;A.doneFn=f;D(a._zoomlayer)};g.vangles&&!d.isFullCircle(g.sectorInRad)&&(A.prepFn=d.noop,G(l.select(x),null));w.init(A)};a.isPtInside=function(a){var b=this.sectorInRad,c=this.vangles,e=this.angularAxis.c2g(a.theta),
f=this.radialAxis;a=f.c2l(a.r);return(c?J.isPtInsidePolygon:d.isPtInsideSector)(a,e,f._rl,b,c)};a.pathArc=function(a){var b=this.sectorInRad,c=this.vangles;return(c?J.pathPolygon:d.pathArc)(a,b[0],b[1],c)};a.pathSector=function(a){var b=this.sectorInRad,c=this.vangles;return(c?J.pathPolygon:d.pathSector)(a,b[0],b[1],c)};a.pathAnnulus=function(a,b){var c=this.sectorInRad,e=this.vangles;return(e?J.pathPolygonAnnulus:d.pathAnnulus)(a,b,c[0],c[1],e)};a.pathSubplot=function(){var a=this.innerRadius,b=
this.radius;return a?this.pathAnnulus(a,b):this.pathSector(b)};a.fillViewInitialKey=function(a,b){a in this.viewInitial||(this.viewInitial[a]=b)}},{"../../components/color":577,"../../components/dragelement":595,"../../components/drawing":598,"../../components/fx":616,"../../components/titles":665,"../../constants/alignment":672,"../../lib":700,"../../lib/clear_gl_canvases":685,"../../lib/setcursor":720,"../../plot_api/subroutines":739,"../../plots/cartesian/axes":748,"../../registry":829,"../cartesian/autorange":747,
"../cartesian/dragbox":756,"../cartesian/select":765,"../cartesian/set_convert":766,"../plots":810,"./constants":811,"./helpers":812,"./set_convert":823,d3:154,tinycolor2:521}],823:[function(a,t,m){function p(a,b){var e=b._subplot;a.setGeometry=function(){var b=a._rl[0],f=a._rl[1],c=e.innerRadius,g=(e.radius-c)/(f-b),h=c/g,l=b>f?function(a){return 0>=a}:function(a){return 0<=a};a.c2g=function(c){c=a.c2l(c)-b;return(l(c)?c:0)+h};a.g2c=function(c){return a.l2c(c+b-h)};a.g2p=function(a){return a*g};
a.c2p=function(b){return a.g2p(a.c2g(b))}}}function g(a,e){var g=a.type;if("linear"===g){var d=a.d2c,f=a.c2d;a.d2c=function(a,b){a=d(a);return"degrees"===b?n(a):a};a.c2d=function(a,d){a="degrees"===d?b(a):a;return f(a)}}a.makeCalcdata=function(b,d){var c=b[d],e=b._length,f;if(c){if(h.isTypedArray(c)&&"linear"===g){if(e===c.length)return c;if(c.subarray)return c.subarray(0,e)}d=Array(e);for(f=0;f<e;f++)d[f]=a.d2c(c[f],b.thetaunit)}else for(f=d+"0",d="d"+d,c=(f in b)?a.d2c(b[f],b.thetaunit):0,b=b[d]?
a.d2c(b[d],b.thetaunit):(a.period||2*Math.PI)/e,d=Array(e),f=0;f<e;f++)d[f]=c+f*b;return d};a.setGeometry=function(){var c=e.sector,d=c.map(n),f={clockwise:-1,counterclockwise:1}[a.direction],l=n(a.rotation),q=function(a){return(a-l)/f},m;switch(g){case "linear":var p=m=h.identity;var u=n;var t=b;a.range=h.isFullCircle(d)?[c[0],c[0]+360]:d.map(q).map(b);break;case "category":c=a._categories.length;var F=a.period?Math.max(a.period,c):c;p=u=function(a){return 2*a*Math.PI/F};m=t=function(a){return a*
F/Math.PI/2};a.range=[0,F]}a.c2g=function(a){return f*p(a)+l};a.g2c=function(a){return m(q(a))};a.t2g=function(a){return f*u(a)+l};a.g2t=function(a){return t(q(a))}}}var h=a("../../lib"),e=a("../cartesian/set_convert"),n=h.deg2rad,b=h.rad2deg;t.exports=function(a,b,h){e(a,h);switch(a._id){case "x":case "radialaxis":p(a,b);break;case "angularaxis":g(a,b)}}},{"../../lib":700,"../cartesian/set_convert":766}],824:[function(a,t,m){var p=a("../lib"),g=a("../plot_api/plot_template"),h=a("./domain").defaults;
t.exports=function(a,n,b,l){function e(a,b){return p.coerce(r,m,q,a,b)}var q=l.attributes;b=l.handleDefaults;for(var d=l.partition||"x",f=n._subplots[l.type],c=f.length,k=c&&f[0].replace(/\d+$/,""),r,m,t=0;t<c;t++){var A=f[t];r=a[A]?a[A]:a[A]={};m=g.newContainer(n,A,k);e("uirevision",n.uirevision);var y={};y[d]=[t/c,(t+1)/c];h(m,n,e,y);l.id=A;b(r,m,e,l)}}},{"../lib":700,"../plot_api/plot_template":738,"./domain":773}],825:[function(a,t,m){var p=a("./ternary"),g=a("../../plots/get_data").getSubplotCalcData;
t=a("../../lib").counterRegex;m.name="ternary";var h=m.attr="subplot";m.idRoot="ternary";m.idRegex=m.attrRegex=t("ternary");(m.attributes={})[h]={valType:"subplotid",dflt:"ternary",editType:"calc"};m.layoutAttributes=a("./layout_attributes");m.supplyLayoutDefaults=a("./layout_defaults");m.plot=function(a){for(var e=a._fullLayout,b=a.calcdata,h=e._subplots.ternary,m=0;m<h.length;m++){var q=h[m],d=g(b,"ternary",q),f=e[q]._subplot;f||(f=new p({id:q,graphDiv:a,container:e._ternarylayer.node()},e),e[q]._subplot=
f);f.plot(d,e,a._promises)}};m.clean=function(a,g,b,h){a=h._subplots.ternary||[];for(b=0;b<a.length;b++){var e=a[b],l=h[e]._subplot;!g[e]&&l&&(l.plotContainer.remove(),l.clipDef.remove(),l.clipDefRelative.remove(),l.layers["a-title"].remove(),l.layers["b-title"].remove(),l.layers["c-title"].remove())}}},{"../../lib":700,"../../plots/get_data":784,"./layout_attributes":826,"./layout_defaults":827,"./ternary":828}],826:[function(a,t,m){m=a("../../components/color/attributes");var p=a("../domain").attributes,
g=a("../cartesian/layout_attributes"),h=a("../../plot_api/edit_types").overrideAll;a=a("../../lib/extend").extendFlat;a={title:g.title,color:g.color,tickmode:g.tickmode,nticks:a({},g.nticks,{dflt:6,min:1}),tick0:g.tick0,dtick:g.dtick,tickvals:g.tickvals,ticktext:g.ticktext,ticks:g.ticks,ticklen:g.ticklen,tickwidth:g.tickwidth,tickcolor:g.tickcolor,showticklabels:g.showticklabels,showtickprefix:g.showtickprefix,tickprefix:g.tickprefix,showticksuffix:g.showticksuffix,ticksuffix:g.ticksuffix,showexponent:g.showexponent,
exponentformat:g.exponentformat,separatethousands:g.separatethousands,tickfont:g.tickfont,tickangle:g.tickangle,tickformat:g.tickformat,tickformatstops:g.tickformatstops,hoverformat:g.hoverformat,showline:a({},g.showline,{dflt:!0}),linecolor:g.linecolor,linewidth:g.linewidth,showgrid:a({},g.showgrid,{dflt:!0}),gridcolor:g.gridcolor,gridwidth:g.gridwidth,layer:g.layer,min:{valType:"number",dflt:0,min:0},_deprecated:{title:g._deprecated.title,titlefont:g._deprecated.titlefont}};t=t.exports=h({domain:p({name:"ternary"}),
bgcolor:{valType:"color",dflt:m.background},sum:{valType:"number",dflt:1,min:0},aaxis:a,baxis:a,caxis:a},"plot","from-root");t.uirevision={valType:"any",editType:"none"};t.aaxis.uirevision=t.baxis.uirevision=t.caxis.uirevision={valType:"any",editType:"none"}},{"../../components/color/attributes":576,"../../lib/extend":690,"../../plot_api/edit_types":731,"../cartesian/layout_attributes":760,"../domain":773}],827:[function(a,t,m){function p(a,b,d,f){var k=d("bgcolor");d=d("sum");f.bgColor=h.combine(k,
f.paper_bgcolor);for(var l,n,r=0;r<c.length;r++)k=c[r],l=a[k]||{},n=e.newContainer(b,k),n._name=k,g(l,n,f,b);f=b.aaxis;k=b.baxis;b=b.caxis;f.min+k.min+b.min>=d&&(f.min=0,k.min=0,b.min=0,a.aaxis&&delete a.aaxis.min,a.baxis&&delete a.baxis.min,a.caxis&&delete a.caxis.min)}function g(a,b,c,e){function g(c,d){return n.coerce(a,b,h,c,d)}var h=f[b._name];g("uirevision",e.uirevision);b.type="linear";e=g("color");var k=e!==h.color.dflt?e:c.font.color,r=b._name.charAt(0).toUpperCase(),m="Component "+r,p=g("title.text",
m);b._hovertitle=p===m?p:r;n.coerceFont(g,"title.font",{family:c.font.family,size:Math.round(1.2*c.font.size),color:k});g("min");q(a,b,g,"linear");l(a,b,g,"linear",{});u(a,b,g,{outerTicks:!0});g("showticklabels")&&(n.coerceFont(g,"tickfont",{family:c.font.family,size:c.font.size,color:k}),g("tickangle"),g("tickformat"));d(a,b,g,{dfltColor:e,bgColor:c.bgColor,blend:60,showLine:!0,showGrid:!0,noZeroLine:!0,attributes:h});g("hoverformat");g("layer")}var h=a("../../components/color"),e=a("../../plot_api/plot_template"),
n=a("../../lib"),b=a("../subplot_defaults"),l=a("../cartesian/tick_label_defaults"),u=a("../cartesian/tick_mark_defaults"),q=a("../cartesian/tick_value_defaults"),d=a("../cartesian/line_grid_defaults"),f=a("./layout_attributes"),c=["aaxis","baxis","caxis"];t.exports=function(a,c,d){b(a,c,d,{type:"ternary",attributes:f,handleDefaults:p,font:c.font,paper_bgcolor:c.paper_bgcolor})}},{"../../components/color":577,"../../lib":700,"../../plot_api/plot_template":738,"../cartesian/line_grid_defaults":762,
"../cartesian/tick_label_defaults":767,"../cartesian/tick_mark_defaults":768,"../cartesian/tick_value_defaults":769,"../subplot_defaults":824,"./layout_attributes":826}],828:[function(a,t,m){function p(a,b){this.id=a.id;this.graphDiv=a.graphDiv;this.init(b);this.makeFramework(b);this.cTickLayout=this.bTickLayout=this.aTickLayout=null}function g(a){h.select(a).selectAll(".zoombox,.js-zoombox-backdrop,.js-zoombox-menu,.zoombox-corners").remove()}var h=a("d3"),e=a("tinycolor2"),n=a("../../registry"),
b=a("../../lib"),l=b._,u=a("../../components/color"),q=a("../../components/drawing"),d=a("../cartesian/set_convert"),f=a("../../lib/extend").extendFlat,c=a("../plots"),k=a("../cartesian/axes"),r=a("../../components/dragelement"),v=a("../../components/fx"),z=a("../../components/titles"),A=a("../cartesian/select").prepSelect,y=a("../cartesian/select").selectOnClick,w=a("../cartesian/select").clearSelect,x=a("../cartesian/constants");t.exports=p;a=p.prototype;a.init=function(a){this.container=a._ternarylayer;
this.defs=a._defs;this.layoutId=a._uid;this.traceHash={};this.layers={}};a.plot=function(a,b){var d=b[this.id];b=b._size;this._hasClipOnAxisFalse=!1;for(var e=0;e<a.length;e++)if(!1===a[e][0].trace.cliponaxis){this._hasClipOnAxisFalse=!0;break}this.updateLayers(d);this.adjustLayout(d,b);c.generalUpdatePerTraceModule(this.graphDiv,this,a,d);this.layers.plotbg.select("path").call(u.fill,d.bgcolor)};a.makeFramework=function(a){var c=this.graphDiv,d=a[this.id],e=this.clipId="clip"+this.layoutId+this.id,
f=this.clipIdRelative="clip-relative"+this.layoutId+this.id;this.clipDef=b.ensureSingleById(a._clips,"clipPath",e,function(a){a.append("path").attr("d","M0,0Z")});this.clipDefRelative=b.ensureSingleById(a._clips,"clipPath",f,function(a){a.append("path").attr("d","M0,0Z")});this.plotContainer=b.ensureSingle(this.container,"g",this.id);this.updateLayers(d);q.setClipUrl(this.layers.backplot,e,c);q.setClipUrl(this.layers.grids,e,c)};a.updateLayers=function(a){var b=this.layers,c=["draglayer","plotbg",
"backplot","grids"];"below traces"===a.aaxis.layer&&c.push("aaxis","aline");"below traces"===a.baxis.layer&&c.push("baxis","bline");"below traces"===a.caxis.layer&&c.push("caxis","cline");c.push("frontplot");"above traces"===a.aaxis.layer&&c.push("aaxis","aline");"above traces"===a.baxis.layer&&c.push("baxis","bline");"above traces"===a.caxis.layer&&c.push("caxis","cline");a=this.plotContainer.selectAll("g.toplevel").data(c,String);var d=["agrid","bgrid","cgrid"];a.enter().append("g").attr("class",
function(a){return"toplevel "+a}).each(function(a){var c=h.select(this);b[a]=c;"frontplot"===a?c.append("g").classed("scatterlayer",!0):"backplot"===a?c.append("g").classed("maplayer",!0):"plotbg"===a?c.append("path").attr("d","M0,0Z"):"aline"===a||"bline"===a||"cline"===a?c.append("path"):"grids"===a&&d.forEach(function(a){b[a]=c.append("g").classed("grid "+a,!0)})});a.order()};var F=Math.sqrt(4/3);a.adjustLayout=function(a,b){var c=this,e=a.domain,g=(e.x[0]+e.x[1])/2,h=(e.y[0]+e.y[1])/2,k=e.x[1]-
e.x[0],l=e.y[1]-e.y[0],n=k*b.w,r=l*b.h,m=a.sum,p=a.aaxis.min,t=a.baxis.min,v=a.caxis.min;if(n>F*r){var w=r;e=w*F}else e=n,w=e/F;n=k*e/n;l=l*w/r;k=b.l+b.w*g-e/2;b=b.t+b.h*(1-h)-w/2;c.x0=k;c.y0=b;c.w=e;c.h=w;c.sum=m;c.xaxis={type:"linear",range:[p+2*v-m,m-p-2*t],domain:[g-n/2,g+n/2],_id:"x"};d(c.xaxis,c.graphDiv._fullLayout);c.xaxis.setScale();c.xaxis.isPtWithinRange=function(a){return a.a>=c.aaxis.range[0]&&a.a<=c.aaxis.range[1]&&a.b>=c.baxis.range[1]&&a.b<=c.baxis.range[0]&&a.c>=c.caxis.range[1]&&
a.c<=c.caxis.range[0]};c.yaxis={type:"linear",range:[p,m-t-v],domain:[h-l/2,h+l/2],_id:"y"};d(c.yaxis,c.graphDiv._fullLayout);c.yaxis.setScale();c.yaxis.isPtWithinRange=function(){return!0};n=c.yaxis.domain[0];g=c.aaxis=f({},a.aaxis,{range:[p,m-t-v],side:"left",tickangle:(+a.aaxis.tickangle||0)-30,domain:[n,n+l*F],anchor:"free",position:0,_id:"y",_length:e});d(g,c.graphDiv._fullLayout);g.setScale();h=c.baxis=f({},a.baxis,{range:[m-p-v,t],side:"bottom",domain:c.xaxis.domain,anchor:"free",position:0,
_id:"x",_length:e});d(h,c.graphDiv._fullLayout);h.setScale();a=c.caxis=f({},a.caxis,{range:[m-p-t,v],side:"right",tickangle:(+a.caxis.tickangle||0)+30,domain:[n,n+l*F],anchor:"free",position:0,_id:"y",_length:e});d(a,c.graphDiv._fullLayout);a.setScale();m="M"+k+","+(b+w)+"h"+e+"l-"+e/2+",-"+w+"Z";c.clipDef.select("path").attr("d",m);c.layers.plotbg.select("path").attr("d",m);m="M0,"+w+"h"+e+"l-"+e/2+",-"+w+"Z";c.clipDefRelative.select("path").attr("d",m);m="translate("+k+","+b+")";c.plotContainer.selectAll(".scatterlayer,.maplayer").attr("transform",
m);c.clipDefRelative.select("path").attr("transform",null);m="translate("+(k-h._offset)+","+(b+w)+")";c.layers.baxis.attr("transform",m);c.layers.bgrid.attr("transform",m);m="translate("+(k+e/2)+","+b+")rotate(30)translate(0,"+-g._offset+")";c.layers.aaxis.attr("transform",m);c.layers.agrid.attr("transform",m);m="translate("+(k+e/2)+","+b+")rotate(-30)translate(0,"+-a._offset+")";c.layers.caxis.attr("transform",m);c.layers.cgrid.attr("transform",m);c.drawAxes(!0);c.layers.aline.select("path").attr("d",
g.showline?"M"+k+","+(b+w)+"l"+e/2+",-"+w:"M0,0").call(u.stroke,g.linecolor||"#000").style("stroke-width",(g.linewidth||0)+"px");c.layers.bline.select("path").attr("d",h.showline?"M"+k+","+(b+w)+"h"+e:"M0,0").call(u.stroke,h.linecolor||"#000").style("stroke-width",(h.linewidth||0)+"px");c.layers.cline.select("path").attr("d",a.showline?"M"+(k+e/2)+","+b+"l"+e/2+","+w:"M0,0").call(u.stroke,a.linecolor||"#000").style("stroke-width",(a.linewidth||0)+"px");c.graphDiv._context.staticPlot||c.initInteractions();
q.setClipUrl(c.layers.frontplot,c._hasClipOnAxisFalse?null:c.clipId,c.graphDiv)};a.drawAxes=function(a){var b=this.graphDiv,c=this.id.substr(7)+"title",d=this.layers,e=this.aaxis,f=this.baxis,g=this.caxis;this.drawAx(e);this.drawAx(f);this.drawAx(g);if(a){a=Math.max(e.showticklabels?e.tickfont.size/2:0,(g.showticklabels?.75*g.tickfont.size:0)+("outside"===g.ticks?.87*g.ticklen:0));var h=(f.showticklabels?f.tickfont.size:0)+("outside"===f.ticks?f.ticklen:0)+3;d["a-title"]=z.draw(b,"a"+c,{propContainer:e,
propName:this.id+".aaxis.title",placeholder:l(b,"Click to enter Component A title"),attributes:{x:this.x0+this.w/2,y:this.y0-e.title.font.size/3-a,"text-anchor":"middle"}});d["b-title"]=z.draw(b,"b"+c,{propContainer:f,propName:this.id+".baxis.title",placeholder:l(b,"Click to enter Component B title"),attributes:{x:this.x0-h,y:this.y0+this.h+.83*f.title.font.size+h,"text-anchor":"middle"}});d["c-title"]=z.draw(b,"c"+c,{propContainer:g,propName:this.id+".caxis.title",placeholder:l(b,"Click to enter Component C title"),
attributes:{x:this.x0+this.w+h,y:this.y0+this.h+.83*g.title.font.size+h,"text-anchor":"middle"}})}};a.drawAx=function(a){var c=this.graphDiv,d=a._name,e=d.charAt(0),f=a._id;d=this.layers[d];var g=e+"tickLayout",h=a.ticks+String(a.ticklen)+String(a.showticklabels);this[g]!==h&&(d.selectAll("."+f+"tick").remove(),this[g]=h);a.setScale();f=k.calcTicks(a);g=k.clipEnds(a,f);h=k.makeTransFn(a);var l=k.getTickSigns(a)[2],n=b.deg2rad(30),r=l*(a.linewidth||1)/2;l*=a.ticklen;var q=this.w,m=this.h;q={a:"M0,0l"+
m+",-"+q/2,b:"M0,0l-"+q/2+",-"+m,c:"M0,0l-"+m+","+q/2}[e];k.drawTicks(c,a,{vals:"inside"===a.ticks?g:f,layer:d,path:"b"===e?"M0,"+r+"l"+Math.sin(n)*l+","+Math.cos(n)*l:"M"+r+",0l"+Math.cos(n)*l+","+-Math.sin(n)*l,transFn:h,crisp:!1});k.drawGrid(c,a,{vals:g,layer:this.layers[e+"grid"],path:q,transFn:h,crisp:!1});k.drawLabels(c,a,{vals:f,layer:d,transFn:h,labelFns:k.makeLabelFns(a,0,30)})};t=x.MINZOOM/2+.87;var B="m-0.87,.5h"+t+"v3h-"+(t+5.2)+"l"+(t/2+2.6)+",-"+(.87*t+4.5)+"l2.6,1.5l-"+t/2+","+.87*
t+"Z",C="m0.87,.5h-"+t+"v3h"+(t+5.2)+"l-"+(t/2+2.6)+",-"+(.87*t+4.5)+"l-2.6,1.5l"+t/2+","+.87*t+"Z",D="m0,1l"+t/2+","+.87*t+"l2.6,-1.5l-"+(t/2+2.6)+",-"+(.87*t+4.5)+"l-"+(t/2+2.6)+","+(.87*t+4.5)+"l2.6,1.5l"+t/2+",-"+.87*t+"Z",G=!0;a.initInteractions=function(){function a(a){var b={};b[m.id+".aaxis.min"]=a.a;b[m.id+".baxis.min"]=a.b;b[m.id+".caxis.min"]=a.c;return b}function c(b,c){var d=t._fullLayout.clickmode;g(t);2===b&&(t.emit("plotly_doubleclick",null),n.call("_guiRelayout",t,a({a:0,b:0,c:0})));
-1<d.indexOf("select")&&1===b&&y(c,t,[m.xaxis],[m.yaxis],m.id,T);-1<d.indexOf("event")&&v.click(t,c,m.id)}function d(a,b){var c=P+a,d=S+b;b=Math.max(0,Math.min(1,1-S/m.h,1-d/m.h));a=Math.max(0,Math.min(1,1-(P+(m.h-S)/Math.sqrt(3))/m.w,1-(c+(m.h-d)/Math.sqrt(3))/m.w));c=Math.max(0,Math.min(1,(P-(m.h-S)/Math.sqrt(3))/m.w,(c-(m.h-d)/Math.sqrt(3))/m.w));d=(b/2+c)*m.w;var e=(1-b/2-a)*m.w,f=(d+e)/2,g=e-d,h=(1-b)*m.h,k=h-g/F;g<x.MINZOOM?(ca=ba,U.attr("d",W),na.attr("d","M0,0Z")):(ca={a:ba.a+b*da,b:ba.b+
a*da,c:ba.c+c*da},U.attr("d",W+"M"+d+","+h+"H"+e+"L"+f+","+k+"L"+d+","+h+"Z"),na.attr("d","M"+P+","+S+"m0.5,0.5h5v-2h-5v-5h-2v5h-5v2h5v5h2ZM"+d+","+h+B+"M"+e+","+h+C+"M"+f+","+k+D));ea||(U.transition().style("fill",.2<Y?"rgba(0,0,0,0.4)":"rgba(255,255,255,0.3)").duration(200),na.transition().style("opacity",1).duration(200),ea=!0)}function f(){g(t);ca!==ba&&(n.call("_guiRelayout",t,a(ca)),G&&t.data&&t._context.showTips&&(b.notifier(l(t,"Double-click to zoom back out"),"long"),G=!1))}function h(a,
b){var c=a/m.xaxis._m,d=b/m.yaxis._m;ca={a:ba.a-d,b:ba.b+(c+d)/2,c:ba.c-(c-d)/2};c=[ca.a,ca.b,ca.c].sort();d=c.indexOf(ca.a);var e=c.indexOf(ca.b),f=c.indexOf(ca.c);0>c[0]&&(0>c[1]+c[0]/2?(c[2]+=c[0]+c[1],c[0]=c[1]=0):(c[2]+=c[0]/2,c[1]+=c[0]/2,c[0]=0),ca={a:c[d],b:c[e],c:c[f]},b=(ba.a-ca.a)*m.yaxis._m,a=(ba.c-ca.c-ba.b+ca.b)*m.xaxis._m);c="translate("+(m.x0+a)+","+(m.y0+b)+")";m.plotContainer.selectAll(".scatterlayer,.maplayer").attr("transform",c);a="translate("+-a+","+-b+")";m.clipDefRelative.select("path").attr("transform",
a);m.aaxis.range=[ca.a,m.sum-ca.b-ca.c];m.baxis.range=[m.sum-ca.a-ca.c,ca.b];m.caxis.range=[m.sum-ca.a-ca.b,ca.c];m.drawAxes(!1);m._hasClipOnAxisFalse&&m.plotContainer.select(".scatterlayer").selectAll(".trace").call(q.hideOutsideRangePoints,m)}function k(){n.call("_guiRelayout",t,a(ca))}var m=this,p=m.layers.plotbg.select("path").node(),t=m.graphDiv,z=t._fullLayout._zoomlayer,T={element:p,gd:t,plotinfo:{id:m.id,xaxis:m.xaxis,yaxis:m.yaxis},subplot:m.id,prepFn:function(a,b,g){T.xaxes=[m.xaxis];T.yaxes=
[m.yaxis];var l=t._fullLayout.dragmode;T.minDrag="lasso"===l?1:void 0;"zoom"===l?(T.moveFn=d,T.clickFn=c,T.doneFn=f,a=p.getBoundingClientRect(),P=b-a.left,S=g-a.top,ca=ba={a:m.aaxis.range[0],b:m.baxis.range[1],c:m.caxis.range[1]},da=m.aaxis.range[1]-ba.a,Y=e(m.graphDiv._fullLayout[m.id].bgcolor).getLuminance(),W="M0,"+m.h+"L"+m.w/2+", 0L"+m.w+","+m.h+"Z",ea=!1,U=z.append("path").attr("class","zoombox").attr("transform","translate("+m.x0+", "+m.y0+")").style({fill:.2<Y?"rgba(0,0,0,0)":"rgba(255,255,255,0)",
"stroke-width":0}).attr("d",W),na=z.append("path").attr("class","zoombox-corners").attr("transform","translate("+m.x0+", "+m.y0+")").style({fill:u.background,stroke:u.defaultLine,"stroke-width":1,opacity:0}).attr("d","M0,0Z"),w(z)):"pan"===l?(T.moveFn=h,T.clickFn=c,T.doneFn=k,ca=ba={a:m.aaxis.range[0],b:m.baxis.range[1],c:m.caxis.range[1]},w(z)):"select"!==l&&"lasso"!==l||A(a,b,g,T,l)}},P,S,ba,da,ca,Y,W,ea,U,na;p.onmousemove=function(a){v.hover(t,a,m.id);t._fullLayout._lasthover=p;t._fullLayout._hoversubplot=
m.id};p.onmouseout=function(a){t._dragging||r.unhover(t,a)};r.init(T)}},{"../../components/color":577,"../../components/dragelement":595,"../../components/drawing":598,"../../components/fx":616,"../../components/titles":665,"../../lib":700,"../../lib/extend":690,"../../registry":829,"../cartesian/axes":748,"../cartesian/constants":754,"../cartesian/select":765,"../cartesian/set_convert":766,"../plots":810,d3:154,tinycolor2:521}],829:[function(a,t,m){function p(a){if(a.layoutAttributes&&(a=a.layoutAttributes._arrayAttrRegexps))for(var b=
0;b<a.length;b++)u(m.layoutArrayRegexes,a[b])}function g(a,b){(a=m.componentsRegistry[a].schema)&&a.traces&&(a=a.traces[b])&&k(m.modules[b]._module.attributes,a)}function h(a,b){(a=m.componentsRegistry[a].schema)&&a.transforms&&(a=a.transforms[b])&&k(m.transformsRegistry[b].attributes,a)}function e(a,b){if((a=m.componentsRegistry[a].schema)&&a.subplots){var c=m.subplotsRegistry[b];b=c.layoutAttributes;c="subplot"===c.attr?c.name:c.attr;Array.isArray(c)&&(c=c[0]);a=a.subplots[c];b&&a&&k(b,a)}}function n(a){"object"===
typeof a&&(a=a.type);return a}var b=a("./lib/loggers"),l=a("./lib/noop"),u=a("./lib/push_unique"),q=a("./lib/is_plain_object");t=a("./lib/extend");var d=a("./plots/attributes"),f=a("./plots/layout_attributes"),c=t.extendFlat,k=t.extendDeepAll;m.modules={};m.allCategories={};m.allTypes=[];m.subplotsRegistry={};m.transformsRegistry={};m.componentsRegistry={};m.layoutArrayContainers=[];m.layoutArrayRegexes=[];m.traceLayoutAttributes={};m.localeRegistry={};m.apiMethodRegistry={};m.collectableSubplotTypes=
null;m.register=function(a){m.collectableSubplotTypes=null;if(a)a&&!Array.isArray(a)&&(a=[a]);else throw Error("No argument passed to Plotly.register.");for(var d=0;d<a.length;d++){var l=a[d];if(!l)throw Error("Invalid module was attempted to be registered!");switch(l.moduleType){case "trace":var n=void 0,r=l.name,t=l.categories,x=l.meta;if(m.modules[r])b.log("Type "+r+" already registered");else{if(!m.subplotsRegistry[l.basePlotModule.name]){var F=void 0,B=l.basePlotModule,C=B.name;if(m.subplotsRegistry[C])b.log("Plot type "+
C+" already registered.");else for(F in p(B),m.subplotsRegistry[C]=B,m.componentsRegistry)e(F,B.name)}F={};for(B=0;B<t.length;B++)F[t[B]]=!0,m.allCategories[t[B]]=!0;m.modules[r]={_module:l,categories:F};x&&Object.keys(x).length&&(m.modules[r].meta=x);m.allTypes.push(r);for(n in m.componentsRegistry)g(n,r);l.layoutAttributes&&c(m.traceLayoutAttributes,l.layoutAttributes)}break;case "transform":n=void 0;if("string"!==typeof l.name)throw Error("Transform module *name* must be a string.");r="Transform module "+
l.name;t="function"===typeof l.transform;x="function"===typeof l.calcTransform;if(!t&&!x)throw Error(r+" is missing a *transform* or *calcTransform* method.");t&&x&&b.log([r+" has both a *transform* and *calcTransform* methods.","Please note that all *transform* methods are executed before all *calcTransform* methods."].join(" "));q(l.attributes)||b.log(r+" registered without an *attributes* object.");"function"!==typeof l.supplyDefaults&&b.log(r+" registered without a *supplyDefaults* method.");
m.transformsRegistry[l.name]=l;for(n in m.componentsRegistry)h(n,l.name);break;case "component":t=r=n=void 0;if("string"!==typeof l.name)throw Error("Component module *name* must be a string.");x=l.name;m.componentsRegistry[x]=l;l.layoutAttributes&&(l.layoutAttributes._isLinkedToArray&&u(m.layoutArrayContainers,x),p(l));for(t in m.modules)g(x,t);for(r in m.subplotsRegistry)e(x,r);for(n in m.transformsRegistry)h(x,n);l.schema&&l.schema.layout&&k(f,l.schema.layout);break;case "locale":t=l;r=t.name;
n=r.split("-")[0];l=t.dictionary;t=t.format;x=l&&Object.keys(l).length;F=t&&Object.keys(t).length;B=m.localeRegistry;(C=B[r])||(B[r]=C={});n!==r&&((r=B[n])||(B[n]=r={}),x&&r.dictionary===C.dictionary&&(r.dictionary=l),F&&r.format===C.format&&(r.format=t));x&&(C.dictionary=l);F&&(C.format=t);break;case "apiMethod":m.apiMethodRegistry[l.name]=l.fn;break;default:throw Error("Invalid module was attempted to be registered!");}}};m.getModule=function(a){return(a=m.modules[n(a)])?a._module:!1};m.traceIs=
function(a,c){a=n(a);if("various"===a)return!1;var e=m.modules[a];e||(a&&"area"!==a&&b.log("Unrecognized trace type "+a+"."),e=m.modules[d.type.dflt]);return!!e.categories[c]};m.getTransformIndices=function(a,b){var c=[];a=a.transforms||[];for(var d=0;d<a.length;d++)a[d].type===b&&c.push(d);return c};m.hasTransform=function(a,b){a=a.transforms||[];for(var c=0;c<a.length;c++)if(a[c].type===b)return!0;return!1};m.getComponentMethod=function(a,b){return(a=m.componentsRegistry[a])?a[b]||l:l};m.call=function(){var a=
arguments[0],b=[].slice.call(arguments,1);return m.apiMethodRegistry[a].apply(null,b)}},{"./lib/extend":690,"./lib/is_plain_object":701,"./lib/loggers":704,"./lib/noop":709,"./lib/push_unique":714,"./plots/attributes":745,"./plots/layout_attributes":801}],830:[function(a,t,m){function p(a){switch(a){case "themes__thumb":a={autosize:!0,width:150,height:150,title:{text:""},showlegend:!1,margin:{l:5,r:5,t:5,b:5,pad:0},annotations:[]};break;case "thumbnail":a={title:{text:""},hidesources:!0,showlegend:!1,
borderwidth:0,bordercolor:"",margin:{l:1,r:1,t:1,b:1,pad:0},annotations:[]};break;default:a={}}return a}a=a("../lib");var g=a.extendFlat,h=a.extendDeep;t.exports=function(a,n){a.framework&&a.framework.isPolar&&(a=a.framework.getConfig());var b,e=a.layout,m=h([],a.data);e=h({},e,p(n.tileClass));a=a._context||{};n.width&&(e.width=n.width);n.height&&(e.height=n.height);if("thumbnail"===n.tileClass||"themes__thumb"===n.tileClass){e.annotations=[];var q=Object.keys(e);for(b=0;b<q.length;b++)-1<["xaxis",
"yaxis","zaxis"].indexOf(q[b].slice(0,5))&&(e[q[b]].title={text:""});for(b=0;b<m.length;b++)q=m[b],q.showscale=!1,q.marker&&(q.marker.showscale=!1),"pie"===q.type&&(q.textposition="none")}if(Array.isArray(n.annotations))for(b=0;b<n.annotations.length;b++)e.annotations.push(n.annotations[b]);q=Object.keys(e).filter(function(a){return a.match(/^scene\d*$/)});if(q.length){var d={};"thumbnail"===n.tileClass&&(d={title:{text:""},showaxeslabels:!1,showticklabels:!1,linetickenable:!1});for(b=0;b<q.length;b++){var f=
e[q[b]];f.xaxis||(f.xaxis={});f.yaxis||(f.yaxis={});f.zaxis||(f.zaxis={});g(f.xaxis,d);g(f.yaxis,d);g(f.zaxis,d);f._scene=null}}b=document.createElement("div");n.tileClass&&(b.className=n.tileClass);m={gd:b,td:b,layout:e,data:m,config:{staticPlot:void 0===n.staticPlot?!0:n.staticPlot,plotGlPixelRatio:void 0===n.plotGlPixelRatio?2:n.plotGlPixelRatio,displaylogo:n.displaylogo||!1,showLink:n.showLink||!1,showTips:n.showTips||!1,mapboxAccessToken:a.mapboxAccessToken}};"transparent"!==n.setBackground&&
(m.config.setBackground=n.setBackground||"opaque");m.gd.defaultLayout=p(n.tileClass);return m}},{"../lib":700}],831:[function(a,t,m){var p=a("../plot_api/to_image"),g=a("../lib"),h=a("./filesaver");t.exports=function(a,n){var b;g.isPlainObject(a)||(b=g.getGraphDiv(a));n=n||{};n.format=n.format||"png";return new Promise(function(e,m){b&&b._snapshotInProgress&&m(Error("Snapshotting already in progress."));g.isIE()&&"svg"!==n.format&&m(Error("Sorry IE does not support downloading from canvas. Try {format:'svg'} instead."));
b&&(b._snapshotInProgress=!0);var l=p(a,n),d=n.filename||a.fn||"newplot";d+="."+n.format;l.then(function(a){b&&(b._snapshotInProgress=!1);return h(a,d)}).then(function(a){e(a)}).catch(function(a){b&&(b._snapshotInProgress=!1);m(a)})})}},{"../lib":700,"../plot_api/to_image":741,"./filesaver":832}],832:[function(a,t,m){t.exports=function(a,g){var h=document.createElement("a"),e="download"in h,n=/Version\/[\d\.]+.*Safari/.test(navigator.userAgent);return new Promise(function(b,l){"undefined"!==typeof navigator&&
/MSIE [1-9]\./.test(navigator.userAgent)&&l(Error("IE \x3c 10 unsupported"));n&&(document.location.href="data:application/octet-stream"+a.slice(a.search(/[,;]/)),b(g));g||(g="download");e&&(h.href=a,h.download=g,document.body.appendChild(h),h.click(),document.body.removeChild(h),b(g));if("undefined"!==typeof navigator&&navigator.msSaveBlob){var m=a.split(/^data:image\/svg\+xml,/)[1];m=decodeURIComponent(m);navigator.msSaveBlob(new Blob([m]),g);b(g)}l(Error("download error"))})}},{}],833:[function(a,
t,m){m.getDelay=function(a){return a._has?a._has("gl3d")||a._has("gl2d")||a._has("mapbox")?500:0:0};m.getRedrawFunc=function(a){var g=a._fullLayout||{};if(g._has&&g._has("polar")||!a.data||!a.data[0]||!a.data[0].r)return function(){(a.calcdata||[]).forEach(function(a){a[0]&&a[0].t&&a[0].t.cb&&a[0].t.cb()})}}},{}],834:[function(a,t,m){m=a("./helpers");a={getDelay:m.getDelay,getRedrawFunc:m.getRedrawFunc,clone:a("./cloneplot"),toSVG:a("./tosvg"),svgToImg:a("./svgtoimg"),toImage:a("./toimage"),downloadImage:a("./download")};
t.exports=a},{"./cloneplot":830,"./download":831,"./helpers":833,"./svgtoimg":835,"./toimage":836,"./tosvg":837}],835:[function(a,t,m){var p=a("../lib"),g=a("events").EventEmitter;t.exports=function(a){var e=a.emitter||new g,h=new Promise(function(b,g){var l=window.Image,n=a.svg,d=a.format||"png";if(p.isIE()&&"svg"!==d)return l=Error("Sorry IE does not support downloading from canvas. Try {format:'svg'} instead."),g(l),a.promise?h:e.emit("error",l);var f=a.canvas,c=a.scale||1,k=c*(a.width||300),r=
c*(a.height||150),m=f.getContext("2d"),t=new l,A="data:image/svg+xml,"+encodeURIComponent(n);f.width=k;f.height=r;t.onload=function(){"svg"!==d&&m.drawImage(t,0,0,k,r);switch(d){case "jpeg":var c=f.toDataURL("image/jpeg");break;case "png":c=f.toDataURL("image/png");break;case "webp":c=f.toDataURL("image/webp");break;case "svg":c=A;break;default:if(g(Error("Image format is not jpeg, png, svg or webp.")),!a.promise)return e.emit("error","Image format is not jpeg, png, svg or webp.")}b(c);a.promise||
e.emit("success",c)};t.onerror=function(b){g(b);if(!a.promise)return e.emit("error",b)};t.src=A});return a.promise?h:e}},{"../lib":700,events:94}],836:[function(a,t,m){var p=a("events").EventEmitter,g=a("../registry"),h=a("../lib"),e=a("./helpers"),n=a("./cloneplot"),b=a("./tosvg"),l=a("./svgtoimg");t.exports=function(a,q){var d=new p;a=n(a,{format:"png"});var f=a.gd;f.style.position="absolute";f.style.left="-5000px";document.body.appendChild(f);var c=e.getRedrawFunc(f);g.call("plot",f,a.data,a.layout,
a.config).then(c).then(function(){var a=e.getDelay(f._fullLayout);setTimeout(function(){var a=b(f),c=document.createElement("canvas");c.id=h.randstr();d=l({format:q.format,width:f._fullLayout.width,height:f._fullLayout.height,canvas:c,emitter:d,svg:a});d.clean=function(){f&&document.body.removeChild(f)}},a)}).catch(function(a){d.emit("error",a)});return d}},{"../lib":700,"../registry":829,"./cloneplot":830,"./helpers":833,"./svgtoimg":835,"./tosvg":837,events:94}],837:[function(a,t,m){function p(a){var b=
g.select("body").append("div").style({display:"none"}).html("");a=a.replace(/(&[^;]*;)/gi,function(a){return"\x26lt;"===a?"\x26#60;":"\x26rt;"===a?"\x26#62;":-1!==a.indexOf("\x3c")||-1!==a.indexOf("\x3e")?"":b.html(a).text()});b.remove();return a}var g=a("d3"),h=a("../lib"),e=a("../components/drawing"),n=a("../components/color"),b=a("../constants/xmlns_namespaces"),l=/"/g,u=/("TOBESTRIPPED)|(TOBESTRIPPED")/g;t.exports=function(a,d,f){var c=a._fullLayout,k=c._paper,r=c._toppaper,q=c.width,m=c.height,
t;k.insert("rect",":first-child").call(e.setRect,0,0,q,m).call(n.fill,c.paper_bgcolor);var y=c._basePlotModules||[];for(t=0;t<y.length;t++){var w=y[t];w.toSVG&&w.toSVG(a)}if(r)for(t=r.node().childNodes,a=Array.prototype.slice.call(t),t=0;t<a.length;t++)r=a[t],r.childNodes.length&&k.node().appendChild(r);c._draggers&&c._draggers.remove();k.node().style.background="";k.selectAll("text").attr({"data-unformatted":null,"data-math":null}).each(function(){var a=g.select(this);if("hidden"===this.style.visibility||
"none"===this.style.display)a.remove();else{a.style({visibility:null,display:null});var b=this.style.fontFamily;b&&-1!==b.indexOf('"')&&a.style("font-family",b.replace(l,"TOBESTRIPPED"))}});k.selectAll(".point, .scatterpts, .legendfill\x3epath, .legendlines\x3epath, .cbfill").each(function(){var a=g.select(this),b=this.style.fill;b&&-1!==b.indexOf("url(")&&a.style("fill",b.replace(l,"TOBESTRIPPED"));(b=this.style.stroke)&&-1!==b.indexOf("url(")&&a.style("stroke",b.replace(l,"TOBESTRIPPED"))});"pdf"!==
d&&"eps"!==d||k.selectAll("#MathJax_SVG_glyphs path").attr("stroke-width",0);k.node().setAttributeNS(b.xmlns,"xmlns",b.svg);k.node().setAttributeNS(b.xmlns,"xmlns:xlink",b.xlink);"svg"===d&&f&&(k.attr("width",f*q),k.attr("height",f*m),k.attr("viewBox","0 0 "+q+" "+m));d=(new window.XMLSerializer).serializeToString(k.node());d=p(d);d=d.replace(/&(?!\w+;|#[0-9]+;| #x[0-9A-F]+;)/g,"\x26amp;");d=d.replace(u,"'");h.isIE()&&(d=d.replace(/"/gi,"'"),d=d.replace(/(\('#)([^']*)('\))/gi,'("#$2")'),d=d.replace(/(\\')/gi,
'"'));return d}},{"../components/color":577,"../components/drawing":598,"../constants/xmlns_namespaces":678,"../lib":700,d3:154}],838:[function(a,t,m){var p=a("../../lib").mergeArray;t.exports=function(a,h){for(var e=0;e<a.length;e++)a[e].i=e;p(h.text,a,"tx");p(h.hovertext,a,"htx");if(h=h.marker)if(p(h.opacity,a,"mo"),p(h.color,a,"mc"),h=h.line)p(h.color,a,"mlc"),p(h.width,a,"mlw")}},{"../../lib":700}],839:[function(a,t,m){m=a("../scatter/attributes");var p=a("../../components/fx/hovertemplate_attributes"),
g=a("../../components/colorscale/attributes"),h=a("../../components/colorbar/attributes"),e=a("../../plots/font_attributes"),n=a("./constants.js");a=a("../../lib/extend").extendFlat;e=e({editType:"calc",arrayOk:!0,colorEditType:"style"});var b=a({},m.marker.line.width,{dflt:0});b=a({width:b,editType:"calc"},g("marker.line"));g=a({line:b,editType:"calc"},g("marker"),{colorbar:h,opacity:{valType:"number",arrayOk:!0,dflt:1,min:0,max:1,editType:"style"}});t.exports={x:m.x,x0:m.x0,dx:m.dx,y:m.y,y0:m.y0,
dy:m.dy,text:m.text,hovertext:m.hovertext,hovertemplate:p({},{keys:n.eventDataKeys}),textposition:{valType:"enumerated",values:["inside","outside","auto","none"],dflt:"none",arrayOk:!0,editType:"calc"},textfont:a({},e,{}),insidetextfont:a({},e,{}),outsidetextfont:a({},e,{}),constraintext:{valType:"enumerated",values:["inside","outside","both","none"],dflt:"both",editType:"calc"},cliponaxis:a({},m.cliponaxis,{}),orientation:{valType:"enumerated",values:["v","h"],editType:"calc+clearAxisTypes"},base:{valType:"any",
dflt:null,arrayOk:!0,editType:"calc"},offset:{valType:"number",dflt:null,arrayOk:!0,editType:"calc"},width:{valType:"number",dflt:null,min:0,arrayOk:!0,editType:"calc"},marker:g,offsetgroup:{valType:"string",dflt:"",editType:"calc"},alignmentgroup:{valType:"string",dflt:"",editType:"calc"},selected:{marker:{opacity:m.selected.marker.opacity,color:m.selected.marker.color,editType:"style"},textfont:m.selected.textfont,editType:"style"},unselected:{marker:{opacity:m.unselected.marker.opacity,color:m.unselected.marker.color,
editType:"style"},textfont:m.unselected.textfont,editType:"style"},r:m.r,t:m.t,_deprecated:{bardir:{valType:"enumerated",editType:"calc",values:["v","h"]}}}},{"../../components/colorbar/attributes":578,"../../components/colorscale/attributes":584,"../../components/fx/hovertemplate_attributes":615,"../../lib/extend":690,"../../plots/font_attributes":774,"../scatter/attributes":1051,"./constants.js":841}],840:[function(a,t,m){var p=a("../../plots/cartesian/axes"),g=a("../../components/colorscale/helpers").hasColorscale,
h=a("../../components/colorscale/calc"),e=a("./arrays_to_calcdata"),n=a("../scatter/calc_selection");t.exports=function(a,l){var b=p.getFromId(a,l.xaxis||"x"),q=p.getFromId(a,l.yaxis||"y");if("h"===l.orientation){var d=b.makeCalcdata(l,"x");b=q.makeCalcdata(l,"y")}else d=q.makeCalcdata(l,"y"),b=b.makeCalcdata(l,"x");q=Math.min(b.length,d.length);for(var f=Array(q),c=0;c<q;c++)f[c]={p:b[c],s:d[c]},l.ids&&(f[c].id=String(l.ids[c]));g(l,"marker")&&h(a,l,{vals:l.marker.color,containerStr:"marker",cLetter:"c"});
g(l,"marker.line")&&h(a,l,{vals:l.marker.line.color,containerStr:"marker.line",cLetter:"c"});e(f,l);n(f,l);return f}},{"../../components/colorscale/calc":585,"../../components/colorscale/helpers":588,"../../plots/cartesian/axes":748,"../scatter/calc_selection":1053,"./arrays_to_calcdata":838}],841:[function(a,t,m){t.exports={eventDataKeys:[]}},{}],842:[function(a,t,m){function p(a,c,k,m){if(m.length){var p=a._fullLayout.barmode,t;g(a,c,k,m);switch(p){case "overlay":h(a,c,k,m);break;case "group":p=
[];var v=[];for(t=0;t<m.length;t++){var w=m[t];var x=w[0].trace;void 0===x.offset?v.push(w):p.push(w)}if(v.length){t=a._fullLayout.barnorm;v=new y(v,{sepNegVal:!1,overlapNoMerge:!t});var B=a._fullLayout;w=B.bargroupgap||0;x=v.minDiff;var F=v.traces,J=F.length,L=v.positions.length!==v.distinctPositions.length,M=x*(1-B.bargap),N=A(B,c._id)+F[0][0].trace.orientation;B=B._alignmentOpts[N]||{};for(N=0;N<J;N++){var O=F[N],R=O[0].trace,T=Object.keys((B[R.alignmentgroup]||{}).offsetGroups||{}).length;var P=
T?M/T:L?M/J:M;var S=P*(1-w);R=T?((2*R._offsetIndex+1-T)*P-S)/2:L?((2*N+1-J)*P-S)/2:-S/2;O=O[0].t;O.barwidth=S;O.poffset=R;O.bargroupwidth=M;O.bardelta=x}v.binWidth=F[0][0].t.barwidth/100;n(v);b(a,c,v);l(a,c,v,L);w=v.traces;for(x=0;x<w.length;x++)if(F=w[x],void 0===F[0].trace.base)for(J=new y([F],{sepNegVal:!0,overlapNoMerge:!0}),L=0;L<F.length;L++)if(M=F[L],M.p!==r&&(B=J.put(M.p,M.b+M.s)))M.b=B;t?(q(a,k,v),d(a,k,v)):u(a,k,v)}p.length&&h(a,c,k,p);break;case "stack":case "relative":p=[];v=[];for(t=
0;t<m.length;t++)w=m[t],x=w[0].trace,void 0===x.base?v.push(w):p.push(w);if(v.length){t=v;v=a._fullLayout;w=v.barmode;v=v.barnorm;w=new y(t,{sepNegVal:"relative"===w,overlapNoMerge:!(v||"stack"===w||"relative"===w)});e(a,c,w);x=a._fullLayout.barnorm;F=k._id.charAt(0);J=w.traces;for(L=0;L<J.length;L++){M=J[L];B=M[0].trace;N=[];for(S=0;S<M.length;S++)O=M[S],O.s!==r&&(R=w.put(O.p,O.b+O.s),T=R+O.b+O.s,O.b=R,O[F]=T,x||(N.push(T),O.hasB&&N.push(R)));x||(B._extremes[k._id]=z.findExtremes(k,N,{tozero:!0,
padded:!0}))}for(x=0;x<t.length;x++)for(F=t[x],J=0;J<F.length;J++)L=F[J],L.s!==r&&L.b+L.s===w.get(L.p,L.s)&&(L._outmost=!0);v&&d(a,k,w)}p.length&&h(a,c,k,p)}f(m,c)}}function g(a,b,d,e){for(a=0;a<e.length;a++){b=e[a];var f=b[0].trace;var g=f.base,h="h"===f.orientation?f.xcalendar:f.ycalendar,l="category"===d.type||"multicategory"===d.type?function(){return null}:d.d2c;if(k(g)){for(f=0;f<Math.min(g.length,b.length);f++){var n=l(g[f],0,h);c(n)?(b[f].b=+n,b[f].hasB=1):b[f].b=0}for(;f<b.length;f++)b[f].b=
0}else for(n=l(g,0,h),n=(g=c(n))?n:0,f=0;f<b.length;f++)b[f].b=n,g&&(b[f].hasB=1)}}function h(a,b,c,f){for(var g=a._fullLayout.barnorm,h=0;h<f.length;h++){var k=new y([f[h]],{sepNegVal:!1,overlapNoMerge:!g});e(a,b,k);g?(q(a,c,k),d(a,c,k)):u(a,c,k)}}function e(a,c,d){var e=a._fullLayout,f=d.minDiff,g=d.traces,h=f*(1-e.bargap);e=h*(1-(e.bargroupgap||0));for(var k=-e/2,r=0;r<g.length;r++){var q=g[r][0].t;q.barwidth=e;q.poffset=k;q.bargroupwidth=h;q.bardelta=f}d.binWidth=g[0][0].t.barwidth/100;n(d);b(a,
c,d);l(a,c,d)}function n(a){a=a.traces;var b,d;for(b=0;b<a.length;b++){var e=a[b],f=e[0],g=f.trace;f=f.t;var h=g._offset||g.offset,l=f.poffset;if(k(h)){var n=Array.prototype.slice.call(h,0,e.length);for(d=0;d<n.length;d++)c(n[d])||(n[d]=l);for(d=n.length;d<e.length;d++)n.push(l);f.poffset=n}else void 0!==h&&(f.poffset=h);d=g._width||g.width;g=f.barwidth;if(k(d)){var r=Array.prototype.slice.call(d,0,e.length);for(d=0;d<r.length;d++)c(r[d])||(r[d]=g);for(d=r.length;d<e.length;d++)r.push(g);f.barwidth=
r;if(void 0===h){n=[];for(d=0;d<e.length;d++)n.push(l+(g-r[d])/2);f.poffset=n}}else void 0!==d&&(f.barwidth=d,void 0===h&&(f.poffset=l+(g-d)/2))}}function b(a,b,c){a=c.traces;b=b._id.charAt(0);for(c=0;c<a.length;c++){var d=a[c],e=d[0].t,f=e.poffset,g=Array.isArray(f);e=e.barwidth;for(var h=Array.isArray(e),k=0;k<d.length;k++){var l=d[k],n=l.w=h?e[k]:e;l[b]=l.p+(g?f[k]:f)+n/2}}}function l(a,b,c,d){a=c.traces;var e=c.minDiff/2;z.minDtick(b,c.minDiff,c.distinctPositions[0],d);for(c=0;c<a.length;c++){d=
a[c];var f=d[0],g=f.trace,h=[],k;for(k=0;k<d.length;k++){var l=d[k];var n=l.p-e;l=l.p+e;h.push(n,l)}if(g.width||g.offset){n=f.t;f=n.poffset;var r=n.barwidth,q=Array.isArray(f),m=Array.isArray(r);for(k=0;k<d.length;k++){l=d[k];var p=m?r[k]:r;n=l.p+(q?f[k]:f);l=n+p;h.push(n,l)}}g._extremes[b._id]=z.findExtremes(b,h,{padded:!1})}}function u(a,b,c){a=c.traces;c=b._id.charAt(0);for(var d=0;d<a.length;d++){for(var e=a[d],f=e[0].trace,g=[],h=!0,k=0;k<e.length;k++){var l=e[k],n=l.b,r=n+l.s;l[c]=r;g.push(r);
l.hasB&&g.push(n);l.hasB&&0<l.b&&0<l.s||(h=!1)}f._extremes[b._id]=z.findExtremes(b,g,{tozero:!h,padded:!0})}}function q(a,b,c){a=c.traces;for(b=0;b<a.length;b++)for(var d=a[b],e=0;e<d.length;e++){var f=d[e];f.s!==r&&c.put(f.p,f.b+f.s)}}function d(a,b,d){function e(a){return c(b.c2l(a))&&(a<l-k||a>n+k||!c(l))}var f=a._fullLayout;a=d.traces;var g=b._id.charAt(0),h="fraction"===f.barnorm?1:100,k=h/1E9,l=b.l2c(b.c2l(0)),n="stack"===f.barmode?h:l;for(f=0;f<a.length;f++){for(var q=a[f],m=q[0].trace,p=[],
u=!0,t=!1,v=0;v<q.length;v++){var w=q[v];if(w.s!==r){var x=Math.abs(h/d.get(w.p,w.s));w.b*=x;w.s*=x;x=w.b;var A=x+w.s;w[g]=A;p.push(A);t=t||e(A);w.hasB&&(p.push(x),t=t||e(x));w.hasB&&0<w.b&&0<w.s||(u=!1)}}m._extremes[b._id]=z.findExtremes(b,p,{tozero:!u,padded:t})}}function f(a,b){b=b._id.charAt(0);var d={},e,f,g=Infinity,h=-Infinity;for(e=0;e<a.length;e++){var k=a[e];for(f=0;f<k.length;f++){var l=k[f].p;c(l)&&(g=Math.min(g,l),h=Math.max(h,l))}}var n=1E4/(h-g);h=d.round=function(a){return String(Math.round(n*
(a-g)))};for(e=0;e<a.length;e++){k=a[e];k[0].t.extents=d;l=k[0].t.poffset;var r=Array.isArray(l);for(f=0;f<k.length;f++){var q=k[f],m=q[b]-q.w/2;if(c(m)){var p=q[b]+q.w/2,u=h(q.p);d[u]=d[u]?[Math.min(m,d[u][0]),Math.max(p,d[u][1])]:[m,p]}q.p0=q.p+(r?l[f]:l);q.p1=q.p0+q.w;q.s0=q.b;q.s1=q.s0+q.s}}}var c=a("fast-isnumeric"),k=a("../../lib").isArrayOrTypedArray,r=a("../../constants/numerical").BADNUM,v=a("../../registry"),z=a("../../plots/cartesian/axes"),A=a("../../plots/cartesian/axis_ids").getAxisGroup,
y=a("./sieve.js");t.exports={crossTraceCalc:function(a,b){var c=b.xaxis;b=b.yaxis;for(var d=a._fullData,e=a.calcdata,f=[],g=[],h=0;h<d.length;h++){var k=d[h];!0===k.visible&&v.traceIs(k,"bar")&&k.xaxis===c._id&&k.yaxis===b._id&&("h"===k.orientation?f.push(e[h]):g.push(e[h]))}p(a,c,b,g);p(a,b,c,f)},setGroupPositions:p}},{"../../constants/numerical":677,"../../lib":700,"../../plots/cartesian/axes":748,"../../plots/cartesian/axis_ids":751,"../../registry":829,"./sieve.js":851,"fast-isnumeric":221}],
843:[function(a,t,m){function p(a,b,d,e){a=b.orientation;a=u(d,b[{v:"x",h:"y"}[a]+"axis"])+a;var c=d._alignmentOpts||{};d=e("alignmentgroup");var f=c[a];f||(f=c[a]={});(a=f[d])?a.traces.push(b):a=f[d]={traces:[b],alignmentIndex:Object.keys(f).length,offsetGroups:{}};e=e("offsetgroup");a=a.offsetGroups;d=a[e];e&&(d||(d=a[e]={offsetIndex:Object.keys(a).length}),b._offsetIndex=d.offsetIndex)}function g(a,b,e,g,l){var c=g("textposition"),f=Array.isArray(c)||"auto"===c;b=f||"outside"===c;if(f||"inside"===
c||b)e=d(g,"textfont",e.font),c=h.extendFlat({},e),a.textfont&&a.textfont.color||delete c.color,d(g,"insidetextfont",c),b&&d(g,"outsidetextfont",e),g("constraintext"),l&&(g("selected.textfont.color"),g("unselected.textfont.color")),g("cliponaxis")}var h=a("../../lib"),e=a("../../components/color"),n=a("../../registry"),b=a("../scatter/xy_defaults"),l=a("./style_defaults"),u=a("../../plots/cartesian/axis_ids").getAxisGroup,q=a("./attributes"),d=h.coerceFont;t.exports={supplyDefaults:function(a,c,d,
r){function f(b,d){return h.coerce(a,c,q,b,d)}b(a,c,r,f)?(f("orientation",c.x&&!c.y?"h":"v"),f("base"),f("offset"),f("width"),f("text"),f("hovertext"),f("hovertemplate"),g(a,c,r,f,!0),l(a,c,f,d,r),d=(c.marker.line||{}).color,r=n.getComponentMethod("errorbars","supplyDefaults"),r(a,c,d||e.defaultLine,{axis:"y"}),r(a,c,d||e.defaultLine,{axis:"x",inherit:"y"}),h.coerceSelectionMarkerOpacity(c,f)):c.visible=!1},crossTraceDefaults:function(a,b){function c(a){return h.coerce(e._input,e,q,a)}if("group"===
b.barmode)for(var d=0;d<a.length;d++){var e=a[d];if("bar"===e.type){var f=e._input;p(f,e,b,c)}}},handleGroupingDefaults:p,handleText:g}},{"../../components/color":577,"../../lib":700,"../../plots/cartesian/axis_ids":751,"../../registry":829,"../scatter/xy_defaults":1077,"./attributes":839,"./style_defaults":853}],844:[function(a,t,m){var p=a("fast-isnumeric"),g=a("tinycolor2");m.coerceString=function(a,e,g){if("string"===typeof e){if(e||!a.noBlank)return e}else if("number"===typeof e&&!a.strict)return String(e);
return void 0!==g?g:a.dflt};m.coerceNumber=function(a,e,g){if(p(e)){e=+e;var b=a.min,h=a.max;if(!(void 0!==b&&e<b||void 0!==h&&e>h))return e}return void 0!==g?g:a.dflt};m.coerceColor=function(a,e,n){return g(e).isValid()?e:void 0!==n?n:a.dflt};m.coerceEnumerated=function(a,e,g){a.coerceNumber&&(e=+e);return-1!==a.values.indexOf(e)?e:void 0!==g?g:a.dflt};m.getValue=function(a,e){var g;Array.isArray(a)?e<a.length&&(g=a[e]):g=a;return g}},{"fast-isnumeric":221,tinycolor2:521}],845:[function(a,t,m){function p(a,
e,g,d){function f(a){return a[H]-a.w/2}function c(a){return a[H]+a.w/2}function k(a,b){return h.inbox(a-D,b-D,t+Math.min(1,Math.abs(b-a)/J)-1)}function l(a){return k(B(a),C(a))}function n(a){return h.inbox(a.b-G,a[E]-G,t+(a[E]-G)/(a[E]-a.b)-1)}var q=a.cd,m=q[0].trace,p=q[0].t,u="closest"===d,t=a.maxHoverDistance,F=a.maxSpikeDistance,B=u?f:function(a){return Math.min(f(a),a.p-p.bardelta/2)},C=u?c:function(a){return Math.max(c(a),a.p+p.bardelta/2)};if("h"===m.orientation){var D=g;var G=e;var H="y";
var E="x";var K=n;var I=l}else D=e,G=g,H="x",E="y",I=n,K=l;e=a[H+"a"];g=a[E+"a"];var J=Math.abs(e.r2c(e.range[1])-e.r2c(e.range[0]));d=h.getDistanceFunction(d,K,I,function(a){return(K(a)+I(a))/2});h.getClosest(q,d,a);if(!1!==a.index)return u||(B=function(a){return Math.min(f(a),a.p-p.bargroupwidth/2)},C=function(a){return Math.max(c(a),a.p+p.bargroupwidth/2)}),q=q[a.index],d=m.base?q.b+q.s:q.s,a[E+"0"]=a[E+"1"]=g.c2p(q[E],!0),a[E+"LabelVal"]=d,g=p.extents[p.extents.round(q.p)],a[H+"0"]=e.c2p(u?B(q):
g[0],!0),a[H+"1"]=e.c2p(u?C(q):g[1],!0),a[H+"LabelVal"]=q.p,a.spikeDistance=(n(q)+function(a){return k(f(a),c(a))}(q))/2+F-t,a[H+"Spike"]=e.c2p(q.p,!0),b(q,m,a),a.hovertemplate=m.hovertemplate,a}function g(a,b){var e=b.mcc||a.marker.color,d=b.mlcc||a.marker.line.color;a=b.mlw||a.marker.line.width;if(n.opacity(e))return e;if(n.opacity(d)&&a)return d}var h=a("../../components/fx"),e=a("../../registry"),n=a("../../components/color"),b=a("../scatter/fill_hover_text");t.exports={hoverPoints:function(a,
b,h,d){if(a=p(a,b,h,d))return h=a.cd,b=h[0].trace,h=h[a.index],a.color=g(b,h),e.getComponentMethod("errorbars","hoverInfo")(h,b,a),[a]},hoverOnBars:p,getTraceColor:g}},{"../../components/color":577,"../../components/fx":616,"../../registry":829,"../scatter/fill_hover_text":1059}],846:[function(a,t,m){m={};m.attributes=a("./attributes");m.layoutAttributes=a("./layout_attributes");m.supplyDefaults=a("./defaults").supplyDefaults;m.crossTraceDefaults=a("./defaults").crossTraceDefaults;m.supplyLayoutDefaults=
a("./layout_defaults");m.calc=a("./calc");m.crossTraceCalc=a("./cross_trace_calc").crossTraceCalc;m.colorbar=a("../scatter/marker_colorbar");m.arraysToCalcdata=a("./arrays_to_calcdata");m.plot=a("./plot");m.style=a("./style").style;m.styleOnSelect=a("./style").styleOnSelect;m.hoverPoints=a("./hover").hoverPoints;m.selectPoints=a("./select");m.moduleType="trace";m.name="bar";m.basePlotModule=a("../../plots/cartesian");m.categories="cartesian svg bar oriented errorBarsOK showLegend zoomScale".split(" ");
m.meta={};t.exports=m},{"../../plots/cartesian":759,"../scatter/marker_colorbar":1069,"./arrays_to_calcdata":838,"./attributes":839,"./calc":840,"./cross_trace_calc":842,"./defaults":843,"./hover":845,"./layout_attributes":847,"./layout_defaults":848,"./plot":849,"./select":850,"./style":852}],847:[function(a,t,m){t.exports={barmode:{valType:"enumerated",values:["stack","group","overlay","relative"],dflt:"group",editType:"calc"},barnorm:{valType:"enumerated",values:["","fraction","percent"],dflt:"",
editType:"calc"},bargap:{valType:"number",min:0,max:1,editType:"calc"},bargroupgap:{valType:"number",min:0,max:1,dflt:0,editType:"calc"}}},{}],848:[function(a,t,m){var p=a("../../registry"),g=a("../../plots/cartesian/axes"),h=a("../../lib"),e=a("./layout_attributes");t.exports=function(a,b,l){for(var n=!1,q=!1,d=!1,f={},c=h.coerce(a,b,e,"barmode",void 0),k=0;k<l.length;k++){var r=l[k];if(p.traceIs(r,"bar")&&r.visible){n=!0;if("group"===c){var m=r.xaxis+r.yaxis;f[m]&&(d=!0);f[m]=!0}r.visible&&"histogram"===
r.type&&"category"!==g.getFromId({_fullLayout:b},r["v"===r.orientation?"xaxis":"yaxis"]).type&&(q=!0)}}n?("overlay"!==c&&h.coerce(a,b,e,"barnorm",void 0),h.coerce(a,b,e,"bargap",q&&!d?0:.2),h.coerce(a,b,e,"bargroupgap",void 0)):delete b.barmode}},{"../../lib":700,"../../plots/cartesian/axes":748,"../../registry":829,"./layout_attributes":847}],849:[function(a,t,m){function p(a,e,f,k,l,r,m,p){function u(b,e,f){return q.ensureSingle(b,"text").text(e).attr({"class":"bartext bartext-"+x,transform:"",
"text-anchor":"middle","data-notex":1}).call(c.font,f).call(d.convertToTspans,a)}var t=a._fullLayout,v=f[0].trace,w=v.orientation,z=n(v,k);var x=b(v,k);var y=t[("waterfall"===v.type?"waterfall":"bar")+"mode"],B=f[k];y=!("stack"===y||"relative"===y)||B._outmost;if(!z||"none"===x||B.isBlank&&("auto"===x||"inside"===x))e.select("text").remove();else{t=t.font;f=A.getBarColor(f[k],v);f=A.getInsideTextFont(v,k,t,f);k=A.getOutsideTextFont(v,k,t);t=Math.abs(r-l)-6;var D=Math.abs(p-m)-6;"outside"===x&&(y||
B.hasB||(x="inside"));if("auto"===x)if(y){x="inside";var C=u(e,z,f);var G=c.bBox(C.node());B=G.width;y=G.height;0<B&&0<y&&(B<=t&&y<=D||B<=D&&y<=t||("h"===w?t>=D/y*B:D>=t/B*y))?x="inside":(x="outside",C.remove(),C=null)}else x="inside";if(!C&&(C=u(e,z,"outside"===x?k:f),G=c.bBox(C.node()),B=G.width,y=G.height,0>=B||0>=y)){C.remove();return}"outside"===x?(e="both"===v.constraintext||"outside"===v.constraintext,l=h(l,r,m,p,G,w,e)):(e="both"===v.constraintext||"inside"===v.constraintext,l=g(l,r,m,p,G,
w,e));C.attr("transform",l)}}function g(a,b,c,d,f,g,h){var k=f.width,l=f.height,n=(f.left+f.right)/2;f=(f.top+f.bottom)/2;var r=Math.abs(b-a),q=Math.abs(d-c);if(6<r&&6<q){var m=3;r-=2*m;q-=2*m}else m=0;if(k<=r&&l<=q){var p=!1;h=1}else k<=q&&l<=r?(p=!0,h=1):k<l===r<q?(p=!1,h=h?Math.min(r/k,q/l):1):(p=!0,h=h?Math.min(q/k,r/l):1);p&&(p=90);p?(r=h*l,k*=h):(r=h*k,k=h*l);"h"===g?(a=b<a?b+m+r/2:b-m-r/2,c=(c+d)/2):d>c?(a=(a+b)/2,c=d-m-k/2):(a=(a+b)/2,c=d+m+k/2);return e(n,f,a,c,h,p)}function h(a,b,c,d,f,
g,h){var k="h"===g?Math.abs(d-c):Math.abs(b-a),l;6<k&&(l=3);var n=1;h&&(n="h"===g?Math.min(1,k/f.height):Math.min(1,k/f.width));h=(f.left+f.right)/2;k=(f.top+f.bottom)/2;var r=n*f.width;f=n*f.height;"h"===g?(a=b<a?b-l-r/2:b+l+r/2,c=(c+d)/2):d>c?(a=(a+b)/2,c=d+l+f/2):(a=(a+b)/2,c=d-l-f/2);return e(h,k,a,c,n,!1)}function e(a,b,c,d,e,f){if(1>e)var g="scale("+e+") ";else e=1,g="";return"translate("+(c-e*a)+" "+(d-e*b)+")"+g+(f?"rotate("+f+" "+a+" "+b+") ":"")}function n(a,b){a=z.getValue(a.text,b);return z.coerceString(r,
a)}function b(a,b){a=z.getValue(a.textposition,b);return z.coerceEnumerated(v,a)}var l=a("d3"),u=a("fast-isnumeric"),q=a("../../lib"),d=a("../../lib/svg_text_utils"),f=a("../../components/color"),c=a("../../components/drawing"),k=a("../../registry");m=a("./attributes");var r=m.text,v=m.textposition,z=a("./helpers"),A=a("./style");t.exports=function(a,b,d,e){var g=b.xaxis,h=b.yaxis,n=a._fullLayout;d=q.makeTraceGroups(e,d,"trace bars").each(function(d){var e=l.select(this),k=d[0],r=k.trace,m,t=0;"waterfall"===
r.type&&r.connector.visible&&"between"===r.connector.mode&&(t=r.connector.line.width/2);var v="h"===r.orientation;b.isRangePlot||(k.node3=e);var w=q.ensureSingle(e,"g","points").selectAll("g.point").data(q.identity);w.enter().append("g").classed("point",!0);w.exit().remove();w.each(function(e,k){function w(a){return 0===H&&0===I?l.round(Math.round(a)-J,2):a}function z(a,b){return 2<=Math.abs(a-b)?w(a):a>b?Math.ceil(a):Math.floor(a)}var x=l.select(this);if(v){var A=h.c2p(e.p0,!0);var y=h.c2p(e.p1,
!0);var B=g.c2p(e.s0,!0);var D=g.c2p(e.s1,!0);e.ct=[D,(A+y)/2]}else B=g.c2p(e.p0,!0),D=g.c2p(e.p1,!0),A=h.c2p(e.s0,!0),y=h.c2p(e.s1,!0),e.ct=[(B+D)/2,y];var C=e.isBlank=!u(B)||!u(D)||!u(A)||!u(y)||B===D||A===y;t&&(v?(m=D<B?-1:1,B-=m*t,D+=m*t):(m=y<A?-1:1,A-=m*t,y+=m*t));if("waterfall"===r.type){var E=r[e.dir].marker;var G=E.line.width;E=E.color;var F="waterfall"}else G=(e.mlw+1||r.marker.line.width+1||(e.trace?e.trace.marker.line.width:0)+1)-1,E=e.mc||r.marker.color,F="bar";var J=l.round(G/2%1,2),
H=n[F+"gap"],I=n[F+"groupgap"];a._context.staticPlot||(G=1>f.opacity(E)||.01<G?w:z,B=G(B,D),D=G(D,B),A=G(A,y),y=G(y,A));q.ensureSingle(x,"path").style("vector-effect","non-scaling-stroke").attr("d",C?"M0,0Z":"M"+B+","+A+"V"+y+"H"+D+"V"+A+"Z").call(c.setClipUrl,b.layerClipId,a);p(a,x,d,k,B,D,A,y);b.layerClipId&&c.hideOutsideRangePoint(e,x.select("text"),g,h,r.xcalendar,r.ycalendar)});c.setClipUrl(e,!1===k.trace.cliponaxis?null:b.layerClipId,a)});k.getComponentMethod("errorbars","plot")(a,d,b)}},{"../../components/color":577,
"../../components/drawing":598,"../../lib":700,"../../lib/svg_text_utils":724,"../../registry":829,"./attributes":839,"./helpers":844,"./style":852,d3:154,"fast-isnumeric":221}],850:[function(a,t,m){t.exports=function(a,g){var h=a.cd,e=a.xaxis,n=a.yaxis,b=[],l;if(!1===g)for(l=0;l<h.length;l++)h[l].selected=0;else for(l=0;l<h.length;l++){var m=h[l];g.contains(m.ct,!1,l,a)?(b.push({pointNumber:l,x:e.c2d(m.x),y:n.c2d(m.y)}),m.selected=1):m.selected=0}return b}},{}],851:[function(a,t,m){function p(a,
n){this.traces=a;this.sepNegVal=n.sepNegVal;this.overlapNoMerge=n.overlapNoMerge;n=Infinity;for(var b=[],e=0;e<a.length;e++){for(var m=a[e],q=0;q<m.length;q++){var d=m[q];d.p!==h&&b.push(d.p)}m[0]&&m[0].width1&&(n=Math.min(m[0].width1,n))}this.positions=b;a=g.distinctVals(b);this.distinctPositions=a.vals;this.binWidth=this.minDiff=1===a.vals.length&&Infinity!==n?n:Math.min(a.minDiff,n);this.bins={}}t.exports=p;var g=a("../../lib"),h=a("../../constants/numerical").BADNUM;p.prototype.put=function(a,
g){a=this.getLabel(a,g);var b=this.bins[a]||0;this.bins[a]=b+g;return b};p.prototype.get=function(a,g){a=this.getLabel(a,g);return this.bins[a]||0};p.prototype.getLabel=function(a,g){return(0>g&&this.sepNegVal?"v":"^")+(this.overlapNoMerge?a:Math.round(a/this.binWidth))}},{"../../constants/numerical":677,"../../lib":700}],852:[function(a,t,m){function p(a,b,c){a.selectAll("text").each(function(a){var e=u.select(this);a=h(e,a,b,c);d.font(e,a)})}function g(a,b,c){a.each(function(a){var e=u.select(this);
if(a.selected){a=f.extendFlat({},h(e,a,b,c));var g=b.selected.textfont&&b.selected.textfont.color;g&&(a.color=g);d.font(e,a)}else d.selectedTextStyle(e,b)})}function h(a,b,c,d){d=d._fullLayout.font;var f=c.textfont;a.classed("bartext-inside")?(a=l(b,c),f=e(c,b.i,d,a)):a.classed("bartext-outside")&&(f=n(c,b.i,d));return f}function e(a,c,d,e){d=b(k,a.textfont,c,d);if(void 0===a._input.textfont||void 0===a._input.textfont.color||Array.isArray(a.textfont.color)&&void 0===a.textfont.color[c])d={color:q.contrast(e),
family:d.family,size:d.size};return b(r,a.insidetextfont,c,d)}function n(a,c,d){d=b(k,a.textfont,c,d);return b(v,a.outsidetextfont,c,d)}function b(a,b,c,d){b=b||{};var e=z.getValue(b.family,c),f=z.getValue(b.size,c);b=z.getValue(b.color,c);return{family:z.coerceString(a.family,e,d.family),size:z.coerceNumber(a.size,f,d.size),color:z.coerceColor(a.color,b,d.color)}}function l(a,b){return"waterfall"===b.type?b[a.dir].marker.color:a.mc||b.marker.color}var u=a("d3"),q=a("../../components/color"),d=a("../../components/drawing"),
f=a("../../lib"),c=a("../../registry");m=a("./attributes");var k=m.textfont,r=m.insidetextfont,v=m.outsidetextfont,z=a("./helpers");t.exports={style:function(a,b){b=b?b[0].node3:u.select(a).selectAll("g.barlayer").selectAll("g.trace");var e=b.size(),f=a._fullLayout;b.style("opacity",function(a){return a[0].trace.opacity}).each(function(a){("stack"===f.barmode&&1<e||0===f.bargap&&0===f.bargroupgap&&!a[0].trace.marker.line.width)&&u.select(this).attr("shape-rendering","crispEdges")});b.selectAll("g.points").each(function(b){var c=
u.select(this);b=b[0].trace;d.pointStyle(c.selectAll("path"),b,a);p(c,b,a)});c.getComponentMethod("errorbars","style")(b)},styleTextPoints:p,styleOnSelect:function(a,b){var c=b[0].node3;b=b[0].trace;b.selectedpoints?(d.selectedPointStyle(c.selectAll("path"),b),g(c.selectAll("text"),b,a)):(d.pointStyle(c.selectAll("path"),b,a),p(c,b,a))},getInsideTextFont:e,getOutsideTextFont:n,getBarColor:l}},{"../../components/color":577,"../../components/drawing":598,"../../lib":700,"../../registry":829,"./attributes":839,
"./helpers":844,d3:154}],853:[function(a,t,m){var p=a("../../components/color"),g=a("../../components/colorscale/helpers").hasColorscale,h=a("../../components/colorscale/defaults");t.exports=function(a,n,b,l,m){b("marker.color",l);g(a,"marker")&&h(a,n,m,b,{prefix:"marker.",cLetter:"c"});b("marker.line.color",p.defaultLine);g(a,"marker.line")&&h(a,n,m,b,{prefix:"marker.line.",cLetter:"c"});b("marker.line.width");b("marker.opacity");b("selected.marker.color");b("unselected.marker.color")}},{"../../components/color":577,
"../../components/colorscale/defaults":587,"../../components/colorscale/helpers":588}],854:[function(a,t,m){m=a("../../components/fx/hovertemplate_attributes");var p=a("../../lib/extend").extendFlat,g=a("../scatterpolar/attributes");a=a("../bar/attributes");t.exports={r:g.r,theta:g.theta,r0:g.r0,dr:g.dr,theta0:g.theta0,dtheta:g.dtheta,thetaunit:g.thetaunit,base:p({},a.base,{}),offset:p({},a.offset,{}),width:p({},a.width,{}),text:p({},a.text,{}),hovertext:p({},a.hovertext,{}),marker:a.marker,hoverinfo:g.hoverinfo,
hovertemplate:m(),selected:a.selected,unselected:a.unselected}},{"../../components/fx/hovertemplate_attributes":615,"../../lib/extend":690,"../bar/attributes":839,"../scatterpolar/attributes":1113}],855:[function(a,t,m){var p=a("../../components/colorscale/helpers").hasColorscale,g=a("../../components/colorscale/calc"),h=a("../bar/arrays_to_calcdata"),e=a("../bar/cross_trace_calc").setGroupPositions,n=a("../scatter/calc_selection"),b=a("../../registry").traceIs,l=a("../../lib").extendFlat;t.exports=
{calc:function(a,b){function d(a){var c=b[a];void 0!==c&&(b["_"+a]=Array.isArray(c)?k.makeCalcdata(b,a):k.d2c(c,b.thetaunit))}var e=a._fullLayout,c=b.subplot,k=e[c].angularaxis;e=e[c].radialaxis.makeCalcdata(b,"r");c=k.makeCalcdata(b,"theta");for(var l=b._length,q=Array(l),m=0;m<l;m++)q[m]={p:c[m],s:e[m]};"linear"===k.type&&(d("width"),d("offset"));p(b,"marker")&&g(a,b,{vals:b.marker.color,containerStr:"marker",cLetter:"c"});p(b,"marker.line")&&g(a,b,{vals:b.marker.line.color,containerStr:"marker.line",
cLetter:"c"});h(q,b);n(q,b);return q},crossTraceCalc:function(a,g,d){var f=a.calcdata;a=[];for(var c=0;c<f.length;c++){var h=f[c],n=h[0].trace;!0===n.visible&&b(n,"bar")&&n.subplot===d&&a.push(h)}d=l({},g.radialaxis,{_id:"x"});e({_fullLayout:g},g.angularaxis,d,a)}}},{"../../components/colorscale/calc":585,"../../components/colorscale/helpers":588,"../../lib":700,"../../registry":829,"../bar/arrays_to_calcdata":838,"../bar/cross_trace_calc":842,"../scatter/calc_selection":1053}],856:[function(a,t,
m){var p=a("../../lib"),g=a("../scatterpolar/defaults").handleRThetaDefaults,h=a("../bar/style_defaults"),e=a("./attributes");t.exports=function(a,b,l,m){function n(d,f){return p.coerce(a,b,e,d,f)}g(a,b,m,n)?(n("thetaunit"),n("base"),n("offset"),n("width"),n("text"),n("hovertext"),n("hovertemplate"),h(a,b,n,l,m),p.coerceSelectionMarkerOpacity(b,n)):b.visible=!1}},{"../../lib":700,"../bar/style_defaults":853,"../scatterpolar/defaults":1115,"./attributes":854}],857:[function(a,t,m){var p=a("../../components/fx"),
g=a("../../lib"),h=a("../bar/hover").getTraceColor,e=a("../scatter/fill_hover_text"),n=a("../scatterpolar/hover").makeHoverPointText,b=a("../../plots/polar/helpers").isPtInsidePolygon;t.exports=function(a,m,q){var d=a.cd,f=d[0].trace,c=a.subplot,k=c.radialAxis,l=c.vangles,u=l?b:g.isPtInsideSector,t=a.maxHoverDistance,A=c.angularAxis._period||2*Math.PI,y=Math.abs(k.g2p(Math.sqrt(m*m+q*q))),w=Math.atan2(q,m);k.range[0]>k.range[1]&&(w+=Math.PI);p.getClosest(d,function(a){return u(y,w,[a.rp0,a.rp1],[a.thetag0,
a.thetag1],l)?t+Math.min(1,Math.abs(a.thetag1-a.thetag0)/A)-1+(a.rp1-y)/(a.rp1-a.rp0)-1:Infinity},a);if(!1!==a.index)return m=d[a.index],a.x0=a.x1=m.ct[0],a.y0=a.y1=m.ct[1],q=g.extendFlat({},m,{r:m.s,theta:m.p}),e(m,f,a),n(q,f,c,a),a.hovertemplate=f.hovertemplate,a.color=h(f,m),a.xLabelVal=a.yLabelVal=void 0,0>m.s&&(a.idealAlign="left"),[a]}},{"../../components/fx":616,"../../lib":700,"../../plots/polar/helpers":812,"../bar/hover":845,"../scatter/fill_hover_text":1059,"../scatterpolar/hover":1116}],
858:[function(a,t,m){t.exports={moduleType:"trace",name:"barpolar",basePlotModule:a("../../plots/polar"),categories:["polar","bar","showLegend"],attributes:a("./attributes"),layoutAttributes:a("./layout_attributes"),supplyDefaults:a("./defaults"),supplyLayoutDefaults:a("./layout_defaults"),calc:a("./calc").calc,crossTraceCalc:a("./calc").crossTraceCalc,plot:a("./plot"),colorbar:a("../scatter/marker_colorbar"),style:a("../bar/style").style,hoverPoints:a("./hover"),selectPoints:a("../bar/select"),meta:{}}},
{"../../plots/polar":813,"../bar/select":850,"../bar/style":852,"../scatter/marker_colorbar":1069,"./attributes":854,"./calc":855,"./defaults":856,"./hover":857,"./layout_attributes":859,"./layout_defaults":860,"./plot":861}],859:[function(a,t,m){t.exports={barmode:{valType:"enumerated",values:["stack","overlay"],dflt:"stack",editType:"calc"},bargap:{valType:"number",dflt:.1,min:0,max:1,editType:"calc"}}},{}],860:[function(a,t,m){var p=a("../../lib"),g=a("./layout_attributes");t.exports=function(a,
e,n){for(var b={},h,m=0;m<n.length;m++)h=n[m],"barpolar"===h.type&&!0===h.visible&&(h=h.subplot,b[h]||(p.coerce(a[h]||{},e[h],g,"barmode",void 0),p.coerce(a[h]||{},e[h],g,"bargap",void 0),b[h]=1))}},{"../../lib":700,"./layout_attributes":859}],861:[function(a,t,m){function p(a){var g=a.cxx,h=a.cyy;return a.vangles?function(d,f,c,k){if(0<e.angleDelta(c,k)){var l=c;c=k}else l=k;k=b.findEnclosingVertexAngles(l,a.vangles)[0];var n=b.findEnclosingVertexAngles(c,a.vangles)[1];return b.pathPolygonAnnulus(d,
f,l,c,[k,(l+c)/2,n],g,h)}:function(a,b,c,k){return e.pathAnnulus(a,b,c,k,g,h)}}var g=a("d3"),h=a("fast-isnumeric"),e=a("../../lib"),n=a("../../components/drawing"),b=a("../../plots/polar/helpers");t.exports=function(a,b,q){var d=b.xaxis,f=b.yaxis,c=b.radialAxis,k=b.angularAxis,l=p(b),m=b.layers.frontplot.select("g.barlayer");e.makeTraceGroups(m,q,"trace bars").each(function(r){r=r[0].node3=g.select(this);var q=e.ensureSingle(r,"g","points").selectAll("g.point").data(e.identity);q.enter().append("g").style("vector-effect",
"non-scaling-stroke").style("stroke-miterlimit",2).classed("point",!0);q.exit().remove();q.each(function(a){var b=g.select(this),n=a.rp0=c.c2p(a.s0),r=a.rp1=c.c2p(a.s1),q=a.thetag0=k.c2g(a.p0),m=a.thetag1=k.c2g(a.p1);if(h(n)&&h(r)&&h(q)&&h(m)&&n!==r&&q!==m){var p=c.c2g(a.s1),u=(q+m)/2;a.ct=[d.c2p(p*Math.cos(u)),f.c2p(p*Math.sin(u))];a=l(n,r,q,m)}else a="M0,0Z";e.ensureSingle(b,"path").attr("d",a)});n.setClipUrl(r,b._hasClipOnAxisFalse?b.clipIds.forTraces:null,a)})}},{"../../components/drawing":598,
"../../lib":700,"../../plots/polar/helpers":812,d3:154,"fast-isnumeric":221}],862:[function(a,t,m){m=a("../scatter/attributes");var p=a("../bar/attributes"),g=a("../../components/color/attributes"),h=a("../../components/fx/hovertemplate_attributes");a=a("../../lib/extend").extendFlat;var e=m.marker,n=e.line;t.exports={y:{valType:"data_array",editType:"calc+clearAxisTypes"},x:{valType:"data_array",editType:"calc+clearAxisTypes"},x0:{valType:"any",editType:"calc+clearAxisTypes"},y0:{valType:"any",editType:"calc+clearAxisTypes"},
name:{valType:"string",editType:"calc+clearAxisTypes"},text:a({},m.text,{}),hovertext:a({},m.hovertext,{}),hovertemplate:h({}),whiskerwidth:{valType:"number",min:0,max:1,dflt:.5,editType:"calc"},notched:{valType:"boolean",editType:"calc"},notchwidth:{valType:"number",min:0,max:.5,dflt:.25,editType:"calc"},boxpoints:{valType:"enumerated",values:["all","outliers","suspectedoutliers",!1],dflt:"outliers",editType:"calc"},boxmean:{valType:"enumerated",values:[!0,"sd",!1],dflt:!1,editType:"calc"},jitter:{valType:"number",
min:0,max:1,editType:"calc"},pointpos:{valType:"number",min:-2,max:2,editType:"calc"},orientation:{valType:"enumerated",values:["v","h"],editType:"calc+clearAxisTypes"},width:{valType:"number",min:0,dflt:0,editType:"calc"},marker:{outliercolor:{valType:"color",dflt:"rgba(0, 0, 0, 0)",editType:"style"},symbol:a({},e.symbol,{arrayOk:!1,editType:"plot"}),opacity:a({},e.opacity,{arrayOk:!1,dflt:1,editType:"style"}),size:a({},e.size,{arrayOk:!1,editType:"calc"}),color:a({},e.color,{arrayOk:!1,editType:"style"}),
line:{color:a({},n.color,{arrayOk:!1,dflt:g.defaultLine,editType:"style"}),width:a({},n.width,{arrayOk:!1,dflt:0,editType:"style"}),outliercolor:{valType:"color",editType:"style"},outlierwidth:{valType:"number",min:0,dflt:1,editType:"style"},editType:"style"},editType:"plot"},line:{color:{valType:"color",editType:"style"},width:{valType:"number",min:0,dflt:2,editType:"style"},editType:"plot"},fillcolor:m.fillcolor,offsetgroup:p.offsetgroup,alignmentgroup:p.alignmentgroup,selected:{marker:m.selected.marker,
editType:"style"},unselected:{marker:m.unselected.marker,editType:"style"},hoveron:{valType:"flaglist",flags:["boxes","points"],dflt:"boxes+points",editType:"style"}}},{"../../components/color/attributes":576,"../../components/fx/hovertemplate_attributes":615,"../../lib/extend":690,"../bar/attributes":839,"../scatter/attributes":1051}],863:[function(a,t,m){function p(a,b,d,e,f){if(b in a)return d.makeCalcdata(a,b);f=b+"0"in a?a[b+"0"]:"name"in a&&("category"===d.type||u(a.name)&&-1!==["linear","log"].indexOf(d.type)||
q.isDateTime(a.name)&&"date"===d.type)?a.name:f;var c="multicategory"===d.type?d.r2c_just_indices(f):d.d2c(f,0,a[b+"calendar"]);return e.map(function(){return c})}function g(a,b){for(var c=a.length,d=Array(c+1),e=0;e<c;e++)d[e]=a[e]-b;d[c]=a[c-1]+b;return d}function h(a){for(var b=Array(a),c=0;c<a;c++)b[c]=[];return b}function e(a,b,d){var c={text:"tx",hovertext:"htx"},e;for(e in c)Array.isArray(b[e])&&(a[c[e]]=b[e][d])}function n(a,b){if(q.isArrayOrTypedArray(b.selectedpoints))for(var c=0;c<a.length;c++){for(var d=
a[c].pts||[],e={},f=0;f<d.length;f++)e[d[f].i]=f;q.tagSelected(d,b,e)}}function b(a,b){return a.v-b.v}function l(a){return a.v}var u=a("fast-isnumeric"),q=a("../../lib"),d=q._,f=a("../../plots/cartesian/axes");t.exports=function(a,k){var c=a._fullLayout,m=f.getFromId(a,k.xaxis||"x"),t=f.getFromId(a,k.yaxis||"y"),A=[],y="violin"===k.type?"_numViolins":"_numBoxes",w;if("h"===k.orientation){var x=m;var F="x";var B=t;m="y"}else x=t,F="y",B=m,m="x";t=x.makeCalcdata(k,F);var C=p(k,m,B,t,c[y]),D=q.distinctVals(C);
B=D.vals;D=D.minDiff/2;var G=g(B,D),H=B.length,E=h(H);for(w=0;w<k._length;w++){var K=t[w];if(u(K)){var I=q.findBin(C[w],G);0<=I&&I<H&&(K={v:K,i:w},e(K,k,w),E[I].push(K))}}C="all"===(k.boxpoints||k.points)?q.identity:function(a){return a.v<J.lf||a.v>J.uf};for(w=0;w<H;w++)if(0<E[w].length){G=E[w].sort(b);I=G.map(l);K=I.length;var J={};J.pos=B[w];J.pts=G;J.min=I[0];J.max=I[K-1];J.mean=q.mean(I,K);J.sd=q.stdev(I,K,J.mean);J.q1=q.interp(I,.25);J.med=q.interp(I,.5);J.q3=q.interp(I,.75);J.lf=Math.min(J.q1,
I[Math.min(q.findBin(2.5*J.q1-1.5*J.q3,I,!0)+1,K-1)]);J.uf=Math.max(J.q3,I[Math.max(q.findBin(2.5*J.q3-1.5*J.q1,I),0)]);J.lo=4*J.q1-3*J.q3;J.uo=4*J.q3-3*J.q1;I=1.57*(J.q3-J.q1)/Math.sqrt(K);J.ln=J.med-I;J.un=J.med+I;J.pts2=G.filter(C);A.push(J)}n(A,k);t=f.findExtremes(x,t,{padded:!0});k._extremes[x._id]=t;return 0<A.length?(A[0].t={num:c[y],dPos:D,posLetter:m,valLetter:F,labels:{med:d(a,"median:"),min:d(a,"min:"),q1:d(a,"q1:"),q3:d(a,"q3:"),max:d(a,"max:"),mean:"sd"===k.boxmean?d(a,"mean  :"):d(a,
"mean:"),lf:d(a,"lower fence:"),uf:d(a,"upper fence:")}},c[y]++,A):[{t:{empty:!0}}]}},{"../../lib":700,"../../plots/cartesian/axes":748,"fast-isnumeric":221}],864:[function(a,t,m){function p(a,l,n,q){var b=l.calcdata;l=l._fullLayout;var f=q._id,c=f.charAt(0),k,r,m=[],p=0;for(k=0;k<n.length;k++){var u=b[n[k]];for(r=0;r<u.length;r++)m.push(u[r].pos),p+=(u[r].pts2||[]).length}if(m.length){k=h.distinctVals(m);m=k.minDiff/2;g.minDtick(q,k.minDiff,k.vals[0],!0);var t=l["violin"===a?"_numViolins":"_numBoxes"],
w="group"===l[a+"mode"]&&1<t,x=1-l[a+"gap"];a=1-l[a+"groupgap"];for(k=0;k<n.length;k++){u=b[n[k]];var F=u[0].trace,B=u[0].t,C=F.width,D=F.side,G,H;if(C){r=G=H=C/2;var E=0}else r=m,w?(E=e(l,q._id)+F.orientation,H=(E=Object.keys(((l._alignmentOpts[E]||{})[F.alignmentgroup]||{}).offsetGroups||{}).length)||t,E=E?F._offsetIndex:B.num,G=r*x*a/H,E=2*r*(-.5+(E+.5)/H)*x,H=r*x/H):(G=r*x*a,E=0,H=r);B.dPos=r;B.bPos=E;B.bdPos=G;B.wHover=H;B=E+G;if("positive"===D)D=r*(C?1:.5),r=E;else if("negative"===D){D=E;r*=
C?1:.5;var K=B}else D=r,E=K=B;C=!1;if((F.boxpoints||F.points)&&0<p){G=F.pointpos;H=F.jitter;var I=F.marker.size/2,J=0;if(0<=G+H)if(J=B*(G+H),J>D){C=!0;var L=I;var M=J}else J>E&&(L=I,M=D);J<=D&&(M=D);D=0;if(0>=G-H)if(D=-B*(G-H),D>r){C=!0;var N=I;var O=D}else D>K&&(N=I,O=r);D<=r&&(O=r)}else M=D,O=r;B=Array(u.length);for(r=0;r<u.length;r++)B[r]=u[r].pos;F._extremes[f]=g.findExtremes(q,B,{padded:C,vpadminus:O,vpadplus:M,ppadminus:{x:N,y:L}[c],ppadplus:{x:L,y:N}[c]})}}}var g=a("../../plots/cartesian/axes"),
h=a("../../lib"),e=a("../../plots/cartesian/axis_ids").getAxisGroup,n=["v","h"];t.exports={crossTraceCalc:function(a,e){var b=a.calcdata,g=e.xaxis;e=e.yaxis;for(var d=0;d<n.length;d++){for(var f=n[d],c="h"===f?e:g,h=[],l=0;l<b.length;l++){var m=b[l],t=m[0].t;m=m[0].trace;!0!==m.visible||"box"!==m.type&&"candlestick"!==m.type||t.empty||(m.orientation||"v")!==f||m.xaxis!==g._id||m.yaxis!==e._id||h.push(l)}p("box",a,h,c)}},setPositionOffset:p}},{"../../lib":700,"../../plots/cartesian/axes":748,"../../plots/cartesian/axis_ids":751}],
865:[function(a,t,m){function p(a,b,d,f){var c=d("y"),g=d("x"),l=g&&g.length;if(c&&c.length){var n="v";l?c=Math.min(h.minRowLength(g),h.minRowLength(c)):(d("x0"),c=h.minRowLength(c))}else if(l)n="h",d("y0"),c=h.minRowLength(g);else{b.visible=!1;return}b._length=c;e.getComponentMethod("calendars","handleTraceDefaults")(a,b,["x","y"],f);d("orientation",n)}function g(a,b,d,e){e=e.prefix;a=h.coerce2(a,b,l,"marker.outliercolor");var c=d("marker.line.outliercolor");(e=d(e+"points",a||c?"suspectedoutliers":
void 0))?(d("jitter","all"===e?.3:0),d("pointpos","all"===e?-1.5:0),d("marker.symbol"),d("marker.opacity"),d("marker.size"),d("marker.color",b.line.color),d("marker.line.color"),d("marker.line.width"),"suspectedoutliers"===e&&(d("marker.line.outliercolor",b.marker.color),d("marker.line.outlierwidth")),d("selected.marker.color"),d("unselected.marker.color"),d("selected.marker.size"),d("unselected.marker.size"),d("text"),d("hovertext")):delete b.marker;e=d("hoveron");"all"!==e&&-1===e.indexOf("points")||
d("hovertemplate");h.coerceSelectionMarkerOpacity(b,d)}var h=a("../../lib"),e=a("../../registry"),n=a("../../components/color"),b=a("../bar/defaults").handleGroupingDefaults,l=a("./attributes");t.exports={supplyDefaults:function(a,b,d,e){function c(c,d){return h.coerce(a,b,l,c,d)}p(a,b,c,e);!1!==b.visible&&(c("line.color",(a.marker||{}).color||d),c("line.width"),c("fillcolor",n.addOpacity(b.line.color,.5)),c("whiskerwidth"),c("boxmean"),c("width"),c("notched",void 0!==a.notchwidth)&&c("notchwidth"),
g(a,b,c,{prefix:"box"}))},crossTraceDefaults:function(a,e){function d(a){return h.coerce(c._input,c,l,a)}for(var f,c,g=0;g<a.length;g++){c=a[g];var n=c.type;if("box"===n||"violin"===n)f=c._input,"group"===e[n+"mode"]&&b(f,c,e,d)}},handleSampleDefaults:p,handlePointsDefaults:g}},{"../../components/color":577,"../../lib":700,"../../registry":829,"../bar/defaults":843,"./attributes":862}],866:[function(a,t,m){t.exports=function(a,g){g.hoverOnBox&&(a.hoverOnBox=g.hoverOnBox);"xVal"in g&&(a.x=g.xVal);
"yVal"in g&&(a.y=g.yVal);g.xa&&(a.xaxis=g.xa);g.ya&&(a.yaxis=g.ya);return a}},{}],867:[function(a,t,m){function p(a,g,d,f){function c(a){return(G(a)+H(a))/2}var k=a.cd,l=a.xa,q=a.ya,m=k[0].trace,p=k[0].t,u="violin"===m.type,t=[],x,F=p.bdPos,B=p.wHover;u&&"both"!==m.side?("positive"===m.side&&(x=function(a){a=a.pos+p.bPos-D;return n.inbox(a,a+B,E)}),"negative"===m.side&&(x=function(a){a=a.pos+p.bPos-D;return n.inbox(a-B,a,E)})):x=function(a){a=a.pos+p.bPos-D;return n.inbox(a-B,a+B,E)};u=u?function(a){return n.inbox(a.span[0]-
C,a.span[1]-C,E)}:function(a){return n.inbox(a.min-C,a.max-C,E)};if("h"===m.orientation){var C=g;var D=d;var G=u;var H=x;x="y";d=q;g="x"}else C=d,D=g,G=x,H=u,x="x",d=l,g="y",l=q;q=Math.min(1,F/Math.abs(d.r2c(d.range[1])-d.r2c(d.range[0])));var E=a.maxHoverDistance-q;q=a.maxSpikeDistance-q;f=n.getDistanceFunction(f,G,H,c);n.getClosest(k,f,a);if(!1===a.index)return[];k=k[a.index];f=m.line.color;u=(m.marker||{}).color;b.opacity(f)&&m.line.width?a.color=f:b.opacity(u)&&m.boxpoints?a.color=u:a.color=m.fillcolor;
a[x+"0"]=d.c2p(k.pos+p.bPos-F,!0);a[x+"1"]=d.c2p(k.pos+p.bPos+F,!0);a[x+"LabelVal"]=k.pos;F=x+"Spike";a.spikeDistance=c(k)*q/E;a[F]=d.c2p(k.pos,!0);f={};d=["med","min","q1","q3","max"];(m.boxmean||(m.meanline||{}).visible)&&d.push("mean");(m.boxpoints||m.points)&&d.push("lf","uf");for(x=0;x<d.length;x++)if(q=d[x],q in k&&!(k[q]in f)){f[k[q]]=!0;u=k[q];var K=l.c2p(u,!0),I=e.extendFlat({},a);I[g+"0"]=I[g+"1"]=K;I[g+"LabelVal"]=u;I[g+"Label"]=(p.labels?p.labels[q]+" ":"")+h.hoverLabelText(l,u);I.hoverOnBox=
!0;"mean"===q&&"sd"in k&&"sd"===m.boxmean&&(I[g+"err"]=k.sd);a.name="";a.spikeDistance=void 0;a[F]=void 0;I.hovertemplate=!1;t.push(I)}return t}function g(a,b,d){for(var f=a.cd,c=a.xa,g=a.ya,h=f[0].trace,q=c.c2p(b),m=g.c2p(d),p=n.quadrature(function(a){var b=Math.max(3,a.mrc||0);return Math.max(Math.abs(c.c2p(a.x)-q)-b,1-3/b)},function(a){var b=Math.max(3,a.mrc||0);return Math.max(Math.abs(g.c2p(a.y)-m)-b,1-3/b)}),u=!1,t=0;t<f.length;t++){b=f[t];for(var x=0;x<(b.pts||[]).length;x++)d=b.pts[x],d=p(d),
d<=a.distance&&(a.distance=d,u=[t,x])}if(!u)return!1;b=f[u[0]];d=b.pts[u[1]];f=c.c2p(d.x,!0);p=g.c2p(d.y,!0);u=d.mrc||1;a=e.extendFlat({},a,{index:d.i,color:(h.marker||{}).color,name:h.name,x0:f-u,x1:f+u,y0:p-u,y1:p+u,spikeDistance:a.distance,hovertemplate:h.hovertemplate});"h"===h.orientation?(f=g,a.xLabelVal=d.x,a.yLabelVal=b.pos):(f=c,a.xLabelVal=b.pos,a.yLabelVal=d.y);p=f._id.charAt(0);a[p+"Spike"]=f.c2p(b.pos,!0);l(d,h,a);return a}var h=a("../../plots/cartesian/axes"),e=a("../../lib"),n=a("../../components/fx"),
b=a("../../components/color"),l=a("../scatter/fill_hover_text");t.exports={hoverPoints:function(a,b,d,e){var c=a.cd[0].trace.hoveron,f=[],h;-1!==c.indexOf("boxes")&&(f=f.concat(p(a,b,d,e)));-1!==c.indexOf("points")&&(h=g(a,b,d));if("closest"===e)return h?[h]:f;h&&f.push(h);return f},hoverOnBoxes:p,hoverOnPoints:g}},{"../../components/color":577,"../../components/fx":616,"../../lib":700,"../../plots/cartesian/axes":748,"../scatter/fill_hover_text":1059}],868:[function(a,t,m){m={};m.attributes=a("./attributes");
m.layoutAttributes=a("./layout_attributes");m.supplyDefaults=a("./defaults").supplyDefaults;m.crossTraceDefaults=a("./defaults").crossTraceDefaults;m.supplyLayoutDefaults=a("./layout_defaults").supplyLayoutDefaults;m.calc=a("./calc");m.crossTraceCalc=a("./cross_trace_calc").crossTraceCalc;m.plot=a("./plot").plot;m.style=a("./style").style;m.styleOnSelect=a("./style").styleOnSelect;m.hoverPoints=a("./hover").hoverPoints;m.eventData=a("./event_data");m.selectPoints=a("./select");m.moduleType="trace";
m.name="box";m.basePlotModule=a("../../plots/cartesian");m.categories="cartesian svg symbols oriented box-violin showLegend boxLayout zoomScale".split(" ");m.meta={};t.exports=m},{"../../plots/cartesian":759,"./attributes":862,"./calc":863,"./cross_trace_calc":864,"./defaults":865,"./event_data":866,"./hover":867,"./layout_attributes":869,"./layout_defaults":870,"./plot":871,"./select":872,"./style":873}],869:[function(a,t,m){t.exports={boxmode:{valType:"enumerated",values:["group","overlay"],dflt:"overlay",
editType:"calc"},boxgap:{valType:"number",min:0,max:1,dflt:.3,editType:"calc"},boxgroupgap:{valType:"number",min:0,max:1,dflt:.3,editType:"calc"}}},{}],870:[function(a,t,m){function p(a,b,e,h,q){a=q+"Layout";b=!1;for(var d=0;d<e.length;d++)if(g.traceIs(e[d],a)){b=!0;break}b&&(h(q+"mode"),h(q+"gap"),h(q+"groupgap"))}var g=a("../../registry"),h=a("../../lib"),e=a("./layout_attributes");t.exports={supplyLayoutDefaults:function(a,b,g){p(a,b,g,function(g,l){return h.coerce(a,b,e,g,l)},"box")},_supply:p}},
{"../../lib":700,"../../registry":829,"./layout_attributes":869}],871:[function(a,t,m){function p(a,b,g,d){var f=b.pos,c=b.val,h=d.bPos,l=d.wdPos||0,q=d.bPosPxOffset||0,m=g.whiskerwidth||0,p=g.notched||!1,u=p?1-2*g.notchwidth:1;if(Array.isArray(d.bdPos)){var t=d.bdPos[0];var x=d.bdPos[1]}else x=t=d.bdPos;a=a.selectAll("path.box").data("violin"!==g.type||g.box.visible?n.identity:[]);a.enter().append("path").style("vector-effect","non-scaling-stroke").attr("class","box");a.exit().remove();a.each(function(a){if(a.empty)return"M0,0Z";
var b=a.pos,d=f.c2p(b+h,!0)+q,k=f.c2p(b+h-t,!0)+q,r=f.c2p(b+h+x,!0)+q,v=f.c2p(b+h-l,!0)+q,w=f.c2p(b+h+l,!0)+q,z=f.c2p(b+h-t*u,!0)+q;b=f.c2p(b+h+x*u,!0)+q;var A=c.c2p(a.q1,!0),y=c.c2p(a.q3,!0),F=n.constrain(c.c2p(a.med,!0),Math.min(A,y)+1,Math.max(A,y)-1),M=void 0===a.lf||!1===g.boxpoints,N=c.c2p(M?a.min:a.lf,!0);M=c.c2p(M?a.max:a.uf,!0);var O=c.c2p(a.ln,!0);a=c.c2p(a.un,!0);"h"===g.orientation?e.select(this).attr("d","M"+F+","+z+"V"+b+"M"+A+","+k+"V"+r+(p?"H"+O+"L"+F+","+b+"L"+a+","+r:"")+"H"+y+"V"+
k+(p?"H"+a+"L"+F+","+z+"L"+O+","+k:"")+"ZM"+A+","+d+"H"+N+"M"+y+","+d+"H"+M+(0===m?"":"M"+N+","+v+"V"+w+"M"+M+","+v+"V"+w)):e.select(this).attr("d","M"+z+","+F+"H"+b+"M"+k+","+A+"H"+r+(p?"V"+O+"L"+b+","+F+"L"+r+","+a:"")+"V"+y+"H"+k+(p?"V"+a+"L"+z+","+F+"L"+k+","+O:"")+"ZM"+d+","+A+"V"+N+"M"+d+","+y+"V"+M+(0===m?"":"M"+v+","+N+"H"+w+"M"+v+","+M+"H"+w))})}function g(a,e,g,d){var f=e.x;e=e.y;var c=d.bdPos,h=d.bPos,l=g.boxpoints||g.points;n.seedPseudoRandom();var q=function(a){a.forEach(function(a){a.t=
d;a.trace=g});return a};a=a.selectAll("g.points").data(l?q:[]);a.enter().append("g").attr("class","points");a.exit().remove();a=a.selectAll("path").data(function(a){var b=a.pts2;var d=Math.max((a.max-a.min)/10,a.q3-a.q1);var e=1E-9*d,f=.01*d,k=[],r=0;if(g.jitter){if(0===d)for(r=1,k=Array(b.length),d=0;d<b.length;d++)k[d]=1;else for(d=0;d<b.length;d++){var q=Math.max(0,d-5);var m=b[q].v,p=Math.min(b.length-1,d+5),u=b[p].v;"all"!==l&&(b[d].v<a.lf?u=Math.min(u,a.lf):m=Math.max(m,a.uf));q=Math.sqrt(f*
(p-q)/(u-m+e))||0;q=n.constrain(Math.abs(q),0,1);k.push(q);r=Math.max(q,r)}q=2*g.jitter/(r||1)}for(d=0;d<b.length;d++)e=b[d],f=e.v,r=g.jitter?q*k[d]*(n.pseudoRandom()-.5):0,r=a.pos+h+c*(g.pointpos+r),"h"===g.orientation?(e.y=r,e.x=f):(e.x=r,e.y=f),"suspectedoutliers"===l&&f<a.uo&&f>a.lo&&(e.so=!0);return b});a.enter().append("path").classed("point",!0);a.exit().remove();a.call(b.translatePoints,f,e)}function h(a,b,g,d){var f=b.pos,c=b.val,h=d.bPos,l=d.bPosPxOffset||0,q=g.boxmean||(g.meanline||{}).visible;
if(Array.isArray(d.bdPos)){var m=d.bdPos[0];var p=d.bdPos[1]}else p=m=d.bdPos;a=a.selectAll("path.mean").data("box"===g.type&&g.boxmean||"violin"===g.type&&g.box.visible&&g.meanline.visible?n.identity:[]);a.enter().append("path").attr("class","mean").style({fill:"none","vector-effect":"non-scaling-stroke"});a.exit().remove();a.each(function(a){var b=f.c2p(a.pos+h,!0)+l,d=f.c2p(a.pos+h-m,!0)+l,k=f.c2p(a.pos+h+p,!0)+l,n=c.c2p(a.mean,!0),r=c.c2p(a.mean-a.sd,!0);a=c.c2p(a.mean+a.sd,!0);"h"===g.orientation?
e.select(this).attr("d","M"+n+","+d+"V"+k+("sd"===q?"m0,0L"+r+","+b+"L"+n+","+d+"L"+a+","+b+"Z":"")):e.select(this).attr("d","M"+d+","+n+"H"+k+("sd"===q?"m0,0L"+b+","+r+"L"+d+","+n+"L"+b+","+a+"Z":""))})}var e=a("d3"),n=a("../../lib"),b=a("../../components/drawing");t.exports={plot:function(a,b,q,d){var f=b.xaxis,c=b.yaxis;n.makeTraceGroups(d,q,"trace boxes").each(function(a){var d=e.select(this),k=a[0];a=k.t;var l=k.trace;b.isRangePlot||(k.node3=d);a.wdPos=a.bdPos*l.whiskerwidth;if(!0!==l.visible||
a.empty)d.remove();else{if("h"===l.orientation){k=c;var n=f}else k=f,n=c;p(d,{pos:k,val:n},l,a);g(d,{x:f,y:c},l,a);h(d,{pos:k,val:n},l,a)}})},plotBoxAndWhiskers:p,plotPoints:g,plotBoxMean:h}},{"../../components/drawing":598,"../../lib":700,d3:154}],872:[function(a,t,m){t.exports=function(a,g){var h=a.cd,e=a.xaxis,n=a.yaxis,b=[],l,m;if(!1===g)for(l=0;l<h.length;l++)for(m=0;m<(h[l].pts||[]).length;m++)h[l].pts[m].selected=0;else for(l=0;l<h.length;l++)for(m=0;m<(h[l].pts||[]).length;m++){var q=h[l].pts[m],
d=e.c2p(q.x),f=n.c2p(q.y);g.contains([d,f],null,q.i,a)?(b.push({pointNumber:q.i,x:e.c2d(q.x),y:n.c2d(q.y)}),q.selected=1):q.selected=0}return b}},{}],873:[function(a,t,m){var p=a("d3"),g=a("../../components/color"),h=a("../../components/drawing");t.exports={style:function(a,n){n=n?n[0].node3:p.select(a).selectAll("g.trace.boxes");n.style("opacity",function(a){return a[0].trace.opacity});n.each(function(b){function e(a,b,d,e){a.style("stroke-width",b+"px").call(g.stroke,d).call(g.fill,e)}var n=p.select(this),
q=b[0].trace;b=q.line.width;var d=n.selectAll("path.box");"candlestick"===q.type?d.each(function(a){if(!a.empty){var b=p.select(this),d=q[a.dir];e(b,d.line.width,d.line.color,d.fillcolor);b.style("opacity",q.selectedpoints&&!a.selected?.3:1)}}):(e(d,b,q.line.color,q.fillcolor),n.selectAll("path.mean").style({"stroke-width":b,"stroke-dasharray":2*b+"px,"+b+"px"}).call(g.stroke,q.line.color),n=n.selectAll("path.point"),h.pointStyle(n,q,a))})},styleOnSelect:function(a,g){var b=g[0].trace;g=g[0].node3.selectAll("path.point");
b.selectedpoints?h.selectedPointStyle(g,b):h.pointStyle(g,b,a)}}},{"../../components/color":577,"../../components/drawing":598,d3:154}],874:[function(a,t,m){function p(a){return{line:{color:g({},h.line.color,{dflt:a}),width:h.line.width,editType:"style"},fillcolor:h.fillcolor,editType:"style"}}var g=a("../../lib").extendFlat;m=a("../ohlc/attributes");var h=a("../box/attributes");t.exports={x:m.x,open:m.open,high:m.high,low:m.low,close:m.close,line:{width:g({},h.line.width,{}),editType:"style"},increasing:p(m.increasing.line.color.dflt),
decreasing:p(m.decreasing.line.color.dflt),text:m.text,hovertext:m.hovertext,whiskerwidth:g({},h.whiskerwidth,{dflt:0}),hoverlabel:m.hoverlabel}},{"../../lib":700,"../box/attributes":862,"../ohlc/attributes":999}],875:[function(a,t,m){function p(a,b,e,g){return{min:e,q1:Math.min(a,g),med:g,q3:Math.max(a,g),max:b}}var g=a("../../lib"),h=a("../../plots/cartesian/axes"),e=a("../ohlc/calc").calcCommon;t.exports=function(a,b){var l=a._fullLayout,n=h.getFromId(a,b.xaxis),q=h.getFromId(a,b.yaxis);n=n.makeCalcdata(b,
"x");a=e(a,b,n,q,p);return a.length?(g.extendFlat(a[0].t,{num:l._numBoxes,dPos:g.distinctVals(n).minDiff/2,posLetter:"x",valLetter:"y"}),l._numBoxes++,a):[{t:{empty:!0}}]}},{"../../lib":700,"../../plots/cartesian/axes":748,"../ohlc/calc":1E3}],876:[function(a,t,m){function p(a,e,g,n){a=g(n+".line.color");g(n+".line.width",e.line.width);g(n+".fillcolor",h.addOpacity(a,.5))}var g=a("../../lib"),h=a("../../components/color"),e=a("../ohlc/ohlc_defaults"),n=a("./attributes");t.exports=function(a,h,m,q){function b(b,
c){return g.coerce(a,h,n,b,c)}e(a,h,b,q)?(b("line.width"),p(a,h,b,"increasing"),p(a,h,b,"decreasing"),b("text"),b("hovertext"),b("whiskerwidth"),q._requestRangeslider[h.xaxis]=!0):h.visible=!1}},{"../../components/color":577,"../../lib":700,"../ohlc/ohlc_defaults":1004,"./attributes":874}],877:[function(a,t,m){t.exports={moduleType:"trace",name:"candlestick",basePlotModule:a("../../plots/cartesian"),categories:["cartesian","svg","showLegend","candlestick","boxLayout"],meta:{},attributes:a("./attributes"),
layoutAttributes:a("../box/layout_attributes"),supplyLayoutDefaults:a("../box/layout_defaults").supplyLayoutDefaults,crossTraceCalc:a("../box/cross_trace_calc").crossTraceCalc,supplyDefaults:a("./defaults"),calc:a("./calc"),plot:a("../box/plot").plot,layerName:"boxlayer",style:a("../box/style").style,hoverPoints:a("../ohlc/hover").hoverPoints,selectPoints:a("../ohlc/select")}},{"../../plots/cartesian":759,"../box/cross_trace_calc":864,"../box/layout_attributes":869,"../box/layout_defaults":870,"../box/plot":871,
"../box/style":873,"../ohlc/hover":1002,"../ohlc/select":1006,"./attributes":874,"./calc":875,"./defaults":876}],878:[function(a,t,m){function p(a,n,b,l){["aaxis","baxis"].forEach(function(e){var q=e.charAt(0),d=a[e]||{},f=h.newContainer(n,e);g(d,f,{tickfont:"x",id:q+"axis",letter:q,font:n.font,name:e,data:a[q],calendar:n.calendar,dfltColor:l,bgColor:b.paper_bgcolor,fullLayout:b});f._categories=f._categories||[];a[e]||"-"===d.type||(a[e]={type:d.type})})}var g=a("./axis_defaults"),h=a("../../plot_api/plot_template");
t.exports=function(a,g,b,h,m){h("a")||(h("da"),h("a0"));h("b")||(h("db"),h("b0"));p(a,g,b,m)}},{"../../plot_api/plot_template":738,"./axis_defaults":883}],879:[function(a,t,m){function p(a,e){if(!g(a)||10<=e)return null;for(var h=Infinity,b=-Infinity,l=a.length,m=0;m<l;m++){var q=a[m];if(g(q)){if(q=p(q,e+1))h=Math.min(q[0],h),b=Math.max(q[1],b)}else h=Math.min(q,h),b=Math.max(q,b)}return[h,b]}var g=a("../../lib").isArrayOrTypedArray;t.exports=function(a){return p(a,0)}},{"../../lib":700}],880:[function(a,
t,m){var p=a("../../plots/font_attributes");m=a("./axis_attributes");a=a("../../components/color/attributes");p=p({editType:"calc"});p.family.dflt='"Open Sans", verdana, arial, sans-serif';p.size.dflt=12;p.color.dflt=a.defaultLine;t.exports={carpet:{valType:"string",editType:"calc"},x:{valType:"data_array",editType:"calc+clearAxisTypes"},y:{valType:"data_array",editType:"calc+clearAxisTypes"},a:{valType:"data_array",editType:"calc"},a0:{valType:"number",dflt:0,editType:"calc"},da:{valType:"number",
dflt:1,editType:"calc"},b:{valType:"data_array",editType:"calc"},b0:{valType:"number",dflt:0,editType:"calc"},db:{valType:"number",dflt:1,editType:"calc"},cheaterslope:{valType:"number",dflt:1,editType:"calc"},aaxis:m,baxis:m,font:p,color:{valType:"color",dflt:a.defaultLine,editType:"plot"},transforms:void 0}},{"../../components/color/attributes":576,"../../plots/font_attributes":774,"./axis_attributes":882}],881:[function(a,t,m){var p=a("../../lib").isArrayOrTypedArray;t.exports=function(a,h,e,n){var b=
p(e)?"a":"b",g=("a"===b?a.aaxis:a.baxis).smoothing,m="a"===b?a.a2i:a.b2j,q="a"===b?e:n;n="a"===b?n:e;e="a"===b?h.a.length:h.b.length;var d="a"===b?h.b.length:h.a.length,f=Math.floor("a"===b?a.b2j(n):a.a2i(n));h="a"===b?function(b){return a.evalxy([],b,f)}:function(b){return a.evalxy([],f,b)};if(g){var c=Math.max(0,Math.min(d-2,f));var k=f-c;var r="a"===b?function(b,d){return a.dxydi([],b,c,d,k)}:function(b,d){return a.dxydj([],c,b,k,d)}}b=m(q[0]);m=m(q[1]);q=b<m?1:-1;var t=1E-8*(m-b);var z=0<q?Math.ceil:
Math.floor;n=0<q?Math.min:Math.max;d=0<q?Math.max:Math.min;var A=(0<q?Math.floor:Math.ceil)(b+t);z=z(m-t);t=h(b);for(var y=[[t]];A*q<z*q;A+=q){var w=[];var x=d(b,A);var F=n(m,A+q);var B=F-x;var C=Math.max(0,Math.min(e-2,Math.floor(.5*(x+F))));var D=h(F);g&&(x=r(C,x-C),C=r(C,F-C),w.push([t[0]+x[0]/3*B,t[1]+x[1]/3*B]),w.push([D[0]-C[0]/3*B,D[1]-C[1]/3*B]));w.push(D);y.push(w);t=D}return y}},{"../../lib":700}],882:[function(a,t,m){m=a("../../plots/font_attributes");var p=a("../../components/color/attributes"),
g=a("../../plots/cartesian/layout_attributes");a=a("../../plot_api/edit_types").overrideAll;t.exports={color:{valType:"color",editType:"calc"},smoothing:{valType:"number",dflt:1,min:0,max:1.3,editType:"calc"},title:{text:{valType:"string",dflt:"",editType:"calc"},font:m({editType:"calc"}),offset:{valType:"number",dflt:10,editType:"calc"},editType:"calc"},type:{valType:"enumerated",values:["-","linear","date","category"],dflt:"-",editType:"calc"},autorange:{valType:"enumerated",values:[!0,!1,"reversed"],
dflt:!0,editType:"calc"},rangemode:{valType:"enumerated",values:["normal","tozero","nonnegative"],dflt:"normal",editType:"calc"},range:{valType:"info_array",editType:"calc",items:[{valType:"any",editType:"calc"},{valType:"any",editType:"calc"}]},fixedrange:{valType:"boolean",dflt:!1,editType:"calc"},cheatertype:{valType:"enumerated",values:["index","value"],dflt:"value",editType:"calc"},tickmode:{valType:"enumerated",values:["linear","array"],dflt:"array",editType:"calc"},nticks:{valType:"integer",
min:0,dflt:0,editType:"calc"},tickvals:{valType:"data_array",editType:"calc"},ticktext:{valType:"data_array",editType:"calc"},showticklabels:{valType:"enumerated",values:["start","end","both","none"],dflt:"start",editType:"calc"},tickfont:m({editType:"calc"}),tickangle:{valType:"angle",dflt:"auto",editType:"calc"},tickprefix:{valType:"string",dflt:"",editType:"calc"},showtickprefix:{valType:"enumerated",values:["all","first","last","none"],dflt:"all",editType:"calc"},ticksuffix:{valType:"string",
dflt:"",editType:"calc"},showticksuffix:{valType:"enumerated",values:["all","first","last","none"],dflt:"all",editType:"calc"},showexponent:{valType:"enumerated",values:["all","first","last","none"],dflt:"all",editType:"calc"},exponentformat:{valType:"enumerated",values:"none e E power SI B".split(" "),dflt:"B",editType:"calc"},separatethousands:{valType:"boolean",dflt:!1,editType:"calc"},tickformat:{valType:"string",dflt:"",editType:"calc"},tickformatstops:a(g.tickformatstops,"calc","from-root"),
categoryorder:{valType:"enumerated",values:["trace","category ascending","category descending","array"],dflt:"trace",editType:"calc"},categoryarray:{valType:"data_array",editType:"calc"},labelpadding:{valType:"integer",dflt:10,editType:"calc"},labelprefix:{valType:"string",editType:"calc"},labelsuffix:{valType:"string",dflt:"",editType:"calc"},showline:{valType:"boolean",dflt:!1,editType:"calc"},linecolor:{valType:"color",dflt:p.defaultLine,editType:"calc"},linewidth:{valType:"number",min:0,dflt:1,
editType:"calc"},gridcolor:{valType:"color",editType:"calc"},gridwidth:{valType:"number",min:0,dflt:1,editType:"calc"},showgrid:{valType:"boolean",dflt:!0,editType:"calc"},minorgridcount:{valType:"integer",min:0,dflt:0,editType:"calc"},minorgridwidth:{valType:"number",min:0,dflt:1,editType:"calc"},minorgridcolor:{valType:"color",dflt:p.lightLine,editType:"calc"},startline:{valType:"boolean",editType:"calc"},startlinecolor:{valType:"color",editType:"calc"},startlinewidth:{valType:"number",dflt:1,editType:"calc"},
endline:{valType:"boolean",editType:"calc"},endlinewidth:{valType:"number",dflt:1,editType:"calc"},endlinecolor:{valType:"color",editType:"calc"},tick0:{valType:"number",min:0,dflt:0,editType:"calc"},dtick:{valType:"number",min:0,dflt:1,editType:"calc"},arraytick0:{valType:"integer",min:0,dflt:0,editType:"calc"},arraydtick:{valType:"integer",min:1,dflt:1,editType:"calc"},_deprecated:{title:{valType:"string",editType:"calc"},titlefont:m({editType:"calc"}),titleoffset:{valType:"number",dflt:10,editType:"calc"}},
editType:"calc"}},{"../../components/color/attributes":576,"../../plot_api/edit_types":731,"../../plots/cartesian/layout_attributes":760,"../../plots/font_attributes":774}],883:[function(a,t,m){function p(a,b){if("-"===a.type){var c=a._id.charAt(0);a.type=d(b,a[c+"calendar"])}}var g=a("./attributes"),h=a("../../components/color").addOpacity,e=a("../../registry"),n=a("../../lib"),b=a("../../plots/cartesian/tick_value_defaults"),l=a("../../plots/cartesian/tick_label_defaults"),u=a("../../plots/cartesian/category_order_defaults"),
q=a("../../plots/cartesian/set_convert"),d=a("../../plots/cartesian/axis_autotype");t.exports=function(a,c,d){function f(b,d){return n.coerce(a,c,y,b,d)}function k(b,d){return n.coerce2(a,c,y,b,d)}var m=d.letter,t=d.font||{},y=g[m+"axis"];d.name&&(c._name=d.name,c._id=d.name);var w=f("type");"-"===w&&(d.data&&p(c,d.data),"-"===c.type?c.type="linear":w=a.type=c.type);f("smoothing");f("cheatertype");f("showticklabels");f("labelprefix",m+" \x3d ");f("labelsuffix");f("showtickprefix");f("showticksuffix");
f("separatethousands");f("tickformat");f("exponentformat");f("showexponent");f("categoryorder");f("tickmode");f("tickvals");f("ticktext");f("tick0");f("dtick");"array"===c.tickmode&&(f("arraytick0"),f("arraydtick"));f("labelpadding");c._hovertitle=m;"date"===w&&e.getComponentMethod("calendars","handleDefaults")(a,c,"calendar",d.calendar);q(c,d.fullLayout);c.c2p=n.identity;var x=f("color",d.dfltColor),F=x===a.color?x:t.color;f("title.text")&&(n.coerceFont(f,"title.font",{family:t.family,size:Math.round(1.2*
t.size),color:F}),f("title.offset"));f("tickangle");f("autorange",!c.isValidRange(a.range))&&f("rangemode");f("range");c.cleanRange();f("fixedrange");b(a,c,f,w);l(a,c,f,w,d);u(a,c,f,{data:d.data,dataAttr:m});d=k("gridcolor",h(x,.3));m=k("gridwidth");t=f("showgrid");t||(delete c.gridcolor,delete c.gridwidth);w=k("startlinecolor",x);F=k("startlinewidth",m);f("startline",c.showgrid||!!w||!!F)||(delete c.startlinecolor,delete c.startlinewidth);x=k("endlinecolor",x);w=k("endlinewidth",m);f("endline",c.showgrid||
!!x||!!w)||(delete c.endlinecolor,delete c.endlinewidth);t?(f("minorgridcount"),f("minorgridwidth",m),f("minorgridcolor",h(d,.06)),c.minorgridcount||(delete c.minorgridwidth,delete c.minorgridcolor)):(delete c.gridcolor,delete c.gridWidth);"none"===c.showticklabels&&(delete c.tickfont,delete c.tickangle,delete c.showexponent,delete c.exponentformat,delete c.tickformat,delete c.showticksuffix,delete c.showtickprefix);c.showticksuffix||delete c.ticksuffix;c.showtickprefix||delete c.tickprefix;f("tickmode");
return c}},{"../../components/color":577,"../../lib":700,"../../plots/cartesian/axis_autotype":749,"../../plots/cartesian/category_order_defaults":752,"../../plots/cartesian/set_convert":766,"../../plots/cartesian/tick_label_defaults":767,"../../plots/cartesian/tick_value_defaults":769,"../../registry":829,"./attributes":880}],884:[function(a,t,m){var p=a("../../plots/cartesian/axes"),g=a("../../lib").isArray1D,h=a("./cheater_basis"),e=a("./array_minmax"),n=a("./calc_gridlines"),b=a("./calc_labels"),
l=a("./calc_clippath"),u=a("../heatmap/clean_2d_array"),q=a("./smooth_fill_2d_array"),d=a("../heatmap/convert_column_xyz"),f=a("./set_convert");t.exports=function(a,k){var c=p.getFromId(a,k.xaxis);a=p.getFromId(a,k.yaxis);var m=k.aaxis,t=k.baxis,A=k.x,y=k.y,w=[];A&&g(A)&&w.push("x");y&&g(y)&&w.push("y");w.length&&d(k,m,t,"a","b",w);w=k._a=k._a||k.a;var x=k._b=k._b||k.b;A=k._x||k.x;y=k._y||k.y;var F={};k._cheater&&(A=h("index"===m.cheatertype?w.length:w,"index"===t.cheatertype?x.length:x,k.cheaterslope));
k._x=A=u(A);k._y=y=u(y);q(A,w,x);q(y,w,x);f(k);k.setScale();var B=e(A),C=e(y),D=.5*(B[1]-B[0]);B=.5*(B[1]+B[0]);var G=.5*(C[1]-C[0]);C=.5*(C[1]+C[0]);B=[B-1.3*D,B+1.3*D];C=[C-1.3*G,C+1.3*G];k._extremes[c._id]=p.findExtremes(c,B,{padded:!0});k._extremes[a._id]=p.findExtremes(a,C,{padded:!0});n(k,"a","b");n(k,"b","a");b(k,m);b(k,t);F.clipsegments=l(k._xctrl,k._yctrl,m,t);F.x=A;F.y=y;F.a=w;F.b=x;return[F]}},{"../../lib":700,"../../plots/cartesian/axes":748,"../heatmap/clean_2d_array":950,"../heatmap/convert_column_xyz":952,
"./array_minmax":879,"./calc_clippath":885,"./calc_gridlines":886,"./calc_labels":887,"./cheater_basis":889,"./set_convert":902,"./smooth_fill_2d_array":903}],885:[function(a,t,m){t.exports=function(a,g,h,e){var n,b=[];h=!!h.smoothing;var l=!!e.smoothing,m=a[0].length-1,q=a.length-1;e=0;var d=[];for(n=[];e<=m;e++)d[e]=a[0][e],n[e]=g[0][e];b.push({x:d,y:n,bicubic:h});e=0;d=[];for(n=[];e<=q;e++)d[e]=a[e][m],n[e]=g[e][m];b.push({x:d,y:n,bicubic:l});e=m;d=[];for(n=[];0<=e;e--)d[m-e]=a[q][e],n[m-e]=g[q][e];
b.push({x:d,y:n,bicubic:h});e=q;d=[];for(n=[];0<=e;e--)d[q-e]=a[e][0],n[q-e]=g[e][0];b.push({x:d,y:n,bicubic:l});return b}},{}],886:[function(a,t,m){var p=a("../../plots/cartesian/axes"),g=a("../../lib/extend").extendFlat;t.exports=function(a,e,n){function b(b){var c,f=[],g=[],h={};if("b"===e){var k=a.b2j(b);var l=Math.floor(Math.max(0,Math.min(F-2,k)));var r=k-l;h.length=F;h.crossLength=x;h.xy=function(b){return a.evalxy([],b,k)};h.dxy=function(b,c){return a.dxydi([],b,l,c,r)};for(c=0;c<x;c++){var q=
Math.min(x-2,c);var p=c-q;var u=a.evalxy([],c,k);if(t.smoothing&&0<c){var v=a.dxydi([],c-1,l,0,r);f.push(w[0]+v[0]/3);g.push(w[1]+v[1]/3);var w=a.dxydi([],c-1,l,1,r);f.push(u[0]-w[0]/3);g.push(u[1]-w[1]/3)}f.push(u[0]);g.push(u[1]);w=u}}else for(c=a.a2i(b),q=Math.floor(Math.max(0,Math.min(x-2,c))),p=c-q,h.length=x,h.crossLength=F,h.xy=function(b){return a.evalxy([],c,b)},h.dxy=function(b,c){return a.dxydj([],q,b,p,c)},k=0;k<F;k++)l=Math.min(F-2,k),r=k-l,u=a.evalxy([],c,k),t.smoothing&&0<k&&(v=a.dxydj([],
q,k-1,p,0),f.push(w[0]+v[0]/3),g.push(w[1]+v[1]/3),w=a.dxydj([],q,k-1,p,1),f.push(u[0]-w[0]/3),g.push(u[1]-w[1]/3)),f.push(u[0]),g.push(u[1]),w=u;h.axisLetter=e;h.axis=d;h.crossAxis=t;h.value=b;h.constvar=n;h.index=m;h.x=f;h.y=g;h.smoothing=t.smoothing;return h}function h(b){var c,f=[],g=[],h={};h.length=q.length;h.crossLength=r.length;if("b"===e){var k=Math.max(0,Math.min(F-2,b));var l=Math.min(1,Math.max(0,b-k));h.xy=function(c){return a.evalxy([],c,b)};h.dxy=function(b,c){return a.dxydi([],b,k,
c,l)};for(c=0;c<y;c++)f[c]=z[b*B][c],g[c]=A[b*B][c]}else{var m=Math.max(0,Math.min(x-2,b));var p=Math.min(1,Math.max(0,b-m));h.xy=function(c){return a.evalxy([],b,c)};h.dxy=function(b,c){return a.dxydj([],m,b,p,c)};for(c=0;c<w;c++)f[c]=z[c][b*B],g[c]=A[c][b*B]}h.axisLetter=e;h.axis=d;h.crossAxis=t;h.value=q[b];h.constvar=n;h.index=b;h.x=f;h.y=g;h.smoothing=t.smoothing;return h}var m,q=a["_"+e],d=a[e+"axis"];var f=d._gridlines=[];var c=d._minorgridlines=[],k=d._boundarylines=[],r=a["_"+n],t=a[n+"axis"];
"array"===d.tickmode&&(d.tickvals=q.slice());var z=a._xctrl,A=a._yctrl,y=z[0].length,w=z.length,x=a._a.length,F=a._b.length;p.prepTicks(d);"array"===d.tickmode&&delete d.tickvals;var B=d.smoothing?3:1;if("array"===d.tickmode){var C=5E-15;C=[Math.floor((q.length-1-d.arraytick0)/d.arraydtick*(1+C)),Math.ceil(-d.arraytick0/d.arraydtick/(1+C))].sort(function(a,b){return a-b});var D=C[0]-1;C=C[1]+1;for(m=D;m<C;m++){var G=d.arraytick0+d.arraydtick*m;0>G||G>q.length-1||f.push(g(h(G),{color:d.gridcolor,width:d.gridwidth}))}for(m=
D;m<C;m++){D=d.arraytick0+d.arraydtick*m;var H=Math.min(D+d.arraydtick,q.length-1);if(!(0>D||D>q.length-1||0>H||H>q.length-1)){var E=q[D];var K=q[H];for(f=0;f<d.minorgridcount;f++)G=H-D,0>=G||(G=E+(K-E)*(f+1)/(d.minorgridcount+1)*(d.arraydtick/G),G<q[0]||G>q[q.length-1]||c.push(g(b(G),{color:d.minorgridcolor,width:d.minorgridwidth})))}}d.startline&&k.push(g(h(0),{color:d.startlinecolor,width:d.startlinewidth}));d.endline&&k.push(g(h(q.length-1),{color:d.endlinecolor,width:d.endlinewidth}))}else{C=
5E-15;C=[Math.floor((q[q.length-1]-d.tick0)/d.dtick*(1+C)),Math.ceil((q[0]-d.tick0)/d.dtick/(1+C))].sort(function(a,b){return a-b});D=C[0];C=C[1];for(m=D;m<=C;m++)H=d.tick0+d.dtick*m,f.push(g(b(H),{color:d.gridcolor,width:d.gridwidth}));for(m=D-1;m<C+1;m++)for(H=d.tick0+d.dtick*m,f=0;f<d.minorgridcount;f++)G=H+d.dtick*(f+1)/(d.minorgridcount+1),G<q[0]||G>q[q.length-1]||c.push(g(b(G),{color:d.minorgridcolor,width:d.minorgridwidth}));d.startline&&k.push(g(b(q[0]),{color:d.startlinecolor,width:d.startlinewidth}));
d.endline&&k.push(g(b(q[q.length-1]),{color:d.endlinecolor,width:d.endlinewidth}))}}},{"../../lib/extend":690,"../../plots/cartesian/axes":748}],887:[function(a,t,m){var p=a("../../plots/cartesian/axes"),g=a("../../lib/extend").extendFlat;t.exports=function(a,e){var h=e._labels=[],b=e._gridlines;for(a=0;a<b.length;a++){var l=b[a];if(-1!==["start","both"].indexOf(e.showticklabels)){var m=p.tickText(e,l.value);g(m,{prefix:void 0,suffix:void 0,endAnchor:!0,xy:l.xy(0),dxy:l.dxy(0,0),axis:l.axis,length:l.crossAxis.length,
font:l.axis.tickfont,isFirst:0===a,isLast:a===b.length-1});h.push(m)}-1!==["end","both"].indexOf(e.showticklabels)&&(m=p.tickText(e,l.value),g(m,{endAnchor:!1,xy:l.xy(l.crossLength-1),dxy:l.dxy(l.crossLength-2,1),axis:l.axis,length:l.crossAxis.length,font:l.axis.tickfont,isFirst:0===a,isLast:a===b.length-1}),h.push(m))}}},{"../../lib/extend":690,"../../plots/cartesian/axes":748}],888:[function(a,t,m){t.exports=function(a,g,h,e){var n=a[0]-g[0],b=a[1]-g[1],l=h[0]-g[0],m=h[1]-g[1];h=Math.pow(n*n+b*
b,.25);a=Math.pow(l*l+m*m,.25);n=(a*a*n-h*h*l)*e;e*=a*a*b-h*h*m;b=a*(h+a)*3;h=h*(h+a)*3;return[[g[0]+(b&&n/b),g[1]+(b&&e/b)],[g[0]-(h&&n/h),g[1]-(h&&e/h)]]}},{}],889:[function(a,t,m){var p=a("../../lib").isArrayOrTypedArray;t.exports=function(a,h,e){var g,b,l=[],m=p(a)?a.length:a,q=p(h)?h.length:h,d=p(a)?a:null,f=p(h)?h:null;d&&(g=(d.length-1)/(d[d.length-1]-d[0])/(m-1));f&&(b=(f.length-1)/(f[f.length-1]-f[0])/(q-1));var c=Infinity,k=-Infinity;for(a=0;a<q;a++){l[a]=[];var r=f?(f[a]-f[0])*b:a/(q-1);
for(h=0;h<m;h++){var t=d?(d[h]-d[0])*g:h/(m-1);t-=r*e;c=Math.min(t,c);k=Math.max(t,k);l[a][h]=t}}e=1/(k-c);g=-c*e;for(a=0;a<q;a++)for(h=0;h<m;h++)l[a][h]=e*l[a][h]+g;return l}},{"../../lib":700}],890:[function(a,t,m){function p(a,g,b){return[(2*(-.5*b[0]+1.5*g[0])+a[0])/3,(2*(-.5*b[1]+1.5*g[1])+a[1])/3]}var g=a("./catmull_rom"),h=a("../../lib").ensureArray;t.exports=function(a,n,b,l,m,q){var d,e,c,k,r=b[0].length,u=b.length,t=m?3*r-2:r,A=q?3*u-2:u;a=h(a,A);n=h(n,A);for(c=0;c<A;c++)a[c]=h(a[c],t),
n[c]=h(n[c],t);for(k=e=0;e<u;e++,k+=q?3:1){var y=a[k];var w=n[k];var x=b[e];var F=l[e];for(c=d=0;d<r;d++,c+=m?3:1)y[c]=x[d],w[c]=F[d]}if(m)for(k=e=0;e<u;e++,k+=q?3:1){d=1;for(c=3;d<r-1;d++,c+=3)y=g([b[e][d-1],l[e][d-1]],[b[e][d],l[e][d]],[b[e][d+1],l[e][d+1]],m),a[k][c-1]=y[0][0],n[k][c-1]=y[0][1],a[k][c+1]=y[1][0],n[k][c+1]=y[1][1];d=p([a[k][0],n[k][0]],[a[k][2],n[k][2]],[a[k][3],n[k][3]]);a[k][1]=d[0];n[k][1]=d[1];d=p([a[k][t-1],n[k][t-1]],[a[k][t-3],n[k][t-3]],[a[k][t-4],n[k][t-4]]);a[k][t-2]=
d[0];n[k][t-2]=d[1]}if(q)for(c=0;c<t;c++){for(k=3;k<A-3;k+=3)y=g([a[k-3][c],n[k-3][c]],[a[k][c],n[k][c]],[a[k+3][c],n[k+3][c]],q),a[k-1][c]=y[0][0],n[k-1][c]=y[0][1],a[k+1][c]=y[1][0],n[k+1][c]=y[1][1];d=p([a[0][c],n[0][c]],[a[2][c],n[2][c]],[a[3][c],n[3][c]]);a[1][c]=d[0];n[1][c]=d[1];d=p([a[A-1][c],n[A-1][c]],[a[A-3][c],n[A-3][c]],[a[A-4][c],n[A-4][c]]);a[A-2][c]=d[0];n[A-2][c]=d[1]}if(m&&q)for(k=1;k<A;k+=0===(k+1)%3?2:1){for(c=3;c<t-3;c+=3)y=g([a[k][c-3],n[k][c-3]],[a[k][c],n[k][c]],[a[k][c+3],
n[k][c+3]],m),a[k][c-1]=.5*(a[k][c-1]+y[0][0]),n[k][c-1]=.5*(n[k][c-1]+y[0][1]),a[k][c+1]=.5*(a[k][c+1]+y[1][0]),n[k][c+1]=.5*(n[k][c+1]+y[1][1]);d=p([a[k][0],n[k][0]],[a[k][2],n[k][2]],[a[k][3],n[k][3]]);a[k][1]=.5*(a[k][1]+d[0]);n[k][1]=.5*(n[k][1]+d[1]);d=p([a[k][t-1],n[k][t-1]],[a[k][t-3],n[k][t-3]],[a[k][t-4],n[k][t-4]]);a[k][t-2]=.5*(a[k][t-2]+d[0]);n[k][t-2]=.5*(n[k][t-2]+d[1])}return[a,n]}},{"../../lib":700,"./catmull_rom":888}],891:[function(a,t,m){t.exports={RELATIVE_CULL_TOLERANCE:1E-6}},
{}],892:[function(a,t,m){t.exports=function(a,g,h){return g&&h?function(e,g,b,h,m){e||(e=[]);var l;g*=3;b*=3;var d=h*h;var f=1-h,c=f*f;f=f*h*2;h=-3*c;c=3*(c-f);f=3*(f-d);var k=3*d,n=m*m,p=n*m,u=1-m,t=u*u,y=t*u;for(l=0;l<a.length;l++){var w=a[l];d=h*w[b][g]+c*w[b][g+1]+f*w[b][g+2]+k*w[b][g+3];var x=h*w[b+1][g]+c*w[b+1][g+1]+f*w[b+1][g+2]+k*w[b+1][g+3];var F=h*w[b+2][g]+c*w[b+2][g+1]+f*w[b+2][g+2]+k*w[b+2][g+3];w=h*w[b+3][g]+c*w[b+3][g+1]+f*w[b+3][g+2]+k*w[b+3][g+3];e[l]=y*d+3*(t*m*x+u*n*F)+p*w}return e}:
g?function(e,g,b,h,m){e||(e=[]);var l;g*=3;var d=h*h;var f=1-h,c=f*f;f=f*h*2;h=-3*c;c=3*(c-f);f=3*(f-d);var k=3*d,n=1-m;for(l=0;l<a.length;l++){var p=a[l];d=h*p[b][g]+c*p[b][g+1]+f*p[b][g+2]+k*p[b][g+3];p=h*p[b+1][g]+c*p[b+1][g+1]+f*p[b+1][g+2]+k*p[b+1][g+3];e[l]=n*d+m*p}return e}:h?function(e,g,b,h,m){e||(e=[]);var l;b*=3;var d=m*m,f=d*m,c=1-m,k=c*c,n=k*c;for(l=0;l<a.length;l++){var p=a[l];h=p[b][g+1]-p[b][g];var u=p[b+1][g+1]-p[b+1][g];var t=p[b+2][g+1]-p[b+2][g];p=p[b+3][g+1]-p[b+3][g];e[l]=n*
h+3*(k*m*u+c*d*t)+f*p}return e}:function(e,g,b,h,m){e||(e=[]);var l,d=1-m;for(l=0;l<a.length;l++){var f=a[l];h=f[b][g+1]-f[b][g];f=f[b+1][g+1]-f[b+1][g];e[l]=d*h+m*f}return e}}},{}],893:[function(a,t,m){t.exports=function(a,g,h){return g&&h?function(e,g,b,h,m){e||(e=[]);var l;g*=3;b*=3;var d=h*h,f=d*h,c=1-h,k=c*c,n=k*c;var p=m*m;var u=1-m,t=u*u;u=u*m*2;m=-3*t;t=3*(t-u);u=3*(u-p);var y=3*p;for(l=0;l<a.length;l++){var w=a[l];p=m*w[b][g]+t*w[b+1][g]+u*w[b+2][g]+y*w[b+3][g];var x=m*w[b][g+1]+t*w[b+1][g+
1]+u*w[b+2][g+1]+y*w[b+3][g+1];var F=m*w[b][g+2]+t*w[b+1][g+2]+u*w[b+2][g+2]+y*w[b+3][g+2];w=m*w[b][g+3]+t*w[b+1][g+3]+u*w[b+2][g+3]+y*w[b+3][g+3];e[l]=n*p+3*(k*h*x+c*d*F)+f*w}return e}:g?function(e,g,b,h,m){e||(e=[]);var l;g*=3;var d=m*m,f=d*m,c=1-m,k=c*c,n=k*c;for(l=0;l<a.length;l++){var p=a[l];h=p[b+1][g]-p[b][g];var u=p[b+1][g+1]-p[b][g+1];var t=p[b+1][g+2]-p[b][g+2];p=p[b+1][g+3]-p[b][g+3];e[l]=n*h+3*(k*m*u+c*d*t)+f*p}return e}:h?function(e,g,b,h,m){e||(e=[]);var l;b*=3;var d=1-h;var f=m*m;var c=
1-m,k=c*c;c=c*m*2;m=-3*k;k=3*(k-c);c=3*(c-f);var n=3*f;for(l=0;l<a.length;l++){var p=a[l];f=m*p[b][g]+k*p[b+1][g]+c*p[b+2][g]+n*p[b+3][g];p=m*p[b][g+1]+k*p[b+1][g+1]+c*p[b+2][g+1]+n*p[b+3][g+1];e[l]=d*f+h*p}return e}:function(e,g,b,h,m){e||(e=[]);var l,d=1-h;for(l=0;l<a.length;l++){var f=a[l];m=f[b+1][g]-f[b][g];f=f[b+1][g+1]-f[b][g+1];e[l]=d*m+h*f}return e}}},{}],894:[function(a,t,m){t.exports=function(a,g,h,e,n){var b=g-2,l=h-2;return e&&n?function(e,g,d){e||(e=[]);var f,c=Math.max(0,Math.min(Math.floor(g),
b)),h=Math.max(0,Math.min(Math.floor(d),l));g=Math.max(0,Math.min(1,g-c));var n=Math.max(0,Math.min(1,d-h));c*=3;h*=3;var q=g*g,m=q*g,p=1-g,u=p*p,t=u*p,x=n*n,F=x*n,B=1-n,C=B*B,D=C*B;for(f=0;f<a.length;f++){var G=a[f];d=t*G[h][c]+3*(u*g*G[h][c+1]+p*q*G[h][c+2])+m*G[h][c+3];var H=t*G[h+1][c]+3*(u*g*G[h+1][c+1]+p*q*G[h+1][c+2])+m*G[h+1][c+3];var E=t*G[h+2][c]+3*(u*g*G[h+2][c+1]+p*q*G[h+2][c+2])+m*G[h+2][c+3];G=t*G[h+3][c]+3*(u*g*G[h+3][c+1]+p*q*G[h+3][c+2])+m*G[h+3][c+3];e[f]=D*d+3*(C*n*H+B*x*E)+F*G}return e}:
e?function(e,g,d){e||(e=[]);var f=Math.max(0,Math.min(Math.floor(g),b)),c=Math.max(0,Math.min(Math.floor(d),l));g=Math.max(0,Math.min(1,g-f));d=Math.max(0,Math.min(1,d-c));var h;f*=3;var n=g*g,m=n*g,q=1-g,p=q*q,u=p*q,t=1-d;for(h=0;h<a.length;h++){var x=a[h];var F=t*x[c][f]+d*x[c+1][f];var B=t*x[c][f+1]+d*x[c+1][f+1];var C=t*x[c][f+2]+d*x[c+1][f+1];x=t*x[c][f+3]+d*x[c+1][f+1];e[h]=u*F+3*(p*g*B+q*n*C)+m*x}return e}:n?function(e,g,d){e||(e=[]);var f=Math.max(0,Math.min(Math.floor(g),b)),c=Math.max(0,
Math.min(Math.floor(d),l));g=Math.max(0,Math.min(1,g-f));d=Math.max(0,Math.min(1,d-c));var h;c*=3;var n=d*d,m=n*d,q=1-d,p=q*q,u=p*q,t=1-g;for(h=0;h<a.length;h++){var x=a[h];var F=t*x[c][f]+g*x[c][f+1];var B=t*x[c+1][f]+g*x[c+1][f+1];var C=t*x[c+2][f]+g*x[c+2][f+1];x=t*x[c+3][f]+g*x[c+3][f+1];e[h]=u*F+3*(p*d*B+q*n*C)+m*x}return e}:function(e,g,d){e||(e=[]);var f=Math.max(0,Math.min(Math.floor(g),b)),c=Math.max(0,Math.min(Math.floor(d),l));g=Math.max(0,Math.min(1,g-f));d=Math.max(0,Math.min(1,d-c));
var h,n=1-d,m=1-g;for(h=0;h<a.length;h++){var q=a[h];var p=m*q[c][f]+g*q[c][f+1];q=m*q[c+1][f]+g*q[c+1][f+1];e[h]=n*p+d*q}return e}}},{}],895:[function(a,t,m){var p=a("../../lib"),g=a("./xy_defaults"),h=a("./ab_defaults"),e=a("./attributes"),n=a("../../components/color/attributes");t.exports=function(a,l,m,q){function b(b,c){return p.coerce(a,l,e,b,c)}l._clipPathId="clip"+l.uid+"carpet";m=b("color",n.defaultLine);p.coerceFont(b,"font");b("carpet");h(a,l,q,b,m);l.a&&l.b?(3>l.a.length&&(l.aaxis.smoothing=
0),3>l.b.length&&(l.baxis.smoothing=0),g(a,l,b)||(l.visible=!1),l._cheater&&b("cheaterslope")):l.visible=!1}},{"../../components/color/attributes":576,"../../lib":700,"./ab_defaults":878,"./attributes":880,"./xy_defaults":904}],896:[function(a,t,m){m={};m.attributes=a("./attributes");m.supplyDefaults=a("./defaults");m.plot=a("./plot");m.calc=a("./calc");m.animatable=!0;m.isContainer=!0;m.moduleType="trace";m.name="carpet";m.basePlotModule=a("../../plots/cartesian");m.categories="cartesian svg carpet carpetAxis notLegendIsolatable noMultiCategory".split(" ");
m.meta={};t.exports=m},{"../../plots/cartesian":759,"./attributes":880,"./calc":884,"./defaults":895,"./plot":901}],897:[function(a,t,m){t.exports=function(a,g){for(var h=a._fullData.length,e,n=0;n<h;n++){var b=a._fullData[n];if(b.index!==g.index&&"carpet"===b.type&&(e||(e=b),b.carpet===g.carpet))return b}return e}},{}],898:[function(a,t,m){t.exports=function(a,g,h){if(0===a.length)return"";var e,n=[],b=h?3:1;for(e=0;e<a.length;e+=b)n.push(a[e]+","+g[e]),h&&e<a.length-b&&(n.push("C"),n.push([a[e+
1]+","+g[e+1],a[e+2]+","+g[e+2]+" "].join(" ")));return n.join(h?"":"L")}},{}],899:[function(a,t,m){var p=a("../../lib").isArrayOrTypedArray;t.exports=function(a,h,e){var g;p(a)?a.length>h.length&&(a=a.slice(0,h.length)):a=[];for(g=0;g<h.length;g++)a[g]=e(h[g]);return a}},{"../../lib":700}],900:[function(a,t,m){t.exports=function(a,g,h,e,n,b){var l=n[0]*a.dpdx(g),m=n[1]*a.dpdy(h),q=1,d=1;b&&(d=Math.max(0,(n[0]*b[0]+n[1]*b[1])/Math.sqrt(n[0]*n[0]+n[1]*n[1])/Math.sqrt(b[0]*b[0]+b[1]*b[1])));n=180*Math.atan2(m,
l)/Math.PI;-90>n?(n+=180,q=-q):90<n&&(n-=180,q=-q);return{angle:n,flip:q,p:a.c2p(e,g,h),offsetMultplier:d}}},{}],901:[function(a,t,m){function p(a,c,d,f,g,h){f="const-"+g+"-lines";d=d.selectAll("."+f).data(h);d.enter().append("path").classed(f,!0).style("vector-effect","non-scaling-stroke");d.each(function(d){var f=d.y,g=b([],d.x,a.c2p);f=b([],f,c.c2p);g="M"+l(g,f,d.smoothing);e.select(this).attr("d",g).style("stroke-width",d.width).style("stroke",d.color).style("fill","none")});d.exit().remove()}
function g(a,b,c,d,f,g,h,l){f=g.selectAll("text."+l).data(h);f.enter().append("text").classed(l,!0);var k=0,r={};f.each(function(f,g){if("auto"===f.axis.tickangle)var h=u(d,b,c,f.xy,f.dxy);else h=(f.axis.tickangle+180)*Math.PI/180,h=u(d,b,c,f.xy,[Math.cos(h),Math.sin(h)]);g||(r={angle:h.angle,flip:h.flip});g=(f.endAnchor?-1:1)*h.flip;var l=e.select(this).attr({"text-anchor":0<g?"start":"end","data-notex":1}).call(n.font,f.font).text(f.text).call(q.convertToTspans,a),m=n.bBox(this);l.attr("transform",
"translate("+h.p[0]+","+h.p[1]+") rotate("+h.angle+")translate("+f.axis.labelpadding*g+","+.3*m.height+")");k=Math.max(k,m.width+f.axis.labelpadding)});f.exit().remove();r.maxExtent=k;return r}function h(a,b,d,g,h,l,m,p,t,B,C){g=[];m.title.text&&g.push(m.title.text);b=b.selectAll("text."+C).data(g);var k=B.maxExtent;b.enter().append("text").classed(C,!0);b.each(function(){var b=u(d,p,t,h,l);-1===["start","both"].indexOf(m.showticklabels)&&(k=0);var g=m.title.font.size;k+=g+m.title.offset;var r=(B.angle+
(0>B.flip?180:0)-b.angle+450)%360;r=90<r&&270>r;var v=e.select(this);v.text(m.title.text).call(q.convertToTspans,a);r&&(k=(-q.lineCount(v)+c)*f*g-k);v.attr("transform","translate("+b.p[0]+","+b.p[1]+") rotate("+b.angle+") translate(0,"+k+")").classed("user-select-none",!0).attr("text-anchor","middle").call(n.font,m.title.font)});b.exit().remove()}var e=a("d3"),n=a("../../components/drawing"),b=a("./map_1d_array"),l=a("./makepath"),u=a("./orient_text"),q=a("../../lib/svg_text_utils"),d=a("../../lib");
a=a("../../constants/alignment");t.exports=function(a,c,f,n){var k=c.xaxis,r=c.yaxis,m=a._fullLayout._clips;d.makeTraceGroups(n,f,"trace").each(function(c){var f=e.select(this),n=c[0];c=n.trace;var q=c.aaxis,t=c.baxis,v=d.ensureSingle(f,"g","minorlayer"),w=d.ensureSingle(f,"g","majorlayer"),z=d.ensureSingle(f,"g","boundarylayer"),x=d.ensureSingle(f,"g","labellayer");f.style("opacity",c.opacity);p(k,r,w,q,"a",q._gridlines,!0);p(k,r,w,t,"b",t._gridlines,!0);p(k,r,v,q,"a",q._minorgridlines,!0);p(k,r,
v,t,"b",t._minorgridlines,!0);p(k,r,z,q,"a-boundary",q._boundarylines);p(k,r,z,t,"b-boundary",t._boundarylines);f=g(a,k,r,c,n,x,q._labels,"a-label");t=g(a,k,r,c,n,x,t._labels,"b-label");q=.5*(c.a[0]+c.a[c.a.length-1]);v=c.b[0];w=c.ab2xy(q,v,!0);z=c.dxyda_rough(q,v);void 0===f.angle&&d.extendFlat(f,u(c,k,r,w,c.dxydb_rough(q,v)));h(a,x,c,n,w,z,c.aaxis,k,r,f,"a-title");q=c.a[0];v=.5*(c.b[0]+c.b[c.b.length-1]);w=c.ab2xy(q,v,!0);z=c.dxydb_rough(q,v);void 0===t.angle&&d.extendFlat(t,u(c,k,r,w,c.dxyda_rough(q,
v)));h(a,x,c,n,w,z,c.baxis,k,r,t,"b-title");x=m.select("#"+c._clipPathId);x.size()||(x=m.append("clipPath").classed("carpetclip",!0));f=d.ensureSingle(x,"path","carpetboundary");w=n.clipsegments;z=[];for(v=0;v<w.length;v++)n=w[v],t=b([],n.x,k.c2p),q=b([],n.y,r.c2p),z.push(l(t,q,n.bicubic));n="M"+z.join("L")+"Z";x.attr("id",c._clipPathId);f.attr("d",n)})};var f=a.LINE_SPACING,c=(1-a.MID_SHIFT)/f+1},{"../../components/drawing":598,"../../constants/alignment":672,"../../lib":700,"../../lib/svg_text_utils":724,
"./makepath":898,"./map_1d_array":899,"./orient_text":900,d3:154}],902:[function(a,t,m){var p=a("./constants"),g=a("../../lib/search").findBin,h=a("./compute_control_points"),e=a("./create_spline_evaluator"),n=a("./create_i_derivative_evaluator"),b=a("./create_j_derivative_evaluator");t.exports=function(a){var l=a._a,m=a._b,d=l.length,f=m.length,c=a.aaxis,k=a.baxis,r=l[0],t=l[d-1],z=m[0],A=m[f-1],y=l[l.length-1]-l[0],w=m[m.length-1]-m[0],x=y*p.RELATIVE_CULL_TOLERANCE,F=w*p.RELATIVE_CULL_TOLERANCE;
r-=x;t+=x;z-=F;A+=F;a.isVisible=function(a,b){return a>r&&a<t&&b>z&&b<A};a.isOccluded=function(a,b){return a<r||a>t||b<z||b>A};a.setScale=function(){var g=h(a._xctrl,a._yctrl,a._x,a._y,c.smoothing,k.smoothing);a._xctrl=g[0];a._yctrl=g[1];a.evalxy=e([a._xctrl,a._yctrl],d,f,c.smoothing,k.smoothing);a.dxydi=n([a._xctrl,a._yctrl],c.smoothing,k.smoothing);a.dxydj=b([a._xctrl,a._yctrl],c.smoothing,k.smoothing)};a.i2a=function(a){var b=Math.max(0,Math.floor(a[0]),d-2);a=a[0]-b;return(1-a)*l[b]+a*l[b+1]};
a.j2b=function(a){var b=Math.max(0,Math.floor(a[1]),d-2);a=a[1]-b;return(1-a)*m[b]+a*m[b+1]};a.ij2ab=function(b){return[a.i2a(b[0]),a.j2b(b[1])]};a.a2i=function(a){var b=Math.max(0,Math.min(g(a,l),d-2)),c=l[b];return Math.max(0,Math.min(d-1,b+(a-c)/(l[b+1]-c)))};a.b2j=function(a){var b=Math.max(0,Math.min(g(a,m),f-2)),c=m[b];return Math.max(0,Math.min(f-1,b+(a-c)/(m[b+1]-c)))};a.ab2ij=function(b){return[a.a2i(b[0]),a.b2j(b[1])]};a.i2c=function(b,c){return a.evalxy([],b,c)};a.ab2xy=function(b,c,e){if(!e&&
(b<l[0]||b>l[d-1]|c<m[0]||c>m[f-1]))return[!1,!1];var g=a.a2i(b),h=a.b2j(c),k=a.evalxy([],g,h);if(e){var n=e=0,r=[],q;b<l[0]?(g=q=0,e=(b-l[0])/(l[1]-l[0])):b>l[d-1]?(q=d-2,g=1,e=(b-l[d-1])/(l[d-1]-l[d-2])):(q=Math.max(0,Math.min(d-2,Math.floor(g))),g-=q);c<m[0]?(h=b=0,n=(c-m[0])/(m[1]-m[0])):c>m[f-1]?(b=f-2,h=1,n=(c-m[f-1])/(m[f-1]-m[f-2])):(b=Math.max(0,Math.min(f-2,Math.floor(h))),h-=b);e&&(a.dxydi(r,q,b,g,h),k[0]+=r[0]*e,k[1]+=r[1]*e);n&&(a.dxydj(r,q,b,g,h),k[0]+=r[0]*n,k[1]+=r[1]*n)}return k};
a.c2p=function(a,b,c){return[b.c2p(a[0]),c.c2p(a[1])]};a.p2x=function(a,b,c){return[b.p2c(a[0]),c.p2c(a[1])]};a.dadi=function(a){a=Math.max(0,Math.min(l.length-2,a));return l[a+1]-l[a]};a.dbdj=function(a){a=Math.max(0,Math.min(m.length-2,a));return m[a+1]-m[a]};a.dxyda=function(b,c,d,e){c=a.dxydi(null,b,c,d,e);b=a.dadi(b,d);return[c[0]/b,c[1]/b]};a.dxydb=function(b,c,d,e){b=a.dxydj(null,b,c,d,e);c=a.dbdj(c,e);return[b[0]/c,b[1]/c]};a.dxyda_rough=function(b,c,d){d=y*(d||.1);var e=a.ab2xy(b+d,c,!0);
b=a.ab2xy(b-d,c,!0);return[.5*(e[0]-b[0])/d,.5*(e[1]-b[1])/d]};a.dxydb_rough=function(b,c,d){d=w*(d||.1);var e=a.ab2xy(b,c+d,!0);b=a.ab2xy(b,c-d,!0);return[.5*(e[0]-b[0])/d,.5*(e[1]-b[1])/d]};a.dpdx=function(a){return a._m};a.dpdy=function(a){return a._m}}},{"../../lib/search":719,"./compute_control_points":890,"./constants":891,"./create_i_derivative_evaluator":892,"./create_j_derivative_evaluator":893,"./create_spline_evaluator":894}],903:[function(a,t,m){var p=a("../../lib");t.exports=function(a,
h,e){var g,b,l=[],m=[],q=a[0].length,d=a.length,f=0;for(g=0;g<q;g++)for(b=0;b<d;b++){if(void 0===a[b][g]){l.push(g);m.push(b);var c=a[b];var k=g,r=void 0,t=0,z=0;0<g&&void 0!==(r=a[b][g-1])&&(z++,t+=r);g<q-1&&void 0!==(r=a[b][g+1])&&(z++,t+=r);0<b&&void 0!==(r=a[b-1][g])&&(z++,t+=r);b<d-1&&void 0!==(r=a[b+1][g])&&(z++,t+=r);c[k]=t/Math.max(1,z)}f=Math.max(f,Math.abs(a[b][g]))}if(!l.length)return a;r=0;t=l.length;do{for(c=k=0;c<t;c++){g=l[c];b=m[c];var A=z=0;if(0===g){var y=Math.min(q-1,2);var w=h[y];
var x=h[1];y=a[b][y];var F=a[b][1];A+=F+(F-y)*(h[0]-x)/(x-w);z++}else g===q-1&&(y=Math.max(0,q-3),w=h[y],x=h[q-2],y=a[b][y],F=a[b][q-2],A+=F+(F-y)*(h[q-1]-x)/(x-w),z++);(0===g||g===q-1)&&0<b&&b<d-1&&(w=e[b+1]-e[b],x=e[b]-e[b-1],A+=(x*a[b+1][g]+w*a[b-1][g])/(x+w),z++);0===b?(y=Math.min(d-1,2),w=e[y],x=e[1],y=a[y][g],F=a[1][g],A+=F+(F-y)*(e[0]-x)/(x-w),z++):b===d-1&&(y=Math.max(0,d-3),w=e[y],x=e[d-2],y=a[y][g],F=a[d-2][g],A+=F+(F-y)*(e[d-1]-x)/(x-w),z++);(0===b||b===d-1)&&0<g&&g<q-1&&(w=h[g+1]-h[g],
x=h[g]-h[g-1],A+=(x*a[b][g+1]+w*a[b][g-1])/(x+w),z++);if(z)A/=z;else{A=h[g+1]-h[g];w=h[g]-h[g-1];x=e[b+1]-e[b];y=e[b]-e[b-1];F=A*w*(A+w);var B=x*y*(x+y);A=(F*(y*a[b+1][g]+x*a[b-1][g])+B*(w*a[b][g+1]+A*a[b][g-1]))/(B*(w+A)+F*(y+x))}A-=a[b][g];w=A/f;k+=w*w;z=z?0:.85;a[b][g]+=A*(1+z)}k=Math.sqrt(k)}while(100>r++&&1E-5<k);p.log("Smoother converged to",k,"after",r,"iterations");return a}},{"../../lib":700}],904:[function(a,t,m){var p=a("../../lib").isArray1D;t.exports=function(a,h,e){var g=(a=e("x"))&&
a.length,b=(e=e("y"))&&e.length;if(!g&&!b)return!1;h._cheater=!a;g&&!p(a)||b&&!p(e)?h._length=null:(a=g?a.length:Infinity,b&&(a=Math.min(a,e.length)),h.a&&h.a.length&&(a=Math.min(a,h.a.length)),h.b&&h.b.length&&(a=Math.min(a,h.b.length)),h._length=a);return!0}},{"../../lib":700}],905:[function(a,t,m){m=a("../../components/fx/hovertemplate_attributes");var p=a("../scattergeo/attributes"),g=a("../../components/colorscale/attributes"),h=a("../../components/colorbar/attributes"),e=a("../../plots/attributes");
a=a("../../lib/extend").extendFlat;var n=p.marker.line;t.exports=a({locations:{valType:"data_array",editType:"calc"},locationmode:p.locationmode,z:{valType:"data_array",editType:"calc"},text:a({},p.text,{}),hovertext:a({},p.hovertext,{}),marker:{line:{color:n.color,width:a({},n.width,{dflt:1}),editType:"calc"},opacity:{valType:"number",arrayOk:!0,min:0,max:1,dflt:1,editType:"style"},editType:"calc"},selected:{marker:{opacity:p.selected.marker.opacity,editType:"plot"},editType:"plot"},unselected:{marker:{opacity:p.unselected.marker.opacity,
editType:"plot"},editType:"plot"},hoverinfo:a({},e.hoverinfo,{editType:"calc",flags:["location","z","text","name"]}),hovertemplate:m()},g("",{cLetter:"z",editTypeOverride:"calc"}),{colorbar:h})},{"../../components/colorbar/attributes":578,"../../components/colorscale/attributes":584,"../../components/fx/hovertemplate_attributes":615,"../../lib/extend":690,"../../plots/attributes":745,"../scattergeo/attributes":1091}],906:[function(a,t,m){var p=a("fast-isnumeric"),g=a("../../constants/numerical").BADNUM,
h=a("../../components/colorscale/calc"),e=a("../scatter/arrays_to_calcdata"),n=a("../scatter/calc_selection");t.exports=function(a,l){for(var b=l._length,m=Array(b),d=0;d<b;d++){var f=m[d]={},c=l.locations[d],k=l.z[d];f.loc="string"===typeof c?c:null;f.z=p(k)?k:g}e(m,l);h(a,l,{vals:l.z,containerStr:"",cLetter:"z"});n(m,l);return m}},{"../../components/colorscale/calc":585,"../../constants/numerical":677,"../scatter/arrays_to_calcdata":1050,"../scatter/calc_selection":1053,"fast-isnumeric":221}],907:[function(a,
t,m){var p=a("../../lib"),g=a("../../components/colorscale/defaults"),h=a("./attributes");t.exports=function(a,n,b,l){function e(b,e){return p.coerce(a,n,h,b,e)}b=e("locations");var m=e("z");b&&b.length&&p.isArrayOrTypedArray(m)&&m.length?(n._length=Math.min(b.length,m.length),e("locationmode"),e("text"),e("hovertext"),e("hovertemplate"),e("marker.line.color"),e("marker.line.width"),e("marker.opacity"),g(a,n,l,e,{prefix:"",cLetter:"z"}),p.coerceSelectionMarkerOpacity(n,e)):n.visible=!1}},{"../../components/colorscale/defaults":587,
"../../lib":700,"./attributes":905}],908:[function(a,t,m){t.exports=function(a,g){a.location=g.location;a.z=g.z;return a}},{}],909:[function(a,t,m){var p=a("../../plots/cartesian/axes"),g=a("./attributes"),h=a("../scatter/fill_hover_text");t.exports=function(a,n,b){var e=a.cd,m=e[0].trace,q=a.subplot,d,f;for(d=0;d<e.length;d++){var c=e[d];var k=!1;if(c._polygons){for(f=0;f<c._polygons.length;f++)c._polygons[f].contains([n,b])&&(k=!k),c._polygons[f].contains([n+360,b])&&(k=!k);if(k)break}}if(k&&c)return a.x0=
a.x1=a.xa.c2p(c.ct),a.y0=a.y1=a.ya.c2p(c.ct),a.index=c.index,a.location=c.loc,a.z=c.z,a.hovertemplate=c.hovertemplate,n=c,q=q.mockAxis,m.hovertemplate||(b=n.hi||m.hoverinfo,d="all"===b?g.hoverinfo.flags:b.split("+"),b=-1!==d.indexOf("name"),e=-1!==d.indexOf("location"),c=-1!==d.indexOf("z"),d=-1!==d.indexOf("text"),f=[],!b&&e?a.nameOverride=n.loc:(b&&(a.nameOverride=m.name),e&&f.push(n.loc)),c&&f.push(p.tickText(q,q.c2l(n.z),"hover").text),d&&h(n,m,f),a.extraText=f.join("\x3cbr\x3e")),[a]}},{"../../plots/cartesian/axes":748,
"../scatter/fill_hover_text":1059,"./attributes":905}],910:[function(a,t,m){m={};m.attributes=a("./attributes");m.supplyDefaults=a("./defaults");m.colorbar=a("../heatmap/colorbar");m.calc=a("./calc");m.plot=a("./plot");m.style=a("./style").style;m.styleOnSelect=a("./style").styleOnSelect;m.hoverPoints=a("./hover");m.eventData=a("./event_data");m.selectPoints=a("./select");m.moduleType="trace";m.name="choropleth";m.basePlotModule=a("../../plots/geo");m.categories=["geo","noOpacity"];m.meta={};t.exports=
m},{"../../plots/geo":778,"../heatmap/colorbar":951,"./attributes":905,"./calc":906,"./defaults":907,"./event_data":908,"./hover":909,"./plot":911,"./select":912,"./style":913}],911:[function(a,t,m){function p(a,d){var e=a[0].trace,c=a.length;d=b(e,d);for(var h=0;h<c;h++){var n=a[h],m=l(e.locationmode,n.loc,d);m?(n.geojson=m,n.ct=m.properties.ct,n.index=h,n._polygons=g(m)):n.geojson=null}}function g(a){function b(a){for(var b=0;b<a.length-1;b++)if(0<a[b][0]&&0>a[b+1][0])return b;return null}var e=
a.geometry,c=e.coordinates;a=a.id;var g=[],h,l;a="RUS"===a||"FJI"===a?function(a){if(null===b(a))var c=a;else for(c=Array(a.length),l=0;l<a.length;l++)c[l]=[0>a[l][0]?a[l][0]+360:a[l][0],a[l][1]];g.push(n.tester(c))}:"ATA"===a?function(a){var c=b(a);if(null===c)return g.push(n.tester(a));var d=Array(a.length+1),e=0;for(l=0;l<a.length;l++)l>c?d[e++]=[a[l][0]+360,a[l][1]]:l===c?(d[e++]=a[l],d[e++]=[a[l][0],-90]):d[e++]=a[l];a=n.tester(d);a.pts.pop();g.push(a)}:function(a){g.push(n.tester(a))};switch(e.type){case "MultiPolygon":for(e=
0;e<c.length;e++)for(h=0;h<c[e].length;h++)a(c[e][h]);break;case "Polygon":for(e=0;e<c.length;e++)a(c[e])}return g}var h=a("d3"),e=a("../../lib"),n=a("../../lib/polygon"),b=a("../../lib/topojson_utils").getTopojsonFeatures,l=a("../../lib/geo_location_utils").locationToFeature,u=a("./style").style;t.exports=function(a,b,f){for(var c=0;c<f.length;c++)p(f[c],b.topojson);b=b.layers.backplot.select(".choroplethlayer");e.makeTraceGroups(b,f,"trace choropleth").each(function(b){var c=(b[0].node3=h.select(this)).selectAll("path.choroplethlocation").data(e.identity);
c.enter().append("path").classed("choroplethlocation",!0);c.exit().remove();u(a,b)})}},{"../../lib":700,"../../lib/geo_location_utils":693,"../../lib/polygon":712,"../../lib/topojson_utils":727,"./style":913,d3:154}],912:[function(a,t,m){t.exports=function(a,g){var h=a.cd,e=a.xaxis,n=a.yaxis,b=[],l,m;if(!1===g)for(l=0;l<h.length;l++)h[l].selected=0;else for(l=0;l<h.length;l++){var q=h[l];if(m=q.ct){var d=e.c2p(m);var f=n.c2p(m);g.contains([d,f],null,l,a)?(b.push({pointNumber:l,lon:m[0],lat:m[1]}),
q.selected=1):q.selected=0}}return b}},{}],913:[function(a,t,m){function p(a,l){var b=l[0].trace;l=l[0].node3.selectAll(".choroplethlocation");var m=b.marker||{},d=m.line||{},f=n.makeColorScaleFunc(n.extractScale(b,{cLetter:"z"}));l.each(function(a){g.select(this).attr("fill",f(a.z)).call(h.stroke,a.mlc||d.color).call(e.dashLine,"",a.mlw||d.width||0).style("opacity",m.opacity)});e.selectedPointStyle(l,b,a)}var g=a("d3"),h=a("../../components/color"),e=a("../../components/drawing"),n=a("../../components/colorscale");
t.exports={style:function(a,e){e&&p(a,e)},styleOnSelect:function(a,g){var b=g[0].node3,h=g[0].trace;h.selectedpoints?e.selectedPointStyle(b.selectAll(".choroplethlocation"),h,a):p(a,g)}}},{"../../components/color":577,"../../components/colorscale":589,"../../components/drawing":598,d3:154}],914:[function(a,t,m){m=a("../../components/colorscale/attributes");var p=a("../../components/colorbar/attributes"),g=a("../../components/fx/hovertemplate_attributes"),h=a("../mesh3d/attributes"),e=a("../../plots/attributes");
a=a("../../lib/extend").extendFlat;var n={x:{valType:"data_array",editType:"calc+clearAxisTypes"},y:{valType:"data_array",editType:"calc+clearAxisTypes"},z:{valType:"data_array",editType:"calc+clearAxisTypes"},u:{valType:"data_array",editType:"calc"},v:{valType:"data_array",editType:"calc"},w:{valType:"data_array",editType:"calc"},sizemode:{valType:"enumerated",values:["scaled","absolute"],editType:"calc",dflt:"scaled"},sizeref:{valType:"number",editType:"calc",min:0},anchor:{valType:"enumerated",
editType:"calc",values:["tip","tail","cm","center"],dflt:"cm"},text:{valType:"string",dflt:"",arrayOk:!0,editType:"calc"},hovertext:{valType:"string",dflt:"",arrayOk:!0,editType:"calc"},hovertemplate:g({editType:"calc"},{keys:["norm"]})};a(n,m("",{colorAttr:"u/v/w norm",showScaleDflt:!0,editTypeOverride:"calc"}),{colorbar:p});["opacity","lightposition","lighting"].forEach(function(a){n[a]=h[a]});n.hoverinfo=a({},e.hoverinfo,{editType:"calc",flags:"x y z u v w norm text name".split(" "),dflt:"x+y+z+norm+text+name"});
n.transforms=void 0;t.exports=n},{"../../components/colorbar/attributes":578,"../../components/colorscale/attributes":584,"../../components/fx/hovertemplate_attributes":615,"../../lib/extend":690,"../../plots/attributes":745,"../mesh3d/attributes":994}],915:[function(a,t,m){var p=a("../../components/colorscale/calc");t.exports=function(a,h){for(var e=h.u,g=h.v,b=h.w,l=Math.min(h.x.length,h.y.length,h.z.length,e.length,g.length,b.length),m=-Infinity,q=Infinity,d=0;d<l;d++){var f=e[d],c=g[d],k=b[d];
f=Math.sqrt(f*f+c*c+k*k);m=Math.max(m,f);q=Math.min(q,f)}h._len=l;h._normMax=m;p(a,h,{vals:[q,m],containerStr:"",cLetter:"c"})}},{"../../components/colorscale/calc":585}],916:[function(a,t,m){function p(a,b){this.scene=a;this.uid=b;this.data=this.mesh=null}function g(a,c){function e(a,b){var c=f[b],d=g[u[b]];return n(a,function(a){return c.d2l(a)*d})}var f=a.fullSceneLayout,g=a.dataScale;a={};a.vectors=l(e(c.u,"xaxis"),e(c.v,"yaxis"),e(c.w,"zaxis"),c._len);a.positions=l(e(c.x,"xaxis"),e(c.y,"yaxis"),
e(c.z,"zaxis"),c._len);a.colormap=b(c);a.vertexIntensityBounds=[c.cmin/c._normMax,c.cmax/c._normMax];a.coneOffset=q[c.anchor];a.coneSize="scaled"===c.sizemode?c.sizeref||.5:c.sizeref&&c._normMax?c.sizeref/c._normMax:.5;a=h(a);var m=c.lightposition;a.lightPosition=[m.x,m.y,m.z];a.ambient=c.lighting.ambient;a.diffuse=c.lighting.diffuse;a.specular=c.lighting.specular;a.roughness=c.lighting.roughness;a.fresnel=c.lighting.fresnel;a.opacity=c.opacity;c._pad=d[c.anchor]*a.vectorScale*a.coneScale*c._normMax;
return a}var h=a("gl-cone3d"),e=a("gl-cone3d").createConeMesh,n=a("../../lib").simpleMap,b=a("../../lib/gl_format_color").parseColorScale,l=a("../../plots/gl3d/zip3");a=p.prototype;a.handlePick=function(a){if(a.object===this.mesh){var b=a.index=a.data.index,d=this.data.u[b],e=this.data.v[b],f=this.data.w[b];a.traceCoordinate=[this.data.x[b],this.data.y[b],this.data.z[b],d,e,f,Math.sqrt(d*d+e*e+f*f)];d=this.data.hovertext||this.data.text;Array.isArray(d)&&void 0!==d[b]?a.textLabel=d[b]:d&&(a.textLabel=
d);return!0}};var u={xaxis:0,yaxis:1,zaxis:2},q={tip:1,tail:0,cm:.25,center:.5},d={tip:1,tail:1,cm:.75,center:.5};a.update=function(a){this.data=a;a=g(this.scene,a);this.mesh.update(a)};a.dispose=function(){this.scene.glplot.remove(this.mesh);this.mesh.dispose()};t.exports=function(a,b){var c=a.glplot.gl,d=g(a,b);c=e(c,d);d=new p(a,b.uid);d.mesh=c;d.data=b;c._trace=d;a.glplot.add(c);return d}},{"../../lib":700,"../../lib/gl_format_color":697,"../../plots/gl3d/zip3":800,"gl-cone3d":238}],917:[function(a,
t,m){var p=a("../../lib"),g=a("../../components/colorscale/defaults"),h=a("./attributes");t.exports=function(a,n,b,l){function e(b,c){return p.coerce(a,n,h,b,c)}b=e("u");var m=e("v"),d=e("w"),f=e("x"),c=e("y"),k=e("z");b&&b.length&&m&&m.length&&d&&d.length&&f&&f.length&&c&&c.length&&k&&k.length?(e("sizeref"),e("sizemode"),e("anchor"),e("lighting.ambient"),e("lighting.diffuse"),e("lighting.specular"),e("lighting.roughness"),e("lighting.fresnel"),e("lightposition.x"),e("lightposition.y"),e("lightposition.z"),
g(a,n,l,e,{prefix:"",cLetter:"c"}),e("text"),e("hovertext"),e("hovertemplate"),n._length=null):n.visible=!1}},{"../../components/colorscale/defaults":587,"../../lib":700,"./attributes":914}],918:[function(a,t,m){t.exports={moduleType:"trace",name:"cone",basePlotModule:a("../../plots/gl3d"),categories:["gl3d"],attributes:a("./attributes"),supplyDefaults:a("./defaults"),colorbar:{min:"cmin",max:"cmax"},calc:a("./calc"),plot:a("./convert"),eventData:function(a,g){a.norm=g.traceCoordinate[6];return a},
meta:{}}},{"../../plots/gl3d":789,"./attributes":914,"./calc":915,"./convert":916,"./defaults":917}],919:[function(a,t,m){m=a("../heatmap/attributes");var p=a("../scatter/attributes"),g=a("../../components/colorscale/attributes"),h=a("../../components/colorbar/attributes"),e=a("../../components/drawing/attributes").dash,n=a("../../plots/font_attributes"),b=a("../../lib/extend").extendFlat,l=a("../../constants/filter_ops");a=l.COMPARISON_OPS2;l=l.INTERVAL_OPS;p=p.line;t.exports=b({z:m.z,x:m.x,x0:m.x0,
dx:m.dx,y:m.y,y0:m.y0,dy:m.dy,text:m.text,hovertext:m.hovertext,transpose:m.transpose,xtype:m.xtype,ytype:m.ytype,zhoverformat:m.zhoverformat,hovertemplate:m.hovertemplate,connectgaps:m.connectgaps,fillcolor:{valType:"color",editType:"calc"},autocontour:{valType:"boolean",dflt:!0,editType:"calc",impliedEdits:{"contours.start":void 0,"contours.end":void 0,"contours.size":void 0}},ncontours:{valType:"integer",dflt:15,min:1,editType:"calc"},contours:{type:{valType:"enumerated",values:["levels","constraint"],
dflt:"levels",editType:"calc"},start:{valType:"number",dflt:null,editType:"plot",impliedEdits:{"^autocontour":!1}},end:{valType:"number",dflt:null,editType:"plot",impliedEdits:{"^autocontour":!1}},size:{valType:"number",dflt:null,min:0,editType:"plot",impliedEdits:{"^autocontour":!1}},coloring:{valType:"enumerated",values:["fill","heatmap","lines","none"],dflt:"fill",editType:"calc"},showlines:{valType:"boolean",dflt:!0,editType:"plot"},showlabels:{valType:"boolean",dflt:!1,editType:"plot"},labelfont:n({editType:"plot",
colorEditType:"style"}),labelformat:{valType:"string",dflt:"",editType:"plot"},operation:{valType:"enumerated",values:[].concat(a).concat(l),dflt:"\x3d",editType:"calc"},value:{valType:"any",dflt:0,editType:"calc"},editType:"calc",impliedEdits:{autocontour:!1}},line:{color:b({},p.color,{editType:"style+colorbars"}),width:b({},p.width,{editType:"style+colorbars"}),dash:e,smoothing:b({},p.smoothing,{}),editType:"plot"}},g("",{cLetter:"z",autoColorDflt:!1,editTypeOverride:"calc"}),{colorbar:h})},{"../../components/colorbar/attributes":578,
"../../components/colorscale/attributes":584,"../../components/drawing/attributes":597,"../../constants/filter_ops":673,"../../lib/extend":690,"../../plots/font_attributes":774,"../heatmap/attributes":948,"../scatter/attributes":1051}],920:[function(a,t,m){var p=a("../heatmap/calc"),g=a("./set_contours");t.exports=function(a,e){a=p(a,e);g(e);return a}},{"../heatmap/calc":949,"./set_contours":938}],921:[function(a,t,m){t.exports=function(a,g,h,e){var n;a=a[0];var b=a.x.length;var l=a.y.length,m=a.z,
q=e.contours;e=-Infinity;h=Infinity;for(n=0;n<l;n++)h=Math.min(h,m[n][0]),h=Math.min(h,m[n][b-1]),e=Math.max(e,m[n][0]),e=Math.max(e,m[n][b-1]);for(n=1;n<b-1;n++)h=Math.min(h,m[0][n]),h=Math.min(h,m[l-1][n]),e=Math.max(e,m[0][n]),e=Math.max(e,m[l-1][n]);a.prefixBoundary=!1;switch(g){case "\x3e":q.value>e&&(a.prefixBoundary=!0);break;case "\x3c":q.value<h&&(a.prefixBoundary=!0);break;case "[]":g=Math.min.apply(null,q.value);b=Math.max.apply(null,q.value);if(b<h||g>e)a.prefixBoundary=!0;break;case "][":g=
Math.min.apply(null,q.value),b=Math.max.apply(null,q.value),g<h&&b>e&&(a.prefixBoundary=!0)}}},{}],922:[function(a,t,m){var p=a("../../components/colorbar/draw"),g=a("./make_color_map"),h=a("./end_plus");t.exports=function(a,n){var b=n[0].trace,e="cb"+b.uid;a._fullLayout._infolayer.selectAll("."+e).remove();if(b.showscale){a=n[0].t.cb=p(a,e);n=b.contours;e=b.line;var m=n.size||1,q=n.coloring,d=g(b,{isColorbar:!0});a.fillgradient("heatmap"===q?b.colorscale:"").zrange("heatmap"===q?[b.zmin,b.zmax]:
"").fillcolor("fill"===q?d:"").line({color:"lines"===q?d:e.color,width:!1!==n.showlines?e.width:0,dash:e.dash}).levels({start:n.start,end:h(n),size:m}).options(b.colorbar)()}}},{"../../components/colorbar/draw":582,"./end_plus":930,"./make_color_map":935}],923:[function(a,t,m){t.exports={BOTTOMSTART:[1,9,13,104,713],TOPSTART:[4,6,7,104,713],LEFTSTART:[8,12,14,208,1114],RIGHTSTART:[2,3,11,208,1114],NEWDELTA:[null,[-1,0],[0,-1],[-1,0],[1,0],null,[0,-1],[-1,0],[0,1],[0,1],null,[0,1],[1,0],[1,0],[0,-1]],
CHOOSESADDLE:{104:[4,1],208:[2,8],713:[7,13],1114:[11,14]},SADDLEREMAINDER:{1:4,2:8,4:1,7:13,8:2,11:14,13:7,14:11},LABELDISTANCE:2,LABELINCREASE:10,LABELMIN:3,LABELMAX:10,LABELOPTIMIZER:{EDGECOST:1,ANGLECOST:1,NEIGHBORCOST:5,SAMELEVELFACTOR:10,SAMELEVELDISTANCE:5,MAXCOST:100,INITIALSEARCHPOINTS:10,ITERATIONS:5}}},{}],924:[function(a,t,m){var p=a("fast-isnumeric"),g=a("./label_defaults");m=a("../../components/color");var h=m.addOpacity,e=m.opacity;a=a("../../constants/filter_ops");var n=a.CONSTRAINT_REDUCTION,
b=a.COMPARISON_OPS2;t.exports=function(a,m,q,d,f,c){var k=m.contours,l=q("contours.operation");k._operation=n[l];if(-1===b.indexOf(k.operation))if(q("contours.value",[0,1]),Array.isArray(k.value))if(2<k.value.length)k.value=k.value.slice(2);else if(0===k.length)k.value=[0,1];else if(2>k.length){var u=parseFloat(k.value[0]);k.value=[u,u+1]}else k.value=[parseFloat(k.value[0]),parseFloat(k.value[1])];else p(k.value)&&(u=parseFloat(k.value),k.value=[u,u+1]);else q("contours.value",0),p(k.value)||(Array.isArray(k.value)?
k.value=parseFloat(k.value[0]):k.value=0);if("\x3d"===l)k=k.showlines=!0;else{k=q("contours.showlines");var t=q("fillcolor",h((a.line||{}).color||f,.5))}if(k){a=t&&e(t)?h(m.fillcolor,1):f;var A=q("line.color",a);q("line.width",2);q("line.dash")}q("line.smoothing");g(q,d,A,c)}},{"../../components/color":577,"../../constants/filter_ops":673,"./label_defaults":934,"fast-isnumeric":221}],925:[function(a,t,m){function p(a,g){function b(a){return n(a)?+a:null}var h=Array.isArray(g),d;-1!==e.COMPARISON_OPS2.indexOf(a)?
d=h?b(g[0]):b(g):-1!==e.INTERVAL_OPS.indexOf(a)?d=h?[b(g[0]),b(g[1])]:[b(g),b(g)]:-1!==e.SET_OPS.indexOf(a)&&(d=h?g.map(b):[b(g)]);return d}function g(a){return function(b){b=p(a,b);var e=Math.min(b[0],b[1]);b=Math.max(b[0],b[1]);return{start:e,end:b,size:b-e}}}function h(a){return function(b){b=p(a,b);return{start:b,end:Infinity,size:Infinity}}}var e=a("../../constants/filter_ops"),n=a("fast-isnumeric");t.exports={"[]":g("[]"),"][":g("]["),"\x3e":h("\x3e"),"\x3c":h("\x3c"),"\x3d":h("\x3d")}},{"../../constants/filter_ops":673,
"fast-isnumeric":221}],926:[function(a,t,m){t.exports=function(a,g,h,e){a=e("contours.start");e=e("contours.end");e=!1===a||!1===e;a=h("contours.size");(e?!(g.autocontour=!0):!h("autocontour",!1))&&a||h("ncontours")}},{}],927:[function(a,t,m){function p(a){return g.extendFlat({},a,{edgepaths:g.extendDeep([],a.edgepaths),paths:g.extendDeep([],a.paths)})}var g=a("../../lib");t.exports=function(a,e){var h=function(a){return a.reverse()},b=function(a){return a};switch(e){case "\x3d":case "\x3c":return a;
case "\x3e":1!==a.length&&g.warn("Contour data invalid for the specified inequality operation.");var l=a[0];for(e=0;e<l.edgepaths.length;e++)l.edgepaths[e]=h(l.edgepaths[e]);for(e=0;e<l.paths.length;e++)l.paths[e]=h(l.paths[e]);return a;case "][":e=h,h=b,b=e;case "[]":2!==a.length&&g.warn("Contour data invalid for the specified inequality range operation.");l=p(a[0]);a=p(a[1]);for(e=0;e<l.edgepaths.length;e++)l.edgepaths[e]=h(l.edgepaths[e]);for(e=0;e<l.paths.length;e++)l.paths[e]=h(l.paths[e]);for(;a.edgepaths.length;)l.edgepaths.push(b(a.edgepaths.shift()));
for(;a.paths.length;)l.paths.push(b(a.paths.shift()));return[l]}}},{"../../lib":700}],928:[function(a,t,m){var p=a("../../lib"),g=a("../heatmap/xyz_defaults"),h=a("./constraint_defaults"),e=a("./contours_defaults"),n=a("./style_defaults"),b=a("./attributes");t.exports=function(a,m,q,d){function f(c,d){return p.coerce(a,m,b,c,d)}function c(c){return p.coerce2(a,m,b,c)}if(g(a,m,f,d)){f("text");f("hovertext");f("hovertemplate");var k="constraint"===f("contours.type");f("connectgaps",p.isArray1D(m.z));
k?h(a,m,f,d,q):(e(a,m,f,c),n(a,m,f,d))}else m.visible=!1}},{"../../lib":700,"../heatmap/xyz_defaults":962,"./attributes":919,"./constraint_defaults":924,"./contours_defaults":926,"./style_defaults":940}],929:[function(a,t,m){var p=a("../../lib"),g=a("./constraint_mapping"),h=a("./end_plus");t.exports=function(a,n,b){var e="constraint"===a.type?g[a._operation](a.value):a,m=e.size,q=[],d=h(e),f=b.trace._carpetTrace;n=f?{xaxis:f.aaxis,yaxis:f.baxis,x:b.a,y:b.b}:{xaxis:n.xaxis,yaxis:n.yaxis,x:b.x,y:b.y};
for(e=e.start;e<d;e+=m)if(q.push(p.extendFlat({level:e,crossings:{},starts:[],edgepaths:[],paths:[],z:b.z,smoothing:b.trace.line.smoothing},n)),1E3<q.length){p.warn("Too many contours, clipping at 1000",a);break}return q}},{"../../lib":700,"./constraint_mapping":925,"./end_plus":930}],930:[function(a,t,m){t.exports=function(a){return a.end+a.size/1E6}},{}],931:[function(a,t,m){function p(a,e,g,h){return Math.abs(a[0]-e[0])<g&&Math.abs(a[1]-e[1])<h}function g(a,g,m,q,d){var b=g.join(","),c=b,k=a.crossings[c],
l=k,u=0;var t=0;20<l&&m?208===l||1114===l?u=0===g[0]?1:-1:t=0===g[1]?1:-1:-1!==n.BOTTOMSTART.indexOf(l)?t=1:-1!==n.LEFTSTART.indexOf(l)?u=1:-1!==n.TOPSTART.indexOf(l)?t=-1:u=-1;t=[u,t];l=[h(a,g,[-t[0],-t[1]])];var A=t.join(","),y=a.z.length,w=a.z[0].length;for(u=0;1E4>u;u++){20<k?(k=n.CHOOSESADDLE[k][0>(t[0]||t[1])?0:1],a.crossings[c]=n.SADDLEREMAINDER[k]):delete a.crossings[c];t=n.NEWDELTA[k];if(!t){e.log("Found bad marching index:",k,g,a.level);break}l.push(h(a,g,t));g[0]+=t[0];g[1]+=t[1];p(l[l.length-
1],l[l.length-2],q,d)&&l.pop();c=g.join(",");k=t[0]&&(0>g[0]||g[0]>w-2)||t[1]&&(0>g[1]||g[1]>y-2);if(c===b&&t.join(",")===A||m&&k)break;k=a.crossings[c]}1E4===u&&e.log("Infinite loop in contour?");g=p(l[0],l[l.length-1],q,d);t=0;A=.2*a.smoothing;c=[];k=0;for(u=1;u<l.length;u++){w=l[u];var x=l[u-1];y=w[2]-x[2];w=w[3]-x[3];y=Math.sqrt(y*y+w*w);t+=y;c.push(y)}y=t/c.length*A;for(u=l.length-2;u>=k;u--)if(w=c[u],w<y){A=0;for(t=u-1;t>=k;t--)if(w+c[t]<y)w+=c[t];else break;if(g&&u===l.length-2)for(A=0;A<t;A++)if(w+
c[A]<y)w+=c[A];else break;w=u-t+A+1;x=Math.floor((u+t+A+2)/2);w=g||u!==l.length-2?g||-1!==t?w%2?l[x%l.length]:[(l[x%l.length][0]+l[(x+1)%l.length][0])/2,(l[x%l.length][1]+l[(x+1)%l.length][1])/2]:l[0]:l[l.length-1];l.splice(t+1,u-t+1,w);u=t+1;A&&(k=A);g&&(u===l.length-2?l[A]=l[l.length-1]:0===u&&(l[l.length-1]=l[0]))}l.splice(0,k);for(u=0;u<l.length;u++)l[u].length=2;if(!(2>l.length))if(g)l.pop(),a.paths.push(l);else{m||e.log("Unclosed interior contour?",a.level,b,l.join("L"));c=!1;for(m=0;m<a.edgepaths.length;m++)if(u=
a.edgepaths[m],!c&&p(u[0],l[l.length-1],q,d)){l.pop();c=!0;k=!1;for(b=0;b<a.edgepaths.length;b++)if(g=a.edgepaths[b],p(g[g.length-1],l[0],q,d)){k=!0;l.shift();a.edgepaths.splice(m,1);b===m?a.paths.push(l.concat(g)):(b>m&&b--,a.edgepaths[b]=g.concat(l,u));break}k||(a.edgepaths[m]=l.concat(u))}for(m=0;m<a.edgepaths.length&&!c;m++)u=a.edgepaths[m],p(u[u.length-1],l[0],q,d)&&(l.shift(),a.edgepaths[m]=u.concat(l),c=!0);c||a.edgepaths.push(l)}}function h(a,e,g){var b=e[0]+Math.max(g[0],0);e=e[1]+Math.max(g[1],
0);var d=a.z[e][b],f=a.xaxis,c=a.yaxis;if(g[1])return g=(a.level-d)/(a.z[e][b+1]-d),[f.c2p((1-g)*a.x[b]+g*a.x[b+1],!0),c.c2p(a.y[e],!0),b+g,e];g=(a.level-d)/(a.z[e+1][b]-d);return[f.c2p(a.x[b],!0),c.c2p((1-g)*a.y[e]+g*a.y[e+1],!0),b,e+g]}var e=a("../../lib"),n=a("./constants");t.exports=function(a,h,n){var b,d;h=h||.01;n=n||.01;for(d=0;d<a.length;d++){var f=a[d];for(b=0;b<f.starts.length;b++){var c=f.starts[b];g(f,c,"edge",h,n)}for(b=0;Object.keys(f.crossings).length&&1E4>b;)b++,c=Object.keys(f.crossings)[0].split(",").map(Number),
g(f,c,void 0,h,n);1E4===b&&e.log("Infinite loop in contour?")}}},{"../../lib":700,"./constants":923}],932:[function(a,t,m){var p=a("../../components/color"),g=a("../heatmap/hover");t.exports=function(a,e,n,b,l){(a=g(a,e,n,b,l,!0))&&a.forEach(function(a){var b=a.trace;"constraint"===b.contours.type&&(b.fillcolor&&p.opacity(b.fillcolor)?a.color=p.addOpacity(b.fillcolor,1):b.contours.showlines&&p.opacity(b.line.color)&&(a.color=p.addOpacity(b.line.color,1)))});return a}},{"../../components/color":577,
"../heatmap/hover":955}],933:[function(a,t,m){m={};m.attributes=a("./attributes");m.supplyDefaults=a("./defaults");m.calc=a("./calc");m.plot=a("./plot").plot;m.style=a("./style");m.colorbar=a("./colorbar");m.hoverPoints=a("./hover");m.moduleType="trace";m.name="contour";m.basePlotModule=a("../../plots/cartesian");m.categories=["cartesian","svg","2dMap","contour","showLegend"];m.meta={};t.exports=m},{"../../plots/cartesian":759,"./attributes":919,"./calc":920,"./colorbar":922,"./defaults":928,"./hover":932,
"./plot":937,"./style":939}],934:[function(a,t,m){var p=a("../../lib");t.exports=function(a,h,e,n){n||(n={});a("contours.showlabels")&&(h=h.font,p.coerceFont(a,"contours.labelfont",{family:h.family,size:h.size,color:e}),a("contours.labelformat"));!1!==n.hasHover&&a("zhoverformat")}},{"../../lib":700}],935:[function(a,t,m){var p=a("d3"),g=a("../../components/colorscale"),h=a("./end_plus");t.exports=function(a){var e=a.contours,b=e.start,l=h(e),m=e.size||1,q=Math.floor((l-b)/m)+1,d="lines"===e.coloring?
0:1;isFinite(m)||(q=m=1);var f=a.reversescale?g.flipScale(a.colorscale):a.colorscale,c=f.length;l=Array(c);var k=Array(c),r;if("heatmap"===e.coloring){a.zauto&&!1===a.autocontour&&(a.zmin=b-m/2,a.zmax=a.zmin+q*m);for(r=0;r<c;r++){var t=f[r];l[r]=t[0]*(a.zmax-a.zmin)+a.zmin;k[r]=t[1]}b=p.extent([a.zmin,a.zmax,e.start,e.start+m*(q-1)]);e=b[a.zmin<a.zmax?0:1];b=b[a.zmin<a.zmax?1:0];e!==a.zmin&&(l.splice(0,0,e),k.splice(0,0,Range[0]));b!==a.zmax&&(l.push(b),k.push(k[k.length-1]))}else for(r=0;r<c;r++)t=
f[r],l[r]=(t[0]*(q+d-1)-d/2)*m+b,k[r]=t[1];return g.makeColorScaleFunc({domain:l,range:k},{noNumericCheck:!0})}},{"../../components/colorscale":589,"./end_plus":930,d3:154}],936:[function(a,t,m){var p=a("./constants");t.exports=function(a){var g=a[0].z,e=g.length,n=g[0].length,b=2===e||2===n,l,m,q;for(m=0;m<e-1;m++){var d=[];0===m&&(d=d.concat(p.BOTTOMSTART));m===e-2&&(d=d.concat(p.TOPSTART));for(l=0;l<n-1;l++){var f=d.slice();0===l&&(f=f.concat(p.LEFTSTART));l===n-2&&(f=f.concat(p.RIGHTSTART));var c=
l+","+m;var k=[[g[m][l],g[m][l+1]],[g[m+1][l],g[m+1][l+1]]];for(q=0;q<a.length;q++){var r=a[q];var t=r.level;var z=(k[0][0]>t?0:1)+(k[0][1]>t?0:2)+(k[1][1]>t?0:4)+(k[1][0]>t?0:8);t=5===z||10===z?t>(k[0][0]+k[0][1]+k[1][0]+k[1][1])/4?5===z?713:1114:5===z?104:208:15===z?0:z;t&&(r.crossings[c]=t,-1!==f.indexOf(t)&&(r.starts.push([l,m]),b&&-1!==f.indexOf(t,f.indexOf(t)+1)&&r.starts.push([l,m])))}}}}},{"./constants":923}],937:[function(a,t,m){function p(a,c,d,e){a=b.ensureSingle(a,"g","contourfill").selectAll("path").data("fill"===
e.coloring||"constraint"===e.type&&"\x3d"!==e._operation?c:[]);a.enter().append("path");a.exit().remove();a.each(function(a){(a=h(a,d))?n.select(this).attr("d",a).style("stroke","none"):n.select(this).remove()})}function g(a,b){var c=a.prefixBoundary;void 0===c&&(c=Math.min(a.z[0][0],a.z[0][1]),c=!a.edgepaths.length&&c>a.level);return c?"M"+b.join("L")+"Z":""}function h(a,c){for(var d=g(a,c),e=0,f=a.edgepaths.map(function(a,b){return b}),h=!0,k,n,m,r;f.length;){n=l.smoothopen(a.edgepaths[e],a.smoothing);
d+=h?n:n.replace(/^M/,"L");f.splice(f.indexOf(e),1);h=a.edgepaths[e][a.edgepaths[e].length-1];m=-1;for(n=0;4>n;n++){if(!h){b.log("Missing end?",e,a);break}.01>Math.abs(h[1]-c[0][1])&&!(.01>Math.abs(h[0]-c[2][0]))?k=c[1]:.01>Math.abs(h[0]-c[0][0])?k=c[0]:.01>Math.abs(h[1]-c[2][1])?k=c[3]:.01>Math.abs(h[0]-c[2][0])&&(k=c[2]);for(r=0;r<a.edgepaths.length;r++){var q=a.edgepaths[r][0];.01>Math.abs(h[0]-k[0])?.01>Math.abs(h[0]-q[0])&&0<=(q[1]-h[1])*(k[1]-q[1])&&(k=q,m=r):.01>Math.abs(h[1]-k[1])?.01>Math.abs(h[1]-
q[1])&&0<=(q[0]-h[0])*(k[0]-q[0])&&(k=q,m=r):b.log("endpt to newendpt is not vert. or horz.",h,k,q)}h=k;if(0<=m)break;d+="L"+k}if(m===a.edgepaths.length){b.log("unclosed perimeter path");break}e=m;if(h=-1===f.indexOf(e))e=f[0],d+="Z"}for(e=0;e<a.paths.length;e++)d+=l.smoothclosed(a.paths[e],a.smoothing);return d}function e(a,c,d,e,f,g){var h=b.ensureSingle(a,"g","contourlines"),k=!1!==f.showlines,r=f.showlabels,q=k&&r,p=m.createLines(h,k||r,c);h=m.createLineClip(h,q,d,e.trace.uid);a=a.selectAll("g.contourlabels").data(r?
[0]:[]);a.exit().remove();a.enter().append("g").classed("contourlabels",!0);if(r){var u=[],t=[];b.clearLocationCache();var v=m.labelFormatter(f,e.t.cb,d._fullLayout),w=l.tester.append("text").attr("data-notex",1).call(l.font,f.labelfont),x=c[0].xaxis,z=c[0].yaxis;e=x._length;f=z._length;x=x.range;z=z.range;var y=Math.max(g[0][0],0),B=Math.min(g[2][0],e),D=Math.max(g[0][1],0);g=Math.min(g[2][1],f);var C={};x[0]<x[1]?(C.left=y,C.right=B):(C.left=B,C.right=y);z[0]<z[1]?(C.top=D,C.bottom=g):(C.top=g,
C.bottom=D);C.middle=(C.top+C.bottom)/2;C.center=(C.left+C.right)/2;u.push([[C.left,C.top],[C.right,C.top],[C.right,C.bottom],[C.left,C.bottom]]);var F=A.LABELDISTANCE*Math.sqrt(e*e+f*f)/Math.max(1,c.length/A.LABELINCREASE);p.each(function(a){var c=m.calcTextOpts(a.level,v,w,d);n.select(this).selectAll("path").each(function(){var a=b.getVisibleSegment(this,C,c.height/2);if(a&&!(a.len<(c.width+c.height)*A.LABELMIN))for(var d=Math.min(Math.ceil(a.len/F),A.LABELMAX),e=0;e<d;e++){var f=m.findBestTextLocation(this,
a,c,t,C);if(!f)break;m.addLabelData(f,c,t,u)}})});w.remove();m.drawLabels(a,t,d,h,q?u:null)}r&&!k&&p.remove()}var n=a("d3"),b=a("../../lib"),l=a("../../components/drawing"),u=a("../../lib/svg_text_utils"),q=a("../../plots/cartesian/axes"),d=a("../../plots/cartesian/set_convert"),f=a("../heatmap/plot"),c=a("./make_crossings"),k=a("./find_all_paths"),r=a("./empty_pathinfo"),v=a("./convert_to_constraints"),z=a("./close_boundaries"),A=a("./constants"),y=A.LABELOPTIMIZER;m.plot=function(a,d,g,m){var q=
d.xaxis,u=d.yaxis;b.makeTraceGroups(m,g,"contour").each(function(g){var m=n.select(this),t=g[0],w=t.trace,x=t.x,A=t.y,y=w.contours,B=r(y,d,t),D=b.ensureSingle(m,"g","heatmapcoloring"),C=[];"heatmap"===y.coloring&&(w.zauto&&!1===w.autocontour&&(w._input.zmin=w.zmin=y.start-y.size/2,w._input.zmax=w.zmax=w.zmin+B.length*y.size),C=[g]);f(a,d,C,D);c(B);k(B);g=q.c2p(x[0],!0);x=q.c2p(x[x.length-1],!0);D=u.c2p(A[0],!0);A=u.c2p(A[A.length-1],!0);A=[[g,A],[x,A],[x,D],[g,D]];x=B;"constraint"===y.type&&(x=v(B,
y._operation),z(x,y._operation,A,w));w=b.ensureSingle(m,"g","contourbg").selectAll("path").data("fill"===y.coloring?[0]:[]);w.enter().append("path");w.exit().remove();w.attr("d","M"+A.join("L")+"Z").style("stroke","none");p(m,x,A,y);e(m,B,a,t,y,A);y="clip"+t.trace.uid;B=a._fullLayout._clips.selectAll("#"+y).data(t.trace.connectgaps?[]:[0]);B.enter().append("clipPath").classed("contourclip",!0).attr("id",y);B.exit().remove();if(!1===t.trace.connectgaps){w=d.xaxis;x=d.yaxis;g=t.x;D=t.y;C=t.trace._emptypoints;
var G=[],F=t.z.length,P=t.z[0].length,S,ba=[];for(S=0;S<P;S++)ba.push(1);for(S=0;S<F;S++)G.push(ba.slice());for(S=0;S<C.length;S++)F=C[S],G[F[0]][F[1]]=0;t.zmask=G;t={level:.9,crossings:{},starts:[],edgepaths:[],paths:[],xaxis:w,yaxis:x,x:g,y:D,z:G,smoothing:0};c([t]);k([t]);t=h(t,A);b.ensureSingle(B,"path","").attr("d",t)}else y=null;l.setClipUrl(m,y,a)})};m.createLines=function(a,b,c){var d=c[0].smoothing;a=a.selectAll("g.contourlevel").data(b?c:[]);a.exit().remove();a.enter().append("g").classed("contourlevel",
!0);b&&(b=a.selectAll("path.openline").data(function(a){return a.pedgepaths||a.edgepaths}),b.exit().remove(),b.enter().append("path").classed("openline",!0),b.attr("d",function(a){return l.smoothopen(a,d)}).style("stroke-miterlimit",1).style("vector-effect","non-scaling-stroke"),b=a.selectAll("path.closedline").data(function(a){return a.ppaths||a.paths}),b.exit().remove(),b.enter().append("path").classed("closedline",!0),b.attr("d",function(a){return l.smoothclosed(a,d)}).style("stroke-miterlimit",
1).style("vector-effect","non-scaling-stroke"));return a};m.createLineClip=function(a,b,c,d){d=b?"clipline"+d:null;b=c._fullLayout._clips.selectAll("#"+d).data(b?[0]:[]);b.exit().remove();b.enter().append("clipPath").classed("contourlineclip",!0).attr("id",d);l.setClipUrl(a,d,c);return b};m.labelFormatter=function(a,b,c){if(a.labelformat)return c._d3locale.numberFormat(a.labelformat);if(b)var e=b.axis;else e={type:"linear",_id:"ycontour",showexponent:"all",exponentformat:"B"},"constraint"===a.type?
(a=a.value,Array.isArray(a)?e.range=[a[0],a[a.length-1]]:e.range=[a,a]):(e.range=[a.start,a.end],e.nticks=(a.end-a.start)/a.size),e.range[0]===e.range[1]&&(e.range[1]+=e.range[0]||1),e.nticks||(e.nticks=1E3),d(e,c),q.prepTicks(e),e._tmin=null,e._tmax=null;return function(a){return q.tickText(e,a).text}};m.calcTextOpts=function(a,b,c,d){b=b(a);c.text(b).call(u.convertToTspans,d);c=l.bBox(c.node(),!0);return{text:b,width:c.width,height:c.height,level:a,dy:(c.top+c.bottom)/2}};m.findBestTextLocation=
function(a,c,d,e,f){var g=d.width;if(c.isClosed){var h=c.len/y.INITIALSEARCHPOINTS;var k=c.min+h/2;var l=c.max}else h=(c.len-g)/(y.INITIALSEARCHPOINTS+1),k=c.min+h+g/2,l=c.max-(h+g)/2;for(var n=Infinity,m=0;m<y.ITERATIONS;m++){for(;k<l;k+=h){var r=b.getTextLocation(a,c.total,k,g);a:{var q=d;var p=e,u=q.width/2,t=q.height/2,v=r.x,w=r.y,z=r.theta,x=Math.cos(z)*u,A=Math.sin(z)*u;u=(v>f.center?f.right-v:v-f.left)/(x+Math.abs(Math.sin(z)*t));t=(w>f.middle?f.bottom-w:w-f.top)/(Math.abs(A)+Math.cos(z)*t);
if(1>u||1>t)q=Infinity;else{t=y.EDGECOST*(1/(u-1)+1/(t-1));t+=y.ANGLECOST*z*z;z=v-x;u=w-A;v+=x;w+=A;for(x=0;x<p.length;x++){A=p[x];var B=Math.cos(A.theta)*A.width/2,C=Math.sin(A.theta)*A.width/2;B=2*b.segmentDistance(z,u,v,w,A.x-B,A.y-C,A.x+B,A.y+C)/(q.height+A.height);C=(A=A.level===q.level)?y.SAMELEVELDISTANCE:1;if(B<=C){q=Infinity;break a}t+=y.NEIGHBORCOST*(A?y.SAMELEVELFACTOR:1)/(B-C)}q=t}}if(q<n){n=q;var F=r;var W=k}}if(n>2*y.MAXCOST)break;m&&(h/=2);k=W-h/2;l=k+1.5*h}if(n<=y.MAXCOST)return F};
m.addLabelData=function(a,b,c,d){var e=b.width/2,f=b.height/2,g=a.x,h=a.y;a=a.theta;var k=Math.sin(a),l=Math.cos(a),n=e*l,m=f*k;e*=k;f=-f*l;f=[[g-n-m,h-e-f],[g+n-m,h+e-f],[g+n+m,h+e+f],[g-n+m,h-e+f]];c.push({text:b.text,x:g,y:h,dy:b.dy,theta:a,level:b.level,width:b.width,height:b.height});d.push(f)};m.drawLabels=function(a,c,d,e,f){a=a.selectAll("text").data(c,function(a){return a.text+","+a.x+","+a.y+","+a.theta});a.exit().remove();a.enter().append("text").attr({"data-notex":1,"text-anchor":"middle"}).each(function(a){var b=
a.x+Math.sin(a.theta)*a.dy,c=a.y-Math.cos(a.theta)*a.dy;n.select(this).text(a.text).attr({x:b,y:c,transform:"rotate("+180*a.theta/Math.PI+" "+b+" "+c+")"}).call(u.convertToTspans,d)});if(f){a="";for(c=0;c<f.length;c++)a+="M"+f[c].join("L")+"Z";b.ensureSingle(e,"path","").attr("d",a)}}},{"../../components/drawing":598,"../../lib":700,"../../lib/svg_text_utils":724,"../../plots/cartesian/axes":748,"../../plots/cartesian/set_convert":766,"../heatmap/plot":959,"./close_boundaries":921,"./constants":923,
"./convert_to_constraints":927,"./empty_pathinfo":929,"./find_all_paths":931,"./make_crossings":936,d3:154}],938:[function(a,t,m){function p(a,h,b){var e={type:"linear",range:[a,h]};g.autoTicks(e,(h-a)/(b||15));return e}var g=a("../../plots/cartesian/axes"),h=a("../../lib");t.exports=function(a){var e=a.contours;if(a.autocontour){var b=a.zmin,l=a.zmax;if(void 0===b||void 0===l)b=h.aggNums(Math.min,null,a._z),l=h.aggNums(Math.max,null,a._z);var m=p(b,l,a.ncontours);e.size=m.dtick;e.start=g.tickFirst(m);
m.range.reverse();e.end=g.tickFirst(m);e.start===b&&(e.start+=e.size);e.end===l&&(e.end-=e.size);e.start>e.end&&(e.start=e.end=(e.start+e.end)/2);a._input.contours||(a._input.contours={});h.extendFlat(a._input.contours,{start:e.start,end:e.end,size:e.size});a._input.autocontour=!0}else"constraint"!==e.type&&(l=e.start,m=e.end,b=a._input.contours,l>m&&(e.start=b.start=m,m=e.end=b.end=l,l=e.start),0<e.size||(a=l===m?1:p(l,m,a.ncontours).dtick,b.size=e.size=a))}},{"../../lib":700,"../../plots/cartesian/axes":748}],
939:[function(a,t,m){var p=a("d3"),g=a("../../components/drawing"),h=a("../heatmap/style"),e=a("./make_color_map");t.exports=function(a){var b=p.select(a).selectAll("g.contour");b.style("opacity",function(a){return a[0].trace.opacity});b.each(function(a){var b=p.select(this);a=a[0].trace;var h=a.contours,d=a.line,f=h.size||1,c=h.start,k="constraint"===h.type,l=!k&&"lines"===h.coloring,n=!k&&"fill"===h.coloring,m=l||n?e(a):null;b.selectAll("g.contourlevel").each(function(a){p.select(this).selectAll("path").call(g.lineGroupStyle,
d.width,l?m(a.level):d.color,d.dash)});var t=h.labelfont;b.selectAll("g.contourlabels text").each(function(a){g.font(p.select(this),{family:t.family,size:t.size,color:t.color||(l?m(a.level):d.color)})});if(k)b.selectAll("g.contourfill path").style("fill",a.fillcolor);else if(n){var y;b.selectAll("g.contourfill path").style("fill",function(a){void 0===y&&(y=a.level);return m(a.level+.5*f)});void 0===y&&(y=c);b.selectAll("g.contourbg path").style("fill",m(y-.5*f))}});h(a)}},{"../../components/drawing":598,
"../heatmap/style":960,"./make_color_map":935,d3:154}],940:[function(a,t,m){var p=a("../../components/colorscale/defaults"),g=a("./label_defaults");t.exports=function(a,e,n,b,l){var h=n("contours.coloring"),m,d="";"fill"===h&&(m=n("contours.showlines"));!1!==m&&("lines"!==h&&(d=n("line.color","#000")),n("line.width",.5),n("line.dash"));"none"!==h&&(!0!==a.showlegend&&(e.showlegend=!1),e._dfltShowLegend=!1,p(a,e,b,n,{prefix:"",cLetter:"z"}));n("line.smoothing");g(n,b,d,l)}},{"../../components/colorscale/defaults":587,
"./label_defaults":934}],941:[function(a,t,m){m=a("../heatmap/attributes");var p=a("../contour/attributes"),g=p.contours,h=a("../scatter/attributes"),e=a("../../components/colorscale/attributes"),n=a("../../components/colorbar/attributes");a=a("../../lib/extend").extendFlat;h=h.line;t.exports=a({carpet:{valType:"string",editType:"calc"},z:m.z,a:m.x,a0:m.x0,da:m.dx,b:m.y,b0:m.y0,db:m.dy,text:m.text,hovertext:m.hovertext,transpose:m.transpose,atype:m.xtype,btype:m.ytype,fillcolor:p.fillcolor,autocontour:p.autocontour,
ncontours:p.ncontours,contours:{type:g.type,start:g.start,end:g.end,size:g.size,coloring:{valType:"enumerated",values:["fill","lines","none"],dflt:"fill",editType:"calc"},showlines:g.showlines,showlabels:g.showlabels,labelfont:g.labelfont,labelformat:g.labelformat,operation:g.operation,value:g.value,editType:"calc",impliedEdits:{autocontour:!1}},line:{color:a({},h.color,{}),width:h.width,dash:h.dash,smoothing:a({},h.smoothing,{}),editType:"plot"},transforms:void 0},e("",{cLetter:"z",autoColorDflt:!1}),
{colorbar:n})},{"../../components/colorbar/attributes":578,"../../components/colorscale/attributes":584,"../../lib/extend":690,"../contour/attributes":919,"../heatmap/attributes":948,"../scatter/attributes":1051}],942:[function(a,t,m){var p=a("../../components/colorscale/calc"),g=a("../../lib"),h=a("../heatmap/convert_column_xyz"),e=a("../heatmap/clean_2d_array"),n=a("../heatmap/interp2d"),b=a("../heatmap/find_empties"),l=a("../heatmap/make_bound_array"),u=a("./defaults"),q=a("../carpet/lookup_carpetid"),
d=a("../contour/set_contours");t.exports=function(a,c){var f=c._carpetTrace=q(a,c);if(f&&f.visible&&"legendonly"!==f.visible){if(!c.a||!c.b){f=a.data[f.index];var m=a.data[c.index];m.a||(m.a=f.a);m.b||(m.b=f.b);u(m,c,c._defaultColor,a._fullLayout)}f=c._carpetTrace;m=f.aaxis;var t=f.baxis;m._minDtick=0;t._minDtick=0;g.isArray1D(c.z)&&h(c,m,t,"a","b",["z"]);var z=c._a=c._a||c.a;var A=c._b=c._b||c.b;z=z?m.makeCalcdata(c,"_a"):[];A=A?t.makeCalcdata(c,"_b"):[];var y=c.a0||0;var w=c.da||1;var x=c.b0||0;
var F=c.db||1;f=c._z=e(c._z||c.z,c.transpose);c._emptypoints=b(f);n(f,c._emptypoints);var B=g.maxRowLength(f);m=l(c,"scaled"===c.xtype?"":z,y,w,B,m);t=l(c,"scaled"===c.ytype?"":A,x,F,f.length,t);m={a:m,b:t,z:f};"levels"===c.contours.type&&"none"!==c.contours.coloring&&p(a,c,{vals:f,containerStr:"",cLetter:"z"});a=[m];d(c);return a}}},{"../../components/colorscale/calc":585,"../../lib":700,"../carpet/lookup_carpetid":897,"../contour/set_contours":938,"../heatmap/clean_2d_array":950,"../heatmap/convert_column_xyz":952,
"../heatmap/find_empties":954,"../heatmap/interp2d":957,"../heatmap/make_bound_array":958,"./defaults":943}],943:[function(a,t,m){var p=a("../../lib"),g=a("../heatmap/xyz_defaults"),h=a("./attributes"),e=a("../contour/constraint_defaults"),n=a("../contour/contours_defaults"),b=a("../contour/style_defaults");t.exports=function(a,m,q,d){function f(b,c){return p.coerce(a,m,h,b,c)}function c(b){return p.coerce2(a,m,h,b)}f("carpet");a.a&&a.b?g(a,m,f,d,"a","b")?(f("text"),"constraint"===f("contours.type")?
e(a,m,f,d,q,{hasHover:!1}):(n(a,m,f,c),b(a,m,f,d,{hasHover:!1}))):m.visible=!1:(m._defaultColor=q,m._length=null)}},{"../../lib":700,"../contour/constraint_defaults":924,"../contour/contours_defaults":926,"../contour/style_defaults":940,"../heatmap/xyz_defaults":962,"./attributes":941}],944:[function(a,t,m){m={};m.attributes=a("./attributes");m.supplyDefaults=a("./defaults");m.colorbar=a("../contour/colorbar");m.calc=a("./calc");m.plot=a("./plot");m.style=a("../contour/style");m.moduleType="trace";
m.name="contourcarpet";m.basePlotModule=a("../../plots/cartesian");m.categories="cartesian svg carpet contour symbols showLegend hasLines carpetDependent".split(" ");m.meta={};t.exports=m},{"../../plots/cartesian":759,"../contour/colorbar":922,"../contour/style":939,"./attributes":941,"./calc":942,"./defaults":943,"./plot":947}],945:[function(a,t,m){var p=a("../../components/drawing"),g=a("../carpet/axis_aligned_line"),h=a("../../lib");t.exports=function(a,n,b,l,m,q,d,f){function c(a){return Math.abs(a[0]-
b[2][0])<x}function e(a,e){var h="";if(Math.abs(a[1]-b[0][1])<F&&!c(a)||Math.abs(a[1]-b[2][1])<F&&!(Math.abs(a[0]-b[0][0])<x)){var k=m.aaxis;var l=g(m,q,[a[0],e[0]],.5*(a[1]+e[1]))}else k=m.baxis,l=g(m,q,.5*(a[0]+e[0]),[a[1],e[1]]);for(a=1;a<l.length;a++)for(h+=k.smoothing?"C":"L",e=0;e<l[a].length;e++){var n=l[a][e];h+=[d.c2p(n[0]),f.c2p(n[1])]+" "}return h}var r="",u=n.edgepaths.map(function(a,b){return b}),t=!0,A,y,w,x=1E-4*Math.abs(b[0][0]-b[2][0]),F=1E-4*Math.abs(b[0][1]-b[2][1]);a=0;for(A=null;u.length;){var B=
n.edgepaths[a][0];A&&(r+=e(A,B));A=p.smoothopen(n.edgepaths[a].map(l),n.smoothing);r+=t?A:A.replace(/^M/,"L");u.splice(u.indexOf(a),1);A=n.edgepaths[a][n.edgepaths[a].length-1];B=-1;for(t=0;4>t;t++){if(!A){h.log("Missing end?",a,n);break}Math.abs(A[1]-b[0][1])<F&&!c(A)?y=b[1]:Math.abs(A[0]-b[0][0])<x?y=b[0]:Math.abs(A[1]-b[2][1])<F?y=b[3]:c(A)&&(y=b[2]);for(w=0;w<n.edgepaths.length;w++){var C=n.edgepaths[w][0];Math.abs(A[0]-y[0])<x?Math.abs(A[0]-C[0])<x&&0<=(C[1]-A[1])*(y[1]-C[1])&&(y=C,B=w):Math.abs(A[1]-
y[1])<F?Math.abs(A[1]-C[1])<F&&0<=(C[0]-A[0])*(y[0]-C[0])&&(y=C,B=w):h.log("endpt to newendpt is not vert. or horz.",A,y,C)}if(0<=B)break;r+=e(A,y);A=y}if(B===n.edgepaths.length){h.log("unclosed perimeter path");break}a=B;if(t=-1===u.indexOf(a))a=u[0],r+=e(A,y)+"Z",A=null}for(a=0;a<n.paths.length;a++)r+=p.smoothclosed(n.paths[a].map(l),n.smoothing);return r}},{"../../components/drawing":598,"../../lib":700,"../carpet/axis_aligned_line":881}],946:[function(a,t,m){t.exports=function(a,g){var h,e,n;
for(h=0;h<a.length;h++){var b=a[h];var l=b.pedgepaths=[];var m=b.ppaths=[];for(e=0;e<b.edgepaths.length;e++){var q=b.edgepaths[e];var d=[];for(n=0;n<q.length;n++)d[n]=g(q[n]);l.push(d)}for(e=0;e<b.paths.length;e++){q=b.paths[e];l=[];for(n=0;n<q.length;n++)l[n]=g(q[n]);m.push(l)}}}},{}],947:[function(a,t,m){function p(a,b,d,e,h,k,l){var n=c.ensureSingle(a,"g","contourlines"),m=!1!==h.showlines,r=h.showlabels,q=m&&r,p=v.createLines(n,m||r,b);n=v.createLineClip(n,q,d,e.trace.uid);a=a.selectAll("g.contourlabels").data(r?
[0]:[]);a.exit().remove();a.enter().append("g").classed("contourlabels",!0);if(r){var t=k.xaxis._length;k=k.yaxis._length;var w=[[[0,0],[t,0],[t,k],[0,k]]],x=[];c.clearLocationCache();var A=v.labelFormatter(h,e.t.cb,d._fullLayout),y=f.tester.append("text").attr("data-notex",1).call(f.font,h.labelfont),B={left:0,right:t,center:t/2,top:0,bottom:k,middle:k/2},D=z.LABELDISTANCE*Math.sqrt(t*t+k*k)/Math.max(1,b.length/z.LABELINCREASE);p.each(function(a){var b=v.calcTextOpts(a.level,A,y,d);u.select(this).selectAll("path").each(function(d){var e=
c.getVisibleSegment(this,B,b.height/2);if(e&&(g(this,d,a,e,l,b.height),!(e.len<(b.width+b.height)*z.LABELMIN))){d=Math.min(Math.ceil(e.len/D),z.LABELMAX);for(var f=0;f<d;f++){var h=v.findBestTextLocation(this,e,b,x,B);if(!h)break;v.addLabelData(h,b,x,w)}}})});y.remove();v.drawLabels(a,x,d,n,q?w:null)}r&&!m&&p.remove()}function g(a,b,c,d,f,g){function k(a,b){var c=0;if(.1>Math.abs(a[0]-r)||.1>Math.abs(a[0]-q)){var d=e(f.dxydb_rough(a[0],a[1],.1));c=Math.max(c,g*n(b,d)/2)}if(.1>Math.abs(a[1]-p)||.1>
Math.abs(a[1]-u))d=e(f.dxyda_rough(a[0],a[1],.1)),c=Math.max(c,g*n(b,d)/2);return c}for(var l,m=0;m<c.pedgepaths.length;m++)b===c.pedgepaths[m]&&(l=c.edgepaths[m]);if(l){var r=f.a[0],q=f.a[f.a.length-1],p=f.b[0],u=f.b[f.b.length-1];b=h(a,0,1);a=h(a,d.total,d.total-1);b=k(l[0],b);l=d.total-k(l[l.length-1],a);d.min<b&&(d.min=b);d.max>l&&(d.max=l);d.len=d.max-d.min}}function h(a,b,c){b=a.getPointAtLength(b);c=a.getPointAtLength(c);a=c.x-b.x;b=c.y-b.y;c=Math.sqrt(a*a+b*b);return[a/c,b/c]}function e(a){var b=
Math.sqrt(a[0]*a[0]+a[1]*a[1]);return[a[0]/b,a[1]/b]}function n(a,b){a=Math.abs(a[0]*b[0]+a[1]*b[1]);return Math.sqrt(1-a*a)/a}function b(a,b,e,f,g,h){var k,l=c.ensureSingle(a,"g","contourbg").selectAll("path").data("fill"!==h||g?[]:[0]);l.enter().append("path");l.exit().remove();var n=[];for(k=0;k<b.length;k++)a=b[k],g=q([],a.x,e.c2p),h=q([],a.y,f.c2p),n.push(d(g,h,a.bicubic));l.attr("d","M"+n.join("L")+"Z").style("stroke","none")}function l(a,b,d,e,f,g,h,k,l,n,m){b=c.ensureSingle(b,"g","contourfill").selectAll("path").data("fill"===
n?f:[]);b.enter().append("path");b.exit().remove();b.each(function(b){var c=y(a,b,g,h,k,l,d,e);b.prefixBoundary&&(c=m+c);c?u.select(this).attr("d",c).style("stroke","none"):u.select(this).remove()})}var u=a("d3"),q=a("../carpet/map_1d_array"),d=a("../carpet/makepath"),f=a("../../components/drawing"),c=a("../../lib"),k=a("../contour/make_crossings"),r=a("../contour/find_all_paths"),v=a("../contour/plot"),z=a("../contour/constants"),A=a("../contour/convert_to_constraints"),y=a("./join_all_paths"),w=
a("../contour/empty_pathinfo"),x=a("./map_pathinfo"),F=a("../carpet/lookup_carpetid"),B=a("../contour/close_boundaries");t.exports=function(a,e,g,h){var n=e.xaxis,m=e.yaxis;c.makeTraceGroups(h,g,"contour").each(function(c){function g(a){a=v.ab2xy(a[0],a[1],!0);return[n.c2p(a[0]),m.c2p(a[1])]}var h=u.select(this);c=c[0];var t=c.trace,v=t._carpetTrace=F(a,t),z=a.calcdata[v.index][0];if(v.visible&&"legendonly"!==v.visible){var y=c.a,D=c.b,E=t.contours,C=w(E,e,c),G="constraint"===E.type,H=E._operation,
I=G?"\x3d"===H?"lines":"fill":E.coloring,K=[[y[0],D[D.length-1]],[y[y.length-1],D[D.length-1]],[y[y.length-1],D[0]],[y[0],D[0]]];k(C);r(C,1E-8*(y[y.length-1]-y[0]),1E-8*(D[D.length-1]-D[0]));y=C;"constraint"===E.type&&(y=A(C,H),B(y,H,K,t));x(C,g);var W,ea=[];for(W=z.clipsegments.length-1;0<=W;W--){H=z.clipsegments[W];D=q([],H.x,n.c2p);var U=q([],H.y,m.c2p);D.reverse();U.reverse();ea.push(d(D,U,H.bicubic))}H="M"+ea.join("L")+"Z";b(h,z.clipsegments,n,m,G,I);l(t,h,n,m,y,K,g,v,z,I,H);p(h,C,a,c,E,e,v);
f.setClipUrl(h,v._clipPathId,a)}})}},{"../../components/drawing":598,"../../lib":700,"../carpet/lookup_carpetid":897,"../carpet/makepath":898,"../carpet/map_1d_array":899,"../contour/close_boundaries":921,"../contour/constants":923,"../contour/convert_to_constraints":927,"../contour/empty_pathinfo":929,"../contour/find_all_paths":931,"../contour/make_crossings":936,"../contour/plot":937,"./join_all_paths":945,"./map_pathinfo":946,d3:154}],948:[function(a,t,m){m=a("../scatter/attributes");var p=a("../../components/fx/hovertemplate_attributes"),
g=a("../../components/colorscale/attributes"),h=a("../../components/colorbar/attributes");a=a("../../lib/extend").extendFlat;t.exports=a({z:{valType:"data_array",editType:"calc"},x:a({},m.x,{impliedEdits:{xtype:"array"}}),x0:a({},m.x0,{impliedEdits:{xtype:"scaled"}}),dx:a({},m.dx,{impliedEdits:{xtype:"scaled"}}),y:a({},m.y,{impliedEdits:{ytype:"array"}}),y0:a({},m.y0,{impliedEdits:{ytype:"scaled"}}),dy:a({},m.dy,{impliedEdits:{ytype:"scaled"}}),text:{valType:"data_array",editType:"calc"},hovertext:{valType:"data_array",
editType:"calc"},transpose:{valType:"boolean",dflt:!1,editType:"calc"},xtype:{valType:"enumerated",values:["array","scaled"],editType:"calc+clearAxisTypes"},ytype:{valType:"enumerated",values:["array","scaled"],editType:"calc+clearAxisTypes"},zsmooth:{valType:"enumerated",values:["fast","best",!1],dflt:!1,editType:"calc"},connectgaps:{valType:"boolean",dflt:!1,editType:"calc"},xgap:{valType:"number",dflt:0,min:0,editType:"plot"},ygap:{valType:"number",dflt:0,min:0,editType:"plot"},zhoverformat:{valType:"string",
dflt:"",editType:"none"},hovertemplate:p()},{transforms:void 0},g("",{cLetter:"z",autoColorDflt:!1}),{colorbar:h})},{"../../components/colorbar/attributes":578,"../../components/colorscale/attributes":584,"../../components/fx/hovertemplate_attributes":615,"../../lib/extend":690,"../scatter/attributes":1051}],949:[function(a,t,m){var p=a("../../registry"),g=a("../../lib"),h=a("../../plots/cartesian/axes"),e=a("../histogram2d/calc"),n=a("../../components/colorscale/calc"),b=a("./convert_column_xyz"),
l=a("./clean_2d_array"),u=a("./interp2d"),q=a("./find_empties"),d=a("./make_bound_array");t.exports=function(a,c){function f(a){w=c._input.zsmooth=c.zsmooth=!1;g.warn('cannot use zsmooth: "fast": '+a)}var m=h.getFromId(a,c.xaxis||"x"),t=h.getFromId(a,c.yaxis||"y"),z=p.traceIs(c,"contour"),A=p.traceIs(c,"histogram"),y=p.traceIs(c,"gl2d"),w=z?"best":c.zsmooth,x;m._minDtick=0;t._minDtick=0;if(A){var F=e(a,c);var B=F.x;var C=F.x0;var D=F.dx;var G=F.y;var H=F.y0;var E=F.dy;var K=F.z}else if(K=c.z,g.isArray1D(K)?
(b(c,m,t,"x","y",["z"]),B=c._x,G=c._y,K=c._z):(B=c.x?m.makeCalcdata(c,"x"):[],G=c.y?t.makeCalcdata(c,"y"):[]),C=c.x0,D=c.dx,H=c.y0,E=c.dy,K=l(K,c.transpose),z||c.connectgaps)c._emptypoints=q(K),u(K,c._emptypoints);if("fast"===w)if("log"===m.type||"log"===t.type)f("log axis found");else if(!A){if(B.length){var I=(B[B.length-1]-B[0])/(B.length-1),J=Math.abs(I/100);for(x=0;x<B.length-1;x++)if(Math.abs(B[x+1]-B[x]-I)>J){f("x scale is not linear");break}}if(G.length&&"fast"===w)for(I=(G[G.length-1]-G[0])/
(G.length-1),J=Math.abs(I/100),x=0;x<G.length-1;x++)if(Math.abs(G[x+1]-G[x]-I)>J){f("y scale is not linear");break}}x=g.maxRowLength(K);B="scaled"===c.xtype?"":B;I=d(c,B,C,D,x,m);G="scaled"===c.ytype?"":G;J=d(c,G,H,E,K.length,t);y||(c._extremes[m._id]=h.findExtremes(m,I),c._extremes[t._id]=h.findExtremes(t,J));y={x:I,y:J,z:K,text:c._text||c.text,hovertext:c._hovertext||c.hovertext};B&&B.length===I.length-1&&(y.xCenter=B);G&&G.length===J.length-1&&(y.yCenter=G);A&&(y.xRanges=F.xRanges,y.yRanges=F.yRanges,
y.pts=F.pts);z&&"constraint"===c.contours.type||n(a,c,{vals:K,containerStr:"",cLetter:"z"});z&&c.contours&&"heatmap"===c.contours.coloring&&(a={type:"contour"===c.type?"heatmap":"histogram2d",xcalendar:c.xcalendar,ycalendar:c.ycalendar},y.xfill=d(a,B,C,D,x,m),y.yfill=d(a,G,H,E,K.length,t));return[y]}},{"../../components/colorscale/calc":585,"../../lib":700,"../../plots/cartesian/axes":748,"../../registry":829,"../histogram2d/calc":980,"./clean_2d_array":950,"./convert_column_xyz":952,"./find_empties":954,
"./interp2d":957,"./make_bound_array":958}],950:[function(a,t,m){var p=a("fast-isnumeric");t.exports=function(a,h){function e(a){if(p(a))return+a}var g,b;if(h){for(g=h=0;g<a.length;g++)h=Math.max(h,a[g].length);if(0===h)return!1;var l=function(a){return a.length};var m=function(a,b,d){return a[d][b]}}else h=a.length,l=function(a,b){return a[b].length},m=function(a,b,d){return a[b][d]};var q=Array(h);for(g=0;g<h;g++){var d=l(a,g);q[g]=Array(d);for(b=0;b<d;b++)q[g][b]=e(m(a,g,b))}return q}},{"fast-isnumeric":221}],
951:[function(a,t,m){t.exports={min:"zmin",max:"zmax"}},{}],952:[function(a,t,m){var p=a("../../lib"),g=a("../../constants/numerical").BADNUM;t.exports=function(a,e,n,b,l,m){var h=a._length;e=e.makeCalcdata(a,b);n=n.makeCalcdata(a,l);var d=a.text,f=void 0!==d&&p.isArray1D(d),c=a.hovertext,k=void 0!==c&&p.isArray1D(c),r,t,u=p.distinctVals(e),A=u.vals,y=p.distinctVals(n),w=y.vals,x=[],F,B;for(r=0;r<m.length;r++)x[r]=p.init2dArray(w.length,A.length);f&&(F=p.init2dArray(w.length,A.length));k&&(B=p.init2dArray(w.length,
A.length));for(r=0;r<h;r++)if(e[r]!==g&&n[r]!==g){var C=p.findBin(e[r]+u.minDiff/2,A),D=p.findBin(n[r]+y.minDiff/2,w);for(t=0;t<m.length;t++)x[t][D][C]=a[m[t]][r];f&&(F[D][C]=d[r]);k&&(B[D][C]=c[r])}a["_"+b]=A;a["_"+l]=w;for(t=0;t<m.length;t++)a["_"+m[t]]=x[t];f&&(a._text=F);k&&(a._hovertext=B)}},{"../../constants/numerical":677,"../../lib":700}],953:[function(a,t,m){var p=a("../../lib"),g=a("./xyz_defaults"),h=a("./style_defaults"),e=a("../../components/colorscale/defaults"),n=a("./attributes");
t.exports=function(a,l,m,q){function b(b,c){return p.coerce(a,l,n,b,c)}g(a,l,b,q)?(b("text"),b("hovertext"),b("hovertemplate"),h(a,l,b,q),b("connectgaps",p.isArray1D(l.z)&&!1!==l.zsmooth),e(a,l,q,b,{prefix:"",cLetter:"z"})):l.visible=!1}},{"../../components/colorscale/defaults":587,"../../lib":700,"./attributes":948,"./style_defaults":961,"./xyz_defaults":962}],954:[function(a,t,m){var p=a("../../lib").maxRowLength;t.exports=function(a){var g=[],e={},n=[],b=a[0],l=[],m=[0,0,0],q=p(a),d,f,c;for(d=
0;d<a.length;d++){var k=l;l=b;b=a[d+1]||[];for(f=0;f<q;f++)void 0===l[f]&&((c=(void 0!==l[f-1]?1:0)+(void 0!==l[f+1]?1:0)+(void 0!==k[f]?1:0)+(void 0!==b[f]?1:0))?(0===d&&c++,0===f&&c++,d===a.length-1&&c++,f===l.length-1&&c++,4>c&&(e[[d,f]]=[d,f,c]),g.push([d,f,c])):n.push([d,f]))}for(;n.length;){b={};l=!1;for(a=n.length-1;0<=a;a--){var r=n[a];d=r[0];f=r[1];if(c=((e[[d-1,f]]||m)[2]+(e[[d+1,f]]||m)[2]+(e[[d,f-1]]||m)[2]+(e[[d,f+1]]||m)[2])/20)b[r]=[d,f,c],n.splice(a,1),l=!0}if(!l)throw"findEmpties iterated with no new neighbors";
for(r in b)e[r]=b[r],g.push(b[r])}return g.sort(function(a,b){return b[2]-a[2]})}},{"../../lib":700}],955:[function(a,t,m){var p=a("../../components/fx"),g=a("../../lib"),h=a("../../plots/cartesian/axes");t.exports=function(a,n,b,l,m,q){l=a.cd[0];var d=l.trace;m=a.xa;var e=a.ya,c=l.x,k=l.y,r=l.z,t=l.xCenter,u=l.yCenter,A=l.zmask,y=[d.zmin,d.zmax],w=d.zhoverformat,x=c,F=k;if(!1!==a.index){try{var B=Math.round(a.index[1]);var C=Math.round(a.index[0])}catch(G){g.error("Error hovering on heatmap, pointNumber must be [row,col], found:",
a.index);return}if(0>B||B>=r[0].length||0>C||C>r.length)return}else{if(0<p.inbox(n-c[0],n-c[c.length-1],0)||0<p.inbox(b-k[0],b-k[k.length-1],0))return;if(q){x=[2*c[0]-c[1]];for(B=1;B<c.length;B++)x.push((c[B]+c[B-1])/2);x.push([2*c[c.length-1]-c[c.length-2]]);F=[2*k[0]-k[1]];for(B=1;B<k.length;B++)F.push((k[B]+k[B-1])/2);F.push([2*k[k.length-1]-k[k.length-2]])}B=Math.max(0,Math.min(x.length-2,g.findBin(n,x)));C=Math.max(0,Math.min(F.length-2,g.findBin(b,F)))}n=m.c2p(c[B]);b=m.c2p(c[B+1]);x=e.c2p(k[C]);
F=e.c2p(k[C+1]);q?(b=n,q=c[B],F=x,k=k[C]):(q=t?t[B]:(c[B]+c[B+1])/2,k=u?u[C]:(k[C]+k[C+1])/2,d.zsmooth&&(n=b=m.c2p(q),x=F=e.c2p(k)));d=r[C][B];A&&!A[C][B]&&(d=void 0);var D;Array.isArray(l.hovertext)&&Array.isArray(l.hovertext[C])?D=l.hovertext[C][B]:Array.isArray(l.text)&&Array.isArray(l.text[C])&&(D=l.text[C][B]);l=h.tickText({type:"linear",range:y,hoverformat:w,_separators:m._separators,_numFormat:m._numFormat},d,"hover");return[g.extendFlat(a,{index:[C,B],distance:a.maxHoverDistance,spikeDistance:a.maxSpikeDistance,
x0:n,x1:b,y0:x,y1:F,xLabelVal:q,yLabelVal:k,zLabelVal:d,zLabel:l.text,text:D})]}},{"../../components/fx":616,"../../lib":700,"../../plots/cartesian/axes":748}],956:[function(a,t,m){m={};m.attributes=a("./attributes");m.supplyDefaults=a("./defaults");m.calc=a("./calc");m.plot=a("./plot");m.colorbar=a("./colorbar");m.style=a("./style");m.hoverPoints=a("./hover");m.moduleType="trace";m.name="heatmap";m.basePlotModule=a("../../plots/cartesian");m.categories=["cartesian","svg","2dMap"];m.meta={};t.exports=
m},{"../../plots/cartesian":759,"./attributes":948,"./calc":949,"./colorbar":951,"./defaults":953,"./hover":955,"./plot":959,"./style":960}],957:[function(a,t,m){function p(a,g,b){var e=0,n,m,d,f,c,k;for(n=0;n<g.length;n++){var r=g[n];var p=r[0];r=r[1];var t=a[p][r];for(m=f=c=0;4>m;m++){var A=h[m];if(d=a[p+A[0]])if(A=d[r+A[1]],void 0!==A){if(0===c)var y=k=A;else y=Math.min(y,A),k=Math.max(k,A);f++;c+=A}}if(0===f)throw"iterateInterp2d order is wrong: no defined neighbors";a[p][r]=c/f;void 0===t?4>
f&&(e=1):(a[p][r]=(1+b)*a[p][r]-b*t,k>y&&(e=Math.max(e,Math.abs(a[p][r]-t)/(k-y))))}return e}var g=a("../../lib"),h=[[-1,0],[1,0],[0,-1],[0,1]];t.exports=function(a,h){var b=1,e;p(a,h);for(e=0;e<h.length&&!(4>h[e][2]);e++);h=h.slice(e);for(e=0;100>e&&.01<b;e++)b=p(a,h,.5-.25*Math.min(1,.5*b));.01<b&&g.log("interp2d didn't converge quickly",b);return a}},{"../../lib":700}],958:[function(a,t,m){var p=a("../../registry"),g=a("../../lib").isArrayOrTypedArray;t.exports=function(a,e,n,b,l,m){var h=[],d=
p.traceIs(a,"contour"),f=p.traceIs(a,"histogram"),c=p.traceIs(a,"gl2d");if(g(e)&&1<e.length&&!f&&"category"!==m.type)if(b=e.length,b<=l){if(d||c)h=e.slice(0,l);else if(1===l)h=[e[0]-.5,e[0]+.5];else{h=[1.5*e[0]-.5*e[1]];for(d=1;d<b;d++)h.push(.5*(e[d-1]+e[d]));h.push(1.5*e[b-1]-.5*e[b-2])}if(b<l)for(c=h[h.length-1],e=c-h[h.length-2],d=b;d<l;d++)c+=e,h.push(c)}else return d?e.slice(0,l):e.slice(0,l+1);else for(a=a[m._id.charAt(0)+"calendar"],e=g(e)&&1===e.length?e[0]:void 0===n?0:f||"category"===m.type||
"multicategory"===m.type?m.r2c(n,0,a):m.d2c(n,0,a),b=b||1,d=d||c?0:-.5;d<l;d++)h.push(e+b*d);return h}},{"../../lib":700,"../../registry":829}],959:[function(a,t,m){function p(a,b){var c=b.length-2,d=l.constrain(l.findBin(a,b),0,c),e=b[d];a=l.constrain(d+(a-e)/(b[d+1]-e)-.5,0,c);b=Math.round(a);d=Math.abs(a-b);return a&&a!==c&&d?{bin0:b,frac:d,bin1:Math.round(b+d/(a-b))}:{bin0:b,bin1:b,frac:0}}function g(a,b){var c=b.length-1;c=l.constrain(l.findBin(a,b),0,c);var d=b[c];a=(a-d)/(b[c+1]-d)||0;return 0>=
a?{bin0:c,bin1:c,frac:0}:.5>a?{bin0:c,bin1:c+1,frac:a}:{bin0:c+1,bin1:c,frac:1-a}}function h(a,b,c){a[b]=c[0];a[b+1]=c[1];a[b+2]=c[2];a[b+3]=Math.round(255*c[3])}var e=a("d3"),n=a("tinycolor2"),b=a("../../registry"),l=a("../../lib"),u=a("../../components/colorscale"),q=a("../../constants/xmlns_namespaces");t.exports=function(a,f,c,k){var d=f.xaxis,m=f.yaxis;l.makeTraceGroups(k,c,"hm").each(function(c){function f(a,b){return void 0!==a?(a=da(a),a[0]=Math.round(a[0]),a[1]=Math.round(a[1]),a[2]=Math.round(a[2]),
Y+=b,W+=a[0]*b,ea+=a[1]*b,U+=a[2]*b,a):[0,0,0,0]}function k(a,b,c,d){var e=a[c.bin0];if(void 0===e)return f(void 0,1);a=a[c.bin1];var g=b[c.bin0];b=b[c.bin1];return f(e+c.frac*(a-e||0)+d.frac*((g-e||0)+c.frac*(void 0===a?void 0===b?0:void 0===g?2*(b-e):2*(2*b-g-e)/3:void 0===b?void 0===g?0:2*(2*e-a-g)/3:void 0===g?2*(2*b-a-e)/3:b+e-a-g)))}var r=e.select(this),t=c[0],v=t.trace,z=t.z,C=t.x,D=t.y,G=t.xCenter,H=t.yCenter,E=b.traceIs(v,"contour"),K=E?"best":v.zsmooth,I=z.length,J=l.maxRowLength(z),L=!1,
M=!1,N;for(N=0;void 0===O&&N<C.length-1;){var O=d.c2p(C[N]);N++}for(N=C.length-1;void 0===R&&0<N;){var R=d.c2p(C[N]);N--}R<O&&(N=R,R=O,O=N,L=!0);for(N=0;void 0===T&&N<D.length-1;){var T=m.c2p(D[N]);N++}for(N=D.length-1;void 0===P&&0<N;){var P=m.c2p(D[N]);N--}P<T&&(N=T,T=P,P=N,M=!0);E&&(G=C,H=D,C=t.xfill,D=t.yfill);"fast"!==K&&(N="best"===K?0:.5,O=Math.max(-N*d._length,O),R=Math.min((1+N)*d._length,R),T=Math.max(-N*m._length,T),P=Math.min((1+N)*m._length,P));var S=Math.round(R-O),ba=Math.round(P-T);
if(0>=S||0>=ba)r.selectAll("image").data([]).exit().remove();else{"fast"===K?(P=J,N=I):(P=S,N=ba);R=document.createElement("canvas");R.width=P;R.height=N;P=R.getContext("2d");var da=u.makeColorScaleFunc(u.extractScale(v,{cLetter:"z"}),{noNumericCheck:!0,returnArray:!0});"fast"===K?(t=L?function(a){return J-1-a}:l.identity,E=M?function(a){return I-1-a}:l.identity):(t=function(a){return l.constrain(Math.round(d.c2p(C[a])-O),0,S)},E=function(a){return l.constrain(Math.round(m.c2p(D[a])-T),0,ba)});N=
E(0);var ca=[N,N];L=L?0:1;M=M?0:1;var Y=0,W=0,ea=0,U=0;if(K){v=0;try{var na=new Uint8Array(S*ba*4)}catch(oa){na=Array(S*ba*4)}if("best"===K){K=G||C;L=H||D;M=Array(K.length);t=Array(L.length);E=Array(S);G=G?g:p;ca=H?g:p;for(N=0;N<K.length;N++)M[N]=Math.round(d.c2p(K[N])-O);for(N=0;N<L.length;N++)t[N]=Math.round(m.c2p(L[N])-T);for(N=0;N<S;N++)E[N]=G(N,M);for(H=0;H<ba;H++)for(K=ca(H,t),L=z[K.bin0],M=z[K.bin1],N=0;N<S;N++,v+=4)G=k(L,M,E[N],K),h(na,v,G)}else for(H=0;H<I;H++)for(K=z[H],ca=E(H),N=0;N<S;N++)G=
f(K[N],1),v=4*(ca*S+t(N)),h(na,v,G);z=P.createImageData(S,ba);try{z.data.set(na)}catch(oa){for(N=z.data,G=N.length,H=0;H<G;H++)N[H]=na[H]}P.putImageData(z,0,0)}else{na=v.xgap;v=v.ygap;var X=Math.floor(na/2),ha=Math.floor(v/2);for(H=0;H<I;H++)if(K=z[H],ca.reverse(),ca[M]=E(H+1),ca[0]!==ca[1]&&void 0!==ca[0]&&void 0!==ca[1]){N=t(0);var fa=[N,N];for(N=0;N<J;N++)fa.reverse(),fa[L]=t(N+1),fa[0]!==fa[1]&&void 0!==fa[0]&&void 0!==fa[1]&&(G=K[N],G=f(G,(fa[1]-fa[0])*(ca[1]-ca[0])),P.fillStyle="rgba("+G.join(",")+
")",P.fillRect(fa[0]+X,ca[0]+ha,fa[1]-fa[0]-na,ca[1]-ca[0]-v))}}W=Math.round(W/Y);ea=Math.round(ea/Y);U=Math.round(U/Y);z=n("rgb("+W+","+ea+","+U+")");a._hmpixcount=(a._hmpixcount||0)+Y;a._hmlumcount=(a._hmlumcount||0)+Y*z.getLuminance();c=r.selectAll("image").data(c);c.enter().append("svg:image").attr({xmlns:q.svg,preserveAspectRatio:"none"});c.attr({height:ba,width:S,x:O,y:T,"xlink:href":R.toDataURL("image/png")})}})}},{"../../components/colorscale":589,"../../constants/xmlns_namespaces":678,"../../lib":700,
"../../registry":829,d3:154,tinycolor2:521}],960:[function(a,t,m){var p=a("d3");t.exports=function(a){p.select(a).selectAll(".hm image").style("opacity",function(a){return a.trace.opacity})}},{d3:154}],961:[function(a,t,m){t.exports=function(a,g,h){!1===h("zsmooth")&&(h("xgap"),h("ygap"));h("zhoverformat")}},{}],962:[function(a,t,m){function p(a,b){var e=b(a);"scaled"===(e?b(a+"type","array"):"scaled")&&(b(a+"0"),b("d"+a));return e}var g=a("fast-isnumeric"),h=a("../../lib"),e=a("../../registry");
t.exports=function(a,b,l,m,q,d){var f=l("z");q=q||"x";d=d||"y";if(void 0===f||!f.length)return 0;if(h.isArray1D(a.z)){var c=l(q);l=l(d);c=h.minRowLength(c);l=h.minRowLength(l);if(0===c||0===l)return 0;b._length=Math.min(c,l,f.length)}else{p(q,l);p(d,l);c=!0;for(var k=!1,n=!1,t,u=0;u<f.length;u++){t=f[u];if(!h.isArrayOrTypedArray(t)){c=!1;break}0<t.length&&(k=!0);for(var A=0;A<t.length;A++)if(g(t[A])){n=!0;break}}if(!(c&&k&&n))return 0;l("transpose");b._length=null}e.getComponentMethod("calendars",
"handleTraceDefaults")(a,b,[q,d],m);return!0}},{"../../lib":700,"../../registry":829,"fast-isnumeric":221}],963:[function(a,t,m){m=a("../heatmap/attributes");var p=a("../../components/colorscale/attributes"),g=a("../../components/colorbar/attributes"),h=a("../../lib/extend").extendFlat;a=a("../../plot_api/edit_types").overrideAll;for(var e="z x x0 dx y y0 dy text transpose xtype ytype".split(" "),n={},b=0;b<e.length;b++){var l=e[b];n[l]=m[l]}h(n,p("",{cLetter:"z",autoColorDflt:!1}),{colorbar:g});
t.exports=a(n,"calc","nested")},{"../../components/colorbar/attributes":578,"../../components/colorscale/attributes":584,"../../lib/extend":690,"../../plot_api/edit_types":731,"../heatmap/attributes":948}],964:[function(a,t,m){function p(a,b){this.scene=a;this.uid=b;this.type="heatmapgl";this.name="";this.hoverinfo="all";this.xData=[];this.yData=[];this.zData=[];this.textLabels=[];this.idToIndex=[];this.bounds=[0,0,0,0];this.options={z:[],x:[],y:[],shape:[0,0],colorLevels:[0],colorValues:[0,0,0,1]};
this.heatmap=g(a.glplot,this.options);this.heatmap._trace=this}var g=a("gl-heatmap2d"),h=a("../../plots/cartesian/axes"),e=a("../../lib/str2rgbarray");a=p.prototype;a.handlePick=function(a){var b=this.options,e=b.shape,g=a.pointId,h=g%e[0];e=Math.floor(g/e[0]);return{trace:this,dataCoord:a.dataCoord,traceCoord:[b.x[h],b.y[e],b.z[g]],textLabel:this.textLabels[g],name:this.name,pointIndex:[e,h],hoverinfo:this.hoverinfo}};a.update=function(a,b){b=b[0];this.index=a.index;this.name=a.name;this.hoverinfo=
a.hoverinfo;var g=b.z;this.options.z=[].concat.apply([],g);this.options.shape=[g[0].length,g.length];this.options.x=b.x;this.options.y=b.y;g=a.colorscale;for(var n=a.zmin,m=a.zmax,d=g.length,f=Array(d),c=Array(4*d),k=0;k<d;k++){var r=g[k],p=e(r[1]);f[k]=n+r[0]*(m-n);for(r=0;4>r;r++)c[4*k+r]=p[r]}this.options.colorLevels=f;this.options.colorValues=c;this.textLabels=[].concat.apply([],a.text);this.heatmap.update(this.options);g=this.scene.xaxis;n=this.scene.yaxis;a._extremes[g._id]=h.findExtremes(g,
b.x);a._extremes[n._id]=h.findExtremes(n,b.y)};a.dispose=function(){this.heatmap.dispose()};t.exports=function(a,b,e){a=new p(a,b.uid);a.update(b,e);return a}},{"../../lib/str2rgbarray":723,"../../plots/cartesian/axes":748,"gl-heatmap2d":247}],965:[function(a,t,m){m={};m.attributes=a("./attributes");m.supplyDefaults=a("../heatmap/defaults");m.colorbar=a("../heatmap/colorbar");m.calc=a("../heatmap/calc");m.plot=a("./convert");m.moduleType="trace";m.name="heatmapgl";m.basePlotModule=a("../../plots/gl2d");
m.categories=["gl","gl2d","2dMap"];m.meta={};t.exports=m},{"../../plots/gl2d":787,"../heatmap/calc":949,"../heatmap/colorbar":951,"../heatmap/defaults":953,"./attributes":963,"./convert":964}],966:[function(a,t,m){m=a("../bar/attributes");var p=a("../../components/fx/hovertemplate_attributes"),g=a("./bin_attributes"),h=a("./constants");a=a("../../lib/extend").extendFlat;t.exports={x:{valType:"data_array",editType:"calc+clearAxisTypes"},y:{valType:"data_array",editType:"calc+clearAxisTypes"},text:a({},
m.text,{}),hovertext:a({},m.hovertext,{}),orientation:m.orientation,histfunc:{valType:"enumerated",values:["count","sum","avg","min","max"],dflt:"count",editType:"calc"},histnorm:{valType:"enumerated",values:["","percent","probability","density","probability density"],dflt:"",editType:"calc"},cumulative:{enabled:{valType:"boolean",dflt:!1,editType:"calc"},direction:{valType:"enumerated",values:["increasing","decreasing"],dflt:"increasing",editType:"calc"},currentbin:{valType:"enumerated",values:["include",
"exclude","half"],dflt:"include",editType:"calc"},editType:"calc"},nbinsx:{valType:"integer",min:0,dflt:0,editType:"calc"},xbins:g("x",!0),nbinsy:{valType:"integer",min:0,dflt:0,editType:"calc"},ybins:g("y",!0),autobinx:{valType:"boolean",dflt:null,editType:"calc"},autobiny:{valType:"boolean",dflt:null,editType:"calc"},hovertemplate:p({},{keys:h.eventDataKeys}),marker:m.marker,offsetgroup:m.offsetgroup,alignmentgroup:m.alignmentgroup,selected:m.selected,unselected:m.unselected,_deprecated:{bardir:m._deprecated.bardir}}},
{"../../components/fx/hovertemplate_attributes":615,"../../lib/extend":690,"../bar/attributes":839,"./bin_attributes":968,"./constants":972}],967:[function(a,t,m){t.exports=function(a,g){for(var h=a.length,e=0,n=0;n<h;n++)g[n]?(a[n]/=g[n],e+=a[n]):a[n]=null;return e}},{}],968:[function(a,t,m){t.exports=function(a,g){return{start:{valType:"any",editType:"calc"},end:{valType:"any",editType:"calc"},size:{valType:"any",editType:"calc"},editType:"calc"}}},{}],969:[function(a,t,m){var p=a("fast-isnumeric");
t.exports={count:function(a,h,e){e[a]++;return 1},sum:function(a,h,e,n){h=n[h];return p(h)?(h=Number(h),e[a]+=h,h):0},avg:function(a,h,e,n,b){h=n[h];p(h)&&(h=Number(h),e[a]+=h,b[a]++);return 0},min:function(a,h,e,n){h=n[h];if(p(h)){h=Number(h);if(!p(e[a]))return e[a]=h;if(e[a]>h)return n=h-e[a],e[a]=h,n}return 0},max:function(a,h,e,n){h=n[h];if(p(h)){h=Number(h);if(!p(e[a]))return e[a]=h;if(e[a]<h)return n=h-e[a],e[a]=h,n}return 0}}},{"fast-isnumeric":221}],970:[function(a,t,m){function p(a,c,d,l){if(0>=
a*c)return Infinity;for(var f="date"===d.type,k=g(Math.abs(c-a),f),n=0;10>n;n++){var m=g(80*k,f);if(k===m)break;var r=m;var q=a,p=c,t=d,u=l;f&&r>b?(q=h(q,t,u),p=h(p,t,u),r=r===e?0:1,r=q[r]!==p[r]):r=.1<Math.floor(p/r)-Math.floor(q/r);if(r)k=m;else break}return k}function g(a,c){return c&&a>q?a>b?a>1.1*e?e:a>1.1*n?n:b:a>l?l:a>u?u:q:Math.pow(10,Math.floor(Math.log(a)/Math.LN10))}function h(a,b,d){a=b.c2d(a,e,d).split("-");""===a[0]&&(a.unshift(),a[0]="-"+a[0]);return a}m=a("../../constants/numerical");
var e=m.ONEAVGYEAR,n=m.ONEAVGMONTH,b=m.ONEDAY,l=m.ONEHOUR,u=m.ONEMIN,q=m.ONESEC,d=a("../../plots/cartesian/axes").tickIncrement;t.exports=function(a,c,g,h,l){var f=-1.1*c,k=-.1*c,n=a-k;c=g[0];g=g[1];n=Math.min(p(c+k,c+n,h,l),p(g+k,g+n,h,l));f=Math.min(p(c+f,c+k,h,l),p(g+f,g+k,h,l));if(n>f&&f<Math.abs(g-c)/4E3){var m=n;var r=!1}else m=Math.min(n,f),r=!0;if("date"===h.type&&m>b){var q=m===e?1:6,t=m===e?"M12":"M1";return function(b,c){var f=h.c2d(b,e,l),g=f.indexOf("-",q);0<g&&(f=f.substr(0,g));f=h.d2c(f,
0,l);f<b&&(g=d(f,t,!1,l),(f+g)/2<b+a&&(f=g));return c&&r?d(f,t,!0,l):f}}return function(b,c){var d=m*Math.round(b/m);d+m/10<b&&d+.9*m<b+a&&(d+=m);c&&r&&(d-=m);return d}}},{"../../constants/numerical":677,"../../plots/cartesian/axes":748}],971:[function(a,t,m){function p(a,d,f,h,l){function c(a,b,c){b[a+"Found"]?(b[a]=p(b[a]),null===b[a]&&(b[a]=c[a])):(z[a]=b[a]=c[a],n.nestedProperty(t[0],k+"."+a).set(c[a]))}var k=h+"bins",m=a._fullLayout,r="overlay"===m.barmode,q,p="date"===f.type?function(a){return a||
0===a?n.cleanDate(a,null,f.calendar):null}:function(a){return e(a)?Number(a):null};m=m._histogramBinOpts[d._groupName];if(d._autoBinFinished)delete d._autoBinFinished;else{var t=m.traces;var u=m.sizeFound,v=[];var z=t[0]._autoBin={};var E=!0;for(q=0;q<t.length;q++){var K=t[q];if(K.visible){var I=K._pos0=f.makeCalcdata(K,h);v=n.concat(v,I);delete K._autoBinFinished;!0===d.visible&&(E?E=!1:(delete K._autoBin,K._autoBinFinished=1))}}q=t[0][h+"calendar"];v=b.autoBin(v,f,m.nbins,!1,q,u&&m.size);if(r&&
0===v._dataSpan&&"category"!==f.type&&"multicategory"!==f.type){if(l)return[v,I,!0];v=g(a,d,f,h,k)}I=K.cumulative;I.enabled&&"include"!==I.currentbin&&("decreasing"===I.direction?v.start=f.c2r(b.tickIncrement(f.r2c(v.start,0,q),v.size,!0,q)):v.end=f.c2r(b.tickIncrement(f.r2c(v.end,0,q),v.size,!1,q)));m.size=v.size;u||(z.size=v.size,n.nestedProperty(t[0],k+".size").set(v.size));c("start",m,v);c("end",m,v)}I=d._pos0;delete d._pos0;l=d._input[k]||{};a=n.extendFlat({},m);u=m.start;K=f.r2l(l.start);r=
void 0!==K;(m.startFound||r)&&K!==f.r2l(u)&&(K=r?K:n.aggNums(Math.min,null,I),u={type:"category"===f.type||"multicategory"===f.type?"linear":f.type,r2l:f.r2l,dtick:m.size,tick0:u,calendar:q,range:[K,b.tickIncrement(K,m.size,!1,q)].map(f.l2r)},u=b.tickFirst(u),u>f.r2l(K)&&(u=b.tickIncrement(u,m.size,!0,q)),a.start=f.l2r(u),r||n.nestedProperty(d,k+".start").set(a.start));q=m.end;r=f.r2l(l.end);l=void 0!==r;(m.endFound||l)&&r!==f.r2l(q)&&(m=l?r:n.aggNums(Math.max,null,I),a.end=f.l2r(m),l||n.nestedProperty(d,
k+".start").set(a.end));h="autobin"+h;!1===d._input[h]&&(d._input[k]=n.extendFlat({},d[k]||{}),delete d._input[h],delete d[h]);return[a,I]}function g(a,b,d,e,f){for(var c=b.xaxis,g=b.yaxis,h=b.orientation,k=[],l=a._fullData,m=0;m<l.length;m++){var r=l[m];"histogram"===r.type&&!0===r.visible&&r.orientation===h&&r.xaxis===c&&r.yaxis===g&&k.push(r)}m=!1;c=Infinity;g=[b];for(h=0;h<k.length;h++)if(l=k[h],l===b)m=!0;else if(m){r=p(a,l,d,e,!0);var q=r[0],t=r[2];l._autoBinFinished=1;l._pos0=r[1];t?g.push(l):
c=Math.min(c,q.size)}else c=Math.min(c,l[f].size);a=Array(g.length);for(h=0;h<g.length;h++)for(k=g[h]._pos0,l=0;l<k.length;l++)if(void 0!==k[l]){a[h]=k[l];break}isFinite(c)||(c=n.distinctVals(a).minDiff);for(h=0;h<g.length;h++)l=g[h],k=l[e+"calendar"],l._input[f]=l[f]={start:d.c2r(a[h]-c/2,0,k),end:d.c2r(a[h]+c/2,0,k),size:c};return b[f]}function h(a,b,d){function c(b){g=a[b];a[b]/=2}function e(b){f=a[b];a[b]=g+f/2;g+=f}var f,g;if("half"===d)if("increasing"===b)for(c(0),b=1;b<a.length;b++)e(b);else for(c(a.length-
1),b=a.length-2;0<=b;b--)e(b);else if("increasing"===b){for(b=1;b<a.length;b++)a[b]+=a[b-1];"exclude"===d&&(a.unshift(0),a.pop())}else{for(b=a.length-2;0<=b;b--)a[b]+=a[b+1];"exclude"===d&&(a.push(0),a.shift())}}var e=a("fast-isnumeric"),n=a("../../lib"),b=a("../../plots/cartesian/axes"),l=a("../bar/arrays_to_calcdata"),u=a("./bin_functions"),q=a("./norm_functions"),d=a("./average"),f=a("./bin_label_vals");t.exports=function(a,g){if(!0===g.visible){var c=[],k=[],m=b.getFromId(a,"h"===g.orientation?
g.yaxis||"y":g.xaxis||"x"),t="h"===g.orientation?"y":"x",y={x:"y",y:"x"}[t],w=g[t+"calendar"],x=g.cumulative;t=p(a,g,m,t);a=t[0];t=t[1];var F="string"===typeof a.size,B=[],C=F?B:a,D=[],G=[],H=[],E=0,K=g.histnorm,I=g.histfunc,J=-1!==K.indexOf("density"),L;x.enabled&&J&&(K=K.replace(/ ?density$/,""),J=!1);var M="max"===I||"min"===I?null:0;var N=u.count;K=q[K];var O=!1;if(n.isArrayOrTypedArray(g[y])&&"count"!==I){var R=g[y];O="avg"===I;N=u[I]}y=m.r2c(a.start,0,w);for(L=m.r2c(a.end,0,w)+(y-b.tickIncrement(y,
a.size,!1,w))/1E6;y<L&&1E6>c.length;){I=b.tickIncrement(y,a.size,!1,w);c.push((y+I)/2);k.push(M);H.push([]);B.push(y);J&&D.push(1/(I-y));O&&G.push(0);if(I<=y)break;y=I}B.push(y);F||"date"!==m.type||(C={start:m.r2c(C.start,0,w),end:m.r2c(C.end,0,w),size:C.size});I=k.length;F=!0;var T=L=Infinity;J={};for(y=0;y<t.length;y++){var P=t[y];M=n.findBin(P,C);0<=M&&M<I&&(E+=N(M,y,k,R,G),F&&H[M].length&&P!==t[H[M][0]]&&(F=!1),H[M].push(y),J[y]=M,L=Math.min(L,P-B[M]),T=Math.min(T,B[M+1]-P))}var S;F||(S=f(L,T,
B,m,w));O&&(E=d(k,G));K&&K(k,E,D);x.enabled&&h(k,x.direction,x.currentbin);C=Math.min(c.length,k.length);m=[];D=0;R=C-1;for(y=0;y<C;y++)if(k[y]){D=y;break}for(y=C-1;y>=D;y--)if(k[y]){R=y;break}for(y=D;y<=R;y++)e(c[y])&&e(k[y])&&(C={p:c[y],s:k[y],b:0},x.enabled||(C.pts=H[y],F?C.ph0=C.ph1=H[y].length?t[H[y][0]]:c[y]:(C.ph0=S(B[y]),C.ph1=S(B[y+1],!0))),m.push(C));1===m.length&&(m[0].width1=b.tickIncrement(m[0].p,a.size,!1,w)-m[0].p);l(m,g);n.isArrayOrTypedArray(g.selectedpoints)&&n.tagSelected(m,g,J);
return m}}},{"../../lib":700,"../../plots/cartesian/axes":748,"../bar/arrays_to_calcdata":838,"./average":967,"./bin_functions":969,"./bin_label_vals":970,"./norm_functions":978,"fast-isnumeric":221}],972:[function(a,t,m){t.exports={eventDataKeys:["binNumber"]}},{}],973:[function(a,t,m){var p=a("../../lib"),g=p.nestedProperty,h=a("../bar/defaults").handleGroupingDefaults,e=a("../../plots/cartesian/axis_ids").getAxisGroup,n=a("./attributes"),b={x:[{aStr:"xbins.start",name:"start"},{aStr:"xbins.end",
name:"end"},{aStr:"xbins.size",name:"size"},{aStr:"nbinsx",name:"nbins"}],y:[{aStr:"ybins.start",name:"start"},{aStr:"ybins.end",name:"end"},{aStr:"ybins.size",name:"size"},{aStr:"nbinsy",name:"nbins"}]};t.exports=function(a,m){function l(a){return p.coerce(r._input,r,n,a)}var d=m._histogramBinOpts={},f="overlay"===m.barmode,c,k;for(c=0;c<a.length;c++){var r=a[c];if("histogram"===r.type){delete r._autoBinFinished;var t="v"===r.orientation?"x":"y";var u=r._groupName=f?r.uid:e(m,r.xaxis)+e(m,r.yaxis)+
t;(k=d[u])?k.traces.push(r):k=d[u]={traces:[r],direction:t};h(r._input,r,m,l)}}for(u in d)for(k=d[u],t=k.direction,m=b[t],a=0;a<m.length;a++)if(c=m[a],f=c.name,"nbins"!==f||!k.sizeFound){t=c.aStr;for(c=0;c<k.traces.length;c++){r=k.traces[c];var A=r._input;if(void 0!==g(A,t).get()){k[f]=l(t);k[f+"Found"]=!0;break}(A=r._autoBin)&&A[f]&&g(r,t).set(A[f])}if("start"===f||"end"===f)for(;c<k.traces.length;c++)r=k.traces[c],l(t,(r._autoBin||{})[f]);"nbins"!==f||k.sizeFound||k.nbinsFound||(r=k.traces[0],k[f]=
l(t))}}},{"../../lib":700,"../../plots/cartesian/axis_ids":751,"../bar/defaults":843,"./attributes":966}],974:[function(a,t,m){var p=a("../../registry"),g=a("../../lib"),h=a("../../components/color"),e=a("../bar/style_defaults"),n=a("./attributes");t.exports=function(a,l,m,q){function b(b,c){return g.coerce(a,l,n,b,c)}var f=b("x"),c=b("y");b("cumulative.enabled")&&(b("cumulative.direction"),b("cumulative.currentbin"));b("text");b("hovertext");b("hovertemplate");var k=b("orientation",c&&!f?"h":"v"),
r="v"===k?"x":"y";k="v"===k?"y":"x";(f=f&&c?Math.min(g.minRowLength(f)&&g.minRowLength(c)):g.minRowLength(l[r]||[]))?(l._length=f,p.getComponentMethod("calendars","handleTraceDefaults")(a,l,["x","y"],q),l[k]&&b("histfunc"),b("histnorm"),b("autobin"+r),e(a,l,b,m,q),g.coerceSelectionMarkerOpacity(l,b),m=(l.marker.line||{}).color,q=p.getComponentMethod("errorbars","supplyDefaults"),q(a,l,m||h.defaultLine,{axis:"y"}),q(a,l,m||h.defaultLine,{axis:"x",inherit:"y"})):l.visible=!1}},{"../../components/color":577,
"../../lib":700,"../../registry":829,"../bar/style_defaults":853,"./attributes":966}],975:[function(a,t,m){t.exports=function(a,g,h,e,n){a.x="xVal"in g?g.xVal:g.x;a.y="yVal"in g?g.yVal:g.y;"zLabelVal"in g&&(a.z=g.zLabelVal);g.xa&&(a.xaxis=g.xa);g.ya&&(a.yaxis=g.ya);if(!(h.cumulative||{}).enabled){g=Array.isArray(n)?e[0].pts[n[0]][n[1]]:e[n].pts;a.pointNumbers=g;a.binNumber=a.pointNumber;delete a.pointNumber;delete a.pointIndex;if(h._indexToPoints)for(e=[],n=0;n<g.length;n++)e=e.concat(h._indexToPoints[g[n]]);
else e=g;a.pointIndices=e}return a}},{}],976:[function(a,t,m){var p=a("../bar/hover").hoverPoints,g=a("../../plots/cartesian/axes").hoverLabelText;t.exports=function(a,e,n,b){if(e=p(a,e,n,b)){a=e[0];n=a.cd[a.index];b=a.cd[0].trace;if(!b.cumulative.enabled){var h="h"===b.orientation?"y":"x";a[h+"Label"]=g(a[h+"a"],n.ph0,n.ph1)}b.hovermplate&&(a.hovertemplate=b.hovertemplate);return e}}},{"../../plots/cartesian/axes":748,"../bar/hover":845}],977:[function(a,t,m){m={};m.attributes=a("./attributes");
m.layoutAttributes=a("../bar/layout_attributes");m.supplyDefaults=a("./defaults");m.crossTraceDefaults=a("./cross_trace_defaults");m.supplyLayoutDefaults=a("../bar/layout_defaults");m.calc=a("./calc");m.crossTraceCalc=a("../bar/cross_trace_calc").crossTraceCalc;m.plot=a("../bar/plot");m.layerName="barlayer";m.style=a("../bar/style").style;m.styleOnSelect=a("../bar/style").styleOnSelect;m.colorbar=a("../scatter/marker_colorbar");m.hoverPoints=a("./hover");m.selectPoints=a("../bar/select");m.eventData=
a("./event_data");m.moduleType="trace";m.name="histogram";m.basePlotModule=a("../../plots/cartesian");m.categories="cartesian svg bar histogram oriented errorBarsOK showLegend".split(" ");m.meta={};t.exports=m},{"../../plots/cartesian":759,"../bar/cross_trace_calc":842,"../bar/layout_attributes":847,"../bar/layout_defaults":848,"../bar/plot":849,"../bar/select":850,"../bar/style":852,"../scatter/marker_colorbar":1069,"./attributes":966,"./calc":971,"./cross_trace_defaults":973,"./defaults":974,"./event_data":975,
"./hover":976}],978:[function(a,t,m){t.exports={percent:function(a,g){var h=a.length;g=100/g;for(var e=0;e<h;e++)a[e]*=g},probability:function(a,g){for(var h=a.length,e=0;e<h;e++)a[e]/=g},density:function(a,g,h,e){g=a.length;e=e||1;for(var n=0;n<g;n++)a[n]=a[n]*h[n]*e},"probability density":function(a,g,h,e){var n=a.length;e&&(g/=e);for(e=0;e<n;e++)a[e]*=h[e]/g}}},{}],979:[function(a,t,m){m=a("../histogram/attributes");var p=a("../histogram/bin_attributes"),g=a("../heatmap/attributes"),h=a("../../components/fx/hovertemplate_attributes"),
e=a("../../components/colorscale/attributes"),n=a("../../components/colorbar/attributes");a=a("../../lib/extend").extendFlat;t.exports=a({x:m.x,y:m.y,z:{valType:"data_array",editType:"calc"},marker:{color:{valType:"data_array",editType:"calc"},editType:"calc"},histnorm:m.histnorm,histfunc:m.histfunc,nbinsx:m.nbinsx,xbins:p("x"),nbinsy:m.nbinsy,ybins:p("y"),autobinx:m.autobinx,autobiny:m.autobiny,xgap:g.xgap,ygap:g.ygap,zsmooth:g.zsmooth,zhoverformat:g.zhoverformat,hovertemplate:h({},{keys:"z"})},
e("",{cLetter:"z",autoColorDflt:!1}),{colorbar:n})},{"../../components/colorbar/attributes":578,"../../components/colorscale/attributes":584,"../../components/fx/hovertemplate_attributes":615,"../../lib/extend":690,"../heatmap/attributes":948,"../histogram/attributes":966,"../histogram/bin_attributes":968}],980:[function(a,t,m){function p(a,c,d,e,g,h,l){var f=c+"bins",k=a[f];k||(k=a[f]={});var m=a._input[f]||{},r=a._autoBin={};m.size||delete k.size;void 0===m.start&&delete k.start;void 0===m.end&&
delete k.end;m=!k.size;var q=void 0===k.start,p=void 0===k.end;if(m||q||p)d=b.autoBin(d,e,a["nbins"+c],"2d",l,k.size),"histogram2dcontour"===a.type&&(q&&(d.start=h(b.tickIncrement(g(d.start),d.size,!0,l))),p&&(d.end=h(b.tickIncrement(g(d.end),d.size,!1,l)))),m&&(k.size=r.size=d.size),q&&(k.start=r.start=d.start),p&&(k.end=r.end=d.end);c="autobin"+c;!1===a._input[c]&&(a._input[f]=n.extendFlat({},k),delete a._input[c],delete a[c])}function g(a,b,d,e){var c=Array(a);if(e)for(d=0;d<a;d++)c[d]=1/(b[d+
1]-b[d]);else for(b=1/d,d=0;d<a;d++)c[d]=b;return c}function h(a,b){return{start:a(b.start),end:a(b.end),size:b.size}}function e(a,b,e,g,h,l){var c=a.length-1,f=Array(c);if(b)for(e=0;e<c;e++)f[e]=[b[e],b[e]];else for(b=d(e,g,a,h,l),e=0;e<c;e++)f[e]=[b(a[e]),b(a[e+1],!0)];return f}var n=a("../../lib"),b=a("../../plots/cartesian/axes"),l=a("../histogram/bin_functions"),u=a("../histogram/norm_functions"),q=a("../histogram/average"),d=a("../histogram/bin_label_vals");t.exports=function(a,c){var d=b.getFromId(a,
c.xaxis||"x"),f=c.x?d.makeCalcdata(c,"x"):[],m=b.getFromId(a,c.yaxis||"y");a=c.y?m.makeCalcdata(c,"y"):[];var t=c.xcalendar,A=c.ycalendar,y=function(a){return d.r2c(a,0,t)},w=function(a){return m.r2c(a,0,A)},x=function(a){return d.c2r(a,0,t)},F=function(a){return m.c2r(a,0,A)},B,C=c._length;f.length>C&&f.splice(C,f.length-C);a.length>C&&a.splice(C,a.length-C);p(c,"x",f,d,y,x,t);p(c,"y",a,m,w,F,A);var D=[],G=[],H=[],E="string"===typeof c.xbins.size,K="string"===typeof c.ybins.size,I=[],J=[],L=E?I:
c.xbins,M=K?J:c.ybins,N=0,O=[],R=[],T=c.histnorm;var P=c.histfunc;var S=-1!==T.indexOf("density"),ba="max"===P||"min"===P?null:0,da=l.count;T=u[T];var ca=!1,Y=[],W=[],ea="z"in c?c.z:"marker"in c&&Array.isArray(c.marker.color)?c.marker.color:"";ea&&"count"!==P&&(ca="avg"===P,da=l[P]);var U=c.xbins;P=y(U.start);for(var na=y(U.end)+(P-b.tickIncrement(P,U.size,!1,t))/1E6;P<na;P=b.tickIncrement(P,U.size,!1,t))G.push(ba),I.push(P),ca&&H.push(0);I.push(P);ba=G.length;U=y(c.xbins.start);var X=(P-U)/ba;x=
x(U+X/2);U=c.ybins;P=w(U.start);for(na=w(U.end)+(P-b.tickIncrement(P,U.size,!1,A))/1E6;P<na;P=b.tickIncrement(P,U.size,!1,A)){D.push(G.slice());J.push(P);var ha=Array(ba);for(B=0;B<ba;B++)ha[B]=[];R.push(ha);ca&&O.push(H.slice())}J.push(P);H=D.length;U=w(c.ybins.start);c=(P-U)/H;F=F(U+c/2);S&&(Y=g(G.length,L,X,E),W=g(D.length,M,c,K));E||"date"!==d.type||(L=h(y,L));K||"date"!==m.type||(M=h(w,M));E=G=!0;K=Array(ba);S=Array(H);ha=B=na=U=Infinity;for(P=0;P<C;P++){var fa=f[P],oa=a[P];y=n.findBin(fa,L);
w=n.findBin(oa,M);0<=y&&y<ba&&0<=w&&w<H&&(N+=da(y,P,D[w],ea,O[w]),R[w][y].push(P),G&&(void 0===K[y]?K[y]=fa:K[y]!==fa&&(G=!1)),E&&(void 0===S[y]?S[y]=oa:S[y]!==oa&&(E=!1)),U=Math.min(U,fa-I[y]),na=Math.min(na,I[y+1]-fa),B=Math.min(B,oa-J[w]),ha=Math.min(ha,J[w+1]-oa))}if(ca)for(w=0;w<H;w++)N+=q(D[w],O[w]);if(T)for(w=0;w<H;w++)T(D[w],N,Y,W[w]);return{x:f,xRanges:e(I,G&&K,U,na,d,t),x0:x,dx:X,y:a,yRanges:e(J,E&&S,B,ha,m,A),y0:F,dy:c,z:D,pts:R}}},{"../../lib":700,"../../plots/cartesian/axes":748,"../histogram/average":967,
"../histogram/bin_functions":969,"../histogram/bin_label_vals":970,"../histogram/norm_functions":978}],981:[function(a,t,m){function p(a,b,d,f){d=d[e.id2name(a[b+"axis"])].type;var c=b+"bins",k=a[c],l=a[b+"calendar"];k||(k=a[c]={});a="date"===d?function(a,b){return a||0===a?n.cleanDate(a,h,l):b}:function(a,b){return g(a)?Number(a):b};k.start=a(k.start,f.start);k.end=a(k.end,f.end);f=f.size;b=k.size;if(g(b))k.size=0<b?Number(b):f;else if("string"!==typeof b)k.size=f;else if(a=b.charAt(0),b=b.substr(1),
b=g(b)?Number(b):0,0>=b||"date"!==d||"M"!==a||b!==Math.round(b))k.size=f}var g=a("fast-isnumeric"),h=a("../../constants/numerical").BADNUM,e=a("../../plots/cartesian/axis_ids"),n=a("../../lib"),b=a("./attributes"),l=["x","y"];t.exports=function(a,e){function d(a){return n.coerce(c._input,c,b,a)}var f;for(f=0;f<a.length;f++){var c=a[f];var g=c.type;if("histogram2d"===g||"histogram2dcontour"===g)for(g=0;g<l.length;g++){var h=l[g];var m=h+"bins",q=(c._autoBin||{})[h]||{};d(m+".start",q.start);d(m+".end",
q.end);d(m+".size",q.size);p(c,h,e,q);(c[m]||{}).size||d("nbins"+h)}}}},{"../../constants/numerical":677,"../../lib":700,"../../plots/cartesian/axis_ids":751,"./attributes":979,"fast-isnumeric":221}],982:[function(a,t,m){var p=a("../../lib"),g=a("./sample_defaults"),h=a("../heatmap/style_defaults"),e=a("../../components/colorscale/defaults"),n=a("./attributes");t.exports=function(a,l,m,q){function b(b,c){return p.coerce(a,l,n,b,c)}g(a,l,b,q);!1!==l.visible&&(h(a,l,b,q),e(a,l,q,b,{prefix:"",cLetter:"z"}),
b("hovertemplate"))}},{"../../components/colorscale/defaults":587,"../../lib":700,"../heatmap/style_defaults":961,"./attributes":979,"./sample_defaults":985}],983:[function(a,t,m){var p=a("../heatmap/hover"),g=a("../../plots/cartesian/axes").hoverLabelText;t.exports=function(a,e,n,b,l,m){if(e=p(a,e,n,b,l,m))return a=e[0],b=a.index,l=a.cd[0],n=l.xRanges[b[1]],b=l.yRanges[b[0]],a.xLabel=g(a.xa,n[0],n[1]),a.yLabel=g(a.ya,b[0],b[1]),e}},{"../../plots/cartesian/axes":748,"../heatmap/hover":955}],984:[function(a,
t,m){m={};m.attributes=a("./attributes");m.supplyDefaults=a("./defaults");m.crossTraceDefaults=a("./cross_trace_defaults");m.calc=a("../heatmap/calc");m.plot=a("../heatmap/plot");m.layerName="heatmaplayer";m.colorbar=a("../heatmap/colorbar");m.style=a("../heatmap/style");m.hoverPoints=a("./hover");m.eventData=a("../histogram/event_data");m.moduleType="trace";m.name="histogram2d";m.basePlotModule=a("../../plots/cartesian");m.categories=["cartesian","svg","2dMap","histogram"];m.meta={};t.exports=m},
{"../../plots/cartesian":759,"../heatmap/calc":949,"../heatmap/colorbar":951,"../heatmap/plot":959,"../heatmap/style":960,"../histogram/event_data":975,"./attributes":979,"./cross_trace_defaults":981,"./defaults":982,"./hover":983}],985:[function(a,t,m){var p=a("../../registry"),g=a("../../lib");t.exports=function(a,e,n,b){var h=n("x"),m=n("y");h=g.minRowLength(h);m=g.minRowLength(m);h&&m?(e._length=Math.min(h,m),p.getComponentMethod("calendars","handleTraceDefaults")(a,e,["x","y"],b),(n("z")||n("marker.color"))&&
n("histfunc"),n("histnorm"),n("autobinx"),n("autobiny")):e.visible=!1}},{"../../lib":700,"../../registry":829}],986:[function(a,t,m){m=a("../histogram2d/attributes");var p=a("../contour/attributes"),g=a("../../components/colorscale/attributes"),h=a("../../components/colorbar/attributes");a=a("../../lib/extend").extendFlat;t.exports=a({x:m.x,y:m.y,z:m.z,marker:m.marker,histnorm:m.histnorm,histfunc:m.histfunc,nbinsx:m.nbinsx,xbins:m.xbins,nbinsy:m.nbinsy,ybins:m.ybins,autobinx:m.autobinx,autobiny:m.autobiny,
autocontour:p.autocontour,ncontours:p.ncontours,contours:p.contours,line:p.line,zhoverformat:m.zhoverformat,hovertemplate:m.hovertemplate},g("",{cLetter:"z",editTypeOverride:"calc"}),{colorbar:h})},{"../../components/colorbar/attributes":578,"../../components/colorscale/attributes":584,"../../lib/extend":690,"../contour/attributes":919,"../histogram2d/attributes":979}],987:[function(a,t,m){var p=a("../../lib"),g=a("../histogram2d/sample_defaults"),h=a("../contour/contours_defaults"),e=a("../contour/style_defaults"),
n=a("./attributes");t.exports=function(a,l,m,q){function b(b,c){return p.coerce(a,l,n,b,c)}g(a,l,b,q);!1!==l.visible&&(h(a,l,b,function(b){return p.coerce2(a,l,n,b)}),e(a,l,b,q),b("hovertemplate"))}},{"../../lib":700,"../contour/contours_defaults":926,"../contour/style_defaults":940,"../histogram2d/sample_defaults":985,"./attributes":986}],988:[function(a,t,m){m={};m.attributes=a("./attributes");m.supplyDefaults=a("./defaults");m.crossTraceDefaults=a("../histogram2d/cross_trace_defaults");m.calc=
a("../contour/calc");m.plot=a("../contour/plot").plot;m.layerName="contourlayer";m.style=a("../contour/style");m.colorbar=a("../contour/colorbar");m.hoverPoints=a("../contour/hover");m.moduleType="trace";m.name="histogram2dcontour";m.basePlotModule=a("../../plots/cartesian");m.categories="cartesian svg 2dMap contour histogram showLegend".split(" ");m.meta={};t.exports=m},{"../../plots/cartesian":759,"../contour/calc":920,"../contour/colorbar":922,"../contour/hover":932,"../contour/plot":937,"../contour/style":939,
"../histogram2d/cross_trace_defaults":981,"./attributes":986,"./defaults":987}],989:[function(a,t,m){function p(a){return{show:{valType:"boolean",dflt:!1},locations:{valType:"data_array",dflt:[]},fill:{valType:"number",min:0,max:1,dflt:1}}}function g(a){return{show:{valType:"boolean",dflt:!0},fill:{valType:"number",min:0,max:1,dflt:1}}}m=a("../../components/colorscale/attributes");var h=a("../../components/colorbar/attributes"),e=a("../../components/fx/hovertemplate_attributes"),n=a("../mesh3d/attributes"),
b=a("../../plots/attributes"),l=a("../../lib/extend").extendFlat;a=a("../../plot_api/edit_types").overrideAll;t=t.exports=a(l({x:{valType:"data_array"},y:{valType:"data_array"},z:{valType:"data_array"},value:{valType:"data_array"},isomin:{valType:"number"},isomax:{valType:"number"},surface:{show:{valType:"boolean",dflt:!0},count:{valType:"integer",dflt:2,min:1},fill:{valType:"number",min:0,max:1,dflt:1},pattern:{valType:"flaglist",flags:["A","B","C","D","E"],extras:["all","odd","even"],dflt:"all"}},
spaceframe:{show:{valType:"boolean",dflt:!1},fill:{valType:"number",min:0,max:1,dflt:.15}},slices:{x:p("x"),y:p("y"),z:p("z")},caps:{x:g("x"),y:g("y"),z:g("z")},text:{valType:"string",dflt:"",arrayOk:!0},hovertext:{valType:"string",dflt:"",arrayOk:!0},hovertemplate:e()},m("",{colorAttr:"`value`",showScaleDflt:!0,editTypeOverride:"calc"}),{colorbar:h,opacity:n.opacity,lightposition:n.lightposition,lighting:n.lighting,flatshading:n.flatshading,contour:n.contour,hoverinfo:l({},b.hoverinfo)}),"calc",
"nested");t.flatshading.dflt=!0;t.lighting.facenormalsepsilon.dflt=0;t.x.editType=t.y.editType=t.z.editType=t.value.editType="calc+clearAxisTypes";t.transforms=void 0},{"../../components/colorbar/attributes":578,"../../components/colorscale/attributes":584,"../../components/fx/hovertemplate_attributes":615,"../../lib/extend":690,"../../plot_api/edit_types":731,"../../plots/attributes":745,"../mesh3d/attributes":994}],990:[function(a,t,m){var p=a("../../components/colorscale/calc");t.exports=function(a,
h){h._len=Math.min(h.x.length,h.y.length,h.z.length,h.value.length);for(var e=Infinity,g=-Infinity,b=h.value.length,l=0;l<b;l++){var m=h.value[l];e=Math.min(e,m);g=Math.max(g,m)}h._minValues=e;h._maxValues=g;h._vMin=void 0===h.isomin||null===h.isomin?e:h.isomin;h._vMax=void 0===h.isomax||null===h.isomin?g:h.isomax;p(a,h,{vals:[h._vMin,h._vMax],containerStr:"",cLetter:"c"})}},{"../../components/colorscale/calc":585}],991:[function(a,t,m){function p(a,b,e){this.scene=a;this.uid=e;this.mesh=b;this.name=
"";this.data=null;this.showContour=!1}function g(a,b){for(var d=b.length-1;0<d;d--){var c=Math.min(b[d],b[d-1]),e=Math.max(b[d],b[d-1]);if(e>c&&c<a&&a<=e)return{id:d,distRatio:(e-a)/(e-c)}}return{id:0,distRatio:0}}function h(a){function b(a,b,c){return c+oa*b+oa*fa*a}function e(){V=[];ia=[];la=[];wa=[];ea=W=0}function c(a,b,c,d){V.push(a);ia.push(b);la.push(c);wa.push(d);W++;return W-1}function h(a,b,c){for(var d=[],e=0;e<a.length;e++)d[e]=a[e]*(1-c)+c*b[e];return d}function l(a,b){return"all"===
a||null===a?!0:-1<a.indexOf(b)}function n(b,d,e){ea=W;var f=[d];var g=[e];if(1<=ma)f=[d],g=[e];else if(0<ma){var k=e;f=d[0];g=d[1];d=d[2];for(var l=[],n=0;n<f.length;n++)l[n]=(f[n]+g[n]+d[n])/3;var m=Math.sqrt(1-ma);n=h(l,f,m);e=h(l,g,m);var r=h(l,d,m);l=k[0];m=k[1];k=k[2];d=[[f,g,e],[e,n,f],[g,d,r],[r,e,g],[d,f,n],[n,r,d]];g=[[l,m,-1],[-1,-1,l],[m,k,-1],[-1,-1,m],[k,l,-1],[-1,-1,k]];f=d}for(k=0;k<f.length;k++){d=f[k];e=g[k];n=[];for(l=0;3>l;l++){var q=d[l][0],p=d[l][1];r=d[l][2];m=d[l][3];if(-1<
e[l])var t=e[l];else a:{t=wa.length;for(var u=ea;u<t;u++)if(q===V[u]&&p===ia[u]&&r===la[u]){t=u;break a}t=-1}-1<t?n[l]=t:(t=n,u=l,m=null===b?m:b,t[u]=c(q,p,r,m))}d=n[1];e=n[2];a._i.push(n[0]);a._j.push(d);a._k.push(e);Y++}}function m(a,b,c){var d=function(d,e,f){n(a,[b[d],b[e],b[f]],[c[d],c[e],c[f]])};d(0,1,2);d(2,3,0)}function q(a,b,c){var d=function(d,e,f){n(a,[b[d],b[e],b[f]],[c[d],c[e],c[f]])};d(0,1,2);d(3,0,1);d(2,3,0);d(1,2,3)}function p(a,b,c,d){var e=a[3];e<c&&(e=c);e>d&&(e=d);c=(a[3]-e)/
(a[3]-b[3]+1E-9);d=[];for(e=0;4>e;e++)d[e]=(1-c)*a[e]+c*b[e];return d}function t(a,b,c){return a>=b&&a<=c}function x(a){var b=.001*(ja-qa);return a>=qa-b&&a<=ja+b}function F(b){for(var c=[],d=0;4>d;d++){var e=b[d];c.push([a.x[e],a.y[e],a.z[e],a.value[e]])}return c}function B(a,b,c,d,e,f){f||(f=1);c=[-1,-1,-1];var g=!1,h=[t(b[0][3],d,e),t(b[1][3],d,e),t(b[2][3],d,e)];if(!h[0]&&!h[1]&&!h[2])return!1;var k=function(a,b,c){return x(b[0][3])&&x(b[1][3])&&x(b[2][3])?(n(a,b,c),!0):3>f?B(a,b,c,qa,ja,++f):
!1};if(h[0]&&h[1]&&h[2])return k(a,b,c)||g;var l=!1;[[0,1,2],[2,0,1],[1,2,0]].forEach(function(f){if(h[f[0]]&&h[f[1]]&&!h[f[2]]){var n=b[f[0]],m=b[f[1]],r=b[f[2]],q=p(r,n,d,e);r=p(r,m,d,e);g=k(a,[r,q,n],[-1,-1,c[f[0]]])||g;g=k(a,[n,m,r],[c[f[0]],c[f[1]],-1])||g;l=!0}});if(l)return g;[[0,1,2],[1,2,0],[2,0,1]].forEach(function(f){if(h[f[0]]&&!h[f[1]]&&!h[f[2]]){var n=b[f[0]],m=b[f[2]],r=p(b[f[1]],n,d,e);m=p(m,n,d,e);g=k(a,[m,r,n],[-1,-1,c[f[0]]])||g;l=!0}});return g}function C(a,b,c,d){var e=!1,f=F(b),
g=[t(f[0][3],c,d),t(f[1][3],c,d),t(f[2][3],c,d),t(f[3][3],c,d)];if(!(g[0]||g[1]||g[2]||g[3]))return e;if(g[0]&&g[1]&&g[2]&&g[3])return ca&&(e=q(a,f,b)||e),e;var h=!1;[[0,1,2,3],[3,0,1,2],[2,3,0,1],[1,2,3,0]].forEach(function(k){if(g[k[0]]&&g[k[1]]&&g[k[2]]&&!g[k[3]]){var l=f[k[0]],m=f[k[1]],r=f[k[2]],q=f[k[3]];ca?e=n(a,[l,m,r],[b[k[0]],b[k[1]],b[k[2]]])||e:(k=p(q,l,c,d),m=p(q,m,c,d),r=p(q,r,c,d),e=n(null,[k,m,r],[-1,-1,-1])||e);h=!0}});if(h)return e;[[0,1,2,3],[1,2,3,0],[2,3,0,1],[3,0,1,2],[0,2,3,
1],[1,3,2,0]].forEach(function(k){if(g[k[0]]&&g[k[1]]&&!g[k[2]]&&!g[k[3]]){var l=f[k[0]],r=f[k[1]],q=f[k[2]],t=f[k[3]],u=p(q,l,c,d);q=p(q,r,c,d);var v=p(t,r,c,d);t=p(t,l,c,d);ca?(e=n(a,[l,t,u],[b[k[0]],-1,-1])||e,e=n(a,[r,q,v],[b[k[1]],-1,-1])||e):e=m(null,[u,q,v,t],[-1,-1,-1,-1])||e;h=!0}});if(h)return e;[[0,1,2,3],[1,2,3,0],[2,3,0,1],[3,0,1,2]].forEach(function(k){if(g[k[0]]&&!g[k[1]]&&!g[k[2]]&&!g[k[3]]){var l=f[k[0]],m=f[k[2]],r=f[k[3]],q=p(f[k[1]],l,c,d);m=p(m,l,c,d);r=p(r,l,c,d);ca?(e=n(a,[l,
q,m],[b[k[0]],-1,-1])||e,e=n(a,[l,m,r],[b[k[0]],-1,-1])||e,e=n(a,[l,r,q],[b[k[0]],-1,-1])||e):e=n(null,[q,m,r],[-1,-1,-1])||e;h=!0}});return e}function D(a,b,c,d,e,f,g,h,k,n,m){var r=!1;da&&(l(a,"A")&&(r=C(null,[b,c,d,f],n,m)||r),l(a,"B")&&(r=C(null,[c,d,e,k],n,m)||r),l(a,"C")&&(r=C(null,[c,f,g,k],n,m)||r),l(a,"D")&&(r=C(null,[d,f,h,k],n,m)||r),l(a,"E")&&(r=C(null,[c,d,f,k],n,m)||r));ca&&(r=C(a,[c,d,f,k],n,m)||r);return r}function G(a,b,c,d,e,f,g,h){return[!0===h[0]?!0:B(a,F([b,c,d]),[b,c,d],f,g),
!0===h[1]?!0:B(a,F([d,e,b]),[d,e,b],f,g)]}function H(a,b,c,d,e,f,g,h,k){return h?G(a,b,c,e,d,f,g,k):G(a,c,e,d,b,f,g,k)}function E(a,c,d,e,f,g,k){var l=!1,n=function(){l=B(a,[q,p,t],[-1,-1,-1],f,g)||l;l=B(a,[t,u,q],[-1,-1,-1],f,g)||l},m=k[0],r=k[1];k=k[2];if(m){var q=h(F([b(c,d-0,e-0)])[0],F([b(c-1,d-0,e-0)])[0],m);var p=h(F([b(c,d-0,e-1)])[0],F([b(c-1,d-0,e-1)])[0],m);var t=h(F([b(c,d-1,e-1)])[0],F([b(c-1,d-1,e-1)])[0],m);var u=h(F([b(c,d-1,e-0)])[0],F([b(c-1,d-1,e-0)])[0],m);n()}r&&(q=h(F([b(c-0,
d,e-0)])[0],F([b(c-0,d-1,e-0)])[0],r),p=h(F([b(c-0,d,e-1)])[0],F([b(c-0,d-1,e-1)])[0],r),t=h(F([b(c-1,d,e-1)])[0],F([b(c-1,d-1,e-1)])[0],r),u=h(F([b(c-1,d,e-0)])[0],F([b(c-1,d-1,e-0)])[0],r),n());k&&(q=h(F([b(c-0,d-0,e)])[0],F([b(c-0,d-0,e-1)])[0],k),p=h(F([b(c-0,d-1,e)])[0],F([b(c-0,d-1,e-1)])[0],k),t=h(F([b(c-1,d-1,e)])[0],F([b(c-1,d-1,e-1)])[0],k),u=h(F([b(c-1,d-0,e)])[0],F([b(c-1,d-0,e-1)])[0],k),n());return l}function K(a,c,d,e,f){for(var g=[],h=0,k=0;k<c.length;k++)for(var l=c[k],n=1;n<oa;n++)for(var m=
1;m<fa;m++)g.push(H(a,b(l,m-1,n-1),b(l,m-1,n),b(l,m,n-1),b(l,m,n),d,e,(l+m+n)%2,f&&f[h]?f[h]:[])),h++;return g}function I(a,c,d,e,f){for(var g=[],h=0,k=0;k<c.length;k++)for(var l=c[k],n=1;n<ha;n++)for(var m=1;m<oa;m++)g.push(H(a,b(n-1,l,m-1),b(n,l,m-1),b(n-1,l,m),b(n,l,m),d,e,(n+l+m)%2,f&&f[h]?f[h]:[])),h++;return g}function J(a,c,d,e,f){for(var g=[],h=0,k=0;k<c.length;k++)for(var l=c[k],n=1;n<fa;n++)for(var m=1;m<ha;m++)g.push(H(a,b(m-1,n-1,l),b(m-1,n,l),b(m,n-1,l),b(m,n,l),d,e,(m+n+l)%2,f&&f[h]?
f[h]:[])),h++;return g}function L(a,c,d){for(var e=1;e<oa;e++)for(var f=1;f<fa;f++)for(var g=1;g<ha;g++){var h=a,k=b(g-1,f-1,e-1),l=b(g-1,f-1,e),n=b(g-1,f,e-1),m=b(g-1,f,e),r=b(g,f-1,e-1),q=b(g,f-1,e),p=b(g,f,e-1),t=b(g,f,e),u=c,v=d,w=h;(g+f+e)%2?(da&&"even"===h&&(w=null),D(w,k,l,n,m,r,q,p,t,u,v)):(da&&"odd"===h&&(w=null),D(w,t,p,q,r,m,n,l,k,u,v))}}function M(a,b,c){ca=!0;L(a,b,c);ca=!1}function N(a,b,c){da=!0;L(a,b,c);da=!1}function O(a,b){for(var c=[];a<b;a++)c.push(a);return c}function R(){for(var d=
0;d<ha;d++)for(var e=0;e<fa;e++)for(var f=0;f<oa;f++){var g=b(d,e,f);c(a.x[g],a.y[g],a.z[g],a.value[g])}}a._i=[];a._j=[];a._k=[];var T=a.surface.show,P=a.spaceframe.show,S=a.surface.fill,ba=a.spaceframe.fill,da=!1,ca=!1,Y=0,W,ea,U=u.distinctVals(a.x.slice(0,a._len)).vals,na=u.distinctVals(a.y.slice(0,a._len)).vals,X=u.distinctVals(a.z.slice(0,a._len)).vals,ha=U.length,fa=na.length,oa=X.length,ua=a._minValues,Z=a._maxValues,qa=a._vMin,ja=a._vMax,V,ia,la,wa,ma;(function(){e();R();P&&ba&&(ma=ba,M(null,
qa,ja));if(T&&S){ma=S;for(var b=a.surface.pattern,c=a.surface.count,d=0;d<c;d++){var f=1===c?.5:d/(c-1);f=(1-f)*qa+f*ja;f=Math.abs(f-ua)>Math.abs(f-Z)?[ua,f]:[f,Z];N(b,f[0],f[1])}}var h=[[Math.min(qa,Z),Math.max(qa,Z)],[Math.min(ua,ja),Math.max(ua,ja)]];["x","y","z"].forEach(function(b){for(var c=[],d=0;d<h.length;d++){var e=0,f=h[d][0],k=h[d][1],l=a.slices[b];if(l.show&&l.fill){ma=l.fill;var n=[],m=[],r=[];if(l.locations.length)for(var q=0;q<l.locations.length;q++){var p=g(l.locations[q],"x"===b?
U:"y"===b?na:X);0===p.distRatio?n.push(p.id):0<p.id&&(m.push(p.id),"x"===b?r.push([p.distRatio,0,0]):"y"===b?r.push([0,p.distRatio,0]):r.push([0,0,p.distRatio]))}else n="x"===b?O(1,ha-1):"y"===b?O(1,fa-1):O(1,oa-1);if(0<m.length){if("x"===b){l=e;q=f;p=k;for(var t=c[e],u=[],v=0,w=0;w<m.length;w++)for(var z=m[w],x=1;x<oa;x++)for(var A=1;A<fa;A++)u.push(E(null,z,A,x,q,p,r[w],t&&t[v]?t[v]:[])),v++;c[l]=u}else if("y"===b){l=e;q=f;p=k;t=c[e];u=[];for(w=v=0;w<m.length;w++)for(z=m[w],x=1;x<ha;x++)for(A=1;A<
oa;A++)u.push(E(null,x,z,A,q,p,r[w],t&&t[v]?t[v]:[])),v++;c[l]=u}else{l=e;q=f;p=k;t=c[e];u=[];for(w=v=0;w<m.length;w++)for(z=m[w],x=1;x<fa;x++)for(A=1;A<ha;A++)u.push(E(null,A,x,z,q,p,r[w],t&&t[v]?t[v]:[])),v++;c[l]=u}e++}0<n.length&&(c[e]="x"===b?K(null,n,f,k,c[e]):"y"===b?I(null,n,f,k,c[e]):J(null,n,f,k,c[e]),e++)}n=a.caps[b];n.show&&n.fill&&(ma=n.fill,c[e]="x"===b?K(null,[0,ha-1],f,k,c[e]):"y"===b?I(null,[0,fa-1],f,k,c[e]):J(null,[0,oa-1],f,k,c[e]))}});0===Y&&e();a._x=V;a._y=ia;a._z=la;a._intensity=
wa;a._Xs=U;a._Ys=na;a._Zs=X})();return a}var e=a("gl-mesh3d"),n=a("../../lib/gl_format_color").parseColorScale,b=a("../../lib/str2rgbarray"),l=a("../../plots/gl3d/zip3"),u=a("../../lib");a=p.prototype;a.handlePick=function(a){if(a.object===this.mesh){var b=a.data.index,e=this.data._y[b],c=this.data._z[b],h=this.data._Ys.length,l=this.data._Zs.length;b=g(this.data._x[b],this.data._Xs).id;e=g(e,this.data._Ys).id;c=g(c,this.data._Zs).id;h=a.index=c+l*e+l*h*b;a.traceCoordinate=[this.data._x[h],this.data._y[h],
this.data._z[h],this.data.value[h]];l=this.data.hovertext||this.data.text;Array.isArray(l)&&void 0!==l[h]?a.textLabel=l[h]:l&&(a.textLabel=l);return!0}};a.update=function(a){function d(a,b,c,d){return b.map(function(b){return a.d2l(b,0,d)*c})}var e=this.scene,c=e.fullSceneLayout;this.data=h(a);e=l(d(c.xaxis,a._x,e.dataScale[0],a.xcalendar),d(c.yaxis,a._y,e.dataScale[1],a.ycalendar),d(c.zaxis,a._z,e.dataScale[2],a.zcalendar));c=l(a._i,a._j,a._k);e={positions:e,cells:c,lightPosition:[a.lightposition.x,
a.lightposition.y,a.lightposition.z],ambient:a.lighting.ambient,diffuse:a.lighting.diffuse,specular:a.lighting.specular,roughness:a.lighting.roughness,fresnel:a.lighting.fresnel,vertexNormalsEpsilon:a.lighting.vertexnormalsepsilon,faceNormalsEpsilon:a.lighting.facenormalsepsilon,opacity:a.opacity,contourEnable:a.contour.show,contourColor:b(a.contour.color).slice(0,3),contourWidth:a.contour.width,useFacetNormals:a.flatshading};e.vertexIntensity=a._intensity;e.vertexIntensityBounds=[a.cmin,a.cmax];
e.colormap=n(a);this.mesh.update(e)};a.dispose=function(){this.scene.glplot.remove(this.mesh);this.mesh.dispose()};t.exports=function(a,b){var d=e({gl:a.glplot.gl}),c=new p(a,d,b.uid);d._trace=c;c.update(b);a.glplot.add(d);return c}},{"../../lib":700,"../../lib/gl_format_color":697,"../../lib/str2rgbarray":723,"../../plots/gl3d/zip3":800,"gl-mesh3d":276}],992:[function(a,t,m){var p=a("../../registry"),g=a("../../lib"),h=a("../../components/colorscale/defaults"),e=a("./attributes");t.exports=function(a,
b,l,m){function n(c,d){return g.coerce(a,b,e,c,d)}l=n("isomin");var d=n("isomax");void 0!==d&&null!==d&&void 0!==l&&null!==l&&l>d&&(b.isomin=null,b.isomax=null);l=n("x");d=n("y");var f=n("z"),c=n("value");l&&l.length&&d&&d.length&&f&&f.length&&c&&c.length?(p.getComponentMethod("calendars","handleTraceDefaults")(a,b,["x","y","z"],m),["x","y","z"].forEach(function(a){var b="caps."+a;n(b+".show")&&n(b+".fill");a="slices."+a;n(a+".show")&&(n(a+".fill"),n(a+".locations"))}),n("spaceframe.show")&&n("spaceframe.fill"),
n("surface.show")&&(n("surface.count"),n("surface.fill"),n("surface.pattern")),n("contour.show")&&(n("contour.color"),n("contour.width")),"text hovertext hovertemplate lighting.ambient lighting.diffuse lighting.specular lighting.roughness lighting.fresnel lighting.vertexnormalsepsilon lighting.facenormalsepsilon lightposition.x lightposition.y lightposition.z flatshading opacity".split(" ").forEach(function(a){n(a)}),h(a,b,m,n,{prefix:"",cLetter:"c"}),b._length=null):b.visible=!1}},{"../../components/colorscale/defaults":587,
"../../lib":700,"../../registry":829,"./attributes":989}],993:[function(a,t,m){m={};m.attributes=a("./attributes");m.supplyDefaults=a("./defaults");m.calc=a("./calc");m.colorbar={min:"cmin",max:"cmax"};m.plot=a("./convert");m.moduleType="trace";m.name="isosurface";m.basePlotModule=a("../../plots/gl3d");m.categories=["gl3d"];m.meta={};t.exports=m},{"../../plots/gl3d":789,"./attributes":989,"./calc":990,"./convert":991,"./defaults":992}],994:[function(a,t,m){m=a("../../components/colorscale/attributes");
var p=a("../../components/colorbar/attributes"),g=a("../../components/fx/hovertemplate_attributes"),h=a("../surface/attributes"),e=a("../../plots/attributes");a=a("../../lib/extend").extendFlat;t.exports=a({x:{valType:"data_array",editType:"calc+clearAxisTypes"},y:{valType:"data_array",editType:"calc+clearAxisTypes"},z:{valType:"data_array",editType:"calc+clearAxisTypes"},i:{valType:"data_array",editType:"calc"},j:{valType:"data_array",editType:"calc"},k:{valType:"data_array",editType:"calc"},text:{valType:"string",
dflt:"",arrayOk:!0,editType:"calc"},hovertext:{valType:"string",dflt:"",arrayOk:!0,editType:"calc"},hovertemplate:g({editType:"calc"}),delaunayaxis:{valType:"enumerated",values:["x","y","z"],dflt:"z",editType:"calc"},alphahull:{valType:"number",dflt:-1,editType:"calc"},intensity:{valType:"data_array",editType:"calc"},color:{valType:"color",editType:"calc"},vertexcolor:{valType:"data_array",editType:"calc"},facecolor:{valType:"data_array",editType:"calc"},transforms:void 0},m("",{colorAttr:"`intensity`",
showScaleDflt:!0,editTypeOverride:"calc"}),{colorbar:p,opacity:h.opacity,flatshading:{valType:"boolean",dflt:!1,editType:"calc"},contour:{show:a({},h.contours.x.show,{}),color:h.contours.x.color,width:h.contours.x.width,editType:"calc"},lightposition:{x:a({},h.lightposition.x,{dflt:1E5}),y:a({},h.lightposition.y,{dflt:1E5}),z:a({},h.lightposition.z,{dflt:0}),editType:"calc"},lighting:a({vertexnormalsepsilon:{valType:"number",min:0,max:1,dflt:1E-12,editType:"calc"},facenormalsepsilon:{valType:"number",
min:0,max:1,dflt:1E-6,editType:"calc"},editType:"calc"},h.lighting),hoverinfo:a({},e.hoverinfo,{editType:"calc"})})},{"../../components/colorbar/attributes":578,"../../components/colorscale/attributes":584,"../../components/fx/hovertemplate_attributes":615,"../../lib/extend":690,"../../plots/attributes":745,"../surface/attributes":1148}],995:[function(a,t,m){var p=a("../../components/colorscale/calc");t.exports=function(a,h){h.intensity&&p(a,h,{vals:h.intensity,containerStr:"",cLetter:"c"})}},{"../../components/colorscale/calc":585}],
996:[function(a,t,m){function p(a,b,c){this.scene=a;this.uid=c;this.mesh=b;this.name="";this.color="#fff";this.data=null;this.showContour=!1}function g(a){for(var b=[],c=a.length,d=0;d<c;d++)b[d]=f(a[d]);return b}function h(a,b,c,d){for(var e=[],f=b.length,g=0;g<f;g++)e[g]=a.d2l(b[g],0,d)*c;return e}function e(a){for(var b=[],c=a.length,d=0;d<c;d++)b[d]=Math.round(a[d]);return b}function n(a,b){for(var c=a.length,d=0;d<c;d++)if(-.5>=a[d]||a[d]>=b-.5)return!1;return!0}var b=a("gl-mesh3d"),l=a("delaunay-triangulate"),
u=a("alpha-shape"),q=a("convex-hull"),d=a("../../lib/gl_format_color").parseColorScale,f=a("../../lib/str2rgbarray"),c=a("../../plots/gl3d/zip3");a=p.prototype;a.handlePick=function(a){if(a.object===this.mesh){var b=a.index=a.data.index;a.traceCoordinate=[this.data.x[b],this.data.y[b],this.data.z[b]];var c=this.data.hovertext||this.data.text;Array.isArray(c)&&void 0!==c[b]?a.textLabel=c[b]:c&&(a.textLabel=c);return!0}};a.update=function(a){var b=this.scene,k=b.fullSceneLayout;this.data=a;var m=a.x.length;
b=c(h(k.xaxis,a.x,b.dataScale[0],a.xcalendar),h(k.yaxis,a.y,b.dataScale[1],a.ycalendar),h(k.zaxis,a.z,b.dataScale[2],a.zcalendar));if(a.i&&a.j&&a.k){if(a.i.length!==a.j.length||a.j.length!==a.k.length||!n(a.i,m)||!n(a.j,m)||!n(a.k,m))return;m=c(e(a.i),e(a.j),e(a.k))}else if(0===a.alphahull)m=q(b);else if(0<a.alphahull)m=u(a.alphahull,b);else{m=["x","y","z"].indexOf(a.delaunayaxis);k=[];for(var p=b.length,t=0;t<p;t++)k[t]=[b[t][(m+1)%3],b[t][(m+2)%3]];m=l(k)}b={positions:b,cells:m,lightPosition:[a.lightposition.x,
a.lightposition.y,a.lightposition.z],ambient:a.lighting.ambient,diffuse:a.lighting.diffuse,specular:a.lighting.specular,roughness:a.lighting.roughness,fresnel:a.lighting.fresnel,vertexNormalsEpsilon:a.lighting.vertexnormalsepsilon,faceNormalsEpsilon:a.lighting.facenormalsepsilon,opacity:a.opacity,contourEnable:a.contour.show,contourColor:f(a.contour.color).slice(0,3),contourWidth:a.contour.width,useFacetNormals:a.flatshading};a.intensity?(this.color="#fff",b.vertexIntensity=a.intensity,b.vertexIntensityBounds=
[a.cmin,a.cmax],b.colormap=d(a)):a.vertexcolor?(this.color=a.vertexcolor[0],b.vertexColors=g(a.vertexcolor)):a.facecolor?(this.color=a.facecolor[0],b.cellColors=g(a.facecolor)):(this.color=a.color,b.meshColor=f(a.color));this.mesh.update(b)};a.dispose=function(){this.scene.glplot.remove(this.mesh);this.mesh.dispose()};t.exports=function(a,c){var d=b({gl:a.glplot.gl}),e=new p(a,d,c.uid);d._trace=e;e.update(c);a.glplot.add(d);return e}},{"../../lib/gl_format_color":697,"../../lib/str2rgbarray":723,
"../../plots/gl3d/zip3":800,"alpha-shape":54,"convex-hull":120,"delaunay-triangulate":156,"gl-mesh3d":276}],997:[function(a,t,m){var p=a("../../registry"),g=a("../../lib"),h=a("../../components/colorscale/defaults"),e=a("./attributes");t.exports=function(a,b,l,m){function n(d,c){return g.coerce(a,b,e,d,c)}function d(a){var b=a.map(function(a){return(a=n(a))&&g.isArrayOrTypedArray(a)?a:null});return b.every(function(a){return a&&a.length===b[0].length})&&b}d(["x","y","z"])?(d(["i","j","k"]),(!b.i||
b.j&&b.k)&&(!b.j||b.k&&b.i)&&(!b.k||b.i&&b.j)?(p.getComponentMethod("calendars","handleTraceDefaults")(a,b,["x","y","z"],m),"lighting.ambient lighting.diffuse lighting.specular lighting.roughness lighting.fresnel lighting.vertexnormalsepsilon lighting.facenormalsepsilon lightposition.x lightposition.y lightposition.z contour.show contour.color contour.width colorscale reversescale flatshading alphahull delaunayaxis opacity".split(" ").forEach(function(a){n(a)}),"intensity"in a?(n("intensity"),h(a,
b,m,n,{prefix:"",cLetter:"c"})):(b.showscale=!1,"facecolor"in a?n("facecolor"):"vertexcolor"in a?n("vertexcolor"):n("color",l)),n("text"),n("hovertext"),n("hovertemplate"),b._length=null):b.visible=!1):b.visible=!1}},{"../../components/colorscale/defaults":587,"../../lib":700,"../../registry":829,"./attributes":994}],998:[function(a,t,m){m={};m.attributes=a("./attributes");m.supplyDefaults=a("./defaults");m.calc=a("./calc");m.colorbar={min:"cmin",max:"cmax"};m.plot=a("./convert");m.moduleType="trace";
m.name="mesh3d";m.basePlotModule=a("../../plots/gl3d");m.categories=["gl3d"];m.meta={};t.exports=m},{"../../plots/gl3d":789,"./attributes":994,"./calc":995,"./convert":996,"./defaults":997}],999:[function(a,t,m){function p(a){return{line:{color:g({},e.color,{dflt:a}),width:e.width,dash:h,editType:"style"},editType:"style"}}var g=a("../../lib").extendFlat;m=a("../scatter/attributes");var h=a("../../components/drawing/attributes").dash;a=a("../../components/fx/attributes");var e=m.line;t.exports={x:{valType:"data_array",
editType:"calc+clearAxisTypes"},open:{valType:"data_array",editType:"calc"},high:{valType:"data_array",editType:"calc"},low:{valType:"data_array",editType:"calc"},close:{valType:"data_array",editType:"calc"},line:{width:g({},e.width,{}),dash:g({},h,{}),editType:"style"},increasing:p("#3D9970"),decreasing:p("#FF4136"),text:{valType:"string",dflt:"",arrayOk:!0,editType:"calc"},hovertext:{valType:"string",dflt:"",arrayOk:!0,editType:"calc"},tickwidth:{valType:"number",min:0,max:.5,dflt:.3,editType:"calc"},
hoverlabel:g({},a.hoverlabel,{split:{valType:"boolean",dflt:!1,editType:"style"}})}},{"../../components/drawing/attributes":597,"../../components/fx/attributes":607,"../../lib":700,"../scatter/attributes":1051}],1E3:[function(a,t,m){function p(a,b,e,d){return{o:a,h:b,l:e,c:d}}function g(a,g,m,d,f){for(var c=d.makeCalcdata(g,"open"),k=d.makeCalcdata(g,"high"),l=d.makeCalcdata(g,"low"),q=d.makeCalcdata(g,"close"),p=Array.isArray(g.text),t=Array.isArray(g.hovertext),u=!0,w=null,x=[],F=0;F<m.length;F++){var B=
m[F],C=c[F],D=k[F],G=l[F],H=q[F];B!==b&&C!==b&&D!==b&&G!==b&&H!==b?(H===C?null!==w&&H!==w&&(u=H>w):u=H>C,w=H,D=f(C,D,G,H),D.pos=B,D.yc=(C+H)/2,D.i=F,D.dir=u?"increasing":"decreasing",p&&(D.tx=g.text[F]),t&&(D.htx=g.hovertext[F]),x.push(D)):x.push({pos:B,empty:!0})}g._extremes[d._id]=n.findExtremes(d,h.concat(l,k),{padded:!0});x.length&&(x[0].t={labels:{open:e(a,"open:")+" ",high:e(a,"high:")+" ",low:e(a,"low:")+" ",close:e(a,"close:")+" "}});return x}var h=a("../../lib"),e=h._,n=a("../../plots/cartesian/axes"),
b=a("../../constants/numerical").BADNUM;t.exports={calc:function(a,b){var e=n.getFromId(a,b.xaxis),d=n.getFromId(a,b.yaxis);var f=b._minDiff;if(!f){var c=a._fullData,k=[];f=Infinity;var l;for(l=0;l<c.length;l++){var m=c[l];if("ohlc"===m.type&&!0===m.visible&&m.xaxis===e._id){k.push(m);var t=e.makeCalcdata(m,"x");m._xcalc=t;(m=h.distinctVals(t).minDiff)&&isFinite(m)&&(f=Math.min(f,m))}}Infinity===f&&(f=1);for(l=0;l<k.length;l++)k[l]._minDiff=f}f*=b.tickwidth;c=b._minDiff;b._minDiff=null;k=b._xcalc;
b._xcalc=null;a=g(a,b,k,d,p);b._extremes[e._id]=n.findExtremes(e,k,{vpad:c/2});return a.length?(h.extendFlat(a[0].t,{wHover:c/2,tickLen:f}),a):[{t:{empty:!0}}]},calcCommon:g}},{"../../constants/numerical":677,"../../lib":700,"../../plots/cartesian/axes":748}],1001:[function(a,t,m){function p(a,b,e,g){e(g+".line.color");e(g+".line.width",b.line.width);e(g+".line.dash",b.line.dash)}var g=a("../../lib"),h=a("./ohlc_defaults"),e=a("./attributes");t.exports=function(a,b,l,m){function n(d,f){return g.coerce(a,
b,e,d,f)}h(a,b,n,m)?(n("line.width"),n("line.dash"),p(a,b,n,"increasing"),p(a,b,n,"decreasing"),n("text"),n("hovertext"),n("tickwidth"),m._requestRangeslider[b.xaxis]=!0):b.visible=!1}},{"../../lib":700,"./attributes":999,"./ohlc_defaults":1004}],1002:[function(a,t,m){function p(a,e,c,g){function d(a){a=a.pos+D-e;return b.inbox(a-G,a+G,H)}function f(a){var d=a[t];a=a[u];return d===a||b.inbox(d-c,a-c,H)}function h(a){return(d(a)+f(a))/2}var k=a.cd,n=a.xa,m=k[0].trace,q=k[0].t,p=m.type,t="ohlc"===p?
"l":"min",u="ohlc"===p?"h":"max",D=q.bPos||0;p=q.bdPos||q.tickLen;var G=q.wHover;q=Math.min(1,p/Math.abs(n.r2c(n.range[1])-n.r2c(n.range[0])));var H=a.maxHoverDistance-q;q=a.maxSpikeDistance-q;g=b.getDistanceFunction(g,d,f,h);b.getClosest(k,g,a);if(!1===a.index)return null;k=k[a.index];if(k.empty)return null;m=m[k.dir];g=m.line.color;l.opacity(g)&&m.line.width?a.color=g:a.color=m.fillcolor;a.x0=n.c2p(k.pos+D-p,!0);a.x1=n.c2p(k.pos+D+p,!0);a.xLabelVal=k.pos;a.spikeDistance=h(k)*q/H;a.xSpike=n.c2p(k.pos,
!0);return a}function g(a,b,c,g){var d=a.cd,f=a.ya,h=d[0].trace,k=d[0].t,l=[];a=p(a,b,c,g);if(!a)return[];d=d[a.index].hi||h.hoverinfo;b=d.split("+");if("all"!==d&&-1===b.indexOf("y"))return[];d=["high","open","close","low"];b={};for(c=0;c<d.length;c++){g=d[c];var m=h[g][a.index],q=f.c2p(m,!0);if(m in b){var t=b[m];t.yLabel+="\x3cbr\x3e"+k.labels[g]+e.hoverLabelText(f,m)}else t=n.extendFlat({},a),t.y0=t.y1=q,t.yLabelVal=m,t.yLabel=k.labels[g]+e.hoverLabelText(f,m),t.name="",l.push(t),b[m]=t}return l}
function h(a,b,c,g){function d(a){return l.labels[a]+e.hoverLabelText(h,k[a][n])}var f=a.cd,h=a.ya,k=f[0].trace,l=f[0].t;a=p(a,b,c,g);if(!a)return[];f=f[a.index];var n=a.index=f.i;b=f.dir;g=f.hi||k.hoverinfo;c=g.split("+");var m="all"===g;g=m||-1!==c.indexOf("y");c=m||-1!==c.indexOf("text");b=g?[d("open"),d("high"),d("low"),d("close")+"  "+q[b]]:[];c&&u(f,k,b);a.extraText=b.join("\x3cbr\x3e");a.y0=a.y1=h.c2p(f.yc,!0);return[a]}var e=a("../../plots/cartesian/axes"),n=a("../../lib"),b=a("../../components/fx"),
l=a("../../components/color"),u=a("../scatter/fill_hover_text"),q={increasing:"",decreasing:""};t.exports={hoverPoints:function(a,b,c,e){return a.cd[0].trace.hoverlabel.split?g(a,b,c,e):h(a,b,c,e)},hoverSplit:g,hoverOnPoints:h}},{"../../components/color":577,"../../components/fx":616,"../../lib":700,"../../plots/cartesian/axes":748,"../scatter/fill_hover_text":1059}],1003:[function(a,t,m){t.exports={moduleType:"trace",name:"ohlc",basePlotModule:a("../../plots/cartesian"),categories:["cartesian",
"svg","showLegend"],meta:{},attributes:a("./attributes"),supplyDefaults:a("./defaults"),calc:a("./calc").calc,plot:a("./plot"),style:a("./style"),hoverPoints:a("./hover").hoverPoints,selectPoints:a("./select")}},{"../../plots/cartesian":759,"./attributes":999,"./calc":1E3,"./defaults":1001,"./hover":1002,"./plot":1005,"./select":1006,"./style":1007}],1004:[function(a,t,m){var p=a("../../registry"),g=a("../../lib");t.exports=function(a,e,n,b){var h=n("x"),m=n("open"),q=n("high"),d=n("low"),f=n("close");
n("hoverlabel.split");p.getComponentMethod("calendars","handleTraceDefaults")(a,e,["x"],b);if(m&&q&&d&&f)return a=Math.min(m.length,q.length,d.length,f.length),h&&(a=Math.min(a,g.minRowLength(h))),e._length=a}},{"../../lib":700,"../../registry":829}],1005:[function(a,t,m){var p=a("d3"),g=a("../../lib");t.exports=function(a,e,n,b){var h=e.xaxis,m=e.yaxis;g.makeTraceGroups(b,n,"trace ohlc").each(function(a){var b=p.select(this);a=a[0];var f=a.t,c=a.trace;e.isRangePlot||(a.node3=b);if(!0!==c.visible||
f.empty)b.remove();else{var k=f.tickLen;b=b.selectAll("path").data(g.identity);b.enter().append("path");b.exit().remove();b.attr("d",function(a){if(a.empty)return"M0,0Z";var b=h.c2p(a.pos,!0),c=h.c2p(a.pos-k,!0),d=h.c2p(a.pos+k,!0),e=m.c2p(a.o,!0),f=m.c2p(a.h,!0),g=m.c2p(a.l,!0);a=m.c2p(a.c,!0);return"M"+c+","+e+"H"+b+"M"+b+","+f+"V"+g+"M"+d+","+a+"H"+b})}})}},{"../../lib":700,d3:154}],1006:[function(a,t,m){t.exports=function(a,g){var h=a.cd,e=a.xaxis,n=a.yaxis,b=[],l,m=h[0].t.bPos||0;if(!1===g)for(l=
0;l<h.length;l++)h[l].selected=0;else for(l=0;l<h.length;l++){var q=h[l];g.contains([e.c2p(q.pos+m),n.c2p(q.yc)],null,q.i,a)?(b.push({pointNumber:q.i,x:e.c2d(q.pos),y:n.c2d(q.yc)}),q.selected=1):q.selected=0}return b}},{}],1007:[function(a,t,m){var p=a("d3"),g=a("../../components/drawing"),h=a("../../components/color");t.exports=function(a,n){a=n?n[0].node3:p.select(a).selectAll("g.ohlclayer").selectAll("g.trace");a.style("opacity",function(a){return a[0].trace.opacity});a.each(function(a){var b=
a[0].trace;p.select(this).selectAll("path").each(function(a){if(!a.empty){var e=b[a.dir].line;p.select(this).style("fill","none").call(h.stroke,e.color).call(g.dashLine,e.dash,e.width).style("opacity",b.selectedpoints&&!a.selected?.3:1)}})})}},{"../../components/color":577,"../../components/drawing":598,d3:154}],1008:[function(a,t,m){m=a("../../lib/extend").extendFlat;var p=a("../../plots/attributes"),g=a("../../plots/font_attributes"),h=a("../../components/colorscale/attributes"),e=a("../../components/fx/hovertemplate_attributes"),
n=a("../../plots/domain").attributes,b=a("../scatter/attributes").line;a=a("../../components/colorbar/attributes");a=m({editType:"calc"},h("line",{editType:"calc"}),{showscale:b.showscale,colorbar:a,shape:{valType:"enumerated",values:["linear","hspline"],dflt:"linear",editType:"plot"},hovertemplate:e({editType:"plot",arrayOk:!1},{keys:["count","probability"]})});t.exports={domain:n({name:"parcats",trace:!0,editType:"calc"}),hoverinfo:m({},p.hoverinfo,{flags:["count","probability"],editType:"plot",
arrayOk:!1}),hoveron:{valType:"enumerated",values:["category","color","dimension"],dflt:"category",editType:"plot"},hovertemplate:e({editType:"plot",arrayOk:!1},{keys:"count probability category categorycount colorcount bandcolorcount".split(" ")}),arrangement:{valType:"enumerated",values:["perpendicular","freeform","fixed"],dflt:"perpendicular",editType:"plot"},bundlecolors:{valType:"boolean",dflt:!0,editType:"plot"},sortpaths:{valType:"enumerated",values:["forward","backward"],dflt:"forward",editType:"plot"},
labelfont:g({editType:"calc"}),tickfont:g({editType:"calc"}),dimensions:{_isLinkedToArray:"dimension",label:{valType:"string",editType:"calc"},categoryorder:{valType:"enumerated",values:["trace","category ascending","category descending","array"],dflt:"trace",editType:"calc"},categoryarray:{valType:"data_array",editType:"calc"},ticktext:{valType:"data_array",editType:"calc"},values:{valType:"data_array",dflt:[],editType:"calc"},displayindex:{valType:"integer",editType:"calc"},editType:"calc",visible:{valType:"boolean",
dflt:!0,editType:"calc"}},line:a,counts:{valType:"number",min:0,dflt:1,arrayOk:!0,editType:"calc"},customdata:void 0,hoverlabel:void 0,ids:void 0,legendgroup:void 0,opacity:void 0,selectedpoints:void 0,showlegend:void 0}},{"../../components/colorbar/attributes":578,"../../components/colorscale/attributes":584,"../../components/fx/hovertemplate_attributes":615,"../../lib/extend":690,"../../plots/attributes":745,"../../plots/domain":773,"../../plots/font_attributes":774,"../scatter/attributes":1051}],
1009:[function(a,t,m){var p=a("../../plots/get_data").getModuleCalcData,g=a("./plot");m.name="parcats";m.plot=function(a,e,n,b){e=p(a.calcdata,"parcats");e.length&&g(a,e[0],n,b)};m.clean=function(a,e,g,b){a=b._has&&b._has("parcats");e=e._has&&e._has("parcats");a&&!e&&b._paperdiv.selectAll(".parcats").remove()}},{"../../plots/get_data":784,"./plot":1014}],1010:[function(a,t,m){function p(a,b,c){var d=a.map(function(a){return a.categories.length}).reduce(function(a,b){return Math.max(a,b)});return{dimensions:a,
paths:b,trace:void 0,maxCats:d,count:c}}function g(a,b,c){a.valueInds.push(b);a.count+=c}function h(a,b,c){a.valueInds.push(b);a.count+=c}function e(a,b){b=void 0===b||null===b?[]:b.map(function(a){return a});var c={},d={},e=[];b.forEach(function(a,b){c[a]=0;d[a]=b});for(var f=0;f<a.length;f++){var g=a[f];if(void 0===c[g]){c[g]=1;var h=b.push(g)-1;d[g]=h}else c[g]++,h=d[g];e.push(h)}a=b.map(function(a){return c[a]});return{uniqueValues:b,uniqueCounts:a,inds:e}}function n(a){var c=a.map(function(a){return a.displayindex});
if(b(c))for(c=0;c<a.length;c++)a[c]._displayindex=a[c].displayindex;else for(c=0;c<a.length;c++)a[c]._displayindex=c}function b(a){for(var b=Array(a.length),c=0;c<a.length;c++){if(0>a[c]||a[c]>=a.length||void 0!==b[a[c]])return!1;b[a[c]]=!0}return!0}var l=a("../../lib/gup").wrap,u=a("../../components/colorscale/helpers").hasColorscale,q=a("../../components/colorscale/calc"),d=a("../../lib/filter_unique.js"),f=a("../../components/drawing"),c=a("../../lib");t.exports=function(a,b){function k(a){a=c.isArrayOrTypedArray(w.color)?
w.color[a%w.color.length]:w.color;return{color:x(a),rawColor:a}}var m=c.filterVisible(b.dimensions);if(0===m.length)return[];var r=m.map(function(a){if("trace"===a.categoryorder)var b=null;else"array"===a.categoryorder?b=a.categoryarray:(b=d(a.values).sort(),"category descending"===a.categoryorder&&(b=b.reverse()));return e(a.values,b)});var t=c.isArrayOrTypedArray(b.counts)?b.counts:[b.counts];n(m);m.forEach(function(a,b){b=r[b];a._categoryarray=b.uniqueValues;a._ticktext=null===a.ticktext||void 0===
a.ticktext?[]:a.ticktext.slice();for(var c=a._ticktext.length;c<b.uniqueValues.length;c++)a._ticktext.push(b.uniqueValues[c])});var w=b.line;if(w){u(b,"line")&&q(a,b,{vals:b.line.color,containerStr:"line",cLetter:"c"});var x=f.tryColorscale(w)}else x=c.identity;var F=m[0].values.length,B={},C=r.map(function(a){return a.inds});var D=0;var G,H;for(G=0;G<F;G++){var E=[];for(H=0;H<C.length;H++)E.push(C[H][G]);a=t[G%t.length];D+=a;H=k(G);var K=E+"-"+H.rawColor;void 0===B[K]&&(B[K]={categoryInds:E,color:H.color,
rawColor:H.rawColor,valueInds:[],count:0});h(B[K],G,a)}m=m.map(function(a,b){return{dimensionInd:b,containerInd:a._index,displayInd:a._displayindex,dimensionLabel:a.label,count:D,categories:[],dragX:null}});for(G=0;G<F;G++)for(a=t[G%t.length],H=0;H<m.length;H++)C=m[H].containerInd,E=r[H].inds[G],K=m[H].categories,void 0===K[E]&&(K[E]={dimensionInd:H,categoryInd:E,categoryValue:b.dimensions[C]._categoryarray[E],displayInd:E,categoryLabel:b.dimensions[C]._ticktext[E],valueInds:[],count:0,dragY:null}),
g(K[E],G,a);return l(p(m,B,D))}},{"../../components/colorscale/calc":585,"../../components/colorscale/helpers":588,"../../components/drawing":598,"../../lib":700,"../../lib/filter_unique.js":691,"../../lib/gup":698}],1011:[function(a,t,m){function p(a,b,c,g,l){l("line.shape");l("line.hovertemplate");var d=l("line.color",g.colorway[0]);if(e(a,"line")&&h.isArrayOrTypedArray(d)){if(d.length)return l("line.colorscale"),n(a,b,g,l,{prefix:"line.",cLetter:"c"}),d.length;b.line.color=c}return Infinity}function g(a,
b){function c(c,d){return h.coerce(a,b,u.dimensions,c,d)}var d=c("values"),e=c("visible");d&&d.length||(e=b.visible=!1);if(e){c("label");c("displayindex",b._index);d=a.categoryarray;d=Array.isArray(d)&&0<d.length;var f;d&&(f="array");f=c("categoryorder",f);"array"===f?(c("categoryarray"),c("ticktext")):(delete a.categoryarray,delete a.ticktext);d||"array"!==f||(b.categoryorder="trace")}}var h=a("../../lib"),e=a("../../components/colorscale/helpers").hasColorscale,n=a("../../components/colorscale/defaults"),
b=a("../../plots/domain").defaults,l=a("../../plots/array_container_defaults"),u=a("./attributes"),q=a("../parcoords/merge_length");t.exports=function(a,e,c,k){function d(b,c){return h.coerce(a,e,u,b,c)}var f=l(a,e,{name:"dimensions",handleItemDefaults:g});c=p(a,e,c,k,d);b(e,k,d);Array.isArray(f)&&f.length||(e.visible=!1);q(e,f,"values",c);d("hoveron");d("hovertemplate");d("arrangement");d("bundlecolors");d("sortpaths");d("counts");h.coerceFont(d,"labelfont",{family:k.font.family,size:Math.round(k.font.size),
color:k.font.color});h.coerceFont(d,"tickfont",{family:k.font.family,size:Math.round(k.font.size/1.2),color:k.font.color})}},{"../../components/colorscale/defaults":587,"../../components/colorscale/helpers":588,"../../lib":700,"../../plots/array_container_defaults":744,"../../plots/domain":773,"../parcoords/merge_length":1023,"./attributes":1008}],1012:[function(a,t,m){m={};m.attributes=a("./attributes");m.supplyDefaults=a("./defaults");m.calc=a("./calc");m.plot=a("./plot");m.colorbar={container:"line",
min:"cmin",max:"cmax"};m.moduleType="trace";m.name="parcats";m.basePlotModule=a("./base_plot");m.categories=["noOpacity"];m.meta={};t.exports=m},{"./attributes":1008,"./base_plot":1009,"./calc":1010,"./defaults":1011,"./plot":1014}],1013:[function(a,t,m){function p(a,d,k,l){a=a.map(I.bind(0,d,k));l=l.selectAll("g.parcatslayer").data([null]);l.enter().append("g").attr("class","parcatslayer").style("pointer-events","all");l=l.selectAll("g.trace.parcats").data(a,g);a=l.enter().append("g").attr("class",
"trace parcats");l.attr("transform",function(a){return"translate("+a.x+", "+a.y+")"});a.append("g").attr("class","paths");k=l.select("g.paths").selectAll("path.path").data(function(a){return a.paths},g);k.attr("fill",function(a){return a.model.color});var m=k.enter().append("path").attr("class","path").attr("stroke-opacity",0).attr("fill",function(a){return a.model.color}).attr("fill-opacity",0);q(m);k.attr("d",function(a){return a.svgD});m.empty()||k.sort(e);k.exit().remove();k.on("mouseover",n).on("mouseout",
b).on("click",u);a.append("g").attr("class","dimensions");a=l.select("g.dimensions").selectAll("g.dimension").data(function(a){return a.dimensions},g);a.enter().append("g").attr("class","dimension");a.attr("transform",function(a){return"translate("+a.x+", 0)"});a.exit().remove();k=a.selectAll("g.category").data(function(a){return a.categories},g);m=k.enter().append("g").attr("class","category");k.attr("transform",function(a){return"translate(0, "+a.y+")"});m.append("rect").attr("class","catrect").attr("pointer-events",
"none");k.select("rect.catrect").attr("fill","none").attr("width",function(a){return a.width}).attr("height",function(a){return a.height});f(m);var r=k.selectAll("rect.bandrect").data(function(a){return a.bands},g);r.each(function(){P.raiseToTop(this)});r.attr("fill",function(a){return a.color});var p=r.enter().append("rect").attr("class","bandrect").attr("stroke-opacity",0).attr("fill",function(a){return a.color}).attr("fill-opacity",0);r.attr("fill",function(a){return a.color}).attr("width",function(a){return a.width}).attr("height",
function(a){return a.height}).attr("y",function(a){return a.y}).attr("cursor",function(a){return"fixed"===a.parcatsViewModel.arrangement?"default":"perpendicular"===a.parcatsViewModel.arrangement?"ns-resize":"move"});c(p);r.exit().remove();m.append("text").attr("class","catlabel").attr("pointer-events","none");r=d._fullLayout.paper_bgcolor;k.select("text.catlabel").attr("text-anchor",function(a){return h(a)?"start":"end"}).attr("alignment-baseline","middle").style("text-shadow",r+" -1px  1px 2px, "+
r+" 1px  1px 2px, "+r+"  1px -1px 2px, "+r+" -1px -1px 2px").style("fill","rgb(0, 0, 0)").attr("x",function(a){return h(a)?a.width+5:-5}).attr("y",function(a){return a.height/2}).text(function(a){return a.model.categoryLabel}).each(function(a){S.font(O.select(this),a.parcatsViewModel.categorylabelfont);da.convertToTspans(O.select(this),d)});m.append("text").attr("class","dimlabel");k.select("text.dimlabel").attr("text-anchor","middle").attr("alignment-baseline","baseline").attr("cursor",function(a){return"fixed"===
a.parcatsViewModel.arrangement?"default":"ew-resize"}).attr("x",function(a){return a.width/2}).attr("y",-5).text(function(a,b){return 0===b?a.parcatsViewModel.model.dimensions[a.model.dimensionInd].dimensionLabel:null}).each(function(a){S.font(O.select(this),a.parcatsViewModel.labelfont)});k.selectAll("rect.bandrect").on("mouseover",F).on("mouseout",B);k.exit().remove();a.call(O.behavior.drag().origin(function(a){return{x:a.x,y:0}}).on("dragstart",C).on("drag",D).on("dragend",G));l.each(function(a){a.traceSelection=
O.select(this);a.pathSelection=O.select(this).selectAll("g.paths").selectAll("path.path");a.dimensionSelection=O.select(this).selectAll("g.dimensions").selectAll("g.dimension")});l.exit().remove()}function g(a){return a.key}function h(a){return a.model.dimensionInd===a.parcatsViewModel.dimensions[a.parcatsViewModel.dimensions.length-1].model.dimensionInd}function e(a,b){return a.model.rawColor>b.model.rawColor?1:a.model.rawColor<b.model.rawColor?-1:0}function n(a){if(!a.parcatsViewModel.dragDimension&&
-1===a.parcatsViewModel.hoverinfoItems.indexOf("skip")){P.raiseToTop(this);d(O.select(this));var b=l(a);a.parcatsViewModel.graphDiv.emit("plotly_hover",{points:b,event:O.event});if(-1===a.parcatsViewModel.hoverinfoItems.indexOf("none")){var c=O.mouse(this)[0];b=a.parcatsViewModel.graphDiv;var e=a.parcatsViewModel.trace,f=b._fullLayout,g=f._paperdiv.node().getBoundingClientRect(),h=a.parcatsViewModel.graphDiv.getBoundingClientRect(),k;for(k=0;k<a.leftXs.length-1;k++)if(a.leftXs[k]+a.dimWidths[k]-2<=
c&&c<=a.leftXs[k+1]+2){var n=a.parcatsViewModel.dimensions[k];n=(n.x+n.width+a.parcatsViewModel.dimensions[k+1].x)/2;var m=(a.topYs[k]+a.topYs[k+1]+a.height)/2;break}n=a.parcatsViewModel.x+n;m=a.parcatsViewModel.y+m;k=ba.mostReadable(a.model.color,["black","white"]);c=a.model.count;var r=c/a.parcatsViewModel.model.count,q={countLabel:c,probabilityLabel:r.toFixed(3)},p=[];-1!==a.parcatsViewModel.hoverinfoItems.indexOf("count")&&p.push(["Count:",q.countLabel].join(" "));-1!==a.parcatsViewModel.hoverinfoItems.indexOf("probability")&&
p.push(["P:",q.probabilityLabel].join(" "));p=p.join("\x3cbr\x3e");var t=O.mouse(b)[0];T.loneHover({trace:e,x:n-g.left+h.left,y:m-g.top+h.top,text:p,color:a.model.color,borderColor:"black",fontFamily:'Monaco, "Courier New", monospace',fontSize:10,fontColor:k,idealAlign:t<n?"right":"left",hovertemplate:(e.line||{}).hovertemplate,hovertemplateLabels:q,eventData:[{data:e._input,fullData:e,count:c,probability:r}]},{container:f._hoverlayer.node(),outerContainer:f._paper.node(),gd:b})}}}function b(a){if(!a.parcatsViewModel.dragDimension&&
(q(O.select(this)),T.loneUnhover(a.parcatsViewModel.graphDiv._fullLayout._hoverlayer.node()),a.parcatsViewModel.pathSelection.sort(e),-1===a.parcatsViewModel.hoverinfoItems.indexOf("skip"))){var b=l(a);a.parcatsViewModel.graphDiv.emit("plotly_unhover",{points:b,event:O.event})}}function l(a){for(var b=[],c=H(a.parcatsViewModel),d=0;d<a.model.valueInds.length;d++)b.push({curveNumber:c,pointNumber:a.model.valueInds[d]});return b}function u(a){if(-1===a.parcatsViewModel.hoverinfoItems.indexOf("skip")){var b=
l(a);a.parcatsViewModel.graphDiv.emit("plotly_click",{points:b,event:O.event})}}function q(a){a.attr("fill",function(a){return a.model.color}).attr("fill-opacity",.6).attr("stroke","lightgray").attr("stroke-width",.2).attr("stroke-opacity",1)}function d(a){a.attr("fill-opacity",.8).attr("stroke",function(a){return ba.mostReadable(a.model.color,["black","white"])}).attr("stroke-width",.3)}function f(a){a.select("rect.catrect").attr("stroke","black").attr("stroke-width",1).attr("stroke-opacity",1)}
function c(a){a.attr("stroke","black").attr("stroke-width",.2).attr("stroke-opacity",1).attr("fill-opacity",1)}function k(a){var b=a.categoryViewModel.model.dimensionInd,c=a.categoryViewModel.model.categoryInd;return a.parcatsViewModel.pathSelection.filter(function(d){return d.model.categoryInds[b]===c&&d.model.color===a.color})}function r(a){O.select(a.parentNode).selectAll("rect.bandrect").each(function(a){a=k(a);d(a);a.each(function(){P.raiseToTop(this)})});O.select(a.parentNode).select("rect.catrect").attr("stroke",
"black").attr("stroke-width",2.5)}function v(a){var b=O.select(a).datum(),c=k(b);d(c);c.each(function(){P.raiseToTop(this)});O.select(a.parentNode).selectAll("rect.bandrect").filter(function(a){return a.color===b.color}).each(function(){P.raiseToTop(this);O.select(this).attr("stroke","black").attr("stroke-width",1.5)})}function z(a,b,c){var d=O.select(a).datum().parcatsViewModel.graphDiv,e=[];O.select(a.parentNode).selectAll("rect.bandrect").each(function(a){k(a).each(function(a){Array.prototype.push.apply(e,
l(a))})});d.emit(b,{points:e,event:c})}function A(a,b,c){a=O.select(a).datum();var d=a.parcatsViewModel.graphDiv,e=[];k(a).each(function(a){Array.prototype.push.apply(e,l(a))});d.emit(b,{points:e,event:c})}function y(a,b){b=O.select(b.parentNode).select("rect.catrect");var c=b.node().getBoundingClientRect(),d=b.datum(),e=d.parcatsViewModel,f=e.model.dimensions[d.model.dimensionInd];b=e.trace;var g=c.top+c.height/2;1<e.dimensions.length&&f.displayInd===e.dimensions.length-1?(c=c.left,e="left"):(c=
c.left+c.width,e="right");f=d.model.count;var h=d.model.categoryLabel,k=f/d.parcatsViewModel.model.count,l={countLabel:f,categoryLabel:h,probabilityLabel:k.toFixed(3)},n=[];-1!==d.parcatsViewModel.hoverinfoItems.indexOf("count")&&n.push(["Count:",l.countLabel].join(" "));-1!==d.parcatsViewModel.hoverinfoItems.indexOf("probability")&&n.push(["P("+l.categoryLabel+"):",l.probabilityLabel].join(" "));d=n.join("\x3cbr\x3e");return{trace:b,x:c-a.left,y:g-a.top,text:d,color:"lightgray",borderColor:"black",
fontFamily:'Monaco, "Courier New", monospace',fontSize:12,fontColor:"black",idealAlign:e,hovertemplate:b.hovertemplate,hovertemplateLabels:l,eventData:[{data:b._input,fullData:b,count:f,category:h,probability:k}]}}function w(a,b){var c=[];O.select(b.parentNode.parentNode).selectAll("g.category").select("rect.catrect").each(function(){c.push(y(a,this))});return c}function x(a,b){var c=b.getBoundingClientRect(),d=O.select(b).datum(),e=d.categoryViewModel,f=e.parcatsViewModel,g=f.model.dimensions[e.model.dimensionInd];
b=f.trace;var h=c.y+c.height/2;1<f.dimensions.length&&g.displayInd===f.dimensions.length-1?(c=c.left,g="left"):(c=c.left+c.width,g="right");var k=e.model.categoryLabel,l=d.parcatsViewModel.model.count,n=0;d.categoryViewModel.bands.forEach(function(a){a.color===d.color&&(n+=a.count)});var m=e.model.count,r=0;f.pathSelection.each(function(a){a.model.color===d.color&&(r+=a.model.count)});f=n/l;var q=n/r,p=n/m,t={countLabel:l,categoryLabel:k,probabilityLabel:f.toFixed(3)},u=[];-1!==e.parcatsViewModel.hoverinfoItems.indexOf("count")&&
u.push(["Count:",t.countLabel].join(" "));-1!==e.parcatsViewModel.hoverinfoItems.indexOf("probability")&&(u.push("P(color  "+k+"): "+t.probabilityLabel),u.push("P("+k+" | color): "+q.toFixed(3)),u.push("P(color | "+k+"): "+p.toFixed(3)));e=u.join("\x3cbr\x3e");q=ba.mostReadable(d.color,["black","white"]);return{trace:b,x:c-a.left,y:h-a.top,text:e,color:d.color,borderColor:"black",fontFamily:'Monaco, "Courier New", monospace',fontColor:q,fontSize:10,idealAlign:g,hovertemplate:b.hovertemplate,hovertemplateLabels:t,
eventData:[{data:b._input,fullData:b,category:k,count:l,probability:f,categorycount:m,colorcount:r,bandcolorcount:n}]}}function F(a){if(!(a.parcatsViewModel.dragDimension||-1!==a.parcatsViewModel.hoverinfoItems.indexOf("skip")||-1>O.mouse(this)[1])){var b=a.parcatsViewModel.graphDiv,c=b._fullLayout,d=c._paperdiv.node().getBoundingClientRect(),e=a.parcatsViewModel.hoveron;"color"===e?(v(this),A(this,"plotly_hover",O.event)):(r(this),z(this,"plotly_hover",O.event));if(-1===a.parcatsViewModel.hoverinfoItems.indexOf("none")){var f;
"category"===e?f=y(d,this):"color"===e?f=x(d,this):"dimension"===e&&(f=w(d,this));f&&T.multiHovers(f,{container:c._hoverlayer.node(),outerContainer:c._paper.node(),gd:b})}}}function B(a){var b=a.parcatsViewModel;b.dragDimension||(q(b.pathSelection),f(b.dimensionSelection.selectAll("g.category")),c(b.dimensionSelection.selectAll("g.category").selectAll("rect.bandrect")),T.loneUnhover(b.graphDiv._fullLayout._hoverlayer.node()),b.pathSelection.sort(e),-1===b.hoverinfoItems.indexOf("skip")&&("color"===
a.parcatsViewModel.hoveron?A(this,"plotly_unhover",O.event):z(this,"plotly_unhover",O.event)))}function C(a){"fixed"!==a.parcatsViewModel.arrangement&&(a.dragDimensionDisplayInd=a.model.displayInd,a.initialDragDimensionDisplayInds=a.parcatsViewModel.model.dimensions.map(function(a){return a.displayInd}),a.dragHasMoved=!1,a.dragCategoryDisplayInd=null,O.select(this).selectAll("g.category").select("rect.catrect").each(function(b){var c=O.mouse(this)[0],d=O.mouse(this)[1];-2<=c&&c<=b.width+2&&-2<=d&&
d<=b.height+2&&(a.dragCategoryDisplayInd=b.model.displayInd,a.initialDragCategoryDisplayInds=a.model.categories.map(function(a){return a.displayInd}),b.model.dragY=b.y,P.raiseToTop(this.parentNode),O.select(this.parentNode).selectAll("rect.bandrect").each(function(b){b.y<d&&d<=b.y+b.height&&(a.potentialClickBand=this)}))}),a.parcatsViewModel.dragDimension=a,T.loneUnhover(a.parcatsViewModel.graphDiv._fullLayout._hoverlayer.node()))}function D(a){if("fixed"!==a.parcatsViewModel.arrangement&&(a.dragHasMoved=
!0,null!==a.dragDimensionDisplayInd)){var b=a.dragDimensionDisplayInd,c=b-1,d=b+1,e=a.parcatsViewModel.dimensions[b];if(null!==a.dragCategoryDisplayInd){var f=e.categories[a.dragCategoryDisplayInd];f.model.dragY+=O.event.dy;var g=f.model.dragY,h=f.model.displayInd,k=e.categories,l=k[h-1];k=k[h+1];void 0!==l&&g<l.y+l.height/2&&(f.model.displayInd=l.model.displayInd,l.model.displayInd=h);void 0!==k&&g+f.height>k.y+k.height/2&&(f.model.displayInd=k.model.displayInd,k.model.displayInd=h);a.dragCategoryDisplayInd=
f.model.displayInd}if(null===a.dragCategoryDisplayInd||"freeform"===a.parcatsViewModel.arrangement)e.model.dragX=O.event.x,c=a.parcatsViewModel.dimensions[c],d=a.parcatsViewModel.dimensions[d],void 0!==c&&e.model.dragX<c.x+c.width&&(e.model.displayInd=c.model.displayInd,c.model.displayInd=b),void 0!==d&&e.model.dragX+e.width>d.x&&(e.model.displayInd=d.model.displayInd,d.model.displayInd=a.dragDimensionDisplayInd),a.dragDimensionDisplayInd=e.model.displayInd;M(a.parcatsViewModel);L(a.parcatsViewModel);
K(a.parcatsViewModel);E(a.parcatsViewModel)}}function G(a){if("fixed"!==a.parcatsViewModel.arrangement&&null!==a.dragDimensionDisplayInd){O.select(this).selectAll("text").attr("font-weight","normal");var b={},c=H(a.parcatsViewModel),d=a.parcatsViewModel.model.dimensions.map(function(a){return a.displayInd}),e=a.initialDragDimensionDisplayInds.some(function(a,b){return a!==d[b]});e&&d.forEach(function(c,d){b["dimensions["+a.parcatsViewModel.model.dimensions[d].containerInd+"].displayindex"]=c});var f=
!1;if(null!==a.dragCategoryDisplayInd){var g=a.model.categories.map(function(a){return a.displayInd});if(f=a.initialDragCategoryDisplayInds.some(function(a,b){return a!==g[b]})){var h=a.model.categories.slice().sort(function(a,b){return a.displayInd-b.displayInd}),k=h.map(function(a){return a.categoryValue});h=h.map(function(a){return a.categoryLabel});b["dimensions["+a.model.containerInd+"].categoryarray"]=[k];b["dimensions["+a.model.containerInd+"].ticktext"]=[h];b["dimensions["+a.model.containerInd+
"].categoryorder"]="array"}}-1===a.parcatsViewModel.hoverinfoItems.indexOf("skip")&&!a.dragHasMoved&&a.potentialClickBand&&("color"===a.parcatsViewModel.hoveron?A(a.potentialClickBand,"plotly_click",O.event.sourceEvent):z(a.potentialClickBand,"plotly_click",O.event.sourceEvent));a.model.dragX=null;null!==a.dragCategoryDisplayInd&&(a.parcatsViewModel.dimensions[a.dragDimensionDisplayInd].categories[a.dragCategoryDisplayInd].model.dragY=null,a.dragCategoryDisplayInd=null);a.dragDimensionDisplayInd=
null;a.parcatsViewModel.dragDimension=null;a.dragHasMoved=null;a.potentialClickBand=null;M(a.parcatsViewModel);L(a.parcatsViewModel);O.transition().duration(300).ease("cubic-in-out").each(function(){K(a.parcatsViewModel,!0);E(a.parcatsViewModel,!0)}).each("end",function(){(e||f)&&R.restyle(a.parcatsViewModel.graphDiv,b,[c])})}}function H(a){for(var b,c=a.graphDiv._fullData,d=0;d<c.length;d++)if(a.key===c[d].uid){b=d;break}return b}function E(a,b){void 0===b&&(b=!1);a.pathSelection.data(function(a){return a.paths},
g);(function(a){return b?a.transition():a})(a.pathSelection).attr("d",function(a){return a.svgD})}function K(a,b){function d(a){return b?a.transition():a}void 0===b&&(b=!1);a.dimensionSelection.data(function(a){return a.dimensions},g);var e=a.dimensionSelection.selectAll("g.category").data(function(a){return a.categories},g);d(a.dimensionSelection).attr("transform",function(a){return"translate("+a.x+", 0)"});d(e).attr("transform",function(a){return"translate(0, "+a.y+")"});e.select(".dimlabel").text(function(a,
b){return 0===b?a.parcatsViewModel.model.dimensions[a.model.dimensionInd].dimensionLabel:null});e.select(".catlabel").attr("text-anchor",function(a){return h(a)?"start":"end"}).attr("x",function(a){return h(a)?a.width+5:-5}).each(function(a){if(h(a)){a=a.width+5;var b="start"}else a=-5,b="end";O.select(this).selectAll("tspan").attr("x",a).attr("text-anchor",b)});a=e.selectAll("rect.bandrect").data(function(a){return a.bands},g);e=a.enter().append("rect").attr("class","bandrect").attr("cursor","move").attr("stroke-opacity",
0).attr("fill",function(a){return a.color}).attr("fill-opacity",0);a.attr("fill",function(a){return a.color}).attr("width",function(a){return a.width}).attr("height",function(a){return a.height}).attr("y",function(a){return a.y});c(e);a.each(function(){P.raiseToTop(this)});a.exit().remove()}function I(a,b,c){c=c[0];var d=b.margin||{l:80,r:80,t:100,b:80},e=c.trace,f=e.domain,g=b.width,h=Math.floor(g*(f.x[1]-f.x[0])),k=Math.floor(b.height*(f.y[1]-f.y[0]));g=f.x[0]*g+d.l;b=b.height-f.y[1]*b.height+d.t;
f=e.line.shape;var l="all"===e.hoverinfo?["count","probability"]:(e.hoverinfo||"").split("+");a={trace:e,key:e.uid,model:c,x:g,y:b,width:h,height:k,hoveron:e.hoveron,hoverinfoItems:l,arrangement:e.arrangement,bundlecolors:e.bundlecolors,sortpaths:e.sortpaths,labelfont:e.labelfont,categorylabelfont:e.tickfont,pathShape:f,dragDimension:null,margin:d,paths:[],dimensions:[],graphDiv:a,traceSelection:null,pathSelection:null,dimensionSelection:null};c.dimensions&&(M(a),L(a));return a}function J(a,b,c,d,
e){var f=[],g=[],h;for(h=0;h<c.length-1;h++){var k=O.interpolateNumber(c[h]+a[h],a[h+1]);f.push(k(e));g.push(k(1-e))}e="M "+a[0]+","+b[0];e+="l"+c[0]+",0 ";for(h=1;h<c.length;h++)e+="C"+f[h-1]+","+b[h-1]+" "+g[h-1]+","+b[h]+" "+a[h]+","+b[h],e+="l"+c[h]+",0 ";e=e+("l0,"+d+" ")+("l -"+c[c.length-1]+",0 ");for(h=c.length-2;0<=h;h--)e+="C"+g[h]+","+(b[h+1]+d)+" "+f[h]+","+(b[h]+d)+" "+(a[h]+c[h])+","+(b[h]+d),e+="l-"+c[h]+",0 ";return e+"Z"}function L(a){function b(a){var b=a.categoryInds.map(function(a,
b){return f[b][a]});return h.map(function(a){return b[a]})}var c=a.dimensions,d=a.model,e=c.map(function(a){return a.categories.map(function(a){return a.y})}),f=a.model.dimensions.map(function(a){return a.categories.map(function(a){return a.displayInd})}),g=a.model.dimensions.map(function(a){return a.displayInd}),h=a.dimensions.map(function(a){return a.model.dimensionInd}),k=c.map(function(a){return a.x}),l=c.map(function(a){return a.width}),n=[];for(m in d.paths)d.paths.hasOwnProperty(m)&&n.push(d.paths[m]);
n.sort(function(c,d){var e=b(c),f=b(d);"backward"===a.sortpaths&&(e.reverse(),f.reverse());e.push(c.valueInds[0]);f.push(d.valueInds[0]);a.bundlecolors&&(e.unshift(c.rawColor),f.unshift(d.rawColor));return e<f?-1:e>f?1:0});d=Array(n.length);var m=c[0].model.count;c=c[0].categories.map(function(a){return a.height}).reduce(function(a,b){return a+b});for(var r=0;r<n.length;r++){var q=n[r];var p=0<m?q.count/m*c:0;for(var t=Array(e.length),u=0;u<q.categoryInds.length;u++){var v=f[u][q.categoryInds[u]],
w=g[u];t[w]=e[w][v];e[w][v]+=p;v=a.dimensions[w].categories[v];w=v.bands.length;var x=v.bands[w-1];void 0===x||q.rawColor!==x.rawColor?(w=void 0===x?0:x.y+x.height,v.bands.push({key:w,color:q.color,rawColor:q.rawColor,height:p,width:v.width,count:q.count,y:w,categoryViewModel:v,parcatsViewModel:a})):(v=v.bands[w-1],v.height+=p,v.count+=q.count)}u="hspline"===a.pathShape?J(k,t,l,p,.5):J(k,t,l,p,0);d[r]={key:q.valueInds[0],model:q,height:p,leftXs:k,topYs:t,dimWidths:l,svgD:u,parcatsViewModel:a}}a.paths=
d}function M(a){var b=a.model.dimensions.map(function(a){return{displayInd:a.displayInd,dimensionInd:a.dimensionInd}});b.sort(function(a,b){return a.displayInd-b.displayInd});var c=[],d;for(d in b)c.push(N(a,a.model.dimensions[b[d].dimensionInd]));a.dimensions=c}function N(a,b){var c=a.model.dimensions.length;c=40+(1<c?(a.width-80-16)/(c-1):0)*b.displayInd;var d=[],e=a.model.maxCats,f=b.categories.length,g=b.count,h=a.height-8*(e-1),k=8*(e-f)/2,l=b.categories.map(function(a){return{displayInd:a.displayInd,
categoryInd:a.categoryInd}});l.sort(function(a,b){return a.displayInd-b.displayInd});for(e=0;e<f;e++){var n=l[e].categoryInd;var m=b.categories[n];n=0<g?m.count/g*h:0;m={key:m.valueInds[0],model:m,width:16,height:n,y:null!==m.dragY?m.dragY:k,bands:[],parcatsViewModel:a};k=k+n+8;d.push(m)}return{key:b.dimensionInd,x:null!==b.dragX?b.dragX:c,y:0,width:16,model:b,categories:d,parcatsViewModel:a,dragCategoryDisplayInd:null,dragDimensionDisplayInd:null,initialDragDimensionDisplayInds:null,initialDragCategoryDisplayInds:null,
dragHasMoved:null,potentialClickBand:null}}var O=a("d3"),R=a("../../plot_api/plot_api"),T=a("../../components/fx"),P=a("../../lib"),S=a("../../components/drawing"),ba=a("tinycolor2"),da=a("../../lib/svg_text_utils");t.exports=function(a,b,c,d){p(c,a,d,b)}},{"../../components/drawing":598,"../../components/fx":616,"../../lib":700,"../../lib/svg_text_utils":724,"../../plot_api/plot_api":735,d3:154,tinycolor2:521}],1014:[function(a,t,m){var p=a("./parcats");t.exports=function(a,h,e,n){var b=a._fullLayout,
g=b._size;p(a,b._paper,h,{width:g.w,height:g.h,margin:{t:g.t,r:g.r,b:g.b,l:g.l}},e,n)}},{"./parcats":1013}],1015:[function(a,t,m){m=a("../../components/colorscale/attributes");var p=a("../../components/colorbar/attributes"),g=a("../../plots/cartesian/layout_attributes"),h=a("../../plots/font_attributes"),e=a("../../plots/domain").attributes,n=a("../../lib/extend").extendFlat;a=a("../../plot_api/plot_template").templatedArray;t.exports={domain:e({name:"parcoords",trace:!0,editType:"calc"}),hoverlabel:void 0,
labelfont:h({editType:"calc"}),tickfont:h({editType:"calc"}),rangefont:h({editType:"calc"}),dimensions:a("dimension",{label:{valType:"string",editType:"calc"},tickvals:n({},g.tickvals,{editType:"calc"}),ticktext:n({},g.ticktext,{editType:"calc"}),tickformat:{valType:"string",dflt:"3s",editType:"calc"},visible:{valType:"boolean",dflt:!0,editType:"calc"},range:{valType:"info_array",items:[{valType:"number",editType:"calc"},{valType:"number",editType:"calc"}],editType:"calc"},constraintrange:{valType:"info_array",
freeLength:!0,dimensions:"1-2",items:[{valType:"number",editType:"calc"},{valType:"number",editType:"calc"}],editType:"calc"},multiselect:{valType:"boolean",dflt:!0,editType:"calc"},values:{valType:"data_array",editType:"calc"},editType:"calc"}),line:n(m("line",{colorscaleDflt:"Viridis",autoColorDflt:!1,editTypeOverride:"calc"}),{colorbar:p,editType:"calc"})}},{"../../components/colorbar/attributes":578,"../../components/colorscale/attributes":584,"../../lib/extend":690,"../../plot_api/plot_template":738,
"../../plots/cartesian/layout_attributes":760,"../../plots/domain":773,"../../plots/font_attributes":774}],1016:[function(a,t,m){function p(a,b,c){if(h(b,c))return b;for(var d=c=a[0],e=1;e<a.length;e++){var f=a[e];if(b<c*(1-H)+f*H)return c*(1-G)+d*G;if(b<f||e===a.length-1)return f*(1-G)+c*G;d=c;c=f}}function g(a,b,c){if(h(b,c))return b;for(var d=c=a[a.length-1],e=a.length-2;0<=e;e--){var f=a[e];if(b>c*(1-H)+f*H)return c*(1-G)+d*G;if(b>f||e===a.length-1)return f*(1-G)+c*G;d=c;c=f}}function h(a,b){for(var c=
0;c<b.length;c++)if(a>=b[c][0]&&a<=b[c][1])return!0;return!1}function e(a){a.attr("x",-x.bar.captureWidth/2).attr("width",x.bar.captureWidth)}function n(a){a.attr("visibility","visible").style("visibility","visible").attr("fill","yellow").attr("opacity",0)}function b(a){if(!a.brush.filterSpecified)return"0,"+a.height;for(var b=l(a.brush.filter.getConsolidated(),a.height),c=[0],d,e,f=b.length?b[0][0]:null,g=0;g<b.length;g++)d=b[g],e=d[1]-d[0],c.push(f),c.push(e),e=g+1,e<b.length&&(f=b[e][0]-d[1]);
c.push(a.height);return c}function l(a,b){return a.map(function(a){return a.map(function(a){return a*b}).sort(D)})}function u(){F.select(document.body).style("cursor",null)}function q(a){a.attr("stroke-dasharray",b)}function d(a,b){a=F.select(a).selectAll(".highlight, .highlight-shadow");b=b?a.transition().duration(x.bar.snapDuration).each("end",b):a;q(b)}function f(a,b){var c=a.brush,d={};if(c.filterSpecified){var e=a.height;c=c.filter.getConsolidated();var f=l(c,e),g=NaN,h=NaN,k=NaN;for(e=0;e<=
f.length;e++){var n=f[e];if(n&&n[0]<=b&&b<=n[1]){g=e;break}else if(h=e?e-1:NaN,n&&n[0]>b){k=e;break}}e=g;isNaN(e)&&(e=isNaN(h)||isNaN(k)?isNaN(h)?k:h:b-f[h][1]<f[k][0]-b?h:k);isNaN(e)||(f=f[e],h=x.bar.handleHeight,h=b>f[1]+h||b<f[0]-h?void 0:b>=.9*f[1]+.1*f[0]?"n":b<=.9*f[0]+.1*f[1]?"s":"ns",h&&(d.interval=c[e],d.intervalPix=f,d.region=h))}if(a.ordinal&&!d.region)for(c=a.unitTickvals,a=a.unitToPaddedPx.invert(b),e=0;e<c.length;e++)if(b=[.25*c[Math.max(e-1,0)]+.75*c[e],.25*c[Math.min(e+1,c.length-
1)]+.75*c[e]],a>=b[0]&&a<=b[1]){d.clickableOrdinalRange=b;break}return d}function c(a){a.on("mousemove",function(a){F.event.preventDefault();if(!a.parent.inBrushDrag){var b=a.height-F.mouse(this)[1]-2*x.verticalPadding;a=f(a,b);b="crosshair";a.clickableOrdinalRange?b="pointer":a.region&&(b=a.region+"-resize");F.select(document.body).style("cursor",b)}}).on("mouseleave",function(a){a.parent.inBrushDrag||u()}).call(F.behavior.drag().on("dragstart",function(a){F.event.sourceEvent.stopPropagation();var b=
a.height-F.mouse(this)[1]-2*x.verticalPadding,c=a.unitToPaddedPx.invert(b),d=a.brush,e=f(a,b),g=e.interval,h=d.svgBrush;h.wasDragged=!1;h.grabbingBar="ns"===e.region;if(h.grabbingBar){var k=g.map(a.unitToPaddedPx);h.grabPoint=b-k[0]-x.verticalPadding;h.barLength=k[1]-k[0]}h.clickableOrdinalRange=e.clickableOrdinalRange;h.stayingIntervals=a.multiselect&&d.filterSpecified?d.filter.getConsolidated():[];g&&(h.stayingIntervals=h.stayingIntervals.filter(function(a){return a[0]!==g[0]&&a[1]!==g[1]}));h.startExtent=
e.region?g["s"===e.region?1:0]:c;a.parent.inBrushDrag=!0;h.brushStartCallback()}).on("drag",function(a){F.event.sourceEvent.stopPropagation();var b=a.height-F.mouse(this)[1]-2*x.verticalPadding,c=a.brush.svgBrush;c.wasDragged=!0;c.newExtent=c.grabbingBar?[b-c.grabPoint,b+c.barLength-c.grabPoint].map(a.unitToPaddedPx.invert):[c.startExtent,a.unitToPaddedPx.invert(b)].sort(D);b=Math.max(0,-c.newExtent[0]);var e=Math.max(0,c.newExtent[1]-1);c.newExtent[0]+=b;c.newExtent[1]-=e;c.grabbingBar&&(c.newExtent[1]+=
b,c.newExtent[0]-=e);a.brush.filterSpecified=!0;c.extent=c.stayingIntervals.concat([c.newExtent]);c.brushCallback(a);d(this.parentNode)}).on("dragend",function(a){F.event.sourceEvent.stopPropagation();var b=a.brush,c=b.filter,e=b.svgBrush,f=e.grabbingBar;e.grabbingBar=!1;e.grabLocation=void 0;a.parent.inBrushDrag=!1;u();if(e.wasDragged)if(f=function(){c.set(c.getConsolidated())},a.ordinal){var h=a.unitTickvals;h[h.length-1]<h[0]&&h.reverse();e.newExtent=[p(h,e.newExtent[0],e.stayingIntervals),g(h,
e.newExtent[1],e.stayingIntervals)];h=e.newExtent[1]>e.newExtent[0];e.extent=e.stayingIntervals.concat(h?[e.newExtent]:[]);e.extent.length||z(b);e.brushCallback(a);h?d(this.parentNode,f):(f(),d(this.parentNode))}else f();else e.wasDragged=void 0,e.clickableOrdinalRange?b.filterSpecified&&a.multiselect?e.extent.push(e.clickableOrdinalRange):(e.extent=[e.clickableOrdinalRange],b.filterSpecified=!0):f?(e.extent=e.stayingIntervals,0===e.extent.length&&z(b)):z(b),e.brushCallback(a),d(this.parentNode);
e.brushEndCallback(b.filterSpecified?c.getConsolidated():[])}))}function k(a,b){return a[0]-b[0]}function r(a){var b=a.selectAll(".background").data(C);b.enter().append("rect").classed("background",!0).call(e).call(n).style("pointer-events","auto").attr("transform","translate(0 "+x.verticalPadding+")");b.call(c).attr("height",function(a){return a.height-x.verticalPadding});b=a.selectAll(".highlight-shadow").data(C);b.enter().append("line").classed("highlight-shadow",!0).attr("x",-x.bar.width/2).attr("stroke-width",
x.bar.width+x.bar.strokeWidth).attr("stroke",x.bar.strokeColor).attr("opacity",x.bar.strokeOpacity).attr("stroke-linecap","butt");b.attr("y1",function(a){return a.height}).call(q);a=a.selectAll(".highlight").data(C);a.enter().append("line").classed("highlight",!0).attr("x",-x.bar.width/2).attr("stroke-width",x.bar.width-x.bar.strokeWidth).attr("stroke",x.bar.fillColor).attr("opacity",x.bar.fillOpacity).attr("stroke-linecap","butt");a.attr("y1",function(a){return a.height}).call(q)}function v(a){return a.svgBrush.extent.map(function(a){return a.slice()})}
function z(a){a.filterSpecified=!1;a.svgBrush.extent=[[0,1]]}function A(a){return function(b){b=b.brush;var c=v(b).slice();b.filter.set(c);a()}}function y(a){a=a.slice();for(var b=[],c,d=a.shift();d;){for(c=d.slice();(d=a.shift())&&d[0]<=c[1];)c[1]=Math.max(c[1],d[1]);b.push(c)}return b}function w(){var a=[],b,c;return{set:function(d){a=d.map(function(a){return a.slice().sort(D)}).sort(k);b=y(a);c=a.reduce(function(a,b){return[Math.min(a[0],b[0]),Math.max(a[1],b[1])]},[Infinity,-Infinity])},get:function(){return a.slice()},
getConsolidated:function(){return b},getBounds:function(){return c}}}var x=a("./constants"),F=a("d3"),B=a("../../lib/gup").keyFun,C=a("../../lib/gup").repeat,D=a("../../lib").sorterAsc,G=x.bar.snapRatio,H=x.bar.snapClose;t.exports={makeBrush:function(a,b,c,d,e,f){a=w();a.set(c);return{filter:a,filterSpecified:b,svgBrush:{extent:[],brushStartCallback:d,brushCallback:A(e),brushEndCallback:f}}},ensureAxisBrush:function(a){a=a.selectAll("."+x.cn.axisBrush).data(C,B);a.enter().append("g").classed(x.cn.axisBrush,
!0);r(a)},cleanRanges:function(a,b){Array.isArray(a[0])?(a=a.map(function(a){return a.sort(D)}),a=b.multiselect?y(a.sort(k)):[a[0]]):a=[a.sort(D)];if(b.tickvals){var c=b.tickvals.slice().sort(D);a=a.map(function(a){a=[p(c,a[0],[]),g(c,a[1],[])];if(a[1]>a[0])return a}).filter(function(a){return a});if(!a.length)return}return 1<a.length?a:a[0]}}},{"../../lib":700,"../../lib/gup":698,"./constants":1019,d3:154}],1017:[function(a,t,m){var p=a("d3"),g=a("../../plots/get_data").getModuleCalcData,h=a("./plot"),
e=a("../../constants/xmlns_namespaces");m.name="parcoords";m.plot=function(a){var b=g(a.calcdata,"parcoords")[0];b.length&&h(a,b)};m.clean=function(a,b,e,g){a=g._has&&g._has("parcoords");b=b._has&&b._has("parcoords");a&&!b&&(g._paperdiv.selectAll(".parcoords").remove(),g._glimages.selectAll("*").remove())};m.toSVG=function(a){var b=a._fullLayout._glimages,g=p.select(a).selectAll(".svg-container");g.filter(function(a,b){return b===g.size()-1}).selectAll(".gl-canvas-context, .gl-canvas-focus").each(function(){var a=
this.toDataURL("image/png");b.append("svg:image").attr({xmlns:e.svg,"xlink:href":a,preserveAspectRatio:"none",x:0,y:0,width:this.width,height:this.height})});window.setTimeout(function(){p.selectAll("#filterBarPattern").attr("id","filterBarPattern")},60)}},{"../../constants/xmlns_namespaces":678,"../../plots/get_data":784,"./plot":1025,d3:154}],1018:[function(a,t,m){function p(a){return e.isTypedArray(a)?Array.prototype.slice.call(a):a}var g=a("../../components/colorscale/helpers").hasColorscale,
h=a("../../components/colorscale/calc"),e=a("../../lib"),n=a("../../lib/gup").wrap;t.exports=function(a,e){for(var b=0;b<e.dimensions.length;b++)e.dimensions[b].values=p(e.dimensions[b].values);e.line.color=p(e.line.color);b=!!e.line.colorscale&&Array.isArray(e.line.color);if(b)var l=e.line.color;else{l=e._length;for(var d=Array(l),f=0;f<l;f++)d[f]=.5;l=d}b=b?e.line.colorscale:[[0,e.line.color],[1,e.line.color]];g(e,"line")&&h(a,e,{vals:l,containerStr:"line",cLetter:"c"});return n({lineColor:l,cscale:b})}},
{"../../components/colorscale/calc":585,"../../components/colorscale/helpers":588,"../../lib":700,"../../lib/gup":698}],1019:[function(a,t,m){t.exports={maxDimensionCount:60,overdrag:45,verticalPadding:2,tickDistance:50,canvasPixelRatio:1,blockLineCount:5E3,layers:["contextLineLayer","focusLineLayer","pickLineLayer"],axisTitleOffset:28,axisExtentOffset:10,bar:{width:4,captureWidth:10,fillColor:"magenta",fillOpacity:1,snapDuration:150,snapRatio:.25,snapClose:.01,strokeColor:"white",strokeOpacity:1,
strokeWidth:1,handleHeight:8,handleOpacity:1,handleOverlap:0},cn:{axisExtentText:"axis-extent-text",parcoordsLineLayers:"parcoords-line-layers",parcoordsLineLayer:"parcoords-lines",parcoords:"parcoords",parcoordsControlView:"parcoords-control-view",yAxis:"y-axis",axisOverlays:"axis-overlays",axis:"axis",axisHeading:"axis-heading",axisTitle:"axis-title",axisExtent:"axis-extent",axisExtentTop:"axis-extent-top",axisExtentTopText:"axis-extent-top-text",axisExtentBottom:"axis-extent-bottom",axisExtentBottomText:"axis-extent-bottom-text",
axisBrush:"axis-brush"},id:{filterBarPattern:"filter-bar-pattern"}}},{}],1020:[function(a,t,m){function p(a,b,d,f,g){var c=g("line.color",d);if(e(a,"line")&&h.isArrayOrTypedArray(c)){if(c.length)return g("line.colorscale"),n(a,b,f,g,{prefix:"line.",cLetter:"c"}),c.length;b.line.color=d}return Infinity}function g(a,b){function c(c,d){return h.coerce(a,b,u.dimensions,c,d)}var d=c("values"),e=c("visible");d&&d.length||(e=b.visible=!1);e&&(c("label"),c("tickvals"),c("ticktext"),c("tickformat"),c("range"),
c("multiselect"),d=c("constraintrange"))&&(b.constraintrange=q.cleanRanges(d,b))}var h=a("../../lib"),e=a("../../components/colorscale/helpers").hasColorscale,n=a("../../components/colorscale/defaults"),b=a("../../plots/domain").defaults,l=a("../../plots/array_container_defaults"),u=a("./attributes"),q=a("./axisbrush"),d=a("./constants").maxDimensionCount,f=a("./merge_length");t.exports=function(a,e,n,m){function c(b,c){return h.coerce(a,e,u,b,c)}var k=a.dimensions;Array.isArray(k)&&k.length>d&&(h.log("parcoords traces support up to "+
d+" dimensions at the moment"),k.splice(d));k=l(a,e,{name:"dimensions",handleItemDefaults:g});n=p(a,e,n,m,c);b(e,m,c);Array.isArray(k)&&k.length||(e.visible=!1);f(e,k,"values",n);m={family:m.font.family,size:Math.round(m.font.size/1.2),color:m.font.color};h.coerceFont(c,"labelfont",m);h.coerceFont(c,"tickfont",m);h.coerceFont(c,"rangefont",m)}},{"../../components/colorscale/defaults":587,"../../components/colorscale/helpers":588,"../../lib":700,"../../plots/array_container_defaults":744,"../../plots/domain":773,
"./attributes":1015,"./axisbrush":1016,"./constants":1019,"./merge_length":1023}],1021:[function(a,t,m){m={};m.attributes=a("./attributes");m.supplyDefaults=a("./defaults");m.calc=a("./calc");m.plot=a("./plot");m.colorbar={container:"line",min:"cmin",max:"cmax"};m.moduleType="trace";m.name="parcoords";m.basePlotModule=a("./base_plot");m.categories=["gl","regl","noOpacity"];m.meta={};t.exports=m},{"./attributes":1015,"./base_plot":1017,"./calc":1018,"./defaults":1020,"./plot":1025}],1022:[function(a,
t,m){function p(a,b,c,d,e){var f=a._gl;f.enable(f.SCISSOR_TEST);f.scissor(b,c,d,e);a.clear({color:[0,0,0,0],depth:1})}function g(a,b,c,d,e,f){function g(k){var l=Math.min(d,e-k*d);f.offset=2*k*d;f.count=2*l;0===k&&(window.cancelAnimationFrame(c.currentRafs[h]),delete c.currentRafs[h],p(a,f.scissorX,f.scissorY,f.scissorWidth,f.viewBoxSize[1]));c.clearOnly||(b(f),k*d+l<e&&(c.currentRafs[h]=window.requestAnimationFrame(function(){g(k+1)})),c.drawCompleted=!1)}var h=f.key;c.drawCompleted||(a.read({x:0,
y:0,width:1,height:1,data:r}),c.drawCompleted=!0);g(0)}function h(a,b,c){for(var d=[],e=0;256>e;e++){var f=a(e/255);d.push((b?k:f).concat(c))}return d}function e(a,b,c){for(var d=b.length,e=[],f=0;f<a;f++)for(var g=0;64>g;g++)e.push(g<d?b[g].paddedUnitValues[f]:63===g?Math.max(1E-6,Math.min(.999999,c[f])):60<=g?(f>>>8*(62-g))%256/255:.5);return e}function n(a,b,c){var d,e,f,g=[];for(e=0;e<a;e++)for(f=0;2>f;f++)for(d=0;4>d;d++)g.push(b[64*e+4*c+d]),63===4*c+d&&0===f%2&&(g[g.length-1]*=-1);return g}
function b(a,b,c){for(var d=0;16>d;d++)a["p"+d.toString(16)](n(b,c,d))}function l(a){for(var b={},c=0;16>c;c++)b["p"+c.toString(16)]=a.buffer({usage:"dynamic",type:"float",data:new Uint8Array(0)});return b}m=a("glslify");var u=m(["precision highp float;\n#define GLSLIFY 1\n\nattribute vec4 p0, p1, p2, p3,\n               p4, p5, p6, p7,\n               p8, p9, pa, pb,\n               pc, pd, pe;\n\nattribute vec4 pf;\n\nuniform mat4 dim1A, dim2A, dim1B, dim2B, dim1C, dim2C, dim1D, dim2D,\n             loA, hiA, loB, hiB, loC, hiC, loD, hiD;\n\nuniform vec2 resolution,\n             viewBoxPosition,\n             viewBoxSize;\n\nuniform sampler2D palette;\nuniform sampler2D mask;\nuniform float maskHeight;\n\nuniform vec2 colorClamp;\n\nvarying vec4 fragColor;\n\nvec4 unit_1 \x3d vec4(1, 1, 1, 1);\n\nfloat val(mat4 p, mat4 v) {\n    return dot(matrixCompMult(p, v) * unit_1, unit_1);\n}\n\nfloat axisY(\n        float x,\n        mat4 d[4],\n        mat4 dim1A, mat4 dim2A, mat4 dim1B, mat4 dim2B, mat4 dim1C, mat4 dim2C, mat4 dim1D, mat4 dim2D\n    ) {\n\n    float y1 \x3d val(d[0], dim1A) + val(d[1], dim1B) + val(d[2], dim1C) + val(d[3], dim1D);\n    float y2 \x3d val(d[0], dim2A) + val(d[1], dim2B) + val(d[2], dim2C) + val(d[3], dim2D);\n    return y1 * (1.0 - x) + y2 * x;\n}\n\nconst int bitsPerByte \x3d 8;\n\nint mod2(int a) {\n    return a - 2 * (a / 2);\n}\n\nint mod8(int a) {\n    return a - 8 * (a / 8);\n}\n\nvec4 zero \x3d vec4(0, 0, 0, 0);\nvec4 unit_0 \x3d vec4(1, 1, 1, 1);\nvec2 xyProjection \x3d vec2(1, 1);\n\nmat4 mclamp(mat4 m, mat4 lo, mat4 hi) {\n    return mat4(clamp(m[0], lo[0], hi[0]),\n                clamp(m[1], lo[1], hi[1]),\n                clamp(m[2], lo[2], hi[2]),\n                clamp(m[3], lo[3], hi[3]));\n}\n\nbool mshow(mat4 p, mat4 lo, mat4 hi) {\n    return mclamp(p, lo, hi) \x3d\x3d p;\n}\n\nbool withinBoundingBox(\n        mat4 d[4],\n        mat4 loA, mat4 hiA, mat4 loB, mat4 hiB, mat4 loC, mat4 hiC, mat4 loD, mat4 hiD\n    ) {\n\n    return mshow(d[0], loA, hiA) \x26\x26\n           mshow(d[1], loB, hiB) \x26\x26\n           mshow(d[2], loC, hiC) \x26\x26\n           mshow(d[3], loD, hiD);\n}\n\nbool withinRasterMask(mat4 d[4], sampler2D mask, float height) {\n    bool result \x3d true;\n    int bitInByteStepper;\n    float valY, valueY, scaleX;\n    int hit, bitmask, valX;\n    for(int i \x3d 0; i \x3c 4; i++) {\n        for(int j \x3d 0; j \x3c 4; j++) {\n            for(int k \x3d 0; k \x3c 4; k++) {\n                bitInByteStepper \x3d mod8(j * 4 + k);\n                valX \x3d i * 2 + j / 2;\n                valY \x3d d[i][j][k];\n                valueY \x3d valY * (height - 1.0) + 0.5;\n                scaleX \x3d (float(valX) + 0.5) / 8.0;\n                hit \x3d int(texture2D(mask, vec2(scaleX, (valueY + 0.5) / height))[3] * 255.0) / int(pow(2.0, float(bitInByteStepper)));\n                result \x3d result \x26\x26 mod2(hit) \x3d\x3d 1;\n            }\n        }\n    }\n    return result;\n}\n\nvec4 position(\n        float depth,\n        vec2 resolution, vec2 viewBoxPosition, vec2 viewBoxSize,\n        mat4 dims[4],\n        float signum,\n        mat4 dim1A, mat4 dim2A, mat4 dim1B, mat4 dim2B, mat4 dim1C, mat4 dim2C, mat4 dim1D, mat4 dim2D,\n        mat4 loA, mat4 hiA, mat4 loB, mat4 hiB, mat4 loC, mat4 hiC, mat4 loD, mat4 hiD,\n        sampler2D mask, float maskHeight\n    ) {\n\n    float x \x3d 0.5 * signum + 0.5;\n    float y \x3d axisY(x, dims, dim1A, dim2A, dim1B, dim2B, dim1C, dim2C, dim1D, dim2D);\n\n    float show \x3d float(\n                            withinBoundingBox(dims, loA, hiA, loB, hiB, loC, hiC, loD, hiD)\n                         \x26\x26 withinRasterMask(dims, mask, maskHeight)\n                      );\n\n    vec2 viewBoxXY \x3d viewBoxPosition + viewBoxSize * vec2(x, y);\n    float depthOrHide \x3d depth + 2.0 * (1.0 - show);\n\n    return vec4(\n        xyProjection * (2.0 * viewBoxXY / resolution - 1.0),\n        depthOrHide,\n        1.0\n    );\n}\n\nvoid main() {\n\n    float prominence \x3d abs(pf[3]);\n\n    mat4 p[4];\n    p[0] \x3d mat4(p0, p1, p2, p3);\n    p[1] \x3d mat4(p4, p5, p6, p7);\n    p[2] \x3d mat4(p8, p9, pa, pb);\n    p[3] \x3d mat4(pc, pd, pe, abs(pf));\n\n    gl_Position \x3d position(\n        1.0 - prominence,\n        resolution, viewBoxPosition, viewBoxSize,\n        p,\n        sign(pf[3]),\n        dim1A, dim2A, dim1B, dim2B, dim1C, dim2C, dim1D, dim2D,\n        loA, hiA, loB, hiB, loC, hiC, loD, hiD,\n        mask, maskHeight\n    );\n\n    float clampedColorIndex \x3d clamp((prominence - colorClamp[0]) / (colorClamp[1] - colorClamp[0]), 0.0, 1.0);\n    fragColor \x3d texture2D(palette, vec2((clampedColorIndex * 255.0 + 0.5) / 256.0, 0.5));\n}\n"]),
q=m(["precision highp float;\n#define GLSLIFY 1\n\nattribute vec4 p0, p1, p2, p3,\n               p4, p5, p6, p7,\n               p8, p9, pa, pb,\n               pc, pd, pe;\n\nattribute vec4 pf;\n\nuniform mat4 dim1A, dim2A, dim1B, dim2B, dim1C, dim2C, dim1D, dim2D;\n\nuniform vec2 resolution,\n             viewBoxPosition,\n             viewBoxSize;\n\nuniform sampler2D palette;\n\nuniform vec2 colorClamp;\n\nvarying vec4 fragColor;\n\nvec2 xyProjection \x3d vec2(1, 1);\n\nvec4 unit \x3d vec4(1, 1, 1, 1);\n\nfloat val(mat4 p, mat4 v) {\n    return dot(matrixCompMult(p, v) * unit, unit);\n}\n\nfloat axisY(\n        float x,\n        mat4 d[4],\n        mat4 dim1A, mat4 dim2A, mat4 dim1B, mat4 dim2B, mat4 dim1C, mat4 dim2C, mat4 dim1D, mat4 dim2D\n    ) {\n\n    float y1 \x3d val(d[0], dim1A) + val(d[1], dim1B) + val(d[2], dim1C) + val(d[3], dim1D);\n    float y2 \x3d val(d[0], dim2A) + val(d[1], dim2B) + val(d[2], dim2C) + val(d[3], dim2D);\n    return y1 * (1.0 - x) + y2 * x;\n}\n\nvec4 position(\n        float depth,\n        vec2 resolution, vec2 viewBoxPosition, vec2 viewBoxSize,\n        mat4 dims[4],\n        float signum,\n        mat4 dim1A, mat4 dim2A, mat4 dim1B, mat4 dim2B, mat4 dim1C, mat4 dim2C, mat4 dim1D, mat4 dim2D\n    ) {\n\n    float x \x3d 0.5 * signum + 0.5;\n    float y \x3d axisY(x, dims, dim1A, dim2A, dim1B, dim2B, dim1C, dim2C, dim1D, dim2D);\n\n    vec2 viewBoxXY \x3d viewBoxPosition + viewBoxSize * vec2(x, y);\n\n    return vec4(\n        xyProjection * (2.0 * viewBoxXY / resolution - 1.0),\n        depth,\n        1.0\n    );\n}\n\nvoid main() {\n\n    float prominence \x3d abs(pf[3]);\n\n    mat4 p[4];\n    p[0] \x3d mat4(p0, p1, p2, p3);\n    p[1] \x3d mat4(p4, p5, p6, p7);\n    p[2] \x3d mat4(p8, p9, pa, pb);\n    p[3] \x3d mat4(pc, pd, pe, abs(pf));\n\n    gl_Position \x3d position(\n        1.0 - prominence,\n        resolution, viewBoxPosition, viewBoxSize,\n        p,\n        sign(pf[3]),\n        dim1A, dim2A, dim1B, dim2B, dim1C, dim2C, dim1D, dim2D\n    );\n\n    float clampedColorIndex \x3d clamp((prominence - colorClamp[0]) / (colorClamp[1] - colorClamp[0]), 0.0, 1.0);\n    fragColor \x3d texture2D(palette, vec2((clampedColorIndex * 255.0 + 0.5) / 256.0, 0.5));\n}\n"]),
d=m(["precision highp float;\n#define GLSLIFY 1\n\nattribute vec4 p0, p1, p2, p3,\n               p4, p5, p6, p7,\n               p8, p9, pa, pb,\n               pc, pd, pe;\n\nattribute vec4 pf;\n\nuniform mat4 dim1A, dim2A, dim1B, dim2B, dim1C, dim2C, dim1D, dim2D,\n             loA, hiA, loB, hiB, loC, hiC, loD, hiD;\n\nuniform vec2 resolution,\n             viewBoxPosition,\n             viewBoxSize;\n\nuniform sampler2D mask;\nuniform float maskHeight;\n\nuniform vec2 colorClamp;\n\nvarying vec4 fragColor;\n\nvec4 unit_1 \x3d vec4(1, 1, 1, 1);\n\nfloat val(mat4 p, mat4 v) {\n    return dot(matrixCompMult(p, v) * unit_1, unit_1);\n}\n\nfloat axisY(\n        float x,\n        mat4 d[4],\n        mat4 dim1A, mat4 dim2A, mat4 dim1B, mat4 dim2B, mat4 dim1C, mat4 dim2C, mat4 dim1D, mat4 dim2D\n    ) {\n\n    float y1 \x3d val(d[0], dim1A) + val(d[1], dim1B) + val(d[2], dim1C) + val(d[3], dim1D);\n    float y2 \x3d val(d[0], dim2A) + val(d[1], dim2B) + val(d[2], dim2C) + val(d[3], dim2D);\n    return y1 * (1.0 - x) + y2 * x;\n}\n\nconst int bitsPerByte \x3d 8;\n\nint mod2(int a) {\n    return a - 2 * (a / 2);\n}\n\nint mod8(int a) {\n    return a - 8 * (a / 8);\n}\n\nvec4 zero \x3d vec4(0, 0, 0, 0);\nvec4 unit_0 \x3d vec4(1, 1, 1, 1);\nvec2 xyProjection \x3d vec2(1, 1);\n\nmat4 mclamp(mat4 m, mat4 lo, mat4 hi) {\n    return mat4(clamp(m[0], lo[0], hi[0]),\n                clamp(m[1], lo[1], hi[1]),\n                clamp(m[2], lo[2], hi[2]),\n                clamp(m[3], lo[3], hi[3]));\n}\n\nbool mshow(mat4 p, mat4 lo, mat4 hi) {\n    return mclamp(p, lo, hi) \x3d\x3d p;\n}\n\nbool withinBoundingBox(\n        mat4 d[4],\n        mat4 loA, mat4 hiA, mat4 loB, mat4 hiB, mat4 loC, mat4 hiC, mat4 loD, mat4 hiD\n    ) {\n\n    return mshow(d[0], loA, hiA) \x26\x26\n           mshow(d[1], loB, hiB) \x26\x26\n           mshow(d[2], loC, hiC) \x26\x26\n           mshow(d[3], loD, hiD);\n}\n\nbool withinRasterMask(mat4 d[4], sampler2D mask, float height) {\n    bool result \x3d true;\n    int bitInByteStepper;\n    float valY, valueY, scaleX;\n    int hit, bitmask, valX;\n    for(int i \x3d 0; i \x3c 4; i++) {\n        for(int j \x3d 0; j \x3c 4; j++) {\n            for(int k \x3d 0; k \x3c 4; k++) {\n                bitInByteStepper \x3d mod8(j * 4 + k);\n                valX \x3d i * 2 + j / 2;\n                valY \x3d d[i][j][k];\n                valueY \x3d valY * (height - 1.0) + 0.5;\n                scaleX \x3d (float(valX) + 0.5) / 8.0;\n                hit \x3d int(texture2D(mask, vec2(scaleX, (valueY + 0.5) / height))[3] * 255.0) / int(pow(2.0, float(bitInByteStepper)));\n                result \x3d result \x26\x26 mod2(hit) \x3d\x3d 1;\n            }\n        }\n    }\n    return result;\n}\n\nvec4 position(\n        float depth,\n        vec2 resolution, vec2 viewBoxPosition, vec2 viewBoxSize,\n        mat4 dims[4],\n        float signum,\n        mat4 dim1A, mat4 dim2A, mat4 dim1B, mat4 dim2B, mat4 dim1C, mat4 dim2C, mat4 dim1D, mat4 dim2D,\n        mat4 loA, mat4 hiA, mat4 loB, mat4 hiB, mat4 loC, mat4 hiC, mat4 loD, mat4 hiD,\n        sampler2D mask, float maskHeight\n    ) {\n\n    float x \x3d 0.5 * signum + 0.5;\n    float y \x3d axisY(x, dims, dim1A, dim2A, dim1B, dim2B, dim1C, dim2C, dim1D, dim2D);\n\n    float show \x3d float(\n                            withinBoundingBox(dims, loA, hiA, loB, hiB, loC, hiC, loD, hiD)\n                         \x26\x26 withinRasterMask(dims, mask, maskHeight)\n                      );\n\n    vec2 viewBoxXY \x3d viewBoxPosition + viewBoxSize * vec2(x, y);\n    float depthOrHide \x3d depth + 2.0 * (1.0 - show);\n\n    return vec4(\n        xyProjection * (2.0 * viewBoxXY / resolution - 1.0),\n        depthOrHide,\n        1.0\n    );\n}\n\nvoid main() {\n\n    float prominence \x3d abs(pf[3]);\n\n    mat4 p[4];\n    p[0] \x3d mat4(p0, p1, p2, p3);\n    p[1] \x3d mat4(p4, p5, p6, p7);\n    p[2] \x3d mat4(p8, p9, pa, pb);\n    p[3] \x3d mat4(pc, pd, pe, abs(pf));\n\n    gl_Position \x3d position(\n        1.0 - prominence,\n        resolution, viewBoxPosition, viewBoxSize,\n        p,\n        sign(pf[3]),\n        dim1A, dim2A, dim1B, dim2B, dim1C, dim2C, dim1D, dim2D,\n        loA, hiA, loB, hiB, loC, hiC, loD, hiD,\n        mask, maskHeight\n    );\n\n    fragColor \x3d vec4(pf.rgb, 1.0);\n}\n"]),
f=m(["precision lowp float;\n#define GLSLIFY 1\n\nvarying vec4 fragColor;\n\nvoid main() {\n    gl_FragColor \x3d fragColor;\n}\n"]),c=a("../../lib"),k=[119,119,119],r=new Uint8Array(4),v=new Uint8Array(4),z={shape:[256,1],format:"rgba",type:"uint8",mag:"nearest",min:"nearest"};t.exports=function(a,k){function n(a){H=a.model;E=a.viewModel;K=E.dimensions.slice();I=K[0]?K[0].values.length:0;var d=H.lines,f=A?d.color.map(function(a,b){return b/d.color.length}):d.color;a=Math.max(1/255,Math.pow(1/f.length,
1/3));f=e(I,K,f);b(J,I,f);M=y.texture(c.extendFlat({data:h(H.unitToColor,t,Math.round(255*(t?a:1)))},z))}function m(a,b,d,e,f,g,h,k,l,n,m){var r,q,p,t=[a,b],u=[0,1].map(function(){return[0,1,2,3].map(function(){return new Float32Array(16)})});for(r=0;2>r;r++){var v=t[r];for(q=0;4>q;q++)for(p=0;16>p;p++)u[r][q][p]=p+16*q===v?1:0}r=H.lines.canvasOverdrag;q=H.domain;p=H.canvasWidth;v=H.canvasHeight;return c.extendFlat({key:h,resolution:[p,v],viewBoxPosition:[d+r,e],viewBoxSize:[f,g],i:a,ii:b,dim1A:u[0][0],
dim1B:u[0][1],dim1C:u[0][2],dim1D:u[0][3],dim2A:u[1][0],dim2B:u[1][1],dim2C:u[1][2],dim2D:u[1][3],colorClamp:O,scissorX:(k===l?0:d+r)+(H.pad.l-r)+H.layoutWidth*q.x[0],scissorWidth:(k===n?p-d+r:f+.5)+(k===l?d+r:0),scissorY:e+H.pad.b+H.layoutHeight*q.y[0],scissorHeight:g,viewportX:H.pad.l-r+H.layoutWidth*q.x[0],viewportY:H.pad.b+H.layoutHeight*q.y[0],viewportWidth:p,viewportHeight:v},m)}function r(){function a(a,b){return[Math.max(0,Math.floor(2047*b[0])),Math.min(2047,Math.ceil(2047*b[1]))]}var b,
c,d,e=[0,1].map(function(){return[0,1,2,3].map(function(){return new Float32Array(16)})});for(b=0;2>b;b++)for(c=0;4>c;c++)for(d=0;16>d;d++){var f=d+16*c;f=f<K.length?K[f].brush.filter.getBounds()[b]:b;e[b][c][d]=f+1E-7*(2*b-1)}b=Array.apply(null,Array(16384)).map(function(){return 255});for(c=0;c<K.length;c++){f=c%8;d=(c-f)/8;f=Math.pow(2,f);var g=K[c],h=g.brush.filter.get();if(!(2>h.length))for(var k=a(g,h[0])[1],l=1;l<h.length;l++){for(var n=a(g,h[l]),m=k+1;m<n[0];m++)b[8*m+d]&=~f;k=Math.max(k,
n[1])}}b={shape:[8,2048],format:"alpha",type:"uint8",mag:"nearest",min:"nearest",data:b};L?L(b):L=y.texture(b);return{maskTexture:L,maskHeight:2048,loA:e[0][0],loB:e[0][1],loC:e[0][2],loD:e[0][3],hiA:e[1][0],hiB:e[1][1],hiC:e[1][2],hiD:e[1][3]}}var t=k.context,A=k.pick,y=k.regl,G={currentRafs:{},drawCompleted:!0,clearOnly:!1},H,E,K,I,J=l(y),L,M=y.texture(z);n(k);var N=y({profile:!1,blend:{enable:t,func:{srcRGB:"src alpha",dstRGB:"one minus src alpha",srcAlpha:1,dstAlpha:1},equation:{rgb:"add",alpha:"add"},
color:[0,0,0,0]},depth:{enable:!t,mask:!0,func:"less",range:[0,1]},cull:{enable:!0,face:"back"},scissor:{enable:!0,box:{x:y.prop("scissorX"),y:y.prop("scissorY"),width:y.prop("scissorWidth"),height:y.prop("scissorHeight")}},viewport:{x:y.prop("viewportX"),y:y.prop("viewportY"),width:y.prop("viewportWidth"),height:y.prop("viewportHeight")},dither:!1,vert:A?d:t?q:u,frag:f,primitive:"lines",lineWidth:1,attributes:J,uniforms:{resolution:y.prop("resolution"),viewBoxPosition:y.prop("viewBoxPosition"),viewBoxSize:y.prop("viewBoxSize"),
dim1A:y.prop("dim1A"),dim2A:y.prop("dim2A"),dim1B:y.prop("dim1B"),dim2B:y.prop("dim2B"),dim1C:y.prop("dim1C"),dim2C:y.prop("dim2C"),dim1D:y.prop("dim1D"),dim2D:y.prop("dim2D"),loA:y.prop("loA"),hiA:y.prop("hiA"),loB:y.prop("loB"),hiB:y.prop("hiB"),loC:y.prop("loC"),hiC:y.prop("hiC"),loD:y.prop("loD"),hiD:y.prop("hiD"),palette:M,mask:y.prop("maskTexture"),maskHeight:y.prop("maskHeight"),colorClamp:y.prop("colorClamp")},offset:y.prop("offset"),count:y.prop("count")}),O=[0,1],R=[];return{setColorDomain:function(a){O[0]=
a[0];O[1]=a[1]},render:function(a,b,c){var d=a.length,e,f=Infinity,h=-Infinity;for(e=0;e<d;e++){if(a[e].dim2.canvasX>h){h=a[e].dim2.canvasX;var k=e}if(a[e].dim1.canvasX<f){f=a[e].dim1.canvasX;var l=e}}0===d&&p(y,0,0,H.canvasWidth,H.canvasHeight);f=t?{}:r();for(e=0;e<d;e++){var n=a[e];h=n.dim1;var q=h.crossfilterDimensionIndex,u=n.canvasX,v=n.canvasY,w=n.dim2.crossfilterDimensionIndex,x=n.panelSizeX;n=n.panelSizeY;var z=u+x;if(b||!R[q]||R[q][0]!==u||R[q][1]!==z)R[q]=[u,z],h=m(q,w,u,v,x,n,h.crossfilterDimensionIndex,
e,l,k,f),G.clearOnly=c,g(y,N,G,b?H.lines.blockLineCount:I,I,h)}},readPixel:function(a,b){y.read({x:a,y:b,width:1,height:1,data:v});return v},readPixels:function(a,b,c,d){var e=new Uint8Array(4*c*d);y.read({x:a,y:b,width:c,height:d,data:e});return e},destroy:function(){a.style["pointer-events"]="none";M.destroy();L&&L.destroy();for(var b in J)J[b].destroy()},update:n}}},{"../../lib":700,glslify:401}],1023:[function(a,t,m){t.exports=function(a,g,h,e){e||(e=Infinity);var n;for(n=0;n<g.length;n++){var b=
g[n];b.visible&&(e=Math.min(e,b[h].length))}Infinity===e&&(e=0);a._length=e;for(n=0;n<g.length;n++)b=g[n],b.visible&&(b._length=e);return e}},{}],1024:[function(a,t,m){function p(a){return!("visible"in a)||a.visible}function g(a){var b=a.range?a.range[0]:v.aggNums(Math.min,null,a.values,a._length);a=a.range?a.range[1]:v.aggNums(Math.max,null,a.values,a._length);if(isNaN(b)||!isFinite(b))b=0;if(isNaN(a)||!isFinite(a))a=0;b===a&&(0===b?(--b,a+=1):(b*=.9,a*=1.1));return[b,a]}function h(a,b){return b?
function(c,d){d=b[d];return null===d||void 0===d?a(c):d}:a}function e(a,b,c,d,e){var f=g(c);return d?r.scale.ordinal().domain(d.map(h(r.format(c.tickformat),e))).range(d.map(function(c){return a-b+(c-f[0])/(f[1]-f[0])*(2*b-a)})):r.scale.linear().domain(f).range([a-b,b])}function n(a,b){return r.scale.linear().range([b,a-b])}function b(a,b){return r.scale.linear().domain(g(a)).range([b,1-b])}function l(a){if(a.tickvals){var b=g(a);return r.scale.ordinal().domain(a.tickvals).range(a.tickvals.map(function(a){return(a-
b[0])/(b[1]-b[0])}))}}function u(a){var b=a.map(function(a){return a[0]}),c=a.map(function(a){return r.rgb(a[1])}),d=function(a){return function(b){return b[a]}},e=["r","g","b"].map(function(a){return r.scale.linear().clamp(!0).domain(b).range(c.map(d(a)))});return function(a){return e.map(function(b){return b(a)})}}function q(a){return a.dimensions.some(function(a){return a.brush.filterSpecified})}function d(a,b,c){b=x(b);var d=b.trace,e=b.lineColor,f=d.line;b=f.reversescale?A.flipScale(b.cscale):
b.cscale;var h=d.domain,k=d.dimensions,l=a.width,n=d.labelfont,m=d.tickfont,q=d.rangefont;d=v.extendDeepNoArrays({},f,{color:e.map(r.scale.linear().domain(g({values:e,range:[f.cmin,f.cmax],_length:d._length}))),blockLineCount:F.blockLineCount,canvasOverdrag:F.overdrag*F.canvasPixelRatio});e=a.margin||{l:80,r:80,t:100,b:80};f=Math.floor(l*(h.x[1]-h.x[0]));var t=Math.floor(a.height*(h.y[1]-h.y[0]));return{key:c,colCount:k.filter(p).length,dimensions:k,tickDistance:F.tickDistance,unitToColor:u(b),lines:d,
labelFont:n,tickFont:m,rangeFont:q,layoutWidth:l,layoutHeight:a.height,domain:h,translateX:h.x[0]*l,translateY:a.height-h.y[1]*a.height,pad:e,canvasWidth:f*F.canvasPixelRatio+2*d.canvasOverdrag,canvasHeight:t*F.canvasPixelRatio,width:f,height:t,canvasPixelRatio:F.canvasPixelRatio}}function f(a,c,d){var f=d.width,g=d.height,h=d.dimensions,k=d.canvasPixelRatio,m=function(a){return f*a/Math.max(1,d.colCount-1)},t=F.verticalPadding/g,u=n(g,F.verticalPadding),w={key:d.key,xScale:m,model:d,inBrushDrag:!1},
x={};w.dimensions=h.filter(p).map(function(f,h){function n(a,b){return{val:a,text:G[b]}}function p(a,b){return a.val-b.val}var z=b(f,t),A=x[f.label];x[f.label]=(A||0)+1;A=f.label+(A?"__"+A:"");var y=f.constraintrange,D=y&&y.length;D&&!Array.isArray(y[0])&&(y=[y]);y=D?y.map(function(a){return a.map(z)}):[[0,1]];var C=f.values;C.length>f._length&&(C=C.slice(0,f._length));var E=f.tickvals;if(Array.isArray(E)&&E.length){var G=f.ticktext;Array.isArray(G)&&G.length?G.length>E.length?G=G.slice(0,E.length):
E.length>G.length&&(E=E.slice(0,G.length)):G=E.map(r.format(f.tickformat));for(var H=1;H<E.length;H++)if(E[H]<E[H-1]){H=E.map(n).sort(p);for(var J=0;J<E.length;J++)E[J]=H[J].val,G[J]=H[J].text;break}}else E=void 0;return{key:A,label:f.label,tickFormat:f.tickformat,tickvals:E,ticktext:G,ordinal:!!E,multiselect:f.multiselect,xIndex:h,crossfilterDimensionIndex:h,visibleIndex:f._index,height:g,values:C,paddedUnitValues:C.map(z),unitTickvals:E&&E.map(z),xScale:m,x:m(h),canvasX:m(h)*k,unitToPaddedPx:u,
domainScale:e(g,F.verticalPadding,f,E,G),ordinalScale:l(f),parent:w,model:d,brush:B.makeBrush(a,D,y,function(){a.linePickActive(!1)},function(){w.focusLayer&&w.focusLayer.render(w.panels,!0);var b=q(w);!a.contextShown()&&b?(w.contextLayer&&w.contextLayer.render(w.panels,!0),a.contextShown(!0)):a.contextShown()&&!b&&(w.contextLayer&&w.contextLayer.render(w.panels,!0,!0),a.contextShown(!1))},function(b){w.focusLayer.render(w.panels,!0);w.pickLayer&&w.pickLayer.render(w.panels,!0);a.linePickActive(!0);
if(c&&c.filterChanged){var d=z.invert;b=b.map(function(a){return a.map(d).sort(v.sorterAsc)}).sort(function(a,b){return a[0]-b[0]});c.filterChanged(w.key,f._index,b)}})}});return w}function c(a){a.classed(F.cn.axisExtentText,!0).attr("text-anchor","middle").style("cursor","default").style("user-select","none")}function k(){var a=!0,b=!1;return{linePickActive:function(b){return arguments.length?a=!!b:a},contextShown:function(a){return arguments.length?b=!!a:b}}}var r=a("d3"),v=a("../../lib"),z=a("../../components/drawing"),
A=a("../../components/colorscale");m=a("../../lib/gup");var y=m.keyFun,w=m.repeat,x=m.unwrap,F=a("./constants"),B=a("./axisbrush"),C=a("./lines");t.exports=function(a,b,e,g,h,l){function n(a,b){var c=b.panels||(b.panels=[]);a=a.data();for(var d=a.length-1,e=0;e<d;e++){var f=c[e]||(c[e]={}),g=a[e],h=a[e+1];f.dim1=g;f.dim2=h;f.canvasX=g.canvasX;f.panelSizeX=h.canvasX-g.canvasX;f.panelSizeY=b.model.canvasHeight;f.y=0;f.canvasY=0}}function m(a,b){if(a.ordinal)return"";var c=a.domainScale.domain();return r.format(a.tickFormat)(c[b?
c.length-1:0])}var p=k(),t=g.filter(function(a){return x(a).trace.visible}).map(d.bind(0,h)).map(f.bind(0,p,l));e.each(function(a,b){return v.extendFlat(a,t[b])});a=e.selectAll(".gl-canvas").each(function(a){a.viewModel=t[0];a.model=a.viewModel?a.viewModel.model:null});var u=null;a.filter(function(a){return a.pick}).style("pointer-events","auto").on("mousemove",function(a){if(p.linePickActive()&&a.lineLayer&&l&&l.hover){var b=r.event,c=this.width,d=this.height,e=r.mouse(this),f=e[0];e=e[1];0>f||0>
e||f>=c||e>=d||(d=a.lineLayer.readPixel(f,d-1-e),d=(c=0!==d[3])?d[2]+256*(d[1]+256*d[0]):null,a={x:f,y:e,clientX:b.clientX,clientY:b.clientY,dataIndex:a.model.key,curveNumber:d},d!==u&&(c?l.hover(a):l.unhover&&l.unhover(a),u=d))}});a.style("opacity",function(a){return a.pick?.01:1});b.style("background","rgba(255, 255, 255, 0)");b=b.selectAll("."+F.cn.parcoords).data(t,y);b.exit().remove();b.enter().append("g").classed(F.cn.parcoords,!0).style("shape-rendering","crispEdges").style("pointer-events",
"none");b.attr("transform",function(a){return"translate("+a.model.translateX+","+a.model.translateY+")"});b=b.selectAll("."+F.cn.parcoordsControlView).data(w,y);b.enter().append("g").classed(F.cn.parcoordsControlView,!0);b.attr("transform",function(a){return"translate("+a.model.pad.l+","+a.model.pad.t+")"});var A=b.selectAll("."+F.cn.yAxis).data(function(a){return a.dimensions},y);A.enter().append("g").classed(F.cn.yAxis,!0);b.each(function(a){n(A,a)});a.each(function(a){if(a.viewModel){!a.lineLayer||
l?a.lineLayer=C(this,a):a.lineLayer.update(a);if(a.key||0===a.key)a.viewModel[a.key]=a.lineLayer;a.lineLayer.render(a.viewModel.panels,!a.context||l)}});A.attr("transform",function(a){return"translate("+a.xScale(a.xIndex)+", 0)"});A.call(r.behavior.drag().origin(function(a){return a}).on("drag",function(a){var b=a.parent;p.linePickActive(!1);a.x=Math.max(-F.overdrag,Math.min(a.model.width+F.overdrag,r.event.x));a.canvasX=a.x*a.model.canvasPixelRatio;A.sort(function(a,b){return a.x-b.x}).each(function(b,
c){b.xIndex=c;b.x=a===b?b.x:b.xScale(b.xIndex);b.canvasX=b.x*b.model.canvasPixelRatio});n(A,b);A.filter(function(b){return 0!==Math.abs(a.xIndex-b.xIndex)}).attr("transform",function(a){return"translate("+a.xScale(a.xIndex)+", 0)"});r.select(this).attr("transform","translate("+a.x+", 0)");A.each(function(c,d,e){e===a.parent.key&&(b.dimensions[d]=c)});b.contextLayer&&b.contextLayer.render(b.panels,!1,!q(b));b.focusLayer.render&&b.focusLayer.render(b.panels)}).on("dragend",function(a){var b=a.parent;
a.x=a.xScale(a.xIndex);a.canvasX=a.x*a.model.canvasPixelRatio;n(A,b);r.select(this).attr("transform",function(a){return"translate("+a.x+", 0)"});b.contextLayer&&b.contextLayer.render(b.panels,!1,!q(b));b.focusLayer&&b.focusLayer.render(b.panels);b.pickLayer&&b.pickLayer.render(b.panels,!0);p.linePickActive(!0);l&&l.axesMoved&&l.axesMoved(b.key,b.dimensions.map(function(a){return a.crossfilterDimensionIndex}))}));A.exit().remove();b=A.selectAll("."+F.cn.axisOverlays).data(w,y);b.enter().append("g").classed(F.cn.axisOverlays,
!0);b.selectAll("."+F.cn.axis).remove();var D=b.selectAll("."+F.cn.axis).data(w,y);D.enter().append("g").classed(F.cn.axis,!0);D.each(function(a){var b=a.model.height/a.model.tickDistance,c=a.domainScale,d=c.domain();r.select(this).call(r.svg.axis().orient("left").tickSize(4).outerTickSize(2).ticks(b,a.tickFormat).tickValues(a.ordinal?d:null).tickFormat(a.ordinal?function(a){return a}:null).scale(c));z.font(D.selectAll("text"),a.model.tickFont)});D.selectAll(".domain, .tick\x3eline").attr("fill",
"none").attr("stroke","black").attr("stroke-opacity",.25).attr("stroke-width","1px");D.selectAll("text").style("text-shadow","1px 1px 1px #fff, -1px -1px 1px #fff, 1px -1px 1px #fff, -1px 1px 1px #fff").style("cursor","default").style("user-select","none");a=b.selectAll("."+F.cn.axisHeading).data(w,y);a.enter().append("g").classed(F.cn.axisHeading,!0);a=a.selectAll("."+F.cn.axisTitle).data(w,y);a.enter().append("text").classed(F.cn.axisTitle,!0).attr("text-anchor","middle").style("cursor","ew-resize").style("user-select",
"none").style("pointer-events","auto");a.attr("transform","translate(0,"+-F.axisTitleOffset+")").text(function(a){return a.label}).each(function(a){z.font(r.select(this),a.model.labelFont)});a=b.selectAll("."+F.cn.axisExtent).data(w,y);a.enter().append("g").classed(F.cn.axisExtent,!0);e=a.selectAll("."+F.cn.axisExtentTop).data(w,y);e.enter().append("g").classed(F.cn.axisExtentTop,!0);e.attr("transform","translate(0,"+-F.axisExtentOffset+")");e=e.selectAll("."+F.cn.axisExtentTopText).data(w,y);e.enter().append("text").classed(F.cn.axisExtentTopText,
!0).call(c);e.text(function(a){return m(a,!0)}).each(function(a){z.font(r.select(this),a.model.rangeFont)});a=a.selectAll("."+F.cn.axisExtentBottom).data(w,y);a.enter().append("g").classed(F.cn.axisExtentBottom,!0);a.attr("transform",function(a){return"translate(0,"+(a.model.height+F.axisExtentOffset)+")"});a=a.selectAll("."+F.cn.axisExtentBottomText).data(w,y);a.enter().append("text").classed(F.cn.axisExtentBottomText,!0).attr("dy","0.75em").call(c);a.text(function(a){return m(a)}).each(function(a){z.font(r.select(this),
a.model.rangeFont)});B.ensureAxisBrush(b)}},{"../../components/colorscale":589,"../../components/drawing":598,"../../lib":700,"../../lib/gup":698,"./axisbrush":1016,"./constants":1019,"./lines":1022,d3:154}],1025:[function(a,t,m){var p=a("./parcoords"),g=a("../../lib/prepare_regl");t.exports=function(a,e){var h=a._fullLayout,b=h._toppaper,l=h._paperdiv,m=h._glcontainer;if(g(a)){var q={},d={},f={},c={},k=h._size;e.forEach(function(b,e){b=b[0].trace;f[e]=b.index;b=c[e]=b._fullInput.index;q[e]=a.data[b].dimensions;
d[e]=a.data[b].dimensions.slice()});p(l,b,m,e,{width:k.w,height:k.h,margin:{t:k.t,r:k.r,b:k.b,l:k.l}},{filterChanged:function(b,e,g){var k=d[b][e];g=g.map(function(a){return a.slice()});var l="dimensions["+e+"].constraintrange",n=h._tracePreGUI[a._fullData[f[b]]._fullInput.uid];void 0===n[l]&&(n[l]=k.constraintrange||null);e=a._fullData[f[b]].dimensions[e];g.length?(1===g.length&&(g=g[0]),k.constraintrange=g,e.constraintrange=g.slice(),g=[g]):(delete k.constraintrange,delete e.constraintrange,g=null);
k={};k[l]=g;a.emit("plotly_restyle",[k,[c[b]]])},hover:function(b){a.emit("plotly_hover",b)},unhover:function(b){a.emit("plotly_unhover",b)},axesMoved:function(b,e){function f(a){return!("visible"in a)||a.visible}function g(a,b,c){c=b.indexOf(c);a=a.indexOf(c);-1===a&&(a+=b.length);return a}var h=function(a){return function(b,c){b=g(e,a,b);c=g(e,a,c);return b-c}}(d[b].filter(f));q[b].sort(h);d[b].filter(function(a){return!f(a)}).sort(function(a){return d[b].indexOf(a)}).forEach(function(a){q[b].splice(q[b].indexOf(a),
1);q[b].splice(d[b].indexOf(a),0,a)});a.emit("plotly_restyle",[{dimensions:[q[b]]},[c[b]]])}})}}},{"../../lib/prepare_regl":713,"./parcoords":1024}],1026:[function(a,t,m){m=a("../../components/color/attributes");var p=a("../../plots/font_attributes"),g=a("../../plots/attributes"),h=a("../../components/fx/hovertemplate_attributes"),e=a("../../plots/domain").attributes;a=a("../../lib/extend").extendFlat;p=p({editType:"calc",arrayOk:!0,colorEditType:"plot"});t.exports={labels:{valType:"data_array",editType:"calc"},
label0:{valType:"number",dflt:0,editType:"calc"},dlabel:{valType:"number",dflt:1,editType:"calc"},values:{valType:"data_array",editType:"calc"},marker:{colors:{valType:"data_array",editType:"calc"},line:{color:{valType:"color",dflt:m.defaultLine,arrayOk:!0,editType:"style"},width:{valType:"number",min:0,dflt:0,arrayOk:!0,editType:"style"},editType:"calc"},editType:"calc"},text:{valType:"data_array",editType:"calc"},hovertext:{valType:"string",dflt:"",arrayOk:!0,editType:"style"},scalegroup:{valType:"string",
dflt:"",editType:"calc"},textinfo:{valType:"flaglist",flags:["label","text","value","percent"],extras:["none"],editType:"calc"},hoverinfo:a({},g.hoverinfo,{flags:["label","text","value","percent","name"]}),hovertemplate:h({},{keys:["label","color","value","percent","text"]}),textposition:{valType:"enumerated",values:["inside","outside","auto","none"],dflt:"auto",arrayOk:!0,editType:"calc"},textfont:a({},p,{}),insidetextfont:a({},p,{}),outsidetextfont:a({},p,{}),title:{text:{valType:"string",dflt:"",
editType:"calc"},font:a({},p,{}),position:{valType:"enumerated",values:"top left;top center;top right;middle center;bottom left;bottom center;bottom right".split(";"),editType:"calc"},editType:"calc"},domain:e({name:"pie",trace:!0,editType:"calc"}),hole:{valType:"number",min:0,max:1,dflt:0,editType:"calc"},sort:{valType:"boolean",dflt:!0,editType:"calc"},direction:{valType:"enumerated",values:["clockwise","counterclockwise"],dflt:"counterclockwise",editType:"calc"},rotation:{valType:"number",min:-360,
max:360,dflt:0,editType:"calc"},pull:{valType:"number",min:0,max:1,dflt:0,arrayOk:!0,editType:"calc"},_deprecated:{title:{valType:"string",dflt:"",editType:"calc"},titlefont:a({},p,{}),titleposition:{valType:"enumerated",values:"top left;top center;top right;middle center;bottom left;bottom center;bottom right".split(";"),editType:"calc"}}}},{"../../components/color/attributes":576,"../../components/fx/hovertemplate_attributes":615,"../../lib/extend":690,"../../plots/attributes":745,"../../plots/domain":773,
"../../plots/font_attributes":774}],1027:[function(a,t,m){var p=a("../../registry"),g=a("../../plots/get_data").getModuleCalcData;m.name="pie";m.plot=function(a){var e=p.getModule("pie"),h=g(a.calcdata,e)[0];e.plot(a,h)};m.clean=function(a,e,g,b){a=b._has&&b._has("pie");e=e._has&&e._has("pie");a&&!e&&b._pielayer.selectAll("g.trace").remove()}},{"../../plots/get_data":784,"../../registry":829}],1028:[function(a,t,m){function p(a){return function(d,e){if(!d)return!1;d=n(d);if(!d.isValid())return!1;
d=b.addOpacity(d,d.getAlpha());a[e]||(a[e]=d);return d}}function g(a,b){var d,c=JSON.stringify(a),e=b[c];if(!e){e=a.slice();for(d=0;d<a.length;d++)e.push(n(a[d]).lighten(20).toHexString());for(d=0;d<a.length;d++)e.push(n(a[d]).darken(20).toHexString());b[c]=e}return e}var h=a("fast-isnumeric"),e=a("../../lib").isArrayOrTypedArray,n=a("tinycolor2"),b=a("../../components/color"),l=a("./helpers"),u={};t.exports={calc:function(a,b){var d=b.values,c=e(d)&&d.length,g=b.labels,n=b.marker.colors||[],m=[],
q=a._fullLayout,t={};a=0;var u=q.hiddenlabels||[],w;if(b.dlabel)for(g=Array(d.length),w=0;w<d.length;w++)g[w]=String(b.label0+w*b.dlabel);var x=p(q._piecolormap),F=(c?d:g).length;for(w=0;w<F;w++){if(c){var B=d[w];if(!h(B))continue;B=+B;if(0>B)continue}else B=1;var C=g[w];if(void 0===C||""===C)C=w;C=String(C);var D=t[C];void 0===D?(t[C]=m.length,(D=-1!==u.indexOf(C))||(a+=B),m.push({v:B,label:C,color:x(n[w],C),i:w,pts:[w],hidden:D})):(D=m[D],D.v+=B,D.pts.push(w),D.hidden||(a+=B),!1===D.color&&n[w]&&
(D.color=x(n[w],C)))}b.sort&&m.sort(function(a,b){return b.v-a.v});m[0]&&(m[0].vTotal=a);if(b.textinfo&&"none"!==b.textinfo)for(d=-1!==b.textinfo.indexOf("label"),c=-1!==b.textinfo.indexOf("text"),g=-1!==b.textinfo.indexOf("value"),n=-1!==b.textinfo.indexOf("percent"),q=q.separators,w=0;w<m.length;w++)D=m[w],t=d?[D.label]:[],c&&(u=l.getFirstFilled(b.text,D.pts))&&t.push(u),g&&t.push(l.formatPieValue(D.v,q)),n&&t.push(l.formatPiePercent(D.v/a,q)),D.text=t.join("\x3cbr\x3e");return m},crossTraceCalc:function(a){var b=
a._fullLayout;a=a.calcdata;var e=b.piecolorway,c=b._piecolormap;b.extendpiecolors&&(e=g(e,u));for(var h=b=0;h<a.length;h++){var l=a[h];if("pie"===l[0].trace.type)for(var n=0;n<l.length;n++){var m=l[n];!1===m.color&&(c[m.label]?m.color=c[m.label]:(c[m.label]=m.color=e[b%e.length],b++))}}},makePullColorFn:p,generateExtendedColors:g}},{"../../components/color":577,"../../lib":700,"./helpers":1031,"fast-isnumeric":221,tinycolor2:521}],1029:[function(a,t,m){var p=a("../../lib"),g=a("./attributes"),h=a("../../plots/domain").defaults;
t.exports=function(a,n,b,l){function e(b,c){return p.coerce(a,n,g,b,c)}b=p.coerceFont;var m=e("values"),d=p.isArrayOrTypedArray(m),f=e("labels");if(Array.isArray(f)){var c=f.length;d&&(c=Math.min(c,m.length))}else d&&(c=m.length,e("label0"),e("dlabel"));c?(n._length=c,e("marker.line.width")&&e("marker.line.color"),e("marker.colors"),e("scalegroup"),c=e("text"),c=e("textinfo",Array.isArray(c)?"text+percent":"percent"),e("hovertext"),e("hovertemplate"),c&&"none"!==c&&(m=e("textposition"),c=(d=Array.isArray(m)||
"auto"===m)||"inside"===m,m=d||"outside"===m,c||m)&&(d=b(e,"textfont",l.font),c&&(c=p.extendFlat({},d),a.textfont&&a.textfont.color||delete c.color,b(e,"insidetextfont",c)),m&&b(e,"outsidetextfont",d)),h(n,l,e),c=e("hole"),e("title.text")&&(m=e("title.position",c?"middle center":"top center"),c||"middle center"!==m||(n.title.position="top center"),b(e,"title.font",l.font)),e("sort"),e("direction"),e("rotation"),e("pull")):n.visible=!1}},{"../../lib":700,"../../plots/domain":773,"./attributes":1026}],
1030:[function(a,t,m){var p=a("../../components/fx/helpers").appendArrayMultiPointValues;t.exports=function(a,h){var e={curveNumber:h.index,pointNumbers:a.pts,data:h._input,fullData:h,label:a.label,color:a.color,value:a.v,percent:a.percent,text:a.text,v:a.v};1===a.pts.length&&(e.pointNumber=e.i=a.pts[0]);p(e,h,a.pts);return e}},{"../../components/fx/helpers":612}],1031:[function(a,t,m){var p=a("../../lib");m.formatPiePercent=function(a,h){a=(100*a).toPrecision(3);-1!==a.lastIndexOf(".")&&(a=a.replace(/[.]?0+$/,
""));return p.numSeparate(a,h)+"%"};m.formatPieValue=function(a,h){a=a.toPrecision(10);-1!==a.lastIndexOf(".")&&(a=a.replace(/[.]?0+$/,""));return p.numSeparate(a,h)};m.getFirstFilled=function(a,h){if(Array.isArray(a))for(var e=0;e<h.length;e++){var g=a[h[e]];if(g||0===g)return g}};m.castOption=function(a,h){if(Array.isArray(a))return m.getFirstFilled(a,h);if(a)return a}},{"../../lib":700}],1032:[function(a,t,m){m={};m.attributes=a("./attributes");m.supplyDefaults=a("./defaults");m.supplyLayoutDefaults=
a("./layout_defaults");m.layoutAttributes=a("./layout_attributes");var p=a("./calc");m.calc=p.calc;m.crossTraceCalc=p.crossTraceCalc;m.plot=a("./plot").plot;m.style=a("./style");m.styleOne=a("./style_one");m.moduleType="trace";m.name="pie";m.basePlotModule=a("./base_plot");m.categories=["pie","showLegend"];m.meta={};t.exports=m},{"./attributes":1026,"./base_plot":1027,"./calc":1028,"./defaults":1029,"./layout_attributes":1033,"./layout_defaults":1034,"./plot":1035,"./style":1036,"./style_one":1037}],
1033:[function(a,t,m){t.exports={hiddenlabels:{valType:"data_array",editType:"calc"},piecolorway:{valType:"colorlist",editType:"calc"},extendpiecolors:{valType:"boolean",dflt:!0,editType:"calc"}}},{}],1034:[function(a,t,m){var p=a("../../lib"),g=a("./layout_attributes");t.exports=function(a,e){p.coerce(a,e,g,"hiddenlabels",void 0);p.coerce(a,e,g,"piecolorway",e.colorway);p.coerce(a,e,g,"extendpiecolors",void 0)}},{"../../lib":700,"./layout_attributes":1033}],1035:[function(a,t,m){function p(a,b){a.each(function(a){var c=
r.select(this);if(a.labelExtraX||a.labelExtraY){var d=c.select("g.slicetext text");d.attr("transform","translate("+a.labelExtraX+","+a.labelExtraY+")"+d.attr("transform"));d=a.cxFinal+a.pxmid[0];var e="M"+d+","+(a.cyFinal+a.pxmid[1]),f=(a.yLabelMax-a.yLabelMin)*(0>a.pxmid[0]?-1:1)/4;if(a.labelExtraX){var g=a.labelExtraX*a.pxmid[1]/a.pxmid[0],h=a.yLabelMid+a.labelExtraY-(a.cyFinal+a.pxmid[1]);e=Math.abs(g)>Math.abs(h)?e+("l"+h*a.pxmid[0]/a.pxmid[1]+","+h+"H"+(d+a.labelExtraX+f)):e+("l"+a.labelExtraX+
","+g+"v"+(h-g)+"h"+f)}else e+="V"+(a.yLabelMid+a.labelExtraY)+"h"+f;y.ensureSingle(c,"path","textline").call(z.stroke,b.outsidetextfont.color).attr({"stroke-width":Math.min(2,b.outsidetextfont.size/8),d:e,fill:"none"})}else c.select("path.textline").remove()})}function g(a,b,c){var d=c[0],e=d.trace,f=d.cx,g=d.cy;"_hasHoverLabel"in e||(e._hasHoverLabel=!1);"_hasHoverEvent"in e||(e._hasHoverEvent=!1);a.on("mouseover",function(a){var c=b._fullLayout,h=b._fullData[e.index];if(!b._dragging&&!1!==c.hovermode){var k=
h.hoverinfo;Array.isArray(k)&&(k=v.castHoverinfo({hoverinfo:[x.castOption(k,a.pts)],_module:e._module},c,0));"all"===k&&(k="label+text+value+percent+name");if(h.hovertemplate||"none"!==k&&"skip"!==k&&k){var l=a.rInscribed,n=f+a.pxmid[0]*(1-l),m=g+a.pxmid[1]*(1-l),q=c.separators,p=[];k&&-1!==k.indexOf("label")&&p.push(a.label);a.text=x.castOption(h.hovertext||h.text,a.pts);if(k&&-1!==k.indexOf("text")){var t=a.text;t&&p.push(t)}a.value=a.v;a.valueLabel=x.formatPieValue(a.v,q);k&&-1!==k.indexOf("value")&&
p.push(a.valueLabel);a.percent=a.v/d.vTotal;a.percentLabel=x.formatPiePercent(a.percent,q);k&&-1!==k.indexOf("percent")&&p.push(a.percentLabel);q=e.hoverlabel;t=q.font;v.loneHover({x0:n-l*d.r,x1:n+l*d.r,y:m,text:p.join("\x3cbr\x3e"),name:h.hovertemplate||-1!==k.indexOf("name")?h.name:void 0,idealAlign:0>a.pxmid[0]?"left":"right",color:x.castOption(q.bgcolor,a.pts)||a.color,borderColor:x.castOption(q.bordercolor,a.pts),fontFamily:x.castOption(t.family,a.pts),fontSize:x.castOption(t.size,a.pts),fontColor:x.castOption(t.color,
a.pts),trace:h,hovertemplate:x.castOption(h.hovertemplate,a.pts),hovertemplateLabels:a,eventData:[F(a,h)]},{container:c._hoverlayer.node(),outerContainer:c._paper.node(),gd:b});e._hasHoverLabel=!0}e._hasHoverEvent=!0;b.emit("plotly_hover",{points:[F(a,h)],event:r.event})}});a.on("mouseout",function(a){var c=b._fullLayout,d=b._fullData[e.index],f=r.select(this).datum();e._hasHoverEvent&&(a.originalEvent=r.event,b.emit("plotly_unhover",{points:[F(f,d)],event:r.event}),e._hasHoverEvent=!1);e._hasHoverLabel&&
(v.loneUnhover(c._hoverlayer.node()),e._hasHoverLabel=!1)});a.on("click",function(a){var c=b._fullLayout;b._dragging||!1===c.hovermode||(b._hoverdata=[F(a,b._fullData[e.index])],v.click(b,r.event))})}function h(a,b,c){var d=x.castOption(a.outsidetextfont.color,b.pts)||x.castOption(a.textfont.color,b.pts)||c.color,e=x.castOption(a.outsidetextfont.family,b.pts)||x.castOption(a.textfont.family,b.pts)||c.family;a=x.castOption(a.outsidetextfont.size,b.pts)||x.castOption(a.textfont.size,b.pts)||c.size;
return{color:d,family:e,size:a}}function e(a,b,c){var d=x.castOption(a.insidetextfont.color,b.pts);!d&&a._input.textfont&&(d=x.castOption(a._input.textfont.color,b.pts));var e=x.castOption(a.insidetextfont.family,b.pts)||x.castOption(a.textfont.family,b.pts)||c.family;a=x.castOption(a.insidetextfont.size,b.pts)||x.castOption(a.textfont.size,b.pts)||c.size;return{color:d||z.contrast(b.color),family:e,size:a}}function n(a,b){for(var c=b._fullLayout,d,e,f=0;f<a.length;f++)if(d=a[f][0],e=d.trace,e.title.text){var g=
c.meta?y.templateString(e.title.text,{meta:c.meta}):e.title.text;e=A.tester.append("text").attr("data-notex",1).text(g).call(A.font,e.title.font).call(w.convertToTspans,b);g=A.bBox(e.node(),!0);d.titleBox={width:g.width,height:g.height};e.remove()}}function b(a,b,c){var d=a.width/a.height,e=b.halfangle,f=b.ring,g=b.rInscribed;c=c.r||b.rpx1;g={scale:g*c*2/Math.sqrt(a.width*a.width+a.height*a.height),rCenter:1-g,rotate:0};if(1<=g.scale)return g;var h=d+1/(2*Math.tan(e));h=c*Math.min(1/(Math.sqrt(h*
h+.5)+h),f/(Math.sqrt(d*d+f/2)+d));h={scale:2*h/a.height,rCenter:Math.cos(h/c)-h*d/c,rotate:(180/Math.PI*b.midangle+720)%180-90};var k=1/d;e=k+1/(2*Math.tan(e));f=c*Math.min(1/(Math.sqrt(e*e+.5)+e),f/(Math.sqrt(k*k+f/2)+k));a={scale:2*f/a.width,rCenter:Math.cos(f/c)-f/d/c,rotate:(180/Math.PI*b.midangle+810)%180-90};a=a.scale>h.scale?a:h;return 1>g.scale&&a.scale>g.scale?a:g}function l(a,b){var c=b.pxmid[0];b=b.pxmid[1];var d=a.width/2;a=a.height/2;0>c&&(d*=-1);0>b&&(a*=-1);return{scale:1,rCenter:1,
rotate:0,x:d+Math.abs(a)*(0<d?1:-1)/2,y:a/(1+c*c/(b*b)),outside:!0}}function u(a,b){var c=a.trace,e=a.cx,f=a.cy,g=0;var h=0+c.title.font.size;var k=d(c);-1!==c.title.position.indexOf("top")?(f-=(1+k)*a.r,h-=a.titleBox.height):-1!==c.title.position.indexOf("bottom")&&(f+=(1+k)*a.r);if(-1!==c.title.position.indexOf("left")){var l=b.w*(c.domain.x[1]-c.domain.x[0])/2+a.r;e-=(1+k)*a.r;g+=a.titleBox.width/2}else-1!==c.title.position.indexOf("center")?l=b.w*(c.domain.x[1]-c.domain.x[0]):-1!==c.title.position.indexOf("right")&&
(l=b.w*(c.domain.x[1]-c.domain.x[0])/2+a.r,e+=(1+k)*a.r,g-=a.titleBox.width/2);l/=a.titleBox.width;a=q(a,b)/a.titleBox.height;return{x:e,y:f,scale:Math.min(l,a),tx:g,ty:h}}function q(a,b){var c=a.trace;return Math.min(a.titleBox.height,b.h*(c.domain.y[1]-c.domain.y[0])/2)}function d(a){var b=a.pull,c;if(Array.isArray(b))for(c=b=0;c<a.pull.length;c++)a.pull[c]>b&&(b=a.pull[c]);return b}function f(a,b){function c(a,b){return a.pxmid[1]-b.pxmid[1]}function d(a,b){return b.pxmid[1]-a.pxmid[1]}function e(a,
c){c||(c={});var d=c.labelExtraY+(g?c.yLabelMax:c.yLabelMin);c=g?a.yLabelMin:a.yLabelMax;var e=g?a.yLabelMax:a.yLabelMin,f=a.cyFinal+l(a.px0[1],a.px1[1]),h=d-c;0<h*n&&(a.labelExtraY=h);if(Array.isArray(b.pull))for(d=0;d<t.length;d++){var k=t[d];k===a||(x.castOption(b.pull,a.pts)||0)>=(x.castOption(b.pull,k.pts)||0)||(0<(a.pxmid[1]-k.pxmid[1])*n?(h=k.cyFinal+l(k.px0[1],k.px1[1]),h=h-c-a.labelExtraY,0<h*n&&(a.labelExtraY+=h)):0<(e+a.labelExtraY-f)*n&&(h=3*r*Math.abs(d-t.indexOf(a)),k=k.cxFinal+m(k.px0[0],
k.px1[0]),h=k+h-(a.cxFinal+a.pxmid[0])-a.labelExtraX,0<h*r&&(a.labelExtraX+=h)))}}var f,g,h;for(g=0;2>g;g++){var k=g?c:d;var l=g?Math.max:Math.min;var n=g?1:-1;for(f=0;2>f;f++){var m=f?Math.max:Math.min;var r=f?1:-1;var q=a[g][f];q.sort(k);var p=a[1-g][f];var t=p.concat(q);var u=[];for(h=0;h<q.length;h++)void 0!==q[h].yLabelMid&&u.push(q[h]);q=!1;for(h=0;g&&h<p.length;h++)if(void 0!==p[h].yLabelMid){q=p[h];break}for(h=0;h<u.length;h++)p=h&&u[h-1],q&&!h&&(p=q),e(u[h],p)}}}function c(a,b){var c=[],
e;for(e=0;e<a.length;e++){var f=a[e][0];var g=f.trace;var h=b.w*(g.domain.x[1]-g.domain.x[0]);var k=b.h*(g.domain.y[1]-g.domain.y[0]);g.title.text&&"middle center"!==g.title.position&&(k-=q(f,b));var l=d(g);f.r=Math.min(h,k)/(2+2*l);f.cx=b.l+b.w*(g.domain.x[1]+g.domain.x[0])/2;f.cy=b.t+b.h*(1-g.domain.y[0])-k/2;g.title.text&&-1!==g.title.position.indexOf("bottom")&&(f.cy-=q(f,b));g.scalegroup&&-1===c.indexOf(g.scalegroup)&&c.push(g.scalegroup)}for(b=0;b<c.length;b++){k=Infinity;h=c[b];for(e=0;e<a.length;e++)f=
a[e][0],f.trace.scalegroup===h&&(k=Math.min(k,f.r*f.r/f.vTotal));for(e=0;e<a.length;e++)f=a[e][0],f.trace.scalegroup===h&&(f.r=Math.sqrt(k*f.vTotal))}}function k(a){function b(a){return[c.r*Math.sin(a),-c.r*Math.cos(a)]}var c=a[0],d=c.trace,e=d.rotation*Math.PI/180,f=2*Math.PI/c.vTotal,g="px0",h="px1",k;if("counterclockwise"===d.direction){for(k=0;k<a.length&&a[k].hidden;k++);if(k===a.length)return;e+=f*a[k].v;f*=-1;g="px1";h="px0"}var l=b(e);for(k=0;k<a.length;k++){var n=a[k];if(!n.hidden){n[g]=
l;e+=f*n.v/2;n.pxmid=b(e);n.midangle=e;e+=f*n.v/2;l=b(e);n[h]=l;n.largeArc=n.v>c.vTotal/2?1:0;n.halfangle=Math.PI*Math.min(n.v/c.vTotal,.5);n.ring=1-d.hole;var m=n;n=n.v!==c.vTotal||c.trace.hole?Math.min(1/(1+1/Math.sin(n.halfangle)),n.ring/2):1;m.rInscribed=n}}}var r=a("d3"),v=a("../../components/fx"),z=a("../../components/color"),A=a("../../components/drawing"),y=a("../../lib"),w=a("../../lib/svg_text_utils"),x=a("./helpers"),F=a("./event_data");t.exports={plot:function(a,d){var m=a._fullLayout;
n(d,a);c(d,m._size);var q=y.makeTraceGroups(m._pielayer,d,"trace").each(function(c){var d=r.select(this),n=c[0],q=n.trace;k(c);d.attr("stroke-linejoin","round");d.each(function(){var d=r.select(this).selectAll("g.slice").data(c);d.enter().append("g").classed("slice",!0);d.exit().remove();var k=[[[],[]],[[],[]]],t=!1;d.each(function(d){function f(a,b,c,e){return"a"+e*n.r+","+e*n.r+" 0 "+d.largeArc+(c?" 1 ":" 0 ")+e*(b[0]-a[0])+","+e*(b[1]-a[1])}if(d.hidden)r.select(this).selectAll("path,g").remove();
else{d.pointNumber=d.i;d.curveNumber=q.index;k[0>d.pxmid[1]?0:1][0>d.pxmid[0]?0:1].push(d);var m=n.cx,p=n.cy,u=r.select(this),v=u.selectAll("path.surface").data([d]);v.enter().append("path").classed("surface",!0).style({"pointer-events":"all"});u.call(g,a,c);if(q.pull){var z=+x.castOption(q.pull,d.pts)||0;0<z&&(m+=z*d.pxmid[0],p+=z*d.pxmid[1])}d.cxFinal=m;d.cyFinal=p;z=q.hole;if(d.v===n.vTotal){var B="M"+(m+d.px0[0])+","+(p+d.px0[1])+f(d.px0,d.pxmid,!0,1)+f(d.pxmid,d.px0,!0,1)+"Z";z?v.attr("d","M"+
(m+z*d.px0[0])+","+(p+z*d.px0[1])+f(d.px0,d.pxmid,!1,z)+f(d.pxmid,d.px0,!1,z)+"Z"+B):v.attr("d",B)}else if(B=f(d.px0,d.px1,!0,1),z){var E=1-z;v.attr("d","M"+(m+z*d.px1[0])+","+(p+z*d.px1[1])+f(d.px1,d.px0,!1,z)+"l"+E*d.px0[0]+","+E*d.px0[1]+B+"Z")}else v.attr("d","M"+m+","+p+"l"+d.px0[0]+","+d.px0[1]+B+"Z");var D=x.castOption(q.textposition,d.pts);u=u.selectAll("g.slicetext").data(d.text&&"none"!==D?[0]:[]);u.enter().append("g").classed("slicetext",!0);u.exit().remove();u.each(function(){var c=y.ensureSingle(r.select(this),
"text","",function(a){a.attr("data-notex",1)});c.text(d.text).attr({"class":"slicetext",transform:"","text-anchor":"middle"}).call(A.font,"outside"===D?h(q,d,a._fullLayout.font):e(q,d,a._fullLayout.font)).call(w.convertToTspans,a);var f=A.bBox(c.node());if("outside"===D)var g=l(f,d);else if(g=b(f,d,n),"auto"===D&&1>g.scale){c.call(A.font,q.outsidetextfont);if(q.outsidetextfont.family!==q.insidetextfont.family||q.outsidetextfont.size!==q.insidetextfont.size)f=A.bBox(c.node());g=l(f,d)}var k=m+d.pxmid[0]*
g.rCenter+(g.x||0),u=p+d.pxmid[1]*g.rCenter+(g.y||0);g.outside&&(d.yLabelMin=u-f.height/2,d.yLabelMid=u,d.yLabelMax=u+f.height/2,d.labelExtraX=0,d.labelExtraY=0,t=!0);c.attr("transform","translate("+k+","+u+")"+(1>g.scale?"scale("+g.scale+")":"")+(g.rotate?"rotate("+g.rotate+")":"")+"translate("+-(f.left+f.right)/2+","+-(f.top+f.bottom)/2+")")})}});var v=r.select(this).selectAll("g.titletext").data(q.title.text?[0]:[]);v.enter().append("g").classed("titletext",!0);v.exit().remove();v.each(function(){var b=
y.ensureSingle(r.select(this),"text","",function(a){a.attr("data-notex",1)}),c=m.meta?y.templateString(q.title.text,{meta:m.meta}):q.title.text;b.text(c).attr({"class":"titletext",transform:"","text-anchor":"middle"}).call(A.font,q.title.font).call(w.convertToTspans,a);c="middle center"===q.title.position?{x:n.cx,y:n.cy,scale:n.trace.hole*n.r*2/Math.sqrt(n.titleBox.width*n.titleBox.width+n.titleBox.height*n.titleBox.height),tx:0,ty:-n.titleBox.height/2+n.trace.title.font.size}:u(n,m._size);b.attr("transform",
"translate("+c.x+","+c.y+")"+(1>c.scale?"scale("+c.scale+")":"")+"translate("+c.tx+","+c.ty+")")});t&&f(k,q);p(d,q)})});setTimeout(function(){q.selectAll("tspan").each(function(){var a=r.select(this);a.attr("dy")&&a.attr("dy",a.attr("dy"))})},0)},transformInsideText:b}},{"../../components/color":577,"../../components/drawing":598,"../../components/fx":616,"../../lib":700,"../../lib/svg_text_utils":724,"./event_data":1030,"./helpers":1031,d3:154}],1036:[function(a,t,m){var p=a("d3"),g=a("./style_one");
t.exports=function(a){a._fullLayout._pielayer.selectAll(".trace").each(function(a){var e=a[0].trace;a=p.select(this);a.style({opacity:e.opacity});a.selectAll("path.surface").each(function(a){p.select(this).call(g,a,e)})})}},{"./style_one":1037,d3:154}],1037:[function(a,t,m){var p=a("../../components/color"),g=a("./helpers").castOption;t.exports=function(a,e,n){var b=n.marker.line;n=g(b.color,e.pts)||p.defaultLine;b=g(b.width,e.pts)||0;a.style({"stroke-width":b}).call(p.fill,e.color).call(p.stroke,
n)}},{"../../components/color":577,"./helpers":1031}],1038:[function(a,t,m){a=a("../scatter/attributes");t.exports={x:a.x,y:a.y,xy:{valType:"data_array",editType:"calc"},indices:{valType:"data_array",editType:"calc"},xbounds:{valType:"data_array",editType:"calc"},ybounds:{valType:"data_array",editType:"calc"},text:a.text,marker:{color:{valType:"color",arrayOk:!1,editType:"calc"},opacity:{valType:"number",min:0,max:1,dflt:1,arrayOk:!1,editType:"calc"},blend:{valType:"boolean",dflt:null,editType:"calc"},
sizemin:{valType:"number",min:.1,max:2,dflt:.5,editType:"calc"},sizemax:{valType:"number",min:.1,dflt:20,editType:"calc"},border:{color:{valType:"color",arrayOk:!1,editType:"calc"},arearatio:{valType:"number",min:0,max:1,dflt:0,editType:"calc"},editType:"calc"},editType:"calc"},transforms:void 0}},{"../scatter/attributes":1051}],1039:[function(a,t,m){function p(a,e){this.scene=a;this.uid=e;this.type="pointcloud";this.pickXData=[];this.pickYData=[];this.xData=[];this.yData=[];this.textLabels=[];this.color=
"rgb(0, 0, 0)";this.name="";this.hoverinfo="all";this.idToIndex=new Int32Array(0);this.bounds=[0,0,0,0];this.pointcloudOptions={positions:new Float32Array(0),idToIndex:this.idToIndex,sizemin:.5,sizemax:12,color:[0,0,0,1],areaRatio:1,borderColor:[0,0,0,1]};this.pointcloud=g(a.glplot,this.pointcloudOptions);this.pointcloud._trace=this}var g=a("gl-pointcloud2d"),h=a("../../lib/str2rgbarray"),e=a("../../plots/cartesian/autorange").findExtremes,n=a("../scatter/get_trace_color");a=p.prototype;a.handlePick=
function(a){var b=this.idToIndex[a.pointId];return{trace:this,dataCoord:a.dataCoord,traceCoord:this.pickXYData?[this.pickXYData[2*b],this.pickXYData[2*b+1]]:[this.pickXData[b],this.pickYData[b]],textLabel:Array.isArray(this.textLabels)?this.textLabels[b]:this.textLabels,color:this.color,name:this.name,pointIndex:b,hoverinfo:this.hoverinfo}};a.update=function(a){this.index=a.index;this.textLabels=a.text;this.name=a.name;this.hoverinfo=a.hoverinfo;this.bounds=[Infinity,Infinity,-Infinity,-Infinity];
this.updateFast(a);this.color=n(a,{})};a.updateFast=function(a){var b=this.xData=this.pickXData=a.x,g=this.yData=this.pickYData=a.y,n=this.pickXYData=a.xy,d=a.xbounds&&a.ybounds,f=a.indices,c=this.bounds,k;if(n){var m=n;n=n.length>>>1;if(d)c[0]=a.xbounds[0],c[2]=a.xbounds[1],c[1]=a.ybounds[0],c[3]=a.ybounds[1];else for(k=0;k<n;k++){d=m[2*k];var p=m[2*k+1];d<c[0]&&(c[0]=d);d>c[2]&&(c[2]=d);p<c[1]&&(c[1]=p);p>c[3]&&(c[3]=p)}if(!f)for(f=new Int32Array(n),k=0;k<n;k++)f[k]=k}else for(n=b.length,m=new Float32Array(2*
n),f=new Int32Array(n),k=0;k<n;k++)d=b[k],p=g[k],f[k]=k,m[2*k]=d,m[2*k+1]=p,d<c[0]&&(c[0]=d),d>c[2]&&(c[2]=d),p<c[1]&&(c[1]=p),p>c[3]&&(c[3]=p);this.idToIndex=f;this.pointcloudOptions.idToIndex=f;this.pointcloudOptions.positions=m;n=h(a.marker.color);m=h(a.marker.border.color);f=a.opacity*a.marker.opacity;n[3]*=f;this.pointcloudOptions.color=n;n=a.marker.blend;null===n&&(n=100>b.length||100>g.length);this.pointcloudOptions.blend=n;m[3]*=f;this.pointcloudOptions.borderColor=m;m=Math.max(a.marker.sizemax,
a.marker.sizemin);this.pointcloudOptions.sizeMin=a.marker.sizemin;this.pointcloudOptions.sizeMax=m;this.pointcloudOptions.areaRatio=a.marker.border.arearatio;this.pointcloud.update(this.pointcloudOptions);b=this.scene.xaxis;g=this.scene.yaxis;m=m/2||.5;a._extremes[b._id]=e(b,[c[0],c[2]],{ppad:m});a._extremes[g._id]=e(g,[c[1],c[3]],{ppad:m})};a.dispose=function(){this.pointcloud.dispose()};t.exports=function(a,e){a=new p(a,e.uid);a.update(e);return a}},{"../../lib/str2rgbarray":723,"../../plots/cartesian/autorange":747,
"../scatter/get_trace_color":1061,"gl-pointcloud2d":288}],1040:[function(a,t,m){var p=a("../../lib"),g=a("./attributes");t.exports=function(a,e,n){function b(b,h){return p.coerce(a,e,g,b,h)}b("x");b("y");b("xbounds");b("ybounds");a.xy&&a.xy instanceof Float32Array&&(e.xy=a.xy);a.indices&&a.indices instanceof Int32Array&&(e.indices=a.indices);b("text");b("marker.color",n);b("marker.opacity");b("marker.blend");b("marker.sizemin");b("marker.sizemax");b("marker.border.color",n);b("marker.border.arearatio");
e._length=null}},{"../../lib":700,"./attributes":1038}],1041:[function(a,t,m){m={};m.attributes=a("./attributes");m.supplyDefaults=a("./defaults");m.calc=a("../scatter3d/calc");m.plot=a("./convert");m.moduleType="trace";m.name="pointcloud";m.basePlotModule=a("../../plots/gl2d");m.categories=["gl","gl2d","showLegend"];m.meta={};t.exports=m},{"../../plots/gl2d":787,"../scatter3d/calc":1079,"./attributes":1038,"./convert":1039,"./defaults":1040}],1042:[function(a,t,m){m=a("../../plots/font_attributes");
var p=a("../../plots/attributes"),g=a("../../components/color/attributes"),h=a("../../components/fx/attributes"),e=a("../../plots/domain").attributes,n=a("../../components/fx/hovertemplate_attributes"),b=a("../../components/colorscale/attributes"),l=a("../../plot_api/plot_template").templatedArray,u=a("../../lib/extend").extendFlat;a=a("../../plot_api/edit_types").overrideAll;(t.exports=a({hoverinfo:u({},p.hoverinfo,{flags:[],arrayOk:!1}),hoverlabel:h.hoverlabel,domain:e({name:"sankey",trace:!0}),
orientation:{valType:"enumerated",values:["v","h"],dflt:"h"},valueformat:{valType:"string",dflt:".3s"},valuesuffix:{valType:"string",dflt:""},arrangement:{valType:"enumerated",values:["snap","perpendicular","freeform","fixed"],dflt:"snap"},textfont:m({}),node:{label:{valType:"data_array",dflt:[]},groups:{valType:"info_array",impliedEdits:{x:[],y:[]},dimensions:2,freeLength:!0,dflt:[],items:{valType:"number",editType:"calc"}},x:{valType:"data_array",dflt:[]},y:{valType:"data_array",dflt:[]},color:{valType:"color",
arrayOk:!0},line:{color:{valType:"color",dflt:g.defaultLine,arrayOk:!0},width:{valType:"number",min:0,dflt:.5,arrayOk:!0}},pad:{valType:"number",arrayOk:!1,min:0,dflt:20},thickness:{valType:"number",arrayOk:!1,min:1,dflt:20},hoverinfo:{valType:"enumerated",values:["all","none","skip"],dflt:"all"},hoverlabel:h.hoverlabel,hovertemplate:n({},{keys:["value","label"]})},link:{label:{valType:"data_array",dflt:[]},color:{valType:"color",arrayOk:!0},line:{color:{valType:"color",dflt:g.defaultLine,arrayOk:!0},
width:{valType:"number",min:0,dflt:0,arrayOk:!0}},source:{valType:"data_array",dflt:[]},target:{valType:"data_array",dflt:[]},value:{valType:"data_array",dflt:[]},hoverinfo:{valType:"enumerated",values:["all","none","skip"],dflt:"all"},hoverlabel:h.hoverlabel,hovertemplate:n({},{keys:["value","label"]}),colorscales:l("concentrationscales",{editType:"calc",label:{valType:"string",editType:"calc",dflt:""},cmax:{valType:"number",editType:"calc",dflt:1},cmin:{valType:"number",editType:"calc",dflt:0},
colorscale:u(b().colorscale,{dflt:[[0,"white"],[1,"black"]]})})}},"calc","nested")).transforms=void 0},{"../../components/color/attributes":576,"../../components/colorscale/attributes":584,"../../components/fx/attributes":607,"../../components/fx/hovertemplate_attributes":615,"../../lib/extend":690,"../../plot_api/edit_types":731,"../../plot_api/plot_template":738,"../../plots/attributes":745,"../../plots/domain":773,"../../plots/font_attributes":774}],1043:[function(a,t,m){t=a("../../plot_api/edit_types").overrideAll;
var p=a("../../plots/get_data").getModuleCalcData,g=a("./plot");a=a("../../components/fx/layout_attributes");m.name="sankey";m.baseLayoutAttrOverrides=t({hoverlabel:a.hoverlabel},"plot","nested");m.plot=function(a){var e=p(a.calcdata,"sankey")[0];g(a,e)};m.clean=function(a,e,g,b){a=b._has&&b._has("sankey");e=e._has&&e._has("sankey");a&&!e&&b._paperdiv.selectAll(".sankey").remove()}},{"../../components/fx/layout_attributes":617,"../../plot_api/edit_types":731,"../../plots/get_data":784,"./plot":1048}],
1044:[function(a,t,m){function p(a,b,d){for(var e=h.init2dArray(a,0),c=0;c<Math.min(b.length,d.length);c++)if(h.isIndex(b[c],a)&&h.isIndex(d[c],a)){if(b[c]===d[c])return!0;e[b[c]].push(d[c])}return g(e).components.some(function(a){return 1<a.length})}var g=a("strongly-connected-components"),h=a("../../lib"),e=a("../../lib/gup").wrap,n=h.isArrayOrTypedArray,b=h.isIndex,l=a("../../components/colorscale");t.exports=function(a,g){var d=g.node,f=g.link;a=[];var c=n(f.color),k={},m={},q=f.colorscales.length,
t;for(t=0;t<q;t++){var u=f.colorscales[t],y=l.extractScale(u,{cLetter:"c"});y=l.makeColorScaleFunc(y);m[u.label]=y}for(t=q=0;t<f.value.length;t++)f.source[t]>q&&(q=f.source[t]),f.target[t]>q&&(q=f.target[t]);q+=1;g=g.node.groups;u={};for(t=0;t<g.length;t++){var w=g[t];for(y=0;y<w.length;y++){var x=w[y],F=q+t;u.hasOwnProperty(x)?h.warn("Node "+x+" is already part of a group."):u[x]=F}}y=[];w=[];for(t=0;t<f.value.length;t++){x=f.value[t];F=f.source[t];var B=f.target[t];if(0<x&&b(F,q)&&b(B,q)&&(!u.hasOwnProperty(F)||
!u.hasOwnProperty(B)||u[F]!==u[B])){u.hasOwnProperty(B)&&(B=u[B]);u.hasOwnProperty(F)&&(F=u[F]);F=+F;B=+B;k[F]=k[B]=!0;var C="";f.label&&f.label[t]&&(C=f.label[t]);var D=null;C&&m.hasOwnProperty(C)&&(D=m[C]);a.push({pointNumber:t,label:C,color:c?f.color[t]:f.color,concentrationscale:D,source:F,target:B,value:+x});y.push(F);w.push(B)}}f=q+g.length;m=n(d.color);c=[];for(t=0;t<f;t++)k[t]&&c.push({group:t>q-1,childrenNodes:[],pointNumber:t,label:d.label[t],color:m?d.color[t]:d.color});d=!1;p(f,y,w)&&
(d=!0);return e({circular:d,_nodes:c,_links:a,_groups:g,_groupLookup:u})}},{"../../components/colorscale":589,"../../lib":700,"../../lib/gup":698,"strongly-connected-components":514}],1045:[function(a,t,m){t.exports={nodeTextOffsetHorizontal:4,nodeTextOffsetVertical:3,nodePadAcross:10,sankeyIterations:50,forceIterations:5,forceTicksPerFrame:10,duration:500,ease:"linear",cn:{sankey:"sankey",sankeyLinks:"sankey-links",sankeyLink:"sankey-link",sankeyNodeSet:"sankey-node-set",sankeyNode:"sankey-node",
nodeRect:"node-rect",nodeCapture:"node-capture",nodeCentered:"node-entered",nodeLabelGuide:"node-label-guide",nodeLabel:"node-label",nodeLabelTextPath:"node-label-text-path"}}},{}],1046:[function(a,t,m){function p(a,b){function c(c,d){return g.coerce(a,b,h.link.colorscales,c,d)}c("label");c("cmin");c("cmax");c("colorscale")}var g=a("../../lib"),h=a("./attributes"),e=a("../../components/color"),n=a("tinycolor2"),b=a("../../plots/domain").defaults,l=a("../../components/fx/hoverlabel_defaults"),u=a("../../plot_api/plot_template"),
q=a("../../plots/array_container_defaults");t.exports=function(a,f,c,k){function d(b,c){return g.coerce(a,f,h,b,c)}function m(a,b){return g.coerce(A,y,h.node,a,b)}function t(a,b){return g.coerce(x,F,h.link,a,b)}c=g.extendDeep(k.hoverlabel,a.hoverlabel);var A=a.node,y=u.newContainer(f,"node");m("label");m("groups");m("x");m("y");m("pad");m("thickness");m("line.color");m("line.width");m("hoverinfo",a.hoverinfo);l(A,y,m,c);m("hovertemplate");var w=k.colorway;m("color",y.label.map(function(a,b){return e.addOpacity(w[b%
w.length],.8)}));var x=a.link||{},F=u.newContainer(f,"link");t("label");t("source");t("target");t("value");t("line.color");t("line.width");t("hoverinfo",a.hoverinfo);l(x,F,t,c);t("hovertemplate");c=.333>n(k.paper_bgcolor).getLuminance()?"rgba(255, 255, 255, 0.6)":"rgba(0, 0, 0, 0.2)";t("color",g.repeat(c,F.value.length));q(x,F,{name:"colorscales",handleItemDefaults:p});b(f,k,d);d("orientation");d("valueformat");d("valuesuffix");var B;y.x.length&&y.y.length&&(B="freeform");d("arrangement",B);g.coerceFont(d,
"textfont",g.extendFlat({},k.font));f._length=null}},{"../../components/color":577,"../../components/fx/hoverlabel_defaults":614,"../../lib":700,"../../plot_api/plot_template":738,"../../plots/array_container_defaults":744,"../../plots/domain":773,"./attributes":1042,tinycolor2:521}],1047:[function(a,t,m){m={};m.attributes=a("./attributes");m.supplyDefaults=a("./defaults");m.calc=a("./calc");m.plot=a("./plot");m.moduleType="trace";m.name="sankey";m.basePlotModule=a("./base_plot");m.categories=["noOpacity"];
m.meta={};t.exports=m},{"./attributes":1042,"./base_plot":1043,"./calc":1044,"./defaults":1046,"./plot":1048}],1048:[function(a,t,m){function p(a){return""!==a}function g(a,b){return a.filter(function(a){return a.key===b.traceId})}function h(a,b){c.select(a).select("path").style("fill-opacity",b);c.select(a).select("rect").style("fill-opacity",b)}function e(a){c.select(a).select("text.name").style("fill","black")}function n(a){return function(b){return-1!==a.node.sourceLinks.indexOf(b.link)||-1!==
a.node.targetLinks.indexOf(b.link)}}function b(a){return function(b){return-1!==b.node.sourceLinks.indexOf(a.link)||-1!==b.node.targetLinks.indexOf(a.link)}}function l(a,b,c){b&&c&&g(c,b).selectAll("."+A.sankeyLink).filter(n(b)).call(q.bind(0,b,c,!1))}function u(a,b,c){b&&c&&g(c,b).selectAll("."+A.sankeyLink).filter(n(b)).call(d.bind(0,b,c,!1))}function q(a,c,d,e){var f=e.datum().link.label;e.style("fill-opacity",function(a){if(!a.link.concentrationscale)return.4});f&&g(c,a).selectAll("."+A.sankeyLink).filter(function(a){return a.link.label===
f}).style("fill-opacity",function(a){if(!a.link.concentrationscale)return.4});d&&g(c,a).selectAll("."+A.sankeyNode).filter(b(a)).call(l)}function d(a,c,d,e){var f=e.datum().link.label;e.style("fill-opacity",function(a){return a.tinyColorAlpha});f&&g(c,a).selectAll("."+A.sankeyLink).filter(function(a){return a.link.label===f}).style("fill-opacity",function(a){return a.tinyColorAlpha});d&&g(c,a).selectAll(A.sankeyNode).filter(b(a)).call(u)}function f(a,b){a=z.nestedProperty(a.hoverlabel||{},b).get();
return Array.isArray(a)?!1:a}var c=a("d3"),k=a("./render"),r=a("../../components/fx"),v=a("../../components/color"),z=a("../../lib"),A=a("./constants").cn,y=z._;t.exports=function(a,b){var g=a._fullLayout,n=g._paper,m=g._size,t=y(a,"source:")+" ",w=y(a,"target:")+" ",x=y(a,"concentration:")+" ",z=y(a,"incoming flow count:")+" ",K=y(a,"outgoing flow count:")+" ";k(a,n,b,{width:m.w,height:m.h,margin:{t:m.t,r:m.r,b:m.b,l:m.l}},{linkEvents:{hover:function(b,d,e){!1!==a._fullLayout.hovermode&&(c.select(b).call(q.bind(0,
d,e,!0)),"skip"!==d.link.trace.link.hoverinfo&&(d.link.fullData=d.link.trace,a.emit("plotly_hover",{event:c.event,points:[d.link]})))},follow:function(b,d){if(!1!==a._fullLayout.hovermode){var k=d.link.trace.link;if("none"!==k.hoverinfo&&"skip"!==k.hoverinfo){var l=a._fullLayout._paperdiv.node().getBoundingClientRect();if(d.link.circular)b=(d.link.circularPathData.leftInnerExtent+d.link.circularPathData.rightInnerExtent)/2+d.parent.translateX,l=d.link.circularPathData.verticalFullExtent+d.parent.translateY;
else{var n=b.getBoundingClientRect();b=n.left+n.width/2-l.left;l=n.top+n.height/2-l.top}n={valueLabel:c.format(d.valueFormat)(d.link.value)+d.valueSuffix};d.link.fullData=d.link.trace;k=r.loneHover({x:b,y:l,name:n.valueLabel,text:[d.link.label||"",t+d.link.source.label,w+d.link.target.label,d.link.concentrationscale?x+c.format("%0.2f")(d.link.flow.labelConcentration):""].filter(p).join("\x3cbr\x3e"),color:f(k,"bgcolor")||v.addOpacity(d.tinyColorHue,1),borderColor:f(k,"bordercolor"),fontFamily:f(k,
"font.family"),fontSize:f(k,"font.size"),fontColor:f(k,"font.color"),idealAlign:c.event.x<b?"right":"left",hovertemplate:k.hovertemplate,hovertemplateLabels:n,eventData:[d.link]},{container:g._hoverlayer.node(),outerContainer:g._paper.node(),gd:a});d.link.concentrationscale||h(k,.65);e(k)}}},unhover:function(b,e,f){!1!==a._fullLayout.hovermode&&(c.select(b).call(d.bind(0,e,f,!0)),"skip"!==e.link.trace.link.hoverinfo&&(e.link.fullData=e.link.trace,a.emit("plotly_unhover",{event:c.event,points:[e.link]})),
r.loneUnhover(g._hoverlayer.node()))},select:function(b,d){b=d.link;b.originalEvent=c.event;a._hoverdata=[b];r.click(a,{target:!0})}},nodeEvents:{hover:function(b,d,e){!1!==a._fullLayout.hovermode&&(c.select(b).call(l,d,e),"skip"!==d.node.trace.node.hoverinfo&&(d.node.fullData=d.node.trace,a.emit("plotly_hover",{event:c.event,points:[d.node]})))},follow:function(b,d){if(!1!==a._fullLayout.hovermode){var k=d.node.trace.node;if("none"!==k.hoverinfo&&"skip"!==k.hoverinfo){b=c.select(b).select("."+A.nodeRect);
var l=a._fullLayout._paperdiv.node().getBoundingClientRect(),n=b.node().getBoundingClientRect();b=n.left-2-l.left;var m=n.right+2-l.left;l=n.top+n.height/4-l.top;n={valueLabel:c.format(d.valueFormat)(d.node.value)+d.valueSuffix};d.node.fullData=d.node.trace;d=r.loneHover({x0:b,x1:m,y:l,name:c.format(d.valueFormat)(d.node.value)+d.valueSuffix,text:[d.node.label,z+d.node.targetLinks.length,K+d.node.sourceLinks.length].filter(p).join("\x3cbr\x3e"),color:f(k,"bgcolor")||d.tinyColorHue,borderColor:f(k,
"bordercolor"),fontFamily:f(k,"font.family"),fontSize:f(k,"font.size"),fontColor:f(k,"font.color"),idealAlign:"left",hovertemplate:k.hovertemplate,hovertemplateLabels:n,eventData:[d.node]},{container:g._hoverlayer.node(),outerContainer:g._paper.node(),gd:a});h(d,.85);e(d)}}},unhover:function(b,d,e){!1!==a._fullLayout.hovermode&&(c.select(b).call(u,d,e),"skip"!==d.node.trace.node.hoverinfo&&(d.node.fullData=d.node.trace,a.emit("plotly_unhover",{event:c.event,points:[d.node]})),r.loneUnhover(g._hoverlayer.node()))},
select:function(b,d,e){var f=d.node;f.originalEvent=c.event;a._hoverdata=[f];c.select(b).call(u,d,e);r.click(a,{target:!0})}}})}},{"../../components/color":577,"../../components/fx":616,"../../lib":700,"./constants":1045,"./render":1049,d3:154}],1049:[function(a,t,m){function p(a,b,c){function d(a){a.forEach(function(a){var b=0;var c=a.length,d;a.sort(function(a,b){return a.y0-b.y0});for(d=0;d<c;++d){var e=a[d];e.y0>=b||(b-=e.y0,1E-6<b&&(e.y0+=b,e.y1+=b));b=e.y1+k}})}function e(a){var b=a.map(function(a,
b){return{x0:a.x0,index:b}}).sort(function(a,b){return a.x0-b.x0}),c=[],d=-1,e=-Infinity;for(v=0;v<b.length;v++){var f=a[b[v].index];if(f.x0>e+l){d+=1;var g=f.x0}e=f.x0;c[d]||(c[d]=[]);c[d].push(f);var h=g-f.x0;f.x0+=h;f.x1+=h}return c}var f=T(b);b=f.trace;var g=b.domain,h="h"===b.orientation,k=b.node.pad,l=b.node.thickness,n=a.width*(g.x[1]-g.x[0]),m=a.height*(g.y[1]-g.y[0]),r=f._nodes,q=f._links,p=f.circular;var t=p?L.sankeyCircular().circularLinkGap(0):J.sankey();t.iterations(G.sankeyIterations).size(h?
[n,m]:[m,n]).nodeWidth(l).nodePadding(k).nodeId(function(a){return a.pointNumber}).nodes(r).links(q);var u=t();t.nodePadding()<k&&N.warn("node.pad was reduced to ",t.nodePadding()," to fit within the figure.");var v,w,x;for(y in f._groupLookup){r=parseInt(f._groupLookup[y]);for(v=0;v<u.nodes.length;v++)if(u.nodes[v].pointNumber===r){var A=u.nodes[v];break}A&&(r={pointNumber:parseInt(y),x0:A.x0,x1:A.x1,y0:A.y0,y1:A.y1,partOfGroup:!0,sourceLinks:[],targetLinks:[]},u.nodes.unshift(r),A.childrenNodes.unshift(r))}(function(){for(v=
0;v<u.nodes.length;v++){var a=u.nodes[v],b={};for(w=0;w<a.targetLinks.length;w++){var c=a.targetLinks[w];var d=c.source.pointNumber+":"+c.target.pointNumber;b.hasOwnProperty(d)||(b[d]=[]);b[d].push(c)}var e=Object.keys(b);for(w=0;w<e.length;w++){d=e[w];d=b[d];var f=0,g={};for(x=0;x<d.length;x++)c=d[x],g[c.label]||(g[c.label]=0),g[c.label]+=c.value,f+=c.value;for(x=0;x<d.length;x++)c=d[x],c.flow={value:f,labelConcentration:g[c.label]/f,concentration:c.value/f,links:d}}for(w=b=0;w<a.sourceLinks.length;w++)b+=
a.sourceLinks[w].value;for(w=0;w<a.sourceLinks.length;w++)c=a.sourceLinks[w],c.concentrationOut=c.value/b;for(w=b=0;w<a.targetLinks.length;w++)b+=a.targetLinks[w].value;for(w=0;w<a.targetLinks.length;w++)c=a.targetLinks[w],c.concenrationIn=c.value/b}})();if(b.node.x.length&&b.node.y.length){for(v=0;v<Math.min(b.node.x.length,b.node.y.length,u.nodes.length);v++)if(b.node.x[v]&&b.node.y[v]){var y=[b.node.x[v]*n,b.node.y[v]*m];u.nodes[v].x0=y[0]-l/2;u.nodes[v].x1=y[0]+l/2;A=u.nodes[v].y1-u.nodes[v].y0;
u.nodes[v].y0=y[1]-A/2;u.nodes[v].y1=y[1]+A/2}"snap"===b.arrangement&&(r=u.nodes,y=e(r),d(y));t.update(u)}return{circular:p,key:c,trace:b,guid:N.randstr(),horizontal:h,width:n,height:m,nodePad:b.node.pad,nodeLineColor:b.node.line.color,nodeLineWidth:b.node.line.width,linkLineColor:b.link.line.color,linkLineWidth:b.link.line.width,valueFormat:b.valueformat,valueSuffix:b.valuesuffix,textFont:b.textfont,translateX:g.x[0]*a.width+a.margin.l,translateY:a.height-g.y[1]*a.height+a.margin.t,dragParallel:h?
m:n,dragPerpendicular:h?n:m,arrangement:b.arrangement,sankey:t,graph:u,forceLayouts:{},interactionState:{dragInProgress:!1,hovered:!1}}}function g(a,b,c){var d=E(b.color);b.concentrationscale&&(d=E(b.concentrationscale(b.flow.labelConcentration)));var e=b.source.label+"|"+b.target.label;b.trace=a.trace;b.curveNumber=a.trace.index;return{circular:a.circular,key:e+"__"+c,traceId:a.key,pointNumber:b.pointNumber,link:b,tinyColorHue:K.tinyRGB(d),tinyColorAlpha:d.getAlpha(),linkPath:h,linkLineColor:a.linkLineColor,
linkLineWidth:a.linkLineWidth,valueFormat:a.valueFormat,valueSuffix:a.valueSuffix,sankey:a.sankey,parent:a,interactionState:a.interactionState,flow:b.flow}}function h(){return function(a){if(a.link.circular){var b=a.link,c=b.width/2,d=b.circularPathData;return"top"===b.circularLinkType?"M "+d.targetX+" "+(d.targetY+c)+" L"+d.rightInnerExtent+" "+(d.targetY+c)+"A"+(d.rightLargeArcRadius+c)+" "+(d.rightSmallArcRadius+c)+" 0 0 1 "+(d.rightFullExtent-c)+" "+(d.targetY-d.rightSmallArcRadius)+"L"+(d.rightFullExtent-
c)+" "+d.verticalRightInnerExtent+"A"+(d.rightLargeArcRadius+c)+" "+(d.rightLargeArcRadius+c)+" 0 0 1 "+d.rightInnerExtent+" "+(d.verticalFullExtent-c)+"L"+d.leftInnerExtent+" "+(d.verticalFullExtent-c)+"A"+(d.leftLargeArcRadius+c)+" "+(d.leftLargeArcRadius+c)+" 0 0 1 "+(d.leftFullExtent+c)+" "+d.verticalLeftInnerExtent+"L"+(d.leftFullExtent+c)+" "+(d.sourceY-d.leftSmallArcRadius)+"A"+(d.leftLargeArcRadius+c)+" "+(d.leftSmallArcRadius+c)+" 0 0 1 "+d.leftInnerExtent+" "+(d.sourceY+c)+"L"+d.sourceX+
" "+(d.sourceY+c)+"L"+d.sourceX+" "+(d.sourceY-c)+"L"+d.leftInnerExtent+" "+(d.sourceY-c)+"A"+(d.leftLargeArcRadius-c)+" "+(d.leftSmallArcRadius-c)+" 0 0 0 "+(d.leftFullExtent-c)+" "+(d.sourceY-d.leftSmallArcRadius)+"L"+(d.leftFullExtent-c)+" "+d.verticalLeftInnerExtent+"A"+(d.leftLargeArcRadius-c)+" "+(d.leftLargeArcRadius-c)+" 0 0 0 "+d.leftInnerExtent+" "+(d.verticalFullExtent+c)+"L"+d.rightInnerExtent+" "+(d.verticalFullExtent+c)+"A"+(d.rightLargeArcRadius-c)+" "+(d.rightLargeArcRadius-c)+" 0 0 0 "+
(d.rightFullExtent+c)+" "+d.verticalRightInnerExtent+"L"+(d.rightFullExtent+c)+" "+(d.targetY-d.rightSmallArcRadius)+"A"+(d.rightLargeArcRadius-c)+" "+(d.rightSmallArcRadius-c)+" 0 0 0 "+d.rightInnerExtent+" "+(d.targetY-c)+"L"+d.targetX+" "+(d.targetY-c)+"Z":"M "+d.targetX+" "+(d.targetY-c)+" L"+d.rightInnerExtent+" "+(d.targetY-c)+"A"+(d.rightLargeArcRadius+c)+" "+(d.rightSmallArcRadius+c)+" 0 0 0 "+(d.rightFullExtent-c)+" "+(d.targetY+d.rightSmallArcRadius)+"L"+(d.rightFullExtent-c)+" "+d.verticalRightInnerExtent+
"A"+(d.rightLargeArcRadius+c)+" "+(d.rightLargeArcRadius+c)+" 0 0 0 "+d.rightInnerExtent+" "+(d.verticalFullExtent+c)+"L"+d.leftInnerExtent+" "+(d.verticalFullExtent+c)+"A"+(d.leftLargeArcRadius+c)+" "+(d.leftLargeArcRadius+c)+" 0 0 0 "+(d.leftFullExtent+c)+" "+d.verticalLeftInnerExtent+"L"+(d.leftFullExtent+c)+" "+(d.sourceY+d.leftSmallArcRadius)+"A"+(d.leftLargeArcRadius+c)+" "+(d.leftSmallArcRadius+c)+" 0 0 0 "+d.leftInnerExtent+" "+(d.sourceY-c)+"L"+d.sourceX+" "+(d.sourceY-c)+"L"+d.sourceX+" "+
(d.sourceY+c)+"L"+d.leftInnerExtent+" "+(d.sourceY+c)+"A"+(d.leftLargeArcRadius-c)+" "+(d.leftSmallArcRadius-c)+" 0 0 1 "+(d.leftFullExtent-c)+" "+(d.sourceY+d.leftSmallArcRadius)+"L"+(d.leftFullExtent-c)+" "+d.verticalLeftInnerExtent+"A"+(d.leftLargeArcRadius-c)+" "+(d.leftLargeArcRadius-c)+" 0 0 1 "+d.leftInnerExtent+" "+(d.verticalFullExtent-c)+"L"+d.rightInnerExtent+" "+(d.verticalFullExtent-c)+"A"+(d.rightLargeArcRadius-c)+" "+(d.rightLargeArcRadius-c)+" 0 0 1 "+(d.rightFullExtent+c)+" "+d.verticalRightInnerExtent+
"L"+(d.rightFullExtent+c)+" "+(d.targetY+d.rightSmallArcRadius)+"A"+(d.rightLargeArcRadius-c)+" "+(d.rightSmallArcRadius-c)+" 0 0 1 "+d.rightInnerExtent+" "+(d.targetY+c)+"L"+d.targetX+" "+(d.targetY+c)+"Z"}b=a.link.source.x1;c=a.link.target.x0;var e=P(b,c);d=e(.5);e=e(.5);var f=a.link.y0-a.link.width/2,g=a.link.y0+a.link.width/2,h=a.link.y1-a.link.width/2;a=a.link.y1+a.link.width/2;return"M"+b+","+f+"C"+d+","+f+" "+e+","+h+" "+c+","+h+"L"+c+","+a+"C"+e+","+a+" "+d+","+g+" "+b+","+g+"Z"}}function e(a,
b){var c=E(b.color),d=G.nodePadAcross,e=a.nodePad/2;b.dx=b.x1-b.x0;b.dy=b.y1-b.y0;var f=b.dx,g=Math.max(.5,b.dy),h="node_"+b.pointNumber;b.group&&(h=N.randstr());b.trace=a.trace;b.curveNumber=a.trace.index;return{index:b.pointNumber,key:h,partOfGroup:b.partOfGroup||!1,group:b.group,traceId:a.key,trace:a.trace,node:b,nodePad:a.nodePad,nodeLineColor:a.nodeLineColor,nodeLineWidth:a.nodeLineWidth,textFont:a.textFont,size:a.horizontal?a.height:a.width,visibleWidth:Math.ceil(f),visibleHeight:g,zoneX:-d,
zoneY:-e,zoneWidth:f+2*d,zoneHeight:g+2*e,labelY:a.horizontal?b.dy/2+1:b.dx/2+1,left:1===b.originalLayer,sizeAcross:a.width,forceLayouts:a.forceLayouts,horizontal:a.horizontal,darkBackground:128>=c.getBrightness(),tinyColorHue:K.tinyRGB(c),tinyColorAlpha:c.getAlpha(),valueFormat:a.valueFormat,valueSuffix:a.valueSuffix,sankey:a.sankey,graph:a.graph,arrangement:a.arrangement,uniqueNodeLabelPathId:[a.guid,a.key,h].join("_"),interactionState:a.interactionState,figure:a}}function n(a){a.attr("transform",
function(a){return"translate("+a.node.x0.toFixed(3)+", "+a.node.y0.toFixed(3)+")"})}function b(a){a.call(n)}function l(a){a.attr("width",function(a){return a.node.x1-a.node.x0}).attr("height",function(a){return a.visibleHeight})}function u(a){return"translate("+a.translateX+","+a.translateY+")"+(a.horizontal?"matrix(1 0 0 1 0 0)":"matrix(0 1 1 0 0 0)")}function q(a){return"translate("+(a.horizontal?0:a.labelY)+" "+(a.horizontal?a.labelY:0)+")"}function d(a){return H.svg.line()([[a.horizontal?a.left?
-a.sizeAcross:a.visibleWidth+G.nodeTextOffsetHorizontal:G.nodeTextOffsetHorizontal,0],[a.horizontal?a.left?-G.nodeTextOffsetHorizontal:a.sizeAcross:a.visibleHeight-G.nodeTextOffsetHorizontal,0]])}function f(a){return a.horizontal?"matrix(1 0 0 1 0 0)":"matrix(0 1 1 0 0 0)"}function c(a){return a.horizontal?"scale(1 1)":"scale(-1 1)"}function k(a){return a.darkBackground&&!a.horizontal?"rgb(255,255,255)":"rgb(0,0,0)"}function r(a){return a.horizontal&&a.left?"100%":"0%"}function v(a,b,c){a.on(".basic",
null).on("mouseover.basic",function(a){a.interactionState.dragInProgress||a.partOfGroup||(c.hover(this,a,b),a.interactionState.hovered=[this,a])}).on("mousemove.basic",function(a){a.interactionState.dragInProgress||a.partOfGroup||(c.follow(this,a),a.interactionState.hovered=[this,a])}).on("mouseout.basic",function(a){a.interactionState.dragInProgress||a.partOfGroup||(c.unhover(this,a,b),a.interactionState.hovered=!1)}).on("click.basic",function(a){a.interactionState.hovered&&(c.unhover(this,a,b),
a.interactionState.hovered=!1);a.interactionState.dragInProgress||a.partOfGroup||c.select(this,a,b)})}function z(a,c,d,e){var f=H.behavior.drag().origin(function(a){return{x:a.node.x0+a.visibleWidth/2,y:a.node.y0+a.visibleHeight/2}}).on("dragstart",function(b){if("fixed"!==b.arrangement&&(N.ensureSingle(e._fullLayout._infolayer,"g","dragcover",function(a){e._fullLayout._dragCover=a}),N.raiseToTop(this),b.interactionState.dragInProgress=b.node,B(b.node),b.interactionState.hovered&&(d.nodeEvents.unhover.apply(0,
b.interactionState.hovered),b.interactionState.hovered=!1),"snap"===b.arrangement)){var f=b.traceId+"|"+b.key;b.forceLayouts[f]?b.forceLayouts[f].alpha(1):A(a,f,b,e);y(a,c,b,f,e)}}).on("drag",function(d){if("fixed"!==d.arrangement){var e=H.event.x,f=H.event.y;"snap"===d.arrangement?(d.node.x0=e-d.visibleWidth/2,d.node.x1=e+d.visibleWidth/2):("freeform"===d.arrangement&&(d.node.x0=e-d.visibleWidth/2,d.node.x1=e+d.visibleWidth/2),f=Math.max(0,Math.min(d.size-d.visibleHeight/2,f)));d.node.y0=f-d.visibleHeight/
2;d.node.y1=f+d.visibleHeight/2;B(d.node);"snap"!==d.arrangement&&(d.sankey.update(d.graph),a.filter(C(d)).call(b),c.attr("d",h()))}}).on("dragend",function(a){if("fixed"!==a.arrangement){a.interactionState.dragInProgress=!1;for(var b=0;b<a.node.childrenNodes.length;b++)a.node.childrenNodes[b].x=a.node.x,a.node.childrenNodes[b].y=a.node.y;"snap"!==a.arrangement&&x(a,e)}});a.on(".drag",null).call(f)}function A(a,b,c,d){D(c.graph.nodes);var e=c.graph.nodes.filter(function(a){return a.originalX===c.node.originalX}).filter(function(a){return!a.partOfGroup});
c.forceLayouts[b]=M.forceSimulation(e).alphaDecay(0).force("collide",M.forceCollide().radius(function(a){return a.dy/2+c.nodePad/2}).strength(1).iterations(G.forceIterations)).force("constrain",w(a,b,e,c,d)).stop()}function y(a,c,d,e,f){window.requestAnimationFrame(function U(){var g;for(g=0;g<G.forceTicksPerFrame;g++)d.forceLayouts[e].tick();g=d.graph.nodes;for(var k=0;k<g.length;k++)g[k].y0=g[k].y-g[k].dy/2,g[k].y1=g[k].y0+g[k].dy,g[k].x0=g[k].x-g[k].dx/2,g[k].x1=g[k].x0+g[k].dx;d.sankey.update(d.graph);
a.filter(C(d)).call(b);c.attr("d",h());0<d.forceLayouts[e].alpha()?window.requestAnimationFrame(U):(g=d.node.originalX,d.node.x0=g-d.visibleWidth/2,d.node.x1=g+d.visibleWidth/2,x(d,f))})}function w(a,b,c,d){return function(){for(var a=0,e=0;e<c.length;e++){var f=c[e];f===d.interactionState.dragInProgress?(f.x=f.lastDraggedX,f.y=f.lastDraggedY):(f.vx=(f.originalX-f.x)/G.forceTicksPerFrame,f.y=Math.min(d.size-f.dy/2,Math.max(f.dy/2,f.y)));a=Math.max(a,Math.abs(f.vx),Math.abs(f.vy))}!d.interactionState.dragInProgress&&
.1>a&&0<d.forceLayouts[b].alpha()&&d.forceLayouts[b].alpha(0)}}function x(a,b){for(var c=[],d=[],e=0;e<a.graph.nodes.length;e++){var f=(a.graph.nodes[e].y0+a.graph.nodes[e].y1)/2;c.push((a.graph.nodes[e].x0+a.graph.nodes[e].x1)/2/a.figure.width);d.push(f/a.figure.height)}S.call("_guiRestyle",b,{"node.x":[c],"node.y":[d]},a.trace.index).then(function(){b._fullLayout._dragCover&&b._fullLayout._dragCover.remove()})}function F(a){var b=[],c;for(c=0;c<a.length;c++)a[c].originalX=(a[c].x0+a[c].x1)/2,a[c].originalY=
(a[c].y0+a[c].y1)/2,-1===b.indexOf(a[c].originalX)&&b.push(a[c].originalX);b.sort(function(a,b){return a-b});for(c=0;c<a.length;c++)a[c].originalLayerIndex=b.indexOf(a[c].originalX),a[c].originalLayer=a[c].originalLayerIndex/(b.length-1)}function B(a){a.lastDraggedX=a.x0+a.dx/2;a.lastDraggedY=a.y0+a.dy/2}function C(a){return function(b){return b.node.originalX===a.node.originalX}}function D(a){for(var b=0;b<a.length;b++)a[b].y=(a[b].y0+a[b].y1)/2,a[b].x=(a[b].x0+a[b].x1)/2}var G=a("./constants"),
H=a("d3"),E=a("tinycolor2"),K=a("../../components/color"),I=a("../../components/drawing"),J=a("@plotly/d3-sankey"),L=a("d3-sankey-circular"),M=a("d3-force"),N=a("../../lib");m=a("../../lib/gup");var O=m.keyFun,R=m.repeat,T=m.unwrap,P=a("d3-interpolate").interpolateNumber,S=a("../../registry");t.exports=function(a,b,m,t,w){var x=!1;N.ensureSingle(a._fullLayout._infolayer,"g","first-render",function(){x=!0});var A=a._fullLayout._dragCover;m=m.filter(function(a){return T(a).trace.visible}).map(p.bind(null,
t));b=b.selectAll("."+G.cn.sankey).data(m,O);b.exit().remove();b.enter().append("g").classed(G.cn.sankey,!0).style("box-sizing","content-box").style("position","absolute").style("left",0).style("shape-rendering","geometricPrecision").style("pointer-events","auto").attr("transform",u);b.transition().ease(G.ease).duration(G.duration).attr("transform",u);m=b.selectAll("."+G.cn.sankeyLinks).data(R,O);m.enter().append("g").classed(G.cn.sankeyLinks,!0).style("fill","none");t=m.selectAll("."+G.cn.sankeyLink).data(function(a){return a.graph.links.filter(function(a){return a.value}).map(g.bind(null,
a))},O);t.enter().append("path").classed(G.cn.sankeyLink,!0).call(v,b,w.linkEvents);t.style("stroke",function(a){return 1<a.link.width||0<a.linkLineWidth?K.tinyRGB(E(a.linkLineColor)):a.tinyColorHue}).style("stroke-opacity",function(a){return 1<a.link.width||0<a.linkLineWidth?K.opacity(a.linkLineColor):a.tinyColorAlpha}).style("fill",function(a){return a.tinyColorHue}).style("fill-opacity",function(a){return a.tinyColorAlpha}).style("stroke-width",function(a){return 1<a.link.width||0<a.linkLineWidth?
a.linkLineWidth:1}).attr("d",h());t.style("opacity",function(){return a._context.staticPlot||x||A?1:0}).transition().ease(G.ease).duration(G.duration).style("opacity",1);t.exit().transition().ease(G.ease).duration(G.duration).style("opacity",0).remove();m=b.selectAll("."+G.cn.sankeyNodeSet).data(R,O);m.enter().append("g").classed(G.cn.sankeyNodeSet,!0);m.style("cursor",function(a){switch(a.arrangement){case "fixed":return"default";case "perpendicular":return"ns-resize";default:return"move"}});m=m.selectAll("."+
G.cn.sankeyNode).data(function(a){var b=a.graph.nodes;F(b);return b.map(e.bind(null,a))},O);m.enter().append("g").classed(G.cn.sankeyNode,!0).call(n).style("opacity",function(b){return!a._context.staticPlot&&!x||b.partOfGroup?0:1});m.call(v,b,w.nodeEvents).call(z,t,w,a);m.transition().ease(G.ease).duration(G.duration).call(n).style("opacity",function(a){return a.partOfGroup?0:1});m.exit().transition().ease(G.ease).duration(G.duration).style("opacity",0).remove();w=m.selectAll("."+G.cn.nodeRect).data(R);
w.enter().append("rect").classed(G.cn.nodeRect,!0).call(l);w.style("stroke-width",function(a){return a.nodeLineWidth}).style("stroke",function(a){return K.tinyRGB(E(a.nodeLineColor))}).style("stroke-opacity",function(a){return K.opacity(a.nodeLineColor)}).style("fill",function(a){return a.tinyColorHue}).style("fill-opacity",function(a){return a.tinyColorAlpha});w.transition().ease(G.ease).duration(G.duration).call(l);w=m.selectAll("."+G.cn.nodeCapture).data(R);w.enter().append("rect").classed(G.cn.nodeCapture,
!0).style("fill-opacity",0);w.attr("x",function(a){return a.zoneX}).attr("y",function(a){return a.zoneY}).attr("width",function(a){return a.zoneWidth}).attr("height",function(a){return a.zoneHeight});w=m.selectAll("."+G.cn.nodeCentered).data(R);w.enter().append("g").classed(G.cn.nodeCentered,!0).attr("transform",q);w.transition().ease(G.ease).duration(G.duration).attr("transform",q);b=w.selectAll("."+G.cn.nodeLabelGuide).data(R);b.enter().append("path").classed(G.cn.nodeLabelGuide,!0).attr("id",function(a){return a.uniqueNodeLabelPathId}).attr("d",
d).attr("transform",f);b.transition().ease(G.ease).duration(G.duration).attr("d",d).attr("transform",f);var y=w.selectAll("."+G.cn.nodeLabel).data(R);y.enter().append("text").classed(G.cn.nodeLabel,!0).attr("transform",c).style("user-select","none").style("cursor","default").style("fill","black");y.style("text-shadow",function(a){return a.horizontal?"-1px 1px 1px #fff, 1px 1px 1px #fff, 1px -1px 1px #fff, -1px -1px 1px #fff":"none"}).each(function(a){I.font(y,a.textFont)});y.transition().ease(G.ease).duration(G.duration).attr("transform",
c);w=y.selectAll("."+G.cn.nodeLabelTextPath).data(R);w.enter().append("textPath").classed(G.cn.nodeLabelTextPath,!0).attr("alignment-baseline","middle").attr("xlink:href",function(a){return"#"+a.uniqueNodeLabelPathId}).attr("startOffset",r).style("fill",k);w.text(function(a){return a.horizontal||5<a.node.dy?a.node.label:""}).attr("text-anchor",function(a){return a.horizontal&&a.left?"end":"start"});w.transition().ease(G.ease).duration(G.duration).attr("startOffset",r).style("fill",k)}},{"../../components/color":577,
"../../components/drawing":598,"../../lib":700,"../../lib/gup":698,"../../registry":829,"./constants":1045,"@plotly/d3-sankey":48,d3:154,"d3-force":146,"d3-interpolate":148,"d3-sankey-circular":151,tinycolor2:521}],1050:[function(a,t,m){var p=a("../../lib");t.exports=function(a,h){for(var e=0;e<a.length;e++)a[e].i=e;p.mergeArray(h.text,a,"tx");p.mergeArray(h.hovertext,a,"htx");p.mergeArray(h.customdata,a,"data");p.mergeArray(h.textposition,a,"tp");h.textfont&&(p.mergeArray(h.textfont.size,a,"ts"),
p.mergeArray(h.textfont.color,a,"tc"),p.mergeArray(h.textfont.family,a,"tf"));if(h=h.marker){p.mergeArray(h.size,a,"ms");p.mergeArray(h.opacity,a,"mo");p.mergeArray(h.symbol,a,"mx");p.mergeArray(h.color,a,"mc");if(e=h.line)p.mergeArray(e.color,a,"mlc"),p.mergeArray(e.width,a,"mlw");(h=h.gradient)&&"none"!==h.type&&(p.mergeArray(h.type,a,"mgt"),p.mergeArray(h.color,a,"mgc"))}}},{"../../lib":700}],1051:[function(a,t,m){m=a("../../components/fx/hovertemplate_attributes");var p=a("../../components/colorscale/attributes"),
g=a("../../components/colorbar/attributes"),h=a("../../plots/font_attributes"),e=a("../../components/drawing/attributes").dash,n=a("../../components/drawing"),b=a("./constants");a=a("../../lib/extend").extendFlat;t.exports={x:{valType:"data_array",editType:"calc+clearAxisTypes",anim:!0},x0:{valType:"any",dflt:0,editType:"calc+clearAxisTypes",anim:!0},dx:{valType:"number",dflt:1,editType:"calc",anim:!0},y:{valType:"data_array",editType:"calc+clearAxisTypes",anim:!0},y0:{valType:"any",dflt:0,editType:"calc+clearAxisTypes",
anim:!0},dy:{valType:"number",dflt:1,editType:"calc",anim:!0},stackgroup:{valType:"string",dflt:"",editType:"calc"},orientation:{valType:"enumerated",values:["v","h"],editType:"calc"},groupnorm:{valType:"enumerated",values:["","fraction","percent"],dflt:"",editType:"calc"},stackgaps:{valType:"enumerated",values:["infer zero","interpolate"],dflt:"infer zero",editType:"calc"},text:{valType:"string",dflt:"",arrayOk:!0,editType:"calc"},hovertext:{valType:"string",dflt:"",arrayOk:!0,editType:"style"},
mode:{valType:"flaglist",flags:["lines","markers","text"],extras:["none"],editType:"calc"},hoveron:{valType:"flaglist",flags:["points","fills"],editType:"style"},hovertemplate:m({},{keys:b.eventDataKeys}),line:{color:{valType:"color",editType:"style",anim:!0},width:{valType:"number",min:0,dflt:2,editType:"style",anim:!0},shape:{valType:"enumerated",values:"linear spline hv vh hvh vhv".split(" "),dflt:"linear",editType:"plot"},smoothing:{valType:"number",min:0,max:1.3,dflt:1,editType:"plot"},dash:a({},
e,{editType:"style"}),simplify:{valType:"boolean",dflt:!0,editType:"plot"},editType:"plot"},connectgaps:{valType:"boolean",dflt:!1,editType:"calc"},cliponaxis:{valType:"boolean",dflt:!0,editType:"plot"},fill:{valType:"enumerated",values:"none tozeroy tozerox tonexty tonextx toself tonext".split(" "),editType:"calc"},fillcolor:{valType:"color",editType:"style",anim:!0},marker:a({symbol:{valType:"enumerated",values:n.symbolList,dflt:"circle",arrayOk:!0,editType:"style"},opacity:{valType:"number",min:0,
max:1,arrayOk:!0,editType:"style",anim:!0},size:{valType:"number",min:0,dflt:6,arrayOk:!0,editType:"calc",anim:!0},maxdisplayed:{valType:"number",min:0,dflt:0,editType:"plot"},sizeref:{valType:"number",dflt:1,editType:"calc"},sizemin:{valType:"number",min:0,dflt:0,editType:"calc"},sizemode:{valType:"enumerated",values:["diameter","area"],dflt:"diameter",editType:"calc"},colorbar:g,line:a({width:{valType:"number",min:0,arrayOk:!0,editType:"style",anim:!0},editType:"calc"},p("marker.line",{anim:!0})),
gradient:{type:{valType:"enumerated",values:["radial","horizontal","vertical","none"],arrayOk:!0,dflt:"none",editType:"calc"},color:{valType:"color",arrayOk:!0,editType:"calc"},editType:"calc"},editType:"calc"},p("marker",{anim:!0})),selected:{marker:{opacity:{valType:"number",min:0,max:1,editType:"style"},color:{valType:"color",editType:"style"},size:{valType:"number",min:0,editType:"style"},editType:"style"},textfont:{color:{valType:"color",editType:"style"},editType:"style"},editType:"style"},
unselected:{marker:{opacity:{valType:"number",min:0,max:1,editType:"style"},color:{valType:"color",editType:"style"},size:{valType:"number",min:0,editType:"style"},editType:"style"},textfont:{color:{valType:"color",editType:"style"},editType:"style"},editType:"style"},textposition:{valType:"enumerated",values:"top left;top center;top right;middle left;middle center;middle right;bottom left;bottom center;bottom right".split(";"),dflt:"middle center",arrayOk:!0,editType:"calc"},textfont:h({editType:"calc",
colorEditType:"style",arrayOk:!0}),r:{valType:"data_array",editType:"calc"},t:{valType:"data_array",editType:"calc"}}},{"../../components/colorbar/attributes":578,"../../components/colorscale/attributes":584,"../../components/drawing":598,"../../components/drawing/attributes":597,"../../components/fx/hovertemplate_attributes":615,"../../lib/extend":690,"../../plots/font_attributes":774,"./constants":1055}],1052:[function(a,t,m){function p(a,b,c,f,g,h,k){var l=b._length,m=a._fullLayout;a=c._id;var r=
f._id,q=m._firstScatter[e(b)]===b.uid;m=(n(b,m,c,f)||{}).orientation;var p=b.fill;c._minDtick=0;f._minDtick=0;var t={padded:!0},v={padded:!0};k&&(t.ppad=v.ppad=k);(k=2>l||g[0]!==g[l-1]||h[0]!==h[l-1])&&("tozerox"===p||"tonextx"===p&&(q||"h"===m))?t.tozero=!0:(b.error_y||{}).visible||"tonexty"!==p&&"tozeroy"!==p&&(d.hasMarkers(b)||d.hasText(b))||(t.padded=!1,t.ppad=0);if(k&&("tozeroy"===p||"tonexty"===p&&(q||"v"===m)))v.tozero=!0;else if("tonextx"===p||"tozerox"===p)v.padded=!1;a&&(b._extremes[a]=
u.findExtremes(c,g,t));r&&(b._extremes[r]=u.findExtremes(f,h,v))}function g(a,b){if(d.hasMarkers(a)){var c=a.marker,e=1.6*(a.marker.sizeref||1);var f="area"===a.marker.sizemode?function(a){return Math.max(Math.sqrt((a||0)/e),3)}:function(a){return Math.max((a||0)/e,3)};if(l.isArrayOrTypedArray(c.size)){c={type:"linear"};u.setConvert(c);a=c.makeCalcdata(a.marker,"size");c=Array(b);for(var g=0;g<b;g++)c[g]=f(a[g]);return c}return f(c.size)}}function h(a,b){var c=e(b);a=a._firstScatter;a[c]||(a[c]=b.uid)}
function e(a){var b=a.stackgroup;return a.xaxis+a.yaxis+a.type+(b?"-"+b:"")}function n(a,b,c,d){if(a=a.stackgroup)if(b=b._scatterStackOpts[c._id+d._id][a],c="v"===b.orientation?d:c,"linear"===c.type||"log"===c.type)return b}var b=a("fast-isnumeric"),l=a("../../lib"),u=a("../../plots/cartesian/axes"),q=a("../../constants/numerical").BADNUM,d=a("./subtypes"),f=a("./colorscale_calc"),c=a("./arrays_to_calcdata"),k=a("./calc_selection");t.exports={calc:function(a,d){var e=a._fullLayout,m=u.getFromId(a,
d.xaxis||"x"),r=u.getFromId(a,d.yaxis||"y"),t=m.makeCalcdata(d,"x"),v=r.makeCalcdata(d,"y"),F=d._length,B=Array(F),C=d.ids,D=n(d,e,m,r),G=!1,H;h(e,d);e="x";var E="y";if(D){l.pushUnique(D.traceIndices,d._expandedIndex);if(H="v"===D.orientation){E="s";var K="x"}else e="s",K="y";var I="interpolate"===D.stackgaps}else{var J=g(d,F);p(a,d,m,r,t,v,J)}for(m=0;m<F;m++){r=B[m]={};J=b(t[m]);var L=b(v[m]);J&&L?(r[e]=t[m],r[E]=v[m]):D&&(H?J:L)?(r[K]=H?t[m]:v[m],r.gap=!0,I?(r.s=q,G=!0):r.s=0):r[e]=r[E]=q;C&&(r.id=
String(C[m]))}c(B,d);f(a,d);k(B,d);if(D){for(m=0;m<B.length;)B[m][K]===q?B.splice(m,1):m++;l.sort(B,function(a,b){return a[K]-b[K]||a.i-b.i});if(G){for(m=0;m<B.length-1&&B[m].gap;)m++;t=B[m].s;t||(t=B[m].s=0);for(a=0;a<m;a++)B[a].s=t;for(d=B.length-1;d>m&&B[d].gap;)d--;t=B[d].s;for(a=B.length-1;a>d;a--)B[a].s=t;for(;m<d;)if(m++,B[m].gap){for(a=m+1;B[a].gap;)a++;t=B[m-1][K];v=B[m-1].s;for(F=(B[a].s-v)/(B[a][K]-t);m<a;)B[m].s=v+(B[m][K]-t)*F,m++}}}return B},calcMarkerSize:g,calcAxisExpansion:p,setFirstScatter:h,
getStackOpts:n}},{"../../constants/numerical":677,"../../lib":700,"../../plots/cartesian/axes":748,"./arrays_to_calcdata":1050,"./calc_selection":1053,"./colorscale_calc":1054,"./subtypes":1075,"fast-isnumeric":221}],1053:[function(a,t,m){var p=a("../../lib");t.exports=function(a,h){p.isArrayOrTypedArray(h.selectedpoints)&&p.tagSelected(a,h)}},{"../../lib":700}],1054:[function(a,t,m){var p=a("../../components/colorscale/helpers").hasColorscale,g=a("../../components/colorscale/calc"),h=a("./subtypes");
t.exports=function(a,n){h.hasLines(n)&&p(n,"line")&&g(a,n,{vals:n.line.color,containerStr:"line",cLetter:"c"});h.hasMarkers(n)&&(p(n,"marker")&&g(a,n,{vals:n.marker.color,containerStr:"marker",cLetter:"c"}),p(n,"marker.line")&&g(a,n,{vals:n.marker.line.color,containerStr:"marker.line",cLetter:"c"}))}},{"../../components/colorscale/calc":585,"../../components/colorscale/helpers":588,"./subtypes":1075}],1055:[function(a,t,m){t.exports={PTS_LINESONLY:20,minTolerance:.2,toleranceGrowth:10,maxScreensAway:20,
eventDataKeys:[]}},{}],1056:[function(a,t,m){function p(a,e,g,b,l,m,q){l[b]=!0;b={i:null,gap:!0,s:0};b[q]=g;a.splice(e,0,b);e&&g===a[e-1][q]?(g=a[e-1],b.s=g.s,b.i=g.i,b.gap=g.gap):m&&(m=a[e-1],g=(l=a[e+1])?m?m.s+(l.s-m.s)*(g-m[q])/(l[q]-m[q]):l.s:m.s,b.s=g);e||(a[0].t=a[1].t,a[0].trace=a[1].trace,delete a[1].t,delete a[1].trace)}var g=a("./calc");t.exports=function(a,e){var h=e.xaxis;e=e.yaxis;var b=a._fullLayout._scatterStackOpts[h._id+e._id];if(b){var l=a.calcdata,m,q,d,f,c,k;for(k in b){var r=
b[k];var t=r.traceIndices;if(t.length){var z="interpolate"===r.stackgaps;var A=r.groupnorm;if("v"===r.orientation){var y="x";var w="y"}else y="y",w="x";var x=Array(t.length);for(m=0;m<x.length;m++)x[m]=!1;var F=l[t[0]];var B=Array(F.length);for(m=0;m<F.length;m++)B[m]=F[m][y];for(m=1;m<t.length;m++){var C=l[t[m]];for(q=d=0;q<C.length;q++){for(c=C[q][y];c>B[d]&&d<B.length;d++)p(C,q,B[d],m,x,z,y),q++;if(c!==B[d]){for(f=0;f<m;f++)p(l[t[f]],d,c,f,x,z,y);B.splice(d,0,c)}d++}for(;d<B.length;d++)p(C,q,B[d],
m,x,z,y),q++}d=B.length;for(q=0;q<F.length;q++){f=F[q][w]=F[q].s;for(m=1;m<t.length;m++)C=l[t[m]],C[0].trace._rawLength=C[0].trace._length,C[0].trace._length=d,f+=C[q].s,C[q][w]=f;if(A)for(C=("fraction"===A?f:f/100)||1,m=0;m<t.length;m++)f=l[t[m]][q],f[w]/=C,f.sNorm=f.s/C}for(m=0;m<t.length;m++){C=l[t[m]];F=C[0].trace;A=g.calcMarkerSize(F,F._rawLength);w=Array.isArray(A);if(A&&x[m]||w)for(f=A,A=Array(d),q=0;q<d;q++)A[q]=C[q].gap?0:w?f[C[q].i]:f;w=Array(d);f=Array(d);for(q=0;q<d;q++)w[q]=C[q].x,f[q]=
C[q].y;g.calcAxisExpansion(a,F,h,e,w,f,A);C[0].t.orientation=r.orientation}}}}}},{"./calc":1052}],1057:[function(a,t,m){t.exports=function(a){for(var g=0;g<a.length;g++){var h=a[g];if("scatter"===h.type){var e=h.fill;if("none"!==e&&"toself"!==e&&(h.opacity=void 0,"tonexty"===e||"tonextx"===e))for(e=g-1;0<=e;e--){var n=a[e];if("scatter"===n.type&&n.xaxis===h.xaxis&&n.yaxis===h.yaxis){n.opacity=void 0;break}}}}}},{}],1058:[function(a,t,m){var p=a("../../lib"),g=a("../../registry"),h=a("./attributes"),
e=a("./constants"),n=a("./subtypes"),b=a("./xy_defaults"),l=a("./stack_defaults"),u=a("./marker_defaults"),q=a("./line_defaults"),d=a("./line_shape_defaults"),f=a("./text_defaults"),c=a("./fillcolor_defaults");t.exports=function(a,m,t,z){function k(b,c){return p.coerce(a,m,h,b,c)}var r=b(a,m,z,k);r||(m.visible=!1);if(m.visible){var v=l(a,m,z,k);r=!v&&r<e.PTS_LINESONLY?"lines+markers":"lines";k("text");k("hovertext");k("mode",r);n.hasLines(m)&&(q(a,m,t,z,k),d(a,m,k),k("connectgaps"),k("line.simplify"));
n.hasMarkers(m)&&u(a,m,t,z,k,{gradient:!0});n.hasText(m)&&f(a,m,z,k);z=[];if(n.hasMarkers(m)||n.hasText(m))k("cliponaxis"),k("marker.maxdisplayed"),z.push("points");k("fill",v?v.fillDflt:"none");"none"!==m.fill&&(c(a,m,t,k),n.hasLines(m)||d(a,m,k));v=(m.line||{}).color;r=(m.marker||{}).color;"tonext"!==m.fill&&"toself"!==m.fill||z.push("fills");k("hoveron",z.join("+")||"points");"fills"!==m.hoveron&&k("hovertemplate");z=g.getComponentMethod("errorbars","supplyDefaults");z(a,m,v||r||t,{axis:"y"});
z(a,m,v||r||t,{axis:"x",inherit:"y"});p.coerceSelectionMarkerOpacity(m,k)}}},{"../../lib":700,"../../registry":829,"./attributes":1051,"./constants":1055,"./fillcolor_defaults":1060,"./line_defaults":1064,"./line_shape_defaults":1066,"./marker_defaults":1070,"./stack_defaults":1073,"./subtypes":1075,"./text_defaults":1076,"./xy_defaults":1077}],1059:[function(a,t,m){var p=a("../../lib");t.exports=function(a,h,e){var g=Array.isArray(e)?function(a){e.push(a)}:function(a){e.text=a},b=p.extractOption(a,
h,"htx","hovertext");if(b||0===b)return g(b);if((a=p.extractOption(a,h,"tx","text"))||0===a)return g(a)}},{"../../lib":700}],1060:[function(a,t,m){var p=a("../../components/color"),g=a("../../lib").isArrayOrTypedArray;t.exports=function(a,e,n,b){a=!1;if(e.marker){var h=e.marker.color,m=(e.marker.line||{}).color;h&&!g(h)?a=h:m&&!g(m)&&(a=m)}b("fillcolor",p.addOpacity((e.line||{}).color||a||n,.5))}},{"../../components/color":577,"../../lib":700}],1061:[function(a,t,m){var p=a("../../components/color"),
g=a("./subtypes");t.exports=function(a,e){if("lines"===a.mode)return(e=a.line.color)&&p.opacity(e)?e:a.fillcolor;if("none"===a.mode)return a.fill?a.fillcolor:"";var h=e.mcc||(a.marker||{}).color,b=e.mlcc||((a.marker||{}).line||{}).color;return(e=h&&p.opacity(h)?h:b&&p.opacity(b)&&(e.mlw||((a.marker||{}).line||{}).width)?b:"")?.3>p.opacity(e)?p.addOpacity(e,.3):e:(e=(a.line||{}).color)&&p.opacity(e)&&g.hasLines(a)&&a.line.width?e:a.fillcolor}},{"../../components/color":577,"./subtypes":1075}],1062:[function(a,
t,m){var p=a("../../lib"),g=a("../../components/fx"),h=a("../../registry"),e=a("./get_trace_color"),n=a("../../components/color"),b=a("./fill_hover_text");t.exports=function(a,m,q,d){var f=a.cd,c=f[0].trace,k=a.xa,l=a.ya,t=k.c2p(m),u=l.c2p(q),A=[t,u];q=c.hoveron||"";var y=-1!==c.mode.indexOf("markers")?3:.5;if(-1!==q.indexOf("points")&&(m=function(a){var b=Math.max(y,a.mrc||0),c=k.c2p(a.x)-t;a=l.c2p(a.y)-u;return Math.max(Math.sqrt(c*c+a*a)-b,1-y/b)},d=g.getDistanceFunction(d,function(a){var b=Math.max(3,
a.mrc||0),c=1-1/b;a=Math.abs(k.c2p(a.x)-t);return a<b?c*a/b:a-b+c},function(a){var b=Math.max(3,a.mrc||0),c=1-1/b;a=Math.abs(l.c2p(a.y)-u);return a<b?c*a/b:a-b+c},m),g.getClosest(f,d,a),!1!==a.index)){d=f[a.index];q=k.c2p(d.x,!0);A=l.c2p(d.y,!0);var w=d.mrc||1;a.index=d.i;var x=f[0].t.orientation,F=x&&(d.sNorm||d.s);f="h"===x?F:d.x;x="v"===x?F:d.y;p.extendFlat(a,{color:e(c,d),x0:q-w,x1:q+w,xLabelVal:f,y0:A-w,y1:A+w,yLabelVal:x,spikeDistance:m(d),hovertemplate:c.hovertemplate});b(d,c,a);h.getComponentMethod("errorbars",
"hoverInfo")(d,c,a);return[a]}if(-1!==q.indexOf("fills")&&c._polygons){w=c._polygons;d=[];x=!1;m=Infinity;f=-Infinity;F=Infinity;var B=-Infinity;for(q=0;q<w.length;q++){var C=w[q];C.contains(A)&&(x=!x,d.push(C),F=Math.min(F,C.ymin),B=Math.max(B,C.ymax))}if(x){F=Math.max(F,0);B=Math.min(B,l._length);A=(F+B)/2;for(q=0;q<d.length;q++)for(x=d[q].pts,w=1;w<x.length;w++){C=x[w-1][1];var D=x[w][1];C>A!==D>=A&&(F=x[w-1][0],B=x[w][0],D-C&&(F+=(B-F)*(A-C)/(D-C),m=Math.min(m,F),f=Math.max(f,F)))}m=Math.max(m,
0);f=Math.min(f,k._length);d=n.defaultLine;n.opacity(c.fillcolor)?d=c.fillcolor:n.opacity((c.line||{}).color)&&(d=c.line.color);p.extendFlat(a,{distance:a.maxHoverDistance,x0:m,x1:f,y0:A,y1:A,color:d,hovertemplate:!1});delete a.index;c.text&&!Array.isArray(c.text)?a.text=String(c.text):a.text=c.name;return[a]}}}},{"../../components/color":577,"../../components/fx":616,"../../lib":700,"../../registry":829,"./fill_hover_text":1059,"./get_trace_color":1061}],1063:[function(a,t,m){m={};var p=a("./subtypes");
m.hasLines=p.hasLines;m.hasMarkers=p.hasMarkers;m.hasText=p.hasText;m.isBubble=p.isBubble;m.attributes=a("./attributes");m.supplyDefaults=a("./defaults");m.crossTraceDefaults=a("./cross_trace_defaults");m.calc=a("./calc").calc;m.crossTraceCalc=a("./cross_trace_calc");m.arraysToCalcdata=a("./arrays_to_calcdata");m.plot=a("./plot");m.colorbar=a("./marker_colorbar");m.style=a("./style").style;m.styleOnSelect=a("./style").styleOnSelect;m.hoverPoints=a("./hover");m.selectPoints=a("./select");m.animatable=
!0;m.moduleType="trace";m.name="scatter";m.basePlotModule=a("../../plots/cartesian");m.categories="cartesian svg symbols errorBarsOK showLegend scatter-like zoomScale".split(" ");m.meta={};t.exports=m},{"../../plots/cartesian":759,"./arrays_to_calcdata":1050,"./attributes":1051,"./calc":1052,"./cross_trace_calc":1056,"./cross_trace_defaults":1057,"./defaults":1058,"./hover":1062,"./marker_colorbar":1069,"./plot":1071,"./select":1072,"./style":1074,"./subtypes":1075}],1064:[function(a,t,m){var p=a("../../lib").isArrayOrTypedArray,
g=a("../../components/colorscale/helpers").hasColorscale,h=a("../../components/colorscale/defaults");t.exports=function(a,n,b,l,m,q){var d=(a.marker||{}).color;m("line.color",b);g(a,"line")?h(a,n,l,m,{prefix:"line.",cLetter:"c"}):(a=(p(d)?!1:d)||b,m("line.color",a));m("line.width");(q||{}).noDash||m("line.dash")}},{"../../components/colorscale/defaults":587,"../../components/colorscale/helpers":588,"../../lib":700}],1065:[function(a,t,m){m=a("../../constants/numerical");var p=m.BADNUM;m=m.LOG_CLIP;
var g=m+.5,h=m-.5,e=a("../../lib"),n=e.segmentsIntersect,b=e.constrain,l=a("./constants");t.exports=function(a,m){function d(b){b=a[b];if(!b)return!1;var c=B.c2p(b.x),d=C.c2p(b.y);if(c===p){D&&(c=B.c2p(b.x,!0));if(c===p)return!1;G&&d===p&&(c*=Math.abs(B._m*E*(0<B._m?g:h)/(C._m*H*(0<C._m?g:h))));c*=1E3}if(d===p){G&&(d=C.c2p(b.y,!0));if(d===p)return!1;d*=1E3}return[c,d]}function f(a,b,c,d){c-=a;d-=b;a=.5-a;var e=.5-b;b=c*c+d*d;var f=c*a+d*e;if(0<f&&f<b&&(c=a*d-e*c,c*c<b))return!0}function c(a,b){var c=
a[0]/H;a=a[1]/E;var d=Math.max(0,-c,c-1,-a,a-1);d&&void 0!==da&&f(c,a,da,ca)&&(d=0);d&&b&&f(c,a,b[0]/H,b[1]/E)&&(d=0);return(1+l.toleranceGrowth*d)*I}function k(a,b){var c=a[0]-b[0];a=a[1]-b[1];return Math.sqrt(c*c+a*a)}function r(a,b){for(var c=[],d=0,e=0;4>e;e++){var f=X[e];(f=n(a[0],a[1],b[0],b[1],f[0],f[1],f[2],f[3]))&&(!d||1<Math.abs(f.x-c[0][0])||1<Math.abs(f.y-c[0][1]))&&(f=[f.x,f.y],d&&k(f,a)<k(c[0],a)?c.unshift(f):c.push(f),d++)}return c}function q(a){if(a[0]<W||a[0]>ea||a[1]<U||a[1]>na)return[b(a[0],
W,ea),b(a[1],U,na)]}function t(a,b){if(a[0]===b[0]&&(a[0]===W||a[0]===ea)||a[1]===b[1]&&(a[1]===U||a[1]===na))return!0}function u(a,b){var c=[];a=q(a);b=q(b);if(a&&b&&t(a,b))return c;a&&c.push(a);b&&c.push(b);return c}function y(a,b,c){return function(d,f){var g=q(d),h=q(f),k=[];if(g&&h&&t(g,h))return k;g&&k.push(g);h&&k.push(h);if(d=2*e.constrain((d[a]+f[a])/2,b,c)-((g||d)[a]+(h||f)[a]))g=g&&h?0<d===g[a]>h[a]?g:h:g||h,g[a]+=d;return k}}function w(a){var b=a[0],c=a[1],d=b===T[P-1][0],e=c===T[P-1][1];
if(!d||!e)if(1<P){var f=b===T[P-2][0],g=c===T[P-2][1];d&&(b===W||b===ea)&&f?g?P--:T[P-1]=a:e&&(c===U||c===na)&&g?f?P--:T[P-1]=a:T[P++]=a}else T[P++]=a}function x(a){T[P-1][0]!==a[0]&&T[P-1][1]!==a[1]&&w([oa,ja]);w(a);la=null;oa=ja=0}function F(a){da=a[0]/H;ca=a[1]/E;ha=a[0]<W?W:a[0]>ea?ea:0;fa=a[1]<U?U:a[1]>na?na:0;if(ha||fa){if(P)if(la){var b=qa(la,a);1<b.length&&(x(b[0]),T[P++]=b[1])}else Z=qa(T[P-1],a)[0],T[P++]=Z;else T[P++]=[ha||a[0],fa||a[1]];b=T[P-1];if(ha&&fa&&(b[0]!==ha||b[1]!==fa)){if(la)if(oa!==
ha&&ja!==fa)if(oa&&ja){b=a[0]-la[0];var c=(a[1]-la[1])/b;b=0<(la[1]*a[0]-a[1]*la[0])/b?[0<c?W:ea,na]:[0<c?ea:W,U];w(b)}else w([oa||ha,ja||fa]);else oa&&ja&&w([oa,ja]);w([ha,fa])}else oa-ha&&ja-fa&&w([ha||oa,fa||ja]);la=a;oa=ha;ja=fa}else la&&x(qa(la,a)[0]),T[P++]=a}var B=m.xaxis,C=m.yaxis,D="log"===B.type,G="log"===C.type,H=B._length,E=C._length,K=m.connectGaps,I=m.baseTolerance,J=m.shape,L="linear"===J,M=m.fill&&"none"!==m.fill,N=[],O=l.minTolerance,R=a.length,T=Array(R),P=0,S,ba,da,ca;var Y=l.maxScreensAway;
var W=-H*Y,ea=H*(1+Y),U=-E*Y,na=E*(1+Y),X=[[W,U,ea,U],[ea,U,ea,na],[ea,na,W,na],[W,na,W,U]],ha,fa,oa,ja,Z,qa;"linear"===J||"spline"===J?qa=r:"hv"===J||"vh"===J?qa=u:"hvh"===J?qa=y(0,W,ea):"vhv"===J&&(qa=y(1,U,na));for(J=0;J<R;J++)if(Y=d(J)){P=0;var la=null;F(Y);for(J++;J<R;J++){var V=d(J);if(!V)if(K)continue;else break;if(L&&m.simplify){var ia=d(J+1);var ma=k(V,Y);if(M&&(0===P||P===R-1)||!(ma<c(V,ia)*O)){var wa=[(V[0]-Y[0])/ma,(V[1]-Y[1])/ma];var Aa=Y;var Ha=ma;var Ba=S=ba=0;var va=!1;ma=V;for(J++;J<
a.length;J++){var pa=ia;ia=d(J+1);if(!pa)if(K)continue;else break;var ya=[pa[0]-Y[0],pa[1]-Y[1]];var ka=ya[0]*wa[1]-ya[1]*wa[0];S=Math.min(S,ka);ba=Math.max(ba,ka);if(ba-S>c(pa,ia))break;ma=pa;ya=ya[0]*wa[0]+ya[1]*wa[1];ya>Ha?(Ha=ya,V=pa,va=!1):ya<Ba&&(Ba=ya,Aa=pa,va=!0)}va?(F(V),ma!==Aa&&F(Aa)):(Aa!==Y&&F(Aa),ma!==V&&F(V));F(ma);if(J>=a.length||!pa)break;F(pa);Y=pa}}else F(V)}la&&w([oa||la[0],ja||la[1]]);N.push(T.slice(0,P))}return N}},{"../../constants/numerical":677,"../../lib":700,"./constants":1055}],
1066:[function(a,t,m){t.exports=function(a,g,h){"spline"===h("line.shape")&&h("line.smoothing")}},{}],1067:[function(a,t,m){var p={tonextx:1,tonexty:1,tonext:1};t.exports=function(a,h,e){var g,b={};var l=!1;var m=-1,q=0,d=-1;for(h=0;h<e.length;h++)a=e[h][0].trace,(g=a.stackgroup||"")?g in b?g=b[g]:(g=b[g]=q,q++):a.fill in p&&0<=d?g=d:(g=d=q,q++),g<m&&(l=!0),a._groupIndex=m=g;e=e.slice();l&&e.sort(function(a,b){a=a[0].trace;b=b[0].trace;return a._groupIndex-b._groupIndex||a.index-b.index});b={};for(h=
0;h<e.length;h++)a=e[h][0].trace,g=a.stackgroup||"",!0===a.visible?(a._nexttrace=null,a.fill in p&&(l=b[g],a._prevtrace=l||null,l&&(l._nexttrace=a)),a._ownfill=a.fill&&("tozero"===a.fill.substr(0,6)||"toself"===a.fill||"to"===a.fill.substr(0,2)&&!a._prevtrace),b[g]=a):a._prevtrace=a._nexttrace=a._ownfill=null;return e}},{}],1068:[function(a,t,m){var p=a("fast-isnumeric");t.exports=function(a){a=a.marker;var g=a.sizeref||1,e=a.sizemin||0,n="area"===a.sizemode?function(a){return Math.sqrt(a/g)}:function(a){return a/
g};return function(a){a=n(a/2);return p(a)&&0<a?Math.max(a,e):0}}},{"fast-isnumeric":221}],1069:[function(a,t,m){t.exports={container:"marker",min:"cmin",max:"cmax"}},{}],1070:[function(a,t,m){var p=a("../../components/color"),g=a("../../components/colorscale/helpers").hasColorscale,h=a("../../components/colorscale/defaults"),e=a("./subtypes");t.exports=function(a,b,l,m,q,d){var f=e.isBubble(a),c=(a.line||{}).color;d=d||{};c&&(l=c);q("marker.symbol");q("marker.opacity",f?.7:1);q("marker.size");q("marker.color",
l);g(a,"marker")&&h(a,b,m,q,{prefix:"marker.",cLetter:"c"});d.noSelect||(q("selected.marker.color"),q("unselected.marker.color"),q("selected.marker.size"),q("unselected.marker.size"));d.noLine||(l=c&&!Array.isArray(c)&&b.marker.color!==c?c:f?p.background:p.defaultLine,q("marker.line.color",l),g(a,"marker.line")&&h(a,b,m,q,{prefix:"marker.line.",cLetter:"c"}),q("marker.line.width",f?1:0));f&&(q("marker.sizeref"),q("marker.sizemin"),q("marker.sizemode"));d.gradient&&"none"!==q("marker.gradient.type")&&
q("marker.gradient.color")}},{"../../components/color":577,"../../components/colorscale/defaults":587,"../../components/colorscale/helpers":588,"./subtypes":1075}],1071:[function(a,t,m){function p(a,b,c){b.each(function(b){var d=l(e.select(this),"g","fills");q.setClipUrl(d,c.layerClipId,a);var f=b[0].trace;b=[];f._ownfill&&b.push("_ownFill");f._nexttrace&&b.push("_nextFill");d=d.selectAll("g").data(b,u);d.enter().append("g");d.exit().each(function(a){f[a]=null}).remove();d.order().each(function(a){f[a]=
l(e.select(this),"path","js-fill")})})}function g(a,c,g,m,p,t,x){function r(a){return K?a.transition():a}function v(a){r(a).attr("d","M0,0Z")}function w(a){return a.filter(function(a){return!a.gap&&a.vis})}function y(a){return a.filter(function(a){return a.vis})}function z(a){return a.filter(function(a){return!a.gap})}function A(a){return a.id}function E(){return!1}h(a,c,g,m,p);var K=!!x&&0<x.duration,I=g.xaxis,J=g.yaxis,L=m[0].trace,M=L.line,N=e.select(t),O=l(N,"g","errorbars");t=l(N,"g","lines");
c=l(N,"g","points");p=l(N,"g","text");n.getComponentMethod("errorbars","plot")(a,O,g,x);if(!0===L.visible){r(N).style("opacity",L.opacity);var R=L.fill.charAt(L.fill.length-1);"x"!==R&&"y"!==R&&(R="");g.isRangePlot||(m[0].node3=N);x="";N=[];if(O=L._prevtrace){x=O._prevRevpath||"";var T=O._nextFill;N=O._polygons}var P,S,ba="",da="",ca=[];var Y=b.noop;O=L._ownFill;if(d.hasLines(L)||"none"!==L.fill){T&&T.datum(m);if(-1!==["hv","vh","hvh","vhv"].indexOf(M.shape)){var W=q.steps(M.shape);var ea=q.steps(M.shape.split("").reverse().join(""))}else W=
"spline"===M.shape?ea=function(a){var b=a[a.length-1];return 1<a.length&&a[0][0]===b[0]&&a[0][1]===b[1]?q.smoothclosed(a.slice(1),M.smoothing):q.smoothopen(a,M.smoothing)}:ea=function(a){return"M"+a.join("L")};var U=function(a){return ea(a.reverse())};ca=f(m,{xaxis:I,yaxis:J,connectGaps:L.connectgaps,baseTolerance:Math.max(M.width||1,3)/4,shape:M.shape,simplify:M.simplify,fill:L.fill});var na=L._polygons=Array(ca.length);for(Y=0;Y<ca.length;Y++)L._polygons[Y]=k(ca[Y]);if(ca.length){var X=ca[0][0];
var ha=ca[ca.length-1];ha=ha[ha.length-1]}Y=function(a){return function(b){P=W(b);S=U(b);ba?R?(ba+="L"+P.substr(1),da=S+("L"+da.substr(1))):(ba+="Z"+P,da=S+"Z"+da):(ba=P,da=S);d.hasLines(L)&&1<b.length&&(b=e.select(this),b.datum(m),a?r(b.style("opacity",0).attr("d",P).call(q.lineGroupStyle)).style("opacity",1):(b=r(b),b.attr("d",P),q.singleLineStyle(m,b)))}}}t=t.selectAll(".js-line").data(ca);r(t.exit()).style("opacity",0).remove();t.each(Y(!1));t.enter().append("path").classed("js-line",!0).style("vector-effect",
"non-scaling-stroke").call(q.lineGroupStyle).each(Y(!0));q.setClipUrl(t,g.layerClipId,a);ca.length?(O?(O.datum(m),X&&ha&&(R?("y"===R?X[1]=ha[1]=J.c2p(0,!0):"x"===R&&(X[0]=ha[0]=I.c2p(0,!0)),r(O).attr("d","M"+ha+"L"+X+"L"+ba.substr(1)).call(q.singleFillStyle)):r(O).attr("d",ba+"Z").call(q.singleFillStyle))):T&&("tonext"===L.fill.substr(0,6)&&ba&&x?("tonext"===L.fill?r(T).attr("d",ba+"Z"+x+"Z").call(q.singleFillStyle):r(T).attr("d",ba+"L"+x.substr(1)+"Z").call(q.singleFillStyle),L._polygons=L._polygons.concat(N)):
(v(T),L._polygons=null)),L._prevRevpath=da,L._prevPolygons=na):(O?v(O):T&&v(T),L._polygons=L._prevRevpath=L._prevPolygons=null);c.datum(m);p.datum(m);(function(b,c,f){var h,k=f[0].trace;f=d.hasMarkers(k);var l=d.hasText(k);var n=k.ids?A:void 0;var m=E,p=E;if(f||l){var t=u,v=k.stackgroup,x=v&&"infer zero"===a._fullLayout._scatterStackOpts[I._id+J._id][v].stackgaps;k.marker.maxdisplayed||k._needsCull?t=x?y:w:v&&!x&&(t=z);f&&(m=t);l&&(p=t)}b=b.selectAll("path.point");b=b.data(m,n);m=b.enter().append("path").classed("point",
!0);K&&m.call(q.pointStyle,k,a).call(q.translatePoints,I,J).style("opacity",0).transition().style("opacity",1);b.order();var B;f&&(B=q.makePointStyleFns(k));b.each(function(b){var c=e.select(this),d=r(c);(h=q.translatePoint(b,d,I,J))?(q.singlePointStyle(b,d,k,B,a),g.layerClipId&&q.hideOutsideRangePoint(b,d,I,J,k.xcalendar,k.ycalendar),k.customdata&&c.classed("plotly-customdata",null!==b.data&&void 0!==b.data)):d.remove()});K?b.exit().transition().style("opacity",0).remove():b.exit().remove();b=c.selectAll("g");
b=b.data(p,n);b.enter().append("g").classed("textpoint",!0).append("text");b.order();b.each(function(a){var b=e.select(this),c=r(b.select("text"));(h=q.translatePoint(a,c,I,J))?g.layerClipId&&q.hideOutsideRangePoint(a,b,I,J,k.xcalendar,k.ycalendar):b.remove()});b.selectAll("text").call(q.textPointStyle,k,a).each(function(a){var b=I.c2p(a.x),c=J.c2p(a.y);e.select(this).selectAll("tspan.line").each(function(){r(e.select(this)).attr({x:b,y:c})})});b.exit().remove()})(c,p,m);T=!1===L.cliponaxis?null:
g.layerClipId;q.setClipUrl(c,T,a);q.setClipUrl(p,T,a)}}function h(a,c,f,g,h){a=f.xaxis;f=f.yaxis;var k=e.extent(b.simpleMap(a.range,a.r2c)),l=e.extent(b.simpleMap(f.range,f.r2c));f=g[0].trace;if(d.hasMarkers(f)&&(f=f.marker.maxdisplayed,0!==f)){a=g.filter(function(a){return a.x>=k[0]&&a.x<=k[1]&&a.y>=l[0]&&a.y<=l[1]});var n=Math.ceil(a.length/f),m=0;h.forEach(function(a,b){a=a[0].trace;d.hasMarkers(a)&&0<a.marker.maxdisplayed&&b<c&&m++});var q=Math.round(m*n/3+Math.floor(m/3)*n/7.1);g.forEach(function(a){delete a.vis});
a.forEach(function(a,b){0===Math.round((b+q)%n)&&(a.vis=!0)})}}var e=a("d3"),n=a("../../registry"),b=a("../../lib"),l=b.ensureSingle,u=b.identity,q=a("../../components/drawing"),d=a("./subtypes"),f=a("./line_points"),c=a("./link_traces"),k=a("../../lib/polygon").tester;t.exports=function(a,b,d,f,h,k){var l,n=!h,m=!!h&&0<h.duration,q=c(a,b,d);d=f.selectAll("g.trace").data(q,function(a){return a[0].trace.uid});d.enter().append("g").attr("class",function(a){return"trace scatter trace"+a[0].trace.uid}).style("stroke-miterlimit",
2);d.order();p(a,d,b);m?(k&&(l=k()),e.transition().duration(h.duration).ease(h.easing).each("end",function(){l&&l()}).each("interrupt",function(){l&&l()}).each(function(){f.selectAll("g.trace").each(function(c,d){g(a,d,b,c,q,this,h)})})):d.each(function(c,d){g(a,d,b,c,q,this,h)});n&&d.exit().remove();f.selectAll("path:not([d])").remove()}},{"../../components/drawing":598,"../../lib":700,"../../lib/polygon":712,"../../registry":829,"./line_points":1065,"./link_traces":1067,"./subtypes":1075,d3:154}],
1072:[function(a,t,m){var p=a("./subtypes");t.exports=function(a,h){var e=a.cd,g=a.xaxis,b=a.yaxis,l=[],m=e[0].trace;if(!p.hasMarkers(m)&&!p.hasText(m))return[];if(!1===h)for(m=0;m<e.length;m++)e[m].selected=0;else for(m=0;m<e.length;m++){var q=e[m];var d=g.c2p(q.x);var f=b.c2p(q.y);null!==q.i&&h.contains([d,f],!1,m,a)?(l.push({pointNumber:q.i,x:g.c2d(q.x),y:b.c2d(q.y)}),q.selected=1):q.selected=0}return l}},{"./subtypes":1075}],1073:[function(a,t,m){var p=["orientation","groupnorm","stackgaps"];
t.exports=function(a,h,e,n){e=e._scatterStackOpts;var b=n("stackgroup");if(b){var g=h.xaxis+h.yaxis,m=e[g];m||(m=e[g]={});e=m[b];g=!1;e?e.traces.push(h):(e=m[b]={traceIndices:[],traces:[h]},g=!0);h={orientation:h.x&&!h.y?"h":"v"};for(b=0;b<p.length;b++){m=p[b];var q=m+"Found";if(!e[q]){var d=void 0!==a[m],f="orientation"===m;if(d||g)if(e[m]=n(m,h[m]),f&&(e.fillDflt="h"===e[m]?"tonextx":"tonexty"),d&&(e[q]=!0,!g&&(delete e.traces[0][m],f)))for(m=0;m<e.traces.length-1;m++)q=e.traces[m],q._input.fill!==
q.fill&&(q.fill=e.fillDflt)}}return e}}},{}],1074:[function(a,t,m){function p(a,g,h){e.pointStyle(a.selectAll("path.point"),g,h)}function g(a,g,h){e.textPointStyle(a.selectAll("text"),g,h)}var h=a("d3"),e=a("../../components/drawing"),n=a("../../registry");t.exports={style:function(a,l){l=l?l[0].node3:h.select(a).selectAll("g.trace.scatter");l.style("opacity",function(a){return a[0].trace.opacity});l.selectAll("g.points").each(function(b){var e=h.select(this);p(e,b.trace||b[0].trace,a)});l.selectAll("g.text").each(function(b){var e=
h.select(this);g(e,b.trace||b[0].trace,a)});l.selectAll("g.trace path.js-line").call(e.lineGroupStyle);l.selectAll("g.trace path.js-fill").call(e.fillGroupStyle);n.getComponentMethod("errorbars","style")(l)},stylePoints:p,styleText:g,styleOnSelect:function(a,h){var b=h[0].node3;h=h[0].trace;h.selectedpoints?(e.selectedPointStyle(b.selectAll("path.point"),h),e.selectedTextStyle(b.selectAll("text"),h)):(p(b,h,a),g(b,h,a))}}},{"../../components/drawing":598,"../../registry":829,d3:154}],1075:[function(a,
t,m){var p=a("../../lib");t.exports={hasLines:function(a){return a.visible&&a.mode&&-1!==a.mode.indexOf("lines")},hasMarkers:function(a){return a.visible&&(a.mode&&-1!==a.mode.indexOf("markers")||"splom"===a.type)},hasText:function(a){return a.visible&&a.mode&&-1!==a.mode.indexOf("text")},isBubble:function(a){return p.isPlainObject(a.marker)&&p.isArrayOrTypedArray(a.marker.size)}}},{"../../lib":700}],1076:[function(a,t,m){var p=a("../../lib");t.exports=function(a,h,e,n,b){b=b||{};n("textposition");
p.coerceFont(n,"textfont",e.font);b.noSelect||(n("selected.textfont.color"),n("unselected.textfont.color"))}},{"../../lib":700}],1077:[function(a,t,m){var p=a("../../lib"),g=a("../../registry");t.exports=function(a,e,n,b){var h=b("x"),m=b("y");g.getComponentMethod("calendars","handleTraceDefaults")(a,e,["x","y"],n);if(h)a=p.minRowLength(h),m?m=Math.min(a,p.minRowLength(m)):(m=a,b("y0"),b("dy"));else{if(!m)return 0;m=p.minRowLength(m);b("x0");b("dx")}return e._length=m}},{"../../lib":700,"../../registry":829}],
1078:[function(a,t,m){function p(a){return{show:{valType:"boolean",dflt:!1},opacity:{valType:"number",min:0,max:1,dflt:1},scale:{valType:"number",min:0,max:10,dflt:2/3}}}m=a("../scatter/attributes");var g=a("../../components/colorscale/attributes"),h=a("../../components/fx/hovertemplate_attributes"),e=a("../../plots/attributes"),n=a("../../constants/gl3d_dashes"),b=a("../../constants/gl3d_markers"),l=a("../../lib/extend").extendFlat;a=a("../../plot_api/edit_types").overrideAll;var u=m.marker,q=u.line;
n=l({width:m.line.width,dash:{valType:"enumerated",values:Object.keys(n),dflt:"solid"}},g("line"));t=t.exports=a({x:m.x,y:m.y,z:{valType:"data_array"},text:l({},m.text,{}),hovertext:l({},m.hovertext,{}),hovertemplate:h(),mode:l({},m.mode,{dflt:"lines+markers"}),surfaceaxis:{valType:"enumerated",values:[-1,0,1,2],dflt:-1},surfacecolor:{valType:"color"},projection:{x:p("x"),y:p("y"),z:p("z")},connectgaps:m.connectgaps,line:n,marker:l({symbol:{valType:"enumerated",values:Object.keys(b),dflt:"circle",
arrayOk:!0},size:l({},u.size,{dflt:8}),sizeref:u.sizeref,sizemin:u.sizemin,sizemode:u.sizemode,opacity:l({},u.opacity,{arrayOk:!1}),colorbar:u.colorbar,line:l({width:l({},q.width,{arrayOk:!1})},g("marker.line"))},g("marker")),textposition:l({},m.textposition,{dflt:"top center"}),textfont:{color:m.textfont.color,size:m.textfont.size,family:l({},m.textfont.family,{arrayOk:!1})},hoverinfo:l({},e.hoverinfo)},"calc","nested");t.x.editType=t.y.editType=t.z.editType="calc+clearAxisTypes"},{"../../components/colorscale/attributes":584,
"../../components/fx/hovertemplate_attributes":615,"../../constants/gl3d_dashes":674,"../../constants/gl3d_markers":675,"../../lib/extend":690,"../../plot_api/edit_types":731,"../../plots/attributes":745,"../scatter/attributes":1051}],1079:[function(a,t,m){var p=a("../scatter/arrays_to_calcdata"),g=a("../scatter/colorscale_calc");t.exports=function(a,e){var h=[{x:!1,y:!1,trace:e,t:{}}];p(h,e);g(a,e);return h}},{"../scatter/arrays_to_calcdata":1050,"../scatter/colorscale_calc":1054}],1080:[function(a,
t,m){function p(a,e,n,b){if(!e||!e.visible)return null;e=g.getComponentMethod("errorbars","makeComputeError")(e);for(var h=Array(a.length),m=0;m<a.length;m++){var q=e(+a[m],m);if("log"===b.type){var d=b.c2l(a[m]),f=a[m]-q[0];q=a[m]+q[1];h[m]=[(b.c2l(f,!0)-d)*n,(b.c2l(q,!0)-d)*n];0<f&&(d=b.c2l(f),b._lowerLogErrorBound||(b._lowerLogErrorBound=d),b._lowerErrorBound=Math.min(b._lowerLogErrorBound,d))}else h[m]=[-q[0]*n,q[1]*n]}return h}var g=a("../../registry");t.exports=function(a,e,g){a=[p(a.x,a.error_x,
e[0],g.xaxis),p(a.y,a.error_y,e[1],g.yaxis),p(a.z,a.error_z,e[2],g.zaxis)];a:{for(e=0;e<a.length;e++)if(a[e]){e=a[e].length;break a}e=0}if(0===e)return null;g=Array(e);for(var b=0;b<e;b++){for(var h=[[0,0,0],[0,0,0]],n=0;3>n;n++)if(a[n])for(var m=0;2>m;m++)h[m][n]=a[n][b][m];g[b]=h}return g}},{"../../registry":829}],1081:[function(a,t,m){function p(a,b){this.scene=a;this.uid=b;this.color=this.delaunayMesh=this.textMarkers=this.errorBars=this.scatterPlot=this.linePlot=null;this.mode="";this.dataPoints=
[];this.axesBounds=[[-Infinity,-Infinity,-Infinity],[Infinity,Infinity,Infinity]];this.data=this.textLabels=null}function g(a){return null===a||void 0===a?0:-1<a.indexOf("left")?-1:-1<a.indexOf("right")?1:0}function h(a){return null===a||void 0===a?0:-1<a.indexOf("top")?-1:-1<a.indexOf("bottom")?1:0}function e(a,b){return b(4*a)}function n(a){return y[a]}function b(a,b,c,d,e){if(k.isArrayOrTypedArray(a)){var f=[];for(var g=0;g<b;g++)f[g]=void 0===a[g]?d:c(a[g],e)}else f=c(a,k.identity);return f}function l(a){if(Array.isArray(a)){var b=
a[0];Array.isArray(b)&&(a=b);return"rgb("+a.slice(0,3).map(function(a){return Math.round(255*a)})+")"}return null}var u=a("gl-line3d"),q=a("gl-scatter3d"),d=a("gl-error3d"),f=a("gl-mesh3d"),c=a("delaunay-triangulate"),k=a("../../lib"),r=a("../../lib/str2rgbarray"),v=a("../../lib/gl_format_color").formatColor,z=a("../scatter/make_bubble_size_func"),A=a("../../constants/gl3d_dashes"),y=a("../../constants/gl3d_markers"),w=a("./calc_errors");a=p.prototype;a.handlePick=function(a){if(a.object&&(a.object===
this.linePlot||a.object===this.delaunayMesh||a.object===this.textMarkers||a.object===this.scatterPlot)){var b=a.index=a.data.index;a.object.highlight&&a.object.highlight(null);this.scatterPlot&&(a.object=this.scatterPlot,this.scatterPlot.highlight(a.data));a.textLabel="";if(this.textLabels)if(Array.isArray(this.textLabels)){if(this.textLabels[b]||0===this.textLabels[b])a.textLabel=this.textLabels[b]}else a.textLabel=this.textLabels;a.traceCoordinate=[this.data.x[b],this.data.y[b],this.data.z[b]];
return!0}};a.update=function(a){var m=this.scene.glplot.gl;var p=A.solid;this.data=a;var t=this.scene,y=[],x=t.fullSceneLayout;t=t.dataScale;var H=x.xaxis,E=x.yaxis,K=x.zaxis,I=a.marker,J=a.line,L=a.x||[],M=a.y||[],N=a.z||[],O=L.length,R=a.xcalendar,T=a.ycalendar,P=a.zcalendar,S;for(S=0;S<O;S++){var ba=H.d2l(L[S],0,R)*t[0];var da=E.d2l(M[S],0,T)*t[1];var ca=K.d2l(N[S],0,P)*t[2];y[S]=[ba,da,ca]}if(Array.isArray(a.text))var Y=a.text;else if(void 0!==a.text)for(Y=Array(O),S=0;S<O;S++)Y[S]=a.text;y={position:y,
mode:a.mode,text:Y};"line"in a&&(y.lineColor=v(J,1,O),y.lineWidth=J.width,y.lineDashes=J.dash);"marker"in a&&(S=z(a),y.scatterColor=v(I,1,O),y.scatterSize=b(I.size,O,e,20,S),y.scatterMarker=b(I.symbol,O,n,""),y.scatterLineWidth=I.line.width,y.scatterLineColor=v(I.line,1,O),y.scatterAngle=0);if("textposition"in a){S=a.textposition;I=[0,0];if(Array.isArray(S))for(J=0;J<S.length;J++)I[J]=[0,0],S[J]&&(I[J][0]=g(S[J]),I[J][1]=h(S[J]));else I[0]=g(S),I[1]=h(S);y.textOffset=I;y.textColor=v(a.textfont,1,
O);y.textSize=b(a.textfont.size,O,k.identity,12);y.textFont=a.textfont.family;y.textAngle=0}O=["x","y","z"];y.project=[!1,!1,!1];y.projectScale=[1,1,1];y.projectOpacity=[1,1,1];for(S=0;3>S;++S)if(I=a.projection[O[S]],y.project[S]=I.show)y.projectOpacity[S]=I.opacity,y.projectScale[S]=I.scale;y.errorBounds=w(a,t,x);x=[a.error_x,a.error_y,a.error_z];t=[0,0,0];O=[[0,0,0],[0,0,0],[0,0,0]];S=[1,1,1];for(I=0;3>I;I++)(J=x[I])&&!1!==J.copy_zstyle&&!1!==x[2].visible&&(J=x[2]),J&&J.visible&&(t[I]=J.width/2,
O[I]=r(J.color),S[I]=J.thickness);y.errorColor=O;y.errorLineWidth=S;y.errorCapSize=t;y.delaunayAxis=a.surfaceaxis;y.delaunayColor=r(a.surfacecolor);"mode"in y&&(this.mode=y.mode);"lineDashes"in y&&y.lineDashes in A&&(p=A[y.lineDashes]);this.color=l(y.scatterColor)||l(y.lineColor);this.dataPoints=y.position;p={gl:this.scene.glplot.gl,position:y.position,color:y.lineColor,lineWidth:y.lineWidth||1,dashes:p[0],dashScale:p[1],opacity:a.opacity,connectGaps:a.connectgaps};-1!==this.mode.indexOf("lines")?
this.linePlot?this.linePlot.update(p):(this.linePlot=u(p),this.linePlot._trace=this,this.scene.glplot.add(this.linePlot)):this.linePlot&&(this.scene.glplot.remove(this.linePlot),this.linePlot.dispose(),this.linePlot=null);p=a.opacity;a.marker&&a.marker.opacity&&(p*=a.marker.opacity);p={gl:this.scene.glplot.gl,position:y.position,color:y.scatterColor,size:y.scatterSize,glyph:y.scatterMarker,opacity:p,orthographic:!0,lineWidth:y.scatterLineWidth,lineColor:y.scatterLineColor,project:y.project,projectScale:y.projectScale,
projectOpacity:y.projectOpacity};-1!==this.mode.indexOf("markers")?this.scatterPlot?this.scatterPlot.update(p):(this.scatterPlot=q(p),this.scatterPlot._trace=this,this.scatterPlot.highlightScale=1,this.scene.glplot.add(this.scatterPlot)):this.scatterPlot&&(this.scene.glplot.remove(this.scatterPlot),this.scatterPlot.dispose(),this.scatterPlot=null);p={gl:this.scene.glplot.gl,position:y.position,glyph:y.text,color:y.textColor,size:y.textSize,angle:y.textAngle,alignment:y.textOffset,font:y.textFont,
orthographic:!0,lineWidth:0,project:!1,opacity:a.opacity};this.textLabels=a.hovertext||a.text;-1!==this.mode.indexOf("text")?this.textMarkers?this.textMarkers.update(p):(this.textMarkers=q(p),this.textMarkers._trace=this,this.textMarkers.highlightScale=1,this.scene.glplot.add(this.textMarkers)):this.textMarkers&&(this.scene.glplot.remove(this.textMarkers),this.textMarkers.dispose(),this.textMarkers=null);p={gl:this.scene.glplot.gl,position:y.position,color:y.errorColor,error:y.errorBounds,lineWidth:y.errorLineWidth,
capSize:y.errorCapSize,opacity:a.opacity};this.errorBars?y.errorBounds?this.errorBars.update(p):(this.scene.glplot.remove(this.errorBars),this.errorBars.dispose(),this.errorBars=null):y.errorBounds&&(this.errorBars=d(p),this.errorBars._trace=this,this.scene.glplot.add(this.errorBars));if(0<=y.delaunayAxis){p=y.position;x=y.delaunayColor;t=y.delaunayAxis;O=(t+1)%3;S=(t+2)%3;I=[];t=[];for(y=0;y<p.length;++y)J=p[y],!isNaN(J[O])&&isFinite(J[O])&&!isNaN(J[S])&&isFinite(J[S])&&(I.push([J[O],J[S]]),t.push(y));
O=c(I);for(y=0;y<O.length;++y)for(S=O[y],I=0;I<S.length;++I)S[I]=t[S[I]];p={positions:p,cells:O,meshColor:x};p.opacity=a.opacity;this.delaunayMesh?this.delaunayMesh.update(p):(p.gl=m,this.delaunayMesh=f(p),this.delaunayMesh._trace=this,this.scene.glplot.add(this.delaunayMesh))}else this.delaunayMesh&&(this.scene.glplot.remove(this.delaunayMesh),this.delaunayMesh.dispose(),this.delaunayMesh=null)};a.dispose=function(){this.linePlot&&(this.scene.glplot.remove(this.linePlot),this.linePlot.dispose());
this.scatterPlot&&(this.scene.glplot.remove(this.scatterPlot),this.scatterPlot.dispose());this.errorBars&&(this.scene.glplot.remove(this.errorBars),this.errorBars.dispose());this.textMarkers&&(this.scene.glplot.remove(this.textMarkers),this.textMarkers.dispose());this.delaunayMesh&&(this.scene.glplot.remove(this.delaunayMesh),this.delaunayMesh.dispose())};t.exports=function(a,b){a=new p(a,b.uid);a.update(b);return a}},{"../../constants/gl3d_dashes":674,"../../constants/gl3d_markers":675,"../../lib":700,
"../../lib/gl_format_color":697,"../../lib/str2rgbarray":723,"../scatter/make_bubble_size_func":1068,"./calc_errors":1080,"delaunay-triangulate":156,"gl-error3d":243,"gl-line3d":251,"gl-mesh3d":276,"gl-scatter3d":293}],1082:[function(a,t,m){function p(a,b,e,c){var d=0,f=e("x"),h=e("y");e=e("z");g.getComponentMethod("calendars","handleTraceDefaults")(a,b,["x","y","z"],c);f&&h&&e&&(d=Math.min(f.length,h.length,e.length),b._length=b._xlength=b._ylength=b._zlength=d);return d}var g=a("../../registry"),
h=a("../../lib"),e=a("../scatter/subtypes"),n=a("../scatter/marker_defaults"),b=a("../scatter/line_defaults"),l=a("../scatter/text_defaults"),u=a("./attributes");t.exports=function(a,d,f,c){function k(b,c){return h.coerce(a,d,u,b,c)}if(p(a,d,k,c)){k("text");k("hovertext");k("hovertemplate");k("mode");e.hasLines(d)&&(k("connectgaps"),b(a,d,f,c,k));e.hasMarkers(d)&&n(a,d,f,c,k,{noSelect:!0});e.hasText(d)&&l(a,d,c,k,{noSelect:!0});c=(d.line||{}).color;var m=(d.marker||{}).color;0<=k("surfaceaxis")&&
k("surfacecolor",c||m);for(var q=["x","y","z"],t=0;3>t;++t){var A="projection."+q[t];k(A+".show")&&(k(A+".opacity"),k(A+".scale"))}q=g.getComponentMethod("errorbars","supplyDefaults");q(a,d,c||m||f,{axis:"z"});q(a,d,c||m||f,{axis:"y",inherit:"z"});q(a,d,c||m||f,{axis:"x",inherit:"z"})}else d.visible=!1}},{"../../lib":700,"../../registry":829,"../scatter/line_defaults":1064,"../scatter/marker_defaults":1070,"../scatter/subtypes":1075,"../scatter/text_defaults":1076,"./attributes":1078}],1083:[function(a,
t,m){m={};m.plot=a("./convert");m.attributes=a("./attributes");m.markerSymbols=a("../../constants/gl3d_markers");m.supplyDefaults=a("./defaults");m.colorbar=[{container:"marker",min:"cmin",max:"cmax"},{container:"line",min:"cmin",max:"cmax"}];m.calc=a("./calc");m.moduleType="trace";m.name="scatter3d";m.basePlotModule=a("../../plots/gl3d");m.categories=["gl3d","symbols","showLegend"];m.meta={};t.exports=m},{"../../constants/gl3d_markers":675,"../../plots/gl3d":789,"./attributes":1078,"./calc":1079,
"./convert":1081,"./defaults":1082}],1084:[function(a,t,m){m=a("../scatter/attributes");var p=a("../../plots/attributes"),g=a("../../components/fx/hovertemplate_attributes"),h=a("../../components/colorscale/attributes"),e=a("../../components/colorbar/attributes");a=a("../../lib/extend").extendFlat;var n=m.marker,b=m.line,l=n.line;t.exports={carpet:{valType:"string",editType:"calc"},a:{valType:"data_array",editType:"calc"},b:{valType:"data_array",editType:"calc"},mode:a({},m.mode,{dflt:"markers"}),
text:a({},m.text,{}),hovertext:a({},m.hovertext,{}),line:{color:b.color,width:b.width,dash:b.dash,shape:a({},b.shape,{values:["linear","spline"]}),smoothing:b.smoothing,editType:"calc"},connectgaps:m.connectgaps,fill:a({},m.fill,{values:["none","toself","tonext"],dflt:"none"}),fillcolor:m.fillcolor,marker:a({symbol:n.symbol,opacity:n.opacity,maxdisplayed:n.maxdisplayed,size:n.size,sizeref:n.sizeref,sizemin:n.sizemin,sizemode:n.sizemode,line:a({width:l.width,editType:"calc"},h("marker.line")),gradient:n.gradient,
editType:"calc"},h("marker"),{colorbar:e}),textfont:m.textfont,textposition:m.textposition,selected:m.selected,unselected:m.unselected,hoverinfo:a({},p.hoverinfo,{flags:["a","b","text","name"]}),hoveron:m.hoveron,hovertemplate:g()}},{"../../components/colorbar/attributes":578,"../../components/colorscale/attributes":584,"../../components/fx/hovertemplate_attributes":615,"../../lib/extend":690,"../../plots/attributes":745,"../scatter/attributes":1051}],1085:[function(a,t,m){var p=a("fast-isnumeric"),
g=a("../scatter/colorscale_calc"),h=a("../scatter/arrays_to_calcdata"),e=a("../scatter/calc_selection"),n=a("../scatter/calc").calcMarkerSize,b=a("../carpet/lookup_carpetid");t.exports=function(a,m){var l=m._carpetTrace=b(a,m);if(l&&l.visible&&"legendonly"!==l.visible){var d;m.xaxis=l.xaxis;m.yaxis=l.yaxis;var f=m._length,c=Array(f),k=!1;for(d=0;d<f;d++){var r=m.a[d];var t=m.b[d];if(p(r)&&p(t)){var u=l.ab2xy(+r,+t,!0),A=l.isVisible(+r,+t);A||(k=!0);c[d]={x:u[0],y:u[1],a:r,b:t,vis:A}}else c[d]={x:!1,
y:!1}}m._needsCull=k;c[0].carpet=l;c[0].trace=m;n(m,f);g(a,m);h(c,m);e(c,m);return c}}},{"../carpet/lookup_carpetid":897,"../scatter/arrays_to_calcdata":1050,"../scatter/calc":1052,"../scatter/calc_selection":1053,"../scatter/colorscale_calc":1054,"fast-isnumeric":221}],1086:[function(a,t,m){var p=a("../../lib"),g=a("../scatter/constants"),h=a("../scatter/subtypes"),e=a("../scatter/marker_defaults"),n=a("../scatter/line_defaults"),b=a("../scatter/line_shape_defaults"),l=a("../scatter/text_defaults"),
u=a("../scatter/fillcolor_defaults"),q=a("./attributes");t.exports=function(a,f,c,k){function d(b,c){return p.coerce(a,f,q,b,c)}d("carpet");f.xaxis="x";f.yaxis="y";var m=d("a"),t=d("b");if(m=Math.min(m.length,t.length)){f._length=m;d("text");d("hovertext");d("mode",m<g.PTS_LINESONLY?"lines+markers":"lines");h.hasLines(f)&&(n(a,f,c,k,d),b(a,f,d),d("connectgaps"));h.hasMarkers(f)&&e(a,f,c,k,d,{gradient:!0});h.hasText(f)&&l(a,f,k,d);k=[];if(h.hasMarkers(f)||h.hasText(f))d("marker.maxdisplayed"),k.push("points");
d("fill");"none"!==f.fill&&(u(a,f,c,d),h.hasLines(f)||b(a,f,d));"tonext"!==f.fill&&"toself"!==f.fill||k.push("fills");"fills"!==d("hoveron",k.join("+")||"points")&&d("hovertemplate");p.coerceSelectionMarkerOpacity(f,d)}else f.visible=!1}},{"../../lib":700,"../scatter/constants":1055,"../scatter/fillcolor_defaults":1060,"../scatter/line_defaults":1064,"../scatter/line_shape_defaults":1066,"../scatter/marker_defaults":1070,"../scatter/subtypes":1075,"../scatter/text_defaults":1076,"./attributes":1084}],
1087:[function(a,t,m){t.exports=function(a,g,h,e,n){g=e[n];a.a=g.a;a.b=g.b;a.y=g.y;return a}},{}],1088:[function(a,t,m){var p=a("../scatter/hover"),g=a("../scatter/fill_hover_text");t.exports=function(a,e,n,b){function h(a,b){var d=a.labelprefix&&0<a.labelprefix.length?a.labelprefix.replace(/ = $/,""):a._hovertitle;c.push(d+": "+b.toFixed(3)+a.labelsuffix)}if((e=p(a,e,n,b))&&!1!==e[0].index){n=e[0];if(void 0===n.index)return b=a.xa._length,a=b*(1-n.y0/a.ya._length)/2,b-=a,n.x0=Math.max(Math.min(n.x0,
b),a),n.x1=Math.max(Math.min(n.x1,b),a),e;a=n.cd[n.index];n.a=a.a;n.b=a.b;n.xLabelVal=void 0;n.yLabelVal=void 0;b=n.trace;var m=b._carpet,q=m.ab2ij([a.a,a.b]),d=Math.floor(q[0]),f=Math.floor(q[1]);q=m.evalxy([],d,f,q[0]-d,q[1]-f);n.yLabel=q[1].toFixed(3);delete n.text;var c=[];b.hovertemplate||(q=(a.hi||b.hoverinfo).split("+"),-1!==q.indexOf("all")&&(q=["a","b","text"]),-1!==q.indexOf("a")&&h(m.aaxis,a.a),-1!==q.indexOf("b")&&h(m.baxis,a.b),c.push("y: "+n.yLabel),-1!==q.indexOf("text")&&g(a,b,c),
n.extraText=c.join("\x3cbr\x3e"));return e}}},{"../scatter/fill_hover_text":1059,"../scatter/hover":1062}],1089:[function(a,t,m){m={};m.attributes=a("./attributes");m.supplyDefaults=a("./defaults");m.colorbar=a("../scatter/marker_colorbar");m.calc=a("./calc");m.plot=a("./plot");m.style=a("../scatter/style").style;m.styleOnSelect=a("../scatter/style").styleOnSelect;m.hoverPoints=a("./hover");m.selectPoints=a("../scatter/select");m.eventData=a("./event_data");m.moduleType="trace";m.name="scattercarpet";
m.basePlotModule=a("../../plots/cartesian");m.categories="svg carpet symbols showLegend carpetDependent zoomScale".split(" ");m.meta={};t.exports=m},{"../../plots/cartesian":759,"../scatter/marker_colorbar":1069,"../scatter/select":1072,"../scatter/style":1074,"./attributes":1084,"./calc":1085,"./defaults":1086,"./event_data":1087,"./hover":1088,"./plot":1090}],1090:[function(a,t,m){var p=a("../scatter/plot"),g=a("../../plots/cartesian/axes"),h=a("../../components/drawing");t.exports=function(a,n,
b,l){var e=b[0][0].carpet;n={xaxis:g.getFromId(a,e.xaxis||"x"),yaxis:g.getFromId(a,e.yaxis||"y"),plot:n.plot};p(a,n,b,l);for(n=0;n<b.length;n++)e=b[n][0].trace,e=l.selectAll("g.trace"+e.uid+" .js-line"),h.setClipUrl(e,b[n][0].carpet._clipPathId,a)}},{"../../components/drawing":598,"../../plots/cartesian/axes":748,"../scatter/plot":1071}],1091:[function(a,t,m){m=a("../../components/fx/hovertemplate_attributes");var p=a("../scatter/attributes"),g=a("../../plots/attributes"),h=a("../../components/colorscale/attributes"),
e=a("../../components/drawing/attributes").dash,n=a("../../lib/extend").extendFlat;a=a("../../plot_api/edit_types").overrideAll;var b=p.marker,l=p.line,u=b.line;t.exports=a({lon:{valType:"data_array"},lat:{valType:"data_array"},locations:{valType:"data_array"},locationmode:{valType:"enumerated",values:["ISO-3","USA-states","country names"],dflt:"ISO-3"},mode:n({},p.mode,{dflt:"markers"}),text:n({},p.text,{}),hovertext:n({},p.hovertext,{}),textfont:p.textfont,textposition:p.textposition,line:{color:l.color,
width:l.width,dash:e},connectgaps:p.connectgaps,marker:n({symbol:b.symbol,opacity:b.opacity,size:b.size,sizeref:b.sizeref,sizemin:b.sizemin,sizemode:b.sizemode,colorbar:b.colorbar,line:n({width:u.width},h("marker.line")),gradient:b.gradient},h("marker")),fill:{valType:"enumerated",values:["none","toself"],dflt:"none"},fillcolor:p.fillcolor,selected:p.selected,unselected:p.unselected,hoverinfo:n({},g.hoverinfo,{flags:["lon","lat","location","text","name"]}),hovertemplate:m()},"calc","nested")},{"../../components/colorscale/attributes":584,
"../../components/drawing/attributes":597,"../../components/fx/hovertemplate_attributes":615,"../../lib/extend":690,"../../plot_api/edit_types":731,"../../plots/attributes":745,"../scatter/attributes":1051}],1092:[function(a,t,m){var p=a("fast-isnumeric"),g=a("../../constants/numerical").BADNUM,h=a("../scatter/colorscale_calc"),e=a("../scatter/arrays_to_calcdata"),n=a("../scatter/calc_selection"),b=a("../../lib")._;t.exports=function(a,m){for(var l=Array.isArray(m.locations),d=l?m.locations.length:
m._length,f=Array(d),c=0;c<d;c++){var k=f[c]={};if(l){var r=m.locations[c];k.loc="string"===typeof r?r:null}else{r=m.lon[c];var t=m.lat[c];p(r)&&p(t)?k.lonlat=[+r,+t]:k.lonlat=[g,g]}}e(f,m);h(a,m);n(f,m);d&&(f[0].t={labels:{lat:b(a,"lat:")+" ",lon:b(a,"lon:")+" "}});return f}},{"../../constants/numerical":677,"../../lib":700,"../scatter/arrays_to_calcdata":1050,"../scatter/calc_selection":1053,"../scatter/colorscale_calc":1054,"fast-isnumeric":221}],1093:[function(a,t,m){function p(a,b,e){if(a=e("locations"))return e("locationmode"),
e=a.length;a=e("lon")||[];e=e("lat")||[];e=Math.min(a.length,e.length);return b._length=e}var g=a("../../lib"),h=a("../scatter/subtypes"),e=a("../scatter/marker_defaults"),n=a("../scatter/line_defaults"),b=a("../scatter/text_defaults"),l=a("../scatter/fillcolor_defaults"),u=a("./attributes");t.exports=function(a,d,f,c){function k(b,c){return g.coerce(a,d,u,b,c)}p(a,d,k)?(k("text"),k("hovertext"),k("hovertemplate"),k("mode"),h.hasLines(d)&&(n(a,d,f,c,k),k("connectgaps")),h.hasMarkers(d)&&e(a,d,f,c,
k,{gradient:!0}),h.hasText(d)&&b(a,d,c,k),k("fill"),"none"!==d.fill&&l(a,d,f,k),g.coerceSelectionMarkerOpacity(d,k)):d.visible=!1}},{"../../lib":700,"../scatter/fillcolor_defaults":1060,"../scatter/line_defaults":1064,"../scatter/marker_defaults":1070,"../scatter/subtypes":1075,"../scatter/text_defaults":1076,"./attributes":1091}],1094:[function(a,t,m){t.exports=function(a,g){a.lon=g.lon;a.lat=g.lat;a.location=g.loc?g.loc:null;return a}},{}],1095:[function(a,t,m){function p(a,e,d,f){function c(a){return h.tickText(d,
d.c2l(a),"hover").text+""}if(!a.hovertemplate){var g=e.hi||a.hoverinfo,n="all"===g?l.hoverinfo.flags:g.split("+");g=-1!==n.indexOf("location")&&Array.isArray(a.locations);var m=-1!==n.indexOf("lon"),q=-1!==n.indexOf("lat");n=-1!==n.indexOf("text");var p=[];g?p.push(e.loc):m&&q?p.push("("+c(e.lonlat[0])+", "+c(e.lonlat[1])+")"):m?p.push(f.lon+c(e.lonlat[0])):q&&p.push(f.lat+c(e.lonlat[1]));n&&b(e,a,p);return p.join("\x3cbr\x3e")}}var g=a("../../components/fx"),h=a("../../plots/cartesian/axes"),e=
a("../../constants/numerical").BADNUM,n=a("../scatter/get_trace_color"),b=a("../scatter/fill_hover_text"),l=a("./attributes");t.exports=function(a,b,d){var f=a.cd,c=f[0].trace,h=a.xa,l=a.ya,m=a.subplot,q=m.projection.isLonLatOverEdges,t=m.project;g.getClosest(f,function(a){var c=a.lonlat;if(c[0]===e||q(c))return Infinity;var f=t(c),g=t([b,d]);c=Math.abs(f[0]-g[0]);f=Math.abs(f[1]-g[1]);a=Math.max(3,a.mrc||0);return Math.max(Math.sqrt(c*c+f*f)-a,1-3/a)},a);if(!1!==a.index){var u=f[a.index],w=u.lonlat;
h=[h.c2p(w),l.c2p(w)];l=u.mrc||1;a.x0=h[0]-l;a.x1=h[0]+l;a.y0=h[1]-l;a.y1=h[1]+l;a.loc=u.loc;a.lon=w[0];a.lat=w[1];a.color=n(c,u);a.extraText=p(c,u,m.mockAxis,f[0].t.labels);a.hovertemplate=c.hovertemplate;return[a]}}},{"../../components/fx":616,"../../constants/numerical":677,"../../plots/cartesian/axes":748,"../scatter/fill_hover_text":1059,"../scatter/get_trace_color":1061,"./attributes":1091}],1096:[function(a,t,m){m={};m.attributes=a("./attributes");m.supplyDefaults=a("./defaults");m.colorbar=
a("../scatter/marker_colorbar");m.calc=a("./calc");m.plot=a("./plot");m.style=a("./style");m.styleOnSelect=a("../scatter/style").styleOnSelect;m.hoverPoints=a("./hover");m.eventData=a("./event_data");m.selectPoints=a("./select");m.moduleType="trace";m.name="scattergeo";m.basePlotModule=a("../../plots/geo");m.categories=["geo","symbols","showLegend","scatter-like"];m.meta={};t.exports=m},{"../../plots/geo":778,"../scatter/marker_colorbar":1069,"../scatter/style":1074,"./attributes":1091,"./calc":1092,
"./defaults":1093,"./event_data":1094,"./hover":1095,"./plot":1097,"./select":1098,"./style":1099}],1097:[function(a,t,m){function p(a,f){var c=a[0].trace;if(Array.isArray(c.locations)){f=n(c,f);c=c.locationmode;for(var d=0;d<a.length;d++){var g=a[d],h=b(c,g.loc,f);g.lonlat=h?h.properties.ct:[e,e]}}}var g=a("d3"),h=a("../../lib"),e=a("../../constants/numerical").BADNUM,n=a("../../lib/topojson_utils").getTopojsonFeatures,b=a("../../lib/geo_location_utils").locationToFeature,l=a("../../lib/geojson_utils"),
u=a("../scatter/subtypes"),q=a("./style");t.exports=function(a,b,c){for(var d=0;d<c.length;d++)p(c[d],b.topojson);b=b.layers.frontplot.select(".scatterlayer");c=h.makeTraceGroups(b,c,"trace scattergeo");c.selectAll("*").remove();c.each(function(b){var c=b[0].node3=g.select(this),d=b[0].trace;if(u.hasLines(d)||"none"!==d.fill){var f=l.calcTraceToLineCoords(b);f="none"!==d.fill?l.makePolygon(f):l.makeLine(f);c.selectAll("path.js-line").data([{geojson:f,trace:d}]).enter().append("path").classed("js-line",
!0).style("stroke-miterlimit",2)}u.hasMarkers(d)&&c.selectAll("path.point").data(h.identity).enter().append("path").classed("point",!0).each(function(a){a.lonlat[0]===e&&g.select(this).remove()});u.hasText(d)&&c.selectAll("g").data(h.identity).enter().append("g").append("text").each(function(a){a.lonlat[0]===e&&g.select(this).remove()});q(a,b)})}},{"../../constants/numerical":677,"../../lib":700,"../../lib/geo_location_utils":693,"../../lib/geojson_utils":694,"../../lib/topojson_utils":727,"../scatter/subtypes":1075,
"./style":1099,d3:154}],1098:[function(a,t,m){var p=a("../scatter/subtypes"),g=a("../../constants/numerical").BADNUM;t.exports=function(a,e){var h=a.cd,b=a.xaxis,l=a.yaxis,m=[],q=h[0].trace,d;if(!p.hasMarkers(q)&&!p.hasText(q))return[];if(!1===e)for(d=0;d<h.length;d++)h[d].selected=0;else for(d=0;d<h.length;d++){q=h[d];var f=q.lonlat;if(f[0]!==g){var c=b.c2p(f);var k=l.c2p(f);e.contains([c,k],null,d,a)?(m.push({pointNumber:d,lon:f[0],lat:f[1]}),q.selected=1):q.selected=0}}return m}},{"../../constants/numerical":677,
"../scatter/subtypes":1075}],1099:[function(a,t,m){function p(a,m){var l=m[0].trace,d=m[0].node3;d.style("opacity",m[0].trace.opacity);n(d,l,a);b(d,l,a);d.selectAll("path.js-line").style("fill","none").each(function(a){var b=g.select(this);a=a.trace;var d=a.line||{};b.call(e.stroke,d.color).call(h.dashLine,d.dash||"",d.width||0);"none"!==a.fill&&b.call(e.fill,a.fillcolor)})}var g=a("d3"),h=a("../../components/drawing"),e=a("../../components/color");a=a("../scatter/style");var n=a.stylePoints,b=a.styleText;
t.exports=function(a,b){b&&p(a,b)}},{"../../components/color":577,"../../components/drawing":598,"../scatter/style":1074,d3:154}],1100:[function(a,t,m){var p=a("../../plots/attributes");m=a("../scatter/attributes");var g=a("../../components/colorscale/attributes"),h=a("../../lib/extend").extendFlat,e=a("../../plot_api/edit_types").overrideAll;a=a("./constants").DASHES;var n=m.line,b=m.marker,l=b.line;t=t.exports=e({x:m.x,x0:m.x0,dx:m.dx,y:m.y,y0:m.y0,dy:m.dy,text:m.text,hovertext:m.hovertext,textposition:m.textposition,
textfont:m.textfont,mode:{valType:"flaglist",flags:["lines","markers","text"],extras:["none"]},line:{color:n.color,width:n.width,shape:{valType:"enumerated",values:["linear","hv","vh","hvh","vhv"],dflt:"linear",editType:"plot"},dash:{valType:"enumerated",values:Object.keys(a),dflt:"solid"}},marker:h({},g("marker"),{symbol:b.symbol,size:b.size,sizeref:b.sizeref,sizemin:b.sizemin,sizemode:b.sizemode,opacity:b.opacity,colorbar:b.colorbar,line:h({},g("marker.line"),{width:l.width})}),connectgaps:m.connectgaps,
fill:h({},m.fill,{dflt:"none"}),fillcolor:m.fillcolor,selected:{marker:m.selected.marker,textfont:m.selected.textfont},unselected:{marker:m.unselected.marker,textfont:m.unselected.textfont},opacity:p.opacity},"calc","nested");t.x.editType=t.y.editType=t.x0.editType=t.y0.editType="calc+clearAxisTypes";t.hovertemplate=m.hovertemplate},{"../../components/colorscale/attributes":584,"../../lib/extend":690,"../../plot_api/edit_types":731,"../../plots/attributes":745,"../scatter/attributes":1051,"./constants":1101}],
1101:[function(a,t,m){t.exports={TOO_MANY_POINTS:1E5,SYMBOL_SDF_SIZE:200,SYMBOL_SIZE:20,SYMBOL_STROKE:1,DOT_RE:/-dot/,OPEN_RE:/-open/,DASHES:{solid:[1],dot:[1,1],dash:[4,1],longdash:[8,1],dashdot:[4,1,1,1],longdashdot:[8,1,1,1]}}},{}],1102:[function(a,t,m){function p(a){var b=a._length,c=a.textfont,d=a.textposition,e=Array.isArray(d)?d:[d],f=c.color;d=c.size;c=c.family;var g={};g.text=a.text;g.opacity=a.opacity;g.font={};g.align=[];g.baseline=[];for(a=0;a<e.length;a++){var h=e[a].split(/\s+/);switch(h[1]){case "left":g.align.push("right");
break;case "right":g.align.push("left");break;default:g.align.push(h[1])}switch(h[0]){case "top":g.baseline.push("bottom");break;case "bottom":g.baseline.push("top");break;default:g.baseline.push(h[0])}}if(Array.isArray(f))for(g.color=Array(b),a=0;a<b;a++)g.color[a]=f[a];else g.color=f;if(Array.isArray(d)||Array.isArray(c))for(g.font=Array(b),a=0;a<b;a++)e=g.font[a]={},e.size=Array.isArray(d)?l(d[a])?d[a]:0:d,e.family=Array.isArray(c)?c[a]:c;else g.font={size:d,family:c};return g}function g(a){var c=
a._length,d=a.marker,e={},g=Array.isArray(d.symbol);var h=f.isArrayOrTypedArray(d.color);var k=f.isArrayOrTypedArray(d.line.color),l=f.isArrayOrTypedArray(d.opacity),n=f.isArrayOrTypedArray(d.size),m=f.isArrayOrTypedArray(d.line.width),p;g||(p=A.OPEN_RE.test(d.symbol));if(g||h||k||l){e.colors=Array(c);e.borderColors=Array(c);k=r(d,d.opacity,c);l=r(d.line,d.opacity,c);if(!Array.isArray(l[0])){var t=l;l=Array(c);for(h=0;h<c;h++)l[h]=t}if(!Array.isArray(k[0]))for(t=k,k=Array(c),h=0;h<c;h++)k[h]=t;e.colors=
k;e.borderColors=l;for(h=0;h<c;h++)g&&(p=A.OPEN_RE.test(d.symbol[h])),p&&(l[h]=k[h].slice(),k[h]=k[h].slice(),k[h][3]=0);e.opacity=a.opacity}else p?(e.color=q(d.color,"uint8"),e.color[3]=0,e.borderColor=q(d.color,"uint8")):(e.color=q(d.color,"uint8"),e.borderColor=q(d.line.color,"uint8")),e.opacity=a.opacity*d.opacity;if(g)for(e.markers=Array(c),h=0;h<c;h++)e.markers[h]=b(d.symbol[h]);else e.marker=b(d.symbol);p=z(a);if(n||m){a=e.sizes=Array(c);g=e.borderSizes=Array(c);k=0;if(n){for(h=0;h<c;h++)a[h]=
p(d.size[h]),k+=a[h];var u=k/c}else for(n=p(d.size),h=0;h<c;h++)a[h]=n;if(m)for(h=0;h<c;h++)g[h]=d.line.width[h]/2;else for(n=d.line.width/2,h=0;h<c;h++)g[h]=n;e.sizeAvg=u}else e.size=p(d&&d.size||10),e.borderSizes=p(d.line.width);return e}function h(a,b){a=a.marker;var c={};if(!b)return c;b.marker&&b.marker.symbol?c=g(f.extendFlat({},a,b.marker)):b.marker&&(b.marker.size&&(c.size=b.marker.size/2),b.marker.color&&(c.colors=b.marker.color),void 0!==b.marker.opacity&&(c.opacity=b.marker.opacity));return c}
function e(a,b){var c={};if(!b)return c;b.textfont&&(a={opacity:1,text:a.text,textposition:a.textposition,textfont:f.extendFlat({},a.textfont)},b.textfont&&f.extendFlat(a.textfont,b.textfont),c=p(a));return c}function n(a,b){var c={capSize:2*b.width,lineWidth:b.thickness,color:b.color};b.copy_ystyle&&(c=a.error_y);return c}function b(a){if("circle"===a)return null;var b=c.symbolNumber(a);var d=c.symbolFuncs[b%100];var e=!!c.symbolNoDot[b%100];b=!!c.symbolNoFill[b%100];var f=A.DOT_RE.test(a);if(C[a])return C[a];
d=f&&!e?d(1.1*F)+D:d(F);d=u(d,{w:x,h:x,viewBox:[-F,-F,F,F],stroke:b?B:-B});return(C[a]=d)||null}var l=a("fast-isnumeric"),u=a("svg-path-sdf"),q=a("color-normalize"),d=a("../../registry"),f=a("../../lib"),c=a("../../components/drawing"),k=a("../../plots/cartesian/axis_ids"),r=a("../../lib/gl_format_color").formatColor,v=a("../scatter/subtypes"),z=a("../scatter/make_bubble_size_func"),A=a("./constants"),y=a("../../constants/interactions").DESELECTDIM,w={start:1,left:1,end:-1,right:-1,middle:0,center:0,
bottom:1,top:-1},x=A.SYMBOL_SDF_SIZE,F=A.SYMBOL_SIZE,B=A.SYMBOL_STROKE,C={},D=c.symbolFuncs[0](.05*F);t.exports={style:function(a,b){var c={marker:void 0,markerSel:void 0,markerUnsel:void 0,line:void 0,fill:void 0,errorX:void 0,errorY:void 0,text:void 0,textSel:void 0,textUnsel:void 0};if(!0!==b.visible)return c;v.hasText(b)&&(c.text=p(b),c.textSel=e(b,b.selected),c.textUnsel=e(b,b.unselected));if(v.hasMarkers(b)&&(c.marker=g(b),c.markerSel=h(b,b.selected),c.markerUnsel=h(b,b.unselected),!b.unselected&&
Array.isArray(b.marker.opacity))){var d=b.marker.opacity;c.markerUnsel.opacity=Array(d.length);for(a=0;a<d.length;a++)c.markerUnsel.opacity[a]=y*d[a]}if(v.hasLines(b)){c.line={overlay:!0,thickness:b.line.width,color:b.line.color,opacity:b.opacity};d=(A.DASHES[b.line.dash]||[1]).slice();for(a=0;a<d.length;++a)d[a]*=b.line.width;c.line.dashes=d}b.error_x&&b.error_x.visible&&(c.errorX=n(b,b.error_x));b.error_y&&b.error_y.visible&&(c.errorY=n(b,b.error_y));b.fill&&"none"!==b.fill&&(c.fill={closed:!0,
fill:b.fillcolor,thickness:0});return c},markerStyle:g,markerSelection:h,linePositions:function(a,b,c){var d=c.length,e=d/2;if(v.hasLines(b)&&e)if("hv"===b.line.shape){var f=[];for(a=0;a<e-1;a++)isNaN(c[2*a])||isNaN(c[2*a+1])?f.push(NaN,NaN,NaN,NaN):(f.push(c[2*a],c[2*a+1]),isNaN(c[2*a+2])||isNaN(c[2*a+3])?f.push(NaN,NaN):f.push(c[2*a+2],c[2*a+1]));f.push(c[d-2],c[d-1])}else if("hvh"===b.line.shape){f=[];for(a=0;a<e-1;a++)if(isNaN(c[2*a])||isNaN(c[2*a+1])||isNaN(c[2*a+2])||isNaN(c[2*a+3]))isNaN(c[2*
a])||isNaN(c[2*a+1])?f.push(NaN,NaN):f.push(c[2*a],c[2*a+1]),f.push(NaN,NaN);else{var g=(c[2*a]+c[2*a+2])/2;f.push(c[2*a],c[2*a+1],g,c[2*a+1],g,c[2*a+3])}f.push(c[d-2],c[d-1])}else if("vhv"===b.line.shape){f=[];for(a=0;a<e-1;a++)isNaN(c[2*a])||isNaN(c[2*a+1])||isNaN(c[2*a+2])||isNaN(c[2*a+3])?(isNaN(c[2*a])||isNaN(c[2*a+1])?f.push(NaN,NaN):f.push(c[2*a],c[2*a+1]),f.push(NaN,NaN)):(g=(c[2*a+1]+c[2*a+3])/2,f.push(c[2*a],c[2*a+1],c[2*a],g,c[2*a+2],g));f.push(c[d-2],c[d-1])}else if("vh"===b.line.shape){f=
[];for(a=0;a<e-1;a++)isNaN(c[2*a])||isNaN(c[2*a+1])?f.push(NaN,NaN,NaN,NaN):(f.push(c[2*a],c[2*a+1]),isNaN(c[2*a+2])||isNaN(c[2*a+3])?f.push(NaN,NaN):f.push(c[2*a],c[2*a+3]));f.push(c[d-2],c[d-1])}else f=c;d=!1;for(a=0;a<f.length;a++)if(isNaN(f[a])){d=!0;break}c=d||f.length>A.TOO_MANY_POINTS?"rect":v.hasMarkers(b)?"rect":"round";if(d&&b.connectgaps)for(b=f[0],d=f[1],a=0;a<f.length;a+=2)isNaN(f[a])||isNaN(f[a+1])?(f[a]=b,f[a+1]=d):(b=f[a],d=f[a+1]);return{join:c,positions:f}},errorBarPositions:function(a,
b,c,e,f){function g(a,d){var e=d._id.charAt(0),f=b["error_"+e];if(f&&f.visible&&("linear"===d.type||"log"===d.type)){f=h(f);for(var g={x:0,y:1}[e],k={x:[0,1,2,3],y:[2,3,0,1]}[e],n=new Float64Array(4*m),r=Infinity,p=-Infinity,t=0,u=0;t<m;t++,u+=4){var v=a[t];if(l(v)){var w=c[2*t+g],y=f(v,t),x=y[0];y=y[1];if(l(x)&&l(y)){var A=v+y;n[u+k[0]]=w-d.c2l(v-x);n[u+k[1]]=d.c2l(A)-w;n[u+k[2]]=0;n[u+k[3]]=0;r=Math.min(r,v-x);p=Math.max(p,v+y)}}}q[e]={positions:c,errors:n,_bnds:[r,p]}}}var h=d.getComponentMethod("errorbars",
"makeComputeError"),n=k.getFromId(a,b.xaxis);a=k.getFromId(a,b.yaxis);var m=c.length/2,q={};g(e,n);g(f,a);return q},textPosition:function(a,b,c,d){a=b._length;var e={};if(v.hasMarkers(b)){b=c.font;var f=c.align,g=c.baseline;e.offset=Array(a);for(c=0;c<a;c++){var h=d.sizes?d.sizes[c]:d.size,k=Array.isArray(b)?b[c].size:b.size,l=Array.isArray(f)?1<f.length?f[c]:f[0]:f,n=Array.isArray(g)?1<g.length?g[c]:g[0]:g;n=w[n];h=h?h/.8+1:0;e.offset[c]=[w[l]*h/k,(-n*h-.5*n)/k]}}return e}}},{"../../components/drawing":598,
"../../constants/interactions":676,"../../lib":700,"../../lib/gl_format_color":697,"../../plots/cartesian/axis_ids":751,"../../registry":829,"../scatter/make_bubble_size_func":1068,"../scatter/subtypes":1075,"./constants":1101,"color-normalize":110,"fast-isnumeric":221,"svg-path-sdf":519}],1103:[function(a,t,m){var p=a("../../lib"),g=a("../../registry"),h=a("./attributes"),e=a("../scatter/constants"),n=a("../scatter/subtypes"),b=a("../scatter/xy_defaults"),l=a("../scatter/marker_defaults"),u=a("../scatter/line_defaults"),
q=a("../scatter/fillcolor_defaults"),d=a("../scatter/text_defaults");t.exports=function(a,c,k,m){function f(b,d){return p.coerce(a,c,h,b,d)}var r=a.marker?/-open/.test(a.marker.symbol):!1,t=n.isBubble(a),y=b(a,c,m,f);y?(y=y<e.PTS_LINESONLY?"lines+markers":"lines",f("text"),f("hovertext"),f("hovertemplate"),f("mode",y),n.hasLines(c)&&(f("connectgaps"),u(a,c,k,m,f),f("line.shape")),n.hasMarkers(c)&&(l(a,c,k,m,f),f("marker.line.width",r||t?1:0)),n.hasText(c)&&d(a,c,m,f),m=(c.line||{}).color,r=(c.marker||
{}).color,f("fill"),"none"!==c.fill&&q(a,c,k,f),t=g.getComponentMethod("errorbars","supplyDefaults"),t(a,c,m||r||k,{axis:"y"}),t(a,c,m||r||k,{axis:"x",inherit:"y"}),p.coerceSelectionMarkerOpacity(c,f)):c.visible=!1}},{"../../lib":700,"../../registry":829,"../scatter/constants":1055,"../scatter/fillcolor_defaults":1060,"../scatter/line_defaults":1064,"../scatter/marker_defaults":1070,"../scatter/subtypes":1075,"../scatter/text_defaults":1076,"../scatter/xy_defaults":1077,"./attributes":1100}],1104:[function(a,
t,m){function p(a,b,c){a=a._extremes[b._id];b=z(b,c._bnds,{padded:!0});a.min=a.min.concat(b.min);a.max=a.max.concat(b.max)}function g(a,b){var c=b._scene,d={count:0,dirty:!0,lineOptions:[],fillOptions:[],markerOptions:[],markerSelectedOptions:[],markerUnselectedOptions:[],errorXOptions:[],errorYOptions:[],textOptions:[],textSelectedOptions:[],textUnselectedOptions:[]},e={selectBatch:null,unselectBatch:null,fill2d:!1,scatter2d:!1,error2d:!1,line2d:!1,glText:!1,select2d:null};b._scene||(c=b._scene=
{},c.init=function(){k.extendFlat(c,e,d)},c.init(),c.update=function(a){var b=k.repeat(a,c.count);c.fill2d&&c.fill2d.update(b);c.scatter2d&&c.scatter2d.update(b);c.line2d&&c.line2d.update(b);c.error2d&&c.error2d.update(b.concat(b));c.select2d&&c.select2d.update(b);if(c.glText)for(b=0;b<c.count;b++)c.glText[b].update(a)},c.draw=function(){for(var a=c.count,b=c.fill2d,d=c.error2d,e=c.line2d,f=c.scatter2d,g=c.glText,h=c.select2d,k=c.selectBatch,l=c.unselectBatch,n=0;n<a;n++)b&&c.fillOrder[n]&&b.draw(c.fillOrder[n]),
e&&c.lineOptions[n]&&e.draw(n),d&&(c.errorXOptions[n]&&d.draw(n),c.errorYOptions[n]&&d.draw(n+a)),!f||!c.markerOptions[n]||k&&k[n]||f.draw(n),g[n]&&c.textOptions[n]&&g[n].render();f&&h&&k&&(h.draw(k),f.draw(l));c.dirty=!1},c.destroy=function(){c.fill2d&&c.fill2d.destroy&&c.fill2d.destroy();c.scatter2d&&c.scatter2d.destroy&&c.scatter2d.destroy();c.error2d&&c.error2d.destroy&&c.error2d.destroy();c.line2d&&c.line2d.destroy&&c.line2d.destroy();c.select2d&&c.select2d.destroy&&c.select2d.destroy();c.glText&&
c.glText.forEach(function(a){a.destroy&&a.destroy()});c.lineOptions=null;c.fillOptions=null;c.markerOptions=null;c.markerSelectedOptions=null;c.markerUnselectedOptions=null;c.errorXOptions=null;c.errorYOptions=null;c.textOptions=null;c.textSelectedOptions=null;c.textUnselectedOptions=null;c.selectBatch=null;c.unselectBatch=null;b._scene=null});c.dirty||k.extendFlat(c,d);return c}function h(a,b,c){var d=a._size;return[d.l+b.domain[0]*d.w,d.b+c.domain[0]*d.h,a.width-d.r-(1-b.domain[1])*d.w,a.height-
d.t-(1-c.domain[1])*d.h]}function e(a,b,d,e){var f=a.xa,g=a.ya,h=a.distance,l=a.dxy,n=a.index;b={pointNumber:n,x:b[n],y:d[n]};b.tx=Array.isArray(e.text)?e.text[n]:e.text;b.htx=Array.isArray(e.hovertext)?e.hovertext[n]:e.hovertext;b.data=Array.isArray(e.customdata)?e.customdata[n]:e.customdata;b.tp=Array.isArray(e.textposition)?e.textposition[n]:e.textposition;if(d=e.textfont)b.ts=Array.isArray(d.size)?d.size[n]:d.size,b.tc=Array.isArray(d.color)?d.color[n]:d.color,b.tf=Array.isArray(d.family)?d.family[n]:
d.family;if(d=e.marker)b.ms=k.isArrayOrTypedArray(d.size)?d.size[n]:d.size,b.mo=k.isArrayOrTypedArray(d.opacity)?d.opacity[n]:d.opacity,b.mx=Array.isArray(d.symbol)?d.symbol[n]:d.symbol,b.mc=k.isArrayOrTypedArray(d.color)?d.color[n]:d.color;var m=d&&d.line;m&&(b.mlc=Array.isArray(m.color)?m.color[n]:m.color,b.mlw=k.isArrayOrTypedArray(m.width)?m.width[n]:m.width);(d=d&&d.gradient)&&"none"!==d.type&&(b.mgt=Array.isArray(d.type)?d.type[n]:d.type,b.mgc=Array.isArray(d.color)?d.color[n]:d.color);f=f.c2p(b.x,
!0);g=g.c2p(b.y,!0);d=b.mrc||1;if(m=e.hoverlabel)b.hbg=Array.isArray(m.bgcolor)?m.bgcolor[n]:m.bgcolor,b.hbc=Array.isArray(m.bordercolor)?m.bordercolor[n]:m.bordercolor,b.hts=Array.isArray(m.font.size)?m.font.size[n]:m.font.size,b.htc=Array.isArray(m.font.color)?m.font.color[n]:m.font.color,b.htf=Array.isArray(m.font.family)?m.font.family[n]:m.font.family,b.hnl=Array.isArray(m.namelength)?m.namelength[n]:m.namelength;if(m=e.hoverinfo)b.hi=Array.isArray(m)?m[n]:m;if(m=e.hovertemplate)b.ht=Array.isArray(m)?
m[n]:m;n={};n[a.index]=b;k.extendFlat(a,{color:D(e,b),x0:f-d,x1:f+d,xLabelVal:b.x,y0:g-d,y1:g+d,yLabelVal:b.y,cd:n,distance:h,spikeDistance:l,hovertemplate:b.ht});b.htx?a.text=b.htx:b.tx?a.text=b.tx:e.text&&(a.text=e.text);G(b,e,a);c.getComponentMethod("errorbars","hoverInfo")(b,e,a);return a}function n(a){a=a[0];var b=a.trace,c=a.t;a=c._scene;c=c.index;var d=a.selectBatch[c],e=a.unselectBatch[c],f=a.textOptions[c],g=a.textSelectedOptions[c]||{},h=a.textUnselectedOptions[c]||{},l=k.extendFlat({},
f);if(d&&e){g=g.color;h=h.color;f=f.color;var n=Array.isArray(f);l.color=Array(b._length);for(b=0;b<d.length;b++){var m=d[b];l.color[m]=g||(n?f[m]:f)}for(b=0;b<e.length;b++)m=e[b],d=n?f[m]:f,l.color[m]=h?h:g?d:A.addOpacity(d,I)}a.glText[c].update(l)}var b=a("regl-scatter2d"),l=a("regl-line2d"),u=a("regl-error2d"),q=a("point-cluster"),d=a("array-range"),f=a("gl-text"),c=a("../../registry"),k=a("../../lib"),r=a("../../lib/prepare_regl"),v=a("../../plots/cartesian/axis_ids"),z=a("../../plots/cartesian/autorange").findExtremes,
A=a("../../components/color"),y=a("../scatter/subtypes");m=a("../scatter/calc");var w=m.calcMarkerSize,x=m.calcAxisExpansion,F=m.setFirstScatter,B=a("../scatter/colorscale_calc"),C=a("../scatter/link_traces"),D=a("../scatter/get_trace_color"),G=a("../scatter/fill_hover_text"),H=a("./convert"),E=a("../../constants/numerical").BADNUM,K=a("./constants").TOO_MANY_POINTS,I=a("../../constants/interactions").DESELECTDIM;t.exports={moduleType:"trace",name:"scattergl",basePlotModule:a("../../plots/cartesian"),
categories:"gl regl cartesian symbols errorBarsOK showLegend scatter-like".split(" "),attributes:a("./attributes"),supplyDefaults:a("./defaults"),crossTraceDefaults:a("../scatter/cross_trace_defaults"),colorbar:a("../scatter/marker_colorbar"),calc:function(a,b){var c=a._fullLayout,d=v.getFromId(a,b.xaxis),e=v.getFromId(a,b.yaxis),f=c._plots[b.xaxis+b.yaxis],h=b._length,l=h>=K,n=2*h,m={},r,t=d.makeCalcdata(b,"x"),u=e.makeCalcdata(b,"y"),y=Array(n);for(r=0;r<h;r++){var A=t[r];var z=u[r];y[2*r]=A===
E?NaN:A;y[2*r+1]=z===E?NaN:z}if("log"===d.type)for(r=0;r<n;r+=2)y[r]=d.c2l(y[r]);if("log"===e.type)for(r=1;r<n;r+=2)y[r]=e.c2l(y[r]);if(l&&"log"!==d.type&&"log"!==e.type)m.tree=q(y);else for(n=m.ids=Array(h),r=0;r<h;r++)n[r]=r;B(a,b);r=H.style(a,b);r.marker&&(r.marker.positions=y);r.line&&1<y.length&&k.extendFlat(r.line,H.linePositions(a,b,y));if(r.errorX||r.errorY)n=H.errorBarPositions(a,b,y,t,u),r.errorX&&k.extendFlat(r.errorX,n.x),r.errorY&&k.extendFlat(r.errorY,n.y);r.text&&(k.extendFlat(r.text,
{positions:y},H.textPosition(a,b,r.text,r.marker)),k.extendFlat(r.textSel,{positions:y},H.textPosition(a,b,r.text,r.markerSel)),k.extendFlat(r.textUnsel,{positions:y},H.textPosition(a,b,r.text,r.markerUnsel)));f=g(a,f);F(c,b);var C;l?r.marker&&(C=2*(r.marker.sizeAvg||Math.max(r.marker.size,3))):C=w(b,h);x(a,b,d,e,t,u,C);r.errorX&&p(b,d,r.errorX);r.errorY&&p(b,e,r.errorY);r.fill&&!f.fill2d&&(f.fill2d=!0);r.marker&&!f.scatter2d&&(f.scatter2d=!0);r.line&&!f.line2d&&(f.line2d=!0);!r.errorX&&!r.errorY||
f.error2d||(f.error2d=!0);r.text&&!f.glText&&(f.glText=!0);r.marker&&(r.marker.snap=m.tree||K);f.lineOptions.push(r.line);f.errorXOptions.push(r.errorX);f.errorYOptions.push(r.errorY);f.fillOptions.push(r.fill);f.markerOptions.push(r.marker);f.markerSelectedOptions.push(r.markerSel);f.markerUnselectedOptions.push(r.markerUnsel);f.textOptions.push(r.text);f.textSelectedOptions.push(r.textSel);f.textUnselectedOptions.push(r.textUnsel);m._scene=f;m.index=f.count;m.x=t;m.y=u;m.positions=y;f.count++;return[{x:!1,
y:!1,t:m,trace:b}]},plot:function(a,c,d){if(d.length){var e=a._fullLayout,g=c._scene,m=c.xaxis,q=c.yaxis;if(g)if(r(a,["ANGLE_instanced_arrays","OES_element_index_uint"])){var p=e._glcanvas.data()[0].regl;C(a,c,d);if(g.dirty){!0===g.error2d&&(g.error2d=u(p));!0===g.line2d&&(g.line2d=l(p));!0===g.scatter2d&&(g.scatter2d=b(p));!0===g.fill2d&&(g.fill2d=l(p));if(!0===g.glText)for(g.glText=Array(g.count),a=0;a<g.count;a++)g.glText[a]=new f(p);if(g.glText){if(g.count>g.glText.length)for(c=g.count-g.glText.length,
a=0;a<c;a++)g.glText.push(new f(p));else g.count<g.glText.length&&g.glText.splice(g.count,g.glText.length-g.count).forEach(function(a){a.destroy()});for(a=0;a<g.count;a++)g.glText[a].update(g.textOptions[a])}g.line2d&&(g.line2d.update(g.lineOptions),g.lineOptions=g.lineOptions.map(function(a){if(a&&a.positions){for(var b=a.positions,c=0;c<b.length&&(isNaN(b[c])||isNaN(b[c+1]));)c+=2;for(var d=b.length-2;d>c&&(isNaN(b[d])||isNaN(b[d+1]));)d-=2;a.positions=b.slice(c,d+2)}return a}),g.line2d.update(g.lineOptions));
g.error2d&&(a=(g.errorXOptions||[]).concat(g.errorYOptions||[]),g.error2d.update(a));g.scatter2d&&g.scatter2d.update(g.markerOptions);g.fillOrder=k.repeat(null,g.count);g.fill2d&&(g.fillOptions=g.fillOptions.map(function(a,b){var c=d[b];if(a&&c&&c[0]&&c[0].trace){var e=c[0];c=e.trace;var f=e.t,h=g.lineOptions[b],k;e=[];c._ownfill&&e.push(b);c._nexttrace&&e.push(b+1);e.length&&(g.fillOrder[b]=e);e=[];f=h&&h.positions||f.positions;if("tozeroy"===c.fill){for(h=0;h<f.length&&isNaN(f[h+1]);)h+=2;for(k=
f.length-2;k>h&&isNaN(f[k+1]);)k-=2;0!==f[h+1]&&(e=[f[h],0]);e=e.concat(f.slice(h,k+2));0!==f[k+1]&&(e=e.concat([f[k],0]))}else if("tozerox"===c.fill){for(h=0;h<f.length&&isNaN(f[h]);)h+=2;for(k=f.length-2;k>h&&isNaN(f[k]);)k-=2;0!==f[h]&&(e=[0,f[h+1]]);e=e.concat(f.slice(h,k+2));0!==f[k]&&(e=e.concat([0,f[k+1]]))}else if("toself"===c.fill||"tonext"===c.fill){e=[];for(h=k=0;h<f.length;h+=2)if(isNaN(f[h])||isNaN(f[h+1]))e=e.concat(f.slice(k,h)),e.push(f[k],f[k+1]),k=h+2;e=e.concat(f.slice(k));k&&e.push(f[k],
f[k+1])}else if(h=c._nexttrace)if(k=g.lineOptions[b+1])if(k=k.positions,"tonexty"===c.fill){e=f.slice();for(b=Math.floor(k.length/2);b--;){f=k[2*b];var l=k[2*b+1];isNaN(f)||isNaN(l)||e.push(f,l)}a.fill=h.fillcolor}if(c._prevtrace&&"tonext"===c._prevtrace.fill){b=g.lineOptions[b-1].positions;f=e.length/2;k=[f];for(h=0;h<b.length;h+=2)(isNaN(b[h])||isNaN(b[h+1]))&&k.push(h/2+f+1);e=e.concat(b);a.hole=k}a.fillmode=c.fill;a.opacity=c.opacity;a.positions=e;return a}}),g.fill2d.update(g.fillOptions))}g.selectBatch=
null;g.unselectBatch=null;a=e.dragmode;p="lasso"===a||"select"===a;c=-1<e.clickmode.indexOf("select");for(a=0;a<d.length;a++){var t=d[a][0];var v=t.trace;var w=t.t,x=w.index;t=v._length;var A=w.x,z=w.y;if(v.selectedpoints||p||c){p||(p=!0);g.selectBatch||(g.selectBatch=[],g.unselectBatch=[]);if(v.selectedpoints){var B=g.selectBatch[x]=k.selIndices2selPoints(v),D={};for(v=0;v<B.length;v++)D[B[v]]=1;B=[];for(v=0;v<t;v++)D[v]||B.push(v);g.unselectBatch[x]=B}x=w.xpx=Array(t);w=w.ypx=Array(t);for(v=0;v<
t;v++)x[v]=m.c2p(A[v]),w[v]=q.c2p(z[v])}else w.xpx=w.ypx=null}p?(g.select2d||(g.select2d=b(e._glcanvas.data()[1].regl)),g.scatter2d&&g.selectBatch&&g.selectBatch.length&&g.scatter2d.update(g.markerUnselectedOptions.map(function(a,b){return g.selectBatch[b]?a:null})),g.select2d&&(g.select2d.update(g.markerOptions),g.select2d.update(g.markerSelectedOptions)),g.glText&&d.forEach(function(a){y.hasText(((a||[])[0]||{}).trace||{})&&n(a)})):g.scatter2d&&g.scatter2d.update(g.markerOptions);var E={viewport:h(e,
m,q),range:[(m._rl||m.range)[0],(q._rl||q.range)[0],(m._rl||m.range)[1],(q._rl||q.range)[1]]};e=k.repeat(E,g.count);g.fill2d&&g.fill2d.update(e);g.line2d&&g.line2d.update(e);g.error2d&&g.error2d.update(e.concat(e));g.scatter2d&&g.scatter2d.update(e);g.select2d&&g.select2d.update(e);g.glText&&g.glText.forEach(function(a){a.update(E)})}else g.init()}},hoverPoints:function(a,b,c,d){var f=a.cd,g=f[0].t;f=f[0].trace;var h=a.xa,k=a.ya,l=g.x,n=g.y;b=h.c2p(b);c=k.c2p(c);var m=a.distance;if(g.tree){var r=
h.p2c(b-m),q=h.p2c(b+m),p=k.p2c(c-m),t=k.p2c(c+m);g="x"===d?g.tree.range(Math.min(r,q),Math.min(k._rl[0],k._rl[1]),Math.max(r,q),Math.max(k._rl[0],k._rl[1])):g.tree.range(Math.min(r,q),Math.min(p,t),Math.max(r,q),Math.max(p,t))}else if(g.ids)g=g.ids;else return[a];if("x"===d)for(d=0;d<g.length;d++){if(q=l[g[d]],q=Math.abs(h.c2p(q)-b),q<m){m=q;r=k.c2p(n[g[d]])-c;var u=Math.sqrt(q*q+r*r);var v=g[d]}}else for(d=0;d<g.length;d++)q=l[g[d]],r=n[g[d]],q=h.c2p(q)-b,r=k.c2p(r)-c,r=Math.sqrt(q*q+r*r),r<m&&
(m=u=r,v=g[d]);a.index=v;a.distance=m;a.dxy=u;if(void 0===v)return[a];e(a,l,n,f);return[a]},selectPoints:function(a,b){var c=a.cd,e=[],f=c[0].trace,g=c[0].t,h=f._length,k=g.x,l=g.y,m=g._scene;if(!m)return e;var r=y.hasText(f),q=y.hasMarkers(f);if(!0!==f.visible||!q&&!r)return e;f=null;var p;if(!1===b||b.degenerate)var t=d(h);else for(f=[],t=[],p=0;p<h;p++)b.contains([g.xpx[p],g.ypx[p]],!1,p,a)?(f.push(p),e.push({pointNumber:p,x:k[p],y:l[p]})):t.push(p);m.selectBatch||(m.selectBatch=[],m.unselectBatch=
[]);if(!m.selectBatch[g.index]){for(p=0;p<m.count;p++)m.selectBatch[p]=[],m.unselectBatch[p]=[];q&&m.scatter2d.update(m.markerUnselectedOptions)}m.selectBatch[g.index]=f;m.unselectBatch[g.index]=t;r&&n(c);return e},sceneUpdate:g,calcHover:e,meta:{}}},{"../../components/color":577,"../../constants/interactions":676,"../../constants/numerical":677,"../../lib":700,"../../lib/prepare_regl":713,"../../plots/cartesian":759,"../../plots/cartesian/autorange":747,"../../plots/cartesian/axis_ids":751,"../../registry":829,
"../scatter/calc":1052,"../scatter/colorscale_calc":1054,"../scatter/cross_trace_defaults":1057,"../scatter/fill_hover_text":1059,"../scatter/get_trace_color":1061,"../scatter/link_traces":1067,"../scatter/marker_colorbar":1069,"../scatter/subtypes":1075,"./attributes":1100,"./constants":1101,"./convert":1102,"./defaults":1103,"array-range":57,"gl-text":313,"point-cluster":461,"regl-error2d":482,"regl-line2d":483,"regl-scatter2d":484}],1105:[function(a,t,m){m=a("../../components/fx/hovertemplate_attributes");
var p=a("../scattergeo/attributes"),g=a("../scatter/attributes"),h=a("../../plots/mapbox/layout_attributes"),e=a("../../plots/attributes"),n=a("../../components/colorbar/attributes"),b=a("../../lib/extend").extendFlat;a=a("../../plot_api/edit_types").overrideAll;var l=p.line,u=p.marker;t.exports=a({lon:p.lon,lat:p.lat,mode:b({},g.mode,{dflt:"markers"}),text:b({},g.text,{}),hovertext:b({},g.hovertext,{}),line:{color:l.color,width:l.width},connectgaps:g.connectgaps,marker:{symbol:{valType:"string",
dflt:"circle",arrayOk:!0},opacity:u.opacity,size:u.size,sizeref:u.sizeref,sizemin:u.sizemin,sizemode:u.sizemode,color:u.color,colorscale:u.colorscale,cauto:u.cauto,cmax:u.cmax,cmin:u.cmin,cmid:u.cmid,autocolorscale:u.autocolorscale,reversescale:u.reversescale,showscale:u.showscale,colorbar:n},fill:p.fill,fillcolor:g.fillcolor,textfont:h.layers.symbol.textfont,textposition:h.layers.symbol.textposition,selected:{marker:g.selected.marker},unselected:{marker:g.unselected.marker},hoverinfo:b({},e.hoverinfo,
{flags:["lon","lat","text","name"]}),hovertemplate:m()},"calc","nested")},{"../../components/colorbar/attributes":578,"../../components/fx/hovertemplate_attributes":615,"../../lib/extend":690,"../../plot_api/edit_types":731,"../../plots/attributes":745,"../../plots/mapbox/layout_attributes":806,"../scatter/attributes":1051,"../scattergeo/attributes":1091}],1106:[function(a,t,m){function p(){return{geojson:u.makeBlank(),layout:{visibility:"none"},paint:{}}}function g(a){var c=a[0].trace,e=c.marker,
g=c.selectedpoints,h=b.isArrayOrTypedArray(e.color),k=b.isArrayOrTypedArray(e.size),m=b.isArrayOrTypedArray(e.opacity),r,p;h&&(p=q.hasColorscale(c,"marker")?q.makeColorScaleFunc(q.extractScale(e,{cLetter:"c"})):b.identity);var t;k&&(t=f(c));var u;m&&(u=function(a){a=n(a)?+b.constrain(a,0,1):0;return c.opacity*a});var G=[];for(r=0;r<a.length;r++){var H=a[r],E=H.lonlat;if(E[0]!==l){var K={};p&&(K.mcc=H.mcc=p(H.mc));t&&(K.mrc=H.mrc=t(H.ms));u&&(K.mo=u(H.mo));g&&(K.selected=H.selected||0);G.push({type:"Feature",
geometry:{type:"Point",coordinates:E},properties:K})}}if(g){var I=d.makeSelectedPointStyleFns(c);for(r=0;r<G.length;r++)a=G[r].properties,I.selectedOpacityFn&&(a.mo=c.opacity*I.selectedOpacityFn(a)),I.selectedColorFn&&(a.mcc=I.selectedColorFn(a)),I.selectedSizeFn&&(a.mrc=I.selectedSizeFn(a))}return{geojson:{type:"FeatureCollection",features:G},mcc:h||I&&I.selectedColorFn?{type:"identity",property:"mcc"}:e.color,mrc:k||I&&I.selectedSizeFn?{type:"identity",property:"mrc"}:e.size/2,mo:m||I&&I.selectedOpacityFn?
{type:"identity",property:"mo"}:c.opacity*e.opacity}}function h(a){return b.isArrayOrTypedArray(a)?function(a){return a}:a?function(){return a}:e}function e(){return""}var n=a("fast-isnumeric"),b=a("../../lib"),l=a("../../constants/numerical").BADNUM,u=a("../../lib/geojson_utils"),q=a("../../components/colorscale"),d=a("../../components/drawing"),f=a("../scatter/make_bubble_size_func"),c=a("../scatter/subtypes"),k=a("../../plots/mapbox/convert_text_opts");t.exports=function(a){var d=a[0].trace,f=
!0===d.visible,n="none"!==d.fill,m=c.hasLines(d),r=c.hasMarkers(d),q=c.hasText(d),t=r&&"circle"===d.marker.symbol,B=r&&"circle"!==d.marker.symbol,C=p(),D=p(),G=p();r=p();var H={fill:C,line:D,circle:G,symbol:r};if(!f)return H;if(n||m)var E=u.calcTraceToLineCoords(a);n&&(C.geojson=u.makePolygon(E),C.layout.visibility="visible",b.extendFlat(C.paint,{"fill-color":d.fillcolor}));m&&(D.geojson=u.makeLine(E),D.layout.visibility="visible",b.extendFlat(D.paint,{"line-width":d.line.width,"line-color":d.line.color,
"line-opacity":d.opacity}));t&&(f=g(a),G.geojson=f.geojson,G.layout.visibility="visible",b.extendFlat(G.paint,{"circle-color":f.mcc,"circle-radius":f.mrc,"circle-opacity":f.mo}));if(B||q){n=a[0].trace;f=(n.marker||{}).symbol;m=n.text;f="circle"!==f?h(f):e;n=c.hasText(n)?h(m):e;m=[];for(t=0;t<a.length;t++)G=a[t],G.lonlat[0]===l||m.push({type:"Feature",geometry:{type:"Point",coordinates:G.lonlat},properties:{symbol:f(G.mx),text:n(G.tx)}});r.geojson={type:"FeatureCollection",features:m};b.extendFlat(r.layout,
{visibility:"visible","icon-image":"{symbol}-15","text-field":"{text}"});B&&(b.extendFlat(r.layout,{"icon-size":d.marker.size/10}),b.extendFlat(r.paint,{"icon-opacity":d.opacity*d.marker.opacity,"icon-color":d.marker.color}));q&&(a=k(d.textposition,(d.marker||{}).size),b.extendFlat(r.layout,{"text-size":d.textfont.size,"text-anchor":a.anchor,"text-offset":a.offset}),b.extendFlat(r.paint,{"text-color":d.textfont.color,"text-opacity":d.opacity}))}return H}},{"../../components/colorscale":589,"../../components/drawing":598,
"../../constants/numerical":677,"../../lib":700,"../../lib/geojson_utils":694,"../../plots/mapbox/convert_text_opts":803,"../scatter/make_bubble_size_func":1068,"../scatter/subtypes":1075,"fast-isnumeric":221}],1107:[function(a,t,m){function p(a,b,e){a=e("lon")||[];e=e("lat")||[];e=Math.min(a.length,e.length);return b._length=e}var g=a("../../lib"),h=a("../scatter/subtypes"),e=a("../scatter/marker_defaults"),n=a("../scatter/line_defaults"),b=a("../scatter/text_defaults"),l=a("../scatter/fillcolor_defaults"),
u=a("./attributes");t.exports=function(a,d,f,c){function k(b,c){return g.coerce(a,d,u,b,c)}if(p(a,d,k)){k("text");k("hovertext");k("hovertemplate");k("mode");h.hasLines(d)&&(n(a,d,f,c,k,{noDash:!0}),k("connectgaps"));if(h.hasMarkers(d)){e(a,d,f,c,k,{noLine:!0});var m=d.marker;"circle"!==m.symbol&&(g.isArrayOrTypedArray(m.size)&&(m.size=m.size[0]),g.isArrayOrTypedArray(m.color)&&(m.color=m.color[0]))}h.hasText(d)&&b(a,d,c,k,{noSelect:!0});k("fill");"none"!==d.fill&&l(a,d,f,k);g.coerceSelectionMarkerOpacity(d,
k)}else d.visible=!1}},{"../../lib":700,"../scatter/fillcolor_defaults":1060,"../scatter/line_defaults":1064,"../scatter/marker_defaults":1070,"../scatter/subtypes":1075,"../scatter/text_defaults":1076,"./attributes":1105}],1108:[function(a,t,m){t.exports=function(a,g){a.lon=g.lon;a.lat=g.lat;return a}},{}],1109:[function(a,t,m){function p(a,b,e){if(!a.hovertemplate){var d=(b.hi||a.hoverinfo).split("+"),f=-1!==d.indexOf("all"),c=-1!==d.indexOf("lon"),g=-1!==d.indexOf("lat"),h=b.lonlat,l=[];f||c&&
g?l.push("("+(h[0]+"")+", "+(h[1]+"")+")"):c?l.push(e.lon+(h[0]+"")):g&&l.push(e.lat+(h[1]+""));(f||-1!==d.indexOf("text"))&&n(b,a,l);return l.join("\x3cbr\x3e")}}var g=a("../../components/fx"),h=a("../../lib"),e=a("../scatter/get_trace_color"),n=a("../scatter/fill_hover_text"),b=a("../../constants/numerical").BADNUM;t.exports=function(a,n,m){var d=a.cd,f=d[0].trace,c=a.xa,k=a.ya,l=a.subplot,q=360*(0<=n?Math.floor((n+180)/360):Math.ceil((n-180)/360)),t=n-q;g.getClosest(d,function(a){var d=a.lonlat;
if(d[0]===b)return Infinity;var e=h.modHalf(d[0],360);d=d[1];var f=l.project([e,d]);d=f.x-c.c2p([t,d]);e=f.y-k.c2p([e,m]);a=Math.max(3,a.mrc||0);return Math.max(Math.sqrt(d*d+e*e)-a,1-3/a)},a);if(!1!==a.index){n=d[a.index];var u=n.lonlat;u=[h.modHalf(u[0],360)+q,u[1]];q=c.c2p(u);u=k.c2p(u);var y=n.mrc||1;a.x0=q-y;a.x1=q+y;a.y0=u-y;a.y1=u+y;a.color=e(f,n);a.extraText=p(f,n,d[0].t.labels);a.hovertemplate=f.hovertemplate;return[a]}}},{"../../components/fx":616,"../../constants/numerical":677,"../../lib":700,
"../scatter/fill_hover_text":1059,"../scatter/get_trace_color":1061}],1110:[function(a,t,m){m={};m.attributes=a("./attributes");m.supplyDefaults=a("./defaults");m.colorbar=a("../scatter/marker_colorbar");m.calc=a("../scattergeo/calc");m.plot=a("./plot");m.hoverPoints=a("./hover");m.eventData=a("./event_data");m.selectPoints=a("./select");m.style=function(a,g){g&&g[0].trace._glTrace.update(g)};m.moduleType="trace";m.name="scattermapbox";m.basePlotModule=a("../../plots/mapbox");m.categories=["mapbox",
"gl","symbols","showLegend","scatterlike"];m.meta={};t.exports=m},{"../../plots/mapbox":804,"../scatter/marker_colorbar":1069,"../scattergeo/calc":1092,"./attributes":1105,"./defaults":1107,"./event_data":1108,"./hover":1109,"./plot":1111,"./select":1112}],1111:[function(a,t,m){function p(a,e){this.subplot=a;this.uid=e;this.sourceIds={fill:e+"-source-fill",line:e+"-source-line",circle:e+"-source-circle",symbol:e+"-source-symbol"};this.layerIds={fill:e+"-layer-fill",line:e+"-layer-line",circle:e+"-layer-circle",
symbol:e+"-layer-symbol"};this.order=["fill","line","circle","symbol"]}var g=a("./convert");a=p.prototype;a.addSource=function(a,e){this.subplot.map.addSource(this.sourceIds[a],{type:"geojson",data:e.geojson})};a.setSourceData=function(a,e){this.subplot.map.getSource(this.sourceIds[a]).setData(e.geojson)};a.addLayer=function(a,e){this.subplot.map.addLayer({type:a,id:this.layerIds[a],source:this.sourceIds[a],layout:e.layout,paint:e.paint})};a.update=function(a){for(var e=this.subplot,h=g(a),b=0;b<
this.order.length;b++){var l=this.order[b],m=h[l];e.setOptions(this.layerIds[l],"setLayoutProperty",m.layout);"visible"===m.layout.visibility&&(this.setSourceData(l,m),e.setOptions(this.layerIds[l],"setPaintProperty",m.paint))}a[0].trace._glTrace=this};a.dispose=function(){for(var a=this.subplot.map,e=0;e<this.order.length;e++){var g=this.order[e];a.removeLayer(this.layerIds[g]);a.removeSource(this.sourceIds[g])}};t.exports=function(a,e){a=new p(a,e[0].trace.uid);for(var h=g(e),b=0;b<a.order.length;b++){var l=
a.order[b],m=h[l];a.addSource(l,m);a.addLayer(l,m)}return e[0].trace._glTrace=a}},{"./convert":1106}],1112:[function(a,t,m){var p=a("../../lib"),g=a("../scatter/subtypes"),h=a("../../constants/numerical").BADNUM;t.exports=function(a,n){var b=a.cd,e=a.xaxis,m=a.yaxis,q=[],d;if(!g.hasMarkers(b[0].trace))return[];if(!1===n)for(d=0;d<b.length;d++)b[d].selected=0;else for(d=0;d<b.length;d++){var f=b[d],c=f.lonlat;if(c[0]!==h){var k=[p.modHalf(c[0],360),c[1]];k=[e.c2p(k),m.c2p(k)];n.contains(k,null,d,a)?
(q.push({pointNumber:d,lon:c[0],lat:c[1]}),f.selected=1):f.selected=0}}return q}},{"../../constants/numerical":677,"../../lib":700,"../scatter/subtypes":1075}],1113:[function(a,t,m){m=a("../../components/fx/hovertemplate_attributes");var p=a("../../lib/extend").extendFlat,g=a("../scatter/attributes");a=a("../../plots/attributes");var h=g.line;t.exports={mode:g.mode,r:{valType:"data_array",editType:"calc+clearAxisTypes"},theta:{valType:"data_array",editType:"calc+clearAxisTypes"},r0:{valType:"any",
dflt:0,editType:"calc+clearAxisTypes"},dr:{valType:"number",dflt:1,editType:"calc"},theta0:{valType:"any",dflt:0,editType:"calc+clearAxisTypes"},dtheta:{valType:"number",editType:"calc"},thetaunit:{valType:"enumerated",values:["radians","degrees","gradians"],dflt:"degrees",editType:"calc+clearAxisTypes"},text:g.text,hovertext:g.hovertext,line:{color:h.color,width:h.width,dash:h.dash,shape:p({},h.shape,{values:["linear","spline"]}),smoothing:h.smoothing,editType:"calc"},connectgaps:g.connectgaps,marker:g.marker,
cliponaxis:p({},g.cliponaxis,{dflt:!1}),textposition:g.textposition,textfont:g.textfont,fill:p({},g.fill,{values:["none","toself","tonext"],dflt:"none"}),fillcolor:g.fillcolor,hoverinfo:p({},a.hoverinfo,{flags:["r","theta","text","name"]}),hoveron:g.hoveron,hovertemplate:m(),selected:g.selected,unselected:g.unselected}},{"../../components/fx/hovertemplate_attributes":615,"../../lib/extend":690,"../../plots/attributes":745,"../scatter/attributes":1051}],1114:[function(a,t,m){var p=a("fast-isnumeric"),
g=a("../../constants/numerical").BADNUM,h=a("../../plots/cartesian/axes"),e=a("../scatter/colorscale_calc"),n=a("../scatter/arrays_to_calcdata"),b=a("../scatter/calc_selection"),l=a("../scatter/calc").calcMarkerSize;t.exports=function(a,m){var d=a._fullLayout,f=m.subplot,c=d[f].radialaxis;f=d[f].angularaxis;d=c.makeCalcdata(m,"r");var k=f.makeCalcdata(m,"theta"),r=m._length;f=Array(r);for(var q=0;q<r;q++){var t=d[q],u=k[q],y=f[q]={};p(t)&&p(u)?(y.r=t,y.theta=u):y.r=g}k=l(m,r);m._extremes.x=h.findExtremes(c,
d,{ppad:k});e(a,m);n(f,m);b(f,m);return f}},{"../../constants/numerical":677,"../../plots/cartesian/axes":748,"../scatter/arrays_to_calcdata":1050,"../scatter/calc":1052,"../scatter/calc_selection":1053,"../scatter/colorscale_calc":1054,"fast-isnumeric":221}],1115:[function(a,t,m){function p(a,b,d,e){a=e("r");d=e("theta");if(a)d?a=Math.min(a.length,d.length):(a=a.length,e("theta0"),e("dtheta"));else{if(!d)return 0;a=b.theta.length;e("r0");e("dr")}return b._length=a}var g=a("../../lib"),h=a("../scatter/subtypes"),
e=a("../scatter/marker_defaults"),n=a("../scatter/line_defaults"),b=a("../scatter/line_shape_defaults"),l=a("../scatter/text_defaults"),u=a("../scatter/fillcolor_defaults"),q=a("../scatter/constants").PTS_LINESONLY,d=a("./attributes");t.exports={handleRThetaDefaults:p,supplyDefaults:function(a,c,k,m){function f(b,e){return g.coerce(a,c,d,b,e)}var r=p(a,c,m,f);if(r){f("thetaunit");f("mode",r<q?"lines+markers":"lines");f("text");f("hovertext");"fills"!==c.hoveron&&f("hovertemplate");h.hasLines(c)&&
(n(a,c,k,m,f),b(a,c,f),f("connectgaps"));h.hasMarkers(c)&&e(a,c,k,m,f,{gradient:!0});h.hasText(c)&&l(a,c,m,f);m=[];if(h.hasMarkers(c)||h.hasText(c))f("cliponaxis"),f("marker.maxdisplayed"),m.push("points");f("fill");"none"!==c.fill&&(u(a,c,k,f),h.hasLines(c)||b(a,c,f));"tonext"!==c.fill&&"toself"!==c.fill||m.push("fills");f("hoveron",m.join("+")||"points");g.coerceSelectionMarkerOpacity(c,f)}else c.visible=!1}}},{"../../lib":700,"../scatter/constants":1055,"../scatter/fillcolor_defaults":1060,"../scatter/line_defaults":1064,
"../scatter/line_shape_defaults":1066,"../scatter/marker_defaults":1070,"../scatter/subtypes":1075,"../scatter/text_defaults":1076,"./attributes":1113}],1116:[function(a,t,m){function p(a,b,g,m){function l(a,b){c.push(a._hovertitle+": "+h.tickText(a,b,"hover").text)}var d=g.radialAxis;g=g.angularAxis;d._hovertitle="r";g._hovertitle="";var f=a.hi||b.hoverinfo,c=[];b.hovertemplate||(b=f.split("+"),-1!==b.indexOf("all")&&(b=["r","theta","text"]),-1!==b.indexOf("r")&&l(d,d.c2l(a.r)),-1!==b.indexOf("theta")&&
(a=a.theta,l(g,"degrees"===g.thetaunit?e.rad2deg(a):a)),-1!==b.indexOf("text")&&m.text&&(c.push(m.text),delete m.text),m.extraText=c.join("\x3cbr\x3e"))}var g=a("../scatter/hover"),h=a("../../plots/cartesian/axes"),e=a("../../lib");t.exports={hoverPoints:function(a,b,e,h){if((b=g(a,b,e,h))&&!1!==b[0].index){e=b[0];if(void 0===e.index)return b;a=a.subplot;h=e.cd[e.index];var l=e.trace;if(a.isPtInside(h))return e.xLabelVal=void 0,e.yLabelVal=void 0,p(h,l,a,e),e.hovertemplate=l.hovertemplate,b}},makeHoverPointText:p}},
{"../../lib":700,"../../plots/cartesian/axes":748,"../scatter/hover":1062}],1117:[function(a,t,m){t.exports={moduleType:"trace",name:"scatterpolar",basePlotModule:a("../../plots/polar"),categories:["polar","symbols","showLegend","scatter-like"],attributes:a("./attributes"),supplyDefaults:a("./defaults").supplyDefaults,colorbar:a("../scatter/marker_colorbar"),calc:a("./calc"),plot:a("./plot"),style:a("../scatter/style").style,hoverPoints:a("./hover").hoverPoints,selectPoints:a("../scatter/select"),
meta:{}}},{"../../plots/polar":813,"../scatter/marker_colorbar":1069,"../scatter/select":1072,"../scatter/style":1074,"./attributes":1113,"./calc":1114,"./defaults":1115,"./hover":1116,"./plot":1118}],1118:[function(a,t,m){var p=a("../scatter/plot"),g=a("../../constants/numerical").BADNUM;t.exports=function(a,e,m){var b=e.layers.frontplot.select("g.scatterlayer"),h={xaxis:e.xaxis,yaxis:e.yaxis,plot:e.framework,layerClipId:e._hasClipOnAxisFalse?e.clipIds.forTraces:null},n=e.radialAxis;e=e.angularAxis;
for(var q=0;q<m.length;q++)for(var d=m[q],f=0;f<d.length;f++){var c=d[f],k=c.r;if(k===g)c.x=c.y=g;else{k=n.c2g(k);var r=e.c2g(c.theta);c.x=k*Math.cos(r);c.y=k*Math.sin(r)}}p(a,h,m,b)}},{"../../constants/numerical":677,"../scatter/plot":1071}],1119:[function(a,t,m){m=a("../scatterpolar/attributes");a=a("../scattergl/attributes");t.exports={mode:m.mode,r:m.r,theta:m.theta,r0:m.r0,dr:m.dr,theta0:m.theta0,dtheta:m.dtheta,thetaunit:m.thetaunit,text:m.text,hovertext:m.hovertext,hovertemplate:m.hovertemplate,
line:a.line,connectgaps:a.connectgaps,marker:a.marker,fill:a.fill,fillcolor:a.fillcolor,textposition:a.textposition,textfont:a.textfont,hoverinfo:m.hoverinfo,selected:m.selected,unselected:m.unselected}},{"../scattergl/attributes":1100,"../scatterpolar/attributes":1113}],1120:[function(a,t,m){var p=a("../../lib"),g=a("../scatter/subtypes"),h=a("../scatterpolar/defaults").handleRThetaDefaults,e=a("../scatter/marker_defaults"),n=a("../scatter/line_defaults"),b=a("../scatter/text_defaults"),l=a("../scatter/fillcolor_defaults"),
u=a("../scatter/constants").PTS_LINESONLY,q=a("./attributes");t.exports=function(a,f,c,k){function d(b,c){return p.coerce(a,f,q,b,c)}var m=h(a,f,k,d);m?(d("thetaunit"),d("mode",m<u?"lines+markers":"lines"),d("text"),d("hovertext"),"fills"!==f.hoveron&&d("hovertemplate"),g.hasLines(f)&&(n(a,f,c,k,d),d("connectgaps")),g.hasMarkers(f)&&e(a,f,c,k,d),g.hasText(f)&&b(a,f,k,d),d("fill"),"none"!==f.fill&&l(a,f,c,d),p.coerceSelectionMarkerOpacity(f,d)):f.visible=!1}},{"../../lib":700,"../scatter/constants":1055,
"../scatter/fillcolor_defaults":1060,"../scatter/line_defaults":1064,"../scatter/marker_defaults":1070,"../scatter/subtypes":1075,"../scatter/text_defaults":1076,"../scatterpolar/defaults":1115,"./attributes":1119}],1121:[function(a,t,m){var p=a("point-cluster"),g=a("fast-isnumeric"),h=a("../scattergl"),e=a("../scatter/colorscale_calc"),n=a("../scatter/calc").calcMarkerSize,b=a("../scattergl/convert"),l=a("../../lib"),u=a("../../plots/cartesian/axes"),q=a("../scatterpolar/hover").makeHoverPointText,
d=a("../scattergl/constants").TOO_MANY_POINTS;t.exports={moduleType:"trace",name:"scatterpolargl",basePlotModule:a("../../plots/polar"),categories:"gl regl polar symbols showLegend scatter-like".split(" "),attributes:a("./attributes"),supplyDefaults:a("./defaults"),colorbar:a("../scatter/marker_colorbar"),calc:function(a,c){var f=a._fullLayout,g=c.subplot,h=f[g].radialaxis;g=f[g].angularaxis;f=h.makeCalcdata(c,"r");var l=g.makeCalcdata(c,"theta");g=c._length;var m={};g<f.length&&(f=f.slice(0,g));
g<l.length&&(l=l.slice(0,g));m.r=f;m.theta=l;e(a,c);a=m.opts=b.style(a,c);var q;g<d?q=n(c,g):a.marker&&(q=2*(a.marker.sizeAvg||Math.max(a.marker.size,3)));c._extremes.x=u.findExtremes(h,f,{ppad:q});return[{x:!1,y:!1,t:m,trace:c}]},plot:function(a,c,e){if(e.length){var f=c.radialAxis,k=c.angularAxis,m=h.sceneUpdate(a,c);e.forEach(function(e){if(e&&e[0]&&e[0].trace){var h=e[0];e=h.trace;h=h.t;var n=e._length,q=h.r,r=h.theta,t=h.opts,u,v=q.slice(),A=r.slice();for(u=0;u<q.length;u++)c.isPtInside({r:q[u],
theta:r[u]})||(v[u]=NaN,A[u]=NaN);var z=Array(2*n),E=Array(n),K=Array(n);for(u=0;u<n;u++){var I=v[u];if(g(I)){var J=f.c2g(I);var L=k.c2g(A[u],e.thetaunit);I=J*Math.cos(L);J*=Math.sin(L)}else I=J=NaN;E[u]=z[2*u]=I;K[u]=z[2*u+1]=J}h.tree=p(z);t.marker&&n>=d&&(t.marker.cluster=h.tree);t.marker&&(t.markerSel.positions=t.markerUnsel.positions=t.marker.positions=z);t.line&&1<z.length&&l.extendFlat(t.line,b.linePositions(a,e,z));t.text&&(l.extendFlat(t.text,{positions:z},b.textPosition(a,e,t.text,t.marker)),
l.extendFlat(t.textSel,{positions:z},b.textPosition(a,e,t.text,t.markerSel)),l.extendFlat(t.textUnsel,{positions:z},b.textPosition(a,e,t.text,t.markerUnsel)));t.fill&&!m.fill2d&&(m.fill2d=!0);t.marker&&!m.scatter2d&&(m.scatter2d=!0);t.line&&!m.line2d&&(m.line2d=!0);t.text&&!m.glText&&(m.glText=!0);m.lineOptions.push(t.line);m.fillOptions.push(t.fill);m.markerOptions.push(t.marker);m.markerSelectedOptions.push(t.markerSel);m.markerUnselectedOptions.push(t.markerUnsel);m.textOptions.push(t.text);m.textSelectedOptions.push(t.textSel);
m.textUnselectedOptions.push(t.textUnsel);h.x=E;h.y=K;h.rawx=E;h.rawy=K;h.r=q;h.theta=r;h.positions=z;h._scene=m;h.index=m.count;m.count++}});return h.plot(a,c,e)}},hoverPoints:function(a,b,d,e){var c=a.cd[0].t,f=c.r;c=c.theta;if((b=h.hoverPoints(a,b,d,e))&&!1!==b[0].index){d=b[0];if(void 0===d.index)return b;a=a.subplot;e=d.cd[d.index];var g=d.trace;e.r=f[d.index];e.theta=c[d.index];if(a.isPtInside(e))return d.xLabelVal=void 0,d.yLabelVal=void 0,q(e,g,a,d),b}},selectPoints:h.selectPoints,meta:{}}},
{"../../lib":700,"../../plots/cartesian/axes":748,"../../plots/polar":813,"../scatter/calc":1052,"../scatter/colorscale_calc":1054,"../scatter/marker_colorbar":1069,"../scattergl":1104,"../scattergl/constants":1101,"../scattergl/convert":1102,"../scatterpolar/hover":1116,"./attributes":1119,"./defaults":1120,"fast-isnumeric":221,"point-cluster":461}],1122:[function(a,t,m){m=a("../../components/fx/hovertemplate_attributes");var p=a("../scatter/attributes"),g=a("../../plots/attributes"),h=a("../../components/colorscale/attributes"),
e=a("../../components/colorbar/attributes"),n=a("../../components/drawing/attributes").dash;a=a("../../lib/extend").extendFlat;var b=p.marker,l=p.line,u=b.line;t.exports={a:{valType:"data_array",editType:"calc"},b:{valType:"data_array",editType:"calc"},c:{valType:"data_array",editType:"calc"},sum:{valType:"number",dflt:0,min:0,editType:"calc"},mode:a({},p.mode,{dflt:"markers"}),text:a({},p.text,{}),hovertext:a({},p.hovertext,{}),line:{color:l.color,width:l.width,dash:n,shape:a({},l.shape,{values:["linear",
"spline"]}),smoothing:l.smoothing,editType:"calc"},connectgaps:p.connectgaps,cliponaxis:p.cliponaxis,fill:a({},p.fill,{values:["none","toself","tonext"],dflt:"none"}),fillcolor:p.fillcolor,marker:a({symbol:b.symbol,opacity:b.opacity,maxdisplayed:b.maxdisplayed,size:b.size,sizeref:b.sizeref,sizemin:b.sizemin,sizemode:b.sizemode,line:a({width:u.width,editType:"calc"},h("marker.line")),gradient:b.gradient,editType:"calc"},h("marker"),{colorbar:e}),textfont:p.textfont,textposition:p.textposition,selected:p.selected,
unselected:p.unselected,hoverinfo:a({},g.hoverinfo,{flags:["a","b","c","text","name"]}),hoveron:p.hoveron,hovertemplate:m()}},{"../../components/colorbar/attributes":578,"../../components/colorscale/attributes":584,"../../components/drawing/attributes":597,"../../components/fx/hovertemplate_attributes":615,"../../lib/extend":690,"../../plots/attributes":745,"../scatter/attributes":1051}],1123:[function(a,t,m){var p=a("fast-isnumeric"),g=a("../scatter/colorscale_calc"),h=a("../scatter/arrays_to_calcdata"),
e=a("../scatter/calc_selection"),n=a("../scatter/calc").calcMarkerSize,b=["a","b","c"],l={a:["b","c"],b:["a","c"],c:["a","b"]};t.exports=function(a,m){var d=a._fullLayout[m.subplot].sum,f=m.sum||d,c={a:m.a,b:m.b,c:m.c},k,q;for(k=0;k<b.length;k++){var t=b[k];if(!c[t]){var u=c[l[t][0]];var A=c[l[t][1]];var y=Array(u.length);for(q=0;q<u.length;q++)y[q]=f-u[q]-A[q];c[t]=y}}f=m._length;q=Array(f);for(k=0;k<f;k++)if(t=c.a[k],y=c.b[k],u=c.c[k],p(t)&&p(y)&&p(u)){t=+t;y=+y;u=+u;A=d/(t+y+u);1!==A&&(t*=A,y*=
A,u*=A);var w=t;A=u-y;q[k]={x:A,y:w,a:t,b:y,c:u}}else q[k]={x:!1,y:!1};n(m,f);g(a,m);h(q,m);e(q,m);return q}},{"../scatter/arrays_to_calcdata":1050,"../scatter/calc":1052,"../scatter/calc_selection":1053,"../scatter/colorscale_calc":1054,"fast-isnumeric":221}],1124:[function(a,t,m){var p=a("../../lib"),g=a("../scatter/constants"),h=a("../scatter/subtypes"),e=a("../scatter/marker_defaults"),n=a("../scatter/line_defaults"),b=a("../scatter/line_shape_defaults"),l=a("../scatter/text_defaults"),u=a("../scatter/fillcolor_defaults"),
q=a("./attributes");t.exports=function(a,f,c,k){function d(b,c){return p.coerce(a,f,q,b,c)}var m=d("a"),t=d("b"),A=d("c");if(m){var y=m.length;t?(y=Math.min(y,t.length),A&&(y=Math.min(y,A.length))):y=A?Math.min(y,A.length):0}else t&&A&&(y=Math.min(t.length,A.length));if(y){f._length=y;d("sum");d("text");d("hovertext");"fills"!==f.hoveron&&d("hovertemplate");d("mode",y<g.PTS_LINESONLY?"lines+markers":"lines");h.hasLines(f)&&(n(a,f,c,k,d),b(a,f,d),d("connectgaps"));h.hasMarkers(f)&&e(a,f,c,k,d,{gradient:!0});
h.hasText(f)&&l(a,f,k,d);k=[];if(h.hasMarkers(f)||h.hasText(f))d("cliponaxis"),d("marker.maxdisplayed"),k.push("points");d("fill");"none"!==f.fill&&(u(a,f,c,d),h.hasLines(f)||b(a,f,d));"tonext"!==f.fill&&"toself"!==f.fill||k.push("fills");d("hoveron",k.join("+")||"points");p.coerceSelectionMarkerOpacity(f,d)}else f.visible=!1}},{"../../lib":700,"../scatter/constants":1055,"../scatter/fillcolor_defaults":1060,"../scatter/line_defaults":1064,"../scatter/line_shape_defaults":1066,"../scatter/marker_defaults":1070,
"../scatter/subtypes":1075,"../scatter/text_defaults":1076,"./attributes":1122}],1125:[function(a,t,m){t.exports=function(a,g,h,e,m){g.xa&&(a.xaxis=g.xa);g.ya&&(a.yaxis=g.ya);e[m]?(g=e[m],a.a=g.a,a.b=g.b,a.c=g.c):(a.a=g.a,a.b=g.b,a.c=g.c);return a}},{}],1126:[function(a,t,m){var p=a("../scatter/hover"),g=a("../../plots/cartesian/axes");t.exports=function(a,e,m,b){function h(a,b){d.push(a._hovertitle+": "+g.tickText(a,b,"hover").text)}if((e=p(a,e,m,b))&&!1!==e[0].index){m=e[0];if(void 0===m.index)return b=
a.xa._length,a=b*(1-m.y0/a.ya._length)/2,b-=a,m.x0=Math.max(Math.min(m.x0,b),a),m.x1=Math.max(Math.min(m.x1,b),a),e;a=m.cd[m.index];m.a=a.a;m.b=a.b;m.c=a.c;m.xLabelVal=void 0;m.yLabelVal=void 0;b=m.trace;var n=m.subplot,q=a.hi||b.hoverinfo,d=[];b.hovertemplate||(q=q.split("+"),-1!==q.indexOf("all")&&(q=["a","b","c"]),-1!==q.indexOf("a")&&h(n.aaxis,a.a),-1!==q.indexOf("b")&&h(n.baxis,a.b),-1!==q.indexOf("c")&&h(n.caxis,a.c));m.extraText=d.join("\x3cbr\x3e");m.hovertemplate=b.hovertemplate;return e}}},
{"../../plots/cartesian/axes":748,"../scatter/hover":1062}],1127:[function(a,t,m){m={};m.attributes=a("./attributes");m.supplyDefaults=a("./defaults");m.colorbar=a("../scatter/marker_colorbar");m.calc=a("./calc");m.plot=a("./plot");m.style=a("../scatter/style").style;m.styleOnSelect=a("../scatter/style").styleOnSelect;m.hoverPoints=a("./hover");m.selectPoints=a("../scatter/select");m.eventData=a("./event_data");m.moduleType="trace";m.name="scatterternary";m.basePlotModule=a("../../plots/ternary");
m.categories=["ternary","symbols","showLegend","scatter-like"];m.meta={};t.exports=m},{"../../plots/ternary":825,"../scatter/marker_colorbar":1069,"../scatter/select":1072,"../scatter/style":1074,"./attributes":1122,"./calc":1123,"./defaults":1124,"./event_data":1125,"./hover":1126,"./plot":1128}],1128:[function(a,t,m){var p=a("../scatter/plot");t.exports=function(a,h,e){var g=h.plotContainer;g.select(".scatterlayer").selectAll("*").remove();g={xaxis:h.xaxis,yaxis:h.yaxis,plot:g,layerClipId:h._hasClipOnAxisFalse?
h.clipIdRelative:null};h=h.layers.frontplot.select("g.scatterlayer");p(a,g,e,h)}},{"../scatter/plot":1071}],1129:[function(a,t,m){function p(a){return{valType:"info_array",freeLength:!0,editType:"calc",items:{valType:"subplotid",regex:n[a],editType:"plot"}}}var g=a("../scatter/attributes"),h=a("../../components/colorscale/attributes");m=a("../../components/fx/hovertemplate_attributes");var e=a("../scattergl/attributes"),n=a("../../plots/cartesian/constants").idRegex,b=a("../../plot_api/plot_template").templatedArray;
a=a("../../lib/extend").extendFlat;g=g.marker;var l=g.line;l=a(h("marker.line",{editTypeOverride:"calc"}),{width:a({},l.width,{editType:"calc"}),editType:"calc"});h=a(h("marker"),{symbol:g.symbol,size:a({},g.size,{editType:"markerSize"}),sizeref:g.sizeref,sizemin:g.sizemin,sizemode:g.sizemode,opacity:g.opacity,colorbar:g.colorbar,line:l,editType:"calc"});h.color.editType=h.cmin.editType=h.cmax.editType="style";t.exports={dimensions:b("dimension",{visible:{valType:"boolean",dflt:!0,editType:"calc"},
label:{valType:"string",editType:"calc"},values:{valType:"data_array",editType:"calc+clearAxisTypes"},axis:{type:{valType:"enumerated",values:["linear","log","date","category"],editType:"calc+clearAxisTypes"},matches:{valType:"boolean",dflt:!1,editType:"calc"},editType:"calc+clearAxisTypes"},editType:"calc+clearAxisTypes"}),text:a({},e.text,{}),hovertext:a({},e.hovertext,{}),hovertemplate:m(),marker:h,xaxes:p("x"),yaxes:p("y"),diagonal:{visible:{valType:"boolean",dflt:!0,editType:"calc"},editType:"calc"},
showupperhalf:{valType:"boolean",dflt:!0,editType:"calc"},showlowerhalf:{valType:"boolean",dflt:!0,editType:"calc"},selected:{marker:e.selected.marker,editType:"calc"},unselected:{marker:e.unselected.marker,editType:"calc"},opacity:e.opacity}},{"../../components/colorscale/attributes":584,"../../components/fx/hovertemplate_attributes":615,"../../lib/extend":690,"../../plot_api/plot_template":738,"../../plots/cartesian/constants":754,"../scatter/attributes":1051,"../scattergl/attributes":1100}],1130:[function(a,
t,m){function p(a){var b=a._fullLayout,c=b._glcanvas.data()[0].regl,d=b._splomGrid;d||(d=b._splomGrid=h(c));d.update(g(a))}function g(a){function b(a,b,c,d,f,h){var k=b[a+"color"];a=b[a+"width"];b=String(k+a);b in g?g[b].data.push(NaN,NaN,c,d,f,h):g[b]={data:[c,d,f,h],join:"rect",thickness:a,color:k,viewport:e,range:e,overlay:!1}}var c=a._fullLayout,d=c._size,e=[0,0,c.width,c.height],g={},h;for(h in c._splomSubplots){var l=c._plots[h],m=l.xaxis;l=l.yaxis;var n=m._vals,p=l._vals,t=d.b+l.domain[0]*
d.h,u=-l._m,C=-u*l.r2l(l.range[0],l.calendar);if(m.showgrid)for(h=0;h<n.length;h++){var D=m._offset+m.l2p(n[h].x);b("grid",m,D,t,D,t+l._length)}if(l.showgrid)for(h=0;h<p.length;h++)n=t+C+u*p[h].x,b("grid",l,m._offset,n,m._offset+m._length,n);q(a,m,l)&&(D=m._offset+m.l2p(0),b("zeroline",m,D,t,D,t+l._length));q(a,l,m)&&(n=t+C+0,b("zeroline",l,m._offset,n,m._offset+m._length,n))}a=[];for(h in g)a.push(g[h]);return a}var h=a("regl-line2d"),e=a("../../registry"),n=a("../../lib/prepare_regl"),b=a("../../plots/get_data").getModuleCalcData,
l=a("../../plots/cartesian"),u=a("../../plots/cartesian/axis_ids").getFromId,q=a("../../plots/cartesian/axes").shouldShowZeroLine;t.exports={name:"splom",attr:l.attr,attrRegex:l.attrRegex,layoutAttributes:l.layoutAttributes,supplyLayoutDefaults:l.supplyLayoutDefaults,drawFramework:l.drawFramework,plot:function(a){var d=a._fullLayout,c=e.getModule("splom"),g=b(a.calcdata,c)[0];n(a,["ANGLE_instanced_arrays","OES_element_index_uint"])&&(d._hasOnlyLargeSploms&&p(a),c.plot(a,{},g))},drag:function(a){var b=
a.calcdata,c=a._fullLayout;c._hasOnlyLargeSploms&&p(a);for(var d=0;d<b.length;d++){var e=b[d][0].trace,g=c._splomScenes[e.uid];if("splom"===e.type&&g&&g.matrix){for(var h=a,l=e._visibleDims,m=g.viewOpts.ranges=Array(g.matrixOptions.data.length),n=0;n<l.length;n++){var q=l[n],t=m[n]=Array(4),B=u(h,e._diag[q][0]);B&&(t[0]=B.r2l(B.range[0]),t[2]=B.r2l(B.range[1]));if(q=u(h,e._diag[q][1]))t[1]=q.r2l(q.range[0]),t[3]=q.r2l(q.range[1])}g.selectBatch?g.matrix.update({ranges:m},{ranges:m}):g.matrix.update({ranges:m})}}},
updateGrid:p,clean:function(a,b,c,e){var d={},f;if(e._splomScenes){for(f=0;f<a.length;f++){var g=a[f];"splom"===g.type&&(d[g.uid]=1)}for(f=0;f<c.length;f++)if(g=c[f],!d[g.uid]){var h=e._splomScenes[g.uid];h&&h.destroy&&h.destroy();e._splomScenes[g.uid]=null;delete e._splomScenes[g.uid]}}0===Object.keys(e._splomScenes||{}).length&&delete e._splomScenes;e._splomGrid&&!b._hasOnlyLargeSploms&&e._hasOnlyLargeSploms&&(e._splomGrid.destroy(),e._splomGrid=null,delete e._splomGrid);l.clean(a,b,c,e)},updateFx:function(a){l.updateFx(a);
var b=a._fullLayout,c=b.dragmode;if("zoom"===c||"pan"===c)for(a=a.calcdata,c=0;c<a.length;c++){var d=a[c][0].trace;"splom"===d.type&&(d=b._splomScenes[d.uid],null===d.selectBatch&&d.matrix.update(d.matrixOptions,null))}},toSVG:l.toSVG}},{"../../lib/prepare_regl":713,"../../plots/cartesian":759,"../../plots/cartesian/axes":748,"../../plots/cartesian/axis_ids":751,"../../plots/get_data":784,"../../registry":829,"regl-line2d":483}],1131:[function(a,t,m){function p(a,b){function c(c,d){return h.coerce(a,
b,n.dimensions,c,d)}c("label");var d=c("values");d&&d.length?c("visible"):b.visible=!1;c("axis.type");c("axis.matches")}function g(a,b,c,e){function d(a,d,e,f){if(a){var g=a.charAt(0),h=c._splomAxes[g];b["_"+g+"axes"][a]=1;f.push(a);a in h||(a=h[a]={},e&&(a.label=e.label||"",e.visible&&e.axis&&(e.axis.type&&(a.type=e.axis.type),e.axis.matches&&(a.matches=d))))}}var f=b.dimensions,g=f.length;a=b.showupperhalf;var h=b.showlowerhalf,k=b.diagonal.visible,l,m=Array(g),n=Array(g);for(l=0;l<g;l++){var q=
l?l+1:"";m[l]="x"+q;n[l]="y"+q}m=e("xaxes",m);q=e("yaxes",n);var p=b._diag=Array(g);b._xaxes={};b._yaxes={};e=[];n=[];var t=!k&&!h,u=!k&&!a;for(l=0;l<g;l++){var H=f[l],E=0===l,K=l===g-1,I=E&&t||K&&u?void 0:m[l];E=E&&u||K&&t?void 0:q[l];d(I,E,H,e);d(E,I,H,n);p[l]=[I,E]}for(l=0;l<e.length;l++)for(f=0;f<n.length;f++)g=e[l]+n[f],l>f&&a?c._splomSubplots[g]=1:l<f&&h?c._splomSubplots[g]=1:l!==f||!k&&h&&a||(c._splomSubplots[g]=1);if(!h||!k&&a&&h)c._splomGridDflt.xside="bottom",c._splomGridDflt.yside="left"}
var h=a("../../lib"),e=a("../../plots/array_container_defaults"),n=a("./attributes"),b=a("../scatter/subtypes"),l=a("../scatter/marker_defaults"),u=a("../parcoords/merge_length"),q=/-open/;t.exports=function(a,f,c,k){function d(b,c){return h.coerce(a,f,n,b,c)}var m=e(a,f,{name:"dimensions",handleItemDefaults:p}),t=d("diagonal.visible"),A=d("showupperhalf"),y=d("showlowerhalf");u(f,m,"values")&&(t||A||y)?(d("text"),d("hovertext"),d("hovertemplate"),l(a,f,c,k,d),c=q.test(f.marker.symbol),m=b.isBubble(f),
d("marker.line.width",c||m?1:0),g(a,f,k,d),h.coerceSelectionMarkerOpacity(f,d)):f.visible=!1}},{"../../lib":700,"../../plots/array_container_defaults":744,"../parcoords/merge_length":1023,"../scatter/marker_defaults":1070,"../scatter/subtypes":1075,"./attributes":1129}],1132:[function(a,t,m){function p(a,c){var d=a._fullLayout;a=c.uid;var e=d._splomScenes;e||(e=d._splomScenes={});d={dirty:!0};var f={selectBatch:null,unselectBatch:null,matrix:!1,select:null},g=e[c.uid];g||(g=e[a]=b.extendFlat({},d,
f),g.draw=function(){g.matrix&&g.matrix.draw&&(g.selectBatch?g.matrix.draw(g.unselectBatch,g.selectBatch):g.matrix.draw());g.dirty=!1},g.destroy=function(){g.matrix&&g.matrix.destroy&&g.matrix.destroy();g.matrixOptions=null;g.selectBatch=null;g=g.unselectBatch=null});g.dirty||b.extendFlat(g,d);return g}function g(a,b){b=b._id;for(var c={x:0,y:1}[b.charAt(0)],d=a._visibleDims,e=0;e<d.length;e++)if(a._diag[d[e]][c]===b)return e;return!1}var h=a("regl-splom"),e=a("array-range");m=a("../../registry");
var n=a("../../components/grid"),b=a("../../lib"),l=a("../../plots/cartesian/axis_ids"),u=a("../scatter/subtypes"),q=a("../scatter/calc").calcMarkerSize,d=a("../scatter/calc").calcAxisExpansion,f=a("../scatter/colorscale_calc"),c=a("../scattergl/convert").markerSelection,k=a("../scattergl/convert").markerStyle,r=a("../scattergl").calcHover,v=a("../../constants/numerical").BADNUM,z=a("../scattergl/constants").TOO_MANY_POINTS;t.exports={moduleType:"trace",name:"splom",basePlotModule:a("./base_plot"),
categories:"gl regl cartesian symbols showLegend scatter-like".split(" "),attributes:a("./attributes"),supplyDefaults:a("./defaults"),colorbar:a("../scatter/marker_colorbar"),calc:function(a,e){function g(a,c){c=a.makeCalcdata({v:c.values,vcalendar:e.calendar},"v");for(var d=0;d<c.length;d++)c[d]=c[d]===v?NaN:c[d];r.push(c);t.push("log"===a.type?b.simpleMap(c,a.c2l):c)}var h=e.dimensions,m=e._length,n={},r=n.cdata=[],t=n.data=[],u=e._visibleDims=[],y;for(y=0;y<h.length;y++){var A=h[y];if(A.visible){var K=
l.getFromId(a,e._diag[y][0]);var I=l.getFromId(a,e._diag[y][1]);K&&I&&K.type!==I.type?b.log("Skipping splom dimension "+y+" with conflicting axis types"):(K?(g(K,A),I&&"category"===I.type&&(I._categories=K._categories.slice())):g(I,A),u.push(y))}}f(a,e);b.extendFlat(n,k(e));var J=r.length*m>z?2*(n.sizeAvg||Math.max(n.size,3)):q(e,m);for(m=0;m<u.length;m++)y=u[m],A=h[y],K=l.getFromId(a,e._diag[y][0])||{},I=l.getFromId(a,e._diag[y][1])||{},d(a,e,K,I,r[m],r[m],J);a=p(a,e);a.matrix||(a.matrix=!0);a.matrixOptions=
n;a.selectedOptions=c(e,e.selected);a.unselectedOptions=c(e,e.unselected);return[{x:!1,y:!1,t:{},trace:e}]},plot:function(a,c,d){if(d.length)for(c=0;c<d.length;c++){var e,f,g=a,k=d[c][0],m=g._fullLayout,n=m._size,q=k.trace;var p=k.t;k=m._splomScenes[q.uid];var r=k.matrixOptions,t=r.cdata,u=m._glcanvas.data()[0].regl,v=m.dragmode;if(0!==t.length){r.lower=q.showupperhalf;r.upper=q.showlowerhalf;r.diagonal=q.diagonal.visible;var w=q._visibleDims,y=t.length,A=k.viewOpts={};A.ranges=Array(y);A.domains=
Array(y);for(e=0;e<w.length;e++){var z=w[e];var T=A.ranges[e]=Array(4),P=A.domains[e]=Array(4);if(f=l.getFromId(g,q._diag[z][0]))T[0]=f._rl[0],T[2]=f._rl[1],P[0]=f.domain[0],P[2]=f.domain[1];if(z=l.getFromId(g,q._diag[z][1]))T[1]=z._rl[0],T[3]=z._rl[1],P[1]=z.domain[0],P[3]=z.domain[1]}A.viewport=[n.l,n.b,n.w+n.l,n.h+n.b];!0===k.matrix&&(k.matrix=h(u));z=-1<m.clickmode.indexOf("select");z="lasso"===v||"select"===v||!!q.selectedpoints||z;k.selectBatch=null;k.unselectBatch=null;if(z){m=q._length;k.selectBatch||
(k.selectBatch=[],k.unselectBatch=[]);if(q.selectedpoints){f=k.selectBatch=q.selectedpoints;e={};for(z=0;z<f.length;z++)e[f[z]]=!0;f=[];for(z=0;z<m;z++)e[z]||f.push(z);k.unselectBatch=f}n=p.xpx=Array(y);y=p.ypx=Array(y);for(e=0;e<w.length;e++){z=w[e];if(f=l.getFromId(g,q._diag[z][0]))for(n[e]=Array(m),p=0;p<m;p++)n[e][p]=f.c2p(t[e][p]);if(z=l.getFromId(g,q._diag[z][1]))for(y[e]=Array(m),p=0;p<m;p++)y[e][p]=z.c2p(t[e][p])}k.selectBatch?(k.matrix.update(r,r),k.matrix.update(k.unselectedOptions,k.selectedOptions),
k.matrix.update(A,A)):k.matrix.update(A,null)}else g=b.extendFlat({},r,A),k.matrix.update(g,null),p.xpx=p.ypx=null}}},hoverPoints:function(a,b,c){var d=a.cd[0].trace,e=a.scene.matrixOptions.cdata,f=a.xa,h=a.ya;b=f.c2p(b);c=h.c2p(c);var k=a.distance,l=g(d,f),m=g(d,h);if(!1===l||!1===m)return[a];l=e[l];e=e[m];var n;for(m=0;m<l.length;m++){var q=e[m],p=f.c2p(l[m])-b;q=h.c2p(q)-c;p=Math.sqrt(p*p+q*q);if(p<k){k=n=p;var t=m}}a.index=t;a.distance=k;a.dxy=n;if(void 0===t)return[a];r(a,l,e,d);return[a]},selectPoints:function(a,
b){var c=a.cd,d=c[0].trace,f=c[0].t;c=a.scene;var h=c.matrixOptions.cdata,k=a.xaxis,l=a.yaxis,m=[];if(!c)return m;var n=!u.hasMarkers(d)&&!u.hasText(d);if(!0!==d.visible||n)return m;k=g(d,k);n=g(d,l);if(!1===k||!1===n)return m;d=f.xpx[k];l=f.ypx[n];k=h[k];h=h[n];n=null;if(!1===b||b.degenerate)var q=e(f.count);else for(n=[],q=[],f=0;f<k.length;f++)b.contains([d[f],l[f]],null,f,a)?(n.push(f),m.push({pointNumber:f,x:k[f],y:h[f]})):q.push(f);c.selectBatch||(c.selectBatch=[],c.unselectBatch=[]);if(!c.selectBatch){for(f=
0;f<c.count;f++)c.selectBatch=[],c.unselectBatch=[];c.matrix.update(c.unselectedOptions,c.selectedOptions)}c.selectBatch=n;c.unselectBatch=q;return m},editStyle:function(a,c){var d=c.trace;if(c=a._fullLayout._splomScenes[d.uid])f(a,d),b.extendFlat(c.matrixOptions,k(d)),a=b.extendFlat({},c.matrixOptions,c.viewOpts),c.matrix.update(a,null)},meta:{}};m.register(n)},{"../../components/grid":620,"../../constants/numerical":677,"../../lib":700,"../../plots/cartesian/axis_ids":751,"../../registry":829,"../scatter/calc":1052,
"../scatter/colorscale_calc":1054,"../scatter/marker_colorbar":1069,"../scatter/subtypes":1075,"../scattergl":1104,"../scattergl/constants":1101,"../scattergl/convert":1102,"./attributes":1129,"./base_plot":1130,"./defaults":1131,"array-range":57,"regl-splom":485}],1133:[function(a,t,m){m=a("../../components/colorscale/attributes");var p=a("../../components/colorbar/attributes"),g=a("../../components/fx/hovertemplate_attributes"),h=a("../mesh3d/attributes"),e=a("../../plots/attributes");a=a("../../lib/extend").extendFlat;
var n={x:{valType:"data_array",editType:"calc+clearAxisTypes"},y:{valType:"data_array",editType:"calc+clearAxisTypes"},z:{valType:"data_array",editType:"calc+clearAxisTypes"},u:{valType:"data_array",editType:"calc"},v:{valType:"data_array",editType:"calc"},w:{valType:"data_array",editType:"calc"},starts:{x:{valType:"data_array",editType:"calc"},y:{valType:"data_array",editType:"calc"},z:{valType:"data_array",editType:"calc"},editType:"calc"},maxdisplayed:{valType:"integer",min:0,dflt:1E3,editType:"calc"},
sizeref:{valType:"number",editType:"calc",min:0,dflt:1},text:{valType:"string",dflt:"",editType:"calc"},hovertext:{valType:"string",dflt:"",editType:"calc"},hovertemplate:g({editType:"calc"},{keys:"tubex tubey tubez tubeu tubev tubew norm divergence".split(" ")})};a(n,m("",{colorAttr:"u/v/w norm",showScaleDflt:!0,editTypeOverride:"calc"}),{colorbar:p});["opacity","lightposition","lighting"].forEach(function(a){n[a]=h[a]});n.hoverinfo=a({},e.hoverinfo,{editType:"calc",flags:"x y z u v w norm divergence text name".split(" "),
dflt:"x+y+z+norm+text+name"});n.transforms=void 0;t.exports=n},{"../../components/colorbar/attributes":578,"../../components/colorscale/attributes":584,"../../components/fx/hovertemplate_attributes":615,"../../lib/extend":690,"../../plots/attributes":745,"../mesh3d/attributes":994}],1134:[function(a,t,m){var p=a("../../components/colorscale/calc");t.exports=function(a,h){var e,g=h.u,b=h.v,l=h.w,m=h.x,q=h.y,d=h.z,f=Math.min(m.length,q.length,d.length,g.length,b.length,l.length),c=0;if(h.starts){var k=
h.starts.x||[];var r=h.starts.y||[];var t=h.starts.z||[];c=Math.min(k.length,r.length,t.length)}var z=0,A=Infinity;for(e=0;e<f;e++){var y=g[e],w=b[e],x=l[e];y=Math.sqrt(y*y+w*w+x*x);z=Math.max(z,y);A=Math.min(A,y)}p(a,h,{vals:[A,z],containerStr:"",cLetter:"c"});a=-Infinity;g=Infinity;b=-Infinity;l=Infinity;A=-Infinity;y=Infinity;for(e=0;e<f;e++)w=m[e],a=Math.max(a,w),g=Math.min(g,w),w=q[e],b=Math.max(b,w),l=Math.min(l,w),w=d[e],A=Math.max(A,w),y=Math.min(y,w);for(e=0;e<c;e++)m=k[e],a=Math.max(a,m),
g=Math.min(g,m),m=r[e],b=Math.max(b,m),l=Math.min(l,m),m=t[e],A=Math.max(A,m),y=Math.min(y,m);h._len=f;h._slen=c;h._normMax=z;h._xbnds=[g,a];h._ybnds=[l,b];h._zbnds=[y,A]}},{"../../components/colorscale/calc":585}],1135:[function(a,t,m){function p(a,b){this.scene=a;this.uid=b;this.data=this.mesh=null}function g(a){var b=a.length;return 2<b?a.slice(1,b-1):2===b?[(a[0]+a[1])/2]:a}function h(a){var b=a.length;return 1===b?[.5,.5]:[a[1]-a[0],a[b-1]-a[b-2]]}function e(a,b){function c(a,b){var c=e[b],g=
f[d[b]];return l.simpleMap(a,function(a){return c.d2l(a)*g})}var e=a.fullSceneLayout,f=a.dataScale,m=b._len;a={};a.vectors=q(c(b.u,"xaxis"),c(b.v,"yaxis"),c(b.w,"zaxis"),m);var p=l.distinctVals(b.x.slice(0,m)).vals,t=l.distinctVals(b.y.slice(0,m)).vals,w=l.distinctVals(b.z.slice(0,m)).vals;if(p.length*t.length*w.length>m)return{positions:[],cells:[]};m=c(p,"xaxis");t=c(t,"yaxis");w=c(w,"zaxis");a.meshgrid=[m,t,w];if(b.starts)p=b._slen,a.startingPositions=q(c(b.starts.x.slice(0,p),"xaxis"),c(b.starts.y.slice(0,
p),"yaxis"),c(b.starts.z.slice(0,p),"zaxis"));else{p=t[0];for(var x=g(m),F=g(w),B=Array(x.length*F.length),C=0,D=0;D<x.length;D++)for(var G=0;G<F.length;G++)B[C++]=[x[D],p,F[G]];a.startingPositions=B}a.colormap=u(b);a.tubeSize=b.sizeref;a.maxLength=b.maxdisplayed;p=c(b._xbnds,"xaxis");x=c(b._ybnds,"yaxis");F=c(b._zbnds,"zaxis");m=h(m);t=h(t);w=h(w);a=n(a,[[p[0]-m[0],x[0]-t[0],F[0]-w[0]],[p[1]+m[1],x[1]+t[1],F[1]+w[1]]]);a.vertexIntensityBounds=[b.cmin/b._normMax,b.cmax/b._normMax];m=b.lightposition;
a.lightPosition=[m.x,m.y,m.z];a.ambient=b.lighting.ambient;a.diffuse=b.lighting.diffuse;a.specular=b.lighting.specular;a.roughness=b.lighting.roughness;a.fresnel=b.lighting.fresnel;a.opacity=b.opacity;b._pad=a.tubeScale*b.sizeref*2;return a}var n=a("gl-streamtube3d"),b=n.createTubeMesh,l=a("../../lib"),u=a("../../lib/gl_format_color").parseColorScale,q=a("../../plots/gl3d/zip3"),d={xaxis:0,yaxis:1,zaxis:2};a=p.prototype;a.handlePick=function(a){function b(a,b){var c=f[d[b]];return e[b].l2c(a)/c}var e=
this.scene.fullSceneLayout,f=this.scene.dataScale;if(a.object===this.mesh){var g=a.data.position,h=a.data.velocity;a.traceCoordinate=[b(g[0],"xaxis"),b(g[1],"yaxis"),b(g[2],"zaxis"),b(h[0],"xaxis"),b(h[1],"yaxis"),b(h[2],"zaxis"),a.data.intensity*this.data._normMax,a.data.divergence];a.textLabel=this.data.hovertext||this.data.text;return!0}};a.update=function(a){this.data=a;a=e(this.scene,a);this.mesh.update(a)};a.dispose=function(){this.scene.glplot.remove(this.mesh);this.mesh.dispose()};t.exports=
function(a,c){var d=a.glplot.gl,f=e(a,c);d=b(d,f);f=new p(a,c.uid);f.mesh=d;f.data=c;d._trace=f;a.glplot.add(d);return f}},{"../../lib":700,"../../lib/gl_format_color":697,"../../plots/gl3d/zip3":800,"gl-streamtube3d":309}],1136:[function(a,t,m){var p=a("../../lib"),g=a("../../components/colorscale/defaults"),h=a("./attributes");t.exports=function(a,m,b,l){function e(b,c){return p.coerce(a,m,h,b,c)}b=e("u");var n=e("v"),d=e("w"),f=e("x"),c=e("y"),k=e("z");b&&b.length&&n&&n.length&&d&&d.length&&f&&
f.length&&c&&c.length&&k&&k.length?(e("starts.x"),e("starts.y"),e("starts.z"),e("maxdisplayed"),e("sizeref"),e("lighting.ambient"),e("lighting.diffuse"),e("lighting.specular"),e("lighting.roughness"),e("lighting.fresnel"),e("lightposition.x"),e("lightposition.y"),e("lightposition.z"),g(a,m,l,e,{prefix:"",cLetter:"c"}),e("text"),e("hovertext"),e("hovertemplate"),m._length=null):m.visible=!1}},{"../../components/colorscale/defaults":587,"../../lib":700,"./attributes":1133}],1137:[function(a,t,m){t.exports=
{moduleType:"trace",name:"streamtube",basePlotModule:a("../../plots/gl3d"),categories:["gl3d"],attributes:a("./attributes"),supplyDefaults:a("./defaults"),colorbar:{min:"cmin",max:"cmax"},calc:a("./calc"),plot:a("./convert"),eventData:function(a,g){a.tubex=a.x;a.tubey=a.y;a.tubez=a.z;a.tubeu=g.traceCoordinate[3];a.tubev=g.traceCoordinate[4];a.tubew=g.traceCoordinate[5];a.norm=g.traceCoordinate[6];a.divergence=g.traceCoordinate[7];delete a.x;delete a.y;delete a.z;return a},meta:{}}},{"../../plots/gl3d":789,
"./attributes":1133,"./calc":1134,"./convert":1135,"./defaults":1136}],1138:[function(a,t,m){m=a("../../plots/attributes");var p=a("../../components/fx/hovertemplate_attributes"),g=a("../../plots/domain").attributes,h=a("../pie/attributes");a=a("../../lib/extend").extendFlat;t.exports={labels:{valType:"data_array",editType:"calc"},parents:{valType:"data_array",editType:"calc"},values:{valType:"data_array",editType:"calc"},branchvalues:{valType:"enumerated",values:["remainder","total"],dflt:"remainder",
editType:"calc"},level:{valType:"any",editType:"plot"},maxdepth:{valType:"integer",editType:"plot",dflt:-1},marker:{colors:{valType:"data_array",editType:"calc"},line:{color:a({},h.marker.line.color,{dflt:null}),width:a({},h.marker.line.width,{dflt:1}),editType:"calc"},editType:"calc"},leaf:{opacity:{valType:"number",editType:"style",min:0,max:1,dflt:.7},editType:"plot"},text:h.text,textinfo:a({},h.textinfo,{editType:"plot",flags:["label","text","value"]}),textfont:h.textfont,hovertext:h.hovertext,
hoverinfo:a({},m.hoverinfo,{flags:["label","text","value","name"]}),hovertemplate:p(),insidetextfont:h.insidetextfont,outsidetextfont:h.outsidetextfont,domain:g({name:"sunburst",trace:!0,editType:"calc"})}},{"../../components/fx/hovertemplate_attributes":615,"../../lib/extend":690,"../../plots/attributes":745,"../../plots/domain":773,"../pie/attributes":1026}],1139:[function(a,t,m){var p=a("../../registry"),g=a("../../plots/get_data").getModuleCalcData,h=m.name="sunburst";m.plot=function(a,m,b,l){m=
p.getModule(h);var e=g(a.calcdata,m)[0];m.plot(a,e,b,l)};m.clean=function(a,g,b,l){a=l._has&&l._has(h);g=g._has&&g._has(h);a&&!g&&l._sunburstlayer.selectAll("g.trace").remove()}},{"../../plots/get_data":784,"../../registry":829}],1140:[function(a,t,m){var p=a("d3-hierarchy"),g=a("fast-isnumeric"),h=a("../../lib"),e=a("../pie/calc").makePullColorFn,n=a("../pie/calc").generateExtendedColors,b=h.isArrayOrTypedArray,l={};m.calc=function(a,l){a=a._fullLayout;var d=l.ids,f=b(d),c=l.labels,k=l.parents,m=
l.values,n=b(m),q=[],t={},u={},w=function(a,b){t[a]?t[a].push(b):t[a]=[b];u[b]=1},x=function(a){return!n||g(m[a])&&0<=m[a]};if(f){f=Math.min(d.length,k.length);var F=function(a){return d[a]&&x(a)};var B=function(a){return String(d[a])}}else f=Math.min(c.length,k.length),F=function(a){return c[a]&&x(a)},B=function(a){return String(c[a])};n&&(f=Math.min(f,m.length));for(var C=0;C<f;C++)if(F(C)){var D=B(C),G=k[C]?String(k[C]):"",H={i:C,id:D,pid:G,label:c[C]?String(c[C]):""};n&&(H.v=+m[C]);q.push(H);
w(G,D)}if(!t[""]){k=[];for(var E in t)u[E]||k.push(E);if(1===k.length)E=k[0],q.unshift({id:E,pid:"",label:E});else return h.warn("Multiple implied roots, cannot build sunburst hierarchy.")}else if(1<t[""].length){E=h.randstr();for(k=0;k<q.length;k++)""===q[k].pid&&(q[k].pid=E);q.unshift({hasMultipleRoots:!0,id:E,pid:""})}try{var K=p.stratify().id(function(a){return a.id}).parentId(function(a){return a.pid})(q)}catch(M){return h.warn("Failed to build sunburst hierarchy. Error: "+M.message)}K=p.hierarchy(K);
var I=!1;if(n)switch(l.branchvalues){case "remainder":K.sum(function(a){return a.data.v});break;case "total":K.each(function(a){var b=a.data.data.v;if(a.children){var c=a.children.reduce(function(a,b){return a+b.data.data.v},0);if(b<c)return I=!0,h.warn(["Total value for node",a.data.data.id,"is smaller than the sum of its children."].join(" "))}a.value=b})}else K.count();if(!I){K.sort(function(a,b){return b.value-a.value});var J=l.marker.colors||[],L=e(a._sunburstcolormap);K.each(function(a){a=a.data.data;
a.color=L(J[a.i],a.id)});q[0].hierarchy=K;return q}};m.crossTraceCalc=function(a){function b(a){var b=a.data.data,d=b.id;!1===b.color&&(c[d]?b.color=c[d]:a.parent?a.parent.parent?b.color=a.parent.data.data.color:(c[d]=b.color=e[g%e.length],g++):b.color="rgba(0,0,0,0)")}var d=a._fullLayout;a=a.calcdata;var e=d.sunburstcolorway,c=d._sunburstcolormap;d.extendsunburstcolors&&(e=n(e,l));var g=0;for(d=0;d<a.length;d++){var h=a[d][0];"sunburst"===h.trace.type&&h.hierarchy&&h.hierarchy.each(b)}}},{"../../lib":700,
"../pie/calc":1028,"d3-hierarchy":147,"fast-isnumeric":221}],1141:[function(a,t,m){t.exports={CLICK_TRANSITION_TIME:750,CLICK_TRANSITION_EASING:"linear"}},{}],1142:[function(a,t,m){var p=a("../../lib"),g=a("./attributes"),h=a("../../plots/domain").defaults,e=p.coerceFont;t.exports=function(a,b,l,m){function n(d,c){return p.coerce(a,b,g,d,c)}l=n("labels");var d=n("parents");l&&l.length&&d&&d.length?((l=n("values"))&&l.length&&n("branchvalues"),n("level"),n("maxdepth"),n("marker.line.width")&&n("marker.line.color",
m.paper_bgcolor),n("marker.colors"),n("leaf.opacity"),l=n("text"),n("textinfo",Array.isArray(l)?"text+label":"label"),n("hovertext"),n("hovertemplate"),l=e(n,"textfont",m.font),d=p.extendFlat({},l),a.textfont&&a.textfont.color||delete d.color,e(n,"insidetextfont",d),e(n,"outsidetextfont",l),h(b,m,n),b._length=null):b.visible=!1}},{"../../lib":700,"../../plots/domain":773,"./attributes":1138}],1143:[function(a,t,m){t.exports={moduleType:"trace",name:"sunburst",basePlotModule:a("./base_plot"),categories:[],
animatable:!0,attributes:a("./attributes"),layoutAttributes:a("./layout_attributes"),supplyDefaults:a("./defaults"),supplyLayoutDefaults:a("./layout_defaults"),calc:a("./calc").calc,crossTraceCalc:a("./calc").crossTraceCalc,plot:a("./plot"),style:a("./style").style,meta:{}}},{"./attributes":1138,"./base_plot":1139,"./calc":1140,"./defaults":1142,"./layout_attributes":1144,"./layout_defaults":1145,"./plot":1146,"./style":1147}],1144:[function(a,t,m){t.exports={sunburstcolorway:{valType:"colorlist",
editType:"calc"},extendsunburstcolors:{valType:"boolean",dflt:!0,editType:"calc"}}},{}],1145:[function(a,t,m){var p=a("../../lib"),g=a("./layout_attributes");t.exports=function(a,e){p.coerce(a,e,g,"sunburstcolorway",e.colorway);p.coerce(a,e,g,"extendsunburstcolors",void 0)}},{"../../lib":700,"./layout_attributes":1144}],1146:[function(a,t,m){function p(a,e,k,m){function p(a){var b=n(a),d=X[b],e=X[n(E)];if(e){var f=a.x1>e.x1?2*Math.PI:0;a=a.rpx1<e.rpx1?{rpx0:0,rpx1:0}:{x0:f,x1:f}}else{var g,h=n(a.parent);
z.each(function(a){if(n(a)===h)return g=a});a=g.children;var k;a.forEach(function(a,c){if(n(a)===b)return k=c});a=a.length;e=c.interpolate(g.x0,g.x1);a={rpx0:I,rpx1:I,x0:e(k/a),x1:e((k+1)/a)}}return c.interpolate(d,a)}function r(a){var b=X[n(a)],d={x0:a.x0,x1:a.x1,rpx0:a.rpx0,rpx1:a.rpx1};b||(na?a.parent?ma?(a=a.x1>ma?2*Math.PI:0,b={x0:a,x1:a}):(b={rpx0:I,rpx1:I},y.extendFlat(b,u(a))):b={rpx0:0,rpx1:0}:b={x0:0,x1:0});return c.interpolate(b,d)}function t(a){var b=X[n(a)],d=a.transform;b||(b={rpx1:a.rpx1,
transform:{scale:0,rotate:d.rotate,rCenter:d.rCenter,x:d.x,y:d.y}},na?a.parent?ma?b.x0=b.x1=a.x1>ma?2*Math.PI:0:y.extendFlat(b,u(a)):b.x0=b.x1=0:b.x0=b.x1=0);var e=c.interpolate(b.rpx1,a.rpx1),f=c.interpolate(b.x0,a.x0),g=c.interpolate(b.x1,a.x1),h=c.interpolate(b.transform.scale,d.scale),k=c.interpolate(b.transform.rotate,d.rotate),l=0===d.rCenter?3:0===b.transform.rCenter?1/3:1,m=c.interpolate(b.transform.rCenter,d.rCenter);return function(a){var b=e(a),c=f(a),n=g(a),q=m(Math.pow(a,l));b=la(b,(c+
n)/2);c=d.x;n=d.y;return{rpx1:e(a),translateX:J+b[0]*q+(c||0),translateY:K+b[1]*q+(n||0),transform:{scale:h(a),rotate:k(a),rCenter:q}}}}function u(a){var b=a.parent,d=X[n(b)],e={};d?(b=b.children,a=b.indexOf(a),b=b.length,d=c.interpolate(d.x0,d.x1),e.x0=d(a/b),e.x1=d(a/b)):e.x0=e.x1=0;return e}var v=a._fullLayout,w=m&&0<m.duration,z=c.select(k).selectAll("g.slice"),B=e[0],D=B.trace,E=h(B.hierarchy,D.level);k=0<=D.maxdepth?D.maxdepth:Infinity;m=v._size;var F=D.domain,H=m.h*(F.y[1]-F.y[0]),I=.5*Math.min(m.w*
(F.x[1]-F.x[0]),H),J=B.cx=m.l+m.w*(F.x[1]+F.x[0])/2,K=B.cy=m.t+m.h*(1-F.y[0])-H/2;if(!E)return z.remove();var na=null,X={};w&&z.each(function(a){X[n(a)]={rpx0:a.rpx0,rpx1:a.rpx1,x0:a.x0,x1:a.x1,transform:a.transform};na||a.parent||(na=a)});m=g(E).descendants();F=E.height+1;var ha=0,fa=k;B.hasMultipleRoots&&""===E.data.data.pid&&(m=m.slice(1),--F,ha=1,fa+=1);m=m.filter(function(a){return a.y1<=fa});var ja=Math.min(F,k),la=function(a,b){return[a*Math.cos(b),-a*Math.sin(b)]},Z=function(a){return y.pathAnnulus(a.rpx0,
a.rpx1,a.x0,a.x1,J,K)};z=z.data(m,function(a){return n(a)});z.enter().append("g").classed("slice",!0);w?z.exit().transition().each(function(){var a=c.select(this);a.select("path.surface").transition().attrTween("d",function(a){var b=p(a);return function(a){return Z(b(a))}});a.select("g.slicetext").attr("opacity",0)}).remove():z.exit().remove();z.order();var ma=null;if(w&&na){var sa=n(na);z.each(function(a){null===ma&&n(a)===sa&&(ma=a.x1)})}k=z;w&&(k=k.transition().each("end",function(){var d=c.select(this);
b(d,a,{isTransitioning:!1})}));k.each(function(g){var h=c.select(this),k=y.ensureSingle(h,"path","surface",function(a){a.style("pointer-events","all")});g.rpx0=(g.y0-ha)/ja*I;g.rpx1=(g.y1-ha)/ja*I;g.xmid=(g.x0+g.x1)/2;g.pxmid=la(g.rpx1,g.xmid);g.midangle=-(g.xmid-Math.PI/2);g.halfangle=.5*Math.min(y.angleDelta(g.x0,g.x1)||Math.PI,Math.PI);g.ring=1-g.rpx0/g.rpx1;var m=0===g.rpx0&&g.xmid===Math.PI?1:Math.max(0,Math.min(1/(1+1/Math.sin(g.halfangle)),g.ring/2));g.rInscribed=m;w?k.transition().attrTween("d",
function(a){var b=r(a);return function(a){return Z(b(a))}}):k.attr("d",Z);h.call(l,a,e).call(b,a,{isTransitioning:a._transitioning});k.call(G,g,D);h=y.ensureSingle(h,"g","slicetext");h=y.ensureSingle(h,"text","",function(a){a.attr("data-notex",1)});h.text(q(g,D,v)).classed("slicetext",!0).attr("text-anchor","middle").call(A.font,""===g.data.data.pid?d(D,g,v.font):f(D,g,v.font)).call(x.convertToTspans,a);var n=A.bBox(h.node());g.transform=C(n,g,B);g.translateX=J+g.pxmid[0]*g.transform.rCenter+(g.transform.x||
0);g.translateY=K+g.pxmid[1]*g.transform.rCenter+(g.transform.y||0);var p=function(a,b){return"translate("+a.translateX+","+a.translateY+")"+(1>a.transform.scale?"scale("+a.transform.scale+")":"")+(a.transform.rotate?"rotate("+a.transform.rotate+")":"")+"translate("+-(b.left+b.right)/2+","+-(b.top+b.bottom)/2+")"};w?h.transition().attrTween("transform",function(a){var b=t(a);return function(a){return p(b(a),n)}}):h.attr("transform",p(g,n))})}function g(a){return k.partition().size([2*Math.PI,a.height+
1])(a)}function h(a,b){var c;b&&a.eachAfter(function(a){if(n(a)===b)return c=a.copy()});return c||a}function e(a,b){var c;a.eachAfter(function(a){for(var d=a.children||[],e=0;e<d.length;e++)if(n(d[e])===b)return c=a.copy()});return c||a}function n(a){return a.data.data.id}function b(a,b,c){b=a.datum();F(a,(c||{}).isTransitioning||!b.children||""===b.data.data.pid?null:"pointer")}function l(a,b,d){var f=d[0],g=f.trace;"_hasHoverLabel"in g||(g._hasHoverLabel=!1);"_hasHoverEvent"in g||(g._hasHoverEvent=
!1);a.on("mouseover",function(a){var d=b._fullLayout;if(!b._dragging&&!1!==d.hovermode){var e=b._fullData[g.index],h=a.data.data,k=h.i,l=function(a){return y.castOption(e,k,a)},m=l("hovertemplate"),n=v.castHoverinfo(e,d,k),q=d.separators;if(m||n&&"none"!==n&&"skip"!==n){var p=a.rInscribed,r=f.cx+a.pxmid[0]*(1-p),t=f.cy+a.pxmid[1]*(1-p),w={},x=[],z=[];n&&(x="all"===n?e._module.attributes.hoverinfo.flags:n.split("+"));w.label=h.label;-1!==x.indexOf("label")&&w.label&&z.push(w.label);h.hasOwnProperty("v")&&
(w.value=h.v,w.valueLabel=D(w.value,q),-1!==x.indexOf("value")&&z.push(w.valueLabel));w.text=l("hovertext")||l("text");-1!==x.indexOf("text")&&w.text&&z.push(w.text);v.loneHover({x0:r-p*a.rpx1,x1:r+p*a.rpx1,y:t,idealAlign:0>a.pxmid[0]?"left":"right",trace:e,text:z.join("\x3cbr\x3e"),name:m||-1!==x.indexOf("name")?e.name:void 0,color:l("hoverlabel.bgcolor")||h.color,borderColor:l("hoverlabel.bordercolor"),fontFamily:l("hoverlabel.font.family"),fontSize:l("hoverlabel.font.size"),fontColor:l("hoverlabel.font.color"),
hovertemplate:m,hovertemplateLabels:w,eventData:[u(a,e)]},{container:d._hoverlayer.node(),outerContainer:d._paper.node(),gd:b});g._hasHoverLabel=!0}g._hasHoverEvent=!0;b.emit("plotly_hover",{points:[u(a,e)],event:c.event})}});a.on("mouseout",function(a){var d=b._fullLayout,e=b._fullData[g.index],f=c.select(this).datum();g._hasHoverEvent&&(a.originalEvent=c.event,b.emit("plotly_unhover",{points:[u(f,e)],event:c.event}),g._hasHoverEvent=!1);g._hasHoverLabel&&(v.loneUnhover(d._hoverlayer.node()),g._hasHoverLabel=
!1)});a.on("click",function(a){var d=b._fullLayout,k=b._fullData[g.index];if(!1===w.triggerHandler(b,"plotly_sunburstclick",{points:[u(a,k)],event:c.event})||!a.children||""===a.data.data.pid)d.hovermode&&(b._hoverdata=[u(a,k)],v.click(b,c.event));else if(!b._dragging&&!b._transitioning){r.call("_storeDirectGUIEdit",k,d._tracePreGUI[k.uid],{level:k.level});k=f.hierarchy;var l=n(a);a=a.parent?h(k,l):e(k,l);a={data:[{level:n(a)}],traces:[g.index]};k={frame:{redraw:!1,duration:H.CLICK_TRANSITION_TIME},
transition:{duration:H.CLICK_TRANSITION_TIME,easing:H.CLICK_TRANSITION_EASING},mode:"immediate",fromcurrent:!0};v.loneUnhover(d._hoverlayer.node());r.call("animate",b,a,k)}})}function u(a,b){a=a.data.data;var c={curveNumber:b.index,pointNumber:a.i,data:b._input,fullData:b};B(c,b,a.i);return c}function q(a,b,c){var d=b.textinfo;if(!d||"none"===d)return"";a=a.data.data;c=c.separators;var e=d.split("+");d=[];-1!==e.indexOf("label")&&a.label&&d.push(a.label);a.hasOwnProperty("v")&&-1!==e.indexOf("value")&&
d.push(D(a.v,c));-1!==e.indexOf("text")&&(b=y.castOption(b,a.i,"text"))&&d.push(b);return d.join("\x3cbr\x3e")}function d(a,b,c){var d=b.data.data.i;b=y.castOption(a,d,"outsidetextfont.color")||y.castOption(a,d,"textfont.color")||c.color;var e=y.castOption(a,d,"outsidetextfont.family")||y.castOption(a,d,"textfont.family")||c.family;a=y.castOption(a,d,"outsidetextfont.size")||y.castOption(a,d,"textfont.size")||c.size;return{color:b,family:e,size:a}}function f(a,b,c){b=b.data.data;var d=b.i,e=y.castOption(a,
d,"insidetextfont.color");!e&&a._input.textfont&&(e=y.castOption(a._input,d,"textfont.color"));var f=y.castOption(a,d,"insidetextfont.family")||y.castOption(a,d,"textfont.family")||c.family;a=y.castOption(a,d,"insidetextfont.size")||y.castOption(a,d,"textfont.size")||c.size;return{color:e||z.contrast(b.color),family:f,size:a}}var c=a("d3"),k=a("d3-hierarchy"),r=a("../../registry"),v=a("../../components/fx"),z=a("../../components/color"),A=a("../../components/drawing"),y=a("../../lib"),w=a("../../lib/events"),
x=a("../../lib/svg_text_utils"),F=a("../../lib/setcursor"),B=a("../../components/fx/helpers").appendArrayPointValue,C=a("../pie/plot").transformInsideText,D=a("../pie/helpers").formatPieValue,G=a("./style").styleOne,H=a("./constants");t.exports=function(a,b,d,e){var f=a._fullLayout._sunburstlayer,g,h=!d,k=d&&0<d.duration;b=f.selectAll("g.trace.sunburst").data(b,function(a){return a[0].trace.uid});b.enter().append("g").classed("trace",!0).classed("sunburst",!0).attr("stroke-linejoin","round");b.order();
k?(e&&(g=e()),c.transition().duration(d.duration).ease(d.easing).each("end",function(){g&&g()}).each("interrupt",function(){g&&g()}).each(function(){f.selectAll("g.trace").each(function(b){p(a,b,this,d)})})):b.each(function(b){p(a,b,this,d)});h&&b.exit().remove()}},{"../../components/color":577,"../../components/drawing":598,"../../components/fx":616,"../../components/fx/helpers":612,"../../lib":700,"../../lib/events":689,"../../lib/setcursor":720,"../../lib/svg_text_utils":724,"../../registry":829,
"../pie/helpers":1031,"../pie/plot":1035,"./constants":1141,"./style":1147,d3:154,"d3-hierarchy":147}],1147:[function(a,t,m){function p(a,b,g){var l=b.data.data;b=!b.children;var m=l.i,d=e.castOption(g,m,"marker.line.color")||h.defaultLine;m=e.castOption(g,m,"marker.line.width")||0;a.style("stroke-width",m).call(h.fill,l.color).call(h.stroke,d).style("opacity",b?g.leaf.opacity:null)}var g=a("d3"),h=a("../../components/color"),e=a("../../lib");t.exports={style:function(a){a._fullLayout._sunburstlayer.selectAll(".trace").each(function(a){var b=
g.select(this),e=a[0].trace;b.style("opacity",e.opacity);b.selectAll("path.surface").each(function(a){g.select(this).call(p,a,e)})})},styleOne:p}},{"../../components/color":577,"../../lib":700,d3:154}],1148:[function(a,t,m){function p(a){return{valType:"boolean",dflt:!1}}function g(a){return{show:{valType:"boolean",dflt:!1},project:{x:p("x"),y:p("y"),z:p("z")},color:{valType:"color",dflt:h.defaultLine},usecolormap:{valType:"boolean",dflt:!1},width:{valType:"number",min:1,max:16,dflt:2},highlight:{valType:"boolean",
dflt:!0},highlightcolor:{valType:"color",dflt:h.defaultLine},highlightwidth:{valType:"number",min:1,max:16,dflt:2}}}var h=a("../../components/color");m=a("../../components/colorscale/attributes");var e=a("../../components/colorbar/attributes"),n=a("../../components/fx/hovertemplate_attributes"),b=a("../../plots/attributes"),l=a("../../lib/extend").extendFlat;a=a("../../plot_api/edit_types").overrideAll;t=t.exports=a(l({z:{valType:"data_array"},x:{valType:"data_array"},y:{valType:"data_array"},text:{valType:"string",
dflt:"",arrayOk:!0},hovertext:{valType:"string",dflt:"",arrayOk:!0},hovertemplate:n(),connectgaps:{valType:"boolean",dflt:!1,editType:"calc"},surfacecolor:{valType:"data_array"}},m("",{colorAttr:"z or surfacecolor",showScaleDflt:!0,autoColorDflt:!1,editTypeOverride:"calc"}),{colorbar:e,contours:{x:g("x"),y:g("y"),z:g("z")},hidesurface:{valType:"boolean",dflt:!1},lightposition:{x:{valType:"number",min:-1E5,max:1E5,dflt:10},y:{valType:"number",min:-1E5,max:1E5,dflt:1E4},z:{valType:"number",min:-1E5,
max:1E5,dflt:0}},lighting:{ambient:{valType:"number",min:0,max:1,dflt:.8},diffuse:{valType:"number",min:0,max:1,dflt:.8},specular:{valType:"number",min:0,max:2,dflt:.05},roughness:{valType:"number",min:0,max:1,dflt:.5},fresnel:{valType:"number",min:0,max:5,dflt:.2}},opacity:{valType:"number",min:0,max:1,dflt:1},_deprecated:{zauto:l({},m.zauto,{}),zmin:l({},m.zmin,{}),zmax:l({},m.zmax,{})},hoverinfo:l({},b.hoverinfo)}),"calc","nested");t.x.editType=t.y.editType=t.z.editType="calc+clearAxisTypes";t.transforms=
void 0},{"../../components/color":577,"../../components/colorbar/attributes":578,"../../components/colorscale/attributes":584,"../../components/fx/hovertemplate_attributes":615,"../../lib/extend":690,"../../plot_api/edit_types":731,"../../plots/attributes":745}],1149:[function(a,t,m){var p=a("../../components/colorscale/calc");t.exports=function(a,h){h.surfacecolor?p(a,h,{vals:h.surfacecolor,containerStr:"",cLetter:"c"}):p(a,h,{vals:h.z,containerStr:"",cLetter:"c"})}},{"../../components/colorscale/calc":585}],
1150:[function(a,t,m){function p(a,b,c){this.scene=a;this.uid=c;this.surface=b;this.data=null;this.showContour=[!1,!1,!1];this.minValues=[Infinity,Infinity,Infinity];this.maxValues=[-Infinity,-Infinity,-Infinity];this.dataScaleY=this.dataScaleX=1;this.refineData=!0;this._interpolatedZ=!1}function g(a){var b=a[0].rgb;a=a[a.length-1].rgb;return b[0]===a[0]&&b[1]===a[1]&&b[2]===a[2]&&b[3]===a[3]}function h(a,b){if(a<b)return 0;for(var c=0;0===Math.floor(a%b);)a/=b,c++;return c}function e(a){for(var b=
[],c=0;c<r.length;c++)b.push(h(a,r[c]));return b}var n=a("gl-surface3d"),b=a("ndarray"),l=a("ndarray-homography"),u=a("ndarray-fill"),q=a("../../lib").isArrayOrTypedArray,d=a("../../lib/gl_format_color").parseColorScale,f=a("../../lib/str2rgbarray"),c=a("../heatmap/interp2d"),k=a("../heatmap/find_empties");a=p.prototype;a.getXat=function(a,b,c,d){a=q(this.data.x)?q(this.data.x[0])?this.data.x[b][a]:this.data.x[a]:a;return void 0===c?a:d.d2l(a,0,c)};a.getYat=function(a,b,c,d){a=q(this.data.y)?q(this.data.y[0])?
this.data.y[b][a]:this.data.y[b]:b;return void 0===c?a:d.d2l(a,0,c)};a.getZat=function(a,b,c,d){var e=this.data.z[b][a];null===e&&this.data.connectgaps&&this.data._interpolatedZ&&(e=this.data._interpolatedZ[b][a]);return void 0===c?e:d.d2l(e,0,c)};a.handlePick=function(a){if(a.object===this.surface){var b=Math.max(Math.min(Math.round((a.data.index[0]-1)/this.dataScaleX-1),this.data.z[0].length-1),0),c=Math.max(Math.min(Math.round((a.data.index[1]-1)/this.dataScaleY-1),this.data._ylength-1),0);a.index=
[b,c];a.traceCoordinate=[this.getXat(b,c),this.getYat(b,c),this.getZat(b,c)];a.dataCoordinate=[this.getXat(b,c,this.data.xcalendar,this.scene.fullSceneLayout.xaxis),this.getYat(b,c,this.data.ycalendar,this.scene.fullSceneLayout.yaxis),this.getZat(b,c,this.data.zcalendar,this.scene.fullSceneLayout.zaxis)];for(var d=0;3>d;d++){var e=a.dataCoordinate[d];null!==e&&void 0!==e&&(a.dataCoordinate[d]*=this.scene.dataScale[d])}d=this.data.hovertext||this.data.text;Array.isArray(d)&&d[c]&&void 0!==d[c][b]?
a.textLabel=d[c][b]:a.textLabel=d?d:"";a.data.dataCoordinate=a.dataCoordinate.slice();this.surface.highlight(a.data);this.scene.glplot.spikes.position=a.dataCoordinate;return!0}};var r=[2,3,5,7,11,13,17,19,23,29,31,37,41,43,47,53,59,61,67,71,73,79,83,89,97,101,103,107,109,113,127,131,137,139,149,151,157,163,167,173,179,181,191,193,197,199,211,223,227,229,233,239,241,251,257,263,269,271,277,281,283,293,307,311,313,317,331,337,347,349,353,359,367,373,379,383,389,397,401,409,419,421,431,433,439,443,
449,457,461,463,467,479,487,491,499,503,509,521,523,541,547,557,563,569,571,577,587,593,599,601,607,613,617,619,631,641,643,647,653,659,661,673,677,683,691,701,709,719,727,733,739,743,751,757,761,769,773,787,797,809,811,821,823,827,829,839,853,857,859,863,877,881,883,887,907,911,919,929,937,941,947,953,967,971,977,983,991,997,1009,1013,1019,1021,1031,1033,1039,1049,1051,1061,1063,1069,1087,1091,1093,1097,1103,1109,1117,1123,1129,1151,1153,1163,1171,1181,1187,1193,1201,1213,1217,1223,1229,1231,1237,
1249,1259,1277,1279,1283,1289,1291,1297,1301,1303,1307,1319,1321,1327,1361,1367,1373,1381,1399,1409,1423,1427,1429,1433,1439,1447,1451,1453,1459,1471,1481,1483,1487,1489,1493,1499,1511,1523,1531,1543,1549,1553,1559,1567,1571,1579,1583,1597,1601,1607,1609,1613,1619,1621,1627,1637,1657,1663,1667,1669,1693,1697,1699,1709,1721,1723,1733,1741,1747,1753,1759,1777,1783,1787,1789,1801,1811,1823,1831,1847,1861,1867,1871,1873,1877,1879,1889,1901,1907,1913,1931,1933,1949,1951,1973,1979,1987,1993,1997,1999,2003,
2011,2017,2027,2029,2039,2053,2063,2069,2081,2083,2087,2089,2099,2111,2113,2129,2131,2137,2141,2143,2153,2161,2179,2203,2207,2213,2221,2237,2239,2243,2251,2267,2269,2273,2281,2287,2293,2297,2309,2311,2333,2339,2341,2347,2351,2357,2371,2377,2381,2383,2389,2393,2399,2411,2417,2423,2437,2441,2447,2459,2467,2473,2477,2503,2521,2531,2539,2543,2549,2551,2557,2579,2591,2593,2609,2617,2621,2633,2647,2657,2659,2663,2671,2677,2683,2687,2689,2693,2699,2707,2711,2713,2719,2729,2731,2741,2749,2753,2767,2777,2789,
2791,2797,2801,2803,2819,2833,2837,2843,2851,2857,2861,2879,2887,2897,2903,2909,2917,2927,2939,2953,2957,2963,2969,2971,2999];a.calcXnums=function(a){var b,c=[];for(b=1;b<a;b++){var d=this.getXat(b-1,0),e=this.getXat(b,0);c[b-1]=e!==d&&void 0!==d&&null!==d&&void 0!==e&&null!==e?Math.abs(e-d):0}d=0;for(b=1;b<a;b++)d+=c[b-1];for(b=1;b<a;b++)c[b-1]=0===c[b-1]?1:Math.round(d/c[b-1]);return c};a.calcYnums=function(a){var b,c=[];for(b=1;b<a;b++){var d=this.getYat(0,b-1),e=this.getYat(0,b);c[b-1]=e!==d&&
void 0!==d&&null!==d&&void 0!==e&&null!==e?Math.abs(e-d):0}d=0;for(b=1;b<a;b++)d+=c[b-1];for(b=1;b<a;b++)c[b-1]=0===c[b-1]?1:Math.round(d/c[b-1]);return c};m=[1,2,4,6,12,24,36,48,60,120,180,240,360,720,840,1260];var v=m[9],z=m[13];a.estimateScale=function(a,b){b=0===b?this.calcXnums(a):this.calcYnums(a);if(0===b.length)b=void 0;else{for(var c=1,d=0;d<b.length;d++){var f=b[d];if(1>c||1>f)c=void 0;else{c=e(c);f=e(f);for(var g=1,h=0;h<r.length;h++)g*=Math.pow(r[h],Math.max(c[h],f[h]));c=g}}b=c}for(d=
1+b;d<v;)d*=2;for(;d>z;){d--;c=b=d;d=e(c);for(f=0;f<r.length;f++)if(0<d[f]){c=r[f];break}d=b/c;d++;d<v&&(d=z)}a=Math.round(d/a);return 1<a?a:1};a.refineCoords=function(a){var c=this.dataScaleX,d=this.dataScaleY,e=Math.floor(a[0].shape[0]*c+1)|0,f=Math.floor(a[0].shape[1]*d+1)|0,g=1+a[0].shape[0]+1,h=1+a[0].shape[1]+1;g=b(new Float32Array(g*h),[g,h]);for(h=0;h<a.length;++h){this.surface.padField(g,a[h]);var k=b(new Float32Array(e*f),[e,f]);l(k,g,[c,0,0,0,d,0,0,0,1]);a[h]=k}};a.setContourLevels=function(){for(var a=
[[],[],[]],b=!1,c=0;3>c;++c)this.showContour[c]&&(b=!0,a[c]=this.scene.contourLevels[c]);b&&this.surface.update({levels:a})};a.update=function(a){var e=this.scene,h=e.fullSceneLayout,l=this.surface,m=a.opacity,n=d(a,m),q=e.dataScale,p=a.z[0].length,r=a._ylength;e=e.contourLevels;this.data=a;var t,v,A,I=[];for(t=0;3>t;t++)for(I[t]=[],v=0;v<p;v++)I[t][v]=[];for(v=0;v<p;v++)for(A=0;A<r;A++)I[0][v][A]=this.getXat(v,A,a.xcalendar,h.xaxis),I[1][v][A]=this.getYat(v,A,a.ycalendar,h.yaxis),I[2][v][A]=this.getZat(v,
A,a.zcalendar,h.zaxis);if(a.connectgaps)for(a._emptypoints=k(I[2]),c(I[2],a._emptypoints),a._interpolatedZ=[],v=0;v<p;v++)for(a._interpolatedZ[v]=[],A=0;A<r;A++)a._interpolatedZ[v][A]=I[2][v][A];for(t=0;3>t;t++)for(v=0;v<p;v++)for(A=0;A<r;A++)h=I[t][v][A],null===h||void 0===h?I[t][v][A]=NaN:h=I[t][v][A]*=q[t];for(t=0;3>t;t++)for(v=0;v<p;v++)for(A=0;A<r;A++)h=I[t][v][A],null!==h&&void 0!==h&&(this.minValues[t]>h&&(this.minValues[t]=h),this.maxValues[t]<h&&(this.maxValues[t]=h));for(t=0;3>t;t++)a._objectOffset[t]=
.5*(this.minValues[t]+this.maxValues[t]);for(t=0;3>t;t++)for(v=0;v<p;v++)for(A=0;A<r;A++)h=I[t][v][A],null!==h&&void 0!==h&&(I[t][v][A]-=a._objectOffset[t]);h=[b(new Float32Array(p*r),[p,r]),b(new Float32Array(p*r),[p,r]),b(new Float32Array(p*r),[p,r])];u(h[0],function(a,b){return I[0][a][b]});u(h[1],function(a,b){return I[1][a][b]});u(h[2],function(a,b){return I[2][a][b]});I=[];v={colormap:n,levels:[[],[],[]],showContour:[!0,!0,!0],showSurface:!a.hidesurface,contourProject:[[!1,!1,!1],[!1,!1,!1],
[!1,!1,!1]],contourWidth:[1,1,1],contourColor:[[1,1,1,1],[1,1,1,1],[1,1,1,1]],contourTint:[1,1,1],dynamicColor:[[1,1,1,1],[1,1,1,1],[1,1,1,1]],dynamicWidth:[1,1,1],dynamicTint:[1,1,1],opacity:a.opacity};v.intensityBounds=[a.cmin,a.cmax];a.surfacecolor?(t=b(new Float32Array(p*r),[p,r]),u(t,function(b,c){return a.surfacecolor[c][b]}),h.push(t)):(v.intensityBounds[0]*=q[2],v.intensityBounds[1]*=q[2]);if(z<h[0].shape[0]||z<h[0].shape[1])this.refineData=!1;!0===this.refineData&&(this.dataScaleX=this.estimateScale(h[0].shape[0],
0),this.dataScaleY=this.estimateScale(h[0].shape[1],1),1===this.dataScaleX&&1===this.dataScaleY||this.refineCoords(h));a.surfacecolor&&(v.intensity=h.pop());q=[!0,!0,!0];p=["x","y","z"];for(t=0;3>t;++t)r=a.contours[p[t]],q[t]=r.highlight,v.showContour[t]=r.show||r.highlight,v.showContour[t]&&(v.contourProject[t]=[r.project.x,r.project.y,r.project.z],r.show?(this.showContour[t]=!0,v.levels[t]=e[t],l.highlightColor[t]=v.contourColor[t]=f(r.color),l.highlightTint[t]=r.usecolormap?v.contourTint[t]=0:
v.contourTint[t]=1,v.contourWidth[t]=r.width):this.showContour[t]=!1,r.highlight&&(v.dynamicColor[t]=f(r.highlightcolor),v.dynamicWidth[t]=r.highlightwidth));g(n)&&(v.vertexColor=!0);v.objectOffset=[a._objectOffset[0],a._objectOffset[1],a._objectOffset[2]];v.coords=h;l.update(v);l.visible=a.visible;l.enableDynamic=q;l.enableHighlight=q;l.snapToData=!0;"lighting"in a&&(l.ambientLight=a.lighting.ambient,l.diffuseLight=a.lighting.diffuse,l.specularLight=a.lighting.specular,l.roughness=a.lighting.roughness,
l.fresnel=a.lighting.fresnel);"lightposition"in a&&(l.lightPosition=[a.lightposition.x,a.lightposition.y,a.lightposition.z]);m&&1>m&&(l.supportsTransparency=!0)};a.dispose=function(){this.scene.glplot.remove(this.surface);this.surface.dispose()};t.exports=function(a,b){var c=n({gl:a.glplot.gl}),d=new p(a,c,b.uid);c._trace=d;d.update(b);a.glplot.add(c);return d}},{"../../lib":700,"../../lib/gl_format_color":697,"../../lib/str2rgbarray":723,"../heatmap/find_empties":954,"../heatmap/interp2d":957,"gl-surface3d":312,
ndarray:442,"ndarray-fill":432,"ndarray-homography":434}],1151:[function(a,t,m){function p(a,e,g){e in a&&!(g in a)&&(a[g]=a[e])}var g=a("../../registry"),h=a("../../lib"),e=a("../../components/colorscale/defaults"),n=a("./attributes");t.exports=function(a,l,m,q){function b(b,c){return h.coerce(a,l,n,b,c)}m=b("x");var f=b("y");var c=b("z");if(!c||!c.length||m&&1>m.length||f&&1>f.length)l.visible=!1;else{l._xlength=Array.isArray(m)&&h.isArrayOrTypedArray(m[0])?c.length:c[0].length;l._ylength=c.length;
l._objectOffset=[0,0,0];g.getComponentMethod("calendars","handleTraceDefaults")(a,l,["x","y","z"],q);b("text");b("hovertext");b("hovertemplate");"lighting.ambient lighting.diffuse lighting.specular lighting.roughness lighting.fresnel lightposition.x lightposition.y lightposition.z hidesurface connectgaps opacity".split(" ").forEach(function(a){b(a)});c=b("surfacecolor");var k=["x","y","z"];for(m=0;3>m;++m){var r="contours."+k[m],t=b(r+".show"),u=b(r+".highlight");if(t||u)for(f=0;3>f;++f)b(r+".project."+
k[f]);t&&(b(r+".color"),b(r+".width"),b(r+".usecolormap"));u&&(b(r+".highlightcolor"),b(r+".highlightwidth"))}c||(p(a,"zmin","cmin"),p(a,"zmax","cmax"),p(a,"zauto","cauto"));e(a,l,q,b,{prefix:"",cLetter:"c"});l._length=null}}},{"../../components/colorscale/defaults":587,"../../lib":700,"../../registry":829,"./attributes":1148}],1152:[function(a,t,m){m={};m.attributes=a("./attributes");m.supplyDefaults=a("./defaults");m.colorbar={min:"cmin",max:"cmax"};m.calc=a("./calc");m.plot=a("./convert");m.moduleType=
"trace";m.name="surface";m.basePlotModule=a("../../plots/gl3d");m.categories=["gl3d","2dMap","noOpacity"];m.meta={};t.exports=m},{"../../plots/gl3d":789,"./attributes":1148,"./calc":1149,"./convert":1150,"./defaults":1151}],1153:[function(a,t,m){m=a("../../components/annotations/attributes");var p=a("../../lib/extend").extendFlat,g=a("../../plot_api/edit_types").overrideAll,h=a("../../plots/font_attributes");a=a("../../plots/domain").attributes;(t.exports=g({domain:a({name:"table",trace:!0}),columnwidth:{valType:"number",
arrayOk:!0,dflt:null},columnorder:{valType:"data_array"},header:{values:{valType:"data_array",dflt:[]},format:{valType:"data_array",dflt:[]},prefix:{valType:"string",arrayOk:!0,dflt:null},suffix:{valType:"string",arrayOk:!0,dflt:null},height:{valType:"number",dflt:28},align:p({},m.align,{arrayOk:!0}),line:{width:{valType:"number",arrayOk:!0,dflt:1},color:{valType:"color",arrayOk:!0,dflt:"grey"}},fill:{color:{valType:"color",arrayOk:!0,dflt:"white"}},font:p({},h({arrayOk:!0}))},cells:{values:{valType:"data_array",
dflt:[]},format:{valType:"data_array",dflt:[]},prefix:{valType:"string",arrayOk:!0,dflt:null},suffix:{valType:"string",arrayOk:!0,dflt:null},height:{valType:"number",dflt:20},align:p({},m.align,{arrayOk:!0}),line:{width:{valType:"number",arrayOk:!0,dflt:1},color:{valType:"color",arrayOk:!0,dflt:"grey"}},fill:{color:{valType:"color",arrayOk:!0,dflt:"white"}},font:p({},h({arrayOk:!0}))}},"calc","from-root")).transforms=void 0},{"../../components/annotations/attributes":560,"../../lib/extend":690,"../../plot_api/edit_types":731,
"../../plots/domain":773,"../../plots/font_attributes":774}],1154:[function(a,t,m){var p=a("../../plots/get_data").getModuleCalcData,g=a("./plot");m.name="table";m.plot=function(a){var e=p(a.calcdata,"table")[0];e.length&&g(a,e)};m.clean=function(a,e,g,b){a=b._has&&b._has("table");e=e._has&&e._has("table");a&&!e&&b._paperdiv.selectAll(".table").remove()}},{"../../plots/get_data":784,"./plot":1161}],1155:[function(a,t,m){var p=a("../../lib/gup").wrap;t.exports=function(){return p({})}},{"../../lib/gup":698}],
1156:[function(a,t,m){t.exports={cellPad:8,columnExtentOffset:10,columnTitleOffset:28,emptyHeaderHeight:16,latexCheck:/^\$.*\$$/,goldenRatio:1.618,lineBreaker:"\x3cbr\x3e",maxDimensionCount:60,overdrag:45,releaseTransitionDuration:120,releaseTransitionEase:"cubic-out",scrollbarCaptureWidth:18,scrollbarHideDelay:1E3,scrollbarHideDuration:1E3,scrollbarOffset:5,scrollbarWidth:8,transitionDuration:100,transitionEase:"cubic-out",uplift:5,wrapSpacer:" ",wrapSplitCharacter:" ",cn:{table:"table",tableControlView:"table-control-view",
scrollBackground:"scroll-background",yColumn:"y-column",columnBlock:"column-block",scrollAreaClip:"scroll-area-clip",scrollAreaClipRect:"scroll-area-clip-rect",columnBoundary:"column-boundary",columnBoundaryClippath:"column-boundary-clippath",columnBoundaryRect:"column-boundary-rect",columnCells:"column-cells",columnCell:"column-cell",cellRect:"cell-rect",cellText:"cell-text",cellTextHolder:"cell-text-holder",scrollbarKit:"scrollbar-kit",scrollbar:"scrollbar",scrollbarSlider:"scrollbar-slider",scrollbarGlyph:"scrollbar-glyph",
scrollbarCaptureZone:"scrollbar-capture-zone"}}},{}],1157:[function(a,t,m){function p(a){if(Array.isArray(a)){for(var b=0,c=0;c<a.length;c++)b=Math.max(b,p(a[c]));return b}return a}function g(a,b){return a+b}function h(a){a=a.slice();var b=Infinity,c=0,d;for(d=0;d<a.length;d++)Array.isArray(a[d])||(a[d]=[a[d]]),b=Math.min(b,a[d].length),c=Math.max(c,a[d].length);if(b!==c)for(d=0;d<a.length;d++)(b=c-a[d].length)&&(a[d]=a[d].concat(e(b)));return a}function e(a){for(var b=Array(a),c=0;c<a;c++)b[c]="";
return b}function n(a){return a.calcdata.columns.reduce(function(b,c){return c.xIndex<a.xIndex?b+c.columnWidth:b},0)}function b(a,b){return Object.keys(a).map(function(c){return d({},a[c],{auxiliaryBlocks:b})})}function l(a,b){for(var c={},d,e=0,f=0,g=u(),h=0,k=0,l=0;l<a.length;l++)if(d=a[l],g.rows.push({rowIndex:l,rowHeight:d}),f+=d,f>=b||l===a.length-1)c[e]=g,g.key=k++,g.firstRowIndex=h,g.lastRowIndex=l,g=u(),e+=f,h=l+1,f=0;return c}function u(){return{firstRowIndex:null,lastRowIndex:null,rows:[]}}
var q=a("./constants"),d=a("../../lib/extend").extendFlat,f=a("fast-isnumeric");t.exports=function(a,k){var c=h(k.cells.values),m=function(a){return a.slice(k.header.values.length,a.length)},t=h(k.header.values);t.length&&!t[0].length&&(t[0]=[""],t=h(t));var u=t.concat(m(c).map(function(){return e((t[0]||[""]).length)})),y=k.domain,w=Math.floor(a._fullLayout._size.w*(y.x[1]-y.x[0])),x=Math.floor(a._fullLayout._size.h*(y.y[1]-y.y[0])),F=k.header.values.length?u[0].map(function(){return k.header.height}):
[q.emptyHeaderHeight],B=c.length?c[0].map(function(){return k.cells.height}):[],C=F.reduce(g,0);B=l(B,x-C+q.uplift);F=l(F,C);F=b(F,[]);B=b(B,F);var D={},G=k._fullInput.columnorder.concat(m(c.map(function(a,b){return b}))),H=u.map(function(a,b){a=Array.isArray(k.columnwidth)?k.columnwidth[Math.min(b,k.columnwidth.length-1)]:k.columnwidth;return f(a)?Number(a):1}),E=H.reduce(g,0);H=H.map(function(a){return a/E*w});m=Math.max(p(k.header.line.width),p(k.cells.line.width));var K={key:k.uid+a._context.staticPlot,
translateX:y.x[0]*a._fullLayout._size.w,translateY:a._fullLayout._size.h*(1-y.y[1]),size:a._fullLayout._size,width:w,maxLineWidth:m,height:x,columnOrder:G,groupHeight:x,rowBlocks:B,headerRowBlocks:F,scrollY:0,cells:d({},k.cells,{values:c}),headerCells:d({},k.header,{values:u}),gdColumns:u.map(function(a){return a[0]}),gdColumnsOriginalOrder:u.map(function(a){return a[0]}),prevPages:[0,0],scrollbarState:{scrollbarScrollInProgress:!1},columns:u.map(function(a,b){D[a]=(D[a]||0)+1;return{key:a+"__"+D[a],
label:a,specIndex:b,xIndex:G[b],xScale:n,x:void 0,calcdata:void 0,columnWidth:H[b]}})};K.columns.forEach(function(a){a.calcdata=K;a.x=n(a)});return K}},{"../../lib/extend":690,"./constants":1156,"fast-isnumeric":221}],1158:[function(a,t,m){function p(a){var e=(a=a.rowBlocks[a.page])?a.rows[0].rowIndex:0;return[e,a?e+a.rows.length:0]}var g=a("../../lib/extend").extendFlat;m.splitToPanels=function(a){var e=[0,0],h=g({},a,{key:"header",type:"header",page:0,prevPages:e,currentRepaint:[null,null],dragHandle:!0,
values:a.calcdata.headerCells.values[a.specIndex],rowBlocks:a.calcdata.headerRowBlocks,calcdata:g({},a.calcdata,{cells:a.calcdata.headerCells})}),b=g({},a,{key:"cells1",type:"cells",page:0,prevPages:e,currentRepaint:[null,null],dragHandle:!1,values:a.calcdata.cells.values[a.specIndex],rowBlocks:a.calcdata.rowBlocks});a=g({},a,{key:"cells2",type:"cells",page:1,prevPages:e,currentRepaint:[null,null],dragHandle:!1,values:a.calcdata.cells.values[a.specIndex],rowBlocks:a.calcdata.rowBlocks});return[b,
a,h]};m.splitToCells=function(a){var e=p(a);return(a.values||[]).slice(e[0],e[1]).map(function(g,b){var h="string"===typeof g&&g.match(/[<$&> ]/)?"_keybuster_"+Math.random():"";return{keyWithinBlock:b+h,key:e[0]+b,column:a,calcdata:a.calcdata,page:a.page,rowBlocks:a.rowBlocks,value:g}})}},{"../../lib/extend":690}],1159:[function(a,t,m){function p(a,b){var e=a.header.values.length;a=(a.columnorder||[]).slice(0,e);var g=a.slice().sort(function(a,b){return a-b});a=a.map(function(a){return g.indexOf(a)});
for(var h=a.length;h<e;h++)a.push(h);b("columnorder",a)}var g=a("../../lib"),h=a("./attributes"),e=a("../../plots/domain").defaults;t.exports=function(a,b,l,m){function n(d,e){return g.coerce(a,b,h,d,e)}e(b,m,n);n("columnwidth");n("header.values");n("header.format");n("header.align");n("header.prefix");n("header.suffix");n("header.height");n("header.line.width");n("header.line.color");n("header.fill.color");g.coerceFont(n,"header.font",g.extendFlat({},m.font));p(b,n);n("cells.values");n("cells.format");
n("cells.align");n("cells.prefix");n("cells.suffix");n("cells.height");n("cells.line.width");n("cells.line.color");n("cells.fill.color");g.coerceFont(n,"cells.font",g.extendFlat({},m.font));b._length=null}},{"../../lib":700,"../../plots/domain":773,"./attributes":1153}],1160:[function(a,t,m){m={};m.attributes=a("./attributes");m.supplyDefaults=a("./defaults");m.calc=a("./calc");m.plot=a("./plot");m.moduleType="trace";m.name="table";m.basePlotModule=a("./base_plot");m.categories=["noOpacity"];m.meta=
{};t.exports=m},{"./attributes":1153,"./base_plot":1154,"./calc":1155,"./defaults":1159,"./plot":1161}],1161:[function(a,t,m){function p(a){return Math.ceil(a.calcdata.maxLineWidth/2)}function g(a,b){return"clip"+a._fullLayout._uid+"_columnBoundaryClippath_"+b.calcdata.key+"_"+b.specIndex}function h(a){return[].concat.apply([],a.map(function(a){return a})).map(function(a){return a.__data__})}function e(a,b,c){var d=a.selectAll("."+J.cn.scrollbarKit).data(M.repeat,M.keyFun);d.enter().append("g").classed(J.cn.scrollbarKit,
!0).style("shape-rendering","geometricPrecision");d.each(function(a){var b=a.scrollbarState;var c=a.rowBlocks;c=K(c,c.length-1)+(c.length?I(c[c.length-1],Infinity):1);b.totalHeight=c;b.scrollableAreaHeight=a.groupHeight-w(a);b.currentlyVisibleHeight=Math.min(b.totalHeight,b.scrollableAreaHeight);b.ratio=b.currentlyVisibleHeight/b.totalHeight;b.barLength=Math.max(b.ratio*b.currentlyVisibleHeight,J.goldenRatio*J.scrollbarWidth);b.barWiggleRoom=b.currentlyVisibleHeight-b.barLength;b.wiggleRoom=Math.max(0,
b.totalHeight-b.scrollableAreaHeight);b.topY=0===b.barWiggleRoom?0:a.scrollY/b.wiggleRoom*b.barWiggleRoom;b.bottomY=b.topY+b.barLength;b.dragMultiplier=b.wiggleRoom/b.barWiggleRoom}).attr("transform",function(a){return"translate("+(a.width+J.scrollbarWidth/2+J.scrollbarOffset)+" "+w(a)+")"});d=d.selectAll("."+J.cn.scrollbar).data(M.repeat,M.keyFun);d.enter().append("g").classed(J.cn.scrollbar,!0);var e=d.selectAll("."+J.cn.scrollbarSlider).data(M.repeat,M.keyFun);e.enter().append("g").classed(J.cn.scrollbarSlider,
!0);e.attr("transform",function(a){return"translate(0 "+(a.scrollbarState.topY||0)+")"});e=e.selectAll("."+J.cn.scrollbarGlyph).data(M.repeat,M.keyFun);e.enter().append("line").classed(J.cn.scrollbarGlyph,!0).attr("stroke","black").attr("stroke-width",J.scrollbarWidth).attr("stroke-linecap","round").attr("y1",J.scrollbarWidth/2);e.attr("y2",function(a){return a.scrollbarState.barLength-J.scrollbarWidth/2}).attr("stroke-opacity",function(a){return a.columnDragInProgress||!a.scrollbarState.barWiggleRoom||
c?0:.4});e.transition().delay(0).duration(0);e.transition().delay(J.scrollbarHideDelay).duration(J.scrollbarHideDuration).attr("stroke-opacity",0);d=d.selectAll("."+J.cn.scrollbarCaptureZone).data(M.repeat,M.keyFun);d.enter().append("line").classed(J.cn.scrollbarCaptureZone,!0).attr("stroke","white").attr("stroke-opacity",.01).attr("stroke-width",J.scrollbarCaptureWidth).attr("stroke-linecap","butt").attr("y1",0).on("mousedown",function(c){var d=L.event.y,e=this.getBoundingClientRect(),f=c.scrollbarState;
d-=e.top;e=L.scale.linear().domain([0,f.scrollableAreaHeight]).range([0,f.totalHeight]).clamp(!0);f.topY<=d&&d<=f.bottomY||B(b,a,null,e(d-f.barLength/2))(c)}).call(L.behavior.drag().origin(function(a){L.event.stopPropagation();a.scrollbarState.scrollbarScrollInProgress=!0;return a}).on("drag",B(b,a)).on("dragend",function(){}));d.attr("y2",function(a){return a.scrollbarState.scrollableAreaHeight});b._context.staticPlot&&(e.remove(),d.remove())}function n(a,e,g,h){g=g.selectAll("."+J.cn.columnCells).data(M.repeat,
M.keyFun);g.enter().append("g").classed(J.cn.columnCells,!0);g.exit().remove();g=b(g);d(g);var m=l(g);c(m);m=q(g);m=u(m);f(m);k(m,e,h,a);E(g)}function b(a){a=a.selectAll("."+J.cn.columnCell).data(S.splitToCells,function(a){return a.keyWithinBlock});a.enter().append("g").classed(J.cn.columnCell,!0);a.exit().remove();return a}function l(a){a=a.selectAll("."+J.cn.cellRect).data(M.repeat,function(a){return a.keyWithinBlock});a.enter().append("rect").classed(J.cn.cellRect,!0);return a}function u(a){a=
a.selectAll("."+J.cn.cellText).data(M.repeat,function(a){return a.keyWithinBlock});a.enter().append("text").classed(J.cn.cellText,!0).style("cursor",function(){return"auto"}).on("mousedown",function(){L.event.stopPropagation()});return a}function q(a){a=a.selectAll("."+J.cn.cellTextHolder).data(M.repeat,function(a){return a.keyWithinBlock});a.enter().append("g").classed(J.cn.cellTextHolder,!0).style("shape-rendering","geometricPrecision");return a}function d(a){a.each(function(a,b){var c=a.calcdata.cells.font,
d=a.column.specIndex;c={size:v(c.size,d,b),color:v(c.color,d,b),family:v(c.family,d,b)};a.rowNumber=a.key;a.align=v(a.calcdata.cells.align,d,b);a.cellBorderWidth=v(a.calcdata.cells.line.width,d,b);a.font=c})}function f(a){a.each(function(a){N.font(L.select(this),a.font)})}function c(a){a.attr("width",function(a){return a.column.columnWidth}).attr("stroke-width",function(a){return a.cellBorderWidth}).each(function(a){var b=L.select(this);ba.stroke(b,v(a.calcdata.cells.line.color,a.column.specIndex,
a.rowNumber));ba.fill(b,v(a.calcdata.cells.fill.color,a.column.specIndex,a.rowNumber))})}function k(a,b,c,d){a.text(function(a){var b=a.column.specIndex,c=a.rowNumber,d=a.value,e="string"===typeof d,f=e&&d.match(/<br>/i),g=!e||f;a.mayHaveMarkup=e&&d.match(/[<&>]/);d="string"===typeof d&&d.match(J.latexCheck);e=(a.latex=d)?"":v(a.calcdata.cells.prefix,b,c)||"";var h=d?"":v(a.calcdata.cells.suffix,b,c)||"";b=d?null:v(a.calcdata.cells.format,b,c)||null;b=e+(b?L.format(b)(a.value):a.value)+h;var k;a.wrappingNeeded=
!a.wrapped&&!g&&!d&&(k=-1!==b.indexOf(J.wrapSplitCharacter));a.cellHeightMayIncrease=f||d||a.mayHaveMarkup||(void 0===k?-1!==b.indexOf(J.wrapSplitCharacter):k);a.needsConvertToTspans=a.mayHaveMarkup||a.wrappingNeeded||a.latex;a.wrappingNeeded?(f=(" "===J.wrapSplitCharacter?b.replace(/<a href=/ig,"\x3ca_href\x3d"):b).split(J.wrapSplitCharacter),f=" "===J.wrapSplitCharacter?f.map(function(a){return a.replace(/<a_href=/ig,"\x3ca href\x3d")}):f,a.fragments=f.map(function(a){return{text:a,width:null}}),
a.fragments.push({fragment:J.wrapSpacer,width:null}),a=f.join(J.lineBreaker)+J.lineBreaker+J.wrapSpacer):(delete a.fragments,a=b);return a}).attr("dy",function(a){return a.needsConvertToTspans?0:"0.75em"}).each(function(a){var e=L.select(this),f=a.wrappingNeeded?D:G;a.needsConvertToTspans?O.convertToTspans(e,d,f(c,this,b,d,a)):L.select(this.parentNode).attr("transform",function(a){return"translate("+H(a)+" "+J.cellPad+")"}).attr("text-anchor",function(a){return{left:"start",center:"middle",right:"end"}[a.align]})})}
function r(a,b,c){var d=b.gdColumnsOriginalOrder;b.gdColumns.sort(function(a,b){return c[d.indexOf(a)]-c[d.indexOf(b)]});b.columnorder=c;a.emit("plotly_restyle")}function v(a,b,c){return Array.isArray(a)?(a=a[Math.min(b,a.length-1)],Array.isArray(a)?a[Math.min(c,a.length-1)]:a):a}function z(a,b,c){a.transition().ease(J.releaseTransitionEase).duration(J.releaseTransitionDuration).attr("transform","translate("+b.x+" "+c+")")}function A(a){return"cells"===a.type}function y(a){return"header"===a.type}
function w(a){return(a.rowBlocks.length?a.rowBlocks[0].auxiliaryBlocks:[]).reduce(function(a,b){return a+I(b,Infinity)},0)}function x(a,b,c){for(var d=[],e=0,f=0;f<a.length;f++){for(var g=a[f],h=g.rows,k=0,l=0;l<h.length;l++)k+=h[l].rowHeight;g.allRowsHeight=k;g=b;h=g+c;g<e+k&&h>e&&d.push(f);e+=k}return d}function F(a,b,c){var d=h(b)[0];if(void 0!==d){var f=d.rowBlocks,g=d.calcdata,k=K(f,f.length),l=d.calcdata.groupHeight-w(d),m=g.scrollY=Math.max(0,Math.min(k-l,g.scrollY)),n=x(f,m,l);1===n.length&&
(n[0]===f.length-1?n.unshift(n[0]-1):n.push(n[0]+1));n[0]%2&&n.reverse();b.each(function(a,b){a.page=n[b];a.scrollY=m});b.attr("transform",function(a){return"translate(0 "+(K(a.rowBlocks,a.page)-a.scrollY)+")"});a&&(C(a,c,b,n,d.prevPages,d,0),C(a,c,b,n,d.prevPages,d,1),e(c,a))}}function B(a,b,c,d){return function(e){var f=e.calcdata?e.calcdata:e;e=b.filter(function(a){return f.key===a.key});var g=c||f.scrollbarState.dragMultiplier,h=f.scrollY;f.scrollY=void 0===d?f.scrollY+g*L.event.dy:d;g=e.selectAll("."+
J.cn.yColumn).selectAll("."+J.cn.columnBlock).filter(A);F(a,g,e);return f.scrollY===h}}function C(a,b,c,d,e,f,g){d[g]!==e[g]&&(clearTimeout(f.currentRepaint[g]),f.currentRepaint[g]=setTimeout(function(){var f=c.filter(function(a,b){return b===g&&d[b]!==e[b]});n(a,b,f,c);e[g]=d[g]}))}function D(a,b,c,d){return function(){var e=L.select(b.parentNode);e.each(function(a){var b=a.fragments;e.selectAll("tspan.line").each(function(a,c){b[c].width=this.getComputedTextLength()});var c=b[b.length-1].width,
d=b.slice(0,-1),f=[],g=0,h=a.column.columnWidth-2*J.cellPad;for(a.value="";d.length;){var k=d.shift();var l=k.width+c;g+l>h&&(a.value+=f.join(J.wrapSpacer)+J.lineBreaker,f=[],g=0);f.push(k.text);g+=l}g&&(a.value+=f.join(J.wrapSpacer));a.wrapped=!0});e.selectAll("tspan.line").remove();k(e.select("."+J.cn.cellText),c,a,d);L.select(b.parentNode.parentNode).call(E)}}function G(a,b,c,d,f){return function(){if(!f.settledY){var g=L.select(b.parentNode),h=f.rowBlocks[f.page],k=f.key-h.firstRowIndex,l=h.rows[k].rowHeight,
m=f.cellHeightMayIncrease?b.parentNode.getBoundingClientRect().height+2*J.cellPad:l;l=Math.max(m,l);l-h.rows[k].rowHeight&&(h.rows[k].rowHeight=l,a.selectAll("."+J.cn.columnCell).call(E),F(null,a.filter(A),0),e(c,d,!0));g.attr("transform",function(){var a=this.parentNode.getBoundingClientRect(),b=L.select(this.parentNode).select("."+J.cn.cellRect).node().getBoundingClientRect(),c=this.transform.baseVal.consolidate();a=b.top-a.top+(c?c.matrix.f:J.cellPad);return"translate("+H(f,L.select(this.parentNode).select("."+
J.cn.cellTextHolder).node().getBoundingClientRect().width)+" "+a+")"});f.settledY=!0}}}function H(a,b){switch(a.align){case "left":return J.cellPad;case "right":return a.column.columnWidth-(b||0)-J.cellPad;case "center":return(a.column.columnWidth-(b||0))/2;default:return J.cellPad}}function E(a){a.attr("transform",function(a){var b=a.rowBlocks[0].auxiliaryBlocks.reduce(function(a,b){return a+I(b,Infinity)},0);return"translate(0 "+(I(a.rowBlocks[a.page],a.key)+b)+")"}).selectAll("."+J.cn.cellRect).attr("height",
function(a){var b=a.rowBlocks[a.page];return b.rows[a.key-b.firstRowIndex].rowHeight})}function K(a,b){var c=0;for(--b;0<=b;b--){var d=a[b];var e=d.allRowsHeight;if(void 0!==e)d=e;else{for(var f=e=0;f<d.rows.length;f++)e+=d.rows[f].rowHeight;d=d.allRowsHeight=e}c+=d}return c}function I(a,b){for(var c=0,d=0;d<a.rows.length&&a.rows[d].rowIndex<b;d++)c+=a.rows[d].rowHeight;return c}var J=a("./constants"),L=a("d3"),M=a("../../lib/gup"),N=a("../../components/drawing"),O=a("../../lib/svg_text_utils"),R=
a("../../lib").raiseToTop,T=a("../../lib").cancelTransition,P=a("./data_preparation_helper"),S=a("./data_split_helpers"),ba=a("../../components/color");t.exports=function(a,b){var c=!a._context.staticPlot;b=a._fullLayout._paper.selectAll("."+J.cn.table).data(b.map(function(b){b=M.unwrap(b).trace;return P(a,b)}),M.keyFun);b.exit().remove();b.enter().append("g").classed(J.cn.table,!0).attr("overflow","visible").style("box-sizing","content-box").style("position","absolute").style("left",0).style("overflow",
"visible").style("shape-rendering","crispEdges").style("pointer-events","all");b.attr("width",function(a){return a.width+a.size.l+a.size.r}).attr("height",function(a){return a.height+a.size.t+a.size.b}).attr("transform",function(a){return"translate("+a.translateX+","+a.translateY+")"});var d=b.selectAll("."+J.cn.tableControlView).data(M.repeat,M.keyFun);b=d.enter().append("g").classed(J.cn.tableControlView,!0).style("box-sizing","content-box");c&&b.on("mousemove",function(b){d.filter(function(a){return b===
a}).call(e,a)}).on("mousewheel",function(b){b.scrollbarState.wheeling||(b.scrollbarState.wheeling=!0,B(a,d,null,b.scrollY+L.event.deltaY)(b)||(L.event.stopPropagation(),L.event.preventDefault()),b.scrollbarState.wheeling=!1)}).call(e,a,!0);d.attr("transform",function(a){return"translate("+a.size.l+" "+a.size.t+")"});b=d.selectAll("."+J.cn.scrollBackground).data(M.repeat,M.keyFun);b.enter().append("rect").classed(J.cn.scrollBackground,!0).attr("fill","none");b.attr("width",function(a){return a.width}).attr("height",
function(a){return a.height});d.each(function(b){N.setClipUrl(L.select(this),"clip"+a._fullLayout._uid+"_scrollAreaBottomClip_"+b.key,a)});var f=d.selectAll("."+J.cn.yColumn).data(function(a){return a.columns},M.keyFun);f.enter().append("g").classed(J.cn.yColumn,!0);f.exit().remove();f.attr("transform",function(a){return"translate("+a.x+" 0)"});c&&f.call(L.behavior.drag().origin(function(b){var c=L.select(this);z(c,b,-J.uplift);R(this);b.calcdata.columnDragInProgress=!0;e(d.filter(function(a){return b.calcdata.key===
a.key}),a);return b}).on("drag",function(a){var b=L.select(this);a.x=Math.max(-J.overdrag,Math.min(a.calcdata.width+J.overdrag-a.columnWidth,L.event.x));h(f).filter(function(b){return b.calcdata.key===a.calcdata.key}).sort(function(b,c){return(a===b?L.event.x:b.x)+b.columnWidth/2-((a===c?L.event.x:c.x)+c.columnWidth/2)}).forEach(function(b,c){b.xIndex=c;b.x=a===b?b.x:b.xScale(b)});f.filter(function(b){return a!==b}).transition().ease(J.transitionEase).duration(J.transitionDuration).attr("transform",
function(a){return"translate("+a.x+" 0)"});b.call(T).attr("transform","translate("+a.x+" -"+J.uplift+" )")}).on("dragend",function(b){var c=L.select(this),d=b.calcdata;b.x=b.xScale(b);b.calcdata.columnDragInProgress=!1;z(c,b,0);r(a,d,d.columns.map(function(a){return a.xIndex}))}));f.each(function(b){N.setClipUrl(L.select(this),g(a,b),a)});var k=f.selectAll("."+J.cn.columnBlock).data(S.splitToPanels,M.keyFun);k.enter().append("g").classed(J.cn.columnBlock,!0).attr("id",function(a){return a.key});k.style("cursor",
function(a){return a.dragHandle?"ew-resize":a.calcdata.scrollbarState.barWiggleRoom?"ns-resize":"default"});var l=k.filter(y);b=k.filter(A);c&&b.call(L.behavior.drag().origin(function(a){L.event.stopPropagation();return a}).on("drag",B(a,d,-1)).on("dragend",function(){}));n(a,d,l,k);n(a,d,b,k);c=d.selectAll("."+J.cn.scrollAreaClip).data(M.repeat,M.keyFun);c.enter().append("clipPath").classed(J.cn.scrollAreaClip,!0).attr("id",function(b){return"clip"+a._fullLayout._uid+"_scrollAreaBottomClip_"+b.key});
c=c.selectAll("."+J.cn.scrollAreaClipRect).data(M.repeat,M.keyFun);c.enter().append("rect").classed(J.cn.scrollAreaClipRect,!0).attr("x",-J.overdrag).attr("y",-J.uplift).attr("fill","none");c.attr("width",function(a){return a.width+2*J.overdrag}).attr("height",function(a){return a.height+J.uplift});f.selectAll("."+J.cn.columnBoundary).data(M.repeat,M.keyFun).enter().append("g").classed(J.cn.columnBoundary,!0);c=f.selectAll("."+J.cn.columnBoundaryClippath).data(M.repeat,M.keyFun);c.enter().append("clipPath").classed(J.cn.columnBoundaryClippath,
!0);c.attr("id",function(b){return g(a,b)});c=c.selectAll("."+J.cn.columnBoundaryRect).data(M.repeat,M.keyFun);c.enter().append("rect").classed(J.cn.columnBoundaryRect,!0).attr("fill","none");c.attr("width",function(a){return a.columnWidth+2*p(a)}).attr("height",function(a){return a.calcdata.height+2*p(a)+J.uplift}).attr("x",function(a){return-p(a)}).attr("y",function(a){return-p(a)});F(null,b,d)}},{"../../components/color":577,"../../components/drawing":598,"../../lib":700,"../../lib/gup":698,"../../lib/svg_text_utils":724,
"./constants":1156,"./data_preparation_helper":1157,"./data_split_helpers":1158,d3:154}],1162:[function(a,t,m){m=a("../box/attributes");a=a("../../lib/extend").extendFlat;t.exports={y:m.y,x:m.x,x0:m.x0,y0:m.y0,name:a({},m.name,{}),orientation:a({},m.orientation,{}),bandwidth:{valType:"number",min:0,editType:"calc"},scalegroup:{valType:"string",dflt:"",editType:"calc"},scalemode:{valType:"enumerated",values:["width","count"],dflt:"width",editType:"calc"},spanmode:{valType:"enumerated",values:["soft",
"hard","manual"],dflt:"soft",editType:"calc"},span:{valType:"info_array",items:[{valType:"any",editType:"calc"},{valType:"any",editType:"calc"}],editType:"calc"},line:{color:{valType:"color",editType:"style"},width:{valType:"number",min:0,dflt:2,editType:"style"},editType:"plot"},fillcolor:m.fillcolor,points:a({},m.boxpoints,{}),jitter:a({},m.jitter,{}),pointpos:a({},m.pointpos,{}),width:a({},m.width,{}),marker:m.marker,text:m.text,hovertext:m.hovertext,hovertemplate:m.hovertemplate,box:{visible:{valType:"boolean",
dflt:!1,editType:"plot"},width:{valType:"number",min:0,max:1,dflt:.25,editType:"plot"},fillcolor:{valType:"color",editType:"style"},line:{color:{valType:"color",editType:"style"},width:{valType:"number",min:0,editType:"style"},editType:"style"},editType:"plot"},meanline:{visible:{valType:"boolean",dflt:!1,editType:"plot"},color:{valType:"color",editType:"style"},width:{valType:"number",min:0,editType:"style"},editType:"plot"},side:{valType:"enumerated",values:["both","positive","negative"],dflt:"both",
editType:"calc"},offsetgroup:m.offsetgroup,alignmentgroup:m.alignmentgroup,selected:m.selected,unselected:m.unselected,hoveron:{valType:"flaglist",flags:["violins","points","kde"],dflt:"violins+points+kde",extras:["all"],editType:"style"}}},{"../../lib/extend":690,"../box/attributes":862}],1163:[function(a,t,m){function p(a,e,g,d){function f(c){var d=k[c];d="multicategory"===g.type?g.r2c(d):g.d2c(d,0,a[e.valLetter+"calendar"]);return d===b?m[c]:d}var c=a.spanmode,k=a.span||[],l=[e.min,e.max],m=[e.min-
2*d,e.max+2*d];d="soft"===c?m:"hard"===c?l:[f(0),f(1)];c={type:"linear",range:d};h.setConvert(c);c.cleanRange();return d}var g=a("../../lib"),h=a("../../plots/cartesian/axes"),e=a("../box/calc"),n=a("./helpers"),b=a("../../constants/numerical").BADNUM;t.exports=function(a,b){var l=e(a,b);if(l[0].t.empty)return l;for(var d=a._fullLayout,f=h.getFromId(a,b["h"===b.orientation?"xaxis":"yaxis"]),c=Infinity,k=-Infinity,m=0,t=0,u=0;u<l.length;u++){var A=l[u],y=A.pts.map(n.extractVal),w=A;var x=A;var F=x.max-
x.min;if(F)if(b.bandwidth)x=Math.max(b.bandwidth,F/1E4);else{var B=y.length,C=g.stdev(y,B-1,x.mean);x=Math.max(1.059*Math.min(C,(x.q3-x.q1)/1.349)*Math.pow(B,-.2),F/100)}else x=b.bandwidth?b.bandwidth:0;F=w.bandwidth=x;w=A.span=p(b,A,f,F);if(A.min===A.max&&0===F)w=A.span=[A.min,A.max],A.density=[{v:1,t:w[0]}],A.bandwidth=F,m=Math.max(m,1);else{x=w[1]-w[0];B=Math.ceil(x/(F/3));x/=B;if(!isFinite(x)||!isFinite(B))return g.error("Something went wrong with computing the violin span"),l[0].t.empty=!0,l;
F=n.makeKDE(A,b,y);A.density=Array(B);B=0;for(C=w[0];C<w[1]+x/2;B++,C+=x){var D=F(C);A.density[B]={v:D,t:C};m=Math.max(m,D)}}t=Math.max(t,y.length);c=Math.min(c,w[0]);k=Math.max(k,w[1])}c=h.findExtremes(f,[c,k],{padded:!0});b._extremes[f._id]=c;b.width?l[0].t.maxKDE=m:(d=d._violinScaleGroupStats,b=b.scalegroup,(f=d[b])?(f.maxKDE=Math.max(f.maxKDE,m),f.maxCount=Math.max(f.maxCount,t)):d[b]={maxKDE:m,maxCount:t});l[0].t.labels.kde=g._(a,"kde:");return l}},{"../../constants/numerical":677,"../../lib":700,
"../../plots/cartesian/axes":748,"../box/calc":863,"./helpers":1166}],1164:[function(a,t,m){var p=a("../box/cross_trace_calc").setPositionOffset,g=["v","h"];t.exports=function(a,e){var h=a.calcdata,b=e.xaxis;e=e.yaxis;for(var l=0;l<g.length;l++){for(var m=g[l],q="h"===m?e:b,d=[],f=0;f<h.length;f++){var c=h[f],k=c[0].t;c=c[0].trace;!0!==c.visible||"violin"!==c.type||k.empty||c.orientation!==m||c.xaxis!==b._id||c.yaxis!==e._id||d.push(f)}p("violin",a,d,q)}}},{"../box/cross_trace_calc":864}],1165:[function(a,
t,m){var p=a("../../lib"),g=a("../../components/color"),h=a("../box/defaults"),e=a("./attributes");t.exports=function(a,b,l,m){function n(c,d){return p.coerce(a,b,e,c,d)}function d(c,d){return p.coerce2(a,b,e,c,d)}h.handleSampleDefaults(a,b,n,m);if(!1!==b.visible){n("bandwidth");n("side");n("width")||(n("scalegroup",b.name),n("scalemode"));m=n("span");var f;Array.isArray(m)&&(f="manual");n("spanmode",f);f=n("line.color",(a.marker||{}).color||l);l=n("line.width");var c=n("fillcolor",g.addOpacity(b.line.color,
.5));h.handlePointsDefaults(a,b,n,{prefix:""});m=d("box.width");c=d("box.fillcolor",c);var k=d("box.line.color",f),r=d("box.line.width",l);n("box.visible",!!(m||c||k||r))||(b.box={visible:!1});f=d("meanline.color",f);l=d("meanline.width",l);n("meanline.visible",!(!f&&!l))||(b.meanline={visible:!1})}}},{"../../components/color":577,"../../lib":700,"../box/defaults":865,"./attributes":1162}],1166:[function(a,t,m){var p=a("../../lib");m.makeKDE=function(a,h,e){var g=e.length,b=a.bandwidth,l=1/(g*b);
return function(a){for(var h=0,d=0;d<g;d++){var f=(a-e[d])/b;h+=1/Math.sqrt(2*Math.PI)*Math.exp(-.5*f*f)}return l*h}};m.getPositionOnKdePath=function(a,h,e){if("h"===h.orientation){var g="y";var b="x"}else g="x",b="y";e=p.findPointOnPath(a.path,e,b,{pathLength:a.pathLength});a=a.posCenterPx;g=e[g];return[g,"both"===h.side?2*a-g:a]};m.getKdeValue=function(a,h,e){var g=a.pts.map(m.extractVal);return m.makeKDE(a,h,g)(e)/a.posDensityScale};m.extractVal=function(a){return a.v}},{"../../lib":700}],1167:[function(a,
t,m){var p=a("../../lib"),g=a("../../plots/cartesian/axes"),h=a("../box/hover"),e=a("./helpers");t.exports=function(a,b,l,m,q){var d=a.cd,f=d[0].trace,c=f.hoveron,k=-1!==c.indexOf("violins"),n=-1!==c.indexOf("kde"),t=[],u;if(k||n){var A=h.hoverOnBoxes(a,b,l,m);k&&(t=t.concat(A));if(n&&0<A.length){var y=a.xa,w=a.ya;if("h"===f.orientation){var x=b;k="y";var F=w;n="x"}else x=l,k="x",F=y,n="y",y=w;var B=d[a.index];if(x>=B.span[0]&&x<=B.span[1]){var C=p.extendFlat({},a);w=y.c2p(x,!0);var D=e.getKdeValue(B,
f,x);B=e.getPositionOnKdePath(B,f,w);var G=F._offset;F=F._length;C[k+"0"]=B[0];C[k+"1"]=B[1];C[n+"0"]=C[n+"1"]=w;C[n+"Label"]=n+": "+g.hoverLabelText(y,x)+", "+d[0].t.labels.kde+" "+D.toFixed(3);C.spikeDistance=A[0].spikeDistance;d=k+"Spike";C[d]=A[0][d];A[0].spikeDistance=void 0;A[0][d]=void 0;C.hovertemplate=!1;t.push(C);C={stroke:a.color};C[k+"1"]=p.constrain(G+B[0],G,G+F);C[k+"2"]=p.constrain(G+B[1],G,G+F);C[n+"1"]=C[n+"2"]=y._offset+w}}}-1!==c.indexOf("points")&&(u=h.hoverOnPoints(a,b,l));a=
q.selectAll(".violinline-"+f.uid).data(C?[0]:[]);a.enter().append("line").classed("violinline-"+f.uid,!0).attr("stroke-width",1.5);a.exit().remove();a.attr(C);if("closest"===m)return u?[u]:t;u&&t.push(u);return t}},{"../../lib":700,"../../plots/cartesian/axes":748,"../box/hover":867,"./helpers":1166}],1168:[function(a,t,m){t.exports={attributes:a("./attributes"),layoutAttributes:a("./layout_attributes"),supplyDefaults:a("./defaults"),crossTraceDefaults:a("../box/defaults").crossTraceDefaults,supplyLayoutDefaults:a("./layout_defaults"),
calc:a("./calc"),crossTraceCalc:a("./cross_trace_calc"),plot:a("./plot"),style:a("./style"),styleOnSelect:a("../scatter/style").styleOnSelect,hoverPoints:a("./hover"),selectPoints:a("../box/select"),moduleType:"trace",name:"violin",basePlotModule:a("../../plots/cartesian"),categories:"cartesian svg symbols oriented box-violin showLegend violinLayout zoomScale".split(" "),meta:{}}},{"../../plots/cartesian":759,"../box/defaults":865,"../box/select":872,"../scatter/style":1074,"./attributes":1162,"./calc":1163,
"./cross_trace_calc":1164,"./defaults":1165,"./hover":1167,"./layout_attributes":1169,"./layout_defaults":1170,"./plot":1171,"./style":1172}],1169:[function(a,t,m){m=a("../box/layout_attributes");a=a("../../lib").extendFlat;t.exports={violinmode:a({},m.boxmode,{}),violingap:a({},m.boxgap,{}),violingroupgap:a({},m.boxgroupgap,{})}},{"../../lib":700,"../box/layout_attributes":869}],1170:[function(a,t,m){var p=a("../../lib"),g=a("./layout_attributes"),h=a("../box/layout_defaults");t.exports=function(a,
m,b){h._supply(a,m,b,function(b,e){return p.coerce(a,m,g,b,e)},"violin")}},{"../../lib":700,"../box/layout_defaults":870,"./layout_attributes":1169}],1171:[function(a,t,m){var p=a("d3"),g=a("../../lib"),h=a("../../components/drawing"),e=a("../box/plot"),n=a("../scatter/line_points"),b=a("./helpers");t.exports=function(a,m,q,d){function f(a){a=n(a,{xaxis:k,yaxis:l,connectGaps:!0,baseTolerance:.75,shape:"spline",simplify:!0});return h.smoothopen(a[0],1)}var c=a._fullLayout,k=m.xaxis,l=m.yaxis;g.makeTraceGroups(d,
q,"trace violins").each(function(a){var d=p.select(this);a=a[0];var h=a.t,n=a.trace;m.isRangePlot||(a.node3=d);if(!0!==n.visible||h.empty)d.remove();else{var q=h.bPos,r=h.bdPos,t=m[h.valLetter+"axis"],u=m[h.posLetter+"axis"],v="both"===n.side,D=v||"positive"===n.side,G=v||"negative"===n.side;a=d.selectAll("path.violin").data(g.identity);a.enter().append("path").style("vector-effect","non-scaling-stroke").attr("class","violin");a.exit().remove();a.each(function(a){var b=p.select(this),d=a.density,
e=d.length,g=a.pos+q,k=u.c2p(g);if(n.width)var l=h.maxKDE/r;else l=c._violinScaleGroupStats[n.scalegroup],l="count"===n.scalemode?l.maxKDE/r*(l.maxCount/a.pts.length):l.maxKDE/r;var m;if(D){var w=Array(e);for(m=0;m<e;m++){var y=w[m]={};y[h.posLetter]=g+d[m].v/l;y[h.valLetter]=d[m].t}var x=f(w)}if(G){w=Array(e);var z=0;for(m=e-1;z<e;z++,m--)y=w[z]={},y[h.posLetter]=g-d[m].v/l,y[h.valLetter]=d[m].t;z=f(w)}v?x=x+"L"+z.substr(1)+"Z":(g=[k,t.c2p(d[0].t)],d=[k,t.c2p(d[e-1].t)],"h"===n.orientation&&(g.reverse(),
d.reverse()),x=D?"M"+g+"L"+x.substr(1)+"L"+d:"M"+d+"L"+z.substr(1)+"L"+g);b.attr("d",x);a.posCenterPx=k;a.posDensityScale=l*r;a.path=b.node();a.pathLength=a.path.getTotalLength()/(v?2:1)});var H=n.box;a=H.width;H=(H.line||{}).width;v?(a*=r,H=0):D?(a=[0,r*a/2],H=-H):a=[r*a/2,0];e.plotBoxAndWhiskers(d,{pos:u,val:t},n,{bPos:q,bdPos:a,bPosPxOffset:H});e.plotBoxMean(d,{pos:u,val:t},n,{bPos:q,bdPos:a,bPosPxOffset:H});if(!n.box.visible&&n.meanline.visible)var E=g.identity;E=d.selectAll("path.meanline").data(E||
[]);E.enter().append("path").attr("class","meanline").style("fill","none").style("vector-effect","non-scaling-stroke");E.exit().remove();E.each(function(a){var c=t.c2p(a.mean,!0);a=b.getPositionOnKdePath(a,n,c);p.select(this).attr("d","h"===n.orientation?"M"+c+","+a[0]+"V"+a[1]:"M"+a[0]+","+c+"H"+a[1])});e.plotPoints(d,{x:k,y:l},n,h)}})}},{"../../components/drawing":598,"../../lib":700,"../box/plot":871,"../scatter/line_points":1065,"./helpers":1166,d3:154}],1172:[function(a,t,m){var p=a("d3"),g=
a("../../components/color"),h=a("../scatter/style").stylePoints;t.exports=function(a,m){m=m?m[0].node3:p.select(a).selectAll("g.trace.violins");m.style("opacity",function(a){return a[0].trace.opacity});m.each(function(b){b=b[0].trace;var e=p.select(this),m=b.box||{},n=m.line||{},d=b.meanline||{},f=d.width;e.selectAll("path.violin").style("stroke-width",b.line.width+"px").call(g.stroke,b.line.color).call(g.fill,b.fillcolor);e.selectAll("path.box").style("stroke-width",n.width+"px").call(g.stroke,n.color).call(g.fill,
m.fillcolor);m={"stroke-width":f+"px","stroke-dasharray":2*f+"px,"+f+"px"};e.selectAll("path.mean").style(m).call(g.stroke,d.color);e.selectAll("path.meanline").style(m).call(g.stroke,d.color);h(e,b,a)})}},{"../../components/color":577,"../scatter/style":1074,d3:154}],1173:[function(a,t,m){function p(a){return{marker:{color:h({},g.marker.color,{arrayOk:!1,editType:"style"}),line:{color:h({},g.marker.line.color,{arrayOk:!1,editType:"style"}),width:h({},g.marker.line.width,{arrayOk:!1,editType:"style"}),
editType:"style"},editType:"style"},editType:"style"}}var g=a("../bar/attributes");m=a("../scatter/attributes").line;var h=a("../../lib/extend").extendFlat;t.exports={measure:{valType:"data_array",dflt:[],editType:"calc"},base:{valType:"number",dflt:null,arrayOk:!1,editType:"calc"},x:g.x,x0:g.x0,dx:g.dx,y:g.y,y0:g.y0,dy:g.dy,hovertext:g.hovertext,hovertemplate:g.hovertemplate,text:g.text,textposition:g.textposition,textfont:g.textfont,insidetextfont:g.insidetextfont,outsidetextfont:g.outsidetextfont,
constraintext:g.constraintext,cliponaxis:g.cliponaxis,orientation:g.orientation,offset:g.offset,width:g.width,increasing:p("increasing"),decreasing:p("decreasing"),totals:p("intermediate sums and total"),connector:{line:{color:m.color,width:m.width,dash:m.dash,editType:"plot"},mode:{valType:"enumerated",values:["spanning","between"],dflt:"between",editType:"plot"},visible:{valType:"boolean",dflt:!0,editType:"plot"},editType:"plot"},offsetgroup:g.offsetgroup,alignmentgroup:g.offsetgroup}},{"../../lib/extend":690,
"../bar/attributes":839,"../scatter/attributes":1051}],1174:[function(a,t,m){function p(a){return"a"===a||"absolute"===a}function g(a){return"t"===a||"total"===a}var h=a("../../plots/cartesian/axes"),e=a("../../lib").mergeArray,n=a("../scatter/calc_selection"),b=a("../../constants/numerical").BADNUM;t.exports=function(a,m){var l=h.getFromId(a,m.xaxis||"x"),d=h.getFromId(a,m.yaxis||"y");"h"===m.orientation?(a=l.makeCalcdata(m,"x"),l=d.makeCalcdata(m,"y")):(a=d.makeCalcdata(m,"y"),l=l.makeCalcdata(m,
"x"));d=Math.min(l.length,a.length);for(var f=Array(d),c=0,k,r=!1,t=0;t<d;t++){k=a[t]||0;var u=!1;(a[t]!==b||g(m.measure[t])||p(m.measure[t]))&&t+1<d&&(a[t+1]!==b||g(m.measure[t+1])||p(m.measure[t+1]))&&(u=!0);u=f[t]={i:t,p:l[t],s:k,rawS:k,cNext:u};p(m.measure[t])?(c=u.s,u.isSum=!0,u.dir="totals",u.s=c):g(m.measure[t])?(u.isSum=!0,u.dir="totals",u.s=c):(u.isSum=!1,u.dir=0>u.rawS?"decreasing":"increasing",k=u.s,u.s=c+k,c+=k);"totals"===u.dir&&(r=!0);m.ids&&(u.id=String(m.ids[t]))}f[0].hasTotals=r;
e(m.text,f,"tx");e(m.hovertext,f,"htx");n(f,m);return f}},{"../../constants/numerical":677,"../../lib":700,"../../plots/cartesian/axes":748,"../scatter/calc_selection":1053}],1175:[function(a,t,m){var p=a("../bar/cross_trace_calc").setGroupPositions;t.exports=function(a,h){var e=a._fullLayout,g=a._fullData,b=a.calcdata;a=h.xaxis;var l=h.yaxis;h=[];var m=[],q=[],d;for(d=0;d<g.length;d++){var f=g[d];if(!0===f.visible&&f.xaxis===a._id&&f.yaxis===l._id&&"waterfall"===f.type){var c=b[d];"h"===f.orientation?
q.push(c):m.push(c);h.push(c)}}e={_fullLayout:{_axisMatchGroups:e._axisMatchGroups,_alignmentOpts:e._alignmentOpts,barmode:e.waterfallmode,bargap:e.waterfallgap,bargroupgap:e.waterfallgroupgap}};p(e,a,l,m);p(e,l,a,q);for(d=0;d<h.length;d++)for(c=h[d],e=0;e<c.length;e++)g=c[e],!1===g.isSum&&(g.s0+=0===e?0:c[e-1].s)}},{"../bar/cross_trace_calc":842}],1176:[function(a,t,m){function p(a,b,d){a(b+".marker.color",d);a(b+".marker.line.color",l.defaultLine);a(b+".marker.line.width")}var g=a("../../lib"),
h=a("../bar/defaults").handleGroupingDefaults,e=a("../bar/defaults").handleText,n=a("../scatter/xy_defaults"),b=a("./attributes"),l=a("../../components/color");t.exports={supplyDefaults:function(a,h,d,f){function c(c,d){return g.coerce(a,h,b,c,d)}n(a,h,f,c)?(c("measure"),c("orientation",h.x&&!h.y?"h":"v"),c("base"),c("offset"),c("width"),c("text"),c("hovertext"),c("hovertemplate"),e(a,h,f,c,!1),p(c,"increasing","#3D9970"),p(c,"decreasing","#FF4136"),p(c,"totals","#4499FF"),c("connector.visible")&&
(c("connector.mode"),c("connector.line.width")&&(c("connector.line.color"),c("connector.line.dash")))):h.visible=!1},crossTraceDefaults:function(a,e){function d(a){return g.coerce(c._input,c,b,a)}if("group"===e.waterfallmode)for(var f=0;f<a.length;f++){var c=a[f];var k=c._input;h(k,c,e,d)}},handleGroupingDefaults:h}},{"../../components/color":577,"../../lib":700,"../bar/defaults":843,"../scatter/xy_defaults":1077,"./attributes":1173}],1177:[function(a,t,m){var p=a("../../plots/cartesian/axes").hoverLabelText,
g=a("../../components/color").opacity,h=a("../bar/hover").hoverOnBars;t.exports=function(a,m,b,l){if(m=h(a,m,b,l)){var e=m.cd;b=e[0].trace;a=(l="h"===b.orientation)?a.xa:a.ya;e=e[m.index];l=l?"x":"y";var n=e.isSum?e.b+e.s:e.rawS;if(e.isSum)m[l+"LabelVal"]=p(a,n);else{if(0<n)m.extraText=p(a,n)+" ";else if(0>n)m.extraText="("+p(a,-n)+") ";else return;m.extraText+="\x3cbr\x3eInitial: "+p(a,e.b+e.s-n)}l=b[e.dir].marker;b=l.color;a=l.line.color;l=l.line.width;b=g(b)?b:g(a)&&l?a:void 0;m.color=b;return[m]}}},
{"../../components/color":577,"../../plots/cartesian/axes":748,"../bar/hover":845}],1178:[function(a,t,m){m={};m.attributes=a("./attributes");m.layoutAttributes=a("./layout_attributes");m.supplyDefaults=a("./defaults").supplyDefaults;m.crossTraceDefaults=a("./defaults").crossTraceDefaults;m.supplyLayoutDefaults=a("./layout_defaults");m.calc=a("./calc");m.crossTraceCalc=a("./cross_trace_calc");m.plot=a("./plot");m.style=a("./style").style;m.hoverPoints=a("./hover");m.selectPoints=a("../bar/select");
m.moduleType="trace";m.name="waterfall";m.basePlotModule=a("../../plots/cartesian");m.categories=["cartesian","svg","oriented","showLegend","zoomScale"];m.meta={};t.exports=m},{"../../plots/cartesian":759,"../bar/select":850,"./attributes":1173,"./calc":1174,"./cross_trace_calc":1175,"./defaults":1176,"./hover":1177,"./layout_attributes":1179,"./layout_defaults":1180,"./plot":1181,"./style":1182}],1179:[function(a,t,m){t.exports={waterfallmode:{valType:"enumerated",values:["group","overlay"],dflt:"group",
editType:"calc"},waterfallgap:{valType:"number",min:0,max:1,editType:"calc"},waterfallgroupgap:{valType:"number",min:0,max:1,dflt:0,editType:"calc"}}},{}],1180:[function(a,t,m){var p=a("../../lib"),g=a("./layout_attributes");t.exports=function(a,e,m){for(var b=!1,h=0;h<m.length;h++){var n=m[h];if(n.visible&&"waterfall"===n.type){b=!0;break}}b&&(p.coerce(a,e,g,"waterfallmode",void 0),p.coerce(a,e,g,"waterfallgap",.2),p.coerce(a,e,g,"waterfallgroupgap",void 0))}},{"../../lib":700,"./layout_attributes":1179}],
1181:[function(a,t,m){function p(a,l,m,n){var b=l.xaxis,f=l.yaxis;h.makeTraceGroups(n,m,"trace bars").each(function(c){var d=g.select(this);c=c[0];var m=c.trace,n=h.ensureSingle(d,"g","lines");if(m.connector&&m.connector.visible){var p="h"===m.orientation,q=m.connector.mode;l.isRangePlot||(c.node3=d);d=n.selectAll("g.line").data(h.identity);d.enter().append("g").classed("line",!0);d.exit().remove();var t=d.size();d.each(function(c,d){if(d===t-1||c.cNext){var k=g.select(this),n="",r=0;d+1<t&&Array.isArray(m.offset)&&
(r-=m.offset[d+1]-m.offset[d]);if(p){var u=b.c2p(c.s1,!0);var v=f.c2p(c.p1,!0);var w=b.c2p(c.s0,!0);var y=f.c2p(c.p0,!0);var x=b.c2p(c.s1,!0);var z=f.c2p(c.p1,!0);if(d+1<t){var A=b.c2p(c.s0+1-r,!0);var L=f.c2p(c.p0+1-r,!0)}}else u=b.c2p(c.p1,!0),v=f.c2p(c.s1,!0),w=b.c2p(c.p0,!0),y=f.c2p(c.s0,!0),x=b.c2p(c.p1,!0),z=f.c2p(c.s1,!0),d+1<t&&(A=b.c2p(c.p0+1-r,!0),L=f.c2p(c.s0+1-r,!0));"spanning"===q&&!c.isSum&&0<d&&(n=p?n+("M"+w+","+v+"V"+y):n+("M"+u+","+y+"H"+w));"between"!==q&&(c.isSum||d<t-1)&&(n=p?
n+("M"+x+","+y+"V"+z):n+("M"+w+","+z+"H"+x));void 0!==A&&void 0!==L&&(n=p?n+("M"+x+","+z+"V"+L):n+("M"+x+","+z+"H"+A));h.ensureSingle(k,"path").attr("d",n).call(e.setClipUrl,l.layerClipId,a)}})}else n.remove()})}var g=a("d3"),h=a("../../lib"),e=a("../../components/drawing"),n=a("../bar/plot");t.exports=function(a,e,g,h){n(a,e,g,h);p(a,e,g,h)}},{"../../components/drawing":598,"../../lib":700,"../bar/plot":849,d3:154}],1182:[function(a,t,m){var p=a("d3"),g=a("../../components/drawing"),h=a("../../components/color"),
e=a("../bar/style").styleTextPoints;t.exports={style:function(a,b){b=b?b[0].node3:p.select(a).selectAll("g.waterfalllayer").selectAll("g.trace");b.style("opacity",function(a){return a[0].trace.opacity});b.each(function(b){var l=p.select(this),m=b[0].trace;l.selectAll(".point \x3e path").each(function(a){var b=m[a.dir].marker;p.select(this).call(h.fill,b.color).call(h.stroke,b.line.color).call(g.dashLine,b.line.dash,b.line.width).style("opacity",m.selectedpoints&&!a.selected?.3:1)});e(l,m,a);l.selectAll(".lines").each(function(){var a=
p.select(this),b=m.connector.line;g.lineGroupStyle(a.selectAll("path"),b.width,b.color,b.dash)})})}}},{"../../components/color":577,"../../components/drawing":598,"../bar/style":852,d3:154}],1183:[function(a,t,m){function p(a,c,d,e){if(e.enabled){var f=e.target,h=l.nestedProperty(c,f),k=h.get();a=b.getDataConversions(a,c,f,k);a=g(e,a);for(var m=Array(d.length),n=0;n<d.length;n++)m[n]=a(k,d[n]);h.set(m);"count"===e.func&&l.pushUnique(c._arrayAttrs,f)}}function g(a,b){var c=b.d2c,f=b.c2d;switch(a.func){case "count":return h;
case "first":return e;case "last":return n;case "sum":return function(a,b){for(var e=0,g=0;g<b.length;g++){var h=c(a[b[g]]);h!==d&&(e+=h)}return f(e)};case "avg":return function(a,b){for(var e=0,g=0,h=0;h<b.length;h++){var k=c(a[b[h]]);k!==d&&(e+=k,g++)}return g?f(e/g):d};case "min":return function(a,b){for(var e=Infinity,g=0;g<b.length;g++){var h=c(a[b[g]]);h!==d&&(e=Math.min(e,h))}return Infinity===e?d:f(e)};case "max":return function(a,b){for(var e=-Infinity,g=0;g<b.length;g++){var h=c(a[b[g]]);
h!==d&&(e=Math.max(e,h))}return-Infinity===e?d:f(e)};case "range":return function(a,b){for(var e=Infinity,g=-Infinity,h=0;h<b.length;h++){var k=c(a[b[h]]);k!==d&&(e=Math.min(e,k),g=Math.max(g,k))}return-Infinity===g||Infinity===e?d:f(g-e)};case "change":return function(a,b){var e=c(a[b[0]]);a=c(a[b[b.length-1]]);return e===d||a===d?d:f(a-e)};case "median":return function(a,b){for(var e=[],g=0;g<b.length;g++){var h=c(a[b[g]]);h!==d&&e.push(h)}if(!e.length)return d;e.sort();a=(e.length-1)/2;return f((e[Math.floor(a)]+
e[Math.ceil(a)])/2)};case "mode":return function(a,b){for(var e={},g=0,h=d,k=0;k<b.length;k++){var l=c(a[b[k]]);if(l!==d){var m=e[l]=(e[l]||0)+1;m>g&&(g=m,h=l)}}return g?f(h):d};case "rms":return function(a,b){for(var e=0,g=0,h=0;h<b.length;h++){var k=c(a[b[h]]);k!==d&&(e+=k*k,g++)}return g?f(Math.sqrt(e/g)):d};case "stddev":return function(b,e){var f=0,g=0,h=1,k=d,l;for(l=0;l<e.length&&k===d;l++)k=c(b[e[l]]);if(k===d)return d;for(;l<e.length;l++){var m=c(b[e[l]]);m!==d&&(m-=k,f+=m,g+=m*m,h++)}return(b=
"sample"===a.funcmode?h-1:h)?Math.sqrt((g-f*f/h)/b):0}}}function h(a,b){return b.length}function e(a,b){return a[b[0]]}function n(a,b){return a[b[b.length-1]]}var b=a("../plots/cartesian/axes"),l=a("../lib"),u=a("../plot_api/plot_schema"),q=a("./helpers").pointsAccessorFunction,d=a("../constants/numerical").BADNUM;m.moduleType="transform";m.name="aggregate";var f=m.attributes={enabled:{valType:"boolean",dflt:!0,editType:"calc"},groups:{valType:"string",strict:!0,noBlank:!0,arrayOk:!0,dflt:"x",editType:"calc"},
aggregations:{_isLinkedToArray:"aggregation",target:{valType:"string",editType:"calc"},func:{valType:"enumerated",values:"count sum avg median mode rms stddev min max first last change range".split(" "),dflt:"first",editType:"calc"},funcmode:{valType:"enumerated",values:["sample","population"],dflt:"sample",editType:"calc"},enabled:{valType:"boolean",dflt:!0,editType:"calc"},editType:"calc"},editType:"calc"},c=f.aggregations;m.supplyDefaults=function(a,b){function d(a,b){return l.coerce(m[g],n,c,
a,b)}var e={},g;if(!l.coerce(a,e,f,"enabled",void 0))return e;b=u.findArrayAttributes(b);var h={};for(g=0;g<b.length;g++)h[b[g]]=1;var k=l.coerce(a,e,f,"groups",void 0);if(!Array.isArray(k)){if(!h[k])return e.enabled=!1,e;h[k]=0}var m=a.aggregations||[];a=e.aggregations=Array(m.length);for(g=0;g<m.length;g++){var n={_index:g};k=d("target");var p=d("func");d("enabled")&&k&&(h[k]||"count"===p&&void 0===h[k])?("stddev"===p&&d("funcmode"),h[k]=0,a[g]=n):a[g]={enabled:!1,_index:g}}for(g=0;g<b.length;g++)h[b[g]]&&
a.push({target:b[g],func:c.func.dflt,enabled:!0,_index:-1});return e};m.calcTransform=function(a,b,c){if(c.enabled){var d=c.groups,e=l.getTargetArray(b,{target:d});if(e){var f,g={},h={},k=[],m=q(b.transforms,c),n=e.length;b._length&&(n=Math.min(n,b._length));for(f=0;f<n;f++){var r=e[f];var t=g[r];void 0===t?(g[r]=k.length,t=[f],k.push(t),h[g[r]]=m(f)):(k[t].push(f),h[g[r]]=(h[g[r]]||[]).concat(m(f)))}c._indexToPoints=h;c=c.aggregations;for(f=0;f<c.length;f++)p(a,b,k,c[f]);"string"===typeof d&&p(a,
b,k,{target:d,func:"first",enabled:!0});b._length=k.length}}}},{"../constants/numerical":677,"../lib":700,"../plot_api/plot_schema":737,"../plots/cartesian/axes":748,"./helpers":1186}],1184:[function(a,t,m){function p(a,d,e){var c=a.operation,f=a.value,g=Array.isArray(f),h=function(b){return d(b,0,a.valuecalendar)},m=function(a){return d(a,0,e)},n;-1!==b.indexOf(c)?n=g?h(f[0]):h(f):-1!==l.indexOf(c)?n=g?[h(f[0]),h(f[1])]:[h(f),h(f)]:-1!==u.indexOf(c)&&(n=g?f.map(h):[h(f)]);switch(c){case "\x3d":return function(a){return m(a)===
n};case "!\x3d":return function(a){return m(a)!==n};case "\x3c":return function(a){return m(a)<n};case "\x3c\x3d":return function(a){return m(a)<=n};case "\x3e":return function(a){return m(a)>n};case "\x3e\x3d":return function(a){return m(a)>=n};case "[]":return function(a){a=m(a);return a>=n[0]&&a<=n[1]};case "()":return function(a){a=m(a);return a>n[0]&&a<n[1]};case "[)":return function(a){a=m(a);return a>=n[0]&&a<n[1]};case "(]":return function(a){a=m(a);return a>n[0]&&a<=n[1]};case "][":return function(a){a=
m(a);return a<=n[0]||a>=n[1]};case ")(":return function(a){a=m(a);return a<n[0]||a>n[1]};case "](":return function(a){a=m(a);return a<=n[0]||a>n[1]};case ")[":return function(a){a=m(a);return a<n[0]||a>=n[1]};case "{}":return function(a){return-1!==n.indexOf(m(a))};case "}{":return function(a){return-1===n.indexOf(m(a))}}}var g=a("../lib"),h=a("../registry"),e=a("../plots/cartesian/axes"),n=a("./helpers").pointsAccessorFunction;a=a("../constants/filter_ops");var b=a.COMPARISON_OPS,l=a.INTERVAL_OPS,
u=a.SET_OPS;m.moduleType="transform";m.name="filter";m.attributes={enabled:{valType:"boolean",dflt:!0,editType:"calc"},target:{valType:"string",strict:!0,noBlank:!0,arrayOk:!0,dflt:"x",editType:"calc"},operation:{valType:"enumerated",values:[].concat(b).concat(l).concat(u),dflt:"\x3d",editType:"calc"},value:{valType:"any",dflt:0,editType:"calc"},preservegaps:{valType:"boolean",dflt:!1,editType:"calc"},editType:"calc"};m.supplyDefaults=function(a){function b(b,c){return g.coerce(a,e,m.attributes,b,
c)}var e={};if(b("enabled")){b("preservegaps");b("operation");b("value");b("target");var c=h.getComponentMethod("calendars","handleDefaults");c(a,e,"valuecalendar",null);c(a,e,"targetcalendar",null)}return e};m.calcTransform=function(a,b,f){function c(a,c){for(var d=0;d<q.length;d++){var e=g.nestedProperty(b,q[d]);a(e,c)}}if(f.enabled){var d=g.getTargetArray(b,f);if(d){var h=f.target,l=d.length;b._length&&(l=Math.min(l,b._length));var m=f.targetcalendar,q=b._arrayAttrs,t=f.preservegaps;if("string"===
typeof h){var u=g.nestedProperty(b,h+"calendar").get();u&&(m=u)}a=e.getDataToCoordFunc(a,b,h,d);m=p(f,a,m);var x={};a={};h=0;if(t){var F=function(a){x[a.astr]=g.extendDeep([],a.get());a.set(Array(l))};u=function(a,b){var c=x[a.astr][b];a.get()[b]=c}}else F=function(a){x[a.astr]=g.extendDeep([],a.get());a.set([])},u=function(a,b){b=x[a.astr][b];a.get().push(b)};c(F);F=n(b.transforms,f);for(var B=0;B<l;B++)m(d[B])?(c(u,B),a[h++]=F(B)):t&&h++;f._indexToPoints=a;b._length=h}}}},{"../constants/filter_ops":673,
"../lib":700,"../plots/cartesian/axes":748,"../registry":829,"./helpers":1186}],1185:[function(a,t,m){var p=a("../lib"),g=a("../plot_api/plot_schema"),h=a("../plots/plots"),e=a("./helpers").pointsAccessorFunction;m.moduleType="transform";m.name="groupby";m.attributes={enabled:{valType:"boolean",dflt:!0,editType:"calc"},groups:{valType:"data_array",dflt:[],editType:"calc"},nameformat:{valType:"string",editType:"calc"},styles:{_isLinkedToArray:"style",target:{valType:"string",editType:"calc"},value:{valType:"any",
dflt:{},editType:"calc",_compareAsJSON:!0},editType:"calc"},editType:"calc"};m.supplyDefaults=function(a,b,e){b={};if(!p.coerce(a,b,m.attributes,"enabled",void 0))return b;p.coerce(a,b,m.attributes,"groups",void 0);p.coerce(a,b,m.attributes,"nameformat",1<e._dataLength?"%{group} (%{trace})":"%{group}");e=a.styles;var g=b.styles=[];if(e)for(a=0;a<e.length;a++){var h=g[a]={};p.coerce(e[a],g[a],m.attributes.styles,"target");var d=p.coerce(e[a],g[a],m.attributes.styles,"value");p.isPlainObject(d)?h.value=
p.extendDeep({},d):d&&delete h.value}return b};m.transform=function(a,b){var l,m=[];for(l=0;l<a.length;l++){var n=void 0,d;var f=a[l];var c=b.transform;var k=b.transformIndex;var r=f.transforms[k].groups,t=e(f.transforms,c);if(Array.isArray(r)&&0!==r.length){var z=p.filterUnique(r),A=Array(z.length),y=r.length,w=g.findArrayAttributes(f),x=c.styles||[],F={};for(d=0;d<x.length;d++)F[x[d].target]=x[d].value;c.styles&&(n=p.keyedContainer(c,"styles","target","value.name"));x={};var B={};for(d=0;d<z.length;d++){var C=
z[d];x[C]=d;B[C]=0;var D=A[d]=p.extendDeepNoArrays({},f);D._group=C;D.transforms[k]._indexToPoints={};var G=null;n&&(G=n.get(C));D.name=G||""===G?G:p.templateString(c.nameformat,{trace:f.name,group:C});G=D.transforms;D.transforms=[];for(C=0;C<G.length;C++)D.transforms[C]=p.extendDeepNoArrays({},G[C]);for(C=0;C<w.length;C++)p.nestedProperty(D,w[C]).set([])}for(d=0;d<w.length;d++){c=w[d];C=0;for(n=[];C<z.length;C++)n[C]=p.nestedProperty(A[C],c).get();c=p.nestedProperty(f,c).get();for(C=0;C<y;C++)n[x[r[C]]].push(c[C])}for(C=
0;C<y;C++)D=A[x[r[C]]],D.transforms[k]._indexToPoints[B[r[C]]]=t(C),B[r[C]]++;for(d=0;d<z.length;d++)C=z[d],D=A[d],h.clearExpandedTraceDefaultColors(D),p.extendDeepNoArrays(D,F[C]||{});f=A}else f=[f];for(k=0;k<f.length;k++)m.push(f[k])}return m}},{"../lib":700,"../plot_api/plot_schema":737,"../plots/plots":810,"./helpers":1186}],1186:[function(a,t,m){m.pointsAccessorFunction=function(a,g){for(var h,e,m=0;m<a.length;m++){h=a[m];if(h===g)break;h._indexToPoints&&!1!==h.enabled&&(e=h._indexToPoints)}return e?
function(a){return e[a]}:function(a){return[a]}}},{}],1187:[function(a,t,m){function p(a,b){switch(a.order){case "ascending":return function(a,e){return b(a.v)-b(e.v)};case "descending":return function(a,e){return b(e.v)-b(a.v)}}}var g=a("../lib"),h=a("../plots/cartesian/axes"),e=a("./helpers").pointsAccessorFunction;m.moduleType="transform";m.name="sort";m.attributes={enabled:{valType:"boolean",dflt:!0,editType:"calc"},target:{valType:"string",strict:!0,noBlank:!0,arrayOk:!0,dflt:"x",editType:"calc"},
order:{valType:"enumerated",values:["ascending","descending"],dflt:"ascending",editType:"calc"},editType:"calc"};m.supplyDefaults=function(a){var b={};g.coerce(a,b,m.attributes,"enabled",void 0)&&(g.coerce(a,b,m.attributes,"target",void 0),g.coerce(a,b,m.attributes,"order",void 0));return b};m.calcTransform=function(a,b,l){if(l.enabled){var m=g.getTargetArray(b,l);if(m){var n=l.target,d=m.length;b._length&&(d=Math.min(d,b._length));var f=b._arrayAttrs;n=h.getDataToCoordFunc(a,b,n,m);var c=d,k=Array(c);
a=Array(c);var r;for(r=0;r<c;r++)k[r]={v:m[r],i:r};k.sort(p(l,n));for(r=0;r<c;r++)a[r]=k[r].i;m=e(b.transforms,l);n={};for(c=0;c<f.length;c++){r=g.nestedProperty(b,f[c]);var t=r.get(),z=Array(d);for(k=0;k<d;k++)z[k]=t[a[k]];r.set(z)}for(k=0;k<d;k++)n[k]=m(a[k]);l._indexToPoints=n;b._length=d}}}},{"../lib":700,"../plots/cartesian/axes":748,"./helpers":1186}]},{},[22])(22)})};
shadow$provide[510]=function(ja,Qa,ma,bb,la,ib){function a(a){return a&&a.__esModule?a:{default:a}}Object.defineProperty(la,"__esModule",{value:!0});la.default=void 0;ja=a(ma(508));ma=a(ma(509));ma=(0,ja.default)(ma.default);la.default=ma};
var fX={};function lX(){var a=G(mX);return a?new Ms(null,a,null,a,null):si}
function nX(a,b){var c=null!=b&&(b.G&64||l===b.ea)?E.B(ln,b):b,d=z.B(c,Ds);return function(b,c,d){return function(){function b(b,c){P(c,0,null);c=P(c,1,null);return El(b,yl.B(new V(null,1,5,W,[Pv],null),a),null!=c?c:d)}function c(b){return Dl(b,a,d)}var e=null;e=function(a,d){switch(arguments.length){case 1:return c.call(this,a);case 2:return b.call(this,a,d)}throw Error("Invalid arity: "+arguments.length);};e.j=c;e.B=b;return e}()}(b,c,d)}
var gY=new B(null,"link","link",-1769163468),hY=new B(null,"size","size",1098693007),iY=new B(null,"magenta","magenta",1687937081),jY=new B(null,"cadetblue","cadetblue",1126335112),rW=new B(null,"marker","marker",865118313),kY=new B(null,"linkLength","linkLength",747066704),lY=new B(null,"steelblue1","steelblue1",-1413376207),mY=new B(null,"pink1","pink1",1030593513),nY=new B(null,"focusAnimationDuration","focusAnimationDuration",-1950020906),sW=new B("dpham.cv.panels.skills","skills-data","dpham.cv.panels.skills/skills-data",
-1189979902),tW=new B(null,"desc","desc",2093485764),uW=new B(null,"programming-skills","programming-skills",-1920460914),oY=new B(null,"focusedNodeId","focusedNodeId",2041325945),pY=new B(null,"focusZoom","focusZoom",-1348934099),vW=new B(null,"radialaxis","radialaxis",-1005484905),qY=new B(null,"plots-tab","plots-tab",-1998775509),rY=new B(null,"links","links",-654507394),wW=new B(null,"label","label",1718410804),xW=new B(null,"polar","polar",-1917024704),sY=new B(null,"darkolivegreen","darkolivegreen",
-2098617596),yW=new B(null,"textColor","textColor",-680658062),zW=new B("dpham.cv.panels.skills","skills-tab","dpham.cv.panels.skills/skills-tab",1511830892),tY=new B(null,"ref","ref",1289896967),AW=new B(null,"hoverinfo","hoverinfo",30772936),BW=new B("dpham.cv.panels.skills","set-skills-tab","dpham.cv.panels.skills/set-skills-tab",-1487106868),uY=new B(null,"automaticRearrangeAfterDropNode","automaticRearrangeAfterDropNode",-1607292234),CW=new B(null,"elevation","elevation",-1609348796),DW=new B(null,
"language","language",-1591107564),vY=new B("dpham.cv.panels.skills","plots-tab","dpham.cv.panels.skills/plots-tab",-1568314945),wY=new B(null,"component-did-mount","component-did-mount",-1126910518),EW=new B(null,"displayModeBar","displayModeBar",-1187531817),FW=new B(null,"subject","subject",-1411880451),GW=new B(null,"config","config",994861415),HW=new B(null,"autosize","autosize",-724145344),IW=new B(null,"layout","layout",-2120940921),JW=new B(null,"lg","lg",-80787836),KW=new B(null,"data-analysis",
"data-analysis",-2055327371),LW=new B(null,"onHover","onHover",1763640399),xY=new B(null,"indianred","indianred",-1829312906),MW=new B(null,"useResizeHandler","useResizeHandler",-1748859262),NW=new B(null,"toself","toself",-1022747099),yY=new B(null,"xp","xp",550374458),zY=new B(null,"software-engineering","software-engineering",1156967679),AY=new B(null,"gravity","gravity",-1815198225),OW=new B(null,"personality","personality",1044414103),BY=new B(null,"darkorange","darkorange",1453996632),PW=new B(null,
"onChange","onChange",-312891301),CY=new B(null,"royalblue","royalblue",978912636),QW=new B(null,"text","text",-1790561697),RW=new B(null,"skills-tab","skills-tab",-1255537216),DY=new B("dpham.cv.panels.skills","set-plots-tab","dpham.cv.panels.skills/set-plots-tab",-1873430995),EY=new B(null,"purple","purple",-876021126),SW=new B(null,"hard-skills","hard-skills",-88224380),TW=new B(null,"languages","languages",1471910331),UW=new B(null,"visible","visible",-1024216805),VW=new B(null,"b","b",1482224470),
WW=new B(null,"indicatorColor","indicatorColor",-1868144605),FY=new B(null,"grey90","grey90",521471421),GY=new B(null,"simple","simple",-581868663),XW=new B(null,"scrollButtons","scrollButtons",-954109284),YW=new B(null,"range","range",1639692286),HY=new B(null,"d3","d3",-1338309509),IY=new B(null,"grey16","grey16",470952904),JY=new B(null,"strokeWidth","strokeWidth",-2130848332),$W=new B(null,"theta","theta",-427510258);var KY=Rd,LY=xa(),MY=sd(),NY=td.mc.Pb;td.Lb.length+NY>td.gf&&(NY>td.gf/2&&qd(td),td.Lb.length>td.gf/2&&rd(td));var OY=fd(td.ad);OY.bh=void 0;OY.$d=MY;OY.Dd=0;OY.id=fd(td.Ie);OY.xe="Module Load: skills";OY.type="Module Load";td.Lb.push(OY);td.mc.set(String(OY.id),OY);td.gg++;var PY=xa();OY.startTime=OY.De=PY;td.af+=PY-LY;td.Rc.start&&td.Rc.start(OY.id,OY.toString());KY.Lg=OY.id;KY.Zc=KY.lb.skills;function QY(a,b,c){a=Number(a);b=Number(b);c=Number(c);if(a!=(a&255)||b!=(b&255)||c!=(c&255))throw Error('"('+a+","+b+","+c+'") is not a valid RGB color');b=a<<16|b<<8|c;return 16>a?"#"+(16777216|b).toString(16).substr(1):"#"+b.toString(16)};var RY=bm([new V(null,2,5,W,[new V(null,3,5,W,[255,250,250],null),"snow"],null),new V(null,2,5,W,[new V(null,3,5,W,[248,248,255],null),"ghostwhite"],null),new V(null,2,5,W,[new V(null,3,5,W,[245,245,245],null),"whitesmoke"],null),new V(null,2,5,W,[new V(null,3,5,W,[220,220,220],null),"gainsboro"],null),new V(null,2,5,W,[new V(null,3,5,W,[255,250,240],null),"floralwhite"],null),new V(null,2,5,W,[new V(null,3,5,W,[253,245,230],null),"oldlace"],null),new V(null,2,5,W,[new V(null,3,5,W,[250,240,230],
null),"linen"],null),new V(null,2,5,W,[new V(null,3,5,W,[250,235,215],null),"antiquewhite"],null),new V(null,2,5,W,[new V(null,3,5,W,[255,239,213],null),"papayawhip"],null),new V(null,2,5,W,[new V(null,3,5,W,[255,235,205],null),"blanchedalmond"],null),new V(null,2,5,W,[new V(null,3,5,W,[255,228,196],null),"bisque"],null),new V(null,2,5,W,[new V(null,3,5,W,[255,218,185],null),"peachpuff"],null),new V(null,2,5,W,[new V(null,3,5,W,[255,222,173],null),"navajowhite"],null),new V(null,2,5,W,[new V(null,
3,5,W,[255,228,181],null),"moccasin"],null),new V(null,2,5,W,[new V(null,3,5,W,[255,248,220],null),"cornsilk"],null),new V(null,2,5,W,[new V(null,3,5,W,[255,255,240],null),"ivory"],null),new V(null,2,5,W,[new V(null,3,5,W,[255,250,205],null),"lemonchiffon"],null),new V(null,2,5,W,[new V(null,3,5,W,[255,245,238],null),"seashell"],null),new V(null,2,5,W,[new V(null,3,5,W,[240,255,240],null),"honeydew"],null),new V(null,2,5,W,[new V(null,3,5,W,[245,255,250],null),"mintcream"],null),new V(null,2,5,W,
[new V(null,3,5,W,[240,255,255],null),"azure"],null),new V(null,2,5,W,[new V(null,3,5,W,[240,248,255],null),"aliceblue"],null),new V(null,2,5,W,[new V(null,3,5,W,[230,230,250],null),"lavender"],null),new V(null,2,5,W,[new V(null,3,5,W,[255,240,245],null),"lavenderblush"],null),new V(null,2,5,W,[new V(null,3,5,W,[255,228,225],null),"mistyrose"],null),new V(null,2,5,W,[new V(null,3,5,W,[255,255,255],null),"white"],null),new V(null,2,5,W,[new V(null,3,5,W,[0,0,0],null),"black"],null),new V(null,2,5,
W,[new V(null,3,5,W,[47,79,79],null),"darkslategray"],null),new V(null,2,5,W,[new V(null,3,5,W,[47,79,79],null),"darkslategrey"],null),new V(null,2,5,W,[new V(null,3,5,W,[105,105,105],null),"dimgray"],null),new V(null,2,5,W,[new V(null,3,5,W,[105,105,105],null),"dimgrey"],null),new V(null,2,5,W,[new V(null,3,5,W,[112,128,144],null),"slategray"],null),new V(null,2,5,W,[new V(null,3,5,W,[112,128,144],null),"slategrey"],null),new V(null,2,5,W,[new V(null,3,5,W,[119,136,153],null),"lightslategray"],null),
new V(null,2,5,W,[new V(null,3,5,W,[119,136,153],null),"lightslategrey"],null),new V(null,2,5,W,[new V(null,3,5,W,[190,190,190],null),"gray"],null),new V(null,2,5,W,[new V(null,3,5,W,[190,190,190],null),"grey"],null),new V(null,2,5,W,[new V(null,3,5,W,[211,211,211],null),"lightgrey"],null),new V(null,2,5,W,[new V(null,3,5,W,[211,211,211],null),"lightgray"],null),new V(null,2,5,W,[new V(null,3,5,W,[25,25,112],null),"midnightblue"],null),new V(null,2,5,W,[new V(null,3,5,W,[0,0,128],null),"navy"],null),
new V(null,2,5,W,[new V(null,3,5,W,[0,0,128],null),"navyblue"],null),new V(null,2,5,W,[new V(null,3,5,W,[100,149,237],null),"cornflowerblue"],null),new V(null,2,5,W,[new V(null,3,5,W,[72,61,139],null),"darkslateblue"],null),new V(null,2,5,W,[new V(null,3,5,W,[106,90,205],null),"slateblue"],null),new V(null,2,5,W,[new V(null,3,5,W,[123,104,238],null),"mediumslateblue"],null),new V(null,2,5,W,[new V(null,3,5,W,[132,112,255],null),"lightslateblue"],null),new V(null,2,5,W,[new V(null,3,5,W,[0,0,205],
null),"mediumblue"],null),new V(null,2,5,W,[new V(null,3,5,W,[65,105,225],null),"royalblue"],null),new V(null,2,5,W,[new V(null,3,5,W,[0,0,255],null),"blue"],null),new V(null,2,5,W,[new V(null,3,5,W,[30,144,255],null),"dodgerblue"],null),new V(null,2,5,W,[new V(null,3,5,W,[0,191,255],null),"deepskyblue"],null),new V(null,2,5,W,[new V(null,3,5,W,[135,206,235],null),"skyblue"],null),new V(null,2,5,W,[new V(null,3,5,W,[135,206,250],null),"lightskyblue"],null),new V(null,2,5,W,[new V(null,3,5,W,[70,130,
180],null),"steelblue"],null),new V(null,2,5,W,[new V(null,3,5,W,[176,196,222],null),"lightsteelblue"],null),new V(null,2,5,W,[new V(null,3,5,W,[173,216,230],null),"lightblue"],null),new V(null,2,5,W,[new V(null,3,5,W,[176,224,230],null),"powderblue"],null),new V(null,2,5,W,[new V(null,3,5,W,[175,238,238],null),"paleturquoise"],null),new V(null,2,5,W,[new V(null,3,5,W,[0,206,209],null),"darkturquoise"],null),new V(null,2,5,W,[new V(null,3,5,W,[72,209,204],null),"mediumturquoise"],null),new V(null,
2,5,W,[new V(null,3,5,W,[64,224,208],null),"turquoise"],null),new V(null,2,5,W,[new V(null,3,5,W,[0,255,255],null),"cyan"],null),new V(null,2,5,W,[new V(null,3,5,W,[224,255,255],null),"lightcyan"],null),new V(null,2,5,W,[new V(null,3,5,W,[95,158,160],null),"cadetblue"],null),new V(null,2,5,W,[new V(null,3,5,W,[102,205,170],null),"mediumaquamarine"],null),new V(null,2,5,W,[new V(null,3,5,W,[127,255,212],null),"aquamarine"],null),new V(null,2,5,W,[new V(null,3,5,W,[0,100,0],null),"darkgreen"],null),
new V(null,2,5,W,[new V(null,3,5,W,[85,107,47],null),"darkolivegreen"],null),new V(null,2,5,W,[new V(null,3,5,W,[143,188,143],null),"darkseagreen"],null),new V(null,2,5,W,[new V(null,3,5,W,[46,139,87],null),"seagreen"],null),new V(null,2,5,W,[new V(null,3,5,W,[60,179,113],null),"mediumseagreen"],null),new V(null,2,5,W,[new V(null,3,5,W,[32,178,170],null),"lightseagreen"],null),new V(null,2,5,W,[new V(null,3,5,W,[152,251,152],null),"palegreen"],null),new V(null,2,5,W,[new V(null,3,5,W,[0,255,127],
null),"springgreen"],null),new V(null,2,5,W,[new V(null,3,5,W,[124,252,0],null),"lawngreen"],null),new V(null,2,5,W,[new V(null,3,5,W,[0,255,0],null),"green"],null),new V(null,2,5,W,[new V(null,3,5,W,[127,255,0],null),"chartreuse"],null),new V(null,2,5,W,[new V(null,3,5,W,[0,250,154],null),"mediumspringgreen"],null),new V(null,2,5,W,[new V(null,3,5,W,[173,255,47],null),"greenyellow"],null),new V(null,2,5,W,[new V(null,3,5,W,[50,205,50],null),"limegreen"],null),new V(null,2,5,W,[new V(null,3,5,W,[154,
205,50],null),"yellowgreen"],null),new V(null,2,5,W,[new V(null,3,5,W,[34,139,34],null),"forestgreen"],null),new V(null,2,5,W,[new V(null,3,5,W,[107,142,35],null),"olivedrab"],null),new V(null,2,5,W,[new V(null,3,5,W,[189,183,107],null),"darkkhaki"],null),new V(null,2,5,W,[new V(null,3,5,W,[240,230,140],null),"khaki"],null),new V(null,2,5,W,[new V(null,3,5,W,[238,232,170],null),"palegoldenrod"],null),new V(null,2,5,W,[new V(null,3,5,W,[250,250,210],null),"lightgoldenrodyellow"],null),new V(null,2,
5,W,[new V(null,3,5,W,[255,255,224],null),"lightyellow"],null),new V(null,2,5,W,[new V(null,3,5,W,[255,255,0],null),"yellow"],null),new V(null,2,5,W,[new V(null,3,5,W,[255,215,0],null),"gold"],null),new V(null,2,5,W,[new V(null,3,5,W,[238,221,130],null),"lightgoldenrod"],null),new V(null,2,5,W,[new V(null,3,5,W,[218,165,32],null),"goldenrod"],null),new V(null,2,5,W,[new V(null,3,5,W,[184,134,11],null),"darkgoldenrod"],null),new V(null,2,5,W,[new V(null,3,5,W,[188,143,143],null),"rosybrown"],null),
new V(null,2,5,W,[new V(null,3,5,W,[205,92,92],null),"indianred"],null),new V(null,2,5,W,[new V(null,3,5,W,[139,69,19],null),"saddlebrown"],null),new V(null,2,5,W,[new V(null,3,5,W,[160,82,45],null),"sienna"],null),new V(null,2,5,W,[new V(null,3,5,W,[205,133,63],null),"peru"],null),new V(null,2,5,W,[new V(null,3,5,W,[222,184,135],null),"burlywood"],null),new V(null,2,5,W,[new V(null,3,5,W,[245,245,220],null),"beige"],null),new V(null,2,5,W,[new V(null,3,5,W,[245,222,179],null),"wheat"],null),new V(null,
2,5,W,[new V(null,3,5,W,[244,164,96],null),"sandybrown"],null),new V(null,2,5,W,[new V(null,3,5,W,[210,180,140],null),"tan"],null),new V(null,2,5,W,[new V(null,3,5,W,[210,105,30],null),"chocolate"],null),new V(null,2,5,W,[new V(null,3,5,W,[178,34,34],null),"firebrick"],null),new V(null,2,5,W,[new V(null,3,5,W,[165,42,42],null),"brown"],null),new V(null,2,5,W,[new V(null,3,5,W,[233,150,122],null),"darksalmon"],null),new V(null,2,5,W,[new V(null,3,5,W,[250,128,114],null),"salmon"],null),new V(null,
2,5,W,[new V(null,3,5,W,[255,160,122],null),"lightsalmon"],null),new V(null,2,5,W,[new V(null,3,5,W,[255,165,0],null),"orange"],null),new V(null,2,5,W,[new V(null,3,5,W,[255,140,0],null),"darkorange"],null),new V(null,2,5,W,[new V(null,3,5,W,[255,127,80],null),"coral"],null),new V(null,2,5,W,[new V(null,3,5,W,[240,128,128],null),"lightcoral"],null),new V(null,2,5,W,[new V(null,3,5,W,[255,99,71],null),"tomato"],null),new V(null,2,5,W,[new V(null,3,5,W,[255,69,0],null),"orangered"],null),new V(null,
2,5,W,[new V(null,3,5,W,[255,0,0],null),"red"],null),new V(null,2,5,W,[new V(null,3,5,W,[255,105,180],null),"hotpink"],null),new V(null,2,5,W,[new V(null,3,5,W,[255,20,147],null),"deeppink"],null),new V(null,2,5,W,[new V(null,3,5,W,[255,192,203],null),"pink"],null),new V(null,2,5,W,[new V(null,3,5,W,[255,182,193],null),"lightpink"],null),new V(null,2,5,W,[new V(null,3,5,W,[219,112,147],null),"palevioletred"],null),new V(null,2,5,W,[new V(null,3,5,W,[176,48,96],null),"maroon"],null),new V(null,2,5,
W,[new V(null,3,5,W,[199,21,133],null),"mediumvioletred"],null),new V(null,2,5,W,[new V(null,3,5,W,[208,32,144],null),"violetred"],null),new V(null,2,5,W,[new V(null,3,5,W,[255,0,255],null),"magenta"],null),new V(null,2,5,W,[new V(null,3,5,W,[238,130,238],null),"violet"],null),new V(null,2,5,W,[new V(null,3,5,W,[221,160,221],null),"plum"],null),new V(null,2,5,W,[new V(null,3,5,W,[218,112,214],null),"orchid"],null),new V(null,2,5,W,[new V(null,3,5,W,[186,85,211],null),"mediumorchid"],null),new V(null,
2,5,W,[new V(null,3,5,W,[153,50,204],null),"darkorchid"],null),new V(null,2,5,W,[new V(null,3,5,W,[148,0,211],null),"darkviolet"],null),new V(null,2,5,W,[new V(null,3,5,W,[138,43,226],null),"blueviolet"],null),new V(null,2,5,W,[new V(null,3,5,W,[160,32,240],null),"purple"],null),new V(null,2,5,W,[new V(null,3,5,W,[147,112,219],null),"mediumpurple"],null),new V(null,2,5,W,[new V(null,3,5,W,[216,191,216],null),"thistle"],null),new V(null,2,5,W,[new V(null,3,5,W,[255,250,250],null),"snow1"],null),new V(null,
2,5,W,[new V(null,3,5,W,[238,233,233],null),"snow2"],null),new V(null,2,5,W,[new V(null,3,5,W,[205,201,201],null),"snow3"],null),new V(null,2,5,W,[new V(null,3,5,W,[139,137,137],null),"snow4"],null),new V(null,2,5,W,[new V(null,3,5,W,[255,245,238],null),"seashell1"],null),new V(null,2,5,W,[new V(null,3,5,W,[238,229,222],null),"seashell2"],null),new V(null,2,5,W,[new V(null,3,5,W,[205,197,191],null),"seashell3"],null),new V(null,2,5,W,[new V(null,3,5,W,[139,134,130],null),"seashell4"],null),new V(null,
2,5,W,[new V(null,3,5,W,[255,239,219],null),"antiquewhite1"],null),new V(null,2,5,W,[new V(null,3,5,W,[238,223,204],null),"antiquewhite2"],null),new V(null,2,5,W,[new V(null,3,5,W,[205,192,176],null),"antiquewhite3"],null),new V(null,2,5,W,[new V(null,3,5,W,[139,131,120],null),"antiquewhite4"],null),new V(null,2,5,W,[new V(null,3,5,W,[255,228,196],null),"bisque1"],null),new V(null,2,5,W,[new V(null,3,5,W,[238,213,183],null),"bisque2"],null),new V(null,2,5,W,[new V(null,3,5,W,[205,183,158],null),"bisque3"],
null),new V(null,2,5,W,[new V(null,3,5,W,[139,125,107],null),"bisque4"],null),new V(null,2,5,W,[new V(null,3,5,W,[255,218,185],null),"peachpuff1"],null),new V(null,2,5,W,[new V(null,3,5,W,[238,203,173],null),"peachpuff2"],null),new V(null,2,5,W,[new V(null,3,5,W,[205,175,149],null),"peachpuff3"],null),new V(null,2,5,W,[new V(null,3,5,W,[139,119,101],null),"peachpuff4"],null),new V(null,2,5,W,[new V(null,3,5,W,[255,222,173],null),"navajowhite1"],null),new V(null,2,5,W,[new V(null,3,5,W,[238,207,161],
null),"navajowhite2"],null),new V(null,2,5,W,[new V(null,3,5,W,[205,179,139],null),"navajowhite3"],null),new V(null,2,5,W,[new V(null,3,5,W,[139,121,94],null),"navajowhite4"],null),new V(null,2,5,W,[new V(null,3,5,W,[255,250,205],null),"lemonchiffon1"],null),new V(null,2,5,W,[new V(null,3,5,W,[238,233,191],null),"lemonchiffon2"],null),new V(null,2,5,W,[new V(null,3,5,W,[205,201,165],null),"lemonchiffon3"],null),new V(null,2,5,W,[new V(null,3,5,W,[139,137,112],null),"lemonchiffon4"],null),new V(null,
2,5,W,[new V(null,3,5,W,[255,248,220],null),"cornsilk1"],null),new V(null,2,5,W,[new V(null,3,5,W,[238,232,205],null),"cornsilk2"],null),new V(null,2,5,W,[new V(null,3,5,W,[205,200,177],null),"cornsilk3"],null),new V(null,2,5,W,[new V(null,3,5,W,[139,136,120],null),"cornsilk4"],null),new V(null,2,5,W,[new V(null,3,5,W,[255,255,240],null),"ivory1"],null),new V(null,2,5,W,[new V(null,3,5,W,[238,238,224],null),"ivory2"],null),new V(null,2,5,W,[new V(null,3,5,W,[205,205,193],null),"ivory3"],null),new V(null,
2,5,W,[new V(null,3,5,W,[139,139,131],null),"ivory4"],null),new V(null,2,5,W,[new V(null,3,5,W,[240,255,240],null),"honeydew1"],null),new V(null,2,5,W,[new V(null,3,5,W,[224,238,224],null),"honeydew2"],null),new V(null,2,5,W,[new V(null,3,5,W,[193,205,193],null),"honeydew3"],null),new V(null,2,5,W,[new V(null,3,5,W,[131,139,131],null),"honeydew4"],null),new V(null,2,5,W,[new V(null,3,5,W,[255,240,245],null),"lavenderblush1"],null),new V(null,2,5,W,[new V(null,3,5,W,[238,224,229],null),"lavenderblush2"],
null),new V(null,2,5,W,[new V(null,3,5,W,[205,193,197],null),"lavenderblush3"],null),new V(null,2,5,W,[new V(null,3,5,W,[139,131,134],null),"lavenderblush4"],null),new V(null,2,5,W,[new V(null,3,5,W,[255,228,225],null),"mistyrose1"],null),new V(null,2,5,W,[new V(null,3,5,W,[238,213,210],null),"mistyrose2"],null),new V(null,2,5,W,[new V(null,3,5,W,[205,183,181],null),"mistyrose3"],null),new V(null,2,5,W,[new V(null,3,5,W,[139,125,123],null),"mistyrose4"],null),new V(null,2,5,W,[new V(null,3,5,W,[240,
255,255],null),"azure1"],null),new V(null,2,5,W,[new V(null,3,5,W,[224,238,238],null),"azure2"],null),new V(null,2,5,W,[new V(null,3,5,W,[193,205,205],null),"azure3"],null),new V(null,2,5,W,[new V(null,3,5,W,[131,139,139],null),"azure4"],null),new V(null,2,5,W,[new V(null,3,5,W,[131,111,255],null),"slateblue1"],null),new V(null,2,5,W,[new V(null,3,5,W,[122,103,238],null),"slateblue2"],null),new V(null,2,5,W,[new V(null,3,5,W,[105,89,205],null),"slateblue3"],null),new V(null,2,5,W,[new V(null,3,5,
W,[71,60,139],null),"slateblue4"],null),new V(null,2,5,W,[new V(null,3,5,W,[72,118,255],null),"royalblue1"],null),new V(null,2,5,W,[new V(null,3,5,W,[67,110,238],null),"royalblue2"],null),new V(null,2,5,W,[new V(null,3,5,W,[58,95,205],null),"royalblue3"],null),new V(null,2,5,W,[new V(null,3,5,W,[39,64,139],null),"royalblue4"],null),new V(null,2,5,W,[new V(null,3,5,W,[0,0,255],null),"blue1"],null),new V(null,2,5,W,[new V(null,3,5,W,[0,0,238],null),"blue2"],null),new V(null,2,5,W,[new V(null,3,5,W,
[0,0,205],null),"blue3"],null),new V(null,2,5,W,[new V(null,3,5,W,[0,0,139],null),"blue4"],null),new V(null,2,5,W,[new V(null,3,5,W,[30,144,255],null),"dodgerblue1"],null),new V(null,2,5,W,[new V(null,3,5,W,[28,134,238],null),"dodgerblue2"],null),new V(null,2,5,W,[new V(null,3,5,W,[24,116,205],null),"dodgerblue3"],null),new V(null,2,5,W,[new V(null,3,5,W,[16,78,139],null),"dodgerblue4"],null),new V(null,2,5,W,[new V(null,3,5,W,[99,184,255],null),"steelblue1"],null),new V(null,2,5,W,[new V(null,3,
5,W,[92,172,238],null),"steelblue2"],null),new V(null,2,5,W,[new V(null,3,5,W,[79,148,205],null),"steelblue3"],null),new V(null,2,5,W,[new V(null,3,5,W,[54,100,139],null),"steelblue4"],null),new V(null,2,5,W,[new V(null,3,5,W,[0,191,255],null),"deepskyblue1"],null),new V(null,2,5,W,[new V(null,3,5,W,[0,178,238],null),"deepskyblue2"],null),new V(null,2,5,W,[new V(null,3,5,W,[0,154,205],null),"deepskyblue3"],null),new V(null,2,5,W,[new V(null,3,5,W,[0,104,139],null),"deepskyblue4"],null),new V(null,
2,5,W,[new V(null,3,5,W,[135,206,255],null),"skyblue1"],null),new V(null,2,5,W,[new V(null,3,5,W,[126,192,238],null),"skyblue2"],null),new V(null,2,5,W,[new V(null,3,5,W,[108,166,205],null),"skyblue3"],null),new V(null,2,5,W,[new V(null,3,5,W,[74,112,139],null),"skyblue4"],null),new V(null,2,5,W,[new V(null,3,5,W,[176,226,255],null),"lightskyblue1"],null),new V(null,2,5,W,[new V(null,3,5,W,[164,211,238],null),"lightskyblue2"],null),new V(null,2,5,W,[new V(null,3,5,W,[141,182,205],null),"lightskyblue3"],
null),new V(null,2,5,W,[new V(null,3,5,W,[96,123,139],null),"lightskyblue4"],null),new V(null,2,5,W,[new V(null,3,5,W,[198,226,255],null),"slategray1"],null),new V(null,2,5,W,[new V(null,3,5,W,[185,211,238],null),"slategray2"],null),new V(null,2,5,W,[new V(null,3,5,W,[159,182,205],null),"slategray3"],null),new V(null,2,5,W,[new V(null,3,5,W,[108,123,139],null),"slategray4"],null),new V(null,2,5,W,[new V(null,3,5,W,[202,225,255],null),"lightsteelblue1"],null),new V(null,2,5,W,[new V(null,3,5,W,[188,
210,238],null),"lightsteelblue2"],null),new V(null,2,5,W,[new V(null,3,5,W,[162,181,205],null),"lightsteelblue3"],null),new V(null,2,5,W,[new V(null,3,5,W,[110,123,139],null),"lightsteelblue4"],null),new V(null,2,5,W,[new V(null,3,5,W,[191,239,255],null),"lightblue1"],null),new V(null,2,5,W,[new V(null,3,5,W,[178,223,238],null),"lightblue2"],null),new V(null,2,5,W,[new V(null,3,5,W,[154,192,205],null),"lightblue3"],null),new V(null,2,5,W,[new V(null,3,5,W,[104,131,139],null),"lightblue4"],null),new V(null,
2,5,W,[new V(null,3,5,W,[224,255,255],null),"lightcyan1"],null),new V(null,2,5,W,[new V(null,3,5,W,[209,238,238],null),"lightcyan2"],null),new V(null,2,5,W,[new V(null,3,5,W,[180,205,205],null),"lightcyan3"],null),new V(null,2,5,W,[new V(null,3,5,W,[122,139,139],null),"lightcyan4"],null),new V(null,2,5,W,[new V(null,3,5,W,[187,255,255],null),"paleturquoise1"],null),new V(null,2,5,W,[new V(null,3,5,W,[174,238,238],null),"paleturquoise2"],null),new V(null,2,5,W,[new V(null,3,5,W,[150,205,205],null),
"paleturquoise3"],null),new V(null,2,5,W,[new V(null,3,5,W,[102,139,139],null),"paleturquoise4"],null),new V(null,2,5,W,[new V(null,3,5,W,[152,245,255],null),"cadetblue1"],null),new V(null,2,5,W,[new V(null,3,5,W,[142,229,238],null),"cadetblue2"],null),new V(null,2,5,W,[new V(null,3,5,W,[122,197,205],null),"cadetblue3"],null),new V(null,2,5,W,[new V(null,3,5,W,[83,134,139],null),"cadetblue4"],null),new V(null,2,5,W,[new V(null,3,5,W,[0,245,255],null),"turquoise1"],null),new V(null,2,5,W,[new V(null,
3,5,W,[0,229,238],null),"turquoise2"],null),new V(null,2,5,W,[new V(null,3,5,W,[0,197,205],null),"turquoise3"],null),new V(null,2,5,W,[new V(null,3,5,W,[0,134,139],null),"turquoise4"],null),new V(null,2,5,W,[new V(null,3,5,W,[0,255,255],null),"cyan1"],null),new V(null,2,5,W,[new V(null,3,5,W,[0,238,238],null),"cyan2"],null),new V(null,2,5,W,[new V(null,3,5,W,[0,205,205],null),"cyan3"],null),new V(null,2,5,W,[new V(null,3,5,W,[0,139,139],null),"cyan4"],null),new V(null,2,5,W,[new V(null,3,5,W,[151,
255,255],null),"darkslategray1"],null),new V(null,2,5,W,[new V(null,3,5,W,[141,238,238],null),"darkslategray2"],null),new V(null,2,5,W,[new V(null,3,5,W,[121,205,205],null),"darkslategray3"],null),new V(null,2,5,W,[new V(null,3,5,W,[82,139,139],null),"darkslategray4"],null),new V(null,2,5,W,[new V(null,3,5,W,[127,255,212],null),"aquamarine1"],null),new V(null,2,5,W,[new V(null,3,5,W,[118,238,198],null),"aquamarine2"],null),new V(null,2,5,W,[new V(null,3,5,W,[102,205,170],null),"aquamarine3"],null),
new V(null,2,5,W,[new V(null,3,5,W,[69,139,116],null),"aquamarine4"],null),new V(null,2,5,W,[new V(null,3,5,W,[193,255,193],null),"darkseagreen1"],null),new V(null,2,5,W,[new V(null,3,5,W,[180,238,180],null),"darkseagreen2"],null),new V(null,2,5,W,[new V(null,3,5,W,[155,205,155],null),"darkseagreen3"],null),new V(null,2,5,W,[new V(null,3,5,W,[105,139,105],null),"darkseagreen4"],null),new V(null,2,5,W,[new V(null,3,5,W,[84,255,159],null),"seagreen1"],null),new V(null,2,5,W,[new V(null,3,5,W,[78,238,
148],null),"seagreen2"],null),new V(null,2,5,W,[new V(null,3,5,W,[67,205,128],null),"seagreen3"],null),new V(null,2,5,W,[new V(null,3,5,W,[46,139,87],null),"seagreen4"],null),new V(null,2,5,W,[new V(null,3,5,W,[154,255,154],null),"palegreen1"],null),new V(null,2,5,W,[new V(null,3,5,W,[144,238,144],null),"palegreen2"],null),new V(null,2,5,W,[new V(null,3,5,W,[124,205,124],null),"palegreen3"],null),new V(null,2,5,W,[new V(null,3,5,W,[84,139,84],null),"palegreen4"],null),new V(null,2,5,W,[new V(null,
3,5,W,[0,255,127],null),"springgreen1"],null),new V(null,2,5,W,[new V(null,3,5,W,[0,238,118],null),"springgreen2"],null),new V(null,2,5,W,[new V(null,3,5,W,[0,205,102],null),"springgreen3"],null),new V(null,2,5,W,[new V(null,3,5,W,[0,139,69],null),"springgreen4"],null),new V(null,2,5,W,[new V(null,3,5,W,[0,255,0],null),"green1"],null),new V(null,2,5,W,[new V(null,3,5,W,[0,238,0],null),"green2"],null),new V(null,2,5,W,[new V(null,3,5,W,[0,205,0],null),"green3"],null),new V(null,2,5,W,[new V(null,3,
5,W,[0,139,0],null),"green4"],null),new V(null,2,5,W,[new V(null,3,5,W,[127,255,0],null),"chartreuse1"],null),new V(null,2,5,W,[new V(null,3,5,W,[118,238,0],null),"chartreuse2"],null),new V(null,2,5,W,[new V(null,3,5,W,[102,205,0],null),"chartreuse3"],null),new V(null,2,5,W,[new V(null,3,5,W,[69,139,0],null),"chartreuse4"],null),new V(null,2,5,W,[new V(null,3,5,W,[192,255,62],null),"olivedrab1"],null),new V(null,2,5,W,[new V(null,3,5,W,[179,238,58],null),"olivedrab2"],null),new V(null,2,5,W,[new V(null,
3,5,W,[154,205,50],null),"olivedrab3"],null),new V(null,2,5,W,[new V(null,3,5,W,[105,139,34],null),"olivedrab4"],null),new V(null,2,5,W,[new V(null,3,5,W,[202,255,112],null),"darkolivegreen1"],null),new V(null,2,5,W,[new V(null,3,5,W,[188,238,104],null),"darkolivegreen2"],null),new V(null,2,5,W,[new V(null,3,5,W,[162,205,90],null),"darkolivegreen3"],null),new V(null,2,5,W,[new V(null,3,5,W,[110,139,61],null),"darkolivegreen4"],null),new V(null,2,5,W,[new V(null,3,5,W,[255,246,143],null),"khaki1"],
null),new V(null,2,5,W,[new V(null,3,5,W,[238,230,133],null),"khaki2"],null),new V(null,2,5,W,[new V(null,3,5,W,[205,198,115],null),"khaki3"],null),new V(null,2,5,W,[new V(null,3,5,W,[139,134,78],null),"khaki4"],null),new V(null,2,5,W,[new V(null,3,5,W,[255,236,139],null),"lightgoldenrod1"],null),new V(null,2,5,W,[new V(null,3,5,W,[238,220,130],null),"lightgoldenrod2"],null),new V(null,2,5,W,[new V(null,3,5,W,[205,190,112],null),"lightgoldenrod3"],null),new V(null,2,5,W,[new V(null,3,5,W,[139,129,
76],null),"lightgoldenrod4"],null),new V(null,2,5,W,[new V(null,3,5,W,[255,255,224],null),"lightyellow1"],null),new V(null,2,5,W,[new V(null,3,5,W,[238,238,209],null),"lightyellow2"],null),new V(null,2,5,W,[new V(null,3,5,W,[205,205,180],null),"lightyellow3"],null),new V(null,2,5,W,[new V(null,3,5,W,[139,139,122],null),"lightyellow4"],null),new V(null,2,5,W,[new V(null,3,5,W,[255,255,0],null),"yellow1"],null),new V(null,2,5,W,[new V(null,3,5,W,[238,238,0],null),"yellow2"],null),new V(null,2,5,W,[new V(null,
3,5,W,[205,205,0],null),"yellow3"],null),new V(null,2,5,W,[new V(null,3,5,W,[139,139,0],null),"yellow4"],null),new V(null,2,5,W,[new V(null,3,5,W,[255,215,0],null),"gold1"],null),new V(null,2,5,W,[new V(null,3,5,W,[238,201,0],null),"gold2"],null),new V(null,2,5,W,[new V(null,3,5,W,[205,173,0],null),"gold3"],null),new V(null,2,5,W,[new V(null,3,5,W,[139,117,0],null),"gold4"],null),new V(null,2,5,W,[new V(null,3,5,W,[255,193,37],null),"goldenrod1"],null),new V(null,2,5,W,[new V(null,3,5,W,[238,180,
34],null),"goldenrod2"],null),new V(null,2,5,W,[new V(null,3,5,W,[205,155,29],null),"goldenrod3"],null),new V(null,2,5,W,[new V(null,3,5,W,[139,105,20],null),"goldenrod4"],null),new V(null,2,5,W,[new V(null,3,5,W,[255,185,15],null),"darkgoldenrod1"],null),new V(null,2,5,W,[new V(null,3,5,W,[238,173,14],null),"darkgoldenrod2"],null),new V(null,2,5,W,[new V(null,3,5,W,[205,149,12],null),"darkgoldenrod3"],null),new V(null,2,5,W,[new V(null,3,5,W,[139,101,8],null),"darkgoldenrod4"],null),new V(null,2,
5,W,[new V(null,3,5,W,[255,193,193],null),"rosybrown1"],null),new V(null,2,5,W,[new V(null,3,5,W,[238,180,180],null),"rosybrown2"],null),new V(null,2,5,W,[new V(null,3,5,W,[205,155,155],null),"rosybrown3"],null),new V(null,2,5,W,[new V(null,3,5,W,[139,105,105],null),"rosybrown4"],null),new V(null,2,5,W,[new V(null,3,5,W,[255,106,106],null),"indianred1"],null),new V(null,2,5,W,[new V(null,3,5,W,[238,99,99],null),"indianred2"],null),new V(null,2,5,W,[new V(null,3,5,W,[205,85,85],null),"indianred3"],
null),new V(null,2,5,W,[new V(null,3,5,W,[139,58,58],null),"indianred4"],null),new V(null,2,5,W,[new V(null,3,5,W,[255,130,71],null),"sienna1"],null),new V(null,2,5,W,[new V(null,3,5,W,[238,121,66],null),"sienna2"],null),new V(null,2,5,W,[new V(null,3,5,W,[205,104,57],null),"sienna3"],null),new V(null,2,5,W,[new V(null,3,5,W,[139,71,38],null),"sienna4"],null),new V(null,2,5,W,[new V(null,3,5,W,[255,211,155],null),"burlywood1"],null),new V(null,2,5,W,[new V(null,3,5,W,[238,197,145],null),"burlywood2"],
null),new V(null,2,5,W,[new V(null,3,5,W,[205,170,125],null),"burlywood3"],null),new V(null,2,5,W,[new V(null,3,5,W,[139,115,85],null),"burlywood4"],null),new V(null,2,5,W,[new V(null,3,5,W,[255,231,186],null),"wheat1"],null),new V(null,2,5,W,[new V(null,3,5,W,[238,216,174],null),"wheat2"],null),new V(null,2,5,W,[new V(null,3,5,W,[205,186,150],null),"wheat3"],null),new V(null,2,5,W,[new V(null,3,5,W,[139,126,102],null),"wheat4"],null),new V(null,2,5,W,[new V(null,3,5,W,[255,165,79],null),"tan1"],
null),new V(null,2,5,W,[new V(null,3,5,W,[238,154,73],null),"tan2"],null),new V(null,2,5,W,[new V(null,3,5,W,[205,133,63],null),"tan3"],null),new V(null,2,5,W,[new V(null,3,5,W,[139,90,43],null),"tan4"],null),new V(null,2,5,W,[new V(null,3,5,W,[255,127,36],null),"chocolate1"],null),new V(null,2,5,W,[new V(null,3,5,W,[238,118,33],null),"chocolate2"],null),new V(null,2,5,W,[new V(null,3,5,W,[205,102,29],null),"chocolate3"],null),new V(null,2,5,W,[new V(null,3,5,W,[139,69,19],null),"chocolate4"],null),
new V(null,2,5,W,[new V(null,3,5,W,[255,48,48],null),"firebrick1"],null),new V(null,2,5,W,[new V(null,3,5,W,[238,44,44],null),"firebrick2"],null),new V(null,2,5,W,[new V(null,3,5,W,[205,38,38],null),"firebrick3"],null),new V(null,2,5,W,[new V(null,3,5,W,[139,26,26],null),"firebrick4"],null),new V(null,2,5,W,[new V(null,3,5,W,[255,64,64],null),"brown1"],null),new V(null,2,5,W,[new V(null,3,5,W,[238,59,59],null),"brown2"],null),new V(null,2,5,W,[new V(null,3,5,W,[205,51,51],null),"brown3"],null),new V(null,
2,5,W,[new V(null,3,5,W,[139,35,35],null),"brown4"],null),new V(null,2,5,W,[new V(null,3,5,W,[255,140,105],null),"salmon1"],null),new V(null,2,5,W,[new V(null,3,5,W,[238,130,98],null),"salmon2"],null),new V(null,2,5,W,[new V(null,3,5,W,[205,112,84],null),"salmon3"],null),new V(null,2,5,W,[new V(null,3,5,W,[139,76,57],null),"salmon4"],null),new V(null,2,5,W,[new V(null,3,5,W,[255,160,122],null),"lightsalmon1"],null),new V(null,2,5,W,[new V(null,3,5,W,[238,149,114],null),"lightsalmon2"],null),new V(null,
2,5,W,[new V(null,3,5,W,[205,129,98],null),"lightsalmon3"],null),new V(null,2,5,W,[new V(null,3,5,W,[139,87,66],null),"lightsalmon4"],null),new V(null,2,5,W,[new V(null,3,5,W,[255,165,0],null),"orange1"],null),new V(null,2,5,W,[new V(null,3,5,W,[238,154,0],null),"orange2"],null),new V(null,2,5,W,[new V(null,3,5,W,[205,133,0],null),"orange3"],null),new V(null,2,5,W,[new V(null,3,5,W,[139,90,0],null),"orange4"],null),new V(null,2,5,W,[new V(null,3,5,W,[255,127,0],null),"darkorange1"],null),new V(null,
2,5,W,[new V(null,3,5,W,[238,118,0],null),"darkorange2"],null),new V(null,2,5,W,[new V(null,3,5,W,[205,102,0],null),"darkorange3"],null),new V(null,2,5,W,[new V(null,3,5,W,[139,69,0],null),"darkorange4"],null),new V(null,2,5,W,[new V(null,3,5,W,[255,114,86],null),"coral1"],null),new V(null,2,5,W,[new V(null,3,5,W,[238,106,80],null),"coral2"],null),new V(null,2,5,W,[new V(null,3,5,W,[205,91,69],null),"coral3"],null),new V(null,2,5,W,[new V(null,3,5,W,[139,62,47],null),"coral4"],null),new V(null,2,
5,W,[new V(null,3,5,W,[255,99,71],null),"tomato1"],null),new V(null,2,5,W,[new V(null,3,5,W,[238,92,66],null),"tomato2"],null),new V(null,2,5,W,[new V(null,3,5,W,[205,79,57],null),"tomato3"],null),new V(null,2,5,W,[new V(null,3,5,W,[139,54,38],null),"tomato4"],null),new V(null,2,5,W,[new V(null,3,5,W,[255,69,0],null),"orangered1"],null),new V(null,2,5,W,[new V(null,3,5,W,[238,64,0],null),"orangered2"],null),new V(null,2,5,W,[new V(null,3,5,W,[205,55,0],null),"orangered3"],null),new V(null,2,5,W,[new V(null,
3,5,W,[139,37,0],null),"orangered4"],null),new V(null,2,5,W,[new V(null,3,5,W,[255,0,0],null),"red1"],null),new V(null,2,5,W,[new V(null,3,5,W,[238,0,0],null),"red2"],null),new V(null,2,5,W,[new V(null,3,5,W,[205,0,0],null),"red3"],null),new V(null,2,5,W,[new V(null,3,5,W,[139,0,0],null),"red4"],null),new V(null,2,5,W,[new V(null,3,5,W,[255,20,147],null),"deeppink1"],null),new V(null,2,5,W,[new V(null,3,5,W,[238,18,137],null),"deeppink2"],null),new V(null,2,5,W,[new V(null,3,5,W,[205,16,118],null),
"deeppink3"],null),new V(null,2,5,W,[new V(null,3,5,W,[139,10,80],null),"deeppink4"],null),new V(null,2,5,W,[new V(null,3,5,W,[255,110,180],null),"hotpink1"],null),new V(null,2,5,W,[new V(null,3,5,W,[238,106,167],null),"hotpink2"],null),new V(null,2,5,W,[new V(null,3,5,W,[205,96,144],null),"hotpink3"],null),new V(null,2,5,W,[new V(null,3,5,W,[139,58,98],null),"hotpink4"],null),new V(null,2,5,W,[new V(null,3,5,W,[255,181,197],null),"pink1"],null),new V(null,2,5,W,[new V(null,3,5,W,[238,169,184],null),
"pink2"],null),new V(null,2,5,W,[new V(null,3,5,W,[205,145,158],null),"pink3"],null),new V(null,2,5,W,[new V(null,3,5,W,[139,99,108],null),"pink4"],null),new V(null,2,5,W,[new V(null,3,5,W,[255,174,185],null),"lightpink1"],null),new V(null,2,5,W,[new V(null,3,5,W,[238,162,173],null),"lightpink2"],null),new V(null,2,5,W,[new V(null,3,5,W,[205,140,149],null),"lightpink3"],null),new V(null,2,5,W,[new V(null,3,5,W,[139,95,101],null),"lightpink4"],null),new V(null,2,5,W,[new V(null,3,5,W,[255,130,171],
null),"palevioletred1"],null),new V(null,2,5,W,[new V(null,3,5,W,[238,121,159],null),"palevioletred2"],null),new V(null,2,5,W,[new V(null,3,5,W,[205,104,137],null),"palevioletred3"],null),new V(null,2,5,W,[new V(null,3,5,W,[139,71,93],null),"palevioletred4"],null),new V(null,2,5,W,[new V(null,3,5,W,[255,52,179],null),"maroon1"],null),new V(null,2,5,W,[new V(null,3,5,W,[238,48,167],null),"maroon2"],null),new V(null,2,5,W,[new V(null,3,5,W,[205,41,144],null),"maroon3"],null),new V(null,2,5,W,[new V(null,
3,5,W,[139,28,98],null),"maroon4"],null),new V(null,2,5,W,[new V(null,3,5,W,[255,62,150],null),"violetred1"],null),new V(null,2,5,W,[new V(null,3,5,W,[238,58,140],null),"violetred2"],null),new V(null,2,5,W,[new V(null,3,5,W,[205,50,120],null),"violetred3"],null),new V(null,2,5,W,[new V(null,3,5,W,[139,34,82],null),"violetred4"],null),new V(null,2,5,W,[new V(null,3,5,W,[255,0,255],null),"magenta1"],null),new V(null,2,5,W,[new V(null,3,5,W,[238,0,238],null),"magenta2"],null),new V(null,2,5,W,[new V(null,
3,5,W,[205,0,205],null),"magenta3"],null),new V(null,2,5,W,[new V(null,3,5,W,[139,0,139],null),"magenta4"],null),new V(null,2,5,W,[new V(null,3,5,W,[255,131,250],null),"orchid1"],null),new V(null,2,5,W,[new V(null,3,5,W,[238,122,233],null),"orchid2"],null),new V(null,2,5,W,[new V(null,3,5,W,[205,105,201],null),"orchid3"],null),new V(null,2,5,W,[new V(null,3,5,W,[139,71,137],null),"orchid4"],null),new V(null,2,5,W,[new V(null,3,5,W,[255,187,255],null),"plum1"],null),new V(null,2,5,W,[new V(null,3,
5,W,[238,174,238],null),"plum2"],null),new V(null,2,5,W,[new V(null,3,5,W,[205,150,205],null),"plum3"],null),new V(null,2,5,W,[new V(null,3,5,W,[139,102,139],null),"plum4"],null),new V(null,2,5,W,[new V(null,3,5,W,[224,102,255],null),"mediumorchid1"],null),new V(null,2,5,W,[new V(null,3,5,W,[209,95,238],null),"mediumorchid2"],null),new V(null,2,5,W,[new V(null,3,5,W,[180,82,205],null),"mediumorchid3"],null),new V(null,2,5,W,[new V(null,3,5,W,[122,55,139],null),"mediumorchid4"],null),new V(null,2,
5,W,[new V(null,3,5,W,[191,62,255],null),"darkorchid1"],null),new V(null,2,5,W,[new V(null,3,5,W,[178,58,238],null),"darkorchid2"],null),new V(null,2,5,W,[new V(null,3,5,W,[154,50,205],null),"darkorchid3"],null),new V(null,2,5,W,[new V(null,3,5,W,[104,34,139],null),"darkorchid4"],null),new V(null,2,5,W,[new V(null,3,5,W,[155,48,255],null),"purple1"],null),new V(null,2,5,W,[new V(null,3,5,W,[145,44,238],null),"purple2"],null),new V(null,2,5,W,[new V(null,3,5,W,[125,38,205],null),"purple3"],null),new V(null,
2,5,W,[new V(null,3,5,W,[85,26,139],null),"purple4"],null),new V(null,2,5,W,[new V(null,3,5,W,[171,130,255],null),"mediumpurple1"],null),new V(null,2,5,W,[new V(null,3,5,W,[159,121,238],null),"mediumpurple2"],null),new V(null,2,5,W,[new V(null,3,5,W,[137,104,205],null),"mediumpurple3"],null),new V(null,2,5,W,[new V(null,3,5,W,[93,71,139],null),"mediumpurple4"],null),new V(null,2,5,W,[new V(null,3,5,W,[255,225,255],null),"thistle1"],null),new V(null,2,5,W,[new V(null,3,5,W,[238,210,238],null),"thistle2"],
null),new V(null,2,5,W,[new V(null,3,5,W,[205,181,205],null),"thistle3"],null),new V(null,2,5,W,[new V(null,3,5,W,[139,123,139],null),"thistle4"],null),new V(null,2,5,W,[new V(null,3,5,W,[0,0,0],null),"gray0"],null),new V(null,2,5,W,[new V(null,3,5,W,[0,0,0],null),"grey0"],null),new V(null,2,5,W,[new V(null,3,5,W,[3,3,3],null),"gray1"],null),new V(null,2,5,W,[new V(null,3,5,W,[3,3,3],null),"grey1"],null),new V(null,2,5,W,[new V(null,3,5,W,[5,5,5],null),"gray2"],null),new V(null,2,5,W,[new V(null,
3,5,W,[5,5,5],null),"grey2"],null),new V(null,2,5,W,[new V(null,3,5,W,[8,8,8],null),"gray3"],null),new V(null,2,5,W,[new V(null,3,5,W,[8,8,8],null),"grey3"],null),new V(null,2,5,W,[new V(null,3,5,W,[10,10,10],null),"gray4"],null),new V(null,2,5,W,[new V(null,3,5,W,[10,10,10],null),"grey4"],null),new V(null,2,5,W,[new V(null,3,5,W,[13,13,13],null),"gray5"],null),new V(null,2,5,W,[new V(null,3,5,W,[13,13,13],null),"grey5"],null),new V(null,2,5,W,[new V(null,3,5,W,[15,15,15],null),"gray6"],null),new V(null,
2,5,W,[new V(null,3,5,W,[15,15,15],null),"grey6"],null),new V(null,2,5,W,[new V(null,3,5,W,[18,18,18],null),"gray7"],null),new V(null,2,5,W,[new V(null,3,5,W,[18,18,18],null),"grey7"],null),new V(null,2,5,W,[new V(null,3,5,W,[20,20,20],null),"gray8"],null),new V(null,2,5,W,[new V(null,3,5,W,[20,20,20],null),"grey8"],null),new V(null,2,5,W,[new V(null,3,5,W,[23,23,23],null),"gray9"],null),new V(null,2,5,W,[new V(null,3,5,W,[23,23,23],null),"grey9"],null),new V(null,2,5,W,[new V(null,3,5,W,[26,26,26],
null),"gray10"],null),new V(null,2,5,W,[new V(null,3,5,W,[26,26,26],null),"grey10"],null),new V(null,2,5,W,[new V(null,3,5,W,[28,28,28],null),"gray11"],null),new V(null,2,5,W,[new V(null,3,5,W,[28,28,28],null),"grey11"],null),new V(null,2,5,W,[new V(null,3,5,W,[31,31,31],null),"gray12"],null),new V(null,2,5,W,[new V(null,3,5,W,[31,31,31],null),"grey12"],null),new V(null,2,5,W,[new V(null,3,5,W,[33,33,33],null),"gray13"],null),new V(null,2,5,W,[new V(null,3,5,W,[33,33,33],null),"grey13"],null),new V(null,
2,5,W,[new V(null,3,5,W,[36,36,36],null),"gray14"],null),new V(null,2,5,W,[new V(null,3,5,W,[38,38,38],null),"gray15"],null),new V(null,2,5,W,[new V(null,3,5,W,[41,41,41],null),"gray16"],null),new V(null,2,5,W,[new V(null,3,5,W,[43,43,43],null),"gray17"],null),new V(null,2,5,W,[new V(null,3,5,W,[43,43,43],null),"grey17"],null),new V(null,2,5,W,[new V(null,3,5,W,[46,46,46],null),"gray18"],null),new V(null,2,5,W,[new V(null,3,5,W,[46,46,46],null),"grey18"],null),new V(null,2,5,W,[new V(null,3,5,W,[48,
48,48],null),"gray19"],null),new V(null,2,5,W,[new V(null,3,5,W,[48,48,48],null),"grey19"],null),new V(null,2,5,W,[new V(null,3,5,W,[51,51,51],null),"gray20"],null),new V(null,2,5,W,[new V(null,3,5,W,[51,51,51],null),"grey20"],null),new V(null,2,5,W,[new V(null,3,5,W,[54,54,54],null),"gray21"],null),new V(null,2,5,W,[new V(null,3,5,W,[54,54,54],null),"grey21"],null),new V(null,2,5,W,[new V(null,3,5,W,[56,56,56],null),"gray22"],null),new V(null,2,5,W,[new V(null,3,5,W,[56,56,56],null),"grey22"],null),
new V(null,2,5,W,[new V(null,3,5,W,[59,59,59],null),"gray23"],null),new V(null,2,5,W,[new V(null,3,5,W,[59,59,59],null),"grey23"],null),new V(null,2,5,W,[new V(null,3,5,W,[61,61,61],null),"gray24"],null),new V(null,2,5,W,[new V(null,3,5,W,[61,61,61],null),"grey24"],null),new V(null,2,5,W,[new V(null,3,5,W,[64,64,64],null),"gray25"],null),new V(null,2,5,W,[new V(null,3,5,W,[64,64,64],null),"grey25"],null),new V(null,2,5,W,[new V(null,3,5,W,[66,66,66],null),"gray26"],null),new V(null,2,5,W,[new V(null,
3,5,W,[66,66,66],null),"grey26"],null),new V(null,2,5,W,[new V(null,3,5,W,[69,69,69],null),"gray27"],null),new V(null,2,5,W,[new V(null,3,5,W,[69,69,69],null),"grey27"],null),new V(null,2,5,W,[new V(null,3,5,W,[71,71,71],null),"gray28"],null),new V(null,2,5,W,[new V(null,3,5,W,[71,71,71],null),"grey28"],null),new V(null,2,5,W,[new V(null,3,5,W,[74,74,74],null),"gray29"],null),new V(null,2,5,W,[new V(null,3,5,W,[74,74,74],null),"grey29"],null),new V(null,2,5,W,[new V(null,3,5,W,[77,77,77],null),"gray30"],
null),new V(null,2,5,W,[new V(null,3,5,W,[77,77,77],null),"grey30"],null),new V(null,2,5,W,[new V(null,3,5,W,[79,79,79],null),"gray31"],null),new V(null,2,5,W,[new V(null,3,5,W,[79,79,79],null),"grey31"],null),new V(null,2,5,W,[new V(null,3,5,W,[82,82,82],null),"gray32"],null),new V(null,2,5,W,[new V(null,3,5,W,[82,82,82],null),"grey32"],null),new V(null,2,5,W,[new V(null,3,5,W,[84,84,84],null),"gray33"],null),new V(null,2,5,W,[new V(null,3,5,W,[84,84,84],null),"grey33"],null),new V(null,2,5,W,[new V(null,
3,5,W,[87,87,87],null),"gray34"],null),new V(null,2,5,W,[new V(null,3,5,W,[87,87,87],null),"grey34"],null),new V(null,2,5,W,[new V(null,3,5,W,[89,89,89],null),"gray35"],null),new V(null,2,5,W,[new V(null,3,5,W,[89,89,89],null),"grey35"],null),new V(null,2,5,W,[new V(null,3,5,W,[92,92,92],null),"gray36"],null),new V(null,2,5,W,[new V(null,3,5,W,[92,92,92],null),"grey36"],null),new V(null,2,5,W,[new V(null,3,5,W,[94,94,94],null),"gray37"],null),new V(null,2,5,W,[new V(null,3,5,W,[94,94,94],null),"grey37"],
null),new V(null,2,5,W,[new V(null,3,5,W,[97,97,97],null),"gray38"],null),new V(null,2,5,W,[new V(null,3,5,W,[97,97,97],null),"grey38"],null),new V(null,2,5,W,[new V(null,3,5,W,[99,99,99],null),"gray39"],null),new V(null,2,5,W,[new V(null,3,5,W,[99,99,99],null),"grey39"],null),new V(null,2,5,W,[new V(null,3,5,W,[102,102,102],null),"gray40"],null),new V(null,2,5,W,[new V(null,3,5,W,[102,102,102],null),"grey40"],null),new V(null,2,5,W,[new V(null,3,5,W,[105,105,105],null),"gray41"],null),new V(null,
2,5,W,[new V(null,3,5,W,[105,105,105],null),"grey41"],null),new V(null,2,5,W,[new V(null,3,5,W,[107,107,107],null),"gray42"],null),new V(null,2,5,W,[new V(null,3,5,W,[107,107,107],null),"grey42"],null),new V(null,2,5,W,[new V(null,3,5,W,[110,110,110],null),"gray43"],null),new V(null,2,5,W,[new V(null,3,5,W,[110,110,110],null),"grey43"],null),new V(null,2,5,W,[new V(null,3,5,W,[112,112,112],null),"gray44"],null),new V(null,2,5,W,[new V(null,3,5,W,[112,112,112],null),"grey44"],null),new V(null,2,5,
W,[new V(null,3,5,W,[115,115,115],null),"gray45"],null),new V(null,2,5,W,[new V(null,3,5,W,[115,115,115],null),"grey45"],null),new V(null,2,5,W,[new V(null,3,5,W,[117,117,117],null),"gray46"],null),new V(null,2,5,W,[new V(null,3,5,W,[117,117,117],null),"grey46"],null),new V(null,2,5,W,[new V(null,3,5,W,[120,120,120],null),"gray47"],null),new V(null,2,5,W,[new V(null,3,5,W,[120,120,120],null),"grey47"],null),new V(null,2,5,W,[new V(null,3,5,W,[122,122,122],null),"gray48"],null),new V(null,2,5,W,[new V(null,
3,5,W,[122,122,122],null),"grey48"],null),new V(null,2,5,W,[new V(null,3,5,W,[125,125,125],null),"gray49"],null),new V(null,2,5,W,[new V(null,3,5,W,[125,125,125],null),"grey49"],null),new V(null,2,5,W,[new V(null,3,5,W,[127,127,127],null),"gray50"],null),new V(null,2,5,W,[new V(null,3,5,W,[127,127,127],null),"grey50"],null),new V(null,2,5,W,[new V(null,3,5,W,[130,130,130],null),"gray51"],null),new V(null,2,5,W,[new V(null,3,5,W,[130,130,130],null),"grey51"],null),new V(null,2,5,W,[new V(null,3,5,
W,[133,133,133],null),"gray52"],null),new V(null,2,5,W,[new V(null,3,5,W,[133,133,133],null),"grey52"],null),new V(null,2,5,W,[new V(null,3,5,W,[135,135,135],null),"gray53"],null),new V(null,2,5,W,[new V(null,3,5,W,[135,135,135],null),"grey53"],null),new V(null,2,5,W,[new V(null,3,5,W,[138,138,138],null),"gray54"],null),new V(null,2,5,W,[new V(null,3,5,W,[138,138,138],null),"grey54"],null),new V(null,2,5,W,[new V(null,3,5,W,[140,140,140],null),"gray55"],null),new V(null,2,5,W,[new V(null,3,5,W,[140,
140,140],null),"grey55"],null),new V(null,2,5,W,[new V(null,3,5,W,[143,143,143],null),"gray56"],null),new V(null,2,5,W,[new V(null,3,5,W,[143,143,143],null),"grey56"],null),new V(null,2,5,W,[new V(null,3,5,W,[145,145,145],null),"gray57"],null),new V(null,2,5,W,[new V(null,3,5,W,[145,145,145],null),"grey57"],null),new V(null,2,5,W,[new V(null,3,5,W,[148,148,148],null),"gray58"],null),new V(null,2,5,W,[new V(null,3,5,W,[148,148,148],null),"grey58"],null),new V(null,2,5,W,[new V(null,3,5,W,[150,150,
150],null),"gray59"],null),new V(null,2,5,W,[new V(null,3,5,W,[150,150,150],null),"grey59"],null),new V(null,2,5,W,[new V(null,3,5,W,[153,153,153],null),"gray60"],null),new V(null,2,5,W,[new V(null,3,5,W,[153,153,153],null),"grey60"],null),new V(null,2,5,W,[new V(null,3,5,W,[156,156,156],null),"gray61"],null),new V(null,2,5,W,[new V(null,3,5,W,[156,156,156],null),"grey61"],null),new V(null,2,5,W,[new V(null,3,5,W,[158,158,158],null),"gray62"],null),new V(null,2,5,W,[new V(null,3,5,W,[158,158,158],
null),"grey62"],null),new V(null,2,5,W,[new V(null,3,5,W,[161,161,161],null),"gray63"],null),new V(null,2,5,W,[new V(null,3,5,W,[161,161,161],null),"grey63"],null),new V(null,2,5,W,[new V(null,3,5,W,[163,163,163],null),"gray64"],null),new V(null,2,5,W,[new V(null,3,5,W,[163,163,163],null),"grey64"],null),new V(null,2,5,W,[new V(null,3,5,W,[166,166,166],null),"gray65"],null),new V(null,2,5,W,[new V(null,3,5,W,[166,166,166],null),"grey65"],null),new V(null,2,5,W,[new V(null,3,5,W,[168,168,168],null),
"gray66"],null),new V(null,2,5,W,[new V(null,3,5,W,[168,168,168],null),"grey66"],null),new V(null,2,5,W,[new V(null,3,5,W,[171,171,171],null),"gray67"],null),new V(null,2,5,W,[new V(null,3,5,W,[171,171,171],null),"grey67"],null),new V(null,2,5,W,[new V(null,3,5,W,[173,173,173],null),"gray68"],null),new V(null,2,5,W,[new V(null,3,5,W,[173,173,173],null),"grey68"],null),new V(null,2,5,W,[new V(null,3,5,W,[176,176,176],null),"gray69"],null),new V(null,2,5,W,[new V(null,3,5,W,[176,176,176],null),"grey69"],
null),new V(null,2,5,W,[new V(null,3,5,W,[179,179,179],null),"gray70"],null),new V(null,2,5,W,[new V(null,3,5,W,[179,179,179],null),"grey70"],null),new V(null,2,5,W,[new V(null,3,5,W,[181,181,181],null),"gray71"],null),new V(null,2,5,W,[new V(null,3,5,W,[181,181,181],null),"grey71"],null),new V(null,2,5,W,[new V(null,3,5,W,[184,184,184],null),"gray72"],null),new V(null,2,5,W,[new V(null,3,5,W,[184,184,184],null),"grey72"],null),new V(null,2,5,W,[new V(null,3,5,W,[186,186,186],null),"gray73"],null),
new V(null,2,5,W,[new V(null,3,5,W,[186,186,186],null),"grey73"],null),new V(null,2,5,W,[new V(null,3,5,W,[189,189,189],null),"gray74"],null),new V(null,2,5,W,[new V(null,3,5,W,[189,189,189],null),"grey74"],null),new V(null,2,5,W,[new V(null,3,5,W,[191,191,191],null),"gray75"],null),new V(null,2,5,W,[new V(null,3,5,W,[191,191,191],null),"grey75"],null),new V(null,2,5,W,[new V(null,3,5,W,[194,194,194],null),"gray76"],null),new V(null,2,5,W,[new V(null,3,5,W,[194,194,194],null),"grey76"],null),new V(null,
2,5,W,[new V(null,3,5,W,[196,196,196],null),"gray77"],null),new V(null,2,5,W,[new V(null,3,5,W,[196,196,196],null),"grey77"],null),new V(null,2,5,W,[new V(null,3,5,W,[199,199,199],null),"gray78"],null),new V(null,2,5,W,[new V(null,3,5,W,[199,199,199],null),"grey78"],null),new V(null,2,5,W,[new V(null,3,5,W,[201,201,201],null),"gray79"],null),new V(null,2,5,W,[new V(null,3,5,W,[201,201,201],null),"grey79"],null),new V(null,2,5,W,[new V(null,3,5,W,[204,204,204],null),"gray80"],null),new V(null,2,5,
W,[new V(null,3,5,W,[204,204,204],null),"grey80"],null),new V(null,2,5,W,[new V(null,3,5,W,[207,207,207],null),"gray81"],null),new V(null,2,5,W,[new V(null,3,5,W,[207,207,207],null),"grey81"],null),new V(null,2,5,W,[new V(null,3,5,W,[209,209,209],null),"gray82"],null),new V(null,2,5,W,[new V(null,3,5,W,[209,209,209],null),"grey82"],null),new V(null,2,5,W,[new V(null,3,5,W,[212,212,212],null),"gray83"],null),new V(null,2,5,W,[new V(null,3,5,W,[212,212,212],null),"grey83"],null),new V(null,2,5,W,[new V(null,
3,5,W,[214,214,214],null),"gray84"],null),new V(null,2,5,W,[new V(null,3,5,W,[214,214,214],null),"grey84"],null),new V(null,2,5,W,[new V(null,3,5,W,[217,217,217],null),"gray85"],null),new V(null,2,5,W,[new V(null,3,5,W,[217,217,217],null),"grey85"],null),new V(null,2,5,W,[new V(null,3,5,W,[219,219,219],null),"gray86"],null),new V(null,2,5,W,[new V(null,3,5,W,[219,219,219],null),"grey86"],null),new V(null,2,5,W,[new V(null,3,5,W,[222,222,222],null),"gray87"],null),new V(null,2,5,W,[new V(null,3,5,
W,[222,222,222],null),"grey87"],null),new V(null,2,5,W,[new V(null,3,5,W,[224,224,224],null),"gray88"],null),new V(null,2,5,W,[new V(null,3,5,W,[224,224,224],null),"grey88"],null),new V(null,2,5,W,[new V(null,3,5,W,[227,227,227],null),"gray89"],null),new V(null,2,5,W,[new V(null,3,5,W,[227,227,227],null),"grey89"],null),new V(null,2,5,W,[new V(null,3,5,W,[229,229,229],null),"gray90"],null),new V(null,2,5,W,[new V(null,3,5,W,[229,229,229],null),"grey90"],null),new V(null,2,5,W,[new V(null,3,5,W,[232,
232,232],null),"gray91"],null),new V(null,2,5,W,[new V(null,3,5,W,[232,232,232],null),"grey91"],null),new V(null,2,5,W,[new V(null,3,5,W,[235,235,235],null),"gray92"],null),new V(null,2,5,W,[new V(null,3,5,W,[235,235,235],null),"grey92"],null),new V(null,2,5,W,[new V(null,3,5,W,[237,237,237],null),"gray93"],null),new V(null,2,5,W,[new V(null,3,5,W,[237,237,237],null),"grey93"],null),new V(null,2,5,W,[new V(null,3,5,W,[240,240,240],null),"gray94"],null),new V(null,2,5,W,[new V(null,3,5,W,[240,240,
240],null),"grey94"],null),new V(null,2,5,W,[new V(null,3,5,W,[242,242,242],null),"gray95"],null),new V(null,2,5,W,[new V(null,3,5,W,[242,242,242],null),"grey95"],null),new V(null,2,5,W,[new V(null,3,5,W,[245,245,245],null),"gray96"],null),new V(null,2,5,W,[new V(null,3,5,W,[247,247,247],null),"gray97"],null),new V(null,2,5,W,[new V(null,3,5,W,[250,250,250],null),"gray98"],null),new V(null,2,5,W,[new V(null,3,5,W,[252,252,252],null),"gray99"],null),new V(null,2,5,W,[new V(null,3,5,W,[255,255,255],
null),"grey100"],null),new V(null,2,5,W,[new V(null,3,5,W,[169,169,169],null),"darkgray"],null),new V(null,2,5,W,[new V(null,3,5,W,[0,0,139],null),"darkblue"],null),new V(null,2,5,W,[new V(null,3,5,W,[0,139,139],null),"darkcyan"],null),new V(null,2,5,W,[new V(null,3,5,W,[139,0,139],null),"darkmagenta"],null),new V(null,2,5,W,[new V(null,3,5,W,[139,0,0],null),"darkred"],null),new V(null,2,5,W,[new V(null,3,5,W,[144,238,144],null),"lightgreen"],null)]),SY=yl.B(X,fl.B(function(a){return new V(null,2,
5,W,[ik.j(a.j?a.j(1):a.call(null,1)),a.j?a.j(0):a.call(null,0)],null)},RY));function TY(a){return E.D(cO,"rgb(%d, %d, %d)",a)}Vk.B(TY,SY);var UY=Kj(function(a,b,c){return Q.D(a,b,TY(c))},X,SY),VY=Kj(function(a,b,c){return Q.D(a,b,E.B(QY,c))},X,SY),WY=new n(null,1,[GY,new V(null,10,5,W,[FY,xY,jY,BY,mY,lY,sY,EY,CY,iY],null)],null),XY=Kj(function(a,b,c){return Q.D(a,b,zl(UY,c))},X,WY),YY=Kj(function(a,b,c){return Q.D(a,b,zl(VY,c))},X,WY),mX=GY.j(XY);GY.j(YY);SY.j?SY.j(IY):SY.call(null,IY);var ZY=eI(507);function $Y(a,b){var c=null!=a&&(a.G&64||l===a.ea)?E.B(ln,a):a,d=z.B(c,eA),e=z.B(c,rY),f=null!=b&&(b.G&64||l===b.ea)?E.B(ln,b):b,g=z.B(f,qF),h=z.B(f,er),m=An(zl(uv,d),zl(Pw,d)),q=An(zl(Pw,d),lX()),t=Ln(function(){return function(a,b,c,d,e,f,g,h,m,q){return function Y(t){return new kk(null,function(a,b){return function(){for(;;){var a=G(t);if(a){if(rj(a)){var c=Th(a),d=N(c),e=ok(d);a:for(var f=0;;)if(f<d){var g=Sg.B(c,f),h=null!=g&&(g.G&64||l===g.ea)?E.B(ln,g):g;g=z.B(h,Pw);var m=z.B(h,yY);h=z.B(h,
uv);g=gj(new n(null,3,[NH,g,wu,b.j?b.j(g):b.call(null,g),hY,200*m],null),new n(null,1,[nH,r.j(h)],null));e.add(g);f+=1}else{c=!0;break a}return c?qk(e.wa(),Y(Uh(a))):qk(e.wa(),null)}e=I(a);d=null!=e&&(e.G&64||l===e.ea)?E.B(ln,e):e;e=z.B(d,Pw);c=z.B(d,yY);d=z.B(d,uv);return Si(gj(new n(null,3,[NH,e,wu,b.j?b.j(e):b.call(null,e),hY,200*c],null),new n(null,1,[nH,r.j(d)],null)),Y(ri(a)))}return null}}}(a,b,c,d,e,f,g,h,m,q),null,null)}}(m,q,a,c,d,e,b,f,g,h)(d)}()),v=Ln(function(){return function(a,b,c,
d,e,f,g,h,m,q,t){return function wa(v){return new kk(null,function(a){return function(){for(;;){var b=G(v);if(b){if(rj(b)){var c=Th(b),d=N(c),e=ok(d);return function(){for(var b=0;;)if(b<d){var f=Sg.B(c,b);f=null!=f&&(f.G&64||l===f.ea)?E.B(ln,f):f;var g=z.B(f,hz),h=z.B(f,gq);f=z.B(f,uv);rk(e,gj(new n(null,3,[hz,function(){var b=g+1;return a.j?a.j(b):a.call(null,b)}(),gq,function(){var b=h+1;return a.j?a.j(b):a.call(null,b)}(),JY,1.5*f],null),new n(null,1,[nH,[r.j(g),"-",r.j(h)].join("")],null)));
b+=1}else return!0}()?qk(e.wa(),wa(Uh(b))):qk(e.wa(),null)}var f=I(b);f=null!=f&&(f.G&64||l===f.ea)?E.B(ln,f):f;var g=z.B(f,hz),h=z.B(f,gq);f=z.B(f,uv);return Si(gj(new n(null,3,[hz,function(){var b=g+1;return a.j?a.j(b):a.call(null,b)}(),gq,function(){var b=h+1;return a.j?a.j(b):a.call(null,b)}(),JY,1.5*f],null),new n(null,1,[nH,[r.j(g),"-",r.j(h)].join("")],null)),wa(ri(b)))}return null}}}(a,b,c,d,e,f,g,h,m,q,t),null,null)}}(m,q,t,a,c,d,e,b,f,g,h)(e)}());return new V(null,3,5,W,[Z,ZY.Graph,new n(null,
3,[NH,"graph",GW,new n(null,7,[HY,new n(null,2,[AY,-300,kY,100],null),gY,new n(null,1,[ur,"CURVE_SMOOTH"],null),nY,3E3,uY,!0,pY,1.5,qF,600<g?g:600,er,380<h?h:380],null),Jp,new n(null,3,[oY,NH.j(I(t)),eA,to(t),rY,to(v)],null)],null)],null)}
function aZ(a){var b=null!=a&&(a.G&64||l===a.ea)?E.B(ln,a):a,c=z.B(b,eA),d=z.B(b,rY),e=fJ.j(null),f=fJ.j(new n(null,2,[er,600,qF,600],null));return function(a,b,c,d,e,f,y){return function(g){var h=null!=g&&(g.G&64||l===g.ea)?E.B(ln,g):g,m=z.B(h,eA),q=z.B(h,rY);return JJ(new n(null,2,[wY,c,JE,function(a,b,c,d,e,f,g,h,m,q,t){return function(){return new V(null,3,5,W,[Vq,new n(null,2,[wr,new n(null,2,[er,"100%",qF,"70vh"],null),tY,function(a,b,c,d,e){return function(a){return bl(e,a)}}(a,b,c,d,e,f,g,
h,m,q,t)],null),new V(null,3,5,W,[$Y,new n(null,2,[eA,c,rY,d],null),u(f)],null)],null)}}(g,h,m,q,a,b,c,d,e,f,y)],null))}}(e,f,function(a,b,c,d,e,f){return function(){return setTimeout(function(a,b){return function(){var c=u(a);c=FM(c);return bl(b,new n(null,2,[er,c.clientWidth,qF,c.clientHeight],null))}}(a,b,c,d,e,f),3E3)}}(e,f,a,b,c,d),a,b,c,d)};var gX=eI(510);var bZ={},hX=SL.palette.primary.main,cZ=nX(new V(null,1,5,W,[RW],null),O([DW]));IL.B(BW,function(a){return function(b,c){return a.B?a.B(b,c):a.call(null,b,c)}}(cZ));var dZ=new V(null,1,5,W,[Pv],null),eZ=function(a,b,c,d){return function(a){return d.j?d.j(a):d.call(null,a)}}(zW,VD,dZ,cZ);kL.T?kL.T(zW,VD,dZ,eZ):kL.call(null,zW,VD,dZ,eZ);var fZ=nX(new V(null,1,5,W,[qY],null),O([SW]));IL.B(DY,function(a){return function(b,c){return a.B?a.B(b,c):a.call(null,b,c)}}(fZ));
var gZ=new V(null,1,5,W,[Pv],null),hZ=function(a,b,c,d){return function(a){return d.j?d.j(a):d.call(null,a)}}(vY,VD,gZ,fZ);kL.T?kL.T(vY,VD,gZ,hZ):kL.call(null,vY,VD,gZ,hZ);function iZ(){return new V(null,2,5,W,[function(){var a=new V(null,2,5,W,[Iy,CH],null);return fL.j?fL.j(a):fL.call(null,a)}(),function(){var a=new V(null,1,5,W,[zW],null);return fL.j?fL.j(a):fL.call(null,a)}()],null)}function jZ(a){var b=P(a,0,null);a=P(a,1,null);return z.D(b,a,z.B(b,TW))}
kL.D?kL.D(sW,iZ,jZ):kL.call(null,sW,iZ,jZ);
function kZ(){var a=function(){var a=new V(null,2,5,W,[Iy,SW],null);return fL.j?fL.j(a):fL.call(null,a)}();return function(a,c){return function(){return new V(null,4,5,W,[Z,OL.Grid,new n(null,3,[Hv,!0,RA,12,JW,12],null),new V(null,3,5,W,[Z,OL.Grid,new V(null,4,5,W,[Z,OL.Card,new V(null,3,5,W,[Z,OL.CardHeader,new n(null,2,[IB,"Skills Summary",Vt,"A picture is worth a thousand words. Hover the dots\nfor more details."],null)],null),new V(null,3,5,W,[Z,OL.CardContent,p(u(a))?function(){var b=ak(u(a)),
e=zl(function(){return function(a){return parseInt(qp.j(a))}}(b,a,c),b),f=zl(FW,b),g=zl(tW,b);b=zl(Vk.B(ik,fx),b);b=Yi.B(b,I(b));return new V(null,3,5,W,[Z,gX.default,new n(null,7,[Jp,new V(null,1,5,W,[new n(null,7,[cF,Yi.B(e,I(e)),$W,Yi.B(f,I(f)),QW,Yi.B(g,I(g)),ur,"scatterpolar",AW,"text",aD,NW,rW,new n(null,1,[wu,hX],null)],null)],null),IW,new n(null,3,[HW,!0,wq,new n(null,4,[SE,80,bF,30,VW,30,cF,80],null),xW,new n(null,1,[vW,new n(null,2,[UW,!0,YW,new V(null,2,5,W,[0,100],null)],null)],null)],
null),GW,new n(null,1,[EW,!1],null),wr,new n(null,2,[er,"100%",qF,"100%"],null),MW,!0,LW,Wk.B(c,b),qE,Wk.B(c,b)],null)],null)}():null],null)],null)],null)],null)}}(a,function(){return function(a,c){c=I(c.points).pointIndex;return p(c)?(a=new V(null,2,5,W,[BW,Mi(a,c)],null),tL.j?tL.j(a):tL.call(null,a)):null}}(a))}
function lZ(){return function(a){return function(){return p(u(a))?new V(null,4,5,W,[Z,OL.Grid,new n(null,3,[Hv,!0,RA,12,JW,12],null),new V(null,3,5,W,[Z,OL.Grid,new V(null,4,5,W,[Z,OL.Card,new V(null,3,5,W,[Z,OL.CardHeader,new n(null,2,[IB,"Programming Skills",Vt,"My internal graph of programming skills.\nNodes are programming languages and the edges are the links I personally\nused to communicate between them. Node and edges size represent\nmy experience in the language or the interaction."],null)],
null),new V(null,3,5,W,[Z,OL.CardContent,new V(null,2,5,W,[aZ,u(a)],null)],null)],null)],null)],null):null}}(function(){var a=new V(null,2,5,W,[Iy,uW],null);return fL.j?fL.j(a):fL.call(null,a)}())}
if("undefined"===typeof GM||"undefined"===typeof HM||"undefined"===typeof fX||"undefined"===typeof bZ||"undefined"===typeof mZ){var mZ,nZ=al(X),oZ=al(X),pZ=al(X),qZ=al(X),rZ=z.D(new n(null,1,[Ds,SW],null),cv,Do.I?Do.I():Do.call(null));mZ=new Po(oi.B("dpham.cv.panels.skills","plots-cards"),Lj,SW,rZ,nZ,oZ,pZ,qZ)}mZ.ga(null,SW,function(){return new V(null,1,5,W,[kZ],null)});mZ.ga(null,uW,function(){return new V(null,1,5,W,[lZ],null)});
function oX(a,b){return new V(null,4,5,W,[Z,OL.Grid,new n(null,3,[Hv,!0,RA,12,Uy,12],null),new V(null,4,5,W,[Z,OL.Card,new n(null,1,[CW,0],null),new V(null,3,5,W,[Z,OL.CardHeader,new n(null,2,[IB,a,Vt,lK(new V(null,2,5,W,[kM,b],null))],null)],null)],null)],null)}
function pX(){return function(a){return function(){if(p(u(a))){var b=function(){return function(a){return function f(b){return new kk(null,function(){return function(){for(;;){var a=G(b);if(a){if(rj(a)){var c=Th(a),e=N(c),q=ok(e);a:for(var t=0;;)if(t<e){var v=Sg.B(c,t),y=null!=v&&(v.G&64||l===v.ea)?E.B(ln,v):v;v=z.B(y,fx);y=z.B(y,bq);v=gj(new V(null,3,5,W,[oX,v,y],null),new n(null,1,[nH,v],null));q.add(v);t+=1}else{c=!0;break a}return c?qk(q.wa(),f(Uh(a))):qk(q.wa(),null)}q=I(a);c=null!=q&&(q.G&64||
l===q.ea)?E.B(ln,q):q;q=z.B(c,fx);c=z.B(c,bq);return Si(gj(new V(null,3,5,W,[oX,q,c],null),new n(null,1,[nH,q],null)),f(ri(a)))}return null}}}(a),null,null)}}(a)(z.B(u(a),qu))}();return new V(null,3,5,W,[Z,OL.Grid,new V(null,4,5,W,[Z,OL.Card,new V(null,3,5,W,[Z,OL.CardHeader,new n(null,2,[IB,lK(new V(null,2,5,W,[kM,IB.j(u(a))],null)),Vt,lK(new V(null,2,5,W,[kM,Vt.j(u(a))],null))],null)],null),new V(null,3,5,W,[Z,OL.CardContent,new V(null,4,5,W,[Z,OL.Grid,new n(null,1,[tD,!0],null),b],null)],null)],
null)],null)}return null}}(function(){var a=new V(null,1,5,W,[sW],null);return fL.j?fL.j(a):fL.call(null,a)}())}function qX(){var a=new V(null,3,5,W,[SH,SW,new n(null,1,[Kv,"hard_skills.csv"],null)],null);tL.j?tL.j(a):tL.call(null,a);a=new V(null,3,5,W,[SH,CH,new n(null,1,[Kv,"skills.json"],null)],null);tL.j?tL.j(a):tL.call(null,a);a=new V(null,3,5,W,[SH,uW,new n(null,1,[Kv,"programming_skills.json"],null)],null);tL.j?tL.j(a):tL.call(null,a)}
function sZ(){return function(a){return function(){return new V(null,5,5,W,[Z,OL.Tabs,new n(null,6,[uv,r.j(oi.j(function(){var b=u(a);return p(b)?b:SW}())),PW,function(){return function(a){a=new V(null,2,5,W,[DY,ik.j(a)],null);return tL.j?tL.j(a):tL.call(null,a)}}(a),WW,Wz,yW,Wz,nG,"scrollable",XW,"on"],null),new V(null,3,5,W,[Z,OL.Tab,new n(null,3,[wW,"Summary",uv,"hard-skills",qE,function(){return function(){var a=new V(null,2,5,W,[DY,SW],null);return tL.j?tL.j(a):tL.call(null,a)}}(a)],null)],null),
new V(null,3,5,W,[Z,OL.Tab,new n(null,3,[wW,"Programming",uv,"programming-skills",qE,function(){return function(){var a=new V(null,2,5,W,[DY,uW],null);return tL.j?tL.j(a):tL.call(null,a)}}(a)],null)],null)],null)}}(function(){var a=new V(null,1,5,W,[vY],null);return fL.j?fL.j(a):fL.call(null,a)}())}
function rX(){return function(a){return function(){return new V(null,7,5,W,[Z,OL.Tabs,new n(null,6,[uv,r.j(oi.j(function(){var b=u(a);return p(b)?b:TW}())),PW,function(){return function(a){a=new V(null,2,5,W,[BW,ik.j(a)],null);return tL.j?tL.j(a):tL.call(null,a)}}(a),WW,Wz,yW,Wz,nG,"scrollable",XW,"on"],null),new V(null,3,5,W,[Z,OL.Tab,new n(null,3,[wW,"Language",uv,"languages",qE,function(){return function(){var a=new V(null,2,5,W,[BW,TW],null);return tL.j?tL.j(a):tL.call(null,a)}}(a)],null)],null),
new V(null,3,5,W,[Z,OL.Tab,new n(null,3,[wW,"Personality",uv,"personality",qE,function(){return function(){var a=new V(null,2,5,W,[BW,OW],null);return tL.j?tL.j(a):tL.call(null,a)}}(a)],null)],null),new V(null,3,5,W,[Z,OL.Tab,new n(null,3,[wW,"Data analysis",uv,"data-analysis",qE,function(){return function(){var a=new V(null,2,5,W,[BW,KW],null);return tL.j?tL.j(a):tL.call(null,a)}}(a)],null)],null),new V(null,3,5,W,[Z,OL.Tab,new n(null,3,[wW,"Software Engineering",uv,"software-engineering",qE,function(){return function(){var a=
new V(null,2,5,W,[BW,zY],null);return tL.j?tL.j(a):tL.call(null,a)}}(a)],null)],null)],null)}}(function(){var a=new V(null,1,5,W,[zW],null);return fL.j?fL.j(a):fL.call(null,a)}())}
function sX(){qX();var a=function(){var a=new V(null,1,5,W,[vY],null);return fL.j?fL.j(a):fL.call(null,a)}(),b=function(){var a=new V(null,1,5,W,[zW],null);return fL.j?fL.j(a):fL.call(null,a)}(),c=function(){var a=new V(null,1,5,W,[sW],null);return fL.j?fL.j(a):fL.call(null,a)}();return function(a,b,c){return function(b){b=null!=b&&(b.G&64||l===b.ea)?E.B(ln,b):b;b=z.B(b,yF);return new V(null,4,5,W,[rB,new n(null,1,[hG,PL(O([wb(b,"content")]))],null),new V(null,2,5,W,[Vq,new n(null,1,[hG,PL(O([wb(b,
"appBarSpacer")]))],null)],null),new V(null,5,5,W,[Z,OL.Grid,new n(null,4,[tD,!0,ys,PG,ZE,zB,pE,40],null),new V(null,4,5,W,[Z,OL.Grid,new n(null,3,[Hv,!0,RA,12,JW,6],null),new V(null,4,5,W,[Z,OL.Paper,new V(null,1,5,W,[sZ],null),new V(null,2,5,W,[mZ,u(a)],null)],null)],null),new V(null,4,5,W,[Z,OL.Grid,new n(null,3,[Hv,!0,RA,12,JW,6],null),new V(null,3,5,W,[Z,OL.Paper,p(u(c))?new V(null,3,5,W,[Oz,new V(null,1,5,W,[rX],null),new V(null,1,5,W,[pX],null)],null):null],null)],null)],null)],null)}}(a,b,
c)}function OM(){return new V(null,2,5,W,[Z,RL(new V(null,1,5,W,[TL],null),sX)],null)};Rd.setLoaded(void 0);