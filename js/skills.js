shadow$provide[488]=function(x,z,q,F,w,K){function a(b){a="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(a){return typeof a}:function(a){return a&&"function"===typeof Symbol&&a.constructor===Symbol&&a!==Symbol.prototype?"symbol":typeof a};return a(b)}function p(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1;d.configurable=!0;"value"in d&&(d.writable=!0);Object.defineProperty(a,d.key,d)}}function l(a,b,c){b&&p(a.prototype,b);c&&p(a,c);return a}function m(a){m=
Object.setPrototypeOf?Object.getPrototypeOf:function(a){return a.__proto__||Object.getPrototypeOf(a)};return m(a)}function k(a){if(void 0===a)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return a}function h(a,b){if("function"!==typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function");a.prototype=Object.create(b&&b.prototype,{constructor:{value:a,writable:!0,configurable:!0}});b&&e(a,b)}function e(a,b){e=Object.setPrototypeOf||
function(a,b){a.__proto__=b;return a};return e(a,b)}Object.defineProperty(w,"__esModule",{value:!0});w.default=function(d){var e=function(b){function c(b){if(!(this instanceof c))throw new TypeError("Cannot call a class as a function");b=m(c).call(this,b);b=!b||"object"!==a(b)&&"function"!==typeof b?k(this):b;b.p=Promise.resolve();b.resizeHandler=null;b.handlers={};b.syncWindowResize=b.syncWindowResize.bind(k(b));b.syncEventHandlers=b.syncEventHandlers.bind(k(b));b.attachUpdateEvents=b.attachUpdateEvents.bind(k(b));
b.getRef=b.getRef.bind(k(b));b.handleUpdate=b.handleUpdate.bind(k(b));b.figureCallback=b.figureCallback.bind(k(b));b.updatePlotly=b.updatePlotly.bind(k(b));return b}h(c,b);l(c,[{key:"updatePlotly",value:function(a,b,c){var e=this;this.p=this.p.then(function(){if(!e.el){if(e.unmounting){var a=Error("Component is unmounting");a.reason="unmounting"}else a=Error("Missing element reference");throw a;}return d.react(e.el,{data:e.props.data,layout:e.props.layout,config:e.props.config,frames:e.props.frames})}).then(function(){return e.syncWindowResize(a)}).then(this.syncEventHandlers).then(function(){return e.figureCallback(b)}).then(c?
this.attachUpdateEvents:function(){}).catch(function(a){if("unmounting"!==a.reason&&(console.error("Error while plotting:",a),e.props.onError))e.props.onError(a)})}},{key:"componentDidMount",value:function(){this.unmounting=!1;this.updatePlotly(!0,this.props.onInitialized,!0)}},{key:"componentDidUpdate",value:function(a){this.unmounting=!1;var b=a.frames&&a.frames.length?a.frames.length:0,c=this.props.frames&&this.props.frames.length?this.props.frames.length:0,d=void 0!==a.revision,e=a.revision!==
this.props.revision;(a.layout!==this.props.layout||a.data!==this.props.data||a.config!==this.props.config||c!==b||d&&(!d||e))&&this.updatePlotly(!1,this.props.onUpdate,!1)}},{key:"componentWillUnmount",value:function(){this.unmounting=!0;this.figureCallback(this.props.onPurge);this.resizeHandler&&r&&(window.removeEventListener("resize",this.resizeHandler),this.resizeHandler=null);this.removeUpdateEvents();d.purge(this.el)}},{key:"attachUpdateEvents",value:function(){var a=this;this.el&&this.el.removeListener&&
u.forEach(function(b){a.el.on(b,a.handleUpdate)})}},{key:"removeUpdateEvents",value:function(){var a=this;this.el&&this.el.removeListener&&u.forEach(function(b){a.el.removeListener(b,a.handleUpdate)})}},{key:"handleUpdate",value:function(){this.figureCallback(this.props.onUpdate)}},{key:"figureCallback",value:function(a){if("function"===typeof a){var b=this.el;a({data:b.data,layout:b.layout,frames:this.el._transitionData?this.el._transitionData._frames:null},this.el)}}},{key:"syncWindowResize",value:function(a){var b=
this;r&&(this.props.useResizeHandler&&!this.resizeHandler?(this.resizeHandler=function(){return d.Plots.resize(b.el)},window.addEventListener("resize",this.resizeHandler),a&&this.resizeHandler()):!this.props.useResizeHandler&&this.resizeHandler&&(window.removeEventListener("resize",this.resizeHandler),this.resizeHandler=null))}},{key:"getRef",value:function(a){this.el=a;this.props.debug&&r&&(window.gd=this.el)}},{key:"syncEventHandlers",value:function(){var a=this;n.forEach(function(b){var c=a.props["on"+
b],d=!!a.handlers[b];c&&!d?(a.handlers[b]=c,a.el.on("plotly_"+b.toLowerCase(),a.handlers[b])):!c&&d&&(a.el.removeListener("plotly_"+b.toLowerCase(),a.handlers[b]),delete a.handlers[b])})}},{key:"render",value:function(){return f.default.createElement("div",{id:this.props.divId,style:this.props.style,ref:this.getRef,className:this.props.className})}}]);return c}(f.Component);e.propTypes={data:b.default.arrayOf(b.default.object),config:b.default.object,layout:b.default.object,frames:b.default.arrayOf(b.default.object),
revision:b.default.number,onInitialized:b.default.func,onPurge:b.default.func,onError:b.default.func,onUpdate:b.default.func,debug:b.default.bool,style:b.default.object,className:b.default.string,useResizeHandler:b.default.bool,divId:b.default.string};n.forEach(function(a){e.propTypes["on"+a]=b.default.func});e.defaultProps={debug:!1,useResizeHandler:!1,data:[],style:{position:"relative",display:"inline-block"}};return e};var f=function(a){if(a&&a.__esModule)return a;var b={};if(null!=a)for(var c in a)if(Object.prototype.hasOwnProperty.call(a,
c)){var d=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(a,c):{};d.get||d.set?Object.defineProperty(b,c,d):b[c]=a[c]}b.default=a;return b}(q(5)),b=function(a){return a&&a.__esModule?a:{default:a}}(q(129)),n="AfterExport AfterPlot Animated AnimatingFrame AnimationInterrupted AutoSize BeforeExport ButtonClicked Click ClickAnnotation Deselect DoubleClick Framework Hover LegendClick LegendDoubleClick Relayout Restyle Redraw Selected Selecting SliderChange SliderEnd SliderStart Transitioning TransitionInterrupted Unhover".split(" "),
u=["plotly_restyle","plotly_redraw","plotly_relayout","plotly_doubleclick","plotly_animated"],r="undefined"!==typeof window};
shadow$provide[489]=function(x,z,q,F,w,K){(function(a){"object"===typeof w&&"undefined"!==typeof F?F.exports=a():"function"===typeof define&&define.amd?define([],a):("undefined"!==typeof window?window:"undefined"!==typeof x?x:"undefined"!==typeof self?self:this).Plotly=a()})(function(){return function(){function a(p,l,m){function k(e,b){if(!l[e]){if(!p[e]){var f="function"==typeof q&&q;if(!b&&f)return f(e,!0);if(h)return h(e,!0);b=Error("Cannot find module '"+e+"'");throw b.code="MODULE_NOT_FOUND",
b;}b=l[e]={exports:{}};p[e][0].call(b.exports,function(a){return k(p[e][1][a]||a)},b,b.exports,a,p,l,m)}return l[e].exports}for(var h="function"==typeof q&&q,e=0;e<m.length;e++)k(m[e]);return k}return a}()({1:[function(a,p,l){a=a("../src/lib");p={"X,X div":"direction:ltr;font-family:'Open Sans', verdana, arial, sans-serif;margin:0;padding:0;","X input,X button":"font-family:'Open Sans', verdana, arial, sans-serif;","X input:focus,X button:focus":"outline:none;","X a":"text-decoration:none;","X a:hover":"text-decoration:none;",
"X .crisp":"shape-rendering:crispEdges;","X .user-select-none":"-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;-o-user-select:none;user-select:none;","X svg":"overflow:hidden;","X svg a":"fill:#447adb;","X svg a:hover":"fill:#3c6dc5;","X .main-svg":"position:absolute;top:0;left:0;pointer-events:none;","X .main-svg .draglayer":"pointer-events:all;","X .cursor-default":"cursor:default;","X .cursor-pointer":"cursor:pointer;","X .cursor-crosshair":"cursor:crosshair;","X .cursor-move":"cursor:move;",
"X .cursor-col-resize":"cursor:col-resize;","X .cursor-row-resize":"cursor:row-resize;","X .cursor-ns-resize":"cursor:ns-resize;","X .cursor-ew-resize":"cursor:ew-resize;","X .cursor-sw-resize":"cursor:sw-resize;","X .cursor-s-resize":"cursor:s-resize;","X .cursor-se-resize":"cursor:se-resize;","X .cursor-w-resize":"cursor:w-resize;","X .cursor-e-resize":"cursor:e-resize;","X .cursor-nw-resize":"cursor:nw-resize;","X .cursor-n-resize":"cursor:n-resize;","X .cursor-ne-resize":"cursor:ne-resize;","X .cursor-grab":"cursor:-webkit-grab;cursor:grab;",
"X .modebar":"position:absolute;top:2px;right:2px;","X .ease-bg":"-webkit-transition:background-color 0.3s ease 0s;-moz-transition:background-color 0.3s ease 0s;-ms-transition:background-color 0.3s ease 0s;-o-transition:background-color 0.3s ease 0s;transition:background-color 0.3s ease 0s;","X .modebar--hover\x3e:not(.watermark)":"opacity:0;-webkit-transition:opacity 0.3s ease 0s;-moz-transition:opacity 0.3s ease 0s;-ms-transition:opacity 0.3s ease 0s;-o-transition:opacity 0.3s ease 0s;transition:opacity 0.3s ease 0s;",
"X:hover .modebar--hover .modebar-group":"opacity:1;","X .modebar-group":"float:left;display:inline-block;box-sizing:border-box;padding-left:8px;position:relative;vertical-align:middle;white-space:nowrap;","X .modebar-btn":"position:relative;font-size:16px;padding:3px 4px;height:22px;cursor:pointer;line-height:normal;box-sizing:border-box;","X .modebar-btn svg":"position:relative;top:2px;","X .modebar.vertical":"display:flex;flex-direction:column;flex-wrap:wrap;align-content:flex-end;max-height:100%;",
"X .modebar.vertical svg":"top:-1px;","X .modebar.vertical .modebar-group":"display:block;float:none;padding-left:0px;padding-bottom:8px;","X .modebar.vertical .modebar-group .modebar-btn":"display:block;text-align:center;","X [data-title]:before,X [data-title]:after":"position:absolute;-webkit-transform:translate3d(0, 0, 0);-moz-transform:translate3d(0, 0, 0);-ms-transform:translate3d(0, 0, 0);-o-transform:translate3d(0, 0, 0);transform:translate3d(0, 0, 0);display:none;opacity:0;z-index:1001;pointer-events:none;top:110%;right:50%;",
"X [data-title]:hover:before,X [data-title]:hover:after":"display:block;opacity:1;","X [data-title]:before":"content:'';position:absolute;background:transparent;border:6px solid transparent;z-index:1002;margin-top:-12px;border-bottom-color:#69738a;margin-right:-6px;","X [data-title]:after":"content:attr(data-title);background:#69738a;color:white;padding:8px 10px;font-size:12px;line-height:12px;white-space:nowrap;margin-right:-18px;border-radius:2px;","X .vertical [data-title]:before,X .vertical [data-title]:after":"top:0%;right:200%;",
"X .vertical [data-title]:before":"border:6px solid transparent;border-left-color:#69738a;margin-top:8px;margin-right:-30px;","X .select-outline":"fill:none;stroke-width:1;shape-rendering:crispEdges;","X .select-outline-1":"stroke:white;","X .select-outline-2":"stroke:black;stroke-dasharray:2px 2px;",Y:"font-family:'Open Sans';position:fixed;top:50px;right:20px;z-index:10000;font-size:10pt;max-width:180px;","Y p":"margin:0;","Y .notifier-note":"min-width:180px;max-width:250px;border:1px solid #fff;z-index:3000;margin:0;background-color:#8c97af;background-color:rgba(140,151,175,0.9);color:#fff;padding:10px;overflow-wrap:break-word;word-wrap:break-word;-ms-hyphens:auto;-webkit-hyphens:auto;hyphens:auto;",
"Y .notifier-close":"color:#fff;opacity:0.8;float:right;padding:0 5px;background:none;border:none;font-size:20px;font-weight:bold;line-height:20px;","Y .notifier-close:hover":"color:#444;text-decoration:none;cursor:pointer;"};for(var m in p)l=m.replace(/^,/," ,").replace(/X/g,".js-plotly-plot .plotly").replace(/Y/g,".plotly-notifier"),a.addStyleRule(l,p[m])},{"../src/lib":700}],2:[function(a,p,l){p.exports={undo:{width:857.1,height:1E3,path:"m857 350q0-87-34-166t-91-137-137-92-166-34q-96 0-183 41t-147 114q-4 6-4 13t5 11l76 77q6 5 14 5 9-1 13-7 41-53 100-82t126-29q58 0 110 23t92 61 61 91 22 111-22 111-61 91-92 61-110 23q-55 0-105-20t-90-57l77-77q17-16 8-38-10-23-33-23h-250q-15 0-25 11t-11 25v250q0 24 22 33 22 10 39-8l72-72q60 57 137 88t159 31q87 0 166-34t137-92 91-137 34-166z",
transform:"matrix(1 0 0 -1 0 850)"},home:{width:928.6,height:1E3,path:"m786 296v-267q0-15-11-26t-25-10h-214v214h-143v-214h-214q-15 0-25 10t-11 26v267q0 1 0 2t0 2l321 264 321-264q1-1 1-4z m124 39l-34-41q-5-5-12-6h-2q-7 0-12 3l-386 322-386-322q-7-4-13-4-7 2-12 7l-35 41q-4 5-3 13t6 12l401 334q18 15 42 15t43-15l136-114v109q0 8 5 13t13 5h107q8 0 13-5t5-13v-227l122-102q5-5 6-12t-4-13z",transform:"matrix(1 0 0 -1 0 850)"},"camera-retro":{width:1E3,height:1E3,path:"m518 386q0 8-5 13t-13 5q-37 0-63-27t-26-63q0-8 5-13t13-5 12 5 5 13q0 23 16 38t38 16q8 0 13 5t5 13z m125-73q0-59-42-101t-101-42-101 42-42 101 42 101 101 42 101-42 42-101z m-572-320h858v71h-858v-71z m643 320q0 89-62 152t-152 62-151-62-63-152 63-151 151-63 152 63 62 151z m-571 358h214v72h-214v-72z m-72-107h858v143h-462l-36-71h-360v-72z m929 143v-714q0-30-21-51t-50-21h-858q-29 0-50 21t-21 51v714q0 30 21 51t50 21h858q29 0 50-21t21-51z",
transform:"matrix(1 0 0 -1 0 850)"},zoombox:{width:1E3,height:1E3,path:"m1000-25l-250 251c40 63 63 138 63 218 0 224-182 406-407 406-224 0-406-182-406-406s183-406 407-406c80 0 155 22 218 62l250-250 125 125z m-812 250l0 438 437 0 0-438-437 0z m62 375l313 0 0-312-313 0 0 312z",transform:"matrix(1 0 0 -1 0 850)"},pan:{width:1E3,height:1E3,path:"m1000 350l-187 188 0-125-250 0 0 250 125 0-188 187-187-187 125 0 0-250-250 0 0 125-188-188 186-187 0 125 252 0 0-250-125 0 187-188 188 188-125 0 0 250 250 0 0-126 187 188z",
transform:"matrix(1 0 0 -1 0 850)"},zoom_plus:{width:875,height:1E3,path:"m1 787l0-875 875 0 0 875-875 0z m687-500l-187 0 0-187-125 0 0 187-188 0 0 125 188 0 0 187 125 0 0-187 187 0 0-125z",transform:"matrix(1 0 0 -1 0 850)"},zoom_minus:{width:875,height:1E3,path:"m0 788l0-876 875 0 0 876-875 0z m688-500l-500 0 0 125 500 0 0-125z",transform:"matrix(1 0 0 -1 0 850)"},autoscale:{width:1E3,height:1E3,path:"m250 850l-187 0-63 0 0-62 0-188 63 0 0 188 187 0 0 62z m688 0l-188 0 0-62 188 0 0-188 62 0 0 188 0 62-62 0z m-875-938l0 188-63 0 0-188 0-62 63 0 187 0 0 62-187 0z m875 188l0-188-188 0 0-62 188 0 62 0 0 62 0 188-62 0z m-125 188l-1 0-93-94-156 156 156 156 92-93 2 0 0 250-250 0 0-2 93-92-156-156-156 156 94 92 0 2-250 0 0-250 0 0 93 93 157-156-157-156-93 94 0 0 0-250 250 0 0 0-94 93 156 157 156-157-93-93 0 0 250 0 0 250z",
transform:"matrix(1 0 0 -1 0 850)"},tooltip_basic:{width:1500,height:1E3,path:"m375 725l0 0-375-375 375-374 0-1 1125 0 0 750-1125 0z",transform:"matrix(1 0 0 -1 0 850)"},tooltip_compare:{width:1125,height:1E3,path:"m187 786l0 2-187-188 188-187 0 0 937 0 0 373-938 0z m0-499l0 1-187-188 188-188 0 0 937 0 0 376-938-1z",transform:"matrix(1 0 0 -1 0 850)"},plotlylogo:{width:1542,height:1E3,path:"m0-10h182v-140h-182v140z m228 146h183v-286h-183v286z m225 714h182v-1000h-182v1000z m225-285h182v-715h-182v715z m225 142h183v-857h-183v857z m231-428h182v-429h-182v429z m225-291h183v-138h-183v138z",
transform:"matrix(1 0 0 -1 0 850)"},"z-axis":{width:1E3,height:1E3,path:"m833 5l-17 108v41l-130-65 130-66c0 0 0 38 0 39 0-1 36-14 39-25 4-15-6-22-16-30-15-12-39-16-56-20-90-22-187-23-279-23-261 0-341 34-353 59 3 60 228 110 228 110-140-8-351-35-351-116 0-120 293-142 474-142 155 0 477 22 477 142 0 50-74 79-163 96z m-374 94c-58-5-99-21-99-40 0-24 65-43 144-43 79 0 143 19 143 43 0 19-42 34-98 40v216h87l-132 135-133-135h88v-216z m167 515h-136v1c16 16 31 34 46 52l84 109v54h-230v-71h124v-1c-16-17-28-32-44-51l-89-114v-51h245v72z",
transform:"matrix(1 0 0 -1 0 850)"},"3d_rotate":{width:1E3,height:1E3,path:"m922 660c-5 4-9 7-14 11-359 263-580-31-580-31l-102 28 58-400c0 1 1 1 2 2 118 108 351 249 351 249s-62 27-100 42c88 83 222 183 347 122 16-8 30-17 44-27-2 1-4 2-6 4z m36-329c0 0 64 229-88 296-62 27-124 14-175-11 157-78 225-208 249-266 8-19 11-31 11-31 2 5 6 15 11 32-5-13-8-20-8-20z m-775-239c70-31 117-50 198-32-121 80-199 346-199 346l-96-15-58-12c0 0 55-226 155-287z m603 133l-317-139c0 0 4-4 19-14 7-5 24-15 24-15s-177-147-389 4c235-287 536-112 536-112l31-22 100 299-4-1z m-298-153c6-4 14-9 24-15 0 0-17 10-24 15z",
transform:"matrix(1 0 0 -1 0 850)"},camera:{width:1E3,height:1E3,path:"m500 450c-83 0-150-67-150-150 0-83 67-150 150-150 83 0 150 67 150 150 0 83-67 150-150 150z m400 150h-120c-16 0-34 13-39 29l-31 93c-6 15-23 28-40 28h-340c-16 0-34-13-39-28l-31-94c-6-15-23-28-40-28h-120c-55 0-100-45-100-100v-450c0-55 45-100 100-100h800c55 0 100 45 100 100v450c0 55-45 100-100 100z m-400-550c-138 0-250 112-250 250 0 138 112 250 250 250 138 0 250-112 250-250 0-138-112-250-250-250z m365 380c-19 0-35 16-35 35 0 19 16 35 35 35 19 0 35-16 35-35 0-19-16-35-35-35z",
transform:"matrix(1 0 0 -1 0 850)"},movie:{width:1E3,height:1E3,path:"m938 413l-188-125c0 37-17 71-44 94 64 38 107 107 107 187 0 121-98 219-219 219-121 0-219-98-219-219 0-61 25-117 66-156h-115c30 33 49 76 49 125 0 103-84 187-187 187s-188-84-188-187c0-57 26-107 65-141-38-22-65-62-65-109v-250c0-70 56-126 125-126h500c69 0 125 56 125 126l188-126c34 0 62 28 62 63v375c0 35-28 63-62 63z m-750 0c-69 0-125 56-125 125s56 125 125 125 125-56 125-125-56-125-125-125z m406-1c-87 0-157 70-157 157 0 86 70 156 157 156s156-70 156-156-70-157-156-157z",
transform:"matrix(1 0 0 -1 0 850)"},question:{width:857.1,height:1E3,path:"m500 82v107q0 8-5 13t-13 5h-107q-8 0-13-5t-5-13v-107q0-8 5-13t13-5h107q8 0 13 5t5 13z m143 375q0 49-31 91t-77 65-95 23q-136 0-207-119-9-14 4-24l74-55q4-4 10-4 9 0 14 7 30 38 48 51 19 14 48 14 27 0 48-15t21-33q0-21-11-34t-38-25q-35-16-65-48t-29-70v-20q0-8 5-13t13-5h107q8 0 13 5t5 13q0 10 12 27t30 28q18 10 28 16t25 19 25 27 16 34 7 45z m214-107q0-117-57-215t-156-156-215-58-216 58-155 156-58 215 58 215 155 156 216 58 215-58 156-156 57-215z",
transform:"matrix(1 0 0 -1 0 850)"},disk:{width:857.1,height:1E3,path:"m214-7h429v214h-429v-214z m500 0h72v500q0 8-6 21t-11 20l-157 156q-5 6-19 12t-22 5v-232q0-22-15-38t-38-16h-322q-22 0-37 16t-16 38v232h-72v-714h72v232q0 22 16 38t37 16h465q22 0 38-16t15-38v-232z m-214 518v178q0 8-5 13t-13 5h-107q-7 0-13-5t-5-13v-178q0-8 5-13t13-5h107q7 0 13 5t5 13z m357-18v-518q0-22-15-38t-38-16h-750q-23 0-38 16t-16 38v750q0 22 16 38t38 16h517q23 0 50-12t42-26l156-157q16-15 27-42t11-49z",transform:"matrix(1 0 0 -1 0 850)"},
lasso:{width:1031,height:1E3,path:"m1018 538c-36 207-290 336-568 286-277-48-473-256-436-463 10-57 36-108 76-151-13-66 11-137 68-183 34-28 75-41 114-42l-55-70 0 0c-2-1-3-2-4-3-10-14-8-34 5-45 14-11 34-8 45 4 1 1 2 3 2 5l0 0 113 140c16 11 31 24 45 40 4 3 6 7 8 11 48-3 100 0 151 9 278 48 473 255 436 462z m-624-379c-80 14-149 48-197 96 42 42 109 47 156 9 33-26 47-66 41-105z m-187-74c-19 16-33 37-39 60 50-32 109-55 174-68-42-25-95-24-135 8z m360 75c-34-7-69-9-102-8 8 62-16 128-68 170-73 59-175 54-244-5-9 20-16 40-20 61-28 159 121 317 333 354s407-60 434-217c28-159-121-318-333-355z",
transform:"matrix(1 0 0 -1 0 850)"},selectbox:{width:1E3,height:1E3,path:"m0 850l0-143 143 0 0 143-143 0z m286 0l0-143 143 0 0 143-143 0z m285 0l0-143 143 0 0 143-143 0z m286 0l0-143 143 0 0 143-143 0z m-857-286l0-143 143 0 0 143-143 0z m857 0l0-143 143 0 0 143-143 0z m-857-285l0-143 143 0 0 143-143 0z m857 0l0-143 143 0 0 143-143 0z m-857-286l0-143 143 0 0 143-143 0z m286 0l0-143 143 0 0 143-143 0z m285 0l0-143 143 0 0 143-143 0z m286 0l0-143 143 0 0 143-143 0z",transform:"matrix(1 0 0 -1 0 850)"},
spikeline:{width:1E3,height:1E3,path:"M512 409c0-57-46-104-103-104-57 0-104 47-104 104 0 57 47 103 104 103 57 0 103-46 103-103z m-327-39l92 0 0 92-92 0z m-185 0l92 0 0 92-92 0z m370-186l92 0 0 93-92 0z m0-184l92 0 0 92-92 0z",transform:"matrix(1.5 0 0 -1.5 0 850)"},newplotlylogo:{name:"newplotlylogo",svg:"\x3csvg xmlns\x3d'http://www.w3.org/2000/svg' viewBox\x3d'0 0 132 132'\x3e\x3cdefs\x3e\x3cstyle\x3e.cls-1 {fill: #119dff;} .cls-2 {fill: #25fefd;} .cls-3 {fill: #fff;}\x3c/style\x3e\x3c/defs\x3e\x3ctitle\x3eplotly-logomark\x3c/title\x3e\x3cg id\x3d'symbol'\x3e\x3crect class\x3d'cls-1' width\x3d'132' height\x3d'132' rx\x3d'6' ry\x3d'6'/\x3e\x3ccircle class\x3d'cls-2' cx\x3d'78' cy\x3d'54' r\x3d'6'/\x3e\x3ccircle class\x3d'cls-2' cx\x3d'102' cy\x3d'30' r\x3d'6'/\x3e\x3ccircle class\x3d'cls-2' cx\x3d'78' cy\x3d'30' r\x3d'6'/\x3e\x3ccircle class\x3d'cls-2' cx\x3d'54' cy\x3d'30' r\x3d'6'/\x3e\x3ccircle class\x3d'cls-2' cx\x3d'30' cy\x3d'30' r\x3d'6'/\x3e\x3ccircle class\x3d'cls-2' cx\x3d'30' cy\x3d'54' r\x3d'6'/\x3e\x3cpath class\x3d'cls-3' d\x3d'M30,72a6,6,0,0,0-6,6v24a6,6,0,0,0,12,0V78A6,6,0,0,0,30,72Z'/\x3e\x3cpath class\x3d'cls-3' d\x3d'M78,72a6,6,0,0,0-6,6v24a6,6,0,0,0,12,0V78A6,6,0,0,0,78,72Z'/\x3e\x3cpath class\x3d'cls-3' d\x3d'M54,48a6,6,0,0,0-6,6v48a6,6,0,0,0,12,0V54A6,6,0,0,0,54,48Z'/\x3e\x3cpath class\x3d'cls-3' d\x3d'M102,48a6,6,0,0,0-6,6v48a6,6,0,0,0,12,0V54A6,6,0,0,0,102,48Z'/\x3e\x3c/g\x3e\x3c/svg\x3e"}}},
{}],3:[function(a,p,l){p.exports=a("../src/transforms/aggregate")},{"../src/transforms/aggregate":1183}],4:[function(a,p,l){p.exports=a("../src/traces/bar")},{"../src/traces/bar":846}],5:[function(a,p,l){p.exports=a("../src/traces/barpolar")},{"../src/traces/barpolar":858}],6:[function(a,p,l){p.exports=a("../src/traces/box")},{"../src/traces/box":868}],7:[function(a,p,l){p.exports=a("../src/components/calendars")},{"../src/components/calendars":575}],8:[function(a,p,l){p.exports=a("../src/traces/candlestick")},
{"../src/traces/candlestick":877}],9:[function(a,p,l){p.exports=a("../src/traces/carpet")},{"../src/traces/carpet":896}],10:[function(a,p,l){p.exports=a("../src/traces/choropleth")},{"../src/traces/choropleth":910}],11:[function(a,p,l){p.exports=a("../src/traces/cone")},{"../src/traces/cone":918}],12:[function(a,p,l){p.exports=a("../src/traces/contour")},{"../src/traces/contour":933}],13:[function(a,p,l){p.exports=a("../src/traces/contourcarpet")},{"../src/traces/contourcarpet":944}],14:[function(a,
p,l){p.exports=a("../src/core")},{"../src/core":679}],15:[function(a,p,l){p.exports=a("../src/transforms/filter")},{"../src/transforms/filter":1184}],16:[function(a,p,l){p.exports=a("../src/transforms/groupby")},{"../src/transforms/groupby":1185}],17:[function(a,p,l){p.exports=a("../src/traces/heatmap")},{"../src/traces/heatmap":956}],18:[function(a,p,l){p.exports=a("../src/traces/heatmapgl")},{"../src/traces/heatmapgl":965}],19:[function(a,p,l){p.exports=a("../src/traces/histogram")},{"../src/traces/histogram":977}],
20:[function(a,p,l){p.exports=a("../src/traces/histogram2d")},{"../src/traces/histogram2d":984}],21:[function(a,p,l){p.exports=a("../src/traces/histogram2dcontour")},{"../src/traces/histogram2dcontour":988}],22:[function(a,p,l){l=a("./core");l.register([a("./bar"),a("./box"),a("./heatmap"),a("./histogram"),a("./histogram2d"),a("./histogram2dcontour"),a("./contour"),a("./scatterternary"),a("./violin"),a("./waterfall"),a("./pie"),a("./sunburst"),a("./scatter3d"),a("./surface"),a("./isosurface"),a("./mesh3d"),
a("./cone"),a("./streamtube"),a("./scattergeo"),a("./choropleth"),a("./scattergl"),a("./splom"),a("./pointcloud"),a("./heatmapgl"),a("./parcoords"),a("./parcats"),a("./scattermapbox"),a("./sankey"),a("./table"),a("./carpet"),a("./scattercarpet"),a("./contourcarpet"),a("./ohlc"),a("./candlestick"),a("./scatterpolar"),a("./scatterpolargl"),a("./barpolar")]);l.register([a("./aggregate"),a("./filter"),a("./groupby"),a("./sort")]);l.register([a("./calendars")]);p.exports=l},{"./aggregate":3,"./bar":4,
"./barpolar":5,"./box":6,"./calendars":7,"./candlestick":8,"./carpet":9,"./choropleth":10,"./cone":11,"./contour":12,"./contourcarpet":13,"./core":14,"./filter":15,"./groupby":16,"./heatmap":17,"./heatmapgl":18,"./histogram":19,"./histogram2d":20,"./histogram2dcontour":21,"./isosurface":23,"./mesh3d":24,"./ohlc":25,"./parcats":26,"./parcoords":27,"./pie":28,"./pointcloud":29,"./sankey":30,"./scatter3d":31,"./scattercarpet":32,"./scattergeo":33,"./scattergl":34,"./scattermapbox":35,"./scatterpolar":36,
"./scatterpolargl":37,"./scatterternary":38,"./sort":39,"./splom":40,"./streamtube":41,"./sunburst":42,"./surface":43,"./table":44,"./violin":45,"./waterfall":46}],23:[function(a,p,l){p.exports=a("../src/traces/isosurface")},{"../src/traces/isosurface":993}],24:[function(a,p,l){p.exports=a("../src/traces/mesh3d")},{"../src/traces/mesh3d":998}],25:[function(a,p,l){p.exports=a("../src/traces/ohlc")},{"../src/traces/ohlc":1003}],26:[function(a,p,l){p.exports=a("../src/traces/parcats")},{"../src/traces/parcats":1012}],
27:[function(a,p,l){p.exports=a("../src/traces/parcoords")},{"../src/traces/parcoords":1021}],28:[function(a,p,l){p.exports=a("../src/traces/pie")},{"../src/traces/pie":1032}],29:[function(a,p,l){p.exports=a("../src/traces/pointcloud")},{"../src/traces/pointcloud":1041}],30:[function(a,p,l){p.exports=a("../src/traces/sankey")},{"../src/traces/sankey":1047}],31:[function(a,p,l){p.exports=a("../src/traces/scatter3d")},{"../src/traces/scatter3d":1083}],32:[function(a,p,l){p.exports=a("../src/traces/scattercarpet")},
{"../src/traces/scattercarpet":1089}],33:[function(a,p,l){p.exports=a("../src/traces/scattergeo")},{"../src/traces/scattergeo":1096}],34:[function(a,p,l){p.exports=a("../src/traces/scattergl")},{"../src/traces/scattergl":1104}],35:[function(a,p,l){p.exports=a("../src/traces/scattermapbox")},{"../src/traces/scattermapbox":1110}],36:[function(a,p,l){p.exports=a("../src/traces/scatterpolar")},{"../src/traces/scatterpolar":1117}],37:[function(a,p,l){p.exports=a("../src/traces/scatterpolargl")},{"../src/traces/scatterpolargl":1121}],
38:[function(a,p,l){p.exports=a("../src/traces/scatterternary")},{"../src/traces/scatterternary":1127}],39:[function(a,p,l){p.exports=a("../src/transforms/sort")},{"../src/transforms/sort":1187}],40:[function(a,p,l){p.exports=a("../src/traces/splom")},{"../src/traces/splom":1132}],41:[function(a,p,l){p.exports=a("../src/traces/streamtube")},{"../src/traces/streamtube":1137}],42:[function(a,p,l){p.exports=a("../src/traces/sunburst")},{"../src/traces/sunburst":1143}],43:[function(a,p,l){p.exports=a("../src/traces/surface")},
{"../src/traces/surface":1152}],44:[function(a,p,l){p.exports=a("../src/traces/table")},{"../src/traces/table":1160}],45:[function(a,p,l){p.exports=a("../src/traces/violin")},{"../src/traces/violin":1168}],46:[function(a,p,l){p.exports=a("../src/traces/waterfall")},{"../src/traces/waterfall":1178}],47:[function(a,p,l){function m(a,e){this._controllerNames=Object.keys(a);this._controllerList=this._controllerNames.map(function(b){return a[b]});this._mode=e;this._active=a[e];this._active||(this._mode=
"turntable",this._active=a.turntable);this.modes=this._controllerNames;this.computedMatrix=this._active.computedMatrix;this.computedEye=this._active.computedEye;this.computedUp=this._active.computedUp;this.computedCenter=this._active.computedCenter;this.computedRadius=this._active.computedRadius}p.exports=function(a){a=a||{};var b=a.eye||[0,0,1],f=a.center||[0,0,0],r=a.up||[0,1,0],d=a.distanceLimits||[0,Infinity];a=a.mode||"turntable";var g=k(),c=h(),v=e();g.setDistanceLimits(d[0],d[1]);g.lookAt(0,
b,f,r);c.setDistanceLimits(d[0],d[1]);c.lookAt(0,b,f,r);v.setDistanceLimits(d[0],d[1]);v.lookAt(0,b,f,r);return new m({turntable:g,orbit:c,matrix:v},a)};var k=a("turntable-camera-controller"),h=a("orbit-camera-controller"),e=a("matrix-camera-controller"),f=m.prototype;[["flush",1],["idle",1],["lookAt",4],["rotate",4],["pan",4],["translate",4],["setMatrix",2],["setDistanceLimits",2],["setDistance",2]].forEach(function(a){for(var b=a[0],e=[],h=0;h<a[1];++h)e.push("a"+h);a="var cc\x3dthis._controllerList;for(var i\x3d0;i\x3ccc.length;++i){cc[i]."+
a[0]+"("+e.join()+")}";f[b]=Function.apply(null,e.concat(a))});f.recalcMatrix=function(a){this._active.recalcMatrix(a)};f.getDistance=function(a){return this._active.getDistance(a)};f.getDistanceLimits=function(a){return this._active.getDistanceLimits(a)};f.lastT=function(){return this._active.lastT()};f.setMode=function(a){if(a!==this._mode){var b=this._controllerNames.indexOf(a);if(!(0>b)){var e=this._active;b=this._controllerList[b];var f=Math.max(e.lastT(),b.lastT());e.recalcMatrix(f);b.setMatrix(f,
e.computedMatrix);this._active=b;this._mode=a;this.computedMatrix=this._active.computedMatrix;this.computedEye=this._active.computedEye;this.computedUp=this._active.computedUp;this.computedCenter=this._active.computedCenter;this.computedRadius=this._active.computedRadius}}};f.getMode=function(){return this._mode}},{"matrix-camera-controller":425,"orbit-camera-controller":448,"turntable-camera-controller":526}],48:[function(a,p,l){(function(m,k){"object"===typeof l&&"undefined"!==typeof p?k(l,a("d3-array"),
a("d3-collection"),a("d3-shape")):k(m.d3=m.d3||{},m.d3,m.d3,m.d3)})(this,function(a,k,h,e){function f(a){return a.target.depth}function b(a,b){return a.sourceLinks.length?a.depth:b-1}function n(a){return function(){return a}}function m(a,b){return d(a.source,b.source)||a.index-b.index}function r(a,b){return d(a.target,b.target)||a.index-b.index}function d(a,b){return a.y0-b.y0}function g(a){return a.value}function c(a){return(a.y0+a.y1)/2}function v(a){return c(a.source)*a.value}function t(a){return c(a.target)*
a.value}function y(a){return a.index}function B(a){return a.nodes}function D(a){return a.links}function G(a,b){a=a.get(b);if(!a)throw Error("missing: "+b);return a}function A(a){return[a.source.x1,a.y0]}function C(a){return[a.target.x0,a.y1]}a.sankey=function(){function a(){var a={nodes:x.apply(null,arguments),links:ia.apply(null,arguments)};e(a);f(a);u(a);C(a,S);A(a);return a}function e(a){a.nodes.forEach(function(a,b){a.index=b;a.sourceLinks=[];a.targetLinks=[]});var b=h.map(a.nodes,U);a.links.forEach(function(a,
c){a.index=c;c=a.source;var d=a.target;"object"!==typeof c&&(c=a.source=G(b,c));"object"!==typeof d&&(d=a.target=G(b,d));c.sourceLinks.push(a);d.targetLinks.push(a)})}function f(a){a.nodes.forEach(function(a){a.value=Math.max(k.sum(a.sourceLinks,g),k.sum(a.targetLinks,g))})}function u(a){var b;var c=a.nodes;var d=[];for(b=0;c.length;++b,c=d,d=[])c.forEach(function(a){a.depth=b;a.sourceLinks.forEach(function(a){0>d.indexOf(a.target)&&d.push(a.target)})});c=a.nodes;d=[];for(b=0;c.length;++b,c=d,d=[])c.forEach(function(a){a.height=
b;a.targetLinks.forEach(function(a){0>d.indexOf(a.source)&&d.push(a.source)})});var e=(q-l-R)/(b-1);a.nodes.forEach(function(a){a.x1=(a.x0=l+Math.max(0,Math.min(b-1,Math.floor(w.call(null,a,b))))*e)+R})}function C(a){function b(a){n.forEach(function(b){b.forEach(function(b){if(b.targetLinks.length){var d=(k.sum(b.targetLinks,v)/k.sum(b.targetLinks,g)-c(b))*a;b.y0+=d;b.y1+=d}})})}function e(a){n.slice().reverse().forEach(function(b){b.forEach(function(b){if(b.sourceLinks.length){var d=(k.sum(b.sourceLinks,
t)/k.sum(b.sourceLinks,g)-c(b))*a;b.y0+=d;b.y1+=d}})})}function f(){n.forEach(function(a){var b=p,c=a.length,e;a.sort(d);for(e=0;e<c;++e){var g=a[e];var f=b-g.y0;0<f&&(g.y0+=f,g.y1+=f);b=g.y1+ca}f=b-ca-L;if(0<f)for(b=g.y0-=f,g.y1-=f,e=c-2;0<=e;--e)g=a[e],f=g.y1+ca-b,0<f&&(g.y0-=f,g.y1-=f),b=g.y0})}var n=h.nest().key(function(a){return a.x0}).sortKeys(k.ascending).entries(a.nodes).map(function(a){return a.values});(function(){var b=k.max(n,function(a){return a.length});b=W*(L-p)/(b-1);ca>b&&(ca=b);
var c=k.min(n,function(a){return(L-p-(a.length-1)*ca)/k.sum(a,g)});n.forEach(function(a){a.forEach(function(a,b){a.y1=(a.y0=b)+a.value*c})});a.links.forEach(function(a){a.width=a.value*c})})();f();for(var m=1,r=S;0<r;--r)e(m*=.99),f(),b(m),f()}function A(a){a.nodes.forEach(function(a){a.sourceLinks.sort(r);a.targetLinks.sort(m)});a.nodes.forEach(function(a){var b=a.y0,c=b;a.sourceLinks.forEach(function(a){a.y0=b+a.width/2;b+=a.width});a.targetLinks.forEach(function(a){a.y1=c+a.width/2;c+=a.width})})}
var l=0,p=0,q=1,L=1,R=24,ca=8,U=y,w=b,x=B,ia=D,S=32,W=2/3;a.update=function(a){A(a);return a};a.nodeId=function(b){return arguments.length?(U="function"===typeof b?b:n(b),a):U};a.nodeAlign=function(b){return arguments.length?(w="function"===typeof b?b:n(b),a):w};a.nodeWidth=function(b){return arguments.length?(R=+b,a):R};a.nodePadding=function(b){return arguments.length?(ca=+b,a):ca};a.nodes=function(b){return arguments.length?(x="function"===typeof b?b:n(b),a):x};a.links=function(b){return arguments.length?
(ia="function"===typeof b?b:n(b),a):ia};a.size=function(b){return arguments.length?(l=p=0,q=+b[0],L=+b[1],a):[q-l,L-p]};a.extent=function(b){return arguments.length?(l=+b[0][0],q=+b[1][0],p=+b[0][1],L=+b[1][1],a):[[l,p],[q,L]]};a.iterations=function(b){return arguments.length?(S=+b,a):S};return a};a.sankeyCenter=function(a){return a.targetLinks.length?a.depth:a.sourceLinks.length?k.min(a.sourceLinks,f)-1:0};a.sankeyLeft=function(a){return a.depth};a.sankeyRight=function(a,b){return b-1-a.height};
a.sankeyJustify=b;a.sankeyLinkHorizontal=function(){return e.linkHorizontal().source(A).target(C)};Object.defineProperty(a,"__esModule",{value:!0})})},{"d3-array":142,"d3-collection":143,"d3-shape":152}],49:[function(a,p,l){l="undefined"===typeof WeakMap?a("weak-map"):WeakMap;var m=a("gl-buffer"),k=a("gl-vao"),h=new l;p.exports=function(a){var e=h.get(a),b=e&&(e._triangleBuffer.handle||e._triangleBuffer.buffer);b&&a.isBuffer(b)||(b=m(a,new Float32Array([-1,-1,-1,4,4,-1])),e=k(a,[{buffer:b,type:a.FLOAT,
size:2}]),e._triangleBuffer=b,h.set(a,e));e.bind();a.drawArrays(a.TRIANGLES,0,3);e.unbind()}},{"gl-buffer":237,"gl-vao":319,"weak-map":536}],50:[function(a,p,l){p.exports=function(a){var k=0,h=0,e=0,f=0;return a.map(function(a){a=a.slice();var b=a[0],m=b.toUpperCase();if(b!=m)switch(a[0]=m,b){case "a":a[6]+=e;a[7]+=f;break;case "v":a[1]+=f;break;case "h":a[1]+=e;break;default:for(b=1;b<a.length;)a[b++]+=e,a[b++]+=f}switch(m){case "Z":e=k;f=h;break;case "H":e=a[1];break;case "V":f=a[1];break;case "M":e=
k=a[1];f=h=a[2];break;default:e=a[a.length-2],f=a[a.length-1]}return a})}},{}],51:[function(a,p,l){var m=a("pad-left");p.exports=function(a,h,e){h="number"===typeof h?h:1;e=e||": ";a=a.split(/\r?\n/);var f=String(a.length+h-1).length;return a.map(function(a,n){n+=h;return m(n,f-String(n).length)+e+a}).join("\n")}},{"pad-left":449}],52:[function(a,p,l){p.exports=function(a){var h=a.length;if(0===h)return[];if(1===h)return[0];for(var e=a[0].length,f=[a[0]],b=[0],n=1;n<h;++n){f.push(a[n]);a:{var k=f;
for(var r=e,d=Array(r+1),g=0;g<k.length;++g)d[g]=k[g];for(g=0;g<=k.length;++g){for(var c=k.length;c<=r;++c){for(var v=Array(r),t=0;t<r;++t)v[t]=Math.pow(c+1-g,t);d[c]=v}if(m.apply(void 0,d)){k=!0;break a}}k=!1}if(k){if(b.push(n),b.length===e+1)break}else f.pop()}return b};var m=a("robust-orientation")},{"robust-orientation":494}],53:[function(a,p,l){p.exports=function(a,e){return m(e).filter(function(f){for(var b=Array(f.length),h=0;h<f.length;++h)b[h]=e[f[h]];return 1>k(b)*a})};var m=a("delaunay-triangulate"),
k=a("circumradius")},{circumradius:104,"delaunay-triangulate":156}],54:[function(a,p,l){p.exports=function(a,e){return k(m(a,e))};var m=a("alpha-complex"),k=a("simplicial-complex-boundary")},{"alpha-complex":53,"simplicial-complex-boundary":501}],55:[function(a,p,l){p.exports=function(a,k){if(!a||null==a.length)throw Error("Argument should be an array");k=null==k?1:Math.floor(k);for(var h=Array(2*k),e=0;e<k;e++){for(var f=-Infinity,b=Infinity,n=e,m=a.length;n<m;n+=k)a[n]>f&&(f=a[n]),a[n]<b&&(b=a[n]);
h[e]=b;h[k+e]=f}return h}},{}],56:[function(a,p,l){var m=a("array-bounds");p.exports=function(a,h,e){if(!a||null==a.length)throw Error("Argument should be an array");null==h&&(h=1);null==e&&(e=m(a,h));for(var f=0;f<h;f++){var b=e[h+f],n=e[f],k,r=a.length;if(Infinity===b&&-Infinity===n)for(k=f;k<r;k+=h)a[k]=a[k]===b?1:a[k]===n?0:.5;else if(Infinity===b)for(k=f;k<r;k+=h)a[k]=a[k]===b?1:0;else if(-Infinity===n)for(k=f;k<r;k+=h)a[k]=a[k]===n?0:1;else for(b-=n,k=f;k<r;k+=h)a[k]=0===b?.5:(a[k]-n)/b}return a}},
{"array-bounds":55}],57:[function(a,p,l){p.exports=function(a,k){var h="number"===typeof a,e="number"===typeof k;h&&!e?(k=a,a=0):h||e||(k=a=0);a|=0;k=(k|0)-a;if(0>k)throw Error("array length must be positive");h=Array(k);for(e=0;e<k;e++,a++)h[e]=a;return h}},{}],58:[function(a,p,l){(function(m){function k(a,b){if(a===b)return 0;for(var c=a.length,d=b.length,e=0,g=Math.min(c,d);e<g;++e)if(a[e]!==b[e]){c=a[e];d=b[e];break}return c<d?-1:d<c?1:0}function h(a){return m.Buffer&&"function"===typeof m.Buffer.isBuffer?
m.Buffer.isBuffer(a):!(null==a||!a._isBuffer)}function e(a){return h(a)||"function"!==typeof m.ArrayBuffer?!1:"function"===typeof ArrayBuffer.isView?ArrayBuffer.isView(a):a?a instanceof DataView||a.buffer&&a.buffer instanceof ArrayBuffer?!0:!1:!1}function f(a){if(B.isFunction(a))return A?a.name:(a=a.toString().match(l))&&a[1]}function b(a,b){return"string"===typeof a?a.length<b?a:a.slice(0,b):a}function n(a){if(A||!B.isFunction(a))return B.inspect(a);a=f(a);return"[Function"+(a?": "+a:"")+"]"}function u(a,
b,c,d,e){throw new C.AssertionError({message:c,actual:a,expected:b,operator:d,stackStartFunction:e});}function r(a,b){a||u(a,!0,b,"\x3d\x3d",C.ok)}function d(a,b,d,g){if(a===b)return!0;if(h(a)&&h(b))return 0===k(a,b);if(B.isDate(a)&&B.isDate(b))return a.getTime()===b.getTime();if(B.isRegExp(a)&&B.isRegExp(b))return a.source===b.source&&a.global===b.global&&a.multiline===b.multiline&&a.lastIndex===b.lastIndex&&a.ignoreCase===b.ignoreCase;if(null!==a&&"object"===typeof a||null!==b&&"object"===typeof b){if(!e(a)||
!e(b)||Object.prototype.toString.call(a)!==Object.prototype.toString.call(b)||a instanceof Float32Array||a instanceof Float64Array){if(h(a)!==h(b))return!1;g=g||{actual:[],expected:[]};var f=g.actual.indexOf(a);if(-1!==f&&f===g.expected.indexOf(b))return!0;g.actual.push(a);g.expected.push(b);return c(a,b,d,g)}return 0===k(new Uint8Array(a.buffer),new Uint8Array(b.buffer))}return d?a===b:a==b}function g(a){return"[object Arguments]"==Object.prototype.toString.call(a)}function c(a,b,c,e){if(null===
a||void 0===a||null===b||void 0===b)return!1;if(B.isPrimitive(a)||B.isPrimitive(b))return a===b;if(c&&Object.getPrototypeOf(a)!==Object.getPrototypeOf(b))return!1;var f=g(a),h=g(b);if(f&&!h||!f&&h)return!1;if(f)return a=G.call(a),b=G.call(b),d(a,b,c);f=q(a);var n=q(b);if(f.length!==n.length)return!1;f.sort();n.sort();for(h=f.length-1;0<=h;h--)if(f[h]!==n[h])return!1;for(h=f.length-1;0<=h;h--)if(n=f[h],!d(a[n],b[n],c,e))return!1;return!0}function v(a,b,c){d(a,b,!0)&&u(a,b,c,"notDeepStrictEqual",v)}
function t(a,b){if(!a||!b)return!1;if("[object RegExp]"==Object.prototype.toString.call(b))return b.test(a);try{if(a instanceof b)return!0}catch(M){}return Error.isPrototypeOf(b)?!1:!0===b.call({},a)}function y(a,b,c,d){if("function"!==typeof b)throw new TypeError('"block" argument must be a function');"string"===typeof c&&(d=c,c=null);try{b()}catch(L){var e=L}b=e;d=(c&&c.name?" ("+c.name+").":".")+(d?" "+d:".");a&&!b&&u(b,c,"Missing expected exception"+d);e="string"===typeof d;var g=!a&&B.isError(b),
f=!a&&b&&!c;(g&&e&&t(b,c)||f)&&u(b,c,"Got unwanted exception"+d);if(a&&b&&c&&!t(b,c)||!a&&b)throw b;}var B=a("util/"),D=Object.prototype.hasOwnProperty,G=Array.prototype.slice,A=function(){return"foo"===function(){}.name}(),C=p.exports=r,l=/\s*function\s+([^\(\s]*)\s*/;C.AssertionError=function(a){this.name="AssertionError";this.actual=a.actual;this.expected=a.expected;this.operator=a.operator;a.message?(this.message=a.message,this.generatedMessage=!1):(this.message=b(n(this.actual),128)+" "+this.operator+
" "+b(n(this.expected),128),this.generatedMessage=!0);var c=a.stackStartFunction||u;Error.captureStackTrace?Error.captureStackTrace(this,c):(a=Error(),a.stack&&(a=a.stack,c=f(c),c=a.indexOf("\n"+c),0<=c&&(c=a.indexOf("\n",c+1),a=a.substring(c+1)),this.stack=a))};B.inherits(C.AssertionError,Error);C.fail=u;C.ok=r;C.equal=function(a,b,c){a!=b&&u(a,b,c,"\x3d\x3d",C.equal)};C.notEqual=function(a,b,c){a==b&&u(a,b,c,"!\x3d",C.notEqual)};C.deepEqual=function(a,b,c){d(a,b,!1)||u(a,b,c,"deepEqual",C.deepEqual)};
C.deepStrictEqual=function(a,b,c){d(a,b,!0)||u(a,b,c,"deepStrictEqual",C.deepStrictEqual)};C.notDeepEqual=function(a,b,c){d(a,b,!1)&&u(a,b,c,"notDeepEqual",C.notDeepEqual)};C.notDeepStrictEqual=v;C.strictEqual=function(a,b,c){a!==b&&u(a,b,c,"\x3d\x3d\x3d",C.strictEqual)};C.notStrictEqual=function(a,b,c){a===b&&u(a,b,c,"!\x3d\x3d",C.notStrictEqual)};C.throws=function(a,b,c){y(!0,a,b,c)};C.doesNotThrow=function(a,b,c){y(!1,a,b,c)};C.ifError=function(a){if(a)throw a;};var q=Object.keys||function(a){var b=
[],c;for(c in a)D.call(a,c)&&b.push(c);return b}}).call(this,"undefined"!==typeof x?x:"undefined"!==typeof self?self:"undefined"!==typeof window?window:{})},{"util/":61}],59:[function(a,p,l){p.exports="function"===typeof Object.create?function(a,k){a.super_=k;a.prototype=Object.create(k.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}})}:function(a,k){a.super_=k;var h=function(){};h.prototype=k.prototype;a.prototype=new h;a.prototype.constructor=a}},{}],60:[function(a,p,
l){p.exports=function(a){return a&&"object"===typeof a&&"function"===typeof a.copy&&"function"===typeof a.fill&&"function"===typeof a.readUInt8}},{}],61:[function(a,p,l){(function(m,k){function h(a,b){var c={seen:[],stylize:f};3<=arguments.length&&(c.depth=arguments[2]);4<=arguments.length&&(c.colors=arguments[3]);t(b)?c.showHidden=b:b&&l._extend(c,b);D(c.showHidden)&&(c.showHidden=!1);D(c.depth)&&(c.depth=2);D(c.colors)&&(c.colors=!1);D(c.customInspect)&&(c.customInspect=!0);c.colors&&(c.stylize=
e);return n(c,a,c.depth)}function e(a,b){return(b=h.styles[b])?"["+h.colors[b][0]+"m"+a+"["+h.colors[b][1]+"m":a}function f(a,b){return a}function b(a){var b={};a.forEach(function(a,c){b[a]=!0});return b}function n(a,e,f){if(a.customInspect&&e&&q(e.inspect)&&e.inspect!==l.inspect&&(!e.constructor||e.constructor.prototype!==e)){var h=e.inspect(f,a);B(h)||(h=n(a,h,f));return h}if(h=u(a,e))return h;var k=Object.keys(e),t=b(k);a.showHidden&&(k=Object.getOwnPropertyNames(e));if(p(e)&&(0<=k.indexOf("message")||
0<=k.indexOf("description")))return r(e);if(0===k.length){if(q(e))return a.stylize("[Function"+(e.name?": "+e.name:"")+"]","special");if(G(e))return a.stylize(RegExp.prototype.toString.call(e),"regexp");if(C(e))return a.stylize(Date.prototype.toString.call(e),"date");if(p(e))return r(e)}h="";var m=!1,y=["{","}"];v(e)&&(m=!0,y=["[","]"]);q(e)&&(h=" [Function"+(e.name?": "+e.name:"")+"]");G(e)&&(h=" "+RegExp.prototype.toString.call(e));C(e)&&(h=" "+Date.prototype.toUTCString.call(e));p(e)&&(h=" "+r(e));
if(0===k.length&&(!m||0==e.length))return y[0]+h+y[1];if(0>f)return G(e)?a.stylize(RegExp.prototype.toString.call(e),"regexp"):a.stylize("[Object]","special");a.seen.push(e);k=m?d(a,e,f,t,k):k.map(function(b){return g(a,e,f,t,b,m)});a.seen.pop();return c(k,h,y)}function u(a,b){if(D(b))return a.stylize("undefined","undefined");if(B(b))return b="'"+JSON.stringify(b).replace(/^"|"$/g,"").replace(/'/g,"\\'").replace(/\\"/g,'"')+"'",a.stylize(b,"string");if(y(b))return a.stylize(""+b,"number");if(t(b))return a.stylize(""+
b,"boolean");if(null===b)return a.stylize("null","null")}function r(a){return"["+Error.prototype.toString.call(a)+"]"}function d(a,b,c,d,e){for(var f=[],h=0,n=b.length;h<n;++h)Object.prototype.hasOwnProperty.call(b,String(h))?f.push(g(a,b,c,d,String(h),!0)):f.push("");e.forEach(function(e){e.match(/^\d+$/)||f.push(g(a,b,c,d,e,!0))});return f}function g(a,b,c,d,e,g){var f,h;b=Object.getOwnPropertyDescriptor(b,e)||{value:b[e]};b.get?h=b.set?a.stylize("[Getter/Setter]","special"):a.stylize("[Getter]",
"special"):b.set&&(h=a.stylize("[Setter]","special"));Object.prototype.hasOwnProperty.call(d,e)||(f="["+e+"]");h||(0>a.seen.indexOf(b.value)?(h=null===c?n(a,b.value,null):n(a,b.value,c-1),-1<h.indexOf("\n")&&(h=g?h.split("\n").map(function(a){return"  "+a}).join("\n").substr(2):"\n"+h.split("\n").map(function(a){return"   "+a}).join("\n"))):h=a.stylize("[Circular]","special"));if(D(f)){if(g&&e.match(/^\d+$/))return h;f=JSON.stringify(""+e);f.match(/^"([a-zA-Z_][a-zA-Z_0-9]*)"$/)?(f=f.substr(1,f.length-
2),f=a.stylize(f,"name")):(f=f.replace(/'/g,"\\'").replace(/\\"/g,'"').replace(/(^"|"$)/g,"'"),f=a.stylize(f,"string"))}return f+": "+h}function c(a,b,c){var d=0;return 60<a.reduce(function(a,b){d++;0<=b.indexOf("\n")&&d++;return a+b.replace(/\u001b\[\d\d?m/g,"").length+1},0)?c[0]+(""===b?"":b+"\n ")+" "+a.join(",\n  ")+" "+c[1]:c[0]+b+" "+a.join(", ")+" "+c[1]}function v(a){return Array.isArray(a)}function t(a){return"boolean"===typeof a}function y(a){return"number"===typeof a}function B(a){return"string"===
typeof a}function D(a){return void 0===a}function G(a){return A(a)&&"[object RegExp]"===Object.prototype.toString.call(a)}function A(a){return"object"===typeof a&&null!==a}function C(a){return A(a)&&"[object Date]"===Object.prototype.toString.call(a)}function p(a){return A(a)&&("[object Error]"===Object.prototype.toString.call(a)||a instanceof Error)}function q(a){return"function"===typeof a}function E(a){return 10>a?"0"+a.toString(10):a.toString(10)}function H(){var a=new Date,b=[E(a.getHours()),
E(a.getMinutes()),E(a.getSeconds())].join(":");return[a.getDate(),Q[a.getMonth()],b].join(" ")}var M=/%[sdj%]/g;l.format=function(a){if(!B(a)){for(var b=[],c=0;c<arguments.length;c++)b.push(h(arguments[c]));return b.join(" ")}c=1;var d=arguments,e=d.length;b=String(a).replace(M,function(a){if("%%"===a)return"%";if(c>=e)return a;switch(a){case "%s":return String(d[c++]);case "%d":return Number(d[c++]);case "%j":try{return JSON.stringify(d[c++])}catch(ia){return"[Circular]"}default:return a}});for(var g=
d[c];c<e;g=d[++c])b=null!==g&&A(g)?b+(" "+h(g)):b+(" "+g);return b};l.deprecate=function(a,b){if(D(k.process))return function(){return l.deprecate(a,b).apply(this,arguments)};if(!0===m.noDeprecation)return a;var c=!1;return function(){if(!c){if(m.throwDeprecation)throw Error(b);m.traceDeprecation?console.trace(b):console.error(b);c=!0}return a.apply(this,arguments)}};var O={},I;l.debuglog=function(a){D(I)&&(I=m.env.NODE_DEBUG||"");a=a.toUpperCase();if(!O[a])if((new RegExp("\\b"+a+"\\b","i")).test(I)){var b=
m.pid;O[a]=function(){var c=l.format.apply(l,arguments);console.error("%s %d: %s",a,b,c)}}else O[a]=function(){};return O[a]};l.inspect=h;h.colors={bold:[1,22],italic:[3,23],underline:[4,24],inverse:[7,27],white:[37,39],grey:[90,39],black:[30,39],blue:[34,39],cyan:[36,39],green:[32,39],magenta:[35,39],red:[31,39],yellow:[33,39]};h.styles={special:"cyan",number:"yellow","boolean":"yellow",undefined:"grey","null":"bold",string:"green",date:"magenta",regexp:"red"};l.isArray=v;l.isBoolean=t;l.isNull=
function(a){return null===a};l.isNullOrUndefined=function(a){return null==a};l.isNumber=y;l.isString=B;l.isSymbol=function(a){return"symbol"===typeof a};l.isUndefined=D;l.isRegExp=G;l.isObject=A;l.isDate=C;l.isError=p;l.isFunction=q;l.isPrimitive=function(a){return null===a||"boolean"===typeof a||"number"===typeof a||"string"===typeof a||"symbol"===typeof a||"undefined"===typeof a};l.isBuffer=a("./support/isBuffer");var Q="Jan Feb Mar Apr May Jun Jul Aug Sep Oct Nov Dec".split(" ");l.log=function(){console.log("%s - %s",
H(),l.format.apply(l,arguments))};l.inherits=a("inherits");l._extend=function(a,b){if(!b||!A(b))return a;for(var c=Object.keys(b),d=c.length;d--;)a[c[d]]=b[c[d]];return a}}).call(this,a("_process"),"undefined"!==typeof x?x:"undefined"!==typeof self?self:"undefined"!==typeof window?window:{})},{"./support/isBuffer":60,_process:474,inherits:59}],62:[function(a,p,l){p.exports=function(a){return atob(a)}},{}],63:[function(a,p,l){function m(a){for(var e=0,f=0;f<a.length;++f)e+=a[f];return e}p.exports=
function(a,e){for(var f=e.length,b=Array(f+1),h=0;h<f;++h){for(var u=Array(f+1),r=0;r<=f;++r)u[r]=a[r][h];b[h]=u}b[f]=Array(f+1);for(h=0;h<=f;++h)b[f][h]=1;a=Array(f+1);for(h=0;h<f;++h)a[h]=e[h];a[f]=1;e=k(b,a);b=m(e[f+1]);0===b&&(b=1);a=Array(f+1);for(h=0;h<=f;++h)a[h]=m(e[h])/b;return a};var k=a("robust-linear-solve")},{"robust-linear-solve":493}],64:[function(a,p,l){function m(a){var b=a.length;if(0<b%4)throw Error("Invalid string. Length must be a multiple of 4");a=a.indexOf("\x3d");-1===a&&(a=
b);return[a,a===b?0:4-a%4]}function k(a,e,f){for(var b=[],d=e;d<f;d+=3)e=(a[d]<<16&16711680)+(a[d+1]<<8&65280)+(a[d+2]&255),b.push(h[e>>18&63]+h[e>>12&63]+h[e>>6&63]+h[e&63]);return b.join("")}l.byteLength=function(a){a=m(a);var b=a[1];return 3*(a[0]+b)/4-b};l.toByteArray=function(a){var b=m(a);var h=b[0];b=b[1];for(var k=new f(3*(h+b)/4-b),d=0,g=0<b?h-4:h,c=0;c<g;c+=4)h=e[a.charCodeAt(c)]<<18|e[a.charCodeAt(c+1)]<<12|e[a.charCodeAt(c+2)]<<6|e[a.charCodeAt(c+3)],k[d++]=h>>16&255,k[d++]=h>>8&255,k[d++]=
h&255;2===b&&(h=e[a.charCodeAt(c)]<<2|e[a.charCodeAt(c+1)]>>4,k[d++]=h&255);1===b&&(h=e[a.charCodeAt(c)]<<10|e[a.charCodeAt(c+1)]<<4|e[a.charCodeAt(c+2)]>>2,k[d++]=h>>8&255,k[d++]=h&255);return k};l.fromByteArray=function(a){for(var b=a.length,e=b%3,f=[],d=0,g=b-e;d<g;d+=16383)f.push(k(a,d,d+16383>g?g:d+16383));1===e?(a=a[b-1],f.push(h[a>>2]+h[a<<4&63]+"\x3d\x3d")):2===e&&(a=(a[b-2]<<8)+a[b-1],f.push(h[a>>10]+h[a>>4&63]+h[a<<2&63]+"\x3d"));return f.join("")};var h=[],e=[],f="undefined"!==typeof Uint8Array?
Uint8Array:Array;for(a=0;64>a;++a)h[a]="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/"[a],e["ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/".charCodeAt(a)]=a;e[45]=62;e[95]=63},{}],65:[function(a,p,l){var m=a("./lib/rationalize");p.exports=function(a,h){return m(a[0].mul(h[1]).add(h[0].mul(a[1])),a[1].mul(h[1]))}},{"./lib/rationalize":75}],66:[function(a,p,l){p.exports=function(a,k){return a[0].mul(k[1]).cmp(k[0].mul(a[1]))}},{}],67:[function(a,p,l){var m=a("./lib/rationalize");
p.exports=function(a,h){return m(a[0].mul(h[1]),a[1].mul(h[0]))}},{"./lib/rationalize":75}],68:[function(a,p,l){function m(a,r){if(k(a))return r?n(a,m(r)):[a[0].clone(),a[1].clone()];var d=0;if(h(a))a=a.clone();else if("string"===typeof a)a=f(a);else{if(0===a)return[e(0),e(1)];if(a!==Math.floor(a))for(;a!==Math.floor(a);)a*=Math.pow(2,256),d-=256;a=e(a)}if(k(r))a.mul(r[1]),r=r[0].clone();else if(h(r))r=r.clone();else if("string"===typeof r)r=f(r);else if(r){if(r!==Math.floor(r))for(;r!==Math.floor(r);)r*=
Math.pow(2,256),d+=256;r=e(r)}else r=e(1);0<d?a=a.ushln(d):0>d&&(r=r.ushln(-d));return b(a,r)}var k=a("./is-rat"),h=a("./lib/is-bn"),e=a("./lib/num-to-bn"),f=a("./lib/str-to-bn"),b=a("./lib/rationalize"),n=a("./div");p.exports=m},{"./div":67,"./is-rat":69,"./lib/is-bn":73,"./lib/num-to-bn":74,"./lib/rationalize":75,"./lib/str-to-bn":76}],69:[function(a,p,l){var m=a("./lib/is-bn");p.exports=function(a){return Array.isArray(a)&&2===a.length&&m(a[0])&&m(a[1])}},{"./lib/is-bn":73}],70:[function(a,p,l){var m=
a("bn.js");p.exports=function(a){return a.cmp(new m(0))}},{"bn.js":84}],71:[function(a,p,l){var m=a("./bn-sign");p.exports=function(a){var h=a.length,e=a.words,f=0;if(1===h)f=e[0];else if(2===h)f=e[0]+67108864*e[1];else for(var b=0;b<h;b++)f+=e[b]*Math.pow(67108864,b);return m(a)*f}},{"./bn-sign":70}],72:[function(a,p,l){var m=a("double-bits"),k=a("bit-twiddle").countTrailingZeros;p.exports=function(a){var e=k(m.lo(a));if(32>e)return e;a=k(m.hi(a));return 20<a?52:a+32}},{"bit-twiddle":82,"double-bits":158}],
73:[function(a,p,l){a("bn.js");p.exports=function(a){return a&&"object"===typeof a&&!!a.words}},{"bn.js":84}],74:[function(a,p,l){var m=a("bn.js"),k=a("double-bits");p.exports=function(a){var e=k.exponent(a);return 52>e?new m(a):(new m(a*Math.pow(2,52-e))).ushln(e-52)}},{"bn.js":84,"double-bits":158}],75:[function(a,p,l){var m=a("./num-to-bn"),k=a("./bn-sign");p.exports=function(a,e){var f=k(a),b=k(e);if(0===f)return[m(0),m(1)];if(0===b)return[m(0),m(0)];0>b&&(a=a.neg(),e=e.neg());f=a.gcd(e);return f.cmpn(1)?
[a.div(f),e.div(f)]:[a,e]}},{"./bn-sign":70,"./num-to-bn":74}],76:[function(a,p,l){var m=a("bn.js");p.exports=function(a){return new m(a)}},{"bn.js":84}],77:[function(a,p,l){var m=a("./lib/rationalize");p.exports=function(a,h){return m(a[0].mul(h[0]),a[1].mul(h[1]))}},{"./lib/rationalize":75}],78:[function(a,p,l){var m=a("./lib/bn-sign");p.exports=function(a){return m(a[0])*m(a[1])}},{"./lib/bn-sign":70}],79:[function(a,p,l){var m=a("./lib/rationalize");p.exports=function(a,h){return m(a[0].mul(h[1]).sub(a[1].mul(h[0])),
a[1].mul(h[1]))}},{"./lib/rationalize":75}],80:[function(a,p,l){var m=a("./lib/bn-to-num"),k=a("./lib/ctz");p.exports=function(a){var e=a[0];a=a[1];if(0===e.cmpn(0))return 0;var f=e.abs().divmod(a.abs()),b=m(f.div);f=f.mod;e=e.negative!==a.negative?-1:1;if(0===f.cmpn(0))return e*b;if(b){var h=k(b)+4;a=m(f.ushln(h).divRound(a));return e*(b+a*Math.pow(2,-h))}b=a.bitLength()-f.bitLength()+53;a=m(f.ushln(b).divRound(a));if(1023>b)return e*a*Math.pow(2,-b);a*=Math.pow(2,-1023);return e*a*Math.pow(2,1023-
b)}},{"./lib/bn-to-num":71,"./lib/ctz":72}],81:[function(a,p,l){function m(a,e,f,b,n,k){a=["function ",a,"(a,l,h,",b.join(","),"){",k?"":"var i\x3d",f?"l-1":"h+1",";while(l\x3c\x3dh){var m\x3d(l+h)\x3e\x3e\x3e1,x\x3da",n?".get(m)":"[m]"];k?0>e.indexOf("c")?a.push(";if(x\x3d\x3d\x3dy){return m}else if(x\x3c\x3dy){"):a.push(";var p\x3dc(x,y);if(p\x3d\x3d\x3d0){return m}else if(p\x3c\x3d0){"):a.push(";if(",e,"){i\x3dm;");f?a.push("l\x3dm+1}else{h\x3dm-1}"):a.push("h\x3dm-1}else{l\x3dm+1}");a.push("}");
k?a.push("return -1};"):a.push("return i};");return a.join("")}function k(a,e,f,b){return(new Function([m("A","x"+a+"y",e,["y"],!1,b),m("B","x"+a+"y",e,["y"],!0,b),m("P","c(x,y)"+a+"0",e,["y","c"],!1,b),m("Q","c(x,y)"+a+"0",e,["y","c"],!0,b),"function dispatchBsearch",f,"(a,y,c,l,h){if(a.shape){if(typeof(c)\x3d\x3d\x3d'function'){return Q(a,(l\x3d\x3d\x3dundefined)?0:l|0,(h\x3d\x3d\x3dundefined)?a.shape[0]-1:h|0,y,c)}else{return B(a,(c\x3d\x3d\x3dundefined)?0:c|0,(l\x3d\x3d\x3dundefined)?a.shape[0]-1:l|0,y)}}else{if(typeof(c)\x3d\x3d\x3d'function'){return P(a,(l\x3d\x3d\x3dundefined)?0:l|0,(h\x3d\x3d\x3dundefined)?a.length-1:h|0,y,c)}else{return A(a,(c\x3d\x3d\x3dundefined)?0:c|0,(l\x3d\x3d\x3dundefined)?a.length-1:l|0,y)}}}return dispatchBsearch",
f].join("")))()}p.exports={ge:k("\x3e\x3d",!1,"GE"),gt:k("\x3e",!1,"GT"),lt:k("\x3c",!0,"LT"),le:k("\x3c\x3d",!0,"LE"),eq:k("-",!0,"EQ",!0)}},{}],82:[function(a,p,l){function m(a){var e=32;(a&=-a)&&e--;a&65535&&(e-=16);a&16711935&&(e-=8);a&252645135&&(e-=4);a&858993459&&(e-=2);a&1431655765&&--e;return e}"use restrict";l.INT_BITS=32;l.INT_MAX=2147483647;l.INT_MIN=-2147483648;l.sign=function(a){return(0<a)-(0>a)};l.abs=function(a){var e=a>>31;return(a^e)-e};l.min=function(a,e){return e^(a^e)&-(a<e)};
l.max=function(a,e){return a^(a^e)&-(a<e)};l.isPow2=function(a){return!(a&a-1)&&!!a};l.log2=function(a){var e=(65535<a)<<4;a>>>=e;var f=(255<a)<<3;a>>>=f;e|=f;f=(15<a)<<2;a>>>=f;e|=f;f=(3<a)<<1;return e|f|a>>>f>>1};l.log10=function(a){return 1E9<=a?9:1E8<=a?8:1E7<=a?7:1E6<=a?6:1E5<=a?5:1E4<=a?4:1E3<=a?3:100<=a?2:10<=a?1:0};l.popCount=function(a){a-=a>>>1&1431655765;a=(a&858993459)+(a>>>2&858993459);return 16843009*(a+(a>>>4)&252645135)>>>24};l.countTrailingZeros=m;l.nextPow2=function(a){a+=0===a;
--a;a|=a>>>1;a|=a>>>2;a|=a>>>4;a|=a>>>8;return(a|a>>>16)+1};l.prevPow2=function(a){a|=a>>>1;a|=a>>>2;a|=a>>>4;a|=a>>>8;a|=a>>>16;return a-(a>>>1)};l.parity=function(a){a^=a>>>16;a^=a>>>8;return 27030>>>((a^a>>>4)&15)&1};var k=Array(256);(function(a){for(var e=0;256>e;++e){var f=e,b=e,h=7;for(f>>>=1;f;f>>>=1)b<<=1,b|=f&1,--h;a[e]=b<<h&255}})(k);l.reverse=function(a){return k[a&255]<<24|k[a>>>8&255]<<16|k[a>>>16&255]<<8|k[a>>>24&255]};l.interleave2=function(a,e){a&=65535;a=(a|a<<8)&16711935;a=(a|a<<
4)&252645135;a=(a|a<<2)&858993459;e&=65535;e=(e|e<<8)&16711935;e=(e|e<<4)&252645135;e=(e|e<<2)&858993459;return(a|a<<1)&1431655765|((e|e<<1)&1431655765)<<1};l.deinterleave2=function(a,e){a=a>>>e&1431655765;a=(a|a>>>1)&858993459;a=(a|a>>>2)&252645135;a=(a|a>>>4)&16711935;return((a|a>>>16)&65535)<<16>>16};l.interleave3=function(a,e,f){a&=1023;a=(a|a<<16)&4278190335;a=(a|a<<8)&251719695;a=(a|a<<4)&3272356035;e&=1023;e=(e|e<<16)&4278190335;e=(e|e<<8)&251719695;e=(e|e<<4)&3272356035;f&=1023;f=(f|f<<16)&
4278190335;f=(f|f<<8)&251719695;f=(f|f<<4)&3272356035;return(a|a<<2)&1227133513|((e|e<<2)&1227133513)<<1|((f|f<<2)&1227133513)<<2};l.deinterleave3=function(a,e){a=a>>>e&1227133513;a=(a|a>>>2)&3272356035;a=(a|a>>>4)&251719695;a=(a|a>>>8)&4278190335;return((a|a>>>16)&1023)<<22>>22};l.nextCombination=function(a){var e=a|a-1;return e+1|(~e&-~e)-1>>>m(a)+1}},{}],83:[function(a,p,l){function m(a,b,e,h,m,d,g){for(var c=0;c<b;c++){for(var f=0;f<e;f++)h[f]=a[f*b+c];k(h,m,d,g,e);for(f=0;f<e;f++)a[f*b+c]=m[f]}for(f=
0;f<e;f++){for(c=0;c<b;c++)h[c]=a[f*b+c];k(h,m,d,g,b);for(c=0;c<b;c++)a[f*b+c]=Math.sqrt(m[c])}}function k(a,b,h,k,m){h[0]=0;k[0]=-e;k[1]=+e;for(var d=1,g=0;d<m;d++){for(var c=(a[d]+d*d-(a[h[g]]+h[g]*h[g]))/(2*d-2*h[g]);c<=k[g];)g--,c=(a[d]+d*d-(a[h[g]]+h[g]*h[g]))/(2*d-2*h[g]);g++;h[g]=d;k[g]=c;k[g+1]=+e}for(g=d=0;d<m;d++){for(;k[g+1]<d;)g++;b[d]=(d-h[g])*(d-h[g])+a[h[g]]}}var h=a("clamp");p.exports=function(a,b){b||(b={});var f=null==b.cutoff?.25:b.cutoff,k=null==b.radius?8:b.radius,r=b.channel||
0;if(ArrayBuffer.isView(a)||Array.isArray(a)){if(!b.width||!b.height)throw Error("For raw data width and height should be provided by options");var d=b.width;var g=b.height;var c=a;var v=b.stride?b.stride:Math.floor(a.length/d/g)}else window.HTMLCanvasElement&&a instanceof window.HTMLCanvasElement?(g=a,c=g.getContext("2d"),d=g.width,g=g.height,c=c.getImageData(0,0,d,g),c=c.data,v=4):window.CanvasRenderingContext2D&&a instanceof window.CanvasRenderingContext2D?(g=a.canvas,d=g.width,g=g.height,c=a.getImageData(0,
0,d,g),c=c.data,v=4):window.ImageData&&a instanceof window.ImageData&&(d=a.width,g=a.height,c=a.data,v=4);var t=Math.max(d,g);if(window.Uint8ClampedArray&&c instanceof window.Uint8ClampedArray||window.Uint8Array&&c instanceof window.Uint8Array){var y=c;c=Array(d*g);a=0;for(b=y.length;a<b;a++)c[a]=y[a*v+r]/255}else if(1!==v)throw Error("Raw data can have only 1 value per pixel");r=Array(d*g);v=Array(d*g);y=Array(t);var B=Array(t),D=Array(t+1);t=Array(t);a=0;for(b=d*g;a<b;a++){var G=c[a];r[a]=1===G?
0:0===G?e:Math.pow(Math.max(0,.5-G),2);v[a]=1===G?e:0===G?0:Math.pow(Math.max(0,G-.5),2)}m(r,d,g,y,B,t,D);m(v,d,g,y,B,t,D);c=window.Float32Array?new Float32Array(d*g):Array(d*g);a=0;for(b=d*g;a<b;a++)c[a]=h(1-((r[a]-v[a])/k+f),0,1);return c};var e=1E20},{clamp:105}],84:[function(a,p,l){(function(m,k){function h(a,b){if(!a)throw Error(b||"Assertion failed");}function e(a,b){a.super_=b;var c=function(){};c.prototype=b.prototype;a.prototype=new c;a.prototype.constructor=a}function f(a,b,c){if(f.isBN(a))return a;
this.negative=0;this.words=null;this.length=0;this.red=null;if(null!==a){if("le"===b||"be"===b)c=b,b=10;this._init(a||0,b||10,c||"be")}}function b(a,b,c){var d=0;for(c=Math.min(a.length,c);b<c;b++){var e=a.charCodeAt(b)-48;d<<=4;d=49<=e&&54>=e?d|e-49+10:17<=e&&22>=e?d|e-17+10:d|e&15}return d}function n(a,b,c,d){var e=0;for(c=Math.min(a.length,c);b<c;b++){var g=a.charCodeAt(b)-48;e*=d;e=49<=g?e+(g-49+10):17<=g?e+(g-17+10):e+g}return e}function u(a,b,c){c.negative=b.negative^a.negative;var d=a.length+
b.length|0;c.length=d;d=d-1|0;var e=a.words[0]|0,g=b.words[0]|0;e*=g;var f=e/67108864|0;c.words[0]=e&67108863;for(var h=1;h<d;h++){var n=f>>>26,k=f&67108863;f=Math.min(h,b.length-1);for(var t=Math.max(0,h-a.length+1);t<=f;t++)e=a.words[h-t|0]|0,g=b.words[t]|0,e=e*g+k,n+=e/67108864|0,k=e&67108863;c.words[h]=k|0;f=n|0}0!==f?c.words[h]=f|0:c.length--;return c.strip()}function r(a,b){this.x=a;this.y=b}function d(a,b){this.name=a;this.p=new f(b,16);this.n=this.p.bitLength();this.k=(new f(1)).iushln(this.n).isub(this.p);
this.tmp=this._tmp()}function g(){d.call(this,"k256","ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe fffffc2f")}function c(){d.call(this,"p224","ffffffff ffffffff ffffffff ffffffff 00000000 00000000 00000001")}function v(){d.call(this,"p192","ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff")}function t(){d.call(this,"25519","7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed")}function y(a){"string"===typeof a?(a=f._prime(a),this.m=a.p,this.prime=a):(h(a.gtn(1),
"modulus must be greater than 1"),this.m=a,this.prime=null)}function B(a){y.call(this,a);this.shift=this.m.bitLength();0!==this.shift%26&&(this.shift+=26-this.shift%26);this.r=(new f(1)).iushln(this.shift);this.r2=this.imod(this.r.sqr());this.rinv=this.r._invmp(this.m);this.minv=this.rinv.mul(this.r).isubn(1).div(this.m);this.minv=this.minv.umod(this.r);this.minv=this.r.sub(this.minv)}"object"===typeof m?m.exports=f:k.BN=f;f.BN=f;f.wordSize=26;try{var D=a("buffer").Buffer}catch(E){}f.isBN=function(a){return a instanceof
f?!0:null!==a&&"object"===typeof a&&a.constructor.wordSize===f.wordSize&&Array.isArray(a.words)};f.max=function(a,b){return 0<a.cmp(b)?a:b};f.min=function(a,b){return 0>a.cmp(b)?a:b};f.prototype._init=function(a,b,c){if("number"===typeof a)return this._initNumber(a,b,c);if("object"===typeof a)return this._initArray(a,b,c);"hex"===b&&(b=16);h(b===(b|0)&&2<=b&&36>=b);a=a.toString().replace(/\s+/g,"");var d=0;"-"===a[0]&&d++;16===b?this._parseHex(a,d):this._parseBase(a,b,d);"-"===a[0]&&(this.negative=
1);this.strip();"le"===c&&this._initArray(this.toArray(),b,c)};f.prototype._initNumber=function(a,b,c){0>a&&(this.negative=1,a=-a);67108864>a?(this.words=[a&67108863],this.length=1):4503599627370496>a?(this.words=[a&67108863,a/67108864&67108863],this.length=2):(h(9007199254740992>a),this.words=[a&67108863,a/67108864&67108863,1],this.length=3);"le"===c&&this._initArray(this.toArray(),b,c)};f.prototype._initArray=function(a,b,c){h("number"===typeof a.length);if(0>=a.length)return this.words=[0],this.length=
1,this;this.length=Math.ceil(a.length/3);this.words=Array(this.length);for(b=0;b<this.length;b++)this.words[b]=0;var d=0;if("be"===c)for(b=a.length-1,c=0;0<=b;b-=3){var e=a[b]|a[b-1]<<8|a[b-2]<<16;this.words[c]|=e<<d&67108863;this.words[c+1]=e>>>26-d&67108863;d+=24;26<=d&&(d-=26,c++)}else if("le"===c)for(c=b=0;b<a.length;b+=3)e=a[b]|a[b+1]<<8|a[b+2]<<16,this.words[c]|=e<<d&67108863,this.words[c+1]=e>>>26-d&67108863,d+=24,26<=d&&(d-=26,c++);return this.strip()};f.prototype._parseHex=function(a,c){this.length=
Math.ceil((a.length-c)/6);this.words=Array(this.length);for(var d=0;d<this.length;d++)this.words[d]=0;var e,g=0;d=a.length-6;for(e=0;d>=c;d-=6){var f=b(a,d,d+6);this.words[e]|=f<<g&67108863;this.words[e+1]|=f>>>26-g&4194303;g+=24;26<=g&&(g-=26,e++)}d+6!==c&&(f=b(a,c,d+6),this.words[e]|=f<<g&67108863,this.words[e+1]|=f>>>26-g&4194303);this.strip()};f.prototype._parseBase=function(a,b,c){this.words=[0];this.length=1;for(var d=0,e=1;67108863>=e;e*=b)d++;d--;e=e/b|0;var g=a.length-c,f=g%d;g=Math.min(g,
g-f)+c;for(var h=c;h<g;h+=d)c=n(a,h,h+d,b),this.imuln(e),67108864>this.words[0]+c?this.words[0]+=c:this._iaddn(c);if(0!==f){d=1;c=n(a,h,a.length,b);for(h=0;h<f;h++)d*=b;this.imuln(d);67108864>this.words[0]+c?this.words[0]+=c:this._iaddn(c)}};f.prototype.copy=function(a){a.words=Array(this.length);for(var b=0;b<this.length;b++)a.words[b]=this.words[b];a.length=this.length;a.negative=this.negative;a.red=this.red};f.prototype.clone=function(){var a=new f(null);this.copy(a);return a};f.prototype._expand=
function(a){for(;this.length<a;)this.words[this.length++]=0;return this};f.prototype.strip=function(){for(;1<this.length&&0===this.words[this.length-1];)this.length--;return this._normSign()};f.prototype._normSign=function(){1===this.length&&0===this.words[0]&&(this.negative=0);return this};f.prototype.inspect=function(){return(this.red?"\x3cBN-R: ":"\x3cBN: ")+this.toString(16)+"\x3e"};var G=" 0 00 000 0000 00000 000000 0000000 00000000 000000000 0000000000 00000000000 000000000000 0000000000000 00000000000000 000000000000000 0000000000000000 00000000000000000 000000000000000000 0000000000000000000 00000000000000000000 000000000000000000000 0000000000000000000000 00000000000000000000000 000000000000000000000000 0000000000000000000000000".split(" "),
A=[0,0,25,16,12,11,10,9,8,8,7,7,7,7,6,6,6,6,6,6,6,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5],C=[0,0,33554432,43046721,16777216,48828125,60466176,40353607,16777216,43046721,1E7,19487171,35831808,62748517,7529536,11390625,16777216,24137569,34012224,47045881,64E6,4084101,5153632,6436343,7962624,9765625,11881376,14348907,17210368,20511149,243E5,28629151,33554432,39135393,45435424,52521875,60466176];f.prototype.toString=function(a,b){a=a||10;b=b|0||1;if(16===a||"hex"===a){var c="";for(var d=a=0,e=0;e<this.length;e++){var g=
this.words[e],f=((g<<a|d)&16777215).toString(16);d=g>>>24-a&16777215;c=0!==d||e!==this.length-1?G[6-f.length]+f+c:f+c;a+=2;26<=a&&(a-=26,e--)}for(0!==d&&(c=d.toString(16)+c);0!==c.length%b;)c="0"+c;0!==this.negative&&(c="-"+c);return c}if(a===(a|0)&&2<=a&&36>=a){d=A[a];e=C[a];c="";g=this.clone();for(g.negative=0;!g.isZero();)f=g.modn(e).toString(a),g=g.idivn(e),c=g.isZero()?f+c:G[d-f.length]+f+c;for(this.isZero()&&(c="0"+c);0!==c.length%b;)c="0"+c;0!==this.negative&&(c="-"+c);return c}h(!1,"Base should be between 2 and 36")};
f.prototype.toNumber=function(){var a=this.words[0];2===this.length?a+=67108864*this.words[1]:3===this.length&&1===this.words[2]?a+=4503599627370496+67108864*this.words[1]:2<this.length&&h(!1,"Number can only safely store up to 53 bits");return 0!==this.negative?-a:a};f.prototype.toJSON=function(){return this.toString(16)};f.prototype.toBuffer=function(a,b){h("undefined"!==typeof D);return this.toArrayLike(D,a,b)};f.prototype.toArray=function(a,b){return this.toArrayLike(Array,a,b)};f.prototype.toArrayLike=
function(a,b,c){var d=this.byteLength();c=c||Math.max(1,d);h(d<=c,"byte array longer than desired length");h(0<c,"Requested array length \x3c\x3d 0");this.strip();var e="le"===b;a=new a(c);b=this.clone();if(e){for(e=0;!b.isZero();e++)d=b.andln(255),b.iushrn(8),a[e]=d;for(;e<c;e++)a[e]=0}else{for(e=0;e<c-d;e++)a[e]=0;for(e=0;!b.isZero();e++)d=b.andln(255),b.iushrn(8),a[c-e-1]=d}return a};f.prototype._countBits=Math.clz32?function(a){return 32-Math.clz32(a)}:function(a){var b=0;4096<=a&&(b+=13,a>>>=
13);64<=a&&(b+=7,a>>>=7);8<=a&&(b+=4,a>>>=4);2<=a&&(b+=2,a>>>=2);return b+a};f.prototype._zeroBits=function(a){if(0===a)return 26;var b=0;0===(a&8191)&&(b+=13,a>>>=13);0===(a&127)&&(b+=7,a>>>=7);0===(a&15)&&(b+=4,a>>>=4);0===(a&3)&&(b+=2,a>>>=2);0===(a&1)&&b++;return b};f.prototype.bitLength=function(){var a=this._countBits(this.words[this.length-1]);return 26*(this.length-1)+a};f.prototype.zeroBits=function(){if(this.isZero())return 0;for(var a=0,b=0;b<this.length;b++){var c=this._zeroBits(this.words[b]);
a+=c;if(26!==c)break}return a};f.prototype.byteLength=function(){return Math.ceil(this.bitLength()/8)};f.prototype.toTwos=function(a){return 0!==this.negative?this.abs().inotn(a).iaddn(1):this.clone()};f.prototype.fromTwos=function(a){return this.testn(a-1)?this.notn(a).iaddn(1).ineg():this.clone()};f.prototype.isNeg=function(){return 0!==this.negative};f.prototype.neg=function(){return this.clone().ineg()};f.prototype.ineg=function(){this.isZero()||(this.negative^=1);return this};f.prototype.iuor=
function(a){for(;this.length<a.length;)this.words[this.length++]=0;for(var b=0;b<a.length;b++)this.words[b]|=a.words[b];return this.strip()};f.prototype.ior=function(a){h(0===(this.negative|a.negative));return this.iuor(a)};f.prototype.or=function(a){return this.length>a.length?this.clone().ior(a):a.clone().ior(this)};f.prototype.uor=function(a){return this.length>a.length?this.clone().iuor(a):a.clone().iuor(this)};f.prototype.iuand=function(a){var b=this.length>a.length?a:this;for(var c=0;c<b.length;c++)this.words[c]&=
a.words[c];this.length=b.length;return this.strip()};f.prototype.iand=function(a){h(0===(this.negative|a.negative));return this.iuand(a)};f.prototype.and=function(a){return this.length>a.length?this.clone().iand(a):a.clone().iand(this)};f.prototype.uand=function(a){return this.length>a.length?this.clone().iuand(a):a.clone().iuand(this)};f.prototype.iuxor=function(a){if(this.length>a.length)var b=this;else b=a,a=this;for(var c=0;c<a.length;c++)this.words[c]=b.words[c]^a.words[c];if(this!==b)for(;c<
b.length;c++)this.words[c]=b.words[c];this.length=b.length;return this.strip()};f.prototype.ixor=function(a){h(0===(this.negative|a.negative));return this.iuxor(a)};f.prototype.xor=function(a){return this.length>a.length?this.clone().ixor(a):a.clone().ixor(this)};f.prototype.uxor=function(a){return this.length>a.length?this.clone().iuxor(a):a.clone().iuxor(this)};f.prototype.inotn=function(a){h("number"===typeof a&&0<=a);var b=Math.ceil(a/26)|0;a%=26;this._expand(b);0<a&&b--;for(var c=0;c<b;c++)this.words[c]=
~this.words[c]&67108863;0<a&&(this.words[c]=~this.words[c]&67108863>>26-a);return this.strip()};f.prototype.notn=function(a){return this.clone().inotn(a)};f.prototype.setn=function(a,b){h("number"===typeof a&&0<=a);var c=a/26|0;a%=26;this._expand(c+1);this.words[c]=b?this.words[c]|1<<a:this.words[c]&~(1<<a);return this.strip()};f.prototype.iadd=function(a){if(0!==this.negative&&0===a.negative)return this.negative=0,this.isub(a),this.negative^=1,this._normSign();if(0===this.negative&&0!==a.negative){a.negative=
0;var b=this.isub(a);a.negative=1;return b._normSign()}if(this.length>a.length)var c=this;else c=a,a=this;for(var d=b=0;d<a.length;d++)b=(c.words[d]|0)+(a.words[d]|0)+b,this.words[d]=b&67108863,b>>>=26;for(;0!==b&&d<c.length;d++)b=(c.words[d]|0)+b,this.words[d]=b&67108863,b>>>=26;this.length=c.length;if(0!==b)this.words[this.length]=b,this.length++;else if(c!==this)for(;d<c.length;d++)this.words[d]=c.words[d];return this};f.prototype.add=function(a){if(0!==a.negative&&0===this.negative){a.negative=
0;var b=this.sub(a);a.negative^=1;return b}return 0===a.negative&&0!==this.negative?(this.negative=0,b=a.sub(this),this.negative=1,b):this.length>a.length?this.clone().iadd(a):a.clone().iadd(this)};f.prototype.isub=function(a){if(0!==a.negative){a.negative=0;var b=this.iadd(a);a.negative=1;return b._normSign()}if(0!==this.negative)return this.negative=0,this.iadd(a),this.negative=1,this._normSign();b=this.cmp(a);if(0===b)return this.negative=0,this.length=1,this.words[0]=0,this;if(0<b)var c=this;
else c=a,a=this;for(var d=0,e=0;e<a.length;e++)b=(c.words[e]|0)-(a.words[e]|0)+d,d=b>>26,this.words[e]=b&67108863;for(;0!==d&&e<c.length;e++)b=(c.words[e]|0)+d,d=b>>26,this.words[e]=b&67108863;if(0===d&&e<c.length&&c!==this)for(;e<c.length;e++)this.words[e]=c.words[e];this.length=Math.max(this.length,e);c!==this&&(this.negative=1);return this.strip()};f.prototype.sub=function(a){return this.clone().isub(a)};var l=function(a,b,c){var d=a.words,e=b.words,g=c.words,f=0,h=d[0]|0,n=h&8191,k=h>>>13,t=d[1]|
0;h=t&8191;var v=t>>>13,m=d[2]|0;t=m&8191;var r=m>>>13,u=d[3]|0;m=u&8191;var y=u>>>13,B=d[4]|0;u=B&8191;var D=B>>>13,C=d[5]|0;B=C&8191;var A=C>>>13,G=d[6]|0;C=G&8191;var l=G>>>13,p=d[7]|0;G=p&8191;var E=p>>>13,q=d[8]|0;p=q&8191;q>>>=13;var J=d[9]|0;d=J&8191;J>>>=13;var P=e[0]|0,H=P&8191,M=P>>>13,w=e[1]|0;P=w&8191;var x=w>>>13,z=e[2]|0;w=z&8191;var F=z>>>13,K=e[3]|0;z=K&8191;var Aa=K>>>13,va=e[4]|0;K=va&8191;var sa=va>>>13,Ca=e[5]|0;va=Ca&8191;var Ga=Ca>>>13,Ja=e[6]|0;Ca=Ja&8191;var oa=Ja>>>13,Ea=
e[7]|0;Ja=Ea&8191;var na=Ea>>>13,ua=e[8]|0;Ea=ua&8191;ua>>>=13;var Fa=e[9]|0;e=Fa&8191;Fa>>>=13;c.negative=a.negative^b.negative;c.length=19;var X=Math.imul(n,H);a=Math.imul(n,M);a=a+Math.imul(k,H)|0;b=Math.imul(k,M);var Pa=(f+X|0)+((a&8191)<<13)|0;f=(b+(a>>>13)|0)+(Pa>>>26)|0;Pa&=67108863;X=Math.imul(h,H);a=Math.imul(h,M);a=a+Math.imul(v,H)|0;b=Math.imul(v,M);X=X+Math.imul(n,P)|0;a=a+Math.imul(n,x)|0;a=a+Math.imul(k,P)|0;b=b+Math.imul(k,x)|0;var Ba=(f+X|0)+((a&8191)<<13)|0;f=(b+(a>>>13)|0)+(Ba>>>
26)|0;Ba&=67108863;X=Math.imul(t,H);a=Math.imul(t,M);a=a+Math.imul(r,H)|0;b=Math.imul(r,M);X=X+Math.imul(h,P)|0;a=a+Math.imul(h,x)|0;a=a+Math.imul(v,P)|0;b=b+Math.imul(v,x)|0;X=X+Math.imul(n,w)|0;a=a+Math.imul(n,F)|0;a=a+Math.imul(k,w)|0;b=b+Math.imul(k,F)|0;var Ia=(f+X|0)+((a&8191)<<13)|0;f=(b+(a>>>13)|0)+(Ia>>>26)|0;Ia&=67108863;X=Math.imul(m,H);a=Math.imul(m,M);a=a+Math.imul(y,H)|0;b=Math.imul(y,M);X=X+Math.imul(t,P)|0;a=a+Math.imul(t,x)|0;a=a+Math.imul(r,P)|0;b=b+Math.imul(r,x)|0;X=X+Math.imul(h,
w)|0;a=a+Math.imul(h,F)|0;a=a+Math.imul(v,w)|0;b=b+Math.imul(v,F)|0;X=X+Math.imul(n,z)|0;a=a+Math.imul(n,Aa)|0;a=a+Math.imul(k,z)|0;b=b+Math.imul(k,Aa)|0;var Ka=(f+X|0)+((a&8191)<<13)|0;f=(b+(a>>>13)|0)+(Ka>>>26)|0;Ka&=67108863;X=Math.imul(u,H);a=Math.imul(u,M);a=a+Math.imul(D,H)|0;b=Math.imul(D,M);X=X+Math.imul(m,P)|0;a=a+Math.imul(m,x)|0;a=a+Math.imul(y,P)|0;b=b+Math.imul(y,x)|0;X=X+Math.imul(t,w)|0;a=a+Math.imul(t,F)|0;a=a+Math.imul(r,w)|0;b=b+Math.imul(r,F)|0;X=X+Math.imul(h,z)|0;a=a+Math.imul(h,
Aa)|0;a=a+Math.imul(v,z)|0;b=b+Math.imul(v,Aa)|0;X=X+Math.imul(n,K)|0;a=a+Math.imul(n,sa)|0;a=a+Math.imul(k,K)|0;b=b+Math.imul(k,sa)|0;var Ua=(f+X|0)+((a&8191)<<13)|0;f=(b+(a>>>13)|0)+(Ua>>>26)|0;Ua&=67108863;X=Math.imul(B,H);a=Math.imul(B,M);a=a+Math.imul(A,H)|0;b=Math.imul(A,M);X=X+Math.imul(u,P)|0;a=a+Math.imul(u,x)|0;a=a+Math.imul(D,P)|0;b=b+Math.imul(D,x)|0;X=X+Math.imul(m,w)|0;a=a+Math.imul(m,F)|0;a=a+Math.imul(y,w)|0;b=b+Math.imul(y,F)|0;X=X+Math.imul(t,z)|0;a=a+Math.imul(t,Aa)|0;a=a+Math.imul(r,
z)|0;b=b+Math.imul(r,Aa)|0;X=X+Math.imul(h,K)|0;a=a+Math.imul(h,sa)|0;a=a+Math.imul(v,K)|0;b=b+Math.imul(v,sa)|0;X=X+Math.imul(n,va)|0;a=a+Math.imul(n,Ga)|0;a=a+Math.imul(k,va)|0;b=b+Math.imul(k,Ga)|0;var Ya=(f+X|0)+((a&8191)<<13)|0;f=(b+(a>>>13)|0)+(Ya>>>26)|0;Ya&=67108863;X=Math.imul(C,H);a=Math.imul(C,M);a=a+Math.imul(l,H)|0;b=Math.imul(l,M);X=X+Math.imul(B,P)|0;a=a+Math.imul(B,x)|0;a=a+Math.imul(A,P)|0;b=b+Math.imul(A,x)|0;X=X+Math.imul(u,w)|0;a=a+Math.imul(u,F)|0;a=a+Math.imul(D,w)|0;b=b+Math.imul(D,
F)|0;X=X+Math.imul(m,z)|0;a=a+Math.imul(m,Aa)|0;a=a+Math.imul(y,z)|0;b=b+Math.imul(y,Aa)|0;X=X+Math.imul(t,K)|0;a=a+Math.imul(t,sa)|0;a=a+Math.imul(r,K)|0;b=b+Math.imul(r,sa)|0;X=X+Math.imul(h,va)|0;a=a+Math.imul(h,Ga)|0;a=a+Math.imul(v,va)|0;b=b+Math.imul(v,Ga)|0;X=X+Math.imul(n,Ca)|0;a=a+Math.imul(n,oa)|0;a=a+Math.imul(k,Ca)|0;b=b+Math.imul(k,oa)|0;var Cb=(f+X|0)+((a&8191)<<13)|0;f=(b+(a>>>13)|0)+(Cb>>>26)|0;Cb&=67108863;X=Math.imul(G,H);a=Math.imul(G,M);a=a+Math.imul(E,H)|0;b=Math.imul(E,M);X=
X+Math.imul(C,P)|0;a=a+Math.imul(C,x)|0;a=a+Math.imul(l,P)|0;b=b+Math.imul(l,x)|0;X=X+Math.imul(B,w)|0;a=a+Math.imul(B,F)|0;a=a+Math.imul(A,w)|0;b=b+Math.imul(A,F)|0;X=X+Math.imul(u,z)|0;a=a+Math.imul(u,Aa)|0;a=a+Math.imul(D,z)|0;b=b+Math.imul(D,Aa)|0;X=X+Math.imul(m,K)|0;a=a+Math.imul(m,sa)|0;a=a+Math.imul(y,K)|0;b=b+Math.imul(y,sa)|0;X=X+Math.imul(t,va)|0;a=a+Math.imul(t,Ga)|0;a=a+Math.imul(r,va)|0;b=b+Math.imul(r,Ga)|0;X=X+Math.imul(h,Ca)|0;a=a+Math.imul(h,oa)|0;a=a+Math.imul(v,Ca)|0;b=b+Math.imul(v,
oa)|0;X=X+Math.imul(n,Ja)|0;a=a+Math.imul(n,na)|0;a=a+Math.imul(k,Ja)|0;b=b+Math.imul(k,na)|0;var eb=(f+X|0)+((a&8191)<<13)|0;f=(b+(a>>>13)|0)+(eb>>>26)|0;eb&=67108863;X=Math.imul(p,H);a=Math.imul(p,M);a=a+Math.imul(q,H)|0;b=Math.imul(q,M);X=X+Math.imul(G,P)|0;a=a+Math.imul(G,x)|0;a=a+Math.imul(E,P)|0;b=b+Math.imul(E,x)|0;X=X+Math.imul(C,w)|0;a=a+Math.imul(C,F)|0;a=a+Math.imul(l,w)|0;b=b+Math.imul(l,F)|0;X=X+Math.imul(B,z)|0;a=a+Math.imul(B,Aa)|0;a=a+Math.imul(A,z)|0;b=b+Math.imul(A,Aa)|0;X=X+Math.imul(u,
K)|0;a=a+Math.imul(u,sa)|0;a=a+Math.imul(D,K)|0;b=b+Math.imul(D,sa)|0;X=X+Math.imul(m,va)|0;a=a+Math.imul(m,Ga)|0;a=a+Math.imul(y,va)|0;b=b+Math.imul(y,Ga)|0;X=X+Math.imul(t,Ca)|0;a=a+Math.imul(t,oa)|0;a=a+Math.imul(r,Ca)|0;b=b+Math.imul(r,oa)|0;X=X+Math.imul(h,Ja)|0;a=a+Math.imul(h,na)|0;a=a+Math.imul(v,Ja)|0;b=b+Math.imul(v,na)|0;X=X+Math.imul(n,Ea)|0;a=a+Math.imul(n,ua)|0;a=a+Math.imul(k,Ea)|0;b=b+Math.imul(k,ua)|0;var Ta=(f+X|0)+((a&8191)<<13)|0;f=(b+(a>>>13)|0)+(Ta>>>26)|0;Ta&=67108863;X=Math.imul(d,
H);a=Math.imul(d,M);a=a+Math.imul(J,H)|0;b=Math.imul(J,M);X=X+Math.imul(p,P)|0;a=a+Math.imul(p,x)|0;a=a+Math.imul(q,P)|0;b=b+Math.imul(q,x)|0;X=X+Math.imul(G,w)|0;a=a+Math.imul(G,F)|0;a=a+Math.imul(E,w)|0;b=b+Math.imul(E,F)|0;X=X+Math.imul(C,z)|0;a=a+Math.imul(C,Aa)|0;a=a+Math.imul(l,z)|0;b=b+Math.imul(l,Aa)|0;X=X+Math.imul(B,K)|0;a=a+Math.imul(B,sa)|0;a=a+Math.imul(A,K)|0;b=b+Math.imul(A,sa)|0;X=X+Math.imul(u,va)|0;a=a+Math.imul(u,Ga)|0;a=a+Math.imul(D,va)|0;b=b+Math.imul(D,Ga)|0;X=X+Math.imul(m,
Ca)|0;a=a+Math.imul(m,oa)|0;a=a+Math.imul(y,Ca)|0;b=b+Math.imul(y,oa)|0;X=X+Math.imul(t,Ja)|0;a=a+Math.imul(t,na)|0;a=a+Math.imul(r,Ja)|0;b=b+Math.imul(r,na)|0;X=X+Math.imul(h,Ea)|0;a=a+Math.imul(h,ua)|0;a=a+Math.imul(v,Ea)|0;b=b+Math.imul(v,ua)|0;X=X+Math.imul(n,e)|0;a=a+Math.imul(n,Fa)|0;a=a+Math.imul(k,e)|0;b=b+Math.imul(k,Fa)|0;n=(f+X|0)+((a&8191)<<13)|0;f=(b+(a>>>13)|0)+(n>>>26)|0;n&=67108863;X=Math.imul(d,P);a=Math.imul(d,x);a=a+Math.imul(J,P)|0;b=Math.imul(J,x);X=X+Math.imul(p,w)|0;a=a+Math.imul(p,
F)|0;a=a+Math.imul(q,w)|0;b=b+Math.imul(q,F)|0;X=X+Math.imul(G,z)|0;a=a+Math.imul(G,Aa)|0;a=a+Math.imul(E,z)|0;b=b+Math.imul(E,Aa)|0;X=X+Math.imul(C,K)|0;a=a+Math.imul(C,sa)|0;a=a+Math.imul(l,K)|0;b=b+Math.imul(l,sa)|0;X=X+Math.imul(B,va)|0;a=a+Math.imul(B,Ga)|0;a=a+Math.imul(A,va)|0;b=b+Math.imul(A,Ga)|0;X=X+Math.imul(u,Ca)|0;a=a+Math.imul(u,oa)|0;a=a+Math.imul(D,Ca)|0;b=b+Math.imul(D,oa)|0;X=X+Math.imul(m,Ja)|0;a=a+Math.imul(m,na)|0;a=a+Math.imul(y,Ja)|0;b=b+Math.imul(y,na)|0;X=X+Math.imul(t,Ea)|
0;a=a+Math.imul(t,ua)|0;a=a+Math.imul(r,Ea)|0;b=b+Math.imul(r,ua)|0;X=X+Math.imul(h,e)|0;a=a+Math.imul(h,Fa)|0;a=a+Math.imul(v,e)|0;b=b+Math.imul(v,Fa)|0;h=(f+X|0)+((a&8191)<<13)|0;f=(b+(a>>>13)|0)+(h>>>26)|0;h&=67108863;X=Math.imul(d,w);a=Math.imul(d,F);a=a+Math.imul(J,w)|0;b=Math.imul(J,F);X=X+Math.imul(p,z)|0;a=a+Math.imul(p,Aa)|0;a=a+Math.imul(q,z)|0;b=b+Math.imul(q,Aa)|0;X=X+Math.imul(G,K)|0;a=a+Math.imul(G,sa)|0;a=a+Math.imul(E,K)|0;b=b+Math.imul(E,sa)|0;X=X+Math.imul(C,va)|0;a=a+Math.imul(C,
Ga)|0;a=a+Math.imul(l,va)|0;b=b+Math.imul(l,Ga)|0;X=X+Math.imul(B,Ca)|0;a=a+Math.imul(B,oa)|0;a=a+Math.imul(A,Ca)|0;b=b+Math.imul(A,oa)|0;X=X+Math.imul(u,Ja)|0;a=a+Math.imul(u,na)|0;a=a+Math.imul(D,Ja)|0;b=b+Math.imul(D,na)|0;X=X+Math.imul(m,Ea)|0;a=a+Math.imul(m,ua)|0;a=a+Math.imul(y,Ea)|0;b=b+Math.imul(y,ua)|0;X=X+Math.imul(t,e)|0;a=a+Math.imul(t,Fa)|0;a=a+Math.imul(r,e)|0;b=b+Math.imul(r,Fa)|0;t=(f+X|0)+((a&8191)<<13)|0;f=(b+(a>>>13)|0)+(t>>>26)|0;t&=67108863;X=Math.imul(d,z);a=Math.imul(d,Aa);
a=a+Math.imul(J,z)|0;b=Math.imul(J,Aa);X=X+Math.imul(p,K)|0;a=a+Math.imul(p,sa)|0;a=a+Math.imul(q,K)|0;b=b+Math.imul(q,sa)|0;X=X+Math.imul(G,va)|0;a=a+Math.imul(G,Ga)|0;a=a+Math.imul(E,va)|0;b=b+Math.imul(E,Ga)|0;X=X+Math.imul(C,Ca)|0;a=a+Math.imul(C,oa)|0;a=a+Math.imul(l,Ca)|0;b=b+Math.imul(l,oa)|0;X=X+Math.imul(B,Ja)|0;a=a+Math.imul(B,na)|0;a=a+Math.imul(A,Ja)|0;b=b+Math.imul(A,na)|0;X=X+Math.imul(u,Ea)|0;a=a+Math.imul(u,ua)|0;a=a+Math.imul(D,Ea)|0;b=b+Math.imul(D,ua)|0;X=X+Math.imul(m,e)|0;a=a+
Math.imul(m,Fa)|0;a=a+Math.imul(y,e)|0;b=b+Math.imul(y,Fa)|0;m=(f+X|0)+((a&8191)<<13)|0;f=(b+(a>>>13)|0)+(m>>>26)|0;m&=67108863;X=Math.imul(d,K);a=Math.imul(d,sa);a=a+Math.imul(J,K)|0;b=Math.imul(J,sa);X=X+Math.imul(p,va)|0;a=a+Math.imul(p,Ga)|0;a=a+Math.imul(q,va)|0;b=b+Math.imul(q,Ga)|0;X=X+Math.imul(G,Ca)|0;a=a+Math.imul(G,oa)|0;a=a+Math.imul(E,Ca)|0;b=b+Math.imul(E,oa)|0;X=X+Math.imul(C,Ja)|0;a=a+Math.imul(C,na)|0;a=a+Math.imul(l,Ja)|0;b=b+Math.imul(l,na)|0;X=X+Math.imul(B,Ea)|0;a=a+Math.imul(B,
ua)|0;a=a+Math.imul(A,Ea)|0;b=b+Math.imul(A,ua)|0;X=X+Math.imul(u,e)|0;a=a+Math.imul(u,Fa)|0;a=a+Math.imul(D,e)|0;b=b+Math.imul(D,Fa)|0;u=(f+X|0)+((a&8191)<<13)|0;f=(b+(a>>>13)|0)+(u>>>26)|0;u&=67108863;X=Math.imul(d,va);a=Math.imul(d,Ga);a=a+Math.imul(J,va)|0;b=Math.imul(J,Ga);X=X+Math.imul(p,Ca)|0;a=a+Math.imul(p,oa)|0;a=a+Math.imul(q,Ca)|0;b=b+Math.imul(q,oa)|0;X=X+Math.imul(G,Ja)|0;a=a+Math.imul(G,na)|0;a=a+Math.imul(E,Ja)|0;b=b+Math.imul(E,na)|0;X=X+Math.imul(C,Ea)|0;a=a+Math.imul(C,ua)|0;a=
a+Math.imul(l,Ea)|0;b=b+Math.imul(l,ua)|0;X=X+Math.imul(B,e)|0;a=a+Math.imul(B,Fa)|0;a=a+Math.imul(A,e)|0;b=b+Math.imul(A,Fa)|0;B=(f+X|0)+((a&8191)<<13)|0;f=(b+(a>>>13)|0)+(B>>>26)|0;B&=67108863;X=Math.imul(d,Ca);a=Math.imul(d,oa);a=a+Math.imul(J,Ca)|0;b=Math.imul(J,oa);X=X+Math.imul(p,Ja)|0;a=a+Math.imul(p,na)|0;a=a+Math.imul(q,Ja)|0;b=b+Math.imul(q,na)|0;X=X+Math.imul(G,Ea)|0;a=a+Math.imul(G,ua)|0;a=a+Math.imul(E,Ea)|0;b=b+Math.imul(E,ua)|0;X=X+Math.imul(C,e)|0;a=a+Math.imul(C,Fa)|0;a=a+Math.imul(l,
e)|0;b=b+Math.imul(l,Fa)|0;C=(f+X|0)+((a&8191)<<13)|0;f=(b+(a>>>13)|0)+(C>>>26)|0;C&=67108863;X=Math.imul(d,Ja);a=Math.imul(d,na);a=a+Math.imul(J,Ja)|0;b=Math.imul(J,na);X=X+Math.imul(p,Ea)|0;a=a+Math.imul(p,ua)|0;a=a+Math.imul(q,Ea)|0;b=b+Math.imul(q,ua)|0;X=X+Math.imul(G,e)|0;a=a+Math.imul(G,Fa)|0;a=a+Math.imul(E,e)|0;b=b+Math.imul(E,Fa)|0;G=(f+X|0)+((a&8191)<<13)|0;f=(b+(a>>>13)|0)+(G>>>26)|0;G&=67108863;X=Math.imul(d,Ea);a=Math.imul(d,ua);a=a+Math.imul(J,Ea)|0;b=Math.imul(J,ua);X=X+Math.imul(p,
e)|0;a=a+Math.imul(p,Fa)|0;a=a+Math.imul(q,e)|0;b=b+Math.imul(q,Fa)|0;p=(f+X|0)+((a&8191)<<13)|0;f=(b+(a>>>13)|0)+(p>>>26)|0;p&=67108863;X=Math.imul(d,e);a=Math.imul(d,Fa);a=a+Math.imul(J,e)|0;b=Math.imul(J,Fa);k=(f+X|0)+((a&8191)<<13)|0;f=(b+(a>>>13)|0)+(k>>>26)|0;g[0]=Pa;g[1]=Ba;g[2]=Ia;g[3]=Ka;g[4]=Ua;g[5]=Ya;g[6]=Cb;g[7]=eb;g[8]=Ta;g[9]=n;g[10]=h;g[11]=t;g[12]=m;g[13]=u;g[14]=B;g[15]=C;g[16]=G;g[17]=p;g[18]=k&67108863;0!==f&&(g[19]=f,c.length++);return c};Math.imul||(l=u);f.prototype.mulTo=function(a,
b){var c=this.length+a.length;if(10===this.length&&10===a.length)a=l(this,a,b);else if(63>c)a=u(this,a,b);else if(1024>c){b.negative=a.negative^this.negative;b.length=this.length+a.length;for(var d=0,e=c=0;e<b.length-1;e++){var g=c;c=0;d&=67108863;for(var f=Math.min(e,a.length-1),h=Math.max(0,e-this.length+1);h<=f;h++){var n=(this.words[e-h]|0)*(a.words[h]|0),k=n&67108863;g=g+(n/67108864|0)|0;k=k+d|0;d=k&67108863;g=g+(k>>>26)|0;c+=g>>>26;g&=67108863}b.words[e]=d;d=g}0!==d?b.words[e]=d:b.length--;
a=b.strip()}else a=(new r).mulp(this,a,b);return a};r.prototype.makeRBT=function(a){for(var b=Array(a),c=f.prototype._countBits(a)-1,d=0;d<a;d++)b[d]=this.revBin(d,c,a);return b};r.prototype.revBin=function(a,b,c){if(0===a||a===c-1)return a;for(var d=c=0;d<b;d++)c|=(a&1)<<b-d-1,a>>=1;return c};r.prototype.permute=function(a,b,c,d,e,g){for(var f=0;f<g;f++)d[f]=b[a[f]],e[f]=c[a[f]]};r.prototype.transform=function(a,b,c,d,e,g){this.permute(g,a,b,c,d,e);for(a=1;a<e;a<<=1){b=a<<1;g=Math.cos(2*Math.PI/
b);for(var f=Math.sin(2*Math.PI/b),h=0;h<e;h+=b)for(var n=g,k=f,t=0;t<a;t++){var v=c[h+t],m=d[h+t],r=c[h+t+a],u=d[h+t+a],y=n*r-k*u;u=n*u+k*r;r=y;c[h+t]=v+r;d[h+t]=m+u;c[h+t+a]=v-r;d[h+t+a]=m-u;t!==b&&(y=g*n-f*k,k=g*k+f*n,n=y)}}};r.prototype.guessLen13b=function(a,b){a=Math.max(b,a)|1;b=a&1;var c=0;for(a=a/2|0;a;a>>>=1)c++;return 1<<c+1+b};r.prototype.conjugate=function(a,b,c){if(!(1>=c))for(var d=0;d<c/2;d++){var e=a[d];a[d]=a[c-d-1];a[c-d-1]=e;e=b[d];b[d]=-b[c-d-1];b[c-d-1]=-e}};r.prototype.normalize13b=
function(a,b){for(var c=0,d=0;d<b/2;d++)c=8192*Math.round(a[2*d+1]/b)+Math.round(a[2*d]/b)+c,a[d]=c&67108863,c=67108864>c?0:c/67108864|0;return a};r.prototype.convert13b=function(a,b,c,d){for(var e=0,g=0;g<b;g++)e+=a[g]|0,c[2*g]=e&8191,e>>>=13,c[2*g+1]=e&8191,e>>>=13;for(g=2*b;g<d;++g)c[g]=0;h(0===e);h(0===(e&-8192))};r.prototype.stub=function(a){for(var b=Array(a),c=0;c<a;c++)b[c]=0;return b};r.prototype.mulp=function(a,b,c){var d=2*this.guessLen13b(a.length,b.length),e=this.makeRBT(d),g=this.stub(d),
f=Array(d),h=Array(d),n=Array(d),k=Array(d),t=Array(d),v=Array(d),m=c.words;m.length=d;this.convert13b(a.words,a.length,f,d);this.convert13b(b.words,b.length,k,d);this.transform(f,g,h,n,d,e);this.transform(k,g,t,v,d,e);for(f=0;f<d;f++)k=h[f]*t[f]-n[f]*v[f],n[f]=h[f]*v[f]+n[f]*t[f],h[f]=k;this.conjugate(h,n,d);this.transform(h,n,m,g,d,e);this.conjugate(m,g,d);this.normalize13b(m,d);c.negative=a.negative^b.negative;c.length=a.length+b.length;return c.strip()};f.prototype.mul=function(a){var b=new f(null);
b.words=Array(this.length+a.length);return this.mulTo(a,b)};f.prototype.mulf=function(a){var b=new f(null);b.words=Array(this.length+a.length);return(new r).mulp(this,a,b)};f.prototype.imul=function(a){return this.clone().mulTo(a,this)};f.prototype.imuln=function(a){h("number"===typeof a);h(67108864>a);for(var b=0,c=0;c<this.length;c++){var d=(this.words[c]|0)*a,e=(d&67108863)+(b&67108863);b>>=26;b+=d/67108864|0;b+=e>>>26;this.words[c]=e&67108863}0!==b&&(this.words[c]=b,this.length++);return this};
f.prototype.muln=function(a){return this.clone().imuln(a)};f.prototype.sqr=function(){return this.mul(this)};f.prototype.isqr=function(){return this.imul(this.clone())};f.prototype.pow=function(a){for(var b=Array(a.bitLength()),c=0;c<b.length;c++){var d=c%26;b[c]=(a.words[c/26|0]&1<<d)>>>d}if(0===b.length)return new f(1);a=this;for(c=0;c<b.length&&0===b[c];c++,a=a.sqr());if(++c<b.length)for(d=a.sqr();c<b.length;c++,d=d.sqr())0!==b[c]&&(a=a.mul(d));return a};f.prototype.iushln=function(a){h("number"===
typeof a&&0<=a);var b=a%26;a=(a-b)/26;var c=67108863>>>26-b<<26-b,d;if(0!==b){var e=0;for(d=0;d<this.length;d++){var g=this.words[d]&c;this.words[d]=(this.words[d]|0)-g<<b|e;e=g>>>26-b}e&&(this.words[d]=e,this.length++)}if(0!==a){for(d=this.length-1;0<=d;d--)this.words[d+a]=this.words[d];for(d=0;d<a;d++)this.words[d]=0;this.length+=a}return this.strip()};f.prototype.ishln=function(a){h(0===this.negative);return this.iushln(a)};f.prototype.iushrn=function(a,b,c){h("number"===typeof a&&0<=a);var d=
a%26,e=Math.min((a-d)/26,this.length);a=67108863^67108863>>>d<<d;b=Math.max(0,(b?(b-b%26)/26:0)-e);if(c){for(var g=0;g<e;g++)c.words[g]=this.words[g];c.length=e}if(0!==e)if(this.length>e)for(this.length-=e,g=0;g<this.length;g++)this.words[g]=this.words[g+e];else this.words[0]=0,this.length=1;e=0;for(g=this.length-1;0<=g&&(0!==e||g>=b);g--){var f=this.words[g]|0;this.words[g]=e<<26-d|f>>>d;e=f&a}c&&0!==e&&(c.words[c.length++]=e);0===this.length&&(this.words[0]=0,this.length=1);return this.strip()};
f.prototype.ishrn=function(a,b,c){h(0===this.negative);return this.iushrn(a,b,c)};f.prototype.shln=function(a){return this.clone().ishln(a)};f.prototype.ushln=function(a){return this.clone().iushln(a)};f.prototype.shrn=function(a){return this.clone().ishrn(a)};f.prototype.ushrn=function(a){return this.clone().iushrn(a)};f.prototype.testn=function(a){h("number"===typeof a&&0<=a);var b=a%26;a=(a-b)/26;return this.length<=a?!1:!!(this.words[a]&1<<b)};f.prototype.imaskn=function(a){h("number"===typeof a&&
0<=a);var b=a%26;a=(a-b)/26;h(0===this.negative,"imaskn works only with positive numbers");if(this.length<=a)return this;0!==b&&a++;this.length=Math.min(a,this.length);0!==b&&(this.words[this.length-1]&=67108863^67108863>>>b<<b);return this.strip()};f.prototype.maskn=function(a){return this.clone().imaskn(a)};f.prototype.iaddn=function(a){h("number"===typeof a);h(67108864>a);if(0>a)return this.isubn(-a);if(0!==this.negative){if(1===this.length&&(this.words[0]|0)<a)return this.words[0]=a-(this.words[0]|
0),this.negative=0,this;this.negative=0;this.isubn(a);this.negative=1;return this}return this._iaddn(a)};f.prototype._iaddn=function(a){this.words[0]+=a;for(a=0;a<this.length&&67108864<=this.words[a];a++)this.words[a]-=67108864,a===this.length-1?this.words[a+1]=1:this.words[a+1]++;this.length=Math.max(this.length,a+1);return this};f.prototype.isubn=function(a){h("number"===typeof a);h(67108864>a);if(0>a)return this.iaddn(-a);if(0!==this.negative)return this.negative=0,this.iaddn(a),this.negative=
1,this;this.words[0]-=a;if(1===this.length&&0>this.words[0])this.words[0]=-this.words[0],this.negative=1;else for(a=0;a<this.length&&0>this.words[a];a++)this.words[a]+=67108864,--this.words[a+1];return this.strip()};f.prototype.addn=function(a){return this.clone().iaddn(a)};f.prototype.subn=function(a){return this.clone().isubn(a)};f.prototype.iabs=function(){this.negative=0;return this};f.prototype.abs=function(){return this.clone().iabs()};f.prototype._ishlnsubmul=function(a,b,c){var d;this._expand(a.length+
c);var e=0;for(d=0;d<a.length;d++){var g=(this.words[d+c]|0)+e;e=(a.words[d]|0)*b;g-=e&67108863;e=(g>>26)-(e/67108864|0);this.words[d+c]=g&67108863}for(;d<this.length-c;d++)g=(this.words[d+c]|0)+e,e=g>>26,this.words[d+c]=g&67108863;if(0===e)return this.strip();h(-1===e);for(d=e=0;d<this.length;d++)g=-(this.words[d]|0)+e,e=g>>26,this.words[d]=g&67108863;this.negative=1;return this.strip()};f.prototype._wordDiv=function(a,b){var c=this.clone(),d=a,e=d.words[d.length-1]|0;a=26-this._countBits(e);0!==
a&&(d=d.ushln(a),c.iushln(a),e=d.words[d.length-1]|0);var g=c.length-d.length;if("mod"!==b){var h=new f(null);h.length=g+1;h.words=Array(h.length);for(var n=0;n<h.length;n++)h.words[n]=0}n=c.clone()._ishlnsubmul(d,1,g);0===n.negative&&(c=n,h&&(h.words[g]=1));for(--g;0<=g;g--){n=67108864*(c.words[d.length+g]|0)+(c.words[d.length+g-1]|0);n=Math.min(n/e|0,67108863);for(c._ishlnsubmul(d,n,g);0!==c.negative;)n--,c.negative=0,c._ishlnsubmul(d,1,g),c.isZero()||(c.negative^=1);h&&(h.words[g]=n)}h&&h.strip();
c.strip();"div"!==b&&0!==a&&c.iushrn(a);return{div:h||null,mod:c}};f.prototype.divmod=function(a,b,c){h(!a.isZero());if(this.isZero())return{div:new f(0),mod:new f(0)};var d;if(0!==this.negative&&0===a.negative){var e=this.neg().divmod(a,b);"mod"!==b&&(d=e.div.neg());if("div"!==b){var g=e.mod.neg();c&&0!==g.negative&&g.iadd(a)}return{div:d,mod:g}}return 0===this.negative&&0!==a.negative?(e=this.divmod(a.neg(),b),"mod"!==b&&(d=e.div.neg()),{div:d,mod:e.mod}):0!==(this.negative&a.negative)?(e=this.neg().divmod(a.neg(),
b),"div"!==b&&(g=e.mod.neg(),c&&0!==g.negative&&g.isub(a)),{div:e.div,mod:g}):a.length>this.length||0>this.cmp(a)?{div:new f(0),mod:this}:1===a.length?"div"===b?{div:this.divn(a.words[0]),mod:null}:"mod"===b?{div:null,mod:new f(this.modn(a.words[0]))}:{div:this.divn(a.words[0]),mod:new f(this.modn(a.words[0]))}:this._wordDiv(a,b)};f.prototype.div=function(a){return this.divmod(a,"div",!1).div};f.prototype.mod=function(a){return this.divmod(a,"mod",!1).mod};f.prototype.umod=function(a){return this.divmod(a,
"mod",!0).mod};f.prototype.divRound=function(a){var b=this.divmod(a);if(b.mod.isZero())return b.div;var c=0!==b.div.negative?b.mod.isub(a):b.mod,d=a.ushrn(1);a=a.andln(1);c=c.cmp(d);return 0>c||1===a&&0===c?b.div:0!==b.div.negative?b.div.isubn(1):b.div.iaddn(1)};f.prototype.modn=function(a){h(67108863>=a);for(var b=67108864%a,c=0,d=this.length-1;0<=d;d--)c=(b*c+(this.words[d]|0))%a;return c};f.prototype.idivn=function(a){h(67108863>=a);for(var b=0,c=this.length-1;0<=c;c--)b=(this.words[c]|0)+67108864*
b,this.words[c]=b/a|0,b%=a;return this.strip()};f.prototype.divn=function(a){return this.clone().idivn(a)};f.prototype.egcd=function(a){h(0===a.negative);h(!a.isZero());var b=this,c=a.clone();b=0!==b.negative?b.umod(a):b.clone();a=new f(1);for(var d=new f(0),e=new f(0),g=new f(1),n=0;b.isEven()&&c.isEven();)b.iushrn(1),c.iushrn(1),++n;for(var k=c.clone(),t=b.clone();!b.isZero();){for(var v=0,m=1;0===(b.words[0]&m)&&26>v;++v,m<<=1);if(0<v)for(b.iushrn(v);0<v--;){if(a.isOdd()||d.isOdd())a.iadd(k),d.isub(t);
a.iushrn(1);d.iushrn(1)}v=0;for(m=1;0===(c.words[0]&m)&&26>v;++v,m<<=1);if(0<v)for(c.iushrn(v);0<v--;){if(e.isOdd()||g.isOdd())e.iadd(k),g.isub(t);e.iushrn(1);g.iushrn(1)}0<=b.cmp(c)?(b.isub(c),a.isub(e),d.isub(g)):(c.isub(b),e.isub(a),g.isub(d))}return{a:e,b:g,gcd:c.iushln(n)}};f.prototype._invmp=function(a){h(0===a.negative);h(!a.isZero());var b=this,c=a.clone();b=0!==b.negative?b.umod(a):b.clone();for(var d=new f(1),e=new f(0),g=c.clone();0<b.cmpn(1)&&0<c.cmpn(1);){for(var n=0,k=1;0===(b.words[0]&
k)&&26>n;++n,k<<=1);if(0<n)for(b.iushrn(n);0<n--;)d.isOdd()&&d.iadd(g),d.iushrn(1);n=0;for(k=1;0===(c.words[0]&k)&&26>n;++n,k<<=1);if(0<n)for(c.iushrn(n);0<n--;)e.isOdd()&&e.iadd(g),e.iushrn(1);0<=b.cmp(c)?(b.isub(c),d.isub(e)):(c.isub(b),e.isub(d))}b=0===b.cmpn(1)?d:e;0>b.cmpn(0)&&b.iadd(a);return b};f.prototype.gcd=function(a){if(this.isZero())return a.abs();if(a.isZero())return this.abs();var b=this.clone();a=a.clone();b.negative=0;for(var c=a.negative=0;b.isEven()&&a.isEven();c++)b.iushrn(1),
a.iushrn(1);do{for(;b.isEven();)b.iushrn(1);for(;a.isEven();)a.iushrn(1);var d=b.cmp(a);if(0>d)d=b,b=a,a=d;else if(0===d||0===a.cmpn(1))break;b.isub(a)}while(1);return a.iushln(c)};f.prototype.invm=function(a){return this.egcd(a).a.umod(a)};f.prototype.isEven=function(){return 0===(this.words[0]&1)};f.prototype.isOdd=function(){return 1===(this.words[0]&1)};f.prototype.andln=function(a){return this.words[0]&a};f.prototype.bincn=function(a){h("number"===typeof a);var b=a%26;a=(a-b)/26;b=1<<b;if(this.length<=
a)return this._expand(a+1),this.words[a]|=b,this;for(;0!==b&&a<this.length;a++){var c=this.words[a]|0;c+=b;b=c>>>26;c&=67108863;this.words[a]=c}0!==b&&(this.words[a]=b,this.length++);return this};f.prototype.isZero=function(){return 1===this.length&&0===this.words[0]};f.prototype.cmpn=function(a){var b=0>a;if(0!==this.negative&&!b)return-1;if(0===this.negative&&b)return 1;this.strip();1<this.length?a=1:(b&&(a=-a),h(67108863>=a,"Number is too big"),b=this.words[0]|0,a=b===a?0:b<a?-1:1);return 0!==
this.negative?-a|0:a};f.prototype.cmp=function(a){if(0!==this.negative&&0===a.negative)return-1;if(0===this.negative&&0!==a.negative)return 1;a=this.ucmp(a);return 0!==this.negative?-a|0:a};f.prototype.ucmp=function(a){if(this.length>a.length)return 1;if(this.length<a.length)return-1;for(var b=0,c=this.length-1;0<=c;c--){var d=this.words[c]|0,e=a.words[c]|0;if(d!==e){d<e?b=-1:d>e&&(b=1);break}}return b};f.prototype.gtn=function(a){return 1===this.cmpn(a)};f.prototype.gt=function(a){return 1===this.cmp(a)};
f.prototype.gten=function(a){return 0<=this.cmpn(a)};f.prototype.gte=function(a){return 0<=this.cmp(a)};f.prototype.ltn=function(a){return-1===this.cmpn(a)};f.prototype.lt=function(a){return-1===this.cmp(a)};f.prototype.lten=function(a){return 0>=this.cmpn(a)};f.prototype.lte=function(a){return 0>=this.cmp(a)};f.prototype.eqn=function(a){return 0===this.cmpn(a)};f.prototype.eq=function(a){return 0===this.cmp(a)};f.red=function(a){return new y(a)};f.prototype.toRed=function(a){h(!this.red,"Already a number in reduction context");
h(0===this.negative,"red works only with positives");return a.convertTo(this)._forceRed(a)};f.prototype.fromRed=function(){h(this.red,"fromRed works only with numbers in reduction context");return this.red.convertFrom(this)};f.prototype._forceRed=function(a){this.red=a;return this};f.prototype.forceRed=function(a){h(!this.red,"Already a number in reduction context");return this._forceRed(a)};f.prototype.redAdd=function(a){h(this.red,"redAdd works only with red numbers");return this.red.add(this,a)};
f.prototype.redIAdd=function(a){h(this.red,"redIAdd works only with red numbers");return this.red.iadd(this,a)};f.prototype.redSub=function(a){h(this.red,"redSub works only with red numbers");return this.red.sub(this,a)};f.prototype.redISub=function(a){h(this.red,"redISub works only with red numbers");return this.red.isub(this,a)};f.prototype.redShl=function(a){h(this.red,"redShl works only with red numbers");return this.red.shl(this,a)};f.prototype.redMul=function(a){h(this.red,"redMul works only with red numbers");
this.red._verify2(this,a);return this.red.mul(this,a)};f.prototype.redIMul=function(a){h(this.red,"redMul works only with red numbers");this.red._verify2(this,a);return this.red.imul(this,a)};f.prototype.redSqr=function(){h(this.red,"redSqr works only with red numbers");this.red._verify1(this);return this.red.sqr(this)};f.prototype.redISqr=function(){h(this.red,"redISqr works only with red numbers");this.red._verify1(this);return this.red.isqr(this)};f.prototype.redSqrt=function(){h(this.red,"redSqrt works only with red numbers");
this.red._verify1(this);return this.red.sqrt(this)};f.prototype.redInvm=function(){h(this.red,"redInvm works only with red numbers");this.red._verify1(this);return this.red.invm(this)};f.prototype.redNeg=function(){h(this.red,"redNeg works only with red numbers");this.red._verify1(this);return this.red.neg(this)};f.prototype.redPow=function(a){h(this.red&&!a.red,"redPow(normalNum)");this.red._verify1(this);return this.red.pow(this,a)};var p={k256:null,p224:null,p192:null,p25519:null};d.prototype._tmp=
function(){var a=new f(null);a.words=Array(Math.ceil(this.n/13));return a};d.prototype.ireduce=function(a){do{this.split(a,this.tmp);a=this.imulK(a);a=a.iadd(this.tmp);var b=a.bitLength()}while(b>this.n);b=b<this.n?-1:a.ucmp(this.p);0===b?(a.words[0]=0,a.length=1):0<b?a.isub(this.p):a.strip();return a};d.prototype.split=function(a,b){a.iushrn(this.n,0,b)};d.prototype.imulK=function(a){return a.imul(this.k)};e(g,d);g.prototype.split=function(a,b){for(var c=Math.min(a.length,9),d=0;d<c;d++)b.words[d]=
a.words[d];b.length=c;if(9>=a.length)a.words[0]=0,a.length=1;else{c=a.words[9];b.words[b.length++]=c&4194303;for(d=10;d<a.length;d++)b=a.words[d]|0,a.words[d-10]=(b&4194303)<<4|c>>>22,c=b;c>>>=22;a.words[d-10]=c;a.length=0===c&&10<a.length?a.length-10:a.length-9}};g.prototype.imulK=function(a){a.words[a.length]=0;a.words[a.length+1]=0;a.length+=2;for(var b=0,c=0;c<a.length;c++){var d=a.words[c]|0;b+=977*d;a.words[c]=b&67108863;b=64*d+(b/67108864|0)}0===a.words[a.length-1]&&(a.length--,0===a.words[a.length-
1]&&a.length--);return a};e(c,d);e(v,d);e(t,d);t.prototype.imulK=function(a){for(var b=0,c=0;c<a.length;c++){b=19*(a.words[c]|0)+b;var d=b&67108863;b>>>=26;a.words[c]=d}0!==b&&(a.words[a.length++]=b);return a};f._prime=function(a){if(p[a])return p[a];if("k256"===a)var b=new g;else if("p224"===a)b=new c;else if("p192"===a)b=new v;else if("p25519"===a)b=new t;else throw Error("Unknown prime "+a);return p[a]=b};y.prototype._verify1=function(a){h(0===a.negative,"red works only with positives");h(a.red,
"red works only with red numbers")};y.prototype._verify2=function(a,b){h(0===(a.negative|b.negative),"red works only with positives");h(a.red&&a.red===b.red,"red works only with red numbers")};y.prototype.imod=function(a){return this.prime?this.prime.ireduce(a)._forceRed(this):a.umod(this.m)._forceRed(this)};y.prototype.neg=function(a){return a.isZero()?a.clone():this.m.sub(a)._forceRed(this)};y.prototype.add=function(a,b){this._verify2(a,b);a=a.add(b);0<=a.cmp(this.m)&&a.isub(this.m);return a._forceRed(this)};
y.prototype.iadd=function(a,b){this._verify2(a,b);a=a.iadd(b);0<=a.cmp(this.m)&&a.isub(this.m);return a};y.prototype.sub=function(a,b){this._verify2(a,b);a=a.sub(b);0>a.cmpn(0)&&a.iadd(this.m);return a._forceRed(this)};y.prototype.isub=function(a,b){this._verify2(a,b);a=a.isub(b);0>a.cmpn(0)&&a.iadd(this.m);return a};y.prototype.shl=function(a,b){this._verify1(a);return this.imod(a.ushln(b))};y.prototype.imul=function(a,b){this._verify2(a,b);return this.imod(a.imul(b))};y.prototype.mul=function(a,
b){this._verify2(a,b);return this.imod(a.mul(b))};y.prototype.isqr=function(a){return this.imul(a,a.clone())};y.prototype.sqr=function(a){return this.mul(a,a)};y.prototype.sqrt=function(a){if(a.isZero())return a.clone();var b=this.m.andln(3);h(1===b%2);if(3===b)return b=this.m.add(new f(1)).iushrn(2),this.pow(a,b);for(var c=this.m.subn(1),d=0;!c.isZero()&&0===c.andln(1);)d++,c.iushrn(1);h(!c.isZero());b=(new f(1)).toRed(this);var e=b.redNeg(),g=this.m.subn(1).iushrn(1),n=this.m.bitLength();for(n=
(new f(2*n*n)).toRed(this);0!==this.pow(n,g).cmp(e);)n.redIAdd(e);g=this.pow(n,c);e=this.pow(a,c.addn(1).iushrn(1));a=this.pow(a,c);for(c=d;0!==a.cmp(b);){n=a;for(d=0;0!==n.cmp(b);d++)n=n.redSqr();h(d<c);g=this.pow(g,(new f(1)).iushln(c-d-1));e=e.redMul(g);g=g.redSqr();a=a.redMul(g);c=d}return e};y.prototype.invm=function(a){a=a._invmp(this.m);return 0!==a.negative?(a.negative=0,this.imod(a).redNeg()):this.imod(a)};y.prototype.pow=function(a,b){if(b.isZero())return(new f(1)).toRed(this);if(0===b.cmpn(1))return a.clone();
var c=Array(16);c[0]=(new f(1)).toRed(this);c[1]=a;for(var d=2;d<c.length;d++)c[d]=this.mul(c[d-1],a);a=c[0];var e=0,g=0,h=b.bitLength()%26;0===h&&(h=26);for(d=b.length-1;0<=d;d--){var n=b.words[d];for(--h;0<=h;h--){var k=n>>h&1;a!==c[0]&&(a=this.sqr(a));if(0===k&&0===e)g=0;else if(e<<=1,e|=k,g++,4===g||0===d&&0===h)a=this.mul(a,c[e]),e=g=0}h=26}return a};y.prototype.convertTo=function(a){var b=a.umod(this.m);return b===a?b.clone():b};y.prototype.convertFrom=function(a){a=a.clone();a.red=null;return a};
f.mont=function(a){return new B(a)};e(B,y);B.prototype.convertTo=function(a){return this.imod(a.ushln(this.shift))};B.prototype.convertFrom=function(a){a=this.imod(a.mul(this.rinv));a.red=null;return a};B.prototype.imul=function(a,b){if(a.isZero()||b.isZero())return a.words[0]=0,a.length=1,a;a=a.imul(b);b=a.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m);b=a=a.isub(b).iushrn(this.shift);0<=a.cmp(this.m)?b=a.isub(this.m):0>a.cmpn(0)&&(b=a.iadd(this.m));return b._forceRed(this)};B.prototype.mul=
function(a,b){if(a.isZero()||b.isZero())return(new f(0))._forceRed(this);a=a.mul(b);b=a.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m);b=a=a.isub(b).iushrn(this.shift);0<=a.cmp(this.m)?b=a.isub(this.m):0>a.cmpn(0)&&(b=a.iadd(this.m));return b._forceRed(this)};B.prototype.invm=function(a){return this.imod(a._invmp(this.m).mul(this.r2))._forceRed(this)}})("undefined"===typeof p||p,this)},{buffer:93}],85:[function(a,p,l){p.exports=function(a){var k,h,e,f=a.length;for(k=h=0;k<f;++k)h+=
a[k].length;var b=Array(h),n=0;for(k=0;k<f;++k){var m=a[k],r=m.length;for(h=0;h<r;++h){var d=b[n++]=Array(r-1),g=0;for(e=0;e<r;++e)e!==h&&(d[g++]=m[e]);h&1&&(e=d[1],d[1]=d[0],d[0]=e)}}return b}},{}],86:[function(a,p,l){function m(a,b,d,e){for(var c=0,g=0,f=0,h=a.length;f<h;++f){var n=a[f],k;a:{for(k=0;k<b;++k)if(!(n[k]<=n[k+b])){k=!0;break a}k=!1}if(!k){for(k=0;k<2*b;++k)d[c++]=n[k];e[g++]=f}}return g}function k(a,h,d,g){var c=a.length,n=h.length;if(!(0>=c||0>=n)){var k=a[0].length>>>1;if(!(0>=k)){var r=
e.mallocDouble(2*k*c),u=e.mallocInt32(c);c=m(a,k,r,u);if(0<c){if(1===k&&g){f.init(c);var D=f.sweepComplete(k,d,0,c,r,u,0,c,r,u)}else{a=e.mallocDouble(2*k*n);var G=e.mallocInt32(n);n=m(h,k,a,G);0<n&&(f.init(c+n),D=1===k?f.sweepBipartite(k,d,0,c,r,u,0,n,a,G):b(k,d,g,c,r,u,n,a,G),e.free(a),e.free(G))}e.free(r);e.free(u)}return D}}}function h(a,b){n.push([a,b])}p.exports=function(a,b,d){switch(arguments.length){case 1:return n=[],k(a,a,h,!0),n;case 2:if("function"===typeof b)return k(a,a,b,!0);n=[];k(a,
b,h,!1);return n;case 3:return k(a,b,d,!1);default:throw Error("box-intersect: Invalid arguments");}};var e=a("typedarray-pool"),f=a("./lib/sweep"),b=a("./lib/intersect"),n},{"./lib/intersect":88,"./lib/sweep":92,"typedarray-pool":529}],87:[function(a,p,l){function m(a){function e(e,d){var g="bruteForce"+(e?"Red":"Blue")+(d?"Flip":"")+(a?"Full":""),c=["function ",g,"(",k.join(),"){","var ","es","\x3d2*","d",";"],f="for(var j\x3dbs,bp\x3des*bs;j\x3cbe;++j,bp+\x3des){var y0\x3dbb[ax+bp],"+(a?"y1\x3dbb[ax+bp+d],":
"")+"yi\x3dbi[j];";e?c.push("for(var i\x3drs,rp\x3des*rs;i\x3cre;++i,rp+\x3des){var x0\x3drb[ax+rp],x1\x3drb[ax+rp+d],xi\x3dri[i];","Q",":",f):c.push(f,"Q",":","for(var i\x3drs,rp\x3des*rs;i\x3cre;++i,rp+\x3des){var x0\x3drb[ax+rp],x1\x3drb[ax+rp+d],xi\x3dri[i];");a?c.push("if(y1\x3cx0||x1\x3cy0)continue;"):d?c.push("if(y0\x3c\x3dx0||x1\x3cy0)continue;"):c.push("if(y0\x3cx0||x1\x3cy0)continue;");c.push("for(var k\x3dax+1;k\x3cd;++k){var r0\x3drb[k+rp],r1\x3drb[k+d+rp],b0\x3dbb[k+bp],b1\x3dbb[k+d+bp];if(r1\x3cb0||b1\x3cr0)continue Q;}var rv\x3dvv(");
d?c.push("yi,xi"):c.push("xi,yi");c.push(");if(rv!\x3d\x3dvoid 0)return rv;}}}");e=c.join("");b.push(e);m.push("return "+g+"("+k.join()+");")}var f="bruteForce"+(a?"Full":"Partial"),b=[],h=k.slice();a||h.splice(3,0,"fp");var m=["function "+f+"("+h.join()+"){"];m.push("if(re-rs\x3ebe-bs){");a?(e(!0,!1),m.push("}else{"),e(!1,!1)):(m.push("if(fp){"),e(!0,!0),m.push("}else{"),e(!0,!1),m.push("}}else{if(fp){"),e(!1,!0),m.push("}else{"),e(!1,!1),m.push("}"));m.push("}}return "+f);f=b.join("")+m.join("");
return(new Function(f))()}var k="d ax vv rs re rb ri bs be bb bi".split(" ");l.partial=m(!1);l.full=m(!0)},{}],88:[function(a,p,l){function m(a,b,c,d,e,g,f,h,n){var k=D*a;A[k]=b;A[k+1]=c;A[k+2]=d;A[k+3]=e;A[k+4]=g;A[k+5]=f;a*=G;C[a]=h;C[a+1]=n}p.exports=function(a,l,p,q,M,O,I,Q,N){var L=8*h.log2(q+I+1)*(a+1)|0,J=h.nextPow2(D*L);A.length<J&&(k.free(A),A=k.mallocInt32(J));L=h.nextPow2(G*L);C<L&&(k.free(C),C=k.mallocDouble(L));L=0;J=2*a;m(L++,0,0,q,0,I,p?16:0,-Infinity,Infinity);for(p||m(L++,0,0,I,0,
q,1,-Infinity,Infinity);0<L;){--L;p=L*D;var E=A[p];I=A[p+1];var P=A[p+2],H=A[p+3],w=A[p+4];p=A[p+5];q=L*G;var x=C[q],S=C[q+1],W=p&1,fa=!!(p&16),z=M,ha=O,ea=Q;q=N;W&&(z=Q,ha=N,ea=M,q=O);if(p&2&&(P=v(a,E,I,P,z,ha,S),I>=P))continue;if(p&4&&(I=t(a,E,I,P,z,ha,x),I>=P))continue;p=P-I;var ba=w-H;if(fa){if(a*p*(p+ba)<d){var la=b.scanComplete(a,E,l,I,P,z,ha,H,w,ea,q);if(void 0!==la)return la;continue}}else if(a*Math.min(p,ba)<u){la=e(a,E,l,W,I,P,z,ha,H,w,ea,q);if(void 0!==la)return la;continue}else if(a*p*
ba<r){la=b.scanBipartite(a,E,l,W,I,P,z,ha,H,w,ea,q);if(void 0!==la)return la;continue}p=g(a,E,I,P,z,ha,x,S);if(I<p)if(a*(p-I)<u){if(la=f(a,E+1,l,I,p,z,ha,H,w,ea,q),void 0!==la)return la}else if(E===a-2){if(la=W?b.sweepBipartite(a,l,H,w,ea,q,I,p,z,ha):b.sweepBipartite(a,l,I,p,z,ha,H,w,ea,q),void 0!==la)return la}else m(L++,E+1,I,p,H,w,W,-Infinity,Infinity),m(L++,E+1,H,w,I,p,W^1,-Infinity,Infinity);if(p<P)if(I=n(a,E,H,w,ea,q),la=ea[J*I+E],ba=c(a,E,I,w,ea,q,la),ba<w&&m(L++,E,p,P,ba,w,(W|4)+(fa?16:0),
la,S),H<I&&m(L++,E,p,P,H,I,(W|2)+(fa?16:0),x,la),I+1===ba){if(fa)a:{H=a;w=l;q=q[I];W=2*H;I*=W;x=ea[I+E];S=p;p*=W;b:for(;S<P;++S,p+=W)if(fa=ha[S],fa!==q&&(ba=z[p+E],la=z[p+E+H],!(x<ba||la<x))){for(var Z=E+1;Z<H;++Z){ba=z[p+Z];la=z[p+Z+H];var pa=ea[I+Z+H];if(la<ea[I+Z]||pa<ba)continue b}fa=w(fa,q);if(void 0!==fa){la=fa;break a}}la=void 0}else a:{H=a;w=l;q=q[I];x=2*H;I*=x;S=ea[I+E];fa=p;p*=x;b:for(;fa<P;++fa,p+=x)if(ba=z[p+E],la=z[p+E+H],!(S<ba||la<S||W&&S===ba)){Z=ha[fa];for(pa=E+1;pa<H;++pa){ba=z[p+
pa];la=z[p+pa+H];var da=ea[I+pa+H];if(la<ea[I+pa]||da<ba)continue b}ba=W?w(q,Z):w(Z,q);if(void 0!==ba){la=ba;break a}}la=void 0}if(void 0!==la)return la}else if(I<ba)if(fa){if(P=y(a,E,p,P,z,ha,la),p<P)if(H=c(a,E,p,P,z,ha,la),E===a-2){if(p<H&&(la=b.sweepComplete(a,l,p,H,z,ha,I,ba,ea,q),void 0!==la)||H<P&&(la=b.sweepBipartite(a,l,H,P,z,ha,I,ba,ea,q),void 0!==la))return la}else p<H&&m(L++,E+1,p,H,I,ba,16,-Infinity,Infinity),H<P&&(m(L++,E+1,H,P,I,ba,0,-Infinity,Infinity),m(L++,E+1,I,ba,H,P,1,-Infinity,
Infinity))}else P=W?B(a,E,p,P,z,ha,la):y(a,E,p,P,z,ha,la),p<P&&(E===a-2?W?b.sweepBipartite(a,l,I,ba,ea,q,p,P,z,ha):b.sweepBipartite(a,l,p,P,z,ha,I,ba,ea,q):(m(L++,E+1,p,P,I,ba,W,-Infinity,Infinity),m(L++,E+1,I,ba,p,P,W^1,-Infinity,Infinity)))}};var k=a("typedarray-pool"),h=a("bit-twiddle");p=a("./brute");var e=p.partial,f=p.full,b=a("./sweep"),n=a("./median");a=a("./partition");var u=128,r=4194304,d=4194304,g=a("!(lo\x3e\x3dp0)\x26\x26!(p1\x3e\x3dhi)",["p0","p1"]),c=a("lo\x3d\x3d\x3dp0",["p0"]),v=
a("lo\x3cp0",["p0"]),t=a("hi\x3c\x3dp0",["p0"]),y=a("lo\x3c\x3dp0\x26\x26p0\x3c\x3dhi",["p0"]),B=a("lo\x3cp0\x26\x26p0\x3c\x3dhi",["p0"]),D=6,G=2,A=k.mallocInt32(1024),C=k.mallocDouble(1024)},{"./brute":87,"./median":89,"./partition":90,"./sweep":92,"bit-twiddle":82,"typedarray-pool":529}],89:[function(a,p,l){p.exports=function(a,e,f,b,n,u){if(b<=f+1)return f;var h=f,d=b;b=b+f>>>1;for(var g=2*a,c,v;h<d;){if(d-h<k){c=e;v=n;for(var t=u,y=2*a,B=y*(h+1)+c,D=h+1;D<d;++D,B+=y)for(var G=v[B],A=D,C=y*(D-
1);A>h&&v[C+c]>G;--A,C-=y){for(var l=C,p=C+y,q=0;q<y;++q,++l,++p){var H=v[l];v[l]=v[p];v[p]=H}l=t[A];t[A]=t[A-1];t[A-1]=l}break}B=d-h;c=Math.random()*B+h|0;v=n[g*c+e];y=Math.random()*B+h|0;t=n[g*y+e];D=Math.random()*B+h|0;B=n[g*D+e];v<=t?B>=t?(c=y,v=t):v>=B||(c=D,v=B):t>=B?(c=y,v=t):B>=v||(c=D,v=B);t=g*(d-1);y=g*c;for(B=0;B<g;++B,++t,++y)D=n[t],n[t]=n[y],n[y]=D;t=u[d-1];u[d-1]=u[c];u[c]=t;c=m(a,e,h,d-1,n,u,v);t=g*(d-1);y=g*c;for(B=0;B<g;++B,++t,++y)D=n[t],n[t]=n[y],n[y]=D;t=u[d-1];u[d-1]=u[c];u[c]=
t;if(b<c){for(d=c-1;h<d&&n[g*(d-1)+e]===v;)--d;d+=1}else if(c<b)for(h=c+1;h<d&&n[g*h+e]===v;)h+=1;else break}return m(a,e,f,b,n,u,n[g*b+e])};var m=a("./partition")("lo\x3cp0",["p0"]),k=8},{"./partition":90}],90:[function(a,p,l){p.exports=function(a,h){h="abcdef".split("").concat(h);var e=[];0<=a.indexOf("lo")&&e.push("lo\x3de[k+n]");0<=a.indexOf("hi")&&e.push("hi\x3de[k+o]");h.push(m.replace("_",e.join()).replace("$",a));return Function.apply(void 0,h)};var m="for(var j\x3d2*a,k\x3dj*c,l\x3dk,m\x3dc,n\x3db,o\x3da+b,p\x3dc;d\x3ep;++p,k+\x3dj){var _;if($)if(m\x3d\x3d\x3dp)m+\x3d1,l+\x3dj;else{for(var s\x3d0;j\x3es;++s){var t\x3de[k+s];e[k+s]\x3de[l],e[l++]\x3dt}var u\x3df[p];f[p]\x3df[m],f[m++]\x3du}}return m"},
{}],91:[function(a,p,l){function m(a,b,e){for(var c=2*(a+1),d=a+1;d<=b;++d){for(var g=e[c++],f=e[c++],h=d,n=c-2;h-- >a;){var k=e[n-2],m=e[n-1];if(k<g)break;else if(k===g&&m<f)break;e[n]=k;e[n+1]=m;n-=2}e[n]=g;e[n+1]=f}}function k(a,b,e){a*=2;b*=2;var c=e[a],d=e[a+1];e[a]=e[b];e[a+1]=e[b+1];e[b]=c;e[b+1]=d}function h(a,b,e){a*=2;b*=2;e[a]=e[b];e[a+1]=e[b+1]}function e(a,b,e,c,f){a*=2;b*=2;f[a]=f[b];f[b]=e;f[a+1]=f[b+1];f[b+1]=c}function f(a,b,e){a*=2;b*=2;var c=e[a],d=e[b];return c<d?!1:c===d?e[a+
1]>e[b+1]:!0}function b(a,b,e,c){a*=2;var d=c[a];return d<b?!0:d===b?c[a+1]<e:!1}function n(a,d,g){var c=(d-a+1)/6|0,v=a+c,t=d-c,r=a+d>>1,B=r-c,D=r+c,G=v,A=B,C=r,l=D,p=t;c=a+1;var q=d-1;if(f(G,A,g)){var H=G;G=A;A=H}f(l,p,g)&&(H=l,l=p,p=H);f(G,C,g)&&(H=G,G=C,C=H);f(A,C,g)&&(H=A,A=C,C=H);f(G,l,g)&&(H=G,G=l,l=H);f(C,l,g)&&(H=C,C=l,l=H);f(A,p,g)&&(H=A,A=p,p=H);f(A,C,g)&&(H=A,A=C,C=H);f(l,p,g)&&(H=l,l=p,p=H);H=g[2*A];A=g[2*A+1];var M=g[2*l];l=g[2*l+1];G*=2;C*=2;p*=2;v*=2;r*=2;t*=2;for(var O=0;2>O;++O){var I=
g[C+O],Q=g[p+O];g[v+O]=g[G+O];g[r+O]=I;g[t+O]=Q}h(B,a,g);h(D,d,g);for(B=c;B<=q;++B)if(b(B,H,A,g))B!==c&&k(B,c,g),++c;else if(!b(B,M,l,g))for(;;)if(b(q,M,l,g)){b(q,H,A,g)?(D=B,t=c,r=q,G=g,D*=2,t*=2,r*=2,v=G[D],C=G[D+1],G[D]=G[t],G[D+1]=G[t+1],G[t]=G[r],G[t+1]=G[r+1],G[r]=v,G[r+1]=C,++c):k(B,q,g);--q;break}else if(--q<B)break;e(a,c-1,H,A,g);e(d,q+1,M,l,g);c-2-a<=u?m(a,c-2,g):n(a,c-2,g);d-(q+2)<=u?m(q+2,d,g):n(q+2,d,g);q-c<=u?m(c,q,g):n(c,q,g)}p.exports=function(a,b){b<=4*u?m(0,b-1,a):n(0,b-1,a)};var u=
32},{}],92:[function(a,p,l){function m(a,b,c,d){d=b[d];c=a[c-1];a[d]=c;b[c]=d}p.exports={init:function(a){a=h.nextPow2(a);b.length<a&&(k.free(b),b=k.mallocInt32(a));n.length<a&&(k.free(n),n=k.mallocInt32(a));u.length<a&&(k.free(u),u=k.mallocInt32(a));r.length<a&&(k.free(r),r=k.mallocInt32(a));d.length<a&&(k.free(d),d=k.mallocInt32(a));g.length<a&&(k.free(g),g=k.mallocInt32(a));a*=8;c.length<a&&(k.free(c),c=k.mallocDouble(a))},sweepBipartite:function(a,d,g,h,k,l,A,C,p,q){var t=0,v=2*a;--a;for(var y=
v-1;g<h;++g){var B=l[g],D=v*g;c[t++]=k[D+a];c[t++]=-(B+1);c[t++]=k[D+y];c[t++]=B}for(g=A;g<C;++g)B=q[g]+f,h=v*g,c[t++]=p[h+a],c[t++]=-B,c[t++]=p[h+y],c[t++]=B;C=t>>>1;e(c,C);for(g=q=p=0;g<C;++g)if(t=c[2*g+1]|0,t>=f)t=t-f|0,m(u,r,q--,t);else if(0<=t)m(b,n,p--,t);else if(t<=-f){t=-t-f|0;for(v=0;v<p;++v)if(h=d(b[v],t),void 0!==h)return h;v=r;h=q++;u[h]=t;v[t]=h}else{t=-t-1|0;for(v=0;v<q;++v)if(h=d(t,u[v]),void 0!==h)return h;v=n;h=p++;b[h]=t;v[t]=h}},sweepComplete:function(a,f,h,k,D,l,A,C,p,q){var t=
0,v=2*a;--a;for(var y=v-1;h<k;++h){var B=l[h]+1<<1,G=v*h;c[t++]=D[G+a];c[t++]=-B;c[t++]=D[G+y];c[t++]=B}for(h=A;h<C;++h)B=q[h]+1<<1,k=v*h,c[t++]=p[k+a],c[t++]=-B|1,c[t++]=p[k+y],c[t++]=B|1;C=t>>>1;e(c,C);for(h=t=q=p=0;h<C;++h)if(v=c[2*h+1]|0,k=v&1,h<C-1&&v>>1===c[2*h+3]>>1&&(k=2,h+=1),0>v){v=-(v>>1)-1;for(D=0;D<t;++D)if(l=f(d[D],v),void 0!==l)return l;if(0!==k)for(D=0;D<p;++D)if(l=f(b[D],v),void 0!==l)return l;if(1!==k)for(D=0;D<q;++D)if(l=f(u[D],v),void 0!==l)return l;0===k?(k=n,D=p++,b[D]=v,k[v]=
D):1===k?(k=r,D=q++,u[D]=v,k[v]=D):2===k&&(k=g,D=t++,d[D]=v,k[v]=D)}else v=(v>>1)-1,0===k?m(b,n,p--,v):1===k?m(u,r,q--,v):2===k&&m(d,g,t--,v)},scanBipartite:function(a,d,g,h,k,r,u,C,l,p,q,H){var t=0,v=2*a,y=d+a,B=1,D=1;for(h?D=f:B=f;k<r;++k){var A=k+B,G=v*k;c[t++]=u[G+d];c[t++]=-A;c[t++]=u[G+y];c[t++]=A}for(k=l;k<p;++k)A=k+D,r=v*k,c[t++]=q[r+d],c[t++]=-A;p=t>>>1;e(c,p);for(k=t=0;k<p;++k)if(A=c[2*k+1]|0,0>A)if(A=-A,A>=f?(D=!h,A-=f):(D=!!h,--A),D)D=n,r=t++,b[r]=A,D[A]=r;else a:for(D=H[A],A*=v,r=q[A+
d+1],l=q[A+d+1+a],y=0;y<t;++y){G=b[y];var J=v*G;if(!(l<u[J+d+1]||u[J+d+1+a]<r)){for(var P=d+2;P<a;++P)if(q[A+P+a]<u[J+P]||u[J+P+a]<q[A+P])continue a;G=C[G];G=h?g(D,G):g(G,D);if(void 0!==G)return G}}else m(b,n,t--,A-B)},scanComplete:function(a,d,g,h,n,k,m,r,u,l,p){for(var t=0,v=2*a,y=d+a;h<n;++h){var B=h+f,D=v*h;c[t++]=k[D+d];c[t++]=-B;c[t++]=k[D+y];c[t++]=B}for(h=r;h<u;++h)B=h+1,n=v*h,c[t++]=l[n+d],c[t++]=-B;u=t>>>1;e(c,u);for(h=t=0;h<u;++h)if(n=c[2*h+1]|0,0>n)if(B=-n,B>=f)b[t++]=B-f;else a:for(--B,
n=p[B],B*=v,y=l[B+d+1],D=l[B+d+1+a],r=0;r<t;++r){var C=b[r],A=m[C];if(A===n)break;C*=v;if(!(D<k[C+d+1]||k[C+d+1+a]<y)){for(var G=d+2;G<a;++G)if(l[B+G+a]<k[C+G]||k[C+G+a]<l[B+G])continue a;A=g(A,n);if(void 0!==A)return A}}else{B=n-f;for(r=t-1;0<=r;--r)if(b[r]===B){for(G=r+1;G<t;++G)b[G-1]=b[G];break}--t}}};var k=a("typedarray-pool"),h=a("bit-twiddle"),e=a("./sort"),f=268435456,b=k.mallocInt32(1024),n=k.mallocInt32(1024),u=k.mallocInt32(1024),r=k.mallocInt32(1024),d=k.mallocInt32(1024),g=k.mallocInt32(1024),
c=k.mallocDouble(8192)},{"./sort":91,"bit-twiddle":82,"typedarray-pool":529}],93:[function(a,p,l){},{}],94:[function(a,p,l){function m(){this._events&&Object.prototype.hasOwnProperty.call(this,"_events")||(this._events=g(null),this._eventsCount=0);this._maxListeners=this._maxListeners||void 0}function k(a,b,c,d){var e;if("function"!==typeof c)throw new TypeError('"listener" argument must be a function');if(e=a._events){e.newListener&&(a.emit("newListener",b,c.listener?c.listener:c),e=a._events);var f=
e[b]}else e=a._events=g(null),a._eventsCount=0;f?("function"===typeof f?f=e[b]=d?[c,f]:[f,c]:d?f.unshift(c):f.push(c),f.warned||(c=void 0===a._maxListeners?m.defaultMaxListeners:a._maxListeners)&&0<c&&f.length>c&&(f.warned=!0,c=Error("Possible EventEmitter memory leak detected. "+f.length+' "'+String(b)+'" listeners added. Use emitter.setMaxListeners() to increase limit.'),c.name="MaxListenersExceededWarning",c.emitter=a,c.type=b,c.count=f.length,"object"===typeof console&&console.warn&&console.warn("%s: %s",
c.name,c.message))):(e[b]=c,++a._eventsCount);return a}function h(){if(!this.fired)switch(this.target.removeListener(this.type,this.wrapFn),this.fired=!0,arguments.length){case 0:return this.listener.call(this.target);case 1:return this.listener.call(this.target,arguments[0]);case 2:return this.listener.call(this.target,arguments[0],arguments[1]);case 3:return this.listener.call(this.target,arguments[0],arguments[1],arguments[2]);default:for(var a=Array(arguments.length),b=0;b<a.length;++b)a[b]=arguments[b];
this.listener.apply(this.target,a)}}function e(a,b,c){a={fired:!1,wrapFn:void 0,target:a,type:b,listener:c};b=v.call(h,a);b.listener=c;return a.wrapFn=b}function f(a,b,c){a=a._events;if(!a)return[];b=a[b];if(!b)return[];if("function"===typeof b)return c?[b.listener||b]:[b];if(c)for(c=Array(b.length),a=0;a<c.length;++a)c[a]=b[a].listener||b[a];else c=n(b,b.length);return c}function b(a){var b=this._events;if(b){a=b[a];if("function"===typeof a)return 1;if(a)return a.length}return 0}function n(a,b){for(var c=
Array(b),d=0;d<b;++d)c[d]=a[d];return c}function u(a){var b=function(){};b.prototype=a;return new b}function r(a){var b=[],c;for(c in a)Object.prototype.hasOwnProperty.call(a,c)&&b.push(c);return c}function d(a){var b=this;return function(){return b.apply(a,arguments)}}var g=Object.create||u,c=Object.keys||r,v=Function.prototype.bind||d;p.exports=m;m.EventEmitter=m;m.prototype._events=void 0;m.prototype._maxListeners=void 0;var t=10;try{a={};Object.defineProperty&&Object.defineProperty(a,"x",{value:0});
var y=0===a.x}catch(B){y=!1}y?Object.defineProperty(m,"defaultMaxListeners",{enumerable:!0,get:function(){return t},set:function(a){if("number"!==typeof a||0>a||a!==a)throw new TypeError('"defaultMaxListeners" must be a positive number');t=a}}):m.defaultMaxListeners=t;m.prototype.setMaxListeners=function(a){if("number"!==typeof a||0>a||isNaN(a))throw new TypeError('"n" argument must be a positive number');this._maxListeners=a;return this};m.prototype.getMaxListeners=function(){return void 0===this._maxListeners?
m.defaultMaxListeners:this._maxListeners};m.prototype.emit=function(a){var b,c,d;var e="error"===a;if(d=this._events)e=e&&null==d.error;else if(!e)return!1;if(e){1<arguments.length&&(b=arguments[1]);if(b instanceof Error)throw b;d=Error('Unhandled "error" event. ('+b+")");d.context=b;throw d;}b=d[a];if(!b)return!1;d="function"===typeof b;var g=arguments.length;switch(g){case 1:if(d)b.call(this);else for(d=b.length,b=n(b,d),e=0;e<d;++e)b[e].call(this);break;case 2:e=arguments[1];if(d)b.call(this,e);
else for(d=b.length,b=n(b,d),g=0;g<d;++g)b[g].call(this,e);break;case 3:e=arguments[1];g=arguments[2];if(d)b.call(this,e,g);else for(d=b.length,b=n(b,d),c=0;c<d;++c)b[c].call(this,e,g);break;case 4:e=arguments[1];g=arguments[2];c=arguments[3];if(d)b.call(this,e,g,c);else{d=b.length;b=n(b,d);for(var f=0;f<d;++f)b[f].call(this,e,g,c)}break;default:e=Array(g-1);for(c=1;c<g;c++)e[c-1]=arguments[c];if(d)b.apply(this,e);else for(d=b.length,b=n(b,d),g=0;g<d;++g)b[g].apply(this,e)}return!0};m.prototype.addListener=
function(a,b){return k(this,a,b,!1)};m.prototype.on=m.prototype.addListener;m.prototype.prependListener=function(a,b){return k(this,a,b,!0)};m.prototype.once=function(a,b){if("function"!==typeof b)throw new TypeError('"listener" argument must be a function');this.on(a,e(this,a,b));return this};m.prototype.prependOnceListener=function(a,b){if("function"!==typeof b)throw new TypeError('"listener" argument must be a function');this.prependListener(a,e(this,a,b));return this};m.prototype.removeListener=
function(a,b){var c;if("function"!==typeof b)throw new TypeError('"listener" argument must be a function');var d=this._events;if(!d)return this;var e=d[a];if(!e)return this;if(e===b||e.listener===b)0===--this._eventsCount?this._events=g(null):(delete d[a],d.removeListener&&this.emit("removeListener",a,e.listener||b));else if("function"!==typeof e){var f=-1;for(c=e.length-1;0<=c;c--)if(e[c]===b||e[c].listener===b){var h=e[c].listener;f=c;break}if(0>f)return this;if(0===f)e.shift();else{c=f+1;for(var n=
e.length;c<n;f+=1,c+=1)e[f]=e[c];e.pop()}1===e.length&&(d[a]=e[0]);d.removeListener&&this.emit("removeListener",a,h||b)}return this};m.prototype.removeAllListeners=function(a){var b=this._events;if(!b)return this;if(!b.removeListener)return 0===arguments.length?(this._events=g(null),this._eventsCount=0):b[a]&&(0===--this._eventsCount?this._events=g(null):delete b[a]),this;if(0===arguments.length){var d=c(b);for(b=0;b<d.length;++b){var e=d[b];"removeListener"!==e&&this.removeAllListeners(e)}this.removeAllListeners("removeListener");
this._events=g(null);this._eventsCount=0;return this}d=b[a];if("function"===typeof d)this.removeListener(a,d);else if(d)for(b=d.length-1;0<=b;b--)this.removeListener(a,d[b]);return this};m.prototype.listeners=function(a){return f(this,a,!0)};m.prototype.rawListeners=function(a){return f(this,a,!1)};m.listenerCount=function(a,c){return"function"===typeof a.listenerCount?a.listenerCount(c):b.call(a,c)};m.prototype.listenerCount=b;m.prototype.eventNames=function(){return 0<this._eventsCount?Reflect.ownKeys(this._events):
[]}},{}],95:[function(a,p,l){function m(a){if(a>I)throw new RangeError('The value "'+a+'" is invalid for option "size"');a=new Uint8Array(a);a.__proto__=k.prototype;return a}function k(a,b,c){if("number"===typeof a){if("string"===typeof b)throw new TypeError('The "string" argument must be of type string. Received type number');return f(a)}return h(a,b,c)}function h(a,c,d){if("string"===typeof a){var e=c;if("string"!==typeof e||""===e)e="utf8";if(!k.isEncoding(e))throw new TypeError("Unknown encoding: "+
e);c=r(a,e)|0;d=m(c);a=d.write(a,e);a!==c&&(d=d.slice(0,a));return d}if(ArrayBuffer.isView(a))return b(a);if(null==a)throw TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof a);if(H(a,ArrayBuffer)||a&&H(a.buffer,ArrayBuffer)){if(0>c||a.byteLength<c)throw new RangeError('"offset" is outside of buffer bounds');if(a.byteLength<c+(d||0))throw new RangeError('"length" is outside of buffer bounds');a=void 0===c&&void 0===d?
new Uint8Array(a):void 0===d?new Uint8Array(a,c):new Uint8Array(a,c,d);a.__proto__=k.prototype;return a}if("number"===typeof a)throw new TypeError('The "value" argument must not be of type number. Received type number');e=a.valueOf&&a.valueOf();if(null!=e&&e!==a)return k.from(e,c,d);if(e=n(a))return e;$jscomp.initSymbol();$jscomp.initSymbol();$jscomp.initSymbol();if("undefined"!==typeof Symbol&&null!=Symbol.toPrimitive&&"function"===typeof a[Symbol.toPrimitive])return $jscomp.initSymbol(),k.from(a[Symbol.toPrimitive]("string"),
c,d);throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof a);}function e(a){if("number"!==typeof a)throw new TypeError('"size" argument must be of type number');if(0>a)throw new RangeError('The value "'+a+'" is invalid for option "size"');}function f(a){e(a);return m(0>a?0:u(a)|0)}function b(a){for(var b=0>a.length?0:u(a.length)|0,c=m(b),d=0;d<b;d+=1)c[d]=a[d]&255;return c}function n(a){if(k.isBuffer(a)){var c=
u(a.length)|0,d=m(c);if(0===d.length)return d;a.copy(d,0,0,c);return d}if(void 0!==a.length)return(c="number"!==typeof a.length)||(c=a.length,c=c!==c),c?m(0):b(a);if("Buffer"===a.type&&Array.isArray(a.data))return b(a.data)}function u(a){if(a>=I)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+I.toString(16)+" bytes");return a|0}function r(a,b){if(k.isBuffer(a))return a.length;if(ArrayBuffer.isView(a)||H(a,ArrayBuffer))return a.byteLength;if("string"!==typeof a)throw new TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+
typeof a);var c=a.length,d=2<arguments.length&&!0===arguments[2];if(!d&&0===c)return 0;for(var e=!1;;)switch(b){case "ascii":case "latin1":case "binary":return c;case "utf8":case "utf-8":return q(a).length;case "ucs2":case "ucs-2":case "utf16le":case "utf-16le":return 2*c;case "hex":return c>>>1;case "base64":return M.toByteArray(C(a)).length;default:if(e)return d?-1:q(a).length;b=(""+b).toLowerCase();e=!0}}function d(a,b,c){var d=!1;if(void 0===b||0>b)b=0;if(b>this.length)return"";if(void 0===c||
c>this.length)c=this.length;if(0>=c)return"";c>>>=0;b>>>=0;if(c<=b)return"";for(a||(a="utf8");;)switch(a){case "hex":a=b;b=c;c=this.length;if(!a||0>a)a=0;if(!b||0>b||b>c)b=c;d="";for(c=a;c<b;++c)a=d,d=this[c],d=16>d?"0"+d.toString(16):d.toString(16),d=a+d;return d;case "utf8":case "utf-8":return t(this,b,c);case "ascii":a="";for(c=Math.min(this.length,c);b<c;++b)a+=String.fromCharCode(this[b]&127);return a;case "latin1":case "binary":a="";for(c=Math.min(this.length,c);b<c;++b)a+=String.fromCharCode(this[b]);
return a;case "base64":return b=0===b&&c===this.length?M.fromByteArray(this):M.fromByteArray(this.slice(b,c)),b;case "ucs2":case "ucs-2":case "utf16le":case "utf-16le":b=this.slice(b,c);c="";for(a=0;a<b.length;a+=2)c+=String.fromCharCode(b[a]+256*b[a+1]);return c;default:if(d)throw new TypeError("Unknown encoding: "+a);a=(a+"").toLowerCase();d=!0}}function g(a,b,c){var d=a[b];a[b]=a[c];a[c]=d}function c(a,b,c,d,e){if(0===a.length)return-1;"string"===typeof c?(d=c,c=0):2147483647<c?c=2147483647:-2147483648>
c&&(c=-2147483648);c=+c;c!==c&&(c=e?0:a.length-1);0>c&&(c=a.length+c);if(c>=a.length){if(e)return-1;c=a.length-1}else if(0>c)if(e)c=0;else return-1;"string"===typeof b&&(b=k.from(b,d));if(k.isBuffer(b))return 0===b.length?-1:v(a,b,c,d,e);if("number"===typeof b)return b&=255,"function"===typeof Uint8Array.prototype.indexOf?e?Uint8Array.prototype.indexOf.call(a,b,c):Uint8Array.prototype.lastIndexOf.call(a,b,c):v(a,[b],c,d,e);throw new TypeError("val must be string, number or Buffer");}function v(a,
b,c,d,e){function g(a,b){return 1===f?a[b]:a.readUInt16BE(b*f)}var f=1,h=a.length,n=b.length;if(void 0!==d&&(d=String(d).toLowerCase(),"ucs2"===d||"ucs-2"===d||"utf16le"===d||"utf-16le"===d)){if(2>a.length||2>b.length)return-1;f=2;h/=2;n/=2;c/=2}if(e)for(d=-1;c<h;c++)if(g(a,c)===g(b,-1===d?0:c-d)){if(-1===d&&(d=c),c-d+1===n)return d*f}else-1!==d&&(c-=c-d),d=-1;else for(c+n>h&&(c=h-n);0<=c;c--){h=!0;for(d=0;d<n;d++)if(g(a,c+d)!==g(b,d)){h=!1;break}if(h)return c}return-1}function t(a,b,c){c=Math.min(a.length,
c);for(var d=[];b<c;){var e=a[b],g=null,f=239<e?4:223<e?3:191<e?2:1;if(b+f<=c)switch(f){case 1:128>e&&(g=e);break;case 2:var h=a[b+1];128===(h&192)&&(e=(e&31)<<6|h&63,127<e&&(g=e));break;case 3:h=a[b+1];var n=a[b+2];128===(h&192)&&128===(n&192)&&(e=(e&15)<<12|(h&63)<<6|n&63,2047<e&&(55296>e||57343<e)&&(g=e));break;case 4:h=a[b+1];n=a[b+2];var k=a[b+3];128===(h&192)&&128===(n&192)&&128===(k&192)&&(e=(e&15)<<18|(h&63)<<12|(n&63)<<6|k&63,65535<e&&1114112>e&&(g=e))}null===g?(g=65533,f=1):65535<g&&(g-=
65536,d.push(g>>>10&1023|55296),g=56320|g&1023);d.push(g);b+=f}a=d.length;if(a<=Q)d=String.fromCharCode.apply(String,d);else{c="";for(b=0;b<a;)c+=String.fromCharCode.apply(String,d.slice(b,b+=Q));d=c}return d}function y(a,b,c){if(0!==a%1||0>a)throw new RangeError("offset is not uint");if(a+b>c)throw new RangeError("Trying to access beyond buffer length");}function B(a,b,c,d,e,g){if(!k.isBuffer(a))throw new TypeError('"buffer" argument must be a Buffer instance');if(b>e||b<g)throw new RangeError('"value" argument is out of bounds');
if(c+d>a.length)throw new RangeError("Index out of range");}function D(a,b,c,d,e,g){if(c+d>a.length)throw new RangeError("Index out of range");if(0>c)throw new RangeError("Index out of range");}function G(a,b,c,d,e){b=+b;c>>>=0;e||D(a,b,c,4,3.4028234663852886E38,-3.4028234663852886E38);O.write(a,b,c,d,23,4);return c+4}function A(a,b,c,d,e){b=+b;c>>>=0;e||D(a,b,c,8,1.7976931348623157E308,-1.7976931348623157E308);O.write(a,b,c,d,52,8);return c+8}function C(a){a=a.split("\x3d")[0];a=a.trim().replace(N,
"");if(2>a.length)return"";for(;0!==a.length%4;)a+="\x3d";return a}function q(a,b){b=b||Infinity;for(var c,d=a.length,e=null,g=[],f=0;f<d;++f){c=a.charCodeAt(f);if(55295<c&&57344>c){if(!e){if(56319<c){-1<(b-=3)&&g.push(239,191,189);continue}else if(f+1===d){-1<(b-=3)&&g.push(239,191,189);continue}e=c;continue}if(56320>c){-1<(b-=3)&&g.push(239,191,189);e=c;continue}c=(e-55296<<10|c-56320)+65536}else e&&-1<(b-=3)&&g.push(239,191,189);e=null;if(128>c){if(0>--b)break;g.push(c)}else if(2048>c){if(0>(b-=
2))break;g.push(c>>6|192,c&63|128)}else if(65536>c){if(0>(b-=3))break;g.push(c>>12|224,c>>6&63|128,c&63|128)}else if(1114112>c){if(0>(b-=4))break;g.push(c>>18|240,c>>12&63|128,c>>6&63|128,c&63|128)}else throw Error("Invalid code point");}return g}function J(a){for(var b=[],c=0;c<a.length;++c)b.push(a.charCodeAt(c)&255);return b}function E(a,b,c,d){for(var e=0;e<d&&!(e+c>=b.length||e>=a.length);++e)b[e+c]=a[e];return e}function H(a,b){return a instanceof b||null!=a&&null!=a.constructor&&null!=a.constructor.name&&
a.constructor.name===b.name}var M=a("base64-js"),O=a("ieee754");l.Buffer=k;l.SlowBuffer=function(a){+a!=a&&(a=0);return k.alloc(+a)};l.INSPECT_MAX_BYTES=50;var I=2147483647;l.kMaxLength=I;k.TYPED_ARRAY_SUPPORT=function(){try{var a=new Uint8Array(1);a.__proto__={__proto__:Uint8Array.prototype,foo:function(){return 42}};return 42===a.foo()}catch(R){return!1}}();k.TYPED_ARRAY_SUPPORT||"undefined"===typeof console||"function"!==typeof console.error||console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support.");
Object.defineProperty(k.prototype,"parent",{enumerable:!0,get:function(){if(k.isBuffer(this))return this.buffer}});Object.defineProperty(k.prototype,"offset",{enumerable:!0,get:function(){if(k.isBuffer(this))return this.byteOffset}});$jscomp.initSymbol();$jscomp.initSymbol();$jscomp.initSymbol();"undefined"!==typeof Symbol&&null!=Symbol.species&&k[Symbol.species]===k&&($jscomp.initSymbol(),Object.defineProperty(k,Symbol.species,{value:null,configurable:!0,enumerable:!1,writable:!1}));k.poolSize=8192;
k.from=function(a,b,c){return h(a,b,c)};k.prototype.__proto__=Uint8Array.prototype;k.__proto__=Uint8Array;k.alloc=function(a,b,c){e(a);a=0>=a?m(a):void 0!==b?"string"===typeof c?m(a).fill(b,c):m(a).fill(b):m(a);return a};k.allocUnsafe=function(a){return f(a)};k.allocUnsafeSlow=function(a){return f(a)};k.isBuffer=function(a){return null!=a&&!0===a._isBuffer&&a!==k.prototype};k.compare=function(a,b){H(a,Uint8Array)&&(a=k.from(a,a.offset,a.byteLength));H(b,Uint8Array)&&(b=k.from(b,b.offset,b.byteLength));
if(!k.isBuffer(a)||!k.isBuffer(b))throw new TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(a===b)return 0;for(var c=a.length,d=b.length,e=0,g=Math.min(c,d);e<g;++e)if(a[e]!==b[e]){c=a[e];d=b[e];break}return c<d?-1:d<c?1:0};k.isEncoding=function(a){switch(String(a).toLowerCase()){case "hex":case "utf8":case "utf-8":case "ascii":case "latin1":case "binary":case "base64":case "ucs2":case "ucs-2":case "utf16le":case "utf-16le":return!0;default:return!1}};k.concat=
function(a,b){if(!Array.isArray(a))throw new TypeError('"list" argument must be an Array of Buffers');if(0===a.length)return k.alloc(0);var c;if(void 0===b)for(c=b=0;c<a.length;++c)b+=a[c].length;b=k.allocUnsafe(b);var d=0;for(c=0;c<a.length;++c){var e=a[c];H(e,Uint8Array)&&(e=k.from(e));if(!k.isBuffer(e))throw new TypeError('"list" argument must be an Array of Buffers');e.copy(b,d);d+=e.length}return b};k.byteLength=r;k.prototype._isBuffer=!0;k.prototype.swap16=function(){var a=this.length;if(0!==
a%2)throw new RangeError("Buffer size must be a multiple of 16-bits");for(var b=0;b<a;b+=2)g(this,b,b+1);return this};k.prototype.swap32=function(){var a=this.length;if(0!==a%4)throw new RangeError("Buffer size must be a multiple of 32-bits");for(var b=0;b<a;b+=4)g(this,b,b+3),g(this,b+1,b+2);return this};k.prototype.swap64=function(){var a=this.length;if(0!==a%8)throw new RangeError("Buffer size must be a multiple of 64-bits");for(var b=0;b<a;b+=8)g(this,b,b+7),g(this,b+1,b+6),g(this,b+2,b+5),g(this,
b+3,b+4);return this};k.prototype.toString=function(){var a=this.length;return 0===a?"":0===arguments.length?t(this,0,a):d.apply(this,arguments)};k.prototype.toLocaleString=k.prototype.toString;k.prototype.equals=function(a){if(!k.isBuffer(a))throw new TypeError("Argument must be a Buffer");return this===a?!0:0===k.compare(this,a)};k.prototype.inspect=function(){var a=l.INSPECT_MAX_BYTES;var b=this.toString("hex",0,a).replace(/(.{2})/g,"$1 ").trim();this.length>a&&(b+=" ... ");return"\x3cBuffer "+
b+"\x3e"};k.prototype.compare=function(a,b,c,d,e){H(a,Uint8Array)&&(a=k.from(a,a.offset,a.byteLength));if(!k.isBuffer(a))throw new TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+typeof a);void 0===b&&(b=0);void 0===c&&(c=a?a.length:0);void 0===d&&(d=0);void 0===e&&(e=this.length);if(0>b||c>a.length||0>d||e>this.length)throw new RangeError("out of range index");if(d>=e&&b>=c)return 0;if(d>=e)return-1;if(b>=c)return 1;b>>>=0;c>>>=0;d>>>=0;e>>>=0;if(this===
a)return 0;var g=e-d,f=c-b,h=Math.min(g,f);d=this.slice(d,e);a=a.slice(b,c);for(b=0;b<h;++b)if(d[b]!==a[b]){g=d[b];f=a[b];break}return g<f?-1:f<g?1:0};k.prototype.includes=function(a,b,c){return-1!==this.indexOf(a,b,c)};k.prototype.indexOf=function(a,b,d){return c(this,a,b,d,!0)};k.prototype.lastIndexOf=function(a,b,d){return c(this,a,b,d,!1)};k.prototype.write=function(a,b,c,d){if(void 0===b)d="utf8",c=this.length,b=0;else if(void 0===c&&"string"===typeof b)d=b,c=this.length,b=0;else if(isFinite(b))b>>>=
0,isFinite(c)?(c>>>=0,void 0===d&&(d="utf8")):(d=c,c=void 0);else throw Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");var e=this.length-b;if(void 0===c||c>e)c=e;if(0<a.length&&(0>c||0>b)||b>this.length)throw new RangeError("Attempt to write outside buffer bounds");d||(d="utf8");for(e=!1;;)switch(d){case "hex":a:{b=Number(b)||0;d=this.length-b;c?(c=Number(c),c>d&&(c=d)):c=d;d=a.length;c>d/2&&(c=d/2);for(d=0;d<c;++d){e=parseInt(a.substr(2*d,2),16);if(e!==e){a=d;break a}this[b+
d]=e}a=d}return a;case "utf8":case "utf-8":return E(q(a,this.length-b),this,b,c);case "ascii":return E(J(a),this,b,c);case "latin1":case "binary":return E(J(a),this,b,c);case "base64":return E(M.toByteArray(C(a)),this,b,c);case "ucs2":case "ucs-2":case "utf16le":case "utf-16le":d=a;e=this.length-b;for(var g=[],f=0;f<d.length&&!(0>(e-=2));++f){var h=d.charCodeAt(f);a=h>>8;h%=256;g.push(h);g.push(a)}return E(g,this,b,c);default:if(e)throw new TypeError("Unknown encoding: "+d);d=(""+d).toLowerCase();
e=!0}};k.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};var Q=4096;k.prototype.slice=function(a,b){var c=this.length;a=~~a;b=void 0===b?c:~~b;0>a?(a+=c,0>a&&(a=0)):a>c&&(a=c);0>b?(b+=c,0>b&&(b=0)):b>c&&(b=c);b<a&&(b=a);a=this.subarray(a,b);a.__proto__=k.prototype;return a};k.prototype.readUIntLE=function(a,b,c){a>>>=0;b>>>=0;c||y(a,b,this.length);c=this[a];for(var d=1,e=0;++e<b&&(d*=256);)c+=this[a+e]*d;return c};k.prototype.readUIntBE=function(a,
b,c){a>>>=0;b>>>=0;c||y(a,b,this.length);c=this[a+--b];for(var d=1;0<b&&(d*=256);)c+=this[a+--b]*d;return c};k.prototype.readUInt8=function(a,b){a>>>=0;b||y(a,1,this.length);return this[a]};k.prototype.readUInt16LE=function(a,b){a>>>=0;b||y(a,2,this.length);return this[a]|this[a+1]<<8};k.prototype.readUInt16BE=function(a,b){a>>>=0;b||y(a,2,this.length);return this[a]<<8|this[a+1]};k.prototype.readUInt32LE=function(a,b){a>>>=0;b||y(a,4,this.length);return(this[a]|this[a+1]<<8|this[a+2]<<16)+16777216*
this[a+3]};k.prototype.readUInt32BE=function(a,b){a>>>=0;b||y(a,4,this.length);return 16777216*this[a]+(this[a+1]<<16|this[a+2]<<8|this[a+3])};k.prototype.readIntLE=function(a,b,c){a>>>=0;b>>>=0;c||y(a,b,this.length);c=this[a];for(var d=1,e=0;++e<b&&(d*=256);)c+=this[a+e]*d;c>=128*d&&(c-=Math.pow(2,8*b));return c};k.prototype.readIntBE=function(a,b,c){a>>>=0;b>>>=0;c||y(a,b,this.length);c=b;for(var d=1,e=this[a+--c];0<c&&(d*=256);)e+=this[a+--c]*d;e>=128*d&&(e-=Math.pow(2,8*b));return e};k.prototype.readInt8=
function(a,b){a>>>=0;b||y(a,1,this.length);return this[a]&128?-1*(255-this[a]+1):this[a]};k.prototype.readInt16LE=function(a,b){a>>>=0;b||y(a,2,this.length);a=this[a]|this[a+1]<<8;return a&32768?a|4294901760:a};k.prototype.readInt16BE=function(a,b){a>>>=0;b||y(a,2,this.length);a=this[a+1]|this[a]<<8;return a&32768?a|4294901760:a};k.prototype.readInt32LE=function(a,b){a>>>=0;b||y(a,4,this.length);return this[a]|this[a+1]<<8|this[a+2]<<16|this[a+3]<<24};k.prototype.readInt32BE=function(a,b){a>>>=0;
b||y(a,4,this.length);return this[a]<<24|this[a+1]<<16|this[a+2]<<8|this[a+3]};k.prototype.readFloatLE=function(a,b){a>>>=0;b||y(a,4,this.length);return O.read(this,a,!0,23,4)};k.prototype.readFloatBE=function(a,b){a>>>=0;b||y(a,4,this.length);return O.read(this,a,!1,23,4)};k.prototype.readDoubleLE=function(a,b){a>>>=0;b||y(a,8,this.length);return O.read(this,a,!0,52,8)};k.prototype.readDoubleBE=function(a,b){a>>>=0;b||y(a,8,this.length);return O.read(this,a,!1,52,8)};k.prototype.writeUIntLE=function(a,
b,c,d){a=+a;b>>>=0;c>>>=0;d||B(this,a,b,c,Math.pow(2,8*c)-1,0);d=1;var e=0;for(this[b]=a&255;++e<c&&(d*=256);)this[b+e]=a/d&255;return b+c};k.prototype.writeUIntBE=function(a,b,c,d){a=+a;b>>>=0;c>>>=0;d||B(this,a,b,c,Math.pow(2,8*c)-1,0);d=c-1;var e=1;for(this[b+d]=a&255;0<=--d&&(e*=256);)this[b+d]=a/e&255;return b+c};k.prototype.writeUInt8=function(a,b,c){a=+a;b>>>=0;c||B(this,a,b,1,255,0);this[b]=a&255;return b+1};k.prototype.writeUInt16LE=function(a,b,c){a=+a;b>>>=0;c||B(this,a,b,2,65535,0);this[b]=
a&255;this[b+1]=a>>>8;return b+2};k.prototype.writeUInt16BE=function(a,b,c){a=+a;b>>>=0;c||B(this,a,b,2,65535,0);this[b]=a>>>8;this[b+1]=a&255;return b+2};k.prototype.writeUInt32LE=function(a,b,c){a=+a;b>>>=0;c||B(this,a,b,4,4294967295,0);this[b+3]=a>>>24;this[b+2]=a>>>16;this[b+1]=a>>>8;this[b]=a&255;return b+4};k.prototype.writeUInt32BE=function(a,b,c){a=+a;b>>>=0;c||B(this,a,b,4,4294967295,0);this[b]=a>>>24;this[b+1]=a>>>16;this[b+2]=a>>>8;this[b+3]=a&255;return b+4};k.prototype.writeIntLE=function(a,
b,c,d){a=+a;b>>>=0;d||(d=Math.pow(2,8*c-1),B(this,a,b,c,d-1,-d));d=0;var e=1,g=0;for(this[b]=a&255;++d<c&&(e*=256);)0>a&&0===g&&0!==this[b+d-1]&&(g=1),this[b+d]=(a/e>>0)-g&255;return b+c};k.prototype.writeIntBE=function(a,b,c,d){a=+a;b>>>=0;d||(d=Math.pow(2,8*c-1),B(this,a,b,c,d-1,-d));d=c-1;var e=1,g=0;for(this[b+d]=a&255;0<=--d&&(e*=256);)0>a&&0===g&&0!==this[b+d+1]&&(g=1),this[b+d]=(a/e>>0)-g&255;return b+c};k.prototype.writeInt8=function(a,b,c){a=+a;b>>>=0;c||B(this,a,b,1,127,-128);0>a&&(a=255+
a+1);this[b]=a&255;return b+1};k.prototype.writeInt16LE=function(a,b,c){a=+a;b>>>=0;c||B(this,a,b,2,32767,-32768);this[b]=a&255;this[b+1]=a>>>8;return b+2};k.prototype.writeInt16BE=function(a,b,c){a=+a;b>>>=0;c||B(this,a,b,2,32767,-32768);this[b]=a>>>8;this[b+1]=a&255;return b+2};k.prototype.writeInt32LE=function(a,b,c){a=+a;b>>>=0;c||B(this,a,b,4,2147483647,-2147483648);this[b]=a&255;this[b+1]=a>>>8;this[b+2]=a>>>16;this[b+3]=a>>>24;return b+4};k.prototype.writeInt32BE=function(a,b,c){a=+a;b>>>=
0;c||B(this,a,b,4,2147483647,-2147483648);0>a&&(a=4294967295+a+1);this[b]=a>>>24;this[b+1]=a>>>16;this[b+2]=a>>>8;this[b+3]=a&255;return b+4};k.prototype.writeFloatLE=function(a,b,c){return G(this,a,b,!0,c)};k.prototype.writeFloatBE=function(a,b,c){return G(this,a,b,!1,c)};k.prototype.writeDoubleLE=function(a,b,c){return A(this,a,b,!0,c)};k.prototype.writeDoubleBE=function(a,b,c){return A(this,a,b,!1,c)};k.prototype.copy=function(a,b,c,d){if(!k.isBuffer(a))throw new TypeError("argument should be a Buffer");
c||(c=0);d||0===d||(d=this.length);b>=a.length&&(b=a.length);b||(b=0);0<d&&d<c&&(d=c);if(d===c||0===a.length||0===this.length)return 0;if(0>b)throw new RangeError("targetStart out of bounds");if(0>c||c>=this.length)throw new RangeError("Index out of range");if(0>d)throw new RangeError("sourceEnd out of bounds");d>this.length&&(d=this.length);a.length-b<d-c&&(d=a.length-b+c);var e=d-c;if(this===a&&"function"===typeof Uint8Array.prototype.copyWithin)this.copyWithin(b,c,d);else if(this===a&&c<b&&b<d)for(d=
e-1;0<=d;--d)a[d+b]=this[d+c];else Uint8Array.prototype.set.call(a,this.subarray(c,d),b);return e};k.prototype.fill=function(a,b,c,d){if("string"===typeof a){"string"===typeof b?(d=b,b=0,c=this.length):"string"===typeof c&&(d=c,c=this.length);if(void 0!==d&&"string"!==typeof d)throw new TypeError("encoding must be a string");if("string"===typeof d&&!k.isEncoding(d))throw new TypeError("Unknown encoding: "+d);if(1===a.length){var e=a.charCodeAt(0);if("utf8"===d&&128>e||"latin1"===d)a=e}}else"number"===
typeof a&&(a&=255);if(0>b||this.length<b||this.length<c)throw new RangeError("Out of range index");if(c<=b)return this;b>>>=0;c=void 0===c?this.length:c>>>0;a||(a=0);if("number"===typeof a)for(d=b;d<c;++d)this[d]=a;else{e=k.isBuffer(a)?a:k.from(a,d);var g=e.length;if(0===g)throw new TypeError('The value "'+a+'" is invalid for argument "value"');for(d=0;d<c-b;++d)this[d+b]=e[d%g]}return this};var N=/[^+/0-9A-Za-z-_]/g},{"base64-js":64,ieee754:404}],96:[function(a,p,l){function m(a){return[Math.min(a[0],
a[1]),Math.max(a[0],a[1])]}function k(a,b){return a[0]-b[0]||a[1]-b[1]}function h(a,b,d){return b in a?a[b]:d}var e=a("./lib/monotone"),f=a("./lib/triangulation"),b=a("./lib/delaunay"),n=a("./lib/filter");p.exports=function(a,r,d){Array.isArray(r)?(d=d||{},r=r||[]):(d=r||{},r=[]);var g=!!h(d,"delaunay",!0),c=!!h(d,"interior",!0),v=!!h(d,"exterior",!0);d=!!h(d,"infinity",!1);if(!c&&!v||0===a.length)return[];var t=e(a,r);if(g||c!==v||d){r=f(a.length,r.map(m).sort(k));for(var u=0;u<t.length;++u){var B=
t[u];r.addTriangle(B[0],B[1],B[2])}g&&b(a,r);return v?c?d?n(r,0,d):r.cells():n(r,1,d):n(r,-1)}return t}},{"./lib/delaunay":97,"./lib/filter":98,"./lib/monotone":99,"./lib/triangulation":100}],97:[function(a,p,l){function m(a,e,f,b,n,m){var h=e.opposite(b,n);if(!(0>h)){if(n<b){var d=b;b=n;n=d;d=m;m=h;h=d}e.isConstraint(b,n)||0>k(a[b],a[n],a[m],a[h])&&f.push(b,n)}}var k=a("robust-in-sphere")[4];a("binary-search-bounds");p.exports=function(a,e){for(var f=[],b=a.length,h=e.stars,u=0;u<b;++u)for(var r=
h[u],d=1;d<r.length;d+=2){var g=r[d];if(!(g<u||e.isConstraint(u,g))){for(var c=r[d-1],v=-1,t=1;t<r.length;t+=2)if(r[t-1]===g){v=r[t];break}0>v||0>k(a[u],a[g],a[c],a[v])&&f.push(u,g)}}for(;0<f.length;){g=f.pop();u=f.pop();v=c=-1;r=h[u];for(b=1;b<r.length;b+=2)d=r[b-1],t=r[b],d===g?v=t:t===g&&(c=d);0>c||0>v||0<=k(a[u],a[g],a[c],a[v])||(e.flip(u,g),m(a,e,f,c,u,v),m(a,e,f,u,v,c),m(a,e,f,v,g,c),m(a,e,f,g,c,v))}}},{"binary-search-bounds":101,"robust-in-sphere":492}],98:[function(a,p,l){function m(a,f,b,
h,k,m,d){this.cells=a;this.neighbor=f;this.flags=h;this.constraint=b;this.active=k;this.next=m;this.boundary=d}function k(a,f){return a[0]-f[0]||a[1]-f[1]||a[2]-f[2]}var h=a("binary-search-bounds");p.exports=function(a,f,b){for(var e=a.cells(),h=e.length,r=0;r<h;++r){var d=e[r],g=d[0],c=d[1],v=d[2];c<v?c<g&&(d[0]=c,d[1]=v,d[2]=g):v<g&&(d[0]=v,d[1]=g,d[2]=c)}e.sort(k);var t=Array(h);for(r=0;r<t.length;++r)t[r]=0;var y=[],B=[],D=Array(3*h),l=Array(3*h),A=null;b&&(A=[]);v=new m(e,D,l,t,y,B,A);for(r=
0;r<h;++r){d=e[r];for(var C=0;3>C;++C){g=d[C];c=d[(C+1)%3];var p=D[3*r+C]=v.locate(c,g,a.opposite(c,g)),q=l[3*r+C]=a.isConstraint(g,c);0>p&&(q?B.push(r):(y.push(r),t[r]=1),b&&A.push([c,g,-1]))}}if(0===f)return b?v.cells.concat(v.boundary):v.cells;h=1;r=v.active;d=v.next;a=v.flags;e=v.cells;g=v.constraint;for(c=v.neighbor;0<r.length||0<d.length;){for(;0<r.length;)if(t=r.pop(),a[t]!==-h)for(a[t]=h,y=0;3>y;++y)B=c[3*t+y],0<=B&&0===a[B]&&(g[3*t+y]?d.push(B):(r.push(B),a[B]=h));t=d;d=r;r=t;d.length=0;
h=-h}for(r=h=0;r<e.length;++r)a[r]===f&&(e[h++]=e[r]);e.length=h;return b?e.concat(v.boundary):e};m.prototype.locate=function(){var a=[0,0,0];return function(e,b,n){var f=e,m=b,d=n;b<n?b<e&&(f=b,m=n,d=e):n<e&&(f=n,m=e,d=b);if(0>f)return-1;a[0]=f;a[1]=m;a[2]=d;return h.eq(this.cells,a,k)}}()},{"binary-search-bounds":101}],99:[function(a,p,l){function m(a,b,d,e,c){this.a=a;this.b=b;this.idx=d;this.lowerIds=e;this.upperIds=c}function k(a,b,d,e){this.a=a;this.b=b;this.type=d;this.idx=e}function h(a,b){var d=
a.a[0]-b.a[0]||a.a[1]-b.a[1]||a.type-b.type;return d||0!==a.type&&(d=n(a.a,a.b,b.b))?d:a.idx-b.idx}function e(a,b){return n(a.a,a.b,b)}function f(a,b){var d;return(d=a.a[0]<b.a[0]?n(a.a,a.b,b.a):n(b.b,b.a,a.a))?d:(d=b.b[0]<a.b[0]?n(a.a,a.b,b.b):n(b.b,b.a,a.b))||a.idx-b.idx}var b=a("binary-search-bounds"),n=a("robust-orientation")[3];p.exports=function(a,r){for(var d=a.length,g=r.length,c=[],v=0;v<d;++v)c.push(new k(a[v],null,0,v));for(v=0;v<g;++v){var t=r[v];d=a[t[0]];t=a[t[1]];d[0]<t[0]?c.push(new k(d,
t,2,v),new k(t,d,1,v)):d[0]>t[0]&&c.push(new k(t,d,2,v),new k(d,t,1,v))}c.sort(h);v=c[0].a[0]-(1+Math.abs(c[0].a[0]))*Math.pow(2,-52);r=[new m([v,1],[v,0],-1,[],[],[],[])];g=[];v=0;for(d=c.length;v<d;++v){var u=c[v];t=u.type;if(0===t){t=g;var B=r,D=a,l=u.a;u=u.idx;for(var A=b.lt(B,l,e),C=b.gt(B,l,e);A<C;++A){for(var p=B[A],q=p.lowerIds,E=q.length;1<E&&0<n(D[q[E-2]],D[q[E-1]],l);)t.push([q[E-1],q[E-2],u]),--E;q.length=E;q.push(u);p=p.upperIds;for(E=p.length;1<E&&0>n(D[p[E-2]],D[p[E-1]],l);)t.push([p[E-
2],p[E-1],u]),--E;p.length=E;p.push(u)}}else 2===t?(t=r,B=u,D=b.le(t,B,f),l=t[D],u=l.upperIds,C=u[u.length-1],l.upperIds=[C],t.splice(D+1,0,new m(B.a,B.b,B.idx,[C],u))):(t=r,B=u,D=B.a,B.a=B.b,B.b=D,B=b.eq(t,B,f),t[B-1].upperIds=t[B].upperIds,t.splice(B,1))}return g}},{"binary-search-bounds":101,"robust-orientation":494}],100:[function(a,p,l){function m(a,f){this.stars=a;this.edges=f}function k(a,f,b){for(var e=1,h=a.length;e<h;e+=2)if(a[e-1]===f&&a[e]===b){a[e-1]=a[h-2];a[e]=a[h-1];a.length=h-2;break}}
var h=a("binary-search-bounds");p.exports=function(a,f){for(var b=Array(a),e=0;e<a;++e)b[e]=[];return new m(b,f)};a=m.prototype;a.isConstraint=function(){function a(a,e){return a[0]-e[0]||a[1]-e[1]}var f=[0,0];return function(b,e){f[0]=Math.min(b,e);f[1]=Math.max(b,e);return 0<=h.eq(this.edges,f,a)}}();a.removeTriangle=function(a,f,b){var e=this.stars;k(e[a],f,b);k(e[f],b,a);k(e[b],a,f)};a.addTriangle=function(a,f,b){var e=this.stars;e[a].push(f,b);e[f].push(b,a);e[b].push(a,f)};a.opposite=function(a,
f){f=this.stars[f];for(var b=1,e=f.length;b<e;b+=2)if(f[b]===a)return f[b-1];return-1};a.flip=function(a,f){var b=this.opposite(a,f),e=this.opposite(f,a);this.removeTriangle(a,f,b);this.removeTriangle(f,a,e);this.addTriangle(a,e,b);this.addTriangle(f,b,e)};a.edges=function(){for(var a=this.stars,f=[],b=0,h=a.length;b<h;++b)for(var k=a[b],m=0,d=k.length;m<d;m+=2)f.push([k[m],k[m+1]]);return f};a.cells=function(){for(var a=this.stars,f=[],b=0,h=a.length;b<h;++b)for(var k=a[b],m=0,d=k.length;m<d;m+=
2){var g=k[m],c=k[m+1];b<Math.min(g,c)&&f.push([b,g,c])}return f}},{"binary-search-bounds":101}],101:[function(a,p,l){function m(a,e,f,b,k){a=["function ",a,"(a,l,h,",b.join(","),"){",k?"":"var i\x3d",f?"l-1":"h+1",";while(l\x3c\x3dh){var m\x3d(l+h)\x3e\x3e\x3e1,x\x3da[m]"];k?0>e.indexOf("c")?a.push(";if(x\x3d\x3d\x3dy){return m}else if(x\x3c\x3dy){"):a.push(";var p\x3dc(x,y);if(p\x3d\x3d\x3d0){return m}else if(p\x3c\x3d0){"):a.push(";if(",e,"){i\x3dm;");f?a.push("l\x3dm+1}else{h\x3dm-1}"):a.push("h\x3dm-1}else{l\x3dm+1}");
a.push("}");k?a.push("return -1};"):a.push("return i};");return a.join("")}function k(a,e,f,b){return(new Function([m("A","x"+a+"y",e,["y"],b),m("P","c(x,y)"+a+"0",e,["y","c"],b),"function dispatchBsearch",f,"(a,y,c,l,h){if(typeof(c)\x3d\x3d\x3d'function'){return P(a,(l\x3d\x3d\x3dvoid 0)?0:l|0,(h\x3d\x3d\x3dvoid 0)?a.length-1:h|0,y,c)}else{return A(a,(c\x3d\x3d\x3dvoid 0)?0:c|0,(l\x3d\x3d\x3dvoid 0)?a.length-1:l|0,y)}}return dispatchBsearch",f].join("")))()}p.exports={ge:k("\x3e\x3d",!1,"GE"),gt:k("\x3e",
!1,"GT"),lt:k("\x3c",!0,"LT"),le:k("\x3c\x3d",!0,"LE"),eq:k("-",!0,"EQ",!0)}},{}],102:[function(a,p,l){p.exports=function(a){for(var k=1,h=1;h<a.length;++h)for(var e=0;e<h;++e)if(a[h]<a[e])k=-k;else if(a[e]===a[h])return 0;return k}},{}],103:[function(a,p,l){function m(a,e){for(var b=0,f=a.length,d=0;d<f;++d)b+=a[d]*e[d];return b}function k(a){var b=a.length;if(0===b)return[];for(var h=e([a.length+1,a.length+1],1),k=e([a.length+1],1),d=h[b][b]=0;d<b;++d){for(var g=0;g<=d;++g)h[g][d]=h[d][g]=2*m(a[d],
a[g]);k[d]=m(a[d],a[d])}a=f(h,k);h=0;k=a[b+1];for(d=0;d<k.length;++d)h+=k[d];var c=Array(b);for(d=0;d<b;++d){k=a[d];var v=0;for(g=0;g<k.length;++g)v+=k[g];c[d]=v/h}return c}function h(a){if(0===a.length)return[];for(var b=a[0].length,f=e([b]),h=k(a),d=0;d<a.length;++d)for(var g=0;g<b;++g)f[g]+=a[d][g]*h[d];return f}var e=a("dup"),f=a("robust-linear-solve");h.barycenetric=k;p.exports=h},{dup:161,"robust-linear-solve":493}],104:[function(a,p,l){p.exports=function(a){for(var h=m(a),e=0,f=0;f<a.length;++f)for(var b=
a[f],k=0;k<h.length;++k)e+=Math.pow(b[k]-h[k],2);return Math.sqrt(e/a.length)};var m=a("circumcenter")},{circumcenter:103}],105:[function(a,p,l){p.exports=function(a,k,h){return k<h?a<k?k:a>h?h:a:a<h?h:a>k?k:a}},{}],106:[function(a,p,l){function m(a){a=B(a);return[G(a,-Infinity),G(a,Infinity)]}function k(a){for(var b=Array(a.length),c=0;c<a.length;++c){var d=a[c];b[c]=[G(d[0],-Infinity),G(d[1],-Infinity),G(d[0],Infinity),G(d[1],Infinity)]}return b}function h(a,b,d){var e=[];c(d,function(c,d){var g=
b[c],f=b[d];g[0]!==f[0]&&g[0]!==f[1]&&g[1]!==f[0]&&g[1]!==f[1]&&v(a[g[0]],a[g[1]],a[f[0]],a[f[1]])&&e.push([c,d])});return e}function e(a,b,d,e){var g=[];c(d,e,function(c,d){var e=b[c];if(e[0]!==d&&e[1]!==d){var f=a[d];v(a[e[0]],a[e[1]],f,f)&&g.push([c,d])}});return g}function f(a,b,c,d,e){var g,f=a.map(function(a){return[t(a[0]),t(a[1])]});for(g=0;g<c.length;++g){var h=c[g];var k=h[0];h=h[1];var n=b[k],v=b[h];if(n=A(D(a[n[0]]),D(a[n[1]]),D(a[v[0]]),D(a[v[1]])))v=a.length,a.push([B(n[0]),B(n[1])]),
f.push(n),d.push([k,v],[h,v])}d.sort(function(a,b){if(a[0]!==b[0])return a[0]-b[0];a=f[a[1]];b=f[b[1]];return y(a[0],b[0])||y(a[1],b[1])});for(g=d.length-1;0<=g;--g){h=d[g];k=h[0];n=b[k];v=n[0];c=n[1];var m=a[v],r=a[c];0>(m[0]-r[0]||m[1]-r[1])&&(m=v,v=c,c=m);n[0]=v;v=n[1]=h[1];var u;for(e&&(u=n[2]);0<g&&d[g-1][0]===k;)h=d[--g],h=h[1],e?b.push([v,h,u]):b.push([v,h]),v=h;e?b.push([v,c,u]):b.push([v,c])}return f}function b(a,b,d){d=b.length;for(var e=new g(d),f=[],h=0;h<b.length;++h){var k=b[h],n=m(k[0]);
k=m(k[1]);f.push([G(n[0],-Infinity),G(k[0],-Infinity),G(n[1],Infinity),G(k[1],Infinity)])}c(f,function(a,b){e.link(a,b)});n=!0;b=Array(d);for(h=0;h<d;++h)f=e.find(h),f!==h&&(n=!1,a[f]=[Math.min(a[h][0],a[f][0]),Math.min(a[h][1],a[f][1])]);if(n)return null;for(h=n=0;h<d;++h)f=e.find(h),f===h?(b[h]=n,a[n++]=a[h]):b[h]=-1;a.length=n;for(h=0;h<d;++h)0>b[h]&&(b[h]=b[e.find(h)]);return b}function n(a,b){return a[0]-b[0]||a[1]-b[1]}function u(a,b){var c=a[0]-b[0]||a[1]-b[1];return c?c:a[2]<b[2]?-1:a[2]>
b[2]?1:0}function r(a,b,c){if(0!==a.length){if(b)for(var d=0;d<a.length;++d){var e=a[d],g=b[e[0]],f=b[e[1]];e[0]=Math.min(g,f);e[1]=Math.max(g,f)}else for(d=0;d<a.length;++d)e=a[d],g=e[0],f=e[1],e[0]=Math.min(g,f),e[1]=Math.max(g,f);c?a.sort(u):a.sort(n);for(d=b=1;d<a.length;++d)if(e=a[d-1],g=a[d],g[0]!==e[0]||g[1]!==e[1]||c&&g[2]!==e[2])a[b++]=g;a.length=b}}function d(a,c,d){for(var g=Array(c.length),n=0;n<c.length;++n){var t=c[n],v=a[t[0]];t=a[t[1]];g[n]=[G(Math.min(v[0],t[0]),-Infinity),G(Math.min(v[1],
t[1]),-Infinity),G(Math.max(v[0],t[0]),Infinity),G(Math.max(v[1],t[1]),Infinity)]}n=h(a,c,g);v=k(a);g=e(a,c,g,v);t=f(a,c,n,g,d);a=b(a,t,v);r(c,a,d);return a?!0:0<n.length||0<g.length}p.exports=function(a,c,e){if(e){var g=c;for(var f=Array(c.length),h=0;h<c.length;++h){var n=c[h];f[h]=[n[0],n[1],e[h]]}c=f}h=c;n=!!e;f=b(a,[],k(a));r(h,f,n);for(f=!!f;d(a,c,!!e);)f=!0;if(e&&f)for(g.length=0,h=e.length=0;h<c.length;++h)n=c[h],g.push([n[0],n[1]]),e.push(n[2]);return f};var g=a("union-find"),c=a("box-intersect"),
v=a("robust-segment-intersect"),t=a("big-rat"),y=a("big-rat/cmp"),B=a("big-rat/to-float"),D=a("rat-vec"),G=a("nextafter"),A=a("./lib/rat-seg-intersect")},{"./lib/rat-seg-intersect":107,"big-rat":68,"big-rat/cmp":66,"big-rat/to-float":80,"box-intersect":86,nextafter:443,"rat-vec":478,"robust-segment-intersect":497,"union-find":530}],107:[function(a,p,l){function m(a,b){return e(k(a[0],b[1]),k(a[1],b[0]))}p.exports=function(a,d,e,c){d=b(d,a);var g=b(c,e);c=m(d,g);if(0===f(c))return null;e=b(a,e);e=
m(g,e);e=h(e,c);d=u(d,e);return n(a,d)};var k=a("big-rat/mul"),h=a("big-rat/div"),e=a("big-rat/sub"),f=a("big-rat/sign"),b=a("rat-vec/sub"),n=a("rat-vec/add"),u=a("rat-vec/muls")},{"big-rat/div":67,"big-rat/mul":77,"big-rat/sign":78,"big-rat/sub":79,"rat-vec/add":477,"rat-vec/muls":479,"rat-vec/sub":480}],108:[function(a,p,l){function m(a,e){null==e&&(e=!0);var f=a[0],b=a[1],h=a[2];a=a[3];null==a&&(a=e?1:255);e&&(f*=255,b*=255,h*=255,a*=255);f=k(f,0,255)&255;b=k(b,0,255)&255;h=k(h,0,255)&255;a=k(a,
0,255)&255;return 16777216*f+(b<<16)+(h<<8)+a}var k=a("clamp");p.exports=m;p.exports.to=m;p.exports.from=function(a,e){a=+a;var f=a>>>24,b=(a&16711680)>>>16,h=(a&65280)>>>8;a&=255;return!1===e?[f,b,h,a]:[f/255,b/255,h/255,a/255]}},{clamp:105}],109:[function(a,p,l){p.exports={aliceblue:[240,248,255],antiquewhite:[250,235,215],aqua:[0,255,255],aquamarine:[127,255,212],azure:[240,255,255],beige:[245,245,220],bisque:[255,228,196],black:[0,0,0],blanchedalmond:[255,235,205],blue:[0,0,255],blueviolet:[138,
43,226],brown:[165,42,42],burlywood:[222,184,135],cadetblue:[95,158,160],chartreuse:[127,255,0],chocolate:[210,105,30],coral:[255,127,80],cornflowerblue:[100,149,237],cornsilk:[255,248,220],crimson:[220,20,60],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],darkgoldenrod:[184,134,11],darkgray:[169,169,169],darkgreen:[0,100,0],darkgrey:[169,169,169],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,
150,122],darkseagreen:[143,188,143],darkslateblue:[72,61,139],darkslategray:[47,79,79],darkslategrey:[47,79,79],darkturquoise:[0,206,209],darkviolet:[148,0,211],deeppink:[255,20,147],deepskyblue:[0,191,255],dimgray:[105,105,105],dimgrey:[105,105,105],dodgerblue:[30,144,255],firebrick:[178,34,34],floralwhite:[255,250,240],forestgreen:[34,139,34],fuchsia:[255,0,255],gainsboro:[220,220,220],ghostwhite:[248,248,255],gold:[255,215,0],goldenrod:[218,165,32],gray:[128,128,128],green:[0,128,0],greenyellow:[173,
255,47],grey:[128,128,128],honeydew:[240,255,240],hotpink:[255,105,180],indianred:[205,92,92],indigo:[75,0,130],ivory:[255,255,240],khaki:[240,230,140],lavender:[230,230,250],lavenderblush:[255,240,245],lawngreen:[124,252,0],lemonchiffon:[255,250,205],lightblue:[173,216,230],lightcoral:[240,128,128],lightcyan:[224,255,255],lightgoldenrodyellow:[250,250,210],lightgray:[211,211,211],lightgreen:[144,238,144],lightgrey:[211,211,211],lightpink:[255,182,193],lightsalmon:[255,160,122],lightseagreen:[32,
178,170],lightskyblue:[135,206,250],lightslategray:[119,136,153],lightslategrey:[119,136,153],lightsteelblue:[176,196,222],lightyellow:[255,255,224],lime:[0,255,0],limegreen:[50,205,50],linen:[250,240,230],magenta:[255,0,255],maroon:[128,0,0],mediumaquamarine:[102,205,170],mediumblue:[0,0,205],mediumorchid:[186,85,211],mediumpurple:[147,112,219],mediumseagreen:[60,179,113],mediumslateblue:[123,104,238],mediumspringgreen:[0,250,154],mediumturquoise:[72,209,204],mediumvioletred:[199,21,133],midnightblue:[25,
25,112],mintcream:[245,255,250],mistyrose:[255,228,225],moccasin:[255,228,181],navajowhite:[255,222,173],navy:[0,0,128],oldlace:[253,245,230],olive:[128,128,0],olivedrab:[107,142,35],orange:[255,165,0],orangered:[255,69,0],orchid:[218,112,214],palegoldenrod:[238,232,170],palegreen:[152,251,152],paleturquoise:[175,238,238],palevioletred:[219,112,147],papayawhip:[255,239,213],peachpuff:[255,218,185],peru:[205,133,63],pink:[255,192,203],plum:[221,160,221],powderblue:[176,224,230],purple:[128,0,128],
rebeccapurple:[102,51,153],red:[255,0,0],rosybrown:[188,143,143],royalblue:[65,105,225],saddlebrown:[139,69,19],salmon:[250,128,114],sandybrown:[244,164,96],seagreen:[46,139,87],seashell:[255,245,238],sienna:[160,82,45],silver:[192,192,192],skyblue:[135,206,235],slateblue:[106,90,205],slategray:[112,128,144],slategrey:[112,128,144],snow:[255,250,250],springgreen:[0,255,127],steelblue:[70,130,180],tan:[210,180,140],teal:[0,128,128],thistle:[216,191,216],tomato:[255,99,71],turquoise:[64,224,208],violet:[238,
130,238],wheat:[245,222,179],white:[255,255,255],whitesmoke:[245,245,245],yellow:[255,255,0],yellowgreen:[154,205,50]}},{}],110:[function(a,p,l){var m=a("color-rgba"),k=a("clamp"),h=a("dtype");p.exports=function(a,f){"float"!==f&&f||(f="array");"uint"===f&&(f="uint8");"uint_clamped"===f&&(f="uint8_clamped");var b=new (h(f))(4);f="uint8"!==f&&"uint8_clamped"!==f;a.length&&"string"!==typeof a||(a=m(a),a[0]/=255,a[1]/=255,a[2]/=255);var e=a;e=e instanceof Uint8Array||e instanceof Uint8ClampedArray?!0:
Array.isArray(e)&&(1<e[0]||0===e[0])&&(1<e[1]||0===e[1])&&(1<e[2]||0===e[2])&&(!e[3]||1<e[3])?!0:!1;if(e)return b[0]=a[0],b[1]=a[1],b[2]=a[2],b[3]=null!=a[3]?a[3]:255,f&&(b[0]/=255,b[1]/=255,b[2]/=255,b[3]/=255),b;f?(b[0]=a[0],b[1]=a[1],b[2]=a[2],b[3]=null!=a[3]?a[3]:1):(b[0]=k(Math.floor(255*a[0]),0,255),b[1]=k(Math.floor(255*a[1]),0,255),b[2]=k(Math.floor(255*a[2]),0,255),b[3]=null==a[3]?255:k(Math.floor(255*a[3]),0,255));return b}},{clamp:105,"color-rgba":112,dtype:160}],111:[function(a,p,l){(function(m){var k=
a("color-name"),h=a("is-plain-obj"),e=a("defined");p.exports=function(a){var b,u=[],r=1;if("string"===typeof a)if(k[a]){u=k[a].slice();var d="rgb"}else if("transparent"===a)r=0,d="rgb",u=[0,0,0];else if(/^#[A-Fa-f0-9]+$/.test(a)){var g=a.slice(1),c=g.length;r=1;4>=c?(u=[parseInt(g[0]+g[0],16),parseInt(g[1]+g[1],16),parseInt(g[2]+g[2],16)],4===c&&(r=parseInt(g[3]+g[3],16)/255)):(u=[parseInt(g[0]+g[1],16),parseInt(g[2]+g[3],16),parseInt(g[4]+g[5],16)],8===c&&(r=parseInt(g[6]+g[7],16)/255));u[0]||(u[0]=
0);u[1]||(u[1]=0);u[2]||(u[2]=0);d="rgb"}else(b=/^((?:rgb|hs[lvb]|hwb|cmyk?|xy[zy]|gray|lab|lchu?v?|[ly]uv|lms)a?)\s*\(([^\)]*)\)/.exec(a))?(a=b[1],d=g=a.replace(/a$/,""),c="cmyk"===g?4:"gray"===g?1:3,u=b[2].trim().split(/\s*,\s*/).map(function(a,b){if(/%$/.test(a)){if(b===c)return parseFloat(a)/100;if("rgb"===g)return 255*parseFloat(a)/100}else if("h"===g[b]&&!/deg$/.test(a)&&void 0!==f[a])return f[a];return parseFloat(a)}),a===g&&u.push(1),r=void 0===u[c]?1:u[c],u=u.slice(0,c)):10<a.length&&/[0-9](?:\s|\/)/.test(a)&&
(u=a.match(/([0-9]+)/g).map(function(a){return parseFloat(a)}),d=a.match(/([a-z])/ig).join("").toLowerCase());else if(!isNaN(a))d="rgb",u=[a>>>16,(a&65280)>>>8,a&255];else if(h(a))b=e(a.r,a.red,a.R,null),null!==b?(d="rgb",u=[b,e(a.g,a.green,a.G),e(a.b,a.blue,a.B)]):(d="hsl",u=[e(a.h,a.hue,a.H),e(a.s,a.saturation,a.S),e(a.l,a.lightness,a.L,a.b,a.brightness)]),r=e(a.a,a.alpha,a.opacity,1),null!=a.opacity&&(r/=100);else if(Array.isArray(a)||m.ArrayBuffer&&ArrayBuffer.isView&&ArrayBuffer.isView(a))u=
[a[0],a[1],a[2]],d="rgb",r=4===a.length?a[3]:1;return{space:d,values:u,alpha:r}};var f={red:0,orange:60,yellow:120,green:180,blue:240,purple:300}}).call(this,"undefined"!==typeof x?x:"undefined"!==typeof self?self:"undefined"!==typeof window?window:{})},{"color-name":109,defined:155,"is-plain-obj":414}],112:[function(a,p,l){var m=a("color-parse"),k=a("color-space/hsl"),h=a("clamp");p.exports=function(a){var e=m(a);if(!e.space)return[];a=Array(3);a[0]=h(e.values[0],0,255);a[1]=h(e.values[1],0,255);
a[2]=h(e.values[2],0,255);"h"===e.space[0]&&(a=k.rgb(a));a.push(h(e.alpha,0,1));return a}},{clamp:105,"color-parse":111,"color-space/hsl":113}],113:[function(a,p,l){a=a("./rgb");p.exports={name:"hsl",min:[0,0,0],max:[360,100,100],channel:["hue","saturation","lightness"],alias:["HSL"],rgb:function(a){var k=a[0]/360,h=a[1]/100;a=a[2]/100;if(0===h){var e=255*a;return[e,e,e]}h=.5>a?a*(1+h):a+h-a*h;a=2*a-h;var f=[0,0,0];for(var b=0;3>b;b++)e=k+1/3*-(b-1),0>e?e++:1<e&&e--,e=1>6*e?a+6*(h-a)*e:1>2*e?h:2>
3*e?a+(h-a)*(2/3-e)*6:a,f[b]=255*e;return f}};a.hsl=function(a){var k=a[0]/255,h=a[1]/255,e=a[2]/255;a=Math.min(k,h,e);var f=Math.max(k,h,e),b=f-a,n;f===a?n=0:k===f?n=(h-e)/b:h===f?n=2+(e-k)/b:e===f&&(n=4+(k-h)/b);n=Math.min(60*n,360);0>n&&(n+=360);k=(a+f)/2;return[n,100*(f===a?0:.5>=k?b/(f+a):b/(2-f-a)),100*k]}},{"./rgb":114}],114:[function(a,p,l){p.exports={name:"rgb",min:[0,0,0],max:[255,255,255],channel:["red","green","blue"],alias:["RGB"]}},{}],115:[function(a,p,l){p.exports={jet:[{index:0,rgb:[0,
0,131]},{index:.125,rgb:[0,60,170]},{index:.375,rgb:[5,255,255]},{index:.625,rgb:[255,255,0]},{index:.875,rgb:[250,0,0]},{index:1,rgb:[128,0,0]}],hsv:[{index:0,rgb:[255,0,0]},{index:.169,rgb:[253,255,2]},{index:.173,rgb:[247,255,2]},{index:.337,rgb:[0,252,4]},{index:.341,rgb:[0,252,10]},{index:.506,rgb:[1,249,255]},{index:.671,rgb:[2,0,253]},{index:.675,rgb:[8,0,253]},{index:.839,rgb:[255,0,251]},{index:.843,rgb:[255,0,245]},{index:1,rgb:[255,0,6]}],hot:[{index:0,rgb:[0,0,0]},{index:.3,rgb:[230,0,
0]},{index:.6,rgb:[255,210,0]},{index:1,rgb:[255,255,255]}],cool:[{index:0,rgb:[0,255,255]},{index:1,rgb:[255,0,255]}],spring:[{index:0,rgb:[255,0,255]},{index:1,rgb:[255,255,0]}],summer:[{index:0,rgb:[0,128,102]},{index:1,rgb:[255,255,102]}],autumn:[{index:0,rgb:[255,0,0]},{index:1,rgb:[255,255,0]}],winter:[{index:0,rgb:[0,0,255]},{index:1,rgb:[0,255,128]}],bone:[{index:0,rgb:[0,0,0]},{index:.376,rgb:[84,84,116]},{index:.753,rgb:[169,200,200]},{index:1,rgb:[255,255,255]}],copper:[{index:0,rgb:[0,
0,0]},{index:.804,rgb:[255,160,102]},{index:1,rgb:[255,199,127]}],greys:[{index:0,rgb:[0,0,0]},{index:1,rgb:[255,255,255]}],yignbu:[{index:0,rgb:[8,29,88]},{index:.125,rgb:[37,52,148]},{index:.25,rgb:[34,94,168]},{index:.375,rgb:[29,145,192]},{index:.5,rgb:[65,182,196]},{index:.625,rgb:[127,205,187]},{index:.75,rgb:[199,233,180]},{index:.875,rgb:[237,248,217]},{index:1,rgb:[255,255,217]}],greens:[{index:0,rgb:[0,68,27]},{index:.125,rgb:[0,109,44]},{index:.25,rgb:[35,139,69]},{index:.375,rgb:[65,171,
93]},{index:.5,rgb:[116,196,118]},{index:.625,rgb:[161,217,155]},{index:.75,rgb:[199,233,192]},{index:.875,rgb:[229,245,224]},{index:1,rgb:[247,252,245]}],yiorrd:[{index:0,rgb:[128,0,38]},{index:.125,rgb:[189,0,38]},{index:.25,rgb:[227,26,28]},{index:.375,rgb:[252,78,42]},{index:.5,rgb:[253,141,60]},{index:.625,rgb:[254,178,76]},{index:.75,rgb:[254,217,118]},{index:.875,rgb:[255,237,160]},{index:1,rgb:[255,255,204]}],bluered:[{index:0,rgb:[0,0,255]},{index:1,rgb:[255,0,0]}],rdbu:[{index:0,rgb:[5,
10,172]},{index:.35,rgb:[106,137,247]},{index:.5,rgb:[190,190,190]},{index:.6,rgb:[220,170,132]},{index:.7,rgb:[230,145,90]},{index:1,rgb:[178,10,28]}],picnic:[{index:0,rgb:[0,0,255]},{index:.1,rgb:[51,153,255]},{index:.2,rgb:[102,204,255]},{index:.3,rgb:[153,204,255]},{index:.4,rgb:[204,204,255]},{index:.5,rgb:[255,255,255]},{index:.6,rgb:[255,204,255]},{index:.7,rgb:[255,153,255]},{index:.8,rgb:[255,102,204]},{index:.9,rgb:[255,102,102]},{index:1,rgb:[255,0,0]}],rainbow:[{index:0,rgb:[150,0,90]},
{index:.125,rgb:[0,0,200]},{index:.25,rgb:[0,25,255]},{index:.375,rgb:[0,152,255]},{index:.5,rgb:[44,255,150]},{index:.625,rgb:[151,255,0]},{index:.75,rgb:[255,234,0]},{index:.875,rgb:[255,111,0]},{index:1,rgb:[255,0,0]}],portland:[{index:0,rgb:[12,51,131]},{index:.25,rgb:[10,136,186]},{index:.5,rgb:[242,211,56]},{index:.75,rgb:[242,143,56]},{index:1,rgb:[217,30,30]}],blackbody:[{index:0,rgb:[0,0,0]},{index:.2,rgb:[230,0,0]},{index:.4,rgb:[230,210,0]},{index:.7,rgb:[255,255,255]},{index:1,rgb:[160,
200,255]}],earth:[{index:0,rgb:[0,0,130]},{index:.1,rgb:[0,180,180]},{index:.2,rgb:[40,210,40]},{index:.4,rgb:[230,230,50]},{index:.6,rgb:[120,70,20]},{index:1,rgb:[255,255,255]}],electric:[{index:0,rgb:[0,0,0]},{index:.15,rgb:[30,0,100]},{index:.4,rgb:[120,0,100]},{index:.6,rgb:[160,90,0]},{index:.8,rgb:[230,200,0]},{index:1,rgb:[255,250,220]}],alpha:[{index:0,rgb:[255,255,255,0]},{index:1,rgb:[255,255,255,1]}],viridis:[{index:0,rgb:[68,1,84]},{index:.13,rgb:[71,44,122]},{index:.25,rgb:[59,81,139]},
{index:.38,rgb:[44,113,142]},{index:.5,rgb:[33,144,141]},{index:.63,rgb:[39,173,129]},{index:.75,rgb:[92,200,99]},{index:.88,rgb:[170,220,50]},{index:1,rgb:[253,231,37]}],inferno:[{index:0,rgb:[0,0,4]},{index:.13,rgb:[31,12,72]},{index:.25,rgb:[85,15,109]},{index:.38,rgb:[136,34,106]},{index:.5,rgb:[186,54,85]},{index:.63,rgb:[227,89,51]},{index:.75,rgb:[249,140,10]},{index:.88,rgb:[249,201,50]},{index:1,rgb:[252,255,164]}],magma:[{index:0,rgb:[0,0,4]},{index:.13,rgb:[28,16,68]},{index:.25,rgb:[79,
18,123]},{index:.38,rgb:[129,37,129]},{index:.5,rgb:[181,54,122]},{index:.63,rgb:[229,80,100]},{index:.75,rgb:[251,135,97]},{index:.88,rgb:[254,194,135]},{index:1,rgb:[252,253,191]}],plasma:[{index:0,rgb:[13,8,135]},{index:.13,rgb:[75,3,161]},{index:.25,rgb:[125,3,168]},{index:.38,rgb:[168,34,150]},{index:.5,rgb:[203,70,121]},{index:.63,rgb:[229,107,93]},{index:.75,rgb:[248,148,65]},{index:.88,rgb:[253,195,40]},{index:1,rgb:[240,249,33]}],warm:[{index:0,rgb:[125,0,179]},{index:.13,rgb:[172,0,187]},
{index:.25,rgb:[219,0,170]},{index:.38,rgb:[255,0,130]},{index:.5,rgb:[255,63,74]},{index:.63,rgb:[255,123,0]},{index:.75,rgb:[234,176,0]},{index:.88,rgb:[190,228,0]},{index:1,rgb:[147,255,0]}],cool:[{index:0,rgb:[125,0,179]},{index:.13,rgb:[116,0,218]},{index:.25,rgb:[98,74,237]},{index:.38,rgb:[68,146,231]},{index:.5,rgb:[0,204,197]},{index:.63,rgb:[0,247,146]},{index:.75,rgb:[0,255,88]},{index:.88,rgb:[40,255,8]},{index:1,rgb:[147,255,0]}],"rainbow-soft":[{index:0,rgb:[125,0,179]},{index:.1,rgb:[199,
0,180]},{index:.2,rgb:[255,0,121]},{index:.3,rgb:[255,108,0]},{index:.4,rgb:[222,194,0]},{index:.5,rgb:[150,255,0]},{index:.6,rgb:[0,255,55]},{index:.7,rgb:[0,246,150]},{index:.8,rgb:[50,167,222]},{index:.9,rgb:[103,51,235]},{index:1,rgb:[124,0,186]}],bathymetry:[{index:0,rgb:[40,26,44]},{index:.13,rgb:[59,49,90]},{index:.25,rgb:[64,76,139]},{index:.38,rgb:[63,110,151]},{index:.5,rgb:[72,142,158]},{index:.63,rgb:[85,174,163]},{index:.75,rgb:[120,206,163]},{index:.88,rgb:[187,230,172]},{index:1,rgb:[253,
254,204]}],cdom:[{index:0,rgb:[47,15,62]},{index:.13,rgb:[87,23,86]},{index:.25,rgb:[130,28,99]},{index:.38,rgb:[171,41,96]},{index:.5,rgb:[206,67,86]},{index:.63,rgb:[230,106,84]},{index:.75,rgb:[242,149,103]},{index:.88,rgb:[249,193,135]},{index:1,rgb:[254,237,176]}],chlorophyll:[{index:0,rgb:[18,36,20]},{index:.13,rgb:[25,63,41]},{index:.25,rgb:[24,91,59]},{index:.38,rgb:[13,119,72]},{index:.5,rgb:[18,148,80]},{index:.63,rgb:[80,173,89]},{index:.75,rgb:[132,196,122]},{index:.88,rgb:[175,221,162]},
{index:1,rgb:[215,249,208]}],density:[{index:0,rgb:[54,14,36]},{index:.13,rgb:[89,23,80]},{index:.25,rgb:[110,45,132]},{index:.38,rgb:[120,77,178]},{index:.5,rgb:[120,113,213]},{index:.63,rgb:[115,151,228]},{index:.75,rgb:[134,185,227]},{index:.88,rgb:[177,214,227]},{index:1,rgb:[230,241,241]}],"freesurface-blue":[{index:0,rgb:[30,4,110]},{index:.13,rgb:[47,14,176]},{index:.25,rgb:[41,45,236]},{index:.38,rgb:[25,99,212]},{index:.5,rgb:[68,131,200]},{index:.63,rgb:[114,156,197]},{index:.75,rgb:[157,
181,203]},{index:.88,rgb:[200,208,216]},{index:1,rgb:[241,237,236]}],"freesurface-red":[{index:0,rgb:[60,9,18]},{index:.13,rgb:[100,17,27]},{index:.25,rgb:[142,20,29]},{index:.38,rgb:[177,43,27]},{index:.5,rgb:[192,87,63]},{index:.63,rgb:[205,125,105]},{index:.75,rgb:[216,162,148]},{index:.88,rgb:[227,199,193]},{index:1,rgb:[241,237,236]}],oxygen:[{index:0,rgb:[64,5,5]},{index:.13,rgb:[106,6,15]},{index:.25,rgb:[144,26,7]},{index:.38,rgb:[168,64,3]},{index:.5,rgb:[188,100,4]},{index:.63,rgb:[206,
136,11]},{index:.75,rgb:[220,174,25]},{index:.88,rgb:[231,215,44]},{index:1,rgb:[248,254,105]}],par:[{index:0,rgb:[51,20,24]},{index:.13,rgb:[90,32,35]},{index:.25,rgb:[129,44,34]},{index:.38,rgb:[159,68,25]},{index:.5,rgb:[182,99,19]},{index:.63,rgb:[199,134,22]},{index:.75,rgb:[212,171,35]},{index:.88,rgb:[221,210,54]},{index:1,rgb:[225,253,75]}],phase:[{index:0,rgb:[145,105,18]},{index:.13,rgb:[184,71,38]},{index:.25,rgb:[186,58,115]},{index:.38,rgb:[160,71,185]},{index:.5,rgb:[110,97,218]},{index:.63,
rgb:[50,123,164]},{index:.75,rgb:[31,131,110]},{index:.88,rgb:[77,129,34]},{index:1,rgb:[145,105,18]}],salinity:[{index:0,rgb:[42,24,108]},{index:.13,rgb:[33,50,162]},{index:.25,rgb:[15,90,145]},{index:.38,rgb:[40,118,137]},{index:.5,rgb:[59,146,135]},{index:.63,rgb:[79,175,126]},{index:.75,rgb:[120,203,104]},{index:.88,rgb:[193,221,100]},{index:1,rgb:[253,239,154]}],temperature:[{index:0,rgb:[4,35,51]},{index:.13,rgb:[23,51,122]},{index:.25,rgb:[85,59,157]},{index:.38,rgb:[129,79,143]},{index:.5,
rgb:[175,95,130]},{index:.63,rgb:[222,112,101]},{index:.75,rgb:[249,146,66]},{index:.88,rgb:[249,196,65]},{index:1,rgb:[232,250,91]}],turbidity:[{index:0,rgb:[34,31,27]},{index:.13,rgb:[65,50,41]},{index:.25,rgb:[98,69,52]},{index:.38,rgb:[131,89,57]},{index:.5,rgb:[161,112,59]},{index:.63,rgb:[185,140,66]},{index:.75,rgb:[202,174,88]},{index:.88,rgb:[216,209,126]},{index:1,rgb:[233,246,171]}],"velocity-blue":[{index:0,rgb:[17,32,64]},{index:.13,rgb:[35,52,116]},{index:.25,rgb:[29,81,156]},{index:.38,
rgb:[31,113,162]},{index:.5,rgb:[50,144,169]},{index:.63,rgb:[87,173,176]},{index:.75,rgb:[149,196,189]},{index:.88,rgb:[203,221,211]},{index:1,rgb:[254,251,230]}],"velocity-green":[{index:0,rgb:[23,35,19]},{index:.13,rgb:[24,64,38]},{index:.25,rgb:[11,95,45]},{index:.38,rgb:[39,123,35]},{index:.5,rgb:[95,146,12]},{index:.63,rgb:[152,165,18]},{index:.75,rgb:[201,186,69]},{index:.88,rgb:[233,216,137]},{index:1,rgb:[255,253,205]}],cubehelix:[{index:0,rgb:[0,0,0]},{index:.07,rgb:[22,5,59]},{index:.13,
rgb:[60,4,105]},{index:.2,rgb:[109,1,135]},{index:.27,rgb:[161,0,147]},{index:.33,rgb:[210,2,142]},{index:.4,rgb:[251,11,123]},{index:.47,rgb:[255,29,97]},{index:.53,rgb:[255,54,69]},{index:.6,rgb:[255,85,46]},{index:.67,rgb:[255,120,34]},{index:.73,rgb:[255,157,37]},{index:.8,rgb:[241,191,57]},{index:.87,rgb:[224,220,93]},{index:.93,rgb:[218,241,142]},{index:1,rgb:[227,253,198]}]}},{}],116:[function(a,p,l){function m(a){return[a[0]/255,a[1]/255,a[2]/255,a[3]]}function k(a){for(var b,e="#",f=0;3>
f;++f)b=a[f],b=b.toString(16),e+=("00"+b).substr(b.length);return e}function h(a){return"rgba("+a.join(",")+")"}var e=a("./colorScale"),f=a("lerp");p.exports=function(a){var b,u;a||(a={});var r=(a.nshades||72)-1;var d=a.format||"hex";(b=a.colormap)||(b="jet");if("string"===typeof b){b=b.toLowerCase();if(!e[b])throw Error(b+" not a supported colorscale");var g=e[b]}else if(Array.isArray(b))g=b.slice();else throw Error("unsupported colormap option",b);if(g.length>r+1)throw Error(b+" map requires nshades to be at least size "+
g.length);var c=Array.isArray(a.alpha)?2!==a.alpha.length?[1,1]:a.alpha.slice():"number"===typeof a.alpha?[a.alpha,a.alpha]:[1,1];a=g.map(function(a){return Math.round(a.index*r)});c[0]=Math.min(Math.max(c[0],0),1);c[1]=Math.min(Math.max(c[1],0),1);var v=g.map(function(a,b){a=g[b].index;b=g[b].rgb.slice();if(4===b.length&&0<=b[3]&&1>=b[3])return b;b[3]=c[0]+(c[1]-c[0])*a;return b});var t=[];for(u=0;u<a.length-1;++u){var y=a[u+1]-a[u];b=v[u];var B=v[u+1];for(var D=0;D<y;D++){var l=D/y;t.push([Math.round(f(b[0],
B[0],l)),Math.round(f(b[1],B[1],l)),Math.round(f(b[2],B[2],l)),f(b[3],B[3],l)])}}t.push(g[g.length-1].rgb.concat(c[1]));"hex"===d?t=t.map(k):"rgbaString"===d?t=t.map(h):"float"===d&&(t=t.map(m));return t}},{"./colorScale":115,lerp:417}],117:[function(a,p,l){function m(a,h,k){var d=e(a[0],-h[0]);a=e(a[1],-h[1]);var g=e(k[0],-h[0]);h=e(k[1],-h[1]);d=b(f(d,g),f(a,h));return 0<=d[d.length-1]}p.exports=function(a,b,e,d){var g=k(b,e,d);if(0===g){g=h(k(a,b,e));var c=h(k(a,b,d));return g===c?0===g&&(e=m(a,
b,e),a=m(a,b,d),e!==a)?e?1:-1:0:0===c?0<g?-1:m(a,b,d)?-1:1:0===g?0<c?1:m(a,b,e)?1:-1:h(c-g)}c=k(a,b,e);return 0<c?0<g&&0<k(a,b,d)?1:-1:0>c?0<g||0<k(a,b,d)?1:-1:0<k(a,b,d)?1:m(a,b,e)?1:-1};var k=a("robust-orientation"),h=a("signum"),e=a("two-sum"),f=a("robust-product"),b=a("robust-sum")},{"robust-orientation":494,"robust-product":495,"robust-sum":499,signum:500,"two-sum":528}],118:[function(a,p,l){function m(a,e){return a-e}p.exports=function(a,e){var f=a.length,b=a.length-e.length;if(b)return b;switch(f){case 0:return 0;
case 1:return a[0]-e[0];case 2:return a[0]+a[1]-e[0]-e[1]||k(a[0],a[1])-k(e[0],e[1]);case 3:f=a[0]+a[1];var h=e[0]+e[1];if(b=f+a[2]-(h+e[2]))return b;b=k(a[0],a[1]);var u=k(e[0],e[1]);return k(b,a[2])-k(u,e[2])||k(b+a[2],f)-k(u+e[2],h);case 4:b=a[0];f=a[1];h=a[2];a=a[3];u=e[0];var r=e[1],d=e[2];e=e[3];return b+f+h+a-(u+r+d+e)||k(b,f,h,a)-k(u,r,d,e,u)||k(b+f,b+h,b+a,f+h,f+a,h+a)-k(u+r,u+d,u+e,r+d,r+e,d+e)||k(b+f+h,b+f+a,b+h+a,f+h+a)-k(u+r+d,u+r+e,u+d+e,r+d+e);default:a=a.slice().sort(m);e=e.slice().sort(m);
for(h=0;h<f;++h)if(b=a[h]-e[h])return b;return 0}};var k=Math.min},{}],119:[function(a,p,l){var m=a("compare-cell"),k=a("cell-orientation");p.exports=function(a,e){return m(a,e)||k(a)-k(e)}},{"cell-orientation":102,"compare-cell":118}],120:[function(a,p,l){var m=a("./lib/ch1d"),k=a("./lib/ch2d"),h=a("./lib/chnd");p.exports=function(a){var e=a.length;if(0===e)return[];if(1===e)return[[0]];e=a[0].length;return 0===e?[]:1===e?m(a):2===e?k(a):h(a,e)}},{"./lib/ch1d":121,"./lib/ch2d":122,"./lib/chnd":123}],
121:[function(a,p,l){p.exports=function(a){for(var k=0,h=0,e=1;e<a.length;++e)a[e][0]<a[k][0]&&(k=e),a[e][0]>a[h][0]&&(h=e);return k<h?[[k],[h]]:k>h?[[h],[k]]:[[k]]}},{}],122:[function(a,p,l){p.exports=function(a){a=m(a);var h=a.length;if(2>=h)return[];for(var e=Array(h),f=a[h-1],b=0;b<h;++b){var k=a[b];e[b]=[f,k];f=k}return e};var m=a("monotone-convex-hull-2d")},{"monotone-convex-hull-2d":426}],123:[function(a,p,l){p.exports=function(a,e){try{return m(a,!0)}catch(c){var f=k(a);if(f.length<=e)return[];
e=a.length;for(var b=Array(e),h=0;h<f.length;++h)b[h]=a[f[h]];var u=f.length;for(h=0;h<e;++h)0>f.indexOf(h)&&(b[u++]=a[h]);a=m(b,!0);e=a.length;b=f.length;for(h=0;h<e;++h){u=a[h];for(var r=0;r<u.length;++r){var d=u[r];if(d<b)u[r]=f[d];else{d-=b;for(var g=0;g<b;++g)d>=f[g]&&(d+=1);u[r]=d}}}return a}};var m=a("incremental-convex-hull"),k=a("affine-hull")},{"affine-hull":52,"incremental-convex-hull":405}],124:[function(a,p,l){p.exports={AFG:"afghan",ALA:"\\b\\wland",ALB:"albania",DZA:"algeria",ASM:"^(?\x3d.*americ).*samoa",
AND:"andorra",AGO:"angola",AIA:"anguill?a",ATA:"antarctica",ATG:"antigua",ARG:"argentin",ARM:"armenia",ABW:"^(?!.*bonaire).*\\baruba",AUS:"australia",AUT:"^(?!.*hungary).*austria|\\baustri.*\\bemp",AZE:"azerbaijan",BHS:"bahamas",BHR:"bahrain",BGD:"bangladesh|^(?\x3d.*east).*paki?stan",BRB:"barbados",BLR:"belarus|byelo",BEL:"^(?!.*luxem).*belgium",BLZ:"belize|^(?\x3d.*british).*honduras",BEN:"benin|dahome",BMU:"bermuda",BTN:"bhutan",BOL:"bolivia",BES:"^(?\x3d.*bonaire).*eustatius|^(?\x3d.*carib).*netherlands|\\bbes.?islands",
BIH:"herzegovina|bosnia",BWA:"botswana|bechuana",BVT:"bouvet",BRA:"brazil",IOT:"british.?indian.?ocean",BRN:"brunei",BGR:"bulgaria",BFA:"burkina|\\bfaso|upper.?volta",BDI:"burundi",CPV:"verde",KHM:"cambodia|kampuchea|khmer",CMR:"cameroon",CAN:"canada",CYM:"cayman",CAF:"\\bcentral.african.republic",TCD:"\\bchad",CHL:"\\bchile",CHN:"^(?!.*\\bmac)(?!.*\\bhong)(?!.*\\btai)(?!.*\\brep).*china|^(?\x3d.*peo)(?\x3d.*rep).*china",CXR:"christmas",CCK:"\\bcocos|keeling",COL:"colombia",COM:"comoro",COG:"^(?!.*\\bdem)(?!.*\\bd[\\.]?r)(?!.*kinshasa)(?!.*zaire)(?!.*belg)(?!.*l.opoldville)(?!.*free).*\\bcongo",
COK:"\\bcook",CRI:"costa.?rica",CIV:"ivoire|ivory",HRV:"croatia",CUB:"\\bcuba",CUW:"^(?!.*bonaire).*\\bcura(c|ç)ao",CYP:"cyprus",CSK:"czechoslovakia",CZE:"^(?\x3d.*rep).*czech|czechia|bohemia",COD:"\\bdem.*congo|congo.*\\bdem|congo.*\\bd[\\.]?r|\\bd[\\.]?r.*congo|belgian.?congo|congo.?free.?state|kinshasa|zaire|l.opoldville|drc|droc|rdc",DNK:"denmark",DJI:"djibouti",DMA:"dominica(?!n)",DOM:"dominican.rep",ECU:"ecuador",EGY:"egypt",SLV:"el.?salvador",GNQ:"guine.*eq|eq.*guine|^(?\x3d.*span).*guinea",
ERI:"eritrea",EST:"estonia",ETH:"ethiopia|abyssinia",FLK:"falkland|malvinas",FRO:"faroe|faeroe",FJI:"fiji",FIN:"finland",FRA:"^(?!.*\\bdep)(?!.*martinique).*france|french.?republic|\\bgaul",GUF:"^(?\x3d.*french).*guiana",PYF:"french.?polynesia|tahiti",ATF:"french.?southern",GAB:"gabon",GMB:"gambia",GEO:"^(?!.*south).*georgia",DDR:"german.?democratic.?republic|democratic.?republic.*germany|east.germany",DEU:"^(?!.*east).*germany|^(?\x3d.*\\bfed.*\\brep).*german",GHA:"ghana|gold.?coast",GIB:"gibraltar",
GRC:"greece|hellenic|hellas",GRL:"greenland",GRD:"grenada",GLP:"guadeloupe",GUM:"\\bguam",GTM:"guatemala",GGY:"guernsey",GIN:"^(?!.*eq)(?!.*span)(?!.*bissau)(?!.*portu)(?!.*new).*guinea",GNB:"bissau|^(?\x3d.*portu).*guinea",GUY:"guyana|british.?guiana",HTI:"haiti",HMD:"heard.*mcdonald",VAT:"holy.?see|vatican|papal.?st",HND:"^(?!.*brit).*honduras",HKG:"hong.?kong",HUN:"^(?!.*austr).*hungary",ISL:"iceland",IND:"india(?!.*ocea)",IDN:"indonesia",IRN:"\\biran|persia",IRQ:"\\biraq|mesopotamia",IRL:"(^ireland)|(^republic.*ireland)",
IMN:"^(?\x3d.*isle).*\\bman",ISR:"israel",ITA:"italy",JAM:"jamaica",JPN:"japan",JEY:"jersey",JOR:"jordan",KAZ:"kazak",KEN:"kenya|british.?east.?africa|east.?africa.?prot",KIR:"kiribati",PRK:"^(?\x3d.*democrat|people|north|d.*p.*.r).*\\bkorea|dprk|korea.*(d.*p.*r)",KWT:"kuwait",KGZ:"kyrgyz|kirghiz",LAO:"\\blaos?\\b",LVA:"latvia",LBN:"lebanon",LSO:"lesotho|basuto",LBR:"liberia",LBY:"libya",LIE:"liechtenstein",LTU:"lithuania",LUX:"^(?!.*belg).*luxem",MAC:"maca(o|u)",MDG:"madagascar|malagasy",MWI:"malawi|nyasa",
MYS:"malaysia",MDV:"maldive",MLI:"\\bmali\\b",MLT:"\\bmalta",MHL:"marshall",MTQ:"martinique",MRT:"mauritania",MUS:"mauritius",MYT:"\\bmayotte",MEX:"\\bmexic",FSM:"fed.*micronesia|micronesia.*fed",MCO:"monaco",MNG:"mongolia",MNE:"^(?!.*serbia).*montenegro",MSR:"montserrat",MAR:"morocco|\\bmaroc",MOZ:"mozambique",MMR:"myanmar|burma",NAM:"namibia",NRU:"nauru",NPL:"nepal",NLD:"^(?!.*\\bant)(?!.*\\bcarib).*netherlands",ANT:"^(?\x3d.*\\bant).*(nether|dutch)",NCL:"new.?caledonia",NZL:"new.?zealand",NIC:"nicaragua",
NER:"\\bniger(?!ia)",NGA:"nigeria",NIU:"niue",NFK:"norfolk",MNP:"mariana",NOR:"norway",OMN:"\\boman|trucial",PAK:"^(?!.*east).*paki?stan",PLW:"palau",PSE:"palestin|\\bgaza|west.?bank",PAN:"panama",PNG:"papua|new.?guinea",PRY:"paraguay",PER:"peru",PHL:"philippines",PCN:"pitcairn",POL:"poland",PRT:"portugal",PRI:"puerto.?rico",QAT:"qatar",KOR:"^(?!.*d.*p.*r)(?!.*democrat)(?!.*people)(?!.*north).*\\bkorea(?!.*d.*p.*r)",MDA:"moldov|b(a|e)ssarabia",REU:"r(e|é)union",ROU:"r(o|u|ou)mania",RUS:"\\brussia|soviet.?union|u\\.?s\\.?s\\.?r|socialist.?republics",
RWA:"rwanda",BLM:"barth(e|é)lemy",SHN:"helena",KNA:"kitts|\\bnevis",LCA:"\\blucia",MAF:"^(?\x3d.*collectivity).*martin|^(?\x3d.*france).*martin(?!ique)|^(?\x3d.*french).*martin(?!ique)",SPM:"miquelon",VCT:"vincent",WSM:"^(?!.*amer).*samoa",SMR:"san.?marino",STP:"\\bs(a|ã)o.?tom(e|é)",SAU:"\\bsa\\w*.?arabia",SEN:"senegal",SRB:"^(?!.*monte).*serbia",SYC:"seychell",SLE:"sierra",SGP:"singapore",SXM:"^(?!.*martin)(?!.*saba).*maarten",SVK:"^(?!.*cze).*slovak",SVN:"slovenia",SLB:"solomon",SOM:"somali",ZAF:"south.africa|s\\\\..?africa",
SGS:"south.?georgia|sandwich",SSD:"\\bs\\w*.?sudan",ESP:"spain",LKA:"sri.?lanka|ceylon",SDN:"^(?!.*\\bs(?!u)).*sudan",SUR:"surinam|dutch.?guiana",SJM:"svalbard",SWZ:"swaziland",SWE:"sweden",CHE:"switz|swiss",SYR:"syria",TWN:"taiwan|taipei|formosa|^(?!.*peo)(?\x3d.*rep).*china",TJK:"tajik",THA:"thailand|\\bsiam",MKD:"macedonia|fyrom",TLS:"^(?\x3d.*leste).*timor|^(?\x3d.*east).*timor",TGO:"togo",TKL:"tokelau",TON:"tonga",TTO:"trinidad|tobago",TUN:"tunisia",TUR:"turkey",TKM:"turkmen",TCA:"turks",TUV:"tuvalu",
UGA:"uganda",UKR:"ukrain",ARE:"emirates|^u\\.?a\\.?e\\.?$|united.?arab.?em",GBR:"united.?kingdom|britain|^u\\.?k\\.?$",TZA:"tanzania",USA:"united.?states\\b(?!.*islands)|\\bu\\.?s\\.?a\\.?\\b|^\\s*u\\.?s\\.?\\b(?!.*islands)",UMI:"minor.?outlying.?is",URY:"uruguay",UZB:"uzbek",VUT:"vanuatu|new.?hebrides",VEN:"venezuela",VNM:"^(?!.*republic).*viet.?nam|^(?\x3d.*socialist).*viet.?nam",VGB:"^(?\x3d.*\\bu\\.?\\s?k).*virgin|^(?\x3d.*brit).*virgin|^(?\x3d.*kingdom).*virgin",VIR:"^(?\x3d.*\\bu\\.?\\s?s).*virgin|^(?\x3d.*states).*virgin",
WLF:"futuna|wallis",ESH:"western.sahara",YEM:"^(?!.*arab)(?!.*north)(?!.*sana)(?!.*peo)(?!.*dem)(?!.*south)(?!.*aden)(?!.*\\bp\\.?d\\.?r).*yemen",YMD:"^(?\x3d.*peo).*yemen|^(?!.*rep)(?\x3d.*dem).*yemen|^(?\x3d.*south).*yemen|^(?\x3d.*aden).*yemen|^(?\x3d.*\\bp\\.?d\\.?r).*yemen",YUG:"yugoslavia",ZMB:"zambia|northern.?rhodesia",EAZ:"zanzibar",ZWE:"zimbabwe|^(?!.*northern).*rhodesia"}},{}],125:[function(a,p,l){p.exports="xx-small x-small small medium large x-large xx-large larger smaller".split(" ")},
{}],126:[function(a,p,l){p.exports="normal condensed semi-condensed extra-condensed ultra-condensed expanded semi-expanded extra-expanded ultra-expanded".split(" ")},{}],127:[function(a,p,l){p.exports=["normal","italic","oblique"]},{}],128:[function(a,p,l){p.exports="normal bold bolder lighter 100 200 300 400 500 600 700 800 900".split(" ")},{}],129:[function(a,p,l){p.exports={parse:a("./parse"),stringify:a("./stringify")}},{"./parse":131,"./stringify":132}],130:[function(a,p,l){var m=a("css-font-size-keywords");
p.exports={isSize:function(a){return/^[\d\.]/.test(a)||-1!==a.indexOf("/")||-1!==m.indexOf(a)}}},{"css-font-size-keywords":125}],131:[function(a,p,l){function m(a){if("string"!==typeof a)throw Error("Font argument must be a string.");if(g[a])return g[a];if(""===a)throw Error("Cannot parse an empty string.");if(-1!==f.indexOf(a))return g[a]={system:a};for(var c={style:"normal",variant:"normal",weight:"normal",stretch:"normal",lineHeight:"normal",size:"1rem",family:["serif"]},t=r(a,/\s+/),m;m=t.shift();){if(-1!==
e.indexOf(m))return["style","variant","weight","stretch"].forEach(function(a){c[a]=m}),g[a]=c;if(-1!==n.indexOf(m))c.style=m;else if("normal"===m||"small-caps"===m)c.variant=m;else if(-1!==u.indexOf(m))c.stretch=m;else if(-1!==b.indexOf(m))c.weight=m;else{if(d(m)){var B=r(m,"/");c.size=B[0];null!=B[1]?c.lineHeight=k(B[1]):"/"===t[0]&&(t.shift(),c.lineHeight=k(t.shift()));if(!t.length)throw Error("Missing required font-family.");c.family=r(t.join(" "),/\s*,\s*/).map(h);return g[a]=c}throw Error("Unknown or unsupported font token: "+
m);}}throw Error("Missing required font-size.");}function k(a){var b=parseFloat(a);return b.toString()===a?b:a}var h=a("unquote"),e=a("css-global-keywords"),f=a("css-system-font-keywords"),b=a("css-font-weight-keywords"),n=a("css-font-style-keywords"),u=a("css-font-stretch-keywords"),r=a("string-split-by"),d=a("./lib/util").isSize;p.exports=m;var g=m.cache={}},{"./lib/util":130,"css-font-stretch-keywords":126,"css-font-style-keywords":127,"css-font-weight-keywords":128,"css-global-keywords":133,"css-system-font-keywords":134,
"string-split-by":513,unquote:532}],132:[function(a,p,l){function m(a,b){if(a&&!b[a]&&!f[a])throw Error("Unknown keyword `"+a+"`");return a}function k(a){for(var b={},c=0;c<a.length;c++)b[a[c]]=1;return b}var h=a("pick-by-alias"),e=a("./lib/util").isSize,f=k(a("css-global-keywords")),b=k(a("css-system-font-keywords")),n=k(a("css-font-weight-keywords")),u=k(a("css-font-style-keywords")),r=k(a("css-font-stretch-keywords")),d={normal:1,"small-caps":1},g={serif:1,"sans-serif":1,monospace:1,cursive:1,
fantasy:1,"system-ui":1};p.exports=function(a){a=h(a,{style:"style fontstyle fontStyle font-style slope distinction",variant:"variant font-variant fontVariant fontvariant var capitalization",weight:"weight w font-weight fontWeight fontweight",stretch:"stretch font-stretch fontStretch fontstretch width",size:"size s font-size fontSize fontsize height em emSize",lineHeight:"lh line-height lineHeight lineheight leading",family:"font family fontFamily font-family fontfamily type typeface face",system:"system reserved default global"});
if(a.system)return a.system&&m(a.system,b),a.system;m(a.style,u);m(a.variant,d);m(a.weight,n);m(a.stretch,r);null==a.size&&(a.size="1rem");"number"===typeof a.size&&(a.size+="px");if(!e)throw Error("Bad size value `"+a.size+"`");a.family||(a.family="serif");Array.isArray(a.family)&&(a.family.length||(a.family=["serif"]),a.family=a.family.map(function(a){return g[a]?a:'"'+a+'"'}).join(", "));var c=[];c.push(a.style);a.variant!==a.style&&c.push(a.variant);a.weight!==a.variant&&a.weight!==a.style&&c.push(a.weight);
a.stretch!==a.weight&&a.stretch!==a.variant&&a.stretch!==a.style&&c.push(a.stretch);c.push(a.size+(null==a.lineHeight||"normal"===a.lineHeight||"1"===a.lineHeight+""?"":"/"+a.lineHeight));c.push(a.family);return c.filter(Boolean).join(" ")}},{"./lib/util":130,"css-font-stretch-keywords":126,"css-font-style-keywords":127,"css-font-weight-keywords":128,"css-global-keywords":133,"css-system-font-keywords":134,"pick-by-alias":457}],133:[function(a,p,l){p.exports=["inherit","initial","unset"]},{}],134:[function(a,
p,l){p.exports="caption icon menu message-box small-caption status-bar".split(" ")},{}],135:[function(a,p,l){p.exports=function(a,k,h,e,f,b){var n=f-1,m=f*f,r=n*n,d=(1+2*f)*r;r*=f;f=m*(3-2*f);n*=m;if(a.length){b||(b=Array(a.length));for(m=a.length-1;0<=m;--m)b[m]=d*a[m]+r*k[m]+f*h[m]+n*e[m];return b}return d*a+r*k+f*h+n*e};p.exports.derivative=function(a,k,h,e,f,b){var n=6*f*f-6*f,m=3*f*f-4*f+1,r=-6*f*f+6*f;f=3*f*f-2*f;if(a.length){b||(b=Array(a.length));for(var d=a.length-1;0<=d;--d)b[d]=n*a[d]+
m*k[d]+r*h[d]+f*e[d];return b}return n*a+m*k+r*h[d]+f*e}},{}],136:[function(a,p,l){function m(){this.argTypes=[];this.shimArgs=[];this.arrayArgs=[];this.arrayBlockIndices=[];this.scalarArgs=[];this.offsetArgs=[];this.offsetArgIndex=[];this.indexArgs=[];this.shapeArgs=[];this.funcName="";this.post=this.body=this.pre=null;this.debug=!1}var k=a("./lib/thunk.js");p.exports=function(a){var e=new m;e.pre=a.pre;e.body=a.body;e.post=a.post;var f=a.args.slice(0);e.argTypes=f;for(var b=0;b<f.length;++b){var h=
f[b];if("array"===h||"object"===typeof h&&h.blockIndices){e.argTypes[b]="array";e.arrayArgs.push(b);e.arrayBlockIndices.push(h.blockIndices?h.blockIndices:0);e.shimArgs.push("array"+b);if(b<e.pre.args.length&&0<e.pre.args[b].count)throw Error("cwise: pre() block may not reference array args");if(b<e.post.args.length&&0<e.post.args[b].count)throw Error("cwise: post() block may not reference array args");}else if("scalar"===h)e.scalarArgs.push(b),e.shimArgs.push("scalar"+b);else if("index"===h){e.indexArgs.push(b);
if(b<e.pre.args.length&&0<e.pre.args[b].count)throw Error("cwise: pre() block may not reference array index");if(b<e.body.args.length&&e.body.args[b].lvalue)throw Error("cwise: body() block may not write to array index");if(b<e.post.args.length&&0<e.post.args[b].count)throw Error("cwise: post() block may not reference array index");}else if("shape"===h){e.shapeArgs.push(b);if(b<e.pre.args.length&&e.pre.args[b].lvalue)throw Error("cwise: pre() block may not write to array shape");if(b<e.body.args.length&&
e.body.args[b].lvalue)throw Error("cwise: body() block may not write to array shape");if(b<e.post.args.length&&e.post.args[b].lvalue)throw Error("cwise: post() block may not write to array shape");}else if("object"===typeof h&&h.offset)e.argTypes[b]="offset",e.offsetArgs.push({array:h.array,offset:h.offset}),e.offsetArgIndex.push(b);else throw Error("cwise: Unknown argument type "+f[b]);}if(0>=e.arrayArgs.length)throw Error("cwise: No array arguments specified");if(e.pre.args.length>f.length)throw Error("cwise: Too many arguments in pre() block");
if(e.body.args.length>f.length)throw Error("cwise: Too many arguments in body() block");if(e.post.args.length>f.length)throw Error("cwise: Too many arguments in post() block");e.debug=!!a.printCode||!!a.debug;e.funcName=a.funcName||"cwise";e.blockSize=a.blockSize||64;return k(e)}},{"./lib/thunk.js":138}],137:[function(a,p,l){function m(a,e,f){var b=a.length,d=e.arrayArgs.length;e=0<e.indexArgs.length;var g=[],c=[],h=0,k,n;for(k=0;k<b;++k)c.push(["i",k,"\x3d0"].join(""));for(n=0;n<d;++n)for(k=0;k<
b;++k){var m=h;h=a[k];0===k?c.push(["d",n,"s",k,"\x3dt",n,"p",h].join("")):c.push(["d",n,"s",k,"\x3d(t",n,"p",h,"-s",m,"*t",n,"p",m,")"].join(""))}0<c.length&&g.push("var "+c.join(","));for(k=b-1;0<=k;--k)h=a[k],g.push(["for(i",k,"\x3d0;i",k,"\x3cs",h,";++i",k,"){"].join(""));g.push(f);for(k=0;k<b;++k){m=h;h=a[k];for(n=0;n<d;++n)g.push(["p",n,"+\x3dd",n,"s",k].join(""));e&&(0<k&&g.push(["index[",m,"]-\x3ds",m].join("")),g.push(["++index[",h,"]"].join("")));g.push("}")}return g.join("\n")}function k(a,
e,f,h){for(var b=e.length,g=f.arrayArgs.length,c=f.blockSize,k=0<f.indexArgs.length,n=[],r=0;r<g;++r)n.push(["var offset",r,"\x3dp",r].join(""));for(r=a;r<b;++r)n.push(["for(var j"+r+"\x3dSS[",e[r],"]|0;j",r,"\x3e0;){"].join("")),n.push(["if(j",r,"\x3c",c,"){"].join("")),n.push(["s",e[r],"\x3dj",r].join("")),n.push(["j",r,"\x3d0"].join("")),n.push(["}else{s",e[r],"\x3d",c].join("")),n.push(["j",r,"-\x3d",c,"}"].join("")),k&&n.push(["index[",e[r],"]\x3dj",r].join(""));for(r=0;r<g;++r){c=["offset"+
r];for(k=a;k<b;++k)c.push(["j",k,"*t",r,"p",e[k]].join(""));n.push(["p",r,"\x3d(",c.join("+"),")"].join(""))}n.push(m(e,f,h));for(r=a;r<b;++r)n.push("}");return n.join("\n")}function h(a,e,f){for(var b=a.body,d=[],g=[],c=0;c<a.args.length;++c){var h=a.args[c];if(!(0>=h.count)){var k=new RegExp(h.name,"g"),n="",m=e.arrayArgs.indexOf(c);switch(e.argTypes[c]){case "offset":var u=e.offsetArgIndex.indexOf(c);m=e.offsetArgs[u].array;n="+q"+u;case "array":n="p"+m+n;var l="l"+c;u="a"+m;if(0===e.arrayBlockIndices[m])1===
h.count?"generic"===f[m]?h.lvalue?(d.push(["var ",l,"\x3d",u,".get(",n,")"].join("")),b=b.replace(k,l),g.push([u,".set(",n,",",l,")"].join(""))):b=b.replace(k,[u,".get(",n,")"].join("")):b=b.replace(k,[u,"[",n,"]"].join("")):"generic"===f[m]?(d.push(["var ",l,"\x3d",u,".get(",n,")"].join("")),b=b.replace(k,l),h.lvalue&&g.push([u,".set(",n,",",l,")"].join(""))):(d.push(["var ",l,"\x3d",u,"[",n,"]"].join("")),b=b.replace(k,l),h.lvalue&&g.push([u,"[",n,"]\x3d",l].join("")));else{k=[h.name];h=[n];for(n=
0;n<Math.abs(e.arrayBlockIndices[m]);n++)k.push("\\s*\\[([^\\]]+)\\]"),h.push("$"+(n+1)+"*t"+m+"b"+n);k=new RegExp(k.join(""),"g");n=h.join("+");if("generic"===f[m])throw Error("cwise: Generic arrays not supported in combination with blocks!");b=b.replace(k,[u,"[",n,"]"].join(""))}break;case "scalar":b=b.replace(k,"Y"+e.scalarArgs.indexOf(c));break;case "index":b=b.replace(k,"index");break;case "shape":b=b.replace(k,"shape")}}}return[d.join("\n"),b,g.join("\n")].join("\n").trim()}function e(a){for(var b=
Array(a.length),e=!0,f=0;f<a.length;++f){var d=a[f],g=d.match(/\d+/);g=g?g[0]:"";0===d.charAt(0)?b[f]="u"+d.charAt(1)+g:b[f]=d.charAt(0)+g;0<f&&(e=e&&b[f]===b[f-1])}return e?b[0]:b.join("")}var f=a("uniq");p.exports=function(a,n){for(var b=n[1].length-Math.abs(a.arrayBlockIndices[0])|0,r=Array(a.arrayArgs.length),d=Array(a.arrayArgs.length),g=0;g<a.arrayArgs.length;++g)d[g]=n[2*g],r[g]=n[2*g+1];var c=[],v=[],t=[],y=[],B=[];for(g=0;g<a.arrayArgs.length;++g){0>a.arrayBlockIndices[g]?(t.push(0),y.push(b),
c.push(b),v.push(b+a.arrayBlockIndices[g])):(t.push(a.arrayBlockIndices[g]),y.push(a.arrayBlockIndices[g]+b),c.push(0),v.push(a.arrayBlockIndices[g]));for(var D=[],l=0;l<r[g].length;l++)t[g]<=r[g][l]&&r[g][l]<y[g]&&D.push(r[g][l]-t[g]);B.push(D)}v=["SS"];y=["'use strict'"];D=[];for(l=0;l<b;++l)D.push(["s",l,"\x3dSS[",l,"]"].join(""));for(g=0;g<a.arrayArgs.length;++g){v.push("a"+g);v.push("t"+g);v.push("p"+g);for(l=0;l<b;++l)D.push(["t",g,"p",l,"\x3dt",g,"[",t[g]+l,"]"].join(""));for(l=0;l<Math.abs(a.arrayBlockIndices[g]);++l)D.push(["t",
g,"b",l,"\x3dt",g,"[",c[g]+l,"]"].join(""))}for(g=0;g<a.scalarArgs.length;++g)v.push("Y"+g);0<a.shapeArgs.length&&D.push("shape\x3dSS.slice(0)");if(0<a.indexArgs.length){l=Array(b);for(g=0;g<b;++g)l[g]="0";D.push(["index\x3d[",l.join(","),"]"].join(""))}for(g=0;g<a.offsetArgs.length;++g){c=a.offsetArgs[g];t=[];for(l=0;l<c.offset.length;++l)0!==c.offset[l]&&(1===c.offset[l]?t.push(["t",c.array,"p",l].join("")):t.push([c.offset[l],"*t",c.array,"p",l].join("")));0===t.length?D.push("q"+g+"\x3d0"):D.push(["q",
g,"\x3d",t.join("+")].join(""))}g=f([].concat(a.pre.thisVars).concat(a.body.thisVars).concat(a.post.thisVars));D=D.concat(g);0<D.length&&y.push("var "+D.join(","));for(g=0;g<a.arrayArgs.length;++g)y.push("p"+g+"|\x3d0");3<a.pre.body.length&&y.push(h(a.pre,a,d));g=h(a.body,a,d);a:for(l=0,D=B[0].length;l<D;){for(c=1;c<B.length;++c)if(B[c][l]!==B[0][l])break a;++l}l<b?y.push(k(l,B[0],a,g)):y.push(m(B[0],a,g));3<a.post.body.length&&y.push(h(a.post,a,d));a.debug&&console.log("-----Generated cwise routine for ",
n,":\n"+y.join("\n")+"\n----------");a=[a.funcName||"unnamed","_cwise_loop_",r[0].join("s"),"m",l,e(d)].join("");return(new Function(["function ",a,"(",v.join(","),"){",y.join("\n"),"} return ",a].join("")))()}},{uniq:531}],138:[function(a,p,l){var m=a("./compile.js");p.exports=function(a){var h=["'use strict'","var CACHED\x3d{}"],e=[];h.push(["return function ",a.funcName+"_cwise_thunk","(",a.shimArgs.join(","),"){"].join(""));for(var f=[],b=[],k=[["array",a.arrayArgs[0],".shape.slice(",Math.max(0,
a.arrayBlockIndices[0]),0>a.arrayBlockIndices[0]?","+a.arrayBlockIndices[0]+")":")"].join("")],u=[],r=[],d=0;d<a.arrayArgs.length;++d){var g=a.arrayArgs[d];e.push(["t",g,"\x3darray",g,".dtype,r",g,"\x3darray",g,".order"].join(""));f.push("t"+g);f.push("r"+g);b.push("t"+g);b.push("r"+g+".join()");k.push("array"+g+".data");k.push("array"+g+".stride");k.push("array"+g+".offset|0");0<d&&(u.push("array"+a.arrayArgs[0]+".shape.length\x3d\x3d\x3darray"+g+".shape.length+"+(Math.abs(a.arrayBlockIndices[0])-
Math.abs(a.arrayBlockIndices[d]))),r.push("array"+a.arrayArgs[0]+".shape[shapeIndex+"+Math.max(0,a.arrayBlockIndices[0])+"]\x3d\x3d\x3darray"+g+".shape[shapeIndex+"+Math.max(0,a.arrayBlockIndices[d])+"]"))}1<a.arrayArgs.length&&(h.push("if (!("+u.join(" \x26\x26 ")+")) throw new Error('cwise: Arrays do not all have the same dimensionality!')"),h.push("for(var shapeIndex\x3darray"+a.arrayArgs[0]+".shape.length-"+Math.abs(a.arrayBlockIndices[0])+"; shapeIndex--\x3e0;) {"),h.push("if (!("+r.join(" \x26\x26 ")+
")) throw new Error('cwise: Arrays do not all have the same shape!')"),h.push("}"));for(d=0;d<a.scalarArgs.length;++d)k.push("scalar"+a.scalarArgs[d]);e.push(["type\x3d[",b.join(","),"].join()"].join(""));e.push("proc\x3dCACHED[type]");h.push("var "+e.join(","));h.push(["if(!proc){CACHED[type]\x3dproc\x3dcompile([",f.join(","),"])}return proc(",k.join(","),")}"].join(""));a.debug&&console.log("-----Generated thunk:\n"+h.join("\n")+"\n----------");return(new Function("compile",h.join("\n")))(m.bind(void 0,
a))}},{"./compile.js":137}],139:[function(a,p,l){p.exports=a("cwise-compiler")},{"cwise-compiler":136}],140:[function(a,p,l){var m=a("es5-ext/object/copy"),k=a("es5-ext/object/normalize-options"),h=a("es5-ext/object/valid-callable"),e=a("es5-ext/object/map"),f=a("es5-ext/object/valid-callable"),b=a("es5-ext/object/valid-value"),n=Function.prototype.bind,u=Object.defineProperty,r=Object.prototype.hasOwnProperty;var d=function(a,c,d){var e=b(c)&&f(c.value);var g=m(c);delete g.writable;delete g.value;
g.get=function(){if(!d.overwriteDefinition&&r.call(this,a))return e;c.value=n.call(e,d.resolveContext?d.resolveContext(this):this);u(this,a,c);return this[a]};return g};p.exports=function(a,b){var c=k(b);null!=c.resolveContext&&h(c.resolveContext);return e(a,function(a,b){return d(b,a,c)})}},{"es5-ext/object/copy":181,"es5-ext/object/map":190,"es5-ext/object/normalize-options":191,"es5-ext/object/valid-callable":195,"es5-ext/object/valid-value":197}],141:[function(a,p,l){var m=a("es5-ext/object/assign"),
k=a("es5-ext/object/normalize-options"),h=a("es5-ext/object/is-callable"),e=a("es5-ext/string/#/contains");(p.exports=function(a,b){var f;if(2>arguments.length||"string"!==typeof a){var h=b;b=a;a=null}else h=arguments[2];if(null==a){var r=f=!0;var d=!1}else r=e.call(a,"c"),d=e.call(a,"e"),f=e.call(a,"w");r={value:b,configurable:r,enumerable:d,writable:f};return h?m(k(h),r):r}).gs=function(a,b,n,u){"string"!==typeof a&&(u=n,n=b,b=a,a=null);null==b?b=void 0:h(b)?null==n?n=void 0:h(n)||(u=n,n=void 0):
(u=b,b=n=void 0);if(null==a){var f=!0;a=!1}else f=e.call(a,"c"),a=e.call(a,"e");b={get:b,set:n,configurable:f,enumerable:a};return u?m(k(u),b):b}},{"es5-ext/object/assign":178,"es5-ext/object/is-callable":184,"es5-ext/object/normalize-options":191,"es5-ext/string/#/contains":198}],142:[function(a,p,l){(function(a,k){"object"===typeof l&&"undefined"!==typeof p?k(l):k(a.d3=a.d3||{})})(this,function(a){function k(a,b){return a<b?-1:a>b?1:a>=b?0:NaN}function h(a){1===a.length&&(a=e(a));return{left:function(b,
c,d,e){null==d&&(d=0);null==e&&(e=b.length);for(;d<e;){var g=d+e>>>1;0>a(b[g],c)?d=g+1:e=g}return d},right:function(b,c,d,e){null==d&&(d=0);null==e&&(e=b.length);for(;d<e;){var g=d+e>>>1;0<a(b[g],c)?e=g:d=g+1}return d}}}function e(a){return function(b,c){return k(a(b),c)}}function f(a,b){return[a,b]}function b(a){return null===a?NaN:+a}function n(a,c){var d=a.length,e=0,g=-1,f=0,h,k=0;if(null==c)for(;++g<d;){if(!isNaN(h=b(a[g]))){var n=h-f;f+=n/++e;k+=n*(h-f)}}else for(;++g<d;)isNaN(h=b(c(a[g],g,
a)))||(n=h-f,f+=n/++e,k+=n*(h-f));if(1<e)return k/(e-1)}function m(a,b){return(a=n(a,b))?Math.sqrt(a):a}function r(a,b){var c=a.length,d=-1,e,g,f;if(null==b)for(;++d<c;){if(null!=(e=a[d])&&e>=e)for(g=f=e;++d<c;)null!=(e=a[d])&&(g>e&&(g=e),f<e&&(f=e))}else for(;++d<c;)if(null!=(e=b(a[d],d,a))&&e>=e)for(g=f=e;++d<c;)null!=(e=b(a[d],d,a))&&(g>e&&(g=e),f<e&&(f=e));return[g,f]}function d(a){return function(){return a}}function g(a){return a}function c(a,b,c){a=+a;b=+b;c=2>(e=arguments.length)?(b=a,a=0,
1):3>e?1:+c;for(var d=-1,e=Math.max(0,Math.ceil((b-a)/c))|0,g=Array(e);++d<e;)g[d]=a+d*c;return g}function v(a,b,c){b=(b-a)/Math.max(0,c);a=Math.floor(Math.log(b)/Math.LN10);b/=Math.pow(10,a);return 0<=a?(b>=M?10:b>=O?5:b>=I?2:1)*Math.pow(10,a):-Math.pow(10,-a)/(b>=M?10:b>=O?5:b>=I?2:1)}function t(a,b,c){var d=Math.abs(b-a)/Math.max(0,c);c=Math.pow(10,Math.floor(Math.log(d)/Math.LN10));d/=c;d>=M?c*=10:d>=O?c*=5:d>=I&&(c*=2);return b<a?-c:c}function y(a){return Math.ceil(Math.log(a.length)/Math.LN2)+
1}function B(a,c,d){null==d&&(d=b);if(e=a.length){if(0>=(c=+c)||2>e)return+d(a[0],0,a);if(1<=c)return+d(a[e-1],e-1,a);var e;c*=e-1;e=Math.floor(c);var g=+d(a[e],e,a);a=+d(a[e+1],e+1,a);return g+(a-g)*(c-e)}}function D(a,b){var c=a.length,d=-1,e,g;if(null==b)for(;++d<c;){if(null!=(e=a[d])&&e>=e)for(g=e;++d<c;)null!=(e=a[d])&&g>e&&(g=e)}else for(;++d<c;)if(null!=(e=b(a[d],d,a))&&e>=e)for(g=e;++d<c;)null!=(e=b(a[d],d,a))&&g>e&&(g=e);return g}function l(a){if(!(g=a.length))return[];for(var b=-1,c=D(a,
A),d=Array(c);++b<c;)for(var e=-1,g,f=d[b]=Array(g);++e<g;)f[e]=a[e][b];return d}function A(a){return a.length}var C=h(k),p=C.right;C=C.left;var q=Array.prototype,E=q.slice,H=q.map,M=Math.sqrt(50),O=Math.sqrt(10),I=Math.sqrt(2);a.bisect=p;a.bisectRight=p;a.bisectLeft=C;a.ascending=k;a.bisector=h;a.cross=function(a,b,c){var d=a.length,e=b.length,g=Array(d*e),h,k,n;null==c&&(c=f);for(h=n=0;h<d;++h){var t=a[h];for(k=0;k<e;++k,++n)g[n]=c(t,b[k])}return g};a.descending=function(a,b){return b<a?-1:b>a?
1:b>=a?0:NaN};a.deviation=m;a.extent=r;a.histogram=function(){function a(a){var d,g=a.length,h=Array(g);for(d=0;d<g;++d)h[d]=b(a[d],d,a);d=e(h);var k=d[0],n=d[1],v=f(h,k,n);Array.isArray(v)||(v=t(k,n,v),v=c(Math.ceil(k/v)*v,n,v));for(var m=v.length;v[0]<=k;)v.shift(),--m;for(;v[m-1]>n;)v.pop(),--m;var r=Array(m+1);for(d=0;d<=m;++d){var u=r[d]=[];u.x0=0<d?v[d-1]:k;u.x1=d<m?v[d]:n}for(d=0;d<g;++d)u=h[d],k<=u&&u<=n&&r[p(v,u,0,m)].push(a[d]);return r}var b=g,e=r,f=y;a.value=function(c){return arguments.length?
(b="function"===typeof c?c:d(c),a):b};a.domain=function(b){return arguments.length?(e="function"===typeof b?b:d([b[0],b[1]]),a):e};a.thresholds=function(b){return arguments.length?(f="function"===typeof b?b:Array.isArray(b)?d(E.call(b)):d(b),a):f};return a};a.thresholdFreedmanDiaconis=function(a,c,d){a=H.call(a,b).sort(k);return Math.ceil((d-c)/(2*(B(a,.75)-B(a,.25))*Math.pow(a.length,-1/3)))};a.thresholdScott=function(a,b,c){return Math.ceil((c-b)/(3.5*m(a)*Math.pow(a.length,-1/3)))};a.thresholdSturges=
y;a.max=function(a,b){var c=a.length,d=-1,e,g;if(null==b)for(;++d<c;){if(null!=(e=a[d])&&e>=e)for(g=e;++d<c;)null!=(e=a[d])&&e>g&&(g=e)}else for(;++d<c;)if(null!=(e=b(a[d],d,a))&&e>=e)for(g=e;++d<c;)null!=(e=b(a[d],d,a))&&e>g&&(g=e);return g};a.mean=function(a,c){var d=a.length,e=d,g=-1,f,h=0;if(null==c)for(;++g<d;)isNaN(f=b(a[g]))?--e:h+=f;else for(;++g<d;)isNaN(f=b(c(a[g],g,a)))?--e:h+=f;if(e)return h/e};a.median=function(a,c){var d=a.length,e=-1,g,f=[];if(null==c)for(;++e<d;)isNaN(g=b(a[e]))||
f.push(g);else for(;++e<d;)isNaN(g=b(c(a[e],e,a)))||f.push(g);return B(f.sort(k),.5)};a.merge=function(a){var b=a.length;var c=-1;for(var d=0,e,g;++c<b;)d+=a[c].length;for(e=Array(d);0<=--b;)for(g=a[b],c=g.length;0<=--c;)e[--d]=g[c];return e};a.min=D;a.pairs=function(a,b){null==b&&(b=f);for(var c=0,d=a.length-1,e=a[0],g=Array(0>d?0:d);c<d;)g[c]=b(e,e=a[++c]);return g};a.permute=function(a,b){for(var c=b.length,d=Array(c);c--;)d[c]=a[b[c]];return d};a.quantile=B;a.range=c;a.scan=function(a,b){if(c=
a.length){var c,d=0,e=0,g,f=a[e];for(null==b&&(b=k);++d<c;)if(0>b(g=a[d],f)||0!==b(f,f))f=g,e=d;if(0===b(f,f))return e}};a.shuffle=function(a,b,c){c=(null==c?a.length:c)-(b=null==b?0:+b);for(var d,e;c;)e=Math.random()*c--|0,d=a[c+b],a[c+b]=a[e+b],a[e+b]=d;return a};a.sum=function(a,b){var c=a.length,d=-1,e,g=0;if(null==b)for(;++d<c;){if(e=+a[d])g+=e}else for(;++d<c;)if(e=+b(a[d],d,a))g+=e;return g};a.ticks=function(a,b,c){var d,e=-1,g;b=+b;a=+a;c=+c;if(a===b&&0<c)return[a];if(d=b<a){var f=a;a=b;b=
f}if(0===(g=v(a,b,c))||!isFinite(g))return[];if(0<g)for(a=Math.ceil(a/g),b=Math.floor(b/g),b=Array(f=Math.ceil(b-a+1));++e<f;)b[e]=(a+e)*g;else for(a=Math.floor(a*g),b=Math.ceil(b*g),b=Array(f=Math.ceil(a-b+1));++e<f;)b[e]=(a-e)/g;d&&b.reverse();return b};a.tickIncrement=v;a.tickStep=t;a.transpose=l;a.variance=n;a.zip=function(){return l(arguments)};Object.defineProperty(a,"__esModule",{value:!0})})},{}],143:[function(a,p,l){(function(a,k){"object"===typeof l&&"undefined"!==typeof p?k(l):k(a.d3=a.d3||
{})})(this,function(a){function k(){}function h(a,b){var c=new k;if(a instanceof k)a.each(function(a,b){c.set(b,a)});else if(Array.isArray(a)){var d=-1,e=a.length,g;if(null==b)for(;++d<e;)c.set(d,a[d]);else for(;++d<e;)c.set(b(g=a[d],d,a),g)}else if(a)for(d in a)c.set(d,a[d]);return c}function e(){return{}}function f(a,b,d){a[b]=d}function b(){return h()}function n(a,b,d){a.set(b,d)}function m(){}function r(a,b){var c=new m;if(a instanceof m)a.each(function(a){c.add(a)});else if(a){var d=-1,e=a.length;
if(null==b)for(;++d<e;)c.add(a[d]);else for(;++d<e;)c.add(b(a[d],d,a))}return c}k.prototype=h.prototype={constructor:k,has:function(a){return"$"+a in this},get:function(a){return this["$"+a]},set:function(a,b){this["$"+a]=b;return this},remove:function(a){a="$"+a;return a in this&&delete this[a]},clear:function(){for(var a in this)"$"===a[0]&&delete this[a]},keys:function(){var a=[],b;for(b in this)"$"===b[0]&&a.push(b.slice(1));return a},values:function(){var a=[],b;for(b in this)"$"===b[0]&&a.push(this[b]);
return a},entries:function(){var a=[],b;for(b in this)"$"===b[0]&&a.push({key:b.slice(1),value:this[b]});return a},size:function(){var a=0,b;for(b in this)"$"===b[0]&&++a;return a},empty:function(){for(var a in this)if("$"===a[0])return!1;return!0},each:function(a){for(var b in this)"$"===b[0]&&a(this[b],b.slice(1),this)}};var d=h.prototype;m.prototype=r.prototype={constructor:m,has:d.has,add:function(a){a+="";this["$"+a]=a;return this},remove:d.remove,clear:d.clear,values:d.keys,size:d.size,empty:d.empty,
each:d.each};a.nest=function(){function a(b,c,e,g){if(c>=d.length)return null!=m&&b.sort(m),null!=r?r(b):b;for(var f=-1,k=b.length,n=d[c++],t,v,u=h(),y,B=e();++f<k;)(y=u.get(t=n(v=b[f])+""))?y.push(v):u.set(t,[v]);u.each(function(b,d){g(B,d,a(b,c,e,g))});return B}function c(a,b){if(++b>d.length)return a;var e=k[b-1];if(null!=r&&b>=d.length)var g=a.entries();else g=[],a.each(function(a,d){g.push({key:d,values:c(a,b)})});return null!=e?g.sort(function(a,b){return e(a.key,b.key)}):g}var d=[],k=[],m,
r,u;return u={object:function(b){return a(b,0,e,f)},map:function(c){return a(c,0,b,n)},entries:function(d){return c(a(d,0,b,n),0)},key:function(a){d.push(a);return u},sortKeys:function(a){k[d.length-1]=a;return u},sortValues:function(a){m=a;return u},rollup:function(a){r=a;return u}}};a.set=r;a.map=h;a.keys=function(a){var b=[],d;for(d in a)b.push(d);return b};a.values=function(a){var b=[],d;for(d in a)b.push(a[d]);return b};a.entries=function(a){var b=[],d;for(d in a)b.push({key:d,value:a[d]});return b};
Object.defineProperty(a,"__esModule",{value:!0})})},{}],144:[function(a,p,l){(function(a,k){"object"===typeof l&&"undefined"!==typeof p?k(l):k(a.d3=a.d3||{})})(this,function(a){function k(a,b,c){a.prototype=b.prototype=c;c.constructor=a}function h(a,b){a=Object.create(a.prototype);for(var c in b)a[c]=b[c];return a}function e(){}function f(a){var e;a=(a+"").trim().toLowerCase();return(e=L.exec(a))?(e=parseInt(e[1],16),new d(e>>8&15|e>>4&240,e>>4&15|e&240,(e&15)<<4|e&15,1)):(e=R.exec(a))?b(parseInt(e[1],
16)):(e=ca.exec(a))?new d(e[1],e[2],e[3],1):(e=w.exec(a))?new d(255*e[1]/100,255*e[2]/100,255*e[3]/100,1):(e=x.exec(a))?n(e[1],e[2],e[3],e[4]):(e=Y.exec(a))?n(255*e[1]/100,255*e[2]/100,255*e[3]/100,e[4]):(e=ia.exec(a))?c(e[1],e[2]/100,e[3]/100,1):(e=S.exec(a))?c(e[1],e[2]/100,e[3]/100,e[4]):W.hasOwnProperty(a)?b(W[a]):"transparent"===a?new d(NaN,NaN,NaN,0):null}function b(a){return new d(a>>16&255,a>>8&255,a&255,1)}function n(a,b,c,e){0>=e&&(a=b=c=NaN);return new d(a,b,c,e)}function m(a){a instanceof
e||(a=f(a));if(!a)return new d;a=a.rgb();return new d(a.r,a.g,a.b,a.opacity)}function r(a,b,c,e){return 1===arguments.length?m(a):new d(a,b,c,null==e?1:e)}function d(a,b,c,d){this.r=+a;this.g=+b;this.b=+c;this.opacity=+d}function g(a){a=Math.max(0,Math.min(255,Math.round(a)||0));return(16>a?"0":"")+a.toString(16)}function c(a,b,c,d){0>=d?a=b=c=NaN:0>=c||1<=c?a=b=NaN:0>=b&&(a=NaN);return new y(a,b,c,d)}function v(a){if(a instanceof y)return new y(a.h,a.s,a.l,a.opacity);a instanceof e||(a=f(a));if(!a)return new y;
if(a instanceof y)return a;a=a.rgb();var b=a.r/255,c=a.g/255,d=a.b/255,g=Math.min(b,c,d),h=Math.max(b,c,d),k=NaN,n=h-g,t=(h+g)/2;n?(k=b===h?(c-d)/n+6*(c<d):c===h?(d-b)/n+2:(b-c)/n+4,n/=.5>t?h+g:2-h-g,k*=60):n=0<t&&1>t?0:k;return new y(k,n,t,a.opacity)}function t(a,b,c,d){return 1===arguments.length?v(a):new y(a,b,c,null==d?1:d)}function y(a,b,c,d){this.h=+a;this.s=+b;this.l=+c;this.opacity=+d}function B(a,b,c){return 255*(60>a?b+(c-b)*a/60:180>a?c:240>a?b+(c-b)*(240-a)/60:b)}function D(a){if(a instanceof
A)return new A(a.l,a.a,a.b,a.opacity);if(a instanceof O){if(isNaN(a.h))return new A(a.l,0,0,a.opacity);var b=a.h*fa;return new A(a.l,Math.cos(b)*a.c,Math.sin(b)*a.c,a.opacity)}a instanceof d||(a=m(a));var c=E(a.r),e=E(a.g),g=E(a.b);b=C(.2225045*c+.7168786*e+.0606169*g);if(c===e&&e===g)var f=c=b;else f=C((.4360747*c+.3850649*e+.1430804*g)/.96422),c=C((.0139322*c+.0971045*e+.7141733*g)/.82521);return new A(116*b-16,500*(f-b),200*(b-c),a.opacity)}function l(a,b,c,d){return 1===arguments.length?D(a):
new A(a,b,c,null==d?1:d)}function A(a,b,c,d){this.l=+a;this.a=+b;this.b=+c;this.opacity=+d}function C(a){return a>la?Math.pow(a,1/3):a/ba+ha}function p(a){return a>ea?a*a*a:ba*(a-ha)}function q(a){return 255*(.0031308>=a?12.92*a:1.055*Math.pow(a,1/2.4)-.055)}function E(a){return.04045>=(a/=255)?a/12.92:Math.pow((a+.055)/1.055,2.4)}function H(a){if(a instanceof O)return new O(a.h,a.c,a.l,a.opacity);a instanceof A||(a=D(a));if(0===a.a&&0===a.b)return new O(NaN,0,a.l,a.opacity);var b=Math.atan2(a.b,
a.a)*z;return new O(0>b?b+360:b,Math.sqrt(a.a*a.a+a.b*a.b),a.l,a.opacity)}function M(a,b,c,d){return 1===arguments.length?H(a):new O(a,b,c,null==d?1:d)}function O(a,b,c,d){this.h=+a;this.c=+b;this.l=+c;this.opacity=+d}function I(a,b,c,e){if(1===arguments.length){var g=a;if(g instanceof Q)g=new Q(g.h,g.s,g.l,g.opacity);else{g instanceof d||(g=m(g));var f=g.g/255,h=g.b/255,k=(Z*h+g.r/255*-1.7884503806-3.5172982438*f)/(Z+-1.7884503806-3.5172982438);h-=k;var n=(1.97294*(f-k)- -.29227*h)/-.90649;h=(f=
Math.sqrt(n*n+h*h)/(1.97294*k*(1-k)))?Math.atan2(n,h)*z-120:NaN;g=new Q(0>h?h+360:h,f,k,g.opacity)}}else g=new Q(a,b,c,null==e?1:e);return g}function Q(a,b,c,d){this.h=+a;this.s=+b;this.l=+c;this.opacity=+d}var N=1/.7,L=/^#([0-9a-f]{3})$/,R=/^#([0-9a-f]{6})$/,ca=/^rgb\(\s*([+-]?\d+)\s*,\s*([+-]?\d+)\s*,\s*([+-]?\d+)\s*\)$/,w=/^rgb\(\s*([+-]?\d*\.?\d+(?:[eE][+-]?\d+)?)%\s*,\s*([+-]?\d*\.?\d+(?:[eE][+-]?\d+)?)%\s*,\s*([+-]?\d*\.?\d+(?:[eE][+-]?\d+)?)%\s*\)$/,x=/^rgba\(\s*([+-]?\d+)\s*,\s*([+-]?\d+)\s*,\s*([+-]?\d+)\s*,\s*([+-]?\d*\.?\d+(?:[eE][+-]?\d+)?)\s*\)$/,
Y=/^rgba\(\s*([+-]?\d*\.?\d+(?:[eE][+-]?\d+)?)%\s*,\s*([+-]?\d*\.?\d+(?:[eE][+-]?\d+)?)%\s*,\s*([+-]?\d*\.?\d+(?:[eE][+-]?\d+)?)%\s*,\s*([+-]?\d*\.?\d+(?:[eE][+-]?\d+)?)\s*\)$/,ia=/^hsl\(\s*([+-]?\d*\.?\d+(?:[eE][+-]?\d+)?)\s*,\s*([+-]?\d*\.?\d+(?:[eE][+-]?\d+)?)%\s*,\s*([+-]?\d*\.?\d+(?:[eE][+-]?\d+)?)%\s*\)$/,S=/^hsla\(\s*([+-]?\d*\.?\d+(?:[eE][+-]?\d+)?)\s*,\s*([+-]?\d*\.?\d+(?:[eE][+-]?\d+)?)%\s*,\s*([+-]?\d*\.?\d+(?:[eE][+-]?\d+)?)%\s*,\s*([+-]?\d*\.?\d+(?:[eE][+-]?\d+)?)\s*\)$/,W={aliceblue:15792383,
antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,
darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,
indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,
magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,
palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,
turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};k(e,f,{displayable:function(){return this.rgb().displayable()},hex:function(){return this.rgb().hex()},toString:function(){return this.rgb()+""}});k(d,r,h(e,{brighter:function(a){a=null==a?N:Math.pow(N,a);return new d(this.r*a,this.g*a,this.b*a,this.opacity)},darker:function(a){a=null==a?.7:Math.pow(.7,a);return new d(this.r*a,this.g*a,this.b*a,this.opacity)},rgb:function(){return this},
displayable:function(){return 0<=this.r&&255>=this.r&&0<=this.g&&255>=this.g&&0<=this.b&&255>=this.b&&0<=this.opacity&&1>=this.opacity},hex:function(){return"#"+g(this.r)+g(this.g)+g(this.b)},toString:function(){var a=this.opacity;a=isNaN(a)?1:Math.max(0,Math.min(1,a));return(1===a?"rgb(":"rgba(")+Math.max(0,Math.min(255,Math.round(this.r)||0))+", "+Math.max(0,Math.min(255,Math.round(this.g)||0))+", "+Math.max(0,Math.min(255,Math.round(this.b)||0))+(1===a?")":", "+a+")")}}));k(y,t,h(e,{brighter:function(a){a=
null==a?N:Math.pow(N,a);return new y(this.h,this.s,this.l*a,this.opacity)},darker:function(a){a=null==a?.7:Math.pow(.7,a);return new y(this.h,this.s,this.l*a,this.opacity)},rgb:function(){var a=this.h%360+360*(0>this.h),b=isNaN(a)||isNaN(this.s)?0:this.s,c=this.l;b=c+(.5>c?c:1-c)*b;c=2*c-b;return new d(B(240<=a?a-240:a+120,c,b),B(a,c,b),B(120>a?a+240:a-120,c,b),this.opacity)},displayable:function(){return(0<=this.s&&1>=this.s||isNaN(this.s))&&0<=this.l&&1>=this.l&&0<=this.opacity&&1>=this.opacity}}));
var fa=Math.PI/180,z=180/Math.PI,ha=4/29,ea=6/29,ba=3*ea*ea,la=ea*ea*ea;k(A,l,h(e,{brighter:function(a){return new A(this.l+18*(null==a?1:a),this.a,this.b,this.opacity)},darker:function(a){return new A(this.l-18*(null==a?1:a),this.a,this.b,this.opacity)},rgb:function(){var a=(this.l+16)/116,b=isNaN(this.a)?a:a+this.a/500,c=isNaN(this.b)?a:a-this.b/200;b=.96422*p(b);a=1*p(a);c=.82521*p(c);return new d(q(3.1338561*b-1.6168667*a-.4906146*c),q(-.9787684*b+1.9161415*a+.033454*c),q(.0719453*b-.2289914*
a+1.4052427*c),this.opacity)}}));k(O,M,h(e,{brighter:function(a){return new O(this.h,this.c,this.l+18*(null==a?1:a),this.opacity)},darker:function(a){return new O(this.h,this.c,this.l-18*(null==a?1:a),this.opacity)},rgb:function(){return D(this).rgb()}}));var Z=1.78277*-.29227-.1347134789;k(Q,I,h(e,{brighter:function(a){a=null==a?N:Math.pow(N,a);return new Q(this.h,this.s,this.l*a,this.opacity)},darker:function(a){a=null==a?.7:Math.pow(.7,a);return new Q(this.h,this.s,this.l*a,this.opacity)},rgb:function(){var a=
isNaN(this.h)?0:(this.h+120)*fa,b=+this.l,c=isNaN(this.s)?0:this.s*b*(1-b),e=Math.cos(a);a=Math.sin(a);return new d(255*(b+c*(-.14861*e+1.78277*a)),255*(b+c*(-.29227*e+-.90649*a)),255*(b+1.97294*c*e),this.opacity)}}));a.color=f;a.rgb=r;a.hsl=t;a.lab=l;a.hcl=M;a.lch=function(a,b,c,d){return 1===arguments.length?H(a):new O(c,b,a,null==d?1:d)};a.gray=function(a,b){return new A(a,0,0,null==b?1:b)};a.cubehelix=I;Object.defineProperty(a,"__esModule",{value:!0})})},{}],145:[function(a,p,l){(function(a,k){"object"===
typeof l&&"undefined"!==typeof p?k(l):k(a.d3=a.d3||{})})(this,function(a){function k(){for(var a=0,b=arguments.length,e={},d;a<b;++a){if(!(d=arguments[a]+"")||d in e)throw Error("illegal type: "+d);e[d]=[]}return new h(e)}function h(a){this._=a}function e(a,b){return a.trim().split(/^|\s+/).map(function(a){var d="",e=a.indexOf(".");0<=e&&(d=a.slice(e+1),a=a.slice(0,e));if(a&&!b.hasOwnProperty(a))throw Error("unknown type: "+a);return{type:a,name:d}})}function f(a,e,f){for(var d=0,g=a.length;d<g;++d)if(a[d].name===
e){a[d]=b;a=a.slice(0,d).concat(a.slice(d+1));break}null!=f&&a.push({name:e,value:f});return a}var b={value:function(){}};h.prototype=k.prototype={constructor:h,on:function(a,b){var h=this._,d=e(a+"",h),g,c=-1,k=d.length;if(2>arguments.length)for(;++c<k;){var n;if(n=g=(a=d[c]).type){a:{n=h[g];for(var m=0,u=n.length;m<u;++m)if((g=n[m]).name===a.name){g=g.value;break a}g=void 0}n=g}if(n)return g}else{if(null!=b&&"function"!==typeof b)throw Error("invalid callback: "+b);for(;++c<k;)if(g=(a=d[c]).type)h[g]=
f(h[g],a.name,b);else if(null==b)for(g in h)h[g]=f(h[g],a.name,null);return this}},copy:function(){var a={},b=this._,e;for(e in b)a[e]=b[e].slice();return new h(a)},call:function(a,b){if(0<(g=arguments.length-2))for(var e=Array(g),d=0,g,c;d<g;++d)e[d]=arguments[d+2];if(!this._.hasOwnProperty(a))throw Error("unknown type: "+a);c=this._[a];d=0;for(g=c.length;d<g;++d)c[d].value.apply(b,e)},apply:function(a,b,e){if(!this._.hasOwnProperty(a))throw Error("unknown type: "+a);a=this._[a];for(var d=0,g=a.length;d<
g;++d)a[d].value.apply(b,e)}};a.dispatch=k;Object.defineProperty(a,"__esModule",{value:!0})})},{}],146:[function(a,p,l){(function(m,k){"object"===typeof l&&"undefined"!==typeof p?k(l,a("d3-quadtree"),a("d3-collection"),a("d3-dispatch"),a("d3-timer")):k(m.d3=m.d3||{},m.d3,m.d3,m.d3,m.d3)})(this,function(a,k,h,e,f){function b(a){return a.x+a.vx}function n(a){return a.y+a.vy}function m(a){return a.index}function r(a,b){a=a.get(b);if(!a)throw Error("missing: "+b);return a}function d(a){return a.x}function g(a){return a.y}
var c=function(a){return function(){return a}},v=function(){return 1E-6*(Math.random()-.5)},t=Math.PI*(3-Math.sqrt(5));a.forceCenter=function(a,b){function c(){var c,e=d.length,g=0,f=0;for(c=0;c<e;++c){var h=d[c];g+=h.x;f+=h.y}g=g/e-a;f=f/e-b;for(c=0;c<e;++c)h=d[c],h.x-=g,h.y-=f}var d;null==a&&(a=0);null==b&&(b=0);c.initialize=function(a){d=a};c.x=function(b){return arguments.length?(a=+b,c):a};c.y=function(a){return arguments.length?(b=+a,c):b};return c};a.forceCollide=function(a){function d(){function a(a,
b,c,d,e){var g=a.data;a=a.r;var f=B+a;if(g)g.index>r.index&&(b=u-g.x-g.vx,c=y-g.y-g.vy,d=b*b+c*c,d<f*f&&(0===b&&(b=v(),d+=b*b),0===c&&(c=v(),d+=c*c),d=(f-(d=Math.sqrt(d)))/d*t,r.vx+=(b*=d)*(f=(a*=a)/(D+a)),r.vy+=(c*=d)*f,g.vx-=b*(f=1-f),g.vy-=c*f));else return b>u+f||d<u-f||c>y+f||e<y-f}for(var c,d=f.length,g,r,u,y,B,D,A=0;A<m;++A)for(g=k.quadtree(f,b,n).visitAfter(e),c=0;c<d;++c)r=f[c],B=h[r.index],D=B*B,u=r.x+r.vx,y=r.y+r.vy,g.visit(a)}function e(a){if(a.data)return a.r=h[a.data.index];for(var b=
a.r=0;4>b;++b)a[b]&&a[b].r>a.r&&(a.r=a[b].r)}function g(){if(f){var b,c=f.length;h=Array(c);for(b=0;b<c;++b){var d=f[b];h[d.index]=+a(d,b,f)}}}var f,h,t=1,m=1;"function"!==typeof a&&(a=c(null==a?1:+a));d.initialize=function(a){f=a;g()};d.iterations=function(a){return arguments.length?(m=+a,d):m};d.strength=function(a){return arguments.length?(t=+a,d):t};d.radius=function(b){return arguments.length?(a="function"===typeof b?b:c(+b),g(),d):a};return d};a.forceLink=function(a){function b(b){for(var c=
0,d=a.length;c<q;++c)for(var e=0,g,f,h,k,t;e<d;++e)g=a[e],f=g.source,g=g.target,h=g.x+g.vx-f.x-f.vx||v(),k=g.y+g.vy-f.y-f.vy||v(),t=Math.sqrt(h*h+k*k),t=(t-u[e])/t*b*n[e],h*=t,k*=t,g.vx-=h*(t=p[e]),g.vy-=k*t,f.vx+=h*(t=1-t),f.vy+=k*t}function d(){if(y){var b=y.length,c=a.length,d=h.map(y,f);var k=0;for(l=Array(b);k<c;++k)b=a[k],b.index=k,"object"!==typeof b.source&&(b.source=r(d,b.source)),"object"!==typeof b.target&&(b.target=r(d,b.target)),l[b.source.index]=(l[b.source.index]||0)+1,l[b.target.index]=
(l[b.target.index]||0)+1;k=0;for(p=Array(c);k<c;++k)b=a[k],p[k]=l[b.source.index]/(l[b.source.index]+l[b.target.index]);n=Array(c);e();u=Array(c);g()}}function e(){if(y)for(var b=0,c=a.length;b<c;++b)n[b]=+k(a[b],b,a)}function g(){if(y)for(var b=0,c=a.length;b<c;++b)u[b]=+t(a[b],b,a)}var f=m,k=function(a){return 1/Math.min(l[a.source.index],l[a.target.index])},n,t=c(30),u,y,l,p,q=1;null==a&&(a=[]);b.initialize=function(a){y=a;d()};b.links=function(c){return arguments.length?(a=c,d(),b):a};b.id=function(a){return arguments.length?
(f=a,b):f};b.iterations=function(a){return arguments.length?(q=+a,b):q};b.strength=function(a){return arguments.length?(k="function"===typeof a?a:c(+a),e(),b):k};b.distance=function(a){return arguments.length?(t="function"===typeof a?a:c(+a),g(),b):t};return b};a.forceManyBody=function(){function a(a){var b=h.length,c=k.quadtree(h,d,g).visitAfter(e);t=a;for(a=0;a<b;++a)n=h[a],c.visit(f)}function b(){if(h){var a,b=h.length;r=Array(b);for(a=0;a<b;++a){var c=h[a];r[c.index]=+m(c,a,h)}}}function e(a){var b=
0,c,d,e=0,g,f,h;if(a.length){for(g=f=h=0;4>h;++h)(c=a[h])&&(d=Math.abs(c.value))&&(b+=c.value,e+=d,g+=d*c.x,f+=d*c.y);a.x=g/e;a.y=f/e}else{c=a;c.x=c.data.x;c.y=c.data.y;do b+=r[c.data.index];while(c=c.next)}a.value=b}function f(a,b,c,d){if(!a.value)return!0;c=a.x-n.x;var e=a.y-n.y;b=d-b;d=c*c+e*e;if(b*b/p<d)return d<l&&(0===c&&(c=v(),d+=c*c),0===e&&(e=v(),d+=e*e),d<u&&(d=Math.sqrt(u*d)),n.vx+=c*a.value*t/d,n.vy+=e*a.value*t/d),!0;if(!(a.length||d>=l)){if(a.data!==n||a.next)0===c&&(c=v(),d+=c*c),0===
e&&(e=v(),d+=e*e),d<u&&(d=Math.sqrt(u*d));do a.data!==n&&(b=r[a.data.index]*t/d,n.vx+=c*b,n.vy+=e*b);while(a=a.next)}}var h,n,t,m=c(-30),r,u=1,l=Infinity,p=.81;a.initialize=function(a){h=a;b()};a.strength=function(d){return arguments.length?(m="function"===typeof d?d:c(+d),b(),a):m};a.distanceMin=function(b){return arguments.length?(u=b*b,a):Math.sqrt(u)};a.distanceMax=function(b){return arguments.length?(l=b*b,a):Math.sqrt(l)};a.theta=function(b){return arguments.length?(p=b*b,a):Math.sqrt(p)};return a};
a.forceRadial=function(a,b,d){function e(a){for(var c=0,e=f.length;c<e;++c){var g=f[c],h=g.x-b||1E-6,t=g.y-d||1E-6,v=Math.sqrt(h*h+t*t);v=(n[c]-v)*k[c]*a/v;g.vx+=h*v;g.vy+=t*v}}function g(){if(f){var b,c=f.length;k=Array(c);n=Array(c);for(b=0;b<c;++b)n[b]=+a(f[b],b,f),k[b]=isNaN(n[b])?0:+h(f[b],b,f)}}var f,h=c(.1),k,n;"function"!==typeof a&&(a=c(+a));null==b&&(b=0);null==d&&(d=0);e.initialize=function(a){f=a;g()};e.strength=function(a){return arguments.length?(h="function"===typeof a?a:c(+a),g(),
e):h};e.radius=function(b){return arguments.length?(a="function"===typeof b?b:c(+b),g(),e):a};e.x=function(a){return arguments.length?(b=+a,e):b};e.y=function(a){return arguments.length?(d=+a,e):d};return e};a.forceSimulation=function(a){function b(){c();p.call("tick",k);n<v&&(l.stop(),p.call("end",k))}function c(){var b,c=a.length;n+=(r-n)*m;y.each(function(a){a(n)});for(b=0;b<c;++b){var d=a[b];null==d.fx?d.x+=d.vx*=u:(d.x=d.fx,d.vx=0);null==d.fy?d.y+=d.vy*=u:(d.y=d.fy,d.vy=0)}}function d(){for(var b=
0,c=a.length,d;b<c;++b){d=a[b];d.index=b;if(isNaN(d.x)||isNaN(d.y)){var e=10*Math.sqrt(b),g=b*t;d.x=e*Math.cos(g);d.y=e*Math.sin(g)}if(isNaN(d.vx)||isNaN(d.vy))d.vx=d.vy=0}}function g(b){b.initialize&&b.initialize(a);return b}var k,n=1,v=.001,m=1-Math.pow(v,1/300),r=0,u=.6,y=h.map(),l=f.timer(b),p=e.dispatch("tick","end");null==a&&(a=[]);d();return k={tick:c,restart:function(){return l.restart(b),k},stop:function(){return l.stop(),k},nodes:function(b){return arguments.length?(a=b,d(),y.each(g),k):
a},alpha:function(a){return arguments.length?(n=+a,k):n},alphaMin:function(a){return arguments.length?(v=+a,k):v},alphaDecay:function(a){return arguments.length?(m=+a,k):+m},alphaTarget:function(a){return arguments.length?(r=+a,k):r},velocityDecay:function(a){return arguments.length?(u=1-a,k):1-u},force:function(a,b){return 1<arguments.length?(null==b?y.remove(a):y.set(a,g(b)),k):y.get(a)},find:function(b,c,d){var e,g=a.length;d=null==d?Infinity:d*d;for(e=0;e<g;++e){var f=a[e];var h=b-f.x;var k=c-
f.y;h=h*h+k*k;if(h<d){var n=f;d=h}}return n},on:function(a,b){return 1<arguments.length?(p.on(a,b),k):p.on(a)}}};a.forceX=function(a){function b(a){for(var b=0,c=g.length,d;b<c;++b)d=g[b],d.vx+=(h[b]-d.x)*f[b]*a}function d(){if(g){var b,c=g.length;f=Array(c);h=Array(c);for(b=0;b<c;++b)f[b]=isNaN(h[b]=+a(g[b],b,g))?0:+e(g[b],b,g)}}var e=c(.1),g,f,h;"function"!==typeof a&&(a=c(null==a?0:+a));b.initialize=function(a){g=a;d()};b.strength=function(a){return arguments.length?(e="function"===typeof a?a:
c(+a),d(),b):e};b.x=function(e){return arguments.length?(a="function"===typeof e?e:c(+e),d(),b):a};return b};a.forceY=function(a){function b(a){for(var b=0,c=g.length,d;b<c;++b)d=g[b],d.vy+=(h[b]-d.y)*f[b]*a}function d(){if(g){var b,c=g.length;f=Array(c);h=Array(c);for(b=0;b<c;++b)f[b]=isNaN(h[b]=+a(g[b],b,g))?0:+e(g[b],b,g)}}var e=c(.1),g,f,h;"function"!==typeof a&&(a=c(null==a?0:+a));b.initialize=function(a){g=a;d()};b.strength=function(a){return arguments.length?(e="function"===typeof a?a:c(+a),
d(),b):e};b.y=function(e){return arguments.length?(a="function"===typeof e?e:c(+e),d(),b):a};return b};Object.defineProperty(a,"__esModule",{value:!0})})},{"d3-collection":143,"d3-dispatch":145,"d3-quadtree":150,"d3-timer":153}],147:[function(a,p,l){(function(a,k){"object"===typeof l&&"undefined"!==typeof p?k(l):k(a.d3=a.d3||{})})(this,function(a){function k(a,b){return a.parent===b.parent?1:2}function h(a,b){return a+b.x}function e(a,b){return Math.max(a,b.y)}function f(a){for(var b;b=a.children;)a=
b[0];return a}function b(a){for(var b;b=a.children;)a=b[b.length-1];return a}function n(a){var b=0,c=a.children,d=c&&c.length;if(d)for(;0<=--d;)b+=c[d].value;else b=1;a.value=b}function m(a,b){var d=new c(a);a=+a.value&&(d.value=a.value);var e,f=[d],h,k,n,t;for(null==b&&(b=r);e=f.pop();)if(a&&(e.value=+e.data.value),(k=b(e.data))&&(t=k.length))for(e.children=Array(t),n=t-1;0<=n;--n)f.push(h=e.children[n]=new c(k[n])),h.parent=e,h.depth=e.depth+1;return d.eachBefore(g)}function r(a){return a.children}
function d(a){a.data=a.data.data}function g(a){var b=0;do a.height=b;while((a=a.parent)&&a.height<++b)}function c(a){this.data=a;this.depth=this.height=0;this.parent=null}function v(a){var b=0;a=ea.call(a);for(var c=a.length,d,e;c;)e=Math.random()*c--|0,d=a[c],a[c]=a[e],a[e]=d;c=a.length;d=[];for(var g;b<c;)if(e=a[b],g&&y(g,e))++b;else{a:if(b=d,B(e,b))b=[e];else{for(d=0;d<b.length;++d)if(t(e,b[d])&&B(D(b[d],e),b)){b=[b[d],e];break a}for(d=0;d<b.length-1;++d)for(g=d+1;g<b.length;++g)if(t(D(b[d],b[g]),
e)&&t(D(b[d],e),b[g])&&t(D(b[g],e),b[d])&&B(l(b[d],b[g],e),b)){b=[b[d],b[g],e];break a}throw Error();}a:{b=d=b;switch(b.length){case 1:b=b[0];b={x:b.x,y:b.y,r:b.r};break a;case 2:b=D(b[0],b[1]);break a;case 3:b=l(b[0],b[1],b[2]);break a}b=void 0}g=b;b=0}return g}function t(a,b){var c=a.r-b.r,d=b.x-a.x;a=b.y-a.y;return 0>c||c*c<d*d+a*a}function y(a,b){var c=a.r-b.r+1E-6,d=b.x-a.x;a=b.y-a.y;return 0<c&&c*c>d*d+a*a}function B(a,b){for(var c=0;c<b.length;++c)if(!y(a,b[c]))return!1;return!0}function D(a,
b){var c=a.x,d=a.y;a=a.r;var e=b.x,g=b.y;b=b.r;var f=e-c,h=g-d,k=b-a,n=Math.sqrt(f*f+h*h);return{x:(c+e+f/n*k)/2,y:(d+g+h/n*k)/2,r:(n+a+b)/2}}function l(a,b,c){var d=a.x,e=a.y;a=a.r;var g=b.x,f=b.y,h=b.r,k=c.x,n=c.y,t=c.r;c=d-g;b=d-k;var v=e-f,m=e-n,r=h-a,u=t-a,y=d*d+e*e-a*a;f=y-g*g-f*f+h*h;n=y-k*k-n*n+t*t;k=b*v-c*m;g=(v*n-m*f)/(2*k)-d;v=(m*r-v*u)/k;m=(b*f-c*n)/(2*k)-e;c=(c*u-b*r)/k;b=v*v+c*c-1;r=2*(a+g*v+m*c);a=g*g+m*m-a*a;a=-(b?(r+Math.sqrt(r*r-4*b*a))/(2*b):a/r);return{x:d+g+v*a,y:e+m+c*a,r:a}}
function A(a,b,c){var d=a.x-b.x,e=a.y-b.y,g=d*d+e*e;if(g){var f=b.r+c.r;f*=f;var h=a.r+c.r;h*=h;if(f>h){var k=(g+h-f)/(2*g);f=Math.sqrt(Math.max(0,h/g-k*k));c.x=a.x-k*d-f*e;c.y=a.y-k*e+f*d}else k=(g+f-h)/(2*g),f=Math.sqrt(Math.max(0,f/g-k*k)),c.x=b.x+k*d-f*e,c.y=b.y+k*e+f*d}else c.x=b.x+c.r,c.y=b.y}function C(a,b){var c=a.r+b.r-1E-6,d=b.x-a.x;a=b.y-a.y;return 0<c&&c*c>d*d+a*a}function p(a){var b=a._,c=a.next._,d=b.r+c.r;a=(b.x*c.r+c.x*b.r)/d;b=(b.y*c.r+c.y*b.r)/d;return a*a+b*b}function q(a){this._=
a;this.previous=this.next=null}function E(a){if(!(c=a.length))return 0;var b,c;var d=a[0];d.x=0;d.y=0;if(!(1<c))return d.r;var e=a[1];d.x=-e.r;e.x=d.r;e.y=0;if(!(2<c))return d.r+e.r;A(e,d,b=a[2]);d=new q(d);e=new q(e);b=new q(b);d.next=b.previous=e;e.next=d.previous=b;b.next=e.previous=d;var g=3;a:for(;g<c;++g){A(d._,e._,b=a[g]);b=new q(b);var f=e.next;var h=d.previous;var k=e._.r;var n=d._.r;do if(k<=n){if(C(f._,b._)){e=f;d.next=e;e.previous=d;--g;continue a}k+=f._.r;f=f.next}else{if(C(h._,b._)){d=
h;d.next=e;e.previous=d;--g;continue a}n+=h._.r;h=h.previous}while(f!==h.next);b.previous=d;b.next=e;d.next=e.previous=e=b;for(f=p(d);(b=b.next)!==e;)(h=p(b))<f&&(d=b,f=h);e=d.next}d=[e._];for(b=e;(b=b.next)!==e;)d.push(b._);b=v(d);for(g=0;g<c;++g)d=a[g],d.x-=b.x,d.y-=b.y;return b.r}function H(a){if("function"!==typeof a)throw Error();return a}function M(){return 0}function O(a){return function(){return a}}function I(a){return Math.sqrt(a.value)}function Q(a){return function(b){b.children||(b.r=Math.max(0,
+a(b)||0))}}function N(a,b){return function(c){if(d=c.children){var d,e,g=d.length,f=a(c)*b||0;if(f)for(e=0;e<g;++e)d[e].r+=f;var h=E(d);if(f)for(e=0;e<g;++e)d[e].r-=f;c.r=h+f}}}function L(a){return function(b){var c=b.parent;b.r*=a;c&&(b.x=c.x+a*b.x,b.y=c.y+a*b.y)}}function R(a){a.x0=Math.round(a.x0);a.y0=Math.round(a.y0);a.x1=Math.round(a.x1);a.y1=Math.round(a.y1)}function ca(a,b,c,d,e){var g=a.children,f=-1,h=g.length;for(d=a.value&&(d-b)/a.value;++f<h;)a=g[f],a.y0=c,a.y1=e,a.x0=b,a.x1=b+=a.value*
d}function w(a){return a.id}function x(a){return a.parentId}function Y(a,b){return a.parent===b.parent?1:2}function ia(a){var b=a.children;return b?b[0]:a.t}function S(a){var b=a.children;return b?b[b.length-1]:a.t}function W(a,b){this._=a;this.A=this.children=this.parent=null;this.a=this;this.s=this.c=this.m=this.z=0;this.t=null;this.i=b}function fa(a){a=new W(a,0);for(var b,c=[a],d,e,g;b=c.pop();)if(e=b._.children)for(b.children=Array(d=e.length),g=d-1;0<=g;--g)c.push(d=b.children[g]=new W(e[g],
g)),d.parent=b;(a.parent=new W(null,0)).children=[a];return a}function z(a,b,c,d,e){var g=a.children,f=-1,h=g.length;for(e=a.value&&(e-c)/a.value;++f<h;)a=g[f],a.x0=b,a.x1=d,a.y0=c,a.y1=c+=a.value*e}function ha(a,b,c,d,e,g){for(var f=[],h=b.children,k,n,t=k=0,v=h.length,m,r=b.value,u,y,B,D,A,l;k<v;){b=e-c;m=g-d;do u=h[t++].value;while(!u&&t<v);y=B=u;l=Math.max(m/b,b/m)/(r*a);D=u*u*l;for(A=Math.max(B/D,D/y);t<v;++t){u+=n=h[t].value;n<y&&(y=n);n>B&&(B=n);D=u*u*l;D=Math.max(B/D,D/y);if(D>A){u-=n;break}A=
D}f.push(k={value:u,dice:b<m,children:h.slice(k,t)});k.dice?ca(k,c,d,e,r?d+=m*u/r:g):z(k,c,d,r?c+=b*u/r:e,g);r-=u;k=t}return f}c.prototype=m.prototype={constructor:c,count:function(){return this.eachAfter(n)},each:function(a){var b,c=[this],d;do{var e=c.reverse();for(c=[];b=e.pop();)if(a(b),b=b.children){var g=0;for(d=b.length;g<d;++g)c.push(b[g])}}while(c.length);return this},eachAfter:function(a){for(var b,c=[this],d=[],e,g;b=c.pop();)if(d.push(b),b=b.children)for(e=0,g=b.length;e<g;++e)c.push(b[e]);
for(;b=d.pop();)a(b);return this},eachBefore:function(a){for(var b,c=[this],d;b=c.pop();)if(a(b),b=b.children)for(d=b.length-1;0<=d;--d)c.push(b[d]);return this},sum:function(a){return this.eachAfter(function(b){for(var c=+a(b.data)||0,d=b.children,e=d&&d.length;0<=--e;)c+=d[e].value;b.value=c})},sort:function(a){return this.eachBefore(function(b){b.children&&b.children.sort(a)})},path:function(a){var b=this;var c=b;var d=a;if(c!==d){var e=c.ancestors(),g=d.ancestors(),f=null;c=e.pop();for(d=g.pop();c===
d;)f=c,c=e.pop(),d=g.pop();c=f}for(d=[b];b!==c;)b=b.parent,d.push(b);for(b=d.length;a!==c;)d.splice(b,0,a),a=a.parent;return d},ancestors:function(){for(var a=this,b=[a];a=a.parent;)b.push(a);return b},descendants:function(){var a=[];this.each(function(b){a.push(b)});return a},leaves:function(){var a=[];this.eachBefore(function(b){b.children||a.push(b)});return a},links:function(){var a=this,b=[];a.each(function(c){c!==a&&b.push({source:c.parent,target:c})});return b},copy:function(){return m(this).eachBefore(d)}};
var ea=Array.prototype.slice,ba={depth:-1},la={};W.prototype=Object.create(c.prototype);var Z=(1+Math.sqrt(5))/2,pa=function ja(a){function b(b,c,d,e,g){ha(a,b,c,d,e,g)}b.ratio=function(a){return ja(1<(a=+a)?a:1)};return b}(Z);Z=function xa(a){function b(b,c,d,e,g){if((f=b._squarify)&&f.ratio===a)for(var f,h,k,n=-1,t,v=f.length,m=b.value;++n<v;){b=f[n];h=b.children;k=b.value=0;for(t=h.length;k<t;++k)b.value+=h[k].value;b.dice?ca(b,c,d,e,d+=(g-d)*b.value/m):z(b,c,d,c+=(e-c)*b.value/m,g);m-=b.value}else b._squarify=
f=ha(a,b,c,d,e,g),f.ratio=a}b.ratio=function(a){return xa(1<(a=+a)?a:1)};return b}(Z);a.cluster=function(){function a(a){var k,t=0;a.eachAfter(function(a){var b=a.children;if(b){var d=b.reduce(h,0)/b.length;a.x=d;a.y=1+b.reduce(e,0)}else a.x=k?t+=c(a,k):0,a.y=0,k=a});var v=f(a),m=b(a),r=v.x-c(v,m)/2,u=m.x+c(m,v)/2;return a.eachAfter(n?function(b){b.x=(b.x-a.x)*d;b.y=(a.y-b.y)*g}:function(b){b.x=(b.x-r)/(u-r)*d;b.y=(1-(a.y?b.y/a.y:1))*g})}var c=k,d=1,g=1,n=!1;a.separation=function(b){return arguments.length?
(c=b,a):c};a.size=function(b){return arguments.length?(n=!1,d=+b[0],g=+b[1],a):n?null:[d,g]};a.nodeSize=function(b){return arguments.length?(n=!0,d=+b[0],g=+b[1],a):n?[d,g]:null};return a};a.hierarchy=m;a.pack=function(){function a(a){a.x=c/2;a.y=d/2;b?a.eachBefore(Q(b)).eachAfter(N(e,.5)).eachBefore(L(1)):a.eachBefore(Q(I)).eachAfter(N(M,1)).eachAfter(N(e,a.r/Math.min(c,d))).eachBefore(L(Math.min(c,d)/(2*a.r)));return a}var b=null,c=1,d=1,e=M;a.radius=function(c){return arguments.length?(b=null==
c?null:H(c),a):b};a.size=function(b){return arguments.length?(c=+b[0],d=+b[1],a):[c,d]};a.padding=function(b){return arguments.length?(e="function"===typeof b?b:O(+b),a):e};return a};a.packSiblings=function(a){E(a);return a};a.packEnclose=v;a.partition=function(){function a(a){var f=a.height+1;a.x0=a.y0=e;a.x1=c;a.y1=d/f;a.eachBefore(b(d,f));g&&a.eachBefore(R);return a}function b(a,b){return function(c){c.children&&ca(c,c.x0,a*(c.depth+1)/b,c.x1,a*(c.depth+2)/b);var d=c.x0,g=c.y0,f=c.x1-e,h=c.y1-
e;f<d&&(d=f=(d+f)/2);h<g&&(g=h=(g+h)/2);c.x0=d;c.y0=g;c.x1=f;c.y1=h}}var c=1,d=1,e=0,g=!1;a.round=function(b){return arguments.length?(g=!!b,a):g};a.size=function(b){return arguments.length?(c=+b[0],d=+b[1],a):[c,d]};a.padding=function(b){return arguments.length?(e=+b,a):e};return a};a.stratify=function(){function a(a){var e,f=a.length,h=Array(f),k,n={};for(e=0;e<f;++e){var t=a[e];var v=h[e]=new c(t);null!=(k=b(t,e,a))&&(k+="")&&(t="$"+(v.id=k),n[t]=t in n?la:v)}for(e=0;e<f;++e)if(v=h[e],k=d(a[e],
e,a),null!=k&&(k+="")){t=n["$"+k];if(!t)throw Error("missing: "+k);if(t===la)throw Error("ambiguous: "+k);t.children?t.children.push(v):t.children=[v];v.parent=t}else{if(m)throw Error("multiple roots");var m=v}if(!m)throw Error("no root");m.parent=ba;m.eachBefore(function(a){a.depth=a.parent.depth+1;--f}).eachBefore(g);m.parent=null;if(0<f)throw Error("cycle");return m}var b=w,d=x;a.id=function(c){return arguments.length?(b=H(c),a):b};a.parentId=function(b){return arguments.length?(d=H(b),a):d};return a};
a.tree=function(){function a(a){var k=fa(a);k.eachAfter(b);k.parent.m=-k.z;k.eachBefore(c);if(h)a.eachBefore(d);else{var n=a,t=a,v=a;a.eachBefore(function(a){a.x<n.x&&(n=a);a.x>t.x&&(t=a);a.depth>v.depth&&(v=a)});k=n===t?1:e(n,t)/2;var m=k-n.x,r=g/(t.x+k+m),u=f/(v.depth||1);a.eachBefore(function(a){a.x=(a.x+m)*r;a.y=a.depth*u})}return a}function b(a){var b=a.children,c=a.parent.children,d=a.i?c[a.i-1]:null;if(b){for(var g=0,f=0,h=a.children,k=h.length,n;0<=--k;)n=h[k],n.z+=g,n.m+=g,g+=n.s+(f+=n.c);
b=(b[0].z+b[b.length-1].z)/2;d?(a.z=d.z+e(a._,d._),a.m=a.z-b):a.z=b}else d&&(a.z=d.z+e(a._,d._));b=a.parent;c=a.parent.A||c[0];if(d){f=g=a;h=g.parent.children[0];k=g.m;n=f.m;for(var t=d.m,v=h.m,m;d=S(d),g=ia(g),d&&g;){h=ia(h);f=S(f);f.a=a;m=d.z+t-g.z-k+e(d._,g._);if(0<m){var r=d.a.parent===a.parent?d.a:c,u=a,y=m,B=y/(u.i-r.i);u.c-=B;u.s+=y;r.c+=B;u.z+=y;u.m+=y;k+=m;n+=m}t+=d.m;k+=g.m;v+=h.m;n+=f.m}d&&!S(f)&&(f.t=d,f.m+=t-n);g&&!ia(h)&&(h.t=g,h.m+=k-v,c=a)}b.A=c}function c(a){a._.x=a.z+a.parent.m;
a.m+=a.parent.m}function d(a){a.x*=g;a.y=a.depth*f}var e=Y,g=1,f=1,h=null;a.separation=function(b){return arguments.length?(e=b,a):e};a.size=function(b){return arguments.length?(h=!1,g=+b[0],f=+b[1],a):h?null:[g,f]};a.nodeSize=function(b){return arguments.length?(h=!0,g=+b[0],f=+b[1],a):h?[g,f]:null};return a};a.treemap=function(){function a(a){a.x0=a.y0=0;a.x1=e;a.y1=g;a.eachBefore(b);f=[0];d&&a.eachBefore(R);return a}function b(a){var b=f[a.depth],d=a.x0+b,e=a.y0+b,g=a.x1-b,m=a.y1-b;g<d&&(d=g=(d+
g)/2);m<e&&(e=m=(e+m)/2);a.x0=d;a.y0=e;a.x1=g;a.y1=m;a.children&&(b=f[a.depth+1]=h(a)/2,d+=v(a)-b,e+=k(a)-b,g-=n(a)-b,m-=t(a)-b,g<d&&(d=g=(d+g)/2),m<e&&(e=m=(e+m)/2),c(a,d,e,g,m))}var c=pa,d=!1,e=1,g=1,f=[0],h=M,k=M,n=M,t=M,v=M;a.round=function(b){return arguments.length?(d=!!b,a):d};a.size=function(b){return arguments.length?(e=+b[0],g=+b[1],a):[e,g]};a.tile=function(b){return arguments.length?(c=H(b),a):c};a.padding=function(b){return arguments.length?a.paddingInner(b).paddingOuter(b):a.paddingInner()};
a.paddingInner=function(b){return arguments.length?(h="function"===typeof b?b:O(+b),a):h};a.paddingOuter=function(b){return arguments.length?a.paddingTop(b).paddingRight(b).paddingBottom(b).paddingLeft(b):a.paddingTop()};a.paddingTop=function(b){return arguments.length?(k="function"===typeof b?b:O(+b),a):k};a.paddingRight=function(b){return arguments.length?(n="function"===typeof b?b:O(+b),a):n};a.paddingBottom=function(b){return arguments.length?(t="function"===typeof b?b:O(+b),a):t};a.paddingLeft=
function(b){return arguments.length?(v="function"===typeof b?b:O(+b),a):v};return a};a.treemapBinary=function(a,b,c,d,e){function g(a,b,c,d,e,h,k){if(a>=b-1)a=f[a],a.x0=d,a.y0=e,a.x1=h,a.y1=k;else{for(var n=t[a],v=c/2+n,m=a+1,r=b-1;m<r;){var u=m+r>>>1;t[u]<v?m=u+1:r=u}v-t[m-1]<t[m]-v&&a+1<m&&--m;n=t[m]-n;v=c-n;h-d>k-e?(c=(d*v+h*n)/c,g(a,m,n,d,e,c,k),g(m,b,v,c,e,h,k)):(c=(e*v+k*n)/c,g(a,m,n,d,e,h,c),g(m,b,v,d,c,h,k))}}var f=a.children,h,k=f.length,n,t=Array(k+1);for(t[0]=n=h=0;h<k;++h)t[h+1]=n+=f[h].value;
g(0,k,a.value,b,c,d,e)};a.treemapDice=ca;a.treemapSlice=z;a.treemapSliceDice=function(a,b,c,d,e){(a.depth&1?z:ca)(a,b,c,d,e)};a.treemapSquarify=pa;a.treemapResquarify=Z;Object.defineProperty(a,"__esModule",{value:!0})})},{}],148:[function(a,p,l){(function(m,k){"object"===typeof l&&"undefined"!==typeof p?k(l,a("d3-color")):k(m.d3=m.d3||{},m.d3)})(this,function(a,k){function h(a,b,c,d,e){var g=a*a,f=g*a;return((1-3*a+3*g-f)*b+(4-6*g+3*f)*c+(1+3*a+3*g-3*f)*d+f*e)/6}function e(a){var b=a.length-1;return function(c){var d=
0>=c?c=0:1<=c?(c=1,b-1):Math.floor(c*b),e=a[d],g=a[d+1];return h((c-d/b)*b,0<d?a[d-1]:2*e-g,e,g,d<b-1?a[d+2]:2*g-e)}}function f(a){var b=a.length;return function(c){var d=Math.floor((0>(c%=1)?++c:c)*b);return h((c-d/b)*b,a[(d+b-1)%b],a[d%b],a[(d+1)%b],a[(d+2)%b])}}function b(a){return function(){return a}}function n(a,b){return function(c){return a+c*b}}function m(a,b,c){return a=Math.pow(a,c),b=Math.pow(b,c)-a,c=1/c,function(d){return Math.pow(a+d*b,c)}}function r(a,c){var d=c-a;return d?n(a,180<
d||-180>d?d-360*Math.round(d/360):d):b(isNaN(a)?c:a)}function d(a){return 1===(a=+a)?g:function(c,d){return d-c?m(c,d,a):b(isNaN(c)?d:c)}}function g(a,c){var d=c-a;return d?n(a,d):b(isNaN(a)?c:a)}function c(a){return function(b){var c=b.length,d=Array(c),e=Array(c),g=Array(c),f;for(f=0;f<c;++f){var h=k.rgb(b[f]);d[f]=h.r||0;e[f]=h.g||0;g[f]=h.b||0}d=a(d);e=a(e);g=a(g);h.opacity=1;return function(a){h.r=d(a);h.g=e(a);h.b=g(a);return h+""}}}function v(a,b){var c=b?b.length:0,d=a?Math.min(c,a.length):
0,e=Array(d),g=Array(c),f;for(f=0;f<d;++f)e[f]=C(a[f],b[f]);for(;f<c;++f)g[f]=b[f];return function(a){for(f=0;f<d;++f)g[f]=e[f](a);return g}}function t(a,b){var c=new Date;return a=+a,b-=a,function(d){return c.setTime(a+b*d),c}}function y(a,b){return a=+a,b-=a,function(c){return a+b*c}}function B(a,b){var c={},d={},e;if(null===a||"object"!==typeof a)a={};if(null===b||"object"!==typeof b)b={};for(e in b)e in a?c[e]=C(a[e],b[e]):d[e]=b[e];return function(a){for(e in c)d[e]=c[e](a);return d}}function D(a){return function(){return a}}
function l(a){return function(b){return a(b)+""}}function A(a,b){var c=L.lastIndex=R.lastIndex=0,d,e,g,f=-1,h=[],k=[];a+="";for(b+="";(d=L.exec(a))&&(e=R.exec(b));)(g=e.index)>c&&(g=b.slice(c,g),h[f]?h[f]+=g:h[++f]=g),(d=d[0])===(e=e[0])?h[f]?h[f]+=e:h[++f]=e:(h[++f]=null,k.push({i:f,x:y(d,e)})),c=R.lastIndex;c<b.length&&(g=b.slice(c),h[f]?h[f]+=g:h[++f]=g);return 2>h.length?k[0]?l(k[0].x):D(b):(b=k.length,function(a){for(var c=0,d;c<b;++c)h[(d=k[c]).i]=d.x(a);return h.join("")})}function C(a,c){var d=
typeof c,e;return null==c||"boolean"===d?b(c):("number"===d?y:"string"===d?(e=k.color(c))?(c=e,I):A:c instanceof k.color?I:c instanceof Date?t:Array.isArray(c)?v:"function"!==typeof c.valueOf&&"function"!==typeof c.toString||isNaN(c)?B:y)(a,c)}function p(a,b,c,d,e,g){var f,h,k;if(f=Math.sqrt(a*a+b*b))a/=f,b/=f;if(k=a*c+b*d)c-=a*k,d-=b*k;if(h=Math.sqrt(c*c+d*d))c/=h,d/=h,k/=h;a*d<b*c&&(a=-a,b=-b,k=-k,f=-f);return{translateX:e,translateY:g,rotate:Math.atan2(b,a)*ca,skewX:Math.atan(k)*ca,scaleX:f,scaleY:h}}
function q(a,b,c,d){function e(a){return a.length?a.pop()+" ":""}function g(a,d,e,g,f,h){a!==e||d!==g?(f=f.push("translate(",null,b,null,c),h.push({i:f-4,x:y(a,e)},{i:f-2,x:y(d,g)})):(e||g)&&f.push("translate("+e+b+g+c)}function f(a,b,c,g){a!==b?(180<a-b?b+=360:180<b-a&&(a+=360),g.push({i:c.push(e(c)+"rotate(",null,d)-2,x:y(a,b)})):b&&c.push(e(c)+"rotate("+b+d)}function h(a,b,c,g){a!==b?g.push({i:c.push(e(c)+"skewX(",null,d)-2,x:y(a,b)}):b&&c.push(e(c)+"skewX("+b+d)}function k(a,b,c,d,g,f){a!==c||
b!==d?(g=g.push(e(g)+"scale(",null,",",null,")"),f.push({i:g-4,x:y(a,c)},{i:g-2,x:y(b,d)})):1===c&&1===d||g.push(e(g)+"scale("+c+","+d+")")}return function(b,c){var d=[],e=[];b=a(b);c=a(c);g(b.translateX,b.translateY,c.translateX,c.translateY,d,e);f(b.rotate,c.rotate,d,e);h(b.skewX,c.skewX,d,e);k(b.scaleX,b.scaleY,c.scaleX,c.scaleY,d,e);b=c=null;return function(a){for(var b=-1,c=e.length,g;++b<c;)d[(g=e[b]).i]=g.x(a);return d.join("")}}}function E(a){return((a=Math.exp(a))+1/a)/2}function H(a){return function(b,
c){var d=a((b=k.hsl(b)).h,(c=k.hsl(c)).h),e=g(b.s,c.s),f=g(b.l,c.l),h=g(b.opacity,c.opacity);return function(a){b.h=d(a);b.s=e(a);b.l=f(a);b.opacity=h(a);return b+""}}}function M(a){return function(b,c){var d=a((b=k.hcl(b)).h,(c=k.hcl(c)).h),e=g(b.c,c.c),f=g(b.l,c.l),h=g(b.opacity,c.opacity);return function(a){b.h=d(a);b.c=e(a);b.l=f(a);b.opacity=h(a);return b+""}}}function O(a){return function xa(b){function c(c,d){var e=a((c=k.cubehelix(c)).h,(d=k.cubehelix(d)).h),f=g(c.s,d.s),h=g(c.l,d.l),n=g(c.opacity,
d.opacity);return function(a){c.h=e(a);c.s=f(a);c.l=h(Math.pow(a,b));c.opacity=n(a);return c+""}}b=+b;c.gamma=xa;return c}(1)}var I=function ja(a){function b(a,b){var d=c((a=k.rgb(a)).r,(b=k.rgb(b)).r),e=c(a.g,b.g),f=c(a.b,b.b),h=g(a.opacity,b.opacity);return function(b){a.r=d(b);a.g=e(b);a.b=f(b);a.opacity=h(b);return a+""}}var c=d(a);b.gamma=ja;return b}(1),Q=c(e),N=c(f),L=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,R=new RegExp(L.source,"g"),ca=180/Math.PI,w={translateX:0,translateY:0,rotate:0,
skewX:0,scaleX:1,scaleY:1},x,Y,ia,S,W=q(function(a){if("none"===a)return w;x||(x=document.createElement("DIV"),Y=document.documentElement,ia=document.defaultView);x.style.transform=a;a=ia.getComputedStyle(Y.appendChild(x),null).getPropertyValue("transform");Y.removeChild(x);a=a.slice(7,-1).split(",");return p(+a[0],+a[1],+a[2],+a[3],+a[4],+a[5])},"px, ","px)","deg)"),fa=q(function(a){if(null==a)return w;S||(S=document.createElementNS("http://www.w3.org/2000/svg","g"));S.setAttribute("transform",a);
if(!(a=S.transform.baseVal.consolidate()))return w;a=a.matrix;return p(a.a,a.b,a.c,a.d,a.e,a.f)},", ",")",")"),z=Math.SQRT2,ha=H(r),ea=H(g),ba=M(r),la=M(g),Z=O(r),pa=O(g);a.interpolate=C;a.interpolateArray=v;a.interpolateBasis=e;a.interpolateBasisClosed=f;a.interpolateDate=t;a.interpolateDiscrete=function(a){var b=a.length;return function(c){return a[Math.max(0,Math.min(b-1,Math.floor(c*b)))]}};a.interpolateHue=function(a,b){var c=r(+a,+b);return function(a){a=c(a);return a-360*Math.floor(a/360)}};
a.interpolateNumber=y;a.interpolateObject=B;a.interpolateRound=function(a,b){return a=+a,b-=a,function(c){return Math.round(a+b*c)}};a.interpolateString=A;a.interpolateTransformCss=W;a.interpolateTransformSvg=fa;a.interpolateZoom=function(a,b){var c=a[0],d=a[1],e=a[2];a=b[2];var g=b[0]-c,f=b[1]-d,h=g*g+f*f;if(1E-12>h){var k=Math.log(a/e)/z;a=function(a){return[c+a*g,d+a*f,e*Math.exp(z*a*k)]}}else{var n=Math.sqrt(h);b=(a*a-e*e+4*h)/(4*e*n);a=(a*a-e*e-4*h)/(4*a*n);var t=Math.log(Math.sqrt(b*b+1)-b);
k=(Math.log(Math.sqrt(a*a+1)-a)-t)/z;a=function(a){a*=k;var b=E(t),h=z*a+t;var v=((h=Math.exp(2*h))-1)/(h+1);var m=t;h=((m=Math.exp(m))-1/m)/2;v=e/(2*n)*(b*v-h);return[c+v*g,d+v*f,e*b/E(z*a+t)]}}a.duration=1E3*k;return a};a.interpolateRgb=I;a.interpolateRgbBasis=Q;a.interpolateRgbBasisClosed=N;a.interpolateHsl=ha;a.interpolateHslLong=ea;a.interpolateLab=function(a,b){var c=g((a=k.lab(a)).l,(b=k.lab(b)).l),d=g(a.a,b.a),e=g(a.b,b.b),f=g(a.opacity,b.opacity);return function(b){a.l=c(b);a.a=d(b);a.b=
e(b);a.opacity=f(b);return a+""}};a.interpolateHcl=ba;a.interpolateHclLong=la;a.interpolateCubehelix=Z;a.interpolateCubehelixLong=pa;a.piecewise=function(a,b){for(var c=0,d=b.length-1,e=b[0],g=Array(0>d?0:d);c<d;)g[c]=a(e,e=b[++c]);return function(a){var b=Math.max(0,Math.min(d-1,Math.floor(a*=d)));return g[b](a-b)}};a.quantize=function(a,b){for(var c=Array(b),d=0;d<b;++d)c[d]=a(d/(b-1));return c};Object.defineProperty(a,"__esModule",{value:!0})})},{"d3-color":144}],149:[function(a,p,l){(function(a,
k){"object"===typeof l&&"undefined"!==typeof p?k(l):k(a.d3=a.d3||{})})(this,function(a){function k(){this._x0=this._y0=this._x1=this._y1=null;this._=""}function h(){return new k}var e=Math.PI,f=2*e,b=f-1E-6;k.prototype=h.prototype={constructor:k,moveTo:function(a,b){this._+="M"+(this._x0=this._x1=+a)+","+(this._y0=this._y1=+b)},closePath:function(){null!==this._x1&&(this._x1=this._x0,this._y1=this._y0,this._+="Z")},lineTo:function(a,b){this._+="L"+(this._x1=+a)+","+(this._y1=+b)},quadraticCurveTo:function(a,
b,e,d){this._+="Q"+ +a+","+ +b+","+(this._x1=+e)+","+(this._y1=+d)},bezierCurveTo:function(a,b,e,d,g,c){this._+="C"+ +a+","+ +b+","+ +e+","+ +d+","+(this._x1=+g)+","+(this._y1=+c)},arcTo:function(a,b,f,d,g){a=+a;b=+b;f=+f;d=+d;g=+g;var c=this._x1,h=this._y1,k=f-a,n=d-b,m=c-a,r=h-b,u=m*m+r*r;if(0>g)throw Error("negative radius: "+g);if(null===this._x1)this._+="M"+(this._x1=a)+","+(this._y1=b);else if(1E-6<u)if(1E-6<Math.abs(r*k-n*m)&&g){f-=c;d-=h;var A=k*k+n*n;h=Math.sqrt(A);c=Math.sqrt(u);u=g*Math.tan((e-
Math.acos((A+u-(f*f+d*d))/(2*h*c)))/2);c=u/c;u/=h;1E-6<Math.abs(c-1)&&(this._+="L"+(a+c*m)+","+(b+c*r));this._+="A"+g+","+g+",0,0,"+ +(r*f>m*d)+","+(this._x1=a+u*k)+","+(this._y1=b+u*n)}else this._+="L"+(this._x1=a)+","+(this._y1=b)},arc:function(a,h,k,d,g,c){a=+a;h=+h;k=+k;var n=k*Math.cos(d),t=k*Math.sin(d),m=a+n,r=h+t,u=1^c;d=c?d-g:g-d;if(0>k)throw Error("negative radius: "+k);if(null===this._x1)this._+="M"+m+","+r;else if(1E-6<Math.abs(this._x1-m)||1E-6<Math.abs(this._y1-r))this._+="L"+m+","+
r;k&&(0>d&&(d=d%f+f),d>b?this._+="A"+k+","+k+",0,1,"+u+","+(a-n)+","+(h-t)+"A"+k+","+k+",0,1,"+u+","+(this._x1=m)+","+(this._y1=r):1E-6<d&&(this._+="A"+k+","+k+",0,"+ +(d>=e)+","+u+","+(this._x1=a+k*Math.cos(g))+","+(this._y1=h+k*Math.sin(g))))},rect:function(a,b,e,d){this._+="M"+(this._x0=this._x1=+a)+","+(this._y0=this._y1=+b)+"h"+ +e+"v"+ +d+"h"+-e+"Z"},toString:function(){return this._}};a.path=h;Object.defineProperty(a,"__esModule",{value:!0})})},{}],150:[function(a,p,l){(function(a,k){"object"===
typeof l&&"undefined"!==typeof p?k(l):k(a.d3=a.d3||{})})(this,function(a){function k(a,b,c,e){if(isNaN(b)||isNaN(c))return a;var d,g=a._root;e={data:e};var f=a._x0,h=a._y0,k=a._x1,n=a._y1,v,m,r,u;if(!g)return a._root=e,a;for(;g.length;)if((r=b>=(v=(f+k)/2))?f=v:k=v,(u=c>=(m=(h+n)/2))?h=m:n=m,d=g,!(g=g[r|=u<<1]))return d[r]=e,a;var l=+a._x.call(null,g.data);var p=+a._y.call(null,g.data);if(b===l&&c===p)return e.next=g,d?d[r]=e:a._root=e,a;do d=d?d[r]=Array(4):a._root=Array(4),(r=b>=(v=(f+k)/2))?f=
v:k=v,(u=c>=(m=(h+n)/2))?h=m:n=m;while((r|=u<<1)===(u=(p>=m)<<1|l>=v));return d[u]=g,d[r]=e,a}function h(a){return a[0]}function e(a){return a[1]}function f(a,g,c){g=new b(null==g?h:g,null==c?e:c,NaN,NaN,NaN,NaN);return null==a?g:g.addAll(a)}function b(a,b,c,e,f,h){this._x=a;this._y=b;this._x0=c;this._y0=e;this._x1=f;this._y1=h;this._root=void 0}function n(a){for(var b={data:a.data},c=b;a=a.next;)c=c.next={data:a.data};return b}var m=function(a,b,c,e,f){this.node=a;this.x0=b;this.y0=c;this.x1=e;this.y1=
f},r=f.prototype=b.prototype;r.copy=function(){var a=new b(this._x,this._y,this._x0,this._y0,this._x1,this._y1),e=this._root,c,f;if(!e)return a;if(!e.length)return a._root=n(e),a;for(c=[{source:e,target:a._root=Array(4)}];e=c.pop();)for(var h=0;4>h;++h)if(f=e.source[h])f.length?c.push({source:f,target:e.target[h]=Array(4)}):e.target[h]=n(f);return a};r.add=function(a){var b=+this._x.call(null,a),c=+this._y.call(null,a);return k(this.cover(b,c),b,c,a)};r.addAll=function(a){var b,c,d=a.length,e,f,h=
Array(d),n=Array(d),m=Infinity,r=Infinity,u=-Infinity,l=-Infinity;for(c=0;c<d;++c)isNaN(e=+this._x.call(null,b=a[c]))||isNaN(f=+this._y.call(null,b))||(h[c]=e,n[c]=f,e<m&&(m=e),e>u&&(u=e),f<r&&(r=f),f>l&&(l=f));u<m&&(m=this._x0,u=this._x1);l<r&&(r=this._y0,l=this._y1);this.cover(m,r).cover(u,l);for(c=0;c<d;++c)k(this,h[c],n[c],a[c]);return this};r.cover=function(a,b){if(isNaN(a=+a)||isNaN(b=+b))return this;var c=this._x0,d=this._y0,e=this._x1,g=this._y1;if(isNaN(c))e=(c=Math.floor(a))+1,g=(d=Math.floor(b))+
1;else if(c>a||a>e||d>b||b>g){var f=e-c,h=this._root,k;switch(k=(b<(d+g)/2)<<1|a<(c+e)/2){case 0:do{var n=Array(4);n[k]=h;h=n}while(f*=2,e=c+f,g=d+f,a>e||b>g);break;case 1:do n=Array(4),n[k]=h,h=n;while(f*=2,c=e-f,g=d+f,c>a||b>g);break;case 2:do n=Array(4),n[k]=h,h=n;while(f*=2,e=c+f,d=g-f,a>e||d>b);break;case 3:do n=Array(4),n[k]=h,h=n;while(f*=2,c=e-f,d=g-f,c>a||d>b)}this._root&&this._root.length&&(this._root=h)}else return this;this._x0=c;this._y0=d;this._x1=e;this._y1=g;return this};r.data=function(){var a=
[];this.visit(function(b){if(!b.length){do a.push(b.data);while(b=b.next)}});return a};r.extent=function(a){return arguments.length?this.cover(+a[0][0],+a[0][1]).cover(+a[1][0],+a[1][1]):isNaN(this._x0)?void 0:[[this._x0,this._y0],[this._x1,this._y1]]};r.find=function(a,b,c){var d=this._x0,e=this._y0,g,f,h,k,n=this._x1,r=this._y1,u=[],l=this._root,p;l&&u.push(new m(l,d,e,n,r));null==c?c=Infinity:(d=a-c,e=b-c,n=a+c,r=b+c,c*=c);for(;p=u.pop();)if(!(!(l=p.node)||(g=p.x0)>n||(f=p.y0)>r||(h=p.x1)<d||(k=
p.y1)<e))if(l.length){p=(g+h)/2;var q=(f+k)/2;u.push(new m(l[3],p,q,h,k),new m(l[2],g,q,p,k),new m(l[1],p,f,h,q),new m(l[0],g,f,p,q));if(l=(b>=q)<<1|a>=p)p=u[u.length-1],u[u.length-1]=u[u.length-1-l],u[u.length-1-l]=p}else if(p=a-+this._x.call(null,l.data),q=b-+this._y.call(null,l.data),p=p*p+q*q,p<c){var M=Math.sqrt(c=p);d=a-M;e=b-M;n=a+M;r=b+M;M=l.data}return M};r.remove=function(a){if(isNaN(n=+this._x.call(null,a))||isNaN(m=+this._y.call(null,a)))return this;var b,c=this._root,d,e=this._x0,f=this._y0,
h=this._x1,k=this._y1,n,m,r,u,l,p;if(!c)return this;if(c.length)for(;;){(l=n>=(r=(e+h)/2))?e=r:h=r;(p=m>=(u=(f+k)/2))?f=u:k=u;if(!(b=c,c=c[l|=p<<1]))return this;if(!c.length)break;if(b[l+1&3]||b[l+2&3]||b[l+3&3]){var q=b;var M=l}}for(;c.data!==a;)if(!(d=c,c=c.next))return this;(a=c.next)&&delete c.next;if(d)return a?d.next=a:delete d.next,this;if(!b)return this._root=a,this;a?b[l]=a:delete b[l];(c=b[0]||b[1]||b[2]||b[3])&&c===(b[3]||b[2]||b[1]||b[0])&&!c.length&&(q?q[M]=c:this._root=c);return this};
r.removeAll=function(a){for(var b=0,c=a.length;b<c;++b)this.remove(a[b]);return this};r.root=function(){return this._root};r.size=function(){var a=0;this.visit(function(b){if(!b.length){do++a;while(b=b.next)}});return a};r.visit=function(a){var b=[],c,d=this._root,e,f,h,k;for(d&&b.push(new m(d,this._x0,this._y0,this._x1,this._y1));c=b.pop();)if(!a(d=c.node,f=c.x0,h=c.y0,k=c.x1,c=c.y1)&&d.length){var n=(f+k)/2,r=(h+c)/2;(e=d[3])&&b.push(new m(e,n,r,k,c));(e=d[2])&&b.push(new m(e,f,r,n,c));(e=d[1])&&
b.push(new m(e,n,h,k,r));(e=d[0])&&b.push(new m(e,f,h,n,r))}return this};r.visitAfter=function(a){var b=[],c=[],d;for(this._root&&b.push(new m(this._root,this._x0,this._y0,this._x1,this._y1));d=b.pop();){var e=d.node;if(e.length){var f,h=d.x0,k=d.y0,n=d.x1,r=d.y1,u=(h+n)/2,l=(k+r)/2;(f=e[0])&&b.push(new m(f,h,k,u,l));(f=e[1])&&b.push(new m(f,u,k,n,l));(f=e[2])&&b.push(new m(f,h,l,u,r));(f=e[3])&&b.push(new m(f,u,l,n,r))}c.push(d)}for(;d=c.pop();)a(d.node,d.x0,d.y0,d.x1,d.y1);return this};r.x=function(a){return arguments.length?
(this._x=a,this):this._x};r.y=function(a){return arguments.length?(this._y=a,this):this._y};a.quadtree=f;Object.defineProperty(a,"__esModule",{value:!0})})},{}],151:[function(a,p,l){(function(m,k){"object"===typeof l&&"undefined"!==typeof p?k(l,a("d3-array"),a("d3-collection"),a("d3-shape"),a("elementary-circuits-directed-graph")):k(m.d3=m.d3||{},m.d3,m.d3,m.d3,null)})(this,function(a,k,h,e,f){function b(a){return a.target.depth}function n(a,b){return a.sourceLinks.length?a.depth:b-1}function m(a){return function(){return a}}
function r(a,b){return g(a.source,b.source)||a.index-b.index}function d(a,b){return g(a.target,b.target)||a.index-b.index}function g(a,b){return a.partOfCycle===b.partOfCycle?a.y0-b.y0:"top"===a.circularLinkType||"bottom"===b.circularLinkType?-1:1}function c(a){return a.value}function v(a){return(a.y0+a.y1)/2}function t(a){return v(a.source)}function y(a){return v(a.target)}function B(a){return a.index}function D(a){return a.nodes}function l(a){return a.links}function A(a,b){a=a.get(b);if(!a)throw Error("missing: "+
b);return a}function C(a,b,c){var d=0;if(null===c){var e=[];for(b=0;b<a.links.length;b++){var g=a.links[b],h=g.source.index;g=g.target.index;e[h]||(e[h]=[]);e[g]||(e[g]=[]);-1===e[h].indexOf(g)&&e[h].push(g)}e=f(e);e.sort(function(a,b){return a.length-b.length});var k={};for(b=0;b<e.length;b++){h=e[b];g=!1;for(var n=0;n<h.length-1;n++)if(k[h[n]]||(k[h[n]]={}),k[h[n]]&&k[h[n]][h[n+1]]){g=!0;break}g||(h=h.slice(-2),k[h[0]][h[1]]=!0)}a.links.forEach(function(a){var b=a.target.index,c=a.source.index;
b===c||k[c]&&k[c][b]?(a.circular=!0,a.circularLinkID=d,d+=1):a.circular=!1})}else a.links.forEach(function(a){a.source[c]<a.target[c]?a.circular=!1:(a.circular=!0,a.circularLinkID=d,d+=1)})}function p(a,b){var c=0,d=0;a.links.forEach(function(e){e.circular&&(e.circularLinkType=e.source.circularLinkType||e.target.circularLinkType?e.source.circularLinkType?e.source.circularLinkType:e.target.circularLinkType:c<d?"top":"bottom","top"==e.circularLinkType?c+=1:d+=1,a.nodes.forEach(function(a){if(b(a)==
b(e.source)||b(a)==b(e.target))a.circularLinkType=e.circularLinkType}))});a.links.forEach(function(a){a.circular&&(a.source.circularLinkType==a.target.circularLinkType&&(a.circularLinkType=a.source.circularLinkType),z(a,b)&&(a.circularLinkType=a.source.circularLinkType))})}function q(a){return Math.atan(Math.abs(a.target.x0-a.source.x1)/Math.abs(a.y1-a.y0))}function E(a,b){var c=0;a.sourceLinks.forEach(function(a){c=a.circular&&!z(a,b)?c+1:c});var d=0;a.targetLinks.forEach(function(a){d=a.circular&&
!z(a,b)?d+1:d});return c+d}function H(a){var b=0;a.source.sourceLinks.forEach(function(a){b=a.circular?b+1:b});var c=0;a.target.targetLinks.forEach(function(a){c=a.circular?c+1:c});return 1<b||1<c?!1:!0}function M(a,b,c){a.sort(I);a.forEach(function(d,e){var g=0;if(!z(d,c)||!H(d)){var f=0;for(f;f<e;f++){var h=a[e];var k=a[f];h=h.source.column<k.target.column?!1:h.target.column>k.source.column?!1:!0;h&&(h=a[f].circularPathData.verticalBuffer+a[f].width/2+b,g=h>g?h:g)}}d.circularPathData.verticalBuffer=
g+d.width/2});return a}function O(a,b,c,d){var g=k.min(a.links,function(a){return a.source.y0});a.links.forEach(function(a){a.circular&&(a.circularPathData={})});var f=a.links.filter(function(a){return"top"==a.circularLinkType});M(f,b,d);f=a.links.filter(function(a){return"bottom"==a.circularLinkType});M(f,b,d);a.links.forEach(function(f){if(f.circular){f.circularPathData.arcRadius=f.width+10;f.circularPathData.leftNodeBuffer=5;f.circularPathData.rightNodeBuffer=5;f.circularPathData.sourceWidth=f.source.x1-
f.source.x0;f.circularPathData.sourceX=f.source.x0+f.circularPathData.sourceWidth;f.circularPathData.targetX=f.target.x0;f.circularPathData.sourceY=f.y0;f.circularPathData.targetY=f.y1;if(z(f,d)&&H(f))f.circularPathData.leftSmallArcRadius=10+f.width/2,f.circularPathData.leftLargeArcRadius=10+f.width/2,f.circularPathData.rightSmallArcRadius=10+f.width/2,f.circularPathData.rightLargeArcRadius=10+f.width/2,"bottom"==f.circularLinkType?(f.circularPathData.verticalFullExtent=f.source.y1+25+f.circularPathData.verticalBuffer,
f.circularPathData.verticalLeftInnerExtent=f.circularPathData.verticalFullExtent-f.circularPathData.leftLargeArcRadius,f.circularPathData.verticalRightInnerExtent=f.circularPathData.verticalFullExtent-f.circularPathData.rightLargeArcRadius):(f.circularPathData.verticalFullExtent=f.source.y0-25-f.circularPathData.verticalBuffer,f.circularPathData.verticalLeftInnerExtent=f.circularPathData.verticalFullExtent+f.circularPathData.leftLargeArcRadius,f.circularPathData.verticalRightInnerExtent=f.circularPathData.verticalFullExtent+
f.circularPathData.rightLargeArcRadius);else{var h=f.source.column,k=f.circularLinkType,n=a.links.filter(function(a){return a.source.column==h&&a.circularLinkType==k});"bottom"==f.circularLinkType?n.sort(N):n.sort(Q);var t=0;n.forEach(function(a,c){a.circularLinkID==f.circularLinkID&&(f.circularPathData.leftSmallArcRadius=10+f.width/2+t,f.circularPathData.leftLargeArcRadius=10+f.width/2+c*b+t);t+=a.width});h=f.target.column;n=a.links.filter(function(a){return a.target.column==h&&a.circularLinkType==
k});"bottom"==f.circularLinkType?n.sort(R):n.sort(L);t=0;n.forEach(function(a,c){a.circularLinkID==f.circularLinkID&&(f.circularPathData.rightSmallArcRadius=10+f.width/2+t,f.circularPathData.rightLargeArcRadius=10+f.width/2+c*b+t);t+=a.width});"bottom"==f.circularLinkType?(f.circularPathData.verticalFullExtent=Math.max(c,f.source.y1,f.target.y1)+25+f.circularPathData.verticalBuffer,f.circularPathData.verticalLeftInnerExtent=f.circularPathData.verticalFullExtent-f.circularPathData.leftLargeArcRadius,
f.circularPathData.verticalRightInnerExtent=f.circularPathData.verticalFullExtent-f.circularPathData.rightLargeArcRadius):(f.circularPathData.verticalFullExtent=g-25-f.circularPathData.verticalBuffer,f.circularPathData.verticalLeftInnerExtent=f.circularPathData.verticalFullExtent+f.circularPathData.leftLargeArcRadius,f.circularPathData.verticalRightInnerExtent=f.circularPathData.verticalFullExtent+f.circularPathData.rightLargeArcRadius)}f.circularPathData.leftInnerExtent=f.circularPathData.sourceX+
f.circularPathData.leftNodeBuffer;f.circularPathData.rightInnerExtent=f.circularPathData.targetX-f.circularPathData.rightNodeBuffer;f.circularPathData.leftFullExtent=f.circularPathData.sourceX+f.circularPathData.leftLargeArcRadius+f.circularPathData.leftNodeBuffer;f.circularPathData.rightFullExtent=f.circularPathData.targetX-f.circularPathData.rightLargeArcRadius-f.circularPathData.rightNodeBuffer}f.circular?f.path="top"==f.circularLinkType?"M"+f.circularPathData.sourceX+" "+f.circularPathData.sourceY+
" L"+f.circularPathData.leftInnerExtent+" "+f.circularPathData.sourceY+" A"+f.circularPathData.leftLargeArcRadius+" "+f.circularPathData.leftSmallArcRadius+" 0 0 0 "+f.circularPathData.leftFullExtent+" "+(f.circularPathData.sourceY-f.circularPathData.leftSmallArcRadius)+" L"+f.circularPathData.leftFullExtent+" "+f.circularPathData.verticalLeftInnerExtent+" A"+f.circularPathData.leftLargeArcRadius+" "+f.circularPathData.leftLargeArcRadius+" 0 0 0 "+f.circularPathData.leftInnerExtent+" "+f.circularPathData.verticalFullExtent+
" L"+f.circularPathData.rightInnerExtent+" "+f.circularPathData.verticalFullExtent+" A"+f.circularPathData.rightLargeArcRadius+" "+f.circularPathData.rightLargeArcRadius+" 0 0 0 "+f.circularPathData.rightFullExtent+" "+f.circularPathData.verticalRightInnerExtent+" L"+f.circularPathData.rightFullExtent+" "+(f.circularPathData.targetY-f.circularPathData.rightSmallArcRadius)+" A"+f.circularPathData.rightLargeArcRadius+" "+f.circularPathData.rightSmallArcRadius+" 0 0 0 "+f.circularPathData.rightInnerExtent+
" "+f.circularPathData.targetY+" L"+f.circularPathData.targetX+" "+f.circularPathData.targetY:"M"+f.circularPathData.sourceX+" "+f.circularPathData.sourceY+" L"+f.circularPathData.leftInnerExtent+" "+f.circularPathData.sourceY+" A"+f.circularPathData.leftLargeArcRadius+" "+f.circularPathData.leftSmallArcRadius+" 0 0 1 "+f.circularPathData.leftFullExtent+" "+(f.circularPathData.sourceY+f.circularPathData.leftSmallArcRadius)+" L"+f.circularPathData.leftFullExtent+" "+f.circularPathData.verticalLeftInnerExtent+
" A"+f.circularPathData.leftLargeArcRadius+" "+f.circularPathData.leftLargeArcRadius+" 0 0 1 "+f.circularPathData.leftInnerExtent+" "+f.circularPathData.verticalFullExtent+" L"+f.circularPathData.rightInnerExtent+" "+f.circularPathData.verticalFullExtent+" A"+f.circularPathData.rightLargeArcRadius+" "+f.circularPathData.rightLargeArcRadius+" 0 0 1 "+f.circularPathData.rightFullExtent+" "+f.circularPathData.verticalRightInnerExtent+" L"+f.circularPathData.rightFullExtent+" "+(f.circularPathData.targetY+
f.circularPathData.rightSmallArcRadius)+" A"+f.circularPathData.rightLargeArcRadius+" "+f.circularPathData.rightSmallArcRadius+" 0 0 1 "+f.circularPathData.rightInnerExtent+" "+f.circularPathData.targetY+" L"+f.circularPathData.targetX+" "+f.circularPathData.targetY:(n=e.linkHorizontal().source(function(a){return[a.source.x0+(a.source.x1-a.source.x0),a.y0]}).target(function(a){return[a.target.x0,a.y1]}),f.path=n(f))})}function I(a,b){return ca(a)==ca(b)?"bottom"==a.circularLinkType?N(a,b):Q(a,b):
ca(b)-ca(a)}function Q(a,b){return a.y0-b.y0}function N(a,b){return b.y0-a.y0}function L(a,b){return a.y1-b.y1}function R(a,b){return b.y1-a.y1}function ca(a){return a.target.column-a.source.column}function w(a,b){var c=q(a);b=(b.target.x0-b.source.x1)/Math.tan(c);return"up"==fa(a)?a.y1+b:a.y1-b}function x(a,b){var c=q(a);b=(b.target.x0-b.source.x1)/Math.tan(c);return"up"==fa(a)?a.y1-b:a.y1+b}function Y(a,b,c,d){a.links.forEach(function(e){if(!e.circular&&1<e.target.column-e.source.column){var g=
e.source.column+1,f=e.target.column-1,h=1,k=f-g+1;for(h=1;g<=f;g++,h++)a.nodes.forEach(function(f){if(f.column==g){var n=h/(k+1),t=Math.pow(1-n,3)*e.y0+3*n*Math.pow(1-n,2)*e.y0+3*Math.pow(n,2)*(1-n)*e.y1+Math.pow(n,3)*e.y1;n=t-e.width/2;t+=e.width/2;if(n>f.y0&&n<f.y1){var v=f.y1-n+10;v="bottom"==f.circularLinkType?v:-v;f=ia(f,v,b,c);a.nodes.forEach(function(a){d(a)!=d(f)&&a.column==f.column&&(f.y0>a.y0&&f.y0<a.y1||f.y1>a.y0&&f.y1<a.y1||f.y0<a.y0&&f.y1>a.y1)&&ia(a,v,b,c)})}else t>f.y0&&t<f.y1?(v=t-
f.y0+10,f=ia(f,v,b,c),a.nodes.forEach(function(a){d(a)!=d(f)&&a.column==f.column&&a.y0<f.y1&&a.y1>f.y1&&ia(a,v,b,c)})):n<f.y0&&t>f.y1&&(v=t-f.y0+10,f=ia(f,v,b,c),a.nodes.forEach(function(a){d(a)!=d(f)&&a.column==f.column&&a.y0<f.y1&&a.y1>f.y1&&ia(a,v,b,c)}))}})}})}function ia(a,b,c,d){a.y0+b>=c&&a.y1+b<=d&&(a.y0+=b,a.y1+=b,a.targetLinks.forEach(function(a){a.y1+=b}),a.sourceLinks.forEach(function(a){a.y0+=b}));return a}function S(a,b,c,d){a.nodes.forEach(function(e){d&&e.y+(e.y1-e.y0)>b&&(e.y-=e.y+
(e.y1-e.y0)-b);var g=a.links.filter(function(a){return c(a.source)==c(e)}),f=g.length;1<f&&g.sort(function(a,b){if(!a.circular&&!b.circular)if(a.target.column!=b.target.column&&fa(a)==fa(b)){if(a.target.column>b.target.column)return b=x(b,a),a.y1-b;if(b.target.column>a.target.column)return x(a,b)-b.y1}else return a.y1-b.y1;if(a.circular&&!b.circular)return"top"==a.circularLinkType?-1:1;if(b.circular&&!a.circular)return"top"==b.circularLinkType?1:-1;if(a.circular&&b.circular)return a.circularLinkType===
b.circularLinkType&&"top"==a.circularLinkType?a.target.column===b.target.column?a.target.y1-b.target.y1:b.target.column-a.target.column:a.circularLinkType===b.circularLinkType&&"bottom"==a.circularLinkType?a.target.column===b.target.column?b.target.y1-a.target.y1:a.target.column-b.target.column:"top"==a.circularLinkType?-1:1});var h=e.y0;g.forEach(function(a){a.y0=h+a.width/2;h+=a.width});g.forEach(function(a,b){if("bottom"==a.circularLinkType){b+=1;var c=0;for(b;b<f;b++)c+=g[b].width;a.y0=e.y1-c-
a.width/2}})})}function W(a,b,c){a.nodes.forEach(function(b){var d=a.links.filter(function(a){return c(a.target)==c(b)}),e=d.length;1<e&&d.sort(function(a,b){if(!a.circular&&!b.circular)if(a.source.column!=b.source.column&&fa(a)==fa(b)){if(b.source.column<a.source.column)return b=w(b,a),a.y0-b;if(a.source.column<b.source.column)return w(a,b)-b.y0}else return a.y0-b.y0;if(a.circular&&!b.circular)return"top"==a.circularLinkType?-1:1;if(b.circular&&!a.circular)return"top"==b.circularLinkType?1:-1;if(a.circular&&
b.circular)return a.circularLinkType===b.circularLinkType&&"top"==a.circularLinkType?a.source.column===b.source.column?a.source.y1-b.source.y1:a.source.column-b.source.column:a.circularLinkType===b.circularLinkType&&"bottom"==a.circularLinkType?a.source.column===b.source.column?a.source.y1-b.source.y1:b.source.column-a.source.column:"top"==a.circularLinkType?-1:1});var g=b.y0;d.forEach(function(a){a.y1=g+a.width/2;g+=a.width});d.forEach(function(a,c){if("bottom"==a.circularLinkType){c+=1;var g=0;
for(c;c<e;c++)g+=d[c].width;a.y1=b.y1-g-a.width/2}})})}function fa(a){return 0<a.y0-a.y1?"up":"down"}function z(a,b){return b(a.source)==b(a.target)}function ha(a,b,c){var d=a.nodes;a=a.links;var e=!1,g=!1;a.forEach(function(a){"top"==a.circularLinkType?e=!0:"bottom"==a.circularLinkType&&(g=!0)});if(0==e||0==g){var f=k.min(d,function(a){return a.y0}),h=k.max(d,function(a){return a.y1}),n=(c-b)/(h-f);d.forEach(function(a){var b=(a.y1-a.y0)*n;a.y0=(a.y0-f)*n;a.y1=a.y0+b});a.forEach(function(a){a.y0=
(a.y0-f)*n;a.y1=(a.y1-f)*n;a.width*=n})}}f=f&&f.hasOwnProperty("default")?f["default"]:f;$jscomp.initSymbol();$jscomp.initSymbol();$jscomp.initSymbolIterator();var ea="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(a){return typeof a}:function(a){$jscomp.initSymbol();$jscomp.initSymbol();$jscomp.initSymbol();return a&&"function"===typeof Symbol&&a.constructor===Symbol&&a!==Symbol.prototype?"symbol":typeof a};a.sankeyCircular=function(){function a(){var a={nodes:ca.apply(null,
arguments),links:w.apply(null,arguments)};b(a);C(a,R,ia);e(a);G(a);p(a,R);q(a,x,R);J(a);for(var c=0;4>c;c++)S(a,I,R),W(a,I,R),Y(a,P,I,R),S(a,I,R),W(a,I,R);ha(a,P,I);O(a,T,I,R);return a}function b(a){a.nodes.forEach(function(a,b){a.index=b;a.sourceLinks=[];a.targetLinks=[]});var b=h.map(a.nodes,R);a.links.forEach(function(a,c){a.index=c;c=a.source;var d=a.target;"object"!==("undefined"===typeof c?"undefined":ea(c))&&(c=a.source=A(b,c));"object"!==("undefined"===typeof d?"undefined":ea(d))&&(d=a.target=
A(b,d));c.sourceLinks.push(a);d.targetLinks.push(a)});return a}function e(a){a.nodes.forEach(function(a){a.partOfCycle=!1;a.value=Math.max(k.sum(a.sourceLinks,c),k.sum(a.targetLinks,c));a.sourceLinks.forEach(function(b){b.circular&&(a.partOfCycle=!0,a.circularLinkType=b.circularLinkType)});a.targetLinks.forEach(function(b){b.circular&&(a.partOfCycle=!0,a.circularLinkType=b.circularLinkType)})})}function f(a){var b=0,c=0,d=0,e=0,g=k.max(a.nodes,function(a){return a.column});a.links.forEach(function(a){a.circular&&
("top"==a.circularLinkType?b+=a.width:c+=a.width,0==a.target.column&&(e+=a.width),a.source.column==g&&(d+=a.width))});b=0<b?b+25+10:b;c=0<c?c+25+10:c;d=0<d?d+25+10:d;e=0<e?e+25+10:e;return{top:b,bottom:c,left:e,right:d}}function u(a,b){var c=k.max(a.nodes,function(a){return a.column}),d=N-L,e=I-P;d/=d+b.right+b.left;e/=e+b.top+b.bottom;L=L*d+b.left;N=0==b.right?N:N*d;P=P*e+b.top;I*=e;a.nodes.forEach(function(a){a.x0=L+(N-L-H)/c*a.column;a.x1=a.x0+H});return e}function G(a){var b;var c=a.nodes;var d=
[];for(b=0;c.length;++b,c=d,d=[])c.forEach(function(a){a.depth=b;a.sourceLinks.forEach(function(a){0>d.indexOf(a.target)&&!a.circular&&d.push(a.target)})});c=a.nodes;d=[];for(b=0;c.length;++b,c=d,d=[])c.forEach(function(a){a.height=b;a.targetLinks.forEach(function(a){0>d.indexOf(a.source)&&!a.circular&&d.push(a.source)})});a.nodes.forEach(function(a){a.column=Math.floor(Q.call(null,a,b))})}function q(a,b,d){function e(a,b){var c=m.length;m.forEach(function(d){var e=d.length,g=d[0].depth;d.forEach(function(d){if((d.sourceLinks.length||
d.targetLinks.length)&&!(d.partOfCycle&&0<E(d,b)))if(0==g&&1==e){var f=d.y1-d.y0;d.y0=I/2-f/2;d.y1=I/2+f/2}else if(g==c-1&&1==e)f=d.y1-d.y0,d.y0=I/2-f/2,d.y1=I/2+f/2;else{f=k.mean(d.sourceLinks,y);var h=k.mean(d.targetLinks,t);f=((f&&h?(f+h)/2:f||h)-v(d))*a;d.y0+=f;d.y1+=f}})})}function n(){m.forEach(function(a){var b=P,c=a.length,d;a.sort(g);for(d=0;d<c;++d){var e=a[d];var f=b-e.y0;0<f&&(e.y0+=f,e.y1+=f);b=e.y1+M}f=b-M-I;if(0<f)for(b=e.y0-=f,e.y1-=f,d=c-2;0<=d;--d)e=a[d],f=e.y1+M-b,0<f&&(e.y0-=f,
e.y1-=f),b=e.y0})}var m=h.nest().key(function(a){return a.column}).sortKeys(k.ascending).entries(a.nodes).map(function(a){return a.values});(function(b){if(U){var d=Infinity;m.forEach(function(a){a=I*U/(a.length+1);d=a<d?a:d});M=d}var e=k.min(m,function(a){return(I-P-(a.length-1)*M)/k.sum(a,c)});e*=.3;a.links.forEach(function(a){a.width=a.value*e});var g=f(a),h=u(a,g);e*=h;a.links.forEach(function(a){a.width=a.value*e});m.forEach(function(a){var c=a.length;a.forEach(function(a,d){a.depth==m.length-
1&&1==c?a.y0=I/2-a.value*e:0==a.depth&&1==c?a.y0=I/2-a.value*e:a.partOfCycle?0==E(a,b)?a.y0=I/2+d:a.y0="top"==a.circularLinkType?P+d:I-a.value*e-d:a.y0=0==g.top||0==g.bottom?(I-P)/c*d:(I-P)/2-c/2+d;a.y1=a.y0+a.value*e})})})(d);n();for(var r=1;0<b;--b)e(r*=.99,d),n()}function J(a){a.nodes.forEach(function(a){a.sourceLinks.sort(d);a.targetLinks.sort(r)});a.nodes.forEach(function(a){var b=a.y0,c=b,d=a.y1,e=d;a.sourceLinks.forEach(function(a){a.circular?(a.y0=d-a.width/2,d-=a.width):(a.y0=b+a.width/2,
b+=a.width)});a.targetLinks.forEach(function(a){a.circular?(a.y1=e-a.width/2,e-=a.width):(a.y1=c+a.width/2,c+=a.width)})})}var L=0,P=0,N=1,I=1,H=24,M,R=B,Q=n,ca=D,w=l,x=32,T=2,U,ia=null;a.nodeId=function(b){return arguments.length?(R="function"===typeof b?b:m(b),a):R};a.nodeAlign=function(b){return arguments.length?(Q="function"===typeof b?b:m(b),a):Q};a.nodeWidth=function(b){return arguments.length?(H=+b,a):H};a.nodePadding=function(b){return arguments.length?(M=+b,a):M};a.nodes=function(b){return arguments.length?
(ca="function"===typeof b?b:m(b),a):ca};a.links=function(b){return arguments.length?(w="function"===typeof b?b:m(b),a):w};a.size=function(b){return arguments.length?(L=P=0,N=+b[0],I=+b[1],a):[N-L,I-P]};a.extent=function(b){return arguments.length?(L=+b[0][0],N=+b[1][0],P=+b[0][1],I=+b[1][1],a):[[L,P],[N,I]]};a.iterations=function(b){return arguments.length?(x=+b,a):x};a.circularLinkGap=function(b){return arguments.length?(T=+b,a):T};a.nodePaddingRatio=function(b){return arguments.length?(U=+b,a):
U};a.sortNodes=function(b){return arguments.length?(ia=b,a):ia};a.update=function(a){p(a,R);J(a);a.links.forEach(function(a){a.circular&&(a.circularLinkType=a.y0+a.y1<I?"top":"bottom",a.source.circularLinkType=a.circularLinkType,a.target.circularLinkType=a.circularLinkType)});S(a,I,R,!1);W(a,I,R);O(a,T,I,R);return a};return a};a.sankeyCenter=function(a){return a.targetLinks.length?a.depth:a.sourceLinks.length?k.min(a.sourceLinks,b)-1:0};a.sankeyLeft=function(a){return a.depth};a.sankeyRight=function(a,
b){return b-1-a.height};a.sankeyJustify=n;Object.defineProperty(a,"__esModule",{value:!0})})},{"d3-array":142,"d3-collection":143,"d3-shape":152,"elementary-circuits-directed-graph":164}],152:[function(a,p,l){(function(m,k){"object"===typeof l&&"undefined"!==typeof p?k(l,a("d3-path")):k(m.d3=m.d3||{},m.d3)})(this,function(a,k){function h(a){return function(){return a}}function e(a){return 1<=a?Ba:-1>=a?-Ba:Math.asin(a)}function f(a){return a.innerRadius}function b(a){return a.outerRadius}function n(a){return a.startAngle}
function m(a){return a.endAngle}function r(a){return a&&a.padAngle}function d(a,b,c,d,e,g,f){var h=a-c,k=b-d;f=(f?g:-g)/X(h*h+k*k);k*=f;h*=-f;var n=a+k,t=b+h,v=c+k,m=d+h;c=(n+v)/2;d=(t+m)/2;b=v-n;a=m-t;f=b*b+a*a;g=e-g;m=n*m-v*t;var r=(0>a?-1:1)*X(na(0,g*g*f-m*m));n=(m*a-b*r)/f;t=(-m*b-a*r)/f;v=(m*a+b*r)/f;b=(-m*b+a*r)/f;a=n-c;f=t-d;c=v-c;d=b-d;a*a+f*f>c*c+d*d&&(n=v,t=b);return{cx:n,cy:t,x01:-k,y01:-h,x11:n*(e/g-1),y11:t*(e/g-1)}}function g(a){this._context=a}function c(a){return new g(a)}function v(a){return a[0]}
function t(a){return a[1]}function y(){function a(a){var c,h=a.length,t,v=!1,m;null==g&&(n=f(m=k.path()));for(c=0;c<=h;++c)!(c<h&&e(t=a[c],c,a))===v&&((v=!v)?n.lineStart():n.lineEnd()),v&&n.point(+b(t,c,a),+d(t,c,a));if(m)return n=null,m+""||null}var b=v,d=t,e=h(!0),g=null,f=c,n=null;a.x=function(c){return arguments.length?(b="function"===typeof c?c:h(+c),a):b};a.y=function(b){return arguments.length?(d="function"===typeof b?b:h(+b),a):d};a.defined=function(b){return arguments.length?(e="function"===
typeof b?b:h(!!b),a):e};a.curve=function(b){return arguments.length?(f=b,null!=g&&(n=f(g)),a):f};a.context=function(b){return arguments.length?(null==b?g=n=null:n=f(g=b),a):g};return a}function B(){function a(a){var b,c,h=a.length,t,v=!1,y,B=Array(h),D=Array(h);null==m&&(u=r(y=k.path()));for(b=0;b<=h;++b){if(!(b<h&&n(t=a[b],b,a))===v)if(v=!v){var l=b;u.areaStart();u.lineStart()}else{u.lineEnd();u.lineStart();for(c=b-1;c>=l;--c)u.point(B[c],D[c]);u.lineEnd();u.areaEnd()}v&&(B[b]=+d(t,b,a),D[b]=+g(t,
b,a),u.point(e?+e(t,b,a):B[b],f?+f(t,b,a):D[b]))}if(y)return u=null,y+""||null}function b(){return y().defined(n).curve(r).context(m)}var d=v,e=null,g=h(0),f=t,n=h(!0),m=null,r=c,u=null;a.x=function(b){return arguments.length?(d="function"===typeof b?b:h(+b),e=null,a):d};a.x0=function(b){return arguments.length?(d="function"===typeof b?b:h(+b),a):d};a.x1=function(b){return arguments.length?(e=null==b?null:"function"===typeof b?b:h(+b),a):e};a.y=function(b){return arguments.length?(g="function"===
typeof b?b:h(+b),f=null,a):g};a.y0=function(b){return arguments.length?(g="function"===typeof b?b:h(+b),a):g};a.y1=function(b){return arguments.length?(f=null==b?null:"function"===typeof b?b:h(+b),a):f};a.lineX0=a.lineY0=function(){return b().x(d).y(g)};a.lineY1=function(){return b().x(d).y(f)};a.lineX1=function(){return b().x(e).y(g)};a.defined=function(b){return arguments.length?(n="function"===typeof b?b:h(!!b),a):n};a.curve=function(b){return arguments.length?(r=b,null!=m&&(u=r(m)),a):r};a.context=
function(b){return arguments.length?(null==b?m=u=null:u=r(m=b),a):m};return a}function D(a,b){return b<a?-1:b>a?1:b>=a?0:NaN}function l(a){return a}function A(a){this._curve=a}function C(a){function b(b){return new A(a(b))}b._curve=a;return b}function p(a){var b=a.curve;a.angle=a.x;delete a.x;a.radius=a.y;delete a.y;a.curve=function(a){return arguments.length?b(C(a)):b()._curve};return a}function q(){return p(y().curve(Ka))}function E(){var a=B().curve(Ka),b=a.curve,c=a.lineX0,d=a.lineX1,e=a.lineY0,
g=a.lineY1;a.angle=a.x;delete a.x;a.startAngle=a.x0;delete a.x0;a.endAngle=a.x1;delete a.x1;a.radius=a.y;delete a.y;a.innerRadius=a.y0;delete a.y0;a.outerRadius=a.y1;delete a.y1;a.lineStartAngle=function(){return p(c())};delete a.lineX0;a.lineEndAngle=function(){return p(d())};delete a.lineX1;a.lineInnerRadius=function(){return p(e())};delete a.lineY0;a.lineOuterRadius=function(){return p(g())};delete a.lineY1;a.curve=function(a){return arguments.length?b(C(a)):b()._curve};return a}function H(a,b){return[(b=
+b)*Math.cos(a-=Math.PI/2),b*Math.sin(a)]}function M(a){return a.source}function O(a){return a.target}function I(a){function b(){var b,h=Ua.call(arguments),n=c.apply(this,h),t=d.apply(this,h);f||(f=b=k.path());a(f,+e.apply(this,(h[0]=n,h)),+g.apply(this,h),+e.apply(this,(h[0]=t,h)),+g.apply(this,h));if(b)return f=null,b+""||null}var c=M,d=O,e=v,g=t,f=null;b.source=function(a){return arguments.length?(c=a,b):c};b.target=function(a){return arguments.length?(d=a,b):d};b.x=function(a){return arguments.length?
(e="function"===typeof a?a:h(+a),b):e};b.y=function(a){return arguments.length?(g="function"===typeof a?a:h(+a),b):g};b.context=function(a){return arguments.length?(f=null==a?null:a,b):f};return b}function Q(a,b,c,d,e){a.moveTo(b,c);a.bezierCurveTo(b=(b+d)/2,c,b,e,d,e)}function N(a,b,c,d,e){a.moveTo(b,c);a.bezierCurveTo(b,c=(c+e)/2,d,c,d,e)}function L(a,b,c,d,e){var g=H(b,c);b=H(b,c=(c+e)/2);c=H(d,c);d=H(d,e);a.moveTo(g[0],g[1]);a.bezierCurveTo(b[0],b[1],c[0],c[1],d[0],d[1])}function R(){}function ca(a,
b,c){a._context.bezierCurveTo((2*a._x0+a._x1)/3,(2*a._y0+a._y1)/3,(a._x0+2*a._x1)/3,(a._y0+2*a._y1)/3,(a._x0+4*a._x1+b)/6,(a._y0+4*a._y1+c)/6)}function w(a){this._context=a}function x(a){this._context=a}function Y(a){this._context=a}function ia(a,b){this._basis=new w(a);this._beta=b}function S(a,b,c){a._context.bezierCurveTo(a._x1+a._k*(a._x2-a._x0),a._y1+a._k*(a._y2-a._y0),a._x2+a._k*(a._x1-b),a._y2+a._k*(a._y1-c),a._x2,a._y2)}function W(a,b){this._context=a;this._k=(1-b)/6}function fa(a,b){this._context=
a;this._k=(1-b)/6}function z(a,b){this._context=a;this._k=(1-b)/6}function ha(a,b,c){var d=a._x1,e=a._y1,g=a._x2,f=a._y2;if(1E-12<a._l01_a){var h=2*a._l01_2a+3*a._l01_a*a._l12_a+a._l12_2a,k=3*a._l01_a*(a._l01_a+a._l12_a);d=(d*h-a._x0*a._l12_2a+a._x2*a._l01_2a)/k;e=(e*h-a._y0*a._l12_2a+a._y2*a._l01_2a)/k}1E-12<a._l23_a&&(h=2*a._l23_2a+3*a._l23_a*a._l12_a+a._l12_2a,k=3*a._l23_a*(a._l23_a+a._l12_a),g=(g*h+a._x1*a._l23_2a-b*a._l12_2a)/k,f=(f*h+a._y1*a._l23_2a-c*a._l12_2a)/k);a._context.bezierCurveTo(d,
e,g,f,a._x2,a._y2)}function ea(a,b){this._context=a;this._alpha=b}function ba(a,b){this._context=a;this._alpha=b}function la(a,b){this._context=a;this._alpha=b}function Z(a){this._context=a}function pa(a,b,c){var d=a._x1-a._x0;b-=a._x1;var e=(a._y1-a._y0)/(d||0>b&&-0);a=(c-a._y1)/(b||0>d&&-0);return((0>e?-1:1)+(0>a?-1:1))*Math.min(Math.abs(e),Math.abs(a),.5*Math.abs((e*b+a*d)/(d+b)))||0}function da(a,b){var c=a._x1-a._x0;return c?(3*(a._y1-a._y0)/c-b)/2:b}function F(a,b,c){var d=a._x0,e=a._x1,g=a._y1,
f=(e-d)/3;a._context.bezierCurveTo(d+f,a._y0+f*b,e-f,g-f*c,e,g)}function ja(a){this._context=a}function xa(a){this._context=new K(a)}function K(a){this._context=a}function ka(a){this._context=a}function wa(a){var b,c=a.length-1,d=Array(c),e=Array(c),g=Array(c);d[0]=0;e[0]=2;g[0]=a[0]+2*a[1];for(b=1;b<c-1;++b)d[b]=1,e[b]=4,g[b]=4*a[b]+2*a[b+1];d[c-1]=2;e[c-1]=7;g[c-1]=8*a[c-1]+a[c];for(b=1;b<c;++b){var f=d[b]/e[b-1];e[b]-=f;g[b]-=f*g[b-1]}d[c-1]=g[c-1]/e[c-1];for(b=c-2;0<=b;--b)d[b]=(g[b]-d[b+1])/
e[b];e[c-1]=(a[c]+d[c-1])/2;for(b=0;b<c-1;++b)e[b]=2*a[b+1]-d[b+1];return[d,e]}function ta(a,b){this._context=a;this._t=b}function aa(a,b){if(1<(f=a.length))for(var c=1,d,e,g=a[b[0]],f,h=g.length;c<f;++c)for(e=g,g=a[b[c]],d=0;d<h;++d)g[d][1]+=g[d][0]=isNaN(e[d][1])?e[d][0]:e[d][1]}function ma(a){a=a.length;for(var b=Array(a);0<=--a;)b[a]=a;return b}function Aa(a,b){return a[b]}function va(a){var b=a.map(sa);return ma(a).sort(function(a,c){return b[a]-b[c]})}function sa(a){for(var b=-1,c=0,d=a.length,
e,g=-Infinity;++b<d;)(e=+a[b][1])>g&&(g=e,c=b);return c}function Ca(a){var b=a.map(Ga);return ma(a).sort(function(a,c){return b[a]-b[c]})}function Ga(a){for(var b=0,c=-1,d=a.length,e;++c<d;)if(e=+a[c][1])b+=e;return b}var Ja=Math.abs,oa=Math.atan2,Ea=Math.cos,na=Math.max,ua=Math.min,Fa=Math.sin,X=Math.sqrt,Pa=Math.PI,Ba=Pa/2,Ia=2*Pa;g.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){(this._line||0!==this._line&&
1===this._point)&&this._context.closePath();this._line=1-this._line},point:function(a,b){a=+a;b=+b;switch(this._point){case 0:this._point=1;this._line?this._context.lineTo(a,b):this._context.moveTo(a,b);break;case 1:this._point=2;default:this._context.lineTo(a,b)}}};var Ka=C(c);A.prototype={areaStart:function(){this._curve.areaStart()},areaEnd:function(){this._curve.areaEnd()},lineStart:function(){this._curve.lineStart()},lineEnd:function(){this._curve.lineEnd()},point:function(a,b){this._curve.point(b*
Math.sin(a),b*-Math.cos(a))}};var Ua=Array.prototype.slice,Ya={draw:function(a,b){b=Math.sqrt(b/Pa);a.moveTo(b,0);a.arc(0,0,b,0,Ia)}},Cb={draw:function(a,b){b=Math.sqrt(b/5)/2;a.moveTo(-3*b,-b);a.lineTo(-b,-b);a.lineTo(-b,-3*b);a.lineTo(b,-3*b);a.lineTo(b,-b);a.lineTo(3*b,-b);a.lineTo(3*b,b);a.lineTo(b,b);a.lineTo(b,3*b);a.lineTo(-b,3*b);a.lineTo(-b,b);a.lineTo(-3*b,b);a.closePath()}},eb=Math.sqrt(1/3),Ta=2*eb,Wa={draw:function(a,b){b=Math.sqrt(b/Ta);var c=b*eb;a.moveTo(0,-b);a.lineTo(c,0);a.lineTo(0,
b);a.lineTo(-c,0);a.closePath()}},$a=Math.sin(Pa/10)/Math.sin(7*Pa/10),rb=Math.sin(Ia/10)*$a,mb=-Math.cos(Ia/10)*$a;$a={draw:function(a,b){b=Math.sqrt(.8908130915292852*b);var c=rb*b,d=mb*b;a.moveTo(0,-b);a.lineTo(c,d);for(var e=1;5>e;++e){var g=Ia*e/5,f=Math.cos(g);g=Math.sin(g);a.lineTo(g*b,-f*b);a.lineTo(f*c-g*d,g*c+f*d)}a.closePath()}};var cb={draw:function(a,b){b=Math.sqrt(b);var c=-b/2;a.rect(c,c,b,b)}},Hb=Math.sqrt(3),pb={draw:function(a,b){b=-Math.sqrt(b/(3*Hb));a.moveTo(0,2*b);a.lineTo(-Hb*
b,-b);a.lineTo(Hb*b,-b);a.closePath()}},Ra=Math.sqrt(3)/2,Jb=1/Math.sqrt(12),nb=3*(Jb/2+1),kc={draw:function(a,b){var c=Math.sqrt(b/nb);b=c/2;var d=c*Jb;c=c*Jb+c;var e=-b;a.moveTo(b,d);a.lineTo(b,c);a.lineTo(e,c);a.lineTo(-.5*b-Ra*d,Ra*b+-.5*d);a.lineTo(-.5*b-Ra*c,Ra*b+-.5*c);a.lineTo(-.5*e-Ra*c,Ra*e+-.5*c);a.lineTo(-.5*b+Ra*d,-.5*d-Ra*b);a.lineTo(-.5*b+Ra*c,-.5*c-Ra*b);a.lineTo(-.5*e+Ra*c,-.5*c-Ra*e);a.closePath()}},kb=[Ya,Cb,Wa,cb,$a,pb,kc];w.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=
NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN;this._point=0},lineEnd:function(){switch(this._point){case 3:ca(this,this._x1,this._y1);case 2:this._context.lineTo(this._x1,this._y1)}(this._line||0!==this._line&&1===this._point)&&this._context.closePath();this._line=1-this._line},point:function(a,b){a=+a;b=+b;switch(this._point){case 0:this._point=1;this._line?this._context.lineTo(a,b):this._context.moveTo(a,b);break;case 1:this._point=2;break;case 2:this._point=3,this._context.lineTo((5*
this._x0+this._x1)/6,(5*this._y0+this._y1)/6);default:ca(this,a,b)}this._x0=this._x1;this._x1=a;this._y0=this._y1;this._y1=b}};x.prototype={areaStart:R,areaEnd:R,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._y0=this._y1=this._y2=this._y3=this._y4=NaN;this._point=0},lineEnd:function(){switch(this._point){case 1:this._context.moveTo(this._x2,this._y2);this._context.closePath();break;case 2:this._context.moveTo((this._x2+2*this._x3)/3,(this._y2+2*this._y3)/3);this._context.lineTo((this._x3+
2*this._x2)/3,(this._y3+2*this._y2)/3);this._context.closePath();break;case 3:this.point(this._x2,this._y2),this.point(this._x3,this._y3),this.point(this._x4,this._y4)}},point:function(a,b){a=+a;b=+b;switch(this._point){case 0:this._point=1;this._x2=a;this._y2=b;break;case 1:this._point=2;this._x3=a;this._y3=b;break;case 2:this._point=3;this._x4=a;this._y4=b;this._context.moveTo((this._x0+4*this._x1+a)/6,(this._y0+4*this._y1+b)/6);break;default:ca(this,a,b)}this._x0=this._x1;this._x1=a;this._y0=this._y1;
this._y1=b}};Y.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN;this._point=0},lineEnd:function(){(this._line||0!==this._line&&3===this._point)&&this._context.closePath();this._line=1-this._line},point:function(a,b){a=+a;b=+b;switch(this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3;var c=(this._x0+4*this._x1+a)/6,d=(this._y0+4*this._y1+b)/6;this._line?this._context.lineTo(c,
d):this._context.moveTo(c,d);break;case 3:this._point=4;default:ca(this,a,b)}this._x0=this._x1;this._x1=a;this._y0=this._y1;this._y1=b}};ia.prototype={lineStart:function(){this._x=[];this._y=[];this._basis.lineStart()},lineEnd:function(){var a=this._x,b=this._y,c=a.length-1;if(0<c)for(var d=a[0],e=b[0],g=a[c]-d,f=b[c]-e,h=-1,k;++h<=c;)k=h/c,this._basis.point(this._beta*a[h]+(1-this._beta)*(d+k*g),this._beta*b[h]+(1-this._beta)*(e+k*f));this._x=this._y=null;this._basis.lineEnd()},point:function(a,
b){this._x.push(+a);this._y.push(+b)}};var Db=function Mb(a){function b(b){return 1===a?new w(b):new ia(b,a)}b.beta=function(a){return Mb(+a)};return b}(.85);W.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN;this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x2,this._y2);break;case 3:S(this,this._x1,this._y1)}(this._line||0!==this._line&&1===this._point)&&
this._context.closePath();this._line=1-this._line},point:function(a,b){a=+a;b=+b;switch(this._point){case 0:this._point=1;this._line?this._context.lineTo(a,b):this._context.moveTo(a,b);break;case 1:this._point=2;this._x1=a;this._y1=b;break;case 2:this._point=3;default:S(this,a,b)}this._x0=this._x1;this._x1=this._x2;this._x2=a;this._y0=this._y1;this._y1=this._y2;this._y2=b}};var Kb=function vb(a){function b(b){return new W(b,a)}b.tension=function(a){return vb(+a)};return b}(0);fa.prototype={areaStart:R,
areaEnd:R,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._x5=this._y0=this._y1=this._y2=this._y3=this._y4=this._y5=NaN;this._point=0},lineEnd:function(){switch(this._point){case 1:this._context.moveTo(this._x3,this._y3);this._context.closePath();break;case 2:this._context.lineTo(this._x3,this._y3);this._context.closePath();break;case 3:this.point(this._x3,this._y3),this.point(this._x4,this._y4),this.point(this._x5,this._y5)}},point:function(a,b){a=+a;b=+b;switch(this._point){case 0:this._point=
1;this._x3=a;this._y3=b;break;case 1:this._point=2;this._context.moveTo(this._x4=a,this._y4=b);break;case 2:this._point=3;this._x5=a;this._y5=b;break;default:S(this,a,b)}this._x0=this._x1;this._x1=this._x2;this._x2=a;this._y0=this._y1;this._y1=this._y2;this._y2=b}};var Oa=function Nb(a){function b(b){return new fa(b,a)}b.tension=function(a){return Nb(+a)};return b}(0);z.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=
this._y0=this._y1=this._y2=NaN;this._point=0},lineEnd:function(){(this._line||0!==this._line&&3===this._point)&&this._context.closePath();this._line=1-this._line},point:function(a,b){a=+a;b=+b;switch(this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3;this._line?this._context.lineTo(this._x2,this._y2):this._context.moveTo(this._x2,this._y2);break;case 3:this._point=4;default:S(this,a,b)}this._x0=this._x1;this._x1=this._x2;this._x2=a;this._y0=this._y1;this._y1=this._y2;
this._y2=b}};var Va=function Qc(a){function b(b){return new z(b,a)}b.tension=function(a){return Qc(+a)};return b}(0);ea.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN;this._l01_a=this._l12_a=this._l23_a=this._l01_2a=this._l12_2a=this._l23_2a=this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x2,this._y2);break;case 3:this.point(this._x2,this._y2)}(this._line||
0!==this._line&&1===this._point)&&this._context.closePath();this._line=1-this._line},point:function(a,b){a=+a;b=+b;if(this._point){var c=this._x2-a,d=this._y2-b;this._l23_a=Math.sqrt(this._l23_2a=Math.pow(c*c+d*d,this._alpha))}switch(this._point){case 0:this._point=1;this._line?this._context.lineTo(a,b):this._context.moveTo(a,b);break;case 1:this._point=2;break;case 2:this._point=3;default:ha(this,a,b)}this._l01_a=this._l12_a;this._l12_a=this._l23_a;this._l01_2a=this._l12_2a;this._l12_2a=this._l23_2a;
this._x0=this._x1;this._x1=this._x2;this._x2=a;this._y0=this._y1;this._y1=this._y2;this._y2=b}};var Ha=function Tb(a){function b(b){return a?new ea(b,a):new W(b,0)}b.alpha=function(a){return Tb(+a)};return b}(.5);ba.prototype={areaStart:R,areaEnd:R,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._x5=this._y0=this._y1=this._y2=this._y3=this._y4=this._y5=NaN;this._l01_a=this._l12_a=this._l23_a=this._l01_2a=this._l12_2a=this._l23_2a=this._point=0},lineEnd:function(){switch(this._point){case 1:this._context.moveTo(this._x3,
this._y3);this._context.closePath();break;case 2:this._context.lineTo(this._x3,this._y3);this._context.closePath();break;case 3:this.point(this._x3,this._y3),this.point(this._x4,this._y4),this.point(this._x5,this._y5)}},point:function(a,b){a=+a;b=+b;if(this._point){var c=this._x2-a,d=this._y2-b;this._l23_a=Math.sqrt(this._l23_2a=Math.pow(c*c+d*d,this._alpha))}switch(this._point){case 0:this._point=1;this._x3=a;this._y3=b;break;case 1:this._point=2;this._context.moveTo(this._x4=a,this._y4=b);break;
case 2:this._point=3;this._x5=a;this._y5=b;break;default:ha(this,a,b)}this._l01_a=this._l12_a;this._l12_a=this._l23_a;this._l01_2a=this._l12_2a;this._l12_2a=this._l23_2a;this._x0=this._x1;this._x1=this._x2;this._x2=a;this._y0=this._y1;this._y1=this._y2;this._y2=b}};var Xa=function fd(a){function b(b){return a?new ba(b,a):new fa(b,0)}b.alpha=function(a){return fd(+a)};return b}(.5);la.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=
this._x2=this._y0=this._y1=this._y2=NaN;this._l01_a=this._l12_a=this._l23_a=this._l01_2a=this._l12_2a=this._l23_2a=this._point=0},lineEnd:function(){(this._line||0!==this._line&&3===this._point)&&this._context.closePath();this._line=1-this._line},point:function(a,b){a=+a;b=+b;if(this._point){var c=this._x2-a,d=this._y2-b;this._l23_a=Math.sqrt(this._l23_2a=Math.pow(c*c+d*d,this._alpha))}switch(this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3;this._line?this._context.lineTo(this._x2,
this._y2):this._context.moveTo(this._x2,this._y2);break;case 3:this._point=4;default:ha(this,a,b)}this._l01_a=this._l12_a;this._l12_a=this._l23_a;this._l01_2a=this._l12_2a;this._l12_2a=this._l23_2a;this._x0=this._x1;this._x1=this._x2;this._x2=a;this._y0=this._y1;this._y1=this._y2;this._y2=b}};var sc=function Rd(a){function b(b){return a?new la(b,a):new z(b,0)}b.alpha=function(a){return Rd(+a)};return b}(.5);Z.prototype={areaStart:R,areaEnd:R,lineStart:function(){this._point=0},lineEnd:function(){this._point&&
this._context.closePath()},point:function(a,b){a=+a;b=+b;this._point?this._context.lineTo(a,b):(this._point=1,this._context.moveTo(a,b))}};ja.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=this._t0=NaN;this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x1,this._y1);break;case 3:F(this,this._t0,da(this,this._t0))}(this._line||0!==this._line&&1===this._point)&&this._context.closePath();
this._line=1-this._line},point:function(a,b){var c=NaN;a=+a;b=+b;if(a!==this._x1||b!==this._y1){switch(this._point){case 0:this._point=1;this._line?this._context.lineTo(a,b):this._context.moveTo(a,b);break;case 1:this._point=2;break;case 2:this._point=3;F(this,da(this,c=pa(this,a,b)),c);break;default:F(this,this._t0,c=pa(this,a,b))}this._x0=this._x1;this._x1=a;this._y0=this._y1;this._y1=b;this._t0=c}}};(xa.prototype=Object.create(ja.prototype)).point=function(a,b){ja.prototype.point.call(this,b,a)};
K.prototype={moveTo:function(a,b){this._context.moveTo(b,a)},closePath:function(){this._context.closePath()},lineTo:function(a,b){this._context.lineTo(b,a)},bezierCurveTo:function(a,b,c,d,e,g){this._context.bezierCurveTo(b,a,d,c,g,e)}};ka.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=[];this._y=[]},lineEnd:function(){var a=this._x,b=this._y,c=a.length;if(c)if(this._line?this._context.lineTo(a[0],b[0]):this._context.moveTo(a[0],b[0]),
2===c)this._context.lineTo(a[1],b[1]);else for(var d=wa(a),e=wa(b),g=0,f=1;f<c;++g,++f)this._context.bezierCurveTo(d[0][g],e[0][g],d[1][g],e[1][g],a[f],b[f]);(this._line||0!==this._line&&1===c)&&this._context.closePath();this._line=1-this._line;this._x=this._y=null},point:function(a,b){this._x.push(+a);this._y.push(+b)}};ta.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=this._y=NaN;this._point=0},lineEnd:function(){0<this._t&&1>this._t&&
2===this._point&&this._context.lineTo(this._x,this._y);(this._line||0!==this._line&&1===this._point)&&this._context.closePath();0<=this._line&&(this._t=1-this._t,this._line=1-this._line)},point:function(a,b){a=+a;b=+b;switch(this._point){case 0:this._point=1;this._line?this._context.lineTo(a,b):this._context.moveTo(a,b);break;case 1:this._point=2;default:if(0>=this._t)this._context.lineTo(this._x,b),this._context.lineTo(a,b);else{var c=this._x*(1-this._t)+a*this._t;this._context.lineTo(c,this._y);
this._context.lineTo(c,b)}}this._x=a;this._y=b}};a.arc=function(){function a(){var a,b=+c.apply(this,arguments),f=+g.apply(this,arguments),h=u.apply(this,arguments)-Ba,n=y.apply(this,arguments)-Ba,m=Ja(n-h),r=n>h;D||(D=a=k.path());if(f<b){var l=f;f=b;b=l}if(1E-12<f)if(m>Ia-1E-12)D.moveTo(f*Ea(h),f*Fa(h)),D.arc(0,0,f,h,n,!r),1E-12<b&&(D.moveTo(b*Ea(n),b*Fa(n)),D.arc(0,0,b,n,h,r));else{var A=h,C=n;l=h;var p=n,G=m,q=m,J=B.apply(this,arguments)/2,L=1E-12<J&&(v?+v.apply(this,arguments):X(b*b+f*f)),E=ua(Ja(f-
b)/2,+t.apply(this,arguments)),P=E,I=E;if(1E-12<L){var N=e(L/b*Fa(J));J=e(L/f*Fa(J));1E-12<(G-=2*N)?(N*=r?1:-1,l+=N,p-=N):(G=0,l=p=(h+n)/2);1E-12<(q-=2*J)?(J*=r?1:-1,A+=J,C-=J):(q=0,A=C=(h+n)/2)}h=f*Ea(A);n=f*Fa(A);N=b*Ea(p);J=b*Fa(p);if(1E-12<E){var H=f*Ea(C),M=f*Fa(C),R=b*Ea(l),Q=b*Fa(l);if(m=m<Pa){var O=R-h;m=Q-n;L=N-H;var ca=J-M,w=ca*O-L*m;1E-12>w*w?O=void 0:(w=(L*(n-M)-ca*(h-H))/w,O=[h+w*O,n+w*m]);m=O}m&&(P=h-O[0],I=n-O[1],m=H-O[0],L=M-O[1],P=(P*m+I*L)/(X(P*P+I*I)*X(m*m+L*L)),I=1/Fa((1<P?0:-1>
P?Pa:Math.acos(P))/2),O=X(O[0]*O[0]+O[1]*O[1]),P=ua(E,(b-O)/(I-1)),I=ua(E,(f-O)/(I+1)))}1E-12<q?1E-12<I?(A=d(R,Q,h,n,f,I,r),C=d(H,M,N,J,f,I,r),D.moveTo(A.cx+A.x01,A.cy+A.y01),I<E?D.arc(A.cx,A.cy,I,oa(A.y01,A.x01),oa(C.y01,C.x01),!r):(D.arc(A.cx,A.cy,I,oa(A.y01,A.x01),oa(A.y11,A.x11),!r),D.arc(0,0,f,oa(A.cy+A.y11,A.cx+A.x11),oa(C.cy+C.y11,C.cx+C.x11),!r),D.arc(C.cx,C.cy,I,oa(C.y11,C.x11),oa(C.y01,C.x01),!r))):(D.moveTo(h,n),D.arc(0,0,f,A,C,!r)):D.moveTo(h,n);1E-12<b&&1E-12<G?1E-12<P?(A=d(N,J,H,M,b,
-P,r),C=d(h,n,R,Q,b,-P,r),D.lineTo(A.cx+A.x01,A.cy+A.y01),P<E?D.arc(A.cx,A.cy,P,oa(A.y01,A.x01),oa(C.y01,C.x01),!r):(D.arc(A.cx,A.cy,P,oa(A.y01,A.x01),oa(A.y11,A.x11),!r),D.arc(0,0,b,oa(A.cy+A.y11,A.cx+A.x11),oa(C.cy+C.y11,C.cx+C.x11),r),D.arc(C.cx,C.cy,P,oa(C.y11,C.x11),oa(C.y01,C.x01),!r))):D.arc(0,0,b,p,l,r):D.lineTo(N,J)}else D.moveTo(0,0);D.closePath();if(a)return D=null,a+""||null}var c=f,g=b,t=h(0),v=null,u=n,y=m,B=r,D=null;a.centroid=function(){var a=(+c.apply(this,arguments)+ +g.apply(this,
arguments))/2,b=(+u.apply(this,arguments)+ +y.apply(this,arguments))/2-Pa/2;return[Ea(b)*a,Fa(b)*a]};a.innerRadius=function(b){return arguments.length?(c="function"===typeof b?b:h(+b),a):c};a.outerRadius=function(b){return arguments.length?(g="function"===typeof b?b:h(+b),a):g};a.cornerRadius=function(b){return arguments.length?(t="function"===typeof b?b:h(+b),a):t};a.padRadius=function(b){return arguments.length?(v=null==b?null:"function"===typeof b?b:h(+b),a):v};a.startAngle=function(b){return arguments.length?
(u="function"===typeof b?b:h(+b),a):u};a.endAngle=function(b){return arguments.length?(y="function"===typeof b?b:h(+b),a):y};a.padAngle=function(b){return arguments.length?(B="function"===typeof b?b:h(+b),a):B};a.context=function(b){return arguments.length?(D=null==b?null:b,a):D};return a};a.area=B;a.line=y;a.pie=function(){function a(a){var h,k=a.length;var n=0;var t=Array(k),v=Array(k),m=+e.apply(this,arguments);var r=Math.min(Ia,Math.max(-Ia,g.apply(this,arguments)-m));var u=Math.min(Math.abs(r)/
k,f.apply(this,arguments)),y=u*(0>r?-1:1),D;for(h=0;h<k;++h)0<(D=v[t[h]=h]=+b(a[h],h,a))&&(n+=D);null!=c?t.sort(function(a,b){return c(v[a],v[b])}):null!=d&&t.sort(function(b,c){return d(a[b],a[c])});h=0;for(r=n?(r-k*y)/n:0;h<k;++h,m=B){n=t[h];D=v[n];var B=m+(0<D?D*r:0)+y;v[n]={data:a[n],index:h,value:D,startAngle:m,endAngle:B,padAngle:u}}return v}var b=l,c=D,d=null,e=h(0),g=h(Ia),f=h(0);a.value=function(c){return arguments.length?(b="function"===typeof c?c:h(+c),a):b};a.sortValues=function(b){return arguments.length?
(c=b,d=null,a):c};a.sort=function(b){return arguments.length?(d=b,c=null,a):d};a.startAngle=function(b){return arguments.length?(e="function"===typeof b?b:h(+b),a):e};a.endAngle=function(b){return arguments.length?(g="function"===typeof b?b:h(+b),a):g};a.padAngle=function(b){return arguments.length?(f="function"===typeof b?b:h(+b),a):f};return a};a.areaRadial=E;a.radialArea=E;a.lineRadial=q;a.radialLine=q;a.pointRadial=H;a.linkHorizontal=function(){return I(Q)};a.linkVertical=function(){return I(N)};
a.linkRadial=function(){var a=I(L);a.angle=a.x;delete a.x;a.radius=a.y;delete a.y;return a};a.symbol=function(){function a(){var a;d||(d=a=k.path());b.apply(this,arguments).draw(d,+c.apply(this,arguments));if(a)return d=null,a+""||null}var b=h(Ya),c=h(64),d=null;a.type=function(c){return arguments.length?(b="function"===typeof c?c:h(c),a):b};a.size=function(b){return arguments.length?(c="function"===typeof b?b:h(+b),a):c};a.context=function(b){return arguments.length?(d=null==b?null:b,a):d};return a};
a.symbols=kb;a.symbolCircle=Ya;a.symbolCross=Cb;a.symbolDiamond=Wa;a.symbolSquare=cb;a.symbolStar=$a;a.symbolTriangle=pb;a.symbolWye=kc;a.curveBasisClosed=function(a){return new x(a)};a.curveBasisOpen=function(a){return new Y(a)};a.curveBasis=function(a){return new w(a)};a.curveBundle=Db;a.curveCardinalClosed=Oa;a.curveCardinalOpen=Va;a.curveCardinal=Kb;a.curveCatmullRomClosed=Xa;a.curveCatmullRomOpen=sc;a.curveCatmullRom=Ha;a.curveLinearClosed=function(a){return new Z(a)};a.curveLinear=c;a.curveMonotoneX=
function(a){return new ja(a)};a.curveMonotoneY=function(a){return new xa(a)};a.curveNatural=function(a){return new ka(a)};a.curveStep=function(a){return new ta(a,.5)};a.curveStepAfter=function(a){return new ta(a,1)};a.curveStepBefore=function(a){return new ta(a,0)};a.stack=function(){function a(a){var g=b.apply(this,arguments),f,h=a.length,k=g.length,n=Array(k);for(f=0;f<k;++f){for(var t=g[f],v=n[f]=Array(h),m=0,r;m<h;++m)v[m]=r=[0,+e(a[m],t,m,a)],r.data=a[m];v.key=t}f=0;for(g=c(n);f<k;++f)n[g[f]].index=
f;d(n,g);return n}var b=h([]),c=ma,d=aa,e=Aa;a.keys=function(c){return arguments.length?(b="function"===typeof c?c:h(Ua.call(c)),a):b};a.value=function(b){return arguments.length?(e="function"===typeof b?b:h(+b),a):e};a.order=function(b){return arguments.length?(c=null==b?ma:"function"===typeof b?b:h(Ua.call(b)),a):c};a.offset=function(b){return arguments.length?(d=null==b?aa:b,a):d};return a};a.stackOffsetExpand=function(a,b){if(0<(d=a.length)){for(var c,d,e=0,g=a[0].length,f;e<g;++e){for(f=c=0;c<
d;++c)f+=a[c][e][1]||0;if(f)for(c=0;c<d;++c)a[c][e][1]/=f}aa(a,b)}};a.stackOffsetDiverging=function(a,b){if(1<(k=a.length))for(var c,d=0,e,g,f,h,k,n=a[b[0]].length;d<n;++d)for(c=f=h=0;c<k;++c)0<=(g=(e=a[b[c]][d])[1]-e[0])?(e[0]=f,e[1]=f+=g):0>g?(e[1]=h,e[0]=h+=g):e[0]=f};a.stackOffsetNone=aa;a.stackOffsetSilhouette=function(a,b){if(0<(e=a.length)){for(var c=0,d=a[b[0]],e,g=d.length;c<g;++c){for(var f=0,h=0;f<e;++f)h+=a[f][c][1]||0;d[c][1]+=d[c][0]=-h/2}aa(a,b)}};a.stackOffsetWiggle=function(a,b){if(0<
(f=a.length)&&0<(g=(e=a[b[0]]).length)){for(var c=0,d=1,e,g,f;d<g;++d){for(var h=0,k=0,n=0;h<f;++h){var t=a[b[h]],v=t[d][1]||0;t=(v-(t[d-1][1]||0))/2;for(var m=0;m<h;++m){var r=a[b[m]];t+=(r[d][1]||0)-(r[d-1][1]||0)}k+=v;n+=t*v}e[d-1][1]+=e[d-1][0]=c;k&&(c-=n/k)}e[d-1][1]+=e[d-1][0]=c;aa(a,b)}};a.stackOrderAppearance=va;a.stackOrderAscending=Ca;a.stackOrderDescending=function(a){return Ca(a).reverse()};a.stackOrderInsideOut=function(a){var b=a.length,c=a.map(Ga),d=va(a),e=0,g=0,f=[],h=[];for(a=0;a<
b;++a){var k=d[a];e<g?(e+=c[k],f.push(k)):(g+=c[k],h.push(k))}return h.reverse().concat(f)};a.stackOrderNone=ma;a.stackOrderReverse=function(a){return ma(a).reverse()};Object.defineProperty(a,"__esModule",{value:!0})})},{"d3-path":149}],153:[function(a,p,l){(function(a,k){"object"===typeof l&&"undefined"!==typeof p?k(l):k(a.d3=a.d3||{})})(this,function(a){function k(){return B||(A(h),B=l.now()+D)}function h(){B=0}function e(){this._call=this._time=this._next=null}function f(a,b,c){var d=new e;d.restart(a,
b,c);return d}function b(){k();++d;for(var a=v,b;a;)0<=(b=B-a._time)&&a._call.call(null,b),a=a._next;--d}function n(){B=(y=l.now())+D;d=g=0;try{b()}finally{d=0;for(var a,c=v,e,f=Infinity;c;)c._call?(f>c._time&&(f=c._time),a=c,c=c._next):(e=c._next,c._next=null,c=a?a._next=e:v=e);t=a;r(f);B=0}}function m(){var a=l.now(),b=a-y;1E3<b&&(D-=b,y=a)}function r(a){d||(g&&(g=clearTimeout(g)),24<a-B?(Infinity>a&&(g=setTimeout(n,a-l.now()-D)),c&&(c=clearInterval(c))):(c||(y=l.now(),c=setInterval(m,1E3)),d=1,
A(n)))}var d=0,g=0,c=0,v,t,y=0,B=0,D=0,l="object"===typeof performance&&performance.now?performance:Date,A="object"===typeof window&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(a){setTimeout(a,17)};e.prototype=f.prototype={constructor:e,restart:function(a,b,c){if("function"!==typeof a)throw new TypeError("callback is not a function");c=(null==c?k():+c)+(null==b?0:+b);this._next||t===this||(t?t._next=this:v=this,t=this);this._call=a;this._time=c;r()},stop:function(){this._call&&
(this._call=null,this._time=Infinity,r())}};a.now=k;a.timer=f;a.timerFlush=b;a.timeout=function(a,b,c){var d=new e;b=null==b?0:+b;d.restart(function(c){d.stop();a(c+b)},b,c);return d};a.interval=function(a,b,c){var d=new e,g=b;if(null==b)return d.restart(a,b,c),d;b=+b;c=null==c?k():+c;d.restart(function I(e){e+=g;d.restart(I,g+=b,c);a(e)},b,c);return d};Object.defineProperty(a,"__esModule",{value:!0})})},{}],154:[function(a,p,l){!function(){function a(a){return a&&(a.ownerDocument&&a.ownerDocument.defaultView||
a.document&&a||a.defaultView)}function k(a,b){return a<b?-1:a>b?1:a>=b?0:NaN}function h(a){return null===a?NaN:+a}function e(a){return!isNaN(a)}function f(a){return{left:function(b,c,d,e){3>arguments.length&&(d=0);4>arguments.length&&(e=b.length);for(;d<e;){var g=d+e>>>1;0>a(b[g],c)?d=g+1:e=g}return d},right:function(b,c,d,e){3>arguments.length&&(d=0);4>arguments.length&&(e=b.length);for(;d<e;){var g=d+e>>>1;0<a(b[g],c)?e=g:d=g+1}return d}}}function b(a){return a.length}function n(a,b){for(var c in b)Object.defineProperty(a.prototype,
c,{value:b[c],enumerable:!1})}function u(){this._=Object.create(null)}function r(a){return"__proto__"===(a+="")||"\x00"===a[0]?"\x00"+a:a}function d(a){return"\x00"===(a+="")[0]?a.slice(1):a}function g(a){return r(a)in this._}function c(a){return(a=r(a))in this._&&delete this._[a]}function v(){var a=[],b;for(b in this._)a.push(d(b));return a}function t(){var a=0,b;for(b in this._)++a;return a}function y(){for(var a in this._)return!1;return!0}function B(){this._=Object.create(null)}function D(a){return a}
function l(a,b,c){return function(){var d=c.apply(b,arguments);return d===b?a:d}}function A(a,b){if(b in a)return b;b=b.charAt(0).toUpperCase()+b.slice(1);for(var c=0,d=Ge.length;c<d;++c){var e=Ge[c]+b;if(e in a)return e}}function C(){}function q(){}function J(a){function b(){for(var b=c,d=-1,e=b.length,g;++d<e;)(g=b[d].on)&&g.apply(this,arguments);return a}var c=[],d=new u;b.on=function(b,e){var g=d.get(b),f;if(2>arguments.length)return g&&g.on;g&&(g.on=null,c=c.slice(0,f=c.indexOf(g)).concat(c.slice(f+
1)),d.remove(b));e&&c.push(d.set(b,{on:e}));return a};return b}function E(){V.event.preventDefault()}function H(){for(var a=V.event,b;b=a.sourceEvent;)a=b;return a}function M(a){for(var b=new q,c=0,d=arguments.length;++c<d;)b[arguments[c]]=J(b);b.of=function(c,d){return function(e){try{var g=e.sourceEvent=V.event;e.target=a;V.event=e;b[e.type].apply(c,d)}finally{V.event=g}}};return b}function O(a){Of(a,Ib);return a}function I(a){return"function"===typeof a?a:function(){return dh(a,this)}}function Q(a){return"function"===
typeof a?a:function(){return rg(a,this)}}function N(a,b){function c(){this.removeAttribute(a)}function d(){this.removeAttributeNS(a.space,a.local)}function e(){this.setAttribute(a,b)}function g(){this.setAttributeNS(a.space,a.local,b)}function f(){var c=b.apply(this,arguments);null==c?this.removeAttribute(a):this.setAttribute(a,c)}function h(){var c=b.apply(this,arguments);null==c?this.removeAttributeNS(a.space,a.local):this.setAttributeNS(a.space,a.local,c)}a=V.ns.qualify(a);return null==b?a.local?
d:c:"function"===typeof b?a.local?h:f:a.local?g:e}function L(a){return new RegExp("(?:^|\\s+)"+V.requote(a)+"(?:\\s+|$)","g")}function R(a,b){function c(){for(var c=-1;++c<e;)a[c](this,b)}function d(){for(var c=-1,d=b.apply(this,arguments);++c<e;)a[c](this,d)}a=(a+"").trim().split(/^|\s+/).map(ca);var e=a.length;return"function"===typeof b?d:c}function ca(a){var b=L(a);return function(c,d){if(e=c.classList)return d?e.add(a):e.remove(a);var e=c.getAttribute("class")||"";d?(b.lastIndex=0,b.test(e)||
c.setAttribute("class",(e+" "+a).trim().replace(/\s+/g," "))):c.setAttribute("class",e.replace(b," ").trim().replace(/\s+/g," "))}}function w(a,b,c){function d(){this.style.removeProperty(a)}function e(){this.style.setProperty(a,b,c)}function g(){var d=b.apply(this,arguments);null==d?this.style.removeProperty(a):this.style.setProperty(a,d,c)}return null==b?d:"function"===typeof b?g:e}function x(a,b){function c(){delete this[a]}function d(){this[a]=b}function e(){var c=b.apply(this,arguments);null==
c?delete this[a]:this[a]=c}return null==b?c:"function"===typeof b?e:d}function Y(a){function b(){var b=this.ownerDocument,c=this.namespaceURI;return"http://www.w3.org/1999/xhtml"===c&&"http://www.w3.org/1999/xhtml"===b.documentElement.namespaceURI?b.createElement(a):b.createElementNS(c,a)}function c(){return this.ownerDocument.createElementNS(a.space,a.local)}return"function"===typeof a?a:(a=V.ns.qualify(a)).local?c:b}function ia(){var a=this.parentNode;a&&a.removeChild(this)}function S(a){return function(){return Lg(this,
a)}}function W(a){arguments.length||(a=k);return function(b,c){return b&&c?a(b.__data__,c.__data__):!b-!c}}function fa(a,b){for(var c=0,d=a.length;c<d;c++)for(var e=a[c],g=0,f=e.length,h;g<f;g++)(h=e[g])&&b(h,g,c);return a}function z(a){Of(a,Pf);return a}function ha(a){var b,c;return function(d,e,g){d=a[g].update;var f=d.length;g!=c&&(c=g,b=0);for(e>=b&&(b=e+1);!(e=d[b])&&++b<f;);return e}}function ea(a,b,c){function d(){var b=this[f];b&&(this.removeEventListener(a,b,b.$),delete this[f])}function e(){var e=
k(b,kd(arguments));d.call(this);this.addEventListener(a,this[f]=e,e.$=c);e._=b}function g(){var b=new RegExp("^__on([^.]+)"+V.requote(a)+"$"),c,d;for(d in this)if(c=d.match(b)){var e=this[d];this.removeEventListener(c[1],e,e.$);delete this[d]}}var f="__on"+a,h=a.indexOf("."),k=ba;0<h&&(a=a.slice(0,h));var n=Oh.get(a);n&&(a=n,k=la);return h?b?e:d:b?C:g}function ba(a,b){return function(c){var d=V.event;V.event=c;b[0]=this.__data__;try{a.apply(this,b)}finally{V.event=d}}}function la(a,b){var c=ba(a,
b);return function(a){var b=a.relatedTarget;b&&(b===this||b.compareDocumentPosition(this)&8)||c.call(this,a)}}function Z(b){var c=".dragsuppress-"+ ++ii,d="click"+c,e=V.select(a(b)).on("touchmove"+c,E).on("dragstart"+c,E).on("selectstart"+c,E);null==We&&(We="onselectstart"in b?!1:A(b.style,"userSelect"));if(We){var g=(b&&(b.ownerDocument||b.document||b).documentElement).style,f=g[We];g[We]="none"}return function(a){e.on(c,null);We&&(g[We]=f);if(a){var b=function(){e.on(d,null)};e.on(d,function(){E();
b()},!0);setTimeout(b,0)}}}function pa(b,c){c.changedTouches&&(c=c.changedTouches[0]);var d=b.ownerSVGElement||b;if(d.createSVGPoint){var e=d.createSVGPoint();if(0>Ph&&(d=a(b),d.scrollX||d.scrollY)){d=V.select("body").append("svg").style({position:"absolute",top:0,left:0,margin:0,padding:0,border:"none"},"important");var g=d[0][0].getScreenCTM();Ph=!(g.f||g.e);d.remove()}Ph?(e.x=c.pageX,e.y=c.pageY):(e.x=c.clientX,e.y=c.clientY);e=e.matrixTransform(b.getScreenCTM().inverse());return[e.x,e.y]}e=b.getBoundingClientRect();
return[c.clientX-e.left-b.clientLeft,c.clientY-e.top-b.clientTop]}function da(){return V.event.changedTouches[0].identifier}function F(a,b,c){return(b[0]-a[0])*(c[1]-a[1])-(b[1]-a[1])*(c[0]-a[0])}function ja(a){return 1<a?0:-1>a?ib:Math.acos(a)}function xa(a){return 1<a?xb:-1>a?-xb:Math.asin(a)}function K(a){return((a=Math.exp(a))+1/a)/2}function ka(a){return(a=Math.sin(a/2))*a}function wa(){}function ta(a,b,c){return this instanceof ta?void(this.h=+a,this.s=+b,this.l=+c):2>arguments.length?a instanceof
ta?new ta(a.h,a.s,a.l):Fa(""+a,X,ta):new ta(a,b,c)}function aa(a,b,c){function d(a){360<a?a-=360:0>a&&(a+=360);return 60>a?g+(e-g)*a/60:180>a?e:240>a?g+(e-g)*(240-a)/60:g}a=isNaN(a)?0:0>(a%=360)?a+360:a;b=isNaN(b)?0:0>b?0:1<b?1:b;c=0>c?0:1<c?1:c;var e=.5>=c?c*(1+b):c+b-c*b;var g=2*c-e;return new Ea(Math.round(255*d(a+120)),Math.round(255*d(a)),Math.round(255*d(a-120)))}function ma(a,b,c){return this instanceof ma?void(this.h=+a,this.c=+b,this.l=+c):2>arguments.length?a instanceof ma?new ma(a.h,a.c,
a.l):a instanceof va?Ca(a.l,a.a,a.b):Ca((a=Pa((a=V.rgb(a)).r,a.g,a.b)).l,a.a,a.b):new ma(a,b,c)}function Aa(a,b,c){isNaN(a)&&(a=0);isNaN(b)&&(b=0);return new va(c,Math.cos(a*=jb)*b,Math.sin(a)*b)}function va(a,b,c){return this instanceof va?void(this.l=+a,this.a=+b,this.b=+c):2>arguments.length?a instanceof va?new va(a.l,a.a,a.b):a instanceof ma?Aa(a.h,a.c,a.l):Pa((a=Ea(a)).r,a.g,a.b):new va(a,b,c)}function sa(a,b,c){a=(a+16)/116;c=a-c/200;b=Ga(a+b/500)*Tf;a=Ga(a)*Rh;c=Ga(c)*lh;return new Ea(oa(3.2404542*
b-1.5371385*a-.4985314*c),oa(-.969266*b+1.8760108*a+.041556*c),oa(.0556434*b-.2040259*a+1.0572252*c))}function Ca(a,b,c){return 0<a?new ma(Math.atan2(c,b)*Yb,Math.sqrt(b*b+c*c),a):new ma(NaN,NaN,a)}function Ga(a){return.206893034<a?a*a*a:(a-4/29)/7.787037}function Ja(a){return.008856<a?Math.pow(a,1/3):7.787037*a+4/29}function oa(a){return Math.round(255*(.00304>=a?12.92*a:1.055*Math.pow(a,1/2.4)-.055))}function Ea(a,b,c){return this instanceof Ea?void(this.r=~~a,this.g=~~b,this.b=~~c):2>arguments.length?
a instanceof Ea?new Ea(a.r,a.g,a.b):Fa(""+a,Ea,aa):new Ea(a,b,c)}function na(a){return new Ea(a>>16,a>>8&255,a&255)+""}function ua(a){return 16>a?"0"+Math.max(0,a).toString(16):Math.min(255,a).toString(16)}function Fa(a,b,c){var d=0,e=0,g=0,f;if(f=/([a-z]+)\((.*)\)/.exec(a=a.toLowerCase())){var h=f[2].split(",");switch(f[1]){case "hsl":return c(parseFloat(h[0]),parseFloat(h[1])/100,parseFloat(h[2])/100);case "rgb":return b(Ia(h[0]),Ia(h[1]),Ia(h[2]))}}if(c=Uf.get(a))return b(c.r,c.g,c.b);null==a||
"#"!==a.charAt(0)||isNaN(c=parseInt(a.slice(1),16))||(4===a.length?(d=(c&3840)>>4,d|=d>>4,e=c&240,e|=e>>4,g=c&15,g|=g<<4):7===a.length&&(d=(c&16711680)>>16,e=(c&65280)>>8,g=c&255));return b(d,e,g)}function X(a,b,c){var d=Math.min(a/=255,b/=255,c/=255),e=Math.max(a,b,c),g=e-d,f=(e+d)/2;g?(d=.5>f?g/(e+d):g/(2-e-d),a=60*(a==e?(b-c)/g+(b<c?6:0):b==e?(c-a)/g+2:(a-b)/g+4)):(a=NaN,d=0<f&&1>f?0:a);return new ta(a,d,f)}function Pa(a,b,c){a=Ba(a);b=Ba(b);c=Ba(c);var d=Ja((.4124564*a+.3575761*b+.1804375*c)/
Tf),e=Ja((.2126729*a+.7151522*b+.072175*c)/Rh);a=Ja((.0193339*a+.119192*b+.9503041*c)/lh);return va(116*e-16,500*(d-e),200*(e-a))}function Ba(a){return.04045>=(a/=255)?a/12.92:Math.pow((a+.055)/1.055,2.4)}function Ia(a){var b=parseFloat(a);return"%"===a.charAt(a.length-1)?Math.round(2.55*b):b}function Ka(a){return"function"===typeof a?a:function(){return a}}function Ua(a){return function(b,c,d){2===arguments.length&&"function"===typeof c&&(d=c,c=null);return Ya(b,c,a,d)}}function Ya(a,b,c,d){function e(){var a=
k.status,b;if(b=!a)b=(b=k.responseType)&&"text"!==b?k.response:k.responseText;if(b||200<=a&&300>a||304===a){try{var d=c.call(g,k)}catch(Di){f.error.call(g,Di);return}f.load.call(g,d)}else f.error.call(g,k)}var g={},f=V.dispatch("beforesend","progress","load","error"),h={},k=new XMLHttpRequest,n=null;!this.XDomainRequest||"withCredentials"in k||!/^(http(s)?:)?\/\//.test(a)||(k=new XDomainRequest);"onload"in k?k.onload=k.onerror=e:k.onreadystatechange=function(){3<k.readyState&&e()};k.onprogress=function(a){var b=
V.event;V.event=a;try{f.progress.call(g,k)}finally{V.event=b}};g.header=function(a,b){a=(a+"").toLowerCase();if(2>arguments.length)return h[a];null==b?delete h[a]:h[a]=b+"";return g};g.mimeType=function(a){if(!arguments.length)return b;b=null==a?null:a+"";return g};g.responseType=function(a){if(!arguments.length)return n;n=a;return g};g.response=function(a){c=a;return g};["get","post"].forEach(function(a){g[a]=function(){return g.send.apply(g,[a].concat(kd(arguments)))}});g.send=function(c,d,e){2===
arguments.length&&"function"===typeof d&&(e=d,d=null);k.open(c,a,!0);null==b||"accept"in h||(h.accept=b+",*/*");if(k.setRequestHeader)for(var t in h)k.setRequestHeader(t,h[t]);null!=b&&k.overrideMimeType&&k.overrideMimeType(b);null!=n&&(k.responseType=n);if(null!=e)g.on("error",e).on("load",function(a){e(null,a)});f.beforesend.call(g,k);k.send(null==d?null:d);return g};g.abort=function(){k.abort();return g};V.rebind(g,f,"on");return null==d?g:g.get(Cb(d))}function Cb(a){return 1===a.length?function(b,
c){a(null==b?c:null)}:a}function eb(a,b,c){var d=arguments.length;2>d&&(b=0);3>d&&(c=Date.now());d={c:a,t:c+b,n:null};fh?fh.n=d:af=d;fh=d;ic||(He=clearTimeout(He),ic=1,cf(Ta));return d}function Ta(){var a=Wa();a=$a()-a;24<a?(isFinite(a)&&(clearTimeout(He),He=setTimeout(Ta,a)),ic=0):(ic=1,cf(Ta))}function Wa(){for(var a=Date.now(),b=af;b;)a>=b.t&&b.c(a-b.t)&&(b.c=null),b=b.n;return a}function $a(){for(var a,b=af,c=Infinity;b;)b.c?(b.t<c&&(c=b.t),b=(a=b).n):b=a?a.n=b.n:af=b.n;fh=a;return c}function rb(a,
b){return b-(a?Math.ceil(Math.log(a)/Math.LN10):1)}function mb(a){var b=a.decimal,c=a.thousands,d=a.grouping,e=a.currency,g=d&&c?function(a,b){for(var e=a.length,g=[],f=0,h=d[0],k=0;0<e&&0<h;){k+h+1>b&&(h=Math.max(1,b-k));g.push(a.substring(e-=h,e+h));if((k+=h+1)>b)break;h=d[f=(f+1)%d.length]}return g.reverse().join(c)}:D;return function(a){a=gh.exec(a);var c=a[1]||" ",d=a[2]||"\x3e",f=a[3]||"-",h=a[4]||"",k=a[5],n=+a[6],t=a[7],v=a[8],m=a[9],r=1,u="",y="",D=!1,B=!0;v&&(v=+v.substring(1));if(k||"0"===
c&&"\x3d"===d)k=c="0",d="\x3d";switch(m){case "n":t=!0;m="g";break;case "%":r=100;y="%";m="f";break;case "p":r=100;y="%";m="r";break;case "b":case "o":case "x":case "X":"#"===h&&(u="0"+m.toLowerCase());case "c":B=!1;case "d":D=!0;v=0;break;case "s":r=-1,m="r"}"$"===h&&(u=e[0],y=e[1]);"r"!=m||v||(m="g");if(null!=v)if("g"==m)v=Math.max(1,Math.min(21,v));else if("e"==m||"f"==m)v=Math.max(0,Math.min(20,v));m=yh.get(m)||cb;var l=k&&t;return function(a){var e=y;if(D&&a%1)return"";var h=0>a||0===a&&0>1/
a?(a=-a,"-"):"-"===f?"":f;0>r?(e=V.formatPrefix(a,v),a=e.scale(a),e=e.symbol+y):a*=r;a=m(a,v);var A=a.lastIndexOf(".");if(0>A)if(A=B?a.lastIndexOf("e"):-1,0>A){var C=a;a=""}else C=a.substring(0,A),a=a.substring(A);else C=a.substring(0,A),a=b+a.substring(A+1);!k&&t&&(C=g(C,Infinity));A=u.length+C.length+a.length+(l?0:h.length);var p=A<n?Array(A=n-A+1).join(c):"";l&&(C=g(p+C,p.length?n-a.length:Infinity));h+=u;a=C+a;return("\x3c"===d?h+a+p:"\x3e"===d?p+h+a:"^"===d?p.substring(0,A>>=1)+h+a+p.substring(A):
h+(l?a:p+a))+e}}}function cb(a){return a+""}function Hb(){this._=new Date(1<arguments.length?Date.UTC.apply(this,arguments):arguments[0])}function pb(a,b,c){function d(b){var c=a(b),d=g(c,1);return b-c<d-b?c:d}function e(c){b(c=a(new Oc(c-1)),1);return c}function g(a,c){b(a=new Oc(+a),c);return a}function f(a,d,g){a=e(a);var f=[];if(1<g)for(;a<d;)c(a)%g||f.push(new Date(+a)),b(a,1);else for(;a<d;)f.push(new Date(+a)),b(a,1);return f}a.floor=a;a.round=d;a.ceil=e;a.offset=g;a.range=f;var h=a.utc=Ra(a);
h.floor=h;h.round=Ra(d);h.ceil=Ra(e);h.offset=Ra(g);h.range=function(a,b,c){try{Oc=Hb;var d=new Hb;d._=a;return f(d,b,c)}finally{Oc=Date}};return a}function Ra(a){return function(b,c){try{Oc=Hb;var d=new Hb;d._=b;return a(d,c)._}finally{Oc=Date}}}function Jb(a){function b(a){function b(b){for(var c=[],e=-1,g=0,f,h;++e<d;)if(37===a.charCodeAt(e)){c.push(a.slice(g,e));null!=(f=Gh[g=a.charAt(++e)])&&(g=a.charAt(++e));if(h=C[g])g=h(b,null==f?"e"===g?" ":"0":f);c.push(g);g=e+1}c.push(a.slice(g,e));return c.join("")}
var d=a.length;b.parse=function(b){var d={y:1900,m:0,d:1,H:0,M:0,S:0,L:0,Z:null};if(c(d,a,b,0)!=b.length)return null;"p"in d&&(d.H=d.H%12+12*d.p);b=null!=d.Z&&Oc!==Hb;var e=new (b?Hb:Oc);"j"in d?e.setFullYear(d.y,0,d.j):"W"in d||"U"in d?("w"in d||(d.w="W"in d?1:0),e.setFullYear(d.y,0,1),e.setFullYear(d.y,0,"W"in d?(d.w+6)%7+7*d.W-(e.getDay()+5)%7:d.w+7*d.U-(e.getDay()+6)%7)):e.setFullYear(d.y,d.m,d.d);e.setHours(d.H+(d.Z/100|0),d.M+d.Z%100,d.S,d.L);return b?e._:e};b.toString=function(){return a};
return b}function c(a,b,c,d){for(var e,g=0,f=b.length,h=c.length;g<f;){if(d>=h)return-1;e=b.charCodeAt(g++);if(37===e){if(e=b.charAt(g++),e=p[e in Gh?b.charAt(g++):e],!e||0>(d=e(a,c,d)))return-1}else if(e!=c.charCodeAt(d++))return-1}return d}var d=a.dateTime,e=a.date,g=a.time,f=a.periods,h=a.days,k=a.shortDays,n=a.months,t=a.shortMonths;b.utc=function(a){function c(a){try{Oc=Hb;var b=new Oc;b._=a;return d(b)}finally{Oc=Date}}var d=b(a);c.parse=function(a){try{Oc=Hb;var b=d.parse(a);return b&&b._}finally{Oc=
Date}};c.toString=d.toString;return c};b.multi=b.utc.multi=Rd;var v=V.map(),m=kc(h),r=kb(h),u=kc(k),y=kb(k),D=kc(n),B=kb(n),l=kc(t),A=kb(t);f.forEach(function(a,b){v.set(a.toLowerCase(),b)});var C={a:function(a){return k[a.getDay()]},A:function(a){return h[a.getDay()]},b:function(a){return t[a.getMonth()]},B:function(a){return n[a.getMonth()]},c:b(d),d:function(a,b){return nb(a.getDate(),b,2)},e:function(a,b){return nb(a.getDate(),b,2)},H:function(a,b){return nb(a.getHours(),b,2)},I:function(a,b){return nb(a.getHours()%
12||12,b,2)},j:function(a,b){return nb(1+Na.dayOfYear(a),b,3)},L:function(a,b){return nb(a.getMilliseconds(),b,3)},m:function(a,b){return nb(a.getMonth()+1,b,2)},M:function(a,b){return nb(a.getMinutes(),b,2)},p:function(a){return f[+(12<=a.getHours())]},S:function(a,b){return nb(a.getSeconds(),b,2)},U:function(a,b){return nb(Na.sundayOfYear(a),b,2)},w:function(a){return a.getDay()},W:function(a,b){return nb(Na.mondayOfYear(a),b,2)},x:b(e),X:b(g),y:function(a,b){return nb(a.getFullYear()%100,b,2)},
Y:function(a,b){return nb(a.getFullYear()%1E4,b,4)},Z:Tb,"%":function(){return"%"}},p={a:function(a,b,c){u.lastIndex=0;return(b=u.exec(b.slice(c)))?(a.w=y.get(b[0].toLowerCase()),c+b[0].length):-1},A:function(a,b,c){m.lastIndex=0;return(b=m.exec(b.slice(c)))?(a.w=r.get(b[0].toLowerCase()),c+b[0].length):-1},b:function(a,b,c){l.lastIndex=0;return(b=l.exec(b.slice(c)))?(a.m=A.get(b[0].toLowerCase()),c+b[0].length):-1},B:function(a,b,c){D.lastIndex=0;return(b=D.exec(b.slice(c)))?(a.m=B.get(b[0].toLowerCase()),
c+b[0].length):-1},c:function(a,b,d){return c(a,C.c.toString(),b,d)},d:oc,e:oc,H:Mb,I:Mb,j:Sb,L:Qc,m:sc,M:vb,p:function(a,b,c){b=v.get(b.slice(c,c+=2).toLowerCase());return null==b?-1:(a.p=b,c)},S:Nb,U:Kb,w:Db,W:Oa,x:function(a,b,d){return c(a,C.x.toString(),b,d)},X:function(a,b,d){return c(a,C.X.toString(),b,d)},y:Ha,Y:Va,Z:Xa,"%":fd};return b}function nb(a,b,c){var d=0>a?"-":"";a=(d?-a:a)+"";var e=a.length;return d+(e<c?Array(c-e+1).join(b)+a:a)}function kc(a){return new RegExp("^(?:"+a.map(V.requote).join("|")+
")","i")}function kb(a){for(var b=new u,c=-1,d=a.length;++c<d;)b.set(a[c].toLowerCase(),c);return b}function Db(a,b,c){db.lastIndex=0;return(b=db.exec(b.slice(c,c+1)))?(a.w=+b[0],c+b[0].length):-1}function Kb(a,b,c){db.lastIndex=0;return(b=db.exec(b.slice(c)))?(a.U=+b[0],c+b[0].length):-1}function Oa(a,b,c){db.lastIndex=0;return(b=db.exec(b.slice(c)))?(a.W=+b[0],c+b[0].length):-1}function Va(a,b,c){db.lastIndex=0;return(b=db.exec(b.slice(c,c+4)))?(a.y=+b[0],c+b[0].length):-1}function Ha(a,b,c){db.lastIndex=
0;if(b=db.exec(b.slice(c,c+2))){var d=+b[0];a=(a.y=d+(68<d?1900:2E3),c+b[0].length)}else a=-1;return a}function Xa(a,b,c){return/^[+-]\d{4}$/.test(b=b.slice(c,c+5))?(a.Z=-b,c+5):-1}function sc(a,b,c){db.lastIndex=0;return(b=db.exec(b.slice(c,c+2)))?(a.m=b[0]-1,c+b[0].length):-1}function oc(a,b,c){db.lastIndex=0;return(b=db.exec(b.slice(c,c+2)))?(a.d=+b[0],c+b[0].length):-1}function Sb(a,b,c){db.lastIndex=0;return(b=db.exec(b.slice(c,c+3)))?(a.j=+b[0],c+b[0].length):-1}function Mb(a,b,c){db.lastIndex=
0;return(b=db.exec(b.slice(c,c+2)))?(a.H=+b[0],c+b[0].length):-1}function vb(a,b,c){db.lastIndex=0;return(b=db.exec(b.slice(c,c+2)))?(a.M=+b[0],c+b[0].length):-1}function Nb(a,b,c){db.lastIndex=0;return(b=db.exec(b.slice(c,c+2)))?(a.S=+b[0],c+b[0].length):-1}function Qc(a,b,c){db.lastIndex=0;return(b=db.exec(b.slice(c,c+3)))?(a.L=+b[0],c+b[0].length):-1}function Tb(a){var b=a.getTimezoneOffset();a=0<b?"-":"+";var c=hb(b)/60|0;b=hb(b)%60;return a+nb(c,"0",2)+nb(b,"0",2)}function fd(a,b,c){xi.lastIndex=
0;return(a=xi.exec(b.slice(c,c+1)))?c+a[0].length:-1}function Rd(a){for(var b=a.length,c=-1;++c<b;)a[c][0]=this(a[c][0]);return function(b){for(var c=0,d=a[c];!d[1](b);)d=a[++c];return d[0](b)}}function Eb(){}function Hc(a,b,c){var d=c.s=a+b,e=d-a;c.t=a-(d-e)+(b-e)}function Rc(a,b){if(a&&Sc.hasOwnProperty(a.type))Sc[a.type](a,b)}function bf(a,b,c){var d=-1;c=a.length-c;for(b.lineStart();++d<c;){var e=a[d];b.point(e[0],e[1],e[2])}b.lineEnd()}function Sd(a,b){var c=-1,d=a.length;for(b.polygonStart();++c<
d;)bf(a[c],b,1);b.polygonEnd()}function Td(){function a(a,b){a*=jb;b=b*jb/2+ib/4;var c=a-d,f=0<=c?1:-1;c*=f;var h=Math.cos(b);b=Math.sin(b);var k=g*b;Md.add(Math.atan2(k*f*Math.sin(c),e*h+k*Math.cos(c)));d=a;e=h;g=b}var b,c,d,e,g;Yd.point=function(f,h){Yd.point=a;d=(b=f)*jb;e=Math.cos(h=(c=h)*jb/2+ib/4);g=Math.sin(h)};Yd.lineEnd=function(){a(b,c)}}function Zc(a){var b=a[0];a=a[1];var c=Math.cos(a);return[c*Math.cos(b),c*Math.sin(b),Math.sin(a)]}function Cc(a,b){return a[0]*b[0]+a[1]*b[1]+a[2]*b[2]}
function $c(a,b){return[a[1]*b[2]-a[2]*b[1],a[2]*b[0]-a[0]*b[2],a[0]*b[1]-a[1]*b[0]]}function ld(a,b){a[0]+=b[0];a[1]+=b[1];a[2]+=b[2]}function md(a,b){return[a[0]*b,a[1]*b,a[2]*b]}function me(a){var b=Math.sqrt(a[0]*a[0]+a[1]*a[1]+a[2]*a[2]);a[0]/=b;a[1]/=b;a[2]/=b}function Vd(a){return[Math.atan2(a[1],a[0]),xa(a[2])]}function nd(a,b){return 1E-6>hb(a[0]-b[0])&&1E-6>hb(a[1]-b[1])}function tc(a,b){a*=jb;var c=Math.cos(b*=jb);Ub(c*Math.cos(a),c*Math.sin(a),Math.sin(b))}function Ub(a,b,c){++Tg;df+=
(a-df)/Tg;ef+=(b-ef)/Tg;Ae+=(c-Ae)/Tg}function xd(){function a(a,e){a*=jb;var g=Math.cos(e*=jb),f=g*Math.cos(a);a=g*Math.sin(a);e=Math.sin(e);var h=Math.atan2(Math.sqrt((h=c*e-d*a)*h+(h=d*f-b*e)*h+(h=b*a-c*f)*h),b*f+c*a+d*e);zh+=h;Zf+=h*(b+(b=f));ff+=h*(c+(c=a));qd+=h*(d+(d=e));Ub(b,c,d)}var b,c,d;Gf.point=function(e,g){e*=jb;var f=Math.cos(g*=jb);b=f*Math.cos(e);c=f*Math.sin(e);d=Math.sin(g);Gf.point=a;Ub(b,c,d)}}function ac(){Gf.point=tc}function yd(){function a(a,b){a*=jb;var c=Math.cos(b*=jb),
f=c*Math.cos(a);a=c*Math.sin(a);b=Math.sin(b);c=e*b-g*a;var h=g*f-d*b,k=d*a-e*f,n=Math.sqrt(c*c+h*h+k*k),t=d*f+e*a+g*b,v=n&&-ja(t)/n;n=Math.atan2(n,t);Yf+=v*c;Xf+=v*h;Oe+=v*k;zh+=n;Zf+=n*(d+(d=f));ff+=n*(e+(e=a));qd+=n*(g+(g=b));Ub(d,e,g)}var b,c,d,e,g;Gf.point=function(f,h){b=f;c=h;Gf.point=a;f*=jb;var k=Math.cos(h*=jb);d=k*Math.cos(f);e=k*Math.sin(f);g=Math.sin(h);Ub(d,e,g)};Gf.lineEnd=function(){a(b,c);Gf.lineEnd=ac;Gf.point=tc}}function xe(a,b){function c(c,d){return c=a(c,d),b(c[0],c[1])}a.invert&&
b.invert&&(c.invert=function(c,d){return c=b.invert(c,d),c&&a.invert(c[0],c[1])});return c}function Wd(){return!0}function ne(a,b,c,d,e){var g=[],f=[];a.forEach(function(a){if(!(0>=(b=a.length-1))){var b,c=a[0],d=a[b];if(nd(c,d)){e.lineStart();for(d=0;d<b;++d)e.point((c=a[d])[0],c[1]);e.lineEnd()}else b=new sb(c,a,null,!0),c=new sb(c,null,b,!1),b.o=c,g.push(b),f.push(c),b=new sb(d,a,null,!1),c=new sb(d,null,b,!0),b.o=c,g.push(b),f.push(c)}});f.sort(b);Xd(g);Xd(f);if(g.length){a=0;b=c;for(c=f.length;a<
c;++a)f[a].e=b=!b;b=g[0];for(var h,k;;){for(var n=b,t=!0;n.v;)if((n=n.n)===b)return;h=n.z;e.lineStart();do{n.v=n.o.v=!0;if(n.e){if(t)for(a=0,c=h.length;a<c;++a)e.point((k=h[a])[0],k[1]);else d(n.x,n.n.x,1,e);n=n.n}else{if(t)for(h=n.p.z,a=h.length-1;0<=a;--a)e.point((k=h[a])[0],k[1]);else d(n.x,n.p.x,-1,e);n=n.p}n=n.o;h=n.z;t=!t}while(!n.v);e.lineEnd()}}}function Xd(a){if(b=a.length){for(var b,c=0,d=a[0],e;++c<b;)d.n=e=a[c],e.p=d,d=e;d.n=e=a[0];e.p=d}}function sb(a,b,c,d){this.x=a;this.z=b;this.o=
c;this.e=d;this.v=!1;this.n=this.p=null}function Lb(a,b,c,d){return function(e,g){function f(b,c){var d=e(b,c);a(b=d[0],c=d[1])&&g.point(b,c)}function h(a,b){a=e(a,b);r.point(a[0],a[1])}function k(){y.point=h;r.lineStart()}function n(){y.point=f;r.lineEnd()}function t(a,b){p.push([a,b]);a=e(a,b);l.point(a[0],a[1])}function v(){l.lineStart();p=[]}function m(){t(p[0][0],p[0][1]);l.lineEnd();var a=l.clean(),b=B.buffer(),c=b.length;p.pop();C.push(p);p=null;if(c)if(a&1){a=b[0];c=a.length-1;b=-1;var d;
if(0<c){A||(g.polygonStart(),A=!0);for(g.lineStart();++b<c;)g.point((d=a[b])[0],d[1]);g.lineEnd()}}else 1<c&&a&2&&b.push(b.pop().concat(b.shift())),D.push(b.filter(lc))}var r=b(g),u=e.invert(d[0],d[1]),y={point:f,lineStart:k,lineEnd:n,polygonStart:function(){y.point=t;y.lineStart=v;y.lineEnd=m;D=[];C=[]},polygonEnd:function(){y.point=f;y.lineStart=k;y.lineEnd=n;D=V.merge(D);var a=u;var b=C;var d=a[0],e=a[1],h=[Math.sin(d),-Math.cos(d),0],t=0,v=0;Md.reset();for(var m=0,r=b.length;m<r;++m){var B=b[m],
l=B.length;if(l){var p=B[0],q=p[0];a=p[1]/2+ib/4;for(var G=Math.sin(a),J=Math.cos(a),db=1;;){db===l&&(db=0);a=B[db];var L=a[0],E=a[1]/2+ib/4,P=Math.sin(E);E=Math.cos(E);var I=L-q,N=0<=I?1:-1,H=N*I,M=H>ib;G*=P;Md.add(Math.atan2(G*N*Math.sin(H),J*E+G*Math.cos(H)));t+=M?I+N*vd:I;M^q>=d^L>=d&&(p=$c(Zc(p),Zc(a)),me(p),q=$c(h,p),me(q),q=(M^0<=I?-1:1)*xa(q[2]),e>q||e===q&&(p[0]||p[1]))&&(v+=M^0<=I?1:-1);if(!db++)break;q=L;G=P;J=E;p=a}}}b=(-1E-6>t||1E-6>t&&-1E-6>Md)^v&1;D.length?(A||(g.polygonStart(),A=!0),
ne(D,zb,b,c,g)):b&&(A||(g.polygonStart(),A=!0),g.lineStart(),c(null,null,1,g),g.lineEnd());A&&(g.polygonEnd(),A=!1);D=C=null},sphere:function(){g.polygonStart();g.lineStart();c(null,null,1,g);g.lineEnd();g.polygonEnd()}},D,B=dc(),l=b(B),A=!1,C,p;return y}}function lc(a){return 1<a.length}function dc(){var a=[],b;return{lineStart:function(){a.push(b=[])},point:function(a,c){b.push([a,c])},lineEnd:C,buffer:function(){var c=a;a=[];b=null;return c},rejoin:function(){1<a.length&&a.push(a.pop().concat(a.shift()))}}}
function zb(a,b){return(0>(a=a.x)[0]?a[1]-xb-1E-6:xb-a[1])-(0>(b=b.x)[0]?b[1]-xb-1E-6:xb-b[1])}function ab(a){function b(a,b){return Math.cos(a)*Math.cos(b)>e}function c(a,b,c){var d=Zc(a),g=Zc(b),f=[1,0,0];g=$c(d,g);var h=Cc(g,g);d=g[0];var k=h-d*d;if(!k)return!c&&a;h=e*h/k;k=-e*d/k;d=$c(f,g);f=md(f,h);g=md(g,k);ld(f,g);g=Cc(f,d);h=Cc(d,d);k=g*g-h*(Cc(f,f)-1);if(!(0>k)){var n=Math.sqrt(k);k=md(d,(-g-n)/h);ld(k,f);k=Vd(k);if(!c)return k;c=a[0];var t=b[0];a=a[1];b=b[1];if(t<c){var v=c;c=t;t=v}var m=
t-c,r=1E-6>hb(m-ib);!r&&b<a&&(v=a,a=b,b=v);if(r||1E-6>m?r?0<a+b^k[1]<(1E-6>hb(k[0]-c)?a:b):a<=k[1]&&k[1]<=b:m>ib^(c<=k[0]&&k[0]<=t))return b=md(d,(-g+n)/h),ld(b,f),[k,Vd(b)]}}function d(b,c){var d=g?a:ib-a,e=0;b<-d?e|=1:b>d&&(e|=2);c<-d?e|=4:c>d&&(e|=8);return e}var e=Math.cos(a),g=0<e,f=1E-6<hb(e),h=ad(a,6*jb);return Lb(b,function(a){var e,h,k,n,t;return{lineStart:function(){n=k=!1;t=1},point:function(v,m){var r=[v,m],u=b(v,m);m=g?u?0:d(v,m):u?d(v+(0>v?ib:-ib),m):0;!e&&(n=k=u)&&a.lineStart();u!==
k&&(v=c(e,r),nd(e,v)||nd(r,v))&&(r[0]+=1E-6,r[1]+=1E-6,u=b(r[0],r[1]));if(u!==k)t=0,u?(a.lineStart(),v=c(r,e),a.point(v[0],v[1])):(v=c(e,r),a.point(v[0],v[1]),a.lineEnd()),e=v;else if(f&&e&&g^u){var y;m&h||!(y=c(r,e,!0))||(t=0,g?(a.lineStart(),a.point(y[0][0],y[0][1]),a.point(y[1][0],y[1][1]),a.lineEnd()):(a.point(y[1][0],y[1][1]),a.lineEnd(),a.lineStart(),a.point(y[0][0],y[0][1])))}!u||e&&nd(e,r)||a.point(r[0],r[1]);e=r;k=u;h=m},lineEnd:function(){k&&a.lineEnd();e=null},clean:function(){return t|
(n&&k)<<1}}},h,g?[0,-a]:[-ib,a-ib])}function Ab(a,b,c,d){return function(e){var g=e.a,f=e.b,h=g.x;g=g.y;var k=0,n=1,t=f.x-h;f=f.y-g;var v=a-h;if(t||!(0<v)){v/=t;if(0>t){if(v<k)return;v<n&&(n=v)}else if(0<t){if(v>n)return;v>k&&(k=v)}v=c-h;if(t||!(0>v)){v/=t;if(0>t){if(v>n)return;v>k&&(k=v)}else if(0<t){if(v<k)return;v<n&&(n=v)}v=b-g;if(f||!(0<v)){v/=f;if(0>f){if(v<k)return;v<n&&(n=v)}else if(0<f){if(v>n)return;v>k&&(k=v)}v=d-g;if(f||!(0>v)){v/=f;if(0>f){if(v>n)return;v>k&&(k=v)}else if(0<f){if(v<k)return;
v<n&&(n=v)}0<k&&(e.a={x:h+k*t,y:g+k*f});1>n&&(e.b={x:h+n*t,y:g+n*f});return e}}}}}}function Tc(a,b,c,d){function e(d,e){return 1E-6>hb(d[0]-a)?0<e?0:3:1E-6>hb(d[0]-c)?0<e?2:1:1E-6>hb(d[1]-b)?0<e?1:0:0<e?3:2}function g(a,b){return f(a.x,b.x)}function f(a,b){var c=e(a,1),d=e(b,1);return c!==d?c-d:0===c?b[1]-a[1]:1===c?a[0]-b[0]:2===c?a[1]-b[1]:b[0]-a[0]}return function(h){function k(g,h,k,n){var t=0,v=0;if(null==g||(t=e(g,k))!==(v=e(h,k))||0>f(g,h)^0<k){do n.point(0===t||3===t?a:c,1<t?d:b);while((t=
(t+k+4)%4)!==v)}else n.point(h[0],h[1])}function n(e,g){a<=e&&e<=c&&b<=g&&g<=d&&h.point(e,g)}function t(e,g){e=Math.max(-1E9,Math.min(1E9,e));g=Math.max(-1E9,Math.min(1E9,g));var f=a<=e&&e<=c&&b<=g&&g<=d;y&&D.push([e,g]);if(J)l=e,A=g,C=f,J=!1,f&&(h.lineStart(),h.point(e,g));else if(f&&G)h.point(e,g);else{var k={a:{x:p,y:q},b:{x:e,y:g}};r(k)?(G||(h.lineStart(),h.point(k.a.x,k.a.y)),h.point(k.b.x,k.b.y),f||h.lineEnd(),db=!1):f&&(h.lineStart(),h.point(e,g),db=!1)}p=e;q=g;G=f}var v=h,m=dc(),r=Ab(a,b,
c,d),u,y,D,B={point:n,lineStart:function(){B.point=t;y&&y.push(D=[]);J=!0;G=!1;p=q=NaN},lineEnd:function(){u&&(t(l,A),C&&G&&m.rejoin(),u.push(m.buffer()));B.point=n;G&&h.lineEnd()},polygonStart:function(){h=m;u=[];y=[];db=!0},polygonEnd:function(){h=v;u=V.merge(u);var b=[a,d];for(var c=0,e=y.length,f=b[1],n=0;n<e;++n)for(var t=1,m=y[n],r=m.length,B=m[0],l;t<r;++t)l=m[t],B[1]<=f?l[1]>f&&0<F(B,l,b)&&++c:l[1]<=f&&0>F(B,l,b)&&--c,B=l;b=0!==c;c=db&&b;e=u.length;if(c||e)h.polygonStart(),c&&(h.lineStart(),
k(null,null,1,h),h.lineEnd()),e&&ne(u,g,b,k,h),h.polygonEnd();u=y=D=null}},l,A,C,p,q,G,J,db;return B}}function Vb(a){var b=0,c=ib/3,d=Ne(a);a=d(b,c);a.parallels=function(a){return arguments.length?d(b=a[0]*ib/180,c=a[1]*ib/180):[b/ib*180,c/ib*180]};return a}function Sa(a,b){function c(a,b){b=Math.sqrt(e-2*d*Math.sin(b))/d;return[b*Math.sin(a*=d),g-b*Math.cos(a)]}a=Math.sin(a);var d=(a+Math.sin(b))/2,e=1+a*(2*d-a),g=Math.sqrt(e)/d;c.invert=function(a,b){b=g-b;return[Math.atan2(a,b)/d,xa((e-(a*a+b*
b)*d*d)/(2*d))]};return c}function Me(){function a(a,b){ni+=e*a-d*b;d=a;e=b}var b,c,d,e;lf.point=function(g,f){lf.point=a;b=d=g;c=e=f};lf.lineEnd=function(){a(b,c)}}function yf(){function a(a,b){f.push("M",a,",",b,g)}function b(a,b){f.push("M",a,",",b);h.point=c}function c(a,b){f.push("L",a,",",b)}function d(){h.point=a}function e(){f.push("Z")}var g=Ad(4.5),f=[],h={point:a,lineStart:function(){h.point=b},lineEnd:d,polygonStart:function(){h.lineEnd=e},polygonEnd:function(){h.lineEnd=d;h.point=a},
pointRadius:function(a){g=Ad(a);return h},result:function(){if(f.length){var a=f.join("");f=[];return a}}};return h}function Ad(a){return"m0,"+a+"a"+a+","+a+" 0 1,1 0,"+-2*a+"a"+a+","+a+" 0 1,1 0,"+2*a+"z"}function yb(a,b){df+=a;ef+=b;++Ae}function Ma(){function a(a,d){var e=a-b,g=d-c;e=Math.sqrt(e*e+g*g);Zf+=e*(b+a)/2;ff+=e*(c+d)/2;qd+=e;yb(b=a,c=d)}var b,c;vc.point=function(d,e){vc.point=a;yb(b=d,c=e)}}function mc(){vc.point=yb}function Fb(){function a(a,b){var c=a-d,g=b-e;c=Math.sqrt(c*c+g*g);
Zf+=c*(d+a)/2;ff+=c*(e+b)/2;qd+=c;c=e*a-d*b;Yf+=c*(d+a);Xf+=c*(e+b);Oe+=3*c;yb(d=a,e=b)}var b,c,d,e;vc.point=function(g,f){vc.point=a;yb(b=d=g,c=e=f)};vc.lineEnd=function(){a(b,c)}}function od(a){function b(b,c){a.moveTo(b+f,c);a.arc(b,c,f,0,vd)}function c(b,c){a.moveTo(b,c);h.point=d}function d(b,c){a.lineTo(b,c)}function e(){h.point=b}function g(){a.closePath()}var f=4.5,h={point:b,lineStart:function(){h.point=c},lineEnd:e,polygonStart:function(){h.lineEnd=g},polygonEnd:function(){h.lineEnd=e;h.point=
b},pointRadius:function(a){f=a;return h},result:C};return h}function pc(a){function b(a){return(h?d:c)(a)}function c(b){return bc(b,function(c,d){c=a(c,d);b.point(c[0],c[1])})}function d(b){function c(c,d){c=a(c,d);b.point(c[0],c[1])}function d(){l=NaN;G.point=g;b.lineStart()}function g(c,d){var g=Zc([c,d]);d=a(c,d);e(l,A,B,C,p,q,l=d[0],A=d[1],B=c,C=g[0],p=g[1],q=g[2],h,b);b.point(l,A)}function f(){G.point=c;b.lineEnd()}function k(){d();G.point=n;G.lineEnd=t}function n(a,b){g(v=a,b);m=l;r=A;u=C;y=
p;D=q;G.point=g}function t(){e(l,A,B,C,p,q,m,r,v,u,y,D,h,b);G.lineEnd=f;f()}var v,m,r,u,y,D,B,l,A,C,p,q,G={point:c,lineStart:d,lineEnd:f,polygonStart:function(){b.polygonStart();G.lineStart=k},polygonEnd:function(){b.polygonEnd();G.lineStart=d}};return G}function e(b,c,d,h,k,n,t,v,m,r,u,y,D,B){var l=t-b,A=v-c,C=l*l+A*A;if(C>4*g&&D--){var p=h+r,G=k+u,q=n+y,J=Math.sqrt(p*p+G*G+q*q),db=Math.asin(q/=J),L=1E-6>hb(hb(q)-1)||1E-6>hb(d-m)?(d+m)/2:Math.atan2(G,p),E=a(L,db);db=E[0];E=E[1];var P=db-b,I=E-c,
N=A*P-l*I;if(N*N/C>g||.3<hb((l*P+A*I)/C-.5)||h*r+k*u+n*y<f)e(b,c,d,h,k,n,db,E,L,p/=J,G/=J,q,D,B),B.point(db,E),e(db,E,L,p,G,q,t,v,m,r,u,y,D,B)}}var g=.5,f=Math.cos(30*jb),h=16;b.precision=function(a){if(!arguments.length)return Math.sqrt(g);h=0<(g=a*a)&&16;return b};return b}function Wf(a){var b=pc(function(b,c){return a([b*Yb,c*Yb])});return function(a){return Uc(b(a))}}function wb(a){this.stream=a}function bc(a,b){return{point:b,sphere:function(){a.sphere()},lineStart:function(){a.lineStart()},
lineEnd:function(){a.lineEnd()},polygonStart:function(){a.polygonStart()},polygonEnd:function(){a.polygonEnd()}}}function Zd(a){return Ne(function(){return a})()}function Ne(a){function b(a){a=h(a[0]*jb,a[1]*jb);return[a[0]*n+l,A-a[1]*n]}function c(a){return(a=h.invert((a[0]-l)/n,(A-a[1])/n))&&[a[0]*Yb,a[1]*Yb]}function d(){h=xe(f=uc(u,y,B),g);var a=g(m,r);l=t-a[0]*n;A=v+a[1]*n;return e()}function e(){J&&(J.valid=!1,J=null);return b}var g,f,h,k=pc(function(a,b){a=g(a,b);return[a[0]*n+l,A-a[1]*n]}),
n=150,t=480,v=250,m=0,r=0,u=0,y=0,B=0,l,A,C=ph,p=D,q=null,G=null,J;b.stream=function(a){J&&(J.valid=!1);J=Uc(C(f,k(p(a))));J.valid=!0;return J};b.clipAngle=function(a){if(!arguments.length)return q;C=null==a?(q=a,ph):ab((q=+a)*jb);return e()};b.clipExtent=function(a){if(!arguments.length)return G;p=(G=a)?Tc(a[0][0],a[0][1],a[1][0],a[1][1]):D;return e()};b.scale=function(a){if(!arguments.length)return n;n=+a;return d()};b.translate=function(a){if(!arguments.length)return[t,v];t=+a[0];v=+a[1];return d()};
b.center=function(a){if(!arguments.length)return[m*Yb,r*Yb];m=a[0]%360*jb;r=a[1]%360*jb;return d()};b.rotate=function(a){if(!arguments.length)return[u*Yb,y*Yb,B*Yb];u=a[0]%360*jb;y=a[1]%360*jb;B=2<a.length?a[2]%360*jb:0;return d()};V.rebind(b,k,"precision");return function(){g=a.apply(this,arguments);b.invert=g.invert&&c;return d()}}function Uc(a){return bc(a,function(b,c){a.point(b*jb,c*jb)})}function pd(a,b){return[a,b]}function Bd(a,b){return[a>ib?a-vd:a<-ib?a+vd:a,b]}function uc(a,b,c){return a?
b||c?xe(Gb(a),Ob(b,c)):Gb(a):b||c?Ob(b,c):Bd}function gb(a){return function(b,c){return b+=a,[b>ib?b-vd:b<-ib?b+vd:b,c]}}function Gb(a){var b=gb(a);b.invert=gb(-a);return b}function Ob(a,b){function c(a,b){var c=Math.cos(b),h=Math.cos(a)*c;a=Math.sin(a)*c;b=Math.sin(b);c=b*d+h*e;return[Math.atan2(a*g-c*f,h*d-b*e),xa(c*g+a*f)]}var d=Math.cos(a),e=Math.sin(a),g=Math.cos(b),f=Math.sin(b);c.invert=function(a,b){var c=Math.cos(b),h=Math.cos(a)*c;a=Math.sin(a)*c;b=Math.sin(b);c=b*g-a*f;return[Math.atan2(a*
g+b*f,h*d+c*e),xa(c*d-h*e)]};return c}function ad(a,b){var c=Math.cos(a),d=Math.sin(a);return function(e,g,f,h){var k=f*b;if(null!=e){if(e=$d(c,e),g=$d(c,g),0<f?e<g:e>g)e+=f*vd}else e=a+f*vd,g=a-.5*k;for(var n;0<f?e>g:e<g;e-=k)h.point((n=Vd([c,-d*Math.cos(e),-d*Math.sin(e)]))[0],n[1])}}function $d(a,b){b=Zc(b);b[0]-=a;me(b);a=ja(-b[1]);return((0>-b[2]?-a:a)+2*Math.PI-1E-6)%(2*Math.PI)}function Cd(a,b,c){var d=V.range(a,b-1E-6,c).concat(b);return function(a){return d.map(function(b){return[a,b]})}}
function zf(a,b,c){var d=V.range(a,b-1E-6,c).concat(b);return function(a){return d.map(function(b){return[b,a]})}}function ae(a){return a.source}function pe(a){return a.target}function gd(a,b,c,d){var e=Math.cos(b),g=Math.sin(b),f=Math.cos(d),h=Math.sin(d),k=e*Math.cos(a),n=e*Math.sin(a),t=f*Math.cos(c),v=f*Math.sin(c),m=2*Math.asin(Math.sqrt(ka(d-b)+e*f*ka(c-a))),r=1/Math.sin(m);c=m?function(a){var b=Math.sin(a*=m)*r;a=Math.sin(m-a)*r;var c=a*k+b*t,d=a*n+b*v;return[Math.atan2(d,c)*Yb,Math.atan2(a*
g+b*h,Math.sqrt(c*c+d*d))*Yb]}:function(){return[a*Yb,b*Yb]};c.distance=m;return c}function wc(a,b){function c(b,c){var d=Math.cos(c),e=a(Math.cos(b)*d);return[e*d*Math.sin(b),e*Math.sin(c)]}c.invert=function(a,c){var d=Math.sqrt(a*a+c*c),e=b(d),g=Math.sin(e);return[Math.atan2(a*g,d*Math.cos(e)),Math.asin(d&&c*g/d)]};return c}function Nd(a,b){function c(a,b){0<g?b<-xb+1E-6&&(b=-xb+1E-6):b>xb-1E-6&&(b=xb-1E-6);b=g/Math.pow(Math.tan(ib/4+b/2),e);return[b*Math.sin(e*a),g-b*Math.cos(e*a)]}var d=Math.cos(a),
e=a===b?Math.sin(a):Math.log(d/Math.cos(b))/Math.log(Math.tan(ib/4+b/2)/Math.tan(ib/4+a/2)),g=d*Math.pow(Math.tan(ib/4+a/2),e)/e;if(!e)return bd;c.invert=function(a,b){b=g-b;return[Math.atan2(a,b)/e,2*Math.atan(Math.pow(g/((0<e?1:0>e?-1:0)*Math.sqrt(a*a+b*b)),1/e))-xb]};return c}function Dd(a,b){function c(a,b){b=g-b;return[b*Math.sin(e*a),g-b*Math.cos(e*a)]}var d=Math.cos(a),e=a===b?Math.sin(a):(d-Math.cos(b))/(b-a),g=d/e+a;if(1E-6>hb(e))return pd;c.invert=function(a,b){b=g-b;return[Math.atan2(a,
b)/e,g-(0<e?1:0>e?-1:0)*Math.sqrt(a*a+b*b)]};return c}function bd(a,b){return[a,Math.log(Math.tan(ib/4+b/2))]}function Ed(a){var b=Zd(a),c=b.scale,d=b.translate,e=b.clipExtent,g;b.scale=function(){var a=c.apply(b,arguments);return a===b?g?b.clipExtent(null):b:a};b.translate=function(){var a=d.apply(b,arguments);return a===b?g?b.clipExtent(null):b:a};b.clipExtent=function(a){var f=e.apply(b,arguments);if(f===b){if(g=null==a){var h=ib*c(),k=d();e([[k[0]-h,k[1]-h],[k[0]+h,k[1]+h]])}}else g&&(f=null);
return f};return b.clipExtent(null)}function Od(a,b){return[Math.log(Math.tan(ib/4+b/2)),-a]}function Fd(a){return a[0]}function qe(a){return a[1]}function ze(a){for(var b=a.length,c=[0,1],d=2,e=2;e<b;e++){for(;1<d&&0>=F(a[c[d-2]],a[c[d-1]],a[e]);)--d;c[d++]=e}return c.slice(0,d)}function re(a,b){return a[0]-b[0]||a[1]-b[1]}function be(a,b,c){return(c[0]-b[0])*(a[1]-b[1])<(c[1]-b[1])*(a[0]-b[0])}function ce(a,b,c,d){var e=a[0],g=c[0],f=b[0]-e,h=d[0]-g;a=a[1];c=c[1];b=b[1]-a;d=d[1]-c;g=(h*(a-c)-d*
(e-g))/(d*f-h*b);return[e+g*f,a+g*b]}function Pe(a){var b=a[0];a=a[a.length-1];return!(b[0]-a[0]||b[1]-a[1])}function Ef(){La(this);this.edge=this.site=this.circle=null}function Vc(a){var b=ui.pop()||new Ef;b.site=a;return b}function zc(a){Gd(a);Ag.remove(a);ui.push(a);La(a)}function Dc(a,b){var c=a.site,d=c.x,e=c.y,g=e-b;if(!g)return d;a=a.P;if(!a)return-Infinity;c=a.site;a=c.x;c=c.y;b=c-b;if(!b)return a;var f=a-d,h=1/g-1/b,k=f/b;return h?(-k+Math.sqrt(k*k-2*h*(f*f/(-2*b)-c+b/2+e-g/2)))/h+d:(d+a)/
2}function Zb(a){this.site=a;this.edges=[]}function Wb(a,b){return b.angle-a.angle}function Qe(){La(this);this.x=this.y=this.arc=this.site=this.cy=null}function Pd(a){var b=a.P,c=a.N;if(b&&c){var d=b.site;b=a.site;var e=c.site;if(d!==e){c=b.x;var g=b.y,f=d.x-c,h=d.y-g;d=e.x-c;e=e.y-g;var k=2*(f*e-h*d);if(!(-1E-12<=k)){var n=f*f+h*h,t=d*d+e*e;h=(e*n-h*t)/k;f=(f*t-d*n)/k;e=f+g;g=ng.pop()||new Qe;g.arc=a;g.site=b;g.x=h+c;g.y=e+Math.sqrt(h*h+f*f);g.cy=e;a.circle=g;a=null;for(b=se._;b;)if(g.y<b.y||g.y===
b.y&&g.x<=b.x)if(b.L)b=b.L;else{a=b.P;break}else if(b.R)b=b.R;else{a=b;break}se.insert(a,g);a||(Yh=g)}}}}function Gd(a){var b=a.circle;b&&(b.P||(Yh=b.N),se.remove(b),ng.push(b),La(b),a.circle=null)}function jf(a,b){var c=a.b;if(c)return!0;var d=a.a;c=b[0][0];var e=b[1][0],g=b[0][1];b=b[1][1];var f=a.l,h=a.r,k=f.x;f=f.y;var n=h.x;h=h.y;var t=(k+n)/2;if(h===f){if(t<c||t>=e)return;if(k>n){if(!d)d={x:t,y:g};else if(d.y>=b)return;c={x:t,y:b}}else{if(!d)d={x:t,y:b};else if(d.y<g)return;c={x:t,y:g}}}else{var v=
(k-n)/(h-f);t=(f+h)/2-v*t;if(-1>v||1<v)if(k>n){if(!d)d={x:(g-t)/v,y:g};else if(d.y>=b)return;c={x:(b-t)/v,y:b}}else{if(!d)d={x:(b-t)/v,y:b};else if(d.y<g)return;c={x:(g-t)/v,y:g}}else if(f<h){if(!d)d={x:c,y:v*c+t};else if(d.x>=e)return;c={x:e,y:v*e+t}}else{if(!d)d={x:e,y:v*e+t};else if(d.x<c)return;c={x:c,y:v*c+t}}}a.a=d;a.b=c;return!0}function Be(a,b){this.l=a;this.r=b;this.a=this.b=null}function Jc(a,b,c,d){var e=new Be(a,b);ye.push(e);c&&ec(e,a,b,c);d&&ec(e,b,a,d);Af[a.i].edges.push(new Kc(e,a,
b));Af[b.i].edges.push(new Kc(e,b,a));return e}function de(a,b,c){a=new Be(a,null);a.a=b;a.b=c;ye.push(a);return a}function ec(a,b,c,d){a.a||a.b?a.l===c?a.b=d:a.a=d:(a.a=d,a.l=b,a.r=c)}function Kc(a,b,c){var d=a.a,e=a.b;this.edge=a;this.site=b;this.angle=c?Math.atan2(c.y-b.y,c.x-b.x):a.l===b?Math.atan2(e.x-d.x,d.y-e.y):Math.atan2(d.x-e.x,e.y-d.y)}function ra(){this._=null}function La(a){a.U=a.C=a.L=a.R=a.P=a.N=null}function qb(a,b){var c=b.R,d=b.U;d?d.L===b?d.L=c:d.R=c:a._=c;c.U=d;b.U=c;b.R=c.L;b.R&&
(b.R.U=b);c.L=b}function Bb(a,b){var c=b.L,d=b.U;d?d.L===b?d.L=c:d.R=c:a._=c;c.U=d;b.U=c;b.L=c.R;b.L&&(b.L.U=b);c.R=b}function Wc(a){for(;a.L;)a=a.L;return a}function Da(a,b){var c=a.sort(Za).pop(),d;ye=[];Af=Array(a.length);Ag=new ra;for(se=new ra;;){var e=Yh;if(c&&(!e||c.y<e.y||c.y===e.y&&c.x<e.x)){if(c.x!==d||c.y!==g){Af[c.i]=new Zb(c);var g=d=void 0;e=c;for(var f=e.x,h=e.y,k=Ag._;k;){var n=Dc(k,h)-f;if(1E-6<n)k=k.L;else{var t=k;var v=h;var m=t.N;m?v=Dc(m,v):(t=t.site,v=t.y===v?t.x:Infinity);v=
f-v;if(1E-6<v){if(!k.R){g=k;break}k=k.R}else{-1E-6<n?(g=k.P,d=k):-1E-6<v?(g=k,d=k.N):g=d=k;break}}}n=Vc(e);Ag.insert(g,n);if(g||d)if(g===d)Gd(g),d=Vc(g.site),Ag.insert(n,d),n.edge=d.edge=Jc(g.site,n.site),Pd(g),Pd(d);else if(d){Gd(g);Gd(d);f=g.site;k=f.x;v=f.y;t=e.x-k;m=e.y-v;h=d.site;var r=h.x-k,u=h.y-v,y=2*(t*u-m*r),D=t*t+m*m,B=r*r+u*u;k={x:(u*D-m*B)/y+k,y:(t*B-r*D)/y+v};ec(d.edge,f,h,k);n.edge=Jc(f,e,null,k);d.edge=Jc(e,h,null,k);Pd(g);Pd(d)}else n.edge=Jc(g.site,n.site);d=c.x;g=c.y}c=a.pop()}else if(e){h=
e.arc;e=h.circle;f=e.x;k=e.cy;e={x:f,y:k};t=h.P;v=h.N;n=[h];zc(h);for(h=t;h.circle&&1E-6>hb(f-h.circle.x)&&1E-6>hb(k-h.circle.cy);)t=h.P,n.unshift(h),zc(h),h=t;n.unshift(h);Gd(h);for(t=v;t.circle&&1E-6>hb(f-t.circle.x)&&1E-6>hb(k-t.circle.cy);)v=t.N,n.push(t),zc(t),t=v;n.push(t);Gd(t);k=n.length;for(f=1;f<k;++f)t=n[f],h=n[f-1],ec(t.edge,h.site,t.site,e);h=n[0];t=n[k-1];t.edge=Jc(h.site,t.site,null,e);Pd(h);Pd(t)}else break}if(b){a=ye;c=Ab(b[0][0],b[0][1],b[1][0],b[1][1]);for(d=a.length;d--;)if(g=
a[d],!jf(g,b)||!c(g)||1E-6>hb(g.a.x-g.b.x)&&1E-6>hb(g.a.y-g.b.y))g.a=g.b=null,a.splice(d,1);a=b[0][0];c=b[1][0];d=b[0][1];b=b[1][1];f=Af;for(h=f.length;h--;)if((k=f[h])&&k.prepare())for(t=k.edges,m=t.length,v=0;v<m;)if(r=t[v].end(),e=r.x,n=r.y,u=t[++v%m].start(),g=u.x,u=u.y,1E-6<hb(e-g)||1E-6<hb(n-u))t.splice(v,0,new Kc(de(k.site,r,1E-6>hb(e-a)&&1E-6<b-n?{x:a,y:1E-6>hb(g-a)?u:b}:1E-6>hb(n-b)&&1E-6<c-e?{x:1E-6>hb(u-b)?g:c,y:b}:1E-6>hb(e-c)&&1E-6<n-d?{x:c,y:1E-6>hb(g-c)?u:d}:1E-6>hb(n-d)&&1E-6<e-a?
{x:1E-6>hb(u-d)?g:a,y:d}:null),k.site,null)),++m}b={cells:Af,edges:ye};Ag=se=ye=Af=null;return b}function Za(a,b){return b.y-a.y||b.x-a.x}function ob(a){return a.x}function $b(a){return a.y}function fc(){return{leaf:!0,nodes:[],point:null,x:null,y:null}}function ub(a,b,c,d,e,g){if(!a(b,c,d,e,g)){var f=.5*(c+e),h=.5*(d+g);b=b.nodes;b[0]&&ub(a,b[0],c,d,f,h);b[1]&&ub(a,b[1],f,d,e,h);b[2]&&ub(a,b[2],c,h,f,g);b[3]&&ub(a,b[3],f,h,e,g)}}function Pb(a,b,c,d,e,g,f){var h=Infinity,k;(function Sh(a,n,t,v,m){if(!(n>
g||t>f||v<d||m<e)){if(r=a.point){var r,u=b-a.x,y=c-a.y;u=u*u+y*y;u<h&&(u=Math.sqrt(h=u),d=b-u,e=c-u,g=b+u,f=c+u,k=r)}r=a.nodes;u=.5*(n+v);y=.5*(t+m);for(var D=(c>=y)<<1|b>=u,B=D+4;D<B;++D)if(a=r[D&3])switch(D&3){case 0:Sh(a,n,t,u,y);break;case 1:Sh(a,u,t,v,y);break;case 2:Sh(a,n,y,u,m);break;case 3:Sh(a,u,y,v,m)}}})(a,d,e,g,f);return k}function Re(a,b){a=V.rgb(a);b=V.rgb(b);var c=a.r,d=a.g,e=a.b,g=b.r-c,f=b.g-d,h=b.b-e;return function(a){return"#"+ua(Math.round(c+g*a))+ua(Math.round(d+f*a))+ua(Math.round(e+
h*a))}}function Xb(a,b){var c={},d={},e;for(e in a)e in b?c[e]=nc(a[e],b[e]):d[e]=a[e];for(e in b)e in a||(d[e]=b[e]);return function(a){for(e in c)d[e]=c[e](a);return d}}function tb(a,b){a=+a;b=+b;return function(c){return a*(1-c)+b*c}}function Lc(a,b){var c=li.lastIndex=Df.lastIndex=0,d,e,g,f=-1,h=[],k=[];a+="";for(b+="";(d=li.exec(a))&&(e=Df.exec(b));)(g=e.index)>c&&(g=b.slice(c,g),h[f]?h[f]+=g:h[++f]=g),(d=d[0])===(e=e[0])?h[f]?h[f]+=e:h[++f]=e:(h[++f]=null,k.push({i:f,x:tb(d,e)})),c=Df.lastIndex;
c<b.length&&(g=b.slice(c),h[f]?h[f]+=g:h[++f]=g);return 2>h.length?k[0]?(b=k[0].x,function(a){return b(a)+""}):function(){return b}:(b=k.length,function(a){for(var c=0,d;c<b;++c)h[(d=k[c]).i]=d.x(a);return h.join("")})}function nc(a,b){for(var c=V.interpolators.length,d;0<=--c&&!(d=V.interpolators[c](a,b)););return d}function Qb(a,b){var c=[],d=[],e=a.length,g=b.length,f=Math.min(a.length,b.length),h;for(h=0;h<f;++h)c.push(nc(a[h],b[h]));for(;h<e;++h)d[h]=a[h];for(;h<g;++h)d[h]=b[h];return function(a){for(h=
0;h<f;++h)d[h]=c[h](a);return d}}function Ec(a){return function(b){return 0>=b?0:1<=b?1:a(b)}}function Ce(a){return function(b){return 1-a(1-b)}}function cc(a){return function(b){return.5*(.5>b?a(2*b):2-a(2-2*b))}}function ee(a){return a*a}function Fc(a){return a*a*a}function $f(a){if(0>=a)return 0;if(1<=a)return 1;var b=a*a,c=b*a;return 4*(.5>a?c:3*(a-b)+c-.75)}function Hd(a){return 1-Math.cos(a*xb)}function fe(a){return Math.pow(2,10*(a-1))}function Mc(a){return 1-Math.sqrt(1-a*a)}function Rb(a){return a<
1/2.75?7.5625*a*a:a<2/2.75?7.5625*(a-=1.5/2.75)*a+.75:a<2.5/2.75?7.5625*(a-=2.25/2.75)*a+.9375:7.5625*(a-=2.625/2.75)*a+.984375}function dd(a,b){b-=a;return function(c){return Math.round(a+b*c)}}function rd(a){var b=[a.a,a.b],c=[a.c,a.d],d=gc(b),e=b[0]*c[0]+b[1]*c[1],g=-e;c[0]+=g*b[0];c[1]+=g*b[1];g=gc(c)||0;b[0]*c[1]<c[0]*b[1]&&(b[0]*=-1,b[1]*=-1,d*=-1,e*=-1);this.rotate=(d?Math.atan2(b[1],b[0]):Math.atan2(-c[0],c[1]))*Yb;this.translate=[a.e,a.f];this.scale=[d,g];this.skew=g?Math.atan2(e,g)*Yb:0}
function gc(a){var b=Math.sqrt(a[0]*a[0]+a[1]*a[1]);b&&(a[0]/=b,a[1]/=b);return b}function xc(a){return a.length?a.pop()+",":""}function Ac(a,b,c,d){a[0]!==b[0]||a[1]!==b[1]?(c=c.push("translate(",null,",",null,")"),d.push({i:c-4,x:tb(a[0],b[0])},{i:c-2,x:tb(a[1],b[1])})):(b[0]||b[1])&&c.push("translate("+b+")")}function sd(a,b,c,d){a!==b?(180<a-b?b+=360:180<b-a&&(a+=360),d.push({i:c.push(xc(c)+"rotate(",null,")")-2,x:tb(a,b)})):b&&c.push(xc(c)+"rotate("+b+")")}function td(a,b,c,d){a!==b?d.push({i:c.push(xc(c)+
"skewX(",null,")")-2,x:tb(a,b)}):b&&c.push(xc(c)+"skewX("+b+")")}function ud(a,b,c,d){a[0]!==b[0]||a[1]!==b[1]?(c=c.push(xc(c)+"scale(",null,",",null,")"),d.push({i:c-4,x:tb(a[0],b[0])},{i:c-2,x:tb(a[1],b[1])})):1===b[0]&&1===b[1]||c.push(xc(c)+"scale("+b+")")}function qc(a,b){var c=[],d=[];a=V.transform(a);b=V.transform(b);Ac(a.translate,b.translate,c,d);sd(a.rotate,b.rotate,c,d);td(a.skew,b.skew,c,d);ud(a.scale,b.scale,c,d);a=b=null;return function(a){for(var b=-1,e=d.length,g;++b<e;)c[(g=d[b]).i]=
g.x(a);return c.join("")}}function hd(a,b){b=(b-=a=+a)||1/b;return function(c){return(c-a)/b}}function og(a,b){b=(b-=a=+a)||1/b;return function(c){return Math.max(0,Math.min(1,(c-a)/b))}}function kf(a){var b=a.source;a=a.target;var c=a;if(b===c)var d=b;else{d=nf(b);c=nf(c);for(var e=d.pop(),g=c.pop(),f=null;e===g;)f=e,e=d.pop(),g=c.pop();d=f}for(c=[b];b!==d;)b=b.parent,c.push(b);for(b=c.length;a!==d;)c.splice(b,0,a),a=a.parent;return c}function nf(a){for(var b=[],c=a.parent;null!=c;)b.push(a),a=c,
c=c.parent;b.push(a);return b}function Ic(a){a.fixed|=2}function Dg(a){a.fixed&=-7}function ed(a){a.fixed|=4;a.px=a.x;a.py=a.y}function Eh(a){a.fixed&=-5}function th(a,b,c){var d=0,e=0;a.charge=0;if(!a.leaf)for(var g=a.nodes,f=g.length,h=-1,k;++h<f;)k=g[h],null!=k&&(th(k,b,c),a.charge+=k.charge,d+=k.charge*k.cx,e+=k.charge*k.cy);a.point&&(a.leaf||(a.point.x+=Math.random()-.5,a.point.y+=Math.random()-.5),b*=c[a.point.index],a.charge+=a.pointCharge=b,d+=b*a.point.x,e+=b*a.point.y);a.cx=d/a.charge;a.cy=
e/a.charge}function Se(a,b){V.rebind(a,b,"sort","children","value");a.nodes=a;a.links=Yg;return a}function Cg(a,b){for(var c=[a];null!=(a=c.pop());)if(b(a),(e=a.children)&&(d=e.length))for(var d,e;0<=--d;)c.push(e[d])}function cd(a,b){for(var c=[a],d=[];null!=(a=c.pop());)if(d.push(a),(g=a.children)&&(e=g.length)){a=-1;for(var e,g;++a<e;)c.push(g[a])}for(;null!=(a=d.pop());)b(a)}function Hf(a){return a.children}function pg(a){return a.value}function ag(a,b){return b.value-a.value}function Yg(a){return V.merge(a.map(function(a){return(a.children||
[]).map(function(b){return{source:a,target:b}})}))}function mf(a){return a.x}function Fh(a){return a.y}function uh(a,b,c){a.y0=b;a.y=c}function Eg(a){return V.range(a.length)}function Xg(a){var b=-1;a=a[0].length;for(var c=[];++b<a;)c[b]=0;return c}function Kf(a){for(var b=1,c=0,d=a[0][1],e,g=a.length;b<g;++b)(e=a[b][1])>d&&(c=b,d=e);return c}function Hh(a){return a.reduce(Fg,0)}function Fg(a,b){return a+b[1]}function $g(a,b){return Gg(a,Math.ceil(Math.log(b.length)/Math.LN2+1))}function Gg(a,b){var c=
-1,d=+a[0];a=(a[1]-d)/b;for(var e=[];++c<=b;)e[c]=a*c+d;return e}function Qa(a){return[V.min(a),V.max(a)]}function Ih(a,b){return a.value-b.value}function Lf(a,b){var c=a._pack_next;a._pack_next=b;b._pack_prev=a;b._pack_next=c;c._pack_prev=b}function Ue(a,b){a._pack_next=b;b._pack_prev=a}function pf(a,b){var c=b.x-a.x,d=b.y-a.y;a=a.r+b.r;return.999*a*a>c*c+d*d}function Mf(a){function b(a){d=Math.min(a.x-a.r,d);e=Math.max(a.x+a.r,e);g=Math.min(a.y-a.r,g);f=Math.max(a.y+a.r,f)}if((c=a.children)&&(t=
c.length)){var c,d=Infinity,e=-Infinity,g=Infinity,f=-Infinity,h,k,n,t;c.forEach(Hg);var v=c[0];v.x=-v.r;v.y=0;b(v);if(1<t){var m=c[1];m.x=m.r;m.y=0;b(m);if(2<t){var r=c[2];wf(v,m,r);b(r);Lf(v,r);v._pack_prev=r;Lf(r,m);m=v._pack_next;for(h=3;h<t;h++){wf(v,m,r=c[h]);var u=0,y=1,D=1;for(k=m._pack_next;k!==m;k=k._pack_next,y++)if(pf(k,r)){u=1;break}if(1==u)for(n=v._pack_prev;n!==k._pack_prev&&!pf(n,r);n=n._pack_prev,D++);u?(y<D||y==D&&m.r<v.r?Ue(v,m=k):Ue(v=n,m),h--):(Lf(v,r),m=r,b(r))}}}v=(d+e)/2;m=
(g+f)/2;for(h=k=0;h<t;h++)r=c[h],r.x-=v,r.y-=m,k=Math.max(k,r.r+Math.sqrt(r.x*r.x+r.y*r.y));a.r=k;c.forEach(Bc)}}function Hg(a){a._pack_next=a._pack_prev=a}function Bc(a){delete a._pack_next;delete a._pack_prev}function dg(a,b,c,d){var e=a.children;a.x=b+=d*a.x;a.y=c+=d*a.y;a.r*=d;if(e){a=-1;for(var g=e.length;++a<g;)dg(e[a],b,c,d)}}function wf(a,b,c){var d=a.r+c.r,e=b.x-a.x,g=b.y-a.y;if(d&&(e||g)){var f=b.r+c.r,h=e*e+g*g;f*=f;d*=d;b=.5+(d-f)/(2*h);f=Math.sqrt(Math.max(0,2*f*(d+h)-(d-=h)*d-f*f))/
(2*h);c.x=a.x+b*e+f*g;c.y=a.y+b*g-f*e}else c.x=a.x+d,c.y=a.y}function rc(a,b){return a.parent==b.parent?1:2}function hc(a){var b=a.children;return b.length?b[0]:a.t}function Ie(a){var b=a.children,c;return(c=b.length)?b[c-1]:a.t}function Qf(a){return 1+V.max(a,function(a){return a.y})}function Je(a){return a.reduce(function(a,b){return a+b.x},0)/a.length}function eg(a){var b=a.children;return b&&b.length?eg(b[0]):a}function bb(a){var b=a.children,c;return b&&(c=b.length)?bb(b[c-1]):a}function fb(a){return{x:a.x,
y:a.y,dx:a.dx,dy:a.dy}}function Jd(a,b){var c=a.x+b[3],d=a.y+b[0],e=a.dx-b[1]-b[3];a=a.dy-b[0]-b[2];0>e&&(c+=e/2,e=0);0>a&&(d+=a/2,a=0);return{x:c,y:d,dx:e,dy:a}}function ie(a){var b=a[0];a=a[a.length-1];return b<a?[b,a]:[a,b]}function jd(a){return a.rangeExtent?a.rangeExtent():ie(a.range())}function Kd(a,b,c,d){var e=c(a[0],a[1]),g=d(b[0],b[1]);return function(a){return g(e(a))}}function sg(a,b){var c=0,d=a.length-1,e=a[c],g=a[d];if(g<e){var f=c;c=d;d=f;f=e;e=g;g=f}a[c]=b.floor(e);a[d]=b.ceil(g);
return a}function Rf(a){return a?{floor:function(b){return Math.floor(b/a)*a},ceil:function(b){return Math.ceil(b/a)*a}}:oi}function jc(a,b,c,d){var e=[],g=[],f=0,h=Math.min(a.length,b.length)-1;a[h]<a[0]&&(a=a.slice().reverse(),b=b.slice().reverse());for(;++f<=h;)e.push(c(a[f-1],a[f])),g.push(d(b[f-1],b[f]));return function(b){var c=V.bisect(a,b,1,h)-1;return g[c](e[c](b))}}function fg(a,b,c,d){function e(){var e=2<Math.min(a.length,b.length)?jc:Kd,k=d?og:hd;f=e(a,b,k,c);h=e(b,a,k,nc);return g}function g(a){return f(a)}
var f,h;g.invert=function(a){return h(a)};g.domain=function(b){if(!arguments.length)return a;a=b.map(Number);return e()};g.range=function(a){if(!arguments.length)return b;b=a;return e()};g.rangeRound=function(a){return g.range(a).interpolate(dd)};g.clamp=function(a){if(!arguments.length)return d;d=a;return e()};g.interpolate=function(a){if(!arguments.length)return c;c=a;return e()};g.ticks=function(b){return V.range.apply(V,Ve(a,b))};g.tickFormat=function(b,c){return je(a,b,c)};g.nice=function(b){Ig(a,
b);return e()};g.copy=function(){return fg(a,b,c,d)};return e()}function rf(a,b){return V.rebind(a,b,"range","rangeRound","interpolate","clamp")}function Ig(a,b){sg(a,Rf(Ve(a,b)[2]));sg(a,Rf(Ve(a,b)[2]));return a}function Ve(a,b){null==b&&(b=10);a=ie(a);var c=a[1]-a[0],d=Math.pow(10,Math.floor(Math.log(c/b)/Math.LN10));b=b/c*d;.15>=b?d*=10:.35>=b?d*=5:.75>=b&&(d*=2);a[0]=Math.ceil(a[0]/d)*d;a[1]=Math.floor(a[1]/d)*d+.5*d;a[2]=d;return a}function je(a,b,c){a=Ve(a,b);if(c){b=gh.exec(c);b.shift();if("s"===
b[8]){var d=V.formatPrefix(Math.max(hb(a[0]),hb(a[1])));b[7]||(b[7]="."+sf(d.scale(a[2])));b[8]="f";c=V.format(b.join(""));return function(a){return c(d.scale(a))+d.symbol}}b[7]||(b[7]="."+Ye(b[8],a));c=b.join("")}else c=",."+sf(a[2])+"f";return V.format(c)}function sf(a){return-Math.floor(Math.log(a)/Math.LN10+.01)}function Ye(a,b){var c=sf(b[2]);return a in zi?Math.abs(c-sf(Math.max(hb(b[0]),hb(b[1]))))+ +("e"!==a):c-2*("%"===a)}function tf(a,b,c,d){function e(a){return(c?Math.log(0>a?0:a):-Math.log(0<
a?0:-a))/Math.log(b)}function g(a){return c?Math.pow(b,a):-Math.pow(b,-a)}function f(b){return a(e(b))}f.invert=function(b){return g(a.invert(b))};f.domain=function(b){if(!arguments.length)return d;c=0<=b[0];a.domain((d=b.map(Number)).map(e));return f};f.base=function(c){if(!arguments.length)return b;b=+c;a.domain(d.map(e));return f};f.nice=function(){var b=sg(d.map(e),c?Math:Gi);a.domain(b);d=b.map(g);return f};f.ticks=function(){var a=ie(d),f=[],h=a[0];a=a[1];var k=Math.floor(e(h)),n=Math.ceil(e(a)),
t=b%1?2:b;if(isFinite(n-k)){if(c){for(;k<n;k++)for(var v=1;v<t;v++)f.push(g(k)*v);f.push(g(k))}else for(f.push(g(k));k++<n;)for(v=t-1;0<v;v--)f.push(g(k)*v);for(k=0;f[k]<h;k++);for(n=f.length;f[n-1]>a;n--);f=f.slice(k,n)}return f};f.tickFormat=function(a,c){if(!arguments.length)return pi;2>arguments.length?c=pi:"function"!==typeof c&&(c=V.format(c));var d=Math.max(1,b*a/f.ticks().length);return function(a){var f=a/g(Math.round(e(a)));f*b<b-.5&&(f*=b);return f<=d?c(a):""}};f.copy=function(){return tf(a.copy(),
b,c,d)};return rf(f,a)}function gg(a,b,c){function d(b){return a(e(b))}var e=hg(b),g=hg(1/b);d.invert=function(b){return g(a.invert(b))};d.domain=function(b){if(!arguments.length)return c;a.domain((c=b.map(Number)).map(e));return d};d.ticks=function(a){return V.range.apply(V,Ve(c,a))};d.tickFormat=function(a,b){return je(c,a,b)};d.nice=function(a){return d.domain(Ig(c,a))};d.exponent=function(f){if(!arguments.length)return b;e=hg(b=f);g=hg(1/b);a.domain(c.map(e));return d};d.copy=function(){return gg(a.copy(),
b,c)};return rf(d,a)}function hg(a){return function(b){return 0>b?-Math.pow(-b,a):Math.pow(b,a)}}function ah(a,b){function c(c){return g[((e.get(c)||("range"===b.t?e.set(c,a.push(c)):NaN))-1)%g.length]}function d(b,c){return V.range(a.length).map(function(a){return b+c*a})}var e,g,f;c.domain=function(d){if(!arguments.length)return a;a=[];e=new u;for(var g=-1,f=d.length,h;++g<f;)e.has(h=d[g])||e.set(h,a.push(h));return c[b.t].apply(c,b.a)};c.range=function(a){if(!arguments.length)return g;g=a;f=0;
b={t:"range",a:arguments};return c};c.rangePoints=function(e,h){2>arguments.length&&(h=0);var k=e[0],n=e[1];n=2>a.length?(k=(k+n)/2,0):(n-k)/(a.length-1+h);g=d(k+n*h/2,n);f=0;b={t:"rangePoints",a:arguments};return c};c.rangeRoundPoints=function(e,h){2>arguments.length&&(h=0);var k=e[0],n=e[1],t=2>a.length?(k=n=Math.round((k+n)/2),0):(n-k)/(a.length-1+h)|0;g=d(k+Math.round(t*h/2+(n-k-(a.length-1+h)*t)/2),t);f=0;b={t:"rangeRoundPoints",a:arguments};return c};c.rangeBands=function(e,h,k){2>arguments.length&&
(h=0);3>arguments.length&&(k=h);var n=e[1]<e[0],t=e[n-0],v=(e[1-n]-t)/(a.length-h+2*k);g=d(t+v*k,v);n&&g.reverse();f=v*(1-h);b={t:"rangeBands",a:arguments};return c};c.rangeRoundBands=function(e,h,k){2>arguments.length&&(h=0);3>arguments.length&&(k=h);var n=e[1]<e[0],t=e[n-0],v=e[1-n],m=Math.floor((v-t)/(a.length-h+2*k));g=d(t+Math.round((v-t-(a.length-h)*m)/2),m);n&&g.reverse();f=Math.round(m*(1-h));b={t:"rangeRoundBands",a:arguments};return c};c.rangeBand=function(){return f};c.rangeExtent=function(){return ie(b.a[0])};
c.copy=function(){return ah(a,b)};return c.domain(a)}function Jg(a,b){function c(){var c=0,e=b.length;for(g=[];++c<e;)g[c-1]=V.quantile(a,c/e);return d}function d(a){if(!isNaN(a=+a))return b[V.bisect(g,a)]}var g;d.domain=function(b){if(!arguments.length)return a;a=b.map(h).filter(e).sort(k);return c()};d.range=function(a){if(!arguments.length)return b;b=a;return c()};d.quantiles=function(){return g};d.invertExtent=function(c){c=b.indexOf(c);return 0>c?[NaN,NaN]:[0<c?g[c-1]:a[0],c<g.length?g[c]:a[a.length-
1]]};d.copy=function(){return Jg(a,b)};return c()}function bh(a,b,c){function d(b){return c[Math.max(0,Math.min(f,Math.floor(g*(b-a))))]}function e(){g=c.length/(b-a);f=c.length-1;return d}var g,f;d.domain=function(c){if(!arguments.length)return[a,b];a=+c[0];b=+c[c.length-1];return e()};d.range=function(a){if(!arguments.length)return c;c=a;return e()};d.invertExtent=function(b){b=c.indexOf(b);b=0>b?NaN:b/g+a;return[b,b+1/g]};d.copy=function(){return bh(a,b,c)};return e()}function ch(a,b){function c(c){if(c<=
c)return b[V.bisect(a,c)]}c.domain=function(b){if(!arguments.length)return a;a=b;return c};c.range=function(a){if(!arguments.length)return b;b=a;return c};c.invertExtent=function(c){c=b.indexOf(c);return[a[c-1],a[c]]};c.copy=function(){return ch(a,b)};return c}function Ud(a){function b(a){return+a}b.invert=b;b.domain=b.range=function(c){if(!arguments.length)return a;a=c.map(b);return b};b.ticks=function(b){return V.range.apply(V,Ve(a,b))};b.tickFormat=function(b,c){return je(a,b,c)};b.copy=function(){return Ud(a)};
return b}function Ke(){return 0}function ug(a){return a.innerRadius}function tg(a){return a.outerRadius}function Jh(a){return a.startAngle}function Kh(a){return a.endAngle}function Th(a){return a&&a.padAngle}function ig(a,b,c,d){return 0<(a-c)*b-(b-d)*a?0:1}function Nf(a,b,c,d,e){var g=a[0]-b[0],f=a[1]-b[1];e=(e?d:-d)/Math.sqrt(g*g+f*f);f*=e;g*=-e;var h=a[0]+f,k=a[1]+g,n=b[0]+f,t=b[1]+g;a=(h+n)/2;b=(k+t)/2;e=n-h;var v=t-k,m=e*e+v*v;d=c-d;t=h*t-n*k;var r=(0>v?-1:1)*Math.sqrt(Math.max(0,d*d*m-t*t));
h=(t*v-e*r)/m;k=(-t*e-v*r)/m;n=(t*v+e*r)/m;e=(-t*e+v*r)/m;v=h-a;m=k-b;a=n-a;b=e-b;v*v+m*m>a*a+b*b&&(h=n,k=e);return[[h-f,k-g],[h*c/d,k*c/d]]}function Lh(a){function b(b){function f(){k.push("M",g(a(n),h))}for(var k=[],n=[],t=-1,v=b.length,m,r=Ka(c),u=Ka(d);++t<v;)e.call(this,m=b[t],t)?n.push([+r.call(this,m,t),+u.call(this,m,t)]):n.length&&(f(),n=[]);n.length&&f();return k.length?k.join(""):null}var c=Fd,d=qe,e=Wd,g=ke,f=g.key,h=.7;b.x=function(a){if(!arguments.length)return c;c=a;return b};b.y=function(a){if(!arguments.length)return d;
d=a;return b};b.defined=function(a){if(!arguments.length)return e;e=a;return b};b.interpolate=function(a){if(!arguments.length)return f;f="function"===typeof a?g=a:(g=Nc.get(a)||ke).key;return b};b.tension=function(a){if(!arguments.length)return h;h=a;return b};return b}function ke(a){return 1<a.length?a.join("L"):a+"Z"}function hh(a){return a.join("L")+"Z"}function Fe(a){for(var b=0,c=a.length,d=a[0],e=[d[0],",",d[1]];++b<c;)e.push("V",(d=a[b])[1],"H",d[0]);return e.join("")}function Mg(a){for(var b=
0,c=a.length,d=a[0],e=[d[0],",",d[1]];++b<c;)e.push("H",(d=a[b])[0],"V",d[1]);return e.join("")}function Xe(a,b){if(1>b.length||a.length!=b.length&&a.length!=b.length+2)return ke(a);var c=a.length!=b.length,d="",e=a[0],g=a[1],f=b[0],h=f,k=1;c&&(d+="Q"+(g[0]-2*f[0]/3)+","+(g[1]-2*f[1]/3)+","+g[0]+","+g[1],e=a[1],k=2);if(1<b.length)for(h=b[1],g=a[k],k++,d+="C"+(e[0]+f[0])+","+(e[1]+f[1])+","+(g[0]-h[0])+","+(g[1]-h[1])+","+g[0]+","+g[1],e=2;e<b.length;e++,k++)g=a[k],h=b[e],d+="S"+(g[0]-h[0])+","+(g[1]-
h[1])+","+g[0]+","+g[1];c&&(a=a[k],d+="Q"+(g[0]+2*h[0]/3)+","+(g[1]+2*h[1]/3)+","+a[0]+","+a[1]);return d}function Xc(a,b){var c=[];b=(1-b)/2;for(var d,e=a[0],g=a[1],f=1,h=a.length;++f<h;)d=e,e=g,g=a[f],c.push([b*(g[0]-d[0]),b*(g[1]-d[1])]);return c}function Ng(a){if(3>a.length)return ke(a);var b=1,c=a.length,d=a[0],e=d[0],g=d[1],f=[e,e,e,(d=a[1])[0]],h=[g,g,g,d[1]];e=[e,",",g,"L",yc(Ee,f),",",yc(Ee,h)];for(a.push(a[c-1]);++b<=c;)d=a[b],f.shift(),f.push(d[0]),h.shift(),h.push(d[1]),Ld(e,f,h);a.pop();
e.push("L",d);return e.join("")}function yc(a,b){return a[0]*b[0]+a[1]*b[1]+a[2]*b[2]+a[3]*b[3]}function Ld(a,b,c){a.push("C",yc(Ff,b),",",yc(Ff,c),",",yc(te,b),",",yc(te,c),",",yc(Ee,b),",",yc(Ee,c))}function le(a,b){return(b[1]-a[1])/(b[0]-a[0])}function ve(a){for(var b,c=-1,d=a.length,e,g;++c<d;)b=a[c],e=b[0],g=b[1]-xb,b[0]=e*Math.cos(g),b[1]=e*Math.sin(g);return a}function id(a){function b(b){function k(){m.push("M",h(a(u),v),t,n(a(r.reverse()),v),"Z")}for(var m=[],r=[],u=[],y=-1,D=b.length,B,
l=Ka(c),A=Ka(e),C=c===d?function(){return q}:Ka(d),p=e===g?function(){return G}:Ka(g),q,G;++y<D;)f.call(this,B=b[y],y)?(r.push([q=+l.call(this,B,y),G=+A.call(this,B,y)]),u.push([+C.call(this,B,y),+p.call(this,B,y)])):r.length&&(k(),r=[],u=[]);r.length&&k();return m.length?m.join(""):null}var c=Fd,d=Fd,e=0,g=qe,f=Wd,h=ke,k=h.key,n=h,t="L",v=.7;b.x=function(a){if(!arguments.length)return d;c=d=a;return b};b.x0=function(a){if(!arguments.length)return c;c=a;return b};b.x1=function(a){if(!arguments.length)return d;
d=a;return b};b.y=function(a){if(!arguments.length)return g;e=g=a;return b};b.y0=function(a){if(!arguments.length)return e;e=a;return b};b.y1=function(a){if(!arguments.length)return g;g=a;return b};b.defined=function(a){if(!arguments.length)return f;f=a;return b};b.interpolate=function(a){if(!arguments.length)return k;k="function"===typeof a?h=a:(h=Nc.get(a)||ke).key;n=h.reverse||h;t=h.closed?"M":"L";return b};b.tension=function(a){if(!arguments.length)return v;v=a;return b};return b}function jh(a){return a.radius}
function Yc(a){return[a.x,a.y]}function mh(a){return function(){var b=a.apply(this,arguments),c=b[0];b=b[1]-xb;return[c*Math.cos(b),c*Math.sin(b)]}}function Le(){return 64}function Ze(){return"circle"}function ih(a){a=Math.sqrt(a/ib);return"M0,"+a+"A"+a+","+a+" 0 1,1 0,"+-a+"A"+a+","+a+" 0 1,1 0,"+a+"Z"}function Pg(a){return function(){var b,c,d;(b=this[a])&&(d=b[c=b.active])&&(d.timer.c=null,d.timer.t=NaN,--b.count?delete b[c]:delete this[a],b.active+=.5,d.event&&d.event.interrupt.call(this,this.__data__,
d.index))}}function kg(a,b,c){Of(a,Gc);a.namespace=b;a.id=c;return a}function $e(a,b,c,d){var e=a.id,g=a.namespace;return fa(a,"function"===typeof c?function(a,f,h){a[g][e].tween.set(b,d(c.call(a,a.__data__,f,h)))}:(c=d(c),function(a){a[g][e].tween.set(b,c)}))}function we(a){null==a&&(a="");return function(){this.textContent=a}}function Qg(a){return null==a?"__transition__":"__transition_"+a+"__"}function jg(a,b,c,d,e){function g(a){var b=n.delay;y.t=b+r;if(b<=a)return f(a-b);y.c=f}function f(c){var e=
k.active,g=k[e];g&&(g.timer.c=null,g.timer.t=NaN,--k.count,delete k[e],g.event&&g.event.interrupt.call(a,a.__data__,g.index));for(var f in k)+f<d&&(e=k[f],e.timer.c=null,e.timer.t=NaN,--k.count,delete k[f]);y.c=h;eb(function(){y.c&&h(c||1)&&(y.c=null,y.t=NaN);return 1},0,r);k.active=d;n.event&&n.event.start.call(a,a.__data__,b);m=[];n.tween.forEach(function(c,d){(d=d.call(a,a.__data__,b))&&m.push(d)});v=n.ease;t=n.duration}function h(e){e/=t;for(var g=v(e),f=m.length;0<f;)m[--f].call(a,g);if(1<=e)return n.event&&
n.event.end.call(a,a.__data__,b),--k.count?delete k[d]:delete a[c],1}var k=a[c]||(a[c]={active:0,count:0}),n=k[d],t,v,m;if(!n){var r=e.time;var y=eb(g,0,r);n=k[d]={tween:new u,time:r,timer:y,delay:e.delay,duration:e.duration,ease:e.ease,index:b};e=null;++k.count}}function xh(a,b,c){a.attr("transform",function(a){var d=b(a);return"translate("+(isFinite(d)?d:c(a))+",0)"})}function Uh(a,b,c){a.attr("transform",function(a){var d=b(a);return"translate(0,"+(isFinite(d)?d:c(a))+")"})}function Og(a){return a.toISOString()}
function kh(a,b,c){function d(b){return a(b)}function e(a,c){var d=(a[1]-a[0])/c,e=V.bisect(qg,d);return e==qg.length?[b.year,Ve(a.map(function(a){return a/31536E6}),c)[2]]:e?b[d/qg[e-1]<qg[e]/d?e-1:e]:[fi,Ve(a,c)[2]]}d.invert=function(b){return Qd(a.invert(b))};d.domain=function(b){if(!arguments.length)return a.domain().map(Qd);a.domain(b);return d};d.nice=function(a,b){function c(c){return!isNaN(c)&&!a.range(c,Qd(+c+1),b).length}var g=d.domain(),f=ie(g);if(f=null==a?e(f,10):"number"===typeof a&&
e(f,a))a=f[0],b=f[1];return d.domain(sg(g,1<b?{floor:function(b){for(;c(b=a.floor(b));)b=Qd(b-1);return b},ceil:function(b){for(;c(b=a.ceil(b));)b=Qd(+b+1);return b}}:a))};d.ticks=function(a,b){var c=ie(d.domain()),g=null==a?e(c,10):"number"===typeof a?e(c,a):!a.range&&[{range:a},b];g&&(a=g[0],b=g[1]);return a.range(c[0],Qd(+c[1]+1),1>b?1:b)};d.tickFormat=function(){return c};d.copy=function(){return kh(a.copy(),b,c)};return rf(d,a)}function Qd(a){return new Date(a)}function Wh(a){return JSON.parse(a.responseText)}
function Vh(a){var b=Pc.createRange();b.selectNode(Pc.body);return b.createContextualFragment(a.responseText)}var V={version:"3.5.17"},Kg=[].slice,kd=function(a){return Kg.call(a)},Pc=this.document;if(Pc)try{kd(Pc.documentElement.childNodes)[0].nodeType}catch(cg){kd=function(a){for(var b=a.length,c=Array(b);b--;)c[b]=a[b];return c}}Date.now||(Date.now=function(){return+new Date});if(Pc)try{Pc.createElement("DIV").style.setProperty("opacity",0,"")}catch(cg){var Sf=this.Element.prototype,wh=Sf.setAttribute,
gi=Sf.setAttributeNS,qf=this.CSSStyleDeclaration.prototype,ki=qf.setProperty;Sf.setAttribute=function(a,b){wh.call(this,a,b+"")};Sf.setAttributeNS=function(a,b,c){gi.call(this,a,b,c+"")};qf.setProperty=function(a,b,c){ki.call(this,a,b+"",c)}}V.ascending=k;V.descending=function(a,b){return b<a?-1:b>a?1:b>=a?0:NaN};V.min=function(a,b){var c=-1,d=a.length,e;if(1===arguments.length){for(;++c<d;)if(null!=(e=a[c])&&e>=e){var g=e;break}for(;++c<d;)null!=(e=a[c])&&g>e&&(g=e)}else{for(;++c<d;)if(null!=(e=
b.call(a,a[c],c))&&e>=e){g=e;break}for(;++c<d;)null!=(e=b.call(a,a[c],c))&&g>e&&(g=e)}return g};V.max=function(a,b){var c=-1,d=a.length,e;if(1===arguments.length){for(;++c<d;)if(null!=(e=a[c])&&e>=e){var g=e;break}for(;++c<d;)null!=(e=a[c])&&e>g&&(g=e)}else{for(;++c<d;)if(null!=(e=b.call(a,a[c],c))&&e>=e){g=e;break}for(;++c<d;)null!=(e=b.call(a,a[c],c))&&e>g&&(g=e)}return g};V.extent=function(a,b){var c=-1,d=a.length,e,g;if(1===arguments.length){for(;++c<d;)if(null!=(e=a[c])&&e>=e){var f=g=e;break}for(;++c<
d;)null!=(e=a[c])&&(f>e&&(f=e),g<e&&(g=e))}else{for(;++c<d;)if(null!=(e=b.call(a,a[c],c))&&e>=e){f=g=e;break}for(;++c<d;)null!=(e=b.call(a,a[c],c))&&(f>e&&(f=e),g<e&&(g=e))}return[f,g]};V.sum=function(a,b){var c=0,d=a.length,e,g=-1;if(1===arguments.length)for(;++g<d;)isNaN(e=+a[g])||(c+=e);else for(;++g<d;)isNaN(e=+b.call(a,a[g],g))||(c+=e);return c};V.mean=function(a,b){var c=0,d=a.length,e,g=-1,f=d;if(1===arguments.length)for(;++g<d;)isNaN(e=h(a[g]))?--f:c+=e;else for(;++g<d;)isNaN(e=h(b.call(a,
a[g],g)))?--f:c+=e;if(f)return c/f};V.quantile=function(a,b){var c=(a.length-1)*b+1;b=Math.floor(c);var d=+a[b-1];return(c-=b)?d+c*(a[b]-d):d};V.median=function(a,b){var c=[],d=a.length,e,g=-1;if(1===arguments.length)for(;++g<d;)isNaN(e=h(a[g]))||c.push(e);else for(;++g<d;)isNaN(e=h(b.call(a,a[g],g)))||c.push(e);if(c.length)return V.quantile(c.sort(k),.5)};V.variance=function(a,b){var c=a.length,d=0,e,g=0,f=-1,k=0;if(1===arguments.length)for(;++f<c;){if(!isNaN(e=h(a[f]))){var n=e-d;d+=n/++k;g+=n*
(e-d)}}else for(;++f<c;)isNaN(e=h(b.call(a,a[f],f)))||(n=e-d,d+=n/++k,g+=n*(e-d));if(1<k)return g/(k-1)};V.deviation=function(){var a=V.variance.apply(this,arguments);return a?Math.sqrt(a):a};var Mh=f(k);V.bisectLeft=Mh.left;V.bisect=V.bisectRight=Mh.right;V.bisector=function(a){return f(1===a.length?function(b,c){return k(a(b),c)}:a)};V.shuffle=function(a,b,c){3>(d=arguments.length)&&(c=a.length,2>d&&(b=0));for(var d=c-b,e,g;d;)g=Math.random()*d--|0,e=a[d+b],a[d+b]=a[g+b],a[g+b]=e;return a};V.permute=
function(a,b){for(var c=b.length,d=Array(c);c--;)d[c]=a[b[c]];return d};V.pairs=function(a){for(var b=0,c=a.length-1,d=a[0],e=Array(0>c?0:c);b<c;)e[b]=[d,d=a[++b]];return e};V.transpose=function(a){if(!(f=a.length))return[];for(var c=-1,d=V.min(a,b),e=Array(d);++c<d;)for(var g=-1,f,h=e[c]=Array(f);++g<f;)h[g]=a[g][c];return e};V.zip=function(){return V.transpose(arguments)};V.keys=function(a){var b=[],c;for(c in a)b.push(c);return b};V.values=function(a){var b=[],c;for(c in a)b.push(a[c]);return b};
V.entries=function(a){var b=[],c;for(c in a)b.push({key:c,value:a[c]});return b};V.merge=function(a){var b=a.length;var c=-1;for(var d=0,e,g;++c<b;)d+=a[c].length;for(e=Array(d);0<=--b;)for(g=a[b],c=g.length;0<=--c;)e[--d]=g[c];return e};var hb=Math.abs;V.range=function(a,b,c){3>arguments.length&&(c=1,2>arguments.length&&(b=a,a=0));if(Infinity===(b-a)/c)throw Error("infinite range");var d=[];var e=hb(c);for(var g=1;e*g%1;)g*=10;e=g;g=-1;var f;a*=e;b*=e;c*=e;if(0>c)for(;(f=a+c*++g)>b;)d.push(f/e);
else for(;(f=a+c*++g)<b;)d.push(f/e);return d};V.map=function(a,b){var c=new u;if(a instanceof u)a.forEach(function(a,b){c.set(a,b)});else if(Array.isArray(a)){var d=-1,e=a.length,g;if(1===arguments.length)for(;++d<e;)c.set(d,a[d]);else for(;++d<e;)c.set(b.call(a,g=a[d],d),g)}else for(d in a)c.set(d,a[d]);return c};n(u,{has:g,get:function(a){return this._[r(a)]},set:function(a,b){return this._[r(a)]=b},remove:c,keys:v,values:function(){var a=[],b;for(b in this._)a.push(this._[b]);return a},entries:function(){var a=
[],b;for(b in this._)a.push({key:d(b),value:this._[b]});return a},size:t,empty:y,forEach:function(a){for(var b in this._)a.call(this,d(b),this._[b])}});V.nest=function(){function a(b,e,h){if(h>=d.length)return f?f.call(c,e):g?e.sort(g):e;for(var k=-1,n=e.length,t=d[h++],v,m,r=new u,y;++k<n;)(y=r.get(v=t(m=e[k])))?y.push(m):r.set(v,[m]);b?(m=b(),e=function(c,d){m.set(c,a(b,d,h))}):(m={},e=function(c,d){m[c]=a(b,d,h)});r.forEach(e);return m}function b(a,c){if(c>=d.length)return a;var g=[],f=e[c++];
a.forEach(function(a,d){g.push({key:a,values:b(d,c)})});return f?g.sort(function(a,b){return f(a.key,b.key)}):g}var c={},d=[],e=[],g,f;c.map=function(b,c){return a(c,b,0)};c.entries=function(c){return b(a(V.map,c,0),0)};c.key=function(a){d.push(a);return c};c.sortKeys=function(a){e[d.length-1]=a;return c};c.sortValues=function(a){g=a;return c};c.rollup=function(a){f=a;return c};return c};V.set=function(a){var b=new B;if(a)for(var c=0,d=a.length;c<d;++c)b.add(a[c]);return b};n(B,{has:g,add:function(a){this._[r(a+=
"")]=!0;return a},remove:c,values:v,size:t,empty:y,forEach:function(a){for(var b in this._)a.call(this,d(b))}});V.behavior={};V.rebind=function(a,b){for(var c=1,d=arguments.length,e;++c<d;)a[e=arguments[c]]=l(a,b,b[e]);return a};var Ge="webkit ms moz Moz o O".split(" ");V.dispatch=function(){for(var a=new q,b=-1,c=arguments.length;++b<c;)a[arguments[b]]=J(a);return a};q.prototype.on=function(a,b){var c=a.indexOf("."),d="";0<=c&&(d=a.slice(c+1),a=a.slice(0,c));if(a)return 2>arguments.length?this[a].on(d):
this[a].on(d,b);if(2===arguments.length){if(null==b)for(a in this)if(this.hasOwnProperty(a))this[a].on(d,null);return this}};V.event=null;V.requote=function(a){return a.replace(hi,"\\$\x26")};var hi=/[\\\^\$\*\+\?\|\[\]\(\)\.\{\}]/g,Of={}.__proto__?function(a,b){a.__proto__=b}:function(a,b){for(var c in b)a[c]=b[c]},dh=function(a,b){return b.querySelector(a)},rg=function(a,b){return b.querySelectorAll(a)},Lg=function(a,b){var c=a.matches||a[A(a,"matchesSelector")];Lg=function(a,b){return c.call(a,
b)};return Lg(a,b)};"function"===typeof Sizzle&&(dh=function(a,b){return Sizzle(a,b)[0]||null},rg=Sizzle,Lg=Sizzle.matchesSelector);V.selection=function(){return V.select(Pc.documentElement)};var Ib=V.selection.prototype=[];Ib.select=function(a){var b=[],c,d,e,g;a=I(a);for(var f=-1,h=this.length;++f<h;){b.push(c=[]);c.parentNode=(e=this[f]).parentNode;for(var k=-1,n=e.length;++k<n;)(g=e[k])?(c.push(d=a.call(g,g.__data__,k,f)),d&&"__data__"in g&&(d.__data__=g.__data__)):c.push(null)}return O(b)};Ib.selectAll=
function(a){var b=[],c,d;a=Q(a);for(var e=-1,g=this.length;++e<g;)for(var f=this[e],h=-1,k=f.length;++h<k;)if(d=f[h])b.push(c=kd(a.call(d,d.__data__,h,e))),c.parentNode=d;return O(b)};var Nh={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};V.ns={prefix:Nh,qualify:function(a){var b=a.indexOf(":"),c=a;0<=b&&"xmlns"!==(c=a.slice(0,b))&&(a=a.slice(b+1));return Nh.hasOwnProperty(c)?
{space:Nh[c],local:a}:a}};Ib.attr=function(a,b){if(2>arguments.length){if("string"===typeof a){var c=this.node();a=V.ns.qualify(a);return a.local?c.getAttributeNS(a.space,a.local):c.getAttribute(a)}for(b in a)this.each(N(b,a[b]));return this}return this.each(N(a,b))};Ib.classed=function(a,b){if(2>arguments.length){if("string"===typeof a){var c=this.node(),d=(a=(a+"").trim().split(/^|\s+/)).length,e=-1;if(b=c.classList)for(;++e<d;){if(!b.contains(a[e]))return!1}else for(b=c.getAttribute("class");++e<
d;)if(!L(a[e]).test(b))return!1;return!0}for(b in a)this.each(R(b,a[b]));return this}return this.each(R(a,b))};Ib.style=function(b,c,d){var e=arguments.length;if(3>e){if("string"!==typeof b){2>e&&(c="");for(d in b)this.each(w(d,b[d],c));return this}if(2>e)return e=this.node(),a(e).getComputedStyle(e,null).getPropertyValue(b);d=""}return this.each(w(b,c,d))};Ib.property=function(a,b){if(2>arguments.length){if("string"===typeof a)return this.node()[a];for(b in a)this.each(x(b,a[b]));return this}return this.each(x(a,
b))};Ib.text=function(a){return arguments.length?this.each("function"===typeof a?function(){var b=a.apply(this,arguments);this.textContent=null==b?"":b}:null==a?function(){this.textContent=""}:function(){this.textContent=a}):this.node().textContent};Ib.html=function(a){return arguments.length?this.each("function"===typeof a?function(){var b=a.apply(this,arguments);this.innerHTML=null==b?"":b}:null==a?function(){this.innerHTML=""}:function(){this.innerHTML=a}):this.node().innerHTML};Ib.append=function(a){a=
Y(a);return this.select(function(){return this.appendChild(a.apply(this,arguments))})};Ib.insert=function(a,b){a=Y(a);b=I(b);return this.select(function(){return this.insertBefore(a.apply(this,arguments),b.apply(this,arguments)||null)})};Ib.remove=function(){return this.each(ia)};Ib.data=function(a,b){function c(a,c){var d,e=a.length,g=c.length,f=Math.min(e,g),t=Array(g),v=Array(g),m=Array(e),r,y;if(b){f=new u;var D=Array(e),B;for(d=-1;++d<e;)if(r=a[d])f.has(B=b.call(r,r.__data__,d))?m[d]=r:f.set(B,
r),D[d]=B;for(d=-1;++d<g;)(r=f.get(B=b.call(c,y=c[d],d)))?!0!==r&&(t[d]=r,r.__data__=y):v[d]={__data__:y},f.set(B,!0);for(d=-1;++d<e;)d in D&&!0!==f.get(D[d])&&(m[d]=a[d])}else{for(d=-1;++d<f;)r=a[d],y=c[d],r?(r.__data__=y,t[d]=r):v[d]={__data__:y};for(;d<g;++d)v[d]={__data__:c[d]};for(;d<e;++d)m[d]=a[d]}v.update=t;v.parentNode=t.parentNode=m.parentNode=a.parentNode;h.push(v);k.push(t);n.push(m)}var d=-1,e=this.length,g,f;if(!arguments.length){for(a=Array(e=(g=this[0]).length);++d<e;)if(f=g[d])a[d]=
f.__data__;return a}var h=z([]),k=O([]),n=O([]);if("function"===typeof a)for(;++d<e;)c(g=this[d],a.call(g,g.parentNode.__data__,d));else for(;++d<e;)c(g=this[d],a);k.enter=function(){return h};k.exit=function(){return n};return k};Ib.datum=function(a){return arguments.length?this.property("__data__",a):this.property("__data__")};Ib.filter=function(a){var b=[],c,d,e;"function"!==typeof a&&(a=S(a));for(var g=0,f=this.length;g<f;g++){b.push(c=[]);c.parentNode=(d=this[g]).parentNode;for(var h=0,k=d.length;h<
k;h++)(e=d[h])&&a.call(e,e.__data__,h,g)&&c.push(e)}return O(b)};Ib.order=function(){for(var a=-1,b=this.length;++a<b;)for(var c=this[a],d=c.length-1,e=c[d],g;0<=--d;)if(g=c[d])e&&e!==g.nextSibling&&e.parentNode.insertBefore(g,e),e=g;return this};Ib.sort=function(a){a=W.apply(this,arguments);for(var b=-1,c=this.length;++b<c;)this[b].sort(a);return this.order()};Ib.each=function(a){return fa(this,function(b,c,d){a.call(b,b.__data__,c,d)})};Ib.call=function(a){var b=kd(arguments);a.apply(b[0]=this,
b);return this};Ib.empty=function(){return!this.node()};Ib.node=function(){for(var a=0,b=this.length;a<b;a++)for(var c=this[a],d=0,e=c.length;d<e;d++){var g=c[d];if(g)return g}return null};Ib.size=function(){var a=0;fa(this,function(){++a});return a};var Pf=[];V.selection.enter=z;V.selection.enter.prototype=Pf;Pf.append=Ib.append;Pf.empty=Ib.empty;Pf.node=Ib.node;Pf.call=Ib.call;Pf.size=Ib.size;Pf.select=function(a){for(var b=[],c,d,e,g,f,h=-1,k=this.length;++h<k;){e=(g=this[h]).update;b.push(c=[]);
c.parentNode=g.parentNode;for(var n=-1,t=g.length;++n<t;)(f=g[n])?(c.push(e[n]=d=a.call(g.parentNode,f.__data__,n,h)),d.__data__=f.__data__):c.push(null)}return O(b)};Pf.insert=function(a,b){2>arguments.length&&(b=ha(this));return Ib.insert.call(this,a,b)};V.select=function(a){if("string"===typeof a){var b=[dh(a,Pc)];b.parentNode=Pc.documentElement}else b=[a],b.parentNode=a&&(a.ownerDocument||a.document||a).documentElement;return O([b])};V.selectAll=function(a){"string"===typeof a?(a=kd(rg(a,Pc)),
a.parentNode=Pc.documentElement):(a=kd(a),a.parentNode=null);return O([a])};Ib.on=function(a,b,c){var d=arguments.length;if(3>d){if("string"!==typeof a){2>d&&(b=!1);for(c in a)this.each(ea(c,a[c],b));return this}if(2>d)return(d=this.node()["__on"+a])&&d._;c=!1}return this.each(ea(a,b,c))};var Oh=V.map({mouseenter:"mouseover",mouseleave:"mouseout"});Pc&&Oh.forEach(function(a){"on"+a in Pc&&Oh.remove(a)});var We,ii=0;V.mouse=function(a){return pa(a,H())};var Ph=this.navigator&&/WebKit/.test(this.navigator.userAgent)?
-1:0;V.touch=function(a,b,c){3>arguments.length&&(c=b,b=H().changedTouches);if(b)for(var d=0,e=b.length,g;d<e;++d)if((g=b[d]).identifier===c)return pa(a,g)};V.behavior.drag=function(){function b(){this.on("mousedown.drag",g).on("touchstart.drag",f)}function c(a,b,c,g,f){return function(){var h=V.event.target.correspondingElement||V.event.target,k=this.parentNode,n=d.of(this,arguments),t=0,v=a(),m=".drag"+(null==v?"":"-"+v),r=V.select(c(h)).on(g+m,function(){var a=b(k,v);if(a){var c=a[0]-y[0];var d=
a[1]-y[1];t|=c|d;y=a;n({type:"drag",x:a[0]+D[0],y:a[1]+D[1],dx:c,dy:d})}}).on(f+m,function(){b(k,v)&&(r.on(g+m,null).on(f+m,null),u(t),n({type:"dragend"}))}),u=Z(h),y=b(k,v);if(e){var D=e.apply(this,arguments);D=[D.x-y[0],D.y-y[1]]}else D=[0,0];n({type:"dragstart"})}}var d=M(b,"drag","dragstart","dragend"),e=null,g=c(C,V.mouse,a,"mousemove","mouseup"),f=c(da,V.touch,D,"touchmove","touchend");b.origin=function(a){if(!arguments.length)return e;e=a;return b};return V.rebind(b,d,"on")};V.touches=function(a,
b){2>arguments.length&&(b=H().touches);return b?kd(b).map(function(b){var c=pa(a,b);c.identifier=b.identifier;return c}):[]};var ib=Math.PI,vd=2*ib,eh=vd-1E-6,xb=ib/2,jb=ib/180,Yb=180/ib,lg=Math.SQRT2;V.interpolateZoom=function(a,b){var c=a[0],d=a[1],e=a[2];a=b[2];var g=b[0]-c,f=b[1]-d,h=g*g+f*f;if(1E-12>h){var k=Math.log(a/e)/lg;a=function(a){return[c+a*g,d+a*f,e*Math.exp(lg*a*k)]}}else{var n=Math.sqrt(h);b=(a*a-e*e+4*h)/(4*e*n);a=(a*a-e*e-4*h)/(4*a*n);var t=Math.log(Math.sqrt(b*b+1)-b);k=(Math.log(Math.sqrt(a*
a+1)-a)-t)/lg;a=function(a){a*=k;var b=K(t),h=lg*a+t;var v=((h=Math.exp(2*h))-1)/(h+1);var m=t;h=((m=Math.exp(m))-1/m)/2;v=e/(2*n)*(b*v-h);return[c+v*g,d+v*f,e*b/K(lg*a+t)]}}a.duration=1E3*k;return a};V.behavior.zoom=function(){function b(a){a.on("mousedown.zoom",t).on(wg+".zoom",m).on("dblclick.zoom",r).on("touchstart.zoom",v)}function c(a){return[(a[0]-u.x)/u.k,(a[1]-u.y)/u.k]}function d(a){u.k=Math.max(A[0],Math.min(A[1],a))}function e(a,b){b=[b[0]*u.k+u.x,b[1]*u.k+u.y];u.x+=a[0]-b[0];u.y+=a[1]-
b[1]}function g(a,c,g,f){a.__chart__={x:u.x,y:u.y,k:u.k};d(Math.pow(2,f));e(D=c,g);a=V.select(a);0<C&&(a=a.transition().duration(C));a.call(b.event)}function f(){L&&L.domain(db.range().map(function(a){return(a-u.x)/u.k}).map(db.invert));I&&I.domain(P.range().map(function(a){return(a-u.y)/u.k}).map(P.invert))}function h(a){p++||a({type:"zoomstart"})}function k(a){f();a({type:"zoom",scale:u.k,translate:[u.x,u.y]})}function n(a){--p||(a({type:"zoomend"}),D=null)}function t(){var b=this,d=J.of(b,arguments),
g=0,f=V.select(a(b)).on("mousemove.zoom",function(){g=1;e(V.mouse(b),t);k(d)}).on("mouseup.zoom",function(){f.on("mousemove.zoom",null).on("mouseup.zoom",null);v(g);n(d)}),t=c(V.mouse(b)),v=Z(b);qh.call(b);h(d)}function v(){function a(){var a=V.touches(r);l=u.k;a.forEach(function(a){a.identifier in D&&(D[a.identifier]=c(a))});return a}function b(){var b=V.event.target;V.select(b).on(C,f).on(p,m);q.push(b);b=V.event.changedTouches;for(var c=0,d=b.length;c<d;++c)D[b[c].identifier]=null;c=a();d=Date.now();
1===c.length?(500>d-G&&(b=c[0],g(r,b,D[b.identifier],Math.floor(Math.log(u.k)/Math.LN2)+1),E()),G=d):1<c.length&&(b=c[0],d=c[1],c=b[0]-d[0],b=b[1]-d[1],B=c*c+b*b)}function f(){var a=V.touches(r),b;qh.call(r);for(var c=0,g=a.length;c<g;++c,b=null){var f=a[c];if(b=D[f.identifier]){if(n)break;var h=f;var n=b}}if(b){var t=(t=f[0]-h[0])*t+(t=f[1]-h[1])*t;a=B&&Math.sqrt(t/B);h=[(h[0]+f[0])/2,(h[1]+f[1])/2];n=[(n[0]+b[0])/2,(n[1]+b[1])/2];d(a*l)}G=null;e(h,n);k(y)}function m(){if(V.event.touches.length){for(var b=
V.event.changedTouches,c=0,d=b.length;c<d;++c)delete D[b[c].identifier];for(var e in D)return void a()}V.selectAll(q).on(A,null);db.on("mousedown.zoom",t).on("touchstart.zoom",v);L();n(y)}var r=this,y=J.of(r,arguments),D={},B=0,l,A=".zoom-"+V.event.changedTouches[0].identifier,C="touchmove"+A,p="touchend"+A,q=[],db=V.select(r),L=Z(r);b();h(y);db.on("mousedown.zoom",null).on("touchstart.zoom",b)}function m(){var a=J.of(this,arguments);q?clearTimeout(q):(qh.call(this),y=c(D=B||V.mouse(this)),h(a));
q=setTimeout(function(){q=null;n(a)},50);E();d(Math.pow(2,.002*Rg())*u.k);e(D,y);k(a)}function r(){var a=V.mouse(this),b=Math.log(u.k)/Math.LN2;g(this,a,c(a),V.event.shiftKey?Math.ceil(b)-1:Math.floor(b)+1)}var u={x:0,y:0,k:1},y,D,B,l=[960,500],A=Qh,C=250,p=0,q,G,J=M(b,"zoomstart","zoom","zoomend"),db,L,P,I;wg||(wg="onwheel"in Pc?(Rg=function(){return-V.event.deltaY*(V.event.deltaMode?120:1)},"wheel"):"onmousewheel"in Pc?(Rg=function(){return V.event.wheelDelta},"mousewheel"):(Rg=function(){return-V.event.detail},
"MozMousePixelScroll"));b.event=function(a){a.each(function(){var a=J.of(this,arguments),b=u;De?V.select(this).transition().each("start.zoom",function(){u=this.__chart__||{x:0,y:0,k:1};h(a)}).tween("zoom:zoom",function(){var c=l[0],d=l[1],e=D?D[0]:c/2,g=D?D[1]:d/2,f=V.interpolateZoom([(e-u.x)/u.k,(g-u.y)/u.k,c/u.k],[(e-b.x)/b.k,(g-b.y)/b.k,c/b.k]);return function(b){b=f(b);var d=c/b[2];this.__chart__=u={x:e-b[0]*d,y:g-b[1]*d,k:d};k(a)}}).each("interrupt.zoom",function(){n(a)}).each("end.zoom",function(){n(a)}):
(this.__chart__=u,h(a),k(a),n(a))})};b.translate=function(a){if(!arguments.length)return[u.x,u.y];u={x:+a[0],y:+a[1],k:u.k};f();return b};b.scale=function(a){if(!arguments.length)return u.k;u={x:u.x,y:u.y,k:null};d(+a);f();return b};b.scaleExtent=function(a){if(!arguments.length)return A;A=null==a?Qh:[+a[0],+a[1]];return b};b.center=function(a){if(!arguments.length)return B;B=a&&[+a[0],+a[1]];return b};b.size=function(a){if(!arguments.length)return l;l=a&&[+a[0],+a[1]];return b};b.duration=function(a){if(!arguments.length)return C;
C=+a;return b};b.x=function(a){if(!arguments.length)return L;L=a;db=a.copy();u={x:0,y:0,k:1};return b};b.y=function(a){if(!arguments.length)return I;I=a;P=a.copy();u={x:0,y:0,k:1};return b};return V.rebind(b,J,"on")};var Qh=[0,Infinity],Rg,wg;V.color=wa;wa.prototype.toString=function(){return this.rgb()+""};V.hsl=ta;var vg=ta.prototype=new wa;vg.brighter=function(a){a=Math.pow(.7,arguments.length?a:1);return new ta(this.h,this.s,this.l/a)};vg.darker=function(a){a=Math.pow(.7,arguments.length?a:1);
return new ta(this.h,this.s,a*this.l)};vg.rgb=function(){return aa(this.h,this.s,this.l)};V.hcl=ma;var Sg=ma.prototype=new wa;Sg.brighter=function(a){return new ma(this.h,this.c,Math.min(100,this.l+mg*(arguments.length?a:1)))};Sg.darker=function(a){return new ma(this.h,this.c,Math.max(0,this.l-mg*(arguments.length?a:1)))};Sg.rgb=function(){return Aa(this.h,this.c,this.l).rgb()};V.lab=va;var mg=18,Tf=.95047,Rh=1,lh=1.08883,uf=va.prototype=new wa;uf.brighter=function(a){return new va(Math.min(100,this.l+
mg*(arguments.length?a:1)),this.a,this.b)};uf.darker=function(a){return new va(Math.max(0,this.l-mg*(arguments.length?a:1)),this.a,this.b)};uf.rgb=function(){return sa(this.l,this.a,this.b)};V.rgb=Ea;var vf=Ea.prototype=new wa;vf.brighter=function(a){a=Math.pow(.7,arguments.length?a:1);var b=this.r,c=this.g,d=this.b;if(!b&&!c&&!d)return new Ea(30,30,30);b&&30>b&&(b=30);c&&30>c&&(c=30);d&&30>d&&(d=30);return new Ea(Math.min(255,b/a),Math.min(255,c/a),Math.min(255,d/a))};vf.darker=function(a){a=Math.pow(.7,
arguments.length?a:1);return new Ea(a*this.r,a*this.g,a*this.b)};vf.hsl=function(){return X(this.r,this.g,this.b)};vf.toString=function(){return"#"+ua(this.r)+ua(this.g)+ua(this.b)};var Uf=V.map({aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,
cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,
floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,
lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,
moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,
sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074});Uf.forEach(function(a,b){Uf.set(a,new Ea(b>>16,b>>8&255,b&255))});V.functor=Ka;V.xhr=Ua(D);V.dsv=function(a,b){function c(a,c,g){3>arguments.length&&(g=c,c=null);var f=Ya(a,
b,null==c?d:e(c),g);f.row=function(a){return arguments.length?f.response(null==(c=a)?d:e(a)):c};return f}function d(a){return c.parse(a.responseText)}function e(a){return function(b){return c.parse(b.responseText,a)}}function g(b){return b.map(f).join(a)}function f(a){return h.test(a)?'"'+a.replace(/"/g,'""')+'"':a}var h=new RegExp('["'+a+"\n]"),k=a.charCodeAt(0);c.parse=function(a,b){var d;return c.parseRows(a,function(a,c){if(d)return d(a,c-1);var e=new Function("d","return {"+a.map(function(a,
b){return JSON.stringify(a)+": d["+b+"]"}).join(",")+"}");d=b?function(a,c){return b(e(a),c)}:e})};c.parseRows=function(a,b){function c(){if(h>=f)return e;if(v)return v=!1,d;var b=h;if(34===a.charCodeAt(b)){for(var c=b;c++<f;)if(34===a.charCodeAt(c)){if(34!==a.charCodeAt(c+1))break;++c}h=c+2;var g=a.charCodeAt(c+1);13===g?(v=!0,10===a.charCodeAt(c+2)&&++h):10===g&&(v=!0);return a.slice(b+1,c).replace(/""/g,'"')}for(;h<f;){g=a.charCodeAt(h++);c=1;if(10===g)v=!0;else if(13===g)v=!0,10===a.charCodeAt(h)&&
(++h,++c);else if(g!==k)continue;return a.slice(b,h-c)}return a.slice(b)}for(var d={},e={},g=[],f=a.length,h=0,n=0,t,v;(t=c())!==e;){for(var m=[];t!==d&&t!==e;)m.push(t),t=c();b&&null==(m=b(m,n++))||g.push(m)}return g};c.format=function(b){if(Array.isArray(b[0]))return c.formatRows(b);var d=new B,e=[];b.forEach(function(a){for(var b in a)d.has(b)||e.push(d.add(b))});return[e.map(f).join(a)].concat(b.map(function(b){return e.map(function(a){return f(b[a])}).join(a)})).join("\n")};c.formatRows=function(a){return a.map(g).join("\n")};
return c};V.csv=V.dsv(",","text/csv");V.tsv=V.dsv("\t","text/tab-separated-values");var af,fh,ic,He,cf=this[A(this,"requestAnimationFrame")]||function(a){setTimeout(a,17)};V.timer=function(){eb.apply(this,arguments)};V.timer.flush=function(){Wa();$a()};V.round=function(a,b){return b?Math.round(a*(b=Math.pow(10,b)))/b:Math.round(a)};var Vf="y z a f p n µ m  k M G T P E Z Y".split(" ").map(function(a,b){var c=Math.pow(10,3*hb(8-b));return{scale:8<b?function(a){return a/c}:function(a){return a*c},symbol:a}});
V.formatPrefix=function(a,b){var c=0;if(a=+a)0>a&&(a*=-1),b&&(a=V.round(a,rb(a,b))),c=1+Math.floor(1E-12+Math.log(a)/Math.LN10),c=Math.max(-24,Math.min(24,3*Math.floor((c-1)/3)));return Vf[8+c/3]};var gh=/(?:([^{])?([<>=^]))?([+\- ])?([$#])?(0)?(\d+)?(,)?(\.-?\d+)?([a-z%])?/i,yh=V.map({b:function(a){return a.toString(2)},c:function(a){return String.fromCharCode(a)},o:function(a){return a.toString(8)},x:function(a){return a.toString(16)},X:function(a){return a.toString(16).toUpperCase()},g:function(a,
b){return a.toPrecision(b)},e:function(a,b){return a.toExponential(b)},f:function(a,b){return a.toFixed(b)},r:function(a,b){return(a=V.round(a,rb(a,b))).toFixed(Math.max(0,Math.min(20,rb(a*(1+1E-15),b))))}}),Na=V.time={},Oc=Date;Hb.prototype={getDate:function(){return this._.getUTCDate()},getDay:function(){return this._.getUTCDay()},getFullYear:function(){return this._.getUTCFullYear()},getHours:function(){return this._.getUTCHours()},getMilliseconds:function(){return this._.getUTCMilliseconds()},
getMinutes:function(){return this._.getUTCMinutes()},getMonth:function(){return this._.getUTCMonth()},getSeconds:function(){return this._.getUTCSeconds()},getTime:function(){return this._.getTime()},getTimezoneOffset:function(){return 0},valueOf:function(){return this._.valueOf()},setDate:function(){Jf.setUTCDate.apply(this._,arguments)},setDay:function(){Jf.setUTCDay.apply(this._,arguments)},setFullYear:function(){Jf.setUTCFullYear.apply(this._,arguments)},setHours:function(){Jf.setUTCHours.apply(this._,
arguments)},setMilliseconds:function(){Jf.setUTCMilliseconds.apply(this._,arguments)},setMinutes:function(){Jf.setUTCMinutes.apply(this._,arguments)},setMonth:function(){Jf.setUTCMonth.apply(this._,arguments)},setSeconds:function(){Jf.setUTCSeconds.apply(this._,arguments)},setTime:function(){Jf.setTime.apply(this._,arguments)}};var Jf=Date.prototype;Na.year=pb(function(a){a=Na.day(a);a.setMonth(0,1);return a},function(a,b){a.setFullYear(a.getFullYear()+b)},function(a){return a.getFullYear()});Na.years=
Na.year.range;Na.years.utc=Na.year.utc.range;Na.day=pb(function(a){var b=new Oc(2E3,0);b.setFullYear(a.getFullYear(),a.getMonth(),a.getDate());return b},function(a,b){a.setDate(a.getDate()+b)},function(a){return a.getDate()-1});Na.days=Na.day.range;Na.days.utc=Na.day.utc.range;Na.dayOfYear=function(a){var b=Na.year(a);return Math.floor((a-b-6E4*(a.getTimezoneOffset()-b.getTimezoneOffset()))/864E5)};"sunday monday tuesday wednesday thursday friday saturday".split(" ").forEach(function(a,b){b=7-b;var c=
Na[a]=pb(function(a){(a=Na.day(a)).setDate(a.getDate()-(a.getDay()+b)%7);return a},function(a,b){a.setDate(a.getDate()+7*Math.floor(b))},function(a){var c=Na.year(a).getDay();return Math.floor((Na.dayOfYear(a)+(c+b)%7)/7)-(c!==b)});Na[a+"s"]=c.range;Na[a+"s"].utc=c.utc.range;Na[a+"OfYear"]=function(a){var c=Na.year(a).getDay();return Math.floor((Na.dayOfYear(a)+(c+b)%7)/7)}});Na.week=Na.sunday;Na.weeks=Na.sunday.range;Na.weeks.utc=Na.sunday.utc.range;Na.weekOfYear=Na.sundayOfYear;var Gh={"-":"",_:" ",
0:"0"},db=/^\s*\d+/,xi=/^%/;V.locale=function(a){return{numberFormat:mb(a),timeFormat:Jb(a)}};var Xh=V.locale({decimal:".",thousands:",",grouping:[3],currency:["$",""],dateTime:"%a %b %e %X %Y",date:"%m/%d/%Y",time:"%H:%M:%S",periods:["AM","PM"],days:"Sunday Monday Tuesday Wednesday Thursday Friday Saturday".split(" "),shortDays:"Sun Mon Tue Wed Thu Fri Sat".split(" "),months:"January February March April May June July August September October November December".split(" "),shortMonths:"Jan Feb Mar Apr May Jun Jul Aug Sep Oct Nov Dec".split(" ")});
V.format=Xh.numberFormat;V.geo={};Eb.prototype={s:0,t:0,add:function(a){Hc(a,this.t,wd);Hc(wd.s,this.s,this);this.s?this.t+=wd.t:this.s=wd.t},reset:function(){this.s=this.t=0},valueOf:function(){return this.s}};var wd=new Eb;V.geo.stream=function(a,b){if(a&&xf.hasOwnProperty(a.type))xf[a.type](a,b);else Rc(a,b)};var xf={Feature:function(a,b){Rc(a.geometry,b)},FeatureCollection:function(a,b){a=a.features;for(var c=-1,d=a.length;++c<d;)Rc(a[c].geometry,b)}},Sc={Sphere:function(a,b){b.sphere()},Point:function(a,
b){a=a.coordinates;b.point(a[0],a[1],a[2])},MultiPoint:function(a,b){for(var c=a.coordinates,d=-1,e=c.length;++d<e;)a=c[d],b.point(a[0],a[1],a[2])},LineString:function(a,b){bf(a.coordinates,b,0)},MultiLineString:function(a,b){a=a.coordinates;for(var c=-1,d=a.length;++c<d;)bf(a[c],b,0)},Polygon:function(a,b){Sd(a.coordinates,b)},MultiPolygon:function(a,b){a=a.coordinates;for(var c=-1,d=a.length;++c<d;)Sd(a[c],b)},GeometryCollection:function(a,b){a=a.geometries;for(var c=-1,d=a.length;++c<d;)Rc(a[c],
b)}};V.geo.area=function(a){zd=0;V.geo.stream(a,Yd);return zd};var zd,Md=new Eb,Yd={sphere:function(){zd+=4*ib},point:C,lineStart:C,lineEnd:C,polygonStart:function(){Md.reset();Yd.lineStart=Td},polygonEnd:function(){var a=2*Md;zd+=0>a?4*ib+a:a;Yd.lineStart=Yd.lineEnd=Yd.point=C}};V.geo.bounds=function(){function a(a,b){A.push(C=[t=a,m=a]);b<v&&(v=b);b>r&&(r=b)}function b(b,c){var d=Zc([b*jb,c*jb]);if(B){var e=$c(B,d);e=$c([e[1],-e[0],0],e);me(e);e=Vd(e);var g=b-u,f=0<g?1:-1,k=e[0]*Yb*f;g=180<hb(g);
g^(f*u<k&&k<f*b)?(c=e[1]*Yb,c>r&&(r=c)):(k=(k+360)%360-180,g^(f*u<k&&k<f*b))?(c=-e[1]*Yb,c<v&&(v=c)):(c<v&&(v=c),c>r&&(r=c));g?b<u?h(t,b)>h(t,m)&&(m=b):h(b,m)>h(t,m)&&(t=b):m>=t?(b<t&&(t=b),b>m&&(m=b)):b>u?h(t,b)>h(t,m)&&(m=b):h(b,m)>h(t,m)&&(t=b)}else a(b,c);B=d;u=b}function c(){p.point=b}function d(){C[0]=t;C[1]=m;p.point=a;B=null}function e(a,c){if(B){var d=a-u;l+=180<hb(d)?d+(0<d?360:-360):d}else y=a,D=c;Yd.point(a,c);b(a,c)}function g(){Yd.lineStart()}function f(){e(y,D);Yd.lineEnd();1E-6<hb(l)&&
(t=-(m=180));C[0]=t;C[1]=m;B=null}function h(a,b){return 0>(b-=a)?b+360:b}function k(a,b){return a[0]-b[0]}function n(a,b){return b[0]<=b[1]?b[0]<=a&&a<=b[1]:a<b[0]||b[1]<a}var t,v,m,r,u,y,D,B,l,A,C,p={point:a,lineStart:c,lineEnd:d,polygonStart:function(){p.point=e;p.lineStart=g;p.lineEnd=f;l=0;Yd.polygonStart()},polygonEnd:function(){Yd.polygonEnd();p.point=a;p.lineStart=c;p.lineEnd=d;0>Md?(t=-(m=180),v=-(r=90)):1E-6<l?r=90:-1E-6>l&&(v=-90);C[0]=t;C[1]=m}};return function(a){r=m=-(t=v=Infinity);
A=[];V.geo.stream(a,p);if(a=A.length){A.sort(k);for(var b=1,c=A[0],d,e=[c];b<a;++b)d=A[b],n(d[0],c)||n(d[1],c)?(h(c[0],d[1])>h(c[0],c[1])&&(c[1]=d[1]),h(d[0],c[1])>h(c[0],c[1])&&(c[0]=d[0])):e.push(c=d);var g=-Infinity,f;a=e.length-1;b=0;for(c=e[a];b<=a;c=d,++b)d=e[b],(f=h(c[1],d[0]))>g&&(g=f,t=d[0],m=c[1])}A=C=null;return Infinity===t||Infinity===v?[[NaN,NaN],[NaN,NaN]]:[[t,v],[m,r]]}}();V.geo.centroid=function(a){Tg=zh=df=ef=Ae=Zf=ff=qd=Yf=Xf=Oe=0;V.geo.stream(a,Gf);a=Yf;var b=Xf,c=Oe,d=a*a+b*b+
c*c;return 1E-12>d&&(a=Zf,b=ff,c=qd,1E-6>zh&&(a=df,b=ef,c=Ae),d=a*a+b*b+c*c,1E-12>d)?[NaN,NaN]:[Math.atan2(b,a)*Yb,xa(c/Math.sqrt(d))*Yb]};var Tg,zh,df,ef,Ae,Zf,ff,qd,Yf,Xf,Oe,Gf={sphere:C,point:tc,lineStart:xd,lineEnd:ac,polygonStart:function(){Gf.lineStart=yd},polygonEnd:function(){Gf.lineStart=xd}},ph=Lb(Wd,function(a){var b=NaN,c=NaN,d=NaN,e;return{lineStart:function(){a.lineStart();e=1},point:function(g,f){var h=0<g?ib:-ib,k=hb(g-b);if(1E-6>hb(k-ib))a.point(b,c=0<(c+f)/2?xb:-xb),a.point(d,c),
a.lineEnd(),a.lineStart(),a.point(h,c),a.point(g,c),e=0;else if(d!==h&&k>=ib){1E-6>hb(b-d)&&(b-=1E-6*d);1E-6>hb(g-h)&&(g-=1E-6*h);k=b;var n=c,t=g,v,m,r=Math.sin(k-t);c=1E-6<hb(r)?Math.atan((Math.sin(n)*(m=Math.cos(f))*Math.sin(t)-Math.sin(f)*(v=Math.cos(n))*Math.sin(k))/(v*m*r)):(n+f)/2;a.point(d,c);a.lineEnd();a.lineStart();a.point(h,c);e=0}a.point(b=g,c=f);d=h},lineEnd:function(){a.lineEnd();b=c=NaN},clean:function(){return 2-e}}},function(a,b,c,d){null==a?(c*=xb,d.point(-ib,c),d.point(0,c),d.point(ib,
c),d.point(ib,0),d.point(ib,-c),d.point(0,-c),d.point(-ib,-c),d.point(-ib,0),d.point(-ib,c)):1E-6<hb(a[0]-b[0])?(a=a[0]<b[0]?ib:-ib,c=c*a/2,d.point(-a,c),d.point(0,c),d.point(a,c)):d.point(b[0],b[1])},[-ib,-ib/2]);V.geo.clipExtent=function(){var a,b,c,d,e,g,f={stream:function(a){e&&(e.valid=!1);e=g(a);e.valid=!0;return e},extent:function(h){if(!arguments.length)return[[a,b],[c,d]];g=Tc(a=+h[0][0],b=+h[0][1],c=+h[1][0],d=+h[1][1]);e&&(e.valid=!1,e=null);return f}};return f.extent([[0,0],[960,500]])};
(V.geo.conicEqualArea=function(){return Vb(Sa)}).raw=Sa;V.geo.albers=function(){return V.geo.conicEqualArea().rotate([96,0]).center([-.6,38.7]).parallels([29.5,45.5]).scale(1070)};V.geo.albersUsa=function(){function a(a){var b=a[0];a=a[1];e=null;(f(b,a),e)||(h(b,a),e)||k(b,a);return e}var b=V.geo.albers(),c=V.geo.conicEqualArea().rotate([154,0]).center([-2,58.5]).parallels([55,65]),d=V.geo.conicEqualArea().rotate([157,0]).center([-3,19.9]).parallels([8,18]),e,g={point:function(a,b){e=[a,b]}},f,h,
k;a.invert=function(a){var e=b.scale(),g=b.translate(),f=(a[0]-g[0])/e;e=(a[1]-g[1])/e;return(.12<=e&&.234>e&&-.425<=f&&-.214>f?c:.166<=e&&.234>e&&-.214<=f&&-.115>f?d:b).invert(a)};a.stream=function(a){var e=b.stream(a),g=c.stream(a),f=d.stream(a);return{point:function(a,b){e.point(a,b);g.point(a,b);f.point(a,b)},sphere:function(){e.sphere();g.sphere();f.sphere()},lineStart:function(){e.lineStart();g.lineStart();f.lineStart()},lineEnd:function(){e.lineEnd();g.lineEnd();f.lineEnd()},polygonStart:function(){e.polygonStart();
g.polygonStart();f.polygonStart()},polygonEnd:function(){e.polygonEnd();g.polygonEnd();f.polygonEnd()}}};a.precision=function(e){if(!arguments.length)return b.precision();b.precision(e);c.precision(e);d.precision(e);return a};a.scale=function(e){if(!arguments.length)return b.scale();b.scale(e);c.scale(.35*e);d.scale(e);return a.translate(b.translate())};a.translate=function(e){if(!arguments.length)return b.translate();var n=b.scale(),t=+e[0],v=+e[1];f=b.translate(e).clipExtent([[t-.455*n,v-.238*n],
[t+.455*n,v+.238*n]]).stream(g).point;h=c.translate([t-.307*n,v+.201*n]).clipExtent([[t-.425*n+1E-6,v+.12*n+1E-6],[t-.214*n-1E-6,v+.234*n-1E-6]]).stream(g).point;k=d.translate([t-.205*n,v+.212*n]).clipExtent([[t-.214*n+1E-6,v+.166*n+1E-6],[t-.115*n-1E-6,v+.234*n-1E-6]]).stream(g).point;return a};return a.scale(1070)};var mi,ni,lf={point:C,lineStart:C,lineEnd:C,polygonStart:function(){ni=0;lf.lineStart=Me},polygonEnd:function(){lf.lineStart=lf.lineEnd=lf.point=C;mi+=hb(ni/2)}},sh,rh,Ug,xg,yg={point:function(a,
b){a<sh&&(sh=a);a>Ug&&(Ug=a);b<rh&&(rh=b);b>xg&&(xg=b)},lineStart:C,lineEnd:C,polygonStart:C,polygonEnd:C},vc={point:yb,lineStart:Ma,lineEnd:mc,polygonStart:function(){vc.lineStart=Fb},polygonEnd:function(){vc.point=yb;vc.lineStart=Ma;vc.lineEnd=mc}};V.geo.path=function(){function a(a){a&&("function"===typeof c&&f.pointRadius(+c.apply(this,arguments)),h&&h.valid||(h=g(f)),V.geo.stream(a,h));return f.result()}function b(){h=null;return a}var c=4.5,d,e,g,f,h;a.area=function(a){mi=0;V.geo.stream(a,g(lf));
return mi};a.centroid=function(a){df=ef=Ae=Zf=ff=qd=Yf=Xf=Oe=0;V.geo.stream(a,g(vc));return Oe?[Yf/Oe,Xf/Oe]:qd?[Zf/qd,ff/qd]:Ae?[df/Ae,ef/Ae]:[NaN,NaN]};a.bounds=function(a){Ug=xg=-(sh=rh=Infinity);V.geo.stream(a,g(yg));return[[sh,rh],[Ug,xg]]};a.projection=function(a){if(!arguments.length)return d;g=(d=a)?a.stream||Wf(a):D;return b()};a.context=function(a){if(!arguments.length)return e;f=null==(e=a)?new yf:new od(a);"function"!==typeof c&&f.pointRadius(c);return b()};a.pointRadius=function(b){if(!arguments.length)return c;
c="function"===typeof b?b:(f.pointRadius(+b),+b);return a};return a.projection(V.geo.albersUsa()).context(null)};V.geo.transform=function(a){return{stream:function(b){b=new wb(b);for(var c in a)b[c]=a[c];return b}}};wb.prototype={point:function(a,b){this.stream.point(a,b)},sphere:function(){this.stream.sphere()},lineStart:function(){this.stream.lineStart()},lineEnd:function(){this.stream.lineEnd()},polygonStart:function(){this.stream.polygonStart()},polygonEnd:function(){this.stream.polygonEnd()}};
V.geo.projection=Zd;V.geo.projectionMutator=Ne;(V.geo.equirectangular=function(){return Zd(pd)}).raw=pd.invert=pd;V.geo.rotation=function(a){function b(b){b=a(b[0]*jb,b[1]*jb);return b[0]*=Yb,b[1]*=Yb,b}a=uc(a[0]%360*jb,a[1]*jb,2<a.length?a[2]*jb:0);b.invert=function(b){b=a.invert(b[0]*jb,b[1]*jb);return b[0]*=Yb,b[1]*=Yb,b};return b};Bd.invert=pd;V.geo.circle=function(){function a(){var a="function"===typeof b?b.apply(this,arguments):b,c=uc(-a[0]*jb,-a[1]*jb,0).invert,d=[];e(null,null,1,{point:function(a,
b){d.push(a=c(a,b));a[0]*=Yb;a[1]*=Yb}});return{type:"Polygon",coordinates:[d]}}var b=[0,0],c,d=6,e;a.origin=function(c){if(!arguments.length)return b;b=c;return a};a.angle=function(b){if(!arguments.length)return c;e=ad((c=+b)*jb,d*jb);return a};a.precision=function(b){if(!arguments.length)return d;e=ad(c*jb,(d=+b)*jb);return a};return a.angle(90)};V.geo.distance=function(a,b){var c=(b[0]-a[0])*jb,d=a[1]*jb,e=b[1]*jb;b=Math.cos(c);a=Math.sin(d);d=Math.cos(d);var g=Math.sin(e);e=Math.cos(e);var f;
return Math.atan2(Math.sqrt((f=e*Math.sin(c))*f+(f=d*g-a*e*b)*f),a*g+d*e*b)};V.geo.graticule=function(){function a(){return{type:"MultiLineString",coordinates:b()}}function b(){return V.range(Math.ceil(g/m)*m,e,m).map(D).concat(V.range(Math.ceil(n/r)*r,k,r).map(B)).concat(V.range(Math.ceil(d/t)*t,c,t).filter(function(a){return 1E-6<hb(a%m)}).map(u)).concat(V.range(Math.ceil(h/v)*v,f,v).filter(function(a){return 1E-6<hb(a%r)}).map(y))}var c,d,e,g,f,h,k,n,t=10,v=t,m=90,r=360,u,y,D,B,l=2.5;a.lines=function(){return b().map(function(a){return{type:"LineString",
coordinates:a}})};a.outline=function(){return{type:"Polygon",coordinates:[D(g).concat(B(k).slice(1),D(e).reverse().slice(1),B(n).reverse().slice(1))]}};a.extent=function(b){return arguments.length?a.majorExtent(b).minorExtent(b):a.minorExtent()};a.majorExtent=function(b){if(!arguments.length)return[[g,n],[e,k]];g=+b[0][0];e=+b[1][0];n=+b[0][1];k=+b[1][1];g>e&&(b=g,g=e,e=b);n>k&&(b=n,n=k,k=b);return a.precision(l)};a.minorExtent=function(b){if(!arguments.length)return[[d,h],[c,f]];d=+b[0][0];c=+b[1][0];
h=+b[0][1];f=+b[1][1];d>c&&(b=d,d=c,c=b);h>f&&(b=h,h=f,f=b);return a.precision(l)};a.step=function(b){return arguments.length?a.majorStep(b).minorStep(b):a.minorStep()};a.majorStep=function(b){if(!arguments.length)return[m,r];m=+b[0];r=+b[1];return a};a.minorStep=function(b){if(!arguments.length)return[t,v];t=+b[0];v=+b[1];return a};a.precision=function(b){if(!arguments.length)return l;l=+b;u=Cd(h,f,90);y=zf(d,c,l);D=Cd(n,k,90);B=zf(g,e,l);return a};return a.majorExtent([[-180,-89.999999],[180,89.999999]]).minorExtent([[-180,
-80.000001],[180,80.000001]])};V.geo.greatArc=function(){function a(){return{type:"LineString",coordinates:[c||b.apply(this,arguments),e||d.apply(this,arguments)]}}var b=ae,c,d=pe,e;a.distance=function(){return V.geo.distance(c||b.apply(this,arguments),e||d.apply(this,arguments))};a.source=function(d){if(!arguments.length)return b;b=d;c="function"===typeof d?null:d;return a};a.target=function(b){if(!arguments.length)return d;d=b;e="function"===typeof b?null:b;return a};a.precision=function(){return arguments.length?
a:0};return a};V.geo.interpolate=function(a,b){return gd(a[0]*jb,a[1]*jb,b[0]*jb,b[1]*jb)};V.geo.length=function(a){gf=0;V.geo.stream(a,Bf);return gf};var gf,Bf={sphere:C,point:C,lineStart:function(){function a(a,e){var g=Math.sin(e*=jb);e=Math.cos(e);var f=hb((a*=jb)-b),h=Math.cos(f);gf+=Math.atan2(Math.sqrt((f=e*Math.sin(f))*f+(f=d*g-c*e*h)*f),c*g+d*e*h);b=a;c=g;d=e}var b,c,d;Bf.point=function(e,g){b=e*jb;c=Math.sin(g*=jb);d=Math.cos(g);Bf.point=a};Bf.lineEnd=function(){Bf.point=Bf.lineEnd=C}},
lineEnd:C,polygonStart:C,polygonEnd:C},oe=wc(function(a){return Math.sqrt(2/(1+a))},function(a){return 2*Math.asin(a/2)});(V.geo.azimuthalEqualArea=function(){return Zd(oe)}).raw=oe;var Vg=wc(function(a){return(a=Math.acos(a))&&a/Math.sin(a)},D);(V.geo.azimuthalEquidistant=function(){return Zd(Vg)}).raw=Vg;(V.geo.conicConformal=function(){return Vb(Nd)}).raw=Nd;(V.geo.conicEquidistant=function(){return Vb(Dd)}).raw=Dd;var nh=wc(function(a){return 1/a},Math.atan);(V.geo.gnomonic=function(){return Zd(nh)}).raw=
nh;bd.invert=function(a,b){return[a,2*Math.atan(Math.exp(b))-xb]};(V.geo.mercator=function(){return Ed(bd)}).raw=bd;var Cf=wc(function(){return 1},Math.asin);(V.geo.orthographic=function(){return Zd(Cf)}).raw=Cf;var oh=wc(function(a){return 1/(1+a)},function(a){return 2*Math.atan(a)});(V.geo.stereographic=function(){return Zd(oh)}).raw=oh;Od.invert=function(a,b){return[-b,2*Math.atan(Math.exp(a))-xb]};(V.geo.transverseMercator=function(){var a=Ed(Od),b=a.center,c=a.rotate;a.center=function(a){return a?
b([-a[1],a[0]]):(a=b(),[a[1],-a[0]])};a.rotate=function(a){return a?c([a[0],a[1],2<a.length?a[2]+90:90]):(a=c(),[a[0],a[1],a[2]-90])};return c([0,0,90])}).raw=Od;V.geom={};V.geom.hull=function(a){function b(a){if(3>a.length)return[];var b=Ka(c),e=Ka(d),g,f=a.length,h=[],k=[];for(g=0;g<f;g++)h.push([+b.call(this,a[g],g),+e.call(this,a[g],g),g]);h.sort(re);for(g=0;g<f;g++)k.push([h[g][0],-h[g][1]]);b=ze(h);k=ze(k);e=k[0]===b[0];f=k[k.length-1]===b[b.length-1];var n=[];for(g=b.length-1;0<=g;--g)n.push(a[h[b[g]][2]]);
for(g=+e;g<k.length-f;++g)n.push(a[h[k[g]][2]]);return n}var c=Fd,d=qe;if(arguments.length)return b(a);b.x=function(a){return arguments.length?(c=a,b):c};b.y=function(a){return arguments.length?(d=a,b):d};return b};V.geom.polygon=function(a){Of(a,zg);return a};var zg=V.geom.polygon.prototype=[];zg.area=function(){for(var a=-1,b=this.length,c,d=this[b-1],e=0;++a<b;)c=d,d=this[a],e+=c[1]*d[0]-c[0]*d[1];return.5*e};zg.centroid=function(a){var b=-1,c=this.length,d=0,e=0,g=this[c-1];for(arguments.length||
(a=-1/(6*this.area()));++b<c;){var f=g;g=this[b];var h=f[0]*g[1]-g[0]*f[1];d+=(f[0]+g[0])*h;e+=(f[1]+g[1])*h}return[d*a,e*a]};zg.clip=function(a){for(var b,c=Pe(a),d=-1,e=this.length-Pe(this),g,f,h=this[e-1],k,n,t;++d<e;){b=a.slice();a.length=0;k=this[d];n=b[(f=b.length-c)-1];for(g=-1;++g<f;)t=b[g],be(t,h,k)?(be(n,h,k)||a.push(ce(n,t,h,k)),a.push(t)):be(n,h,k)&&a.push(ce(n,t,h,k)),n=t;c&&a.push(a[0]);h=k}return a};var ye,Af,Ag,ui=[],Yh,se,ng=[];Zb.prototype.prepare=function(){for(var a=this.edges,
b=a.length,c;b--;)c=a[b].edge,c.b&&c.a||a.splice(b,1);a.sort(Wb);return a.length};Kc.prototype={start:function(){return this.edge.l===this.site?this.edge.a:this.edge.b},end:function(){return this.edge.l===this.site?this.edge.b:this.edge.a}};ra.prototype={insert:function(a,b){var c;if(a){b.P=a;if(b.N=a.N)a.N.P=b;a.N=b;if(a.R){for(a=a.R;a.L;)a=a.L;a.L=b}else a.R=b;var d=a}else this._?(a=Wc(this._),b.P=null,b.N=a,a.P=a.L=b,d=a):(b.P=b.N=null,this._=b,d=null);b.L=b.R=null;b.U=d;b.C=!0;for(a=b;d&&d.C;)b=
d.U,d===b.L?(c=b.R)&&c.C?(d.C=c.C=!1,b.C=!0,a=b):(a===d.R&&(qb(this,d),a=d,d=a.U),d.C=!1,b.C=!0,Bb(this,b)):(c=b.L)&&c.C?(d.C=c.C=!1,b.C=!0,a=b):(a===d.L&&(Bb(this,d),a=d,d=a.U),d.C=!1,b.C=!0,qb(this,b)),d=a.U;this._.C=!1},remove:function(a){a.N&&(a.N.P=a.P);a.P&&(a.P.N=a.N);a.N=a.P=null;var b=a.U,c=a.L,d=a.R;var e=c?d?Wc(d):c:d;b?b.L===a?b.L=e:b.R=e:this._=e;if(c&&d){var g=e.C;e.C=a.C;e.L=c;c.U=e;e!==d?(b=e.U,e.U=a.U,a=e.R,b.L=a,e.R=d,d.U=e):(e.U=b,b=e,a=e.R)}else g=a.C,a=e;a&&(a.U=b);if(!g)if(a&&
a.C)a.C=!1;else{do{if(a===this._)break;if(a===b.L){if(a=b.R,a.C&&(a.C=!1,b.C=!0,qb(this,b),a=b.R),a.L&&a.L.C||a.R&&a.R.C){a.R&&a.R.C||(a.L.C=!1,a.C=!0,Bb(this,a),a=b.R);a.C=b.C;b.C=a.R.C=!1;qb(this,b);a=this._;break}}else if(a=b.L,a.C&&(a.C=!1,b.C=!0,Bb(this,b),a=b.L),a.L&&a.L.C||a.R&&a.R.C){a.L&&a.L.C||(a.R.C=!1,a.C=!0,qb(this,a),a=b.L);a.C=b.C;b.C=a.L.C=!1;Bb(this,b);a=this._;break}a.C=!0;a=b;b=b.U}while(!a.C);a&&(a.C=!1)}}};V.geom.voronoi=function(a){function b(a){var b=Array(a.length),d=h[0][0],
e=h[0][1],g=h[1][0],f=h[1][1];Da(c(a),h).cells.forEach(function(c,h){var k=c.edges;c=c.site;(b[h]=k.length?k.map(function(a){a=a.start();return[a.x,a.y]}):c.x>=d&&c.x<=g&&c.y>=e&&c.y<=f?[[d,f],[g,f],[g,e],[d,e]]:[]).point=a[h]});return b}function c(a){return a.map(function(a,b){return{x:1E-6*Math.round(g(a,b)/1E-6),y:1E-6*Math.round(f(a,b)/1E-6),i:b}})}var d=Fd,e=qe,g=d,f=e,h=hf;if(a)return b(a);b.links=function(a){return Da(c(a)).edges.filter(function(a){return a.l&&a.r}).map(function(b){return{source:a[b.l.i],
target:a[b.r.i]}})};b.triangles=function(a){var b=[];Da(c(a)).cells.forEach(function(c,d){var e=c.site;c=c.edges.sort(Wb);var g=-1,f=c.length,h=c[f-1].edge;for(h=h.l===e?h.r:h.l;++g<f;){var k=h;h=c[g].edge;h=h.l===e?h.r:h.l;d<k.i&&d<h.i&&0>(e.x-h.x)*(k.y-e.y)-(e.x-k.x)*(h.y-e.y)&&b.push([a[d],a[k.i],a[h.i]])}});return b};b.x=function(a){return arguments.length?(g=Ka(d=a),b):d};b.y=function(a){return arguments.length?(f=Ka(e=a),b):e};b.clipExtent=function(a){if(!arguments.length)return h===hf?null:
h;h=null==a?hf:a;return b};b.size=function(a){return arguments.length?b.clipExtent(a&&[[0,0],a]):h===hf?null:h&&h[1]};return b};var hf=[[-1E6,-1E6],[1E6,1E6]];V.geom.delaunay=function(a){return V.geom.voronoi().triangles(a)};V.geom.quadtree=function(a,b,c,d,e){function g(a){function g(a,b,c,d,e,g,f,h){if(!isNaN(c)&&!isNaN(d))if(a.leaf){var k=a.x,t=a.y;if(null!=k){if(!(.01>hb(k-c)+hb(t-d))){var v=a.point;a.x=a.y=a.point=null;n(a,v,k,t,e,g,f,h)}n(a,b,c,d,e,g,f,h)}else a.x=c,a.y=d,a.point=b}else n(a,
b,c,d,e,g,f,h)}function n(a,b,c,d,e,f,h,k){var n=.5*(e+h),t=.5*(f+k),v=c>=n,m=d>=t,r=m<<1|v;a.leaf=!1;a=a.nodes[r]||(a.nodes[r]=fc());v?e=n:h=n;m?f=t:k=t;g(a,b,c,d,e,f,h,k)}var t=Ka(f),v=Ka(h),m;if(null!=b){var r=b;var u=c;var y=d;var D=e}else{y=D=-(r=u=Infinity);var B=[];var l=[];var A=a.length;if(k)for(m=0;m<A;++m){var C=a[m];C.x<r&&(r=C.x);C.y<u&&(u=C.y);C.x>y&&(y=C.x);C.y>D&&(D=C.y);B.push(C.x);l.push(C.y)}else for(m=0;m<A;++m){var p=+t(C=a[m],m);C=+v(C,m);p<r&&(r=p);C<u&&(u=C);p>y&&(y=p);C>D&&
(D=C);B.push(p);l.push(C)}}p=y-r;C=D-u;p>C?D=u+p:y=r+C;var q=fc();q.add=function(a){g(q,a,+t(a,++m),+v(a,m),r,u,y,D)};q.visit=function(a){ub(a,q,r,u,y,D)};q.find=function(a){return Pb(q,a[0],a[1],r,u,y,D)};m=-1;if(null==b){for(;++m<A;)g(q,a[m],B[m],l[m],r,u,y,D);--m}else a.forEach(q.add);B=l=a=C=null;return q}var f=Fd,h=qe,k;if(k=arguments.length)return f=ob,h=$b,3===k&&(e=c,d=b,c=b=0),g(a);g.x=function(a){return arguments.length?(f=a,g):f};g.y=function(a){return arguments.length?(h=a,g):h};g.extent=
function(a){if(!arguments.length)return null==b?null:[[b,c],[d,e]];null==a?b=c=d=e=null:(b=+a[0][0],c=+a[0][1],d=+a[1][0],e=+a[1][1]);return g};g.size=function(a){if(!arguments.length)return null==b?null:[d-b,e-c];null==a?b=c=d=e=null:(b=c=0,d=+a[0],e=+a[1]);return g};return g};V.interpolateRgb=Re;V.interpolateObject=Xb;V.interpolateNumber=tb;V.interpolateString=Lc;var li=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,Df=new RegExp(li.source,"g");V.interpolate=nc;V.interpolators=[function(a,b){var c=
typeof b;return("string"===c?Uf.has(b.toLowerCase())||/^(#|rgb\(|hsl\()/i.test(b)?Re:Lc:b instanceof wa?Re:Array.isArray(b)?Qb:"object"===c&&isNaN(b)?Xb:tb)(a,b)}];V.interpolateArray=Qb;var $h=function(){return D},Ah=V.map({linear:$h,poly:function(a){return function(b){return Math.pow(b,a)}},quad:function(){return ee},cubic:function(){return Fc},sin:function(){return Hd},exp:function(){return fe},circle:function(){return Mc},elastic:function(a,b){2>arguments.length&&(b=.45);if(arguments.length)var c=
b/vd*Math.asin(1/a);else a=1,c=b/4;return function(d){return 1+a*Math.pow(2,-10*d)*Math.sin((d-c)*vd/b)}},back:function(a){a||(a=1.70158);return function(b){return b*b*((a+1)*b-a)}},bounce:function(){return Rb}}),Wg=V.map({"in":D,out:Ce,"in-out":cc,"out-in":function(a){return cc(Ce(a))}});V.ease=function(a){var b=a.indexOf("-"),c=0<=b?a.slice(0,b):a;b=0<=b?a.slice(b+1):"in";c=Ah.get(c)||$h;b=Wg.get(b)||D;return Ec(b(c.apply(null,Kg.call(arguments,1))))};V.interpolateHcl=function(a,b){a=V.hcl(a);b=
V.hcl(b);var c=a.h,d=a.c,e=a.l,g=b.h-c,f=b.c-d,h=b.l-e;isNaN(f)&&(f=0,d=isNaN(d)?b.c:d);isNaN(g)?(g=0,c=isNaN(c)?b.h:c):180<g?g-=360:-180>g&&(g+=360);return function(a){return Aa(c+g*a,d+f*a,e+h*a)+""}};V.interpolateHsl=function(a,b){a=V.hsl(a);b=V.hsl(b);var c=a.h,d=a.s,e=a.l,g=b.h-c,f=b.s-d,h=b.l-e;isNaN(f)&&(f=0,d=isNaN(d)?b.s:d);isNaN(g)?(g=0,c=isNaN(c)?b.h:c):180<g?g-=360:-180>g&&(g+=360);return function(a){return aa(c+g*a,d+f*a,e+h*a)+""}};V.interpolateLab=function(a,b){a=V.lab(a);b=V.lab(b);
var c=a.l,d=a.a,e=a.b,g=b.l-c,f=b.a-d,h=b.b-e;return function(a){return sa(c+g*a,d+f*a,e+h*a)+""}};V.interpolateRound=dd;V.transform=function(a){var b=Pc.createElementNS(V.ns.prefix.svg,"g");return(V.transform=function(a){if(null!=a){b.setAttribute("transform",a);var c=b.transform.baseVal.consolidate()}return new rd(c?c.matrix:Bh)})(a)};rd.prototype.toString=function(){return"translate("+this.translate+")rotate("+this.rotate+")skewX("+this.skew+")scale("+this.scale+")"};var Bh={a:1,b:0,c:0,d:1,e:0,
f:0};V.interpolateTransform=qc;V.layout={};V.layout.bundle=function(){return function(a){for(var b=[],c=-1,d=a.length;++c<d;)b.push(kf(a[c]));return b}};V.layout.chord=function(){function a(){var a={},c=[],v=V.range(f),m=[],r,u;d=[];e=[];var y=0;for(r=-1;++r<f;){var D=0;for(u=-1;++u<f;)D+=g[r][u];c.push(D);m.push(V.range(f));y+=D}k&&v.sort(function(a,b){return k(c[a],c[b])});n&&m.forEach(function(a,b){a.sort(function(a,c){return n(g[b][a],g[b][c])})});y=(vd-h*f)/y;D=0;for(r=-1;++r<f;){var B=D;for(u=
-1;++u<f;){var l=v[r],A=m[l][u],C=g[l][A],p=D,q=D+=C*y;a[l+"-"+A]={index:l,subindex:A,startAngle:p,endAngle:q,value:C}}e[l]={index:l,startAngle:B,endAngle:D,value:c[l]};D+=h}for(r=-1;++r<f;)for(u=r-1;++u<f;)v=a[r+"-"+u],m=a[u+"-"+r],(v.value||m.value)&&d.push(v.value<m.value?{source:m,target:v}:{source:v,target:m});t&&b()}function b(){d.sort(function(a,b){return t((a.source.value+a.target.value)/2,(b.source.value+b.target.value)/2)})}var c={},d,e,g,f,h=0,k,n,t;c.matrix=function(a){if(!arguments.length)return g;
f=(g=a)&&g.length;d=e=null;return c};c.padding=function(a){if(!arguments.length)return h;h=a;d=e=null;return c};c.sortGroups=function(a){if(!arguments.length)return k;k=a;d=e=null;return c};c.sortSubgroups=function(a){if(!arguments.length)return n;n=a;d=null;return c};c.sortChords=function(a){if(!arguments.length)return t;t=a;d&&b();return c};c.chords=function(){d||a();return d};c.groups=function(){e||a();return e};return c};V.layout.force=function(){function a(a){return function(b,c,d,e){if(b.point!==
a){d=b.cx-a.x;var g=b.cy-a.y;c=e-c;e=d*d+g*g;if(c*c/u<e)return e<m&&(c=b.charge/e,a.px-=d*c,a.py-=g*c),!0;b.point&&e&&e<m&&(c=b.pointCharge/e,a.px-=d*c,a.py-=g*c)}return!b.charge}}function b(a){a.px=V.event.x;a.py=V.event.y;c.resume()}var c={},d=V.dispatch("start","tick","end"),e,g=[1,1],f,h,k=.9,n=vi,t=wi,v=-30,m=Zh,r=.1,u=.64,y=[],B=[],l,A,C;c.tick=function(){if(.005>(h*=.99))return e=null,d.end({type:"end",alpha:h=0}),!0;var b=y.length,c=B.length,f,n;for(f=0;f<c;++f){var t=B[f];var m=t.source;
var u=t.target;var D=u.x-m.x;var p=u.y-m.y;if(n=D*D+p*p)n=h*A[f]*((n=Math.sqrt(n))-l[f])/n,D*=n,p*=n,u.x-=D*(n=m.weight+u.weight?m.weight/(m.weight+u.weight):.5),u.y-=p*n,m.x+=D*(n=1-n),m.y+=p*n}if(n=h*r)if(D=g[0]/2,p=g[1]/2,f=-1,n)for(;++f<b;)t=y[f],t.x+=(D-t.x)*n,t.y+=(p-t.y)*n;if(v)for(th(c=V.geom.quadtree(y),h,C),f=-1;++f<b;)(t=y[f]).fixed||c.visit(a(t));for(f=-1;++f<b;)t=y[f],t.fixed?(t.x=t.px,t.y=t.py):(t.x-=(t.px-(t.px=t.x))*k,t.y-=(t.py-(t.py=t.y))*k);d.tick({type:"tick",alpha:h})};c.nodes=
function(a){if(!arguments.length)return y;y=a;return c};c.links=function(a){if(!arguments.length)return B;B=a;return c};c.size=function(a){if(!arguments.length)return g;g=a;return c};c.linkDistance=function(a){if(!arguments.length)return n;n="function"===typeof a?a:+a;return c};c.distance=c.linkDistance;c.linkStrength=function(a){if(!arguments.length)return t;t="function"===typeof a?a:+a;return c};c.friction=function(a){if(!arguments.length)return k;k=+a;return c};c.charge=function(a){if(!arguments.length)return v;
v="function"===typeof a?a:+a;return c};c.chargeDistance=function(a){if(!arguments.length)return Math.sqrt(m);m=a*a;return c};c.gravity=function(a){if(!arguments.length)return r;r=+a;return c};c.theta=function(a){if(!arguments.length)return Math.sqrt(u);u=a*a;return c};c.alpha=function(a){if(!arguments.length)return h;a=+a;h?0<a?h=a:(e.c=null,e.t=NaN,e=null,d.end({type:"end",alpha:h=0})):0<a&&(d.start({type:"start",alpha:h=a}),e=eb(c.tick));return c};c.start=function(){function a(a,c){if(!k){k=Array(d);
for(f=0;f<d;++f)k[f]=[];for(f=0;f<e;++f){var g=B[f];k[g.source.index].push(g.target);k[g.target.index].push(g.source)}}g=k[b];for(var f=-1,h=g.length,n;++f<h;)if(!isNaN(n=g[f][a]))return n;return Math.random()*c}var b,d=y.length,e=B.length,f=g[0],h=g[1],k,m;for(b=0;b<d;++b)(m=y[b]).index=b,m.weight=0;for(b=0;b<e;++b)m=B[b],"number"==typeof m.source&&(m.source=y[m.source]),"number"==typeof m.target&&(m.target=y[m.target]),++m.source.weight,++m.target.weight;for(b=0;b<d;++b)m=y[b],isNaN(m.x)&&(m.x=
a("x",f)),isNaN(m.y)&&(m.y=a("y",h)),isNaN(m.px)&&(m.px=m.x),isNaN(m.py)&&(m.py=m.y);l=[];if("function"===typeof n)for(b=0;b<e;++b)l[b]=+n.call(this,B[b],b);else for(b=0;b<e;++b)l[b]=n;A=[];if("function"===typeof t)for(b=0;b<e;++b)A[b]=+t.call(this,B[b],b);else for(b=0;b<e;++b)A[b]=t;C=[];if("function"===typeof v)for(b=0;b<d;++b)C[b]=+v.call(this,y[b],b);else for(b=0;b<d;++b)C[b]=v;return c.resume()};c.resume=function(){return c.alpha(.1)};c.stop=function(){return c.alpha(0)};c.drag=function(){f||
(f=V.behavior.drag().origin(D).on("dragstart.force",Ic).on("drag.force",b).on("dragend.force",Dg));if(!arguments.length)return f;this.on("mouseover.force",ed).on("mouseout.force",Eh).call(f)};return V.rebind(c,d,"on")};var vi=20,wi=1,Zh=Infinity;V.layout.hierarchy=function(){function a(e){var g=[e],f=[],h;for(e.depth=0;null!=(h=g.pop());)if(f.push(h),(n=c.call(a,h,h.depth))&&(k=n.length)){for(var k,n,t;0<=--k;)g.push(t=n[k]),t.parent=h,t.depth=h.depth+1;d&&(h.value=0);h.children=n}else d&&(h.value=
+d.call(a,h,h.depth)||0),delete h.children;cd(e,function(a){var c,e;b&&(c=a.children)&&c.sort(b);d&&(e=a.parent)&&(e.value+=a.value)});return f}var b=ag,c=Hf,d=pg;a.sort=function(c){if(!arguments.length)return b;b=c;return a};a.children=function(b){if(!arguments.length)return c;c=b;return a};a.value=function(b){if(!arguments.length)return d;d=b;return a};a.revalue=function(b){d&&(Cg(b,function(a){a.children&&(a.value=0)}),cd(b,function(b){var c;b.children||(b.value=+d.call(a,b,b.depth)||0);if(c=b.parent)c.value+=
b.value}));return b};return a};V.layout.partition=function(){function a(b,c,d,e){var g=b.children;b.x=c;b.y=b.depth*e;b.dx=d;b.dy=e;if(g&&(h=g.length)){var f=-1,h,k;for(d=b.value?d/b.value:0;++f<h;)a(k=g[f],c,b=k.value*d,e),c+=b}}function b(a){a=a.children;var c=0;if(a&&(e=a.length))for(var d=-1,e;++d<e;)c=Math.max(c,b(a[d]));return 1+c}function c(c,g){c=d.call(this,c,g);a(c[0],0,e[0],e[1]/b(c[0]));return c}var d=V.layout.hierarchy(),e=[1,1];c.size=function(a){if(!arguments.length)return e;e=a;return c};
return Se(c,d)};V.layout.pie=function(){function a(f){var h=f.length,k=f.map(function(c,d){return+b.call(a,c,d)}),n=+("function"===typeof d?d.apply(this,arguments):d),t=("function"===typeof e?e.apply(this,arguments):e)-n,v=Math.min(Math.abs(t)/h,+("function"===typeof g?g.apply(this,arguments):g)),m=v*(0>t?-1:1),r=V.sum(k),u=r?(t-h*m)/r:0;h=V.range(h);var y=[],D;null!=c&&h.sort(c===ai?function(a,b){return k[b]-k[a]}:function(a,b){return c(f[a],f[b])});h.forEach(function(a){y[a]={data:f[a],value:D=
k[a],startAngle:n,endAngle:n+=D*u+m,padAngle:v}});return y}var b=Number,c=ai,d=0,e=vd,g=0;a.value=function(c){if(!arguments.length)return b;b=c;return a};a.sort=function(b){if(!arguments.length)return c;c=b;return a};a.startAngle=function(b){if(!arguments.length)return d;d=b;return a};a.endAngle=function(b){if(!arguments.length)return e;e=b;return a};a.padAngle=function(b){if(!arguments.length)return g;g=b;return a};return a};var ai={};V.layout.stack=function(){function a(h,k){if(!(m=h.length))return h;
var n=h.map(function(c,d){return b.call(a,c,d)}),t=n.map(function(b){return b.map(function(b,c){return[g.call(a,b,c),f.call(a,b,c)]})}),v=c.call(a,t,k);n=V.permute(n,v);t=V.permute(t,v);k=d.call(a,t,k);v=n[0].length;var m,r,u,y;for(u=0;u<v;++u)for(e.call(a,n[0][u],y=k[u],t[0][u][1]),r=1;r<m;++r)e.call(a,n[r][u],y+=t[r-1][u][1],t[r][u][1]);return h}var b=D,c=Eg,d=Xg,e=uh,g=mf,f=Fh;a.values=function(c){if(!arguments.length)return b;b=c;return a};a.order=function(b){if(!arguments.length)return c;c="function"===
typeof b?b:Bg.get(b)||Eg;return a};a.offset=function(b){if(!arguments.length)return d;d="function"===typeof b?b:Ai.get(b)||Xg;return a};a.x=function(b){if(!arguments.length)return g;g=b;return a};a.y=function(b){if(!arguments.length)return f;f=b;return a};a.out=function(b){if(!arguments.length)return e;e=b;return a};return a};var Bg=V.map({"inside-out":function(a){var b=a.length,c=a.map(Kf),d=a.map(Hh),e=V.range(b).sort(function(a,b){return c[a]-c[b]}),g=0,f=0,h=[],k=[];for(a=0;a<b;++a){var n=e[a];
g<f?(g+=d[n],h.push(n)):(f+=d[n],k.push(n))}return k.reverse().concat(h)},reverse:function(a){return V.range(a.length).reverse()},"default":Eg}),Ai=V.map({silhouette:function(a){var b=a.length,c=a[0].length,d=[],e=0,g,f,h,k=[];for(f=0;f<c;++f){for(h=g=0;g<b;g++)h+=a[g][f][1];h>e&&(e=h);d.push(h)}for(f=0;f<c;++f)k[f]=(e-d[f])/2;return k},wiggle:function(a){var b=a.length,c=a[0],d=c.length,e,g,f,h,k,n,t,v=[];v[0]=n=t=0;for(g=1;g<d;++g){for(f=e=0;e<b;++e)f+=a[e][g][1];var m=e=0;for(k=c[g][0]-c[g-1][0];e<
b;++e){var r=0;for(h=(a[e][g][1]-a[e][g-1][1])/(2*k);r<e;++r)h+=(a[r][g][1]-a[r][g-1][1])/k;m+=h*a[e][g][1]}v[g]=n-=f?m/f*k:0;n<t&&(t=n)}for(g=0;g<d;++g)v[g]-=t;return v},expand:function(a){var b=a.length,c=a[0].length,d=1/b,e,g,f,h=[];for(g=0;g<c;++g){for(f=e=0;e<b;e++)f+=a[e][g][1];if(f)for(e=0;e<b;e++)a[e][g][1]/=f;else for(e=0;e<b;e++)a[e][g][1]=d}for(g=0;g<c;++g)h[g]=0;return h},zero:Xg});V.layout.histogram=function(){function a(a,g){var f=[],h=a.map(c,this),k=d.call(this,h,g),n=e.call(this,
k,h,g);g=-1;for(var t=h.length,v=n.length-1,m=b?1:1/t;++g<v;){var r=f[g]=[];r.dx=n[g+1]-(r.x=n[g]);r.y=0}if(0<v)for(g=-1;++g<t;)r=h[g],r>=k[0]&&r<=k[1]&&(r=f[V.bisect(n,r,1,v)-1],r.y+=m,r.push(a[g]));return f}var b=!0,c=Number,d=Qa,e=$g;a.value=function(b){if(!arguments.length)return c;c=b;return a};a.range=function(b){if(!arguments.length)return d;d=Ka(b);return a};a.bins=function(b){if(!arguments.length)return e;e="number"===typeof b?function(a){return Gg(a,b)}:Ka(b);return a};a.frequency=function(c){if(!arguments.length)return b;
b=!!c;return a};return a};V.layout.pack=function(){function a(a,g){a=b.call(this,a,g);g=a[0];var f=d[0],h=d[1],k=null==e?Math.sqrt:"function"===typeof e?e:function(){return e};g.x=g.y=0;cd(g,function(a){a.r=+k(a.value)});cd(g,Mf);if(c){var n=c*(e?1:Math.max(2*g.r/f,2*g.r/h))/2;cd(g,function(a){a.r+=n});cd(g,Mf);cd(g,function(a){a.r-=n})}dg(g,f/2,h/2,e?1:1/Math.max(2*g.r/f,2*g.r/h));return a}var b=V.layout.hierarchy().sort(Ih),c=0,d=[1,1],e;a.size=function(b){if(!arguments.length)return d;d=b;return a};
a.radius=function(b){if(!arguments.length)return e;e=null==b||"function"===typeof b?b:+b;return a};a.padding=function(b){if(!arguments.length)return c;c=+b;return a};return Se(a,b)};V.layout.tree=function(){function a(a,n){a=g.call(this,a,n);n=a[0];var t=b(n);cd(t,c);t.parent.m=-t.z;Cg(t,d);if(k)Cg(n,e);else{var v=n,m=n,r=n;Cg(n,function(a){a.x<v.x&&(v=a);a.x>m.x&&(m=a);a.depth>r.depth&&(r=a)});var u=f(v,m)/2-v.x,y=h[0]/(m.x+f(m,v)/2+u),D=h[1]/(r.depth||1);Cg(n,function(a){a.x=(a.x+u)*y;a.y=a.depth*
D})}return a}function b(a){a={A:null,children:[a]};for(var b=[a],c;null!=(c=b.pop());)for(var d=c.children,e,g=0,f=d.length;g<f;++g)b.push((d[g]=e={_:d[g],parent:c,children:(e=d[g].children)&&e.slice()||[],A:null,a:null,z:0,m:0,c:0,s:0,t:null,i:g}).a=e);return a.children[0]}function c(a){var b=a.children,c=a.parent.children,d=a.i?c[a.i-1]:null;if(b.length){for(var e=0,g=0,h=a.children,k=h.length,n;0<=--k;)n=h[k],n.z+=e,n.m+=e,e+=n.s+(g+=n.c);b=(b[0].z+b[b.length-1].z)/2;d?(a.z=d.z+f(a._,d._),a.m=
a.z-b):a.z=b}else d&&(a.z=d.z+f(a._,d._));b=a.parent;c=a.parent.A||c[0];if(d){g=e=a;h=e.parent.children[0];k=e.m;n=g.m;for(var t=d.m,v=h.m,m;d=Ie(d),e=hc(e),d&&e;){h=hc(h);g=Ie(g);g.a=a;m=d.z+t-e.z-k+f(d._,e._);if(0<m){var r=d.a.parent===a.parent?d.a:c,u=a,y=m,D=y/(u.i-r.i);u.c-=D;u.s+=y;r.c+=D;u.z+=y;u.m+=y;k+=m;n+=m}t+=d.m;k+=e.m;v+=h.m;n+=g.m}d&&!Ie(g)&&(g.t=d,g.m+=t-n);e&&!hc(h)&&(h.t=e,h.m+=k-v,c=a)}b.A=c}function d(a){a._.x=a.z+a.parent.m;a.m+=a.parent.m}function e(a){a.x*=h[0];a.y=a.depth*
h[1]}var g=V.layout.hierarchy().sort(null).value(null),f=rc,h=[1,1],k=null;a.separation=function(b){if(!arguments.length)return f;f=b;return a};a.size=function(b){if(!arguments.length)return k?null:h;k=null==(h=b)?e:null;return a};a.nodeSize=function(b){if(!arguments.length)return k?h:null;k=null==(h=b)?null:e;return a};return Se(a,g)};V.layout.cluster=function(){function a(a,g){a=b.call(this,a,g);var f=a[0],h,k=0;cd(f,function(a){var b=a.children;b&&b.length?(a.x=Je(b),a.y=Qf(b)):(a.x=h?k+=c(a,h):
0,a.y=0,h=a)});g=eg(f);var n=bb(f),t=g.x-c(g,n)/2,v=n.x+c(n,g)/2;cd(f,e?function(a){a.x=(a.x-f.x)*d[0];a.y=(f.y-a.y)*d[1]}:function(a){a.x=(a.x-t)/(v-t)*d[0];a.y=(1-(f.y?a.y/f.y:1))*d[1]});return a}var b=V.layout.hierarchy().sort(null).value(null),c=rc,d=[1,1],e=!1;a.separation=function(b){if(!arguments.length)return c;c=b;return a};a.size=function(b){if(!arguments.length)return e?null:d;e=null==(d=b);return a};a.nodeSize=function(b){if(!arguments.length)return e?d:null;e=null!=(d=b);return a};return Se(a,
b)};V.layout.treemap=function(){function a(a,b){for(var c=-1,d=a.length,e,g;++c<d;)g=(e=a[c]).value*(0>b?0:b),e.area=isNaN(g)||0>=g?0:g}function b(c){var e=c.children;if(e&&e.length){var g=n(c),f=[],h=e.slice(),k=Infinity,t,v="slice"===m?g.dx:"dice"===m?g.dy:"slice-dice"===m?c.depth&1?g.dy:g.dx:Math.min(g.dx,g.dy);a(h,g.dx*g.dy/c.value);for(f.area=0;0<(c=h.length);){f.push(c=h[c-1]);f.area+=c.area;if(!(c="squarify"!==m)){c=v;for(var u=f.area,y=0,D=Infinity,B=-1,l=f.length;++B<l;)if(t=f[B].area)t<
D&&(D=t),t>y&&(y=t);u*=u;c*=c;c=(t=u?Math.max(c*y*r/u,u/(c*D*r)):Infinity)<=k}c?(h.pop(),k=t):(f.area-=f.pop().area,d(f,v,g,!1),v=Math.min(g.dx,g.dy),f.length=f.area=0,k=Infinity)}f.length&&(d(f,v,g,!0),f.length=f.area=0);e.forEach(b)}}function c(b){var e=b.children;if(e&&e.length){var g=n(b),f=e.slice(),h=[];a(f,g.dx*g.dy/b.value);for(h.area=0;b=f.pop();)h.push(b),h.area+=b.area,null!=b.z&&(d(h,b.z?g.dx:g.dy,g,!f.length),h.length=h.area=0);e.forEach(c)}}function d(a,b,c,d){var e=-1,g=a.length,h=
c.x,k=c.y,n=b?f(a.area/b):0;if(b==c.dx){if(d||n>c.dy)n=c.dy;for(;++e<g;){var t=a[e];t.x=h;t.y=k;t.dy=n;h+=t.dx=Math.min(c.x+c.dx-h,n?f(t.area/n):0)}t.z=!0;t.dx+=c.x+c.dx-h;c.y+=n;c.dy-=n}else{if(d||n>c.dx)n=c.dx;for(;++e<g;)t=a[e],t.x=h,t.y=k,t.dx=n,k+=t.dy=Math.min(c.y+c.dy-k,n?f(t.area/n):0);t.z=!1;t.dy+=c.y+c.dy-k;c.x+=n;c.dx-=n}}function e(d){d=v||g(d);var e=d[0];e.x=e.y=0;e.value?(e.dx=h[0],e.dy=h[1]):e.dx=e.dy=0;v&&g.revalue(e);a([e],e.dx*e.dy/e.value);(v?c:b)(e);t&&(v=d);return d}var g=V.layout.hierarchy(),
f=Math.round,h=[1,1],k=null,n=fb,t=!1,v,m="squarify",r=.5*(1+Math.sqrt(5));e.size=function(a){if(!arguments.length)return h;h=a;return e};e.padding=function(a){function b(b){var c=a.call(e,b,b.depth);return null==c?fb(b):Jd(b,"number"===typeof c?[c,c,c,c]:c)}function c(b){return Jd(b,a)}if(!arguments.length)return k;var d;n=null==(k=a)?fb:"function"===(d=typeof a)?b:"number"===d?(a=[a,a,a,a],c):c;return e};e.round=function(a){if(!arguments.length)return f!=Number;f=a?Math.round:Number;return e};e.sticky=
function(a){if(!arguments.length)return t;t=a;v=null;return e};e.ratio=function(a){if(!arguments.length)return r;r=a;return e};e.mode=function(a){if(!arguments.length)return m;m=a+"";return e};return Se(e,g)};V.random={normal:function(a,b){var c=arguments.length;2>c&&(b=1);1>c&&(a=0);return function(){do{var c=2*Math.random()-1;var d=2*Math.random()-1;d=c*c+d*d}while(!d||1<d);return a+b*c*Math.sqrt(-2*Math.log(d)/d)}},logNormal:function(){var a=V.random.normal.apply(V,arguments);return function(){return Math.exp(a())}},
bates:function(a){var b=V.random.irwinHall(a);return function(){return b()/a}},irwinHall:function(a){return function(){for(var b=0,c=0;c<a;c++)b+=Math.random();return b}}};V.scale={};var oi={floor:D,ceil:D};V.scale.linear=function(){return fg([0,1],[0,1],nc,!1)};var zi={s:1,g:1,p:1,r:1,e:1};V.scale.log=function(){return tf(V.scale.linear().domain([0,1]),10,!0,[1,10])};var pi=V.format(".0e"),Gi={floor:function(a){return-Math.ceil(-a)},ceil:function(a){return-Math.floor(-a)}};V.scale.pow=function(){return gg(V.scale.linear(),
1,[0,1])};V.scale.sqrt=function(){return V.scale.pow().exponent(.5)};V.scale.ordinal=function(){return ah([],{t:"range",a:[[]]})};V.scale.category10=function(){return V.scale.ordinal().range(Hi)};V.scale.category20=function(){return V.scale.ordinal().range(qi)};V.scale.category20b=function(){return V.scale.ordinal().range(yi)};V.scale.category20c=function(){return V.scale.ordinal().range(ti)};var Hi=[2062260,16744206,2924588,14034728,9725885,9197131,14907330,8355711,12369186,1556175].map(na),qi=[2062260,
11454440,16744206,16759672,2924588,10018698,14034728,16750742,9725885,12955861,9197131,12885140,14907330,16234194,8355711,13092807,12369186,14408589,1556175,10410725].map(na),yi=[3750777,5395619,7040719,10264286,6519097,9216594,11915115,13556636,9202993,12426809,15186514,15190932,8666169,11356490,14049643,15177372,8077683,10834324,13528509,14589654].map(na),ti=[3244733,7057110,10406625,13032431,15095053,16616764,16625259,16634018,3253076,7652470,10607003,13101504,7695281,10394312,12369372,14342891,
6513507,9868950,12434877,14277081].map(na);V.scale.quantile=function(){return Jg([],[])};V.scale.quantize=function(){return bh(0,1,[0,1])};V.scale.threshold=function(){return ch([.5],[0,1])};V.scale.identity=function(){return Ud([0,1])};V.svg={};V.svg.arc=function(){function a(){var a=Math.max(0,+c.apply(this,arguments)),n=Math.max(0,+d.apply(this,arguments)),t=f.apply(this,arguments)-xb,v=h.apply(this,arguments)-xb,m=Math.abs(v-t),r=t>v?0:1;if(n<a){var u=n;n=a;a=u}if(m>=eh)return b(n,r)+(a?b(a,1-
r):"")+"Z";var y,D=0,B=0,l=[];if(y=(+k.apply(this,arguments)||0)/2){var A=g===If?Math.sqrt(a*a+n*n):+g.apply(this,arguments);r||(B*=-1);n&&(B=xa(A/n*Math.sin(y)));a&&(D=xa(A/a*Math.sin(y)))}if(n){A=n*Math.cos(t+B);y=n*Math.sin(t+B);var C=n*Math.cos(v-B);var p=n*Math.sin(v-B);var q=Math.abs(v-t-2*B)<=ib?0:1;B&&ig(A,y,C,p)===r^q&&(C=(t+v)/2,A=n*Math.cos(C),y=n*Math.sin(C),C=p=null)}else A=y=0;if(a){B=a*Math.cos(v-D);var G=a*Math.sin(v-D);var J=a*Math.cos(t+D);var db=a*Math.sin(t+D);var L=Math.abs(t-
v+2*D)<=ib?0:1;D&&ig(B,G,J,db)===1-r^L&&(J=(t+v)/2,B=a*Math.cos(J),G=a*Math.sin(J),J=db=null)}else B=G=0;1E-6<m&&.001<(u=Math.min(Math.abs(n-a)/2,+e.apply(this,arguments)))?(q=a<n^r?0:1,L=t=u,m<ib&&(m=null==J?[B,G]:null==C?[A,y]:ce([A,y],[J,db],[C,p],[B,G]),L=A-m[0],t=y-m[1],v=C-m[0],D=p-m[1],t=1/Math.sin(Math.acos((L*v+t*D)/(Math.sqrt(L*L+t*t)*Math.sqrt(v*v+D*D)))/2),m=Math.sqrt(m[0]*m[0]+m[1]*m[1]),L=Math.min(u,(a-m)/(t-1)),t=Math.min(u,(n-m)/(t+1))),null!=C?(m=Nf(null==J?[B,G]:[J,db],[A,y],n,t,
r),v=Nf([C,p],[B,G],n,t,r),u===t?l.push("M",m[0],"A",t,",",t," 0 0,",q," ",m[1],"A",n,",",n," 0 ",1-r^ig(m[1][0],m[1][1],v[1][0],v[1][1]),",",r," ",v[1],"A",t,",",t," 0 0,",q," ",v[0]):l.push("M",m[0],"A",t,",",t," 0 1,",q," ",v[0])):l.push("M",A,",",y),null!=J?(n=Nf([A,y],[J,db],a,-L,r),C=Nf([B,G],null==C?[A,y]:[C,p],a,-L,r),u===L?l.push("L",C[0],"A",L,",",L," 0 0,",q," ",C[1],"A",a,",",a," 0 ",r^ig(C[1][0],C[1][1],n[1][0],n[1][1]),",",1-r," ",n[1],"A",L,",",L," 0 0,",q," ",n[0]):l.push("L",C[0],
"A",L,",",L," 0 0,",q," ",n[0])):l.push("L",B,",",G)):(l.push("M",A,",",y),null!=C&&l.push("A",n,",",n," 0 ",q,",",r," ",C,",",p),l.push("L",B,",",G),null!=J&&l.push("A",a,",",a," 0 ",L,",",1-r," ",J,",",db));l.push("Z");return l.join("")}function b(a,b){return"M0,"+a+"A"+a+","+a+" 0 1,"+b+" 0,"+-a+"A"+a+","+a+" 0 1,"+b+" 0,"+a}var c=ug,d=tg,e=Ke,g=If,f=Jh,h=Kh,k=Th;a.innerRadius=function(b){if(!arguments.length)return c;c=Ka(b);return a};a.outerRadius=function(b){if(!arguments.length)return d;d=
Ka(b);return a};a.cornerRadius=function(b){if(!arguments.length)return e;e=Ka(b);return a};a.padRadius=function(b){if(!arguments.length)return g;g=b==If?If:Ka(b);return a};a.startAngle=function(b){if(!arguments.length)return f;f=Ka(b);return a};a.endAngle=function(b){if(!arguments.length)return h;h=Ka(b);return a};a.padAngle=function(b){if(!arguments.length)return k;k=Ka(b);return a};a.centroid=function(){var a=(+c.apply(this,arguments)+ +d.apply(this,arguments))/2,b=(+f.apply(this,arguments)+ +h.apply(this,
arguments))/2-xb;return[Math.cos(b)*a,Math.sin(b)*a]};return a};var If="auto";V.svg.line=function(){return Lh(D)};var Nc=V.map({linear:ke,"linear-closed":hh,step:function(a){for(var b=0,c=a.length,d=a[0],e=[d[0],",",d[1]];++b<c;)e.push("H",(d[0]+(d=a[b])[0])/2,"V",d[1]);1<c&&e.push("H",d[0]);return e.join("")},"step-before":Fe,"step-after":Mg,basis:Ng,"basis-open":function(a){if(4>a.length)return ke(a);for(var b=[],c=-1,d=a.length,e,g=[0],f=[0];3>++c;)e=a[c],g.push(e[0]),f.push(e[1]);b.push(yc(Ee,
g)+","+yc(Ee,f));for(--c;++c<d;)e=a[c],g.shift(),g.push(e[0]),f.shift(),f.push(e[1]),Ld(b,g,f);return b.join("")},"basis-closed":function(a){for(var b,c=-1,d=a.length,e=d+4,g,f=[],h=[];4>++c;)g=a[c%d],f.push(g[0]),h.push(g[1]);b=[yc(Ee,f),",",yc(Ee,h)];for(--c;++c<e;)g=a[c%d],f.shift(),f.push(g[0]),h.shift(),h.push(g[1]),Ld(b,f,h);return b.join("")},bundle:function(a,b){var c=a.length-1;if(c)for(var d=a[0][0],e=a[0][1],g=a[c][0]-d,f=a[c][1]-e,h=-1,k,n;++h<=c;)k=a[h],n=h/c,k[0]=b*k[0]+(1-b)*(d+n*g),
k[1]=b*k[1]+(1-b)*(e+n*f);return Ng(a)},cardinal:function(a,b){return 3>a.length?ke(a):a[0]+Xe(a,Xc(a,b))},"cardinal-open":function(a,b){return 4>a.length?ke(a):a[1]+Xe(a.slice(1,-1),Xc(a,b))},"cardinal-closed":function(a,b){return 3>a.length?hh(a):a[0]+Xe((a.push(a[0]),a),Xc([a[a.length-2]].concat(a,[a[1]]),b))},monotone:function(a){if(3>a.length)a=ke(a);else{var b=a[0],c=[],d;var e=0;var g=a.length-1;var f=[];var h=a[1];for(d=f[0]=le(a[0],h);++e<g;)f[e]=(d+(d=le(h,h=a[e+1])))/2;f[e]=d;for(var k=
-1,n=a.length-1;++k<n;)e=le(a[k],a[k+1]),1E-6>hb(e)?f[k]=f[k+1]=0:(g=f[k]/e,h=f[k+1]/e,d=g*g+h*h,9<d&&(d=3*e/Math.sqrt(d),f[k]=d*g,f[k+1]=d*h));for(k=-1;++k<=n;)d=(a[Math.min(n,k+1)][0]-a[Math.max(0,k-1)][0])/(6*(1+f[k]*f[k])),c.push([d||0,f[k]*d||0]);a=b+Xe(a,c)}return a}});Nc.forEach(function(a,b){b.key=a;b.closed=/-closed$/.test(a)});var Ff=[0,2/3,1/3,0],te=[0,1/3,2/3,0],Ee=[0,1/6,2/3,1/6];V.svg.line.radial=function(){var a=Lh(ve);a.radius=a.x;delete a.x;a.angle=a.y;delete a.y;return a};Fe.reverse=
Mg;Mg.reverse=Fe;V.svg.area=function(){return id(D)};V.svg.area.radial=function(){var a=id(ve);a.radius=a.x;delete a.x;a.innerRadius=a.x0;delete a.x0;a.outerRadius=a.x1;delete a.x1;a.angle=a.y;delete a.y;a.startAngle=a.y0;delete a.y0;a.endAngle=a.y1;delete a.y1;return a};V.svg.chord=function(){function a(a,g){var f=b(this,d,a,g);a=b(this,e,a,g);return"M"+f.p0+c(f.r,f.p1,f.a1-f.a0)+(f.a0==a.a0&&f.a1==a.a1?"Q 0,0 "+f.p0:"Q 0,0 "+a.p0+c(a.r,a.p1,a.a1-a.a0)+("Q 0,0 "+f.p0))+"Z"}function b(a,b,c,d){var e=
b.call(a,c,d);b=g.call(a,e,d);c=f.call(a,e,d)-xb;a=h.call(a,e,d)-xb;return{r:b,a0:c,a1:a,p0:[b*Math.cos(c),b*Math.sin(c)],p1:[b*Math.cos(a),b*Math.sin(a)]}}function c(a,b,c){return"A"+a+","+a+" 0 "+ +(c>ib)+",1 "+b}var d=ae,e=pe,g=jh,f=Jh,h=Kh;a.radius=function(b){if(!arguments.length)return g;g=Ka(b);return a};a.source=function(b){if(!arguments.length)return d;d=Ka(b);return a};a.target=function(b){if(!arguments.length)return e;e=Ka(b);return a};a.startAngle=function(b){if(!arguments.length)return f;
f=Ka(b);return a};a.endAngle=function(b){if(!arguments.length)return h;h=Ka(b);return a};return a};V.svg.diagonal=function(){function a(a,e){var g=b.call(this,a,e);a=c.call(this,a,e);e=(g.y+a.y)/2;g=[g,{x:g.x,y:e},{x:a.x,y:e},a];g=g.map(d);return"M"+g[0]+"C"+g[1]+" "+g[2]+" "+g[3]}var b=ae,c=pe,d=Yc;a.source=function(c){if(!arguments.length)return b;b=Ka(c);return a};a.target=function(b){if(!arguments.length)return c;c=Ka(b);return a};a.projection=function(b){if(!arguments.length)return d;d=b;return a};
return a};V.svg.diagonal.radial=function(){var a=V.svg.diagonal(),b=Yc,c=a.projection;a.projection=function(a){return arguments.length?c(mh(b=a)):b};return a};V.svg.symbol=function(){function a(a,d){return(bi.get(b.call(this,a,d))||ih)(c.call(this,a,d))}var b=Ze,c=Le;a.type=function(c){if(!arguments.length)return b;b=Ka(c);return a};a.size=function(b){if(!arguments.length)return c;c=Ka(b);return a};return a};var bi=V.map({circle:ih,cross:function(a){a=Math.sqrt(a/5)/2;return"M"+-3*a+","+-a+"H"+-a+
"V"+-3*a+"H"+a+"V"+-a+"H"+3*a+"V"+a+"H"+a+"V"+3*a+"H"+-a+"V"+a+"H"+-3*a+"Z"},diamond:function(a){a=Math.sqrt(a/(2*Dh));var b=a*Dh;return"M0,"+-a+"L"+b+",0 0,"+a+" "+-b+",0Z"},square:function(a){a=Math.sqrt(a)/2;return"M"+-a+","+-a+"L"+a+","+-a+" "+a+","+a+" "+-a+","+a+"Z"},"triangle-down":function(a){a=Math.sqrt(a/lb);var b=a*lb/2;return"M0,"+b+"L"+a+","+-b+" "+-a+","+-b+"Z"},"triangle-up":function(a){a=Math.sqrt(a/lb);var b=a*lb/2;return"M0,"+-b+"L"+a+","+b+" "+-a+","+b+"Z"}});V.svg.symbolTypes=
bi.keys();var lb=Math.sqrt(3),Dh=Math.tan(30*jb);Ib.transition=function(a){var b=De||++Ch;a=Qg(a);for(var c=[],d,e,g=Te||{time:Date.now(),ease:$f,delay:0,duration:250},f=-1,h=this.length;++f<h;){c.push(d=[]);for(var k=this[f],n=-1,t=k.length;++n<t;)(e=k[n])&&jg(e,n,a,b,g),d.push(e)}return kg(c,a,b)};Ib.interrupt=function(a){return this.each(null==a?qh:Pg(Qg(a)))};var qh=Pg(Qg()),Gc=[],Ch=0,De,Te;Gc.call=Ib.call;Gc.empty=Ib.empty;Gc.node=Ib.node;Gc.size=Ib.size;V.transition=function(a,b){return a&&
a.transition?De?a.transition(b):a:V.selection().transition(a)};V.transition.prototype=Gc;Gc.select=function(a){var b=this.id,c=this.namespace,d=[],e,g,f;a=I(a);for(var h=-1,k=this.length;++h<k;){d.push(e=[]);for(var n=this[h],t=-1,v=n.length;++t<v;)(f=n[t])&&(g=a.call(f,f.__data__,t,h))?("__data__"in f&&(g.__data__=f.__data__),jg(g,t,c,b,f[c][b]),e.push(g)):e.push(null)}return kg(d,c,b)};Gc.selectAll=function(a){var b=this.id,c=this.namespace,d=[],e,g;a=Q(a);for(var f=-1,h=this.length;++f<h;)for(var k=
this[f],n=-1,t=k.length;++n<t;)if(e=k[n]){var v=e[c][b];var m=a.call(e,e.__data__,n,f);d.push(e=[]);for(var r=-1,u=m.length;++r<u;)(g=m[r])&&jg(g,r,c,b,v),e.push(g)}return kg(d,c,b)};Gc.filter=function(a){var b=[],c,d;"function"!==typeof a&&(a=S(a));for(var e=0,g=this.length;e<g;e++){b.push(c=[]);var f=this[e];for(var h=0,k=f.length;h<k;h++)(d=f[h])&&a.call(d,d.__data__,h,e)&&c.push(d)}return kg(b,this.namespace,this.id)};Gc.tween=function(a,b){var c=this.id,d=this.namespace;return 2>arguments.length?
this.node()[d][c].tween.get(a):fa(this,null==b?function(b){b[d][c].tween.remove(a)}:function(e){e[d][c].tween.set(a,b)})};Gc.attr=function(a,b){function c(){this.removeAttribute(h)}function d(){this.removeAttributeNS(h.space,h.local)}function e(a){return null==a?c:(a+="",function(){var b=this.getAttribute(h),c;return b!==a&&(c=f(b,a),function(a){this.setAttribute(h,c(a))})})}function g(a){return null==a?d:(a+="",function(){var b=this.getAttributeNS(h.space,h.local),c;return b!==a&&(c=f(b,a),function(a){this.setAttributeNS(h.space,
h.local,c(a))})})}if(2>arguments.length){for(b in a)this.attr(b,a[b]);return this}var f="transform"==a?qc:nc,h=V.ns.qualify(a);return $e(this,"attr."+a,b,h.local?g:e)};Gc.attrTween=function(a,b){function c(a,c){var d=b.call(this,a,c,this.getAttribute(e));return d&&function(a){this.setAttribute(e,d(a))}}function d(a,c){var d=b.call(this,a,c,this.getAttributeNS(e.space,e.local));return d&&function(a){this.setAttributeNS(e.space,e.local,d(a))}}var e=V.ns.qualify(a);return this.tween("attr."+a,e.local?
d:c)};Gc.style=function(b,c,d){function e(){this.style.removeProperty(b)}var g=arguments.length;if(3>g){if("string"!==typeof b){2>g&&(c="");for(d in b)this.style(d,b[d],c);return this}d=""}return $e(this,"style."+b,c,function(c){return null==c?e:(c+="",function(){var e=a(this).getComputedStyle(this,null).getPropertyValue(b),g;return e!==c&&(g=nc(e,c),function(a){this.style.setProperty(b,g(a),d)})})})};Gc.styleTween=function(b,c,d){3>arguments.length&&(d="");return this.tween("style."+b,function(e,
g){var f=c.call(this,e,g,a(this).getComputedStyle(this,null).getPropertyValue(b));return f&&function(a){this.style.setProperty(b,f(a),d)}})};Gc.text=function(a){return $e(this,"text",a,we)};Gc.remove=function(){var a=this.namespace;return this.each("end.transition",function(){var b;2>this[a].count&&(b=this.parentNode)&&b.removeChild(this)})};Gc.ease=function(a){var b=this.id,c=this.namespace;if(1>arguments.length)return this.node()[c][b].ease;"function"!==typeof a&&(a=V.ease.apply(V,arguments));return fa(this,
function(d){d[c][b].ease=a})};Gc.delay=function(a){var b=this.id,c=this.namespace;return 1>arguments.length?this.node()[c][b].delay:fa(this,"function"===typeof a?function(d,e,g){d[c][b].delay=+a.call(d,d.__data__,e,g)}:(a=+a,function(d){d[c][b].delay=a}))};Gc.duration=function(a){var b=this.id,c=this.namespace;return 1>arguments.length?this.node()[c][b].duration:fa(this,"function"===typeof a?function(d,e,g){d[c][b].duration=Math.max(1,a.call(d,d.__data__,e,g))}:(a=Math.max(1,a),function(d){d[c][b].duration=
a}))};Gc.each=function(a,b){var c=this.id,d=this.namespace;if(2>arguments.length){var e=Te,g=De;try{De=c,fa(this,function(b,e,g){Te=b[d][c];a.call(b,b.__data__,e,g)})}finally{Te=e,De=g}}else fa(this,function(e){e=e[d][c];(e.event||(e.event=V.dispatch("start","end","interrupt"))).on(a,b)});return this};Gc.transition=function(){for(var a=this.id,b=++Ch,c=this.namespace,d=[],e,g,f,h,k=0,n=this.length;k<n;k++){d.push(e=[]);g=this[k];for(var t=0,v=g.length;t<v;t++){if(f=g[t])h=f[c][a],jg(f,t,c,b,{time:h.time,
ease:h.ease,delay:h.delay+h.duration,duration:h.duration});e.push(f)}}return kg(d,c,b)};V.svg.axis=function(){function a(a){a.each(function(){var a=V.select(this),n=this.__chart__||b,t=this.__chart__=b.copy(),v=null==h?t.ticks?t.ticks.apply(t,f):t.domain():h,m=null==k?t.tickFormat?t.tickFormat.apply(t,f):D:k,r=a.selectAll(".tick").data(v,t);v=r.enter().insert("g",".domain").attr("class","tick").style("opacity",1E-6);var u=V.transition(r.exit()).style("opacity",1E-6).remove(),y=V.transition(r.order()).style("opacity",
1),B=Math.max(d,0)+g,l=jd(t);a=a.selectAll(".domain").data([0]);a=(a.enter().append("path").attr("class","domain"),V.transition(a));v.append("line");v.append("text");var A=v.select("line"),C=y.select("line");r=r.select("text").text(m);var p=v.select("text"),q=y.select("text"),G="top"===c||"left"===c?-1:1;if("bottom"===c||"top"===c){m=xh;var J="x";var db="y";var L="x2";var E="y2";r.attr("dy",0>G?"0em":".71em").style("text-anchor","middle");a.attr("d","M"+l[0]+","+G*e+"V0H"+l[1]+"V"+G*e)}else m=Uh,
J="y",db="x",L="y2",E="x2",r.attr("dy",".32em").style("text-anchor",0>G?"end":"start"),a.attr("d","M"+G*e+","+l[0]+"H0V"+l[1]+"H"+G*e);A.attr(E,G*d);p.attr(db,G*B);C.attr(L,0).attr(E,G*d);q.attr(J,0).attr(db,G*B);if(t.rangeBand){var P=t,I=P.rangeBand()/2;n=t=function(a){return P(a)+I}}else n.rangeBand?n=t:u.call(m,t,n);v.call(m,n,t);y.call(m,t,t)})}var b=V.scale.linear(),c=ue,d=6,e=6,g=3,f=[10],h=null,k;a.scale=function(c){if(!arguments.length)return b;b=c;return a};a.orient=function(b){if(!arguments.length)return c;
c=b in ci?b+"":ue;return a};a.ticks=function(){if(!arguments.length)return f;f=kd(arguments);return a};a.tickValues=function(b){if(!arguments.length)return h;h=b;return a};a.tickFormat=function(b){if(!arguments.length)return k;k=b;return a};a.tickSize=function(b){var c=arguments.length;if(!c)return d;d=+b;e=+arguments[c-1];return a};a.innerTickSize=function(b){if(!arguments.length)return d;d=+b;return a};a.outerTickSize=function(b){if(!arguments.length)return e;e=+b;return a};a.tickPadding=function(b){if(!arguments.length)return g;
g=+b;return a};a.tickSubdivide=function(){return arguments.length&&a};return a};var ue="bottom",ci={top:1,right:1,bottom:1,left:1};V.svg.brush=function(){function b(a){a.each(function(){var a=V.select(this).style("pointer-events","all").style("-webkit-tap-highlight-color","rgba(0,0,0,0)").on("mousedown.brush",g).on("touchstart.brush",g),f=a.selectAll(".background").data([0]);f.enter().append("rect").attr("class","background").style("visibility","hidden").style("cursor","crosshair");a.selectAll(".extent").data([0]).enter().append("rect").attr("class",
"extent").style("cursor","move");var n=a.selectAll(".resize").data(y,D);n.exit().remove();n.enter().append("g").attr("class",function(a){return"resize "+a}).style("cursor",function(a){return di[a]}).append("rect").attr("x",function(a){return/[ew]$/.test(a)?-3:null}).attr("y",function(a){return/^[ns]/.test(a)?-3:null}).attr("width",6).attr("height",6).style("visibility","hidden");n.style("display",b.empty()?"none":null);a=V.transition(a);f=V.transition(f);h&&(n=jd(h),f.attr("x",n[0]).attr("width",
n[1]-n[0]),d(a));k&&(n=jd(k),f.attr("y",n[0]).attr("height",n[1]-n[0]),e(a));c(a)})}function c(a){a.selectAll(".resize").attr("transform",function(a){return"translate("+n[+/e$/.test(a)]+","+t[+/^s/.test(a)]+")"})}function d(a){a.select(".extent").attr("x",n[0]);a.selectAll(".extent,.n\x3erect,.s\x3erect").attr("width",n[1]-n[0])}function e(a){a.select(".extent").attr("y",t[0]);a.selectAll(".extent,.e\x3erect,.w\x3erect").attr("height",t[1]-t[0])}function g(){function g(){var a=V.mouse(B),b=!1;H&&
(a[0]+=H[0],a[1]+=H[1]);J||(V.event.altKey?(L||(L=[(n[0]+n[1])/2,(t[0]+t[1])/2]),P[0]=n[+(a[0]<L[0])],P[1]=t[+(a[1]<L[1])]):L=null);q&&y(a,h,0)&&(d(C),b=!0);G&&y(a,k,1)&&(e(C),b=!0);b&&(c(C),A({type:"brush",mode:J?"move":"resize"}))}function y(a,b,c){var d=jd(b);b=d[0];var e=d[1];d=P[c];var g=c?t:n,f=g[1]-g[0];J&&(b-=d,e-=f+d);a=(c?u:r)?Math.max(b,Math.min(e,a[c])):a[c];J?b=(a+=d)+f:(L&&(d=Math.max(b,Math.min(e,2*L[c]-a))),d<a?(b=a,a=d):b=d);if(g[0]!=a||g[1]!=b)return c?m=null:v=null,g[0]=a,g[1]=
b,!0}function D(){g();C.style("pointer-events","all").selectAll(".resize").style("display",b.empty()?"none":null);V.select("body").style("cursor",null);I.on("mousemove.brush",null).on("mouseup.brush",null).on("touchmove.brush",null).on("touchend.brush",null).on("keydown.brush",null).on("keyup.brush",null);db();A({type:"brushend"})}var B=this,l=V.select(V.event.target),A=f.of(B,arguments),C=V.select(B),p=l.datum(),q=!/^(n|s)$/.test(p)&&h,G=!/^(e|w)$/.test(p)&&k,J=l.classed("extent"),db=Z(B),L,P=V.mouse(B),
I=V.select(a(B)).on("keydown.brush",function(){32==V.event.keyCode&&(J||(L=null,P[0]-=n[1],P[1]-=t[1],J=2),E())}).on("keyup.brush",function(){32==V.event.keyCode&&2==J&&(P[0]+=n[1],P[1]+=t[1],J=0,E())});if(V.event.changedTouches)I.on("touchmove.brush",g).on("touchend.brush",D);else I.on("mousemove.brush",g).on("mouseup.brush",D);C.interrupt().selectAll("*").interrupt();if(J)P[0]=n[0]-P[0],P[1]=t[0]-P[1];else if(p){var N=+/w$/.test(p);p=+/^n/.test(p);var H=[n[1-N]-P[0],t[1-p]-P[1]];P[0]=n[N];P[1]=
t[p]}else V.event.altKey&&(L=P.slice());C.style("pointer-events","none").selectAll(".resize").style("display",null);V.select("body").style("cursor",l.style("cursor"));A({type:"brushstart"});g()}var f=M(b,"brushstart","brush","brushend"),h=null,k=null,n=[0,0],t=[0,0],v,m,r=!0,u=!0,y=Id[0];b.event=function(a){a.each(function(){var a=f.of(this,arguments),b={x:n,y:t,i:v,j:m},c=this.__chart__||b;this.__chart__=b;De?V.select(this).transition().each("start.brush",function(){v=c.i;m=c.j;n=c.x;t=c.y;a({type:"brushstart"})}).tween("brush:brush",
function(){var c=Qb(n,b.x),d=Qb(t,b.y);v=m=null;return function(e){n=b.x=c(e);t=b.y=d(e);a({type:"brush",mode:"resize"})}}).each("end.brush",function(){v=b.i;m=b.j;a({type:"brush",mode:"resize"});a({type:"brushend"})}):(a({type:"brushstart"}),a({type:"brush",mode:"resize"}),a({type:"brushend"}))})};b.x=function(a){if(!arguments.length)return h;h=a;y=Id[!h<<1|!k];return b};b.y=function(a){if(!arguments.length)return k;k=a;y=Id[!h<<1|!k];return b};b.clamp=function(a){if(!arguments.length)return h&&
k?[r,u]:h?r:k?u:null;h&&k?(r=!!a[0],u=!!a[1]):h?r=!!a:k&&(u=!!a);return b};b.extent=function(a){if(!arguments.length){if(h)if(v){var c=v[0];var d=v[1]}else if(c=n[0],d=n[1],h.invert&&(c=h.invert(c),d=h.invert(d)),d<c){var e=c;c=d;d=e}if(k)if(m){var g=m[0];var f=m[1]}else g=t[0],f=t[1],k.invert&&(g=k.invert(g),f=k.invert(f)),f<g&&(e=g,g=f,f=e);return h&&k?[[c,g],[d,f]]:h?[c,d]:k&&[g,f]}h&&(c=a[0],d=a[1],k&&(c=c[0],d=d[0]),v=[c,d],h.invert&&(c=h(c),d=h(d)),d<c&&(e=c,c=d,d=e),c!=n[0]||d!=n[1])&&(n=[c,
d]);k&&(g=a[0],f=a[1],h&&(g=g[1],f=f[1]),m=[g,f],k.invert&&(g=k(g),f=k(f)),f<g&&(e=g,g=f,f=e),g!=t[0]||f!=t[1])&&(t=[g,f]);return b};b.clear=function(){b.empty()||(n=[0,0],t=[0,0],v=m=null);return b};b.empty=function(){return!!h&&n[0]==n[1]||!!k&&t[0]==t[1]};return V.rebind(b,f,"on")};var di={n:"ns-resize",e:"ew-resize",s:"ns-resize",w:"ew-resize",nw:"nwse-resize",ne:"nesw-resize",se:"nwse-resize",sw:"nesw-resize"},Id=["n e s w nw ne se sw".split(" "),["e","w"],["n","s"],[]],of=Na.format=Xh.timeFormat,
he=of.utc,bg=he("%Y-%m-%dT%H:%M:%S.%LZ");of.iso=Date.prototype.toISOString&&+new Date("2000-01-01T00:00:00.000Z")?Og:bg;Og.parse=function(a){a=new Date(a);return isNaN(a)?null:a};Og.toString=bg.toString;Na.second=pb(function(a){return new Oc(1E3*Math.floor(a/1E3))},function(a,b){a.setTime(a.getTime()+1E3*Math.floor(b))},function(a){return a.getSeconds()});Na.seconds=Na.second.range;Na.seconds.utc=Na.second.utc.range;Na.minute=pb(function(a){return new Oc(6E4*Math.floor(a/6E4))},function(a,b){a.setTime(a.getTime()+
6E4*Math.floor(b))},function(a){return a.getMinutes()});Na.minutes=Na.minute.range;Na.minutes.utc=Na.minute.utc.range;Na.hour=pb(function(a){var b=a.getTimezoneOffset()/60;return new Oc(36E5*(Math.floor(a/36E5-b)+b))},function(a,b){a.setTime(a.getTime()+36E5*Math.floor(b))},function(a){return a.getHours()});Na.hours=Na.hour.range;Na.hours.utc=Na.hour.utc.range;Na.month=pb(function(a){a=Na.day(a);a.setDate(1);return a},function(a,b){a.setMonth(a.getMonth()+b)},function(a){return a.getMonth()});Na.months=
Na.month.range;Na.months.utc=Na.month.utc.range;var qg=[1E3,5E3,15E3,3E4,6E4,3E5,9E5,18E5,36E5,108E5,216E5,432E5,864E5,1728E5,6048E5,2592E6,7776E6,31536E6],vh=[[Na.second,1],[Na.second,5],[Na.second,15],[Na.second,30],[Na.minute,1],[Na.minute,5],[Na.minute,15],[Na.minute,30],[Na.hour,1],[Na.hour,3],[Na.hour,6],[Na.hour,12],[Na.day,1],[Na.day,2],[Na.week,1],[Na.month,1],[Na.month,3],[Na.year,1]],ge=of.multi([[".%L",function(a){return a.getMilliseconds()}],[":%S",function(a){return a.getSeconds()}],
["%I:%M",function(a){return a.getMinutes()}],["%I %p",function(a){return a.getHours()}],["%a %d",function(a){return a.getDay()&&1!=a.getDate()}],["%b %d",function(a){return 1!=a.getDate()}],["%B",function(a){return a.getMonth()}],["%Y",Wd]]),fi={range:function(a,b,c){return V.range(Math.ceil(a/c)*c,+b,c).map(Qd)},floor:D,ceil:D};vh.year=Na.year;Na.scale=function(){return kh(V.scale.linear(),vh,ge)};var Zg=vh.map(function(a){return[a[0].utc,a[1]]}),si=he.multi([[".%L",function(a){return a.getUTCMilliseconds()}],
[":%S",function(a){return a.getUTCSeconds()}],["%I:%M",function(a){return a.getUTCMinutes()}],["%I %p",function(a){return a.getUTCHours()}],["%a %d",function(a){return a.getUTCDay()&&1!=a.getUTCDate()}],["%b %d",function(a){return 1!=a.getUTCDate()}],["%B",function(a){return a.getUTCMonth()}],["%Y",Wd]]);Zg.year=Na.year.utc;Na.scale.utc=function(){return kh(V.scale.linear(),Zg,si)};V.text=Ua(function(a){return a.responseText});V.json=function(a,b){return Ya(a,"application/json",Wh,b)};V.html=function(a,
b){return Ya(a,"text/html",Vh,b)};V.xml=Ua(function(a){return a.responseXML});"object"===typeof p&&p.exports?p.exports=V:this.d3=V}()},{}],155:[function(a,p,l){p.exports=function(){for(var a=0;a<arguments.length;a++)if(void 0!==arguments[a])return arguments[a]}},{}],156:[function(a,p,l){function m(a,e){this.point=a;this.index=e}function k(a,e){a=a.point;e=e.point;for(var b=a.length,f=0;f<b;++f){var d=e[f]-a[f];if(d)return d}return 0}function h(a,e,f){if(1===a)return f?[[-1,0]]:[];e=e.map(function(a,
b){return[a[0],b]});e.sort(function(a,b){return a[0]-b[0]});for(var b=Array(a-1),d=1;d<a;++d)b[d-1]=[e[d-1][1],e[d][1]];f&&b.push([-1,b[0][1]],[b[a-1][1],-1]);return b}var e=a("incremental-convex-hull"),f=a("uniq");p.exports=function(a,n){var b=a.length;if(0===b)return[];var r=a[0].length;if(1>r)return[];if(1===r)return h(b,a,n);for(var d=Array(b),g=1,c=0;c<b;++c){for(var v=a[c],t=Array(r+1),y=0,B=0;B<r;++B){var D=v[B];t[B]=D;y+=D*D}t[r]=y;d[c]=new m(t,c);g=Math.max(y,g)}f(d,k);b=d.length;a=Array(b+
r+1);var l=Array(b+r+1);v=Array(r+1);for(c=0;c<=r;++c)v[c]=0;v[r]=(r+1)*(r+1)*g;a[0]=v.slice();l[0]=-1;for(c=0;c<=r;++c)t=v.slice(),t[c]=1,a[c+1]=t,l[c+1]=-1;for(c=0;c<b;++c)g=d[c],a[c+r+1]=g.point,l[c+r+1]=g.index;b=e(a,!1);b=n?b.filter(function(a){for(var b=0,c=0;c<=r;++c){var d=l[a[c]];if(0>d&&2<=++b)return!1;a[c]=d}return!0}):b.filter(function(a){for(var b=0;b<=r;++b){var c=l[a[b]];if(0>c)return!1;a[b]=c}return!0});if(r&1)for(c=0;c<b.length;++c)g=b[c],t=g[0],g[0]=g[1],g[1]=t;return b}},{"incremental-convex-hull":405,
uniq:531}],157:[function(a,p,l){function m(a,b){Array.isArray(a)&&(a=a.join(", "));var f={},m=16,r=.05;if(b)if(2===b.length&&"number"===typeof b[0])var d=k(b);else Array.isArray(b)?d=b:(b.o?d=k(b.o):b.pairs&&(d=b.pairs),b.fontSize&&(m=b.fontSize),null!=b.threshold&&(r=b.threshold));d||(d=e);h.font=m+"px "+a;for(a=0;a<d.length;a++){b=d[a];var g=h.measureText(b[0]).width+h.measureText(b[1]).width,c=h.measureText(b).width;Math.abs(g-c)>m*r&&(f[b]=(c-g)/m*1E3)}return f}function k(a){for(var b=[],e=a[0];e<=
a[1];e++)for(var f=String.fromCharCode(e),h=a[0];h<a[1];h++){var d=String.fromCharCode(h);b.push(f+d)}return b}p.exports=m;var h=(m.canvas=document.createElement("canvas")).getContext("2d"),e=k([32,126]);m.createPairs=k;m.ascii=e},{}],158:[function(a,p,l){(function(a){var k=!1;if("undefined"!==typeof Float64Array){var h=new Float64Array(1),e=new Uint32Array(h.buffer);h[0]=1;k=!0;1072693248===e[1]?(p.exports=function(a){h[0]=a;return[e[0],e[1]]},p.exports.pack=function(a,f){e[0]=a;e[1]=f;return h[0]},
p.exports.lo=function(a){h[0]=a;return e[0]},p.exports.hi=function(a){h[0]=a;return e[1]}):1072693248===e[0]?(p.exports=function(a){h[0]=a;return[e[1],e[0]]},p.exports.pack=function(a,f){e[1]=a;e[0]=f;return h[0]},p.exports.lo=function(a){h[0]=a;return e[1]},p.exports.hi=function(a){h[0]=a;return e[0]}):k=!1}if(!k){var f=new a(8);p.exports=function(a){f.writeDoubleLE(a,0,!0);return[f.readUInt32LE(0,!0),f.readUInt32LE(4,!0)]};p.exports.pack=function(a,e){f.writeUInt32LE(a,0,!0);f.writeUInt32LE(e,4,
!0);return f.readDoubleLE(0,!0)};p.exports.lo=function(a){f.writeDoubleLE(a,0,!0);return f.readUInt32LE(0,!0)};p.exports.hi=function(a){f.writeDoubleLE(a,0,!0);return f.readUInt32LE(4,!0)}}p.exports.sign=function(a){return p.exports.hi(a)>>>31};p.exports.exponent=function(a){return(p.exports.hi(a)<<1>>>21)-1023};p.exports.fraction=function(a){var b=p.exports.lo(a);a=p.exports.hi(a);var e=a&1048575;a&2146435072&&(e+=1048576);return[b,e]};p.exports.denormalized=function(a){return!(p.exports.hi(a)&2146435072)}}).call(this,
a("buffer").Buffer)},{buffer:95}],159:[function(a,p,l){var m=a("abs-svg-path"),k=a("normalize-svg-path"),h={M:"moveTo",C:"bezierCurveTo"};p.exports=function(a,f){a.beginPath();k(m(f)).forEach(function(b){var e=b[0];b=b.slice(1);a[h[e]].apply(a,b)});a.closePath()}},{"abs-svg-path":50,"normalize-svg-path":444}],160:[function(a,p,l){p.exports=function(a){switch(a){case "int8":return Int8Array;case "int16":return Int16Array;case "int32":return Int32Array;case "uint8":return Uint8Array;case "uint16":return Uint16Array;
case "uint32":return Uint32Array;case "float32":return Float32Array;case "float64":return Float64Array;case "array":return Array;case "uint8_clamped":return Uint8ClampedArray}}},{}],161:[function(a,p,l){function m(a,h,e){var f=a[e]|0;if(0>=f)return[];var b=Array(f),k;if(e===a.length-1)for(k=0;k<f;++k)b[k]=h;else for(k=0;k<f;++k)b[k]=m(a,h,e+1);return b}p.exports=function(a,h){"undefined"===typeof h&&(h=0);switch(typeof a){case "number":if(0<a){a|=0;var e;var f=Array(a);for(e=0;e<a;++e)f[e]=h;return f}break;
case "object":if("number"===typeof a.length)return m(a,h,0)}return[]}},{}],162:[function(a,p,l){function m(a,c,d){d=d||2;var g=c&&c.length,f=g?c[0]*d:a.length,t=k(a,0,f,d,!0),v=[];if(!t)return v;var m;if(g){var u=d;g=[];var D;var B=0;for(D=c.length;B<D;B++){var l=c[B]*u;var A=B<D-1?c[B+1]*u:a.length;l=k(a,l,A,u,!1);l===l.next&&(l.steiner=!0);g.push(r(l))}g.sort(b);for(B=0;B<g.length;B++){c=g[B];u=t;if(u=n(c,u))c=y(u,c),h(c,c.next);t=h(t,t.next)}}if(a.length>80*d){var C=m=a[0];var p=g=a[1];for(u=d;u<
f;u+=d)B=a[u],c=a[u+1],B<C&&(C=B),c<p&&(p=c),B>m&&(m=B),c>g&&(g=c);m=Math.max(m-C,g-p);m=0!==m?1/m:0}e(t,v,d,C,p,m);return v}function k(a,b,d,e,g){if(g===0<A(a,b,d,e))for(g=b;g<d;g+=e)var f=B(g,a[g],a[g+1],f);else for(g=d-e;g>=b;g-=e)f=B(g,a[g],a[g+1],f);f&&c(f,f.next)&&(D(f),f=f.next);return f}function h(a,b){if(!a)return a;b||(b=a);do{var d=!1;if(a.steiner||!c(a,a.next)&&0!==g(a.prev,a,a.next))a=a.next;else{D(a);a=b=a.prev;if(a===a.next)break;d=!0}}while(d||a!==b);return b}function e(a,b,k,n,m,
r,B){if(a){if(!B&&r){var l=a,A=l;do null===A.z&&(A.z=u(A.x,A.y,n,m,r)),A.prevZ=A.prev,A=A.nextZ=A.next;while(A!==l);A.prevZ.nextZ=null;A.prevZ=null;l=A;var p,C,q,G,J=1;do{A=l;var E=l=null;for(C=0;A;){C++;var P=A;for(p=q=0;p<J&&(q++,P=P.nextZ,P);p++);for(G=J;0<q||0<G&&P;)0!==q&&(0===G||!P||A.z<=P.z)?(p=A,A=A.nextZ,q--):(p=P,P=P.nextZ,G--),E?E.nextZ=p:l=p,p.prevZ=E,E=p;A=P}E.nextZ=null;J*=2}while(1<C)}for(l=a;a.prev!==a.next;){A=a.prev;P=a.next;if(r)E=f(a,n,m,r);else a:if(E=a,C=E.prev,q=E,J=E.next,
0<=g(C,q,J))E=!1;else{for(p=E.next.next;p!==E.prev;){if(d(C.x,C.y,q.x,q.y,J.x,J.y,p.x,p.y)&&0<=g(p.prev,p,p.next)){E=!1;break a}p=p.next}E=!0}if(E)b.push(A.i/k),b.push(a.i/k),b.push(P.i/k),D(a),l=a=P.next;else if(a=P,a===l){if(!B)e(h(a),b,k,n,m,r,1);else if(1===B){B=b;l=k;A=a;do P=A.prev,E=A.next.next,!c(P,E)&&v(P,A,A.next,E)&&t(P,E)&&t(E,P)&&(B.push(P.i/l),B.push(A.i/l),B.push(E.i/l),D(A),D(A.next),A=a=E),A=A.next;while(A!==a);a=A;e(a,b,k,n,m,r,2)}else if(2===B)a:{B=a;do{for(l=B.next.next;l!==B.prev;){if(A=
B.i!==l.i){A=B;P=l;if(E=A.next.i!==P.i&&A.prev.i!==P.i){b:{E=A;do{if(E.i!==A.i&&E.next.i!==A.i&&E.i!==P.i&&E.next.i!==P.i&&v(E,E.next,A,P)){E=!0;break b}E=E.next}while(E!==A);E=!1}E=!E}if(E=E&&t(A,P)&&t(P,A)){E=A;C=!1;q=(A.x+P.x)/2;P=(A.y+P.y)/2;do E.y>P!==E.next.y>P&&E.next.y!==E.y&&q<(E.next.x-E.x)*(P-E.y)/(E.next.y-E.y)+E.x&&(C=!C),E=E.next;while(E!==A);E=C}A=E}if(A){a=y(B,l);B=h(B,B.next);a=h(a,a.next);e(B,b,k,n,m,r);e(a,b,k,n,m,r);break a}l=l.next}B=B.next}while(B!==a)}break}}}}function f(a,
b,c,e){var f=a.prev,h=a.next;if(0<=g(f,a,h))return!1;var k=f.x>a.x?f.x>h.x?f.x:h.x:a.x>h.x?a.x:h.x,n=f.y>a.y?f.y>h.y?f.y:h.y:a.y>h.y?a.y:h.y,t=u(f.x<a.x?f.x<h.x?f.x:h.x:a.x<h.x?a.x:h.x,f.y<a.y?f.y<h.y?f.y:h.y:a.y<h.y?a.y:h.y,b,c,e);b=u(k,n,b,c,e);c=a.prevZ;for(e=a.nextZ;c&&c.z>=t&&e&&e.z<=b;){if(c!==a.prev&&c!==a.next&&d(f.x,f.y,a.x,a.y,h.x,h.y,c.x,c.y)&&0<=g(c.prev,c,c.next))return!1;c=c.prevZ;if(e!==a.prev&&e!==a.next&&d(f.x,f.y,a.x,a.y,h.x,h.y,e.x,e.y)&&0<=g(e.prev,e,e.next))return!1;e=e.nextZ}for(;c&&
c.z>=t;){if(c!==a.prev&&c!==a.next&&d(f.x,f.y,a.x,a.y,h.x,h.y,c.x,c.y)&&0<=g(c.prev,c,c.next))return!1;c=c.prevZ}for(;e&&e.z<=b;){if(e!==a.prev&&e!==a.next&&d(f.x,f.y,a.x,a.y,h.x,h.y,e.x,e.y)&&0<=g(e.prev,e,e.next))return!1;e=e.nextZ}return!0}function b(a,b){return a.x-b.x}function n(a,b){var c=b,e=a.x,g=a.y,f=-Infinity;do{if(g<=c.y&&g>=c.next.y&&c.next.y!==c.y){var h=c.x+(g-c.y)*(c.next.x-c.x)/(c.next.y-c.y);if(h<=e&&h>f){f=h;if(h===e){if(g===c.y)return c;if(g===c.next.y)return c.next}var k=c.x<
c.next.x?c:c.next}}c=c.next}while(c!==b);if(!k)return null;if(e===f)return k.prev;b=k;h=k.x;var n=k.y,v=Infinity;for(c=k.next;c!==b;){if(e>=c.x&&c.x>=h&&e!==c.x&&d(g<n?e:f,g,h,n,g<n?f:e,g,c.x,c.y)){var m=Math.abs(g-c.y)/(e-c.x);(m<v||m===v&&c.x>k.x)&&t(c,a)&&(k=c,v=m)}c=c.next}return k}function u(a,b,c,d,e){a=32767*(a-c)*e;b=32767*(b-d)*e;a=(a|a<<8)&16711935;a=(a|a<<4)&252645135;a=(a|a<<2)&858993459;b=(b|b<<8)&16711935;b=(b|b<<4)&252645135;b=(b|b<<2)&858993459;return(a|a<<1)&1431655765|((b|b<<1)&
1431655765)<<1}function r(a){var b=a,c=a;do b.x<c.x&&(c=b),b=b.next;while(b!==a);return c}function d(a,b,c,d,e,g,f,h){return 0<=(e-f)*(b-h)-(a-f)*(g-h)&&0<=(a-f)*(d-h)-(c-f)*(b-h)&&0<=(c-f)*(g-h)-(e-f)*(d-h)}function g(a,b,c){return(b.y-a.y)*(c.x-b.x)-(b.x-a.x)*(c.y-b.y)}function c(a,b){return a.x===b.x&&a.y===b.y}function v(a,b,d,e){return c(a,b)&&c(d,e)||c(a,e)&&c(d,b)?!0:0<g(a,b,d)!==0<g(a,b,e)&&0<g(d,e,a)!==0<g(d,e,b)}function t(a,b){return 0>g(a.prev,a,a.next)?0<=g(a,b,a.next)&&0<=g(a,a.prev,
b):0>g(a,b,a.prev)||0>g(a,a.next,b)}function y(a,b){var c=new q(a.i,a.x,a.y),d=new q(b.i,b.x,b.y),e=a.next,g=b.prev;a.next=b;b.prev=a;c.next=e;e.prev=c;d.next=c;c.prev=d;g.next=d;d.prev=g;return d}function B(a,b,c,d){a=new q(a,b,c);d?(a.next=d.next,a.prev=d,d.next.prev=a,d.next=a):(a.prev=a,a.next=a);return a}function D(a){a.next.prev=a.prev;a.prev.next=a.next;a.prevZ&&(a.prevZ.nextZ=a.nextZ);a.nextZ&&(a.nextZ.prevZ=a.prevZ)}function q(a,b,c){this.i=a;this.x=b;this.y=c;this.nextZ=this.prevZ=this.z=
this.next=this.prev=null;this.steiner=!1}function A(a,b,c,d){for(var e=0,g=c-d;b<c;b+=d)e+=(a[g]-a[b])*(a[b+1]+a[g+1]),g=b;return e}p.exports=m;p.exports.default=m;m.deviation=function(a,b,c,d){var e=b&&b.length,g=Math.abs(A(a,0,e?b[0]*c:a.length,c));if(e){e=0;for(var f=b.length;e<f;e++)g-=Math.abs(A(a,b[e]*c,e<f-1?b[e+1]*c:a.length,c))}for(e=b=0;e<d.length;e+=3){f=d[e]*c;var h=d[e+1]*c,k=d[e+2]*c;b+=Math.abs((a[f]-a[k])*(a[h+1]-a[f+1])-(a[f]-a[h])*(a[k+1]-a[f+1]))}return 0===g&&0===b?0:Math.abs((b-
g)/g)};m.flatten=function(a){for(var b=a[0][0].length,c={vertices:[],holes:[],dimensions:b},d=0,e=0;e<a.length;e++){for(var g=0;g<a[e].length;g++)for(var f=0;f<b;f++)c.vertices.push(a[e][g][f]);0<e&&(d+=a[e-1].length,c.holes.push(d))}return c}},{}],163:[function(a,p,l){p.exports=function(a,h){var e=a.length;if("number"!==typeof h){for(var f=h=0;f<e;++f){var b=a[f];h=Math.max(h,b[0],b[1])}h=(h|0)+1}h|=0;var k=Array(h);for(f=0;f<h;++f)k[f]=[];for(f=0;f<e;++f)b=a[f],k[b[0]].push(b[1]),k[b[1]].push(b[0]);
for(a=0;a<h;++a)m(k[a],function(a,b){return a-b});return k};var m=a("uniq")},{uniq:531}],164:[function(a,p,l){var m=a("strongly-connected-components");p.exports=function(a){function h(a){r[a]=!1;d.hasOwnProperty(a)&&Object.keys(d[a]).forEach(function(b){delete d[a][b];r[b]&&h(b)})}function e(a){var b=!1;u.push(a);r[a]=!0;var f;for(f=0;f<g[a].length;f++){var n=g[a][f];n===c?(b=c,b=[].concat(u).concat(b),k.push(b),b=!0):r[n]||(b=e(n))}if(b)h(a);else for(f=0;f<g[a].length;f++){n=g[a][f];var t=d[n];t||
(t={},d[n]=t);t[n]=!0}u.pop();return b}function f(b){for(var c=0;c<a.length;c++)c<b&&(a[c]=[]),a[c]=a[c].filter(function(a){return a>=b})}function b(b){f(b);var c=m(a).components.filter(function(a){return 1<a.length});b=Infinity;for(var d,e=0;e<c.length;e++)for(var g=0;g<c[e].length;g++)c[e][g]<b&&(b=c[e][g],d=e);var h=c[d];if(!h)return!1;d=a.map(function(a,b){return-1===h.indexOf(b)?[]:a.filter(function(a){return-1!==h.indexOf(a)})});return{leastVertex:b,adjList:d}}var k=[],u=[],r=[],d={},g=[];var c=
0;for(var v=a.length;c<v;){var t=b(c);c=t.leastVertex;if(g=t.adjList){for(t=0;t<g.length;t++)for(var y=0;y<g[t].length;y++){var B=g[t][y];r[+B]=!1;d[B]={}}e(c);c+=1}else c=v}return k}},{"strongly-connected-components":514}],165:[function(a,p,l){var m=a("../../object/valid-value");p.exports=function(){m(this).length=0;return this}},{"../../object/valid-value":197}],166:[function(a,p,l){p.exports=a("./is-implemented")()?Array.from:a("./shim")},{"./is-implemented":167,"./shim":168}],167:[function(a,
p,l){p.exports=function(){var a=Array.from;if("function"!==typeof a)return!1;var k=["raz","dwa"];a=a(k);return!(!a||a===k||"dwa"!==a[1])}},{}],168:[function(a,p,l){var m=a("es6-symbol").iterator,k=a("../../function/is-arguments"),h=a("../../function/is-function"),e=a("../../number/to-pos-integer"),f=a("../../object/valid-callable"),b=a("../../object/valid-value"),n=a("../../object/is-value"),u=a("../../string/is-string"),r=Array.isArray,d=Function.prototype.call,g={configurable:!0,enumerable:!0,writable:!0,
value:null},c=Object.defineProperty;p.exports=function(a,t,y){var v,D;a=Object(b(a));n(t)&&f(t);if(this&&this!==Array&&h(this))var l=this;else{if(!t){if(k(a)){var A=a.length;if(1!==A)return Array.apply(null,a);var p=Array(1);p[0]=a[0];return p}if(r(a)){p=Array(A=a.length);for(v=0;v<A;++v)p[v]=a[v];return p}}p=[]}if(!r(a))if(void 0!==(v=a[m])){A=f(v).call(a);l&&(p=new l);var q=A.next();for(v=0;!q.done;)q=t?d.call(t,y,q.value,v):q.value,l?(g.value=q,c(p,v,g)):p[v]=q,q=A.next(),++v;A=v}else if(u(a)){A=
a.length;l&&(p=new l);for(D=v=0;v<A;++v){q=a[v];if(v+1<A){var J=q.charCodeAt(0);55296<=J&&56319>=J&&(q+=a[++v])}q=t?d.call(t,y,q,D):q;l?(g.value=q,c(p,D,g)):p[D]=q;++D}A=D}if(void 0===A)for(A=e(a.length),l&&(p=new l(A)),v=0;v<A;++v)q=t?d.call(t,y,a[v],v):a[v],l?(g.value=q,c(p,v,g)):p[v]=q;l&&(g.value=null,p.length=A);return p}},{"../../function/is-arguments":169,"../../function/is-function":170,"../../number/to-pos-integer":176,"../../object/is-value":186,"../../object/valid-callable":195,"../../object/valid-value":197,
"../../string/is-string":201,"es6-symbol":211}],169:[function(a,p,l){var m=Object.prototype.toString,k=m.call(function(){return arguments}());p.exports=function(a){return m.call(a)===k}},{}],170:[function(a,p,l){var m=Object.prototype.toString,k=m.call(a("./noop"));p.exports=function(a){return"function"===typeof a&&m.call(a)===k}},{"./noop":171}],171:[function(a,p,l){p.exports=function(){}},{}],172:[function(a,p,l){p.exports=a("./is-implemented")()?Math.sign:a("./shim")},{"./is-implemented":173,"./shim":174}],
173:[function(a,p,l){p.exports=function(){var a=Math.sign;return"function"!==typeof a?!1:1===a(10)&&-1===a(-20)}},{}],174:[function(a,p,l){p.exports=function(a){a=Number(a);return isNaN(a)||0===a?a:0<a?1:-1}},{}],175:[function(a,p,l){var m=a("../math/sign"),k=Math.abs,h=Math.floor;p.exports=function(a){if(isNaN(a))return 0;a=Number(a);return 0!==a&&isFinite(a)?m(a)*h(k(a)):a}},{"../math/sign":172}],176:[function(a,p,l){var m=a("./to-integer"),k=Math.max;p.exports=function(a){return k(0,m(a))}},{"./to-integer":175}],
177:[function(a,p,l){var m=a("./valid-callable"),k=a("./valid-value"),h=Function.prototype.bind,e=Function.prototype.call,f=Object.keys,b=Object.prototype.propertyIsEnumerable;p.exports=function(a,u){return function(n,d,g,c){n=Object(k(n));m(d);var v=f(n);c&&v.sort("function"===typeof c?h.call(c,n):void 0);"function"!==typeof a&&(a=v[a]);return e.call(a,v,function(a,c){return b.call(n,a)?e.call(d,g,n[a],a,n,c):u})}}},{"./valid-callable":195,"./valid-value":197}],178:[function(a,p,l){p.exports=a("./is-implemented")()?
Object.assign:a("./shim")},{"./is-implemented":179,"./shim":180}],179:[function(a,p,l){p.exports=function(){var a=Object.assign;if("function"!==typeof a)return!1;var k={foo:"raz"};a(k,{bar:"dwa"},{trzy:"trzy"});return"razdwatrzy"===k.foo+k.bar+k.trzy}},{}],180:[function(a,p,l){var m=a("../keys"),k=a("../valid-value"),h=Math.max;p.exports=function(a,f){var b,e,u=h(arguments.length,2);a=Object(k(a));var r=function(d){try{a[d]=f[d]}catch(g){b||(b=g)}};for(e=1;e<u;++e)f=arguments[e],m(f).forEach(r);if(void 0!==
b)throw b;return a}},{"../keys":187,"../valid-value":197}],181:[function(a,p,l){var m=a("../array/from"),k=a("./assign"),h=a("./valid-value");p.exports=function(a,f,b){var e=Object(h(a)),u=Object(b);if(e!==a&&!f)return e;var r={};f?m(f,function(b){if(u.ensure||b in a)r[b]=a[b]}):k(r,a);return r}},{"../array/from":166,"./assign":178,"./valid-value":197}],182:[function(a,p,l){var m=Object.create,k;a("./set-prototype-of/is-implemented")()||(k=a("./set-prototype-of/shim"));p.exports=function(){if(!k||
1!==k.level)return m;var a={};var e={};var f={configurable:!1,enumerable:!1,writable:!0,value:void 0};Object.getOwnPropertyNames(Object.prototype).forEach(function(a){e[a]="__proto__"===a?{configurable:!0,enumerable:!1,writable:!0,value:void 0}:f});Object.defineProperties(a,e);Object.defineProperty(k,"nullPolyfill",{configurable:!1,enumerable:!1,writable:!1,value:a});return function(b,e){return m(null===b?a:b,e)}}()},{"./set-prototype-of/is-implemented":193,"./set-prototype-of/shim":194}],183:[function(a,
p,l){p.exports=a("./_iterate")("forEach")},{"./_iterate":177}],184:[function(a,p,l){p.exports=function(a){return"function"===typeof a}},{}],185:[function(a,p,l){var m=a("./is-value"),k={function:!0,object:!0};p.exports=function(a){return m(a)&&k[typeof a]||!1}},{"./is-value":186}],186:[function(a,p,l){var m=a("../function/noop")();p.exports=function(a){return a!==m&&null!==a}},{"../function/noop":171}],187:[function(a,p,l){p.exports=a("./is-implemented")()?Object.keys:a("./shim")},{"./is-implemented":188,
"./shim":189}],188:[function(a,p,l){p.exports=function(){try{return Object.keys("primitive"),!0}catch(m){return!1}}},{}],189:[function(a,p,l){var m=a("../is-value"),k=Object.keys;p.exports=function(a){return k(m(a)?Object(a):a)}},{"../is-value":186}],190:[function(a,p,l){var m=a("./valid-callable"),k=a("./for-each"),h=Function.prototype.call;p.exports=function(a,f,b){var e={};m(f);k(a,function(a,k,d,g){e[k]=h.call(f,b,a,k,d,g)});return e}},{"./for-each":183,"./valid-callable":195}],191:[function(a,
p,l){var m=a("./is-value"),k=Array.prototype.forEach,h=Object.create;p.exports=function(a){var e=h(null);k.call(arguments,function(a){if(m(a)){a=Object(a);for(var b in a)e[b]=a[b]}});return e}},{"./is-value":186}],192:[function(a,p,l){p.exports=a("./is-implemented")()?Object.setPrototypeOf:a("./shim")},{"./is-implemented":193,"./shim":194}],193:[function(a,p,l){var m=Object.create,k=Object.getPrototypeOf,h={};p.exports=function(a){var e=Object.setPrototypeOf;return"function"!==typeof e?!1:k(e((a||
m)(null),h))===h}},{}],194:[function(a,p,l){var m=a("../is-object"),k=a("../valid-value"),h=Object.prototype.isPrototypeOf,e=Object.defineProperty,f={configurable:!0,enumerable:!1,writable:!0,value:void 0};var b=function(a,b){k(a);if(null===b||m(b))return a;throw new TypeError("Prototype must be null or an object");};p.exports=function(a){if(!a)return null;if(2===a.level)if(a.set){var k=a.set;var n=function(a,e){k.call(b(a,e),e);return a}}else n=function(a,e){b(a,e).__proto__=e;return a};else n=function v(a,
c){var g;b(a,c);(g=h.call(v.nullPolyfill,a))&&delete v.nullPolyfill.__proto__;null===c&&(c=v.nullPolyfill);a.__proto__=c;g&&e(v.nullPolyfill,"__proto__",f);return a};return Object.defineProperty(n,"level",{configurable:!1,enumerable:!1,writable:!1,value:a.level})}(function(){var a=Object.create(null),b={},e=Object.getOwnPropertyDescriptor(Object.prototype,"__proto__");if(e){try{var d=e.set;d.call(a,b)}catch(g){}if(Object.getPrototypeOf(a)===b)return{set:d,level:2}}a.__proto__=b;if(Object.getPrototypeOf(a)===
b)return{level:2};a={};a.__proto__=b;return Object.getPrototypeOf(a)===b?{level:1}:!1}());a("../create")},{"../create":182,"../is-object":185,"../valid-value":197}],195:[function(a,p,l){p.exports=function(a){if("function"!==typeof a)throw new TypeError(a+" is not a function");return a}},{}],196:[function(a,p,l){var m=a("./is-object");p.exports=function(a){if(!m(a))throw new TypeError(a+" is not an Object");return a}},{"./is-object":185}],197:[function(a,p,l){var m=a("./is-value");p.exports=function(a){if(!m(a))throw new TypeError("Cannot use null or undefined");
return a}},{"./is-value":186}],198:[function(a,p,l){p.exports=a("./is-implemented")()?String.prototype.contains:a("./shim")},{"./is-implemented":199,"./shim":200}],199:[function(a,p,l){p.exports=function(){return"function"!==typeof"razdwatrzy".contains?!1:!0==="razdwatrzy".contains("dwa")&&!1==="razdwatrzy".contains("foo")}},{}],200:[function(a,p,l){var m=String.prototype.indexOf;p.exports=function(a,h){return-1<m.call(this,a,h)}},{}],201:[function(a,p,l){var m=Object.prototype.toString,k=m.call("");
p.exports=function(a){return"string"===typeof a||a&&"object"===typeof a&&(a instanceof String||m.call(a)===k)||!1}},{}],202:[function(a,p,l){var m=Object.create(null),k=Math.random;p.exports=function(){do var a=k().toString(36).slice(2);while(m[a]);return a}},{}],203:[function(a,p,l){l=a("es5-ext/object/set-prototype-of");var m=a("es5-ext/string/#/contains"),k=a("d"),h=a("es6-symbol"),e=a("./"),f=Object.defineProperty;var b=p.exports=function(a,h){if(!(this instanceof b))throw new TypeError("Constructor requires 'new'");
e.call(this,a);h=h?m.call(h,"key+value")?"key+value":m.call(h,"key")?"key":"value":"value";f(this,"__kind__",k("",h))};l&&l(b,e);delete b.prototype.constructor;b.prototype=Object.create(e.prototype,{_resolve:k(function(a){return"value"===this.__kind__?this.__list__[a]:"key+value"===this.__kind__?[a,this.__list__[a]]:a})});f(b.prototype,h.toStringTag,k("c","Array Iterator"))},{"./":206,d:141,"es5-ext/object/set-prototype-of":192,"es5-ext/string/#/contains":198,"es6-symbol":211}],204:[function(a,p,
l){var m=a("es5-ext/function/is-arguments"),k=a("es5-ext/object/valid-callable"),h=a("es5-ext/string/is-string"),e=a("./get"),f=Array.isArray,b=Function.prototype.call,n=Array.prototype.some;p.exports=function(a,r,d){var g,c;f(a)||m(a)?g="array":h(a)?g="string":a=e(a);k(r);var v=function(){c=!0};if("array"===g)n.call(a,function(a){b.call(r,d,a,v);return c});else if("string"===g){var t=a.length;for(g=0;g<t;++g){var u=a[g];if(g+1<t){var B=u.charCodeAt(0);55296<=B&&56319>=B&&(u+=a[++g])}b.call(r,d,u,
v);if(c)break}}else for(g=a.next();!g.done;){b.call(r,d,g.value,v);if(c)break;g=a.next()}}},{"./get":205,"es5-ext/function/is-arguments":169,"es5-ext/object/valid-callable":195,"es5-ext/string/is-string":201}],205:[function(a,p,l){var m=a("es5-ext/function/is-arguments"),k=a("es5-ext/string/is-string"),h=a("./array"),e=a("./string"),f=a("./valid-iterable"),b=a("es6-symbol").iterator;p.exports=function(a){return"function"===typeof f(a)[b]?a[b]():m(a)?new h(a):k(a)?new e(a):new h(a)}},{"./array":203,
"./string":208,"./valid-iterable":209,"es5-ext/function/is-arguments":169,"es5-ext/string/is-string":201,"es6-symbol":211}],206:[function(a,p,l){var m=a("es5-ext/array/#/clear");l=a("es5-ext/object/assign");var k=a("es5-ext/object/valid-callable"),h=a("es5-ext/object/valid-value"),e=a("d"),f=a("d/auto-bind"),b=a("es6-symbol"),n=Object.defineProperty,u=Object.defineProperties,r;p.exports=r=function(a,b){if(!(this instanceof r))throw new TypeError("Constructor requires 'new'");u(this,{__list__:e("w",
h(a)),__context__:e("w",b),__nextIndex__:e("w",0)});b&&(k(b.on),b.on("_add",this._onAdd),b.on("_delete",this._onDelete),b.on("_clear",this._onClear))};delete r.prototype.constructor;u(r.prototype,l({_next:e(function(){if(this.__list__){if(this.__redo__){var a=this.__redo__.shift();if(void 0!==a)return a}if(this.__nextIndex__<this.__list__.length)return this.__nextIndex__++;this._unBind()}}),next:e(function(){return this._createResult(this._next())}),_createResult:e(function(a){return void 0===a?{done:!0,
value:void 0}:{done:!1,value:this._resolve(a)}}),_resolve:e(function(a){return this.__list__[a]}),_unBind:e(function(){this.__list__=null;delete this.__redo__;this.__context__&&(this.__context__.off("_add",this._onAdd),this.__context__.off("_delete",this._onDelete),this.__context__.off("_clear",this._onClear),this.__context__=null)}),toString:e(function(){return"[object "+(this[b.toStringTag]||"Object")+"]"})},f({_onAdd:e(function(a){a>=this.__nextIndex__||(++this.__nextIndex__,this.__redo__?(this.__redo__.forEach(function(b,
c){b>=a&&(this.__redo__[c]=++b)},this),this.__redo__.push(a)):n(this,"__redo__",e("c",[a])))}),_onDelete:e(function(a){if(!(a>=this.__nextIndex__)&&(--this.__nextIndex__,this.__redo__)){var b=this.__redo__.indexOf(a);-1!==b&&this.__redo__.splice(b,1);this.__redo__.forEach(function(b,d){b>a&&(this.__redo__[d]=--b)},this)}}),_onClear:e(function(){this.__redo__&&m.call(this.__redo__);this.__nextIndex__=0})})));n(r.prototype,b.iterator,e(function(){return this}))},{d:141,"d/auto-bind":140,"es5-ext/array/#/clear":165,
"es5-ext/object/assign":178,"es5-ext/object/valid-callable":195,"es5-ext/object/valid-value":197,"es6-symbol":211}],207:[function(a,p,l){var m=a("es5-ext/function/is-arguments"),k=a("es5-ext/object/is-value"),h=a("es5-ext/string/is-string"),e=a("es6-symbol").iterator,f=Array.isArray;p.exports=function(a){return k(a)?f(a)||h(a)||m(a)?!0:"function"===typeof a[e]:!1}},{"es5-ext/function/is-arguments":169,"es5-ext/object/is-value":186,"es5-ext/string/is-string":201,"es6-symbol":211}],208:[function(a,
p,l){l=a("es5-ext/object/set-prototype-of");var m=a("d"),k=a("es6-symbol"),h=a("./"),e=Object.defineProperty;var f=p.exports=function(a){if(!(this instanceof f))throw new TypeError("Constructor requires 'new'");a=String(a);h.call(this,a);e(this,"__length__",m("",a.length))};l&&l(f,h);delete f.prototype.constructor;f.prototype=Object.create(h.prototype,{_next:m(function(){if(this.__list__){if(this.__nextIndex__<this.__length__)return this.__nextIndex__++;this._unBind()}}),_resolve:m(function(a){a=
this.__list__[a];if(this.__nextIndex__===this.__length__)return a;var b=a.charCodeAt(0);return 55296<=b&&56319>=b?a+this.__list__[this.__nextIndex__++]:a})});e(f.prototype,k.toStringTag,m("c","String Iterator"))},{"./":206,d:141,"es5-ext/object/set-prototype-of":192,"es6-symbol":211}],209:[function(a,p,l){var m=a("./is-iterable");p.exports=function(a){if(!m(a))throw new TypeError(a+" is not iterable");return a}},{"./is-iterable":207}],210:[function(a,p,l){(function(m,k){(function(a,e){"object"===
typeof l&&"undefined"!==typeof p?p.exports=e():a.ES6Promise=e()})(this,function(){function h(){return function(){return m.nextTick(u)}}function e(){return function(){x(u)}}function f(){var a=0,b=new W(u),c=document.createTextNode("");b.observe(c,{characterData:!0});return function(){c.data=a=++a%2}}function b(){var a=new MessageChannel;a.port1.onmessage=u;return function(){return a.port2.postMessage(0)}}function n(){var a=setTimeout;return function(){return a(u,1)}}function u(){for(var a=0;a<w;a+=
2)(0,z[a])(z[a+1]),z[a]=void 0,z[a+1]=void 0;w=0}function r(){try{var b=a("vertx");x=b.runOnLoop||b.runOnContext;return e()}catch(xa){return n()}}function d(a,b){var d=arguments,e=this,g=new this.constructor(c);void 0===g[ea]&&I(g);var f=e._state;f?function(){var a=d[f-1];ia(function(){return M(f,g,a,e._result)})}():J(e,g,a,b);return g}function g(a){if(a&&"object"===typeof a&&a.constructor===this)return a;var b=new this(c);l(b,a);return b}function c(){}function v(a){try{return a.then}catch(xa){return pa.error=
xa,pa}}function t(a,b,c,d){try{a.call(b,c,d)}catch(wa){return wa}}function y(a,b,c){ia(function(a){var d=!1,e=t(c,b,function(c){d||(d=!0,b!==c?l(a,c):p(a,c))},function(b){d||(d=!0,q(a,b))},"Settle: "+(a._label||" unknown promise"));!d&&e&&(d=!0,q(a,e))},a)}function B(a,b){b._state===la?p(a,b._result):b._state===Z?q(a,b._result):J(b,void 0,function(b){return l(a,b)},function(b){return q(a,b)})}function D(a,b,c){b.constructor===a.constructor&&c===d&&b.constructor.resolve===g?B(a,b):c===pa?q(a,pa.error):
void 0===c?p(a,b):"function"===typeof c?y(a,b,c):p(a,b)}function l(a,b){a===b?q(a,new TypeError("You cannot resolve a promise with itself")):"function"===typeof b||"object"===typeof b&&null!==b?D(a,b,v(b)):p(a,b)}function A(a){a._onerror&&a._onerror(a._result);E(a)}function p(a,b){a._state===ba&&(a._result=b,a._state=la,0!==a._subscribers.length&&ia(E,a))}function q(a,b){a._state===ba&&(a._state=Z,a._result=b,ia(A,a))}function J(a,b,c,d){var e=a._subscribers,g=e.length;a._onerror=null;e[g]=b;e[g+
la]=c;e[g+Z]=d;0===g&&a._state&&ia(E,a)}function E(a){var b=a._subscribers,c=a._state;if(0!==b.length){for(var d,e,g=a._result,f=0;f<b.length;f+=3)d=b[f],e=b[f+c],d?M(c,d,e,g):e(g);a._subscribers.length=0}}function H(){this.error=null}function M(a,b,c,d){var e="function"===typeof c,g=void 0,f=void 0,h=void 0,k=void 0;if(e){try{g=c(d)}catch(va){da.error=va,g=da}g===da?(k=!0,f=g.error,g=null):h=!0;if(b===g){q(b,new TypeError("A promises callback cannot return that same promise."));return}}else g=d,
h=!0;b._state===ba&&(e&&h?l(b,g):k?q(b,f):a===la?p(b,g):a===Z&&q(b,g))}function O(a,b){try{b(function(b){l(a,b)},function(b){q(a,b)})}catch(za){q(a,za)}}function I(a){a[ea]=F++;a._state=void 0;a._result=void 0;a._subscribers=[]}function Q(a,b){this._instanceConstructor=a;this.promise=new a(c);this.promise[ea]||I(this.promise);ca(b)?(this._input=b,this._remaining=this.length=b.length,this._result=Array(this.length),0===this.length?p(this.promise,this._result):(this.length=this.length||0,this._enumerate(),
0===this._remaining&&p(this.promise,this._result))):q(this.promise,Error("Array Methods must be provided an Array"))}function N(a){this[ea]=F++;this._result=this._state=void 0;this._subscribers=[];if(c!==a){if("function"!==typeof a)throw new TypeError("You must pass a resolver function as the first argument to the promise constructor");if(this instanceof N)O(this,a);else throw new TypeError("Failed to construct 'Promise': Please use the 'new' operator, this object constructor cannot be called as a function.");
}}function L(){var a=void 0;if("undefined"!==typeof k)a=k;else if("undefined"!==typeof self)a=self;else try{a=Function("return this")()}catch(ka){throw Error("polyfill failed because global object is unavailable in this environment");}var b=a.Promise;if(b){var c=null;try{c=Object.prototype.toString.call(b.resolve())}catch(ka){}if("[object Promise]"===c&&!b.cast)return}a.Promise=N}var R=void 0,ca=R=Array.isArray?Array.isArray:function(a){return"[object Array]"===Object.prototype.toString.call(a)},
w=0,x=void 0,Y=void 0,ia=function(a,b){z[w]=a;z[w+1]=b;w+=2;2===w&&(Y?Y(u):ha())},S=(R="undefined"!==typeof window?window:void 0)||{},W=S.MutationObserver||S.WebKitMutationObserver;S="undefined"===typeof self&&"undefined"!==typeof m&&"[object process]"==={}.toString.call(m);var fa="undefined"!==typeof Uint8ClampedArray&&"undefined"!==typeof importScripts&&"undefined"!==typeof MessageChannel,z=Array(1E3),ha=void 0;ha=S?h():W?f():fa?b():void 0===R&&"function"===typeof a?r():n();var ea=Math.random().toString(36).substring(16),
ba=void 0,la=1,Z=2,pa=new H,da=new H,F=0;Q.prototype._enumerate=function(){for(var a=this.length,b=this._input,c=0;this._state===ba&&c<a;c++)this._eachEntry(b[c],c)};Q.prototype._eachEntry=function(a,b){var e=this._instanceConstructor,f=e.resolve;f===g?(f=v(a),f===d&&a._state!==ba?this._settledAt(a._state,b,a._result):"function"!==typeof f?(this._remaining--,this._result[b]=a):e===N?(e=new e(c),D(e,a,f),this._willSettleAt(e,b)):this._willSettleAt(new e(function(b){return b(a)}),b)):this._willSettleAt(f(a),
b)};Q.prototype._settledAt=function(a,b,c){var d=this.promise;d._state===ba&&(this._remaining--,a===Z?q(d,c):this._result[b]=c);0===this._remaining&&p(d,this._result)};Q.prototype._willSettleAt=function(a,b){var c=this;J(a,void 0,function(a){return c._settledAt(la,b,a)},function(a){return c._settledAt(Z,b,a)})};N.all=function(a){return(new Q(this,a)).promise};N.race=function(a){var b=this;return ca(a)?new b(function(c,d){for(var e=a.length,g=0;g<e;g++)b.resolve(a[g]).then(c,d)}):new b(function(a,
b){return b(new TypeError("You must pass an array to race."))})};N.resolve=g;N.reject=function(a){var b=new this(c);q(b,a);return b};N._setScheduler=function(a){Y=a};N._setAsap=function(a){ia=a};N._asap=ia;N.prototype={constructor:N,then:d,"catch":function(a){return this.then(null,a)}};L();N.polyfill=L;return N.Promise=N})}).call(this,a("_process"),"undefined"!==typeof x?x:"undefined"!==typeof self?self:"undefined"!==typeof window?window:{})},{_process:474}],211:[function(a,p,l){$jscomp.initSymbol();
p.exports=a("./is-implemented")()?Symbol:a("./polyfill")},{"./is-implemented":212,"./polyfill":214}],212:[function(a,p,l){var m={object:!0,symbol:!0};p.exports=function(){$jscomp.initSymbol();if("function"!==typeof Symbol)return!1;$jscomp.initSymbol();var a=Symbol("test symbol");try{String(a)}catch(h){return!1}$jscomp.initSymbol();$jscomp.initSymbolIterator();if(!m[typeof Symbol.iterator])return!1;$jscomp.initSymbol();if(!m[typeof Symbol.toPrimitive])return!1;$jscomp.initSymbol();return m[typeof Symbol.toStringTag]?
!0:!1}},{}],213:[function(a,p,l){p.exports=function(a){return a?"symbol"===typeof a?!0:a.constructor&&"Symbol"===a.constructor.name?"Symbol"===a[a.constructor.toStringTag]:!1:!1}},{}],214:[function(a,p,l){var m=a("d"),k=a("./validate-symbol"),h=Object.create,e=Object.defineProperties,f=Object.defineProperty,b=Object.prototype,n,u=h(null);$jscomp.initSymbol();if("function"===typeof Symbol){$jscomp.initSymbol();var r=Symbol;try{String(r());var d=!0}catch(v){}}var g=function(){var a=h(null);return function(c){for(var d=
0,e,g;a[c+(d||"")];)++d;c+=d||"";a[c]=!0;e="@@"+c;f(b,e,m.gs(null,function(a){g||(g=!0,f(this,e,m(a)),g=!1)}));return e}}();var c=function(a){if(this instanceof c)throw new TypeError("Symbol is not a constructor");return n(a)};p.exports=n=function y(a){if(this instanceof y)throw new TypeError("Symbol is not a constructor");if(d)return r(a);var b=h(c.prototype);a=void 0===a?"":String(a);return e(b,{__description__:m("",a),__name__:m("",g(a))})};e(n,{for:m(function(a){return u[a]?u[a]:u[a]=n(String(a))}),
keyFor:m(function(a){var b;k(a);for(b in u)if(u[b]===a)return b}),hasInstance:m("",r&&r.hasInstance||n("hasInstance")),isConcatSpreadable:m("",r&&r.isConcatSpreadable||n("isConcatSpreadable")),iterator:m("",r&&r.iterator||n("iterator")),match:m("",r&&r.match||n("match")),replace:m("",r&&r.replace||n("replace")),search:m("",r&&r.search||n("search")),species:m("",r&&r.species||n("species")),split:m("",r&&r.split||n("split")),toPrimitive:m("",r&&r.toPrimitive||n("toPrimitive")),toStringTag:m("",r&&r.toStringTag||
n("toStringTag")),unscopables:m("",r&&r.unscopables||n("unscopables"))});e(c.prototype,{constructor:m(n),toString:m("",function(){return this.__name__})});e(n.prototype,{toString:m(function(){return"Symbol ("+k(this).__description__+")"}),valueOf:m(function(){return k(this)})});f(n.prototype,n.toPrimitive,m("",function(){var a=k(this);return"symbol"===typeof a?a:a.toString()}));f(n.prototype,n.toStringTag,m("c","Symbol"));f(c.prototype,n.toStringTag,m("c",n.prototype[n.toStringTag]));f(c.prototype,
n.toPrimitive,m("c",n.prototype[n.toPrimitive]))},{"./validate-symbol":215,d:141}],215:[function(a,p,l){var m=a("./is-symbol");p.exports=function(a){if(!m(a))throw new TypeError(a+" is not a symbol");return a}},{"./is-symbol":213}],216:[function(a,p,l){p.exports=a("./is-implemented")()?WeakMap:a("./polyfill")},{"./is-implemented":217,"./polyfill":219}],217:[function(a,p,l){p.exports=function(){var a;if("function"!==typeof WeakMap)return!1;try{var k=new WeakMap([[a={},"one"],[{},"two"],[{},"three"]])}catch(h){return!1}return"[object WeakMap]"!==
String(k)||"function"!==typeof k.set||k.set({},1)!==k||"function"!==typeof k.delete||"function"!==typeof k.has||"one"!==k.get(a)?!1:!0}},{}],218:[function(a,p,l){a="function"!==typeof WeakMap?!1:"[object WeakMap]"===Object.prototype.toString.call(new WeakMap);p.exports=a},{}],219:[function(a,p,l){var m=a("es5-ext/object/set-prototype-of"),k=a("es5-ext/object/valid-object"),h=a("es5-ext/object/valid-value"),e=a("es5-ext/string/random-uniq"),f=a("d"),b=a("es6-iterator/get"),n=a("es6-iterator/for-of");
l=a("es6-symbol").toStringTag;var u=a("./is-native-implemented"),r=Array.isArray,d=Object.defineProperty,g=Object.prototype.hasOwnProperty,c=Object.getPrototypeOf,v;p.exports=v=function(a){if(!(this instanceof v))throw new TypeError("Constructor requires 'new'");var g=u&&m&&WeakMap!==v?m(new WeakMap,c(this)):this;null!=a&&(r(a)||(a=b(a)));d(g,"__weakMapData__",f("c","$weakMap$"+e()));if(!a)return g;n(a,function(a){h(a);g.set(a[0],a[1])});return g};u&&(m&&m(v,WeakMap),v.prototype=Object.create(WeakMap.prototype,
{constructor:f(v)}));Object.defineProperties(v.prototype,{delete:f(function(a){return g.call(k(a),this.__weakMapData__)?(delete a[this.__weakMapData__],!0):!1}),get:f(function(a){if(g.call(k(a),this.__weakMapData__))return a[this.__weakMapData__]}),has:f(function(a){return g.call(k(a),this.__weakMapData__)}),set:f(function(a,b){d(k(a),this.__weakMapData__,f("c",b));return this}),toString:f(function(){return"[object WeakMap]"})});d(v.prototype,l,f("c","WeakMap"))},{"./is-native-implemented":218,d:141,
"es5-ext/object/set-prototype-of":192,"es5-ext/object/valid-object":196,"es5-ext/object/valid-value":197,"es5-ext/string/random-uniq":202,"es6-iterator/for-of":204,"es6-iterator/get":205,"es6-symbol":211}],220:[function(a,p,l){p.exports=function(a,k,h){k=k||0;h=h||1;return[[a[12]+a[0],a[13]+a[1],a[14]+a[2],a[15]+a[3]],[a[12]-a[0],a[13]-a[1],a[14]-a[2],a[15]-a[3]],[a[12]+a[4],a[13]+a[5],a[14]+a[6],a[15]+a[7]],[a[12]-a[4],a[13]-a[5],a[14]-a[6],a[15]-a[7]],[k*a[12]+a[8],k*a[13]+a[9],k*a[14]+a[10],k*
a[15]+a[11]],[h*a[12]-a[8],h*a[13]-a[9],h*a[14]-a[10],h*a[15]-a[11]]]}},{}],221:[function(a,p,l){var m=a("is-string-blank");p.exports=function(a){var h=typeof a;if("string"===h){if(h=a,a=+a,0===a&&m(h))return!1}else if("number"!==h)return!1;return 1>a-a}},{"is-string-blank":415}],222:[function(a,p,l){function m(a,e,f){return Math.min(e,Math.max(a,f))}function k(a,e,f){this.dimension=a.length;this.bounds=[Array(this.dimension),Array(this.dimension)];for(var b=0;b<this.dimension;++b)this.bounds[0][b]=
-Infinity,this.bounds[1][b]=Infinity;this._state=a.slice().reverse();this._velocity=e.slice().reverse();this._time=[f];this._scratch=[a.slice(),a.slice(),a.slice(),a.slice(),a.slice()]}function h(a){for(var b=Array(a),e=0;e<a;++e)b[e]=0;return b}p.exports=function(a,e,f){switch(arguments.length){case 0:return new k([0],[0],0);case 1:if("number"===typeof a){var b=h(a);return new k(b,b,0)}return new k(a,h(a.length),0);case 2:if("number"===typeof e)return b=h(a.length),new k(a,b,+e);f=0;case 3:if(a.length!==
e.length)throw Error("state and velocity lengths must match");return new k(a,e,f)}};var e=a("cubic-hermite"),f=a("binary-search-bounds");a=k.prototype;a.flush=function(a){a=f.gt(this._time,a)-1;0>=a||(this._time.splice(0,a),this._state.splice(0,a*this.dimension),this._velocity.splice(0,a*this.dimension))};a.curve=function(a){var b=this._time,h=b.length,k=f.le(b,a),d=this._scratch[0],g=this._state,c=this._velocity,v=this.dimension,t=this.bounds;if(0>k){var y=v-1;for(b=0;b<v;++b,--y)d[b]=g[y]}else if(k>=
h-1)for(y=g.length-1,a-=b[h-1],b=0;b<v;++b,--y)d[b]=g[y]+a*c[y];else{y=v*(k+1)-1;h=b[k];k=b[k+1]-h||1;var B=this._scratch[1],D=this._scratch[2],l=this._scratch[3],A=this._scratch[4],p=!0;for(b=0;b<v;++b,--y)B[b]=g[y],l[b]=c[y]*k,D[b]=g[y+v],A[b]=c[y+v]*k,p=p&&B[b]===D[b]&&l[b]===A[b]&&0===l[b];if(p)for(b=0;b<v;++b)d[b]=B[b];else e(B,l,D,A,(a-h)/k,d)}g=t[0];t=t[1];for(b=0;b<v;++b)d[b]=m(g[b],t[b],d[b]);return d};a.dcurve=function(a){var b=this._time,h=b.length,k=f.le(b,a),d=this._scratch[0],g=this._state,
c=this._velocity,v=this.dimension;if(k>=h-1)for(h=g.length-1,b=0;b<v;++b,--h)d[b]=c[h];else{h=v*(k+1)-1;var t=b[k];k=b[k+1]-t||1;var m=this._scratch[1],B=this._scratch[2],D=this._scratch[3],l=this._scratch[4],A=!0;for(b=0;b<v;++b,--h)m[b]=g[h],D[b]=c[h]*k,B[b]=g[h+v],l[b]=c[h+v]*k,A=A&&m[b]===B[b]&&D[b]===l[b]&&0===D[b];if(A)for(b=0;b<v;++b)d[b]=0;else for(e.derivative(m,D,B,l,(a-t)/k,d),b=0;b<v;++b)d[b]/=k}return d};a.lastT=function(){var a=this._time;return a[a.length-1]};a.stable=function(){for(var a=
this._velocity,e=a.length,f=this.dimension-1;0<=f;--f)if(a[--e])return!1;return!0};a.jump=function(a){var b=this.lastT(),e=this.dimension;if(!(a<b||arguments.length!==e+1)){var f=this._state,d=this._velocity,g=f.length-this.dimension,c=this.bounds,h=c[0];c=c[1];this._time.push(b,a);for(b=0;2>b;++b)for(var k=0;k<e;++k)f.push(f[g++]),d.push(0);this._time.push(a);for(k=e;0<k;--k)f.push(m(h[k-1],c[k-1],arguments[k])),d.push(0)}};a.push=function(a){var b=this.lastT(),e=this.dimension;if(!(a<b||arguments.length!==
e+1)){var f=this._state,d=this._velocity,g=f.length-this.dimension,c=a-b,h=this.bounds;b=h[0];h=h[1];c=1E-6<c?1/c:0;for(this._time.push(a);0<e;--e){var k=m(b[e-1],h[e-1],arguments[e]);f.push(k);d.push((k-f[g++])*c)}}};a.set=function(a){var b=this.dimension;if(!(a<this.lastT()||arguments.length!==b+1)){var e=this._state,f=this._velocity,d=this.bounds,g=d[0];d=d[1];for(this._time.push(a);0<b;--b)e.push(m(g[b-1],d[b-1],arguments[b])),f.push(0)}};a.move=function(a){var b=this.lastT(),e=this.dimension;
if(!(a<=b||arguments.length!==e+1)){var f=this._state,d=this._velocity,g=f.length-this.dimension,c=this.bounds,h=c[0];c=c[1];b=a-b;b=1E-6<b?1/b:0;for(this._time.push(a);0<e;--e){var k=arguments[e];f.push(m(h[e-1],c[e-1],f[g++]+k));d.push(k*b)}}};a.idle=function(a){var b=this.lastT();if(!(a<b)){var e=this.dimension,f=this._state,d=this._velocity,g=f.length-e,c=this.bounds,h=c[0];c=c[1];b=a-b;this._time.push(a);for(a=e-1;0<=a;--a)f.push(m(h[a],c[a],f[g]+b*d[g])),d.push(0),g+=1}}},{"binary-search-bounds":81,
"cubic-hermite":135}],223:[function(a,p,l){var m=a("dtype");p.exports=function(a,h,e){if(!a)throw new TypeError("must specify data as first parameter");e=+(e||0)|0;if(Array.isArray(a)&&a[0]&&"number"===typeof a[0][0]){var f=a[0].length,b=a.length*f;h&&"string"!==typeof h||(h=new (m(h||"float32"))(b+e));var k=h.length-e;if(b!==k)throw Error("source length "+b+" ("+f+"x"+a.length+") does not match destination length "+k);for(b=0;b<a.length;b++)for(k=0;k<f;k++)h[e++]=null===a[b][k]?NaN:a[b][k]}else if(h&&
"string"!==typeof h)h.set(a,e);else if(f=m(h||"float32"),Array.isArray(a)||"array"===h)for(h=new f(a.length+e),b=0,f=h.length;e<f;e++,b++)h[e]=null===a[b]?NaN:a[b];else 0===e?h=new f(a):(h=new f(a.length+e),h.set(a,e));return h}},{dtype:160}],224:[function(a,p,l){var m=a("css-font/stringify"),k=[32,126];p.exports=function(a){a=a||{};var e=a.shape?a.shape:a.canvas?[a.canvas.width,a.canvas.height]:[512,512],f=a.canvas||document.createElement("canvas"),b=a.font,h="number"===typeof a.step?[a.step,a.step]:
a.step||[32,32];a=a.chars||k;b&&"string"!==typeof b&&(b=m(b));if(!Array.isArray(a))a=String(a).split("");else if(2===a.length&&"number"===typeof a[0]&&"number"===typeof a[1]){for(var u=[],r=a[0],d=0;r<=a[1];r++)u[d++]=String.fromCharCode(r);a=u}e=e.slice();f.width=e[0];f.height=e[1];u=f.getContext("2d");u.fillStyle="#000";u.fillRect(0,0,f.width,f.height);u.font=b;u.textAlign="center";u.textBaseline="middle";u.fillStyle="#fff";b=h[0]/2;d=h[1]/2;for(r=0;r<a.length;r++)u.fillText(a[r],b,d),(b+=h[0])>
e[0]-h[0]/2&&(b=h[0]/2,d+=h[1]);return f}},{"css-font/stringify":132}],225:[function(a,p,l){function m(a,b){b||(b={});if("string"===typeof a||Array.isArray(a))b.family=a;var f=Array.isArray(b.family)?b.family.join(", "):b.family;if(!f)throw Error("`family` must be defined");var u=b.size||b.fontSize||b.em||48;a=[b.style||b.fontStyle||"",b.weight||b.fontWeight||"",u].join(" ")+"px "+f;var r=b.origin||"top";if(m.cache[f]&&u<=m.cache[f].em)return k(m.cache[f],r);var d=b.canvas||m.canvas,g=d.getContext("2d"),
c=void 0!==b.upper?b.upper:"H",v=void 0!==b.lower?b.lower:"x",t=void 0!==b.descent?b.descent:"p",y=void 0!==b.ascent?b.ascent:"h",B=void 0!==b.tittle?b.tittle:"i";b=void 0!==b.overshoot?b.overshoot:"O";var D=Math.ceil(1.5*u);d.height=D;d.width=.5*D;g.font=a;a={top:0};g.clearRect(0,0,D,D);g.textBaseline="top";g.fillStyle="black";g.fillText("H",0,0);d=h(g.getImageData(0,0,D,D));g.clearRect(0,0,D,D);g.textBaseline="bottom";g.fillText("H",0,D);var l=h(g.getImageData(0,0,D,D));a.lineHeight=a.bottom=D-
l+d;g.clearRect(0,0,D,D);g.textBaseline="alphabetic";g.fillText("H",0,D);l=h(g.getImageData(0,0,D,D));l=D-l-1+d;a.baseline=a.alphabetic=l;g.clearRect(0,0,D,D);g.textBaseline="middle";g.fillText("H",0,.5*D);var A=h(g.getImageData(0,0,D,D));a.median=a.middle=D-A-1+d-.5*D;g.clearRect(0,0,D,D);g.textBaseline="hanging";g.fillText("H",0,.5*D);A=h(g.getImageData(0,0,D,D));a.hanging=D-A-1+d-.5*D;g.clearRect(0,0,D,D);g.textBaseline="ideographic";g.fillText("H",0,D);A=h(g.getImageData(0,0,D,D));a.ideographic=
D-A-1+d;c&&(g.clearRect(0,0,D,D),g.textBaseline="top",g.fillText(c,0,0),a.upper=h(g.getImageData(0,0,D,D)),a.capHeight=a.baseline-a.upper);v&&(g.clearRect(0,0,D,D),g.textBaseline="top",g.fillText(v,0,0),a.lower=h(g.getImageData(0,0,D,D)),a.xHeight=a.baseline-a.lower);B&&(g.clearRect(0,0,D,D),g.textBaseline="top",g.fillText(B,0,0),a.tittle=h(g.getImageData(0,0,D,D)));y&&(g.clearRect(0,0,D,D),g.textBaseline="top",g.fillText(y,0,0),a.ascent=h(g.getImageData(0,0,D,D)));t&&(g.clearRect(0,0,D,D),g.textBaseline=
"top",g.fillText(t,0,0),a.descent=e(g.getImageData(0,0,D,D)));b&&(g.clearRect(0,0,D,D),g.textBaseline="top",g.fillText(b,0,0),g=e(g.getImageData(0,0,D,D)),a.overshoot=g-l);for(var p in a)a[p]/=u;a.em=u;m.cache[f]=a;return k(a,r)}function k(a,b){var e={};"string"===typeof b&&(b=a[b]);for(var f in a)"em"!==f&&(e[f]=a[f]-b);return e}function h(a){var b=a.height;a=a.data;for(var e=3;e<a.length;e+=4)if(0!==a[e])return Math.floor(.25*(e-3)/b)}function e(a){var b=a.height;a=a.data;for(var e=a.length-1;0<
e;e-=4)if(0!==a[e])return Math.floor(.25*(e-3)/b)}p.exports=m;m.canvas=document.createElement("canvas");m.cache={}},{}],226:[function(a,p,l){function m(a,b,d,e,g,f){this._color=a;this.key=b;this.value=d;this.left=e;this.right=g;this._count=f}function k(a){return new m(a._color,a.key,a.value,a.left,a.right,a._count)}function h(a,b){return new m(a,b.key,b.value,b.left,b.right,b._count)}function e(a){a._count=1+(a.left?a.left._count:0)+(a.right?a.right._count:0)}function f(a,b){this._compare=a;this.root=
b}function b(a,d){if(d.left){var c=b(a,d.left);if(c)return c}if(c=a(d.key,d.value))return c;if(d.right)return b(a,d.right)}function n(a,b,d,e){if(0>=b(a,e.key)){if(e.left){var c=n(a,b,d,e.left);if(c)return c}if(c=d(e.key,e.value))return c}if(e.right)return n(a,b,d,e.right)}function u(a,b,d,e,g){var c=d(a,g.key),f=d(b,g.key);if(0>=c&&(g.left&&(c=u(a,b,d,e,g.left))||0<f&&(c=e(g.key,g.value))))return c;if(0<f&&g.right)return u(a,b,d,e,g.right)}function r(a,b){this.tree=a;this._stack=b}function d(a,b){a.key=
b.key;a.value=b.value;a.left=b.left;a.right=b.right;a._color=b._color;a._count=b._count}function g(a,b){return a<b?-1:a>b?1:0}p.exports=function(a){return new f(a||g,null)};a=f.prototype;Object.defineProperty(a,"keys",{get:function(){var a=[];this.forEach(function(b,c){a.push(b)});return a}});Object.defineProperty(a,"values",{get:function(){var a=[];this.forEach(function(b,c){a.push(c)});return a}});Object.defineProperty(a,"length",{get:function(){return this.root?this.root._count:0}});a.insert=function(a,
b){for(var c=this._compare,d=this.root,g=[],k=[];d;){var n=c(a,d.key);g.push(d);k.push(n);d=0>=n?d.left:d.right}g.push(new m(0,a,b,null,null,1));for(a=g.length-2;0<=a;--a)d=g[a],g[a]=0>=k[a]?new m(d._color,d.key,d.value,g[a+1],d.right,d._count+1):new m(d._color,d.key,d.value,d.left,g[a+1],d._count+1);for(a=g.length-1;1<a;--a){k=g[a-1];d=g[a];if(1===k._color||1===d._color)break;b=g[a-2];if(b.left===k)if(k.left===d)if((n=b.right)&&0===n._color)k._color=1,b.right=h(1,n),b._color=0,--a;else{b._color=
0;b.left=k.right;k._color=1;k.right=b;g[a-2]=k;g[a-1]=d;e(b);e(k);3<=a&&(a=g[a-3],a.left===b?a.left=k:a.right=k);break}else if((n=b.right)&&0===n._color)k._color=1,b.right=h(1,n),b._color=0,--a;else{k.right=d.left;b._color=0;b.left=d.right;d._color=1;d.left=k;d.right=b;g[a-2]=d;g[a-1]=k;e(b);e(k);e(d);3<=a&&(a=g[a-3],a.left===b?a.left=d:a.right=d);break}else if(k.right===d)if((n=b.left)&&0===n._color)k._color=1,b.left=h(1,n),b._color=0,--a;else{b._color=0;b.right=k.left;k._color=1;k.left=b;g[a-2]=
k;g[a-1]=d;e(b);e(k);3<=a&&(a=g[a-3],a.right===b?a.right=k:a.left=k);break}else if((n=b.left)&&0===n._color)k._color=1,b.left=h(1,n),b._color=0,--a;else{k.left=d.right;b._color=0;b.right=d.left;d._color=1;d.right=k;d.left=b;g[a-2]=d;g[a-1]=k;e(b);e(k);e(d);3<=a&&(a=g[a-3],a.right===b?a.right=d:a.left=d);break}}g[0]._color=1;return new f(c,g[0])};a.forEach=function(a,d,e){if(this.root)switch(arguments.length){case 1:return b(a,this.root);case 2:return n(d,this._compare,a,this.root);case 3:if(!(0<=
this._compare(d,e)))return u(d,e,this._compare,a,this.root)}};Object.defineProperty(a,"begin",{get:function(){for(var a=[],b=this.root;b;)a.push(b),b=b.left;return new r(this,a)}});Object.defineProperty(a,"end",{get:function(){for(var a=[],b=this.root;b;)a.push(b),b=b.right;return new r(this,a)}});a.at=function(a){if(0>a)return new r(this,[]);for(var b=this.root,c=[];;){c.push(b);if(b.left){if(a<b.left._count){b=b.left;continue}a-=b.left._count}if(!a)return new r(this,c);--a;if(b.right){if(a>=b.right._count)break;
b=b.right}else break}return new r(this,[])};a.ge=function(a){for(var b=this._compare,c=this.root,d=[],e=0;c;){var g=b(a,c.key);d.push(c);0>=g&&(e=d.length);c=0>=g?c.left:c.right}d.length=e;return new r(this,d)};a.gt=function(a){for(var b=this._compare,c=this.root,d=[],e=0;c;){var g=b(a,c.key);d.push(c);0>g&&(e=d.length);c=0>g?c.left:c.right}d.length=e;return new r(this,d)};a.lt=function(a){for(var b=this._compare,c=this.root,d=[],e=0;c;){var g=b(a,c.key);d.push(c);0<g&&(e=d.length);c=0>=g?c.left:
c.right}d.length=e;return new r(this,d)};a.le=function(a){for(var b=this._compare,c=this.root,d=[],e=0;c;){var g=b(a,c.key);d.push(c);0<=g&&(e=d.length);c=0>g?c.left:c.right}d.length=e;return new r(this,d)};a.find=function(a){for(var b=this._compare,c=this.root,d=[];c;){var e=b(a,c.key);d.push(c);if(0===e)return new r(this,d);c=0>=e?c.left:c.right}return new r(this,[])};a.remove=function(a){return(a=this.find(a))?a.remove():this};a.get=function(a){for(var b=this._compare,c=this.root;c;){var d=b(a,
c.key);if(0===d)return c.value;c=0>=d?c.left:c.right}};a=r.prototype;Object.defineProperty(a,"valid",{get:function(){return 0<this._stack.length}});Object.defineProperty(a,"node",{get:function(){return 0<this._stack.length?this._stack[this._stack.length-1]:null},enumerable:!0});a.clone=function(){return new r(this.tree,this._stack.slice())};a.remove=function(){var a=this._stack;if(0===a.length)return this.tree;var b=Array(a.length),g=a[a.length-1];b[b.length-1]=new m(g._color,g.key,g.value,g.left,
g.right,g._count);for(var n=a.length-2;0<=n;--n)g=a[n],b[n]=g.left===a[n+1]?new m(g._color,g.key,g.value,b[n+1],g.right,g._count):new m(g._color,g.key,g.value,g.left,b[n+1],g._count);g=b[b.length-1];if(g.left&&g.right){a=b.length;for(g=g.left;g.right;)b.push(g),g=g.right;n=b[a-1];b.push(new m(g._color,n.key,n.value,g.left,g.right,g._count));b[a-1].key=g.key;b[a-1].value=g.value;for(n=b.length-2;n>=a;--n)g=b[n],b[n]=new m(g._color,g.key,g.value,g.left,b[n+1],g._count);b[a-1].left=b[a]}g=b[b.length-
1];if(0===g._color)for(n=b[b.length-2],n.left===g?n.left=null:n.right===g&&(n.right=null),b.pop(),n=0;n<b.length;++n)b[n]._count--;else if(g.left||g.right)for(g.left?d(g,g.left):g.right&&d(g,g.right),g._color=1,n=0;n<b.length-1;++n)b[n]._count--;else{if(1===b.length)return new f(this.tree._compare,null);for(n=0;n<b.length;++n)b[n]._count--;n=b[b.length-2];for(var r,u,l,A=b.length-1;0<=A;--A){a=b[A];if(0===A){a._color=1;break}r=b[A-1];if(r.left===a){u=r.right;if(u.right&&0===u.right._color){u=r.right=
k(u);l=u.right=k(u.right);r.right=u.left;u.left=r;u.right=l;u._color=r._color;a._color=1;r._color=1;l._color=1;e(r);e(u);if(1<A){var p=b[A-2];p.left===r?p.left=u:p.right=u}b[A-1]=u;break}else if(u.left&&0===u.left._color){u=r.right=k(u);l=u.left=k(u.left);r.right=l.left;u.left=l.right;l.left=r;l.right=u;l._color=r._color;r._color=1;u._color=1;a._color=1;e(r);e(u);e(l);1<A&&(p=b[A-2],p.left===r?p.left=l:p.right=l);b[A-1]=l;break}if(1===u._color)if(0===r._color){r._color=1;r.right=h(0,u);break}else r.right=
h(0,u);else u=k(u),r.right=u.left,u.left=r,u._color=r._color,r._color=0,e(r),e(u),1<A&&(p=b[A-2],p.left===r?p.left=u:p.right=u),b[A-1]=u,b[A]=r,A+1<b.length?b[A+1]=a:b.push(a),A+=2}else{u=r.left;if(u.left&&0===u.left._color){u=r.left=k(u);l=u.left=k(u.left);r.left=u.right;u.right=r;u.left=l;u._color=r._color;a._color=1;r._color=1;l._color=1;e(r);e(u);1<A&&(p=b[A-2],p.right===r?p.right=u:p.left=u);b[A-1]=u;break}else if(u.right&&0===u.right._color){u=r.left=k(u);l=u.right=k(u.right);r.left=l.right;
u.right=l.left;l.right=r;l.left=u;l._color=r._color;r._color=1;u._color=1;a._color=1;e(r);e(u);e(l);1<A&&(p=b[A-2],p.right===r?p.right=l:p.left=l);b[A-1]=l;break}if(1===u._color)if(0===r._color){r._color=1;r.left=h(0,u);break}else r.left=h(0,u);else u=k(u),r.left=u.right,u.right=r,u._color=r._color,r._color=0,e(r),e(u),1<A&&(p=b[A-2],p.right===r?p.right=u:p.left=u),b[A-1]=u,b[A]=r,A+1<b.length?b[A+1]=a:b.push(a),A+=2}}n.left===g?n.left=null:n.right=null}return new f(this.tree._compare,b[0])};Object.defineProperty(a,
"key",{get:function(){if(0<this._stack.length)return this._stack[this._stack.length-1].key},enumerable:!0});Object.defineProperty(a,"value",{get:function(){if(0<this._stack.length)return this._stack[this._stack.length-1].value},enumerable:!0});Object.defineProperty(a,"index",{get:function(){var a=0,b=this._stack;if(0===b.length)return(a=this.tree.root)?a._count:0;b[b.length-1].left&&(a=b[b.length-1].left._count);for(var d=b.length-2;0<=d;--d)b[d+1]===b[d].right&&(++a,b[d].left&&(a+=b[d].left._count));
return a},enumerable:!0});a.next=function(){var a=this._stack;if(0!==a.length){var b=a[a.length-1];if(b.right)for(b=b.right;b;)a.push(b),b=b.left;else for(a.pop();0<a.length&&a[a.length-1].right===b;)b=a[a.length-1],a.pop()}};Object.defineProperty(a,"hasNext",{get:function(){var a=this._stack;if(0===a.length)return!1;if(a[a.length-1].right)return!0;for(var b=a.length-1;0<b;--b)if(a[b-1].left===a[b])return!0;return!1}});a.update=function(a){var b=this._stack;if(0===b.length)throw Error("Can't update empty node!");
var c=Array(b.length),d=b[b.length-1];c[c.length-1]=new m(d._color,d.key,a,d.left,d.right,d._count);for(a=b.length-2;0<=a;--a)d=b[a],c[a]=d.left===b[a+1]?new m(d._color,d.key,d.value,c[a+1],d.right,d._count):new m(d._color,d.key,d.value,d.left,c[a+1],d._count);return new f(this.tree._compare,c[0])};a.prev=function(){var a=this._stack;if(0!==a.length){var b=a[a.length-1];if(b.left)for(b=b.left;b;)a.push(b),b=b.right;else for(a.pop();0<a.length&&a[a.length-1].left===b;)b=a[a.length-1],a.pop()}};Object.defineProperty(a,
"hasPrev",{get:function(){var a=this._stack;if(0===a.length)return!1;if(a[a.length-1].left)return!0;for(var b=a.length-1;0<b;--b)if(a[b-1].right===a[b])return!0;return!1}})},{}],227:[function(a,p,l){function m(a){if(0>a)return Number("0/0");for(var e=h[0],b=h.length-1;0<b;--b)e+=h[b]/(a+b);b=a+4.7421875+.5;return.5*Math.log(2*Math.PI)+(a+.5)*Math.log(b)-b+Math.log(e)-Math.log(a)}var k=[.9999999999998099,676.5203681218851,-1259.1392167224028,771.3234287776531,-176.6150291621406,12.507343278686905,
-.13857109526572012,9.984369578019572E-6,1.5056327351493116E-7],h=[.9999999999999971,57.15623566586292,-59.59796035547549,14.136097974741746,-.4919138160976202,3.399464998481189E-5,4.652362892704858E-5,-9.837447530487956E-5,1.580887032249125E-4,-2.1026444172410488E-4,2.1743961811521265E-4,-1.643181065367639E-4,8.441822398385275E-5,-2.6190838401581408E-5,3.6899182659531625E-6];p.exports=function b(a){if(.5>a)return Math.PI/(Math.sin(Math.PI*a)*b(1-a));if(100<a)return Math.exp(m(a));--a;for(var f=k[0],
h=1;9>h;h++)f+=k[h]/(a+h);h=a+7+.5;return Math.sqrt(2*Math.PI)*Math.pow(h,a+.5)*Math.exp(-h)*f};p.exports.log=m},{}],228:[function(a,p,l){p.exports=function(a,k){if("string"!==typeof a)throw new TypeError("must specify type string");k=k||{};if("undefined"===typeof document&&!k.canvas)return null;var h=k.canvas||document.createElement("canvas");"number"===typeof k.width&&(h.width=k.width);"number"===typeof k.height&&(h.height=k.height);var e;try{var f=[a];0===a.indexOf("webgl")&&f.push("experimental-"+
a);for(a=0;a<f.length;a++)if(e=h.getContext(f[a],k))return e}catch(b){e=null}return e||null}},{}],229:[function(a,p,l){function m(a,b){a[0]=b[0];a[1]=b[1];a[2]=b[2];return a}function k(a){this.gl=a;this.pixelRatio=1;this.bounds=[[-10,-10,-10],[10,10,10]];this.ticks=[[],[],[]];this.autoTicks=!0;this.tickSpacing=[1,1,1];this.tickEnable=[!0,!0,!0];this.tickFont=["sans-serif","sans-serif","sans-serif"];this.tickSize=[12,12,12];this.tickAngle=[0,0,0];this.tickAlign=["auto","auto","auto"];this.tickColor=
[[0,0,0,1],[0,0,0,1],[0,0,0,1]];this.tickPad=[10,10,10];this.lastCubeProps={cubeEdges:[0,0,0],axis:[0,0,0]};this.labels=["x","y","z"];this.labelEnable=[!0,!0,!0];this.labelFont="sans-serif";this.labelSize=[20,20,20];this.labelAngle=[0,0,0];this.labelAlign=["auto","auto","auto"];this.labelColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1]];this.labelPad=[10,10,10];this.lineEnable=[!0,!0,!0];this.lineMirror=[!1,!1,!1];this.lineWidth=[1,1,1];this.lineColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1]];this.lineTickEnable=[!0,!0,
!0];this.lineTickMirror=[!1,!1,!1];this.lineTickLength=[0,0,0];this.lineTickWidth=[1,1,1];this.lineTickColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1]];this.gridEnable=[!0,!0,!0];this.gridWidth=[1,1,1];this.gridColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1]];this.zeroEnable=[!0,!0,!0];this.zeroLineColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1]];this.zeroLineWidth=[2,2,2];this.backgroundEnable=[!1,!1,!1];this.backgroundColor=[[.8,.8,.8,.5],[.8,.8,.8,.5],[.8,.8,.8,.5]];this._firstInit=!0;this._lines=this._text=null;this._background=
n(a)}function h(){this.primalOffset=[0,0,0];this.primalMinor=[0,0,0];this.mirrorOffset=[0,0,0];this.mirrorMinor=[0,0,0]}function e(a,b,c,d,e){var g=a.primalOffset,f=a.primalMinor,h=a.mirrorOffset;a=a.mirrorMinor;d=d[b];for(var k=0;3>k;++k)if(b!==k){var n=g,t=h,v=f,m=a;d&1<<k&&(n=h,t=g,v=a,m=f);n[k]=c[0][k];t[k]=c[1][k];0<e[k]?(v[k]=-1,m[k]=0):(v[k]=0,m[k]=1)}}p.exports=function(a,b){a=new k(a);a.update(b);return a};var f=a("./lib/text.js"),b=a("./lib/lines.js"),n=a("./lib/background.js"),u=a("./lib/cube.js"),
r=a("./lib/ticks.js"),d=new Float32Array([1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]);a=k.prototype;a.update=function(a){function c(b,c,d){if(d in a){var e=a[d],g=this[d],f;(b?Array.isArray(e)&&Array.isArray(e[0]):Array.isArray(e))?this[d]=f=[c(e[0]),c(e[1]),c(e[2])]:this[d]=f=[c(e),c(e),c(e)];for(b=0;3>b;++b)if(f[b]!==g[b])return!0}return!1}a=a||{};var d=c.bind(this,!1,Number),e=c.bind(this,!1,Boolean),g=c.bind(this,!1,String),h=c.bind(this,!0,function(a){if(Array.isArray(a)){if(3===a.length)return[+a[0],
+a[1],+a[2],1];if(4===a.length)return[+a[0],+a[1],+a[2],+a[3]]}return[0,0,0,1]}),k=!1,n=!1;if("bounds"in a){var t=a.bounds,v=0;for(;2>v;++v)for(var m=0;3>m;++m)t[v][m]!==this.bounds[v][m]&&(n=!0),this.bounds[v][m]=t[v][m]}if("ticks"in a){var u=a.ticks;k=!0;this.autoTicks=!1;for(v=0;3>v;++v)this.tickSpacing[v]=0}else d("tickSpacing")&&(n=this.autoTicks=!0);this._firstInit&&("ticks"in a||"tickSpacing"in a||(this.autoTicks=!0),k=n=!0,this._firstInit=!1);n&&this.autoTicks&&(u=r.create(this.bounds,this.tickSpacing),
k=!0);if(k){for(v=0;3>v;++v)u[v].sort(function(a,b){return a.x-b.x});r.equal(u,this.ticks)?k=!1:this.ticks=u}e("tickEnable");g("tickFont")&&(k=!0);d("tickSize");d("tickAngle");d("tickPad");h("tickColor");u=g("labels");g("labelFont")&&(u=!0);e("labelEnable");d("labelSize");d("labelPad");h("labelColor");e("lineEnable");e("lineMirror");d("lineWidth");h("lineColor");e("lineTickEnable");e("lineTickMirror");d("lineTickLength");d("lineTickWidth");h("lineTickColor");e("gridEnable");d("gridWidth");h("gridColor");
e("zeroEnable");h("zeroLineColor");d("zeroLineWidth");e("backgroundEnable");h("backgroundColor");this._text?this._text&&(u||k)&&this._text.update(this.bounds,this.labels,this.labelFont,this.ticks,this.tickFont):this._text=f(this.gl,this.bounds,this.labels,this.labelFont,this.ticks,this.tickFont);this._lines&&k&&(this._lines.dispose(),this._lines=null);this._lines||(this._lines=b(this.gl,this.bounds,this.ticks))};var g=[new h,new h,new h],c=[0,0,0],v={model:d,view:d,projection:d,_ortho:!1};a.isOpaque=
function(){return!0};a.isTransparent=function(){return!1};a.drawTransparent=function(a){};var t=[0,0,0],y=[0,0,0],B=[0,0,0];a.draw=function(a){function b(a){L=[0,0,0];L[a]=1}function f(a,c,d){var e=(a+1)%3;a=(a+2)%3;var g=c[e];c=c[a];var f=d[e];d=d[a];0<g&&0<d?b(e):0<g&&0>d?b(e):0>g&&0<d?b(e):0>g&&0>d?b(e):0<c&&0<f?b(a):0<c&&0>f?b(a):0>c&&0<f?b(a):0>c&&0>f&&b(a)}a=a||v;var h=this.gl,k=a.model||d,n=a.view||d,r=a.projection||d,D=this.bounds;a=a._ortho||!1;var l=u(k,n,r,D,a),p=l.cubeEdges;l=l.axis;a=
(a?2:1)*this.pixelRatio*(r[3]*n[12]+r[7]*n[13]+r[11]*n[14]+r[15]*n[15])/h.drawingBufferHeight;for(h=0;3>h;++h)this.lastCubeProps.cubeEdges[h]=p[h],this.lastCubeProps.axis[h]=l[h];for(h=0;3>h;++h)e(g[h],h,this.bounds,p,l);h=this.gl;for(h=0;3>h;++h)c[h]=this.backgroundEnable[h]?l[h]:0;this._background.draw(k,n,r,D,c,this.backgroundColor);this._lines.bind(k,n,r,this);for(h=0;3>h;++h){var q=[0,0,0];q[h]=0<l[h]?D[1][h]:D[0][h];for(p=0;2>p;++p){var Q=(h+1+p)%3,N=(h+1+(p^1))%3;this.gridEnable[Q]&&this._lines.drawGrid(Q,
N,this.bounds,q,this.gridColor[Q],this.gridWidth[Q]*this.pixelRatio)}for(p=0;2>p;++p)Q=(h+1+p)%3,N=(h+1+(p^1))%3,this.zeroEnable[N]&&0>=Math.min(D[0][N],D[1][N])&&0<=Math.max(D[0][N],D[1][N])&&this._lines.drawZero(Q,N,this.bounds,q,this.zeroLineColor[N],this.zeroLineWidth[N]*this.pixelRatio)}for(h=0;3>h;++h){this.lineEnable[h]&&this._lines.drawAxisLine(h,this.bounds,g[h].primalOffset,this.lineColor[h],this.lineWidth[h]*this.pixelRatio);this.lineMirror[h]&&this._lines.drawAxisLine(h,this.bounds,g[h].mirrorOffset,
this.lineColor[h],this.lineWidth[h]*this.pixelRatio);l=m(t,g[h].primalMinor);q=m(y,g[h].mirrorMinor);Q=this.lineTickLength;for(p=0;3>p;++p)N=a/k[5*p],l[p]=l[p]*Q[p]*N,q[p]=q[p]*Q[p]*N;this.lineTickEnable[h]&&this._lines.drawAxisTicks(h,g[h].primalOffset,l,this.lineTickColor[h],this.lineTickWidth[h]*this.pixelRatio);this.lineTickMirror[h]&&this._lines.drawAxisTicks(h,g[h].mirrorOffset,q,this.lineTickColor[h],this.lineTickWidth[h]*this.pixelRatio)}this._lines.unbind();this._text.bind(k,n,r,this.pixelRatio);
for(h=0;3>h;++h){n=g[h].primalMinor;r=g[h].mirrorMinor;l=m(B,g[h].primalOffset);for(p=0;3>p;++p)this.lineTickEnable[h]&&(l[p]+=a*n[p]*Math.max(this.lineTickLength[p],0)/k[5*p]);q=[0,0,0];q[h]=1;if(this.tickEnable[h]){-3600===this.tickAngle[h]?(this.tickAngle[h]=0,this.tickAlign[h]="auto"):this.tickAlign[h]=-1;p=1;Q=[this.tickAlign[h],.5,p];Q[0]="auto"===Q[0]?0:parseInt(""+Q[0]);var L=[0,0,0];f(h,n,r);for(p=0;3>p;++p)l[p]+=a*n[p]*this.tickPad[p]/k[5*p];this._text.drawTicks(h,this.tickSize[h],this.tickAngle[h],
l,this.tickColor[h],q,L,Q)}if(this.labelEnable[h]){p=0;L=[0,0,0];4<this.labels[h].length&&(b(h),p=1);Q=[this.labelAlign[h],.5,p];Q[0]="auto"===Q[0]?0:parseInt(""+Q[0]);for(p=0;3>p;++p)l[p]+=a*n[p]*this.labelPad[p]/k[5*p];l[h]+=.5*(D[0][h]+D[1][h]);this._text.drawLabel(h,this.labelSize[h],this.labelAngle[h],l,this.labelColor[h],[0,0,0],L,Q)}}this._text.unbind()};a.dispose=function(){this._text.dispose();this._lines.dispose();this._background.dispose();this.gl=this._background=this._text=this._lines=
null}},{"./lib/background.js":230,"./lib/cube.js":231,"./lib/lines.js":232,"./lib/text.js":234,"./lib/ticks.js":235}],230:[function(a,p,l){function m(a,b,e,h){this.gl=a;this.buffer=b;this.vao=e;this.shader=h}p.exports=function(a){for(var b=[],f=[],u=0,r=0;3>r;++r)for(var d=(r+1)%3,g=(r+2)%3,c=[0,0,0],v=[0,0,0],t=-1;1>=t;t+=2){f.push(u,u+2,u+1,u+1,u+2,u+3);c[r]=t;v[r]=t;for(var y=-1;1>=y;y+=2){c[d]=y;for(var B=-1;1>=B;B+=2)c[g]=B,b.push(c[0],c[1],c[2],v[0],v[1],v[2]),u+=1}y=d;d=g;g=y}b=k(a,new Float32Array(b));
f=k(a,new Uint16Array(f),a.ELEMENT_ARRAY_BUFFER);f=h(a,[{buffer:b,type:a.FLOAT,size:3,offset:0,stride:24},{buffer:b,type:a.FLOAT,size:3,offset:12,stride:24}],f);u=e(a);u.attributes.position.location=0;u.attributes.normal.location=1;return new m(a,b,f,u)};var k=a("gl-buffer"),h=a("gl-vao"),e=a("./shaders").bg;a=m.prototype;a.draw=function(a,b,e,h,k,d){for(var g=!1,c=0;3>c;++c)g=g||k[c];g&&(g=this.gl,g.enable(g.POLYGON_OFFSET_FILL),g.polygonOffset(1,2),this.shader.bind(),this.shader.uniforms={model:a,
view:b,projection:e,bounds:h,enable:k,colors:d},this.vao.bind(),this.vao.draw(this.gl.TRIANGLES,36),this.vao.unbind(),g.disable(g.POLYGON_OFFSET_FILL))};a.dispose=function(){this.vao.dispose();this.buffer.dispose();this.shader.dispose()}},{"./shaders":233,"gl-buffer":237,"gl-vao":319}],231:[function(a,p,l){p.exports=function(a,y,B,D,l){k(f,y,a);k(f,B,f);for(a=y=0;2>a;++a)for(u[2]=D[a][2],B=0;2>B;++B){u[1]=D[B][1];for(var t=0;2>t;++t){u[0]=D[t][0];for(var p=b[y],q=u,G=f,E=0;4>E;++E){p[E]=G[12+E];for(var H=
0;3>H;++H)p[E]+=q[H]*G[4*H+E]}y+=1}}D=-1;for(a=0;8>a;++a){y=b[a][3];for(B=0;3>B;++B)n[a][B]=b[a][B]/y;l&&(n[a][2]*=-1);0>y&&(0>D?D=a:n[a][2]<n[D][2]&&(D=a))}if(0>D)for(a=D=0;3>a;++a){y=(a+2)%3;l=(a+1)%3;t=B=-1;for(p=0;2>p;++p)q=p<<a,G=q+(p<<y)+(1-p<<l),E=q+(1-p<<y)+(p<<l),0>e(n[q],n[G],n[E],r)||(p?B=1:t=1);if(!(0>B||0>t))for(p=0;2>p;++p){q=p<<a;G=q+(p<<y)+(1-p<<l);E=q+(1-p<<y)+(p<<l);a:{q=[b[q],b[G],b[E],b[q+(1<<y)+(1<<l)]];for(E=0;E<d.length;++E)if(q=h.positive(q,d[E]),3>q.length){q=0;break a}E=
q[0];G=E[0]/E[3];H=E[1]/E[3];var M=0;for(E=1;E+1<q.length;++E){var O=q[E],I=q[E+1];M+=Math.abs((O[0]/O[3]-G)*(I[1]/I[3]-H)-(O[1]/O[3]-H)*(I[0]/I[3]-G))}q=M}p?B=q:t=q}t>B&&(D|=1<<a)}y=7^D;p=-1;for(a=0;8>a;++a)a!==D&&a!==y&&(0>p?p=a:n[p][1]>n[a][1]&&(p=a));B=-1;for(a=0;3>a;++a)q=p^1<<a,q!==D&&q!==y&&(0>B&&(B=q),l=n[q],l[0]<n[B][0]&&(B=q));t=-1;for(a=0;3>a;++a)q=p^1<<a,q!==D&&q!==y&&q!==B&&(0>t&&(t=q),l=n[q],l[0]>n[t][0]&&(t=q));l=g;l[0]=l[1]=l[2]=0;l[m.log2(B^p)]=p&B;l[m.log2(p^t)]=p&t;a=t^7;a===D||
a===y?(a=B^7,l[m.log2(t^a)]=a&t):l[m.log2(B^a)]=a&B;l=c;for(a=0;3>a;++a)l[a]=D&1<<a?-1:1;return v};var m=a("bit-twiddle"),k=a("gl-mat4/multiply"),h=a("split-polygon"),e=a("robust-orientation"),f=Array(16),b=Array(8),n=Array(8),u=Array(3),r=[0,0,0];(function(){for(var a=0;8>a;++a)b[a]=[1,1,1,1],n[a]=[1,1,1]})();var d=[[0,0,1,0,0],[0,0,-1,1,0],[0,-1,0,1,0],[0,1,0,1,0],[-1,0,0,1,0],[1,0,0,1,0]],g=[1,1,1],c=[0,0,0],v={cubeEdges:g,axis:c}},{"bit-twiddle":82,"gl-mat4/multiply":263,"robust-orientation":494,
"split-polygon":511}],232:[function(a,p,l){function m(a){a[0]=a[1]=a[2]=0;return a}function k(a,b){a[0]=b[0];a[1]=b[1];a[2]=b[2];return a}function h(a,b,d,e,g,f,h,k){this.gl=a;this.vertBuffer=b;this.vao=d;this.shader=e;this.tickCount=g;this.tickOffset=f;this.gridCount=h;this.gridOffset=k}p.exports=function(a,d,g){var c=[];d=[0,0,0];var k=[0,0,0],n=[0,0,0],t=[0,0,0];c.push(0,0,1,0,1,1,0,0,-1,0,0,-1,0,1,1,0,1,-1);for(var v=0;3>v;++v){for(var m=c.length/3|0,r=0;r<g[v].length;++r){var u=+g[v][r].x;c.push(u,
0,1,u,1,1,u,0,-1,u,0,-1,u,1,1,u,1,-1)}u=c.length/3|0;d[v]=m;k[v]=u-m;m=c.length/3|0;for(r=0;r<g[v].length;++r)u=+g[v][r].x,c.push(u,0,1,u,1,1,u,0,-1,u,0,-1,u,1,1,u,1,-1);u=c.length/3|0;n[v]=m;t[v]=u-m}g=e(a,new Float32Array(c));c=f(a,[{buffer:g,type:a.FLOAT,size:3,stride:0,offset:0}]);v=b(a);v.attributes.position.location=0;return new h(a,g,c,v,k,d,t,n)};var e=a("gl-buffer"),f=a("gl-vao"),b=a("./shaders").line,n=[0,0,0],u=[0,0,0],r=[0,0,0],d=[0,0,0],g=[1,1];a=h.prototype;a.bind=function(a,b,d){this.shader.bind();
this.shader.uniforms.model=a;this.shader.uniforms.view=b;this.shader.uniforms.projection=d;g[0]=this.gl.drawingBufferWidth;g[1]=this.gl.drawingBufferHeight;this.shader.uniforms.screenShape=g;this.vao.bind()};a.unbind=function(){this.vao.unbind()};a.drawAxisLine=function(a,b,e,g,f){var c=m(u);this.shader.uniforms.majorAxis=u;c[a]=b[1][a]-b[0][a];this.shader.uniforms.minorAxis=c;e=k(d,e);e[a]+=b[0][a];this.shader.uniforms.offset=e;this.shader.uniforms.lineWidth=f;this.shader.uniforms.color=g;b=m(r);
b[(a+2)%3]=1;this.shader.uniforms.screenAxis=b;this.vao.draw(this.gl.TRIANGLES,6);b=m(r);b[(a+1)%3]=1;this.shader.uniforms.screenAxis=b;this.vao.draw(this.gl.TRIANGLES,6)};a.drawAxisTicks=function(a,b,d,e,g){if(this.tickCount[a]){var c=m(n);c[a]=1;this.shader.uniforms.majorAxis=c;this.shader.uniforms.offset=b;this.shader.uniforms.minorAxis=d;this.shader.uniforms.color=e;this.shader.uniforms.lineWidth=g;b=m(r);b[a]=1;this.shader.uniforms.screenAxis=b;this.vao.draw(this.gl.TRIANGLES,this.tickCount[a],
this.tickOffset[a])}};a.drawGrid=function(a,b,e,g,f,h){if(this.gridCount[a]){var c=m(u);c[b]=e[1][b]-e[0][b];this.shader.uniforms.minorAxis=c;g=k(d,g);g[b]+=e[0][b];this.shader.uniforms.offset=g;b=m(n);b[a]=1;this.shader.uniforms.majorAxis=b;b=m(r);b[a]=1;this.shader.uniforms.screenAxis=b;this.shader.uniforms.lineWidth=h;this.shader.uniforms.color=f;this.vao.draw(this.gl.TRIANGLES,this.gridCount[a],this.gridOffset[a])}};a.drawZero=function(a,b,e,g,f,h){var c=m(u);this.shader.uniforms.majorAxis=c;
c[a]=e[1][a]-e[0][a];this.shader.uniforms.minorAxis=c;g=k(d,g);g[a]+=e[0][a];this.shader.uniforms.offset=g;a=m(r);a[b]=1;this.shader.uniforms.screenAxis=a;this.shader.uniforms.lineWidth=h;this.shader.uniforms.color=f;this.vao.draw(this.gl.TRIANGLES,6)};a.dispose=function(){this.vao.dispose();this.vertBuffer.dispose();this.shader.dispose()}},{"./shaders":233,"gl-buffer":237,"gl-vao":319}],233:[function(a,p,l){p=a("glslify");var m=a("gl-shader"),k=p(["precision highp float;\n#define GLSLIFY 1\n\nattribute vec3 position;\n\nuniform mat4 model, view, projection;\nuniform vec3 offset, majorAxis, minorAxis, screenAxis;\nuniform float lineWidth;\nuniform vec2 screenShape;\n\nvec3 project(vec3 p) {\n  vec4 pp \x3d projection * view * model * vec4(p, 1.0);\n  return pp.xyz / max(pp.w, 0.0001);\n}\n\nvoid main() {\n  vec3 major \x3d position.x * majorAxis;\n  vec3 minor \x3d position.y * minorAxis;\n\n  vec3 vPosition \x3d major + minor + offset;\n  vec3 pPosition \x3d project(vPosition);\n  vec3 offset \x3d project(vPosition + screenAxis * position.z);\n\n  vec2 screen \x3d normalize((offset - pPosition).xy * screenShape) / screenShape;\n\n  gl_Position \x3d vec4(pPosition + vec3(0.5 * screen * lineWidth, 0), 1.0);\n}\n"]),
h=p(["precision highp float;\n#define GLSLIFY 1\n\nuniform vec4 color;\nvoid main() {\n  gl_FragColor \x3d color;\n}"]);l.line=function(a){return m(a,k,h,null,[{name:"position",type:"vec3"}])};var e=p(["precision highp float;\n#define GLSLIFY 1\n\nattribute vec3 position;\n\nuniform mat4 model, view, projection;\nuniform vec3 offset, axis, alignDir, alignOpt;\nuniform float scale, angle, pixelScale;\nuniform vec2 resolution;\n\nvec3 project(vec3 p) {\n  vec4 pp \x3d projection * view * model * vec4(p, 1.0);\n  return pp.xyz / max(pp.w, 0.0001);\n}\n\nfloat computeViewAngle(vec3 a, vec3 b) {\n  vec3 A \x3d project(a);\n  vec3 B \x3d project(b);\n\n  return atan(\n    (B.y - A.y) * resolution.y,\n    (B.x - A.x) * resolution.x\n  );\n}\n\nconst float PI \x3d 3.141592;\nconst float TWO_PI \x3d 2.0 * PI;\nconst float HALF_PI \x3d 0.5 * PI;\nconst float ONE_AND_HALF_PI \x3d 1.5 * PI;\n\nint option \x3d int(floor(alignOpt.x + 0.001));\nfloat hv_ratio \x3d       alignOpt.y;\nbool enableAlign \x3d    (alignOpt.z !\x3d 0.0);\n\nfloat mod_angle(float a) {\n  return mod(a, PI);\n}\n\nfloat positive_angle(float a) {\n  return mod_angle((a \x3c 0.0) ?\n    a + TWO_PI :\n    a\n  );\n}\n\nfloat look_upwards(float a) {\n  float b \x3d positive_angle(a);\n  return ((b \x3e HALF_PI) \x26\x26 (b \x3c\x3d ONE_AND_HALF_PI)) ?\n    b - PI :\n    b;\n}\n\nfloat look_horizontal_or_vertical(float a, float ratio) {\n  // ratio controls the ratio between being horizontal to (vertical + horizontal)\n  // if ratio is set to 0.5 then it is 50%, 50%.\n  // when using a higher ratio e.g. 0.75 the result would\n  // likely be more horizontal than vertical.\n\n  float b \x3d positive_angle(a);\n\n  return\n    (b \x3c (      ratio) * HALF_PI) ? 0.0 :\n    (b \x3c (2.0 - ratio) * HALF_PI) ? -HALF_PI :\n    (b \x3c (2.0 + ratio) * HALF_PI) ? 0.0 :\n    (b \x3c (4.0 - ratio) * HALF_PI) ? HALF_PI :\n                                    0.0;\n}\n\nfloat roundTo(float a, float b) {\n  return float(b * floor((a + 0.5 * b) / b));\n}\n\nfloat look_round_n_directions(float a, int n) {\n  float b \x3d positive_angle(a);\n  float div \x3d TWO_PI / float(n);\n  float c \x3d roundTo(b, div);\n  return look_upwards(c);\n}\n\nfloat applyAlignOption(float rawAngle, float delta) {\n  return\n    (option \x3e  2) ? look_round_n_directions(rawAngle + delta, option) :       // option 3-n: round to n directions\n    (option \x3d\x3d 2) ? look_horizontal_or_vertical(rawAngle + delta, hv_ratio) : // horizontal or vertical\n    (option \x3d\x3d 1) ? rawAngle + delta :       // use free angle, and flip to align with one direction of the axis\n    (option \x3d\x3d 0) ? look_upwards(rawAngle) : // use free angle, and stay upwards\n    (option \x3d\x3d-1) ? 0.0 :                    // useful for backward compatibility, all texts remains horizontal\n                    rawAngle;                // otherwise return back raw input angle\n}\n\nbool isAxisTitle \x3d (axis.x \x3d\x3d 0.0) \x26\x26\n                   (axis.y \x3d\x3d 0.0) \x26\x26\n                   (axis.z \x3d\x3d 0.0);\n\nvoid main() {\n  //Compute world offset\n  float axisDistance \x3d position.z;\n  vec3 dataPosition \x3d axisDistance * axis + offset;\n\n  float beta \x3d angle; // i.e. user defined attributes for each tick\n\n  float axisAngle;\n  float clipAngle;\n  float flip;\n\n  if (enableAlign) {\n    axisAngle \x3d (isAxisTitle) ? HALF_PI :\n                      computeViewAngle(dataPosition, dataPosition + axis);\n    clipAngle \x3d computeViewAngle(dataPosition, dataPosition + alignDir);\n\n    axisAngle +\x3d (sin(axisAngle) \x3c 0.0) ? PI : 0.0;\n    clipAngle +\x3d (sin(clipAngle) \x3c 0.0) ? PI : 0.0;\n\n    flip \x3d (dot(vec2(cos(axisAngle), sin(axisAngle)),\n                vec2(sin(clipAngle),-cos(clipAngle))) \x3e 0.0) ? 1.0 : 0.0;\n\n    beta +\x3d applyAlignOption(clipAngle, flip * PI);\n  }\n\n  //Compute plane offset\n  vec2 planeCoord \x3d position.xy * pixelScale;\n\n  mat2 planeXform \x3d scale * mat2(\n     cos(beta), sin(beta),\n    -sin(beta), cos(beta)\n  );\n\n  vec2 viewOffset \x3d 2.0 * planeXform * planeCoord / resolution;\n\n  //Compute clip position\n  vec3 clipPosition \x3d project(dataPosition);\n\n  //Apply text offset in clip coordinates\n  clipPosition +\x3d vec3(viewOffset, 0.0);\n\n  //Done\n  gl_Position \x3d vec4(clipPosition, 1.0);\n}"]),
f=p(["precision highp float;\n#define GLSLIFY 1\n\nuniform vec4 color;\nvoid main() {\n  gl_FragColor \x3d color;\n}"]);l.text=function(a){return m(a,e,f,null,[{name:"position",type:"vec3"}])};var b=p(["precision highp float;\n#define GLSLIFY 1\n\nattribute vec3 position;\nattribute vec3 normal;\n\nuniform mat4 model, view, projection;\nuniform vec3 enable;\nuniform vec3 bounds[2];\n\nvarying vec3 colorChannel;\n\nvoid main() {\n\n  vec3 signAxis \x3d sign(bounds[1] - bounds[0]);\n\n  vec3 realNormal \x3d signAxis * normal;\n\n  if(dot(realNormal, enable) \x3e 0.0) {\n    vec3 minRange \x3d min(bounds[0], bounds[1]);\n    vec3 maxRange \x3d max(bounds[0], bounds[1]);\n    vec3 nPosition \x3d mix(minRange, maxRange, 0.5 * (position + 1.0));\n    gl_Position \x3d projection * view * model * vec4(nPosition, 1.0);\n  } else {\n    gl_Position \x3d vec4(0,0,0,0);\n  }\n\n  colorChannel \x3d abs(realNormal);\n}"]),
n=p(["precision highp float;\n#define GLSLIFY 1\n\nuniform vec4 colors[3];\n\nvarying vec3 colorChannel;\n\nvoid main() {\n  gl_FragColor \x3d colorChannel.x * colors[0] +\n                 colorChannel.y * colors[1] +\n                 colorChannel.z * colors[2];\n}"]);l.bg=function(a){return m(a,b,n,null,[{name:"position",type:"vec3"},{name:"normal",type:"vec3"}])}},{"gl-shader":297,glslify:401}],234:[function(a,p,l){(function(m){function k(a,b,e,c){this.gl=a;this.shader=b;this.buffer=e;this.vao=
c;this.tickOffset=this.tickCount=this.labelOffset=this.labelCount=null}p.exports=function(a,d,g,c,f,n){var t=h(a),v=e(a,[{buffer:t,size:3}]),m=b(a);m.attributes.position.location=0;a=new k(a,m,t,v);a.update(d,g,c,f,n);return a};var h=a("gl-buffer"),e=a("gl-vao"),f=a("vectorize-text"),b=a("./shaders").text;m=window||m.global||{};var n=m.__TEXT_CACHE||{};m.__TEXT_CACHE={};m=k.prototype;var u=[0,0];m.bind=function(a,b,e,c){this.vao.bind();this.shader.bind();var d=this.shader.uniforms;d.model=a;d.view=
b;d.projection=e;d.pixelScale=c;u[0]=this.gl.drawingBufferWidth;u[1]=this.gl.drawingBufferHeight;this.shader.uniforms.resolution=u};m.unbind=function(){this.vao.unbind()};m.update=function(a,b,e,c,h){function d(a,b,c,d,e,h){var k=n[c];k||(k=n[c]={});var t=k[b];if(!t){t=k;c={triangles:!0,font:c,textAlign:"center",textBaseline:"middle",lineSpacing:e,styletags:h};try{var m=f(b,c)}catch(ca){console.warn('error vectorizing text:"'+b+'" error:',ca),m={cells:[],positions:[]}}t=t[b]=m}b=(d||12)/12;d=t.positions;
t=t.cells;m=0;for(c=t.length;m<c;++m)for(e=t[m],h=2;0<=h;--h)k=d[e[h]],g.push(b*k[0],-b*k[1],a)}for(var g=[],k=[0,0,0],m=[0,0,0],v=[0,0,0],r=[0,0,0],u={breaklines:!0,bolds:!0,italics:!0,subscripts:!0,superscripts:!0},l=0;3>l;++l){v[l]=g.length/3|0;d(.5*(a[0][l]+a[1][l]),b[l],e[l],12,1.25,u);r[l]=(g.length/3|0)-v[l];k[l]=g.length/3|0;for(var p=0;p<c[l].length;++p)c[l][p].text&&d(c[l][p].x,c[l][p].text,c[l][p].font||h,c[l][p].fontSize||12,1.25,u);m[l]=(g.length/3|0)-k[l]}this.buffer.update(g);this.tickOffset=
k;this.tickCount=m;this.labelOffset=v;this.labelCount=r};m.drawTicks=function(a,b,e,c,f,h,k,n){this.tickCount[a]&&(this.shader.uniforms.axis=h,this.shader.uniforms.color=f,this.shader.uniforms.angle=e,this.shader.uniforms.scale=b,this.shader.uniforms.offset=c,this.shader.uniforms.alignDir=k,this.shader.uniforms.alignOpt=n,this.vao.draw(this.gl.TRIANGLES,this.tickCount[a],this.tickOffset[a]))};m.drawLabel=function(a,b,e,c,f,h,k,n){this.labelCount[a]&&(this.shader.uniforms.axis=h,this.shader.uniforms.color=
f,this.shader.uniforms.angle=e,this.shader.uniforms.scale=b,this.shader.uniforms.offset=c,this.shader.uniforms.alignDir=k,this.shader.uniforms.alignOpt=n,this.vao.draw(this.gl.TRIANGLES,this.labelCount[a],this.labelOffset[a]))};m.dispose=function(){this.shader.dispose();this.vao.dispose();this.buffer.dispose()}}).call(this,a("_process"))},{"./shaders":233,_process:474,"gl-buffer":237,"gl-vao":319,"vectorize-text":534}],235:[function(a,p,l){function m(a,h){var e=a+"",f=e.indexOf("."),b=0;0<=f&&(b=
e.length-f-1);e=Math.pow(10,b);a=Math.round(a*h*e);h=a+"";if(0<=h.indexOf("e"))return h;h=a/e;e=a%e;0>a?(h=-Math.ceil(h)|0,e=-e|0):(h=Math.floor(h)|0,e|=0);h=""+h;0>a&&(h="-"+h);if(b){for(e=""+e;e.length<b;)e="0"+e;return h+"."+e}return h}l.create=function(a,h){for(var e=[],f=0;3>f;++f){for(var b=[],k=0;k*h[f]<=a[1][f];++k)b.push({x:k*h[f],text:m(h[f],k)});for(k=-1;k*h[f]>=a[0][f];--k)b.push({x:k*h[f],text:m(h[f],k)});e.push(b)}return e};l.equal=function(a,h){for(var e=0;3>e;++e){if(a[e].length!==
h[e].length)return!1;for(var f=0;f<a[e].length;++f){var b=a[e][f],k=h[e][f];if(b.x!==k.x||b.text!==k.text||b.font!==k.font||b.fontColor!==k.fontColor||b.fontSize!==k.fontSize||b.dx!==k.dx||b.dy!==k.dy)return!1}}return!0}},{}],236:[function(a,p,l){function m(a,b,c){this.lo=a;this.hi=b;this.pixelsPerDataUnit=c}p.exports=function(a,m,B,D,l){var t=m.model||u,y=m.view||u,p=m.projection||u;m=m._ortho||!1;a=a.bounds;l=l||e(t,y,p,a,m);l=l.axis;f(r,y,t);f(r,p,r);t=c;for(y=0;3>y;++y)t[y].lo=Infinity,t[y].hi=
-Infinity,t[y].pixelsPerDataUnit=Infinity;p=k(b(r,r));b(r,r);for(var q=0;3>q;++q){var G=(q+1)%3,H=(q+2)%3,M=v;y=0;a:for(;2>y;++y){var O=[];if(0>l[q]!==!!y){M[q]=a[y][q];for(var I=0;2>I;++I){M[G]=a[I^y][G];for(var Q=0;2>Q;++Q)M[H]=a[Q^I^y][H],O.push(M.slice())}for(I=Q=m?5:4;I===Q;++I){if(0===O.length)continue a;O=h.positive(O,p[I])}for(I=0;I<O.length;++I){H=O[I];Q=v;var N=r;for(var L=H,R=B,ca=D,w=0;3>w;++w){for(var x=d,Y=g,ia=0;3>ia;++ia)Y[ia]=x[ia]=L[ia];Y[3]=x[3]=1;Y[w]+=1;n(Y,Y,N);0>Y[3]&&(Q[w]=
Infinity);--x[w];n(x,x,N);0>x[3]&&(Q[w]=Infinity);ia=(x[0]/x[3]-Y[0]/Y[3])*R;x=(x[1]/x[3]-Y[1]/Y[3])*ca;Q[w]=.25*Math.sqrt(ia*ia+x*x)}N=Q;for(Q=0;3>Q;++Q)t[Q].lo=Math.min(t[Q].lo,H[Q]),t[Q].hi=Math.max(t[Q].hi,H[Q]),Q!==q&&(t[Q].pixelsPerDataUnit=Math.min(t[Q].pixelsPerDataUnit,Math.abs(N[Q])))}}}}return t};var k=a("extract-frustum-planes"),h=a("split-polygon"),e=a("./lib/cube.js"),f=a("gl-mat4/multiply"),b=a("gl-mat4/transpose"),n=a("gl-vec4/transformMat4"),u=new Float32Array([1,0,0,0,0,1,0,0,0,
0,1,0,0,0,0,1]),r=new Float32Array(16),d=[0,0,0,1],g=[0,0,0,1],c=[new m(Infinity,-Infinity,Infinity),new m(Infinity,-Infinity,Infinity),new m(Infinity,-Infinity,Infinity)],v=[0,0,0]},{"./lib/cube.js":231,"extract-frustum-planes":220,"gl-mat4/multiply":263,"gl-mat4/transpose":272,"gl-vec4/transformMat4":390,"split-polygon":511}],237:[function(a,p,l){function m(a,b,d,e,c){this.gl=a;this.type=b;this.handle=d;this.length=e;this.usage=c}function k(a,b,d,e,c,f){var g=c.length*c.BYTES_PER_ELEMENT;if(0>f)return a.bufferData(b,
c,e),g;if(g+f>d)throw Error("gl-buffer: If resizing buffer, must not specify offset");a.bufferSubData(b,f,c);return d}function h(a,b){b=e.malloc(a.length,b);for(var d=a.length,g=0;g<d;++g)b[g]=a[g];return b}var e=a("typedarray-pool"),f=a("ndarray-ops"),b=a("ndarray"),n="uint8 uint8_clamped uint16 uint32 int8 int16 int32 float32".split(" ");a=m.prototype;a.bind=function(){this.gl.bindBuffer(this.type,this.handle)};a.unbind=function(){this.gl.bindBuffer(this.type,null)};a.dispose=function(){this.gl.deleteBuffer(this.handle)};
a.update=function(a,m){"number"!==typeof m&&(m=-1);this.bind();if("object"===typeof a&&"undefined"!==typeof a.shape){var d=a.dtype;0>n.indexOf(d)&&(d="float32");this.type===this.gl.ELEMENT_ARRAY_BUFFER&&(d=gl.getExtension("OES_element_index_uint")&&"uint16"!==d?"uint32":"uint16");var g;if(g=d===a.dtype)a:{g=a.stride;for(var c=1,v=g.length-1;0<=v;--v){if(g[v]!==c){g=!1;break a}c*=a.shape[v]}g=!0}g?this.length=0===a.offset&&a.data.length===a.shape[0]?k(this.gl,this.type,this.length,this.usage,a.data,
m):k(this.gl,this.type,this.length,this.usage,a.data.subarray(a.offset,a.shape[0]),m):(d=e.malloc(a.size,d),g=b(d,a.shape),f.assign(g,a),this.length=0>m?k(this.gl,this.type,this.length,this.usage,d,m):k(this.gl,this.type,this.length,this.usage,d.subarray(0,a.size),m),e.free(d))}else if(Array.isArray(a))d=this.type===this.gl.ELEMENT_ARRAY_BUFFER?h(a,"uint16"):h(a,"float32"),this.length=0>m?k(this.gl,this.type,this.length,this.usage,d,m):k(this.gl,this.type,this.length,this.usage,d.subarray(0,a.length),
m),e.free(d);else if("object"===typeof a&&"number"===typeof a.length)this.length=k(this.gl,this.type,this.length,this.usage,a,m);else if("number"===typeof a||void 0===a){if(0<=m)throw Error("gl-buffer: Cannot specify offset when resizing buffer");a|=0;0>=a&&(a=1);this.gl.bufferData(this.type,a|0,this.usage);this.length=a}else throw Error("gl-buffer: Invalid data type");};p.exports=function(a,b,d,e){d=d||a.ARRAY_BUFFER;e=e||a.DYNAMIC_DRAW;if(d!==a.ARRAY_BUFFER&&d!==a.ELEMENT_ARRAY_BUFFER)throw Error("gl-buffer: Invalid type for webgl buffer, must be either gl.ARRAY_BUFFER or gl.ELEMENT_ARRAY_BUFFER");
if(e!==a.DYNAMIC_DRAW&&e!==a.STATIC_DRAW&&e!==a.STREAM_DRAW)throw Error("gl-buffer: Invalid usage for buffer, must be either gl.DYNAMIC_DRAW, gl.STATIC_DRAW or gl.STREAM_DRAW");var c=a.createBuffer();a=new m(a,d,c,0,e);a.update(b);return a}},{ndarray:442,"ndarray-ops":436,"typedarray-pool":529}],238:[function(a,p,l){var m=a("gl-vec3"),k=function(a,e){for(var b=0;b<a.length;b++)if(a[b]>=e)return b-1;return b},h=m.create(),e=m.create(),f=function(a,e,f){return a<e?e:a>f?f:a};p.exports=function(a,n){if(a.positions)var b=
a.positions;else{var r=a.meshgrid;b=r[0];var d=r[1];r=r[2];for(var g=[],c=0;c<r.length;c++)for(var v=0;v<d.length;v++)for(var t=0;t<b.length;t++)g.push([r[c],d[v],b[t]]);b=g}var y=a.meshgrid,B=a.vectors;d={positions:[],vertexIntensity:[],vertexIntensityBounds:a.vertexIntensityBounds,vertexNormals:[],vectors:[],cells:[],coneOffset:a.coneOffset,colormap:a.colormap};if(0===a.positions.length)return n&&(n[0]=[0,0,0],n[1]=[0,0,0]),d;t=0;var D=1/0,l=-1/0,p=1/0,q=-1/0,P=1/0,J=-1/0,E=null,H=null;r=[];v=1/
0;for(g=0;g<b.length;g++){c=b[g];D=Math.min(c[0],D);l=Math.max(c[0],l);p=Math.min(c[1],p);q=Math.max(c[1],q);P=Math.min(c[2],P);J=Math.max(c[2],J);if(y){var M=B;var O=y,I=c[0],Q=c[1],N=c[2],L=O[0].length,R=O[1].length,ca=O[2].length,w=k(O[0],I),x=k(O[1],Q),Y=k(O[2],N),ia=w+1,S=x+1,W=Y+1;w=f(w,0,L-1);ia=f(ia,0,L-1);x=f(x,0,R-1);S=f(S,0,R-1);Y=f(Y,0,ca-1);W=f(W,0,ca-1);if(0>w||0>x||0>Y||ia>=L||S>=R||W>=ca)M=m.create();else{I=(I-O[0][w])/(O[0][ia]-O[0][w]);Q=(Q-O[1][x])/(O[1][S]-O[1][x]);O=(N-O[2][Y])/
(O[2][W]-O[2][Y]);if(0>I||1<I||isNaN(I))I=0;if(0>Q||1<Q||isNaN(Q))Q=0;if(0>O||1<O||isNaN(O))O=0;Y=Y*L*R;R*=W*L;x*=L;L*=S;N=w;ca=ia;ia=M[x+Y+N];w=M[x+Y+ca];S=M[L+Y+N];Y=M[L+Y+ca];W=M[x+R+N];x=M[x+R+ca];N=M[L+R+N];M=M[L+R+ca];R=m.create();m.lerp(R,ia,w,I);m.lerp(h,S,Y,I);m.lerp(R,R,h,Q);m.lerp(h,W,x,I);m.lerp(e,N,M,I);m.lerp(h,h,e,Q);m.lerp(R,R,h,O);M=R}}else M=B[g];m.length(M)>t&&(t=m.length(M));g&&(v=Math.min(v,2*m.distance(E,c)/(m.length(H)+m.length(M))));E=c;H=M;r.push(M)}g=[D,p,P];c=[l,q,J];n&&
(n[0]=g,n[1]=c);0===t&&(t=1);n=1/t;if(!isFinite(v)||isNaN(v))v=1;d.vectorScale=v;v=m.create();m.set(v,0,1,0);g=a.coneSize||.5;a.absoluteConeSize&&(g=a.absoluteConeSize*n);d.coneScale=g;for(a=g=0;g<b.length;g++)for(c=b[g],t=c[0],l=c[1],c=c[2],q=r[g],J=m.length(q)*n,y=0;8>y;y++)d.positions.push([t,l,c,a++]),d.positions.push([t,l,c,a++]),d.positions.push([t,l,c,a++]),d.positions.push([t,l,c,a++]),d.positions.push([t,l,c,a++]),d.positions.push([t,l,c,a++]),d.vectors.push(q),d.vectors.push(q),d.vectors.push(q),
d.vectors.push(q),d.vectors.push(q),d.vectors.push(q),d.vertexIntensity.push(J,J,J),d.vertexIntensity.push(J,J,J),d.vertexNormals.push(v,v,v),d.vertexNormals.push(v,v,v),B=d.positions.length,d.cells.push([B-6,B-5,B-4],[B-3,B-2,B-1]);return d};p.exports.createConeMesh=a("./lib/conemesh")},{"./lib/conemesh":239,"gl-vec3":338}],239:[function(a,p,l){function m(a,b,c,d,e,g,f,h,k,n,t,m,v,r,u,y,l,p,q,w,x,W,fa,z){this.gl=a;this.pixelRatio=1;this.cells=[];this.positions=[];this.intensity=[];this.texture=b;
this.dirty=!0;this.triShader=c;this.pickShader=d;this.trianglePositions=e;this.triangleVectors=g;this.triangleColors=h;this.triangleNormals=n;this.triangleUVs=k;this.triangleIds=f;this.triangleVAO=t;this.triangleCount=0;this.lineWidth=1;this.edgePositions=m;this.edgeColors=r;this.edgeUVs=u;this.edgeIds=v;this.edgeVAO=y;this.edgeCount=0;this.pointPositions=l;this.pointColors=q;this.pointUVs=w;this.pointSizes=x;this.pointIds=p;this.pointVAO=W;this.pointCount=0;this.contourLineWidth=1;this.contourPositions=
fa;this.contourVAO=z;this.contourCount=0;this.contourColor=[0,0,0];this.contourEnable=!0;this.pickId=1;this.bounds=[[Infinity,Infinity,Infinity],[-Infinity,-Infinity,-Infinity]];this.clipBounds=[[-Infinity,-Infinity,-Infinity],[Infinity,Infinity,Infinity]];this.lightPosition=[1E5,1E5,0];this.diffuseLight=this.ambientLight=.8;this.specularLight=2;this.roughness=.5;this.fresnel=1.5;this.opacity=1;this.coneScale=2;this.vectorScale=1;this.coneOffset=.25;this._projection=this._view=this._model=B;this._resolution=
[1,1]}function k(a){a=g({colormap:a,nshades:256,format:"rgba"});for(var b=new Uint8Array(1024),c=0;256>c;++c){for(var e=a[c],f=0;3>f;++f)b[4*c+f]=e[f];b[4*c+3]=255*e[3]}return d(b,[256,256,4],[4,0,1])}var h=a("gl-shader"),e=a("gl-buffer"),f=a("gl-vao"),b=a("gl-texture2d"),n=a("normals"),u=a("gl-mat4/multiply"),r=a("gl-mat4/invert"),d=a("ndarray"),g=a("colormap"),c=a("simplicial-complex-contour"),v=a("typedarray-pool");a=a("./shaders");var t=a.meshShader,y=a.pickShader,B=[1,0,0,0,0,1,0,0,0,0,1,0,0,
0,0,1];a=m.prototype;a.isOpaque=function(){return 1<=this.opacity};a.isTransparent=function(){return 1>this.opacity};a.pickSlots=1;a.setPickBase=function(a){this.pickId=a};a.highlight=function(a){if(a&&this.contourEnable){var b=c(this.cells,this.intensity,a.intensity);a=b.cells;var d=b.vertexIds;b=b.vertexWeights;for(var e=a.length,g=v.mallocFloat32(6*e),f=0,h=0;h<e;++h)for(var k=a[h],n=0;2>n;++n){var t=k[0];2===k.length&&(t=k[n]);var m=b[t],r=1-m,u=this.positions[d[t][0]];t=this.positions[d[t][1]];
for(var y=0;3>y;++y)g[f++]=m*u[y]+r*t[y]}this.contourCount=f/3|0;this.contourPositions.update(g.subarray(0,f));v.free(g)}else this.contourCount=0};a.update=function(a){a=a||{};var c=this.gl;this.dirty=!0;"contourEnable"in a&&(this.contourEnable=a.contourEnable);"contourColor"in a&&(this.contourColor=a.contourColor);"lineWidth"in a&&(this.lineWidth=a.lineWidth);"lightPosition"in a&&(this.lightPosition=a.lightPosition);"opacity"in a&&(this.opacity=a.opacity);"ambient"in a&&(this.ambientLight=a.ambient);
"diffuse"in a&&(this.diffuseLight=a.diffuse);"specular"in a&&(this.specularLight=a.specular);"roughness"in a&&(this.roughness=a.roughness);"fresnel"in a&&(this.fresnel=a.fresnel);void 0!==a.vectorScale&&(this.vectorScale=a.vectorScale);void 0!==a.coneScale&&(this.coneScale=a.coneScale);void 0!==a.coneOffset&&(this.coneOffset=a.coneOffset);a.texture?(this.texture.dispose(),this.texture=b(c,a.texture)):a.colormap&&(this.texture.shape=[256,256],this.texture.minFilter=c.LINEAR_MIPMAP_LINEAR,this.texture.magFilter=
c.LINEAR,this.texture.setPixels(k(a.colormap)),this.texture.generateMipmap());c=a.cells;var d=a.positions,e=a.vectors;if(d&&c&&e){var g=[],f=[],h=[],t=[],m=[],v=[],r=[],u=[],y=[],B=[],l=[],D=[],p=[],q=[],w=[];this.cells=c;this.positions=d;var x=a.vertexNormals,S=a.cellNormals,W=void 0===a.vertexNormalsEpsilon?1E-6:a.vertexNormalsEpsilon,fa=void 0===a.faceNormalsEpsilon?1E-6:a.faceNormalsEpsilon;a.useFacetNormals&&!S&&(S=n.faceNormals(c,d,fa));S||x||(x=n.vertexNormals(c,d,W));W=a.vertexColors;fa=a.cellColors;
var z=a.meshColor||[1,1,1,1],ha=a.vertexUVs,ea=a.vertexIntensity,ba=a.cellUVs,la=a.cellIntensity,Z=Infinity,pa=-Infinity;if(!ha&&!ba)if(ea)if(a.vertexIntensityBounds)Z=+a.vertexIntensityBounds[0],pa=+a.vertexIntensityBounds[1];else for(var da=0;da<ea.length;++da){var F=ea[da];Z=Math.min(Z,F);pa=Math.max(pa,F)}else if(la)for(da=0;da<la.length;++da)F=la[da],Z=Math.min(Z,F),pa=Math.max(pa,F);else for(da=0;da<d.length;++da)F=d[da][2],Z=Math.min(Z,F),pa=Math.max(pa,F);if(ea)this.intensity=ea;else if(la){var ja=
d.length;da=Array(ja);for(F=0;F<ja;++F)da[F]=0;ja=c.length;for(F=0;F<ja;++F)for(var K=c[F],za=0;za<K.length;++za)da[K[za]]=la[F];this.intensity=da}else{da=d.length;F=Array(da);for(ja=0;ja<da;++ja)F[ja]=d[ja][2];this.intensity=F}F=a.pointSizes;a=a.pointSize||1;this.bounds=[[Infinity,Infinity,Infinity],[-Infinity,-Infinity,-Infinity]];for(da=0;da<d.length;++da){var ka=d[da];for(ja=0;3>ja;++ja)!isNaN(ka[ja])&&isFinite(ka[ja])&&(this.bounds[0][ja]=Math.min(this.bounds[0][ja],ka[ja]),this.bounds[1][ja]=
Math.max(this.bounds[1][ja],ka[ja]))}var wa=za=K=0;da=0;a:for(;da<c.length;++da){var ta=c[da];switch(ta.length){case 1:var aa=ta[0];ka=d[aa];for(ja=0;3>ja;++ja)if(isNaN(ka[ja])||!isFinite(ka[ja]))continue a;l.push(ka[0],ka[1],ka[2],ka[3]);var ma=W?W[aa]:fa?fa[da]:z;3===ma.length?D.push(ma[0],ma[1],ma[2],1):D.push(ma[0],ma[1],ma[2],ma[3]);ka=ha?ha[aa]:ea?[(ea[aa]-Z)/(pa-Z),0]:ba?ba[da]:la?[(la[da]-Z)/(pa-Z),0]:[(ka[2]-Z)/(pa-Z),0];p.push(ka[0],ka[1]);F?q.push(F[aa]):q.push(a);w.push(da);wa+=1;break;
case 2:for(ja=0;2>ja;++ja)for(aa=ta[ja],ka=d[aa],aa=0;3>aa;++aa)if(isNaN(ka[aa])||!isFinite(ka[aa]))continue a;for(ja=0;2>ja;++ja)aa=ta[ja],ka=d[aa],r.push(ka[0],ka[1],ka[2]),ma=W?W[aa]:fa?fa[da]:z,3===ma.length?u.push(ma[0],ma[1],ma[2],1):u.push(ma[0],ma[1],ma[2],ma[3]),ka=ha?ha[aa]:ea?[(ea[aa]-Z)/(pa-Z),0]:ba?ba[da]:la?[(la[da]-Z)/(pa-Z),0]:[(ka[2]-Z)/(pa-Z),0],y.push(ka[0],ka[1]),B.push(da);za+=1;break;case 3:for(ja=0;3>ja;++ja)for(aa=ta[ja],ka=d[aa],aa=0;3>aa;++aa)if(isNaN(ka[aa])||!isFinite(ka[aa]))continue a;
for(ja=0;3>ja;++ja)aa=ta[2-ja],ka=d[aa],g.push(ka[0],ka[1],ka[2],ka[3]),ma=e[aa],f.push(ma[0],ma[1],ma[2]),ma=W?W[aa]:fa?fa[da]:z,3===ma.length?h.push(ma[0],ma[1],ma[2],1):h.push(ma[0],ma[1],ma[2],ma[3]),ka=ha?ha[aa]:ea?[(ea[aa]-Z)/(pa-Z),0]:ba?ba[da]:la?[(la[da]-Z)/(pa-Z),0]:[(ka[2]-Z)/(pa-Z),0],m.push(ka[0],ka[1]),ka=x?x[aa]:S[da],t.push(ka[0],ka[1],ka[2]),v.push(da);K+=1}}this.pointCount=wa;this.edgeCount=za;this.triangleCount=K;this.pointPositions.update(l);this.pointColors.update(D);this.pointUVs.update(p);
this.pointSizes.update(q);this.pointIds.update(new Uint32Array(w));this.edgePositions.update(r);this.edgeColors.update(u);this.edgeUVs.update(y);this.edgeIds.update(new Uint32Array(B));this.trianglePositions.update(g);this.triangleVectors.update(f);this.triangleColors.update(h);this.triangleUVs.update(m);this.triangleNormals.update(t);this.triangleIds.update(new Uint32Array(v))}};a.drawTransparent=a.draw=function(a){a=a||{};var b=this.gl,c=a.model||B,d=a.view||B,e=a.projection||B,g=[[-1E6,-1E6,-1E6],
[1E6,1E6,1E6]];for(a=0;3>a;++a)g[0][a]=Math.max(g[0][a],this.clipBounds[0][a]),g[1][a]=Math.min(g[1][a],this.clipBounds[1][a]);c={model:c,view:d,projection:e,inverseModel:B.slice(),clipBounds:g,kambient:this.ambientLight,kdiffuse:this.diffuseLight,kspecular:this.specularLight,roughness:this.roughness,fresnel:this.fresnel,eyePosition:[0,0,0],lightPosition:[0,0,0],opacity:this.opacity,vectorScale:this.vectorScale,coneScale:this.coneScale,coneOffset:this.coneOffset,contourColor:this.contourColor,texture:0};
c.inverseModel=r(c.inverseModel,c.model);b.disable(b.CULL_FACE);this.texture.bind(0);d=Array(16);u(d,c.view,c.model);u(d,c.projection,d);r(d,d);for(a=0;3>a;++a)c.eyePosition[a]=d[12+a]/d[15];e=d[15];for(a=0;3>a;++a)e+=this.lightPosition[a]*d[4*a+3];for(a=0;3>a;++a){g=d[12+a];for(var f=0;3>f;++f)g+=d[4*f+a]*this.lightPosition[f];c.lightPosition[a]=g/e}0<this.triangleCount&&(a=this.triShader,a.bind(),a.uniforms=c,this.triangleVAO.bind(),b.drawArrays(b.TRIANGLES,0,3*this.triangleCount),this.triangleVAO.unbind())};
a.drawPick=function(a){a=a||{};var b=this.gl,c=a.model||B,d=a.view||B;a=a.projection||B;for(var e=[[-1E6,-1E6,-1E6],[1E6,1E6,1E6]],g=0;3>g;++g)e[0][g]=Math.max(e[0][g],this.clipBounds[0][g]),e[1][g]=Math.min(e[1][g],this.clipBounds[1][g]);this._model=[].slice.call(c);this._view=[].slice.call(d);this._projection=[].slice.call(a);this._resolution=[b.drawingBufferWidth,b.drawingBufferHeight];c={model:c,view:d,projection:a,clipBounds:e,vectorScale:this.vectorScale,coneScale:this.coneScale,coneOffset:this.coneOffset,
pickId:this.pickId/255};d=this.pickShader;d.bind();d.uniforms=c;0<this.triangleCount&&(this.triangleVAO.bind(),b.drawArrays(b.TRIANGLES,0,3*this.triangleCount),this.triangleVAO.unbind());0<this.edgeCount&&(this.edgeVAO.bind(),b.lineWidth(this.lineWidth*this.pixelRatio),b.drawArrays(b.LINES,0,2*this.edgeCount),this.edgeVAO.unbind())};a.pick=function(a){if(!a||a.id!==this.pickId)return null;a=this.cells[a.value[0]+256*a.value[1]+65536*a.value[2]];var b=this.positions[a[1]].slice(0,3);return{index:Math.floor(a[1]/
48),position:b,dataCoordinate:b}};a.dispose=function(){this.texture.dispose();this.triShader.dispose();this.pickShader.dispose();this.triangleVAO.dispose();this.trianglePositions.dispose();this.triangleVectors.dispose();this.triangleColors.dispose();this.triangleUVs.dispose();this.triangleNormals.dispose();this.triangleIds.dispose();this.edgeVAO.dispose();this.edgePositions.dispose();this.edgeColors.dispose();this.edgeUVs.dispose();this.edgeIds.dispose();this.pointVAO.dispose();this.pointPositions.dispose();
this.pointColors.dispose();this.pointUVs.dispose();this.pointSizes.dispose();this.pointIds.dispose();this.contourVAO.dispose();this.contourPositions.dispose()};p.exports=function(a,c){1===arguments.length&&(c=a,a=c.gl);var g;(g=c.triShader)||(g=h(a,t.vertex,t.fragment,null,t.attributes),g.attributes.position.location=0,g.attributes.color.location=2,g.attributes.uv.location=3,g.attributes.vector.location=5);var k=h(a,y.vertex,y.fragment,null,y.attributes);k.attributes.position.location=0;k.attributes.id.location=
1;k.attributes.vector.location=5;var n=b(a,d(new Uint8Array([255,255,255,255]),[1,1,4]));n.generateMipmap();n.minFilter=a.LINEAR_MIPMAP_LINEAR;n.magFilter=a.LINEAR;var v=e(a),r=e(a),u=e(a),B=e(a),l=e(a),D=e(a),p=f(a,[{buffer:v,type:a.FLOAT,size:4},{buffer:D,type:a.UNSIGNED_BYTE,size:4,normalized:!0},{buffer:u,type:a.FLOAT,size:4},{buffer:B,type:a.FLOAT,size:2},{buffer:l,type:a.FLOAT,size:3},{buffer:r,type:a.FLOAT,size:3}]),q=e(a),G=e(a),R=e(a),w=e(a),x=f(a,[{buffer:q,type:a.FLOAT,size:3},{buffer:w,
type:a.UNSIGNED_BYTE,size:4,normalized:!0},{buffer:G,type:a.FLOAT,size:4},{buffer:R,type:a.FLOAT,size:2}]),T=e(a),Y=e(a),ia=e(a),S=e(a),W=e(a),fa=f(a,[{buffer:T,type:a.FLOAT,size:3},{buffer:W,type:a.UNSIGNED_BYTE,size:4,normalized:!0},{buffer:Y,type:a.FLOAT,size:4},{buffer:ia,type:a.FLOAT,size:2},{buffer:S,type:a.FLOAT,size:1}]),z=e(a),ha=f(a,[{buffer:z,type:a.FLOAT,size:3}]);g=new m(a,n,g,k,v,r,D,u,B,l,p,q,w,G,R,x,T,W,Y,ia,S,fa,z,ha);g.update(c);return g}},{"./shaders":240,colormap:116,"gl-buffer":237,
"gl-mat4/invert":261,"gl-mat4/multiply":263,"gl-shader":297,"gl-texture2d":314,"gl-vao":319,ndarray:442,normals:445,"simplicial-complex-contour":502,"typedarray-pool":529}],240:[function(a,p,l){var m=a("glslify");a=m(["precision highp float;\n\nprecision highp float;\n#define GLSLIFY 1\n\nvec3 getOrthogonalVector(vec3 v) {\n  // Return up-vector for only-z vector.\n  // Return ax + by + cz \x3d 0, a point that lies on the plane that has v as a normal and that isn't (0,0,0).\n  // From the above if-statement we have ||a|| \x3e 0  U  ||b|| \x3e 0.\n  // Assign z \x3d 0, x \x3d -b, y \x3d a:\n  // a*-b + b*a + c*0 \x3d -ba + ba + 0 \x3d 0\n  if (v.x*v.x \x3e v.z*v.z || v.y*v.y \x3e v.z*v.z) {\n    return normalize(vec3(-v.y, v.x, 0.0));\n  } else {\n    return normalize(vec3(0.0, v.z, -v.y));\n  }\n}\n\n// Calculate the cone vertex and normal at the given index.\n//\n// The returned vertex is for a cone with its top at origin and height of 1.0,\n// pointing in the direction of the vector attribute.\n//\n// Each cone is made up of a top vertex, a center base vertex and base perimeter vertices.\n// These vertices are used to make up the triangles of the cone by the following:\n//   segment + 0 top vertex\n//   segment + 1 perimeter vertex a+1\n//   segment + 2 perimeter vertex a\n//   segment + 3 center base vertex\n//   segment + 4 perimeter vertex a\n//   segment + 5 perimeter vertex a+1\n// Where segment is the number of the radial segment * 6 and a is the angle at that radial segment.\n// To go from index to segment, floor(index / 6)\n// To go from segment to angle, 2*pi * (segment/segmentCount)\n// To go from index to segment index, index - (segment*6)\n//\nvec3 getConePosition(vec3 d, float rawIndex, float coneOffset, out vec3 normal) {\n\n  const float segmentCount \x3d 8.0;\n\n  float index \x3d rawIndex - floor(rawIndex /\n    (segmentCount * 6.0)) *\n    (segmentCount * 6.0);\n\n  float segment \x3d floor(0.001 + index/6.0);\n  float segmentIndex \x3d index - (segment*6.0);\n\n  normal \x3d -normalize(d);\n\n  if (segmentIndex \x3e 2.99 \x26\x26 segmentIndex \x3c 3.01) {\n    return mix(vec3(0.0), -d, coneOffset);\n  }\n\n  float nextAngle \x3d (\n    (segmentIndex \x3e 0.99 \x26\x26  segmentIndex \x3c 1.01) ||\n    (segmentIndex \x3e 4.99 \x26\x26  segmentIndex \x3c 5.01)\n  ) ? 1.0 : 0.0;\n  float angle \x3d 2.0 * 3.14159 * ((segment + nextAngle) / segmentCount);\n\n  vec3 v1 \x3d mix(d, vec3(0.0), coneOffset);\n  vec3 v2 \x3d v1 - d;\n\n  vec3 u \x3d getOrthogonalVector(d);\n  vec3 v \x3d normalize(cross(u, d));\n\n  vec3 x \x3d u * cos(angle) * length(d)*0.25;\n  vec3 y \x3d v * sin(angle) * length(d)*0.25;\n  vec3 v3 \x3d v2 + x + y;\n  if (segmentIndex \x3c 3.0) {\n    vec3 tx \x3d u * sin(angle);\n    vec3 ty \x3d v * -cos(angle);\n    vec3 tangent \x3d tx + ty;\n    normal \x3d normalize(cross(v3 - v1, tangent));\n  }\n\n  if (segmentIndex \x3d\x3d 0.0) {\n    return mix(d, vec3(0.0), coneOffset);\n  }\n  return v3;\n}\n\nattribute vec3 vector;\nattribute vec4 color, position;\nattribute vec2 uv;\nuniform float vectorScale;\nuniform float coneScale;\n\nuniform float coneOffset;\n\nuniform mat4 model\n           , view\n           , projection\n           , inverseModel;\nuniform vec3 eyePosition\n           , lightPosition;\n\nvarying vec3 f_normal\n           , f_lightDirection\n           , f_eyeDirection\n           , f_data\n           , f_position;\nvarying vec4 f_color;\nvarying vec2 f_uv;\n\nvoid main() {\n  // Scale the vector magnitude to stay constant with\n  // model \x26 view changes.\n  vec3 normal;\n  vec3 XYZ \x3d getConePosition(mat3(model) * ((vectorScale * coneScale) * vector), position.w, coneOffset, normal);\n  vec4 conePosition \x3d model * vec4(position.xyz, 1.0) + vec4(XYZ, 0.0);\n\n  //Lighting geometry parameters\n  vec4 cameraCoordinate \x3d view * conePosition;\n  cameraCoordinate.xyz /\x3d cameraCoordinate.w;\n  f_lightDirection \x3d lightPosition - cameraCoordinate.xyz;\n  f_eyeDirection   \x3d eyePosition - cameraCoordinate.xyz;\n  f_normal \x3d normalize((vec4(normal,0.0) * inverseModel).xyz);\n\n  // vec4 m_position  \x3d model * vec4(conePosition, 1.0);\n  vec4 t_position  \x3d view * conePosition;\n  gl_Position      \x3d projection * t_position;\n\n  f_color          \x3d color;\n  f_data           \x3d conePosition.xyz;\n  f_position       \x3d position.xyz;\n  f_uv             \x3d uv;\n}\n"]);
p=m(["#extension GL_OES_standard_derivatives : enable\n\nprecision highp float;\n#define GLSLIFY 1\n\nfloat beckmannDistribution(float x, float roughness) {\n  float NdotH \x3d max(x, 0.0001);\n  float cos2Alpha \x3d NdotH * NdotH;\n  float tan2Alpha \x3d (cos2Alpha - 1.0) / cos2Alpha;\n  float roughness2 \x3d roughness * roughness;\n  float denom \x3d 3.141592653589793 * roughness2 * cos2Alpha * cos2Alpha;\n  return exp(tan2Alpha / roughness2) / denom;\n}\n\nfloat cookTorranceSpecular(\n  vec3 lightDirection,\n  vec3 viewDirection,\n  vec3 surfaceNormal,\n  float roughness,\n  float fresnel) {\n\n  float VdotN \x3d max(dot(viewDirection, surfaceNormal), 0.0);\n  float LdotN \x3d max(dot(lightDirection, surfaceNormal), 0.0);\n\n  //Half angle vector\n  vec3 H \x3d normalize(lightDirection + viewDirection);\n\n  //Geometric term\n  float NdotH \x3d max(dot(surfaceNormal, H), 0.0);\n  float VdotH \x3d max(dot(viewDirection, H), 0.000001);\n  float LdotH \x3d max(dot(lightDirection, H), 0.000001);\n  float G1 \x3d (2.0 * NdotH * VdotN) / VdotH;\n  float G2 \x3d (2.0 * NdotH * LdotN) / LdotH;\n  float G \x3d min(1.0, min(G1, G2));\n  \n  //Distribution term\n  float D \x3d beckmannDistribution(NdotH, roughness);\n\n  //Fresnel term\n  float F \x3d pow(1.0 - VdotN, fresnel);\n\n  //Multiply terms and done\n  return  G * F * D / max(3.14159265 * VdotN, 0.000001);\n}\n\nbool outOfRange(float a, float b, float p) {\n  return ((p \x3e max(a, b)) || \n          (p \x3c min(a, b)));\n}\n\nbool outOfRange(vec2 a, vec2 b, vec2 p) {\n  return (outOfRange(a.x, b.x, p.x) ||\n          outOfRange(a.y, b.y, p.y));\n}\n\nbool outOfRange(vec3 a, vec3 b, vec3 p) {\n  return (outOfRange(a.x, b.x, p.x) ||\n          outOfRange(a.y, b.y, p.y) ||\n          outOfRange(a.z, b.z, p.z));\n}\n\nbool outOfRange(vec4 a, vec4 b, vec4 p) {\n  return outOfRange(a.xyz, b.xyz, p.xyz);\n}\n\nuniform vec3 clipBounds[2];\nuniform float roughness\n            , fresnel\n            , kambient\n            , kdiffuse\n            , kspecular\n            , opacity;\nuniform sampler2D texture;\n\nvarying vec3 f_normal\n           , f_lightDirection\n           , f_eyeDirection\n           , f_data\n           , f_position;\nvarying vec4 f_color;\nvarying vec2 f_uv;\n\nvoid main() {\n  if (outOfRange(clipBounds[0], clipBounds[1], f_position)) discard;\n  vec3 N \x3d normalize(f_normal);\n  vec3 L \x3d normalize(f_lightDirection);\n  vec3 V \x3d normalize(f_eyeDirection);\n\n  if(gl_FrontFacing) {\n    N \x3d -N;\n  }\n\n  float specular \x3d min(1.0, max(0.0, cookTorranceSpecular(L, V, N, roughness, fresnel)));\n  float diffuse  \x3d min(kambient + kdiffuse * max(dot(N, L), 0.0), 1.0);\n\n  vec4 surfaceColor \x3d f_color * texture2D(texture, f_uv);\n  vec4 litColor \x3d surfaceColor.a * vec4(diffuse * surfaceColor.rgb + kspecular * vec3(1,1,1) * specular,  1.0);\n\n  gl_FragColor \x3d litColor * opacity;\n}\n"]);
var k=m(["precision highp float;\n\nprecision highp float;\n#define GLSLIFY 1\n\nvec3 getOrthogonalVector(vec3 v) {\n  // Return up-vector for only-z vector.\n  // Return ax + by + cz \x3d 0, a point that lies on the plane that has v as a normal and that isn't (0,0,0).\n  // From the above if-statement we have ||a|| \x3e 0  U  ||b|| \x3e 0.\n  // Assign z \x3d 0, x \x3d -b, y \x3d a:\n  // a*-b + b*a + c*0 \x3d -ba + ba + 0 \x3d 0\n  if (v.x*v.x \x3e v.z*v.z || v.y*v.y \x3e v.z*v.z) {\n    return normalize(vec3(-v.y, v.x, 0.0));\n  } else {\n    return normalize(vec3(0.0, v.z, -v.y));\n  }\n}\n\n// Calculate the cone vertex and normal at the given index.\n//\n// The returned vertex is for a cone with its top at origin and height of 1.0,\n// pointing in the direction of the vector attribute.\n//\n// Each cone is made up of a top vertex, a center base vertex and base perimeter vertices.\n// These vertices are used to make up the triangles of the cone by the following:\n//   segment + 0 top vertex\n//   segment + 1 perimeter vertex a+1\n//   segment + 2 perimeter vertex a\n//   segment + 3 center base vertex\n//   segment + 4 perimeter vertex a\n//   segment + 5 perimeter vertex a+1\n// Where segment is the number of the radial segment * 6 and a is the angle at that radial segment.\n// To go from index to segment, floor(index / 6)\n// To go from segment to angle, 2*pi * (segment/segmentCount)\n// To go from index to segment index, index - (segment*6)\n//\nvec3 getConePosition(vec3 d, float rawIndex, float coneOffset, out vec3 normal) {\n\n  const float segmentCount \x3d 8.0;\n\n  float index \x3d rawIndex - floor(rawIndex /\n    (segmentCount * 6.0)) *\n    (segmentCount * 6.0);\n\n  float segment \x3d floor(0.001 + index/6.0);\n  float segmentIndex \x3d index - (segment*6.0);\n\n  normal \x3d -normalize(d);\n\n  if (segmentIndex \x3e 2.99 \x26\x26 segmentIndex \x3c 3.01) {\n    return mix(vec3(0.0), -d, coneOffset);\n  }\n\n  float nextAngle \x3d (\n    (segmentIndex \x3e 0.99 \x26\x26  segmentIndex \x3c 1.01) ||\n    (segmentIndex \x3e 4.99 \x26\x26  segmentIndex \x3c 5.01)\n  ) ? 1.0 : 0.0;\n  float angle \x3d 2.0 * 3.14159 * ((segment + nextAngle) / segmentCount);\n\n  vec3 v1 \x3d mix(d, vec3(0.0), coneOffset);\n  vec3 v2 \x3d v1 - d;\n\n  vec3 u \x3d getOrthogonalVector(d);\n  vec3 v \x3d normalize(cross(u, d));\n\n  vec3 x \x3d u * cos(angle) * length(d)*0.25;\n  vec3 y \x3d v * sin(angle) * length(d)*0.25;\n  vec3 v3 \x3d v2 + x + y;\n  if (segmentIndex \x3c 3.0) {\n    vec3 tx \x3d u * sin(angle);\n    vec3 ty \x3d v * -cos(angle);\n    vec3 tangent \x3d tx + ty;\n    normal \x3d normalize(cross(v3 - v1, tangent));\n  }\n\n  if (segmentIndex \x3d\x3d 0.0) {\n    return mix(d, vec3(0.0), coneOffset);\n  }\n  return v3;\n}\n\nattribute vec3 vector;\nattribute vec4 position;\nattribute vec4 id;\n\nuniform mat4 model, view, projection;\n\nuniform float vectorScale;\nuniform float coneScale;\nuniform float coneOffset;\n\nvarying vec3 f_position;\nvarying vec4 f_id;\n\nvoid main() {\n  vec3 normal;\n  vec3 XYZ \x3d getConePosition(mat3(model) * ((vectorScale * coneScale) * vector), position.w, coneOffset, normal);\n  vec4 conePosition \x3d model * vec4(position.xyz, 1.0) + vec4(XYZ, 0.0);\n  gl_Position \x3d projection * view * conePosition;\n  f_id        \x3d id;\n  f_position  \x3d position.xyz;\n}\n"]);
m=m(["precision highp float;\n#define GLSLIFY 1\n\nbool outOfRange(float a, float b, float p) {\n  return ((p \x3e max(a, b)) || \n          (p \x3c min(a, b)));\n}\n\nbool outOfRange(vec2 a, vec2 b, vec2 p) {\n  return (outOfRange(a.x, b.x, p.x) ||\n          outOfRange(a.y, b.y, p.y));\n}\n\nbool outOfRange(vec3 a, vec3 b, vec3 p) {\n  return (outOfRange(a.x, b.x, p.x) ||\n          outOfRange(a.y, b.y, p.y) ||\n          outOfRange(a.z, b.z, p.z));\n}\n\nbool outOfRange(vec4 a, vec4 b, vec4 p) {\n  return outOfRange(a.xyz, b.xyz, p.xyz);\n}\n\nuniform vec3  clipBounds[2];\nuniform float pickId;\n\nvarying vec3 f_position;\nvarying vec4 f_id;\n\nvoid main() {\n  if (outOfRange(clipBounds[0], clipBounds[1], f_position)) discard;\n\n  gl_FragColor \x3d vec4(pickId, f_id.xyz);\n}"]);
l.meshShader={vertex:a,fragment:p,attributes:[{name:"position",type:"vec4"},{name:"normal",type:"vec3"},{name:"color",type:"vec4"},{name:"uv",type:"vec2"},{name:"vector",type:"vec3"}]};l.pickShader={vertex:k,fragment:m,attributes:[{name:"position",type:"vec4"},{name:"id",type:"vec4"},{name:"vector",type:"vec3"}]}},{glslify:401}],241:[function(a,p,l){p.exports={0:"NONE",1:"ONE",2:"LINE_LOOP",3:"LINE_STRIP",4:"TRIANGLES",5:"TRIANGLE_STRIP",6:"TRIANGLE_FAN",256:"DEPTH_BUFFER_BIT",512:"NEVER",513:"LESS",
514:"EQUAL",515:"LEQUAL",516:"GREATER",517:"NOTEQUAL",518:"GEQUAL",519:"ALWAYS",768:"SRC_COLOR",769:"ONE_MINUS_SRC_COLOR",770:"SRC_ALPHA",771:"ONE_MINUS_SRC_ALPHA",772:"DST_ALPHA",773:"ONE_MINUS_DST_ALPHA",774:"DST_COLOR",775:"ONE_MINUS_DST_COLOR",776:"SRC_ALPHA_SATURATE",1024:"STENCIL_BUFFER_BIT",1028:"FRONT",1029:"BACK",1032:"FRONT_AND_BACK",1280:"INVALID_ENUM",1281:"INVALID_VALUE",1282:"INVALID_OPERATION",1285:"OUT_OF_MEMORY",1286:"INVALID_FRAMEBUFFER_OPERATION",2304:"CW",2305:"CCW",2849:"LINE_WIDTH",
2884:"CULL_FACE",2885:"CULL_FACE_MODE",2886:"FRONT_FACE",2928:"DEPTH_RANGE",2929:"DEPTH_TEST",2930:"DEPTH_WRITEMASK",2931:"DEPTH_CLEAR_VALUE",2932:"DEPTH_FUNC",2960:"STENCIL_TEST",2961:"STENCIL_CLEAR_VALUE",2962:"STENCIL_FUNC",2963:"STENCIL_VALUE_MASK",2964:"STENCIL_FAIL",2965:"STENCIL_PASS_DEPTH_FAIL",2966:"STENCIL_PASS_DEPTH_PASS",2967:"STENCIL_REF",2968:"STENCIL_WRITEMASK",2978:"VIEWPORT",3024:"DITHER",3042:"BLEND",3088:"SCISSOR_BOX",3089:"SCISSOR_TEST",3106:"COLOR_CLEAR_VALUE",3107:"COLOR_WRITEMASK",
3317:"UNPACK_ALIGNMENT",3333:"PACK_ALIGNMENT",3379:"MAX_TEXTURE_SIZE",3386:"MAX_VIEWPORT_DIMS",3408:"SUBPIXEL_BITS",3410:"RED_BITS",3411:"GREEN_BITS",3412:"BLUE_BITS",3413:"ALPHA_BITS",3414:"DEPTH_BITS",3415:"STENCIL_BITS",3553:"TEXTURE_2D",4352:"DONT_CARE",4353:"FASTEST",4354:"NICEST",5120:"BYTE",5121:"UNSIGNED_BYTE",5122:"SHORT",5123:"UNSIGNED_SHORT",5124:"INT",5125:"UNSIGNED_INT",5126:"FLOAT",5386:"INVERT",5890:"TEXTURE",6401:"STENCIL_INDEX",6402:"DEPTH_COMPONENT",6406:"ALPHA",6407:"RGB",6408:"RGBA",
6409:"LUMINANCE",6410:"LUMINANCE_ALPHA",7680:"KEEP",7681:"REPLACE",7682:"INCR",7683:"DECR",7936:"VENDOR",7937:"RENDERER",7938:"VERSION",9728:"NEAREST",9729:"LINEAR",9984:"NEAREST_MIPMAP_NEAREST",9985:"LINEAR_MIPMAP_NEAREST",9986:"NEAREST_MIPMAP_LINEAR",9987:"LINEAR_MIPMAP_LINEAR",10240:"TEXTURE_MAG_FILTER",10241:"TEXTURE_MIN_FILTER",10242:"TEXTURE_WRAP_S",10243:"TEXTURE_WRAP_T",10497:"REPEAT",10752:"POLYGON_OFFSET_UNITS",16384:"COLOR_BUFFER_BIT",32769:"CONSTANT_COLOR",32770:"ONE_MINUS_CONSTANT_COLOR",
32771:"CONSTANT_ALPHA",32772:"ONE_MINUS_CONSTANT_ALPHA",32773:"BLEND_COLOR",32774:"FUNC_ADD",32777:"BLEND_EQUATION_RGB",32778:"FUNC_SUBTRACT",32779:"FUNC_REVERSE_SUBTRACT",32819:"UNSIGNED_SHORT_4_4_4_4",32820:"UNSIGNED_SHORT_5_5_5_1",32823:"POLYGON_OFFSET_FILL",32824:"POLYGON_OFFSET_FACTOR",32854:"RGBA4",32855:"RGB5_A1",32873:"TEXTURE_BINDING_2D",32926:"SAMPLE_ALPHA_TO_COVERAGE",32928:"SAMPLE_COVERAGE",32936:"SAMPLE_BUFFERS",32937:"SAMPLES",32938:"SAMPLE_COVERAGE_VALUE",32939:"SAMPLE_COVERAGE_INVERT",
32968:"BLEND_DST_RGB",32969:"BLEND_SRC_RGB",32970:"BLEND_DST_ALPHA",32971:"BLEND_SRC_ALPHA",33071:"CLAMP_TO_EDGE",33170:"GENERATE_MIPMAP_HINT",33189:"DEPTH_COMPONENT16",33306:"DEPTH_STENCIL_ATTACHMENT",33635:"UNSIGNED_SHORT_5_6_5",33648:"MIRRORED_REPEAT",33901:"ALIASED_POINT_SIZE_RANGE",33902:"ALIASED_LINE_WIDTH_RANGE",33984:"TEXTURE0",33985:"TEXTURE1",33986:"TEXTURE2",33987:"TEXTURE3",33988:"TEXTURE4",33989:"TEXTURE5",33990:"TEXTURE6",33991:"TEXTURE7",33992:"TEXTURE8",33993:"TEXTURE9",33994:"TEXTURE10",
33995:"TEXTURE11",33996:"TEXTURE12",33997:"TEXTURE13",33998:"TEXTURE14",33999:"TEXTURE15",34E3:"TEXTURE16",34001:"TEXTURE17",34002:"TEXTURE18",34003:"TEXTURE19",34004:"TEXTURE20",34005:"TEXTURE21",34006:"TEXTURE22",34007:"TEXTURE23",34008:"TEXTURE24",34009:"TEXTURE25",34010:"TEXTURE26",34011:"TEXTURE27",34012:"TEXTURE28",34013:"TEXTURE29",34014:"TEXTURE30",34015:"TEXTURE31",34016:"ACTIVE_TEXTURE",34024:"MAX_RENDERBUFFER_SIZE",34041:"DEPTH_STENCIL",34055:"INCR_WRAP",34056:"DECR_WRAP",34067:"TEXTURE_CUBE_MAP",
34068:"TEXTURE_BINDING_CUBE_MAP",34069:"TEXTURE_CUBE_MAP_POSITIVE_X",34070:"TEXTURE_CUBE_MAP_NEGATIVE_X",34071:"TEXTURE_CUBE_MAP_POSITIVE_Y",34072:"TEXTURE_CUBE_MAP_NEGATIVE_Y",34073:"TEXTURE_CUBE_MAP_POSITIVE_Z",34074:"TEXTURE_CUBE_MAP_NEGATIVE_Z",34076:"MAX_CUBE_MAP_TEXTURE_SIZE",34338:"VERTEX_ATTRIB_ARRAY_ENABLED",34339:"VERTEX_ATTRIB_ARRAY_SIZE",34340:"VERTEX_ATTRIB_ARRAY_STRIDE",34341:"VERTEX_ATTRIB_ARRAY_TYPE",34342:"CURRENT_VERTEX_ATTRIB",34373:"VERTEX_ATTRIB_ARRAY_POINTER",34466:"NUM_COMPRESSED_TEXTURE_FORMATS",
34467:"COMPRESSED_TEXTURE_FORMATS",34660:"BUFFER_SIZE",34661:"BUFFER_USAGE",34816:"STENCIL_BACK_FUNC",34817:"STENCIL_BACK_FAIL",34818:"STENCIL_BACK_PASS_DEPTH_FAIL",34819:"STENCIL_BACK_PASS_DEPTH_PASS",34877:"BLEND_EQUATION_ALPHA",34921:"MAX_VERTEX_ATTRIBS",34922:"VERTEX_ATTRIB_ARRAY_NORMALIZED",34930:"MAX_TEXTURE_IMAGE_UNITS",34962:"ARRAY_BUFFER",34963:"ELEMENT_ARRAY_BUFFER",34964:"ARRAY_BUFFER_BINDING",34965:"ELEMENT_ARRAY_BUFFER_BINDING",34975:"VERTEX_ATTRIB_ARRAY_BUFFER_BINDING",35040:"STREAM_DRAW",
35044:"STATIC_DRAW",35048:"DYNAMIC_DRAW",35632:"FRAGMENT_SHADER",35633:"VERTEX_SHADER",35660:"MAX_VERTEX_TEXTURE_IMAGE_UNITS",35661:"MAX_COMBINED_TEXTURE_IMAGE_UNITS",35663:"SHADER_TYPE",35664:"FLOAT_VEC2",35665:"FLOAT_VEC3",35666:"FLOAT_VEC4",35667:"INT_VEC2",35668:"INT_VEC3",35669:"INT_VEC4",35670:"BOOL",35671:"BOOL_VEC2",35672:"BOOL_VEC3",35673:"BOOL_VEC4",35674:"FLOAT_MAT2",35675:"FLOAT_MAT3",35676:"FLOAT_MAT4",35678:"SAMPLER_2D",35680:"SAMPLER_CUBE",35712:"DELETE_STATUS",35713:"COMPILE_STATUS",
35714:"LINK_STATUS",35715:"VALIDATE_STATUS",35716:"INFO_LOG_LENGTH",35717:"ATTACHED_SHADERS",35718:"ACTIVE_UNIFORMS",35719:"ACTIVE_UNIFORM_MAX_LENGTH",35720:"SHADER_SOURCE_LENGTH",35721:"ACTIVE_ATTRIBUTES",35722:"ACTIVE_ATTRIBUTE_MAX_LENGTH",35724:"SHADING_LANGUAGE_VERSION",35725:"CURRENT_PROGRAM",36003:"STENCIL_BACK_REF",36004:"STENCIL_BACK_VALUE_MASK",36005:"STENCIL_BACK_WRITEMASK",36006:"FRAMEBUFFER_BINDING",36007:"RENDERBUFFER_BINDING",36048:"FRAMEBUFFER_ATTACHMENT_OBJECT_TYPE",36049:"FRAMEBUFFER_ATTACHMENT_OBJECT_NAME",
36050:"FRAMEBUFFER_ATTACHMENT_TEXTURE_LEVEL",36051:"FRAMEBUFFER_ATTACHMENT_TEXTURE_CUBE_MAP_FACE",36053:"FRAMEBUFFER_COMPLETE",36054:"FRAMEBUFFER_INCOMPLETE_ATTACHMENT",36055:"FRAMEBUFFER_INCOMPLETE_MISSING_ATTACHMENT",36057:"FRAMEBUFFER_INCOMPLETE_DIMENSIONS",36061:"FRAMEBUFFER_UNSUPPORTED",36064:"COLOR_ATTACHMENT0",36096:"DEPTH_ATTACHMENT",36128:"STENCIL_ATTACHMENT",36160:"FRAMEBUFFER",36161:"RENDERBUFFER",36162:"RENDERBUFFER_WIDTH",36163:"RENDERBUFFER_HEIGHT",36164:"RENDERBUFFER_INTERNAL_FORMAT",
36168:"STENCIL_INDEX8",36176:"RENDERBUFFER_RED_SIZE",36177:"RENDERBUFFER_GREEN_SIZE",36178:"RENDERBUFFER_BLUE_SIZE",36179:"RENDERBUFFER_ALPHA_SIZE",36180:"RENDERBUFFER_DEPTH_SIZE",36181:"RENDERBUFFER_STENCIL_SIZE",36194:"RGB565",36336:"LOW_FLOAT",36337:"MEDIUM_FLOAT",36338:"HIGH_FLOAT",36339:"LOW_INT",36340:"MEDIUM_INT",36341:"HIGH_INT",36346:"SHADER_COMPILER",36347:"MAX_VERTEX_UNIFORM_VECTORS",36348:"MAX_VARYING_VECTORS",36349:"MAX_FRAGMENT_UNIFORM_VECTORS",37440:"UNPACK_FLIP_Y_WEBGL",37441:"UNPACK_PREMULTIPLY_ALPHA_WEBGL",
37442:"CONTEXT_LOST_WEBGL",37443:"UNPACK_COLORSPACE_CONVERSION_WEBGL",37444:"BROWSER_DEFAULT_WEBGL"}},{}],242:[function(a,p,l){var m=a("./1.0/numbers");p.exports=function(a){return m[a]}},{"./1.0/numbers":241}],243:[function(a,p,l){function m(a,b,e,c){this.gl=a;this.shader=c;this.buffer=b;this.vao=e;this.pixelRatio=1;this.bounds=[[Infinity,Infinity,Infinity],[-Infinity,-Infinity,-Infinity]];this.clipBounds=[[-Infinity,-Infinity,-Infinity],[Infinity,Infinity,Infinity]];this.lineWidth=[1,1,1];this.capSize=
[10,10,10];this.lineCount=[0,0,0];this.lineOffset=[0,0,0];this.opacity=1;this.hasAlpha=!1}function k(a,b){for(var d=0;3>d;++d)a[0][d]=Math.min(a[0][d],b[d]),a[1][d]=Math.max(a[1][d],b[d])}function h(a,b,e,c){c=u[c];for(var d=0;d<c.length;++d){var g=c[d];a.push(b[0],b[1],b[2],e[0],e[1],e[2],e[3],g[0],g[1],g[2])}return c.length}p.exports=function(a){var d=a.gl,g=e(d),c=f(d,[{buffer:g,type:d.FLOAT,size:3,offset:0,stride:40},{buffer:g,type:d.FLOAT,size:4,offset:12,stride:40},{buffer:g,type:d.FLOAT,size:3,
offset:28,stride:40}]),h=b(d);h.attributes.position.location=0;h.attributes.color.location=1;h.attributes.offset.location=2;d=new m(d,g,c,h);d.update(a);return d};var e=a("gl-buffer"),f=a("gl-vao"),b=a("./shaders/index"),n=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1];a=m.prototype;a.isOpaque=function(){return!this.hasAlpha};a.isTransparent=function(){return this.hasAlpha};a.drawTransparent=a.draw=function(a){var b=this.gl,e=this.shader.uniforms;this.shader.bind();var c=e.view=a.view||n,f=e.projection=a.projection||
n;e.model=a.model||n;e.clipBounds=this.clipBounds;e.opacity=this.opacity;a=(a._ortho?2:1)*this.pixelRatio*(f[3]*c[12]+f[7]*c[13]+f[11]*c[14]+f[15]*c[15])/b.drawingBufferHeight;this.vao.bind();for(c=0;3>c;++c)b.lineWidth(this.lineWidth[c]*this.pixelRatio),e.capSize=this.capSize[c]*a,this.lineCount[c]&&b.drawArrays(b.LINES,this.lineOffset[c],this.lineCount[c]);this.vao.unbind()};var u=function(){for(var a=Array(3),b=0;3>b;++b){for(var e=[],c=1;2>=c;++c)for(var f=-1;1>=f;f+=2){var h=[0,0,0];h[(c+b)%
3]=f;e.push(h)}a[b]=e}return a}();a.update=function(a){a=a||{};"lineWidth"in a&&(this.lineWidth=a.lineWidth,Array.isArray(this.lineWidth)||(this.lineWidth=[this.lineWidth,this.lineWidth,this.lineWidth]));"capSize"in a&&(this.capSize=a.capSize,Array.isArray(this.capSize)||(this.capSize=[this.capSize,this.capSize,this.capSize]));this.hasAlpha=!1;"opacity"in a&&(this.opacity=+a.opacity,1>this.opacity&&(this.hasAlpha=!0));var b=a.color||[[0,0,0],[0,0,0],[0,0,0]],e=a.position;a=a.error;Array.isArray(b[0])||
(b=[b,b,b]);if(e&&a){var c=[],f=e.length,n=0;this.bounds=[[Infinity,Infinity,Infinity],[-Infinity,-Infinity,-Infinity]];this.lineCount=[0,0,0];for(var m=0;3>m;++m){this.lineOffset[m]=n;var r=0;a:for(;r<f;++r){for(var u=e[r],l=0;3>l;++l)if(isNaN(u[l])||!isFinite(u[l]))continue a;l=a[r];var p=b[m];Array.isArray(p[0])&&(p=b[r]);3===p.length?p=[p[0],p[1],p[2],1]:4===p.length&&(p=[p[0],p[1],p[2],p[3]],!this.hasAlpha&&1>p[3]&&(this.hasAlpha=!0));if(!isNaN(l[0][m])&&!isNaN(l[1][m])){if(0>l[0][m]){var q=
u.slice();q[m]+=l[0][m];c.push(u[0],u[1],u[2],p[0],p[1],p[2],p[3],0,0,0,q[0],q[1],q[2],p[0],p[1],p[2],p[3],0,0,0);k(this.bounds,q);n+=2+h(c,q,p,m)}0<l[1][m]&&(q=u.slice(),q[m]+=l[1][m],c.push(u[0],u[1],u[2],p[0],p[1],p[2],p[3],0,0,0,q[0],q[1],q[2],p[0],p[1],p[2],p[3],0,0,0),k(this.bounds,q),n+=2+h(c,q,p,m))}}this.lineCount[m]=n-this.lineOffset[m]}this.buffer.update(c)}};a.dispose=function(){this.shader.dispose();this.buffer.dispose();this.vao.dispose()}},{"./shaders/index":244,"gl-buffer":237,"gl-vao":319}],
244:[function(a,p,l){l=a("glslify");var m=a("gl-shader"),k=l(["precision highp float;\n#define GLSLIFY 1\n\nattribute vec3 position, offset;\nattribute vec4 color;\nuniform mat4 model, view, projection;\nuniform float capSize;\nvarying vec4 fragColor;\nvarying vec3 fragPosition;\n\nvoid main() {\n  vec4 worldPosition  \x3d model * vec4(position, 1.0);\n  worldPosition       \x3d (worldPosition / worldPosition.w) + vec4(capSize * offset, 0.0);\n  gl_Position         \x3d projection * view * worldPosition;\n  fragColor           \x3d color;\n  fragPosition        \x3d position;\n}"]),
h=l(["precision highp float;\n#define GLSLIFY 1\n\nbool outOfRange(float a, float b, float p) {\n  return ((p \x3e max(a, b)) || \n          (p \x3c min(a, b)));\n}\n\nbool outOfRange(vec2 a, vec2 b, vec2 p) {\n  return (outOfRange(a.x, b.x, p.x) ||\n          outOfRange(a.y, b.y, p.y));\n}\n\nbool outOfRange(vec3 a, vec3 b, vec3 p) {\n  return (outOfRange(a.x, b.x, p.x) ||\n          outOfRange(a.y, b.y, p.y) ||\n          outOfRange(a.z, b.z, p.z));\n}\n\nbool outOfRange(vec4 a, vec4 b, vec4 p) {\n  return outOfRange(a.xyz, b.xyz, p.xyz);\n}\n\nuniform vec3 clipBounds[2];\nuniform float opacity;\nvarying vec3 fragPosition;\nvarying vec4 fragColor;\n\nvoid main() {\n  if (\n    outOfRange(clipBounds[0], clipBounds[1], fragPosition) ||\n    fragColor.a * opacity \x3d\x3d 0.\n  ) discard;\n\n  gl_FragColor \x3d opacity * fragColor;\n}"]);
p.exports=function(a){return m(a,k,h,null,[{name:"position",type:"vec3"},{name:"color",type:"vec4"},{name:"offset",type:"vec3"}])}},{"gl-shader":297,glslify:401}],245:[function(a,p,l){function m(a){var b=a.getParameter(a.FRAMEBUFFER_BINDING),c=a.getParameter(a.RENDERBUFFER_BINDING);a=a.getParameter(a.TEXTURE_BINDING_2D);return[b,c,a]}function k(a,b){a.bindFramebuffer(a.FRAMEBUFFER,b[0]);a.bindRenderbuffer(a.RENDERBUFFER,b[1]);a.bindTexture(a.TEXTURE_2D,b[2])}function h(a){switch(a){case g:throw Error("gl-fbo: Framebuffer unsupported");
case c:throw Error("gl-fbo: Framebuffer incomplete attachment");case v:throw Error("gl-fbo: Framebuffer incomplete dimensions");case t:throw Error("gl-fbo: Framebuffer incomplete missing attachment");default:throw Error("gl-fbo: Framebuffer failed for unspecified reason");}}function e(a,b,c,d,e,g){if(!d)return null;b=r(a,b,c,e,d);b.magFilter=a.NEAREST;b.minFilter=a.NEAREST;b.mipSamples=1;b.bind();a.framebufferTexture2D(a.FRAMEBUFFER,g,a.TEXTURE_2D,b.handle,0);return b}function f(a,b,c,d,e){var g=
a.createRenderbuffer();a.bindRenderbuffer(a.RENDERBUFFER,g);a.renderbufferStorage(a.RENDERBUFFER,d,b,c);a.framebufferRenderbuffer(a.FRAMEBUFFER,e,a.RENDERBUFFER,g);return g}function b(a){var b=m(a.gl),c=a.gl,g=a.handle=c.createFramebuffer(),n=a._shape[0],t=a._shape[1],v=a.color.length,r=a._ext,u=a._useStencil,y=a._useDepth,l=a._colorType;c.bindFramebuffer(c.FRAMEBUFFER,g);for(g=0;g<v;++g)a.color[g]=e(c,n,t,l,c.RGBA,c.COLOR_ATTACHMENT0+g);0===v?(a._color_rb=f(c,n,t,c.RGBA4,c.COLOR_ATTACHMENT0),r&&
r.drawBuffersWEBGL(d[0])):1<v&&r.drawBuffersWEBGL(d[v]);(v=c.getExtension("WEBGL_depth_texture"))?u?a.depth=e(c,n,t,v.UNSIGNED_INT_24_8_WEBGL,c.DEPTH_STENCIL,c.DEPTH_STENCIL_ATTACHMENT):y&&(a.depth=e(c,n,t,c.UNSIGNED_SHORT,c.DEPTH_COMPONENT,c.DEPTH_ATTACHMENT)):y&&u?a._depth_rb=f(c,n,t,c.DEPTH_STENCIL,c.DEPTH_STENCIL_ATTACHMENT):y?a._depth_rb=f(c,n,t,c.DEPTH_COMPONENT16,c.DEPTH_ATTACHMENT):u&&(a._depth_rb=f(c,n,t,c.STENCIL_INDEX,c.STENCIL_ATTACHMENT));n=c.checkFramebufferStatus(c.FRAMEBUFFER);if(n!==
c.FRAMEBUFFER_COMPLETE){a._destroyed=!0;c.bindFramebuffer(c.FRAMEBUFFER,null);c.deleteFramebuffer(a.handle);a.handle=null;a.depth&&(a.depth.dispose(),a.depth=null);a._depth_rb&&(c.deleteRenderbuffer(a._depth_rb),a._depth_rb=null);for(g=0;g<a.color.length;++g)a.color[g].dispose(),a.color[g]=null;a._color_rb&&(c.deleteRenderbuffer(a._color_rb),a._color_rb=null);k(c,b);h(n)}k(c,b)}function n(a,c,d,e,g,f,h,k){this.gl=a;this._shape=[c|0,d|0];this._destroyed=!1;this._ext=k;this.color=Array(g);for(a=0;a<
g;++a)this.color[a]=null;this._depth_rb=this.depth=this._color_rb=null;this._colorType=e;this._useDepth=f;this._useStencil=h;var n=this;c=[c|0,d|0];Object.defineProperties(c,{0:{get:function(){return n._shape[0]},set:function(a){return n.width=a}},1:{get:function(){return n._shape[1]},set:function(a){return n.height=a}}});this._shapeVector=c;b(this)}function u(a,b,c){if(a._destroyed)throw Error("gl-fbo: Can't resize destroyed FBO");if(a._shape[0]!==b||a._shape[1]!==c){var d=a.gl,e=d.getParameter(d.MAX_RENDERBUFFER_SIZE);
if(0>b||b>e||0>c||c>e)throw Error("gl-fbo: Can't resize FBO, invalid dimensions");a._shape[0]=b;a._shape[1]=c;b=m(d);for(c=0;c<a.color.length;++c)a.color[c].shape=a._shape;a._color_rb&&(d.bindRenderbuffer(d.RENDERBUFFER,a._color_rb),d.renderbufferStorage(d.RENDERBUFFER,d.RGBA4,a._shape[0],a._shape[1]));a.depth&&(a.depth.shape=a._shape);a._depth_rb&&(d.bindRenderbuffer(d.RENDERBUFFER,a._depth_rb),a._useDepth&&a._useStencil?d.renderbufferStorage(d.RENDERBUFFER,d.DEPTH_STENCIL,a._shape[0],a._shape[1]):
a._useDepth?d.renderbufferStorage(d.RENDERBUFFER,d.DEPTH_COMPONENT16,a._shape[0],a._shape[1]):a._useStencil&&d.renderbufferStorage(d.RENDERBUFFER,d.STENCIL_INDEX,a._shape[0],a._shape[1]));d.bindFramebuffer(d.FRAMEBUFFER,a.handle);c=d.checkFramebufferStatus(d.FRAMEBUFFER);c!==d.FRAMEBUFFER_COMPLETE&&(a.dispose(),k(d,b),h(c));k(d,b)}}var r=a("gl-texture2d");p.exports=function(a,b,e,f){g||(g=a.FRAMEBUFFER_UNSUPPORTED,c=a.FRAMEBUFFER_INCOMPLETE_ATTACHMENT,v=a.FRAMEBUFFER_INCOMPLETE_DIMENSIONS,t=a.FRAMEBUFFER_INCOMPLETE_MISSING_ATTACHMENT);
var h=a.getExtension("WEBGL_draw_buffers");if(!d&&h){var k=a.getParameter(h.MAX_COLOR_ATTACHMENTS_WEBGL);d=Array(k+1);for(var m=0;m<=k;++m){for(var r=Array(k),u=0;u<m;++u)r[u]=a.COLOR_ATTACHMENT0+u;for(u=m;u<k;++u)r[u]=a.NONE;d[m]=r}}Array.isArray(b)&&(f=e,e=b[1]|0,b=b[0]|0);if("number"!==typeof b)throw Error("gl-fbo: Missing shape parameter");k=a.getParameter(a.MAX_RENDERBUFFER_SIZE);if(0>b||b>k||0>e||e>k)throw Error("gl-fbo: Parameters are too large for FBO");f=f||{};k=1;if("color"in f){k=Math.max(f.color|
0,0);if(0>k)throw Error("gl-fbo: Must specify a nonnegative number of colors");if(1<k){if(!h)throw Error("gl-fbo: Multiple draw buffer extension not supported");if(k>a.getParameter(h.MAX_COLOR_ATTACHMENTS_WEBGL))throw Error("gl-fbo: Context does not support "+k+" draw buffers");}}m=a.UNSIGNED_BYTE;r=a.getExtension("OES_texture_float");if(f.float&&0<k){if(!r)throw Error("gl-fbo: Context does not support floating point textures");m=a.FLOAT}else f.preferFloat&&0<k&&r&&(m=a.FLOAT);r=!0;"depth"in f&&(r=
!!f.depth);u=!1;"stencil"in f&&(u=!!f.stencil);return new n(a,b,e,m,k,r,u,h)};var d=null,g,c,v,t;a=n.prototype;Object.defineProperties(a,{shape:{get:function(){return this._destroyed?[0,0]:this._shapeVector},set:function(a){Array.isArray(a)||(a=[a|0,a|0]);if(2!==a.length)throw Error("gl-fbo: Shape vector must be length 2");var b=a[0]|0;a=a[1]|0;u(this,b,a);return[b,a]},enumerable:!1},width:{get:function(){return this._destroyed?0:this._shape[0]},set:function(a){a|=0;u(this,a,this._shape[1]);return a},
enumerable:!1},height:{get:function(){return this._destroyed?0:this._shape[1]},set:function(a){a|=0;u(this,this._shape[0],a);return a},enumerable:!1}});a.bind=function(){if(!this._destroyed){var a=this.gl;a.bindFramebuffer(a.FRAMEBUFFER,this.handle);a.viewport(0,0,this._shape[0],this._shape[1])}};a.dispose=function(){if(!this._destroyed){this._destroyed=!0;var a=this.gl;a.deleteFramebuffer(this.handle);this.handle=null;this.depth&&(this.depth.dispose(),this.depth=null);this._depth_rb&&(a.deleteRenderbuffer(this._depth_rb),
this._depth_rb=null);for(var b=0;b<this.color.length;++b)this.color[b].dispose(),this.color[b]=null;this._color_rb&&(a.deleteRenderbuffer(this._color_rb),this._color_rb=null)}}},{"gl-texture2d":314}],246:[function(a,p,l){var m=a("sprintf-js").sprintf,k=a("gl-constants/lookup"),h=a("glsl-shader-name"),e=a("add-line-numbers");p.exports=function(a,b,n){var f=h(b)||"of unknown name (see npm glsl-shader-name)",r="unknown type";void 0!==n&&(r=n===k.FRAGMENT_SHADER?"fragment":"vertex");n=m("Error compiling %s shader %s:\n",
r,f);f=m("%s%s",n,a);var d=a.split("\n");a={};for(r=0;r<d.length;r++){var g=d[r];if(""!==g&&"\x00"!==g){var c=parseInt(g.split(":")[2]);if(isNaN(c))throw Error(m("Could not parse error: %s",g));a[c]=g}}b=e(b).split("\n");for(r=0;r<b.length;r++)if(a[r+3]||a[r+2]||a[r+1])n+=b[r]+"\n",a[r+1]&&(d=a[r+1],d=d.substr(d.split(":",3).join(":").length+1).trim(),n+=m("^^^ %s\n\n",d));return{long:n.trim(),short:f.trim()}}},{"add-line-numbers":51,"gl-constants/lookup":242,"glsl-shader-name":393,"sprintf-js":512}],
247:[function(a,p,l){function m(a,b,e,c,f,h,k){this.plot=a;this.shader=b;this.pickShader=e;this.positionBuffer=c;this.weightBuffer=f;this.colorBuffer=h;this.idBuffer=k;this.xData=[];this.yData=[];this.shape=[0,0];this.bounds=[Infinity,Infinity,-Infinity,-Infinity];this.pickOffset=0}p.exports=function(a,d){var e=a.gl,c=f(e,n.vertex,n.fragment),h=f(e,n.pickVertex,n.pickFragment),k=b(e),r=b(e),u=b(e);e=b(e);c=new m(a,c,h,k,r,u,e);c.update(d);a.addObject(c);return c};var k=a("binary-search-bounds"),h=
a("iota-array"),e=a("typedarray-pool"),f=a("gl-shader"),b=a("gl-buffer"),n=a("./lib/shaders");a=m.prototype;var u=[0,0,1,0,0,1,1,0,1,1,0,1];a.draw=function(){var a=[1,0,0,0,1,0,0,0,1];return function(){var b=this.plot,e=this.shader,c=this.bounds,f=this.numVertices;if(!(0>=f)){var h=b.gl;b=b.dataBox;var k=c[3]-c[1],n=b[2]-b[0],m=b[3]-b[1];a[0]=2*(c[2]-c[0])/n;a[4]=2*k/m;a[6]=2*(c[0]-b[0])/n-1;a[7]=2*(c[1]-b[1])/m-1;e.bind();c=e.uniforms;c.viewTransform=a;c.shape=this.shape;e=e.attributes;this.positionBuffer.bind();
e.position.pointer();this.weightBuffer.bind();e.weight.pointer(h.UNSIGNED_BYTE,!1);this.colorBuffer.bind();e.color.pointer(h.UNSIGNED_BYTE,!0);h.drawArrays(h.TRIANGLES,0,f)}}}();a.drawPick=function(){var a=[1,0,0,0,1,0,0,0,1],b=[0,0,0,0];return function(d){var c=this.plot,e=this.pickShader,g=this.bounds,f=this.numVertices;if(!(0>=f)){var h=c.gl;c=c.dataBox;var k=g[3]-g[1],n=c[2]-c[0],m=c[3]-c[1];a[0]=2*(g[2]-g[0])/n;a[4]=2*k/m;a[6]=2*(g[0]-c[0])/n-1;a[7]=2*(g[1]-c[1])/m-1;for(g=0;4>g;++g)b[g]=d>>
8*g&255;this.pickOffset=d;e.bind();g=e.uniforms;g.viewTransform=a;g.pickOffset=b;g.shape=this.shape;e=e.attributes;this.positionBuffer.bind();e.position.pointer();this.weightBuffer.bind();e.weight.pointer(h.UNSIGNED_BYTE,!1);this.idBuffer.bind();e.pickId.pointer(h.UNSIGNED_BYTE,!1);h.drawArrays(h.TRIANGLES,0,f);return d+this.shape[0]*this.shape[1]}}}();a.pick=function(a,b,e){a=this.pickOffset;b=this.shape[0]*this.shape[1];if(e<a||e>=a+b)return null;e-=a;return{object:this,pointId:e,dataCoord:[this.xData[e%
this.shape[0]],this.yData[e/this.shape[0]|0]]}};a.update=function(a){a=a||{};var b=a.shape||[0,0],g=a.x||h(b[0]),c=a.y||h(b[1]),f=a.z||new Float32Array(b[0]*b[1]);this.xData=g;this.yData=c;var n=a.colorLevels||[0];a=a.colorValues||[0,0,0,1];var m=n.length,r=this.bounds,l=r[0]=g[0],p=r[1]=c[0],A=r[2]=g[g.length-1];r=r[3]=c[c.length-1];A=1/(A-l);r=1/(r-p);var q=b[0];b=b[1];this.shape=[q,b];var P=(q-1)*(b-1)*(u.length>>>1);this.numVertices=P;var J=e.mallocUint8(4*P),E=e.mallocFloat32(2*P),H=e.mallocUint8(2*
P);P=e.mallocUint32(P);for(var M=0,O=0;O<b-1;++O)for(var I=r*(c[O]-p),Q=r*(c[O+1]-p),N=0;N<q-1;++N)for(var L=A*(g[N]-l),R=A*(g[N+1]-l),w=0;w<u.length;w+=2){var x=u[w],T=u[w+1],Y=f[(O+T)*q+(N+x)],ia=k.le(n,Y);if(0>ia){ia=a[0];Y=a[1];var S=a[2];var W=a[3]}else if(ia===m-1)ia=a[4*m-4],Y=a[4*m-3],S=a[4*m-2],W=a[4*m-1];else{W=(Y-n[ia])/(n[ia+1]-n[ia]);var fa=1-W,z=4*ia,ha=4*(ia+1);ia=fa*a[z]+W*a[ha];Y=fa*a[z+1]+W*a[ha+1];S=fa*a[z+2]+W*a[ha+2];W=fa*a[z+3]+W*a[ha+3]}J[4*M]=255*ia;J[4*M+1]=255*Y;J[4*M+2]=
255*S;J[4*M+3]=255*W;E[2*M]=.5*L+.5*R;E[2*M+1]=.5*I+.5*Q;H[2*M]=x;H[2*M+1]=T;P[M]=O*q+N;M+=1}this.positionBuffer.update(E);this.weightBuffer.update(H);this.colorBuffer.update(J);this.idBuffer.update(P);e.free(E);e.free(J);e.free(H);e.free(P)};a.dispose=function(){this.shader.dispose();this.pickShader.dispose();this.positionBuffer.dispose();this.weightBuffer.dispose();this.colorBuffer.dispose();this.idBuffer.dispose();this.plot.removeObject(this)}},{"./lib/shaders":248,"binary-search-bounds":249,"gl-buffer":237,
"gl-shader":297,"iota-array":408,"typedarray-pool":529}],248:[function(a,p,l){a=a("glslify");p.exports={fragment:a(["precision lowp float;\n#define GLSLIFY 1\nvarying vec4 fragColor;\nvoid main() {\n  gl_FragColor \x3d vec4(fragColor.rgb * fragColor.a, fragColor.a);\n}\n"]),vertex:a(["precision mediump float;\n#define GLSLIFY 1\n\nattribute vec2 position;\nattribute vec4 color;\nattribute vec2 weight;\n\nuniform vec2 shape;\nuniform mat3 viewTransform;\n\nvarying vec4 fragColor;\n\nvoid main() {\n  vec3 vPosition \x3d viewTransform * vec3( position + (weight-.5)/(shape-1.) , 1.0);\n  fragColor \x3d color;\n  gl_Position \x3d vec4(vPosition.xy, 0, vPosition.z);\n}\n"]),
pickFragment:a(["precision mediump float;\n#define GLSLIFY 1\n\nvarying vec4 fragId;\nvarying vec2 vWeight;\n\nuniform vec2 shape;\nuniform vec4 pickOffset;\n\nvoid main() {\n  vec2 d \x3d step(.5, vWeight);\n  vec4 id \x3d fragId + pickOffset;\n  id.x +\x3d d.x + d.y*shape.x;\n\n  id.y +\x3d floor(id.x / 256.0);\n  id.x -\x3d floor(id.x / 256.0) * 256.0;\n\n  id.z +\x3d floor(id.y / 256.0);\n  id.y -\x3d floor(id.y / 256.0) * 256.0;\n\n  id.w +\x3d floor(id.z / 256.0);\n  id.z -\x3d floor(id.z / 256.0) * 256.0;\n\n  gl_FragColor \x3d id/255.;\n}\n"]),
pickVertex:a(["precision mediump float;\n#define GLSLIFY 1\n\nattribute vec2 position;\nattribute vec4 pickId;\nattribute vec2 weight;\n\nuniform vec2 shape;\nuniform mat3 viewTransform;\n\nvarying vec4 fragId;\nvarying vec2 vWeight;\n\nvoid main() {\n  vWeight \x3d weight;\n\n  fragId \x3d pickId;\n\n  vec3 vPosition \x3d viewTransform * vec3( position + (weight-.5)/(shape-1.) , 1.0);\n  gl_Position \x3d vec4(vPosition.xy, 0, vPosition.z);\n}\n"])}},{glslify:401}],249:[function(a,p,l){arguments[4][101][0].apply(l,
arguments)},{dup:101}],250:[function(a,p,l){p=a("glslify");var m=a("gl-shader"),k=p(["precision highp float;\n#define GLSLIFY 1\n\nattribute vec3 position, nextPosition;\nattribute float arcLength, lineWidth;\nattribute vec4 color;\n\nuniform vec2 screenShape;\nuniform float pixelRatio;\nuniform mat4 model, view, projection;\n\nvarying vec4 fragColor;\nvarying vec3 worldPosition;\nvarying float pixelArcLength;\n\nvec4 project(vec3 p) {\n  return projection * view * model * vec4(p, 1.0);\n}\n\nvoid main() {\n  vec4 startPoint \x3d project(position);\n  vec4 endPoint   \x3d project(nextPosition);\n\n  vec2 A \x3d startPoint.xy / startPoint.w;\n  vec2 B \x3d   endPoint.xy /   endPoint.w;\n\n  float clipAngle \x3d atan(\n    (B.y - A.y) * screenShape.y,\n    (B.x - A.x) * screenShape.x\n  );\n\n  vec2 offset \x3d 0.5 * pixelRatio * lineWidth * vec2(\n    sin(clipAngle),\n    -cos(clipAngle)\n  ) / screenShape;\n\n  gl_Position \x3d vec4(startPoint.xy + startPoint.w * offset, startPoint.zw);\n\n  worldPosition \x3d position;\n  pixelArcLength \x3d arcLength;\n  fragColor \x3d color;\n}\n"]),
h=p(["precision highp float;\n#define GLSLIFY 1\n\nbool outOfRange(float a, float b, float p) {\n  return ((p \x3e max(a, b)) || \n          (p \x3c min(a, b)));\n}\n\nbool outOfRange(vec2 a, vec2 b, vec2 p) {\n  return (outOfRange(a.x, b.x, p.x) ||\n          outOfRange(a.y, b.y, p.y));\n}\n\nbool outOfRange(vec3 a, vec3 b, vec3 p) {\n  return (outOfRange(a.x, b.x, p.x) ||\n          outOfRange(a.y, b.y, p.y) ||\n          outOfRange(a.z, b.z, p.z));\n}\n\nbool outOfRange(vec4 a, vec4 b, vec4 p) {\n  return outOfRange(a.xyz, b.xyz, p.xyz);\n}\n\nuniform vec3      clipBounds[2];\nuniform sampler2D dashTexture;\nuniform float     dashScale;\nuniform float     opacity;\n\nvarying vec3    worldPosition;\nvarying float   pixelArcLength;\nvarying vec4    fragColor;\n\nvoid main() {\n  if (\n    outOfRange(clipBounds[0], clipBounds[1], worldPosition) ||\n    fragColor.a * opacity \x3d\x3d 0.\n  ) discard;\n\n  float dashWeight \x3d texture2D(dashTexture, vec2(dashScale * pixelArcLength, 0)).r;\n  if(dashWeight \x3c 0.5) {\n    discard;\n  }\n  gl_FragColor \x3d fragColor * opacity;\n}\n"]),
e=p(["precision highp float;\n#define GLSLIFY 1\n\n#define FLOAT_MAX  1.70141184e38\n#define FLOAT_MIN  1.17549435e-38\n\nlowp vec4 encode_float_1540259130(highp float v) {\n  highp float av \x3d abs(v);\n\n  //Handle special cases\n  if(av \x3c FLOAT_MIN) {\n    return vec4(0.0, 0.0, 0.0, 0.0);\n  } else if(v \x3e FLOAT_MAX) {\n    return vec4(127.0, 128.0, 0.0, 0.0) / 255.0;\n  } else if(v \x3c -FLOAT_MAX) {\n    return vec4(255.0, 128.0, 0.0, 0.0) / 255.0;\n  }\n\n  highp vec4 c \x3d vec4(0,0,0,0);\n\n  //Compute exponent and mantissa\n  highp float e \x3d floor(log2(av));\n  highp float m \x3d av * pow(2.0, -e) - 1.0;\n  \n  //Unpack mantissa\n  c[1] \x3d floor(128.0 * m);\n  m -\x3d c[1] / 128.0;\n  c[2] \x3d floor(32768.0 * m);\n  m -\x3d c[2] / 32768.0;\n  c[3] \x3d floor(8388608.0 * m);\n  \n  //Unpack exponent\n  highp float ebias \x3d e + 127.0;\n  c[0] \x3d floor(ebias / 2.0);\n  ebias -\x3d c[0] * 2.0;\n  c[1] +\x3d floor(ebias) * 128.0; \n\n  //Unpack sign bit\n  c[0] +\x3d 128.0 * step(0.0, -v);\n\n  //Scale back to range\n  return c / 255.0;\n}\n\nbool outOfRange(float a, float b, float p) {\n  return ((p \x3e max(a, b)) || \n          (p \x3c min(a, b)));\n}\n\nbool outOfRange(vec2 a, vec2 b, vec2 p) {\n  return (outOfRange(a.x, b.x, p.x) ||\n          outOfRange(a.y, b.y, p.y));\n}\n\nbool outOfRange(vec3 a, vec3 b, vec3 p) {\n  return (outOfRange(a.x, b.x, p.x) ||\n          outOfRange(a.y, b.y, p.y) ||\n          outOfRange(a.z, b.z, p.z));\n}\n\nbool outOfRange(vec4 a, vec4 b, vec4 p) {\n  return outOfRange(a.xyz, b.xyz, p.xyz);\n}\n\nuniform float pickId;\nuniform vec3 clipBounds[2];\n\nvarying vec3 worldPosition;\nvarying float pixelArcLength;\nvarying vec4 fragColor;\n\nvoid main() {\n  if (outOfRange(clipBounds[0], clipBounds[1], worldPosition)) discard;\n\n  gl_FragColor \x3d vec4(pickId/255.0, encode_float_1540259130(pixelArcLength).xyz);\n}"]),
f=[{name:"position",type:"vec3"},{name:"nextPosition",type:"vec3"},{name:"arcLength",type:"float"},{name:"lineWidth",type:"float"},{name:"color",type:"vec4"}];l.createShader=function(a){return m(a,k,h,null,f)};l.createPickShader=function(a){return m(a,k,e,null,f)}},{"gl-shader":297,glslify:401}],251:[function(a,p,l){function m(a){for(var b=[[-1E6,-1E6,-1E6],[1E6,1E6,1E6]],c=0;3>c;++c)b[0][c]=Math.max(a[0][c],b[0][c]),b[1][c]=Math.min(a[1][c],b[1][c]);return b}function k(a,b,c,d){this.arcLength=a;
this.position=b;this.index=c;this.dataCoordinate=d}function h(a,b,c,d,e,g){this.gl=a;this.shader=b;this.pickShader=c;this.buffer=d;this.vao=e;this.clipBounds=[[-Infinity,-Infinity,-Infinity],[Infinity,Infinity,Infinity]];this.points=[];this.arcLength=[];this.vertexCount=0;this.bounds=[[0,0,0],[0,0,0]];this.pickId=0;this.lineWidth=1;this.texture=g;this.opacity=this.dashScale=1;this.hasAlpha=!1;this.dirty=!0;this.pixelRatio=1}p.exports=function(a){var c=a.gl||a.scene&&a.scene.gl,k=d(c);k.attributes.position.location=
0;k.attributes.nextPosition.location=1;k.attributes.arcLength.location=2;k.attributes.lineWidth.location=3;k.attributes.color.location=4;var n=g(c);n.attributes.position.location=0;n.attributes.nextPosition.location=1;n.attributes.arcLength.location=2;n.attributes.lineWidth.location=3;n.attributes.color.location=4;for(var m=e(c),v=f(c,[{buffer:m,size:3,offset:0,stride:48},{buffer:m,size:3,offset:12,stride:48},{buffer:m,size:1,offset:24,stride:48},{buffer:m,size:1,offset:28,stride:48},{buffer:m,size:4,
offset:32,stride:48}]),u=r(Array(1024),[256,1,4]),l=0;1024>l;++l)u.data[l]=255;u=b(c,u);u.wrap=c.REPEAT;c=new h(c,k,n,m,v,u);c.update(a);return c};var e=a("gl-buffer"),f=a("gl-vao"),b=a("gl-texture2d"),n=a("glsl-read-float"),u=a("binary-search-bounds"),r=a("ndarray");a=a("./lib/shaders");var d=a.createShader,g=a.createPickShader,c=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1];a=h.prototype;a.isTransparent=function(){return this.hasAlpha};a.isOpaque=function(){return!this.hasAlpha};a.pickSlots=1;a.setPickBase=
function(a){this.pickId=a};a.drawTransparent=a.draw=function(a){if(this.vertexCount){var b=this.gl,d=this.shader,e=this.vao;d.bind();d.uniforms={model:a.model||c,view:a.view||c,projection:a.projection||c,clipBounds:m(this.clipBounds),dashTexture:this.texture.bind(),dashScale:this.dashScale/this.arcLength[this.arcLength.length-1],opacity:this.opacity,screenShape:[b.drawingBufferWidth,b.drawingBufferHeight],pixelRatio:this.pixelRatio};e.bind();e.draw(b.TRIANGLE_STRIP,this.vertexCount);e.unbind()}};
a.drawPick=function(a){if(this.vertexCount){var b=this.gl,d=this.pickShader,e=this.vao;d.bind();d.uniforms={model:a.model||c,view:a.view||c,projection:a.projection||c,pickId:this.pickId,clipBounds:m(this.clipBounds),screenShape:[b.drawingBufferWidth,b.drawingBufferHeight],pixelRatio:this.pixelRatio};e.bind();e.draw(b.TRIANGLE_STRIP,this.vertexCount);e.unbind()}};a.update=function(a){var b;this.dirty=!0;var c=!!a.connectGaps;"dashScale"in a&&(this.dashScale=a.dashScale);this.hasAlpha=!1;"opacity"in
a&&(this.opacity=+a.opacity,1>this.opacity&&(this.hasAlpha=!0));var d=[],e=[],g=[],f=0,h=0,k=[[Infinity,Infinity,Infinity],[-Infinity,-Infinity,-Infinity]],n=a.position||a.positions;if(n){var m=a.color||a.colors||[0,0,0,1],v=a.lineWidth||1,l=!1;var p=1;a:for(;p<n.length;++p){var q=n[p-1],Q=n[p];e.push(f);g.push(q.slice());for(b=0;3>b;++b){if(isNaN(q[b])||isNaN(Q[b])||!isFinite(q[b])||!isFinite(Q[b])){if(!c&&0<d.length){for(l=0;24>l;++l)d.push(d[d.length-12]);h+=2;l=!0}continue a}k[0][b]=Math.min(k[0][b],
q[b],Q[b]);k[1][b]=Math.max(k[1][b],q[b],Q[b])}if(Array.isArray(m[0])){var N=m.length>p-1?m[p-1]:0<m.length?m[m.length-1]:[0,0,0,1];var L=m.length>p?m[p]:0<m.length?m[m.length-1]:[0,0,0,1]}else N=L=m;3===N.length&&(N=[N[0],N[1],N[2],1]);3===L.length&&(L=[L[0],L[1],L[2],1]);!this.hasAlpha&&1>N[3]&&(this.hasAlpha=!0);var R=Array.isArray(v)?v.length>p-1?v[p-1]:0<v.length?v[v.length-1]:[0,0,0,1]:v;var w=f;b=f;for(var x=f=0;3>x;++x){var T=q[x]-Q[x];f+=T*T}f=b+Math.sqrt(f);if(l){for(b=0;2>b;++b)d.push(q[0],
q[1],q[2],Q[0],Q[1],Q[2],w,R,N[0],N[1],N[2],N[3]);h+=2;l=!1}d.push(q[0],q[1],q[2],Q[0],Q[1],Q[2],w,R,N[0],N[1],N[2],N[3],q[0],q[1],q[2],Q[0],Q[1],Q[2],w,-R,N[0],N[1],N[2],N[3],Q[0],Q[1],Q[2],q[0],q[1],q[2],f,-R,L[0],L[1],L[2],L[3],Q[0],Q[1],Q[2],q[0],q[1],q[2],f,R,L[0],L[1],L[2],L[3]);h+=4}}this.buffer.update(d);e.push(f);g.push(n[n.length-1].slice());this.bounds=k;this.vertexCount=h;this.points=g;this.arcLength=e;if("dashes"in a){a=a.dashes.slice();a.unshift(0);for(p=1;p<a.length;++p)a[p]=a[p-1]+
a[p];c=r(Array(1024),[256,1,4]);for(p=0;256>p;++p){for(b=0;4>b;++b)c.set(p,0,b,0);u.le(a,a[a.length-1]*p/255)&1?c.set(p,0,0,0):c.set(p,0,0,255)}this.texture.setPixels(c)}};a.dispose=function(){this.shader.dispose();this.vao.dispose();this.buffer.dispose()};a.pick=function(a){if(!a||a.id!==this.pickId)return null;a=n(a.value[0],a.value[1],a.value[2],0);var b=u.le(this.arcLength,a);if(0>b)return null;if(b===this.arcLength.length-1)return new k(this.arcLength[this.arcLength.length-1],this.points[this.points.length-
1].slice(),b);for(var c=this.points[b],d=this.points[Math.min(b+1,this.points.length-1)],e=(a-this.arcLength[b])/(this.arcLength[b+1]-this.arcLength[b]),g=1-e,f=[0,0,0],h=0;3>h;++h)f[h]=g*c[h]+e*d[h];b=Math.min(.5>e?b:b+1,this.points.length-1);return new k(a,f,b,this.points[b])}},{"./lib/shaders":250,"binary-search-bounds":252,"gl-buffer":237,"gl-texture2d":314,"gl-vao":319,"glsl-read-float":392,ndarray:442}],252:[function(a,p,l){arguments[4][101][0].apply(l,arguments)},{dup:101}],253:[function(a,
p,l){p.exports=function(a,k){var h=k[0],e=k[1],f=k[2];k=k[3];var b=h*k-f*e;if(!b)return null;b=1/b;a[0]=k*b;a[1]=-e*b;a[2]=-f*b;a[3]=h*b;return a}},{}],254:[function(a,p,l){p.exports=function(a,k){var h=k[0],e=k[1],f=k[2],b=k[3],n=k[4],m=k[5],r=k[6],d=k[7];k=k[8];var g=k*n-m*d,c=-k*b+m*r,v=d*b-n*r,t=h*g+e*c+f*v;if(!t)return null;t=1/t;a[0]=g*t;a[1]=(-k*e+f*d)*t;a[2]=(m*e-f*n)*t;a[3]=c*t;a[4]=(k*h-f*r)*t;a[5]=(-m*h+f*b)*t;a[6]=v*t;a[7]=(-d*h+e*r)*t;a[8]=(n*h-e*b)*t;return a}},{}],255:[function(a,p,
l){p.exports=function(a){var k=new Float32Array(16);k[0]=a[0];k[1]=a[1];k[2]=a[2];k[3]=a[3];k[4]=a[4];k[5]=a[5];k[6]=a[6];k[7]=a[7];k[8]=a[8];k[9]=a[9];k[10]=a[10];k[11]=a[11];k[12]=a[12];k[13]=a[13];k[14]=a[14];k[15]=a[15];return k}},{}],256:[function(a,p,l){p.exports=function(){var a=new Float32Array(16);a[0]=1;a[1]=0;a[2]=0;a[3]=0;a[4]=0;a[5]=1;a[6]=0;a[7]=0;a[8]=0;a[9]=0;a[10]=1;a[11]=0;a[12]=0;a[13]=0;a[14]=0;a[15]=1;return a}},{}],257:[function(a,p,l){p.exports=function(a){var k=a[0],h=a[1],
e=a[2],f=a[3],b=a[4],n=a[5],m=a[6],r=a[7],d=a[8],g=a[9],c=a[10],v=a[11],t=a[12],y=a[13],l=a[14];a=a[15];return(k*n-h*b)*(c*a-v*l)-(k*m-e*b)*(g*a-v*y)+(k*r-f*b)*(g*l-c*y)+(h*m-e*n)*(d*a-v*t)-(h*r-f*n)*(d*l-c*t)+(e*r-f*m)*(d*y-g*t)}},{}],258:[function(a,p,l){p.exports=function(a,k){var h=k[0],e=k[1],f=k[2];k=k[3];var b=h+h,n=e+e,m=f+f;h*=b;var r=e*b;e*=n;var d=f*b,g=f*n;f*=m;b*=k;n*=k;k*=m;a[0]=1-e-f;a[1]=r+k;a[2]=d-n;a[3]=0;a[4]=r-k;a[5]=1-h-f;a[6]=g+b;a[7]=0;a[8]=d+n;a[9]=g-b;a[10]=1-h-e;a[11]=0;
a[12]=0;a[13]=0;a[14]=0;a[15]=1;return a}},{}],259:[function(a,p,l){p.exports=function(a,k,h){var e=k[0],f=k[1],b=k[2],n=k[3],m=e+e,r=f+f,d=b+b;k=e*m;var g=e*r;e*=d;var c=f*r;f*=d;b*=d;m*=n;r*=n;n*=d;a[0]=1-(c+b);a[1]=g+n;a[2]=e-r;a[3]=0;a[4]=g-n;a[5]=1-(k+b);a[6]=f+m;a[7]=0;a[8]=e+r;a[9]=f-m;a[10]=1-(k+c);a[11]=0;a[12]=h[0];a[13]=h[1];a[14]=h[2];a[15]=1;return a}},{}],260:[function(a,p,l){p.exports=function(a){a[0]=1;a[1]=0;a[2]=0;a[3]=0;a[4]=0;a[5]=1;a[6]=0;a[7]=0;a[8]=0;a[9]=0;a[10]=1;a[11]=0;
a[12]=0;a[13]=0;a[14]=0;a[15]=1;return a}},{}],261:[function(a,p,l){p.exports=function(a,k){var h=k[0],e=k[1],f=k[2],b=k[3],n=k[4],m=k[5],r=k[6],d=k[7],g=k[8],c=k[9],v=k[10],t=k[11],y=k[12],l=k[13],p=k[14];k=k[15];var q=h*m-e*n,A=h*r-f*n,C=h*d-b*n,P=e*r-f*m,J=e*d-b*m,E=f*d-b*r,H=g*l-c*y,M=g*p-v*y,O=g*k-t*y,I=c*p-v*l,Q=c*k-t*l,N=v*k-t*p,L=q*N-A*Q+C*I+P*O-J*M+E*H;if(!L)return null;L=1/L;a[0]=(m*N-r*Q+d*I)*L;a[1]=(f*Q-e*N-b*I)*L;a[2]=(l*E-p*J+k*P)*L;a[3]=(v*J-c*E-t*P)*L;a[4]=(r*O-n*N-d*M)*L;a[5]=(h*
N-f*O+b*M)*L;a[6]=(p*C-y*E-k*A)*L;a[7]=(g*E-v*C+t*A)*L;a[8]=(n*Q-m*O+d*H)*L;a[9]=(e*O-h*Q-b*H)*L;a[10]=(y*J-l*C+k*q)*L;a[11]=(c*C-g*J-t*q)*L;a[12]=(m*M-n*I-r*H)*L;a[13]=(h*I-e*M+f*H)*L;a[14]=(l*A-y*P-p*q)*L;a[15]=(g*P-c*A+v*q)*L;return a}},{}],262:[function(a,p,l){var m=a("./identity");p.exports=function(a,h,e,f){var b=h[0],k=h[1];h=h[2];var u=f[0];var r=f[1];var d=f[2];var g=e[0];f=e[1];var c=e[2];if(1E-6>Math.abs(b-g)&&1E-6>Math.abs(k-f)&&1E-6>Math.abs(h-c))return m(a);e=b-g;f=k-f;g=h-c;var v=1/
Math.sqrt(e*e+f*f+g*g);e*=v;f*=v;g*=v;c=r*g-d*f;d=d*e-u*g;u=u*f-r*e;(v=Math.sqrt(c*c+d*d+u*u))?(v=1/v,c*=v,d*=v,u*=v):u=d=c=0;r=f*u-g*d;var t=g*c-e*u;var y=e*d-f*c;(v=Math.sqrt(r*r+t*t+y*y))?(v=1/v,r*=v,t*=v,y*=v):y=t=r=0;a[0]=c;a[1]=r;a[2]=e;a[3]=0;a[4]=d;a[5]=t;a[6]=f;a[7]=0;a[8]=u;a[9]=y;a[10]=g;a[11]=0;a[12]=-(c*b+d*k+u*h);a[13]=-(r*b+t*k+y*h);a[14]=-(e*b+f*k+g*h);a[15]=1;return a}},{"./identity":260}],263:[function(a,p,l){p.exports=function(a,k,h){var e=k[0],f=k[1],b=k[2],n=k[3],m=k[4],r=k[5],
d=k[6],g=k[7],c=k[8],v=k[9],t=k[10],y=k[11],l=k[12],p=k[13],q=k[14];k=k[15];var A=h[0],C=h[1],P=h[2],J=h[3];a[0]=A*e+C*m+P*c+J*l;a[1]=A*f+C*r+P*v+J*p;a[2]=A*b+C*d+P*t+J*q;a[3]=A*n+C*g+P*y+J*k;A=h[4];C=h[5];P=h[6];J=h[7];a[4]=A*e+C*m+P*c+J*l;a[5]=A*f+C*r+P*v+J*p;a[6]=A*b+C*d+P*t+J*q;a[7]=A*n+C*g+P*y+J*k;A=h[8];C=h[9];P=h[10];J=h[11];a[8]=A*e+C*m+P*c+J*l;a[9]=A*f+C*r+P*v+J*p;a[10]=A*b+C*d+P*t+J*q;a[11]=A*n+C*g+P*y+J*k;A=h[12];C=h[13];P=h[14];J=h[15];a[12]=A*e+C*m+P*c+J*l;a[13]=A*f+C*r+P*v+J*p;a[14]=
A*b+C*d+P*t+J*q;a[15]=A*n+C*g+P*y+J*k;return a}},{}],264:[function(a,p,l){p.exports=function(a,k,h,e,f,b,n){var m=1/(k-h),r=1/(e-f),d=1/(b-n);a[0]=-2*m;a[1]=0;a[2]=0;a[3]=0;a[4]=0;a[5]=-2*r;a[6]=0;a[7]=0;a[8]=0;a[9]=0;a[10]=2*d;a[11]=0;a[12]=(k+h)*m;a[13]=(f+e)*r;a[14]=(n+b)*d;a[15]=1;return a}},{}],265:[function(a,p,l){p.exports=function(a,k,h,e,f){k=1/Math.tan(k/2);var b=1/(e-f);a[0]=k/h;a[1]=0;a[2]=0;a[3]=0;a[4]=0;a[5]=k;a[6]=0;a[7]=0;a[8]=0;a[9]=0;a[10]=(f+e)*b;a[11]=-1;a[12]=0;a[13]=0;a[14]=
2*f*e*b;a[15]=0;return a}},{}],266:[function(a,p,l){p.exports=function(a,k,h,e){var f=e[0],b=e[1];e=e[2];var n=Math.sqrt(f*f+b*b+e*e);if(1E-6>Math.abs(n))return null;n=1/n;f*=n;b*=n;e*=n;var m=Math.sin(h);var r=Math.cos(h);var d=1-r;h=k[0];n=k[1];var g=k[2];var c=k[3];var v=k[4];var t=k[5];var y=k[6];var l=k[7];var p=k[8];var q=k[9];var A=k[10];var C=k[11];var P=f*f*d+r;var J=b*f*d+e*m;var E=e*f*d-b*m;var H=f*b*d-e*m;var M=b*b*d+r;var O=e*b*d+f*m;var I=f*e*d+b*m;f=b*e*d-f*m;b=e*e*d+r;a[0]=h*P+v*J+
p*E;a[1]=n*P+t*J+q*E;a[2]=g*P+y*J+A*E;a[3]=c*P+l*J+C*E;a[4]=h*H+v*M+p*O;a[5]=n*H+t*M+q*O;a[6]=g*H+y*M+A*O;a[7]=c*H+l*M+C*O;a[8]=h*I+v*f+p*b;a[9]=n*I+t*f+q*b;a[10]=g*I+y*f+A*b;a[11]=c*I+l*f+C*b;k!==a&&(a[12]=k[12],a[13]=k[13],a[14]=k[14],a[15]=k[15]);return a}},{}],267:[function(a,p,l){p.exports=function(a,k,h){var e=Math.sin(h);h=Math.cos(h);var f=k[4],b=k[5],n=k[6],m=k[7],r=k[8],d=k[9],g=k[10],c=k[11];k!==a&&(a[0]=k[0],a[1]=k[1],a[2]=k[2],a[3]=k[3],a[12]=k[12],a[13]=k[13],a[14]=k[14],a[15]=k[15]);
a[4]=f*h+r*e;a[5]=b*h+d*e;a[6]=n*h+g*e;a[7]=m*h+c*e;a[8]=r*h-f*e;a[9]=d*h-b*e;a[10]=g*h-n*e;a[11]=c*h-m*e;return a}},{}],268:[function(a,p,l){p.exports=function(a,k,h){var e=Math.sin(h);h=Math.cos(h);var f=k[0],b=k[1],n=k[2],m=k[3],r=k[8],d=k[9],g=k[10],c=k[11];k!==a&&(a[4]=k[4],a[5]=k[5],a[6]=k[6],a[7]=k[7],a[12]=k[12],a[13]=k[13],a[14]=k[14],a[15]=k[15]);a[0]=f*h-r*e;a[1]=b*h-d*e;a[2]=n*h-g*e;a[3]=m*h-c*e;a[8]=f*e+r*h;a[9]=b*e+d*h;a[10]=n*e+g*h;a[11]=m*e+c*h;return a}},{}],269:[function(a,p,l){p.exports=
function(a,k,h){var e=Math.sin(h);h=Math.cos(h);var f=k[0],b=k[1],n=k[2],m=k[3],r=k[4],d=k[5],g=k[6],c=k[7];k!==a&&(a[8]=k[8],a[9]=k[9],a[10]=k[10],a[11]=k[11],a[12]=k[12],a[13]=k[13],a[14]=k[14],a[15]=k[15]);a[0]=f*h+r*e;a[1]=b*h+d*e;a[2]=n*h+g*e;a[3]=m*h+c*e;a[4]=r*h-f*e;a[5]=d*h-b*e;a[6]=g*h-n*e;a[7]=c*h-m*e;return a}},{}],270:[function(a,p,l){p.exports=function(a,k,h){var e=h[0],f=h[1];h=h[2];a[0]=k[0]*e;a[1]=k[1]*e;a[2]=k[2]*e;a[3]=k[3]*e;a[4]=k[4]*f;a[5]=k[5]*f;a[6]=k[6]*f;a[7]=k[7]*f;a[8]=
k[8]*h;a[9]=k[9]*h;a[10]=k[10]*h;a[11]=k[11]*h;a[12]=k[12];a[13]=k[13];a[14]=k[14];a[15]=k[15];return a}},{}],271:[function(a,p,l){p.exports=function(a,k,h){var e=h[0],f=h[1];h=h[2];if(k===a)a[12]=k[0]*e+k[4]*f+k[8]*h+k[12],a[13]=k[1]*e+k[5]*f+k[9]*h+k[13],a[14]=k[2]*e+k[6]*f+k[10]*h+k[14],a[15]=k[3]*e+k[7]*f+k[11]*h+k[15];else{var b=k[0];var n=k[1];var m=k[2];var r=k[3];var d=k[4];var g=k[5];var c=k[6];var v=k[7];var t=k[8];var y=k[9];var l=k[10];var p=k[11];a[0]=b;a[1]=n;a[2]=m;a[3]=r;a[4]=d;a[5]=
g;a[6]=c;a[7]=v;a[8]=t;a[9]=y;a[10]=l;a[11]=p;a[12]=b*e+d*f+t*h+k[12];a[13]=n*e+g*f+y*h+k[13];a[14]=m*e+c*f+l*h+k[14];a[15]=r*e+v*f+p*h+k[15]}return a}},{}],272:[function(a,p,l){p.exports=function(a,k){if(a===k){var h=k[1],e=k[2],f=k[3],b=k[6],n=k[7],m=k[11];a[1]=k[4];a[2]=k[8];a[3]=k[12];a[4]=h;a[6]=k[9];a[7]=k[13];a[8]=e;a[9]=b;a[11]=k[14];a[12]=f;a[13]=n;a[14]=m}else a[0]=k[0],a[1]=k[4],a[2]=k[8],a[3]=k[12],a[4]=k[1],a[5]=k[5],a[6]=k[9],a[7]=k[13],a[8]=k[2],a[9]=k[6],a[10]=k[10],a[11]=k[14],a[12]=
k[3],a[13]=k[7],a[14]=k[11],a[15]=k[15];return a}},{}],273:[function(a,p,l){p.exports=function(a,f){switch(f.length){case 0:break;case 1:a[0]=1/f[0];break;case 4:m(a,f);break;case 9:k(a,f);break;case 16:h(a,f);break;default:throw Error("currently supports matrices up to 4x4");}return a};var m=a("gl-mat2/invert"),k=a("gl-mat3/invert"),h=a("gl-mat4/invert")},{"gl-mat2/invert":253,"gl-mat3/invert":254,"gl-mat4/invert":261}],274:[function(a,p,l){function m(a,f){for(var b=[0,0,0,0],e=0;4>e;++e)for(var h=
0;4>h;++h)b[h]+=a[4*e+h]*f[e];return b}var k=a("barycentric"),h=a("polytope-closest-point/lib/closest_point_2d.js");p.exports=function(a,f,b,n,u,r){if(1===a.length)return[0,a[0].slice()];for(var d=Array(a.length),e=0;e<a.length;++e){var c=e,v=a[e],t=r;v=m(u,m(n,m(b,[v[0],v[1],v[2],1])));for(var y=0;3>y;++y)v[y]/=v[3];d[c]=[.5*t[0]*(1+v[0]),.5*t[1]*(1-v[1])]}b=0;n=Infinity;for(e=0;e<d.length;++e){for(r=u=0;2>r;++r)u+=Math.pow(d[e][r]-f[r],2);u<n&&(n=u,b=e)}if(2===d.length){for(u=n=e=0;2>u;++u)e+=Math.pow(f[u]-
d[0][u],2),n+=Math.pow(f[u]-d[1][u],2);e=Math.sqrt(e);n=Math.sqrt(n);f=1E-6>e+n?[1,0]:[n/(e+n),e/(n+e)]}else 3===d.length?(e=[0,0],h(d[0],d[1],d[2],f,e),f=k(d,e)):f=[];for(e=d=0;3>e;++e){if(-.001>f[e]||1.0001<f[e])return null;d+=f[e]}if(.001<Math.abs(d-1))return null;d=[0,0,0];for(e=0;e<a.length;++e)for(n=a[e],u=f[e],r=0;3>r;++r)d[r]+=u*n[r];return[b,d,f]}},{barycentric:63,"polytope-closest-point/lib/closest_point_2d.js":473}],275:[function(a,p,l){var m=a("glslify");a=m(["precision highp float;\n#define GLSLIFY 1\n\nattribute vec3 position, normal;\nattribute vec4 color;\nattribute vec2 uv;\n\nuniform mat4 model\n           , view\n           , projection\n           , inverseModel;\nuniform vec3 eyePosition\n           , lightPosition;\n\nvarying vec3 f_normal\n           , f_lightDirection\n           , f_eyeDirection\n           , f_data;\nvarying vec4 f_color;\nvarying vec2 f_uv;\n\nvec4 project(vec3 p) {\n  return projection * view * model * vec4(p, 1.0);\n}\n\nvoid main() {\n  gl_Position      \x3d project(position);\n\n  //Lighting geometry parameters\n  vec4 cameraCoordinate \x3d view * vec4(position , 1.0);\n  cameraCoordinate.xyz /\x3d cameraCoordinate.w;\n  f_lightDirection \x3d lightPosition - cameraCoordinate.xyz;\n  f_eyeDirection   \x3d eyePosition - cameraCoordinate.xyz;\n  f_normal  \x3d normalize((vec4(normal,0) * inverseModel).xyz);\n\n  f_color          \x3d color;\n  f_data           \x3d position;\n  f_uv             \x3d uv;\n}\n"]);
p=m(["#extension GL_OES_standard_derivatives : enable\n\nprecision highp float;\n#define GLSLIFY 1\n\nfloat beckmannDistribution(float x, float roughness) {\n  float NdotH \x3d max(x, 0.0001);\n  float cos2Alpha \x3d NdotH * NdotH;\n  float tan2Alpha \x3d (cos2Alpha - 1.0) / cos2Alpha;\n  float roughness2 \x3d roughness * roughness;\n  float denom \x3d 3.141592653589793 * roughness2 * cos2Alpha * cos2Alpha;\n  return exp(tan2Alpha / roughness2) / denom;\n}\n\nfloat cookTorranceSpecular(\n  vec3 lightDirection,\n  vec3 viewDirection,\n  vec3 surfaceNormal,\n  float roughness,\n  float fresnel) {\n\n  float VdotN \x3d max(dot(viewDirection, surfaceNormal), 0.0);\n  float LdotN \x3d max(dot(lightDirection, surfaceNormal), 0.0);\n\n  //Half angle vector\n  vec3 H \x3d normalize(lightDirection + viewDirection);\n\n  //Geometric term\n  float NdotH \x3d max(dot(surfaceNormal, H), 0.0);\n  float VdotH \x3d max(dot(viewDirection, H), 0.000001);\n  float LdotH \x3d max(dot(lightDirection, H), 0.000001);\n  float G1 \x3d (2.0 * NdotH * VdotN) / VdotH;\n  float G2 \x3d (2.0 * NdotH * LdotN) / LdotH;\n  float G \x3d min(1.0, min(G1, G2));\n  \n  //Distribution term\n  float D \x3d beckmannDistribution(NdotH, roughness);\n\n  //Fresnel term\n  float F \x3d pow(1.0 - VdotN, fresnel);\n\n  //Multiply terms and done\n  return  G * F * D / max(3.14159265 * VdotN, 0.000001);\n}\n\n//#pragma glslify: beckmann \x3d require(glsl-specular-beckmann) // used in gl-surface3d\n\nbool outOfRange(float a, float b, float p) {\n  return ((p \x3e max(a, b)) || \n          (p \x3c min(a, b)));\n}\n\nbool outOfRange(vec2 a, vec2 b, vec2 p) {\n  return (outOfRange(a.x, b.x, p.x) ||\n          outOfRange(a.y, b.y, p.y));\n}\n\nbool outOfRange(vec3 a, vec3 b, vec3 p) {\n  return (outOfRange(a.x, b.x, p.x) ||\n          outOfRange(a.y, b.y, p.y) ||\n          outOfRange(a.z, b.z, p.z));\n}\n\nbool outOfRange(vec4 a, vec4 b, vec4 p) {\n  return outOfRange(a.xyz, b.xyz, p.xyz);\n}\n\nuniform vec3 clipBounds[2];\nuniform float roughness\n            , fresnel\n            , kambient\n            , kdiffuse\n            , kspecular\n            , opacity;\nuniform sampler2D texture;\n\nvarying vec3 f_normal\n           , f_lightDirection\n           , f_eyeDirection\n           , f_data;\nvarying vec4 f_color;\nvarying vec2 f_uv;\n\nvoid main() {\n  if (outOfRange(clipBounds[0], clipBounds[1], f_data)) discard;\n\n  vec3 N \x3d normalize(f_normal);\n  vec3 L \x3d normalize(f_lightDirection);\n  vec3 V \x3d normalize(f_eyeDirection);\n\n  if(gl_FrontFacing) {\n    N \x3d -N;\n  }\n\n  float specular \x3d min(1.0, max(0.0, cookTorranceSpecular(L, V, N, roughness, fresnel)));\n  //float specular \x3d max(0.0, beckmann(L, V, N, roughness)); // used in gl-surface3d\n\n  float diffuse  \x3d min(kambient + kdiffuse * max(dot(N, L), 0.0), 1.0);\n\n  vec4 surfaceColor \x3d f_color * texture2D(texture, f_uv);\n  vec4 litColor \x3d surfaceColor.a * vec4(diffuse * surfaceColor.rgb + kspecular * vec3(1,1,1) * specular,  1.0);\n\n  gl_FragColor \x3d litColor * opacity;\n}\n"]);
var k=m(["precision highp float;\n#define GLSLIFY 1\n\nattribute vec3 position;\nattribute vec4 color;\nattribute vec2 uv;\n\nuniform mat4 model, view, projection;\n\nvarying vec4 f_color;\nvarying vec3 f_data;\nvarying vec2 f_uv;\n\nvoid main() {\n  gl_Position \x3d projection * view * model * vec4(position, 1.0);\n  f_color \x3d color;\n  f_data  \x3d position;\n  f_uv    \x3d uv;\n}"]),h=m(["precision highp float;\n#define GLSLIFY 1\n\nbool outOfRange(float a, float b, float p) {\n  return ((p \x3e max(a, b)) || \n          (p \x3c min(a, b)));\n}\n\nbool outOfRange(vec2 a, vec2 b, vec2 p) {\n  return (outOfRange(a.x, b.x, p.x) ||\n          outOfRange(a.y, b.y, p.y));\n}\n\nbool outOfRange(vec3 a, vec3 b, vec3 p) {\n  return (outOfRange(a.x, b.x, p.x) ||\n          outOfRange(a.y, b.y, p.y) ||\n          outOfRange(a.z, b.z, p.z));\n}\n\nbool outOfRange(vec4 a, vec4 b, vec4 p) {\n  return outOfRange(a.xyz, b.xyz, p.xyz);\n}\n\nuniform vec3 clipBounds[2];\nuniform sampler2D texture;\nuniform float opacity;\n\nvarying vec4 f_color;\nvarying vec3 f_data;\nvarying vec2 f_uv;\n\nvoid main() {\n  if (outOfRange(clipBounds[0], clipBounds[1], f_data)) discard;\n\n  gl_FragColor \x3d f_color * texture2D(texture, f_uv) * opacity;\n}"]),
e=m(["precision highp float;\n#define GLSLIFY 1\n\nbool outOfRange(float a, float b, float p) {\n  return ((p \x3e max(a, b)) || \n          (p \x3c min(a, b)));\n}\n\nbool outOfRange(vec2 a, vec2 b, vec2 p) {\n  return (outOfRange(a.x, b.x, p.x) ||\n          outOfRange(a.y, b.y, p.y));\n}\n\nbool outOfRange(vec3 a, vec3 b, vec3 p) {\n  return (outOfRange(a.x, b.x, p.x) ||\n          outOfRange(a.y, b.y, p.y) ||\n          outOfRange(a.z, b.z, p.z));\n}\n\nbool outOfRange(vec4 a, vec4 b, vec4 p) {\n  return outOfRange(a.xyz, b.xyz, p.xyz);\n}\n\nattribute vec3 position;\nattribute vec4 color;\nattribute vec2 uv;\nattribute float pointSize;\n\nuniform mat4 model, view, projection;\nuniform vec3 clipBounds[2];\n\nvarying vec4 f_color;\nvarying vec2 f_uv;\n\nvoid main() {\n  if (outOfRange(clipBounds[0], clipBounds[1], position)) {\n\n    gl_Position \x3d vec4(0,0,0,0);\n  } else {\n    gl_Position \x3d projection * view * model * vec4(position, 1.0);\n  }\n  gl_PointSize \x3d pointSize;\n  f_color \x3d color;\n  f_uv \x3d uv;\n}"]),
f=m(["precision highp float;\n#define GLSLIFY 1\n\nuniform sampler2D texture;\nuniform float opacity;\n\nvarying vec4 f_color;\nvarying vec2 f_uv;\n\nvoid main() {\n  vec2 pointR \x3d gl_PointCoord.xy - vec2(0.5,0.5);\n  if(dot(pointR, pointR) \x3e 0.25) {\n    discard;\n  }\n  gl_FragColor \x3d f_color * texture2D(texture, f_uv) * opacity;\n}"]),b=m(["precision highp float;\n#define GLSLIFY 1\n\nattribute vec3 position;\nattribute vec4 id;\n\nuniform mat4 model, view, projection;\n\nvarying vec3 f_position;\nvarying vec4 f_id;\n\nvoid main() {\n  gl_Position \x3d projection * view * model * vec4(position, 1.0);\n  f_id        \x3d id;\n  f_position  \x3d position;\n}"]),
n=m(["precision highp float;\n#define GLSLIFY 1\n\nbool outOfRange(float a, float b, float p) {\n  return ((p \x3e max(a, b)) || \n          (p \x3c min(a, b)));\n}\n\nbool outOfRange(vec2 a, vec2 b, vec2 p) {\n  return (outOfRange(a.x, b.x, p.x) ||\n          outOfRange(a.y, b.y, p.y));\n}\n\nbool outOfRange(vec3 a, vec3 b, vec3 p) {\n  return (outOfRange(a.x, b.x, p.x) ||\n          outOfRange(a.y, b.y, p.y) ||\n          outOfRange(a.z, b.z, p.z));\n}\n\nbool outOfRange(vec4 a, vec4 b, vec4 p) {\n  return outOfRange(a.xyz, b.xyz, p.xyz);\n}\n\nuniform vec3  clipBounds[2];\nuniform float pickId;\n\nvarying vec3 f_position;\nvarying vec4 f_id;\n\nvoid main() {\n  if (outOfRange(clipBounds[0], clipBounds[1], f_position)) discard;\n\n  gl_FragColor \x3d vec4(pickId, f_id.xyz);\n}"]),
u=m(["precision highp float;\n#define GLSLIFY 1\n\nbool outOfRange(float a, float b, float p) {\n  return ((p \x3e max(a, b)) || \n          (p \x3c min(a, b)));\n}\n\nbool outOfRange(vec2 a, vec2 b, vec2 p) {\n  return (outOfRange(a.x, b.x, p.x) ||\n          outOfRange(a.y, b.y, p.y));\n}\n\nbool outOfRange(vec3 a, vec3 b, vec3 p) {\n  return (outOfRange(a.x, b.x, p.x) ||\n          outOfRange(a.y, b.y, p.y) ||\n          outOfRange(a.z, b.z, p.z));\n}\n\nbool outOfRange(vec4 a, vec4 b, vec4 p) {\n  return outOfRange(a.xyz, b.xyz, p.xyz);\n}\n\nattribute vec3  position;\nattribute float pointSize;\nattribute vec4  id;\n\nuniform mat4 model, view, projection;\nuniform vec3 clipBounds[2];\n\nvarying vec3 f_position;\nvarying vec4 f_id;\n\nvoid main() {\n  if (outOfRange(clipBounds[0], clipBounds[1], position)) {\n\n    gl_Position \x3d vec4(0,0,0,0);\n  } else {\n    gl_Position  \x3d projection * view * model * vec4(position, 1.0);\n    gl_PointSize \x3d pointSize;\n  }\n  f_id         \x3d id;\n  f_position   \x3d position;\n}"]),
r=m(["precision highp float;\n#define GLSLIFY 1\n\nattribute vec3 position;\n\nuniform mat4 model, view, projection;\n\nvoid main() {\n  gl_Position \x3d projection * view * model * vec4(position, 1.0);\n}"]);m=m(["precision highp float;\n#define GLSLIFY 1\n\nuniform vec3 contourColor;\n\nvoid main() {\n  gl_FragColor \x3d vec4(contourColor,1);\n}\n"]);l.meshShader={vertex:a,fragment:p,attributes:[{name:"position",type:"vec3"},{name:"normal",type:"vec3"},{name:"color",type:"vec4"},{name:"uv",type:"vec2"}]};
l.wireShader={vertex:k,fragment:h,attributes:[{name:"position",type:"vec3"},{name:"color",type:"vec4"},{name:"uv",type:"vec2"}]};l.pointShader={vertex:e,fragment:f,attributes:[{name:"position",type:"vec3"},{name:"color",type:"vec4"},{name:"uv",type:"vec2"},{name:"pointSize",type:"float"}]};l.pickShader={vertex:b,fragment:n,attributes:[{name:"position",type:"vec3"},{name:"id",type:"vec4"}]};l.pointPickShader={vertex:u,fragment:n,attributes:[{name:"position",type:"vec3"},{name:"pointSize",type:"float"},
{name:"id",type:"vec4"}]};l.contourShader={vertex:r,fragment:m,attributes:[{name:"position",type:"vec3"}]}},{glslify:401}],276:[function(a,p,l){function m(a,b,c,d,e,g,f,h,k,n,t,v,m,r,u,y,l,B,p,D,A,q,C,G,w,x,z){this.gl=a;this.pixelRatio=1;this.cells=[];this.positions=[];this.intensity=[];this.texture=b;this.dirty=!0;this.triShader=c;this.lineShader=d;this.pointShader=e;this.pickShader=g;this.pointPickShader=f;this.contourShader=h;this.trianglePositions=k;this.triangleColors=t;this.triangleNormals=
m;this.triangleUVs=v;this.triangleIds=n;this.triangleVAO=r;this.triangleCount=0;this.lineWidth=1;this.edgePositions=u;this.edgeColors=l;this.edgeUVs=B;this.edgeIds=y;this.edgeVAO=p;this.edgeCount=0;this.pointPositions=D;this.pointColors=q;this.pointUVs=C;this.pointSizes=G;this.pointIds=A;this.pointVAO=w;this.pointCount=0;this.contourLineWidth=1;this.contourPositions=x;this.contourVAO=z;this.contourCount=0;this.contourColor=[0,0,0];this.contourEnable=!0;this.pickId=1;this.bounds=[[Infinity,Infinity,
Infinity],[-Infinity,-Infinity,-Infinity]];this.clipBounds=[[-Infinity,-Infinity,-Infinity],[Infinity,Infinity,Infinity]];this.lightPosition=[1E5,1E5,0];this.diffuseLight=this.ambientLight=.8;this.specularLight=2;this.roughness=.5;this.fresnel=1.5;this.opacity=1;this._projection=this._view=this._model=P;this._resolution=[1,1]}function k(a){a=g({colormap:a,nshades:256,format:"rgba"});for(var b=new Uint8Array(1024),c=0;256>c;++c){for(var e=a[c],f=0;3>f;++f)b[4*c+f]=e[f];b[4*c+3]=255*e[3]}return d(b,
[256,256,4],[4,0,1])}var h=a("gl-shader"),e=a("gl-buffer"),f=a("gl-vao"),b=a("gl-texture2d"),n=a("normals"),u=a("gl-mat4/multiply"),r=a("gl-mat4/invert"),d=a("ndarray"),g=a("colormap"),c=a("simplicial-complex-contour"),v=a("typedarray-pool");l=a("./lib/shaders");var t=a("./lib/closest-point"),y=l.meshShader,B=l.wireShader,D=l.pointShader,q=l.pickShader,A=l.pointPickShader,C=l.contourShader,P=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1];a=m.prototype;a.isOpaque=function(){return 1<=this.opacity};a.isTransparent=
function(){return 1>this.opacity};a.pickSlots=1;a.setPickBase=function(a){this.pickId=a};a.highlight=function(a){if(a&&this.contourEnable){var b=c(this.cells,this.intensity,a.intensity);a=b.cells;var d=b.vertexIds;b=b.vertexWeights;for(var e=a.length,g=v.mallocFloat32(6*e),f=0,h=0;h<e;++h)for(var k=a[h],n=0;2>n;++n){var t=k[0];2===k.length&&(t=k[n]);var m=b[t],r=1-m,u=this.positions[d[t][0]];t=this.positions[d[t][1]];for(var y=0;3>y;++y)g[f++]=m*u[y]+r*t[y]}this.contourCount=f/3|0;this.contourPositions.update(g.subarray(0,
f));v.free(g)}else this.contourCount=0};a.update=function(a){a=a||{};var c=this.gl;this.dirty=!0;"contourEnable"in a&&(this.contourEnable=a.contourEnable);"contourColor"in a&&(this.contourColor=a.contourColor);"lineWidth"in a&&(this.lineWidth=a.lineWidth);"lightPosition"in a&&(this.lightPosition=a.lightPosition);"opacity"in a&&(this.opacity=a.opacity);"ambient"in a&&(this.ambientLight=a.ambient);"diffuse"in a&&(this.diffuseLight=a.diffuse);"specular"in a&&(this.specularLight=a.specular);"roughness"in
a&&(this.roughness=a.roughness);"fresnel"in a&&(this.fresnel=a.fresnel);a.texture?(this.texture.dispose(),this.texture=b(c,a.texture)):a.colormap&&(this.texture.shape=[256,256],this.texture.minFilter=c.LINEAR_MIPMAP_LINEAR,this.texture.magFilter=c.LINEAR,this.texture.setPixels(k(a.colormap)),this.texture.generateMipmap());c=a.cells;var d=a.positions;if(d&&c){var e=[],g=[],f=[],h=[],t=[],v=[],m=[],r=[],u=[],y=[],l=[],B=[],p=[],D=[];this.cells=c;this.positions=d;var A=a.vertexNormals,q=a.cellNormals,
C=void 0===a.vertexNormalsEpsilon?1E-6:a.vertexNormalsEpsilon,G=void 0===a.faceNormalsEpsilon?1E-6:a.faceNormalsEpsilon;a.useFacetNormals&&!q&&(q=n.faceNormals(c,d,G));q||A||(A=n.vertexNormals(c,d,C));C=a.vertexColors;G=a.cellColors;var J=a.meshColor||[1,1,1,1],P=a.vertexUVs,w=a.vertexIntensity,x=a.cellUVs,z=a.cellIntensity,F=Infinity,ja=-Infinity;if(!P&&!x)if(w)if(a.vertexIntensityBounds)F=+a.vertexIntensityBounds[0],ja=+a.vertexIntensityBounds[1];else for(var K=0;K<w.length;++K){var za=w[K];F=Math.min(F,
za);ja=Math.max(ja,za)}else if(z)for(K=0;K<z.length;++K)za=z[K],F=Math.min(F,za),ja=Math.max(ja,za);else for(K=0;K<d.length;++K)za=d[K][2],F=Math.min(F,za),ja=Math.max(ja,za);if(w)this.intensity=w;else if(z){var ka=d.length;K=Array(ka);for(za=0;za<ka;++za)K[za]=0;ka=c.length;for(za=0;za<ka;++za)for(var wa=c[za],ta=0;ta<wa.length;++ta)K[wa[ta]]=z[za];this.intensity=K}else{K=d.length;za=Array(K);for(ka=0;ka<K;++ka)za[ka]=d[ka][2];this.intensity=za}za=a.pointSizes;a=a.pointSize||1;this.bounds=[[Infinity,
Infinity,Infinity],[-Infinity,-Infinity,-Infinity]];for(K=0;K<d.length;++K){var aa=d[K];for(ka=0;3>ka;++ka)!isNaN(aa[ka])&&isFinite(aa[ka])&&(this.bounds[0][ka]=Math.min(this.bounds[0][ka],aa[ka]),this.bounds[1][ka]=Math.max(this.bounds[1][ka],aa[ka]))}var ma=ta=wa=0;K=0;a:for(;K<c.length;++K){var Aa=c[K];switch(Aa.length){case 1:var va=Aa[0];aa=d[va];for(ka=0;3>ka;++ka)if(isNaN(aa[ka])||!isFinite(aa[ka]))continue a;y.push(aa[0],aa[1],aa[2]);var sa=C?C[va]:G?G[K]:J;3===sa.length?l.push(sa[0],sa[1],
sa[2],1):l.push(sa[0],sa[1],sa[2],sa[3]);aa=P?P[va]:w?[(w[va]-F)/(ja-F),0]:x?x[K]:z?[(z[K]-F)/(ja-F),0]:[(aa[2]-F)/(ja-F),0];B.push(aa[0],aa[1]);za?p.push(za[va]):p.push(a);D.push(K);ma+=1;break;case 2:for(ka=0;2>ka;++ka)for(va=Aa[ka],aa=d[va],va=0;3>va;++va)if(isNaN(aa[va])||!isFinite(aa[va]))continue a;for(ka=0;2>ka;++ka)va=Aa[ka],aa=d[va],v.push(aa[0],aa[1],aa[2]),sa=C?C[va]:G?G[K]:J,3===sa.length?m.push(sa[0],sa[1],sa[2],1):m.push(sa[0],sa[1],sa[2],sa[3]),aa=P?P[va]:w?[(w[va]-F)/(ja-F),0]:x?x[K]:
z?[(z[K]-F)/(ja-F),0]:[(aa[2]-F)/(ja-F),0],r.push(aa[0],aa[1]),u.push(K);ta+=1;break;case 3:for(ka=0;3>ka;++ka)for(va=Aa[ka],aa=d[va],va=0;3>va;++va)if(isNaN(aa[va])||!isFinite(aa[va]))continue a;for(ka=0;3>ka;++ka)va=Aa[2-ka],aa=d[va],e.push(aa[0],aa[1],aa[2]),sa=C?C[va]:G?G[K]:J,3===sa.length?g.push(sa[0],sa[1],sa[2],1):g.push(sa[0],sa[1],sa[2],sa[3]),aa=P?P[va]:w?[(w[va]-F)/(ja-F),0]:x?x[K]:z?[(z[K]-F)/(ja-F),0]:[(aa[2]-F)/(ja-F),0],h.push(aa[0],aa[1]),aa=A?A[va]:q[K],f.push(aa[0],aa[1],aa[2]),
t.push(K);wa+=1}}this.pointCount=ma;this.edgeCount=ta;this.triangleCount=wa;this.pointPositions.update(y);this.pointColors.update(l);this.pointUVs.update(B);this.pointSizes.update(p);this.pointIds.update(new Uint32Array(D));this.edgePositions.update(v);this.edgeColors.update(m);this.edgeUVs.update(r);this.edgeIds.update(new Uint32Array(u));this.trianglePositions.update(e);this.triangleColors.update(g);this.triangleUVs.update(h);this.triangleNormals.update(f);this.triangleIds.update(new Uint32Array(t))}};
a.drawTransparent=a.draw=function(a){a=a||{};var b=this.gl,c=a.model||P,d=a.view||P,e=a.projection||P,g=[[-1E6,-1E6,-1E6],[1E6,1E6,1E6]];for(a=0;3>a;++a)g[0][a]=Math.max(g[0][a],this.clipBounds[0][a]),g[1][a]=Math.min(g[1][a],this.clipBounds[1][a]);c={model:c,view:d,projection:e,inverseModel:P.slice(),clipBounds:g,kambient:this.ambientLight,kdiffuse:this.diffuseLight,kspecular:this.specularLight,roughness:this.roughness,fresnel:this.fresnel,eyePosition:[0,0,0],lightPosition:[0,0,0],opacity:this.opacity,
contourColor:this.contourColor,texture:0};c.inverseModel=r(c.inverseModel,c.model);b.disable(b.CULL_FACE);this.texture.bind(0);d=Array(16);u(d,c.view,c.model);u(d,c.projection,d);r(d,d);for(a=0;3>a;++a)c.eyePosition[a]=d[12+a]/d[15];e=d[15];for(a=0;3>a;++a)e+=this.lightPosition[a]*d[4*a+3];for(a=0;3>a;++a){g=d[12+a];for(var f=0;3>f;++f)g+=d[4*f+a]*this.lightPosition[f];c.lightPosition[a]=g/e}0<this.triangleCount&&(a=this.triShader,a.bind(),a.uniforms=c,this.triangleVAO.bind(),b.drawArrays(b.TRIANGLES,
0,3*this.triangleCount),this.triangleVAO.unbind());0<this.edgeCount&&0<this.lineWidth&&(a=this.lineShader,a.bind(),a.uniforms=c,this.edgeVAO.bind(),b.lineWidth(this.lineWidth*this.pixelRatio),b.drawArrays(b.LINES,0,2*this.edgeCount),this.edgeVAO.unbind());0<this.pointCount&&(a=this.pointShader,a.bind(),a.uniforms=c,this.pointVAO.bind(),b.drawArrays(b.POINTS,0,this.pointCount),this.pointVAO.unbind());this.contourEnable&&0<this.contourCount&&0<this.contourLineWidth&&(a=this.contourShader,a.bind(),a.uniforms=
c,this.contourVAO.bind(),b.drawArrays(b.LINES,0,this.contourCount),this.contourVAO.unbind())};a.drawPick=function(a){a=a||{};var b=this.gl,c=a.model||P,d=a.view||P;a=a.projection||P;for(var e=[[-1E6,-1E6,-1E6],[1E6,1E6,1E6]],g=0;3>g;++g)e[0][g]=Math.max(e[0][g],this.clipBounds[0][g]),e[1][g]=Math.min(e[1][g],this.clipBounds[1][g]);this._model=[].slice.call(c);this._view=[].slice.call(d);this._projection=[].slice.call(a);this._resolution=[b.drawingBufferWidth,b.drawingBufferHeight];c={model:c,view:d,
projection:a,clipBounds:e,pickId:this.pickId/255};d=this.pickShader;d.bind();d.uniforms=c;0<this.triangleCount&&(this.triangleVAO.bind(),b.drawArrays(b.TRIANGLES,0,3*this.triangleCount),this.triangleVAO.unbind());0<this.edgeCount&&(this.edgeVAO.bind(),b.lineWidth(this.lineWidth*this.pixelRatio),b.drawArrays(b.LINES,0,2*this.edgeCount),this.edgeVAO.unbind());0<this.pointCount&&(d=this.pointPickShader,d.bind(),d.uniforms=c,this.pointVAO.bind(),b.drawArrays(b.POINTS,0,this.pointCount),this.pointVAO.unbind())};
a.pick=function(a){if(!a||a.id!==this.pickId)return null;for(var b=a.value[0]+256*a.value[1]+65536*a.value[2],c=this.cells[b],d=this.positions,e=Array(c.length),g=0;g<c.length;++g)e[g]=d[c[g]];a=t(e,[a.coord[0],this._resolution[1]-a.coord[1]],this._model,this._view,this._projection,this._resolution);if(!a)return null;d=a[2];for(g=e=0;g<c.length;++g)e+=d[g]*this.intensity[c[g]];return{position:a[1],index:c[a[0]],cell:c,cellId:b,intensity:e,dataCoordinate:this.positions[c[a[0]]]}};a.dispose=function(){this.texture.dispose();
this.triShader.dispose();this.lineShader.dispose();this.pointShader.dispose();this.pickShader.dispose();this.pointPickShader.dispose();this.triangleVAO.dispose();this.trianglePositions.dispose();this.triangleColors.dispose();this.triangleUVs.dispose();this.triangleNormals.dispose();this.triangleIds.dispose();this.edgeVAO.dispose();this.edgePositions.dispose();this.edgeColors.dispose();this.edgeUVs.dispose();this.edgeIds.dispose();this.pointVAO.dispose();this.pointPositions.dispose();this.pointColors.dispose();
this.pointUVs.dispose();this.pointSizes.dispose();this.pointIds.dispose();this.contourVAO.dispose();this.contourPositions.dispose();this.contourShader.dispose()};p.exports=function(a,c){1===arguments.length&&(c=a,a=c.gl);if(!(a.getExtension("OES_standard_derivatives")||a.getExtension("MOZ_OES_standard_derivatives")||a.getExtension("WEBKIT_OES_standard_derivatives")))throw Error("derivatives not supported");var g=h(a,y.vertex,y.fragment);g.attributes.position.location=0;g.attributes.color.location=
2;g.attributes.uv.location=3;g.attributes.normal.location=4;var k=h(a,B.vertex,B.fragment);k.attributes.position.location=0;k.attributes.color.location=2;k.attributes.uv.location=3;var n=h(a,D.vertex,D.fragment);n.attributes.position.location=0;n.attributes.color.location=2;n.attributes.uv.location=3;n.attributes.pointSize.location=4;var t=h(a,q.vertex,q.fragment);t.attributes.position.location=0;t.attributes.id.location=1;var v=h(a,A.vertex,A.fragment);v.attributes.position.location=0;v.attributes.id.location=
1;v.attributes.pointSize.location=4;var r=h(a,C.vertex,C.fragment);r.attributes.position.location=0;var u=b(a,d(new Uint8Array([255,255,255,255]),[1,1,4]));u.generateMipmap();u.minFilter=a.LINEAR_MIPMAP_LINEAR;u.magFilter=a.LINEAR;var l=e(a),p=e(a),G=e(a),E=e(a),J=e(a),P=f(a,[{buffer:l,type:a.FLOAT,size:3},{buffer:J,type:a.UNSIGNED_BYTE,size:4,normalized:!0},{buffer:p,type:a.FLOAT,size:4},{buffer:G,type:a.FLOAT,size:2},{buffer:E,type:a.FLOAT,size:3}]),w=e(a),x=e(a),fa=e(a),z=e(a),ha=f(a,[{buffer:w,
type:a.FLOAT,size:3},{buffer:z,type:a.UNSIGNED_BYTE,size:4,normalized:!0},{buffer:x,type:a.FLOAT,size:4},{buffer:fa,type:a.FLOAT,size:2}]),ea=e(a),ba=e(a),la=e(a),Z=e(a),pa=e(a),da=f(a,[{buffer:ea,type:a.FLOAT,size:3},{buffer:pa,type:a.UNSIGNED_BYTE,size:4,normalized:!0},{buffer:ba,type:a.FLOAT,size:4},{buffer:la,type:a.FLOAT,size:2},{buffer:Z,type:a.FLOAT,size:1}]),F=e(a),ja=f(a,[{buffer:F,type:a.FLOAT,size:3}]);g=new m(a,u,g,k,n,t,v,r,l,J,p,G,E,P,w,z,x,fa,ha,ea,pa,ba,la,Z,da,F,ja);g.update(c);return g}},
{"./lib/closest-point":274,"./lib/shaders":275,colormap:116,"gl-buffer":237,"gl-mat4/invert":261,"gl-mat4/multiply":263,"gl-shader":297,"gl-texture2d":314,"gl-vao":319,ndarray:442,normals:445,"simplicial-complex-contour":502,"typedarray-pool":529}],277:[function(a,p,l){function m(a,b,e){this.plot=a;this.vbo=b;this.shader=e}p.exports=function(a){var b=a.gl,f=k(b,[0,0,0,1,1,0,1,1]);b=h(b,e.boxVert,e.lineFrag);return new m(a,f,b)};var k=a("gl-buffer"),h=a("gl-shader"),e=a("./shaders");a=m.prototype;
a.bind=function(){var a=this.shader;this.vbo.bind();this.shader.bind();a.attributes.coord.pointer();a.uniforms.screenBox=this.plot.screenBox};a.drawBox=function(){var a=[0,0],b=[0,0];return function(e,f,h,d,g){var c=this.shader,k=this.plot.gl;a[0]=e;a[1]=f;b[0]=h;b[1]=d;c.uniforms.lo=a;c.uniforms.hi=b;c.uniforms.color=g;k.drawArrays(k.TRIANGLE_STRIP,0,4)}}();a.dispose=function(){this.vbo.dispose();this.shader.dispose()}},{"./shaders":280,"gl-buffer":237,"gl-shader":297}],278:[function(a,p,l){function m(a,
b,e,d){this.plot=a;this.vbo=b;this.shader=e;this.tickShader=d;this.ticks=[[],[]]}function k(a,b){return a-b}p.exports=function(a){var f=a.gl,k=h(f),d=e(f,b.gridVert,b.gridFrag);f=e(f,b.tickVert,b.gridFrag);return new m(a,k,d,f)};var h=a("gl-buffer"),e=a("gl-shader"),f=a("binary-search-bounds"),b=a("./shaders");a=m.prototype;a.draw=function(){var a=[0,0],b=[0,0],e=[0,0];return function(){var d=this.plot,g=this.vbo,c=this.shader,f=this.ticks,h=d.gl,k=d._tickBounds,n=d.dataBox,m=d.viewBox,r=d.gridLineWidth,
u=d.gridLineColor,l=d.gridLineEnable;d=d.pixelRatio;for(var p=0;2>p;++p){var q=k[p],E=.5*(n[p+2]+n[p]),H=n[p+2]-n[p];b[p]=2*(k[p+2]-q)/H;a[p]=2*(q-E)/H}c.bind();g.bind();c.attributes.dataCoord.pointer();c.uniforms.dataShift=a;c.uniforms.dataScale=b;for(p=g=0;2>p;++p)e[0]=e[1]=0,e[p]=1,c.uniforms.dataAxis=e,c.uniforms.lineWidth=r[p]/(m[p+2]-m[p])*d,c.uniforms.color=u[p],k=6*f[p].length,l[p]&&k&&h.drawArrays(h.TRIANGLES,g,k),g+=k}}();a.drawTickMarks=function(){var a=[0,0],b=[0,0],e=[1,0],d=[0,1],g=
[0,0],c=[0,0];return function(){var h=this.plot,n=this.vbo,m=this.tickShader,r=this.ticks,u=h.gl,l=h._tickBounds,p=h.dataBox,q=h.viewBox,P=h.pixelRatio,J=h.screenBox,E=J[2]-J[0];J=J[3]-J[1];for(var H=q[2]-q[0],M=q[3]-q[1],O=0;2>O;++O){var I=l[O],Q=.5*(p[O+2]+p[O]),N=p[O+2]-p[O];b[O]=2*(l[O+2]-I)/N;a[O]=2*(I-Q)/N}b[0]*=H/E;a[0]*=H/E;b[1]*=M/J;a[1]*=M/J;m.bind();n.bind();m.attributes.dataCoord.pointer();n=m.uniforms;n.dataShift=a;n.dataScale=b;m=h.tickMarkLength;H=h.tickMarkWidth;h=h.tickMarkColor;
O=6*r[0].length;I=Math.min(f.ge(r[0],(p[0]-l[0])/(l[2]-l[0]),k),r[0].length);Q=Math.min(f.gt(r[0],(p[2]-l[0])/(l[2]-l[0]),k),r[0].length);M=6*I;I=6*Math.max(0,Q-I);Q=Math.min(f.ge(r[1],(p[1]-l[1])/(l[3]-l[1]),k),r[1].length);r=Math.min(f.gt(r[1],(p[3]-l[1])/(l[3]-l[1]),k),r[1].length);l=O+6*Q;r=6*Math.max(0,r-Q);g[0]=2*(q[0]-m[1])/E-1;g[1]=(q[3]+q[1])/J-1;c[0]=m[1]*P/E;c[1]=H[1]*P/J;r&&(n.color=h[1],n.tickScale=c,n.dataAxis=d,n.screenOffset=g,u.drawArrays(u.TRIANGLES,l,r));g[0]=(q[2]+q[0])/E-1;g[1]=
2*(q[1]-m[0])/J-1;c[0]=H[0]*P/E;c[1]=m[0]*P/J;I&&(n.color=h[0],n.tickScale=c,n.dataAxis=e,n.screenOffset=g,u.drawArrays(u.TRIANGLES,M,I));g[0]=2*(q[2]+m[3])/E-1;g[1]=(q[3]+q[1])/J-1;c[0]=m[3]*P/E;c[1]=H[3]*P/J;r&&(n.color=h[3],n.tickScale=c,n.dataAxis=d,n.screenOffset=g,u.drawArrays(u.TRIANGLES,l,r));g[0]=(q[2]+q[0])/E-1;g[1]=2*(q[3]+m[2])/J-1;c[0]=H[2]*P/E;c[1]=m[2]*P/J;I&&(n.color=h[2],n.tickScale=c,n.dataAxis=e,n.screenOffset=g,u.drawArrays(u.TRIANGLES,M,I))}}();a.update=function(){var a=[1,1,
-1,-1,1,-1],b=[1,-1,1,1,-1,-1];return function(e){var d=e.ticks;e=e.bounds;for(var g=new Float32Array(18*(d[0].length+d[1].length)),c=0,f=[[],[]],h=0;2>h;++h)for(var k=f[h],n=d[h],m=e[h],r=e[h+2],u=0;u<n.length;++u){var l=(n[u].x-m)/(r-m);k.push(l);for(var p=0;6>p;++p)g[c++]=l,g[c++]=a[p],g[c++]=b[p]}this.ticks=f;this.vbo.update(g)}}();a.dispose=function(){this.vbo.dispose();this.shader.dispose();this.tickShader.dispose()}},{"./shaders":280,"binary-search-bounds":282,"gl-buffer":237,"gl-shader":297}],
279:[function(a,p,l){function m(a,b,e){this.plot=a;this.vbo=b;this.shader=e}p.exports=function(a){var b=a.gl,f=k(b,[-1,-1,-1,1,1,-1,1,1]);b=h(b,e.lineVert,e.lineFrag);return new m(a,f,b)};var k=a("gl-buffer"),h=a("gl-shader"),e=a("./shaders");a=m.prototype;a.bind=function(){var a=this.shader;this.vbo.bind();this.shader.bind();a.attributes.coord.pointer();a.uniforms.screenBox=this.plot.screenBox};a.drawLine=function(){var a=[0,0],b=[0,0];return function(e,f,h,d,g,c){var k=this.plot,n=this.shader,m=
k.gl;a[0]=e;a[1]=f;b[0]=h;b[1]=d;n.uniforms.start=a;n.uniforms.end=b;n.uniforms.width=g*k.pixelRatio;n.uniforms.color=c;m.drawArrays(m.TRIANGLE_STRIP,0,4)}}();a.dispose=function(){this.vbo.dispose();this.shader.dispose()}},{"./shaders":280,"gl-buffer":237,"gl-shader":297}],280:[function(a,p,l){a=a("glslify");l=a(["precision lowp float;\n#define GLSLIFY 1\nuniform vec4 color;\nvoid main() {\n  gl_FragColor \x3d vec4(color.xyz * color.w, color.w);\n}\n"]);p.exports={lineVert:a(["precision mediump float;\n#define GLSLIFY 1\n\nattribute vec2 coord;\n\nuniform vec4 screenBox;\nuniform vec2 start, end;\nuniform float width;\n\nvec2 perp(vec2 v) {\n  return vec2(v.y, -v.x);\n}\n\nvec2 screen(vec2 v) {\n  return 2.0 * (v - screenBox.xy) / (screenBox.zw - screenBox.xy) - 1.0;\n}\n\nvoid main() {\n  vec2 delta \x3d normalize(perp(start - end));\n  vec2 offset \x3d mix(start, end, 0.5 * (coord.y+1.0));\n  gl_Position \x3d vec4(screen(offset + 0.5 * width * delta * coord.x), 0, 1);\n}\n"]),
lineFrag:l,textVert:a(["#define GLSLIFY 1\nattribute vec3 textCoordinate;\n\nuniform vec2 dataScale, dataShift, dataAxis, screenOffset, textScale;\nuniform float angle;\n\nvoid main() {\n  float dataOffset  \x3d textCoordinate.z;\n  vec2 glyphOffset  \x3d textCoordinate.xy;\n  mat2 glyphMatrix \x3d mat2(cos(angle), sin(angle), -sin(angle), cos(angle));\n  vec2 screenCoordinate \x3d dataAxis * (dataScale * dataOffset + dataShift) +\n    glyphMatrix * glyphOffset * textScale + screenOffset;\n  gl_Position \x3d vec4(screenCoordinate, 0, 1);\n}\n"]),
textFrag:l,gridVert:a(["precision mediump float;\n#define GLSLIFY 1\n\nattribute vec3 dataCoord;\n\nuniform vec2 dataAxis, dataShift, dataScale;\nuniform float lineWidth;\n\nvoid main() {\n  vec2 pos \x3d dataAxis * (dataScale * dataCoord.x + dataShift);\n  pos +\x3d 10.0 * dataCoord.y * vec2(dataAxis.y, -dataAxis.x) + dataCoord.z * lineWidth;\n  gl_Position \x3d vec4(pos, 0, 1);\n}\n"]),gridFrag:l,boxVert:a(["precision mediump float;\n#define GLSLIFY 1\n\nattribute vec2 coord;\n\nuniform vec4 screenBox;\nuniform vec2 lo, hi;\n\nvec2 screen(vec2 v) {\n  return 2.0 * (v - screenBox.xy) / (screenBox.zw - screenBox.xy) - 1.0;\n}\n\nvoid main() {\n  gl_Position \x3d vec4(screen(mix(lo, hi, coord)), 0, 1);\n}\n"]),
tickVert:a(["precision mediump float;\n#define GLSLIFY 1\n\nattribute vec3 dataCoord;\n\nuniform vec2 dataAxis, dataShift, dataScale, screenOffset, tickScale;\n\nvoid main() {\n  vec2 pos \x3d dataAxis * (dataScale * dataCoord.x + dataShift);\n  gl_Position \x3d vec4(pos + tickScale*dataCoord.yz + screenOffset, 0, 1);\n}\n"])}},{glslify:401}],281:[function(a,p,l){function m(a,b,e){this.plot=a;this.vbo=b;this.shader=e;this.tickOffset=[[],[]];this.tickX=[[],[]];this.labelOffset=[0,0];this.labelCount=
[0,0]}p.exports=function(a){var e=a.gl,f=k(e);e=h(e,b.textVert,b.textFrag);return new m(a,f,e)};var k=a("gl-buffer"),h=a("gl-shader"),e=a("text-cache"),f=a("binary-search-bounds"),b=a("./shaders");a=m.prototype;a.drawTicks=function(){var a=[0,0],b=[0,0],e=[0,0];return function(d){var g=this.plot,c=this.shader,h=this.tickX[d],k=this.tickOffset[d],n=g.gl,m=g.viewBox,r=g.dataBox,u=g.screenBox,l=g.pixelRatio,p=g.tickEnable,q=g.tickPad,J=g.tickColor,E=g.tickAngle,H=g.labelEnable,M=g.labelPad,O=g.labelColor;
g=g.labelAngle;var I=this.labelOffset[d],Q=this.labelCount[d],N=f.lt(h,r[d]);h=f.le(h,r[d+2]);a[0]=a[1]=0;a[d]=1;b[d]=(m[2+d]+m[d])/(u[2+d]-u[d])-1;u=2/u[2+(d^1)]-u[d^1];b[d^1]=u*m[d^1]-1;p[d]&&(b[d^1]-=u*l*q[d],N<h&&k[h]>k[N]&&(c.uniforms.dataAxis=a,c.uniforms.screenOffset=b,c.uniforms.color=J[d],c.uniforms.angle=E[d],n.drawArrays(n.TRIANGLES,k[N],k[h]-k[N])));H[d]&&Q&&(b[d^1]-=u*l*M[d],c.uniforms.dataAxis=e,c.uniforms.screenOffset=b,c.uniforms.color=O[d],c.uniforms.angle=g[d],n.drawArrays(n.TRIANGLES,
I,Q));b[d^1]=u*m[2+(d^1)]-1;p[d+2]&&(b[d^1]+=u*l*q[d+2],N<h&&k[h]>k[N]&&(c.uniforms.dataAxis=a,c.uniforms.screenOffset=b,c.uniforms.color=J[d+2],c.uniforms.angle=E[d+2],n.drawArrays(n.TRIANGLES,k[N],k[h]-k[N])));H[d+2]&&Q&&(b[d^1]+=u*l*M[d+2],c.uniforms.dataAxis=e,c.uniforms.screenOffset=b,c.uniforms.color=O[d+2],c.uniforms.angle=g[d+2],n.drawArrays(n.TRIANGLES,I,Q))}}();a.drawTitle=function(){var a=[0,0],b=[0,0];return function(){var e=this.plot,d=this.shader,g=e.gl,c=e.screenBox,f=e.titleCenter,
h=e.titleAngle,k=e.titleColor;e=e.pixelRatio;if(this.titleCount){for(var n=0;2>n;++n)b[n]=2*(f[n]*e-c[n])/(c[2+n]-c[n])-1;d.bind();d.uniforms.dataAxis=a;d.uniforms.screenOffset=b;d.uniforms.angle=h;d.uniforms.color=k;g.drawArrays(g.TRIANGLES,this.titleOffset,this.titleCount)}}}();a.bind=function(){var a=[0,0],b=[0,0],e=[0,0];return function(){var d=this.plot,g=this.shader,c=d._tickBounds,f=d.dataBox,h=d.screenBox,k=d.viewBox;g.bind();for(var n=0;2>n;++n){var m=c[n],r=.5*(f[n+2]+f[n]),u=f[n+2]-f[n],
l=k[n+2]-k[n],p=h[n+2]-h[n];b[n]=2*(c[n+2]-m)/u*l/p;a[n]=2*(m-r)/u*l/p}e[1]=2*d.pixelRatio/(h[3]-h[1]);e[0]=e[1]*(h[3]-h[1])/(h[2]-h[0]);g.uniforms.dataScale=b;g.uniforms.dataShift=a;g.uniforms.textScale=e;this.vbo.bind();g.attributes.textCoordinate.pointer()}}();a.update=function(a){var b=[],f=a.ticks,d=a.bounds,g,c;for(c=0;2>c;++c){var h=[Math.floor(b.length/3)],k=[-Infinity],n=f[c];for(g=0;g<n.length;++g){var m=n[g];var l=m.x;var p=m.text;var A=m.font||"sans-serif";m=m.fontSize||12;for(var q=1/
(d[c+2]-d[c]),P=d[c],J=p.split("\n"),E=0;E<J.length;E++){var H=e(A,J[E]).data;for(p=0;p<H.length;p+=2)b.push(H[p]*m,-H[p+1]*m-E*m*1.2,(l-P)*q)}h.push(Math.floor(b.length/3));k.push(l)}this.tickOffset[c]=h;this.tickX[c]=k}for(c=0;2>c;++c){this.labelOffset[c]=Math.floor(b.length/3);H=e(a.labelFont[c],a.labels[c],{textAlign:"center"}).data;m=a.labelSize[c];for(g=0;g<H.length;g+=2)b.push(H[g]*m,-H[g+1]*m,0);this.labelCount[c]=Math.floor(b.length/3)-this.labelOffset[c]}this.titleOffset=Math.floor(b.length/
3);H=e(a.titleFont,a.title).data;m=a.titleSize;for(g=0;g<H.length;g+=2)b.push(H[g]*m,-H[g+1]*m,0);this.titleCount=Math.floor(b.length/3)-this.titleOffset;this.vbo.update(b)};a.dispose=function(){this.vbo.dispose();this.shader.dispose()}},{"./shaders":280,"binary-search-bounds":282,"gl-buffer":237,"gl-shader":297,"text-cache":520}],282:[function(a,p,l){arguments[4][101][0].apply(l,arguments)},{dup:101}],283:[function(a,p,l){function m(a,b){this.gl=a;this.pickBuffer=b;this.screenBox=[0,0,a.drawingBufferWidth,
a.drawingBufferHeight];this.viewBox=[0,0,0,0];this.dataBox=[-10,-10,10,10];this.gridLineEnable=[!0,!0];this.gridLineWidth=[1,1];this.gridLineColor=[[0,0,0,1],[0,0,0,1]];this.pixelRatio=1;this.tickMarkLength=[0,0,0,0];this.tickMarkWidth=[0,0,0,0];this.tickMarkColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1],[0,0,0,1]];this.tickPad=[15,15,15,15];this.tickAngle=[0,0,0,0];this.tickEnable=[!0,!0,!0,!0];this.tickColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1],[0,0,0,1]];this.labelPad=[15,15,15,15];this.labelAngle=[0,Math.PI/
2,0,3*Math.PI/2];this.labelEnable=[!0,!0,!0,!0];this.labelColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1],[0,0,0,1]];this.titleCenter=[0,0];this.titleEnable=!0;this.titleAngle=0;this.titleColor=[0,0,0,1];this.borderColor=[0,0,0,0];this.backgroundColor=[0,0,0,0];this.zeroLineEnable=[!0,!0];this.zeroLineWidth=[4,4];this.zeroLineColor=[[0,0,0,1],[0,0,0,1]];this.borderLineEnable=[!0,!0,!0,!0];this.borderLineWidth=[2,2,2,2];this.borderLineColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1],[0,0,0,1]];this.box=this.line=this.text=
this.grid=null;this.objects=[];this.overlays=[];this._tickBounds=[Infinity,Infinity,-Infinity,-Infinity];this.pickDirty=this.dirty=this.static=!1;this.pickDelay=120;this.pickRadius=10;this._pickTimeout=null;this._drawPick=this.drawPick.bind(this);this._depthCounter=0}function k(a){a=a.slice();for(var b=0;b<a.length;++b)a[b]=a[b].slice();return a}function h(a,b){return a.x-b.x}p.exports=function(a){var d=a.gl,g=e(d,[d.drawingBufferWidth,d.drawingBufferHeight]);d=new m(d,g);d.grid=f(d);d.text=b(d);
d.line=n(d);d.box=u(d);d.update(a);return d};var e=a("gl-select-static"),f=a("./lib/grid"),b=a("./lib/text"),n=a("./lib/line"),u=a("./lib/box");a=m.prototype;a.setDirty=function(){this.dirty=this.pickDirty=!0};a.setOverlayDirty=function(){this.dirty=!0};a.nextDepthValue=function(){return this._depthCounter++/65536};a.draw=function(){return function(){var a=this.gl,b=this.screenBox,e=this.viewBox,c=this.dataBox,f=this.pixelRatio,h=this.grid,k=this.line,n=this.text,m=this.objects;this._depthCounter=
0;this.pickDirty&&(this._pickTimeout&&clearTimeout(this._pickTimeout),this.pickDirty=!1,this._pickTimeout=setTimeout(this._drawPick,this.pickDelay));if(this.dirty){this.dirty=!1;a.bindFramebuffer(a.FRAMEBUFFER,null);a.enable(a.SCISSOR_TEST);a.disable(a.DEPTH_TEST);a.depthFunc(a.LESS);a.depthMask(!1);a.enable(a.BLEND);a.blendEquation(a.FUNC_ADD,a.FUNC_ADD);a.blendFunc(a.ONE,a.ONE_MINUS_SRC_ALPHA);if(this.borderColor){a.scissor(b[0],b[1],b[2]-b[0],b[3]-b[1]);var u=this.borderColor;a.clearColor(u[0]*
u[3],u[1]*u[3],u[2]*u[3],u[3]);a.clear(a.COLOR_BUFFER_BIT|a.DEPTH_BUFFER_BIT)}a.scissor(e[0],e[1],e[2]-e[0],e[3]-e[1]);a.viewport(e[0],e[1],e[2]-e[0],e[3]-e[1]);u=this.backgroundColor;a.clearColor(u[0]*u[3],u[1]*u[3],u[2]*u[3],u[3]);a.clear(a.COLOR_BUFFER_BIT);h.draw();u=this.zeroLineEnable;var l=this.zeroLineColor,p=this.zeroLineWidth;if(u[0]||u[1])for(k.bind(),h=0;2>h;++h)if(u[h]&&0>=c[h]&&0<=c[h+2]){var q=b[h]-c[h]*(b[h+2]-b[h])/(c[h+2]-c[h]);0===h?k.drawLine(q,b[1],q,b[3],p[h],l[h]):k.drawLine(b[0],
q,b[2],q,p[h],l[h])}for(h=0;h<m.length;++h)m[h].draw();a.viewport(b[0],b[1],b[2]-b[0],b[3]-b[1]);a.scissor(b[0],b[1],b[2]-b[0],b[3]-b[1]);this.grid.drawTickMarks();k.bind();b=this.borderLineEnable;c=this.borderLineWidth;m=this.borderLineColor;b[1]&&k.drawLine(e[0],e[1]-.5*c[1]*f,e[0],e[3]+.5*c[3]*f,c[1],m[1]);b[0]&&k.drawLine(e[0]-.5*c[0]*f,e[1],e[2]+.5*c[2]*f,e[1],c[0],m[0]);b[3]&&k.drawLine(e[2],e[1]-.5*c[1]*f,e[2],e[3]+.5*c[3]*f,c[3],m[3]);b[2]&&k.drawLine(e[0]-.5*c[0]*f,e[3],e[2]+.5*c[2]*f,e[3],
c[2],m[2]);n.bind();for(h=0;2>h;++h)n.drawTicks(h);this.titleEnable&&n.drawTitle();e=this.overlays;for(h=0;h<e.length;++h)e[h].draw();a.disable(a.SCISSOR_TEST);a.disable(a.BLEND);a.depthMask(!0)}}}();a.drawPick=function(){return function(){if(!this.static){var a=this.pickBuffer;this._pickTimeout=null;a.begin();for(var b=1,e=this.objects,c=0;c<e.length;++c)b=e[c].drawPick(b);a.end()}}}();a.pick=function(){return function(a,b){if(!this.static){var d=this.pixelRatio,c=this.pickPixelRatio,e=this.viewBox;
a=Math.round((a-e[0]/d)*c)|0;b=Math.round((b-e[1]/d)*c)|0;d=this.pickBuffer.query(a,b,this.pickRadius);if(!d)return null;d=d.id+(d.value[0]<<8)+(d.value[1]<<16)+(d.value[2]<<24);c=this.objects;for(e=0;e<c.length;++e){var f=c[e].pick(a,b,d);if(f)return f}return null}}}();a.setScreenBox=function(a){var b=this.screenBox,e=this.pixelRatio;b[0]=Math.round(a[0]*e)|0;b[1]=Math.round(a[1]*e)|0;b[2]=Math.round(a[2]*e)|0;b[3]=Math.round(a[3]*e)|0;this.setDirty()};a.setDataBox=function(a){var b=this.dataBox;
if(b[0]!==a[0]||b[1]!==a[1]||b[2]!==a[2]||b[3]!==a[3])b[0]=a[0],b[1]=a[1],b[2]=a[2],b[3]=a[3],this.setDirty()};a.setViewBox=function(a){var b=this.pixelRatio,e=this.viewBox;e[0]=Math.round(a[0]*b)|0;e[1]=Math.round(a[1]*b)|0;e[2]=Math.round(a[2]*b)|0;e[3]=Math.round(a[3]*b)|0;b=this.pickPixelRatio;this.pickBuffer.shape=[Math.round((a[2]-a[0])*b)|0,Math.round((a[3]-a[1])*b)|0];this.setDirty()};a.update=function(a){a=a||{};var b=this.gl,e=this.pixelRatio=a.pixelRatio||1;this.pickPixelRatio=Math.max(e,
1);this.setScreenBox(a.screenBox||[0,0,b.drawingBufferWidth/e,b.drawingBufferHeight/e]);this.setViewBox(a.viewBox||[.125*(this.screenBox[2]-this.screenBox[0])/e,.125*(this.screenBox[3]-this.screenBox[1])/e,.875*(this.screenBox[2]-this.screenBox[0])/e,.875*(this.screenBox[3]-this.screenBox[1])/e]);b=this.viewBox;var c=(b[2]-b[0])/(b[3]-b[1]);this.setDataBox(a.dataBox||[-10,-10/c,10,10/c]);this.borderColor=!1!==a.borderColor?(a.borderColor||[0,0,0,0]).slice():!1;this.backgroundColor=(a.backgroundColor||
[0,0,0,0]).slice();this.gridLineEnable=(a.gridLineEnable||[!0,!0]).slice();this.gridLineWidth=(a.gridLineWidth||[1,1]).slice();this.gridLineColor=k(a.gridLineColor||[[.5,.5,.5,1],[.5,.5,.5,1]]);this.zeroLineEnable=(a.zeroLineEnable||[!0,!0]).slice();this.zeroLineWidth=(a.zeroLineWidth||[4,4]).slice();this.zeroLineColor=k(a.zeroLineColor||[[0,0,0,1],[0,0,0,1]]);this.tickMarkLength=(a.tickMarkLength||[0,0,0,0]).slice();this.tickMarkWidth=(a.tickMarkWidth||[0,0,0,0]).slice();this.tickMarkColor=k(a.tickMarkColor||
[[0,0,0,1],[0,0,0,1],[0,0,0,1],[0,0,0,1]]);this.titleCenter=(a.titleCenter||[.5*(b[0]+b[2])/e,(b[3]+120)/e]).slice();this.titleEnable=!("titleEnable"in a)||!!a.titleEnable;this.titleAngle=a.titleAngle||0;this.titleColor=(a.titleColor||[0,0,0,1]).slice();this.labelPad=(a.labelPad||[15,15,15,15]).slice();this.labelAngle=(a.labelAngle||[0,Math.PI/2,0,3*Math.PI/2]).slice();this.labelEnable=(a.labelEnable||[!0,!0,!0,!0]).slice();this.labelColor=k(a.labelColor||[[0,0,0,1],[0,0,0,1],[0,0,0,1],[0,0,0,1]]);
this.tickPad=(a.tickPad||[15,15,15,15]).slice();this.tickAngle=(a.tickAngle||[0,0,0,0]).slice();this.tickEnable=(a.tickEnable||[!0,!0,!0,!0]).slice();this.tickColor=k(a.tickColor||[[0,0,0,1],[0,0,0,1],[0,0,0,1],[0,0,0,1]]);this.borderLineEnable=(a.borderLineEnable||[!0,!0,!0,!0]).slice();this.borderLineWidth=(a.borderLineWidth||[2,2,2,2]).slice();this.borderLineColor=k(a.borderLineColor||[[0,0,0,1],[0,0,0,1],[0,0,0,1],[0,0,0,1]]);e=a.ticks||[[],[]];b=this._tickBounds;b[0]=b[1]=Infinity;b[2]=b[3]=
-Infinity;for(c=0;2>c;++c){var f=e[c].slice(0);0!==f.length&&(f.sort(h),b[c]=Math.min(b[c],f[0].x),b[c+2]=Math.max(b[c+2],f[f.length-1].x))}this.grid.update({bounds:b,ticks:e});this.text.update({bounds:b,ticks:e,labels:a.labels||["x","y"],labelSize:a.labelSize||[12,12],labelFont:a.labelFont||["sans-serif","sans-serif"],title:a.title||"",titleSize:a.titleSize||18,titleFont:a.titleFont||"sans-serif"});this.static=!!a.static;this.setDirty()};a.dispose=function(){this.box.dispose();this.grid.dispose();
this.text.dispose();this.line.dispose();for(var a=this.objects.length-1;0<=a;--a)this.objects[a].dispose();this.objects.length=0;for(a=this.overlays.length-1;0<=a;--a)this.overlays[a].dispose();this.overlays.length=0;this.gl=null};a.addObject=function(a){0>this.objects.indexOf(a)&&(this.objects.push(a),this.setDirty())};a.removeObject=function(a){for(var b=this.objects,e=0;e<b.length;++e)if(b[e]===a){b.splice(e,1);this.setDirty();break}};a.addOverlay=function(a){0>this.overlays.indexOf(a)&&(this.overlays.push(a),
this.setOverlayDirty())};a.removeOverlay=function(a){for(var b=this.overlays,e=0;e<b.length;++e)if(b[e]===a){b.splice(e,1);this.setOverlayDirty();break}}},{"./lib/box":277,"./lib/grid":278,"./lib/line":279,"./lib/text":281,"gl-select-static":296}],284:[function(a,p,l){p.exports=function(a,u){a=a||document.body;u=u||{};var n=[.01,Infinity];"distanceLimits"in u&&(n[0]=u.distanceLimits[0],n[1]=u.distanceLimits[1]);"zoomMin"in u&&(n[0]=u.zoomMin);"zoomMax"in u&&(n[1]=u.zoomMax);var d=k({center:u.center||
[0,0,0],up:u.up||[0,1,0],eye:u.eye||[0,0,10],mode:u.mode||"orbit",distanceLimits:n}),g=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],c=0,v=a.clientWidth,t=a.clientHeight,y={keyBindingMode:"rotate",enableWheel:!0,view:d,element:a,delay:u.delay||16,rotateSpeed:u.rotateSpeed||1,zoomSpeed:u.zoomSpeed||1,translateSpeed:u.translateSpeed||1,flipX:!!u.flipX,flipY:!!u.flipY,modes:d.modes,_ortho:u._ortho||u.projection&&"orthographic"===u.projection.type||!1,tick:function(){var b=m(),e=this.delay,f=b-2*e;d.idle(b-e);d.recalcMatrix(f);
d.flush(b-(100+2*e));b=!0;e=d.computedMatrix;for(f=0;16>f;++f)b=b&&g[f]===e[f],g[f]=e[f];e=a.clientWidth===v&&a.clientHeight===t;v=a.clientWidth;t=a.clientHeight;if(b)return!e;c=Math.exp(d.computedRadius[0]);return!0},lookAt:function(a,b,c){d.lookAt(d.lastT(),a,b,c)},rotate:function(a,b,c){d.rotate(d.lastT(),a,b,c)},pan:function(a,b,c){d.pan(d.lastT(),a,b,c)},translate:function(a,b,c){d.translate(d.lastT(),a,b,c)}};Object.defineProperties(y,{matrix:{get:function(){return d.computedMatrix},set:function(a){d.setMatrix(d.lastT(),
a);return d.computedMatrix},enumerable:!0},mode:{get:function(){return d.getMode()},set:function(a){var b=d.computedUp.slice(),c=d.computedEye.slice(),e=d.computedCenter.slice();d.setMode(a);"turntable"===a&&(a=m(),d._active.lookAt(a,c,e,b),d._active.lookAt(a+500,c,e,[0,0,1]),d._active.flush(a));return d.getMode()},enumerable:!0},center:{get:function(){return d.computedCenter},set:function(a){d.lookAt(d.lastT(),null,a);return d.computedCenter},enumerable:!0},eye:{get:function(){return d.computedEye},
set:function(a){d.lookAt(d.lastT(),a);return d.computedEye},enumerable:!0},up:{get:function(){return d.computedUp},set:function(a){d.lookAt(d.lastT(),null,null,a);return d.computedUp},enumerable:!0},distance:{get:function(){return c},set:function(a){d.setDistance(d.lastT(),a);return a},enumerable:!0},distanceLimits:{get:function(){return d.getDistanceLimits(n)},set:function(a){d.setDistanceLimits(a);return a},enumerable:!0}});a.addEventListener("contextmenu",function(a){a.preventDefault();return!1});
y._lastX=-1;y._lastY=-1;y._lastMods={shift:!1,control:!1,alt:!1,meta:!1};y.enableMouseListeners=function(){function g(b,e,g,f){var h=y.keyBindingMode;if(!1!==h){var k="rotate"===h,n="pan"===h;h="zoom"===h;var t=!!f.control,v=!!f.alt,r=!!f.shift,u=!!(b&1),l=!!(b&2);b=!!(b&4);var p=1/a.clientHeight,B=p*(e-y._lastX),D=p*(g-y._lastY),A=y.flipX?1:-1,q=y.flipY?1:-1,C=Math.PI*y.rotateSpeed;p=m();-1!==y._lastX&&-1!==y._lastY&&((k&&u&&!t&&!v&&!r||u&&!t&&!v&&r)&&d.rotate(p,A*C*B,-q*C*D,0),(n&&u&&!t&&!v&&!r||
l||u&&t&&!v&&!r)&&d.pan(p,-y.translateSpeed*B*c,y.translateSpeed*D*c,0),h&&u&&!t&&!v&&!r||b||u&&!t&&v&&!r)&&(k=-y.zoomSpeed*D/window.innerHeight*(p-d.lastT())*100,d.pan(p,0,0,c*(Math.exp(k)-1)));y._lastX=e;y._lastY=g;y._lastMods=f;return!0}}y.mouseListener=h(a,g);a.addEventListener("touchstart",function(b){var c=f(b.changedTouches[0],a);g(0,c[0],c[1],y._lastMods);g(1,c[0],c[1],y._lastMods);b.preventDefault()},b?{passive:!1}:!1);a.addEventListener("touchmove",function(b){var c=f(b.changedTouches[0],
a);g(1,c[0],c[1],y._lastMods);b.preventDefault()},b?{passive:!1}:!1);a.addEventListener("touchend",function(a){g(0,y._lastX,y._lastY,y._lastMods);a.preventDefault()},b?{passive:!1}:!1);y.wheelListener=e(a,function(a,b){if(!1!==y.keyBindingMode&&y.enableWheel){var e=y.flipX?1:-1,g=y.flipY?1:-1,f=m();Math.abs(a)>Math.abs(b)?d.rotate(f,0,0,-a*e*Math.PI*y.rotateSpeed/window.innerWidth):y._ortho||(a=-y.zoomSpeed*g*b/window.innerHeight*(f-d.lastT())/20,d.pan(f,0,0,c*(Math.exp(a)-1)))}},!0)};y.enableMouseListeners();
return y};var m=a("right-now"),k=a("3d-view"),h=a("mouse-change"),e=a("mouse-wheel"),f=a("mouse-event-offset"),b=a("has-passive-events")},{"3d-view":47,"has-passive-events":403,"mouse-change":427,"mouse-event-offset":428,"mouse-wheel":430,"right-now":488}],285:[function(a,p,l){l=a("glslify");var m=a("gl-shader"),k=l(["precision mediump float;\n#define GLSLIFY 1\nattribute vec2 position;\nvarying vec2 uv;\nvoid main() {\n  uv \x3d position;\n  gl_Position \x3d vec4(position, 0, 1);\n}"]),h=l(["precision mediump float;\n#define GLSLIFY 1\n\nuniform sampler2D accumBuffer;\nvarying vec2 uv;\n\nvoid main() {\n  vec4 accum \x3d texture2D(accumBuffer, 0.5 * (uv + 1.0));\n  gl_FragColor \x3d min(vec4(1,1,1,1), accum);\n}"]);
p.exports=function(a){return m(a,k,h,null,[{name:"position",type:"vec2"}])}},{"gl-shader":297,glslify:401}],286:[function(a,p,l){function m(){this.mouse=[-1,-1];this.screen=null;this.distance=Infinity;this.data=this.object=this.dataPosition=this.dataCoordinate=this.index=null}function k(a,b){var c=null;try{(c=a.getContext("webgl",b))||(c=a.getContext("experimental-webgl",b))}catch(C){return null}return c}function h(a){return"boolean"===typeof a?a:!0}var e=a("./camera.js"),f=a("gl-axes3d"),b=a("gl-axes3d/properties"),
n=a("gl-spikes3d"),u=a("gl-select-static"),r=a("gl-fbo"),d=a("a-big-triangle"),g=a("mouse-change"),c=a("mouse-wheel"),v=a("gl-mat4/perspective"),t=a("gl-mat4/ortho"),y=a("./lib/shader"),B=a("is-mobile")({tablet:!0});p.exports={createScene:function(a){function l(){if(!Z._stopped&&Z.autoResize){var a=E.parentNode;if(a&&a!==document.body){var b=a.clientWidth;a=a.clientHeight}else b=window.innerWidth,a=window.innerHeight;var c=Math.ceil(b*Z.pixelRatio)|0,d=Math.ceil(a*Z.pixelRatio)|0;if(c!==E.width||
d!==E.height)E.width=c,E.height=d,c=E.style,c.position=c.position||"absolute",c.left="0px",c.top="0px",c.width=b+"px",c.height=a+"px",W=!0}}function p(){for(var a=T.length,b=S.length,c=0;c<b;++c)ia[c]=0;c=0;a:for(;c<a;++c){var d=T[c],e=d.pickSlots;if(e){for(var g=0;g<b;++g)if(255>ia[g]+e){Y[c]=g;d.setPickBase(ia[g]+1);ia[g]+=e;continue a}g=u(H,ba);Y[c]=b;S.push(g);ia.push(e);d.setPickBase(1);b+=1}else Y[c]=-1}for(;0<b&&0===ia[b-1];)ia.pop(),S.pop().dispose()}function D(){if(Z.contextLost)return!0;
if(H.isContextLost()&&(Z.contextLost=!0,Z.mouseListener.enabled=!1,Z.selection.object=null,Z.oncontextloss))Z.oncontextloss()}function q(){if(!D()){l();var a=Z.camera.tick();ea.view=Z.camera.matrix;W=W||a;fa=fa||a;w.pixelRatio=Z.pixelRatio;x.pixelRatio=Z.pixelRatio;a=T.length;var c=da[0],e=da[1];c[0]=c[1]=c[2]=Infinity;e[0]=e[1]=e[2]=-Infinity;for(var g=0;g<a;++g){var f=T[g];f.pixelRatio=Z.pixelRatio;f.axes=Z.axes;W=W||!!f.dirty;fa=fa||!!f.dirty;if(f=f.bounds){var h=f[0],k=f[1];for(f=0;3>f;++f)c[f]=
Math.min(c[f],h[f]),e[f]=Math.max(e[f],k[f])}}h=Z.bounds;if(Z.autoBounds)for(f=0;3>f;++f)e[f]<c[f]?(c[f]=-1,e[f]=1):(c[f]===e[f]&&(--c[f],e[f]+=1),g=.05*(e[f]-c[f]),c[f]-=g,e[f]+=g),h[0][f]=c[f],h[1][f]=e[f];g=!1;for(f=0;3>f;++f)g=g||F[0][f]!==h[0][f]||F[1][f]!==h[1][f],F[0][f]=h[0][f],F[1][f]=h[1][f];fa=fa||g;if(W=W||g){if(g){c=[0,0,0];for(g=0;3>g;++g)e=g,f=(h[1][g]-h[0][g])/10,k=Math.round(Math.log(Math.abs(f))/Math.log(10)),0>k?(k=Math.round(Math.pow(10,-k)),f=Math.ceil(f*k)/k):0<k?(k=Math.round(Math.pow(10,
k)),f=Math.ceil(f/k)*k):f=Math.ceil(f),c[e]=f;w.autoTicks?w.update({bounds:h,tickSpacing:c}):w.update({bounds:h})}c=H.drawingBufferWidth;e=H.drawingBufferHeight;ba[0]=c;ba[1]=e;pa[0]=Math.max(c/Z.pixelRatio,1)|0;pa[1]=Math.max(e/Z.pixelRatio,1)|0;N?(t(z,-c/e,c/e,-1,1,Z.zNear,Z.zFar),ea._ortho=!0):(v(z,Z.fovy,c/e,Z.zNear,Z.zFar),ea._ortho=!1);for(g=0;16>g;++g)ha[g]=0;ha[15]=1;for(g=f=0;3>g;++g)f=Math.max(f,h[1][g]-h[0][g]);for(g=0;3>g;++g)ha[5*g]=Z.autoScale?Z.aspect[g]/(h[1][g]-h[0][g]):1/f,Z.autoCenter&&
(ha[12+g]=.5*-ha[5*g]*(h[0][g]+h[1][g]));for(g=0;g<a;++g)f=T[g],f.axesBounds=h,Z.clipToBounds&&(f.clipBounds=h);O.object&&(x.position=Z.snapToData?O.dataCoordinate:O.dataPosition,x.bounds=h);if(fa&&(fa=!1,!D()))for(H.colorMask(!0,!0,!0,!0),H.depthMask(!0),H.disable(H.BLEND),H.enable(H.DEPTH_TEST),g=T.length,h=S.length,f=0;f<h;++f){k=S[f];k.shape=pa;k.begin();for(var n=0;n<g;++n)if(Y[n]===f){var m=T[n];m.drawPick&&(m.pixelRatio=1,m.drawPick(ea))}k.end()}Z.axesPixels=b(Z.axes,ea,c,e);if(Z.onrender)Z.onrender();
H.bindFramebuffer(H.FRAMEBUFFER,null);H.viewport(0,0,c,e);g=Z.clearColor;H.clearColor(g[0],g[1],g[2],g[3]);H.clear(H.COLOR_BUFFER_BIT|H.DEPTH_BUFFER_BIT);H.depthMask(!0);H.colorMask(!0,!0,!0,!0);H.enable(H.DEPTH_TEST);H.depthFunc(H.LEQUAL);H.disable(H.BLEND);H.disable(H.CULL_FACE);h=!1;w.enable&&(h=h||w.isTransparent(),w.draw(ea));x.axes=w;O.object&&x.draw(ea);H.disable(H.CULL_FACE);for(g=0;g<a;++g)f=T[g],f.axes=w,f.pixelRatio=Z.pixelRatio,f.isOpaque&&f.isOpaque()&&f.draw(ea),f.isTransparent&&f.isTransparent()&&
(h=!0);if(h){I.shape=ba;I.bind();H.clear(H.DEPTH_BUFFER_BIT);H.colorMask(!1,!1,!1,!1);H.depthMask(!0);H.depthFunc(H.LESS);w.enable&&w.isTransparent()&&w.drawTransparent(ea);for(g=0;g<a;++g)f=T[g],f.isOpaque&&f.isOpaque()&&f.draw(ea);H.enable(H.BLEND);H.blendEquation(H.FUNC_ADD);H.blendFunc(H.ONE,H.ONE_MINUS_SRC_ALPHA);H.colorMask(!0,!0,!0,!0);H.depthMask(!1);H.clearColor(0,0,0,0);H.clear(H.COLOR_BUFFER_BIT);w.isTransparent()&&w.drawTransparent(ea);for(g=0;g<a;++g)f=T[g],f.isTransparent&&f.isTransparent()&&
f.drawTransparent(ea);H.bindFramebuffer(H.FRAMEBUFFER,null);H.blendFunc(H.ONE,H.ONE_MINUS_SRC_ALPHA);H.disable(H.DEPTH_TEST);Q.bind();I.color[0].bind(0);Q.uniforms.accumBuffer=0;d(H);H.disable(H.BLEND)}W=!1;for(g=0;g<a;++g)T[g].dirty=!1}}}function J(){Z._stopped||Z.contextLost||(q(),requestAnimationFrame(J))}a=a||{};a.camera=a.camera||{};var E=a.canvas;E||(E=document.createElement("canvas"),a.container?a.container.appendChild(E):document.body.appendChild(E));var H=a.gl;H||(H=k(E,a.glOptions||{premultipliedAlpha:!0,
antialias:!0,preserveDrawingBuffer:B}));if(!H)throw Error("webgl not supported");var M=a.bounds||[[-10,-10,-10],[10,10,10]],O=new m,I=r(H,[H.drawingBufferWidth,H.drawingBufferHeight],{preferFloat:!B}),Q=y(H),N=a.cameraObject&&!0===a.cameraObject._ortho||a.camera.projection&&"orthographic"===a.camera.projection.type||!1,L={eye:a.camera.eye||[2,0,0],center:a.camera.center||[0,0,0],up:a.camera.up||[0,1,0],zoomMin:a.camera.zoomMax||.1,zoomMax:a.camera.zoomMin||100,mode:a.camera.mode||"turntable",_ortho:N},
R=a.axes||{},w=f(H,R);w.enable=!R.disable;var x=n(H,a.spikes||{}),T=[],Y=[],ia=[],S=[],W=!0,fa=!0,z=Array(16),ha=Array(16),ea={view:null,projection:z,model:ha,_ortho:!1};fa=!0;var ba=[H.drawingBufferWidth,H.drawingBufferHeight],la=a.cameraObject||e(E,L),Z={gl:H,contextLost:!1,pixelRatio:a.pixelRatio||1,canvas:E,selection:O,camera:la,axes:w,axesPixels:null,spikes:x,bounds:M,objects:T,shape:ba,aspect:a.aspectRatio||[1,1,1],pickRadius:a.pickRadius||10,zNear:a.zNear||.01,zFar:a.zFar||1E3,fovy:a.fovy||
Math.PI/4,clearColor:a.clearColor||[0,0,0,0],autoResize:h(a.autoResize),autoBounds:h(a.autoBounds),autoScale:!!a.autoScale,autoCenter:h(a.autoCenter),clipToBounds:h(a.clipToBounds),snapToData:!!a.snapToData,onselect:a.onselect||null,onrender:a.onrender||null,onclick:a.onclick||null,cameraParams:ea,oncontextloss:null,mouseListener:null,_stopped:!1},pa=[H.drawingBufferWidth/Z.pixelRatio|0,H.drawingBufferHeight/Z.pixelRatio|0];Z.autoResize&&l();window.addEventListener("resize",l);Z.update=function(a){Z._stopped||
(fa=W=!0)};Z.add=function(a){Z._stopped||(a.axes=w,T.push(a),Y.push(-1),fa=W=!0,p())};Z.remove=function(a){Z._stopped||(a=T.indexOf(a),0>a||(T.splice(a,1),Y.pop(),fa=W=!0,p()))};Z.dispose=function(){if(!Z._stopped&&(Z._stopped=!0,window.removeEventListener("resize",l),E.removeEventListener("webglcontextlost",D),Z.mouseListener.enabled=!1,!Z.contextLost)){w.dispose();x.dispose();for(var a=0;a<T.length;++a)T[a].dispose();I.dispose();for(a=0;a<S.length;++a)S[a].dispose();Q.dispose();x=w=H=null;T=[]}};
Z.wheelListener=c(E,function(a,b){!1!==la.keyBindingMode&&la.enableWheel&&la._ortho&&(a=a>b?1.1:1/1.1,Z.aspect[0]*=a,Z.aspect[1]*=a,Z.aspect[2]*=a,Z.redraw())},!0);Z._mouseRotating=!1;Z._prevButtons=0;Z.enableMouseListeners=function(){Z.mouseListener=g(E,function(a,b,c){if(!Z._stopped){var d=S.length,e=T.length,g=O.object;O.distance=Infinity;O.mouse[0]=b;O.mouse[1]=c;O.object=null;O.screen=null;O.dataCoordinate=O.dataPosition=null;var f=!1;if(a&&Z._prevButtons)Z._mouseRotating=!0;else{Z._mouseRotating&&
(fa=!0);Z._mouseRotating=!1;for(var h=0;h<d;++h){var k=S[h].query(b,pa[1]-c-1,Z.pickRadius);if(k&&!(k.distance>O.distance))for(var n=0;n<e;++n){var t=T[n];if(Y[n]===h){var v=t.pick(k);v&&(O.buttons=a,O.screen=k.coord,O.distance=k.distance,O.object=t,O.index=v.distance,O.dataPosition=v.position,O.dataCoordinate=v.dataCoordinate,O.data=v,f=!0)}}}}g&&g!==O.object&&(g.highlight&&g.highlight(null),W=!0);O.object&&(O.object.highlight&&O.object.highlight(O.data),W=!0);if((f=f||O.object!==g)&&Z.onselect)Z.onselect(O);
if(a&1&&!(Z._prevButtons&1)&&Z.onclick)Z.onclick(O);Z._prevButtons=a}})};E.addEventListener("webglcontextlost",D);var da=[[Infinity,Infinity,Infinity],[-Infinity,-Infinity,-Infinity]],F=[da[0].slice(),da[1].slice()];Z.enableMouseListeners();J();Z.redraw=function(){Z._stopped||(W=!0,q())};return Z},createCamera:e}},{"./camera.js":284,"./lib/shader":285,"a-big-triangle":49,"gl-axes3d":229,"gl-axes3d/properties":236,"gl-fbo":245,"gl-mat4/ortho":264,"gl-mat4/perspective":265,"gl-select-static":296,"gl-spikes3d":306,
"is-mobile":412,"mouse-change":427,"mouse-wheel":430}],287:[function(a,p,l){a=a("glslify");l.pointVertex=a(["precision mediump float;\n#define GLSLIFY 1\n\nattribute vec2 position;\n\nuniform mat3 matrix;\nuniform float pointSize;\nuniform float pointCloud;\n\nhighp float rand(vec2 co) {\n  highp float a \x3d 12.9898;\n  highp float b \x3d 78.233;\n  highp float c \x3d 43758.5453;\n  highp float d \x3d dot(co.xy, vec2(a, b));\n  highp float e \x3d mod(d, 3.14);\n  return fract(sin(e) * c);\n}\n\nvoid main() {\n  vec3 hgPosition \x3d matrix * vec3(position, 1);\n  gl_Position  \x3d vec4(hgPosition.xy, 0, hgPosition.z);\n    // if we don't jitter the point size a bit, overall point cloud\n    // saturation 'jumps' on zooming, which is disturbing and confusing\n  gl_PointSize \x3d pointSize * ((19.5 + rand(position)) / 20.0);\n  if(pointCloud !\x3d 0.0) { // pointCloud is truthy\n    // get the same square surface as circle would be\n    gl_PointSize *\x3d 0.886;\n  }\n}"]);
l.pointFragment=a(["precision mediump float;\n#define GLSLIFY 1\n\nuniform vec4 color, borderColor;\nuniform float centerFraction;\nuniform float pointCloud;\n\nvoid main() {\n  float radius;\n  vec4 baseColor;\n  if(pointCloud !\x3d 0.0) { // pointCloud is truthy\n    if(centerFraction \x3d\x3d 1.0) {\n      gl_FragColor \x3d color;\n    } else {\n      gl_FragColor \x3d mix(borderColor, color, centerFraction);\n    }\n  } else {\n    radius \x3d length(2.0 * gl_PointCoord.xy - 1.0);\n    if(radius \x3e 1.0) {\n      discard;\n    }\n    baseColor \x3d mix(borderColor, color, step(radius, centerFraction));\n    gl_FragColor \x3d vec4(baseColor.rgb * baseColor.a, baseColor.a);\n  }\n}\n"]);
l.pickVertex=a(["precision mediump float;\n#define GLSLIFY 1\n\nattribute vec2 position;\nattribute vec4 pickId;\n\nuniform mat3 matrix;\nuniform float pointSize;\nuniform vec4 pickOffset;\n\nvarying vec4 fragId;\n\nvoid main() {\n  vec3 hgPosition \x3d matrix * vec3(position, 1);\n  gl_Position  \x3d vec4(hgPosition.xy, 0, hgPosition.z);\n  gl_PointSize \x3d pointSize;\n\n  vec4 id \x3d pickId + pickOffset;\n  id.y +\x3d floor(id.x / 256.0);\n  id.x -\x3d floor(id.x / 256.0) * 256.0;\n\n  id.z +\x3d floor(id.y / 256.0);\n  id.y -\x3d floor(id.y / 256.0) * 256.0;\n\n  id.w +\x3d floor(id.z / 256.0);\n  id.z -\x3d floor(id.z / 256.0) * 256.0;\n\n  fragId \x3d id;\n}\n"]);
l.pickFragment=a(["precision mediump float;\n#define GLSLIFY 1\n\nvarying vec4 fragId;\n\nvoid main() {\n  float radius \x3d length(2.0 * gl_PointCoord.xy - 1.0);\n  if(radius \x3e 1.0) {\n    discard;\n  }\n  gl_FragColor \x3d fragId / 255.0;\n}\n"])},{glslify:401}],288:[function(a,p,l){function m(a,e,f,h,d){this.plot=a;this.offsetBuffer=e;this.pickBuffer=f;this.shader=h;this.pickShader=d;this.sizeMin=.5;this.sizeMinCap=2;this.sizeMax=20;this.areaRatio=1;this.pointCount=0;this.color=[1,0,0,1];this.borderColor=
[0,0,0,1];this.blend=!1;this.pickOffset=0;this.points=null}var k=a("gl-shader"),h=a("gl-buffer"),e=a("typedarray-pool"),f=a("./lib/shader");p.exports=function(a,e){var b=a.gl,n=h(b),d=h(b),g=k(b,f.pointVertex,f.pointFragment);b=k(b,f.pickVertex,f.pickFragment);n=new m(a,n,d,g,b);n.update(e);a.addObject(n);return n};a=m.prototype;a.dispose=function(){this.shader.dispose();this.pickShader.dispose();this.offsetBuffer.dispose();this.pickBuffer.dispose();this.plot.removeObject(this)};a.update=function(a){function b(b,
c){return b in a?a[b]:c}var f;a=a||{};this.sizeMin=b("sizeMin",.5);this.sizeMax=b("sizeMax",20);this.color=b("color",[1,0,0,1]).slice();this.areaRatio=b("areaRatio",1);this.borderColor=b("borderColor",[0,0,0,1]).slice();this.blend=b("blend",!1);var h=a.positions.length>>>1,d=a.positions instanceof Float32Array,g=a.idToIndex instanceof Int32Array&&a.idToIndex.length>=h,c=a.positions,k=d?c:e.mallocFloat32(c.length),t=g?a.idToIndex:e.mallocInt32(h);d||k.set(c);if(!g)for(k.set(c),f=0;f<h;f++)t[f]=f;this.points=
c;this.offsetBuffer.update(k);this.pickBuffer.update(t);d||e.free(k);g||e.free(t);this.pointCount=h;this.pickOffset=0};a.unifiedDraw=function(){var a=[1,0,0,0,1,0,0,0,1],e=[0,0,0,0];return function(b){var f=void 0!==b,d=f?this.pickShader:this.shader,g=this.plot.gl,c=this.plot.dataBox;if(0===this.pointCount)return b;var h=c[2]-c[0],k=c[3]-c[1],n=this.points,m=0,u=n.length>>>1,l;for(l=0;l<u;l++){var p=n[2*l],q=n[2*l+1];p>=c[0]&&p<=c[2]&&q>=c[1]&&q<=c[3]&&m++}n=this.plot.pickPixelRatio*Math.max(Math.min(this.sizeMinCap,
this.sizeMin),Math.min(this.sizeMax,this.sizeMax/Math.pow(m,.33333)));a[0]=2/h;a[4]=2/k;a[6]=-2*c[0]/h-1;a[7]=-2*c[1]/k-1;this.offsetBuffer.bind();d.bind();d.attributes.position.pointer();d.uniforms.matrix=a;d.uniforms.color=this.color;d.uniforms.borderColor=this.borderColor;d.uniforms.pointCloud=5>n;d.uniforms.pointSize=n;d.uniforms.centerFraction=Math.min(1,Math.max(0,Math.sqrt(1-this.areaRatio)));f&&(e[0]=b&255,e[1]=b>>8&255,e[2]=b>>16&255,e[3]=b>>24&255,this.pickBuffer.bind(),d.attributes.pickId.pointer(g.UNSIGNED_BYTE),
d.uniforms.pickOffset=e,this.pickOffset=b);f=g.getParameter(g.BLEND);d=g.getParameter(g.DITHER);f&&!this.blend&&g.disable(g.BLEND);d&&g.disable(g.DITHER);g.drawArrays(g.POINTS,0,this.pointCount);f&&!this.blend&&g.enable(g.BLEND);d&&g.enable(g.DITHER);return b+this.pointCount}}();a.draw=a.unifiedDraw;a.drawPick=a.unifiedDraw;a.pick=function(a,e,f){a=this.pickOffset;e=this.pointCount;if(f<a||f>=a+e)return null;f-=a;a=this.points;return{object:this,pointId:f,dataCoord:[a[2*f],a[2*f+1]]}}},{"./lib/shader":287,
"gl-buffer":237,"gl-shader":297,"typedarray-pool":529}],289:[function(a,p,l){p.exports=function(a,k,h,e){var f=k[0],b=k[1],n=k[2];k=k[3];var m=h[0],r=h[1],d=h[2];h=h[3];var g=f*m+b*r+n*d+k*h;0>g&&(g=-g,m=-m,r=-r,d=-d,h=-h);if(1E-6<1-g){var c=Math.acos(g);var v=Math.sin(c);g=Math.sin((1-e)*c)/v;e=Math.sin(e*c)/v}else g=1-e;a[0]=g*f+e*m;a[1]=g*b+e*r;a[2]=g*n+e*d;a[3]=g*k+e*h;return a}},{}],290:[function(a,p,l){p.exports=function(a){return a||0===a?a.toString():""}},{}],291:[function(a,p,l){var m=a("vectorize-text");
p.exports=function(a,e,f){var b=k[e];b||(b=k[e]={});if(a in b)return b[a];var h={textAlign:"center",textBaseline:"middle",lineHeight:1,font:e,lineSpacing:1.25,styletags:{breaklines:!0,bolds:!0,italics:!0,subscripts:!0,superscripts:!0},triangles:!0};e=m(a,h);h.triangles=!1;h=m(a,h);var u,r;if(f&&1!==f){for(u=0;u<e.positions.length;++u)for(r=0;r<e.positions[u].length;++r)e.positions[u][r]/=f;for(u=0;u<h.positions.length;++u)for(r=0;r<h.positions[u].length;++r)h.positions[u][r]/=f}f=[[Infinity,Infinity],
[-Infinity,-Infinity]];var d=h.positions.length;for(u=0;u<d;++u){var g=h.positions[u];for(r=0;2>r;++r)f[0][r]=Math.min(f[0][r],g[r]),f[1][r]=Math.max(f[1][r],g[r])}return b[a]=[e,h,f]};var k={}},{"vectorize-text":534}],292:[function(a,p,l){function m(a,b){a=k(a,b);b=a.attributes;b.position.location=0;b.color.location=1;b.glyph.location=2;b.id.location=3;return a}var k=a("gl-shader"),h=a("glslify");a=h(["precision highp float;\n#define GLSLIFY 1\n\nbool outOfRange(float a, float b, float p) {\n  return ((p \x3e max(a, b)) || \n          (p \x3c min(a, b)));\n}\n\nbool outOfRange(vec2 a, vec2 b, vec2 p) {\n  return (outOfRange(a.x, b.x, p.x) ||\n          outOfRange(a.y, b.y, p.y));\n}\n\nbool outOfRange(vec3 a, vec3 b, vec3 p) {\n  return (outOfRange(a.x, b.x, p.x) ||\n          outOfRange(a.y, b.y, p.y) ||\n          outOfRange(a.z, b.z, p.z));\n}\n\nbool outOfRange(vec4 a, vec4 b, vec4 p) {\n  return outOfRange(a.xyz, b.xyz, p.xyz);\n}\n\nattribute vec3 position;\nattribute vec4 color;\nattribute vec2 glyph;\nattribute vec4 id;\n\nuniform vec4 highlightId;\nuniform float highlightScale;\nuniform mat4 model, view, projection;\nuniform vec3 clipBounds[2];\n\nvarying vec4 interpColor;\nvarying vec4 pickId;\nvarying vec3 dataCoordinate;\n\nvoid main() {\n  if (outOfRange(clipBounds[0], clipBounds[1], position)) {\n\n    gl_Position \x3d vec4(0,0,0,0);\n  } else {\n    float scale \x3d 1.0;\n    if(distance(highlightId, id) \x3c 0.0001) {\n      scale \x3d highlightScale;\n    }\n\n    vec4 worldPosition \x3d model * vec4(position, 1);\n    vec4 viewPosition \x3d view * worldPosition;\n    viewPosition \x3d viewPosition / viewPosition.w;\n    vec4 clipPosition \x3d projection * (viewPosition + scale * vec4(glyph.x, -glyph.y, 0, 0));\n\n    gl_Position \x3d clipPosition;\n    interpColor \x3d color;\n    pickId \x3d id;\n    dataCoordinate \x3d position;\n  }\n}"]);
p=h(["precision highp float;\n#define GLSLIFY 1\n\nbool outOfRange(float a, float b, float p) {\n  return ((p \x3e max(a, b)) || \n          (p \x3c min(a, b)));\n}\n\nbool outOfRange(vec2 a, vec2 b, vec2 p) {\n  return (outOfRange(a.x, b.x, p.x) ||\n          outOfRange(a.y, b.y, p.y));\n}\n\nbool outOfRange(vec3 a, vec3 b, vec3 p) {\n  return (outOfRange(a.x, b.x, p.x) ||\n          outOfRange(a.y, b.y, p.y) ||\n          outOfRange(a.z, b.z, p.z));\n}\n\nbool outOfRange(vec4 a, vec4 b, vec4 p) {\n  return outOfRange(a.xyz, b.xyz, p.xyz);\n}\n\nattribute vec3 position;\nattribute vec4 color;\nattribute vec2 glyph;\nattribute vec4 id;\n\nuniform mat4 model, view, projection;\nuniform vec2 screenSize;\nuniform vec3 clipBounds[2];\nuniform float highlightScale, pixelRatio;\nuniform vec4 highlightId;\n\nvarying vec4 interpColor;\nvarying vec4 pickId;\nvarying vec3 dataCoordinate;\n\nvoid main() {\n  if (outOfRange(clipBounds[0], clipBounds[1], position)) {\n\n    gl_Position \x3d vec4(0,0,0,0);\n  } else {\n    float scale \x3d pixelRatio;\n    if(distance(highlightId.bgr, id.bgr) \x3c 0.001) {\n      scale *\x3d highlightScale;\n    }\n\n    vec4 worldPosition \x3d model * vec4(position, 1.0);\n    vec4 viewPosition \x3d view * worldPosition;\n    vec4 clipPosition \x3d projection * viewPosition;\n    clipPosition /\x3d clipPosition.w;\n\n    gl_Position \x3d clipPosition + vec4(screenSize * scale * vec2(glyph.x, -glyph.y), 0.0, 0.0);\n    interpColor \x3d color;\n    pickId \x3d id;\n    dataCoordinate \x3d position;\n  }\n}"]);
var e=h(["precision highp float;\n#define GLSLIFY 1\n\nbool outOfRange(float a, float b, float p) {\n  return ((p \x3e max(a, b)) || \n          (p \x3c min(a, b)));\n}\n\nbool outOfRange(vec2 a, vec2 b, vec2 p) {\n  return (outOfRange(a.x, b.x, p.x) ||\n          outOfRange(a.y, b.y, p.y));\n}\n\nbool outOfRange(vec3 a, vec3 b, vec3 p) {\n  return (outOfRange(a.x, b.x, p.x) ||\n          outOfRange(a.y, b.y, p.y) ||\n          outOfRange(a.z, b.z, p.z));\n}\n\nbool outOfRange(vec4 a, vec4 b, vec4 p) {\n  return outOfRange(a.xyz, b.xyz, p.xyz);\n}\n\nattribute vec3 position;\nattribute vec4 color;\nattribute vec2 glyph;\nattribute vec4 id;\n\nuniform float highlightScale;\nuniform vec4 highlightId;\nuniform vec3 axes[2];\nuniform mat4 model, view, projection;\nuniform vec2 screenSize;\nuniform vec3 clipBounds[2];\nuniform float scale, pixelRatio;\n\nvarying vec4 interpColor;\nvarying vec4 pickId;\nvarying vec3 dataCoordinate;\n\nvoid main() {\n  if (outOfRange(clipBounds[0], clipBounds[1], position)) {\n\n    gl_Position \x3d vec4(0,0,0,0);\n  } else {\n    float lscale \x3d pixelRatio * scale;\n    if(distance(highlightId, id) \x3c 0.0001) {\n      lscale *\x3d highlightScale;\n    }\n\n    vec4 clipCenter   \x3d projection * view * model * vec4(position, 1);\n    vec3 dataPosition \x3d position + 0.5*lscale*(axes[0] * glyph.x + axes[1] * glyph.y) * clipCenter.w * screenSize.y;\n    vec4 clipPosition \x3d projection * view * model * vec4(dataPosition, 1);\n\n    gl_Position \x3d clipPosition;\n    interpColor \x3d color;\n    pickId \x3d id;\n    dataCoordinate \x3d dataPosition;\n  }\n}\n"]),
f=h(["precision highp float;\n#define GLSLIFY 1\n\nbool outOfRange(float a, float b, float p) {\n  return ((p \x3e max(a, b)) || \n          (p \x3c min(a, b)));\n}\n\nbool outOfRange(vec2 a, vec2 b, vec2 p) {\n  return (outOfRange(a.x, b.x, p.x) ||\n          outOfRange(a.y, b.y, p.y));\n}\n\nbool outOfRange(vec3 a, vec3 b, vec3 p) {\n  return (outOfRange(a.x, b.x, p.x) ||\n          outOfRange(a.y, b.y, p.y) ||\n          outOfRange(a.z, b.z, p.z));\n}\n\nbool outOfRange(vec4 a, vec4 b, vec4 p) {\n  return outOfRange(a.xyz, b.xyz, p.xyz);\n}\n\nuniform vec3 fragClipBounds[2];\nuniform float opacity;\n\nvarying vec4 interpColor;\nvarying vec4 pickId;\nvarying vec3 dataCoordinate;\n\nvoid main() {\n  if (\n    outOfRange(fragClipBounds[0], fragClipBounds[1], dataCoordinate) ||\n    interpColor.a * opacity \x3d\x3d 0.\n  ) discard;\n  gl_FragColor \x3d interpColor * opacity;\n}\n"]);
h=h(["precision highp float;\n#define GLSLIFY 1\n\nbool outOfRange(float a, float b, float p) {\n  return ((p \x3e max(a, b)) || \n          (p \x3c min(a, b)));\n}\n\nbool outOfRange(vec2 a, vec2 b, vec2 p) {\n  return (outOfRange(a.x, b.x, p.x) ||\n          outOfRange(a.y, b.y, p.y));\n}\n\nbool outOfRange(vec3 a, vec3 b, vec3 p) {\n  return (outOfRange(a.x, b.x, p.x) ||\n          outOfRange(a.y, b.y, p.y) ||\n          outOfRange(a.z, b.z, p.z));\n}\n\nbool outOfRange(vec4 a, vec4 b, vec4 p) {\n  return outOfRange(a.xyz, b.xyz, p.xyz);\n}\n\nuniform vec3 fragClipBounds[2];\nuniform float pickGroup;\n\nvarying vec4 pickId;\nvarying vec3 dataCoordinate;\n\nvoid main() {\n  if (outOfRange(fragClipBounds[0], fragClipBounds[1], dataCoordinate)) discard;\n\n  gl_FragColor \x3d vec4(pickGroup, pickId.bgr);\n}"]);
var b=[{name:"position",type:"vec3"},{name:"color",type:"vec4"},{name:"glyph",type:"vec2"},{name:"id",type:"vec4"}],n={vertex:a,fragment:f,attributes:b},u={vertex:p,fragment:f,attributes:b},r={vertex:e,fragment:f,attributes:b},d={vertex:a,fragment:h,attributes:b},g={vertex:p,fragment:h,attributes:b},c={vertex:e,fragment:h,attributes:b};l.createPerspective=function(a){return m(a,n)};l.createOrtho=function(a){return m(a,u)};l.createProject=function(a){return m(a,r)};l.createPickPerspective=function(a){return m(a,
d)};l.createPickOrtho=function(a){return m(a,g)};l.createPickProject=function(a){return m(a,c)}},{"gl-shader":297,glslify:401}],293:[function(a,p,l){function m(a,b){var c=a[0],d=a[1],e=a[2],g=a[3];a[0]=b[0]*c+b[4]*d+b[8]*e+b[12]*g;a[1]=b[1]*c+b[5]*d+b[9]*e+b[13]*g;a[2]=b[2]*c+b[6]*d+b[10]*e+b[14]*g;a[3]=b[3]*c+b[7]*d+b[11]*e+b[15]*g;return a}function k(a,b,c,d){m(d,d,c);m(d,d,b);return m(d,d,a)}function h(a,b){this.index=a;this.dataCoordinate=this.position=b}function e(a){return!0===a||1<a?1:a}function f(a,
b,c,d,e,g,f,k,n,t,m,v){this.gl=a;this.pixelRatio=1;this.shader=b;this.orthoShader=c;this.projectShader=d;this.pointBuffer=e;this.colorBuffer=g;this.glyphBuffer=f;this.idBuffer=k;this.vao=n;this.lineVertexCount=this.vertexCount=0;this.opacity=1;this.hasAlpha=!1;this.lineWidth=0;this.projectScale=[2/3,2/3,2/3];this.projectOpacity=[1,1,1];this.projectHasAlpha=!1;this.pickId=0;this.pickPerspectiveShader=t;this.pickOrthoShader=m;this.pickProjectShader=v;this.points=[];this._selectResult=new h(0,[0,0,0]);
this.useOrtho=!0;this.bounds=[[Infinity,Infinity,Infinity],[-Infinity,-Infinity,-Infinity]];this.axesProject=[!0,!0,!0];this.axesBounds=[[-Infinity,-Infinity,-Infinity],[Infinity,Infinity,Infinity]];this.highlightId=[1,1,1,1];this.highlightScale=2;this.clipBounds=[[-Infinity,-Infinity,-Infinity],[Infinity,Infinity,Infinity]];this.dirty=!0}function b(a){a[0]=a[1]=a[2]=0;return a}function n(a,b){a[0]=b[0];a[1]=b[1];a[2]=b[2];a[3]=1;return a}function u(a,b,c,d){a[0]=b[0];a[1]=b[1];a[2]=b[2];a[c]=d;return a}
function r(a,c,d,e,g,f,h){var t=d.gl;if(f===d.projectHasAlpha||h){for(var m=d.axesProject,v=d.gl,r=c.uniforms,l=e.model||A,p=e.view||A,B=e.projection||A,D=d.axesBounds,q=d.clipBounds,G=I,L=0;2>L;++L)for(var N=0;3>N;++N)G[L][N]=Math.max(Math.min(q[L][N],1E8),-1E8);q=d.axes&&d.axes.lastCubeProps?d.axes.lastCubeProps.axis:[1,1,1];C[0]=2/v.drawingBufferWidth;C[1]=2/v.drawingBufferHeight;c.bind();r.view=p;r.projection=B;r.screenSize=C;r.highlightId=d.highlightId;r.highlightScale=d.highlightScale;r.clipBounds=
G;r.pickGroup=d.pickId/255;r.pixelRatio=g;for(c=0;3>c;++c)if(m[c]){r.scale=d.projectScale[c];r.opacity=d.projectOpacity[c];L=M;for(var R=0;16>R;++R)L[R]=0;for(R=0;4>R;++R)L[5*R]=1;L[5*c]=0;L[12+c]=0>q[c]?D[0][c]:D[1][c];y(L,l,L);r.model=L;L=(c+1)%3;N=(c+2)%3;var w=b(P),x=b(J);w[L]=1;x[N]=1;R=k(B,p,l,n(E,w));var ca=k(B,p,l,n(H,x));if(Math.abs(R[1])>Math.abs(ca[1])){var T=R;R=ca;ca=T;T=w;w=x;x=T;T=L;L=N;N=T}0>R[0]&&(w[L]=-1);0<ca[1]&&(x[N]=-1);for(R=T=ca=0;4>R;++R)ca+=Math.pow(l[4*L+R],2),T+=Math.pow(l[4*
N+R],2);w[L]/=Math.sqrt(ca);x[N]/=Math.sqrt(T);r.axes[0]=w;r.axes[1]=x;r.fragClipBounds[0]=u(O,G[0],c,-1E8);r.fragClipBounds[1]=u(O,G[1],c,1E8);d.vao.bind();d.vao.draw(v.TRIANGLES,d.vertexCount);0<d.lineWidth&&(v.lineWidth(d.lineWidth*g),d.vao.draw(v.LINES,d.lineVertexCount,d.vertexCount));d.vao.unbind()}}if(f===d.hasAlpha||h)a.bind(),a=a.uniforms,a.model=e.model||A,a.view=e.view||A,a.projection=e.projection||A,C[0]=2/t.drawingBufferWidth,C[1]=2/t.drawingBufferHeight,a.screenSize=C,a.highlightId=
d.highlightId,a.highlightScale=d.highlightScale,a.fragClipBounds=Q,a.clipBounds=d.axes.bounds,a.opacity=d.opacity,a.pickGroup=d.pickId/255,a.pixelRatio=g,d.vao.bind(),d.vao.draw(t.TRIANGLES,d.vertexCount),0<d.lineWidth&&(t.lineWidth(d.lineWidth*g),d.vao.draw(t.LINES,d.lineVertexCount,d.vertexCount)),d.vao.unbind()}function d(a,b,c,d){b=Array.isArray(a)?b<a.length?a[b]:void 0:a;b=q(b);a=!0;g(b)&&(b="▼",a=!1);c=D(b,c,d);return{mesh:c[0],lines:c[1],bounds:c[2],visible:a}}var g=a("is-string-blank"),c=
a("gl-buffer"),v=a("gl-vao"),t=a("typedarray-pool"),y=a("gl-mat4/multiply"),B=a("./lib/shaders"),D=a("./lib/glyphs"),q=a("./lib/get-simple-string"),A=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1];p.exports=function(a){var b=a.gl,d=B.createPerspective(b),e=B.createOrtho(b),g=B.createProject(b),h=B.createPickPerspective(b),k=B.createPickOrtho(b),n=B.createPickProject(b),t=c(b),m=c(b),r=c(b),u=c(b),y=v(b,[{buffer:t,size:3,type:b.FLOAT},{buffer:m,size:4,type:b.FLOAT},{buffer:r,size:2,type:b.FLOAT},{buffer:u,size:4,
type:b.UNSIGNED_BYTE,normalized:!0}]);b=new f(b,d,e,g,t,m,r,u,y,h,k,n);b.update(a);return b};a=f.prototype;a.pickSlots=1;a.setPickBase=function(a){this.pickId=a};a.isTransparent=function(){if(this.hasAlpha)return!0;for(var a=0;3>a;++a)if(this.axesProject[a]&&this.projectHasAlpha)return!0;return!1};a.isOpaque=function(){if(!this.hasAlpha)return!0;for(var a=0;3>a;++a)if(this.axesProject[a]&&!this.projectHasAlpha)return!0;return!1};var C=[0,0],P=[0,0,0],J=[0,0,0],E=[0,0,0,1],H=[0,0,0,1],M=A.slice(),
O=[0,0,0],I=[[0,0,0],[0,0,0]],Q=[[-1E8,-1E8,-1E8],[1E8,1E8,1E8]];a.draw=function(a){r(this.useOrtho?this.orthoShader:this.shader,this.projectShader,this,a,this.pixelRatio,!1,!1)};a.drawTransparent=function(a){r(this.useOrtho?this.orthoShader:this.shader,this.projectShader,this,a,this.pixelRatio,!0,!1)};a.drawPick=function(a){r(this.useOrtho?this.pickOrthoShader:this.pickPerspectiveShader,this.pickProjectShader,this,a,1,!0,!0)};a.pick=function(a){if(!a||a.id!==this.pickId)return null;var b=a.value[2]+
(a.value[1]<<8)+(a.value[0]<<16);if(b>=this.pointCount||0>b)return null;a=this.points[b];var c=this._selectResult;c.index=b;for(b=0;3>b;++b)c.position[b]=c.dataCoordinate[b]=a[b];return c};a.highlight=function(a){a?(a=a.index,this.highlightId=[(a&255)/255,(a>>8&255)/255,(a>>16&255)/255,0]):this.highlightId=[1,1,1,1]};a.update=function(a){a=a||{};"perspective"in a&&(this.useOrtho=!a.perspective);"orthographic"in a&&(this.useOrtho=!!a.orthographic);"lineWidth"in a&&(this.lineWidth=a.lineWidth);if("project"in
a)if(Array.isArray(a.project))this.axesProject=a.project;else{var b=!!a.project;this.axesProject=[b,b,b]}"projectScale"in a&&(Array.isArray(a.projectScale)?this.projectScale=a.projectScale.slice():(b=+a.projectScale,this.projectScale=[b,b,b]));this.projectHasAlpha=!1;if("projectOpacity"in a){Array.isArray(a.projectOpacity)?this.projectOpacity=a.projectOpacity.slice():(b=+a.projectOpacity,this.projectOpacity=[b,b,b]);for(var c=0;3>c;++c)this.projectOpacity[c]=e(this.projectOpacity[c]),1>this.projectOpacity[c]&&
(this.projectHasAlpha=!0)}this.hasAlpha=!1;"opacity"in a&&(this.opacity=e(a.opacity),1>this.opacity&&(this.hasAlpha=!0));this.dirty=!0;b=a.position;var g=a.font||"normal",f=a.alignment||[0,0];if(2===f.length){var h=f[0];var k=f[1]}else for(h=[],k=[],c=0;c<f.length;++c)h[c]=f[c][0],k[c]=f[c][1];f=[Infinity,Infinity,Infinity];var n=[-Infinity,-Infinity,-Infinity],m=a.glyph,v=a.color,r=a.size,u=a.angle;a=a.lineColor;var y=-1,l=0,p=0,B=0;if(b.length)a:for(B=b.length,c=0;c<B;++c){for(var D=b[c],q=0;3>
q;++q)if(isNaN(D[q])||!isFinite(D[q]))continue a;var A=d(m,c,g,this.pixelRatio),C=A.mesh,G=A.lines;l+=3*C.cells.length;p+=2*G.edges.length}c=l+p;var E=t.mallocFloat(3*c),I=t.mallocFloat(4*c),J=t.mallocFloat(2*c),N=t.mallocUint32(c);if(0<c){var P=0,H=l,M=[0,0,0,1],Q=[0,0,0,1],w=Array.isArray(v)&&Array.isArray(v[0]),O=Array.isArray(a)&&Array.isArray(a[0]);c=0;a:for(;c<B;++c){y+=1;D=b[c];for(q=0;3>q;++q){if(isNaN(D[q])||!isFinite(D[q]))continue a;n[q]=Math.max(n[q],D[q]);f[q]=Math.min(f[q],D[q])}A=d(m,
c,g,this.pixelRatio);C=A.mesh;G=A.lines;var x=A.bounds;var z=A.visible;if(z)if(Array.isArray(v))if(A=w?c<v.length?v[c]:[0,0,0,0]:v,3===A.length){for(q=0;3>q;++q)M[q]=A[q];M[3]=1}else{if(4===A.length){for(q=0;4>q;++q)M[q]=A[q];!this.hasAlpha&&1>A[3]&&(this.hasAlpha=!0)}}else M[0]=M[1]=M[2]=0,M[3]=1;else M=[1,1,1,0];if(z)if(Array.isArray(a))if(A=O?c<a.length?a[c]:[0,0,0,0]:a,3===A.length){for(q=0;3>q;++q)Q[q]=A[q];Q[q]=1}else{if(4===A.length){for(q=0;4>q;++q)Q[q]=A[q];!this.hasAlpha&&1>A[3]&&(this.hasAlpha=
!0)}}else Q[0]=Q[1]=Q[2]=0,Q[3]=1;else Q=[1,1,1,0];A=.5;z?Array.isArray(r)?A=c<r.length?+r[c]:12:r?A=+r:this.useOrtho&&(A=12):A=0;D=0;Array.isArray(u)?D=c<u.length?+u[c]:0:u&&(D=+u);z=Math.cos(D);var F=Math.sin(D);D=b[c];for(q=0;3>q;++q)n[q]=Math.max(n[q],D[q]),f[q]=Math.min(f[q],D[q]);q=0;Array.isArray(h)?q=c<h.length?h[c]:0:h&&(q=h);var oa=0;Array.isArray(k)?oa=c<k.length?k[c]:0:k&&(oa=k);q*=0<q?1-x[0][0]:0>q?1+x[1][0]:1;oa*=0<oa?1-x[0][1]:0>oa?1+x[1][1]:1;x=[q,oa];oa=C.cells||[];C=C.positions||
[];for(q=0;q<oa.length;++q)for(var K=oa[q],na=0;3>na;++na){for(var ua=0;3>ua;++ua)E[3*P+ua]=D[ua];for(ua=0;4>ua;++ua)I[4*P+ua]=M[ua];N[P]=y;ua=C[K[na]];J[2*P]=A*(z*ua[0]-F*ua[1]+x[0]);J[2*P+1]=A*(F*ua[0]+z*ua[1]+x[1]);P+=1}oa=G.edges;C=G.positions;for(q=0;q<oa.length;++q)for(K=oa[q],na=0;2>na;++na){for(ua=0;3>ua;++ua)E[3*H+ua]=D[ua];for(ua=0;4>ua;++ua)I[4*H+ua]=Q[ua];N[H]=y;ua=C[K[na]];J[2*H]=A*(z*ua[0]-F*ua[1]+x[0]);J[2*H+1]=A*(F*ua[0]+z*ua[1]+x[1]);H+=1}}}this.bounds=[f,n];this.points=b;this.pointCount=
b.length;this.vertexCount=l;this.lineVertexCount=p;this.pointBuffer.update(E);this.colorBuffer.update(I);this.glyphBuffer.update(J);this.idBuffer.update(N);t.free(E);t.free(I);t.free(J);t.free(N)};a.dispose=function(){this.shader.dispose();this.orthoShader.dispose();this.pickPerspectiveShader.dispose();this.pickOrthoShader.dispose();this.vao.dispose();this.pointBuffer.dispose();this.colorBuffer.dispose();this.glyphBuffer.dispose();this.idBuffer.dispose()}},{"./lib/get-simple-string":290,"./lib/glyphs":291,
"./lib/shaders":292,"gl-buffer":237,"gl-mat4/multiply":263,"gl-vao":319,"is-string-blank":415,"typedarray-pool":529}],294:[function(a,p,l){a=a("glslify");l.boxVertex=a(["precision mediump float;\n#define GLSLIFY 1\n\nattribute vec2 vertex;\n\nuniform vec2 cornerA, cornerB;\n\nvoid main() {\n  gl_Position \x3d vec4(mix(cornerA, cornerB, vertex), 0, 1);\n}\n"]);l.boxFragment=a(["precision mediump float;\n#define GLSLIFY 1\n\nuniform vec4 color;\n\nvoid main() {\n  gl_FragColor \x3d color;\n}\n"])},
{glslify:401}],295:[function(a,p,l){function m(a,b,e){this.plot=a;this.boxBuffer=b;this.boxShader=e;this.enabled=!0;this.selectBox=[Infinity,Infinity,-Infinity,-Infinity];this.borderColor=[0,0,0,1];this.innerFill=!1;this.innerColor=[0,0,0,.25];this.outerFill=!0;this.outerColor=[0,0,0,.5];this.borderWidth=10}var k=a("gl-shader"),h=a("gl-buffer"),e=a("./lib/shaders");p.exports=function(a,b){var f=a.gl,u=h(f,[0,0,0,1,1,0,1,1]);f=k(f,e.boxVertex,e.boxFragment);u=new m(a,u,f);u.update(b);a.addOverlay(u);
return u};a=m.prototype;a.draw=function(){if(this.enabled){var a=this.plot,b=this.selectBox,e=this.borderWidth,h=this.innerColor,k=this.outerColor,d=this.borderColor,g=a.box,c=a.screenBox,m=a.dataBox,t=a.viewBox,y=a.pixelRatio;a=(b[0]-m[0])*(t[2]-t[0])/(m[2]-m[0])+t[0];var l=(b[1]-m[1])*(t[3]-t[1])/(m[3]-m[1])+t[1],p=(b[2]-m[0])*(t[2]-t[0])/(m[2]-m[0])+t[0];b=(b[3]-m[1])*(t[3]-t[1])/(m[3]-m[1])+t[1];a=Math.max(a,t[0]);l=Math.max(l,t[1]);p=Math.min(p,t[2]);b=Math.min(b,t[3]);p<a||b<l||(g.bind(),t=
c[2]-c[0],c=c[3]-c[1],this.outerFill&&(g.drawBox(0,0,t,l,k),g.drawBox(0,l,a,b,k),g.drawBox(0,b,t,c,k),g.drawBox(p,l,t,b,k)),this.innerFill&&g.drawBox(a,l,p,b,h),0<e&&(e*=y,g.drawBox(a-e,l-e,p+e,l+e,d),g.drawBox(a-e,b-e,p+e,b+e,d),g.drawBox(a-e,l-e,a+e,b+e,d),g.drawBox(p-e,l-e,p+e,b+e,d)))}};a.update=function(a){a=a||{};this.innerFill=!!a.innerFill;this.outerFill=!!a.outerFill;this.innerColor=(a.innerColor||[0,0,0,.5]).slice();this.outerColor=(a.outerColor||[0,0,0,.5]).slice();this.borderColor=(a.borderColor||
[0,0,0,1]).slice();this.borderWidth=a.borderWidth||0;this.selectBox=(a.selectBox||this.selectBox).slice()};a.dispose=function(){this.boxBuffer.dispose();this.boxShader.dispose();this.plot.removeOverlay(this)}},{"./lib/shaders":294,"gl-buffer":237,"gl-shader":297}],296:[function(a,p,l){function m(a,b,d,e,c){this.coord=[a,b];this.id=d;this.value=e;this.distance=c}function k(a,b,d){this.gl=a;this.fbo=b;this.buffer=d;this._readTimeout=null;var e=this;this._readCallback=function(){e.gl&&(b.bind(),a.readPixels(0,
0,b.shape[0],b.shape[1],a.RGBA,a.UNSIGNED_BYTE,e.buffer),e._readTimeout=null)}}p.exports=function(a,b){var d=h(a,b);b=e.mallocUint8(b[0]*b[1]*4);return new k(a,d,b)};var h=a("gl-fbo"),e=a("typedarray-pool"),f=a("ndarray"),b=a("bit-twiddle").nextPow2,n=a("cwise/lib/wrapper")({args:["array",{offset:[0,0,1],array:0},{offset:[0,0,2],array:0},{offset:[0,0,3],array:0},"scalar","scalar","index"],pre:{body:"{this_closestD2\x3d1e8,this_closestX\x3d-1,this_closestY\x3d-1}",args:[],thisVars:["this_closestD2",
"this_closestX","this_closestY"],localVars:[]},body:{body:"{if(_inline_16_arg0_\x3c255||_inline_16_arg1_\x3c255||_inline_16_arg2_\x3c255||_inline_16_arg3_\x3c255){var _inline_16_l\x3d_inline_16_arg4_-_inline_16_arg6_[0],_inline_16_a\x3d_inline_16_arg5_-_inline_16_arg6_[1],_inline_16_f\x3d_inline_16_l*_inline_16_l+_inline_16_a*_inline_16_a;_inline_16_f\x3cthis_closestD2\x26\x26(this_closestD2\x3d_inline_16_f,this_closestX\x3d_inline_16_arg6_[0],this_closestY\x3d_inline_16_arg6_[1])}}",args:[{name:"_inline_16_arg0_",
lvalue:!1,rvalue:!0,count:1},{name:"_inline_16_arg1_",lvalue:!1,rvalue:!0,count:1},{name:"_inline_16_arg2_",lvalue:!1,rvalue:!0,count:1},{name:"_inline_16_arg3_",lvalue:!1,rvalue:!0,count:1},{name:"_inline_16_arg4_",lvalue:!1,rvalue:!0,count:1},{name:"_inline_16_arg5_",lvalue:!1,rvalue:!0,count:1},{name:"_inline_16_arg6_",lvalue:!1,rvalue:!0,count:4}],thisVars:["this_closestD2","this_closestX","this_closestY"],localVars:["_inline_16_a","_inline_16_f","_inline_16_l"]},post:{body:"{return[this_closestX,this_closestY,this_closestD2]}",
args:[],thisVars:["this_closestD2","this_closestX","this_closestY"],localVars:[]},debug:!1,funcName:"cwise",blockSize:64});a=k.prototype;Object.defineProperty(a,"shape",{get:function(){return this.gl?this.fbo.shape.slice():[0,0]},set:function(a){if(this.gl){this.fbo.shape=a;var f=this.fbo.shape[0],d=this.fbo.shape[1];if(d*f*4>this.buffer.length){e.free(this.buffer);for(var g=this.buffer=e.mallocUint8(b(d*f*4)),c=0;c<d*f*4;++c)g[c]=255}return a}}});a.begin=function(){var a=this.gl;a&&(this.fbo.bind(),
a.clearColor(1,1,1,1),a.clear(a.COLOR_BUFFER_BIT|a.DEPTH_BUFFER_BIT))};a.end=function(){var a=this.gl;a&&(a.bindFramebuffer(a.FRAMEBUFFER,null),this._readTimeout||clearTimeout(this._readTimeout),this._readTimeout=setTimeout(this._readCallback,1))};a.query=function(a,b,d){if(!this.gl)return null;var e=this.fbo.shape.slice();a|=0;b|=0;"number"!==typeof d&&(d=1);var c=Math.min(Math.max(a-d,0),e[0])|0,h=Math.min(Math.max(a+d,0),e[0])|0;a=Math.min(Math.max(b-d,0),e[1])|0;b=Math.min(Math.max(b+d,0),e[1])|
0;if(h<=c||b<=a)return null;b=[h-c,b-a];e=f(this.buffer,[b[0],b[1],4],[4,4*e[0],1],4*(c+e[0]*a));d=n(e.hi(b[0],b[1],1),d,d);b=d[0];h=d[1];if(0>b||Math.pow(this.radius,2)<d[2])return null;var k=e.get(b,h,0),r=e.get(b,h,1),u=e.get(b,h,2);e=e.get(b,h,3);return new m(b+c|0,h+a|0,k,[r,u,e],Math.sqrt(d[2]))};a.dispose=function(){this.gl&&(this.fbo.dispose(),e.free(this.buffer),this.gl=null,this._readTimeout&&clearTimeout(this._readTimeout))}},{"bit-twiddle":82,"cwise/lib/wrapper":139,"gl-fbo":245,ndarray:442,
"typedarray-pool":529}],297:[function(a,p,l){function m(a){this.gl=a;this.gl.lastAttribCount=0;this._vref=this._fref=this._relink=this.vertShader=this.fragShader=this.program=this.attributes=this.uniforms=this.types=null}function k(a,b){return a.name<b.name?-1:1}var h=a("./lib/create-uniforms"),e=a("./lib/create-attributes"),f=a("./lib/reflect"),b=a("./lib/shader-cache"),n=a("./lib/runtime-reflect"),u=a("./lib/GLError");a=m.prototype;a.bind=function(){this.program||this._relink();var a,b=this.gl.getProgramParameter(this.program,
this.gl.ACTIVE_ATTRIBUTES),e=this.gl.lastAttribCount;if(b>e)for(a=e;a<b;a++)this.gl.enableVertexAttribArray(a);else if(e>b)for(a=b;a<e;a++)this.gl.disableVertexAttribArray(a);this.gl.lastAttribCount=b;this.gl.useProgram(this.program)};a.dispose=function(){for(var a=this.gl.lastAttribCount,b=0;b<a;b++)this.gl.disableVertexAttribArray(b);this.gl.lastAttribCount=0;this._fref&&this._fref.dispose();this._vref&&this._vref.dispose();this.attributes=this.types=this.vertShader=this.fragShader=this.program=
this._relink=this._fref=this._vref=null};a.update=function(a,d,g,c){function m(){r.program=b.program(l,r._vref,r._fref,p,q);for(var a=0;a<g.length;++a)H[a]=l.getUniformLocation(r.program,g[a].name)}if(!d||1===arguments.length){var t=a;a=t.vertex;d=t.fragment;g=t.uniforms;c=t.attributes}var r=this,l=r.gl;t=r._vref;r._vref=b.shader(l,l.VERTEX_SHADER,a);t&&t.dispose();r.vertShader=r._vref.shader;t=this._fref;r._fref=b.shader(l,l.FRAGMENT_SHADER,d);t&&t.dispose();r.fragShader=r._fref.shader;if(!g||!c){t=
l.createProgram();l.attachShader(t,r.fragShader);l.attachShader(t,r.vertShader);l.linkProgram(t);if(!l.getProgramParameter(t,l.LINK_STATUS))throw t=l.getProgramInfoLog(t),new u(t,"Error linking program:"+t);g=g||n.uniforms(l,t);c=c||n.attributes(l,t);l.deleteProgram(t)}c=c.slice();c.sort(k);t=[];var p=[],q=[],A;for(A=0;A<c.length;++A){var C=c[A];if(0<=C.type.indexOf("mat")){for(var P=C.type.charAt(C.type.length-1)|0,J=Array(P),E=0;E<P;++E)J[E]=q.length,p.push(C.name+"["+E+"]"),"number"===typeof C.location?
q.push(C.location+E):Array.isArray(C.location)&&C.location.length===P&&"number"===typeof C.location[E]?q.push(C.location[E]|0):q.push(-1);t.push({name:C.name,type:C.type,locations:J})}else t.push({name:C.name,type:C.type,locations:[q.length]}),p.push(C.name),"number"===typeof C.location?q.push(C.location|0):q.push(-1)}for(A=C=0;A<q.length;++A)if(0>q[A]){for(;0<=q.indexOf(C);)C+=1;q[A]=C}var H=Array(g.length);m();r._relink=m;r.types={uniforms:f(g),attributes:f(c)};r.attributes=e(l,r,t,q);Object.defineProperty(r,
"uniforms",h(l,r,g,H))};p.exports=function(a,b,e,c,f){a=new m(a);a.update(b,e,c,f);return a}},{"./lib/GLError":298,"./lib/create-attributes":299,"./lib/create-uniforms":300,"./lib/reflect":301,"./lib/runtime-reflect":302,"./lib/shader-cache":303}],298:[function(a,p,l){function m(a,h,e){this.shortMessage=h||"";this.longMessage=e||"";this.rawError=a||"";this.message="gl-shader: "+(h||a||"")+(e?"\n"+e:"");this.stack=Error().stack}m.prototype=Error();m.prototype.name="GLError";m.prototype.constructor=
m;p.exports=m},{}],299:[function(a,p,l){function m(a,b,e,h,k,d){this._gl=a;this._wrapper=b;this._index=e;this._locations=h;this._dimension=k;this._constFunc=d}function k(a,b,e,h,k,d,g){for(var c=["gl","v"],f=[],n=0;n<k;++n)c.push("x"+n),f.push("x"+n);c.push("if(x0.length\x3d\x3d\x3dvoid 0){return gl.vertexAttrib"+k+"f(v,"+f.join()+")}else{return gl.vertexAttrib"+k+"fv(v,x0)}");var r=Function.apply(null,c),u=new m(a,b,e,h,k,r);Object.defineProperty(d,g,{set:function(b){a.disableVertexAttribArray(h[e]);
r(a,h[e],b);return b},get:function(){return u},enumerable:!0})}function h(a,b,e,h,m,d,g){for(var c=Array(m),f=Array(m),n=0;n<m;++n)k(a,b,e[n],h,m,c,n),f[n]=c[n];Object.defineProperty(c,"location",{set:function(a){if(Array.isArray(a))for(var b=0;b<m;++b)f[b].location=a[b];else for(b=0;b<m;++b)f[b].location=a+b;return a},get:function(){for(var a=Array(m),b=0;b<m;++b)a[b]=h[e[b]];return a},enumerable:!0});c.pointer=function(b,c,d,g){b=b||a.FLOAT;c=!!c;d=d||m*m;g=g||0;for(var f=0;f<m;++f){var k=h[e[f]];
a.vertexAttribPointer(k,m,b,c,d,g+f*m);a.enableVertexAttribArray(k)}};var r=Array(m),u=a["vertexAttrib"+m+"fv"];Object.defineProperty(d,g,{set:function(b){for(var c=0;c<m;++c){var d=h[e[c]];a.disableVertexAttribArray(d);if(Array.isArray(b[0]))u.call(a,d,b[c]);else{for(var g=0;g<m;++g)r[g]=b[m*c+g];u.call(a,d,r)}}return b},get:function(){return c},enumerable:!0})}p.exports=function(a,b,n,m){for(var f={},d=0,g=n.length;d<g;++d){var c=n[d],v=c.name,t=c.type;c=c.locations;switch(t){case "bool":case "int":case "float":k(a,
b,c[0],m,1,f,v);break;default:if(0<=t.indexOf("vec")){var u=t.charCodeAt(t.length-1)-48;if(2>u||4<u)throw new e("","Invalid data type for attribute "+v+": "+t);k(a,b,c[0],m,u,f,v)}else if(0<=t.indexOf("mat")){u=t.charCodeAt(t.length-1)-48;if(2>u||4<u)throw new e("","Invalid data type for attribute "+v+": "+t);h(a,b,c,m,u,f,v)}else throw new e("","Unknown data type for attribute "+v+": "+t);}}return f};var e=a("./GLError");a=m.prototype;a.pointer=function(a,b,e,h){var f=this._gl,d=this._locations[this._index];
f.vertexAttribPointer(d,this._dimension,a||f.FLOAT,!!b,e||0,h||0);f.enableVertexAttribArray(d)};a.set=function(a,b,e,h){return this._constFunc(this._locations[this._index],a,b,e,h)};Object.defineProperty(a,"location",{get:function(){return this._locations[this._index]},set:function(a){a!==this._locations[this._index]&&(this._locations[this._index]=a|0,this._wrapper.program=null);return a|0}})},{"./GLError":298}],300:[function(a,p,l){function m(a){return(new Function("y","return function(){return y}"))(a)}
function k(a,b){for(var e=Array(a),f=0;f<a;++f)e[f]=b;return e}var h=a("./reflect"),e=a("./GLError");p.exports=function(a,b,n,u){function f(a,b,c){switch(c){case "bool":case "int":case "sampler2D":case "samplerCube":return"gl.uniform1i(locations["+b+"],obj"+a+")";case "float":return"gl.uniform1f(locations["+b+"],obj"+a+")";default:var d=c.indexOf("vec");if(0<=d&&1>=d&&c.length===4+d){d=c.charCodeAt(c.length-1)-48;if(2>d||4<d)throw new e("","Invalid data type");switch(c.charAt(0)){case "b":case "i":return"gl.uniform"+
d+"iv(locations["+b+"],obj"+a+")";case "v":return"gl.uniform"+d+"fv(locations["+b+"],obj"+a+")";default:throw new e("","Unrecognized data type for vector "+name+": "+c);}}else{if(0===c.indexOf("mat")&&4===c.length){d=c.charCodeAt(c.length-1)-48;if(2>d||4<d)throw new e("","Invalid uniform dimension type for matrix "+name+": "+c);return"gl.uniformMatrix"+d+"fv(locations["+b+"],false,obj"+a+")"}throw new e("","Unknown uniform data type for "+name+": "+c);}}}function d(a,b){if("object"!==typeof b)return[[a,
b]];var c=[],e;for(e in b){var g=b[e],f=a;f=parseInt(e)+""===e?f+("["+e+"]"):f+("."+e);"object"===typeof g?c.push.apply(c,d(f,g)):c.push([f,g])}return c}function g(b){var c=["return function updateProperty(obj){"];b=d("",b);for(var e=0;e<b.length;++e){var g=b[e],h=g[0];g=g[1];u[g]&&c.push(f(h,g,n[g].type))}c.push("return obj}");return(new Function("gl","locations",c.join("\n")))(a,u)}function c(a){switch(a){case "bool":return!1;case "int":case "sampler2D":case "samplerCube":return 0;case "float":return 0;
default:var b=a.indexOf("vec");if(0<=b&&1>=b&&a.length===4+b){b=a.charCodeAt(a.length-1)-48;if(2>b||4<b)throw new e("","Invalid data type");return"b"===a.charAt(0)?k(b,!1):k(b,0)}if(0===a.indexOf("mat")&&4===a.length){b=a.charCodeAt(a.length-1)-48;if(2>b||4<b)throw new e("","Invalid uniform dimension type for matrix "+name+": "+a);return k(b*b,0)}throw new e("","Unknown uniform data type for "+name+": "+a);}}function v(d,e,f){if("object"===typeof f){var h=t(f);Object.defineProperty(d,e,{get:m(h),
set:g(f),enumerable:!0,configurable:!1})}else u[f]?Object.defineProperty(d,e,{get:(new Function("gl","wrapper","locations","return function(){return gl.getUniform(wrapper.program,locations["+f+"])}"))(a,b,u),set:g(f),enumerable:!0,configurable:!1}):d[e]=c(n[f].type)}function t(a){if(Array.isArray(a)){var b=Array(a.length);for(var c=0;c<a.length;++c)v(b,c,a[c])}else for(c in b={},a)v(b,c,a[c]);return b}var y=h(n,!0);return{get:m(t(y)),set:g(y),enumerable:!0,configurable:!0}}},{"./GLError":298,"./reflect":301}],
301:[function(a,p,l){p.exports=function(a,k){for(var h={},e=0;e<a.length;++e)for(var f=a[e].name.split("."),b=h,n=0;n<f.length;++n){var m=f[n].split("[");if(1<m.length){m[0]in b||(b[m[0]]=[]);b=b[m[0]];for(var r=1;r<m.length;++r){var d=parseInt(m[r]);r<m.length-1||n<f.length-1?(d in b||(b[d]=r<m.length-1?[]:{}),b=b[d]):b[d]=k?e:a[e].type}}else n<f.length-1?(m[0]in b||(b[m[0]]={}),b=b[m[0]]):b[m[0]]=k?e:a[e].type}return h}},{}],302:[function(a,p,l){function m(a,f){if(!h){var b=Object.keys(k);h={};
for(var e=0;e<b.length;++e){var m=b[e];h[a[m]]=k[m]}}return h[f]}l.uniforms=function(a,f){for(var b=a.getProgramParameter(f,a.ACTIVE_UNIFORMS),e=[],h=0;h<b;++h){var k=a.getActiveUniform(f,h);if(k){var d=m(a,k.type);if(1<k.size)for(var g=0;g<k.size;++g)e.push({name:k.name.replace("[0]","["+g+"]"),type:d});else e.push({name:k.name,type:d})}}return e};l.attributes=function(a,f){for(var b=a.getProgramParameter(f,a.ACTIVE_ATTRIBUTES),e=[],h=0;h<b;++h){var k=a.getActiveAttrib(f,h);k&&e.push({name:k.name,
type:m(a,k.type)})}return e};var k={FLOAT:"float",FLOAT_VEC2:"vec2",FLOAT_VEC3:"vec3",FLOAT_VEC4:"vec4",INT:"int",INT_VEC2:"ivec2",INT_VEC3:"ivec3",INT_VEC4:"ivec4",BOOL:"bool",BOOL_VEC2:"bvec2",BOOL_VEC3:"bvec3",BOOL_VEC4:"bvec4",FLOAT_MAT2:"mat2",FLOAT_MAT3:"mat3",FLOAT_MAT4:"mat4",SAMPLER_2D:"sampler2D",SAMPLER_CUBE:"samplerCube"},h=null},{}],303:[function(a,p,l){function m(a,b,d,e,c,f,h){this.id=a;this.src=b;this.type=d;this.shader=e;this.count=f;this.programs=[];this.cache=h}function k(a){this.gl=
a;this.shaders=[{},{}];this.programs={}}function h(a){var e=b.get(a);e||(e=new k(a),b.set(a,e));return e}l.shader=function(a,b,d){return h(a).getShaderReference(b,d)};l.program=function(a,b,d,e,c){return h(a).getProgram(b,d,e,c)};var e=a("./GLError"),f=a("gl-format-compiler-error"),b=new ("undefined"===typeof WeakMap?a("weakmap-shim"):WeakMap),n=0;m.prototype.dispose=function(){if(0===--this.count){for(var a=this.cache,b=a.gl,d=this.programs,e=0,c=d.length;e<c;++e){var f=a.programs[d[e]];f&&(delete a.programs[e],
b.deleteProgram(f))}b.deleteShader(this.shader);delete a.shaders[this.type===b.FRAGMENT_SHADER|0][this.src]}};a=k.prototype;a.getShaderReference=function(a,b){var d=this.gl,g=this.shaders[a===d.FRAGMENT_SHADER|0],c=g[b];if(c&&d.isShader(c.shader))c.count+=1;else{c=d.createShader(a);d.shaderSource(c,b);d.compileShader(c);if(!d.getShaderParameter(c,d.COMPILE_STATUS)){d=d.getShaderInfoLog(c);try{var h=f(d,b,a)}catch(t){throw console.warn("Failed to format compiler error: "+t),new e(d,"Error compiling shader:\n"+
d);}throw new e(d,h.short,h.long);}c=g[b]=new m(n++,b,a,c,[],1,this)}return c};a.getProgram=function(a,b,d,g){var c=[a.id,b.id,d.join(":"),g.join(":")].join("@"),f=this.programs[c];if(!f||!this.gl.isProgram(f)){f=this.programs;var h=this.gl,k=a.shader,n=b.shader,m=h.createProgram();h.attachShader(m,k);h.attachShader(m,n);for(k=0;k<d.length;++k)h.bindAttribLocation(m,g[k],d[k]);h.linkProgram(m);if(!h.getProgramParameter(m,h.LINK_STATUS))throw a=h.getProgramInfoLog(m),new e(a,"Error linking program: "+
a);f[c]=f=m;a.programs.push(c);b.programs.push(c)}return f}},{"./GLError":298,"gl-format-compiler-error":246,"weakmap-shim":539}],304:[function(a,p,l){function m(a){this.plot=a;this.enable=[!0,!0,!1,!1];this.width=[1,1,1,1];this.color=[[0,0,0,1],[0,0,0,1],[0,0,0,1],[0,0,0,1]];this.center=[Infinity,Infinity]}p.exports=function(a,h){var e=new m(a);e.update(h);a.addOverlay(e);return e};a=m.prototype;a.update=function(a){a=a||{};this.enable=(a.enable||[!0,!0,!1,!1]).slice();this.width=(a.width||[1,1,
1,1]).slice();this.color=(a.color||[[0,0,0,1],[0,0,0,1],[0,0,0,1],[0,0,0,1]]).map(function(a){return a.slice()});this.center=(a.center||[Infinity,Infinity]).slice();this.plot.setOverlayDirty()};a.draw=function(){var a=this.enable,h=this.width,e=this.color,f=this.center,b=this.plot,n=b.line,m=b.dataBox;b=b.viewBox;n.bind();if(m[0]<=f[0]&&f[0]<=m[2]&&m[1]<=f[1]&&f[1]<=m[3]){var r=b[0]+(f[0]-m[0])/(m[2]-m[0])*(b[2]-b[0]);f=b[1]+(f[1]-m[1])/(m[3]-m[1])*(b[3]-b[1]);a[0]&&n.drawLine(r,f,b[0],f,h[0],e[0]);
a[1]&&n.drawLine(r,f,r,b[1],h[1],e[1]);a[2]&&n.drawLine(r,f,b[2],f,h[2],e[2]);a[3]&&n.drawLine(r,f,r,b[3],h[3],e[3])}};a.dispose=function(){this.plot.removeOverlay(this)}},{}],305:[function(a,p,l){l=a("glslify");var m=a("gl-shader"),k=l(["precision mediump float;\n#define GLSLIFY 1\n\nattribute vec3 position, color;\nattribute float weight;\n\nuniform mat4 model, view, projection;\nuniform vec3 coordinates[3];\nuniform vec4 colors[3];\nuniform vec2 screenShape;\nuniform float lineWidth;\n\nvarying vec4 fragColor;\n\nvoid main() {\n  vec3 vertexPosition \x3d mix(coordinates[0],\n    mix(coordinates[2], coordinates[1], 0.5 * (position + 1.0)), abs(position));\n\n  vec4 clipPos \x3d projection * view * model * vec4(vertexPosition, 1.0);\n  vec2 clipOffset \x3d (projection * view * model * vec4(color, 0.0)).xy;\n  vec2 delta \x3d weight * clipOffset * screenShape;\n  vec2 lineOffset \x3d normalize(vec2(delta.y, -delta.x)) / screenShape;\n\n  gl_Position   \x3d vec4(clipPos.xy + clipPos.w * 0.5 * lineWidth * lineOffset, clipPos.z, clipPos.w);\n  fragColor     \x3d color.x * colors[0] + color.y * colors[1] + color.z * colors[2];\n}\n"]),
h=l(["precision mediump float;\n#define GLSLIFY 1\n\nvarying vec4 fragColor;\n\nvoid main() {\n  gl_FragColor \x3d fragColor;\n}"]);p.exports=function(a){return m(a,k,h,null,[{name:"position",type:"vec3"},{name:"color",type:"vec3"},{name:"weight",type:"float"}])}},{"gl-shader":297,glslify:401}],306:[function(a,p,l){function m(a,b,e,c){this.gl=a;this.buffer=b;this.vao=e;this.shader=c;this.pixelRatio=1;this.bounds=[[-1E3,-1E3,-1E3],[1E3,1E3,1E3]];this.position=[0,0,0];this.lineWidth=[2,2,2];this.colors=
[[0,0,0,1],[0,0,0,1],[0,0,0,1]];this.enabled=[!0,!0,!0];this.drawSides=[!0,!0,!0];this.axes=null}var k=a("gl-buffer"),h=a("gl-vao"),e=a("./shaders/index");p.exports=function(a,b){function d(a,b,d,e,g,f){a=[a,b,d,0,0,0,1];a[e+3]=1;a[e]=g;c.push.apply(c,a);a[6]=-1;c.push.apply(c,a);a[e]=f;c.push.apply(c,a);c.push.apply(c,a);a[6]=1;c.push.apply(c,a);a[e]=g;c.push.apply(c,a)}var c=[];d(0,0,0,0,0,1);d(0,0,0,1,0,1);d(0,0,0,2,0,1);d(1,0,0,1,-1,1);d(1,0,0,2,-1,1);d(0,1,0,0,-1,1);d(0,1,0,2,-1,1);d(0,0,1,0,
-1,1);d(0,0,1,1,-1,1);var f=k(a,c),n=h(a,[{type:a.FLOAT,buffer:f,size:3,offset:0,stride:28},{type:a.FLOAT,buffer:f,size:3,offset:12,stride:28},{type:a.FLOAT,buffer:f,size:1,offset:24,stride:28}]),r=e(a);r.attributes.position.location=0;r.attributes.color.location=1;r.attributes.weight.location=2;a=new m(a,f,n,r);a.update(b);return a};var f=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1];a=m.prototype;var b=[0,0,0],n=[0,0,0],u=[0,0];a.isTransparent=function(){return!1};a.drawTransparent=function(a){};a.draw=function(a){var d=
this.gl,e=this.vao,c=this.shader;e.bind();c.bind();var h=a.model||f,k=a.view||f;a=a.projection||f;if(this.axes)var m=this.axes.lastCubeProps.axis;for(var r=0;3>r;++r)m&&0>m[r]?(b[r]=this.bounds[0][r],n[r]=this.bounds[1][r]):(b[r]=this.bounds[1][r],n[r]=this.bounds[0][r]);u[0]=d.drawingBufferWidth;u[1]=d.drawingBufferHeight;c.uniforms.model=h;c.uniforms.view=k;c.uniforms.projection=a;c.uniforms.coordinates=[this.position,b,n];c.uniforms.colors=this.colors;c.uniforms.screenShape=u;for(r=0;3>r;++r)c.uniforms.lineWidth=
this.lineWidth[r]*this.pixelRatio,this.enabled[r]&&(e.draw(d.TRIANGLES,6,6*r),this.drawSides[r]&&e.draw(d.TRIANGLES,12,18+12*r));e.unbind()};a.update=function(a){a&&("bounds"in a&&(this.bounds=a.bounds),"position"in a&&(this.position=a.position),"lineWidth"in a&&(this.lineWidth=a.lineWidth),"colors"in a&&(this.colors=a.colors),"enabled"in a&&(this.enabled=a.enabled),"drawSides"in a&&(this.drawSides=a.drawSides))};a.dispose=function(){this.vao.dispose();this.buffer.dispose();this.shader.dispose()}},
{"./shaders/index":305,"gl-buffer":237,"gl-vao":319}],307:[function(a,p,l){var m=a("glslify");a=m(["precision highp float;\n\nprecision highp float;\n#define GLSLIFY 1\n\nvec3 getOrthogonalVector(vec3 v) {\n  // Return up-vector for only-z vector.\n  // Return ax + by + cz \x3d 0, a point that lies on the plane that has v as a normal and that isn't (0,0,0).\n  // From the above if-statement we have ||a|| \x3e 0  U  ||b|| \x3e 0.\n  // Assign z \x3d 0, x \x3d -b, y \x3d a:\n  // a*-b + b*a + c*0 \x3d -ba + ba + 0 \x3d 0\n  if (v.x*v.x \x3e v.z*v.z || v.y*v.y \x3e v.z*v.z) {\n    return normalize(vec3(-v.y, v.x, 0.0));\n  } else {\n    return normalize(vec3(0.0, v.z, -v.y));\n  }\n}\n\n// Calculate the tube vertex and normal at the given index.\n//\n// The returned vertex is for a tube ring with its center at origin, radius of length(d), pointing in the direction of d.\n//\n// Each tube segment is made up of a ring of vertices.\n// These vertices are used to make up the triangles of the tube by connecting them together in the vertex array.\n// The indexes of tube segments run from 0 to 8.\n//\nvec3 getTubePosition(vec3 d, float index, out vec3 normal) {\n  float segmentCount \x3d 8.0;\n\n  float angle \x3d 2.0 * 3.14159 * (index / segmentCount);\n\n  vec3 u \x3d getOrthogonalVector(d);\n  vec3 v \x3d normalize(cross(u, d));\n\n  vec3 x \x3d u * cos(angle) * length(d);\n  vec3 y \x3d v * sin(angle) * length(d);\n  vec3 v3 \x3d x + y;\n\n  normal \x3d normalize(v3);\n\n  return v3;\n}\n\nattribute vec4 vector;\nattribute vec4 color, position;\nattribute vec2 uv;\nuniform float vectorScale;\nuniform float tubeScale;\n\nuniform mat4 model\n           , view\n           , projection\n           , inverseModel;\nuniform vec3 eyePosition\n           , lightPosition;\n\nvarying vec3 f_normal\n           , f_lightDirection\n           , f_eyeDirection\n           , f_data\n           , f_position;\nvarying vec4 f_color;\nvarying vec2 f_uv;\n\nvoid main() {\n  // Scale the vector magnitude to stay constant with\n  // model \x26 view changes.\n  vec3 normal;\n  vec3 XYZ \x3d getTubePosition(mat3(model) * (tubeScale * vector.w * normalize(vector.xyz)), position.w, normal);\n  vec4 tubePosition \x3d model * vec4(position.xyz, 1.0) + vec4(XYZ, 0.0);\n\n  //Lighting geometry parameters\n  vec4 cameraCoordinate \x3d view * tubePosition;\n  cameraCoordinate.xyz /\x3d cameraCoordinate.w;\n  f_lightDirection \x3d lightPosition - cameraCoordinate.xyz;\n  f_eyeDirection   \x3d eyePosition - cameraCoordinate.xyz;\n  f_normal \x3d normalize((vec4(normal,0.0) * inverseModel).xyz);\n\n  // vec4 m_position  \x3d model * vec4(tubePosition, 1.0);\n  vec4 t_position  \x3d view * tubePosition;\n  gl_Position      \x3d projection * t_position;\n\n  f_color          \x3d color;\n  f_data           \x3d tubePosition.xyz;\n  f_position       \x3d position.xyz;\n  f_uv             \x3d uv;\n}\n"]);
p=m(["#extension GL_OES_standard_derivatives : enable\n\nprecision highp float;\n#define GLSLIFY 1\n\nfloat beckmannDistribution(float x, float roughness) {\n  float NdotH \x3d max(x, 0.0001);\n  float cos2Alpha \x3d NdotH * NdotH;\n  float tan2Alpha \x3d (cos2Alpha - 1.0) / cos2Alpha;\n  float roughness2 \x3d roughness * roughness;\n  float denom \x3d 3.141592653589793 * roughness2 * cos2Alpha * cos2Alpha;\n  return exp(tan2Alpha / roughness2) / denom;\n}\n\nfloat cookTorranceSpecular(\n  vec3 lightDirection,\n  vec3 viewDirection,\n  vec3 surfaceNormal,\n  float roughness,\n  float fresnel) {\n\n  float VdotN \x3d max(dot(viewDirection, surfaceNormal), 0.0);\n  float LdotN \x3d max(dot(lightDirection, surfaceNormal), 0.0);\n\n  //Half angle vector\n  vec3 H \x3d normalize(lightDirection + viewDirection);\n\n  //Geometric term\n  float NdotH \x3d max(dot(surfaceNormal, H), 0.0);\n  float VdotH \x3d max(dot(viewDirection, H), 0.000001);\n  float LdotH \x3d max(dot(lightDirection, H), 0.000001);\n  float G1 \x3d (2.0 * NdotH * VdotN) / VdotH;\n  float G2 \x3d (2.0 * NdotH * LdotN) / LdotH;\n  float G \x3d min(1.0, min(G1, G2));\n  \n  //Distribution term\n  float D \x3d beckmannDistribution(NdotH, roughness);\n\n  //Fresnel term\n  float F \x3d pow(1.0 - VdotN, fresnel);\n\n  //Multiply terms and done\n  return  G * F * D / max(3.14159265 * VdotN, 0.000001);\n}\n\nbool outOfRange(float a, float b, float p) {\n  return ((p \x3e max(a, b)) || \n          (p \x3c min(a, b)));\n}\n\nbool outOfRange(vec2 a, vec2 b, vec2 p) {\n  return (outOfRange(a.x, b.x, p.x) ||\n          outOfRange(a.y, b.y, p.y));\n}\n\nbool outOfRange(vec3 a, vec3 b, vec3 p) {\n  return (outOfRange(a.x, b.x, p.x) ||\n          outOfRange(a.y, b.y, p.y) ||\n          outOfRange(a.z, b.z, p.z));\n}\n\nbool outOfRange(vec4 a, vec4 b, vec4 p) {\n  return outOfRange(a.xyz, b.xyz, p.xyz);\n}\n\nuniform vec3 clipBounds[2];\nuniform float roughness\n            , fresnel\n            , kambient\n            , kdiffuse\n            , kspecular\n            , opacity;\nuniform sampler2D texture;\n\nvarying vec3 f_normal\n           , f_lightDirection\n           , f_eyeDirection\n           , f_data\n           , f_position;\nvarying vec4 f_color;\nvarying vec2 f_uv;\n\nvoid main() {\n  if (outOfRange(clipBounds[0], clipBounds[1], f_position)) discard;\n  vec3 N \x3d normalize(f_normal);\n  vec3 L \x3d normalize(f_lightDirection);\n  vec3 V \x3d normalize(f_eyeDirection);\n\n  if(gl_FrontFacing) {\n    N \x3d -N;\n  }\n\n  float specular \x3d min(1.0, max(0.0, cookTorranceSpecular(L, V, N, roughness, fresnel)));\n  float diffuse  \x3d min(kambient + kdiffuse * max(dot(N, L), 0.0), 1.0);\n\n  vec4 surfaceColor \x3d f_color * texture2D(texture, f_uv);\n  vec4 litColor \x3d surfaceColor.a * vec4(diffuse * surfaceColor.rgb + kspecular * vec3(1,1,1) * specular,  1.0);\n\n  gl_FragColor \x3d litColor * opacity;\n}\n"]);
var k=m(["precision highp float;\n\nprecision highp float;\n#define GLSLIFY 1\n\nvec3 getOrthogonalVector(vec3 v) {\n  // Return up-vector for only-z vector.\n  // Return ax + by + cz \x3d 0, a point that lies on the plane that has v as a normal and that isn't (0,0,0).\n  // From the above if-statement we have ||a|| \x3e 0  U  ||b|| \x3e 0.\n  // Assign z \x3d 0, x \x3d -b, y \x3d a:\n  // a*-b + b*a + c*0 \x3d -ba + ba + 0 \x3d 0\n  if (v.x*v.x \x3e v.z*v.z || v.y*v.y \x3e v.z*v.z) {\n    return normalize(vec3(-v.y, v.x, 0.0));\n  } else {\n    return normalize(vec3(0.0, v.z, -v.y));\n  }\n}\n\n// Calculate the tube vertex and normal at the given index.\n//\n// The returned vertex is for a tube ring with its center at origin, radius of length(d), pointing in the direction of d.\n//\n// Each tube segment is made up of a ring of vertices.\n// These vertices are used to make up the triangles of the tube by connecting them together in the vertex array.\n// The indexes of tube segments run from 0 to 8.\n//\nvec3 getTubePosition(vec3 d, float index, out vec3 normal) {\n  float segmentCount \x3d 8.0;\n\n  float angle \x3d 2.0 * 3.14159 * (index / segmentCount);\n\n  vec3 u \x3d getOrthogonalVector(d);\n  vec3 v \x3d normalize(cross(u, d));\n\n  vec3 x \x3d u * cos(angle) * length(d);\n  vec3 y \x3d v * sin(angle) * length(d);\n  vec3 v3 \x3d x + y;\n\n  normal \x3d normalize(v3);\n\n  return v3;\n}\n\nattribute vec4 vector;\nattribute vec4 position;\nattribute vec4 id;\n\nuniform mat4 model, view, projection;\nuniform float tubeScale;\n\nvarying vec3 f_position;\nvarying vec4 f_id;\n\nvoid main() {\n  vec3 normal;\n  vec3 XYZ \x3d getTubePosition(mat3(model) * (tubeScale * vector.w * normalize(vector.xyz)), position.w, normal);\n  vec4 tubePosition \x3d model * vec4(position.xyz, 1.0) + vec4(XYZ, 0.0);\n\n  gl_Position \x3d projection * view * tubePosition;\n  f_id        \x3d id;\n  f_position  \x3d position.xyz;\n}\n"]);
m=m(["precision highp float;\n#define GLSLIFY 1\n\nbool outOfRange(float a, float b, float p) {\n  return ((p \x3e max(a, b)) || \n          (p \x3c min(a, b)));\n}\n\nbool outOfRange(vec2 a, vec2 b, vec2 p) {\n  return (outOfRange(a.x, b.x, p.x) ||\n          outOfRange(a.y, b.y, p.y));\n}\n\nbool outOfRange(vec3 a, vec3 b, vec3 p) {\n  return (outOfRange(a.x, b.x, p.x) ||\n          outOfRange(a.y, b.y, p.y) ||\n          outOfRange(a.z, b.z, p.z));\n}\n\nbool outOfRange(vec4 a, vec4 b, vec4 p) {\n  return outOfRange(a.xyz, b.xyz, p.xyz);\n}\n\nuniform vec3  clipBounds[2];\nuniform float pickId;\n\nvarying vec3 f_position;\nvarying vec4 f_id;\n\nvoid main() {\n  if (outOfRange(clipBounds[0], clipBounds[1], f_position)) discard;\n\n  gl_FragColor \x3d vec4(pickId, f_id.xyz);\n}"]);
l.meshShader={vertex:a,fragment:p,attributes:[{name:"position",type:"vec4"},{name:"normal",type:"vec3"},{name:"color",type:"vec4"},{name:"uv",type:"vec2"},{name:"vector",type:"vec4"}]};l.pickShader={vertex:k,fragment:m,attributes:[{name:"position",type:"vec4"},{name:"id",type:"vec4"},{name:"vector",type:"vec4"}]}},{glslify:401}],308:[function(a,p,l){function m(a,b,c,d,e,g,f,h,k,n,t,m,v,r,u,y,l,p,q,w,x,W,fa,z){this.gl=a;this.cells=[];this.positions=[];this.intensity=[];this.texture=b;this.dirty=!0;
this.triShader=c;this.pickShader=d;this.trianglePositions=e;this.triangleVectors=g;this.triangleColors=h;this.triangleNormals=n;this.triangleUVs=k;this.triangleIds=f;this.triangleVAO=t;this.triangleCount=0;this.lineWidth=1;this.edgePositions=m;this.edgeColors=r;this.edgeUVs=u;this.edgeIds=v;this.edgeVAO=y;this.edgeCount=0;this.pointPositions=l;this.pointColors=q;this.pointUVs=w;this.pointSizes=x;this.pointIds=p;this.pointVAO=W;this.pointCount=0;this.contourLineWidth=1;this.contourPositions=fa;this.contourVAO=
z;this.contourCount=0;this.contourColor=[0,0,0];this.contourEnable=!1;this.pickId=1;this.bounds=[[Infinity,Infinity,Infinity],[-Infinity,-Infinity,-Infinity]];this.clipBounds=[[-Infinity,-Infinity,-Infinity],[Infinity,Infinity,Infinity]];this.lightPosition=[1E5,1E5,0];this.diffuseLight=this.ambientLight=.8;this.specularLight=2;this.roughness=.5;this.fresnel=1.5;this.tubeScale=this.opacity=1;this._projection=this._view=this._model=B;this._resolution=[1,1];this.pixelRatio=1}function k(a){a=g({colormap:a,
nshades:256,format:"rgba"});for(var b=new Uint8Array(1024),c=0;256>c;++c){for(var e=a[c],f=0;3>f;++f)b[4*c+f]=e[f];b[4*c+3]=255*e[3]}return d(b,[256,256,4],[4,0,1])}var h=a("gl-shader"),e=a("gl-buffer"),f=a("gl-vao"),b=a("gl-texture2d"),n=a("normals"),u=a("gl-mat4/multiply"),r=a("gl-mat4/invert"),d=a("ndarray"),g=a("colormap"),c=a("simplicial-complex-contour"),v=a("typedarray-pool");a=a("./shaders");var t=a.meshShader,y=a.pickShader,B=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1];a=m.prototype;a.isOpaque=function(){return 1<=
this.opacity};a.isTransparent=function(){return 1>this.opacity};a.pickSlots=1;a.setPickBase=function(a){this.pickId=a};a.highlight=function(a){if(a&&this.contourEnable){var b=c(this.cells,this.intensity,a.intensity);a=b.cells;var d=b.vertexIds;b=b.vertexWeights;for(var e=a.length,g=v.mallocFloat32(6*e),f=0,h=0;h<e;++h)for(var k=a[h],n=0;2>n;++n){var t=k[0];2===k.length&&(t=k[n]);var m=b[t],r=1-m,u=this.positions[d[t][0]];t=this.positions[d[t][1]];for(var y=0;3>y;++y)g[f++]=m*u[y]+r*t[y]}this.contourCount=
f/3|0;this.contourPositions.update(g.subarray(0,f));v.free(g)}else this.contourCount=0};a.update=function(a){a=a||{};var c=this.gl;this.dirty=!0;"contourEnable"in a&&(this.contourEnable=a.contourEnable);"contourColor"in a&&(this.contourColor=a.contourColor);"lineWidth"in a&&(this.lineWidth=a.lineWidth);"lightPosition"in a&&(this.lightPosition=a.lightPosition);"opacity"in a&&(this.opacity=a.opacity);"ambient"in a&&(this.ambientLight=a.ambient);"diffuse"in a&&(this.diffuseLight=a.diffuse);"specular"in
a&&(this.specularLight=a.specular);"roughness"in a&&(this.roughness=a.roughness);"fresnel"in a&&(this.fresnel=a.fresnel);a.texture?(this.texture.dispose(),this.texture=b(c,a.texture)):a.colormap&&(this.texture.shape=[256,256],this.texture.minFilter=c.LINEAR_MIPMAP_LINEAR,this.texture.magFilter=c.LINEAR,this.texture.setPixels(k(a.colormap)),this.texture.generateMipmap());c=a.cells;var d=a.positions,e=a.vectors;if(d&&c&&e){void 0!==a.tubeScale&&(this.tubeScale=a.tubeScale);var g=[],f=[],h=[],t=[],m=
[],v=[],r=[],u=[],y=[],l=[],p=[],B=[],q=[],D=[],w=[];this.cells=c;this.positions=d;this.vectors=e;var x=a.vertexNormals,S=a.cellNormals,W=void 0===a.vertexNormalsEpsilon?1E-6:a.vertexNormalsEpsilon,fa=void 0===a.faceNormalsEpsilon?1E-6:a.faceNormalsEpsilon;a.useFacetNormals&&!S&&(S=n.faceNormals(c,d,fa));S||x||(x=n.vertexNormals(c,d,W));W=a.vertexColors;fa=a.cellColors;var z=a.meshColor||[1,1,1,1],ha=a.vertexUVs,ea=a.vertexIntensity,ba=a.cellUVs,la=a.cellIntensity,Z=Infinity,F=-Infinity;if(!ha&&!ba)if(ea)if(a.vertexIntensityBounds)Z=
+a.vertexIntensityBounds[0],F=+a.vertexIntensityBounds[1];else for(var da=0;da<ea.length;++da){var ya=ea[da];Z=Math.min(Z,ya);F=Math.max(F,ya)}else if(la)for(da=0;da<la.length;++da)ya=la[da],Z=Math.min(Z,ya),F=Math.max(F,ya);else for(da=0;da<d.length;++da)ya=d[da][2],Z=Math.min(Z,ya),F=Math.max(F,ya);if(ea)this.intensity=ea;else if(la){var ja=d.length;da=Array(ja);for(ya=0;ya<ja;++ya)da[ya]=0;ja=c.length;for(ya=0;ya<ja;++ya)for(var K=c[ya],za=0;za<K.length;++za)da[K[za]]=la[ya];this.intensity=da}else{da=
d.length;ya=Array(da);for(ja=0;ja<da;++ja)ya[ja]=d[ja][2];this.intensity=ya}ya=a.pointSizes;a=a.pointSize||1;this.bounds=[[Infinity,Infinity,Infinity],[-Infinity,-Infinity,-Infinity]];for(da=0;da<d.length;++da){var ka=d[da];for(ja=0;3>ja;++ja)!isNaN(ka[ja])&&isFinite(ka[ja])&&(this.bounds[0][ja]=Math.min(this.bounds[0][ja],ka[ja]),this.bounds[1][ja]=Math.max(this.bounds[1][ja],ka[ja]))}var wa=za=K=0;da=0;a:for(;da<c.length;++da){var ta=c[da];switch(ta.length){case 1:var aa=ta[0];ka=d[aa];for(ja=0;3>
ja;++ja)if(isNaN(ka[ja])||!isFinite(ka[ja]))continue a;p.push(ka[0],ka[1],ka[2],ka[3]);var ma=W?W[aa]:fa?fa[da]:z;3===ma.length?B.push(ma[0],ma[1],ma[2],1):B.push(ma[0],ma[1],ma[2],ma[3]);ka=ha?ha[aa]:ea?[(ea[aa]-Z)/(F-Z),0]:ba?ba[da]:la?[(la[da]-Z)/(F-Z),0]:[(ka[2]-Z)/(F-Z),0];q.push(ka[0],ka[1]);ya?D.push(ya[aa]):D.push(a);w.push(da);wa+=1;break;case 2:for(ja=0;2>ja;++ja)for(aa=ta[ja],ka=d[aa],aa=0;3>aa;++aa)if(isNaN(ka[aa])||!isFinite(ka[aa]))continue a;for(ja=0;2>ja;++ja)aa=ta[ja],ka=d[aa],r.push(ka[0],
ka[1],ka[2]),ma=W?W[aa]:fa?fa[da]:z,3===ma.length?u.push(ma[0],ma[1],ma[2],1):u.push(ma[0],ma[1],ma[2],ma[3]),ka=ha?ha[aa]:ea?[(ea[aa]-Z)/(F-Z),0]:ba?ba[da]:la?[(la[da]-Z)/(F-Z),0]:[(ka[2]-Z)/(F-Z),0],y.push(ka[0],ka[1]),l.push(da);za+=1;break;case 3:for(ja=0;3>ja;++ja)for(aa=ta[ja],ka=d[aa],aa=0;3>aa;++aa)if(isNaN(ka[aa])||!isFinite(ka[aa]))continue a;for(ja=0;3>ja;++ja)aa=ta[2-ja],ka=d[aa],g.push(ka[0],ka[1],ka[2],ka[3]),ma=e[aa],f.push(ma[0],ma[1],ma[2],ma[3]),ma=W?W[aa]:fa?fa[da]:z,3===ma.length?
h.push(ma[0],ma[1],ma[2],1):h.push(ma[0],ma[1],ma[2],ma[3]),ka=ha?ha[aa]:ea?[(ea[aa]-Z)/(F-Z),0]:ba?ba[da]:la?[(la[da]-Z)/(F-Z),0]:[(ka[2]-Z)/(F-Z),0],m.push(ka[0],ka[1]),ka=x?x[aa]:S[da],t.push(ka[0],ka[1],ka[2]),v.push(da);K+=1}}this.pointCount=wa;this.edgeCount=za;this.triangleCount=K;this.pointPositions.update(p);this.pointColors.update(B);this.pointUVs.update(q);this.pointSizes.update(D);this.pointIds.update(new Uint32Array(w));this.edgePositions.update(r);this.edgeColors.update(u);this.edgeUVs.update(y);
this.edgeIds.update(new Uint32Array(l));this.trianglePositions.update(g);this.triangleVectors.update(f);this.triangleColors.update(h);this.triangleUVs.update(m);this.triangleNormals.update(t);this.triangleIds.update(new Uint32Array(v))}};a.drawTransparent=a.draw=function(a){a=a||{};var b=this.gl,c=a.model||B,d=a.view||B,e=a.projection||B,g=[[-1E6,-1E6,-1E6],[1E6,1E6,1E6]];for(a=0;3>a;++a)g[0][a]=Math.max(g[0][a],this.clipBounds[0][a]),g[1][a]=Math.min(g[1][a],this.clipBounds[1][a]);c={model:c,view:d,
projection:e,inverseModel:B.slice(),clipBounds:g,kambient:this.ambientLight,kdiffuse:this.diffuseLight,kspecular:this.specularLight,roughness:this.roughness,fresnel:this.fresnel,eyePosition:[0,0,0],lightPosition:[0,0,0],opacity:this.opacity,tubeScale:this.tubeScale,contourColor:this.contourColor,texture:0};c.inverseModel=r(c.inverseModel,c.model);b.disable(b.CULL_FACE);this.texture.bind(0);d=Array(16);u(d,c.view,c.model);u(d,c.projection,d);r(d,d);for(a=0;3>a;++a)c.eyePosition[a]=d[12+a]/d[15];e=
d[15];for(a=0;3>a;++a)e+=this.lightPosition[a]*d[4*a+3];for(a=0;3>a;++a){g=d[12+a];for(var f=0;3>f;++f)g+=d[4*f+a]*this.lightPosition[f];c.lightPosition[a]=g/e}0<this.triangleCount&&(a=this.triShader,a.bind(),a.uniforms=c,this.triangleVAO.bind(),b.drawArrays(b.TRIANGLES,0,3*this.triangleCount),this.triangleVAO.unbind())};a.drawPick=function(a){a=a||{};var b=this.gl,c=a.model||B,d=a.view||B;a=a.projection||B;for(var e=[[-1E6,-1E6,-1E6],[1E6,1E6,1E6]],g=0;3>g;++g)e[0][g]=Math.max(e[0][g],this.clipBounds[0][g]),
e[1][g]=Math.min(e[1][g],this.clipBounds[1][g]);this._model=[].slice.call(c);this._view=[].slice.call(d);this._projection=[].slice.call(a);this._resolution=[b.drawingBufferWidth,b.drawingBufferHeight];c={model:c,view:d,projection:a,clipBounds:e,tubeScale:this.tubeScale,pickId:this.pickId/255};d=this.pickShader;d.bind();d.uniforms=c;0<this.triangleCount&&(this.triangleVAO.bind(),b.drawArrays(b.TRIANGLES,0,3*this.triangleCount),this.triangleVAO.unbind());0<this.edgeCount&&(this.edgeVAO.bind(),b.lineWidth(this.lineWidth*
this.pixelRatio),b.drawArrays(b.LINES,0,2*this.edgeCount),this.edgeVAO.unbind())};a.pick=function(a){if(!a||a.id!==this.pickId)return null;a=a.value[0]+256*a.value[1]+65536*a.value[2];var b=this.cells[a],c=this.positions[b[1]].slice(0,3),d=this.intensity[b[1]],e=this.vectors[b[1]].slice(0,3);return{index:a,position:c,intensity:d,velocity:e,divergence:this.vectors[b[1]][3],dataCoordinate:c}};a.dispose=function(){this.texture.dispose();this.triShader.dispose();this.pickShader.dispose();this.triangleVAO.dispose();
this.trianglePositions.dispose();this.triangleVectors.dispose();this.triangleColors.dispose();this.triangleUVs.dispose();this.triangleNormals.dispose();this.triangleIds.dispose();this.edgeVAO.dispose();this.edgePositions.dispose();this.edgeColors.dispose();this.edgeUVs.dispose();this.edgeIds.dispose();this.pointVAO.dispose();this.pointPositions.dispose();this.pointColors.dispose();this.pointUVs.dispose();this.pointSizes.dispose();this.pointIds.dispose();this.contourVAO.dispose();this.contourPositions.dispose()};
p.exports=function(a,c){1===arguments.length&&(c=a,a=c.gl);var g;(g=c.triShader)||(g=h(a,t.vertex,t.fragment,null,t.attributes),g.attributes.position.location=0,g.attributes.color.location=2,g.attributes.uv.location=3,g.attributes.vector.location=5);var k=h(a,y.vertex,y.fragment,null,y.attributes);k.attributes.position.location=0;k.attributes.id.location=1;k.attributes.vector.location=5;var n=b(a,d(new Uint8Array([255,255,255,255]),[1,1,4]));n.generateMipmap();n.minFilter=a.LINEAR_MIPMAP_LINEAR;n.magFilter=
a.LINEAR;var v=e(a),r=e(a),u=e(a),l=e(a),p=e(a),B=e(a),q=f(a,[{buffer:v,type:a.FLOAT,size:4},{buffer:B,type:a.UNSIGNED_BYTE,size:4,normalized:!0},{buffer:u,type:a.FLOAT,size:4},{buffer:l,type:a.FLOAT,size:2},{buffer:p,type:a.FLOAT,size:3},{buffer:r,type:a.FLOAT,size:4}]),D=e(a),G=e(a),R=e(a),w=e(a),x=f(a,[{buffer:D,type:a.FLOAT,size:3},{buffer:w,type:a.UNSIGNED_BYTE,size:4,normalized:!0},{buffer:G,type:a.FLOAT,size:4},{buffer:R,type:a.FLOAT,size:2}]),T=e(a),Y=e(a),ia=e(a),S=e(a),W=e(a),fa=f(a,[{buffer:T,
type:a.FLOAT,size:3},{buffer:W,type:a.UNSIGNED_BYTE,size:4,normalized:!0},{buffer:Y,type:a.FLOAT,size:4},{buffer:ia,type:a.FLOAT,size:2},{buffer:S,type:a.FLOAT,size:1}]),z=e(a),ha=f(a,[{buffer:z,type:a.FLOAT,size:3}]);g=new m(a,n,g,k,v,r,B,u,l,p,q,D,w,G,R,x,T,W,Y,ia,S,fa,z,ha);g.update(c);return g}},{"./shaders":307,colormap:116,"gl-buffer":237,"gl-mat4/invert":261,"gl-mat4/multiply":263,"gl-shader":297,"gl-texture2d":314,"gl-vao":319,ndarray:442,normals:445,"simplicial-complex-contour":502,"typedarray-pool":529}],
309:[function(a,p,l){var m=a("gl-vec3"),k=a("gl-vec4"),h=function(a,b,d,e){for(var c=0,g=0;g<a.length;g++)for(var f=a[g].velocities,h=0;h<f.length;h++){var n=m.length(f[h]);n>c&&(c=n)}a=a.map(function(a){var b=c,g=a.points,f=a.velocities;a=a.divergences;m.set(m.create(),0,1,0);m.create();m.create();m.create();var h=[],n=[],t=[],v=[],r=[],u=[],y=0;k.create();for(var l=k.create(),p=0;p<g.length;p++){var B=g[p];var q=f[p];var A=a[p];0===d&&(A=.05*e);var D=m.length(q)/b;var C=k.create();m.copy(C,q);C[3]=
A;for(q=0;8>q;q++)r[q]=[B[0],B[1],B[2],q];if(0<v.length)for(q=0;8>q;q++)B=(q+1)%8,h.push(v[q],r[q],r[B],r[B],v[B],v[q]),t.push(l,C,C,C,l,l),u.push(y,D,D,D,y,y),n.push([h.length-6,h.length-5,h.length-4],[h.length-3,h.length-2,h.length-1]);y=v;v=r;r=y;l=C;y=D}return{positions:h,cells:n,vectors:t,vertexIntensity:u}});f=[];n=[];var t=[],v=[];for(g=0;g<a.length;g++){var r=a[g],u=f.length;f=f.concat(r.positions);t=t.concat(r.vectors);v=v.concat(r.vertexIntensity);for(h=0;h<r.cells.length;h++){var y=r.cells[h],
l=[];n.push(l);for(var p=0;p<y.length;p++)l.push(y[p]+u)}}return{positions:f,cells:n,vectors:t,vertexIntensity:v,colormap:b}},e=function(a,b){var c=m.create();m.add(c,a,[1E-4,0,0]);var d=this.getVelocity(c);m.subtract(d,d,b);m.scale(d,d,1E4);m.add(c,a,[0,1E-4,0]);var e=this.getVelocity(c);m.subtract(e,e,b);m.scale(e,e,1E4);m.add(c,a,[0,0,1E-4]);a=this.getVelocity(c);m.subtract(a,a,b);m.scale(a,a,1E4);m.add(c,d,e);m.add(c,c,a);return c},f=function(a){var c=this.vectors;var d=this.meshgrid,e=this.clampBorders,
g=a[0],f=a[1],h=a[2],k=d[0].length,l=d[1].length,p=d[2].length,q=b(d[0],g),E=b(d[1],f),H=b(d[2],h);a=q+1;var M=E+1,w=H+1;d[0][q]===g&&(a=q);d[1][E]===f&&(M=E);d[2][H]===h&&(w=H);e&&(q=r(q,0,k-1),a=r(a,0,k-1),E=r(E,0,l-1),M=r(M,0,l-1),H=r(H,0,p-1),w=r(w,0,p-1));if(0>q||0>E||0>H||a>=k||M>=l||w>=p)c=m.create();else{e=(g-d[0][q])/(d[0][a]-d[0][q]);f=(f-d[1][E])/(d[1][M]-d[1][E]);d=(h-d[2][H])/(d[2][w]-d[2][H]);if(0>e||1<e||isNaN(e))e=0;if(0>f||1<f||isNaN(f))f=0;if(0>d||1<d||isNaN(d))d=0;H=H*k*l;l*=w*
k;E*=k;k*=M;h=q;g=a;a=c[E+H+h];q=c[E+H+g];M=c[k+H+h];H=c[k+H+g];w=c[E+l+h];E=c[E+l+g];h=c[k+l+h];c=c[k+l+g];l=m.create();m.lerp(l,a,q,e);m.lerp(n,M,H,e);m.lerp(l,l,n,f);m.lerp(n,w,E,e);m.lerp(u,h,c,e);m.lerp(n,n,u,f);m.lerp(l,l,n,d);c=l}return c},b=function(a,b){for(var c=0;c<a.length;c++){var d=a[c];if(d===b)break;if(d>b)return c-1}return c},n=m.create(),u=m.create(),r=function(a,b,d){return a<b?b:a>d?d:a},d=function(a){var b=1/0;a.sort(function(a,b){return a-b});for(var c=1;c<a.length;c++){var d=
Math.abs(a[c]-a[c-1]);d<b&&(b=d)}return b},g=function(a){for(var b=[],c=[],e=[],g={},f={},h={},k=0;k<a.length;k++){var n=a[k],m=n[0],r=n[1];n=n[2];g[m]||(b.push(m),g[m]=!0);f[r]||(c.push(r),f[r]=!0);h[n]||(e.push(n),h[n]=!0)}a=d(b);c=d(c);e=d(e);e=Math.min(a,c,e);return isFinite(e)?e:1};p.exports=function(a,b){var c=a.startingPositions,d=a.maxLength||1E3,k=a.tubeSize||1,n=a.absoluteTubeSize;a.getDivergence||(a.getDivergence=e);a.getVelocity||(a.getVelocity=f);void 0===a.clampBorders&&(a.clampBorders=
!0);var v=[],r=b[0][0],u=b[0][1],l=b[0][2],p=b[1][0],q=b[1][1],H=b[1][2],M=function(a,b){a=b[0];var c=b[1];b=b[2];return a>=r&&a<=p&&c>=u&&c<=q&&b>=l&&b<=H},w=10*m.distance(b[0],b[1])/d,I=w*w,Q=1,N=0;m.create();2<=c.length&&(Q=g(c));for(var L=0;L<c.length;L++){var R=m.create();m.copy(R,c[L]);var x=[R],U=[],T=a.getVelocity(R),Y=R;U.push(T);var ia=[],S=a.getDivergence(R,T);S=m.length(S);S>N&&!isNaN(S)&&isFinite(S)&&(N=S);ia.push(S);v.push({points:x,velocities:U,divergences:ia});for(var W=0;W<100*d&&
x.length<d&&M(b,R);){W++;var fa=m.clone(T);T=m.squaredLength(fa);if(0===T)break;else T>I&&m.scale(fa,fa,w/Math.sqrt(T));m.add(fa,fa,R);T=a.getVelocity(fa);m.squaredDistance(Y,fa)-I>-1E-4*I&&(x.push(fa),Y=fa,U.push(T),S=a.getDivergence(fa,T),S=m.length(S),S>N&&!isNaN(S)&&isFinite(S)&&(N=S),ia.push(S));R=fa}}for(L=0;L<ia.length;L++)if(S=ia[L],isNaN(S)||!isFinite(S))ia[L]=N;a=h(v,a.colormap,N,Q);n?a.tubeScale=n:(0===N&&(N=1),a.tubeScale=.5*k*Q/N);return a};p.exports.createTubeMesh=a("./lib/tubemesh")},
{"./lib/tubemesh":308,"gl-vec3":338,"gl-vec4":374}],310:[function(a,p,l){var m=a("gl-shader");a=a("glslify");var k=a(["precision highp float;\n#define GLSLIFY 1\n\nattribute vec4 uv;\nattribute vec3 f;\nattribute vec3 normal;\n\nuniform vec3 objectOffset;\nuniform mat4 model, view, projection, inverseModel;\nuniform vec3 lightPosition, eyePosition;\nuniform sampler2D colormap;\n\nvarying float value, kill;\nvarying vec3 worldCoordinate;\nvarying vec2 planeCoordinate;\nvarying vec3 lightDirection, eyeDirection, surfaceNormal;\nvarying vec4 vColor;\n\nvoid main() {\n  vec3 localCoordinate \x3d vec3(uv.zw, f.x);\n  worldCoordinate \x3d objectOffset + localCoordinate;\n  vec4 worldPosition \x3d model * vec4(worldCoordinate, 1.0);\n  vec4 clipPosition \x3d projection * view * worldPosition;\n  gl_Position \x3d clipPosition;\n  kill \x3d f.y;\n  value \x3d f.z;\n  planeCoordinate \x3d uv.xy;\n\n  vColor \x3d texture2D(colormap, vec2(value, value));\n\n  //Lighting geometry parameters\n  vec4 cameraCoordinate \x3d view * worldPosition;\n  cameraCoordinate.xyz /\x3d cameraCoordinate.w;\n  lightDirection \x3d lightPosition - cameraCoordinate.xyz;\n  eyeDirection   \x3d eyePosition - cameraCoordinate.xyz;\n  surfaceNormal  \x3d normalize((vec4(normal,0) * inverseModel).xyz);\n}\n"]),
h=a(["precision highp float;\n#define GLSLIFY 1\n\nfloat beckmannDistribution(float x, float roughness) {\n  float NdotH \x3d max(x, 0.0001);\n  float cos2Alpha \x3d NdotH * NdotH;\n  float tan2Alpha \x3d (cos2Alpha - 1.0) / cos2Alpha;\n  float roughness2 \x3d roughness * roughness;\n  float denom \x3d 3.141592653589793 * roughness2 * cos2Alpha * cos2Alpha;\n  return exp(tan2Alpha / roughness2) / denom;\n}\n\nfloat beckmannSpecular(\n  vec3 lightDirection,\n  vec3 viewDirection,\n  vec3 surfaceNormal,\n  float roughness) {\n  return beckmannDistribution(dot(surfaceNormal, normalize(lightDirection + viewDirection)), roughness);\n}\n\nbool outOfRange(float a, float b, float p) {\n  return ((p \x3e max(a, b)) || \n          (p \x3c min(a, b)));\n}\n\nbool outOfRange(vec2 a, vec2 b, vec2 p) {\n  return (outOfRange(a.x, b.x, p.x) ||\n          outOfRange(a.y, b.y, p.y));\n}\n\nbool outOfRange(vec3 a, vec3 b, vec3 p) {\n  return (outOfRange(a.x, b.x, p.x) ||\n          outOfRange(a.y, b.y, p.y) ||\n          outOfRange(a.z, b.z, p.z));\n}\n\nbool outOfRange(vec4 a, vec4 b, vec4 p) {\n  return outOfRange(a.xyz, b.xyz, p.xyz);\n}\n\nuniform vec3 lowerBound, upperBound;\nuniform float contourTint;\nuniform vec4 contourColor;\nuniform sampler2D colormap;\nuniform vec3 clipBounds[2];\nuniform float roughness, fresnel, kambient, kdiffuse, kspecular, opacity;\nuniform float vertexColor;\n\nvarying float value, kill;\nvarying vec3 worldCoordinate;\nvarying vec3 lightDirection, eyeDirection, surfaceNormal;\nvarying vec4 vColor;\n\nvoid main() {\n  if ((kill \x3e 0.0) ||\n      (outOfRange(clipBounds[0], clipBounds[1], worldCoordinate))) discard;\n\n  vec3 N \x3d normalize(surfaceNormal);\n  vec3 V \x3d normalize(eyeDirection);\n  vec3 L \x3d normalize(lightDirection);\n\n  if(gl_FrontFacing) {\n    N \x3d -N;\n  }\n\n  float specular \x3d max(beckmannSpecular(L, V, N, roughness), 0.);\n  float diffuse  \x3d min(kambient + kdiffuse * max(dot(N, L), 0.0), 1.0);\n\n  //decide how to interpolate color — in vertex or in fragment\n  vec4 surfaceColor \x3d\n    step(vertexColor, .5) * texture2D(colormap, vec2(value, value)) +\n    step(.5, vertexColor) * vColor;\n\n  vec4 litColor \x3d surfaceColor.a * vec4(diffuse * surfaceColor.rgb + kspecular * vec3(1,1,1) * specular,  1.0);\n\n  gl_FragColor \x3d mix(litColor, contourColor, contourTint) * opacity;\n}\n"]),
e=a(["precision highp float;\n#define GLSLIFY 1\n\nattribute vec4 uv;\nattribute float f;\n\nuniform vec3 objectOffset;\nuniform mat3 permutation;\nuniform mat4 model, view, projection;\nuniform float height, zOffset;\nuniform sampler2D colormap;\n\nvarying float value, kill;\nvarying vec3 worldCoordinate;\nvarying vec2 planeCoordinate;\nvarying vec3 lightDirection, eyeDirection, surfaceNormal;\nvarying vec4 vColor;\n\nvoid main() {\n  vec3 dataCoordinate \x3d permutation * vec3(uv.xy, height);\n  worldCoordinate \x3d objectOffset + dataCoordinate;\n  vec4 worldPosition \x3d model * vec4(worldCoordinate, 1.0);\n\n  vec4 clipPosition \x3d projection * view * worldPosition;\n  clipPosition.z +\x3d zOffset;\n\n  gl_Position \x3d clipPosition;\n  value \x3d f + objectOffset.z;\n  kill \x3d -1.0;\n  planeCoordinate \x3d uv.zw;\n\n  vColor \x3d texture2D(colormap, vec2(value, value));\n\n  //Don't do lighting for contours\n  surfaceNormal   \x3d vec3(1,0,0);\n  eyeDirection    \x3d vec3(0,1,0);\n  lightDirection  \x3d vec3(0,0,1);\n}\n"]),
f=a(["precision highp float;\n#define GLSLIFY 1\n\nbool outOfRange(float a, float b, float p) {\n  return ((p \x3e max(a, b)) || \n          (p \x3c min(a, b)));\n}\n\nbool outOfRange(vec2 a, vec2 b, vec2 p) {\n  return (outOfRange(a.x, b.x, p.x) ||\n          outOfRange(a.y, b.y, p.y));\n}\n\nbool outOfRange(vec3 a, vec3 b, vec3 p) {\n  return (outOfRange(a.x, b.x, p.x) ||\n          outOfRange(a.y, b.y, p.y) ||\n          outOfRange(a.z, b.z, p.z));\n}\n\nbool outOfRange(vec4 a, vec4 b, vec4 p) {\n  return outOfRange(a.xyz, b.xyz, p.xyz);\n}\n\nuniform vec2 shape;\nuniform vec3 clipBounds[2];\nuniform float pickId;\n\nvarying float value, kill;\nvarying vec3 worldCoordinate;\nvarying vec2 planeCoordinate;\nvarying vec3 surfaceNormal;\n\nvec2 splitFloat(float v) {\n  float vh \x3d 255.0 * v;\n  float upper \x3d floor(vh);\n  float lower \x3d fract(vh);\n  return vec2(upper / 255.0, floor(lower * 16.0) / 16.0);\n}\n\nvoid main() {\n  if ((kill \x3e 0.0) ||\n      (outOfRange(clipBounds[0], clipBounds[1], worldCoordinate))) discard;\n\n  vec2 ux \x3d splitFloat(planeCoordinate.x / shape.x);\n  vec2 uy \x3d splitFloat(planeCoordinate.y / shape.y);\n  gl_FragColor \x3d vec4(pickId, ux.x, uy.x, ux.y + (uy.y/16.0));\n}\n"]);
l.createShader=function(a){a=m(a,k,h,null,[{name:"uv",type:"vec4"},{name:"f",type:"vec3"},{name:"normal",type:"vec3"}]);a.attributes.uv.location=0;a.attributes.f.location=1;a.attributes.normal.location=2;return a};l.createPickShader=function(a){a=m(a,k,f,null,[{name:"uv",type:"vec4"},{name:"f",type:"vec3"},{name:"normal",type:"vec3"}]);a.attributes.uv.location=0;a.attributes.f.location=1;a.attributes.normal.location=2;return a};l.createContourShader=function(a){a=m(a,e,h,null,[{name:"uv",type:"vec4"},
{name:"f",type:"float"}]);a.attributes.uv.location=0;a.attributes.f.location=1;return a};l.createPickContourShader=function(a){a=m(a,e,f,null,[{name:"uv",type:"vec4"},{name:"f",type:"float"}]);a.attributes.uv.location=0;a.attributes.f.location=1;return a}},{"gl-shader":297,glslify:401}],311:[function(a,p,l){arguments[4][101][0].apply(l,arguments)},{dup:101}],312:[function(a,p,l){function m(a,b,c,d,e){this.position=a;this.index=b;this.uv=c;this.level=d;this.dataCoordinate=e}function k(a){a=B([t({colormap:a,
nshades:R,format:"rgba"}).map(function(a){return[a[0],a[1],a[2],255*a[3]]})]);y.divseq(a,255);return a}function h(a,b,c,d,e,g,f,h,k,n,t,r,u,y,l){this.gl=a;this.shape=b;this.bounds=c;this.objectOffset=l;this.intensityBounds=[];this._shader=d;this._pickShader=e;this._coordinateBuffer=g;this._vao=f;this._colorMap=h;this._contourShader=k;this._contourPickShader=n;this._contourBuffer=t;this._contourVAO=r;this._contourOffsets=[[],[],[]];this._contourCounts=[[],[],[]];this._vertexCount=0;this._pickResult=
new m([0,0,0],[0,0],[0,0],[0,0,0],[0,0,0]);this._dynamicBuffer=u;this._dynamicVAO=y;this._dynamicOffsets=[0,0,0];this._dynamicCounts=[0,0,0];this.contourWidth=[1,1,1];this.contourLevels=[[1],[1],[1]];this.contourTint=[0,0,0];this.contourColor=[[.5,.5,.5,1],[.5,.5,.5,1],[.5,.5,.5,1]];this.showSurface=this.showContour=!0;this.enableHighlight=[!0,!0,!0];this.highlightColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1]];this.highlightTint=[1,1,1];this.highlightLevel=[-1,-1,-1];this.enableDynamic=[!0,!0,!0];this.dynamicLevel=
[NaN,NaN,NaN];this.dynamicColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1]];this.dynamicTint=[1,1,1];this.dynamicWidth=[1,1,1];this.axesBounds=[[Infinity,Infinity,Infinity],[-Infinity,-Infinity,-Infinity]];this.surfaceProject=[!1,!1,!1];this.contourProject=[[!1,!1,!1],[!1,!1,!1],[!1,!1,!1]];this.colorBounds=[!1,!1];this._field=[q(v.mallocFloat(1024),[0,0]),q(v.mallocFloat(1024),[0,0]),q(v.mallocFloat(1024),[0,0])];this.pickId=1;this.clipBounds=[[-Infinity,-Infinity,-Infinity],[Infinity,Infinity,Infinity]];this.snapToData=
!1;this.opacity=this.pixelRatio=1;this.lightPosition=[10,1E4,0];this.diffuseLight=this.ambientLight=.8;this.specularLight=2;this.roughness=.5;this.fresnel=1.5;this.vertexColor=0;this.dirty=!0}function e(a,b){var c,d,e=b.axes&&b.axes.lastCubeProps.axis||x,g=b.showSurface,f=b.showContour;for(c=0;3>c;++c)for(g=g||b.surfaceProject[c],d=0;3>d;++d)f=f||b.contourProject[c][d];for(c=0;3>c;++c){var h=U.projections[c];for(d=0;16>d;++d)h[d]=0;for(d=0;4>d;++d)h[5*d]=1;h[5*c]=0;h[12+c]=b.axesBounds[+(0<e[c])][c];
A(h,a.model,h);var k=U.clipBounds[c];for(h=0;2>h;++h)for(d=0;3>d;++d)k[h][d]=a.clipBounds[h][d];k[0][c]=-1E8;k[1][c]=1E8}U.showSurface=g;U.showContour=f;return U}function f(a,b){a=a||{};var c=this.gl;c.disable(c.CULL_FACE);this._colorMap.bind(0);var d=T;d.model=a.model||Q;d.view=a.view||Q;d.projection=a.projection||Q;d.lowerBound=[this.bounds[0][0],this.bounds[0][1],this.colorBounds[0]||this.bounds[0][2]];d.upperBound=[this.bounds[1][0],this.bounds[1][1],this.colorBounds[1]||this.bounds[1][2]];d.objectOffset=
this.objectOffset;d.contourColor=this.contourColor[0];d.inverseModel=C(d.inverseModel,d.model);for(a=0;2>a;++a)for(var g=d.clipBounds[a],f=0;3>f;++f)g[f]=Math.min(Math.max(this.clipBounds[a][f],-1E8),1E8);d.kambient=this.ambientLight;d.kdiffuse=this.diffuseLight;d.kspecular=this.specularLight;d.roughness=this.roughness;d.fresnel=this.fresnel;d.opacity=this.opacity;d.height=0;d.permutation=ia;d.vertexColor=this.vertexColor;g=Y;A(g,d.view,d.model);A(g,d.projection,g);C(g,g);for(a=0;3>a;++a)d.eyePosition[a]=
g[12+a]/g[15];var h=g[15];for(a=0;3>a;++a)h+=this.lightPosition[a]*g[4*a+3];for(a=0;3>a;++a){var k=g[12+a];for(f=0;3>f;++f)k+=g[4*f+a]*this.lightPosition[f];d.lightPosition[a]=k/h}g=e(d,this);if(g.showSurface&&b===1>this.opacity){this._shader.bind();this._shader.uniforms=d;this._vao.bind();this.showSurface&&this._vertexCount&&this._vao.draw(c.TRIANGLES,this._vertexCount);for(a=0;3>a;++a)this.surfaceProject[a]&&this.vertexCount&&(this._shader.uniforms.model=g.projections[a],this._shader.uniforms.clipBounds=
g.clipBounds[a],this._vao.draw(c.TRIANGLES,this._vertexCount));this._vao.unbind()}if(g.showContour&&!b){b=this._contourShader;d.kambient=1;d.kdiffuse=0;d.kspecular=0;d.opacity=1;b.bind();b.uniforms=d;h=this._contourVAO;h.bind();for(a=0;3>a;++a)for(b.uniforms.permutation=L[a],c.lineWidth(this.contourWidth[a]*this.pixelRatio),f=0;f<this.contourLevels[a].length;++f){if(f===this.highlightLevel[a])b.uniforms.contourColor=this.highlightColor[a],b.uniforms.contourTint=this.highlightTint[a];else if(0===f||
f-1===this.highlightLevel[a])b.uniforms.contourColor=this.contourColor[a],b.uniforms.contourTint=this.contourTint[a];this._contourCounts[a][f]&&(b.uniforms.height=this.contourLevels[a][f],h.draw(c.LINES,this._contourCounts[a][f],this._contourOffsets[a][f]))}for(a=0;3>a;++a)for(b.uniforms.model=g.projections[a],b.uniforms.clipBounds=g.clipBounds[a],f=0;3>f;++f)if(this.contourProject[a][f])for(b.uniforms.permutation=L[f],c.lineWidth(this.contourWidth[f]*this.pixelRatio),k=0;k<this.contourLevels[f].length;++k){if(k===
this.highlightLevel[f])b.uniforms.contourColor=this.highlightColor[f],b.uniforms.contourTint=this.highlightTint[f];else if(0===k||k-1===this.highlightLevel[f])b.uniforms.contourColor=this.contourColor[f],b.uniforms.contourTint=this.contourTint[f];this._contourCounts[f][k]&&(b.uniforms.height=this.contourLevels[f][k],h.draw(c.LINES,this._contourCounts[f][k],this._contourOffsets[f][k]))}h.unbind();h=this._dynamicVAO;h.bind();for(a=0;3>a;++a)if(0!==this._dynamicCounts[a])for(b.uniforms.model=d.model,
b.uniforms.clipBounds=d.clipBounds,b.uniforms.permutation=L[a],c.lineWidth(this.dynamicWidth[a]*this.pixelRatio),b.uniforms.contourColor=this.dynamicColor[a],b.uniforms.contourTint=this.dynamicTint[a],b.uniforms.height=this.dynamicLevel[a],h.draw(c.LINES,this._dynamicCounts[a],this._dynamicOffsets[a]),f=0;3>f;++f)this.contourProject[f][a]&&(b.uniforms.model=g.projections[f],b.uniforms.clipBounds=g.clipBounds[f],h.draw(c.LINES,this._dynamicCounts[a],this._dynamicOffsets[a]));h.unbind()}}function b(a,
b){return Array.isArray(a)?[b(a[0]),b(a[1]),b(a[2])]:[b(a),b(a),b(a)]}function n(a){return Array.isArray(a)?3===a.length?[a[0],a[1],a[2],1]:[a[0],a[1],a[2],a[3]]:[0,0,0,1]}function u(a){if(Array.isArray(a)){if(Array.isArray(a))return[n(a[0]),n(a[1]),n(a[2])];a=n(a);return[a.slice(),a.slice(),a.slice()]}}p.exports=function(a){var b=a.gl,e=E(b),f=M(b),k=H(b),n=w(b),t=d(b),m=g(b,[{buffer:t,size:4,stride:I,offset:0},{buffer:t,size:3,stride:I,offset:16},{buffer:t,size:3,stride:I,offset:28}]),v=d(b),r=
g(b,[{buffer:v,size:4,stride:20,offset:0},{buffer:v,size:1,stride:20,offset:16}]),u=d(b),y=g(b,[{buffer:u,size:2,type:b.FLOAT}]),l=c(b,1,R,b.RGBA,b.UNSIGNED_BYTE);l.minFilter=b.LINEAR;l.magFilter=b.LINEAR;b=new h(b,[0,0],[[0,0,0],[0,0,0]],e,f,t,m,l,k,n,v,r,u,y,[0,0,0]);e={levels:[[],[],[]]};for(var p in a)e[p]=a[p];e.colormap=e.colormap||"jet";b.update(e);return b};var r=a("bit-twiddle"),d=a("gl-buffer"),g=a("gl-vao"),c=a("gl-texture2d"),v=a("typedarray-pool"),t=a("colormap"),y=a("ndarray-ops"),B=
a("ndarray-pack"),q=a("ndarray"),G=a("surface-nets"),A=a("gl-mat4/multiply"),C=a("gl-mat4/invert"),P=a("binary-search-bounds"),J=a("ndarray-gradient");a=a("./lib/shaders");var E=a.createShader,H=a.createContourShader,M=a.createPickShader,w=a.createPickContourShader,I=40,Q=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],N=[[0,0],[0,1],[1,0],[1,1],[1,0],[0,1]],L=[[0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0]];(function(){for(var a=0;3>a;++a){var b=L[a],c=(a+2)%3;b[(a+1)%3]=1;b[c+3]=1;b[a+6]=1}})();
var R=256;a=h.prototype;a.isTransparent=function(){return 1>this.opacity};a.isOpaque=function(){if(1<=this.opacity)return!0;for(var a=0;3>a;++a)if(0<this._contourCounts[a].length||0<this._dynamicCounts[a])return!0;return!1};a.pickSlots=1;a.setPickBase=function(a){this.pickId=a};var x=[0,0,0],U={showSurface:!1,showContour:!1,projections:[Q.slice(),Q.slice(),Q.slice()],clipBounds:[[[0,0,0],[0,0,0]],[[0,0,0],[0,0,0]],[[0,0,0],[0,0,0]]]},T={model:Q,view:Q,projection:Q,inverseModel:Q.slice(),lowerBound:[0,
0,0],upperBound:[0,0,0],colorMap:0,clipBounds:[[0,0,0],[0,0,0]],height:0,contourTint:0,contourColor:[0,0,0,1],permutation:[1,0,0,0,1,0,0,0,1],zOffset:-1E-4,objectOffset:[0,0,0],kambient:1,kdiffuse:1,kspecular:1,lightPosition:[1E3,1E3,1E3],eyePosition:[0,0,0],roughness:1,fresnel:1,opacity:1,vertexColor:0},Y=Q.slice(),ia=[1,0,0,0,1,0,0,0,1];a.draw=function(a){return f.call(this,a,!1)};a.drawTransparent=function(a){return f.call(this,a,!0)};var S={model:Q,view:Q,projection:Q,inverseModel:Q,clipBounds:[[0,
0,0],[0,0,0]],height:0,shape:[0,0],pickId:0,lowerBound:[0,0,0],upperBound:[0,0,0],zOffset:0,objectOffset:[0,0,0],permutation:[1,0,0,0,1,0,0,0,1],lightPosition:[0,0,0],eyePosition:[0,0,0]};a.drawPick=function(a){a=a||{};var b=this.gl;b.disable(b.CULL_FACE);S.model=a.model||Q;S.view=a.view||Q;S.projection=a.projection||Q;S.shape=this._field[2].shape;S.pickId=this.pickId/255;S.lowerBound=this.bounds[0];S.upperBound=this.bounds[1];S.objectOffset=this.objectOffset;S.permutation=ia;for(a=0;2>a;++a)for(var c=
S.clipBounds[a],d=0;3>d;++d)c[d]=Math.min(Math.max(this.clipBounds[a][d],-1E8),1E8);c=e(S,this);if(c.showSurface){this._pickShader.bind();this._pickShader.uniforms=S;this._vao.bind();this._vao.draw(b.TRIANGLES,this._vertexCount);for(a=0;3>a;++a)this.surfaceProject[a]&&(this._pickShader.uniforms.model=c.projections[a],this._pickShader.uniforms.clipBounds=c.clipBounds[a],this._vao.draw(b.TRIANGLES,this._vertexCount));this._vao.unbind()}if(c.showContour){var g=this._contourPickShader;g.bind();g.uniforms=
S;var f=this._contourVAO;f.bind();for(d=0;3>d;++d)for(b.lineWidth(this.contourWidth[d]*this.pixelRatio),g.uniforms.permutation=L[d],a=0;a<this.contourLevels[d].length;++a)this._contourCounts[d][a]&&(g.uniforms.height=this.contourLevels[d][a],f.draw(b.LINES,this._contourCounts[d][a],this._contourOffsets[d][a]));for(a=0;3>a;++a)for(g.uniforms.model=c.projections[a],g.uniforms.clipBounds=c.clipBounds[a],d=0;3>d;++d)if(this.contourProject[a][d]){g.uniforms.permutation=L[d];b.lineWidth(this.contourWidth[d]*
this.pixelRatio);for(var h=0;h<this.contourLevels[d].length;++h)this._contourCounts[d][h]&&(g.uniforms.height=this.contourLevels[d][h],f.draw(b.LINES,this._contourCounts[d][h],this._contourOffsets[d][h]))}f.unbind()}};a.pick=function(a){if(!a||a.id!==this.pickId)return null;var b=this._field[2].shape,c=this._pickResult,d=b[0]*(a.value[0]+(a.value[2]>>4)/16)/255,e=Math.floor(d),g=d-e;a=b[1]*(a.value[1]+(a.value[2]&15)/16)/255;var f=Math.floor(a),h=a-f;e+=1;f+=1;for(var k=c.position,n=k[0]=k[1]=k[2]=
0;2>n;++n)for(var t=n?g:1-g,m=0;2>m;++m)for(var v=e+n,r=f+m,u=t*(m?h:1-h),y=0;3>y;++y)k[y]+=this._field[y].get(v,r)*u;n=this._pickResult.level;for(t=0;3>t;++t)n[t]=P.le(this.contourLevels[t],k[t]),0>n[t]?0<this.contourLevels[t].length&&(n[t]=0):n[t]<this.contourLevels[t].length-1&&Math.abs(this.contourLevels[t][n[t]]-k[t])>Math.abs(this.contourLevels[t][n[t]+1]-k[t])&&(n[t]+=1);c.index[0]=.5>g?e:e+1;c.index[1]=.5>h?f:f+1;c.uv[0]=d/b[0];c.uv[1]=a/b[1];for(y=0;3>y;++y)c.dataCoordinate[y]=this._field[y].get(c.index[0],
c.index[1]);return c};a.padField=function(a,b){var c=b.shape.slice(),d=a.shape.slice();y.assign(a.lo(1,1).hi(c[0],c[1]),b);y.assign(a.lo(1).hi(c[0],1),b.hi(c[0],1));y.assign(a.lo(1,d[1]-1).hi(c[0],1),b.lo(0,c[1]-1).hi(c[0],1));y.assign(a.lo(0,1).hi(1,c[1]),b.hi(1));y.assign(a.lo(d[0]-1,1).hi(1,c[1]),b.lo(c[0]-1));a.set(0,0,b.get(0,0));a.set(0,d[1]-1,b.get(0,c[1]-1));a.set(d[0]-1,0,b.get(c[0]-1,0));a.set(d[0]-1,d[1]-1,b.get(c[0]-1,c[1]-1))};a.update=function(a){a=a||{};this.objectOffset=a.objectOffset||
this.objectOffset;this.dirty=!0;"contourWidth"in a&&(this.contourWidth=b(a.contourWidth,Number));"showContour"in a&&(this.showContour=b(a.showContour,Boolean));"showSurface"in a&&(this.showSurface=!!a.showSurface);"contourTint"in a&&(this.contourTint=b(a.contourTint,Boolean));"contourColor"in a&&(this.contourColor=u(a.contourColor));"contourProject"in a&&(this.contourProject=b(a.contourProject,function(a){return b(a,Boolean)}));"surfaceProject"in a&&(this.surfaceProject=a.surfaceProject);"dynamicColor"in
a&&(this.dynamicColor=u(a.dynamicColor));"dynamicTint"in a&&(this.dynamicTint=b(a.dynamicTint,Number));"dynamicWidth"in a&&(this.dynamicWidth=b(a.dynamicWidth,Number));"opacity"in a&&(this.opacity=a.opacity);"colorBounds"in a&&(this.colorBounds=a.colorBounds);"vertexColor"in a&&(this.vertexColor=a.vertexColor?1:0);var c=a.field||a.coords&&a.coords[2]||null,d=!1;c||(c=this._field[2].shape[0]||this._field[2].shape[2]?this._field[2].lo(1,1).hi(this._field[2].shape[0]-2,this._field[2].shape[1]-2):this._field[2].hi(0,
0));if("field"in a||"coords"in a){var e=(c.shape[0]+2)*(c.shape[1]+2);e>this._field[2].data.length&&(v.freeFloat(this._field[2].data),this._field[2].data=v.mallocFloat(r.nextPow2(e)));this._field[2]=q(this._field[2].data,[c.shape[0]+2,c.shape[1]+2]);this.padField(this._field[2],c);e=this.shape=c.shape.slice();for(c=0;2>c;++c)this._field[2].size>this._field[c].data.length&&(v.freeFloat(this._field[c].data),this._field[c].data=v.mallocFloat(this._field[2].size)),this._field[c]=q(this._field[c].data,
[e[0]+2,e[1]+2]);if(a.coords){var g=a.coords;if(!Array.isArray(g)||3!==g.length)throw Error("gl-surface: invalid coordinates for x/y");for(c=0;2>c;++c){var f=g[c];for(h=0;2>h;++h)if(f.shape[h]!==e[h])throw Error("gl-surface: coords have incorrect shape");this.padField(this._field[c],f)}}else if(a.ticks){h=a.ticks;if(!Array.isArray(h)||2!==h.length)throw Error("gl-surface: invalid ticks");for(c=0;2>c;++c){g=h[c];if(Array.isArray(g)||g.length)g=q(g);if(g.shape[0]!==e[c])throw Error("gl-surface: invalid tick length");
f=q(g.data,e);f.stride[c]=g.stride[0];f.stride[c^1]=0;this.padField(this._field[c],f)}}else{for(c=0;2>c;++c)h=[0,0],h[c]=1,this._field[c]=q(this._field[c].data,[e[0]+2,e[1]+2],h,0);this._field[0].set(0,0,0);for(var h=0;h<e[0];++h)this._field[0].set(h+1,0,h);this._field[0].set(e[0]+1,0,e[0]-1);this._field[1].set(0,0,0);for(h=0;h<e[1];++h)this._field[1].set(0,h+1,h);this._field[1].set(0,e[1]+1,e[1]-1)}h=this._field;g=q(v.mallocFloat(6*h[2].size),[3,e[0]+2,e[1]+2,2]);for(c=0;3>c;++c)J(g.pick(c),h[c],
"mirror");var n=q(v.mallocFloat(3*h[2].size),[e[0]+2,e[1]+2,3]);for(c=0;c<e[0]+2;++c)for(h=0;h<e[1]+2;++h){f=g.get(0,c,h,0);var t=g.get(0,c,h,1),m=g.get(1,c,h,0),y=g.get(1,c,h,1),l=g.get(2,c,h,0),p=g.get(2,c,h,1),B=m*p-y*l;l=l*t-p*f;p=f*y-t*m;f=Math.sqrt(B*B+l*l+p*p);1E-8>f?(f=Math.max(Math.abs(B),Math.abs(l),Math.abs(p)),1E-8>f?(p=1,l=B=0,f=1):f=1/f):f=1/Math.sqrt(f);n.set(c,h,0,B*f);n.set(c,h,1,l*f);n.set(c,h,2,p*f)}v.free(g.data);var A=[Infinity,Infinity,Infinity],D=[-Infinity,-Infinity,-Infinity],
C=Infinity,L=-Infinity,E=v.mallocFloat(r.nextPow2((e[0]-1)*(e[1]-1)*60)),I=0;for(c=g=0;c<e[0]-1;++c)a:for(h=0;h<e[1]-1;++h){for(B=0;2>B;++B)for(l=0;2>l;++l)for(f=0;3>f;++f)if(t=this._field[f].get(1+c+B,1+h+l),isNaN(t)||!isFinite(t))continue a;for(f=0;6>f;++f){m=c+N[f][0];y=h+N[f][1];var P=this._field[0].get(m+1,y+1),H=this._field[1].get(m+1,y+1);t=this._field[2].get(m+1,y+1);B=n.get(m+1,y+1,0);l=n.get(m+1,y+1,1);p=n.get(m+1,y+1,2);a.intensity&&(M=a.intensity.get(m,y));var M=a.intensity?a.intensity.get(m,
y):t+this.objectOffset[2];E[I++]=m;E[I++]=y;E[I++]=P;E[I++]=H;E[I++]=t;E[I++]=0;E[I++]=M;E[I++]=B;E[I++]=l;E[I++]=p;A[0]=Math.min(A[0],P+this.objectOffset[0]);A[1]=Math.min(A[1],H+this.objectOffset[1]);A[2]=Math.min(A[2],t+this.objectOffset[2]);C=Math.min(C,M);D[0]=Math.max(D[0],P+this.objectOffset[0]);D[1]=Math.max(D[1],H+this.objectOffset[1]);D[2]=Math.max(D[2],t+this.objectOffset[2]);L=Math.max(L,M);g+=1}}a.intensityBounds&&(C=+a.intensityBounds[0],L=+a.intensityBounds[1]);for(c=6;c<I;c+=10)E[c]=
(E[c]-C)/(L-C);this._vertexCount=g;this._coordinateBuffer.update(E.subarray(0,I));v.freeFloat(E);v.free(n.data);this.bounds=[A,D];this.intensity=a.intensity||this._field[2];if(this.intensityBounds[0]!==C||this.intensityBounds[1]!==L)d=!0;this.intensityBounds=[C,L]}if("levels"in a){e=a.levels;e=Array.isArray(e[0])?e.slice():[[],[],e];for(c=0;3>c;++c)e[c]=e[c].slice(),e[c].sort(function(a,b){return a-b});for(c=0;3>c;++c)for(h=0;h<e[c].length;++h)e[c][h]-=this.objectOffset[c];c=0;a:for(;3>c;++c){if(e[c].length!==
this.contourLevels[c].length){d=!0;break}for(h=0;h<e[c].length;++h)if(e[c][h]!==this.contourLevels[c][h]){d=!0;break a}}this.contourLevels=e}if(d){h=this._field;e=this.shape;d=[];for(n=0;3>n;++n){p=this.contourLevels[n];A=[];D=[];C=[0,0,0];for(c=0;c<p.length;++c){L=G(this._field[n],p[c]);A.push(d.length/5|0);h=g=0;a:for(;h<L.cells.length;++h)for(E=L.cells[h],f=0;2>f;++f){I=L.positions[E[f]];t=I[0];P=Math.floor(t)|0;H=t-P;t=I[1];M=Math.floor(t)|0;var Q=t-M,R=!1,w=0;b:for(;3>w;++w){C[w]=0;var O=(n+
w+1)%3;for(B=0;2>B;++B){var x=B?H:1-H;m=Math.min(Math.max(P+B,0),e[0])|0;for(l=0;2>l;++l){var ca=l?Q:1-Q;y=Math.min(Math.max(M+l,0),e[1])|0;t=2>w?this._field[O].get(m,y):(this.intensity.get(m,y)-this.intensityBounds[0])/(this.intensityBounds[1]-this.intensityBounds[0]);if(!isFinite(t)||isNaN(t)){R=!0;break b}C[w]+=x*ca*t}}}if(R){if(0<f){for(f=0;5>f;++f)d.pop();--g}continue a}else d.push(C[0],C[1],I[0],I[1],C[2]),g+=1}D.push(g)}this._contourOffsets[n]=A;this._contourCounts[n]=D}e=v.mallocFloat(d.length);
for(c=0;c<d.length;++c)e[c]=d[c];this._contourBuffer.update(e);v.freeFloat(e)}a.colormap&&this._colorMap.setPixels(k(a.colormap))};a.dispose=function(){this._shader.dispose();this._vao.dispose();this._coordinateBuffer.dispose();this._colorMap.dispose();this._contourBuffer.dispose();this._contourVAO.dispose();this._contourShader.dispose();this._contourPickShader.dispose();this._dynamicBuffer.dispose();this._dynamicVAO.dispose();for(var a=0;3>a;++a)v.freeFloat(this._field[a].data)};a.highlight=function(a){var b;
if(a){for(b=0;3>b;++b)this.highlightLevel[b]=this.enableHighlight[b]?a.level[b]:-1;a=this.snapToData?a.dataCoordinate:a.position;for(b=0;3>b;++b)a[b]-=this.objectOffset[b];if(this.enableDynamic[0]&&a[0]!==this.dynamicLevel[0]||this.enableDynamic[1]&&a[1]!==this.dynamicLevel[1]||this.enableDynamic[2]&&a[2]!==this.dynamicLevel[2]){for(var c=0,d=this.shape,e=v.mallocFloat(12*d[0]*d[1]),g=0;3>g;++g)if(this.enableDynamic[g]){this.dynamicLevel[g]=a[g];var f=this._field[(g+1)%3],h=this._field[(g+2)%3];b=
G(this._field[g],a[g]);var k=b.cells,n=b.positions;this._dynamicOffsets[g]=c;for(b=0;b<k.length;++b)for(var t=k[b],m=0;2>m;++m){var r=n[t[m]],u=+r[0],y=u|0,l=Math.min(y+1,d[0])|0,p=u-y,B=1-p,q=+r[1];r=q|0;u=Math.min(r+1,d[1])|0;var A=q-r,D=1-A;q=B*D;B*=A;D*=p;A*=p;p=q*f.get(y,r)+B*f.get(y,u)+D*f.get(l,r)+A*f.get(l,u);y=q*h.get(y,r)+B*h.get(y,u)+D*h.get(l,r)+A*h.get(l,u);if(isNaN(p)||isNaN(y)){m&&--c;break}e[2*c]=p;e[2*c+1]=y;c+=1}this._dynamicCounts[g]=c-this._dynamicOffsets[g]}else this.dynamicLevel[g]=
NaN,this._dynamicCounts[g]=0;this._dynamicBuffer.update(e.subarray(0,2*c));v.freeFloat(e)}}else this._dynamicCounts=[0,0,0],this.dyanamicLevel=[NaN,NaN,NaN],this.highlightLevel=[-1,-1,-1]}},{"./lib/shaders":310,"binary-search-bounds":311,"bit-twiddle":82,colormap:116,"gl-buffer":237,"gl-mat4/invert":261,"gl-mat4/multiply":263,"gl-texture2d":314,"gl-vao":319,ndarray:442,"ndarray-gradient":433,"ndarray-ops":436,"ndarray-pack":437,"surface-nets":515,"typedarray-pool":529}],313:[function(a,p,l){var m=
a("css-font"),k=a("pick-by-alias"),h=a("regl"),e=a("gl-util/context");l=a("es6-weak-map");var f=a("color-normalize"),b=a("font-atlas"),n=a("typedarray-pool"),u=a("parse-rect"),r=a("is-plain-obj"),d=a("parse-unit"),g=a("to-px"),c=a("detect-kerning"),v=a("object-assign"),t=a("font-measure"),y=a("flatten-vertex-data"),B=a("bit-twiddle").nextPow2,q=new l,G=!1;document.body&&(a=document.body.appendChild(document.createElement("div")),a.style.font="italic small-caps bold condensed 16px/2 cursive",getComputedStyle(a).fontStretch&&
(G=!0),document.body.removeChild(a));var A=function(a){"function"===typeof a&&a._gl&&a.prop&&a.texture&&a.buffer?(a={regl:a},this.gl=a.regl._gl):this.gl=e(a);this.regl=(this.shader=q.get(this.gl))?this.shader.regl:a.regl||h({gl:this.gl});this.charBuffer=this.regl.buffer({type:"uint8",usage:"stream"});this.sizeBuffer=this.regl.buffer({type:"float",usage:"stream"});this.shader||(this.shader=this.createShader(),q.set(this.gl,this.shader));this.batch=[];this.fontSize=[];this.font=[];this.fontAtlas=[];
this.draw=this.shader.draw.bind(this);this.render=function(){this.regl._refresh();this.draw(this.batch)};this.canvas=this.gl.canvas;this.update(r(a)?a:{})};A.prototype.createShader=function(){var a=this.regl,b=a({blend:{enable:!0,color:[0,0,0,1],func:{srcRGB:"src alpha",dstRGB:"one minus src alpha",srcAlpha:"one minus dst alpha",dstAlpha:"one"}},stencil:{enable:!1},depth:{enable:!1},count:a.prop("count"),offset:a.prop("offset"),attributes:{charOffset:{offset:4,stride:8,buffer:a.this("sizeBuffer")},
width:{offset:0,stride:8,buffer:a.this("sizeBuffer")},char:a.this("charBuffer"),position:a.this("position")},uniforms:{atlasSize:function(a,b){return[b.atlas.width,b.atlas.height]},atlasDim:function(a,b){return[b.atlas.cols,b.atlas.rows]},atlas:function(a,b){return b.atlas.texture},charStep:function(a,b){return b.atlas.step},em:function(a,b){return b.atlas.em},color:a.prop("color"),opacity:a.prop("opacity"),viewport:a.this("viewportArray"),scale:a.this("scale"),align:a.prop("align"),baseline:a.prop("baseline"),
translate:a.this("translate"),positionOffset:a.prop("positionOffset")},primitive:"points",viewport:a.this("viewport"),vert:"\n\t\t\tprecision highp float;\n\t\t\tattribute float width, charOffset, char;\n\t\t\tattribute vec2 position;\n\t\t\tuniform float fontSize, charStep, em, align, baseline;\n\t\t\tuniform vec4 viewport;\n\t\t\tuniform vec4 color;\n\t\t\tuniform vec2 atlasSize, atlasDim, scale, translate, positionOffset;\n\t\t\tvarying vec2 charCoord, charId;\n\t\t\tvarying float charWidth;\n\t\t\tvarying vec4 fontColor;\n\t\t\tvoid main () {\n\t\t\t\t"+
(A.normalViewport?"":"vec2 positionOffset \x3d vec2(positionOffset.x,- positionOffset.y);")+"\n\n\t\t\t\tvec2 offset \x3d floor(em * (vec2(align + charOffset, baseline)\n\t\t\t\t\t+ positionOffset))\n\t\t\t\t\t/ (viewport.zw * scale.xy);\n\n\t\t\t\tvec2 position \x3d (position + translate) * scale;\n\t\t\t\tposition +\x3d offset * scale;\n\n\t\t\t\t"+(A.normalViewport?"position.y \x3d 1. - position.y;":"")+"\n\n\t\t\t\tcharCoord \x3d position * viewport.zw + viewport.xy;\n\n\t\t\t\tgl_Position \x3d vec4(position * 2. - 1., 0, 1);\n\n\t\t\t\tgl_PointSize \x3d charStep;\n\n\t\t\t\tcharId.x \x3d mod(char, atlasDim.x);\n\t\t\t\tcharId.y \x3d floor(char / atlasDim.x);\n\n\t\t\t\tcharWidth \x3d width * em;\n\n\t\t\t\tfontColor \x3d color / 255.;\n\t\t\t}",
frag:"\n\t\t\tprecision highp float;\n\t\t\tuniform sampler2D atlas;\n\t\t\tuniform float fontSize, charStep, opacity;\n\t\t\tuniform vec2 atlasSize;\n\t\t\tuniform vec4 viewport;\n\t\t\tvarying vec4 fontColor;\n\t\t\tvarying vec2 charCoord, charId;\n\t\t\tvarying float charWidth;\n\n\t\t\tfloat lightness(vec4 color) {\n\t\t\t\treturn color.r * 0.299 + color.g * 0.587 + color.b * 0.114;\n\t\t\t}\n\n\t\t\tvoid main () {\n\t\t\t\tvec2 uv \x3d gl_FragCoord.xy - charCoord + charStep * .5;\n\t\t\t\tfloat halfCharStep \x3d floor(charStep * .5 + .5);\n\n\t\t\t\t// invert y and shift by 1px (FF expecially needs that)\n\t\t\t\tuv.y \x3d charStep - uv.y;\n\n\t\t\t\t// ignore points outside of character bounding box\n\t\t\t\tfloat halfCharWidth \x3d ceil(charWidth * .5);\n\t\t\t\tif (floor(uv.x) \x3e halfCharStep + halfCharWidth ||\n\t\t\t\t\tfloor(uv.x) \x3c halfCharStep - halfCharWidth) return;\n\n\t\t\t\tuv +\x3d charId * charStep;\n\t\t\t\tuv \x3d uv / atlasSize;\n\n\t\t\t\tvec4 color \x3d fontColor;\n\t\t\t\tvec4 mask \x3d texture2D(atlas, uv);\n\n\t\t\t\tfloat maskY \x3d lightness(mask);\n\t\t\t\t// float colorY \x3d lightness(color);\n\t\t\t\tcolor.a *\x3d maskY;\n\t\t\t\tcolor.a *\x3d opacity;\n\n\t\t\t\t// color.a +\x3d .1;\n\n\t\t\t\t// antialiasing, see yiq color space y-channel formula\n\t\t\t\t// color.rgb +\x3d (1. - color.rgb) * (1. - mask.rgb);\n\n\t\t\t\tgl_FragColor \x3d color;\n\t\t\t}"});
return{regl:a,draw:b,atlas:{}}};A.prototype.update=function(a){var e=this;if("string"===typeof a)a={text:a};else if(!a)return;a=k(a,{position:"position positions coord coords coordinates",font:"font fontFace fontface typeface cssFont css-font family fontFamily",fontSize:"fontSize fontsize size font-size",text:"text texts chars characters value values symbols",align:"align alignment textAlign textbaseline",baseline:"baseline textBaseline textbaseline",direction:"dir direction textDirection",color:"color colour fill fill-color fillColor textColor textcolor",
kerning:"kerning kern",range:"range dataBox",viewport:"vp viewport viewBox viewbox viewPort",opacity:"opacity alpha transparency visible visibility opaque",offset:"offset positionOffset padding shift indent indentation"},!0);null!=a.opacity&&(Array.isArray(a.opacity)?this.opacity=a.opacity.map(function(a){return parseFloat(a)}):this.opacity=parseFloat(a.opacity));null!=a.viewport&&(this.viewport=u(a.viewport),A.normalViewport&&(this.viewport.y=this.canvas.height-this.viewport.y-this.viewport.height),
this.viewportArray=[this.viewport.x,this.viewport.y,this.viewport.width,this.viewport.height]);null==this.viewport&&(this.viewport={x:0,y:0,width:this.gl.drawingBufferWidth,height:this.gl.drawingBufferHeight},this.viewportArray=[this.viewport.x,this.viewport.y,this.viewport.width,this.viewport.height]);null!=a.kerning&&(this.kerning=a.kerning);null!=a.offset&&("number"===typeof a.offset&&(a.offset=[a.offset,0]),this.positionOffset=y(a.offset));a.direction&&(this.direction=a.direction);a.range&&(this.range=
a.range,this.scale=[1/(a.range[2]-a.range[0]),1/(a.range[3]-a.range[1])],this.translate=[-a.range[0],-a.range[1]]);a.scale&&(this.scale=a.scale);a.translate&&(this.translate=a.translate);this.scale||(this.scale=[1/this.viewport.width,1/this.viewport.height]);this.translate||(this.translate=[0,0]);this.font.length||a.font||(a.font=A.baseFontSize+"px sans-serif");var h=!1,r=!1;a.font&&(Array.isArray(a.font)?a.font:[a.font]).forEach(function(a,b){if("string"===typeof a)try{a=m.parse(a)}catch(ha){a=m.parse(A.baseFontSize+
"px "+a)}else a=m.parse(m.stringify(a));var c=m.stringify({size:A.baseFontSize,family:a.family,stretch:G?a.stretch:void 0,variant:a.variant,weight:a.weight,style:a.style}),f=d(a.size);f=Math.round(f[0]*g(f[1]));f!==e.fontSize[b]&&(r=!0,e.fontSize[b]=f);if(!e.font[b]||c!=e.font[b].baseString)if(h=!0,e.font[b]=A.fonts[c],!e.font[b]){f=a.family.join(", ");var k=[a.style];a.style!=a.variant&&k.push(a.variant);a.variant!=a.weight&&k.push(a.weight);G&&a.weight!=a.stretch&&k.push(a.stretch);e.font[b]={baseString:c,
family:f,weight:a.weight,stretch:a.stretch,style:a.style,variant:a.variant,width:{},kerning:{},metrics:t(f,{origin:"top",fontSize:A.baseFontSize,fontStyle:k.join(" ")})};A.fonts[c]=e.font[b]}});(h||r)&&this.font.forEach(function(b,c){var d=m.stringify({size:e.fontSize[c],family:b.family,stretch:G?b.stretch:void 0,variant:b.variant,weight:b.weight,style:b.style});e.fontAtlas[c]=e.shader.atlas[d];e.fontAtlas[c]||(e.shader.atlas[d]=e.fontAtlas[c]={fontString:d,step:2*Math.ceil(e.fontSize[c]*b.metrics.bottom*
.5),em:e.fontSize[c],cols:0,rows:0,height:0,width:0,chars:[],ids:{},texture:e.regl.texture()});null==a.text&&(a.text=e.text)});if("string"===typeof a.text&&a.position&&2<a.position.length){for(var l=Array(.5*a.position.length),p=0;p<l.length;p++)l[p]=a.text;a.text=l}if(null!=a.text||h){this.textOffsets=[0];if(Array.isArray(a.text)){this.count=a.text[0].length;this.counts=[this.count];for(l=1;l<a.text.length;l++)e.textOffsets[l]=e.textOffsets[l-1]+a.text[l-1].length,e.count+=a.text[l].length,e.counts.push(a.text[l].length);
this.text=a.text.join("")}else this.text=a.text,this.count=this.text.length,this.counts=[this.count];var q=[];this.font.forEach(function(a,b){A.atlasContext.font=a.baseString;b=e.fontAtlas[b];for(var d=0;d<e.text.length;d++){var g=e.text.charAt(d);null==b.ids[g]&&(b.ids[g]=b.chars.length,b.chars.push(g),q.push(g));if(null==a.width[g]&&(a.width[g]=A.atlasContext.measureText(g).width/A.baseFontSize,e.kerning)){var f=[],h;for(h in a.width)f.push(h+g,g+h);v(a.kerning,c(a.family,{pairs:f}))}}})}if(a.position)if(2<
a.position.length){l=!a.position[0].length;p=n.mallocFloat(2*this.count);for(var D=0,C=0;D<this.counts.length;D++){var N=e.counts[D];if(l)for(var L=0;L<N;L++)p[C++]=a.position[2*D],p[C++]=a.position[2*D+1];else for(L=0;L<N;L++)p[C++]=a.position[D][0],p[C++]=a.position[D][1]}this.position.call?this.position({type:"float",data:p}):this.position=this.regl.buffer({type:"float",data:p});n.freeFloat(p)}else this.position.destroy&&this.position.destroy(),this.position={constant:a.position};if(a.text||h){l=
n.mallocUint8(this.count);p=n.mallocFloat(2*this.count);this.textWidth=[];for(C=D=0;D<this.counts.length;D++){N=e.counts[D];L=e.font[D]||e.font[0];for(var R=e.fontAtlas[D]||e.fontAtlas[0],w=0;w<N;w++){var x=e.text.charAt(C),T=e.text.charAt(C-1);l[C]=R.ids[x];p[2*C]=L.width[x];if(w){var Y=p[2*C-1]+.5*p[2*C-2]+.5*p[2*C];e.kerning&&(x=L.kerning[T+x])&&(Y+=.001*x);p[2*C+1]=Y}else p[2*C+1]=.5*p[2*C];C++}e.textWidth.push(p.length?.5*p[2*C-2]+p[2*C-1]:0)}a.align||(a.align=this.align);this.charBuffer({data:l,
type:"uint8",usage:"stream"});this.sizeBuffer({data:p,type:"float",usage:"stream"});n.freeUint8(l);n.freeFloat(p);q.length&&this.font.forEach(function(a,c){a=e.fontAtlas[c];c=a.step;var d=Math.min(Math.floor(A.maxAtlasSize/c),a.chars.length),g=Math.ceil(a.chars.length/d),f=B(d*c),h=B(g*c);a.width=f;a.height=h;a.rows=g;a.cols=d;a.em&&a.texture({data:b({canvas:A.atlasCanvas,font:a.fontString,chars:a.chars,shape:[f,h],step:[c,c]})})})}a.align&&(this.align=a.align,this.alignOffset=this.textWidth.map(function(a,
b){b=Array.isArray(e.align)?1<e.align.length?e.align[b]:e.align[0]:e.align;if("number"===typeof b)return b;switch(b){case "right":case "end":return-a;case "center":case "centre":case "middle":return.5*-a}return 0}));null==this.baseline&&null==a.baseline&&(a.baseline=0);null!=a.baseline&&(this.baseline=a.baseline,Array.isArray(this.baseline)||(this.baseline=[this.baseline]),this.baselineOffset=this.baseline.map(function(a,b){b=(e.font[b]||e.font[0]).metrics;var c=.5*b.bottom;c="number"===typeof a?
c+(a-b.baseline):c+-b[a];A.normalViewport||(c*=-1);return c}));if(null!=a.color)if(a.color||(a.color="transparent"),"string"!==typeof a.color&&isNaN(a.color)){if("number"===typeof a.color[0]&&a.color.length>this.counts.length)for(p=a.color.length,l=n.mallocUint8(p),D=(a.color.subarray||a.color.slice).bind(a.color),C=0;C<p;C+=4)l.set(f(D(C,C+4),"uint8"),C);else for(p=a.color.length,l=n.mallocUint8(4*p),D=0;D<p;D++)l.set(f(a.color[D]||0,"uint8"),4*D);this.color=l}else this.color=f(a.color,"uint8");
if(a.position||a.text||a.color||a.baseline||a.align||a.font||a.offset||a.opacity)if(4<this.color.length||1<this.baselineOffset.length||this.align&&1<this.align.length||1<this.fontAtlas.length||2<this.positionOffset.length)for(this.batch=Array(Math.max(.5*this.position.length||0,.25*this.color.length||0,this.baselineOffset.length||0,this.alignOffset.length||0,this.font.length||0,this.opacity.length||0,.5*this.positionOffset.length||0)),l=0;l<this.batch.length;l++)e.batch[l]={count:1<e.counts.length?
e.counts[l]:e.counts[0],offset:1<e.textOffsets.length?e.textOffsets[l]:e.textOffsets[0],color:e.color?4>=e.color.length?e.color:e.color.subarray(4*l,4*l+4):[0,0,0,255],opacity:Array.isArray(e.opacity)?e.opacity[l]:e.opacity,baseline:null!=e.baselineOffset[l]?e.baselineOffset[l]:e.baselineOffset[0],align:e.align?null!=e.alignOffset[l]?e.alignOffset[l]:e.alignOffset[0]:0,atlas:e.fontAtlas[l]||e.fontAtlas[0],positionOffset:2<e.positionOffset.length?e.positionOffset.subarray(2*l,2*l+2):e.positionOffset};
else this.batch=this.count?[{count:this.count,offset:0,color:this.color||[0,0,0,255],opacity:Array.isArray(this.opacity)?this.opacity[0]:this.opacity,baseline:this.baselineOffset[0],align:this.alignOffset?this.alignOffset[0]:0,atlas:this.fontAtlas[0],positionOffset:this.positionOffset}]:[]};A.prototype.destroy=function(){};A.prototype.kerning=!0;A.prototype.position={constant:new Float32Array(2)};A.prototype.translate=null;A.prototype.scale=null;A.prototype.font=null;A.prototype.text="";A.prototype.positionOffset=
[0,0];A.prototype.opacity=1;A.prototype.color=new Uint8Array([0,0,0,255]);A.prototype.alignOffset=[0,0];A.normalViewport=!1;A.maxAtlasSize=1024;A.atlasCanvas=document.createElement("canvas");A.atlasContext=A.atlasCanvas.getContext("2d",{alpha:!1});A.baseFontSize=64;A.fonts={};p.exports=A},{"bit-twiddle":82,"color-normalize":110,"css-font":129,"detect-kerning":157,"es6-weak-map":216,"flatten-vertex-data":223,"font-atlas":224,"font-measure":225,"gl-util/context":315,"is-plain-obj":414,"object-assign":446,
"parse-rect":451,"parse-unit":453,"pick-by-alias":457,regl:486,"to-px":523,"typedarray-pool":529}],314:[function(a,p,l){function m(a){return"undefined"!=typeof HTMLCanvasElement&&a instanceof HTMLCanvasElement||"undefined"!=typeof HTMLImageElement&&a instanceof HTMLImageElement||"undefined"!=typeof HTMLVideoElement&&a instanceof HTMLVideoElement||"undefined"!=typeof ImageData&&a instanceof ImageData}function k(a,b,c){var d=a.gl,e=d.getParameter(d.MAX_TEXTURE_SIZE);if(0>b||b>e||0>c||c>e)throw Error("gl-texture2d: Invalid texture size");
a._shape=[b,c];a.bind();d.texImage2D(d.TEXTURE_2D,0,a.format,b,c,0,a.format,a.type,null);a._mipLevels=[0];return a}function h(a,b,c,d,e,g){this.gl=a;this.handle=b;this.format=e;this.type=g;this._shape=[c,d];this._mipLevels=[0];this._minFilter=this._magFilter=a.NEAREST;this._wrapT=this._wrapS=a.CLAMP_TO_EDGE;this._anisoSamples=1;var f=this;a=[this._wrapS,this._wrapT];Object.defineProperties(a,[{get:function(){return f._wrapS},set:function(a){return f.wrapS=a}},{get:function(){return f._wrapT},set:function(a){return f.wrapT=
a}}]);this._wrapVector=a;a=[this._shape[0],this._shape[1]];Object.defineProperties(a,[{get:function(){return f._shape[0]},set:function(a){return f.width=a}},{get:function(){return f._shape[1]},set:function(a){return f.height=a}}]);this._shapeVector=a}function e(a,b){return 3===a.length?1===b[2]&&b[1]===a[0]*a[2]&&b[0]===a[2]:1===b[0]&&b[1]===a[0]}function f(a){var b=a.createTexture();a.bindTexture(a.TEXTURE_2D,b);a.texParameteri(a.TEXTURE_2D,a.TEXTURE_MIN_FILTER,a.NEAREST);a.texParameteri(a.TEXTURE_2D,
a.TEXTURE_MAG_FILTER,a.NEAREST);a.texParameteri(a.TEXTURE_2D,a.TEXTURE_WRAP_S,a.CLAMP_TO_EDGE);a.texParameteri(a.TEXTURE_2D,a.TEXTURE_WRAP_T,a.CLAMP_TO_EDGE);return b}function b(a,b,c,d,e){var g=a.getParameter(a.MAX_TEXTURE_SIZE);if(0>b||b>g||0>c||c>g)throw Error("gl-texture2d: Invalid texture shape");if(e===a.FLOAT&&!a.getExtension("OES_texture_float"))throw Error("gl-texture2d: Floating point textures not supported on this platform");g=f(a);a.texImage2D(a.TEXTURE_2D,0,d,b,c,0,d,e,null);return new h(a,
g,b,c,d,e)}var n=a("ndarray"),u=a("ndarray-ops"),r=a("typedarray-pool");p.exports=function(a){if(1>=arguments.length)throw Error("gl-texture2d: Missing arguments for texture2d constructor");d||(d=[a.LINEAR,a.NEAREST_MIPMAP_LINEAR,a.LINEAR_MIPMAP_NEAREST,a.LINEAR_MIPMAP_NEAREST],g=[a.NEAREST,a.LINEAR,a.NEAREST_MIPMAP_NEAREST,a.NEAREST_MIPMAP_LINEAR,a.LINEAR_MIPMAP_NEAREST,a.LINEAR_MIPMAP_LINEAR],c=[a.REPEAT,a.CLAMP_TO_EDGE,a.MIRRORED_REPEAT]);if("number"===typeof arguments[1])return b(a,arguments[1],
arguments[2],arguments[3]||a.RGBA,arguments[4]||a.UNSIGNED_BYTE);if(Array.isArray(arguments[1]))return b(a,arguments[1][0]|0,arguments[1][1]|0,arguments[2]||a.RGBA,arguments[3]||a.UNSIGNED_BYTE);if("object"===typeof arguments[1]){var k=arguments[1],v=m(k)?k:k.raw;if(v){var l=k.width|0;k=k.height|0;var p=arguments[2]||a.RGBA,q=arguments[3]||a.UNSIGNED_BYTE,A=f(a);a.texImage2D(a.TEXTURE_2D,0,p,p,q,v);return new h(a,A,l,k,p,q)}if(k.shape&&k.data&&k.stride){A=k;var C=A.dtype;v=A.shape.slice();k=a.getParameter(a.MAX_TEXTURE_SIZE);
if(0>v[0]||v[0]>k||0>v[1]||v[1]>k)throw Error("gl-texture2d: Invalid texture size");k=e(v,A.stride.slice());"float32"===C?p=a.FLOAT:"float64"===C?(p=a.FLOAT,k=!1,C="float32"):"uint8"===C?p=a.UNSIGNED_BYTE:(p=a.UNSIGNED_BYTE,k=!1,C="uint8");if(2===v.length)q=a.LUMINANCE,v=[v[0],v[1],1],A=n(A.data,v,[A.stride[0],A.stride[1],1],A.offset);else if(3===v.length)if(1===v[2])q=a.ALPHA;else if(2===v[2])q=a.LUMINANCE_ALPHA;else if(3===v[2])q=a.RGB;else if(4===v[2])q=a.RGBA;else throw Error("gl-texture2d: Invalid shape for pixel coords");
else throw Error("gl-texture2d: Invalid shape for texture");p!==a.FLOAT||a.getExtension("OES_texture_float")||(p=a.UNSIGNED_BYTE,k=!1);var P=A.size;if(k)A=0===A.offset&&A.data.length===P?A.data:A.data.subarray(A.offset,A.offset+P);else{var J=[v[2],v[2]*v[0],1];l=r.malloc(P,C);J=n(l,v,J,0);"float32"!==C&&"float64"!==C||p!==a.UNSIGNED_BYTE?u.assign(J,A):u.muls(J,A,255);A=l.subarray(0,P)}C=f(a);a.texImage2D(a.TEXTURE_2D,0,q,v[0],v[1],0,q,p,A);k||r.free(l);return new h(a,C,v[0],v[1],q,p)}}throw Error("gl-texture2d: Invalid arguments for texture2d constructor");
};var d=null,g=null,c=null;a=h.prototype;Object.defineProperties(a,{minFilter:{get:function(){return this._minFilter},set:function(a){this.bind();var b=this.gl;this.type===b.FLOAT&&0<=d.indexOf(a)&&!b.getExtension("OES_texture_float_linear")&&(a=b.NEAREST);if(0>g.indexOf(a))throw Error("gl-texture2d: Unknown filter mode "+a);b.texParameteri(b.TEXTURE_2D,b.TEXTURE_MIN_FILTER,a);return this._minFilter=a}},magFilter:{get:function(){return this._magFilter},set:function(a){this.bind();var b=this.gl;this.type===
b.FLOAT&&0<=d.indexOf(a)&&!b.getExtension("OES_texture_float_linear")&&(a=b.NEAREST);if(0>g.indexOf(a))throw Error("gl-texture2d: Unknown filter mode "+a);b.texParameteri(b.TEXTURE_2D,b.TEXTURE_MAG_FILTER,a);return this._magFilter=a}},mipSamples:{get:function(){return this._anisoSamples},set:function(a){var b=this._anisoSamples;this._anisoSamples=Math.max(a,1)|0;b!==this._anisoSamples&&(a=this.gl.getExtension("EXT_texture_filter_anisotropic"))&&this.gl.texParameterf(this.gl.TEXTURE_2D,a.TEXTURE_MAX_ANISOTROPY_EXT,
this._anisoSamples);return this._anisoSamples}},wrapS:{get:function(){return this._wrapS},set:function(a){this.bind();if(0>c.indexOf(a))throw Error("gl-texture2d: Unknown wrap mode "+a);this.gl.texParameteri(this.gl.TEXTURE_2D,this.gl.TEXTURE_WRAP_S,a);return this._wrapS=a}},wrapT:{get:function(){return this._wrapT},set:function(a){this.bind();if(0>c.indexOf(a))throw Error("gl-texture2d: Unknown wrap mode "+a);this.gl.texParameteri(this.gl.TEXTURE_2D,this.gl.TEXTURE_WRAP_T,a);return this._wrapT=a}},
wrap:{get:function(){return this._wrapVector},set:function(a){Array.isArray(a)||(a=[a,a]);if(2!==a.length)throw Error("gl-texture2d: Must specify wrap mode for rows and columns");for(var b=0;2>b;++b)if(0>c.indexOf(a[b]))throw Error("gl-texture2d: Unknown wrap mode "+a);this._wrapS=a[0];this._wrapT=a[1];b=this.gl;this.bind();b.texParameteri(b.TEXTURE_2D,b.TEXTURE_WRAP_S,this._wrapS);b.texParameteri(b.TEXTURE_2D,b.TEXTURE_WRAP_T,this._wrapT);return a}},shape:{get:function(){return this._shapeVector},
set:function(a){if(!Array.isArray(a))a=[a|0,a|0];else if(2!==a.length)throw Error("gl-texture2d: Invalid texture shape");k(this,a[0]|0,a[1]|0);return[a[0]|0,a[1]|0]}},width:{get:function(){return this._shape[0]},set:function(a){a|=0;k(this,a,this._shape[1]);return a}},height:{get:function(){return this._shape[1]},set:function(a){a|=0;k(this,this._shape[0],a);return a}}});a.bind=function(a){var b=this.gl;void 0!==a&&b.activeTexture(b.TEXTURE0+(a|0));b.bindTexture(b.TEXTURE_2D,this.handle);return void 0!==
a?a|0:b.getParameter(b.ACTIVE_TEXTURE)-b.TEXTURE0};a.dispose=function(){this.gl.deleteTexture(this.handle)};a.generateMipmap=function(){this.bind();this.gl.generateMipmap(this.gl.TEXTURE_2D);for(var a=Math.min(this._shape[0],this._shape[1]),b=0;0<a;++b,a>>>=1)0>this._mipLevels.indexOf(b)&&this._mipLevels.push(b)};a.setPixels=function(a,b,c,d){var g=this.gl;this.bind();Array.isArray(b)?(d=c,c=b[1]|0,b=b[0]|0):(b=b||0,c=c||0);d=d||0;var f=m(a)?a:a.raw;if(f)0>this._mipLevels.indexOf(d)?(g.texImage2D(g.TEXTURE_2D,
0,this.format,this.format,this.type,f),this._mipLevels.push(d)):g.texSubImage2D(g.TEXTURE_2D,d,b,c,this.format,this.type,f);else if(a.shape&&a.stride&&a.data){if(2>a.shape.length||b+a.shape[1]>this._shape[1]>>>d||c+a.shape[0]>this._shape[0]>>>d||0>b||0>c)throw Error("gl-texture2d: Texture dimensions are out of bounds");f=this.format;var h=this.type,k=this._mipLevels,t=a.dtype,v=a.shape.slice();if(2>v.length||3<v.length)throw Error("gl-texture2d: Invalid ndarray, must be 2d or 3d");var l=e(v,a.stride.slice());
"float32"===t?t=g.FLOAT:"float64"===t?(t=g.FLOAT,l=!1):"uint8"===t?t=g.UNSIGNED_BYTE:(t=g.UNSIGNED_BYTE,l=!1);if(2===v.length){var y=g.LUMINANCE;v=[v[0],v[1],1];a=n(a.data,v,[a.stride[0],a.stride[1],1],a.offset)}else if(3===v.length)if(1===v[2])y=g.ALPHA;else if(2===v[2])y=g.LUMINANCE_ALPHA;else if(3===v[2])y=g.RGB;else if(4===v[2])y=g.RGBA;else throw Error("gl-texture2d: Invalid shape for pixel coords");else throw Error("gl-texture2d: Invalid shape for texture");y!==g.LUMINANCE&&y!==g.ALPHA||f!==
g.LUMINANCE&&f!==g.ALPHA||(y=f);if(y!==f)throw Error("gl-texture2d: Incompatible texture format for setPixels");y=a.size;var p=0>k.indexOf(d);p&&k.push(d);t===h&&l?0===a.offset&&a.data.length===y?p?g.texImage2D(g.TEXTURE_2D,d,f,v[0],v[1],0,f,h,a.data):g.texSubImage2D(g.TEXTURE_2D,d,b,c,v[0],v[1],f,h,a.data):p?g.texImage2D(g.TEXTURE_2D,d,f,v[0],v[1],0,f,h,a.data.subarray(a.offset,a.offset+y)):g.texSubImage2D(g.TEXTURE_2D,d,b,c,v[0],v[1],f,h,a.data.subarray(a.offset,a.offset+y)):(k=h===g.FLOAT?r.mallocFloat32(y):
r.mallocUint8(y),l=n(k,v,[v[2],v[2]*v[0],1]),t===g.FLOAT&&h===g.UNSIGNED_BYTE?u.muls(l,a,255):u.assign(l,a),p?g.texImage2D(g.TEXTURE_2D,d,f,v[0],v[1],0,f,h,k.subarray(0,y)):g.texSubImage2D(g.TEXTURE_2D,d,b,c,v[0],v[1],f,h,k.subarray(0,y)),h===g.FLOAT?r.freeFloat32(k):r.freeUint8(k))}else throw Error("gl-texture2d: Unsupported data type");}},{ndarray:442,"ndarray-ops":436,"typedarray-pool":529}],315:[function(a,p,l){function m(a){if(a.container)if(a.container==document.body)document.body.style.width||
(a.canvas.width=a.width||a.pixelRatio*window.innerWidth),document.body.style.height||(a.canvas.height=a.height||a.pixelRatio*window.innerHeight);else{var e=a.container.getBoundingClientRect();a.canvas.width=a.width||e.right-e.left;a.canvas.height=a.height||e.bottom-e.top}}function k(a){return"function"===typeof a.getContext&&"width"in a&&"height"in a}var h=a("pick-by-alias");p.exports=function(a){a?"string"===typeof a&&(a={container:a}):a={};a=k(a)?{container:a}:"string"===typeof a.nodeName&&"function"===
typeof a.appendChild&&"function"===typeof a.getBoundingClientRect?{container:a}:"function"===typeof a.drawArrays||"function"===typeof a.drawElements?{gl:a}:h(a,{container:"container target element el canvas holder parent parentNode wrapper use ref root node",gl:"gl context webgl glContext",attrs:"attributes attrs contextAttributes",pixelRatio:"pixelRatio pxRatio px ratio pxratio pixelratio"},!0);a.pixelRatio||(a.pixelRatio=window.pixelRatio||1);if(a.gl)return a.gl;a.canvas&&(a.container=a.canvas.parentNode);
if(a.container){if("string"===typeof a.container){var e=document.querySelector(a.container);if(!e)throw Error("Element "+a.container+" is not found");a.container=e}k(a.container)?(a.canvas=a.container,a.container=a.canvas.parentNode):a.canvas||(a.canvas=document.createElement("canvas"),a.container.appendChild(a.canvas),m(a))}else a.canvas||(a.container=document.body||document.documentElement,a.canvas=document.createElement("canvas"),a.canvas.style.position="absolute",a.canvas.style.top=0,a.canvas.style.left=
0,a.container.appendChild(a.canvas),m(a));if(!a.gl)try{a.gl=a.canvas.getContext("webgl",a.attrs)}catch(b){try{a.gl=a.canvas.getContext("experimental-webgl",a.attrs)}catch(n){a.gl=a.canvas.getContext("webgl-experimental",a.attrs)}}return a.gl}},{"pick-by-alias":457}],316:[function(a,p,l){p.exports=function(a,k,h){k?k.bind():a.bindBuffer(a.ELEMENT_ARRAY_BUFFER,null);k=a.getParameter(a.MAX_VERTEX_ATTRIBS)|0;if(h){if(h.length>k)throw Error("gl-vao: Too many vertex attributes");for(var e=0;e<h.length;++e){var f=
h[e];if(f.buffer){var b=f.size||4,n=f.type||a.FLOAT,m=!!f.normalized,r=f.stride||0,d=f.offset||0;f.buffer.bind();a.enableVertexAttribArray(e);a.vertexAttribPointer(e,b,n,m,r,d)}else{if("number"===typeof f)a.vertexAttrib1f(e,f);else if(1===f.length)a.vertexAttrib1f(e,f[0]);else if(2===f.length)a.vertexAttrib2f(e,f[0],f[1]);else if(3===f.length)a.vertexAttrib3f(e,f[0],f[1],f[2]);else if(4===f.length)a.vertexAttrib4f(e,f[0],f[1],f[2],f[3]);else throw Error("gl-vao: Invalid vertex attribute");a.disableVertexAttribArray(e)}}}else a.bindBuffer(a.ARRAY_BUFFER,
null),e=0;for(;e<k;++e)a.disableVertexAttribArray(e)}},{}],317:[function(a,p,l){function m(a){this.gl=a;this._attributes=this._elements=null;this._elementsType=a.UNSIGNED_SHORT}var k=a("./do-bind.js");m.prototype.bind=function(){k(this.gl,this._elements,this._attributes)};m.prototype.update=function(a,e,f){this._elements=e;this._attributes=a;this._elementsType=f||this.gl.UNSIGNED_SHORT};m.prototype.dispose=function(){};m.prototype.unbind=function(){};m.prototype.draw=function(a,e,f){f=f||0;var b=
this.gl;this._elements?b.drawElements(a,e,this._elementsType,f):b.drawArrays(a,f,e)};p.exports=function(a){return new m(a)}},{"./do-bind.js":316}],318:[function(a,p,l){function m(a,f,b,h,k,m){this.location=a;this.dimension=f;this.a=b;this.b=h;this.c=k;this.d=m}function k(a,f,b){this.gl=a;this._ext=f;this.handle=b;this._attribs=[];this._useElements=!1;this._elementsType=a.UNSIGNED_SHORT}var h=a("./do-bind.js");m.prototype.bind=function(a){switch(this.dimension){case 1:a.vertexAttrib1f(this.location,
this.a);break;case 2:a.vertexAttrib2f(this.location,this.a,this.b);break;case 3:a.vertexAttrib3f(this.location,this.a,this.b,this.c);break;case 4:a.vertexAttrib4f(this.location,this.a,this.b,this.c,this.d)}};k.prototype.bind=function(){this._ext.bindVertexArrayOES(this.handle);for(var a=0;a<this._attribs.length;++a)this._attribs[a].bind(this.gl)};k.prototype.unbind=function(){this._ext.bindVertexArrayOES(null)};k.prototype.dispose=function(){this._ext.deleteVertexArrayOES(this.handle)};k.prototype.update=
function(a,f,b){this.bind();h(this.gl,f,a);this.unbind();this._attribs.length=0;if(a)for(var e=0;e<a.length;++e){var k=a[e];"number"===typeof k?this._attribs.push(new m(e,1,k)):Array.isArray(k)&&this._attribs.push(new m(e,k.length,k[0],k[1],k[2],k[3]))}this._useElements=!!f;this._elementsType=b||this.gl.UNSIGNED_SHORT};k.prototype.draw=function(a,f,b){b=b||0;var e=this.gl;this._useElements?e.drawElements(a,f,this._elementsType,b):e.drawArrays(a,b,f)};p.exports=function(a,f){return new k(a,f,f.createVertexArrayOES())}},
{"./do-bind.js":316}],319:[function(a,p,l){function m(a){this.bindVertexArrayOES=a.bindVertexArray.bind(a);this.createVertexArrayOES=a.createVertexArray.bind(a);this.deleteVertexArrayOES=a.deleteVertexArray.bind(a)}var k=a("./lib/vao-native.js"),h=a("./lib/vao-emulated.js");p.exports=function(a,f,b,n){var e=a.createVertexArray?new m(a):a.getExtension("OES_vertex_array_object");a=e?k(a,e):h(a);a.update(f,b,n);return a}},{"./lib/vao-emulated.js":317,"./lib/vao-native.js":318}],320:[function(a,p,l){p.exports=
function(a,k,h){a[0]=k[0]+h[0];a[1]=k[1]+h[1];a[2]=k[2]+h[2];return a}},{}],321:[function(a,p,l){p.exports=function(a,f){a=m(a[0],a[1],a[2]);f=m(f[0],f[1],f[2]);k(a,a);k(f,f);f=h(a,f);return 1<f?0:Math.acos(f)};var m=a("./fromValues"),k=a("./normalize"),h=a("./dot")},{"./dot":331,"./fromValues":337,"./normalize":348}],322:[function(a,p,l){p.exports=function(a,k){a[0]=Math.ceil(k[0]);a[1]=Math.ceil(k[1]);a[2]=Math.ceil(k[2]);return a}},{}],323:[function(a,p,l){p.exports=function(a){var k=new Float32Array(3);
k[0]=a[0];k[1]=a[1];k[2]=a[2];return k}},{}],324:[function(a,p,l){p.exports=function(a,k){a[0]=k[0];a[1]=k[1];a[2]=k[2];return a}},{}],325:[function(a,p,l){p.exports=function(){var a=new Float32Array(3);a[0]=0;a[1]=0;a[2]=0;return a}},{}],326:[function(a,p,l){p.exports=function(a,k,h){var e=k[0],f=k[1];k=k[2];var b=h[0],n=h[1];h=h[2];a[0]=f*h-k*n;a[1]=k*b-e*h;a[2]=e*n-f*b;return a}},{}],327:[function(a,p,l){p.exports=a("./distance")},{"./distance":328}],328:[function(a,p,l){p.exports=function(a,k){var h=
k[0]-a[0],e=k[1]-a[1];a=k[2]-a[2];return Math.sqrt(h*h+e*e+a*a)}},{}],329:[function(a,p,l){p.exports=a("./divide")},{"./divide":330}],330:[function(a,p,l){p.exports=function(a,k,h){a[0]=k[0]/h[0];a[1]=k[1]/h[1];a[2]=k[2]/h[2];return a}},{}],331:[function(a,p,l){p.exports=function(a,k){return a[0]*k[0]+a[1]*k[1]+a[2]*k[2]}},{}],332:[function(a,p,l){p.exports=1E-6},{}],333:[function(a,p,l){p.exports=function(a,h){var e=a[0],f=a[1];a=a[2];var b=h[0],k=h[1];h=h[2];return Math.abs(e-b)<=m*Math.max(1,Math.abs(e),
Math.abs(b))&&Math.abs(f-k)<=m*Math.max(1,Math.abs(f),Math.abs(k))&&Math.abs(a-h)<=m*Math.max(1,Math.abs(a),Math.abs(h))};var m=a("./epsilon")},{"./epsilon":332}],334:[function(a,p,l){p.exports=function(a,k){return a[0]===k[0]&&a[1]===k[1]&&a[2]===k[2]}},{}],335:[function(a,p,l){p.exports=function(a,k){a[0]=Math.floor(k[0]);a[1]=Math.floor(k[1]);a[2]=Math.floor(k[2]);return a}},{}],336:[function(a,p,l){p.exports=function(a,h,e,f,b,n){h||(h=3);e||(e=0);for(f=f?Math.min(f*h+e,a.length):a.length;e<f;e+=
h)m[0]=a[e],m[1]=a[e+1],m[2]=a[e+2],b(m,m,n),a[e]=m[0],a[e+1]=m[1],a[e+2]=m[2];return a};var m=a("./create")()},{"./create":325}],337:[function(a,p,l){p.exports=function(a,k,h){var e=new Float32Array(3);e[0]=a;e[1]=k;e[2]=h;return e}},{}],338:[function(a,p,l){p.exports={EPSILON:a("./epsilon"),create:a("./create"),clone:a("./clone"),angle:a("./angle"),fromValues:a("./fromValues"),copy:a("./copy"),set:a("./set"),equals:a("./equals"),exactEquals:a("./exactEquals"),add:a("./add"),subtract:a("./subtract"),
sub:a("./sub"),multiply:a("./multiply"),mul:a("./mul"),divide:a("./divide"),div:a("./div"),min:a("./min"),max:a("./max"),floor:a("./floor"),ceil:a("./ceil"),round:a("./round"),scale:a("./scale"),scaleAndAdd:a("./scaleAndAdd"),distance:a("./distance"),dist:a("./dist"),squaredDistance:a("./squaredDistance"),sqrDist:a("./sqrDist"),length:a("./length"),len:a("./len"),squaredLength:a("./squaredLength"),sqrLen:a("./sqrLen"),negate:a("./negate"),inverse:a("./inverse"),normalize:a("./normalize"),dot:a("./dot"),
cross:a("./cross"),lerp:a("./lerp"),random:a("./random"),transformMat4:a("./transformMat4"),transformMat3:a("./transformMat3"),transformQuat:a("./transformQuat"),rotateX:a("./rotateX"),rotateY:a("./rotateY"),rotateZ:a("./rotateZ"),forEach:a("./forEach")}},{"./add":320,"./angle":321,"./ceil":322,"./clone":323,"./copy":324,"./create":325,"./cross":326,"./dist":327,"./distance":328,"./div":329,"./divide":330,"./dot":331,"./epsilon":332,"./equals":333,"./exactEquals":334,"./floor":335,"./forEach":336,
"./fromValues":337,"./inverse":339,"./len":340,"./length":341,"./lerp":342,"./max":343,"./min":344,"./mul":345,"./multiply":346,"./negate":347,"./normalize":348,"./random":349,"./rotateX":350,"./rotateY":351,"./rotateZ":352,"./round":353,"./scale":354,"./scaleAndAdd":355,"./set":356,"./sqrDist":357,"./sqrLen":358,"./squaredDistance":359,"./squaredLength":360,"./sub":361,"./subtract":362,"./transformMat3":363,"./transformMat4":364,"./transformQuat":365}],339:[function(a,p,l){p.exports=function(a,k){a[0]=
1/k[0];a[1]=1/k[1];a[2]=1/k[2];return a}},{}],340:[function(a,p,l){p.exports=a("./length")},{"./length":341}],341:[function(a,p,l){p.exports=function(a){var k=a[0],h=a[1];a=a[2];return Math.sqrt(k*k+h*h+a*a)}},{}],342:[function(a,p,l){p.exports=function(a,k,h,e){var f=k[0],b=k[1];k=k[2];a[0]=f+e*(h[0]-f);a[1]=b+e*(h[1]-b);a[2]=k+e*(h[2]-k);return a}},{}],343:[function(a,p,l){p.exports=function(a,k,h){a[0]=Math.max(k[0],h[0]);a[1]=Math.max(k[1],h[1]);a[2]=Math.max(k[2],h[2]);return a}},{}],344:[function(a,
p,l){p.exports=function(a,k,h){a[0]=Math.min(k[0],h[0]);a[1]=Math.min(k[1],h[1]);a[2]=Math.min(k[2],h[2]);return a}},{}],345:[function(a,p,l){p.exports=a("./multiply")},{"./multiply":346}],346:[function(a,p,l){p.exports=function(a,k,h){a[0]=k[0]*h[0];a[1]=k[1]*h[1];a[2]=k[2]*h[2];return a}},{}],347:[function(a,p,l){p.exports=function(a,k){a[0]=-k[0];a[1]=-k[1];a[2]=-k[2];return a}},{}],348:[function(a,p,l){p.exports=function(a,k){var h=k[0],e=k[1],f=k[2];h=h*h+e*e+f*f;0<h&&(h=1/Math.sqrt(h),a[0]=
k[0]*h,a[1]=k[1]*h,a[2]=k[2]*h);return a}},{}],349:[function(a,p,l){p.exports=function(a,k){k=k||1;var h=2*Math.random()*Math.PI,e=2*Math.random()-1,f=Math.sqrt(1-e*e)*k;a[0]=Math.cos(h)*f;a[1]=Math.sin(h)*f;a[2]=e*k;return a}},{}],350:[function(a,p,l){p.exports=function(a,k,h,e){var f=h[1];h=h[2];var b=k[1]-f,n=k[2]-h,m=Math.sin(e);e=Math.cos(e);a[0]=k[0];a[1]=f+b*e-n*m;a[2]=h+b*m+n*e;return a}},{}],351:[function(a,p,l){p.exports=function(a,k,h,e){var f=h[0];h=h[2];var b=k[0]-f,n=k[2]-h,m=Math.sin(e);
e=Math.cos(e);a[0]=f+n*m+b*e;a[1]=k[1];a[2]=h+n*e-b*m;return a}},{}],352:[function(a,p,l){p.exports=function(a,k,h,e){var f=h[0];h=h[1];var b=k[0]-f,n=k[1]-h,m=Math.sin(e);e=Math.cos(e);a[0]=f+b*e-n*m;a[1]=h+b*m+n*e;a[2]=k[2];return a}},{}],353:[function(a,p,l){p.exports=function(a,k){a[0]=Math.round(k[0]);a[1]=Math.round(k[1]);a[2]=Math.round(k[2]);return a}},{}],354:[function(a,p,l){p.exports=function(a,k,h){a[0]=k[0]*h;a[1]=k[1]*h;a[2]=k[2]*h;return a}},{}],355:[function(a,p,l){p.exports=function(a,
k,h,e){a[0]=k[0]+h[0]*e;a[1]=k[1]+h[1]*e;a[2]=k[2]+h[2]*e;return a}},{}],356:[function(a,p,l){p.exports=function(a,k,h,e){a[0]=k;a[1]=h;a[2]=e;return a}},{}],357:[function(a,p,l){p.exports=a("./squaredDistance")},{"./squaredDistance":359}],358:[function(a,p,l){p.exports=a("./squaredLength")},{"./squaredLength":360}],359:[function(a,p,l){p.exports=function(a,k){var h=k[0]-a[0],e=k[1]-a[1];a=k[2]-a[2];return h*h+e*e+a*a}},{}],360:[function(a,p,l){p.exports=function(a){var k=a[0],h=a[1];a=a[2];return k*
k+h*h+a*a}},{}],361:[function(a,p,l){p.exports=a("./subtract")},{"./subtract":362}],362:[function(a,p,l){p.exports=function(a,k,h){a[0]=k[0]-h[0];a[1]=k[1]-h[1];a[2]=k[2]-h[2];return a}},{}],363:[function(a,p,l){p.exports=function(a,k,h){var e=k[0],f=k[1];k=k[2];a[0]=e*h[0]+f*h[3]+k*h[6];a[1]=e*h[1]+f*h[4]+k*h[7];a[2]=e*h[2]+f*h[5]+k*h[8];return a}},{}],364:[function(a,p,l){p.exports=function(a,k,h){var e=k[0],f=k[1];k=k[2];var b=h[3]*e+h[7]*f+h[11]*k+h[15];b=b||1;a[0]=(h[0]*e+h[4]*f+h[8]*k+h[12])/
b;a[1]=(h[1]*e+h[5]*f+h[9]*k+h[13])/b;a[2]=(h[2]*e+h[6]*f+h[10]*k+h[14])/b;return a}},{}],365:[function(a,p,l){p.exports=function(a,k,h){var e=k[0],f=k[1],b=k[2];k=h[0];var n=h[1],m=h[2];h=h[3];var r=h*e+n*b-m*f,d=h*f+m*e-k*b,g=h*b+k*f-n*e;e=-k*e-n*f-m*b;a[0]=r*h+e*-k+d*-m-g*-n;a[1]=d*h+e*-n+g*-k-r*-m;a[2]=g*h+e*-m+r*-n-d*-k;return a}},{}],366:[function(a,p,l){p.exports=function(a,k,h){a[0]=k[0]+h[0];a[1]=k[1]+h[1];a[2]=k[2]+h[2];a[3]=k[3]+h[3];return a}},{}],367:[function(a,p,l){p.exports=function(a){var k=
new Float32Array(4);k[0]=a[0];k[1]=a[1];k[2]=a[2];k[3]=a[3];return k}},{}],368:[function(a,p,l){p.exports=function(a,k){a[0]=k[0];a[1]=k[1];a[2]=k[2];a[3]=k[3];return a}},{}],369:[function(a,p,l){p.exports=function(){var a=new Float32Array(4);a[0]=0;a[1]=0;a[2]=0;a[3]=0;return a}},{}],370:[function(a,p,l){p.exports=function(a,k){var h=k[0]-a[0],e=k[1]-a[1],f=k[2]-a[2];a=k[3]-a[3];return Math.sqrt(h*h+e*e+f*f+a*a)}},{}],371:[function(a,p,l){p.exports=function(a,k,h){a[0]=k[0]/h[0];a[1]=k[1]/h[1];a[2]=
k[2]/h[2];a[3]=k[3]/h[3];return a}},{}],372:[function(a,p,l){p.exports=function(a,k){return a[0]*k[0]+a[1]*k[1]+a[2]*k[2]+a[3]*k[3]}},{}],373:[function(a,p,l){p.exports=function(a,k,h,e){var f=new Float32Array(4);f[0]=a;f[1]=k;f[2]=h;f[3]=e;return f}},{}],374:[function(a,p,l){p.exports={create:a("./create"),clone:a("./clone"),fromValues:a("./fromValues"),copy:a("./copy"),set:a("./set"),add:a("./add"),subtract:a("./subtract"),multiply:a("./multiply"),divide:a("./divide"),min:a("./min"),max:a("./max"),
scale:a("./scale"),scaleAndAdd:a("./scaleAndAdd"),distance:a("./distance"),squaredDistance:a("./squaredDistance"),length:a("./length"),squaredLength:a("./squaredLength"),negate:a("./negate"),inverse:a("./inverse"),normalize:a("./normalize"),dot:a("./dot"),lerp:a("./lerp"),random:a("./random"),transformMat4:a("./transformMat4"),transformQuat:a("./transformQuat")}},{"./add":366,"./clone":367,"./copy":368,"./create":369,"./distance":370,"./divide":371,"./dot":372,"./fromValues":373,"./inverse":375,"./length":376,
"./lerp":377,"./max":378,"./min":379,"./multiply":380,"./negate":381,"./normalize":382,"./random":383,"./scale":384,"./scaleAndAdd":385,"./set":386,"./squaredDistance":387,"./squaredLength":388,"./subtract":389,"./transformMat4":390,"./transformQuat":391}],375:[function(a,p,l){p.exports=function(a,k){a[0]=1/k[0];a[1]=1/k[1];a[2]=1/k[2];a[3]=1/k[3];return a}},{}],376:[function(a,p,l){p.exports=function(a){var k=a[0],h=a[1],e=a[2];a=a[3];return Math.sqrt(k*k+h*h+e*e+a*a)}},{}],377:[function(a,p,l){p.exports=
function(a,k,h,e){var f=k[0],b=k[1],n=k[2];k=k[3];a[0]=f+e*(h[0]-f);a[1]=b+e*(h[1]-b);a[2]=n+e*(h[2]-n);a[3]=k+e*(h[3]-k);return a}},{}],378:[function(a,p,l){p.exports=function(a,k,h){a[0]=Math.max(k[0],h[0]);a[1]=Math.max(k[1],h[1]);a[2]=Math.max(k[2],h[2]);a[3]=Math.max(k[3],h[3]);return a}},{}],379:[function(a,p,l){p.exports=function(a,k,h){a[0]=Math.min(k[0],h[0]);a[1]=Math.min(k[1],h[1]);a[2]=Math.min(k[2],h[2]);a[3]=Math.min(k[3],h[3]);return a}},{}],380:[function(a,p,l){p.exports=function(a,
k,h){a[0]=k[0]*h[0];a[1]=k[1]*h[1];a[2]=k[2]*h[2];a[3]=k[3]*h[3];return a}},{}],381:[function(a,p,l){p.exports=function(a,k){a[0]=-k[0];a[1]=-k[1];a[2]=-k[2];a[3]=-k[3];return a}},{}],382:[function(a,p,l){p.exports=function(a,k){var h=k[0],e=k[1],f=k[2];k=k[3];var b=h*h+e*e+f*f+k*k;0<b&&(b=1/Math.sqrt(b),a[0]=h*b,a[1]=e*b,a[2]=f*b,a[3]=k*b);return a}},{}],383:[function(a,p,l){var m=a("./normalize"),k=a("./scale");p.exports=function(a,e){e=e||1;a[0]=Math.random();a[1]=Math.random();a[2]=Math.random();
a[3]=Math.random();m(a,a);k(a,a,e);return a}},{"./normalize":382,"./scale":384}],384:[function(a,p,l){p.exports=function(a,k,h){a[0]=k[0]*h;a[1]=k[1]*h;a[2]=k[2]*h;a[3]=k[3]*h;return a}},{}],385:[function(a,p,l){p.exports=function(a,k,h,e){a[0]=k[0]+h[0]*e;a[1]=k[1]+h[1]*e;a[2]=k[2]+h[2]*e;a[3]=k[3]+h[3]*e;return a}},{}],386:[function(a,p,l){p.exports=function(a,k,h,e,f){a[0]=k;a[1]=h;a[2]=e;a[3]=f;return a}},{}],387:[function(a,p,l){p.exports=function(a,k){var h=k[0]-a[0],e=k[1]-a[1],f=k[2]-a[2];
a=k[3]-a[3];return h*h+e*e+f*f+a*a}},{}],388:[function(a,p,l){p.exports=function(a){var k=a[0],h=a[1],e=a[2];a=a[3];return k*k+h*h+e*e+a*a}},{}],389:[function(a,p,l){p.exports=function(a,k,h){a[0]=k[0]-h[0];a[1]=k[1]-h[1];a[2]=k[2]-h[2];a[3]=k[3]-h[3];return a}},{}],390:[function(a,p,l){p.exports=function(a,k,h){var e=k[0],f=k[1],b=k[2];k=k[3];a[0]=h[0]*e+h[4]*f+h[8]*b+h[12]*k;a[1]=h[1]*e+h[5]*f+h[9]*b+h[13]*k;a[2]=h[2]*e+h[6]*f+h[10]*b+h[14]*k;a[3]=h[3]*e+h[7]*f+h[11]*b+h[15]*k;return a}},{}],391:[function(a,
p,l){p.exports=function(a,k,h){var e=k[0],f=k[1],b=k[2],n=h[0],m=h[1],r=h[2];h=h[3];var d=h*e+m*b-r*f,g=h*f+r*e-n*b,c=h*b+n*f-m*e;e=-n*e-m*f-r*b;a[0]=d*h+e*-n+g*-r-c*-m;a[1]=g*h+e*-m+c*-n-d*-r;a[2]=c*h+e*-r+d*-m-g*-n;a[3]=k[3];return a}},{}],392:[function(a,p,l){p.exports=function(a,e,f,b){m[0]=b;m[1]=f;m[2]=e;m[3]=a;return k[0]};var m=new Uint8Array(4),k=new Float32Array(m.buffer)},{}],393:[function(a,p,l){var m=a("glsl-tokenizer"),k=a("atob-lite");p.exports=function(a){a=Array.isArray(a)?a:m(a);
for(var e=0;e<a.length;e++){var f=a[e];if("preprocessor"===f.type&&(f=f.data.match(/#define\s+SHADER_NAME(_B64)?\s+(.+)$/))&&f[2])return a=f[2],(f[1]?k(a):a).trim()}}},{"atob-lite":62,"glsl-tokenizer":400}],394:[function(a,p,l){p.exports=function(a){function l(a){a.length&&Y.push({type:C[R],data:a,position:z,line:ia,column:S})}function p(){T=T.length?[]:T;if("/"===U&&"*"===x)return z=L+N-1,R=u,U=x,N+1;if("/"===U&&"/"===x)return z=L+N-1,R=r,U=x,N+1;if("#"===x)return R=d,z=L+N,N;if(/\s/.test(x))return R=
q,z=L+N,N;fa=/\d/.test(x);qa=/[^\w_]/.test(x);z=L+N;R=fa?c:qa?g:n;return N}function D(){if(("\r"===x||"\n"===x)&&"\\"!==U)return l(T.join("")),R=b,N;T.push(x);U=x;return N+1}function P(){if("."===U&&/\d/.test(x))return R=v,N;if("/"===U&&"*"===x)return R=u,N;if("/"===U&&"/"===x)return R=r,N;if("."===x&&T.length){for(;w(T););R=v;return N}if(";"===x||")"===x||"("===x){if(T.length)for(;w(T););l(x);R=b;return N+1}var a=2===T.length&&"\x3d"!==x;if(/[\w_\d\s]/.test(x)||a){for(;w(T););R=b;return N}T.push(x);
U=x;return N+1}function w(a){var b=0;do{var c=k.indexOf(a.slice(0,a.length+b).join(""));var d=k[c];if(-1===c){if(0<b--+a.length)continue;d=a.slice(0,1).join("")}l(d);z+=d.length;T=T.slice(d.length);return T.length}while(1)}function I(){if("."===x||/[eE]/.test(x))return T.push(x),R=v,U=x,N+1;if("x"===x&&1===T.length&&"0"===T[0])return R=A,T.push(x),U=x,N+1;if(/[^\d]/.test(x))return l(T.join("")),R=b,N;T.push(x);U=x;return N+1}function Q(){"f"===x&&(T.push(x),U=x,N+=1);if(/[eE]/.test(x)||"-"===x&&/[eE]/.test(U))return T.push(x),
U=x,N+1;if(/[^\d]/.test(x))return l(T.join("")),R=b,N;T.push(x);U=x;return N+1}var N=0,L=0,R=b,x,U,T=[],Y=[],ia=1,S=0,z=0,fa=!1,qa=!1,ha="",ea;a=a||{};var ba=h,la=m;"300 es"===a.version&&(ba=f,la=e);return function(a){Y=[];if(null!==a){a=a.replace?a.replace(/\r\n/g,"\n"):a;N=0;ha+=a;for(ea=ha.length;x=ha[N],N<ea;){a=N;switch(R){case u:"/"===x&&"*"===U?(T.push(x),l(T.join("")),R=b):(T.push(x),U=x);N+=1;break;case r:N=D();break;case d:N=D();break;case g:N=P();break;case c:N=I();break;case A:/[^a-fA-F0-9]/.test(x)?
(l(T.join("")),R=b):(T.push(x),U=x,N+=1);break;case v:N=Q();break;case n:if(/[^\d\w_]/.test(x)){var e=T.join("");R=-1<la.indexOf(e)?B:-1<ba.indexOf(e)?y:t;l(T.join(""));R=b}else T.push(x),U=x,N+=1;break;case q:/[^\s]/g.test(x)?(l(T.join("")),R=b):(T.push(x),U=x,N+=1);break;case b:N=p()}if(a!==N)switch(ha[a]){case "\n":S=0;++ia;break;default:++S}}L+=N;ha=ha.slice(N);return Y}T.length&&l(T.join(""));R=G;l("(eof)");return Y}};var m=a("./lib/literals"),k=a("./lib/operators"),h=a("./lib/builtins"),e=a("./lib/literals-300es"),
f=a("./lib/builtins-300es"),b=999,n=9999,u=0,r=1,d=2,g=3,c=4,v=5,t=6,y=7,B=8,q=9,G=10,A=11,C="block-comment line-comment preprocessor operator integer float ident builtin keyword whitespace eof integer".split(" ")},{"./lib/builtins":396,"./lib/builtins-300es":395,"./lib/literals":398,"./lib/literals-300es":397,"./lib/operators":399}],395:[function(a,p,l){a=a("./builtins");a=a.slice().filter(function(a){return!/^(gl_|texture)/.test(a)});p.exports=a.concat("gl_VertexID gl_InstanceID gl_Position gl_PointSize gl_FragCoord gl_FrontFacing gl_FragDepth gl_PointCoord gl_MaxVertexAttribs gl_MaxVertexUniformVectors gl_MaxVertexOutputVectors gl_MaxFragmentInputVectors gl_MaxVertexTextureImageUnits gl_MaxCombinedTextureImageUnits gl_MaxTextureImageUnits gl_MaxFragmentUniformVectors gl_MaxDrawBuffers gl_MinProgramTexelOffset gl_MaxProgramTexelOffset gl_DepthRangeParameters gl_DepthRange trunc round roundEven isnan isinf floatBitsToInt floatBitsToUint intBitsToFloat uintBitsToFloat packSnorm2x16 unpackSnorm2x16 packUnorm2x16 unpackUnorm2x16 packHalf2x16 unpackHalf2x16 outerProduct transpose determinant inverse texture textureSize textureProj textureLod textureOffset texelFetch texelFetchOffset textureProjOffset textureLodOffset textureProjLod textureProjLodOffset textureGrad textureGradOffset textureProjGrad textureProjGradOffset".split(" "))},
{"./builtins":396}],396:[function(a,p,l){p.exports="abs acos all any asin atan ceil clamp cos cross dFdx dFdy degrees distance dot equal exp exp2 faceforward floor fract gl_BackColor gl_BackLightModelProduct gl_BackLightProduct gl_BackMaterial gl_BackSecondaryColor gl_ClipPlane gl_ClipVertex gl_Color gl_DepthRange gl_DepthRangeParameters gl_EyePlaneQ gl_EyePlaneR gl_EyePlaneS gl_EyePlaneT gl_Fog gl_FogCoord gl_FogFragCoord gl_FogParameters gl_FragColor gl_FragCoord gl_FragData gl_FragDepth gl_FragDepthEXT gl_FrontColor gl_FrontFacing gl_FrontLightModelProduct gl_FrontLightProduct gl_FrontMaterial gl_FrontSecondaryColor gl_LightModel gl_LightModelParameters gl_LightModelProducts gl_LightProducts gl_LightSource gl_LightSourceParameters gl_MaterialParameters gl_MaxClipPlanes gl_MaxCombinedTextureImageUnits gl_MaxDrawBuffers gl_MaxFragmentUniformComponents gl_MaxLights gl_MaxTextureCoords gl_MaxTextureImageUnits gl_MaxTextureUnits gl_MaxVaryingFloats gl_MaxVertexAttribs gl_MaxVertexTextureImageUnits gl_MaxVertexUniformComponents gl_ModelViewMatrix gl_ModelViewMatrixInverse gl_ModelViewMatrixInverseTranspose gl_ModelViewMatrixTranspose gl_ModelViewProjectionMatrix gl_ModelViewProjectionMatrixInverse gl_ModelViewProjectionMatrixInverseTranspose gl_ModelViewProjectionMatrixTranspose gl_MultiTexCoord0 gl_MultiTexCoord1 gl_MultiTexCoord2 gl_MultiTexCoord3 gl_MultiTexCoord4 gl_MultiTexCoord5 gl_MultiTexCoord6 gl_MultiTexCoord7 gl_Normal gl_NormalMatrix gl_NormalScale gl_ObjectPlaneQ gl_ObjectPlaneR gl_ObjectPlaneS gl_ObjectPlaneT gl_Point gl_PointCoord gl_PointParameters gl_PointSize gl_Position gl_ProjectionMatrix gl_ProjectionMatrixInverse gl_ProjectionMatrixInverseTranspose gl_ProjectionMatrixTranspose gl_SecondaryColor gl_TexCoord gl_TextureEnvColor gl_TextureMatrix gl_TextureMatrixInverse gl_TextureMatrixInverseTranspose gl_TextureMatrixTranspose gl_Vertex greaterThan greaterThanEqual inversesqrt length lessThan lessThanEqual log log2 matrixCompMult max min mix mod normalize not notEqual pow radians reflect refract sign sin smoothstep sqrt step tan texture2D texture2DLod texture2DProj texture2DProjLod textureCube textureCubeLod texture2DLodEXT texture2DProjLodEXT textureCubeLodEXT texture2DGradEXT texture2DProjGradEXT textureCubeGradEXT".split(" ")},
{}],397:[function(a,p,l){a=a("./literals");p.exports=a.slice().concat("layout centroid smooth case mat2x2 mat2x3 mat2x4 mat3x2 mat3x3 mat3x4 mat4x2 mat4x3 mat4x4 uint uvec2 uvec3 uvec4 samplerCubeShadow sampler2DArray sampler2DArrayShadow isampler2D isampler3D isamplerCube isampler2DArray usampler2D usampler3D usamplerCube usampler2DArray coherent restrict readonly writeonly resource atomic_uint noperspective patch sample subroutine common partition active filter image1D image2D image3D imageCube iimage1D iimage2D iimage3D iimageCube uimage1D uimage2D uimage3D uimageCube image1DArray image2DArray iimage1DArray iimage2DArray uimage1DArray uimage2DArray image1DShadow image2DShadow image1DArrayShadow image2DArrayShadow imageBuffer iimageBuffer uimageBuffer sampler1DArray sampler1DArrayShadow isampler1D isampler1DArray usampler1D usampler1DArray isampler2DRect usampler2DRect samplerBuffer isamplerBuffer usamplerBuffer sampler2DMS isampler2DMS usampler2DMS sampler2DMSArray isampler2DMSArray usampler2DMSArray".split(" "))},
{"./literals":398}],398:[function(a,p,l){p.exports="precision highp mediump lowp attribute const uniform varying break continue do for while if else in out inout float int void bool true false discard return mat2 mat3 mat4 vec2 vec3 vec4 ivec2 ivec3 ivec4 bvec2 bvec3 bvec4 sampler1D sampler2D sampler3D samplerCube sampler1DShadow sampler2DShadow struct asm class union enum typedef template this packed goto switch default inline noinline volatile public static extern external interface long short double half fixed unsigned input output hvec2 hvec3 hvec4 dvec2 dvec3 dvec4 fvec2 fvec3 fvec4 sampler2DRect sampler3DRect sampler2DRectShadow sizeof cast namespace using".split(" ")},
{}],399:[function(a,p,l){p.exports="\x3c\x3c\x3d \x3e\x3e\x3d ++ -- \x3c\x3c \x3e\x3e \x3c\x3d \x3e\x3d \x3d\x3d !\x3d \x26\x26 || +\x3d -\x3d *\x3d /\x3d %\x3d \x26\x3d ^^ ^\x3d |\x3d ( ) [ ] . ! ~ * / % + - \x3c \x3e \x26 ^ | ? : \x3d , ; { }".split(" ")},{}],400:[function(a,p,l){var m=a("./index");p.exports=function(a,h){h=m(h);var e=[];e=e.concat(h(a));return e=e.concat(h(null))}},{"./index":394}],401:[function(a,p,l){p.exports=function(a){"string"===typeof a&&(a=[a]);for(var k=[].slice.call(arguments,
1),h=[],e=0;e<a.length-1;e++)h.push(a[e],k[e]||"");h.push(a[e]);return h.join("")}},{}],402:[function(a,p,l){l="undefined"!==typeof x?x:"undefined"!==typeof self?self:"undefined"!==typeof window?window:{};a=a("is-browser");a="function"===typeof l.matchMedia?!l.matchMedia("(hover: none)").matches:a;p.exports=a},{"is-browser":409}],403:[function(a,p,l){function m(){var a=!1;try{var h=Object.defineProperty({},"passive",{get:function(){a=!0}});window.addEventListener("test",null,h);window.removeEventListener("test",
null,h)}catch(e){a=!1}return a}a=a("is-browser");p.exports=a&&m()},{"is-browser":409}],404:[function(a,p,l){l.read=function(a,k,h,e,f){var b=8*f-e-1;var n=(1<<b)-1,m=n>>1,r=-7;f=h?f-1:0;var d=h?-1:1,g=a[k+f];f+=d;h=g&(1<<-r)-1;g>>=-r;for(r+=b;0<r;h=256*h+a[k+f],f+=d,r-=8);b=h&(1<<-r)-1;h>>=-r;for(r+=e;0<r;b=256*b+a[k+f],f+=d,r-=8);if(0===h)h=1-m;else{if(h===n)return b?NaN:Infinity*(g?-1:1);b+=Math.pow(2,e);h-=m}return(g?-1:1)*b*Math.pow(2,h-e)};l.write=function(a,k,h,e,f,b){var n,m=8*b-f-1,r=(1<<
m)-1,d=r>>1,g=23===f?Math.pow(2,-24)-Math.pow(2,-77):0;b=e?0:b-1;var c=e?1:-1,v=0>k||0===k&&0>1/k?1:0;k=Math.abs(k);isNaN(k)||Infinity===k?(k=isNaN(k)?1:0,e=r):(e=Math.floor(Math.log(k)/Math.LN2),1>k*(n=Math.pow(2,-e))&&(e--,n*=2),k=1<=e+d?k+g/n:k+g*Math.pow(2,1-d),2<=k*n&&(e++,n/=2),e+d>=r?(k=0,e=r):1<=e+d?(k=(k*n-1)*Math.pow(2,f),e+=d):(k=k*Math.pow(2,d-1)*Math.pow(2,f),e=0));for(;8<=f;a[h+b]=k&255,b+=c,k/=256,f-=8);e=e<<f|k;for(m+=f;0<m;a[h+b]=e&255,b+=c,e/=256,m-=8);a[h+b-c]|=128*v}},{}],405:[function(a,
p,l){function m(a,b,e){this.vertices=a;this.adjacent=b;this.boundary=e;this.lastVisited=-1}function k(a,b,e){this.vertices=a;this.cell=b;this.index=e}function h(a,b){return n(a.vertices,b.vertices)}function e(a){for(var d=["function orient(){var tuple\x3dthis.tuple;return test("],e=0;e<=a;++e)0<e&&d.push(","),d.push("tuple[",e,"]");d.push(")}return orient");d=new Function("test",d.join(""));(a=b[a+1])||(a=b);return d(a)}function f(a,b,g){this.dimension=a;this.vertices=b;this.simplices=g;this.interior=
g.filter(function(a){return!a.boundary});this.tuple=Array(a+1);for(b=0;b<=a;++b)this.tuple[b]=this.vertices[b];(b=u[a])||(b=u[a]=e(a));this.orient=b}p.exports=function(a,d){var e=a.length;if(0===e)throw Error("Must have at least d+1 points");var c=a[0].length;if(e<=c)throw Error("Must input at least d+1 points");var h=a.slice(0,c+1),k=b.apply(void 0,h);if(0===k)throw Error("Input not in general position");for(var n=Array(c+1),r=0;r<=c;++r)n[r]=r;0>k&&(n[0]=1,n[1]=0);k=new m(n,Array(c+1),!1);var u=
k.adjacent,l=Array(c+2);for(r=0;r<=c;++r){for(var p=n.slice(),q=0;q<=c;++q)q===r&&(p[q]=-1);q=p[0];p[0]=p[1];p[1]=q;p=new m(p,Array(c+1),!0);u[r]=p;l[r]=p}l[c+1]=k;for(r=0;r<=c;++r)for(p=u[r].vertices,n=u[r].adjacent,q=0;q<=c;++q){var P=p[q];if(0>P)n[q]=k;else for(var J=0;J<=c;++J)0>u[J].vertices.indexOf(P)&&(n[q]=u[J])}h=new f(c,h,l);d=!!d;for(r=c+1;r<e;++r)h.insert(a[r],d);return h.boundary()};var b=a("robust-orientation"),n=a("simplicial-complex").compareCells;m.prototype.flip=function(){var a=
this.vertices[0];this.vertices[0]=this.vertices[1];this.vertices[1]=a;a=this.adjacent[0];this.adjacent[0]=this.adjacent[1];this.adjacent[1]=a};var u=[];a=f.prototype;a.handleBoundaryDegeneracy=function(a,b){var d=this.dimension,c=this.vertices.length-1,e=this.tuple,f=this.vertices,h=[a];for(a.lastVisited=-c;0<h.length;){a=h.pop();a=a.adjacent;for(var k=0;k<=d;++k){var n=a[k];if(n.boundary&&!(n.lastVisited<=-c)){for(var m=n.vertices,r=0;r<=d;++r){var u=m[r];e[r]=0>u?b:f[u]}m=this.orient();if(0<m)return n;
n.lastVisited=-c;0===m&&h.push(n)}}}return null};a.walk=function(a,b){var d=this.vertices.length-1,c=this.dimension,e=this.vertices,f=this.tuple,h=this.interior[b?this.interior.length*Math.random()|0:this.interior.length-1];a:for(;!h.boundary;){var k=h.vertices;b=h.adjacent;for(var n=0;n<=c;++n)f[n]=e[k[n]];h.lastVisited=d;for(n=0;n<=c;++n)if(h=b[n],!(h.lastVisited>=d)){k=f[n];f[n]=a;var m=this.orient();f[n]=k;if(0>m)continue a;else h.lastVisited=h.boundary?-d:d}return}return h};a.addPeaks=function(a,
b){var d=this.vertices.length-1,c=this.dimension,e=this.vertices,f=this.tuple,n=this.interior,r=this.simplices,u=[b];b.lastVisited=d;b.vertices[b.vertices.indexOf(-1)]=d;b.boundary=!1;n.push(b);for(var l=[];0<u.length;){b=u.pop();var p=b.vertices,q=b.adjacent,P=p.indexOf(d);if(!(0>P))for(var J=0;J<=c;++J)if(J!==P){var E=q[J];if(E.boundary&&!(E.lastVisited>=d)){var H=E.vertices;if(E.lastVisited!==-d){for(var M=0,w=0;w<=c;++w)0>H[w]?(M=w,f[w]=a):f[w]=e[H[w]];if(0<this.orient()){H[M]=d;E.boundary=!1;
n.push(E);u.push(E);E.lastVisited=d;continue}else E.lastVisited=-d}w=E.adjacent;H=p.slice();var I=q.slice();M=new m(H,I,!0);r.push(M);var Q=w.indexOf(b);if(!(0>Q))for(w[Q]=M,I[P]=E,H[J]=-1,I[J]=b,q[J]=M,M.flip(),w=0;w<=c;++w)if(E=H[w],!(0>E||E===d)){E=Array(c-1);for(Q=I=0;Q<=c;++Q){var N=H[Q];0>N||Q===w||(E[I++]=N)}l.push(new k(E,M,w))}}}}l.sort(h);for(J=0;J+1<l.length;J+=2)a=l[J],b=l[J+1],d=b.index,0>a.index||0>d||(a.cell.adjacent[a.index]=b.cell,b.cell.adjacent[b.index]=a.cell)};a.insert=function(a,
b){var d=this.vertices;d.push(a);if(b=this.walk(a,b)){for(var c=this.dimension,e=this.tuple,f=0;f<=c;++f){var h=b.vertices[f];e[f]=0>h?a:d[h]}d=this.orient(e);if(!(0>d)){if(0===d&&(b=this.handleBoundaryDegeneracy(b,a),!b))return;this.addPeaks(a,b)}}};a.boundary=function(){for(var a=this.dimension,b=[],e=this.simplices,c=e.length,f=0;f<c;++f){var h=e[f];if(h.boundary){var k=Array(a);h=h.vertices;for(var n=0,m=0,u=0;u<=a;++u)0<=h[u]?k[n++]=h[u]:m=u&1;m===(a&1)&&(h=k[0],k[0]=k[1],k[1]=h);b.push(k)}}return b}},
{"robust-orientation":494,"simplicial-complex":504}],406:[function(a,p,l){function m(a,b,c,d,e){this.mid=a;this.left=b;this.right=c;this.leftPoints=d;this.rightPoints=e;this.count=(b?b.count:0)+(c?c.count:0)+d.length}function k(a,b){a.mid=b.mid;a.left=b.left;a.right=b.right;a.leftPoints=b.leftPoints;a.rightPoints=b.rightPoints;a.count=b.count}function h(a,b){b=g(b);a.mid=b.mid;a.left=b.left;a.right=b.right;a.leftPoints=b.leftPoints;a.rightPoints=b.rightPoints;a.count=b.count}function e(a,b){var c=
a.intervals([]);b=c.indexOf(b);if(0>b)return 0;c.splice(b,1);h(a,c);return 1}function f(a,b,c){for(var d=0;d<a.length&&a[d][0]<=b;++d){var e=c(a[d]);if(e)return e}}function b(a,b,c){for(var d=a.length-1;0<=d&&a[d][1]>=b;--d){var e=c(a[d]);if(e)return e}}function n(a,b){for(var c=0;c<a.length;++c){var d=b(a[c]);if(d)return d}}function u(a,b){return a-b}function r(a,b){var c=a[0]-b[0];return c?c:a[1]-b[1]}function d(a,b){var c=a[1]-b[1];return c?c:a[0]-b[0]}function g(a){if(0===a.length)return null;
for(var b=[],c=0;c<a.length;++c)b.push(a[c][0],a[c][1]);b.sort(u);b=b[b.length>>1];var e=[],f=[],h=[];for(c=0;c<a.length;++c){var k=a[c];k[1]<b?e.push(k):b<k[0]?f.push(k):h.push(k)}a=h.slice();h.sort(r);a.sort(d);return new m(b,g(e),g(f),h,a)}function c(a){this.root=a}var v=a("binary-search-bounds");p.exports=function(a){return a&&0!==a.length?new c(g(a)):new c(null)};a=m.prototype;a.intervals=function(a){a.push.apply(a,this.leftPoints);this.left&&this.left.intervals(a);this.right&&this.right.intervals(a);
return a};a.insert=function(a){var b=this.count-this.leftPoints.length;this.count+=1;if(a[1]<this.mid)this.left?4*(this.left.count+1)>3*(b+1)?(b=this.intervals([]),b.push(a),h(this,b)):this.left.insert(a):this.left=g([a]);else if(a[0]>this.mid)this.right?4*(this.right.count+1)>3*(b+1)?(b=this.intervals([]),b.push(a),h(this,b)):this.right.insert(a):this.right=g([a]);else{b=v.ge(this.leftPoints,a,r);var c=v.ge(this.rightPoints,a,d);this.leftPoints.splice(b,0,a);this.rightPoints.splice(c,0,a)}};a.remove=
function(a){var b=this.count-this.leftPoints;if(a[1]<this.mid){if(!this.left)return 0;if(4*(this.right?this.right.count:0)>3*(b-1))return e(this,a);b=this.left.remove(a);if(2===b)return this.left=null,--this.count,1;1===b&&--this.count;return b}if(a[0]>this.mid){if(!this.right)return 0;if(4*(this.left?this.left.count:0)>3*(b-1))return e(this,a);b=this.right.remove(a);if(2===b)return this.right=null,--this.count,1;1===b&&--this.count;return b}if(1===this.count)return this.leftPoints[0]===a?2:0;if(1===
this.leftPoints.length&&this.leftPoints[0]===a){if(this.left&&this.right){a=this;for(var c=this.left;c.right;)a=c,c=c.right;if(a===this)c.right=this.right;else{var g=this.left;b=this.right;a.count-=c.count;a.right=c.left;c.left=g;c.right=b}k(this,c);this.count=(this.left?this.left.count:0)+(this.right?this.right.count:0)+this.leftPoints.length}else this.left?k(this,this.left):k(this,this.right);return 1}for(g=v.ge(this.leftPoints,a,r);g<this.leftPoints.length&&this.leftPoints[g][0]===a[0];++g)if(this.leftPoints[g]===
a)for(--this.count,this.leftPoints.splice(g,1),b=v.ge(this.rightPoints,a,d);b<this.rightPoints.length&&this.rightPoints[b][1]===a[1];++b)if(this.rightPoints[b]===a)return this.rightPoints.splice(b,1),1;return 0};a.queryPoint=function(a,c){if(a<this.mid){if(this.left){var d=this.left.queryPoint(a,c);if(d)return d}return f(this.leftPoints,a,c)}return a>this.mid?this.right&&(d=this.right.queryPoint(a,c))?d:b(this.rightPoints,a,c):n(this.leftPoints,c)};a.queryInterval=function(a,c,d){if(a<this.mid&&this.left){var e=
this.left.queryInterval(a,c,d);if(e)return e}return c>this.mid&&this.right&&(e=this.right.queryInterval(a,c,d))?e:c<this.mid?f(this.leftPoints,c,d):a>this.mid?b(this.rightPoints,a,d):n(this.leftPoints,d)};a=c.prototype;a.insert=function(a){this.root?this.root.insert(a):this.root=new m(a[0],null,null,[a],[a])};a.remove=function(a){return this.root?(a=this.root.remove(a),2===a&&(this.root=null),0!==a):!1};a.queryPoint=function(a,b){if(this.root)return this.root.queryPoint(a,b)};a.queryInterval=function(a,
b,c){if(a<=b&&this.root)return this.root.queryInterval(a,b,c)};Object.defineProperty(a,"count",{get:function(){return this.root?this.root.count:0}});Object.defineProperty(a,"intervals",{get:function(){return this.root?this.root.intervals([]):[]}})},{"binary-search-bounds":81}],407:[function(a,p,l){p.exports=function(a,k){k=k||Array(a.length);for(var h=0;h<a.length;++h)k[a[h]]=h;return k}},{}],408:[function(a,p,l){p.exports=function(a){for(var k=Array(a),h=0;h<a;++h)k[h]=h;return k}},{}],409:[function(a,
p,l){p.exports=!0},{}],410:[function(a,p,l){function m(a){return!!a.constructor&&"function"===typeof a.constructor.isBuffer&&a.constructor.isBuffer(a)}p.exports=function(a){return null!=a&&(m(a)||"function"===typeof a.readFloatLE&&"function"===typeof a.slice&&m(a.slice(0,0))||!!a._isBuffer)}},{}],411:[function(a,p,l){p.exports="undefined"!==typeof navigator&&(/MSIE/.test(navigator.userAgent)||/Trident\//.test(navigator.appVersion))},{}],412:[function(a,p,l){function m(a){a||(a={});var e=a.ua;e||"undefined"===
typeof navigator||(e=navigator.userAgent);e&&e.headers&&"string"===typeof e.headers["user-agent"]&&(e=e.headers["user-agent"]);return"string"!==typeof e?!1:a.tablet?h.test(e):k.test(e)}p.exports=m;p.exports.isMobile=m;var k=/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\.(browser|link)|vodafone|wap|windows (ce|phone)|xda|xiino/i,
h=/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\.(browser|link)|vodafone|wap|windows (ce|phone)|xda|xiino|android|ipad|playbook|silk/i},{}],413:[function(a,p,l){p.exports=function(a){var k=typeof a;return null!==a&&("object"===k||"function"===k)}},{}],414:[function(a,p,l){var m=Object.prototype.toString;
p.exports=function(a){var h;return"[object Object]"===m.call(a)&&(h=Object.getPrototypeOf(a),null===h||h===Object.getPrototypeOf({}))}},{}],415:[function(a,p,l){p.exports=function(a){for(var k=a.length,h,e=0;e<k;e++)if(h=a.charCodeAt(e),(9>h||13<h)&&32!==h&&133!==h&&160!==h&&5760!==h&&6158!==h&&(8192>h||8205<h)&&8232!==h&&8233!==h&&8239!==h&&8287!==h&&8288!==h&&12288!==h&&65279!==h)return!1;return!0}},{}],416:[function(a,p,l){p.exports=function(a){if("string"!==typeof a)return!1;a=a.trim();return/^[mzlhvcsqta]\s*[-+.0-9][^mlhvzcsqta]+/i.test(a)&&
/[\dz]$/i.test(a)&&4<a.length?!0:!1}},{}],417:[function(a,p,l){p.exports=function(a,k,h){return a*(1-h)+k*h}},{}],418:[function(a,p,l){(function(a){(function(a,h){"object"===typeof l&&"undefined"!==typeof p?p.exports=h():a.mapboxgl=h()})(this,function(){function k(a,k){if(h)if(e){a="var sharedChunk \x3d {}; ("+h+")(sharedChunk); ("+e+")(sharedChunk);";var b={};h(b);f=k(b);f.workerUrl=window.URL.createObjectURL(new Blob([a],{type:"text/javascript"}))}else e=k;else h=k}var h,e,f;k(["exports"],function(b){function e(a){return a&&
a.__esModule&&Object.prototype.hasOwnProperty.call(a,"default")?a.default:a}function f(a,b){return a(b={exports:{}},b.exports),b.exports}function h(a,b,c,d){this.cx=3*a;this.bx=3*(c-a)-this.cx;this.ax=1-this.cx-this.bx;this.cy=3*b;this.by=3*(d-b)-this.cy;this.ay=1-this.cy-this.by;this.p1x=a;this.p1y=d;this.p2x=c;this.p2y=d}function d(a,b){this.x=a;this.y=b}function g(a,b,c,d){var e=new Dc(a,b,c,d);return function(a){return e.solve(a)}}function c(a,b,c){return Math.min(c,Math.max(b,a))}function k(a){for(var b=
[],c=arguments.length-1;0<c--;)b[c]=arguments[c+1];for(c=0;c<b.length;c+=1){var d=b[c],e;for(e in d)a[e]=d[e]}return a}function t(a,b){a.forEach(function(a){b[a]&&(b[a]=b[a].bind(b))})}function m(a,b){return-1!==a.indexOf(b,a.length-b.length)}function l(a,b,c){var d={},e;for(e in a)d[e]=b.call(c||this,a[e],e,a);return d}function p(a,b,c){var d={},e;for(e in a)b.call(c||this,a[e],e,a)&&(d[e]=a[e]);return d}function q(a){return Array.isArray(a)?a.map(q):"object"==typeof a&&a?l(a,q):a}function A(a){Gd[a]||
("undefined"!=typeof console&&console.warn(a),Gd[a]=!0)}function C(a,b,c){return(c.y-a.y)*(b.x-a.x)>(b.y-a.y)*(c.x-a.x)}function P(a){var b=new self.XMLHttpRequest,c;for(c in b.open("GET",a.url,!0),a.headers)b.setRequestHeader(c,a.headers[c]);return b.withCredentials="include"===a.credentials,b}function J(a,b,c){c&&c[a]&&(b=c[a].indexOf(b),-1!==b&&c[a].splice(b,1))}function E(a){var b=a.key;return(a=a.value)?[new La(b,a,"constants have been deprecated as of v8")]:[]}function H(a){for(var b=[],c=arguments.length-
1;0<c--;)b[c]=arguments[c+1];for(c=0;c<b.length;c+=1){var d=b[c],e;for(e in d)a[e]=d[e]}return a}function M(a){return a instanceof Number||a instanceof String||a instanceof Boolean?a.valueOf():a}function w(a){return Array.isArray(a)?a.map(w):M(a)}function I(a,b){return{kind:"array",itemType:a,N:b}}function Q(a){if("array"===a.kind){var b=Q(a.itemType);return"number"==typeof a.N?"array\x3c"+b+", "+a.N+"\x3e":"value"===a.itemType.kind?"array":"array\x3c"+b+"\x3e"}return a.kind}function N(a,b){if("error"===
b.kind)return null;if("array"===a.kind){if("array"===b.kind&&!N(a.itemType,b.itemType)&&("number"!=typeof a.N||a.N===b.N))return null}else{if(a.kind===b.kind)return null;if("value"===a.kind)for(var c=0,d=Re;c<d.length;c+=1)if(!N(d[c],b))return null}return"Expected "+Q(a)+" but found "+Q(b)+" instead."}function L(a,b,c,d){return"number"==typeof a&&0<=a&&255>=a&&"number"==typeof b&&0<=b&&255>=b&&"number"==typeof c&&0<=c&&255>=c?void 0===d||"number"==typeof d&&0<=d&&1>=d?null:"Invalid rgba value ["+
[a,b,c,d].join(", ")+"]: 'a' must be between 0 and 1.":"Invalid rgba value ["+("number"==typeof d?[a,b,c,d]:[a,b,c]).join(", ")+"]: 'r', 'g', and 'b' must be between 0 and 255."}function R(a){if(null===a)return Wc;if("string"==typeof a)return Za;if("boolean"==typeof a)return ob;if("number"==typeof a)return Da;if(a instanceof tb)return $b;if(a instanceof Lc)return Pb;if(Array.isArray(a)){for(var b,c=a.length,d=0;d<a.length;d+=1){var e=R(a[d]);if(b){if(b===e)continue;b=ub;break}b=e}return I(b||ub,c)}return fc}
function x(a){if(a instanceof Rb&&("get"===a.name&&1===a.args.length||"has"===a.name&&1===a.args.length||"properties"===a.name||"geometry-type"===a.name||"id"===a.name||/^filter-/.test(a.name)))return!1;var b=!0;return a.eachChild(function(a){b&&!x(a)&&(b=!1)}),b}function U(a,b){if(a instanceof Rb&&0<=b.indexOf(a.name))return!1;var c=!0;return a.eachChild(function(a){c&&!U(a,b)&&(c=!1)}),c}function T(a,b){for(var c,d,e=0,g=a.length-1,f=0;e<=g;){if(c=a[f=Math.floor((e+g)/2)],d=a[f+1],b===c||b>c&&b<
d)return f;if(c<b)e=f+1;else{if(!(c>b))throw new Ec("Input is not a number.");g=f-1}}return Math.max(f-1,0)}function Y(a,b,c){return a*(1-c)+b*c}function ia(a,b,c,d){d-=c;a-=c;return 0===d?0:1===b?a/d:(Math.pow(b,a)-1)/(Math.pow(b,d)-1)}function S(a){return"string"===a.kind||"number"===a.kind||"boolean"===a.kind||"null"===a.kind}function z(a,b){return function(){function c(a,b,c){this.type=ob;this.lhs=a;this.rhs=b;this.collator=c}return c.parse=function(a,b){if(3!==a.length&&4!==a.length)return b.error("Expected two or three arguments.");
var d=b.parse(a[1],1,ub);if(!d)return null;var e=b.parse(a[2],2,ub);if(!e)return null;if(!S(d.type)&&!S(e.type))return b.error("Expected at least one argument to be a string, number, boolean, or null, but found ("+Q(d.type)+", "+Q(e.type)+") instead.");if(d.type.kind!==e.type.kind&&"value"!==d.type.kind&&"value"!==e.type.kind)return b.error("Cannot compare "+Q(d.type)+" and "+Q(e.type)+".");var g=null;if(4===a.length){if("string"!==d.type.kind&&"string"!==e.type.kind)return b.error("Cannot use collator to compare non-string types.");
if(!(g=b.parse(a[3],3,Pb)))return null}return new c(d,e,g)},c.prototype.evaluate=function(a){a=this.collator?0===this.collator.evaluate(a).compare(this.lhs.evaluate(a),this.rhs.evaluate(a)):this.lhs.evaluate(a)===this.rhs.evaluate(a);return b?!a:a},c.prototype.eachChild=function(a){a(this.lhs);a(this.rhs);this.collator&&a(this.collator)},c.prototype.possibleOutputs=function(){return[!0,!1]},c.prototype.serialize=function(){var b=[a];return this.eachChild(function(a){b.push(a.serialize())}),b},c}()}
function fa(a,b){var c=b[0],d=b[1],e=b[2];b=b[3];c=c.evaluate(a);d=d.evaluate(a);e=e.evaluate(a);a=b?b.evaluate(a):1;if(b=L(c,d,e,a))throw new Ec(b);return new tb(c/255*a,d/255*a,e/255*a,a)}function qa(a,b){a=b[a];return void 0===a?null:a}function ha(a,b){var c=b[1];return b[0].evaluate(a)<c.evaluate(a)}function ea(a,b){var c=b[1];return b[0].evaluate(a)>c.evaluate(a)}function ba(a,b){var c=b[1];return b[0].evaluate(a)<=c.evaluate(a)}function la(a,b){var c=b[1];return b[0].evaluate(a)>=c.evaluate(a)}
function Z(a){return{result:"error",value:a}}function F(a){return a>th?Math.pow(a,1/3):a/Eh+Dg}function da(a){return a>ed?a*a*a:Eh*(a-Dg)}function K(a){return 255*(.0031308>=a?12.92*a:1.055*Math.pow(a,1/2.4)-.055)}function ja(a){return.04045>=(a/=255)?a/12.92:Math.pow((a+.055)/1.055,2.4)}function xa(a){var b=ja(a.r),c=ja(a.g),d=ja(a.b),e=F((.4124564*b+.3575761*c+.1804375*d)/.95047),g=F(.2126729*b+.7151522*c+.072175*d);return{l:116*g-16,a:500*(e-g),b:200*(g-F((.0193339*b+.119192*c+.9503041*d)/1.08883)),
alpha:a.a}}function za(a){var b=(a.l+16)/116,c=isNaN(a.a)?b:b+a.a/500,d=isNaN(a.b)?b:b-a.b/200;return b=1*da(b),c=.95047*da(c),d=1.08883*da(d),new tb(K(3.2404542*c-1.5371385*b-.4985314*d),K(-.969266*c+1.8760108*b+.041556*d),K(.0556434*c-.2040259*b+1.0572252*d),a.alpha)}function ka(a){return a instanceof Number?"number":a instanceof String?"string":a instanceof Boolean?"boolean":Array.isArray(a)?"array":null===a?"null":typeof a}function wa(a){return"object"==typeof a&&null!==a&&!Array.isArray(a)}function ta(a){return a}
function aa(a,b,c){return void 0!==a?a:void 0!==b?b:void 0!==c?c:void 0}function ma(a,b,c,d,e){return aa(typeof c===e?d[c]:void 0,a.default,b.default)}function Aa(a,b,c){if("number"!==ka(c))return aa(a.default,b.default);b=a.stops.length;if(1===b||c<=a.stops[0][0])return a.stops[0][1];if(c>=a.stops[b-1][0])return a.stops[b-1][1];c=Ca(a.stops,c);return a.stops[c][1]}function va(a,b,c){var d=void 0!==a.base?a.base:1;if("number"!==ka(c))return aa(a.default,b.default);var e=a.stops.length;if(1===e||c<=
a.stops[0][0])return a.stops[0][1];if(c>=a.stops[e-1][0])return a.stops[e-1][1];e=Ca(a.stops,c);var g=function(a,b,c,d){d-=c;a-=c;return 0===d?0:1===b?a/d:(Math.pow(b,a)-1)/(Math.pow(b,d)-1)}(c,d,a.stops[e][0],a.stops[e+1][0]),f=a.stops[e][1],h=a.stops[e+1][1],k=xc[b.type]||ta;if(a.colorSpace&&"rgb"!==a.colorSpace){var n=cd[a.colorSpace];k=function(a,b){return n.reverse(n.interpolate(n.forward(a),n.forward(b),g))}}return"function"==typeof f.evaluate?{evaluate:function(){for(var a=[],b=arguments.length;b--;)a[b]=
arguments[b];b=f.evaluate.apply(void 0,a);a=h.evaluate.apply(void 0,a);if(void 0!==b&&void 0!==a)return k(b,a,g)}}:k(f,h,g)}function sa(a,b,c){return"color"===b.type?c=tb.parse(c):ka(c)===b.type||"enum"===b.type&&b.values[c]||(c=void 0),aa(c,a.default,b.default)}function Ca(a,b){for(var c,d,e=0,g=a.length-1,f=0;e<=g;){if(c=a[f=Math.floor((e+g)/2)][0],d=a[f+1][0],b===c||b>c&&b<d)return f;c<b?e=f+1:c>b&&(g=f-1)}return Math.max(f-1,0)}function Ga(a){return Array.isArray(a)&&0<a.length&&"string"==typeof a[0]&&
a[0]in Ic}function Ja(a,b){var c=rd;var d={color:$b,string:Za,number:Da,enum:Za,boolean:ob};d="array"===b.type?I(d[b.value]||ub,b.length):d[b.type]||null;c=new c(Ic,[],d);return(a=c.parse(a))?{result:"success",value:new Hf(a,b)}:Z(c.errors)}function oa(a,b){if("error"===(a=Ja(a,b)).result)return a;var c=a.value.expression,d=x(c);if(!d&&!b["property-function"])return Z([new qb("","property expressions not supported")]);var e=U(c,["zoom"]);return e||!1!==b["zoom-function"]?(c=function Md(a){var b=null;
if(a instanceof td)b=Md(a.result);else if(a instanceof sd)for(var c=0,d=a.args;c<d.length&&!(b=Md(d[c]));c+=1);else(a instanceof gc||a instanceof Ac)&&a.input instanceof Rb&&"zoom"===a.input.name&&(b=a);if(b instanceof qb)return b;a.eachChild(function(a){a=Md(a);a instanceof qb?b=a:!b&&a?b=new qb("",'"zoom" expression may only be used as input to a top-level "step" or "interpolate" expression.'):b&&a&&b!==a&&(b=new qb("",'Only one zoom-based "step" or "interpolate" subexpression may be used in an expression.'))});
return b}(c))||e?c instanceof qb?Z([c]):c instanceof Ac&&"piecewise-constant"===b.function?Z([new qb("",'"interpolate" expressions cannot be used with this property')]):{result:"success",value:c?new ag(d?"camera":"composite",a.value,c):new pg(d?"constant":"source",a.value)}:Z([new qb("",'"zoom" expression may only be used as input to a top-level "step" or "interpolate" expression.')]):Z([new qb("","zoom expressions not supported")])}function Ea(a,b){if(wa(a))return new Yg(a,b);if(Ga(a)){a=oa(a,b);
if("error"===a.result)throw Error(a.value.map(function(a){return a.key+": "+a.message}).join(", "));return a.value}var c=a;return"string"==typeof a&&"color"===b.type&&(c=tb.parse(a)),{kind:"constant",evaluate:function(){return c}}}function na(a){var b=a.key,c=a.value,d=a.valueSpec||{},e=a.objectElementValidators||{},g=a.style;a=a.styleSpec;var f=[],h=ka(c);if("object"!==h)return[new La(b,c,"object expected, "+h+" found")];for(var k in c){var n=k.split(".")[0];h=d[n]||d["*"];if(e[n])n=e[n];else if(d[n])n=
nb;else if(e["*"])n=e["*"];else{if(!d["*"]){f.push(new La(b,c[k],'unknown property "'+k+'"'));continue}n=nb}f=f.concat(n({key:(b?b+".":b)+k,value:c[k],valueSpec:h,style:g,styleSpec:a,object:c,objectKey:k},c))}for(var t in d)e[t]||d[t].required&&void 0===d[t].default&&void 0===c[t]&&f.push(new La(b,c,'missing required property "'+t+'"'));return f}function ua(a){var b=a.value,c=a.valueSpec,d=a.style,e=a.styleSpec,g=a.key;a=a.arrayElementValidator||nb;if("array"!==ka(b))return[new La(g,b,"array expected, "+
ka(b)+" found")];if(c.length&&b.length!==c.length)return[new La(g,b,"array length "+c.length+" expected, length "+b.length+" found")];if(c["min-length"]&&b.length<c["min-length"])return[new La(g,b,"array length at least "+c["min-length"]+" expected, length "+b.length+" found")];var f={type:c.value};7>e.$version&&(f.function=c.function);"object"===ka(c.value)&&(f=c.value);c=[];for(var h=0;h<b.length;h++)c=c.concat(a({array:b,arrayIndex:h,value:b[h],valueSpec:f,style:d,styleSpec:e,key:g+"["+h+"]"}));
return c}function Fa(a){var b=a.key,c=a.value;a=a.valueSpec;var d=ka(c);return"number"!==d?[new La(b,c,"number expected, "+d+" found")]:"minimum"in a&&c<a.minimum?[new La(b,c,c+" is less than the minimum value "+a.minimum)]:"maximum"in a&&c>a.maximum?[new La(b,c,c+" is greater than the maximum value "+a.maximum)]:[]}function X(a){function b(a){var b=[],d=a.value,h=a.key;if("array"!==ka(d))return[new La(h,d,"array expected, "+ka(d)+" found")];if(2!==d.length)return[new La(h,d,"array length 2 expected, length "+
d.length+" found")];if(m){if("object"!==ka(d[0]))return[new La(h,d,"object expected, "+ka(d[0])+" found")];if(void 0===d[0].zoom)return[new La(h,d,"object stop key must have zoom")];if(void 0===d[0].value)return[new La(h,d,"object stop key must have value")];if(g&&g>M(d[0].zoom))return[new La(h,d[0].zoom,"stop zoom values must appear in ascending order")];M(d[0].zoom)!==g&&(g=M(d[0].zoom),e=void 0,k={});b=b.concat(na({key:h+"[0]",value:d[0],valueSpec:{zoom:{}},style:a.style,styleSpec:a.styleSpec,
objectElementValidators:{zoom:Fa,value:c}}))}else b=b.concat(c({key:h+"[0]",value:d[0],valueSpec:{},style:a.style,styleSpec:a.styleSpec},d));return b.concat(nb({key:h+"[1]",value:d[1],valueSpec:f,style:a.style,styleSpec:a.styleSpec}))}function c(a,b){var c=ka(a.value),g=M(a.value);b=null!==a.value?a.value:b;if(d){if(c!==d)return[new La(a.key,b,c+" stop domain type must match previous stop domain type "+d)]}else d=c;return"number"!==c&&"string"!==c&&"boolean"!==c?[new La(a.key,b,"stop domain value must be a number, string, or boolean")]:
"number"!==c&&"categorical"!==h?(c="number expected, "+c+" found",f["property-function"]&&void 0===h&&(c+='\nIf you intended to use a categorical function, specify `"type": "categorical"`.'),[new La(a.key,b,c)]):"categorical"!==h||"number"!==c||isFinite(g)&&Math.floor(g)===g?"categorical"!==h&&"number"===c&&void 0!==e&&g<e?[new La(a.key,b,"stop domain values must appear in ascending order")]:(e=g,"categorical"===h&&g in k?[new La(a.key,b,"stop domain values must be unique")]:(k[g]=!0,[])):[new La(a.key,
b,"integer expected, found "+g)]}var d,e,g,f=a.valueSpec,h=M(a.value.type),k={},n="categorical"!==h&&void 0===a.value.property,t=!n,m="array"===ka(a.value.stops)&&"array"===ka(a.value.stops[0])&&"object"===ka(a.value.stops[0][0]),v=na({key:a.key,value:a.value,valueSpec:a.styleSpec.function,style:a.style,styleSpec:a.styleSpec,objectElementValidators:{stops:function(a){if("identity"===h)return[new La(a.key,a.value,'identity function may not have a "stops" property')];var c=[],d=a.value;c=c.concat(ua({key:a.key,
value:d,valueSpec:a.valueSpec,style:a.style,styleSpec:a.styleSpec,arrayElementValidator:b}));"array"===ka(d)&&0===d.length&&c.push(new La(a.key,d,"array must have at least one stop"));return c},default:function(a){return nb({key:a.key,value:a.value,valueSpec:f,style:a.style,styleSpec:a.styleSpec})}}});return"identity"===h&&n&&v.push(new La(a.key,a.value,'missing required property "property"')),"identity"===h||a.value.stops||v.push(new La(a.key,a.value,'missing required property "stops"')),"exponential"===
h&&"piecewise-constant"===a.valueSpec.function&&v.push(new La(a.key,a.value,"exponential functions not supported")),8<=a.styleSpec.$version&&(t&&!a.valueSpec["property-function"]?v.push(new La(a.key,a.value,"property functions not supported")):n&&!a.valueSpec["zoom-function"]&&"heatmap-color"!==a.objectKey&&"line-gradient"!==a.objectKey&&v.push(new La(a.key,a.value,"zoom functions not supported"))),"categorical"!==h&&!m||void 0!==a.value.property||v.push(new La(a.key,a.value,'"property" property is required')),
v}function Pa(a){var b=("property"===a.expressionContext?oa:Ja)(w(a.value),a.valueSpec);return"error"===b.result?b.value.map(function(b){return new La(""+a.key+b.key,a.value,b.message)}):"property"===a.expressionContext&&"text-font"===a.propertyKey&&-1!==b.value._styleExpression.expression.possibleOutputs().indexOf(void 0)?[new La(a.key,a.value,'Invalid data expression for "text-font". Output values must be contained as literals within the expression.')]:[]}function Ba(a){var b=a.key,c=a.value;a=
a.valueSpec;var d=[];return Array.isArray(a.values)?-1===a.values.indexOf(M(c))&&d.push(new La(b,c,"expected one of ["+a.values.join(", ")+"], "+JSON.stringify(c)+" found")):-1===Object.keys(a.values).indexOf(M(c))&&d.push(new La(b,c,"expected one of ["+Object.keys(a.values).join(", ")+"], "+JSON.stringify(c)+" found")),d}function Ia(a){if(!Array.isArray(a)||0===a.length)return!1;switch(a[0]){case "has":return 2<=a.length&&"$id"!==a[1]&&"$type"!==a[1];case "in":case "!in":case "!has":case "none":return!1;
case "\x3d\x3d":case "!\x3d":case "\x3e":case "\x3e\x3d":case "\x3c":case "\x3c\x3d":return 3===a.length&&(Array.isArray(a[1])||Array.isArray(a[2]));case "any":case "all":var b=0;for(a=a.slice(1);b<a.length;b+=1){var c=a[b];if(!Ia(c)&&"boolean"!=typeof c)return!1}return!0;default:return!0}}function Ka(a){if(!a)return function(){return!0};Ia(a)||(a=Ya(a));var b=Ja(a,mf);if("error"===b.result)throw Error(b.value.map(function(a){return a.key+": "+a.message}).join(", "));return function(a,c){return b.value.evaluate(a,
c)}}function Ua(a,b){return a<b?-1:a>b?1:0}function Ya(a){if(!a)return!0;var b,c=a[0];return 1>=a.length?"any"!==c:"\x3d\x3d"===c?Cb(a[1],a[2],"\x3d\x3d"):"!\x3d"===c?Wa(Cb(a[1],a[2],"\x3d\x3d")):"\x3c"===c||"\x3e"===c||"\x3c\x3d"===c||"\x3e\x3d"===c?Cb(a[1],a[2],c):"any"===c?(b=a.slice(1),["any"].concat(b.map(Ya))):"all"===c?["all"].concat(a.slice(1).map(Ya)):"none"===c?["all"].concat(a.slice(1).map(Ya).map(Wa)):"in"===c?eb(a[1],a.slice(2)):"!in"===c?Wa(eb(a[1],a.slice(2))):"has"===c?Ta(a[1]):"!has"!==
c||Wa(Ta(a[1]))}function Cb(a,b,c){switch(a){case "$type":return["filter-type-"+c,b];case "$id":return["filter-id-"+c,b];default:return["filter-"+c,a,b]}}function eb(a,b){if(0===b.length)return!1;switch(a){case "$type":return["filter-type-in",["literal",b]];case "$id":return["filter-id-in",["literal",b]];default:return 200<b.length&&!b.some(function(a){return typeof a!=typeof b[0]})?["filter-in-large",a,["literal",b.sort(Ua)]]:["filter-in-small",a,["literal",b]]}}function Ta(a){switch(a){case "$type":return!0;
case "$id":return["filter-has-id"];default:return["filter-has",a]}}function Wa(a){return["!",a]}function $a(a){return Ia(w(a.value))?Pa(H({},a,{expressionContext:"filter",valueSpec:{value:"boolean"}})):function wd(a){var b=a.value,c=a.key;if("array"!==ka(b))return[new La(c,b,"array expected, "+ka(b)+" found")];var d=a.styleSpec,e,g=[];if(1>b.length)return[new La(c,b,"filter array must have at least 1 element")];g=g.concat(Ba({key:c+"[0]",value:b[0],valueSpec:d.filter_operator,style:a.style,styleSpec:a.styleSpec}));
switch(M(b[0])){case "\x3c":case "\x3c\x3d":case "\x3e":case "\x3e\x3d":2<=b.length&&"$type"===M(b[1])&&g.push(new La(c,b,'"$type" cannot be use with operator "'+b[0]+'"'));case "\x3d\x3d":case "!\x3d":3!==b.length&&g.push(new La(c,b,'filter array for operator "'+b[0]+'" must have 3 elements'));case "in":case "!in":2<=b.length&&"string"!==(e=ka(b[1]))&&g.push(new La(c+"[1]",b[1],"string expected, "+e+" found"));for(var f=2;f<b.length;f++)e=ka(b[f]),"$type"===M(b[1])?g=g.concat(Ba({key:c+"["+f+"]",
value:b[f],valueSpec:d.geometry_type,style:a.style,styleSpec:a.styleSpec})):"string"!==e&&"number"!==e&&"boolean"!==e&&g.push(new La(c+"["+f+"]",b[f],"string, number, or boolean expected, "+e+" found"));break;case "any":case "all":case "none":for(d=1;d<b.length;d++)g=g.concat(wd({key:c+"["+d+"]",value:b[d],style:a.style,styleSpec:a.styleSpec}));break;case "has":case "!has":e=ka(b[1]),2!==b.length?g.push(new La(c,b,'filter array for "'+b[0]+'" operator must have 2 elements')):"string"!==e&&g.push(new La(c+
"[1]",b[1],"string expected, "+e+" found"))}return g}(a)}function rb(a,b){var c=a.key,d=a.style,e=a.styleSpec,g=a.value,f=a.objectKey,h=e[b+"_"+a.layerType];if(!h)return[];var k=f.match(/^(.*)-transition$/);if("paint"===b&&k&&h[k[1]]&&h[k[1]].transition)return nb({key:c,value:g,valueSpec:e.transition,style:d,styleSpec:e});var n;b=a.valueSpec||h[f];if(!b)return[new La(c,g,'unknown property "'+f+'"')];if("string"===ka(g)&&b["property-function"]&&!b.tokens&&(n=/^{([^}]+)}$/.exec(g)))return[new La(c,
g,'"'+f+'" does not support interpolation syntax\nUse an identity property function instead: `{ "type": "identity", "property": '+JSON.stringify(n[1])+" }`.")];n=[];return"symbol"===a.layerType&&("text-field"===f&&d&&!d.glyphs&&n.push(new La(c,g,'use of "text-field" requires a style "glyphs" property')),"text-font"===f&&wa(w(g))&&"identity"===M(g.type)&&n.push(new La(c,g,'"text-font" does not support identity functions'))),n.concat(nb({key:a.key,value:g,valueSpec:b,style:d,styleSpec:e,expressionContext:"property",
propertyKey:f}))}function mb(a){return rb(a,"paint")}function cb(a){return rb(a,"layout")}function Hb(a){var b=[],c=a.value,d=a.key,e=a.style,g=a.styleSpec;c.type||c.ref||b.push(new La(d,c,'either "type" or "ref" is required'));var f,h=M(c.type),k=M(c.ref);if(c.id)for(var n=M(c.id),t=0;t<a.arrayIndex;t++){var m=e.layers[t];M(m.id)===n&&b.push(new La(d,c.id,'duplicate layer id "'+c.id+'", previously used at line '+m.id.__line__))}"ref"in c?(["type","source","source-layer","filter","layout"].forEach(function(a){a in
c&&b.push(new La(d,c[a],'"'+a+'" is prohibited for ref layers'))}),e.layers.forEach(function(a){M(a.id)===k&&(f=a)}),f?f.ref?b.push(new La(d,c.ref,"ref cannot reference another ref layer")):h=M(f.type):b.push(new La(d,c.ref,'ref layer "'+k+'" not found'))):"background"!==h&&(c.source?(n=(e=e.sources&&e.sources[c.source])&&M(e.type),e?"vector"===n&&"raster"===h?b.push(new La(d,c.source,'layer "'+c.id+'" requires a raster source')):"raster"===n&&"raster"!==h?b.push(new La(d,c.source,'layer "'+c.id+
'" requires a vector source')):"vector"!==n||c["source-layer"]?"raster-dem"===n&&"hillshade"!==h?b.push(new La(d,c.source,"raster-dem source can only be used with layer type 'hillshade'.")):"line"!==h||!c.paint||!c.paint["line-gradient"]||"geojson"===n&&e.lineMetrics||b.push(new La(d,c,'layer "'+c.id+'" specifies a line-gradient, which requires a GeoJSON source with `lineMetrics` enabled.')):b.push(new La(d,c,'layer "'+c.id+'" must specify a "source-layer"')):b.push(new La(d,c.source,'source "'+c.source+
'" not found'))):b.push(new La(d,c,'missing required property "source"')));return b=b.concat(na({key:d,value:c,valueSpec:g.layer,style:a.style,styleSpec:a.styleSpec,objectElementValidators:{"*":function(){return[]},type:function(){return nb({key:d+".type",value:c.type,valueSpec:g.layer.type,style:a.style,styleSpec:a.styleSpec,object:c,objectKey:"type"})},filter:$a,layout:function(a){return na({layer:c,key:a.key,value:a.value,style:a.style,styleSpec:a.styleSpec,objectElementValidators:{"*":function(a){return cb(H({layerType:h},
a))}}})},paint:function(a){return na({layer:c,key:a.key,value:a.value,style:a.style,styleSpec:a.styleSpec,objectElementValidators:{"*":function(a){return mb(H({layerType:h},a))}}})}}}))}function pb(a){var b=a.value,c=a.key,d=a.styleSpec,e=a.style;if(!b.type)return[new La(c,b,'"type" is required')];var g=M(b.type),f=[];switch(g){case "vector":case "raster":case "raster-dem":if(f=f.concat(na({key:c,value:b,valueSpec:d["source_"+g.replace("-","_")],style:a.style,styleSpec:d})),"url"in b)for(var h in b)0>
["type","url","tileSize"].indexOf(h)&&f.push(new La(c+"."+h,b[h],'a source with a "url" property may not include a "'+h+'" property'));return f;case "geojson":return na({key:c,value:b,valueSpec:d.source_geojson,style:e,styleSpec:d});case "video":return na({key:c,value:b,valueSpec:d.source_video,style:e,styleSpec:d});case "image":return na({key:c,value:b,valueSpec:d.source_image,style:e,styleSpec:d});case "canvas":return f.push(new La(c,null,"Please use runtime APIs to add canvas sources, rather than including them in stylesheets.",
"source.canvas")),f;default:return Ba({key:c+".type",value:b.type,valueSpec:{values:"vector raster raster-dem geojson video image".split(" ")},style:e,styleSpec:d})}}function Ra(a){var b=a.value,c=a.styleSpec,d=c.light;a=a.style;var e=[],g=ka(b);if(void 0===b)return e;if("object"!==g)return e.concat([new La("light",b,"object expected, "+g+" found")]);for(var f in b)e=(g=f.match(/^(.*)-transition$/))&&d[g[1]]&&d[g[1]].transition?e.concat(nb({key:f,value:b[f],valueSpec:c.transition,style:a,styleSpec:c})):
d[f]?e.concat(nb({key:f,value:b[f],valueSpec:d[f],style:a,styleSpec:c})):e.concat([new La(f,b[f],'unknown property "'+f+'"')]);return e}function Jb(a){var b=a.value;a=a.key;var c=ka(b);return"string"!==c?[new La(a,b,"string expected, "+c+" found")]:[]}function nb(a){var b=a.value,c=a.valueSpec,d=a.styleSpec;return c.function&&wa(M(b))?X(a):c.function&&Ga(w(b))?Pa(a):c.type&&Fh[c.type]?Fh[c.type](a):na(H({},a,{valueSpec:c.type?d[c.type]:c}))}function kc(a){var b=a.value,c=a.key;a=Jb(a);return a.length?
a:(-1===b.indexOf("{fontstack}")&&a.push(new La(c,b,'"glyphs" url must include a "{fontstack}" token')),-1===b.indexOf("{range}")&&a.push(new La(c,b,'"glyphs" url must include a "{range}" token')),a)}function kb(a,b){b=b||ra;var c=[];return c=c.concat(nb({key:"",value:a,valueSpec:b.$root,styleSpec:b,style:a,objectElementValidators:{glyphs:kc,"*":function(){return[]}}})),a.constants&&(c=c.concat(E({key:"constants",value:a.constants,style:a,styleSpec:b}))),Db(c)}function Db(a){return[].concat(a).sort(function(a,
b){return a.line-b.line})}function Kb(a){return function(){return Db(a.apply(this,arguments))}}function Oa(a,b){var c=!1;if(b&&b.length)for(var d=0;d<b.length;d+=1)a.fire(new ec(Error(b[d].message))),c=!0;return c}function Va(a,b,c){var d=this.cells=[];if(a instanceof ArrayBuffer){this.arrayBuffer=a;var e=new Int32Array(this.arrayBuffer);a=e[0];b=e[1];c=e[2];this.d=b+2*c;for(var g=0;g<this.d*this.d;g++){var f=e[Kf+g],h=e[Kf+g+1];d.push(f===h?null:e.subarray(f,h))}g=e[Kf+d.length+1];this.keys=e.subarray(e[Kf+
d.length],g);this.bboxes=e.subarray(g);this.insert=this._insertReadonly}else{this.d=b+2*c;for(e=0;e<this.d*this.d;e++)d.push([]);this.keys=[];this.bboxes=[]}this.n=b;this.extent=a;this.padding=c;this.scale=b/a;this.uid=0;b=c/b*a;this.min=-b;this.max=a+b}function Ha(a,b,c){void 0===c&&(c={});Object.defineProperty(b,"_classRegistryKey",{value:a,writeable:!1});Fg[a]={klass:b,omit:c.omit||[],shallow:c.shallow||[]}}function Xa(a,b){if(null==a||"boolean"==typeof a||"number"==typeof a||"string"==typeof a||
a instanceof Boolean||a instanceof Number||a instanceof String||a instanceof Date||a instanceof RegExp)return a;if(a instanceof ArrayBuffer)return b&&b.push(a),a;if(ArrayBuffer.isView(a))return b&&b.push(a.buffer),a;if(a instanceof Hh)return b&&b.push(a.data.buffer),a;if(Array.isArray(a)){for(var c=[],d=0;d<a.length;d+=1)c.push(Xa(a[d],b));return c}if("object"==typeof a){var e=a.constructor;c=e._classRegistryKey;if(!c)throw Error("can't serialize object of unregistered class");d={};if(e.serialize)d._serialized=
e.serialize(a,b);else{for(var g in a)!a.hasOwnProperty(g)||0<=Fg[c].omit.indexOf(g)||(e=a[g],d[g]=0<=Fg[c].shallow.indexOf(g)?e:Xa(e,b));a instanceof Error&&(d.message=a.message)}return{name:c,properties:d}}throw Error("can't serialize object of type "+typeof a);}function sc(a){if(null==a||"boolean"==typeof a||"number"==typeof a||"string"==typeof a||a instanceof Boolean||a instanceof Number||a instanceof String||a instanceof Date||a instanceof RegExp||a instanceof ArrayBuffer||ArrayBuffer.isView(a)||
a instanceof Hh)return a;if(Array.isArray(a))return a.map(function(a){return sc(a)});if("object"==typeof a){var b=a.name;a=a.properties;if(!b)throw Error("can't deserialize object of anonymous class");var c=Fg[b].klass;if(!c)throw Error("can't deserialize unregistered class "+b);if(c.deserialize)return c.deserialize(a._serialized);c=Object.create(c.prototype);for(var d=0,e=Object.keys(a);d<e.length;d+=1){var g=e[d];c[g]=0<=Fg[b].shallow.indexOf(g)?a[g]:sc(a[g])}return c}throw Error("can't deserialize object of type "+
typeof a);}function oc(a){for(var b=0;b<a.length;b+=1)if(Sb(a[b].charCodeAt(0)))return!0;return!1}function Sb(a){return 746===a||747===a||!(4352>a)&&(!!Qa["Bopomofo Extended"](a)||!!Qa.Bopomofo(a)||!(!Qa["CJK Compatibility Forms"](a)||65097<=a&&65103>=a)||!!Qa["CJK Compatibility Ideographs"](a)||!!Qa["CJK Compatibility"](a)||!!Qa["CJK Radicals Supplement"](a)||!!Qa["CJK Strokes"](a)||!(!Qa["CJK Symbols and Punctuation"](a)||12296<=a&&12305>=a||12308<=a&&12319>=a||12336===a)||!!Qa["CJK Unified Ideographs Extension A"](a)||
!!Qa["CJK Unified Ideographs"](a)||!!Qa["Enclosed CJK Letters and Months"](a)||!!Qa["Hangul Compatibility Jamo"](a)||!!Qa["Hangul Jamo Extended-A"](a)||!!Qa["Hangul Jamo Extended-B"](a)||!!Qa["Hangul Jamo"](a)||!!Qa["Hangul Syllables"](a)||!!Qa.Hiragana(a)||!!Qa["Ideographic Description Characters"](a)||!!Qa.Kanbun(a)||!!Qa["Kangxi Radicals"](a)||!!Qa["Katakana Phonetic Extensions"](a)||!(!Qa.Katakana(a)||12540===a)||!(!Qa["Halfwidth and Fullwidth Forms"](a)||65288===a||65289===a||65293===a||65306<=
a&&65310>=a||65339===a||65341===a||65343===a||65371<=a&&65503>=a||65507===a||65512<=a&&65519>=a)||!(!Qa["Small Form Variants"](a)||65112<=a&&65118>=a||65123<=a&&65126>=a)||!!Qa["Unified Canadian Aboriginal Syllabics"](a)||!!Qa["Unified Canadian Aboriginal Syllabics Extended"](a)||!!Qa["Vertical Forms"](a)||!!Qa["Yijing Hexagram Symbols"](a)||!!Qa["Yi Syllables"](a)||!!Qa["Yi Radicals"](a))}function Mb(a){var b;(b=Sb(a))||(b=!!(Qa["Latin-1 Supplement"](a)&&(167===a||169===a||174===a||177===a||188===
a||189===a||190===a||215===a||247===a)||Qa["General Punctuation"](a)&&(8214===a||8224===a||8225===a||8240===a||8241===a||8251===a||8252===a||8258===a||8263===a||8264===a||8265===a||8273===a)||Qa["Letterlike Symbols"](a)||Qa["Number Forms"](a)||Qa["Miscellaneous Technical"](a)&&(8960<=a&&8967>=a||8972<=a&&8991>=a||8996<=a&&9E3>=a||9003===a||9085<=a&&9114>=a||9150<=a&&9165>=a||9167===a||9169<=a&&9179>=a||9186<=a&&9215>=a)||Qa["Control Pictures"](a)&&9251!==a||Qa["Optical Character Recognition"](a)||
Qa["Enclosed Alphanumerics"](a)||Qa["Geometric Shapes"](a)||Qa["Miscellaneous Symbols"](a)&&!(9754<=a&&9759>=a)||Qa["Miscellaneous Symbols and Arrows"](a)&&(11026<=a&&11055>=a||11088<=a&&11097>=a||11192<=a&&11243>=a)||Qa["CJK Symbols and Punctuation"](a)||Qa.Katakana(a)||Qa["Private Use Area"](a)||Qa["CJK Compatibility Forms"](a)||Qa["Small Form Variants"](a)||Qa["Halfwidth and Fullwidth Forms"](a)||8734===a||8756===a||8757===a||9984<=a&&10087>=a||10102<=a&&10131>=a||65532===a||65533===a));return!b}
function vb(a,b){void 0===b&&(b=1);var c=0,d=0;return{members:a.map(function(a){var e,g=(e=a.type,sg[e].BYTES_PER_ELEMENT);e=c=Nb(c,Math.max(b,g));var f=a.components||1;return d=Math.max(d,g),c+=g*f,{name:a.name,type:a.type,components:f,offset:e}}),size:Nb(c,Math.max(d,b)),alignment:b}}function Nb(a,b){return Math.ceil(a/b)*b}function Qc(a){return[Ng(255*a.r,255*a.g),Ng(255*a.b,255*a.a)]}function Tb(a){var b=8192/a.extent;a=a.loadGeometry();for(var c=0;c<a.length;c++)for(var d=a[c],e=0;e<d.length;e++){var g=
d[e];g.x=Math.round(g.x*b);g.y=Math.round(g.y*b);(g.x<jh.min||g.x>jh.max||g.y<jh.min||g.y>jh.max)&&A("Geometry exceeds allowed extent, reduce your vector tile buffer size")}return a}function fd(a,b,c,d,e){a.emplaceBack(2*b+(d+1)/2,2*c+(e+1)/2)}function Rd(a,b,c){for(var d=0;d<a.length;d++){var e=a[d];if(Zc(e,b)||bf(b,e,c))return!0}return!1}function Eb(a,b){if(1===a.length&&1===a[0].length)return Td(b,a[0][0]);for(var c=0;c<b.length;c++)for(var d=b[c],e=0;e<d.length;e++)if(Td(a,d[e]))return!0;for(c=
0;c<a.length;c++){d=a[c];for(e=0;e<d.length;e++)if(Td(b,d[e]))return!0;for(e=0;e<b.length;e++)if(Rc(d,b[e]))return!0}return!1}function Hc(a,b,c){for(var d=0;d<b.length;d++)for(var e=b[d],g=0;g<a.length;g++){var f=a[g];if(3<=f.length)for(var h=0;h<e.length;h++)if(Zc(f,e[h]))return!0;a:{h=e;var k=c;if(1<f.length){if(Rc(f,h)){f=!0;break a}for(var n=0;n<h.length;n++)if(bf(h[n],f,k)){f=!0;break a}}for(n=0;n<f.length;n++)if(bf(f[n],h,k)){f=!0;break a}f=!1}if(f)return!0}return!1}function Rc(a,b){if(0===
a.length||0===b.length)return!1;for(var c=0;c<a.length-1;c++)for(var d=a[c],e=a[c+1],g=0;g<b.length-1;g++){var f=d,h=e,k=b[g],n=b[g+1];if(C(f,k,n)!==C(h,k,n)&&C(f,h,k)!==C(f,h,n))return!0}return!1}function bf(a,b,c){c*=c;if(1===b.length)return a.distSqr(b[0])<c;for(var d=1;d<b.length;d++)if(Sd(a,b[d-1],b[d])<c)return!0;return!1}function Sd(a,b,c){var d=b.distSqr(c);if(0===d)return a.distSqr(b);d=((a.x-b.x)*(c.x-b.x)+(a.y-b.y)*(c.y-b.y))/d;return 0>d?a.distSqr(b):1<d?a.distSqr(c):a.distSqr(c.sub(b)._mult(d)._add(b))}
function Td(a,b){for(var c,d,e,g=!1,f=0;f<a.length;f++){var h=0;for(e=(c=a[f]).length-1;h<c.length;e=h++)d=c[h],e=c[e],d.y>b.y!=e.y>b.y&&b.x<(e.x-d.x)*(b.y-d.y)/(e.y-d.y)+d.x&&(g=!g)}return g}function Zc(a,b){for(var c=!1,d=0,e=a.length-1;d<a.length;e=d++){var g=a[d];e=a[e];g.y>b.y!=e.y>b.y&&b.x<(e.x-g.x)*(b.y-g.y)/(e.y-g.y)+g.x&&(c=!c)}return c}function Cc(a,b,c){var d=b.paint.get(a).value;return"constant"===d.kind?d.value:c.programConfigurations.get(b.id).binders[a].statistics.max}function $c(a){return Math.sqrt(a[0]*
a[0]+a[1]*a[1])}function ld(a,b,c,d,e){if(!b[0]&&!b[1])return a;b=Wb.convert(b);"viewport"===c&&b._rotate(-d);c=[];for(d=0;d<a.length;d++){for(var g=a[d],f=[],h=0;h<g.length;h++)f.push(g[h].sub(b._mult(e)));c.push(f)}return c}function md(a,b,c){a=Ze.transformMat4([],[a.x,a.y,0,1],b);return new Wb((a[0]/a[3]+1)*c.width*.5,(a[1]/a[3]+1)*c.height*.5)}function me(a,b,c,d){var e=b.width;b=b.height;if(d){if(d.length!==e*b*c)throw new RangeError("mismatched image size");}else d=new Uint8Array(e*b*c);return a.width=
e,a.height=b,a.data=d,a}function Vd(a,b,c){var d=b.width;b=b.height;if(d!==a.width||b!==a.height){var e=me({},{width:d,height:b},c);nd(a,e,{x:0,y:0},{x:0,y:0},{width:Math.min(a.width,d),height:Math.min(a.height,b)},c);a.width=d;a.height=b;a.data=e.data}}function nd(a,b,c,d,e,g){if(0===e.width||0===e.height)return b;if(e.width>a.width||e.height>a.height||c.x>a.width-e.width||c.y>a.height-e.height)throw new RangeError("out of range source coordinates for image copy");if(e.width>b.width||e.height>b.height||
d.x>b.width-e.width||d.y>b.height-e.height)throw new RangeError("out of range destination coordinates for image copy");for(var f=a.data,h=b.data,k=0;k<e.height;k++)for(var n=((c.y+k)*a.width+c.x)*g,t=((d.y+k)*b.width+d.x)*g,m=0;m<e.width*g;m++)h[t+m]=f[n+m];return b}function tc(a,b){for(var c=new Uint8Array(1024),d={},e=0,g=0;256>e;e++,g+=4){d[b]=e/255;var f=a.evaluate(d);c[g+0]=Math.floor(255*f.r/f.a);c[g+1]=Math.floor(255*f.g/f.a);c[g+2]=Math.floor(255*f.b/f.a);c[g+3]=Math.floor(255*f.a)}return new we({width:256,
height:1},c)}function Ub(a,b,c){c=c||2;var d,e,g,f=b&&b.length,h=f?b[0]*c:a.length,k=xd(a,0,h,c,!0),n=[];if(!k)return n;if(f){f=c;var t,m=[];var v=0;for(t=b.length;v<t;v++){var r=b[v]*f;var u=v<t-1?b[v+1]*f:a.length;(d=xd(a,r,u,f,!1))===d.next&&(d.steiner=!0);m.push(Xd(d))}m.sort(xe);for(v=0;v<m.length;v++)Wd(m[v],k),k=ac(k,k.next)}if(a.length>80*c){var l=b=a[0];var p=d=a[1];for(f=c;f<h;f+=c)(e=a[f])<l&&(l=e),(g=a[f+1])<p&&(p=g),e>b&&(b=e),g>d&&(d=g);var y=0!==(y=Math.max(b-l,d-p))?1/y:0}return yd(k,
n,c,l,p,y),n}function xd(a,b,c,d,e){if(e===0<Me(a,b,c,d))for(e=b;e<c;e+=d)var g=Tc(e,a[e],a[e+1],g);else for(e=c-d;e>=b;e-=d)g=Tc(e,a[e],a[e+1],g);return g&&dc(g,g.next)&&(Vb(g),g=g.next),g}function ac(a,b){if(!a)return a;b||(b=a);var c=a;do if(a=!1,c.steiner||!dc(c,c.next)&&0!==lc(c.prev,c,c.next))c=c.next;else{if(Vb(c),(c=b=c.prev)===c.next)break;a=!0}while(a||c!==b);return b}function yd(a,b,c,d,e,g,f){if(a){if(!f&&g){var h=a,k=h;do null===k.z&&(k.z=ne(k.x,k.y,d,e,g)),k.prevZ=k.prev,k=k.nextZ=k.next;
while(k!==h);k.prevZ.nextZ=null;k.prevZ=null;h=k;var n,t,m,v,r=1;do{k=h;var u=h=null;for(m=0;k;){m++;var l=k;for(n=v=0;n<r&&(v++,l=l.nextZ);n++);for(n=r;0<v||0<n&&l;)0!==v&&(0===n||!l||k.z<=l.z)?(t=k,k=k.nextZ,v--):(t=l,l=l.nextZ,n--),u?u.nextZ=t:h=t,t.prevZ=u,u=t;k=l}u.nextZ=null;r*=2}while(1<m)}for(k=a;a.prev!==a.next;){t=a.prev;h=a.next;if(g)a:{l=a;r=d;n=e;var p=g;u=l.prev;m=l.next;if(0<=lc(u,l,m))l=!1;else{var y=u.x>l.x?u.x>m.x?u.x:m.x:l.x>m.x?l.x:m.x,q=u.y>l.y?u.y>m.y?u.y:m.y:l.y>m.y?l.y:m.y;
v=ne(u.x<l.x?u.x<m.x?u.x:m.x:l.x<m.x?l.x:m.x,u.y<l.y?u.y<m.y?u.y:m.y:l.y<m.y?l.y:m.y,r,n,p);r=ne(y,q,r,n,p);n=l.prevZ;for(p=l.nextZ;n&&n.z>=v&&p&&p.z<=r;){if(n!==l.prev&&n!==l.next&&sb(u.x,u.y,l.x,l.y,m.x,m.y,n.x,n.y)&&0<=lc(n.prev,n,n.next)||(n=n.prevZ,p!==l.prev&&p!==l.next&&sb(u.x,u.y,l.x,l.y,m.x,m.y,p.x,p.y)&&0<=lc(p.prev,p,p.next))){l=!1;break a}p=p.nextZ}for(;n&&n.z>=v;){if(n!==l.prev&&n!==l.next&&sb(u.x,u.y,l.x,l.y,m.x,m.y,n.x,n.y)&&0<=lc(n.prev,n,n.next)){l=!1;break a}n=n.prevZ}for(;p&&p.z<=
r;){if(p!==l.prev&&p!==l.next&&sb(u.x,u.y,l.x,l.y,m.x,m.y,p.x,p.y)&&0<=lc(p.prev,p,p.next)){l=!1;break a}p=p.nextZ}l=!0}}else a:if(l=a,u=l.prev,m=l.next,0<=lc(u,l,m))l=!1;else{for(v=l.next.next;v!==l.prev;){if(sb(u.x,u.y,l.x,l.y,m.x,m.y,v.x,v.y)&&0<=lc(v.prev,v,v.next)){l=!1;break a}v=v.next}l=!0}if(l)b.push(t.i/c),b.push(a.i/c),b.push(h.i/c),Vb(a),k=a=h.next;else if((a=h)===k){if(f)if(1===f){f=yd;t=b;h=c;k=a;do l=k.prev,u=k.next.next,!dc(l,u)&&zb(l,k,k.next,u)&&ab(l,u)&&ab(u,l)&&(t.push(l.i/h),t.push(k.i/
h),t.push(u.i/h),Vb(k),Vb(k.next),k=a=u),k=k.next;while(k!==a);f(k,b,c,d,e,g,2)}else{if(2===f)a:{f=a;do{for(t=f.next.next;t!==f.prev;){if(f.i!==t.i&&Lb(f,t)){a=Ab(f,t);f=ac(f,f.next);a=ac(a,a.next);yd(f,b,c,d,e,g);yd(a,b,c,d,e,g);break a}t=t.next}f=f.next}while(f!==a)}}else yd(ac(a),b,c,d,e,g,1);break}}}}function xe(a,b){return a.x-b.x}function Wd(a,b){if(b=function(a,b){var c=b,d=a.x,e=a.y,g=-1/0;do{if(e<=c.y&&e>=c.next.y&&c.next.y!==c.y){var f=c.x+(e-c.y)*(c.next.x-c.x)/(c.next.y-c.y);if(f<=d&&
f>g){if(g=f,f===d){if(e===c.y)return c;if(e===c.next.y)return c.next}var h=c.x<c.next.x?c:c.next}}c=c.next}while(c!==b);if(!h)return null;if(d===g)return h.prev;var k;b=h;f=h.x;var n=h.y,t=1/0;for(c=h.next;c!==b;)d>=c.x&&c.x>=f&&d!==c.x&&sb(e<n?d:g,e,f,n,e<n?g:d,e,c.x,c.y)&&((k=Math.abs(e-c.y)/(d-c.x))<t||k===t&&c.x>h.x)&&ab(c,a)&&(h=c,t=k),c=c.next;return h}(a,b))a=Ab(b,a),ac(a,a.next)}function ne(a,b,c,d,e){return 1431655765&((a=858993459&((a=252645135&((a=16711935&((a=32767*(a-c)*e)|a<<8))|a<<
4))|a<<2))|a<<1)|(1431655765&((b=858993459&((b=252645135&((b=16711935&((b=32767*(b-d)*e)|b<<8))|b<<4))|b<<2))|b<<1))<<1}function Xd(a){var b=a,c=a;do b.x<c.x&&(c=b),b=b.next;while(b!==a);return c}function sb(a,b,c,d,e,g,f,h){return 0<=(e-f)*(b-h)-(a-f)*(g-h)&&0<=(a-f)*(d-h)-(c-f)*(b-h)&&0<=(c-f)*(g-h)-(e-f)*(d-h)}function Lb(a,b){return a.next.i!==b.i&&a.prev.i!==b.i&&!function(a,b){var c=a;do{if(c.i!==a.i&&c.next.i!==a.i&&c.i!==b.i&&c.next.i!==b.i&&zb(c,c.next,a,b))return!0;c=c.next}while(c!==a);
return!1}(a,b)&&ab(a,b)&&ab(b,a)&&function(a,b){var c=a,d=!1,e=(a.x+b.x)/2;b=(a.y+b.y)/2;do c.y>b!=c.next.y>b&&c.next.y!==c.y&&e<(c.next.x-c.x)*(b-c.y)/(c.next.y-c.y)+c.x&&(d=!d),c=c.next;while(c!==a);return d}(a,b)}function lc(a,b,c){return(b.y-a.y)*(c.x-b.x)-(b.x-a.x)*(c.y-b.y)}function dc(a,b){return a.x===b.x&&a.y===b.y}function zb(a,b,c,d){return!!(dc(a,b)&&dc(c,d)||dc(a,d)&&dc(c,b))||0<lc(a,b,c)!=0<lc(a,b,d)&&0<lc(c,d,a)!=0<lc(c,d,b)}function ab(a,b){return 0>lc(a.prev,a,a.next)?0<=lc(a,b,a.next)&&
0<=lc(a,a.prev,b):0>lc(a,b,a.prev)||0>lc(a,a.next,b)}function Ab(a,b){var c=new Sa(a.i,a.x,a.y),d=new Sa(b.i,b.x,b.y),e=a.next,g=b.prev;return a.next=b,b.prev=a,c.next=e,e.prev=c,d.next=c,c.prev=d,g.next=d,d.prev=g,d}function Tc(a,b,c,d){a=new Sa(a,b,c);return d?(a.next=d.next,a.prev=d,d.next.prev=a,d.next=a):(a.prev=a,a.next=a),a}function Vb(a){a.next.prev=a.prev;a.prev.next=a.next;a.prevZ&&(a.prevZ.nextZ=a.nextZ);a.nextZ&&(a.nextZ.prevZ=a.prevZ)}function Sa(a,b,c){this.i=a;this.x=b;this.y=c;this.nextZ=
this.prevZ=this.z=this.next=this.prev=null;this.steiner=!1}function Me(a,b,c,d){for(var e=0,g=c-d;b<c;b+=d)e+=(a[g]-a[b])*(a[b+1]+a[g+1]),g=b;return e}function yf(a,b,c,d,e){!function df(a,b,c,d,e){for(;d>c;){if(600<d-c){var g=d-c+1,f=b-c+1,h=Math.log(g),k=.5*Math.exp(2*h/3);h=.5*Math.sqrt(h*k*(g-k)/g)*(0>f-g/2?-1:1);df(a,b,Math.max(c,Math.floor(b-f*k/g+h)),Math.min(d,Math.floor(b+(g-f)*k/g+h)),e)}g=a[b];f=c;k=d;Ad(a,c,b);for(0<e(a[d],g)&&Ad(a,c,d);f<k;){Ad(a,f,k);f++;for(k--;0>e(a[f],g);)f++;for(;0<
e(a[k],g);)k--}0===e(a[c],g)?Ad(a,c,k):Ad(a,++k,d);k<=b&&(c=k+1);b<=k&&(d=k-1)}}(a,b,c||0,d||a.length-1,e||yb)}function Ad(a,b,c){var d=a[b];a[b]=a[c];a[c]=d}function yb(a,b){return a<b?-1:a>b?1:0}function Ma(a,b){var c=a.length;if(1>=c)return[a];for(var d,e,g=[],f=0;f<c;f++){var h=a[f];for(var k=0,n=0,t=h.length,m=t-1,v,r=void 0;n<t;m=n++)v=h[n],k+=((r=h[m]).x-v.x)*(v.y+r.y);h=k;0!==h&&(a[f].area=Math.abs(h),void 0===e&&(e=0>h),e===0>h?(d&&g.push(d),d=[a[f]]):d.push(a[f]))}if(d&&g.push(d),1<b)for(a=
0;a<g.length;a++)g[a].length<=b||(kh(g[a],b,1,g[a].length-1,mc),g[a]=g[a].slice(0,b));return g}function mc(a,b){return b.area-a.area}function Fb(a,b,c,d,e,g,f,h){a.emplaceBack(b,c,2*Math.floor(d*Kg)+f,e*Kg*2,g*Kg*2,Math.round(h))}function od(a){return a.every(function(a){return 0>a.x})||a.every(function(a){return 8192<a.x})||a.every(function(a){return 0>a.y})||a.every(function(a){return 8192<a.y})}function pc(a,b,c,d,e){this.properties={};this.extent=c;this.type=0;this._pbf=a;this._geometry=-1;this._keys=
d;this._values=e;a.readFields(Wf,this,b)}function Wf(a,b,c){if(1==a)b.id=c.readVarint();else if(2==a)for(a=c.readVarint()+c.pos;c.pos<a;){var d=b._keys[c.readVarint()],e=b._values[c.readVarint()];b.properties[d]=e}else 3==a?b.type=c.readVarint():4==a&&(b._geometry=c.pos)}function wb(a,b){this.version=1;this.name=null;this.extent=4096;this.length=0;this._pbf=a;this._keys=[];this._values=[];this._features=[];a.readFields(bc,this,b);this.length=this._features.length}function bc(a,b,c){15===a?b.version=
c.readVarint():1===a?b.name=c.readString():5===a?b.extent=c.readVarint():2===a?b._features.push(c.pos):3===a?b._keys.push(c.readString()):4===a&&b._values.push(function(a){for(var b=null,c=a.readVarint()+a.pos;a.pos<c;)b=a.readVarint()>>3,b=1===b?a.readString():2===b?a.readFloat():3===b?a.readDouble():4===b?a.readVarint64():5===b?a.readVarint():6===b?a.readSVarint():7===b?a.readBoolean():null;return b}(c))}function Zd(a,b,c){3===a&&(a=new gi(c,c.readVarint()+c.pos),a.length&&(b[a.name]=a))}function Ne(a,
b,c,d,e,g,f){a.emplaceBack(b.x,b.y,d?1:0,e?1:-1,Math.round(63*c.x)+128,Math.round(63*c.y)+128,1+(0===g?0:0>g?-1:1)|(.5*f&63)<<2,.5*f>>6)}function Uc(a,b,c){b=b.layout.get("text-transform").evaluate(c);return"uppercase"===b?a=a.toLocaleUpperCase():"lowercase"===b&&(a=a.toLocaleLowerCase()),Hg.applyArabicShaping&&(a=Hg.applyArabicShaping(a)),a}function pd(a,b){var c=b.expression;if("constant"===c.kind)return{functionType:"constant",layoutSize:c.evaluate(new Bc(a+1))};if("source"===c.kind)return{functionType:"source"};
for(var d=c.zoomStops,e=0;e<d.length&&d[e]<=a;)e++;for(var g=e=Math.max(0,e-1);g<d.length&&d[g]<a+1;)g++;g=Math.min(d.length-1,g);d={min:d[e],max:d[g]};return"composite"===c.kind?{functionType:"composite",zoomRange:d,propertyValue:b.value}:{functionType:"camera",layoutSize:c.evaluate(new Bc(a+1)),zoomRange:d,sizeRange:{min:c.evaluate(new Bc(d.min)),max:c.evaluate(new Bc(d.max))},propertyValue:b.value}}function Bd(a,b,c,d,e,g,f,h){a.emplaceBack(b,c,Math.round(32*d),Math.round(32*e),g,f,h?h[0]:0,h?
h[1]:0)}function uc(a,b,c){a.emplaceBack(b.x,b.y,c);a.emplaceBack(b.x,b.y,c);a.emplaceBack(b.x,b.y,c);a.emplaceBack(b.x,b.y,c)}function gb(a){this.buf=ArrayBuffer.isView&&ArrayBuffer.isView(a)?a:new Uint8Array(a||0);this.type=this.pos=0;this.length=this.buf.length}function Gb(a){return a.type===gb.Bytes?a.readVarint()+a.pos:a.pos+1}function Ob(a,b,c){b=16383>=b?1:2097151>=b?2:268435455>=b?3:Math.ceil(Math.log(b)/(7*Math.LN2));c.realloc(b);for(var d=c.pos-1;d>=a;d--)c.buf[d+b]=c.buf[d]}function ad(a,
b){for(var c=0;c<a.length;c++)b.writeVarint(a[c])}function $d(a,b){for(var c=0;c<a.length;c++)b.writeSVarint(a[c])}function Cd(a,b){for(var c=0;c<a.length;c++)b.writeFloat(a[c])}function zf(a,b){for(var c=0;c<a.length;c++)b.writeDouble(a[c])}function ae(a,b){for(var c=0;c<a.length;c++)b.writeBoolean(a[c])}function pe(a,b){for(var c=0;c<a.length;c++)b.writeFixed32(a[c])}function gd(a,b){for(var c=0;c<a.length;c++)b.writeSFixed32(a[c])}function wc(a,b){for(var c=0;c<a.length;c++)b.writeFixed64(a[c])}
function Nd(a,b){for(var c=0;c<a.length;c++)b.writeSFixed64(a[c])}function Dd(a,b){return(a[b]|a[b+1]<<8|a[b+2]<<16)+16777216*a[b+3]}function bd(a,b,c){a[c]=b;a[c+1]=b>>>8;a[c+2]=b>>>16;a[c+3]=b>>>24}function Ed(a,b){return(a[b]|a[b+1]<<8|a[b+2]<<16)+(a[b+3]<<24)}function Od(a,b,c){1===a&&c.readMessage(Fd,b)}function Fd(a,b,c){if(3===a){a=c.readMessage(qe,{});c=a.width;var d=a.height,e=a.left,g=a.top,f=a.advance;b.push({id:a.id,bitmap:new $e({width:c+6,height:d+6},a.bitmap),metrics:{width:c,height:d,
left:e,top:g,advance:f}})}}function qe(a,b,c){1===a?b.id=c.readVarint():2===a?b.bitmap=c.readBytes():3===a?b.width=c.readVarint():4===a?b.height=c.readVarint():5===a?b.left=c.readSVarint():6===a?b.top=c.readSVarint():7===a&&(b.advance=c.readVarint())}function ze(a,b,c,d){0>(a*=2)&&(a=-1*a-1);var e=1<<b;return 32*(e*e*a+e*d+c)+b}function re(a,b){return b-a}function be(a,b,c,d){var e=Math.pow(a-b,2);return d?a<b?e/2:2*e:e+Math.abs(c)*c}function ce(a,b){var c=0;return 10===a&&(c-=1E4),40!==a&&65288!==
a||(c+=50),41!==b&&65289!==b||(c+=50),c}function Pe(a,b,c,d,e,g){for(var f=null,h=be(b,c,e,g),k=0;k<d.length;k+=1){var n=d[k],t=be(b-n.x,c,e,g)+n.badness;t<=h&&(f=n,h=t)}return{index:a,x:b,priorBreak:f,badness:h}}function Ef(a,b,c,d){if(!c||!a)return[];var e,g=[];c=function(a,b,c,d){for(var e=0,g=0;g<a.length;g++){var f=d[a.charCodeAt(g)];f&&(e+=f.metrics.advance+b)}return e/Math.max(1,Math.ceil(e/c))}(a,b,c,d);for(var f=0,h=0;h<a.length;h++){var k=a.charCodeAt(h),n=d[k];n&&!Jf[k]&&(f+=n.metrics.advance+
b);h<a.length-1&&(Gh[k]||!(11904>(e=k))&&(Qa["Bopomofo Extended"](e)||Qa.Bopomofo(e)||Qa["CJK Compatibility Forms"](e)||Qa["CJK Compatibility Ideographs"](e)||Qa["CJK Compatibility"](e)||Qa["CJK Radicals Supplement"](e)||Qa["CJK Strokes"](e)||Qa["CJK Symbols and Punctuation"](e)||Qa["CJK Unified Ideographs Extension A"](e)||Qa["CJK Unified Ideographs"](e)||Qa["Enclosed CJK Letters and Months"](e)||Qa["Halfwidth and Fullwidth Forms"](e)||Qa.Hiragana(e)||Qa["Ideographic Description Characters"](e)||
Qa["Kangxi Radicals"](e)||Qa["Katakana Phonetic Extensions"](e)||Qa.Katakana(e)||Qa["Vertical Forms"](e)||Qa["Yi Radicals"](e)||Qa["Yi Syllables"](e)))&&g.push(Pe(h+1,f,c,g,ce(k,a.charCodeAt(h+1)),!1))}return function ef(a){return a?ef(a.priorBreak).concat(a.index):[]}(Pe(a.length,f,c,g,0,!0))}function Vc(a){var b=.5,c=.5;switch(a){case "right":case "top-right":case "bottom-right":b=1;break;case "left":case "top-left":case "bottom-left":b=0}switch(a){case "bottom":case "bottom-right":case "bottom-left":c=
1;break;case "top":case "top-right":case "top-left":c=0}return{horizontalAlign:b,verticalAlign:c}}var zc="undefined"!=typeof window?window:"undefined"!=typeof a?a:"undefined"!=typeof self?self:{},Dc=h;h.prototype.sampleCurveX=function(a){return((this.ax*a+this.bx)*a+this.cx)*a};h.prototype.sampleCurveY=function(a){return((this.ay*a+this.by)*a+this.cy)*a};h.prototype.sampleCurveDerivativeX=function(a){return(3*this.ax*a+2*this.bx)*a+this.cx};h.prototype.solveCurveX=function(a,b){var c,d;void 0===b&&
(b=1E-6);var e=a;for(c=0;8>c;c++){if(d=this.sampleCurveX(e)-a,Math.abs(d)<b)return e;var g=this.sampleCurveDerivativeX(e);if(1E-6>Math.abs(g))break;e-=d/g}if((e=a)<(c=0))return c;if(e>(g=1))return g;for(;c<g&&!(d=this.sampleCurveX(e),Math.abs(d-a)<b);)a>d?c=e:g=e,e=.5*(g-c)+c;return e};h.prototype.solve=function(a,b){return this.sampleCurveY(this.solveCurveX(a,b))};var Zb=function(a,b,c){this.column=a;this.row=b;this.zoom=c};Zb.prototype.clone=function(){return new Zb(this.column,this.row,this.zoom)};
Zb.prototype.zoomTo=function(a){return this.clone()._zoomTo(a)};Zb.prototype.sub=function(a){return this.clone()._sub(a)};Zb.prototype._zoomTo=function(a){var b=Math.pow(2,a-this.zoom);return this.column*=b,this.row*=b,this.zoom=a,this};Zb.prototype._sub=function(a){return a=a.zoomTo(this.zoom),this.column-=a.column,this.row-=a.row,this};var Wb=d;d.prototype={clone:function(){return new d(this.x,this.y)},add:function(a){return this.clone()._add(a)},sub:function(a){return this.clone()._sub(a)},multByPoint:function(a){return this.clone()._multByPoint(a)},
divByPoint:function(a){return this.clone()._divByPoint(a)},mult:function(a){return this.clone()._mult(a)},div:function(a){return this.clone()._div(a)},rotate:function(a){return this.clone()._rotate(a)},rotateAround:function(a,b){return this.clone()._rotateAround(a,b)},matMult:function(a){return this.clone()._matMult(a)},unit:function(){return this.clone()._unit()},perp:function(){return this.clone()._perp()},round:function(){return this.clone()._round()},mag:function(){return Math.sqrt(this.x*this.x+
this.y*this.y)},equals:function(a){return this.x===a.x&&this.y===a.y},dist:function(a){return Math.sqrt(this.distSqr(a))},distSqr:function(a){var b=a.x-this.x;a=a.y-this.y;return b*b+a*a},angle:function(){return Math.atan2(this.y,this.x)},angleTo:function(a){return Math.atan2(this.y-a.y,this.x-a.x)},angleWith:function(a){return this.angleWithSep(a.x,a.y)},angleWithSep:function(a,b){return Math.atan2(this.x*b-this.y*a,this.x*a+this.y*b)},_matMult:function(a){var b=a[2]*this.x+a[3]*this.y;return this.x=
a[0]*this.x+a[1]*this.y,this.y=b,this},_add:function(a){return this.x+=a.x,this.y+=a.y,this},_sub:function(a){return this.x-=a.x,this.y-=a.y,this},_mult:function(a){return this.x*=a,this.y*=a,this},_div:function(a){return this.x/=a,this.y/=a,this},_multByPoint:function(a){return this.x*=a.x,this.y*=a.y,this},_divByPoint:function(a){return this.x/=a.x,this.y/=a.y,this},_unit:function(){return this._div(this.mag()),this},_perp:function(){var a=this.y;return this.y=this.x,this.x=-a,this},_rotate:function(a){var b=
Math.cos(a);a=Math.sin(a);var c=a*this.x+b*this.y;return this.x=b*this.x-a*this.y,this.y=c,this},_rotateAround:function(a,b){var c=Math.cos(a);a=Math.sin(a);var d=b.y+a*(this.x-b.x)+c*(this.y-b.y);return this.x=b.x+c*(this.x-b.x)-a*(this.y-b.y),this.y=d,this},_round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this}};d.convert=function(a){return a instanceof d?a:Array.isArray(a)?new d(a[0],a[1]):a};var Qe=g(.25,.1,.25,1),Pd=1,Gd={},jf={Unknown:"Unknown",Style:"Style",Source:"Source",
Tile:"Tile",Glyphs:"Glyphs",SpriteImage:"SpriteImage",SpriteJSON:"SpriteJSON",Image:"Image"};"function"==typeof Object.freeze&&Object.freeze(jf);var Be=function(a){function b(b,c,d){a.call(this,b);this.status=c;this.url=d;this.name=this.constructor.name;this.message=b}return a&&(b.__proto__=a),b.prototype=Object.create(a&&a.prototype),b.prototype.constructor=b,b.prototype.toString=function(){return this.name+": "+this.message+" ("+this.status+"): "+this.url},b}(Error),Jc=function(a,b){var c=P(a);
return c.responseType="arraybuffer",c.onerror=function(){b(Error(c.statusText))},c.onload=function(){var d=c.response;if(0===d.byteLength&&200===c.status)return b(Error("http status 200 returned without content."));200<=c.status&&300>c.status&&c.response?b(null,{data:d,cacheControl:c.getResponseHeader("Cache-Control"),expires:c.getResponseHeader("Expires")}):b(new Be(c.statusText,c.status,a.url))},c.send(),c},de=function(a,b){void 0===b&&(b={});k(this,b);this.type=a},ec=function(a){function b(b,c){void 0===
c&&(c={});a.call(this,"error",k({error:b},c))}return a&&(b.__proto__=a),b.prototype=Object.create(a&&a.prototype),b.prototype.constructor=b,b}(de),Kc=function(){};Kc.prototype.on=function(a,b){var c=this._listeners=this._listeners||{};c[a]=c[a]||[];c[a].push(b);return this};Kc.prototype.off=function(a,b){return J(a,b,this._listeners),J(a,b,this._oneTimeListeners),this};Kc.prototype.once=function(a,b){var c=this._oneTimeListeners=this._oneTimeListeners||{};c[a]=c[a]||[];c[a].push(b);return this};Kc.prototype.fire=
function(a,b){"string"==typeof a&&(a=new de(a,b||{}));b=a.type;if(this.listens(b)){a.target=this;for(var c=0,d=this._listeners&&this._listeners[b]?this._listeners[b].slice():[];c<d.length;c+=1)d[c].call(this,a);c=0;for(d=this._oneTimeListeners&&this._oneTimeListeners[b]?this._oneTimeListeners[b].slice():[];c<d.length;c+=1){var e=d[c];J(b,e,this._oneTimeListeners);e.call(this,a)}(b=this._eventedParent)&&(k(a,"function"==typeof this._eventedParentData?this._eventedParentData():this._eventedParentData),
b.fire(a))}else m(b,"error")?console.error(a&&a.error||a||"Empty error event"):m(b,"warning")&&console.warn(a&&a.warning||a||"Empty warning event");return this};Kc.prototype.listens=function(a){return this._listeners&&this._listeners[a]&&0<this._listeners[a].length||this._oneTimeListeners&&this._oneTimeListeners[a]&&0<this._oneTimeListeners[a].length||this._eventedParent&&this._eventedParent.listens(a)};Kc.prototype.setEventedParent=function(a,b){return this._eventedParent=a,this._eventedParentData=
b,this};var ra={$version:8,$root:{version:{required:!0,type:"enum",values:[8]},name:{type:"string"},metadata:{type:"*"},center:{type:"array",value:"number"},zoom:{type:"number"},bearing:{type:"number",default:0,period:360,units:"degrees"},pitch:{type:"number",default:0,units:"degrees"},light:{type:"light"},sources:{required:!0,type:"sources"},sprite:{type:"string"},glyphs:{type:"string"},transition:{type:"transition"},layers:{required:!0,type:"array",value:"layer"}},sources:{"*":{type:"source"}},
source:"source_vector source_raster source_raster_dem source_geojson source_video source_image".split(" "),source_vector:{type:{required:!0,type:"enum",values:{vector:{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.0511,180,85.0511]},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},attribution:{type:"string"},"*":{type:"*"}},source_raster:{type:{required:!0,type:"enum",values:{raster:{}}},url:{type:"string"},
tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.0511,180,85.0511]},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},tileSize:{type:"number",default:512,units:"pixels"},scheme:{type:"enum",values:{xyz:{},tms:{}},default:"xyz"},attribution:{type:"string"},"*":{type:"*"}},source_raster_dem:{type:{required:!0,type:"enum",values:{"raster-dem":{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",
length:4,default:[-180,-85.0511,180,85.0511]},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},tileSize:{type:"number",default:512,units:"pixels"},attribution:{type:"string"},encoding:{type:"enum",values:{terrarium:{},mapbox:{}},default:"mapbox"},"*":{type:"*"}},source_geojson:{type:{required:!0,type:"enum",values:{geojson:{}}},data:{type:"*"},maxzoom:{type:"number",default:18},buffer:{type:"number",default:128,maximum:512,minimum:0},tolerance:{type:"number",default:.375},cluster:{type:"boolean",
default:!1},clusterRadius:{type:"number",default:50,minimum:0},clusterMaxZoom:{type:"number"},lineMetrics:{type:"boolean",default:!1}},source_video:{type:{required:!0,type:"enum",values:{video:{}}},urls:{required:!0,type:"array",value:"string"},coordinates:{required:!0,type:"array",length:4,value:{type:"array",length:2,value:"number"}}},source_image:{type:{required:!0,type:"enum",values:{image:{}}},url:{required:!0,type:"string"},coordinates:{required:!0,type:"array",length:4,value:{type:"array",
length:2,value:"number"}}},layer:{id:{type:"string",required:!0},type:{type:"enum",values:{fill:{},line:{},symbol:{},circle:{},heatmap:{},"fill-extrusion":{},raster:{},hillshade:{},background:{}},required:!0},metadata:{type:"*"},source:{type:"string"},"source-layer":{type:"string"},minzoom:{type:"number",minimum:0,maximum:24},maxzoom:{type:"number",minimum:0,maximum:24},filter:{type:"filter"},layout:{type:"layout"},paint:{type:"paint"}},layout:"layout_fill layout_line layout_circle layout_heatmap layout_fill-extrusion layout_symbol layout_raster layout_hillshade layout_background".split(" "),
layout_background:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible"}},layout_fill:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible"}},layout_circle:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible"}},layout_heatmap:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible"}},layout_line:{"line-cap":{type:"enum",function:"piecewise-constant","zoom-function":!0,values:{butt:{},round:{},square:{}},default:"butt"},"line-join":{type:"enum",
function:"piecewise-constant","zoom-function":!0,"property-function":!0,values:{bevel:{},round:{},miter:{}},default:"miter"},"line-miter-limit":{type:"number",default:2,function:"interpolated","zoom-function":!0,requires:[{"line-join":"miter"}]},"line-round-limit":{type:"number",default:1.05,function:"interpolated","zoom-function":!0,requires:[{"line-join":"round"}]},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible"}},layout_symbol:{"symbol-placement":{type:"enum",function:"piecewise-constant",
"zoom-function":!0,values:{point:{},line:{}},default:"point"},"symbol-spacing":{type:"number",default:250,minimum:1,function:"interpolated","zoom-function":!0,units:"pixels",requires:[{"symbol-placement":"line"}]},"symbol-avoid-edges":{type:"boolean",function:"piecewise-constant","zoom-function":!0,default:!1},"icon-allow-overlap":{type:"boolean",function:"piecewise-constant","zoom-function":!0,default:!1,requires:["icon-image"]},"icon-ignore-placement":{type:"boolean",function:"piecewise-constant",
"zoom-function":!0,default:!1,requires:["icon-image"]},"icon-optional":{type:"boolean",function:"piecewise-constant","zoom-function":!0,default:!1,requires:["icon-image","text-field"]},"icon-rotation-alignment":{type:"enum",function:"piecewise-constant","zoom-function":!0,values:{map:{},viewport:{},auto:{}},default:"auto",requires:["icon-image"]},"icon-size":{type:"number",default:1,minimum:0,function:"interpolated","zoom-function":!0,"property-function":!0,units:"factor of the original icon size",
requires:["icon-image"]},"icon-text-fit":{type:"enum",function:"piecewise-constant","zoom-function":!0,values:{none:{},width:{},height:{},both:{}},default:"none",requires:["icon-image","text-field"]},"icon-text-fit-padding":{type:"array",value:"number",length:4,default:[0,0,0,0],units:"pixels",function:"interpolated","zoom-function":!0,requires:["icon-image","text-field",{"icon-text-fit":["both","width","height"]}]},"icon-image":{type:"string",function:"piecewise-constant","zoom-function":!0,"property-function":!0,
tokens:!0},"icon-rotate":{type:"number",default:0,period:360,function:"interpolated","zoom-function":!0,"property-function":!0,units:"degrees",requires:["icon-image"]},"icon-padding":{type:"number",default:2,minimum:0,function:"interpolated","zoom-function":!0,units:"pixels",requires:["icon-image"]},"icon-keep-upright":{type:"boolean",function:"piecewise-constant","zoom-function":!0,default:!1,requires:["icon-image",{"icon-rotation-alignment":"map"},{"symbol-placement":"line"}]},"icon-offset":{type:"array",
value:"number",length:2,default:[0,0],function:"interpolated","zoom-function":!0,"property-function":!0,requires:["icon-image"]},"icon-anchor":{type:"enum",function:"piecewise-constant","zoom-function":!0,"property-function":!0,values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},default:"center",requires:["icon-image"]},"icon-pitch-alignment":{type:"enum",function:"piecewise-constant","zoom-function":!0,values:{map:{},viewport:{},auto:{}},
default:"auto",requires:["icon-image"]},"text-pitch-alignment":{type:"enum",function:"piecewise-constant","zoom-function":!0,values:{map:{},viewport:{},auto:{}},default:"auto",requires:["text-field"]},"text-rotation-alignment":{type:"enum",function:"piecewise-constant","zoom-function":!0,values:{map:{},viewport:{},auto:{}},default:"auto",requires:["text-field"]},"text-field":{type:"string",function:"piecewise-constant","zoom-function":!0,"property-function":!0,default:"",tokens:!0},"text-font":{type:"array",
value:"string",function:"piecewise-constant","zoom-function":!0,"property-function":!0,default:["Open Sans Regular","Arial Unicode MS Regular"],requires:["text-field"]},"text-size":{type:"number",default:16,minimum:0,units:"pixels",function:"interpolated","zoom-function":!0,"property-function":!0,requires:["text-field"]},"text-max-width":{type:"number",default:10,minimum:0,units:"ems",function:"interpolated","zoom-function":!0,"property-function":!0,requires:["text-field"]},"text-line-height":{type:"number",
default:1.2,units:"ems",function:"interpolated","zoom-function":!0,requires:["text-field"]},"text-letter-spacing":{type:"number",default:0,units:"ems",function:"interpolated","zoom-function":!0,"property-function":!0,requires:["text-field"]},"text-justify":{type:"enum",function:"piecewise-constant","zoom-function":!0,"property-function":!0,values:{left:{},center:{},right:{}},default:"center",requires:["text-field"]},"text-anchor":{type:"enum",function:"piecewise-constant","zoom-function":!0,"property-function":!0,
values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},default:"center",requires:["text-field"]},"text-max-angle":{type:"number",default:45,units:"degrees",function:"interpolated","zoom-function":!0,requires:["text-field",{"symbol-placement":"line"}]},"text-rotate":{type:"number",default:0,period:360,units:"degrees",function:"interpolated","zoom-function":!0,"property-function":!0,requires:["text-field"]},"text-padding":{type:"number",
default:2,minimum:0,units:"pixels",function:"interpolated","zoom-function":!0,requires:["text-field"]},"text-keep-upright":{type:"boolean",function:"piecewise-constant","zoom-function":!0,default:!0,requires:["text-field",{"text-rotation-alignment":"map"},{"symbol-placement":"line"}]},"text-transform":{type:"enum",function:"piecewise-constant","zoom-function":!0,"property-function":!0,values:{none:{},uppercase:{},lowercase:{}},default:"none",requires:["text-field"]},"text-offset":{type:"array",value:"number",
units:"ems",function:"interpolated","zoom-function":!0,"property-function":!0,length:2,default:[0,0],requires:["text-field"]},"text-allow-overlap":{type:"boolean",function:"piecewise-constant","zoom-function":!0,default:!1,requires:["text-field"]},"text-ignore-placement":{type:"boolean",function:"piecewise-constant","zoom-function":!0,default:!1,requires:["text-field"]},"text-optional":{type:"boolean",function:"piecewise-constant","zoom-function":!0,default:!1,requires:["text-field","icon-image"]},
visibility:{type:"enum",values:{visible:{},none:{}},default:"visible"}},layout_raster:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible"}},layout_hillshade:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible"}},filter:{type:"array",value:"*"},filter_operator:{type:"enum",values:{"\x3d\x3d":{},"!\x3d":{},"\x3e":{},"\x3e\x3d":{},"\x3c":{},"\x3c\x3d":{},in:{},"!in":{},all:{},any:{},none:{},has:{},"!has":{}}},geometry_type:{type:"enum",values:{Point:{},LineString:{},
Polygon:{}}},function_stop:{type:"array",minimum:0,maximum:22,value:["number","color"],length:2},expression:{type:"array",value:"*",minimum:1},expression_name:{type:"enum",values:{let:{group:"Variable binding"},var:{group:"Variable binding"},literal:{group:"Types"},array:{group:"Types"},at:{group:"Lookup"},case:{group:"Decision"},match:{group:"Decision"},coalesce:{group:"Decision"},step:{group:"Ramps, scales, curves"},interpolate:{group:"Ramps, scales, curves"},ln2:{group:"Math"},pi:{group:"Math"},
e:{group:"Math"},typeof:{group:"Types"},string:{group:"Types"},number:{group:"Types"},boolean:{group:"Types"},object:{group:"Types"},collator:{group:"Types"},"to-string":{group:"Types"},"to-number":{group:"Types"},"to-boolean":{group:"Types"},"to-rgba":{group:"Color"},"to-color":{group:"Types"},rgb:{group:"Color"},rgba:{group:"Color"},get:{group:"Lookup"},has:{group:"Lookup"},length:{group:"Lookup"},properties:{group:"Feature data"},"geometry-type":{group:"Feature data"},id:{group:"Feature data"},
zoom:{group:"Zoom"},"heatmap-density":{group:"Heatmap"},"line-progress":{group:"Heatmap"},"+":{group:"Math"},"*":{group:"Math"},"-":{group:"Math"},"/":{group:"Math"},"%":{group:"Math"},"^":{group:"Math"},sqrt:{group:"Math"},log10:{group:"Math"},ln:{group:"Math"},log2:{group:"Math"},sin:{group:"Math"},cos:{group:"Math"},tan:{group:"Math"},asin:{group:"Math"},acos:{group:"Math"},atan:{group:"Math"},min:{group:"Math"},max:{group:"Math"},round:{group:"Math"},abs:{group:"Math"},ceil:{group:"Math"},floor:{group:"Math"},
"\x3d\x3d":{group:"Decision"},"!\x3d":{group:"Decision"},"\x3e":{group:"Decision"},"\x3c":{group:"Decision"},"\x3e\x3d":{group:"Decision"},"\x3c\x3d":{group:"Decision"},all:{group:"Decision"},any:{group:"Decision"},"!":{group:"Decision"},"is-supported-script":{group:"String"},upcase:{group:"String"},downcase:{group:"String"},concat:{group:"String"},"resolved-locale":{group:"String"}}},light:{anchor:{type:"enum",default:"viewport",values:{map:{},viewport:{}},transition:!1,"zoom-function":!0,"property-function":!1,
function:"piecewise-constant"},position:{type:"array",default:[1.15,210,30],length:3,value:"number",transition:!0,function:"interpolated","zoom-function":!0,"property-function":!1},color:{type:"color",default:"#ffffff",function:"interpolated","zoom-function":!0,"property-function":!1,transition:!0},intensity:{type:"number",default:.5,minimum:0,maximum:1,function:"interpolated","zoom-function":!0,"property-function":!1,transition:!0}},paint:"paint_fill paint_line paint_circle paint_heatmap paint_fill-extrusion paint_symbol paint_raster paint_hillshade paint_background".split(" "),
paint_fill:{"fill-antialias":{type:"boolean",function:"piecewise-constant","zoom-function":!0,default:!0},"fill-opacity":{type:"number",function:"interpolated","zoom-function":!0,"property-function":!0,default:1,minimum:0,maximum:1,transition:!0},"fill-color":{type:"color",default:"#000000",function:"interpolated","zoom-function":!0,"property-function":!0,transition:!0,requires:[{"!":"fill-pattern"}]},"fill-outline-color":{type:"color",function:"interpolated","zoom-function":!0,"property-function":!0,
transition:!0,requires:[{"!":"fill-pattern"},{"fill-antialias":!0}]},"fill-translate":{type:"array",value:"number",length:2,default:[0,0],function:"interpolated","zoom-function":!0,transition:!0,units:"pixels"},"fill-translate-anchor":{type:"enum",function:"piecewise-constant","zoom-function":!0,values:{map:{},viewport:{}},default:"map",requires:["fill-translate"]},"fill-pattern":{type:"string",function:"piecewise-constant","zoom-function":!0,transition:!0}},paint_line:{"line-opacity":{type:"number",
function:"interpolated","zoom-function":!0,"property-function":!0,default:1,minimum:0,maximum:1,transition:!0},"line-color":{type:"color",default:"#000000",function:"interpolated","zoom-function":!0,"property-function":!0,transition:!0,requires:[{"!":"line-pattern"}]},"line-translate":{type:"array",value:"number",length:2,default:[0,0],function:"interpolated","zoom-function":!0,transition:!0,units:"pixels"},"line-translate-anchor":{type:"enum",function:"piecewise-constant","zoom-function":!0,values:{map:{},
viewport:{}},default:"map",requires:["line-translate"]},"line-width":{type:"number",default:1,minimum:0,function:"interpolated","zoom-function":!0,"property-function":!0,transition:!0,units:"pixels"},"line-gap-width":{type:"number",default:0,minimum:0,function:"interpolated","zoom-function":!0,"property-function":!0,transition:!0,units:"pixels"},"line-offset":{type:"number",default:0,function:"interpolated","zoom-function":!0,"property-function":!0,transition:!0,units:"pixels"},"line-blur":{type:"number",
default:0,minimum:0,function:"interpolated","zoom-function":!0,"property-function":!0,transition:!0,units:"pixels"},"line-dasharray":{type:"array",value:"number",function:"piecewise-constant","zoom-function":!0,minimum:0,transition:!0,units:"line widths",requires:[{"!":"line-pattern"}]},"line-pattern":{type:"string",function:"piecewise-constant","zoom-function":!0,transition:!0},"line-gradient":{type:"color",function:"interpolated","zoom-function":!1,"property-function":!1,transition:!1,requires:[{"!":"line-dasharray"},
{"!":"line-pattern"},{source:"geojson",has:{lineMetrics:!0}}]}},paint_circle:{"circle-radius":{type:"number",default:5,minimum:0,function:"interpolated","zoom-function":!0,"property-function":!0,transition:!0,units:"pixels"},"circle-color":{type:"color",default:"#000000",function:"interpolated","zoom-function":!0,"property-function":!0,transition:!0},"circle-blur":{type:"number",default:0,function:"interpolated","zoom-function":!0,"property-function":!0,transition:!0},"circle-opacity":{type:"number",
default:1,minimum:0,maximum:1,function:"interpolated","zoom-function":!0,"property-function":!0,transition:!0},"circle-translate":{type:"array",value:"number",length:2,default:[0,0],function:"interpolated","zoom-function":!0,transition:!0,units:"pixels"},"circle-translate-anchor":{type:"enum",function:"piecewise-constant","zoom-function":!0,values:{map:{},viewport:{}},default:"map",requires:["circle-translate"]},"circle-pitch-scale":{type:"enum",function:"piecewise-constant","zoom-function":!0,values:{map:{},
viewport:{}},default:"map"},"circle-pitch-alignment":{type:"enum",function:"piecewise-constant","zoom-function":!0,values:{map:{},viewport:{}},default:"viewport"},"circle-stroke-width":{type:"number",default:0,minimum:0,function:"interpolated","zoom-function":!0,"property-function":!0,transition:!0,units:"pixels"},"circle-stroke-color":{type:"color",default:"#000000",function:"interpolated","zoom-function":!0,"property-function":!0,transition:!0},"circle-stroke-opacity":{type:"number",default:1,minimum:0,
maximum:1,function:"interpolated","zoom-function":!0,"property-function":!0,transition:!0}},paint_heatmap:{"heatmap-radius":{type:"number",default:30,minimum:1,function:"interpolated","zoom-function":!0,"property-function":!0,transition:!0,units:"pixels"},"heatmap-weight":{type:"number",default:1,minimum:0,function:"interpolated","zoom-function":!0,"property-function":!0,transition:!1},"heatmap-intensity":{type:"number",default:1,minimum:0,function:"interpolated","zoom-function":!0,"property-function":!1,
transition:!0},"heatmap-color":{type:"color",default:["interpolate",["linear"],["heatmap-density"],0,"rgba(0, 0, 255, 0)",.1,"royalblue",.3,"cyan",.5,"lime",.7,"yellow",1,"red"],function:"interpolated","zoom-function":!1,"property-function":!1,transition:!1},"heatmap-opacity":{type:"number",default:1,minimum:0,maximum:1,function:"interpolated","zoom-function":!0,"property-function":!1,transition:!0}},paint_symbol:{"icon-opacity":{type:"number",default:1,minimum:0,maximum:1,function:"interpolated",
"zoom-function":!0,"property-function":!0,transition:!0,requires:["icon-image"]},"icon-color":{type:"color",default:"#000000",function:"interpolated","zoom-function":!0,"property-function":!0,transition:!0,requires:["icon-image"]},"icon-halo-color":{type:"color",default:"rgba(0, 0, 0, 0)",function:"interpolated","zoom-function":!0,"property-function":!0,transition:!0,requires:["icon-image"]},"icon-halo-width":{type:"number",default:0,minimum:0,function:"interpolated","zoom-function":!0,"property-function":!0,
transition:!0,units:"pixels",requires:["icon-image"]},"icon-halo-blur":{type:"number",default:0,minimum:0,function:"interpolated","zoom-function":!0,"property-function":!0,transition:!0,units:"pixels",requires:["icon-image"]},"icon-translate":{type:"array",value:"number",length:2,default:[0,0],function:"interpolated","zoom-function":!0,transition:!0,units:"pixels",requires:["icon-image"]},"icon-translate-anchor":{type:"enum",function:"piecewise-constant","zoom-function":!0,values:{map:{},viewport:{}},
default:"map",requires:["icon-image","icon-translate"]},"text-opacity":{type:"number",default:1,minimum:0,maximum:1,function:"interpolated","zoom-function":!0,"property-function":!0,transition:!0,requires:["text-field"]},"text-color":{type:"color",default:"#000000",function:"interpolated","zoom-function":!0,"property-function":!0,transition:!0,requires:["text-field"]},"text-halo-color":{type:"color",default:"rgba(0, 0, 0, 0)",function:"interpolated","zoom-function":!0,"property-function":!0,transition:!0,
requires:["text-field"]},"text-halo-width":{type:"number",default:0,minimum:0,function:"interpolated","zoom-function":!0,"property-function":!0,transition:!0,units:"pixels",requires:["text-field"]},"text-halo-blur":{type:"number",default:0,minimum:0,function:"interpolated","zoom-function":!0,"property-function":!0,transition:!0,units:"pixels",requires:["text-field"]},"text-translate":{type:"array",value:"number",length:2,default:[0,0],function:"interpolated","zoom-function":!0,transition:!0,units:"pixels",
requires:["text-field"]},"text-translate-anchor":{type:"enum",function:"piecewise-constant","zoom-function":!0,values:{map:{},viewport:{}},default:"map",requires:["text-field","text-translate"]}},paint_raster:{"raster-opacity":{type:"number",default:1,minimum:0,maximum:1,function:"interpolated","zoom-function":!0,transition:!0},"raster-hue-rotate":{type:"number",default:0,period:360,function:"interpolated","zoom-function":!0,transition:!0,units:"degrees"},"raster-brightness-min":{type:"number",function:"interpolated",
"zoom-function":!0,default:0,minimum:0,maximum:1,transition:!0},"raster-brightness-max":{type:"number",function:"interpolated","zoom-function":!0,default:1,minimum:0,maximum:1,transition:!0},"raster-saturation":{type:"number",default:0,minimum:-1,maximum:1,function:"interpolated","zoom-function":!0,transition:!0},"raster-contrast":{type:"number",default:0,minimum:-1,maximum:1,function:"interpolated","zoom-function":!0,transition:!0},"raster-fade-duration":{type:"number",default:300,minimum:0,function:"interpolated",
"zoom-function":!0,transition:!1,units:"milliseconds"}},paint_hillshade:{"hillshade-illumination-direction":{type:"number",default:335,minimum:0,maximum:359,function:"interpolated","zoom-function":!0,transition:!1},"hillshade-illumination-anchor":{type:"enum",function:"piecewise-constant","zoom-function":!0,values:{map:{},viewport:{}},default:"viewport"},"hillshade-exaggeration":{type:"number",default:.5,minimum:0,maximum:1,function:"interpolated","zoom-function":!0,transition:!0},"hillshade-shadow-color":{type:"color",
default:"#000000",function:"interpolated","zoom-function":!0,transition:!0},"hillshade-highlight-color":{type:"color",default:"#FFFFFF",function:"interpolated","zoom-function":!0,transition:!0},"hillshade-accent-color":{type:"color",default:"#000000",function:"interpolated","zoom-function":!0,transition:!0}},paint_background:{"background-color":{type:"color",default:"#000000",function:"interpolated","zoom-function":!0,transition:!0,requires:[{"!":"background-pattern"}]},"background-pattern":{type:"string",
function:"piecewise-constant","zoom-function":!0,transition:!0},"background-opacity":{type:"number",default:1,minimum:0,maximum:1,function:"interpolated","zoom-function":!0,transition:!0}},transition:{duration:{type:"number",default:300,minimum:0,units:"milliseconds"},delay:{type:"number",default:0,minimum:0,units:"milliseconds"}},"layout_fill-extrusion":{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible"}},function:{expression:{type:"expression"},stops:{type:"array",value:"function_stop"},
base:{type:"number",default:1,minimum:0},property:{type:"string",default:"$zoom"},type:{type:"enum",values:{identity:{},exponential:{},interval:{},categorical:{}},default:"exponential"},colorSpace:{type:"enum",values:{rgb:{},lab:{},hcl:{}},default:"rgb"},default:{type:"*",required:!1}},"paint_fill-extrusion":{"fill-extrusion-opacity":{type:"number",function:"interpolated","zoom-function":!0,"property-function":!1,default:1,minimum:0,maximum:1,transition:!0},"fill-extrusion-color":{type:"color",default:"#000000",
function:"interpolated","zoom-function":!0,"property-function":!0,transition:!0,requires:[{"!":"fill-extrusion-pattern"}]},"fill-extrusion-translate":{type:"array",value:"number",length:2,default:[0,0],function:"interpolated","zoom-function":!0,transition:!0,units:"pixels"},"fill-extrusion-translate-anchor":{type:"enum",function:"piecewise-constant","zoom-function":!0,values:{map:{},viewport:{}},default:"map",requires:["fill-extrusion-translate"]},"fill-extrusion-pattern":{type:"string",function:"piecewise-constant",
"zoom-function":!0,transition:!0},"fill-extrusion-height":{type:"number",function:"interpolated","zoom-function":!0,"property-function":!0,default:0,minimum:0,units:"meters",transition:!0},"fill-extrusion-base":{type:"number",function:"interpolated","zoom-function":!0,"property-function":!0,default:0,minimum:0,units:"meters",transition:!0,requires:["fill-extrusion-height"]}}},La=function(a,b,c,d){this.message=(a?a+": ":"")+c;d&&(this.identifier=d);null!=b&&b.__line__&&(this.line=b.__line__)},qb=function(a){function b(b,
c){a.call(this,c);this.message=c;this.key=b}return a&&(b.__proto__=a),b.prototype=Object.create(a&&a.prototype),b.prototype.constructor=b,b}(Error),Bb=function(a,b){void 0===b&&(b=[]);this.parent=a;this.bindings={};for(a=0;a<b.length;a+=1){var c=b[a];this.bindings[c[0]]=c[1]}};Bb.prototype.concat=function(a){return new Bb(this,a)};Bb.prototype.get=function(a){if(this.bindings[a])return this.bindings[a];if(this.parent)return this.parent.get(a);throw Error(a+" not found in scope.");};Bb.prototype.has=
function(a){return!!this.bindings[a]||!!this.parent&&this.parent.has(a)};var Wc={kind:"null"},Da={kind:"number"},Za={kind:"string"},ob={kind:"boolean"},$b={kind:"color"},fc={kind:"object"},ub={kind:"value"},Pb={kind:"collator"},Re=[Wc,Da,Za,ob,$b,fc,I(ub)],Xb=f(function(a,b){function c(a){return 0>(a=Math.round(a))?0:255<a?255:a}function d(a){return 0>a?0:1<a?1:a}function e(a){return"%"===a[a.length-1]?c(parseFloat(a)/100*255):c(parseInt(a))}function g(a){return"%"===a[a.length-1]?d(parseFloat(a)/
100):d(parseFloat(a))}function f(a,b,c){return 0>c?c+=1:1<c&&--c,1>6*c?a+(b-a)*c*6:1>2*c?b:2>3*c?a+(b-a)*(2/3-c)*6:a}var h={transparent:[0,0,0,0],aliceblue:[240,248,255,1],antiquewhite:[250,235,215,1],aqua:[0,255,255,1],aquamarine:[127,255,212,1],azure:[240,255,255,1],beige:[245,245,220,1],bisque:[255,228,196,1],black:[0,0,0,1],blanchedalmond:[255,235,205,1],blue:[0,0,255,1],blueviolet:[138,43,226,1],brown:[165,42,42,1],burlywood:[222,184,135,1],cadetblue:[95,158,160,1],chartreuse:[127,255,0,1],chocolate:[210,
105,30,1],coral:[255,127,80,1],cornflowerblue:[100,149,237,1],cornsilk:[255,248,220,1],crimson:[220,20,60,1],cyan:[0,255,255,1],darkblue:[0,0,139,1],darkcyan:[0,139,139,1],darkgoldenrod:[184,134,11,1],darkgray:[169,169,169,1],darkgreen:[0,100,0,1],darkgrey:[169,169,169,1],darkkhaki:[189,183,107,1],darkmagenta:[139,0,139,1],darkolivegreen:[85,107,47,1],darkorange:[255,140,0,1],darkorchid:[153,50,204,1],darkred:[139,0,0,1],darksalmon:[233,150,122,1],darkseagreen:[143,188,143,1],darkslateblue:[72,61,
139,1],darkslategray:[47,79,79,1],darkslategrey:[47,79,79,1],darkturquoise:[0,206,209,1],darkviolet:[148,0,211,1],deeppink:[255,20,147,1],deepskyblue:[0,191,255,1],dimgray:[105,105,105,1],dimgrey:[105,105,105,1],dodgerblue:[30,144,255,1],firebrick:[178,34,34,1],floralwhite:[255,250,240,1],forestgreen:[34,139,34,1],fuchsia:[255,0,255,1],gainsboro:[220,220,220,1],ghostwhite:[248,248,255,1],gold:[255,215,0,1],goldenrod:[218,165,32,1],gray:[128,128,128,1],green:[0,128,0,1],greenyellow:[173,255,47,1],
grey:[128,128,128,1],honeydew:[240,255,240,1],hotpink:[255,105,180,1],indianred:[205,92,92,1],indigo:[75,0,130,1],ivory:[255,255,240,1],khaki:[240,230,140,1],lavender:[230,230,250,1],lavenderblush:[255,240,245,1],lawngreen:[124,252,0,1],lemonchiffon:[255,250,205,1],lightblue:[173,216,230,1],lightcoral:[240,128,128,1],lightcyan:[224,255,255,1],lightgoldenrodyellow:[250,250,210,1],lightgray:[211,211,211,1],lightgreen:[144,238,144,1],lightgrey:[211,211,211,1],lightpink:[255,182,193,1],lightsalmon:[255,
160,122,1],lightseagreen:[32,178,170,1],lightskyblue:[135,206,250,1],lightslategray:[119,136,153,1],lightslategrey:[119,136,153,1],lightsteelblue:[176,196,222,1],lightyellow:[255,255,224,1],lime:[0,255,0,1],limegreen:[50,205,50,1],linen:[250,240,230,1],magenta:[255,0,255,1],maroon:[128,0,0,1],mediumaquamarine:[102,205,170,1],mediumblue:[0,0,205,1],mediumorchid:[186,85,211,1],mediumpurple:[147,112,219,1],mediumseagreen:[60,179,113,1],mediumslateblue:[123,104,238,1],mediumspringgreen:[0,250,154,1],
mediumturquoise:[72,209,204,1],mediumvioletred:[199,21,133,1],midnightblue:[25,25,112,1],mintcream:[245,255,250,1],mistyrose:[255,228,225,1],moccasin:[255,228,181,1],navajowhite:[255,222,173,1],navy:[0,0,128,1],oldlace:[253,245,230,1],olive:[128,128,0,1],olivedrab:[107,142,35,1],orange:[255,165,0,1],orangered:[255,69,0,1],orchid:[218,112,214,1],palegoldenrod:[238,232,170,1],palegreen:[152,251,152,1],paleturquoise:[175,238,238,1],palevioletred:[219,112,147,1],papayawhip:[255,239,213,1],peachpuff:[255,
218,185,1],peru:[205,133,63,1],pink:[255,192,203,1],plum:[221,160,221,1],powderblue:[176,224,230,1],purple:[128,0,128,1],rebeccapurple:[102,51,153,1],red:[255,0,0,1],rosybrown:[188,143,143,1],royalblue:[65,105,225,1],saddlebrown:[139,69,19,1],salmon:[250,128,114,1],sandybrown:[244,164,96,1],seagreen:[46,139,87,1],seashell:[255,245,238,1],sienna:[160,82,45,1],silver:[192,192,192,1],skyblue:[135,206,235,1],slateblue:[106,90,205,1],slategray:[112,128,144,1],slategrey:[112,128,144,1],snow:[255,250,250,
1],springgreen:[0,255,127,1],steelblue:[70,130,180,1],tan:[210,180,140,1],teal:[0,128,128,1],thistle:[216,191,216,1],tomato:[255,99,71,1],turquoise:[64,224,208,1],violet:[238,130,238,1],wheat:[245,222,179,1],white:[255,255,255,1],whitesmoke:[245,245,245,1],yellow:[255,255,0,1],yellowgreen:[154,205,50,1]};try{b.parseCSSColor=function(a){var b;a=a.replace(/ /g,"").toLowerCase();if(a in h)return h[a].slice();if("#"===a[0])return 4===a.length?0<=(b=parseInt(a.substr(1),16))&&4095>=b?[(3840&b)>>4|(3840&
b)>>8,240&b|(240&b)>>4,15&b|(15&b)<<4,1]:null:7===a.length&&0<=(b=parseInt(a.substr(1),16))&&16777215>=b?[(16711680&b)>>16,(65280&b)>>8,255&b,1]:null;var d=a.indexOf("("),k=a.indexOf(")");if(-1!==d&&k+1===a.length)switch(b=a.substr(0,d),d=a.substr(d+1,k-(d+1)).split(","),a=1,b){case "rgba":if(4!==d.length)break;a=g(d.pop());case "rgb":return 3!==d.length?null:[e(d[0]),e(d[1]),e(d[2]),a];case "hsla":if(4!==d.length)break;a=g(d.pop());case "hsl":if(3===d.length)return b=(parseFloat(d[0])%360+360)%360/
360,k=g(d[1]),d=g(d[2]),k=.5>=d?d*(k+1):d+k-d*k,d=2*d-k,[c(255*f(d,k,b+1/3)),c(255*f(d,k,b)),c(255*f(d,k,b-1/3)),a]}return null}}catch(Yd){}}).parseCSSColor,tb=function(a,b,c,d){void 0===d&&(d=1);this.r=a;this.g=b;this.b=c;this.a=d};tb.parse=function(a){if(a){if(a instanceof tb)return a;if("string"==typeof a&&(a=Xb(a)))return new tb(a[0]/255*a[3],a[1]/255*a[3],a[2]/255*a[3],a[3])}};tb.prototype.toString=function(){var a=this.toArray();return"rgba("+Math.round(a[0])+","+Math.round(a[1])+","+Math.round(a[2])+
","+a[3]+")"};tb.prototype.toArray=function(){var a=this.r,b=this.g,c=this.b,d=this.a;return 0===d?[0,0,0,0]:[255*a/d,255*b/d,255*c/d,d]};tb.black=new tb(0,0,0,1);tb.white=new tb(1,1,1,1);tb.transparent=new tb(0,0,0,0);var Lc=function(a,b,c){this.sensitivity=a?b?"variant":"case":b?"accent":"base";this.locale=c;this.collator=new Intl.Collator(this.locale?this.locale:[],{sensitivity:this.sensitivity,usage:"search"})};Lc.prototype.compare=function(a,b){return this.collator.compare(a,b)};Lc.prototype.resolvedLocale=
function(){return(new Intl.Collator(this.locale?this.locale:[])).resolvedOptions().locale};var nc=function(a,b,c){this.type=Pb;this.locale=c;this.caseSensitive=a;this.diacriticSensitive=b};nc.parse=function(a,b){if(2!==a.length)return b.error("Expected one argument.");a=a[1];if("object"!=typeof a||Array.isArray(a))return b.error("Collator options argument must be an object.");var c=b.parse(void 0!==a["case-sensitive"]&&a["case-sensitive"],1,ob);if(!c)return null;var d=b.parse(void 0!==a["diacritic-sensitive"]&&
a["diacritic-sensitive"],1,ob);if(!d)return null;var e=null;return a.locale&&!(e=b.parse(a.locale,1,Za))?null:new nc(c,d,e)};nc.prototype.evaluate=function(a){return new Lc(this.caseSensitive.evaluate(a),this.diacriticSensitive.evaluate(a),this.locale?this.locale.evaluate(a):null)};nc.prototype.eachChild=function(a){a(this.caseSensitive);a(this.diacriticSensitive);this.locale&&a(this.locale)};nc.prototype.possibleOutputs=function(){return[void 0]};nc.prototype.serialize=function(){var a={};return a["case-sensitive"]=
this.caseSensitive.serialize(),a["diacritic-sensitive"]=this.diacriticSensitive.serialize(),this.locale&&(a.locale=this.locale.serialize()),["collator",a]};var Qb=function(a,b){this.type=a;this.value=b};Qb.parse=function(a,b){if(2!==a.length)return b.error("'literal' expression requires exactly one argument, but found "+(a.length-1)+" instead.");if(!function Sc(a){if(null===a||"string"==typeof a||"boolean"==typeof a||"number"==typeof a||a instanceof tb||a instanceof Lc)return!0;if(Array.isArray(a)){for(var b=
0;b<a.length;b+=1)if(!Sc(a[b]))return!1;return!0}if("object"==typeof a){for(b in a)if(!Sc(a[b]))return!1;return!0}return!1}(a[1]))return b.error("invalid value");a=a[1];var c=R(a);b=b.expectedType;return"array"!==c.kind||0!==c.N||!b||"array"!==b.kind||"number"==typeof b.N&&0!==b.N||(c=b),new Qb(c,a)};Qb.prototype.evaluate=function(){return this.value};Qb.prototype.eachChild=function(){};Qb.prototype.possibleOutputs=function(){return[this.value]};Qb.prototype.serialize=function(){return"array"===this.type.kind||
"object"===this.type.kind?["literal",this.value]:this.value instanceof tb?["rgba"].concat(this.value.toArray()):this.value};var Ec=function(a){this.name="ExpressionEvaluationError";this.message=a};Ec.prototype.toJSON=function(){return this.message};var Ce={string:Za,number:Da,boolean:ob,object:fc},cc=function(a,b){this.type=a;this.args=b};cc.parse=function(a,b){if(2>a.length)return b.error("Expected at least one argument.");for(var c=Ce[a[0]],d=[],e=1;e<a.length;e++){var g=b.parse(a[e],e,ub);if(!g)return null;
d.push(g)}return new cc(c,d)};cc.prototype.evaluate=function(a){for(var b=0;b<this.args.length;b++){var c=this.args[b].evaluate(a);if(!N(this.type,R(c)))return c;if(b===this.args.length-1)throw new Ec("Expected value to be of type "+Q(this.type)+", but found "+Q(R(c))+" instead.");}return null};cc.prototype.eachChild=function(a){this.args.forEach(a)};cc.prototype.possibleOutputs=function(){return(a=[]).concat.apply(a,this.args.map(function(a){return a.possibleOutputs()}));var a};cc.prototype.serialize=
function(){return[this.type.kind].concat(this.args.map(function(a){return a.serialize()}))};var ee={string:Za,number:Da,boolean:ob},Fc=function(a,b){this.type=a;this.input=b};Fc.parse=function(a,b){if(2>a.length||4<a.length)return b.error("Expected 1, 2, or 3 arguments, but found "+(a.length-1)+" instead.");if(2<a.length){var c=a[1];if("string"!=typeof c||!(c in ee))return b.error('The item type argument of "array" must be one of string, number, boolean',1);c=ee[c]}else c=ub;if(3<a.length){if("number"!=
typeof a[2]||0>a[2]||a[2]!==Math.floor(a[2]))return b.error('The length argument to "array" must be a positive integer literal',2);var d=a[2]}d=I(c,d);return(a=b.parse(a[a.length-1],a.length-1,ub))?new Fc(d,a):null};Fc.prototype.evaluate=function(a){a=this.input.evaluate(a);if(N(this.type,R(a)))throw new Ec("Expected value to be of type "+Q(this.type)+", but found "+Q(R(a))+" instead.");return a};Fc.prototype.eachChild=function(a){a(this.input)};Fc.prototype.possibleOutputs=function(){return this.input.possibleOutputs()};
Fc.prototype.serialize=function(){var a=["array"],b=this.type.itemType;if("string"===b.kind||"number"===b.kind||"boolean"===b.kind)a.push(b.kind),b=this.type.N,"number"==typeof b&&a.push(b);return a.push(this.input.serialize()),a};var $f={"to-number":Da,"to-color":$b},Hd=function(a,b){this.type=a;this.args=b};Hd.parse=function(a,b){if(2>a.length)return b.error("Expected at least one argument.");for(var c=$f[a[0]],d=[],e=1;e<a.length;e++){var g=b.parse(a[e],e,ub);if(!g)return null;d.push(g)}return new Hd(c,
d)};Hd.prototype.evaluate=function(a){if("color"===this.type.kind){for(var b,c,d=0,e=this.args;d<e.length;d+=1)if(c=null,"string"==typeof(b=e[d].evaluate(a))){var g=a.parseColor(b);if(g)return g}else if(Array.isArray(b)&&!(c=3>b.length||4<b.length?"Invalid rbga value "+JSON.stringify(b)+": expected an array containing either three or four numeric values.":L(b[0],b[1],b[2],b[3])))return new tb(b[0]/255,b[1]/255,b[2]/255,b[3]);throw new Ec(c||"Could not parse color from value '"+("string"==typeof b?
b:JSON.stringify(b))+"'");}b=null;c=0;for(d=this.args;c<d.length;c+=1)if(null!==(b=d[c].evaluate(a))&&(e=Number(b),!isNaN(e)))return e;throw new Ec("Could not convert "+JSON.stringify(b)+" to number.");};Hd.prototype.eachChild=function(a){this.args.forEach(a)};Hd.prototype.possibleOutputs=function(){return(a=[]).concat.apply(a,this.args.map(function(a){return a.possibleOutputs()}));var a};Hd.prototype.serialize=function(){var a=["to-"+this.type.kind];return this.eachChild(function(b){a.push(b.serialize())}),
a};var fe=["Unknown","Point","LineString","Polygon"],Mc=function(){this._parseColorCache={}};Mc.prototype.id=function(){return this.feature&&"id"in this.feature?this.feature.id:null};Mc.prototype.geometryType=function(){return this.feature?"number"==typeof this.feature.type?fe[this.feature.type]:this.feature.type:null};Mc.prototype.properties=function(){return this.feature&&this.feature.properties||{}};Mc.prototype.parseColor=function(a){var b=this._parseColorCache[a];return b||(b=this._parseColorCache[a]=
tb.parse(a)),b};var Rb=function(a,b,c,d){this.name=a;this.type=b;this._evaluate=c;this.args=d};Rb.prototype.evaluate=function(a){return this._evaluate(a,this.args)};Rb.prototype.eachChild=function(a){this.args.forEach(a)};Rb.prototype.possibleOutputs=function(){return[void 0]};Rb.prototype.serialize=function(){return[this.name].concat(this.args.map(function(a){return a.serialize()}))};Rb.parse=function(a,b){var c=a[0],d=Rb.definitions[c];if(!d)return b.error('Unknown expression "'+c+'". If you wanted a literal array, use ["literal", [...]].',
0);var e=Array.isArray(d)?d[0]:d.type,g=Array.isArray(d)?[[d[1],d[2]]]:d.overloads,f=g.filter(function(b){b=b[0];return!Array.isArray(b)||b.length===a.length-1});d=[];for(var h=1;h<a.length;h++){var k=a[h],n=void 0;1===f.length&&(n=f[0][0],n=Array.isArray(n)?n[h-1]:n.type);k=b.parse(k,1+d.length,n);if(!k)return null;d.push(k)}n=null;for(h=0;h<f.length;h+=1){n=f[h];k=n[0];var t=n[1];if(n=new rd(b.registry,b.path,null,b.scope),Array.isArray(k)&&k.length!==d.length)n.error("Expected "+k.length+" arguments, but found "+
d.length+" instead.");else{for(var m=0;m<d.length;m++){var v=Array.isArray(k)?k[m]:k.type,r=d[m];n.concat(m+1).checkSubtype(v,r.type)}if(0===n.errors.length)return new Rb(c,e,t,d)}}1===f.length?b.errors.push.apply(b.errors,n.errors):(c=(f.length?f:g).map(function(a){var b;return b=a[0],Array.isArray(b)?"("+b.map(Q).join(", ")+")":"("+Q(b.type)+"...)"}).join(" | "),e=d.map(function(a){return Q(a.type)}).join(", "),b.error("Expected arguments of type "+c+", but found ("+e+") instead."));return null};
Rb.register=function(a,b){for(var c in Rb.definitions=b,b)a[c]=Rb};var dd=function(a,b){this.type=b.type;this.name=a;this.boundExpression=b};dd.parse=function(a,b){if(2!==a.length||"string"!=typeof a[1])return b.error("'var' expression requires exactly one string literal argument.");a=a[1];return b.scope.has(a)?new dd(a,b.scope.get(a)):b.error('Unknown variable "'+a+'". Make sure "'+a+'" has been bound in an enclosing "let" expression before using it.',1)};dd.prototype.evaluate=function(a){return this.boundExpression.evaluate(a)};
dd.prototype.eachChild=function(){};dd.prototype.possibleOutputs=function(){return[void 0]};dd.prototype.serialize=function(){return["var",this.name]};var rd=function(a,b,c,d,e){void 0===b&&(b=[]);void 0===d&&(d=new Bb);void 0===e&&(e=[]);this.registry=a;this.path=b;this.key=b.map(function(a){return"["+a+"]"}).join("");this.scope=d;this.errors=e;this.expectedType=c};rd.prototype.parse=function(a,b,c,d,e){return void 0===e&&(e={}),b?this.concat(b,c,d)._parse(a,e):this._parse(a,e)};rd.prototype._parse=
function(a,b){if(null!==a&&"string"!=typeof a&&"boolean"!=typeof a&&"number"!=typeof a||(a=["literal",a]),Array.isArray(a)){if(0===a.length)return this.error('Expected an array with at least one element. If you wanted a literal array, use ["literal", []].');var c=a[0];if("string"!=typeof c)return this.error("Expression name must be a string, but found "+typeof c+' instead. If you wanted a literal array, use ["literal", [...]].',0),null;var d=this.registry[c];if(d){a=d.parse(a,this);if(!a)return null;
if(this.expectedType)if(c=this.expectedType,d=a.type,"string"!==c.kind&&"number"!==c.kind&&"boolean"!==c.kind&&"object"!==c.kind||"value"!==d.kind)if("array"===c.kind&&"value"===d.kind)b.omitTypeAnnotations||(a=new Fc(c,a));else if("color"!==c.kind||"value"!==d.kind&&"string"!==d.kind){if(this.checkSubtype(this.expectedType,a.type))return null}else b.omitTypeAnnotations||(a=new Hd(c,[a]));else b.omitTypeAnnotations||(a=new cc(c,[a]));if(!(a instanceof Qb)&&function zd(a){if(a instanceof dd)return zd(a.boundExpression);
if(a instanceof Rb&&"error"===a.name||a instanceof nc)return!1;var b=a instanceof Hd||a instanceof cc||a instanceof Fc,c=!0;a.eachChild(function(a){c=b?c&&zd(a):c&&a instanceof Qb});return c?x(a)&&U(a,["zoom","heatmap-density","line-progress","is-supported-script"]):!1}(a)){b=new Mc;try{a=new Qb(a.type,a.evaluate(b))}catch(Sc){return this.error(Sc.message),null}}return a}return this.error('Unknown expression "'+c+'". If you wanted a literal array, use ["literal", [...]].',0)}return void 0===a?this.error("'undefined' value invalid. Use null instead."):
"object"==typeof a?this.error('Bare objects invalid. Use ["literal", {...}] instead.'):this.error("Expected an array, but found "+typeof a+" instead.")};rd.prototype.concat=function(a,b,c){a="number"==typeof a?this.path.concat(a):this.path;c=c?this.scope.concat(c):this.scope;return new rd(this.registry,a,b||null,c,this.errors)};rd.prototype.error=function(a){for(var b=[],c=arguments.length-1;0<c--;)b[c]=arguments[c+1];b=""+this.key+b.map(function(a){return"["+a+"]"}).join("");this.errors.push(new qb(b,
a))};rd.prototype.checkSubtype=function(a,b){a=N(a,b);return a&&this.error(a),a};var gc=function(a,b,c){this.type=a;this.input=b;this.labels=[];this.outputs=[];for(a=0;a<c.length;a+=1){b=c[a];var d=b[1];this.labels.push(b[0]);this.outputs.push(d)}};gc.parse=function(a,b){var c=a[1],d=a.slice(2);if(4>a.length-1)return b.error("Expected at least 4 arguments, but found only "+(a.length-1)+".");if(0!=(a.length-1)%2)return b.error("Expected an even number of arguments.");if(!(c=b.parse(c,1,Da)))return null;
a=[];var e=null;b.expectedType&&"value"!==b.expectedType.kind&&(e=b.expectedType);d.unshift(-1/0);for(var g=0;g<d.length;g+=2){var f=d[g],h=d[g+1],k=g+1,n=g+2;if("number"!=typeof f)return b.error('Input/output pairs for "step" expressions must be defined using literal numeric values (not computed expressions) for the input values.',k);if(a.length&&a[a.length-1][0]>=f)return b.error('Input/output pairs for "step" expressions must be arranged with input values in strictly ascending order.',k);h=b.parse(h,
n,e);if(!h)return null;e=e||h.type;a.push([f,h])}return new gc(e,c,a)};gc.prototype.evaluate=function(a){var b=this.labels,c=this.outputs;if(1===b.length)return c[0].evaluate(a);var d=this.input.evaluate(a);if(d<=b[0])return c[0].evaluate(a);var e=b.length;return d>=b[e-1]?c[e-1].evaluate(a):c[T(b,d)].evaluate(a)};gc.prototype.eachChild=function(a){a(this.input);for(var b=0,c=this.outputs;b<c.length;b+=1)a(c[b])};gc.prototype.possibleOutputs=function(){return(a=[]).concat.apply(a,this.outputs.map(function(a){return a.possibleOutputs()}));
var a};gc.prototype.serialize=function(){for(var a=["step",this.input.serialize()],b=0;b<this.labels.length;b++)0<b&&a.push(this.labels[b]),a.push(this.outputs[b].serialize());return a};var xc=Object.freeze({number:Y,color:function(a,b,c){return new tb(Y(a.r,b.r,c),Y(a.g,b.g,c),Y(a.b,b.b,c),Y(a.a,b.a,c))},array:function(a,b,c){return a.map(function(a,d){return Y(a,b[d],c)})}}),Ac=function(a,b,c,d){this.type=a;this.interpolation=b;this.input=c;this.labels=[];this.outputs=[];for(a=0;a<d.length;a+=1)b=
d[a],c=b[1],this.labels.push(b[0]),this.outputs.push(c)};Ac.interpolationFactor=function(a,b,c,d){var e=0;"exponential"===a.name?e=ia(b,a.base,c,d):"linear"===a.name?e=ia(b,1,c,d):"cubic-bezier"===a.name&&(a=a.controlPoints,e=(new Dc(a[0],a[1],a[2],a[3])).solve(ia(b,1,c,d)));return e};Ac.parse=function(a,b){var c=a[1],d=a[2],e=a.slice(3);if(!Array.isArray(c)||0===c.length)return b.error("Expected an interpolation type expression.",1);if("linear"===c[0])c={name:"linear"};else if("exponential"===c[0]){c=
c[1];if("number"!=typeof c)return b.error("Exponential interpolation requires a numeric base.",1,1);c={name:"exponential",base:c}}else{if("cubic-bezier"!==c[0])return b.error("Unknown interpolation type "+String(c[0]),1,0);c=c.slice(1);if(4!==c.length||c.some(function(a){return"number"!=typeof a||0>a||1<a}))return b.error("Cubic bezier interpolation requires four numeric arguments with values between 0 and 1.",1);c={name:"cubic-bezier",controlPoints:c}}if(4>a.length-1)return b.error("Expected at least 4 arguments, but found only "+
(a.length-1)+".");if(0!=(a.length-1)%2)return b.error("Expected an even number of arguments.");if(!(d=b.parse(d,2,Da)))return null;a=[];var g=null;b.expectedType&&"value"!==b.expectedType.kind&&(g=b.expectedType);for(var f=0;f<e.length;f+=2){var h=e[f],k=e[f+1],n=f+3,t=f+4;if("number"!=typeof h)return b.error('Input/output pairs for "interpolate" expressions must be defined using literal numeric values (not computed expressions) for the input values.',n);if(a.length&&a[a.length-1][0]>=h)return b.error('Input/output pairs for "interpolate" expressions must be arranged with input values in strictly ascending order.',
n);k=b.parse(k,t,g);if(!k)return null;g=g||k.type;a.push([h,k])}return"number"===g.kind||"color"===g.kind||"array"===g.kind&&"number"===g.itemType.kind&&"number"==typeof g.N?new Ac(g,c,d,a):b.error("Type "+Q(g)+" is not interpolatable.")};Ac.prototype.evaluate=function(a){var b=this.labels,c=this.outputs;if(1===b.length)return c[0].evaluate(a);var d=this.input.evaluate(a);if(d<=b[0])return c[0].evaluate(a);var e=b.length;if(d>=b[e-1])return c[e-1].evaluate(a);e=T(b,d);b=Ac.interpolationFactor(this.interpolation,
d,b[e],b[e+1]);d=c[e].evaluate(a);a=c[e+1].evaluate(a);return xc[this.type.kind.toLowerCase()](d,a,b)};Ac.prototype.eachChild=function(a){a(this.input);for(var b=0,c=this.outputs;b<c.length;b+=1)a(c[b])};Ac.prototype.possibleOutputs=function(){return(a=[]).concat.apply(a,this.outputs.map(function(a){return a.possibleOutputs()}));var a};Ac.prototype.serialize=function(){for(var a=["interpolate","linear"===this.interpolation.name?["linear"]:"exponential"===this.interpolation.name?1===this.interpolation.base?
["linear"]:["exponential",this.interpolation.base]:["cubic-bezier"].concat(this.interpolation.controlPoints),this.input.serialize()],b=0;b<this.labels.length;b++)a.push(this.labels[b],this.outputs[b].serialize());return a};var sd=function(a,b){this.type=a;this.args=b};sd.parse=function(a,b){if(2>a.length)return b.error("Expectected at least one argument.");var c=null,d=b.expectedType;d&&"value"!==d.kind&&(c=d);var e=[],g=0;for(a=a.slice(1);g<a.length;g+=1){var f=b.parse(a[g],1+e.length,c,void 0,{omitTypeAnnotations:!0});
if(!f)return null;c=c||f.type;e.push(f)}b=d&&e.some(function(a){return N(d,a.type)});return new sd(b?ub:c,e)};sd.prototype.evaluate=function(a){for(var b=null,c=0,d=this.args;c<d.length&&null===(b=d[c].evaluate(a));c+=1);return b};sd.prototype.eachChild=function(a){this.args.forEach(a)};sd.prototype.possibleOutputs=function(){return(a=[]).concat.apply(a,this.args.map(function(a){return a.possibleOutputs()}));var a};sd.prototype.serialize=function(){var a=["coalesce"];return this.eachChild(function(b){a.push(b.serialize())}),
a};var td=function(a,b){this.type=b.type;this.bindings=[].concat(a);this.result=b};td.prototype.evaluate=function(a){return this.result.evaluate(a)};td.prototype.eachChild=function(a){for(var b=0,c=this.bindings;b<c.length;b+=1)a(c[b][1]);a(this.result)};td.parse=function(a,b){if(4>a.length)return b.error("Expected at least 3 arguments, but found "+(a.length-1)+" instead.");for(var c=[],d=1;d<a.length-1;d+=2){var e=a[d];if("string"!=typeof e)return b.error("Expected string, but found "+typeof e+" instead.",
d);if(/[^a-zA-Z0-9_]/.test(e))return b.error("Variable names must contain only alphanumeric characters or '_'.",d);var g=b.parse(a[d+1],d+1);if(!g)return null;c.push([e,g])}return(a=b.parse(a[a.length-1],a.length-1,void 0,c))?new td(c,a):null};td.prototype.possibleOutputs=function(){return this.result.possibleOutputs()};td.prototype.serialize=function(){for(var a=["let"],b=0,c=this.bindings;b<c.length;b+=1){var d=c[b];a.push(d[0],d[1].serialize())}return a.push(this.result.serialize()),a};var ud=
function(a,b,c){this.type=a;this.index=b;this.input=c};ud.parse=function(a,b){if(3!==a.length)return b.error("Expected 2 arguments, but found "+(a.length-1)+" instead.");var c=b.parse(a[1],1,Da);a=b.parse(a[2],2,I(b.expectedType||ub));return c&&a?new ud(a.type.itemType,c,a):null};ud.prototype.evaluate=function(a){var b=this.index.evaluate(a);a=this.input.evaluate(a);if(0>b)throw new Ec("Array index out of bounds: "+b+" \x3c 0.");if(b>=a.length)throw new Ec("Array index out of bounds: "+b+" \x3e "+
(a.length-1)+".");if(b!==Math.floor(b))throw new Ec("Array index must be an integer, but found "+b+" instead.");return a[b]};ud.prototype.eachChild=function(a){a(this.index);a(this.input)};ud.prototype.possibleOutputs=function(){return[void 0]};ud.prototype.serialize=function(){return["at",this.index.serialize(),this.input.serialize()]};var qc=function(a,b,c,d,e,g){this.inputType=a;this.type=b;this.input=c;this.cases=d;this.outputs=e;this.otherwise=g};qc.parse=function(a,b){if(5>a.length)return b.error("Expected at least 4 arguments, but found only "+
(a.length-1)+".");if(1!=a.length%2)return b.error("Expected an even number of arguments.");var c;b.expectedType&&"value"!==b.expectedType.kind&&(c=b.expectedType);for(var d={},e=[],g=2;g<a.length-1;g+=2){var f=a[g],h=a[g+1];Array.isArray(f)||(f=[f]);var k=b.concat(g);if(0===f.length)return k.error("Expected at least one branch label.");for(var n=0;n<f.length;n+=1){var t=f[n];if("number"!=typeof t&&"string"!=typeof t)return k.error("Branch labels must be numbers or strings.");if("number"==typeof t&&
Math.abs(t)>Number.MAX_SAFE_INTEGER)return k.error("Branch labels must be integers no larger than "+Number.MAX_SAFE_INTEGER+".");if("number"==typeof t&&Math.floor(t)!==t)return k.error("Numeric branch labels must be integer values.");if(m){if(k.checkSubtype(m,R(t)))return null}else var m=R(t);if(void 0!==d[String(t)])return k.error("Branch labels must be unique.");d[String(t)]=e.length}h=b.parse(h,g,c);if(!h)return null;c=c||h.type;e.push(h)}g=b.parse(a[1],1,m);return g?(a=b.parse(a[a.length-1],a.length-
1,c))?new qc(m,c,g,d,e,a):null:null};qc.prototype.evaluate=function(a){var b=this.input.evaluate(a);return(this.outputs[this.cases[b]]||this.otherwise).evaluate(a)};qc.prototype.eachChild=function(a){a(this.input);this.outputs.forEach(a);a(this.otherwise)};qc.prototype.possibleOutputs=function(){return(a=[]).concat.apply(a,this.outputs.map(function(a){return a.possibleOutputs()})).concat(this.otherwise.possibleOutputs());var a};qc.prototype.serialize=function(){for(var a=this,b=["match",this.input.serialize()],
c=[],d={},e=0,g=Object.keys(this.cases).sort();e<g.length;e+=1){var f=g[e],h=d[a.cases[f]];void 0===h?(d[a.cases[f]]=c.length,c.push([a.cases[f],[f]])):c[h][1].push(f)}d=function(b){return"number"===a.input.type.kind?Number(b):b};for(e=0;e<c.length;e+=1)f=c[e],g=f[0],f=f[1],1===f.length?b.push(d(f[0])):b.push(f.map(d)),b.push(a.outputs[g].serialize());return b.push(this.otherwise.serialize()),b};var hd=function(a,b,c){this.type=a;this.branches=b;this.otherwise=c};hd.parse=function(a,b){if(4>a.length)return b.error("Expected at least 3 arguments, but found only "+
(a.length-1)+".");if(0!=a.length%2)return b.error("Expected an odd number of arguments.");var c;b.expectedType&&"value"!==b.expectedType.kind&&(c=b.expectedType);for(var d=[],e=1;e<a.length-1;e+=2){var g=b.parse(a[e],e,ob);if(!g)return null;var f=b.parse(a[e+1],e+1,c);if(!f)return null;d.push([g,f]);c=c||f.type}return(a=b.parse(a[a.length-1],a.length-1,c))?new hd(c,d,a):null};hd.prototype.evaluate=function(a){for(var b=0,c=this.branches;b<c.length;b+=1){var d=c[b],e=d[1];if(d[0].evaluate(a))return e.evaluate(a)}return this.otherwise.evaluate(a)};
hd.prototype.eachChild=function(a){for(var b=0,c=this.branches;b<c.length;b+=1){var d=c[b],e=d[1];a(d[0]);a(e)}a(this.otherwise)};hd.prototype.possibleOutputs=function(){return(a=[]).concat.apply(a,this.branches.map(function(a){a[0];return a[1].possibleOutputs()})).concat(this.otherwise.possibleOutputs());var a};hd.prototype.serialize=function(){var a=["case"];return this.eachChild(function(b){a.push(b.serialize())}),a};var og=z("\x3d\x3d",!1),kf=z("!\x3d",!0),nf=function(a){this.type=Da;this.input=
a};nf.parse=function(a,b){return 2!==a.length?b.error("Expected 1 argument, but found "+(a.length-1)+" instead."):(a=b.parse(a[1],1))?"array"!==a.type.kind&&"string"!==a.type.kind&&"value"!==a.type.kind?b.error("Expected argument of type string or array, but found "+Q(a.type)+" instead."):new nf(a):null};nf.prototype.evaluate=function(a){a=this.input.evaluate(a);if("string"==typeof a||Array.isArray(a))return a.length;throw new Ec("Expected value to be of type string or array, but found "+Q(R(a))+
" instead.");};nf.prototype.eachChild=function(a){a(this.input)};nf.prototype.possibleOutputs=function(){return[void 0]};nf.prototype.serialize=function(){var a=["length"];return this.eachChild(function(b){a.push(b.serialize())}),a};var Ic={"\x3d\x3d":og,"!\x3d":kf,array:Fc,at:ud,boolean:cc,case:hd,coalesce:sd,collator:nc,interpolate:Ac,length:nf,let:td,literal:Qb,match:qc,number:cc,object:cc,step:gc,string:cc,"to-color":Hd,"to-number":Hd,var:dd};Rb.register(Ic,{error:[{kind:"error"},[Za],function(a,
b){throw new Ec(b[0].evaluate(a));}],typeof:[Za,[ub],function(a,b){return Q(R(b[0].evaluate(a)))}],"to-string":[Za,[ub],function(a,b){b=b[0];a=typeof(b=b.evaluate(a));return null===b?"":"string"===a||"number"===a||"boolean"===a?String(b):b instanceof tb?b.toString():JSON.stringify(b)}],"to-boolean":[ob,[ub],function(a,b){return!!b[0].evaluate(a)}],"to-rgba":[I(Da,4),[$b],function(a,b){return b[0].evaluate(a).toArray()}],rgb:[$b,[Da,Da,Da],fa],rgba:[$b,[Da,Da,Da,Da],fa],has:{type:ob,overloads:[[[Za],
function(a,b){b=b[0].evaluate(a);a=a.properties();return b in a}],[[Za,fc],function(a,b){var c=b[1];b=b[0].evaluate(a);a=c.evaluate(a);return b in a}]]},get:{type:ub,overloads:[[[Za],function(a,b){return qa(b[0].evaluate(a),a.properties())}],[[Za,fc],function(a,b){var c=b[1];return qa(b[0].evaluate(a),c.evaluate(a))}]]},properties:[fc,[],function(a){return a.properties()}],"geometry-type":[Za,[],function(a){return a.geometryType()}],id:[ub,[],function(a){return a.id()}],zoom:[Da,[],function(a){return a.globals.zoom}],
"heatmap-density":[Da,[],function(a){return a.globals.heatmapDensity||0}],"line-progress":[Da,[],function(a){return a.globals.lineProgress||0}],"+":[Da,{type:Da},function(a,b){for(var c=0,d=0;d<b.length;d+=1)c+=b[d].evaluate(a);return c}],"*":[Da,{type:Da},function(a,b){for(var c=1,d=0;d<b.length;d+=1)c*=b[d].evaluate(a);return c}],"-":{type:Da,overloads:[[[Da,Da],function(a,b){var c=b[1];return b[0].evaluate(a)-c.evaluate(a)}],[[Da],function(a,b){return-b[0].evaluate(a)}]]},"/":[Da,[Da,Da],function(a,
b){var c=b[1];return b[0].evaluate(a)/c.evaluate(a)}],"%":[Da,[Da,Da],function(a,b){var c=b[1];return b[0].evaluate(a)%c.evaluate(a)}],ln2:[Da,[],function(){return Math.LN2}],pi:[Da,[],function(){return Math.PI}],e:[Da,[],function(){return Math.E}],"^":[Da,[Da,Da],function(a,b){var c=b[1];return Math.pow(b[0].evaluate(a),c.evaluate(a))}],sqrt:[Da,[Da],function(a,b){return Math.sqrt(b[0].evaluate(a))}],log10:[Da,[Da],function(a,b){return Math.log10(b[0].evaluate(a))}],ln:[Da,[Da],function(a,b){return Math.log(b[0].evaluate(a))}],
log2:[Da,[Da],function(a,b){return Math.log2(b[0].evaluate(a))}],sin:[Da,[Da],function(a,b){return Math.sin(b[0].evaluate(a))}],cos:[Da,[Da],function(a,b){return Math.cos(b[0].evaluate(a))}],tan:[Da,[Da],function(a,b){return Math.tan(b[0].evaluate(a))}],asin:[Da,[Da],function(a,b){return Math.asin(b[0].evaluate(a))}],acos:[Da,[Da],function(a,b){return Math.acos(b[0].evaluate(a))}],atan:[Da,[Da],function(a,b){return Math.atan(b[0].evaluate(a))}],min:[Da,{type:Da},function(a,b){return Math.min.apply(Math,
b.map(function(b){return b.evaluate(a)}))}],max:[Da,{type:Da},function(a,b){return Math.max.apply(Math,b.map(function(b){return b.evaluate(a)}))}],abs:[Da,[Da],function(a,b){return Math.abs(b[0].evaluate(a))}],round:[Da,[Da],function(a,b){a=b[0].evaluate(a);return 0>a?-Math.round(-a):Math.round(a)}],floor:[Da,[Da],function(a,b){return Math.floor(b[0].evaluate(a))}],ceil:[Da,[Da],function(a,b){return Math.ceil(b[0].evaluate(a))}],"filter-\x3d\x3d":[ob,[Za,ub],function(a,b){var c=b[0];b=b[1];return a.properties()[c.value]===
b.value}],"filter-id-\x3d\x3d":[ob,[ub],function(a,b){b=b[0];return a.id()===b.value}],"filter-type-\x3d\x3d":[ob,[Za],function(a,b){b=b[0];return a.geometryType()===b.value}],"filter-\x3c":[ob,[Za,ub],function(a,b){var c=b[0];b=b[1];a=a.properties()[c.value];c=b.value;return typeof a==typeof c&&a<c}],"filter-id-\x3c":[ob,[ub],function(a,b){b=b[0];a=a.id();b=b.value;return typeof a==typeof b&&a<b}],"filter-\x3e":[ob,[Za,ub],function(a,b){var c=b[0];b=b[1];a=a.properties()[c.value];c=b.value;return typeof a==
typeof c&&a>c}],"filter-id-\x3e":[ob,[ub],function(a,b){b=b[0];a=a.id();b=b.value;return typeof a==typeof b&&a>b}],"filter-\x3c\x3d":[ob,[Za,ub],function(a,b){var c=b[0];b=b[1];a=a.properties()[c.value];c=b.value;return typeof a==typeof c&&a<=c}],"filter-id-\x3c\x3d":[ob,[ub],function(a,b){b=b[0];a=a.id();b=b.value;return typeof a==typeof b&&a<=b}],"filter-\x3e\x3d":[ob,[Za,ub],function(a,b){var c=b[0];b=b[1];a=a.properties()[c.value];c=b.value;return typeof a==typeof c&&a>=c}],"filter-id-\x3e\x3d":[ob,
[ub],function(a,b){b=b[0];a=a.id();b=b.value;return typeof a==typeof b&&a>=b}],"filter-has":[ob,[ub],function(a,b){return b[0].value in a.properties()}],"filter-has-id":[ob,[],function(a){return null!==a.id()}],"filter-type-in":[ob,[I(Za)],function(a,b){return 0<=b[0].value.indexOf(a.geometryType())}],"filter-id-in":[ob,[I(ub)],function(a,b){return 0<=b[0].value.indexOf(a.id())}],"filter-in-small":[ob,[Za,I(ub)],function(a,b){var c=b[0];return 0<=b[1].value.indexOf(a.properties()[c.value])}],"filter-in-large":[ob,
[Za,I(ub)],function(a,b){var c=b[0];b=b[1];a:{a=a.properties()[c.value];c=b.value;var d=0;for(b=b.value.length-1;d<=b;){var e=d+b>>1;if(c[e]===a){b=!0;break a}c[e]>a?b=e-1:d=e+1}b=!1}return b}],"\x3e":{type:ob,overloads:[[[Da,Da],ea],[[Za,Za],ea],[[Za,Za,Pb],function(a,b){var c=b[0],d=b[1];return 0<b[2].evaluate(a).compare(c.evaluate(a),d.evaluate(a))}]]},"\x3c":{type:ob,overloads:[[[Da,Da],ha],[[Za,Za],ha],[[Za,Za,Pb],function(a,b){var c=b[0],d=b[1];return 0>b[2].evaluate(a).compare(c.evaluate(a),
d.evaluate(a))}]]},"\x3e\x3d":{type:ob,overloads:[[[Da,Da],la],[[Za,Za],la],[[Za,Za,Pb],function(a,b){var c=b[0],d=b[1];return 0<=b[2].evaluate(a).compare(c.evaluate(a),d.evaluate(a))}]]},"\x3c\x3d":{type:ob,overloads:[[[Da,Da],ba],[[Za,Za],ba],[[Za,Za,Pb],function(a,b){var c=b[0],d=b[1];return 0>=b[2].evaluate(a).compare(c.evaluate(a),d.evaluate(a))}]]},all:{type:ob,overloads:[[[ob,ob],function(a,b){var c=b[1];return b[0].evaluate(a)&&c.evaluate(a)}],[{type:ob},function(a,b){for(var c=0;c<b.length;c+=
1)if(!b[c].evaluate(a))return!1;return!0}]]},any:{type:ob,overloads:[[[ob,ob],function(a,b){var c=b[1];return b[0].evaluate(a)||c.evaluate(a)}],[{type:ob},function(a,b){for(var c=0;c<b.length;c+=1)if(b[c].evaluate(a))return!0;return!1}]]},"!":[ob,[ob],function(a,b){return!b[0].evaluate(a)}],"is-supported-script":[ob,[Za],function(a,b){b=b[0];var c=a.globals&&a.globals.isSupportedScript;return!c||c(b.evaluate(a))}],upcase:[Za,[Za],function(a,b){return b[0].evaluate(a).toUpperCase()}],downcase:[Za,
[Za],function(a,b){return b[0].evaluate(a).toLowerCase()}],concat:[Za,{type:Za},function(a,b){return b.map(function(b){return b.evaluate(a)}).join("")}],"resolved-locale":[Za,[Pb],function(a,b){return b[0].evaluate(a).resolvedLocale()}]});var Dg=4/29,ed=6/29,Eh=3*ed*ed,th=ed*ed*ed,Se=Math.PI/180,Cg=180/Math.PI,cd=Object.freeze({lab:{forward:xa,reverse:za,interpolate:function(a,b,c){return{l:Y(a.l,b.l,c),a:Y(a.a,b.a,c),b:Y(a.b,b.b,c),alpha:Y(a.alpha,b.alpha,c)}}},hcl:{forward:function(a){var b=xa(a),
c=b.a,d=b.b,e=Math.atan2(d,c)*Cg;return{h:0>e?e+360:e,c:Math.sqrt(c*c+d*d),l:b.l,alpha:a.a}},reverse:function(a){var b=a.h*Se,c=a.c;return za({l:a.l,a:Math.cos(b)*c,b:Math.sin(b)*c,alpha:a.alpha})},interpolate:function(a,b,c){var d=a.h,e=b.h-d;return{h:d+c*(180<e||-180>e?e-360*Math.round(e/360):e),c:Y(a.c,b.c,c),l:Y(a.l,b.l,c),alpha:Y(a.alpha,b.alpha,c)}}}}),Hf=function(a,b){this.expression=a;this._warningHistory={};this._defaultValue="color"===b.type&&wa(b.default)?new tb(0,0,0,0):"color"===b.type?
tb.parse(b.default)||null:void 0===b.default?null:b.default;"enum"===b.type&&(this._enumValues=b.values)};Hf.prototype.evaluateWithoutErrorHandling=function(a,b){return this._evaluator||(this._evaluator=new Mc),this._evaluator.globals=a,this._evaluator.feature=b,this.expression.evaluate(this._evaluator)};Hf.prototype.evaluate=function(a,b){this._evaluator||(this._evaluator=new Mc);this._evaluator.globals=a;this._evaluator.feature=b;try{var c=this.expression.evaluate(this._evaluator);if(null==c)return this._defaultValue;
if(this._enumValues&&!(c in this._enumValues))throw new Ec("Expected value to be one of "+Object.keys(this._enumValues).map(function(a){return JSON.stringify(a)}).join(", ")+", but found "+JSON.stringify(c)+" instead.");return c}catch(wd){return this._warningHistory[wd.message]||(this._warningHistory[wd.message]=!0,"undefined"!=typeof console&&console.warn(wd.message)),this._defaultValue}};var pg=function(a,b){this.kind=a;this._styleExpression=b};pg.prototype.evaluateWithoutErrorHandling=function(a,
b){return this._styleExpression.evaluateWithoutErrorHandling(a,b)};pg.prototype.evaluate=function(a,b){return this._styleExpression.evaluate(a,b)};var ag=function(a,b,c){this.kind=a;this.zoomStops=c.labels;this._styleExpression=b;c instanceof Ac&&(this._interpolationType=c.interpolation)};ag.prototype.evaluateWithoutErrorHandling=function(a,b){return this._styleExpression.evaluateWithoutErrorHandling(a,b)};ag.prototype.evaluate=function(a,b){return this._styleExpression.evaluate(a,b)};ag.prototype.interpolationFactor=
function(a,b,c){return this._interpolationType?Ac.interpolationFactor(this._interpolationType,a,b,c):0};var Yg=function(a,b){this._parameters=a;this._specification=b;H(this,function Sc(a,b){var c=a.stops&&"object"==typeof a.stops[0][0],d=c||void 0!==a.property;d=c||!d;var e=a.type||("interpolated"===b.function?"exponential":"interval");if("color"===b.type&&((a=H({},a)).stops&&(a.stops=a.stops.map(function(a){return[a[0],tb.parse(a[1])]})),a.default?a.default=tb.parse(a.default):a.default=tb.parse(b.default)),
a.colorSpace&&"rgb"!==a.colorSpace&&!cd[a.colorSpace])throw Error("Unknown color space: "+a.colorSpace);if("exponential"===e)var g=va;else if("interval"===e)g=Aa;else if("categorical"===e){g=ma;var f=Object.create(null);for(var h=0,k=a.stops;h<k.length;h+=1){var n=k[h];f[n[0]]=n[1]}var t=typeof a.stops[0][0]}else{if("identity"!==e)throw Error('Unknown function type "'+e+'"');g=sa}if(c){c={};d=[];for(e=0;e<a.stops.length;e++)h=a.stops[e],k=h[0].zoom,void 0===c[k]&&(c[k]={zoom:k,type:a.type,property:a.property,
default:a.default,stops:[]},d.push(k)),c[k].stops.push([h[0].value,h[1]]);var m=[];for(e=0;e<d.length;e+=1)h=d[e],m.push([c[h].zoom,Sc(c[h],b)]);return{kind:"composite",interpolationFactor:Ac.interpolationFactor.bind(void 0,{name:"linear"}),zoomStops:m.map(function(a){return a[0]}),evaluate:function(c,d){c=c.zoom;return va({stops:m,base:a.base},b,c).evaluate(c,d)}}}return d?{kind:"camera",interpolationFactor:"exponential"===e?Ac.interpolationFactor.bind(void 0,{name:"exponential",base:void 0!==a.base?
a.base:1}):function(){return 0},zoomStops:a.stops.map(function(a){return a[0]}),evaluate:function(c){return g(a,b,c.zoom,f,t)}}:{kind:"source",evaluate:function(c,d){c=d&&d.properties?d.properties[a.property]:void 0;return void 0===c?aa(a.default,b.default):g(a,b,c,f,t)}}}(this._parameters,this._specification))};Yg.deserialize=function(a){return new Yg(a._parameters,a._specification)};Yg.serialize=function(a){return{_parameters:a._parameters,_specification:a._specification}};var mf={type:"boolean",
default:!1,function:!0,"property-function":!0,"zoom-function":!0},Fh={"*":function(){return[]},array:ua,boolean:function(a){var b=a.value;a=a.key;var c=ka(b);return"boolean"!==c?[new La(a,b,"boolean expected, "+c+" found")]:[]},number:Fa,color:function(a){var b=a.key;a=a.value;var c=ka(a);return"string"!==c?[new La(b,a,"color expected, "+c+" found")]:null===Xb(a)?[new La(b,a,'color expected, "'+a+'" found')]:[]},constants:E,enum:Ba,filter:$a,function:X,layer:Hb,object:na,source:pb,light:Ra,string:Jb};
kb.source=Kb(pb);kb.light=Kb(Ra);kb.layer=Kb(Hb);kb.filter=Kb($a);kb.paintProperty=Kb(mb);kb.layoutProperty=Kb(cb);var uh=kb.light,Eg=kb.paintProperty,Xg=kb.layoutProperty,Kf=3;Va.prototype.insert=function(a,b,c,d,e){this._forEachCell(b,c,d,e,this._insertCell,this.uid++);this.keys.push(a);this.bboxes.push(b);this.bboxes.push(c);this.bboxes.push(d);this.bboxes.push(e)};Va.prototype._insertReadonly=function(){throw"Cannot insert into a GridIndex created from an ArrayBuffer.";};Va.prototype._insertCell=
function(a,b,c,d,e,g){this.cells[e].push(g)};Va.prototype.query=function(a,b,c,d){var e=this.min,g=this.max;if(a<=e&&b<=e&&g<=c&&g<=d)return Array.prototype.slice.call(this.keys);e=[];return this._forEachCell(a,b,c,d,this._queryCell,e,{}),e};Va.prototype._queryCell=function(a,b,c,d,e,g,f){e=this.cells[e];if(null!==e)for(var h=this.keys,k=this.bboxes,n=0;n<e.length;n++){var t=e[n];if(void 0===f[t]){var m=4*t;a<=k[m+2]&&b<=k[m+3]&&c>=k[m+0]&&d>=k[m+1]?(f[t]=!0,g.push(h[t])):f[t]=!1}}};Va.prototype._forEachCell=
function(a,b,c,d,e,g,f){for(var h=this._convertToCellCoord(a),k=this._convertToCellCoord(b),n=this._convertToCellCoord(c),t=this._convertToCellCoord(d);h<=n;h++)for(var m=k;m<=t;m++)if(e.call(this,a,b,c,d,this.d*m+h,g,f))return};Va.prototype._convertToCellCoord=function(a){return Math.max(0,Math.min(this.d-1,Math.floor(a*this.scale)+this.padding))};Va.prototype.toArrayBuffer=function(){if(this.arrayBuffer)return this.arrayBuffer;for(var a=this.cells,b=Kf+this.cells.length+1+1,c=0,d=0;d<this.cells.length;d++)c+=
this.cells[d].length;c=new Int32Array(b+c+this.keys.length+this.bboxes.length);c[0]=this.extent;c[1]=this.n;c[2]=this.padding;for(d=0;d<a.length;d++){var e=a[d];c[Kf+d]=b;c.set(e,b);b+=e.length}return c[Kf+a.length]=b,c.set(this.keys,b),b+=this.keys.length,c[Kf+a.length+1]=b,c.set(this.bboxes,b),c.buffer};var Hh=self.ImageData,Fg={},$g;for($g in Ha("Object",Object),Va.serialize=function(a,b){a=a.toArrayBuffer();return b&&b.push(a),a},Va.deserialize=function(a){return new Va(a)},Ha("Grid",Va),Ha("Color",
tb),Ha("Error",Error),Ha("StylePropertyFunction",Yg),Ha("StyleExpression",Hf,{omit:["_evaluator"]}),Ha("ZoomDependentExpression",ag),Ha("ZoomConstantExpression",pg),Ha("CompoundExpression",Rb,{omit:["_evaluate"]}),Ic)Ic[$g]._classRegistryKey||Ha("Expression_"+$g,Ic[$g]);var Gg=function(){this.first=!0};Gg.prototype.update=function(a,b){var c=Math.floor(a);return this.first?(this.first=!1,this.lastIntegerZoom=c,this.lastIntegerZoomTime=0,this.lastZoom=a,this.lastFloorZoom=c,!0):(this.lastFloorZoom>
c?(this.lastIntegerZoom=c+1,this.lastIntegerZoomTime=b):this.lastFloorZoom<c&&(this.lastIntegerZoom=c,this.lastIntegerZoomTime=b),a!==this.lastZoom&&(this.lastZoom=a,this.lastFloorZoom=c,!0))};var Qa={"Latin-1 Supplement":function(a){return 128<=a&&255>=a},Arabic:function(a){return 1536<=a&&1791>=a},"Arabic Supplement":function(a){return 1872<=a&&1919>=a},"Arabic Extended-A":function(a){return 2208<=a&&2303>=a},"Hangul Jamo":function(a){return 4352<=a&&4607>=a},"Unified Canadian Aboriginal Syllabics":function(a){return 5120<=
a&&5759>=a},Khmer:function(a){return 6016<=a&&6143>=a},"Unified Canadian Aboriginal Syllabics Extended":function(a){return 6320<=a&&6399>=a},"General Punctuation":function(a){return 8192<=a&&8303>=a},"Letterlike Symbols":function(a){return 8448<=a&&8527>=a},"Number Forms":function(a){return 8528<=a&&8591>=a},"Miscellaneous Technical":function(a){return 8960<=a&&9215>=a},"Control Pictures":function(a){return 9216<=a&&9279>=a},"Optical Character Recognition":function(a){return 9280<=a&&9311>=a},"Enclosed Alphanumerics":function(a){return 9312<=
a&&9471>=a},"Geometric Shapes":function(a){return 9632<=a&&9727>=a},"Miscellaneous Symbols":function(a){return 9728<=a&&9983>=a},"Miscellaneous Symbols and Arrows":function(a){return 11008<=a&&11263>=a},"CJK Radicals Supplement":function(a){return 11904<=a&&12031>=a},"Kangxi Radicals":function(a){return 12032<=a&&12255>=a},"Ideographic Description Characters":function(a){return 12272<=a&&12287>=a},"CJK Symbols and Punctuation":function(a){return 12288<=a&&12351>=a},Hiragana:function(a){return 12352<=
a&&12447>=a},Katakana:function(a){return 12448<=a&&12543>=a},Bopomofo:function(a){return 12544<=a&&12591>=a},"Hangul Compatibility Jamo":function(a){return 12592<=a&&12687>=a},Kanbun:function(a){return 12688<=a&&12703>=a},"Bopomofo Extended":function(a){return 12704<=a&&12735>=a},"CJK Strokes":function(a){return 12736<=a&&12783>=a},"Katakana Phonetic Extensions":function(a){return 12784<=a&&12799>=a},"Enclosed CJK Letters and Months":function(a){return 12800<=a&&13055>=a},"CJK Compatibility":function(a){return 13056<=
a&&13311>=a},"CJK Unified Ideographs Extension A":function(a){return 13312<=a&&19903>=a},"Yijing Hexagram Symbols":function(a){return 19904<=a&&19967>=a},"CJK Unified Ideographs":function(a){return 19968<=a&&40959>=a},"Yi Syllables":function(a){return 40960<=a&&42127>=a},"Yi Radicals":function(a){return 42128<=a&&42191>=a},"Hangul Jamo Extended-A":function(a){return 43360<=a&&43391>=a},"Hangul Syllables":function(a){return 44032<=a&&55215>=a},"Hangul Jamo Extended-B":function(a){return 55216<=a&&
55295>=a},"Private Use Area":function(a){return 57344<=a&&63743>=a},"CJK Compatibility Ideographs":function(a){return 63744<=a&&64255>=a},"Arabic Presentation Forms-A":function(a){return 64336<=a&&65023>=a},"Vertical Forms":function(a){return 65040<=a&&65055>=a},"CJK Compatibility Forms":function(a){return 65072<=a&&65103>=a},"Small Form Variants":function(a){return 65104<=a&&65135>=a},"Arabic Presentation Forms-B":function(a){return 65136<=a&&65279>=a},"Halfwidth and Fullwidth Forms":function(a){return 65280<=
a&&65519>=a}},Ih,Lf=!1,Ue=null,pf=!1,Mf=new Kc,Hg={applyArabicShaping:null,processBidirectionalText:null,isLoaded:function(){return pf||null!=Hg.applyArabicShaping}},Bc=function(a,b){this.zoom=a;b?(this.now=b.now,this.fadeDuration=b.fadeDuration,this.zoomHistory=b.zoomHistory,this.transition=b.transition):(this.now=0,this.fadeDuration=0,this.zoomHistory=new Gg,this.transition={})};Bc.prototype.isSupportedScript=function(a){a:{for(var b=Hg.isLoaded(),c=0;c<a.length;c+=1){var d=a[c].charCodeAt(0);if(!b&&
(1424<=d&&2303>=d||Qa["Arabic Presentation Forms-A"](d)||Qa["Arabic Presentation Forms-B"](d))||2304<=d&&3583>=d||3840<=d&&4255>=d||Qa.Khmer(d)){a=!1;break a}}a=!0}return a};Bc.prototype.crossFadingFactor=function(){return 0===this.fadeDuration?1:Math.min((this.now-this.zoomHistory.lastIntegerZoomTime)/this.fadeDuration,1)};var dg=function(a,b){this.property=a;this.value=b;this.expression=Ea(void 0===b?a.specification.default:b,a.specification)};dg.prototype.isDataDriven=function(){return"source"===
this.expression.kind||"composite"===this.expression.kind};dg.prototype.possiblyEvaluate=function(a){return this.property.possiblyEvaluate(this,a)};var wf=function(a){this.property=a;this.value=new dg(a,void 0)};wf.prototype.transitioned=function(a,b){return new hc(this.property,this.value,b,k({},a.transition,this.transition),a.now)};wf.prototype.untransitioned=function(){return new hc(this.property,this.value,null,{},0)};var rc=function(a){this._properties=a;this._values=Object.create(a.defaultTransitionablePropertyValues)};
rc.prototype.getValue=function(a){return q(this._values[a].value.value)};rc.prototype.setValue=function(a,b){this._values.hasOwnProperty(a)||(this._values[a]=new wf(this._values[a].property));this._values[a].value=new dg(this._values[a].property,null===b?void 0:q(b))};rc.prototype.getTransition=function(a){return q(this._values[a].transition)};rc.prototype.setTransition=function(a,b){this._values.hasOwnProperty(a)||(this._values[a]=new wf(this._values[a].property));this._values[a].transition=q(b)||
void 0};rc.prototype.serialize=function(){for(var a={},b=0,c=Object.keys(this._values);b<c.length;b+=1){var d=c[b],e=this.getValue(d);void 0!==e&&(a[d]=e);e=this.getTransition(d);void 0!==e&&(a[d+"-transition"]=e)}return a};rc.prototype.transitioned=function(a,b){for(var c=new Ie(this._properties),d=0,e=Object.keys(this._values);d<e.length;d+=1){var g=e[d];c._values[g]=this._values[g].transitioned(a,b._values[g])}return c};rc.prototype.untransitioned=function(){for(var a=new Ie(this._properties),
b=0,c=Object.keys(this._values);b<c.length;b+=1){var d=c[b];a._values[d]=this._values[d].untransitioned()}return a};var hc=function(a,b,c,d,e){this.property=a;this.value=b;this.begin=e+d.delay||0;this.end=this.begin+d.duration||0;a.specification.transition&&(d.delay||d.duration)&&(this.prior=c)};hc.prototype.possiblyEvaluate=function(a){var b=a.now||0,c=this.value.possiblyEvaluate(a),d=this.prior;if(d){if(b>this.end||this.value.isDataDriven())return this.prior=null,c;if(b<this.begin)return d.possiblyEvaluate(a);
b=(b-this.begin)/(this.end-this.begin);return this.property.interpolate(d.possiblyEvaluate(a),c,function(a){if(0>=a)return 0;if(1<=a)return 1;var b=a*a,c=b*a;return 4*(.5>a?c:3*(a-b)+c-.75)}(b))}return c};var Ie=function(a){this._properties=a;this._values=Object.create(a.defaultTransitioningPropertyValues)};Ie.prototype.possiblyEvaluate=function(a){for(var b=new eg(this._properties),c=0,d=Object.keys(this._values);c<d.length;c+=1){var e=d[c];b._values[e]=this._values[e].possiblyEvaluate(a)}return b};
Ie.prototype.hasTransition=function(){for(var a=0,b=Object.keys(this._values);a<b.length;a+=1)if(this._values[b[a]].prior)return!0;return!1};var Qf=function(a){this._properties=a;this._values=Object.create(a.defaultPropertyValues)};Qf.prototype.getValue=function(a){return q(this._values[a].value)};Qf.prototype.setValue=function(a,b){this._values[a]=new dg(this._values[a].property,null===b?void 0:q(b))};Qf.prototype.serialize=function(){for(var a={},b=0,c=Object.keys(this._values);b<c.length;b+=1){var d=
c[b],e=this.getValue(d);void 0!==e&&(a[d]=e)}return a};Qf.prototype.possiblyEvaluate=function(a){for(var b=new eg(this._properties),c=0,d=Object.keys(this._values);c<d.length;c+=1){var e=d[c];b._values[e]=this._values[e].possiblyEvaluate(a)}return b};var Je=function(a,b,c){this.property=a;this.value=b;this.globals=c};Je.prototype.isConstant=function(){return"constant"===this.value.kind};Je.prototype.constantOr=function(a){return"constant"===this.value.kind?this.value.value:a};Je.prototype.evaluate=
function(a){return this.property.evaluate(this.value,this.globals,a)};var eg=function(a){this._properties=a;this._values=Object.create(a.defaultPossiblyEvaluatedValues)};eg.prototype.get=function(a){return this._values[a]};var bb=function(a){this.specification=a};bb.prototype.possiblyEvaluate=function(a,b){return a.expression.evaluate(b)};bb.prototype.interpolate=function(a,b,c){var d=xc[this.specification.type];return d?d(a,b,c):a};var fb=function(a){this.specification=a};fb.prototype.possiblyEvaluate=
function(a,b){return"constant"===a.expression.kind||"camera"===a.expression.kind?new Je(this,{kind:"constant",value:a.expression.evaluate(b)},b):new Je(this,a.expression,b)};fb.prototype.interpolate=function(a,b,c){if("constant"!==a.value.kind||"constant"!==b.value.kind)return a;if(void 0===a.value.value||void 0===b.value.value)return new Je(this,{kind:"constant",value:void 0},a.globals);var d=xc[this.specification.type];return d?new Je(this,{kind:"constant",value:d(a.value.value,b.value.value,c)},
a.globals):a};fb.prototype.evaluate=function(a,b,c){return"constant"===a.kind?a.value:a.evaluate(b,c)};var Jd=function(a){this.specification=a};Jd.prototype.possiblyEvaluate=function(a,b){if(void 0!==a.value)return"constant"===a.expression.kind?(a=a.expression.evaluate(b),this._calculate(a,a,a,b)):this._calculate(a.expression.evaluate(new Bc(Math.floor(b.zoom-1),b)),a.expression.evaluate(new Bc(Math.floor(b.zoom),b)),a.expression.evaluate(new Bc(Math.floor(b.zoom+1),b)),b)};Jd.prototype._calculate=
function(a,b,c,d){var e=d.zoom,g=e-Math.floor(e),f=d.crossFadingFactor();return e>d.zoomHistory.lastIntegerZoom?{from:a,to:b,fromScale:2,toScale:1,t:g+(1-g)*f}:{from:c,to:b,fromScale:.5,toScale:1,t:1-(1-f)*g}};Jd.prototype.interpolate=function(a){return a};var ie=function(a){this.specification=a};ie.prototype.possiblyEvaluate=function(a,b){return!!a.expression.evaluate(b)};ie.prototype.interpolate=function(){return!1};var jd=function(a){for(var b in this.properties=a,this.defaultPropertyValues={},
this.defaultTransitionablePropertyValues={},this.defaultTransitioningPropertyValues={},this.defaultPossiblyEvaluatedValues={},a){var c=a[b],d=this.defaultPropertyValues[b]=new dg(c,void 0);c=this.defaultTransitionablePropertyValues[b]=new wf(c);this.defaultTransitioningPropertyValues[b]=c.untransitioned();this.defaultPossiblyEvaluatedValues[b]=d.possiblyEvaluate({})}};Ha("DataDrivenProperty",fb);Ha("DataConstantProperty",bb);Ha("CrossFadedProperty",Jd);Ha("ColorRampProperty",ie);var Kd=function(a){function b(b,
c){for(var d in a.call(this),this.id=b.id,this.metadata=b.metadata,this.type=b.type,this.minzoom=b.minzoom,this.maxzoom=b.maxzoom,this.visibility="visible","background"!==b.type&&(this.source=b.source,this.sourceLayer=b["source-layer"],this.filter=b.filter),this._featureFilter=function(){return!0},c.layout&&(this._unevaluatedLayout=new Qf(c.layout)),this._transitionablePaint=new rc(c.paint),b.paint)this.setPaintProperty(d,b.paint[d],{validate:!1});for(var e in b.layout)this.setLayoutProperty(e,b.layout[e],
{validate:!1});this._transitioningPaint=this._transitionablePaint.untransitioned()}return a&&(b.__proto__=a),b.prototype=Object.create(a&&a.prototype),b.prototype.constructor=b,b.prototype.getLayoutProperty=function(a){return"visibility"===a?this.visibility:this._unevaluatedLayout.getValue(a)},b.prototype.setLayoutProperty=function(a,b,c){null!=b&&this._validate(Xg,"layers."+this.id+".layout."+a,a,b,c)||("visibility"!==a?this._unevaluatedLayout.setValue(a,b):this.visibility="none"===b?b:"visible")},
b.prototype.getPaintProperty=function(a){return m(a,"-transition")?this._transitionablePaint.getTransition(a.slice(0,-11)):this._transitionablePaint.getValue(a)},b.prototype.setPaintProperty=function(a,b,c){null!=b&&this._validate(Eg,"layers."+this.id+".paint."+a,a,b,c)||(m(a,"-transition")?this._transitionablePaint.setTransition(a.slice(0,-11),b||void 0):this._transitionablePaint.setValue(a,b))},b.prototype.isHidden=function(a){return!!(this.minzoom&&a<this.minzoom)||!!(this.maxzoom&&a>=this.maxzoom)||
"none"===this.visibility},b.prototype.updateTransitions=function(a){this._transitioningPaint=this._transitionablePaint.transitioned(a,this._transitioningPaint)},b.prototype.hasTransition=function(){return this._transitioningPaint.hasTransition()},b.prototype.recalculate=function(a){this._unevaluatedLayout&&(this.layout=this._unevaluatedLayout.possiblyEvaluate(a));this.paint=this._transitioningPaint.possiblyEvaluate(a)},b.prototype.serialize=function(){var a={id:this.id,type:this.type,source:this.source,
"source-layer":this.sourceLayer,metadata:this.metadata,minzoom:this.minzoom,maxzoom:this.maxzoom,filter:this.filter,layout:this._unevaluatedLayout&&this._unevaluatedLayout.serialize(),paint:this._transitionablePaint&&this._transitionablePaint.serialize()};return"none"===this.visibility&&(a.layout=a.layout||{},a.layout.visibility="none"),p(a,function(a,b){return!(void 0===a||"layout"===b&&!Object.keys(a).length||"paint"===b&&!Object.keys(a).length)})},b.prototype._validate=function(a,b,c,d,e){return(!e||
!1!==e.validate)&&Oa(this,a.call(kb,{key:b,layerType:this.type,objectKey:c,value:d,styleSpec:ra,style:{glyphs:!0,sprite:!0}}))},b.prototype.hasOffscreenPass=function(){return!1},b.prototype.resize=function(){},b}(Kc),sg={Int8:Int8Array,Uint8:Uint8Array,Int16:Int16Array,Uint16:Uint16Array,Int32:Int32Array,Uint32:Uint32Array,Float32:Float32Array},Rf=function(a,b){this._structArray=a;this._pos1=b*this.size;this._pos2=this._pos1/2;this._pos4=this._pos1/4;this._pos8=this._pos1/8},jc=function(){this.isTransferred=
!1;this.capacity=-1;this.resize(0)};jc.serialize=function(a,b){return a._trim(),b&&(a.isTransferred=!0,b.push(a.arrayBuffer)),{length:a.length,arrayBuffer:a.arrayBuffer}};jc.deserialize=function(a){var b=Object.create(this.prototype);return b.arrayBuffer=a.arrayBuffer,b.length=a.length,b.capacity=a.arrayBuffer.byteLength/b.bytesPerElement,b._refreshViews(),b};jc.prototype._trim=function(){this.length!==this.capacity&&(this.capacity=this.length,this.arrayBuffer=this.arrayBuffer.slice(0,this.length*
this.bytesPerElement),this._refreshViews())};jc.prototype.clear=function(){this.length=0};jc.prototype.resize=function(a){this.reserve(a);this.length=a};jc.prototype.reserve=function(a){a>this.capacity&&(this.capacity=Math.max(a,Math.floor(5*this.capacity),128),this.arrayBuffer=new ArrayBuffer(this.capacity*this.bytesPerElement),a=this.uint8,this._refreshViews(),a&&this.uint8.set(a))};jc.prototype._refreshViews=function(){throw Error("_refreshViews() must be implemented by each concrete StructArray layout");
};var fg=function(a){function b(){a.apply(this,arguments)}return a&&(b.__proto__=a),b.prototype=Object.create(a&&a.prototype),b.prototype.constructor=b,b.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer);this.int16=new Int16Array(this.arrayBuffer)},b.prototype.emplaceBack=function(a,b){var c=this.length;this.resize(c+1);var d=2*c;return this.int16[d+0]=a,this.int16[d+1]=b,c},b}(jc);fg.prototype.bytesPerElement=4;Ha("StructArrayLayout2i4",fg);var rf=function(a){function b(){a.apply(this,
arguments)}return a&&(b.__proto__=a),b.prototype=Object.create(a&&a.prototype),b.prototype.constructor=b,b.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer);this.int16=new Int16Array(this.arrayBuffer)},b.prototype.emplaceBack=function(a,b,c,d){var e=this.length;this.resize(e+1);var g=4*e;return this.int16[g+0]=a,this.int16[g+1]=b,this.int16[g+2]=c,this.int16[g+3]=d,e},b}(jc);rf.prototype.bytesPerElement=8;Ha("StructArrayLayout4i8",rf);var Ig=function(a){function b(){a.apply(this,
arguments)}return a&&(b.__proto__=a),b.prototype=Object.create(a&&a.prototype),b.prototype.constructor=b,b.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer);this.int16=new Int16Array(this.arrayBuffer)},b.prototype.emplaceBack=function(a,b,c,d,e,g){var f=this.length;this.resize(f+1);var h=6*f;return this.int16[h+0]=a,this.int16[h+1]=b,this.int16[h+2]=c,this.int16[h+3]=d,this.int16[h+4]=e,this.int16[h+5]=g,f},b}(jc);Ig.prototype.bytesPerElement=12;Ha("StructArrayLayout2i4i12",
Ig);var Ve=function(a){function b(){a.apply(this,arguments)}return a&&(b.__proto__=a),b.prototype=Object.create(a&&a.prototype),b.prototype.constructor=b,b.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer);this.int16=new Int16Array(this.arrayBuffer)},b.prototype.emplaceBack=function(a,b,c,d,e,g,f,h){var k=this.length;this.resize(k+1);var n=6*k,t=12*k;return this.int16[n+0]=a,this.int16[n+1]=b,this.int16[n+2]=c,this.int16[n+3]=d,this.uint8[t+8]=e,this.uint8[t+9]=g,this.uint8[t+
10]=f,this.uint8[t+11]=h,k},b}(jc);Ve.prototype.bytesPerElement=12;Ha("StructArrayLayout4i4ub12",Ve);var je=function(a){function b(){a.apply(this,arguments)}return a&&(b.__proto__=a),b.prototype=Object.create(a&&a.prototype),b.prototype.constructor=b,b.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer);this.int16=new Int16Array(this.arrayBuffer);this.uint16=new Uint16Array(this.arrayBuffer)},b.prototype.emplaceBack=function(a,b,c,d,e,g,f,h){var k=this.length;this.resize(k+
1);var n=8*k;return this.int16[n+0]=a,this.int16[n+1]=b,this.int16[n+2]=c,this.int16[n+3]=d,this.uint16[n+4]=e,this.uint16[n+5]=g,this.uint16[n+6]=f,this.uint16[n+7]=h,k},b}(jc);je.prototype.bytesPerElement=16;Ha("StructArrayLayout4i4ui16",je);var sf=function(a){function b(){a.apply(this,arguments)}return a&&(b.__proto__=a),b.prototype=Object.create(a&&a.prototype),b.prototype.constructor=b,b.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer);this.float32=new Float32Array(this.arrayBuffer)},
b.prototype.emplaceBack=function(a,b,c){var d=this.length;this.resize(d+1);var e=3*d;return this.float32[e+0]=a,this.float32[e+1]=b,this.float32[e+2]=c,d},b}(jc);sf.prototype.bytesPerElement=12;Ha("StructArrayLayout3f12",sf);var Ye=function(a){function b(){a.apply(this,arguments)}return a&&(b.__proto__=a),b.prototype=Object.create(a&&a.prototype),b.prototype.constructor=b,b.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer);this.uint32=new Uint32Array(this.arrayBuffer)},
b.prototype.emplaceBack=function(a){var b=this.length;this.resize(b+1);return this.uint32[1*b]=a,b},b}(jc);Ye.prototype.bytesPerElement=4;Ha("StructArrayLayout1ul4",Ye);var tf=function(a){function b(){a.apply(this,arguments)}return a&&(b.__proto__=a),b.prototype=Object.create(a&&a.prototype),b.prototype.constructor=b,b.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer);this.int16=new Int16Array(this.arrayBuffer);this.uint32=new Uint32Array(this.arrayBuffer);this.uint16=
new Uint16Array(this.arrayBuffer)},b.prototype.emplaceBack=function(a,b,c,d,e,g,f,h,k,n,t){var m=this.length;this.resize(m+1);var v=12*m;return this.int16[v+0]=a,this.int16[v+1]=b,this.int16[v+2]=c,this.int16[v+3]=d,this.int16[v+4]=e,this.int16[v+5]=g,this.uint32[6*m+3]=f,this.uint16[v+8]=h,this.uint16[v+9]=k,this.int16[v+10]=n,this.int16[v+11]=t,m},b}(jc);tf.prototype.bytesPerElement=24;Ha("StructArrayLayout6i1ul2ui2i24",tf);var gg=function(a){function b(){a.apply(this,arguments)}return a&&(b.__proto__=
a),b.prototype=Object.create(a&&a.prototype),b.prototype.constructor=b,b.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer);this.int16=new Int16Array(this.arrayBuffer)},b.prototype.emplaceBack=function(a,b,c,d,e,g){var f=this.length;this.resize(f+1);var h=6*f;return this.int16[h+0]=a,this.int16[h+1]=b,this.int16[h+2]=c,this.int16[h+3]=d,this.int16[h+4]=e,this.int16[h+5]=g,f},b}(jc);gg.prototype.bytesPerElement=12;Ha("StructArrayLayout2i2i2i12",gg);var hg=function(a){function b(){a.apply(this,
arguments)}return a&&(b.__proto__=a),b.prototype=Object.create(a&&a.prototype),b.prototype.constructor=b,b.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer)},b.prototype.emplaceBack=function(a,b){var c=this.length;this.resize(c+1);var d=4*c;return this.uint8[d+0]=a,this.uint8[d+1]=b,c},b}(jc);hg.prototype.bytesPerElement=4;Ha("StructArrayLayout2ub4",hg);var ah=function(a){function b(){a.apply(this,arguments)}return a&&(b.__proto__=a),b.prototype=Object.create(a&&a.prototype),
b.prototype.constructor=b,b.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer);this.int16=new Int16Array(this.arrayBuffer);this.uint16=new Uint16Array(this.arrayBuffer);this.uint32=new Uint32Array(this.arrayBuffer);this.float32=new Float32Array(this.arrayBuffer)},b.prototype.emplaceBack=function(a,b,c,d,e,g,f,h,k,n,t,m,v,r){var u=this.length;this.resize(u+1);var l=20*u,p=10*u,y=40*u;return this.int16[l+0]=a,this.int16[l+1]=b,this.uint16[l+2]=c,this.uint16[l+3]=d,this.uint32[p+
2]=e,this.uint32[p+3]=g,this.uint32[p+4]=f,this.uint16[l+10]=h,this.uint16[l+11]=k,this.uint16[l+12]=n,this.float32[p+7]=t,this.float32[p+8]=m,this.uint8[y+36]=v,this.uint8[y+37]=r,u},b}(jc);ah.prototype.bytesPerElement=40;Ha("StructArrayLayout2i2ui3ul3ui2f2ub40",ah);var Jg=function(a){function b(){a.apply(this,arguments)}return a&&(b.__proto__=a),b.prototype=Object.create(a&&a.prototype),b.prototype.constructor=b,b.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer);this.float32=
new Float32Array(this.arrayBuffer)},b.prototype.emplaceBack=function(a){var b=this.length;this.resize(b+1);return this.float32[1*b]=a,b},b}(jc);Jg.prototype.bytesPerElement=4;Ha("StructArrayLayout1f4",Jg);var bh=function(a){function b(){a.apply(this,arguments)}return a&&(b.__proto__=a),b.prototype=Object.create(a&&a.prototype),b.prototype.constructor=b,b.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer);this.int16=new Int16Array(this.arrayBuffer)},b.prototype.emplaceBack=
function(a,b,c){var d=this.length;this.resize(d+1);var e=3*d;return this.int16[e+0]=a,this.int16[e+1]=b,this.int16[e+2]=c,d},b}(jc);bh.prototype.bytesPerElement=6;Ha("StructArrayLayout3i6",bh);var ch=function(a){function b(){a.apply(this,arguments)}return a&&(b.__proto__=a),b.prototype=Object.create(a&&a.prototype),b.prototype.constructor=b,b.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer);this.uint32=new Uint32Array(this.arrayBuffer);this.uint16=new Uint16Array(this.arrayBuffer)},
b.prototype.emplaceBack=function(a,b,c){var d=this.length;this.resize(d+1);var e=4*d;return this.uint32[2*d]=a,this.uint16[e+2]=b,this.uint16[e+3]=c,d},b}(jc);ch.prototype.bytesPerElement=8;Ha("StructArrayLayout1ul2ui8",ch);var Ud=function(a){function b(){a.apply(this,arguments)}return a&&(b.__proto__=a),b.prototype=Object.create(a&&a.prototype),b.prototype.constructor=b,b.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer);this.uint16=new Uint16Array(this.arrayBuffer)},
b.prototype.emplaceBack=function(a,b,c){var d=this.length;this.resize(d+1);var e=3*d;return this.uint16[e+0]=a,this.uint16[e+1]=b,this.uint16[e+2]=c,d},b}(jc);Ud.prototype.bytesPerElement=6;Ha("StructArrayLayout3ui6",Ud);var Ke=function(a){function b(){a.apply(this,arguments)}return a&&(b.__proto__=a),b.prototype=Object.create(a&&a.prototype),b.prototype.constructor=b,b.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer);this.uint16=new Uint16Array(this.arrayBuffer)},b.prototype.emplaceBack=
function(a,b){var c=this.length;this.resize(c+1);var d=2*c;return this.uint16[d+0]=a,this.uint16[d+1]=b,c},b}(jc);Ke.prototype.bytesPerElement=4;Ha("StructArrayLayout2ui4",Ke);var ug=function(a){function b(){a.apply(this,arguments)}return a&&(b.__proto__=a),b.prototype=Object.create(a&&a.prototype),b.prototype.constructor=b,b.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer);this.float32=new Float32Array(this.arrayBuffer)},b.prototype.emplaceBack=function(a,b){var c=this.length;
this.resize(c+1);var d=2*c;return this.float32[d+0]=a,this.float32[d+1]=b,c},b}(jc);ug.prototype.bytesPerElement=8;Ha("StructArrayLayout2f8",ug);var tg=function(a){function b(){a.apply(this,arguments)}return a&&(b.__proto__=a),b.prototype=Object.create(a&&a.prototype),b.prototype.constructor=b,b.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer);this.float32=new Float32Array(this.arrayBuffer)},b.prototype.emplaceBack=function(a,b,c,d){var e=this.length;this.resize(e+1);
var g=4*e;return this.float32[g+0]=a,this.float32[g+1]=b,this.float32[g+2]=c,this.float32[g+3]=d,e},b}(jc);tg.prototype.bytesPerElement=16;Ha("StructArrayLayout4f16",tg);var Jh=function(a){function b(){a.apply(this,arguments)}a&&(b.__proto__=a);b.prototype=Object.create(a&&a.prototype);b.prototype.constructor=b;var c={anchorPointX:{configurable:!0},anchorPointY:{configurable:!0},x1:{configurable:!0},y1:{configurable:!0},x2:{configurable:!0},y2:{configurable:!0},featureIndex:{configurable:!0},sourceLayerIndex:{configurable:!0},
bucketIndex:{configurable:!0},radius:{configurable:!0},signedDistanceFromAnchor:{configurable:!0},anchorPoint:{configurable:!0}};return c.anchorPointX.get=function(){return this._structArray.int16[this._pos2+0]},c.anchorPointX.set=function(a){this._structArray.int16[this._pos2+0]=a},c.anchorPointY.get=function(){return this._structArray.int16[this._pos2+1]},c.anchorPointY.set=function(a){this._structArray.int16[this._pos2+1]=a},c.x1.get=function(){return this._structArray.int16[this._pos2+2]},c.x1.set=
function(a){this._structArray.int16[this._pos2+2]=a},c.y1.get=function(){return this._structArray.int16[this._pos2+3]},c.y1.set=function(a){this._structArray.int16[this._pos2+3]=a},c.x2.get=function(){return this._structArray.int16[this._pos2+4]},c.x2.set=function(a){this._structArray.int16[this._pos2+4]=a},c.y2.get=function(){return this._structArray.int16[this._pos2+5]},c.y2.set=function(a){this._structArray.int16[this._pos2+5]=a},c.featureIndex.get=function(){return this._structArray.uint32[this._pos4+
3]},c.featureIndex.set=function(a){this._structArray.uint32[this._pos4+3]=a},c.sourceLayerIndex.get=function(){return this._structArray.uint16[this._pos2+8]},c.sourceLayerIndex.set=function(a){this._structArray.uint16[this._pos2+8]=a},c.bucketIndex.get=function(){return this._structArray.uint16[this._pos2+9]},c.bucketIndex.set=function(a){this._structArray.uint16[this._pos2+9]=a},c.radius.get=function(){return this._structArray.int16[this._pos2+10]},c.radius.set=function(a){this._structArray.int16[this._pos2+
10]=a},c.signedDistanceFromAnchor.get=function(){return this._structArray.int16[this._pos2+11]},c.signedDistanceFromAnchor.set=function(a){this._structArray.int16[this._pos2+11]=a},c.anchorPoint.get=function(){return new Wb(this.anchorPointX,this.anchorPointY)},Object.defineProperties(b.prototype,c),b}(Rf);Jh.prototype.size=24;var Kh=function(a){function b(){a.apply(this,arguments)}return a&&(b.__proto__=a),b.prototype=Object.create(a&&a.prototype),b.prototype.constructor=b,b.prototype.get=function(a){return new Jh(this,
a)},b}(tf);Ha("CollisionBoxArray",Kh);var Th=function(a){function b(){a.apply(this,arguments)}a&&(b.__proto__=a);b.prototype=Object.create(a&&a.prototype);b.prototype.constructor=b;var c={anchorX:{configurable:!0},anchorY:{configurable:!0},glyphStartIndex:{configurable:!0},numGlyphs:{configurable:!0},vertexStartIndex:{configurable:!0},lineStartIndex:{configurable:!0},lineLength:{configurable:!0},segment:{configurable:!0},lowerSize:{configurable:!0},upperSize:{configurable:!0},lineOffsetX:{configurable:!0},
lineOffsetY:{configurable:!0},writingMode:{configurable:!0},hidden:{configurable:!0}};return c.anchorX.get=function(){return this._structArray.int16[this._pos2+0]},c.anchorX.set=function(a){this._structArray.int16[this._pos2+0]=a},c.anchorY.get=function(){return this._structArray.int16[this._pos2+1]},c.anchorY.set=function(a){this._structArray.int16[this._pos2+1]=a},c.glyphStartIndex.get=function(){return this._structArray.uint16[this._pos2+2]},c.glyphStartIndex.set=function(a){this._structArray.uint16[this._pos2+
2]=a},c.numGlyphs.get=function(){return this._structArray.uint16[this._pos2+3]},c.numGlyphs.set=function(a){this._structArray.uint16[this._pos2+3]=a},c.vertexStartIndex.get=function(){return this._structArray.uint32[this._pos4+2]},c.vertexStartIndex.set=function(a){this._structArray.uint32[this._pos4+2]=a},c.lineStartIndex.get=function(){return this._structArray.uint32[this._pos4+3]},c.lineStartIndex.set=function(a){this._structArray.uint32[this._pos4+3]=a},c.lineLength.get=function(){return this._structArray.uint32[this._pos4+
4]},c.lineLength.set=function(a){this._structArray.uint32[this._pos4+4]=a},c.segment.get=function(){return this._structArray.uint16[this._pos2+10]},c.segment.set=function(a){this._structArray.uint16[this._pos2+10]=a},c.lowerSize.get=function(){return this._structArray.uint16[this._pos2+11]},c.lowerSize.set=function(a){this._structArray.uint16[this._pos2+11]=a},c.upperSize.get=function(){return this._structArray.uint16[this._pos2+12]},c.upperSize.set=function(a){this._structArray.uint16[this._pos2+
12]=a},c.lineOffsetX.get=function(){return this._structArray.float32[this._pos4+7]},c.lineOffsetX.set=function(a){this._structArray.float32[this._pos4+7]=a},c.lineOffsetY.get=function(){return this._structArray.float32[this._pos4+8]},c.lineOffsetY.set=function(a){this._structArray.float32[this._pos4+8]=a},c.writingMode.get=function(){return this._structArray.uint8[this._pos1+36]},c.writingMode.set=function(a){this._structArray.uint8[this._pos1+36]=a},c.hidden.get=function(){return this._structArray.uint8[this._pos1+
37]},c.hidden.set=function(a){this._structArray.uint8[this._pos1+37]=a},Object.defineProperties(b.prototype,c),b}(Rf);Th.prototype.size=40;var ig=function(a){function b(){a.apply(this,arguments)}return a&&(b.__proto__=a),b.prototype=Object.create(a&&a.prototype),b.prototype.constructor=b,b.prototype.get=function(a){return new Th(this,a)},b}(ah);Ha("PlacedSymbolArray",ig);var Nf=function(a){function b(){a.apply(this,arguments)}a&&(b.__proto__=a);b.prototype=Object.create(a&&a.prototype);b.prototype.constructor=
b;var c={offsetX:{configurable:!0}};return c.offsetX.get=function(){return this._structArray.float32[this._pos4+0]},c.offsetX.set=function(a){this._structArray.float32[this._pos4+0]=a},Object.defineProperties(b.prototype,c),b}(Rf);Nf.prototype.size=4;var Lh=function(a){function b(){a.apply(this,arguments)}return a&&(b.__proto__=a),b.prototype=Object.create(a&&a.prototype),b.prototype.constructor=b,b.prototype.getoffsetX=function(a){return this.float32[1*a]},b.prototype.get=function(a){return new Nf(this,
a)},b}(Jg);Ha("GlyphOffsetArray",Lh);var ke=function(a){function b(){a.apply(this,arguments)}a&&(b.__proto__=a);b.prototype=Object.create(a&&a.prototype);b.prototype.constructor=b;var c={x:{configurable:!0},y:{configurable:!0},tileUnitDistanceFromAnchor:{configurable:!0}};return c.x.get=function(){return this._structArray.int16[this._pos2+0]},c.x.set=function(a){this._structArray.int16[this._pos2+0]=a},c.y.get=function(){return this._structArray.int16[this._pos2+1]},c.y.set=function(a){this._structArray.int16[this._pos2+
1]=a},c.tileUnitDistanceFromAnchor.get=function(){return this._structArray.int16[this._pos2+2]},c.tileUnitDistanceFromAnchor.set=function(a){this._structArray.int16[this._pos2+2]=a},Object.defineProperties(b.prototype,c),b}(Rf);ke.prototype.size=6;var hh=function(a){function b(){a.apply(this,arguments)}return a&&(b.__proto__=a),b.prototype=Object.create(a&&a.prototype),b.prototype.constructor=b,b.prototype.getx=function(a){return this.int16[3*a]},b.prototype.gety=function(a){return this.int16[3*a+
1]},b.prototype.gettileUnitDistanceFromAnchor=function(a){return this.int16[3*a+2]},b.prototype.get=function(a){return new ke(this,a)},b}(bh);Ha("SymbolLineVertexArray",hh);var Fe=function(a){function b(){a.apply(this,arguments)}a&&(b.__proto__=a);b.prototype=Object.create(a&&a.prototype);b.prototype.constructor=b;var c={featureIndex:{configurable:!0},sourceLayerIndex:{configurable:!0},bucketIndex:{configurable:!0}};return c.featureIndex.get=function(){return this._structArray.uint32[this._pos4+0]},
c.featureIndex.set=function(a){this._structArray.uint32[this._pos4+0]=a},c.sourceLayerIndex.get=function(){return this._structArray.uint16[this._pos2+2]},c.sourceLayerIndex.set=function(a){this._structArray.uint16[this._pos2+2]=a},c.bucketIndex.get=function(){return this._structArray.uint16[this._pos2+3]},c.bucketIndex.set=function(a){this._structArray.uint16[this._pos2+3]=a},Object.defineProperties(b.prototype,c),b}(Rf);Fe.prototype.size=8;var Mg=function(a){function b(){a.apply(this,arguments)}
return a&&(b.__proto__=a),b.prototype=Object.create(a&&a.prototype),b.prototype.constructor=b,b.prototype.get=function(a){return new Fe(this,a)},b}(ch);Ha("FeatureIndexArray",Mg);var Xe=vb([{name:"a_pos",components:2,type:"Int16"}],4).members,Xc=function(a){void 0===a&&(a=[]);this.segments=a};Xc.prototype.prepareSegment=function(a,b,c){var d=this.segments[this.segments.length-1];return a>Xc.MAX_VERTEX_ARRAY_LENGTH&&A("Max vertices per segment is "+Xc.MAX_VERTEX_ARRAY_LENGTH+": bucket requested "+
a),(!d||d.vertexLength+a>Xc.MAX_VERTEX_ARRAY_LENGTH)&&(d={vertexOffset:b.length,primitiveOffset:c.length,vertexLength:0,primitiveLength:0},this.segments.push(d)),d};Xc.prototype.get=function(){return this.segments};Xc.prototype.destroy=function(){for(var a=0,b=this.segments;a<b.length;a+=1){var c=b[a],d;for(d in c.vaos)c.vaos[d].destroy()}};Xc.MAX_VERTEX_ARRAY_LENGTH=Math.pow(2,16)-1;Ha("SegmentVector",Xc);var Ng=function(a,b){return 256*c(Math.floor(a),0,255)+c(Math.floor(b),0,255)},yc=function(a,
b,c){this.value=a;this.name=b;this.type=c;this.statistics={max:-1/0}};yc.prototype.defines=function(){return["#define HAS_UNIFORM_u_"+this.name]};yc.prototype.populatePaintArray=function(){};yc.prototype.upload=function(){};yc.prototype.destroy=function(){};yc.prototype.setUniforms=function(a,b,c,d){c=d.constantOr(this.value);a=a.gl;"color"===this.type?a.uniform4f(b.uniforms["u_"+this.name],c.r,c.g,c.b,c.a):a.uniform1f(b.uniforms["u_"+this.name],c)};var Ld=function(a,b,c){this.expression=a;this.name=
b;this.type=c;this.statistics={max:-1/0};a="color"===c?ug:Jg;this.paintVertexAttributes=[{name:"a_"+b,type:"Float32",components:"color"===c?2:1,offset:0}];this.paintVertexArray=new a};Ld.prototype.defines=function(){return[]};Ld.prototype.populatePaintArray=function(a,b){var c=this.paintVertexArray,d=c.length;c.reserve(a);b=this.expression.evaluate(new Bc(0),b);if("color"===this.type)for(b=Qc(b);d<a;d++)c.emplaceBack(b[0],b[1]);else{for(;d<a;d++)c.emplaceBack(b);this.statistics.max=Math.max(this.statistics.max,
b)}};Ld.prototype.upload=function(a){this.paintVertexArray&&(this.paintVertexBuffer=a.createVertexBuffer(this.paintVertexArray,this.paintVertexAttributes))};Ld.prototype.destroy=function(){this.paintVertexBuffer&&this.paintVertexBuffer.destroy()};Ld.prototype.setUniforms=function(a,b){a.gl.uniform1f(b.uniforms["a_"+this.name+"_t"],0)};var le=function(a,b,c,d,e){this.expression=a;this.name=b;this.type=c;this.useIntegerZoom=d;this.zoom=e;this.statistics={max:-1/0};a="color"===c?tg:ug;this.paintVertexAttributes=
[{name:"a_"+b,type:"Float32",components:"color"===c?4:2,offset:0}];this.paintVertexArray=new a};le.prototype.defines=function(){return[]};le.prototype.populatePaintArray=function(a,b){var c=this.paintVertexArray,d=c.length;c.reserve(a);var e=this.expression.evaluate(new Bc(this.zoom),b);b=this.expression.evaluate(new Bc(this.zoom+1),b);if("color"===this.type)for(e=Qc(e),b=Qc(b);d<a;d++)c.emplaceBack(e[0],e[1],b[0],b[1]);else{for(;d<a;d++)c.emplaceBack(e,b);this.statistics.max=Math.max(this.statistics.max,
e,b)}};le.prototype.upload=function(a){this.paintVertexArray&&(this.paintVertexBuffer=a.createVertexBuffer(this.paintVertexArray,this.paintVertexAttributes))};le.prototype.destroy=function(){this.paintVertexBuffer&&this.paintVertexBuffer.destroy()};le.prototype.interpolationFactor=function(a){return this.useIntegerZoom?this.expression.interpolationFactor(Math.floor(a),this.zoom,this.zoom+1):this.expression.interpolationFactor(a,this.zoom,this.zoom+1)};le.prototype.setUniforms=function(a,b,c){a.gl.uniform1f(b.uniforms["a_"+
this.name+"_t"],this.interpolationFactor(c.zoom))};var ve=function(){this.binders={};this.cacheKey="";this._buffers=[]};ve.createDynamic=function(a,b,c){var d=new ve,e=[],g;for(g in a.paint._values)if(c(g)){var f=a.paint.get(g);if(f instanceof Je&&f.property.specification["property-function"]){var h={"text-opacity":"opacity","icon-opacity":"opacity","text-color":"fill_color","icon-color":"fill_color","text-halo-color":"halo_color","icon-halo-color":"halo_color","text-halo-blur":"halo_blur","icon-halo-blur":"halo_blur",
"text-halo-width":"halo_width","icon-halo-width":"halo_width","line-gap-width":"gapwidth"}[g]||g.replace(a.type+"-","").replace(/-/g,"_"),k=f.property.specification.type,n=f.property.useIntegerZoom;"constant"===f.value.kind?(d.binders[g]=new yc(f.value,h,k),e.push("/u_"+h)):"source"===f.value.kind?(d.binders[g]=new Ld(f.value,h,k),e.push("/a_"+h)):(d.binders[g]=new le(f.value,h,k,n,b),e.push("/z_"+h))}}return d.cacheKey=e.sort().join(""),d};ve.prototype.populatePaintArrays=function(a,b){for(var c in this.binders)this.binders[c].populatePaintArray(a,
b)};ve.prototype.defines=function(){var a=[],b;for(b in this.binders)a.push.apply(a,this.binders[b].defines());return a};ve.prototype.setUniforms=function(a,b,c,d){for(var e in this.binders)this.binders[e].setUniforms(a,b,d,c.get(e))};ve.prototype.getPaintVertexBuffers=function(){return this._buffers};ve.prototype.upload=function(a){for(var b in this.binders)this.binders[b].upload(a);a=[];for(var c in this.binders)b=this.binders[c],(b instanceof Ld||b instanceof le)&&b.paintVertexBuffer&&a.push(b.paintVertexBuffer);
this._buffers=a};ve.prototype.destroy=function(){for(var a in this.binders)this.binders[a].destroy()};var id=function(a,b,c,d){void 0===d&&(d=function(){return!0});this.programConfigurations={};for(var e=0;e<b.length;e+=1){var g=b[e];this.programConfigurations[g.id]=ve.createDynamic(g,c,d);this.programConfigurations[g.id].layoutAttributes=a}};id.prototype.populatePaintArrays=function(a,b){for(var c in this.programConfigurations)this.programConfigurations[c].populatePaintArrays(a,b)};id.prototype.get=
function(a){return this.programConfigurations[a]};id.prototype.upload=function(a){for(var b in this.programConfigurations)this.programConfigurations[b].upload(a)};id.prototype.destroy=function(){for(var a in this.programConfigurations)this.programConfigurations[a].destroy()};Ha("ConstantBinder",yc);Ha("SourceExpressionBinder",Ld);Ha("CompositeExpressionBinder",le);Ha("ProgramConfiguration",ve,{omit:["_buffers"]});Ha("ProgramConfigurationSet",id);var jh={min:-1*Math.pow(2,15),max:Math.pow(2,15)-1},
Yc=function(a){this.zoom=a.zoom;this.overscaling=a.overscaling;this.layers=a.layers;this.layerIds=this.layers.map(function(a){return a.id});this.index=a.index;this.layoutVertexArray=new fg;this.indexArray=new Ud;this.segments=new Xc;this.programConfigurations=new id(Xe,a.layers,a.zoom)};Yc.prototype.populate=function(a,b){for(var c=0;c<a.length;c+=1){var d=a[c],e=d.feature,g=d.index;d=d.sourceLayerIndex;if(this.layers[0]._featureFilter(new Bc(this.zoom),e)){var f=Tb(e);this.addFeature(e,f);b.featureIndex.insert(e,
f,g,d,this.index)}}};Yc.prototype.isEmpty=function(){return 0===this.layoutVertexArray.length};Yc.prototype.upload=function(a){this.layoutVertexBuffer=a.createVertexBuffer(this.layoutVertexArray,Xe);this.indexBuffer=a.createIndexBuffer(this.indexArray);this.programConfigurations.upload(a)};Yc.prototype.destroy=function(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy())};Yc.prototype.addFeature=function(a,
b){for(var c=0;c<b.length;c+=1)for(var d=0,e=b[c];d<e.length;d+=1){var g=e[d],f=g.x;g=g.y;if(!(0>f||8192<=f||0>g||8192<=g)){var h=this.segments.prepareSegment(4,this.layoutVertexArray,this.indexArray),k=h.vertexLength;fd(this.layoutVertexArray,f,g,-1,-1);fd(this.layoutVertexArray,f,g,1,-1);fd(this.layoutVertexArray,f,g,1,1);fd(this.layoutVertexArray,f,g,-1,1);this.indexArray.emplaceBack(k,k+1,k+2);this.indexArray.emplaceBack(k,k+3,k+2);h.vertexLength+=4;h.primitiveLength+=2}}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,
a)};Ha("CircleBucket",Yc,{omit:["layers"]});var mh={paint:new jd({"circle-radius":new fb(ra.paint_circle["circle-radius"]),"circle-color":new fb(ra.paint_circle["circle-color"]),"circle-blur":new fb(ra.paint_circle["circle-blur"]),"circle-opacity":new fb(ra.paint_circle["circle-opacity"]),"circle-translate":new bb(ra.paint_circle["circle-translate"]),"circle-translate-anchor":new bb(ra.paint_circle["circle-translate-anchor"]),"circle-pitch-scale":new bb(ra.paint_circle["circle-pitch-scale"]),"circle-pitch-alignment":new bb(ra.paint_circle["circle-pitch-alignment"]),
"circle-stroke-width":new fb(ra.paint_circle["circle-stroke-width"]),"circle-stroke-color":new fb(ra.paint_circle["circle-stroke-color"]),"circle-stroke-opacity":new fb(ra.paint_circle["circle-stroke-opacity"])})},Le=f(function(a,b){var c;a.exports=((c=new Float32Array(3))[0]=0,c[1]=0,c[2]=0,function(){var a=new Float32Array(4);a[0]=0;a[1]=0;a[2]=0;a[3]=0}(),{vec3:{transformMat3:function(a,b,c){var d=b[0],e=b[1];b=b[2];return a[0]=d*c[0]+e*c[3]+b*c[6],a[1]=d*c[1]+e*c[4]+b*c[7],a[2]=d*c[2]+e*c[5]+
b*c[8],a}},vec4:{transformMat4:function(a,b,c){var d=b[0],e=b[1],g=b[2];b=b[3];return a[0]=c[0]*d+c[4]*e+c[8]*g+c[12]*b,a[1]=c[1]*d+c[5]*e+c[9]*g+c[13]*b,a[2]=c[2]*d+c[6]*e+c[10]*g+c[14]*b,a[3]=c[3]*d+c[7]*e+c[11]*g+c[15]*b,a}},mat2:{create:function(){var a=new Float32Array(4);return a[0]=1,a[1]=0,a[2]=0,a[3]=1,a},rotate:function(a,b,c){var d=b[0],e=b[1],g=b[2];b=b[3];var f=Math.sin(c);c=Math.cos(c);return a[0]=d*c+g*f,a[1]=e*c+b*f,a[2]=d*-f+g*c,a[3]=e*-f+b*c,a},scale:function(a,b,c){var d=b[1],e=
b[2],g=b[3],f=c[0];c=c[1];return a[0]=b[0]*f,a[1]=d*f,a[2]=e*c,a[3]=g*c,a}},mat3:{create:function(){var a=new Float32Array(9);return a[0]=1,a[1]=0,a[2]=0,a[3]=0,a[4]=1,a[5]=0,a[6]=0,a[7]=0,a[8]=1,a},fromRotation:function(a,b){var c=Math.sin(b);b=Math.cos(b);return a[0]=b,a[1]=c,a[2]=0,a[3]=-c,a[4]=b,a[5]=0,a[6]=0,a[7]=0,a[8]=1,a}},mat4:{create:function(){var a=new Float32Array(16);return a[0]=1,a[1]=0,a[2]=0,a[3]=0,a[4]=0,a[5]=1,a[6]=0,a[7]=0,a[8]=0,a[9]=0,a[10]=1,a[11]=0,a[12]=0,a[13]=0,a[14]=0,
a[15]=1,a},identity:function(a){return a[0]=1,a[1]=0,a[2]=0,a[3]=0,a[4]=0,a[5]=1,a[6]=0,a[7]=0,a[8]=0,a[9]=0,a[10]=1,a[11]=0,a[12]=0,a[13]=0,a[14]=0,a[15]=1,a},translate:function(a,b,c){var d,e,g,f,h,k,n,t,m,v,r,u,l=c[0],p=c[1];c=c[2];return b===a?(a[12]=b[0]*l+b[4]*p+b[8]*c+b[12],a[13]=b[1]*l+b[5]*p+b[9]*c+b[13],a[14]=b[2]*l+b[6]*p+b[10]*c+b[14],a[15]=b[3]*l+b[7]*p+b[11]*c+b[15]):(d=b[0],e=b[1],g=b[2],f=b[3],h=b[4],k=b[5],n=b[6],t=b[7],m=b[8],v=b[9],r=b[10],u=b[11],a[0]=d,a[1]=e,a[2]=g,a[3]=f,a[4]=
h,a[5]=k,a[6]=n,a[7]=t,a[8]=m,a[9]=v,a[10]=r,a[11]=u,a[12]=d*l+h*p+m*c+b[12],a[13]=e*l+k*p+v*c+b[13],a[14]=g*l+n*p+r*c+b[14],a[15]=f*l+t*p+u*c+b[15]),a},scale:function(a,b,c){var d=c[0],e=c[1];c=c[2];return a[0]=b[0]*d,a[1]=b[1]*d,a[2]=b[2]*d,a[3]=b[3]*d,a[4]=b[4]*e,a[5]=b[5]*e,a[6]=b[6]*e,a[7]=b[7]*e,a[8]=b[8]*c,a[9]=b[9]*c,a[10]=b[10]*c,a[11]=b[11]*c,a[12]=b[12],a[13]=b[13],a[14]=b[14],a[15]=b[15],a},multiply:function(a,b,c){var d=b[0],e=b[1],g=b[2],f=b[3],h=b[4],k=b[5],n=b[6],t=b[7],m=b[8],v=b[9],
r=b[10],u=b[11],l=b[12],p=b[13],y=b[14];b=b[15];var q=c[0],B=c[1],A=c[2],D=c[3];return a[0]=q*d+B*h+A*m+D*l,a[1]=q*e+B*k+A*v+D*p,a[2]=q*g+B*n+A*r+D*y,a[3]=q*f+B*t+A*u+D*b,q=c[4],B=c[5],A=c[6],D=c[7],a[4]=q*d+B*h+A*m+D*l,a[5]=q*e+B*k+A*v+D*p,a[6]=q*g+B*n+A*r+D*y,a[7]=q*f+B*t+A*u+D*b,q=c[8],B=c[9],A=c[10],D=c[11],a[8]=q*d+B*h+A*m+D*l,a[9]=q*e+B*k+A*v+D*p,a[10]=q*g+B*n+A*r+D*y,a[11]=q*f+B*t+A*u+D*b,q=c[12],B=c[13],A=c[14],D=c[15],a[12]=q*d+B*h+A*m+D*l,a[13]=q*e+B*k+A*v+D*p,a[14]=q*g+B*n+A*r+D*y,a[15]=
q*f+B*t+A*u+D*b,a},perspective:function(a,b,c,d,e){b=1/Math.tan(b/2);var g=1/(d-e);return a[0]=b/c,a[1]=0,a[2]=0,a[3]=0,a[4]=0,a[5]=b,a[6]=0,a[7]=0,a[8]=0,a[9]=0,a[10]=(e+d)*g,a[11]=-1,a[12]=0,a[13]=0,a[14]=2*e*d*g,a[15]=0,a},rotateX:function(a,b,c){var d=Math.sin(c);c=Math.cos(c);var e=b[4],g=b[5],f=b[6],h=b[7],k=b[8],n=b[9],t=b[10],m=b[11];return b!==a&&(a[0]=b[0],a[1]=b[1],a[2]=b[2],a[3]=b[3],a[12]=b[12],a[13]=b[13],a[14]=b[14],a[15]=b[15]),a[4]=e*c+k*d,a[5]=g*c+n*d,a[6]=f*c+t*d,a[7]=h*c+m*d,a[8]=
k*c-e*d,a[9]=n*c-g*d,a[10]=t*c-f*d,a[11]=m*c-h*d,a},rotateZ:function(a,b,c){var d=Math.sin(c);c=Math.cos(c);var e=b[0],g=b[1],f=b[2],h=b[3],k=b[4],n=b[5],t=b[6],m=b[7];return b!==a&&(a[8]=b[8],a[9]=b[9],a[10]=b[10],a[11]=b[11],a[12]=b[12],a[13]=b[13],a[14]=b[14],a[15]=b[15]),a[0]=e*c+k*d,a[1]=g*c+n*d,a[2]=f*c+t*d,a[3]=h*c+m*d,a[4]=k*c-e*d,a[5]=n*c-g*d,a[6]=t*c-f*d,a[7]=m*c-h*d,a},invert:function(a,b){var c=b[0],d=b[1],e=b[2],g=b[3],f=b[4],h=b[5],k=b[6],n=b[7],t=b[8],m=b[9],v=b[10],r=b[11],u=b[12],
l=b[13],p=b[14];b=b[15];var y=c*h-d*f,q=c*k-e*f,B=c*n-g*f,A=d*k-e*h,D=d*n-g*h,C=e*n-g*k,G=t*l-m*u,L=t*p-v*u,E=t*b-r*u,I=m*p-v*l,N=m*b-r*l,J=v*b-r*p,P=y*J-q*N+B*I+A*E-D*L+C*G;return P?(P=1/P,a[0]=(h*J-k*N+n*I)*P,a[1]=(e*N-d*J-g*I)*P,a[2]=(l*C-p*D+b*A)*P,a[3]=(v*D-m*C-r*A)*P,a[4]=(k*E-f*J-n*L)*P,a[5]=(c*J-e*E+g*L)*P,a[6]=(p*B-u*C-b*q)*P,a[7]=(t*C-v*B+r*q)*P,a[8]=(f*N-h*E+n*G)*P,a[9]=(d*E-c*N-g*G)*P,a[10]=(u*D-l*B+b*y)*P,a[11]=(m*B-t*D-r*y)*P,a[12]=(h*L-f*I-k*G)*P,a[13]=(c*I-d*L+e*G)*P,a[14]=(l*q-u*
A-p*y)*P,a[15]=(t*A-m*q+v*y)*P,a):null},ortho:function(a,b,c,d,e,g,f){var h=1/(b-c),k=1/(d-e),n=1/(g-f);return a[0]=-2*h,a[1]=0,a[2]=0,a[3]=0,a[4]=0,a[5]=-2*k,a[6]=0,a[7]=0,a[8]=0,a[9]=0,a[10]=2*n,a[11]=0,a[12]=(b+c)*h,a[13]=(e+d)*k,a[14]=(f+g)*n,a[15]=1,a}}})}),Ze=(Le.vec3,Le.vec4),ih=(Le.mat2,Le.mat3,Le.mat4),Pg=function(a){function b(b){a.call(this,b,mh)}return a&&(b.__proto__=a),b.prototype=Object.create(a&&a.prototype),b.prototype.constructor=b,b.prototype.createBucket=function(a){return new Yc(a)},
b.prototype.queryRadius=function(a){return Cc("circle-radius",this,a)+Cc("circle-stroke-width",this,a)+$c(this.paint.get("circle-translate"))},b.prototype.queryIntersectsFeature=function(a,b,c,d,e,g,f){a=ld(a,this.paint.get("circle-translate"),this.paint.get("circle-translate-anchor"),e.angle,g);d=this.paint.get("circle-radius").evaluate(b)+this.paint.get("circle-stroke-width").evaluate(b);a=(b="map"===this.paint.get("circle-pitch-alignment"))?a:function(a,b,c){return a.map(function(a){return a.map(function(a){return md(a,
b,c)})})}(a,f,e);g=b?d*g:d;for(d=0;d<c.length;d+=1)for(var h=0,k=c[d];h<k.length;h+=1){var n=k[h],t=b?n:md(n,f,e),m=g;n=Ze.transformMat4([],[n.x,n.y,0,1],f);if("viewport"===this.paint.get("circle-pitch-scale")&&"map"===this.paint.get("circle-pitch-alignment")?m*=n[3]/e.cameraToCenterDistance:"map"===this.paint.get("circle-pitch-scale")&&"viewport"===this.paint.get("circle-pitch-alignment")&&(m*=e.cameraToCenterDistance/n[3]),Rd(a,t,m))return!0}return!1},b}(Kd),kg=function(a){function b(){a.apply(this,
arguments)}return a&&(b.__proto__=a),b.prototype=Object.create(a&&a.prototype),b.prototype.constructor=b,b}(Yc);Ha("HeatmapBucket",kg,{omit:["layers"]});var $e=function(a,b){me(this,a,1,b)};$e.prototype.resize=function(a){Vd(this,a,1)};$e.prototype.clone=function(){return new $e({width:this.width,height:this.height},new Uint8Array(this.data))};$e.copy=function(a,b,c,d,e){nd(a,b,c,d,e,1)};var we=function(a,b){me(this,a,4,b)};we.prototype.resize=function(a){Vd(this,a,4)};we.prototype.clone=function(){return new we({width:this.width,
height:this.height},new Uint8Array(this.data))};we.copy=function(a,b,c,d,e){nd(a,b,c,d,e,4)};Ha("AlphaImage",$e);Ha("RGBAImage",we);var Qg={paint:new jd({"heatmap-radius":new fb(ra.paint_heatmap["heatmap-radius"]),"heatmap-weight":new fb(ra.paint_heatmap["heatmap-weight"]),"heatmap-intensity":new bb(ra.paint_heatmap["heatmap-intensity"]),"heatmap-color":new ie(ra.paint_heatmap["heatmap-color"]),"heatmap-opacity":new bb(ra.paint_heatmap["heatmap-opacity"])})},jg=function(a){function b(b){a.call(this,
b,Qg);this._updateColorRamp()}return a&&(b.__proto__=a),b.prototype=Object.create(a&&a.prototype),b.prototype.constructor=b,b.prototype.createBucket=function(a){return new kg(a)},b.prototype.setPaintProperty=function(b,c,d){a.prototype.setPaintProperty.call(this,b,c,d);"heatmap-color"===b&&this._updateColorRamp()},b.prototype._updateColorRamp=function(){this.colorRamp=tc(this._transitionablePaint._values["heatmap-color"].value.expression,"heatmapDensity");this.colorRampTexture=null},b.prototype.resize=
function(){this.heatmapFbo&&(this.heatmapFbo.destroy(),this.heatmapFbo=null)},b.prototype.queryRadius=function(){return 0},b.prototype.queryIntersectsFeature=function(){return!1},b.prototype.hasOffscreenPass=function(){return 0!==this.paint.get("heatmap-opacity")&&"none"!==this.visibility},b}(Kd),xh={paint:new jd({"hillshade-illumination-direction":new bb(ra.paint_hillshade["hillshade-illumination-direction"]),"hillshade-illumination-anchor":new bb(ra.paint_hillshade["hillshade-illumination-anchor"]),
"hillshade-exaggeration":new bb(ra.paint_hillshade["hillshade-exaggeration"]),"hillshade-shadow-color":new bb(ra.paint_hillshade["hillshade-shadow-color"]),"hillshade-highlight-color":new bb(ra.paint_hillshade["hillshade-highlight-color"]),"hillshade-accent-color":new bb(ra.paint_hillshade["hillshade-accent-color"])})},Uh=function(a){function b(b){a.call(this,b,xh)}return a&&(b.__proto__=a),b.prototype=Object.create(a&&a.prototype),b.prototype.constructor=b,b.prototype.hasOffscreenPass=function(){return 0!==
this.paint.get("hillshade-exaggeration")&&"none"!==this.visibility},b}(Kd),Og=vb([{name:"a_pos",components:2,type:"Int16"}],4).members;Ub.deviation=function(a,b,c,d){var e=b&&b.length,g=Math.abs(Me(a,0,e?b[0]*c:a.length,c));if(e){e=0;for(var f=b.length;e<f;e++)g-=Math.abs(Me(a,b[e]*c,e<f-1?b[e+1]*c:a.length,c))}for(e=b=0;e<d.length;e+=3){f=d[e]*c;var h=d[e+1]*c,k=d[e+2]*c;b+=Math.abs((a[f]-a[k])*(a[h+1]-a[f+1])-(a[f]-a[h])*(a[k+1]-a[f+1]))}return 0===g&&0===b?0:Math.abs((b-g)/g)};Ub.flatten=function(a){for(var b=
a[0][0].length,c={vertices:[],holes:[],dimensions:b},d=0,e=0;e<a.length;e++){for(var g=0;g<a[e].length;g++)for(var f=0;f<b;f++)c.vertices.push(a[e][g][f]);0<e&&(d+=a[e-1].length,c.holes.push(d))}return c};Ub.default=Ub;var kh=yf;kh.default=yf;var Qd=function(a){this.zoom=a.zoom;this.overscaling=a.overscaling;this.layers=a.layers;this.layerIds=this.layers.map(function(a){return a.id});this.index=a.index;this.layoutVertexArray=new fg;this.indexArray=new Ud;this.indexArray2=new Ke;this.programConfigurations=
new id(Og,a.layers,a.zoom);this.segments=new Xc;this.segments2=new Xc};Qd.prototype.populate=function(a,b){for(var c=0;c<a.length;c+=1){var d=a[c],e=d.feature,g=d.index;d=d.sourceLayerIndex;if(this.layers[0]._featureFilter(new Bc(this.zoom),e)){var f=Tb(e);this.addFeature(e,f);b.featureIndex.insert(e,f,g,d,this.index)}}};Qd.prototype.isEmpty=function(){return 0===this.layoutVertexArray.length};Qd.prototype.upload=function(a){this.layoutVertexBuffer=a.createVertexBuffer(this.layoutVertexArray,Og);
this.indexBuffer=a.createIndexBuffer(this.indexArray);this.indexBuffer2=a.createIndexBuffer(this.indexArray2);this.programConfigurations.upload(a)};Qd.prototype.destroy=function(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.indexBuffer2.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.segments2.destroy())};Qd.prototype.addFeature=function(a,b){var c=0;for(b=Ma(b,500);c<b.length;c+=1){for(var d=b[c],e=0,g=0,f=d;g<f.length;g+=
1)e+=f[g].length;g=this.segments.prepareSegment(e,this.layoutVertexArray,this.indexArray);f=g.vertexLength;for(var h=[],k=[],n=0,t=d;n<t.length;n+=1){var m=t[n];if(0!==m.length){m!==d[0]&&k.push(h.length/2);var v=this.segments2.prepareSegment(m.length,this.layoutVertexArray,this.indexArray2),r=v.vertexLength;this.layoutVertexArray.emplaceBack(m[0].x,m[0].y);this.indexArray2.emplaceBack(r+m.length-1,r);h.push(m[0].x);h.push(m[0].y);for(var u=1;u<m.length;u++)this.layoutVertexArray.emplaceBack(m[u].x,
m[u].y),this.indexArray2.emplaceBack(r+u-1,r+u),h.push(m[u].x),h.push(m[u].y);v.vertexLength+=m.length;v.primitiveLength+=m.length}}d=Ub(h,k);for(h=0;h<d.length;h+=3)this.indexArray.emplaceBack(f+d[h],f+d[h+1],f+d[h+2]);g.vertexLength+=e;g.primitiveLength+=d.length/3}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,a)};Ha("FillBucket",Qd,{omit:["layers"]});var Wh={paint:new jd({"fill-antialias":new bb(ra.paint_fill["fill-antialias"]),"fill-opacity":new fb(ra.paint_fill["fill-opacity"]),
"fill-color":new fb(ra.paint_fill["fill-color"]),"fill-outline-color":new fb(ra.paint_fill["fill-outline-color"]),"fill-translate":new bb(ra.paint_fill["fill-translate"]),"fill-translate-anchor":new bb(ra.paint_fill["fill-translate-anchor"]),"fill-pattern":new Jd(ra.paint_fill["fill-pattern"])})},Vh=function(a){function b(b){a.call(this,b,Wh)}return a&&(b.__proto__=a),b.prototype=Object.create(a&&a.prototype),b.prototype.constructor=b,b.prototype.recalculate=function(a){this.paint=this._transitioningPaint.possiblyEvaluate(a);
a=this.paint._values["fill-outline-color"];"constant"===a.value.kind&&void 0===a.value.value&&(this.paint._values["fill-outline-color"]=this.paint._values["fill-color"])},b.prototype.createBucket=function(a){return new Qd(a)},b.prototype.queryRadius=function(){return $c(this.paint.get("fill-translate"))},b.prototype.queryIntersectsFeature=function(a,b,c,d,e,g){return Eb(ld(a,this.paint.get("fill-translate"),this.paint.get("fill-translate-anchor"),e.angle,g),c)},b}(Kd),V=vb([{name:"a_pos",components:2,
type:"Int16"},{name:"a_normal_ed",components:4,type:"Int16"}],4).members,Kg=Math.pow(2,13),kd=function(a){this.zoom=a.zoom;this.overscaling=a.overscaling;this.layers=a.layers;this.layerIds=this.layers.map(function(a){return a.id});this.index=a.index;this.layoutVertexArray=new Ig;this.indexArray=new Ud;this.programConfigurations=new id(V,a.layers,a.zoom);this.segments=new Xc};kd.prototype.populate=function(a,b){for(var c=0;c<a.length;c+=1){var d=a[c],e=d.feature,g=d.index;d=d.sourceLayerIndex;if(this.layers[0]._featureFilter(new Bc(this.zoom),
e)){var f=Tb(e);this.addFeature(e,f);b.featureIndex.insert(e,f,g,d,this.index)}}};kd.prototype.isEmpty=function(){return 0===this.layoutVertexArray.length};kd.prototype.upload=function(a){this.layoutVertexBuffer=a.createVertexBuffer(this.layoutVertexArray,V);this.indexBuffer=a.createIndexBuffer(this.indexArray);this.programConfigurations.upload(a)};kd.prototype.destroy=function(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),
this.segments.destroy())};kd.prototype.addFeature=function(a,b){var c=0;for(b=Ma(b,500);c<b.length;c+=1){for(var d=b[c],e=0,g=0,f=d;g<f.length;g+=1)e+=f[g].length;g=this.segments.prepareSegment(4,this.layoutVertexArray,this.indexArray);f=0;for(var h=d;f<h.length;f+=1){var k=h[f];if(0!==k.length&&!od(k))for(var n=0,t=0;t<k.length;t++){var m=k[t];if(1<=t){var v=k[t-1];if(!(m.x===v.x&&(0>m.x||8192<m.x)||m.y===v.y&&(0>m.y||8192<m.y))){g.vertexLength+4>Xc.MAX_VERTEX_ARRAY_LENGTH&&(g=this.segments.prepareSegment(4,
this.layoutVertexArray,this.indexArray));var r=m.sub(v)._perp()._unit(),u=v.dist(m);32768<n+u&&(n=0);Fb(this.layoutVertexArray,m.x,m.y,r.x,r.y,0,0,n);Fb(this.layoutVertexArray,m.x,m.y,r.x,r.y,0,1,n);n+=u;Fb(this.layoutVertexArray,v.x,v.y,r.x,r.y,0,0,n);Fb(this.layoutVertexArray,v.x,v.y,r.x,r.y,0,1,n);m=g.vertexLength;this.indexArray.emplaceBack(m,m+1,m+2);this.indexArray.emplaceBack(m+1,m+2,m+3);g.vertexLength+=4;g.primitiveLength+=2}}}}g.vertexLength+e>Xc.MAX_VERTEX_ARRAY_LENGTH&&(g=this.segments.prepareSegment(e,
this.layoutVertexArray,this.indexArray));h=[];k=[];f=g.vertexLength;n=0;for(t=d;n<t.length;n+=1)if(m=t[n],0!==m.length)for(m!==d[0]&&k.push(h.length/2),v=0;v<m.length;v++)r=m[v],Fb(this.layoutVertexArray,r.x,r.y,0,0,1,1,0),h.push(r.x),h.push(r.y);d=Ub(h,k);for(h=0;h<d.length;h+=3)this.indexArray.emplaceBack(f+d[h],f+d[h+1],f+d[h+2]);g.primitiveLength+=d.length/3;g.vertexLength+=e}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,a)};Ha("FillExtrusionBucket",kd,{omit:["layers"]});
var Pc={paint:new jd({"fill-extrusion-opacity":new bb(ra["paint_fill-extrusion"]["fill-extrusion-opacity"]),"fill-extrusion-color":new fb(ra["paint_fill-extrusion"]["fill-extrusion-color"]),"fill-extrusion-translate":new bb(ra["paint_fill-extrusion"]["fill-extrusion-translate"]),"fill-extrusion-translate-anchor":new bb(ra["paint_fill-extrusion"]["fill-extrusion-translate-anchor"]),"fill-extrusion-pattern":new Jd(ra["paint_fill-extrusion"]["fill-extrusion-pattern"]),"fill-extrusion-height":new fb(ra["paint_fill-extrusion"]["fill-extrusion-height"]),
"fill-extrusion-base":new fb(ra["paint_fill-extrusion"]["fill-extrusion-base"])})},Sf=function(a){function b(b){a.call(this,b,Pc)}return a&&(b.__proto__=a),b.prototype=Object.create(a&&a.prototype),b.prototype.constructor=b,b.prototype.createBucket=function(a){return new kd(a)},b.prototype.queryRadius=function(){return $c(this.paint.get("fill-extrusion-translate"))},b.prototype.queryIntersectsFeature=function(a,b,c,d,e,g){return Eb(ld(a,this.paint.get("fill-extrusion-translate"),this.paint.get("fill-extrusion-translate-anchor"),
e.angle,g),c)},b.prototype.hasOffscreenPass=function(){return 0!==this.paint.get("fill-extrusion-opacity")&&"none"!==this.visibility},b.prototype.resize=function(){this.viewportFrame&&(this.viewportFrame.destroy(),this.viewportFrame=null)},b}(Kd),wh=vb([{name:"a_pos_normal",components:4,type:"Int16"},{name:"a_data",components:4,type:"Uint8"}],4).members;pc.types=["Unknown","Point","LineString","Polygon"];pc.prototype.loadGeometry=function(){var a=this._pbf;a.pos=this._geometry;for(var b,c=a.readVarint()+
a.pos,d=1,e=0,g=0,f=0,h=[];a.pos<c;)if(0>=e&&(e=a.readVarint(),d=7&e,e>>=3),e--,1===d||2===d)g+=a.readSVarint(),f+=a.readSVarint(),1===d&&(b&&h.push(b),b=[]),b.push(new Wb(g,f));else{if(7!==d)throw Error("unknown command "+d);b&&b.push(b[0].clone())}return b&&h.push(b),h};pc.prototype.bbox=function(){var a=this._pbf;a.pos=this._geometry;for(var b=a.readVarint()+a.pos,c=1,d=0,e=0,g=0,f=1/0,h=-1/0,k=1/0,n=-1/0;a.pos<b;)if(0>=d&&(d=a.readVarint(),c=7&d,d>>=3),d--,1===c||2===c)(e+=a.readSVarint())<f&&
(f=e),e>h&&(h=e),(g+=a.readSVarint())<k&&(k=g),g>n&&(n=g);else if(7!==c)throw Error("unknown command "+c);return[f,k,h,n]};pc.prototype.toGeoJSON=function(a,b,c){function d(a){for(var b=0;b<a.length;b++){var c=a[b];a[b]=[360*(c.x+g)/e-180,360/Math.PI*Math.atan(Math.exp((180-360*(c.y+f)/e)*Math.PI/180))-90]}}var e=this.extent*Math.pow(2,c),g=this.extent*a,f=this.extent*b;b=this.loadGeometry();c=pc.types[this.type];switch(this.type){case 1:var h=[];for(a=0;a<b.length;a++)h[a]=b[a][0];d(b=h);break;case 2:for(a=
0;a<b.length;a++)d(b[a]);break;case 3:for(b=function(a){var b=a.length;if(1>=b)return[a];for(var c,d,e=[],g=0;g<b;g++){var f=void 0;for(var h,k=a[g],n=0,t=0,m=k.length,v=m-1;t<m;v=t++)h=k[t],n+=((f=k[v]).x-h.x)*(h.y+f.y);f=n;0!==f&&(void 0===d&&(d=0>f),d===0>f?(c&&e.push(c),c=[a[g]]):c.push(a[g]))}c&&e.push(c);return e}(b),a=0;a<b.length;a++)for(h=0;h<b[a].length;h++)d(b[a][h])}1===b.length?b=b[0]:c="Multi"+c;a={type:"Feature",geometry:{type:c,coordinates:b},properties:this.properties};return"id"in
this&&(a.id=this.id),a};var gi=wb;wb.prototype.feature=function(a){if(0>a||a>=this._features.length)throw Error("feature index out of bounds");this._pbf.pos=this._features[a];a=this._pbf.readVarint()+this._pbf.pos;return new pc(this._pbf,a,this.extent,this._keys,this._values)};var qf={VectorTile:function(a,b){this.layers=a.readFields(Zd,{},b)},VectorTileFeature:pc,VectorTileLayer:gi},ki=qf.VectorTileFeature.types,Mh=Math.cos(Math.PI/180*37.5),hb=Math.pow(2,14)/.5,Ge=function(a){this.zoom=a.zoom;this.overscaling=
a.overscaling;this.layers=a.layers;this.layerIds=this.layers.map(function(a){return a.id});this.index=a.index;this.layoutVertexArray=new Ve;this.indexArray=new Ud;this.programConfigurations=new id(wh,a.layers,a.zoom);this.segments=new Xc};Ge.prototype.populate=function(a,b){for(var c=0;c<a.length;c+=1){var d=a[c],e=d.feature,g=d.index;d=d.sourceLayerIndex;if(this.layers[0]._featureFilter(new Bc(this.zoom),e)){var f=Tb(e);this.addFeature(e,f);b.featureIndex.insert(e,f,g,d,this.index)}}};Ge.prototype.isEmpty=
function(){return 0===this.layoutVertexArray.length};Ge.prototype.upload=function(a){this.layoutVertexBuffer=a.createVertexBuffer(this.layoutVertexArray,wh);this.indexBuffer=a.createIndexBuffer(this.indexArray);this.programConfigurations.upload(a)};Ge.prototype.destroy=function(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy())};Ge.prototype.addFeature=function(a,b){var c=this.layers[0].layout,d=c.get("line-join").evaluate(a),
e=c.get("line-cap"),g=c.get("line-miter-limit");c=c.get("line-round-limit");for(var f=0;f<b.length;f+=1)this.addLine(b[f],a,d,e,g,c)};Ge.prototype.addLine=function(a,b,c,d,e,g){var f=null;b.properties&&b.properties.hasOwnProperty("mapbox_clip_start")&&b.properties.hasOwnProperty("mapbox_clip_end")&&(f={start:b.properties.mapbox_clip_start,end:b.properties.mapbox_clip_end,tileTotal:void 0});for(var h="Polygon"===ki[b.type],k=a.length;2<=k&&a[k-1].equals(a[k-2]);)k--;for(var n=0;n<k-1&&a[n].equals(a[n+
1]);)n++;if(!(k<(h?3:2))){if(f){for(var t=f,m=k,v,r,u=0,l=n;l<m-1;l++)v=a[l],r=a[l+1],u+=v.dist(r);t.tileTotal=u}"bevel"===c&&(e=1.05);t=8192/(512*this.overscaling)*15;var p=a[n];m=this.segments.prepareSegment(10*k,this.layoutVertexArray,this.indexArray);this.distance=0;var y,q,B;v=h?"butt":d;var A=!0,D=l=u=r=void 0;this.e1=this.e2=this.e3=-1;h&&(y=a[k-2],D=p.sub(y)._unit()._perp());for(p=n;p<k;p++)if(!(u=h&&p===k-1?a[n+1]:a[p+1])||!a[p].equals(u)){D&&(l=D);y&&(r=y);y=a[p];D=u?u.sub(y)._unit()._perp():
l;var C=(l=l||D).add(D);0===C.x&&0===C.y||C._unit();var G=C.x*D.x+C.y*D.y,L=0!==G?1/G:1/0,E=G<Mh&&r&&u;if(E&&p>n){var I=y.dist(r);I>2*t&&(I=y.sub(y.sub(r)._mult(t/I)._round()),this.distance+=I.dist(r),this.addCurrentVertex(I,this.distance,l.mult(1),0,0,!1,m,f),r=I)}var N=(I=r&&u)?c:u?d:v;if(I&&"round"===N&&(L<g?N="miter":2>=L&&(N="fakeround")),"miter"===N&&L>e&&(N="bevel"),"bevel"===N&&(2<L&&(N="flipbevel"),L<e&&(N="miter")),r&&(this.distance+=y.dist(r)),"miter"===N)C._mult(L),this.addCurrentVertex(y,
this.distance,C,0,0,!1,m,f);else if("flipbevel"===N)100<L?C=D.clone().mult(-1):(A=0<l.x*D.y-l.y*D.x?-1:1,I=L*l.add(D).mag()/l.sub(D).mag(),C._perp()._mult(I*A)),this.addCurrentVertex(y,this.distance,C,0,0,!1,m,f),this.addCurrentVertex(y,this.distance,C.mult(-1),0,0,!1,m,f);else if("bevel"===N||"fakeround"===N){I=0<l.x*D.y-l.y*D.x;L=-Math.sqrt(L*L-1);if(I?(B=0,q=L):(q=0,B=L),A||this.addCurrentVertex(y,this.distance,l,q,B,!1,m,f),"fakeround"===N){A=Math.floor(8*(.5-(G-.5)));for(L=0;L<A;L++)G=D.mult((L+
1)/(A+1))._add(l)._unit(),this.addPieSliceVertex(y,this.distance,G,I,m,f);this.addPieSliceVertex(y,this.distance,C,I,m,f);for(C=A-1;0<=C;C--)G=l.mult((C+1)/(A+1))._add(D)._unit(),this.addPieSliceVertex(y,this.distance,G,I,m,f)}u&&this.addCurrentVertex(y,this.distance,D,-q,-B,!1,m,f)}else"butt"===N?(A||this.addCurrentVertex(y,this.distance,l,0,0,!1,m,f),u&&this.addCurrentVertex(y,this.distance,D,0,0,!1,m,f)):"square"===N?(A||(this.addCurrentVertex(y,this.distance,l,1,1,!1,m,f),this.e1=this.e2=-1),
u&&this.addCurrentVertex(y,this.distance,D,-1,-1,!1,m,f)):"round"===N&&(A||(this.addCurrentVertex(y,this.distance,l,0,0,!1,m,f),this.addCurrentVertex(y,this.distance,l,1,1,!0,m,f),this.e1=this.e2=-1),u&&(this.addCurrentVertex(y,this.distance,D,-1,-1,!0,m,f),this.addCurrentVertex(y,this.distance,D,0,0,!1,m,f)));E&&p<k-1&&(E=y.dist(u),E>2*t&&(E=y.add(u.sub(y)._mult(t/E)._round()),this.distance+=E.dist(y),this.addCurrentVertex(E,this.distance,D.mult(1),0,0,!1,m,f),y=E));A=!1}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,
b)}};Ge.prototype.addCurrentVertex=function(a,b,c,d,e,g,f,h){var k=this.layoutVertexArray,n=this.indexArray;h&&(b=(b/h.tileTotal*(h.end-h.start)+h.start)*(hb-1));var t=c.clone();d&&t._sub(c.perp()._mult(d));Ne(k,a,t,g,!1,d,b);this.e3=f.vertexLength++;0<=this.e1&&0<=this.e2&&(n.emplaceBack(this.e1,this.e2,this.e3),f.primitiveLength++);this.e1=this.e2;this.e2=this.e3;t=c.mult(-1);e&&t._sub(c.perp()._mult(e));Ne(k,a,t,g,!0,-e,b);this.e3=f.vertexLength++;0<=this.e1&&0<=this.e2&&(n.emplaceBack(this.e1,
this.e2,this.e3),f.primitiveLength++);this.e1=this.e2;this.e2=this.e3;b>hb/2&&!h&&(this.distance=0,this.addCurrentVertex(a,this.distance,c,d,e,g,f))};Ge.prototype.addPieSliceVertex=function(a,b,c,d,e,g){c=c.mult(d?-1:1);var f=this.layoutVertexArray,h=this.indexArray;g&&(b=(b/g.tileTotal*(g.end-g.start)+g.start)*(hb-1));Ne(f,a,c,!1,d,0,b);this.e3=e.vertexLength++;0<=this.e1&&0<=this.e2&&(h.emplaceBack(this.e1,this.e2,this.e3),e.primitiveLength++);d?this.e2=this.e3:this.e1=this.e3};Ha("LineBucket",
Ge,{omit:["layers"]});var hi=new jd({"line-cap":new bb(ra.layout_line["line-cap"]),"line-join":new fb(ra.layout_line["line-join"]),"line-miter-limit":new bb(ra.layout_line["line-miter-limit"]),"line-round-limit":new bb(ra.layout_line["line-round-limit"])}),Of={paint:new jd({"line-opacity":new fb(ra.paint_line["line-opacity"]),"line-color":new fb(ra.paint_line["line-color"]),"line-translate":new bb(ra.paint_line["line-translate"]),"line-translate-anchor":new bb(ra.paint_line["line-translate-anchor"]),
"line-width":new fb(ra.paint_line["line-width"]),"line-gap-width":new fb(ra.paint_line["line-gap-width"]),"line-offset":new fb(ra.paint_line["line-offset"]),"line-blur":new fb(ra.paint_line["line-blur"]),"line-dasharray":new Jd(ra.paint_line["line-dasharray"]),"line-pattern":new Jd(ra.paint_line["line-pattern"]),"line-gradient":new ie(ra.paint_line["line-gradient"])}),layout:hi},dh=new (function(a){function b(){a.apply(this,arguments)}return a&&(b.__proto__=a),b.prototype=Object.create(a&&a.prototype),
b.prototype.constructor=b,b.prototype.possiblyEvaluate=function(b,c){return c=new Bc(Math.floor(c.zoom),{now:c.now,fadeDuration:c.fadeDuration,zoomHistory:c.zoomHistory,transition:c.transition}),a.prototype.possiblyEvaluate.call(this,b,c)},b.prototype.evaluate=function(b,c,d){return c=k({},c,{zoom:Math.floor(c.zoom)}),a.prototype.evaluate.call(this,b,c,d)},b}(fb))(Of.paint.properties["line-width"].specification);dh.useIntegerZoom=!0;var rg=function(a){function b(b){a.call(this,b,Of)}return a&&(b.__proto__=
a),b.prototype=Object.create(a&&a.prototype),b.prototype.constructor=b,b.prototype.setPaintProperty=function(b,c,d){a.prototype.setPaintProperty.call(this,b,c,d);"line-gradient"===b&&this._updateGradient()},b.prototype._updateGradient=function(){this.gradient=tc(this._transitionablePaint._values["line-gradient"].value.expression,"lineProgress");this.gradientTexture=null},b.prototype.recalculate=function(b){a.prototype.recalculate.call(this,b);this.paint._values["line-floorwidth"]=dh.possiblyEvaluate(this._transitioningPaint._values["line-width"].value,
b)},b.prototype.createBucket=function(a){return new Ge(a)},b.prototype.queryRadius=function(a){var b=Cc("line-width",this,a);var c=Cc("line-gap-width",this,a);b=0<c?c+2*b:b;a=Cc("line-offset",this,a);return b/2+Math.abs(a)+$c(this.paint.get("line-translate"))},b.prototype.queryIntersectsFeature=function(a,b,c,d,e,g){a=ld(a,this.paint.get("line-translate"),this.paint.get("line-translate-anchor"),e.angle,g);d=this.paint.get("line-width").evaluate(b);e=this.paint.get("line-gap-width").evaluate(b);d=
g/2*(0<e?e+2*d:d);if(b=this.paint.get("line-offset").evaluate(b)){g*=b;b=[];e=new Wb(0,0);for(var f=0;f<c.length;f++){for(var h=c[f],k=[],n=0;n<h.length;n++){var t=h[n-1],m=h[n],v=h[n+1];t=0===n?e:m.sub(t)._unit()._perp();v=n===h.length-1?e:v.sub(m)._unit()._perp();t=t._add(v)._unit();t._mult(1/(t.x*v.x+t.y*v.y));k.push(t._mult(g)._add(m))}b.push(k)}c=b}return Hc(a,c,d)},b}(Kd),Lg=vb([{name:"a_pos_offset",components:4,type:"Int16"},{name:"a_data",components:4,type:"Uint16"}]),Ib=vb([{name:"a_projected_pos",
components:3,type:"Float32"}],4),Nh=(vb([{name:"a_fade_opacity",components:1,type:"Uint32"}],4),vb([{name:"a_placed",components:2,type:"Uint8"}],4)),Pf=(vb([{type:"Int16",name:"anchorPointX"},{type:"Int16",name:"anchorPointY"},{type:"Int16",name:"x1"},{type:"Int16",name:"y1"},{type:"Int16",name:"x2"},{type:"Int16",name:"y2"},{type:"Uint32",name:"featureIndex"},{type:"Uint16",name:"sourceLayerIndex"},{type:"Uint16",name:"bucketIndex"},{type:"Int16",name:"radius"},{type:"Int16",name:"signedDistanceFromAnchor"}]),
vb([{name:"a_pos",components:2,type:"Int16"},{name:"a_anchor_pos",components:2,type:"Int16"},{name:"a_extrude",components:2,type:"Int16"}],4)),Oh=vb([{name:"a_pos",components:2,type:"Int16"},{name:"a_anchor_pos",components:2,type:"Int16"},{name:"a_extrude",components:2,type:"Int16"}],4);vb([{type:"Int16",name:"anchorX"},{type:"Int16",name:"anchorY"},{type:"Uint16",name:"glyphStartIndex"},{type:"Uint16",name:"numGlyphs"},{type:"Uint32",name:"vertexStartIndex"},{type:"Uint32",name:"lineStartIndex"},
{type:"Uint32",name:"lineLength"},{type:"Uint16",name:"segment"},{type:"Uint16",name:"lowerSize"},{type:"Uint16",name:"upperSize"},{type:"Float32",name:"lineOffsetX"},{type:"Float32",name:"lineOffsetY"},{type:"Uint8",name:"writingMode"},{type:"Uint8",name:"hidden"}]);vb([{type:"Float32",name:"offsetX"}]);vb([{type:"Int16",name:"x"},{type:"Int16",name:"y"},{type:"Int16",name:"tileUnitDistanceFromAnchor"}]);var We={"!":"︕","#":"＃",$:"＄","%":"％","\x26":"＆","(":"︵",")":"︶","*":"＊","+":"＋",",":"︐","-":"︲",
".":"・","/":"／",":":"︓",";":"︔","\x3c":"︿","\x3d":"＝","\x3e":"﹀","?":"︖","@":"＠","[":"﹇","\\":"＼","]":"﹈","^":"＾",_:"︳","`":"｀","{":"︷","|":"―","}":"︸","~":"～","¢":"￠","£":"￡","¥":"￥","¦":"￤","¬":"￢","¯":"￣","–":"︲","—":"︱","‘":"﹃","’":"﹄","“":"﹁","”":"﹂","…":"︙","‧":"・","₩":"￦","、":"︑","。":"︒","〈":"︿","〉":"﹀","《":"︽","》":"︾","「":"﹁","」":"﹂","『":"﹃","』":"﹄","【":"︻","】":"︼","〔":"︹","〕":"︺","〖":"︗","〗":"︘","！":"︕","（":"︵","）":"︶","，":"︐","－":"︲","．":"・","：":"︓","；":"︔","＜":"︿","＞":"﹀","？":"︖","［":"﹇",
"］":"﹈","＿":"︳","｛":"︷","｜":"―","｝":"︸","｟":"︵","｠":"︶","｡":"︒","｢":"﹁","｣":"﹂"},ii=function(a){function b(b,c,d,e){a.call(this,b,c);this.angle=d;void 0!==e&&(this.segment=e)}return a&&(b.__proto__=a),b.prototype=Object.create(a&&a.prototype),b.prototype.constructor=b,b.prototype.clone=function(){return new b(this.x,this.y,this.angle,this.segment)},b}(Wb);Ha("Anchor",ii);var Ph=qf.VectorTileFeature.types,ib=[{name:"a_fade_opacity",components:1,type:"Uint8",offset:0}],vd=function(a){this.layoutVertexArray=
new je;this.indexArray=new Ud;this.programConfigurations=a;this.segments=new Xc;this.dynamicLayoutVertexArray=new sf;this.opacityVertexArray=new Ye;this.placedSymbolArray=new ig};vd.prototype.upload=function(a,b){this.layoutVertexBuffer=a.createVertexBuffer(this.layoutVertexArray,Lg.members);this.indexBuffer=a.createIndexBuffer(this.indexArray,b);this.programConfigurations.upload(a);this.dynamicLayoutVertexBuffer=a.createVertexBuffer(this.dynamicLayoutVertexArray,Ib.members,!0);this.opacityVertexBuffer=
a.createVertexBuffer(this.opacityVertexArray,ib,!0);this.opacityVertexBuffer.itemSize=1};vd.prototype.destroy=function(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.dynamicLayoutVertexBuffer.destroy(),this.opacityVertexBuffer.destroy())};Ha("SymbolBuffers",vd);var eh=function(a,b,c){this.layoutVertexArray=new a;this.layoutAttributes=b;this.indexArray=new c;this.segments=new Xc;this.collisionVertexArray=
new hg};eh.prototype.upload=function(a){this.layoutVertexBuffer=a.createVertexBuffer(this.layoutVertexArray,this.layoutAttributes);this.indexBuffer=a.createIndexBuffer(this.indexArray);this.collisionVertexBuffer=a.createVertexBuffer(this.collisionVertexArray,Nh.members,!0)};eh.prototype.destroy=function(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.segments.destroy(),this.collisionVertexBuffer.destroy())};Ha("CollisionBuffers",eh);var xb=function(a){this.collisionBoxArray=
a.collisionBoxArray;this.zoom=a.zoom;this.overscaling=a.overscaling;this.layers=a.layers;this.layerIds=this.layers.map(function(a){return a.id});this.index=a.index;this.pixelRatio=a.pixelRatio;this.sourceLayerIndex=a.sourceLayerIndex;a=this.layers[0]._unevaluatedLayout._values;this.textSizeData=pd(this.zoom,a["text-size"]);this.iconSizeData=pd(this.zoom,a["icon-size"]);a=this.layers[0].layout;this.sortFeaturesByY=a.get("text-allow-overlap")||a.get("icon-allow-overlap")||a.get("text-ignore-placement")||
a.get("icon-ignore-placement")};xb.prototype.createArrays=function(){this.text=new vd(new id(Lg.members,this.layers,this.zoom,function(a){return/^text/.test(a)}));this.icon=new vd(new id(Lg.members,this.layers,this.zoom,function(a){return/^icon/.test(a)}));this.collisionBox=new eh(gg,Pf.members,Ke);this.collisionCircle=new eh(gg,Oh.members,Ud);this.glyphOffsetArray=new Lh;this.lineVertexArray=new hh};xb.prototype.populate=function(a,b){var c=this.layers[0],d=c.layout,e=d.get("text-font"),g=d.get("text-field"),
f=d.get("icon-image");g=("constant"!==g.value.kind||0<g.value.value.length)&&("constant"!==e.value.kind||0<e.value.value.length);f="constant"!==f.value.kind||f.value.value&&0<f.value.value.length;if(this.features=[],g||f){var h=b.iconDependencies;b=b.glyphDependencies;for(var k=new Bc(this.zoom),n=0;n<a.length;n+=1){var t=a[n],m=t.feature,v=t.index,r=t.sourceLayerIndex;if(c._featureFilter(k,m)){t=void 0;g&&(t=Uc(t=c.getValueAndResolveTokens("text-field",m),c,m));var u=void 0;if(f&&(u=c.getValueAndResolveTokens("icon-image",
m)),t||u)if(v={text:t,icon:u,index:v,sourceLayerIndex:r,geometry:Tb(m),properties:m.properties,type:Ph[m.type]},void 0!==m.id&&(v.id=m.id),this.features.push(v),u&&(h[u]=!0),t)for(m=e.evaluate(m).join(","),m=b[m]=b[m]||{},v="map"===d.get("text-rotation-alignment")&&"line"===d.get("symbol-placement"),u=oc(t),r=0;r<t.length;r++)if(m[t.charCodeAt(r)]=!0,v&&u){var l=We[t.charAt(r)];l&&(m[l.charCodeAt(0)]=!0)}}}"line"===d.get("symbol-placement")&&(this.features=function(a){function b(a,b,c){var d=g[a];
return delete g[a],g[b]=d,f[d].geometry[0].pop(),f[d].geometry[0]=f[d].geometry[0].concat(c[0]),d}function c(a,b,c){var d=e[b];return delete e[b],e[a]=d,f[d].geometry[0].shift(),f[d].geometry[0]=c[0].concat(f[d].geometry[0]),d}function d(a,b,c){b=c?b[0][b[0].length-1]:b[0][0];return a+":"+b.x+":"+b.y}for(var e={},g={},f=[],h=0,k=0;k<a.length;k++){var n=a[k],t=n.geometry;if(n=n.text){var m=d(n,t),v=d(n,t,!0);if(m in g&&v in e&&g[m]!==e[v]){t=c(m,v,t);var r=b(m,v,f[t].geometry);delete e[m];delete g[v];
g[d(n,f[r].geometry,!0)]=r;f[t].geometry=null}else m in g?b(m,v,t):v in e?c(m,v,t):(f.push(a[k]),h++,e[m]=h-1,g[v]=h-1)}else f.push(a[k]),h++}return f.filter(function(a){return a.geometry})}(this.features))}};xb.prototype.isEmpty=function(){return 0===this.symbolInstances.length};xb.prototype.upload=function(a){this.text.upload(a,this.sortFeaturesByY);this.icon.upload(a,this.sortFeaturesByY);this.collisionBox.upload(a);this.collisionCircle.upload(a)};xb.prototype.destroy=function(){this.text.destroy();
this.icon.destroy();this.collisionBox.destroy();this.collisionCircle.destroy()};xb.prototype.addToLineVertexArray=function(a,b){var c=this.lineVertexArray.length;if(void 0!==a.segment){for(var d=a.dist(b[a.segment+1]),e=a.dist(b[a.segment]),g={},f=a.segment+1;f<b.length;f++)g[f]={x:b[f].x,y:b[f].y,tileUnitDistanceFromAnchor:d},f<b.length-1&&(d+=b[f+1].dist(b[f]));for(a=a.segment||0;0<=a;a--)g[a]={x:b[a].x,y:b[a].y,tileUnitDistanceFromAnchor:e},0<a&&(e+=b[a-1].dist(b[a]));for(e=0;e<b.length;e++)a=
g[e],this.lineVertexArray.emplaceBack(a.x,a.y,a.tileUnitDistanceFromAnchor)}return{lineStartIndex:c,lineLength:this.lineVertexArray.length-c}};xb.prototype.addSymbols=function(a,b,c,d,e,g,f,h,k,n){e=a.indexArray;for(var t=a.layoutVertexArray,m=a.dynamicLayoutVertexArray,v=a.segments.prepareSegment(4*b.length,a.layoutVertexArray,a.indexArray),r=this.glyphOffsetArray.length,u=v.vertexLength,l=0;l<b.length;l+=1){var p=b[l],y=p.tl,q=p.tr,B=p.bl,A=p.br,D=p.tex,C=v.vertexLength,G=p.glyphOffset[1];Bd(t,
h.x,h.y,y.x,G+y.y,D.x,D.y,c);Bd(t,h.x,h.y,q.x,G+q.y,D.x+D.w,D.y,c);Bd(t,h.x,h.y,B.x,G+B.y,D.x,D.y+D.h,c);Bd(t,h.x,h.y,A.x,G+A.y,D.x+D.w,D.y+D.h,c);uc(m,h,0);e.emplaceBack(C,C+1,C+2);e.emplaceBack(C+1,C+2,C+3);v.vertexLength+=4;v.primitiveLength+=2;this.glyphOffsetArray.emplaceBack(p.glyphOffset[0])}a.placedSymbolArray.emplaceBack(h.x,h.y,r,this.glyphOffsetArray.length-r,u,k,n,h.segment,c?c[0]:0,c?c[1]:0,d[0],d[1],f,!1);a.programConfigurations.populatePaintArrays(a.layoutVertexArray.length,g)};xb.prototype._addCollisionDebugVertex=
function(a,b,c,d,e){return b.emplaceBack(0,0),a.emplaceBack(c.x,c.y,d.x,d.y,Math.round(e.x),Math.round(e.y))};xb.prototype.addCollisionDebugVertices=function(a,b,c,d,e,g,f,h){var k=e.segments.prepareSegment(4,e.layoutVertexArray,e.indexArray),n=k.vertexLength,t=e.layoutVertexArray,m=e.collisionVertexArray;(this._addCollisionDebugVertex(t,m,g,f.anchor,new Wb(a,b)),this._addCollisionDebugVertex(t,m,g,f.anchor,new Wb(c,b)),this._addCollisionDebugVertex(t,m,g,f.anchor,new Wb(c,d)),this._addCollisionDebugVertex(t,
m,g,f.anchor,new Wb(a,d)),k.vertexLength+=4,h)?(a=e.indexArray,a.emplaceBack(n,n+1,n+2),a.emplaceBack(n,n+2,n+3),k.primitiveLength+=2):(a=e.indexArray,a.emplaceBack(n,n+1),a.emplaceBack(n+1,n+2),a.emplaceBack(n+2,n+3),a.emplaceBack(n+3,n),k.primitiveLength+=4)};xb.prototype.generateCollisionDebugBuffers=function(){for(var a=0,b=this.symbolInstances;a<b.length;a+=1){var c=b[a];c.textCollisionFeature={boxStartIndex:c.textBoxStartIndex,boxEndIndex:c.textBoxEndIndex};c.iconCollisionFeature={boxStartIndex:c.iconBoxStartIndex,
boxEndIndex:c.iconBoxEndIndex};for(var d=0;2>d;d++){var e=c[0===d?"textCollisionFeature":"iconCollisionFeature"];if(e)for(var g=e.boxStartIndex;g<e.boxEndIndex;g++){var f=this.collisionBoxArray.get(g),h=0<f.radius;this.addCollisionDebugVertices(f.x1,f.y1,f.x2,f.y2,h?this.collisionCircle:this.collisionBox,f.anchorPoint,c,h)}}}};xb.prototype.deserializeCollisionBoxes=function(a,b,c,d,e){for(var g={};b<c;b++){var f=a.get(b);if(0===f.radius){g.textBox={x1:f.x1,y1:f.y1,x2:f.x2,y2:f.y2,anchorPointX:f.anchorPointX,
anchorPointY:f.anchorPointY};g.textFeatureIndex=f.featureIndex;break}g.textCircles||(g.textCircles=[],g.textFeatureIndex=f.featureIndex);g.textCircles.push(f.anchorPointX,f.anchorPointY,f.radius,f.signedDistanceFromAnchor,1)}for(c=d;c<e;c++)if(d=a.get(c),0===d.radius){g.iconBox={x1:d.x1,y1:d.y1,x2:d.x2,y2:d.y2,anchorPointX:d.anchorPointX,anchorPointY:d.anchorPointY};g.iconFeatureIndex=d.featureIndex;break}return g};xb.prototype.hasTextData=function(){return 0<this.text.segments.get().length};xb.prototype.hasIconData=
function(){return 0<this.icon.segments.get().length};xb.prototype.hasCollisionBoxData=function(){return 0<this.collisionBox.segments.get().length};xb.prototype.hasCollisionCircleData=function(){return 0<this.collisionCircle.segments.get().length};xb.prototype.sortFeatures=function(a){var b=this;if(this.sortFeaturesByY&&this.sortedAngle!==a&&(this.sortedAngle=a,!(1<this.text.segments.get().length||1<this.icon.segments.get().length))){for(var c=[],d=0;d<this.symbolInstances.length;d++)c.push(d);var e=
Math.sin(a),g=Math.cos(a);c.sort(function(a,c){a=b.symbolInstances[a];c=b.symbolInstances[c];return(e*a.anchor.x+g*a.anchor.y|0)-(e*c.anchor.x+g*c.anchor.y|0)||c.featureIndex-a.featureIndex});this.text.indexArray.clear();this.icon.indexArray.clear();this.featureSortOrder=[];for(a=0;a<c.length;a+=1){d=c[a];var f=b.symbolInstances[d];b.featureSortOrder.push(f.featureIndex);var h=0;for(f=f.placedTextSymbolIndices;h<f.length;h+=1){var k=b.text.placedSymbolArray.get(f[h]),n=k.vertexStartIndex+4*k.numGlyphs;
for(k=k.vertexStartIndex;k<n;k+=4)b.text.indexArray.emplaceBack(k,k+1,k+2),b.text.indexArray.emplaceBack(k+1,k+2,k+3)}d=b.icon.placedSymbolArray.get(d);d.numGlyphs&&(d=d.vertexStartIndex,b.icon.indexArray.emplaceBack(d,d+1,d+2),b.icon.indexArray.emplaceBack(d+1,d+2,d+3))}this.text.indexBuffer&&this.text.indexBuffer.updateData(this.text.indexArray);this.icon.indexBuffer&&this.icon.indexBuffer.updateData(this.icon.indexArray)}};Ha("SymbolBucket",xb,{omit:["layers","collisionBoxArray","features","compareText"],
shallow:["symbolInstances"]});xb.MAX_GLYPHS=65535;xb.addDynamicAttributes=uc;var jb=new jd({"symbol-placement":new bb(ra.layout_symbol["symbol-placement"]),"symbol-spacing":new bb(ra.layout_symbol["symbol-spacing"]),"symbol-avoid-edges":new bb(ra.layout_symbol["symbol-avoid-edges"]),"icon-allow-overlap":new bb(ra.layout_symbol["icon-allow-overlap"]),"icon-ignore-placement":new bb(ra.layout_symbol["icon-ignore-placement"]),"icon-optional":new bb(ra.layout_symbol["icon-optional"]),"icon-rotation-alignment":new bb(ra.layout_symbol["icon-rotation-alignment"]),
"icon-size":new fb(ra.layout_symbol["icon-size"]),"icon-text-fit":new bb(ra.layout_symbol["icon-text-fit"]),"icon-text-fit-padding":new bb(ra.layout_symbol["icon-text-fit-padding"]),"icon-image":new fb(ra.layout_symbol["icon-image"]),"icon-rotate":new fb(ra.layout_symbol["icon-rotate"]),"icon-padding":new bb(ra.layout_symbol["icon-padding"]),"icon-keep-upright":new bb(ra.layout_symbol["icon-keep-upright"]),"icon-offset":new fb(ra.layout_symbol["icon-offset"]),"icon-anchor":new fb(ra.layout_symbol["icon-anchor"]),
"icon-pitch-alignment":new bb(ra.layout_symbol["icon-pitch-alignment"]),"text-pitch-alignment":new bb(ra.layout_symbol["text-pitch-alignment"]),"text-rotation-alignment":new bb(ra.layout_symbol["text-rotation-alignment"]),"text-field":new fb(ra.layout_symbol["text-field"]),"text-font":new fb(ra.layout_symbol["text-font"]),"text-size":new fb(ra.layout_symbol["text-size"]),"text-max-width":new fb(ra.layout_symbol["text-max-width"]),"text-line-height":new bb(ra.layout_symbol["text-line-height"]),"text-letter-spacing":new fb(ra.layout_symbol["text-letter-spacing"]),
"text-justify":new fb(ra.layout_symbol["text-justify"]),"text-anchor":new fb(ra.layout_symbol["text-anchor"]),"text-max-angle":new bb(ra.layout_symbol["text-max-angle"]),"text-rotate":new fb(ra.layout_symbol["text-rotate"]),"text-padding":new bb(ra.layout_symbol["text-padding"]),"text-keep-upright":new bb(ra.layout_symbol["text-keep-upright"]),"text-transform":new fb(ra.layout_symbol["text-transform"]),"text-offset":new fb(ra.layout_symbol["text-offset"]),"text-allow-overlap":new bb(ra.layout_symbol["text-allow-overlap"]),
"text-ignore-placement":new bb(ra.layout_symbol["text-ignore-placement"]),"text-optional":new bb(ra.layout_symbol["text-optional"])}),Yb={paint:new jd({"icon-opacity":new fb(ra.paint_symbol["icon-opacity"]),"icon-color":new fb(ra.paint_symbol["icon-color"]),"icon-halo-color":new fb(ra.paint_symbol["icon-halo-color"]),"icon-halo-width":new fb(ra.paint_symbol["icon-halo-width"]),"icon-halo-blur":new fb(ra.paint_symbol["icon-halo-blur"]),"icon-translate":new bb(ra.paint_symbol["icon-translate"]),"icon-translate-anchor":new bb(ra.paint_symbol["icon-translate-anchor"]),
"text-opacity":new fb(ra.paint_symbol["text-opacity"]),"text-color":new fb(ra.paint_symbol["text-color"]),"text-halo-color":new fb(ra.paint_symbol["text-halo-color"]),"text-halo-width":new fb(ra.paint_symbol["text-halo-width"]),"text-halo-blur":new fb(ra.paint_symbol["text-halo-blur"]),"text-translate":new bb(ra.paint_symbol["text-translate"]),"text-translate-anchor":new bb(ra.paint_symbol["text-translate-anchor"])}),layout:jb},lg=function(a){function b(b){a.call(this,b,Yb)}return a&&(b.__proto__=
a),b.prototype=Object.create(a&&a.prototype),b.prototype.constructor=b,b.prototype.recalculate=function(b){a.prototype.recalculate.call(this,b);"auto"===this.layout.get("icon-rotation-alignment")&&("line"===this.layout.get("symbol-placement")?this.layout._values["icon-rotation-alignment"]="map":this.layout._values["icon-rotation-alignment"]="viewport");"auto"===this.layout.get("text-rotation-alignment")&&("line"===this.layout.get("symbol-placement")?this.layout._values["text-rotation-alignment"]=
"map":this.layout._values["text-rotation-alignment"]="viewport");"auto"===this.layout.get("text-pitch-alignment")&&(this.layout._values["text-pitch-alignment"]=this.layout.get("text-rotation-alignment"));"auto"===this.layout.get("icon-pitch-alignment")&&(this.layout._values["icon-pitch-alignment"]=this.layout.get("icon-rotation-alignment"))},b.prototype.getValueAndResolveTokens=function(a,b){var c,d=this.layout.get(a).evaluate(b);a=this._unevaluatedLayout._values[a];return a.isDataDriven()||Ga(a.value)?
d:(c=b.properties,d.replace(/{([^{}]+)}/g,function(a,b){return b in c?String(c[b]):""}))},b.prototype.createBucket=function(a){return new xb(a)},b.prototype.queryRadius=function(){return 0},b.prototype.queryIntersectsFeature=function(){return!1},b}(Kd),Qh={paint:new jd({"background-color":new bb(ra.paint_background["background-color"]),"background-pattern":new Jd(ra.paint_background["background-pattern"]),"background-opacity":new bb(ra.paint_background["background-opacity"])})},Rg=function(a){function b(b){a.call(this,
b,Qh)}return a&&(b.__proto__=a),b.prototype=Object.create(a&&a.prototype),b.prototype.constructor=b,b}(Kd),wg={paint:new jd({"raster-opacity":new bb(ra.paint_raster["raster-opacity"]),"raster-hue-rotate":new bb(ra.paint_raster["raster-hue-rotate"]),"raster-brightness-min":new bb(ra.paint_raster["raster-brightness-min"]),"raster-brightness-max":new bb(ra.paint_raster["raster-brightness-max"]),"raster-saturation":new bb(ra.paint_raster["raster-saturation"]),"raster-contrast":new bb(ra.paint_raster["raster-contrast"]),
"raster-fade-duration":new bb(ra.paint_raster["raster-fade-duration"])})},vg={circle:Pg,heatmap:jg,hillshade:Uh,fill:Vh,"fill-extrusion":Sf,line:rg,symbol:lg,background:Rg,raster:function(a){function b(b){a.call(this,b,wg)}return a&&(b.__proto__=a),b.prototype=Object.create(a&&a.prototype),b.prototype.constructor=b,b}(Kd)},Sg=f(function(a,b){a.exports=function(){function a(a,b,c){c=c||{};this.w=a||64;this.h=b||64;this.autoResize=!!c.autoResize;this.shelves=[];this.freebins=[];this.stats={};this.bins=
{};this.maxId=0}function b(a,b,c){this.x=0;this.y=a;this.w=this.free=b;this.h=c}return a.prototype.pack=function(a,b){a=[].concat(a);b=b||{};for(var c,d,e,g=[],f=0;f<a.length;f++)if(c=a[f].w||a[f].width,d=a[f].h||a[f].height,e=a[f].id,c&&d)if(e=this.packOne(c,d,e))b.inPlace&&(a[f].x=e.x,a[f].y=e.y,a[f].id=e.id),g.push(e);return this.shrink(),g},a.prototype.packOne=function(a,c,d){var e,g,f,h,k,n,t,m,v=-1,r=-1,u=1/0,l=0;if("string"==typeof d||"number"==typeof d){if(e=this.getBin(d))return this.ref(e),
e;"number"==typeof d&&(this.maxId=Math.max(d,this.maxId))}else d=++this.maxId;for(h=0;h<this.freebins.length;h++){if(c===(e=this.freebins[h]).maxh&&a===e.maxw)return this.allocFreebin(h,a,c,d);c>e.maxh||a>e.maxw||c<=e.maxh&&a<=e.maxw&&(f=e.maxw*e.maxh-a*c)<u&&(u=f,v=h)}for(h=0;h<this.shelves.length;h++)if(l+=(g=this.shelves[h]).h,!(a>g.free)){if(c===g.h)return this.allocShelf(h,a,c,d);c>g.h||c<g.h&&(f=(g.h-c)*a)<u&&(v=-1,u=f,r=h)}return-1!==v?this.allocFreebin(v,a,c,d):-1!==r?this.allocShelf(r,a,
c,d):c<=this.h-l&&a<=this.w?(g=new b(l,this.w,c),this.allocShelf(this.shelves.push(g)-1,a,c,d)):this.autoResize?(k=n=this.h,((t=m=this.w)<=k||a>t)&&(m=2*Math.max(a,t)),(k<t||c>k)&&(n=2*Math.max(c,k)),this.resize(m,n),this.packOne(a,c,d)):null},a.prototype.allocFreebin=function(a,b,c,d){a=this.freebins.splice(a,1)[0];return a.id=d,a.w=b,a.h=c,a.refcount=0,this.bins[d]=a,this.ref(a),a},a.prototype.allocShelf=function(a,b,c,d){a=this.shelves[a].alloc(b,c,d);return this.bins[d]=a,this.ref(a),a},a.prototype.shrink=
function(){if(0<this.shelves.length){for(var a=0,b=0,c=0;c<this.shelves.length;c++){var d=this.shelves[c];b+=d.h;a=Math.max(d.w-d.free,a)}this.resize(a,b)}},a.prototype.getBin=function(a){return this.bins[a]},a.prototype.ref=function(a){if(1==++a.refcount){var b=a.h;this.stats[b]=1+(0|this.stats[b])}return a.refcount},a.prototype.unref=function(a){return 0===a.refcount?0:(0==--a.refcount&&(this.stats[a.h]--,delete this.bins[a.id],this.freebins.push(a)),a.refcount)},a.prototype.clear=function(){this.shelves=
[];this.freebins=[];this.stats={};this.bins={};this.maxId=0},a.prototype.resize=function(a,b){this.w=a;this.h=b;for(b=0;b<this.shelves.length;b++)this.shelves[b].resize(a);return!0},b.prototype.alloc=function(a,b,c){if(a>this.free||b>this.h)return null;var d=this.x;return this.x+=a,this.free-=a,new function(a,b,c,d,e,g,f){this.id=a;this.x=b;this.y=c;this.w=d;this.h=e;this.maxw=g||d;this.maxh=f||e;this.refcount=0}(c,d,this.y,a,b,a,this.h)},b.prototype.resize=function(a){return this.free+=a-this.w,
this.w=a,!0},a}()}),mg=function(a,b){b=b.pixelRatio;this.paddedRect=a;this.pixelRatio=b},Tf={tl:{configurable:!0},br:{configurable:!0},displaySize:{configurable:!0}};Tf.tl.get=function(){return[this.paddedRect.x+1,this.paddedRect.y+1]};Tf.br.get=function(){return[this.paddedRect.x+this.paddedRect.w-1,this.paddedRect.y+this.paddedRect.h-1]};Tf.displaySize.get=function(){return[(this.paddedRect.w-2)/this.pixelRatio,(this.paddedRect.h-2)/this.pixelRatio]};Object.defineProperties(mg.prototype,Tf);var Rh=
function(a){var b=new we({width:0,height:0}),c={},d=new Sg(0,0,{autoResize:!0}),e;for(e in a){var g=a[e],f=d.packOne(g.data.width+2,g.data.height+2);b.resize({width:d.w,height:d.h});we.copy(g.data,b,{x:0,y:0},{x:f.x+1,y:f.y+1},g.data);c[e]=new mg(f,g)}d.shrink();b.resize({width:d.w,height:d.h});this.image=b;this.positions=c};Ha("ImagePosition",mg);Ha("ImageAtlas",Rh);var lh=function(a,b,c,d,e){var g=8*e-d-1;var f=(1<<g)-1,h=f>>1,k=-7;e=c?e-1:0;var n=c?-1:1,t=a[b+e];e+=n;c=t&(1<<-k)-1;t>>=-k;for(k+=
g;0<k;c=256*c+a[b+e],e+=n,k-=8);g=c&(1<<-k)-1;c>>=-k;for(k+=d;0<k;g=256*g+a[b+e],e+=n,k-=8);if(0===c)c=1-h;else{if(c===f)return g?NaN:1/0*(t?-1:1);g+=Math.pow(2,d);c-=h}return(t?-1:1)*g*Math.pow(2,c-d)},uf=function(a,b,c,d,e,g){var f,h,k,n=8*g-e-1,t=(1<<n)-1,m=t>>1,v=23===e?Math.pow(2,-24)-Math.pow(2,-77):0;g=d?0:g-1;d=d?1:-1;var r=0>b||0===b&&0>1/b?1:0;b=Math.abs(b);for(isNaN(b)||b===1/0?(h=isNaN(b)?1:0,f=t):(f=Math.floor(Math.log(b)/Math.LN2),1>b*(k=Math.pow(2,-f))&&(f--,k*=2),2<=(b+=1<=f+m?v/k:
v*Math.pow(2,1-m))*k&&(f++,k/=2),f+m>=t?(h=0,f=t):1<=f+m?(h=(b*k-1)*Math.pow(2,e),f+=m):(h=b*Math.pow(2,m-1)*Math.pow(2,e),f=0));8<=e;a[c+g]=255&h,g+=d,h/=256,e-=8);f=f<<e|h;for(n+=e;0<n;a[c+g]=255&f,g+=d,f/=256,n-=8);a[c+g-d]|=128*r};gb.Varint=0;gb.Fixed64=1;gb.Bytes=2;gb.Fixed32=5;gb.prototype={destroy:function(){this.buf=null},readFields:function(a,b,c){for(c=c||this.length;this.pos<c;){var d=this.readVarint(),e=d>>3,g=this.pos;this.type=7&d;a(e,b,this);this.pos===g&&this.skip(d)}return b},readMessage:function(a,
b){return this.readFields(a,b,this.readVarint()+this.pos)},readFixed32:function(){var a=Dd(this.buf,this.pos);return this.pos+=4,a},readSFixed32:function(){var a=Ed(this.buf,this.pos);return this.pos+=4,a},readFixed64:function(){var a=Dd(this.buf,this.pos)+4294967296*Dd(this.buf,this.pos+4);return this.pos+=8,a},readSFixed64:function(){var a=Dd(this.buf,this.pos)+4294967296*Ed(this.buf,this.pos+4);return this.pos+=8,a},readFloat:function(){var a=lh(this.buf,this.pos,!0,23,4);return this.pos+=4,a},
readDouble:function(){var a=lh(this.buf,this.pos,!0,52,8);return this.pos+=8,a},readVarint:function(a){var b,c=this.buf;var d=127&(b=c[this.pos++]);if(128>b)a=d;else if(d|=(127&(b=c[this.pos++]))<<7,128>b)a=d;else if(d|=(127&(b=c[this.pos++]))<<14,128>b)a=d;else if(d|=(127&(b=c[this.pos++]))<<21,128>b)a=d;else{d|=(15&c[this.pos])<<28;var e,g;b=this.buf;if((g=b[this.pos++],e=(112&g)>>4,128>g)||(g=b[this.pos++],e|=(127&g)<<3,128>g)||(g=b[this.pos++],e|=(127&g)<<10,128>g)||(g=b[this.pos++],e|=(127&g)<<
17,128>g)||(g=b[this.pos++],e|=(127&g)<<24,128>g)||(g=b[this.pos++],e|=(1&g)<<31,128>g))a=a?4294967296*e+(d>>>0):4294967296*(e>>>0)+(d>>>0);else throw Error("Expected varint not more than 10 bytes");}return a},readVarint64:function(){return this.readVarint(!0)},readSVarint:function(){var a=this.readVarint();return 1==a%2?(a+1)/-2:a/2},readBoolean:function(){return!!this.readVarint()},readString:function(){for(var a=this.readVarint()+this.pos,b=this.buf,c="",d=this.pos;d<a;){var e,g,f,h=b[d],k=null,
n=239<h?4:223<h?3:191<h?2:1;if(d+n>a)break;1===n?128>h&&(k=h):2===n?128==(192&(e=b[d+1]))&&127>=(k=(31&h)<<6|63&e)&&(k=null):3===n?(e=b[d+1],g=b[d+2],128==(192&e)&&128==(192&g)&&(2047>=(k=(15&h)<<12|(63&e)<<6|63&g)||55296<=k&&57343>=k)&&(k=null)):4===n&&(e=b[d+1],g=b[d+2],f=b[d+3],128==(192&e)&&128==(192&g)&&128==(192&f)&&(65535>=(k=(15&h)<<18|(63&e)<<12|(63&g)<<6|63&f)||1114112<=k)&&(k=null));null===k?(k=65533,n=1):65535<k&&(k-=65536,c+=String.fromCharCode(k>>>10&1023|55296),k=56320|1023&k);c+=String.fromCharCode(k);
d+=n}return this.pos=a,c},readBytes:function(){var a=this.readVarint()+this.pos,b=this.buf.subarray(this.pos,a);return this.pos=a,b},readPackedVarint:function(a,b){var c=Gb(this);for(a=a||[];this.pos<c;)a.push(this.readVarint(b));return a},readPackedSVarint:function(a){var b=Gb(this);for(a=a||[];this.pos<b;)a.push(this.readSVarint());return a},readPackedBoolean:function(a){var b=Gb(this);for(a=a||[];this.pos<b;)a.push(this.readBoolean());return a},readPackedFloat:function(a){var b=Gb(this);for(a=
a||[];this.pos<b;)a.push(this.readFloat());return a},readPackedDouble:function(a){var b=Gb(this);for(a=a||[];this.pos<b;)a.push(this.readDouble());return a},readPackedFixed32:function(a){var b=Gb(this);for(a=a||[];this.pos<b;)a.push(this.readFixed32());return a},readPackedSFixed32:function(a){var b=Gb(this);for(a=a||[];this.pos<b;)a.push(this.readSFixed32());return a},readPackedFixed64:function(a){var b=Gb(this);for(a=a||[];this.pos<b;)a.push(this.readFixed64());return a},readPackedSFixed64:function(a){var b=
Gb(this);for(a=a||[];this.pos<b;)a.push(this.readSFixed64());return a},skip:function(a){a&=7;if(a===gb.Varint)for(;127<this.buf[this.pos++];);else if(a===gb.Bytes)this.pos=this.readVarint()+this.pos;else if(a===gb.Fixed32)this.pos+=4;else{if(a!==gb.Fixed64)throw Error("Unimplemented type: "+a);this.pos+=8}},writeTag:function(a,b){this.writeVarint(a<<3|b)},realloc:function(a){for(var b=this.length||16;b<this.pos+a;)b*=2;b!==this.length&&(a=new Uint8Array(b),a.set(this.buf),this.buf=a,this.length=b)},
finish:function(){return this.length=this.pos,this.pos=0,this.buf.subarray(0,this.length)},writeFixed32:function(a){this.realloc(4);bd(this.buf,a,this.pos);this.pos+=4},writeSFixed32:function(a){this.realloc(4);bd(this.buf,a,this.pos);this.pos+=4},writeFixed64:function(a){this.realloc(8);bd(this.buf,-1&a,this.pos);bd(this.buf,Math.floor(1/4294967296*a),this.pos+4);this.pos+=8},writeSFixed64:function(a){this.realloc(8);bd(this.buf,-1&a,this.pos);bd(this.buf,Math.floor(1/4294967296*a),this.pos+4);this.pos+=
8},writeVarint:function(a){268435455<(a=+a||0)||0>a?function(a,b){var c,d;0<=a?(c=a%4294967296|0,d=a/4294967296|0):(d=~(-a/4294967296),4294967295^(c=~(-a%4294967296))?c=c+1|0:(c=0,d=d+1|0));if(1.8446744073709552E19<=a||-1.8446744073709552E19>a)throw Error("Given varint doesn't fit into 10 bytes");b.realloc(10);(function(a,b,c){c.buf[c.pos++]=127&a|128;a>>>=7;c.buf[c.pos++]=127&a|128;a>>>=7;c.buf[c.pos++]=127&a|128;a>>>=7;c.buf[c.pos++]=127&a|128;c.buf[c.pos]=127&a>>>7})(c,0,b);(function(a,b){if(b.buf[b.pos++]|=
(7&a)<<4|((a>>>=3)?128:0),a)if(b.buf[b.pos++]=127&a|((a>>>=7)?128:0),a)if(b.buf[b.pos++]=127&a|((a>>>=7)?128:0),a)if(b.buf[b.pos++]=127&a|((a>>>=7)?128:0),a)if(b.buf[b.pos++]=127&a|((a>>>=7)?128:0),a)b.buf[b.pos++]=127&a})(d,b)}(a,this):(this.realloc(4),this.buf[this.pos++]=127&a|(127<a?128:0),127>=a||(this.buf[this.pos++]=127&(a>>>=7)|(127<a?128:0),127>=a||(this.buf[this.pos++]=127&(a>>>=7)|(127<a?128:0),127>=a||(this.buf[this.pos++]=a>>>7&127))))},writeSVarint:function(a){this.writeVarint(0>a?2*
-a-1:2*a)},writeBoolean:function(a){this.writeVarint(!!a)},writeString:function(a){a=String(a);this.realloc(4*a.length);this.pos++;for(var b=this.pos,c=this.buf,d=this.pos,e,g,f=0;f<a.length;f++){if(55295<(e=a.charCodeAt(f))&&57344>e){if(!g){56319<e||f+1===a.length?(c[d++]=239,c[d++]=191,c[d++]=189):g=e;continue}if(56320>e){c[d++]=239;c[d++]=191;c[d++]=189;g=e;continue}e=g-55296<<10|e-56320|65536;g=null}else g&&(c[d++]=239,c[d++]=191,c[d++]=189,g=null);128>e?c[d++]=e:(2048>e?c[d++]=e>>6|192:(65536>
e?c[d++]=e>>12|224:(c[d++]=e>>18|240,c[d++]=e>>12&63|128),c[d++]=e>>6&63|128),c[d++]=63&e|128)}this.pos=d;c=this.pos-b;128<=c&&Ob(b,c,this);this.pos=b-1;this.writeVarint(c);this.pos+=c},writeFloat:function(a){this.realloc(4);uf(this.buf,a,this.pos,!0,23,4);this.pos+=4},writeDouble:function(a){this.realloc(8);uf(this.buf,a,this.pos,!0,52,8);this.pos+=8},writeBytes:function(a){var b=a.length;this.writeVarint(b);this.realloc(b);for(var c=0;c<b;c++)this.buf[this.pos++]=a[c]},writeRawMessage:function(a,
b){this.pos++;var c=this.pos;a(b,this);a=this.pos-c;128<=a&&Ob(c,a,this);this.pos=c-1;this.writeVarint(a);this.pos+=a},writeMessage:function(a,b,c){this.writeTag(a,gb.Bytes);this.writeRawMessage(b,c)},writePackedVarint:function(a,b){this.writeMessage(a,ad,b)},writePackedSVarint:function(a,b){this.writeMessage(a,$d,b)},writePackedBoolean:function(a,b){this.writeMessage(a,ae,b)},writePackedFloat:function(a,b){this.writeMessage(a,Cd,b)},writePackedDouble:function(a,b){this.writeMessage(a,zf,b)},writePackedFixed32:function(a,
b){this.writeMessage(a,pe,b)},writePackedSFixed32:function(a,b){this.writeMessage(a,gd,b)},writePackedFixed64:function(a,b){this.writeMessage(a,wc,b)},writePackedSFixed64:function(a,b){this.writeMessage(a,Nd,b)},writeBytesField:function(a,b){this.writeTag(a,gb.Bytes);this.writeBytes(b)},writeFixed32Field:function(a,b){this.writeTag(a,gb.Fixed32);this.writeFixed32(b)},writeSFixed32Field:function(a,b){this.writeTag(a,gb.Fixed32);this.writeSFixed32(b)},writeFixed64Field:function(a,b){this.writeTag(a,
gb.Fixed64);this.writeFixed64(b)},writeSFixed64Field:function(a,b){this.writeTag(a,gb.Fixed64);this.writeSFixed64(b)},writeVarintField:function(a,b){this.writeTag(a,gb.Varint);this.writeVarint(b)},writeSVarintField:function(a,b){this.writeTag(a,gb.Varint);this.writeSVarint(b)},writeStringField:function(a,b){this.writeTag(a,gb.Bytes);this.writeString(b)},writeFloatField:function(a,b){this.writeTag(a,gb.Fixed32);this.writeFloat(b)},writeDoubleField:function(a,b){this.writeTag(a,gb.Fixed64);this.writeDouble(b)},
writeBooleanField:function(a,b){this.writeVarintField(a,!!b)}};var vf=function(a,b,c){this.target=a;this.parent=b;this.mapId=c;this.callbacks={};this.callbackID=0;t(["receive"],this);this.target.addEventListener("message",this.receive,!1)};vf.prototype.send=function(a,b,c,d){var e=c?this.mapId+":"+this.callbackID++:null;c&&(this.callbacks[e]=c);c=[];this.target.postMessage({targetMapId:d,sourceMapId:this.mapId,type:a,id:String(e),data:Xa(b,c)},c)};vf.prototype.receive=function(a){var b=this;a=a.data;
var c=a.id;if(!a.targetMapId||this.mapId===a.targetMapId){var d=function(a,d){var e=[];b.target.postMessage({sourceMapId:b.mapId,type:"\x3cresponse\x3e",id:String(c),error:a?Xa(a):null,data:Xa(d,e)},e)};if("\x3cresponse\x3e"===a.type)d=this.callbacks[a.id],delete this.callbacks[a.id],d&&a.error?d(sc(a.error)):d&&d(null,sc(a.data));else if(void 0!==a.id&&this.parent[a.type])this.parent[a.type](a.sourceMapId,sc(a.data),d);else if(void 0!==a.id&&this.parent.getWorkerSource){var e=a.type.split(".");this.parent.getWorkerSource(a.sourceMapId,
e[0],e[1])[e[2]](sc(a.data),d)}else this.parent[a.type](sc(a.data))}};vf.prototype.remove=function(){this.target.removeEventListener("message",this.receive,!1)};var Uf=e(f(function(a,b){!function(a){function b(a,b,d){b=Math.pow(2,d)-b-1;var e=c(256*a,256*b,d);a=c(256*(a+1),256*(b+1),d);return e[0]+","+e[1]+","+a[0]+","+a[1]}function c(a,b,c){c=12756274*Math.PI/256/Math.pow(2,c);return[a*c-12756274*Math.PI/2,b*c-12756274*Math.PI/2]}a.getURL=function(a,c,d,e,g,f){return f=f||{},a+"?"+["bbox\x3d"+b(d,
e,g),"format\x3d"+(f.format||"image/png"),"service\x3d"+(f.service||"WMS"),"version\x3d"+(f.version||"1.1.1"),"request\x3d"+(f.request||"GetMap"),"srs\x3d"+(f.srs||"EPSG:3857"),"width\x3d"+(f.width||256),"height\x3d"+(f.height||256),"layers\x3d"+c].join("\x26")};a.getTileBBox=b;a.getMercCoords=c;Object.defineProperty(a,"__esModule",{value:!0})}(b)})),af=function(a,b,c){this.z=a;this.x=b;this.y=c;this.key=ze(0,a,b,c)};af.prototype.equals=function(a){return this.z===a.z&&this.x===a.x&&this.y===a.y};
af.prototype.url=function(a,b){for(var c=Uf.getTileBBox(this.x,this.y,this.z),d,e="",g=this.z;0<g;g--)e+=(this.x&(d=1<<g-1)?1:0)+(this.y&d?2:0);d=e;return a[(this.x+this.y)%a.length].replace("{prefix}",(this.x%16).toString(16)+(this.y%16).toString(16)).replace("{z}",String(this.z)).replace("{x}",String(this.x)).replace("{y}",String("tms"===b?Math.pow(2,this.z)-this.y-1:this.y)).replace("{quadkey}",d).replace("{bbox-epsg-3857}",c)};var fh=function(a,b){this.wrap=a;this.canonical=b;this.key=ze(a,b.z,
b.x,b.y)},ic=function(a,b,c,d,e){this.overscaledZ=a;this.wrap=b;this.canonical=new af(c,+d,+e);this.key=ze(b,a,d,e)};ic.prototype.equals=function(a){return this.overscaledZ===a.overscaledZ&&this.wrap===a.wrap&&this.canonical.equals(a.canonical)};ic.prototype.scaledTo=function(a){var b=this.canonical.z-a;return a>this.canonical.z?new ic(a,this.wrap,this.canonical.z,this.canonical.x,this.canonical.y):new ic(a,this.wrap,a,this.canonical.x>>b,this.canonical.y>>b)};ic.prototype.isChildOf=function(a){var b=
this.canonical.z-a.canonical.z;return 0===a.overscaledZ||a.overscaledZ<this.overscaledZ&&a.canonical.x===this.canonical.x>>b&&a.canonical.y===this.canonical.y>>b};ic.prototype.children=function(a){if(this.overscaledZ>=a)return[new ic(this.overscaledZ+1,this.wrap,this.canonical.z,this.canonical.x,this.canonical.y)];a=this.canonical.z+1;var b=2*this.canonical.x,c=2*this.canonical.y;return[new ic(a,this.wrap,a,b,c),new ic(a,this.wrap,a,b+1,c),new ic(a,this.wrap,a,b,c+1),new ic(a,this.wrap,a,b+1,c+1)]};
ic.prototype.isLessThan=function(a){return this.wrap<a.wrap||!(this.wrap>a.wrap)&&(this.overscaledZ<a.overscaledZ||!(this.overscaledZ>a.overscaledZ)&&(this.canonical.x<a.canonical.x||!(this.canonical.x>a.canonical.x)&&this.canonical.y<a.canonical.y))};ic.prototype.wrapped=function(){return new ic(this.overscaledZ,0,this.canonical.z,this.canonical.x,this.canonical.y)};ic.prototype.unwrapTo=function(a){return new ic(this.overscaledZ,a,this.canonical.z,this.canonical.x,this.canonical.y)};ic.prototype.overscaleFactor=
function(){return Math.pow(2,this.overscaledZ-this.canonical.z)};ic.prototype.toUnwrapped=function(){return new fh(this.wrap,this.canonical)};ic.prototype.toString=function(){return this.overscaledZ+"/"+this.canonical.x+"/"+this.canonical.y};ic.prototype.toCoordinate=function(){return new Zb(this.canonical.x+Math.pow(2,this.wrap),this.canonical.y,this.canonical.z)};Ha("CanonicalTileID",af);Ha("OverscaledTileID",ic,{omit:["posMatrix"]});var He=function(a,b,c){if(0>=a)throw new RangeError("Level must have positive dimension");
this.dim=a;this.border=b;this.stride=this.dim+2*this.border;this.data=c||new Int32Array((this.dim+2*this.border)*(this.dim+2*this.border))};He.prototype.set=function(a,b,c){this.data[this._idx(a,b)]=c+65536};He.prototype.get=function(a,b){return this.data[this._idx(a,b)]-65536};He.prototype._idx=function(a,b){if(a<-this.border||a>=this.dim+this.border||b<-this.border||b>=this.dim+this.border)throw new RangeError("out of range source coordinates for DEM data");return(b+this.border)*this.stride+(a+
this.border)};Ha("Level",He);var cf=function(a,b,c){this.uid=a;this.scale=b||1;this.level=c||new He(256,512);this.loaded=!!c};cf.prototype.loadFromImage=function(a,b){if(a.height!==a.width)throw new RangeError("DEM tiles must be square");if(b&&"mapbox"!==b&&"terrarium"!==b)return A('"'+b+'" is not a valid encoding type. Valid types include "mapbox" and "terrarium".');var c=this.level=new He(a.width,a.width/2);this._unpackData(c,a.data,b||"mapbox");for(a=0;a<c.dim;a++)c.set(-1,a,c.get(0,a)),c.set(c.dim,
a,c.get(c.dim-1,a)),c.set(a,-1,c.get(a,0)),c.set(a,c.dim,c.get(a,c.dim-1));c.set(-1,-1,c.get(0,0));c.set(c.dim,-1,c.get(c.dim-1,0));c.set(-1,c.dim,c.get(0,c.dim-1));c.set(c.dim,c.dim,c.get(c.dim-1,c.dim-1));this.loaded=!0};cf.prototype._unpackMapbox=function(a,b,c){return(65536*a+256*b+c)/10-1E4};cf.prototype._unpackTerrarium=function(a,b,c){return 256*a+b+c/256-32768};cf.prototype._unpackData=function(a,b,c){c={mapbox:this._unpackMapbox,terrarium:this._unpackTerrarium}[c];for(var d=0;d<a.dim;d++)for(var e=
0;e<a.dim;e++){var g=4*(d*a.dim+e);a.set(e,d,this.scale*c(b[g],b[g+1],b[g+2]))}};cf.prototype.getPixels=function(){return new we({width:this.level.dim+2*this.level.border,height:this.level.dim+2*this.level.border},new Uint8Array(this.level.data.buffer))};cf.prototype.backfillBorder=function(a,b,d){var e=this.level;a=a.level;if(e.dim!==a.dim)throw Error("level mismatch (dem dimension)");var g=b*e.dim,f=b*e.dim+e.dim,h=d*e.dim,k=d*e.dim+e.dim;switch(b){case -1:g=f-1;break;case 1:f=g+1}switch(d){case -1:h=
k-1;break;case 1:k=h+1}g=c(g,-e.border,e.dim+e.border);f=c(f,-e.border,e.dim+e.border);h=c(h,-e.border,e.dim+e.border);k=c(k,-e.border,e.dim+e.border);b=-b*e.dim;for(d=-d*e.dim;h<k;h++)for(var n=g;n<f;n++)e.set(n,h,a.get(n+b,h+d))};Ha("DEMData",cf);var Vf=function(a){this._stringToNumber={};this._numberToString=[];for(var b=0;b<a.length;b++){var c=a[b];this._stringToNumber[c]=b;this._numberToString[b]=c}};Vf.prototype.encode=function(a){return this._stringToNumber[a]};Vf.prototype.decode=function(a){return this._numberToString[a]};
var gh=function(a,b,c,d){this.type="Feature";this._vectorTileFeature=a;a._z=b;a._x=c;a._y=d;this.properties=a.properties;null!=a.id&&(this.id=a.id)},yh={geometry:{configurable:!0}};yh.geometry.get=function(){return void 0===this._geometry&&(this._geometry=this._vectorTileFeature.toGeoJSON(this._vectorTileFeature._x,this._vectorTileFeature._y,this._vectorTileFeature._z).geometry),this._geometry};yh.geometry.set=function(a){this._geometry=a};gh.prototype.toJSON=function(){var a={geometry:this.geometry},
b;for(b in this)"_geometry"!==b&&"_vectorTileFeature"!==b&&(a[b]=this[b]);return a};Object.defineProperties(gh.prototype,yh);var Na=function(a,b,c){this.tileID=a;this.x=a.canonical.x;this.y=a.canonical.y;this.z=a.canonical.z;this.grid=b||new Va(8192,16,0);this.featureIndexArray=c||new Mg};Na.prototype.insert=function(a,b,c,d,e){a=this.featureIndexArray.length;this.featureIndexArray.emplaceBack(c,d,e);for(c=0;c<b.length;c++){d=b[c];e=[1/0,1/0,-1/0,-1/0];for(var g=0;g<d.length;g++){var f=d[g];e[0]=
Math.min(e[0],f.x);e[1]=Math.min(e[1],f.y);e[2]=Math.max(e[2],f.x);e[3]=Math.max(e[3],f.y)}8192>e[0]&&8192>e[1]&&0<=e[2]&&0<=e[3]&&this.grid.insert(a,e[0],e[1],e[2],e[3])}};Na.prototype.loadVTLayers=function(){return this.vtLayers||(this.vtLayers=(new qf.VectorTile(new gb(this.rawTileData))).layers,this.sourceLayerCoder=new Vf(this.vtLayers?Object.keys(this.vtLayers).sort():["_geojsonTileLayer"])),this.vtLayers};Na.prototype.query=function(a,b){var c=this;this.loadVTLayers();for(var d=a.params||{},
e=8192/a.tileSize/a.scale,g=Ka(d.filter),f=a.queryGeometry,h=a.queryPadding*e,k=1/0,n=1/0,t=-1/0,m=-1/0,v=0;v<f.length;v++)for(var r=f[v],u=0;u<r.length;u++){var l=r[u];k=Math.min(k,l.x);n=Math.min(n,l.y);t=Math.max(t,l.x);m=Math.max(m,l.y)}var p=this.grid.query(k-h,n-h,t+h,m+h);p.sort(re);var y,q={};h=function(h){h=p[h];if(h!==y){y=h;h=c.featureIndexArray.get(h);var k=null;c.loadMatchingFeature(q,h.bucketIndex,h.sourceLayerIndex,h.featureIndex,g,d.layers,b,function(b,d){return k||(k=Tb(b)),d.queryIntersectsFeature(f,
b,k,c.z,a.transform,e,a.posMatrix)})}};for(k=0;k<p.length;k++)h(k);return q};Na.prototype.loadMatchingFeature=function(a,b,c,d,e,g,f,h){b=this.bucketLayerIDs[b];var k;if(!(k=!g))a:{for(k=0;k<g.length;k++)if(0<=b.indexOf(g[k])){k=!0;break a}k=!1}if(k&&(c=this.sourceLayerCoder.decode(c),c=this.vtLayers[c].feature(d),e(new Bc(this.tileID.overscaledZ),c)))for(e=0;e<b.length;e++)if(k=b[e],!(g&&0>g.indexOf(k))){var n=f[k];if(n&&(!h||h(c,n))){var t=new gh(c,this.z,this.x,this.y);t.layer=n.serialize();n=
a[k];void 0===n&&(n=a[k]=[]);n.push({featureIndex:d,feature:t})}}};Na.prototype.lookupSymbolFeatures=function(a,b,c,d,e,g){var f={};this.loadVTLayers();d=Ka(d);for(var h=0;h<a.length;h+=1)this.loadMatchingFeature(f,b,c,a[h],d,e,g);return f};Na.prototype.hasLayer=function(a){for(var b=0,c=this.bucketLayerIDs;b<c.length;b+=1)for(var d=0,e=c[b];d<e.length;d+=1)if(a===e[d])return!0;return!1};Ha("FeatureIndex",Na,{omit:["rawTileData","sourceLayerCoder"]});var Oc={horizontal:1,vertical:2,horizontalOnly:3},
Jf={9:!0,10:!0,11:!0,12:!0,13:!0,32:!0},Gh={10:!0,32:!0,38:!0,40:!0,41:!0,43:!0,45:!0,47:!0,173:!0,183:!0,8203:!0,8208:!0,8211:!0,8231:!0};b.commonjsGlobal=zc;b.unwrapExports=e;b.createCommonjsModule=f;b.default=self;b.default$1=Wb;b.getJSON=function(a,b){var c=P(a);return c.setRequestHeader("Accept","application/json"),c.onerror=function(){b(Error(c.statusText))},c.onload=function(){if(200<=c.status&&300>c.status&&c.response){try{var d=JSON.parse(c.response)}catch(xf){return b(xf)}b(null,d)}else 401===
c.status&&a.url.match(/mapbox.com/)?b(new Be(c.statusText+": you may have provided an invalid Mapbox access token. See https://www.mapbox.com/api-documentation/#access-tokens",c.status,a.url)):b(new Be(c.statusText,c.status,a.url))},c.send(),c};b.getImage=function(a,b){return Jc(a,function(a,c){if(a)b(a);else if(c){var d=new self.Image,e=self.URL||self.webkitURL;d.onload=function(){b(null,d);e.revokeObjectURL(d.src)};a=new self.Blob([new Uint8Array(c.data)],{type:"image/png"});d.cacheControl=c.cacheControl;
d.expires=c.expires;d.src=c.data.byteLength?e.createObjectURL(a):"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAAC0lEQVQYV2NgAAIAAAUAAarVyFEAAAAASUVORK5CYII\x3d"}})};b.ResourceType=jf;b.RGBAImage=we;b.default$2=Sg;b.ImagePosition=mg;b.getArrayBuffer=Jc;b.default$3=function(a){return(new gb(a)).readFields(Od,[])};b.default$4=Qa;b.asyncAll=function(a,b,c){if(!a.length)return c(null,[]);var d=a.length,e=Array(a.length),g=null;a.forEach(function(a,f){b(a,function(a,b){a&&(g=a);
e[f]=b;0==--d&&c(g,e)})})};b.AlphaImage=$e;b.default$5=ra;b.endsWith=m;b.extend=k;b.sphericalToCartesian=function(a){var b=a[0],c=a[1];a=a[2];return c+=90,c*=Math.PI/180,a*=Math.PI/180,{x:b*Math.cos(c)*Math.sin(a),y:b*Math.sin(c)*Math.sin(a),z:b*Math.cos(a)}};b.Evented=Kc;b.validateStyle=kb;b.validateLight=uh;b.emitValidationErrors=Oa;b.default$6=tb;b.number=Y;b.Properties=jd;b.Transitionable=rc;b.Transitioning=Ie;b.PossiblyEvaluated=eg;b.DataConstantProperty=bb;b.warnOnce=A;b.uniqueId=function(){return Pd++};
b.default$7=vf;b.pick=function(a,b){for(var c={},d=0;d<b.length;d++){var e=b[d];e in a&&(c[e]=a[e])}return c};b.wrap=function(a,b,c){var d=c-b;a=((a-b)%d+d)%d+b;return a===b?c:a};b.clamp=c;b.Event=de;b.ErrorEvent=ec;b.OverscaledTileID=ic;b.default$8=8192;b.createLayout=vb;b.getCoordinatesCenter=function(a){for(var b=1/0,c=1/0,d=-1/0,e=-1/0,g=0;g<a.length;g++)b=Math.min(b,a[g].column),c=Math.min(c,a[g].row),d=Math.max(d,a[g].column),e=Math.max(e,a[g].row);a=Math.max(0,Math.floor(-Math.log(Math.max(d-
b,e-c))/Math.LN2));return(new Zb((b+d)/2,(c+e)/2,0)).zoomTo(a)};b.CanonicalTileID=af;b.RasterBoundsArray=rf;b.getVideo=function(a,b){var c=self.document.createElement("video");c.onloadstart=function(){b(null,c)};for(var d=0;d<a.length;d++){var e=self.document.createElement("source");var g=a[d];var f=void 0;(f=self.document.createElement("a")).href=g;f.protocol===self.document.location.protocol&&f.host===self.document.location.host||(c.crossOrigin="Anonymous");e.src=a[d];c.appendChild(e)}return c};
b.default$9=La;b.bindAll=t;b.default$10=function wd(a,b){if(Array.isArray(a)){if(!Array.isArray(b)||a.length!==b.length)return!1;for(var c=0;c<a.length;c++)if(!wd(a[c],b[c]))return!1;return!0}if("object"==typeof a&&null!==a&&null!==b){if("object"!=typeof b||Object.keys(a).length!==Object.keys(b).length)return!1;for(c in a)if(!wd(a[c],b[c]))return!1;return!0}return a===b};b.parseCacheControl=function(a){var b={};if(a.replace(/(?:^|(?:\s*,\s*))([^\x00-\x20\(\)<>@,;:\\"\/\[\]\?=\{\}\x7F]+)(?:=(?:([^\x00-\x20\(\)<>@,;:\\"\/\[\]\?=\{\}\x7F]+)|(?:"((?:[^"\\]|\\.)*)")))?/g,
function(a,c,d,e){a=d||e;return b[c]=!a||a.toLowerCase(),""}),b["max-age"])a=parseInt(b["max-age"],10),isNaN(a)?delete b["max-age"]:b["max-age"]=a;return b};b.default$11=Na;b.default$12=gh;b.default$13=Ka;b.default$14=xb;b.CollisionBoxArray=Kh;b.default$15=Xc;b.TriangleIndexArray=Ud;b.default$16=Bc;b.default$17=Zb;b.keysDifference=function(a,b){var c=[],d;for(d in a)d in b||c.push(d);return c};b.default$18="type source source-layer minzoom maxzoom filter layout".split(" ");b.mat4=ih;b.vec4=Ze;b.getSizeData=
pd;b.evaluateSizeForFeature=function(a,b,c){return"source"===a.functionType?c.lowerSize/10:"composite"===a.functionType?Y(c.lowerSize/10,c.upperSize/10,b.uSizeT):b.uSize};b.evaluateSizeForZoom=function(a,b,d){if("constant"===a.functionType)return{uSizeT:0,uSize:a.layoutSize};if("source"===a.functionType)return{uSizeT:0,uSize:0};if("camera"===a.functionType){var e=a.zoomRange,g=a.sizeRange;a=c(Ea(a.propertyValue,d.specification).interpolationFactor(b,e.min,e.max),0,1);return{uSizeT:0,uSize:g.min+a*
(g.max-g.min)}}g=a.zoomRange;return{uSizeT:c(Ea(a.propertyValue,d.specification).interpolationFactor(b,g.min,g.max),0,1),uSize:0}};b.addDynamicAttributes=uc;b.default$19=Yb;b.WritingMode=Oc;b.multiPolygonIntersectsBufferedPoint=Rd;b.multiPolygonIntersectsMultiPolygon=Eb;b.multiPolygonIntersectsBufferedMultiLine=Hc;b.polygonIntersectsPolygon=function(a,b){for(var c=0;c<a.length;c++)if(Zc(b,a[c]))return!0;for(c=0;c<b.length;c++)if(Zc(a,b[c]))return!0;return!!Rc(a,b)};b.distToSegmentSquared=Sd;b.default$20=
Le;b.default$21=Kd;b.default$22=function(a){return new vg[a.type](a)};b.clone=q;b.filterObject=p;b.mapObject=l;b.registerForPluginAvailability=function(a){return Ue?a({pluginURL:Ue,completionCallback:Ih}):Mf.once("pluginAvailable",a),a};b.evented=Mf;b.default$23=Gg;b.default$24=ve;b.PosArray=fg;b.UnwrappedTileID=fh;b.ease=Qe;b.bezier=g;b.setRTLTextPlugin=function(a,b){if(Lf)throw Error("setRTLTextPlugin cannot be called multiple times.");Lf=!0;Ue=a;Ih=function(a){a?(Lf=!1,Ue=null,b&&b(a)):pf=!0};
Mf.fire(new de("pluginAvailable",{pluginURL:Ue,completionCallback:Ih}))};b.values=function(a){var b=[],c;for(c in a)b.push(a[c]);return b};b.default$25=ii;b.register=Ha;b.GLYPH_PBF_BORDER=3;b.shapeText=function(a,b,c,d,e,g,f,h,k,n){a=a.trim();n===Oc.vertical&&(a=function(a){for(var b="",c=0;c<a.length;c++){var d=a.charCodeAt(c+1)||null,e=a.charCodeAt(c-1)||null;d&&Mb(d)&&!We[a[c+1]]||e&&Mb(e)&&!We[a[c-1]]||!We[a[c]]?b+=a[c]:b+=We[a[c]]}return b}(a));var t=[];h={positionedGlyphs:t,text:a,top:h[1],
bottom:h[1],left:h[0],right:h[0],writingMode:n};var m=Hg.processBidirectionalText;return function(a,b,c,d,e,g,f,h,k){var n=0,t=-17,m=0,v=a.positionedGlyphs;g="right"===g?1:"left"===g?0:.5;for(var r=0;r<c.length;r+=1){var u=c[r];if((u=u.trim()).length){for(var l=v.length,p=0;p<u.length;p++){var y=u.charCodeAt(p),q=b[y];q&&(Sb(y)&&f!==Oc.horizontal?(v.push({glyph:y,x:n,y:0,vertical:!0}),n+=k+h):(v.push({glyph:y,x:n,y:t,vertical:!1}),n+=q.metrics.advance+h))}if(v.length!==l&&(m=Math.max(n-h,m),n=v,u=
v.length-1,g&&(p=b[n[u].glyph])))for(p=(n[u].x+p.metrics.advance)*g;l<=u;l++)n[l].x-=p;n=0}t+=d}e=Vc(e);b=e.horizontalAlign;e=e.verticalAlign;g=(g-b)*m;f=(-e*c.length+.5)*d;for(h=0;h<v.length;h++)v[h].x+=g,v[h].y+=f;!0;c=c.length*d;a.top+=-e*c;a.bottom=a.top+c;a.left+=-b*m;a.right=a.left+m}(h,b,m?m(a,Ef(a,f,c,b)):function(a,b){for(var c=[],d=0,e=0;e<b.length;e+=1){var g=b[e];c.push(a.substring(d,g));d=g}return d<a.length&&c.push(a.substring(d,a.length)),c}(a,Ef(a,f,c,b)),d,e,g,n,f,k),!!t.length&&
h};b.shapeIcon=function(a,b,c){var d=Vc(c);c=b[0]-a.displaySize[0]*d.horizontalAlign;b=b[1]-a.displaySize[1]*d.verticalAlign;return{image:a,top:b,bottom:b+a.displaySize[1],left:c,right:c+a.displaySize[0]}};b.allowsVerticalWritingMode=oc;b.allowsLetterSpacing=function(a){for(var b=0;b<a.length;b+=1){var c=a[b].charCodeAt(0);if(Qa.Arabic(c)||Qa["Arabic Supplement"](c)||Qa["Arabic Extended-A"](c)||Qa["Arabic Presentation Forms-A"](c)||Qa["Arabic Presentation Forms-B"](c))return!1}return!0};b.default$26=
Ma;b.default$27=Vf;b.default$28=Rh;b.default$29=qf;b.default$30=gb;b.default$31=cf;b.__moduleExports=qf;b.default$32=Wb;b.__moduleExports$1=gb;b.plugin=Hg});k(["./chunk1.js"],function(a){function b(a){var c=typeof a;if("number"===c||"boolean"===c||"string"===c||null==a)return JSON.stringify(a);if(Array.isArray(a)){c="[";for(var d=0;d<a.length;d+=1)c+=b(a[d])+",";return c+"]"}c=Object.keys(a).sort();d="{";for(var e=0;e<c.length;e++)d+=JSON.stringify(c[e])+":"+b(a[c[e]])+",";return d+"}"}function e(b,
c,d,e,g,f,h,k,n){g=Math.max(e?e.right-e.left:0,g?g.right-g.left:0);var t=0===b[0].x||b[0].x===n||0===b[0].y||b[0].y===n;return c-g*h<c/4&&(c=g*h+c/4),function Tb(b,c,d,e,g,f,h,k,n){for(var t=f/2,m=0,v=0;v<b.length-1;v++)m+=b[v].dist(b[v+1]);v=0;c-=d;for(var r=[],u=0;u<b.length-1;u++){for(var l=b[u],p=b[u+1],y=l.dist(p),q=p.angleTo(l);c+d<v+y;){var B=((c+=d)-v)/y,A=a.number(l.x,p.x,B);B=a.number(l.y,p.y,B);if(0<=A&&A<n&&0<=B&&B<n&&0<=c-t&&c+t<=m){A=new a.default$25(A,B,q,u);A._round();if(B=e){a:{B=
b;var D=f,C=e,G=g;if(void 0!==A.segment){for(var L=A,E=A.segment+1,I=0;I>-D/2;){if(0>--E){B=!1;break a}I-=B[E].dist(L);L=B[E]}I+=B[E].dist(B[E+1]);E++;L=[];for(var N=0;I<D/2;){var J=B[E-1],P=B[E],H=B[E+1];if(!H){B=!1;break a}J=J.angleTo(P)-P.angleTo(H);J=Math.abs((J+3*Math.PI)%(2*Math.PI)-Math.PI);L.push({distance:I,angleDelta:J});for(N+=J;I-L[0].distance>C;)N-=L.shift().angleDelta;if(N>G){B=!1;break a}E++;I+=P.dist(H)}}B=!0}B=!B}B||r.push(A)}}v+=y}k||r.length||h||(r=Tb(b,v/2,d,e,g,f,h,!0,n));return r}(b,
t?c/2*k%c:(g/2+2*f)*h*k%c,c,e?.6*f*h:0,d,g*h,t,!1,n)}function f(a,b){if(!(this instanceof f))return new f(a,b);if(this.data=a||[],this.length=this.data.length,this.compare=b||d,0<this.length)for(a=(this.length>>1)-1;0<=a;a--)this._down(a)}function d(a,b){return a<b?-1:a>b?1:0}function g(b,d,e){void 0===d&&(d=1);void 0===e&&(e=!1);for(var g=1/0,f=1/0,k=-1/0,n=-1/0,t=b[0],m=0;m<t.length;m++){var v=t[m];(!m||v.x<g)&&(g=v.x);(!m||v.y<f)&&(f=v.y);(!m||v.x>k)&&(k=v.x);(!m||v.y>n)&&(n=v.y)}v=Math.min(k-
g,n-f);t=v/2;m=new X(null,c);if(0===v)return new a.default$1(g,f);for(;g<k;g+=v)for(var r=f;r<n;r+=v)m.push(new h(g+t,r+t,t,b));n=k=f=0;g=b[0];v=0;r=g.length;for(var u=r-1;v<r;u=v++){var l=g[v];u=g[u];var p=l.x*u.y-u.x*l.y;k+=(l.x+u.x)*p;n+=(l.y+u.y)*p;f+=3*p}f=new h(k/f,n/f,0,b);for(k=m.length;m.length;)n=m.pop(),(n.d>f.d||!f.d)&&(f=n,e&&console.log("found best %d after %d probes",Math.round(1E4*n.d)/1E4,k)),n.max-f.d<=d||(t=n.h/2,m.push(new h(n.p.x-t,n.p.y-t,t,b)),m.push(new h(n.p.x+t,n.p.y-t,t,
b)),m.push(new h(n.p.x-t,n.p.y+t,t,b)),m.push(new h(n.p.x+t,n.p.y+t,t,b)),k+=4);return e&&(console.log("num probes: "+k),console.log("best distance: "+f.d)),f.p}function c(a,b){return b.max-a.max}function h(b,c,d,e){this.p=new a.default$1(b,c);this.h=d;b=this.p;c=!1;d=1/0;for(var g=0;g<e.length;g++)for(var f=e[g],h=0,k=f.length,n=k-1;h<k;n=h++){var t=f[h];n=f[n];t.y>b.y!=n.y>b.y&&b.x<(n.x-t.x)*(b.y-t.y)/(n.y-t.y)+t.x&&(c=!c);d=Math.min(d,a.distToSegmentSquared(b,t,n))}this.d=(c?1:-1)*Math.sqrt(d);
this.max=this.d+this.h*Math.SQRT2}function k(b,c,d,e,g,f){b.createArrays();b.symbolInstances=[];b.tilePixelRatio=a.default$8/(512*b.overscaling);b.compareText={};b.iconsNeedLinear=!1;var h=b.layers[0].layout,k=b.layers[0]._unevaluatedLayout._values,n={};if("composite"===b.textSizeData.functionType){var t=b.textSizeData.zoomRange,v=t.max;n.compositeTextSizes=[k["text-size"].possiblyEvaluate(new a.default$16(t.min)),k["text-size"].possiblyEvaluate(new a.default$16(v))]}"composite"===b.iconSizeData.functionType&&
(t=b.iconSizeData.zoomRange,v=t.max,n.compositeIconSizes=[k["icon-size"].possiblyEvaluate(new a.default$16(t.min)),k["icon-size"].possiblyEvaluate(new a.default$16(v))]);n.layoutTextSize=k["text-size"].possiblyEvaluate(new a.default$16(b.zoom+1));n.layoutIconSize=k["icon-size"].possiblyEvaluate(new a.default$16(b.zoom+1));n.textMaxSize=k["text-size"].possiblyEvaluate(new a.default$16(18));k=24*h.get("text-line-height");t="map"===h.get("text-rotation-alignment")&&"line"===h.get("symbol-placement");
v=h.get("text-keep-upright");for(var r=0,u=b.features;r<u.length;r+=1){var l=u[r],p=h.get("text-font").evaluate(l).join(","),y=c[p]||{};p=d[p]||{};var q={},B=l.text;if(B){var A=h.get("text-offset").evaluate(l).map(function(a){return 24*a}),D=24*h.get("text-letter-spacing").evaluate(l);D=a.allowsLetterSpacing(B)?D:0;var C=h.get("text-anchor").evaluate(l),G=h.get("text-justify").evaluate(l),L="line"!==h.get("symbol-placement")?24*h.get("text-max-width").evaluate(l):0;q.horizontal=a.shapeText(B,y,L,
k,C,G,D,A,24,a.WritingMode.horizontal);a.allowsVerticalWritingMode(B)&&t&&v&&(q.vertical=a.shapeText(B,y,L,k,C,G,D,A,24,a.WritingMode.vertical))}y=void 0;l.icon&&(B=e[l.icon])&&(y=a.shapeIcon(g[l.icon],h.get("icon-offset").evaluate(l),h.get("icon-anchor").evaluate(l)),void 0===b.sdfIcons?b.sdfIcons=B.sdf:b.sdfIcons!==B.sdf&&a.warnOnce("Style sheet warning: Cannot mix SDF and non-SDF icons in one buffer"),B.pixelRatio!==b.pixelRatio?b.iconsNeedLinear=!0:0!==h.get("icon-rotate").constantOr(1)&&(b.iconsNeedLinear=
!0));(q.horizontal||y)&&m(b,l,q,y,p,n)}f&&b.generateCollisionDebugBuffers()}function m(b,c,d,f,h,k){var n=k.layoutTextSize.evaluate(c),t=k.layoutIconSize.evaluate(c),m=k.textMaxSize.evaluate(c);void 0===m&&(m=n);var v=b.layers[0].layout,r=v.get("text-offset").evaluate(c),u=v.get("icon-offset").evaluate(c),y=n/24*b.tilePixelRatio;n=b.tilePixelRatio*m/24;var q=b.tilePixelRatio*t;m=b.tilePixelRatio*v.get("symbol-spacing");var B=v.get("text-padding")*b.tilePixelRatio,A=v.get("icon-padding")*b.tilePixelRatio,
D=v.get("text-max-angle")/180*Math.PI,C="map"===v.get("text-rotation-alignment")&&"line"===v.get("symbol-placement"),G="map"===v.get("icon-rotation-alignment")&&"line"===v.get("symbol-placement"),L=m/2;t=function(e,g){0>g.x||g.x>=a.default$8||0>g.y||g.y>=a.default$8||b.symbolInstances.push(function(b,c,d,e,g,f,h,k,n,t,m,v,r,u,p,y,q,B,A,D,C){var G,L=b.addToLineVertexArray(c,d),E=0,I=0,N=0,J=e.horizontal?e.horizontal.text:"",P=[];e.horizontal&&(G=new Fa(h,d,c,k,n,t,e.horizontal,m,v,r,b.overscaling),
I+=l(b,c,e.horizontal,f,r,A,u,L,e.vertical?a.WritingMode.horizontal:a.WritingMode.horizontalOnly,P,D,C),e.vertical&&(N+=l(b,c,e.vertical,f,r,A,u,L,a.WritingMode.vertical,P,D,C)));m=G?G.boxStartIndex:b.collisionBoxArray.length;G=G?G.boxEndIndex:b.collisionBoxArray.length;if(g){D=e.horizontal;E=g.image;var H=f.layout;var R=g.top-1/E.pixelRatio;r=g.left-1/E.pixelRatio;v=g.bottom+1/E.pixelRatio;var M=g.right+1/E.pixelRatio;if("none"!==H.get("icon-text-fit")&&D){e=M-r;var Q=v-R;R=H.get("text-size").evaluate(A)/
24;v=D.left*R;r=D.top*R;var w=D.right*R-v,x=D.bottom*R-r,O=H.get("icon-text-fit-padding")[0];var ca=H.get("icon-text-fit-padding")[1];D=H.get("icon-text-fit-padding")[2];R=H.get("icon-text-fit-padding")[3];M="width"===H.get("icon-text-fit")?.5*(x-Q):0;var T="height"===H.get("icon-text-fit")?.5*(w-e):0;w="width"===H.get("icon-text-fit")||"both"===H.get("icon-text-fit")?w:e;Q="height"===H.get("icon-text-fit")||"both"===H.get("icon-text-fit")?x:Q;H=new a.default$1(v+T-R,r+M-O);e=new a.default$1(v+T+
ca+w,r+M-O);ca=new a.default$1(v+T+ca+w,r+M+D+Q);v=new a.default$1(v+T-R,r+M+D+Q)}else H=new a.default$1(r,R),e=new a.default$1(M,R),ca=new a.default$1(M,v),v=new a.default$1(r,v);if(D=f.layout.get("icon-rotate").evaluate(A)*Math.PI/180)r=Math.sin(D),D=Math.cos(D),r=[D,-r,r,D],H._matMult(r),e._matMult(r),v._matMult(r),ca._matMult(r);e=[{tl:H,tr:e,bl:v,br:ca,tex:E.paddedRect,writingMode:void 0,glyphOffset:[0,0]}];H=new Fa(h,d,c,k,n,t,g,p,y,!1,b.overscaling);E=4*e.length;g=b.iconSizeData;h=null;"source"===
g.functionType?h=[10*f.layout.get("icon-size").evaluate(A)]:"composite"===g.functionType&&(h=[10*C.compositeIconSizes[0].evaluate(A),10*C.compositeIconSizes[1].evaluate(A)]);b.addSymbols(b.icon,e,h,B,q,A,!1,c,L.lineStartIndex,L.lineLength)}f=H?H.boxStartIndex:b.collisionBoxArray.length;q=H?H.boxEndIndex:b.collisionBoxArray.length;b.glyphOffsetArray.length>=a.default$14.MAX_GLYPHS&&a.warnOnce("Too many glyphs being rendered in a tile. See https://github.com/mapbox/mapbox-gl-js/issues/2907");b=new ua;
C=new ua;return{key:J,textBoxStartIndex:m,textBoxEndIndex:G,iconBoxStartIndex:f,iconBoxEndIndex:q,textOffset:u,iconOffset:B,anchor:c,line:d,featureIndex:k,feature:A,numGlyphVertices:I,numVerticalGlyphVertices:N,numIconVertices:E,textOpacityState:b,iconOpacityState:C,isDuplicate:!1,placedTextSymbolIndices:P,crossTileID:0}}(b,g,e,d,f,b.layers[0],b.collisionBoxArray,c.index,c.sourceLayerIndex,b.index,y,B,C,r,q,A,G,u,c,h,k))};if("line"===v.get("symbol-placement")){v=0;for(var E=function(b,c,d,e,g){for(var f=
[],h=0;h<b.length;h++)for(var k=b[h],n=void 0,t=0;t<k.length-1;t++){var m=k[t],v=k[t+1];m.x<c&&v.x<c||(m.x<c?m=(new a.default$1(c,m.y+(c-m.x)/(v.x-m.x)*(v.y-m.y)))._round():v.x<c&&(v=(new a.default$1(c,m.y+(c-m.x)/(v.x-m.x)*(v.y-m.y)))._round()),m.y<d&&v.y<d||(m.y<d?m=(new a.default$1(m.x+(d-m.y)/(v.y-m.y)*(v.x-m.x),d))._round():v.y<d&&(v=(new a.default$1(m.x+(d-m.y)/(v.y-m.y)*(v.x-m.x),d))._round()),m.x>=e&&v.x>=e||(m.x>=e?m=(new a.default$1(e,m.y+(e-m.x)/(v.x-m.x)*(v.y-m.y)))._round():v.x>=e&&(v=
(new a.default$1(e,m.y+(e-m.x)/(v.x-m.x)*(v.y-m.y)))._round()),m.y>=g&&v.y>=g||(m.y>=g?m=(new a.default$1(m.x+(g-m.y)/(v.y-m.y)*(v.x-m.x),g))._round():v.y>=g&&(v=(new a.default$1(m.x+(g-m.y)/(v.y-m.y)*(v.x-m.x),g))._round()),n&&m.equals(n[n.length-1])||(n=[m],f.push(n)),n.push(v)))))}return f}(c.geometry,0,0,a.default$8,a.default$8);v<E.length;v+=1)for(var I=E[v],N=0,J=e(I,m,D,d.vertical||d.horizontal,f,24,n,b.overscaling,a.default$8);N<J.length;N+=1){var P=J[N],H=d.horizontal;H&&p(b,H.text,L,P)||
t(I,P)}}else if("Polygon"===c.type)for(n=0,m=a.default$26(c.geometry,0);n<m.length;n+=1)D=m[n],L=g(D,16),t(D[0],new a.default$25(L.x,L.y,0));else if("LineString"===c.type)for(n=0,m=c.geometry;n<m.length;n+=1)D=m[n],t(D,new a.default$25(D[0].x,D[0].y,0));else if("Point"===c.type)for(n=0,m=c.geometry;n<m.length;n+=1)for(D=0,L=m[n];D<L.length;D+=1)v=L[D],t([v],new a.default$25(v.x,v.y,0))}function l(b,c,d,e,g,f,h,k,n,t,m,v){d=function(b,c,d,e,g,f){b=d.layout.get("text-rotate").evaluate(g)*Math.PI/180;
d=d.layout.get("text-offset").evaluate(g).map(function(a){return 24*a});g=c.positionedGlyphs;for(var h=[],k=0;k<g.length;k++){var n=g[k],t=f[n.glyph];if(t){var m=t.rect;if(m){var v=a.GLYPH_PBF_BORDER+1,r=t.metrics.advance/2,u=e?[n.x+r,n.y]:[0,0],l=e?[0,0]:[n.x+r+d[0],n.y+d[1]],p=t.metrics.left-v-r+l[0];v=-t.metrics.top-v+l[1];l=p+m.w;var y=v+m.h;t=new a.default$1(p,v);v=new a.default$1(l,v);p=new a.default$1(p,y);l=new a.default$1(l,y);e&&n.vertical&&(n=new a.default$1(-r,r),r=-Math.PI/2,y=new a.default$1(5,
0),t._rotateAround(r,n)._add(y),v._rotateAround(r,n)._add(y),p._rotateAround(r,n)._add(y),l._rotateAround(r,n)._add(y));b&&(n=Math.sin(b),r=Math.cos(b),n=[r,-n,n,r],t._matMult(n),v._matMult(n),p._matMult(n),l._matMult(n));h.push({tl:t,tr:v,bl:p,br:l,tex:m,writingMode:c.writingMode,glyphOffset:u})}}}return h}(0,d,e,g,f,m);m=b.textSizeData;var r=null;return"source"===m.functionType?r=[10*e.layout.get("text-size").evaluate(f)]:"composite"===m.functionType&&(r=[10*v.compositeTextSizes[0].evaluate(f),
10*v.compositeTextSizes[1].evaluate(f)]),b.addSymbols(b.text,d,r,h,g,f,n,c,k.lineStartIndex,k.lineLength),t.push(b.text.placedSymbolArray.length-1),4*d.length}function p(a,b,c,d){a=a.compareText;if(b in a)for(var e=a[b],g=e.length-1;0<=g;g--){if(d.dist(e[g])<c)return!0}else a[b]=[];return a[b].push(d),!1}function q(b,c){c=new a.default$16(c);for(var d=0;d<b.length;d+=1)b[d].recalculate(c)}function A(b,c){var d=a.getArrayBuffer(b.request,function(b,d){b?c(b):d&&c(null,{vectorTile:new a.default$29.VectorTile(new a.default$30(d.data)),
rawData:d.data,cacheControl:d.cacheControl,expires:d.expires})});return function(){d.abort();c()}}function C(a){var b=0;if(a&&0<a.length){b+=Math.abs(P(a[0]));for(var c=1;c<a.length;c++)b-=Math.abs(P(a[c]))}return b}function P(a){var b,c,d,e,g=0,f=a.length;if(2<f){for(e=0;e<f;e++){e===f-2?(b=f-2,c=f-1,d=0):e===f-1?(b=f-1,c=0,d=1):(b=e,c=e+1,d=e+2);var h=a[b];var k=a[c];g+=(a[d][0]*Math.PI/180-h[0]*Math.PI/180)*Math.sin(k[1]*Math.PI/180)}g=g*Ua.RADIUS*Ua.RADIUS/2}return g}function J(a,b){return function(c){return a(c,
b)}}function E(a,b){b=!!b;a[0]=H(a[0],b);for(var c=1;c<a.length;c++)a[c]=H(a[c],!b);return a}function H(a,b){return 0<=Ya.ring(a)===b?a:a.reverse()}function M(a,b){this.options=b||{};this.features=a;this.length=a.length}function w(a,b){this.id="number"==typeof a.id?a.id:void 0;this.type=a.type;this.rawGeometry=1===a.type?[a.geometry]:a.geometry;this.properties=a.tags;this.extent=b||4096}function I(b){var c=new a.__moduleExports$1,d;for(d in b.layers)c.writeMessage(3,Q,b.layers[d]);return c.finish()}
function Q(a,b){var c;b.writeVarintField(15,a.version||1);b.writeStringField(1,a.name||"");b.writeVarintField(5,a.extent||4096);var d={keys:[],values:[],keycache:{},valuecache:{}};for(c=0;c<a.length;c++)d.feature=a.feature(c),b.writeMessage(2,N,d);a=d.keys;for(c=0;c<a.length;c++)b.writeStringField(3,a[c]);d=d.values;for(c=0;c<d.length;c++)b.writeMessage(4,x,d[c])}function N(a,b){var c=a.feature;void 0!==c.id&&b.writeVarintField(1,c.id);b.writeMessage(2,L,a);b.writeVarintField(3,c.type);b.writeMessage(4,
R,c)}function L(a,b){var c=a.feature,d=a.keys,e=a.values,g=a.keycache;a=a.valuecache;for(var f in c.properties){var h=g[f];void 0===h&&(d.push(f),h=d.length-1,g[f]=h);b.writeVarint(h);h=c.properties[f];var k=typeof h;"string"!==k&&"boolean"!==k&&"number"!==k&&(h=JSON.stringify(h));k=k+":"+h;var n=a[k];void 0===n&&(e.push(h),n=e.length-1,a[k]=n);b.writeVarint(n)}}function R(a,b){var c=a.loadGeometry();a=a.type;for(var d=0,e=0,g=c.length,f=0;f<g;f++){var h=c[f],k=1;1===a&&(k=h.length);b.writeVarint((k<<
3)+1);k=3===a?h.length-1:h.length;for(var n=0;n<k;n++){1===n&&1!==a&&b.writeVarint((k-1<<3)+2);var t=h[n].x-d,m=h[n].y-e;b.writeVarint(t<<1^t>>31);b.writeVarint(m<<1^m>>31);d+=t;e+=m}3===a&&b.writeVarint(7)}}function x(a,b){var c=typeof a;"string"===c?b.writeStringField(1,a):"boolean"===c?b.writeBooleanField(7,a):"number"===c&&(0!=a%1?b.writeDoubleField(3,a):0>a?b.writeSVarintField(6,a):b.writeVarintField(5,a))}function U(a,b,c,d){T(a,c,d);T(b,2*c,2*d);T(b,2*c+1,2*d+1)}function T(a,b,c){var d=a[b];
a[b]=a[c];a[c]=d}function Y(a,b,c,d,e){b=b||ia;c=c||S;e=e||Array;this.nodeSize=d||64;this.points=a;this.ids=new e(a.length);this.coords=new e(2*a.length);for(d=0;d<a.length;d++)this.ids[d]=d,this.coords[2*d]=b(a[d]),this.coords[2*d+1]=c(a[d]);mb(this.ids,this.coords,this.nodeSize,0,this.ids.length-1,0)}function ia(a){return a[0]}function S(a){return a[1]}function z(a){this.options=F(Object.create(this.options),a);this.trees=Array(this.options.maxZoom+1)}function fa(a,b){a=a.geometry.coordinates;return{x:a[0]/
360+.5,y:ea(a[1]),zoom:1/0,id:b,parentId:-1}}function qa(a){return{type:"Feature",properties:ha(a),geometry:{type:"Point",coordinates:[(d=a.x,360*(d-.5)),(b=a.y,c=(180-360*b)*Math.PI/180,360*Math.atan(Math.exp(c))/Math.PI-90)]}};var b,c,d}function ha(a){var b=a.numPoints,c=1E4<=b?Math.round(b/1E3)+"k":1E3<=b?Math.round(b/100)/10+"k":b;return F(F({},a.properties),{cluster:!0,cluster_id:a.id,point_count:b,point_count_abbreviated:c})}function ea(a){a=Math.sin(a*Math.PI/180);a=.5-.25*Math.log((1+a)/(1-
a))/Math.PI;return 0>a?0:1<a?1:a}function F(a,b){for(var c in b)a[c]=b[c];return a}function la(a){return a.x}function Z(a){return a.y}function pa(a,b,c,d){a={id:a||null,type:b,geometry:c,tags:d,minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0};b=a.geometry;c=a.type;if("Point"===c||"MultiPoint"===c||"LineString"===c)da(a,b);else if("Polygon"===c||"MultiLineString"===c)for(c=0;c<b.length;c++)da(a,b[c]);else if("MultiPolygon"===c)for(c=0;c<b.length;c++)for(d=0;d<b[c].length;d++)da(a,b[c][d]);return a}function da(a,
b){for(var c=0;c<b.length;c+=3)a.minX=Math.min(a.minX,b[c]),a.minY=Math.min(a.minY,b[c+1]),a.maxX=Math.max(a.maxX,b[c]),a.maxY=Math.max(a.maxY,b[c+1])}function K(a,b,c){if(b.geometry){var d=b.geometry.coordinates,e=b.geometry.type,g=Math.pow(c.tolerance/((1<<c.maxZoom)*c.extent),2),f=[];if("Point"===e)ja(d,f);else if("MultiPoint"===e)for(var h=0;h<d.length;h++)ja(d[h],f);else if("LineString"===e)xa(d,f,g,!1);else if("MultiLineString"===e)if(c.lineMetrics)for(h=0;h<d.length;)return f=[],xa(d[h],f,
g,!1),void a.push(pa(b.id,"LineString",f,b.properties));else za(d,f,g,!1);else if("Polygon"===e)za(d,f,g,!0);else{if("MultiPolygon"!==e){if("GeometryCollection"===e){for(h=0;h<b.geometry.geometries.length;h++)K(a,{id:b.id,geometry:b.geometry.geometries[h],properties:b.properties},c);return}throw Error("Input data is not a valid GeoJSON object.");}for(h=0;h<d.length;h++)c=[],za(d[h],c,g,!0),f.push(c)}a.push(pa(b.id,e,f,b.properties))}}function ja(a,b){b.push(a[0]/360+.5);b.push(ka(a[1]));b.push(0)}
function xa(a,b,c,d){for(var e,g,f=0,h=0;h<a.length;h++){var k=a[h][0]/360+.5,n=ka(a[h][1]);b.push(k);b.push(n);b.push(0);0<h&&(f+=d?(e*n-k*g)/2:Math.sqrt(Math.pow(k-e,2)+Math.pow(n-g,2)));e=k;g=n}a=b.length-3;b[2]=1;(function Sb(a,b,c,d){for(var e,g=d,f=a[b],h=a[b+1],k=a[c],n=a[c+1],t=b+3;t<c;t+=3){var m=a[t];var v=a[t+1],r=f,u=h,l=k-r,p=n-u;if(0!==l||0!==p){var y=((m-r)*l+(v-u)*p)/(l*l+p*p);1<y?(r=k,u=n):0<y&&(r+=l*y,u+=p*y)}m=(l=m-r)*l+(p=v-u)*p;m>g&&(e=t,g=m)}g>d&&(3<e-b&&Sb(a,b,e,d),a[e+2]=g,
3<c-e&&Sb(a,e,c,d))})(b,0,a,c);b[a+2]=1;b.size=Math.abs(f);b.start=0;b.end=b.size}function za(a,b,c,d){for(var e=0;e<a.length;e++){var g=[];xa(a[e],g,c,d);b.push(g)}}function ka(a){a=Math.sin(a*Math.PI/180);a=.5-.25*Math.log((1+a)/(1-a))/Math.PI;return 0>a?0:1<a?1:a}function wa(a,b,c,d,e,g,f,h){if(d/=b,g>=(c/=b)&&f<=d)return a;if(g>d||f<c)return null;b=[];for(g=0;g<a.length;g++){f=a[g];var k=f.geometry,n=f.type,t=0===e?f.minX:f.minY,m=0===e?f.maxX:f.maxY;if(t>=c&&m<=d)b.push(f);else if(!(t>d||m<c)){t=
[];if("Point"===n||"MultiPoint"===n){m=t;for(var v=c,r=d,u=e,l=0;l<k.length;l+=3){var p=k[l+u];p>=v&&p<=r&&(m.push(k[l]),m.push(k[l+1]),m.push(k[l+2]))}}else if("LineString"===n)ta(k,t,c,d,e,!1,h.lineMetrics);else if("MultiLineString"===n)ma(k,t,c,d,e,!1);else if("Polygon"===n)ma(k,t,c,d,e,!0);else if("MultiPolygon"===n)for(m=0;m<k.length;m++)v=[],ma(k[m],v,c,d,e,!0),v.length&&t.push(v);if(t.length)if(h.lineMetrics&&"LineString"===n)for(m=0;m<t.length;m++)b.push(pa(f.id,n,t[m],f.tags));else"LineString"!==
n&&"MultiLineString"!==n||(1===t.length?(n="LineString",t=t[0]):n="MultiLineString"),"Point"!==n&&"MultiPoint"!==n||(n=3===t.length?"Point":"MultiPoint"),b.push(pa(f.id,n,t,f.tags))}}return b.length?b:null}function ta(a,b,c,d,e,g,f){for(var h,k,n=aa(a),t=0===e?Aa:va,m=a.start,v=0;v<a.length-3;v+=3){var r=a[v],u=a[v+1],l=a[v+2],p=a[v+3],y=a[v+4],q=0===e?r:u,B=0===e?p:y,A=!1;f&&(h=Math.sqrt(Math.pow(r-p,2)+Math.pow(u-y,2)));if(q<c)B>=c&&(k=t(n,r,u,p,y,c),f&&(n.start=m+h*k));else if(q>d)B<=d&&(k=t(n,
r,u,p,y,d),f&&(n.start=m+h*k));else{var D=n,C=u;D.push(r);D.push(C);D.push(l)}B<c&&q>=c&&(k=t(n,r,u,p,y,c),A=!0);B>d&&q<=d&&(k=t(n,r,u,p,y,d),A=!0);!g&&A&&(f&&(n.end=m+h*k),b.push(n),n=aa(a));f&&(m+=h)}l=a.length-3;r=a[l];u=a[l+1];l=a[l+2];(q=0===e?r:u)>=c&&q<=d&&(a=n,c=l,a.push(r),a.push(u),a.push(c));l=n.length-3;g&&3<=l&&(n[l]!==n[0]||n[l+1]!==n[1])&&(g=n,r=n[1],u=n[2],g.push(n[0]),g.push(r),g.push(u));n.length&&b.push(n)}function aa(a){var b=[];return b.size=a.size,b.start=a.start,b.end=a.end,
b}function ma(a,b,c,d,e,g){for(var f=0;f<a.length;f++)ta(a[f],b,c,d,e,g,!1)}function Aa(a,b,c,d,e,g){b=(g-b)/(d-b);return a.push(g),a.push(c+(e-c)*b),a.push(1),b}function va(a,b,c,d,e,g){c=(g-c)/(e-c);return a.push(b+(d-b)*c),a.push(g),a.push(1),c}function sa(a,b){for(var c=[],d=0;d<a.length;d++){var e=a[d],g=e.type;if("Point"===g||"MultiPoint"===g||"LineString"===g)var f=Ca(e.geometry,b);else if("MultiLineString"===g||"Polygon"===g){f=[];for(var h=0;h<e.geometry.length;h++)f.push(Ca(e.geometry[h],
b))}else if("MultiPolygon"===g)for(f=[],h=0;h<e.geometry.length;h++){for(var k=[],n=0;n<e.geometry[h].length;n++)k.push(Ca(e.geometry[h][n],b));f.push(k)}c.push(pa(e.id,g,f,e.tags))}return c}function Ca(a,b){var c=[];c.size=a.size;void 0!==a.start&&(c.start=a.start,c.end=a.end);for(var d=0;d<a.length;d+=3)c.push(a[d]+b,a[d+1],a[d+2]);return c}function Ga(a,b){if(a.transformed)return a;var c,d,e=1<<a.z,g=a.x,f=a.y;for(c=0;c<a.features.length;c++){var h=a.features[c],k=h.geometry;var n=h.type;if(h.geometry=
[],1===n)for(n=0;n<k.length;n+=2)h.geometry.push([Math.round(b*(k[n]*e-g)),Math.round(b*(k[n+1]*e-f))]);else for(n=0;n<k.length;n++){var t=[];for(d=0;d<k[n].length;d+=2)t.push([Math.round(b*(k[n][d]*e-g)),Math.round(b*(k[n][d+1]*e-f))]);h.geometry.push(t)}}return a.transformed=!0,a}function Ja(a,b,c,d,e,g){var f=d*d;if(0<d&&b.size<(e?f:d))c.numPoints+=b.length/3;else{for(var h=[],k=0;k<b.length;k+=3)(0===d||b[k+2]>f)&&(c.numSimplified++,h.push(b[k]),h.push(b[k+1])),c.numPoints++;if(e){b=d=0;c=h.length;
for(e=c-2;b<c;e=b,b+=2)d+=(h[b]-h[e])*(h[b+1]+h[e+1]);if(0<d===g)for(b=0,c=h.length;b<c/2;b+=2)g=h[b],d=h[b+1],h[b]=h[c-2-b],h[b+1]=h[c-1-b],h[c-2-b]=g,h[c-1-b]=d}a.push(h)}}function oa(a,b){var c=(b=this.options=function(a,b){for(var c in b)a[c]=b[c];return a}(Object.create(this.options),b)).debug;if(c&&console.time("preprocess data"),0>b.maxZoom||24<b.maxZoom)throw Error("maxZoom should be in the 0-24 range");a=function(a,b){var c=[];if("FeatureCollection"===a.type)for(var d=0;d<a.features.length;d++)K(c,
a.features[d],b);else"Feature"===a.type?K(c,a,b):K(c,{geometry:a},b);return c}(a,b);this.tiles={};this.tileCoords=[];c&&(console.timeEnd("preprocess data"),console.log("index: maxZoom: %d, maxPoints: %d",b.indexMaxZoom,b.indexMaxPoints),console.time("generate tiles"),this.stats={},this.total=0);(a=function(a,b){var c=b.buffer/b.extent,d=a,e=wa(a,1,-1-c,c,0,-1,2,b),g=wa(a,1,1-c,2+c,0,-1,2,b);return(e||g)&&(d=wa(a,1,-c,1+c,0,-1,2,b)||[],e&&(d=sa(e,1).concat(d)),g&&(d=d.concat(sa(g,-1)))),d}(a,b)).length&&
this.splitTile(a,0,0,0);c&&(a.length&&console.log("features: %d, points: %d",this.tiles[0].numFeatures,this.tiles[0].numPoints),console.timeEnd("generate tiles"),console.log("tiles generated:",this.total,JSON.stringify(this.stats)))}function Ea(a,b){a=a.tileID.canonical;if(!this._geoJSONIndex)return b(null,null);a=this._geoJSONIndex.getTile(a.z,a.x,a.y);if(!a)return b(null,null);a=new Wa(a.features);var c=rb(a);0===c.byteOffset&&c.byteLength===c.buffer.byteLength||(c=new Uint8Array(c));b(null,{vectorTile:a,
rawData:c.buffer})}var na=function(a){a&&this.replace(a)};na.prototype.replace=function(a){this._layerConfigs={};this._layers={};this.update(a,[])};na.prototype.update=function(c,d){for(var e=this,g=0;g<c.length;g+=1){var f=c[g];e._layerConfigs[f.id]=f;f=e._layers[f.id]=a.default$22(f);f._featureFilter=a.default$13(f.filter)}for(c=0;c<d.length;c+=1)g=d[c],delete e._layerConfigs[g],delete e._layers[g];this.familiesBySource={};d=0;for(c=function(c){for(var d={},e=0;e<c.length;e++){var g=c[e];for(var f=
"",h=0,k=a.default$18;h<k.length;h+=1)f+="/"+b(g[k[h]]);g=f;(f=d[g])||(f=d[g]=[]);f.push(c[e])}c=[];for(var n in d)c.push(d[n]);return c}(a.values(this._layerConfigs));d<c.length;d+=1){g=c[d].map(function(a){return e._layers[a.id]});var h=g[0];if("none"!==h.visibility){var k=h.source||"";(f=e.familiesBySource[k])||(f=e.familiesBySource[k]={});h=h.sourceLayer||"_geojsonTileLayer";(k=f[h])||(k=f[h]=[]);k.push(g)}}};var ua=function(){this.time=this.targetOpacity=this.opacity=0};ua.prototype.clone=function(){var a=
new ua;return a.opacity=this.opacity,a.targetOpacity=this.targetOpacity,a.time=this.time,a};a.register("OpacityState",ua);var Fa=function(a,b,c,d,e,g,f,h,k,n,t){var m=f.top*h-k,v=f.bottom*h+k,r=f.left*h-k;f=f.right*h+k;(this.boxStartIndex=a.length,n)?(n=v-m,0<n&&(n=Math.max(10*h,n),this._addLineCollisionCircles(a,b,c,c.segment,f-r,n,d,e,g,t))):a.emplaceBack(c.x,c.y,r,m,f,v,d,e,g,0,0);this.boxEndIndex=a.length};Fa.prototype._addLineCollisionCircles=function(a,b,c,d,e,g,f,h,k,n){var t=g/2,m=Math.floor(e/
t);n=Math.floor(m*(1+.4*Math.log(n)/Math.LN2)/2);var v=-g/2,r=c;d+=1;c=v;var u=-e/2,l=u-e/4;do{if(0>--d){if(c>u)return;d=0;break}c-=b[d].dist(r);r=b[d]}while(c>l);r=b[d].dist(b[d+1]);for(l=-n;l<m+n;l++){var p=l*t,y=u+p;if(0>p&&(y+=p),p>e&&(y+=p-e),!(y<c)){for(;c+r<y;){if(c+=r,++d+1>=b.length)return;r=b[d].dist(b[d+1])}p=y-c;var q=b[d];p=b[d+1].sub(q)._unit()._mult(p)._add(q)._round();a.emplaceBack(p.x,p.y,-g/2,-g/2,g/2,g/2,f,h,k,g/2,Math.abs(y-v)<t?0:.8*(y-v))}}};var X=f;f.prototype={push:function(a){this.data.push(a);
this.length++;this._up(this.length-1)},pop:function(){if(0!==this.length){var a=this.data[0];return this.length--,0<this.length&&(this.data[0]=this.data[this.length],this._down(0)),this.data.pop(),a}},peek:function(){return this.data[0]},_up:function(a){for(var b=this.data,c=this.compare,d=b[a];0<a;){var e=a-1>>1,g=b[e];if(0<=c(d,g))break;b[a]=g;a=e}b[a]=d},_down:function(a){for(var b=this.data,c=this.compare,d=this.length>>1,e=b[a];a<d;){var g=1+(a<<1),f=g+1,h=b[g];if(f<this.length&&0>c(b[f],h)&&
(g=f,h=b[f]),0<=c(h,e))break;b[a]=h;a=g}b[a]=e}};X.default=f;var Pa=function(b){var c=new a.AlphaImage({width:0,height:0}),d={},e=new a.default$2(0,0,{autoResize:!0}),g;for(g in b){var f=b[g],h=d[g]={},k;for(k in f){var n=f[+k];if(n&&0!==n.bitmap.width&&0!==n.bitmap.height){var t=e.packOne(n.bitmap.width+2,n.bitmap.height+2);c.resize({width:e.w,height:e.h});a.AlphaImage.copy(n.bitmap,c,{x:0,y:0},{x:t.x+1,y:t.y+1},n.bitmap);h[k]={rect:t,metrics:n.metrics}}}}e.shrink();c.resize({width:e.w,height:e.h});
this.image=c;this.positions=d};a.register("GlyphAtlas",Pa);var Ba=function(b){this.tileID=new a.OverscaledTileID(b.tileID.overscaledZ,b.tileID.wrap,b.tileID.canonical.z,b.tileID.canonical.x,b.tileID.canonical.y);this.uid=b.uid;this.zoom=b.zoom;this.pixelRatio=b.pixelRatio;this.tileSize=b.tileSize;this.source=b.source;this.overscaling=this.tileID.overscaleFactor();this.showCollisionBoxes=b.showCollisionBoxes;this.collectResourceTiming=!!b.collectResourceTiming};Ba.prototype.parse=function(b,c,d,e){function g(){if(t)return e(t);
if(m&&v){var b=new Pa(m),c=new a.default$28(v),d;for(d in r){var g=r[d];g instanceof a.default$14&&(q(g.layers,this.zoom),k(g,m,b.positions,v,c.positions,this.showCollisionBoxes))}this.status="done";e(null,{buckets:a.values(r).filter(function(a){return!a.isEmpty()}),featureIndex:n,collisionBoxArray:this.collisionBoxArray,glyphAtlasImage:b.image,iconAtlasImage:c.image})}}var f=this;this.status="parsing";this.data=b;this.collisionBoxArray=new a.CollisionBoxArray;var h=new a.default$27(Object.keys(b.layers).sort()),
n=new a.default$11(this.tileID);n.bucketLayerIDs=[];var t,m,v,r={},u={featureIndex:n,iconDependencies:{},glyphDependencies:{}};c=c.familiesBySource[this.source];for(var l in c){var p=b.layers[l];if(p){1===p.version&&a.warnOnce('Vector tile source "'+f.source+'" layer "'+l+'" does not use vector tile spec v2 and therefore may have some rendering errors.');for(var y=h.encode(l),B=[],A=0;A<p.length;A++){var D=p.feature(A);B.push({feature:D,index:A,sourceLayerIndex:y})}p=0;for(A=c[l];p<A.length;p+=1){D=
A[p];var C=D[0];C.minzoom&&f.zoom<Math.floor(C.minzoom)||C.maxzoom&&f.zoom>=C.maxzoom||"none"===C.visibility||(q(D,f.zoom),(r[C.id]=C.createBucket({index:n.bucketLayerIDs.length,layers:D,zoom:f.zoom,pixelRatio:f.pixelRatio,overscaling:f.overscaling,collisionBoxArray:f.collisionBoxArray,sourceLayerIndex:y})).populate(B,u),n.bucketLayerIDs.push(D.map(function(a){return a.id})))}}}b=a.mapObject(u.glyphDependencies,function(a){return Object.keys(a).map(Number)});Object.keys(b).length?d.send("getGlyphs",
{uid:this.uid,stacks:b},function(a,b){t||(t=a,m=b,g.call(f))}):m={};u=Object.keys(u.iconDependencies);u.length?d.send("getImages",{icons:u},function(a,b){t||(t=a,v=b,g.call(f))}):v={};g.call(this)};var Ia=function(a,b,c){this.actor=a;this.layerIndex=b;this.loadVectorData=c||A;this.loading={};this.loaded={}};Ia.prototype.loadTile=function(b,c){var d=this,e=b.uid;this.loading||(this.loading={});var g=this.loading[e]=new Ba(b);g.abort=this.loadVectorData(b,function(f,h){if(delete d.loading[e],f||!h)return c(f);
var k=h.rawData,n={};h.expires&&(n.expires=h.expires);h.cacheControl&&(n.cacheControl=h.cacheControl);var t={};b.request&&b.request.collectResourceTiming&&(f=!(!performance||!performance.getEntriesByName)&&performance.getEntriesByName(b.request.url))&&(t.resourceTiming=JSON.parse(JSON.stringify(f)));g.vectorTile=h.vectorTile;g.parse(h.vectorTile,d.layerIndex,d.actor,function(b,d){if(b||!d)return c(b);c(null,a.extend({rawTileData:k.slice(0)},d,n,t))});d.loaded=d.loaded||{};d.loaded[e]=g})};Ia.prototype.reloadTile=
function(a,b){var c=this.loaded,d=a.uid,e=this;if(c&&c[d]){var g=c[d];g.showCollisionBoxes=a.showCollisionBoxes;a=function(a,c){var d=g.reloadCallback;d&&(delete g.reloadCallback,g.parse(g.vectorTile,e.layerIndex,e.actor,d));b(a,c)};"parsing"===g.status?g.reloadCallback=a:"done"===g.status&&g.parse(g.vectorTile,this.layerIndex,this.actor,a)}};Ia.prototype.abortTile=function(a,b){var c=this.loading;a=a.uid;c&&c[a]&&c[a].abort&&(c[a].abort(),delete c[a]);b()};Ia.prototype.removeTile=function(a,b){var c=
this.loaded;a=a.uid;c&&c[a]&&delete c[a];b()};var Ka=function(){this.loading={};this.loaded={}};Ka.prototype.loadTile=function(b,c){var d=b.uid,e=b.encoding,g=new a.default$31(d);this.loading[d]=g;g.loadFromImage(b.rawImageData,e);delete this.loading[d];this.loaded=this.loaded||{};this.loaded[d]=g;c(null,g)};Ka.prototype.removeTile=function(a){var b=this.loaded;a=a.uid;b&&b[a]&&delete b[a]};var Ua={RADIUS:6378137,FLATTENING:1/298.257223563,POLAR_RADIUS:6356752.3142},Ya={geometry:function Ra(a){var b,
c=0;switch(a.type){case "Polygon":return C(a.coordinates);case "MultiPolygon":for(b=0;b<a.coordinates.length;b++)c+=C(a.coordinates[b]);return c;case "Point":case "MultiPoint":case "LineString":case "MultiLineString":return 0;case "GeometryCollection":for(b=0;b<a.geometries.length;b++)c+=Ra(a.geometries[b]);return c}},ring:P},Cb=function nb(a,b){switch(a&&a.type||null){case "FeatureCollection":return a.features=a.features.map(J(nb,b)),a;case "Feature":return a.geometry=nb(a.geometry,b),a;case "Polygon":case "MultiPolygon":return"Polygon"===
a.type?a.coordinates=E(a.coordinates,b):"MultiPolygon"===a.type&&(a.coordinates=a.coordinates.map(J(E,b))),a;default:return a}},eb=a.default$29.VectorTileFeature.prototype.toGeoJSON,Ta=function(b){this._feature=b;this.extent=a.default$8;this.type=b.type;this.properties=b.tags;"id"in b&&!isNaN(b.id)&&(this.id=parseInt(b.id,10))};Ta.prototype.loadGeometry=function(){if(1===this._feature.type){for(var b=[],c=0,d=this._feature.geometry;c<d.length;c+=1){var e=d[c];b.push([new a.default$1(e[0],e[1])])}return b}b=
[];c=0;for(d=this._feature.geometry;c<d.length;c+=1){e=[];for(var g=0,f=d[c];g<f.length;g+=1){var h=f[g];e.push(new a.default$1(h[0],h[1]))}b.push(e)}return b};Ta.prototype.toGeoJSON=function(a,b,c){return eb.call(this,a,b,c)};var Wa=function(b){this.layers={_geojsonTileLayer:this};this.name="_geojsonTileLayer";this.extent=a.default$8;this.length=b.length;this._features=b};Wa.prototype.feature=function(a){return new Ta(this._features[a])};var $a=a.__moduleExports.VectorTileFeature;M.prototype.feature=
function(a){return new w(this.features[a],this.options.extent)};w.prototype.loadGeometry=function(){var b=this.rawGeometry;this.geometry=[];for(var c=0;c<b.length;c++){for(var d=b[c],e=[],g=0;g<d.length;g++)e.push(new a.default$32(d[g][0],d[g][1]));this.geometry.push(e)}return this.geometry};w.prototype.bbox=function(){this.geometry||this.loadGeometry();for(var a=this.geometry,b=1/0,c=-1/0,d=1/0,e=-1/0,g=0;g<a.length;g++)for(var f=a[g],h=0;h<f.length;h++){var k=f[h];b=Math.min(b,k.x);c=Math.max(c,
k.x);d=Math.min(d,k.y);e=Math.max(e,k.y)}return[b,d,c,e]};w.prototype.toGeoJSON=$a.prototype.toGeoJSON;var rb=I;rb.fromVectorTileJs=I;rb.fromGeojsonVt=function(a,b){b=b||{};var c={},d;for(d in a)c[d]=new M(a[d].features,b),c[d].name=d,c[d].version=b.version,c[d].extent=b.extent;return I({layers:c})};rb.GeoJSONWrapper=M;var mb=function Oa(a,b,c,d,e,g){if(!(e-d<=c)){var f=Math.floor((d+e)/2);!function Nb(a,b,c,d,e,g){for(;e>d;){if(600<e-d){var f=e-d+1,h=c-d+1,k=Math.log(f),n=.5*Math.exp(2*k/3);k=.5*
Math.sqrt(k*n*(f-n)/f)*(0>h-f/2?-1:1);Nb(a,b,c,Math.max(d,Math.floor(c-h*n/f+k)),Math.min(e,Math.floor(c+(f-h)*n/f+k)),g)}f=b[2*c+g];h=d;n=e;U(a,b,d,c);for(b[2*e+g]>f&&U(a,b,d,e);h<n;){U(a,b,h,n);h++;for(n--;b[2*h+g]<f;)h++;for(;b[2*n+g]>f;)n--}b[2*d+g]===f?U(a,b,d,n):U(a,b,++n,e);n<=c&&(d=n+1);c<=n&&(e=n-1)}}(a,b,f,d,e,g%2);Oa(a,b,c,d,f-1,g+1);Oa(a,b,c,f+1,e,g+1)}};Y.prototype={range:function(a,b,c,d){for(var e=this.ids,g=this.coords,f=this.nodeSize,h,k,n=[0,e.length-1,0],t=[];n.length;){var m=n.pop(),
v=n.pop(),r=n.pop();if(v-r<=f)for(m=r;m<=v;m++)h=g[2*m],k=g[2*m+1],h>=a&&h<=c&&k>=b&&k<=d&&t.push(e[m]);else{var u=Math.floor((r+v)/2);h=g[2*u];k=g[2*u+1];h>=a&&h<=c&&k>=b&&k<=d&&t.push(e[u]);var l=(m+1)%2;(0===m?a<=h:b<=k)&&(n.push(r),n.push(u-1),n.push(l));(0===m?c>=h:d>=k)&&(n.push(u+1),n.push(v),n.push(l))}}return t},within:function(a,b,c){for(var d=this.ids,e=this.coords,g=this.nodeSize,f=[0,d.length-1,0],h=[],k=c*c;f.length;){var n=f.pop(),t=f.pop(),m=f.pop();if(t-m<=g)for(n=m;n<=t;n++){m=e[2*
n]-a;var v=e[2*n+1]-b;m*m+v*v<=k&&h.push(d[n])}else{v=Math.floor((m+t)/2);var r=e[2*v],u=e[2*v+1],l=r-a,p=u-b;l*l+p*p<=k&&h.push(d[v]);l=(n+1)%2;(0===n?a-c<=r:b-c<=u)&&(f.push(m),f.push(v-1),f.push(l));(0===n?a+c>=r:b+c>=u)&&(f.push(v+1),f.push(t),f.push(l))}}return h}};z.prototype={options:{minZoom:0,maxZoom:16,radius:40,extent:512,nodeSize:64,log:!1,reduce:null,initial:function(){return{}},map:function(a){return a}},load:function(a){var b=this.options.log;b&&console.time("total time");var c="prepare "+
a.length+" points";b&&console.time(c);this.points=a;a=a.map(fa);b&&console.timeEnd(c);for(c=this.options.maxZoom;c>=this.options.minZoom;c--){var d=+Date.now();this.trees[c+1]=new Y(a,la,Z,this.options.nodeSize,Float32Array);a=this._cluster(a,c);b&&console.log("z%d: %d clusters in %dms",c,a.length,+Date.now()-d)}return this.trees[this.options.minZoom]=new Y(a,la,Z,this.options.nodeSize,Float32Array),b&&console.timeEnd("total time"),this},getClusters:function(a,b){b=this.trees[this._limitZoom(b)];
a=b.range(a[0]/360+.5,ea(a[3]),a[2]/360+.5,ea(a[1]));for(var c=[],d=0;d<a.length;d++){var e=b.points[a[d]];c.push(e.numPoints?qa(e):this.points[e.id])}return c},getChildren:function(a,b){var c=this.trees[b+1].points[a];c=this.trees[b+1].within(c.x,c.y,this.options.radius/(this.options.extent*Math.pow(2,b)));for(var d=[],e=0;e<c.length;e++){var g=this.trees[b+1].points[c[e]];g.parentId===a&&d.push(g.numPoints?qa(g):this.points[g.id])}return d},getLeaves:function(a,b,c,d){var e=[];return this._appendLeaves(e,
a,b,c||10,d||0,0),e},getTile:function(a,b,c){var d=this.trees[this._limitZoom(a)];a=Math.pow(2,a);var e=this.options.radius/this.options.extent,g=(c-e)/a,f=(c+1+e)/a,h={features:[]};return this._addTileFeatures(d.range((b-e)/a,g,(b+1+e)/a,f),d.points,b,c,a,h),0===b&&this._addTileFeatures(d.range(1-e/a,g,1,f),d.points,a,c,a,h),b===a-1&&this._addTileFeatures(d.range(0,g,e/a,f),d.points,-1,c,a,h),h.features.length?h:null},getClusterExpansionZoom:function(a,b){for(;b<this.options.maxZoom;){a=this.getChildren(a,
b);if(b++,1!==a.length)break;a=a[0].properties.cluster_id}return b},_appendLeaves:function(a,b,c,d,e,g){b=this.getChildren(b,c);for(var f=0;f<b.length;f++){var h=b[f].properties;if(h.cluster?g+h.point_count<=e?g+=h.point_count:g=this._appendLeaves(a,h.cluster_id,c+1,d,e,g):g<e?g++:a.push(b[f]),a.length===d)break}return g},_addTileFeatures:function(a,b,c,d,e,g){for(var f=0;f<a.length;f++){var h=b[a[f]];g.features.push({type:1,geometry:[[Math.round(this.options.extent*(h.x*e-c)),Math.round(this.options.extent*
(h.y*e-d))]],tags:h.numPoints?ha(h):this.points[h.id].properties})}},_limitZoom:function(a){return Math.max(this.options.minZoom,Math.min(a,this.options.maxZoom+1))},_cluster:function(a,b){for(var c=[],d=this.options.radius/(this.options.extent*Math.pow(2,b)),e=0;e<a.length;e++){var g=a[e];if(!(g.zoom<=b)){g.zoom=b;var f=this.trees[b+1],h=f.within(g.x,g.y,d),k=g.numPoints||1,n=g.x*k,t=g.y*k,m=null;this.options.reduce&&(m=this.options.initial(),this._accumulate(m,g));for(var v=0;v<h.length;v++){var r=
f.points[h[v]];if(b<r.zoom){var u=r.numPoints||1;r.zoom=b;n+=r.x*u;t+=r.y*u;k+=u;r.parentId=e;this.options.reduce&&this._accumulate(m,r)}}1===k?c.push(g):(g.parentId=e,c.push({x:n/k,y:t/k,zoom:1/0,id:e,properties:m,parentId:-1,numPoints:k}))}}return c},_accumulate:function(a,b){b=b.numPoints?b.properties:this.options.map(this.points[b.id].properties);this.options.reduce(a,b)}};oa.prototype.options={maxZoom:14,indexMaxZoom:5,indexMaxPoints:1E5,tolerance:3,extent:4096,buffer:64,lineMetrics:!1,debug:0};
oa.prototype.splitTile=function(a,b,c,d,e,g,f){for(var h=[a,b,c,d],k=this.options,n=k.debug;h.length;){d=h.pop();c=h.pop();b=h.pop();a=h.pop();var t=1<<b,m=32*((1<<b)*d+c)+b,v=this.tiles[m],r;if(r=!v){1<n&&console.time("creation");v=this.tiles;r=a;for(var u=k,l=b===u.maxZoom?0:u.tolerance/((1<<b)*u.extent),p={features:[],numPoints:0,numSimplified:0,numFeatures:0,source:null,x:c,y:d,z:b,transformed:!1,minX:2,minY:1,maxX:-1,maxY:0},y=0;y<r.length;y++){p.numFeatures++;var q=void 0,B=p,A=r[y],D=l,C=u,
G=A.geometry,L=A.type,E=[];if("Point"===L||"MultiPoint"===L)for(var I=0;I<G.length;I+=3)E.push(G[I]),E.push(G[I+1]),B.numPoints++,B.numSimplified++;else if("LineString"===L)Ja(E,G,B,D,!1,!1);else if("MultiLineString"===L||"Polygon"===L)for(I=0;I<G.length;I++)Ja(E,G[I],B,D,"Polygon"===L,0===I);else if("MultiPolygon"===L)for(var N=0;N<G.length;N++){var J=G[N];for(I=0;I<J.length;I++)Ja(E,J[I],B,D,!0,0===I)}if(E.length){D=A.tags||null;if("LineString"===L&&C.lineMetrics){for(q in D={},A.tags)D[q]=A.tags[q];
D.mapbox_clip_start=G.start/G.size;D.mapbox_clip_end=G.end/G.size}q={geometry:E,type:"Polygon"===L||"MultiPolygon"===L?3:"LineString"===L||"MultiLineString"===L?2:1,tags:D};null!==A.id&&(q.id=A.id);B.features.push(q)}B=r[y].minX;A=r[y].minY;q=r[y].maxX;C=r[y].maxY;B<p.minX&&(p.minX=B);A<p.minY&&(p.minY=A);q>p.maxX&&(p.maxX=q);C>p.maxY&&(p.maxY=C)}r=(v=v[m]=p,this.tileCoords.push({z:b,x:c,y:d}),n)}r&&(1<n&&(console.log("tile z%d-%d-%d (features: %d, points: %d, simplified: %d)",b,c,d,v.numFeatures,
v.numPoints,v.numSimplified),console.timeEnd("creation")),m="z"+b,this.stats[m]=(this.stats[m]||0)+1,this.total++);if(v.source=a,e){if(b===k.maxZoom||b===e)continue;m=1<<e-b;if(c!==Math.floor(g/m)||d!==Math.floor(f/m))continue}else if(b===k.indexMaxZoom||v.numPoints<=k.indexMaxPoints)continue;if(v.source=null,0!==a.length)1<n&&console.time("clipping"),y=.5*k.buffer/k.extent,B=.5-y,A=.5+y,q=1+y,m=r=u=l=null,p=wa(a,t,c-y,c+A,0,v.minX,v.maxX,k),a=wa(a,t,c+B,c+q,0,v.minX,v.maxX,k),p&&(m=wa(p,t,d-y,d+
A,1,v.minY,v.maxY,k),r=wa(p,t,d+B,d+q,1,v.minY,v.maxY,k)),a&&(u=wa(a,t,d-y,d+A,1,v.minY,v.maxY,k),l=wa(a,t,d+B,d+q,1,v.minY,v.maxY,k)),1<n&&console.timeEnd("clipping"),h.push(m||[],b+1,2*c,2*d),h.push(r||[],b+1,2*c,2*d+1),h.push(u||[],b+1,2*c+1,2*d),h.push(l||[],b+1,2*c+1,2*d+1)}};oa.prototype.getTile=function(a,b,c){var d=this.options,e=d.extent;d=d.debug;if(0>a||24<a)return null;var g=1<<a;g=b=(b%g+g)%g;g=32*((1<<a)*c+g)+a;if(this.tiles[g])return Ga(this.tiles[g],e);1<d&&console.log("drilling down to z%d-%d-%d",
a,b,c);for(var f,h=a,k=b,n=c;!f&&0<h;)h--,k=Math.floor(k/2),n=Math.floor(n/2),f=this.tiles[32*((1<<h)*n+k)+h];return f&&f.source?(1<d&&console.log("found parent tile z%d-%d-%d",h,k,n),1<d&&console.time("drilling down"),this.splitTile(f.source,h,k,n,a,b,c),1<d&&console.timeEnd("drilling down"),this.tiles[g]?Ga(this.tiles[g],e):null):null};var cb=function(b){function c(a,c,d){b.call(this,a,c,Ea);d&&(this.loadGeoJSON=d)}return b&&(c.__proto__=b),c.prototype=Object.create(b&&b.prototype),c.prototype.constructor=
c,c.prototype.loadData=function(a,b){this._pendingCallback&&this._pendingCallback(null,{abandoned:!0});this._pendingCallback=b;this._pendingLoadDataParams=a;this._state&&"Idle"!==this._state?this._state="NeedsLoadData":(this._state="Coalescing",this._loadData())},c.prototype._loadData=function(){var a=this;if(this._pendingCallback&&this._pendingLoadDataParams){var b=this._pendingCallback,c=this._pendingLoadDataParams;delete this._pendingCallback;delete this._pendingLoadDataParams;this.loadGeoJSON(c,
function(d,e){if(d||!e)return b(d);if("object"!=typeof e)return b(Error("Input data is not a valid GeoJSON object."));Cb(e,!0);try{a._geoJSONIndex=c.cluster?(new z(c.superclusterOptions)).load(e.features):new oa(e,c.geojsonVtOptions)}catch(Va){return b(Va)}a.loaded={};d={};c.request&&c.request.collectResourceTiming&&(e=!(!performance||!performance.getEntriesByName)&&performance.getEntriesByName(c.request.url))&&(d.resourceTiming={},d.resourceTiming[c.source]=JSON.parse(JSON.stringify(e)));b(null,
d)})}},c.prototype.coalesce=function(){"Coalescing"===this._state?this._state="Idle":"NeedsLoadData"===this._state&&(this._state="Coalescing",this._loadData())},c.prototype.reloadTile=function(a,c){var d=this.loaded,e=a.uid;return d&&d[e]?b.prototype.reloadTile.call(this,a,c):this.loadTile(a,c)},c.prototype.loadGeoJSON=function(b,c){if(b.request)a.getJSON(b.request,c);else{if("string"!=typeof b.data)return c(Error("Input data is not a valid GeoJSON object."));try{return c(null,JSON.parse(b.data))}catch(Db){return c(Error("Input data is not a valid GeoJSON object."))}}},
c.prototype.removeSource=function(a,b){this._pendingCallback&&this._pendingCallback(null,{abandoned:!0});b()},c}(Ia);$a=function(b){var c=this;this.self=b;this.actor=new a.default$7(b,this);this.layerIndexes={};this.workerSourceTypes={vector:Ia,geojson:cb};this.workerSources={};this.demWorkerSources={};this.self.registerWorkerSource=function(a,b){if(c.workerSourceTypes[a])throw Error('Worker source with name "'+a+'" already registered.');c.workerSourceTypes[a]=b};this.self.registerRTLTextPlugin=function(b){if(a.plugin.isLoaded())throw Error("RTL text plugin already registered.");
a.plugin.applyArabicShaping=b.applyArabicShaping;a.plugin.processBidirectionalText=b.processBidirectionalText}};return $a.prototype.setLayers=function(a,b,c){this.getLayerIndex(a).replace(b);c()},$a.prototype.updateLayers=function(a,b,c){this.getLayerIndex(a).update(b.layers,b.removedIds);c()},$a.prototype.loadTile=function(a,b,c){this.getWorkerSource(a,b.type,b.source).loadTile(b,c)},$a.prototype.loadDEMTile=function(a,b,c){this.getDEMWorkerSource(a,b.source).loadTile(b,c)},$a.prototype.reloadTile=
function(a,b,c){this.getWorkerSource(a,b.type,b.source).reloadTile(b,c)},$a.prototype.abortTile=function(a,b,c){this.getWorkerSource(a,b.type,b.source).abortTile(b,c)},$a.prototype.removeTile=function(a,b,c){this.getWorkerSource(a,b.type,b.source).removeTile(b,c)},$a.prototype.removeDEMTile=function(a,b){this.getDEMWorkerSource(a,b.source).removeTile(b)},$a.prototype.removeSource=function(a,b,c){if(this.workerSources[a]&&this.workerSources[a][b.type]&&this.workerSources[a][b.type][b.source]){var d=
this.workerSources[a][b.type][b.source];delete this.workerSources[a][b.type][b.source];void 0!==d.removeSource?d.removeSource(b,c):c()}},$a.prototype.loadWorkerSource=function(a,b,c){try{this.self.importScripts(b.url),c()}catch(kb){c(kb.toString())}},$a.prototype.loadRTLTextPlugin=function(b,c,d){try{a.plugin.isLoaded()||(this.self.importScripts(c),d(a.plugin.isLoaded()?null:Error("RTL Text Plugin failed to import scripts from "+c)))}catch(kb){d(kb.toString())}},$a.prototype.getLayerIndex=function(a){var b=
this.layerIndexes[a];return b||(b=this.layerIndexes[a]=new na),b},$a.prototype.getWorkerSource=function(a,b,c){var d=this;(this.workerSources[a]||(this.workerSources[a]={}),this.workerSources[a][b]||(this.workerSources[a][b]={}),this.workerSources[a][b][c])||(this.workerSources[a][b][c]=new this.workerSourceTypes[b]({send:function(b,c,e){d.actor.send(b,c,e,a)}},this.getLayerIndex(a)));return this.workerSources[a][b][c]},$a.prototype.getDEMWorkerSource=function(a,b){return this.demWorkerSources[a]||
(this.demWorkerSources[a]={}),this.demWorkerSources[a][b]||(this.demWorkerSources[a][b]=new Ka),this.demWorkerSources[a][b]},"undefined"!=typeof WorkerGlobalScope&&"undefined"!=typeof self&&self instanceof WorkerGlobalScope&&new $a(self),$a});k(["./chunk1.js"],function(a){function b(a){if(!ua)return null;for(var b=0;b<a.length;b++)if(a[b]in ua)return a[b];return a[0]}function e(a,b){var c=d(Ua.API_URL);if(a.protocol=c.protocol,a.authority=c.authority,"/"!==c.path&&(a.path=""+c.path+a.path),!Ua.REQUIRE_ACCESS_TOKEN)return g(a);
if(!(b=b||Ua.ACCESS_TOKEN))throw Error("An API access token is required to use Mapbox GL. See https://www.mapbox.com/api-documentation/#access-tokens");if("s"===b[0])throw Error("Use a public access token (pk.*) with Mapbox GL, not a secret access token (sk.*). See https://www.mapbox.com/api-documentation/#access-tokens");return a.params.push("access_token\x3d"+b),g(a)}function f(a){return 0===a.indexOf("mapbox:")}function d(a){a=a.match($a);if(!a)throw Error("Unable to parse URL object");return{protocol:a[1],
authority:a[2],path:a[3]||"/",params:a[4]?a[4].split("\x26"):[]}}function g(a){var b=a.params.length?"?"+a.params.join("\x26"):"";return a.protocol+"://"+a.authority+a.path+b}function c(a,b,c,d,e,g){this.fontSize=a||24;this.buffer=void 0===b?3:b;this.cutoff=d||.25;this.fontFamily=e||"sans-serif";this.fontWeight=g||"normal";this.radius=c||8;a=this.size=this.fontSize+2*this.buffer;this.canvas=document.createElement("canvas");this.canvas.width=this.canvas.height=a;this.ctx=this.canvas.getContext("2d");
this.ctx.font=this.fontWeight+" "+this.fontSize+"px "+this.fontFamily;this.ctx.textBaseline="middle";this.ctx.fillStyle="black";this.gridOuter=new Float64Array(a*a);this.gridInner=new Float64Array(a*a);this.f=new Float64Array(a);this.d=new Float64Array(a);this.z=new Float64Array(a+1);this.v=new Int16Array(a);this.middle=Math.round(a/2*(0<=navigator.userAgent.indexOf("Gecko/")?1.2:1))}function h(a,b,c,d,e,g,f){for(var h=0;h<b;h++){for(var n=0;n<c;n++)d[n]=a[n*b+h];k(d,e,g,f,c);for(n=0;n<c;n++)a[n*
b+h]=e[n]}for(n=0;n<c;n++){for(h=0;h<b;h++)d[h]=a[n*b+h];k(d,e,g,f,b);for(h=0;h<b;h++)a[n*b+h]=Math.sqrt(e[h])}}function k(a,b,c,d,e){c[0]=0;d[0]=-1E20;d[1]=1E20;for(var g=1,f=0;g<e;g++){for(var h=(a[g]+g*g-(a[c[f]]+c[f]*c[f]))/(2*g-2*c[f]);h<=d[f];)f--,h=(a[g]+g*g-(a[c[f]]+c[f]*c[f]))/(2*g-2*c[f]);c[++f]=g;d[f]=h;d[f+1]=1E20}for(f=g=0;g<e;g++){for(;d[f+1]<g;)f++;b[g]=(g-c[f])*(g-c[f])+a[c[f]]}}function m(b,c,d){var e=function(b,c){if(b)return d(b);c&&(b=a.pick(c,"tiles minzoom maxzoom attribution mapbox_logo bounds".split(" ")),
c.vector_layers&&(b.vectorLayers=c.vector_layers,b.vectorLayerIds=b.vectorLayers.map(function(a){return a.id})),d(null,b))};b.url?a.getJSON(c(Cb(b.url),a.ResourceType.Source),e):oa.frame(function(){return e(null,b)})}function l(a,b,c,d,e){var g=e.maxPitchScaleFactor(),f=a.tilesIn(c,g);f.sort(p);c=[];for(var h=0;h<f.length;h+=1){var k=f[h];c.push({wrappedTileID:k.tileID.wrapped().key,queryResults:k.tile.queryRenderedFeatures(b,k.queryGeometry,k.scale,d,e,g,a.transform.calculatePosMatrix(k.tileID.toUnwrapped()))})}a=
{};b={};for(d=0;d<c.length;d+=1){g=c[d];e=g.queryResults;g=g.wrappedTileID;g=b[g]=b[g]||{};for(var n in e){var t=e[n];f=g[n]=g[n]||{};h=a[n]=a[n]||[];for(k=0;k<t.length;k+=1){var m=t[k];f[m.featureIndex]||(f[m.featureIndex]=!0,h.push(m.feature))}}}return a}function p(a,b){a=a.tileID;b=b.tileID;return a.overscaledZ-b.overscaledZ||a.canonical.y-b.canonical.y||a.wrap-b.wrap||a.canonical.x-b.canonical.x}function q(b,c){c=c.zoomTo(b.canonical.z);return new a.default$1((c.column-(b.canonical.x+b.wrap*Math.pow(2,
b.canonical.z)))*a.default$8,(c.row-b.canonical.y)*a.default$8)}function A(a){return"raster"===a||"image"===a||"video"===a}function C(){return new a.default.Worker(kf.workerUrl)}function P(b,c){var d={},e;for(e in b)"ref"!==e&&(d[e]=b[e]);return a.default$18.forEach(function(a){a in c&&(d[a]=c[a])}),d}function J(a){a=a.slice();for(var b=Object.create(null),c=0;c<a.length;c++)b[a[c].id]=a[c];for(c=0;c<a.length;c++)"ref"in a[c]&&(a[c]=P(a[c],b[a[c].ref]));return a}function E(b,c,d,e,g,f){for(var h in c=
c||{},b=b||{})b.hasOwnProperty(h)&&(a.default$10(b[h],c[h])||d.push({command:f,args:[e,h,c[h],g]}));for(h in c)c.hasOwnProperty(h)&&!b.hasOwnProperty(h)&&(a.default$10(b[h],c[h])||d.push({command:f,args:[e,h,c[h],g]}))}function H(a){return a.id}function M(a,b){return a[b.id]=b,a}function w(b,c){if(!b)return[{command:wb.setStyle,args:[c]}];var d=[];try{if(!a.default$10(b.version,c.version))return[{command:wb.setStyle,args:[c]}];a.default$10(b.center,c.center)||d.push({command:wb.setCenter,args:[c.center]});
a.default$10(b.zoom,c.zoom)||d.push({command:wb.setZoom,args:[c.zoom]});a.default$10(b.bearing,c.bearing)||d.push({command:wb.setBearing,args:[c.bearing]});a.default$10(b.pitch,c.pitch)||d.push({command:wb.setPitch,args:[c.pitch]});a.default$10(b.sprite,c.sprite)||d.push({command:wb.setSprite,args:[c.sprite]});a.default$10(b.glyphs,c.glyphs)||d.push({command:wb.setGlyphs,args:[c.glyphs]});a.default$10(b.transition,c.transition)||d.push({command:wb.setTransition,args:[c.transition]});a.default$10(b.light,
c.light)||d.push({command:wb.setLight,args:[c.light]});var e={},g=[];!function(b,c,d,e){for(var g in c=c||{},b=b||{})if(b.hasOwnProperty(g)&&!c.hasOwnProperty(g)){var f=g,h=e;d.push({command:wb.removeSource,args:[f]});h[f]=!0}for(g in c)if(c.hasOwnProperty(g))if(b.hasOwnProperty(g)){if(!a.default$10(b[g],c[g])){if(f="geojson"===b[g].type&&"geojson"===c[g].type)a:{f=void 0;h=b;var k=c,n=g;for(f in h[n])if(h[n].hasOwnProperty(f)&&"data"!==f&&!a.default$10(h[n][f],k[n][f])){f=!1;break a}for(f in k[n])if(k[n].hasOwnProperty(f)&&
"data"!==f&&!a.default$10(h[n][f],k[n][f])){f=!1;break a}f=!0}if(f)d.push({command:wb.setGeoJSONSourceData,args:[g,c[g].data]});else{f=g;h=c;k=d;n=f;var t=e;k.push({command:wb.removeSource,args:[n]});t[n]=!0;k.push({command:wb.addSource,args:[f,h[f]]})}}}else d.push({command:wb.addSource,args:[g,c[g]]})}(b.sources,c.sources,g,e);var f=[];b.layers&&b.layers.forEach(function(a){e[a.source]?d.push({command:wb.removeLayer,args:[a.id]}):f.push(a)});d=d.concat(g);(function(b,c,d){c=c||[];var e,g,f,h,k,
n=(b=b||[]).map(H),t=c.map(H);b=b.reduce(M,{});var m=c.reduce(M,{}),v=n.slice(),r=Object.create(null);for(e=c=0;c<n.length;c++){var u=n[c];m.hasOwnProperty(u)?e++:(d.push({command:wb.removeLayer,args:[u]}),v.splice(v.indexOf(u,e),1))}for(e=c=0;c<t.length;c++)u=t[t.length-1-c],v[v.length-1-c]!==u&&(b.hasOwnProperty(u)?(d.push({command:wb.removeLayer,args:[u]}),v.splice(v.lastIndexOf(u,v.length-e),1)):e++,h=v[v.length-c],d.push({command:wb.addLayer,args:[m[u],h]}),v.splice(v.length-c,0,u),r[u]=!0);
for(c=0;c<t.length;c++)if(g=b[u=t[c]],f=m[u],!r[u]&&!a.default$10(g,f))if(a.default$10(g.source,f.source)&&a.default$10(g["source-layer"],f["source-layer"])&&a.default$10(g.type,f.type)){for(k in E(g.layout,f.layout,d,u,null,wb.setLayoutProperty),E(g.paint,f.paint,d,u,null,wb.setPaintProperty),a.default$10(g.filter,f.filter)||d.push({command:wb.setFilter,args:[u,f.filter]}),a.default$10(g.minzoom,f.minzoom)&&a.default$10(g.maxzoom,f.maxzoom)||d.push({command:wb.setLayerZoomRange,args:[u,f.minzoom,
f.maxzoom]}),g)g.hasOwnProperty(k)&&"layout"!==k&&"paint"!==k&&"filter"!==k&&"metadata"!==k&&"minzoom"!==k&&"maxzoom"!==k&&(0===k.indexOf("paint.")?E(g[k],f[k],d,u,k.slice(6),wb.setPaintProperty):a.default$10(g[k],f[k])||d.push({command:wb.setLayerProperty,args:[u,k,f[k]]}));for(k in f)f.hasOwnProperty(k)&&!g.hasOwnProperty(k)&&"layout"!==k&&"paint"!==k&&"filter"!==k&&"metadata"!==k&&"minzoom"!==k&&"maxzoom"!==k&&(0===k.indexOf("paint.")?E(g[k],f[k],d,u,k.slice(6),wb.setPaintProperty):a.default$10(g[k],
f[k])||d.push({command:wb.setLayerProperty,args:[u,k,f[k]]}))}else d.push({command:wb.removeLayer,args:[u]}),h=v[v.lastIndexOf(u)+1],d.push({command:wb.addLayer,args:[f,h]})})(f,c.layers,d)}catch(Se){console.warn("Unable to compute style diff:",Se),d=[{command:wb.setStyle,args:[c]}]}return d}function I(b,c,d,e,g){var f=a.mat4.identity(new Float32Array(16));return c?(a.mat4.identity(f),a.mat4.scale(f,f,[1/g,1/g,1]),d||a.mat4.rotateZ(f,f,e.angle)):(a.mat4.scale(f,f,[e.width/2,-e.height/2,1]),a.mat4.translate(f,
f,[1,-1,0]),a.mat4.multiply(f,f,b)),f}function Q(b,c){b=[b.x,b.y,0,1];Y(b,b,c);c=b[3];return{point:new a.default$1(b[0]/c,b[1]/c),signedDistanceFromCamera:c}}function N(a,b,c,d,e,g,f,h,k,n,t,m){var v=h.glyphStartIndex+h.numGlyphs,r=h.lineStartIndex,u=h.lineStartIndex+h.lineLength,l=b.getoffsetX(h.glyphStartIndex);b=b.getoffsetX(v-1);l=U(a*l,c,d,e,g,f,h.segment,r,u,k,n,t,m);return l?(a=U(a*b,c,d,e,g,f,h.segment,r,u,k,n,t,m))?{first:l,last:a}:null:null}function L(b,c,d,e){return b===a.WritingMode.horizontal&&
Math.abs(d.y-c.y)>Math.abs(d.x-c.x)*e?{useVertical:!0}:(b===a.WritingMode.vertical?c.y<d.y:c.x>d.x)?{needsFlipping:!0}:null}function R(b,c,d,e,g,f,h,k,n,t,m,v,r,u){var l=c/24,p=b.lineOffsetX*c;c*=b.lineOffsetY;if(1<b.numGlyphs){g=b.glyphStartIndex+b.numGlyphs;var y=b.lineStartIndex,q=b.lineStartIndex+b.lineLength,B=N(l,k,p,c,d,m,v,b,n,f,r,!1);if(!B)return{notEnoughRoom:!0};var A=Q(B.first.point,h).point;h=Q(B.last.point,h).point;if(e&&!d&&(u=L(b.writingMode,A,h,u)))return u;u=[B.first];for(e=b.glyphStartIndex+
1;e<g-1;e++)u.push(U(l*k.getoffsetX(e),p,c,d,m,v,b.segment,y,q,n,f,r,!1));u.push(B.last)}else{if(e&&!d&&(y=Q(v,g).point,q=b.lineStartIndex+b.segment+1,q=new a.default$1(n.getx(q),n.gety(q)),B=Q(q,g),g=0<B.signedDistanceFromCamera?B.point:x(v,q,y,1,g),u=L(b.writingMode,y,g,u)))return u;b=U(l*k.getoffsetX(b.glyphStartIndex),p,c,d,m,v,b.segment,b.lineStartIndex,b.lineStartIndex+b.lineLength,n,f,r,!1);if(!b)return{notEnoughRoom:!0};u=[b]}b=0;for(d=u;b<d.length;b+=1)f=d[b],a.addDynamicAttributes(t,f.point,
f.angle);return{}}function x(a,b,c,d,e){a=Q(a.add(a.sub(b)._unit()),e).point;a=c.sub(a);return c.add(a._mult(d/a.mag()))}function U(b,c,d,e,g,f,h,k,n,t,m,v,r){var u=e?b-c:b+c;b=0<u?1:-1;c=0;e&&(b*=-1,c=Math.PI);0>b&&(c+=Math.PI);h=e=0<b?k+h:k+h+1;var l=g,p=0,y=0;for(u=Math.abs(u);p+y<=u;){if((e+=b)<k||e>=n)return null;if(g=l,void 0===(l=v[e])){l=new a.default$1(t.getx(e),t.gety(e));var q=Q(l,m);0<q.signedDistanceFromCamera?l=v[e]=q.point:(q=e-b,l=x(0===p?f:new a.default$1(t.getx(q),t.gety(q)),l,g,
u-p+1,m))}p+=y;y=g.dist(l)}k=(u-p)/y;f=l.sub(g);k=f.mult(k)._add(g);return k._add(f._unit()._perp()._mult(d*b)),{point:k,angle:c+Math.atan2(l.y-g.y,l.x-g.x),tileDistance:r?{prevTileDistance:e-b===h?0:t.gettileUnitDistanceFromAnchor(e-b),lastSegmentViewportDistance:u-p}:null}}function T(a,b){for(var c=0;c<a;c++){var d=b.length;b.resize(d+4);b.float32.set(Ne,3*d)}}function Y(a,b,c){var d=b[0];b=b[1];return a[0]=c[0]*d+c[4]*b+c[12],a[1]=c[1]*d+c[5]*b+c[13],a[3]=c[3]*d+c[7]*b+c[15],a}function ia(b,c,
d){return a.default$8/(b.tileSize*Math.pow(2,d-b.tileID.overscaledZ))*c}function S(a,b,c){a.emplaceBack(b?1:0,c?1:0);a.emplaceBack(b?1:0,c?1:0);a.emplaceBack(b?1:0,c?1:0);a.emplaceBack(b?1:0,c?1:0)}function z(a){if(0===a.opacity&&!a.placed)return 0;if(1===a.opacity&&a.placed)return 4294967295;var b=a.placed?1:0;a=Math.floor(127*a.opacity);return a*Ob+b*ad+a*$d+b*Cd+a*zf+b*ae+a*pe+b}function fa(b,c,d,e,g){for(var f=0;f<d.length;f++){var h=d[f];if(e.isLessThan(h.tileID))break;if(c.key===h.tileID.key)return;
if(h.tileID.isChildOf(c)){c=c.children(1/0);for(h=0;h<c.length;h++)fa(b,c[h],d.slice(f),e,g);return}}d=c.overscaledZ-b.overscaledZ;b=new a.CanonicalTileID(d,c.canonical.x-(b.canonical.x<<d),c.canonical.y-(b.canonical.y<<d));g[b.key]=g[b.key]||b}function qa(a,b,c,d,e){var g=a.context,f=g.gl,h=e?a.useProgram("collisionCircle"):a.useProgram("collisionBox");g.setDepthMode(yb.disabled);g.setStencilMode(Ma.disabled);g.setColorMode(a.colorModeForRenderPass());for(var k=0;k<d.length;k++){var n=d[k],t=b.getTile(n),
m=t.getBucket(c);if(m&&(m=e?m.collisionCircle:m.collisionBox)){f.uniformMatrix4fv(h.uniforms.u_matrix,!1,n.posMatrix);e||g.lineWidth.set(1);f.uniform1f(h.uniforms.u_camera_to_center_distance,a.transform.cameraToCenterDistance);n=ia(t,1,a.transform.zoom);var v=Math.pow(2,a.transform.zoom-t.tileID.overscaledZ);f.uniform1f(h.uniforms.u_pixels_to_tile_units,n);f.uniform2f(h.uniforms.u_extrude_scale,a.transform.pixelsToGLUnits[0]/(n*v),a.transform.pixelsToGLUnits[1]/(n*v));f.uniform1f(h.uniforms.u_overscale_factor,
t.tileID.overscaleFactor());h.draw(g,e?f.TRIANGLES:f.LINES,c.id,m.layoutVertexBuffer,m.indexBuffer,m.segments,null,m.collisionVertexBuffer,null)}}}function ha(b,c,d,e,g,f,h,k,n,t){var m=b.context,v=m.gl,r=b.transform;k="map"===k;n="map"===n;var u=k&&"line"===d.layout.get("symbol-placement"),l=k&&!n&&!u;m.setDepthMode(n?b.depthModeForSublayer(0,yb.ReadOnly):yb.disabled);for(var p=0;p<e.length;p+=1){var y=e[p],q=c.getTile(y),B=q.getBucket(d);if(B){var A=g?B.text:B.icon;if(A&&A.segments.get().length){var D=
A.programConfigurations.get(d.id),C=g||B.sdfIcons,G=g?B.textSizeData:B.iconSizeData;if(!L){var L=b.useProgram(C?"symbolSDF":"symbolIcon",D);D.setUniforms(b.context,L,d.paint,{zoom:b.transform.zoom});D=L;var E=g,N=l,J=G;G=b.context.gl;var P=b.transform;G.uniform1i(D.uniforms.u_pitch_with_map,n?1:0);G.uniform1f(D.uniforms.u_is_text,E?1:0);G.uniform1f(D.uniforms.u_pitch,P.pitch/360*2*Math.PI);var H="constant"===J.functionType||"camera"===J.functionType;G.uniform1i(D.uniforms.u_is_size_zoom_constant,
"constant"===J.functionType||"source"===J.functionType?1:0);G.uniform1i(D.uniforms.u_is_size_feature_constant,H?1:0);G.uniform1f(D.uniforms.u_camera_to_center_distance,P.cameraToCenterDistance);E=a.evaluateSizeForZoom(J,P.zoom,Zb.properties[E?"text-size":"icon-size"]);void 0!==E.uSizeT&&G.uniform1f(D.uniforms.u_size_t,E.uSizeT);void 0!==E.uSize&&G.uniform1f(D.uniforms.u_size,E.uSize);G.uniform1f(D.uniforms.u_aspect_ratio,P.width/P.height);G.uniform1i(D.uniforms.u_rotate_symbol,N?1:0)}(m.activeTexture.set(v.TEXTURE0),
v.uniform1i(L.uniforms.u_texture,0),g)?(q.glyphAtlasTexture.bind(v.LINEAR,v.CLAMP_TO_EDGE),v.uniform2fv(L.uniforms.u_texsize,q.glyphAtlasTexture.size)):(D=1!==d.layout.get("icon-size").constantOr(0)||B.iconsNeedLinear,N=n||0!==r.pitch,q.iconAtlasTexture.bind(C||b.options.rotating||b.options.zooming||D||N?v.LINEAR:v.NEAREST,v.CLAMP_TO_EDGE),v.uniform2fv(L.uniforms.u_texsize,q.iconAtlasTexture.size));v.uniformMatrix4fv(L.uniforms.u_matrix,!1,b.translatePosMatrix(y.posMatrix,q,f,h));J=ia(q,1,b.transform.zoom);
N=I(y.posMatrix,n,k,b.transform,J);D=y.posMatrix;E=n;G=k;P=b.transform;H=a.mat4.identity(new Float32Array(16));E=(E?(a.mat4.multiply(H,H,D),a.mat4.scale(H,H,[J,J,1]),G||a.mat4.rotateZ(H,H,-P.angle)):(a.mat4.scale(H,H,[1,-1,1]),a.mat4.translate(H,H,[-1,-1,0]),a.mat4.scale(H,H,[2/P.width,2/P.height,1])),H);v.uniformMatrix4fv(L.uniforms.u_gl_coord_matrix,!1,b.translatePosMatrix(E,q,f,h,!0));if(u){v.uniformMatrix4fv(L.uniforms.u_label_plane_matrix,!1,Dc);q=B;y=y.posMatrix;B=b;D=g;G=n;P=t;J=D?q.textSizeData:
q.iconSizeData;H=a.evaluateSizeForZoom(J,B.transform.zoom,Zd.properties[D?"text-size":"icon-size"]);var M=[256/B.width*2+1,256/B.height*2+1],w=D?q.text.dynamicLayoutVertexArray:q.icon.dynamicLayoutVertexArray;w.clear();for(var x=q.lineVertexArray,O=D?q.text.placedSymbolArray:q.icon.placedSymbolArray,ca=B.transform.width/B.transform.height,Ic=!1,U=0;U<O.length;U++){var Y=O.get(U);if(Y.hidden||Y.writingMode===a.WritingMode.vertical&&!Ic)T(Y.numGlyphs,w);else{Ic=!1;var S=[Y.anchorX,Y.anchorY,0,1];a.vec4.transformMat4(S,
S,y);var ed=S[0]/S[3],z=S[1]/S[3];if(ed>=-M[0]&&ed<=M[0]&&z>=-M[1]&&z<=M[1]){Ic=.5+S[3]/B.transform.cameraToCenterDistance*.5;S=a.evaluateSizeForFeature(J,H,Y);S=G?S*Ic:S/Ic;ed=new a.default$1(Y.anchorX,Y.anchorY);z=Q(ed,N).point;var Dg={},W=R(Y,S,!1,P,y,N,E,q.glyphOffsetArray,x,w,z,ed,Dg,ca);Ic=W.useVertical;(W.notEnoughRoom||Ic||W.needsFlipping&&R(Y,S,!0,P,y,N,E,q.glyphOffsetArray,x,w,z,ed,Dg,ca).notEnoughRoom)&&T(Y.numGlyphs,w)}else T(Y.numGlyphs,w)}}D?q.text.dynamicLayoutVertexBuffer.updateData(w):
q.icon.dynamicLayoutVertexBuffer.updateData(w)}else v.uniformMatrix4fv(L.uniforms.u_label_plane_matrix,!1,N);v.uniform1f(L.uniforms.u_fade_change,b.options.fadeDuration?b.symbolFadeChange:1);q=L;y=d;B=n;D=b.context;N=D.gl;E=b.transform;C&&(C=0!==y.paint.get(g?"text-halo-width":"icon-halo-width").constantOr(1),N.uniform1f(q.uniforms.u_gamma_scale,B?Math.cos(E._pitch)*E.cameraToCenterDistance:1),C&&(N.uniform1f(q.uniforms.u_is_halo,1),ea(A,y,D,q)),N.uniform1f(q.uniforms.u_is_halo,0));ea(A,y,D,q)}}}}
function ea(a,b,c,d){d.draw(c,c.gl.TRIANGLES,b.id,a.layoutVertexBuffer,a.indexBuffer,a.segments,a.programConfigurations.get(b.id),a.dynamicLayoutVertexBuffer,a.opacityVertexBuffer)}function F(a,b,c,d,e){if(!Wb(c.paint.get("fill-pattern"),a))for(var g=!0,f=0;f<d.length;f+=1){var h=d[f],k=b.getTile(h),n=k.getBucket(c);n&&(a.context.setStencilMode(a.stencilModeForClipping(h)),e(a,b,c,k,h,n,g),g=!1)}}function la(a,b,c,d,e,g,f){b=a.context.gl;var h=g.programConfigurations.get(c.id);pa("fill",c.paint.get("fill-pattern"),
a,h,c,d,e,f).draw(a.context,b.TRIANGLES,c.id,g.layoutVertexBuffer,g.indexBuffer,g.segments,h)}function Z(a,b,c,d,e,g,f){b=a.context.gl;var h=g.programConfigurations.get(c.id);d=pa("fillOutline",c.getPaintProperty("fill-outline-color")?null:c.paint.get("fill-pattern"),a,h,c,d,e,f);b.uniform2f(d.uniforms.u_world,b.drawingBufferWidth,b.drawingBufferHeight);d.draw(a.context,b.LINES,c.id,g.layoutVertexBuffer,g.indexBuffer2,g.segments2,h)}function pa(a,b,c,d,e,g,f,h){var k,n=c.context.program.get();return b?
(k=c.useProgram(a+"Pattern",d),(h||k.program!==n)&&(d.setUniforms(c.context,k,e.paint,{zoom:c.transform.zoom}),Qe(b,c,k)),Pd(g,c,k)):(k=c.useProgram(a,d),(h||k.program!==n)&&d.setUniforms(c.context,k,e.paint,{zoom:c.transform.zoom})),c.context.gl.uniformMatrix4fv(k.uniforms.u_matrix,!1,c.translatePosMatrix(f.posMatrix,g,e.paint.get("fill-translate"),e.paint.get("fill-translate-anchor"))),k}function da(a,b,c,d,e,g,f){b=a.context;var h=b.gl,k=c.paint.get("fill-extrusion-pattern"),n=a.context.program.get(),
t=g.programConfigurations.get(c.id),m=a.useProgram(k?"fillExtrusionPattern":"fillExtrusion",t);if((f||m.program!==n)&&t.setUniforms(b,m,c.paint,{zoom:a.transform.zoom}),k){if(Wb(k,a))return;Qe(k,a,m);Pd(d,a,m);h.uniform1f(m.uniforms.u_height_factor,-Math.pow(2,e.overscaledZ)/d.tileSize/8)}a.context.gl.uniformMatrix4fv(m.uniforms.u_matrix,!1,a.translatePosMatrix(e.posMatrix,d,c.paint.get("fill-extrusion-translate"),c.paint.get("fill-extrusion-translate-anchor")));d=a.context.gl;e=a.style.light;f=e.properties.get("position");
f=[f.x,f.y,f.z];k=Gd.create();"viewport"===e.properties.get("anchor")&&Gd.fromRotation(k,-a.transform.angle);Be.transformMat3(f,f,k);a=e.properties.get("color");d.uniform3fv(m.uniforms.u_lightpos,f);d.uniform1f(m.uniforms.u_lightintensity,e.properties.get("intensity"));d.uniform3f(m.uniforms.u_lightcolor,a.r,a.g,a.b);m.draw(b,h.TRIANGLES,c.id,g.layoutVertexBuffer,g.indexBuffer,g.segments,t)}function K(b,c,d){var e=b.context,g=e.gl,f=c.fbo;if(f){var h=b.useProgram("hillshade"),k=b.transform.calculatePosMatrix(c.tileID.toUnwrapped(),
!0);!function(a,b,c){var d=c.paint.get("hillshade-illumination-direction")*(Math.PI/180);"viewport"===c.paint.get("hillshade-illumination-anchor")&&(d-=b.transform.angle);b.context.gl.uniform2f(a.uniforms.u_light,c.paint.get("hillshade-exaggeration"),d)}(h,b,d);var n=function(b,c){c=c.toCoordinate();var d=new a.default$17(c.column,c.row+1,c.zoom);return[b.transform.coordinateLocation(c).lat,b.transform.coordinateLocation(d).lat]}(b,c.tileID);e.activeTexture.set(g.TEXTURE0);g.bindTexture(g.TEXTURE_2D,
f.colorAttachment.get());g.uniformMatrix4fv(h.uniforms.u_matrix,!1,k);g.uniform2fv(h.uniforms.u_latrange,n);g.uniform1i(h.uniforms.u_image,0);f=d.paint.get("hillshade-shadow-color");g.uniform4f(h.uniforms.u_shadow,f.r,f.g,f.b,f.a);f=d.paint.get("hillshade-highlight-color");g.uniform4f(h.uniforms.u_highlight,f.r,f.g,f.b,f.a);f=d.paint.get("hillshade-accent-color");(g.uniform4f(h.uniforms.u_accent,f.r,f.g,f.b,f.a),c.maskedBoundsBuffer&&c.maskedIndexBuffer&&c.segments)?h.draw(e,g.TRIANGLES,d.id,c.maskedBoundsBuffer,
c.maskedIndexBuffer,c.segments):(c=b.rasterBoundsBuffer,b.rasterBoundsVAO.bind(e,h,c,[]),g.drawArrays(g.TRIANGLE_STRIP,0,c.length))}}function ja(b,c,d,e,g){var f=e.paint.get("raster-fade-duration");if(0<f){var h=oa.now();e=(h-b.timeAdded)/f;f=c?(h-c.timeAdded)/f:-1;d=d.getSource();g=g.coveringZoomLevel({tileSize:d.tileSize,roundZoom:d.roundZoom});g=(g=!c||Math.abs(c.tileID.overscaledZ-g)>Math.abs(b.tileID.overscaledZ-g))&&b.refreshedUponExpiration?1:a.clamp(g?e:1-f,0,1);return b.refreshedUponExpiration&&
1<=e&&(b.refreshedUponExpiration=!1),c?{opacity:1,mix:1-g}:{opacity:g,mix:0}}return{opacity:1,mix:0}}function xa(a,b){if(a.row>b.row){var c=a;a=b;b=c}return{x0:a.column,y0:a.row,x1:b.column,y1:b.row,dx:b.column-a.column,dy:b.row-a.row}}function za(a,b,c,d,e){c=Math.max(c,Math.floor(b.y0));d=Math.min(d,Math.ceil(b.y1));if(a.x0===b.x0&&a.y0===b.y0?a.x0+b.dy/a.dy*a.dx<b.x1:a.x1-b.dy/a.dy*a.dx<b.x0){var g=a;a=b;b=g}g=a.dx/a.dy;for(var f=b.dx/b.dy,h=0<a.dx,k=0>b.dx;c<d;c++)e(Math.floor(f*Math.max(0,Math.min(b.dy,
c+k-b.y0))+b.x0),Math.ceil(g*Math.max(0,Math.min(a.dy,c+h-a.y0))+a.x0),c)}function ka(a,b,c,d,e,g){var f,h=xa(a,b);b=xa(b,c);a=xa(c,a);h.dy>b.dy&&(f=h,h=b,b=f);h.dy>a.dy&&(f=h,h=a,a=f);b.dy>a.dy&&(f=b,b=a,a=f);h.dy&&za(a,h,d,e,g);b.dy&&za(a,b,d,e,g)}function wa(a){return a*(2-a)}function ta(a){a.parentNode&&a.parentNode.removeChild(a)}function aa(a,b,c){if(a=new Oa(a.lng,a.lat),b){var d=new Oa(a.lng-360,a.lat),e=new Oa(a.lng+360,a.lat),g=c.locationPoint(a).distSqr(b);c.locationPoint(d).distSqr(b)<
g?a=d:c.locationPoint(e).distSqr(b)<g&&(a=e)}for(;180<Math.abs(a.lng-c.center.lng);){b=c.locationPoint(a);if(0<=b.x&&0<=b.y&&b.x<=c.width&&b.y<=c.height)break;a.lng>c.center.lng?a.lng-=360:a.lng+=360}return a}function ma(a,b,c){a=a.classList;for(var d in rd)a.remove("mapboxgl-"+c+"-anchor-"+d);a.add("mapboxgl-"+c+"-anchor-"+b)}function Aa(a,b,c){var d,e,g,f,h,k,n=c&&c.maxWidth||100,t=a._container.clientHeight/2;a=(d=a.unproject([0,t]),e=a.unproject([n,t]),g=Math.PI/180,f=d.lat*g,h=e.lat*g,k=Math.sin(f)*
Math.sin(h)+Math.cos(f)*Math.cos(h)*Math.cos((e.lng-d.lng)*g),6371E3*Math.acos(Math.min(k,1)));c&&"imperial"===c.unit?(c=3.2808*a,5280<c?va(b,n,c/5280,"mi"):va(b,n,c,"ft")):c&&"nautical"===c.unit?va(b,n,a/1852,"nm"):va(b,n,a,"m")}function va(a,b,c,d){var e,g,f=(e=Math.pow(10,(""+Math.floor(c)).length-1))*(10<=(g=c/e)?10:5<=g?5:3<=g?3:2<=g?2:1);c=f/c;"m"===d&&1E3<=f&&(f/=1E3,d="km");a.style.width=b*c+"px";a.innerHTML=f+d}var sa=a.createCommonjsModule(function(a){function b(a){return!!("undefined"!=
typeof window&&"undefined"!=typeof document&&Array.prototype&&Array.prototype.every&&Array.prototype.filter&&Array.prototype.forEach&&Array.prototype.indexOf&&Array.prototype.lastIndexOf&&Array.prototype.map&&Array.prototype.some&&Array.prototype.reduce&&Array.prototype.reduceRight&&Array.isArray&&Function.prototype&&Function.prototype.bind&&Object.keys&&Object.create&&Object.getPrototypeOf&&Object.getOwnPropertyNames&&Object.isSealed&&Object.isFrozen&&Object.isExtensible&&Object.getOwnPropertyDescriptor&&
Object.defineProperty&&Object.defineProperties&&Object.seal&&Object.freeze&&Object.preventExtensions&&"JSON"in window&&"parse"in JSON&&"stringify"in JSON&&function(){if(!("Worker"in window&&"Blob"in window&&"URL"in window))return!1;var a=new Blob([""],{type:"text/javascript"});a=URL.createObjectURL(a);try{var b=new Worker(a);var c=!0}catch(Cg){c=!1}b&&b.terminate();return URL.revokeObjectURL(a),c}()&&"Uint8ClampedArray"in window&&function(a){if(void 0===c[a]){var d=c;var e=document.createElement("canvas");
var g=Object.create(b.webGLContextAttributes);e=(g.failIfMajorPerformanceCaveat=a,e.probablySupportsContext?e.probablySupportsContext("webgl",g)||e.probablySupportsContext("experimental-webgl",g):e.supportsContext?e.supportsContext("webgl",g)||e.supportsContext("experimental-webgl",g):e.getContext("webgl",g)||e.getContext("experimental-webgl",g));d[a]=e}return c[a]}(a&&a.failIfMajorPerformanceCaveat))}a.exports?a.exports=b:window&&(window.mapboxgl=window.mapboxgl||{},window.mapboxgl.supported=b);
var c={};b.webGLContextAttributes={antialias:!1,alpha:!0,stencil:!0,depth:!0}}),Ca=a.default.performance&&a.default.performance.now?a.default.performance.now.bind(a.default.performance):Date.now.bind(Date),Ga=a.default.requestAnimationFrame||a.default.mozRequestAnimationFrame||a.default.webkitRequestAnimationFrame||a.default.msRequestAnimationFrame,Ja=a.default.cancelAnimationFrame||a.default.mozCancelAnimationFrame||a.default.webkitCancelAnimationFrame||a.default.msCancelAnimationFrame,oa={now:Ca,
frame:function(a){return Ga(a)},cancelFrame:function(a){return Ja(a)},getImageData:function(b){var c=a.default.document.createElement("canvas"),d=c.getContext("2d");if(!d)throw Error("failed to create canvas 2d context");return c.width=b.width,c.height=b.height,d.drawImage(b,0,0,b.width,b.height),d.getImageData(0,0,b.width,b.height)},hardwareConcurrency:a.default.navigator.hardwareConcurrency||4,get devicePixelRatio(){return a.default.devicePixelRatio},supportsWebp:!1};if(a.default.document){var Ea=
a.default.document.createElement("img");Ea.onload=function(){oa.supportsWebp=!0};Ea.src="data:image/webp;base64,UklGRh4AAABXRUJQVlA4TBEAAAAvAQAAAAfQ//73v/+BiOh/AAA\x3d"}var na={create:function(b,c,d){b=a.default.document.createElement(b);return c&&(b.className=c),d&&d.appendChild(b),b},createNS:function(b,c){return a.default.document.createElementNS(b,c)}},ua=a.default.document?a.default.document.documentElement.style:null,Fa,X=b(["userSelect","MozUserSelect","WebkitUserSelect","msUserSelect"]);na.disableDrag=
function(){ua&&X&&(Fa=ua[X],ua[X]="none")};na.enableDrag=function(){ua&&X&&(ua[X]=Fa)};var Pa=b(["transform","WebkitTransform"]);na.setTransform=function(a,b){a.style[Pa]=b};var Ba=!1;try{var Ia=Object.defineProperty({},"passive",{get:function(){Ba=!0}});a.default.addEventListener("test",Ia,Ia);a.default.removeEventListener("test",Ia,Ia)}catch(nf){Ba=!1}na.addEventListener=function(a,b,c,d){void 0===d&&(d={});"passive"in d&&Ba?a.addEventListener(b,c,d):a.addEventListener(b,c,d.capture)};na.removeEventListener=
function(a,b,c,d){void 0===d&&(d={});"passive"in d&&Ba?a.removeEventListener(b,c,d):a.removeEventListener(b,c,d.capture)};var Ka=function(b){b.preventDefault();b.stopPropagation();a.default.removeEventListener("click",Ka,!0)};na.suppressClick=function(){a.default.addEventListener("click",Ka,!0);a.default.setTimeout(function(){a.default.removeEventListener("click",Ka,!0)},0)};na.mousePos=function(b,c){var d=b.getBoundingClientRect();return c=c.touches?c.touches[0]:c,new a.default$1(c.clientX-d.left-
b.clientLeft,c.clientY-d.top-b.clientTop)};na.touchPos=function(b,c){var d=b.getBoundingClientRect(),e=[];c="touchend"===c.type?c.changedTouches:c.touches;for(var g=0;g<c.length;g++)e.push(new a.default$1(c[g].clientX-d.left-b.clientLeft,c[g].clientY-d.top-b.clientTop));return e};na.mouseButton=function(b){return void 0!==a.default.InstallTrigger&&2===b.button&&b.ctrlKey&&0<=a.default.navigator.platform.toUpperCase().indexOf("MAC")?0:b.button};na.remove=function(a){a.parentNode&&a.parentNode.removeChild(a)};
var Ua={API_URL:"https://api.mapbox.com",REQUIRE_ACCESS_TOKEN:!0,ACCESS_TOKEN:null},Ya=function(a,b){if(!f(a))return a;a=d(a);return a.path="/fonts/v1"+a.path,e(a,b)},Cb=function(a,b){if(!f(a))return a;a=d(a);return a.path="/v4/"+a.authority+".json",a.params.push("secure"),e(a,b)},eb=function(a,b,c,h){var k=d(a);return f(a)?(k.path="/styles/v1"+k.path+"/sprite"+b+c,e(k,h)):(k.path+=""+b+c,g(k))},Ta=/(\.(png|jpg)\d*)(?=$)/,Wa=function(a,b,c){if(!b||!f(b))return a;a=d(a);a.path=a.path.replace(Ta,(2<=
oa.devicePixelRatio||512===c?"@2x":"")+(oa.supportsWebp?".webp":"$1"));c=a.params;for(b=0;b<c.length;b++)0===c[b].indexOf("access_token\x3dtk.")&&(c[b]="access_token\x3d"+(Ua.ACCESS_TOKEN||""));return g(a)},$a=/^(\w+):\/\/([^/?]*)(\/[^?]+)?\??(.+)?/,rb=a.default.HTMLImageElement,mb=a.default.HTMLCanvasElement,cb=a.default.HTMLVideoElement,Hb=a.default.ImageData,pb=function(a,b,c,d){this.context=a;this.format=c;this.texture=a.gl.createTexture();this.update(b,d)};pb.prototype.update=function(a,b){var c=
a.width,d=a.height,e=!this.size||this.size[0]!==c||this.size[1]!==d,g=this.context,f=g.gl;this.useMipmap=!(!b||!b.useMipmap);f.bindTexture(f.TEXTURE_2D,this.texture);e?(this.size=[c,d],g.pixelStoreUnpack.set(1),this.format!==f.RGBA||b&&!1===b.premultiply||g.pixelStoreUnpackPremultiplyAlpha.set(!0),a instanceof rb||a instanceof mb||a instanceof cb||a instanceof Hb?f.texImage2D(f.TEXTURE_2D,0,this.format,this.format,f.UNSIGNED_BYTE,a):f.texImage2D(f.TEXTURE_2D,0,this.format,c,d,0,this.format,f.UNSIGNED_BYTE,
a.data)):a instanceof rb||a instanceof mb||a instanceof cb||a instanceof Hb?f.texSubImage2D(f.TEXTURE_2D,0,0,0,f.RGBA,f.UNSIGNED_BYTE,a):f.texSubImage2D(f.TEXTURE_2D,0,0,0,c,d,f.RGBA,f.UNSIGNED_BYTE,a.data);this.useMipmap&&this.isSizePowerOfTwo()&&f.generateMipmap(f.TEXTURE_2D)};pb.prototype.bind=function(a,b,c){var d=this.context.gl;d.bindTexture(d.TEXTURE_2D,this.texture);c!==d.LINEAR_MIPMAP_NEAREST||this.isSizePowerOfTwo()||(c=d.LINEAR);a!==this.filter&&(d.texParameteri(d.TEXTURE_2D,d.TEXTURE_MAG_FILTER,
a),d.texParameteri(d.TEXTURE_2D,d.TEXTURE_MIN_FILTER,c||a),this.filter=a);b!==this.wrap&&(d.texParameteri(d.TEXTURE_2D,d.TEXTURE_WRAP_S,b),d.texParameteri(d.TEXTURE_2D,d.TEXTURE_WRAP_T,b),this.wrap=b)};pb.prototype.isSizePowerOfTwo=function(){return this.size[0]===this.size[1]&&0==Math.log(this.size[0])/Math.LN2%1};pb.prototype.destroy=function(){this.context.gl.deleteTexture(this.texture);this.texture=null};var Ra=function(){this.images={};this.loaded=!1;this.requestors=[];this.shelfPack=new a.default$2(64,
64,{autoResize:!0});this.patterns={};this.atlasImage=new a.RGBAImage({width:64,height:64});this.dirty=!0};Ra.prototype.isLoaded=function(){return this.loaded};Ra.prototype.setLoaded=function(a){if(this.loaded!==a&&(this.loaded=a,a)){a=0;for(var b=this.requestors;a<b.length;a+=1){var c=b[a];this._notify(c.ids,c.callback)}this.requestors=[]}};Ra.prototype.getImage=function(a){return this.images[a]};Ra.prototype.addImage=function(a,b){this.images[a]=b};Ra.prototype.removeImage=function(a){delete this.images[a];
var b=this.patterns[a];b&&(this.shelfPack.unref(b.bin),delete this.patterns[a])};Ra.prototype.getImages=function(a,b){var c=!0;if(!this.isLoaded())for(var d=0;d<a.length;d+=1)this.images[a[d]]||(c=!1);this.isLoaded()||c?this._notify(a,b):this.requestors.push({ids:a,callback:b})};Ra.prototype._notify=function(a,b){for(var c={},d=0;d<a.length;d+=1){var e=a[d],g=this.images[e];g&&(c[e]={data:g.data.clone(),pixelRatio:g.pixelRatio,sdf:g.sdf})}b(null,c)};Ra.prototype.getPixelSize=function(){return{width:this.shelfPack.w,
height:this.shelfPack.h}};Ra.prototype.getPattern=function(b){var c=this.patterns[b];if(c)return c.position;var d=this.getImage(b);if(!d)return null;c=this.shelfPack.packOne(d.data.width+2,d.data.height+2);if(!c)return null;this.atlasImage.resize(this.getPixelSize());var e=d.data,g=this.atlasImage,f=c.x+1,h=c.y+1,k=e.width,n=e.height;a.RGBAImage.copy(e,g,{x:0,y:0},{x:f,y:h},{width:k,height:n});a.RGBAImage.copy(e,g,{x:0,y:n-1},{x:f,y:h-1},{width:k,height:1});a.RGBAImage.copy(e,g,{x:0,y:0},{x:f,y:h+
n},{width:k,height:1});a.RGBAImage.copy(e,g,{x:k-1,y:0},{x:f-1,y:h},{width:1,height:n});a.RGBAImage.copy(e,g,{x:0,y:0},{x:f+k,y:h},{width:1,height:n});this.dirty=!0;d=new a.ImagePosition(c,d);return this.patterns[b]={bin:c,position:d},d};Ra.prototype.bind=function(a){var b=a.gl;this.atlasTexture?this.dirty&&(this.atlasTexture.update(this.atlasImage),this.dirty=!1):this.atlasTexture=new pb(a,this.atlasImage,b.RGBA);this.atlasTexture.bind(b.LINEAR,b.CLAMP_TO_EDGE)};c.prototype.draw=function(a){this.ctx.clearRect(0,
0,this.size,this.size);this.ctx.fillText(a,this.buffer,this.middle);a=this.ctx.getImageData(0,0,this.size,this.size);for(var b=new Uint8ClampedArray(this.size*this.size),c=0;c<this.size*this.size;c++){var d=a.data[4*c+3]/255;this.gridOuter[c]=1===d?0:0===d?1E20:Math.pow(Math.max(0,.5-d),2);this.gridInner[c]=1===d?1E20:0===d?0:Math.pow(Math.max(0,d-.5),2)}h(this.gridOuter,this.size,this.size,this.f,this.d,this.v,this.z);h(this.gridInner,this.size,this.size,this.f,this.d,this.v,this.z);for(c=0;c<this.size*
this.size;c++)b[c]=Math.max(0,Math.min(255,Math.round(255-255*((this.gridOuter[c]-this.gridInner[c])/this.radius+this.cutoff))));return b};var Jb=function(a,b){this.requestTransform=a;this.localIdeographFontFamily=b;this.entries={}};Jb.prototype.setURL=function(a){this.url=a};Jb.prototype.getGlyphs=function(b,c){var d=this,e=[],g;for(g in b)for(var f=0,h=b[g];f<h.length;f+=1)e.push({stack:g,id:h[f]});a.asyncAll(e,function(a,b){var c=a.stack,e=a.id,g=d.entries[c];g||(g=d.entries[c]={glyphs:{},requests:{}});
a=g.glyphs[e];if(void 0===a)if(a=d._tinySDF(g,c,e))b(null,{stack:c,id:e,glyph:a});else{var f=Math.floor(e/256);if(65535<256*f)b(Error("glyphs \x3e 65535 not supported"));else{var h=g.requests[f];h||(h=g.requests[f]=[],Jb.loadGlyphRange(c,f,d.url,d.requestTransform,function(a,b){if(b)for(var c in b)g.glyphs[+c]=b[+c];c=0;for(var d=h;c<d.length;c+=1)(0,d[c])(a,b);delete g.requests[f]}));h.push(function(a,d){a?b(a):d&&b(null,{stack:c,id:e,glyph:d[e]||null})})}}else b(null,{stack:c,id:e,glyph:a})},function(a,
b){if(a)c(a);else if(b){a={};for(var d=0;d<b.length;d+=1){var e=b[d],g=e.stack,f=e.id;e=e.glyph;(a[g]||(a[g]={}))[f]=e&&{id:e.id,bitmap:e.bitmap.clone(),metrics:e.metrics}}c(null,a)}})};Jb.prototype._tinySDF=function(b,c,d){var e=this.localIdeographFontFamily;if(e&&(a.default$4["CJK Unified Ideographs"](d)||a.default$4["Hangul Syllables"](d))){var g=b.tinySDF;g||(g="400",/bold/i.test(c)?g="900":/medium/i.test(c)?g="500":/light/i.test(c)&&(g="200"),g=b.tinySDF=new Jb.TinySDF(24,3,8,.25,e,g));return{id:d,
bitmap:new a.AlphaImage({width:30,height:30},g.draw(String.fromCharCode(d))),metrics:{width:24,height:24,left:0,top:-8,advance:24}}}};Jb.loadGlyphRange=function(b,c,d,e,g){c*=256;var f=c+255;b=e(Ya(d).replace("{fontstack}",b).replace("{range}",c+"-"+f),a.ResourceType.Glyphs);a.getArrayBuffer(b,function(b,c){if(b)g(b);else if(c){b={};var d=0;for(c=a.default$3(c.data);d<c.length;d+=1){var e=c[d];b[e.id]=e}g(null,b)}})};Jb.TinySDF=c;var nb=function(){this.specification=a.default$5.light.position};nb.prototype.possiblyEvaluate=
function(b,c){return a.sphericalToCartesian(b.expression.evaluate(c))};nb.prototype.interpolate=function(b,c,d){return{x:a.number(b.x,c.x,d),y:a.number(b.y,c.y,d),z:a.number(b.z,c.z,d)}};var kc=new a.Properties({anchor:new a.DataConstantProperty(a.default$5.light.anchor),position:new nb,color:new a.DataConstantProperty(a.default$5.light.color),intensity:new a.DataConstantProperty(a.default$5.light.intensity)}),kb=function(b){function c(c){b.call(this);this._transitionable=new a.Transitionable(kc);
this.setLight(c);this._transitioning=this._transitionable.untransitioned()}return b&&(c.__proto__=b),c.prototype=Object.create(b&&b.prototype),c.prototype.constructor=c,c.prototype.getLight=function(){return this._transitionable.serialize()},c.prototype.setLight=function(b){if(!this._validate(a.validateLight,b))for(var c in b){var d=b[c];a.endsWith(c,"-transition")?this._transitionable.setTransition(c.slice(0,-11),d):this._transitionable.setValue(c,d)}},c.prototype.updateTransitions=function(a){this._transitioning=
this._transitionable.transitioned(a,this._transitioning)},c.prototype.hasTransition=function(){return this._transitioning.hasTransition()},c.prototype.recalculate=function(a){this.properties=this._transitioning.possiblyEvaluate(a)},c.prototype._validate=function(b,c){return a.emitValidationErrors(this,b.call(a.validateStyle,a.extend({value:c,style:{glyphs:!0,sprite:!0},styleSpec:a.default$5})))},c}(a.Evented),Db=function(a,b){this.width=a;this.height=b;this.nextRow=0;this.bytes=4;this.data=new Uint8Array(this.width*
this.height*this.bytes);this.positions={}};Db.prototype.getDash=function(a,b){var c=a.join(",")+String(b);return this.positions[c]||(this.positions[c]=this.addDash(a,b)),this.positions[c]};Db.prototype.addDash=function(b,c){var d=c?7:0,e=2*d+1;if(this.nextRow+e>this.height)return a.warnOnce("LineAtlas out of space"),null;for(var g=0,f=0;f<b.length;f++)g+=b[f];f=this.width/g;for(var h=f/2,k=1==b.length%2,n=-d;n<=d;n++)for(var t=this.width*(this.nextRow+d+n),m=k?-b[b.length-1]:0,v=b[0],r=1,u=0;u<this.width;u++){for(;v<
u/f;)m=v,v+=b[r],k&&r===b.length-1&&(v+=b[0]),r++;var l=Math.min(Math.abs(u-m*f),Math.abs(u-v*f)),p=1==r%2;if(c){var y=d?n/d*(h+1):0;p?(p=h-Math.abs(y),l=Math.sqrt(l*l+p*p)):l=h-Math.sqrt(l*l+y*y)}else l*=p?1:-1;this.data[3+4*(t+u)]=Math.max(0,Math.min(255,l+128))}b={y:(this.nextRow+d+.5)/this.height,height:2*d/this.height,width:g};return this.nextRow+=e,this.dirty=!0,b};Db.prototype.bind=function(a){a=a.gl;this.texture?(a.bindTexture(a.TEXTURE_2D,this.texture),this.dirty&&(this.dirty=!1,a.texSubImage2D(a.TEXTURE_2D,
0,0,0,this.width,this.height,a.RGBA,a.UNSIGNED_BYTE,this.data))):(this.texture=a.createTexture(),a.bindTexture(a.TEXTURE_2D,this.texture),a.texParameteri(a.TEXTURE_2D,a.TEXTURE_WRAP_S,a.REPEAT),a.texParameteri(a.TEXTURE_2D,a.TEXTURE_WRAP_T,a.REPEAT),a.texParameteri(a.TEXTURE_2D,a.TEXTURE_MIN_FILTER,a.LINEAR),a.texParameteri(a.TEXTURE_2D,a.TEXTURE_MAG_FILTER,a.LINEAR),a.texImage2D(a.TEXTURE_2D,0,a.RGBA,this.width,this.height,0,a.RGBA,a.UNSIGNED_BYTE,this.data))};var Kb=function ed(b,c){this.workerPool=
b;this.actors=[];this.currentActor=0;this.id=a.uniqueId();b=this.workerPool.acquire(this.id);for(var d=0;d<b.length;d++){var e=new ed.Actor(b[d],c,this.id);e.name="Worker "+d;this.actors.push(e)}};Kb.prototype.broadcast=function(b,c,d){a.asyncAll(this.actors,function(a,d){a.send(b,c,d)},d||function(){})};Kb.prototype.send=function(a,b,c,d){return("number"!=typeof d||isNaN(d))&&(d=this.currentActor=(this.currentActor+1)%this.actors.length),this.actors[d].send(a,b,c),d};Kb.prototype.remove=function(){this.actors.forEach(function(a){a.remove()});
this.actors=[];this.workerPool.release(this.id)};Kb.Actor=a.default$7;var Oa=function(a,b){if(isNaN(a)||isNaN(b))throw Error("Invalid LngLat object: ("+a+", "+b+")");if(this.lng=+a,this.lat=+b,90<this.lat||-90>this.lat)throw Error("Invalid LngLat latitude value: must be between -90 and 90");};Oa.prototype.wrap=function(){return new Oa(a.wrap(this.lng,-180,180),this.lat)};Oa.prototype.toArray=function(){return[this.lng,this.lat]};Oa.prototype.toString=function(){return"LngLat("+this.lng+", "+this.lat+
")"};Oa.prototype.toBounds=function(a){a=360*a/40075017;var b=a/Math.cos(Math.PI/180*this.lat);return new Va(new Oa(this.lng-b,this.lat-a),new Oa(this.lng+b,this.lat+a))};Oa.convert=function(a){if(a instanceof Oa)return a;if(Array.isArray(a)&&(2===a.length||3===a.length))return new Oa(Number(a[0]),Number(a[1]));if(!Array.isArray(a)&&"object"==typeof a&&null!==a)return new Oa(Number(a.lng),Number(a.lat));throw Error("`LngLatLike` argument must be specified as a LngLat instance, an object {lng: \x3clng\x3e, lat: \x3clat\x3e}, or an array of [\x3clng\x3e, \x3clat\x3e]");
};var Va=function(a,b){a&&(b?this.setSouthWest(a).setNorthEast(b):4===a.length?this.setSouthWest([a[0],a[1]]).setNorthEast([a[2],a[3]]):this.setSouthWest(a[0]).setNorthEast(a[1]))};Va.prototype.setNorthEast=function(a){return this._ne=a instanceof Oa?new Oa(a.lng,a.lat):Oa.convert(a),this};Va.prototype.setSouthWest=function(a){return this._sw=a instanceof Oa?new Oa(a.lng,a.lat):Oa.convert(a),this};Va.prototype.extend=function(a){var b,c=this._sw,d=this._ne;if(a instanceof Oa)var e=b=a;else{if(!(a instanceof
Va))return Array.isArray(a)?a.every(Array.isArray)?this.extend(Va.convert(a)):this.extend(Oa.convert(a)):this;if(b=a._sw,e=a._ne,!b||!e)return this}return c||d?(c.lng=Math.min(b.lng,c.lng),c.lat=Math.min(b.lat,c.lat),d.lng=Math.max(e.lng,d.lng),d.lat=Math.max(e.lat,d.lat)):(this._sw=new Oa(b.lng,b.lat),this._ne=new Oa(e.lng,e.lat)),this};Va.prototype.getCenter=function(){return new Oa((this._sw.lng+this._ne.lng)/2,(this._sw.lat+this._ne.lat)/2)};Va.prototype.getSouthWest=function(){return this._sw};
Va.prototype.getNorthEast=function(){return this._ne};Va.prototype.getNorthWest=function(){return new Oa(this.getWest(),this.getNorth())};Va.prototype.getSouthEast=function(){return new Oa(this.getEast(),this.getSouth())};Va.prototype.getWest=function(){return this._sw.lng};Va.prototype.getSouth=function(){return this._sw.lat};Va.prototype.getEast=function(){return this._ne.lng};Va.prototype.getNorth=function(){return this._ne.lat};Va.prototype.toArray=function(){return[this._sw.toArray(),this._ne.toArray()]};
Va.prototype.toString=function(){return"LngLatBounds("+this._sw.toString()+", "+this._ne.toString()+")"};Va.prototype.isEmpty=function(){return!(this._sw&&this._ne)};Va.convert=function(a){return!a||a instanceof Va?a:new Va(a)};var Ha=function(a,b,c){this.bounds=Va.convert(this.validateBounds(a));this.minzoom=b||0;this.maxzoom=c||24};Ha.prototype.validateBounds=function(a){return Array.isArray(a)&&4===a.length?[Math.max(-180,a[0]),Math.max(-90,a[1]),Math.min(180,a[2]),Math.min(90,a[3])]:[-180,-90,
180,90]};Ha.prototype.contains=function(a){var b=Math.floor(this.lngX(this.bounds.getWest(),a.z)),c=Math.floor(this.latY(this.bounds.getNorth(),a.z)),d=Math.ceil(this.lngX(this.bounds.getEast(),a.z)),e=Math.ceil(this.latY(this.bounds.getSouth(),a.z));return a.x>=b&&a.x<d&&a.y>=c&&a.y<e};Ha.prototype.lngX=function(a,b){return Math.pow(2,b)/360*(a+180)};Ha.prototype.latY=function(b,c){b=a.clamp(Math.sin(Math.PI/180*b),-.9999,.9999);return Math.pow(2,c-1)+.5*Math.log((1+b)/(1-b))*-(Math.pow(2,c)/(2*
Math.PI))};var Xa=function(b){function c(c,d,e,g){if(b.call(this),this.id=c,this.dispatcher=e,this.type="vector",this.minzoom=0,this.maxzoom=22,this.scheme="xyz",this.tileSize=512,this.reparseOverscaled=!0,this.isTileClipped=!0,a.extend(this,a.pick(d,["url","scheme","tileSize"])),this._options=a.extend({type:"vector"},d),this._collectResourceTiming=d.collectResourceTiming,512!==this.tileSize)throw Error("vector tile sources must have a tileSize of 512");this.setEventedParent(g)}return b&&(c.__proto__=
b),c.prototype=Object.create(b&&b.prototype),c.prototype.constructor=c,c.prototype.load=function(){var b=this;this.fire(new a.Event("dataloading",{dataType:"source"}));m(this._options,this.map._transformRequest,function(c,d){c?b.fire(new a.ErrorEvent(c)):d&&(a.extend(b,d),d.bounds&&(b.tileBounds=new Ha(d.bounds,b.minzoom,b.maxzoom)),b.fire(new a.Event("data",{dataType:"source",sourceDataType:"metadata"})),b.fire(new a.Event("data",{dataType:"source",sourceDataType:"content"})))})},c.prototype.hasTile=
function(a){return!this.tileBounds||this.tileBounds.contains(a.canonical)},c.prototype.onAdd=function(a){this.map=a;this.load()},c.prototype.serialize=function(){return a.extend({},this._options)},c.prototype.loadTile=function(b,c){function d(a,d){return b.aborted?c(null):a?c(a):(d&&d.resourceTiming&&(b.resourceTiming=d.resourceTiming),this.map._refreshExpiredTiles&&b.setExpiryData(d),b.loadVectorData(d,this.map.painter),c(null),void(b.reloadCallback&&(this.loadTile(b,b.reloadCallback),b.reloadCallback=
null)))}var e=Wa(b.tileID.canonical.url(this.tiles,this.scheme),this.url);e={request:this.map._transformRequest(e,a.ResourceType.Tile),uid:b.uid,tileID:b.tileID,zoom:b.tileID.overscaledZ,tileSize:this.tileSize*b.tileID.overscaleFactor(),type:this.type,source:this.id,pixelRatio:oa.devicePixelRatio,showCollisionBoxes:this.map.showCollisionBoxes};e.request.collectResourceTiming=this._collectResourceTiming;void 0===b.workerID||"expired"===b.state?b.workerID=this.dispatcher.send("loadTile",e,d.bind(this)):
"loading"===b.state?b.reloadCallback=c:this.dispatcher.send("reloadTile",e,d.bind(this),b.workerID)},c.prototype.abortTile=function(a){this.dispatcher.send("abortTile",{uid:a.uid,type:this.type,source:this.id},void 0,a.workerID)},c.prototype.unloadTile=function(a){a.unloadVectorData();this.dispatcher.send("removeTile",{uid:a.uid,type:this.type,source:this.id},void 0,a.workerID)},c.prototype.hasTransition=function(){return!1},c}(a.Evented),sc=function(b){function c(c,d,e,g){b.call(this);this.id=c;
this.dispatcher=e;this.setEventedParent(g);this.type="raster";this.minzoom=0;this.maxzoom=22;this.roundZoom=!0;this.scheme="xyz";this.tileSize=512;this._loaded=!1;this._options=a.extend({},d);a.extend(this,a.pick(d,["url","scheme","tileSize"]))}return b&&(c.__proto__=b),c.prototype=Object.create(b&&b.prototype),c.prototype.constructor=c,c.prototype.load=function(){var b=this;this.fire(new a.Event("dataloading",{dataType:"source"}));m(this._options,this.map._transformRequest,function(c,d){c?b.fire(new a.ErrorEvent(c)):
d&&(a.extend(b,d),d.bounds&&(b.tileBounds=new Ha(d.bounds,b.minzoom,b.maxzoom)),b.fire(new a.Event("data",{dataType:"source",sourceDataType:"metadata"})),b.fire(new a.Event("data",{dataType:"source",sourceDataType:"content"})))})},c.prototype.onAdd=function(a){this.map=a;this.load()},c.prototype.serialize=function(){return a.extend({},this._options)},c.prototype.hasTile=function(a){return!this.tileBounds||this.tileBounds.contains(a.canonical)},c.prototype.loadTile=function(b,c){var d=this,e=Wa(b.tileID.canonical.url(this.tiles,
this.scheme),this.url,this.tileSize);b.request=a.getImage(this.map._transformRequest(e,a.ResourceType.Tile),function(a,e){if(delete b.request,b.aborted)b.state="unloaded",c(null);else if(a)b.state="errored",c(a);else if(e){d.map._refreshExpiredTiles&&b.setExpiryData(e);delete e.cacheControl;delete e.expires;a=d.map.painter.context;var g=a.gl;b.texture=d.map.painter.getTileTexture(e.width);b.texture?b.texture.update(e,{useMipmap:!0}):(b.texture=new pb(a,e,g.RGBA,{useMipmap:!0}),b.texture.bind(g.LINEAR,
g.CLAMP_TO_EDGE,g.LINEAR_MIPMAP_NEAREST),a.extTextureFilterAnisotropic&&g.texParameterf(g.TEXTURE_2D,a.extTextureFilterAnisotropic.TEXTURE_MAX_ANISOTROPY_EXT,a.extTextureFilterAnisotropicMax));b.state="loaded";c(null)}})},c.prototype.abortTile=function(a,b){a.request&&(a.request.abort(),delete a.request);b()},c.prototype.unloadTile=function(a,b){a.texture&&this.map.painter.saveTileTexture(a.texture);b()},c.prototype.hasTransition=function(){return!1},c}(a.Evented),oc=function(b){function c(c,d,e,
g){b.call(this,c,d,e,g);this.type="raster-dem";this.maxzoom=22;this._options=a.extend({},d);this.encoding=d.encoding||"mapbox"}return b&&(c.__proto__=b),c.prototype=Object.create(b&&b.prototype),c.prototype.constructor=c,c.prototype.serialize=function(){return{type:"raster-dem",url:this.url,tileSize:this.tileSize,tiles:this.tiles,bounds:this.bounds,encoding:this.encoding}},c.prototype.loadTile=function(b,c){var d=Wa(b.tileID.canonical.url(this.tiles,this.scheme),this.url,this.tileSize);b.request=
a.getImage(this.map._transformRequest(d,a.ResourceType.Tile),function(a,d){(delete b.request,b.aborted)?(b.state="unloaded",c(null)):a?(b.state="errored",c(a)):d&&(this.map._refreshExpiredTiles&&b.setExpiryData(d),delete d.cacheControl,delete d.expires,a=oa.getImageData(d),a={uid:b.uid,coord:b.tileID,source:this.id,rawImageData:a,encoding:this.encoding},b.workerID&&"expired"!==b.state||(b.workerID=this.dispatcher.send("loadDEMTile",a,function(a,d){a&&(b.state="errored",c(a));d&&(b.dem=d,b.needsHillshadePrepare=
!0,b.state="loaded",c(null))}.bind(this))))}.bind(this));b.neighboringTiles=this._getNeighboringTiles(b.tileID)},c.prototype._getNeighboringTiles=function(b){var c=b.canonical,d=Math.pow(2,c.z),e=(c.x-1+d)%d,g=0===c.x?b.wrap-1:b.wrap,f=(c.x+1+d)%d,h=c.x+1===d?b.wrap+1:b.wrap,k={};return k[(new a.OverscaledTileID(b.overscaledZ,g,c.z,e,c.y)).key]={backfilled:!1},k[(new a.OverscaledTileID(b.overscaledZ,h,c.z,f,c.y)).key]={backfilled:!1},0<c.y&&(k[(new a.OverscaledTileID(b.overscaledZ,g,c.z,e,c.y-1)).key]=
{backfilled:!1},k[(new a.OverscaledTileID(b.overscaledZ,b.wrap,c.z,c.x,c.y-1)).key]={backfilled:!1},k[(new a.OverscaledTileID(b.overscaledZ,h,c.z,f,c.y-1)).key]={backfilled:!1}),c.y+1<d&&(k[(new a.OverscaledTileID(b.overscaledZ,g,c.z,e,c.y+1)).key]={backfilled:!1},k[(new a.OverscaledTileID(b.overscaledZ,b.wrap,c.z,c.x,c.y+1)).key]={backfilled:!1},k[(new a.OverscaledTileID(b.overscaledZ,h,c.z,f,c.y+1)).key]={backfilled:!1}),k},c.prototype.unloadTile=function(a){a.demTexture&&this.map.painter.saveTileTexture(a.demTexture);
a.fbo&&(a.fbo.destroy(),delete a.fbo);a.dem&&delete a.dem;delete a.neighboringTiles;a.state="unloaded";this.dispatcher.send("removeDEMTile",{uid:a.uid,source:this.id},void 0,a.workerID)},c}(sc),Sb=function(b){function c(c,d,e,g){b.call(this);this.id=c;this.type="geojson";this.minzoom=0;this.maxzoom=18;this.tileSize=512;this.reparseOverscaled=this.isTileClipped=!0;this._removed=!1;this.dispatcher=e;this.setEventedParent(g);this._data=d.data;this._options=a.extend({},d);this._collectResourceTiming=
d.collectResourceTiming;this._resourceTiming=[];void 0!==d.maxzoom&&(this.maxzoom=d.maxzoom);d.type&&(this.type=d.type);c=a.default$8/this.tileSize;this.workerOptions=a.extend({source:this.id,cluster:d.cluster||!1,geojsonVtOptions:{buffer:(void 0!==d.buffer?d.buffer:128)*c,tolerance:(void 0!==d.tolerance?d.tolerance:.375)*c,extent:a.default$8,maxZoom:this.maxzoom,lineMetrics:d.lineMetrics||!1},superclusterOptions:{maxZoom:void 0!==d.clusterMaxZoom?Math.min(d.clusterMaxZoom,this.maxzoom-1):this.maxzoom-
1,extent:a.default$8,radius:(d.clusterRadius||50)*c,log:!1}},d.workerOptions)}return b&&(c.__proto__=b),c.prototype=Object.create(b&&b.prototype),c.prototype.constructor=c,c.prototype.load=function(){var b=this;this.fire(new a.Event("dataloading",{dataType:"source"}));this._updateWorkerData(function(c){c?b.fire(new a.ErrorEvent(c)):(c={dataType:"source",sourceDataType:"metadata"},b._collectResourceTiming&&b._resourceTiming&&0<b._resourceTiming.length&&(c.resourceTiming=b._resourceTiming,b._resourceTiming=
[]),b.fire(new a.Event("data",c)))})},c.prototype.onAdd=function(a){this.map=a;this.load()},c.prototype.setData=function(b){var c=this;return this._data=b,this.fire(new a.Event("dataloading",{dataType:"source"})),this._updateWorkerData(function(b){if(b)return c.fire(new a.ErrorEvent(b));b={dataType:"source",sourceDataType:"content"};c._collectResourceTiming&&c._resourceTiming&&0<c._resourceTiming.length&&(b.resourceTiming=c._resourceTiming,c._resourceTiming=[]);c.fire(new a.Event("data",b))}),this},
c.prototype._updateWorkerData=function(b){var c,d=this,e=a.extend({},this.workerOptions),g=this._data;"string"==typeof g?(e.request=this.map._transformRequest(((c=a.default.document.createElement("a")).href=g,c.href),a.ResourceType.Source),e.request.collectResourceTiming=this._collectResourceTiming):e.data=JSON.stringify(g);this.workerID=this.dispatcher.send(this.type+"."+e.source+".loadData",e,function(a,c){d._removed||c&&c.abandoned||(d._loaded=!0,c&&c.resourceTiming&&c.resourceTiming[d.id]&&(d._resourceTiming=
c.resourceTiming[d.id].slice(0)),d.dispatcher.send(d.type+"."+e.source+".coalesce",null,null,d.workerID),b(a))},this.workerID)},c.prototype.loadTile=function(a,b){var c=this,d=void 0===a.workerID?"loadTile":"reloadTile";a.workerID=this.dispatcher.send(d,{type:this.type,uid:a.uid,tileID:a.tileID,zoom:a.tileID.overscaledZ,maxZoom:this.maxzoom,tileSize:this.tileSize,source:this.id,pixelRatio:oa.devicePixelRatio,showCollisionBoxes:this.map.showCollisionBoxes},function(e,g){return a.unloadVectorData(),
a.aborted?b(null):e?b(e):(a.loadVectorData(g,c.map.painter,"reloadTile"===d),b(null))},this.workerID)},c.prototype.abortTile=function(a){a.aborted=!0},c.prototype.unloadTile=function(a){a.unloadVectorData();this.dispatcher.send("removeTile",{uid:a.uid,type:this.type,source:this.id},null,a.workerID)},c.prototype.onRemove=function(){this._removed=!0;this.dispatcher.send("removeSource",{type:this.type,source:this.id},null,this.workerID)},c.prototype.serialize=function(){return a.extend({},this._options,
{type:this.type,data:this._data})},c.prototype.hasTransition=function(){return!1},c}(a.Evented),Mb=a.createLayout([{name:"a_pos",type:"Int16",components:2},{name:"a_texture_pos",type:"Int16",components:2}]),vb=function(){this.boundLayoutVertexBuffer=this.boundProgram=null;this.boundPaintVertexBuffers=[];this.vao=this.boundDynamicVertexBuffer=this.boundVertexOffset=this.boundIndexBuffer=null};vb.prototype.bind=function(a,b,c,d,e,g,f,h){this.context=a;for(var k=this.boundPaintVertexBuffers.length!==
d.length,n=0;!k&&n<d.length;n++)this.boundPaintVertexBuffers[n]!==d[n]&&(k=!0);k=!this.vao||this.boundProgram!==b||this.boundLayoutVertexBuffer!==c||k||this.boundIndexBuffer!==e||this.boundVertexOffset!==g||this.boundDynamicVertexBuffer!==f||this.boundDynamicVertexBuffer2!==h;!a.extVertexArrayObject||k?this.freshBind(b,c,d,e,g,f,h):(a.bindVertexArrayOES.set(this.vao),f&&f.bind(),e&&e.dynamicDraw&&e.bind(),h&&h.bind())};vb.prototype.freshBind=function(a,b,c,d,e,g,f){var h=a.numAttributes,k=this.context,
n=k.gl;if(k.extVertexArrayObject)this.vao&&this.destroy(),this.vao=k.extVertexArrayObject.createVertexArrayOES(),k.bindVertexArrayOES.set(this.vao),this.boundProgram=a,this.boundLayoutVertexBuffer=b,this.boundPaintVertexBuffers=c,this.boundIndexBuffer=d,this.boundVertexOffset=e,this.boundDynamicVertexBuffer=g,this.boundDynamicVertexBuffer2=f;else{var t=k.currentNumAttributes||0;for(var m=h;m<t;m++)n.disableVertexAttribArray(m)}b.enableAttributes(n,a);for(t=0;t<c.length;t+=1)c[t].enableAttributes(n,
a);g&&g.enableAttributes(n,a);f&&f.enableAttributes(n,a);b.bind();b.setVertexAttribPointers(n,a,e);for(b=0;b<c.length;b+=1)t=c[b],t.bind(),t.setVertexAttribPointers(n,a,e);g&&(g.bind(),g.setVertexAttribPointers(n,a,e));d&&d.bind();f&&(f.bind(),f.setVertexAttribPointers(n,a,e));k.currentNumAttributes=h};vb.prototype.destroy=function(){this.vao&&(this.context.extVertexArrayObject.deleteVertexArrayOES(this.vao),this.vao=null)};var Nb=function(b){function c(a,c,d,e){b.call(this);this.id=a;this.dispatcher=
d;this.coordinates=c.coordinates;this.type="image";this.minzoom=0;this.maxzoom=22;this.tileSize=512;this.tiles={};this.setEventedParent(e);this.options=c}return b&&(c.__proto__=b),c.prototype=Object.create(b&&b.prototype),c.prototype.constructor=c,c.prototype.load=function(){var b=this;this.fire(new a.Event("dataloading",{dataType:"source"}));this.url=this.options.url;a.getImage(this.map._transformRequest(this.url,a.ResourceType.Image),function(c,d){c?b.fire(new a.ErrorEvent(c)):d&&(b.image=oa.getImageData(d),
b._finishLoading())})},c.prototype._finishLoading=function(){this.map&&(this.setCoordinates(this.coordinates),this.fire(new a.Event("data",{dataType:"source",sourceDataType:"metadata"})))},c.prototype.onAdd=function(a){this.map=a;this.load()},c.prototype.setCoordinates=function(b){this.coordinates=b;var c=this.map;b=b.map(function(a){return c.transform.locationCoordinate(Oa.convert(a)).zoomTo(0)});var d=this.centerCoord=a.getCoordinatesCenter(b);d.column=Math.floor(d.column);d.row=Math.floor(d.row);
this.tileID=new a.CanonicalTileID(d.zoom,d.column,d.row);this.minzoom=this.maxzoom=d.zoom;b=b.map(function(b){b=b.zoomTo(d.zoom);return new a.default$1(Math.round((b.column-d.column)*a.default$8),Math.round((b.row-d.row)*a.default$8))});return this._boundsArray=new a.RasterBoundsArray,this._boundsArray.emplaceBack(b[0].x,b[0].y,0,0),this._boundsArray.emplaceBack(b[1].x,b[1].y,a.default$8,0),this._boundsArray.emplaceBack(b[3].x,b[3].y,0,a.default$8),this._boundsArray.emplaceBack(b[2].x,b[2].y,a.default$8,
a.default$8),this.boundsBuffer&&(this.boundsBuffer.destroy(),delete this.boundsBuffer),this.fire(new a.Event("data",{dataType:"source",sourceDataType:"content"})),this},c.prototype.prepare=function(){if(0!==Object.keys(this.tiles).length&&this.image){var a=this.map.painter.context,b=a.gl,c;for(c in this.boundsBuffer||(this.boundsBuffer=a.createVertexBuffer(this._boundsArray,Mb.members)),this.boundsVAO||(this.boundsVAO=new vb),this.texture||(this.texture=new pb(a,this.image,b.RGBA),this.texture.bind(b.LINEAR,
b.CLAMP_TO_EDGE)),this.tiles)a=this.tiles[c],"loaded"!==a.state&&(a.state="loaded",a.texture=this.texture)}},c.prototype.loadTile=function(a,b){this.tileID&&this.tileID.equals(a.tileID.canonical)?(this.tiles[String(a.tileID.wrap)]=a,a.buckets={},b(null)):(a.state="errored",b(null))},c.prototype.serialize=function(){return{type:"image",url:this.options.url,coordinates:this.coordinates}},c.prototype.hasTransition=function(){return!1},c}(a.Evented),Qc=function(b){function c(a,c,d,e){b.call(this,a,c,
d,e);this.roundZoom=!0;this.type="video";this.options=c}return b&&(c.__proto__=b),c.prototype=Object.create(b&&b.prototype),c.prototype.constructor=c,c.prototype.load=function(){var b=this,c=this.options;this.urls=[];var d=0;for(c=c.urls;d<c.length;d+=1)b.urls.push(b.map._transformRequest(c[d],a.ResourceType.Source).url);a.getVideo(this.urls,function(c,d){c?b.fire(new a.ErrorEvent(c)):d&&(b.video=d,b.video.loop=!0,b.video.addEventListener("playing",function(){b.map._rerender()}),b.map&&b.video.play(),
b._finishLoading())})},c.prototype.getVideo=function(){return this.video},c.prototype.onAdd=function(a){this.map||(this.map=a,this.load(),this.video&&(this.video.play(),this.setCoordinates(this.coordinates)))},c.prototype.prepare=function(){if(!(0===Object.keys(this.tiles).length||2>this.video.readyState)){var a=this.map.painter.context,b=a.gl,c;for(c in this.boundsBuffer||(this.boundsBuffer=a.createVertexBuffer(this._boundsArray,Mb.members)),this.boundsVAO||(this.boundsVAO=new vb),this.texture?this.video.paused||
(this.texture.bind(b.LINEAR,b.CLAMP_TO_EDGE),b.texSubImage2D(b.TEXTURE_2D,0,0,0,b.RGBA,b.UNSIGNED_BYTE,this.video)):(this.texture=new pb(a,this.video,b.RGBA),this.texture.bind(b.LINEAR,b.CLAMP_TO_EDGE)),this.tiles)a=this.tiles[c],"loaded"!==a.state&&(a.state="loaded",a.texture=this.texture)}},c.prototype.serialize=function(){return{type:"video",urls:this.urls,coordinates:this.coordinates}},c.prototype.hasTransition=function(){return this.video&&!this.video.paused},c}(Nb),Tb=function(b){function c(c,
d,e,g){b.call(this,c,d,e,g);d.coordinates?Array.isArray(d.coordinates)&&4===d.coordinates.length&&!d.coordinates.some(function(a){return!Array.isArray(a)||2!==a.length||a.some(function(a){return"number"!=typeof a})})||this.fire(new a.ErrorEvent(new a.default$9("sources."+c,null,'"coordinates" property must be an array of 4 longitude/latitude array pairs'))):this.fire(new a.ErrorEvent(new a.default$9("sources."+c,null,'missing required property "coordinates"')));d.animate&&"boolean"!=typeof d.animate&&
this.fire(new a.ErrorEvent(new a.default$9("sources."+c,null,'optional "animate" property must be a boolean value')));d.canvas?"string"==typeof d.canvas||d.canvas instanceof a.default.HTMLCanvasElement||this.fire(new a.ErrorEvent(new a.default$9("sources."+c,null,'"canvas" must be either a string representing the ID of the canvas element from which to read, or an HTMLCanvasElement instance'))):this.fire(new a.ErrorEvent(new a.default$9("sources."+c,null,'missing required property "canvas"')));this.options=
d;this.animate=void 0===d.animate||d.animate}return b&&(c.__proto__=b),c.prototype=Object.create(b&&b.prototype),c.prototype.constructor=c,c.prototype.load=function(){this.canvas||(this.canvas=this.options.canvas instanceof a.default.HTMLCanvasElement?this.options.canvas:a.default.document.getElementById(this.options.canvas));this.width=this.canvas.width;this.height=this.canvas.height;this._hasInvalidDimensions()?this.fire(new a.ErrorEvent(Error("Canvas dimensions cannot be less than or equal to zero."))):
(this.play=function(){this._playing=!0;this.map._rerender()},this.pause=function(){this._playing=!1},this._finishLoading())},c.prototype.getCanvas=function(){return this.canvas},c.prototype.onAdd=function(a){this.map=a;this.load();this.canvas&&this.animate&&this.play()},c.prototype.onRemove=function(){this.pause()},c.prototype.prepare=function(){var a=!1;if(this.canvas.width!==this.width&&(this.width=this.canvas.width,a=!0),this.canvas.height!==this.height&&(this.height=this.canvas.height,a=!0),!this._hasInvalidDimensions()&&
0!==Object.keys(this.tiles).length){var b=this.map.painter.context,c=b.gl,d;for(d in this.boundsBuffer||(this.boundsBuffer=b.createVertexBuffer(this._boundsArray,Mb.members)),this.boundsVAO||(this.boundsVAO=new vb),this.texture?a?this.texture.update(this.canvas):this._playing&&(this.texture.bind(c.LINEAR,c.CLAMP_TO_EDGE),c.texSubImage2D(c.TEXTURE_2D,0,0,0,c.RGBA,c.UNSIGNED_BYTE,this.canvas)):(this.texture=new pb(b,this.canvas,c.RGBA),this.texture.bind(c.LINEAR,c.CLAMP_TO_EDGE)),this.tiles)a=this.tiles[d],
"loaded"!==a.state&&(a.state="loaded",a.texture=this.texture)}},c.prototype.serialize=function(){return{type:"canvas",coordinates:this.coordinates}},c.prototype.hasTransition=function(){return this._playing},c.prototype._hasInvalidDimensions=function(){for(var a=0,b=[this.canvas.width,this.canvas.height];a<b.length;a+=1){var c=b[a];if(isNaN(c)||0>=c)return!0}return!1},c}(Nb),fd={vector:Xa,raster:sc,"raster-dem":oc,geojson:Sb,video:Qc,image:Nb,canvas:Tb},Rd=function(b,c,d,e){c=new fd[c.type](b,c,d,
e);if(c.id!==b)throw Error("Expected Source id to be "+b+" instead of "+c.id);return a.bindAll(["load","abort","unload","serialize","prepare"],c),c},Eb=function(b,c){this.tileID=b;this.uid=a.uniqueId();this.uses=0;this.tileSize=c;this.buckets={};this.expirationTime=null;this.expiredRequestCount=this.queryPadding=0;this.state="loading"};Eb.prototype.registerFadeDuration=function(a){a+=this.timeAdded;a<oa.now()||this.fadeEndTime&&a<this.fadeEndTime||(this.fadeEndTime=a)};Eb.prototype.wasRequested=function(){return"errored"===
this.state||"loaded"===this.state||"reloading"===this.state};Eb.prototype.loadVectorData=function(b,c,d){if(this.hasData()&&this.unloadVectorData(),this.state="loaded",b){if(b.featureIndex&&(this.latestFeatureIndex=b.featureIndex,b.rawTileData?(this.latestRawTileData=b.rawTileData,this.latestFeatureIndex.rawTileData=b.rawTileData):this.latestRawTileData&&(this.latestFeatureIndex.rawTileData=this.latestRawTileData)),this.collisionBoxArray=b.collisionBoxArray,this.buckets=function(a,b){var c={};if(!b)return c;
for(var d=0;d<a.length;d+=1){var e=a[d],g=e.layerIds.map(function(a){return b.getLayer(a)}).filter(Boolean);if(0!==g.length){e.layers=g;for(var f=0;f<g.length;f+=1)c[g[f].id]=e}}return c}(b.buckets,c.style),d)for(var e in this.buckets)d=this.buckets[e],d instanceof a.default$14&&(d.justReloaded=!0);for(var g in this.queryPadding=0,this.buckets)e=this.buckets[g],this.queryPadding=Math.max(this.queryPadding,c.style.getLayer(e.layerIds[0]).queryRadius(e));b.iconAtlasImage&&(this.iconAtlasImage=b.iconAtlasImage);
b.glyphAtlasImage&&(this.glyphAtlasImage=b.glyphAtlasImage)}else this.collisionBoxArray=new a.CollisionBoxArray};Eb.prototype.unloadVectorData=function(){for(var a in this.buckets)this.buckets[a].destroy();this.buckets={};this.iconAtlasTexture&&this.iconAtlasTexture.destroy();this.glyphAtlasTexture&&this.glyphAtlasTexture.destroy();this.latestFeatureIndex=null;this.state="unloaded"};Eb.prototype.unloadDEMData=function(){this.neighboringTiles=this.dem=null;this.state="unloaded"};Eb.prototype.getBucket=
function(a){return this.buckets[a.id]};Eb.prototype.upload=function(a){for(var b in this.buckets){var c=this.buckets[b];c.uploaded||(c.upload(a),c.uploaded=!0)}b=a.gl;this.iconAtlasImage&&(this.iconAtlasTexture=new pb(a,this.iconAtlasImage,b.RGBA),this.iconAtlasImage=null);this.glyphAtlasImage&&(this.glyphAtlasTexture=new pb(a,this.glyphAtlasImage,b.ALPHA),this.glyphAtlasImage=null)};Eb.prototype.queryRenderedFeatures=function(a,b,c,d,e,g,f){return this.latestFeatureIndex&&this.latestFeatureIndex.rawTileData?
this.latestFeatureIndex.query({queryGeometry:b,scale:c,tileSize:this.tileSize,posMatrix:f,transform:e,params:d,queryPadding:this.queryPadding*g},a):{}};Eb.prototype.querySourceFeatures=function(b,c){if(this.latestFeatureIndex&&this.latestFeatureIndex.rawTileData){var d=this.latestFeatureIndex.loadVTLayers(),e=c?c.sourceLayer:"";if(d=d._geojsonTileLayer||d[e]){c=a.default$13(c&&c.filter);e={z:this.tileID.overscaledZ,x:this.tileID.canonical.x,y:this.tileID.canonical.y};for(var g=0;g<d.length;g++){var f=
d.feature(g);c(new a.default$16(this.tileID.overscaledZ),f)&&(f=new a.default$12(f,e.z,e.x,e.y),f.tile=e,b.push(f))}}}};Eb.prototype.clearMask=function(){this.segments&&(this.segments.destroy(),delete this.segments);this.maskedBoundsBuffer&&(this.maskedBoundsBuffer.destroy(),delete this.maskedBoundsBuffer);this.maskedIndexBuffer&&(this.maskedIndexBuffer.destroy(),delete this.maskedIndexBuffer)};Eb.prototype.setMask=function(b,c){if(!a.default$10(this.mask,b)&&(this.mask=b,this.clearMask(),!a.default$10(b,
{0:!0}))){var d=new a.RasterBoundsArray,e=new a.TriangleIndexArray;this.segments=new a.default$15;this.segments.prepareSegment(0,d,e);for(var g=Object.keys(b),f=0;f<g.length;f++){var h=b[g[f]],k=a.default$8>>h.z;h=new a.default$1(h.x*k,h.y*k);var n=new a.default$1(h.x+k,h.y+k);k=this.segments.prepareSegment(4,d,e);d.emplaceBack(h.x,h.y,h.x,h.y);d.emplaceBack(n.x,h.y,n.x,h.y);d.emplaceBack(h.x,n.y,h.x,n.y);d.emplaceBack(n.x,n.y,n.x,n.y);h=k.vertexLength;e.emplaceBack(h,h+1,h+2);e.emplaceBack(h+1,h+
2,h+3);k.vertexLength+=4;k.primitiveLength+=2}this.maskedBoundsBuffer=c.createVertexBuffer(d,Mb.members);this.maskedIndexBuffer=c.createIndexBuffer(e)}};Eb.prototype.hasData=function(){return"loaded"===this.state||"reloading"===this.state||"expired"===this.state};Eb.prototype.setExpiryData=function(b){var c=this.expirationTime;b.cacheControl?(b=a.parseCacheControl(b.cacheControl),b["max-age"]&&(this.expirationTime=Date.now()+1E3*b["max-age"])):b.expires&&(this.expirationTime=(new Date(b.expires)).getTime());
if(this.expirationTime){b=Date.now();var d=!1;this.expirationTime>b?d=!1:c?this.expirationTime<c?d=!0:(c=this.expirationTime-c)?this.expirationTime=b+Math.max(c,3E4):d=!0:d=!0;d?(this.expiredRequestCount++,this.state="expired"):this.expiredRequestCount=0}};Eb.prototype.getExpiryTimeout=function(){if(this.expirationTime)return this.expiredRequestCount?1E3*(1<<Math.min(this.expiredRequestCount-1,31)):Math.min(this.expirationTime-(new Date).getTime(),Math.pow(2,31)-1)};var Hc=function(a,b){this.max=
a;this.onRemove=b;this.reset()};Hc.prototype.reset=function(){for(var a in this.data)for(var b=0,c=this.data[a];b<c.length;b+=1){var d=c[b];d.timeout&&clearTimeout(d.timeout);this.onRemove(d.value)}return this.data={},this.order=[],this};Hc.prototype.add=function(a,b,c){var d=this,e=a.wrapped().key;void 0===this.data[e]&&(this.data[e]=[]);var g={value:b,timeout:void 0};(void 0!==c&&(g.timeout=setTimeout(function(){d.remove(a,g)},c)),this.data[e].push(g),this.order.push(e),this.order.length>this.max)&&
(b=this._getAndRemoveByKey(this.order[0]))&&this.onRemove(b);return this};Hc.prototype.has=function(a){return a.wrapped().key in this.data};Hc.prototype.getAndRemove=function(a){return this.has(a)?this._getAndRemoveByKey(a.wrapped().key):null};Hc.prototype._getAndRemoveByKey=function(a){var b=this.data[a].shift();return b.timeout&&clearTimeout(b.timeout),0===this.data[a].length&&delete this.data[a],this.order.splice(this.order.indexOf(a),1),b.value};Hc.prototype.get=function(a){return this.has(a)?
this.data[a.wrapped().key][0].value:null};Hc.prototype.remove=function(a,b){if(!this.has(a))return this;a=a.wrapped().key;b=void 0===b?0:this.data[a].indexOf(b);var c=this.data[a][b];return this.data[a].splice(b,1),c.timeout&&clearTimeout(c.timeout),0===this.data[a].length&&delete this.data[a],this.onRemove(c.value),this.order.splice(this.order.indexOf(a),1),this};Hc.prototype.setMaxSize=function(a){for(this.max=a;this.order.length>this.max;)(a=this._getAndRemoveByKey(this.order[0]))&&this.onRemove(a);
return this};var Rc=function(a,b,c){this.context=a;var d=a.gl;this.buffer=d.createBuffer();this.dynamicDraw=!!c;this.unbindVAO();a.bindElementBuffer.set(this.buffer);d.bufferData(d.ELEMENT_ARRAY_BUFFER,b.arrayBuffer,this.dynamicDraw?d.DYNAMIC_DRAW:d.STATIC_DRAW);this.dynamicDraw||delete b.arrayBuffer};Rc.prototype.unbindVAO=function(){this.context.extVertexArrayObject&&this.context.bindVertexArrayOES.set(null)};Rc.prototype.bind=function(){this.context.bindElementBuffer.set(this.buffer)};Rc.prototype.updateData=
function(a){var b=this.context.gl;this.unbindVAO();this.bind();b.bufferSubData(b.ELEMENT_ARRAY_BUFFER,0,a.arrayBuffer)};Rc.prototype.destroy=function(){var a=this.context.gl;this.buffer&&(a.deleteBuffer(this.buffer),delete this.buffer)};var bf={Int8:"BYTE",Uint8:"UNSIGNED_BYTE",Int16:"SHORT",Uint16:"UNSIGNED_SHORT",Int32:"INT",Uint32:"UNSIGNED_INT",Float32:"FLOAT"},Sd=function(a,b,c,d){this.length=b.length;this.attributes=c;this.itemSize=b.bytesPerElement;this.dynamicDraw=d;this.context=a;c=a.gl;
this.buffer=c.createBuffer();a.bindVertexBuffer.set(this.buffer);c.bufferData(c.ARRAY_BUFFER,b.arrayBuffer,this.dynamicDraw?c.DYNAMIC_DRAW:c.STATIC_DRAW);this.dynamicDraw||delete b.arrayBuffer};Sd.prototype.bind=function(){this.context.bindVertexBuffer.set(this.buffer)};Sd.prototype.updateData=function(a){var b=this.context.gl;this.bind();b.bufferSubData(b.ARRAY_BUFFER,0,a.arrayBuffer)};Sd.prototype.enableAttributes=function(a,b){for(var c=0;c<this.attributes.length;c++){var d=b.attributes[this.attributes[c].name];
void 0!==d&&a.enableVertexAttribArray(d)}};Sd.prototype.setVertexAttribPointers=function(a,b,c){for(var d=0;d<this.attributes.length;d++){var e=this.attributes[d],g=b.attributes[e.name];void 0!==g&&a.vertexAttribPointer(g,e.components,a[bf[e.type]],!1,this.itemSize,e.offset+this.itemSize*(c||0))}};Sd.prototype.destroy=function(){var a=this.context.gl;this.buffer&&(a.deleteBuffer(this.buffer),delete this.buffer)};var Td=function(b){this.context=b;this.current=a.default$6.transparent};Td.prototype.get=
function(){return this.current};Td.prototype.set=function(a){var b=this.current;a.r===b.r&&a.g===b.g&&a.b===b.b&&a.a===b.a||(this.context.gl.clearColor(a.r,a.g,a.b,a.a),this.current=a)};var Zc=function(a){this.context=a;this.current=1};Zc.prototype.get=function(){return this.current};Zc.prototype.set=function(a){this.current!==a&&(this.context.gl.clearDepth(a),this.current=a)};var Cc=function(a){this.context=a;this.current=0};Cc.prototype.get=function(){return this.current};Cc.prototype.set=function(a){this.current!==
a&&(this.context.gl.clearStencil(a),this.current=a)};var $c=function(a){this.context=a;this.current=[!0,!0,!0,!0]};$c.prototype.get=function(){return this.current};$c.prototype.set=function(a){var b=this.current;a[0]===b[0]&&a[1]===b[1]&&a[2]===b[2]&&a[3]===b[3]||(this.context.gl.colorMask(a[0],a[1],a[2],a[3]),this.current=a)};var ld=function(a){this.context=a;this.current=!0};ld.prototype.get=function(){return this.current};ld.prototype.set=function(a){this.current!==a&&(this.context.gl.depthMask(a),
this.current=a)};var md=function(a){this.context=a;this.current=255};md.prototype.get=function(){return this.current};md.prototype.set=function(a){this.current!==a&&(this.context.gl.stencilMask(a),this.current=a)};var me=function(a){this.context=a;this.current={func:a.gl.ALWAYS,ref:0,mask:255}};me.prototype.get=function(){return this.current};me.prototype.set=function(a){var b=this.current;a.func===b.func&&a.ref===b.ref&&a.mask===b.mask||(this.context.gl.stencilFunc(a.func,a.ref,a.mask),this.current=
a)};var Vd=function(a){this.context=a;a=this.context.gl;this.current=[a.KEEP,a.KEEP,a.KEEP]};Vd.prototype.get=function(){return this.current};Vd.prototype.set=function(a){var b=this.current;a[0]===b[0]&&a[1]===b[1]&&a[2]===b[2]||(this.context.gl.stencilOp(a[0],a[1],a[2]),this.current=a)};var nd=function(a){this.context=a;this.current=!1};nd.prototype.get=function(){return this.current};nd.prototype.set=function(a){if(this.current!==a){var b=this.context.gl;a?b.enable(b.STENCIL_TEST):b.disable(b.STENCIL_TEST);
this.current=a}};var tc=function(a){this.context=a;this.current=[0,1]};tc.prototype.get=function(){return this.current};tc.prototype.set=function(a){var b=this.current;a[0]===b[0]&&a[1]===b[1]||(this.context.gl.depthRange(a[0],a[1]),this.current=a)};var Ub=function(a){this.context=a;this.current=!1};Ub.prototype.get=function(){return this.current};Ub.prototype.set=function(a){if(this.current!==a){var b=this.context.gl;a?b.enable(b.DEPTH_TEST):b.disable(b.DEPTH_TEST);this.current=a}};var xd=function(a){this.context=
a;this.current=a.gl.LESS};xd.prototype.get=function(){return this.current};xd.prototype.set=function(a){this.current!==a&&(this.context.gl.depthFunc(a),this.current=a)};var ac=function(a){this.context=a;this.current=!1};ac.prototype.get=function(){return this.current};ac.prototype.set=function(a){if(this.current!==a){var b=this.context.gl;a?b.enable(b.BLEND):b.disable(b.BLEND);this.current=a}};var yd=function(a){this.context=a;a=this.context.gl;this.current=[a.ONE,a.ZERO]};yd.prototype.get=function(){return this.current};
yd.prototype.set=function(a){var b=this.current;a[0]===b[0]&&a[1]===b[1]||(this.context.gl.blendFunc(a[0],a[1]),this.current=a)};var xe=function(b){this.context=b;this.current=a.default$6.transparent};xe.prototype.get=function(){return this.current};xe.prototype.set=function(a){var b=this.current;a.r===b.r&&a.g===b.g&&a.b===b.b&&a.a===b.a||(this.context.gl.blendColor(a.r,a.g,a.b,a.a),this.current=a)};var Wd=function(a){this.context=a;this.current=null};Wd.prototype.get=function(){return this.current};
Wd.prototype.set=function(a){this.current!==a&&(this.context.gl.useProgram(a),this.current=a)};var ne=function(a){this.context=a;this.current=1};ne.prototype.get=function(){return this.current};ne.prototype.set=function(b){var c=this.context.lineWidthRange;c=a.clamp(b,c[0],c[1]);this.current!==c&&(this.context.gl.lineWidth(c),this.current=b)};var Xd=function(a){this.context=a;this.current=a.gl.TEXTURE0};Xd.prototype.get=function(){return this.current};Xd.prototype.set=function(a){this.current!==a&&
(this.context.gl.activeTexture(a),this.current=a)};var sb=function(a){this.context=a;a=this.context.gl;this.current=[0,0,a.drawingBufferWidth,a.drawingBufferHeight]};sb.prototype.get=function(){return this.current};sb.prototype.set=function(a){var b=this.current;a[0]===b[0]&&a[1]===b[1]&&a[2]===b[2]&&a[3]===b[3]||(this.context.gl.viewport(a[0],a[1],a[2],a[3]),this.current=a)};var Lb=function(a){this.context=a;this.current=null};Lb.prototype.get=function(){return this.current};Lb.prototype.set=function(a){if(this.current!==
a){var b=this.context.gl;b.bindFramebuffer(b.FRAMEBUFFER,a);this.current=a}};var lc=function(a){this.context=a;this.current=null};lc.prototype.get=function(){return this.current};lc.prototype.set=function(a){if(this.current!==a){var b=this.context.gl;b.bindRenderbuffer(b.RENDERBUFFER,a);this.current=a}};var dc=function(a){this.context=a;this.current=null};dc.prototype.get=function(){return this.current};dc.prototype.set=function(a){if(this.current!==a){var b=this.context.gl;b.bindTexture(b.TEXTURE_2D,
a);this.current=a}};var zb=function(a){this.context=a;this.current=null};zb.prototype.get=function(){return this.current};zb.prototype.set=function(a){if(this.current!==a){var b=this.context.gl;b.bindBuffer(b.ARRAY_BUFFER,a);this.current=a}};var ab=function(a){this.context=a;this.current=null};ab.prototype.get=function(){return this.current};ab.prototype.set=function(a){var b=this.context.gl;b.bindBuffer(b.ELEMENT_ARRAY_BUFFER,a);this.current=a};var Ab=function(a){this.context=a;this.current=null};
Ab.prototype.get=function(){return this.current};Ab.prototype.set=function(a){this.current!==a&&this.context.extVertexArrayObject&&(this.context.extVertexArrayObject.bindVertexArrayOES(a),this.current=a)};var Tc=function(a){this.context=a;this.current=4};Tc.prototype.get=function(){return this.current};Tc.prototype.set=function(a){if(this.current!==a){var b=this.context.gl;b.pixelStorei(b.UNPACK_ALIGNMENT,a);this.current=a}};var Vb=function(a){this.context=a;this.current=!1};Vb.prototype.get=function(){return this.current};
Vb.prototype.set=function(a){if(this.current!==a){var b=this.context.gl;b.pixelStorei(b.UNPACK_PREMULTIPLY_ALPHA_WEBGL,a);this.current=a}};var Sa=function(a,b){this.context=a;this.current=null;this.parent=b};Sa.prototype.get=function(){return this.current};var Me=function(a){function b(b,c){a.call(this,b,c);this.dirty=!1}return a&&(b.__proto__=a),b.prototype=Object.create(a&&a.prototype),b.prototype.constructor=b,b.prototype.set=function(a){if(this.dirty||this.current!==a){var b=this.context.gl;this.context.bindFramebuffer.set(this.parent);
b.framebufferTexture2D(b.FRAMEBUFFER,b.COLOR_ATTACHMENT0,b.TEXTURE_2D,a,0);this.current=a;this.dirty=!1}},b.prototype.setDirty=function(){this.dirty=!0},b}(Sa),yf=function(a){function b(){a.apply(this,arguments)}return a&&(b.__proto__=a),b.prototype=Object.create(a&&a.prototype),b.prototype.constructor=b,b.prototype.set=function(a){if(this.current!==a){var b=this.context.gl;this.context.bindFramebuffer.set(this.parent);b.framebufferRenderbuffer(b.FRAMEBUFFER,b.DEPTH_ATTACHMENT,b.RENDERBUFFER,a);this.current=
a}},b}(Sa),Ad=function(a,b,c){this.context=a;this.width=b;this.height=c;b=this.framebuffer=a.gl.createFramebuffer();this.colorAttachment=new Me(a,b);this.depthAttachment=new yf(a,b)};Ad.prototype.destroy=function(){var a=this.context.gl,b=this.colorAttachment.get();b&&a.deleteTexture(b);(b=this.depthAttachment.get())&&a.deleteRenderbuffer(b);a.deleteFramebuffer(this.framebuffer)};var yb=function(a,b,c){this.func=a;this.mask=b;this.range=c};yb.ReadOnly=!1;yb.ReadWrite=!0;yb.disabled=new yb(519,yb.ReadOnly,
[0,1]);var Ma=function(a,b,c,d,e,g){this.test=a;this.ref=b;this.mask=c;this.fail=d;this.depthFail=e;this.pass=g};Ma.disabled=new Ma({func:519,mask:0},0,0,7680,7680,7680);var mc=function(a,b,c){this.blendFunction=a;this.blendColor=b;this.mask=c};mc.Replace=[1,0];mc.disabled=new mc(mc.Replace,a.default$6.transparent,[!1,!1,!1,!1]);mc.unblended=new mc(mc.Replace,a.default$6.transparent,[!0,!0,!0,!0]);mc.alphaBlended=new mc([1,771],a.default$6.transparent,[!0,!0,!0,!0]);var Fb=function(a){this.gl=a;this.extVertexArrayObject=
this.gl.getExtension("OES_vertex_array_object");this.lineWidthRange=a.getParameter(a.ALIASED_LINE_WIDTH_RANGE);this.clearColor=new Td(this);this.clearDepth=new Zc(this);this.clearStencil=new Cc(this);this.colorMask=new $c(this);this.depthMask=new ld(this);this.stencilMask=new md(this);this.stencilFunc=new me(this);this.stencilOp=new Vd(this);this.stencilTest=new nd(this);this.depthRange=new tc(this);this.depthTest=new Ub(this);this.depthFunc=new xd(this);this.blend=new ac(this);this.blendFunc=new yd(this);
this.blendColor=new xe(this);this.program=new Wd(this);this.lineWidth=new ne(this);this.activeTexture=new Xd(this);this.viewport=new sb(this);this.bindFramebuffer=new Lb(this);this.bindRenderbuffer=new lc(this);this.bindTexture=new dc(this);this.bindVertexBuffer=new zb(this);this.bindElementBuffer=new ab(this);this.bindVertexArrayOES=this.extVertexArrayObject&&new Ab(this);this.pixelStoreUnpack=new Tc(this);this.pixelStoreUnpackPremultiplyAlpha=new Vb(this);(this.extTextureFilterAnisotropic=a.getExtension("EXT_texture_filter_anisotropic")||
a.getExtension("MOZ_EXT_texture_filter_anisotropic")||a.getExtension("WEBKIT_EXT_texture_filter_anisotropic"))&&(this.extTextureFilterAnisotropicMax=a.getParameter(this.extTextureFilterAnisotropic.MAX_TEXTURE_MAX_ANISOTROPY_EXT));(this.extTextureHalfFloat=a.getExtension("OES_texture_half_float"))&&a.getExtension("OES_texture_half_float_linear")};Fb.prototype.createIndexBuffer=function(a,b){return new Rc(this,a,b)};Fb.prototype.createVertexBuffer=function(a,b,c){return new Sd(this,a,b,c)};Fb.prototype.createRenderbuffer=
function(a,b,c){var d=this.gl,e=d.createRenderbuffer();return this.bindRenderbuffer.set(e),d.renderbufferStorage(d.RENDERBUFFER,a,b,c),this.bindRenderbuffer.set(null),e};Fb.prototype.createFramebuffer=function(a,b){return new Ad(this,a,b)};Fb.prototype.clear=function(a){var b=a.color;a=a.depth;var c=this.gl,d=0;b&&(d|=c.COLOR_BUFFER_BIT,this.clearColor.set(b),this.colorMask.set([!0,!0,!0,!0]));void 0!==a&&(d|=c.DEPTH_BUFFER_BIT,this.clearDepth.set(a),this.depthMask.set(!0));c.clear(d)};Fb.prototype.setDepthMode=
function(a){a.func!==this.gl.ALWAYS||a.mask?(this.depthTest.set(!0),this.depthFunc.set(a.func),this.depthMask.set(a.mask),this.depthRange.set(a.range)):this.depthTest.set(!1)};Fb.prototype.setStencilMode=function(a){a.test.func!==this.gl.ALWAYS||a.mask?(this.stencilTest.set(!0),this.stencilMask.set(a.mask),this.stencilOp.set([a.fail,a.depthFail,a.pass]),this.stencilFunc.set({func:a.test.func,ref:a.ref,mask:a.test.mask})):this.stencilTest.set(!1)};Fb.prototype.setColorMode=function(b){a.default$10(b.blendFunction,
mc.Replace)?this.blend.set(!1):(this.blend.set(!0),this.blendFunc.set(b.blendFunction),this.blendColor.set(b.blendColor));this.colorMask.set(b.mask)};var od=function(b){function c(a,c,d){var e=this;b.call(this);this.id=a;this.dispatcher=d;this.on("data",function(a){"source"===a.dataType&&"metadata"===a.sourceDataType&&(e._sourceLoaded=!0);e._sourceLoaded&&!e._paused&&"source"===a.dataType&&"content"===a.sourceDataType&&(e.reload(),e.transform&&e.update(e.transform))});this.on("error",function(){e._sourceErrored=
!0});this._source=Rd(a,c,d,this);this._tiles={};this._cache=new Hc(0,this._unloadTile.bind(this));this._timers={};this._cacheTimers={};this._maxTileCacheSize=null;this._isIdRenderable=this._isIdRenderable.bind(this);this._coveredTiles={}}return b&&(c.__proto__=b),c.prototype=Object.create(b&&b.prototype),c.prototype.constructor=c,c.prototype.onAdd=function(a){this._maxTileCacheSize=(this.map=a)?a._maxTileCacheSize:null;this._source&&this._source.onAdd&&this._source.onAdd(a)},c.prototype.onRemove=
function(a){this._source&&this._source.onRemove&&this._source.onRemove(a)},c.prototype.loaded=function(){if(this._sourceErrored)return!0;if(!this._sourceLoaded)return!1;for(var a in this._tiles){var b=this._tiles[a];if("loaded"!==b.state&&"errored"!==b.state)return!1}return!0},c.prototype.getSource=function(){return this._source},c.prototype.pause=function(){this._paused=!0},c.prototype.resume=function(){if(this._paused){var a=this._shouldReloadOnResume;this._shouldReloadOnResume=this._paused=!1;
a&&this.reload();this.transform&&this.update(this.transform)}},c.prototype._loadTile=function(a,b){return this._source.loadTile(a,b)},c.prototype._unloadTile=function(a){if(this._source.unloadTile)return this._source.unloadTile(a,function(){})},c.prototype._abortTile=function(a){if(this._source.abortTile)return this._source.abortTile(a,function(){})},c.prototype.serialize=function(){return this._source.serialize()},c.prototype.prepare=function(a){for(var b in this._source.prepare&&this._source.prepare(),
this._tiles)this._tiles[b].upload(a)},c.prototype.getIds=function(){var b=this;return Object.keys(this._tiles).map(Number).sort(function(c,d){c=b._tiles[c].tileID;d=b._tiles[d].tileID;var e=(new a.default$1(c.canonical.x,c.canonical.y)).rotate(b.transform.angle),g=(new a.default$1(d.canonical.x,d.canonical.y)).rotate(b.transform.angle);return c.overscaledZ-d.overscaledZ||g.y-e.y||g.x-e.x})},c.prototype.getRenderableIds=function(){return this.getIds().filter(this._isIdRenderable)},c.prototype.hasRenderableParent=
function(a){a=this.findLoadedParent(a,0,{});return!!a&&this._isIdRenderable(a.tileID.key)},c.prototype._isIdRenderable=function(a){return this._tiles[a]&&this._tiles[a].hasData()&&!this._coveredTiles[a]},c.prototype.reload=function(){if(this._paused)this._shouldReloadOnResume=!0;else for(var a in this._cache.reset(),this._tiles)this._reloadTile(a,"reloading")},c.prototype._reloadTile=function(a,b){var c=this._tiles[a];c&&("loading"!==c.state&&(c.state=b),this._loadTile(c,this._tileLoaded.bind(this,
c,a,b)))},c.prototype._tileLoaded=function(b,c,d,e){if(e)return b.state="errored",void(404!==e.status?this._source.fire(new a.ErrorEvent(e,{tile:b})):this.update(this.transform));b.timeAdded=oa.now();"expired"===d&&(b.refreshedUponExpiration=!0);this._setTileReloadTimer(c,b);"raster-dem"===this.getSource().type&&b.dem&&this._backfillDEM(b);this._source.fire(new a.Event("data",{dataType:"source",tile:b,coord:b.tileID}));this.map&&(this.map.painter.tileExtentVAO.vao=null)},c.prototype._backfillDEM=
function(a){function b(a,b){a.needsHillshadePrepare=!0;var c=b.tileID.canonical.x-a.tileID.canonical.x,d=b.tileID.canonical.y-a.tileID.canonical.y,e=Math.pow(2,a.tileID.canonical.z),g=b.tileID.key;0===c&&0===d||1<Math.abs(d)||(1<Math.abs(c)&&(1===Math.abs(c+e)?c+=e:1===Math.abs(c-e)&&(c-=e)),b.dem&&a.dem&&(a.dem.backfillBorder(b.dem,c,d),a.neighboringTiles&&a.neighboringTiles[g]&&(a.neighboringTiles[g].backfilled=!0)))}for(var c=this.getRenderableIds(),d=0;d<c.length;d++){var e=c[d];a.neighboringTiles&&
a.neighboringTiles[e]&&(e=this.getTileByID(e),b(a,e),b(e,a))}},c.prototype.getTile=function(a){return this.getTileByID(a.key)},c.prototype.getTileByID=function(a){return this._tiles[a]},c.prototype.getZoom=function(a){return a.zoom+a.scaleZoom(a.tileSize/this._source.tileSize)},c.prototype._findLoadedChildren=function(a,b,c){var d=!1,e;for(e in this._tiles){var g=this._tiles[e];if(!(c[e]||!g.hasData()||g.tileID.overscaledZ<=a.overscaledZ||g.tileID.overscaledZ>b)){var f=Math.pow(2,g.tileID.canonical.z-
a.canonical.z);if(Math.floor(g.tileID.canonical.x/f)===a.canonical.x&&Math.floor(g.tileID.canonical.y/f)===a.canonical.y)for(c[e]=g.tileID,d=!0;g&&g.tileID.overscaledZ-1>a.overscaledZ;){f=g.tileID.scaledTo(g.tileID.overscaledZ-1);if(!f)break;(g=this._tiles[f.key])&&g.hasData()&&(delete c[e],c[f.key]=f)}}}return d},c.prototype.findLoadedParent=function(a,b,c){for(var d=a.overscaledZ-1;d>=b;d--){var e=a.scaledTo(d);if(!e)break;var g=String(e.key),f=this._tiles[g];if(f&&f.hasData())return c[g]=e,f;if(this._cache.has(e))return c[g]=
e,this._cache.get(e)}},c.prototype.updateCacheSize=function(a){a=Math.floor(5*(Math.ceil(a.width/this._source.tileSize)+1)*(Math.ceil(a.height/this._source.tileSize)+1));this._cache.setMaxSize("number"==typeof this._maxTileCacheSize?Math.min(this._maxTileCacheSize,a):a)},c.prototype.handleWrapJump=function(a){var b=Math.round((a-(void 0===this._prevLng?a:this._prevLng))/360);if(this._prevLng=a,b){a={};for(var c in this._tiles){var d=this._tiles[c];d.tileID=d.tileID.unwrapTo(d.tileID.wrap+b);a[d.tileID.key]=
d}for(var e in this._tiles=a,this._timers)clearTimeout(this._timers[e]),delete this._timers[e];for(var g in this._tiles)this._setTileReloadTimer(g,this._tiles[g])}},c.prototype.update=function(b){var d=this;if(this.transform=b,this._sourceLoaded&&!this._paused){var e;this.updateCacheSize(b);this.handleWrapJump(this.transform.center.lng);this._coveredTiles={};this.used?this._source.tileID?e=b.getVisibleUnwrappedCoordinates(this._source.tileID).map(function(b){return new a.OverscaledTileID(b.canonical.z,
b.wrap,b.canonical.z,b.canonical.x,b.canonical.y)}):(e=b.coveringTiles({tileSize:this._source.tileSize,minzoom:this._source.minzoom,maxzoom:this._source.maxzoom,roundZoom:this._source.roundZoom,reparseOverscaled:this._source.reparseOverscaled}),this._source.hasTile&&(e=e.filter(function(a){return d._source.hasTile(a)}))):e=[];var g=(this._source.roundZoom?Math.round:Math.floor)(this.getZoom(b));b=Math.max(g-c.maxOverzooming,this._source.minzoom);var f=Math.max(g+c.maxUnderzooming,this._source.minzoom);
e=this._updateRetainedTiles(e,g);g={};if(A(this._source.type))for(var h=Object.keys(e),k=0;k<h.length;k++){var n=h[k],t=e[n],m=d._tiles[n];m&&(void 0===m.fadeEndTime||m.fadeEndTime>=oa.now())&&(d._findLoadedChildren(t,f,e)&&(e[n]=t),(n=d.findLoadedParent(t,b,g))&&d._addTile(n.tileID))}for(v in g)e[v]||(d._coveredTiles[v]=!0);for(v in g)e[v]=g[v];var v=a.keysDifference(this._tiles,e);for(b=0;b<v.length;b++)d._removeTile(v[b])}},c.prototype._updateRetainedTiles=function(a,b){for(var d={},e={},g=Math.max(b-
c.maxOverzooming,this._source.minzoom),f=Math.max(b+c.maxUnderzooming,this._source.minzoom),h=0;h<a.length;h++){var k=a[h],n=this._addTile(k);if(n.hasData())d[k.key]=k;else{var t=n.wasRequested();d[k.key]=k;var m=!0;if(b+1>this._source.maxzoom){var v=k.children(this._source.maxzoom)[0],r=this.getTile(v);r&&r.hasData()?d[v.key]=v:m=!1}else for(this._findLoadedChildren(k,f,d),v=k.children(this._source.maxzoom),r=0;r<v.length;r++)if(!d[v[r].key]){m=!1;break}if(!m)for(m=k.overscaledZ-1;m>=g;--m){v=k.scaledTo(m);
if(e[v.key])break;if(e[v.key]=!0,!(n=this.getTile(v))&&t&&(n=this._addTile(v)),n&&(d[v.key]=v,t=n.wasRequested(),n.hasData()))break}}}return d},c.prototype._addTile=function(b){var c=this._tiles[b.key];if(c)return c;(c=this._cache.getAndRemove(b))&&(this._setTileReloadTimer(b.key,c),c.tileID=b);var d=!!c;return d||(c=new Eb(b,this._source.tileSize*b.overscaleFactor()),this._loadTile(c,this._tileLoaded.bind(this,c,b.key,c.state))),c?(c.uses++,this._tiles[b.key]=c,d||this._source.fire(new a.Event("dataloading",
{tile:c,coord:c.tileID,dataType:"source"})),c):null},c.prototype._setTileReloadTimer=function(a,b){var c=this;a in this._timers&&(clearTimeout(this._timers[a]),delete this._timers[a]);(b=b.getExpiryTimeout())&&(this._timers[a]=setTimeout(function(){c._reloadTile(a,"expired");delete c._timers[a]},b))},c.prototype._removeTile=function(a){var b=this._tiles[a];b&&(b.uses--,delete this._tiles[a],this._timers[a]&&(clearTimeout(this._timers[a]),delete this._timers[a]),0<b.uses||(b.hasData()?this._cache.add(b.tileID,
b,b.getExpiryTimeout()):(b.aborted=!0,this._abortTile(b),this._unloadTile(b))))},c.prototype.clearTiles=function(){for(var a in this._shouldReloadOnResume=!1,this._paused=!1,this._tiles)this._removeTile(a);this._cache.reset()},c.prototype.tilesIn=function(b,c){for(var d=[],e=this.getIds(),g=1/0,f=1/0,h=-1/0,k=-1/0,n=b[0].zoom,t=0;t<b.length;t++){var m=b[t];g=Math.min(g,m.column);f=Math.min(f,m.row);h=Math.max(h,m.column);k=Math.max(k,m.row)}for(t=0;t<e.length;t++){m=this._tiles[e[t]];var v=m.tileID,
r=Math.pow(2,this.transform.zoom-m.tileID.overscaledZ),u=c*m.queryPadding*a.default$8/m.tileSize/r,l=[q(v,new a.default$17(g,f,n)),q(v,new a.default$17(h,k,n))];if(l[0].x-u<a.default$8&&l[0].y-u<a.default$8&&0<=l[1].x+u&&0<=l[1].y+u){u=[];for(l=0;l<b.length;l++)u.push(q(v,b[l]));d.push({tile:m,tileID:v,queryGeometry:[u],scale:r})}}return d},c.prototype.getVisibleCoordinates=function(){for(var a=this,b=this.getRenderableIds().map(function(b){return a._tiles[b].tileID}),c=0;c<b.length;c+=1){var d=b[c];
d.posMatrix=a.transform.calculatePosMatrix(d.toUnwrapped())}return b},c.prototype.hasTransition=function(){if(this._source.hasTransition())return!0;if(A(this._source.type))for(var a in this._tiles){var b=this._tiles[a];if(void 0!==b.fadeEndTime&&b.fadeEndTime>=oa.now())return!0}return!1},c}(a.Evented);od.maxOverzooming=10;od.maxUnderzooming=3;var pc,Wf=function(){this.active={}};Wf.prototype.acquire=function(a){if(!this.workers){var b=kf.workerCount;for(this.workers=[];this.workers.length<b;)this.workers.push(new C)}return this.active[a]=
!0,this.workers.slice()};Wf.prototype.release=function(a){delete this.active[a];0===Object.keys(this.active).length&&(this.workers.forEach(function(a){a.terminate()}),this.workers=null)};var wb={setStyle:"setStyle",addLayer:"addLayer",removeLayer:"removeLayer",setPaintProperty:"setPaintProperty",setLayoutProperty:"setLayoutProperty",setFilter:"setFilter",addSource:"addSource",removeSource:"removeSource",setGeoJSONSourceData:"setGeoJSONSourceData",setLayerZoomRange:"setLayerZoomRange",setLayerProperty:"setLayerProperty",
setCenter:"setCenter",setZoom:"setZoom",setBearing:"setBearing",setPitch:"setPitch",setSprite:"setSprite",setGlyphs:"setGlyphs",setTransition:"setTransition",setLight:"setLight"},bc=function(a,b,c){var d=this.boxCells=[],e=this.circleCells=[];this.xCellCount=Math.ceil(a/c);this.yCellCount=Math.ceil(b/c);for(c=0;c<this.xCellCount*this.yCellCount;c++)d.push([]),e.push([]);this.circleKeys=[];this.boxKeys=[];this.bboxes=[];this.circles=[];this.width=a;this.height=b;this.xScale=this.xCellCount/a;this.yScale=
this.yCellCount/b;this.circleUid=this.boxUid=0};bc.prototype.keysLength=function(){return this.boxKeys.length+this.circleKeys.length};bc.prototype.insert=function(a,b,c,d,e){this._forEachCell(b,c,d,e,this._insertBoxCell,this.boxUid++);this.boxKeys.push(a);this.bboxes.push(b);this.bboxes.push(c);this.bboxes.push(d);this.bboxes.push(e)};bc.prototype.insertCircle=function(a,b,c,d){this._forEachCell(b-d,c-d,b+d,c+d,this._insertCircleCell,this.circleUid++);this.circleKeys.push(a);this.circles.push(b);
this.circles.push(c);this.circles.push(d)};bc.prototype._insertBoxCell=function(a,b,c,d,e,g){this.boxCells[e].push(g)};bc.prototype._insertCircleCell=function(a,b,c,d,e,g){this.circleCells[e].push(g)};bc.prototype._query=function(a,b,c,d,e){if(0>c||a>this.width||0>d||b>this.height)return!e&&[];var g=[];if(0>=a&&0>=b&&this.width<=c&&this.height<=d){if(e)return!0;for(a=0;a<this.boxKeys.length;a++)g.push({key:this.boxKeys[a],x1:this.bboxes[4*a],y1:this.bboxes[4*a+1],x2:this.bboxes[4*a+2],y2:this.bboxes[4*
a+3]});for(a=0;a<this.circleKeys.length;a++)b=this.circles[3*a],c=this.circles[3*a+1],d=this.circles[3*a+2],g.push({key:this.circleKeys[a],x1:b-d,y1:c-d,x2:b+d,y2:c+d})}else this._forEachCell(a,b,c,d,this._queryCell,g,{hitTest:e,seenUids:{box:{},circle:{}}});return e?0<g.length:g};bc.prototype._queryCircle=function(a,b,c,d){var e=a-c,g=a+c,f=b-c,h=b+c;if(0>g||e>this.width||0>h||f>this.height)return!d&&[];var k=[];return this._forEachCell(e,f,g,h,this._queryCellCircle,k,{hitTest:d,circle:{x:a,y:b,
radius:c},seenUids:{box:{},circle:{}}}),d?0<k.length:k};bc.prototype.query=function(a,b,c,d){return this._query(a,b,c,d,!1)};bc.prototype.hitTest=function(a,b,c,d){return this._query(a,b,c,d,!0)};bc.prototype.hitTestCircle=function(a,b,c){return this._queryCircle(a,b,c,!0)};bc.prototype._queryCell=function(a,b,c,d,e,g,f){var h=f.seenUids,k=this.boxCells[e];if(null!==k)for(var n=this.bboxes,t=0;t<k.length;t+=1){var m=k[t];if(!h.box[m]){h.box[m]=!0;var v=4*m;if(a<=n[v+2]&&b<=n[v+3]&&c>=n[v+0]&&d>=n[v+
1]){if(f.hitTest)return g.push(!0),!0;g.push({key:this.boxKeys[m],x1:n[v],y1:n[v+1],x2:n[v+2],y2:n[v+3]})}}}e=this.circleCells[e];if(null!==e)for(k=this.circles,n=0;n<e.length;n+=1)if(t=e[n],!h.circle[t]){h.circle[t]=!0;var r=3*t;if(this._circleAndRectCollide(k[r],k[r+1],k[r+2],a,b,c,d)){if(f.hitTest)return g.push(!0),!0;m=k[r];v=k[r+1];r=k[r+2];g.push({key:this.circleKeys[t],x1:m-r,y1:v-r,x2:m+r,y2:v+r})}}};bc.prototype._queryCellCircle=function(a,b,c,d,e,g,f){a=f.circle;f=f.seenUids;b=this.boxCells[e];
if(null!==b)for(c=this.bboxes,d=0;d<b.length;d+=1){var h=b[d];if(!f.box[h]&&(f.box[h]=!0,h*=4,this._circleAndRectCollide(a.x,a.y,a.radius,c[h+0],c[h+1],c[h+2],c[h+3])))return g.push(!0),!0}e=this.circleCells[e];if(null!==e)for(b=this.circles,c=0;c<e.length;c+=1)if(d=e[c],!f.circle[d]&&(f.circle[d]=!0,d*=3,this._circlesCollide(b[d],b[d+1],b[d+2],a.x,a.y,a.radius)))return g.push(!0),!0};bc.prototype._forEachCell=function(a,b,c,d,e,g,f){for(var h=this._convertToXCellCoord(a),k=this._convertToYCellCoord(b),
n=this._convertToXCellCoord(c),t=this._convertToYCellCoord(d);h<=n;h++)for(var m=k;m<=t;m++)if(e.call(this,a,b,c,d,this.xCellCount*m+h,g,f))return};bc.prototype._convertToXCellCoord=function(a){return Math.max(0,Math.min(this.xCellCount-1,Math.floor(a*this.xScale)))};bc.prototype._convertToYCellCoord=function(a){return Math.max(0,Math.min(this.yCellCount-1,Math.floor(a*this.yScale)))};bc.prototype._circlesCollide=function(a,b,c,d,e,g){a=d-a;b=e-b;c+=g;return c*c>a*a+b*b};bc.prototype._circleAndRectCollide=
function(a,b,c,d,e,g,f){g=(g-d)/2;a=Math.abs(a-(d+g));if(a>g+c)return!1;f=(f-e)/2;b=Math.abs(b-(e+f));if(b>f+c)return!1;if(a<=g||b<=f)return!0;e=a-g;b-=f;return e*e+b*b<=c*c};var Zd=a.default$19.layout,Ne=new Float32Array([-1/0,-1/0,0,-1/0,-1/0,0,-1/0,-1/0,0,-1/0,-1/0,0]);a.default$20.mat4;var Uc=function(a,b,c){void 0===b&&(b=new bc(a.width+200,a.height+200,25));void 0===c&&(c=new bc(a.width+200,a.height+200,25));this.transform=a;this.grid=b;this.ignoredGrid=c;this.pitchfactor=Math.cos(a._pitch)*
a.cameraToCenterDistance;this.screenRightBoundary=a.width+100;this.screenBottomBoundary=a.height+100};Uc.prototype.placeCollisionBox=function(a,b,c,d){d=this.projectAndGetPerspectiveRatio(d,a.anchorPointX,a.anchorPointY);var e=c*d.perspectiveRatio;c=a.x1*e+d.point.x;var g=a.y1*e+d.point.y,f=a.x2*e+d.point.x;a=a.y2*e+d.point.y;return!b&&this.grid.hitTest(c,g,f,a)?{box:[],offscreen:!1}:{box:[c,g,f,a],offscreen:this.isOffscreen(c,g,f,a)}};Uc.prototype.approximateTileDistance=function(a,b,c,d,e){c*=a.lastSegmentViewportDistance;
return a.prevTileDistance+c+((e?1:d/this.pitchfactor)-1)*c*Math.abs(Math.sin(b))};Uc.prototype.placeCollisionCircles=function(b,c,d,e,g,f,h,k,n,t,m,v,r){g=[];var u=this.projectAnchor(t,f.anchorX,f.anchorY),l=n/24,p=f.lineOffsetX*n;n*=f.lineOffsetY;var y=new a.default$1(f.anchorX,f.anchorY);f=N(l,k,p,n,!1,Q(y,m).point,y,f,h,m,{},!0);h=!1;k=!0;m=u.perspectiveRatio*e;l=1/(e*d);e=d=0;f&&(d=this.approximateTileDistance(f.first.tileDistance,f.first.angle,l,u.cameraDistance,r),e=this.approximateTileDistance(f.last.tileDistance,
f.last.angle,l,u.cameraDistance,r));for(r=0;r<b.length;r+=5)if(u=b[r],p=b[r+1],l=b[r+2],n=b[r+3],!f||n<-d||n>e)b[r+4]=0;else{u=this.projectPoint(t,u,p);l*=m;if(0<g.length&&(p=u.x-g[g.length-4],n=u.y-g[g.length-3],l*l*2>p*p+n*n&&r+8<b.length&&(p=b[r+8],p>-d&&p<e))){b[r+4]=0;continue}g.push(u.x,u.y,l,r/5);b[r+4]=1;if(k=k&&this.isOffscreen(u.x-l,u.y-l,u.x+l,u.y+l),!c&&this.grid.hitTestCircle(u.x,u.y,l)){if(!v)return{circles:[],offscreen:!1};h=!0}}return{circles:h?[]:g,offscreen:k}};Uc.prototype.queryRenderedSymbols=
function(b){if(0===b.length||0===this.grid.keysLength()&&0===this.ignoredGrid.keysLength())return{};for(var c=[],d=1/0,e=1/0,g=-1/0,f=-1/0,h=0;h<b.length;h+=1){var k=b[h];k=new a.default$1(k.x+100,k.y+100);d=Math.min(d,k.x);e=Math.min(e,k.y);g=Math.max(g,k.x);f=Math.max(f,k.y);c.push(k)}b={};h={};k=0;for(d=this.grid.query(d,e,g,f).concat(this.ignoredGrid.query(d,e,g,f));k<d.length;k+=1)g=d[k],e=g.key,(void 0===b[e.bucketInstanceId]&&(b[e.bucketInstanceId]={}),b[e.bucketInstanceId][e.featureIndex])||
(g=[new a.default$1(g.x1,g.y1),new a.default$1(g.x2,g.y1),new a.default$1(g.x2,g.y2),new a.default$1(g.x1,g.y2)],a.polygonIntersectsPolygon(c,g)&&(b[e.bucketInstanceId][e.featureIndex]=!0,void 0===h[e.bucketInstanceId]&&(h[e.bucketInstanceId]=[]),h[e.bucketInstanceId].push(e.featureIndex)));return h};Uc.prototype.insertCollisionBox=function(a,b,c,d){(b?this.ignoredGrid:this.grid).insert({bucketInstanceId:c,featureIndex:d},a[0],a[1],a[2],a[3])};Uc.prototype.insertCollisionCircles=function(a,b,c,d){b=
b?this.ignoredGrid:this.grid;c={bucketInstanceId:c,featureIndex:d};for(d=0;d<a.length;d+=4)b.insertCircle(c,a[d],a[d+1],a[d+2])};Uc.prototype.projectAnchor=function(a,b,c){b=[b,c,0,1];return Y(b,b,a),{perspectiveRatio:.5+this.transform.cameraToCenterDistance/b[3]*.5,cameraDistance:b[3]}};Uc.prototype.projectPoint=function(b,c,d){c=[c,d,0,1];return Y(c,c,b),new a.default$1((c[0]/c[3]+1)/2*this.transform.width+100,(-c[1]/c[3]+1)/2*this.transform.height+100)};Uc.prototype.projectAndGetPerspectiveRatio=
function(b,c,d){c=[c,d,0,1];return Y(c,c,b),{point:new a.default$1((c[0]/c[3]+1)/2*this.transform.width+100,(-c[1]/c[3]+1)/2*this.transform.height+100),perspectiveRatio:.5+this.transform.cameraToCenterDistance/c[3]*.5}};Uc.prototype.isOffscreen=function(a,b,c,d){return 100>c||a>=this.screenRightBoundary||100>d||b>this.screenBottomBoundary};var pd=a.default$19.layout,Bd=function(a,b,c,d){this.opacity=a?Math.max(0,Math.min(1,a.opacity+(a.placed?b:-b))):d&&c?1:0;this.placed=c};Bd.prototype.isHidden=
function(){return 0===this.opacity&&!this.placed};var uc=function(a,b,c,d,e){this.text=new Bd(a?a.text:null,b,c,e);this.icon=new Bd(a?a.icon:null,b,d,e)};uc.prototype.isHidden=function(){return this.text.isHidden()&&this.icon.isHidden()};var gb=function(a,b,c){this.text=a;this.icon=b;this.skipFade=c},Gb=function(a,b){this.transform=a.clone();this.collisionIndex=new Uc(this.transform);this.placements={};this.opacities={};this.stale=!1;this.fadeDuration=b;this.retainedQueryData={}};Gb.prototype.placeLayerTile=
function(b,c,d,e){var g=c.getBucket(b),f=c.latestFeatureIndex;if(g&&f&&b.id===g.layerIds[0]){b=c.collisionBoxArray;var h=g.layers[0].layout,k=Math.pow(2,this.transform.zoom-c.tileID.overscaledZ),n=c.tileSize/a.default$8,t=this.transform.calculatePosMatrix(c.tileID.toUnwrapped()),m=I(t,"map"===h.get("text-pitch-alignment"),"map"===h.get("text-rotation-alignment"),this.transform,ia(c,1,this.transform.zoom));h=I(t,"map"===h.get("icon-pitch-alignment"),"map"===h.get("icon-rotation-alignment"),this.transform,
ia(c,1,this.transform.zoom));this.retainedQueryData[g.bucketInstanceId]=new function(a,b,c,d,e){this.bucketInstanceId=a;this.featureIndex=b;this.sourceLayerIndex=c;this.bucketIndex=d;this.tileID=e}(g.bucketInstanceId,f,g.sourceLayerIndex,g.index,c.tileID);this.placeLayerBucket(g,t,m,h,k,n,d,e,b)}};Gb.prototype.placeLayerBucket=function(b,c,d,e,g,f,h,k,n){e=b.layers[0].layout;for(var t=a.evaluateSizeForZoom(b.textSizeData,this.transform.zoom,pd.properties["text-size"]),m=!b.hasTextData()||e.get("text-optional"),
v=!b.hasIconData()||e.get("icon-optional"),r=0,u=b.symbolInstances;r<u.length;r+=1){var l=u[r];if(!k[l.crossTileID]){var p=void 0!==l.feature.text,y=void 0!==l.feature.icon,q=!0,B=null,A=null,D=null,C=0,G=0;l.collisionArrays||(l.collisionArrays=b.deserializeCollisionBoxes(n,l.textBoxStartIndex,l.textBoxEndIndex,l.iconBoxStartIndex,l.iconBoxEndIndex));l.collisionArrays.textFeatureIndex&&(C=l.collisionArrays.textFeatureIndex);l.collisionArrays.textBox&&(p=0<(B=this.collisionIndex.placeCollisionBox(l.collisionArrays.textBox,
e.get("text-allow-overlap"),f,c)).box.length,q=q&&B.offscreen);var L=l.collisionArrays.textCircles;L&&(p=b.text.placedSymbolArray.get(l.placedTextSymbolIndices[0]),A=a.evaluateSizeForFeature(b.textSizeData,t,p),A=this.collisionIndex.placeCollisionCircles(L,e.get("text-allow-overlap"),g,f,l.key,p,b.lineVertexArray,b.glyphOffsetArray,A,c,d,h,"map"===e.get("text-pitch-alignment")),p=e.get("text-allow-overlap")||0<A.circles.length,q=q&&A.offscreen);l.collisionArrays.iconFeatureIndex&&(G=l.collisionArrays.iconFeatureIndex);
l.collisionArrays.iconBox&&(y=0<(D=this.collisionIndex.placeCollisionBox(l.collisionArrays.iconBox,e.get("icon-allow-overlap"),f,c)).box.length,q=q&&D.offscreen);m||v?v?m||(y=y&&p):p=y&&p:y=p=y&&p;p&&B&&this.collisionIndex.insertCollisionBox(B.box,e.get("text-ignore-placement"),b.bucketInstanceId,C);y&&D&&this.collisionIndex.insertCollisionBox(D.box,e.get("icon-ignore-placement"),b.bucketInstanceId,G);p&&A&&this.collisionIndex.insertCollisionCircles(A.circles,e.get("text-ignore-placement"),b.bucketInstanceId,
C);this.placements[l.crossTileID]=new gb(p,y,q||b.justReloaded);k[l.crossTileID]=!0}}b.justReloaded=!1};Gb.prototype.commit=function(a,b){this.commitTime=b;var c=!1,d=a&&0!==this.fadeDuration?(this.commitTime-a.commitTime)/this.fadeDuration:1,e=a?a.opacities:{};for(k in this.placements){var g=this.placements[k],f=e[k];f?(this.opacities[k]=new uc(f,d,g.text,g.icon),c=c||g.text!==f.text.placed||g.icon!==f.icon.placed):(this.opacities[k]=new uc(null,d,g.text,g.icon,g.skipFade),c=c||g.text||g.icon)}for(var h in e){var k=
e[h];this.opacities[h]||(g=new uc(k,d,!1,!1),g.isHidden()||(this.opacities[h]=g,c=c||k.text.placed||k.icon.placed))}c?this.lastPlacementChangeTime=b:"number"!=typeof this.lastPlacementChangeTime&&(this.lastPlacementChangeTime=a?a.lastPlacementChangeTime:b)};Gb.prototype.updateLayerOpacities=function(a,b){for(var c={},d=0;d<b.length;d+=1){var e=b[d],g=e.getBucket(a);g&&e.latestFeatureIndex&&a.id===g.layerIds[0]&&this.updateBucketOpacities(g,c,e.collisionBoxArray)}};Gb.prototype.updateBucketOpacities=
function(a,b,c){a.hasTextData()&&a.text.opacityVertexArray.clear();a.hasIconData()&&a.icon.opacityVertexArray.clear();a.hasCollisionBoxData()&&a.collisionBox.collisionVertexArray.clear();a.hasCollisionCircleData()&&a.collisionCircle.collisionVertexArray.clear();var d=a.layers[0].layout,e=new uc(null,0,!1,!1,!0);d=new uc(null,0,d.get("text-allow-overlap"),d.get("icon-allow-overlap"),!0);for(var g=0;g<a.symbolInstances.length;g++){var f=a.symbolInstances[g],h=b[f.crossTileID],k=this.opacities[f.crossTileID];
h?k=e:k||(k=d,this.opacities[f.crossTileID]=k);b[f.crossTileID]=!0;var n=0<f.numIconVertices;if(0<f.numGlyphVertices||0<f.numVerticalGlyphVertices){for(var t=z(k.text),m=(f.numGlyphVertices+f.numVerticalGlyphVertices)/4,v=0;v<m;v++)a.text.opacityVertexArray.emplaceBack(t);t=0;for(m=f.placedTextSymbolIndices;t<m.length;t+=1)a.text.placedSymbolArray.get(m[t]).hidden=k.text.isHidden()}if(n){n=z(k.icon);for(t=0;t<f.numIconVertices/4;t++)a.icon.opacityVertexArray.emplaceBack(n);a.icon.placedSymbolArray.get(g).hidden=
k.icon.isHidden()}f.collisionArrays||(f.collisionArrays=a.deserializeCollisionBoxes(c,f.textBoxStartIndex,f.textBoxEndIndex,f.iconBoxStartIndex,f.iconBoxEndIndex));if(f=f.collisionArrays)if(f.textBox&&a.hasCollisionBoxData()&&S(a.collisionBox.collisionVertexArray,k.text.placed,!1),f.iconBox&&a.hasCollisionBoxData()&&S(a.collisionBox.collisionVertexArray,k.icon.placed,!1),(f=f.textCircles)&&a.hasCollisionCircleData())for(n=0;n<f.length;n+=5)S(a.collisionCircle.collisionVertexArray,k.text.placed,h||
0===f[n+4])}a.sortFeatures(this.transform.angle);this.retainedQueryData[a.bucketInstanceId]&&(this.retainedQueryData[a.bucketInstanceId].featureSortOrder=a.featureSortOrder);a.hasTextData()&&a.text.opacityVertexBuffer&&a.text.opacityVertexBuffer.updateData(a.text.opacityVertexArray);a.hasIconData()&&a.icon.opacityVertexBuffer&&a.icon.opacityVertexBuffer.updateData(a.icon.opacityVertexArray);a.hasCollisionBoxData()&&a.collisionBox.collisionVertexBuffer&&a.collisionBox.collisionVertexBuffer.updateData(a.collisionBox.collisionVertexArray);
a.hasCollisionCircleData()&&a.collisionCircle.collisionVertexBuffer&&a.collisionCircle.collisionVertexBuffer.updateData(a.collisionCircle.collisionVertexArray)};Gb.prototype.symbolFadeChange=function(a){return 0===this.fadeDuration?1:(a-this.commitTime)/this.fadeDuration};Gb.prototype.hasTransitions=function(a){return this.stale||a-this.lastPlacementChangeTime<this.fadeDuration};Gb.prototype.stillRecent=function(a){return"undefined"!==this.commitTime&&this.commitTime+this.fadeDuration>a};Gb.prototype.setStale=
function(){this.stale=!0};var Ob=Math.pow(2,25),ad=Math.pow(2,24),$d=Math.pow(2,17),Cd=Math.pow(2,16),zf=Math.pow(2,9),ae=Math.pow(2,8),pe=Math.pow(2,1),gd=function(){this._currentTileIndex=0;this._seenCrossTileIDs={}};gd.prototype.continuePlacement=function(a,b,c,d,e){for(;this._currentTileIndex<a.length;)if(b.placeLayerTile(d,a[this._currentTileIndex],c,this._seenCrossTileIDs),this._currentTileIndex++,e())return!0};var wc=function(a,b,c,d,e){this.placement=new Gb(a,e);this._currentPlacementIndex=
b.length-1;this._forceFullPlacement=c;this._showCollisionBoxes=d;this._done=!1};wc.prototype.isDone=function(){return this._done};wc.prototype.continuePlacement=function(a,b,c){for(var d=this,e=oa.now(),g=function(){var a=oa.now()-e;return!d._forceFullPlacement&&2<a};0<=this._currentPlacementIndex;){var f=b[a[d._currentPlacementIndex]],h=d.placement.collisionIndex.transform.zoom;if("symbol"===f.type&&(!f.minzoom||f.minzoom<=h)&&(!f.maxzoom||f.maxzoom>h)){if(d._inProgressLayer||(d._inProgressLayer=
new gd),d._inProgressLayer.continuePlacement(c[f.source],d.placement,d._showCollisionBoxes,f,g))return;delete d._inProgressLayer}d._currentPlacementIndex--}this._done=!0};wc.prototype.commit=function(a,b){return this.placement.commit(a,b),this.placement};var Nd=512/a.default$8/2,Dd=function(a,b,c){this.tileID=a;this.indexedSymbolInstances={};this.bucketInstanceId=c;for(c=0;c<b.length;c+=1){var d=b[c],e=d.key;this.indexedSymbolInstances[e]||(this.indexedSymbolInstances[e]=[]);this.indexedSymbolInstances[e].push({crossTileID:d.crossTileID,
coord:this.getScaledCoordinates(d,a)})}};Dd.prototype.getScaledCoordinates=function(b,c){var d=Nd/Math.pow(2,c.canonical.z-this.tileID.canonical.z);b=b.anchor;return{x:Math.floor((c.canonical.x*a.default$8+b.x)*d),y:Math.floor((c.canonical.y*a.default$8+b.y)*d)}};Dd.prototype.findMatches=function(a,b,c){for(var d=this.tileID.canonical.z<b.canonical.z?1:Math.pow(2,this.tileID.canonical.z-b.canonical.z),e=0;e<a.length;e+=1){var g=a[e];if(!g.crossTileID){var f=this.indexedSymbolInstances[g.key];if(f)for(var h=
this.getScaledCoordinates(g,b),k=0;k<f.length;k+=1){var n=f[k];if(Math.abs(n.coord.x-h.x)<=d&&Math.abs(n.coord.y-h.y)<=d&&!c[n.crossTileID]){c[n.crossTileID]=!0;g.crossTileID=n.crossTileID;break}}}}};var bd=function(){this.maxCrossTileID=0};bd.prototype.generate=function(){return++this.maxCrossTileID};var Ed=function(){this.indexes={};this.usedCrossTileIDs={};this.lng=0};Ed.prototype.handleWrapJump=function(a){var b=Math.round((a-this.lng)/360);if(0!==b)for(var c in this.indexes){var d=this.indexes[c],
e={},g;for(g in d){var f=d[g];f.tileID=f.tileID.unwrapTo(f.tileID.wrap+b);e[f.tileID.key]=f}this.indexes[c]=e}this.lng=a};Ed.prototype.addBucket=function(a,b,c){if(this.indexes[a.overscaledZ]&&this.indexes[a.overscaledZ][a.key]){if(this.indexes[a.overscaledZ][a.key].bucketInstanceId===b.bucketInstanceId)return!1;this.removeBucketCrossTileIDs(a.overscaledZ,this.indexes[a.overscaledZ][a.key])}for(var d=0,e=b.symbolInstances;d<e.length;d+=1)e[d].crossTileID=0;this.usedCrossTileIDs[a.overscaledZ]||(this.usedCrossTileIDs[a.overscaledZ]=
{});d=this.usedCrossTileIDs[a.overscaledZ];for(var g in this.indexes)if(e=this.indexes[g],Number(g)>a.overscaledZ)for(var f in e){var h=e[f];h.tileID.isChildOf(a)&&h.findMatches(b.symbolInstances,a,d)}else(e=e[a.scaledTo(Number(g)).key])&&e.findMatches(b.symbolInstances,a,d);g=0;for(f=b.symbolInstances;g<f.length;g+=1)e=f[g],e.crossTileID||(e.crossTileID=c.generate(),d[e.crossTileID]=!0);return void 0===this.indexes[a.overscaledZ]&&(this.indexes[a.overscaledZ]={}),this.indexes[a.overscaledZ][a.key]=
new Dd(a,b.symbolInstances,b.bucketInstanceId),!0};Ed.prototype.removeBucketCrossTileIDs=function(a,b){for(var c in b.indexedSymbolInstances)for(var d=0,e=b.indexedSymbolInstances[c];d<e.length;d+=1)delete this.usedCrossTileIDs[a][e[d].crossTileID]};Ed.prototype.removeStaleBuckets=function(a){var b=!1,c;for(c in this.indexes){var d=this.indexes[c],e;for(e in d)a[d[e].bucketInstanceId]||(this.removeBucketCrossTileIDs(c,d[e]),delete d[e],b=!0)}return b};var Od=function(){this.layerIndexes={};this.crossTileIDs=
new bd;this.maxBucketInstanceId=0;this.bucketsInCurrentPlacement={}};Od.prototype.addLayer=function(a,b,c){var d=this.layerIndexes[a.id];void 0===d&&(d=this.layerIndexes[a.id]=new Ed);var e=!1,g={};d.handleWrapJump(c);for(c=0;c<b.length;c+=1){var f=b[c],h=f.getBucket(a);h&&a.id===h.layerIds[0]&&(h.bucketInstanceId||(h.bucketInstanceId=++this.maxBucketInstanceId),d.addBucket(f.tileID,h,this.crossTileIDs)&&(e=!0),g[h.bucketInstanceId]=!0)}return d.removeStaleBuckets(g)&&(e=!0),e};Od.prototype.pruneUnusedLayers=
function(a){var b={},c;for(c in a.forEach(function(a){b[a]=!0}),this.layerIndexes)b[c]||delete this.layerIndexes[c]};var Fd=function(b,c){return a.emitValidationErrors(b,c&&c.filter(function(a){return"source.canvas"!==a.identifier}))},qe=a.pick(wb,"addLayer removeLayer setPaintProperty setLayoutProperty setFilter addSource removeSource setLayerZoomRange setLight setTransition setGeoJSONSourceData".split(" ")),ze=a.pick(wb,["setCenter","setZoom","setBearing","setPitch"]),re=function(b){function c(d,
e){var g=this;void 0===e&&(e={});b.call(this);this.map=d;this.dispatcher=new Kb((pc||(pc=new Wf),pc),this);this.imageManager=new Ra;this.glyphManager=new Jb(d._transformRequest,e.localIdeographFontFamily);this.lineAtlas=new Db(256,512);this.crossTileSymbolIndex=new Od;this._layers={};this._order=[];this.sourceCaches={};this.zoomHistory=new a.default$23;this._loaded=!1;this._resetUpdates();var f=this;this._rtlTextPluginCallback=c.registerForPluginAvailability(function(a){for(var b in f.dispatcher.broadcast("loadRTLTextPlugin",
a.pluginURL,a.completionCallback),f.sourceCaches)f.sourceCaches[b].reload()});this.on("data",function(a){if("source"===a.dataType&&"metadata"===a.sourceDataType&&(a=g.sourceCaches[a.sourceId])&&(a=a.getSource())&&a.vectorLayerIds)for(var b in g._layers){var c=g._layers[b];c.source===a.id&&g._validateLayer(c)}})}return b&&(c.__proto__=b),c.prototype=Object.create(b&&b.prototype),c.prototype.constructor=c,c.prototype.loadURL=function(b,c){var g=this;void 0===c&&(c={});this.fire(new a.Event("dataloading",
{dataType:"style"}));var h="boolean"==typeof c.validate?c.validate:!f(b);b=function(a,b){if(!f(a))return a;a=d(a);return a.path="/styles/v1"+a.path,e(a,b)}(b,c.accessToken);b=this.map._transformRequest(b,a.ResourceType.Style);a.getJSON(b,function(b,c){b?g.fire(new a.ErrorEvent(b)):c&&g._load(c,h)})},c.prototype.loadJSON=function(b,c){var d=this;void 0===c&&(c={});this.fire(new a.Event("dataloading",{dataType:"style"}));oa.frame(function(){d._load(b,!1!==c.validate)})},c.prototype._load=function(b,
c){var d=this;if(!c||!Fd(this,a.validateStyle(b))){for(var e in this._loaded=!0,this.stylesheet=b,b.sources)d.addSource(e,b.sources[e],{validate:!1});b.sprite?function(b,c,d){function e(){if(h)d(h);else if(g&&f){var b=oa.getImageData(f),c={},e;for(e in g){var k=g[e],n=k.width,t=k.height,m=k.x,v=k.y,r=k.sdf;k=k.pixelRatio;var u=new a.RGBAImage({width:n,height:t});a.RGBAImage.copy(b,u,{x:m,y:v},{x:0,y:0},{width:n,height:t});c[e]={data:u,pixelRatio:k,sdf:r}}d(null,c)}}var g,f,h,k=1<oa.devicePixelRatio?
"@2x":"";a.getJSON(c(eb(b,k,".json"),a.ResourceType.SpriteJSON),function(a,b){h||(h=a,g=b,e())});a.getImage(c(eb(b,k,".png"),a.ResourceType.SpriteImage),function(a,b){h||(h=a,f=b,e())})}(b.sprite,this.map._transformRequest,function(b,c){if(b)d.fire(new a.ErrorEvent(b));else if(c)for(var e in c)d.imageManager.addImage(e,c[e]);d.imageManager.setLoaded(!0);d.fire(new a.Event("data",{dataType:"style"}))}):this.imageManager.setLoaded(!0);this.glyphManager.setURL(b.glyphs);b=J(this.stylesheet.layers);this._order=
b.map(function(a){return a.id});this._layers={};for(c=0;c<b.length;c+=1)e=b[c],(e=a.default$22(e)).setEventedParent(d,{layer:{id:e.id}}),d._layers[e.id]=e;this.dispatcher.broadcast("setLayers",this._serializeLayers(this._order));this.light=new kb(this.stylesheet.light);this.fire(new a.Event("data",{dataType:"style"}));this.fire(new a.Event("style.load"))}},c.prototype._validateLayer=function(b){var c=this.sourceCaches[b.source];if(c){var d=b.sourceLayer;d&&(c=c.getSource(),("geojson"===c.type||c.vectorLayerIds&&
-1===c.vectorLayerIds.indexOf(d))&&this.fire(new a.ErrorEvent(Error('Source layer "'+d+'" does not exist on source "'+c.id+'" as specified by style layer "'+b.id+'"'))))}},c.prototype.loaded=function(){if(!this._loaded||Object.keys(this._updatedSources).length)return!1;for(var a in this.sourceCaches)if(!this.sourceCaches[a].loaded())return!1;return!!this.imageManager.isLoaded()},c.prototype._serializeLayers=function(a){var b=this;return a.map(function(a){return b._layers[a].serialize()})},c.prototype.hasTransitions=
function(){if(this.light&&this.light.hasTransition())return!0;for(var a in this.sourceCaches)if(this.sourceCaches[a].hasTransition())return!0;for(var b in this._layers)if(this._layers[b].hasTransition())return!0;return!1},c.prototype._checkLoaded=function(){if(!this._loaded)throw Error("Style is not done loading");},c.prototype.update=function(b){if(this._loaded){if(this._changed){var c=Object.keys(this._updatedLayers),d=Object.keys(this._removedLayers);for(f in(c.length||d.length)&&this._updateWorkerLayers(c,
d),this._updatedSources)c=this._updatedSources[f],"reload"===c?this._reloadSource(f):"clear"===c&&this._clearSource(f);for(var e in this._updatedPaintProps)this._layers[e].updateTransitions(b);this.light.updateTransitions(b);this._resetUpdates();this.fire(new a.Event("data",{dataType:"style"}))}for(var g in this.sourceCaches)this.sourceCaches[g].used=!1;var f=0;for(e=this._order;f<e.length;f+=1)g=this._layers[e[f]],g.recalculate(b),!g.isHidden(b.zoom)&&g.source&&(this.sourceCaches[g.source].used=
!0);this.light.recalculate(b);this.z=b.zoom}},c.prototype._updateWorkerLayers=function(a,b){this.dispatcher.broadcast("updateLayers",{layers:this._serializeLayers(a),removedIds:b})},c.prototype._resetUpdates=function(){this._changed=!1;this._updatedLayers={};this._removedLayers={};this._updatedSources={};this._updatedPaintProps={}},c.prototype.setState=function(b){var c=this;if(this._checkLoaded(),Fd(this,a.validateStyle(b)))return!1;(b=a.clone(b)).layers=J(b.layers);var d=w(this.serialize(),b).filter(function(a){return!(a.command in
ze)});if(0===d.length)return!1;var e=d.filter(function(a){return!(a.command in qe)});if(0<e.length)throw Error("Unimplemented: "+e.map(function(a){return a.command}).join(", ")+".");return d.forEach(function(a){"setTransition"!==a.command&&c[a.command].apply(c,a.args)}),this.stylesheet=b,!0},c.prototype.addImage=function(b,c){if(this.getImage(b))return this.fire(new a.ErrorEvent(Error("An image with this name already exists.")));this.imageManager.addImage(b,c);this.fire(new a.Event("data",{dataType:"style"}))},
c.prototype.getImage=function(a){return this.imageManager.getImage(a)},c.prototype.removeImage=function(b){if(!this.getImage(b))return this.fire(new a.ErrorEvent(Error("No image with this name exists.")));this.imageManager.removeImage(b);this.fire(new a.Event("data",{dataType:"style"}))},c.prototype.addSource=function(b,c,d){var e=this;if(this._checkLoaded(),void 0!==this.sourceCaches[b])throw Error("There is already a source with this ID");if(!c.type)throw Error("The type property must be defined, but the only the following properties were given: "+
Object.keys(c).join(", ")+".");if(!(0<=["vector","raster","geojson","video","image"].indexOf(c.type)&&this._validate(a.validateStyle.source,"sources."+b,c,null,d))){this.map&&this.map._collectResourceTiming&&(c.collectResourceTiming=!0);var g=this.sourceCaches[b]=new od(b,c,this.dispatcher);g.style=this;g.setEventedParent(this,function(){return{isSourceLoaded:e.loaded(),source:g.serialize(),sourceId:b}});g.onAdd(this.map);this._changed=!0}},c.prototype.removeSource=function(b){if(this._checkLoaded(),
void 0===this.sourceCaches[b])throw Error("There is no source with this ID");for(var c in this._layers)if(this._layers[c].source===b)return this.fire(new a.ErrorEvent(Error('Source "'+b+'" cannot be removed while layer "'+c+'" is using it.')));c=this.sourceCaches[b];delete this.sourceCaches[b];delete this._updatedSources[b];c.fire(new a.Event("data",{sourceDataType:"metadata",dataType:"source",sourceId:b}));c.setEventedParent(null);c.clearTiles();c.onRemove&&c.onRemove(this.map);this._changed=!0},
c.prototype.setGeoJSONSourceData=function(a,b){this._checkLoaded();this.sourceCaches[a].getSource().setData(b);this._changed=!0},c.prototype.getSource=function(a){return this.sourceCaches[a]&&this.sourceCaches[a].getSource()},c.prototype.addLayer=function(b,c,d){this._checkLoaded();var e=b.id;if(this.getLayer(e))this.fire(new a.ErrorEvent(Error('Layer with id "'+e+'" already exists on this map')));else if("object"==typeof b.source&&(this.addSource(e,b.source),b=a.clone(b),b=a.extend(b,{source:e})),
!this._validate(a.validateStyle.layer,"layers."+e,b,{arrayIndex:-1},d))if(b=a.default$22(b),this._validateLayer(b),b.setEventedParent(this,{layer:{id:e}}),d=c?this._order.indexOf(c):this._order.length,c&&-1===d)this.fire(new a.ErrorEvent(Error('Layer with id "'+c+'" does not exist on this map.')));else{if(this._order.splice(d,0,e),this._layerOrderChanged=!0,this._layers[e]=b,this._removedLayers[e]&&b.source)c=this._removedLayers[e],delete this._removedLayers[e],c.type!==b.type?this._updatedSources[b.source]=
"clear":(this._updatedSources[b.source]="reload",this.sourceCaches[b.source].pause());this._updateLayer(b)}},c.prototype.moveLayer=function(b,c){if(this._checkLoaded(),this._changed=!0,this._layers[b]){if(b!==c){var d=this._order.indexOf(b);this._order.splice(d,1);d=c?this._order.indexOf(c):this._order.length;c&&-1===d?this.fire(new a.ErrorEvent(Error('Layer with id "'+c+'" does not exist on this map.'))):(this._order.splice(d,0,b),this._layerOrderChanged=!0)}}else this.fire(new a.ErrorEvent(Error("The layer '"+
b+"' does not exist in the map's style and cannot be moved.")))},c.prototype.removeLayer=function(b){this._checkLoaded();var c=this._layers[b];if(c){c.setEventedParent(null);var d=this._order.indexOf(b);this._order.splice(d,1);this._changed=this._layerOrderChanged=!0;this._removedLayers[b]=c;delete this._layers[b];delete this._updatedLayers[b];delete this._updatedPaintProps[b]}else this.fire(new a.ErrorEvent(Error("The layer '"+b+"' does not exist in the map's style and cannot be removed.")))},c.prototype.getLayer=
function(a){return this._layers[a]},c.prototype.setLayerZoomRange=function(b,c,d){this._checkLoaded();var e=this.getLayer(b);e?e.minzoom===c&&e.maxzoom===d||(null!=c&&(e.minzoom=c),null!=d&&(e.maxzoom=d),this._updateLayer(e)):this.fire(new a.ErrorEvent(Error("The layer '"+b+"' does not exist in the map's style and cannot have zoom extent.")))},c.prototype.setFilter=function(b,c){this._checkLoaded();var d=this.getLayer(b);if(d){if(!a.default$10(d.filter,c))return null==c?(d.filter=void 0,void this._updateLayer(d)):
void(this._validate(a.validateStyle.filter,"layers."+d.id+".filter",c)||(d.filter=a.clone(c),this._updateLayer(d)))}else this.fire(new a.ErrorEvent(Error("The layer '"+b+"' does not exist in the map's style and cannot be filtered.")))},c.prototype.getFilter=function(b){return a.clone(this.getLayer(b).filter)},c.prototype.setLayoutProperty=function(b,c,d){this._checkLoaded();var e=this.getLayer(b);e?a.default$10(e.getLayoutProperty(c),d)||(e.setLayoutProperty(c,d),this._updateLayer(e)):this.fire(new a.ErrorEvent(Error("The layer '"+
b+"' does not exist in the map's style and cannot be styled.")))},c.prototype.getLayoutProperty=function(a,b){return this.getLayer(a).getLayoutProperty(b)},c.prototype.setPaintProperty=function(b,c,d){this._checkLoaded();var e=this.getLayer(b);if(e){if(!a.default$10(e.getPaintProperty(c),d)){var g=e._transitionablePaint._values[c].value.isDataDriven();e.setPaintProperty(c,d);(e._transitionablePaint._values[c].value.isDataDriven()||g)&&this._updateLayer(e);this._changed=!0;this._updatedPaintProps[b]=
!0}}else this.fire(new a.ErrorEvent(Error("The layer '"+b+"' does not exist in the map's style and cannot be styled.")))},c.prototype.getPaintProperty=function(a,b){return this.getLayer(a).getPaintProperty(b)},c.prototype.getTransition=function(){return a.extend({duration:300,delay:0},this.stylesheet&&this.stylesheet.transition)},c.prototype.serialize=function(){var b=this;return a.filterObject({version:this.stylesheet.version,name:this.stylesheet.name,metadata:this.stylesheet.metadata,light:this.stylesheet.light,
center:this.stylesheet.center,zoom:this.stylesheet.zoom,bearing:this.stylesheet.bearing,pitch:this.stylesheet.pitch,sprite:this.stylesheet.sprite,glyphs:this.stylesheet.glyphs,transition:this.stylesheet.transition,sources:a.mapObject(this.sourceCaches,function(a){return a.serialize()}),layers:this._order.map(function(a){return b._layers[a].serialize()})},function(a){return void 0!==a})},c.prototype._updateLayer=function(a){this._updatedLayers[a.id]=!0;a.source&&!this._updatedSources[a.source]&&(this._updatedSources[a.source]=
"reload",this.sourceCaches[a.source].pause());this._changed=!0},c.prototype._flattenRenderedFeatures=function(a){for(var b=[],c=this._order.length-1;0<=c;c--)for(var d=this._order[c],e=0,g=a;e<g.length;e+=1){var f=g[e][d];if(f)for(var h=0;h<f.length;h+=1)b.push(f[h])}return b},c.prototype.queryRenderedFeatures=function(b,c,d){c&&c.filter&&this._validate(a.validateStyle.filter,"queryRenderedFeatures.filter",c.filter);var e={};if(c&&c.layers){if(!Array.isArray(c.layers))return this.fire(new a.ErrorEvent(Error("parameters.layers must be an Array."))),
[];for(var g=0,f=c.layers;g<f.length;g+=1){var h=f[g],k=this._layers[h];if(!k)return this.fire(new a.ErrorEvent(Error("The layer '"+h+"' does not exist in the map's style and cannot be queried for features."))),[];e[k.source]=!0}}g=[];for(var n in this.sourceCaches)c.layers&&!e[n]||g.push(l(this.sourceCaches[n],this._layers,b.worldCoordinate,c,d));return this.placement&&g.push(function(a,b,c,d,e){var g={},f=d.queryRenderedSymbols(b);b=[];d=0;for(var h=Object.keys(f).map(Number);d<h.length;d+=1)b.push(e[h[d]]);
b.sort(p);e=function(){var b=n[k],d=b.featureIndex.lookupSymbolFeatures(f[b.bucketInstanceId],b.bucketIndex,b.sourceLayerIndex,c.filter,c.layers,a),e;for(e in d){var h=g[e]=g[e]||[],t=d[e];t.sort(function(a,c){var d=b.featureSortOrder;return d?(a=d.indexOf(a.featureIndex),d.indexOf(c.featureIndex)-a):c.featureIndex-a.featureIndex});for(var m=0;m<t.length;m+=1)h.push(t[m].feature)}};for(var k=0,n=b;k<n.length;k+=1)e();return g}(this._layers,b.viewport,c,this.placement.collisionIndex,this.placement.retainedQueryData)),
this._flattenRenderedFeatures(g)},c.prototype.querySourceFeatures=function(b,c){c&&c.filter&&this._validate(a.validateStyle.filter,"querySourceFeatures.filter",c.filter);return(b=this.sourceCaches[b])?function(a,b){for(var c=a.getRenderableIds().map(function(b){return a.getTileByID(b)}),d=[],e={},g=0;g<c.length;g++){var f=c[g],h=f.tileID.canonical.key;e[h]||(e[h]=!0,f.querySourceFeatures(d,b))}return d}(b,c):[]},c.prototype.addSourceType=function(a,b,d){return c.getSourceType(a)?d(Error('A source type called "'+
a+'" already exists.')):(c.setSourceType(a,b),b.workerSourceURL?void this.dispatcher.broadcast("loadWorkerSource",{name:a,url:b.workerSourceURL},d):d(null,null))},c.prototype.getLight=function(){return this.light.getLight()},c.prototype.setLight=function(b){this._checkLoaded();var c=this.light.getLight(),d=!1,e;for(e in b)if(!a.default$10(b[e],c[e])){d=!0;break}d&&(c={now:oa.now(),transition:a.extend({duration:300,delay:0},this.stylesheet.transition)},this.light.setLight(b),this.light.updateTransitions(c))},
c.prototype._validate=function(b,c,d,e,g){return(!g||!1!==g.validate)&&Fd(this,b.call(a.validateStyle,a.extend({key:c,style:this.serialize(),value:d,styleSpec:a.default$5},e)))},c.prototype._remove=function(){for(var b in a.evented.off("pluginAvailable",this._rtlTextPluginCallback),this.sourceCaches)this.sourceCaches[b].clearTiles();this.dispatcher.remove()},c.prototype._clearSource=function(a){this.sourceCaches[a].clearTiles()},c.prototype._reloadSource=function(a){this.sourceCaches[a].resume();
this.sourceCaches[a].reload()},c.prototype._updateSources=function(a){for(var b in this.sourceCaches)this.sourceCaches[b].update(a)},c.prototype._generateCollisionBoxes=function(){for(var a in this.sourceCaches)this._reloadSource(a)},c.prototype._updatePlacement=function(a,b,c){for(var d=!1,e=!1,g={},f=0,h=this._order;f<h.length;f+=1){var k=this._layers[h[f]];if("symbol"===k.type){if(!g[k.source]){var n=this.sourceCaches[k.source];g[k.source]=n.getRenderableIds().map(function(a){return n.getTileByID(a)}).sort(function(a,
b){return b.tileID.overscaledZ-a.tileID.overscaledZ||(a.tileID.isLessThan(b.tileID)?-1:1)})}k=this.crossTileSymbolIndex.addLayer(k,g[k.source],a.center.lng);d=d||k}}this.crossTileSymbolIndex.pruneUnusedLayers(this._order);f=this._layerOrderChanged;if((f||!this.pauseablePlacement||this.pauseablePlacement.isDone()&&!this.placement.stillRecent(oa.now()))&&(this.pauseablePlacement=new wc(a,this._order,f,b,c),this._layerOrderChanged=!1),this.pauseablePlacement.isDone()?this.placement.setStale():(this.pauseablePlacement.continuePlacement(this._order,
this._layers,g),this.pauseablePlacement.isDone()&&(this.placement=this.pauseablePlacement.commit(this.placement,oa.now()),e=!0),d&&this.pauseablePlacement.placement.setStale()),e||d)for(a=0,b=this._order;a<b.length;a+=1)c=this._layers[b[a]],"symbol"===c.type&&this.placement.updateLayerOpacities(c,g[c.source]);return!this.pauseablePlacement.isDone()||this.placement.hasTransitions(oa.now())},c.prototype.getImages=function(a,b,c){this.imageManager.getImages(b.icons,c)},c.prototype.getGlyphs=function(a,
b,c){this.glyphManager.getGlyphs(b.stacks,c)},c}(a.Evented);re.getSourceType=function(a){return fd[a]};re.setSourceType=function(a,b){fd[a]=b};re.registerForPluginAvailability=a.registerForPluginAvailability;var be=a.createLayout([{name:"a_pos",type:"Int16",components:2}]),ce={prelude:{fragmentSource:"#ifdef GL_ES\nprecision mediump float;\n#else\n\n#if !defined(lowp)\n#define lowp\n#endif\n\n#if !defined(mediump)\n#define mediump\n#endif\n\n#if !defined(highp)\n#define highp\n#endif\n\n#endif\n",
vertexSource:"#ifdef GL_ES\nprecision highp float;\n#else\n\n#if !defined(lowp)\n#define lowp\n#endif\n\n#if !defined(mediump)\n#define mediump\n#endif\n\n#if !defined(highp)\n#define highp\n#endif\n\n#endif\n\n// Unpack a pair of values that have been packed into a single float.\n// The packed values are assumed to be 8-bit unsigned integers, and are\n// packed like so:\n// packedValue \x3d floor(input[0]) * 256 + input[1],\nvec2 unpack_float(const float packedValue) {\n    int packedIntValue \x3d int(packedValue);\n    int v0 \x3d packedIntValue / 256;\n    return vec2(v0, packedIntValue - v0 * 256);\n}\n\nvec2 unpack_opacity(const float packedOpacity) {\n    int intOpacity \x3d int(packedOpacity) / 2;\n    return vec2(float(intOpacity) / 127.0, mod(packedOpacity, 2.0));\n}\n\n// To minimize the number of attributes needed, we encode a 4-component\n// color into a pair of floats (i.e. a vec2) as follows:\n// [ floor(color.r * 255) * 256 + color.g * 255,\n//   floor(color.b * 255) * 256 + color.g * 255 ]\nvec4 decode_color(const vec2 encodedColor) {\n    return vec4(\n        unpack_float(encodedColor[0]) / 255.0,\n        unpack_float(encodedColor[1]) / 255.0\n    );\n}\n\n// Unpack a pair of paint values and interpolate between them.\nfloat unpack_mix_vec2(const vec2 packedValue, const float t) {\n    return mix(packedValue[0], packedValue[1], t);\n}\n\n// Unpack a pair of paint values and interpolate between them.\nvec4 unpack_mix_vec4(const vec4 packedColors, const float t) {\n    vec4 minColor \x3d decode_color(vec2(packedColors[0], packedColors[1]));\n    vec4 maxColor \x3d decode_color(vec2(packedColors[2], packedColors[3]));\n    return mix(minColor, maxColor, t);\n}\n\n// The offset depends on how many pixels are between the world origin and the edge of the tile:\n// vec2 offset \x3d mod(pixel_coord, size)\n//\n// At high zoom levels there are a ton of pixels between the world origin and the edge of the tile.\n// The glsl spec only guarantees 16 bits of precision for highp floats. We need more than that.\n//\n// The pixel_coord is passed in as two 16 bit values:\n// pixel_coord_upper \x3d floor(pixel_coord / 2^16)\n// pixel_coord_lower \x3d mod(pixel_coord, 2^16)\n//\n// The offset is calculated in a series of steps that should preserve this precision:\nvec2 get_pattern_pos(const vec2 pixel_coord_upper, const vec2 pixel_coord_lower,\n    const vec2 pattern_size, const float tile_units_to_pixels, const vec2 pos) {\n\n    vec2 offset \x3d mod(mod(mod(pixel_coord_upper, pattern_size) * 256.0, pattern_size) * 256.0 + pixel_coord_lower, pattern_size);\n    return (tile_units_to_pixels * pos + offset) / pattern_size;\n}\n"},
background:{fragmentSource:"uniform vec4 u_color;\nuniform float u_opacity;\n\nvoid main() {\n    gl_FragColor \x3d u_color * u_opacity;\n\n#ifdef OVERDRAW_INSPECTOR\n    gl_FragColor \x3d vec4(1.0);\n#endif\n}\n",vertexSource:"attribute vec2 a_pos;\n\nuniform mat4 u_matrix;\n\nvoid main() {\n    gl_Position \x3d u_matrix * vec4(a_pos, 0, 1);\n}\n"},backgroundPattern:{fragmentSource:"uniform vec2 u_pattern_tl_a;\nuniform vec2 u_pattern_br_a;\nuniform vec2 u_pattern_tl_b;\nuniform vec2 u_pattern_br_b;\nuniform vec2 u_texsize;\nuniform float u_mix;\nuniform float u_opacity;\n\nuniform sampler2D u_image;\n\nvarying vec2 v_pos_a;\nvarying vec2 v_pos_b;\n\nvoid main() {\n    vec2 imagecoord \x3d mod(v_pos_a, 1.0);\n    vec2 pos \x3d mix(u_pattern_tl_a / u_texsize, u_pattern_br_a / u_texsize, imagecoord);\n    vec4 color1 \x3d texture2D(u_image, pos);\n\n    vec2 imagecoord_b \x3d mod(v_pos_b, 1.0);\n    vec2 pos2 \x3d mix(u_pattern_tl_b / u_texsize, u_pattern_br_b / u_texsize, imagecoord_b);\n    vec4 color2 \x3d texture2D(u_image, pos2);\n\n    gl_FragColor \x3d mix(color1, color2, u_mix) * u_opacity;\n\n#ifdef OVERDRAW_INSPECTOR\n    gl_FragColor \x3d vec4(1.0);\n#endif\n}\n",
vertexSource:"uniform mat4 u_matrix;\nuniform vec2 u_pattern_size_a;\nuniform vec2 u_pattern_size_b;\nuniform vec2 u_pixel_coord_upper;\nuniform vec2 u_pixel_coord_lower;\nuniform float u_scale_a;\nuniform float u_scale_b;\nuniform float u_tile_units_to_pixels;\n\nattribute vec2 a_pos;\n\nvarying vec2 v_pos_a;\nvarying vec2 v_pos_b;\n\nvoid main() {\n    gl_Position \x3d u_matrix * vec4(a_pos, 0, 1);\n\n    v_pos_a \x3d get_pattern_pos(u_pixel_coord_upper, u_pixel_coord_lower, u_scale_a * u_pattern_size_a, u_tile_units_to_pixels, a_pos);\n    v_pos_b \x3d get_pattern_pos(u_pixel_coord_upper, u_pixel_coord_lower, u_scale_b * u_pattern_size_b, u_tile_units_to_pixels, a_pos);\n}\n"},
circle:{fragmentSource:"#pragma mapbox: define highp vec4 color\n#pragma mapbox: define mediump float radius\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define highp vec4 stroke_color\n#pragma mapbox: define mediump float stroke_width\n#pragma mapbox: define lowp float stroke_opacity\n\nvarying vec3 v_data;\n\nvoid main() {\n    #pragma mapbox: initialize highp vec4 color\n    #pragma mapbox: initialize mediump float radius\n    #pragma mapbox: initialize lowp float blur\n    #pragma mapbox: initialize lowp float opacity\n    #pragma mapbox: initialize highp vec4 stroke_color\n    #pragma mapbox: initialize mediump float stroke_width\n    #pragma mapbox: initialize lowp float stroke_opacity\n\n    vec2 extrude \x3d v_data.xy;\n    float extrude_length \x3d length(extrude);\n\n    lowp float antialiasblur \x3d v_data.z;\n    float antialiased_blur \x3d -max(blur, antialiasblur);\n\n    float opacity_t \x3d smoothstep(0.0, antialiased_blur, extrude_length - 1.0);\n\n    float color_t \x3d stroke_width \x3c 0.01 ? 0.0 : smoothstep(\n        antialiased_blur,\n        0.0,\n        extrude_length - radius / (radius + stroke_width)\n    );\n\n    gl_FragColor \x3d opacity_t * mix(color * opacity, stroke_color * stroke_opacity, color_t);\n\n#ifdef OVERDRAW_INSPECTOR\n    gl_FragColor \x3d vec4(1.0);\n#endif\n}\n",
vertexSource:"uniform mat4 u_matrix;\nuniform bool u_scale_with_map;\nuniform bool u_pitch_with_map;\nuniform vec2 u_extrude_scale;\nuniform highp float u_camera_to_center_distance;\n\nattribute vec2 a_pos;\n\n#pragma mapbox: define highp vec4 color\n#pragma mapbox: define mediump float radius\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define highp vec4 stroke_color\n#pragma mapbox: define mediump float stroke_width\n#pragma mapbox: define lowp float stroke_opacity\n\nvarying vec3 v_data;\n\nvoid main(void) {\n    #pragma mapbox: initialize highp vec4 color\n    #pragma mapbox: initialize mediump float radius\n    #pragma mapbox: initialize lowp float blur\n    #pragma mapbox: initialize lowp float opacity\n    #pragma mapbox: initialize highp vec4 stroke_color\n    #pragma mapbox: initialize mediump float stroke_width\n    #pragma mapbox: initialize lowp float stroke_opacity\n\n    // unencode the extrusion vector that we snuck into the a_pos vector\n    vec2 extrude \x3d vec2(mod(a_pos, 2.0) * 2.0 - 1.0);\n\n    // multiply a_pos by 0.5, since we had it * 2 in order to sneak\n    // in extrusion data\n    vec2 circle_center \x3d floor(a_pos * 0.5);\n    if (u_pitch_with_map) {\n        vec2 corner_position \x3d circle_center;\n        if (u_scale_with_map) {\n            corner_position +\x3d extrude * (radius + stroke_width) * u_extrude_scale;\n        } else {\n            // Pitching the circle with the map effectively scales it with the map\n            // To counteract the effect for pitch-scale: viewport, we rescale the\n            // whole circle based on the pitch scaling effect at its central point\n            vec4 projected_center \x3d u_matrix * vec4(circle_center, 0, 1);\n            corner_position +\x3d extrude * (radius + stroke_width) * u_extrude_scale * (projected_center.w / u_camera_to_center_distance);\n        }\n\n        gl_Position \x3d u_matrix * vec4(corner_position, 0, 1);\n    } else {\n        gl_Position \x3d u_matrix * vec4(circle_center, 0, 1);\n\n        if (u_scale_with_map) {\n            gl_Position.xy +\x3d extrude * (radius + stroke_width) * u_extrude_scale * u_camera_to_center_distance;\n        } else {\n            gl_Position.xy +\x3d extrude * (radius + stroke_width) * u_extrude_scale * gl_Position.w;\n        }\n    }\n\n    // This is a minimum blur distance that serves as a faux-antialiasing for\n    // the circle. since blur is a ratio of the circle's size and the intent is\n    // to keep the blur at roughly 1px, the two are inversely related.\n    lowp float antialiasblur \x3d 1.0 / DEVICE_PIXEL_RATIO / (radius + stroke_width);\n\n    v_data \x3d vec3(extrude.x, extrude.y, antialiasblur);\n}\n"},
clippingMask:{fragmentSource:"void main() {\n    gl_FragColor \x3d vec4(1.0);\n}\n",vertexSource:"attribute vec2 a_pos;\n\nuniform mat4 u_matrix;\n\nvoid main() {\n    gl_Position \x3d u_matrix * vec4(a_pos, 0, 1);\n}\n"},heatmap:{fragmentSource:"#pragma mapbox: define highp float weight\n\nuniform highp float u_intensity;\nvarying vec2 v_extrude;\n\n// Gaussian kernel coefficient: 1 / sqrt(2 * PI)\n#define GAUSS_COEF 0.3989422804014327\n\nvoid main() {\n    #pragma mapbox: initialize highp float weight\n\n    // Kernel density estimation with a Gaussian kernel of size 5x5\n    float d \x3d -0.5 * 3.0 * 3.0 * dot(v_extrude, v_extrude);\n    float val \x3d weight * u_intensity * GAUSS_COEF * exp(d);\n\n    gl_FragColor \x3d vec4(val, 1.0, 1.0, 1.0);\n\n#ifdef OVERDRAW_INSPECTOR\n    gl_FragColor \x3d vec4(1.0);\n#endif\n}\n",
vertexSource:"#pragma mapbox: define highp float weight\n#pragma mapbox: define mediump float radius\n\nuniform mat4 u_matrix;\nuniform float u_extrude_scale;\nuniform float u_opacity;\nuniform float u_intensity;\n\nattribute vec2 a_pos;\n\nvarying vec2 v_extrude;\n\n// Effective \"0\" in the kernel density texture to adjust the kernel size to;\n// this empirically chosen number minimizes artifacts on overlapping kernels\n// for typical heatmap cases (assuming clustered source)\nconst highp float ZERO \x3d 1.0 / 255.0 / 16.0;\n\n// Gaussian kernel coefficient: 1 / sqrt(2 * PI)\n#define GAUSS_COEF 0.3989422804014327\n\nvoid main(void) {\n    #pragma mapbox: initialize highp float weight\n    #pragma mapbox: initialize mediump float radius\n\n    // unencode the extrusion vector that we snuck into the a_pos vector\n    vec2 unscaled_extrude \x3d vec2(mod(a_pos, 2.0) * 2.0 - 1.0);\n\n    // This 'extrude' comes in ranging from [-1, -1], to [1, 1].  We'll use\n    // it to produce the vertices of a square mesh framing the point feature\n    // we're adding to the kernel density texture.  We'll also pass it as\n    // a varying, so that the fragment shader can determine the distance of\n    // each fragment from the point feature.\n    // Before we do so, we need to scale it up sufficiently so that the\n    // kernel falls effectively to zero at the edge of the mesh.\n    // That is, we want to know S such that\n    // weight * u_intensity * GAUSS_COEF * exp(-0.5 * 3.0^2 * S^2) \x3d\x3d ZERO\n    // Which solves to:\n    // S \x3d sqrt(-2.0 * log(ZERO / (weight * u_intensity * GAUSS_COEF))) / 3.0\n    float S \x3d sqrt(-2.0 * log(ZERO / weight / u_intensity / GAUSS_COEF)) / 3.0;\n\n    // Pass the varying in units of radius\n    v_extrude \x3d S * unscaled_extrude;\n\n    // Scale by radius and the zoom-based scale factor to produce actual\n    // mesh position\n    vec2 extrude \x3d v_extrude * radius * u_extrude_scale;\n\n    // multiply a_pos by 0.5, since we had it * 2 in order to sneak\n    // in extrusion data\n    vec4 pos \x3d vec4(floor(a_pos * 0.5) + extrude, 0, 1);\n\n    gl_Position \x3d u_matrix * pos;\n}\n"},
heatmapTexture:{fragmentSource:"uniform sampler2D u_image;\nuniform sampler2D u_color_ramp;\nuniform float u_opacity;\nvarying vec2 v_pos;\n\nvoid main() {\n    float t \x3d texture2D(u_image, v_pos).r;\n    vec4 color \x3d texture2D(u_color_ramp, vec2(t, 0.5));\n    gl_FragColor \x3d color * u_opacity;\n\n#ifdef OVERDRAW_INSPECTOR\n    gl_FragColor \x3d vec4(0.0);\n#endif\n}\n",vertexSource:"uniform mat4 u_matrix;\nuniform vec2 u_world;\nattribute vec2 a_pos;\nvarying vec2 v_pos;\n\nvoid main() {\n    gl_Position \x3d u_matrix * vec4(a_pos * u_world, 0, 1);\n\n    v_pos.x \x3d a_pos.x;\n    v_pos.y \x3d 1.0 - a_pos.y;\n}\n"},
collisionBox:{fragmentSource:"\nvarying float v_placed;\nvarying float v_notUsed;\n\nvoid main() {\n\n    float alpha \x3d 0.5;\n\n    // Red \x3d collision, hide label\n    gl_FragColor \x3d vec4(1.0, 0.0, 0.0, 1.0) * alpha;\n\n    // Blue \x3d no collision, label is showing\n    if (v_placed \x3e 0.5) {\n        gl_FragColor \x3d vec4(0.0, 0.0, 1.0, 0.5) * alpha;\n    }\n\n    if (v_notUsed \x3e 0.5) {\n        // This box not used, fade it out\n        gl_FragColor *\x3d .1;\n    }\n}",vertexSource:"attribute vec2 a_pos;\nattribute vec2 a_anchor_pos;\nattribute vec2 a_extrude;\nattribute vec2 a_placed;\n\nuniform mat4 u_matrix;\nuniform vec2 u_extrude_scale;\nuniform float u_camera_to_center_distance;\n\nvarying float v_placed;\nvarying float v_notUsed;\n\nvoid main() {\n    vec4 projectedPoint \x3d u_matrix * vec4(a_anchor_pos, 0, 1);\n    highp float camera_to_anchor_distance \x3d projectedPoint.w;\n    highp float collision_perspective_ratio \x3d clamp(\n        0.5 + 0.5 * (u_camera_to_center_distance / camera_to_anchor_distance),\n        0.0, // Prevents oversized near-field boxes in pitched/overzoomed tiles\n        4.0);\n\n    gl_Position \x3d u_matrix * vec4(a_pos, 0.0, 1.0);\n    gl_Position.xy +\x3d a_extrude * u_extrude_scale * gl_Position.w * collision_perspective_ratio;\n\n    v_placed \x3d a_placed.x;\n    v_notUsed \x3d a_placed.y;\n}\n"},
collisionCircle:{fragmentSource:"uniform float u_overscale_factor;\n\nvarying float v_placed;\nvarying float v_notUsed;\nvarying float v_radius;\nvarying vec2 v_extrude;\nvarying vec2 v_extrude_scale;\n\nvoid main() {\n    float alpha \x3d 0.5;\n\n    // Red \x3d collision, hide label\n    vec4 color \x3d vec4(1.0, 0.0, 0.0, 1.0) * alpha;\n\n    // Blue \x3d no collision, label is showing\n    if (v_placed \x3e 0.5) {\n        color \x3d vec4(0.0, 0.0, 1.0, 0.5) * alpha;\n    }\n\n    if (v_notUsed \x3e 0.5) {\n        // This box not used, fade it out\n        color *\x3d .2;\n    }\n\n    float extrude_scale_length \x3d length(v_extrude_scale);\n    float extrude_length \x3d length(v_extrude) * extrude_scale_length;\n    float stroke_width \x3d 15.0 * extrude_scale_length / u_overscale_factor;\n    float radius \x3d v_radius * extrude_scale_length;\n\n    float distance_to_edge \x3d abs(extrude_length - radius);\n    float opacity_t \x3d smoothstep(-stroke_width, 0.0, -distance_to_edge);\n\n    gl_FragColor \x3d opacity_t * color;\n}\n",
vertexSource:"attribute vec2 a_pos;\nattribute vec2 a_anchor_pos;\nattribute vec2 a_extrude;\nattribute vec2 a_placed;\n\nuniform mat4 u_matrix;\nuniform vec2 u_extrude_scale;\nuniform float u_camera_to_center_distance;\n\nvarying float v_placed;\nvarying float v_notUsed;\nvarying float v_radius;\n\nvarying vec2 v_extrude;\nvarying vec2 v_extrude_scale;\n\nvoid main() {\n    vec4 projectedPoint \x3d u_matrix * vec4(a_anchor_pos, 0, 1);\n    highp float camera_to_anchor_distance \x3d projectedPoint.w;\n    highp float collision_perspective_ratio \x3d clamp(\n        0.5 + 0.5 * (u_camera_to_center_distance / camera_to_anchor_distance),\n        0.0, // Prevents oversized near-field circles in pitched/overzoomed tiles\n        4.0);\n\n    gl_Position \x3d u_matrix * vec4(a_pos, 0.0, 1.0);\n\n    highp float padding_factor \x3d 1.2; // Pad the vertices slightly to make room for anti-alias blur\n    gl_Position.xy +\x3d a_extrude * u_extrude_scale * padding_factor * gl_Position.w * collision_perspective_ratio;\n\n    v_placed \x3d a_placed.x;\n    v_notUsed \x3d a_placed.y;\n    v_radius \x3d abs(a_extrude.y); // We don't pitch the circles, so both units of the extrusion vector are equal in magnitude to the radius\n\n    v_extrude \x3d a_extrude * padding_factor;\n    v_extrude_scale \x3d u_extrude_scale * u_camera_to_center_distance * collision_perspective_ratio;\n}\n"},
debug:{fragmentSource:"uniform highp vec4 u_color;\n\nvoid main() {\n    gl_FragColor \x3d u_color;\n}\n",vertexSource:"attribute vec2 a_pos;\n\nuniform mat4 u_matrix;\n\nvoid main() {\n    gl_Position \x3d u_matrix * vec4(a_pos, 0, 1);\n}\n"},fill:{fragmentSource:"#pragma mapbox: define highp vec4 color\n#pragma mapbox: define lowp float opacity\n\nvoid main() {\n    #pragma mapbox: initialize highp vec4 color\n    #pragma mapbox: initialize lowp float opacity\n\n    gl_FragColor \x3d color * opacity;\n\n#ifdef OVERDRAW_INSPECTOR\n    gl_FragColor \x3d vec4(1.0);\n#endif\n}\n",
vertexSource:"attribute vec2 a_pos;\n\nuniform mat4 u_matrix;\n\n#pragma mapbox: define highp vec4 color\n#pragma mapbox: define lowp float opacity\n\nvoid main() {\n    #pragma mapbox: initialize highp vec4 color\n    #pragma mapbox: initialize lowp float opacity\n\n    gl_Position \x3d u_matrix * vec4(a_pos, 0, 1);\n}\n"},fillOutline:{fragmentSource:"#pragma mapbox: define highp vec4 outline_color\n#pragma mapbox: define lowp float opacity\n\nvarying vec2 v_pos;\n\nvoid main() {\n    #pragma mapbox: initialize highp vec4 outline_color\n    #pragma mapbox: initialize lowp float opacity\n\n    float dist \x3d length(v_pos - gl_FragCoord.xy);\n    float alpha \x3d 1.0 - smoothstep(0.0, 1.0, dist);\n    gl_FragColor \x3d outline_color * (alpha * opacity);\n\n#ifdef OVERDRAW_INSPECTOR\n    gl_FragColor \x3d vec4(1.0);\n#endif\n}\n",
vertexSource:"attribute vec2 a_pos;\n\nuniform mat4 u_matrix;\nuniform vec2 u_world;\n\nvarying vec2 v_pos;\n\n#pragma mapbox: define highp vec4 outline_color\n#pragma mapbox: define lowp float opacity\n\nvoid main() {\n    #pragma mapbox: initialize highp vec4 outline_color\n    #pragma mapbox: initialize lowp float opacity\n\n    gl_Position \x3d u_matrix * vec4(a_pos, 0, 1);\n    v_pos \x3d (gl_Position.xy / gl_Position.w + 1.0) / 2.0 * u_world;\n}\n"},fillOutlinePattern:{fragmentSource:"uniform vec2 u_pattern_tl_a;\nuniform vec2 u_pattern_br_a;\nuniform vec2 u_pattern_tl_b;\nuniform vec2 u_pattern_br_b;\nuniform vec2 u_texsize;\nuniform float u_mix;\n\nuniform sampler2D u_image;\n\nvarying vec2 v_pos_a;\nvarying vec2 v_pos_b;\nvarying vec2 v_pos;\n\n#pragma mapbox: define lowp float opacity\n\nvoid main() {\n    #pragma mapbox: initialize lowp float opacity\n\n    vec2 imagecoord \x3d mod(v_pos_a, 1.0);\n    vec2 pos \x3d mix(u_pattern_tl_a / u_texsize, u_pattern_br_a / u_texsize, imagecoord);\n    vec4 color1 \x3d texture2D(u_image, pos);\n\n    vec2 imagecoord_b \x3d mod(v_pos_b, 1.0);\n    vec2 pos2 \x3d mix(u_pattern_tl_b / u_texsize, u_pattern_br_b / u_texsize, imagecoord_b);\n    vec4 color2 \x3d texture2D(u_image, pos2);\n\n    // find distance to outline for alpha interpolation\n\n    float dist \x3d length(v_pos - gl_FragCoord.xy);\n    float alpha \x3d 1.0 - smoothstep(0.0, 1.0, dist);\n\n\n    gl_FragColor \x3d mix(color1, color2, u_mix) * alpha * opacity;\n\n#ifdef OVERDRAW_INSPECTOR\n    gl_FragColor \x3d vec4(1.0);\n#endif\n}\n",
vertexSource:"uniform mat4 u_matrix;\nuniform vec2 u_world;\nuniform vec2 u_pattern_size_a;\nuniform vec2 u_pattern_size_b;\nuniform vec2 u_pixel_coord_upper;\nuniform vec2 u_pixel_coord_lower;\nuniform float u_scale_a;\nuniform float u_scale_b;\nuniform float u_tile_units_to_pixels;\n\nattribute vec2 a_pos;\n\nvarying vec2 v_pos_a;\nvarying vec2 v_pos_b;\nvarying vec2 v_pos;\n\n#pragma mapbox: define lowp float opacity\n\nvoid main() {\n    #pragma mapbox: initialize lowp float opacity\n\n    gl_Position \x3d u_matrix * vec4(a_pos, 0, 1);\n\n    v_pos_a \x3d get_pattern_pos(u_pixel_coord_upper, u_pixel_coord_lower, u_scale_a * u_pattern_size_a, u_tile_units_to_pixels, a_pos);\n    v_pos_b \x3d get_pattern_pos(u_pixel_coord_upper, u_pixel_coord_lower, u_scale_b * u_pattern_size_b, u_tile_units_to_pixels, a_pos);\n\n    v_pos \x3d (gl_Position.xy / gl_Position.w + 1.0) / 2.0 * u_world;\n}\n"},
fillPattern:{fragmentSource:"uniform vec2 u_pattern_tl_a;\nuniform vec2 u_pattern_br_a;\nuniform vec2 u_pattern_tl_b;\nuniform vec2 u_pattern_br_b;\nuniform vec2 u_texsize;\nuniform float u_mix;\n\nuniform sampler2D u_image;\n\nvarying vec2 v_pos_a;\nvarying vec2 v_pos_b;\n\n#pragma mapbox: define lowp float opacity\n\nvoid main() {\n    #pragma mapbox: initialize lowp float opacity\n\n    vec2 imagecoord \x3d mod(v_pos_a, 1.0);\n    vec2 pos \x3d mix(u_pattern_tl_a / u_texsize, u_pattern_br_a / u_texsize, imagecoord);\n    vec4 color1 \x3d texture2D(u_image, pos);\n\n    vec2 imagecoord_b \x3d mod(v_pos_b, 1.0);\n    vec2 pos2 \x3d mix(u_pattern_tl_b / u_texsize, u_pattern_br_b / u_texsize, imagecoord_b);\n    vec4 color2 \x3d texture2D(u_image, pos2);\n\n    gl_FragColor \x3d mix(color1, color2, u_mix) * opacity;\n\n#ifdef OVERDRAW_INSPECTOR\n    gl_FragColor \x3d vec4(1.0);\n#endif\n}\n",
vertexSource:"uniform mat4 u_matrix;\nuniform vec2 u_pattern_size_a;\nuniform vec2 u_pattern_size_b;\nuniform vec2 u_pixel_coord_upper;\nuniform vec2 u_pixel_coord_lower;\nuniform float u_scale_a;\nuniform float u_scale_b;\nuniform float u_tile_units_to_pixels;\n\nattribute vec2 a_pos;\n\nvarying vec2 v_pos_a;\nvarying vec2 v_pos_b;\n\n#pragma mapbox: define lowp float opacity\n\nvoid main() {\n    #pragma mapbox: initialize lowp float opacity\n\n    gl_Position \x3d u_matrix * vec4(a_pos, 0, 1);\n\n    v_pos_a \x3d get_pattern_pos(u_pixel_coord_upper, u_pixel_coord_lower, u_scale_a * u_pattern_size_a, u_tile_units_to_pixels, a_pos);\n    v_pos_b \x3d get_pattern_pos(u_pixel_coord_upper, u_pixel_coord_lower, u_scale_b * u_pattern_size_b, u_tile_units_to_pixels, a_pos);\n}\n"},
fillExtrusion:{fragmentSource:"varying vec4 v_color;\n#pragma mapbox: define lowp float base\n#pragma mapbox: define lowp float height\n#pragma mapbox: define highp vec4 color\n\nvoid main() {\n    #pragma mapbox: initialize lowp float base\n    #pragma mapbox: initialize lowp float height\n    #pragma mapbox: initialize highp vec4 color\n\n    gl_FragColor \x3d v_color;\n\n#ifdef OVERDRAW_INSPECTOR\n    gl_FragColor \x3d vec4(1.0);\n#endif\n}\n",vertexSource:"uniform mat4 u_matrix;\nuniform vec3 u_lightcolor;\nuniform lowp vec3 u_lightpos;\nuniform lowp float u_lightintensity;\n\nattribute vec2 a_pos;\nattribute vec4 a_normal_ed;\n\nvarying vec4 v_color;\n\n#pragma mapbox: define lowp float base\n#pragma mapbox: define lowp float height\n\n#pragma mapbox: define highp vec4 color\n\nvoid main() {\n    #pragma mapbox: initialize lowp float base\n    #pragma mapbox: initialize lowp float height\n    #pragma mapbox: initialize highp vec4 color\n\n    vec3 normal \x3d a_normal_ed.xyz;\n\n    base \x3d max(0.0, base);\n    height \x3d max(0.0, height);\n\n    float t \x3d mod(normal.x, 2.0);\n\n    gl_Position \x3d u_matrix * vec4(a_pos, t \x3e 0.0 ? height : base, 1);\n\n    // Relative luminance (how dark/bright is the surface color?)\n    float colorvalue \x3d color.r * 0.2126 + color.g * 0.7152 + color.b * 0.0722;\n\n    v_color \x3d vec4(0.0, 0.0, 0.0, 1.0);\n\n    // Add slight ambient lighting so no extrusions are totally black\n    vec4 ambientlight \x3d vec4(0.03, 0.03, 0.03, 1.0);\n    color +\x3d ambientlight;\n\n    // Calculate cos(theta), where theta is the angle between surface normal and diffuse light ray\n    float directional \x3d clamp(dot(normal / 16384.0, u_lightpos), 0.0, 1.0);\n\n    // Adjust directional so that\n    // the range of values for highlight/shading is narrower\n    // with lower light intensity\n    // and with lighter/brighter surface colors\n    directional \x3d mix((1.0 - u_lightintensity), max((1.0 - colorvalue + u_lightintensity), 1.0), directional);\n\n    // Add gradient along z axis of side surfaces\n    if (normal.y !\x3d 0.0) {\n        directional *\x3d clamp((t + base) * pow(height / 150.0, 0.5), mix(0.7, 0.98, 1.0 - u_lightintensity), 1.0);\n    }\n\n    // Assign final color based on surface + ambient light color, diffuse light directional, and light color\n    // with lower bounds adjusted to hue of light\n    // so that shading is tinted with the complementary (opposite) color to the light color\n    v_color.r +\x3d clamp(color.r * directional * u_lightcolor.r, mix(0.0, 0.3, 1.0 - u_lightcolor.r), 1.0);\n    v_color.g +\x3d clamp(color.g * directional * u_lightcolor.g, mix(0.0, 0.3, 1.0 - u_lightcolor.g), 1.0);\n    v_color.b +\x3d clamp(color.b * directional * u_lightcolor.b, mix(0.0, 0.3, 1.0 - u_lightcolor.b), 1.0);\n}\n"},
fillExtrusionPattern:{fragmentSource:"uniform vec2 u_pattern_tl_a;\nuniform vec2 u_pattern_br_a;\nuniform vec2 u_pattern_tl_b;\nuniform vec2 u_pattern_br_b;\nuniform vec2 u_texsize;\nuniform float u_mix;\n\nuniform sampler2D u_image;\n\nvarying vec2 v_pos_a;\nvarying vec2 v_pos_b;\nvarying vec4 v_lighting;\n\n#pragma mapbox: define lowp float base\n#pragma mapbox: define lowp float height\n\nvoid main() {\n    #pragma mapbox: initialize lowp float base\n    #pragma mapbox: initialize lowp float height\n\n    vec2 imagecoord \x3d mod(v_pos_a, 1.0);\n    vec2 pos \x3d mix(u_pattern_tl_a / u_texsize, u_pattern_br_a / u_texsize, imagecoord);\n    vec4 color1 \x3d texture2D(u_image, pos);\n\n    vec2 imagecoord_b \x3d mod(v_pos_b, 1.0);\n    vec2 pos2 \x3d mix(u_pattern_tl_b / u_texsize, u_pattern_br_b / u_texsize, imagecoord_b);\n    vec4 color2 \x3d texture2D(u_image, pos2);\n\n    vec4 mixedColor \x3d mix(color1, color2, u_mix);\n\n    gl_FragColor \x3d mixedColor * v_lighting;\n\n#ifdef OVERDRAW_INSPECTOR\n    gl_FragColor \x3d vec4(1.0);\n#endif\n}\n",
vertexSource:"uniform mat4 u_matrix;\nuniform vec2 u_pattern_size_a;\nuniform vec2 u_pattern_size_b;\nuniform vec2 u_pixel_coord_upper;\nuniform vec2 u_pixel_coord_lower;\nuniform float u_scale_a;\nuniform float u_scale_b;\nuniform float u_tile_units_to_pixels;\nuniform float u_height_factor;\n\nuniform vec3 u_lightcolor;\nuniform lowp vec3 u_lightpos;\nuniform lowp float u_lightintensity;\n\nattribute vec2 a_pos;\nattribute vec4 a_normal_ed;\n\nvarying vec2 v_pos_a;\nvarying vec2 v_pos_b;\nvarying vec4 v_lighting;\nvarying float v_directional;\n\n#pragma mapbox: define lowp float base\n#pragma mapbox: define lowp float height\n\nvoid main() {\n    #pragma mapbox: initialize lowp float base\n    #pragma mapbox: initialize lowp float height\n\n    vec3 normal \x3d a_normal_ed.xyz;\n    float edgedistance \x3d a_normal_ed.w;\n\n    base \x3d max(0.0, base);\n    height \x3d max(0.0, height);\n\n    float t \x3d mod(normal.x, 2.0);\n    float z \x3d t \x3e 0.0 ? height : base;\n\n    gl_Position \x3d u_matrix * vec4(a_pos, z, 1);\n\n    vec2 pos \x3d normal.x \x3d\x3d 1.0 \x26\x26 normal.y \x3d\x3d 0.0 \x26\x26 normal.z \x3d\x3d 16384.0\n        ? a_pos // extrusion top\n        : vec2(edgedistance, z * u_height_factor); // extrusion side\n\n    v_pos_a \x3d get_pattern_pos(u_pixel_coord_upper, u_pixel_coord_lower, u_scale_a * u_pattern_size_a, u_tile_units_to_pixels, pos);\n    v_pos_b \x3d get_pattern_pos(u_pixel_coord_upper, u_pixel_coord_lower, u_scale_b * u_pattern_size_b, u_tile_units_to_pixels, pos);\n\n    v_lighting \x3d vec4(0.0, 0.0, 0.0, 1.0);\n    float directional \x3d clamp(dot(normal / 16383.0, u_lightpos), 0.0, 1.0);\n    directional \x3d mix((1.0 - u_lightintensity), max((0.5 + u_lightintensity), 1.0), directional);\n\n    if (normal.y !\x3d 0.0) {\n        directional *\x3d clamp((t + base) * pow(height / 150.0, 0.5), mix(0.7, 0.98, 1.0 - u_lightintensity), 1.0);\n    }\n\n    v_lighting.rgb +\x3d clamp(directional * u_lightcolor, mix(vec3(0.0), vec3(0.3), 1.0 - u_lightcolor), vec3(1.0));\n}\n"},
extrusionTexture:{fragmentSource:"uniform sampler2D u_image;\nuniform float u_opacity;\nvarying vec2 v_pos;\n\nvoid main() {\n    gl_FragColor \x3d texture2D(u_image, v_pos) * u_opacity;\n\n#ifdef OVERDRAW_INSPECTOR\n    gl_FragColor \x3d vec4(0.0);\n#endif\n}\n",vertexSource:"uniform mat4 u_matrix;\nuniform vec2 u_world;\nattribute vec2 a_pos;\nvarying vec2 v_pos;\n\nvoid main() {\n    gl_Position \x3d u_matrix * vec4(a_pos * u_world, 0, 1);\n\n    v_pos.x \x3d a_pos.x;\n    v_pos.y \x3d 1.0 - a_pos.y;\n}\n"},
hillshadePrepare:{fragmentSource:"#ifdef GL_ES\nprecision highp float;\n#endif\n\nuniform sampler2D u_image;\nvarying vec2 v_pos;\nuniform vec2 u_dimension;\nuniform float u_zoom;\nuniform float u_maxzoom;\n\nfloat getElevation(vec2 coord, float bias) {\n    // Convert encoded elevation value to meters\n    vec4 data \x3d texture2D(u_image, coord) * 255.0;\n    return (data.r + data.g * 256.0 + data.b * 256.0 * 256.0) / 4.0;\n}\n\nvoid main() {\n    vec2 epsilon \x3d 1.0 / u_dimension;\n\n    // queried pixels:\n    // +-----------+\n    // |   |   |   |\n    // | a | b | c |\n    // |   |   |   |\n    // +-----------+\n    // |   |   |   |\n    // | d | e | f |\n    // |   |   |   |\n    // +-----------+\n    // |   |   |   |\n    // | g | h | i |\n    // |   |   |   |\n    // +-----------+\n\n    float a \x3d getElevation(v_pos + vec2(-epsilon.x, -epsilon.y), 0.0);\n    float b \x3d getElevation(v_pos + vec2(0, -epsilon.y), 0.0);\n    float c \x3d getElevation(v_pos + vec2(epsilon.x, -epsilon.y), 0.0);\n    float d \x3d getElevation(v_pos + vec2(-epsilon.x, 0), 0.0);\n    float e \x3d getElevation(v_pos, 0.0);\n    float f \x3d getElevation(v_pos + vec2(epsilon.x, 0), 0.0);\n    float g \x3d getElevation(v_pos + vec2(-epsilon.x, epsilon.y), 0.0);\n    float h \x3d getElevation(v_pos + vec2(0, epsilon.y), 0.0);\n    float i \x3d getElevation(v_pos + vec2(epsilon.x, epsilon.y), 0.0);\n\n    // here we divide the x and y slopes by 8 * pixel size\n    // where pixel size (aka meters/pixel) is:\n    // circumference of the world / (pixels per tile * number of tiles)\n    // which is equivalent to: 8 * 40075016.6855785 / (512 * pow(2, u_zoom))\n    // which can be reduced to: pow(2, 19.25619978527 - u_zoom)\n    // we want to vertically exaggerate the hillshading though, because otherwise\n    // it is barely noticeable at low zooms. to do this, we multiply this by some\n    // scale factor pow(2, (u_zoom - u_maxzoom) * a) where a is an arbitrary value\n    // Here we use a\x3d0.3 which works out to the expression below. see \n    // nickidlugash's awesome breakdown for more info\n    // https://github.com/mapbox/mapbox-gl-js/pull/5286#discussion_r148419556\n    float exaggeration \x3d u_zoom \x3c 2.0 ? 0.4 : u_zoom \x3c 4.5 ? 0.35 : 0.3;\n\n    vec2 deriv \x3d vec2(\n        (c + f + f + i) - (a + d + d + g),\n        (g + h + h + i) - (a + b + b + c)\n    ) /  pow(2.0, (u_zoom - u_maxzoom) * exaggeration + 19.2562 - u_zoom);\n\n    gl_FragColor \x3d clamp(vec4(\n        deriv.x / 2.0 + 0.5,\n        deriv.y / 2.0 + 0.5,\n        1.0,\n        1.0), 0.0, 1.0);\n\n#ifdef OVERDRAW_INSPECTOR\n    gl_FragColor \x3d vec4(1.0);\n#endif\n}\n",
vertexSource:"uniform mat4 u_matrix;\n\nattribute vec2 a_pos;\nattribute vec2 a_texture_pos;\n\nvarying vec2 v_pos;\n\nvoid main() {\n    gl_Position \x3d u_matrix * vec4(a_pos, 0, 1);\n    v_pos \x3d (a_texture_pos / 8192.0) / 2.0 + 0.25;\n}\n"},hillshade:{fragmentSource:"uniform sampler2D u_image;\nvarying vec2 v_pos;\n\nuniform vec2 u_latrange;\nuniform vec2 u_light;\nuniform vec4 u_shadow;\nuniform vec4 u_highlight;\nuniform vec4 u_accent;\n\n#define PI 3.141592653589793\n\nvoid main() {\n    vec4 pixel \x3d texture2D(u_image, v_pos);\n\n    vec2 deriv \x3d ((pixel.rg * 2.0) - 1.0);\n\n    // We divide the slope by a scale factor based on the cosin of the pixel's approximate latitude\n    // to account for mercator projection distortion. see #4807 for details\n    float scaleFactor \x3d cos(radians((u_latrange[0] - u_latrange[1]) * (1.0 - v_pos.y) + u_latrange[1]));\n    // We also multiply the slope by an arbitrary z-factor of 1.25\n    float slope \x3d atan(1.25 * length(deriv) / scaleFactor);\n    float aspect \x3d deriv.x !\x3d 0.0 ? atan(deriv.y, -deriv.x) : PI / 2.0 * (deriv.y \x3e 0.0 ? 1.0 : -1.0);\n\n    float intensity \x3d u_light.x;\n    // We add PI to make this property match the global light object, which adds PI/2 to the light's azimuthal\n    // position property to account for 0deg corresponding to north/the top of the viewport in the style spec\n    // and the original shader was written to accept (-illuminationDirection - 90) as the azimuthal.\n    float azimuth \x3d u_light.y + PI;\n\n    // We scale the slope exponentially based on intensity, using a calculation similar to\n    // the exponential interpolation function in the style spec:\n    // https://github.com/mapbox/mapbox-gl-js/blob/master/src/style-spec/expression/definitions/interpolate.js#L217-L228\n    // so that higher intensity values create more opaque hillshading.\n    float base \x3d 1.875 - intensity * 1.75;\n    float maxValue \x3d 0.5 * PI;\n    float scaledSlope \x3d intensity !\x3d 0.5 ? ((pow(base, slope) - 1.0) / (pow(base, maxValue) - 1.0)) * maxValue : slope;\n\n    // The accent color is calculated with the cosine of the slope while the shade color is calculated with the sine\n    // so that the accent color's rate of change eases in while the shade color's eases out.\n    float accent \x3d cos(scaledSlope);\n    // We multiply both the accent and shade color by a clamped intensity value\n    // so that intensities \x3e\x3d 0.5 do not additionally affect the color values\n    // while intensity values \x3c 0.5 make the overall color more transparent.\n    vec4 accent_color \x3d (1.0 - accent) * u_accent * clamp(intensity * 2.0, 0.0, 1.0);\n    float shade \x3d abs(mod((aspect + azimuth) / PI + 0.5, 2.0) - 1.0);\n    vec4 shade_color \x3d mix(u_shadow, u_highlight, shade) * sin(scaledSlope) * clamp(intensity * 2.0, 0.0, 1.0);\n    gl_FragColor \x3d accent_color * (1.0 - shade_color.a) + shade_color;\n\n#ifdef OVERDRAW_INSPECTOR\n    gl_FragColor \x3d vec4(1.0);\n#endif\n}\n",
vertexSource:"uniform mat4 u_matrix;\n\nattribute vec2 a_pos;\nattribute vec2 a_texture_pos;\n\nvarying vec2 v_pos;\n\nvoid main() {\n    gl_Position \x3d u_matrix * vec4(a_pos, 0, 1);\n    v_pos \x3d a_texture_pos / 8192.0;\n}\n"},line:{fragmentSource:"#pragma mapbox: define highp vec4 color\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\n\nvarying vec2 v_width2;\nvarying vec2 v_normal;\nvarying float v_gamma_scale;\n\nvoid main() {\n    #pragma mapbox: initialize highp vec4 color\n    #pragma mapbox: initialize lowp float blur\n    #pragma mapbox: initialize lowp float opacity\n\n    // Calculate the distance of the pixel from the line in pixels.\n    float dist \x3d length(v_normal) * v_width2.s;\n\n    // Calculate the antialiasing fade factor. This is either when fading in\n    // the line in case of an offset line (v_width2.t) or when fading out\n    // (v_width2.s)\n    float blur2 \x3d (blur + 1.0 / DEVICE_PIXEL_RATIO) * v_gamma_scale;\n    float alpha \x3d clamp(min(dist - (v_width2.t - blur2), v_width2.s - dist) / blur2, 0.0, 1.0);\n\n    gl_FragColor \x3d color * (alpha * opacity);\n\n#ifdef OVERDRAW_INSPECTOR\n    gl_FragColor \x3d vec4(1.0);\n#endif\n}\n",
vertexSource:"\n\n// the distance over which the line edge fades out.\n// Retina devices need a smaller distance to avoid aliasing.\n#define ANTIALIASING 1.0 / DEVICE_PIXEL_RATIO / 2.0\n\n// floor(127 / 2) \x3d\x3d 63.0\n// the maximum allowed miter limit is 2.0 at the moment. the extrude normal is\n// stored in a byte (-128..127). we scale regular normals up to length 63, but\n// there are also \"special\" normals that have a bigger length (of up to 126 in\n// this case).\n// #define scale 63.0\n#define scale 0.015873016\n\nattribute vec4 a_pos_normal;\nattribute vec4 a_data;\n\nuniform mat4 u_matrix;\nuniform mediump float u_ratio;\nuniform vec2 u_gl_units_to_pixels;\n\nvarying vec2 v_normal;\nvarying vec2 v_width2;\nvarying float v_gamma_scale;\nvarying highp float v_linesofar;\n\n#pragma mapbox: define highp vec4 color\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define mediump float gapwidth\n#pragma mapbox: define lowp float offset\n#pragma mapbox: define mediump float width\n\nvoid main() {\n    #pragma mapbox: initialize highp vec4 color\n    #pragma mapbox: initialize lowp float blur\n    #pragma mapbox: initialize lowp float opacity\n    #pragma mapbox: initialize mediump float gapwidth\n    #pragma mapbox: initialize lowp float offset\n    #pragma mapbox: initialize mediump float width\n\n    vec2 a_extrude \x3d a_data.xy - 128.0;\n    float a_direction \x3d mod(a_data.z, 4.0) - 1.0;\n\n    v_linesofar \x3d (floor(a_data.z / 4.0) + a_data.w * 64.0) * 2.0;\n\n    vec2 pos \x3d a_pos_normal.xy;\n\n    // x is 1 if it's a round cap, 0 otherwise\n    // y is 1 if the normal points up, and -1 if it points down\n    mediump vec2 normal \x3d a_pos_normal.zw;\n    v_normal \x3d normal;\n\n    // these transformations used to be applied in the JS and native code bases.\n    // moved them into the shader for clarity and simplicity.\n    gapwidth \x3d gapwidth / 2.0;\n    float halfwidth \x3d width / 2.0;\n    offset \x3d -1.0 * offset;\n\n    float inset \x3d gapwidth + (gapwidth \x3e 0.0 ? ANTIALIASING : 0.0);\n    float outset \x3d gapwidth + halfwidth * (gapwidth \x3e 0.0 ? 2.0 : 1.0) + ANTIALIASING;\n\n    // Scale the extrusion vector down to a normal and then up by the line width\n    // of this vertex.\n    mediump vec2 dist \x3d outset * a_extrude * scale;\n\n    // Calculate the offset when drawing a line that is to the side of the actual line.\n    // We do this by creating a vector that points towards the extrude, but rotate\n    // it when we're drawing round end points (a_direction \x3d -1 or 1) since their\n    // extrude vector points in another direction.\n    mediump float u \x3d 0.5 * a_direction;\n    mediump float t \x3d 1.0 - abs(u);\n    mediump vec2 offset2 \x3d offset * a_extrude * scale * normal.y * mat2(t, -u, u, t);\n\n    vec4 projected_extrude \x3d u_matrix * vec4(dist / u_ratio, 0.0, 0.0);\n    gl_Position \x3d u_matrix * vec4(pos + offset2 / u_ratio, 0.0, 1.0) + projected_extrude;\n\n    // calculate how much the perspective view squishes or stretches the extrude\n    float extrude_length_without_perspective \x3d length(dist);\n    float extrude_length_with_perspective \x3d length(projected_extrude.xy / gl_Position.w * u_gl_units_to_pixels);\n    v_gamma_scale \x3d extrude_length_without_perspective / extrude_length_with_perspective;\n\n    v_width2 \x3d vec2(outset, inset);\n}\n"},
lineGradient:{fragmentSource:"\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\n\nuniform sampler2D u_image;\n\nvarying vec2 v_width2;\nvarying vec2 v_normal;\nvarying float v_gamma_scale;\nvarying highp float v_lineprogress;\n\nvoid main() {\n    #pragma mapbox: initialize lowp float blur\n    #pragma mapbox: initialize lowp float opacity\n\n    // Calculate the distance of the pixel from the line in pixels.\n    float dist \x3d length(v_normal) * v_width2.s;\n\n    // Calculate the antialiasing fade factor. This is either when fading in\n    // the line in case of an offset line (v_width2.t) or when fading out\n    // (v_width2.s)\n    float blur2 \x3d (blur + 1.0 / DEVICE_PIXEL_RATIO) * v_gamma_scale;\n    float alpha \x3d clamp(min(dist - (v_width2.t - blur2), v_width2.s - dist) / blur2, 0.0, 1.0);\n\n    // For gradient lines, v_lineprogress is the ratio along the entire line,\n    // scaled to [0, 2^15), and the gradient ramp is stored in a texture.\n    vec4 color \x3d texture2D(u_image, vec2(v_lineprogress, 0.5));\n\n    gl_FragColor \x3d color * (alpha * opacity);\n\n#ifdef OVERDRAW_INSPECTOR\n    gl_FragColor \x3d vec4(1.0);\n#endif\n}\n",
vertexSource:"\n// the attribute conveying progress along a line is scaled to [0, 2^15)\n#define MAX_LINE_DISTANCE 32767.0\n\n// the distance over which the line edge fades out.\n// Retina devices need a smaller distance to avoid aliasing.\n#define ANTIALIASING 1.0 / DEVICE_PIXEL_RATIO / 2.0\n\n// floor(127 / 2) \x3d\x3d 63.0\n// the maximum allowed miter limit is 2.0 at the moment. the extrude normal is\n// stored in a byte (-128..127). we scale regular normals up to length 63, but\n// there are also \"special\" normals that have a bigger length (of up to 126 in\n// this case).\n// #define scale 63.0\n#define scale 0.015873016\n\nattribute vec4 a_pos_normal;\nattribute vec4 a_data;\n\nuniform mat4 u_matrix;\nuniform mediump float u_ratio;\nuniform vec2 u_gl_units_to_pixels;\n\nvarying vec2 v_normal;\nvarying vec2 v_width2;\nvarying float v_gamma_scale;\nvarying highp float v_lineprogress;\n\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define mediump float gapwidth\n#pragma mapbox: define lowp float offset\n#pragma mapbox: define mediump float width\n\nvoid main() {\n    #pragma mapbox: initialize lowp float blur\n    #pragma mapbox: initialize lowp float opacity\n    #pragma mapbox: initialize mediump float gapwidth\n    #pragma mapbox: initialize lowp float offset\n    #pragma mapbox: initialize mediump float width\n\n    vec2 a_extrude \x3d a_data.xy - 128.0;\n    float a_direction \x3d mod(a_data.z, 4.0) - 1.0;\n\n    v_lineprogress \x3d (floor(a_data.z / 4.0) + a_data.w * 64.0) * 2.0 / MAX_LINE_DISTANCE;\n\n    vec2 pos \x3d a_pos_normal.xy;\n\n    // x is 1 if it's a round cap, 0 otherwise\n    // y is 1 if the normal points up, and -1 if it points down\n    mediump vec2 normal \x3d a_pos_normal.zw;\n    v_normal \x3d normal;\n\n    // these transformations used to be applied in the JS and native code bases.\n    // moved them into the shader for clarity and simplicity.\n    gapwidth \x3d gapwidth / 2.0;\n    float halfwidth \x3d width / 2.0;\n    offset \x3d -1.0 * offset;\n\n    float inset \x3d gapwidth + (gapwidth \x3e 0.0 ? ANTIALIASING : 0.0);\n    float outset \x3d gapwidth + halfwidth * (gapwidth \x3e 0.0 ? 2.0 : 1.0) + ANTIALIASING;\n\n    // Scale the extrusion vector down to a normal and then up by the line width\n    // of this vertex.\n    mediump vec2 dist \x3d outset * a_extrude * scale;\n\n    // Calculate the offset when drawing a line that is to the side of the actual line.\n    // We do this by creating a vector that points towards the extrude, but rotate\n    // it when we're drawing round end points (a_direction \x3d -1 or 1) since their\n    // extrude vector points in another direction.\n    mediump float u \x3d 0.5 * a_direction;\n    mediump float t \x3d 1.0 - abs(u);\n    mediump vec2 offset2 \x3d offset * a_extrude * scale * normal.y * mat2(t, -u, u, t);\n\n    vec4 projected_extrude \x3d u_matrix * vec4(dist / u_ratio, 0.0, 0.0);\n    gl_Position \x3d u_matrix * vec4(pos + offset2 / u_ratio, 0.0, 1.0) + projected_extrude;\n\n    // calculate how much the perspective view squishes or stretches the extrude\n    float extrude_length_without_perspective \x3d length(dist);\n    float extrude_length_with_perspective \x3d length(projected_extrude.xy / gl_Position.w * u_gl_units_to_pixels);\n    v_gamma_scale \x3d extrude_length_without_perspective / extrude_length_with_perspective;\n\n    v_width2 \x3d vec2(outset, inset);\n}\n"},
linePattern:{fragmentSource:"uniform vec2 u_pattern_size_a;\nuniform vec2 u_pattern_size_b;\nuniform vec2 u_pattern_tl_a;\nuniform vec2 u_pattern_br_a;\nuniform vec2 u_pattern_tl_b;\nuniform vec2 u_pattern_br_b;\nuniform vec2 u_texsize;\nuniform float u_fade;\n\nuniform sampler2D u_image;\n\nvarying vec2 v_normal;\nvarying vec2 v_width2;\nvarying float v_linesofar;\nvarying float v_gamma_scale;\n\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\n\nvoid main() {\n    #pragma mapbox: initialize lowp float blur\n    #pragma mapbox: initialize lowp float opacity\n\n    // Calculate the distance of the pixel from the line in pixels.\n    float dist \x3d length(v_normal) * v_width2.s;\n\n    // Calculate the antialiasing fade factor. This is either when fading in\n    // the line in case of an offset line (v_width2.t) or when fading out\n    // (v_width2.s)\n    float blur2 \x3d (blur + 1.0 / DEVICE_PIXEL_RATIO) * v_gamma_scale;\n    float alpha \x3d clamp(min(dist - (v_width2.t - blur2), v_width2.s - dist) / blur2, 0.0, 1.0);\n\n    float x_a \x3d mod(v_linesofar / u_pattern_size_a.x, 1.0);\n    float x_b \x3d mod(v_linesofar / u_pattern_size_b.x, 1.0);\n\n    // v_normal.y is 0 at the midpoint of the line, -1 at the lower edge, 1 at the upper edge\n    // we clamp the line width outset to be between 0 and half the pattern height plus padding (2.0)\n    // to ensure we don't sample outside the designated symbol on the sprite sheet.\n    // 0.5 is added to shift the component to be bounded between 0 and 1 for interpolation of\n    // the texture coordinate\n    float y_a \x3d 0.5 + (v_normal.y * clamp(v_width2.s, 0.0, (u_pattern_size_a.y + 2.0) / 2.0) / u_pattern_size_a.y);\n    float y_b \x3d 0.5 + (v_normal.y * clamp(v_width2.s, 0.0, (u_pattern_size_b.y + 2.0) / 2.0) / u_pattern_size_b.y);\n    vec2 pos_a \x3d mix(u_pattern_tl_a / u_texsize, u_pattern_br_a / u_texsize, vec2(x_a, y_a));\n    vec2 pos_b \x3d mix(u_pattern_tl_b / u_texsize, u_pattern_br_b / u_texsize, vec2(x_b, y_b));\n\n    vec4 color \x3d mix(texture2D(u_image, pos_a), texture2D(u_image, pos_b), u_fade);\n\n    gl_FragColor \x3d color * alpha * opacity;\n\n#ifdef OVERDRAW_INSPECTOR\n    gl_FragColor \x3d vec4(1.0);\n#endif\n}\n",
vertexSource:"// floor(127 / 2) \x3d\x3d 63.0\n// the maximum allowed miter limit is 2.0 at the moment. the extrude normal is\n// stored in a byte (-128..127). we scale regular normals up to length 63, but\n// there are also \"special\" normals that have a bigger length (of up to 126 in\n// this case).\n// #define scale 63.0\n#define scale 0.015873016\n\n// We scale the distance before adding it to the buffers so that we can store\n// long distances for long segments. Use this value to unscale the distance.\n#define LINE_DISTANCE_SCALE 2.0\n\n// the distance over which the line edge fades out.\n// Retina devices need a smaller distance to avoid aliasing.\n#define ANTIALIASING 1.0 / DEVICE_PIXEL_RATIO / 2.0\n\nattribute vec4 a_pos_normal;\nattribute vec4 a_data;\n\nuniform mat4 u_matrix;\nuniform mediump float u_ratio;\nuniform vec2 u_gl_units_to_pixels;\n\nvarying vec2 v_normal;\nvarying vec2 v_width2;\nvarying float v_linesofar;\nvarying float v_gamma_scale;\n\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp float offset\n#pragma mapbox: define mediump float gapwidth\n#pragma mapbox: define mediump float width\n\nvoid main() {\n    #pragma mapbox: initialize lowp float blur\n    #pragma mapbox: initialize lowp float opacity\n    #pragma mapbox: initialize lowp float offset\n    #pragma mapbox: initialize mediump float gapwidth\n    #pragma mapbox: initialize mediump float width\n\n    vec2 a_extrude \x3d a_data.xy - 128.0;\n    float a_direction \x3d mod(a_data.z, 4.0) - 1.0;\n    float a_linesofar \x3d (floor(a_data.z / 4.0) + a_data.w * 64.0) * LINE_DISTANCE_SCALE;\n\n    vec2 pos \x3d a_pos_normal.xy;\n\n    // x is 1 if it's a round cap, 0 otherwise\n    // y is 1 if the normal points up, and -1 if it points down\n    mediump vec2 normal \x3d a_pos_normal.zw;\n    v_normal \x3d normal;\n\n    // these transformations used to be applied in the JS and native code bases.\n    // moved them into the shader for clarity and simplicity.\n    gapwidth \x3d gapwidth / 2.0;\n    float halfwidth \x3d width / 2.0;\n    offset \x3d -1.0 * offset;\n\n    float inset \x3d gapwidth + (gapwidth \x3e 0.0 ? ANTIALIASING : 0.0);\n    float outset \x3d gapwidth + halfwidth * (gapwidth \x3e 0.0 ? 2.0 : 1.0) + ANTIALIASING;\n\n    // Scale the extrusion vector down to a normal and then up by the line width\n    // of this vertex.\n    mediump vec2 dist \x3d outset * a_extrude * scale;\n\n    // Calculate the offset when drawing a line that is to the side of the actual line.\n    // We do this by creating a vector that points towards the extrude, but rotate\n    // it when we're drawing round end points (a_direction \x3d -1 or 1) since their\n    // extrude vector points in another direction.\n    mediump float u \x3d 0.5 * a_direction;\n    mediump float t \x3d 1.0 - abs(u);\n    mediump vec2 offset2 \x3d offset * a_extrude * scale * normal.y * mat2(t, -u, u, t);\n\n    vec4 projected_extrude \x3d u_matrix * vec4(dist / u_ratio, 0.0, 0.0);\n    gl_Position \x3d u_matrix * vec4(pos + offset2 / u_ratio, 0.0, 1.0) + projected_extrude;\n\n    // calculate how much the perspective view squishes or stretches the extrude\n    float extrude_length_without_perspective \x3d length(dist);\n    float extrude_length_with_perspective \x3d length(projected_extrude.xy / gl_Position.w * u_gl_units_to_pixels);\n    v_gamma_scale \x3d extrude_length_without_perspective / extrude_length_with_perspective;\n\n    v_linesofar \x3d a_linesofar;\n    v_width2 \x3d vec2(outset, inset);\n}\n"},
lineSDF:{fragmentSource:"\nuniform sampler2D u_image;\nuniform float u_sdfgamma;\nuniform float u_mix;\n\nvarying vec2 v_normal;\nvarying vec2 v_width2;\nvarying vec2 v_tex_a;\nvarying vec2 v_tex_b;\nvarying float v_gamma_scale;\n\n#pragma mapbox: define highp vec4 color\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define mediump float width\n#pragma mapbox: define lowp float floorwidth\n\nvoid main() {\n    #pragma mapbox: initialize highp vec4 color\n    #pragma mapbox: initialize lowp float blur\n    #pragma mapbox: initialize lowp float opacity\n    #pragma mapbox: initialize mediump float width\n    #pragma mapbox: initialize lowp float floorwidth\n\n    // Calculate the distance of the pixel from the line in pixels.\n    float dist \x3d length(v_normal) * v_width2.s;\n\n    // Calculate the antialiasing fade factor. This is either when fading in\n    // the line in case of an offset line (v_width2.t) or when fading out\n    // (v_width2.s)\n    float blur2 \x3d (blur + 1.0 / DEVICE_PIXEL_RATIO) * v_gamma_scale;\n    float alpha \x3d clamp(min(dist - (v_width2.t - blur2), v_width2.s - dist) / blur2, 0.0, 1.0);\n\n    float sdfdist_a \x3d texture2D(u_image, v_tex_a).a;\n    float sdfdist_b \x3d texture2D(u_image, v_tex_b).a;\n    float sdfdist \x3d mix(sdfdist_a, sdfdist_b, u_mix);\n    alpha *\x3d smoothstep(0.5 - u_sdfgamma / floorwidth, 0.5 + u_sdfgamma / floorwidth, sdfdist);\n\n    gl_FragColor \x3d color * (alpha * opacity);\n\n#ifdef OVERDRAW_INSPECTOR\n    gl_FragColor \x3d vec4(1.0);\n#endif\n}\n",
vertexSource:"// floor(127 / 2) \x3d\x3d 63.0\n// the maximum allowed miter limit is 2.0 at the moment. the extrude normal is\n// stored in a byte (-128..127). we scale regular normals up to length 63, but\n// there are also \"special\" normals that have a bigger length (of up to 126 in\n// this case).\n// #define scale 63.0\n#define scale 0.015873016\n\n// We scale the distance before adding it to the buffers so that we can store\n// long distances for long segments. Use this value to unscale the distance.\n#define LINE_DISTANCE_SCALE 2.0\n\n// the distance over which the line edge fades out.\n// Retina devices need a smaller distance to avoid aliasing.\n#define ANTIALIASING 1.0 / DEVICE_PIXEL_RATIO / 2.0\n\nattribute vec4 a_pos_normal;\nattribute vec4 a_data;\n\nuniform mat4 u_matrix;\nuniform mediump float u_ratio;\nuniform vec2 u_patternscale_a;\nuniform float u_tex_y_a;\nuniform vec2 u_patternscale_b;\nuniform float u_tex_y_b;\nuniform vec2 u_gl_units_to_pixels;\n\nvarying vec2 v_normal;\nvarying vec2 v_width2;\nvarying vec2 v_tex_a;\nvarying vec2 v_tex_b;\nvarying float v_gamma_scale;\n\n#pragma mapbox: define highp vec4 color\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define mediump float gapwidth\n#pragma mapbox: define lowp float offset\n#pragma mapbox: define mediump float width\n#pragma mapbox: define lowp float floorwidth\n\nvoid main() {\n    #pragma mapbox: initialize highp vec4 color\n    #pragma mapbox: initialize lowp float blur\n    #pragma mapbox: initialize lowp float opacity\n    #pragma mapbox: initialize mediump float gapwidth\n    #pragma mapbox: initialize lowp float offset\n    #pragma mapbox: initialize mediump float width\n    #pragma mapbox: initialize lowp float floorwidth\n\n    vec2 a_extrude \x3d a_data.xy - 128.0;\n    float a_direction \x3d mod(a_data.z, 4.0) - 1.0;\n    float a_linesofar \x3d (floor(a_data.z / 4.0) + a_data.w * 64.0) * LINE_DISTANCE_SCALE;\n\n    vec2 pos \x3d a_pos_normal.xy;\n\n    // x is 1 if it's a round cap, 0 otherwise\n    // y is 1 if the normal points up, and -1 if it points down\n    mediump vec2 normal \x3d a_pos_normal.zw;\n    v_normal \x3d normal;\n\n    // these transformations used to be applied in the JS and native code bases.\n    // moved them into the shader for clarity and simplicity.\n    gapwidth \x3d gapwidth / 2.0;\n    float halfwidth \x3d width / 2.0;\n    offset \x3d -1.0 * offset;\n\n    float inset \x3d gapwidth + (gapwidth \x3e 0.0 ? ANTIALIASING : 0.0);\n    float outset \x3d gapwidth + halfwidth * (gapwidth \x3e 0.0 ? 2.0 : 1.0) + ANTIALIASING;\n\n    // Scale the extrusion vector down to a normal and then up by the line width\n    // of this vertex.\n    mediump vec2 dist \x3doutset * a_extrude * scale;\n\n    // Calculate the offset when drawing a line that is to the side of the actual line.\n    // We do this by creating a vector that points towards the extrude, but rotate\n    // it when we're drawing round end points (a_direction \x3d -1 or 1) since their\n    // extrude vector points in another direction.\n    mediump float u \x3d 0.5 * a_direction;\n    mediump float t \x3d 1.0 - abs(u);\n    mediump vec2 offset2 \x3d offset * a_extrude * scale * normal.y * mat2(t, -u, u, t);\n\n    vec4 projected_extrude \x3d u_matrix * vec4(dist / u_ratio, 0.0, 0.0);\n    gl_Position \x3d u_matrix * vec4(pos + offset2 / u_ratio, 0.0, 1.0) + projected_extrude;\n\n    // calculate how much the perspective view squishes or stretches the extrude\n    float extrude_length_without_perspective \x3d length(dist);\n    float extrude_length_with_perspective \x3d length(projected_extrude.xy / gl_Position.w * u_gl_units_to_pixels);\n    v_gamma_scale \x3d extrude_length_without_perspective / extrude_length_with_perspective;\n\n    v_tex_a \x3d vec2(a_linesofar * u_patternscale_a.x / floorwidth, normal.y * u_patternscale_a.y + u_tex_y_a);\n    v_tex_b \x3d vec2(a_linesofar * u_patternscale_b.x / floorwidth, normal.y * u_patternscale_b.y + u_tex_y_b);\n\n    v_width2 \x3d vec2(outset, inset);\n}\n"},
raster:{fragmentSource:"uniform float u_fade_t;\nuniform float u_opacity;\nuniform sampler2D u_image0;\nuniform sampler2D u_image1;\nvarying vec2 v_pos0;\nvarying vec2 v_pos1;\n\nuniform float u_brightness_low;\nuniform float u_brightness_high;\n\nuniform float u_saturation_factor;\nuniform float u_contrast_factor;\nuniform vec3 u_spin_weights;\n\nvoid main() {\n\n    // read and cross-fade colors from the main and parent tiles\n    vec4 color0 \x3d texture2D(u_image0, v_pos0);\n    vec4 color1 \x3d texture2D(u_image1, v_pos1);\n    if (color0.a \x3e 0.0) {\n        color0.rgb \x3d color0.rgb / color0.a;\n    }\n    if (color1.a \x3e 0.0) {\n        color1.rgb \x3d color1.rgb / color1.a;\n    }\n    vec4 color \x3d mix(color0, color1, u_fade_t);\n    color.a *\x3d u_opacity;\n    vec3 rgb \x3d color.rgb;\n\n    // spin\n    rgb \x3d vec3(\n        dot(rgb, u_spin_weights.xyz),\n        dot(rgb, u_spin_weights.zxy),\n        dot(rgb, u_spin_weights.yzx));\n\n    // saturation\n    float average \x3d (color.r + color.g + color.b) / 3.0;\n    rgb +\x3d (average - rgb) * u_saturation_factor;\n\n    // contrast\n    rgb \x3d (rgb - 0.5) * u_contrast_factor + 0.5;\n\n    // brightness\n    vec3 u_high_vec \x3d vec3(u_brightness_low, u_brightness_low, u_brightness_low);\n    vec3 u_low_vec \x3d vec3(u_brightness_high, u_brightness_high, u_brightness_high);\n\n    gl_FragColor \x3d vec4(mix(u_high_vec, u_low_vec, rgb) * color.a, color.a);\n\n#ifdef OVERDRAW_INSPECTOR\n    gl_FragColor \x3d vec4(1.0);\n#endif\n}\n",
vertexSource:"uniform mat4 u_matrix;\nuniform vec2 u_tl_parent;\nuniform float u_scale_parent;\nuniform float u_buffer_scale;\n\nattribute vec2 a_pos;\nattribute vec2 a_texture_pos;\n\nvarying vec2 v_pos0;\nvarying vec2 v_pos1;\n\nvoid main() {\n    gl_Position \x3d u_matrix * vec4(a_pos, 0, 1);\n    // We are using Int16 for texture position coordinates to give us enough precision for\n    // fractional coordinates. We use 8192 to scale the texture coordinates in the buffer\n    // as an arbitrarily high number to preserve adequate precision when rendering.\n    // This is also the same value as the EXTENT we are using for our tile buffer pos coordinates,\n    // so math for modifying either is consistent.\n    v_pos0 \x3d (((a_texture_pos / 8192.0) - 0.5) / u_buffer_scale ) + 0.5;\n    v_pos1 \x3d (v_pos0 * u_scale_parent) + u_tl_parent;\n}\n"},
symbolIcon:{fragmentSource:"uniform sampler2D u_texture;\n\n#pragma mapbox: define lowp float opacity\n\nvarying vec2 v_tex;\nvarying float v_fade_opacity;\n\nvoid main() {\n    #pragma mapbox: initialize lowp float opacity\n\n    lowp float alpha \x3d opacity * v_fade_opacity;\n    gl_FragColor \x3d texture2D(u_texture, v_tex) * alpha;\n\n#ifdef OVERDRAW_INSPECTOR\n    gl_FragColor \x3d vec4(1.0);\n#endif\n}\n",vertexSource:"const float PI \x3d 3.141592653589793;\n\nattribute vec4 a_pos_offset;\nattribute vec4 a_data;\nattribute vec3 a_projected_pos;\nattribute float a_fade_opacity;\n\nuniform bool u_is_size_zoom_constant;\nuniform bool u_is_size_feature_constant;\nuniform highp float u_size_t; // used to interpolate between zoom stops when size is a composite function\nuniform highp float u_size; // used when size is both zoom and feature constant\nuniform highp float u_camera_to_center_distance;\nuniform highp float u_pitch;\nuniform bool u_rotate_symbol;\nuniform highp float u_aspect_ratio;\nuniform float u_fade_change;\n\n#pragma mapbox: define lowp float opacity\n\nuniform mat4 u_matrix;\nuniform mat4 u_label_plane_matrix;\nuniform mat4 u_gl_coord_matrix;\n\nuniform bool u_is_text;\nuniform bool u_pitch_with_map;\n\nuniform vec2 u_texsize;\n\nvarying vec2 v_tex;\nvarying float v_fade_opacity;\n\nvoid main() {\n    #pragma mapbox: initialize lowp float opacity\n\n    vec2 a_pos \x3d a_pos_offset.xy;\n    vec2 a_offset \x3d a_pos_offset.zw;\n\n    vec2 a_tex \x3d a_data.xy;\n    vec2 a_size \x3d a_data.zw;\n\n    highp float segment_angle \x3d -a_projected_pos[2];\n\n    float size;\n    if (!u_is_size_zoom_constant \x26\x26 !u_is_size_feature_constant) {\n        size \x3d mix(a_size[0], a_size[1], u_size_t) / 10.0;\n    } else if (u_is_size_zoom_constant \x26\x26 !u_is_size_feature_constant) {\n        size \x3d a_size[0] / 10.0;\n    } else if (!u_is_size_zoom_constant \x26\x26 u_is_size_feature_constant) {\n        size \x3d u_size;\n    } else {\n        size \x3d u_size;\n    }\n\n    vec4 projectedPoint \x3d u_matrix * vec4(a_pos, 0, 1);\n    highp float camera_to_anchor_distance \x3d projectedPoint.w;\n    // See comments in symbol_sdf.vertex\n    highp float distance_ratio \x3d u_pitch_with_map ?\n        camera_to_anchor_distance / u_camera_to_center_distance :\n        u_camera_to_center_distance / camera_to_anchor_distance;\n    highp float perspective_ratio \x3d clamp(\n            0.5 + 0.5 * distance_ratio,\n            0.0, // Prevents oversized near-field symbols in pitched/overzoomed tiles\n            4.0);\n\n    size *\x3d perspective_ratio;\n\n    float fontScale \x3d u_is_text ? size / 24.0 : size;\n\n    highp float symbol_rotation \x3d 0.0;\n    if (u_rotate_symbol) {\n        // See comments in symbol_sdf.vertex\n        vec4 offsetProjectedPoint \x3d u_matrix * vec4(a_pos + vec2(1, 0), 0, 1);\n\n        vec2 a \x3d projectedPoint.xy / projectedPoint.w;\n        vec2 b \x3d offsetProjectedPoint.xy / offsetProjectedPoint.w;\n\n        symbol_rotation \x3d atan((b.y - a.y) / u_aspect_ratio, b.x - a.x);\n    }\n\n    highp float angle_sin \x3d sin(segment_angle + symbol_rotation);\n    highp float angle_cos \x3d cos(segment_angle + symbol_rotation);\n    mat2 rotation_matrix \x3d mat2(angle_cos, -1.0 * angle_sin, angle_sin, angle_cos);\n\n    vec4 projected_pos \x3d u_label_plane_matrix * vec4(a_projected_pos.xy, 0.0, 1.0);\n    gl_Position \x3d u_gl_coord_matrix * vec4(projected_pos.xy / projected_pos.w + rotation_matrix * (a_offset / 32.0 * fontScale), 0.0, 1.0);\n\n    v_tex \x3d a_tex / u_texsize;\n    vec2 fade_opacity \x3d unpack_opacity(a_fade_opacity);\n    float fade_change \x3d fade_opacity[1] \x3e 0.5 ? u_fade_change : -u_fade_change;\n    v_fade_opacity \x3d max(0.0, min(1.0, fade_opacity[0] + fade_change));\n}\n"},
symbolSDF:{fragmentSource:"#define SDF_PX 8.0\n#define EDGE_GAMMA 0.105/DEVICE_PIXEL_RATIO\n\nuniform bool u_is_halo;\n#pragma mapbox: define highp vec4 fill_color\n#pragma mapbox: define highp vec4 halo_color\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp float halo_width\n#pragma mapbox: define lowp float halo_blur\n\nuniform sampler2D u_texture;\nuniform highp float u_gamma_scale;\nuniform bool u_is_text;\n\nvarying vec2 v_data0;\nvarying vec3 v_data1;\n\nvoid main() {\n    #pragma mapbox: initialize highp vec4 fill_color\n    #pragma mapbox: initialize highp vec4 halo_color\n    #pragma mapbox: initialize lowp float opacity\n    #pragma mapbox: initialize lowp float halo_width\n    #pragma mapbox: initialize lowp float halo_blur\n\n    vec2 tex \x3d v_data0.xy;\n    float gamma_scale \x3d v_data1.x;\n    float size \x3d v_data1.y;\n    float fade_opacity \x3d v_data1[2];\n\n    float fontScale \x3d u_is_text ? size / 24.0 : size;\n\n    lowp vec4 color \x3d fill_color;\n    highp float gamma \x3d EDGE_GAMMA / (fontScale * u_gamma_scale);\n    lowp float buff \x3d (256.0 - 64.0) / 256.0;\n    if (u_is_halo) {\n        color \x3d halo_color;\n        gamma \x3d (halo_blur * 1.19 / SDF_PX + EDGE_GAMMA) / (fontScale * u_gamma_scale);\n        buff \x3d (6.0 - halo_width / fontScale) / SDF_PX;\n    }\n\n    lowp float dist \x3d texture2D(u_texture, tex).a;\n    highp float gamma_scaled \x3d gamma * gamma_scale;\n    highp float alpha \x3d smoothstep(buff - gamma_scaled, buff + gamma_scaled, dist);\n\n    gl_FragColor \x3d color * (alpha * opacity * fade_opacity);\n\n#ifdef OVERDRAW_INSPECTOR\n    gl_FragColor \x3d vec4(1.0);\n#endif\n}\n",
vertexSource:"const float PI \x3d 3.141592653589793;\n\nattribute vec4 a_pos_offset;\nattribute vec4 a_data;\nattribute vec3 a_projected_pos;\nattribute float a_fade_opacity;\n\n// contents of a_size vary based on the type of property value\n// used for {text,icon}-size.\n// For constants, a_size is disabled.\n// For source functions, we bind only one value per vertex: the value of {text,icon}-size evaluated for the current feature.\n// For composite functions:\n// [ text-size(lowerZoomStop, feature),\n//   text-size(upperZoomStop, feature) ]\nuniform bool u_is_size_zoom_constant;\nuniform bool u_is_size_feature_constant;\nuniform highp float u_size_t; // used to interpolate between zoom stops when size is a composite function\nuniform highp float u_size; // used when size is both zoom and feature constant\n\n#pragma mapbox: define highp vec4 fill_color\n#pragma mapbox: define highp vec4 halo_color\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp float halo_width\n#pragma mapbox: define lowp float halo_blur\n\nuniform mat4 u_matrix;\nuniform mat4 u_label_plane_matrix;\nuniform mat4 u_gl_coord_matrix;\n\nuniform bool u_is_text;\nuniform bool u_pitch_with_map;\nuniform highp float u_pitch;\nuniform bool u_rotate_symbol;\nuniform highp float u_aspect_ratio;\nuniform highp float u_camera_to_center_distance;\nuniform float u_fade_change;\n\nuniform vec2 u_texsize;\n\nvarying vec2 v_data0;\nvarying vec3 v_data1;\n\nvoid main() {\n    #pragma mapbox: initialize highp vec4 fill_color\n    #pragma mapbox: initialize highp vec4 halo_color\n    #pragma mapbox: initialize lowp float opacity\n    #pragma mapbox: initialize lowp float halo_width\n    #pragma mapbox: initialize lowp float halo_blur\n\n    vec2 a_pos \x3d a_pos_offset.xy;\n    vec2 a_offset \x3d a_pos_offset.zw;\n\n    vec2 a_tex \x3d a_data.xy;\n    vec2 a_size \x3d a_data.zw;\n\n    highp float segment_angle \x3d -a_projected_pos[2];\n    float size;\n\n    if (!u_is_size_zoom_constant \x26\x26 !u_is_size_feature_constant) {\n        size \x3d mix(a_size[0], a_size[1], u_size_t) / 10.0;\n    } else if (u_is_size_zoom_constant \x26\x26 !u_is_size_feature_constant) {\n        size \x3d a_size[0] / 10.0;\n    } else if (!u_is_size_zoom_constant \x26\x26 u_is_size_feature_constant) {\n        size \x3d u_size;\n    } else {\n        size \x3d u_size;\n    }\n\n    vec4 projectedPoint \x3d u_matrix * vec4(a_pos, 0, 1);\n    highp float camera_to_anchor_distance \x3d projectedPoint.w;\n    // If the label is pitched with the map, layout is done in pitched space,\n    // which makes labels in the distance smaller relative to viewport space.\n    // We counteract part of that effect by multiplying by the perspective ratio.\n    // If the label isn't pitched with the map, we do layout in viewport space,\n    // which makes labels in the distance larger relative to the features around\n    // them. We counteract part of that effect by dividing by the perspective ratio.\n    highp float distance_ratio \x3d u_pitch_with_map ?\n        camera_to_anchor_distance / u_camera_to_center_distance :\n        u_camera_to_center_distance / camera_to_anchor_distance;\n    highp float perspective_ratio \x3d clamp(\n        0.5 + 0.5 * distance_ratio,\n        0.0, // Prevents oversized near-field symbols in pitched/overzoomed tiles\n        4.0);\n\n    size *\x3d perspective_ratio;\n\n    float fontScale \x3d u_is_text ? size / 24.0 : size;\n\n    highp float symbol_rotation \x3d 0.0;\n    if (u_rotate_symbol) {\n        // Point labels with 'rotation-alignment: map' are horizontal with respect to tile units\n        // To figure out that angle in projected space, we draw a short horizontal line in tile\n        // space, project it, and measure its angle in projected space.\n        vec4 offsetProjectedPoint \x3d u_matrix * vec4(a_pos + vec2(1, 0), 0, 1);\n\n        vec2 a \x3d projectedPoint.xy / projectedPoint.w;\n        vec2 b \x3d offsetProjectedPoint.xy / offsetProjectedPoint.w;\n\n        symbol_rotation \x3d atan((b.y - a.y) / u_aspect_ratio, b.x - a.x);\n    }\n\n    highp float angle_sin \x3d sin(segment_angle + symbol_rotation);\n    highp float angle_cos \x3d cos(segment_angle + symbol_rotation);\n    mat2 rotation_matrix \x3d mat2(angle_cos, -1.0 * angle_sin, angle_sin, angle_cos);\n\n    vec4 projected_pos \x3d u_label_plane_matrix * vec4(a_projected_pos.xy, 0.0, 1.0);\n    gl_Position \x3d u_gl_coord_matrix * vec4(projected_pos.xy / projected_pos.w + rotation_matrix * (a_offset / 32.0 * fontScale), 0.0, 1.0);\n    float gamma_scale \x3d gl_Position.w;\n\n    vec2 tex \x3d a_tex / u_texsize;\n    vec2 fade_opacity \x3d unpack_opacity(a_fade_opacity);\n    float fade_change \x3d fade_opacity[1] \x3e 0.5 ? u_fade_change : -u_fade_change;\n    float interpolated_fade_opacity \x3d max(0.0, min(1.0, fade_opacity[0] + fade_change));\n\n    v_data0 \x3d vec2(tex.x, tex.y);\n    v_data1 \x3d vec3(gamma_scale, size, interpolated_fade_opacity);\n}\n"}},
Pe=/#pragma mapbox: ([\w]+) ([\w]+) ([\w]+) ([\w]+)/g,Ef=function(a){a=ce[a];var b={};a.fragmentSource=a.fragmentSource.replace(Pe,function(a,c,d,e,g){return b[g]=!0,"define"===c?"\n#ifndef HAS_UNIFORM_u_"+g+"\nvarying "+d+" "+e+" "+g+";\n#else\nuniform "+d+" "+e+" u_"+g+";\n#endif\n":"\n#ifdef HAS_UNIFORM_u_"+g+"\n    "+d+" "+e+" "+g+" \x3d u_"+g+";\n#endif\n"});a.vertexSource=a.vertexSource.replace(Pe,function(a,c,d,e,g){a="float"===e?"vec2":"vec4";return b[g]?"define"===c?"\n#ifndef HAS_UNIFORM_u_"+
g+"\nuniform lowp float a_"+g+"_t;\nattribute "+d+" "+a+" a_"+g+";\nvarying "+d+" "+e+" "+g+";\n#else\nuniform "+d+" "+e+" u_"+g+";\n#endif\n":"\n#ifndef HAS_UNIFORM_u_"+g+"\n    "+g+" \x3d unpack_mix_"+a+"(a_"+g+", a_"+g+"_t);\n#else\n    "+d+" "+e+" "+g+" \x3d u_"+g+";\n#endif\n":"define"===c?"\n#ifndef HAS_UNIFORM_u_"+g+"\nuniform lowp float a_"+g+"_t;\nattribute "+d+" "+a+" a_"+g+";\n#else\nuniform "+d+" "+e+" u_"+g+";\n#endif\n":"\n#ifndef HAS_UNIFORM_u_"+g+"\n    "+d+" "+e+" "+g+" \x3d unpack_mix_"+
a+"(a_"+g+", a_"+g+"_t);\n#else\n    "+d+" "+e+" "+g+" \x3d u_"+g+";\n#endif\n"})},Vc;for(Vc in ce)Ef(Vc);var zc=function(a,b,c,d){a=a.gl;this.program=a.createProgram();var e=c.defines().concat("#define DEVICE_PIXEL_RATIO "+oa.devicePixelRatio.toFixed(1));d&&e.push("#define OVERDRAW_INSPECTOR;");d=e.concat(ce.prelude.fragmentSource,b.fragmentSource).join("\n");b=e.concat(ce.prelude.vertexSource,b.vertexSource).join("\n");e=a.createShader(a.FRAGMENT_SHADER);a.shaderSource(e,d);a.compileShader(e);a.attachShader(this.program,
e);d=a.createShader(a.VERTEX_SHADER);a.shaderSource(d,b);a.compileShader(d);a.attachShader(this.program,d);c=c.layoutAttributes||[];for(b=0;b<c.length;b++)a.bindAttribLocation(this.program,b,c[b].name);a.linkProgram(this.program);this.numAttributes=a.getProgramParameter(this.program,a.ACTIVE_ATTRIBUTES);this.attributes={};this.uniforms={};for(c=0;c<this.numAttributes;c++)(b=a.getActiveAttrib(this.program,c))&&(this.attributes[b.name]=a.getAttribLocation(this.program,b.name));c=a.getProgramParameter(this.program,
a.ACTIVE_UNIFORMS);for(b=0;b<c;b++)(d=a.getActiveUniform(this.program,b))&&(this.uniforms[d.name]=a.getUniformLocation(this.program,d.name))};zc.prototype.draw=function(a,b,c,d,e,g,f,h,k){var n,t=a.gl,m=(n={},n[t.LINES]=2,n[t.TRIANGLES]=3,n)[b];n=0;for(g=g.get();n<g.length;n+=1){var v=g[n],r=v.vaos||(v.vaos={});(r[c]||(r[c]=new vb)).bind(a,this,d,f?f.getPaintVertexBuffers():[],e,v.vertexOffset,h,k);t.drawElements(b,v.primitiveLength*m,t.UNSIGNED_SHORT,v.primitiveOffset*m*2)}};var Dc=a.mat4.identity(new Float32Array(16)),
Zb=a.default$19.layout,Wb=function(a,b){if(!a)return!1;var c=b.imageManager.getPattern(a.from);a=b.imageManager.getPattern(a.to);return!c||!a},Qe=function(a,b,c){var d=b.context,e=d.gl,g=b.imageManager.getPattern(a.from),f=b.imageManager.getPattern(a.to);e.uniform1i(c.uniforms.u_image,0);e.uniform2fv(c.uniforms.u_pattern_tl_a,g.tl);e.uniform2fv(c.uniforms.u_pattern_br_a,g.br);e.uniform2fv(c.uniforms.u_pattern_tl_b,f.tl);e.uniform2fv(c.uniforms.u_pattern_br_b,f.br);var h=b.imageManager.getPixelSize();
e.uniform2fv(c.uniforms.u_texsize,[h.width,h.height]);e.uniform1f(c.uniforms.u_mix,a.t);e.uniform2fv(c.uniforms.u_pattern_size_a,g.displaySize);e.uniform2fv(c.uniforms.u_pattern_size_b,f.displaySize);e.uniform1f(c.uniforms.u_scale_a,a.fromScale);e.uniform1f(c.uniforms.u_scale_b,a.toScale);d.activeTexture.set(e.TEXTURE0);b.imageManager.bind(b.context)},Pd=function(a,b,c){var d=b.context.gl;d.uniform1f(c.uniforms.u_tile_units_to_pixels,1/ia(a,1,b.transform.tileZoom));var e=Math.pow(2,a.tileID.overscaledZ);
b=a.tileSize*Math.pow(2,b.transform.tileZoom)/e;e=b*(a.tileID.canonical.x+a.tileID.wrap*e);a=b*a.tileID.canonical.y;d.uniform2f(c.uniforms.u_pixel_coord_upper,e>>16,a>>16);d.uniform2f(c.uniforms.u_pixel_coord_lower,65535&e,65535&a)},Gd=a.default$20.mat3,jf=a.default$20.mat4,Be=a.default$20.vec3,Jc={" ":[16,[]],"!":[10,[5,21,5,7,-1,-1,5,2,4,1,5,0,6,1,5,2]],'"':[16,[4,21,4,14,-1,-1,12,21,12,14]],"#":[21,[11,25,4,-7,-1,-1,17,25,10,-7,-1,-1,4,12,18,12,-1,-1,3,6,17,6]],$:[20,[8,25,8,-4,-1,-1,12,25,12,
-4,-1,-1,17,18,15,20,12,21,8,21,5,20,3,18,3,16,4,14,5,13,7,12,13,10,15,9,16,8,17,6,17,3,15,1,12,0,8,0,5,1,3,3]],"%":[24,[21,21,3,0,-1,-1,8,21,10,19,10,17,9,15,7,14,5,14,3,16,3,18,4,20,6,21,8,21,10,20,13,19,16,19,19,20,21,21,-1,-1,17,7,15,6,14,4,14,2,16,0,18,0,20,1,21,3,21,5,19,7,17,7]],"\x26":[26,[23,12,23,13,22,14,21,14,20,13,19,11,17,6,15,3,13,1,11,0,7,0,5,1,4,2,3,4,3,6,4,8,5,9,12,13,13,14,14,16,14,18,13,20,11,21,9,20,8,18,8,16,9,13,11,10,16,3,18,1,20,0,22,0,23,1,23,2]],"'":[10,[5,19,4,20,5,21,
6,20,6,18,5,16,4,15]],"(":[14,[11,25,9,23,7,20,5,16,4,11,4,7,5,2,7,-2,9,-5,11,-7]],")":[14,[3,25,5,23,7,20,9,16,10,11,10,7,9,2,7,-2,5,-5,3,-7]],"*":[16,[8,21,8,9,-1,-1,3,18,13,12,-1,-1,13,18,3,12]],"+":[26,[13,18,13,0,-1,-1,4,9,22,9]],",":[10,[6,1,5,0,4,1,5,2,6,1,6,-1,5,-3,4,-4]],"-":[26,[4,9,22,9]],".":[10,[5,2,4,1,5,0,6,1,5,2]],"/":[22,[20,25,2,-7]],0:[20,[9,21,6,20,4,17,3,12,3,9,4,4,6,1,9,0,11,0,14,1,16,4,17,9,17,12,16,17,14,20,11,21,9,21]],1:[20,[6,17,8,18,11,21,11,0]],2:[20,[4,16,4,17,5,19,6,
20,8,21,12,21,14,20,15,19,16,17,16,15,15,13,13,10,3,0,17,0]],3:[20,[5,21,16,21,10,13,13,13,15,12,16,11,17,8,17,6,16,3,14,1,11,0,8,0,5,1,4,2,3,4]],4:[20,[13,21,3,7,18,7,-1,-1,13,21,13,0]],5:[20,[15,21,5,21,4,12,5,13,8,14,11,14,14,13,16,11,17,8,17,6,16,3,14,1,11,0,8,0,5,1,4,2,3,4]],6:[20,[16,18,15,20,12,21,10,21,7,20,5,17,4,12,4,7,5,3,7,1,10,0,11,0,14,1,16,3,17,6,17,7,16,10,14,12,11,13,10,13,7,12,5,10,4,7]],7:[20,[17,21,7,0,-1,-1,3,21,17,21]],8:[20,[8,21,5,20,4,18,4,16,5,14,7,13,11,12,14,11,16,9,17,
7,17,4,16,2,15,1,12,0,8,0,5,1,4,2,3,4,3,7,4,9,6,11,9,12,13,13,15,14,16,16,16,18,15,20,12,21,8,21]],9:[20,[16,14,15,11,13,9,10,8,9,8,6,9,4,11,3,14,3,15,4,18,6,20,9,21,10,21,13,20,15,18,16,14,16,9,15,4,13,1,10,0,8,0,5,1,4,3]],":":[10,[5,14,4,13,5,12,6,13,5,14,-1,-1,5,2,4,1,5,0,6,1,5,2]],";":[10,[5,14,4,13,5,12,6,13,5,14,-1,-1,6,1,5,0,4,1,5,2,6,1,6,-1,5,-3,4,-4]],"\x3c":[24,[20,18,4,9,20,0]],"\x3d":[26,[4,12,22,12,-1,-1,4,6,22,6]],"\x3e":[24,[4,18,20,9,4,0]],"?":[18,[3,16,3,17,4,19,5,20,7,21,11,21,13,
20,14,19,15,17,15,15,14,13,13,12,9,10,9,7,-1,-1,9,2,8,1,9,0,10,1,9,2]],"@":[27,[18,13,17,15,15,16,12,16,10,15,9,14,8,11,8,8,9,6,11,5,14,5,16,6,17,8,-1,-1,12,16,10,14,9,11,9,8,10,6,11,5,-1,-1,18,16,17,8,17,6,19,5,21,5,23,7,24,10,24,12,23,15,22,17,20,19,18,20,15,21,12,21,9,20,7,19,5,17,4,15,3,12,3,9,4,6,5,4,7,2,9,1,12,0,15,0,18,1,20,2,21,3,-1,-1,19,16,18,8,18,6,19,5]],A:[18,[9,21,1,0,-1,-1,9,21,17,0,-1,-1,4,7,14,7]],B:[21,[4,21,4,0,-1,-1,4,21,13,21,16,20,17,19,18,17,18,15,17,13,16,12,13,11,-1,-1,4,
11,13,11,16,10,17,9,18,7,18,4,17,2,16,1,13,0,4,0]],C:[21,[18,16,17,18,15,20,13,21,9,21,7,20,5,18,4,16,3,13,3,8,4,5,5,3,7,1,9,0,13,0,15,1,17,3,18,5]],D:[21,[4,21,4,0,-1,-1,4,21,11,21,14,20,16,18,17,16,18,13,18,8,17,5,16,3,14,1,11,0,4,0]],E:[19,[4,21,4,0,-1,-1,4,21,17,21,-1,-1,4,11,12,11,-1,-1,4,0,17,0]],F:[18,[4,21,4,0,-1,-1,4,21,17,21,-1,-1,4,11,12,11]],G:[21,[18,16,17,18,15,20,13,21,9,21,7,20,5,18,4,16,3,13,3,8,4,5,5,3,7,1,9,0,13,0,15,1,17,3,18,5,18,8,-1,-1,13,8,18,8]],H:[22,[4,21,4,0,-1,-1,18,21,
18,0,-1,-1,4,11,18,11]],I:[8,[4,21,4,0]],J:[16,[12,21,12,5,11,2,10,1,8,0,6,0,4,1,3,2,2,5,2,7]],K:[21,[4,21,4,0,-1,-1,18,21,4,7,-1,-1,9,12,18,0]],L:[17,[4,21,4,0,-1,-1,4,0,16,0]],M:[24,[4,21,4,0,-1,-1,4,21,12,0,-1,-1,20,21,12,0,-1,-1,20,21,20,0]],N:[22,[4,21,4,0,-1,-1,4,21,18,0,-1,-1,18,21,18,0]],O:[22,[9,21,7,20,5,18,4,16,3,13,3,8,4,5,5,3,7,1,9,0,13,0,15,1,17,3,18,5,19,8,19,13,18,16,17,18,15,20,13,21,9,21]],P:[21,[4,21,4,0,-1,-1,4,21,13,21,16,20,17,19,18,17,18,14,17,12,16,11,13,10,4,10]],Q:[22,[9,
21,7,20,5,18,4,16,3,13,3,8,4,5,5,3,7,1,9,0,13,0,15,1,17,3,18,5,19,8,19,13,18,16,17,18,15,20,13,21,9,21,-1,-1,12,4,18,-2]],R:[21,[4,21,4,0,-1,-1,4,21,13,21,16,20,17,19,18,17,18,15,17,13,16,12,13,11,4,11,-1,-1,11,11,18,0]],S:[20,[17,18,15,20,12,21,8,21,5,20,3,18,3,16,4,14,5,13,7,12,13,10,15,9,16,8,17,6,17,3,15,1,12,0,8,0,5,1,3,3]],T:[16,[8,21,8,0,-1,-1,1,21,15,21]],U:[22,[4,21,4,6,5,3,7,1,10,0,12,0,15,1,17,3,18,6,18,21]],V:[18,[1,21,9,0,-1,-1,17,21,9,0]],W:[24,[2,21,7,0,-1,-1,12,21,7,0,-1,-1,12,21,
17,0,-1,-1,22,21,17,0]],X:[20,[3,21,17,0,-1,-1,17,21,3,0]],Y:[18,[1,21,9,11,9,0,-1,-1,17,21,9,11]],Z:[20,[17,21,3,0,-1,-1,3,21,17,21,-1,-1,3,0,17,0]],"[":[14,[4,25,4,-7,-1,-1,5,25,5,-7,-1,-1,4,25,11,25,-1,-1,4,-7,11,-7]],"\\":[14,[0,21,14,-3]],"]":[14,[9,25,9,-7,-1,-1,10,25,10,-7,-1,-1,3,25,10,25,-1,-1,3,-7,10,-7]],"^":[16,[6,15,8,18,10,15,-1,-1,3,12,8,17,13,12,-1,-1,8,17,8,0]],_:[16,[0,-2,16,-2]],"`":[10,[6,21,5,20,4,18,4,16,5,15,6,16,5,17]],a:[19,[15,14,15,0,-1,-1,15,11,13,13,11,14,8,14,6,13,4,
11,3,8,3,6,4,3,6,1,8,0,11,0,13,1,15,3]],b:[19,[4,21,4,0,-1,-1,4,11,6,13,8,14,11,14,13,13,15,11,16,8,16,6,15,3,13,1,11,0,8,0,6,1,4,3]],c:[18,[15,11,13,13,11,14,8,14,6,13,4,11,3,8,3,6,4,3,6,1,8,0,11,0,13,1,15,3]],d:[19,[15,21,15,0,-1,-1,15,11,13,13,11,14,8,14,6,13,4,11,3,8,3,6,4,3,6,1,8,0,11,0,13,1,15,3]],e:[18,[3,8,15,8,15,10,14,12,13,13,11,14,8,14,6,13,4,11,3,8,3,6,4,3,6,1,8,0,11,0,13,1,15,3]],f:[12,[10,21,8,21,6,20,5,17,5,0,-1,-1,2,14,9,14]],g:[19,[15,14,15,-2,14,-5,13,-6,11,-7,8,-7,6,-6,-1,-1,15,
11,13,13,11,14,8,14,6,13,4,11,3,8,3,6,4,3,6,1,8,0,11,0,13,1,15,3]],h:[19,[4,21,4,0,-1,-1,4,10,7,13,9,14,12,14,14,13,15,10,15,0]],i:[8,[3,21,4,20,5,21,4,22,3,21,-1,-1,4,14,4,0]],j:[10,[5,21,6,20,7,21,6,22,5,21,-1,-1,6,14,6,-3,5,-6,3,-7,1,-7]],k:[17,[4,21,4,0,-1,-1,14,14,4,4,-1,-1,8,8,15,0]],l:[8,[4,21,4,0]],m:[30,[4,14,4,0,-1,-1,4,10,7,13,9,14,12,14,14,13,15,10,15,0,-1,-1,15,10,18,13,20,14,23,14,25,13,26,10,26,0]],n:[19,[4,14,4,0,-1,-1,4,10,7,13,9,14,12,14,14,13,15,10,15,0]],o:[19,[8,14,6,13,4,11,
3,8,3,6,4,3,6,1,8,0,11,0,13,1,15,3,16,6,16,8,15,11,13,13,11,14,8,14]],p:[19,[4,14,4,-7,-1,-1,4,11,6,13,8,14,11,14,13,13,15,11,16,8,16,6,15,3,13,1,11,0,8,0,6,1,4,3]],q:[19,[15,14,15,-7,-1,-1,15,11,13,13,11,14,8,14,6,13,4,11,3,8,3,6,4,3,6,1,8,0,11,0,13,1,15,3]],r:[13,[4,14,4,0,-1,-1,4,8,5,11,7,13,9,14,12,14]],s:[17,[14,11,13,13,10,14,7,14,4,13,3,11,4,9,6,8,11,7,13,6,14,4,14,3,13,1,10,0,7,0,4,1,3,3]],t:[12,[5,21,5,4,6,1,8,0,10,0,-1,-1,2,14,9,14]],u:[19,[4,14,4,4,5,1,7,0,10,0,12,1,15,4,-1,-1,15,14,15,
0]],v:[16,[2,14,8,0,-1,-1,14,14,8,0]],w:[22,[3,14,7,0,-1,-1,11,14,7,0,-1,-1,11,14,15,0,-1,-1,19,14,15,0]],x:[17,[3,14,14,0,-1,-1,14,14,3,0]],y:[16,[2,14,8,0,-1,-1,14,14,8,0,6,-4,4,-6,2,-7,1,-7]],z:[17,[14,14,3,0,-1,-1,3,14,14,14,-1,-1,3,0,14,0]],"{":[14,[9,25,7,24,6,23,5,21,5,19,6,17,7,16,8,14,8,12,6,10,-1,-1,7,24,6,22,6,20,7,18,8,17,9,15,9,13,8,11,4,9,8,7,9,5,9,3,8,1,7,0,6,-2,6,-4,7,-6,-1,-1,6,8,8,6,8,4,7,2,6,1,5,-1,5,-3,6,-5,7,-6,9,-7]],"|":[8,[4,25,4,-7]],"}":[14,[5,25,7,24,8,23,9,21,9,19,8,17,
7,16,6,14,6,12,8,10,-1,-1,7,24,8,22,8,20,7,18,6,17,5,15,5,13,6,11,10,9,6,7,5,5,5,3,6,1,7,0,8,-2,8,-4,7,-6,-1,-1,8,8,6,6,6,4,7,2,8,1,9,-1,9,-3,8,-5,7,-6,5,-7]],"~":[24,[3,6,3,8,4,11,6,12,8,12,10,11,14,8,16,7,18,7,20,8,21,10,-1,-1,3,8,4,10,6,11,8,11,10,10,14,7,16,6,18,6,20,7,21,10,21,12]]},de={symbol:function(a,b,c,d){if("translucent"===a.renderPass){var e=a.context;e.setStencilMode(Ma.disabled);e.setColorMode(a.colorModeForRenderPass());0!==c.paint.get("icon-opacity").constantOr(1)&&ha(a,b,c,d,!1,
c.paint.get("icon-translate"),c.paint.get("icon-translate-anchor"),c.layout.get("icon-rotation-alignment"),c.layout.get("icon-pitch-alignment"),c.layout.get("icon-keep-upright"));0!==c.paint.get("text-opacity").constantOr(1)&&ha(a,b,c,d,!0,c.paint.get("text-translate"),c.paint.get("text-translate-anchor"),c.layout.get("text-rotation-alignment"),c.layout.get("text-pitch-alignment"),c.layout.get("text-keep-upright"));b.map.showCollisionBoxes&&(qa(a,b,c,d,!1),qa(a,b,c,d,!0))}},circle:function(a,b,c,
d){if("translucent"===a.renderPass){var e=c.paint.get("circle-opacity"),g=c.paint.get("circle-stroke-width"),f=c.paint.get("circle-stroke-opacity");if(0!==e.constantOr(1)||0!==g.constantOr(1)&&0!==f.constantOr(1)){e=a.context;g=e.gl;e.setDepthMode(a.depthModeForSublayer(0,yb.ReadOnly));e.setStencilMode(Ma.disabled);e.setColorMode(a.colorModeForRenderPass());f=!0;for(var h=0;h<d.length;h++){var k=d[h],n=b.getTile(k),t=n.getBucket(c);if(t){var m=a.context.program.get(),v=t.programConfigurations.get(c.id),
r=a.useProgram("circle",v);((f||r.program!==m)&&(v.setUniforms(e,r,c.paint,{zoom:a.transform.zoom}),f=!1),g.uniform1f(r.uniforms.u_camera_to_center_distance,a.transform.cameraToCenterDistance),g.uniform1i(r.uniforms.u_scale_with_map,"map"===c.paint.get("circle-pitch-scale")?1:0),"map"===c.paint.get("circle-pitch-alignment"))?(g.uniform1i(r.uniforms.u_pitch_with_map,1),m=ia(n,1,a.transform.zoom),g.uniform2f(r.uniforms.u_extrude_scale,m,m)):(g.uniform1i(r.uniforms.u_pitch_with_map,0),g.uniform2fv(r.uniforms.u_extrude_scale,
a.transform.pixelsToGLUnits));g.uniformMatrix4fv(r.uniforms.u_matrix,!1,a.translatePosMatrix(k.posMatrix,n,c.paint.get("circle-translate"),c.paint.get("circle-translate-anchor")));r.draw(e,g.TRIANGLES,c.id,t.layoutVertexBuffer,t.indexBuffer,t.segments,v)}}}}},heatmap:function(b,c,d,e){if(0!==d.paint.get("heatmap-opacity"))if("offscreen"===b.renderPass){var g=b.context,f=g.gl;g.setDepthMode(b.depthModeForSublayer(0,yb.ReadOnly));g.setStencilMode(Ma.disabled);(function(a,b,c){var d=a.gl;a.activeTexture.set(d.TEXTURE1);
a.viewport.set([0,0,b.width/4,b.height/4]);var e=c.heatmapFbo;if(e)d.bindTexture(d.TEXTURE_2D,e.colorAttachment.get()),a.bindFramebuffer.set(e.framebuffer);else{var g=d.createTexture();d.bindTexture(d.TEXTURE_2D,g);d.texParameteri(d.TEXTURE_2D,d.TEXTURE_WRAP_S,d.CLAMP_TO_EDGE);d.texParameteri(d.TEXTURE_2D,d.TEXTURE_WRAP_T,d.CLAMP_TO_EDGE);d.texParameteri(d.TEXTURE_2D,d.TEXTURE_MIN_FILTER,d.LINEAR);d.texParameteri(d.TEXTURE_2D,d.TEXTURE_MAG_FILTER,d.LINEAR);e=c.heatmapFbo=a.createFramebuffer(b.width/
4,b.height/4);(function pf(a,b,c,d){var e=a.gl;e.texImage2D(e.TEXTURE_2D,0,e.RGBA,b.width/4,b.height/4,0,e.RGBA,a.extTextureHalfFloat?a.extTextureHalfFloat.HALF_FLOAT_OES:e.UNSIGNED_BYTE,null);d.colorAttachment.set(c);a.extTextureHalfFloat&&e.checkFramebufferStatus(e.FRAMEBUFFER)!==e.FRAMEBUFFER_COMPLETE&&(a.extTextureHalfFloat=null,d.colorAttachment.setDirty(),pf(a,b,c,d))})(a,b,g,e)}})(g,b,d);g.clear({color:a.default$6.transparent});g.setColorMode(new mc([f.ONE,f.ONE],a.default$6.transparent,[!0,
!0,!0,!0]));for(var h=!0,k=0;k<e.length;k++){var n=e[k];if(!c.hasRenderableParent(n)){var t=c.getTile(n),m=t.getBucket(d);if(m){var v=b.context.program.get(),r=m.programConfigurations.get(d.id),u=b.useProgram("heatmap",r),l=b.transform.zoom;(h||u.program!==v)&&(r.setUniforms(b.context,u,d.paint,{zoom:l}),h=!1);f.uniform1f(u.uniforms.u_extrude_scale,ia(t,1,l));f.uniform1f(u.uniforms.u_intensity,d.paint.get("heatmap-intensity"));f.uniformMatrix4fv(u.uniforms.u_matrix,!1,n.posMatrix);u.draw(g,f.TRIANGLES,
d.id,m.layoutVertexBuffer,m.indexBuffer,m.segments,r)}}}g.viewport.set([0,0,b.width,b.height])}else"translucent"===b.renderPass&&(b.context.setColorMode(b.colorModeForRenderPass()),function(b,c){var d=b.context,e=d.gl,g=c.heatmapFbo;g&&(d.activeTexture.set(e.TEXTURE0),e.bindTexture(e.TEXTURE_2D,g.colorAttachment.get()),d.activeTexture.set(e.TEXTURE1),(g=c.colorRampTexture)||(g=c.colorRampTexture=new pb(d,c.colorRamp,e.RGBA)),g.bind(e.LINEAR,e.CLAMP_TO_EDGE),d.setDepthMode(yb.disabled),d=b.useProgram("heatmapTexture"),
c=c.paint.get("heatmap-opacity"),e.uniform1f(d.uniforms.u_opacity,c),e.uniform1i(d.uniforms.u_image,0),e.uniform1i(d.uniforms.u_color_ramp,1),c=a.mat4.create(),a.mat4.ortho(c,0,b.width,b.height,0,0,1),e.uniformMatrix4fv(d.uniforms.u_matrix,!1,c),e.uniform2f(d.uniforms.u_world,e.drawingBufferWidth,e.drawingBufferHeight),b.viewportVAO.bind(b.context,d,b.viewportBuffer,[]),e.drawArrays(e.TRIANGLE_STRIP,0,4))}(b,d))},line:function(a,b,c,d){if("translucent"===a.renderPass&&0!==c.paint.get("line-opacity").constantOr(1)){var e=
a.context;e.setDepthMode(a.depthModeForSublayer(0,yb.ReadOnly));e.setColorMode(a.colorModeForRenderPass());var g;e=c.paint.get("line-dasharray")?"lineSDF":c.paint.get("line-pattern")?"linePattern":c.paint.get("line-gradient")?"lineGradient":"line";for(var f=!0,h=0;h<d.length;h+=1){var k=d[h],n=b.getTile(k),t=n.getBucket(c);if(t){var m=t.programConfigurations.get(c.id),v=a.context.program.get(),r=a.useProgram(e,m),u=f||r.program!==v,l=g!==n.tileID.overscaledZ;u&&m.setUniforms(a.context,r,c.paint,{zoom:a.transform.zoom});
a:{var p=v=f=g=void 0,y=a,q=n,B=c,A=u,D=l;u=y.context;l=u.gl;var C=B.paint.get("line-dasharray"),G=B.paint.get("line-pattern");if(A||D){D=1/ia(q,1,y.transform.tileZoom);if(C){p=y.lineAtlas.getDash(C.from,"round"===B.layout.get("line-cap"));v=y.lineAtlas.getDash(C.to,"round"===B.layout.get("line-cap"));var L=p.width*C.fromScale,E=v.width*C.toScale;l.uniform2f(r.uniforms.u_patternscale_a,D/L,-p.height/2);l.uniform2f(r.uniforms.u_patternscale_b,D/E,-v.height/2);l.uniform1f(r.uniforms.u_sdfgamma,y.lineAtlas.width/
(256*Math.min(L,E)*oa.devicePixelRatio)/2)}else if(G){if(f=y.imageManager.getPattern(G.from),g=y.imageManager.getPattern(G.to),!f||!g)break a;l.uniform2f(r.uniforms.u_pattern_size_a,f.displaySize[0]*G.fromScale/D,f.displaySize[1]);l.uniform2f(r.uniforms.u_pattern_size_b,g.displaySize[0]*G.toScale/D,g.displaySize[1]);D=y.imageManager.getPixelSize();l.uniform2fv(r.uniforms.u_texsize,[D.width,D.height])}l.uniform2f(r.uniforms.u_gl_units_to_pixels,1/y.transform.pixelsToGLUnits[0],1/y.transform.pixelsToGLUnits[1])}A&&
(C?(l.uniform1i(r.uniforms.u_image,0),u.activeTexture.set(l.TEXTURE0),y.lineAtlas.bind(u),l.uniform1f(r.uniforms.u_tex_y_a,p.y),l.uniform1f(r.uniforms.u_tex_y_b,v.y),l.uniform1f(r.uniforms.u_mix,C.t)):G&&(l.uniform1i(r.uniforms.u_image,0),u.activeTexture.set(l.TEXTURE0),y.imageManager.bind(u),l.uniform2fv(r.uniforms.u_pattern_tl_a,f.tl),l.uniform2fv(r.uniforms.u_pattern_br_a,f.br),l.uniform2fv(r.uniforms.u_pattern_tl_b,g.tl),l.uniform2fv(r.uniforms.u_pattern_br_b,g.br),l.uniform1f(r.uniforms.u_fade,
G.t)));u.setStencilMode(y.stencilModeForClipping(k));g=y.translatePosMatrix(k.posMatrix,q,B.paint.get("line-translate"),B.paint.get("line-translate-anchor"));if(l.uniformMatrix4fv(r.uniforms.u_matrix,!1,g),l.uniform1f(r.uniforms.u_ratio,1/ia(q,1,y.transform.zoom)),B.paint.get("line-gradient")){u.activeTexture.set(l.TEXTURE0);g=B.gradientTexture;if(!B.gradient)break a;g||(g=B.gradientTexture=new pb(u,B.gradient,l.RGBA));g.bind(l.LINEAR,l.CLAMP_TO_EDGE);l.uniform1i(r.uniforms.u_image,0)}r.draw(u,l.TRIANGLES,
B.id,t.layoutVertexBuffer,t.indexBuffer,t.segments,m)}g=n.tileID.overscaledZ;f=!1}}}},fill:function(b,c,d,e){var g=d.paint.get("fill-color"),f=d.paint.get("fill-opacity");if(0!==f.constantOr(1)){var h=b.context;h.setColorMode(b.colorModeForRenderPass());g=d.paint.get("fill-pattern")||1!==g.constantOr(a.default$6.transparent).a||1!==f.constantOr(0)?"translucent":"opaque";b.renderPass===g&&(h.setDepthMode(b.depthModeForSublayer(1,"opaque"===b.renderPass?yb.ReadWrite:yb.ReadOnly)),F(b,c,d,e,la));"translucent"===
b.renderPass&&d.paint.get("fill-antialias")&&(h.lineWidth.set(2),h.setDepthMode(b.depthModeForSublayer(d.getPaintProperty("fill-outline-color")?2:0,yb.ReadOnly)),F(b,c,d,e,Z))}},"fill-extrusion":function(b,c,d,e){if(0!==d.paint.get("fill-extrusion-opacity"))if("offscreen"===b.renderPass){!function(b,c){var d=b.context,e=d.gl,g=c.viewportFrame;if(b.depthRboNeedsClear&&b.setupOffscreenDepthRenderbuffer(),!g){var f=new pb(d,{width:b.width,height:b.height,data:null},e.RGBA);f.bind(e.LINEAR,e.CLAMP_TO_EDGE);
(g=c.viewportFrame=d.createFramebuffer(b.width,b.height)).colorAttachment.set(f.texture)}d.bindFramebuffer.set(g.framebuffer);g.depthAttachment.set(b.depthRbo);b.depthRboNeedsClear&&(d.clear({depth:1}),b.depthRboNeedsClear=!1);d.clear({color:a.default$6.transparent});d.setStencilMode(Ma.disabled);d.setDepthMode(new yb(e.LEQUAL,yb.ReadWrite,[0,1]));d.setColorMode(b.colorModeForRenderPass())}(b,d);for(var g=!0,f=0;f<e.length;f+=1){var h=e[f],k=c.getTile(h),n=k.getBucket(d);n&&(da(b,0,d,k,h,n,g),g=!1)}}else"translucent"===
b.renderPass&&function(a,b){var c=b.viewportFrame;if(c){var d=a.context,e=d.gl,g=a.useProgram("extrusionTexture");d.setStencilMode(Ma.disabled);d.setDepthMode(yb.disabled);d.setColorMode(a.colorModeForRenderPass());d.activeTexture.set(e.TEXTURE0);e.bindTexture(e.TEXTURE_2D,c.colorAttachment.get());e.uniform1f(g.uniforms.u_opacity,b.paint.get("fill-extrusion-opacity"));e.uniform1i(g.uniforms.u_image,0);b=jf.create();jf.ortho(b,0,a.width,a.height,0,0,1);e.uniformMatrix4fv(g.uniforms.u_matrix,!1,b);
e.uniform2f(g.uniforms.u_world,e.drawingBufferWidth,e.drawingBufferHeight);a.viewportVAO.bind(d,g,a.viewportBuffer,[]);e.drawArrays(e.TRIANGLE_STRIP,0,4)}}(b,d)},hillshade:function(b,c,d,e){if("offscreen"===b.renderPass||"translucent"===b.renderPass){var g=b.context,f=c.getSource().maxzoom;g.setDepthMode(b.depthModeForSublayer(0,yb.ReadOnly));g.setStencilMode(Ma.disabled);g.setColorMode(b.colorModeForRenderPass());for(var h=0;h<e.length;h+=1){var k=c.getTile(e[h]);if(k.needsHillshadePrepare&&"offscreen"===
b.renderPass){var n=b,t=f,m=n.context,v=m.gl;if(k.dem&&k.dem.level){var r=k.dem.level.dim,u=k.dem.getPixels();if(m.activeTexture.set(v.TEXTURE1),m.pixelStoreUnpackPremultiplyAlpha.set(!1),k.demTexture=k.demTexture||n.getTileTexture(k.tileSize),k.demTexture){var l=k.demTexture;l.update(u,{premultiply:!1});l.bind(v.NEAREST,v.CLAMP_TO_EDGE)}else k.demTexture=new pb(m,u,v.RGBA,{premultiply:!1}),k.demTexture.bind(v.NEAREST,v.CLAMP_TO_EDGE);m.activeTexture.set(v.TEXTURE0);u=k.fbo;u||(l=new pb(m,{width:r,
height:r,data:null},v.RGBA),l.bind(v.LINEAR,v.CLAMP_TO_EDGE),(u=k.fbo=m.createFramebuffer(r,r)).colorAttachment.set(l.texture));m.bindFramebuffer.set(u.framebuffer);m.viewport.set([0,0,r,r]);l=a.mat4.create();a.mat4.ortho(l,0,a.default$8,-a.default$8,0,0,1);a.mat4.translate(l,l,[0,-a.default$8,0]);u=n.useProgram("hillshadePrepare");v.uniformMatrix4fv(u.uniforms.u_matrix,!1,l);v.uniform1f(u.uniforms.u_zoom,k.tileID.overscaledZ);v.uniform2fv(u.uniforms.u_dimension,[2*r,2*r]);v.uniform1i(u.uniforms.u_image,
1);v.uniform1f(u.uniforms.u_maxzoom,t);t=n.rasterBoundsBuffer;n.rasterBoundsVAO.bind(m,u,t,[]);v.drawArrays(v.TRIANGLE_STRIP,0,t.length);k.needsHillshadePrepare=!1}}else"translucent"===b.renderPass&&K(b,k,d)}g.viewport.set([0,0,b.width,b.height])}},raster:function(a,b,c,d){if("translucent"===a.renderPass&&0!==c.paint.get("raster-opacity")){var e,g,f=a.context,h=f.gl,k=b.getSource(),n=a.useProgram("raster");f.setStencilMode(Ma.disabled);f.setColorMode(a.colorModeForRenderPass());h.uniform1f(n.uniforms.u_brightness_low,
c.paint.get("raster-brightness-min"));h.uniform1f(n.uniforms.u_brightness_high,c.paint.get("raster-brightness-max"));h.uniform1f(n.uniforms.u_saturation_factor,0<(e=c.paint.get("raster-saturation"))?1-1/(1.001-e):-e);h.uniform1f(n.uniforms.u_contrast_factor,0<(g=c.paint.get("raster-contrast"))?1/(1-g):1+g);h.uniform3fv(n.uniforms.u_spin_weights,function(a){a*=Math.PI/180;var b=Math.sin(a);a=Math.cos(a);return[(2*a+1)/3,(-Math.sqrt(3)*b-a+1)/3,(Math.sqrt(3)*b-a+1)/3]}(c.paint.get("raster-hue-rotate")));
h.uniform1f(n.uniforms.u_buffer_scale,1);h.uniform1i(n.uniforms.u_image0,0);h.uniform1i(n.uniforms.u_image1,1);e=d.length&&d[0].overscaledZ;for(g=0;g<d.length;g+=1){var t=d[g];f.setDepthMode(a.depthModeForSublayer(t.overscaledZ-e,1===c.paint.get("raster-opacity")?yb.ReadWrite:yb.ReadOnly,h.LESS));var m=b.getTile(t),v=a.transform.calculatePosMatrix(t.toUnwrapped(),!0);m.registerFadeDuration(c.paint.get("raster-fade-duration"));h.uniformMatrix4fv(n.uniforms.u_matrix,!1,v);t=b.findLoadedParent(t,0,{});
v=ja(m,t,b,c,a.transform);var r=void 0,u=void 0;(f.activeTexture.set(h.TEXTURE0),m.texture.bind(h.LINEAR,h.CLAMP_TO_EDGE,h.LINEAR_MIPMAP_NEAREST),f.activeTexture.set(h.TEXTURE1),t?(t.texture.bind(h.LINEAR,h.CLAMP_TO_EDGE,h.LINEAR_MIPMAP_NEAREST),r=Math.pow(2,t.tileID.overscaledZ-m.tileID.overscaledZ),u=[m.tileID.canonical.x*r%1,m.tileID.canonical.y*r%1]):m.texture.bind(h.LINEAR,h.CLAMP_TO_EDGE,h.LINEAR_MIPMAP_NEAREST),h.uniform2fv(n.uniforms.u_tl_parent,u||[0,0]),h.uniform1f(n.uniforms.u_scale_parent,
r||1),h.uniform1f(n.uniforms.u_fade_t,v.mix),h.uniform1f(n.uniforms.u_opacity,v.opacity*c.paint.get("raster-opacity")),k instanceof Nb)?(m=k.boundsBuffer,k.boundsVAO.bind(f,n,m,[]),h.drawArrays(h.TRIANGLE_STRIP,0,m.length)):m.maskedBoundsBuffer&&m.maskedIndexBuffer&&m.segments?n.draw(f,h.TRIANGLES,c.id,m.maskedBoundsBuffer,m.maskedIndexBuffer,m.segments):(m=a.rasterBoundsBuffer,a.rasterBoundsVAO.bind(f,n,m,[]),h.drawArrays(h.TRIANGLE_STRIP,0,m.length))}}},background:function(a,b,c){var d=c.paint.get("background-color"),
e=c.paint.get("background-opacity");if(0!==e){var g=a.context;b=g.gl;var f=a.transform,h=f.tileSize,k=(c=c.paint.get("background-pattern"))||1!==d.a||1!==e?"translucent":"opaque";if(a.renderPass===k){if(g.setStencilMode(Ma.disabled),g.setDepthMode(a.depthModeForSublayer(0,"opaque"===k?yb.ReadWrite:yb.ReadOnly)),g.setColorMode(a.colorModeForRenderPass()),c){if(Wb(c,a))return;k=a.useProgram("backgroundPattern");Qe(c,a,k);a.tileExtentPatternVAO.bind(g,k,a.tileExtentBuffer,[])}else k=a.useProgram("background"),
b.uniform4fv(k.uniforms.u_color,[d.r,d.g,d.b,d.a]),a.tileExtentVAO.bind(g,k,a.tileExtentBuffer,[]);b.uniform1f(k.uniforms.u_opacity,e);d=0;for(f=f.coveringTiles({tileSize:h});d<f.length;d+=1)e=f[d],c&&Pd({tileID:e,tileSize:h},a,k),b.uniformMatrix4fv(k.uniforms.u_matrix,!1,a.transform.calculatePosMatrix(e.toUnwrapped())),b.drawArrays(b.TRIANGLE_STRIP,0,a.tileExtentBuffer.length)}}},debug:function(b,c,d){for(var e=0;e<d.length;e++){var g=void 0,f=void 0,h,k,n,t=b,m=c,v=d[e],r=t.context,u=r.gl;r.lineWidth.set(1*
oa.devicePixelRatio);var l=v.posMatrix,p=t.useProgram("debug");r.setDepthMode(yb.disabled);r.setStencilMode(Ma.disabled);r.setColorMode(t.colorModeForRenderPass());u.uniformMatrix4fv(p.uniforms.u_matrix,!1,l);u.uniform4f(p.uniforms.u_color,1,0,0,1);t.debugVAO.bind(r,p,t.debugBuffer,[]);u.drawArrays(u.LINE_STRIP,0,t.debugBuffer.length);var y=v.toString(),q=50,B=5;B=B||1;var A=[];var D=0;for(n=y.length;D<n;D++)if(h=Jc[y[D]]){var C=null;var G=0;for(k=h[1].length;G<k;G+=2)-1===h[1][G]&&-1===h[1][G+1]?
C=null:(f=q+h[1][G]*B,g=200-h[1][G+1]*B,C&&A.push(C.x,C.y,f,g),C={x:f,y:g});q+=h[0]*B}C=new a.PosArray;for(g=0;g<A.length;g+=2)C.emplaceBack(A[g],A[g+1]);A=r.createVertexBuffer(C,be.members);(new vb).bind(r,p,A,[]);u.uniform4f(p.uniforms.u_color,1,1,1,1);m=m.getTile(v).tileSize;t=a.default$8/(Math.pow(2,t.transform.zoom-v.overscaledZ)*m);v=[[-1,-1],[-1,1],[1,-1],[1,1]];for(m=0;m<v.length;m++)r=v[m],u.uniformMatrix4fv(p.uniforms.u_matrix,!1,a.mat4.translate([],l,[t*r[0],t*r[1],0])),u.drawArrays(u.LINES,
0,A.length);u.uniform4f(p.uniforms.u_color,0,0,0,1);u.uniformMatrix4fv(p.uniforms.u_matrix,!1,l);u.drawArrays(u.LINES,0,A.length)}}},ec=function(b,c){this.context=new Fb(b);this.transform=c;this._tileTextures={};this.setup();this.numSublayers=od.maxUnderzooming+od.maxOverzooming+1;this.depthEpsilon=1/Math.pow(2,16);this.depthRboNeedsClear=!0;this.emptyProgramConfiguration=new a.default$24;this.crossTileSymbolIndex=new Od};ec.prototype.resize=function(a,b){var c=this.context.gl;if(this.width=a*oa.devicePixelRatio,
this.height=b*oa.devicePixelRatio,this.context.viewport.set([0,0,this.width,this.height]),this.style)for(a=0,b=this.style._order;a<b.length;a+=1)this.style._layers[b[a]].resize();this.depthRbo&&(c.deleteRenderbuffer(this.depthRbo),this.depthRbo=null)};ec.prototype.setup=function(){var b=this.context,c=new a.PosArray;c.emplaceBack(0,0);c.emplaceBack(a.default$8,0);c.emplaceBack(0,a.default$8);c.emplaceBack(a.default$8,a.default$8);this.tileExtentBuffer=b.createVertexBuffer(c,be.members);this.tileExtentVAO=
new vb;this.tileExtentPatternVAO=new vb;c=new a.PosArray;c.emplaceBack(0,0);c.emplaceBack(a.default$8,0);c.emplaceBack(a.default$8,a.default$8);c.emplaceBack(0,a.default$8);c.emplaceBack(0,0);this.debugBuffer=b.createVertexBuffer(c,be.members);this.debugVAO=new vb;c=new a.RasterBoundsArray;c.emplaceBack(0,0,0,0);c.emplaceBack(a.default$8,0,a.default$8,0);c.emplaceBack(0,a.default$8,0,a.default$8);c.emplaceBack(a.default$8,a.default$8,a.default$8,a.default$8);this.rasterBoundsBuffer=b.createVertexBuffer(c,
Mb.members);this.rasterBoundsVAO=new vb;c=new a.PosArray;c.emplaceBack(0,0);c.emplaceBack(1,0);c.emplaceBack(0,1);c.emplaceBack(1,1);this.viewportBuffer=b.createVertexBuffer(c,be.members);this.viewportVAO=new vb};ec.prototype.clearStencil=function(){var b=this.context,c=b.gl;b.setColorMode(mc.disabled);b.setDepthMode(yb.disabled);b.setStencilMode(new Ma({func:c.ALWAYS,mask:0},0,255,c.ZERO,c.ZERO,c.ZERO));var d=a.mat4.create();a.mat4.ortho(d,0,this.width,this.height,0,0,1);a.mat4.scale(d,d,[c.drawingBufferWidth,
c.drawingBufferHeight,0]);var e=this.useProgram("clippingMask");c.uniformMatrix4fv(e.uniforms.u_matrix,!1,d);this.viewportVAO.bind(b,e,this.viewportBuffer,[]);c.drawArrays(c.TRIANGLE_STRIP,0,4)};ec.prototype._renderTileClippingMasks=function(a){var b=this.context,c=b.gl;b.setColorMode(mc.disabled);b.setDepthMode(yb.disabled);var d=1;this._tileClippingMaskIDs={};for(var e=0;e<a.length;e+=1){var g=a[e],f=this._tileClippingMaskIDs[g.key]=d++;b.setStencilMode(new Ma({func:c.ALWAYS,mask:0},f,255,c.KEEP,
c.KEEP,c.REPLACE));f=this.useProgram("clippingMask");c.uniformMatrix4fv(f.uniforms.u_matrix,!1,g.posMatrix);this.tileExtentVAO.bind(this.context,f,this.tileExtentBuffer,[]);c.drawArrays(c.TRIANGLE_STRIP,0,this.tileExtentBuffer.length)}};ec.prototype.stencilModeForClipping=function(a){var b=this.context.gl;return new Ma({func:b.EQUAL,mask:255},this._tileClippingMaskIDs[a.key],0,b.KEEP,b.KEEP,b.REPLACE)};ec.prototype.colorModeForRenderPass=function(){var b=this.context.gl;return this._showOverdrawInspector?
new mc([b.CONSTANT_COLOR,b.ONE],new a.default$6(.125,.125,.125,0),[!0,!0,!0,!0]):"opaque"===this.renderPass?mc.unblended:mc.alphaBlended};ec.prototype.depthModeForSublayer=function(a,b,c){a=1-((1+this.currentLayer)*this.numSublayers+a)*this.depthEpsilon;return new yb(c||this.context.gl.LEQUAL,b,[a-1+this.depthRange,a])};ec.prototype.render=function(b,c){var d=this;for(g in this.style=b,this.options=c,this.lineAtlas=b.lineAtlas,this.imageManager=b.imageManager,this.glyphManager=b.glyphManager,this.symbolFadeChange=
b.placement.symbolFadeChange(oa.now()),b.sourceCaches){var e=d.style.sourceCaches[g];e.used&&e.prepare(d.context)}var g=this.style._order;var f=a.filterObject(this.style.sourceCaches,function(a){return"raster"===a.getSource().type||"raster-dem"===a.getSource().type});e=function(b){var c=f[b];!function(b,c){b=b.sort(function(a,b){return a.tileID.isLessThan(b.tileID)?-1:b.tileID.isLessThan(a.tileID)?1:0});for(var d=0;d<b.length;d++){var e={},g=b[d],f=b.slice(d+1);fa(g.tileID.wrapped(),g.tileID,f,new a.OverscaledTileID(0,
g.tileID.wrap+1,0,0,0),e);g.setMask(e,c)}}(c.getVisibleCoordinates().map(function(a){return c.getTile(a)}),d.context)};for(var h in f)e(h);this.renderPass="offscreen";var k;h=[];this.depthRboNeedsClear=!0;for(e=0;e<g.length;e++){var n=d.style._layers[g[e]];n.hasOffscreenPass()&&!n.isHidden(d.transform.zoom)&&(n.source!==(k&&k.id)&&(h=[],(k=d.style.sourceCaches[n.source])&&(h=k.getVisibleCoordinates()).reverse()),h.length&&d.renderLayer(d,k,n,h))}this.context.bindFramebuffer.set(null);this.context.clear({color:c.showOverdrawInspector?
a.default$6.black:a.default$6.transparent,depth:1});this._showOverdrawInspector=c.showOverdrawInspector;this.depthRange=(b._order.length+2)*this.numSublayers*this.depthEpsilon;this.renderPass="opaque";var t;b=[];this.currentLayer=g.length-1;for(this.currentLayer;0<=this.currentLayer;this.currentLayer--)c=d.style._layers[g[d.currentLayer]],c.source!==(t&&t.id)&&(b=[],(t=d.style.sourceCaches[c.source])&&(d.clearStencil(),b=t.getVisibleCoordinates(),t.getSource().isTileClipped&&d._renderTileClippingMasks(b))),
d.renderLayer(d,t,c,b);this.renderPass="translucent";var m;t=[];this.currentLayer=0;for(this.currentLayer;this.currentLayer<g.length;this.currentLayer++)b=d.style._layers[g[d.currentLayer]],b.source!==(m&&m.id)&&(t=[],(m=d.style.sourceCaches[b.source])&&(d.clearStencil(),t=m.getVisibleCoordinates(),m.getSource().isTileClipped&&d._renderTileClippingMasks(t)),t.reverse()),d.renderLayer(d,m,b,t);this.options.showTileBoundaries&&(m=this.style.sourceCaches[Object.keys(this.style.sourceCaches)[0]])&&de.debug(this,
m,m.getVisibleCoordinates())};ec.prototype.setupOffscreenDepthRenderbuffer=function(){var a=this.context;this.depthRbo||(this.depthRbo=a.createRenderbuffer(a.gl.DEPTH_COMPONENT16,this.width,this.height))};ec.prototype.renderLayer=function(a,b,c,d){c.isHidden(this.transform.zoom)||("background"===c.type||d.length)&&(this.id=c.id,de[c.type](a,b,c,d))};ec.prototype.translatePosMatrix=function(b,c,d,e,g){if(!d[0]&&!d[1])return b;var f=g?"map"===e?this.transform.angle:0:"viewport"===e?-this.transform.angle:
0;f&&(e=Math.sin(f),f=Math.cos(f),d=[d[0]*f-d[1]*e,d[0]*e+d[1]*f]);c=[g?d[0]:ia(c,d[0],this.transform.zoom),g?d[1]:ia(c,d[1],this.transform.zoom),0];d=new Float32Array(16);return a.mat4.translate(d,b,c),d};ec.prototype.saveTileTexture=function(a){var b=this._tileTextures[a.size[0]];b?b.push(a):this._tileTextures[a.size[0]]=[a]};ec.prototype.getTileTexture=function(a){return(a=this._tileTextures[a])&&0<a.length?a.pop():null};ec.prototype._createProgramCached=function(a,b){this.cache=this.cache||{};
var c=""+a+(b.cacheKey||"")+(this._showOverdrawInspector?"/overdraw":"");return this.cache[c]||(this.cache[c]=new zc(this.context,ce[a],b,this._showOverdrawInspector)),this.cache[c]};ec.prototype.useProgram=function(a,b){a=this._createProgramCached(a,b||this.emptyProgramConfiguration);return this.context.program.set(a.program),a};var Kc=a.default$20.vec4,ra=a.default$20.mat4,La=a.default$20.mat2,qb=function(a,b,c){this.tileSize=512;this._renderWorldCopies=void 0===c||c;this._minZoom=a||0;this._maxZoom=
b||22;this.latRange=[-85.05113,85.05113];this.height=this.width=0;this._center=new Oa(0,0);this.angle=this.zoom=0;this._fov=.6435011087932844;this._pitch=0;this._unmodified=!0;this._posMatrixCache={};this._alignedPosMatrixCache={}},Bb={minZoom:{configurable:!0},maxZoom:{configurable:!0},renderWorldCopies:{configurable:!0},worldSize:{configurable:!0},centerPoint:{configurable:!0},size:{configurable:!0},bearing:{configurable:!0},pitch:{configurable:!0},fov:{configurable:!0},zoom:{configurable:!0},center:{configurable:!0},
unmodified:{configurable:!0},x:{configurable:!0},y:{configurable:!0},point:{configurable:!0}};qb.prototype.clone=function(){var a=new qb(this._minZoom,this._maxZoom,this._renderWorldCopies);return a.tileSize=this.tileSize,a.latRange=this.latRange,a.width=this.width,a.height=this.height,a._center=this._center,a.zoom=this.zoom,a.angle=this.angle,a._fov=this._fov,a._pitch=this._pitch,a._unmodified=this._unmodified,a._calcMatrices(),a};Bb.minZoom.get=function(){return this._minZoom};Bb.minZoom.set=function(a){this._minZoom!==
a&&(this._minZoom=a,this.zoom=Math.max(this.zoom,a))};Bb.maxZoom.get=function(){return this._maxZoom};Bb.maxZoom.set=function(a){this._maxZoom!==a&&(this._maxZoom=a,this.zoom=Math.min(this.zoom,a))};Bb.renderWorldCopies.get=function(){return this._renderWorldCopies};Bb.renderWorldCopies.set=function(a){void 0===a?a=!0:null===a&&(a=!1);this._renderWorldCopies=a};Bb.worldSize.get=function(){return this.tileSize*this.scale};Bb.centerPoint.get=function(){return this.size._div(2)};Bb.size.get=function(){return new a.default$1(this.width,
this.height)};Bb.bearing.get=function(){return-this.angle/Math.PI*180};Bb.bearing.set=function(b){b=-a.wrap(b,-180,180)*Math.PI/180;this.angle!==b&&(this._unmodified=!1,this.angle=b,this._calcMatrices(),this.rotationMatrix=La.create(),La.rotate(this.rotationMatrix,this.rotationMatrix,this.angle))};Bb.pitch.get=function(){return this._pitch/Math.PI*180};Bb.pitch.set=function(b){b=a.clamp(b,0,60)/180*Math.PI;this._pitch!==b&&(this._unmodified=!1,this._pitch=b,this._calcMatrices())};Bb.fov.get=function(){return this._fov/
Math.PI*180};Bb.fov.set=function(a){a=Math.max(.01,Math.min(60,a));this._fov!==a&&(this._unmodified=!1,this._fov=a/180*Math.PI,this._calcMatrices())};Bb.zoom.get=function(){return this._zoom};Bb.zoom.set=function(a){a=Math.min(Math.max(a,this.minZoom),this.maxZoom);this._zoom!==a&&(this._unmodified=!1,this._zoom=a,this.scale=this.zoomScale(a),this.tileZoom=Math.floor(a),this.zoomFraction=a-this.tileZoom,this._constrain(),this._calcMatrices())};Bb.center.get=function(){return this._center};Bb.center.set=
function(a){a.lat===this._center.lat&&a.lng===this._center.lng||(this._unmodified=!1,this._center=a,this._constrain(),this._calcMatrices())};qb.prototype.coveringZoomLevel=function(a){return(a.roundZoom?Math.round:Math.floor)(this.zoom+this.scaleZoom(this.tileSize/a.tileSize))};qb.prototype.getVisibleUnwrappedCoordinates=function(b){var c=this.pointCoordinate(new a.default$1(0,0),0),d=this.pointCoordinate(new a.default$1(this.width,0),0);c=Math.floor(c.column);d=Math.floor(d.column);var e=[new a.UnwrappedTileID(0,
b)];if(this._renderWorldCopies)for(;c<=d;c++)0!==c&&e.push(new a.UnwrappedTileID(c,b));return e};qb.prototype.coveringTiles=function(b){var c=this.coveringZoomLevel(b),d=c;if(void 0!==b.minzoom&&c<b.minzoom)return[];void 0!==b.maxzoom&&c>b.maxzoom&&(c=b.maxzoom);var e=this.pointCoordinate(this.centerPoint,c),g=new a.default$1(e.column-.5,e.row-.5);return function(b,c,d,e){function g(c,g,k){var n;if(0<=k&&k<=f)for(;c<g;c++){var t=Math.floor(c/f);var m=(c%f+f)%f;0!==t&&!0!==e||(n=new a.OverscaledTileID(d,
t,b,m,k),h[n.key]=n)}}void 0===e&&(e=!0);var f=1<<b,h={};return ka(c[0],c[1],c[2],0,f,g),ka(c[2],c[3],c[0],0,f,g),Object.keys(h).map(function(a){return h[a]})}(c,[this.pointCoordinate(new a.default$1(0,0),c),this.pointCoordinate(new a.default$1(this.width,0),c),this.pointCoordinate(new a.default$1(this.width,this.height),c),this.pointCoordinate(new a.default$1(0,this.height),c)],b.reparseOverscaled?d:c,this._renderWorldCopies).sort(function(a,b){return g.dist(a.canonical)-g.dist(b.canonical)})};qb.prototype.resize=
function(a,b){this.width=a;this.height=b;this.pixelsToGLUnits=[2/a,-2/b];this._constrain();this._calcMatrices()};Bb.unmodified.get=function(){return this._unmodified};qb.prototype.zoomScale=function(a){return Math.pow(2,a)};qb.prototype.scaleZoom=function(a){return Math.log(a)/Math.LN2};qb.prototype.project=function(b){return new a.default$1(this.lngX(b.lng),this.latY(b.lat))};qb.prototype.unproject=function(a){return new Oa(this.xLng(a.x),this.yLat(a.y))};Bb.x.get=function(){return this.lngX(this.center.lng)};
Bb.y.get=function(){return this.latY(this.center.lat)};Bb.point.get=function(){return new a.default$1(this.x,this.y)};qb.prototype.lngX=function(a){return(180+a)*this.worldSize/360};qb.prototype.latY=function(a){return(180-180/Math.PI*Math.log(Math.tan(Math.PI/4+a*Math.PI/360)))*this.worldSize/360};qb.prototype.xLng=function(a){return 360*a/this.worldSize-180};qb.prototype.yLat=function(a){return 360/Math.PI*Math.atan(Math.exp((180-360*a/this.worldSize)*Math.PI/180))-90};qb.prototype.setLocationAtPoint=
function(a,b){b=this.pointCoordinate(b)._sub(this.pointCoordinate(this.centerPoint));this.center=this.coordinateLocation(this.locationCoordinate(a)._sub(b));this._renderWorldCopies&&(this.center=this.center.wrap())};qb.prototype.locationPoint=function(a){return this.coordinatePoint(this.locationCoordinate(a))};qb.prototype.pointLocation=function(a){return this.coordinateLocation(this.pointCoordinate(a))};qb.prototype.locationCoordinate=function(b){return(new a.default$17(this.lngX(b.lng)/this.tileSize,
this.latY(b.lat)/this.tileSize,this.zoom)).zoomTo(this.tileZoom)};qb.prototype.coordinateLocation=function(a){a=a.zoomTo(this.zoom);return new Oa(this.xLng(a.column*this.tileSize),this.yLat(a.row*this.tileSize))};qb.prototype.pointCoordinate=function(b,c){void 0===c&&(c=this.tileZoom);var d=[b.x,b.y,0,1];b=[b.x,b.y,1,1];Kc.transformMat4(d,d,this.pixelMatrixInverse);Kc.transformMat4(b,b,this.pixelMatrixInverse);var e=d[3],g=b[3],f=d[1]/e,h=b[1]/g,k=d[2]/e,n=b[2]/g;k=k===n?0:(0-k)/(n-k);return(new a.default$17(a.number(d[0]/
e,b[0]/g,k)/this.tileSize,a.number(f,h,k)/this.tileSize,this.zoom))._zoomTo(c)};qb.prototype.coordinatePoint=function(b){b=b.zoomTo(this.zoom);b=[b.column*this.tileSize,b.row*this.tileSize,0,1];return Kc.transformMat4(b,b,this.pixelMatrix),new a.default$1(b[0]/b[3],b[1]/b[3])};qb.prototype.calculatePosMatrix=function(b,c){void 0===c&&(c=!1);var d=b.key,e=c?this._alignedPosMatrixCache:this._posMatrixCache;if(e[d])return e[d];var g=b.canonical,f=this.worldSize/this.zoomScale(g.z);b=g.x+Math.pow(2,g.z)*
b.wrap;var h=ra.identity(new Float64Array(16));return ra.translate(h,h,[b*f,g.y*f,0]),ra.scale(h,h,[f/a.default$8,f/a.default$8,1]),ra.multiply(h,c?this.alignedProjMatrix:this.projMatrix,h),e[d]=new Float32Array(h),e[d]};qb.prototype._constrain=function(){if(this.center&&this.width&&this.height&&!this._constraining){this._constraining=!0;var b,c,d=-90,e=90,g=-180,f=180,h=this.size,k=this._unmodified;if(this.latRange){var n=this.latRange;d=this.latY(n[1]);n=(e=this.latY(n[0]))-d<h.y?h.y/(e-d):0}if(this.lngRange){var t=
this.lngRange;g=this.lngX(t[0]);t=(f=this.lngX(t[1]))-g<h.x?h.x/(f-g):0}var m=Math.max(t||0,n||0);if(m)return this.center=this.unproject(new a.default$1(t?(f+g)/2:this.x,n?(e+d)/2:this.y)),this.zoom+=this.scaleZoom(m),this._unmodified=k,void(this._constraining=!1);this.latRange&&(n=this.y,t=h.y/2,n-t<d&&(c=d+t),n+t>e&&(c=e-t));this.lngRange&&(d=this.x,h=h.x/2,d-h<g&&(b=g+h),d+h>f&&(b=f-h));void 0===b&&void 0===c||(this.center=this.unproject(new a.default$1(void 0!==b?b:this.x,void 0!==c?c:this.y)));
this._unmodified=k;this._constraining=!1}};qb.prototype._calcMatrices=function(){if(this.height){this.cameraToCenterDistance=.5/Math.tan(this._fov/2)*this.height;var a=this._fov/2,b=this.x,c=this.y,d=1.01*(Math.sin(a)*this.cameraToCenterDistance/Math.sin(Math.PI-(Math.PI/2+this._pitch)-a)*Math.cos(Math.PI/2-this._pitch)+this.cameraToCenterDistance);a=new Float64Array(16);ra.perspective(a,this._fov,this.width/this.height,1,d);ra.scale(a,a,[1,-1,1]);ra.translate(a,a,[0,0,-this.cameraToCenterDistance]);
ra.rotateX(a,a,this._pitch);ra.rotateZ(a,a,this.angle);ra.translate(a,a,[-b,-c,0]);ra.scale(a,a,[1,1,this.worldSize/(12756274*Math.PI*Math.abs(Math.cos(Math.PI/180*this.center.lat))),1]);this.projMatrix=a;d=this.width%2/2;var e=this.height%2/2,g=Math.cos(this.angle),f=Math.sin(this.angle);b=b-Math.round(b)+g*d+f*e;c=c-Math.round(c)+g*e+f*d;d=new Float64Array(a);if(ra.translate(d,d,[.5<b?b-1:b,.5<c?c-1:c,0]),this.alignedProjMatrix=d,a=ra.create(),ra.scale(a,a,[this.width/2,-this.height/2,1]),ra.translate(a,
a,[1,-1,0]),this.pixelMatrix=ra.multiply(new Float64Array(16),a,this.projMatrix),!(a=ra.invert(new Float64Array(16),this.pixelMatrix)))throw Error("failed to invert matrix");this.pixelMatrixInverse=a;this._posMatrixCache={};this._alignedPosMatrixCache={}}};qb.prototype.maxPitchScaleFactor=function(){if(!this.pixelMatrixInverse)return 1;var b=this.pointCoordinate(new a.default$1(0,0)).zoomTo(this.zoom);b=[b.column*this.tileSize,b.row*this.tileSize,0,1];return Kc.transformMat4(b,b,this.pixelMatrix)[3]/
this.cameraToCenterDistance};Object.defineProperties(qb.prototype,Bb);var Wc=function(){var b,c,d,e;a.bindAll(["_onHashChange","_updateHash"],this);this._updateHash=(b=this._updateHashUnthrottled.bind(this),c=!1,d=0,e=function(){d=0;c&&(b(),d=setTimeout(e,300),c=!1)},function(){return c=!0,d||e(),d})};Wc.prototype.addTo=function(b){return this._map=b,a.default.addEventListener("hashchange",this._onHashChange,!1),this._map.on("moveend",this._updateHash),this};Wc.prototype.remove=function(){return a.default.removeEventListener("hashchange",
this._onHashChange,!1),this._map.off("moveend",this._updateHash),clearTimeout(this._updateHash()),delete this._map,this};Wc.prototype.getHashString=function(a){var b=this._map.getCenter(),c=Math.round(100*this._map.getZoom())/100,d=Math.pow(10,Math.ceil((c*Math.LN2+Math.log(512/360/.5))/Math.LN10)),e=Math.round(b.lng*d)/d;b=Math.round(b.lat*d)/d;d=this._map.getBearing();var g=this._map.getPitch(),f="";return f+=a?"#/"+e+"/"+b+"/"+c:"#"+c+"/"+b+"/"+e,(d||g)&&(f+="/"+Math.round(10*d)/10),g&&(f+="/"+
Math.round(g)),f};Wc.prototype._onHashChange=function(){var b=a.default.location.hash.replace("#","").split("/");return 3<=b.length&&(this._map.jumpTo({center:[+b[2],+b[1]],zoom:+b[0],bearing:+(b[3]||0),pitch:+(b[4]||0)}),!0)};Wc.prototype._updateHashUnthrottled=function(){var b=this.getHashString();a.default.history.replaceState(a.default.history.state,"",b)};var Da=function(b){function c(c,d,e,g){void 0===g&&(g={});var f=na.mousePos(d.getCanvasContainer(),e),h=d.unproject(f);b.call(this,c,a.extend({point:f,
lngLat:h,originalEvent:e},g));this._defaultPrevented=!1;this.target=d}b&&(c.__proto__=b);c.prototype=Object.create(b&&b.prototype);c.prototype.constructor=c;var d={defaultPrevented:{configurable:!0}};return c.prototype.preventDefault=function(){this._defaultPrevented=!0},d.defaultPrevented.get=function(){return this._defaultPrevented},Object.defineProperties(c.prototype,d),c}(a.Event),Za=function(b){function c(c,d,e){var g=na.touchPos(d.getCanvasContainer(),e),f=g.map(function(a){return d.unproject(a)}),
h=g.reduce(function(a,b,c,d){return a.add(b.div(d.length))},new a.default$1(0,0)),k=d.unproject(h);b.call(this,c,{points:g,point:h,lngLats:f,lngLat:k,originalEvent:e});this._defaultPrevented=!1}b&&(c.__proto__=b);c.prototype=Object.create(b&&b.prototype);c.prototype.constructor=c;var d={defaultPrevented:{configurable:!0}};return c.prototype.preventDefault=function(){this._defaultPrevented=!0},d.defaultPrevented.get=function(){return this._defaultPrevented},Object.defineProperties(c.prototype,d),c}(a.Event),
ob=function(a){function b(b,c,d){a.call(this,b,{originalEvent:d});this._defaultPrevented=!1}a&&(b.__proto__=a);b.prototype=Object.create(a&&a.prototype);b.prototype.constructor=b;var c={defaultPrevented:{configurable:!0}};return b.prototype.preventDefault=function(){this._defaultPrevented=!0},c.defaultPrevented.get=function(){return this._defaultPrevented},Object.defineProperties(b.prototype,c),b}(a.Event),$b=function(b){this._map=b;this._el=b.getCanvasContainer();this._delta=0;a.bindAll(["_onWheel",
"_onTimeout","_onScrollFrame","_onScrollFinished"],this)};$b.prototype.isEnabled=function(){return!!this._enabled};$b.prototype.isActive=function(){return!!this._active};$b.prototype.enable=function(a){this.isEnabled()||(this._enabled=!0,this._aroundCenter=a&&"center"===a.around)};$b.prototype.disable=function(){this.isEnabled()&&(this._enabled=!1)};$b.prototype.onWheel=function(b){if(this.isEnabled()){var c=b.deltaMode===a.default.WheelEvent.DOM_DELTA_LINE?40*b.deltaY:b.deltaY,d=oa.now(),e=d-(this._lastWheelEventTime||
0);this._lastWheelEventTime=d;0!==c&&0==c%4.000244140625?this._type="wheel":0!==c&&4>Math.abs(c)?this._type="trackpad":400<e?(this._type=null,this._lastValue=c,this._timeout=setTimeout(this._onTimeout,40,b)):this._type||(this._type=200>Math.abs(e*c)?"trackpad":"wheel",this._timeout&&(clearTimeout(this._timeout),this._timeout=null,c+=this._lastValue));b.shiftKey&&c&&(c/=4);this._type&&(this._lastWheelEvent=b,this._delta-=c,this.isActive()||this._start(b));b.preventDefault()}};$b.prototype._onTimeout=
function(a){this._type="wheel";this._delta-=this._lastValue;this.isActive()||this._start(a)};$b.prototype._start=function(b){this._delta&&(this._frameId&&(this._map._cancelRenderFrame(this._frameId),this._frameId=null),this._active=!0,this._map.fire(new a.Event("movestart",{originalEvent:b})),this._map.fire(new a.Event("zoomstart",{originalEvent:b})),this._finishTimeout&&clearTimeout(this._finishTimeout),b=na.mousePos(this._el,b),this._around=Oa.convert(this._aroundCenter?this._map.getCenter():this._map.unproject(b)),
this._aroundPoint=this._map.transform.locationPoint(this._around),this._frameId||(this._frameId=this._map._requestRenderFrame(this._onScrollFrame)))};$b.prototype._onScrollFrame=function(){var b=this;if(this._frameId=null,this.isActive()){var c=this._map.transform;if(0!==this._delta){var d=2/(1+Math.exp(-Math.abs(this._delta*("wheel"===this._type&&4.000244140625<Math.abs(this._delta)?1/450:.01))));0>this._delta&&0!==d&&(d=1/d);var e="number"==typeof this._targetZoom?c.zoomScale(this._targetZoom):
c.scale;this._targetZoom=Math.min(c.maxZoom,Math.max(c.minZoom,c.scaleZoom(e*d)));"wheel"===this._type&&(this._startZoom=c.zoom,this._easing=this._smoothOutEasing(200));this._delta=0}d=!1;if("wheel"===this._type){e=Math.min((oa.now()-this._lastWheelEventTime)/200,1);var g=this._easing(e);c.zoom=a.number(this._startZoom,this._targetZoom,g);1>e?this._frameId||(this._frameId=this._map._requestRenderFrame(this._onScrollFrame)):d=!0}else c.zoom=this._targetZoom,d=!0;c.setLocationAtPoint(this._around,this._aroundPoint);
this._map.fire(new a.Event("move",{originalEvent:this._lastWheelEvent}));this._map.fire(new a.Event("zoom",{originalEvent:this._lastWheelEvent}));d&&(this._active=!1,this._finishTimeout=setTimeout(function(){b._map.fire(new a.Event("zoomend",{originalEvent:b._lastWheelEvent}));b._map.fire(new a.Event("moveend",{originalEvent:b._lastWheelEvent}));delete b._targetZoom},200))}};$b.prototype._smoothOutEasing=function(b){var c=a.ease;if(this._prevEase){c=this._prevEase;var d=(oa.now()-c.start)/c.duration;
c=c.easing(d+.01)-c.easing(d);c=.27/Math.sqrt(c*c+1E-4)*.01;c=a.bezier(c,Math.sqrt(.0729-c*c),.25,1)}return this._prevEase={start:oa.now(),duration:b,easing:c},c};var fc=function(b){this._map=b;this._el=b.getCanvasContainer();this._container=b.getContainer();a.bindAll(["_onMouseMove","_onMouseUp","_onKeyDown"],this)};fc.prototype.isEnabled=function(){return!!this._enabled};fc.prototype.isActive=function(){return!!this._active};fc.prototype.enable=function(){this.isEnabled()||(this._enabled=!0)};fc.prototype.disable=
function(){this.isEnabled()&&(this._enabled=!1)};fc.prototype.onMouseDown=function(b){this.isEnabled()&&b.shiftKey&&0===b.button&&(a.default.document.addEventListener("mousemove",this._onMouseMove,!1),a.default.document.addEventListener("keydown",this._onKeyDown,!1),a.default.document.addEventListener("mouseup",this._onMouseUp,!1),na.disableDrag(),this._startPos=na.mousePos(this._el,b),this._active=!0)};fc.prototype._onMouseMove=function(a){var b=this._startPos,c=na.mousePos(this._el,a);this._box||
(this._box=na.create("div","mapboxgl-boxzoom",this._container),this._container.classList.add("mapboxgl-crosshair"),this._fireEvent("boxzoomstart",a));a=Math.min(b.x,c.x);var d=Math.max(b.x,c.x),e=Math.min(b.y,c.y);b=Math.max(b.y,c.y);na.setTransform(this._box,"translate("+a+"px,"+e+"px)");this._box.style.width=d-a+"px";this._box.style.height=b-e+"px"};fc.prototype._onMouseUp=function(b){if(0===b.button){var c=this._startPos,d=na.mousePos(this._el,b),e=(new Va).extend(this._map.unproject(c)).extend(this._map.unproject(d));
this._finish();na.suppressClick();c.x===d.x&&c.y===d.y?this._fireEvent("boxzoomcancel",b):this._map.fitBounds(e,{linear:!0}).fire(new a.Event("boxzoomend",{originalEvent:b,boxZoomBounds:e}))}};fc.prototype._onKeyDown=function(a){27===a.keyCode&&(this._finish(),this._fireEvent("boxzoomcancel",a))};fc.prototype._finish=function(){this._active=!1;a.default.document.removeEventListener("mousemove",this._onMouseMove,!1);a.default.document.removeEventListener("keydown",this._onKeyDown,!1);a.default.document.removeEventListener("mouseup",
this._onMouseUp,!1);this._container.classList.remove("mapboxgl-crosshair");this._box&&(na.remove(this._box),this._box=null);na.enableDrag()};fc.prototype._fireEvent=function(b,c){return this._map.fire(new a.Event(b,{originalEvent:c}))};var ub=a.bezier(0,0,.25,1),Pb=function(b,c){this._map=b;this._el=c.element||b.getCanvasContainer();this._state="disabled";this._button=c.button||"right";this._bearingSnap=c.bearingSnap||0;this._pitchWithRotate=!1!==c.pitchWithRotate;a.bindAll(["_onMouseMove","_onMouseUp",
"_onBlur","_onDragFrame"],this)};Pb.prototype.isEnabled=function(){return"disabled"!==this._state};Pb.prototype.isActive=function(){return"active"===this._state};Pb.prototype.enable=function(){this.isEnabled()||(this._state="enabled")};Pb.prototype.disable=function(){if(this.isEnabled())switch(this._state){case "active":this._state="disabled";this._unbind();this._deactivate();this._fireEvent("rotateend");this._pitchWithRotate&&this._fireEvent("pitchend");this._fireEvent("moveend");break;case "pending":this._state=
"disabled";this._unbind();break;default:this._state="disabled"}};Pb.prototype.onMouseDown=function(b){if("enabled"===this._state){if("right"===this._button){if(this._eventButton=na.mouseButton(b),this._eventButton!==(b.ctrlKey?0:2))return}else{if(b.ctrlKey||0!==na.mouseButton(b))return;this._eventButton=0}na.disableDrag();a.default.document.addEventListener("mousemove",this._onMouseMove,{capture:!0});a.default.document.addEventListener("mouseup",this._onMouseUp);a.default.addEventListener("blur",
this._onBlur);this._state="pending";this._inertia=[[oa.now(),this._map.getBearing()]];this._previousPos=na.mousePos(this._el,b);this._center=this._map.transform.centerPoint;b.preventDefault()}};Pb.prototype._onMouseMove=function(a){this._lastMoveEvent=a;this._pos=na.mousePos(this._el,a);"pending"===this._state&&(this._state="active",this._fireEvent("rotatestart",a),this._fireEvent("movestart",a),this._pitchWithRotate&&this._fireEvent("pitchstart",a));this._frameId||(this._frameId=this._map._requestRenderFrame(this._onDragFrame))};
Pb.prototype._onDragFrame=function(){this._frameId=null;var a=this._lastMoveEvent;if(a){var b=this._map.transform,c=this._previousPos,d=this._pos,e=b.bearing-.8*(c.x-d.x);c=b.pitch- -.5*(c.y-d.y);d=this._inertia;var g=d[d.length-1];this._drainInertiaBuffer();d.push([oa.now(),this._map._normalizeBearing(e,g[1])]);b.bearing=e;this._pitchWithRotate&&(this._fireEvent("pitch",a),b.pitch=c);this._fireEvent("rotate",a);this._fireEvent("move",a);delete this._lastMoveEvent;this._previousPos=this._pos}};Pb.prototype._onMouseUp=
function(a){if(na.mouseButton(a)===this._eventButton)switch(this._state){case "active":this._state="enabled";na.suppressClick();this._unbind();this._deactivate();this._inertialRotate(a);break;case "pending":this._state="enabled",this._unbind()}};Pb.prototype._onBlur=function(a){switch(this._state){case "active":this._state="enabled";this._unbind();this._deactivate();this._fireEvent("rotateend",a);this._pitchWithRotate&&this._fireEvent("pitchend",a);this._fireEvent("moveend",a);break;case "pending":this._state=
"enabled",this._unbind()}};Pb.prototype._unbind=function(){a.default.document.removeEventListener("mousemove",this._onMouseMove,{capture:!0});a.default.document.removeEventListener("mouseup",this._onMouseUp);a.default.removeEventListener("blur",this._onBlur);na.enableDrag()};Pb.prototype._deactivate=function(){this._frameId&&(this._map._cancelRenderFrame(this._frameId),this._frameId=null);delete this._lastMoveEvent;delete this._previousPos};Pb.prototype._inertialRotate=function(a){var b=this;this._fireEvent("rotateend",
a);this._drainInertiaBuffer();var c=this._map,d=c.getBearing(),e=this._inertia,g=function(){Math.abs(d)<b._bearingSnap?c.resetNorth({noMoveStart:!0},{originalEvent:a}):b._fireEvent("moveend",a);b._pitchWithRotate&&b._fireEvent("pitchend",a)};if(2>e.length)g();else{var f=e[0],h=e[e.length-1];e=c._normalizeBearing(d,e[e.length-2][1]);var k=h[1]-f[1],n=0>k?-1:1;f=(h[0]-f[0])/1E3;0!==k&&0!==f?(g=Math.abs(.25/f*k),180<g&&(g=180),f=g/180,e+=f/2*g*n,Math.abs(c._normalizeBearing(e,0))<this._bearingSnap&&
(e=c._normalizeBearing(0,e)),c.rotateTo(e,{duration:1E3*f,easing:ub,noMoveStart:!0},{originalEvent:a})):g()}};Pb.prototype._fireEvent=function(b,c){return this._map.fire(new a.Event(b,c?{originalEvent:c}:{}))};Pb.prototype._drainInertiaBuffer=function(){for(var a=this._inertia,b=oa.now();0<a.length&&160<b-a[0][0];)a.shift()};var Re=a.bezier(0,0,.3,1),Xb=function(b){this._map=b;this._el=b.getCanvasContainer();this._state="disabled";a.bindAll(["_onMove","_onMouseUp","_onTouchEnd","_onBlur","_onDragFrame"],
this)};Xb.prototype.isEnabled=function(){return"disabled"!==this._state};Xb.prototype.isActive=function(){return"active"===this._state};Xb.prototype.enable=function(){this.isEnabled()||(this._el.classList.add("mapboxgl-touch-drag-pan"),this._state="enabled")};Xb.prototype.disable=function(){if(this.isEnabled())switch(this._el.classList.remove("mapboxgl-touch-drag-pan"),this._state){case "active":this._state="disabled";this._unbind();this._deactivate();this._fireEvent("dragend");this._fireEvent("moveend");
break;case "pending":this._state="disabled";this._unbind();break;default:this._state="disabled"}};Xb.prototype.onMouseDown=function(b){"enabled"===this._state&&(b.ctrlKey||0!==na.mouseButton(b)||(na.addEventListener(a.default.document,"mousemove",this._onMove,{capture:!0}),na.addEventListener(a.default.document,"mouseup",this._onMouseUp),this._start(b)))};Xb.prototype.onTouchStart=function(b){"enabled"===this._state&&(1<b.touches.length||(na.addEventListener(a.default.document,"touchmove",this._onMove,
{capture:!0,passive:!1}),na.addEventListener(a.default.document,"touchend",this._onTouchEnd),this._start(b)))};Xb.prototype._start=function(b){a.default.addEventListener("blur",this._onBlur);this._state="pending";this._previousPos=na.mousePos(this._el,b);this._inertia=[[oa.now(),this._previousPos]]};Xb.prototype._onMove=function(a){this._lastMoveEvent=a;a.preventDefault();this._pos=na.mousePos(this._el,a);this._drainInertiaBuffer();this._inertia.push([oa.now(),this._pos]);"pending"===this._state&&
(this._state="active",this._fireEvent("dragstart",a),this._fireEvent("movestart",a));this._frameId||(this._frameId=this._map._requestRenderFrame(this._onDragFrame))};Xb.prototype._onDragFrame=function(){this._frameId=null;var a=this._lastMoveEvent;if(a){var b=this._map.transform;b.setLocationAtPoint(b.pointLocation(this._previousPos),this._pos);this._fireEvent("drag",a);this._fireEvent("move",a);this._previousPos=this._pos;delete this._lastMoveEvent}};Xb.prototype._onMouseUp=function(a){if(0===na.mouseButton(a))switch(this._state){case "active":this._state=
"enabled";na.suppressClick();this._unbind();this._deactivate();this._inertialPan(a);break;case "pending":this._state="enabled",this._unbind()}};Xb.prototype._onTouchEnd=function(a){switch(this._state){case "active":this._state="enabled";this._unbind();this._deactivate();this._inertialPan(a);break;case "pending":this._state="enabled",this._unbind()}};Xb.prototype._onBlur=function(a){switch(this._state){case "active":this._state="enabled";this._unbind();this._deactivate();this._fireEvent("dragend",
a);this._fireEvent("moveend",a);break;case "pending":this._state="enabled",this._unbind()}};Xb.prototype._unbind=function(){na.removeEventListener(a.default.document,"touchmove",this._onMove,{capture:!0,passive:!1});na.removeEventListener(a.default.document,"touchend",this._onTouchEnd);na.removeEventListener(a.default.document,"mousemove",this._onMove,{capture:!0});na.removeEventListener(a.default.document,"mouseup",this._onMouseUp);na.removeEventListener(a.default,"blur",this._onBlur)};Xb.prototype._deactivate=
function(){this._frameId&&(this._map._cancelRenderFrame(this._frameId),this._frameId=null);delete this._lastMoveEvent;delete this._previousPos;delete this._pos};Xb.prototype._inertialPan=function(a){this._fireEvent("dragend",a);this._drainInertiaBuffer();var b=this._inertia;if(2>b.length)this._fireEvent("moveend",a);else{var c=b[b.length-1];b=b[0];var d=c[1].sub(b[1]),e=(c[0]-b[0])/1E3;0===e||c[1].equals(b[1])?this._fireEvent("moveend",a):(c=d.mult(.3/e),b=c.mag(),1400<b&&(b=1400,c._unit()._mult(b)),
b/=750,c=c.mult(-b/2),this._map.panBy(c,{duration:1E3*b,easing:Re,noMoveStart:!0},{originalEvent:a}))}};Xb.prototype._fireEvent=function(b,c){return this._map.fire(new a.Event(b,c?{originalEvent:c}:{}))};Xb.prototype._drainInertiaBuffer=function(){for(var a=this._inertia,b=oa.now();0<a.length&&160<b-a[0][0];)a.shift()};var tb=function(b){this._map=b;this._el=b.getCanvasContainer();a.bindAll(["_onKeyDown"],this)};tb.prototype.isEnabled=function(){return!!this._enabled};tb.prototype.enable=function(){this.isEnabled()||
(this._el.addEventListener("keydown",this._onKeyDown,!1),this._enabled=!0)};tb.prototype.disable=function(){this.isEnabled()&&(this._el.removeEventListener("keydown",this._onKeyDown),this._enabled=!1)};tb.prototype._onKeyDown=function(a){if(!(a.altKey||a.ctrlKey||a.metaKey)){var b=0,c=0,d=0,e=0,g=0;switch(a.keyCode){case 61:case 107:case 171:case 187:b=1;break;case 189:case 109:case 173:b=-1;break;case 37:a.shiftKey?c=-1:(a.preventDefault(),e=-1);break;case 39:a.shiftKey?c=1:(a.preventDefault(),e=
1);break;case 38:a.shiftKey?d=1:(a.preventDefault(),g=-1);break;case 40:a.shiftKey?d=-1:(g=1,a.preventDefault());break;default:return}var f=this._map,h=f.getZoom();b={duration:300,delayEndEvents:500,easing:wa,zoom:b?Math.round(h)+b*(a.shiftKey?2:1):h,bearing:f.getBearing()+15*c,pitch:f.getPitch()+10*d,offset:[100*-e,100*-g],center:f.getCenter()};f.easeTo(b,{originalEvent:a})}};var Lc=function(b){this._map=b;a.bindAll(["_onDblClick","_onZoomEnd"],this)};Lc.prototype.isEnabled=function(){return!!this._enabled};
Lc.prototype.isActive=function(){return!!this._active};Lc.prototype.enable=function(){this.isEnabled()||(this._enabled=!0)};Lc.prototype.disable=function(){this.isEnabled()&&(this._enabled=!1)};Lc.prototype.onTouchStart=function(a){var b=this;this.isEnabled()&&(1<a.points.length||(this._tapped?(clearTimeout(this._tapped),this._tapped=null,this._zoom(a)):this._tapped=setTimeout(function(){b._tapped=null},300)))};Lc.prototype.onDblClick=function(a){this.isEnabled()&&(a.originalEvent.preventDefault(),
this._zoom(a))};Lc.prototype._zoom=function(a){this._active=!0;this._map.on("zoomend",this._onZoomEnd);this._map.zoomTo(this._map.getZoom()+(a.originalEvent.shiftKey?-1:1),{around:a.lngLat},a)};Lc.prototype._onZoomEnd=function(){this._active=!1;this._map.off("zoomend",this._onZoomEnd)};var nc=a.bezier(0,0,.15,1),Qb=function(b){this._map=b;this._el=b.getCanvasContainer();a.bindAll(["_onMove","_onEnd","_onTouchFrame"],this)};Qb.prototype.isEnabled=function(){return!!this._enabled};Qb.prototype.enable=
function(a){this.isEnabled()||(this._el.classList.add("mapboxgl-touch-zoom-rotate"),this._enabled=!0,this._aroundCenter=!!a&&"center"===a.around)};Qb.prototype.disable=function(){this.isEnabled()&&(this._el.classList.remove("mapboxgl-touch-zoom-rotate"),this._enabled=!1)};Qb.prototype.disableRotation=function(){this._rotationDisabled=!0};Qb.prototype.enableRotation=function(){this._rotationDisabled=!1};Qb.prototype.onStart=function(b){if(this.isEnabled()&&2===b.touches.length){var c=na.mousePos(this._el,
b.touches[0]);b=na.mousePos(this._el,b.touches[1]);this._startVec=c.sub(b);this._gestureIntent=void 0;this._inertia=[];na.addEventListener(a.default.document,"touchmove",this._onMove,{passive:!1});na.addEventListener(a.default.document,"touchend",this._onEnd)}};Qb.prototype._getTouchEventData=function(a){var b=na.mousePos(this._el,a.touches[0]);a=na.mousePos(this._el,a.touches[1]);var c=b.sub(a);return{vec:c,center:b.add(a).div(2),scale:c.mag()/this._startVec.mag(),bearing:this._rotationDisabled?
0:180*c.angleWith(this._startVec)/Math.PI}};Qb.prototype._onMove=function(b){if(2===b.touches.length){var c=this._getTouchEventData(b),d=c.vec,e=c.scale;c=c.bearing;this._gestureIntent||(e=.15<Math.abs(1-e),10<Math.abs(c)?this._gestureIntent="rotate":e&&(this._gestureIntent="zoom"),this._gestureIntent&&(this._map.fire(new a.Event(this._gestureIntent+"start",{originalEvent:b})),this._map.fire(new a.Event("movestart",{originalEvent:b})),this._startVec=d));this._lastTouchEvent=b;this._frameId||(this._frameId=
this._map._requestRenderFrame(this._onTouchFrame));b.preventDefault()}};Qb.prototype._onTouchFrame=function(){this._frameId=null;var b=this._gestureIntent;if(b){var c=this._map.transform;this._startScale||(this._startScale=c.scale,this._startBearing=c.bearing);var d=this._getTouchEventData(this._lastTouchEvent),e=d.center,g=d.bearing;d=d.scale;var f=c.pointLocation(e),h=c.locationPoint(f);"rotate"===b&&(c.bearing=this._startBearing+g);c.zoom=c.scaleZoom(this._startScale*d);c.setLocationAtPoint(f,
h);this._map.fire(new a.Event(b,{originalEvent:this._lastTouchEvent}));this._map.fire(new a.Event("move",{originalEvent:this._lastTouchEvent}));this._drainInertiaBuffer();this._inertia.push([oa.now(),d,e])}};Qb.prototype._onEnd=function(b){na.removeEventListener(a.default.document,"touchmove",this._onMove,{passive:!1});na.removeEventListener(a.default.document,"touchend",this._onEnd);var c=this._gestureIntent,d=this._startScale;if(this._frameId&&(this._map._cancelRenderFrame(this._frameId),this._frameId=
null),delete this._gestureIntent,delete this._startScale,delete this._startBearing,delete this._lastTouchEvent,c){this._map.fire(new a.Event(c+"end",{originalEvent:b}));this._drainInertiaBuffer();var e=this._inertia;c=this._map;if(2>e.length)c.snapToNorth({},{originalEvent:b});else{var g=e[e.length-1],f=e[0];e=c.transform.scaleZoom(d*g[1]);d=c.transform.scaleZoom(d*f[1]);var h=e-d;f=(g[0]-f[0])/1E3;g=g[2];0!==f&&e!==d?(h=.15*h/f,2.5<Math.abs(h)&&(h=0<h?2.5:-2.5),d=1E3*Math.abs(h/(12*.15)),e+=h*d/
2E3,0>e&&(e=0),c.easeTo({zoom:e,duration:d,easing:nc,around:this._aroundCenter?c.getCenter():c.unproject(g),noMoveStart:!0},{originalEvent:b})):c.snapToNorth({},{originalEvent:b})}}};Qb.prototype._drainInertiaBuffer=function(){for(var a=this._inertia,b=oa.now();2<a.length&&160<b-a[0][0];)a.shift()};var Ec={scrollZoom:$b,boxZoom:fc,dragRotate:Pb,dragPan:Xb,keyboard:tb,doubleClickZoom:Lc,touchZoomRotate:Qb},Ce=function(b){function c(c,d){b.call(this);this._zooming=this._moving=!1;this.transform=c;this._bearingSnap=
d.bearingSnap;a.bindAll(["_renderFrameCallback"],this)}return b&&(c.__proto__=b),c.prototype=Object.create(b&&b.prototype),c.prototype.constructor=c,c.prototype.getCenter=function(){return this.transform.center},c.prototype.setCenter=function(a,b){return this.jumpTo({center:a},b)},c.prototype.panBy=function(b,c,d){return b=a.default$1.convert(b).mult(-1),this.panTo(this.transform.center,a.extend({offset:b},c),d)},c.prototype.panTo=function(b,c,d){return this.easeTo(a.extend({center:b},c),d)},c.prototype.getZoom=
function(){return this.transform.zoom},c.prototype.setZoom=function(a,b){return this.jumpTo({zoom:a},b),this},c.prototype.zoomTo=function(b,c,d){return this.easeTo(a.extend({zoom:b},c),d)},c.prototype.zoomIn=function(a,b){return this.zoomTo(this.getZoom()+1,a,b),this},c.prototype.zoomOut=function(a,b){return this.zoomTo(this.getZoom()-1,a,b),this},c.prototype.getBearing=function(){return this.transform.bearing},c.prototype.setBearing=function(a,b){return this.jumpTo({bearing:a},b),this},c.prototype.rotateTo=
function(b,c,d){return this.easeTo(a.extend({bearing:b},c),d)},c.prototype.resetNorth=function(b,c){return this.rotateTo(0,a.extend({duration:1E3},b),c),this},c.prototype.snapToNorth=function(a,b){return Math.abs(this.getBearing())<this._bearingSnap?this.resetNorth(a,b):this},c.prototype.getPitch=function(){return this.transform.pitch},c.prototype.setPitch=function(a,b){return this.jumpTo({pitch:a},b),this},c.prototype.fitBounds=function(b,c,d){if("number"==typeof(c=a.extend({padding:{top:0,bottom:0,
right:0,left:0},offset:[0,0],maxZoom:this.transform.maxZoom},c)).padding){var e=c.padding;c.padding={top:e,bottom:e,right:e,left:e}}if(!a.default$10(Object.keys(c.padding).sort(function(a,b){return a<b?-1:a>b?1:0}),["bottom","left","right","top"]))return a.warnOnce("options.padding must be a positive number, or an Object with keys 'bottom', 'left', 'right', 'top'"),this;b=Va.convert(b);var g=[(c.padding.left-c.padding.right)/2,(c.padding.top-c.padding.bottom)/2],f=Math.min(c.padding.right,c.padding.left);
e=Math.min(c.padding.top,c.padding.bottom);c.offset=[c.offset[0]+g[0],c.offset[1]+g[1]];var h=a.default$1.convert(c.offset);g=this.transform;var k=g.project(b.getNorthWest());b=g.project(b.getSouthEast());var n=b.sub(k);f=(g.width-2*f-2*Math.abs(h.x))/n.x;e=(g.height-2*e-2*Math.abs(h.y))/n.y;return 0>e||0>f?(a.warnOnce("Map cannot fit within canvas with the given bounds, padding, and/or offset."),this):(c.center=g.unproject(k.add(b).div(2)),c.zoom=Math.min(g.scaleZoom(g.scale*Math.min(f,e)),c.maxZoom),
c.bearing=0,c.linear?this.easeTo(c,d):this.flyTo(c,d))},c.prototype.jumpTo=function(b,c){this.stop();var d=this.transform,e=!1,g=!1,f=!1;return"zoom"in b&&d.zoom!==+b.zoom&&(e=!0,d.zoom=+b.zoom),void 0!==b.center&&(d.center=Oa.convert(b.center)),"bearing"in b&&d.bearing!==+b.bearing&&(g=!0,d.bearing=+b.bearing),"pitch"in b&&d.pitch!==+b.pitch&&(f=!0,d.pitch=+b.pitch),this.fire(new a.Event("movestart",c)).fire(new a.Event("move",c)),e&&this.fire(new a.Event("zoomstart",c)).fire(new a.Event("zoom",
c)).fire(new a.Event("zoomend",c)),g&&this.fire(new a.Event("rotatestart",c)).fire(new a.Event("rotate",c)).fire(new a.Event("rotateend",c)),f&&this.fire(new a.Event("pitchstart",c)).fire(new a.Event("pitch",c)).fire(new a.Event("pitchend",c)),this.fire(new a.Event("moveend",c))},c.prototype.easeTo=function(b,c){var d=this;this.stop();!1===(b=a.extend({offset:[0,0],duration:500,easing:a.ease},b)).animate&&(b.duration=0);var e=this.transform,g=this.getZoom(),f=this.getBearing(),h=this.getPitch(),k=
"zoom"in b?+b.zoom:g,n="bearing"in b?this._normalizeBearing(b.bearing,f):f,t="pitch"in b?+b.pitch:h,m=e.centerPoint.add(a.default$1.convert(b.offset)),v=e.pointLocation(m),r=Oa.convert(b.center||v);this._normalizeCenter(r);var u,l,p=e.project(v),y=e.project(r).sub(p),q=e.zoomScale(k-g);return b.around&&(u=Oa.convert(b.around),l=e.locationPoint(u)),this._zooming=k!==g,this._rotating=f!==n,this._pitching=t!==h,this._prepareEase(c,b.noMoveStart),clearTimeout(this._easeEndTimeoutID),this._ease(function(b){if(d._zooming&&
(e.zoom=a.number(g,k,b)),d._rotating&&(e.bearing=a.number(f,n,b)),d._pitching&&(e.pitch=a.number(h,t,b)),u)e.setLocationAtPoint(u,l);else{var v=e.zoomScale(e.zoom-g);b=e.unproject(p.add(y.mult(b*Math.pow(k>g?Math.min(2,q):Math.max(.5,q),1-b))).mult(v));e.setLocationAtPoint(e.renderWorldCopies?b.wrap():b,m)}d._fireMoveEvents(c)},function(){b.delayEndEvents?d._easeEndTimeoutID=setTimeout(function(){return d._afterEase(c)},b.delayEndEvents):d._afterEase(c)},b),this},c.prototype._prepareEase=function(b,
c){this._moving=!0;c||this.fire(new a.Event("movestart",b));this._zooming&&this.fire(new a.Event("zoomstart",b));this._rotating&&this.fire(new a.Event("rotatestart",b));this._pitching&&this.fire(new a.Event("pitchstart",b))},c.prototype._fireMoveEvents=function(b){this.fire(new a.Event("move",b));this._zooming&&this.fire(new a.Event("zoom",b));this._rotating&&this.fire(new a.Event("rotate",b));this._pitching&&this.fire(new a.Event("pitch",b))},c.prototype._afterEase=function(b){var c=this._zooming,
d=this._rotating,e=this._pitching;this._pitching=this._rotating=this._zooming=this._moving=!1;c&&this.fire(new a.Event("zoomend",b));d&&this.fire(new a.Event("rotateend",b));e&&this.fire(new a.Event("pitchend",b));this.fire(new a.Event("moveend",b))},c.prototype.flyTo=function(b,c){function d(a){a=(D*D-A*A+(a?-1:1)*G*G*C*C)/(2*(a?D:A)*G*C);return Math.log(Math.sqrt(a*a+1)-a)}function e(a){return(Math.exp(a)+Math.exp(-a))/2}var g=this;this.stop();b=a.extend({offset:[0,0],speed:1.2,curve:1.42,easing:a.ease},
b);var f=this.transform,h=this.getZoom(),k=this.getBearing(),n=this.getPitch(),t="zoom"in b?a.clamp(+b.zoom,f.minZoom,f.maxZoom):h,m="bearing"in b?this._normalizeBearing(b.bearing,k):k,v="pitch"in b?+b.pitch:n,r=f.zoomScale(t-h),u=f.centerPoint.add(a.default$1.convert(b.offset)),l=f.pointLocation(u),p=Oa.convert(b.center||l);this._normalizeCenter(p);var y=f.project(l),q=f.project(p).sub(y),B=b.curve,A=Math.max(f.width,f.height),D=A/r,C=q.mag();"minZoom"in b&&(t=a.clamp(Math.min(b.minZoom,h,t),f.minZoom,
f.maxZoom),t=A/f.zoomScale(t-h),B=Math.sqrt(t/C*2));var G=B*B,L=d(0),E=function(a){return e(L)/e(L+B*a)},I=function(a){var b=e(L);a=c=L+B*a;return A*((b*((Math.exp(a)-Math.exp(-a))/2/e(c))-(Math.exp(L)-Math.exp(-L))/2)/G)/C;var c},N=(d(1)-L)/B;if(1E-6>Math.abs(C)||!isFinite(N)){if(1E-6>Math.abs(A-D))return this.easeTo(b,c);var J=D<A?-1:1;N=Math.abs(Math.log(D/A))/B;I=function(){return 0};E=function(a){return Math.exp(J*B*a)}}b.duration="duration"in b?+b.duration:1E3*N/("screenSpeed"in b?+b.screenSpeed/
B:+b.speed);return b.maxDuration&&b.duration>b.maxDuration&&(b.duration=0),this._zooming=!0,this._rotating=k!==m,this._pitching=v!==n,this._prepareEase(c,!1),this._ease(function(b){var d=b*N,e=1/E(d);f.zoom=h+f.scaleZoom(e);g._rotating&&(f.bearing=a.number(k,m,b));g._pitching&&(f.pitch=a.number(n,v,b));b=f.unproject(y.add(q.mult(I(d))).mult(e));f.setLocationAtPoint(f.renderWorldCopies?b.wrap():b,u);g._fireMoveEvents(c)},function(){return g._afterEase(c)},b),this},c.prototype.isEasing=function(){return!!this._easeFrameId},
c.prototype.stop=function(){if(this._easeFrameId&&(this._cancelRenderFrame(this._easeFrameId),delete this._easeFrameId,delete this._onEaseFrame),this._onEaseEnd){var a=this._onEaseEnd;delete this._onEaseEnd;a.call(this)}return this},c.prototype._ease=function(a,b,c){!1===c.animate||0===c.duration?(a(1),b()):(this._easeStart=oa.now(),this._easeOptions=c,this._onEaseFrame=a,this._onEaseEnd=b,this._easeFrameId=this._requestRenderFrame(this._renderFrameCallback))},c.prototype._renderFrameCallback=function(){var a=
Math.min((oa.now()-this._easeStart)/this._easeOptions.duration,1);this._onEaseFrame(this._easeOptions.easing(a));1>a?this._easeFrameId=this._requestRenderFrame(this._renderFrameCallback):this.stop()},c.prototype._normalizeBearing=function(b,c){b=a.wrap(b,-180,180);var d=Math.abs(b-c);return Math.abs(b-360-c)<d&&(b-=360),Math.abs(b+360-c)<d&&(b+=360),b},c.prototype._normalizeCenter=function(a){var b=this.transform;b.renderWorldCopies&&!b.lngRange&&(b=a.lng-b.center.lng,a.lng+=180<b?-360:-180>b?360:
0)},c}(a.Evented),cc=function(b){void 0===b&&(b={});this.options=b;a.bindAll(["_updateEditLink","_updateData","_updateCompact"],this)};cc.prototype.getDefaultPosition=function(){return"bottom-right"};cc.prototype.onAdd=function(a){var b=this.options&&this.options.compact;return this._map=a,this._container=na.create("div","mapboxgl-ctrl mapboxgl-ctrl-attrib"),b&&this._container.classList.add("mapboxgl-compact"),this._updateAttributions(),this._updateEditLink(),this._map.on("sourcedata",this._updateData),
this._map.on("moveend",this._updateEditLink),void 0===b&&(this._map.on("resize",this._updateCompact),this._updateCompact()),this._container};cc.prototype.onRemove=function(){na.remove(this._container);this._map.off("sourcedata",this._updateData);this._map.off("moveend",this._updateEditLink);this._map.off("resize",this._updateCompact);this._map=void 0};cc.prototype._updateEditLink=function(){var a=this._editLink;a||(a=this._editLink=this._container.querySelector(".mapbox-improve-map"));var b=[{key:"owner",
value:this.styleOwner},{key:"id",value:this.styleId},{key:"access_token",value:Ua.ACCESS_TOKEN}];if(a){var c=b.reduce(function(a,c,d){return c.value&&(a+=c.key+"\x3d"+c.value+(d<b.length-1?"\x26":"")),a},"?");a.href="https://www.mapbox.com/feedback/"+c+(this._map._hash?this._map._hash.getHashString(!0):"")}};cc.prototype._updateData=function(a){a&&"metadata"===a.sourceDataType&&(this._updateAttributions(),this._updateEditLink())};cc.prototype._updateAttributions=function(){if(this._map.style){var a=
[];if(this._map.style.stylesheet){var b=this._map.style.stylesheet;this.styleOwner=b.owner;this.styleId=b.id}b=this._map.style.sourceCaches;for(var c in b){var d=b[c].getSource();d.attribution&&0>a.indexOf(d.attribution)&&a.push(d.attribution)}a.sort(function(a,b){return a.length-b.length});(a=a.filter(function(b,c){for(c+=1;c<a.length;c++)if(0<=a[c].indexOf(b))return!1;return!0})).length?(this._container.innerHTML=a.join(" | "),this._container.classList.remove("mapboxgl-attrib-empty")):this._container.classList.add("mapboxgl-attrib-empty");
this._editLink=null}};cc.prototype._updateCompact=function(){640>=this._map.getCanvasContainer().offsetWidth?this._container.classList.add("mapboxgl-compact"):this._container.classList.remove("mapboxgl-compact")};var ee=function(){a.bindAll(["_updateLogo"],this)};ee.prototype.onAdd=function(a){this._map=a;this._container=na.create("div","mapboxgl-ctrl");a=na.create("a","mapboxgl-ctrl-logo");return a.target="_blank",a.href="https://www.mapbox.com/",a.setAttribute("aria-label","Mapbox logo"),this._container.appendChild(a),
this._container.style.display="none",this._map.on("sourcedata",this._updateLogo),this._updateLogo(),this._container};ee.prototype.onRemove=function(){na.remove(this._container);this._map.off("sourcedata",this._updateLogo)};ee.prototype.getDefaultPosition=function(){return"bottom-left"};ee.prototype._updateLogo=function(a){a&&"metadata"!==a.sourceDataType||(this._container.style.display=this._logoRequired()?"block":"none")};ee.prototype._logoRequired=function(){if(this._map.style){var a=this._map.style.sourceCaches,
b;for(b in a)if(a[b].getSource().mapbox_logo)return!0;return!1}};var Fc=function(){this._queue=[];this._id=0;this._currentlyRunning=this._cleared=!1};Fc.prototype.add=function(a){var b=++this._id;return this._queue.push({callback:a,id:b,cancelled:!1}),b};Fc.prototype.remove=function(a){var b=this._currentlyRunning,c=0;for(b=b?this._queue.concat(b):this._queue;c<b.length;c+=1){var d=b[c];if(d.id===a)return void(d.cancelled=!0)}};Fc.prototype.run=function(){var a=this._currentlyRunning=this._queue;
this._queue=[];for(var b=0;b<a.length;b+=1){var c=a[b];if(!c.cancelled&&(c.callback(),this._cleared))break}this._currentlyRunning=this._cleared=!1};Fc.prototype.clear=function(){this._currentlyRunning&&(this._cleared=!0);this._queue=[]};var $f=a.default.HTMLImageElement,Hd=a.default.HTMLElement,fe={center:[0,0],zoom:0,bearing:0,pitch:0,minZoom:0,maxZoom:22,interactive:!0,scrollZoom:!0,boxZoom:!0,dragRotate:!0,dragPan:!0,keyboard:!0,doubleClickZoom:!0,touchZoomRotate:!0,bearingSnap:7,hash:!1,attributionControl:!0,
failIfMajorPerformanceCaveat:!1,preserveDrawingBuffer:!1,trackResize:!0,renderWorldCopies:!0,refreshExpiredTiles:!0,maxTileCacheSize:null,transformRequest:null,fadeDuration:300},Mc=function(b){function c(c){if(null!=(c=a.extend({},fe,c)).minZoom&&null!=c.maxZoom&&c.minZoom>c.maxZoom)throw Error("maxZoom must be greater than minZoom");var d=new qb(c.minZoom,c.maxZoom,c.renderWorldCopies);b.call(this,d,c);this._interactive=c.interactive;this._maxTileCacheSize=c.maxTileCacheSize;this._failIfMajorPerformanceCaveat=
c.failIfMajorPerformanceCaveat;this._preserveDrawingBuffer=c.preserveDrawingBuffer;this._trackResize=c.trackResize;this._bearingSnap=c.bearingSnap;this._refreshExpiredTiles=c.refreshExpiredTiles;this._fadeDuration=c.fadeDuration;this._crossFadingFactor=1;this._collectResourceTiming=c.collectResourceTiming;this._renderTaskQueue=new Fc;var e=c.transformRequest;if(this._transformRequest=e?function(a,b){return e(a,b)||{url:a}}:function(a){return{url:a}},"string"==typeof c.container){d=a.default.document.getElementById(c.container);
if(!d)throw Error("Container '"+c.container+"' not found.");this._container=d}else{if(!(c.container instanceof Hd))throw Error("Invalid type: 'container' must be a String or HTMLElement.");this._container=c.container}c.maxBounds&&this.setMaxBounds(c.maxBounds);a.bindAll("_onWindowOnline _onWindowResize _contextLost _contextRestored _update _render _onData _onDataLoading".split(" "),this);this._setupContainer();this._setupPainter();this.on("move",this._update.bind(this,!1));this.on("zoom",this._update.bind(this,
!0));void 0!==a.default&&(a.default.addEventListener("online",this._onWindowOnline,!1),a.default.addEventListener("resize",this._onWindowResize,!1));(function(a,b){var c=a.getCanvasContainer(),d=null,e=!1,g;for(g in Ec)a[g]=new Ec[g](a,b),b.interactive&&b[g]&&a[g].enable(b[g]);na.addEventListener(c,"mouseout",function(b){a.fire(new Da("mouseout",a,b))});na.addEventListener(c,"mousedown",function(c){e=!0;var d=new Da("mousedown",a,c);a.fire(d);d.defaultPrevented||(b.interactive&&!a.doubleClickZoom.isActive()&&
a.stop(),a.boxZoom.onMouseDown(c),a.boxZoom.isActive()||a.dragPan.isActive()||a.dragRotate.onMouseDown(c),a.boxZoom.isActive()||a.dragRotate.isActive()||a.dragPan.onMouseDown(c))});na.addEventListener(c,"mouseup",function(b){var c=a.dragRotate.isActive();d&&!c&&a.fire(new Da("contextmenu",a,d));d=null;e=!1;a.fire(new Da("mouseup",a,b))});na.addEventListener(c,"mousemove",function(b){if(!a.dragPan.isActive()&&!a.dragRotate.isActive()){for(var d=b.toElement||b.target;d&&d!==c;)d=d.parentNode;d===c&&
a.fire(new Da("mousemove",a,b))}});na.addEventListener(c,"mouseover",function(b){for(var d=b.toElement||b.target;d&&d!==c;)d=d.parentNode;d===c&&a.fire(new Da("mouseover",a,b))});na.addEventListener(c,"touchstart",function(c){var d=new Za("touchstart",a,c);a.fire(d);d.defaultPrevented||(b.interactive&&a.stop(),a.boxZoom.isActive()||a.dragRotate.isActive()||a.dragPan.onTouchStart(c),a.touchZoomRotate.onStart(c),a.doubleClickZoom.onTouchStart(d))},{passive:!1});na.addEventListener(c,"touchmove",function(b){a.fire(new Za("touchmove",
a,b))},{passive:!1});na.addEventListener(c,"touchend",function(b){a.fire(new Za("touchend",a,b))});na.addEventListener(c,"touchcancel",function(b){a.fire(new Za("touchcancel",a,b))});na.addEventListener(c,"click",function(b){a.fire(new Da("click",a,b))});na.addEventListener(c,"dblclick",function(b){b=new Da("dblclick",a,b);a.fire(b);b.defaultPrevented||a.doubleClickZoom.onDblClick(b)});na.addEventListener(c,"contextmenu",function(b){var c=a.dragRotate.isActive();e||c?e&&(d=b):a.fire(new Da("contextmenu",
a,b));b.preventDefault()});na.addEventListener(c,"wheel",function(b){var c=new ob("wheel",a,b);a.fire(c);c.defaultPrevented||a.scrollZoom.onWheel(b)},{passive:!1})})(this,c);(this._hash=c.hash&&(new Wc).addTo(this))&&this._hash._onHashChange()||this.jumpTo({center:c.center,zoom:c.zoom,bearing:c.bearing,pitch:c.pitch});this.resize();c.style&&this.setStyle(c.style,{localIdeographFontFamily:c.localIdeographFontFamily});c.attributionControl&&this.addControl(new cc);this.addControl(new ee,c.logoPosition);
this.on("style.load",function(){this.transform.unmodified&&this.jumpTo(this.style.stylesheet)});this.on("data",this._onData);this.on("dataloading",this._onDataLoading)}b&&(c.__proto__=b);c.prototype=Object.create(b&&b.prototype);c.prototype.constructor=c;var d={showTileBoundaries:{configurable:!0},showCollisionBoxes:{configurable:!0},showOverdrawInspector:{configurable:!0},repaint:{configurable:!0},vertices:{configurable:!0}};return c.prototype.addControl=function(a,b){void 0===b&&a.getDefaultPosition&&
(b=a.getDefaultPosition());void 0===b&&(b="top-right");a=a.onAdd(this);var c=this._controlPositions[b];return-1!==b.indexOf("bottom")?c.insertBefore(a,c.firstChild):c.appendChild(a),this},c.prototype.removeControl=function(a){return a.onRemove(this),this},c.prototype.resize=function(b){var c=this._containerDimensions(),d=c[0];c=c[1];return this._resizeCanvas(d,c),this.transform.resize(d,c),this.painter.resize(d,c),this.fire(new a.Event("movestart",b)).fire(new a.Event("move",b)).fire(new a.Event("resize",
b)).fire(new a.Event("moveend",b))},c.prototype.getBounds=function(){var b=new Va(this.transform.pointLocation(new a.default$1(0,this.transform.height)),this.transform.pointLocation(new a.default$1(this.transform.width,0)));return(this.transform.angle||this.transform.pitch)&&(b.extend(this.transform.pointLocation(new a.default$1(this.transform.size.x,0))),b.extend(this.transform.pointLocation(new a.default$1(0,this.transform.size.y)))),b},c.prototype.getMaxBounds=function(){return this.transform.latRange&&
2===this.transform.latRange.length&&this.transform.lngRange&&2===this.transform.lngRange.length?new Va([this.transform.lngRange[0],this.transform.latRange[0]],[this.transform.lngRange[1],this.transform.latRange[1]]):null},c.prototype.setMaxBounds=function(a){a?(a=Va.convert(a),this.transform.lngRange=[a.getWest(),a.getEast()],this.transform.latRange=[a.getSouth(),a.getNorth()],this.transform._constrain(),this._update()):null==a&&(this.transform.lngRange=null,this.transform.latRange=null,this._update());
return this},c.prototype.setMinZoom=function(a){if(0<=(a=null==a?0:a)&&a<=this.transform.maxZoom)return this.transform.minZoom=a,this._update(),this.getZoom()<a&&this.setZoom(a),this;throw Error("minZoom must be between 0 and the current maxZoom, inclusive");},c.prototype.getMinZoom=function(){return this.transform.minZoom},c.prototype.setMaxZoom=function(a){if((a=null==a?22:a)>=this.transform.minZoom)return this.transform.maxZoom=a,this._update(),this.getZoom()>a&&this.setZoom(a),this;throw Error("maxZoom must be greater than the current minZoom");
},c.prototype.getRenderWorldCopies=function(){return this.transform.renderWorldCopies},c.prototype.setRenderWorldCopies=function(a){return this.transform.renderWorldCopies=a,this._update(),this},c.prototype.getMaxZoom=function(){return this.transform.maxZoom},c.prototype.project=function(a){return this.transform.locationPoint(Oa.convert(a))},c.prototype.unproject=function(b){return this.transform.pointLocation(a.default$1.convert(b))},c.prototype.isMoving=function(){return this._moving||this.dragPan.isActive()||
this.dragRotate.isActive()||this.scrollZoom.isActive()},c.prototype.isZooming=function(){return this._zooming||this.scrollZoom.isActive()},c.prototype.isRotating=function(){return this._rotating||this.dragRotate.isActive()},c.prototype.on=function(a,c,d){var e,g=this;if(void 0===d)return b.prototype.on.call(this,a,c);var f=function(){if("mouseenter"===a||"mouseover"===a){var b=!1;return{layer:c,listener:d,delegates:{mousemove:function(e){var f=g.getLayer(c)?g.queryRenderedFeatures(e.point,{layers:[c]}):
[];f.length?b||(b=!0,d.call(g,new Da(a,g,e.originalEvent,{features:f}))):b=!1},mouseout:function(){b=!1}}}}if("mouseleave"===a||"mouseout"===a){var f=!1;return{layer:c,listener:d,delegates:{mousemove:function(b){(g.getLayer(c)?g.queryRenderedFeatures(b.point,{layers:[c]}):[]).length?f=!0:f&&(f=!1,d.call(g,new Da(a,g,b.originalEvent)))},mouseout:function(b){f&&(f=!1,d.call(g,new Da(a,g,b.originalEvent)))}}}}return{layer:c,listener:d,delegates:(e={},e[a]=function(a){var b=g.getLayer(c)?g.queryRenderedFeatures(a.point,
{layers:[c]}):[];b.length&&(a.features=b,d.call(g,a),delete a.features)},e)}}(),h;for(h in this._delegatedListeners=this._delegatedListeners||{},this._delegatedListeners[a]=this._delegatedListeners[a]||[],this._delegatedListeners[a].push(f),f.delegates)g.on(h,f.delegates[h]);return this},c.prototype.off=function(a,c,d){if(void 0===d)return b.prototype.off.call(this,a,c);if(this._delegatedListeners&&this._delegatedListeners[a]){a=this._delegatedListeners[a];for(var e=0;e<a.length;e++){var g=a[e];if(g.layer===
c&&g.listener===d){for(var f in g.delegates)this.off(f,g.delegates[f]);return a.splice(e,1),this}}}return this},c.prototype.queryRenderedFeatures=function(b,c){var d;return 2===arguments.length?(b=arguments[0],c=arguments[1]):1===arguments.length&&((d=arguments[0])instanceof a.default$1||Array.isArray(d))?(b=arguments[0],c={}):1===arguments.length?(b=void 0,c=arguments[0]):(b=void 0,c={}),this.style?this.style.queryRenderedFeatures(this._makeQueryGeometry(b),c,this.transform):[]},c.prototype._makeQueryGeometry=
function(b){var c=this;(void 0===b&&(b=[a.default$1.convert([0,0]),a.default$1.convert([this.transform.width,this.transform.height])]),b instanceof a.default$1||"number"==typeof b[0])?b=[a.default$1.convert(b)]:(b=[a.default$1.convert(b[0]),a.default$1.convert(b[1])],b=[b[0],new a.default$1(b[1].x,b[0].y),b[1],new a.default$1(b[0].x,b[1].y),b[0]]);return{viewport:b,worldCoordinate:b.map(function(a){return c.transform.pointCoordinate(a)})}},c.prototype.querySourceFeatures=function(a,b){return this.style.querySourceFeatures(a,
b)},c.prototype.setStyle=function(b,c){if((!c||!1!==c.diff&&!c.localIdeographFontFamily)&&this.style&&b&&"object"==typeof b)try{return this.style.setState(b)&&this._update(!0),this}catch(Se){a.warnOnce("Unable to perform style diff: "+(Se.message||Se.error||Se)+".  Rebuilding the style from scratch.")}return this.style&&(this.style.setEventedParent(null),this.style._remove()),b?(this.style=new re(this,c||{}),this.style.setEventedParent(this,{style:this.style}),"string"==typeof b?this.style.loadURL(b):
this.style.loadJSON(b),this):(delete this.style,this)},c.prototype.getStyle=function(){if(this.style)return this.style.serialize()},c.prototype.isStyleLoaded=function(){return this.style?this.style.loaded():a.warnOnce("There is no style added to the map.")},c.prototype.addSource=function(a,b){return this.style.addSource(a,b),this._update(!0),this},c.prototype.isSourceLoaded=function(b){var c=this.style&&this.style.sourceCaches[b];if(void 0!==c)return c.loaded();this.fire(new a.ErrorEvent(Error("There is no source with ID '"+
b+"'")))},c.prototype.areTilesLoaded=function(){var a=this.style&&this.style.sourceCaches,b;for(b in a){var c=a[b]._tiles,d;for(d in c){var e=c[d];if("loaded"!==e.state&&"errored"!==e.state)return!1}}return!0},c.prototype.addSourceType=function(a,b,c){return this.style.addSourceType(a,b,c)},c.prototype.removeSource=function(a){return this.style.removeSource(a),this._update(!0),this},c.prototype.getSource=function(a){return this.style.getSource(a)},c.prototype.addImage=function(b,c,d){void 0===d&&
(d={});var e=d.pixelRatio;void 0===e&&(e=1);d=d.sdf;if(void 0===d&&(d=!1),c instanceof $f)c=oa.getImageData(c),this.style.addImage(b,{data:new a.RGBAImage({width:c.width,height:c.height},c.data),pixelRatio:e,sdf:d});else{if(void 0===c.width||void 0===c.height)return this.fire(new a.ErrorEvent(Error("Invalid arguments to map.addImage(). The second argument must be an `HTMLImageElement`, `ImageData`, or object with `width`, `height`, and `data` properties with the same format as `ImageData`")));this.style.addImage(b,
{data:new a.RGBAImage({width:c.width,height:c.height},c.data.slice(0)),pixelRatio:e,sdf:d})}},c.prototype.hasImage=function(b){return b?!!this.style.getImage(b):(this.fire(new a.ErrorEvent(Error("Missing required image id"))),!1)},c.prototype.removeImage=function(a){this.style.removeImage(a)},c.prototype.loadImage=function(b,c){a.getImage(this._transformRequest(b,a.ResourceType.Image),c)},c.prototype.addLayer=function(a,b){return this.style.addLayer(a,b),this._update(!0),this},c.prototype.moveLayer=
function(a,b){return this.style.moveLayer(a,b),this._update(!0),this},c.prototype.removeLayer=function(a){return this.style.removeLayer(a),this._update(!0),this},c.prototype.getLayer=function(a){return this.style.getLayer(a)},c.prototype.setFilter=function(a,b){return this.style.setFilter(a,b),this._update(!0),this},c.prototype.setLayerZoomRange=function(a,b,c){return this.style.setLayerZoomRange(a,b,c),this._update(!0),this},c.prototype.getFilter=function(a){return this.style.getFilter(a)},c.prototype.setPaintProperty=
function(a,b,c){return this.style.setPaintProperty(a,b,c),this._update(!0),this},c.prototype.getPaintProperty=function(a,b){return this.style.getPaintProperty(a,b)},c.prototype.setLayoutProperty=function(a,b,c){return this.style.setLayoutProperty(a,b,c),this._update(!0),this},c.prototype.getLayoutProperty=function(a,b){return this.style.getLayoutProperty(a,b)},c.prototype.setLight=function(a){return this.style.setLight(a),this._update(!0),this},c.prototype.getLight=function(){return this.style.getLight()},
c.prototype.getContainer=function(){return this._container},c.prototype.getCanvasContainer=function(){return this._canvasContainer},c.prototype.getCanvas=function(){return this._canvas},c.prototype._containerDimensions=function(){var a=0,b=0;return this._container&&(a=this._container.offsetWidth||400,b=this._container.offsetHeight||300),[a,b]},c.prototype._setupContainer=function(){var a=this._container;a.classList.add("mapboxgl-map");(this._missingCSSContainer=na.create("div","mapboxgl-missing-css",
a)).innerHTML="Missing Mapbox GL JS CSS";var b=this._canvasContainer=na.create("div","mapboxgl-canvas-container",a);this._interactive&&b.classList.add("mapboxgl-interactive");this._canvas=na.create("canvas","mapboxgl-canvas",b);this._canvas.style.position="absolute";this._canvas.addEventListener("webglcontextlost",this._contextLost,!1);this._canvas.addEventListener("webglcontextrestored",this._contextRestored,!1);this._canvas.setAttribute("tabindex","0");this._canvas.setAttribute("aria-label","Map");
b=this._containerDimensions();this._resizeCanvas(b[0],b[1]);var c=this._controlContainer=na.create("div","mapboxgl-control-container",a),d=this._controlPositions={};["top-left","top-right","bottom-left","bottom-right"].forEach(function(a){d[a]=na.create("div","mapboxgl-ctrl-"+a,c)})},c.prototype._resizeCanvas=function(b,c){var d=a.default.devicePixelRatio||1;this._canvas.width=d*b;this._canvas.height=d*c;this._canvas.style.width=b+"px";this._canvas.style.height=c+"px"},c.prototype._setupPainter=function(){var b=
a.extend({failIfMajorPerformanceCaveat:this._failIfMajorPerformanceCaveat,preserveDrawingBuffer:this._preserveDrawingBuffer},sa.webGLContextAttributes);(b=this._canvas.getContext("webgl",b)||this._canvas.getContext("experimental-webgl",b))?this.painter=new ec(b,this.transform):this.fire(new a.ErrorEvent(Error("Failed to initialize WebGL")))},c.prototype._contextLost=function(b){b.preventDefault();this._frameId&&(oa.cancelFrame(this._frameId),this._frameId=null);this.fire(new a.Event("webglcontextlost",
{originalEvent:b}))},c.prototype._contextRestored=function(b){this._setupPainter();this.resize();this._update();this.fire(new a.Event("webglcontextrestored",{originalEvent:b}))},c.prototype.loaded=function(){return!this._styleDirty&&!this._sourcesDirty&&!(!this.style||!this.style.loaded())},c.prototype._update=function(a){this.style&&(this._styleDirty=this._styleDirty||a,this._sourcesDirty=!0,this._rerender())},c.prototype._requestRenderFrame=function(a){return this._update(),this._renderTaskQueue.add(a)},
c.prototype._cancelRenderFrame=function(a){this._renderTaskQueue.remove(a)},c.prototype._render=function(){this._renderTaskQueue.run();var b=!1;if(this.style&&this._styleDirty){this._styleDirty=!1;var c=this.transform.zoom,d=oa.now();this.style.zoomHistory.update(c,d);c=new a.default$16(c,{now:d,fadeDuration:this._fadeDuration,zoomHistory:this.style.zoomHistory,transition:this.style.getTransition()});d=c.crossFadingFactor();1===d&&d===this._crossFadingFactor||(b=!0,this._crossFadingFactor=d);this.style.update(c)}return this.style&&
this._sourcesDirty&&(this._sourcesDirty=!1,this.style._updateSources(this.transform)),this._placementDirty=this.style&&this.style._updatePlacement(this.painter.transform,this.showCollisionBoxes,this._fadeDuration),this.painter.render(this.style,{showTileBoundaries:this.showTileBoundaries,showOverdrawInspector:this._showOverdrawInspector,rotating:this.isRotating(),zooming:this.isZooming(),fadeDuration:this._fadeDuration}),this.fire(new a.Event("render")),this.loaded()&&!this._loaded&&(this._loaded=
!0,this.fire(new a.Event("load"))),this.style&&(this.style.hasTransitions()||b)&&(this._styleDirty=!0),(this._sourcesDirty||this._repaint||this._styleDirty||this._placementDirty)&&this._rerender(),this},c.prototype.remove=function(){this._hash&&this._hash.remove();oa.cancelFrame(this._frameId);this._renderTaskQueue.clear();this._frameId=null;this.setStyle(null);void 0!==a.default&&(a.default.removeEventListener("resize",this._onWindowResize,!1),a.default.removeEventListener("online",this._onWindowOnline,
!1));var b=this.painter.context.gl.getExtension("WEBGL_lose_context");b&&b.loseContext();ta(this._canvasContainer);ta(this._controlContainer);ta(this._missingCSSContainer);this._container.classList.remove("mapboxgl-map");this.fire(new a.Event("remove"))},c.prototype._rerender=function(){var a=this;this.style&&!this._frameId&&(this._frameId=oa.frame(function(){a._frameId=null;a._render()}))},c.prototype._onWindowOnline=function(){this._update()},c.prototype._onWindowResize=function(){this._trackResize&&
this.stop().resize()._update()},d.showTileBoundaries.get=function(){return!!this._showTileBoundaries},d.showTileBoundaries.set=function(a){this._showTileBoundaries!==a&&(this._showTileBoundaries=a,this._update())},d.showCollisionBoxes.get=function(){return!!this._showCollisionBoxes},d.showCollisionBoxes.set=function(a){this._showCollisionBoxes!==a&&(this._showCollisionBoxes=a,a?this.style._generateCollisionBoxes():this._update())},d.showOverdrawInspector.get=function(){return!!this._showOverdrawInspector},
d.showOverdrawInspector.set=function(a){this._showOverdrawInspector!==a&&(this._showOverdrawInspector=a,this._update())},d.repaint.get=function(){return!!this._repaint},d.repaint.set=function(a){this._repaint=a;this._update()},d.vertices.get=function(){return!!this._vertices},d.vertices.set=function(a){this._vertices=a;this._update()},c.prototype._onData=function(b){this._update("style"===b.dataType);this.fire(new a.Event(b.dataType+"data",b))},c.prototype._onDataLoading=function(b){this.fire(new a.Event(b.dataType+
"dataloading",b))},Object.defineProperties(c.prototype,d),c}(Ce),Rb={showCompass:!0,showZoom:!0},dd=function(b){var c=this;this.options=a.extend({},Rb,b);this._container=na.create("div","mapboxgl-ctrl mapboxgl-ctrl-group");this._container.addEventListener("contextmenu",function(a){return a.preventDefault()});this.options.showZoom&&(this._zoomInButton=this._createButton("mapboxgl-ctrl-icon mapboxgl-ctrl-zoom-in","Zoom In",function(){return c._map.zoomIn()}),this._zoomOutButton=this._createButton("mapboxgl-ctrl-icon mapboxgl-ctrl-zoom-out",
"Zoom Out",function(){return c._map.zoomOut()}));this.options.showCompass&&(a.bindAll(["_rotateCompassArrow"],this),this._compass=this._createButton("mapboxgl-ctrl-icon mapboxgl-ctrl-compass","Reset North",function(){return c._map.resetNorth()}),this._compassArrow=na.create("span","mapboxgl-ctrl-compass-arrow",this._compass))};dd.prototype._rotateCompassArrow=function(){this._compassArrow.style.transform="rotate("+180/Math.PI*this._map.transform.angle+"deg)"};dd.prototype.onAdd=function(a){return this._map=
a,this.options.showCompass&&(this._map.on("rotate",this._rotateCompassArrow),this._rotateCompassArrow(),this._handler=new Pb(a,{button:"left",element:this._compass}),this._handler.enable()),this._container};dd.prototype.onRemove=function(){na.remove(this._container);this.options.showCompass&&(this._map.off("rotate",this._rotateCompassArrow),this._handler.disable(),delete this._handler);delete this._map};dd.prototype._createButton=function(a,b,c){a=na.create("button",a,this._container);return a.type=
"button",a.setAttribute("aria-label",b),a.addEventListener("click",c),a};var rd={center:"translate(-50%,-50%)",top:"translate(-50%,0)","top-left":"translate(0,0)","top-right":"translate(-100%,0)",bottom:"translate(-50%,-100%)","bottom-left":"translate(0,-100%)","bottom-right":"translate(-100%,-100%)",left:"translate(0,-50%)",right:"translate(-100%,-50%)"},gc=function(b){if((arguments[0]instanceof a.default.HTMLElement||2===arguments.length)&&(b=a.extend({element:b},arguments[1])),a.bindAll(["_update",
"_onMapClick"],this),this._anchor=b&&b.anchor||"center",this._color=b&&b.color||"#3FB1CE",b&&b.element)this._element=b.element,this._offset=a.default$1.convert(b&&b.offset||[0,0]);else{this._defaultMarker=!0;this._element=na.create("div");var c=na.createNS("http://www.w3.org/2000/svg","svg");c.setAttributeNS(null,"height","41px");c.setAttributeNS(null,"width","27px");c.setAttributeNS(null,"viewBox","0 0 27 41");var d=na.createNS("http://www.w3.org/2000/svg","g");d.setAttributeNS(null,"stroke","none");
d.setAttributeNS(null,"stroke-width","1");d.setAttributeNS(null,"fill","none");d.setAttributeNS(null,"fill-rule","evenodd");d=na.createNS("http://www.w3.org/2000/svg","g");d.setAttributeNS(null,"fill-rule","nonzero");var e=na.createNS("http://www.w3.org/2000/svg","g");e.setAttributeNS(null,"transform","translate(3.0, 29.0)");e.setAttributeNS(null,"fill","#000000");for(var g=0,f=[{rx:"10.5",ry:"5.25002273"},{rx:"10.5",ry:"5.25002273"},{rx:"9.5",ry:"4.77275007"},{rx:"8.5",ry:"4.29549936"},{rx:"7.5",
ry:"3.81822308"},{rx:"6.5",ry:"3.34094679"},{rx:"5.5",ry:"2.86367051"},{rx:"4.5",ry:"2.38636864"}];g<f.length;g+=1){var h=f[g],k=na.createNS("http://www.w3.org/2000/svg","ellipse");k.setAttributeNS(null,"opacity","0.04");k.setAttributeNS(null,"cx","10.5");k.setAttributeNS(null,"cy","5.80029008");k.setAttributeNS(null,"rx",h.rx);k.setAttributeNS(null,"ry",h.ry);e.appendChild(k)}g=na.createNS("http://www.w3.org/2000/svg","g");g.setAttributeNS(null,"fill",this._color);f=na.createNS("http://www.w3.org/2000/svg",
"path");f.setAttributeNS(null,"d","M27,13.5 C27,19.074644 20.250001,27.000002 14.75,34.500002 C14.016665,35.500004 12.983335,35.500004 12.25,34.500002 C6.7499993,27.000002 0,19.222562 0,13.5 C0,6.0441559 6.0441559,0 13.5,0 C20.955844,0 27,6.0441559 27,13.5 Z");g.appendChild(f);f=na.createNS("http://www.w3.org/2000/svg","g");f.setAttributeNS(null,"opacity","0.25");f.setAttributeNS(null,"fill","#000000");h=na.createNS("http://www.w3.org/2000/svg","path");h.setAttributeNS(null,"d","M13.5,0 C6.0441559,0 0,6.0441559 0,13.5 C0,19.222562 6.7499993,27 12.25,34.5 C13,35.522727 14.016664,35.500004 14.75,34.5 C20.250001,27 27,19.074644 27,13.5 C27,6.0441559 20.955844,0 13.5,0 Z M13.5,1 C20.415404,1 26,6.584596 26,13.5 C26,15.898657 24.495584,19.181431 22.220703,22.738281 C19.945823,26.295132 16.705119,30.142167 13.943359,33.908203 C13.743445,34.180814 13.612715,34.322738 13.5,34.441406 C13.387285,34.322738 13.256555,34.180814 13.056641,33.908203 C10.284481,30.127985 7.4148684,26.314159 5.015625,22.773438 C2.6163816,19.232715 1,15.953538 1,13.5 C1,6.584596 6.584596,1 13.5,1 Z");
f.appendChild(h);h=na.createNS("http://www.w3.org/2000/svg","g");h.setAttributeNS(null,"transform","translate(6.0, 7.0)");h.setAttributeNS(null,"fill","#FFFFFF");k=na.createNS("http://www.w3.org/2000/svg","g");k.setAttributeNS(null,"transform","translate(8.0, 8.0)");var n=na.createNS("http://www.w3.org/2000/svg","circle");n.setAttributeNS(null,"fill","#000000");n.setAttributeNS(null,"opacity","0.25");n.setAttributeNS(null,"cx","5.5");n.setAttributeNS(null,"cy","5.5");n.setAttributeNS(null,"r","5.4999962");
var t=na.createNS("http://www.w3.org/2000/svg","circle");t.setAttributeNS(null,"fill","#FFFFFF");t.setAttributeNS(null,"cx","5.5");t.setAttributeNS(null,"cy","5.5");t.setAttributeNS(null,"r","5.4999962");k.appendChild(n);k.appendChild(t);d.appendChild(e);d.appendChild(g);d.appendChild(f);d.appendChild(h);d.appendChild(k);c.appendChild(d);this._element.appendChild(c);this._offset=a.default$1.convert(b&&b.offset||[0,-14])}this._element.classList.add("mapboxgl-marker");this._popup=null};gc.prototype.addTo=
function(a){return this.remove(),this._map=a,a.getCanvasContainer().appendChild(this._element),a.on("move",this._update),a.on("moveend",this._update),this._update(),this._map.on("click",this._onMapClick),this};gc.prototype.remove=function(){return this._map&&(this._map.off("click",this._onMapClick),this._map.off("move",this._update),this._map.off("moveend",this._update),delete this._map),na.remove(this._element),this._popup&&this._popup.remove(),this};gc.prototype.getLngLat=function(){return this._lngLat};
gc.prototype.setLngLat=function(a){return this._lngLat=Oa.convert(a),this._pos=null,this._popup&&this._popup.setLngLat(this._lngLat),this._update(),this};gc.prototype.getElement=function(){return this._element};gc.prototype.setPopup=function(a){if(this._popup&&(this._popup.remove(),this._popup=null),a){if(!("offset"in a.options)){var b=Math.sqrt(Math.pow(13.5,2)/2);a.options.offset=this._defaultMarker?{top:[0,0],"top-left":[0,0],"top-right":[0,0],bottom:[0,-38.1],"bottom-left":[b,-1*(24.6+b)],"bottom-right":[-b,
-1*(24.6+b)],left:[13.5,-24.6],right:[-13.5,-24.6]}:this._offset}this._popup=a;this._lngLat&&this._popup.setLngLat(this._lngLat)}return this};gc.prototype._onMapClick=function(a){a=a.originalEvent.target;var b=this._element;this._popup&&(a===b||b.contains(a))&&this.togglePopup()};gc.prototype.getPopup=function(){return this._popup};gc.prototype.togglePopup=function(){var a=this._popup;return a?(a.isOpen()?a.remove():a.addTo(this._map),this):this};gc.prototype._update=function(a){this._map&&(this._map.transform.renderWorldCopies&&
(this._lngLat=aa(this._lngLat,this._pos,this._map.transform)),this._pos=this._map.project(this._lngLat)._add(this._offset),a&&"moveend"!==a.type||(this._pos=this._pos.round()),na.setTransform(this._element,rd[this._anchor]+" translate("+this._pos.x+"px, "+this._pos.y+"px)"),ma(this._element,this._anchor,"marker"))};gc.prototype.getOffset=function(){return this._offset};gc.prototype.setOffset=function(b){return this._offset=a.default$1.convert(b),this._update(),this};var xc,Ac={positionOptions:{enableHighAccuracy:!1,
maximumAge:0,timeout:6E3},fitBoundsOptions:{maxZoom:15},trackUserLocation:!1,showUserLocation:!0},sd=function(b){function c(c){b.call(this);this.options=a.extend({},Ac,c);a.bindAll("_onSuccess _onError _finish _setupUI _updateCamera _updateMarker".split(" "),this)}return b&&(c.__proto__=b),c.prototype=Object.create(b&&b.prototype),c.prototype.constructor=c,c.prototype.onAdd=function(b){var c;return this._map=b,this._container=na.create("div","mapboxgl-ctrl mapboxgl-ctrl-group"),c=this._setupUI,void 0!==
xc?c(xc):void 0!==a.default.navigator.permissions?a.default.navigator.permissions.query({name:"geolocation"}).then(function(a){xc="denied"!==a.state;c(xc)}):(xc=!!a.default.navigator.geolocation,c(xc)),this._container},c.prototype.onRemove=function(){void 0!==this._geolocationWatchID&&(a.default.navigator.geolocation.clearWatch(this._geolocationWatchID),this._geolocationWatchID=void 0);this.options.showUserLocation&&this._userLocationDotMarker.remove();na.remove(this._container);this._map=void 0},
c.prototype._onSuccess=function(b){if(this.options.trackUserLocation)switch(this._lastKnownPosition=b,this._watchState){case "WAITING_ACTIVE":case "ACTIVE_LOCK":case "ACTIVE_ERROR":this._watchState="ACTIVE_LOCK";this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-waiting");this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active-error");this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active");break;case "BACKGROUND":case "BACKGROUND_ERROR":this._watchState="BACKGROUND",
this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background-error"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-background")}this.options.showUserLocation&&"OFF"!==this._watchState&&this._updateMarker(b);this.options.trackUserLocation&&"ACTIVE_LOCK"!==this._watchState||this._updateCamera(b);this.options.showUserLocation&&this._dotElement.classList.remove("mapboxgl-user-location-dot-stale");this.fire(new a.Event("geolocate",
b));this._finish()},c.prototype._updateCamera=function(a){var b=new Oa(a.coords.longitude,a.coords.latitude);this._map.fitBounds(b.toBounds(a.coords.accuracy),this.options.fitBoundsOptions,{geolocateSource:!0})},c.prototype._updateMarker=function(a){a?this._userLocationDotMarker.setLngLat([a.coords.longitude,a.coords.latitude]).addTo(this._map):this._userLocationDotMarker.remove()},c.prototype._onError=function(b){if(this.options.trackUserLocation)if(1===b.code)this._watchState="OFF",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-waiting"),
this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active-error"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background-error"),void 0!==this._geolocationWatchID&&this._clearWatch();else switch(this._watchState){case "WAITING_ACTIVE":this._watchState="ACTIVE_ERROR";this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active");
this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active-error");break;case "ACTIVE_LOCK":this._watchState="ACTIVE_ERROR";this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active");this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active-error");this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting");break;case "BACKGROUND":this._watchState="BACKGROUND_ERROR",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-background-error"),
this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting")}"OFF"!==this._watchState&&this.options.showUserLocation&&this._dotElement.classList.add("mapboxgl-user-location-dot-stale");this.fire(new a.Event("error",b));this._finish()},c.prototype._finish=function(){this._timeoutId&&clearTimeout(this._timeoutId);this._timeoutId=void 0},c.prototype._setupUI=function(b){var c=this;!1!==b&&(this._container.addEventListener("contextmenu",function(a){return a.preventDefault()}),this._geolocateButton=
na.create("button","mapboxgl-ctrl-icon mapboxgl-ctrl-geolocate",this._container),this._geolocateButton.type="button",this._geolocateButton.setAttribute("aria-label","Geolocate"),this.options.trackUserLocation&&(this._geolocateButton.setAttribute("aria-pressed","false"),this._watchState="OFF"),this.options.showUserLocation&&(this._dotElement=na.create("div","mapboxgl-user-location-dot"),this._userLocationDotMarker=new gc(this._dotElement),this.options.trackUserLocation&&(this._watchState="OFF")),this._geolocateButton.addEventListener("click",
this.trigger.bind(this)),this._setup=!0,this.options.trackUserLocation&&this._map.on("movestart",function(b){b.geolocateSource||"ACTIVE_LOCK"!==c._watchState||(c._watchState="BACKGROUND",c._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-background"),c._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active"),c.fire(new a.Event("trackuserlocationend")))}))},c.prototype.trigger=function(){if(!this._setup)return a.warnOnce("Geolocate control triggered before added to a map"),!1;if(this.options.trackUserLocation){switch(this._watchState){case "OFF":this._watchState=
"WAITING_ACTIVE";this.fire(new a.Event("trackuserlocationstart"));break;case "WAITING_ACTIVE":case "ACTIVE_LOCK":case "ACTIVE_ERROR":case "BACKGROUND_ERROR":this._watchState="OFF";this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-waiting");this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active");this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active-error");this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background");this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background-error");
this.fire(new a.Event("trackuserlocationend"));break;case "BACKGROUND":this._watchState="ACTIVE_LOCK",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background"),this._lastKnownPosition&&this._updateCamera(this._lastKnownPosition),this.fire(new a.Event("trackuserlocationstart"))}switch(this._watchState){case "WAITING_ACTIVE":this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting");this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active");break;case "ACTIVE_LOCK":this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active");
break;case "ACTIVE_ERROR":this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting");this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active-error");break;case "BACKGROUND":this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-background");break;case "BACKGROUND_ERROR":this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-background-error")}"OFF"===this._watchState&&void 0!==this._geolocationWatchID?
this._clearWatch():void 0===this._geolocationWatchID&&(this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.setAttribute("aria-pressed","true"),this._geolocationWatchID=a.default.navigator.geolocation.watchPosition(this._onSuccess,this._onError,this.options.positionOptions))}else a.default.navigator.geolocation.getCurrentPosition(this._onSuccess,this._onError,this.options.positionOptions),this._timeoutId=setTimeout(this._finish,1E4);return!0},c.prototype._clearWatch=
function(){a.default.navigator.geolocation.clearWatch(this._geolocationWatchID);this._geolocationWatchID=void 0;this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-waiting");this._geolocateButton.setAttribute("aria-pressed","false");this.options.showUserLocation&&this._updateMarker(null)},c}(a.Evented),td={maxWidth:100,unit:"metric"},ud=function(b){this.options=a.extend({},td,b);a.bindAll(["_onMove","setUnit"],this)};ud.prototype.getDefaultPosition=function(){return"bottom-left"};ud.prototype._onMove=
function(){Aa(this._map,this._container,this.options)};ud.prototype.onAdd=function(a){return this._map=a,this._container=na.create("div","mapboxgl-ctrl mapboxgl-ctrl-scale",a.getContainer()),this._map.on("move",this._onMove),this._onMove(),this._container};ud.prototype.onRemove=function(){na.remove(this._container);this._map.off("move",this._onMove);this._map=void 0};ud.prototype.setUnit=function(a){this.options.unit=a;Aa(this._map,this._container,this.options)};var qc=function(){this._fullscreen=
!1;a.bindAll(["_onClickFullscreen","_changeIcon"],this);"onfullscreenchange"in a.default.document?this._fullscreenchange="fullscreenchange":"onmozfullscreenchange"in a.default.document?this._fullscreenchange="mozfullscreenchange":"onwebkitfullscreenchange"in a.default.document?this._fullscreenchange="webkitfullscreenchange":"onmsfullscreenchange"in a.default.document&&(this._fullscreenchange="MSFullscreenChange");this._className="mapboxgl-ctrl"};qc.prototype.onAdd=function(b){return this._map=b,this._mapContainer=
this._map.getContainer(),this._container=na.create("div",this._className+" mapboxgl-ctrl-group"),this._checkFullscreenSupport()?this._setupUI():(this._container.style.display="none",a.warnOnce("This device does not support fullscreen mode.")),this._container};qc.prototype.onRemove=function(){na.remove(this._container);this._map=null;a.default.document.removeEventListener(this._fullscreenchange,this._changeIcon)};qc.prototype._checkFullscreenSupport=function(){return!!(a.default.document.fullscreenEnabled||
a.default.document.mozFullScreenEnabled||a.default.document.msFullscreenEnabled||a.default.document.webkitFullscreenEnabled)};qc.prototype._setupUI=function(){var b=this._fullscreenButton=na.create("button",this._className+"-icon "+this._className+"-fullscreen",this._container);b.setAttribute("aria-label","Toggle fullscreen");b.type="button";this._fullscreenButton.addEventListener("click",this._onClickFullscreen);a.default.document.addEventListener(this._fullscreenchange,this._changeIcon)};qc.prototype._isFullscreen=
function(){return this._fullscreen};qc.prototype._changeIcon=function(){(a.default.document.fullscreenElement||a.default.document.mozFullScreenElement||a.default.document.webkitFullscreenElement||a.default.document.msFullscreenElement)===this._mapContainer!==this._fullscreen&&(this._fullscreen=!this._fullscreen,this._fullscreenButton.classList.toggle(this._className+"-shrink"),this._fullscreenButton.classList.toggle(this._className+"-fullscreen"))};qc.prototype._onClickFullscreen=function(){this._isFullscreen()?
a.default.document.exitFullscreen?a.default.document.exitFullscreen():a.default.document.mozCancelFullScreen?a.default.document.mozCancelFullScreen():a.default.document.msExitFullscreen?a.default.document.msExitFullscreen():a.default.document.webkitCancelFullScreen&&a.default.document.webkitCancelFullScreen():this._mapContainer.requestFullscreen?this._mapContainer.requestFullscreen():this._mapContainer.mozRequestFullScreen?this._mapContainer.mozRequestFullScreen():this._mapContainer.msRequestFullscreen?
this._mapContainer.msRequestFullscreen():this._mapContainer.webkitRequestFullscreen&&this._mapContainer.webkitRequestFullscreen()};var hd={closeButton:!0,closeOnClick:!0},og=function(b){function c(c){b.call(this);this.options=a.extend(Object.create(hd),c);a.bindAll(["_update","_onClickClose"],this)}return b&&(c.__proto__=b),c.prototype=Object.create(b&&b.prototype),c.prototype.constructor=c,c.prototype.addTo=function(b){return this._map=b,this._map.on("move",this._update),this.options.closeOnClick&&
this._map.on("click",this._onClickClose),this._update(),this.fire(new a.Event("open")),this},c.prototype.isOpen=function(){return!!this._map},c.prototype.remove=function(){return this._content&&na.remove(this._content),this._container&&(na.remove(this._container),delete this._container),this._map&&(this._map.off("move",this._update),this._map.off("click",this._onClickClose),delete this._map),this.fire(new a.Event("close")),this},c.prototype.getLngLat=function(){return this._lngLat},c.prototype.setLngLat=
function(a){return this._lngLat=Oa.convert(a),this._pos=null,this._update(),this},c.prototype.setText=function(b){return this.setDOMContent(a.default.document.createTextNode(b))},c.prototype.setHTML=function(b){var c=a.default.document.createDocumentFragment(),d=a.default.document.createElement("body");for(d.innerHTML=b;b=d.firstChild;)c.appendChild(b);return this.setDOMContent(c)},c.prototype.setDOMContent=function(a){return this._createContent(),this._content.appendChild(a),this._update(),this},
c.prototype._createContent=function(){this._content&&na.remove(this._content);this._content=na.create("div","mapboxgl-popup-content",this._container);this.options.closeButton&&(this._closeButton=na.create("button","mapboxgl-popup-close-button",this._content),this._closeButton.type="button",this._closeButton.setAttribute("aria-label","Close popup"),this._closeButton.innerHTML="\x26#215;",this._closeButton.addEventListener("click",this._onClickClose))},c.prototype._update=function(){if(this._map&&this._lngLat&&
this._content){this._container||(this._container=na.create("div","mapboxgl-popup",this._map.getContainer()),this._tip=na.create("div","mapboxgl-popup-tip",this._container),this._container.appendChild(this._content));this._map.transform.renderWorldCopies&&(this._lngLat=aa(this._lngLat,this._pos,this._map.transform));var b=this._pos=this._map.project(this._lngLat),c=this.options.anchor,d=function Hf(b){if(b){if("number"==typeof b){var c=Math.round(Math.sqrt(.5*Math.pow(b,2)));return{center:new a.default$1(0,
0),top:new a.default$1(0,b),"top-left":new a.default$1(c,c),"top-right":new a.default$1(-c,c),bottom:new a.default$1(0,-b),"bottom-left":new a.default$1(c,-c),"bottom-right":new a.default$1(-c,-c),left:new a.default$1(b,0),right:new a.default$1(-b,0)}}return b instanceof a.default$1||Array.isArray(b)?(b=a.default$1.convert(b),{center:b,top:b,"top-left":b,"top-right":b,bottom:b,"bottom-left":b,"bottom-right":b,left:b,right:b}):{center:a.default$1.convert(b.center||[0,0]),top:a.default$1.convert(b.top||
[0,0]),"top-left":a.default$1.convert(b["top-left"]||[0,0]),"top-right":a.default$1.convert(b["top-right"]||[0,0]),bottom:a.default$1.convert(b.bottom||[0,0]),"bottom-left":a.default$1.convert(b["bottom-left"]||[0,0]),"bottom-right":a.default$1.convert(b["bottom-right"]||[0,0]),left:a.default$1.convert(b.left||[0,0]),right:a.default$1.convert(b.right||[0,0])}}return Hf(new a.default$1(0,0))}(this.options.offset);if(!c){c=this._container.offsetWidth;var e=this._container.offsetHeight;e=b.y+d.bottom.y<
e?["top"]:b.y>this._map.transform.height-e?["bottom"]:[];b.x<c/2?e.push("left"):b.x>this._map.transform.width-c/2&&e.push("right");c=0===e.length?"bottom":e.join("-")}b=b.add(d[c]).round();na.setTransform(this._container,rd[c]+" translate("+b.x+"px,"+b.y+"px)");ma(this._container,c,"popup")}},c.prototype._onClickClose=function(){this.remove()},c}(a.Evented),kf={version:"0.45.0",supported:sa,workerCount:Math.max(Math.floor(oa.hardwareConcurrency/2),1),setRTLTextPlugin:a.setRTLTextPlugin,Map:Mc,NavigationControl:dd,
GeolocateControl:sd,AttributionControl:cc,ScaleControl:ud,FullscreenControl:qc,Popup:og,Marker:gc,Style:re,LngLat:Oa,LngLatBounds:Va,Point:a.default$1,Evented:a.Evented,config:Ua,get accessToken(){return Ua.ACCESS_TOKEN},set accessToken(a){Ua.ACCESS_TOKEN=a},workerUrl:""};return kf});return f})}).call(this,"undefined"!==typeof x?x:"undefined"!==typeof self?self:"undefined"!==typeof window?window:{})},{}],419:[function(a,p,l){function m(a,e,f){for(var b=Array(a),h=0;h<a;++h)b[h]=0,h===e&&(b[h]+=.5),
h===f&&(b[h]+=.5);return b}p.exports=function(a){for(var e=1<<a+1,f=Array(e),b=0;b<e;++b){var h=b;var u=a,r=b;if(0===r||r===(1<<u+1)-1)var d=[];else{var g=[];d=[];for(var c=0;c<=u;++c)if(r&1<<c){g.push(m(u,c-1,c-1));d.push(null);for(var v=0;v<=u;++v)~r&1<<v&&(g.push(m(u,c-1,v-1)),d.push([c,v]))}u=k(g);r=[];c=0;b:for(;c<u.length;++c){g=u[c];var t=[];for(v=0;v<g.length;++v){if(!d[g[v]])continue b;t.push(d[g[v]].slice())}r.push(t)}d=r}f[h]=d}return f};var k=a("convex-hull")},{"convex-hull":120}],420:[function(a,
p,l){function m(a,b,c,d,e){a[0]=b[0]*d+c[0]*e;a[1]=b[1]*d+c[1]*e;a[2]=b[2]*d+c[2]*e}var k=a("./normalize");l=a("gl-mat4/create");var h=a("gl-mat4/clone"),e=a("gl-mat4/determinant"),f=a("gl-mat4/invert"),b=a("gl-mat4/transpose"),n={length:a("gl-vec3/length"),normalize:a("gl-vec3/normalize"),dot:a("gl-vec3/dot"),cross:a("gl-vec3/cross")},u=l(),r=l(),d=[0,0,0,0],g=[[0,0,0],[0,0,0],[0,0,0]],c=[0,0,0];p.exports=function(a,t,l,p,q,G){t||(t=[0,0,0]);l||(l=[0,0,0]);p||(p=[0,0,0]);q||(q=[0,0,0,1]);G||(G=[0,
0,0,1]);if(!k(u,a))return!1;h(r,u);r[3]=0;r[7]=0;r[11]=0;r[15]=1;if(Math.abs(1E-8>e(r)))return!1;var v=u[3],y=u[7],B=u[11];a=u[12];var D=u[13],E=u[14],H=u[15];if(0!==v||0!==y||0!==B){d[0]=v;d[1]=y;d[2]=B;d[3]=H;if(!f(r,r))return!1;b(r,r);v=d[0];y=d[1];B=d[2];H=d[3];q[0]=r[0]*v+r[4]*y+r[8]*B+r[12]*H;q[1]=r[1]*v+r[5]*y+r[9]*B+r[13]*H;q[2]=r[2]*v+r[6]*y+r[10]*B+r[14]*H;q[3]=r[3]*v+r[7]*y+r[11]*B+r[15]*H}else q[0]=q[1]=q[2]=0,q[3]=1;t[0]=a;t[1]=D;t[2]=E;g[0][0]=u[0];g[0][1]=u[1];g[0][2]=u[2];g[1][0]=
u[4];g[1][1]=u[5];g[1][2]=u[6];g[2][0]=u[8];g[2][1]=u[9];g[2][2]=u[10];l[0]=n.length(g[0]);n.normalize(g[0],g[0]);p[0]=n.dot(g[0],g[1]);m(g[1],g[1],g[0],1,-p[0]);l[1]=n.length(g[1]);n.normalize(g[1],g[1]);p[0]/=l[1];p[1]=n.dot(g[0],g[2]);m(g[2],g[2],g[0],1,-p[1]);p[2]=n.dot(g[1],g[2]);m(g[2],g[2],g[1],1,-p[2]);l[2]=n.length(g[2]);n.normalize(g[2],g[2]);p[1]/=l[2];p[2]/=l[2];n.cross(c,g[1],g[2]);if(0>n.dot(g[0],c))for(t=0;3>t;t++)l[t]*=-1,g[t][0]*=-1,g[t][1]*=-1,g[t][2]*=-1;G[0]=.5*Math.sqrt(Math.max(1+
g[0][0]-g[1][1]-g[2][2],0));G[1]=.5*Math.sqrt(Math.max(1-g[0][0]+g[1][1]-g[2][2],0));G[2]=.5*Math.sqrt(Math.max(1-g[0][0]-g[1][1]+g[2][2],0));G[3]=.5*Math.sqrt(Math.max(1+g[0][0]+g[1][1]+g[2][2],0));g[2][1]>g[1][2]&&(G[0]=-G[0]);g[0][2]>g[2][0]&&(G[1]=-G[1]);g[1][0]>g[0][1]&&(G[2]=-G[2]);return!0}},{"./normalize":421,"gl-mat4/clone":255,"gl-mat4/create":256,"gl-mat4/determinant":257,"gl-mat4/invert":261,"gl-mat4/transpose":272,"gl-vec3/cross":326,"gl-vec3/dot":331,"gl-vec3/length":341,"gl-vec3/normalize":348}],
421:[function(a,p,l){p.exports=function(a,k){var h=k[15];if(0===h)return!1;h=1/h;for(var e=0;16>e;e++)a[e]=k[e]*h;return!0}},{}],422:[function(a,p,l){function m(){return{translate:[0,0,0],scale:[1,1,1],skew:[0,0,0],perspective:[0,0,0,1],quaternion:[0,0,0,1]}}var k=a("gl-vec3/lerp"),h=a("mat4-recompose"),e=a("mat4-decompose"),f=a("gl-mat4/determinant"),b=a("quat-slerp"),n=m(),u=m(),r=m();p.exports=function(a,g,c,m){if(0===f(g)||0===f(c))return!1;g=e(g,n.translate,n.scale,n.skew,n.perspective,n.quaternion);
c=e(c,u.translate,u.scale,u.skew,u.perspective,u.quaternion);if(!g||!c)return!1;k(r.translate,n.translate,u.translate,m);k(r.skew,n.skew,u.skew,m);k(r.scale,n.scale,u.scale,m);k(r.perspective,n.perspective,u.perspective,m);b(r.quaternion,n.quaternion,u.quaternion,m);h(a,r.translate,r.scale,r.skew,r.perspective,r.quaternion);return!0}},{"gl-mat4/determinant":257,"gl-vec3/lerp":342,"mat4-decompose":420,"mat4-recompose":423,"quat-slerp":475}],423:[function(a,p,l){var m={identity:a("gl-mat4/identity"),
translate:a("gl-mat4/translate"),multiply:a("gl-mat4/multiply"),create:a("gl-mat4/create"),scale:a("gl-mat4/scale"),fromRotationTranslation:a("gl-mat4/fromRotationTranslation")};m.create();var k=m.create();p.exports=function(a,e,f,b,n,u){m.identity(a);m.fromRotationTranslation(a,u,e);a[3]=n[0];a[7]=n[1];a[11]=n[2];a[15]=n[3];m.identity(k);0!==b[2]&&(k[9]=b[2],m.multiply(a,a,k));0!==b[1]&&(k[9]=0,k[8]=b[1],m.multiply(a,a,k));0!==b[0]&&(k[8]=0,k[4]=b[0],m.multiply(a,a,k));m.scale(a,a,f);return a}},
{"gl-mat4/create":256,"gl-mat4/fromRotationTranslation":259,"gl-mat4/identity":260,"gl-mat4/multiply":263,"gl-mat4/scale":270,"gl-mat4/translate":271}],424:[function(a,p,l){p.exports=Math.log2||function(a){return Math.log(a)*Math.LOG2E}},{}],425:[function(a,p,l){function m(a){this._components=a.slice();this._time=[0];this.prevMatrix=a.slice();this.nextMatrix=a.slice();this.computedMatrix=a.slice();this.computedInverse=a.slice();this.computedEye=[0,0,0];this.computedUp=[0,0,0];this.computedCenter=
[0,0,0];this.computedRadius=[0];this._limits=[-Infinity,Infinity]}var k=a("binary-search-bounds"),h=a("mat4-interpolate"),e=a("gl-mat4/invert"),f=a("gl-mat4/rotateX"),b=a("gl-mat4/rotateY"),n=a("gl-mat4/rotateZ"),u=a("gl-mat4/lookAt"),r=a("gl-mat4/translate");a("gl-mat4/scale");var d=a("gl-vec3/normalize"),g=[0,0,0];p.exports=function(a){a=a||{};return new m(a.matrix||[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1])};a=m.prototype;a.recalcMatrix=function(a){var b=this._time,c=k.le(b,a),g=this.computedMatrix;if(!(0>
c)){var f=this._components;if(c===b.length-1)for(var n=16*c,m=0;16>m;++m)g[m]=f[n++];else{var v=b[c+1]-b[c];n=16*c;var r=this.prevMatrix,u=!0;for(m=0;16>m;++m)r[m]=f[n++];var l=this.nextMatrix;for(m=0;16>m;++m)l[m]=f[n++],u=u&&r[m]===l[m];if(1E-6>v||u)for(m=0;16>m;++m)g[m]=r[m];else h(g,r,l,(a-b[c])/v)}m=this.computedUp;m[0]=g[1];m[1]=g[5];m[2]=g[9];d(m,m);m=this.computedInverse;e(m,g);a=this.computedEye;b=m[15];a[0]=m[12]/b;a[1]=m[13]/b;a[2]=m[14]/b;b=this.computedCenter;c=Math.exp(this.computedRadius[0]);
for(m=0;3>m;++m)b[m]=a[m]-g[2+4*m]*c}};a.idle=function(a){if(!(a<this.lastT())){for(var b=this._components,c=b.length-16,d=0;16>d;++d)b.push(b[c++]);this._time.push(a)}};a.flush=function(a){a=k.gt(this._time,a)-2;0>a||(this._time.splice(0,a),this._components.splice(0,16*a))};a.lastT=function(){return this._time[this._time.length-1]};a.lookAt=function(a,b,c,d){this.recalcMatrix(a);b=b||this.computedEye;c=c||g;d=d||this.computedUp;this.setMatrix(a,u(this.computedMatrix,b,c,d));for(d=a=0;3>d;++d)a+=
Math.pow(c[d]-b[d],2);a=Math.log(Math.sqrt(a));this.computedRadius[0]=a};a.rotate=function(a,c,d,g){this.recalcMatrix(a);var h=this.computedInverse;c&&b(h,h,c);d&&f(h,h,d);g&&n(h,h,g);this.setMatrix(a,e(this.computedMatrix,h))};var c=[0,0,0];a.pan=function(a,b,d,g){c[0]=-(b||0);c[1]=-(d||0);c[2]=-(g||0);this.recalcMatrix(a);b=this.computedInverse;r(b,b,c);this.setMatrix(a,e(b,b))};a.translate=function(a,b,d,e){c[0]=b||0;c[1]=d||0;c[2]=e||0;this.recalcMatrix(a);b=this.computedMatrix;r(b,b,c);this.setMatrix(a,
b)};a.setMatrix=function(a,b){if(!(a<this.lastT()))for(this._time.push(a),a=0;16>a;++a)this._components.push(b[a])};a.setDistance=function(a,b){this.computedRadius[0]=b};a.setDistanceLimits=function(a,b){var c=this._limits;c[0]=a;c[1]=b};a.getDistanceLimits=function(a){var b=this._limits;return a?(a[0]=b[0],a[1]=b[1],a):b}},{"binary-search-bounds":81,"gl-mat4/invert":261,"gl-mat4/lookAt":262,"gl-mat4/rotateX":267,"gl-mat4/rotateY":268,"gl-mat4/rotateZ":269,"gl-mat4/scale":270,"gl-mat4/translate":271,
"gl-vec3/normalize":348,"mat4-interpolate":422}],426:[function(a,p,l){p.exports=function(a){var h=a.length;if(3>h){for(var e=Array(h),f=0;f<h;++f)e[f]=f;return 2===h&&a[0][0]===a[1][0]&&a[0][1]===a[1][1]?[0]:e}e=Array(h);for(f=0;f<h;++f)e[f]=f;e.sort(function(b,c){var d=a[b][0]-a[c][0];return d?d:a[b][1]-a[c][1]});var b=[e[0],e[1]],k=[e[0],e[1]];for(f=2;f<h;++f){for(var u=e[f],r=a[u],d=b.length;1<d&&0>=m(a[b[d-2]],a[b[d-1]],r);)--d,b.pop();b.push(u);for(d=k.length;1<d&&0<=m(a[k[d-2]],a[k[d-1]],r);)--d,
k.pop();k.push(u)}e=Array(k.length+b.length-2);f=h=0;for(u=b.length;f<u;++f)e[h++]=b[f];for(f=k.length-2;0<f;--f)e[h++]=k[f];return e};var m=a("robust-orientation")[3]},{"robust-orientation":494}],427:[function(a,p,l){p.exports=function(a,h){function e(a){var b=!1;"altKey"in a&&(b=b||a.altKey!==p.alt,p.alt=!!a.altKey);"shiftKey"in a&&(b=b||a.shiftKey!==p.shift,p.shift=!!a.shiftKey);"ctrlKey"in a&&(b=b||a.ctrlKey!==p.control,p.control=!!a.ctrlKey);"metaKey"in a&&(b=b||a.metaKey!==p.meta,p.meta=!!a.metaKey);
return b}function f(a,b){var c=m.x(b),d=m.y(b);"buttons"in b&&(a=b.buttons|0);if(a!==v||c!==t||d!==l||e(b))v=a|0,t=c||0,l=d||0,h&&h(v,t,l,p)}function b(a){f(0,a)}function k(){if(v||t||l||p.shift||p.alt||p.meta||p.control)v=t=l=0,p.shift=p.alt=p.control=p.meta=!1,h&&h(0,0,0,p)}function u(a){e(a)&&h&&h(v,t,l,p)}function r(a){0===m.buttons(a)?f(0,a):f(v,a)}function d(a){f(v|m.buttons(a),a)}function g(a){f(v&~m.buttons(a),a)}function c(){q||(q=!0,a.addEventListener("mousemove",r),a.addEventListener("mousedown",
d),a.addEventListener("mouseup",g),a.addEventListener("mouseleave",b),a.addEventListener("mouseenter",b),a.addEventListener("mouseout",b),a.addEventListener("mouseover",b),a.addEventListener("blur",k),a.addEventListener("keyup",u),a.addEventListener("keydown",u),a.addEventListener("keypress",u),a!==window&&(window.addEventListener("blur",k),window.addEventListener("keyup",u),window.addEventListener("keydown",u),window.addEventListener("keypress",u)))}h||(h=a,a=window);var v=0,t=0,l=0,p={shift:!1,
alt:!1,control:!1,meta:!1},q=!1;c();var G={element:a};Object.defineProperties(G,{enabled:{get:function(){return q},set:function(e){e?c():q&&(q=!1,a.removeEventListener("mousemove",r),a.removeEventListener("mousedown",d),a.removeEventListener("mouseup",g),a.removeEventListener("mouseleave",b),a.removeEventListener("mouseenter",b),a.removeEventListener("mouseout",b),a.removeEventListener("mouseover",b),a.removeEventListener("blur",k),a.removeEventListener("keyup",u),a.removeEventListener("keydown",
u),a.removeEventListener("keypress",u),a!==window&&(window.removeEventListener("blur",k),window.removeEventListener("keyup",u),window.removeEventListener("keydown",u),window.removeEventListener("keypress",u)))},enumerable:!0},buttons:{get:function(){return v},enumerable:!0},x:{get:function(){return t},enumerable:!0},y:{get:function(){return l},enumerable:!0},mods:{get:function(){return p},enumerable:!0}});return G};var m=a("mouse-event")},{"mouse-event":429}],428:[function(a,p,l){var m={left:0,top:0};
p.exports=function(a,h,e){h=h||a.currentTarget||a.srcElement;Array.isArray(e)||(e=[0,0]);var f=a.clientX||0;a=a.clientY||0;h=h===window||h===document||h===document.body?m:h.getBoundingClientRect();e[0]=f-h.left;e[1]=a-h.top;return e}},{}],429:[function(a,p,l){function m(a){return a.target||a.srcElement||window}l.buttons=function(a){if("object"===typeof a){if("buttons"in a)return a.buttons;if("which"in a){a=a.which;if(2===a)return 4;if(3===a)return 2;if(0<a)return 1<<a-1}else if("button"in a){a=a.button;
if(1===a)return 4;if(2===a)return 2;if(0<=a)return 1<<a}}return 0};l.element=m;l.x=function(a){if("object"===typeof a){if("offsetX"in a)return a.offsetX;var h=m(a).getBoundingClientRect();return a.clientX-h.left}return 0};l.y=function(a){if("object"===typeof a){if("offsetY"in a)return a.offsetY;var h=m(a).getBoundingClientRect();return a.clientY-h.top}return 0}},{}],430:[function(a,p,l){var m=a("to-px");p.exports=function(a,h,e){"function"===typeof a&&(e=!!h,h=a,a=window);var f=m("ex",a),b=function(a){e&&
a.preventDefault();var b=a.deltaX||0,k=a.deltaY||0,d=a.deltaZ||0,g=1;switch(a.deltaMode){case 1:g=f;break;case 2:g=window.innerHeight}b*=g;k*=g;d*=g;if(b||k||d)return h(b,k,d,a)};a.addEventListener("wheel",b);return b}},{"to-px":523}],431:[function(a,p,l){function m(a,b,c){for(var d=0,e=0;e<a;++e)b&1<<e&&(d|=1<<c[e]);return d}function k(a,g,c,k,t,l){function d(a,b){E.push("for(","i"+t[a],"\x3d",b,";","i"+t[a],"\x3c","s"+t[a],";","++","i"+t[a],"){")}function v(a){for(var b=0;b<q;++b)E.push("p"+b,"+\x3d",
"u"+b+"_"+t[a],";");E.push("}")}function p(){for(var a=1;a<1<<P;++a)E.push(r,"\x3d","e"+a,";","e"+a,"\x3d","y"+a,";","y"+a,"\x3d",r,";")}function y(a,c){if(0>a){for(var g=0;g<q;++g)l[g]?E.push("c"+g+"_0","\x3d","d"+g,".get(","p"+g,");"):E.push("c"+g+"_0","\x3d","d"+g,"[","p"+g,"];");a=[];for(g=0;g<q;++g)a.push("c"+g+"_0");for(g=0;g<k;++g)a.push("x"+g);E.push("b0","\x3d",f,"[",u,"]\x3dphase(",a.join(),");");for(a=1;a<1<<P;++a)E.push("b"+a,"\x3d",f,"[",u,"+","e"+a,"];");g=[];for(a=1;a<1<<P;++a)g.push("(b0!\x3d\x3db"+
a+")");E.push("if(",g.join("||"),"){");var h=[];for(g=0;g<P;++g)h.push("i"+g);for(g=0;g<q;++g)for(h.push("c"+g+"_0"),a=1;a<1<<P;++a)l[g]?E.push("c"+g+"_"+a,"\x3d","d"+g,".get(","p"+g,"+","d"+g+"_"+a,");"):E.push("c"+g+"_"+a,"\x3d","d"+g,"[","p"+g,"+","d"+g+"_"+a,"];"),h.push("c"+g+"_"+a);for(g=0;g<1<<P;++g)h.push("b"+g);for(g=0;g<k;++g)h.push("x"+g);E.push("vertex(",h.join(),");","v0","\x3d",e,"[",u,"]\x3d",b,"++;");g=(1<<P)-1;h="b"+g;for(a=0;a<P;++a)if(0===(c&~(1<<a))){for(var n=g^1<<a,m="b"+n,r=
[],B=n;0<B;B=B-1&n)r.push(e+"["+u+"+"+("e"+B)+"]");r.push("v0");for(B=0;B<q;++B)a&1?r.push("c"+B+"_"+g,"c"+B+"_"+n):r.push("c"+B+"_"+n,"c"+B+"_"+g);a&1?r.push(h,m):r.push(m,h);for(B=0;B<k;++B)r.push("x"+B);E.push("if(",h,"!\x3d\x3d",m,"){","face(",r.join(),")}")}E.push("}",u,"+\x3d1;")}else{for(g=a-1;0<=g;--g)d(g,0);h=[];for(g=0;g<q;++g)l[g]?h.push("d"+g+".get("+("p"+g)+")"):h.push("d"+g+"["+("p"+g)+"]");for(g=0;g<k;++g)h.push("x"+g);E.push(f,"[",u,"++]\x3dphase(",h.join(),");");for(g=0;g<a;++g)v(g);
for(g=0;g<q;++g)E.push("p"+g,"+\x3d","u"+g+"_"+t[a],";");E.push("if(","s"+t[a],"\x3e0){","i"+t[a],"\x3d1;");y(a-1,c|1<<t[a]);for(g=0;g<q;++g)E.push("p"+g,"+\x3d","u"+g+"_"+t[a],";");a===P-1&&(E.push(u,"\x3d0;"),p());d(a,2);y(a-1,c);a===P-1&&(E.push("if(","i"+t[P-1],"\x261){",u,"\x3d0;}"),p());v(a);E.push("}")}}var q=l.length,P=t.length;if(2>P)throw Error("ndarray-extract-contour: Dimension must be at least 2");for(var J="extractContour"+t.join("_"),E=[],H=[],M=[],w=0;w<q;++w)M.push("a"+w);for(w=0;w<
k;++w)M.push("x"+w);for(w=0;w<P;++w)H.push("s"+w+"\x3da0.shape["+w+"]|0");for(w=0;w<q;++w){H.push("d"+w+"\x3d"+("a"+w)+".data","o"+w+"\x3d"+("a"+w)+".offset|0");for(var I=0;I<P;++I)H.push("t"+w+"_"+I+"\x3d"+("a"+w)+".stride["+I+"]|0")}for(w=0;w<q;++w)for(H.push("p"+w+"\x3d"+("o"+w)),H.push("c"+w+"_0"),I=1;I<1<<P;++I){for(var Q=[],N=0;N<P;++N)I&1<<N&&Q.push("-"+("t"+w+"_"+N));H.push("d"+w+"_"+I+"\x3d("+Q.join("")+")|0");H.push("c"+w+"_"+I+"\x3d0")}for(w=0;w<q;++w)for(I=0;I<P;++I)N=["t"+w+"_"+t[I]],
0<I&&N.push("t"+w+"_"+t[I-1]+"*"+("s"+t[I-1])),H.push("u"+w+"_"+t[I]+"\x3d("+N.join("-")+")|0");for(w=0;w<P;++w)H.push("i"+w+"\x3d0");H.push(b+"\x3d0");I=["2"];for(w=P-2;0<=w;--w)I.push("s"+t[w]);H.push(n+"\x3d("+I.join("*")+")|0",f+"\x3dmallocUint32("+n+")",e+"\x3dmallocUint32("+n+")",u+"\x3d0");H.push("b0\x3d0");for(I=1;I<1<<P;++I){w=[];Q=[];for(N=0;N<P;++N)I&1<<N&&(0===Q.length?w.push("1"):w.unshift(Q.join("*"))),Q.push("s"+t[N]);N="";0>w[0].indexOf("s"+t[P-2])&&(N="-");Q=m(P,I,t);H.push("e"+Q+
"\x3d(-"+w.join("-")+")|0","y"+Q+"\x3d("+N+w.join("-")+")|0","b"+Q+"\x3d0")}H.push("v0\x3d0",r+"\x3d0");y(P-1,0);E.push("freeUint32(",e,");freeUint32(",f,");");J=["'use strict';function ",J,"(",M.join(),"){var ",H.join(),";",E.join(""),"}return ",J].join("");return(new Function("vertex","face","phase","mallocUint32","freeUint32",J))(a,g,c,h.mallocUint32,h.freeUint32)}var h=a("typedarray-pool");p.exports=function(a){function b(a){throw Error("ndarray-extract-contour: "+a);}"object"!==typeof a&&b("Must specify arguments");
var c=a.order;Array.isArray(c)||b("Must specify order");var d=a.arrayArguments||1;1>d&&b("Must have at least one array argument");var e=a.scalarArguments||0;0>e&&b("Scalar arg count must be \x3e 0");"function"!==typeof a.vertex&&b("Must specify vertex creation function");"function"!==typeof a.cell&&b("Must specify cell creation function");"function"!==typeof a.phase&&b("Must specify phase function");for(var f=a.getters||[],h=Array(d),n=0;n<d;++n)0<=f.indexOf(n)?h[n]=!0:h[n]=!1;return k(a.vertex,a.cell,
a.phase,e,c,h)};var e="V",f="P",b="N",n="Q",u="X",r="T"},{"typedarray-pool":529}],432:[function(a,p,l){var m=a("cwise/lib/wrapper")({args:["index","array","scalar"],pre:{body:"{}",args:[],thisVars:[],localVars:[]},body:{body:"{_inline_1_arg1_\x3d_inline_1_arg2_.apply(void 0,_inline_1_arg0_)}",args:[{name:"_inline_1_arg0_",lvalue:!1,rvalue:!0,count:1},{name:"_inline_1_arg1_",lvalue:!0,rvalue:!1,count:1},{name:"_inline_1_arg2_",lvalue:!1,rvalue:!0,count:1}],thisVars:[],localVars:[]},post:{body:"{}",
args:[],thisVars:[],localVars:[]},debug:!1,funcName:"cwise",blockSize:64});p.exports=function(a,h){m(a,h);return a}},{"cwise/lib/wrapper":139}],433:[function(a,p,l){function m(a){if(a in e)return e[a];for(var d=[],g=0;g<a;++g)d.push("out",g,"s\x3d0.5*(inp",g,"l-inp",g,"r);");var c=["array"],f=["junk"];for(g=0;g<a;++g){c.push("array");f.push("out"+g+"s");var n=k(a);n[g]=-1;c.push({array:0,offset:n.slice()});n[g]=1;c.push({array:0,offset:n.slice()});f.push("inp"+g+"l","inp"+g+"r")}return e[a]=h({args:c,
pre:b,post:b,body:{body:d.join(""),args:f.map(function(a){return{name:a,lvalue:0===a.indexOf("out"),rvalue:0===a.indexOf("inp"),count:"junk"!==a|0}}),thisVars:[],localVars:[]},funcName:"fdTemplate"+a})}p.exports=function(a,b,g){if(Array.isArray(g)){if(g.length!==b.dimension)throw Error("ndarray-gradient: invalid boundary conditions");}else g="string"===typeof g?k(b.dimension,g):k(b.dimension,"clamp");if(a.dimension!==b.dimension+1)throw Error("ndarray-gradient: output dimension must be +1 input dimension");
if(a.shape[b.dimension]!==b.dimension)throw Error("ndarray-gradient: output shape must match input shape");for(var c=0;c<b.dimension;++c)if(a.shape[c]!==b.shape[c])throw Error("ndarray-gradient: shape mismatch");if(0===b.size)return a;if(0>=b.dimension)return a.set(0),a;var d=g;g=d.join();c=f[g];if(!c){c=d.length;for(var h=["function gradient(dst,src){var s\x3dsrc.shape.slice();"],r=0;r<1<<c;++r){for(var l=[],p=0;p<c;++p)r&1<<p&&l.push(p+1);for(var q=0;q<1<<l.length;++q){var A=l.slice();for(p=0;p<
l.length;++p)q&1<<p&&(A[p]=-A[p]);p=A;A=c-p.length;for(var C=[],P=[],J=[],E=0;E<c;++E)0<=p.indexOf(E+1)?J.push("0"):0<=p.indexOf(-(E+1))?J.push("s["+E+"]-1"):(J.push("-1"),C.push("1"),P.push("s["+E+"]-2"));P=".lo("+C.join()+").hi("+P.join()+")";0===C.length&&(P="");if(0<A){h.push("if(1");for(E=0;E<c;++E)0<=p.indexOf(E+1)||0<=p.indexOf(-(E+1))||h.push("\x26\x26s[",E,"]\x3e2");h.push("){grad",A,"(src.pick(",J.join(),")",P);for(E=0;E<c;++E)0<=p.indexOf(E+1)||0<=p.indexOf(-(E+1))||h.push(",dst.pick(",
J.join(),",",E,")",P);h.push(");")}for(E=0;E<p.length;++E){C=Math.abs(p[E])-1;var H="dst.pick("+J.join()+","+C+")"+P;switch(d[C]){case "clamp":var M=J.slice(),w=J.slice();0>p[E]?M[C]="s["+C+"]-2":w[C]="1";0===A?h.push("if(s[",C,"]\x3e1){dst.set(",J.join(),",",C,",0.5*(src.get(",M.join(),")-src.get(",w.join(),")))}else{dst.set(",J.join(),",",C,",0)};"):h.push("if(s[",C,"]\x3e1){diff(",H,",src.pick(",M.join(),")",P,",src.pick(",w.join(),")",P,");}else{zero(",H,");};");break;case "mirror":0===A?h.push("dst.set(",
J.join(),",",C,",0);"):h.push("zero(",H,");");break;case "wrap":M=J.slice();w=J.slice();0>p[E]?(M[C]="s["+C+"]-2",w[C]="0"):(M[C]="s["+C+"]-1",w[C]="1");0===A?h.push("if(s[",C,"]\x3e2){dst.set(",J.join(),",",C,",0.5*(src.get(",M.join(),")-src.get(",w.join(),")))}else{dst.set(",J.join(),",",C,",0)};"):h.push("if(s[",C,"]\x3e2){diff(",H,",src.pick(",M.join(),")",P,",src.pick(",w.join(),")",P,");}else{zero(",H,");};");break;default:throw Error("ndarray-gradient: Invalid boundary condition");}}0<A&&h.push("};")}}h.push("return dst;};return gradient");
d=["diff","zero"];l=[n,u];for(r=1;r<=c;++r)d.push("grad"+r),l.push(m(r));d.push(h.join(""));c=Function.apply(void 0,d).apply(void 0,l);e[g]=c}return c(a,b)};var k=a("dup"),h=a("cwise-compiler"),e={},f={},b={body:"",args:[],thisVars:[],localVars:[]},n=h({args:["array","array","array"],pre:b,post:b,body:{args:[{name:"out",lvalue:!0,rvalue:!1,count:1},{name:"left",lvalue:!1,rvalue:!0,count:1},{name:"right",lvalue:!1,rvalue:!0,count:1}],body:"out\x3d0.5*(left-right)",thisVars:[],localVars:[]},funcName:"cdiff"}),
u=h({args:["array"],pre:b,post:b,body:{args:[{name:"out",lvalue:!0,rvalue:!1,count:1}],body:"out\x3d0",thisVars:[],localVars:[]},funcName:"zero"})},{"cwise-compiler":136,dup:161}],434:[function(a,p,l){var m=a("ndarray-warp"),k=a("gl-matrix-invert");p.exports=function(a,e,f){var b=e.dimension,h=k([],f);m(a,e,function(a,e){for(var d=0;d<b;++d){a[d]=h[(b+1)*b+d];for(var g=0;g<b;++g)a[d]+=h[(b+1)*g+d]*e[g]}d=h[(b+1)*(b+1)-1];for(g=0;g<b;++g)d+=h[(b+1)*g+b]*e[g];e=1/d;for(d=0;d<b;++d)a[d]*=e;return a});
return a}},{"gl-matrix-invert":273,"ndarray-warp":441}],435:[function(a,p,l){function m(a,b){var e=Math.floor(b);b-=e;var f=0<=e+1&&e+1<a.shape[0],h=0<=e&&e<a.shape[0]?+a.get(e):0;a=f?+a.get(e+1):0;return(1-b)*h+b*a}function k(a,b,e){var f=Math.floor(b);b-=f;var h=0<=f&&f<a.shape[0],d=0<=f+1&&f+1<a.shape[0],g=Math.floor(e);e-=g;var c=0<=g&&g<a.shape[1],k=0<=g+1&&g+1<a.shape[1],n=h&&c?a.get(f,g):0;h=h&&k?a.get(f,g+1):0;c=d&&c?a.get(f+1,g):0;a=d&&k?a.get(f+1,g+1):0;return(1-e)*((1-b)*n+b*c)+e*((1-b)*
h+b*a)}function h(a,b,e,h){var f=Math.floor(b);b-=f;var d=0<=f&&f<a.shape[0],g=0<=f+1&&f+1<a.shape[0],c=Math.floor(e);e-=c;var k=0<=c&&c<a.shape[1],n=0<=c+1&&c+1<a.shape[1],m=Math.floor(h);h-=m;var u=0<=m&&m<a.shape[2],l=0<=m+1&&m+1<a.shape[2],p=d&&k&&u?a.get(f,c,m):0,q=d&&n&&u?a.get(f,c+1,m):0,C=g&&k&&u?a.get(f+1,c,m):0;u=g&&n&&u?a.get(f+1,c+1,m):0;var P=d&&k&&l?a.get(f,c,m+1):0;d=d&&n&&l?a.get(f,c+1,m+1):0;k=g&&k&&l?a.get(f+1,c,m+1):0;a=g&&n&&l?a.get(f+1,c+1,m+1):0;return(1-h)*((1-e)*((1-b)*p+b*
C)+e*((1-b)*q+b*u))+h*((1-e)*((1-b)*P+b*k)+e*((1-b)*d+b*a))}function e(a){var b=a.shape.length|0,e=Array(b),f=Array(b),h=Array(b),d=Array(b),g;for(g=0;g<b;++g){var c=+arguments[g+1];e[g]=Math.floor(c);f[g]=c-e[g];h[g]=0<=e[g]&&e[g]<a.shape[g];d[g]=0<=e[g]+1&&e[g]+1<a.shape[g]}c=0;var k;g=0;a:for(;g<1<<b;++g){var m=1;var l=a.offset;for(k=0;k<b;++k)if(g&1<<k){if(!d[k])continue a;m*=f[k];l+=a.stride[k]*(e[k]+1)}else{if(!h[k])continue a;m*=1-f[k];l+=a.stride[k]*e[k]}c+=m*a.data[l]}return c}p.exports=
function(a,b,n,u){switch(a.shape.length){case 0:return 0;case 1:return m(a,b);case 2:return k(a,b,n);case 3:return h(a,b,n,u);default:return e.apply(void 0,arguments)}};p.exports.d1=m;p.exports.d2=k;p.exports.d3=h},{}],436:[function(a,p,l){function m(a){if(!a)return e;for(var b=0;b<a.args.length;++b){var d=a.args[b];a.args[b]=0===b?{name:d,lvalue:!0,rvalue:!!a.rvalue,count:a.count||1}:{name:d,lvalue:!1,rvalue:!0,count:1}}a.thisVars||(a.thisVars=[]);a.localVars||(a.localVars=[]);return a}function k(a){for(var b=
[],d=0;d<a.args.length;++d)b.push("a"+d);b=new Function("P",["return function ",a.funcName,"_ndarrayops(",b.join(","),") {P(",b.join(","),");return a0}"].join(""));a=h({args:a.args,pre:m(a.pre),body:m(a.body),post:m(a.proc),funcName:a.funcName});return b(a)}var h=a("cwise-compiler"),e={body:"",args:[],thisVars:[],localVars:[]},f={add:"+",sub:"-",mul:"*",div:"/",mod:"%",band:"\x26",bor:"|",bxor:"^",lshift:"\x3c\x3c",rshift:"\x3e\x3e",rrshift:"\x3e\x3e\x3e"};(function(){for(var a in f){var b=f[a];l[a]=
k({args:["array","array","array"],body:{args:["a","b","c"],body:"a\x3db"+b+"c"},funcName:a});l[a+"eq"]=k({args:["array","array"],body:{args:["a","b"],body:"a"+b+"\x3db"},rvalue:!0,funcName:a+"eq"});l[a+"s"]=k({args:["array","array","scalar"],body:{args:["a","b","s"],body:"a\x3db"+b+"s"},funcName:a+"s"});l[a+"seq"]=k({args:["array","scalar"],body:{args:["a","s"],body:"a"+b+"\x3ds"},rvalue:!0,funcName:a+"seq"})}})();var b={not:"!",bnot:"~",neg:"-",recip:"1.0/"};(function(){for(var a in b){var c=b[a];
l[a]=k({args:["array","array"],body:{args:["a","b"],body:"a\x3d"+c+"b"},funcName:a});l[a+"eq"]=k({args:["array"],body:{args:["a"],body:"a\x3d"+c+"a"},rvalue:!0,count:2,funcName:a+"eq"})}})();var n={and:"\x26\x26",or:"||",eq:"\x3d\x3d\x3d",neq:"!\x3d\x3d",lt:"\x3c",gt:"\x3e",leq:"\x3c\x3d",geq:"\x3e\x3d"};(function(){for(var a in n){var b=n[a];l[a]=k({args:["array","array","array"],body:{args:["a","b","c"],body:"a\x3db"+b+"c"},funcName:a});l[a+"s"]=k({args:["array","array","scalar"],body:{args:["a",
"b","s"],body:"a\x3db"+b+"s"},funcName:a+"s"});l[a+"eq"]=k({args:["array","array"],body:{args:["a","b"],body:"a\x3da"+b+"b"},rvalue:!0,count:2,funcName:a+"eq"});l[a+"seq"]=k({args:["array","scalar"],body:{args:["a","s"],body:"a\x3da"+b+"s"},rvalue:!0,count:2,funcName:a+"seq"})}})();var u="abs acos asin atan ceil cos exp floor log round sin sqrt tan".split(" ");(function(){for(var a=0;a<u.length;++a){var b=u[a];l[b]=k({args:["array","array"],pre:{args:[],body:"this_f\x3dMath."+b,thisVars:["this_f"]},
body:{args:["a","b"],body:"a\x3dthis_f(b)",thisVars:["this_f"]},funcName:b});l[b+"eq"]=k({args:["array"],pre:{args:[],body:"this_f\x3dMath."+b,thisVars:["this_f"]},body:{args:["a"],body:"a\x3dthis_f(a)",thisVars:["this_f"]},rvalue:!0,count:2,funcName:b+"eq"})}})();var r=["max","min","atan2","pow"];(function(){for(var a=0;a<r.length;++a){var b=r[a];l[b]=k({args:["array","array","array"],pre:{args:[],body:"this_f\x3dMath."+b,thisVars:["this_f"]},body:{args:["a","b","c"],body:"a\x3dthis_f(b,c)",thisVars:["this_f"]},
funcName:b});l[b+"s"]=k({args:["array","array","scalar"],pre:{args:[],body:"this_f\x3dMath."+b,thisVars:["this_f"]},body:{args:["a","b","c"],body:"a\x3dthis_f(b,c)",thisVars:["this_f"]},funcName:b+"s"});l[b+"eq"]=k({args:["array","array"],pre:{args:[],body:"this_f\x3dMath."+b,thisVars:["this_f"]},body:{args:["a","b"],body:"a\x3dthis_f(a,b)",thisVars:["this_f"]},rvalue:!0,count:2,funcName:b+"eq"});l[b+"seq"]=k({args:["array","scalar"],pre:{args:[],body:"this_f\x3dMath."+b,thisVars:["this_f"]},body:{args:["a",
"b"],body:"a\x3dthis_f(a,b)",thisVars:["this_f"]},rvalue:!0,count:2,funcName:b+"seq"})}})();var d=["atan2","pow"];(function(){for(var a=0;a<d.length;++a){var b=d[a];l[b+"op"]=k({args:["array","array","array"],pre:{args:[],body:"this_f\x3dMath."+b,thisVars:["this_f"]},body:{args:["a","b","c"],body:"a\x3dthis_f(c,b)",thisVars:["this_f"]},funcName:b+"op"});l[b+"ops"]=k({args:["array","array","scalar"],pre:{args:[],body:"this_f\x3dMath."+b,thisVars:["this_f"]},body:{args:["a","b","c"],body:"a\x3dthis_f(c,b)",
thisVars:["this_f"]},funcName:b+"ops"});l[b+"opeq"]=k({args:["array","array"],pre:{args:[],body:"this_f\x3dMath."+b,thisVars:["this_f"]},body:{args:["a","b"],body:"a\x3dthis_f(b,a)",thisVars:["this_f"]},rvalue:!0,count:2,funcName:b+"opeq"});l[b+"opseq"]=k({args:["array","scalar"],pre:{args:[],body:"this_f\x3dMath."+b,thisVars:["this_f"]},body:{args:["a","b"],body:"a\x3dthis_f(b,a)",thisVars:["this_f"]},rvalue:!0,count:2,funcName:b+"opseq"})}})();l.any=h({args:["array"],pre:e,body:{args:[{name:"a",
lvalue:!1,rvalue:!0,count:1}],body:"if(a){return true}",localVars:[],thisVars:[]},post:{args:[],localVars:[],thisVars:[],body:"return false"},funcName:"any"});l.all=h({args:["array"],pre:e,body:{args:[{name:"x",lvalue:!1,rvalue:!0,count:1}],body:"if(!x){return false}",localVars:[],thisVars:[]},post:{args:[],localVars:[],thisVars:[],body:"return true"},funcName:"all"});l.sum=h({args:["array"],pre:{args:[],localVars:[],thisVars:["this_s"],body:"this_s\x3d0"},body:{args:[{name:"a",lvalue:!1,rvalue:!0,
count:1}],body:"this_s+\x3da",localVars:[],thisVars:["this_s"]},post:{args:[],localVars:[],thisVars:["this_s"],body:"return this_s"},funcName:"sum"});l.prod=h({args:["array"],pre:{args:[],localVars:[],thisVars:["this_s"],body:"this_s\x3d1"},body:{args:[{name:"a",lvalue:!1,rvalue:!0,count:1}],body:"this_s*\x3da",localVars:[],thisVars:["this_s"]},post:{args:[],localVars:[],thisVars:["this_s"],body:"return this_s"},funcName:"prod"});l.norm2squared=h({args:["array"],pre:{args:[],localVars:[],thisVars:["this_s"],
body:"this_s\x3d0"},body:{args:[{name:"a",lvalue:!1,rvalue:!0,count:2}],body:"this_s+\x3da*a",localVars:[],thisVars:["this_s"]},post:{args:[],localVars:[],thisVars:["this_s"],body:"return this_s"},funcName:"norm2squared"});l.norm2=h({args:["array"],pre:{args:[],localVars:[],thisVars:["this_s"],body:"this_s\x3d0"},body:{args:[{name:"a",lvalue:!1,rvalue:!0,count:2}],body:"this_s+\x3da*a",localVars:[],thisVars:["this_s"]},post:{args:[],localVars:[],thisVars:["this_s"],body:"return Math.sqrt(this_s)"},
funcName:"norm2"});l.norminf=h({args:["array"],pre:{args:[],localVars:[],thisVars:["this_s"],body:"this_s\x3d0"},body:{args:[{name:"a",lvalue:!1,rvalue:!0,count:4}],body:"if(-a\x3ethis_s){this_s\x3d-a}else if(a\x3ethis_s){this_s\x3da}",localVars:[],thisVars:["this_s"]},post:{args:[],localVars:[],thisVars:["this_s"],body:"return this_s"},funcName:"norminf"});l.norm1=h({args:["array"],pre:{args:[],localVars:[],thisVars:["this_s"],body:"this_s\x3d0"},body:{args:[{name:"a",lvalue:!1,rvalue:!0,count:3}],
body:"this_s+\x3da\x3c0?-a:a",localVars:[],thisVars:["this_s"]},post:{args:[],localVars:[],thisVars:["this_s"],body:"return this_s"},funcName:"norm1"});l.sup=h({args:["array"],pre:{body:"this_h\x3d-Infinity",args:[],thisVars:["this_h"],localVars:[]},body:{body:"if(_inline_1_arg0_\x3ethis_h)this_h\x3d_inline_1_arg0_",args:[{name:"_inline_1_arg0_",lvalue:!1,rvalue:!0,count:2}],thisVars:["this_h"],localVars:[]},post:{body:"return this_h",args:[],thisVars:["this_h"],localVars:[]}});l.inf=h({args:["array"],
pre:{body:"this_h\x3dInfinity",args:[],thisVars:["this_h"],localVars:[]},body:{body:"if(_inline_1_arg0_\x3cthis_h)this_h\x3d_inline_1_arg0_",args:[{name:"_inline_1_arg0_",lvalue:!1,rvalue:!0,count:2}],thisVars:["this_h"],localVars:[]},post:{body:"return this_h",args:[],thisVars:["this_h"],localVars:[]}});l.argmin=h({args:["index","array","shape"],pre:{body:"{this_v\x3dInfinity;this_i\x3d_inline_0_arg2_.slice(0)}",args:[{name:"_inline_0_arg0_",lvalue:!1,rvalue:!1,count:0},{name:"_inline_0_arg1_",lvalue:!1,
rvalue:!1,count:0},{name:"_inline_0_arg2_",lvalue:!1,rvalue:!0,count:1}],thisVars:["this_i","this_v"],localVars:[]},body:{body:"{if(_inline_1_arg1_\x3cthis_v){this_v\x3d_inline_1_arg1_;for(var _inline_1_k\x3d0;_inline_1_k\x3c_inline_1_arg0_.length;++_inline_1_k){this_i[_inline_1_k]\x3d_inline_1_arg0_[_inline_1_k]}}}",args:[{name:"_inline_1_arg0_",lvalue:!1,rvalue:!0,count:2},{name:"_inline_1_arg1_",lvalue:!1,rvalue:!0,count:2}],thisVars:["this_i","this_v"],localVars:["_inline_1_k"]},post:{body:"{return this_i}",
args:[],thisVars:["this_i"],localVars:[]}});l.argmax=h({args:["index","array","shape"],pre:{body:"{this_v\x3d-Infinity;this_i\x3d_inline_0_arg2_.slice(0)}",args:[{name:"_inline_0_arg0_",lvalue:!1,rvalue:!1,count:0},{name:"_inline_0_arg1_",lvalue:!1,rvalue:!1,count:0},{name:"_inline_0_arg2_",lvalue:!1,rvalue:!0,count:1}],thisVars:["this_i","this_v"],localVars:[]},body:{body:"{if(_inline_1_arg1_\x3ethis_v){this_v\x3d_inline_1_arg1_;for(var _inline_1_k\x3d0;_inline_1_k\x3c_inline_1_arg0_.length;++_inline_1_k){this_i[_inline_1_k]\x3d_inline_1_arg0_[_inline_1_k]}}}",
args:[{name:"_inline_1_arg0_",lvalue:!1,rvalue:!0,count:2},{name:"_inline_1_arg1_",lvalue:!1,rvalue:!0,count:2}],thisVars:["this_i","this_v"],localVars:["_inline_1_k"]},post:{body:"{return this_i}",args:[],thisVars:["this_i"],localVars:[]}});l.random=k({args:["array"],pre:{args:[],body:"this_f\x3dMath.random",thisVars:["this_f"]},body:{args:["a"],body:"a\x3dthis_f()",thisVars:["this_f"]},funcName:"random"});l.assign=k({args:["array","array"],body:{args:["a","b"],body:"a\x3db"},funcName:"assign"});
l.assigns=k({args:["array","scalar"],body:{args:["a","b"],body:"a\x3db"},funcName:"assigns"});l.equals=h({args:["array","array"],pre:e,body:{args:[{name:"x",lvalue:!1,rvalue:!0,count:1},{name:"y",lvalue:!1,rvalue:!0,count:1}],body:"if(x!\x3d\x3dy){return false}",localVars:[],thisVars:[]},post:{args:[],localVars:[],thisVars:[],body:"return true"},funcName:"equals"})},{"cwise-compiler":136}],437:[function(a,p,l){var m=a("ndarray"),k=a("./doConvert.js");p.exports=function(a,e){for(var f=[],b=a,h=1;Array.isArray(b);)f.push(b.length),
h*=b.length,b=b[0];if(0===f.length)return m();e||(e=m(new Float64Array(h),f));k(e,a);return e}},{"./doConvert.js":438,ndarray:442}],438:[function(a,p,l){p.exports=a("cwise-compiler")({args:["array","scalar","index"],pre:{body:"{}",args:[],thisVars:[],localVars:[]},body:{body:"{\nvar _inline_1_v\x3d_inline_1_arg1_,_inline_1_i\nfor(_inline_1_i\x3d0;_inline_1_i\x3c_inline_1_arg2_.length-1;++_inline_1_i) {\n_inline_1_v\x3d_inline_1_v[_inline_1_arg2_[_inline_1_i]]\n}\n_inline_1_arg0_\x3d_inline_1_v[_inline_1_arg2_[_inline_1_arg2_.length-1]]\n}",
args:[{name:"_inline_1_arg0_",lvalue:!0,rvalue:!1,count:1},{name:"_inline_1_arg1_",lvalue:!1,rvalue:!0,count:1},{name:"_inline_1_arg2_",lvalue:!1,rvalue:!0,count:4}],thisVars:[],localVars:["_inline_1_i","_inline_1_v"]},post:{body:"{}",args:[],thisVars:[],localVars:[]},funcName:"convert",blockSize:64})},{"cwise-compiler":136}],439:[function(a,p,l){function m(a){switch(a){case "uint8":return[f.mallocUint8,f.freeUint8];case "uint16":return[f.mallocUint16,f.freeUint16];case "uint32":return[f.mallocUint32,
f.freeUint32];case "int8":return[f.mallocInt8,f.freeInt8];case "int16":return[f.mallocInt16,f.freeInt16];case "int32":return[f.mallocInt32,f.freeInt32];case "float32":return[f.mallocFloat,f.freeFloat];case "float64":return[f.mallocDouble,f.freeDouble];default:return null}}function k(a){for(var b=[],e=0;e<a;++e)b.push("s"+e);for(e=0;e<a;++e)b.push("n"+e);for(e=1;e<a;++e)b.push("d"+e);for(e=1;e<a;++e)b.push("e"+e);for(e=1;e<a;++e)b.push("f"+e);return b}function h(a,e){function b(a){return"generic"===
e?["data.get(",a,")"].join(""):["data[",a,"]"].join("")}function f(a,b){return"generic"===e?["data.set(",a,",",b,")"].join(""):["data[",a,"]\x3d",b].join("")}var d=["'use strict'"],g=["ndarrayInsertionSort",a.join("d"),e].join(""),c=["left","right","data","offset"].concat(k(a.length)),h=m(e),n=["i,j,cptr,ptr\x3dleft*s0+offset"];if(1<a.length){for(var l=[],p=1;p<a.length;++p)n.push("i"+p),l.push("n"+p);h?n.push("scratch\x3dmalloc("+l.join("*")+")"):n.push("scratch\x3dnew Array("+l.join("*")+")");n.push("dptr",
"sptr","a","b")}else n.push("scratch");d.push(["function ",g,"(",c.join(","),"){var ",n.join(",")].join(""),"for(i\x3dleft+1;i\x3c\x3dright;++i){","j\x3di;ptr+\x3ds0","cptr\x3dptr");if(1<a.length){d.push("dptr\x3d0;sptr\x3dptr");for(p=a.length-1;0<=p;--p)c=a[p],0!==c&&d.push(["for(i",c,"\x3d0;i",c,"\x3cn",c,";++i",c,"){"].join(""));d.push("scratch[dptr++]\x3d",b("sptr"));for(p=0;p<a.length;++p)c=a[p],0!==c&&d.push("sptr+\x3dd"+c,"}");d.push("__g:while(j--\x3eleft){","dptr\x3d0","sptr\x3dcptr-s0");
for(p=1;p<a.length;++p)1===p&&d.push("__l:"),d.push(["for(i",p,"\x3d0;i",p,"\x3cn",p,";++i",p,"){"].join(""));d.push(["a\x3d",b("sptr"),"\nb\x3dscratch[dptr]\nif(a\x3cb){break __g}\nif(a\x3eb){break __l}"].join(""));for(p=a.length-1;1<=p;--p)d.push("sptr+\x3de"+p,"dptr+\x3df"+p,"}");d.push("dptr\x3dcptr;sptr\x3dcptr-s0");for(p=a.length-1;0<=p;--p)c=a[p],0!==c&&d.push(["for(i",c,"\x3d0;i",c,"\x3cn",c,";++i",c,"){"].join(""));d.push(f("dptr",b("sptr")));for(p=0;p<a.length;++p)c=a[p],0!==c&&d.push(["dptr+\x3dd",
c,";sptr+\x3dd",c].join(""),"}");d.push("cptr-\x3ds0\n}");d.push("dptr\x3dcptr;sptr\x3d0");for(p=a.length-1;0<=p;--p)c=a[p],0!==c&&d.push(["for(i",c,"\x3d0;i",c,"\x3cn",c,";++i",c,"){"].join(""));d.push(f("dptr","scratch[sptr++]"));for(p=0;p<a.length;++p)c=a[p],0!==c&&d.push("dptr+\x3dd"+c,"}")}else d.push("scratch\x3d"+b("ptr"),"while((j--\x3eleft)\x26\x26("+b("cptr-s0")+"\x3escratch)){",f("cptr",b("cptr-s0")),"cptr-\x3ds0","}",f("cptr","scratch"));d.push("}");1<a.length&&h&&d.push("free(scratch)");
d.push("} return "+g);if(h)return a=new Function("malloc","free",d.join("\n")),a(h[0],h[1]);a=new Function(d.join("\n"));return a()}function e(a,e,f){function b(a){return["(offset+",a,"*s0)"].join("")}function d(a){return"generic"===e?["data.get(",a,")"].join(""):["data[",a,"]"].join("")}function g(a,b){return"generic"===e?["data.set(",a,",",b,")"].join(""):["data[",a,"]\x3d",b].join("")}function c(c,d,e){if(1===c.length)H.push("ptr0\x3d"+b(c[0]));else for(var g=0;g<c.length;++g)H.push(["b_ptr",g,
"\x3ds0*",c[g]].join(""));d&&H.push("pivot_ptr\x3d0");H.push("ptr_shift\x3doffset");for(g=a.length-1;0<=g;--g){var f=a[g];0!==f&&H.push(["for(i",f,"\x3d0;i",f,"\x3cn",f,";++i",f,"){"].join(""))}if(1<c.length)for(g=0;g<c.length;++g)H.push(["ptr",g,"\x3db_ptr",g,"+ptr_shift"].join(""));H.push(e);d&&H.push("++pivot_ptr");for(g=0;g<a.length;++g)f=a[g],0!==f&&(1<c.length?H.push("ptr_shift+\x3dd"+f):H.push("ptr0+\x3dd"+f),H.push("}"))}function h(c,d,e,g){if(1===d.length)H.push("ptr0\x3d"+b(d[0]));else{for(var f=
0;f<d.length;++f)H.push(["b_ptr",f,"\x3ds0*",d[f]].join(""));H.push("ptr_shift\x3doffset")}e&&H.push("pivot_ptr\x3d0");c&&H.push(c+":");for(f=1;f<a.length;++f)H.push(["for(i",f,"\x3d0;i",f,"\x3cn",f,";++i",f,"){"].join(""));if(1<d.length)for(f=0;f<d.length;++f)H.push(["ptr",f,"\x3db_ptr",f,"+ptr_shift"].join(""));H.push(g);for(f=a.length-1;1<=f;--f)e&&H.push("pivot_ptr+\x3df"+f),1<d.length?H.push("ptr_shift+\x3de"+f):H.push("ptr0+\x3de"+f),H.push("}")}function n(){1<a.length&&I&&H.push("free(pivot1)",
"free(pivot2)")}function u(c,e){c="el"+c;e="el"+e;if(1<a.length){var g="__l"+ ++Q;h(g,[c,e],!1,["comp\x3d",d("ptr0"),"-",d("ptr1"),"\nif(comp\x3e0){tmp0\x3d",c,";",c,"\x3d",e,";",e,"\x3dtmp0;break ",g,"}\nif(comp\x3c0){break ",g,"}"].join(""))}else H.push(["if(",d(b(c)),"\x3e",d(b(e)),"){tmp0\x3d",c,";",c,"\x3d",e,";",e,"\x3dtmp0}"].join(""))}function l(e,f){1<a.length?c([e,f],!1,g("ptr0",d("ptr1"))):H.push(g(b(e),d(b(f))))}function p(c,e,g){if(1<a.length){var f="__l"+ ++Q;h(f,[e],!0,[c,"\x3d",d("ptr0"),
"-pivot",g,"[pivot_ptr]\nif(",c,"!\x3d\x3d0){break ",f,"}"].join(""))}else H.push([c,"\x3d",d(b(e)),"-pivot",g].join(""))}function q(e,f){1<a.length?c([e,f],!1,["tmp\x3d",d("ptr0"),"\n",g("ptr0",d("ptr1")),"\n",g("ptr1","tmp")].join("")):H.push(["ptr0\x3d",b(e),"\nptr1\x3d",b(f),"\ntmp\x3d",d("ptr0"),"\n",g("ptr0",d("ptr1")),"\n",g("ptr1","tmp")].join(""))}function A(e,f,h){1<a.length?(c([e,f,h],!1,["tmp\x3d",d("ptr0"),"\n",g("ptr0",d("ptr1")),"\n",g("ptr1",d("ptr2")),"\n",g("ptr2","tmp")].join("")),
H.push("++"+f,"--"+h)):H.push(["ptr0\x3d",b(e),"\nptr1\x3d",b(f),"\nptr2\x3d",b(h),"\n++",f,"\n--",h,"\ntmp\x3d",d("ptr0"),"\n",g("ptr0",d("ptr1")),"\n",g("ptr1",d("ptr2")),"\n",g("ptr2","tmp")].join(""))}function C(a,b){q(a,b);H.push("--"+b)}function P(e,f,h){1<a.length?c([e,f],!0,[g("ptr0",d("ptr1")),"\n",g("ptr1",["pivot",h,"[pivot_ptr]"].join(""))].join("")):H.push(g(b(e),d(b(f))),g(b(f),"pivot"+h))}function J(b,c){H.push(["if((",c,"-",b,")\x3c\x3d32){\ninsertionSort(",b,",",c,",data,offset,",
k(a.length).join(","),")\n}else{\n",w,"(",b,",",c,",data,offset,",k(a.length).join(","),")\n}"].join(""))}function E(e,g,f){1<a.length?(H.push(["__l",++Q,":while(true){"].join("")),c([e],!0,["if(",d("ptr0"),"!\x3d\x3dpivot",g,"[pivot_ptr]){break __l",Q,"}"].join("")),H.push(f,"}")):H.push(["while(",d(b(e)),"\x3d\x3d\x3dpivot",g,"){",f,"}"].join(""))}var H=["'use strict'"],w=["ndarrayQuickSort",a.join("d"),e].join(""),x=["left","right","data","offset"].concat(k(a.length)),I=m(e),Q=0;H.push(["function ",
w,"(",x.join(","),"){"].join(""));x="sixth\x3d((right-left+1)/6)|0 index1\x3dleft+sixth index5\x3dright-sixth index3\x3d(left+right)\x3e\x3e1 index2\x3dindex3-sixth index4\x3dindex3+sixth el1\x3dindex1 el2\x3dindex2 el3\x3dindex3 el4\x3dindex4 el5\x3dindex5 less\x3dleft+1 great\x3dright-1 pivots_are_equal\x3dtrue tmp tmp0 x y z k ptr0 ptr1 ptr2 comp_pivot1\x3d0 comp_pivot2\x3d0 comp\x3d0".split(" ");if(1<a.length){for(var N=[],L=1;L<a.length;++L)N.push("n"+L),x.push("i"+L);for(L=0;8>L;++L)x.push("b_ptr"+
L);x.push("ptr3","ptr4","ptr5","ptr6","ptr7","pivot_ptr","ptr_shift","elementSize\x3d"+N.join("*"));I?x.push("pivot1\x3dmalloc(elementSize)","pivot2\x3dmalloc(elementSize)"):x.push("pivot1\x3dnew Array(elementSize),pivot2\x3dnew Array(elementSize)")}else x.push("pivot1","pivot2");H.push("var "+x.join(","));u(1,2);u(4,5);u(1,3);u(2,3);u(1,4);u(3,4);u(2,5);u(2,3);u(4,5);1<a.length?c("el1 el2 el3 el4 el5 index1 index3 index5".split(" "),!0,["pivot1[pivot_ptr]\x3d",d("ptr1"),"\npivot2[pivot_ptr]\x3d",
d("ptr3"),"\npivots_are_equal\x3dpivots_are_equal\x26\x26(pivot1[pivot_ptr]\x3d\x3d\x3dpivot2[pivot_ptr])\nx\x3d",d("ptr0"),"\ny\x3d",d("ptr2"),"\nz\x3d",d("ptr4"),"\n",g("ptr5","x"),"\n",g("ptr6","y"),"\n",g("ptr7","z")].join("")):H.push(["pivot1\x3d",d(b("el2")),"\npivot2\x3d",d(b("el4")),"\npivots_are_equal\x3dpivot1\x3d\x3d\x3dpivot2\nx\x3d",d(b("el1")),"\ny\x3d",d(b("el3")),"\nz\x3d",d(b("el5")),"\n",g(b("index1"),"x"),"\n",g(b("index3"),"y"),"\n",g(b("index5"),"z")].join(""));l("index2","left");
l("index4","right");H.push("if(pivots_are_equal){");H.push("for(k\x3dless;k\x3c\x3dgreat;++k){");p("comp","k",1);H.push("if(comp\x3d\x3d\x3d0){continue}");H.push("if(comp\x3c0){");H.push("if(k!\x3d\x3dless){");q("k","less");H.push("}");H.push("++less");H.push("}else{");H.push("while(true){");p("comp","great",1);H.push("if(comp\x3e0){");H.push("great--");H.push("}else if(comp\x3c0){");A("k","less","great");H.push("break");H.push("}else{");C("k","great");H.push("break");H.push("}");H.push("}");H.push("}");
H.push("}");H.push("}else{");H.push("for(k\x3dless;k\x3c\x3dgreat;++k){");p("comp_pivot1","k",1);H.push("if(comp_pivot1\x3c0){");H.push("if(k!\x3d\x3dless){");q("k","less");H.push("}");H.push("++less");H.push("}else{");p("comp_pivot2","k",2);H.push("if(comp_pivot2\x3e0){");H.push("while(true){");p("comp","great",2);H.push("if(comp\x3e0){");H.push("if(--great\x3ck){break}");H.push("continue");H.push("}else{");p("comp","great",1);H.push("if(comp\x3c0){");A("k","less","great");H.push("}else{");C("k",
"great");H.push("}");H.push("break");H.push("}");H.push("}");H.push("}");H.push("}");H.push("}");H.push("}");P("left","(less-1)",1);P("right","(great+1)",2);J("left","(less-2)");J("(great+2)","right");H.push("if(pivots_are_equal){");n();H.push("return");H.push("}");H.push("if(less\x3cindex1\x26\x26great\x3eindex5){");E("less",1,"++less");E("great",2,"--great");H.push("for(k\x3dless;k\x3c\x3dgreat;++k){");p("comp_pivot1","k",1);H.push("if(comp_pivot1\x3d\x3d\x3d0){");H.push("if(k!\x3d\x3dless){");
q("k","less");H.push("}");H.push("++less");H.push("}else{");p("comp_pivot2","k",2);H.push("if(comp_pivot2\x3d\x3d\x3d0){");H.push("while(true){");p("comp","great",2);H.push("if(comp\x3d\x3d\x3d0){");H.push("if(--great\x3ck){break}");H.push("continue");H.push("}else{");p("comp","great",1);H.push("if(comp\x3c0){");A("k","less","great");H.push("}else{");C("k","great");H.push("}");H.push("break");H.push("}");H.push("}");H.push("}");H.push("}");H.push("}");H.push("}");n();J("less","great");H.push("}return "+
w);if(1<a.length&&I)return x=new Function("insertionSort","malloc","free",H.join("\n")),x(f,I[0],I[1]);x=new Function("insertionSort",H.join("\n"));return x(f)}var f=a("typedarray-pool");p.exports=function(a,f){var b=["'use strict'"],n=["ndarraySortWrapper",a.join("d"),f].join("");b.push(["function ",n,"(array){"].join(""));for(var d=["data\x3darray.data,offset\x3darray.offset|0,shape\x3darray.shape,stride\x3darray.stride"],g=0;g<a.length;++g)d.push(["s",g,"\x3dstride[",g,"]|0,n",g,"\x3dshape[",g,
"]|0"].join(""));var c=Array(a.length),m=[];for(g=0;g<a.length;++g){var t=a[g];0!==t&&(c[t]=0===m.length?"1":m.join("*"),m.push("n"+t))}var l=m=-1;for(g=0;g<a.length;++g)t=a[g],0!==t&&(0<m?d.push(["d",t,"\x3ds",t,"-d",m,"*n",m].join("")):d.push(["d",t,"\x3ds",t].join("")),m=t),t=a.length-1-g,0!==t&&(0<l?d.push(["e",t,"\x3ds",t,"-e",l,"*n",l,",f",t,"\x3d",c[t],"-f",l,"*n",l].join("")):d.push(["e",t,"\x3ds",t,",f",t,"\x3d",c[t]].join("")),l=t);b.push("var "+d.join(","));d=["0","n0-1","data","offset"].concat(k(a.length));
b.push(["if(n0\x3c\x3d32){insertionSort(",d.join(","),")}else{quickSort(",d.join(","),")}"].join(""));b.push("}return "+n);b=new Function("insertionSort","quickSort",b.join("\n"));n=h(a,f);a=e(a,f,n);return b(n,a)}},{"typedarray-pool":529}],440:[function(a,p,l){var m=a("./lib/compile_sort.js"),k={};p.exports=function(a){var e=a.order,f=a.dtype,b=[e,f].join(":"),h=k[b];h||(k[b]=h=m(e,f));h(a);return a}},{"./lib/compile_sort.js":439}],441:[function(a,p,l){var m=a("ndarray-linear-interpolate"),k=a("cwise/lib/wrapper")({args:["index",
"array","scalar","scalar","scalar"],pre:{body:"{this_warped\x3dnew Array(_inline_3_arg4_)}",args:[{name:"_inline_3_arg0_",lvalue:!1,rvalue:!1,count:0},{name:"_inline_3_arg1_",lvalue:!1,rvalue:!1,count:0},{name:"_inline_3_arg2_",lvalue:!1,rvalue:!1,count:0},{name:"_inline_3_arg3_",lvalue:!1,rvalue:!1,count:0},{name:"_inline_3_arg4_",lvalue:!1,rvalue:!0,count:1}],thisVars:["this_warped"],localVars:[]},body:{body:"{_inline_4_arg2_(this_warped,_inline_4_arg0_),_inline_4_arg1_\x3d_inline_4_arg3_.apply(void 0,this_warped)}",
args:[{name:"_inline_4_arg0_",lvalue:!1,rvalue:!0,count:1},{name:"_inline_4_arg1_",lvalue:!0,rvalue:!1,count:1},{name:"_inline_4_arg2_",lvalue:!1,rvalue:!0,count:1},{name:"_inline_4_arg3_",lvalue:!1,rvalue:!0,count:1},{name:"_inline_4_arg4_",lvalue:!1,rvalue:!1,count:0}],thisVars:["this_warped"],localVars:[]},post:{body:"{}",args:[],thisVars:[],localVars:[]},debug:!1,funcName:"warpND",blockSize:64}),h=a("cwise/lib/wrapper")({args:["index","array","scalar","scalar","scalar"],pre:{body:"{this_warped\x3d[0]}",
args:[],thisVars:["this_warped"],localVars:[]},body:{body:"{_inline_7_arg2_(this_warped,_inline_7_arg0_),_inline_7_arg1_\x3d_inline_7_arg3_(_inline_7_arg4_,this_warped[0])}",args:[{name:"_inline_7_arg0_",lvalue:!1,rvalue:!0,count:1},{name:"_inline_7_arg1_",lvalue:!0,rvalue:!1,count:1},{name:"_inline_7_arg2_",lvalue:!1,rvalue:!0,count:1},{name:"_inline_7_arg3_",lvalue:!1,rvalue:!0,count:1},{name:"_inline_7_arg4_",lvalue:!1,rvalue:!0,count:1}],thisVars:["this_warped"],localVars:[]},post:{body:"{}",
args:[],thisVars:[],localVars:[]},debug:!1,funcName:"warp1D",blockSize:64}),e=a("cwise/lib/wrapper")({args:["index","array","scalar","scalar","scalar"],pre:{body:"{this_warped\x3d[0,0]}",args:[],thisVars:["this_warped"],localVars:[]},body:{body:"{_inline_10_arg2_(this_warped,_inline_10_arg0_),_inline_10_arg1_\x3d_inline_10_arg3_(_inline_10_arg4_,this_warped[0],this_warped[1])}",args:[{name:"_inline_10_arg0_",lvalue:!1,rvalue:!0,count:1},{name:"_inline_10_arg1_",lvalue:!0,rvalue:!1,count:1},{name:"_inline_10_arg2_",
lvalue:!1,rvalue:!0,count:1},{name:"_inline_10_arg3_",lvalue:!1,rvalue:!0,count:1},{name:"_inline_10_arg4_",lvalue:!1,rvalue:!0,count:1}],thisVars:["this_warped"],localVars:[]},post:{body:"{}",args:[],thisVars:[],localVars:[]},debug:!1,funcName:"warp2D",blockSize:64}),f=a("cwise/lib/wrapper")({args:["index","array","scalar","scalar","scalar"],pre:{body:"{this_warped\x3d[0,0,0]}",args:[],thisVars:["this_warped"],localVars:[]},body:{body:"{_inline_13_arg2_(this_warped,_inline_13_arg0_),_inline_13_arg1_\x3d_inline_13_arg3_(_inline_13_arg4_,this_warped[0],this_warped[1],this_warped[2])}",
args:[{name:"_inline_13_arg0_",lvalue:!1,rvalue:!0,count:1},{name:"_inline_13_arg1_",lvalue:!0,rvalue:!1,count:1},{name:"_inline_13_arg2_",lvalue:!1,rvalue:!0,count:1},{name:"_inline_13_arg3_",lvalue:!1,rvalue:!0,count:1},{name:"_inline_13_arg4_",lvalue:!1,rvalue:!0,count:1}],thisVars:["this_warped"],localVars:[]},post:{body:"{}",args:[],thisVars:[],localVars:[]},debug:!1,funcName:"warp3D",blockSize:64});p.exports=function(a,n,u){switch(n.shape.length){case 1:h(a,u,m.d1,n);break;case 2:e(a,u,m.d2,
n);break;case 3:f(a,u,m.d3,n);break;default:k(a,u,m.bind(void 0,n),n.shape.length)}return a}},{"cwise/lib/wrapper":139,"ndarray-linear-interpolate":435}],442:[function(a,p,l){function m(a,b){return a[0]-b[0]}function k(){var a=this.stride,b=Array(a.length),e;for(e=0;e<b.length;++e)b[e]=[Math.abs(a[e]),e];b.sort(m);a=Array(b.length);for(e=0;e<a.length;++e)a[e]=b[e][1];return a}function h(a,b){var d=["View",b,"d",a].join("");0>b&&(d="View_Nil"+a);var c="generic"===a;if(-1===b)return b=new Function("function "+
d+"(a){this.data\x3da;};var proto\x3d"+d+".prototype;proto.dtype\x3d'"+a+"';proto.index\x3dfunction(){return -1};proto.size\x3d0;proto.dimension\x3d-1;proto.shape\x3dproto.stride\x3dproto.order\x3d[];proto.lo\x3dproto.hi\x3dproto.transpose\x3dproto.step\x3dfunction(){return new "+d+"(this.data);};proto.get\x3dproto.set\x3dfunction(){};proto.pick\x3dfunction(){return null};return function construct_"+d+"(a){return new "+d+"(a);}"),b();if(0===b)return b=new Function("TrivialArray","function "+d+"(a,d) {this.data \x3d a;this.offset \x3d d};var proto\x3d"+
d+".prototype;proto.dtype\x3d'"+a+"';proto.index\x3dfunction(){return this.offset};proto.dimension\x3d0;proto.size\x3d1;proto.shape\x3dproto.stride\x3dproto.order\x3d[];proto.lo\x3dproto.hi\x3dproto.transpose\x3dproto.step\x3dfunction "+d+"_copy() {return new "+d+"(this.data,this.offset)};proto.pick\x3dfunction "+d+"_pick(){return TrivialArray(this.data);};proto.valueOf\x3dproto.get\x3dfunction "+d+"_get(){return "+(c?"this.data.get(this.offset)":"this.data[this.offset]")+"};proto.set\x3dfunction "+
d+"_set(v){return "+(c?"this.data.set(this.offset,v)":"this.data[this.offset]\x3dv")+"};return function construct_"+d+"(a,b,c,d){return new "+d+"(a,d)}"),b(u[a][0]);var e=["'use strict'"];var h=f(b),n=h.map(function(a){return"i"+a}),m="this.offset+"+h.map(function(a){return"this.stride["+a+"]*i"+a}).join("+"),r=h.map(function(a){return"b"+a}).join(","),l=h.map(function(a){return"c"+a}).join(",");e.push("function "+d+"(a,"+r+","+l+",d){this.data\x3da","this.shape\x3d["+r+"]","this.stride\x3d["+l+"]",
"this.offset\x3dd|0}","var proto\x3d"+d+".prototype","proto.dtype\x3d'"+a+"'","proto.dimension\x3d"+b);e.push("Object.defineProperty(proto,'size',{get:function "+d+"_size(){return "+h.map(function(a){return"this.shape["+a+"]"}).join("*"),"}})");1===b?e.push("proto.order\x3d[0]"):(e.push("Object.defineProperty(proto,'order',{get:"),4>b?(e.push("function "+d+"_order(){"),2===b?e.push("return (Math.abs(this.stride[0])\x3eMath.abs(this.stride[1]))?[1,0]:[0,1]}})"):3===b&&e.push("var s0\x3dMath.abs(this.stride[0]),s1\x3dMath.abs(this.stride[1]),s2\x3dMath.abs(this.stride[2]);if(s0\x3es1){if(s1\x3es2){return [2,1,0];}else if(s0\x3es2){return [1,2,0];}else{return [1,0,2];}}else if(s0\x3es2){return [2,0,1];}else if(s2\x3es1){return [0,1,2];}else{return [0,2,1];}}})")):
e.push("ORDER})"));e.push("proto.set\x3dfunction "+d+"_set("+n.join(",")+",v){");c?e.push("return this.data.set("+m+",v)}"):e.push("return this.data["+m+"]\x3dv}");e.push("proto.get\x3dfunction "+d+"_get("+n.join(",")+"){");c?e.push("return this.data.get("+m+")}"):e.push("return this.data["+m+"]}");e.push("proto.index\x3dfunction "+d+"_index(",n.join(),"){return "+m+"}");e.push("proto.hi\x3dfunction "+d+"_hi("+n.join(",")+"){return new "+d+"(this.data,"+h.map(function(a){return["(typeof i",a,"!\x3d\x3d'number'||i",
a,"\x3c0)?this.shape[",a,"]:i",a,"|0"].join("")}).join(",")+","+h.map(function(a){return"this.stride["+a+"]"}).join(",")+",this.offset)}");c=h.map(function(a){return"a"+a+"\x3dthis.shape["+a+"]"});m=h.map(function(a){return"c"+a+"\x3dthis.stride["+a+"]"});e.push("proto.lo\x3dfunction "+d+"_lo("+n.join(",")+"){var b\x3dthis.offset,d\x3d0,"+c.join(",")+","+m.join(","));for(c=0;c<b;++c)e.push("if(typeof i"+c+"\x3d\x3d\x3d'number'\x26\x26i"+c+"\x3e\x3d0){d\x3di"+c+"|0;b+\x3dc"+c+"*d;a"+c+"-\x3dd}");e.push("return new "+
d+"(this.data,"+h.map(function(a){return"a"+a}).join(",")+","+h.map(function(a){return"c"+a}).join(",")+",b)}");e.push("proto.step\x3dfunction "+d+"_step("+n.join(",")+"){var "+h.map(function(a){return"a"+a+"\x3dthis.shape["+a+"]"}).join(",")+","+h.map(function(a){return"b"+a+"\x3dthis.stride["+a+"]"}).join(",")+",c\x3dthis.offset,d\x3d0,ceil\x3dMath.ceil");for(c=0;c<b;++c)e.push("if(typeof i"+c+"\x3d\x3d\x3d'number'){d\x3di"+c+"|0;if(d\x3c0){c+\x3db"+c+"*(a"+c+"-1);a"+c+"\x3dceil(-a"+c+"/d)}else{a"+
c+"\x3dceil(a"+c+"/d)}b"+c+"*\x3dd}");e.push("return new "+d+"(this.data,"+h.map(function(a){return"a"+a}).join(",")+","+h.map(function(a){return"b"+a}).join(",")+",c)}");m=Array(b);r=Array(b);for(c=0;c<b;++c)m[c]="a[i"+c+"]",r[c]="b[i"+c+"]";e.push("proto.transpose\x3dfunction "+d+"_transpose("+n+"){"+n.map(function(a,b){return a+"\x3d("+a+"\x3d\x3d\x3dundefined?"+b+":"+a+"|0)"}).join(";"),"var a\x3dthis.shape,b\x3dthis.stride;return new "+d+"(this.data,"+m.join(",")+","+r.join(",")+",this.offset)}");
e.push("proto.pick\x3dfunction "+d+"_pick("+n+"){var a\x3d[],b\x3d[],c\x3dthis.offset");for(c=0;c<b;++c)e.push("if(typeof i"+c+"\x3d\x3d\x3d'number'\x26\x26i"+c+"\x3e\x3d0){c\x3d(c+this.stride["+c+"]*i"+c+")|0}else{a.push(this.shape["+c+"]);b.push(this.stride["+c+"])}");e.push("var ctor\x3dCTOR_LIST[a.length+1];return ctor(this.data,a,b,c)}");e.push("return function construct_"+d+"(data,shape,stride,offset){return new "+d+"(data,"+h.map(function(a){return"shape["+a+"]"}).join(",")+","+h.map(function(a){return"stride["+
a+"]"}).join(",")+",offset)}");b=new Function("CTOR_LIST","ORDER",e.join("\n"));return b(u[a],k)}function e(a){if(b(a))return"buffer";if(n)switch(Object.prototype.toString.call(a)){case "[object Float64Array]":return"float64";case "[object Float32Array]":return"float32";case "[object Int8Array]":return"int8";case "[object Int16Array]":return"int16";case "[object Int32Array]":return"int32";case "[object Uint8Array]":return"uint8";case "[object Uint16Array]":return"uint16";case "[object Uint32Array]":return"uint32";
case "[object Uint8ClampedArray]":return"uint8_clamped"}return Array.isArray(a)?"array":"generic"}var f=a("iota-array"),b=a("is-buffer"),n="undefined"!==typeof Float64Array,u={float32:[],float64:[],int8:[],int16:[],int32:[],uint8:[],uint16:[],uint32:[],array:[],uint8_clamped:[],buffer:[],generic:[]};(function(){for(var a in u)u[a].push(h(a,-1))});p.exports=function(a,b,g,c){if(void 0===a){var d=u.array[0];return d([])}"number"===typeof a&&(a=[a]);void 0===b&&(b=[a.length]);d=b.length;if(void 0===
g){g=Array(d);for(var f=d-1,k=1;0<=f;--f)g[f]=k,k*=b[f]}if(void 0===c)for(f=c=0;f<d;++f)0>g[f]&&(c-=(b[f]-1)*g[f]);f=e(a);for(k=u[f];k.length<=d+1;)k.push(h(f,k.length-1));d=k[d+1];return d(a,b,g,c)}},{"iota-array":408,"is-buffer":410}],443:[function(a,p,l){var m=a("double-bits"),k=Math.pow(2,-1074);p.exports=function(a,e){if(isNaN(a)||isNaN(e))return NaN;if(a===e)return a;if(0===a)return 0>e?-k:k;var f=m.hi(a),b=m.lo(a);e>a===0<a?4294967295===b?(f+=1,b=0):b+=1:0===b?(b=4294967295,--f):--b;return m.pack(b,
f)}},{"double-bits":158}],444:[function(a,p,l){function m(a,b,e,d){return["C",a,b,e,d,e,d]}function k(a,b,e,d,g,c){return["C",a/3+2/3*e,b/3+2/3*d,g/3+2/3*e,c/3+2/3*d,g,c]}function h(a,k,m,d,g,c,v,t,l,p){if(p)y=p[0],c=p[1],r=p[2],u=p[3];else{y=e(a,k,-g);a=y.x;k=y.y;y=e(t,l,-g);t=y.x;l=y.y;y=(a-t)/2;r=(k-l)/2;u=y*y/(m*m)+r*r/(d*d);1<u&&(u=Math.sqrt(u),m*=u,d*=u);u=m*m;var n=d*d;c=(c==v?-1:1)*Math.sqrt(Math.abs((u*n-u*r*r-n*y*y)/(u*r*r+n*y*y)));Infinity==c&&(c=1);var r=c*m*r/d+(a+t)/2,u=c*-d*y/m+(k+
l)/2,y=Math.asin(((k-u)/d).toFixed(9));c=Math.asin(((l-u)/d).toFixed(9));y=a<r?f-y:y;c=t<r?f-c:c;0>y&&(y=2*f+y);0>c&&(c=2*f+c);v&&y>c&&(y-=2*f);!v&&c>y&&(c-=2*f)}if(Math.abs(c-y)>b){var q=c;n=t;var B=l;c=y+b*(v&&c>y?1:-1);t=r+m*Math.cos(c);l=u+d*Math.sin(c);q=h(t,l,m,d,g,0,v,n,B,[c,q,r,u])}v=Math.tan((c-y)/4);m=4/3*m*v;d=4/3*d*v;a=[2*a-(a+m*Math.sin(y)),2*k-(k-d*Math.cos(y)),t+m*Math.sin(c),l-d*Math.cos(c),t,l];if(p)return a;q&&(a=a.concat(q));for(p=0;p<a.length;)k=e(a[p],a[p+1],g),a[p++]=k.x,a[p++]=
k.y;return a}function e(a,b,e){return{x:a*Math.cos(e)-b*Math.sin(e),y:a*Math.sin(e)+b*Math.cos(e)}}var f=Math.PI,b=f/180*120;p.exports=function(a){for(var b,e=[],d=0,g=0,c=0,n=0,t=null,l=null,p=0,q=0,G=0,A=a.length;G<A;G++){var C=a[G],P=C[0];switch(P){case "M":c=C[1];n=C[2];break;case "A":C=h(p,q,C[1],C[2],f/180*C[3],C[4],C[5],C[6],C[7]);C.unshift("C");7<C.length&&(e.push(C.splice(0,7)),C.unshift("C"));break;case "S":if("C"==b||"S"==b)p+=p-d,q+=q-g;C=["C",p,q,C[1],C[2],C[3],C[4]];break;case "T":"Q"==
b||"T"==b?(t=2*p-t,l=2*q-l):(t=p,l=q);C=k(p,q,t,l,C[1],C[2]);break;case "Q":t=C[1];l=C[2];C=k(p,q,C[1],C[2],C[3],C[4]);break;case "L":C=m(p,q,C[1],C[2]);break;case "H":C=m(p,q,C[1],q);break;case "V":C=m(p,q,p,C[1]);break;case "Z":C=m(p,q,c,n)}b=P;p=C[C.length-2];q=C[C.length-1];4<C.length?(d=C[C.length-4],g=C[C.length-3]):(d=p,g=q);e.push(C)}return e}},{}],445:[function(a,p,l){l.vertexNormals=function(a,k,h){var e=k.length,f=Array(e);h=void 0===h?1E-6:h;for(var b=0;b<e;++b)f[b]=[0,0,0];for(b=0;b<
a.length;++b)for(var n=a[b],m,r=n[n.length-1],d=n[0],g=0;g<n.length;++g){m=r;r=d;d=n[(g+1)%n.length];var c=k[m],v=k[r],t=k[d],l=Array(3),p=0,q=Array(3),G=0;for(m=0;3>m;++m)l[m]=c[m]-v[m],p+=l[m]*l[m],q[m]=t[m]-v[m],G+=q[m]*q[m];if(p*G>h)for(c=f[r],p=1/Math.sqrt(p*G),m=0;3>m;++m)G=(m+1)%3,v=(m+2)%3,c[m]+=p*(q[G]*l[v]-q[v]*l[G])}for(b=0;b<e;++b){c=f[b];for(m=a=0;3>m;++m)a+=c[m]*c[m];if(a>h)for(p=1/Math.sqrt(a),m=0;3>m;++m)c[m]*=p;else for(m=0;3>m;++m)c[m]=0}return f};l.faceNormals=function(a,k,h){var e=
a.length,f=Array(e);h=void 0===h?1E-6:h;for(var b=0;b<e;++b){for(var n=a[b],m=Array(3),r=0;3>r;++r)m[r]=k[n[r]];n=Array(3);var d=Array(3);for(r=0;3>r;++r)n[r]=m[1][r]-m[0][r],d[r]=m[2][r]-m[0][r];m=Array(3);var g=0;for(r=0;3>r;++r){var c=(r+1)%3,v=(r+2)%3;m[r]=n[c]*d[v]-n[v]*d[c];g+=m[r]*m[r]}g=g>h?1/Math.sqrt(g):0;for(r=0;3>r;++r)m[r]*=g;f[b]=m}return f}},{}],446:[function(a,p,l){var m=Object.getOwnPropertySymbols,k=Object.prototype.hasOwnProperty,h=Object.prototype.propertyIsEnumerable;p.exports=
function(){try{if(!Object.assign)return!1;var a=new String("abc");a[5]="de";if("5"===Object.getOwnPropertyNames(a)[0])return!1;var f={};for(a=0;10>a;a++)f["_"+String.fromCharCode(a)]=a;if("0123456789"!==Object.getOwnPropertyNames(f).map(function(a){return f[a]}).join(""))return!1;var b={};"abcdefghijklmnopqrst".split("").forEach(function(a){b[a]=a});return"abcdefghijklmnopqrst"!==Object.keys(Object.assign({},b)).join("")?!1:!0}catch(n){return!1}}()?Object.assign:function(a,f){if(null===a||void 0===
a)throw new TypeError("Object.assign cannot be called with null or undefined");var b=Object(a);for(var e,u=1;u<arguments.length;u++){var r=Object(arguments[u]);for(var d in r)k.call(r,d)&&(b[d]=r[d]);if(m){e=m(r);for(var g=0;g<e.length;g++)h.call(r,e[g])&&(b[e[g]]=r[e[g]])}}return b}},{}],447:[function(a,p,l){p.exports=function(a,k,h,e,f,b,n,u,r,d){var g=k+b+d;if(0<c){var c=Math.sqrt(g+1);a[0]=.5*(n-r)/c;a[1]=.5*(u-e)/c;a[2]=.5*(h-b)/c;a[3]=.5*c}else d=Math.max(k,b,d),c=Math.sqrt(2*d-g+1),k>=d?(a[0]=
.5*c,a[1]=.5*(f+h)/c,a[2]=.5*(u+e)/c,a[3]=.5*(n-r)/c):b>=d?(a[0]=.5*(h+f)/c,a[1]=.5*c,a[2]=.5*(r+n)/c,a[3]=.5*(u-e)/c):(a[0]=.5*(e+u)/c,a[1]=.5*(n+r)/c,a[2]=.5*c,a[3]=.5*(h-f)/c);return a}},{}],448:[function(a,p,l){function m(a,b,c){return Math.sqrt(Math.pow(a,2)+Math.pow(b,2)+Math.pow(c,2))}function k(a,b,c,e){return Math.sqrt(Math.pow(a,2)+Math.pow(b,2)+Math.pow(c,2)+Math.pow(e,2))}function h(a,b){var c=b[0],d=b[1],e=b[2];b=b[3];var g=k(c,d,e,b);1E-6<g?(a[0]=c/g,a[1]=d/g,a[2]=e/g,a[3]=b/g):(a[0]=
a[1]=a[2]=0,a[3]=1)}function e(a,b,c){this.radius=f([c]);this.center=f(b);this.rotation=f(a);this.computedRadius=this.radius.curve(0);this.computedCenter=this.center.curve(0);this.computedRotation=this.rotation.curve(0);this.computedUp=[.1,0,0];this.computedEye=[.1,0,0];this.computedMatrix=[.1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0];this.recalcMatrix(0)}p.exports=function(a){a=a||{};var b=a.center||[0,0,0],c=a.rotation||[0,0,0,1],d=a.radius||1;b=[].slice.call(b,0,3);c=[].slice.call(c,0,4);h(c,c);b=new e(c,
b,Math.log(d));b.setDistanceLimits(a.zoomMin,a.zoomMax);("eye"in a||"up"in a)&&b.lookAt(0,a.eye,a.center,a.up);return b};var f=a("filtered-vector"),b=a("gl-mat4/lookAt"),n=a("gl-mat4/fromQuat"),u=a("gl-mat4/invert"),r=a("./lib/quatFromFrame");a=e.prototype;a.lastT=function(){return Math.max(this.radius.lastT(),this.center.lastT(),this.rotation.lastT())};a.recalcMatrix=function(a){this.radius.curve(a);this.center.curve(a);this.rotation.curve(a);var b=this.computedRotation;h(b,b);a=this.computedMatrix;
n(a,b);var c=this.computedCenter;b=this.computedEye;var d=this.computedUp,e=Math.exp(this.computedRadius[0]);b[0]=c[0]+e*a[2];b[1]=c[1]+e*a[6];b[2]=c[2]+e*a[10];d[0]=a[1];d[1]=a[5];d[2]=a[9];for(c=0;3>c;++c){for(e=d=0;3>e;++e)d+=a[c+4*e]*b[e];a[12+c]=-d}};a.getMatrix=function(a,b){this.recalcMatrix(a);a=this.computedMatrix;if(b){for(var c=0;16>c;++c)b[c]=a[c];return b}return a};a.idle=function(a){this.center.idle(a);this.radius.idle(a);this.rotation.idle(a)};a.flush=function(a){this.center.flush(a);
this.radius.flush(a);this.rotation.flush(a)};a.pan=function(a,b,c,e){b=b||0;c=c||0;e=e||0;this.recalcMatrix(a);var d=this.computedMatrix,g=d[1],f=d[5],h=d[9],k=m(g,f,h);g/=k;f/=k;h/=k;k=d[0];var n=d[4],v=d[8],r=k*g+n*f+v*h;k-=g*r;n-=f*r;v-=h*r;r=m(k,n,v);k/=r;n/=r;v/=r;r=d[2];var u=d[6];d=d[10];var l=r*g+u*f+d*h,p=r*k+u*n+d*v;m(r-(l*g+p*k),u-(l*f+p*n),d-(l*h+p*v));this.center.move(a,k*b+g*c,n*b+f*c,v*b+h*c);b=Math.exp(this.computedRadius[0]);b=Math.max(1E-4,b+e);this.radius.set(a,Math.log(b))};a.rotate=
function(a,b,c,e){this.recalcMatrix(a);b=b||0;c=c||0;var d=this.computedMatrix,g=d[2],f=d[6],h=d[10],n=b*d[0]+c*d[1],v=b*d[4]+c*d[5];d=b*d[8]+c*d[9];c=-(f*d-h*v);d=-(h*n-g*d);n=-(g*v-f*n);v=Math.sqrt(Math.max(0,1-Math.pow(c,2)-Math.pow(d,2)-Math.pow(n,2)));var r=k(c,d,n,v);1E-6<r?(c/=r,d/=r,n/=r,v/=r):(c=d=n=0,v=1);r=this.computedRotation;var u=r[0],l=r[1],p=r[2],q=r[3];r=u*v+q*c+l*n-p*d;var w=l*v+q*d+p*c-u*n,x=p*v+q*n+u*d-l*c;u=q*v-u*c-l*d-p*n;e&&(c=g,d=f,n=h,e=Math.sin(e)/m(c,d,n),c*=e,d*=e,n*=
e,v=Math.cos(b),r=r*v+u*c+w*n-x*d,w=w*v+u*d+x*c-r*n,x=x*v+u*n+r*d-w*c,u=u*v-r*c-w*d-x*n);b=k(r,w,x,u);1E-6<b?(r/=b,w/=b,x/=b,u/=b):(r=w=x=0,u=1);this.rotation.set(a,r,w,x,u)};a.lookAt=function(a,e,c,f){this.recalcMatrix(a);c=c||this.computedCenter;e=e||this.computedEye;f=f||this.computedUp;var d=this.computedMatrix;b(d,e,c,f);f=this.computedRotation;r(f,d[0],d[1],d[2],d[4],d[5],d[6],d[8],d[9],d[10]);h(f,f);this.rotation.set(a,f[0],f[1],f[2],f[3]);for(f=d=0;3>f;++f)d+=Math.pow(c[f]-e[f],2);this.radius.set(a,
.5*Math.log(Math.max(d,1E-6)));this.center.set(a,c[0],c[1],c[2])};a.translate=function(a,b,c,e){this.center.move(a,b||0,c||0,e||0)};a.setMatrix=function(a,b){var c=this.computedRotation;r(c,b[0],b[1],b[2],b[4],b[5],b[6],b[8],b[9],b[10]);h(c,c);this.rotation.set(a,c[0],c[1],c[2],c[3]);c=this.computedMatrix;u(c,b);var d=c[15];if(1E-6<Math.abs(d)){b=c[12]/d;var e=c[13]/d;d=c[14]/d;this.recalcMatrix(a);var g=Math.exp(this.computedRadius[0]);this.center.set(a,b-c[2]*g,e-c[6]*g,d-c[10]*g)}else this.center.idle(a);
this.radius.idle(a)};a.setDistance=function(a,b){0<b&&this.radius.set(a,Math.log(b))};a.setDistanceLimits=function(a,b){a=0<a?Math.log(a):-Infinity;b=0<b?Math.log(b):Infinity;b=Math.max(b,a);this.radius.bounds[0][0]=a;this.radius.bounds[1][0]=b};a.getDistanceLimits=function(a){var b=this.radius.bounds;return a?(a[0]=Math.exp(b[0][0]),a[1]=Math.exp(b[1][0]),a):[Math.exp(b[0][0]),Math.exp(b[1][0])]};a.toJSON=function(){this.recalcMatrix(this.lastT());return{center:this.computedCenter.slice(),rotation:this.computedRotation.slice(),
distance:Math.log(this.computedRadius[0]),zoomMin:this.radius.bounds[0][0],zoomMax:this.radius.bounds[1][0]}};a.fromJSON=function(a){var b=this.lastT(),c=a.center;c&&this.center.set(b,c[0],c[1],c[2]);(c=a.rotation)&&this.rotation.set(b,c[0],c[1],c[2],c[3]);(c=a.distance)&&0<c&&this.radius.set(b,Math.log(c));this.setDistanceLimits(a.zoomMin,a.zoomMax)}},{"./lib/quatFromFrame":447,"filtered-vector":222,"gl-mat4/fromQuat":258,"gl-mat4/invert":261,"gl-mat4/lookAt":262}],449:[function(a,p,l){var m=a("repeat-string");
p.exports=function(a,h,e){return m("undefined"!==typeof e?e+"":" ",h)+a}},{"repeat-string":487}],450:[function(a,p,l){function m(a,f){function b(a,e,c){c=[];for(var d,g=0;d=k.exec(a);){if(1E4<g++)throw Error("Circular references in parenthesis");c.push(a.slice(0,d.index));c.push(b(e[d[1]],e));a=a.slice(d.index+d[0].length)}c.push(a);return c}if("string"!==typeof a)return[a];var e=[a];"string"===typeof f||Array.isArray(f)?f={brackets:f}:f||(f={});a=f.brackets?Array.isArray(f.brackets)?f.brackets:[f.brackets]:
["{}","[]","()"];var h=f.escape||"___";f=!!f.flat;a.forEach(function(a){function b(b,c,g){b=e.push(b.slice(a[0].length,-a[1].length))-1;d.push(b);return h+b}var c=new RegExp(["\\",a[0],"[^\\",a[0],"\\",a[1],"]*\\",a[1]].join("")),d=[];e.forEach(function(a,d){for(var g,f=0;a!=g;)if(g=a,a=a.replace(c,b),1E4<f++)throw Error("References have circular dependency. Please, check them.");e[d]=a});d=d.reverse();e=e.map(function(b){d.forEach(function(c){b=b.replace(new RegExp("(\\"+h+c+"(?![0-9]))","g"),a[0]+
"$1"+a[1])});return b})});var k=new RegExp("\\"+h+"([0-9]+)");return f?e:b(e[0],e)}function k(a,f){function b(b,e){if(null==a[e])throw Error("Reference "+e+"is undefined");return a[e]}if(f&&f.flat){var e=a[0];if(!e)return"";f=new RegExp("\\"+(f&&f.escape||"___")+"([0-9]+)");for(var h=0;e!=k;){if(1E4<h++)throw Error("Circular references in "+a);var k=e;e=e.replace(f,b)}return e}return a.reduce(function v(a,b){Array.isArray(b)&&(b=b.reduce(v,""));return a+b},"")}function h(a,f){return Array.isArray(a)?
k(a,f):m(a,f)}h.parse=m;h.stringify=k;p.exports=h},{}],451:[function(a,p,l){var m=a("pick-by-alias");p.exports=function(a){1<arguments.length&&(a=arguments);"string"===typeof a?a=a.split(/\s/).map(parseFloat):"number"===typeof a&&(a=[a]);if(a.length&&"number"===typeof a[0])var h=1===a.length?{width:a[0],height:a[0],x:0,y:0}:2===a.length?{width:a[0],height:a[1],x:0,y:0}:{x:a[0],y:a[1],width:a[2]-a[0]||0,height:a[3]-a[1]||0};else a&&(a=m(a,{left:"x l left Left",top:"y t top Top",width:"w width W Width",
height:"h height W Width",bottom:"b bottom Bottom",right:"r right Right"}),h={x:a.left||0,y:a.top||0},h.width=null==a.width?a.right?a.right-h.x:0:a.width,h.height=null==a.height?a.bottom?a.bottom-h.y:0:a.height);return h}},{"pick-by-alias":457}],452:[function(a,p,l){p.exports=function(a){var e=[];a.replace(k,function(a,f,k){a=f.toLowerCase();k=(k=k.match(h))?k.map(Number):[];"m"==a&&2<k.length&&(e.push([f].concat(k.splice(0,2))),a="l",f="m"==f?"l":"L");for(;;){if(k.length==m[a])return k.unshift(f),
e.push(k);if(k.length<m[a])throw Error("malformed path data");e.push([f].concat(k.splice(0,m[a])))}});return e};var m={a:7,c:6,h:1,l:2,m:2,q:4,s:4,t:2,v:1,z:0},k=/([astvzqmhlc])([^astvzqmhlc]*)/ig,h=/-?[0-9]*\.?[0-9]+(?:e[-+]?\d+)?/ig},{}],453:[function(a,p,l){p.exports=function(a,k){k||(k=[0,""]);a=String(a);var h=parseFloat(a,10);k[0]=h;k[1]=a.match(/[\d.\-\+]*\s*(.*)/)[1]||"";return k}},{}],454:[function(a,p,l){(function(a){(function(){if("undefined"!==typeof performance&&null!==performance&&performance.now)p.exports=
function(){return performance.now()};else if("undefined"!==typeof a&&null!==a&&a.hrtime){p.exports=function(){return(h()-b)/1E6};var k=a.hrtime;var h=function(){var a=k();return 1E9*a[0]+a[1]};var e=h();var f=1E9*a.uptime();var b=e-f}else if(Date.now){p.exports=function(){return Date.now()-n};var n=Date.now()}else p.exports=function(){return(new Date).getTime()-n},n=(new Date).getTime()}).call(this)}).call(this,a("_process"))},{_process:474}],455:[function(a,p,l){p.exports=function(a){var e=a.length;
if(e<m)for(var f=1,b=0;b<e;++b)for(var h=0;h<b;++h)if(a[b]<a[h])f=-f;else{if(a[b]===a[h])return 0}else{var u=k.mallocUint8(e);for(b=0;b<e;++b)u[b]=0;f=1;for(b=0;b<e;++b)if(!u[b]){var r=1;u[b]=1;for(h=a[b];h!==b;h=a[h]){if(u[h])return k.freeUint8(u),0;r+=1;u[h]=1}r&1||(f=-f)}k.freeUint8(u)}return f};var m=32,k=a("typedarray-pool")},{"typedarray-pool":529}],456:[function(a,p,l){var m=a("typedarray-pool"),k=a("invert-permutation");l.rank=function(a){var e=a.length;switch(e){case 0:case 1:return 0;case 2:return a[1]}var f=
m.mallocUint32(e),b=m.mallocUint32(e),h=0,u;k(a,b);for(u=0;u<e;++u)f[u]=a[u];for(u=e-1;0<u;--u)e=b[u],a=f[u],f[u]=f[e],f[e]=a,b[u]=b[a],b[a]=e,h=(h+a)*u;m.freeUint32(b);m.freeUint32(f);return h};l.unrank=function(a,e,f){switch(a){case 0:return f?f:[];case 1:return f?(f[0]=0,f):[0];case 2:return f?(e?(f[0]=0,f[1]=1):(f[0]=1,f[1]=0),f):e?[0,1]:[1,0]}f=f||Array(a);var b,h=1;f[0]=0;for(b=1;b<a;++b)f[b]=b,h=h*b|0;for(b=a-1;0<b;--b){a=e/h|0;e=e-a*h|0;h=h/b|0;var k=f[b]|0;f[b]=f[a]|0;f[a]=k|0}return f}},
{"invert-permutation":407,"typedarray-pool":529}],457:[function(a,p,l){function m(a){if(k[a])return k[a];"string"===typeof a&&(a=k[a]=a.split(/\s*,\s*|\s+/));return a}p.exports=function(a,e,f){var b={},h,k;"string"===typeof e&&(e=m(e));if(Array.isArray(e)){var r={};for(k=0;k<e.length;k++)r[e[k]]=!0;e=r}for(h in e)e[h]=m(e[h]);r={};for(h in e){var d=e[h];if(Array.isArray(d))for(k=0;k<d.length;k++){var g=d[k];f&&(r[g]=!0);if(g in a){b[h]=a[g];if(f)for(;k<d.length;k++)r[d[k]]=!0;break}}else h in a&&
(e[h]&&(b[h]=a[h]),f&&(r[h]=!0))}if(f)for(h in a)r[h]||(b[h]=a[h]);return b};var k={}},{}],458:[function(a,p,l){p.exports=function(a,h){function e(a,b){b=r[b][a[b]];b.splice(b.indexOf(a),1)}function f(a,b,c){var d;for(d=0;2>d;++d)if(0<r[d][b].length){var g=r[d][b][0];var f=d;break}d=g[f^1];for(var k=0;2>k;++k)for(var n=r[k][b],t=0;t<n.length;++t){var v=n[t],u=v[k^1];0<m(h[a],h[b],h[d],h[u])&&(g=v,d=u,f=k)}if(c)return d;g&&e(g,f);return d}function b(a,b){var c=r[b][a][0],d=[a];e(c,b);for(b=c[b^1];;){for(;b!==
a;)d.push(b),b=f(d[d.length-2],b,!1);if(0===r[0][a].length+r[1][a].length)break;b=d[d.length-1];c=a;var g=d[1],k=f(b,c,!0);if(0>m(h[b],h[c],h[g],h[k]))break;d.push(a);b=f(b,c)}return d}for(var k=h.length|0,u=a.length,r=[Array(k),Array(k)],d=0;d<k;++d)r[0][d]=[],r[1][d]=[];for(d=0;d<u;++d){var g=a[d];r[0][g[0]].push(g);r[1][g[1]].push(g)}a=[];for(d=0;d<k;++d)0===r[0][d].length+r[1][d].length&&a.push([d]);for(d=0;d<k;++d)for(u=0;2>u;++u){for(g=[];0<r[u][d].length;){var c=b(d,u);c[1]===c[c.length-1]?
g.push.apply(g,c):(0<g.length&&a.push(g),g=c)}0<g.length&&a.push(g)}return a};var m=a("compare-angle")},{"compare-angle":117}],459:[function(a,p,l){p.exports=function(a,h){for(var e=m(a,h.length),f=Array(h.length),b=Array(h.length),k=[],u=0;u<h.length;++u){var r=e[u].length;b[u]=r;f[u]=!0;1>=r&&k.push(u)}for(;0<k.length;)for(r=k.pop(),f[r]=!1,r=e[r],u=0;u<r.length;++u){var d=r[u];0===--b[d]&&k.push(d)}e=Array(h.length);b=[];for(u=0;u<h.length;++u)f[u]?(r=b.length,e[u]=r,b.push(h[u])):e[u]=-1;h=[];
for(u=0;u<a.length;++u)k=a[u],f[k[0]]&&f[k[1]]&&h.push([e[k[0]],e[k[1]]]);return[h,b]};var m=a("edges-to-adjacency-list")},{"edges-to-adjacency-list":163}],460:[function(a,p,l){function m(a,b){for(var c=Array(a),d=0;d<a;++d)c[d]=b;return c}function k(a){for(var b=Array(a),c=0;c<a;++c)b[c]=[];return b}p.exports=function(a,g){function c(a){for(var b=a.length,c=0;c<b;++c)if(!x[a[c]])return!1;return!0}var d=r(a,g);a=d[0];g=d[1];for(var t=g.length,l=h(a,g.length),p=0;p<t;++p)if(1===l[p].length%2)throw Error("planar-graph-to-polyline: graph must be manifold");
a=e(a,g);a=a.filter(function(a){for(var c=a.length,d=[0],e=0;e<c;++e){var f=g[a[e]],h=g[a[(e+1)%c]],k=b(-f[0],f[1]),m=b(-f[0],h[1]);f=b(h[0],f[1]);h=b(h[0],h[1]);d=n(d,n(n(k,m),n(f,h)))}return 0<d[d.length-1]});d=a.length;var q=Array(d),G=Array(d);for(p=0;p<d;++p){q[p]=p;var A=Array(d);l=a[p].map(function(a){return g[a]});var C=f([l]),P=0,J=0;a:for(;J<d;++J)if(A[J]=0,p!==J){l=a[J];for(var E=l.length,H=0;H<E;++H){var w=C(g[l[H]]);if(0!==w){0>w&&(A[J]=1,P+=1);continue a}}A[J]=1;P+=1}G[p]=[P,p,A]}G.sort(function(a,
b){return b[0]-a[0]});for(p=0;p<d;++p)for(A=G[p],l=A[1],E=A[2],J=0;J<d;++J)E[J]&&(q[J]=l);G=k(d);for(p=0;p<d;++p)G[p].push(q[p]),G[q[p]].push(p);A={};var x=m(t,!1);for(p=0;p<d;++p)for(l=a[p],E=l.length,J=0;J<E;++J)t=l[J],C=l[(J+1)%E],P=Math.min(t,C)+":"+Math.max(t,C),P in A?(P=A[P],G[P].push(p),G[p].push(P),x[t]=x[C]=!0):A[P]=p;J=[];t=m(d,-1);for(p=0;p<d;++p)q[p]!==p||c(a[p])?t[p]=-1:(J.push(p),t[p]=0);for(d=[];0<J.length;){p=J.pop();q=G[p];u(q,function(a,b){return a-b});E=q.length;A=t[p];if(0===
A){l=a[p];var I=[l]}for(p=0;p<E;++p)l=q[p],0<=t[l]||(t[l]=A^1,J.push(l),0===A&&(l=a[l],c(l)||(l.reverse(),I.push(l))));0===A&&d.push(I)}return d};var h=a("edges-to-adjacency-list"),e=a("planar-dual"),f=a("point-in-big-polygon"),b=a("two-product"),n=a("robust-sum"),u=a("uniq"),r=a("./lib/trim-leaves")},{"./lib/trim-leaves":459,"edges-to-adjacency-list":163,"planar-dual":458,"point-in-big-polygon":464,"robust-sum":499,"two-product":527,uniq:531}],461:[function(a,p,l){p.exports=a("./quad")},{"./quad":463}],
462:[function(a,p,l){arguments[4][101][0].apply(l,arguments)},{dup:101}],463:[function(a,p,l){function m(a,b){var c=b[0],d=b[1],e=1/(b[2]-c);b=1/(b[3]-d);for(var g=Array(a.length),f=0,k=a.length/2;f<k;f++)g[2*f]=h((a[2*f]-c)*e,0,1),g[2*f+1]=h((a[2*f+1]-d)*b,0,1);return g}var k=a("binary-search-bounds"),h=a("clamp"),e=a("parse-rect"),f=a("array-bounds"),b=a("pick-by-alias"),n=a("defined"),u=a("flatten-vertex-data"),r=a("is-obj"),d=a("dtype"),g=a("math-log2");p.exports=function(a,h){function c(a,b,
d,e,g,f){if(!e.length)return null;var h=J[g]||(J[g]=[]),k=H[g]||(H[g]=[]),n=E[g]||(E[g]=[]),m=h.length;g++;if(g>p){for(a=0;a<e.length;a++)h.push(e[a]),k.push(f),n.push(null,null,null,null);return m}h.push(e[0]);k.push(f);if(1>=e.length)return n.push(null,null,null,null),m;h=.5*d;k=a+h;d=b+h;for(var t=[],v=[],r=[],u=[],l=1,y=e.length;l<y;l++){var q=e[l],B=A[2*q+1];A[2*q]<k?B<d?t.push(q):v.push(q):B<d?r.push(q):u.push(q)}f<<=2;n.push(c(a,b,h,t,g,f),c(a,d,h,v,g,f+1),c(k,b,h,r,g,f+2),c(k,d,h,u,g,f+3));
return m}function v(a,b,c,d,e){for(var g=[],f=0;f<e;f++){var h=H[f],n=w[f][0],m=l(a,b,f),t=l(c,d,f);m=k.ge(h,m);h=k.gt(h,t,m,h.length-1);g[f]=[m+n,h+n]}return g}function l(a,b,c){for(var d=1,e=.5,g=.5,f=.5,h=0;h<c;h++)d<<=2,d+=a<e?b<g?0:1:b<g?2:3,f*=.5,e+=a<e?-f:f,g+=b<g?-f:f;return d}h||(h={});a=u(a,"float64");h=b(h,{bounds:"range bounds dataBox databox",maxDepth:"depth maxDepth maxdepth level maxLevel maxlevel levels",dtype:"type dtype format out dst output destination"});var p=n(h.maxDepth,255),
q=n(h.bounds,f(a,2));q[0]===q[2]&&q[2]++;q[1]===q[3]&&q[3]++;var A=m(a,q),C=a.length>>>1;h.dtype||(h.dtype="array");if("string"===typeof h.dtype)var P=new (d(h.dtype))(C);else h.dtype&&(P=h.dtype,Array.isArray(P)&&(P.length=C));for(h=0;h<C;++h)P[h]=h;var J=[],E=[],H=[],w=[];c(0,0,1,P,0,1);for(h=C=0;h<J.length;h++){var x=J[h];if(P.set)P.set(x,C);else for(var I=0,Q=x.length;I<Q;I++)P[I+C]=x[I];x=C+J[h].length;w[h]=[C,x];C=x}P.range=function(){function c(b,d,e,g,f,h){if(null!==f&&null!==h&&!(p>b+e||
y>d+e||B<b||A<d||g>=D||f===h)){var n=J[g];void 0===h&&(h=n.length);for(var m=f;m<h;m++){var v=n[m],r=a[2*v],q=a[2*v+1];r>=k&&r<=u&&q>=t&&q<=l&&G.push(v)}r=E[g];h=r[4*f];n=r[4*f+1];m=r[4*f+2];v=r[4*f+3];a:{q=null;for(var C=0;null===q;)if(q=r[4*(f+1)+C],C++,C>r.length){f=null;break a}f=q}e*=.5;g+=1;c(b,d,e,g,h,n||m||v||f);c(b,d+e,e,g,n,m||v||f);c(b+e,d,e,g,m,v||f);c(b+e,d+e,e,g,v,f)}}for(var d=[],f=arguments.length;f--;)d[f]=arguments[f];if(r(d[d.length-1])){var h=d.pop();d.length||null==h.x&&null==
h.l&&null==h.left||(d=[h],f={});f=b(h,{level:"level maxLevel",d:"d diam diameter r radius px pxSize pixel pixelSize maxD size minSize",lod:"lod details ranges offsets"})}else f={};d.length||(d=q);d=e.apply(void 0,d);d=[Math.min(d.x,d.x+d.width),Math.min(d.y,d.y+d.height),Math.max(d.x,d.x+d.width),Math.max(d.y,d.y+d.height)];var k=d[0],t=d[1],u=d[2],l=d[3];d=m([k,t,u,l],q);var p=d[0],y=d[1],B=d[2],A=d[3],D=n(f.level,J.length);if(null!=f.d){if("number"===typeof f.d)var C=[f.d,f.d];else f.d.length&&
(C=f.d);D=Math.min(Math.max(Math.ceil(-g(Math.abs(C[0])/(q[2]-q[0]))),Math.ceil(-g(Math.abs(C[1])/(q[3]-q[1])))),D)}D=Math.min(D,J.length);if(f.lod)return v(p,y,B,A,D);var G=[];c(0,0,1,0,0,1);return G};return P}},{"array-bounds":55,"binary-search-bounds":462,clamp:105,defined:155,dtype:160,"flatten-vertex-data":223,"is-obj":413,"math-log2":424,"parse-rect":451,"pick-by-alias":457}],464:[function(a,p,l){function m(){return!0}function k(a){return function(b,c){return(b=a[b])?!!b.queryPoint(c,m):!1}}
function h(a){for(var b={},c=0;c<a.length;++c){var e=a[c],g=e[0][0],f=e[0][1];e=e[1][1];f=[Math.min(f,e),Math.max(f,e)];g in b?b[g].push(f):b[g]=[f]}a={};g=Object.keys(b);for(c=0;c<g.length;++c)a[g[c]]=d(b[g[c]]);return k(a)}function e(a,b){return function(c){var d=g.le(b,c[0]);if(0>d)return 1;var e=a[d];if(!e)if(0<d&&b[d]===c[0])e=a[d-1];else return 1;for(d=1;e;){var f=e.key,h=u(c,f[0],f[1]);if(f[0][0]<f[1][0])if(0>h)e=e.left;else if(0<h)d=-1,e=e.right;else return 0;else if(0<h)e=e.left;else if(0>
h)d=1,e=e.right;else return 0}return d}}function f(a){return 1}function b(a){return function(b){return a(b[0],b[1])?0:1}}function n(a,b){return function(c){return a(c[0],c[1])?0:b(c)}}p.exports=function(a){for(var c=a.length,d=[],g=[],k=0;k<c;++k)for(var m=a[k],u=m.length,l=u-1,p=0;p<u;l=p++){l=m[l];var q=m[p];l[0]===q[0]?g.push([l,q]):d.push([l,q])}if(0===d.length)return 0===g.length?f:b(h(g));a=r(d);a=e(a.slabs,a.coordinates);return 0===g.length?a:n(h(g),a)};var u=a("robust-orientation")[3],r=a("slab-decomposition"),
d=a("interval-tree-1d"),g=a("binary-search-bounds")},{"binary-search-bounds":81,"interval-tree-1d":406,"robust-orientation":494,"slab-decomposition":510}],465:[function(a,p,l){function m(a,b,c){a=r.segments(a);b=r.segments(b);b=r.combine(a,b);c=c(b);return r.polygon(c)}var k=a("./lib/build-log");l=a("./lib/epsilon");var h=a("./lib/intersecter"),e=a("./lib/segment-chainer"),f=a("./lib/segment-selector"),b=a("./lib/geojson"),n=!1,u=l();var r={buildLog:function(a){!0===a?n=k():!1===a&&(n=!1);return!1===
n?!1:n.list},epsilon:function(a){return u.epsilon(a)},segments:function(a){var b=h(!0,u,n);a.regions.forEach(b.addRegion);return{segments:b.calculate(a.inverted),inverted:a.inverted}},combine:function(a,b){return{combined:h(!1,u,n).calculate(a.segments,a.inverted,b.segments,b.inverted),inverted1:a.inverted,inverted2:b.inverted}},selectUnion:function(a){return{segments:f.union(a.combined,n),inverted:a.inverted1||a.inverted2}},selectIntersect:function(a){return{segments:f.intersect(a.combined,n),inverted:a.inverted1&&
a.inverted2}},selectDifference:function(a){return{segments:f.difference(a.combined,n),inverted:a.inverted1&&!a.inverted2}},selectDifferenceRev:function(a){return{segments:f.differenceRev(a.combined,n),inverted:!a.inverted1&&a.inverted2}},selectXor:function(a){return{segments:f.xor(a.combined,n),inverted:a.inverted1!==a.inverted2}},polygon:function(a){return{regions:e(a.segments,u,n),inverted:a.inverted}},polygonFromGeoJSON:function(a){return b.toPolygon(r,a)},polygonToGeoJSON:function(a){return b.fromPolygon(r,
u,a)},union:function(a,b){return m(a,b,r.selectUnion)},intersect:function(a,b){return m(a,b,r.selectIntersect)},difference:function(a,b){return m(a,b,r.selectDifference)},differenceRev:function(a,b){return m(a,b,r.selectDifferenceRev)},xor:function(a,b){return m(a,b,r.selectXor)}};"object"===typeof window&&(window.PolyBool=r);p.exports=r},{"./lib/build-log":466,"./lib/epsilon":467,"./lib/geojson":468,"./lib/intersecter":469,"./lib/segment-chainer":471,"./lib/segment-selector":472}],466:[function(a,
p,l){p.exports=function(){function a(a,b){k.list.push({type:a,data:b?JSON.parse(JSON.stringify(b)):void 0});return k}var k,h=0,e=!1;return k={list:[],segmentId:function(){return h++},checkIntersection:function(e,b){return a("check",{seg1:e,seg2:b})},segmentChop:function(e,b){a("div_seg",{seg:e,pt:b});return a("chop",{seg:e,pt:b})},statusRemove:function(e){return a("pop_seg",{seg:e})},segmentUpdate:function(e){return a("seg_update",{seg:e})},segmentNew:function(e,b){return a("new_seg",{seg:e,primary:b})},
segmentRemove:function(e){return a("rem_seg",{seg:e})},tempStatus:function(e,b,h){return a("temp_status",{seg:e,above:b,below:h})},rewind:function(e){return a("rewind",{seg:e})},status:function(e,b,h){return a("status",{seg:e,above:b,below:h})},vert:function(f){if(f===e)return k;e=f;return a("vert",{x:f})},log:function(e){"string"!==typeof e&&(e=JSON.stringify(e,!1,"  "));return a("log",{txt:e})},reset:function(){return a("reset")},selected:function(e){return a("selected",{segs:e})},chainStart:function(e){return a("chain_start",
{seg:e})},chainRemoveHead:function(e,b){return a("chain_rem_head",{index:e,pt:b})},chainRemoveTail:function(e,b){return a("chain_rem_tail",{index:e,pt:b})},chainNew:function(e,b){return a("chain_new",{pt1:e,pt2:b})},chainMatch:function(e){return a("chain_match",{index:e})},chainClose:function(e){return a("chain_close",{index:e})},chainAddHead:function(e,b){return a("chain_add_head",{index:e,pt:b})},chainAddTail:function(e,b){return a("chain_add_tail",{index:e,pt:b})},chainConnect:function(e,b){return a("chain_con",
{index1:e,index2:b})},chainReverse:function(e){return a("chain_rev",{index:e})},chainJoin:function(e,b){return a("chain_join",{index1:e,index2:b})},done:function(){return a("done")}}}},{}],467:[function(a,p,l){p.exports=function(a){"number"!==typeof a&&(a=1E-10);var k={epsilon:function(h){"number"===typeof h&&(a=h);return a},pointAboveOrOnLine:function(h,e,f){var b=e[0];e=e[1];return(f[0]-b)*(h[1]-e)-(f[1]-e)*(h[0]-b)>=-a},pointBetween:function(h,e,f){var b=f[0]-e[0];f=f[1]-e[1];h=(h[0]-e[0])*b+(h[1]-
e[1])*f;return h<a||h-(b*b+f*f)>-a?!1:!0},pointsSameX:function(h,e){return Math.abs(h[0]-e[0])<a},pointsSameY:function(h,e){return Math.abs(h[1]-e[1])<a},pointsSame:function(a,e){return k.pointsSameX(a,e)&&k.pointsSameY(a,e)},pointsCompare:function(a,e){return k.pointsSameX(a,e)?k.pointsSameY(a,e)?0:a[1]<e[1]?-1:1:a[0]<e[0]?-1:1},pointsCollinear:function(h,e,f){return Math.abs((h[0]-e[0])*(e[1]-f[1])-(e[0]-f[0])*(h[1]-e[1]))<a},linesIntersect:function(h,e,f,b){var k=e[0]-h[0];e=e[1]-h[1];var m=b[0]-
f[0],r=b[1]-f[1];b=k*r-e*m;if(Math.abs(b)<a)return!1;var d=h[0]-f[0];f=h[1]-f[1];m=(m*f-r*d)/b;f=(k*f-e*d)/b;h={alongA:0,alongB:0,pt:[h[0]+m*k,h[1]+m*e]};h.alongA=m<=-a?-2:m<a?-1:m-1<=-a?0:m-1<a?1:2;h.alongB=f<=-a?-2:f<a?-1:f-1<=-a?0:f-1<a?1:2;return h},pointInsideRegion:function(h,e){var f=h[0];h=h[1];for(var b=e[e.length-1][0],k=e[e.length-1][1],m=!1,r=0;r<e.length;r++){var d=e[r][0],g=e[r][1];g-h>a!=k-h>a&&(b-d)*(h-g)/(k-g)+d-f>a&&(m=!m);b=d;k=g}return m}};return k}},{}],468:[function(a,p,l){p.exports=
{toPolygon:function(a,k){function h(b){function e(b){b=b.slice(0,b.length-1);return a.segments({inverted:!1,regions:[b]})}if(0>=b.length)return a.segments({inverted:!1,regions:[]});for(var f=e(b[0]),h=1;h<b.length;h++)f=a.selectDifference(a.combine(f,e(b[h])));return f}if("Polygon"===k.type)return a.polygon(h(k.coordinates));if("MultiPolygon"===k.type){for(var e=a.segments({inverted:!1,regions:[]}),f=0;f<k.coordinates.length;f++)e=a.selectUnion(a.combine(e,h(k.coordinates[f])));return a.polygon(e)}throw Error("PolyBool: Cannot convert GeoJSON object to PolyBool polygon");
},fromPolygon:function(a,k,h){function e(a,b){return k.pointInsideRegion([.5*(a[0][0]+a[1][0]),.5*(a[0][1]+a[1][1])],b)}function f(a,b){for(var c=0;c<a.children.length;c++){var d=a.children[c];if(e(b,d.region)){f(d,b);return}}var g={region:b,children:[]};for(c=0;c<a.children.length;c++)d=a.children[c],e(d.region,b)&&(g.children.push(d),a.children.splice(c,1),c--);a.children.push(g)}function b(a,b){for(var c=0,d=a[a.length-1][0],e=a[a.length-1][1],g=[],f=0;f<a.length;f++){var h=a[f][0],k=a[f][1];g.push([h,
k]);c+=k*d-h*e;d=h;e=k}0>c!==b&&g.reverse();g.push([g[0][0],g[0][1]]);return g}function n(a){var c=[b(a.region,!1)];g.push(c);for(var d=0;d<a.children.length;d++)c.push(m(a.children[d]))}function m(a){for(var c=0;c<a.children.length;c++)n(a.children[c]);return b(a.region,!0)}h=a.polygon(a.segments(h));a={region:null,children:[]};for(var r=0;r<h.regions.length;r++){var d=h.regions[r];3>d.length||f(a,d)}var g=[];for(r=0;r<a.children.length;r++)n(a.children[r]);return 0>=g.length?{type:"Polygon",coordinates:[]}:
1==g.length?{type:"Polygon",coordinates:g[0]}:{type:"MultiPolygon",coordinates:g}}}},{}],469:[function(a,p,l){var m=a("./linked-list");p.exports=function(a,h,e){function f(a,b,d){return{id:e?e.segmentId():-1,start:a,end:b,myFill:{above:d.myFill.above,below:d.myFill.below},otherFill:null}}function b(a,b){d.insertBefore(a,function(c){var d=a.isStart;var e=c.isStart,g=c.pt;c=c.other.pt;var f=h.pointsCompare(a.pt,g);d=0!==f?f:h.pointsSame(b,c)?0:d!==e?d?1:-1:h.pointAboveOrOnLine(b,e?g:c,e?c:g)?1:-1;return 0>
d})}function k(a,c){var d=m.node({isStart:!0,pt:a.start,seg:a,primary:c,other:null,status:null});b(d,a.end);a=m.node({isStart:!1,pt:a.end,seg:a,primary:c,other:d,status:null});d.other=a;b(a,d.pt);return d}function u(a,c){var d=f(c,a.seg.end,a.seg);e&&e.segmentChop(a.seg,c);a.other.remove();a.seg.end=c;a.other.pt=c;b(a.other,a.pt);return k(d,a.primary)}function r(b,c){function g(a){return k.findTransition(function(b){var c=b.ev;b=a.seg.start;var d=a.seg.end,e=c.seg.start;c=c.seg.end;b=h.pointsCollinear(b,
e,c)?h.pointsCollinear(d,e,c)?1:h.pointAboveOrOnLine(d,e,c)?1:-1:h.pointAboveOrOnLine(b,e,c)?1:-1;return 0<b})}function f(a,b){var c=a.seg,d=b.seg,g=c.start,f=c.end,k=d.start,n=d.end;e&&e.checkIntersection(c,d);c=h.linesIntersect(g,f,k,n);if(!1===c){if(!h.pointsCollinear(g,f,k)||h.pointsSame(g,n)||h.pointsSame(f,k))return!1;c=h.pointsSame(g,k);d=h.pointsSame(f,n);if(c&&d)return b;var m=!c&&h.pointBetween(g,k,n);k=!d&&h.pointBetween(f,k,n);if(c)return k?u(b,f):u(a,n),b;m&&(d||(k?u(b,f):u(a,n)),u(b,
g))}else 0===c.alongA&&(-1===c.alongB?u(a,k):0===c.alongB?u(a,c.pt):1===c.alongB&&u(a,n)),0===c.alongB&&(-1===c.alongA?u(b,g):0===c.alongA?u(b,c.pt):1===c.alongA&&u(b,f));return!1}for(var k=m.create(),n=[];!d.isEmpty();){var r=d.getHead();e&&e.vert(r.pt[0]);if(r.isStart){e&&e.segmentNew(r.seg,r.primary);var l=g(r),p=l.before?l.before.ev:null,q=l.after?l.after.ev:null;e&&e.tempStatus(r.seg,p?p.seg:!1,q?q.seg:!1);var P=function(){if(p){var a=f(r,p);if(a)return a}return q?f(r,q):!1}();if(P){if(a){var J;
if(J=null===r.seg.myFill.below?!0:r.seg.myFill.above!==r.seg.myFill.below)P.seg.myFill.above=!P.seg.myFill.above}else P.seg.otherFill=r.seg.myFill;e&&e.segmentUpdate(P.seg);r.other.remove();r.remove()}if(d.getHead()!==r){e&&e.rewind(r.seg);continue}a?(J=null===r.seg.myFill.below?!0:r.seg.myFill.above!==r.seg.myFill.below,r.seg.myFill.below=q?q.seg.myFill.above:b,r.seg.myFill.above=J?!r.seg.myFill.below:r.seg.myFill.below):null===r.seg.otherFill&&(P=q?r.primary===q.primary?q.seg.otherFill.above:q.seg.myFill.above:
r.primary?c:b,r.seg.otherFill={above:P,below:P});e&&e.status(r.seg,p?p.seg:!1,q?q.seg:!1);r.other.status=l.insert(m.node({ev:r}))}else{l=r.status;if(null===l)throw Error("PolyBool: Zero-length segment detected; your epsilon is probably too small or too large");k.exists(l.prev)&&k.exists(l.next)&&f(l.prev.ev,l.next.ev);e&&e.statusRemove(l.ev.seg);l.remove();r.primary||(l=r.seg.myFill,r.seg.myFill=r.seg.otherFill,r.seg.otherFill=l);n.push(r.seg)}d.getHead().remove()}e&&e.done();return n}var d=m.create();
return a?{addRegion:function(a){for(var b,d=a[a.length-1],g=0;g<a.length;g++){b=d;d=a[g];var f=h.pointsCompare(b,d);if(0!==f){var n=0>f?b:d;b=0>f?d:b;n={id:e?e.segmentId():-1,start:n,end:b,myFill:{above:null,below:null},otherFill:null};k(n,!0)}}},calculate:function(a){return r(a,!1)}}:{calculate:function(a,b,d,e){a.forEach(function(a){k(f(a.start,a.end,a),!0)});d.forEach(function(a){k(f(a.start,a.end,a),!1)});return r(b,e)}}}},{"./linked-list":470}],470:[function(a,p,l){p.exports={create:function(){var a=
{root:{root:!0,next:null},exists:function(k){return null===k||k===a.root?!1:!0},isEmpty:function(){return null===a.root.next},getHead:function(){return a.root.next},insertBefore:function(k,h){for(var e=a.root,f=a.root.next;null!==f;){if(h(f)){k.prev=f.prev;k.next=f;f.prev.next=k;f.prev=k;return}e=f;f=f.next}e.next=k;k.prev=e;k.next=null},findTransition:function(k){for(var h=a.root,e=a.root.next;null!==e&&!k(e);)h=e,e=e.next;return{before:h===a.root?null:h,after:e,insert:function(a){a.prev=h;a.next=
e;h.next=a;null!==e&&(e.prev=a);return a}}}};return a},node:function(a){a.prev=null;a.next=null;a.remove=function(){if(a.prev.next=a.next)a.next.prev=a.prev;a.prev=null;a.next=null};return a}}},{}],471:[function(a,p,l){p.exports=function(a,k,h){var e=[],f=[];a.forEach(function(a){function b(a,b,d){t.index=a;t.matches_head=b;t.matches_pt1=d;if(t===c)return t=v,!1;t=null;return!0}function m(a){h&&h.chainReverse(a);e[a].reverse()}function r(a,b){var c=e[a],d=e[b],g=c[c.length-1],f=c[c.length-2],n=d[0],
m=d[1];k.pointsCollinear(f,g,n)&&(h&&h.chainRemoveTail(a,g),c.pop(),g=f);k.pointsCollinear(g,n,m)&&(h&&h.chainRemoveHead(b,n),d.shift());h&&h.chainJoin(a,b);e[a]=c.concat(d);e.splice(b,1)}var d=a.start,g=a.end;if(k.pointsSame(d,g))console.warn("PolyBool: Warning: Zero-length segment detected; your epsilon is probably too small or too large");else{h&&h.chainStart(a);for(var c={index:0,matches_head:!1,matches_pt1:!1},v={index:0,matches_head:!1,matches_pt1:!1},t=c,l=0;l<e.length;l++){a=e[l];var p=a[0];
a=a[a.length-1];if(k.pointsSame(p,d)){if(b(l,!0,!0))break}else if(k.pointsSame(p,g)){if(b(l,!0,!1))break}else if(k.pointsSame(a,d)){if(b(l,!1,!0))break}else if(k.pointsSame(a,g)&&b(l,!1,!1))break}if(t===c)e.push([d,g]),h&&h.chainNew(d,g);else if(t===v){h&&h.chainMatch(c.index);l=c.index;d=c.matches_pt1?g:d;g=c.matches_head;a=e[l];p=g?a[0]:a[a.length-1];var q=g?a[1]:a[a.length-2],G=g?a[a.length-1]:a[0],A=g?a[a.length-2]:a[1];k.pointsCollinear(q,p,d)&&(g?(h&&h.chainRemoveHead(c.index,d),a.shift()):
(h&&h.chainRemoveTail(c.index,d),a.pop()),p=q);k.pointsSame(G,d)?(e.splice(l,1),k.pointsCollinear(A,G,p)&&(g?(h&&h.chainRemoveTail(c.index,p),a.pop()):(h&&h.chainRemoveHead(c.index,p),a.shift())),h&&h.chainClose(c.index),f.push(a)):g?(h&&h.chainAddHead(c.index,d),a.unshift(d)):(h&&h.chainAddTail(c.index,d),a.push(d))}else a=c.index,l=v.index,h&&h.chainConnect(a,l),d=e[a].length<e[l].length,c.matches_head?v.matches_head?d?(m(a),r(a,l)):(m(l),r(l,a)):r(l,a):v.matches_head?r(a,l):d?(m(a),r(l,a)):(m(l),
r(a,l))}});return f}},{}],472:[function(a,p,l){function m(a,h,e){var f=[];a.forEach(function(a){var b=(a.myFill.above?8:0)+(a.myFill.below?4:0)+(a.otherFill&&a.otherFill.above?2:0)+(a.otherFill&&a.otherFill.below?1:0);0!==h[b]&&f.push({id:e?e.segmentId():-1,start:a.start,end:a.end,myFill:{above:1===h[b],below:2===h[b]},otherFill:null})});e&&e.selected(f);return f}p.exports={union:function(a,h){return m(a,[0,2,1,0,2,2,0,0,1,0,1,0,0,0,0,0],h)},intersect:function(a,h){return m(a,[0,0,0,0,0,2,0,2,0,0,
1,1,0,2,1,0],h)},difference:function(a,h){return m(a,[0,0,0,0,2,0,2,0,1,1,0,0,0,1,2,0],h)},differenceRev:function(a,h){return m(a,[0,2,1,0,0,0,1,1,0,2,0,2,0,0,0,0],h)},xor:function(a,h){return m(a,[0,2,1,0,2,0,0,1,1,0,0,2,0,1,2,0],h)}}},{}],473:[function(a,p,l){var m=new Float64Array(4),k=new Float64Array(4),h=new Float64Array(4);p.exports=function(a,f,b,n,u){m.length<n.length&&(m=new Float64Array(n.length),k=new Float64Array(n.length),h=new Float64Array(n.length));for(var e=0;e<n.length;++e)m[e]=
a[e]-n[e],k[e]=f[e]-a[e],h[e]=b[e]-a[e];var d=0,g=0,c=0,v=0,t=0,l=0;for(e=0;e<n.length;++e){var p=k[e],q=h[e],G=m[e];d+=p*p;g+=p*q;c+=q*q;v+=G*p;t+=G*q;l+=G*G}e=Math.abs(d*c-g*g);p=g*t-c*v;q=g*v-d*t;p+q<=e?0>p?0>q?0>v?(q=0,-v>=d?(p=1,d=d+2*v+l):(p=-v/d,d=v*p+l)):(p=0,0<=t?(q=0,d=l):-t>=c?(q=1,d=c+2*t+l):(q=-t/c,d=t*q+l)):(p=0,0<=t?(q=0,d=l):-t>=c?(q=1,d=c+2*t+l):(q=-t/c,d=t*q+l)):0>q?(q=0,0<=v?(p=0,d=l):-v>=d?(p=1,d=d+2*v+l):(p=-v/d,d=v*p+l)):(e=1/e,p*=e,q*=e,d=p*(d*p+g*q+2*v)+q*(g*p+c*q+2*t)+l):
0>p?(p=g+v,e=c+t,e>p?(e-=p,p=d-2*g+c,e>=p?(p=1,q=0,d=d+2*v+l):(p=e/p,q=1-p,d=p*(d*p+g*q+2*v)+q*(g*p+c*q+2*t)+l)):(p=0,0>=e?(q=1,d=c+2*t+l):0<=t?(q=0,d=l):(q=-t/c,d=t*q+l))):0>q?(p=g+t,e=d+v,e>p?(e-=p,p=d-2*g+c,e>=p?(q=1,p=0,d=c+2*t+l):(q=e/p,p=1-q,d=p*(d*p+g*q+2*v)+q*(g*p+c*q+2*t)+l)):(q=0,0>=e?(p=1,d=d+2*v+l):0<=v?(p=0,d=l):(p=-v/d,d=v*p+l))):(e=c+t-g-v,0>=e?(p=0,q=1,d=c+2*t+l):(p=d-2*g+c,e>=p?(p=1,q=0,d=d+2*v+l):(p=e/p,q=1-p,d=p*(d*p+g*q+2*v)+q*(g*p+c*q+2*t)+l)));g=1-p-q;for(e=0;e<n.length;++e)u[e]=
g*a[e]+p*f[e]+q*b[e];return 0>d?0:d}},{}],474:[function(a,p,l){function m(){throw Error("setTimeout has not been defined");}function k(){throw Error("clearTimeout has not been defined");}function h(a){if(r===setTimeout)return setTimeout(a,0);if((r===m||!r)&&setTimeout)return r=setTimeout,setTimeout(a,0);try{return r(a,0)}catch(B){try{return r.call(null,a,0)}catch(D){return r.call(this,a,0)}}}function e(a){if(d===clearTimeout)return clearTimeout(a);if((d===k||!d)&&clearTimeout)return d=clearTimeout,
clearTimeout(a);try{return d(a)}catch(B){try{return d.call(null,a)}catch(D){return d.call(this,a)}}}function f(){c&&v&&(c=!1,v.length?g=v.concat(g):t=-1,g.length&&b())}function b(){if(!c){var a=h(f);c=!0;for(var b=g.length;b;){v=g;for(g=[];++t<b;)v&&v[t].run();t=-1;b=g.length}v=null;c=!1;e(a)}}function n(a,b){this.fun=a;this.array=b}function u(){}a=p.exports={};try{var r="function"===typeof setTimeout?setTimeout:m}catch(y){r=m}try{var d="function"===typeof clearTimeout?clearTimeout:k}catch(y){d=k}var g=
[],c=!1,v,t=-1;a.nextTick=function(a){var d=Array(arguments.length-1);if(1<arguments.length)for(var e=1;e<arguments.length;e++)d[e-1]=arguments[e];g.push(new n(a,d));1!==g.length||c||h(b)};n.prototype.run=function(){this.fun.apply(null,this.array)};a.title="browser";a.browser=!0;a.env={};a.argv=[];a.version="";a.versions={};a.on=u;a.addListener=u;a.once=u;a.off=u;a.removeListener=u;a.removeAllListeners=u;a.emit=u;a.prependListener=u;a.prependOnceListener=u;a.listeners=function(a){return[]};a.binding=
function(a){throw Error("process.binding is not supported");};a.cwd=function(){return"/"};a.chdir=function(a){throw Error("process.chdir is not supported");};a.umask=function(){return 0}},{}],475:[function(a,p,l){p.exports=a("gl-quat/slerp")},{"gl-quat/slerp":289}],476:[function(a,p,l){(function(m){var k=a("performance-now"),h="undefined"===typeof window?m:window;m=["moz","webkit"];for(var e=h.requestAnimationFrame,f=h.cancelAnimationFrame||h.cancelRequestAnimationFrame,b=0;!e&&b<m.length;b++)e=h[m[b]+
"RequestAnimationFrame"],f=h[m[b]+"CancelAnimationFrame"]||h[m[b]+"CancelRequestAnimationFrame"];if(!e||!f){var n=0,u=0,r=[],d=1E3/60;e=function(a){if(0===r.length){var b=k(),e=Math.max(0,d-(b-n));n=e+b;setTimeout(function(){for(var a=r.slice(0),b=r.length=0;b<a.length;b++)if(!a[b].cancelled)try{a[b].callback(n)}catch(B){setTimeout(function(){throw B;},0)}},Math.round(e))}r.push({handle:++u,callback:a,cancelled:!1});return u};f=function(a){for(var b=0;b<r.length;b++)r[b].handle===a&&(r[b].cancelled=
!0)}}p.exports=function(a){return e.call(h,a)};p.exports.cancel=function(){f.apply(h,arguments)};p.exports.polyfill=function(a){a||(a=h);a.requestAnimationFrame=e;a.cancelAnimationFrame=f}}).call(this,"undefined"!==typeof x?x:"undefined"!==typeof self?self:"undefined"!==typeof window?window:{})},{"performance-now":454}],477:[function(a,p,l){var m=a("big-rat/add");p.exports=function(a,h){for(var e=a.length,f=Array(e),b=0;b<e;++b)f[b]=m(a[b],h[b]);return f}},{"big-rat/add":65}],478:[function(a,p,l){p.exports=
function(a){for(var h=Array(a.length),e=0;e<a.length;++e)h[e]=m(a[e]);return h};var m=a("big-rat")},{"big-rat":68}],479:[function(a,p,l){var m=a("big-rat"),k=a("big-rat/mul");p.exports=function(a,e){e=m(e);for(var f=a.length,b=Array(f),h=0;h<f;++h)b[h]=k(a[h],e);return b}},{"big-rat":68,"big-rat/mul":77}],480:[function(a,p,l){var m=a("big-rat/sub");p.exports=function(a,h){for(var e=a.length,f=Array(e),b=0;b<e;++b)f[b]=m(a[b],h[b]);return f}},{"big-rat/sub":79}],481:[function(a,p,l){var m=a("compare-cell"),
k=a("compare-oriented-cell"),h=a("cell-orientation");p.exports=function(a){a.sort(k);for(var e=a.length,b=0,n=0;n<e;++n){var u=a[n],r=h(u);if(0!==r){if(0<b){var d=a[b-1];if(0===m(u,d)&&h(d)!==r){--b;continue}}a[b++]=u}}a.length=b;return a}},{"cell-orientation":102,"compare-cell":118,"compare-oriented-cell":119}],482:[function(a,p,l){var m=a("array-bounds"),k=a("color-normalize"),h=a("update-diff"),e=a("pick-by-alias"),f=a("object-assign"),b=a("flatten-vertex-data");a=a("to-float32");var n=a.float32,
u=a.fract32;p.exports=function(a,g){function c(a){a?l(a):null===a&&p();d()}function d(b){if("number"===typeof b)return t(b);b&&!Array.isArray(b)&&(b=[b]);a._refresh();A.forEach(function(a,c){a&&(b&&(a.draw=b[c]?!0:!1),a.draw?t(c):a.draw=!0)})}function t(a){"number"===typeof a&&(a=A[a]);null!=a&&a&&a.count&&a.color&&a.opacity&&a.positions&&1<a.positions.length&&(a.scaleRatio=[a.scale[0]*a.viewport.width,a.scale[1]*a.viewport.height],w(a),a.after&&a.after(a))}function l(a){if(a){null!=a.length?"number"===
typeof a[0]&&(a=[{positions:a}]):Array.isArray(a)||(a=[a]);var d=0,g=0;c.groups=A=a.map(function(a,c){var n=A[c];if(a)"function"===typeof a?a={after:a}:"number"===typeof a[0]&&(a={positions:a});else return n;a=e(a,{color:"color colors fill",capSize:"capSize cap capsize cap-size",lineWidth:"lineWidth line-width width line thickness",opacity:"opacity alpha",range:"range dataBox",viewport:"viewport viewBox",errors:"errors error",positions:"positions position data points"});n||(A[c]=n={id:c,scale:null,
translate:null,scaleFract:null,translateFract:null,draw:!0},a=f({},G,a));h(n,a,[{lineWidth:function(a){return.5*+a},capSize:function(a){return.5*+a},opacity:parseFloat,errors:function(a){a=b(a);g+=a.length;return a},positions:function(a,c){a=b(a,"float64");c.count=Math.floor(a.length/2);c.bounds=m(a,2);c.offset=d;d+=c.count;return a}},{color:function(a,b){b=b.count;a||(a="transparent");if(!Array.isArray(a)||"number"===typeof a[0]){var c=a;a=Array(b);for(var d=0;d<b;d++)a[d]=c}if(a.length<b)throw Error("Not enough colors");
c=new Uint8Array(4*b);for(d=0;d<b;d++){var e=k(a[d],"uint8");c.set(e,4*d)}return c},range:function(a,b,c){c=b.bounds;a||(a=c);b.scale=[1/(a[2]-a[0]),1/(a[3]-a[1])];b.translate=[-a[0],-a[1]];b.scaleFract=u(b.scale);b.translateFract=u(b.translate);return a},viewport:function(a){if(Array.isArray(a))var b={x:a[0],y:a[1],width:a[2]-a[0],height:a[3]-a[1]};else a?(b={x:a.x||a.left||0,y:a.y||a.top||0},b.width=a.right?a.right-b.x:a.w||a.width||0,b.height=a.bottom?a.bottom-b.y:a.h||a.height||0):b={x:0,y:0,
width:q.drawingBufferWidth,height:q.drawingBufferHeight};return b}}]);return n});if(d||g){a=A.reduce(function(a,b,c){return a+(b?b.count:0)},0);var t=new Float64Array(2*a),v=new Uint8Array(4*a),r=new Float32Array(4*a);A.forEach(function(a,b){if(a){b=a.positions;var c=a.offset,d=a.errors;a.count&&(v.set(a.color,4*c),r.set(d,4*c),t.set(b,2*c))}});P(n(t));J(u(t));C(v);E(r)}}}function p(){P.destroy();J.destroy();C.destroy();E.destroy();H.destroy()}"function"===typeof a?(g||(g={}),g.regl=a):g=a;g.length&&
(g.positions=g);a=g.regl;if(!a.hasExtension("ANGLE_instanced_arrays"))throw Error("regl-error2d: `ANGLE_instanced_arrays` extension should be enabled");var q=a._gl,G={color:"black",capSize:5,lineWidth:1,opacity:1,viewport:null,range:null,offset:0,count:0,bounds:null,positions:[],errors:[]},A=[];var C=a.buffer({usage:"dynamic",type:"uint8",data:new Uint8Array(0)});var P=a.buffer({usage:"dynamic",type:"float",data:new Uint8Array(0)});var J=a.buffer({usage:"dynamic",type:"float",data:new Uint8Array(0)});
var E=a.buffer({usage:"dynamic",type:"float",data:new Uint8Array(0)});var H=a.buffer({usage:"static",type:"float",data:r});l(g);var w=a({vert:"\n\t\tprecision highp float;\n\n\t\tattribute vec2 position, positionFract;\n\t\tattribute vec4 error;\n\t\tattribute vec4 color;\n\n\t\tattribute vec2 direction, lineOffset, capOffset;\n\n\t\tuniform vec4 viewport;\n\t\tuniform float lineWidth, capSize;\n\t\tuniform vec2 scale, scaleFract, translate, translateFract;\n\n\t\tvarying vec4 fragColor;\n\n\t\tvoid main() {\n\t\t\tfragColor \x3d color / 255.;\n\n\t\t\tvec2 pixelOffset \x3d lineWidth * lineOffset + (capSize + lineWidth) * capOffset;\n\n\t\t\tvec2 dxy \x3d -step(.5, direction.xy) * error.xz + step(direction.xy, vec2(-.5)) * error.yw;\n\n\t\t\tvec2 position \x3d position + dxy;\n\n\t\t\tvec2 pos \x3d (position + translate) * scale\n\t\t\t\t+ (positionFract + translateFract) * scale\n\t\t\t\t+ (position + translate) * scaleFract\n\t\t\t\t+ (positionFract + translateFract) * scaleFract;\n\n\t\t\tpos +\x3d pixelOffset / viewport.zw;\n\n\t\t\tgl_Position \x3d vec4(pos * 2. - 1., 0, 1);\n\t\t}\n\t\t",
frag:"\n\t\tprecision mediump float;\n\n\t\tvarying vec4 fragColor;\n\n\t\tuniform float opacity;\n\n\t\tvoid main() {\n\t\t\tgl_FragColor \x3d fragColor;\n\t\t\tgl_FragColor.a *\x3d opacity;\n\t\t}\n\t\t",uniforms:{range:a.prop("range"),lineWidth:a.prop("lineWidth"),capSize:a.prop("capSize"),opacity:a.prop("opacity"),scale:a.prop("scale"),translate:a.prop("translate"),scaleFract:a.prop("scaleFract"),translateFract:a.prop("translateFract"),viewport:function(a,b){return[b.viewport.x,b.viewport.y,a.viewportWidth,
a.viewportHeight]}},attributes:{color:{buffer:C,offset:function(a,b){return 4*b.offset},divisor:1},position:{buffer:P,offset:function(a,b){return 8*b.offset},divisor:1},positionFract:{buffer:J,offset:function(a,b){return 8*b.offset},divisor:1},error:{buffer:E,offset:function(a,b){return 16*b.offset},divisor:1},direction:{buffer:H,stride:24,offset:0},lineOffset:{buffer:H,stride:24,offset:8},capOffset:{buffer:H,stride:24,offset:16}},primitive:"triangles",blend:{enable:!0,color:[0,0,0,0],equation:{rgb:"add",
alpha:"add"},func:{srcRGB:"src alpha",dstRGB:"one minus src alpha",srcAlpha:"one minus dst alpha",dstAlpha:"one"}},depth:{enable:!1},scissor:{enable:!0,box:a.prop("viewport")},viewport:a.prop("viewport"),stencil:!1,instances:a.prop("count"),count:r.length});f(c,{update:l,draw:d,destroy:p,regl:a,gl:q,canvas:q.canvas,groups:A});return c};var r=[[1,0,0,1,0,0],[1,0,0,-1,0,0],[-1,0,0,-1,0,0],[-1,0,0,-1,0,0],[-1,0,0,1,0,0],[1,0,0,1,0,0],[1,0,-1,0,0,1],[1,0,-1,0,0,-1],[1,0,1,0,0,-1],[1,0,1,0,0,-1],[1,0,
1,0,0,1],[1,0,-1,0,0,1],[-1,0,-1,0,0,1],[-1,0,-1,0,0,-1],[-1,0,1,0,0,-1],[-1,0,1,0,0,-1],[-1,0,1,0,0,1],[-1,0,-1,0,0,1],[0,1,1,0,0,0],[0,1,-1,0,0,0],[0,-1,-1,0,0,0],[0,-1,-1,0,0,0],[0,1,1,0,0,0],[0,-1,1,0,0,0],[0,1,0,-1,1,0],[0,1,0,-1,-1,0],[0,1,0,1,-1,0],[0,1,0,1,1,0],[0,1,0,-1,1,0],[0,1,0,1,-1,0],[0,-1,0,-1,1,0],[0,-1,0,-1,-1,0],[0,-1,0,1,-1,0],[0,-1,0,1,1,0],[0,-1,0,-1,1,0],[0,-1,0,1,-1,0]]},{"array-bounds":55,"color-normalize":110,"flatten-vertex-data":223,"object-assign":446,"pick-by-alias":457,
"to-float32":522,"update-diff":533}],483:[function(a,p,l){function m(a,b){if(!(this instanceof m))return new m(a,b);"function"===typeof a?(b||(b={}),b.regl=a):b=a;b.length&&(b.positions=b);a=b.regl;if(!a.hasExtension("ANGLE_instanced_arrays"))throw Error("regl-error2d: `ANGLE_instanced_arrays` extension should be enabled");this.gl=a._gl;this.regl=a;this.passes=[];this.shaders=m.shaders.has(a)?m.shaders.get(a):m.shaders.set(a,m.createShaders(a)).get(a);this.update(b)}var k=a("color-normalize"),h=a("array-bounds"),
e=a("object-assign"),f=a("glslify"),b=a("pick-by-alias"),n=a("flatten-vertex-data"),u=a("earcut"),r=a("array-normalize");l=a("to-float32");var d=l.float32,g=l.fract32;l=a("es6-weak-map");var c=a("parse-rect");p.exports=m;m.dashMult=2;m.maxPatternLength=256;m.precisionThreshold=3E6;m.maxPoints=1E4;m.maxLines=2048;m.shaders=new l;m.createShaders=function(a){var b=a.buffer({usage:"static",type:"float",data:[0,1,0,0,1,1,1,0]}),c={primitive:"triangle strip",instances:a.prop("count"),count:4,offset:0,uniforms:{miterMode:function(a,
b){return"round"===b.join?2:1},miterLimit:a.prop("miterLimit"),scale:a.prop("scale"),scaleFract:a.prop("scaleFract"),translateFract:a.prop("translateFract"),translate:a.prop("translate"),thickness:a.prop("thickness"),dashPattern:a.prop("dashTexture"),opacity:a.prop("opacity"),pixelRatio:a.context("pixelRatio"),id:a.prop("id"),dashSize:a.prop("dashLength"),viewport:function(a,b){return[b.viewport.x,b.viewport.y,a.viewportWidth,a.viewportHeight]},depth:a.prop("depth")},blend:{enable:!0,color:[0,0,0,
0],equation:{rgb:"add",alpha:"add"},func:{srcRGB:"src alpha",dstRGB:"one minus src alpha",srcAlpha:"one minus dst alpha",dstAlpha:"one"}},depth:{enable:function(a,b){return!b.overlay}},stencil:{enable:!1},scissor:{enable:!0,box:a.prop("viewport")},viewport:a.prop("viewport")},d=a(e({vert:f(["precision highp float;\n#define GLSLIFY 1\n\nattribute vec2 aCoord, bCoord, aCoordFract, bCoordFract;\nattribute vec4 color;\nattribute float lineEnd, lineTop;\n\nuniform vec2 scale, scaleFract, translate, translateFract;\nuniform float thickness, pixelRatio, id, depth;\nuniform vec4 viewport;\n\nvarying vec4 fragColor;\nvarying vec2 tangent;\n\nvec2 project(vec2 position, vec2 positionFract, vec2 scale, vec2 scaleFract, vec2 translate, vec2 translateFract) {\n\t// the order is important\n\treturn position * scale + translate\n       + positionFract * scale + translateFract\n       + position * scaleFract\n       + positionFract * scaleFract;\n}\n\nvoid main() {\n\tfloat lineStart \x3d 1. - lineEnd;\n\tfloat lineOffset \x3d lineTop * 2. - 1.;\n\n\tvec2 diff \x3d (bCoord + bCoordFract - aCoord - aCoordFract);\n\ttangent \x3d normalize(diff * scale * viewport.zw);\n\tvec2 normal \x3d vec2(-tangent.y, tangent.x);\n\n\tvec2 position \x3d project(aCoord, aCoordFract, scale, scaleFract, translate, translateFract) * lineStart\n\t\t+ project(bCoord, bCoordFract, scale, scaleFract, translate, translateFract) * lineEnd\n\n\t\t+ thickness * normal * .5 * lineOffset / viewport.zw;\n\n\tgl_Position \x3d vec4(position * 2.0 - 1.0, depth, 1);\n\n\tfragColor \x3d color / 255.;\n}\n"]),
frag:f(["precision highp float;\n#define GLSLIFY 1\n\nuniform sampler2D dashPattern;\n\nuniform float dashSize, pixelRatio, thickness, opacity, id;\n\nvarying vec4 fragColor;\nvarying vec2 tangent;\n\nvoid main() {\n\tfloat alpha \x3d 1.;\n\n\tfloat t \x3d fract(dot(tangent, gl_FragCoord.xy) / dashSize) * .5 + .25;\n\tfloat dash \x3d texture2D(dashPattern, vec2(t, .5)).r;\n\n\tgl_FragColor \x3d fragColor;\n\tgl_FragColor.a *\x3d alpha * opacity * dash;\n}\n"]),attributes:{lineEnd:{buffer:b,divisor:0,
stride:8,offset:0},lineTop:{buffer:b,divisor:0,stride:8,offset:4},aCoord:{buffer:a.prop("positionBuffer"),stride:8,offset:8,divisor:1},bCoord:{buffer:a.prop("positionBuffer"),stride:8,offset:16,divisor:1},aCoordFract:{buffer:a.prop("positionFractBuffer"),stride:8,offset:8,divisor:1},bCoordFract:{buffer:a.prop("positionFractBuffer"),stride:8,offset:16,divisor:1},color:{buffer:a.prop("colorBuffer"),stride:4,offset:0,divisor:1}}},c));try{var g=a(e({cull:{enable:!0,face:"back"},vert:f(["precision highp float;\n#define GLSLIFY 1\n\nattribute vec2 aCoord, bCoord, nextCoord, prevCoord;\nattribute vec4 aColor, bColor;\nattribute float lineEnd, lineTop;\n\nuniform vec2 scale, translate;\nuniform float thickness, pixelRatio, id, depth;\nuniform vec4 viewport;\nuniform float miterLimit, miterMode;\n\nvarying vec4 fragColor;\nvarying vec4 startCutoff, endCutoff;\nvarying vec2 tangent;\nvarying vec2 startCoord, endCoord;\nvarying float enableStartMiter, enableEndMiter;\n\nconst float REVERSE_THRESHOLD \x3d -.875;\nconst float MIN_DIFF \x3d 1e-6;\n\n// TODO: possible optimizations: avoid overcalculating all for vertices and calc just one instead\n// TODO: precalculate dot products, normalize things beforehead etc.\n// TODO: refactor to rectangular algorithm\n\nfloat distToLine(vec2 p, vec2 a, vec2 b) {\n\tvec2 diff \x3d b - a;\n\tvec2 perp \x3d normalize(vec2(-diff.y, diff.x));\n\treturn dot(p - a, perp);\n}\n\nbool isNaN( float val ){\n  return ( val \x3c 0.0 || 0.0 \x3c val || val \x3d\x3d 0.0 ) ? false : true;\n}\n\nvoid main() {\n\tvec2 aCoord \x3d aCoord, bCoord \x3d bCoord, prevCoord \x3d prevCoord, nextCoord \x3d nextCoord;\n\n  vec2 adjustedScale;\n  adjustedScale.x \x3d (abs(scale.x) \x3c MIN_DIFF) ? MIN_DIFF : scale.x;\n  adjustedScale.y \x3d (abs(scale.y) \x3c MIN_DIFF) ? MIN_DIFF : scale.y;\n\n  vec2 scaleRatio \x3d adjustedScale * viewport.zw;\n\tvec2 normalWidth \x3d thickness / scaleRatio;\n\n\tfloat lineStart \x3d 1. - lineEnd;\n\tfloat lineBot \x3d 1. - lineTop;\n\n\tfragColor \x3d (lineStart * aColor + lineEnd * bColor) / 255.;\n\n\tif (isNaN(aCoord.x) || isNaN(aCoord.y) || isNaN(bCoord.x) || isNaN(bCoord.y)) return;\n\n\tif (aCoord \x3d\x3d prevCoord) prevCoord \x3d aCoord + normalize(bCoord - aCoord);\n\tif (bCoord \x3d\x3d nextCoord) nextCoord \x3d bCoord - normalize(bCoord - aCoord);\n\n\tvec2 prevDiff \x3d aCoord - prevCoord;\n\tvec2 currDiff \x3d bCoord - aCoord;\n\tvec2 nextDiff \x3d nextCoord - bCoord;\n\n\tvec2 prevTangent \x3d normalize(prevDiff * scaleRatio);\n\tvec2 currTangent \x3d normalize(currDiff * scaleRatio);\n\tvec2 nextTangent \x3d normalize(nextDiff * scaleRatio);\n\n\tvec2 prevNormal \x3d vec2(-prevTangent.y, prevTangent.x);\n\tvec2 currNormal \x3d vec2(-currTangent.y, currTangent.x);\n\tvec2 nextNormal \x3d vec2(-nextTangent.y, nextTangent.x);\n\n\tvec2 startJoinDirection \x3d normalize(prevTangent - currTangent);\n\tvec2 endJoinDirection \x3d normalize(currTangent - nextTangent);\n\n\t// collapsed/unidirectional segment cases\n\t// FIXME: there should be more elegant solution\n\tvec2 prevTanDiff \x3d abs(prevTangent - currTangent);\n\tvec2 nextTanDiff \x3d abs(nextTangent - currTangent);\n\tif (max(prevTanDiff.x, prevTanDiff.y) \x3c MIN_DIFF) {\n\t\tstartJoinDirection \x3d currNormal;\n\t}\n\tif (max(nextTanDiff.x, nextTanDiff.y) \x3c MIN_DIFF) {\n\t\tendJoinDirection \x3d currNormal;\n\t}\n\tif (aCoord \x3d\x3d bCoord) {\n\t\tendJoinDirection \x3d startJoinDirection;\n\t\tcurrNormal \x3d prevNormal;\n\t\tcurrTangent \x3d prevTangent;\n\t}\n\n\ttangent \x3d currTangent;\n\n\t//calculate join shifts relative to normals\n\tfloat startJoinShift \x3d dot(currNormal, startJoinDirection);\n\tfloat endJoinShift \x3d dot(currNormal, endJoinDirection);\n\n\tfloat startMiterRatio \x3d abs(1. / startJoinShift);\n\tfloat endMiterRatio \x3d abs(1. / endJoinShift);\n\n\tvec2 startJoin \x3d startJoinDirection * startMiterRatio;\n\tvec2 endJoin \x3d endJoinDirection * endMiterRatio;\n\n\tvec2 startTopJoin, startBotJoin, endTopJoin, endBotJoin;\n\tstartTopJoin \x3d sign(startJoinShift) * startJoin * .5;\n\tstartBotJoin \x3d -startTopJoin;\n\n\tendTopJoin \x3d sign(endJoinShift) * endJoin * .5;\n\tendBotJoin \x3d -endTopJoin;\n\n\tvec2 aTopCoord \x3d aCoord + normalWidth * startTopJoin;\n\tvec2 bTopCoord \x3d bCoord + normalWidth * endTopJoin;\n\tvec2 aBotCoord \x3d aCoord + normalWidth * startBotJoin;\n\tvec2 bBotCoord \x3d bCoord + normalWidth * endBotJoin;\n\n\t//miter anti-clipping\n\tfloat baClipping \x3d distToLine(bCoord, aCoord, aBotCoord) / dot(normalize(normalWidth * endBotJoin), normalize(normalWidth.yx * vec2(-startBotJoin.y, startBotJoin.x)));\n\tfloat abClipping \x3d distToLine(aCoord, bCoord, bTopCoord) / dot(normalize(normalWidth * startBotJoin), normalize(normalWidth.yx * vec2(-endBotJoin.y, endBotJoin.x)));\n\n\t//prevent close to reverse direction switch\n\tbool prevReverse \x3d dot(currTangent, prevTangent) \x3c\x3d REVERSE_THRESHOLD \x26\x26 abs(dot(currTangent, prevNormal)) * min(length(prevDiff), length(currDiff)) \x3c  length(normalWidth * currNormal);\n\tbool nextReverse \x3d dot(currTangent, nextTangent) \x3c\x3d REVERSE_THRESHOLD \x26\x26 abs(dot(currTangent, nextNormal)) * min(length(nextDiff), length(currDiff)) \x3c  length(normalWidth * currNormal);\n\n\tif (prevReverse) {\n\t\t//make join rectangular\n\t\tvec2 miterShift \x3d normalWidth * startJoinDirection * miterLimit * .5;\n\t\tfloat normalAdjust \x3d 1. - min(miterLimit / startMiterRatio, 1.);\n\t\taBotCoord \x3d aCoord + miterShift - normalAdjust * normalWidth * currNormal * .5;\n\t\taTopCoord \x3d aCoord + miterShift + normalAdjust * normalWidth * currNormal * .5;\n\t}\n\telse if (!nextReverse \x26\x26 baClipping \x3e 0. \x26\x26 baClipping \x3c length(normalWidth * endBotJoin)) {\n\t\t//handle miter clipping\n\t\tbTopCoord -\x3d normalWidth * endTopJoin;\n\t\tbTopCoord +\x3d normalize(endTopJoin * normalWidth) * baClipping;\n\t}\n\n\tif (nextReverse) {\n\t\t//make join rectangular\n\t\tvec2 miterShift \x3d normalWidth * endJoinDirection * miterLimit * .5;\n\t\tfloat normalAdjust \x3d 1. - min(miterLimit / endMiterRatio, 1.);\n\t\tbBotCoord \x3d bCoord + miterShift - normalAdjust * normalWidth * currNormal * .5;\n\t\tbTopCoord \x3d bCoord + miterShift + normalAdjust * normalWidth * currNormal * .5;\n\t}\n\telse if (!prevReverse \x26\x26 abClipping \x3e 0. \x26\x26 abClipping \x3c length(normalWidth * startBotJoin)) {\n\t\t//handle miter clipping\n\t\taBotCoord -\x3d normalWidth * startBotJoin;\n\t\taBotCoord +\x3d normalize(startBotJoin * normalWidth) * abClipping;\n\t}\n\n\tvec2 aTopPosition \x3d (aTopCoord) * adjustedScale + translate;\n\tvec2 aBotPosition \x3d (aBotCoord) * adjustedScale + translate;\n\n\tvec2 bTopPosition \x3d (bTopCoord) * adjustedScale + translate;\n\tvec2 bBotPosition \x3d (bBotCoord) * adjustedScale + translate;\n\n\t//position is normalized 0..1 coord on the screen\n\tvec2 position \x3d (aTopPosition * lineTop + aBotPosition * lineBot) * lineStart + (bTopPosition * lineTop + bBotPosition * lineBot) * lineEnd;\n\n\tstartCoord \x3d aCoord * scaleRatio + translate * viewport.zw + viewport.xy;\n\tendCoord \x3d bCoord * scaleRatio + translate * viewport.zw + viewport.xy;\n\n\tgl_Position \x3d vec4(position  * 2.0 - 1.0, depth, 1);\n\n\tenableStartMiter \x3d step(dot(currTangent, prevTangent), .5);\n\tenableEndMiter \x3d step(dot(currTangent, nextTangent), .5);\n\n\t//bevel miter cutoffs\n\tif (miterMode \x3d\x3d 1.) {\n\t\tif (enableStartMiter \x3d\x3d 1.) {\n\t\t\tvec2 startMiterWidth \x3d vec2(startJoinDirection) * thickness * miterLimit * .5;\n\t\t\tstartCutoff \x3d vec4(aCoord, aCoord);\n\t\t\tstartCutoff.zw +\x3d vec2(-startJoinDirection.y, startJoinDirection.x) / scaleRatio;\n\t\t\tstartCutoff \x3d startCutoff * scaleRatio.xyxy + translate.xyxy * viewport.zwzw;\n\t\t\tstartCutoff +\x3d viewport.xyxy;\n\t\t\tstartCutoff +\x3d startMiterWidth.xyxy;\n\t\t}\n\n\t\tif (enableEndMiter \x3d\x3d 1.) {\n\t\t\tvec2 endMiterWidth \x3d vec2(endJoinDirection) * thickness * miterLimit * .5;\n\t\t\tendCutoff \x3d vec4(bCoord, bCoord);\n\t\t\tendCutoff.zw +\x3d vec2(-endJoinDirection.y, endJoinDirection.x)  / scaleRatio;\n\t\t\tendCutoff \x3d endCutoff * scaleRatio.xyxy + translate.xyxy * viewport.zwzw;\n\t\t\tendCutoff +\x3d viewport.xyxy;\n\t\t\tendCutoff +\x3d endMiterWidth.xyxy;\n\t\t}\n\t}\n\n\t//round miter cutoffs\n\telse if (miterMode \x3d\x3d 2.) {\n\t\tif (enableStartMiter \x3d\x3d 1.) {\n\t\t\tvec2 startMiterWidth \x3d vec2(startJoinDirection) * thickness * abs(dot(startJoinDirection, currNormal)) * .5;\n\t\t\tstartCutoff \x3d vec4(aCoord, aCoord);\n\t\t\tstartCutoff.zw +\x3d vec2(-startJoinDirection.y, startJoinDirection.x) / scaleRatio;\n\t\t\tstartCutoff \x3d startCutoff * scaleRatio.xyxy + translate.xyxy * viewport.zwzw;\n\t\t\tstartCutoff +\x3d viewport.xyxy;\n\t\t\tstartCutoff +\x3d startMiterWidth.xyxy;\n\t\t}\n\n\t\tif (enableEndMiter \x3d\x3d 1.) {\n\t\t\tvec2 endMiterWidth \x3d vec2(endJoinDirection) * thickness * abs(dot(endJoinDirection, currNormal)) * .5;\n\t\t\tendCutoff \x3d vec4(bCoord, bCoord);\n\t\t\tendCutoff.zw +\x3d vec2(-endJoinDirection.y, endJoinDirection.x)  / scaleRatio;\n\t\t\tendCutoff \x3d endCutoff * scaleRatio.xyxy + translate.xyxy * viewport.zwzw;\n\t\t\tendCutoff +\x3d viewport.xyxy;\n\t\t\tendCutoff +\x3d endMiterWidth.xyxy;\n\t\t}\n\t}\n}\n"]),
frag:f(["precision highp float;\n#define GLSLIFY 1\n\nuniform sampler2D dashPattern;\nuniform float dashSize, pixelRatio, thickness, opacity, id, miterMode;\n\nvarying vec4 fragColor;\nvarying vec2 tangent;\nvarying vec4 startCutoff, endCutoff;\nvarying vec2 startCoord, endCoord;\nvarying float enableStartMiter, enableEndMiter;\n\nfloat distToLine(vec2 p, vec2 a, vec2 b) {\n\tvec2 diff \x3d b - a;\n\tvec2 perp \x3d normalize(vec2(-diff.y, diff.x));\n\treturn dot(p - a, perp);\n}\n\nvoid main() {\n\tfloat alpha \x3d 1., distToStart, distToEnd;\n\tfloat cutoff \x3d thickness * .5;\n\n\t//bevel miter\n\tif (miterMode \x3d\x3d 1.) {\n\t\tif (enableStartMiter \x3d\x3d 1.) {\n\t\t\tdistToStart \x3d distToLine(gl_FragCoord.xy, startCutoff.xy, startCutoff.zw);\n\t\t\tif (distToStart \x3c -1.) {\n\t\t\t\tdiscard;\n\t\t\t\treturn;\n\t\t\t}\n\t\t\talpha *\x3d min(max(distToStart + 1., 0.), 1.);\n\t\t}\n\n\t\tif (enableEndMiter \x3d\x3d 1.) {\n\t\t\tdistToEnd \x3d distToLine(gl_FragCoord.xy, endCutoff.xy, endCutoff.zw);\n\t\t\tif (distToEnd \x3c -1.) {\n\t\t\t\tdiscard;\n\t\t\t\treturn;\n\t\t\t}\n\t\t\talpha *\x3d min(max(distToEnd + 1., 0.), 1.);\n\t\t}\n\t}\n\n\t// round miter\n\telse if (miterMode \x3d\x3d 2.) {\n\t\tif (enableStartMiter \x3d\x3d 1.) {\n\t\t\tdistToStart \x3d distToLine(gl_FragCoord.xy, startCutoff.xy, startCutoff.zw);\n\t\t\tif (distToStart \x3c 0.) {\n\t\t\t\tfloat radius \x3d length(gl_FragCoord.xy - startCoord);\n\n\t\t\t\tif(radius \x3e cutoff + .5) {\n\t\t\t\t\tdiscard;\n\t\t\t\t\treturn;\n\t\t\t\t}\n\n\t\t\t\talpha -\x3d smoothstep(cutoff - .5, cutoff + .5, radius);\n\t\t\t}\n\t\t}\n\n\t\tif (enableEndMiter \x3d\x3d 1.) {\n\t\t\tdistToEnd \x3d distToLine(gl_FragCoord.xy, endCutoff.xy, endCutoff.zw);\n\t\t\tif (distToEnd \x3c 0.) {\n\t\t\t\tfloat radius \x3d length(gl_FragCoord.xy - endCoord);\n\n\t\t\t\tif(radius \x3e cutoff + .5) {\n\t\t\t\t\tdiscard;\n\t\t\t\t\treturn;\n\t\t\t\t}\n\n\t\t\t\talpha -\x3d smoothstep(cutoff - .5, cutoff + .5, radius);\n\t\t\t}\n\t\t}\n\t}\n\n\tfloat t \x3d fract(dot(tangent, gl_FragCoord.xy) / dashSize) * .5 + .25;\n\tfloat dash \x3d texture2D(dashPattern, vec2(t, .5)).r;\n\n\tgl_FragColor \x3d fragColor;\n\tgl_FragColor.a *\x3d alpha * opacity * dash;\n}\n"]),
attributes:{lineEnd:{buffer:b,divisor:0,stride:8,offset:0},lineTop:{buffer:b,divisor:0,stride:8,offset:4},aColor:{buffer:a.prop("colorBuffer"),stride:4,offset:0,divisor:1},bColor:{buffer:a.prop("colorBuffer"),stride:4,offset:4,divisor:1},prevCoord:{buffer:a.prop("positionBuffer"),stride:8,offset:0,divisor:1},aCoord:{buffer:a.prop("positionBuffer"),stride:8,offset:8,divisor:1},bCoord:{buffer:a.prop("positionBuffer"),stride:8,offset:16,divisor:1},nextCoord:{buffer:a.prop("positionBuffer"),stride:8,
offset:24,divisor:1}}},c))}catch(G){g=d}return{fill:a({primitive:"triangle",elements:function(a,b){return b.triangles},offset:0,vert:f(["precision highp float;\n#define GLSLIFY 1\n\nattribute vec2 position, positionFract;\n\nuniform vec4 color;\nuniform vec2 scale, scaleFract, translate, translateFract;\nuniform float pixelRatio, id;\nuniform vec4 viewport;\nuniform float opacity;\n\nvarying vec4 fragColor;\n\nconst float MAX_LINES \x3d 256.;\n\nvoid main() {\n\tfloat depth \x3d (MAX_LINES - 4. - id) / (MAX_LINES);\n\n\tvec2 position \x3d position * scale + translate\n       + positionFract * scale + translateFract\n       + position * scaleFract\n       + positionFract * scaleFract;\n\n\tgl_Position \x3d vec4(position * 2.0 - 1.0, depth, 1);\n\n\tfragColor \x3d color / 255.;\n\tfragColor.a *\x3d opacity;\n}\n"]),
frag:f(["precision highp float;\n#define GLSLIFY 1\n\nvarying vec4 fragColor;\n\nvoid main() {\n\tgl_FragColor \x3d fragColor;\n}\n"]),uniforms:{scale:a.prop("scale"),color:a.prop("fill"),scaleFract:a.prop("scaleFract"),translateFract:a.prop("translateFract"),translate:a.prop("translate"),opacity:a.prop("opacity"),pixelRatio:a.context("pixelRatio"),id:a.prop("id"),viewport:function(a,b){return[b.viewport.x,b.viewport.y,a.viewportWidth,a.viewportHeight]}},attributes:{position:{buffer:a.prop("positionBuffer"),
stride:8,offset:8},positionFract:{buffer:a.prop("positionFractBuffer"),stride:8,offset:8}},blend:c.blend,depth:{enable:!1},scissor:c.scissor,stencil:c.stencil,viewport:c.viewport}),rect:d,miter:g}};m.defaults={dashes:null,join:"miter",miterLimit:1,thickness:10,cap:"square",color:"black",opacity:1,overlay:!1,viewport:null,range:null,close:!1,fill:null};m.prototype.render=function(){for(var a=[],b=arguments.length;b--;)a[b]=arguments[b];a.length&&this.update.apply(this,a);this.draw()};m.prototype.draw=
function(){for(var a=this,b=[],c=arguments.length;c--;)b[c]=arguments[c];(b.length?b:this.passes).forEach(function(b,c){if(b&&Array.isArray(b))return a.draw.apply(a,b);"number"===typeof b&&(b=a.passes[b]);b&&1<b.count&&b.opacity&&(a.regl._refresh(),b.fill&&b.triangles&&2<b.triangles.length&&a.shaders.fill(b),b.thickness&&(b.scale[0]*b.viewport.width>m.precisionThreshold||b.scale[1]*b.viewport.height>m.precisionThreshold?a.shaders.rect(b):"rect"===b.join||!b.join&&(2>=b.thickness||b.count>=m.maxPoints)?
a.shaders.rect(b):a.shaders.miter(b)))});return this};m.prototype.update=function(a){var f=this;if(a){null!=a.length?"number"===typeof a[0]&&(a=[{positions:a}]):Array.isArray(a)||(a=[a]);var v=this.regl,l=this.gl;a.forEach(function(a,t){var p=f.passes[t];if(void 0!==a)if(null===a)f.passes[t]=null;else{"number"===typeof a[0]&&(a={positions:a});a=b(a,{positions:"positions points data coords",thickness:"thickness lineWidth lineWidths line-width linewidth width stroke-width strokewidth strokeWidth",join:"lineJoin linejoin join type mode",
miterLimit:"miterlimit miterLimit",dashes:"dash dashes dasharray dash-array dashArray",color:"color colour stroke colors colours stroke-color strokeColor",fill:"fill fill-color fillColor",opacity:"alpha opacity",overlay:"overlay crease overlap intersect",close:"closed close closed-path closePath",range:"range dataBox",viewport:"viewport viewBox",hole:"holes hole hollow"});p||(f.passes[t]=p={id:t,scale:null,scaleFract:null,translate:null,translateFract:null,count:0,hole:[],depth:0,dashLength:1,dashTexture:v.texture({channels:1,
data:new Uint8Array([255]),width:1,height:1,mag:"linear",min:"linear"}),colorBuffer:v.buffer({usage:"dynamic",type:"uint8",data:new Uint8Array}),positionBuffer:v.buffer({usage:"dynamic",type:"float",data:new Uint8Array}),positionFractBuffer:v.buffer({usage:"dynamic",type:"float",data:new Uint8Array})},a=e({},m.defaults,a));null!=a.thickness&&(p.thickness=parseFloat(a.thickness));null!=a.opacity&&(p.opacity=parseFloat(a.opacity));null!=a.miterLimit&&(p.miterLimit=parseFloat(a.miterLimit));null!=a.overlay&&
(p.overlay=!!a.overlay,t<m.maxLines&&(p.depth=2*(m.maxLines-1-t%m.maxLines)/m.maxLines-1));null!=a.join&&(p.join=a.join);null!=a.hole&&(p.hole=a.hole);null!=a.fill&&(p.fill=a.fill?k(a.fill,"uint8"):null);null!=a.viewport&&(p.viewport=c(a.viewport));p.viewport||(p.viewport=c([l.drawingBufferWidth,l.drawingBufferHeight]));null!=a.close&&(p.close=a.close);null===a.positions&&(a.positions=[]);if(a.positions){if(a.positions.x&&a.positions.y){var q=a.positions.x,y=a.positions.y;var B=p.count=Math.max(q.length,
y.length);t=new Float64Array(2*B);for(var A=0;A<B;A++)t[2*A]=q[A],t[2*A+1]=y[A]}else t=n(a.positions,"float64"),B=p.count=Math.floor(t.length/2);q=p.bounds=h(t,2);if(p.fill){A=[];y={};for(var D=0,C=0,G=0,N=p.count;C<N;C++){var L=t[2*C],w=t[2*C+1];isNaN(L)||isNaN(w)||null==L||null==w?(L=t[2*D],w=t[2*D+1],y[C]=D):D=C;A[G++]=L;A[G++]=w}A=u(A,p.hole||[]);D=0;for(C=A.length;D<C;D++)null!=y[A[D]]&&(A[D]=y[A[D]]);p.triangles=A}y=new Float64Array(t);r(y,2,q);q=new Float64Array(2*B+6);p.close?t[0]===t[2*B-
2]&&t[1]===t[2*B-1]?(q[0]=y[2*B-4],q[1]=y[2*B-3]):(q[0]=y[2*B-2],q[1]=y[2*B-1]):(q[0]=y[0],q[1]=y[1]);q.set(y,2);p.close?t[0]===t[2*B-2]&&t[1]===t[2*B-1]?(q[2*B+2]=y[2],q[2*B+3]=y[3],--p.count):(q[2*B+2]=y[0],q[2*B+3]=y[1],q[2*B+4]=y[2],q[2*B+5]=y[3]):(q[2*B+2]=y[2*B-2],q[2*B+3]=y[2*B-1],q[2*B+4]=y[2*B-2],q[2*B+5]=y[2*B-1]);p.positionBuffer(d(q));p.positionFractBuffer(g(q))}a.range?p.range=a.range:p.range||(p.range=p.bounds);(a.range||a.positions)&&p.count&&(t=p.bounds,B=p.range[2]-p.range[0],q=p.range[3]-
p.range[1],p.scale=[(t[2]-t[0])/B,(t[3]-t[1])/q],p.translate=[-p.range[0]/B+t[0]/B||0,-p.range[1]/q+t[1]/q||0],p.scaleFract=g(p.scale),p.translateFract=g(p.translate));if(a.dashes){if(!a.dashes||2>a.dashes.length)t=1,B=new Uint8Array([255,255,255,255,255,255,255,255]);else{for(B=t=0;B<a.dashes.length;++B)t+=a.dashes[B];B=new Uint8Array(t*m.dashMult);q=0;y=255;for(A=0;2>A;A++)for(D=0;D<a.dashes.length;++D){C=0;for(G=a.dashes[D]*m.dashMult*.5;C<G;++C)B[q++]=y;y^=255}}p.dashLength=t;p.dashTexture({channels:1,
data:B,width:B.length,height:1,mag:"linear",min:"linear"},0,0)}if(a.color){t=p.count;(B=a.color)||(B="transparent");a=new Uint8Array(4*t+4);if(Array.isArray(B)&&"number"!==typeof B[0]){for(q=0;q<t;q++)y=k(B[q],"uint8"),a.set(y,4*q);a.set(k(B[0],"uint8"),4*t)}else for(B=k(B,"uint8"),q=0;q<t+1;q++)a.set(B,4*q);p.colorBuffer({usage:"dynamic",type:"uint8",data:a})}}});if(a.length<this.passes.length){for(var p=a.length;p<this.passes.length;p++){var q=f.passes[p];q&&(q.colorBuffer.destroy(),q.positionBuffer.destroy(),
q.dashTexture.destroy())}this.passes.length=a.length}a=[];for(p=0;p<this.passes.length;p++)null!==f.passes[p]&&a.push(f.passes[p]);this.passes=a;return this}};m.prototype.destroy=function(){this.passes.forEach(function(a){a.colorBuffer.destroy();a.positionBuffer.destroy();a.dashTexture.destroy()});this.passes.length=0;return this}},{"array-bounds":55,"array-normalize":56,"color-normalize":110,earcut:162,"es6-weak-map":216,"flatten-vertex-data":223,glslify:401,"object-assign":446,"parse-rect":451,
"pick-by-alias":457,"to-float32":522}],484:[function(a,p,l){function m(a){if(Array.isArray(a)){var b=0;for(var c=Array(a.length);b<a.length;b++)c[b]=a[b];b=c}else b=void 0;b||($jscomp.initSymbol(),$jscomp.initSymbolIterator(),b=Symbol.iterator in Object(a)||"[object Arguments]"===Object.prototype.toString.call(a)?Array.from(a):void 0);if(!(a=b))throw new TypeError("Invalid attempt to spread non-iterable instance");return a}function k(a,b){var d=this;if(!(this instanceof k))return new k(a,b);"function"===
typeof a?(b||(b={}),b.regl=a):(b=a,a=null);b&&b.length&&(b.positions=b);a=b.regl;var e=a._gl,g=[];this.tooManyColors=c;var f=a.texture({data:new Uint8Array(1020),width:255,height:1,type:"uint8",format:"rgba",wrapS:"clamp",wrapT:"clamp",mag:"nearest",min:"nearest"});n(this,{regl:a,gl:e,groups:[],markerCache:[null],markerTextures:[null],palette:g,paletteIds:{},paletteTexture:f,maxColors:255,maxSize:100,canvas:e.canvas});this.update(b);e={uniforms:{pixelRatio:a.context("pixelRatio"),palette:f,paletteSize:function(a,
b){return[d.tooManyColors?0:255,f.height]},scale:a.prop("scale"),scaleFract:a.prop("scaleFract"),translate:a.prop("translate"),translateFract:a.prop("translateFract"),opacity:a.prop("opacity"),marker:a.prop("markerTexture")},attributes:{x:function(a,b){return b.xAttr||{buffer:b.positionBuffer,stride:8,offset:0}},y:function(a,b){return b.yAttr||{buffer:b.positionBuffer,stride:8,offset:4}},xFract:function(a,b){return b.xAttr?{constant:[0,0]}:{buffer:b.positionFractBuffer,stride:8,offset:0}},yFract:function(a,
b){return b.yAttr?{constant:[0,0]}:{buffer:b.positionFractBuffer,stride:8,offset:4}},size:function(a,b){return b.size.length?{buffer:b.sizeBuffer,stride:2,offset:0}:{constant:[Math.round(255*b.size/d.maxSize)]}},borderSize:function(a,b){return b.borderSize.length?{buffer:b.sizeBuffer,stride:2,offset:1}:{constant:[Math.round(255*b.borderSize/d.maxSize)]}},colorId:function(a,b){return b.color.length?{buffer:b.colorBuffer,stride:d.tooManyColors?8:4,offset:0}:{constant:d.tooManyColors?g.slice(4*b.color,
4*b.color+4):[b.color]}},borderColorId:function(a,b){return b.borderColor.length?{buffer:b.colorBuffer,stride:d.tooManyColors?8:4,offset:d.tooManyColors?4:2}:{constant:d.tooManyColors?g.slice(4*b.borderColor,4*b.borderColor+4):[b.borderColor]}},isActive:function(a,b){return!0===b.activation?{constant:[1]}:b.activation?b.activation:{constant:[0]}}},blend:{enable:!0,color:[0,0,0,1],func:{srcRGB:"src alpha",dstRGB:"one minus src alpha",srcAlpha:"one minus dst alpha",dstAlpha:"one"}},scissor:{enable:!0,
box:a.prop("viewport")},viewport:a.prop("viewport"),stencil:{enable:!1},depth:{enable:!1},elements:a.prop("elements"),count:a.prop("count"),offset:a.prop("offset"),primitive:"points"};b=n({},e);b.frag=u(["precision highp float;\n#define GLSLIFY 1\n\nvarying vec4 fragColor, fragBorderColor;\nvarying float fragWidth, fragBorderColorLevel, fragColorLevel;\n\nuniform sampler2D marker;\nuniform float pixelRatio, opacity;\n\nfloat smoothStep(float x, float y) {\n  return 1.0 / (1.0 + exp(50.0*(x - y)));\n}\n\nvoid main() {\n  float dist \x3d texture2D(marker, gl_PointCoord).r, delta \x3d fragWidth;\n\n  // max-distance alpha\n  if (dist \x3c 0.003) discard;\n\n  // null-border case\n  if (fragBorderColorLevel \x3d\x3d fragColorLevel || fragBorderColor.a \x3d\x3d 0.) {\n    float colorAmt \x3d smoothstep(.5 - delta, .5 + delta, dist);\n    gl_FragColor \x3d vec4(fragColor.rgb, colorAmt * fragColor.a * opacity);\n  }\n  else {\n    float borderColorAmt \x3d smoothstep(fragBorderColorLevel - delta, fragBorderColorLevel + delta, dist);\n    float colorAmt \x3d smoothstep(fragColorLevel - delta, fragColorLevel + delta, dist);\n\n    vec4 color \x3d fragBorderColor;\n    color.a *\x3d borderColorAmt;\n    color \x3d mix(color, fragColor, colorAmt);\n    color.a *\x3d opacity;\n\n    gl_FragColor \x3d color;\n  }\n\n}\n"]);
b.vert=u(["precision highp float;\n#define GLSLIFY 1\n\nattribute float x, y, xFract, yFract;\nattribute float size, borderSize;\nattribute vec4 colorId, borderColorId;\nattribute float isActive;\n\nuniform vec2 scale, scaleFract, translate, translateFract, paletteSize;\nuniform float pixelRatio;\nuniform sampler2D palette;\n\nconst float maxSize \x3d 100.;\nconst float borderLevel \x3d .5;\n\nvarying vec4 fragColor, fragBorderColor;\nvarying float fragPointSize, fragBorderRadius, fragWidth, fragBorderColorLevel, fragColorLevel;\n\nbool isDirect \x3d (paletteSize.x \x3c 1.);\n\nvec4 getColor(vec4 id) {\n  return isDirect ? id / 255. : texture2D(palette,\n    vec2(\n      (id.x + .5) / paletteSize.x,\n      (id.y + .5) / paletteSize.y\n    )\n  );\n}\n\nvoid main() {\n  if (isActive \x3d\x3d 0.) return;\n\n  vec2 position \x3d vec2(x, y);\n  vec2 positionFract \x3d vec2(xFract, yFract);\n\n  vec4 color \x3d getColor(colorId);\n  vec4 borderColor \x3d getColor(borderColorId);\n\n  float size \x3d size * maxSize / 255.;\n  float borderSize \x3d borderSize * maxSize / 255.;\n\n  gl_PointSize \x3d 2. * size * pixelRatio;\n  fragPointSize \x3d size * pixelRatio;\n\n  vec2 pos \x3d (position + translate) * scale\n      + (positionFract + translateFract) * scale\n      + (position + translate) * scaleFract\n      + (positionFract + translateFract) * scaleFract;\n\n  gl_Position \x3d vec4(pos * 2. - 1., 0, 1);\n\n  fragColor \x3d color;\n  fragBorderColor \x3d borderColor;\n  fragWidth \x3d 1. / gl_PointSize;\n\n  fragBorderColorLevel \x3d clamp(borderLevel - borderLevel * borderSize / size, 0., 1.);\n  fragColorLevel \x3d clamp(borderLevel + (1. - borderLevel) * borderSize / size, 0., 1.);\n}"]);
this.drawMarker=a(b);e=n({},e);e.frag=u(["precision highp float;\n#define GLSLIFY 1\n\nvarying vec4 fragColor, fragBorderColor;\n\nuniform float opacity;\nvarying float fragBorderRadius, fragWidth;\n\nfloat smoothStep(float edge0, float edge1, float x) {\n\tfloat t;\n\tt \x3d clamp((x - edge0) / (edge1 - edge0), 0.0, 1.0);\n\treturn t * t * (3.0 - 2.0 * t);\n}\n\nvoid main() {\n\tfloat radius, alpha \x3d 1.0, delta \x3d fragWidth;\n\n\tradius \x3d length(2.0 * gl_PointCoord.xy - 1.0);\n\n\tif (radius \x3e 1.0 + delta) {\n\t\tdiscard;\n\t}\n\n\talpha -\x3d smoothstep(1.0 - delta, 1.0 + delta, radius);\n\n\tfloat borderRadius \x3d fragBorderRadius;\n\tfloat ratio \x3d smoothstep(borderRadius - delta, borderRadius + delta, radius);\n\tvec4 color \x3d mix(fragColor, fragBorderColor, ratio);\n\tcolor.a *\x3d alpha * opacity;\n\tgl_FragColor \x3d color;\n}\n"]);
e.vert=u(["precision highp float;\n#define GLSLIFY 1\n\nattribute float x, y, xFract, yFract;\nattribute float size, borderSize;\nattribute vec4 colorId, borderColorId;\nattribute float isActive;\n\nuniform vec2 scale, scaleFract, translate, translateFract;\nuniform float pixelRatio;\nuniform sampler2D palette;\nuniform vec2 paletteSize;\n\nconst float maxSize \x3d 100.;\n\nvarying vec4 fragColor, fragBorderColor;\nvarying float fragBorderRadius, fragWidth;\n\nbool isDirect \x3d (paletteSize.x \x3c 1.);\n\nvec4 getColor(vec4 id) {\n  return isDirect ? id / 255. : texture2D(palette,\n    vec2(\n      (id.x + .5) / paletteSize.x,\n      (id.y + .5) / paletteSize.y\n    )\n  );\n}\n\nvoid main() {\n  // ignore inactive points\n  if (isActive \x3d\x3d 0.) return;\n\n  vec2 position \x3d vec2(x, y);\n  vec2 positionFract \x3d vec2(xFract, yFract);\n\n  vec4 color \x3d getColor(colorId);\n  vec4 borderColor \x3d getColor(borderColorId);\n\n  float size \x3d size * maxSize / 255.;\n  float borderSize \x3d borderSize * maxSize / 255.;\n\n  gl_PointSize \x3d (size + borderSize) * pixelRatio;\n\n  vec2 pos \x3d (position + translate) * scale\n      + (positionFract + translateFract) * scale\n      + (position + translate) * scaleFract\n      + (positionFract + translateFract) * scaleFract;\n\n  gl_Position \x3d vec4(pos * 2. - 1., 0, 1);\n\n  fragBorderRadius \x3d 1. - 2. * borderSize / (size + borderSize);\n  fragColor \x3d color;\n  fragBorderColor \x3d borderColor.a \x3d\x3d 0. || borderSize \x3d\x3d 0. ? vec4(color.rgb, 0.) : borderColor;\n  fragWidth \x3d 1. / gl_PointSize;\n}\n"]);
c&&(e.frag=e.frag.replace("smoothstep","smoothStep"),b.frag=b.frag.replace("smoothstep","smoothStep"));this.drawCircle=a(e)}var h=a("color-normalize"),e=a("array-bounds"),f=a("color-id"),b=a("point-cluster"),n=a("object-assign"),u=a("glslify"),r=a("pick-by-alias"),d=a("update-diff"),g=a("flatten-vertex-data"),c=a("is-iexplorer"),v=a("to-float32"),t=a("parse-rect");k.defaults={color:"black",borderColor:"transparent",borderSize:0,size:12,opacity:1,marker:void 0,viewport:null,range:null,pixelSize:null,
count:0,offset:0,bounds:null,positions:[],snap:1E4};k.prototype.render=function(){arguments.length&&this.update.apply(this,arguments);this.draw();return this};k.prototype.draw=function(){for(var a=this,b=arguments.length,c=Array(b),d=0;d<b;d++)c[d]=arguments[d];b=this.groups;1===c.length&&Array.isArray(c[0])&&(null===c[0][0]||Array.isArray(c[0][0]))&&(c=c[0]);this.regl._refresh();if(c.length)for(b=0;b<c.length;b++)this.drawItem(b,c[b]);else b.forEach(function(b,c){a.drawItem(c)});return this};k.prototype.drawItem=
function(a,b){var c=this.groups;a=c[a];"number"===typeof b&&(a=c[b],b=null);if(a&&a.count&&a.opacity){a.activation[0]&&this.drawCircle(this.getMarkerDrawOptions(0,a,b));c=[];for(var d=1;d<a.activation.length;d++)a.activation[d]&&(!0===a.activation[d]||a.activation[d].data.length)&&c.push.apply(c,m(this.getMarkerDrawOptions(d,a,b)));c.length&&this.drawMarker(c)}};k.prototype.getMarkerDrawOptions=function(a,b,c){var d=b.range,e=b.tree,g=b.viewport,f=b.activation,h=b.selectionBuffer,k=b.count;if(!e)return c?
[n({},b,{markerTexture:this.markerTextures[a],activation:f[a],count:c.length,elements:c,offset:0})]:[n({},b,{markerTexture:this.markerTextures[a],activation:f[a],offset:0})];var m=[];d=e.range(d,{lod:!0,px:[(d[2]-d[0])/g.width,(d[3]-d[1])/g.height]});if(c){e=f[a].data;k=new Uint8Array(k);for(g=0;g<c.length;g++){var t=c[g];k[t]=e?e[t]:1}h.subdata(k)}for(k=d.length;k--;){g=d[k];e=g;e=Array.isArray(e)?e:void 0;if(!e){e=void 0;t=[];var v=!0,r=!1,u=void 0;try{$jscomp.initSymbol();$jscomp.initSymbolIterator();
for(var l=g[Symbol.iterator]();!(v=(e=l.next()).done)&&(t.push(e.value),2!==t.length);v=!0);}catch(R){r=!0,u=R}finally{try{if(!v&&null!=l["return"])l["return"]()}finally{if(r)throw u;}}e=t}if(!e)throw new TypeError("Invalid attempt to destructure non-iterable instance");g=e[0];m.push(n({},b,{markerTexture:this.markerTextures[a],activation:c?h:f[a],offset:g,count:e[1]-g}))}return m};k.prototype.update=function(){for(var a=this,c=arguments.length,f=Array(c),h=0;h<c;h++)f[h]=arguments[h];if(f.length){1===
f.length&&Array.isArray(f[0])&&(f=f[0]);var m=this.groups,u=this.gl,l=this.regl,p=this.maxSize,q=this.maxColors,y=this.palette;this.groups=m=f.map(function(c,f){var h=m[f];if(void 0===c)return h;null===c?c={positions:null}:"function"===typeof c?c={ondraw:c}:"number"===typeof c[0]&&(c={positions:c});c=r(c,{positions:"positions data points",snap:"snap cluster lod tree",size:"sizes size radius",borderSize:"borderSizes borderSize border-size bordersize borderWidth borderWidths border-width borderwidth stroke-width strokeWidth strokewidth outline",
color:"colors color fill fill-color fillColor",borderColor:"borderColors borderColor stroke stroke-color strokeColor",marker:"markers marker shape",range:"range dataBox databox",viewport:"viewport viewPort viewBox viewbox",opacity:"opacity alpha transparency",bounds:"bound bounds boundaries limits",tooManyColors:"tooManyColors palette paletteMode optimizePalette enablePalette"});null===c.positions&&(c.positions=[]);null!=c.tooManyColors&&(a.tooManyColors=c.tooManyColors);h||(m[f]=h={id:f,scale:null,
translate:null,scaleFract:null,translateFract:null,activation:[],selectionBuffer:l.buffer({data:new Uint8Array(0),usage:"stream",type:"uint8"}),sizeBuffer:l.buffer({data:new Uint8Array(0),usage:"dynamic",type:"uint8"}),colorBuffer:l.buffer({data:new Uint8Array(0),usage:"dynamic",type:"uint8"}),positionBuffer:l.buffer({data:new Uint8Array(0),usage:"dynamic",type:"float"}),positionFractBuffer:l.buffer({data:new Uint8Array(0),usage:"dynamic",type:"float"})},c=n({},k.defaults,c));!c.positions||"marker"in
c||(c.marker=h.marker,delete h.marker);!c.marker||"positions"in c||(c.positions=h.positions,delete h.positions);var B=0,A=0;d(h,c,[{snap:!0,size:function(a,b){null==a&&(a=k.defaults.size);B+=a&&a.length?1:0;return a},borderSize:function(a,b){null==a&&(a=k.defaults.borderSize);B+=a&&a.length?1:0;return a},opacity:parseFloat,color:function(b,c){null==b&&(b=k.defaults.color);b=a.updateColor(b);A++;return b},borderColor:function(b,c){null==b&&(b=k.defaults.borderColor);b=a.updateColor(b);A++;return b},
bounds:function(a,b,c){"range"in c||(c.range=null);return a},positions:function(a,c,d){var f=c.snap,h=c.positionBuffer,k=c.positionFractBuffer,n=c.selectionBuffer;if(a.x||a.y)return c.xAttr=a.x.length?{buffer:l.buffer(a.x),offset:0,stride:4,count:a.x.length}:{buffer:a.x.buffer,offset:4*a.x.offset||0,stride:4*(a.x.stride||1),count:a.x.count},c.yAttr=a.y.length?{buffer:l.buffer(a.y),offset:0,stride:4,count:a.y.length}:{buffer:a.y.buffer,offset:4*a.y.offset||0,stride:4*(a.y.stride||1),count:a.y.count},
c.count=Math.max(c.xAttr.count,c.yAttr.count),a;a=g(a,"float64");var m=c.count=Math.floor(a.length/2),t=c.bounds=m?e(a,2):null;d.range||c.range||(delete c.range,d.range=t);d.marker||c.marker||(delete c.marker,d.marker=null);f&&(!0===f||m>f)?c.tree=b(a,{bounds:t}):f&&f.length&&(c.tree=f);c.tree&&(d={primitive:"points",usage:"static",data:c.tree,type:"uint32"},c.elements?c.elements(d):c.elements=l.elements(d));h({data:v.float(a),usage:"dynamic"});k({data:v.fract(a),usage:"dynamic"});n({data:new Uint8Array(m),
type:"uint8",usage:"stream"});return a}},{marker:function(b,c,d){d=c.activation;d.forEach(function(a){return a&&a.destroy&&a.destroy()});d.length=0;if(b&&"number"!==typeof b[0]){for(var e=[],g=0,f=Math.min(b.length,c.count);g<f;g++){var h=a.addMarker(b[g]);e[h]||(e[h]=new Uint8Array(c.count));e[h][g]=1}for(c=0;c<e.length;c++)if(e[c]){g={data:e[c],type:"uint8",usage:"static"};if(d[c])d[c](g);else d[c]=l.buffer(g);d[c].data=e[c]}}else e=a.addMarker(b),d[e]=!0;return b},range:function(a,b,c){if(c=b.bounds)return a||
(a=c),b.scale=[1/(a[2]-a[0]),1/(a[3]-a[1])],b.translate=[-a[0],-a[1]],b.scaleFract=v.fract(b.scale),b.translateFract=v.fract(b.translate),a},viewport:function(a){return t(a||[u.drawingBufferWidth,u.drawingBufferHeight])}}]);if(B){var D=h;c=D.count;f=D.size;var C=D.borderSize;D=D.sizeBuffer;var G=new Uint8Array(2*c);if(f.length||C.length)for(var I=0;I<c;I++)G[2*I]=Math.round(255*(null==f[I]?f:f[I])/p),G[2*I+1]=Math.round(255*(null==C[I]?C:C[I])/p);D({data:G,usage:"dynamic"})}if(A){D=h;c=D.count;f=
D.color;C=D.borderColor;D=D.colorBuffer;if(a.tooManyColors){if(f.length||C.length){var E=new Uint8Array(8*c);for(G=0;G<c;G++)I=f[G],E[8*G]=y[4*I],E[8*G+1]=y[4*I+1],E[8*G+2]=y[4*I+2],E[8*G+3]=y[4*I+3],I=C[G],E[8*G+4]=y[4*I],E[8*G+5]=y[4*I+1],E[8*G+6]=y[4*I+2],E[8*G+7]=y[4*I+3]}}else if(f.length||C.length)for(E=new Uint8Array(4*c+2),G=0;G<c;G++)null!=f[G]&&(E[4*G]=f[G]%q,E[4*G+1]=Math.floor(f[G]/q)),null!=C[G]&&(E[4*G+2]=C[G]%q,E[4*G+3]=Math.floor(C[G]/q));D({data:E||new Uint8Array(0),type:"uint8",
usage:"dynamic"})}return h})}};k.prototype.addMarker=function(a){var b=this.markerTextures,c=this.regl,d=this.markerCache,e=null==a?0:d.indexOf(a);if(0<=e)return e;if(a instanceof Uint8Array||a instanceof Uint8ClampedArray)var g=a;else{g=new Uint8Array(a.length);e=0;for(var f=a.length;e<f;e++)g[e]=255*a[e]}f=Math.floor(Math.sqrt(g.length));e=b.length;d.push(a);b.push(c.texture({channels:1,data:g,radius:f,mag:"linear",min:"linear"}));return e};k.prototype.updateColor=function(a){var b=this.paletteIds,
c=this.palette,d=this.maxColors;Array.isArray(a)||(a=[a]);var e=[];if("number"===typeof a[0]){var g=[];if(Array.isArray(a))for(var k=0;k<a.length;k+=4)g.push(a.slice(k,k+4));else for(k=0;k<a.length;k+=4)g.push(a.subarray(k,k+4));a=g}for(g=0;g<a.length;g++){k=a[g];k=h(k,"uint8");var n=f(k,!1);if(null==b[n]){var m=c.length;b[n]=Math.floor(m/4);c[m]=k[0];c[m+1]=k[1];c[m+2]=k[2];c[m+3]=k[3]}e[g]=b[n]}!this.tooManyColors&&c.length>4*d&&(this.tooManyColors=!0);this.updatePalette(c);return 1===e.length?
e[0]:e};k.prototype.updatePalette=function(a){if(!this.tooManyColors){var b=this.maxColors,c=this.paletteTexture,d=Math.ceil(.25*a.length/b);if(1<d){a=a.slice();for(var e=.25*a.length%b;e<d*b;e++)a.push(0,0,0,0)}c.height<d&&c.resize(b,d);c.subimage({width:Math.min(.25*a.length,b),height:d,data:a},0,0)}};k.prototype.destroy=function(){this.groups.forEach(function(a){a.sizeBuffer.destroy();a.positionBuffer.destroy();a.positionFractBuffer.destroy();a.colorBuffer.destroy();a.activation.forEach(function(a){return a&&
a.destroy&&a.destroy()});a.selectionBuffer.destroy();a.elements&&a.elements.destroy()});this.groups.length=0;this.paletteTexture.destroy();this.markerTextures.forEach(function(a){return a&&a.destroy&&a.destroy()});return this};var q=a("object-assign");p.exports=function(a,b){a=new k(a,b);b=a.render.bind(a);q(b,{render:b,update:a.update.bind(a),draw:a.draw.bind(a),destroy:a.destroy.bind(a),regl:a.regl,gl:a.gl,canvas:a.gl.canvas,groups:a.groups,markers:a.markerCache,palette:a.palette});return b}},{"array-bounds":55,
"color-id":108,"color-normalize":110,"flatten-vertex-data":223,glslify:401,"is-iexplorer":411,"object-assign":446,"parse-rect":451,"pick-by-alias":457,"point-cluster":461,"to-float32":522,"update-diff":533}],485:[function(a,p,l){function m(a,b){if(!(this instanceof m))return new m(a,b);this.traces=[];this.passes={};this.regl=a;this.scatter=e(a);this.canvas=this.scatter.canvas}function k(a,b,d){b=a[b];var c=a[d];2<b.length?(a=b[1],b=b[3]):b.length?(a=b[0],b=b[1]):(a=b.y,b=b.y+b.height);2<c.length?
(d=c[0],c=c[2]):c.length?(d=c[0],c=c[1]):(d=c.x,c=c.x+c.width);return[d,a,c,b]}function h(a){if("number"===typeof a)return[a,a,a,a];if(2===a.length)return[a[0],a[1],a[0],a[1]];a=r(a);return[a.x,a.y,a.x+a.width,a.y+a.height]}var e=a("regl-scatter2d"),f=a("pick-by-alias"),b=a("array-bounds"),n=a("raf"),u=a("array-range"),r=a("parse-rect"),d=a("flatten-vertex-data");p.exports=m;m.prototype.render=function(){for(var a=this,b=[],d=arguments.length;d--;)b[d]=arguments[d];b.length&&this.update.apply(this,
b);if(this.regl.attributes.preserveDrawingBuffer)return this.draw();this.dirty?null==this.planned&&(this.planned=n(function(){a.draw();a.dirty=!0;a.planned=null})):(this.draw(),this.dirty=!0,n(function(){a.dirty=!1}));return this};m.prototype.update=function(){for(var a,b=[],d=arguments.length;d--;)b[d]=arguments[d];if(b.length){for(d=0;d<b.length;d++)this.updateItem(d,b[d]);this.traces=this.traces.filter(Boolean);b=[];for(var e=d=0;e<this.traces.length;e++){for(var f=this.traces[e],h=this.traces[e].passes,
k=0;k<h.length;k++)b.push(this.passes[h[k]]);f.passOffset=d;d+=f.passes.length}(a=this.scatter).update.apply(a,b);return this}};m.prototype.updateItem=function(a,c){var e=this.regl;if(null===c)return this.traces[a]=null,this;if(!c)return this;c=f(c,{data:"data items columns rows values dimensions samples x",snap:"snap cluster",size:"sizes size radius",color:"colors color fill fill-color fillColor",opacity:"opacity alpha transparency opaque",borderSize:"borderSizes borderSize border-size bordersize borderWidth borderWidths border-width borderwidth stroke-width strokeWidth strokewidth outline",
borderColor:"borderColors borderColor bordercolor stroke stroke-color strokeColor",marker:"markers marker shape",range:"range ranges databox dataBox",viewport:"viewport viewBox viewbox",domain:"domain domains area areas",padding:"pad padding paddings pads margin margins",transpose:"transpose transposed",diagonal:"diagonal diag showDiagonal",upper:"upper up top upperhalf upperHalf showupperhalf showUpper showUpperHalf",lower:"lower low bottom lowerhalf lowerHalf showlowerhalf showLowerHalf showLower"});
a=this.traces[a]||(this.traces[a]={id:a,buffer:e.buffer({usage:"dynamic",type:"float",data:new Uint8Array}),color:"black",marker:null,size:12,borderColor:"transparent",borderSize:1,viewport:r([e._gl.drawingBufferWidth,e._gl.drawingBufferHeight]),padding:[0,0,0,0],opacity:1,diagonal:!0,upper:!0,lower:!0});null!=c.color&&(a.color=c.color);null!=c.size&&(a.size=c.size);null!=c.marker&&(a.marker=c.marker);null!=c.borderColor&&(a.borderColor=c.borderColor);null!=c.borderSize&&(a.borderSize=c.borderSize);
null!=c.opacity&&(a.opacity=c.opacity);c.viewport&&(a.viewport=r(c.viewport));null!=c.diagonal&&(a.diagonal=c.diagonal);null!=c.upper&&(a.upper=c.upper);null!=c.lower&&(a.lower=c.lower);if(c.data)for(a.buffer(d(c.data)),a.columns=c.data.length,a.count=c.data[0].length,a.bounds=[],e=0;e<a.columns;e++)a.bounds[e]=b(c.data[e],1);if(c.range){a.range=c.range;var g=a.range&&"number"!==typeof a.range[0]}c.domain&&(a.domain=c.domain);e=!1;null!=c.padding&&(Array.isArray(c.padding)&&c.padding.length===a.columns&&
"number"===typeof c.padding[c.padding.length-1]?(a.padding=c.padding.map(h),e=!0):a.padding=h(c.padding));var n=a.columns,m=a.count,u=a.viewport.width,l=a.viewport.height,p=a.viewport.x,q=a.viewport.y,P=u/n,J=l/n;a.passes=[];for(var E=0;E<n;E++)for(var H=0;H<n;H++)if(a.diagonal||H!==E)if(a.upper||!(E>H))if(a.lower||!(E<H)){var w=a.id;w=(null!=w.id?w.id:w)<<16|(E&255)<<8|H&255;var x=this.passes[w]||(this.passes[w]={});c.data&&(x.positions=c.transpose?{x:{buffer:a.buffer,offset:H,count:m,stride:n},
y:{buffer:a.buffer,offset:E,count:m,stride:n}}:{x:{buffer:a.buffer,offset:H*m,count:m},y:{buffer:a.buffer,offset:E*m,count:m}},x.bounds=k(a.bounds,E,H));if(c.domain||c.viewport||c.data){var I=e?k(a.padding,E,H):a.padding;if(a.domain){var Q=k(a.domain,E,H);x.viewport=[p+Q[0]*u+I[0],q+Q[1]*l+I[1],p+Q[2]*u-I[2],q+Q[3]*l-I[3]]}else x.viewport=[p+H*P+P*I[0],q+E*J+J*I[1],p+(H+1)*P-P*I[2],q+(E+1)*J-J*I[3]]}c.color&&(x.color=a.color);c.size&&(x.size=a.size);c.marker&&(x.marker=a.marker);c.borderSize&&(x.borderSize=
a.borderSize);c.borderColor&&(x.borderColor=a.borderColor);c.opacity&&(x.opacity=a.opacity);c.range&&(x.range=g?k(a.range,E,H):a.range||x.bounds);a.passes.push(w)}return this};m.prototype.draw=function(){for(var a,b=[],d=arguments.length;d--;)b[d]=arguments[d];if(b.length){var e=[];for(d=0;d<b.length;d++)if("number"===typeof b[d]){var f=this.traces[b[d]],h=f.passOffset;e.push.apply(e,u(h,h+f.passes.length))}else if(b[d].length){var k=b[d];f=this.traces[d];h=f.passes;var n=f.passOffset;h=h.map(function(a,
b){e[n+b]=k})}(a=this.scatter).draw.apply(a,e)}else this.scatter.draw();return this};m.prototype.destroy=function(){this.traces.forEach(function(a){a.buffer&&a.buffer.destroy&&a.buffer.destroy()});this.passes=this.traces=null;this.scatter.destroy();return this}},{"array-bounds":55,"array-range":57,"flatten-vertex-data":223,"parse-rect":451,"pick-by-alias":457,raf:476,"regl-scatter2d":484}],486:[function(a,p,l){(function(a,k){"object"===typeof l&&"undefined"!==typeof p?p.exports=k():a.createREGL=k()})(this,
function(){function a(a,b){this.id=ja++;this.type=a;this.data=b}function k(a){if(0===a.length)return[];var b=a.charAt(0),c=a.charAt(a.length-1);if(1<a.length&&b===c&&('"'===b||"'"===b))return['"'+a.substr(1,a.length-2).replace(/\\/g,"\\\\").replace(/"/g,'\\"')+'"'];if(b=/\[(false|true|null|\d+|'[^']*'|"[^"]*")\]/.exec(a))return k(a.substr(0,b.index)).concat(k(b[1])).concat(k(a.substr(b.index+b[0].length)));b=a.split(".");if(1===b.length)return['"'+a.replace(/\\/g,"\\\\").replace(/"/g,'\\"')+'"'];
a=[];for(c=0;c<b.length;++c)a=a.concat(k(b[c]));return a}function h(a){return"["+k(a).join("][")+"]"}function e(){var a={"":0},b=[""];return{id:function(c){var d=a[c];if(d)return d;d=a[c]=b.length;b.push(c);return d},str:function(a){return b[a]}}}function f(a,b,c){function d(){var b=window.innerWidth,d=window.innerHeight;a!==document.body&&(d=a.getBoundingClientRect(),b=d.right-d.left,d=d.bottom-d.top);e.width=c*b;e.height=c*d;K(e.style,{width:b+"px",height:d+"px"})}var e=document.createElement("canvas");
K(e.style,{border:0,margin:0,padding:0,top:0,left:0});a.appendChild(e);a===document.body&&(e.style.position="absolute",K(a.style,{margin:0,padding:0}));window.addEventListener("resize",d,!1);d();return{canvas:e,onDestroy:function(){window.removeEventListener("resize",d);a.removeChild(e)}}}function b(a,b){function c(c){try{return a.getContext(c,b)}catch(Ha){return null}}return c("webgl")||c("experimental-webgl")||c("webgl-experimental")}function n(a){return"string"===typeof a?a.split():a}function u(a){return"string"===
typeof a?document.querySelector(a):a}function r(a){var c=a||{},d,e,g,h;a={};var k=[],m=[],t="undefined"===typeof window?1:window.devicePixelRatio,r=!1,v=function(a){},l=function(){};"string"===typeof c?d=document.querySelector(c):"object"===typeof c&&("string"===typeof c.nodeName&&"function"===typeof c.appendChild&&"function"===typeof c.getBoundingClientRect?d=c:"function"===typeof c.drawArrays||"function"===typeof c.drawElements?(h=c,g=h.canvas):("gl"in c?h=c.gl:"canvas"in c?g=u(c.canvas):"container"in
c&&(e=u(c.container)),"attributes"in c&&(a=c.attributes),"extensions"in c&&(k=n(c.extensions)),"optionalExtensions"in c&&(m=n(c.optionalExtensions)),"onDone"in c&&(v=c.onDone),"profile"in c&&(r=!!c.profile),"pixelRatio"in c&&(t=+c.pixelRatio)));d&&("canvas"===d.nodeName.toLowerCase()?g=d:e=d);if(!h){if(!g){d=f(e||document.body,v,t);if(!d)return null;g=d.canvas;l=d.onDestroy}h=b(g,a)}return h?{gl:h,canvas:g,container:e,extensions:k,optionalExtensions:m,pixelRatio:t,profile:r,onDone:v,onDestroy:l}:
(l(),v("webgl not supported, try upgrading your browser or graphics drivers http://get.webgl.org"),null)}function d(a,b){function c(b){b=b.toLowerCase();try{var c=d[b]=a.getExtension(b)}catch(Sb){}return!!c}for(var d={},e=0;e<b.extensions.length;++e){var g=b.extensions[e];if(!c(g))return b.onDestroy(),b.onDone('"'+g+'" extension is not supported by the current WebGL context, try upgrading your system or a different browser'),null}b.optionalExtensions.forEach(c);return{extensions:d,restore:function(){Object.keys(d).forEach(function(a){if(d[a]&&
!c(a))throw Error("(regl): error restoring extension "+a);})}}}function g(a,b){for(var c=Array(a),d=0;d<a;++d)c[d]=b(d);return c}function c(a){var b=(65535<a)<<4;a>>>=b;var c=(255<a)<<3;a>>>=c;b|=c;c=(15<a)<<2;a>>>=c;b|=c;c=(3<a)<<1;return b|c|a>>>c>>1}function v(){function a(a){a:{for(var b=16;268435456>=b;b*=16)if(a<=b){a=b;break a}a=0}b=d[c(a)>>2];return 0<b.length?b.pop():new ArrayBuffer(a)}function b(a){d[c(a.byteLength)>>2].push(a)}var d=g(8,function(){return[]});return{alloc:a,free:b,allocType:function(b,
c){switch(b){case 5120:b=new Int8Array(a(c),0,c);break;case 5121:b=new Uint8Array(a(c),0,c);break;case 5122:b=new Int16Array(a(2*c),0,c);break;case 5123:b=new Uint16Array(a(2*c),0,c);break;case 5124:b=new Int32Array(a(4*c),0,c);break;case 5125:b=new Uint32Array(a(4*c),0,c);break;case 5126:b=new Float32Array(a(4*c),0,c);break;default:return null}return b.length!==c?b.subarray(0,c):b},freeType:function(a){b(a.buffer)}}}function t(a){return!!a&&"object"===typeof a&&Array.isArray(a.shape)&&Array.isArray(a.stride)&&
"number"===typeof a.offset&&a.shape.length===a.stride.length&&(Array.isArray(a.data)||aa(a.data))}function l(a,b,c,d,e,g){for(var f=0;f<b;++f)for(var h=a[f],k=0;k<c;++k)for(var n=h[k],m=0;m<d;++m)e[g++]=n[m]}function p(a,b,c,d,e){for(var g=1,f=c+1;f<b.length;++f)g*=b[f];var h=b[c];if(4===b.length-c){var k=b[c+1],n=b[c+2];b=b[c+3];for(f=0;f<h;++f)l(a[f],k,n,b,d,e),e+=g}else for(f=0;f<h;++f)p(a[f],b,c+1,d,e),e+=g}function q(a){return va[Object.prototype.toString.call(a)]|0}function G(a,b){for(var c=
0;c<b.length;++c)a[c]=b[c]}function A(a,b,c,d,e,g,f){for(var h=0,k=0;k<c;++k)for(var n=0;n<d;++n)a[h++]=b[e*k+g*n+f]}function C(a,b,c,d){function e(b){this.id=k++;this.buffer=a.createBuffer();this.type=b;this.usage=35044;this.byteLength=0;this.dimension=1;this.dtype=5121;this.persistentData=null;c.profile&&(this.stats={size:0})}function g(b,c,d){b.byteLength=c.byteLength;a.bufferData(b.type,c,d)}function f(a,b,c,d,e,f){a.usage=c;if(Array.isArray(b)){if(a.dtype=d||5126,0<b.length)if(Array.isArray(b[0])){e=
Ja(b);for(var h=d=1;h<e.length;++h)d*=e[h];a.dimension=d;b=Ga(b,e,a.dtype);g(a,b,c);f?a.persistentData=b:wa.freeType(b)}else"number"===typeof b[0]?(a.dimension=e,e=wa.allocType(a.dtype,b.length),G(e,b),g(a,e,c),f?a.persistentData=e:wa.freeType(e)):aa(b[0])&&(a.dimension=b[0].length,a.dtype=d||q(b[0])||5126,b=Ga(b,[b.length,b[0].length],a.dtype),g(a,b,c),f?a.persistentData=b:wa.freeType(b))}else if(aa(b))a.dtype=d||q(b),a.dimension=e,g(a,b,c),f&&(a.persistentData=new Uint8Array(new Uint8Array(b.buffer)));
else if(t(b)){e=b.shape;var k=b.stride;h=b.offset;var n=0,m=0,r=0,v=0;1===e.length?(n=e[0],m=1,r=k[0],v=0):2===e.length&&(n=e[0],m=e[1],r=k[0],v=k[1]);a.dtype=d||q(b.data)||5126;a.dimension=m;e=wa.allocType(a.dtype,n*m);A(e,b.data,n,m,r,v,h);g(a,e,c);f?a.persistentData=e:wa.freeType(e)}}function h(c){b.bufferCount--;for(var e=0;e<d.state.length;++e){var g=d.state[e];g.buffer===c&&(a.disableVertexAttribArray(e),g.buffer=null)}a.deleteBuffer(c.buffer);c.buffer=null;delete n[c.id]}var k=0,n={};e.prototype.bind=
function(){a.bindBuffer(this.type,this.buffer)};e.prototype.destroy=function(){h(this)};var m=[];c.profile&&(b.getTotalBufferSize=function(){var a=0;Object.keys(n).forEach(function(b){a+=n[b].stats.size});return a});return{create:function(d,g,k,m){function r(b){var d=35044,e=null,g=0,h=0,k=1;Array.isArray(b)||aa(b)||t(b)?e=b:"number"===typeof b?g=b|0:b&&("data"in b&&(e=b.data),"usage"in b&&(d=Ca[b.usage]),"type"in b&&(h=sa[b.type]),"dimension"in b&&(k=b.dimension|0),"length"in b&&(g=b.length|0));
v.bind();e?f(v,e,d,h,k,m):(g&&a.bufferData(v.type,g,d),v.dtype=h||5121,v.usage=d,v.dimension=k,v.byteLength=g);c.profile&&(v.stats.size=v.byteLength*oa[v.dtype]);return r}b.bufferCount++;var v=new e(g);n[v.id]=v;k||r(d);r._reglType="buffer";r._buffer=v;r.subdata=function(b,c){c=(c||0)|0;v.bind();if(aa(b))a.bufferSubData(v.type,c,b);else if(Array.isArray(b)){if(0<b.length)if("number"===typeof b[0]){var d=wa.allocType(v.dtype,b.length);G(d,b);a.bufferSubData(v.type,c,d);wa.freeType(d)}else if(Array.isArray(b[0])||
aa(b[0])){var e=Ja(b);d=Ga(b,e,v.dtype);a.bufferSubData(v.type,c,d);wa.freeType(d)}}else if(t(b)){e=b.shape;var g=b.stride,f=d=0,h=0,k=0;1===e.length?(d=e[0],f=1,h=g[0],k=0):2===e.length&&(d=e[0],f=e[1],h=g[0],k=g[1]);e=Array.isArray(b.data)?v.dtype:q(b.data);e=wa.allocType(e,d*f);A(e,b.data,d,f,h,k,b.offset);a.bufferSubData(v.type,c,e);wa.freeType(e)}return r};c.profile&&(r.stats=v.stats);r.destroy=function(){h(v)};return r},createStream:function(a,b){var c=m.pop();c||(c=new e(a));c.bind();f(c,b,
35040,0,1,!1);return c},destroyStream:function(a){m.push(a)},clear:function(){ma(n).forEach(h);m.forEach(h)},getBuffer:function(a){return a&&a._buffer instanceof e?a._buffer:null},restore:function(){ma(n).forEach(function(b){b.buffer=a.createBuffer();a.bindBuffer(b.type,b.buffer);a.bufferData(b.type,b.persistentData||b.byteLength,b.usage)})},_initBuffer:f}}function P(a,b,c,d){function e(a){this.id=k++;h[this.id]=this;this.buffer=a;this.primType=4;this.type=this.vertCount=0}function g(d,e,g,f,h,k,
n){d.buffer.bind();if(e){var m=n;n||aa(e)&&(!t(e)||aa(e.data))||(m=b.oes_element_index_uint?5125:5123);c._initBuffer(d.buffer,e,g,m,3)}else a.bufferData(34963,k,g),d.buffer.dtype=m||5121,d.buffer.usage=g,d.buffer.dimension=3,d.buffer.byteLength=k;m=n;if(!n){switch(d.buffer.dtype){case 5121:case 5120:m=5121;break;case 5123:case 5122:m=5123;break;case 5125:case 5124:m=5125}d.buffer.dtype=m}d.type=m;e=h;0>e&&(e=d.buffer.byteLength,5123===m?e>>=1:5125===m&&(e>>=2));d.vertCount=e;e=f;0>f&&(e=4,f=d.buffer.dimension,
1===f&&(e=0),2===f&&(e=1),3===f&&(e=4));d.primType=e}function f(a){d.elementsCount--;delete h[a.id];a.buffer.destroy();a.buffer=null}var h={},k=0,n={uint8:5121,uint16:5123};b.oes_element_index_uint&&(n.uint32=5125);e.prototype.bind=function(){this.buffer.bind()};var m=[];return{create:function(a,b){function h(a){if(a)if("number"===typeof a)k(a),m.primType=4,m.vertCount=a|0,m.type=5121;else{var b=null,c=35044,d=-1,e=-1,f=0,r=0;if(Array.isArray(a)||aa(a)||t(a))b=a;else if("data"in a&&(b=a.data),"usage"in
a&&(c=Ca[a.usage]),"primitive"in a&&(d=Ea[a.primitive]),"count"in a&&(e=a.count|0),"type"in a&&(r=n[a.type]),"length"in a)f=a.length|0;else if(f=e,5123===r||5122===r)f*=2;else if(5125===r||5124===r)f*=4;g(m,b,c,d,e,f,r)}else k(),m.primType=4,m.vertCount=0,m.type=5121;return h}var k=c.create(null,34963,!0),m=new e(k._buffer);d.elementsCount++;h(a);h._reglType="elements";h._elements=m;h.subdata=function(a,b){k.subdata(a,b);return h};h.destroy=function(){f(m)};return h},createStream:function(a){var b=
m.pop();b||(b=new e(c.create(null,34963,!0,!1)._buffer));g(b,a,35040,-1,-1,0,0);return b},destroyStream:function(a){m.push(a)},getElements:function(a){return"function"===typeof a&&a._elements instanceof e?a._elements:null},clear:function(){ma(h).forEach(f)}}}function J(a){for(var b=wa.allocType(5123,a.length),c=0;c<a.length;++c)if(isNaN(a[c]))b[c]=65535;else if(Infinity===a[c])b[c]=31744;else if(-Infinity===a[c])b[c]=64512;else{na[0]=a[c];var d=ua[0],e=d>>>31<<15,g=(d<<1>>>24)-127;d=d>>13&1023;b[c]=
-24>g?e:-14>g?e+(d+1024>>-14-g):15<g?e+31744:e+(g+15<<10)+d}return b}function E(a){return Array.isArray(a)||aa(a)}function H(a){return"[object "+a+"]"}function w(a){return Array.isArray(a)&&(0===a.length||"number"===typeof a[0])}function x(a){return Array.isArray(a)&&0!==a.length&&E(a[0])?!0:!1}function I(a){return Object.prototype.toString.call(a)}function Q(a){if(!a)return!1;var b=I(a);return 0<=Cb.indexOf(b)?!0:w(a)||x(a)||t(a)}function N(a,b){36193===a.type?(a.data=J(b),wa.freeType(b)):a.data=
b}function L(a,b,c,d,e,g){a="undefined"!==typeof Ta[a]?Ta[a]:Pa[a]*eb[b];g&&(a*=6);if(e){for(d=0;1<=c;)d+=a*c*c,c/=2;return d}return a*c*d}function R(a,b,c,d,e,g,f){function h(){this.format=this.internalformat=6408;this.type=5121;this.flipY=this.premultiplyAlpha=this.compressed=!1;this.unpackAlignment=1;this.colorSpace=37444;this.channels=this.height=this.width=0}function k(a,b){a.internalformat=b.internalformat;a.format=b.format;a.type=b.type;a.compressed=b.compressed;a.premultiplyAlpha=b.premultiplyAlpha;
a.flipY=b.flipY;a.unpackAlignment=b.unpackAlignment;a.colorSpace=b.colorSpace;a.width=b.width;a.height=b.height;a.channels=b.channels}function n(a,b){if("object"===typeof b&&b){"premultiplyAlpha"in b&&(a.premultiplyAlpha=b.premultiplyAlpha);"flipY"in b&&(a.flipY=b.flipY);"alignment"in b&&(a.unpackAlignment=b.alignment);"colorSpace"in b&&(a.colorSpace=z[b.colorSpace]);"type"in b&&(a.type=S[b.type]);var c=a.width,d=a.height,e=a.channels,g=!1;"shape"in b?(c=b.shape[0],d=b.shape[1],3===b.shape.length&&
(e=b.shape[2],g=!0)):("radius"in b&&(c=d=b.radius),"width"in b&&(c=b.width),"height"in b&&(d=b.height),"channels"in b&&(e=b.channels,g=!0));a.width=c|0;a.height=d|0;a.channels=e|0;c=!1;"format"in b&&(c=b.format,d=a.internalformat=W[c],a.format=ba[d],c in S&&!("type"in b)&&(a.type=S[c]),c in fa&&(a.compressed=!0),c=!0);!g&&c?a.channels=Pa[a.format]:g&&!c&&a.channels!==X[a.format]&&(a.format=a.internalformat=X[a.channels])}}function m(b){a.pixelStorei(37440,b.flipY);a.pixelStorei(37441,b.premultiplyAlpha);
a.pixelStorei(37443,b.colorSpace);a.pixelStorei(3317,b.unpackAlignment)}function r(){h.call(this);this.yOffset=this.xOffset=0;this.data=null;this.needsFree=!1;this.element=null;this.needsCopy=!1}function v(a,b){var c=null;Q(b)?c=b:b&&(n(a,b),"x"in b&&(a.xOffset=b.x|0),"y"in b&&(a.yOffset=b.y|0),Q(b.data)&&(c=b.data));if(b.copy){b=e.viewportWidth;var d=e.viewportHeight;a.width=a.width||b-a.xOffset;a.height=a.height||d-a.yOffset;a.needsCopy=!0}else if(!c)a.width=a.width||1,a.height=a.height||1,a.channels=
a.channels||4;else if(aa(c))a.channels=a.channels||4,a.data=c,"type"in b||5121!==a.type||(a.type=va[Object.prototype.toString.call(c)]|0);else if(w(c)){a.channels=a.channels||4;b=c;d=b.length;switch(a.type){case 5121:case 5123:case 5125:case 5126:d=wa.allocType(a.type,d);d.set(b);a.data=d;break;case 36193:a.data=J(b)}a.alignment=1;a.needsFree=!0}else if(t(c)){b=c.data;Array.isArray(b)||5121!==a.type||(a.type=va[Object.prototype.toString.call(b)]|0);d=c.shape;var g=c.stride,f,h;3===d.length?(f=d[2],
h=g[2]):h=f=1;var k=d[0];var m=d[1];d=g[0];g=g[1];a.alignment=1;a.width=k;a.height=m;a.channels=f;a.format=a.internalformat=X[f];a.needsFree=!0;k=h;c=c.offset;f=a.width;h=a.height;m=a.channels;for(var r=wa.allocType(36193===a.type?5126:a.type,f*h*m),v=0,u=0;u<h;++u)for(var l=0;l<f;++l)for(var p=0;p<m;++p)r[v++]=b[d*l+g*u+k*p+c];N(a,r)}else if(I(c)===Ba||I(c)===Ia)I(c)===Ba?a.element=c:a.element=c.canvas,a.width=a.element.width,a.height=a.element.height,a.channels=4;else if(I(c)===Ka)a.element=c,a.width=
c.width,a.height=c.height,a.channels=4;else if(I(c)===Ua)a.element=c,a.width=c.naturalWidth,a.height=c.naturalHeight,a.channels=4;else if(I(c)===Ya)a.element=c,a.width=c.videoWidth,a.height=c.videoHeight,a.channels=4;else if(x(c)){b=a.width||c[0].length;d=a.height||c.length;g=a.channels;g=E(c[0][0])?g||c[0][0].length:g||1;k=Aa.shape(c);f=1;for(h=0;h<k.length;++h)f*=k[h];f=wa.allocType(36193===a.type?5126:a.type,f);Aa.flatten(c,k,"",f);N(a,f);a.alignment=1;a.width=b;a.height=d;a.channels=g;a.format=
a.internalformat=X[g];a.needsFree=!0}}function u(b,c,e,g,f){var h=b.element,k=b.data,n=b.internalformat,t=b.format,r=b.type,v=b.width,u=b.height;m(b);h?a.texSubImage2D(c,f,e,g,t,r,h):b.compressed?a.compressedTexSubImage2D(c,f,e,g,n,v,u,k):b.needsCopy?(d(),a.copyTexSubImage2D(c,f,e,g,b.xOffset,b.yOffset,v,u)):a.texSubImage2D(c,f,e,g,v,u,t,r,k)}function l(){return na.pop()||new r}function p(a){a.needsFree&&wa.freeType(a.data);r.call(a);na.push(a)}function q(){h.call(this);this.genMipmaps=!1;this.mipmapHint=
4352;this.mipmask=0;this.images=Array(16)}function y(a,b,c){var d=a.images[0]=l();a.mipmask=1;d.width=a.width=b;d.height=a.height=c;d.channels=a.channels=4}function B(a,b){if(Q(b)){var c=a.images[0]=l();k(c,a);v(c,b);a.mipmask=1}else if(n(a,b),Array.isArray(b.mipmap)){b=b.mipmap;for(var d=0;d<b.length;++d)c=a.images[d]=l(),k(c,a),c.width>>=d,c.height>>=d,v(c,b[d]),a.mipmask|=1<<d}else c=a.images[0]=l(),k(c,a),v(c,b),a.mipmask=1;k(a,a.images[0])}function A(b,c){b=b.images;for(var e=0;e<b.length&&b[e];++e){var g=
b[e],f=c,h=e,k=g.element,n=g.data,t=g.internalformat,r=g.format,v=g.type,u=g.width,l=g.height,p=g.channels;m(g);k?a.texImage2D(f,h,r,r,v,k):g.compressed?a.compressedTexImage2D(f,h,t,u,l,0,n):g.needsCopy?(d(),a.copyTexImage2D(f,h,r,g.xOffset,g.yOffset,u,l,0)):((g=!n)&&(n=wa.zero.allocType(v,u*l*p)),a.texImage2D(f,h,r,u,l,0,r,v,n),g&&n&&wa.zero.freeType(n))}}function D(){var a=pa.pop()||new q;h.call(a);for(var b=a.mipmask=0;16>b;++b)a.images[b]=null;return a}function C(a){for(var b=a.images,c=0;c<b.length;++c)b[c]&&
p(b[c]),b[c]=null;pa.push(a)}function G(){this.magFilter=this.minFilter=9728;this.wrapT=this.wrapS=33071;this.anisotropic=1;this.genMipmaps=!1;this.mipmapHint=4352}function P(a,b){"min"in b&&(a.minFilter=ia[b.min],0<=Fa.indexOf(a.minFilter)&&!("faces"in b)&&(a.genMipmaps=!0));"mag"in b&&(a.magFilter=Y[b.mag]);var c=a.wrapS,d=a.wrapT;if("wrap"in b){var e=b.wrap;"string"===typeof e?c=d=U[e]:Array.isArray(e)&&(c=U[e[0]],d=U[e[1]])}else"wrapS"in b&&(c=U[b.wrapS]),"wrapT"in b&&(d=U[b.wrapT]);a.wrapS=c;
a.wrapT=d;"anisotropic"in b&&(a.anisotropic=b.anisotropic);if("mipmap"in b){c=!1;switch(typeof b.mipmap){case "string":a.mipmapHint=T[b.mipmap];c=a.genMipmaps=!0;break;case "boolean":c=a.genMipmaps=b.mipmap;break;case "object":a.genMipmaps=!1,c=!0}!c||"min"in b||(a.minFilter=9984)}}function H(c,d){a.texParameteri(d,10241,c.minFilter);a.texParameteri(d,10240,c.magFilter);a.texParameteri(d,10242,c.wrapS);a.texParameteri(d,10243,c.wrapT);b.ext_texture_filter_anisotropic&&a.texParameteri(d,34046,c.anisotropic);
c.genMipmaps&&(a.hint(33170,c.mipmapHint),a.generateMipmap(d))}function M(b){h.call(this);this.mipmask=0;this.internalformat=6408;this.id=sa++;this.refCount=1;this.target=b;this.texture=a.createTexture();this.unit=-1;this.bindCount=0;this.texInfo=new G;f.profile&&(this.stats={size:0})}function R(b){a.activeTexture(33984);a.bindTexture(b.target,b.texture)}function O(){var b=oa[0];b?a.bindTexture(b.target,b.texture):a.bindTexture(3553,null)}function ca(b){var c=b.texture,d=b.unit,e=b.target;0<=d&&(a.activeTexture(33984+
d),a.bindTexture(e,null),oa[d]=null);a.deleteTexture(c);b.texture=null;b.params=null;b.pixels=null;b.refCount=0;delete ua[b.id];g.textureCount--}var T={"don't care":4352,"dont care":4352,nice:4354,fast:4353},U={repeat:10497,clamp:33071,mirror:33648},Y={nearest:9728,linear:9729},ia=K({mipmap:9987,"nearest mipmap nearest":9984,"linear mipmap nearest":9985,"nearest mipmap linear":9986,"linear mipmap linear":9987},Y),z={none:0,browser:37444},S={uint8:5121,rgba4:32819,rgb565:33635,"rgb5 a1":32820},W={alpha:6406,
luminance:6409,"luminance alpha":6410,rgb:6407,rgba:6408,rgba4:32854,"rgb5 a1":32855,rgb565:36194},fa={};b.ext_srgb&&(W.srgb=35904,W.srgba=35906);b.oes_texture_float&&(S.float32=S["float"]=5126);b.oes_texture_half_float&&(S.float16=S["half float"]=36193);b.webgl_depth_texture&&(K(W,{depth:6402,"depth stencil":34041}),K(S,{uint16:5123,uint32:5125,"depth stencil":34042}));b.webgl_compressed_texture_s3tc&&K(fa,{"rgb s3tc dxt1":33776,"rgba s3tc dxt1":33777,"rgba s3tc dxt3":33778,"rgba s3tc dxt5":33779});
b.webgl_compressed_texture_atc&&K(fa,{"rgb atc":35986,"rgba atc explicit alpha":35987,"rgba atc interpolated alpha":34798});b.webgl_compressed_texture_pvrtc&&K(fa,{"rgb pvrtc 4bppv1":35840,"rgb pvrtc 2bppv1":35841,"rgba pvrtc 4bppv1":35842,"rgba pvrtc 2bppv1":35843});b.webgl_compressed_texture_etc1&&(fa["rgb etc1"]=36196);var ha=Array.prototype.slice.call(a.getParameter(34467));Object.keys(fa).forEach(function(a){var b=fa[a];0<=ha.indexOf(b)&&(W[a]=b)});var ea=Object.keys(W);c.textureFormats=ea;var qa=
[];Object.keys(W).forEach(function(a){qa[W[a]]=a});var da=[];Object.keys(S).forEach(function(a){da[S[a]]=a});var la=[];Object.keys(Y).forEach(function(a){la[Y[a]]=a});var F=[];Object.keys(ia).forEach(function(a){F[ia[a]]=a});var Z=[];Object.keys(U).forEach(function(a){Z[U[a]]=a});var ba=ea.reduce(function(a,b){var c=W[b];6409===c||6406===c||6409===c||6410===c||6402===c||34041===c?a[c]=c:32855===c||0<=b.indexOf("rgba")?a[c]=6408:a[c]=6407;return a},{}),na=[],pa=[],sa=0,ua={},Ca=c.maxTextureUnits,oa=
Array(Ca).map(function(){return null});K(M.prototype,{bind:function(){this.bindCount+=1;var b=this.unit;if(0>b){for(var c=0;c<Ca;++c){var d=oa[c];if(d){if(0<d.bindCount)continue;d.unit=-1}oa[c]=this;b=c;break}f.profile&&g.maxTextureUnits<b+1&&(g.maxTextureUnits=b+1);this.unit=b;a.activeTexture(33984+b);a.bindTexture(this.target,this.texture)}return b},unbind:function(){--this.bindCount},decRef:function(){0>=--this.refCount&&ca(this)}});f.profile&&(g.getTotalTextureSize=function(){var a=0;Object.keys(ua).forEach(function(b){a+=
ua[b].stats.size});return a});return{create2D:function(b,c){function d(a,b){var c=e.texInfo;G.call(c);var g=D();"number"===typeof a?"number"===typeof b?y(g,a|0,b|0):y(g,a|0,a|0):a?(P(c,a),B(g,a)):y(g,1,1);c.genMipmaps&&(g.mipmask=(g.width<<1)-1);e.mipmask=g.mipmask;k(e,g);e.internalformat=g.internalformat;d.width=g.width;d.height=g.height;R(e);A(g,3553);H(c,3553);O();C(g);f.profile&&(e.stats.size=L(e.internalformat,e.type,g.width,g.height,c.genMipmaps,!1));d.format=qa[e.internalformat];d.type=da[e.type];
d.mag=la[c.magFilter];d.min=F[c.minFilter];d.wrapS=Z[c.wrapS];d.wrapT=Z[c.wrapT];return d}var e=new M(3553);ua[e.id]=e;g.textureCount++;d(b,c);d.subimage=function(a,b,c,g){b|=0;c|=0;g|=0;var f=l();k(f,e);f.width=0;f.height=0;v(f,a);f.width=f.width||(e.width>>g)-b;f.height=f.height||(e.height>>g)-c;R(e);u(f,3553,b,c,g);O();p(f);return d};d.resize=function(b,c){b|=0;c=c|0||b;if(b===e.width&&c===e.height)return d;d.width=e.width=b;d.height=e.height=c;R(e);for(var g,h=e.channels,k=e.type,n=0;e.mipmask>>
n;++n){var m=b>>n,t=c>>n;if(!m||!t)break;g=wa.zero.allocType(k,m*t*h);a.texImage2D(3553,n,e.format,m,t,0,e.format,e.type,g);g&&wa.zero.freeType(g)}O();f.profile&&(e.stats.size=L(e.internalformat,e.type,b,c,!1,!1));return d};d._reglType="texture2d";d._texture=e;f.profile&&(d.stats=e.stats);d.destroy=function(){e.decRef()};return d},createCube:function(b,c,d,e,h,m){function t(a,b,c,d,e,g){var h,m=r.texInfo;G.call(m);for(h=0;6>h;++h)q[h]=D();if("number"===typeof a||!a)for(a=a|0||1,h=0;6>h;++h)y(q[h],
a,a);else if("object"===typeof a)if(b)B(q[0],a),B(q[1],b),B(q[2],c),B(q[3],d),B(q[4],e),B(q[5],g);else if(P(m,a),n(r,a),"faces"in a)for(a=a.faces,h=0;6>h;++h)k(q[h],r),B(q[h],a[h]);else for(h=0;6>h;++h)B(q[h],a);k(r,q[0]);r.mipmask=m.genMipmaps?(q[0].width<<1)-1:q[0].mipmask;r.internalformat=q[0].internalformat;t.width=q[0].width;t.height=q[0].height;R(r);for(h=0;6>h;++h)A(q[h],34069+h);H(m,34067);O();f.profile&&(r.stats.size=L(r.internalformat,r.type,t.width,t.height,m.genMipmaps,!0));t.format=qa[r.internalformat];
t.type=da[r.type];t.mag=la[m.magFilter];t.min=F[m.minFilter];t.wrapS=Z[m.wrapS];t.wrapT=Z[m.wrapT];for(h=0;6>h;++h)C(q[h]);return t}var r=new M(34067);ua[r.id]=r;g.cubeCount++;var q=Array(6);t(b,c,d,e,h,m);t.subimage=function(a,b,c,d,e){c|=0;d|=0;e|=0;var g=l();k(g,r);g.width=0;g.height=0;v(g,b);g.width=g.width||(r.width>>e)-c;g.height=g.height||(r.height>>e)-d;R(r);u(g,34069+a,c,d,e);O();p(g);return t};t.resize=function(b){b|=0;if(b!==r.width){t.width=r.width=b;t.height=r.height=b;R(r);for(var c=
0;6>c;++c)for(var d=0;r.mipmask>>d;++d)a.texImage2D(34069+c,d,r.format,b>>d,b>>d,0,r.format,r.type,null);O();f.profile&&(r.stats.size=L(r.internalformat,r.type,t.width,t.height,!1,!0));return t}};t._reglType="textureCube";t._texture=r;f.profile&&(t.stats=r.stats);t.destroy=function(){r.decRef()};return t},clear:function(){for(var b=0;b<Ca;++b)a.activeTexture(33984+b),a.bindTexture(3553,null),oa[b]=null;ma(ua).forEach(ca);g.cubeCount=0;g.textureCount=0},getTexture:function(a){return null},restore:function(){for(var b=
0;b<Ca;++b){var c=oa[b];c&&(c.bindCount=0,c.unit=-1,oa[b]=null)}ma(ua).forEach(function(b){b.texture=a.createTexture();a.bindTexture(b.target,b.texture);for(var c=0;32>c;++c)if(0!==(b.mipmask&1<<c))if(3553===b.target)a.texImage2D(3553,c,b.internalformat,b.width>>c,b.height>>c,0,b.internalformat,b.type,null);else for(var d=0;6>d;++d)a.texImage2D(34069+d,c,b.internalformat,b.width>>c,b.height>>c,0,b.internalformat,b.type,null);H(b.texInfo,b.target)})}}}function ca(a,b,c,d,e,g){function f(a,b,c){this.target=
a;this.texture=b;this.renderbuffer=c;var d=a=0;b?(a=b.width,d=b.height):c&&(a=c.width,d=c.height);this.width=a;this.height=d}function h(a){a&&(a.texture&&a.texture._texture.decRef(),a.renderbuffer&&a.renderbuffer._renderbuffer.decRef())}function k(a,b,c){a&&(a.texture?a.texture._texture.refCount+=1:a.renderbuffer._renderbuffer.refCount+=1)}function n(b,c){c&&(c.texture?a.framebufferTexture2D(36160,b,c.target,c.texture._texture.texture,0):a.framebufferRenderbuffer(36160,b,36161,c.renderbuffer._renderbuffer.renderbuffer))}
function m(a){var b=3553,c=null,d=null,e=a;"object"===typeof a&&(e=a.data,"target"in a&&(b=a.target|0));a=e._reglType;"texture2d"===a?c=e:"textureCube"===a?c=e:"renderbuffer"===a&&(d=e,b=36161);return new f(b,c,d)}function t(a,b,c,g,h){if(c)return a=d.create2D({width:a,height:b,format:g,type:h}),a._texture.refCount=0,new f(3553,a,null);a=e.create({width:a,height:b,format:g});a._renderbuffer.refCount=0;return new f(36161,null,a)}function r(a){return a&&(a.texture||a.renderbuffer)}function v(a,b,c){a&&
(a.texture?a.texture.resize(b,c):a.renderbuffer&&a.renderbuffer.resize(b,c),a.width=b,a.height=c)}function u(){this.id=G++;L[this.id]=this;this.framebuffer=a.createFramebuffer();this.height=this.width=0;this.colorAttachments=[];this.depthStencilAttachment=this.stencilAttachment=this.depthAttachment=null}function l(a){a.colorAttachments.forEach(h);h(a.depthAttachment);h(a.stencilAttachment);h(a.depthStencilAttachment)}function p(b){a.deleteFramebuffer(b.framebuffer);b.framebuffer=null;g.framebufferCount--;
delete L[b.id]}function q(b){var d;a.bindFramebuffer(36160,b.framebuffer);var e=b.colorAttachments;for(d=0;d<e.length;++d)n(36064+d,e[d]);for(d=e.length;d<c.maxColorAttachments;++d)a.framebufferTexture2D(36160,36064+d,3553,null,0);a.framebufferTexture2D(36160,33306,3553,null,0);a.framebufferTexture2D(36160,36096,3553,null,0);a.framebufferTexture2D(36160,36128,3553,null,0);n(36096,b.depthAttachment);n(36128,b.stencilAttachment);n(33306,b.depthStencilAttachment);a.checkFramebufferStatus(36160);a.isContextLost();
a.bindFramebuffer(36160,B.next?B.next.framebuffer:null);B.cur=B.next;a.getError()}function y(a,b){function c(a,b){var e=0,g=0,f=!0,h=!0;var n=null;var v=!0,u="rgba",p="uint8",y=1,B=null,C=null,G=null,L=!1;if("number"===typeof a)e=a|0,g=b|0||e;else if(a){"shape"in a?(g=a.shape,e=g[0],g=g[1]):("radius"in a&&(e=g=a.radius),"width"in a&&(e=a.width),"height"in a&&(g=a.height));if("color"in a||"colors"in a)n=a.color||a.colors,Array.isArray(n);if(!n){"colorCount"in a&&(y=a.colorCount|0);"colorTexture"in
a&&(v=!!a.colorTexture,u="rgba4");if("colorType"in a&&(p=a.colorType,!v))if("half float"===p||"float16"===p)u="rgba16f";else if("float"===p||"float32"===p)u="rgba32f";"colorFormat"in a&&(u=a.colorFormat,0<=A.indexOf(u)?v=!0:0<=D.indexOf(u)&&(v=!1))}if("depthTexture"in a||"depthStencilTexture"in a)L=!(!a.depthTexture&&!a.depthStencilTexture);"depth"in a&&("boolean"===typeof a.depth?f=a.depth:(B=a.depth,h=!1));"stencil"in a&&("boolean"===typeof a.stencil?h=a.stencil:(C=a.stencil,f=!1));"depthStencil"in
a&&("boolean"===typeof a.depthStencil?f=h=a.depthStencil:(G=a.depthStencil,h=f=!1))}else e=g=1;var I=b=null,E=null;if(Array.isArray(n))a=n.map(m);else if(n)a=[m(n)];else for(a=Array(y),n=0;n<y;++n)a[n]=t(e,g,v,u,p);e=e||a[0].width;g=g||a[0].height;B?b=m(B):f&&!h&&(b=t(e,g,L,"depth","uint32"));C?I=m(C):h&&!f&&(I=t(e,g,!1,"stencil","uint8"));G?E=m(G):!B&&!C&&h&&f&&(E=t(e,g,L,"depth stencil","depth stencil"));f=null;for(n=0;n<a.length;++n)k(a[n],e,g),a[n]&&a[n].texture&&(h=rb[a[n].texture._texture.format]*
mb[a[n].texture._texture.type],null===f&&(f=h));k(b,e,g);k(I,e,g);k(E,e,g);l(d);d.width=e;d.height=g;d.colorAttachments=a;d.depthAttachment=b;d.stencilAttachment=I;d.depthStencilAttachment=E;c.color=a.map(r);c.depth=r(b);c.stencil=r(I);c.depthStencil=r(E);c.width=d.width;c.height=d.height;q(d);return c}var d=new u;g.framebufferCount++;c(a,b);return K(c,{resize:function(a,b){a=Math.max(a|0,1);b=Math.max(b|0||a,1);if(a===d.width&&b===d.height)return c;for(var e=d.colorAttachments,g=0;g<e.length;++g)v(e[g],
a,b);v(d.depthAttachment,a,b);v(d.stencilAttachment,a,b);v(d.depthStencilAttachment,a,b);d.width=c.width=a;d.height=c.height=b;q(d);return c},_reglType:"framebuffer",_framebuffer:d,destroy:function(){p(d);l(d)},use:function(a){B.setFBO({framebuffer:c},a)}})}var B={cur:null,next:null,dirty:!1,setFBO:null},A=["rgba"],D=["rgba4","rgb565","rgb5 a1"];b.ext_srgb&&D.push("srgba");b.ext_color_buffer_half_float&&D.push("rgba16f","rgb16f");b.webgl_color_buffer_float&&D.push("rgba32f");var C=["uint8"];b.oes_texture_half_float&&
C.push("half float","float16");b.oes_texture_float&&C.push("float","float32");var G=0,L={};return K(B,{getFramebuffer:function(a){return"function"===typeof a&&"framebuffer"===a._reglType&&(a=a._framebuffer,a instanceof u)?a:null},create:y,createCube:function(a){function b(a){var e={color:null},g=0,f=null;var h="rgba";var k="uint8",n=1;if("number"===typeof a)g=a|0;else if(a){"shape"in a?g=a.shape[0]:("radius"in a&&(g=a.radius|0),"width"in a?g=a.width|0:"height"in a&&(g=a.height|0));if("color"in a||
"colors"in a)f=a.color||a.colors,Array.isArray(f);f||("colorCount"in a&&(n=a.colorCount|0),"colorType"in a&&(k=a.colorType),"colorFormat"in a&&(h=a.colorFormat));"depth"in a&&(e.depth=a.depth);"stencil"in a&&(e.stencil=a.stencil);"depthStencil"in a&&(e.depthStencil=a.depthStencil)}else g=1;if(f)if(Array.isArray(f))for(a=[],h=0;h<f.length;++h)a[h]=f[h];else a=[f];else for(a=Array(n),f={radius:g,format:h,type:k},h=0;h<n;++h)a[h]=d.createCube(f);e.color=Array(a.length);for(h=0;h<a.length;++h)n=a[h],
g=g||n.width,e.color[h]={target:34069,data:a[h]};for(h=0;6>h;++h){for(n=0;n<a.length;++n)e.color[n].target=34069+h;0<h&&(e.depth=c[0].depth,e.stencil=c[0].stencil,e.depthStencil=c[0].depthStencil);if(c[h])c[h](e);else c[h]=y(e)}return K(b,{width:g,height:g,color:a})}var c=Array(6);b(a);return K(b,{faces:c,resize:function(a){var d=a|0;if(d===b.width)return b;var e=b.color;for(a=0;a<e.length;++a)e[a].resize(d);for(a=0;6>a;++a)c[a].resize(d);b.width=b.height=d;return b},_reglType:"framebufferCube",destroy:function(){c.forEach(function(a){a.destroy()})}})},
clear:function(){ma(L).forEach(p)},restore:function(){B.cur=null;B.next=null;B.dirty=!0;ma(L).forEach(function(b){b.framebuffer=a.createFramebuffer();q(b)})}})}function U(){this.w=this.z=this.y=this.x=this.state=0;this.buffer=null;this.size=0;this.normalized=!1;this.type=5126;this.divisor=this.stride=this.offset=0}function T(a,b,c,d){a=c.maxAttributes;b=Array(a);for(c=0;c<a;++c)b[c]=new U;return{Record:U,scope:{},state:b}}function Y(a,b,c,d){function e(a,b,c,d){this.name=a;this.id=b;this.location=
c;this.info=d}function g(a,b){for(var c=0;c<a.length;++c)if(a[c].id===b.id){a[c].location=b.location;return}a.push(b)}function f(c,d,e){e=35632===c?n:m;var g=e[d];if(!g){var f=b.str(d);g=a.createShader(c);a.shaderSource(g,f);a.compileShader(g);e[d]=g}return g}function h(a,b){this.id=v++;this.fragId=a;this.vertId=b;this.program=null;this.uniforms=[];this.attributes=[];d.profile&&(this.stats={uniformsCount:0,attributesCount:0})}function k(c,h){h=f(35632,c.fragId);var k=f(35633,c.vertId);var n=c.program=
a.createProgram();a.attachShader(n,h);a.attachShader(n,k);a.linkProgram(n);var m=a.getProgramParameter(n,35718);d.profile&&(c.stats.uniformsCount=m);var t=c.uniforms;for(h=0;h<m;++h)if(k=a.getActiveUniform(n,h))if(1<k.size)for(var r=0;r<k.size;++r){var v=k.name.replace("[0]","["+r+"]");g(t,new e(v,b.id(v),a.getUniformLocation(n,v),k))}else g(t,new e(k.name,b.id(k.name),a.getUniformLocation(n,k.name),k));m=a.getProgramParameter(n,35721);d.profile&&(c.stats.attributesCount=m);t=c.attributes;for(h=0;h<
m;++h)(k=a.getActiveAttrib(n,h))&&g(t,new e(k.name,b.id(k.name),a.getAttribLocation(n,k.name),k))}var n={},m={},t={},r=[],v=0;d.profile&&(c.getMaxUniformsCount=function(){var a=0;r.forEach(function(b){b.stats.uniformsCount>a&&(a=b.stats.uniformsCount)});return a},c.getMaxAttributesCount=function(){var a=0;r.forEach(function(b){b.stats.attributesCount>a&&(a=b.stats.attributesCount)});return a});return{clear:function(){var b=a.deleteShader.bind(a);ma(n).forEach(b);n={};ma(m).forEach(b);m={};r.forEach(function(b){a.deleteProgram(b.program)});
r.length=0;t={};c.shaderCount=0},program:function(a,b,d){var e=t[b];e||(e=t[b]={});var g=e[a];g||(g=new h(b,a),c.shaderCount++,k(g,d),e[a]=g,r.push(g));return g},restore:function(){n={};m={};for(var a=0;a<r.length;++a)k(r[a])},shader:f,frag:-1,vert:-1}}function ia(a,b,c,d,e,g,f){function h(e){var g=null===b.next?5121:b.next.colorAttachments[0].texture._texture.type;var f=0,h=0,k=d.framebufferWidth,n=d.framebufferHeight,m=null;aa(e)?m=e:e&&(f=e.x|0,h=e.y|0,k=(e.width||d.framebufferWidth-f)|0,n=(e.height||
d.framebufferHeight-h)|0,m=e.data||null);c();e=k*n*4;m||(5121===g?m=new Uint8Array(e):5126===g&&(m=m||new Float32Array(e)));a.pixelStorei(3333,4);a.readPixels(f,h,k,n,6408,g,m);return m}function k(a){var c;b.setFBO({framebuffer:a.framebuffer},function(){c=h(a)});return c}return function(a){return a&&"framebuffer"in a?k(a):h(a)}}function z(a){return Array.prototype.slice.call(a)}function W(a){return z(a).join("")}function fa(){function a(){var a=[],b=[];return K(function(){a.push.apply(a,z(arguments))},
{def:function(){var d="v"+c++;b.push(d);0<arguments.length&&(a.push(d,"\x3d"),a.push.apply(a,z(arguments)),a.push(";"));return d},toString:function(){return W([0<b.length?"var "+b+";":"",W(a)])}})}function b(){function b(a,b){d(a,b,"\x3d",c.def(a,b),";")}var c=a(),d=a(),e=c.toString,g=d.toString;return K(function(){c.apply(c,z(arguments))},{def:c.def,entry:c,exit:d,save:b,set:function(a,d,e){b(a,d);c(a,d,"\x3d",e,";")},toString:function(){return e()+g()}})}var c=0,d=[],e=[],g=a(),f={};return{global:g,
link:function(a){for(var b=0;b<e.length;++b)if(e[b]===a)return d[b];b="g"+c++;d.push(b);e.push(a);return b},block:a,proc:function(a,c){function d(){var a="a"+e.length;e.push(a);return a}var e=[];c=c||0;for(var g=0;g<c;++g)d();g=b();var h=g.toString;return f[a]=K(g,{arg:d,toString:function(){return W(["function(",e.join(),"){",h(),"}"])}})},scope:b,cond:function(){var a=W(arguments),c=b(),d=b(),e=c.toString,g=d.toString;return K(c,{then:function(){c.apply(c,z(arguments));return this},"else":function(){d.apply(d,
z(arguments));return this},toString:function(){var b=g();b&&(b="else{"+b+"}");return W(["if(",a,"){",e(),"}",b])}})},compile:function(){var a=['"use strict";',g,"return {"];Object.keys(f).forEach(function(b){a.push('"',b,'":',f[b].toString(),",")});a.push("}");var b=W(a).replace(/;/g,";\n").replace(/}/g,"}\n").replace(/{/g,"{\n");return Function.apply(null,d.concat(b)).apply(null,e)}}}function qa(a){return Array.isArray(a)||aa(a)||t(a)}function ha(a){return a.sort(function(a,b){return"viewport"===
a?-1:"viewport"===b?1:a<b?-1:1})}function ea(a,b,c,d){this.thisDep=a;this.contextDep=b;this.propDep=c;this.append=d}function F(a){return a&&!(a.thisDep||a.contextDep||a.propDep)}function la(a){return new ea(!1,!1,!1,a)}function Z(a,b){var c=a.type;return 0===c?(c=a.data.length,new ea(!0,1<=c,2<=c,b)):4===c?(c=a.data,new ea(c.thisDep,c.contextDep,c.propDep,b)):new ea(3===c,2===c,1===c,b)}function pa(a,b,c,d,e,f,h,k,n,m,t,r,v,u,l){function p(a){return a.replace(".","_")}function q(a,b,c){var d=p(a);
ja.push(a);Fa[d]=oa[d]=!!c;ya[d]=b}function y(a,b,c){var d=p(a);ja.push(a);Array.isArray(c)?(oa[d]=c.slice(),Fa[d]=c.slice()):oa[d]=Fa[d]=c;Ga[d]=b}function B(){var a=fa(),c=a.link,d=a.global;a.id=aa++;a.batchId="0";var e=c(Ja),g=a.shared={props:"a0"};Object.keys(Ja).forEach(function(a){g[a]=d.def(e,".",a)});var f=a.next={},h=a.current={};Object.keys(Ga).forEach(function(a){Array.isArray(oa[a])&&(f[a]=d.def(g.next,".",a),h[a]=d.def(g.current,".",a))});var k=a.constants={};Object.keys(Ba).forEach(function(a){k[a]=
d.def(JSON.stringify(Ba[a]))});a.invoke=function(b,d){switch(d.type){case 0:var e=["this",g.context,g.props,a.batchId];return b.def(c(d.data),".call(",e.slice(0,Math.max(d.data.length+1,4)),")");case 1:return b.def(g.props,d.data);case 2:return b.def(g.context,d.data);case 3:return b.def("this",d.data);case 4:return d.data.append(a,b),d.data.ref}};a.attribCache={};var n={};a.scopeAttrib=function(a){a=b.id(a);if(a in n)return n[a];var d=m.scope[a];d||(d=m.scope[a]=new ua);return n[a]=c(d)};return a}
function A(a){var b=a["static"];a=a.dynamic;if("profile"in b){var c=!!b.profile;var d=la(function(a,b){return c});d.enable=c}else if("profile"in a){var e=a.profile;d=Z(e,function(a,b){return a.invoke(b,e)})}return d}function D(a,b){b=a["static"];a=a.dynamic;if("framebuffer"in b){var c=b.framebuffer;return c?(c=k.getFramebuffer(c),la(function(a,b){var d=a.link(c);a=a.shared;b.set(a.framebuffer,".next",d);a=a.context;b.set(a,".framebufferWidth",d+".width");b.set(a,".framebufferHeight",d+".height");
return d})):la(function(a,b){a=a.shared;b.set(a.framebuffer,".next","null");a=a.context;b.set(a,".framebufferWidth",a+".drawingBufferWidth");b.set(a,".framebufferHeight",a+".drawingBufferHeight");return"null"})}if("framebuffer"in a){var d=a.framebuffer;return Z(d,function(a,b){var c=a.invoke(b,d);a=a.shared;var e=a.framebuffer;c=b.def(e,".getFramebuffer(",c,")");b.set(e,".next",c);a=a.context;b.set(a,".framebufferWidth",c+"?"+c+".width:"+a+".drawingBufferWidth");b.set(a,".framebufferHeight",c+"?"+
c+".height:"+a+".drawingBufferHeight");return c})}return null}function C(a,b,c){function d(a){if(a in e){var c=e[a];a=!0;var d=c.x|0,f=c.y|0,h,k;"width"in c?h=c.width|0:a=!1;"height"in c?k=c.height|0:a=!1;return new ea(!a&&b&&b.thisDep,!a&&b&&b.contextDep,!a&&b&&b.propDep,function(a,b){a=a.shared.context;var e=h;"width"in c||(e=b.def(a,".","framebufferWidth","-",d));var g=k;"height"in c||(g=b.def(a,".","framebufferHeight","-",f));return[d,f,e,g]})}if(a in g){var n=g[a];a=Z(n,function(a,b){var c=a.invoke(b,
n);a=a.shared.context;var d=b.def(c,".x|0"),e=b.def(c,".y|0"),g=b.def('"width" in ',c,"?",c,".width|0:","(",a,".","framebufferWidth","-",d,")");c=b.def('"height" in ',c,"?",c,".height|0:","(",a,".","framebufferHeight","-",e,")");return[d,e,g,c]});b&&(a.thisDep=a.thisDep||b.thisDep,a.contextDep=a.contextDep||b.contextDep,a.propDep=a.propDep||b.propDep);return a}return b?new ea(b.thisDep,b.contextDep,b.propDep,function(a,b){a=a.shared.context;return[0,0,b.def(a,".","framebufferWidth"),b.def(a,".","framebufferHeight")]}):
null}var e=a["static"],g=a.dynamic;if(a=d("viewport")){var f=a;a=new ea(a.thisDep,a.contextDep,a.propDep,function(a,b){var c=f.append(a,b);a=a.shared.context;b.set(a,".viewportWidth",c[2]);b.set(a,".viewportHeight",c[3]);return c})}return{viewport:a,scissor_box:d("scissor.box")}}function G(a){function c(a){if(a in d){var c=b.id(d[a]);a=la(function(){return c});a.id=c;return a}if(a in e){var g=e[a];return Z(g,function(a,b){var c=a.invoke(b,g);return b.def(a.shared.strings,".id(",c,")")})}return null}
var d=a["static"],e=a.dynamic,g=c("frag"),f=c("vert"),h=null;F(g)&&F(f)?(h=t.program(f.id,g.id),a=la(function(a,b){return a.link(h)})):a=new ea(g&&g.thisDep||f&&f.thisDep,g&&g.contextDep||f&&f.contextDep,g&&g.propDep||f&&f.propDep,function(a,b){var c=a.shared.shader;var d=g?g.append(a,b):b.def(c,".","frag");a=f?f.append(a,b):b.def(c,".","vert");return b.def(c+".program("+a+","+d+")")});return{frag:g,vert:f,progVar:a,program:h}}function L(a,b){function c(a,b){if(a in d){var c=d[a]|0;return la(function(a,
d){b&&(a.OFFSET=c);return c})}if(a in e){var f=e[a];return Z(f,function(a,c){c=a.invoke(c,f);b&&(a.OFFSET=c);return c})}return b&&g?la(function(a,b){a.OFFSET="0";return 0}):null}var d=a["static"],e=a.dynamic,g=function(){if("elements"in d){var a=d.elements;qa(a)?a=f.getElements(f.create(a,!0)):a&&(a=f.getElements(a));var b=la(function(b,c){return a?(c=b.link(a),b.ELEMENTS=c):b.ELEMENTS=null});b.value=a;return b}if("elements"in e){var c=e.elements;return Z(c,function(a,b){var d=a.shared,e=d.isBufferArgs;
d=d.elements;var g=a.invoke(b,c),f=b.def("null");e=b.def(e,"(",g,")");g=a.cond(e).then(f,"\x3d",d,".createStream(",g,");")["else"](f,"\x3d",d,".getElements(",g,");");b.entry(g);b.exit(a.cond(e).then(d,".destroyStream(",f,");"));return a.ELEMENTS=f})}return null}(),h=c("offset",!0);return{elements:g,primitive:function(){if("primitive"in d){var a=d.primitive;return la(function(b,c){return Ea[a]})}if("primitive"in e){var b=e.primitive;return Z(b,function(a,c){var d=a.constants.primTypes;a=a.invoke(c,
b);return c.def(d,"[",a,"]")})}return g?F(g)?g.value?la(function(a,b){return b.def(a.ELEMENTS,".primType")}):la(function(){return 4}):new ea(g.thisDep,g.contextDep,g.propDep,function(a,b){a=a.ELEMENTS;return b.def(a,"?",a,".primType:",4)}):null}(),count:function(){if("count"in d){var a=d.count|0;return la(function(){return a})}if("count"in e){var b=e.count;return Z(b,function(a,c){return a.invoke(c,b)})}return g?F(g)?g?h?new ea(h.thisDep,h.contextDep,h.propDep,function(a,b){return b.def(a.ELEMENTS,
".vertCount-",a.OFFSET)}):la(function(a,b){return b.def(a.ELEMENTS,".vertCount")}):la(function(){return-1}):new ea(g.thisDep||h.thisDep,g.contextDep||h.contextDep,g.propDep||h.propDep,function(a,b){var c=a.ELEMENTS;return a.OFFSET?b.def(c,"?",c,".vertCount-",a.OFFSET,":-1"):b.def(c,"?",c,".vertCount:-1")}):null}(),instances:c("instances",!1),offset:h}}function I(a,b){var c=a["static"],d=a.dynamic,e={};ja.forEach(function(a){function b(b,g){if(a in c){var h=b(c[a]);e[f]=la(function(){return h})}else if(a in
d){var k=d[a];e[f]=Z(k,function(a,b){return g(a,b,a.invoke(b,k))})}}var f=p(a);switch(a){case "cull.enable":case "blend.enable":case "dither":case "stencil.enable":case "depth.enable":case "scissor.enable":case "polygonOffset.enable":case "sample.alpha":case "sample.enable":case "depth.mask":return b(function(a){return a},function(a,b,c){return c});case "depth.func":return b(function(a){return Ra[a]},function(a,b,c){return b.def(a.constants.compareFuncs,"[",c,"]")});case "depth.range":return b(function(a){return a},
function(a,b,c){a=b.def("+",c,"[0]");b=b.def("+",c,"[1]");return[a,b]});case "blend.func":return b(function(a){return[pb["srcRGB"in a?a.srcRGB:a.src],pb["dstRGB"in a?a.dstRGB:a.dst],pb["srcAlpha"in a?a.srcAlpha:a.src],pb["dstAlpha"in a?a.dstAlpha:a.dst]]},function(a,b,c){function d(a,d){return b.def('"',a,d,'" in ',c,"?",c,".",a,d,":",c,".",a)}a=a.constants.blendFuncs;var e=d("src","RGB"),g=d("dst","RGB");e=b.def(a,"[",e,"]");var f=b.def(a,"[",d("src","Alpha"),"]");g=b.def(a,"[",g,"]");a=b.def(a,
"[",d("dst","Alpha"),"]");return[e,g,f,a]});case "blend.equation":return b(function(a){if("string"===typeof a)return[Ca[a],Ca[a]];if("object"===typeof a)return[Ca[a.rgb],Ca[a.alpha]]},function(a,b,c){var d=a.constants.blendEquations,e=b.def(),g=b.def();a=a.cond("typeof ",c,'\x3d\x3d\x3d"string"');a.then(e,"\x3d",g,"\x3d",d,"[",c,"];");a["else"](e,"\x3d",d,"[",c,".rgb];",g,"\x3d",d,"[",c,".alpha];");b(a);return[e,g]});case "blend.color":return b(function(a){return g(4,function(b){return+a[b]})},function(a,
b,c){return g(4,function(a){return b.def("+",c,"[",a,"]")})});case "stencil.mask":return b(function(a){return a|0},function(a,b,c){return b.def(c,"|0")});case "stencil.func":return b(function(a){return[Ra[a.cmp||"keep"],a.ref||0,"mask"in a?a.mask:-1]},function(a,b,c){a=b.def('"cmp" in ',c,"?",a.constants.compareFuncs,"[",c,".cmp]",":",7680);var d=b.def(c,".ref|0");b=b.def('"mask" in ',c,"?",c,".mask|0:-1");return[a,d,b]});case "stencil.opFront":case "stencil.opBack":return b(function(b){return["stencil.opBack"===
a?1029:1028,Jb[b.fail||"keep"],Jb[b.zfail||"keep"],Jb[b.zpass||"keep"]]},function(b,c,d){function e(a){return c.def('"',a,'" in ',d,"?",g,"[",d,".",a,"]:",7680)}var g=b.constants.stencilOps;return["stencil.opBack"===a?1029:1028,e("fail"),e("zfail"),e("zpass")]});case "polygonOffset.offset":return b(function(a){return[a.factor|0,a.units|0]},function(a,b,c){a=b.def(c,".factor|0");b=b.def(c,".units|0");return[a,b]});case "cull.face":return b(function(a){var b=0;"front"===a?b=1028:"back"===a&&(b=1029);
return b},function(a,b,c){return b.def(c,'\x3d\x3d\x3d"front"?',1028,":",1029)});case "lineWidth":return b(function(a){return a},function(a,b,c){return c});case "frontFace":return b(function(a){return nb[a]},function(a,b,c){return b.def(c+'\x3d\x3d\x3d"cw"?2304:2305')});case "colorMask":return b(function(a){return a.map(function(a){return!!a})},function(a,b,c){return g(4,function(a){return"!!"+c+"["+a+"]"})});case "sample.coverage":return b(function(a){return["value"in a?a.value:1,!!a.invert]},function(a,
b,c){a=b.def('"value" in ',c,"?+",c,".value:1");b=b.def("!!",c,".invert");return[a,b]})}});return e}function N(a,b){var c=a["static"],d=a.dynamic,e={};Object.keys(c).forEach(function(a){var b=c[a];if("number"===typeof b||"boolean"===typeof b)var d=la(function(){return b});else if("function"===typeof b){var f=b._reglType;if("texture2d"===f||"textureCube"===f)d=la(function(a){return a.link(b)});else if("framebuffer"===f||"framebufferCube"===f)d=la(function(a){return a.link(b.color[0])})}else E(b)&&
(d=la(function(a){return a.global.def("[",g(b.length,function(a){return b[a]}),"]")}));d.value=b;e[a]=d});Object.keys(d).forEach(function(a){var b=d[a];e[a]=Z(b,function(a,c){return a.invoke(c,b)})});return e}function J(a,c){var d=a["static"],g=a.dynamic,f={};Object.keys(d).forEach(function(a){var c=d[a],g=b.id(a),h=new ua;if(qa(c))h.state=1,h.buffer=e.getBuffer(e.create(c,34962,!1,!0)),h.type=0;else{var k=e.getBuffer(c);if(k)h.state=1,h.buffer=k,h.type=0;else if("constant"in c){var n=c.constant;
h.buffer="null";h.state=2;"number"===typeof n?h.x=n:cb.forEach(function(a,b){b<n.length&&(h[a]=n[b])})}else{k=qa(c.buffer)?e.getBuffer(e.create(c.buffer,34962,!1,!0)):e.getBuffer(c.buffer);var m=c.offset|0,t=c.stride|0,r=c.size|0,v=!!c.normalized,u=0;"type"in c&&(u=sa[c.type]);c=c.divisor|0;h.buffer=k;h.state=1;h.size=r;h.normalized=v;h.type=u||k.dtype;h.offset=m;h.stride=t;h.divisor=c}}f[a]=la(function(a,b){b=a.attribCache;if(g in b)return b[g];var c={isStream:!1};Object.keys(h).forEach(function(a){c[a]=
h[a]});h.buffer&&(c.buffer=a.link(h.buffer),c.type=c.type||c.buffer+".dtype");return b[g]=c})});Object.keys(g).forEach(function(a){var b=g[a];f[a]=Z(b,function(a,c){function d(a){c(h[a],"\x3d",e,".",a,"|0;")}var e=a.invoke(c,b);a=a.shared;var g=a.isBufferArgs,f=a.buffer,h={isStream:c.def(!1)},k=new ua;k.state=1;Object.keys(k).forEach(function(a){h[a]=c.def(""+k[a])});var n=h.buffer,m=h.type;c("if(",g,"(",e,")){",h.isStream,"\x3dtrue;",n,"\x3d",f,".createStream(",34962,",",e,");",m,"\x3d",n,".dtype;",
"}else{",n,"\x3d",f,".getBuffer(",e,");","if(",n,"){",m,"\x3d",n,".dtype;",'}else if("constant" in ',e,"){",h.state,"\x3d",2,";","if(typeof "+e+'.constant \x3d\x3d\x3d "number"){',h[cb[0]],"\x3d",e,".constant;",cb.slice(1).map(function(a){return h[a]}).join("\x3d"),"\x3d0;","}else{",cb.map(function(a,b){return h[a]+"\x3d"+e+".constant.length\x3e"+b+"?"+e+".constant["+b+"]:0;"}).join(""),"}}else{","if(",g,"(",e,".buffer)){",n,"\x3d",f,".createStream(",34962,",",e,".buffer);","}else{",n,"\x3d",f,".getBuffer(",
e,".buffer);","}",m,'\x3d"type" in ',e,"?",a.glTypes,"[",e,".type]:",n,".dtype;",h.normalized,"\x3d!!",e,".normalized;");d("size");d("offset");d("stride");d("divisor");c("}}");c.exit("if(",h.isStream,"){",f,".destroyStream(",n,");","}");return h})});return f}function P(a){var b=a["static"],c=a.dynamic,d={};Object.keys(b).forEach(function(a){var c=b[a];d[a]=la(function(a,b){return"number"===typeof c||"boolean"===typeof c?""+c:a.link(c)})});Object.keys(c).forEach(function(a){var b=c[a];d[a]=Z(b,function(a,
c){return a.invoke(c,b)})});return d}function H(a,b,c,d,e){var g=D(a,e),f=C(a,g,e),h=L(a,e),k=I(a,e),n=G(a,e),m=f.viewport;m&&(k.viewport=m);m=p("scissor.box");(f=f[m])&&(k[m]=f);f=0<Object.keys(k).length;g={framebuffer:g,draw:h,shader:n,state:k,dirty:f};g.profile=A(a,e);g.uniforms=N(c,e);g.attributes=J(b,e);g.context=P(d,e);return g}function w(a,b,c){var d=a.shared.context,e=a.scope();Object.keys(c).forEach(function(g){b.save(d,"."+g);e(d,".",g,"\x3d",c[g].append(a,b),";")});b(e)}function Q(a,b,
c,d){var e=a.shared,g=e.gl,f=e.framebuffer,h;K&&(h=b.def(e.extensions,".webgl_draw_buffers"));var k=a.constants;e=k.drawBuffer;k=k.backBuffer;a=c?c.append(a,b):b.def(f,".next");d||b("if(",a,"!\x3d\x3d",f,".cur){");b("if(",a,"){",g,".bindFramebuffer(",36160,",",a,".framebuffer);");K&&b(h,".drawBuffersWEBGL(",e,"[",a,".colorAttachments.length]);");b("}else{",g,".bindFramebuffer(",36160,",null);");K&&b(h,".drawBuffersWEBGL(",k,");");b("}",f,".cur\x3d",a,";");d||b("}")}function M(a,b,c){var d=a.shared,
e=d.gl,f=a.current,h=a.next,k=d.current,n=d.next,m=a.cond(k,".dirty");ja.forEach(function(b){b=p(b);if(!(b in c.state))if(b in h){var d=h[b];var t=f[b];var r=g(oa[b].length,function(a){return m.def(d,"[",a,"]")});m(a.cond(r.map(function(a,b){return a+"!\x3d\x3d"+t+"["+b+"]"}).join("||")).then(e,".",Ga[b],"(",r,");",r.map(function(a,b){return t+"["+b+"]\x3d"+a}).join(";"),";"))}else d=m.def(n,".",b),r=a.cond(d,"!\x3d\x3d",k,".",b),m(r),b in ya?r(a.cond(d).then(e,".enable(",ya[b],");")["else"](e,".disable(",
ya[b],");"),k,".",b,"\x3d",d,";"):r(e,".",Ga[b],"(",d,");",k,".",b,"\x3d",d,";")});0===Object.keys(c.state).length&&m(k,".dirty\x3dfalse;");b(m)}function R(a,b,c,d){var e=a.shared,g=a.current,f=e.current,h=e.gl;ha(Object.keys(c)).forEach(function(e){var k=c[e];if(!d||d(k)){var n=k.append(a,b);if(ya[e]){var m=ya[e];F(k)?n?b(h,".enable(",m,");"):b(h,".disable(",m,");"):b(a.cond(n).then(h,".enable(",m,");")["else"](h,".disable(",m,");"));b(f,".",e,"\x3d",n,";")}else if(E(n)){var t=g[e];b(h,".",Ga[e],
"(",n,");",n.map(function(a,b){return t+"["+b+"]\x3d"+a}).join(";"),";")}else b(h,".",Ga[e],"(",n,");",f,".",e,"\x3d",n,";")}})}function x(a,b){X&&(a.instancing=b.def(a.shared.extensions,".angle_instanced_arrays"))}function O(a,b,c,d,e){function g(){return"undefined"===typeof performance?"Date.now()":"performance.now()"}function f(a){v=b.def();a(v,"\x3d",g(),";");"string"===typeof e?a(m,".count+\x3d",e,";"):a(m,".count++;");u&&(d?(l=b.def(),a(l,"\x3d",r,".getNumPendingQueries();")):a(r,".beginQuery(",
m,");"))}function h(a){a(m,".cpuTime+\x3d",g(),"-",v,";");u&&(d?a(r,".pushScopeStats(",l,",",r,".getNumPendingQueries(),",m,");"):a(r,".endQuery();"))}function k(a){var c=b.def(t,".profile");b(t,".profile\x3d",a,";");b.exit(t,".profile\x3d",c,";")}var n=a.shared,m=a.stats,t=n.current,r=n.timer;c=c.profile;var v,l;if(c){if(F(c)){c.enable?(f(b),h(b.exit),k("true")):k("false");return}c=c.append(a,b);k(c)}else c=b.def(t,".profile");n=a.block();f(n);b("if(",c,"){",n,"}");a=a.block();h(a);b.exit("if(",
c,"){",a,"}")}function ca(a,b,c,d,e){function g(a){switch(a){case 35664:case 35667:case 35671:return 2;case 35665:case 35668:case 35672:return 3;case 35666:case 35669:case 35673:return 4;default:return 1}}function f(c,d,e){function g(){b("if(!",m,".buffer){",k,".enableVertexAttribArray(",n,");}");var c=e.type;var g=e.size?b.def(e.size,"||",d):d;b("if(",m,".type!\x3d\x3d",c,"||",m,".size!\x3d\x3d",g,"||",v.map(function(a){return m+"."+a+"!\x3d\x3d"+e[a]}).join("||"),"){",k,".bindBuffer(",34962,",",
t,".buffer);",k,".vertexAttribPointer(",[n,g,c,e.normalized,e.stride,e.offset],");",m,".type\x3d",c,";",m,".size\x3d",g,";",v.map(function(a){return m+"."+a+"\x3d"+e[a]+";"}).join(""),"}");X&&(c=e.divisor,b("if(",m,".divisor!\x3d\x3d",c,"){",a.instancing,".vertexAttribDivisorANGLE(",[n,c],");",m,".divisor\x3d",c,";}"))}function f(){b("if(",m,".buffer){",k,".disableVertexAttribArray(",n,");","}if(",cb.map(function(a,b){return m+"."+a+"!\x3d\x3d"+r[b]}).join("||"),"){",k,".vertexAttrib4f(",n,",",r,
");",cb.map(function(a,b){return m+"."+a+"\x3d"+r[b]+";"}).join(""),"}")}var k=h.gl,n=b.def(c,".location"),m=b.def(h.attributes,"[",n,"]");c=e.state;var t=e.buffer,r=[e.x,e.y,e.z,e.w],v=["buffer","normalized","offset","stride"];1===c?g():2===c?f():(b("if(",c,"\x3d\x3d\x3d",1,"){"),g(),b("}else{"),f(),b("}"))}var h=a.shared;d.forEach(function(d){var h=d.name,k=c.attributes[h];if(k){if(!e(k))return;var n=k.append(a,b)}else{if(!e(kc))return;var m=a.scopeAttrib(h);n={};Object.keys(new ua).forEach(function(a){n[a]=
b.def(m,".",a)})}f(a.link(d),g(d.info.type),n)})}function T(a,c,d,e,f){for(var h=a.shared,k=h.gl,n,m=0;m<e.length;++m){var t=e[m],r=t.name,v=t.info.type,u=d.uniforms[r];t=a.link(t)+".location";if(u){if(!f(u))continue;if(F(u)){r=u.value;if(35678===v||35680===v)v=a.link(r._texture||r.color[0]._texture),c(k,".uniform1i(",t,",",v+".bind());"),c.exit(v,".unbind();");else if(35674===v||35675===v||35676===v)r=a.global.def("new Float32Array(["+Array.prototype.slice.call(r)+"])"),u=2,35675===v?u=3:35676===
v&&(u=4),c(k,".uniformMatrix",u,"fv(",t,",false,",r,");");else{switch(v){case 5126:n="1f";break;case 35664:n="2f";break;case 35665:n="3f";break;case 35666:n="4f";break;case 35670:n="1i";break;case 5124:n="1i";break;case 35671:n="2i";break;case 35667:n="2i";break;case 35672:n="3i";break;case 35668:n="3i";break;case 35673:n="4i";break;case 35669:n="4i"}c(k,".uniform",n,"(",t,",",E(r)?Array.prototype.slice.call(r):r,");")}continue}else var l=u.append(a,c)}else{if(!f(kc))continue;l=c.def(h.uniforms,"[",
b.id(r),"]")}35678===v?c("if(",l,"\x26\x26",l,'._reglType\x3d\x3d\x3d"framebuffer"){',l,"\x3d",l,".color[0];","}"):35680===v&&c("if(",l,"\x26\x26",l,'._reglType\x3d\x3d\x3d"framebufferCube"){',l,"\x3d",l,".color[0];","}");r=1;switch(v){case 35678:case 35680:v=c.def(l,"._texture");c(k,".uniform1i(",t,",",v,".bind());");c.exit(v,".unbind();");continue;case 5124:case 35670:n="1i";break;case 35667:case 35671:n="2i";r=2;break;case 35668:case 35672:n="3i";r=3;break;case 35669:case 35673:n="4i";r=4;break;
case 5126:n="1f";break;case 35664:n="2f";r=2;break;case 35665:n="3f";r=3;break;case 35666:n="4f";r=4;break;case 35674:n="Matrix2fv";break;case 35675:n="Matrix3fv";break;case 35676:n="Matrix4fv"}c(k,".uniform",n,"(",t,",");if("M"===n.charAt(0)){t=Math.pow(v-35674+2,2);var p=a.global.def("new Float32Array(",t,")");c("false,(Array.isArray(",l,")||",l," instanceof Float32Array)?",l,":(",g(t,function(a){return p+"["+a+"]\x3d"+l+"["+a+"]"}),",",p,")")}else 1<r?c(g(r,function(a){return l+"["+a+"]"})):c(l);
c(");")}}function U(a,b,c,d){function e(e){var g=m[e];return g?g.contextDep&&d.contextDynamic||g.propDep?g.append(a,c):g.append(a,b):b.def(n,".",e)}function g(){function a(){c(p,".drawElementsInstancedANGLE(",[r,u,q,v+"\x3c\x3c(("+q+"-5121)\x3e\x3e1)",l],");")}function b(){c(p,".drawArraysInstancedANGLE(",[r,v,u,l],");")}t?y?a():(c("if(",t,"){"),a(),c("}else{"),b(),c("}")):b()}function f(){function a(){c(k+".drawElements("+[r,u,q,v+"\x3c\x3c(("+q+"-5121)\x3e\x3e1)"]+");")}function b(){c(k+".drawArrays("+
[r,v,u]+");")}t?y?a():(c("if(",t,"){"),a(),c("}else{"),b(),c("}")):b()}var h=a.shared,k=h.gl,n=h.draw,m=d.draw,t=function(){var e=m.elements,g=b;if(e){if(e.contextDep&&d.contextDynamic||e.propDep)g=c;e=e.append(a,g)}else e=g.def(n,".","elements");e&&g("if("+e+")"+k+".bindBuffer(34963,"+e+".buffer.buffer);");return e}(),r=e("primitive"),v=e("offset"),u=function(){var e=m.count,g=b;if(e){if(e.contextDep&&d.contextDynamic||e.propDep)g=c;e=e.append(a,g)}else e=g.def(n,".","count");return e}();if("number"===
typeof u){if(0===u)return}else c("if(",u,"){"),c.exit("}");var l,p;X&&(l=e("instances"),p=a.instancing);var q=t+".type",y=m.elements&&F(m.elements);X&&("number"!==typeof l||0<=l)?"string"===typeof l?(c("if(",l,"\x3e0){"),g(),c("}else if(",l,"\x3c0){"),f(),c("}")):g():f()}function Y(a,b,c,d,e){b=B();e=b.proc("body",e);X&&(b.instancing=e.def(b.shared.extensions,".angle_instanced_arrays"));a(b,e,c,d);return b.compile().body}function ia(a,b,c,d){x(a,b);ca(a,b,c,d.attributes,function(){return!0});T(a,
b,c,d.uniforms,function(){return!0});U(a,b,b,c)}function z(a,b){var c=a.proc("draw",1);x(a,c);w(a,c,b.context);Q(a,c,b.framebuffer);M(a,c,b);R(a,c,b.state);O(a,c,b,!1,!0);var d=b.shader.progVar.append(a,c);c(a.shared.gl,".useProgram(",d,".program);");if(b.shader.program)ia(a,c,b,b.shader.program);else{var e=a.global.def("{}"),g=c.def(d,".id"),f=c.def(e,"[",g,"]");c(a.cond(f).then(f,".call(this,a0);")["else"](f,"\x3d",e,"[",g,"]\x3d",a.link(function(c){return Y(ia,a,b,c,1)}),"(",d,");",f,".call(this,a0);"))}0<
Object.keys(b.state).length&&c(a.shared.current,".dirty\x3dtrue;")}function S(a,b,c,d){function e(){return!0}a.batchId="a1";x(a,b);ca(a,b,c,d.attributes,e);T(a,b,c,d.uniforms,e);U(a,b,b,c)}function W(a,b,c,d){function e(a){return a.contextDep&&f||a.propDep}function g(a){return!e(a)}x(a,b);var f=c.contextDep,h=b.def(),k=b.def();a.shared.props=k;a.batchId=h;var n=a.scope(),m=a.scope();b(n.entry,"for(",h,"\x3d0;",h,"\x3c","a1",";++",h,"){",k,"\x3d","a0","[",h,"];",m,"}",n.exit);c.needsContext&&w(a,m,
c.context);c.needsFramebuffer&&Q(a,m,c.framebuffer);R(a,m,c.state,e);c.profile&&e(c.profile)&&O(a,m,c,!1,!0);d?(ca(a,n,c,d.attributes,g),ca(a,m,c,d.attributes,e),T(a,n,c,d.uniforms,g),T(a,m,c,d.uniforms,e),U(a,n,m,c)):(b=a.global.def("{}"),d=c.shader.progVar.append(a,m),k=m.def(d,".id"),n=m.def(b,"[",k,"]"),m(a.shared.gl,".useProgram(",d,".program);","if(!",n,"){",n,"\x3d",b,"[",k,"]\x3d",a.link(function(b){return Y(S,a,c,b,2)}),"(",d,");}",n,".call(this,a0[",h,"],",h,");"))}function da(a,b){function c(a){return a.contextDep&&
e||a.propDep}var d=a.proc("batch",2);a.batchId="0";x(a,d);var e=!1,g=!0;Object.keys(b.context).forEach(function(a){e=e||b.context[a].propDep});e||(w(a,d,b.context),g=!1);var f=b.framebuffer,h=!1;f?(f.propDep?e=h=!0:f.contextDep&&e&&(h=!0),h||Q(a,d,f)):Q(a,d,null);b.state.viewport&&b.state.viewport.propDep&&(e=!0);M(a,d,b);R(a,d,b.state,function(a){return!c(a)});b.profile&&c(b.profile)||O(a,d,b,!1,"a1");b.contextDep=e;b.needsContext=g;b.needsFramebuffer=h;g=b.shader.progVar;if(g.contextDep&&e||g.propDep)W(a,
d,b,null);else if(g=g.append(a,d),d(a.shared.gl,".useProgram(",g,".program);"),b.shader.program)W(a,d,b,b.shader.program);else{f=a.global.def("{}");h=d.def(g,".id");var k=d.def(f,"[",h,"]");d(a.cond(k).then(k,".call(this,a0,a1);")["else"](k,"\x3d",f,"[",h,"]\x3d",a.link(function(c){return Y(W,a,b,c,2)}),"(",g,");",k,".call(this,a0,a1);"))}0<Object.keys(b.state).length&&d(a.shared.current,".dirty\x3dtrue;")}function ba(a,c){function d(b){var d=c.shader[b];d&&e.set(g.shader,"."+b,d.append(a,e))}var e=
a.proc("scope",3);a.batchId="a2";var g=a.shared,f=g.current;w(a,e,c.context);c.framebuffer&&c.framebuffer.append(a,e);ha(Object.keys(c.state)).forEach(function(b){var d=c.state[b].append(a,e);E(d)?d.forEach(function(c,d){e.set(a.next[b],"["+d+"]",c)}):e.set(g.next,"."+b,d)});O(a,e,c,!0,!0);["elements","offset","count","instances","primitive"].forEach(function(b){var d=c.draw[b];d&&e.set(g.draw,"."+b,""+d.append(a,e))});Object.keys(c.uniforms).forEach(function(d){e.set(g.uniforms,"["+b.id(d)+"]",c.uniforms[d].append(a,
e))});Object.keys(c.attributes).forEach(function(b){var d=c.attributes[b].append(a,e),g=a.scopeAttrib(b);Object.keys(new ua).forEach(function(a){e.set(g,"."+a,d[a])})});d("vert");d("frag");0<Object.keys(c.state).length&&(e(f,".dirty\x3dtrue;"),e.exit(f,".dirty\x3dtrue;"));e("a1(",a.shared.context,",a0,",a.batchId,");")}function na(a){if("object"===typeof a&&!E(a)){for(var b=Object.keys(a),c=0;c<b.length;++c)if(xa.isDynamic(a[b[c]]))return!0;return!1}}function pa(a,b,c){function d(a,b){f.forEach(function(c){var d=
e[c];xa.isDynamic(d)&&(d=a.invoke(b,d),b(m,".",c,"\x3d",d,";"))})}var e=b["static"][c];if(e&&na(e)){var g=a.global,f=Object.keys(e),h=!1,k=!1,n=!1,m=a.global.def("{}");f.forEach(function(b){var c=e[b];if(xa.isDynamic(c))"function"===typeof c&&(c=e[b]=xa.unbox(c)),b=Z(c,null),h=h||b.thisDep,n=n||b.propDep,k=k||b.contextDep;else{g(m,".",b,"\x3d");switch(typeof c){case "number":g(c);break;case "string":g('"',c,'"');break;case "object":Array.isArray(c)&&g("[",c.join(),"]");break;default:g(a.link(c))}g(";")}});
b.dynamic[c]=new xa.DynamicVariable(4,{thisDep:h,contextDep:k,propDep:n,ref:m,append:d});delete b["static"][c]}}var ua=m.Record,Ca={add:32774,subtract:32778,"reverse subtract":32779};c.ext_blend_minmax&&(Ca.min=32775,Ca.max=32776);var X=c.angle_instanced_arrays,K=c.webgl_draw_buffers,oa={dirty:!0,profile:l.profile},Fa={},ja=[],ya={},Ga={};q("dither",3024);q("blend.enable",3042);y("blend.color","blendColor",[0,0,0,0]);y("blend.equation","blendEquationSeparate",[32774,32774]);y("blend.func","blendFuncSeparate",
[1,0,1,0]);q("depth.enable",2929,!0);y("depth.func","depthFunc",513);y("depth.range","depthRange",[0,1]);y("depth.mask","depthMask",!0);y("colorMask","colorMask",[!0,!0,!0,!0]);q("cull.enable",2884);y("cull.face","cullFace",1029);y("frontFace","frontFace",2305);y("lineWidth","lineWidth",1);q("polygonOffset.enable",32823);y("polygonOffset.offset","polygonOffset",[0,0]);q("sample.alpha",32926);q("sample.enable",32928);y("sample.coverage","sampleCoverage",[1,!1]);q("stencil.enable",2960);y("stencil.mask",
"stencilMask",-1);y("stencil.func","stencilFunc",[519,0,-1]);y("stencil.opFront","stencilOpSeparate",[1028,7680,7680,7680]);y("stencil.opBack","stencilOpSeparate",[1029,7680,7680,7680]);q("scissor.enable",3089);y("scissor.box","scissor",[0,0,a.drawingBufferWidth,a.drawingBufferHeight]);y("viewport","viewport",[0,0,a.drawingBufferWidth,a.drawingBufferHeight]);var Ja={gl:a,context:v,strings:b,next:Fa,current:oa,draw:r,elements:f,buffer:e,shader:t,attributes:m.state,uniforms:n,framebuffer:k,extensions:c,
timer:u,isBufferArgs:qa},Ba={primTypes:Ea,compareFuncs:Ra,blendFuncs:pb,blendEquations:Ca,stencilOps:Jb,glTypes:sa,orientationType:nb};K&&(Ba.backBuffer=[1029],Ba.drawBuffer=g(d.maxDrawbuffers,function(a){return 0===a?[0]:g(a,function(a){return 36064+a})}));var aa=0;return{next:Fa,current:oa,procs:function(){var a=B(),b=a.proc("poll"),c=a.proc("refresh"),e=a.block();b(e);c(e);var f=a.shared,h=f.gl,k=f.next,n=f.current;e(n,".dirty\x3dfalse;");Q(a,b);Q(a,c,null,!0);var m;X&&(m=a.link(X));for(var t=
0;t<d.maxAttributes;++t){var r=c.def(f.attributes,"[",t,"]"),v=a.cond(r,".buffer");v.then(h,".enableVertexAttribArray(",t,");",h,".bindBuffer(",34962,",",r,".buffer.buffer);",h,".vertexAttribPointer(",t,",",r,".size,",r,".type,",r,".normalized,",r,".stride,",r,".offset);")["else"](h,".disableVertexAttribArray(",t,");",h,".vertexAttrib4f(",t,",",r,".x,",r,".y,",r,".z,",r,".w);",r,".buffer\x3dnull;");c(v);X&&c(m,".vertexAttribDivisorANGLE(",t,",",r,".divisor);")}Object.keys(ya).forEach(function(d){var g=
ya[d],f=e.def(k,".",d),m=a.block();m("if(",f,"){",h,".enable(",g,")}else{",h,".disable(",g,")}",n,".",d,"\x3d",f,";");c(m);b("if(",f,"!\x3d\x3d",n,".",d,"){",m,"}")});Object.keys(Ga).forEach(function(d){var f=Ga[d],m=oa[d],t,r,v=a.block();v(h,".",f,"(");E(m)?(f=m.length,t=a.global.def(k,".",d),r=a.global.def(n,".",d),v(g(f,function(a){return t+"["+a+"]"}),");",g(f,function(a){return r+"["+a+"]\x3d"+t+"["+a+"];"}).join("")),b("if(",g(f,function(a){return t+"["+a+"]!\x3d\x3d"+r+"["+a+"]"}).join("||"),
"){",v,"}")):(t=e.def(k,".",d),r=e.def(n,".",d),v(t,");",n,".",d,"\x3d",t,";"),b("if(",t,"!\x3d\x3d",r,"){",v,"}"));c(v)});return a.compile()}(),compile:function(a,b,c,d,e){var g=B();g.stats=g.link(e);Object.keys(b["static"]).forEach(function(a){pa(g,b,a)});Hb.forEach(function(b){pa(g,a,b)});c=H(a,b,c,d,g);z(g,c);ba(g,c);da(g,c);return g.compile()}}}function da(a,b){for(var c=0;c<a.length;++c)if(a[c]===b)return c;return-1}var K=function(a,b){for(var c=Object.keys(b),d=0;d<c.length;++d)a[c[d]]=b[c[d]];
return a},ja=0,xa={DynamicVariable:a,define:function(b,c){return new a(b,h(c+""))},isDynamic:function(b){return"function"===typeof b&&!b._reglType||b instanceof a},unbox:function(b,c){return"function"===typeof b?new a(0,b):b},accessor:h},za={next:"function"===typeof requestAnimationFrame?function(a){return requestAnimationFrame(a)}:function(a){return setTimeout(a,16)},cancel:"function"===typeof cancelAnimationFrame?function(a){return cancelAnimationFrame(a)}:clearTimeout},ka="undefined"!==typeof performance&&
performance.now?function(){return performance.now()}:function(){return+new Date},wa=v();wa.zero=v();var ta=function(a,b){var c=1;b.ext_texture_filter_anisotropic&&(c=a.getParameter(34047));var d=1,e=1;b.webgl_draw_buffers&&(d=a.getParameter(34852),e=a.getParameter(36063));var g=!!b.oes_texture_float;if(g){g=a.createTexture();a.bindTexture(3553,g);a.texImage2D(3553,0,6408,1,1,0,6408,5126,null);var f=a.createFramebuffer();a.bindFramebuffer(36160,f);a.framebufferTexture2D(36160,36064,3553,g,0);a.bindTexture(3553,
null);if(36053!==a.checkFramebufferStatus(36160))g=!1;else{a.viewport(0,0,1,1);a.clearColor(1,0,0,1);a.clear(16384);var h=wa.allocType(5126,4);a.readPixels(0,0,1,1,6408,5126,h);a.getError()?g=!1:(a.deleteFramebuffer(f),a.deleteTexture(g),g=1===h[0]);wa.freeType(h)}}h=!0;"undefined"!==typeof navigator&&(/MSIE/.test(navigator.userAgent)||/Trident\//.test(navigator.appVersion)||/Edge/.test(navigator.userAgent))||(h=a.createTexture(),f=wa.allocType(5121,36),a.activeTexture(33984),a.bindTexture(34067,
h),a.texImage2D(34069,0,6408,3,3,0,6408,5121,f),wa.freeType(f),a.bindTexture(34067,null),a.deleteTexture(h),h=!a.getError());return{colorBits:[a.getParameter(3410),a.getParameter(3411),a.getParameter(3412),a.getParameter(3413)],depthBits:a.getParameter(3414),stencilBits:a.getParameter(3415),subpixelBits:a.getParameter(3408),extensions:Object.keys(b).filter(function(a){return!!b[a]}),maxAnisotropic:c,maxDrawbuffers:d,maxColorAttachments:e,pointSizeDims:a.getParameter(33901),lineWidthDims:a.getParameter(33902),
maxViewportDims:a.getParameter(3386),maxCombinedTextureUnits:a.getParameter(35661),maxCubeMapSize:a.getParameter(34076),maxRenderbufferSize:a.getParameter(34024),maxTextureUnits:a.getParameter(34930),maxTextureSize:a.getParameter(3379),maxAttributes:a.getParameter(34921),maxVertexUniforms:a.getParameter(36347),maxVertexTextureUnits:a.getParameter(35660),maxVaryingVectors:a.getParameter(36348),maxFragmentUniforms:a.getParameter(36349),glsl:a.getParameter(35724),renderer:a.getParameter(7937),vendor:a.getParameter(7936),
version:a.getParameter(7938),readFloat:g,npotTextureCube:h}},aa=function(a){return a instanceof Uint8Array||a instanceof Uint16Array||a instanceof Uint32Array||a instanceof Int8Array||a instanceof Int16Array||a instanceof Int32Array||a instanceof Float32Array||a instanceof Float64Array||a instanceof Uint8ClampedArray},ma=function(a){return Object.keys(a).map(function(b){return a[b]})},Aa={shape:function(a){for(var b=[];a.length;a=a[0])b.push(a.length);return b},flatten:function(a,b,c,d){var e=1;if(b.length)for(var g=
0;g<b.length;++g)e*=b[g];else e=0;c=d||wa.allocType(c,e);switch(b.length){case 0:break;case 1:d=b[0];for(b=0;b<d;++b)c[b]=a[b];break;case 2:d=b[0];b=b[1];for(g=e=0;g<d;++g)for(var f=a[g],h=0;h<b;++h)c[e++]=f[h];break;case 3:l(a,b[0],b[1],b[2],c,0);break;default:p(a,b,0,c,0)}return c}},va={"[object Int8Array]":5120,"[object Int16Array]":5122,"[object Int32Array]":5124,"[object Uint8Array]":5121,"[object Uint8ClampedArray]":5121,"[object Uint16Array]":5123,"[object Uint32Array]":5125,"[object Float32Array]":5126,
"[object Float64Array]":5121,"[object ArrayBuffer]":5121},sa={int8:5120,int16:5122,int32:5124,uint8:5121,uint16:5123,uint32:5125,"float":5126,float32:5126},Ca={dynamic:35048,stream:35040,"static":35044},Ga=Aa.flatten,Ja=Aa.shape,oa=[];oa[5120]=1;oa[5122]=2;oa[5124]=4;oa[5121]=1;oa[5123]=2;oa[5125]=4;oa[5126]=4;var Ea={points:0,point:0,lines:1,line:1,triangles:4,triangle:4,"line loop":2,"line strip":3,"triangle strip":5,"triangle fan":6},na=new Float32Array(1),ua=new Uint32Array(na.buffer),Fa=[9984,
9986,9985,9987],X=[0,6409,6410,6407,6408],Pa={};Pa[6409]=Pa[6406]=Pa[6402]=1;Pa[34041]=Pa[6410]=2;Pa[6407]=Pa[35904]=3;Pa[6408]=Pa[35906]=4;var Ba=H("HTMLCanvasElement"),Ia=H("CanvasRenderingContext2D"),Ka=H("ImageBitmap"),Ua=H("HTMLImageElement"),Ya=H("HTMLVideoElement"),Cb=Object.keys(va).concat([Ba,Ia,Ka,Ua,Ya]),eb=[];eb[5121]=1;eb[5126]=4;eb[36193]=2;eb[5123]=2;eb[5125]=4;var Ta=[];Ta[32854]=2;Ta[32855]=2;Ta[36194]=2;Ta[34041]=4;Ta[33776]=.5;Ta[33777]=.5;Ta[33778]=1;Ta[33779]=1;Ta[35986]=.5;Ta[35987]=
1;Ta[34798]=1;Ta[35840]=.5;Ta[35841]=.25;Ta[35842]=.5;Ta[35843]=.25;Ta[36196]=.5;var Wa=[];Wa[32854]=2;Wa[32855]=2;Wa[36194]=2;Wa[33189]=2;Wa[36168]=1;Wa[34041]=4;Wa[35907]=4;Wa[34836]=16;Wa[34842]=8;Wa[34843]=6;var $a=function(a,b,c,d,e){function g(a){this.id=n++;this.refCount=1;this.renderbuffer=a;this.format=32854;this.height=this.width=0;e.profile&&(this.stats={size:0})}function f(b){var c=b.renderbuffer;a.bindRenderbuffer(36161,null);a.deleteRenderbuffer(c);b.renderbuffer=null;b.refCount=0;delete m[b.id];
d.renderbufferCount--}var h={rgba4:32854,rgb565:36194,"rgb5 a1":32855,depth:33189,stencil:36168,"depth stencil":34041};b.ext_srgb&&(h.srgba=35907);b.ext_color_buffer_half_float&&(h.rgba16f=34842,h.rgb16f=34843);b.webgl_color_buffer_float&&(h.rgba32f=34836);var k=[];Object.keys(h).forEach(function(a){k[h[a]]=a});var n=0,m={};g.prototype.decRef=function(){0>=--this.refCount&&f(this)};e.profile&&(d.getTotalRenderbufferSize=function(){var a=0;Object.keys(m).forEach(function(b){a+=m[b].stats.size});return a});
return{create:function(b,c){function f(b,c){var d=0,g=0,m=32854;"object"===typeof b&&b?("shape"in b?(g=b.shape,d=g[0]|0,g=g[1]|0):("radius"in b&&(d=g=b.radius|0),"width"in b&&(d=b.width|0),"height"in b&&(g=b.height|0)),"format"in b&&(m=h[b.format])):"number"===typeof b?(d=b|0,g="number"===typeof c?c|0:d):b||(d=g=1);if(d!==n.width||g!==n.height||m!==n.format)return f.width=n.width=d,f.height=n.height=g,n.format=m,a.bindRenderbuffer(36161,n.renderbuffer),a.renderbufferStorage(36161,m,d,g),e.profile&&
(n.stats.size=Wa[n.format]*n.width*n.height),f.format=k[n.format],f}var n=new g(a.createRenderbuffer());m[n.id]=n;d.renderbufferCount++;f(b,c);f.resize=function(b,c){b|=0;c=c|0||b;if(b===n.width&&c===n.height)return f;f.width=n.width=b;f.height=n.height=c;a.bindRenderbuffer(36161,n.renderbuffer);a.renderbufferStorage(36161,n.format,b,c);e.profile&&(n.stats.size=Wa[n.format]*n.width*n.height);return f};f._reglType="renderbuffer";f._renderbuffer=n;e.profile&&(f.stats=n.stats);f.destroy=function(){n.decRef()};
return f},clear:function(){ma(m).forEach(f)},restore:function(){ma(m).forEach(function(b){b.renderbuffer=a.createRenderbuffer();a.bindRenderbuffer(36161,b.renderbuffer);a.renderbufferStorage(36161,b.format,b.width,b.height)});a.bindRenderbuffer(36161,null)}}},rb=[];rb[6408]=4;rb[6407]=3;var mb=[];mb[5121]=1;mb[5126]=4;mb[36193]=2;var cb=["x","y","z","w"],Hb="blend.func blend.equation stencil.func stencil.opFront stencil.opBack sample.coverage viewport scissor.box polygonOffset.offset".split(" "),
pb={0:0,1:1,zero:0,one:1,"src color":768,"one minus src color":769,"src alpha":770,"one minus src alpha":771,"dst color":774,"one minus dst color":775,"dst alpha":772,"one minus dst alpha":773,"constant color":32769,"one minus constant color":32770,"constant alpha":32771,"one minus constant alpha":32772,"src alpha saturate":776},Ra={never:512,less:513,"\x3c":513,equal:514,"\x3d":514,"\x3d\x3d":514,"\x3d\x3d\x3d":514,lequal:515,"\x3c\x3d":515,greater:516,"\x3e":516,notequal:517,"!\x3d":517,"!\x3d\x3d":517,
gequal:518,"\x3e\x3d":518,always:519},Jb={0:0,zero:0,keep:7680,replace:7681,increment:7682,decrement:7683,"increment wrap":34055,"decrement wrap":34056,invert:5386},nb={cw:2304,ccw:2305},kc=new ea(!1,!1,!1,function(){}),kb=function(a,b){function c(){this.endQueryIndex=this.startQueryIndex=-1;this.sum=0;this.stats=null}function d(a,b,d){var e=f.pop()||new c;e.startQueryIndex=a;e.endQueryIndex=b;e.sum=0;e.stats=d;h.push(e)}if(!b.ext_disjoint_timer_query)return null;var e=[],g=[],f=[],h=[],k=[],n=[];
return{beginQuery:function(a){var c=e.pop()||b.ext_disjoint_timer_query.createQueryEXT();b.ext_disjoint_timer_query.beginQueryEXT(35007,c);g.push(c);d(g.length-1,g.length,a)},endQuery:function(){b.ext_disjoint_timer_query.endQueryEXT(35007)},pushScopeStats:d,update:function(){var a;var c=g.length;if(0!==c){n.length=Math.max(n.length,c+1);k.length=Math.max(k.length,c+1);k[0]=0;var d=n[0]=0;for(a=c=0;a<g.length;++a){var m=g[a];b.ext_disjoint_timer_query.getQueryObjectEXT(m,34919)?(d+=b.ext_disjoint_timer_query.getQueryObjectEXT(m,
34918),e.push(m)):g[c++]=m;k[a+1]=d;n[a+1]=c}g.length=c;for(a=c=0;a<h.length;++a){d=h[a];var t=d.startQueryIndex;m=d.endQueryIndex;d.sum+=k[m]-k[t];t=n[t];m=n[m];m===t?(d.stats.gpuTime+=d.sum/1E6,f.push(d)):(d.startQueryIndex=t,d.endQueryIndex=m,h[c++]=d)}h.length=c}},getNumPendingQueries:function(){return g.length},clear:function(){e.push.apply(e,g);for(var a=0;a<e.length;a++)b.ext_disjoint_timer_query.deleteQueryEXT(e[a]);g.length=0;e.length=0},restore:function(){g.length=0;e.length=0}}};return function(a){function b(){if(0===
W.length)G&&G.update(),qa=null;else{qa=za.next(b);v();for(var a=W.length-1;0<=a;--a){var c=W[a];c&&c(N,null,0)}p.flush();G&&G.update()}}function c(){!qa&&0<W.length&&(qa=za.next(b))}function g(){qa&&(za.cancel(b),qa=null)}function f(a){a.preventDefault();g();fa.forEach(function(a){a()})}function h(a){p.getError();y.restore();Q.restore();H.restore();M.restore();x.restore();O.restore();G&&G.restore();U.procs.refresh();c();ha.forEach(function(a){a()})}function k(a){function b(a){var b={},c={};Object.keys(a).forEach(function(d){var e=
a[d];xa.isDynamic(e)?c[d]=xa.unbox(e,d):b[d]=e});return{dynamic:c,"static":b}}function c(a){for(;m.length<a;)m.push(null);return m}var d=b(a.context||{}),e=b(a.uniforms||{}),g=b(a.attributes||{}),f=b(function(a){function b(a){if(a in c){var b=c[a];delete c[a];Object.keys(b).forEach(function(d){c[a+"."+d]=b[d]})}}var c=K({},a);delete c.uniforms;delete c.attributes;delete c.context;"stencil"in c&&c.stencil.op&&(c.stencil.opBack=c.stencil.opFront=c.stencil.op,delete c.stencil.op);b("blend");b("depth");
b("cull");b("stencil");b("polygonOffset");b("scissor");b("sample");return c}(a));a={gpuTime:0,cpuTime:0,count:0};d=U.compile(f,g,e,d,a);var h=d.draw,k=d.batch,n=d.scope,m=[];return K(function(a,b){var d;if("function"===typeof a)return n.call(this,null,a,0);if("function"===typeof b)if("number"===typeof a)for(d=0;d<a;++d)n.call(this,null,b,d);else if(Array.isArray(a))for(d=0;d<a.length;++d)n.call(this,a[d],b,d);else return n.call(this,a,b,0);else if("number"===typeof a){if(0<a)return k.call(this,c(a|
0),a|0)}else if(Array.isArray(a)){if(a.length)return k.call(this,a,a.length)}else return h.call(this,a)},{stats:a})}function n(a,b){a=0;U.procs.poll();var c=b.color;c&&(p.clearColor(+c[0]||0,+c[1]||0,+c[2]||0,+c[3]||0),a|=16384);"depth"in b&&(p.clearDepth(+b.depth),a|=256);"stencil"in b&&(p.clearStencil(b.stencil|0),a|=1024);p.clear(a)}function m(a){W.push(a);c();return{cancel:function(){function b(){var a=da(W,b);W[a]=W[W.length-1];--W.length;0>=W.length&&g()}var c=da(W,a);W[c]=b}}}function t(){var a=
z.viewport,b=z.scissor_box;a[0]=a[1]=b[0]=b[1]=0;N.viewportWidth=N.framebufferWidth=N.drawingBufferWidth=a[2]=b[2]=p.drawingBufferWidth;N.viewportHeight=N.framebufferHeight=N.drawingBufferHeight=a[3]=b[3]=p.drawingBufferHeight}function v(){N.tick+=1;N.time=l();t();U.procs.poll()}function u(){t();U.procs.refresh();G&&G.update()}function l(){return(ka()-L)/1E3}a=r(a);if(!a)return null;var p=a.gl,q=p.getContextAttributes();p.isContextLost();var y=d(p,a);if(!y)return null;var B=e(),A={bufferCount:0,elementsCount:0,
framebufferCount:0,shaderCount:0,textureCount:0,cubeCount:0,renderbufferCount:0,maxTextureUnits:0},D=y.extensions,G=kb(p,D),L=ka(),I=p.drawingBufferWidth,E=p.drawingBufferHeight,N={tick:0,time:0,viewportWidth:I,viewportHeight:E,framebufferWidth:I,framebufferHeight:E,drawingBufferWidth:I,drawingBufferHeight:E,pixelRatio:a.pixelRatio},J=ta(p,D);I=T(p,D,J,B);var H=C(p,A,a,I),w=P(p,D,H,A),Q=Y(p,B,A,a),M=R(p,D,J,function(){U.procs.poll()},N,A,a),x=$a(p,D,J,A,a),O=ca(p,D,J,M,x,A),U=pa(p,B,D,J,H,w,M,O,{},
I,Q,{elements:null,primitive:4,count:-1,offset:0,instances:-1},N,G,a);B=ia(p,O,U.procs.poll,N,q,D,J);var z=U.next,S=p.canvas,W=[],fa=[],ha=[],ea=[a.onDestroy],qa=null;S&&(S.addEventListener("webglcontextlost",f,!1),S.addEventListener("webglcontextrestored",h,!1));var la=O.setFBO=k({framebuffer:xa.define.call(null,1,"framebuffer")});u();q=K(k,{clear:function(a){if("framebuffer"in a)if(a.framebuffer&&"framebufferCube"===a.framebuffer_reglType)for(var b=0;6>b;++b)la(K({framebuffer:a.framebuffer.faces[b]},
a),n);else la(a,n);else n(null,a)},prop:xa.define.bind(null,1),context:xa.define.bind(null,2),"this":xa.define.bind(null,3),draw:k({}),buffer:function(a){return H.create(a,34962,!1,!1)},elements:function(a){return w.create(a,!1)},texture:M.create2D,cube:M.createCube,renderbuffer:x.create,framebuffer:O.create,framebufferCube:O.createCube,attributes:q,frame:m,on:function(a,b){switch(a){case "frame":return m(b);case "lost":var c=fa;break;case "restore":c=ha;break;case "destroy":c=ea}c.push(b);return{cancel:function(){for(var a=
0;a<c.length;++a)if(c[a]===b){c[a]=c[c.length-1];c.pop();break}}}},limits:J,hasExtension:function(a){return 0<=J.extensions.indexOf(a.toLowerCase())},read:B,destroy:function(){W.length=0;g();S&&(S.removeEventListener("webglcontextlost",f),S.removeEventListener("webglcontextrestored",h));Q.clear();O.clear();x.clear();M.clear();w.clear();H.clear();G&&G.clear();ea.forEach(function(a){a()})},_gl:p,_refresh:u,poll:function(){v();G&&G.update()},now:l,stats:A});a.onDone(null,q);return q}})},{}],487:[function(a,
p,l){var m="",k;p.exports=function(a,e){if("string"!==typeof a)throw new TypeError("expected a string");if(1===e)return a;if(2===e)return a+a;var f=a.length*e;if(k!==a||"undefined"===typeof k)k=a,m="";else if(m.length>=f)return m.substr(0,f);for(;f>m.length&&1<e;)e&1&&(m+=a),e>>=1,a+=a;m+=a;return m=m.substr(0,f)}},{}],488:[function(a,p,l){(function(a){p.exports=a.performance&&a.performance.now?function(){return performance.now()}:Date.now||function(){return+new Date}}).call(this,"undefined"!==typeof x?
x:"undefined"!==typeof self?self:"undefined"!==typeof window?window:{})},{}],489:[function(a,p,l){p.exports=function(a){for(var k=a.length,h=a[a.length-1],e=k,f=k-2;0<=f;--f){var b=h,n=a[f];h=b+n;b=h-b;if(n-=b)a[--e]=h,h=n}var m=0;for(f=e;f<k;++f)b=a[f],n=h,h=b+n,b=h-b,(n-=b)&&(a[m++]=n);a[m++]=h;a.length=m;return a}},{}],490:[function(a,p,l){function m(a,b){for(var c=Array(a.length-1),d=1;d<a.length;++d)for(var e=c[d-1]=Array(a.length-1),g=0,f=0;g<a.length;++g)g!==b&&(e[f++]=a[d][g]);return c}function k(a){if(1===
a.length)return a[0];if(2===a.length)return["sum(",a[0],",",a[1],")"].join("");var b=a.length>>1;return["sum(",k(a.slice(0,b)),",",k(a.slice(b)),")"].join("")}function h(a){if(2===a.length)return["sum(prod(",a[0][0],",",a[1][1],"),prod(-",a[0][1],",",a[1][0],"))"].join("");for(var b=[],c=0;c<a.length;++c)b.push(["scale(",h(m(a,c)),",",c&1?"-":"",a[0][c],")"].join(""));return k(b)}function e(a){for(var d=Function,c=Array(a),e=0;e<a;++e){c[e]=Array(a);for(var k=0;k<a;++k)c[e][k]=["m[",e,"][",k,"]"].join("")}return(new d("sum",
"scale","prod","compress",["function robustDeterminant",a,"(m){return compress(",h(c),")};return robustDeterminant",a].join("")))(b,n,f,u)}var f=a("two-product"),b=a("robust-sum"),n=a("robust-scale"),u=a("robust-compress"),r=[function(){return[0]},function(a){return[a[0][0]]}];(function(){for(;6>r.length;)r.push(e(r.length));for(var a=[],b=["function robustDeterminant(m){switch(m.length){"],c=0;6>c;++c)a.push("det"+c),b.push("case ",c,":return det",c,"(m);");b.push("}var det\x3dCACHE[m.length];if(!det)det\x3dCACHE[m.length]\x3dgen(m.length);return det(m);}return robustDeterminant");
a.push("CACHE","gen",b.join(""));a=Function.apply(void 0,a);p.exports=a.apply(void 0,r.concat([r,e]));for(c=0;c<r.length;++c)p.exports[c]=r[c]})()},{"robust-compress":489,"robust-scale":496,"robust-sum":499,"two-product":527}],491:[function(a,p,l){var m=a("two-product"),k=a("robust-sum");p.exports=function(a,e){for(var f=m(a[0],e[0]),b=1;b<a.length;++b)f=k(f,m(a[b],e[b]));return f}},{"robust-sum":499,"two-product":527}],492:[function(a,p,l){function m(a,b){for(var c=Array(a.length-1),d=1;d<a.length;++d)for(var e=
c[d-1]=Array(a.length-1),g=0,f=0;g<a.length;++g)g!==b&&(e[f++]=a[d][g]);return c}function k(a){if(1===a.length)return a[0];if(2===a.length)return["sum(",a[0],",",a[1],")"].join("");var b=a.length>>1;return["sum(",k(a.slice(0,b)),",",k(a.slice(b)),")"].join("")}function h(a,b){return"m"===a.charAt(0)?"w"===b.charAt(0)?(a=a.split("["),["w",b.substr(1),"m",a[0].substr(1)].join("")):["prod(",a,",",b,")"].join(""):h(b,a)}function e(a){if(2===a.length)return[["diff(",h(a[0][0],a[1][1]),",",h(a[1][0],a[0][1]),
")"].join("")];for(var b=[],c=0;c<a.length;++c)b.push(["scale(",k(e(m(a,c))),",",c&1?"-":"",a[0][c],")"].join(""));return b}function f(a,b){for(var c=[],d=0;d<b-2;++d)c.push(["prod(m",a,"[",d,"],m",a,"[",d,"])"].join(""));return k(c)}function b(a){for(var b=[],c=[],h=Array(a),n=0;n<a;++n){h[n]=Array(a);for(var v=0;v<a;++v)h[n][v]=["m",v,"[",a-n-2,"]"].join("")}for(n=0;n<a;++n)h[0][n]="1",h[a-1][n]="w"+n;for(n=0;n<a;++n)0===(n&1)?b.push.apply(b,e(m(h,n))):c.push.apply(c,e(m(h,n)));b=k(b);c=k(c);h=
"exactInSphere"+a;v=[];for(n=0;n<a;++n)v.push("m"+n);v=["function ",h,"(",v.join(),"){"];for(n=0;n<a;++n){v.push("var w",n,"\x3d",f(n,a),";");for(var l=0;l<a;++l)l!==n&&v.push("var w",n,"m",l,"\x3dscale(w",n,",m",l,"[0]);")}v.push("var p\x3d",b,",n\x3d",c,",d\x3ddiff(p,n);return d[d.length-1];}return ",h);return(new Function("sum","diff","prod","scale",v.join("")))(r,d,u,g)}function n(a){var d=c[a.length];d||(d=c[a.length]=b(a.length));return d.apply(void 0,a)}var u=a("two-product"),r=a("robust-sum"),
d=a("robust-subtract"),g=a("robust-scale"),c=[function(){return 0},function(){return 0},function(){return 0}];(function(){for(;6>=c.length;)c.push(b(c.length));for(var a=[],d=["slow"],e=0;6>=e;++e)a.push("a"+e),d.push("o"+e);var g=["function testInSphere(",a.join(),"){switch(arguments.length){case 0:case 1:return 0;"];for(e=2;6>=e;++e)g.push("case ",e,":return o",e,"(",a.slice(0,e).join(),");");g.push("}var s\x3dnew Array(arguments.length);for(var i\x3d0;i\x3carguments.length;++i){s[i]\x3darguments[i]};return slow(s);}return testInSphere");
d.push(g.join(""));a=Function.apply(void 0,d);p.exports=a.apply(void 0,[n].concat(c));for(e=0;6>=e;++e)p.exports[e]=c[e]})()},{"robust-scale":496,"robust-subtract":498,"robust-sum":499,"two-product":527}],493:[function(a,p,l){function m(a){for(var e="robustLinearSolve"+a+"d",b=["function ",e,"(A,b){return ["],h=0;h<a;++h){b.push("det([");for(var m=0;m<a;++m){0<m&&b.push(",");b.push("[");for(var r=0;r<a;++r)0<r&&b.push(","),r===h?b.push("+b[",m,"]"):b.push("+A[",m,"][",r,"]");b.push("]")}b.push("]),")}b.push("det(A)]}return ",
e);e=new Function("det",b.join(""));return 6>a?e(k[a]):e(k)}var k=a("robust-determinant"),h=[function(){return[0]},function(a,f){return[[f[0]],[a[0][0]]]}];(function(){for(;6>h.length;)h.push(m(h.length));for(var a=[],f=["function dispatchLinearSolve(A,b){switch(A.length){"],b=0;6>b;++b)a.push("s"+b),f.push("case ",b,":return s",b,"(A,b);");f.push("}var s\x3dCACHE[A.length];if(!s)s\x3dCACHE[A.length]\x3dg(A.length);return s(A,b)}return dispatchLinearSolve");a.push("CACHE","g",f.join(""));a=Function.apply(void 0,
a);p.exports=a.apply(void 0,h.concat([h,m]));for(b=0;6>b;++b)p.exports[b]=h[b]})()},{"robust-determinant":490}],494:[function(a,p,l){function m(a,b){for(var c=Array(a.length-1),d=1;d<a.length;++d)for(var e=c[d-1]=Array(a.length-1),g=0,f=0;g<a.length;++g)g!==b&&(e[f++]=a[d][g]);return c}function k(a){if(1===a.length)return a[0];if(2===a.length)return["sum(",a[0],",",a[1],")"].join("");var b=a.length>>1;return["sum(",k(a.slice(0,b)),",",k(a.slice(b)),")"].join("")}function h(a){if(2===a.length)return[["sum(prod(",
a[0][0],",",a[1][1],"),prod(-",a[0][1],",",a[1][0],"))"].join("")];for(var b=[],c=0;c<a.length;++c)b.push(["scale(",k(h(m(a,c))),",",c&1?"-":"",a[0][c],")"].join(""));return b}function e(a){for(var c=[],d=[],e=Array(a),g=0;g<a;++g){e[g]=Array(a);for(var f=0;f<a;++f)e[g][f]=["m",f,"[",a-g-1,"]"].join("")}g=[];for(f=0;f<a;++f)0===(f&1)?c.push.apply(c,h(m(e,f))):d.push.apply(d,h(m(e,f))),g.push("m"+f);c=k(c);d=k(d);a="orientation"+a+"Exact";a=["function ",a,"(",g.join(),"){var p\x3d",c,",n\x3d",d,",d\x3dsub(p,n);return d[d.length-1];};return ",
a].join("");return(new Function("sum","prod","scale","sub",a))(n,b,u,r)}function f(a){var b=c[a.length];b||(b=c[a.length]=e(a.length));return b.apply(void 0,a)}var b=a("two-product"),n=a("robust-sum"),u=a("robust-scale"),r=a("robust-subtract"),d=e(3),g=e(4),c=[function(){return 0},function(){return 0},function(a,b){return b[0]-a[0]},function(a,b,c){var e=(a[1]-c[1])*(b[0]-c[0]),g=(a[0]-c[0])*(b[1]-c[1]),f=e-g;if(0<e){if(0>=g)return f;e+=g}else if(0>e){if(0<=g)return f;e=-(e+g)}else return f;e*=3.3306690738754716E-16;
return f>=e||f<=-e?f:d(a,b,c)},function(a,b,c,d){var e=a[0]-d[0],f=b[0]-d[0],h=c[0]-d[0],k=a[1]-d[1],n=b[1]-d[1],m=c[1]-d[1],t=a[2]-d[2],r=b[2]-d[2],v=c[2]-d[2],u=f*m,l=h*n;h*=k;m*=e;e*=n;k*=f;f=t*(u-l)+r*(h-m)+v*(e-k);t=7.771561172376103E-16*((Math.abs(u)+Math.abs(l))*Math.abs(t)+(Math.abs(h)+Math.abs(m))*Math.abs(r)+(Math.abs(e)+Math.abs(k))*Math.abs(v));return f>t||-f>t?f:g(a,b,c,d)}];(function(){for(;5>=c.length;)c.push(e(c.length));for(var a=[],b=["slow"],d=0;5>=d;++d)a.push("a"+d),b.push("o"+
d);var g=["function getOrientation(",a.join(),"){switch(arguments.length){case 0:case 1:return 0;"];for(d=2;5>=d;++d)g.push("case ",d,":return o",d,"(",a.slice(0,d).join(),");");g.push("}var s\x3dnew Array(arguments.length);for(var i\x3d0;i\x3carguments.length;++i){s[i]\x3darguments[i]};return slow(s);}return getOrientation");b.push(g.join(""));a=Function.apply(void 0,b);p.exports=a.apply(void 0,[f].concat(c));for(d=0;5>=d;++d)p.exports[d]=c[d]})()},{"robust-scale":496,"robust-subtract":498,"robust-sum":499,
"two-product":527}],495:[function(a,p,l){var m=a("robust-sum"),k=a("robust-scale");p.exports=function(a,e){if(1===a.length)return k(e,a[0]);if(1===e.length)return k(a,e[0]);if(0===a.length||0===e.length)return[0];var f=[0];if(a.length<e.length)for(var b=0;b<a.length;++b)f=m(f,k(e,a[b]));else for(b=0;b<e.length;++b)f=m(f,k(a,e[b]));return f}},{"robust-scale":496,"robust-sum":499}],496:[function(a,p,l){var m=a("two-product"),k=a("two-sum");p.exports=function(a,e){var f=a.length;if(1===f)return a=m(a[0],
e),a[0]?a:[a[1]];var b=Array(2*f),h=[.1,.1],u=[.1,.1],r=0;m(a[0],e,h);h[0]&&(b[r++]=h[0]);for(var d=1;d<f;++d){m(a[d],e,u);k(h[1],u[0],h);h[0]&&(b[r++]=h[0]);var g=u[1],c=h[1],v=g+c;g=c-(v-g);h[1]=v;g&&(b[r++]=g)}h[1]&&(b[r++]=h[1]);0===r&&(b[r++]=0);b.length=r;return b}},{"two-product":527,"two-sum":528}],497:[function(a,p,l){p.exports=function(a,h,e,f){var b=m(a,e,f),k=m(h,e,f);if(0<b&&0<k||0>b&&0>k)return!1;var u=m(e,a,h),r=m(f,a,h);if(0<u&&0<r||0>u&&0>r)return!1;if(0===b&&0===k&&0===u&&0===r){a:{for(b=
0;2>b;++b){k=a[b];u=h[b];r=Math.max(k,u);var d=e[b],g=f[b],c=Math.min(d,g);if(Math.max(d,g)<Math.min(k,u)||r<c){a=!1;break a}}a=!0}return a}return!0};var m=a("robust-orientation")[3]},{"robust-orientation":494}],498:[function(a,p,l){p.exports=function(a,k){var h=a.length|0,e=k.length|0;if(1===h&&1===e)return a=a[0],h=-k[0],k=a+h,e=k-a,k=(a=a-(k-e)+(h-e))?[a,k]:[k],k;var f=Array(h+e),b=0,n=0,m=0,r=Math.abs,d=a[n],g=r(d),c=-k[m],v=r(c);if(g<v){var t=d;n+=1;n<h&&(d=a[n],g=r(d))}else t=c,m+=1,m<e&&(c=
-k[m],v=r(c));if(n<h&&g<v||m>=e){var l=d;n+=1;n<h&&(d=a[n],g=r(d))}else l=c,m+=1,m<e&&(c=-k[m],v=r(c));var p=l+t;t-=p-l;for(var q=p,G;n<h&&m<e;)g<v?(l=d,n+=1,n<h&&(d=a[n],g=r(d))):(l=c,m+=1,m<e&&(c=-k[m],v=r(c))),p=l+t,l=p-l,(l=t-l)&&(f[b++]=l),l=q+p,G=l-q,t=l-G,p-=G,q-=t,t=q+p,q=l;for(;n<h;)l=d,p=l+t,l=p-l,(l=t-l)&&(f[b++]=l),l=q+p,G=l-q,t=l-G,p-=G,q-=t,t=q+p,q=l,n+=1,n<h&&(d=a[n]);for(;m<e;)l=c,p=l+t,l=p-l,(l=t-l)&&(f[b++]=l),l=q+p,G=l-q,t=l-G,p-=G,q-=t,t=q+p,q=l,m+=1,m<e&&(c=-k[m]);t&&(f[b++]=
t);q&&(f[b++]=q);b||(f[b++]=0);f.length=b;return f}},{}],499:[function(a,p,l){p.exports=function(a,k){var h=a.length|0,e=k.length|0;if(1===h&&1===e)return a=a[0],h=k[0],k=a+h,e=k-a,k=(a=a-(k-e)+(h-e))?[a,k]:[k],k;var f=Array(h+e),b=0,n=0,m=0,r=Math.abs,d=a[n],g=r(d),c=k[m],v=r(c);if(g<v){var t=d;n+=1;n<h&&(d=a[n],g=r(d))}else t=c,m+=1,m<e&&(c=k[m],v=r(c));if(n<h&&g<v||m>=e){var l=d;n+=1;n<h&&(d=a[n],g=r(d))}else l=c,m+=1,m<e&&(c=k[m],v=r(c));var p=l+t;t-=p-l;for(var q=p,G;n<h&&m<e;)g<v?(l=d,n+=1,
n<h&&(d=a[n],g=r(d))):(l=c,m+=1,m<e&&(c=k[m],v=r(c))),p=l+t,l=p-l,(l=t-l)&&(f[b++]=l),l=q+p,G=l-q,t=l-G,p-=G,q-=t,t=q+p,q=l;for(;n<h;)l=d,p=l+t,l=p-l,(l=t-l)&&(f[b++]=l),l=q+p,G=l-q,t=l-G,p-=G,q-=t,t=q+p,q=l,n+=1,n<h&&(d=a[n]);for(;m<e;)l=c,p=l+t,l=p-l,(l=t-l)&&(f[b++]=l),l=q+p,G=l-q,t=l-G,p-=G,q-=t,t=q+p,q=l,m+=1,m<e&&(c=k[m]);t&&(f[b++]=t);q&&(f[b++]=q);b||(f[b++]=0);f.length=b;return f}},{}],500:[function(a,p,l){p.exports=function(a){return 0>a?-1:0<a?1:0}},{}],501:[function(a,p,l){p.exports=function(a){return k(m(a))};
var m=a("boundary-cells"),k=a("reduce-simplicial-complex")},{"boundary-cells":85,"reduce-simplicial-complex":481}],502:[function(a,p,l){p.exports=function(a,b,n,u){n=n||0;if("undefined"===typeof u){for(var f=a.length,d=u=0;d<f;++d)u=Math.max(u,a[d].length)|0;--u}if(0===a.length||1>u)return{cells:[],vertexIds:[],vertexWeights:[]};d=+n;var g=b.length;f=k.mallocUint8(g);for(var c=0;c<g;++c)f[c]=b[c]<d|0;var v=u,t=a.length;d=k.mallocUint32(2*(v*(v+1)/2*t|0));for(c=g=0;c<t;++c){var l=a[c];v=l.length;for(var p=
0;p<v;++p)for(var q=0;q<p;++q){var G=l[q],A=l[p];d[g++]=Math.min(G,A)|0;d[g++]=Math.max(G,A)|0}}h(m(d,[g/2|0,2]));for(c=v=2;c<g;c+=2)if(d[c-2]!==d[c]||d[c-1]!==d[c+1])d[v++]=d[c],d[v++]=d[c+1];d=m(d,[v/2|0,2]);n=+n;g=d.data;c=d.shape[0];v=k.mallocDouble(c);for(l=t=0;l<c;++l)p=g[2*l],q=g[2*l+1],f[p]!==f[q]&&(G=b[p],A=b[q],g[2*t]=p,g[2*t+1]=q,v[t++]=(A-n)/(A-G));d.shape[0]=t;n=m(v,[t]);g=b.length|0;b=k.mallocInt32(2*g);c=d.shape[0];v=d.data;for(l=t=b[0]=0;l<c;++l)if(p=v[2*l],p!==t){for(b[2*t+1]=l;++t<
p;)b[2*t]=l,b[2*t+1]=l;b[2*t]=l}for(b[2*t+1]=c;++t<g;)b[2*t]=b[2*t+1]=c;a=e(u)(a,d.data,b,f);g=d.shape[0]|0;c=d.data;u=Array(g);for(v=0;v<g;++v)u[v]=[c[2*v],c[2*v+1]];g=[].slice.call(n.data,0,n.shape[0]);k.free(f);k.free(d.data);k.free(n.data);k.free(b);return{cells:a,vertexIds:u,vertexWeights:g}};var m=a("ndarray"),k=a("typedarray-pool"),h=a("ndarray-sort"),e=a("./lib/codegen")},{"./lib/codegen":503,ndarray:442,"ndarray-sort":440,"typedarray-pool":529}],503:[function(a,p,l){p.exports=function(a){var e=
h[a];if(!e){e=h;var b=Array(a+1);b[0]=[[]];for(var n=1;n<=a;++n)for(var u=b[n]=k(n),r=0;r<u.length;++r);var d=["function B(C,E,i,j){","var a\x3dMath.min(i,j)|0,b\x3dMath.max(i,j)|0,l\x3dC[2*a],h\x3dC[2*a+1];","while(l\x3ch){","var m\x3d(l+h)\x3e\x3e1,v\x3dE[2*m+1];","if(v\x3d\x3d\x3db){return m}","if(b\x3cv){h\x3dm}else{l\x3dm+1}","}","return l;","};","function getContour",a,"d(F,E,C,S){","var n\x3dF.length,R\x3d[];","for(var i\x3d0;i\x3cn;++i){var c\x3dF[i],l\x3dc.length;"];for(n=a+1;1<n;--n){n<
a+1&&d.push("else ");d.push("if(l\x3d\x3d\x3d",n,"){");u=[];for(r=0;r<n;++r)u.push("(S[c["+r+"]]\x3c\x3c"+r+")");d.push("var M\x3d",u.join("+"),";if(M\x3d\x3d\x3d0||M\x3d\x3d\x3d",(1<<n)-1,"){continue}switch(M){");u=b[n-1];for(r=0;r<u.length;++r){d.push("case ",r,":");var g=u[r];if(!(0>=g.length)){d.push("R.push(");for(var c=0;c<g.length;++c){var v=g[c];0<c&&d.push(",");d.push("[");for(var t=0;t<v.length;++t){var l=v[t];0<t&&d.push(",");d.push("B(C,E,c[",l[0],"],c[",l[1],"])")}d.push("]")}d.push(");")}d.push("break;")}d.push("}}")}d.push("}return R;};return getContour",
a,"d");b=(new Function("pool",d.join("")))(m);e=e[a]=b}return e};var m=a("typedarray-pool"),k=a("marching-simplex-table"),h={}},{"marching-simplex-table":419,"typedarray-pool":529}],504:[function(a,p,l){function m(a,b){var c=a.length,d=a.length-b.length,e=Math.min;if(d)return d;switch(c){case 0:return 0;case 1:return a[0]-b[0];case 2:return(c=a[0]+a[1]-b[0]-b[1])?c:e(a[0],a[1])-e(b[0],b[1]);case 3:d=a[0]+a[1];var g=b[0]+b[1];if(c=d+a[2]-(g+b[2]))return c;var f=e(a[0],a[1]),h=e(b[0],b[1]);return(c=
e(f,a[2])-e(h,b[2]))?c:e(f+a[2],d)-e(h+b[2],g);default:a=a.slice(0);a.sort();b=b.slice(0);b.sort();for(e=0;e<c;++e)if(d=a[e]-b[e])return d;return 0}}function k(a,b){return m(a[0],b[0])}function h(a,b){if(b){for(var c=a.length,d=Array(c),e=0;e<c;++e)d[e]=[a[e],b[e]];d.sort(k);for(e=0;e<c;++e)a[e]=d[e][0],b[e]=d[e][1]}else a.sort(m);return a}function e(a){if(0===a.length)return[];for(var b=1,c=a.length,d=1;d<c;++d){var e=a[d];m(e,a[d-1])&&(d===b?b++:a[b++]=e)}a.length=b;return a}function f(a,b){for(var c=
0,d=a.length-1,e=-1;c<=d;){var g=c+d>>1,f=m(a[g],b);0>=f?(0===f&&(e=g),c=g+1):0<f&&(d=g-1)}return e}function b(a,b){for(var c=Array(a.length),d=0,e=c.length;d<e;++d)c[d]=[];e=[];d=0;for(var g=b.length;d<g;++d)for(var h=b[d],k=h.length,n=1,r=1<<k;n<r;++n){e.length=u.popCount(n);for(var l=0,p=0;p<k;++p)n&1<<p&&(e[l++]=h[p]);l=f(a,e);if(!(0>l))for(;!(c[l++].push(d),l>=a.length||0!==m(a[l],e)););}return c}function n(a,b){if(0>b)return[];for(var c=[],d=(1<<b+1)-1,e=0;e<a.length;++e)for(var g=a[e],f=d;f<
1<<g.length;f=u.nextCombination(f)){for(var k=Array(b+1),n=0,m=0;m<g.length;++m)f&1<<m&&(k[n++]=g[m]);c.push(k)}return h(c)}"use restrict";var u=a("bit-twiddle"),r=a("union-find");l.dimension=function(a){for(var b=0,c=Math.max,d=0,e=a.length;d<e;++d)b=c(b,a[d].length);return b-1};l.countVertices=function(a){for(var b=-1,c=Math.max,d=0,e=a.length;d<e;++d)for(var f=a[d],h=0,k=f.length;h<k;++h)b=c(b,f[h]);return b+1};l.cloneCells=function(a){for(var b=Array(a.length),c=0,d=a.length;c<d;++c)b[c]=a[c].slice(0);
return b};l.compareCells=m;l.normalize=h;l.unique=e;l.findCell=f;l.incidence=b;l.dual=function(a,g){if(!g)return b(e(n(a,0)),a,0);for(var c=Array(g),d=0;d<g;++d)c[d]=[];d=0;for(g=a.length;d<g;++d)for(var f=a[d],h=0,k=f.length;h<k;++h)c[f[h]].push(d);return c};l.explode=function(a){for(var b=[],c=0,d=a.length;c<d;++c)for(var e=a[c],f=e.length|0,k=1,n=1<<f;k<n;++k){for(var m=[],r=0;r<f;++r)k>>>r&1&&m.push(e[r]);b.push(m)}return h(b)};l.skeleton=n;l.boundary=function(a){for(var b=[],c=0,d=a.length;c<
d;++c)for(var e=a[c],f=0,k=e.length;f<k;++f){for(var n=Array(e.length-1),m=0,r=0;m<k;++m)m!==f&&(n[r++]=e[m]);b.push(n)}return h(b)};l.connectedComponents=function(a,b){if(b){b=new r(b);for(var c=0;c<a.length;++c)for(var d=a[c],g=0;g<d.length;++g)for(var k=g+1;k<d.length;++k)b.link(d[g],d[k]);d=[];g=b.ranks;for(c=0;c<g.length;++c)g[c]=-1;for(c=0;c<a.length;++c)k=b.find(a[c][0]),0>g[k]?(g[k]=d.length,d.push([a[c].slice(0)])):d[g[k]].push(a[c].slice(0));return d}b=e(h(n(a,0)));c=new r(b.length);for(d=
0;d<a.length;++d)for(g=a[d],k=0;k<g.length;++k)for(var m=f(b,[g[k]]),u=k+1;u<g.length;++u)c.link(m,f(b,[g[u]]));g=[];k=c.ranks;for(d=0;d<k.length;++d)k[d]=-1;for(d=0;d<a.length;++d)m=c.find(f(b,[a[d][0]])),0>k[m]?(k[m]=g.length,g.push([a[d].slice(0)])):g[k[m]].push(a[d].slice(0));return g}},{"bit-twiddle":82,"union-find":530}],505:[function(a,p,l){arguments[4][82][0].apply(l,arguments)},{dup:82}],506:[function(a,p,l){arguments[4][504][0].apply(l,arguments)},{"bit-twiddle":505,dup:504,"union-find":507}],
507:[function(a,p,l){function m(a){this.roots=Array(a);this.ranks=Array(a);for(var h=0;h<a;++h)this.roots[h]=h,this.ranks[h]=0}"use restrict";p.exports=m;m.prototype.length=function(){return this.roots.length};m.prototype.makeSet=function(){var a=this.roots.length;this.roots.push(a);this.ranks.push(0);return a};m.prototype.find=function(a){for(var h=this.roots;h[a]!==a;){var e=h[a];h[a]=h[e];a=e}return a};m.prototype.link=function(a,h){a=this.find(a);h=this.find(h);if(a!==h){var e=this.ranks,f=this.roots,
b=e[a],k=e[h];b<k?f[a]=h:k<b?f[h]=a:(f[h]=a,++e[a])}}},{}],508:[function(a,p,l){p.exports=function(a,e,f){function b(a){if(A[a])return Infinity;var b=p[a],c=q[a];if(0>b||0>c)return Infinity;b=e[b];c=e[c];return Math.abs(m(e[a],b,c))/Math.sqrt(Math.pow(b[0]-c[0],2)+Math.pow(b[1]-c[1],2))}function h(a,b){var c=E[a],d=E[b];E[a]=d;E[b]=c;H[c]=b;H[d]=a}function u(a){for(var b=G[E[a]];;){var c=b,d=2*a+1,e=2*(a+1),g=a;if(d<w){var f=G[E[d]];f<c&&(g=d,c=f)}e<w&&G[E[e]]<c&&(g=e);if(g===a)return a;h(a,g);a=
g}}function r(a){for(var b=G[E[a]];0<a;){var c=a&1?a-1>>1:(a>>1)-1;if(0<=c&&b<G[E[c]])h(a,c),a=c;else return a}}function d(){if(0<w){var a=E[0];h(0,w-1);--w;u(0);return a}return-1}function g(a,b){var c=E[a];if(G[c]===b)return a;G[c]=-Infinity;r(a);d();G[c]=b;w+=1;return r(w-1)}function c(a){if(!A[a]){A[a]=!0;var c=p[a];a=q[a];0<=p[a]&&(p[a]=c);0<=q[c]&&(q[c]=a);0<=H[c]&&g(H[c],b(c));0<=H[a]&&g(H[a],b(a))}}function v(a,b){if(0>a[b])return b;var c=b,d=b;do{var e=a[d];if(!A[d]||0>e||e===d)break;d=e;
e=a[d];if(!A[d]||0>e||e===d)break;d=e;c=a[c]}while(c!==d);for(;b!==d;b=a[b])a[b]=d;return d}for(var t=e.length,l=a.length,p=Array(t),q=Array(t),G=Array(t),A=Array(t),C=0;C<t;++C)p[C]=q[C]=-1,G[C]=Infinity,A[C]=!1;for(C=0;C<l;++C){var P=a[C];if(2!==P.length)throw Error("Input must be a graph");var J=P[1];P=P[0];q[P]=-1!==q[P]?-2:J;p[J]=-1!==p[J]?-2:P}var E=[],H=Array(t);for(C=0;C<t;++C)Infinity>(G[C]=b(C))?(H[C]=E.length,E.push(C)):H[C]=-1;var w=E.length;for(C=w>>1;0<=C;--C)u(C);for(;;){C=d();if(0>
C||G[C]>f)break;c(C)}f=[];for(C=0;C<t;++C)A[C]||(H[C]=f.length,f.push(e[C].slice()));var x=[];a.forEach(function(a){var b=v(p,a[0]);a=v(q,a[1]);0<=b&&0<=a&&b!==a&&(b=H[b],a=H[a],b!==a&&x.push([b,a]))});k.unique(k.normalize(x));return{positions:f,edges:x}};var m=a("robust-orientation"),k=a("simplicial-complex")},{"robust-orientation":494,"simplicial-complex":506}],509:[function(a,p,l){function m(a,e){if(e[0][0]<e[1][0]){var f=e[0];e=e[1]}else if(e[0][0]>e[1][0])f=e[1],e=e[0];else{f=Math.min(a[0][1],
a[1][1]);a=Math.max(a[0][1],a[1][1]);var b=Math.min(e[0][1],e[1][1]);e=Math.max(e[0][1],e[1][1]);return a<b?a-b:f>e?f-e:a-e}a[0][1]<a[1][1]?(b=a[0],a=a[1]):(b=a[1],a=a[0]);return(b=k(e,f,b))?b:(b=k(e,f,a))?b:a-e}p.exports=function(a,e){if(e[0][0]<e[1][0]){var f=e[0];var b=e[1]}else if(e[0][0]>e[1][0])f=e[1],b=e[0];else return m(e,a);if(a[0][0]<a[1][0])e=a[0],a=a[1];else if(a[0][0]>a[1][0])e=a[1],a=a[0];else return-m(a,e);var h=k(f,b,a),u=k(f,b,e);if(0>h){if(0>=u)return h}else if(0<h){if(0<=u)return h}else if(u)return u;
h=k(a,e,b);u=k(a,e,f);if(0>h){if(0>=u)return h}else if(0<h){if(0<=u)return h}else if(u)return u;return b[0]-a[0]};var k=a("robust-orientation")},{"robust-orientation":494}],510:[function(a,p,l){function m(a,b,c){this.slabs=a;this.coordinates=b;this.horizontal=c}function k(a,b){return a.y-b}function h(a,b){for(var c=null;a;){var d=a.key;if(d[0][0]<d[1][0]){var e=d[0];var g=d[1]}else e=d[1],g=d[0];e=u(e,g,b);if(0>e)a=a.left;else if(0<e)if(b[0]!==d[1][0])c=a,a=a.right;else{if(d=h(a.right,b))return d;
a=a.left}else{if(b[0]!==d[1][0])return a;if(d=h(a.right,b))return d;a=a.left}}return c}function e(a,b,c,e){this.y=a;this.index=b;this.start=c;this.closed=e}function f(a,b,c,e){this.x=a;this.segment=b;this.create=c;this.index=e}p.exports=function(a){for(var b=a.length,c=2*b,d=Array(c),h=0;h<b;++h){var k=a[h],u=k[0][0]<k[1][0];d[2*h]=new f(k[0][0],k,u,h);d[2*h+1]=new f(k[1][0],k,!u,h)}d.sort(function(a,b){var c=a.x-b.x;return c?c:(c=a.create-b.create)?c:Math.min(a.segment[0][1],a.segment[1][1])-Math.min(b.segment[0][1],
b.segment[1][1])});a=n(r);b=[];k=[];u=[];for(h=0;h<c;){for(var l=d[h].x,p=[];h<c;){var q=d[h];if(q.x!==l)break;h+=1;q.segment[0][0]===q.x&&q.segment[1][0]===q.x?q.create&&(q.segment[0][1]<q.segment[1][1]?(p.push(new e(q.segment[0][1],q.index,!0,!0)),p.push(new e(q.segment[1][1],q.index,!1,!1))):(p.push(new e(q.segment[1][1],q.index,!0,!1)),p.push(new e(q.segment[0][1],q.index,!1,!0)))):a=q.create?a.insert(q.segment,q.index):a.remove(q.segment)}b.push(a.root);k.push(l);u.push(p)}return new m(b,k,u)};
var b=a("binary-search-bounds"),n=a("functional-red-black-tree"),u=a("robust-orientation"),r=a("./lib/order-segments");m.prototype.castUp=function(a){var d=b.le(this.coordinates,a[0]);if(0>d)return-1;var c=h(this.slabs[d],a),e=-1;c&&(e=c.value);if(this.coordinates[d]===a[0]){var f=null;c&&(f=c.key);0<d&&(c=h(this.slabs[d-1],a))&&(f?0<r(c.key,f)&&(f=c.key,e=c.value):(e=c.value,f=c.key));c=this.horizontal[d];if(0<c.length){var n=b.ge(c,a[1],k);if(n<c.length){d=c[n];if(a[1]===d.y){if(d.closed)return d.index;
for(;n<c.length-1&&c[n+1].y===a[1];)if(n+=1,d=c[n],d.closed)return d.index;if(d.y===a[1]&&!d.start){n+=1;if(n>=c.length)return e;d=c[n]}}d.start?f?(a=u(f[0],f[1],[a[0],d.y]),f[0][0]>f[1][0]&&(a=-a),0<a&&(e=d.index)):e=d.index:d.y!==a[1]&&(e=d.index)}}}return e}},{"./lib/order-segments":509,"binary-search-bounds":81,"functional-red-black-tree":226,"robust-orientation":494}],511:[function(a,p,l){function m(a,b){a=e(h(a,b),[b[b.length-1]]);return a[a.length-1]}function k(a,b,e,h){b=-b/(h-b);0>b?b=0:
1<b&&(b=1);h=1-b;for(var f=a.length,d=Array(f),g=0;g<f;++g)d[g]=b*a[g]+h*e[g];return d}var h=a("robust-dot-product"),e=a("robust-sum");p.exports=function(a,b){for(var e=[],f=[],h=m(a[a.length-1],b),d=a[a.length-1],g,c=0;c<a.length;++c,d=g){g=a[c];var v=m(g,b);if(0>h&&0<v||0<h&&0>v)h=k(d,v,g,h),e.push(h),f.push(h.slice());0>v?f.push(g.slice()):0<v?e.push(g.slice()):(e.push(g.slice()),f.push(g.slice()));h=v}return{positive:e,negative:f}};p.exports.positive=function(a,b){for(var e=[],f=m(a[a.length-
1],b),h=a[a.length-1],d,g=0;g<a.length;++g,h=d){d=a[g];var c=m(d,b);(0>f&&0<c||0<f&&0>c)&&e.push(k(h,c,d,f));0<=c&&e.push(d.slice());f=c}return e};p.exports.negative=function(a,b){for(var e=[],f=m(a[a.length-1],b),h=a[a.length-1],d,g=0;g<a.length;++g,h=d){d=a[g];var c=m(d,b);(0>f&&0<c||0<f&&0>c)&&e.push(k(h,c,d,f));0>=c&&e.push(d.slice());f=c}return e}},{"robust-dot-product":491,"robust-sum":499}],512:[function(a,p,l){!function(){function a(f){var b=f;if(e[b])b=e[b];else{for(var k=b,m,r=[],d=0;k;){if(null!==
(m=h.text.exec(k)))r.push(m[0]);else if(null!==(m=h.modulo.exec(k)))r.push("%");else if(null!==(m=h.placeholder.exec(k))){if(m[2]){d|=1;var g=[],c=m[2],v;if(null!==(v=h.key.exec(c)))for(g.push(v[1]);""!==(c=c.substring(v[0].length));)if(null!==(v=h.key_access.exec(c)))g.push(v[1]);else if(null!==(v=h.index_access.exec(c)))g.push(v[1]);else throw new SyntaxError("[sprintf] failed to parse named argument key");else throw new SyntaxError("[sprintf] failed to parse named argument key");m[2]=g}else d|=
2;if(3===d)throw Error("[sprintf] mixing positional and named placeholders is not (yet) supported");r.push({placeholder:m[0],param_no:m[1],keys:m[2],sign:m[3],pad_char:m[4],align:m[5],width:m[6],precision:m[7],type:m[8]})}else throw new SyntaxError("[sprintf] unexpected placeholder");k=k.substring(m[0].length)}b=e[b]=r}k=arguments;m=1;r=b.length;g="";var t,l;for(c=0;c<r;c++)if("string"===typeof b[c])g+=b[c];else if("object"===typeof b[c]){v=b[c];if(v.keys)for(d=k[m],t=0;t<v.keys.length;t++){if(void 0==
d)throw Error(a('[sprintf] Cannot access property "%s" of undefined value "%s"',v.keys[t],v.keys[t-1]));d=d[v.keys[t]]}else d=v.param_no?k[v.param_no]:k[m++];h.not_type.test(v.type)&&h.not_primitive.test(v.type)&&d instanceof Function&&(d=d());if(h.numeric_arg.test(v.type)&&"number"!==typeof d&&isNaN(d))throw new TypeError(a("[sprintf] expecting number but found %T",d));h.number.test(v.type)&&(l=0<=d);switch(v.type){case "b":d=parseInt(d,10).toString(2);break;case "c":d=String.fromCharCode(parseInt(d,
10));break;case "d":case "i":d=parseInt(d,10);break;case "j":d=JSON.stringify(d,null,v.width?parseInt(v.width):0);break;case "e":d=v.precision?parseFloat(d).toExponential(v.precision):parseFloat(d).toExponential();break;case "f":d=v.precision?parseFloat(d).toFixed(v.precision):parseFloat(d);break;case "g":d=v.precision?String(Number(d.toPrecision(v.precision))):parseFloat(d);break;case "o":d=(parseInt(d,10)>>>0).toString(8);break;case "s":d=String(d);d=v.precision?d.substring(0,v.precision):d;break;
case "t":d=String(!!d);d=v.precision?d.substring(0,v.precision):d;break;case "T":d=Object.prototype.toString.call(d).slice(8,-1).toLowerCase();d=v.precision?d.substring(0,v.precision):d;break;case "u":d=parseInt(d,10)>>>0;break;case "v":d=d.valueOf();d=v.precision?d.substring(0,v.precision):d;break;case "x":d=(parseInt(d,10)>>>0).toString(16);break;case "X":d=(parseInt(d,10)>>>0).toString(16).toUpperCase()}if(h.json.test(v.type))g+=d;else{if(!h.number.test(v.type)||l&&!v.sign)var p="";else p=l?"+":
"-",d=d.toString().replace(h.sign,"");t=v.pad_char?"0"===v.pad_char?"0":v.pad_char.charAt(1):" ";var q=v.width-(p+d).length;q=v.width?0<q?t.repeat(q):"":"";g+=v.align?p+d+q:"0"===t?p+q+d:q+p+d}}return g}function k(e,b){return a.apply(null,[e].concat(b||[]))}var h={not_string:/[^s]/,not_bool:/[^t]/,not_type:/[^T]/,not_primitive:/[^v]/,number:/[diefg]/,numeric_arg:/[bcdiefguxX]/,json:/[j]/,not_json:/[^j]/,text:/^[^\x25]+/,modulo:/^\x25{2}/,placeholder:/^\x25(?:([1-9]\d*)\$|\(([^)]+)\))?(\+)?(0|'[^$])?(-)?(\d+)?(?:\.(\d+))?([b-gijostTuvxX])/,
key:/^([a-z_][a-z_\d]*)/i,key_access:/^\.([a-z_][a-z_\d]*)/i,index_access:/^\[(\d+)\]/,sign:/^[+-]/},e=Object.create(null);"undefined"!==typeof l&&(l.sprintf=a,l.vsprintf=k);"undefined"!==typeof window&&(window.sprintf=a,window.vsprintf=k)}()},{}],513:[function(a,p,l){var m=a("parenthesis");p.exports=function(a,h,e){if(null==a)throw Error("First argument should be a string");if(null==h)throw Error("Separator should be a string or a RegExp");if(!e)e={};else if("string"===typeof e||Array.isArray(e))e=
{ignore:e};null==e.escape&&(e.escape=!0);null==e.ignore?e.ignore="[] () {} \x3c\x3e \"\" '' `` “” «»".split(" "):("string"===typeof e.ignore&&(e.ignore=[e.ignore]),e.ignore=e.ignore.map(function(a){1===a.length&&(a+=a);return a}));a=m.parse(a,{flat:!0,brackets:e.ignore});var f=a[0].split(h);if(e.escape){e=[];for(var b=0;b<f.length;b++){var k=f[b],u=f[b+1];"\\"===k[k.length-1]&&"\\"!==k[k.length-2]?(e.push(k+h+u),b++):e.push(k)}f=e}for(b=0;b<f.length;b++)a[0]=f[b],f[b]=m.stringify(a,{flat:!0});return f}},
{parenthesis:450}],514:[function(a,p,l){p.exports=function(a){function k(d){var h=[d],k=[d];e[d]=f[d]=g;b[d]=!0;for(g+=1;0<k.length;){d=k[k.length-1];var t=a[d];if(n[d]<t.length){for(var u=n[d];u<t.length;++u){var l=t[u];if(0>e[l]){e[l]=f[l]=g;b[l]=!0;g+=1;h.push(l);k.push(l);break}else b[l]&&(f[d]=Math.min(f[d],f[l])|0);0<=m[l]&&r[d].push(m[l])}n[d]=u}else{if(f[d]===e[d]){var p=[];t=[];l=0;for(u=h.length-1;0<=u;--u){var q=h[u];b[q]=!1;p.push(q);t.push(r[q]);l+=r[q].length;m[q]=c.length;if(q===d){h.length=
u;break}}c.push(p);d=Array(l);for(u=0;u<t.length;u++)for(p=0;p<t[u].length;p++)d[--l]=t[u][p];v.push(d)}k.pop()}}}for(var h=a.length,e=Array(h),f=Array(h),b=Array(h),n=Array(h),m=Array(h),r=Array(h),d=0;d<h;++d)e[d]=-1,f[d]=0,b[d]=!1,n[d]=0,m[d]=-1,r[d]=[];var g=0,c=[],v=[];for(d=0;d<h;++d)0>e[d]&&k(d);for(d=0;d<v.length;d++){var t=v[d];if(0!==t.length){t.sort(function(a,b){return a-b});h=[t[0]];for(var l=1;l<t.length;l++)t[l]!==t[l-1]&&h.push(t[l]);v[d]=h}}return{components:c,adjacencyList:v}}},
{}],515:[function(a,p,l){function m(a,e){var b=a.length,f=["'use strict';"],d="surfaceNets"+a.join("_")+"d"+e;f.push("var contour\x3dgenContour({","order:[",a.join(),"],","scalarArguments: 3,","phase:function phaseFunc(p,a,b,c) { return (p \x3e c)|0 },");"generic"===e&&f.push("getters:[0],");var g=[];e=[];for(a=0;a<b;++a)g.push("d"+a),e.push("d"+a);for(a=0;a<1<<b;++a)g.push("v"+a),e.push("v"+a);for(a=0;a<1<<b;++a)g.push("p"+a),e.push("p"+a);g.push("a","b","c");e.push("a","c");f.push("vertex:function vertexFunc(",
g.join(),"){");g=[];for(a=0;a<1<<b;++a)g.push("(p"+a+"\x3c\x3c"+a+")");f.push("var m\x3d(",g.join("+"),")|0;if(m\x3d\x3d\x3d0||m\x3d\x3d\x3d",(1<<(1<<b))-1,"){return}");g=[];var c=[];128>=1<<(1<<b)?(f.push("switch(m){"),c=f):f.push("switch(m\x3e\x3e\x3e7){");for(a=0;a<1<<(1<<b);++a){128<1<<(1<<b)&&0===a%128&&(0<g.length&&c.push("}}"),c="vExtra"+g.length,f.push("case ",a>>>7,":",c,"(m\x260x7f,",e.join(),");break;"),c=["function ",c,"(m,",e.join(),"){switch(m){"],g.push(c));c.push("case ",a&127,":");
for(var n=Array(b),m=Array(b),l=Array(b),p=Array(b),q=0,G=0;G<b;++G)n[G]=[],m[G]=[],l[G]=0,p[G]=0;for(G=0;G<1<<b;++G)for(var A=0;A<b;++A){var C=G^1<<A;if(!(C>G)&&!(a&1<<C)!==!(a&1<<G)){var P=1;a&1<<C?m[A].push("v"+C+"-v"+G):(m[A].push("v"+G+"-v"+C),P=-P);0>P?(n[A].push("-v"+G+"-v"+C),l[A]+=2):(n[A].push("v"+G+"+v"+C),l[A]-=2);q+=1;for(P=0;P<b;++P)P!==A&&(C&1<<P?p[P]+=1:--p[P])}}G=[];for(A=0;A<b;++A)0===n[A].length?G.push("d"+A+"-0.5"):(C="",0>l[A]?C=l[A]+"*c":0<l[A]&&(C="+"+l[A]+"*c"),G.push("d"+
A+"-"+(.5+p[A]/q*.5)+"-"+n[A].length/q*.5+"*("+n[A].join("+")+C+")/("+m[A].join("+")+")"));c.push("a.push([",G.join(),"]);","break;")}f.push("}},");0<g.length&&c.push("}}");e=[];for(a=0;a<1<<b-1;++a)e.push("v"+a);e.push("c0","c1","p0","p1","a","b","c");f.push("cell:function cellFunc(",e.join(),"){");b=h(b-1);f.push("if(p0){b.push(",b.map(function(a){return"["+a.map(function(a){return"v"+a})+"]"}).join(),")}else{b.push(",b.map(function(a){a=a.slice();a.reverse();return"["+a.map(function(a){return"v"+
a})+"]"}).join(),")}}});function ",d,"(array,level){var verts\x3d[],cells\x3d[];contour(array,verts,cells,level);return {positions:verts,cells:cells};} return ",d,";");for(a=0;a<g.length;++a)f.push(g[a].join(""));return(new Function("genContour",f.join("")))(k)}p.exports=function(a,h){if(0>=a.dimension)return{positions:[],cells:[]};if(1===a.dimension){a=e(a,h);h=a.length;for(var b=Array(h),k=Array(h),d=0;d<h;++d)b[d]=[a[d]],k[d]=[d];return{positions:b,cells:k}}b=a.order.join()+"-"+a.dtype;k=f[b];
h=+h||0;k||(k=f[b]=m(a.order,a.dtype));return k(a,h)};var k=a("ndarray-extract-contour"),h=a("triangulate-hypercube"),e=a("zero-crossings"),f={}},{"ndarray-extract-contour":431,"triangulate-hypercube":525,"zero-crossings":558}],516:[function(a,p,l){Object.defineProperty(l,"__esModule",{value:!0});var m=function(){return function(a,b){if(Array.isArray(a))return a;$jscomp.initSymbol();$jscomp.initSymbolIterator();if(Symbol.iterator in Object(a)){var e=[],d=!0,g=!1,c=void 0;try{$jscomp.initSymbol();
$jscomp.initSymbolIterator();for(var f=a[Symbol.iterator](),h;!(d=(h=f.next()).done)&&(e.push(h.value),!b||e.length!==b);d=!0);}catch(y){g=!0,c=y}finally{try{if(!d&&f["return"])f["return"]()}finally{if(g)throw c;}}return e}throw new TypeError("Invalid attempt to destructure non-iterable instance");}}(),k=2*Math.PI,h=function(a,b,e,d,g,c,f){var h=a.x;a=a.y;h*=b;a*=e;return{x:d*h-g*a+c,y:g*h+d*a+f}},e=function(a,b){var e=Math.cos(a),d=Math.sin(a),g=Math.cos(a+b);a=Math.sin(a+b);return[{x:e-.551915024494*
d,y:d+.551915024494*e},{x:g+.551915024494*a,y:a-.551915024494*g},{x:g,y:a}]},f=function(a,b,e,d){var g=(a*e+b*d)/(Math.sqrt(a*a+b*b)*Math.sqrt(a*a+b*b));1<g&&(g=1);-1>g&&(g=-1);return(0>a*d-b*e?-1:1)*Math.acos(g)},b=function(a,b,e,d,g,c,h,m,l,p,q,G){var n=Math.pow(g,2),t=Math.pow(c,2),r=Math.pow(q,2),v=Math.pow(G,2),u=n*t-n*v-t*r;0>u&&(u=0);u=Math.sqrt(u/(n*v+t*r))*(h===m?-1:1);h=u*g/c*G;u=u*-c/g*q;a=p*h-l*u+(a+e)/2;b=l*h+p*u+(b+d)/2;d=(q-h)/g;l=(G-u)/c;g=(-q-h)/g;G=(-G-u)/c;c=f(1,0,d,l);G=f(d,l,
g,G);0===m&&0<G&&(G-=k);1===m&&0>G&&(G+=k);return[a,b,c,G]};l.default=function(a){var f=a.px,n=a.py,d=a.cx,g=a.cy,c=a.rx,v=a.ry,t=a.xAxisRotation,l=void 0===t?0:t;t=a.largeArcFlag;var p=a.sweepFlag;a=[];if(0===c||0===v)return[];var q=Math.sin(l*k/360),G=Math.cos(l*k/360);l=G*(f-d)/2+q*(n-g)/2;var A=-q*(f-d)/2+G*(n-g)/2;if(0===l&&0===A)return[];c=Math.abs(c);v=Math.abs(v);var C=Math.pow(l,2)/Math.pow(c,2)+Math.pow(A,2)/Math.pow(v,2);1<C&&(c*=Math.sqrt(C),v*=Math.sqrt(C));f=b(f,n,d,g,c,v,void 0===t?
0:t,void 0===p?0:p,q,G,l,A);n=m(f,4);var P=n[0],J=n[1];f=n[2];n=n[3];d=Math.abs(n)/(k/4);1E-7>Math.abs(1-d)&&(d=1);d=Math.max(Math.ceil(d),1);n/=d;for(g=0;g<d;g++)a.push(e(f,n)),f+=n;return a.map(function(a){var b=h(a[0],c,v,G,q,P,J),d=b.x;b=b.y;var e=h(a[1],c,v,G,q,P,J),g=e.x;e=e.y;a=h(a[2],c,v,G,q,P,J);return{x1:d,y1:b,x2:g,y2:e,x:a.x,y:a.y}})};p.exports=l.default},{}],517:[function(a,p,l){var m=a("parse-svg-path"),k=a("abs-svg-path"),h=a("normalize-svg-path"),e=a("is-svg-path"),f=a("assert");p.exports=
function(a){Array.isArray(a)&&1===a.length&&"string"===typeof a[0]&&(a=a[0]);"string"===typeof a&&(f(e(a),"String is not an SVG path."),a=m(a));f(Array.isArray(a),"Argument should be a string or an array of path segments.");a=k(a);a=h(a);if(!a.length)return[0,0,0,0];for(var b=[Infinity,Infinity,-Infinity,-Infinity],u=0,r=a.length;u<r;u++)for(var d=a[u].slice(1),g=0;g<d.length;g+=2)d[g+0]<b[0]&&(b[0]=d[g+0]),d[g+1]<b[1]&&(b[1]=d[g+1]),d[g+0]>b[2]&&(b[2]=d[g+0]),d[g+1]>b[3]&&(b[3]=d[g+1]);return b}},
{"abs-svg-path":50,assert:58,"is-svg-path":416,"normalize-svg-path":518,"parse-svg-path":452}],518:[function(a,p,l){function m(a,f,b,h){return["C",a,f,b,h,b,h]}function k(a,f,b,h,k,m){return["C",a/3+2/3*b,f/3+2/3*h,k/3+2/3*b,m/3+2/3*h,k,m]}p.exports=function(a){for(var e,b=[],n=0,u=0,r=0,d=0,g=null,c=null,v=0,t=0,l=0,p=a.length;l<p;l++){var q=a[l],G=q[0];switch(G){case "M":r=q[1];d=q[2];break;case "A":var A=h({px:v,py:t,cx:q[6],cy:q[7],rx:q[1],ry:q[2],xAxisRotation:q[3],largeArcFlag:q[4],sweepFlag:q[5]});
if(!A.length)continue;for(e=0;e<A.length;e++)q=A[e],q=["C",q.x1,q.y1,q.x2,q.y2,q.x,q.y],e<A.length-1&&b.push(q);break;case "S":A=v;if("C"==e||"S"==e)A+=A-n,t+=t-u;q=["C",A,t,q[1],q[2],q[3],q[4]];break;case "T":"Q"==e||"T"==e?(g=2*v-g,c=2*t-c):(g=v,c=t);q=k(v,t,g,c,q[1],q[2]);break;case "Q":g=q[1];c=q[2];q=k(v,t,q[1],q[2],q[3],q[4]);break;case "L":q=m(v,t,q[1],q[2]);break;case "H":q=m(v,t,q[1],t);break;case "V":q=m(v,t,v,q[1]);break;case "Z":q=m(v,t,r,d)}e=G;v=q[q.length-2];t=q[q.length-1];4<q.length?
(n=q[q.length-4],u=q[q.length-3]):(n=v,u=t);b.push(q)}return b};var h=a("svg-arc-to-cubic-bezier")},{"svg-arc-to-cubic-bezier":516}],519:[function(a,p,l){function m(){if(null!=r)return r;var a=document.createElement("canvas").getContext("2d");a.canvas.width=a.canvas.height=1;if(!window.Path2D)return r=!1;var b=new Path2D("M0,0h1v1h-1v-1Z");a.fillStyle="black";a.fill(b);return r=(a=a.getImageData(0,0,1,1))&&a.data&&255===a.data[3]}var k=a("svg-path-bounds"),h=a("parse-svg-path"),e=a("draw-svg-path"),
f=a("is-svg-path"),b=a("bitmap-sdf"),n=document.createElement("canvas"),u=n.getContext("2d");p.exports=function(a,g){if(!f(a))throw Error("Argument should be valid svg path string");g||(g={});if(g.shape){var c=g.shape[0];var d=g.shape[1]}else c=n.width=g.w||g.width||200,d=n.height=g.h||g.height||200;var t=Math.min(c,d),r=g.stroke||0,l=g.viewbox||g.viewBox||k(a);l=[c/(l[2]-l[0]),d/(l[3]-l[1])];l=Math.min(l[0]||0,l[1]||0)/2;u.fillStyle="black";u.fillRect(0,0,c,d);u.fillStyle="white";r&&("number"!=typeof r&&
(r=1),u.strokeStyle=0<r?"white":"black",u.lineWidth=Math.abs(r));u.translate(.5*c,.5*d);u.scale(l,l);m()?(a=new Path2D(a),u.fill(a),r&&u.stroke(a)):(a=h(a),e(u,a),u.fill(),r&&u.stroke());u.setTransform(1,0,0,1,0,0);return b(u,{cutoff:null!=g.cutoff?g.cutoff:.5,radius:null!=g.radius?g.radius:.5*t})};var r},{"bitmap-sdf":83,"draw-svg-path":159,"is-svg-path":416,"parse-svg-path":452,"svg-path-bounds":517}],520:[function(a,p,l){(function(m){function k(a,b,n){n=n||{};var f=e[a];f||(f=e[a]={" ":{data:new Float32Array(0),
shape:.2}});var m=f[b];if(!m)if(1>=b.length||!/\d/.test(b)){m=h(b,{triangles:!0,font:a,textAlign:n.textAlign||"left",textBaseline:"alphabetic",styletags:{breaklines:!0,bolds:!0,italics:!0,subscripts:!0,superscripts:!0}});n=m.cells;m=m.positions;for(var d=new Float32Array(6*n.length),g=a=0,c=0;c<n.length;++c)for(var v=n[c],t=0;3>t;++t){var l=m[v[t]];d[a++]=l[0];d[a++]=l[1]+1.4;g=Math.max(l[0],g)}m=f[b]={data:d,shape:g}}else{g=b.split(/(\d|\s)/);n=Array(g.length);for(d=m=c=0;d<g.length;++d)n[d]=k(a,
g[d]),c+=n[d].data.length,m+=n[d].shape,0<d&&(m+=.02);a=new Float32Array(c);g=0;c=-.5*m;for(d=0;d<n.length;++d){v=n[d].data;for(t=0;t<v.length;t+=2)a[g++]=v[t]+c,a[g++]=v[t+1];c+=n[d].shape+.02}m=f[b]={data:a,shape:m}}return m}p.exports=k;var h=a("vectorize-text");m=window||m.global||{};var e=m.__TEXT_CACHE||{};m.__TEXT_CACHE={}}).call(this,a("_process"))},{_process:474,"vectorize-text":534}],521:[function(a,p,l){(function(a){function k(b,c){var d,g;b=b?b:"";c=c||{};if(b instanceof k)return b;if(!(this instanceof
k))return new k(b,c);var f=b;var h={r:0,g:0,b:0};var n=1;var m=d=!1;if("string"==typeof f)a:{f=f.replace(x,"").replace(I,"").toLowerCase();var t=!1;if(U[f])f=U[f],t=!0;else if("transparent"==f){f={r:0,g:0,b:0,a:0,format:"name"};break a}f=(g=Y.rgb.exec(f))?{r:g[1],g:g[2],b:g[3]}:(g=Y.rgba.exec(f))?{r:g[1],g:g[2],b:g[3],a:g[4]}:(g=Y.hsl.exec(f))?{h:g[1],s:g[2],l:g[3]}:(g=Y.hsla.exec(f))?{h:g[1],s:g[2],l:g[3],a:g[4]}:(g=Y.hsv.exec(f))?{h:g[1],s:g[2],v:g[3]}:(g=Y.hsva.exec(f))?{h:g[1],s:g[2],v:g[3],a:g[4]}:
(g=Y.hex8.exec(f))?{r:parseInt(g[1],16),g:parseInt(g[2],16),b:parseInt(g[3],16),a:parseInt(g[4],16)/255,format:t?"name":"hex8"}:(g=Y.hex6.exec(f))?{r:parseInt(g[1],16),g:parseInt(g[2],16),b:parseInt(g[3],16),format:t?"name":"hex"}:(g=Y.hex4.exec(f))?{r:parseInt(g[1]+""+g[1],16),g:parseInt(g[2]+""+g[2],16),b:parseInt(g[3]+""+g[3],16),a:parseInt(g[4]+""+g[4],16)/255,format:t?"name":"hex8"}:(g=Y.hex3.exec(f))?{r:parseInt(g[1]+""+g[1],16),g:parseInt(g[2]+""+g[2],16),b:parseInt(g[3]+""+g[3],16),format:t?
"name":"hex"}:!1}if("object"==typeof f){if(w(f.r)&&w(f.g)&&w(f.b))h=f.g,d=f.b,h={r:255*J(f.r,255),g:255*J(h,255),b:255*J(d,255)},d=!0,m="%"===String(f.r).substr(-1)?"prgb":"rgb";else if(w(f.h)&&w(f.s)&&w(f.v)){h=H(f.s);m=H(f.v);g=f.h;d=h;h=m;g=6*J(g,360);d=J(d,100);h=J(h,100);m=a.floor(g);var r=g-m;g=h*(1-d);t=h*(1-r*d);d=h*(1-(1-r)*d);m%=6;h={r:255*[h,t,g,g,d,h][m],g:255*[d,h,h,t,g,g][m],b:255*[g,g,d,h,h,t][m]};d=!0;m="hsv"}else w(f.h)&&w(f.s)&&w(f.l)&&(h=H(f.s),d=H(f.l),h=e(f.h,h,d),d=!0,m="hsl");
f.hasOwnProperty("a")&&(n=f.a)}n=P(n);f=f.format||m;m=L(255,R(h.r,0));g=L(255,R(h.g,0));h=L(255,R(h.b,0));this._originalInput=b;this._r=m;this._g=g;this._b=h;this._a=n;this._roundA=N(100*this._a)/100;this._format=c.format||f;this._gradientType=c.gradientType;1>this._r&&(this._r=N(this._r));1>this._g&&(this._g=N(this._g));1>this._b&&(this._b=N(this._b));this._ok=d;this._tc_id=Q++}function h(a,b,c){a=J(a,255);b=J(b,255);c=J(c,255);var d=R(a,b,c),e=L(a,b,c),g=(d+e)/2;if(d==e)var f=e=0;else{var h=d-e;
e=.5<g?h/(2-d-e):h/(d+e);switch(d){case a:f=(b-c)/h+(b<c?6:0);break;case b:f=(c-a)/h+2;break;case c:f=(a-b)/h+4}f/=6}return{h:f,s:e,l:g}}function e(a,b,c){function d(a,b,c){0>c&&(c+=1);1<c&&--c;return c<1/6?a+6*(b-a)*c:.5>c?b:c<2/3?a+(b-a)*(2/3-c)*6:a}a=J(a,360);b=J(b,100);c=J(c,100);if(0===b)c=b=a=c;else{var e=.5>c?c*(1+b):c+b-c*b,g=2*c-e;c=d(g,e,a+1/3);b=d(g,e,a);a=d(g,e,a-1/3)}return{r:255*c,g:255*b,b:255*a}}function f(a,b,c){a=J(a,255);b=J(b,255);c=J(c,255);var d=R(a,b,c),e=L(a,b,c),g=d-e;if(d==
e)var f=0;else{switch(d){case a:f=(b-c)/g+(b<c?6:0);break;case b:f=(c-a)/g+2;break;case c:f=(a-b)/g+4}f/=6}return{h:f,s:0===d?0:g/d,v:d}}function b(a,b,c,d){a=[E(N(a).toString(16)),E(N(b).toString(16)),E(N(c).toString(16))];return d&&a[0].charAt(0)==a[0].charAt(1)&&a[1].charAt(0)==a[1].charAt(1)&&a[2].charAt(0)==a[2].charAt(1)?a[0].charAt(0)+a[1].charAt(0)+a[2].charAt(0):a.join("")}function n(b,c,d,e){return[E(a.round(255*parseFloat(e)).toString(16)),E(N(b).toString(16)),E(N(c).toString(16)),E(N(d).toString(16))].join("")}
function m(a,b){b=0===b?0:b||10;a=k(a).toHsl();a.s-=b/100;a.s=L(1,R(0,a.s));return k(a)}function r(a,b){b=0===b?0:b||10;a=k(a).toHsl();a.s+=b/100;a.s=L(1,R(0,a.s));return k(a)}function d(a){return k(a).desaturate(100)}function g(a,b){b=0===b?0:b||10;a=k(a).toHsl();a.l+=b/100;a.l=L(1,R(0,a.l));return k(a)}function c(a,b){b=0===b?0:b||10;a=k(a).toRgb();a.r=R(0,L(255,a.r-N(255*-(b/100))));a.g=R(0,L(255,a.g-N(255*-(b/100))));a.b=R(0,L(255,a.b-N(255*-(b/100))));return k(a)}function v(a,b){b=0===b?0:b||
10;a=k(a).toHsl();a.l-=b/100;a.l=L(1,R(0,a.l));return k(a)}function t(a,b){a=k(a).toHsl();b=(a.h+b)%360;a.h=0>b?360+b:b;return k(a)}function l(a){a=k(a).toHsl();a.h=(a.h+180)%360;return k(a)}function q(a){var b=k(a).toHsl(),c=b.h;return[k(a),k({h:(c+120)%360,s:b.s,l:b.l}),k({h:(c+240)%360,s:b.s,l:b.l})]}function D(a){var b=k(a).toHsl(),c=b.h;return[k(a),k({h:(c+90)%360,s:b.s,l:b.l}),k({h:(c+180)%360,s:b.s,l:b.l}),k({h:(c+270)%360,s:b.s,l:b.l})]}function G(a){var b=k(a).toHsl(),c=b.h;return[k(a),k({h:(c+
72)%360,s:b.s,l:b.l}),k({h:(c+216)%360,s:b.s,l:b.l})]}function A(a,b,c){b=b||6;c=c||30;var d=k(a).toHsl();c=360/c;a=[k(a)];for(d.h=(d.h-(c*b>>1)+720)%360;--b;)d.h=(d.h+c)%360,a.push(k(d));return a}function C(a,b){b=b||6;var c=k(a).toHsv();a=c.h;var d=c.s;c=c.v;for(var e=[],g=1/b;b--;)e.push(k({h:a,s:d,v:c})),c=(c+g)%1;return e}function P(a){a=parseFloat(a);if(isNaN(a)||0>a||1<a)a=1;return a}function J(b,c){var d=b;"string"==typeof d&&-1!=d.indexOf(".")&&1===parseFloat(d)&&(b="100%");d="string"===
typeof b&&-1!=b.indexOf("%");b=L(c,R(0,parseFloat(b)));d&&(b=parseInt(b*c,10)/100);return 1E-6>a.abs(b-c)?1:b%c/parseFloat(c)}function E(a){return 1==a.length?"0"+a:""+a}function H(a){1>=a&&(a=100*a+"%");return a}function w(a){return!!Y.CSS_UNIT.exec(a)}var x=/^\s+/,I=/\s+$/,Q=0,N=a.round,L=a.min,R=a.max,ca=a.random;k.prototype={isDark:function(){return 128>this.getBrightness()},isLight:function(){return!this.isDark()},isValid:function(){return this._ok},getOriginalInput:function(){return this._originalInput},
getFormat:function(){return this._format},getAlpha:function(){return this._a},getBrightness:function(){var a=this.toRgb();return(299*a.r+587*a.g+114*a.b)/1E3},getLuminance:function(){var b=this.toRgb();var c=b.r/255;var d=b.g/255;b=b.b/255;c=.03928>=c?c/12.92:a.pow((c+.055)/1.055,2.4);d=.03928>=d?d/12.92:a.pow((d+.055)/1.055,2.4);b=.03928>=b?b/12.92:a.pow((b+.055)/1.055,2.4);return.2126*c+.7152*d+.0722*b},setAlpha:function(a){this._a=P(a);this._roundA=N(100*this._a)/100;return this},toHsv:function(){var a=
f(this._r,this._g,this._b);return{h:360*a.h,s:a.s,v:a.v,a:this._a}},toHsvString:function(){var a=f(this._r,this._g,this._b),b=N(360*a.h),c=N(100*a.s);a=N(100*a.v);return 1==this._a?"hsv("+b+", "+c+"%, "+a+"%)":"hsva("+b+", "+c+"%, "+a+"%, "+this._roundA+")"},toHsl:function(){var a=h(this._r,this._g,this._b);return{h:360*a.h,s:a.s,l:a.l,a:this._a}},toHslString:function(){var a=h(this._r,this._g,this._b),b=N(360*a.h),c=N(100*a.s);a=N(100*a.l);return 1==this._a?"hsl("+b+", "+c+"%, "+a+"%)":"hsla("+b+
", "+c+"%, "+a+"%, "+this._roundA+")"},toHex:function(a){return b(this._r,this._g,this._b,a)},toHexString:function(a){return"#"+this.toHex(a)},toHex8:function(b){var c=this._g,d=this._b,e=this._a;c=[E(N(this._r).toString(16)),E(N(c).toString(16)),E(N(d).toString(16)),E(a.round(255*parseFloat(e)).toString(16))];b=b&&c[0].charAt(0)==c[0].charAt(1)&&c[1].charAt(0)==c[1].charAt(1)&&c[2].charAt(0)==c[2].charAt(1)&&c[3].charAt(0)==c[3].charAt(1)?c[0].charAt(0)+c[1].charAt(0)+c[2].charAt(0)+c[3].charAt(0):
c.join("");return b},toHex8String:function(a){return"#"+this.toHex8(a)},toRgb:function(){return{r:N(this._r),g:N(this._g),b:N(this._b),a:this._a}},toRgbString:function(){return 1==this._a?"rgb("+N(this._r)+", "+N(this._g)+", "+N(this._b)+")":"rgba("+N(this._r)+", "+N(this._g)+", "+N(this._b)+", "+this._roundA+")"},toPercentageRgb:function(){return{r:N(100*J(this._r,255))+"%",g:N(100*J(this._g,255))+"%",b:N(100*J(this._b,255))+"%",a:this._a}},toPercentageRgbString:function(){return 1==this._a?"rgb("+
N(100*J(this._r,255))+"%, "+N(100*J(this._g,255))+"%, "+N(100*J(this._b,255))+"%)":"rgba("+N(100*J(this._r,255))+"%, "+N(100*J(this._g,255))+"%, "+N(100*J(this._b,255))+"%, "+this._roundA+")"},toName:function(){return 0===this._a?"transparent":1>this._a?!1:T[b(this._r,this._g,this._b,!0)]||!1},toFilter:function(a){var b="#"+n(this._r,this._g,this._b,this._a),c=b,d=this._gradientType?"GradientType \x3d 1, ":"";a&&(a=k(a),c="#"+n(a._r,a._g,a._b,a._a));return"progid:DXImageTransform.Microsoft.gradient("+
d+"startColorstr\x3d"+b+",endColorstr\x3d"+c+")"},toString:function(a){var b=!!a;a=a||this._format;var c=!1,d=1>this._a&&0<=this._a;if(!b&&d&&("hex"===a||"hex6"===a||"hex3"===a||"hex4"===a||"hex8"===a||"name"===a))return"name"===a&&0===this._a?this.toName():this.toRgbString();"rgb"===a&&(c=this.toRgbString());"prgb"===a&&(c=this.toPercentageRgbString());if("hex"===a||"hex6"===a)c=this.toHexString();"hex3"===a&&(c=this.toHexString(!0));"hex4"===a&&(c=this.toHex8String(!0));"hex8"===a&&(c=this.toHex8String());
"name"===a&&(c=this.toName());"hsl"===a&&(c=this.toHslString());"hsv"===a&&(c=this.toHsvString());return c||this.toHexString()},clone:function(){return k(this.toString())},_applyModification:function(a,b){a=a.apply(null,[this].concat([].slice.call(b)));this._r=a._r;this._g=a._g;this._b=a._b;this.setAlpha(a._a);return this},lighten:function(){return this._applyModification(g,arguments)},brighten:function(){return this._applyModification(c,arguments)},darken:function(){return this._applyModification(v,
arguments)},desaturate:function(){return this._applyModification(m,arguments)},saturate:function(){return this._applyModification(r,arguments)},greyscale:function(){return this._applyModification(d,arguments)},spin:function(){return this._applyModification(t,arguments)},_applyCombination:function(a,b){return a.apply(null,[this].concat([].slice.call(b)))},analogous:function(){return this._applyCombination(A,arguments)},complement:function(){return this._applyCombination(l,arguments)},monochromatic:function(){return this._applyCombination(C,
arguments)},splitcomplement:function(){return this._applyCombination(G,arguments)},triad:function(){return this._applyCombination(q,arguments)},tetrad:function(){return this._applyCombination(D,arguments)}};k.fromRatio=function(a,b){if("object"==typeof a){var c={},d;for(d in a)a.hasOwnProperty(d)&&(c[d]="a"===d?a[d]:H(a[d]));a=c}return k(a,b)};k.equals=function(a,b){return a&&b?k(a).toRgbString()==k(b).toRgbString():!1};k.random=function(){return k.fromRatio({r:ca(),g:ca(),b:ca()})};k.mix=function(a,
b,c){c=0===c?0:c||50;a=k(a).toRgb();b=k(b).toRgb();c/=100;return k({r:(b.r-a.r)*c+a.r,g:(b.g-a.g)*c+a.g,b:(b.b-a.b)*c+a.b,a:(b.a-a.a)*c+a.a})};k.readability=function(b,c){b=k(b);c=k(c);return(a.max(b.getLuminance(),c.getLuminance())+.05)/(a.min(b.getLuminance(),c.getLuminance())+.05)};k.isReadable=function(a,b,c){a=k.readability(a,b);b=!1;var d=c||{level:"AA",size:"small"};c=(d.level||"AA").toUpperCase();d=(d.size||"small").toLowerCase();"AA"!==c&&"AAA"!==c&&(c="AA");"small"!==d&&"large"!==d&&(d=
"small");switch(c+d){case "AAsmall":case "AAAlarge":b=4.5<=a;break;case "AAlarge":b=3<=a;break;case "AAAsmall":b=7<=a}return b};k.mostReadable=function(a,b,c){var d=null,e=0;c=c||{};var g=c.includeFallbackColors;var f=c.level;var h=c.size;for(var n=0;n<b.length;n++){var m=k.readability(a,b[n]);m>e&&(e=m,d=k(b[n]))}if(k.isReadable(a,d,{level:f,size:h})||!g)return d;c.includeFallbackColors=!1;return k.mostReadable(a,["#fff","#000"],c)};var U=k.names={aliceblue:"f0f8ff",antiquewhite:"faebd7",aqua:"0ff",
aquamarine:"7fffd4",azure:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"000",blanchedalmond:"ffebcd",blue:"00f",blueviolet:"8a2be2",brown:"a52a2a",burlywood:"deb887",burntsienna:"ea7e5d",cadetblue:"5f9ea0",chartreuse:"7fff00",chocolate:"d2691e",coral:"ff7f50",cornflowerblue:"6495ed",cornsilk:"fff8dc",crimson:"dc143c",cyan:"0ff",darkblue:"00008b",darkcyan:"008b8b",darkgoldenrod:"b8860b",darkgray:"a9a9a9",darkgreen:"006400",darkgrey:"a9a9a9",darkkhaki:"bdb76b",darkmagenta:"8b008b",darkolivegreen:"556b2f",
darkorange:"ff8c00",darkorchid:"9932cc",darkred:"8b0000",darksalmon:"e9967a",darkseagreen:"8fbc8f",darkslateblue:"483d8b",darkslategray:"2f4f4f",darkslategrey:"2f4f4f",darkturquoise:"00ced1",darkviolet:"9400d3",deeppink:"ff1493",deepskyblue:"00bfff",dimgray:"696969",dimgrey:"696969",dodgerblue:"1e90ff",firebrick:"b22222",floralwhite:"fffaf0",forestgreen:"228b22",fuchsia:"f0f",gainsboro:"dcdcdc",ghostwhite:"f8f8ff",gold:"ffd700",goldenrod:"daa520",gray:"808080",green:"008000",greenyellow:"adff2f",
grey:"808080",honeydew:"f0fff0",hotpink:"ff69b4",indianred:"cd5c5c",indigo:"4b0082",ivory:"fffff0",khaki:"f0e68c",lavender:"e6e6fa",lavenderblush:"fff0f5",lawngreen:"7cfc00",lemonchiffon:"fffacd",lightblue:"add8e6",lightcoral:"f08080",lightcyan:"e0ffff",lightgoldenrodyellow:"fafad2",lightgray:"d3d3d3",lightgreen:"90ee90",lightgrey:"d3d3d3",lightpink:"ffb6c1",lightsalmon:"ffa07a",lightseagreen:"20b2aa",lightskyblue:"87cefa",lightslategray:"789",lightslategrey:"789",lightsteelblue:"b0c4de",lightyellow:"ffffe0",
lime:"0f0",limegreen:"32cd32",linen:"faf0e6",magenta:"f0f",maroon:"800000",mediumaquamarine:"66cdaa",mediumblue:"0000cd",mediumorchid:"ba55d3",mediumpurple:"9370db",mediumseagreen:"3cb371",mediumslateblue:"7b68ee",mediumspringgreen:"00fa9a",mediumturquoise:"48d1cc",mediumvioletred:"c71585",midnightblue:"191970",mintcream:"f5fffa",mistyrose:"ffe4e1",moccasin:"ffe4b5",navajowhite:"ffdead",navy:"000080",oldlace:"fdf5e6",olive:"808000",olivedrab:"6b8e23",orange:"ffa500",orangered:"ff4500",orchid:"da70d6",
palegoldenrod:"eee8aa",palegreen:"98fb98",paleturquoise:"afeeee",palevioletred:"db7093",papayawhip:"ffefd5",peachpuff:"ffdab9",peru:"cd853f",pink:"ffc0cb",plum:"dda0dd",powderblue:"b0e0e6",purple:"800080",rebeccapurple:"663399",red:"f00",rosybrown:"bc8f8f",royalblue:"4169e1",saddlebrown:"8b4513",salmon:"fa8072",sandybrown:"f4a460",seagreen:"2e8b57",seashell:"fff5ee",sienna:"a0522d",silver:"c0c0c0",skyblue:"87ceeb",slateblue:"6a5acd",slategray:"708090",slategrey:"708090",snow:"fffafa",springgreen:"00ff7f",
steelblue:"4682b4",tan:"d2b48c",teal:"008080",thistle:"d8bfd8",tomato:"ff6347",turquoise:"40e0d0",violet:"ee82ee",wheat:"f5deb3",white:"fff",whitesmoke:"f5f5f5",yellow:"ff0",yellowgreen:"9acd32"},T=k.hexNames=function(a){var b={},c;for(c in a)a.hasOwnProperty(c)&&(b[a[c]]=c);return b}(U),Y={CSS_UNIT:/(?:[-\+]?\d*\.\d+%?)|(?:[-\+]?\d+%?)/,rgb:/rgb[\s|\(]+((?:[-\+]?\d*\.\d+%?)|(?:[-\+]?\d+%?))[,|\s]+((?:[-\+]?\d*\.\d+%?)|(?:[-\+]?\d+%?))[,|\s]+((?:[-\+]?\d*\.\d+%?)|(?:[-\+]?\d+%?))\s*\)?/,rgba:/rgba[\s|\(]+((?:[-\+]?\d*\.\d+%?)|(?:[-\+]?\d+%?))[,|\s]+((?:[-\+]?\d*\.\d+%?)|(?:[-\+]?\d+%?))[,|\s]+((?:[-\+]?\d*\.\d+%?)|(?:[-\+]?\d+%?))[,|\s]+((?:[-\+]?\d*\.\d+%?)|(?:[-\+]?\d+%?))\s*\)?/,
hsl:/hsl[\s|\(]+((?:[-\+]?\d*\.\d+%?)|(?:[-\+]?\d+%?))[,|\s]+((?:[-\+]?\d*\.\d+%?)|(?:[-\+]?\d+%?))[,|\s]+((?:[-\+]?\d*\.\d+%?)|(?:[-\+]?\d+%?))\s*\)?/,hsla:/hsla[\s|\(]+((?:[-\+]?\d*\.\d+%?)|(?:[-\+]?\d+%?))[,|\s]+((?:[-\+]?\d*\.\d+%?)|(?:[-\+]?\d+%?))[,|\s]+((?:[-\+]?\d*\.\d+%?)|(?:[-\+]?\d+%?))[,|\s]+((?:[-\+]?\d*\.\d+%?)|(?:[-\+]?\d+%?))\s*\)?/,hsv:/hsv[\s|\(]+((?:[-\+]?\d*\.\d+%?)|(?:[-\+]?\d+%?))[,|\s]+((?:[-\+]?\d*\.\d+%?)|(?:[-\+]?\d+%?))[,|\s]+((?:[-\+]?\d*\.\d+%?)|(?:[-\+]?\d+%?))\s*\)?/,
hsva:/hsva[\s|\(]+((?:[-\+]?\d*\.\d+%?)|(?:[-\+]?\d+%?))[,|\s]+((?:[-\+]?\d*\.\d+%?)|(?:[-\+]?\d+%?))[,|\s]+((?:[-\+]?\d*\.\d+%?)|(?:[-\+]?\d+%?))[,|\s]+((?:[-\+]?\d*\.\d+%?)|(?:[-\+]?\d+%?))\s*\)?/,hex3:/^#?([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,hex6:/^#?([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})$/,hex4:/^#?([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,hex8:/^#?([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})$/};"undefined"!==typeof p&&p.exports?
p.exports=k:window.tinycolor=k})(Math)},{}],522:[function(a,p,l){function m(a){if(a.length){if(a instanceof Float32Array)return a;var e=new Float32Array(a);e.set(a);return e}k[0]=a;return k[0]}p.exports=m;p.exports.float32=p.exports.float=m;p.exports.fract32=p.exports.fract=function(a){if(a.length){for(var e=m(a),f=0,b=e.length;f<b;f++)e[f]=a[f]-e[f];return e}return m(a-m(a))};var k=new Float32Array(1)},{}],523:[function(a,p,l){function m(a,b){b=h(getComputedStyle(a).getPropertyValue(b));return b[0]*
k(b[1],a)}function k(a,b){b=b||document.body;a=(a||"px").trim().toLowerCase();if(b===window||b===document)b=document.body;switch(a){case "%":return b.clientHeight/100;case "ch":case "ex":var f=document.createElement("div");f.style["font-size"]="128"+a;b.appendChild(f);a=m(f,"font-size")/128;b.removeChild(f);return a;case "em":return m(b,"font-size");case "rem":return m(document.body,"font-size");case "vw":return window.innerWidth/100;case "vh":return window.innerHeight/100;case "vmin":return Math.min(window.innerWidth,
window.innerHeight)/100;case "vmax":return Math.max(window.innerWidth,window.innerHeight)/100;case "in":return e;case "cm":return e/2.54;case "mm":return e/25.4;case "pt":return e/72;case "pc":return e/6}return 1}var h=a("parse-unit");p.exports=k;var e=96},{"parse-unit":453}],524:[function(a,p,l){(function(a,k){"object"===typeof l&&"undefined"!==typeof p?k(l):k(a.topojson=a.topojson||{})})(this,function(a){function k(a,b){var c=b.id,d=b.bbox,e=null==b.properties?{}:b.properties;a=h(a,b);return null==
c&&null==d?{type:"Feature",properties:e,geometry:a}:null==d?{type:"Feature",id:c,properties:e,geometry:a}:{type:"Feature",id:c,bbox:d,properties:e,geometry:a}}function h(a,b){function c(a){return h(a.slice())}function d(a){for(var b=[],c=0,d=a.length;c<d;++c){var e=a[c],g=b;g.length&&g.pop();for(var f=k[0>e?~e:e],n=0,m=f.length;n<m;++n)g.push(h(f[n].slice(),n));if(0>e)for(e=g,g=e.length,f=g-m;f<--g;)m=e[f],e[f++]=e[g],e[g]=m}2>b.length&&b.push(b[0].slice());return b}function e(a){for(a=d(a);4>a.length;)a.push(a[0].slice());
return a}function g(a){return a.map(e)}function f(a){var b=a.type;switch(b){case "GeometryCollection":return{type:b,geometries:a.geometries.map(f)};case "Point":a=c(a.coordinates);break;case "MultiPoint":a=a.coordinates.map(c);break;case "LineString":a=d(a.arcs);break;case "MultiLineString":a=a.arcs.map(d);break;case "Polygon":a=g(a.arcs);break;case "MultiPolygon":a=a.arcs.map(g);break;default:return null}return{type:b,coordinates:a}}var h=m(a),k=a.arcs;return f(b)}function e(a,b,e){var c;if(1<arguments.length)var g=
f(a,b,e);else{var h=0;for(g=Array(c=a.arcs.length);h<c;++h)g[h]=h}return{type:"MultiLineString",arcs:d(a,g)}}function f(a,b,d){function c(a){var b=0>a?~a:a;(k[b]||(k[b]=[])).push({i:a,g:n})}function e(a){a.forEach(c)}function g(a){a.forEach(e)}function f(a){switch(n=a,a.type){case "GeometryCollection":a.geometries.forEach(f);break;case "LineString":e(a.arcs);break;case "MultiLineString":case "Polygon":g(a.arcs);break;case "MultiPolygon":a.arcs.forEach(g)}}var h=[],k=[],n;f(b);k.forEach(null==d?function(a){h.push(a[0].i)}:
function(a){d(a[0].g,a[a.length-1].g)&&h.push(a[0].i)});return h}function b(a,b){function c(a){switch(a.type){case "GeometryCollection":a.geometries.forEach(c);break;case "Polygon":e(a.arcs);break;case "MultiPolygon":a.arcs.forEach(e)}}function e(a){a.forEach(function(b){b.forEach(function(b){(f[b=0>b?~b:b]||(f[b]=[])).push(a)})});k.push(a)}function g(b){b=h(a,{type:"Polygon",arcs:[b]}).coordinates[0];for(var c=-1,d=b.length,e,g=b[d-1],f=0;++c<d;)e=g,g=b[c],f+=e[0]*g[1]-e[1]*g[0];return Math.abs(f)}
var f={},k=[],n=[];b.forEach(c);k.forEach(function(a){if(!a._){var b=[],c=[a];a._=1;for(n.push(b);a=c.pop();)b.push(a),a.forEach(function(a){a.forEach(function(a){f[0>a?~a:a].forEach(function(a){a._||(a._=1,c.push(a))})})})}});k.forEach(function(a){delete a._});return{type:"MultiPolygon",arcs:n.map(function(b){var c=[];b.forEach(function(a){a.forEach(function(a){a.forEach(function(a){2>f[0>a?~a:a].length&&c.push(a)})})});c=d(a,c);if(1<(b=c.length))for(var e=1,h=g(c[0]),k;e<b;++e)(k=g(c[e]))>h&&(h=
c[0],c[0]=c[e],c[e]=h,h=k);return c})}}var n=function(a){return a},m=function(a){if(null==(a=a.transform))return n;var b,c,d=a.scale[0],e=a.scale[1],g=a.translate[0],f=a.translate[1];return function(a,h){h||(b=c=0);a[0]=(b+=a[0])*d+g;a[1]=(c+=a[1])*e+f;return a}},r=function(a){function b(a){f[0]=a[0];f[1]=a[1];e(f);f[0]<k&&(k=f[0]);f[0]>r&&(r=f[0]);f[1]<n&&(n=f[1]);f[1]>u&&(u=f[1])}function c(a){switch(a.type){case "GeometryCollection":a.geometries.forEach(c);break;case "Point":b(a.coordinates);break;
case "MultiPoint":a.coordinates.forEach(b)}}var d=a.bbox;if(!d){var e=m(a),g,f=Array(2),h,k=Infinity,n=k,r=-k,u=-k;a.arcs.forEach(function(a){for(var b=-1,c=a.length;++b<c;)g=a[b],f[0]=g[0],f[1]=g[1],e(f,b),f[0]<k&&(k=f[0]),f[0]>r&&(r=f[0]),f[1]<n&&(n=f[1]),f[1]>u&&(u=f[1])});for(h in a.objects)c(a.objects[h]);d=a.bbox=[k,n,r,u]}return d},d=function(a,b){function c(b){var c=a.arcs[0>b?~b:b],d=c[0];if(a.transform){var e=[0,0];c.forEach(function(a){e[0]+=a[0];e[1]+=a[1]})}else e=c[c.length-1];return 0>
b?[e,d]:[d,e]}function d(a,b){for(var c in a){var d=a[c];delete b[d.start];delete d.start;delete d.end;d.forEach(function(a){e[0>a?~a:a]=1});h.push(d)}}var e={},g={},f={},h=[],k=-1;b.forEach(function(c,d){var e=a.arcs[0>c?~c:c];3>e.length&&!e[1][0]&&!e[1][1]&&(e=b[++k],b[k]=c,b[d]=e)});b.forEach(function(a){var b=c(a),d=b[0],e=b[1];(b=f[d])?(delete f[b.end],b.push(a),b.end=e,(a=g[e])?(delete g[a.start],d=a===b?b:b.concat(a),g[d.start=b.start]=f[d.end=a.end]=d):g[b.start]=f[b.end]=b):(b=g[e])?(delete g[b.start],
b.unshift(a),b.start=d,(a=f[d])?(delete f[a.end],d=a===b?b:a.concat(b),g[d.start=a.start]=f[d.end=b.end]=d):g[b.start]=f[b.end]=b):(b=[a],g[b.start=d]=f[b.end=e]=b)});d(f,g);d(g,f);b.forEach(function(a){e[0>a?~a:a]||h.push([a])});return h},g=function(a,b){for(var c=0,d=a.length;c<d;){var e=c+d>>>1;a[e]<b?c=e+1:d=e}return c};a.bbox=r;a.feature=function(a,b){return"GeometryCollection"===b.type?{type:"FeatureCollection",features:b.geometries.map(function(b){return k(a,b)})}:k(a,b)};a.mesh=function(a){return h(a,
e.apply(this,arguments))};a.meshArcs=e;a.merge=function(a){return h(a,b.apply(this,arguments))};a.mergeArcs=b;a.neighbors=function(a){function b(a,b){a.forEach(function(a){0>a&&(a=~a);var c=e[a];c?c.push(b):e[a]=[b]})}function c(a,c){a.forEach(function(a){b(a,c)})}function d(a,b){if("GeometryCollection"===a.type)a.geometries.forEach(function(a){d(a,b)});else if(a.type in h)h[a.type](a.arcs,b)}var e={},f=a.map(function(){return[]}),h={LineString:b,MultiLineString:c,Polygon:c,MultiPolygon:function(a,
b){a.forEach(function(a){c(a,b)})}};a.forEach(d);for(var k in e){a=e[k];for(var n=a.length,m=0;m<n;++m)for(var r=m+1;r<n;++r){var u=a[m],l=a[r],p;(p=f[u])[k=g(p,l)]!==l&&p.splice(k,0,l);(p=f[l])[k=g(p,u)]!==u&&p.splice(k,0,u)}}return f};a.quantize=function(a,b){function c(a){a[0]=Math.round((a[0]-f)/h);a[1]=Math.round((a[1]-k)/n)}function d(a){switch(a.type){case "GeometryCollection":a.geometries.forEach(d);break;case "Point":c(a.coordinates);break;case "MultiPoint":a.coordinates.forEach(c)}}if(!(2<=
(b=Math.floor(b))))throw Error("n must be ≥2");if(a.transform)throw Error("already quantized");var e=r(a),g,f=e[0],h=(e[2]-f)/(b-1)||1,k=e[1],n=(e[3]-k)/(b-1)||1;a.arcs.forEach(function(a){for(var b=1,c=1,d=a.length,e=a[0],g=e[0]=Math.round((e[0]-f)/h),m=e[1]=Math.round((e[1]-k)/n),t,r;b<d;++b)if(e=a[b],t=Math.round((e[0]-f)/h),r=Math.round((e[1]-k)/n),t!==g||r!==m)e=a[c++],e[0]=t-g,g=t,e[1]=r-m,m=r;2>c&&(e=a[c++],e[0]=0,e[1]=0);a.length=c});for(g in a.objects)d(a.objects[g]);a.transform={scale:[h,
n],translate:[f,k]};return a};a.transform=m;a.untransform=function(a){if(null==(a=a.transform))return n;var b,c,d=a.scale[0],e=a.scale[1],g=a.translate[0],f=a.translate[1];return function(a,h){h||(b=c=0);h=Math.round((a[0]-g)/d);var k=Math.round((a[1]-f)/e);a[0]=h-b;b=h;a[1]=k-c;c=k;return a}};Object.defineProperty(a,"__esModule",{value:!0})})},{}],525:[function(a,p,l){p.exports=function(a){if(0>a)return[];if(0===a)return[[0]];for(var e=Math.round(h(a+1))|0,b=[],n=0;n<e;++n){for(var u=m.unrank(a,
n),r=[0],d=0,g=0;g<u.length;++g)d+=1<<u[g],r.push(d);1>k(u)&&(r[0]=d,r[a]=0);b.push(r)}return b};var m=a("permutation-rank"),k=a("permutation-parity"),h=a("gamma")},{gamma:227,"permutation-parity":455,"permutation-rank":456}],526:[function(a,p,l){function m(a,b,d){return Math.sqrt(Math.pow(a,2)+Math.pow(b,2)+Math.pow(d,2))}function k(a){var b=Math.abs(a[0]),d=Math.abs(a[1]),e=Math.abs(a[2]),g=[0,0,0];b>Math.max(d,e)?g[2]=1:d>Math.max(b,e)?g[0]=1:g[1]=1;for(e=d=b=0;3>e;++e)b+=a[e]*a[e],d+=g[e]*a[e];
for(e=0;3>e;++e)g[e]-=d/b*a[e];u(g,g);return g}function h(a,b,d,f,h,k,n,m){this.center=e(d);this.up=e(f);this.right=e(h);this.radius=e([k]);this.angle=e([n,m]);this.angle.bounds=[[-Infinity,-Math.PI/2],[Infinity,Math.PI/2]];this.setDistanceLimits(a,b);this.computedCenter=this.center.curve(0);this.computedUp=this.up.curve(0);this.computedRight=this.right.curve(0);this.computedRadius=this.radius.curve(0);this.computedAngle=this.angle.curve(0);this.computedToward=[0,0,0];this.computedEye=[0,0,0];this.computedMatrix=
Array(16);for(a=0;16>a;++a)this.computedMatrix[a]=.5;this.recalcMatrix(0)}p.exports=function(a){a=a||{};var b=a.center||[0,0,0],d=a.up||[0,1,0],e=a.right||k(d),g=a.radius||1,f=a.theta||0,l=a.phi||0;b=[].slice.call(b,0,3);d=[].slice.call(d,0,3);u(d,d);e=[].slice.call(e,0,3);u(e,e);"eye"in a&&(g=a.eye,f=[g[0]-b[0],g[1]-b[1],g[2]-b[2]],n(e,f,d),1E-6>m(e[0],e[1],e[2])?e=k(d):u(e,e),g=m(f[0],f[1],f[2]),l=r(d,f)/g,f=r(e,f)/g,l=Math.acos(l),f=Math.acos(f));g=Math.log(g);return new h(a.zoomMin,a.zoomMax,
b,d,e,g,f,l)};var e=a("filtered-vector"),f=a("gl-mat4/invert"),b=a("gl-mat4/rotate"),n=a("gl-vec3/cross"),u=a("gl-vec3/normalize"),r=a("gl-vec3/dot");a=h.prototype;a.setDistanceLimits=function(a,b){a=0<a?Math.log(a):-Infinity;b=0<b?Math.log(b):Infinity;b=Math.max(b,a);this.radius.bounds[0][0]=a;this.radius.bounds[1][0]=b};a.getDistanceLimits=function(a){var b=this.radius.bounds[0];return a?(a[0]=Math.exp(b[0][0]),a[1]=Math.exp(b[1][0]),a):[Math.exp(b[0][0]),Math.exp(b[1][0])]};a.recalcMatrix=function(a){this.center.curve(a);
this.up.curve(a);this.right.curve(a);this.radius.curve(a);this.angle.curve(a);for(var b=this.computedUp,d=this.computedRight,e=0,g=0,f=0;3>f;++f)g+=b[f]*d[f],e+=b[f]*b[f];var h=Math.sqrt(e);for(f=a=0;3>f;++f)d[f]-=b[f]*g/e,a+=d[f]*d[f],b[f]/=h;a=Math.sqrt(a);for(f=0;3>f;++f)d[f]/=a;var k=this.computedToward;n(k,b,d);u(k,k);a=Math.exp(this.computedRadius[0]);h=this.computedAngle[0];e=this.computedAngle[1];g=Math.cos(h);h=Math.sin(h);var r=Math.cos(e),l=Math.sin(e);e=this.computedCenter;var p=g*r,q=
h*r,E=-g*l,w=-h*l;g=this.computedEye;h=this.computedMatrix;for(f=0;3>f;++f){var x=p*d[f]+q*k[f]+l*b[f];h[4*f+1]=E*d[f]+w*k[f]+r*b[f];h[4*f+2]=x;h[4*f+3]=0}d=h[1];f=h[5];l=h[9];k=h[2];r=h[6];p=h[10];b=f*p-l*r;l=l*k-d*p;d=d*r-f*k;f=m(b,l,d);h[0]=b/f;h[4]=l/f;h[8]=d/f;for(f=0;3>f;++f)g[f]=e[f]+h[2+4*f]*a;for(f=0;3>f;++f){for(e=a=0;3>e;++e)a+=h[f+4*e]*g[e];h[12+f]=-a}h[15]=1};a.getMatrix=function(a,b){this.recalcMatrix(a);a=this.computedMatrix;if(b){for(var c=0;16>c;++c)b[c]=a[c];return b}return a};var d=
[0,0,0];a.rotate=function(a,c,e,f){this.angle.move(a,c,e);if(f){this.recalcMatrix(a);c=this.computedMatrix;d[0]=c[2];d[1]=c[6];d[2]=c[10];e=this.computedUp;for(var g=this.computedRight,h=this.computedToward,k=0;3>k;++k)c[4*k]=e[k],c[4*k+1]=g[k],c[4*k+2]=h[k];b(c,c,f,d);for(k=0;3>k;++k)e[k]=c[4*k],g[k]=c[4*k+1];this.up.set(a,e[0],e[1],e[2]);this.right.set(a,g[0],g[1],g[2])}};a.pan=function(a,b,d,e){b=b||0;d=d||0;e=e||0;this.recalcMatrix(a);var c=this.computedMatrix,g=c[1],f=c[5],h=c[9],k=m(g,f,h);
g/=k;f/=k;h/=k;k=c[0];var n=c[4];c=c[8];var t=k*g+n*f+c*h;k-=g*t;n-=f*t;c-=h*t;t=m(k,n,c);this.center.move(a,k/t*b+g*d,n/t*b+f*d,c/t*b+h*d);b=Math.exp(this.computedRadius[0]);b=Math.max(1E-4,b+e);this.radius.set(a,Math.log(b))};a.translate=function(a,b,d,e){this.center.move(a,b||0,d||0,e||0)};a.setMatrix=function(a,b,d,e){var c=1;"number"===typeof d&&(c=d|0);if(0>c||3<c)c=1;var g=(c+2)%3;b||(this.recalcMatrix(a),b=this.computedMatrix);d=b[c];var h=b[c+4],k=b[c+8];if(e){e=Math.abs(d);var n=Math.abs(k),
t=Math.max(e,Math.abs(h),n);e===t?(d=0>d?-1:1,h=k=0):n===t?(k=0>k?-1:1,d=h=0):(h=0>h?-1:1,d=k=0)}else e=m(d,h,k),d/=e,h/=e,k/=e;e=b[g];n=b[g+4];g=b[g+8];t=e*d+n*h+g*k;e-=d*t;n-=h*t;g-=k*t;t=m(e,n,g);e/=t;n/=t;g/=t;t=h*g-k*n;var r=k*e-d*g,v=d*n-h*e,u=m(t,r,v);t/=u;r/=u;v/=u;this.center.jump(a,p,q,I);this.radius.idle(a);this.up.jump(a,d,h,k);this.right.jump(a,e,n,g);if(2===c)q=b[1],I=b[5],d=b[9],p=0>l?-Math.PI/2:Math.PI/2,q=Math.atan2(q*t+I*r+d*v,q*e+I*n+d*g);else{q=b[2];I=b[6];var l=b[10];p=Math.asin(Math.min(1,
Math.max(-1,q*d+I*h+l*k)));q=Math.atan2(q*t+I*r+l*v,q*e+I*n+l*g)}this.angle.jump(a,q,p);this.recalcMatrix(a);l=b[2];d=b[6];h=b[10];I=this.computedMatrix;f(I,b);b=I[15];var p=I[12]/b,q=I[13]/b,I=I[14]/b;b=Math.exp(this.computedRadius[0]);this.center.jump(a,p-l*b,q-d*b,I-h*b)};a.lastT=function(){return Math.max(this.center.lastT(),this.up.lastT(),this.right.lastT(),this.radius.lastT(),this.angle.lastT())};a.idle=function(a){this.center.idle(a);this.up.idle(a);this.right.idle(a);this.radius.idle(a);
this.angle.idle(a)};a.flush=function(a){this.center.flush(a);this.up.flush(a);this.right.flush(a);this.radius.flush(a);this.angle.flush(a)};a.setDistance=function(a,b){0<b&&this.radius.set(a,Math.log(b))};a.lookAt=function(a,b,d,e){this.recalcMatrix(a);b=b||this.computedEye;d=d||this.computedCenter;e=e||this.computedUp;var c=e[0],g=e[1];e=e[2];var f=m(c,g,e);if(!(1E-6>f)){c/=f;g/=f;e/=f;f=b[0]-d[0];var h=b[1]-d[1];b=b[2]-d[2];var k=m(f,h,b);if(!(1E-6>k)){f/=k;h/=k;b/=k;var n=this.computedRight,t=
n[0],r=n[1];n=n[2];var v=c*t+g*r+e*n;t-=v*c;r-=v*g;n-=v*e;v=m(t,r,n);if(.01>v&&(t=g*b-e*h,r=e*f-c*b,n=c*h-g*f,v=m(t,r,n),1E-6>v))return;t/=v;r/=v;n/=v;this.up.set(a,c,g,e);this.right.set(a,t,r,n);this.center.set(a,d[0],d[1],d[2]);this.radius.set(a,Math.log(k));d=g*n-e*r;k=e*t-c*n;v=c*r-g*t;var u=m(d,k,v);c=Math.asin(Math.min(1,Math.max(-1,c*f+g*h+e*b)));g=Math.atan2(d/u*f+k/u*h+v/u*b,t*f+r*h+n*b);f=this.angle._state;e=f[f.length-1];f=f[f.length-2];e%=2*Math.PI;h=Math.abs(e-g);b=Math.abs(e-2*Math.PI-
g);Math.abs(e+2*Math.PI-g)<h&&(e+=2*Math.PI);b<h&&(e-=2*Math.PI);this.angle.jump(this.angle.lastT(),e,f);this.angle.set(a,g,c)}}}},{"filtered-vector":222,"gl-mat4/invert":261,"gl-mat4/rotate":266,"gl-vec3/cross":326,"gl-vec3/dot":331,"gl-vec3/normalize":348}],527:[function(a,p,l){p.exports=function(a,h,e){var f=a*h,b=m*a;b-=b-a;a-=b;var k=m*h;k-=k-h;h-=k;h=a*h-(f-b*k-a*k-b*h);return e?(e[0]=h,e[1]=f,e):[h,f]};var m=+(Math.pow(2,27)+1)},{}],528:[function(a,p,l){p.exports=function(a,k,h){var e=a+k,
f=e-a;k-=f;a-=e-f;return h?(h[0]=a+k,h[1]=e,h):[a+k,e]}},{}],529:[function(a,p,l){(function(m,k){function h(a){if(a){var b=q.log2(a.length||a.byteLength);C[b].push(a)}}function e(a){a=q.nextPow2(a);var b=q.log2(a);b=C[b];return 0<b.length?b.pop():new ArrayBuffer(a)}function f(a){return new Uint8Array(e(a),0,a)}function b(a){return new Uint16Array(e(2*a),0,a)}function n(a){return new Uint32Array(e(4*a),0,a)}function u(a){return new Int8Array(e(a),0,a)}function r(a){return new Int16Array(e(2*a),0,a)}
function d(a){return new Int32Array(e(4*a),0,a)}function g(a){return new Float32Array(e(4*a),0,a)}function c(a){return new Float64Array(e(8*a),0,a)}function v(a){return G?new Uint8ClampedArray(e(a),0,a):f(a)}function t(a){return new DataView(e(a),0,a)}function p(a){a=q.nextPow2(a);var b=q.log2(a);b=w[b];return 0<b.length?b.pop():new k(a)}var q=a("bit-twiddle"),D=a("dup");m.__TYPEDARRAY_POOL||(m.__TYPEDARRAY_POOL={UINT8:D([32,0]),UINT16:D([32,0]),UINT32:D([32,0]),INT8:D([32,0]),INT16:D([32,0]),INT32:D([32,
0]),FLOAT:D([32,0]),DOUBLE:D([32,0]),DATA:D([32,0]),UINT8C:D([32,0]),BUFFER:D([32,0])});var G="undefined"!==typeof Uint8ClampedArray,A=m.__TYPEDARRAY_POOL;A.UINT8C||(A.UINT8C=D([32,0]));A.BUFFER||(A.BUFFER=D([32,0]));var C=A.DATA,w=A.BUFFER;l.free=function(a){if(k.isBuffer(a))w[q.log2(a.length)].push(a);else if("[object ArrayBuffer]"!==Object.prototype.toString.call(a)&&(a=a.buffer),a){var b=q.log2(a.length||a.byteLength)|0;C[b].push(a)}};l.freeUint8=l.freeUint16=l.freeUint32=l.freeInt8=l.freeInt16=
l.freeInt32=l.freeFloat32=l.freeFloat=l.freeFloat64=l.freeDouble=l.freeUint8Clamped=l.freeDataView=function(a){h(a.buffer)};l.freeArrayBuffer=h;l.freeBuffer=function(a){w[q.log2(a.length)].push(a)};l.malloc=function(a,h){if(void 0===h||"arraybuffer"===h)return e(a);switch(h){case "uint8":return f(a);case "uint16":return b(a);case "uint32":return n(a);case "int8":return u(a);case "int16":return r(a);case "int32":return d(a);case "float":case "float32":return g(a);case "double":case "float64":return c(a);
case "uint8_clamped":return v(a);case "buffer":return p(a);case "data":case "dataview":return t(a)}return null};l.mallocArrayBuffer=e;l.mallocUint8=f;l.mallocUint16=b;l.mallocUint32=n;l.mallocInt8=u;l.mallocInt16=r;l.mallocInt32=d;l.mallocFloat32=l.mallocFloat=g;l.mallocFloat64=l.mallocDouble=c;l.mallocUint8Clamped=v;l.mallocDataView=t;l.mallocBuffer=p;l.clearCache=function(){for(var a=0;32>a;++a)A.UINT8[a].length=0,A.UINT16[a].length=0,A.UINT32[a].length=0,A.INT8[a].length=0,A.INT16[a].length=0,
A.INT32[a].length=0,A.FLOAT[a].length=0,A.DOUBLE[a].length=0,A.UINT8C[a].length=0,C[a].length=0,w[a].length=0}}).call(this,"undefined"!==typeof x?x:"undefined"!==typeof self?self:"undefined"!==typeof window?window:{},a("buffer").Buffer)},{"bit-twiddle":82,buffer:95,dup:161}],530:[function(a,p,l){function m(a){this.roots=Array(a);this.ranks=Array(a);for(var h=0;h<a;++h)this.roots[h]=h,this.ranks[h]=0}"use restrict";p.exports=m;a=m.prototype;Object.defineProperty(a,"length",{get:function(){return this.roots.length}});
a.makeSet=function(){var a=this.roots.length;this.roots.push(a);this.ranks.push(0);return a};a.find=function(a){for(var h=a,e=this.roots;e[a]!==a;)a=e[a];for(;e[h]!==a;){var f=e[h];e[h]=a;h=f}return a};a.link=function(a,h){a=this.find(a);h=this.find(h);if(a!==h){var e=this.ranks,f=this.roots,b=e[a],k=e[h];b<k?f[a]=h:k<b?f[h]=a:(f[h]=a,++e[a])}}},{}],531:[function(a,p,l){p.exports=function(a,k,h){if(0===a.length)return a;if(k){h||a.sort(k);h=1;for(var e=a.length,f=a[0],b,n=1;n<e;++n)b=f,f=a[n],k(f,
b)&&(n===h?h++:a[h++]=f);a.length=h;return a}h||a.sort();k=1;h=a.length;e=a[0];for(b=1;b<h;++b)f=e,e=a[b],e!==f&&(b===k?k++:a[k++]=e);a.length=k;return a}},{}],532:[function(a,p,l){var m=/['"]/;p.exports=function(a){if(!a)return"";m.test(a.charAt(0))&&(a=a.substr(1));m.test(a.charAt(a.length-1))&&(a=a.substr(0,a.length-1));return a}},{}],533:[function(a,p,l){p.exports=function(a,k,h){Array.isArray(h)||(h=[].slice.call(arguments,2));for(var e=0,f=h.length;e<f;e++){var b=h[e],n;for(n in b)if((void 0===
k[n]||Array.isArray(k[n])||a[n]!==k[n])&&n in k){if(!0===b[n])var m=k[n];else if(!1===b[n])continue;else if("function"===typeof b[n]&&(m=b[n](k[n],a,k),void 0===m))continue;a[n]=m}}return a}},{}],534:[function(a,p,l){p.exports=function(a,f){if("object"!==typeof f||null===f)f={};return m(a,f.canvas||k,f.context||h,f)};var m=a("./lib/vtext"),k=null,h=null;"undefined"!==typeof document&&(k=document.createElement("canvas"),k.width=8192,k.height=1024,h=k.getContext("2d"))},{"./lib/vtext":535}],535:[function(a,
p,l){function m(a,b,c,d){var e="\x3c"+a+"\x3e";a="\x3c/"+a+"\x3e";for(var g=e.length,f=a.length,h=b[0]===D||b[0]===C,k=0,n;-1<k;){k=c.indexOf(e,k);if(-1===k)break;n=c.indexOf(a,k+g);if(-1===n)break;if(n<=k)break;for(var m=k;m<n+f;++m)if(m<k+g||m>=n)d[m]=null,c=c.substr(0,m)+" "+c.substr(m+1);else if(null!==d[m]){var t=d[m].indexOf(b[0]);-1===t?d[m]+=b:h&&(d[m]=d[m].substr(0,t+1)+(1+parseInt(d[m][t+1]))+d[m].substr(t+2))}k+=g;k=c.substr(k,n-k).indexOf(e);k=-1!==k?k:n+f}return d}function k(a,b,c){for(var d=
b.textAlign||"start",e=b.textBaseline||"alphabetic",g=[1073741824,1073741824],f=[0,0],h=a.length,k=0;k<h;++k)for(var n=a[k],m=0;2>m;++m)g[m]=Math.min(g[m],n[m])|0,f[m]=Math.max(f[m],n[m])|0;var t=0;switch(d){case "center":t=-.5*(g[0]+f[0]);break;case "right":case "end":t=-f[0];break;case "left":case "start":t=-g[0];break;default:throw Error("vectorize-text: Unrecognized textAlign: '"+d+"'");}var r=0;switch(e){case "hanging":case "top":r=-g[1];break;case "middle":r=-.5*(g[1]+f[1]);break;case "alphabetic":case "ideographic":r=
-3*c;break;case "bottom":r=-f[1];break;default:throw Error("vectorize-text: Unrecoginized textBaseline: '"+e+"'");}var v=1/c;"lineHeight"in b?v*=+b.lineHeight:"width"in b?v=b.width/(f[0]-g[0]):"height"in b&&(v=b.height/(f[1]-g[1]));return a.map(function(a){return[v*(a[0]+t),v*(a[1]+r)]})}function h(a,b,d,e,g,f){function h(){if(""!==P){var a=b.measureText(P).width;b.fillText(P,E+M,J+O);M+=a}}function k(){return""+Math.round(z)+"px "}function r(a,c){var d=""+b.font;if(!0===f.subscripts){var e=a.indexOf(C),
g=c.indexOf(C);e=-1<e?parseInt(a[1+e]):0;g=-1<g?parseInt(c[1+g]):0;e!==g&&(d=d.replace(k(),"?px "),z*=Math.pow(.75,g-e),d=d.replace("?px ",k()));O+=.25*I*(g-e)}!0===f.superscripts&&(e=a.indexOf(D),g=c.indexOf(D),e=-1<e?parseInt(a[1+e]):0,g=-1<g?parseInt(c[1+g]):0,e!==g&&(d=d.replace(k(),"?px "),z*=Math.pow(.75,g-e),d=d.replace("?px ",k())),O-=.25*I*(g-e));!0===f.bolds&&(g=-1<a.indexOf(v),e=-1<c.indexOf(v),!g&&e&&(d=h?d.replace("italic ","italic bold "):"bold "+d),g&&!e&&(d=d.replace("bold ","")));
if(!0===f.italics){var h=-1<a.indexOf(q);a=-1<c.indexOf(q);!h&&a&&(d="italic "+d);h&&!a&&(d=d.replace("italic ",""))}b.font=d}d=d.replace(/\n/g,"");d=!0===f.breaklines?d.replace(/<br>/g,"\n"):d.replace(/<br>/g," ");var u="",l=[];for(H=0;H<d.length;++H)l[H]=u;!0===f.bolds&&(l=m(c,v,d,l));!0===f.italics&&(l=m(t,q,d,l));!0===f.superscripts&&(l=m(B,G,d,l));!0===f.subscripts&&(l=m(A,w,d,l));var p=[],y="";for(H=0;H<d.length;++H)null!==l[H]&&(y+=d[H],p.push(l[H]));l=y.split("\n");d=l.length;var I=Math.round(g*
e),E=e,J=2*e;g=0;H=d*I+J;a.height<H&&(a.height=H);b.fillStyle="#000";b.fillRect(0,0,a.width,a.height);b.fillStyle="#fff";var H;y=0;var P="";for(a=0;a<d;++a){var x=l[a]+"\n";var M=0;var O=a*I;var z=e;P="";for(H=0;H<x.length;++H){var F=H+y<p.length?p[H+y]:p[p.length-1];u===F?P+=x[H]:(h(),P=x[H],void 0!==F&&(r(u,F),u=F))}h();y+=x.length;H=Math.round(M+2*E)|0;g<H&&(g=H)}e=g;u=J+I*d;return n(b.getImageData(0,0,e,u).data,[u,e,4]).pick(-1,-1,0).transpose(1,0)}function e(a,c,e,f){a=b(a,128);f=f?u(a.cells,
a.positions,.25):{edges:a.cells,positions:a.positions};e=k(f.positions,c,e);a=f.edges;f="ccw"===c.orientation;r(e,a);if(c.polygons||c.polygon||c.polyline){c=g(a,e);a=Array(c.length);for(var h=0;h<c.length;++h){for(var n=c[h],m=Array(n.length),t=0;t<n.length;++t){for(var v=n[t],l=Array(v.length),p=0;p<v.length;++p)l[p]=e[v[p]].slice();f&&l.reverse();m[t]=l}a[h]=m}return a}return c.triangles||c.triangulate||c.triangle?{cells:d(e,a,{delaunay:!1,exterior:!1,interior:!0}),positions:e}:{edges:a,positions:e}}
function f(a,b,c){try{return e(a,b,c,!0)}catch(M){}try{return e(a,b,c,!1)}catch(M){}return b.polygons||b.polyline||b.polygon?[]:b.triangles||b.triangulate||b.triangle?{cells:[],positions:[]}:{edges:[],positions:[]}}p.exports=function(a,b,c,d){var e=64,g=1.25,k={breaklines:!1,bolds:!1,italics:!1,subscripts:!1,superscripts:!1};d&&(d.size&&0<d.size&&(e=d.size),d.lineSpacing&&0<d.lineSpacing&&(g=d.lineSpacing),d.styletags&&d.styletags.breaklines&&(k.breaklines=d.styletags.breaklines?!0:!1),d.styletags&&
d.styletags.bolds&&(k.bolds=d.styletags.bolds?!0:!1),d.styletags&&d.styletags.italics&&(k.italics=d.styletags.italics?!0:!1),d.styletags&&d.styletags.subscripts&&(k.subscripts=d.styletags.subscripts?!0:!1),d.styletags&&d.styletags.superscripts&&(k.superscripts=d.styletags.superscripts?!0:!1));c.font=[d.fontStyle,d.fontVariant,d.fontWeight,e+"px",d.font].filter(function(a){return a}).join(" ");c.textAlign="start";c.textBaseline="alphabetic";c.direction="ltr";a=h(b,c,a,e,g,k);return f(a,d,e)};p.exports.processPixels=
f;var b=a("surface-nets"),n=a("ndarray"),u=a("simplify-planar-graph"),r=a("clean-pslg"),d=a("cdt2d"),g=a("planar-graph-to-polyline"),c="b",v="b|",t="i",q="i|",B="sup",D="+",G="+1",A="sub",C="-",w="-1"},{cdt2d:96,"clean-pslg":106,ndarray:442,"planar-graph-to-polyline":460,"simplify-planar-graph":508,"surface-nets":515}],536:[function(a,p,l){(function(){function a(b){b.permitHostObjects___&&b.permitHostObjects___(a)}function k(a){return!("weakmap:"==a.substr(0,8)&&"___"===a.substr(a.length-3))}function h(a){if(a!==
Object(a))throw new TypeError("Not an object: "+a);var b=a[v];if(b&&b.key===a)return b;if(c(a)){b={key:a};try{return g(a,v,{value:b,writable:!1,enumerable:!1,configurable:!1}),b}catch(C){}}}function e(a){a.prototype=null;return Object.freeze(a)}function f(){l||"undefined"===typeof console||(l=!0,console.warn("WeakMap should be invoked as new WeakMap(), not WeakMap(). This will be an error in the future."))}if("undefined"===typeof ses||!ses.ok||ses.ok()){"undefined"!==typeof ses&&(ses.weakMapPermitHostObjects=
a);var b=!1;if("function"===typeof WeakMap){var n=WeakMap;if("undefined"===typeof navigator||!/Firefox/.test(navigator.userAgent)){var u=new n,r=Object.freeze({});u.set(r,1);if(1!==u.get(r))b=!0;else{p.exports=WeakMap;return}}}var d=Object.getOwnPropertyNames,g=Object.defineProperty,c=Object.isExtensible,v="weakmap:ident:"+Math.random()+"___";"undefined"!==typeof crypto&&"function"===typeof crypto.getRandomValues&&"function"===typeof ArrayBuffer&&"function"===typeof Uint8Array&&(u=new ArrayBuffer(25),
u=new Uint8Array(u),crypto.getRandomValues(u),v="weakmap:rand:"+Array.prototype.map.call(u,function(a){return(a%36).toString(36)}).join("")+"___");g(Object,"getOwnPropertyNames",{value:function(a){return d(a).filter(k)}});if("getPropertyNames"in Object){var t=Object.getPropertyNames;g(Object,"getPropertyNames",{value:function(a){return t(a).filter(k)}})}(function(){var a=Object.freeze;g(Object,"freeze",{value:function(b){h(b);return a(b)}});var b=Object.seal;g(Object,"seal",{value:function(a){h(a);
return b(a)}});var c=Object.preventExtensions;g(Object,"preventExtensions",{value:function(a){h(a);return c(a)}})})();var l=!1,q=0,D=function(){this instanceof D||f();var a=[],b=[],c=q++;return Object.create(D.prototype,{get___:{value:e(function(d,e){var g=h(d);if(g)return c in g?g[c]:e;d=a.indexOf(d);return 0<=d?b[d]:e})},has___:{value:e(function(b){var d=h(b);return d?c in d:0<=a.indexOf(b)})},set___:{value:e(function(d,e){var g;(g=h(d))?g[c]=e:(g=a.indexOf(d),0<=g?b[g]=e:(g=a.length,b[g]=e,a[g]=
d));return this})},delete___:{value:e(function(d){var e=h(d);if(e)return c in e&&delete e[c];d=a.indexOf(d);if(0>d)return!1;e=a.length-1;a[d]=void 0;b[d]=b[e];a[d]=a[e];a.length=e;b.length=e;return!0})}})};D.prototype=Object.create(Object.prototype,{get:{value:function(a,b){return this.get___(a,b)},writable:!0,configurable:!0},has:{value:function(a){return this.has___(a)},writable:!0,configurable:!0},set:{value:function(a,b){return this.set___(a,b)},writable:!0,configurable:!0},"delete":{value:function(a){return this.delete___(a)},
writable:!0,configurable:!0}});"function"===typeof n?function(){function c(){this instanceof D||f();var c=new n,d=void 0,g=!1;var h=b?function(a,b){c.set(a,b);c.has(a)||(d||(d=new D),d.set(a,b));return this}:function(a,b){if(g)try{c.set(a,b)}catch(M){d||(d=new D),d.set___(a,b)}else c.set(a,b);return this};return Object.create(D.prototype,{get___:{value:e(function(a,b){return d?c.has(a)?c.get(a):d.get___(a,b):c.get(a,b)})},has___:{value:e(function(a){return c.has(a)||(d?d.has___(a):!1)})},set___:{value:e(h)},
delete___:{value:e(function(a){var b=!!c["delete"](a);return d?d.delete___(a)||b:b})},permitHostObjects___:{value:e(function(b){if(b===a)g=!0;else throw Error("bogus call to permitHostObjects___");})}})}b&&"undefined"!==typeof Proxy&&(Proxy=void 0);c.prototype=D.prototype;p.exports=c;Object.defineProperty(WeakMap.prototype,"constructor",{value:WeakMap,enumerable:!1,configurable:!0,writable:!0})}():("undefined"!==typeof Proxy&&(Proxy=void 0),p.exports=D)}})()},{}],537:[function(a,p,l){var m=a("./hidden-store.js");
p.exports=function(){var a={};return function(h){if(("object"!==typeof h||null===h)&&"function"!==typeof h)throw Error("Weakmap-shim: Key must be object");var e=h.valueOf(a);return e&&e.identity===a?e:m(h,a)}}},{"./hidden-store.js":538}],538:[function(a,p,l){p.exports=function(a,k){var h={identity:k},e=a.valueOf;Object.defineProperty(a,"valueOf",{value:function(a){return a!==k?e.apply(this,arguments):h},writable:!0});return h}},{}],539:[function(a,p,l){var m=a("./create-store.js");p.exports=function(){var a=
m();return{get:function(h,e){h=a(h);return h.hasOwnProperty("value")?h.value:e},set:function(h,e){a(h).value=e;return this},has:function(h){return"value"in a(h)},"delete":function(h){return delete a(h).value}}}},{"./create-store.js":537}],540:[function(a,p,l){var m=a("get-canvas-context");p.exports=function(a){return m("webgl",a)}},{"get-canvas-context":228}],541:[function(a,p,l){function m(a){this.local=this.regionalOptions[a||""]||this.regionalOptions[""]}var k=a("../main");a=a("object-assign");
var h=k.instance();m.prototype=new k.baseCalendar;a(m.prototype,{name:"Chinese",jdEpoch:1721425.5,hasYearZero:!1,minMonth:0,firstMonth:0,minDay:1,regionalOptions:{"":{name:"Chinese",epochs:["BEC","EC"],monthNumbers:function(a,b){if("string"===typeof a)return(b=a.match(f))?b[0]:"";var c=this._validateYear(a);a=a.month();var d=""+this.toChineseMonth(c,a);b&&2>d.length&&(d="0"+d);this.isIntercalaryMonth(c,a)&&(d+="i");return d},monthNames:function(a){if("string"===typeof a){var d=a.match(b);return d?
d[0]:""}d=this._validateYear(a);a=a.month();var c="一月 二月 三月 四月 五月 六月 七月 八月 九月 十月 十一月 十二月".split(" ")[this.toChineseMonth(d,a)-1];this.isIntercalaryMonth(d,a)&&(c="闰"+c);return c},monthNamesShort:function(a){if("string"===typeof a){var b=a.match(n);return b?b[0]:""}b=this._validateYear(a);a=a.month();var c="一 二 三 四 五 六 七 八 九 十 十一 十二".split(" ")[this.toChineseMonth(b,a)-1];this.isIntercalaryMonth(b,a)&&(c="闰"+c);return c},parseMonth:function(a,b){a=this._validateYear(a);var c=parseInt(b);if(isNaN(c)){if("闰"===
b[0]){var d=!0;b=b.substring(1)}"月"===b[b.length-1]&&(b=b.substring(0,b.length-1));c=1+"一 二 三 四 五 六 七 八 九 十 十一 十二".split(" ").indexOf(b)}else b=b[b.length-1],d="i"===b||"I"===b;return this.toMonthIndex(a,c,d)},dayNames:"Sunday Monday Tuesday Wednesday Thursday Friday Saturday".split(" "),dayNamesShort:"Sun Mon Tue Wed Thu Fri Sat".split(" "),dayNamesMin:"Su Mo Tu We Th Fr Sa".split(" "),digits:null,dateFormat:"yyyy/mm/dd",firstDay:1,isRTL:!1}},_validateYear:function(a,b){a.year&&(a=a.year());if("number"!==
typeof a||1888>a||2111<a)throw b.replace(/\{0\}/,this.local.name);return a},toMonthIndex:function(a,b,c){a=this.intercalaryMonth(a);if(c&&b!==a||1>b||12<b)throw k.local.invalidMonth.replace(/\{0\}/,this.local.name);return a?!c&&b<=a?b-1:b:b-1},toChineseMonth:function(a,b){a.year&&(a=a.year(),b=a.month());a=this.intercalaryMonth(a);if(0>b||b>(a?12:11))throw k.local.invalidMonth.replace(/\{0\}/,this.local.name);return a?b<a?b+1:b:b+1},intercalaryMonth:function(a){a=this._validateYear(a);return u[a-
u[0]]>>13},isIntercalaryMonth:function(a,b){a.year&&(a=a.year(),b=a.month());a=this.intercalaryMonth(a);return!!a&&a===b},leapYear:function(a){return 0!==this.intercalaryMonth(a)},weekOfYear:function(a,b,c){var d=this._validateYear(a,k.local.invalidyear);d=r[d-r[0]];d=h.newDate(d>>9&4095,d>>5&15,d&31);d.add(4-(d.dayOfWeek()||7),"d");a=this.toJD(a,b,c)-d.toJD();return 1+Math.floor(a/7)},monthsInYear:function(a){return this.leapYear(a)?13:12},daysInMonth:function(a,b){a.year&&(b=a.month(),a=a.year());
a=this._validateYear(a);a=u[a-u[0]];if(b>(a>>13?12:11))throw k.local.invalidMonth.replace(/\{0\}/,this.local.name);return a&1<<12-b?30:29},weekDay:function(a,b,c){return 6>(this.dayOfWeek(a,b,c)||7)},toJD:function(a,b,c){e=this._validate(a,e,c,k.local.invalidDate);a=this._validateYear(e.year());b=e.month();c=e.day();var d=this.isIntercalaryMonth(a,b),e=this.toChineseMonth(a,b);if("object"===typeof a)b=e||{};else{if(!("number"===typeof a&&1888<=a&&2111>=a))throw Error("Lunar year outside range 1888-2111");
if(!("number"===typeof e&&1<=e&&12>=e))throw Error("Lunar month outside range 1 - 12");if(!("number"===typeof c&&1<=c&&30>=c))throw Error("Lunar day outside range 1 - 30");if("object"===typeof d){var g=!1;b=d}else g=!!d,b={};a={year:a,month:e,day:c,isIntercalary:g}}e=a.day-1;c=u[a.year-u[0]];d=(d=c>>13)?a.month>d?a.month:a.isIntercalary?a.month:a.month-1:a.month-1;for(g=0;g<d;g++)e+=c&1<<12-g?30:29;a=r[a.year-r[0]];a=new Date(a>>9&4095,(a>>5&15)-1,(a&31)+e);b.year=a.getFullYear();b.month=1+a.getMonth();
b.day=a.getDate();return h.toJD(b.year,b.month,b.day)},fromJD:function(a){var b=h.fromJD(a),c=b.year();a=b.month();b=b.day();if("object"===typeof c)a=a||{};else{if(!("number"===typeof c&&1888<=c&&2111>=c))throw Error("Solar year outside range 1888-2111");if(!("number"===typeof a&&1<=a&&12>=a))throw Error("Solar month outside range 1 - 12");if(!("number"===typeof b&&1<=b&&31>=b))throw Error("Solar day outside range 1 - 31");c={year:c,month:a,day:b};a={}}b=r[c.year-r[0]];a.year=(c.year<<9|c.month<<
5|c.day)>=b?c.year:c.year-1;b=r[a.year-r[0]];c=Math.round((new Date(c.year,c.month-1,c.day)-new Date(b>>9&4095,(b>>5&15)-1,b&31))/864E5);var d=u[a.year-u[0]];for(b=0;13>b;b++){var e=d&1<<12-b?30:29;if(c<e)break;c-=e}d>>=13;!d||b<d?(a.isIntercalary=!1,a.month=1+b):(a.isIntercalary=b===d?!0:!1,a.month=b);a.day=1+c;c=this.toMonthIndex(a.year,a.month,a.isIntercalary);return this.newDate(a.year,c,a.day)},fromString:function(a){a=a.match(e);var b=this._validateYear(+a[1]),c=this.toMonthIndex(b,+a[2],!!a[3]);
return this.newDate(b,c,+a[4])},add:function(a,b,c){var d=a.year(),e=a.month(),g=this.isIntercalaryMonth(d,e);d=this.toChineseMonth(d,e);a=Object.getPrototypeOf(m.prototype).add.call(this,a,b,c);"y"===c&&(b=a.year(),c=a.month(),e=this.isIntercalaryMonth(b,d),g=g&&e?this.toMonthIndex(b,d,!0):this.toMonthIndex(b,d,!1),g!==c&&a.month(g));return a}});var e=/^\s*(-?\d\d\d\d|\d\d)[-/](\d?\d)([iI]?)[-/](\d?\d)/m,f=/^\d?\d[iI]?/m,b=/^闰?十?[一二三四五六七八九]?月/m,n=/^闰?十?[一二三四五六七八九]?/m;k.calendars.chinese=m;var u=
[1887,5780,5802,19157,2742,50359,1198,2646,46378,7466,3412,30122,5482,67949,2396,5294,43597,6732,6954,36181,2772,4954,18781,2396,54427,5274,6730,47781,5800,6868,21210,4790,59703,2350,5270,46667,3402,3496,38325,1388,4782,18735,2350,52374,6804,7498,44457,2906,1388,29294,4700,63789,6442,6804,56138,5802,2772,38235,1210,4698,22827,5418,63125,3476,5802,43701,2484,5302,27223,2646,70954,7466,3412,54698,5482,2412,38062,5294,2636,32038,6954,60245,2772,4826,43357,2394,5274,39501,6730,72357,5800,5844,53978,4790,
2358,38039,5270,87627,3402,3496,54708,5484,4782,43311,2350,3222,27978,7498,68965,2904,5484,45677,4700,6444,39573,6804,6986,19285,2772,62811,1210,4698,47403,5418,5780,38570,5546,76469,2420,5302,51799,2646,5414,36501,3412,5546,18869,2412,54446,5276,6732,48422,6822,2900,28010,4826,92509,2394,5274,55883,6730,6820,47956,5812,2778,18779,2358,62615,5270,5450,46757,3492,5556,27318,4718,67887,2350,3222,52554,7498,3428,38252,5468,4700,31022,6444,64149,6804,6986,43861,2772,5338,35421,2650,70955,5418,5780,54954,
5546,2740,38074,5302,2646,29991,3366,61011,3412,5546,43445,2412,5294,35406,6732,72998,6820,6996,52586,2778,2396,38045,5274,6698,23333,6820,64338,5812,2746,43355,2358,5270,39499,5450,79525,3492,5548],r=[1887,966732,967231,967733,968265,968766,969297,969798,970298,970829,971330,971830,972362,972863,973395,973896,974397,974928,975428,975929,976461,976962,977462,977994,978494,979026,979526,980026,980558,981059,981559,982091,982593,983124,983624,984124,984656,985157,985656,986189,986690,987191,987722,
988222,988753,989254,989754,990286,990788,991288,991819,992319,992851,993352,993851,994383,994885,995385,995917,996418,996918,997450,997949,998481,998982,999483,1000014,1000515,1001016,1001548,1002047,1002578,1003080,1003580,1004111,1004613,1005113,1005645,1006146,1006645,1007177,1007678,1008209,1008710,1009211,1009743,1010243,1010743,1011275,1011775,1012306,1012807,1013308,1013840,1014341,1014841,1015373,1015874,1016404,1016905,1017405,1017937,1018438,1018939,1019471,1019972,1020471,1021002,1021503,
1022035,1022535,1023036,1023568,1024069,1024568,1025100,1025601,1026102,1026633,1027133,1027666,1028167,1028666,1029198,1029699,1030199,1030730,1031231,1031763,1032264,1032764,1033296,1033797,1034297,1034828,1035329,1035830,1036362,1036861,1037393,1037894,1038394,1038925,1039427,1039927,1040459,1040959,1041491,1041992,1042492,1043023,1043524,1044024,1044556,1045057,1045558,1046090,1046590,1047121,1047622,1048122,1048654,1049154,1049655,1050187,1050689,1051219,1051720,1052220,1052751,1053252,1053752,
1054284,1054786,1055285,1055817,1056317,1056849,1057349,1057850,1058382,1058883,1059383,1059915,1060415,1060947,1061447,1061947,1062479,1062981,1063480,1064012,1064514,1065014,1065545,1066045,1066577,1067078,1067578,1068110,1068611,1069112,1069642,1070142,1070674,1071175,1071675,1072207,1072709,1073209,1073740,1074241,1074741,1075273,1075773,1076305,1076807,1077308,1077839,1078340,1078840,1079372,1079871,1080403,1080904]},{"../main":555,"object-assign":446}],542:[function(a,p,l){function m(a){this.local=
this.regionalOptions[a||""]||this.regionalOptions[""]}var k=a("../main");a=a("object-assign");m.prototype=new k.baseCalendar;a(m.prototype,{name:"Coptic",jdEpoch:1825029.5,daysPerMonth:[30,30,30,30,30,30,30,30,30,30,30,30,5],hasYearZero:!1,minMonth:1,firstMonth:1,minDay:1,regionalOptions:{"":{name:"Coptic",epochs:["BAM","AM"],monthNames:"Thout;Paopi;Hathor;Koiak;Tobi;Meshir;Paremhat;Paremoude;Pashons;Paoni;Epip;Mesori;Pi Kogi Enavot".split(";"),monthNamesShort:"Tho Pao Hath Koi Tob Mesh Pat Pad Pash Pao Epi Meso PiK".split(" "),
dayNames:"Tkyriaka Pesnau Pshoment Peftoou Ptiou Psoou Psabbaton".split(" "),dayNamesShort:"Tky Pes Psh Pef Pti Pso Psa".split(" "),dayNamesMin:"Tk Pes Psh Pef Pt Pso Psa".split(" "),digits:null,dateFormat:"dd/mm/yyyy",firstDay:0,isRTL:!1}},leapYear:function(a){a=this._validate(a,this.minMonth,this.minDay,k.local.invalidYear);a=a.year()+(0>a.year()?1:0);return 3===a%4||-1===a%4},monthsInYear:function(a){this._validate(a,this.minMonth,this.minDay,k.local.invalidYear||k.regionalOptions[""].invalidYear);
return 13},weekOfYear:function(a,e,f){a=this.newDate(a,e,f);a.add(-a.dayOfWeek(),"d");return Math.floor((a.dayOfYear()-1)/7)+1},daysInMonth:function(a,e){a=this._validate(a,e,this.minDay,k.local.invalidMonth);return this.daysPerMonth[a.month()-1]+(13===a.month()&&this.leapYear(a.year())?1:0)},weekDay:function(a,e,f){return 6>(this.dayOfWeek(a,e,f)||7)},toJD:function(a,e,f){e=this._validate(a,e,f,k.local.invalidDate);a=e.year();0>a&&a++;return e.day()+30*(e.month()-1)+365*(a-1)+Math.floor(a/4)+this.jdEpoch-
1},fromJD:function(a){var e=Math.floor(a)+.5-this.jdEpoch,f=Math.floor((e-Math.floor((e+366)/1461))/365)+1;0>=f&&f--;e=Math.floor(a)+.5-this.newDate(f,1,1).toJD();a=Math.floor(e/30)+1;return this.newDate(f,a,e-30*(a-1)+1)}});k.calendars.coptic=m},{"../main":555,"object-assign":446}],543:[function(a,p,l){function m(a){this.local=this.regionalOptions[a||""]||this.regionalOptions[""]}var k=a("../main");a=a("object-assign");m.prototype=new k.baseCalendar;a(m.prototype,{name:"Discworld",jdEpoch:1721425.5,
daysPerMonth:[16,32,32,32,32,32,32,32,32,32,32,32,32],hasYearZero:!1,minMonth:1,firstMonth:1,minDay:1,regionalOptions:{"":{name:"Discworld",epochs:["BUC","UC"],monthNames:"Ick Offle February March April May June Grune August Spune Sektober Ember December".split(" "),monthNamesShort:"Ick Off Feb Mar Apr May Jun Gru Aug Spu Sek Emb Dec".split(" "),dayNames:"Sunday Octeday Monday Tuesday Wednesday Thursday Friday Saturday".split(" "),dayNamesShort:"Sun Oct Mon Tue Wed Thu Fri Sat".split(" "),dayNamesMin:"Su Oc Mo Tu We Th Fr Sa".split(" "),
digits:null,dateFormat:"yyyy/mm/dd",firstDay:2,isRTL:!1}},leapYear:function(a){this._validate(a,this.minMonth,this.minDay,k.local.invalidYear);return!1},monthsInYear:function(a){this._validate(a,this.minMonth,this.minDay,k.local.invalidYear);return 13},daysInYear:function(a){this._validate(a,this.minMonth,this.minDay,k.local.invalidYear);return 400},weekOfYear:function(a,f,b){a=this.newDate(a,f,b);a.add(-a.dayOfWeek(),"d");return Math.floor((a.dayOfYear()-1)/8)+1},daysInMonth:function(a,f){a=this._validate(a,
f,this.minDay,k.local.invalidMonth);return this.daysPerMonth[a.month()-1]},daysInWeek:function(){return 8},dayOfWeek:function(a,f,b){return(this._validate(a,f,b,k.local.invalidDate).day()+1)%8},weekDay:function(a,f,b){a=this.dayOfWeek(a,f,b);return 2<=a&&6>=a},extraInfo:function(a,f,b){a=this._validate(a,f,b,k.local.invalidDate);return{century:h[Math.floor((a.year()-1)/100)+1]||""}},toJD:function(a,f,b){b=this._validate(a,f,b,k.local.invalidDate);a=b.year()+(0>b.year()?1:0);f=b.month();b=b.day();
return b+(1<f?16:0)+(2<f?32*(f-2):0)+400*(a-1)+this.jdEpoch-1},fromJD:function(a){a=Math.floor(a+.5)-Math.floor(this.jdEpoch)-1;var e=Math.floor(a/400)+1;a-=400*(e-1);a+=15<a?16:0;var b=Math.floor(a/32)+1;return this.newDate(0>=e?e-1:e,b,a-32*(b-1)+1)}});var h={20:"Fruitbat",21:"Anchovy"};k.calendars.discworld=m},{"../main":555,"object-assign":446}],544:[function(a,p,l){function m(a){this.local=this.regionalOptions[a||""]||this.regionalOptions[""]}var k=a("../main");a=a("object-assign");m.prototype=
new k.baseCalendar;a(m.prototype,{name:"Ethiopian",jdEpoch:1724220.5,daysPerMonth:[30,30,30,30,30,30,30,30,30,30,30,30,5],hasYearZero:!1,minMonth:1,firstMonth:1,minDay:1,regionalOptions:{"":{name:"Ethiopian",epochs:["BEE","EE"],monthNames:"Meskerem Tikemet Hidar Tahesas Tir Yekatit Megabit Miazia Genbot Sene Hamle Nehase Pagume".split(" "),monthNamesShort:"Mes Tik Hid Tah Tir Yek Meg Mia Gen Sen Ham Neh Pag".split(" "),dayNames:"Ehud Segno Maksegno Irob Hamus Arb Kidame".split(" "),dayNamesShort:"Ehu Seg Mak Iro Ham Arb Kid".split(" "),
dayNamesMin:"Eh Se Ma Ir Ha Ar Ki".split(" "),digits:null,dateFormat:"dd/mm/yyyy",firstDay:0,isRTL:!1}},leapYear:function(a){a=this._validate(a,this.minMonth,this.minDay,k.local.invalidYear);a=a.year()+(0>a.year()?1:0);return 3===a%4||-1===a%4},monthsInYear:function(a){this._validate(a,this.minMonth,this.minDay,k.local.invalidYear||k.regionalOptions[""].invalidYear);return 13},weekOfYear:function(a,e,f){a=this.newDate(a,e,f);a.add(-a.dayOfWeek(),"d");return Math.floor((a.dayOfYear()-1)/7)+1},daysInMonth:function(a,
e){a=this._validate(a,e,this.minDay,k.local.invalidMonth);return this.daysPerMonth[a.month()-1]+(13===a.month()&&this.leapYear(a.year())?1:0)},weekDay:function(a,e,f){return 6>(this.dayOfWeek(a,e,f)||7)},toJD:function(a,e,f){e=this._validate(a,e,f,k.local.invalidDate);a=e.year();0>a&&a++;return e.day()+30*(e.month()-1)+365*(a-1)+Math.floor(a/4)+this.jdEpoch-1},fromJD:function(a){var e=Math.floor(a)+.5-this.jdEpoch,f=Math.floor((e-Math.floor((e+366)/1461))/365)+1;0>=f&&f--;e=Math.floor(a)+.5-this.newDate(f,
1,1).toJD();a=Math.floor(e/30)+1;return this.newDate(f,a,e-30*(a-1)+1)}});k.calendars.ethiopian=m},{"../main":555,"object-assign":446}],545:[function(a,p,l){function m(a){this.local=this.regionalOptions[a||""]||this.regionalOptions[""]}function k(a,f){return a-f*Math.floor(a/f)}var h=a("../main");a=a("object-assign");m.prototype=new h.baseCalendar;a(m.prototype,{name:"Hebrew",jdEpoch:347995.5,daysPerMonth:[30,29,30,29,30,29,30,29,30,29,30,29,29],hasYearZero:!1,minMonth:1,firstMonth:7,minDay:1,regionalOptions:{"":{name:"Hebrew",
epochs:["BAM","AM"],monthNames:"Nisan;Iyar;Sivan;Tammuz;Av;Elul;Tishrei;Cheshvan;Kislev;Tevet;Shevat;Adar;Adar II".split(";"),monthNamesShort:"Nis Iya Siv Tam Av Elu Tis Che Kis Tev She Ada Ad2".split(" "),dayNames:"Yom Rishon;Yom Sheni;Yom Shlishi;Yom Revi'i;Yom Chamishi;Yom Shishi;Yom Shabbat".split(";"),dayNamesShort:"Ris She Shl Rev Cha Shi Sha".split(" "),dayNamesMin:"Ri She Shl Re Ch Shi Sha".split(" "),digits:null,dateFormat:"dd/mm/yyyy",firstDay:0,isRTL:!1}},leapYear:function(a){a=this._validate(a,
this.minMonth,this.minDay,h.local.invalidYear);return this._leapYear(a.year())},_leapYear:function(a){return 7>k(7*(0>a?a+1:a)+1,19)},monthsInYear:function(a){this._validate(a,this.minMonth,this.minDay,h.local.invalidYear);return this._leapYear(a.year?a.year():a)?13:12},weekOfYear:function(a,f,b){a=this.newDate(a,f,b);a.add(-a.dayOfWeek(),"d");return Math.floor((a.dayOfYear()-1)/7)+1},daysInYear:function(a){a=this._validate(a,this.minMonth,this.minDay,h.local.invalidYear).year();return this.toJD(-1===
a?1:a+1,7,1)-this.toJD(a,7,1)},daysInMonth:function(a,f){a.year&&(f=a.month(),a=a.year());this._validate(a,f,this.minDay,h.local.invalidMonth);return 12===f&&this.leapYear(a)?30:8===f&&5===k(this.daysInYear(a),10)?30:9===f&&3===k(this.daysInYear(a),10)?29:this.daysPerMonth[f-1]},weekDay:function(a,f,b){return 6!==this.dayOfWeek(a,f,b)},extraInfo:function(a,f,b){a=this._validate(a,f,b,h.local.invalidDate);return{yearType:(this.leapYear(a)?"embolismic":"common")+" "+["deficient","regular","complete"][this.daysInYear(a)%
10-3]}},toJD:function(a,f,b){b=this._validate(a,f,b,h.local.invalidDate);a=b.year();f=b.month();b=b.day();var e=0>=a?a+1:a;b=this.jdEpoch+this._delay1(e)+this._delay2(e)+b+1;if(7>f){for(e=7;e<=this.monthsInYear(a);e++)b+=this.daysInMonth(a,e);e=1}else e=7;for(;e<f;e++)b+=this.daysInMonth(a,e);return b},_delay1:function(a){a=Math.floor((235*a-234)/19);a=29*a+Math.floor((12084+13753*a)/25920);3>k(3*(a+1),7)&&a++;return a},_delay2:function(a){var e=this._delay1(a-1),b=this._delay1(a);return 356===this._delay1(a+
1)-b?2:382===b-e?1:0},fromJD:function(a){a=Math.floor(a)+.5;for(var e=Math.floor(98496*(a-this.jdEpoch)/35975351)-1;a>=this.toJD(-1===e?1:e+1,7,1);)e++;for(var b=a<this.toJD(e,1,1)?7:1;a>this.toJD(e,b,this.daysInMonth(e,b));)b++;a=a-this.toJD(e,b,1)+1;return this.newDate(e,b,a)}});h.calendars.hebrew=m},{"../main":555,"object-assign":446}],546:[function(a,p,l){function m(a){this.local=this.regionalOptions[a||""]||this.regionalOptions[""]}var k=a("../main");a=a("object-assign");m.prototype=new k.baseCalendar;
a(m.prototype,{name:"Islamic",jdEpoch:1948439.5,daysPerMonth:[30,29,30,29,30,29,30,29,30,29,30,29],hasYearZero:!1,minMonth:1,firstMonth:1,minDay:1,regionalOptions:{"":{name:"Islamic",epochs:["BH","AH"],monthNames:"Muharram;Safar;Rabi' al-awwal;Rabi' al-thani;Jumada al-awwal;Jumada al-thani;Rajab;Sha'aban;Ramadan;Shawwal;Dhu al-Qi'dah;Dhu al-Hijjah".split(";"),monthNamesShort:"Muh Saf Rab1 Rab2 Jum1 Jum2 Raj Sha' Ram Shaw DhuQ DhuH".split(" "),dayNames:"Yawm al-ahad;Yawm al-ithnayn;Yawm ath-thulaathaa';Yawm al-arbi'aa';Yawm al-khamīs;Yawm al-jum'a;Yawm as-sabt".split(";"),
dayNamesShort:"Aha Ith Thu Arb Kha Jum Sab".split(" "),dayNamesMin:"Ah It Th Ar Kh Ju Sa".split(" "),digits:null,dateFormat:"yyyy/mm/dd",firstDay:6,isRTL:!1}},leapYear:function(a){return 11>(11*this._validate(a,this.minMonth,this.minDay,k.local.invalidYear).year()+14)%30},weekOfYear:function(a,e,f){a=this.newDate(a,e,f);a.add(-a.dayOfWeek(),"d");return Math.floor((a.dayOfYear()-1)/7)+1},daysInYear:function(a){return this.leapYear(a)?355:354},daysInMonth:function(a,e){a=this._validate(a,e,this.minDay,
k.local.invalidMonth);return this.daysPerMonth[a.month()-1]+(12===a.month()&&this.leapYear(a.year())?1:0)},weekDay:function(a,e,f){return 5!==this.dayOfWeek(a,e,f)},toJD:function(a,e,f){f=this._validate(a,e,f,k.local.invalidDate);a=f.year();e=f.month();f=f.day();a=0>=a?a+1:a;return f+Math.ceil(29.5*(e-1))+354*(a-1)+Math.floor((3+11*a)/30)+this.jdEpoch-1},fromJD:function(a){a=Math.floor(a)+.5;var e=Math.floor((30*(a-this.jdEpoch)+10646)/10631);e=0>=e?e-1:e;var f=Math.min(12,Math.ceil((a-29-this.toJD(e,
1,1))/29.5)+1);a=a-this.toJD(e,f,1)+1;return this.newDate(e,f,a)}});k.calendars.islamic=m},{"../main":555,"object-assign":446}],547:[function(a,p,l){function m(a){this.local=this.regionalOptions[a||""]||this.regionalOptions[""]}var k=a("../main");a=a("object-assign");m.prototype=new k.baseCalendar;a(m.prototype,{name:"Julian",jdEpoch:1721423.5,daysPerMonth:[31,28,31,30,31,30,31,31,30,31,30,31],hasYearZero:!1,minMonth:1,firstMonth:1,minDay:1,regionalOptions:{"":{name:"Julian",epochs:["BC","AD"],monthNames:"January February March April May June July August September October November December".split(" "),
monthNamesShort:"Jan Feb Mar Apr May Jun Jul Aug Sep Oct Nov Dec".split(" "),dayNames:"Sunday Monday Tuesday Wednesday Thursday Friday Saturday".split(" "),dayNamesShort:"Sun Mon Tue Wed Thu Fri Sat".split(" "),dayNamesMin:"Su Mo Tu We Th Fr Sa".split(" "),digits:null,dateFormat:"mm/dd/yyyy",firstDay:0,isRTL:!1}},leapYear:function(a){a=this._validate(a,this.minMonth,this.minDay,k.local.invalidYear);a=0>a.year()?a.year()+1:a.year();return 0===a%4},weekOfYear:function(a,e,f){a=this.newDate(a,e,f);a.add(4-
(a.dayOfWeek()||7),"d");return Math.floor((a.dayOfYear()-1)/7)+1},daysInMonth:function(a,e){a=this._validate(a,e,this.minDay,k.local.invalidMonth);return this.daysPerMonth[a.month()-1]+(2===a.month()&&this.leapYear(a.year())?1:0)},weekDay:function(a,e,f){return 6>(this.dayOfWeek(a,e,f)||7)},toJD:function(a,e,f){f=this._validate(a,e,f,k.local.invalidDate);a=f.year();e=f.month();f=f.day();0>a&&a++;2>=e&&(a--,e+=12);return Math.floor(365.25*(a+4716))+Math.floor(30.6001*(e+1))+f-1524.5},fromJD:function(a){var e=
Math.floor(a+.5)+1524,f=Math.floor((e-122.1)/365.25),b=Math.floor(365.25*f),h=Math.floor((e-b)/30.6001);a=h-Math.floor(14>h?1:13);f-=Math.floor(2<a?4716:4715);e=e-b-Math.floor(30.6001*h);0>=f&&f--;return this.newDate(f,a,e)}});k.calendars.julian=m},{"../main":555,"object-assign":446}],548:[function(a,p,l){function m(a){this.local=this.regionalOptions[a||""]||this.regionalOptions[""]}function k(a,f){return a-f*Math.floor(a/f)}var h=a("../main");a=a("object-assign");m.prototype=new h.baseCalendar;a(m.prototype,
{name:"Mayan",jdEpoch:584282.5,hasYearZero:!0,minMonth:0,firstMonth:0,minDay:0,regionalOptions:{"":{name:"Mayan",epochs:["",""],monthNames:"0 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17".split(" "),monthNamesShort:"0 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17".split(" "),dayNames:"0 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19".split(" "),dayNamesShort:"0 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19".split(" "),dayNamesMin:"0 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19".split(" "),digits:null,
dateFormat:"YYYY.m.d",firstDay:0,isRTL:!1,haabMonths:"Pop Uo Zip Zotz Tzec Xul Yaxkin Mol Chen Yax Zac Ceh Mac Kankin Muan Pax Kayab Cumku Uayeb".split(" "),tzolkinMonths:"Imix Ik Akbal Kan Chicchan Cimi Manik Lamat Muluc Oc Chuen Eb Ben Ix Men Cib Caban Etznab Cauac Ahau".split(" ")}},leapYear:function(a){this._validate(a,this.minMonth,this.minDay,h.local.invalidYear);return!1},formatYear:function(a){a=this._validate(a,this.minMonth,this.minDay,h.local.invalidYear).year();var e=Math.floor(a/400);
a%=400;a+=0>a?400:0;return e+"."+Math.floor(a/20)+"."+a%20},forYear:function(a){a=a.split(".");if(3>a.length)throw"Invalid Mayan year";for(var e=0,b=0;b<a.length;b++){var h=parseInt(a[b],10);if(19<Math.abs(h)||0<b&&0>h)throw"Invalid Mayan year";e=20*e+h}return e},monthsInYear:function(a){this._validate(a,this.minMonth,this.minDay,h.local.invalidYear);return 18},weekOfYear:function(a,f,b){this._validate(a,f,b,h.local.invalidDate);return 0},daysInYear:function(a){this._validate(a,this.minMonth,this.minDay,
h.local.invalidYear);return 360},daysInMonth:function(a,f){this._validate(a,f,this.minDay,h.local.invalidMonth);return 20},daysInWeek:function(){return 5},dayOfWeek:function(a,f,b){return this._validate(a,f,b,h.local.invalidDate).day()},weekDay:function(a,f,b){this._validate(a,f,b,h.local.invalidDate);return!0},extraInfo:function(a,f,b){f=this._validate(a,f,b,h.local.invalidDate).toJD();a=this._toHaab(f);f=this._toTzolkin(f);return{haabMonthName:this.local.haabMonths[a[0]-1],haabMonth:a[0],haabDay:a[1],
tzolkinDayName:this.local.tzolkinMonths[f[0]-1],tzolkinDay:f[0],tzolkinTrecena:f[1]}},_toHaab:function(a){a-=this.jdEpoch;a=k(a+8+340,365);return[Math.floor(a/20)+1,k(a,20)]},_toTzolkin:function(a){a-=this.jdEpoch;return[k(a+20-1,20)+1,k(a+4-1,13)+1]},toJD:function(a,f,b){a=this._validate(a,f,b,h.local.invalidDate);return a.day()+20*a.month()+360*a.year()+this.jdEpoch},fromJD:function(a){a=Math.floor(a)+.5-this.jdEpoch;var e=Math.floor(a/360);a%=360;a+=0>a?360:0;return this.newDate(e,Math.floor(a/
20),a%20)}});h.calendars.mayan=m},{"../main":555,"object-assign":446}],549:[function(a,p,l){function m(a){this.local=this.regionalOptions[a||""]||this.regionalOptions[""]}var k=a("../main");a=a("object-assign");m.prototype=new k.baseCalendar;var h=k.instance("gregorian");a(m.prototype,{name:"Nanakshahi",jdEpoch:2257673.5,daysPerMonth:[31,31,31,31,31,30,30,30,30,30,30,30],hasYearZero:!1,minMonth:1,firstMonth:1,minDay:1,regionalOptions:{"":{name:"Nanakshahi",epochs:["BN","AN"],monthNames:"Chet Vaisakh Jeth Harh Sawan Bhadon Assu Katak Maghar Poh Magh Phagun".split(" "),
monthNamesShort:"Che Vai Jet Har Saw Bha Ass Kat Mgr Poh Mgh Pha".split(" "),dayNames:"Somvaar Mangalvar Budhvaar Veervaar Shukarvaar Sanicharvaar Etvaar".split(" "),dayNamesShort:"Som Mangal Budh Veer Shukar Sanichar Et".split(" "),dayNamesMin:"So Ma Bu Ve Sh Sa Et".split(" "),digits:null,dateFormat:"dd-mm-yyyy",firstDay:0,isRTL:!1}},leapYear:function(a){a=this._validate(a,this.minMonth,this.minDay,k.local.invalidYear||k.regionalOptions[""].invalidYear);return h.leapYear(a.year()+(1>a.year()?1:0)+
1469)},weekOfYear:function(a,f,b){a=this.newDate(a,f,b);a.add(1-(a.dayOfWeek()||7),"d");return Math.floor((a.dayOfYear()-1)/7)+1},daysInMonth:function(a,f){a=this._validate(a,f,this.minDay,k.local.invalidMonth);return this.daysPerMonth[a.month()-1]+(12===a.month()&&this.leapYear(a.year())?1:0)},weekDay:function(a,f,b){return 6>(this.dayOfWeek(a,f,b)||7)},toJD:function(a,f,b){f=this._validate(a,f,b,k.local.invalidMonth);a=f.year();0>a&&a++;b=f.day();for(var e=1;e<f.month();e++)b+=this.daysPerMonth[e-
1];return b+h.toJD(a+1468,3,13)},fromJD:function(a){a=Math.floor(a+.5);for(var e=Math.floor((a-(this.jdEpoch-1))/366);a>=this.toJD(e+1,1,1);)e++;a=a-Math.floor(this.toJD(e,1,1)+.5)+1;for(var b=1;a>this.daysInMonth(e,b);)a-=this.daysInMonth(e,b),b++;return this.newDate(e,b,a)}});k.calendars.nanakshahi=m},{"../main":555,"object-assign":446}],550:[function(a,p,l){function m(a){this.local=this.regionalOptions[a||""]||this.regionalOptions[""]}var k=a("../main");a=a("object-assign");m.prototype=new k.baseCalendar;
a(m.prototype,{name:"Nepali",jdEpoch:1700709.5,daysPerMonth:[31,31,32,32,31,30,30,29,30,29,30,30],hasYearZero:!1,minMonth:1,firstMonth:1,minDay:1,daysPerYear:365,regionalOptions:{"":{name:"Nepali",epochs:["BBS","ABS"],monthNames:"Baisakh Jestha Ashadh Shrawan Bhadra Ashwin Kartik Mangsir Paush Mangh Falgun Chaitra".split(" "),monthNamesShort:"Bai Je As Shra Bha Ash Kar Mang Pau Ma Fal Chai".split(" "),dayNames:"Aaitabaar Sombaar Manglbaar Budhabaar Bihibaar Shukrabaar Shanibaar".split(" "),dayNamesShort:"Aaita Som Mangl Budha Bihi Shukra Shani".split(" "),
dayNamesMin:"Aai So Man Bu Bi Shu Sha".split(" "),digits:null,dateFormat:"dd/mm/yyyy",firstDay:1,isRTL:!1}},leapYear:function(a){return this.daysInYear(a)!==this.daysPerYear},weekOfYear:function(a,e,f){a=this.newDate(a,e,f);a.add(-a.dayOfWeek(),"d");return Math.floor((a.dayOfYear()-1)/7)+1},daysInYear:function(a){a=this._validate(a,this.minMonth,this.minDay,k.local.invalidYear).year();if("undefined"===typeof this.NEPALI_CALENDAR_DATA[a])return this.daysPerYear;for(var e=0,f=this.minMonth;12>=f;f++)e+=
this.NEPALI_CALENDAR_DATA[a][f];return e},daysInMonth:function(a,e){a.year&&(e=a.month(),a=a.year());this._validate(a,e,this.minDay,k.local.invalidMonth);return"undefined"===typeof this.NEPALI_CALENDAR_DATA[a]?this.daysPerMonth[e-1]:this.NEPALI_CALENDAR_DATA[a][e]},weekDay:function(a,e,f){return 6!==this.dayOfWeek(a,e,f)},toJD:function(a,e,f){f=this._validate(a,e,f,k.local.invalidDate);a=f.year();e=f.month();f=f.day();var b=k.instance(),h=0,m=e,r=a;this._createMissingCalendarData(a);a-=9<m||9===m&&
f>=this.NEPALI_CALENDAR_DATA[r][0]?56:57;9!==e&&(h=f,m--);for(;9!==m;)0>=m&&(m=12,r--),h+=this.NEPALI_CALENDAR_DATA[r][m],m--;9===e?(h+=f-this.NEPALI_CALENDAR_DATA[r][0],0>h&&(h+=b.daysInYear(a))):h+=this.NEPALI_CALENDAR_DATA[r][9]-this.NEPALI_CALENDAR_DATA[r][0];return b.newDate(a,1,1).add(h,"d").toJD()},fromJD:function(a){a=k.instance().fromJD(a);var e=a.year();a=a.dayOfYear();e+=56;this._createMissingCalendarData(e);for(var f=9,b=this.NEPALI_CALENDAR_DATA[e][f]-this.NEPALI_CALENDAR_DATA[e][0]+
1;a>b;)f++,12<f&&(f=1,e++),b+=this.NEPALI_CALENDAR_DATA[e][f];return this.newDate(e,f,this.NEPALI_CALENDAR_DATA[e][f]-(b-a))},_createMissingCalendarData:function(a){var e=this.daysPerMonth.slice(0);e.unshift(17);for(var f=a-1;f<a+2;f++)"undefined"===typeof this.NEPALI_CALENDAR_DATA[f]&&(this.NEPALI_CALENDAR_DATA[f]=e)},NEPALI_CALENDAR_DATA:{1970:[18,31,31,32,31,31,31,30,29,30,29,30,30],1971:[18,31,31,32,31,32,30,30,29,30,29,30,30],1972:[17,31,32,31,32,31,30,30,30,29,29,30,30],1973:[19,30,32,31,32,
31,30,30,30,29,30,29,31],1974:[19,31,31,32,30,31,31,30,29,30,29,30,30],1975:[18,31,31,32,32,30,31,30,29,30,29,30,30],1976:[17,31,32,31,32,31,30,30,30,29,29,30,31],1977:[18,31,32,31,32,31,31,29,30,29,30,29,31],1978:[18,31,31,32,31,31,31,30,29,30,29,30,30],1979:[18,31,31,32,32,31,30,30,29,30,29,30,30],1980:[17,31,32,31,32,31,30,30,30,29,29,30,31],1981:[18,31,31,31,32,31,31,29,30,30,29,30,30],1982:[18,31,31,32,31,31,31,30,29,30,29,30,30],1983:[18,31,31,32,32,31,30,30,29,30,29,30,30],1984:[17,31,32,31,
32,31,30,30,30,29,29,30,31],1985:[18,31,31,31,32,31,31,29,30,30,29,30,30],1986:[18,31,31,32,31,31,31,30,29,30,29,30,30],1987:[18,31,32,31,32,31,30,30,29,30,29,30,30],1988:[17,31,32,31,32,31,30,30,30,29,29,30,31],1989:[18,31,31,31,32,31,31,30,29,30,29,30,30],1990:[18,31,31,32,31,31,31,30,29,30,29,30,30],1991:[18,31,32,31,32,31,30,30,29,30,29,30,30],1992:[17,31,32,31,32,31,30,30,30,29,30,29,31],1993:[18,31,31,31,32,31,31,30,29,30,29,30,30],1994:[18,31,31,32,31,31,31,30,29,30,29,30,30],1995:[17,31,32,
31,32,31,30,30,30,29,29,30,30],1996:[17,31,32,31,32,31,30,30,30,29,30,29,31],1997:[18,31,31,32,31,31,31,30,29,30,29,30,30],1998:[18,31,31,32,31,31,31,30,29,30,29,30,30],1999:[17,31,32,31,32,31,30,30,30,29,29,30,31],2E3:[17,30,32,31,32,31,30,30,30,29,30,29,31],2001:[18,31,31,32,31,31,31,30,29,30,29,30,30],2002:[18,31,31,32,32,31,30,30,29,30,29,30,30],2003:[17,31,32,31,32,31,30,30,30,29,29,30,31],2004:[17,30,32,31,32,31,30,30,30,29,30,29,31],2005:[18,31,31,32,31,31,31,30,29,30,29,30,30],2006:[18,31,
31,32,32,31,30,30,29,30,29,30,30],2007:[17,31,32,31,32,31,30,30,30,29,29,30,31],2008:[17,31,31,31,32,31,31,29,30,30,29,29,31],2009:[18,31,31,32,31,31,31,30,29,30,29,30,30],2010:[18,31,31,32,32,31,30,30,29,30,29,30,30],2011:[17,31,32,31,32,31,30,30,30,29,29,30,31],2012:[17,31,31,31,32,31,31,29,30,30,29,30,30],2013:[18,31,31,32,31,31,31,30,29,30,29,30,30],2014:[18,31,31,32,32,31,30,30,29,30,29,30,30],2015:[17,31,32,31,32,31,30,30,30,29,29,30,31],2016:[17,31,31,31,32,31,31,29,30,30,29,30,30],2017:[18,
31,31,32,31,31,31,30,29,30,29,30,30],2018:[18,31,32,31,32,31,30,30,29,30,29,30,30],2019:[17,31,32,31,32,31,30,30,30,29,30,29,31],2020:[17,31,31,31,32,31,31,30,29,30,29,30,30],2021:[18,31,31,32,31,31,31,30,29,30,29,30,30],2022:[17,31,32,31,32,31,30,30,30,29,29,30,30],2023:[17,31,32,31,32,31,30,30,30,29,30,29,31],2024:[17,31,31,31,32,31,31,30,29,30,29,30,30],2025:[18,31,31,32,31,31,31,30,29,30,29,30,30],2026:[17,31,32,31,32,31,30,30,30,29,29,30,31],2027:[17,30,32,31,32,31,30,30,30,29,30,29,31],2028:[17,
31,31,32,31,31,31,30,29,30,29,30,30],2029:[18,31,31,32,31,32,30,30,29,30,29,30,30],2030:[17,31,32,31,32,31,30,30,30,30,30,30,31],2031:[17,31,32,31,32,31,31,31,31,31,31,31,31],2032:[17,32,32,32,32,32,32,32,32,32,32,32,32],2033:[18,31,31,32,32,31,30,30,29,30,29,30,30],2034:[17,31,32,31,32,31,30,30,30,29,29,30,31],2035:[17,30,32,31,32,31,31,29,30,30,29,29,31],2036:[17,31,31,32,31,31,31,30,29,30,29,30,30],2037:[18,31,31,32,32,31,30,30,29,30,29,30,30],2038:[17,31,32,31,32,31,30,30,30,29,29,30,31],2039:[17,
31,31,31,32,31,31,29,30,30,29,30,30],2040:[17,31,31,32,31,31,31,30,29,30,29,30,30],2041:[18,31,31,32,32,31,30,30,29,30,29,30,30],2042:[17,31,32,31,32,31,30,30,30,29,29,30,31],2043:[17,31,31,31,32,31,31,29,30,30,29,30,30],2044:[17,31,31,32,31,31,31,30,29,30,29,30,30],2045:[18,31,32,31,32,31,30,30,29,30,29,30,30],2046:[17,31,32,31,32,31,30,30,30,29,29,30,31],2047:[17,31,31,31,32,31,31,30,29,30,29,30,30],2048:[17,31,31,32,31,31,31,30,29,30,29,30,30],2049:[17,31,32,31,32,31,30,30,30,29,29,30,30],2050:[17,
31,32,31,32,31,30,30,30,29,30,29,31],2051:[17,31,31,31,32,31,31,30,29,30,29,30,30],2052:[17,31,31,32,31,31,31,30,29,30,29,30,30],2053:[17,31,32,31,32,31,30,30,30,29,29,30,30],2054:[17,31,32,31,32,31,30,30,30,29,30,29,31],2055:[17,31,31,32,31,31,31,30,29,30,30,29,30],2056:[17,31,31,32,31,32,30,30,29,30,29,30,30],2057:[17,31,32,31,32,31,30,30,30,29,29,30,31],2058:[17,30,32,31,32,31,30,30,30,29,30,29,31],2059:[17,31,31,32,31,31,31,30,29,30,29,30,30],2060:[17,31,31,32,32,31,30,30,29,30,29,30,30],2061:[17,
31,32,31,32,31,30,30,30,29,29,30,31],2062:[17,30,32,31,32,31,31,29,30,29,30,29,31],2063:[17,31,31,32,31,31,31,30,29,30,29,30,30],2064:[17,31,31,32,32,31,30,30,29,30,29,30,30],2065:[17,31,32,31,32,31,30,30,30,29,29,30,31],2066:[17,31,31,31,32,31,31,29,30,30,29,29,31],2067:[17,31,31,32,31,31,31,30,29,30,29,30,30],2068:[17,31,31,32,32,31,30,30,29,30,29,30,30],2069:[17,31,32,31,32,31,30,30,30,29,29,30,31],2070:[17,31,31,31,32,31,31,29,30,30,29,30,30],2071:[17,31,31,32,31,31,31,30,29,30,29,30,30],2072:[17,
31,32,31,32,31,30,30,29,30,29,30,30],2073:[17,31,32,31,32,31,30,30,30,29,29,30,31],2074:[17,31,31,31,32,31,31,30,29,30,29,30,30],2075:[17,31,31,32,31,31,31,30,29,30,29,30,30],2076:[16,31,32,31,32,31,30,30,30,29,29,30,30],2077:[17,31,32,31,32,31,30,30,30,29,30,29,31],2078:[17,31,31,31,32,31,31,30,29,30,29,30,30],2079:[17,31,31,32,31,31,31,30,29,30,29,30,30],2080:[16,31,32,31,32,31,30,30,30,29,29,30,30],2081:[17,31,31,32,32,31,30,30,30,29,30,30,30],2082:[17,31,32,31,32,31,30,30,30,29,30,30,30],2083:[17,
31,31,32,31,31,30,30,30,29,30,30,30],2084:[17,31,31,32,31,31,30,30,30,29,30,30,30],2085:[17,31,32,31,32,31,31,30,30,29,30,30,30],2086:[17,31,32,31,32,31,30,30,30,29,30,30,30],2087:[16,31,31,32,31,31,31,30,30,29,30,30,30],2088:[16,30,31,32,32,30,31,30,30,29,30,30,30],2089:[17,31,32,31,32,31,30,30,30,29,30,30,30],2090:[17,31,32,31,32,31,30,30,30,29,30,30,30],2091:[16,31,31,32,31,31,31,30,30,29,30,30,30],2092:[16,31,31,32,32,31,30,30,30,29,30,30,30],2093:[17,31,32,31,32,31,30,30,30,29,30,30,30],2094:[17,
31,31,32,31,31,30,30,30,29,30,30,30],2095:[17,31,31,32,31,31,31,30,29,30,30,30,30],2096:[17,30,31,32,32,31,30,30,29,30,29,30,30],2097:[17,31,32,31,32,31,30,30,30,29,30,30,30],2098:[17,31,31,32,31,31,31,29,30,29,30,30,31],2099:[17,31,31,32,31,31,31,30,29,29,30,30,30],2100:[17,31,32,31,32,30,31,30,29,30,29,30,30]}});k.calendars.nepali=m},{"../main":555,"object-assign":446}],551:[function(a,p,l){function m(a){this.local=this.regionalOptions[a||""]||this.regionalOptions[""]}var k=a("../main");a=a("object-assign");
m.prototype=new k.baseCalendar;a(m.prototype,{name:"Persian",jdEpoch:1948320.5,daysPerMonth:[31,31,31,31,31,31,30,30,30,30,30,29],hasYearZero:!1,minMonth:1,firstMonth:1,minDay:1,regionalOptions:{"":{name:"Persian",epochs:["BP","AP"],monthNames:"Farvardin Ordibehesht Khordad Tir Mordad Shahrivar Mehr Aban Azar Day Bahman Esfand".split(" "),monthNamesShort:"Far Ord Kho Tir Mor Sha Meh Aba Aza Day Bah Esf".split(" "),dayNames:"Yekshambe Doshambe Seshambe Chæharshambe Panjshambe Jom'e Shambe".split(" "),
dayNamesShort:"Yek Do Se Chæ Panj Jom Sha".split(" "),dayNamesMin:"Ye Do Se Ch Pa Jo Sh".split(" "),digits:null,dateFormat:"yyyy/mm/dd",firstDay:6,isRTL:!1}},leapYear:function(a){a=this._validate(a,this.minMonth,this.minDay,k.local.invalidYear);return 682>682*((a.year()-(0<a.year()?474:473))%2820+512)%2816},weekOfYear:function(a,e,f){a=this.newDate(a,e,f);a.add(-((a.dayOfWeek()+1)%7),"d");return Math.floor((a.dayOfYear()-1)/7)+1},daysInMonth:function(a,e){a=this._validate(a,e,this.minDay,k.local.invalidMonth);
return this.daysPerMonth[a.month()-1]+(12===a.month()&&this.leapYear(a.year())?1:0)},weekDay:function(a,e,f){return 5!==this.dayOfWeek(a,e,f)},toJD:function(a,e,f){f=this._validate(a,e,f,k.local.invalidDate);a=f.year();e=f.month();f=f.day();a-=0<=a?474:473;var b=474+(a-2820*Math.floor(a/2820));return f+(7>=e?31*(e-1):30*(e-1)+6)+Math.floor((682*b-110)/2816)+365*(b-1)+1029983*Math.floor(a/2820)+this.jdEpoch-1},fromJD:function(a){a=Math.floor(a)+.5;var e=a-this.toJD(475,1,1),f=Math.floor(e/1029983);
e-=1029983*Math.floor(e/1029983);var b=2820;1029982!==e&&(b=Math.floor(e/366),b=Math.floor((2134*b+2816*(e-366*Math.floor(e/366))+2815)/1028522)+b+1);f=b+2820*f+474;f=0>=f?f-1:f;e=a-this.toJD(f,1,1)+1;e=186>=e?Math.ceil(e/31):Math.ceil((e-6)/30);a=a-this.toJD(f,e,1)+1;return this.newDate(f,e,a)}});k.calendars.persian=m;k.calendars.jalali=m},{"../main":555,"object-assign":446}],552:[function(a,p,l){function m(a){this.local=this.regionalOptions[a||""]||this.regionalOptions[""]}var k=a("../main");a=
a("object-assign");var h=k.instance();m.prototype=new k.baseCalendar;a(m.prototype,{name:"Taiwan",jdEpoch:2419402.5,yearsOffset:1911,daysPerMonth:[31,28,31,30,31,30,31,31,30,31,30,31],hasYearZero:!1,minMonth:1,firstMonth:1,minDay:1,regionalOptions:{"":{name:"Taiwan",epochs:["BROC","ROC"],monthNames:"January February March April May June July August September October November December".split(" "),monthNamesShort:"Jan Feb Mar Apr May Jun Jul Aug Sep Oct Nov Dec".split(" "),dayNames:"Sunday Monday Tuesday Wednesday Thursday Friday Saturday".split(" "),
dayNamesShort:"Sun Mon Tue Wed Thu Fri Sat".split(" "),dayNamesMin:"Su Mo Tu We Th Fr Sa".split(" "),digits:null,dateFormat:"yyyy/mm/dd",firstDay:1,isRTL:!1}},leapYear:function(a){a=this._validate(a,this.minMonth,this.minDay,k.local.invalidYear);a=this._t2gYear(a.year());return h.leapYear(a)},weekOfYear:function(a,f,b){f=this._validate(a,this.minMonth,this.minDay,k.local.invalidYear);a=this._t2gYear(f.year());return h.weekOfYear(a,f.month(),f.day())},daysInMonth:function(a,f){a=this._validate(a,f,
this.minDay,k.local.invalidMonth);return this.daysPerMonth[a.month()-1]+(2===a.month()&&this.leapYear(a.year())?1:0)},weekDay:function(a,f,b){return 6>(this.dayOfWeek(a,f,b)||7)},toJD:function(a,f,b){f=this._validate(a,f,b,k.local.invalidDate);a=this._t2gYear(f.year());return h.toJD(a,f.month(),f.day())},fromJD:function(a){a=h.fromJD(a);var e=this._g2tYear(a.year());return this.newDate(e,a.month(),a.day())},_t2gYear:function(a){return a+this.yearsOffset+(a>=-this.yearsOffset&&-1>=a?1:0)},_g2tYear:function(a){return a-
this.yearsOffset-(1<=a&&a<=this.yearsOffset?1:0)}});k.calendars.taiwan=m},{"../main":555,"object-assign":446}],553:[function(a,p,l){function m(a){this.local=this.regionalOptions[a||""]||this.regionalOptions[""]}var k=a("../main");a=a("object-assign");var h=k.instance();m.prototype=new k.baseCalendar;a(m.prototype,{name:"Thai",jdEpoch:1523098.5,yearsOffset:543,daysPerMonth:[31,28,31,30,31,30,31,31,30,31,30,31],hasYearZero:!1,minMonth:1,firstMonth:1,minDay:1,regionalOptions:{"":{name:"Thai",epochs:["BBE",
"BE"],monthNames:"January February March April May June July August September October November December".split(" "),monthNamesShort:"Jan Feb Mar Apr May Jun Jul Aug Sep Oct Nov Dec".split(" "),dayNames:"Sunday Monday Tuesday Wednesday Thursday Friday Saturday".split(" "),dayNamesShort:"Sun Mon Tue Wed Thu Fri Sat".split(" "),dayNamesMin:"Su Mo Tu We Th Fr Sa".split(" "),digits:null,dateFormat:"dd/mm/yyyy",firstDay:0,isRTL:!1}},leapYear:function(a){a=this._validate(a,this.minMonth,this.minDay,k.local.invalidYear);
a=this._t2gYear(a.year());return h.leapYear(a)},weekOfYear:function(a,f,b){f=this._validate(a,this.minMonth,this.minDay,k.local.invalidYear);a=this._t2gYear(f.year());return h.weekOfYear(a,f.month(),f.day())},daysInMonth:function(a,f){a=this._validate(a,f,this.minDay,k.local.invalidMonth);return this.daysPerMonth[a.month()-1]+(2===a.month()&&this.leapYear(a.year())?1:0)},weekDay:function(a,f,b){return 6>(this.dayOfWeek(a,f,b)||7)},toJD:function(a,f,b){f=this._validate(a,f,b,k.local.invalidDate);a=
this._t2gYear(f.year());return h.toJD(a,f.month(),f.day())},fromJD:function(a){a=h.fromJD(a);var e=this._g2tYear(a.year());return this.newDate(e,a.month(),a.day())},_t2gYear:function(a){return a-this.yearsOffset-(1<=a&&a<=this.yearsOffset?1:0)},_g2tYear:function(a){return a+this.yearsOffset+(a>=-this.yearsOffset&&-1>=a?1:0)}});k.calendars.thai=m},{"../main":555,"object-assign":446}],554:[function(a,p,l){function m(a){this.local=this.regionalOptions[a||""]||this.regionalOptions[""]}var k=a("../main");
a=a("object-assign");m.prototype=new k.baseCalendar;a(m.prototype,{name:"UmmAlQura",hasYearZero:!1,minMonth:1,firstMonth:1,minDay:1,regionalOptions:{"":{name:"Umm al-Qura",epochs:["BH","AH"],monthNames:"Al-Muharram;Safar;Rabi' al-awwal;Rabi' Al-Thani;Jumada Al-Awwal;Jumada Al-Thani;Rajab;Sha'aban;Ramadan;Shawwal;Dhu al-Qi'dah;Dhu al-Hijjah".split(";"),monthNamesShort:"Muh Saf Rab1 Rab2 Jum1 Jum2 Raj Sha' Ram Shaw DhuQ DhuH".split(" "),dayNames:"Yawm al-Ahad;Yawm al-Ithnain;Yawm al-Thalāthā’;Yawm al-Arba‘ā’;Yawm al-Khamīs;Yawm al-Jum‘a;Yawm al-Sabt".split(";"),
dayNamesMin:"Ah Ith Th Ar Kh Ju Sa".split(" "),digits:null,dateFormat:"yyyy/mm/dd",firstDay:6,isRTL:!0}},leapYear:function(a){a=this._validate(a,this.minMonth,this.minDay,k.local.invalidYear);return 355===this.daysInYear(a.year())},weekOfYear:function(a,f,b){a=this.newDate(a,f,b);a.add(-a.dayOfWeek(),"d");return Math.floor((a.dayOfYear()-1)/7)+1},daysInYear:function(a){for(var e=0,b=1;12>=b;b++)e+=this.daysInMonth(a,b);return e},daysInMonth:function(a,f){a=this._validate(a,f,this.minDay,k.local.invalidMonth).toJD()-
24E5+.5;for(var b=f=0;b<h.length;b++){if(h[b]>a)return h[f]-h[f-1];f++}return 30},weekDay:function(a,f,b){return 5!==this.dayOfWeek(a,f,b)},toJD:function(a,f,b){a=this._validate(a,f,b,k.local.invalidDate);f=12*(a.year()-1)+a.month()-15292;return a.day()+h[f-1]-1+24E5-.5},fromJD:function(a){a=a-24E5+.5;for(var e=0,b=0;b<h.length&&!(h[b]>a);b++)e++;b=e+15292;var k=Math.floor((b-1)/12);return this.newDate(k+1,b-12*k,a-h[e-1]+1)},isValid:function(a,f,b){var e=k.baseCalendar.prototype.isValid.apply(this,
arguments);e&&(a=null!=a.year?a.year:a,e=1276<=a&&1500>=a);return e},_validate:function(a,f,b,h){var e=k.baseCalendar.prototype._validate.apply(this,arguments);if(1276>e.year||1500<e.year)throw h.replace(/\{0\}/,this.local.name);return e}});k.calendars.ummalqura=m;var h=[20,50,79,109,138,168,197,227,256,286,315,345,374,404,433,463,492,522,551,581,611,641,670,700,729,759,788,818,847,877,906,936,965,995,1024,1054,1083,1113,1142,1172,1201,1231,1260,1290,1320,1350,1379,1409,1438,1468,1497,1527,1556,1586,
1615,1645,1674,1704,1733,1763,1792,1822,1851,1881,1910,1940,1969,1999,2028,2058,2087,2117,2146,2176,2205,2235,2264,2294,2323,2353,2383,2413,2442,2472,2501,2531,2560,2590,2619,2649,2678,2708,2737,2767,2796,2826,2855,2885,2914,2944,2973,3003,3032,3062,3091,3121,3150,3180,3209,3239,3268,3298,3327,3357,3386,3416,3446,3476,3505,3535,3564,3594,3623,3653,3682,3712,3741,3771,3800,3830,3859,3889,3918,3948,3977,4007,4036,4066,4095,4125,4155,4185,4214,4244,4273,4303,4332,4362,4391,4421,4450,4480,4509,4539,4568,
4598,4627,4657,4686,4716,4745,4775,4804,4834,4863,4893,4922,4952,4981,5011,5040,5070,5099,5129,5158,5188,5218,5248,5277,5307,5336,5366,5395,5425,5454,5484,5513,5543,5572,5602,5631,5661,5690,5720,5749,5779,5808,5838,5867,5897,5926,5956,5985,6015,6044,6074,6103,6133,6162,6192,6221,6251,6281,6311,6340,6370,6399,6429,6458,6488,6517,6547,6576,6606,6635,6665,6694,6724,6753,6783,6812,6842,6871,6901,6930,6960,6989,7019,7048,7078,7107,7137,7166,7196,7225,7255,7284,7314,7344,7374,7403,7433,7462,7492,7521,7551,
7580,7610,7639,7669,7698,7728,7757,7787,7816,7846,7875,7905,7934,7964,7993,8023,8053,8083,8112,8142,8171,8201,8230,8260,8289,8319,8348,8378,8407,8437,8466,8496,8525,8555,8584,8614,8643,8673,8702,8732,8761,8791,8821,8850,8880,8909,8938,8968,8997,9027,9056,9086,9115,9145,9175,9205,9234,9264,9293,9322,9352,9381,9410,9440,9470,9499,9529,9559,9589,9618,9648,9677,9706,9736,9765,9794,9824,9853,9883,9913,9943,9972,10002,10032,10061,10090,10120,10149,10178,10208,10237,10267,10297,10326,10356,10386,10415,10445,
10474,10504,10533,10562,10592,10621,10651,10680,10710,10740,10770,10799,10829,10858,10888,10917,10947,10976,11005,11035,11064,11094,11124,11153,11183,11213,11242,11272,11301,11331,11360,11389,11419,11448,11478,11507,11537,11567,11596,11626,11655,11685,11715,11744,11774,11803,11832,11862,11891,11921,11950,11980,12010,12039,12069,12099,12128,12158,12187,12216,12246,12275,12304,12334,12364,12393,12423,12453,12483,12512,12542,12571,12600,12630,12659,12688,12718,12747,12777,12807,12837,12866,12896,12926,
12955,12984,13014,13043,13072,13102,13131,13161,13191,13220,13250,13280,13310,13339,13368,13398,13427,13456,13486,13515,13545,13574,13604,13634,13664,13693,13723,13752,13782,13811,13840,13870,13899,13929,13958,13988,14018,14047,14077,14107,14136,14166,14195,14224,14254,14283,14313,14342,14372,14401,14431,14461,14490,14520,14550,14579,14609,14638,14667,14697,14726,14756,14785,14815,14844,14874,14904,14933,14963,14993,15021,15051,15081,15110,15140,15169,15199,15228,15258,15287,15317,15347,15377,15406,
15436,15465,15494,15524,15553,15582,15612,15641,15671,15701,15731,15760,15790,15820,15849,15878,15908,15937,15966,15996,16025,16055,16085,16114,16144,16174,16204,16233,16262,16292,16321,16350,16380,16409,16439,16468,16498,16528,16558,16587,16617,16646,16676,16705,16734,16764,16793,16823,16852,16882,16912,16941,16971,17001,17030,17060,17089,17118,17148,17177,17207,17236,17266,17295,17325,17355,17384,17414,17444,17473,17502,17532,17561,17591,17620,17650,17679,17709,17738,17768,17798,17827,17857,17886,
17916,17945,17975,18004,18034,18063,18093,18122,18152,18181,18211,18241,18270,18300,18330,18359,18388,18418,18447,18476,18506,18535,18565,18595,18625,18654,18684,18714,18743,18772,18802,18831,18860,18890,18919,18949,18979,19008,19038,19068,19098,19127,19156,19186,19215,19244,19274,19303,19333,19362,19392,19422,19452,19481,19511,19540,19570,19599,19628,19658,19687,19717,19746,19776,19806,19836,19865,19895,19924,19954,19983,20012,20042,20071,20101,20130,20160,20190,20219,20249,20279,20308,20338,20367,
20396,20426,20455,20485,20514,20544,20573,20603,20633,20662,20692,20721,20751,20780,20810,20839,20869,20898,20928,20957,20987,21016,21046,21076,21105,21135,21164,21194,21223,21253,21282,21312,21341,21371,21400,21430,21459,21489,21519,21548,21578,21607,21637,21666,21696,21725,21754,21784,21813,21843,21873,21902,21932,21962,21991,22021,22050,22080,22109,22138,22168,22197,22227,22256,22286,22316,22346,22375,22405,22434,22464,22493,22522,22552,22581,22611,22640,22670,22700,22730,22759,22789,22818,22848,
22877,22906,22936,22965,22994,23024,23054,23083,23113,23143,23173,23202,23232,23261,23290,23320,23349,23379,23408,23438,23467,23497,23527,23556,23586,23616,23645,23674,23704,23733,23763,23792,23822,23851,23881,23910,23940,23970,23999,24029,24058,24088,24117,24147,24176,24206,24235,24265,24294,24324,24353,24383,24413,24442,24472,24501,24531,24560,24590,24619,24648,24678,24707,24737,24767,24796,24826,24856,24885,24915,24944,24974,25003,25032,25062,25091,25121,25150,25180,25210,25240,25269,25299,25328,
25358,25387,25416,25446,25475,25505,25534,25564,25594,25624,25653,25683,25712,25742,25771,25800,25830,25859,25888,25918,25948,25977,26007,26037,26067,26096,26126,26155,26184,26214,26243,26272,26302,26332,26361,26391,26421,26451,26480,26510,26539,26568,26598,26627,26656,26686,26715,26745,26775,26805,26834,26864,26893,26923,26952,26982,27011,27041,27070,27099,27129,27159,27188,27218,27248,27277,27307,27336,27366,27395,27425,27454,27484,27513,27542,27572,27602,27631,27661,27691,27720,27750,27779,27809,
27838,27868,27897,27926,27956,27985,28015,28045,28074,28104,28134,28163,28193,28222,28252,28281,28310,28340,28369,28399,28428,28458,28488,28517,28547,28577,28607,28636,28665,28695,28724,28754,28783,28813,28843,28872,28901,28931,28960,28990,29019,29049,29078,29108,29137,29167,29196,29226,29255,29285,29315,29345,29375,29404,29434,29463,29492,29522,29551,29580,29610,29640,29669,29699,29729,29759,29788,29818,29847,29876,29906,29935,29964,29994,30023,30053,30082,30112,30141,30171,30200,30230,30259,30289,
30318,30348,30378,30408,30437,30467,30496,30526,30555,30585,30614,30644,30673,30703,30732,30762,30791,30821,30850,30880,30909,30939,30968,30998,31027,31057,31086,31116,31145,31175,31204,31234,31263,31293,31322,31352,31381,31411,31441,31471,31500,31530,31559,31589,31618,31648,31676,31706,31736,31766,31795,31825,31854,31884,31913,31943,31972,32002,32031,32061,32090,32120,32150,32180,32209,32239,32268,32298,32327,32357,32386,32416,32445,32475,32504,32534,32563,32593,32622,32652,32681,32711,32740,32770,
32799,32829,32858,32888,32917,32947,32976,33006,33035,33065,33094,33124,33153,33183,33213,33243,33272,33302,33331,33361,33390,33420,33450,33479,33509,33539,33568,33598,33627,33657,33686,33716,33745,33775,33804,33834,33863,33893,33922,33952,33981,34011,34040,34069,34099,34128,34158,34187,34217,34247,34277,34306,34336,34365,34395,34424,34454,34483,34512,34542,34571,34601,34631,34660,34690,34719,34749,34778,34808,34837,34867,34896,34926,34955,34985,35015,35044,35074,35103,35133,35162,35192,35222,35251,
35280,35310,35340,35370,35399,35429,35458,35488,35517,35547,35576,35605,35635,35665,35694,35723,35753,35782,35811,35841,35871,35901,35930,35960,35989,36019,36048,36078,36107,36136,36166,36195,36225,36254,36284,36314,36343,36373,36403,36433,36462,36492,36521,36551,36580,36610,36639,36669,36698,36728,36757,36786,36816,36845,36875,36904,36934,36963,36993,37022,37052,37081,37111,37141,37170,37200,37229,37259,37288,37318,37347,37377,37406,37436,37465,37495,37524,37554,37584,37613,37643,37672,37701,37731,
37760,37790,37819,37849,37878,37908,37938,37967,37997,38027,38056,38085,38115,38144,38174,38203,38233,38262,38292,38322,38351,38381,38410,38440,38469,38499,38528,38558,38587,38617,38646,38676,38705,38735,38764,38794,38823,38853,38882,38912,38941,38971,39001,39030,39059,39089,39118,39148,39178,39208,39237,39267,39297,39326,39355,39385,39414,39444,39473,39503,39532,39562,39592,39621,39650,39680,39709,39739,39768,39798,39827,39857,39886,39916,39946,39975,40005,40035,40064,40094,40123,40153,40182,40212,
40241,40271,40300,40330,40359,40389,40418,40448,40477,40507,40536,40566,40595,40625,40655,40685,40714,40744,40773,40803,40832,40862,40892,40921,40951,40980,41009,41039,41068,41098,41127,41157,41186,41216,41245,41275,41304,41334,41364,41393,41422,41452,41481,41511,41540,41570,41599,41629,41658,41688,41718,41748,41777,41807,41836,41865,41894,41924,41953,41983,42012,42042,42072,42102,42131,42161,42190,42220,42249,42279,42308,42337,42367,42397,42426,42456,42485,42515,42545,42574,42604,42633,42662,42692,
42721,42751,42780,42810,42839,42869,42899,42929,42958,42988,43017,43046,43076,43105,43135,43164,43194,43223,43253,43283,43312,43342,43371,43401,43430,43460,43489,43519,43548,43578,43607,43637,43666,43696,43726,43755,43785,43814,43844,43873,43903,43932,43962,43991,44021,44050,44080,44109,44139,44169,44198,44228,44258,44287,44317,44346,44375,44405,44434,44464,44493,44523,44553,44582,44612,44641,44671,44700,44730,44759,44788,44818,44847,44877,44906,44936,44966,44996,45025,45055,45084,45114,45143,45172,
45202,45231,45261,45290,45320,45350,45380,45409,45439,45468,45498,45527,45556,45586,45615,45644,45674,45704,45733,45763,45793,45823,45852,45882,45911,45940,45970,45999,46028,46058,46088,46117,46147,46177,46206,46236,46265,46295,46324,46354,46383,46413,46442,46472,46501,46531,46560,46590,46620,46649,46679,46708,46738,46767,46797,46826,46856,46885,46915,46944,46974,47003,47033,47063,47092,47122,47151,47181,47210,47240,47269,47298,47328,47357,47387,47417,47446,47476,47506,47535,47565,47594,47624,47653,
47682,47712,47741,47771,47800,47830,47860,47890,47919,47949,47978,48008,48037,48066,48096,48125,48155,48184,48214,48244,48273,48303,48333,48362,48392,48421,48450,48480,48509,48538,48568,48598,48627,48657,48687,48717,48746,48776,48805,48834,48864,48893,48922,48952,48982,49011,49041,49071,49100,49130,49160,49189,49218,49248,49277,49306,49336,49365,49395,49425,49455,49484,49514,49543,49573,49602,49632,49661,49690,49720,49749,49779,49809,49838,49868,49898,49927,49957,49986,50016,50045,50075,50104,50133,
50163,50192,50222,50252,50281,50311,50340,50370,50400,50429,50459,50488,50518,50547,50576,50606,50635,50665,50694,50724,50754,50784,50813,50843,50872,50902,50931,50960,50990,51019,51049,51078,51108,51138,51167,51197,51227,51256,51286,51315,51345,51374,51403,51433,51462,51492,51522,51552,51582,51611,51641,51670,51699,51729,51758,51787,51816,51846,51876,51906,51936,51965,51995,52025,52054,52083,52113,52142,52171,52200,52230,52260,52290,52319,52349,52379,52408,52438,52467,52497,52526,52555,52585,52614,
52644,52673,52703,52733,52762,52792,52822,52851,52881,52910,52939,52969,52998,53028,53057,53087,53116,53146,53176,53205,53235,53264,53294,53324,53353,53383,53412,53441,53471,53500,53530,53559,53589,53619,53648,53678,53708,53737,53767,53796,53825,53855,53884,53913,53943,53973,54003,54032,54062,54092,54121,54151,54180,54209,54239,54268,54297,54327,54357,54387,54416,54446,54476,54505,54535,54564,54593,54623,54652,54681,54711,54741,54770,54800,54830,54859,54889,54919,54948,54977,55007,55036,55066,55095,
55125,55154,55184,55213,55243,55273,55302,55332,55361,55391,55420,55450,55479,55508,55538,55567,55597,55627,55657,55686,55716,55745,55775,55804,55834,55863,55892,55922,55951,55981,56011,56040,56070,56100,56129,56159,56188,56218,56247,56276,56306,56335,56365,56394,56424,56454,56483,56513,56543,56572,56601,56631,56660,56690,56719,56749,56778,56808,56837,56867,56897,56926,56956,56985,57015,57044,57074,57103,57133,57162,57192,57221,57251,57280,57310,57340,57369,57399,57429,57458,57487,57517,57546,57576,
57605,57634,57664,57694,57723,57753,57783,57813,57842,57871,57901,57930,57959,57989,58018,58048,58077,58107,58137,58167,58196,58226,58255,58285,58314,58343,58373,58402,58432,58461,58491,58521,58551,58580,58610,58639,58669,58698,58727,58757,58786,58816,58845,58875,58905,58934,58964,58994,59023,59053,59082,59111,59141,59170,59200,59229,59259,59288,59318,59348,59377,59407,59436,59466,59495,59525,59554,59584,59613,59643,59672,59702,59731,59761,59791,59820,59850,59879,59909,59939,59968,59997,60027,60056,
60086,60115,60145,60174,60204,60234,60264,60293,60323,60352,60381,60411,60440,60469,60499,60528,60558,60588,60618,60648,60677,60707,60736,60765,60795,60824,60853,60883,60912,60942,60972,61002,61031,61061,61090,61120,61149,61179,61208,61237,61267,61296,61326,61356,61385,61415,61445,61474,61504,61533,61563,61592,61621,61651,61680,61710,61739,61769,61799,61828,61858,61888,61917,61947,61976,62006,62035,62064,62094,62123,62153,62182,62212,62242,62271,62301,62331,62360,62390,62419,62448,62478,62507,62537,
62566,62596,62625,62655,62685,62715,62744,62774,62803,62832,62862,62891,62921,62950,62980,63009,63039,63069,63099,63128,63157,63187,63216,63246,63275,63305,63334,63363,63393,63423,63453,63482,63512,63541,63571,63600,63630,63659,63689,63718,63747,63777,63807,63836,63866,63895,63925,63955,63984,64014,64043,64073,64102,64131,64161,64190,64220,64249,64279,64309,64339,64368,64398,64427,64457,64486,64515,64545,64574,64603,64633,64663,64692,64722,64752,64782,64811,64841,64870,64899,64929,64958,64987,65017,
65047,65076,65106,65136,65166,65195,65225,65254,65283,65313,65342,65371,65401,65431,65460,65490,65520,65549,65579,65608,65638,65667,65697,65726,65755,65785,65815,65844,65874,65903,65933,65963,65992,66022,66051,66081,66110,66140,66169,66199,66228,66258,66287,66317,66346,66376,66405,66435,66465,66494,66524,66553,66583,66612,66641,66671,66700,66730,66760,66789,66819,66849,66878,66908,66937,66967,66996,67025,67055,67084,67114,67143,67173,67203,67233,67262,67292,67321,67351,67380,67409,67439,67468,67497,
67527,67557,67587,67617,67646,67676,67705,67735,67764,67793,67823,67852,67882,67911,67941,67971,68E3,68030,68060,68089,68119,68148,68177,68207,68236,68266,68295,68325,68354,68384,68414,68443,68473,68502,68532,68561,68591,68620,68650,68679,68708,68738,68768,68797,68827,68857,68886,68916,68946,68975,69004,69034,69063,69092,69122,69152,69181,69211,69240,69270,69300,69330,69359,69388,69418,69447,69476,69506,69535,69565,69595,69624,69654,69684,69713,69743,69772,69802,69831,69861,69890,69919,69949,69978,
70008,70038,70067,70097,70126,70156,70186,70215,70245,70274,70303,70333,70362,70392,70421,70451,70481,70510,70540,70570,70599,70629,70658,70687,70717,70746,70776,70805,70835,70864,70894,70924,70954,70983,71013,71042,71071,71101,71130,71159,71189,71218,71248,71278,71308,71337,71367,71397,71426,71455,71485,71514,71543,71573,71602,71632,71662,71691,71721,71751,71781,71810,71839,71869,71898,71927,71957,71986,72016,72046,72075,72105,72135,72164,72194,72223,72253,72282,72311,72341,72370,72400,72429,72459,
72489,72518,72548,72577,72607,72637,72666,72695,72725,72754,72784,72813,72843,72872,72902,72931,72961,72991,73020,73050,73080,73109,73139,73168,73197,73227,73256,73286,73315,73345,73375,73404,73434,73464,73493,73523,73552,73581,73611,73640,73669,73699,73729,73758,73788,73818,73848,73877,73907,73936,73965,73995,74024,74053,74083,74113,74142,74172,74202,74231,74261,74291,74320,74349,74379,74408,74437,74467,74497,74526,74556,74586,74615,74645,74675,74704,74733,74763,74792,74822,74851,74881,74910,74940,
74969,74999,75029,75058,75088,75117,75147,75176,75206,75235,75264,75294,75323,75353,75383,75412,75442,75472,75501,75531,75560,75590,75619,75648,75678,75707,75737,75766,75796,75826,75856,75885,75915,75944,75974,76003,76032,76062,76091,76121,76150,76180,76210,76239,76269,76299,76328,76358,76387,76416,76446,76475,76505,76534,76564,76593,76623,76653,76682,76712,76741,76771,76801,76830,76859,76889,76918,76948,76977,77007,77036,77066,77096,77125,77155,77185,77214,77243,77273,77302,77332,77361,77390,77420,
77450,77479,77509,77539,77569,77598,77627,77657,77686,77715,77745,77774,77804,77833,77863,77893,77923,77952,77982,78011,78041,78070,78099,78129,78158,78188,78217,78247,78277,78307,78336,78366,78395,78425,78454,78483,78513,78542,78572,78601,78631,78661,78690,78720,78750,78779,78808,78838,78867,78897,78926,78956,78985,79015,79044,79074,79104,79133,79163,79192,79222,79251,79281,79310,79340,79369,79399,79428,79458,79487,79517,79546,79576,79606,79635,79665,79695,79724,79753,79783,79812,79841,79871,79900,
79930,79960,79990]},{"../main":555,"object-assign":446}],555:[function(a,p,l){function m(){this.regionalOptions=[];this.regionalOptions[""]={invalidCalendar:"Calendar {0} not found",invalidDate:"Invalid {0} date",invalidMonth:"Invalid {0} month",invalidYear:"Invalid {0} year",differentCalendars:"Cannot mix {0} and {1} dates"};this.local=this.regionalOptions[""];this.calendars={};this._localCals={}}function k(a,e,f,d){this._calendar=a;this._year=e;this._month=f;this._day=d;if(0===this._calendar._validateLevel&&
!this._calendar.isValid(this._year,this._month,this._day))throw(b.local.invalidDate||b.regionalOptions[""].invalidDate).replace(/\{0\}/,this._calendar.local.name);}function h(a,b){a=""+a;return"000000".substring(0,b-a.length)+a}function e(){this.shortYearCutoff="+10"}function f(a){this.local=this.regionalOptions[a]||this.regionalOptions[""]}a=a("object-assign");a(m.prototype,{instance:function(a,b){a=(a||"gregorian").toLowerCase();b=b||"";var e=this._localCals[a+"-"+b];!e&&this.calendars[a]&&(e=new this.calendars[a](b),
this._localCals[a+"-"+b]=e);if(!e)throw(this.local.invalidCalendar||this.regionalOptions[""].invalidCalendar).replace(/\{0\}/,a);return e},newDate:function(a,b,e,d,g){d=(null!=a&&a.year?a.calendar():"string"===typeof d?this.instance(d,g):d)||this.instance();return d.newDate(a,b,e)},substituteDigits:function(a){return function(b){return(b+"").replace(/[0-9]/g,function(b){return a[b]})}},substituteChineseDigits:function(a,b){return function(e){for(var d="",g=0;0<e;){var c=e%10;d=(0===c?"":a[c]+b[g])+
d;g++;e=Math.floor(e/10)}0===d.indexOf(a[1]+b[1])&&(d=d.substr(1));return d||a[0]}}});a(k.prototype,{newDate:function(a,b,e){return this._calendar.newDate(null==a?this:a,b,e)},year:function(a){return 0===arguments.length?this._year:this.set(a,"y")},month:function(a){return 0===arguments.length?this._month:this.set(a,"m")},day:function(a){return 0===arguments.length?this._day:this.set(a,"d")},date:function(a,e,f){if(!this._calendar.isValid(a,e,f))throw(b.local.invalidDate||b.regionalOptions[""].invalidDate).replace(/\{0\}/,
this._calendar.local.name);this._year=a;this._month=e;this._day=f;return this},leapYear:function(){return this._calendar.leapYear(this)},epoch:function(){return this._calendar.epoch(this)},formatYear:function(){return this._calendar.formatYear(this)},monthOfYear:function(){return this._calendar.monthOfYear(this)},weekOfYear:function(){return this._calendar.weekOfYear(this)},daysInYear:function(){return this._calendar.daysInYear(this)},dayOfYear:function(){return this._calendar.dayOfYear(this)},daysInMonth:function(){return this._calendar.daysInMonth(this)},
dayOfWeek:function(){return this._calendar.dayOfWeek(this)},weekDay:function(){return this._calendar.weekDay(this)},extraInfo:function(){return this._calendar.extraInfo(this)},add:function(a,b){return this._calendar.add(this,a,b)},set:function(a,b){return this._calendar.set(this,a,b)},compareTo:function(a){if(this._calendar.name!==a._calendar.name)throw(b.local.differentCalendars||b.regionalOptions[""].differentCalendars).replace(/\{0\}/,this._calendar.local.name).replace(/\{1\}/,a._calendar.local.name);
a=this._year!==a._year?this._year-a._year:this._month!==a._month?this.monthOfYear()-a.monthOfYear():this._day-a._day;return 0===a?0:0>a?-1:1},calendar:function(){return this._calendar},toJD:function(){return this._calendar.toJD(this)},fromJD:function(a){return this._calendar.fromJD(a)},toJSDate:function(){return this._calendar.toJSDate(this)},fromJSDate:function(a){return this._calendar.fromJSDate(a)},toString:function(){return(0>this.year()?"-":"")+h(Math.abs(this.year()),4)+"-"+h(this.month(),2)+
"-"+h(this.day(),2)}});a(e.prototype,{_validateLevel:0,newDate:function(a,e,f){if(null==a)return this.today();a.year&&(this._validate(a,e,f,b.local.invalidDate||b.regionalOptions[""].invalidDate),f=a.day(),e=a.month(),a=a.year());return new k(this,a,e,f)},today:function(){return this.fromJSDate(new Date)},epoch:function(a){return 0>this._validate(a,this.minMonth,this.minDay,b.local.invalidYear||b.regionalOptions[""].invalidYear).year()?this.local.epochs[0]:this.local.epochs[1]},formatYear:function(a){a=
this._validate(a,this.minMonth,this.minDay,b.local.invalidYear||b.regionalOptions[""].invalidYear);return(0>a.year()?"-":"")+h(Math.abs(a.year()),4)},monthsInYear:function(a){this._validate(a,this.minMonth,this.minDay,b.local.invalidYear||b.regionalOptions[""].invalidYear);return 12},monthOfYear:function(a,e){a=this._validate(a,e,this.minDay,b.local.invalidMonth||b.regionalOptions[""].invalidMonth);return(a.month()+this.monthsInYear(a)-this.firstMonth)%this.monthsInYear(a)+this.minMonth},fromMonthOfYear:function(a,
e){e=(e+this.firstMonth-2*this.minMonth)%this.monthsInYear(a)+this.minMonth;this._validate(a,e,this.minDay,b.local.invalidMonth||b.regionalOptions[""].invalidMonth);return e},daysInYear:function(a){a=this._validate(a,this.minMonth,this.minDay,b.local.invalidYear||b.regionalOptions[""].invalidYear);return this.leapYear(a)?366:365},dayOfYear:function(a,e,f){a=this._validate(a,e,f,b.local.invalidDate||b.regionalOptions[""].invalidDate);return a.toJD()-this.newDate(a.year(),this.fromMonthOfYear(a.year(),
this.minMonth),this.minDay).toJD()+1},daysInWeek:function(){return 7},dayOfWeek:function(a,e,f){a=this._validate(a,e,f,b.local.invalidDate||b.regionalOptions[""].invalidDate);return(Math.floor(this.toJD(a))+2)%this.daysInWeek()},extraInfo:function(a,e,f){this._validate(a,e,f,b.local.invalidDate||b.regionalOptions[""].invalidDate);return{}},add:function(a,e,f){this._validate(a,this.minMonth,this.minDay,b.local.invalidDate||b.regionalOptions[""].invalidDate);return this._correctAdd(a,this._add(a,e,
f),e,f)},_add:function(a,b,e){this._validateLevel++;if("d"===e||"w"===e){b=a.toJD()+b*("w"===e?this.daysInWeek():1);var d=a.calendar().fromJD(b);this._validateLevel--;return[d.year(),d.month(),d.day()]}try{var g=a.year()+("y"===e?b:0),c=a.monthOfYear()+("m"===e?b:0);d=a.day();if("y"===e)a.month()!==this.fromMonthOfYear(g,c)&&(c=this.newDate(g,a.month(),this.minDay).monthOfYear()),c=Math.min(c,this.monthsInYear(g)),d=Math.min(d,this.daysInMonth(g,this.fromMonthOfYear(g,c)));else if("m"===e){for(;c<
this.minMonth;)g--,c+=this.monthsInYear(g);for(var f=this.monthsInYear(g);c>f-1+this.minMonth;)g++,c-=f,f=this.monthsInYear(g);d=Math.min(d,this.daysInMonth(g,this.fromMonthOfYear(g,c)))}var h=[g,this.fromMonthOfYear(g,c),d];this._validateLevel--;return h}catch(y){throw this._validateLevel--,y;}},_correctAdd:function(a,b,e,d){this.hasYearZero||"y"!==d&&"m"!==d||0!==b[0]&&0<a.year()===0<b[0]||(b={y:[1,1,"y"],m:[1,this.monthsInYear(-1),"m"],w:[this.daysInWeek(),this.daysInYear(-1),"d"],d:[1,this.daysInYear(-1),
"d"]}[d],b=this._add(a,e*b[0]+(0>e?-1:1)*b[1],b[2]));return a.date(b[0],b[1],b[2])},set:function(a,e,f){this._validate(a,this.minMonth,this.minDay,b.local.invalidDate||b.regionalOptions[""].invalidDate);var d="y"===f?e:a.year(),g="m"===f?e:a.month();e="d"===f?e:a.day();if("y"===f||"m"===f)e=Math.min(e,this.daysInMonth(d,g));return a.date(d,g,e)},isValid:function(a,b,e){this._validateLevel++;var d=this.hasYearZero||0!==a;d&&(a=this.newDate(a,b,this.minDay),d=b>=this.minMonth&&b-this.minMonth<this.monthsInYear(a)&&
e>=this.minDay&&e-this.minDay<this.daysInMonth(a));this._validateLevel--;return d},toJSDate:function(a,e,f){a=this._validate(a,e,f,b.local.invalidDate||b.regionalOptions[""].invalidDate);return b.instance().fromJD(this.toJD(a)).toJSDate()},fromJSDate:function(a){return this.fromJD(b.instance().fromJSDate(a).toJD())},_validate:function(a,e,f,d){if(a.year){if(0===this._validateLevel&&this.name!==a.calendar().name)throw(b.local.differentCalendars||b.regionalOptions[""].differentCalendars).replace(/\{0\}/,
this.local.name).replace(/\{1\}/,a.calendar().local.name);return a}try{this._validateLevel++;if(1===this._validateLevel&&!this.isValid(a,e,f))throw d.replace(/\{0\}/,this.local.name);var g=this.newDate(a,e,f);this._validateLevel--;return g}catch(c){throw this._validateLevel--,c;}}});f.prototype=new e;a(f.prototype,{name:"Gregorian",jdEpoch:1721425.5,daysPerMonth:[31,28,31,30,31,30,31,31,30,31,30,31],hasYearZero:!1,minMonth:1,firstMonth:1,minDay:1,regionalOptions:{"":{name:"Gregorian",epochs:["BCE",
"CE"],monthNames:"January February March April May June July August September October November December".split(" "),monthNamesShort:"Jan Feb Mar Apr May Jun Jul Aug Sep Oct Nov Dec".split(" "),dayNames:"Sunday Monday Tuesday Wednesday Thursday Friday Saturday".split(" "),dayNamesShort:"Sun Mon Tue Wed Thu Fri Sat".split(" "),dayNamesMin:"Su Mo Tu We Th Fr Sa".split(" "),digits:null,dateFormat:"mm/dd/yyyy",firstDay:0,isRTL:!1}},leapYear:function(a){a=this._validate(a,this.minMonth,this.minDay,b.local.invalidYear||
b.regionalOptions[""].invalidYear);a=a.year()+(0>a.year()?1:0);return 0===a%4&&(0!==a%100||0===a%400)},weekOfYear:function(a,b,e){a=this.newDate(a,b,e);a.add(4-(a.dayOfWeek()||7),"d");return Math.floor((a.dayOfYear()-1)/7)+1},daysInMonth:function(a,e){a=this._validate(a,e,this.minDay,b.local.invalidMonth||b.regionalOptions[""].invalidMonth);return this.daysPerMonth[a.month()-1]+(2===a.month()&&this.leapYear(a.year())?1:0)},weekDay:function(a,b,e){return 6>(this.dayOfWeek(a,b,e)||7)},toJD:function(a,
e,f){f=this._validate(a,e,f,b.local.invalidDate||b.regionalOptions[""].invalidDate);a=f.year();e=f.month();f=f.day();0>a&&a++;3>e&&(e+=12,a--);var d=Math.floor(a/100);return Math.floor(365.25*(a+4716))+Math.floor(30.6001*(e+1))+f+(2-d+Math.floor(d/4))-1524.5},fromJD:function(a){a=Math.floor(a+.5);var b=Math.floor((a-1867216.25)/36524.25);b=a+1+b-Math.floor(b/4);var e=b+1524;a=Math.floor((e-122.1)/365.25);var d=Math.floor(365.25*a);b=Math.floor((e-d)/30.6001);e=e-d-Math.floor(30.6001*b);b-=13.5<b?
13:1;a-=2.5<b?4716:4715;0>=a&&a--;return this.newDate(a,b,e)},toJSDate:function(a,e,f){a=this._validate(a,e,f,b.local.invalidDate||b.regionalOptions[""].invalidDate);a=new Date(a.year(),a.month()-1,a.day());a.setHours(0);a.setMinutes(0);a.setSeconds(0);a.setMilliseconds(0);a.setHours(12<a.getHours()?a.getHours()+2:0);return a},fromJSDate:function(a){return this.newDate(a.getFullYear(),a.getMonth()+1,a.getDate())}});var b=p.exports=new m;b.cdate=k;b.baseCalendar=e;b.calendars.gregorian=f},{"object-assign":446}],
556:[function(a,p,l){p=a("object-assign");var m=a("./main");p(m.regionalOptions[""],{invalidArguments:"Invalid arguments",invalidFormat:"Cannot format a date from another calendar",missingNumberAt:"Missing number at position {0}",unknownNameAt:"Unknown name at position {0}",unexpectedLiteralAt:"Unexpected literal at position {0}",unexpectedText:"Additional text found at end"});m.local=m.regionalOptions[""];p(m.cdate.prototype,{formatDate:function(a,h){"string"!==typeof a&&(h=a,a="");return this._calendar.formatDate(a||
"",this,h)}});p(m.baseCalendar.prototype,{UNIX_EPOCH:m.instance().newDate(1970,1,1).toJD(),SECS_PER_DAY:86400,TICKS_EPOCH:m.instance().jdEpoch,TICKS_PER_DAY:864E9,ATOM:"yyyy-mm-dd",COOKIE:"D, dd M yyyy",FULL:"DD, MM d, yyyy",ISO_8601:"yyyy-mm-dd",JULIAN:"J",RFC_822:"D, d M yy",RFC_850:"DD, dd-M-yy",RFC_1036:"D, d M yy",RFC_1123:"D, d M yyyy",RFC_2822:"D, d M yyyy",RSS:"D, d M yy",TICKS:"!",TIMESTAMP:"@",W3C:"yyyy-mm-dd",formatDate:function(a,h,e){"string"!==typeof a&&(e=h,h=a,a="");if(!h)return"";
if(h.calendar()!==this)throw m.local.invalidFormat||m.regionalOptions[""].invalidFormat;a=a||this.local.dateFormat;e=e||{};for(var f=e.dayNamesShort||this.local.dayNamesShort,b=e.dayNames||this.local.dayNames,k=e.monthNumbers||this.local.monthNumbers,l=e.monthNamesShort||this.local.monthNamesShort,r=e.monthNames||this.local.monthNames,d=function(b,c){for(var d=1;C+d<a.length&&a.charAt(C+d)===b;)d++;C+=d-1;return 1<Math.floor(d/(c||1))},g=function(a,b,c,e){b=""+b;if(d(a,e))for(;b.length<c;)b="0"+b;
return b},c=function(a,b,c,e){return d(a)?e[b]:c[b]},v=this,t=function(a){return"function"===typeof k?k.call(v,a,d("m")):D(g("m",a.month(),2))},p=function(a,b){return b?"function"===typeof r?r.call(v,a):r[a.month()-v.minMonth]:"function"===typeof l?l.call(v,a):l[a.month()-v.minMonth]},q=this.local.digits,D=function(a){return e.localNumbers&&q?q(a):a},G="",A=!1,C=0;C<a.length;C++)if(A)"'"!==a.charAt(C)||d("'")?G+=a.charAt(C):A=!1;else switch(a.charAt(C)){case "d":G+=D(g("d",h.day(),2));break;case "D":G+=
c("D",h.dayOfWeek(),f,b);break;case "o":G+=g("o",h.dayOfYear(),3);break;case "w":G+=g("w",h.weekOfYear(),2);break;case "m":G+=t(h);break;case "M":G+=p(h,d("M"));break;case "y":G+=d("y",2)?h.year():(10>h.year()%100?"0":"")+h.year()%100;break;case "Y":d("Y",2);G+=h.formatYear();break;case "J":G+=h.toJD();break;case "@":G+=(h.toJD()-this.UNIX_EPOCH)*this.SECS_PER_DAY;break;case "!":G+=(h.toJD()-this.TICKS_EPOCH)*this.TICKS_PER_DAY;break;case "'":d("'")?G+="'":A=!0;break;default:G+=a.charAt(C)}return G},
parseDate:function(a,h,e){if(null==h)throw m.local.invalidArguments||m.regionalOptions[""].invalidArguments;h="object"===typeof h?h.toString():h+"";if(""===h)return null;a=a||this.local.dateFormat;e=e||{};var f=e.shortYearCutoff||this.shortYearCutoff;f="string"!==typeof f?f:this.today().year()%100+parseInt(f,10);for(var b=e.dayNamesShort||this.local.dayNamesShort,k=e.dayNames||this.local.dayNames,l=e.parseMonth||this.local.parseMonth,r=e.monthNumbers||this.local.monthNumbers,d=e.monthNamesShort||
this.local.monthNamesShort,g=e.monthNames||this.local.monthNames,c=e=-1,v=-1,t=-1,p=-1,q=!1,D=!1,G=function(b,c){for(var d=1;O+d<a.length&&a.charAt(O+d)===b;)d++;O+=d-1;return 1<Math.floor(d/(c||1))},A=function(a,b){b=G(a,b);a=[2,3,b?4:2,b?4:2,10,11,20]["oyYJ@!".indexOf(a)+1];a=new RegExp("^-?\\d{1,"+a+"}");a=h.substring(x).match(a);if(!a)throw(m.local.missingNumberAt||m.regionalOptions[""].missingNumberAt).replace(/\{0\}/,x);x+=a[0].length;return parseInt(a[0],10)},C=this,w=function(){if("function"===
typeof r){G("m");var a=r.call(C,h.substring(x));x+=a.length;return a}return A("m")},J=function(a,b,c,d){a=G(a,d)?c:b;for(b=0;b<a.length;b++)if(h.substr(x,a[b].length).toLowerCase()===a[b].toLowerCase())return x+=a[b].length,b+C.minMonth;throw(m.local.unknownNameAt||m.regionalOptions[""].unknownNameAt).replace(/\{0\}/,x);},E=function(){if("function"===typeof g){var a=G("M")?g.call(C,h.substring(x)):d.call(C,h.substring(x));x+=a.length;return a}return J("M",d,g)},H=function(){if(h.charAt(x)!==a.charAt(O))throw(m.local.unexpectedLiteralAt||
m.regionalOptions[""].unexpectedLiteralAt).replace(/\{0\}/,x);x++},x=0,O=0;O<a.length;O++)if(D)"'"!==a.charAt(O)||G("'")?H():D=!1;else switch(a.charAt(O)){case "d":t=A("d");break;case "D":J("D",b,k);break;case "o":p=A("o");break;case "w":A("w");break;case "m":v=w();break;case "M":v=E();break;case "y":c=O;q=!G("y",2);O=c;c=A("y",2);break;case "Y":c=A("Y",2);break;case "J":e=A("J")+.5;"."===h.charAt(x)&&(x++,A("J"));break;case "@":e=A("@")/this.SECS_PER_DAY+this.UNIX_EPOCH;break;case "!":e=A("!")/this.TICKS_PER_DAY+
this.TICKS_EPOCH;break;case "*":x=h.length;break;case "'":G("'")?H():D=!0;break;default:H()}if(x<h.length)throw m.local.unexpectedText||m.regionalOptions[""].unexpectedText;-1===c?c=this.today().year():100>c&&q&&(c+=-1===f?1900:this.today().year()-this.today().year()%100-(c<=f?0:100));"string"===typeof v&&(v=l.call(this,c,v));if(-1<p)for(v=1,t=p,f=this.daysInMonth(c,v);t>f;f=this.daysInMonth(c,v))v++,t-=f;return-1<e?this.fromJD(e):this.newDate(c,v,t)},determineDate:function(a,h,e,f,b){e&&"object"!==
typeof e&&(b=f,f=e,e=null);"string"!==typeof f&&(b=f,f="");h=h?h.newDate():null;if(null==a)a=h;else{if("string"===typeof a)a:{try{var k=this.parseDate(f,a,b);break a}catch(u){}a=a.toLowerCase();e=(a.match(/^c/)&&e?e.newDate():null)||this.today();f=/([+-]?[0-9]+)\s*(d|w|m|y)?/g;for(b=f.exec(a);b;)e.add(parseInt(b[1],10),b[2]||"d"),b=f.exec(a);k=e}else k="number"===typeof a?isNaN(a)||Infinity===a||-Infinity===a?h:this.today().add(a,"d"):this.newDate(a);a=k}return a}})},{"./main":555,"object-assign":446}],
557:[function(a,p,l){p.exports=a("cwise-compiler")({args:["array",{offset:[1],array:0},"scalar","scalar","index"],pre:{body:"{}",args:[],thisVars:[],localVars:[]},post:{body:"{}",args:[],thisVars:[],localVars:[]},body:{body:"{\n        var _inline_1_da \x3d _inline_1_arg0_ - _inline_1_arg3_\n        var _inline_1_db \x3d _inline_1_arg1_ - _inline_1_arg3_\n        if((_inline_1_da \x3e\x3d 0) !\x3d\x3d (_inline_1_db \x3e\x3d 0)) {\n          _inline_1_arg2_.push(_inline_1_arg4_[0] + 0.5 + 0.5 * (_inline_1_da + _inline_1_db) / (_inline_1_da - _inline_1_db))\n        }\n      }",
args:[{name:"_inline_1_arg0_",lvalue:!1,rvalue:!0,count:1},{name:"_inline_1_arg1_",lvalue:!1,rvalue:!0,count:1},{name:"_inline_1_arg2_",lvalue:!1,rvalue:!0,count:1},{name:"_inline_1_arg3_",lvalue:!1,rvalue:!0,count:2},{name:"_inline_1_arg4_",lvalue:!1,rvalue:!0,count:1}],thisVars:[],localVars:["_inline_1_da","_inline_1_db"]},funcName:"zeroCrossings"})},{"cwise-compiler":136}],558:[function(a,p,l){p.exports=function(a,h){var e=[];h=+h||0;m(a.hi(a.shape[0]-1),e,h);return e};var m=a("./lib/zc-core")},
{"./lib/zc-core":557}],559:[function(a,p,l){p.exports=[{path:"",backoff:0},{path:"M-2.4,-3V3L0.6,0Z",backoff:.6},{path:"M-3.7,-2.5V2.5L1.3,0Z",backoff:1.3},{path:"M-4.45,-3L-1.65,-0.2V0.2L-4.45,3L1.55,0Z",backoff:1.55},{path:"M-2.2,-2.2L-0.2,-0.2V0.2L-2.2,2.2L-1.4,3L1.6,0L-1.4,-3Z",backoff:1.6},{path:"M-4.4,-2.1L-0.6,-0.2V0.2L-4.4,2.1L-4,3L2,0L-4,-3Z",backoff:2},{path:"M2,0A2,2 0 1,1 0,-2A2,2 0 0,1 2,0Z",backoff:0,noRotate:!0},{path:"M2,2V-2H-2V2Z",backoff:0,noRotate:!0}]},{}],560:[function(a,p,l){l=
a("./arrow_paths");var m=a("../../plots/font_attributes"),k=a("../../plots/cartesian/constants");a=a("../../plot_api/plot_template").templatedArray;p.exports=a("annotation",{visible:{valType:"boolean",dflt:!0,editType:"calc+arraydraw"},text:{valType:"string",editType:"calc+arraydraw"},textangle:{valType:"angle",dflt:0,editType:"calc+arraydraw"},font:m({editType:"calc+arraydraw",colorEditType:"arraydraw"}),width:{valType:"number",min:1,dflt:null,editType:"calc+arraydraw"},height:{valType:"number",
min:1,dflt:null,editType:"calc+arraydraw"},opacity:{valType:"number",min:0,max:1,dflt:1,editType:"arraydraw"},align:{valType:"enumerated",values:["left","center","right"],dflt:"center",editType:"arraydraw"},valign:{valType:"enumerated",values:["top","middle","bottom"],dflt:"middle",editType:"arraydraw"},bgcolor:{valType:"color",dflt:"rgba(0,0,0,0)",editType:"arraydraw"},bordercolor:{valType:"color",dflt:"rgba(0,0,0,0)",editType:"arraydraw"},borderpad:{valType:"number",min:0,dflt:1,editType:"calc+arraydraw"},
borderwidth:{valType:"number",min:0,dflt:1,editType:"calc+arraydraw"},showarrow:{valType:"boolean",dflt:!0,editType:"calc+arraydraw"},arrowcolor:{valType:"color",editType:"arraydraw"},arrowhead:{valType:"integer",min:0,max:l.length,dflt:1,editType:"arraydraw"},startarrowhead:{valType:"integer",min:0,max:l.length,dflt:1,editType:"arraydraw"},arrowside:{valType:"flaglist",flags:["end","start"],extras:["none"],dflt:"end",editType:"arraydraw"},arrowsize:{valType:"number",min:.3,dflt:1,editType:"calc+arraydraw"},
startarrowsize:{valType:"number",min:.3,dflt:1,editType:"calc+arraydraw"},arrowwidth:{valType:"number",min:.1,editType:"calc+arraydraw"},standoff:{valType:"number",min:0,dflt:0,editType:"calc+arraydraw"},startstandoff:{valType:"number",min:0,dflt:0,editType:"calc+arraydraw"},ax:{valType:"any",editType:"calc+arraydraw"},ay:{valType:"any",editType:"calc+arraydraw"},axref:{valType:"enumerated",dflt:"pixel",values:["pixel",k.idRegex.x.toString()],editType:"calc"},ayref:{valType:"enumerated",dflt:"pixel",
values:["pixel",k.idRegex.y.toString()],editType:"calc"},xref:{valType:"enumerated",values:["paper",k.idRegex.x.toString()],editType:"calc"},x:{valType:"any",editType:"calc+arraydraw"},xanchor:{valType:"enumerated",values:["auto","left","center","right"],dflt:"auto",editType:"calc+arraydraw"},xshift:{valType:"number",dflt:0,editType:"calc+arraydraw"},yref:{valType:"enumerated",values:["paper",k.idRegex.y.toString()],editType:"calc"},y:{valType:"any",editType:"calc+arraydraw"},yanchor:{valType:"enumerated",
values:["auto","top","middle","bottom"],dflt:"auto",editType:"calc+arraydraw"},yshift:{valType:"number",dflt:0,editType:"calc+arraydraw"},clicktoshow:{valType:"enumerated",values:[!1,"onoff","onout"],dflt:!1,editType:"arraydraw"},xclick:{valType:"any",editType:"arraydraw"},yclick:{valType:"any",editType:"arraydraw"},hovertext:{valType:"string",editType:"arraydraw"},hoverlabel:{bgcolor:{valType:"color",editType:"arraydraw"},bordercolor:{valType:"color",editType:"arraydraw"},font:m({editType:"arraydraw"}),
editType:"arraydraw"},captureevents:{valType:"boolean",editType:"arraydraw"},editType:"calc",_deprecated:{ref:{valType:"string",editType:"calc"}}})},{"../../plot_api/plot_template":738,"../../plots/cartesian/constants":754,"../../plots/font_attributes":774,"./arrow_paths":559}],561:[function(a,p,l){function m(a){h.filterVisible(a._fullLayout.annotations).forEach(function(b){var f=e.getFromId(a,b.xref),h=e.getFromId(a,b.yref);b._extremes={};f&&k(b,f);h&&k(b,h)})}function k(a,f){var b=f._id,h=b.charAt(0),
d=a[h],g=a["a"+h],c=a["_"+h+"padplus"],k=a["_"+h+"padminus"],n={x:1,y:-1}[h]*a[h+"shift"],m=3*a.arrowsize*a.arrowwidth||0,l=m+n,p=m-n,q=3*a.startarrowsize*a.arrowwidth||0;m=q+n;n=q-n;a["a"+h+"ref"]===a[h+"ref"]?(h=e.findExtremes(f,[f.r2c(d)],{ppadplus:l,ppadminus:p}),f=e.findExtremes(f,[f.r2c(g)],{ppadplus:Math.max(c,m),ppadminus:Math.max(k,n)}),f={min:[h.min[0],f.min[0]],max:[h.max[0],f.max[0]]}):(m=g?m+g:m,n=g?n-g:n,f=e.findExtremes(f,[f.r2c(d)],{ppadplus:Math.max(c,l,m),ppadminus:Math.max(k,p,
n)}));a._extremes[b]=f}var h=a("../../lib"),e=a("../../plots/cartesian/axes"),f=a("./draw").draw;p.exports=function(a){if(h.filterVisible(a._fullLayout.annotations).length&&a._fullData.length)return h.syncOrAsync([f,m],a)}},{"../../lib":700,"../../plots/cartesian/axes":748,"./draw":566}],562:[function(a,p,l){function m(a,e){a=a._fullLayout.annotations;var b=[],f=[],d=[],g=(e||[]).length,c,h,n;for(c=0;c<a.length;c++){var m=a[c];if(n=m.clicktoshow){for(h=0;h<g;h++){var l=e[h];var p=l.xaxis;var q=l.yaxis;
if(p._id===m.xref&&q._id===m.yref&&p.d2r(l.x)===k(m._xclick,p)&&q.d2r(l.y)===k(m._yclick,q)){l=m.visible?"onout"===n?f:d:b;l.push(c);break}}h===g&&m.visible&&"onout"===n&&f.push(c)}}return{on:b,off:f,explicitOff:d}}function k(a,e){return"log"===e.type?e.l2r(a):e.d2r(a)}var h=a("../../lib"),e=a("../../registry"),f=a("../../plot_api/plot_template").arrayEditor;p.exports={hasClickToShow:function(a,e){a=m(a,e);return 0<a.on.length||0<a.explicitOff.length},onClick:function(a,k){var b=m(a,k);k=b.on;b=b.off.concat(b.explicitOff);
var n={},d=a._fullLayout.annotations,g;if(k.length||b.length){for(g=0;g<k.length;g++){var c=f(a.layout,"annotations",d[k[g]]);c.modifyItem("visible",!0);h.extendFlat(n,c.getUpdateObj())}for(g=0;g<b.length;g++)c=f(a.layout,"annotations",d[b[g]]),c.modifyItem("visible",!1),h.extendFlat(n,c.getUpdateObj());return e.call("update",a,{},n)}}}},{"../../lib":700,"../../plot_api/plot_template":738,"../../registry":829}],563:[function(a,p,l){var m=a("../../lib"),k=a("../color");p.exports=function(a,e,f,b){b("opacity");
a=b("bgcolor");var h=b("bordercolor");h=k.opacity(h);b("borderpad");var l=b("borderwidth"),r=b("showarrow");b("text",r?" ":f._dfltTitle.annotation);b("textangle");m.coerceFont(b,"font",f.font);b("width");b("align");b("height")&&b("valign");if(r){r=b("arrowside");if(-1!==r.indexOf("end")){var d=b("arrowhead");var g=b("arrowsize")}-1!==r.indexOf("start")&&(b("startarrowhead",d),b("startarrowsize",g));b("arrowcolor",h?e.bordercolor:k.defaultLine);b("arrowwidth",2*(h&&l||1));b("standoff");b("startstandoff")}e=
b("hovertext");f=f.hoverlabel||{};e&&(a=b("hoverlabel.bgcolor",f.bgcolor||(k.opacity(a)?k.rgb(a):k.defaultLine)),a=b("hoverlabel.bordercolor",f.bordercolor||k.contrast(a)),m.coerceFont(b,"hoverlabel.font",{family:f.font.family,size:f.font.size,color:f.font.color||a}));b("captureevents",!!e)}},{"../../lib":700,"../color":577}],564:[function(a,p,l){var m=a("fast-isnumeric"),k=a("../../lib/to_log_range");p.exports=function(a,e,f,b){function h(a){var c=r[a];c=l?k(c,e.range):Math.pow(10,c);m(c)||(c=null);
b(d+a,c)}e=e||{};var l="log"===f&&"linear"===e.type;f="linear"===f&&"log"===e.type;if(l||f){a=a._fullLayout.annotations;f=e._id.charAt(0);for(var r,d,g=0;g<a.length;g++)r=a[g],d="annotations["+g+"].",r[f+"ref"]===e._id&&h(f),r["a"+f+"ref"]===e._id&&h("a"+f)}}},{"../../lib/to_log_range":726,"fast-isnumeric":221}],565:[function(a,p,l){function m(a,e,m){function d(c,d){return k.coerce(a,e,b,c,d)}var g=d("visible"),c=d("clicktoshow");if(g||c){f(a,e,m,d);g=e.showarrow;var n=["x","y"],t=[-10,-30];m={_fullLayout:m};
for(var r=0;2>r;r++){var l=n[r],u=h.coerceRef(a,e,m,l,"","paper");"paper"!==u&&h.getFromId(m,u)._annIndices.push(e._index);h.coercePosition(e,m,d,u,l,.5);if(g){var p="a"+l,q=h.coerceRef(a,e,m,p,"pixel");"pixel"!==q&&q!==u&&(q=e[p]="pixel");h.coercePosition(e,m,d,q,p,"pixel"===q?t[r]:.4)}d(l+"anchor");d(l+"shift")}k.noneOrAll(a,e,["x","y"]);g&&k.noneOrAll(a,e,["ax","ay"]);c&&(c=d("xclick"),g=d("yclick"),e._xclick=void 0===c?e.x:h.cleanPosition(c,m,e.xref),e._yclick=void 0===g?e.y:h.cleanPosition(g,
m,e.yref))}}var k=a("../../lib"),h=a("../../plots/cartesian/axes"),e=a("../../plots/array_container_defaults"),f=a("./common_defaults"),b=a("./attributes");p.exports=function(a,b){e(a,b,{name:"annotations",handleItemDefaults:m})}},{"../../lib":700,"../../plots/array_container_defaults":744,"../../plots/cartesian/axes":748,"./attributes":560,"./common_defaults":563}],566:[function(a,p,l){function m(a,b){var c=a._fullLayout.annotations[b]||{},d=n.getFromId(a,c.xref),e=n.getFromId(a,c.yref);d&&d.setScale();
e&&e.setScale();k(a,c,b,!1,d,e)}function k(a,f,k,n,m,l){function p(b){b.call(r.font,la).attr({"text-anchor":{left:"start",right:"end"}[f.align]||"middle"});g.convertToTspans(b,a,y);return b}function y(){function d(a,b){"auto"===b&&(b=a<1/3?"left":a>2/3?"right":"center");return{center:0,middle:0,left:.5,bottom:-.5,right:-.5,top:.5}[b]}var h=Z.selectAll("a");1===h.size()&&h.text()===Z.text()&&W.insert("a",":first-child").attr({"xlink:xlink:href":h.attr("xlink:href"),"xlink:xlink:show":h.attr("xlink:show")}).style({cursor:"pointer"}).node().appendChild(ha.node());
h=W.select(".annotation-text-math-group");for(var k=!h.empty(),t=r.bBox((k?h:Z).node()),p=t.width,y=t.height,C=f.width||p,G=f.height||y,I=Math.round(C+2*F),E=Math.round(G+2*F),H=!1,J=["x","y"],R=0;R<J.length;R++){var Q=J[R],M=f[Q+"ref"]||Q,O=f["a"+Q+"ref"],ca={x:m,y:l}[Q],U=(T+("x"===Q?0:-90))*Math.PI/180,ia=I*Math.cos(U),la=E*Math.sin(U);U=Math.abs(ia)+Math.abs(la);var qa=f[Q+"anchor"],K=f[Q+"shift"]*("x"===Q?1:-1),X=P[Q];if(ca){var Pa=ca.r2fraction(f[Q]);if(0>Pa||1<Pa)if(O===M){if(Pa=ca.r2fraction(f["a"+
Q]),0>Pa||1<Pa)H=!0}else H=!0;Pa=ca._offset+ca.r2p(f[Q]);var Ba=.5}else"x"===Q?(Ba=f[Q],Pa=B.l+B.w*Ba):(Ba=1-f[Q],Pa=B.t+B.h*Ba),Ba=f.showarrow?.5:Ba;f.showarrow?(X.head=Pa,qa=f["a"+Q],ia=ia*d(.5,f.xanchor)-la*d(.5,f.yanchor),O===M?(X.tail=ca._offset+ca.r2p(qa),ca=ia):(X.tail=Pa+qa,ca=ia+qa),X.text=X.tail+ia,Pa=A["x"===Q?"width":"height"],"paper"===M&&(X.head=b.constrain(X.head,1,Pa-1)),"pixel"===O&&(M=-Math.max(X.tail-3,X.text),O=Math.min(X.tail+3,X.text)-Pa,0<M?(X.tail+=M,X.text+=M):0<O&&(X.tail-=
O,X.text-=O)),X.tail+=K,X.head+=K):(ca=ia=U*d(Ba,qa),X.text=Pa+ia);X.text+=K;ia+=K;ca+=K;f["_"+Q+"padplus"]=U/2+ca;f["_"+Q+"padminus"]=U/2-ca;f["_"+Q+"size"]=U;f["_"+Q+"shift"]=ia}if(!a._dragging&&H)W.remove();else{J=H=0;"left"!==f.align&&(H=(C-p)*("center"===f.align?.5:1));"top"!==f.valign&&(J=(G-y)*("middle"===f.valign?.5:1));k?h.select("svg").attr({x:F+H-1,y:F+J}).call(r.setClipUrl,ea?x:null,a):Z.call(g.positionText,F+H-t.left,F+J-t.top).call(r.setClipUrl,ea?x:null,a);ba.select("rect").call(r.setRect,
F,F,C,G);ha.call(r.setRect,fa/2,fa/2,I-fa,E-fa);W.call(r.setTranslate,Math.round(P.x.text-I/2),Math.round(P.y.text-E/2));z.attr({transform:"rotate("+T+","+P.x.text+","+P.y.text+")"});var Ia=function(c,d){Y.selectAll(".annotation-arrow-g").remove();var g=P.x.head,h=P.y.head,k=P.x.tail+c,t=P.y.tail+d,p=P.x.text+c;c=P.y.text+d;d=b.rotationXYMatrix(T,p,c);var y=b.apply2DTransform(d);d=b.apply2DTransform2(d);var A=+ha.attr("width"),C=+ha.attr("height");p-=.5*A;A=p+A;c-=.5*C;C=c+C;d=[[p,c,p,C],[p,C,A,C],
[A,C,A,c],[A,c,p,c]].map(d);if(!d.reduce(function(a,c){return a^!!b.segmentsIntersect(g,h,g+1E6,h+1E6,c[0],c[1],c[2],c[3])},!1)){d.forEach(function(a){if(a=b.segmentsIntersect(k,t,g,h,a[0],a[1],a[2],a[3]))k=a.x,t=a.y});d=f.arrowwidth;C=f.arrowcolor;c=f.arrowside;var G=Y.append("g").style({opacity:u.opacity(C)}).classed("annotation-arrow-g",!0);C=G.append("path").attr("d","M"+k+","+t+"L"+g+","+h).style("stroke-width",d+"px").call(u.stroke,u.rgb(C));q(C,c,f);if(D.annotationPosition&&C.node().parentNode&&
!n){c=g;C=h;f.standoff&&(p=Math.sqrt(Math.pow(g-k,2)+Math.pow(h-t,2)),c+=f.standoff*(k-g)/p,C+=f.standoff*(t-h)/p);d=G.append("path").classed("annotation-arrow",!0).classed("anndrag",!0).classed("cursor-move",!0).attr({d:"M3,3H-3V-3H3ZM0,0L"+(k-c)+","+(t-C),transform:"translate("+c+","+C+")"}).style("stroke-width",d+6+"px").call(u.stroke,"rgba(0,0,0,0)").call(u.fill,"rgba(0,0,0,0)");var I,E;v.init({element:d.node(),gd:a,prepFn:function(){var a=r.getTranslate(W);I=a.x;E=a.y;m&&m.autorange&&N(m._name+
".autorange",!0);l&&l.autorange&&N(l._name+".autorange",!0)},moveFn:function(a,b){var c=y(I,E),d=c[0]+a;c=c[1]+b;W.call(r.setTranslate,d,c);L("x",m?m.p2r(m.r2p(f.x)+a):f.x+a/B.w);L("y",l?l.p2r(l.r2p(f.y)+b):f.y-b/B.h);f.axref===f.xref&&L("ax",m.p2r(m.r2p(f.ax)+a));f.ayref===f.yref&&L("ay",l.p2r(l.r2p(f.ay)+b));G.attr("transform","translate("+a+","+b+")");z.attr({transform:"rotate("+T+","+d+","+c+")"})},doneFn:function(){e.call("_guiRelayout",a,w());var b=document.querySelector(".js-notes-box-panel");
b&&b.redraw(b.selectedObj)}})}}};f.showarrow&&Ia(0,0);if(S){var Ka;v.init({element:W.node(),gd:a,prepFn:function(){Ka=z.attr("transform")},moveFn:function(a,b){var d="pointer";if(f.showarrow)f.axref===f.xref?L("ax",m.p2r(m.r2p(f.ax)+a)):L("ax",f.ax+a),f.ayref===f.yref?L("ay",l.p2r(l.r2p(f.ay)+b)):L("ay",f.ay+b),Ia(a,b);else{if(n)return;if(m)var e=m.p2r(m.r2p(f.x)+a);else e=f._xsize/B.w,e=v.align(f.x+(f._xshift-f.xshift)/B.w-e/2+a/B.w,e,0,1,f.xanchor);if(l)var g=l.p2r(l.r2p(f.y)+b);else g=f._ysize/
B.h,g=v.align(f.y-(f._yshift+f.yshift)/B.h-g/2-b/B.h,g,0,1,f.yanchor);L("x",e);L("y",g);m&&l||(d=v.getCursor(m?.5:e,l?.5:g,f.xanchor,f.yanchor))}z.attr({transform:"translate("+a+","+b+")"+Ka});c(W,d)},doneFn:function(){c(W);e.call("_guiRelayout",a,w());var b=document.querySelector(".js-notes-box-panel");b&&b.redraw(b.selectedObj)}})}}}var A=a._fullLayout,B=a._fullLayout._size,D=a._context.edits;if(n){var C="annotation-"+n;var G=n+".annotations"}else C="annotation",G="annotations";G=t(a.layout,G,f);
var N=G.modifyBase,L=G.modifyItem,w=G.getUpdateObj;A._infolayer.selectAll("."+C+'[data-index\x3d"'+k+'"]').remove();var x="clip"+A._uid+"_ann"+k;if(f._input&&!1!==f.visible){var P={x:{},y:{}},T=+f.textangle||0,Y=A._infolayer.append("g").classed(C,!0).attr("data-index",String(k)).style("opacity",f.opacity),z=Y.append("g").classed("annotation-text-g",!0),S=D[f.showarrow?"annotationTail":"annotationPosition"];C=f.captureevents||D.annotationText||S;var W=z.append("g").style("pointer-events",C?"all":null).call(c,
"pointer").on("click",function(){a._dragging=!1;var b={index:k,annotation:f._input,fullAnnotation:f,event:h.event};n&&(b.subplotId=n);a.emit("plotly_clickannotation",b)});if(f.hovertext)W.on("mouseover",function(){var b=f.hoverlabel,c=b.font,e=this.getBoundingClientRect(),g=a.getBoundingClientRect();d.loneHover({x0:e.left-g.left,x1:e.right-g.left,y:(e.top+e.bottom)/2-g.top,text:f.hovertext,color:b.bgcolor,borderColor:b.bordercolor,fontFamily:c.family,fontSize:c.size,fontColor:c.color},{container:A._hoverlayer.node(),
outerContainer:A._paper.node(),gd:a})}).on("mouseout",function(){d.loneUnhover(A._hoverlayer.node())});var fa=f.borderwidth,F=fa+f.borderpad,ha=W.append("rect").attr("class","bg").style("stroke-width",fa+"px").call(u.stroke,f.bordercolor).call(u.fill,f.bgcolor),ea=f.width||f.height,ba=A._topclips.selectAll("#"+x).data(ea?[0]:[]);ba.enter().append("clipPath").classed("annclip",!0).attr("id",x).append("rect");ba.exit().remove();var la=f.font;C=A.meta?b.templateString(f.text,{meta:A.meta}):f.text;var Z=
W.append("text").classed("annotation-text",!0).text(C);if(D.annotationText)Z.call(g.makeEditable,{delegate:W,gd:a}).call(p).on("edit",function(b){f.text=b;this.call(p);L("text",b);m&&m.autorange&&N(m._name+".autorange",!0);l&&l.autorange&&N(l._name+".autorange",!0);e.call("_guiRelayout",a,w())});else Z.call(p)}else h.selectAll("#"+x).remove()}var h=a("d3"),e=a("../../registry"),f=a("../../plots/plots"),b=a("../../lib"),n=a("../../plots/cartesian/axes"),u=a("../color"),r=a("../drawing"),d=a("../fx"),
g=a("../../lib/svg_text_utils"),c=a("../../lib/setcursor"),v=a("../dragelement"),t=a("../../plot_api/plot_template").arrayEditor,q=a("./draw_arrow_head");p.exports={draw:function(a){var b=a._fullLayout;b._infolayer.selectAll(".annotation").remove();for(var c=0;c<b.annotations.length;c++)b.annotations[c].visible&&m(a,c);return f.previousPromises(a)},drawOne:m,drawRaw:k}},{"../../lib":700,"../../lib/setcursor":720,"../../lib/svg_text_utils":724,"../../plot_api/plot_template":738,"../../plots/cartesian/axes":748,
"../../plots/plots":810,"../../registry":829,"../color":577,"../dragelement":595,"../drawing":598,"../fx":616,"./draw_arrow_head":567,d3:154}],567:[function(a,p,l){var m=a("d3"),k=a("../color"),h=a("./arrow_paths");p.exports=function(a,f,b){function e(){a.style("stroke-dasharray","0px,100px")}function l(c,d,e,g){c.path&&(c.noRotate&&(e=0),m.select(r.parentNode).append("path").attr({"class":a.attr("class"),d:c.path,transform:"translate("+d.x+","+d.y+")"+(e?"rotate("+180*e/Math.PI+")":"")+"scale("+
g+")"}).style({fill:k.rgb(b.arrowcolor),"stroke-width":0}))}var r=a.node(),d=h[b.arrowhead||0],g=h[b.startarrowhead||0],c=(b.arrowwidth||1)*(b.arrowsize||1),v=(b.arrowwidth||1)*(b.startarrowsize||1),t=0<=f.indexOf("start");f=0<=f.indexOf("end");var p=d.backoff*c+b.standoff,q=g.backoff*v+b.startstandoff;if("line"===r.nodeName){var D={x:+a.attr("x1"),y:+a.attr("y1")};var G={x:+a.attr("x2"),y:+a.attr("y2")};var A=D.x-G.x,C=D.y-G.y;var w=Math.atan2(C,A);var J=w+Math.PI;if(p&&q&&p+q>Math.sqrt(A*A+C*C)){e();
return}if(p){if(p*p>A*A+C*C){e();return}var E=p*Math.sin(w);G.x+=p*Math.cos(w);G.y+=E;a.attr({x2:G.x,y2:G.y})}if(q){if(q*q>A*A+C*C){e();return}p=q*Math.sin(w);D.x-=q*Math.cos(w);D.y-=p;a.attr({x1:D.x,y1:D.y})}}else if("path"===r.nodeName){A=r.getTotalLength();C="";if(A<p+q){e();return}D=r.getPointAtLength(0);w=r.getPointAtLength(.1);w=Math.atan2(D.y-w.y,D.x-w.x);D=r.getPointAtLength(Math.min(q,A));C="0px,"+q+"px,";G=r.getPointAtLength(A);J=r.getPointAtLength(A-.1);J=Math.atan2(G.y-J.y,G.x-J.x);G=
r.getPointAtLength(Math.max(0,A-p));a.style("stroke-dasharray",C+(A-(C?q+p:p)+"px,"+A+"px"))}t&&l(g,D,w,v);f&&l(d,G,J,c)}},{"../color":577,"./arrow_paths":559,d3:154}],568:[function(a,p,l){l=a("./draw");var m=a("./click");p.exports={moduleType:"component",name:"annotations",layoutAttributes:a("./attributes"),supplyLayoutDefaults:a("./defaults"),includeBasePlot:a("../../plots/cartesian/include_components")("annotations"),calcAutorange:a("./calc_autorange"),draw:l.draw,drawOne:l.drawOne,drawRaw:l.drawRaw,
hasClickToShow:m.hasClickToShow,onClick:m.onClick,convertCoords:a("./convert_coords")}},{"../../plots/cartesian/include_components":758,"./attributes":560,"./calc_autorange":561,"./click":562,"./convert_coords":564,"./defaults":565,"./draw":566}],569:[function(a,p,l){l=a("../annotations/attributes");var m=a("../../plot_api/edit_types").overrideAll;a=a("../../plot_api/plot_template").templatedArray;p.exports=m(a("annotation",{visible:l.visible,x:{valType:"any"},y:{valType:"any"},z:{valType:"any"},
ax:{valType:"number"},ay:{valType:"number"},xanchor:l.xanchor,xshift:l.xshift,yanchor:l.yanchor,yshift:l.yshift,text:l.text,textangle:l.textangle,font:l.font,width:l.width,height:l.height,opacity:l.opacity,align:l.align,valign:l.valign,bgcolor:l.bgcolor,bordercolor:l.bordercolor,borderpad:l.borderpad,borderwidth:l.borderwidth,showarrow:l.showarrow,arrowcolor:l.arrowcolor,arrowhead:l.arrowhead,startarrowhead:l.startarrowhead,arrowside:l.arrowside,arrowsize:l.arrowsize,startarrowsize:l.startarrowsize,
arrowwidth:l.arrowwidth,standoff:l.standoff,startstandoff:l.startstandoff,hovertext:l.hovertext,hoverlabel:l.hoverlabel,captureevents:l.captureevents}),"calc","from-root")},{"../../plot_api/edit_types":731,"../../plot_api/plot_template":738,"../annotations/attributes":560}],570:[function(a,p,l){function m(a,f){var b=f.fullSceneLayout.domain,e=f.fullLayout._size;f={pdata:null,type:"linear",autorange:!1,range:[-Infinity,Infinity]};a._xa={};k.extendFlat(a._xa,f);h.setConvert(a._xa);a._xa._offset=e.l+
b.x[0]*e.w;a._xa.l2p=function(){return.5*(1+a._pdata[0]/a._pdata[3])*e.w*(b.x[1]-b.x[0])};a._ya={};k.extendFlat(a._ya,f);h.setConvert(a._ya);a._ya._offset=e.t+(1-b.y[1])*e.h;a._ya.l2p=function(){return.5*(1-a._pdata[1]/a._pdata[3])*e.h*(b.y[1]-b.y[0])}}var k=a("../../lib"),h=a("../../plots/cartesian/axes");p.exports=function(a){for(var e=a.fullSceneLayout.annotations,b=0;b<e.length;b++)m(e[b],a);a.fullLayout._infolayer.selectAll(".annotation-"+a.id).remove()}},{"../../lib":700,"../../plots/cartesian/axes":748}],
571:[function(a,p,l){function m(a,e,m,d){function g(c,d){return k.coerce(a,e,b,c,d)}function c(a){var b=a+"axis",c={_fullLayout:{}};c._fullLayout[b]=m[b];return h.coercePosition(e,c,g,a,a,.5)}g("visible")&&(f(a,e,d.fullLayout,g),c("x"),c("y"),c("z"),k.noneOrAll(a,e,["x","y","z"]),e.xref="x",e.yref="y",e.zref="z",g("xanchor"),g("yanchor"),g("xshift"),g("yshift"),e.showarrow&&(e.axref="pixel",e.ayref="pixel",g("ax",-10),g("ay",-30),k.noneOrAll(a,e,["ax","ay"])))}var k=a("../../lib"),h=a("../../plots/cartesian/axes"),
e=a("../../plots/array_container_defaults"),f=a("../annotations/common_defaults"),b=a("./attributes");p.exports=function(a,b,f){e(a,b,{name:"annotations",handleItemDefaults:m,fullLayout:f.fullLayout})}},{"../../lib":700,"../../plots/array_container_defaults":744,"../../plots/cartesian/axes":748,"../annotations/common_defaults":563,"./attributes":569}],572:[function(a,p,l){var m=a("../annotations/draw").drawRaw,k=a("../../plots/gl3d/project"),h=["x","y","z"];p.exports=function(a){for(var e=a.fullSceneLayout,
b=a.dataScale,n=e.annotations,l=0;l<n.length;l++){for(var r=n[l],d=!1,g=0;3>g;g++){var c=h[g];c=e[c+"axis"].r2fraction(r[c]);if(0>c||1<c){d=!0;break}}d?a.fullLayout._infolayer.select(".annotation-"+a.id+'[data-index\x3d"'+l+'"]').remove():(r._pdata=k(a.glplot.cameraParams,[e.xaxis.r2l(r.x)*b[0],e.yaxis.r2l(r.y)*b[1],e.zaxis.r2l(r.z)*b[2]]),m(a.graphDiv,r,l,a.id,r._xa,r._ya))}}},{"../../plots/gl3d/project":798,"../annotations/draw":566}],573:[function(a,p,l){var m=a("../../registry"),k=a("../../lib");
p.exports={moduleType:"component",name:"annotations3d",schema:{subplots:{scene:{annotations:a("./attributes")}}},layoutAttributes:a("./attributes"),handleDefaults:a("./defaults"),includeBasePlot:function(a,e){var f=m.subplotsRegistry.gl3d;if(f)for(var b=f.attrRegex,h=Object.keys(a),l=0;l<h.length;l++){var r=h[l];b.test(r)&&(a[r].annotations||[]).length&&(k.pushUnique(e._basePlotModules,f),k.pushUnique(e._subplots.gl3d,r))}},convert:a("./convert"),draw:a("./draw")}},{"../../lib":700,"../../registry":829,
"./attributes":569,"./convert":570,"./defaults":571,"./draw":572}],574:[function(a,p,l){p.exports=a("world-calendars/dist/main");a("world-calendars/dist/plus");a("world-calendars/dist/calendars/chinese");a("world-calendars/dist/calendars/coptic");a("world-calendars/dist/calendars/discworld");a("world-calendars/dist/calendars/ethiopian");a("world-calendars/dist/calendars/hebrew");a("world-calendars/dist/calendars/islamic");a("world-calendars/dist/calendars/julian");a("world-calendars/dist/calendars/mayan");
a("world-calendars/dist/calendars/nanakshahi");a("world-calendars/dist/calendars/nepali");a("world-calendars/dist/calendars/persian");a("world-calendars/dist/calendars/taiwan");a("world-calendars/dist/calendars/thai");a("world-calendars/dist/calendars/ummalqura")},{"world-calendars/dist/calendars/chinese":541,"world-calendars/dist/calendars/coptic":542,"world-calendars/dist/calendars/discworld":543,"world-calendars/dist/calendars/ethiopian":544,"world-calendars/dist/calendars/hebrew":545,"world-calendars/dist/calendars/islamic":546,
"world-calendars/dist/calendars/julian":547,"world-calendars/dist/calendars/mayan":548,"world-calendars/dist/calendars/nanakshahi":549,"world-calendars/dist/calendars/nepali":550,"world-calendars/dist/calendars/persian":551,"world-calendars/dist/calendars/taiwan":552,"world-calendars/dist/calendars/thai":553,"world-calendars/dist/calendars/ummalqura":554,"world-calendars/dist/main":555,"world-calendars/dist/plus":556}],575:[function(a,p,l){function m(a){var b=g[a];return b?b:b=g[a]=e.instance(a)}
function k(a){return f.extendFlat({},u,{description:a})}function h(a){return"Sets the calendar system to use with `"+a+"` date data."}var e=a("./calendars"),f=a("../../lib");a=a("../../constants/numerical");var b=a.EPOCHJD,n=a.ONEDAY,u={valType:"enumerated",values:Object.keys(e.calendars),editType:"calc",dflt:"gregorian"},r=function(a,b,c,d){var e={};e[c]=u;return f.coerce(a,b,e,c,d)},d={d:{0:"dd","-":"d"},e:{0:"d","-":"d"},a:{0:"D","-":"D"},A:{0:"DD","-":"DD"},j:{0:"oo","-":"o"},W:{0:"ww","-":"w"},
m:{0:"mm","-":"m"},b:{0:"M","-":"M"},B:{0:"MM","-":"MM"},y:{0:"yy","-":"yy"},Y:{0:"yyyy","-":"yyyy"},U:"##",w:"##",c:{0:"D M d %X yyyy","-":"D M d %X yyyy"},x:{0:"mm/dd/yyyy","-":"mm/dd/yyyy"}},g={};a={xcalendar:k(h("x"))};l=f.extendFlat({},a,{ycalendar:k(h("y"))});var c=f.extendFlat({},l,{zcalendar:k(h("z"))}),v=k("Sets the calendar system to use for `range` and `tick0` if this is a date axis. This does not set the calendar for interpreting data on this axis, that's specified in the trace or via the global `layout.calendar`");
p.exports={moduleType:"component",name:"calendars",schema:{traces:{scatter:l,bar:l,box:l,heatmap:l,contour:l,histogram:l,histogram2d:l,histogram2dcontour:l,scatter3d:c,surface:c,mesh3d:c,scattergl:l,ohlc:a,candlestick:a},layout:{calendar:k("Sets the default calendar system to use for interpreting and displaying dates throughout the plot.")},subplots:{xaxis:{calendar:v},yaxis:{calendar:v},scene:{xaxis:{calendar:v},yaxis:{calendar:v},zaxis:{calendar:v}},polar:{radialaxis:{calendar:v}}},transforms:{filter:{valuecalendar:k("Sets the calendar system to use for `value`, if it is a date."),
targetcalendar:k("Sets the calendar system to use for `target`, if it is an array of dates. If `target` is a string (eg *x*) we use the corresponding trace attribute (eg `xcalendar`) if it exists, even if `targetcalendar` is provided.")}}},layoutAttributes:u,handleDefaults:r,handleTraceDefaults:function(a,b,c,d){for(var e=0;e<c.length;e++)r(a,b,c[e]+"calendar",d.calendar)},CANONICAL_SUNDAY:{chinese:"2000-01-02",coptic:"2000-01-03",discworld:"2000-01-03",ethiopian:"2000-01-05",hebrew:"5000-01-01",
islamic:"1000-01-02",julian:"2000-01-03",mayan:"5000-01-01",nanakshahi:"1000-01-05",nepali:"2000-01-05",persian:"1000-01-01",jalali:"1000-01-01",taiwan:"1000-01-04",thai:"2000-01-04",ummalqura:"1400-01-06"},CANONICAL_TICK:{chinese:"2000-01-01",coptic:"2000-01-01",discworld:"2000-01-01",ethiopian:"2000-01-01",hebrew:"5000-01-01",islamic:"1000-01-01",julian:"2000-01-01",mayan:"5000-01-01",nanakshahi:"1000-01-01",nepali:"2000-01-01",persian:"1000-01-01",jalali:"1000-01-01",taiwan:"1000-01-01",thai:"2000-01-01",
ummalqura:"1400-01-01"},DFLTRANGE:{chinese:["2000-01-01","2001-01-01"],coptic:["1700-01-01","1701-01-01"],discworld:["1800-01-01","1801-01-01"],ethiopian:["2000-01-01","2001-01-01"],hebrew:["5700-01-01","5701-01-01"],islamic:["1400-01-01","1401-01-01"],julian:["2000-01-01","2001-01-01"],mayan:["5200-01-01","5201-01-01"],nanakshahi:["0500-01-01","0501-01-01"],nepali:["2000-01-01","2001-01-01"],persian:["1400-01-01","1401-01-01"],jalali:["1400-01-01","1401-01-01"],taiwan:["0100-01-01","0101-01-01"],
thai:["2500-01-01","2501-01-01"],ummalqura:["1400-01-01","1401-01-01"]},getCal:m,worldCalFmt:function(a,c,e){c=Math.floor((c+.05)/n)+b;e=m(e).fromJD(c);c=0;for(var g,f,h;-1!==(c=a.indexOf("%",c));)g=a.charAt(c+1),"0"===g||"-"===g||"_"===g?(h=3,f=a.charAt(c+2),"_"===g&&(g="-")):(f=g,g="0",h=2),(f=d[f])?(g="##"===f?"##":e.formatDate(f[g]),a=a.substr(0,c)+g+a.substr(c+h),c+=g.length):c+=h;return a}}},{"../../constants/numerical":677,"../../lib":700,"./calendars":574}],576:[function(a,p,l){l.defaults=
"#1f77b4 #ff7f0e #2ca02c #d62728 #9467bd #8c564b #e377c2 #7f7f7f #bcbd22 #17becf".split(" ");l.defaultLine="#444";l.lightLine="#eee";l.background="#fff";l.borderLine="#BEC8D9";l.lightFraction=1E3/11},{}],577:[function(a,p,l){function m(a){if(h(a)||"string"!==typeof a)return a;var b=a.trim();if("rgb"!==b.substr(0,3))return a;var e=b.match(/^rgba?\s*\(([^()]*)\)$/);if(!e)return a;e=e[1].trim().split(/\s*[\s,]\s*/);b="a"===b.charAt(3)&&4===e.length;if(!b&&3!==e.length)return a;for(var d=0;d<e.length;d++){if(!e[d].length)return a;
e[d]=Number(e[d]);if(!(0<=e[d]))return a;if(3===d)1<e[d]&&(e[d]=1);else if(1<=e[d])return a}a=Math.round(255*e[0])+", "+Math.round(255*e[1])+", "+Math.round(255*e[2]);return b?"rgba("+a+", "+e[3]+")":"rgb("+a+")"}var k=a("tinycolor2"),h=a("fast-isnumeric"),e=p.exports={};a=a("./attributes");e.defaults=a.defaults;var f=e.defaultLine=a.defaultLine;e.lightLine=a.lightLine;var b=e.background=a.background;e.tinyRGB=function(a){a=a.toRgb();return"rgb("+Math.round(a.r)+", "+Math.round(a.g)+", "+Math.round(a.b)+
")"};e.rgb=function(a){return e.tinyRGB(k(a))};e.opacity=function(a){return a?k(a).getAlpha():0};e.addOpacity=function(a,b){a=k(a).toRgb();return"rgba("+Math.round(a.r)+", "+Math.round(a.g)+", "+Math.round(a.b)+", "+b+")"};e.combine=function(a,e){var f=k(a).toRgb();if(1===f.a)return k(a).toRgbString();a=k(e||b).toRgb();a=1===a.a?a:{r:255*(1-a.a)+a.r*a.a,g:255*(1-a.a)+a.g*a.a,b:255*(1-a.a)+a.b*a.a};return k({r:a.r*(1-f.a)+f.r*f.a,g:a.g*(1-f.a)+f.g*f.a,b:a.b*(1-f.a)+f.b*f.a}).toRgbString()};e.contrast=
function(a,h,m){var d=k(a);1!==d.getAlpha()&&(d=k(e.combine(a,b)));return(d.isDark()?h?d.lighten(h):b:m?d.darken(m):f).toString()};e.stroke=function(a,b){b=k(b);a.style({stroke:e.tinyRGB(b),"stroke-opacity":b.getAlpha()})};e.fill=function(a,b){b=k(b);a.style({fill:e.tinyRGB(b),"fill-opacity":b.getAlpha()})};e.clean=function(a){if(a&&"object"===typeof a){var b=Object.keys(a),f;for(f=0;f<b.length;f++){var d=b[f];var g=a[d];if("color"===d.substr(d.length-5))if(Array.isArray(g))for(d=0;d<g.length;d++)g[d]=
m(g[d]);else a[d]=m(g);else if("colorscale"===d.substr(d.length-10)&&Array.isArray(g))for(d=0;d<g.length;d++)Array.isArray(g[d])&&(g[d][1]=m(g[d][1]));else if(Array.isArray(g)){if(d=g[0],!Array.isArray(d)&&d&&"object"===typeof d)for(d=0;d<g.length;d++)e.clean(g[d])}else g&&"object"===typeof g&&e.clean(g)}}}},{"./attributes":576,"fast-isnumeric":221,tinycolor2:521}],578:[function(a,p,l){l=a("../../plots/cartesian/layout_attributes");var m=a("../../plots/font_attributes"),k=a("../../lib/extend").extendFlat;
a=a("../../plot_api/edit_types").overrideAll;p.exports=a({thicknessmode:{valType:"enumerated",values:["fraction","pixels"],dflt:"pixels"},thickness:{valType:"number",min:0,dflt:30},lenmode:{valType:"enumerated",values:["fraction","pixels"],dflt:"fraction"},len:{valType:"number",min:0,dflt:1},x:{valType:"number",dflt:1.02,min:-2,max:3},xanchor:{valType:"enumerated",values:["left","center","right"],dflt:"left"},xpad:{valType:"number",min:0,dflt:10},y:{valType:"number",dflt:.5,min:-2,max:3},yanchor:{valType:"enumerated",
values:["top","middle","bottom"],dflt:"middle"},ypad:{valType:"number",min:0,dflt:10},outlinecolor:l.linecolor,outlinewidth:l.linewidth,bordercolor:l.linecolor,borderwidth:{valType:"number",min:0,dflt:0},bgcolor:{valType:"color",dflt:"rgba(0,0,0,0)"},tickmode:l.tickmode,nticks:l.nticks,tick0:l.tick0,dtick:l.dtick,tickvals:l.tickvals,ticktext:l.ticktext,ticks:k({},l.ticks,{dflt:""}),ticklen:l.ticklen,tickwidth:l.tickwidth,tickcolor:l.tickcolor,showticklabels:l.showticklabels,tickfont:m({}),tickangle:l.tickangle,
tickformat:l.tickformat,tickformatstops:l.tickformatstops,tickprefix:l.tickprefix,showtickprefix:l.showtickprefix,ticksuffix:l.ticksuffix,showticksuffix:l.showticksuffix,separatethousands:l.separatethousands,exponentformat:l.exponentformat,showexponent:l.showexponent,title:{text:{valType:"string"},font:m({}),side:{valType:"enumerated",values:["right","top","bottom"],dflt:"top"}},_deprecated:{title:{valType:"string"},titlefont:m({}),titleside:{valType:"enumerated",values:["right","top","bottom"],dflt:"top"}}},
"colorbars","from-root")},{"../../lib/extend":690,"../../plot_api/edit_types":731,"../../plots/cartesian/layout_attributes":760,"../../plots/font_attributes":774}],579:[function(a,p,l){var m=a("./draw"),k=a("../colorscale/helpers").flipScale;p.exports=function(a,e,f){if("function"===typeof f)return f(a,e);var b=e[0].trace,h="cb"+b.uid;f=Array.isArray(f)?f:[f];for(var l=0;l<f.length;l++){var r=f[l].container;r=r?b[r]:b;a._fullLayout._infolayer.selectAll("."+h).remove();if(r&&r.showscale){a=e[0].t.cb=
m(a,h);e=r.reversescale?k(r.colorscale):r.colorscale;a.fillgradient(e).zrange([r[f[l].min],r[f[l].max]]).options(r.colorbar)();break}}}},{"../colorscale/helpers":588,"./draw":582}],580:[function(a,p,l){p.exports={cn:{colorbar:"colorbar",cbbg:"cbbg",cbfill:"cbfill",cbfills:"cbfills",cbline:"cbline",cblines:"cblines",cbaxis:"cbaxis",cbtitleunshift:"cbtitleunshift",cbtitle:"cbtitle",cboutline:"cboutline",crisp:"crisp",jsPlaceholder:"js-placeholder"}}},{}],581:[function(a,p,l){var m=a("../../lib"),k=
a("../../plot_api/plot_template"),h=a("../../plots/cartesian/tick_value_defaults"),e=a("../../plots/cartesian/tick_mark_defaults"),f=a("../../plots/cartesian/tick_label_defaults"),b=a("./attributes");p.exports=function(a,l,r){function d(a,d){return m.coerce(c,g,b,a,d)}var g=k.newContainer(l,"colorbar"),c=a.colorbar||{};a=d("thicknessmode");d("thickness","fraction"===a?30/(r.width-r.margin.l-r.margin.r):30);a=d("lenmode");d("len","fraction"===a?1:r.height-r.margin.t-r.margin.b);d("x");d("xanchor");
d("xpad");d("y");d("yanchor");d("ypad");m.noneOrAll(c,g,["x","y"]);d("outlinecolor");d("outlinewidth");d("bordercolor");d("borderwidth");d("bgcolor");h(c,g,d,"linear");a={outerTicks:!1,font:r.font};f(c,g,d,"linear",a);e(c,g,d,"linear",a);d("title.text",r._dfltTitle.colorbar);m.coerceFont(d,"title.font",r.font);d("title.side")}},{"../../lib":700,"../../plot_api/plot_template":738,"../../plots/cartesian/tick_label_defaults":767,"../../plots/cartesian/tick_mark_defaults":768,"../../plots/cartesian/tick_value_defaults":769,
"./attributes":578}],582:[function(a,p,l){var m=a("d3"),k=a("tinycolor2"),h=a("../../plots/plots"),e=a("../../registry"),f=a("../../plots/cartesian/axes"),b=a("../dragelement"),n=a("../../lib"),u=a("../../lib/extend").extendFlat,r=a("../../lib/setcursor"),d=a("../drawing"),g=a("../color"),c=a("../titles"),v=a("../../lib/svg_text_utils");l=a("../../constants/alignment");var t=l.LINE_SPACING,q=l.FROM_TL,B=l.FROM_BR,D=a("../../plots/cartesian/axis_defaults"),G=a("../../plots/cartesian/position_defaults"),
A=a("../../plots/cartesian/layout_attributes"),C=a("./attributes"),w=a("./constants").cn;p.exports=function(a,l){function p(){function C(a,b){return n.coerce(ta,aa,A,a,b)}function L(b,d){var e={propContainer:aa,propName:E("title"),traceIndex:y().index,placeholder:H._dfltTitle.colorbar,containerGroup:ma.select(".cbtitle")},g="h"===b.charAt(0)?b.substr(1):"h"+b;ma.selectAll("."+g+",."+g+"-math-group").remove();c.draw(a,b,u(e,d||{}))}var H=a._fullLayout,J=H._size;if("function"===typeof I.fillcolor||
"function"===typeof I.line.color||I.fillgradient){var x=I.zrange||m.extent(("function"===typeof I.fillcolor?I.fillcolor:I.line.color).domain()),P=[],Q=[],M="function"===typeof I.line.color?I.line.color:function(){return I.line.color},O="function"===typeof I.fillcolor?I.fillcolor:function(){return I.fillcolor},z,fa=I.levels.end+I.levels.size/100,F=I.levels.size,ha=1.001*x[0]-.001*x[1],ea=1.001*x[1]-.001*x[0];for(z=0;1E5>z;z++){var ba=I.levels.start+z*F;if(0<F?ba>=fa:ba<=fa)break;ba>ha&&ba<ea&&P.push(ba)}if(I.fillgradient)Q=
[0];else if("function"===typeof I.fillcolor)if(I.filllevels)for(fa=I.filllevels.end+I.filllevels.size/100,F=I.filllevels.size,z=0;1E5>z;z++){ba=I.filllevels.start+z*F;if(0<F?ba>=fa:ba<=fa)break;ba>x[0]&&ba<x[1]&&Q.push(ba)}else Q=P.map(function(a){return a-I.levels.size/2}),Q.push(Q[Q.length-1]+I.levels.size);else I.fillcolor&&"string"===typeof I.fillcolor&&(Q=[0]);0>I.levels.size&&(P.reverse(),Q.reverse());ba=J.h;z=J.w;var la=Math.round(I.thickness*("fraction"===I.thicknessmode?z:1)),Z=la/J.w;fa=
Math.round(I.len*("fraction"===I.lenmode?ba:1));var pa=fa/J.h;ba=I.xpad/J.w;var da=(I.borderwidth+I.outlinewidth)/2;z=I.ypad/J.h;var K=Math.round(I.x*J.w+I.xpad),ja=I.x-Z*({middle:.5,right:1}[I.xanchor]||0),xa=I.y+pa*(({top:-.5,bottom:.5}[I.yanchor]||0)-.5),za=Math.round(J.h*(1-xa)),ka=za-fa,wa,ta={type:"linear",range:x,tickmode:I.tickmode,nticks:I.nticks,tick0:I.tick0,dtick:I.dtick,tickvals:I.tickvals,ticktext:I.ticktext,ticks:I.ticks,ticklen:I.ticklen,tickwidth:I.tickwidth,tickcolor:I.tickcolor,
showticklabels:I.showticklabels,tickfont:I.tickfont,tickangle:I.tickangle,tickformat:I.tickformat,exponentformat:I.exponentformat,separatethousands:I.separatethousands,showexponent:I.showexponent,showtickprefix:I.showtickprefix,tickprefix:I.tickprefix,showticksuffix:I.showticksuffix,ticksuffix:I.ticksuffix,title:I.title,showline:!0,anchor:"free",side:"right",position:1},aa={type:"linear",_id:"y"+l};fa={letter:"y",font:H.font,noHover:!0,noTickson:!0,calendar:H.calendar};D(ta,aa,C,fa,H);G(ta,aa,C,fa);
aa.position=I.x+ba+Z;p.axis=aa;-1!==["top","bottom"].indexOf(I.title.side)&&(aa.title.side=I.title.side,aa.titlex=I.x+ba,aa.titley=xa+("top"===I.title.side?pa-z:z));I.line.color&&"auto"===I.tickmode&&(aa.tickmode="linear",aa.tick0=I.levels.start,fa=I.levels.size,F=n.constrain((za-ka)/50,4,15)+1,F=(x[1]-x[0])/((I.nticks||F)*fa),1<F&&(ha=Math.pow(10,Math.floor(Math.log(F)/Math.LN10)),fa*=ha*n.roundUp(F/ha,[2,5,10]),2E-6>(Math.abs(I.levels.start)/I.levels.size+1E-6)%1&&(aa.tick0=0)),aa.dtick=fa);aa.domain=
[xa+z,xa+pa-z];aa.setScale();var ma=n.ensureSingle(H._infolayer,"g",l,function(a){a.classed(w.colorbar,!0).each(function(){var a=m.select(this);a.append("rect").classed(w.cbbg,!0);a.append("g").classed(w.cbfills,!0);a.append("g").classed(w.cblines,!0);a.append("g").classed(w.cbaxis,!0).classed(w.crisp,!0);a.append("g").classed(w.cbtitleunshift,!0).append("g").classed(w.cbtitle,!0);a.append("rect").classed(w.cboutline,!0);a.select(".cbtitle").datum(0)})});ma.attr("transform","translate("+Math.round(J.l)+
","+Math.round(J.t)+")");var Aa=ma.select(".cbtitleunshift").attr("transform","translate(-"+Math.round(J.l)+",-"+Math.round(J.t)+")"),va=ma.select(".cbaxis"),sa=0;-1!==["top","bottom"].indexOf(I.title.side)&&(fa=aa.title.font.size,L(aa._id+"title",{attributes:{x:J.l+(I.x+ba)*J.w,y:"top"===I.title.side?(1-(xa+pa-z))*J.h+J.t+3+.75*fa:(1-(xa+z))*J.h+J.t-3-.25*fa,"text-anchor":"start"}}));(ba=n.syncOrAsync([h.previousPromises,function(){if(-1!==["top","bottom"].indexOf(I.title.side)){var b=ma.select(".cbtitle"),
c=b.select("text"),e=[-I.outlinewidth/2,I.outlinewidth/2],g=b.select(".h"+aa._id+"title-math-group").node(),h=15.6;c.node()&&(h=parseInt(c.node().style.fontSize,10)*t);g?(sa=d.bBox(g).height,sa>h&&(e[1]-=(sa-h)/2)):c.node()&&!c.classed(w.jsPlaceholder)&&(sa=d.bBox(c.node()).height);sa&&(sa+=5,"top"===I.title.side?(aa.domain[1]-=sa/J.h,e[1]*=-1):(aa.domain[0]+=sa/J.h,c=v.lineCount(c),e[1]+=(1-c)*h),b.attr("transform","translate("+e+")"),aa.setScale())}ma.selectAll(".cbfills,.cblines").attr("transform",
"translate(0,"+Math.round(J.h*(1-aa.domain[1]))+")");va.attr("transform","translate(0,"+Math.round(-J.t)+")");b=ma.select(".cbfills").selectAll("rect.cbfill").data(Q);b.enter().append("rect").classed(w.cbfill,!0).style("stroke","none");b.exit().remove();var r=x.map(aa.c2p).map(Math.round).sort(function(a,b){return a-b});b.each(function(b,c){c=[0===c?x[0]:(Q[c]+Q[c-1])/2,c===Q.length-1?x[1]:(Q[c]+Q[c+1])/2].map(aa.c2p).map(Math.round);c[1]=n.constrain(c[1]+(c[1]>c[0])?1:-1,r[0],r[1]);c=m.select(this).attr({x:K,
width:Math.max(la,2),y:m.min(c),height:Math.max(m.max(c)-m.min(c),2)});I.fillgradient?d.gradient(c,a,l,"vertical",I.fillgradient,"fill"):(b=O(b).replace("e-",""),c.attr("fill",k(b).toHexString()))});b=ma.select(".cblines").selectAll("path.cbline").data(I.line.color&&I.line.width?P:[]);b.enter().append("path").classed(w.cbline,!0);b.exit().remove();b.each(function(a){m.select(this).attr("d","M"+K+","+(Math.round(aa.c2p(a))+I.line.width/2%1)+"h"+la).call(d.lineGroupStyle,I.line.width,M(a),I.line.dash)});
va.selectAll("g."+aa._id+"tick,path").remove();return n.syncOrAsync([function(){var b=K+la+(I.outlinewidth||0)/2-("outside"===I.ticks?1:0),c=f.calcTicks(aa),d=f.makeTransFn(aa),e=f.getTickSigns(aa)[2];f.drawTicks(a,aa,{vals:"inside"===aa.ticks?f.clipEnds(aa,c):c,layer:va,path:f.makeTickPath(aa,b,e),transFn:d});return f.drawLabels(a,aa,{vals:c,layer:va,transFn:d,labelFns:f.makeLabelFns(aa,b)})},function(){if(-1===["top","bottom"].indexOf(I.title.side)){var b=aa.title.font.size,c=aa._offset+aa._length/
2;b=J.l+(aa.position||0)*J.w+("right"===aa.side?10+b*(aa.showticklabels?1:.5):-10-b*(aa.showticklabels?.5:0));L("h"+aa._id+"title",{avoid:{selection:m.select(a).selectAll("g."+aa._id+"tick"),side:I.title.side,offsetLeft:J.l,offsetTop:0,maxShift:H.width},attributes:{x:b,y:c,"text-anchor":"middle"},transform:{rotate:"-90",offset:0}})}}])},h.previousPromises,function(){var b=la+I.outlinewidth/2+d.bBox(va.node()).width;wa=Aa.select("text");if(wa.node()&&!wa.classed(w.jsPlaceholder)){var c=Aa.select(".h"+
aa._id+"title-math-group").node();c=c&&-1!==["top","bottom"].indexOf(I.title.side)?d.bBox(c).width:d.bBox(Aa.node()).right-K-J.l;b=Math.max(b,c)}c=2*I.xpad+b+I.borderwidth+I.outlinewidth/2;var e=za-ka;ma.select(".cbbg").attr({x:K-I.xpad-(I.borderwidth+I.outlinewidth)/2,y:ka-da,width:Math.max(c,2),height:Math.max(e+2*da,2)}).call(g.fill,I.bgcolor).call(g.stroke,I.bordercolor).style({"stroke-width":I.borderwidth});ma.selectAll(".cboutline").attr({x:K,y:ka+I.ypad+("top"===I.title.side?sa:0),width:Math.max(la,
2),height:Math.max(e-2*I.ypad-sa,2)}).call(g.stroke,I.outlinecolor).style({fill:"None","stroke-width":I.outlinewidth});ma.attr("transform","translate("+(J.l-({center:.5,right:1}[I.xanchor]||0)*c)+","+J.t+")");b={};var f=q[I.yanchor],k=B[I.yanchor];"pixels"===I.lenmode?(b.y=I.y,b.t=e*f,b.b=e*k):(b.t=b.b=0,b.yt=I.y+I.len*f,b.yb=I.y-I.len*k);e=q[I.xanchor];f=B[I.xanchor];"pixels"===I.thicknessmode?(b.x=I.x,b.l=c*e,b.r=c*f):(c-=la,b.l=c*e,b.r=c*f,b.xl=I.x-I.thickness*e,b.xr=I.x+I.thickness*f);h.autoMargin(a,
l,b)}],a))&&ba.then&&(a._promises||[]).push(ba);if(a._context.edits.colorbarPosition){var Ca,Ga,Ja;b.init({element:ma.node(),gd:a,prepFn:function(){Ca=ma.attr("transform");r(ma)},moveFn:function(a,c){ma.attr("transform",Ca+" translate("+a+","+c+")");Ga=b.align(ja+a/J.w,Z,0,1,I.xanchor);Ja=b.align(xa-c/J.h,pa,0,1,I.yanchor);a=b.getCursor(Ga,Ja,I.xanchor,I.yanchor);r(ma,a)},doneFn:function(){r(ma);if(void 0!==Ga&&void 0!==Ja){var b={};b[E("x")]=Ga;b[E("y")]=Ja;e.call("_guiRestyle",a,b,y().index)}}})}return ba}H._infolayer.selectAll("g."+
l).remove()}function y(){for(var b=l.substr(2),c=0;c<a._fullData.length;c++){var d=a._fullData[c];if(d.uid===b)return d}}function E(a){var b="colorbar.",c=y()._module.colorbar.container;c&&(b=c+"."+b);return b+a}var I={},J;for(J in C)I[J]=null;I.fillcolor=null;I.line={color:null,width:null,dash:null};I.levels={start:null,end:null,size:null};I.filllevels=null;I.fillgradient=null;I.zrange=null;Object.keys(I).forEach(function(a){p[a]=function(b){if(!arguments.length)return I[a];I[a]=n.isPlainObject(I[a])?
n.extendFlat(I[a],b):b;return p}});p.options=function(a){for(var b in a)if("function"===typeof p[b])p[b](a[b]);return p};p._opts=I;return p}},{"../../constants/alignment":672,"../../lib":700,"../../lib/extend":690,"../../lib/setcursor":720,"../../lib/svg_text_utils":724,"../../plots/cartesian/axes":748,"../../plots/cartesian/axis_defaults":750,"../../plots/cartesian/layout_attributes":760,"../../plots/cartesian/position_defaults":763,"../../plots/plots":810,"../../registry":829,"../color":577,"../dragelement":595,
"../drawing":598,"../titles":665,"./attributes":578,"./constants":580,d3:154,tinycolor2:521}],583:[function(a,p,l){var m=a("../../lib");p.exports=function(a){return m.isPlainObject(a.colorbar)}},{"../../lib":700}],584:[function(a,p,l){var m=a("./scales.js").scales;Object.keys(m);p.exports=function(a,h){h=h||{};var e=h.cLetter||"c";a="noScale"in h?h.noScale:"marker.line"===(a||"");var f="showScaleDflt"in h?h.showScaleDflt:"z"===e,b="string"===typeof h.colorscaleDflt?m[h.colorscaleDflt]:null,k=h.editTypeOverride||
"";var l="colorAttr"in h?h.colorAttr:{z:"z",c:"color"}[e];var r=e+"auto",d=e+"min",g=e+"max",c={};c[d]=c[g]=void 0;var v={};v[r]=!1;var t={};"color"===l&&(t.color={valType:"color",arrayOk:!0,editType:k||"style"},h.anim&&(t.color.anim=!0));t[r]={valType:"boolean",dflt:!0,editType:"calc",impliedEdits:c};t[d]={valType:"number",dflt:null,editType:k||"plot",impliedEdits:v};t[g]={valType:"number",dflt:null,editType:k||"plot",impliedEdits:v};t[e+"mid"]={valType:"number",dflt:null,editType:"calc",impliedEdits:c};
t.colorscale={valType:"colorscale",editType:"calc",dflt:b,impliedEdits:{autocolorscale:!1}};t.autocolorscale={valType:"boolean",dflt:!1===h.autoColorDflt?!1:!0,editType:"calc",impliedEdits:{colorscale:void 0}};t.reversescale={valType:"boolean",dflt:!1,editType:"plot"};a||(t.showscale={valType:"boolean",dflt:f,editType:"calc"});return t}},{"./scales.js":592}],585:[function(a,p,l){var m=a("../../lib");p.exports=function(a,h,e){a=a._fullLayout;var f=e.vals,b=e.containerStr;e=e.cLetter;h=b?m.nestedProperty(h,
b).get():h;b=e+"min";var k=e+"max",l=h[e+"auto"],r=h[b],d=h[k];e=h[e+"mid"];if(!1!==l||void 0===r)r=m.aggNums(Math.min,null,f);if(!1!==l||void 0===d)d=m.aggNums(Math.max,null,f);!1!==l&&void 0!==e&&(d-e>e-r?r=e-(d-e):d-e<e-r&&(d=e+(e-r)));r===d&&(r-=.5,d+=.5);h["_"+b]=h[b]=r;h["_"+k]=h[k]=d;h.autocolorscale&&(a=0>r*d?a.colorscale.diverging:0<=r?a.colorscale.sequential:a.colorscale.sequentialminus,h._colorscale=h.colorscale=a)}},{"../../lib":700}],586:[function(a,p,l){var m=a("../../lib"),k=a("./helpers").hasColorscale;
p.exports=function(a){function e(a,b){var c=a["_"+b];void 0!==c&&(a[b]=c)}function f(a,b){if(a=b.container?m.nestedProperty(a,b.container).get():a){var c=a.zauto||a.cauto,d=b.min;b=b.max;(c||void 0===a[d])&&e(a,d);(c||void 0===a[b])&&e(a,b);a.autocolorscale&&e(a,"colorscale")}}for(var b=0;b<a.length;b++){var h=a[b],l=h._module.colorbar;if(l)if(Array.isArray(l))for(var r=0;r<l.length;r++)f(h,l[r]);else f(h,l);k(h,"marker.line")&&f(h,{container:"marker.line",min:"cmin",max:"cmax"});k(h,"line")&&f(h,
{container:"line",min:"cmin",max:"cmax"})}}},{"../../lib":700,"./helpers":588}],587:[function(a,p,l){function m(a,b){var e=b.slice(0,b.length-1);return b?h.nestedProperty(a,e).get()||{}:a}var k=a("fast-isnumeric"),h=a("../../lib"),e=a("../colorbar/has_colorbar"),f=a("../colorbar/defaults"),b=a("./scales").isValid;p.exports=function(a,h,r,d,g){var c=g.prefix,n=g.cLetter;a=m(a,c);var t=m(h,c);h=m(h._template||{},c)||{};var l=a[n+"min"],p=a[n+"max"];l=k(l)&&k(p)&&l<p;d(c+n+"auto",!l)?d(c+n+"mid"):(d(c+
n+"min"),d(c+n+"max"));n=a.colorscale;h=h.colorscale;var u;void 0!==n&&(u=!b(n));void 0!==h&&(u=!b(h));d(c+"autocolorscale",u);d(c+"colorscale");d(c+"reversescale");if(!g.noScale&&"marker.line."!==c){var q;c&&(q=e(a));d(c+"showscale",q)&&f(a,t,r)}}},{"../../lib":700,"../colorbar/defaults":581,"../colorbar/has_colorbar":583,"./scales":592,"fast-isnumeric":221}],588:[function(a,p,l){function m(a){var b=a.length,e=Array(b);--b;for(var c=0;0<=b;b--,c++){var f=a[b];e[c]=[1-f[0],f[1]]}return e}function k(a){return e({r:a[0],
g:a[1],b:a[2],a:a[3]}).toRgbString()}var h=a("d3"),e=a("tinycolor2"),f=a("fast-isnumeric"),b=a("../../lib"),n=a("../color"),u=a("./scales").isValid;p.exports={hasColorscale:function(a,d){a=d?b.nestedProperty(a,d).get()||{}:a;d=a.color;var e=!1;if(b.isArrayOrTypedArray(d))for(var c=0;c<d.length;c++)if(f(d[c])){e=!0;break}return b.isPlainObject(a)&&(e||!0===a.showscale||f(a.cmin)&&f(a.cmax)||u(a.colorscale)||b.isPlainObject(a.colorbar))},extractScale:function(a,b){var d=b.cLetter;b=a.reversescale?m(a.colorscale):
a.colorscale;var c=a[d+"min"];a=a[d+"max"];d=b.length;for(var e=Array(d),f=Array(d),h=0;h<d;h++){var k=b[h];e[h]=c+k[0]*(a-c);f[h]=k[1]}return{domain:e,range:f}},flipScale:m,makeColorScaleFunc:function(a,b){b=b||{};var d=a.domain,c=a.range;a=c.length;for(var m=Array(a),t=0;t<a;t++){var r=e(c[t]).toRgb();m[t]=[r.r,r.g,r.b,r.a]}var l=h.scale.linear().domain(d).range(m).clamp(!0);d=b.noNumericCheck;b=b.returnArray;b=d&&b?l:d?function(a){return k(l(a))}:b?function(a){return f(a)?l(a):e(a).isValid()?a:
n.defaultLine}:function(a){return f(a)?k(l(a)):e(a).isValid()?a:n.defaultLine};b.domain=l.domain;b.range=function(){return c};return b}}},{"../../lib":700,"../color":577,"./scales":592,d3:154,"fast-isnumeric":221,tinycolor2:521}],589:[function(a,p,l){l=a("./scales");var m=a("./helpers");p.exports={moduleType:"component",name:"colorscale",attributes:a("./attributes"),layoutAttributes:a("./layout_attributes"),supplyLayoutDefaults:a("./layout_defaults"),handleDefaults:a("./defaults"),crossTraceDefaults:a("./cross_trace_defaults"),
calc:a("./calc"),scales:l.scales,defaultScale:l.defaultScale,getScale:l.get,isValidScale:l.isValid,hasColorscale:m.hasColorscale,flipScale:m.flipScale,extractScale:m.extractScale,makeColorScaleFunc:m.makeColorScaleFunc}},{"./attributes":584,"./calc":585,"./cross_trace_defaults":586,"./defaults":587,"./helpers":588,"./layout_attributes":590,"./layout_defaults":591,"./scales":592}],590:[function(a,p,l){a=a("./scales").scales;p.exports={editType:"calc",sequential:{valType:"colorscale",dflt:a.Reds,editType:"calc"},
sequentialminus:{valType:"colorscale",dflt:a.Blues,editType:"calc"},diverging:{valType:"colorscale",dflt:a.RdBu,editType:"calc"}}},{"./scales":592}],591:[function(a,p,l){var m=a("../../lib"),k=a("./layout_attributes"),h=a("../../plot_api/plot_template");p.exports=function(a,f){a=a.colorscale;f=h.newContainer(f,"colorscale");m.coerce(a,f,k,"sequential",void 0);m.coerce(a,f,k,"sequentialminus",void 0);m.coerce(a,f,k,"diverging",void 0)}},{"../../lib":700,"../../plot_api/plot_template":738,"./layout_attributes":590}],
592:[function(a,p,l){function m(a){var b=0;if(!Array.isArray(a)||2>a.length||!a[0]||!a[a.length-1]||0!==+a[0][0]||1!==+a[a.length-1][0])return!1;for(var e=0;e<a.length;e++){var f=a[e];if(2!==f.length||+f[0]<b||!k(f[1]).isValid())return!1;b=+f[0]}return!0}var k=a("tinycolor2"),h={Greys:[[0,"rgb(0,0,0)"],[1,"rgb(255,255,255)"]],YlGnBu:[[0,"rgb(8,29,88)"],[.125,"rgb(37,52,148)"],[.25,"rgb(34,94,168)"],[.375,"rgb(29,145,192)"],[.5,"rgb(65,182,196)"],[.625,"rgb(127,205,187)"],[.75,"rgb(199,233,180)"],
[.875,"rgb(237,248,217)"],[1,"rgb(255,255,217)"]],Greens:[[0,"rgb(0,68,27)"],[.125,"rgb(0,109,44)"],[.25,"rgb(35,139,69)"],[.375,"rgb(65,171,93)"],[.5,"rgb(116,196,118)"],[.625,"rgb(161,217,155)"],[.75,"rgb(199,233,192)"],[.875,"rgb(229,245,224)"],[1,"rgb(247,252,245)"]],YlOrRd:[[0,"rgb(128,0,38)"],[.125,"rgb(189,0,38)"],[.25,"rgb(227,26,28)"],[.375,"rgb(252,78,42)"],[.5,"rgb(253,141,60)"],[.625,"rgb(254,178,76)"],[.75,"rgb(254,217,118)"],[.875,"rgb(255,237,160)"],[1,"rgb(255,255,204)"]],Bluered:[[0,
"rgb(0,0,255)"],[1,"rgb(255,0,0)"]],RdBu:[[0,"rgb(5,10,172)"],[.35,"rgb(106,137,247)"],[.5,"rgb(190,190,190)"],[.6,"rgb(220,170,132)"],[.7,"rgb(230,145,90)"],[1,"rgb(178,10,28)"]],Reds:[[0,"rgb(220,220,220)"],[.2,"rgb(245,195,157)"],[.4,"rgb(245,160,105)"],[1,"rgb(178,10,28)"]],Blues:[[0,"rgb(5,10,172)"],[.35,"rgb(40,60,190)"],[.5,"rgb(70,100,245)"],[.6,"rgb(90,120,245)"],[.7,"rgb(106,137,247)"],[1,"rgb(220,220,220)"]],Picnic:[[0,"rgb(0,0,255)"],[.1,"rgb(51,153,255)"],[.2,"rgb(102,204,255)"],[.3,
"rgb(153,204,255)"],[.4,"rgb(204,204,255)"],[.5,"rgb(255,255,255)"],[.6,"rgb(255,204,255)"],[.7,"rgb(255,153,255)"],[.8,"rgb(255,102,204)"],[.9,"rgb(255,102,102)"],[1,"rgb(255,0,0)"]],Rainbow:[[0,"rgb(150,0,90)"],[.125,"rgb(0,0,200)"],[.25,"rgb(0,25,255)"],[.375,"rgb(0,152,255)"],[.5,"rgb(44,255,150)"],[.625,"rgb(151,255,0)"],[.75,"rgb(255,234,0)"],[.875,"rgb(255,111,0)"],[1,"rgb(255,0,0)"]],Portland:[[0,"rgb(12,51,131)"],[.25,"rgb(10,136,186)"],[.5,"rgb(242,211,56)"],[.75,"rgb(242,143,56)"],[1,"rgb(217,30,30)"]],
Jet:[[0,"rgb(0,0,131)"],[.125,"rgb(0,60,170)"],[.375,"rgb(5,255,255)"],[.625,"rgb(255,255,0)"],[.875,"rgb(250,0,0)"],[1,"rgb(128,0,0)"]],Hot:[[0,"rgb(0,0,0)"],[.3,"rgb(230,0,0)"],[.6,"rgb(255,210,0)"],[1,"rgb(255,255,255)"]],Blackbody:[[0,"rgb(0,0,0)"],[.2,"rgb(230,0,0)"],[.4,"rgb(230,210,0)"],[.7,"rgb(255,255,255)"],[1,"rgb(160,200,255)"]],Earth:[[0,"rgb(0,0,130)"],[.1,"rgb(0,180,180)"],[.2,"rgb(40,210,40)"],[.4,"rgb(230,230,50)"],[.6,"rgb(120,70,20)"],[1,"rgb(255,255,255)"]],Electric:[[0,"rgb(0,0,0)"],
[.15,"rgb(30,0,100)"],[.4,"rgb(120,0,100)"],[.6,"rgb(160,90,0)"],[.8,"rgb(230,200,0)"],[1,"rgb(255,250,220)"]],Viridis:[[0,"#440154"],[.06274509803921569,"#48186a"],[.12549019607843137,"#472d7b"],[.18823529411764706,"#424086"],[.25098039215686274,"#3b528b"],[.3137254901960784,"#33638d"],[.3764705882352941,"#2c728e"],[.4392156862745098,"#26828e"],[.5019607843137255,"#21918c"],[.5647058823529412,"#1fa088"],[.6274509803921569,"#28ae80"],[.6901960784313725,"#3fbc73"],[.7529411764705882,"#5ec962"],[.8156862745098039,
"#84d44b"],[.8784313725490196,"#addc30"],[.9411764705882353,"#d8e219"],[1,"#fde725"]],Cividis:[[0,"rgb(0,32,76)"],[.058824,"rgb(0,42,102)"],[.117647,"rgb(0,52,110)"],[.176471,"rgb(39,63,108)"],[.235294,"rgb(60,74,107)"],[.294118,"rgb(76,85,107)"],[.352941,"rgb(91,95,109)"],[.411765,"rgb(104,106,112)"],[.470588,"rgb(117,117,117)"],[.529412,"rgb(131,129,120)"],[.588235,"rgb(146,140,120)"],[.647059,"rgb(161,152,118)"],[.705882,"rgb(176,165,114)"],[.764706,"rgb(192,177,109)"],[.823529,"rgb(209,191,102)"],
[.882353,"rgb(225,204,92)"],[.941176,"rgb(243,219,79)"],[1,"rgb(255,233,69)"]]},e=h.RdBu;p.exports={scales:h,defaultScale:e,get:function(a,b){function f(){try{a=h[a]||JSON.parse(a)}catch(u){a=b}}b||(b=e);if(!a)return b;"string"===typeof a&&(f(),"string"===typeof a&&f());return m(a)?a:b},isValid:function(a){return void 0!==h[a]?!0:m(a)}}},{tinycolor2:521}],593:[function(a,p,l){p.exports=function(a,k,h,e,f){a=(a-h)/(e-h);k=a+k/(e-h);h=(a+k)/2;return"left"===f||"bottom"===f?a:"center"===f||"middle"===
f?h:"right"===f||"top"===f?k:a<2/3-h?a:k>4/3-h?k:h}},{}],594:[function(a,p,l){var m=a("../../lib"),k=[["sw-resize","s-resize","se-resize"],["w-resize","move","e-resize"],["nw-resize","n-resize","ne-resize"]];p.exports=function(a,e,f,b){a="left"===f?0:"center"===f?1:"right"===f?2:m.constrain(Math.floor(3*a),0,2);e="bottom"===b?0:"middle"===b?1:"top"===b?2:m.constrain(Math.floor(3*e),0,2);return k[e][a]}},{"../../lib":700}],595:[function(a,p,l){function m(){var a=document.createElement("div");a.className=
"dragcover";var b=a.style;b.position="fixed";b.left=0;b.right=0;b.top=0;b.bottom=0;b.zIndex=999999999;b.background="none";document.body.appendChild(a);return a}function k(a){return h(a.changedTouches?a.changedTouches[0]:a,document.body)}var h=a("mouse-event-offset"),e=a("has-hover"),f=a("has-passive-events"),b=a("../../registry"),n=a("../../lib"),u=a("../../plots/cartesian/constants"),r=a("../../constants/interactions"),d=p.exports={};d.align=a("./align");d.getCursor=a("./cursor");a=a("./unhover");
d.unhover=a.wrapped;d.unhoverRaw=a.raw;d.init=function(a){function c(a,b,c){Math.abs(a)<c&&(a=0);Math.abs(b)<c&&(b=0);return[a,b]}function g(b){p._dragged=!1;p._dragging=!0;var c=k(b);C=c[0];w=c[1];O=b.target;x=b;I=2===b.buttons||b.ctrlKey;"undefined"===typeof b.clientX&&"undefined"===typeof b.clientY&&(b.clientX=C,b.clientY=w);J=(new Date).getTime();J-p._mouseDownTime<G?q+=1:(q=1,p._mouseDownTime=J);a.prepFn&&a.prepFn(b,C,w);e&&!I?(H=m(),H.style.cursor=window.getComputedStyle(A).cursor):e||(H=document,
E=window.getComputedStyle(document.documentElement).cursor,document.documentElement.style.cursor=window.getComputedStyle(A).cursor);document.addEventListener("mouseup",l);document.addEventListener("touchend",l);!1!==a.dragmode&&(b.preventDefault(),document.addEventListener("mousemove",h),document.addEventListener("touchmove",h))}function h(b){b.preventDefault();b=k(b);var c=Q(b[0]-C,b[1]-w,a.minDrag||u.MINDRAG);b=c[0];c=c[1];if(b||c)p._dragged=!0,d.unhover(p);p._dragged&&a.moveFn&&!I&&a.moveFn(b,
c)}function l(c){!1!==a.dragmode&&(c.preventDefault(),document.removeEventListener("mousemove",h),document.removeEventListener("touchmove",h));document.removeEventListener("mouseup",l);document.removeEventListener("touchend",l);e?n.removeElement(H):E&&(H.documentElement.style.cursor=E,E=null);if(p._dragging){p._dragging=!1;(new Date).getTime()-p._mouseDownTime>G&&(q=Math.max(q-1,1));if(p._dragged)a.doneFn&&a.doneFn();else if(a.clickFn&&a.clickFn(q,x),!I){try{var d=new MouseEvent("click",c)}catch(ca){var g=
k(c);d=document.createEvent("MouseEvents");d.initMouseEvent("click",c.bubbles,c.cancelable,c.view,c.detail,c.screenX,c.screenY,g[0],g[1],c.ctrlKey,c.altKey,c.shiftKey,c.metaKey,c.button,c.relatedTarget)}O.dispatchEvent(d)}c=p;c._dragging=!1;c._replotPending&&b.call("plot",c)}p._dragged=!1}var p=a.gd,q=1,G=r.DBLCLICKDELAY,A=a.element,C,w,J,E,H,x,O,I;p._mouseDownTime||(p._mouseDownTime=0);A.style.pointerEvents="all";A.onmousedown=g;f?(A._ontouchstart&&A.removeEventListener("touchstart",A._ontouchstart),
A._ontouchstart=g,A.addEventListener("touchstart",g,{passive:!1})):A.ontouchstart=g;var Q=a.clampFn||c};d.coverSlip=m},{"../../constants/interactions":676,"../../lib":700,"../../plots/cartesian/constants":754,"../../registry":829,"./align":593,"./cursor":594,"./unhover":596,"has-hover":402,"has-passive-events":403,"mouse-event-offset":428}],596:[function(a,p,l){var m=a("../../lib/events"),k=a("../../lib/throttle"),h=a("../../lib/get_graph_div"),e=a("../fx/constants"),f=p.exports={};f.wrapped=function(a,
n,m){a=h(a);a._fullLayout&&k.clear(a._fullLayout._uid+e.HOVERID);f.raw(a,n,m)};f.raw=function(a,e){var b=a._fullLayout,f=a._hoverdata;e||(e={});e.target&&!1===m.triggerHandler(a,"plotly_beforehover",e)||(b._hoverlayer.selectAll("g").remove(),b._hoverlayer.selectAll("line").remove(),b._hoverlayer.selectAll("circle").remove(),a._hoverdata=void 0,e.target&&f&&a.emit("plotly_unhover",{event:e,points:f}))}},{"../../lib/events":689,"../../lib/get_graph_div":696,"../../lib/throttle":725,"../fx/constants":610}],
597:[function(a,p,l){l.dash={valType:"string",values:"solid dot dash longdash dashdot longdashdot".split(" "),dflt:"solid",editType:"style"}},{}],598:[function(a,p,l){function m(a,b){return A.symbolFuncs[a%100](b)+(200<=a?"M0,0.5L0.5,0L0,-0.5L-0.5,0Z":"")}function k(a,c,d,e){var g=b.select(a.node().parentNode),f=-1!==c.indexOf("top")?"top":-1!==c.indexOf("bottom")?"bottom":"middle";c=-1!==c.indexOf("left")?"end":-1!==c.indexOf("right")?"start":"middle";var h=e?e/.8+1:0,k=(v.lineCount(a)-1)*q+1;e=
H[c]*h;d=.75*d+H[f]*h+(H[f]-1)*k*d/2;a.attr("text-anchor",c);g.attr("transform","translate("+e+","+d+")")}function h(a,b){a=a.ts||b.textfont.size;return n(a)&&0<a?a:0}function e(a,c,d,e){var g=a[0]-c[0],f=a[1]-c[1],h=d[0]-c[0],k=d[1]-c[1];d=Math.pow(g*g+f*f,.25);a=Math.pow(h*h+k*k,.25);g=(a*a*g-d*d*h)*e;e*=a*a*f-d*d*k;f=3*a*(d+a);d=3*d*(d+a);return[[b.round(c[0]+(f&&g/f),2),b.round(c[1]+(f&&e/f),2)],[b.round(c[0]-(d&&g/d),2),b.round(c[1]-(d&&e/d),2)]]}function f(a){var b=a.getAttribute("data-unformatted");
if(null!==b)return b+a.getAttribute("data-math")+a.getAttribute("text-anchor")+a.getAttribute("style")}var b=a("d3"),n=a("fast-isnumeric"),u=a("tinycolor2"),r=a("../../registry"),d=a("../color"),g=a("../colorscale"),c=a("../../lib"),v=a("../../lib/svg_text_utils"),t=a("../../constants/xmlns_namespaces"),q=a("../../constants/alignment").LINE_SPACING,B=a("../../constants/interactions").DESELECTDIM,D=a("../../traces/scatter/subtypes"),G=a("../../traces/scatter/make_bubble_size_func"),A=p.exports={};
A.font=function(a,b,e,g){c.isPlainObject(b)&&(g=b.color,e=b.size,b=b.family);b&&a.style("font-family",b);e+1&&a.style("font-size",e+"px");g&&a.call(d.fill,g)};A.setPosition=function(a,b,c){a.attr("x",b).attr("y",c)};A.setSize=function(a,b,c){a.attr("width",b).attr("height",c)};A.setRect=function(a,b,c,d,e){a.call(A.setPosition,b,c).call(A.setSize,d,e)};A.translatePoint=function(a,b,c,d){c=c.c2p(a.x);a=d.c2p(a.y);if(n(c)&&n(a)&&b.node())"text"===b.node().nodeName?b.attr("x",c).attr("y",a):b.attr("transform",
"translate("+c+","+a+")");else return!1;return!0};A.translatePoints=function(a,c,d){a.each(function(a){var e=b.select(this);A.translatePoint(a,e,c,d)})};A.hideOutsideRangePoint=function(a,b,c,d,e,g){b.attr("display",c.isPtWithinRange(a,e)&&d.isPtWithinRange(a,g)?null:"none")};A.hideOutsideRangePoints=function(a,c){if(c._hasClipOnAxisFalse){var d=c.xaxis,e=c.yaxis;a.each(function(c){c=c[0].trace;var g=c.xcalendar,f=c.ycalendar;a.selectAll("bar"===c.type?".bartext":"waterfall"===c.type?".bartext,.line":
".point,.textpoint").each(function(a){A.hideOutsideRangePoint(a,b.select(this),d,e,g,f)})})}};A.crispRound=function(a,b,c){return b&&n(b)?a._context.staticPlot?b:1>b?1:Math.round(b):c||0};A.singleLineStyle=function(a,b,c,e,g){b.style("fill","none");a=(((a||[])[0]||{}).trace||{}).line||{};c=c||a.width||0;g=g||a.dash||"";d.stroke(b,e||a.color);A.dashLine(b,g,c)};A.lineGroupStyle=function(a,c,e,g){a.style("fill","none").each(function(a){a=(((a||[])[0]||{}).trace||{}).line||{};var f=c||a.width||0,h=g||
a.dash||"";b.select(this).call(d.stroke,e||a.color).call(A.dashLine,h,f)})};A.dashLine=function(a,b,c){c=+c||0;b=A.dashStyle(b,c);a.style({"stroke-dasharray":b,"stroke-width":c+"px"})};A.dashStyle=function(a,b){b=Math.max(+b||1,3);"solid"===a?a="":"dot"===a?a=b+"px,"+b+"px":"dash"===a?a=3*b+"px,"+3*b+"px":"longdash"===a?a=5*b+"px,"+5*b+"px":"dashdot"===a?a=3*b+"px,"+b+"px,"+b+"px,"+b+"px":"longdashdot"===a&&(a=5*b+"px,"+2*b+"px,"+b+"px,"+2*b+"px");return a};A.singleFillStyle=function(a){var c=(((b.select(a.node()).data()[0]||
[])[0]||{}).trace||{}).fillcolor;c&&a.call(d.fill,c)};A.fillGroupStyle=function(a){a.style("stroke-width",0).each(function(a){var c=b.select(this);a[0].trace&&c.call(d.fill,a[0].trace.fillcolor)})};var C=a("./symbol_defs");A.symbolNames=[];A.symbolFuncs=[];A.symbolNeedLines={};A.symbolNoDot={};A.symbolNoFill={};A.symbolList=[];Object.keys(C).forEach(function(a){var b=C[a];A.symbolList=A.symbolList.concat([b.n,a,b.n+100,a+"-open"]);A.symbolNames[b.n]=a;A.symbolFuncs[b.n]=b.f;b.needLine&&(A.symbolNeedLines[b.n]=
!0);b.noDot?A.symbolNoDot[b.n]=!0:A.symbolList=A.symbolList.concat([b.n+200,a+"-dot",b.n+300,a+"-open-dot"]);b.noFill&&(A.symbolNoFill[b.n]=!0)});var w=A.symbolNames.length;A.symbolNumber=function(a){if("string"===typeof a){var b=0;0<a.indexOf("-open")&&(b=100,a=a.replace("-open",""));0<a.indexOf("-dot")&&(b+=200,a=a.replace("-dot",""));a=A.symbolNames.indexOf(a);0<=a&&(a+=b)}return a%100>=w||400<=a?0:Math.floor(Math.max(a,0))};a={x1:1,x2:0,y1:0,y2:0};p={x1:0,x2:0,y1:1,y2:0};var J=b.format("~.1f"),
E={radial:{node:"radialGradient"},radialreversed:{node:"radialGradient",reversed:!0},horizontal:{node:"linearGradient",attrs:a},horizontalreversed:{node:"linearGradient",attrs:a,reversed:!0},vertical:{node:"linearGradient",attrs:p},verticalreversed:{node:"linearGradient",attrs:p,reversed:!0}};A.gradient=function(a,e,g,f,h,k){for(var n=h.length,m=E[f],t=Array(n),r=0;r<n;r++)m.reversed?t[n-1-r]=[J(100*(1-h[r][0])),h[r][1]]:t[r]=[J(100*h[r][0]),h[r][1]];var l="g"+e._fullLayout._uid+"-"+g;e=e._fullLayout._defs.select(".gradients").selectAll("#"+
l).data([f+t.join(";")],c.identity);e.exit().remove();e.enter().append(m.node).each(function(){var a=b.select(this);m.attrs&&a.attr(m.attrs);a.attr("id",l);a=a.selectAll("stop").data(t);a.exit().remove();a.enter().append("stop");a.each(function(a){var c=u(a[1]);b.select(this).attr({offset:a[0]+"%","stop-color":d.tinyRGB(c),"stop-opacity":c.getAlpha()})})});a.style(k,"url(#"+l+")").style(k+"-opacity",null)};A.initGradients=function(a){c.ensureSingle(a._fullLayout._defs,"g","gradients").selectAll("linearGradient,radialGradient").remove()};
A.pointStyle=function(a,c,d){if(a.size()){var e=A.makePointStyleFns(c);a.each(function(a){A.singlePointStyle(a,b.select(this),c,e,d)})}};A.singlePointStyle=function(a,b,e,g,f){var h=e.marker,k=h.line;b.style("opacity",g.selectedOpacityFn?g.selectedOpacityFn(a):void 0===a.mo?h.opacity:a.mo);if(g.ms2mrc){var n="various"===a.ms||"various"===h.size?3:g.ms2mrc(a.ms);a.mrc=n;g.selectedSizeFn&&(n=a.mrc=g.selectedSizeFn(a));var t=A.symbolNumber(a.mx||h.symbol)||0;a.om=100<=t%200;b.attr("d",m(t,n))}n=!1;if(a.so){t=
k.outlierwidth;var r=k.outliercolor;k=h.outliercolor}else t=(k||{}).width,t=(a.mlw+1||t+1||(a.trace?(a.trace.marker.line||{}).width:0)+1)-1||0,r="mlc"in a?a.mlcc=g.lineScale(a.mlc):c.isArrayOrTypedArray(k.color)?d.defaultLine:k.color,c.isArrayOrTypedArray(h.color)&&(n=!0),k="mc"in a?a.mcc=g.markerScale(a.mc):h.color||"rgba(0,0,0,0)",g.selectedColorFn&&(k=g.selectedColorFn(a));if(a.om)b.call(d.stroke,k).style({"stroke-width":(t||1)+"px",fill:"none"});else{b.style("stroke-width",t+"px");var l=h.gradient;
(g=a.mgt)?n=!0:g=l&&l.type;Array.isArray(g)&&(g=g[0],E[g]||(g=0));g&&"none"!==g?((h=a.mgc)?n=!0:h=l.color,e=e.uid,n&&(e+="-"+a.i),A.gradient(b,f,e,g,[[0,h],[1,k]],"fill")):d.fill(b,k);t&&d.stroke(b,r)}};A.makePointStyleFns=function(a){var b={},d=a.marker;b.markerScale=A.tryColorscale(d,"");b.lineScale=A.tryColorscale(d,"line");r.traceIs(a,"symbols")&&(b.ms2mrc=D.isBubble(a)?G(a):function(){return(d.size||6)/2});a.selectedpoints&&c.extendFlat(b,A.makeSelectedPointStyleFns(a));return b};A.makeSelectedPointStyleFns=
function(a){var b={},d=a.marker||{},e=(a.selected||{}).marker||{},g=(a.unselected||{}).marker||{},f=e.opacity,h=g.opacity,k=void 0!==f,n=void 0!==h;if(c.isArrayOrTypedArray(d.opacity)||k||n)b.selectedOpacityFn=function(a){var b=void 0===a.mo?d.opacity:a.mo;return a.selected?k?f:b:n?h:B*b};var m=d.color,t=e.color,l=g.color;if(t||l)b.selectedColorFn=function(a){var b=a.mcc||m;return a.selected?t||b:l||b};var v=d.size,p=e.size,u=g.size,q=void 0!==p,y=void 0!==u;r.traceIs(a,"symbols")&&(q||y)&&(b.selectedSizeFn=
function(a){var b=a.mrc||v/2;return a.selected?q?p/2:b:y?u/2:b});return b};A.makeSelectedTextStyleFns=function(a){var b={},c=(a.textfont||{}).color,e=((a.selected||{}).textfont||{}).color,g=((a.unselected||{}).textfont||{}).color;b.selectedTextColorFn=function(a){var b=a.tc||c;return a.selected?e||b:g?g:e?b:d.addOpacity(b,B)};return b};A.selectedPointStyle=function(a,c){if(a.size()&&c.selectedpoints){var e=A.makeSelectedPointStyleFns(c),g=c.marker||{},f=[];e.selectedOpacityFn&&f.push(function(a,b){a.style("opacity",
e.selectedOpacityFn(b))});e.selectedColorFn&&f.push(function(a,b){d.fill(a,e.selectedColorFn(b))});e.selectedSizeFn&&f.push(function(a,b){var c=b.mx||g.symbol||0,d=e.selectedSizeFn(b);a.attr("d",m(A.symbolNumber(c),d));b.mrc2=d});f.length&&a.each(function(a){for(var c=b.select(this),d=0;d<f.length;d++)f[d](c,a)})}};A.tryColorscale=function(a,b){if(a=b?c.nestedProperty(a,b).get():a)if(b=a.color,a.colorscale&&c.isArrayOrTypedArray(b))return g.makeColorScaleFunc(g.extractScale(a,{cLetter:"c"}));return c.identity};
var H={start:1,end:-1,middle:0,bottom:1,top:-1};A.textPointStyle=function(a,d,e){if(a.size()){if(d.selectedpoints)var g=A.makeSelectedTextStyleFns(d).selectedTextColorFn;a.each(function(a){var f=b.select(this),n=c.extractOption(a,d,"tx","text");if(n||0===n){var m=a.tp||d.textposition,t=h(a,d),r=g?g(a):a.tc||d.textfont.color;f.call(A.font,a.tf||d.textfont.family,t,r).text(n).call(v.convertToTspans,e).call(k,m,t,a.mrc)}else f.remove()})}};A.selectedTextStyle=function(a,c){if(a.size()&&c.selectedpoints){var e=
A.makeSelectedTextStyleFns(c);a.each(function(a){var g=b.select(this),f=e.selectedTextColorFn(a),n=a.tp||c.textposition,m=h(a,c);d.fill(g,f);k(g,n,m,a.mrc2||a.mrc)})}};A.smoothopen=function(a,b){if(3>a.length)return"M"+a.join("L");var c="M"+a[0],d=[],g;for(g=1;g<a.length-1;g++)d.push(e(a[g-1],a[g],a[g+1],b));c+="Q"+d[0][0]+" "+a[1];for(g=2;g<a.length-1;g++)c+="C"+d[g-2][1]+" "+d[g-1][0]+" "+a[g];return c+="Q"+d[a.length-3][1]+" "+a[a.length-1]};A.smoothclosed=function(a,b){if(3>a.length)return"M"+
a.join("L")+"Z";var c="M"+a[0],d=a.length-1,g=[e(a[d],a[0],a[1],b)],f;for(f=1;f<d;f++)g.push(e(a[f-1],a[f],a[f+1],b));g.push(e(a[d-1],a[d],a[0],b));for(f=1;f<=d;f++)c+="C"+g[f-1][1]+" "+g[f][0]+" "+a[f];return c+="C"+g[d][1]+" "+g[0][0]+" "+a[0]+"Z"};var x={hv:function(a,c){return"H"+b.round(c[0],2)+"V"+b.round(c[1],2)},vh:function(a,c){return"V"+b.round(c[1],2)+"H"+b.round(c[0],2)},hvh:function(a,c){return"H"+b.round((a[0]+c[0])/2,2)+"V"+b.round(c[1],2)+"H"+b.round(c[0],2)},vhv:function(a,c){return"V"+
b.round((a[1]+c[1])/2,2)+"H"+b.round(c[0],2)+"V"+b.round(c[1],2)}},O=function(a,c){return"L"+b.round(c[0],2)+","+b.round(c[1],2)};A.steps=function(a){var c=x[a]||O;return function(a){for(var d="M"+b.round(a[0][0],2)+","+b.round(a[0][1],2),e=1;e<a.length;e++)d+=c(a[e-1],a[e]);return d}};A.makeTester=function(){var a=c.ensureSingleById(b.select("body"),"svg","js-plotly-tester",function(a){a.attr(t.svgAttrs).style({position:"absolute",left:"-10000px",top:"-10000px",width:"9000px",height:"9000px","z-index":"1"})}),
d=c.ensureSingle(a,"path","js-reference-point",function(a){a.attr("d","M0,0H1V1H0Z").style({"stroke-width":0,fill:"black"})});A.tester=a;A.testref=d};A.savedBBoxes={};var I=0;A.bBox=function(a,d,e){e||(e=f(a));var g;if(e){if(g=A.savedBBoxes[e])return c.extendFlat({},g)}else if(1===a.childNodes.length){var h=a.childNodes[0];if(e=f(h)){g=+h.getAttribute("x")||0;var k=+h.getAttribute("y")||0,n=h.getAttribute("transform");if(!n)return e=A.bBox(h,!1,e),g&&(e.left+=g,e.right+=g),k&&(e.top+=k,e.bottom+=
k),e;e+="~"+g+"~"+k+"~"+n;if(g=A.savedBBoxes[e])return c.extendFlat({},g)}}if(!d){var m=A.tester.node();a=a.cloneNode(!0);m.appendChild(a)}b.select(a).attr("transform",null).call(v.positionText,0,0);g=a.getBoundingClientRect();k=A.testref.node().getBoundingClientRect();d||m.removeChild(a);d={height:g.height,width:g.width,left:g.left-k.left,top:g.top-k.top,right:g.right-k.left,bottom:g.bottom-k.top};1E4<=I&&(A.savedBBoxes={},I=0);e&&(A.savedBBoxes[e]=d);I++;return c.extendFlat({},d)};A.setClipUrl=
function(a,b,c){b?(c=c._context,a.attr("clip-path","url("+(c._exportedPlot?"":c._baseUrl||"")+"#"+b+")")):a.attr("clip-path",null)};A.getTranslate=function(a){a=(a[a.attr?"attr":"getAttribute"]("transform")||"").replace(/.*\btranslate\((-?\d*\.?\d*)[^-\d]*(-?\d*\.?\d*)[^\d].*/,function(a,b,c){return[b,c].join(" ")}).split(" ");return{x:+a[0]||0,y:+a[1]||0}};A.setTranslate=function(a,b,c){var d=a.attr?"attr":"setAttribute",e=a[a.attr?"attr":"getAttribute"]("transform")||"";b=b||0;c=c||0;e=e.replace(/(\btranslate\(.*?\);?)/,
"").trim();e=(e+(" translate("+b+", "+c+")")).trim();a[d]("transform",e);return e};A.getScale=function(a){a=(a[a.attr?"attr":"getAttribute"]("transform")||"").replace(/.*\bscale\((\d*\.?\d*)[^\d]*(\d*\.?\d*)[^\d].*/,function(a,b,c){return[b,c].join(" ")}).split(" ");return{x:+a[0]||1,y:+a[1]||1}};A.setScale=function(a,b,c){var d=a.attr?"attr":"setAttribute",e=a[a.attr?"attr":"getAttribute"]("transform")||"";b=b||1;c=c||1;e=e.replace(/(\bscale\(.*?\);?)/,"").trim();e=(e+(" scale("+b+", "+c+")")).trim();
a[d]("transform",e);return e};var Q=/\s*sc.*/;A.setPointGroupScale=function(a,b,c){b=b||1;c=c||1;if(a){var d=1===b&&1===c?"":" scale("+b+","+c+")";a.each(function(){var a=(this.getAttribute("transform")||"").replace(Q,"");a+=d;a=a.trim();this.setAttribute("transform",a)})}};var N=/translate\([^)]*\)\s*$/;A.setTextPointsScale=function(a,c,d){a&&a.each(function(){var a=b.select(this),e=a.select("text");if(e.node()){var g=parseFloat(e.attr("x")||0);var f=parseFloat(e.attr("y")||0);e=(a.attr("transform")||
"").match(N);g=1===c&&1===d?[]:["translate("+g+","+f+")","scale("+c+","+d+")","translate("+-g+","+-f+")"];e&&g.push(e);a.attr("transform",g.join(" "))}})}},{"../../constants/alignment":672,"../../constants/interactions":676,"../../constants/xmlns_namespaces":678,"../../lib":700,"../../lib/svg_text_utils":724,"../../registry":829,"../../traces/scatter/make_bubble_size_func":1068,"../../traces/scatter/subtypes":1075,"../color":577,"../colorscale":589,"./symbol_defs":599,d3:154,"fast-isnumeric":221,
tinycolor2:521}],599:[function(a,p,l){var m=a("d3");p.exports={circle:{n:0,f:function(a){a=m.round(a,2);return"M"+a+",0A"+a+","+a+" 0 1,1 0,-"+a+"A"+a+","+a+" 0 0,1 "+a+",0Z"}},square:{n:1,f:function(a){a=m.round(a,2);return"M"+a+","+a+"H-"+a+"V-"+a+"H"+a+"Z"}},diamond:{n:2,f:function(a){a=m.round(1.3*a,2);return"M"+a+",0L0,"+a+"L-"+a+",0L0,-"+a+"Z"}},cross:{n:3,f:function(a){var h=m.round(.4*a,2);a=m.round(1.2*a,2);return"M"+a+","+h+"H"+h+"V"+a+"H-"+h+"V"+h+"H-"+a+"V-"+h+"H-"+h+"V-"+a+"H"+h+"V-"+
h+"H"+a+"Z"}},x:{n:4,f:function(a){a=m.round(.8*a/Math.sqrt(2),2);var h="l"+a+","+a,e="l"+a+",-"+a,f="l-"+a+",-"+a,b="l-"+a+","+a;return"M0,"+a+h+e+f+e+f+b+f+b+h+b+h+"Z"}},"triangle-up":{n:5,f:function(a){var h=m.round(2*a/Math.sqrt(3),2),e=m.round(a/2,2);a=m.round(a,2);return"M-"+h+","+e+"H"+h+"L0,-"+a+"Z"}},"triangle-down":{n:6,f:function(a){var h=m.round(2*a/Math.sqrt(3),2),e=m.round(a/2,2);a=m.round(a,2);return"M-"+h+",-"+e+"H"+h+"L0,"+a+"Z"}},"triangle-left":{n:7,f:function(a){var h=m.round(2*
a/Math.sqrt(3),2),e=m.round(a/2,2);a=m.round(a,2);return"M"+e+",-"+h+"V"+h+"L-"+a+",0Z"}},"triangle-right":{n:8,f:function(a){var h=m.round(2*a/Math.sqrt(3),2),e=m.round(a/2,2);a=m.round(a,2);return"M-"+e+",-"+h+"V"+h+"L"+a+",0Z"}},"triangle-ne":{n:9,f:function(a){var h=m.round(.6*a,2);a=m.round(1.2*a,2);return"M-"+a+",-"+h+"H"+h+"V"+a+"Z"}},"triangle-se":{n:10,f:function(a){var h=m.round(.6*a,2);a=m.round(1.2*a,2);return"M"+h+",-"+a+"V"+h+"H-"+a+"Z"}},"triangle-sw":{n:11,f:function(a){var h=m.round(.6*
a,2);a=m.round(1.2*a,2);return"M"+a+","+h+"H-"+h+"V-"+a+"Z"}},"triangle-nw":{n:12,f:function(a){var h=m.round(.6*a,2);a=m.round(1.2*a,2);return"M-"+h+","+a+"V-"+h+"H"+a+"Z"}},pentagon:{n:13,f:function(a){var h=m.round(.951*a,2),e=m.round(.588*a,2),f=m.round(-a,2),b=m.round(-.309*a,2);a=m.round(.809*a,2);return"M"+h+","+b+"L"+e+","+a+"H-"+e+"L-"+h+","+b+"L0,"+f+"Z"}},hexagon:{n:14,f:function(a){var h=m.round(a,2),e=m.round(a/2,2);a=m.round(a*Math.sqrt(3)/2,2);return"M"+a+",-"+e+"V"+e+"L0,"+h+"L-"+
a+","+e+"V-"+e+"L0,-"+h+"Z"}},hexagon2:{n:15,f:function(a){var h=m.round(a,2),e=m.round(a/2,2);a=m.round(a*Math.sqrt(3)/2,2);return"M-"+e+","+a+"H"+e+"L"+h+",0L"+e+",-"+a+"H-"+e+"L-"+h+",0Z"}},octagon:{n:16,f:function(a){var h=m.round(.924*a,2);a=m.round(.383*a,2);return"M-"+a+",-"+h+"H"+a+"L"+h+",-"+a+"V"+a+"L"+a+","+h+"H-"+a+"L-"+h+","+a+"V-"+a+"Z"}},star:{n:17,f:function(a){var h=1.4*a;a=m.round(.225*h,2);var e=m.round(.951*h,2),f=m.round(.363*h,2),b=m.round(.588*h,2),k=m.round(-h,2),l=m.round(-.309*
h,2),r=m.round(.118*h,2),d=m.round(.809*h,2);h=m.round(.382*h,2);return"M"+a+","+l+"H"+e+"L"+f+","+r+"L"+b+","+d+"L0,"+h+"L-"+b+","+d+"L-"+f+","+r+"L-"+e+","+l+"H-"+a+"L0,"+k+"Z"}},hexagram:{n:18,f:function(a){var h=m.round(.66*a,2),e=m.round(.38*a,2);a=m.round(.76*a,2);return"M-"+a+",0l-"+e+",-"+h+"h"+a+"l"+e+",-"+h+"l"+e+","+h+"h"+a+"l-"+e+","+h+"l"+e+","+h+"h-"+a+"l-"+e+","+h+"l-"+e+",-"+h+"h-"+a+"Z"}},"star-triangle-up":{n:19,f:function(a){var h=m.round(a*Math.sqrt(3)*.8,2),e=m.round(.8*a,2),
f=m.round(1.6*a,2);a=m.round(4*a,2);a="A "+a+","+a+" 0 0 1 ";return"M-"+h+","+e+a+h+","+e+a+"0,-"+f+a+"-"+h+","+e+"Z"}},"star-triangle-down":{n:20,f:function(a){var h=m.round(a*Math.sqrt(3)*.8,2),e=m.round(.8*a,2),f=m.round(1.6*a,2);a=m.round(4*a,2);a="A "+a+","+a+" 0 0 1 ";return"M"+h+",-"+e+a+"-"+h+",-"+e+a+"0,"+f+a+h+",-"+e+"Z"}},"star-square":{n:21,f:function(a){var h=m.round(1.1*a,2);a=m.round(2*a,2);a="A "+a+","+a+" 0 0 1 ";return"M-"+h+",-"+h+a+"-"+h+","+h+a+h+","+h+a+h+",-"+h+a+"-"+h+",-"+
h+"Z"}},"star-diamond":{n:22,f:function(a){var h=m.round(1.4*a,2);a=m.round(1.9*a,2);a="A "+a+","+a+" 0 0 1 ";return"M-"+h+",0"+a+"0,"+h+a+h+",0"+a+"0,-"+h+a+"-"+h+",0Z"}},"diamond-tall":{n:23,f:function(a){var h=m.round(.7*a,2);a=m.round(1.4*a,2);return"M0,"+a+"L"+h+",0L0,-"+a+"L-"+h+",0Z"}},"diamond-wide":{n:24,f:function(a){var h=m.round(1.4*a,2);a=m.round(.7*a,2);return"M0,"+a+"L"+h+",0L0,-"+a+"L-"+h+",0Z"}},hourglass:{n:25,f:function(a){a=m.round(a,2);return"M"+a+","+a+"H-"+a+"L"+a+",-"+a+"H-"+
a+"Z"},noDot:!0},bowtie:{n:26,f:function(a){a=m.round(a,2);return"M"+a+","+a+"V-"+a+"L-"+a+","+a+"V-"+a+"Z"},noDot:!0},"circle-cross":{n:27,f:function(a){a=m.round(a,2);return"M0,"+a+"V-"+a+"M"+a+",0H-"+a+"M"+a+",0A"+a+","+a+" 0 1,1 0,-"+a+"A"+a+","+a+" 0 0,1 "+a+",0Z"},needLine:!0,noDot:!0},"circle-x":{n:28,f:function(a){var h=m.round(a,2);a=m.round(a/Math.sqrt(2),2);return"M"+a+","+a+"L-"+a+",-"+a+"M"+a+",-"+a+"L-"+a+","+a+"M"+h+",0A"+h+","+h+" 0 1,1 0,-"+h+"A"+h+","+h+" 0 0,1 "+h+",0Z"},needLine:!0,
noDot:!0},"square-cross":{n:29,f:function(a){a=m.round(a,2);return"M0,"+a+"V-"+a+"M"+a+",0H-"+a+"M"+a+","+a+"H-"+a+"V-"+a+"H"+a+"Z"},needLine:!0,noDot:!0},"square-x":{n:30,f:function(a){a=m.round(a,2);return"M"+a+","+a+"L-"+a+",-"+a+"M"+a+",-"+a+"L-"+a+","+a+"M"+a+","+a+"H-"+a+"V-"+a+"H"+a+"Z"},needLine:!0,noDot:!0},"diamond-cross":{n:31,f:function(a){a=m.round(1.3*a,2);return"M"+a+",0L0,"+a+"L-"+a+",0L0,-"+a+"ZM0,-"+a+"V"+a+"M-"+a+",0H"+a},needLine:!0,noDot:!0},"diamond-x":{n:32,f:function(a){var h=
m.round(1.3*a,2);a=m.round(.65*a,2);return"M"+h+",0L0,"+h+"L-"+h+",0L0,-"+h+"ZM-"+a+",-"+a+"L"+a+","+a+"M-"+a+","+a+"L"+a+",-"+a},needLine:!0,noDot:!0},"cross-thin":{n:33,f:function(a){a=m.round(1.4*a,2);return"M0,"+a+"V-"+a+"M"+a+",0H-"+a},needLine:!0,noDot:!0,noFill:!0},"x-thin":{n:34,f:function(a){a=m.round(a,2);return"M"+a+","+a+"L-"+a+",-"+a+"M"+a+",-"+a+"L-"+a+","+a},needLine:!0,noDot:!0,noFill:!0},asterisk:{n:35,f:function(a){var h=m.round(1.2*a,2);a=m.round(.85*a,2);return"M0,"+h+"V-"+h+"M"+
h+",0H-"+h+"M"+a+","+a+"L-"+a+",-"+a+"M"+a+",-"+a+"L-"+a+","+a},needLine:!0,noDot:!0,noFill:!0},hash:{n:36,f:function(a){var h=m.round(a/2,2);a=m.round(a,2);return"M"+h+","+a+"V-"+a+"m-"+a+",0V"+a+"M"+a+","+h+"H-"+a+"m0,-"+a+"H"+a},needLine:!0,noFill:!0},"y-up":{n:37,f:function(a){var h=m.round(1.2*a,2),e=m.round(1.6*a,2);a=m.round(.8*a,2);return"M-"+h+","+a+"L0,0M"+h+","+a+"L0,0M0,-"+e+"L0,0"},needLine:!0,noDot:!0,noFill:!0},"y-down":{n:38,f:function(a){var h=m.round(1.2*a,2),e=m.round(1.6*a,2);
a=m.round(.8*a,2);return"M-"+h+",-"+a+"L0,0M"+h+",-"+a+"L0,0M0,"+e+"L0,0"},needLine:!0,noDot:!0,noFill:!0},"y-left":{n:39,f:function(a){var h=m.round(1.2*a,2),e=m.round(1.6*a,2);a=m.round(.8*a,2);return"M"+a+","+h+"L0,0M"+a+",-"+h+"L0,0M-"+e+",0L0,0"},needLine:!0,noDot:!0,noFill:!0},"y-right":{n:40,f:function(a){var h=m.round(1.2*a,2),e=m.round(1.6*a,2);a=m.round(.8*a,2);return"M-"+a+","+h+"L0,0M-"+a+",-"+h+"L0,0M"+e+",0L0,0"},needLine:!0,noDot:!0,noFill:!0},"line-ew":{n:41,f:function(a){a=m.round(1.4*
a,2);return"M"+a+",0H-"+a},needLine:!0,noDot:!0,noFill:!0},"line-ns":{n:42,f:function(a){a=m.round(1.4*a,2);return"M0,"+a+"V-"+a},needLine:!0,noDot:!0,noFill:!0},"line-ne":{n:43,f:function(a){a=m.round(a,2);return"M"+a+",-"+a+"L-"+a+","+a},needLine:!0,noDot:!0,noFill:!0},"line-nw":{n:44,f:function(a){a=m.round(a,2);return"M"+a+","+a+"L-"+a+",-"+a},needLine:!0,noDot:!0,noFill:!0}}},{d3:154}],600:[function(a,p,l){p.exports={visible:{valType:"boolean",editType:"calc"},type:{valType:"enumerated",values:["percent",
"constant","sqrt","data"],editType:"calc"},symmetric:{valType:"boolean",editType:"calc"},array:{valType:"data_array",editType:"calc"},arrayminus:{valType:"data_array",editType:"calc"},value:{valType:"number",min:0,dflt:10,editType:"calc"},valueminus:{valType:"number",min:0,dflt:10,editType:"calc"},traceref:{valType:"integer",min:0,dflt:0,editType:"style"},tracerefminus:{valType:"integer",min:0,dflt:0,editType:"style"},copy_ystyle:{valType:"boolean",editType:"plot"},copy_zstyle:{valType:"boolean",
editType:"style"},color:{valType:"color",editType:"style"},thickness:{valType:"number",min:0,dflt:2,editType:"style"},width:{valType:"number",min:0,editType:"plot"},editType:"calc",_deprecated:{opacity:{valType:"number",editType:"style"}}}},{}],601:[function(a,p,l){function m(a,h,m,d){var g=h["error_"+d]||{},c=[];if(g.visible&&-1!==["linear","log"].indexOf(m.type)){g=b(g);for(var n=0;n<a.length;n++){var t=a[n],r=t.i;if(void 0===r)r=n;else if(null===r)continue;var l=t[d];if(k(m.c2l(l))){var p=g(l,
r);k(p[0])&&k(p[1])&&(r=t[d+"s"]=l-p[0],t=t[d+"h"]=l+p[1],c.push(r,t))}}a=h._extremes[m._id];m=e.findExtremes(m,c,f.extendFlat({tozero:a.opts.tozero},{padded:!0}));a.min=a.min.concat(m.min);a.max=a.max.concat(m.max)}}var k=a("fast-isnumeric"),h=a("../../registry"),e=a("../../plots/cartesian/axes"),f=a("../../lib"),b=a("./compute_error");p.exports=function(a){for(var b=a.calcdata,f=0;f<b.length;f++){var d=b[f],g=d[0].trace;if(!0===g.visible&&h.traceIs(g,"errorBarsOK")){var c=e.getFromId(a,g.xaxis),
k=e.getFromId(a,g.yaxis);m(d,g,c,"x");m(d,g,k,"y")}}}},{"../../lib":700,"../../plots/cartesian/axes":748,"../../registry":829,"./compute_error":602,"fast-isnumeric":221}],602:[function(a,p,l){function m(a,h){if("percent"===a)return function(a){return Math.abs(a*h/100)};if("constant"===a)return function(){return Math.abs(h)};if("sqrt"===a)return function(a){return Math.sqrt(Math.abs(a))}}p.exports=function(a){var h=a.type,e=a.symmetric;if("data"===h){var f=a.array||[];if(e)return function(a,b){a=+f[b];
return[a,a]};var b=a.arrayminus||[];return function(a,d){a=+f[d];d=+b[d];return isNaN(a)&&isNaN(d)?[NaN,NaN]:[d||0,a||0]}}var k=m(h,a.value),l=m(h,a.valueminus);return e||void 0===a.valueminus?function(a){a=k(a);return[a,a]}:function(a){return[l(a),k(a)]}}},{}],603:[function(a,p,l){var m=a("fast-isnumeric"),k=a("../../registry"),h=a("../../lib"),e=a("../../plot_api/plot_template"),f=a("./attributes");p.exports=function(a,n,l,r){function b(a,b){return h.coerce(v,c,f,a,b)}var g="error_"+r.axis,c=e.newContainer(n,
g),v=a[g]||{};if(!1!==b("visible",void 0!==v.array||void 0!==v.value||"sqrt"===v.type)){a=b("type","array"in v?"data":"percent");g=!0;"sqrt"!==a&&(g=b("symmetric",!(("data"===a?"arrayminus":"valueminus")in v)));if("data"===a)b("array"),b("traceref"),g||(b("arrayminus"),b("tracerefminus"));else if("percent"===a||"constant"===a)b("value"),g||b("valueminus");a="copy_"+r.inherit+"style";r.inherit&&(n["error_"+r.inherit]||{}).visible&&b(a,!(v.color||m(v.thickness)||m(v.width)));r.inherit&&c[a]||(b("color",
l),b("thickness"),b("width",k.traceIs(n,"gl3d")?0:4))}}},{"../../lib":700,"../../plot_api/plot_template":738,"../../registry":829,"./attributes":600,"fast-isnumeric":221}],604:[function(a,p,l){var m=a("../../lib");l=a("../../plot_api/edit_types").overrideAll;var k=a("./attributes"),h={error_x:m.extendFlat({},k),error_y:m.extendFlat({},k)};delete h.error_x.copy_zstyle;delete h.error_y.copy_zstyle;delete h.error_y.copy_ystyle;m={error_x:m.extendFlat({},k),error_y:m.extendFlat({},k),error_z:m.extendFlat({},
k)};delete m.error_x.copy_ystyle;delete m.error_y.copy_ystyle;delete m.error_z.copy_ystyle;delete m.error_z.copy_zstyle;p.exports={moduleType:"component",name:"errorbars",schema:{traces:{scatter:h,bar:h,histogram:h,scatter3d:l(m,"calc","nested"),scattergl:l(h,"calc","nested")}},supplyDefaults:a("./defaults"),calc:a("./calc"),makeComputeError:a("./compute_error"),plot:a("./plot"),style:a("./style"),hoverInfo:function(a,f,b){(f.error_y||{}).visible&&(b.yerr=a.yh-a.y,f.error_y.symmetric||(b.yerrneg=
a.y-a.ys));(f.error_x||{}).visible&&(b.xerr=a.xh-a.x,f.error_x.symmetric||(b.xerrneg=a.x-a.xs))}}},{"../../lib":700,"../../plot_api/edit_types":731,"./attributes":600,"./calc":601,"./compute_error":602,"./defaults":603,"./plot":605,"./style":606}],605:[function(a,p,l){var m=a("d3"),k=a("fast-isnumeric"),h=a("../drawing"),e=a("../../traces/scatter/subtypes");p.exports=function(a,b,n,l){var f,d=n.xaxis,g=n.yaxis,c=l&&0<l.duration;b.each(function(b){var t=b[0].trace,r=t.error_x||{},v=t.error_y||{},p;
t.ids&&(p=function(a){return a.id});var u=e.hasMarkers(t)&&0<t.marker.maxdisplayed;v.visible||r.visible||(b=[]);t=m.select(this).selectAll("g.errorbar").data(b,p);t.exit().remove();b.length&&(r.visible||t.selectAll("path.xerror").remove(),v.visible||t.selectAll("path.yerror").remove(),t.style("opacity",1),b=t.enter().append("g").classed("errorbar",!0),c&&b.style("opacity",0).transition().duration(l.duration).style("opacity",1),h.setClipUrl(t,n.layerClipId,a),t.each(function(a){var b=m.select(this),
e=d.c2p(a.x),h=g.c2p(a.y);if(void 0!==a.yh){var n=g.c2p(a.yh);var t=g.c2p(a.ys);if(!k(t)){var p=!0;t=g.c2p(a.ys,!0)}}if(void 0!==a.xh){var q=d.c2p(a.xh);var y=d.c2p(a.xs);if(!k(y)){var A=!0;y=d.c2p(a.xs,!0)}}if(!u||a.vis){a=b.select("path.yerror");if(v.visible&&k(e)&&k(n)&&k(t)){var B=v.width;e="M"+(e-B)+","+n+"h"+2*B+"m-"+B+",0V"+t;p||(e+="m-"+B+",0h"+2*B);(f=!a.size())?a=b.append("path").style("vector-effect","non-scaling-stroke").classed("yerror",!0):c&&(a=a.transition().duration(l.duration).ease(l.easing));
a.attr("d",e)}else a.remove();p=b.select("path.xerror");r.visible&&k(h)&&k(q)&&k(y)?(n=(r.copy_ystyle?v:r).width,e="M"+q+","+(h-n)+"v"+2*n+"m0,-"+n+"H"+y,A||(e+="m0,-"+n+"v"+2*n),(f=!p.size())?p=b.append("path").style("vector-effect","non-scaling-stroke").classed("xerror",!0):c&&(p=p.transition().duration(l.duration).ease(l.easing)),p.attr("d",e)):p.remove()}}))})}},{"../../traces/scatter/subtypes":1075,"../drawing":598,d3:154,"fast-isnumeric":221}],606:[function(a,p,l){var m=a("d3"),k=a("../color");
p.exports=function(a){a.each(function(a){var e=a[0].trace;a=e.error_y||{};e=e.error_x||{};var b=m.select(this);b.selectAll("path.yerror").style("stroke-width",a.thickness+"px").call(k.stroke,a.color);e.copy_ystyle&&(e=a);b.selectAll("path.xerror").style("stroke-width",e.thickness+"px").call(k.stroke,e.color)})}},{"../color":577,d3:154}],607:[function(a,p,l){a=a("../../plots/font_attributes");p.exports={hoverlabel:{bgcolor:{valType:"color",arrayOk:!0,editType:"none"},bordercolor:{valType:"color",arrayOk:!0,
editType:"none"},font:a({arrayOk:!0,editType:"none"}),namelength:{valType:"integer",min:-1,arrayOk:!0,editType:"none"},editType:"calc"}}},{"../../plots/font_attributes":774}],608:[function(a,p,l){function m(a,f,b,h){h=h||k.identity;Array.isArray(a)&&(f[0][b]=h(a))}var k=a("../../lib"),h=a("../../registry");p.exports=function(a){function e(a){return function(b){return k.coerceHoverinfo({hoverinfo:b},{_module:a._module},n)}}var b=a.calcdata,n=a._fullLayout;for(a=0;a<b.length;a++){var l=b[a],r=l[0].trace;
if(!h.traceIs(r,"pie")){var d=h.traceIs(r,"2dMap")?m:k.fillArray;d(r.hoverinfo,l,"hi",e(r));r.hovertemplate&&d(r.hovertemplate,l,"ht");r.hoverlabel&&(d(r.hoverlabel.bgcolor,l,"hbg"),d(r.hoverlabel.bordercolor,l,"hbc"),d(r.hoverlabel.font.size,l,"hts"),d(r.hoverlabel.font.color,l,"htc"),d(r.hoverlabel.font.family,l,"htf"),d(r.hoverlabel.namelength,l,"hnl"))}}}},{"../../lib":700,"../../registry":829}],609:[function(a,p,l){var m=a("../../registry"),k=a("./hover").hover;p.exports=function(a,e,f){function b(){a.emit("plotly_click",
{points:a._hoverdata,event:e})}var h=m.getComponentMethod("annotations","onClick")(a,a._hoverdata);void 0!==f&&k(a,e,f,!0);a._hoverdata&&e&&e.target&&(h&&h.then?h.then(b):b(),e.stopImmediatePropagation&&e.stopImmediatePropagation())}},{"../../registry":829,"./hover":613}],610:[function(a,p,l){p.exports={YANGLE:60,HOVERARROWSIZE:6,HOVERTEXTPAD:3,HOVERFONTSIZE:13,HOVERFONT:"Arial, sans-serif",HOVERMINTIME:50,HOVERID:"-hover"}},{}],611:[function(a,p,l){var m=a("../../lib"),k=a("./attributes"),h=a("./hoverlabel_defaults");
p.exports=function(a,f,b,n){h(a,f,function(b,e){return m.coerce(a,f,k,b,e)},n.hoverlabel)}},{"../../lib":700,"./attributes":607,"./hoverlabel_defaults":614}],612:[function(a,p,l){function m(a,f){if(Array.isArray(f)){if(Array.isArray(a)&&Array.isArray(a[f[0]]))return a[f[0]][f[1]]}else return a[f]}var k=a("../../lib");l.getSubplot=function(a){return a.subplot||a.xaxis+a.yaxis||a.geo};l.isTraceInSubplots=function(a,f){if("splom"===a.type){var b=a.xaxes||[];a=a.yaxes||[];for(var e=0;e<b.length;e++)for(var h=
0;h<a.length;h++)if(-1!==f.indexOf(b[e]+a[h]))return!0;return!1}return-1!==f.indexOf(l.getSubplot(a))};l.flat=function(a,f){for(var b=Array(a.length),e=0;e<a.length;e++)b[e]=f;return b};l.p2c=function(a,f){for(var b=Array(a.length),e=0;e<a.length;e++)b[e]=a[e].p2c(f);return b};l.getDistanceFunction=function(a,f,b,h){return"closest"===a?h||l.quadrature(f,b):"x"===a?f:b};l.getClosest=function(a,f,b){if(!1!==b.index)0<=b.index&&b.index<a.length?b.distance=0:b.index=!1;else for(var e=0;e<a.length;e++){var h=
f(a[e]);h<=b.distance&&(b.index=e,b.distance=h)}return b};l.inbox=function(a,f,b){return 0>a*f||0===a?b:Infinity};l.quadrature=function(a,f){return function(b){var e=a(b);b=f(b);return Math.sqrt(e*e+b*b)}};l.makeEventData=function(a,f,b){var e="index"in a?a.index:a.pointNumber,h={data:f._input,fullData:f,curveNumber:f.index,pointNumber:e};if(f._indexToPoints){var k=f._indexToPoints[e];1===k.length?h.pointIndex=k[0]:h.pointIndices=k}else h.pointIndex=e;f._module.eventData?h=f._module.eventData(h,a,
f,b,e):("xVal"in a?h.x=a.xVal:"x"in a&&(h.x=a.x),"yVal"in a?h.y=a.yVal:"y"in a&&(h.y=a.y),a.xa&&(h.xaxis=a.xa),a.ya&&(h.yaxis=a.ya),void 0!==a.zLabelVal&&(h.z=a.zLabelVal));l.appendArrayPointValue(h,f,e);return h};l.appendArrayPointValue=function(a,f,b){var e=f._arrayAttrs;if(e)for(var l=0;l<e.length;l++){var r=e[l],d=h[r]||r;void 0===a[d]&&(r=k.nestedProperty(f,r).get(),r=m(r,b),void 0!==r&&(a[d]=r))}};l.appendArrayMultiPointValues=function(a,f,b){var e=f._arrayAttrs;if(e)for(var l=0;l<e.length;l++){var r=
e[l],d=h[r]||r;if(void 0===a[d]){r=k.nestedProperty(f,r).get();for(var g=Array(b.length),c=0;c<b.length;c++)g[c]=m(r,b[c]);a[d]=g}}};var h={ids:"id",locations:"location",labels:"label",values:"value","marker.colors":"color",parents:"parent"}},{"../../lib":700}],613:[function(a,p,l){function m(a,d,m,l){function v(a,b){for(var c=null,d=Infinity,e,g=0;g<a.length;g++)e=a[g].spikeDistance,e<d&&e<=b&&(c=a[g],d=e);return c}function p(a){return a?{xa:a.xa,ya:a.ya,x:void 0!==a.xSpike?a.xSpike:(a.x0+a.x1)/
2,y:void 0!==a.ySpike?a.ySpike:(a.y0+a.y1)/2,distance:a.distance,spikeDistance:a.spikeDistance,curveNumber:a.trace.index,color:a.color,pointNumber:a.index}:null}m||(m="xy");var q=Array.isArray(m)?m:[m],y=a._fullLayout,I=y._plots||[];m=I[m];var N=y._has("cartesian");m&&(m=m.overlays.map(function(a){return a.id}),q=q.concat(m));var E=q.length;m=Array(E);for(var L=Array(E),w=!1,J=0;J<E;J++){var H=q[J],x=I[H];x?(w=!0,m[J]=G.getFromId(a,x.xaxis._id),L[J]=G.getFromId(a,x.yaxis._id)):(H=y[H]._subplot,m[J]=
H.xaxis,L[J]=H.yaxis)}(I=d.hovermode||y.hovermode)&&!w&&(I="closest");if(-1===["x","y","closest"].indexOf(I)||!a.calcdata||a.querySelector(".zoombox")||a._dragging)return D.unhoverRaw(a,d);x=-1===y.hoverdistance?Infinity:y.hoverdistance;var Q=-1===y.spikedistance?Infinity:y.spikedistance;w=[];E=[];var P,M;H={hLinePoint:null,vLinePoint:null};J=!1;if(Array.isArray(d))for(I="array",P=0;P<d.length;P++){if(M=a.calcdata[d[P].curveNumber||0]){var R=M[0].trace;"skip"!==M[0].trace.hoverinfo&&(E.push(M),"h"===
R.orientation&&(J=!0))}}else{for(P=0;P<a.calcdata.length;P++)M=a.calcdata[P],R=M[0].trace,"skip"!==R.hoverinfo&&C.isTraceInSubplots(R,q)&&(E.push(M),"h"===R.orientation&&(J=!0));if(d.target){if(!1===c.triggerHandler(a,"plotly_beforehover",d))return;var O=d.target.getBoundingClientRect();var ca=d.clientX-O.left;O=d.clientY-O.top;if(0>ca||ca>m[0]._length||0>O||O>L[0]._length)return D.unhoverRaw(a,d)}else ca="xpx"in d?d.xpx:m[0]._length/2,O="ypx"in d?d.ypx:L[0]._length/2;d.pointerX=ca+m[0]._offset;d.pointerY=
O+L[0]._offset;ca="xval"in d?C.flat(q,d.xval):C.p2c(m,ca);O="yval"in d?C.flat(q,d.yval):C.p2c(L,O);if(!r(ca[0])||!r(O[0]))return g.warn("Fx.hover failed",d,a),D.unhoverRaw(a,d)}var z=Infinity;for(P=0;P<E.length;P++)if((M=E[P])&&M[0]&&M[0].trace&&!0===M[0].trace.visible&&(R=M[0].trace,-1===["carpet","contourcarpet"].indexOf(R._module.name))){if("splom"===R.type){var F=0;var K=q[F]}else K=C.getSubplot(R),F=q.indexOf(K);var ta=I;M={cd:M,trace:R,xa:m[F],ya:L[F],maxHoverDistance:x,maxSpikeDistance:Q,index:!1,
distance:Math.min(z,x),spikeDistance:Infinity,xSpike:void 0,ySpike:void 0,color:B.defaultLine,name:R.name,x0:void 0,x1:void 0,y0:void 0,y1:void 0,xLabelVal:void 0,yLabelVal:void 0,zLabelVal:void 0,text:void 0};y[K]&&(M.subplot=y[K]._subplot);y._splomScenes&&y._splomScenes[R.uid]&&(M.scene=y._splomScenes[R.uid]);K=w.length;if("array"===ta)if(F=d[P],"pointNumber"in F)M.index=F.pointNumber,ta="closest";else{ta="";if("xval"in F){var aa=F.xval;ta="x"}if("yval"in F){var ma=F.yval;ta=ta?"closest":"y"}}else aa=
ca[F],ma=O[F];if(0!==x)if(R._module&&R._module.hoverPoints){if(ta=R._module.hoverPoints(M,aa,ma,ta,y._hoverlayer))for(var Aa=0;Aa<ta.length;Aa++)F=ta[Aa],r(F.x0)&&r(F.y0)&&w.push(f(F,I))}else g.log("Unrecognized trace type in hover:",R);"closest"===I&&w.length>K&&(w.splice(0,K),z=w[0].distance);N&&0!==Q&&0===w.length&&(M.distance=Q,M.index=!1,(R=R._module.hoverPoints(M,aa,ma,"closest",y._hoverlayer))&&(R=R.filter(function(a){return a.spikeDistance<=Q})),R&&R.length)&&(M=R.filter(function(a){return a.xa.showspikes}),
M.length&&(M=M[0],r(M.x0)&&r(M.y0)&&(M=p(M),!H.vLinePoint||H.vLinePoint.spikeDistance>M.spikeDistance))&&(H.vLinePoint=M),R=R.filter(function(a){return a.ya.showspikes}),R.length&&(R=R[0],r(R.x0)&&r(R.y0)&&(M=p(R),!H.hLinePoint||H.hLinePoint.spikeDistance>M.spikeDistance))&&(H.hLinePoint=M))}q={fullLayout:y,container:y._hoverlayer,outerContainer:y._paperdiv,event:d};a._spikepoints={vLinePoint:H.vLinePoint,hLinePoint:H.hLinePoint};N&&0!==Q&&0!==w.length&&(aa=w.filter(function(a){return a.ya.showspikes}),
aa=v(aa,Q),H.hLinePoint=p(aa),aa=w.filter(function(a){return a.xa.showspikes}),aa=v(aa,Q),H.vLinePoint=p(aa));if(0===w.length)return a=D.unhoverRaw(a,d),!N||null===H.hLinePoint&&null===H.vLinePoint||b(H,q),a;N&&b(H,q);w.sort(function(a,b){return a.distance-b.distance});N=a._hoverdata;q=[];for(P=0;P<w.length;P++)aa=w[P],ma=C.makeEventData(aa,aa.trace,aa.cd),!1!==aa.hovertemplate&&(H=!1,aa.cd[aa.index]&&aa.cd[aa.index].ht&&(H=aa.cd[aa.index].ht),aa.hovertemplate=H||aa.trace.hovertemplate||!1),aa.eventData=
[ma],q.push(ma);a._hoverdata=q;E="y"===I&&(1<E.length||1<w.length)||"closest"===I&&J&&1<w.length;aa=B.combine(y.plot_bgcolor||B.background,y.paper_bgcolor);I=k(w,{hovermode:I,rotateLabels:E,bgColor:aa,container:y._hoverlayer,outerContainer:y._paperdiv,commonLabelOpts:y.hoverlabel,hoverdistance:y.hoverdistance},a);h(I,E?"xa":"ya",y);e(I,E);d.target&&d.target.tagName&&(y=A.getComponentMethod("annotations","hasClickToShow")(a,q),t(u.select(d.target),y?"pointer":""));d.target&&!l&&n(a,d,N)&&(N&&a.emit("plotly_unhover",
{event:d,points:N}),a.emit("plotly_hover",{event:d,points:a._hoverdata,xaxes:m,yaxes:L,xvals:ca,yvals:O}))}function k(a,b,c){var d=c._fullLayout,e=b.hovermode,f=b.rotateLabels,h=b.bgColor,k=b.container,n=b.outerContainer,m=b.commonLabelOpts||{},t=b.fontFamily||w.HOVERFONT,r=b.fontSize||w.HOVERFONTSIZE,l=a[0],p=l.xa,y=l.ya,A="y"===e?"yLabel":"xLabel",D=l[A],C=(String(D)||"").split(" ")[0];n=n.node().getBoundingClientRect();var G=n.top,E=n.width,N=n.height,L=void 0!==D&&l.distance<=b.hoverdistance&&
("x"===e||"y"===e);if(L){b=!0;var H;for(n=0;n<a.length;n++)if(b&&void 0===a[n].zLabel&&(b=!1),H=a[n].hoverinfo||a[n].trace.hoverinfo)if(H=Array.isArray(H)?H:H.split("+"),-1===H.indexOf("all")&&-1===H.indexOf(e)){L=!1;break}b&&(L=!1)}b=k.selectAll("g.axistext").data(L?[0]:[]);b.enter().append("g").classed("axistext",!0);b.exit().remove();b.each(function(){var b=u.select(this),d=g.ensureSingle(b,"path","",function(a){a.style({"stroke-width":"1px"})}),f=g.ensureSingle(b,"text","",function(a){a.attr("data-notex",
1)}),h=m.bgcolor||B.defaultLine,k=m.bordercolor||B.contrast(h),n=B.contrast(h);d.style({fill:h,stroke:k});f.text(D).call(q.font,m.font.family||t,m.font.size||r,m.font.color||n).call(v.positionText,0,0).call(v.convertToTspans,c);b.attr("transform","");h=f.node().getBoundingClientRect();"x"===e?(f.attr("text-anchor","middle").call(v.positionText,0,"top"===p.side?G-h.bottom-O-I:G-h.top+O+I),f="top"===p.side?"-":"",d.attr("d","M0,0L"+O+","+f+O+"H"+(I+h.width/2)+"v"+f+(2*I+h.height)+"H-"+(I+h.width/2)+
"V"+f+O+"H-"+O+"Z"),b.attr("transform","translate("+(p._offset+(l.x0+l.x1)/2)+","+(y._offset+("top"===p.side?0:y._length))+")")):(f.attr("text-anchor","right"===y.side?"start":"end").call(v.positionText,("right"===y.side?1:-1)*(I+O),G-h.top-h.height/2),f="right"===y.side?"":"-",d.attr("d","M0,0L"+f+O+","+O+"V"+(I+h.height/2)+"h"+f+(2*I+h.width)+"V-"+(I+h.height/2)+"H"+f+O+"V-"+O+"Z"),b.attr("transform","translate("+(p._offset+("right"===y.side?p._length:0))+","+(y._offset+(l.y0+l.y1)/2)+")"));a=a.filter(function(a){return void 0!==
a.zLabelVal||(a[A]||"").split(" ")[0]===C})});k=k.selectAll("g.hovertext").data(a,function(a){return[a.trace.index,a.index,a.x0,a.y0,a.name,a.attr,a.xa,a.ya||""].join()});k.enter().append("g").classed("hovertext",!0).each(function(){var a=u.select(this);a.append("rect").call(B.fill,B.addOpacity(h,.8));a.append("text").classed("name",!0);a.append("path").style("stroke-width","1px");a.append("text").classed("nums",!0).call(q.font,t,r)});k.exit().remove();k.each(function(a){var b=u.select(this).attr("transform",
""),k="",n="",m=a.bgcolor||a.color,l=B.combine(B.opacity(m)?m:B.defaultLine,h),p=B.combine(B.opacity(a.color)?a.color:B.defaultLine,h),y=a.borderColor||B.contrast(l);void 0!==a.nameOverride&&(a.name=a.nameOverride);a.name&&(d.meta&&(a.name=g.templateString(a.name,{meta:d.meta})),k=v.plainText(a.name||"",{len:a.nameLength,allowedTags:"br sub sup b i em".split(" ")}));void 0!==a.zLabel?(void 0!==a.xLabel&&(n+="x: "+a.xLabel+"\x3cbr\x3e"),void 0!==a.yLabel&&(n+="y: "+a.yLabel+"\x3cbr\x3e"),n+=(n?"z: ":
"")+a.zLabel):L&&a[e+"Label"]===D?n=a[("x"===e?"y":"x")+"Label"]||"":void 0===a.xLabel?void 0!==a.yLabel&&"scattercarpet"!==a.trace.type&&(n=a.yLabel):n=void 0===a.yLabel?a.xLabel:"("+a.xLabel+", "+a.yLabel+")";!a.text&&0!==a.text||Array.isArray(a.text)||(n+=(n?"\x3cbr\x3e":"")+a.text);void 0!==a.extraText&&(n+=(n?"\x3cbr\x3e":"")+a.extraText);""!==n||a.hovertemplate||(""===k&&b.remove(),n=k);m=c._fullLayout._d3locale;var A=a.hovertemplate||!1,C=a.hovertemplateLabels||a,w=a.eventData[0]||{};A&&(n=
g.hovertemplateString(A,C,m,w,{meta:d.meta}),n=n.replace(Q,function(a,b){k=b;return""}));m=b.select("text.nums").call(q.font,a.fontFamily||t,a.fontSize||r,a.fontColor||y).text(n).attr("data-notex",1).call(v.positionText,0,0).call(v.convertToTspans,c);A=b.select("text.name");w=C=0;k&&k!==n?(A.call(q.font,a.fontFamily||t,a.fontSize||r,p).text(k).attr("data-notex",1).call(v.positionText,0,0).call(v.convertToTspans,c),w=A.node().getBoundingClientRect(),C=w.width+2*I,w=w.height+2*I):(A.remove(),b.select("rect").remove());
b.select("path").style({fill:l,stroke:y});var H=m.node().getBoundingClientRect();n=a.xa._offset+(a.x0+a.x1)/2;l=a.ya._offset+(a.y0+a.y1)/2;y=Math.abs(a.x1-a.x0);p=Math.abs(a.y1-a.y0);var x=H.width+O+I+C;a.ty0=G-H.top;a.bx=H.width+2*I;a.by=Math.max(H.height+2*I,w);a.anchor="start";a.txwidth=H.width;a.tx2width=C;a.offset=0;f?(a.pos=n,w=l+p/2+x<=N,("top"===a.idealAlign||!w)&&0<=l-p/2-x?(l-=p/2,a.anchor="end"):w?(l+=p/2,a.anchor="start"):a.anchor="middle"):(a.pos=l,w=n+y/2+x<=E,("left"===a.idealAlign||
!w)&&0<=n-y/2-x?(n-=y/2,a.anchor="end"):w?(n+=y/2,a.anchor="start"):(a.anchor="middle",y=x/2,w=n+y-E,y=n-y,0<w&&(n-=w),0>y&&(n+=-y)));m.attr("text-anchor",a.anchor);C&&A.attr("text-anchor",a.anchor);b.attr("transform","translate("+n+","+l+")"+(f?"rotate("+J+")":""))});return k}function h(a,b,c){function d(a){var b=a[0],c=a[a.length-1];n=b.pmin-b.pos-b.dp+b.size;m=c.pos+c.dp+c.size-b.pmax;if(.01<n){for(r=a.length-1;0<=r;r--)a[r].dp+=n;k=!1}if(!(.01>m)){if(-.01>n){for(r=a.length-1;0<=r;r--)a[r].dp-=
m;k=!1}if(k){for(t=c=0;t<a.length;t++)l=a[t],l.pos+l.dp+l.size>b.pmax&&c++;for(t=a.length-1;0<=t&&!(0>=c);t--)l=a[t],l.pos>b.pmax-1&&(l.del=!0,c--);for(t=0;t<a.length&&!(0>=c);t++)if(l=a[t],l.pos<b.pmin+1)for(l.del=!0,c--,m=2*l.size,r=a.length-1;0<=r;r--)a[r].dp-=m;for(t=a.length-1;0<=t&&!(0>=c);t--)l=a[t],l.pos+l.dp+l.size>b.pmax&&(l.del=!0,c--)}}}var e=0,g=1,f=a.size(),h=Array(f);a.each(function(a,d){var e=a[b],f="x"===e._id.charAt(0);e=e.range;!d&&e&&e[0]>e[1]!==f&&(g=-1);h[d]=[{datum:a,i:d,traceIndex:a.trace.index,
dp:0,pos:a.pos,posref:a.posref,size:a.by*(f?E:1)/2,pmin:0,pmax:f?c.width:c.height}]});h.sort(function(a,b){return a[0].posref-b[0].posref||g*(b[0].traceIndex-a[0].traceIndex)});for(var k,n,m,t,r,l,v;!k&&e<=f;){e++;k=!0;for(t=0;t<h.length-1;){a=h[t];v=h[t+1];var p=a[a.length-1],u=v[0];n=p.pos+p.dp+p.size-u.pos-u.dp+u.size;if(.01<n&&p.pmin===u.pmin&&p.pmax===u.pmax){for(r=v.length-1;0<=r;r--)v[r].dp+=n;a.push.apply(a,v);h.splice(t+1,1);v=0;for(r=a.length-1;0<=r;r--)v+=a[r].dp;m=v/a.length;for(r=a.length-
1;0<=r;r--)a[r].dp-=m;k=!1}else t++}h.forEach(d)}for(t=h.length-1;0<=t;t--)for(e=h[t],r=e.length-1;0<=r;r--)f=e[r],a=f.datum,a.offset=f.dp,a.del=f.del}function e(a,b){a.each(function(a){var c=u.select(this);if(a.del)c.remove();else{var d="end"===a.anchor?-1:1,e=c.select("text.nums"),g={start:1,end:-1,middle:0}[a.anchor],f=g*(O+I),h=f+g*(a.txwidth+I),k=0,n=a.offset;"middle"===a.anchor&&(f-=a.tx2width/2,h+=a.txwidth/2+I);b&&(n*=-x,k=a.offset*H);c.select("path").attr("d","middle"===a.anchor?"M-"+(a.bx/
2+a.tx2width/2)+","+(n-a.by/2)+"h"+a.bx+"v"+a.by+"h-"+a.bx+"Z":"M0,0L"+(d*O+k)+","+(O+n)+"v"+(a.by/2-O)+"h"+d*a.bx+"v-"+a.by+"H"+(d*O+k)+"V"+(n-O)+"Z");e.call(v.positionText,f+k,n+a.ty0-a.by/2+I);a.tx2width&&(c.select("text.name").call(v.positionText,h+g*I+k,n+a.ty0-a.by/2+I),c.select("rect").call(q.setRect,h+(g-1)*a.tx2width/2+k,n-a.by/2-1,a.tx2width,a.by+2))}})}function f(a,b){function c(b,c,d){(c=k(c,d))&&(a[b]=c)}var d=a.index,e=a.trace||{},f=a.cd[0],h=a.cd[d]||{},k=Array.isArray(d)?function(a,
b){return g.castOption(f,d,a)||g.extractOption({},e,"",b)}:function(a,b){return g.extractOption(h,e,a,b)};c("hoverinfo","hi","hoverinfo");c("bgcolor","hbg","hoverlabel.bgcolor");c("borderColor","hbc","hoverlabel.bordercolor");c("fontFamily","htf","hoverlabel.font.family");c("fontSize","hts","hoverlabel.font.size");c("fontColor","htc","hoverlabel.font.color");c("nameLength","hnl","hoverlabel.namelength");a.posref="y"===b||"closest"===b&&"h"===e.orientation?a.xa._offset+(a.x0+a.x1)/2:a.ya._offset+(a.y0+
a.y1)/2;a.x0=g.constrain(a.x0,0,a.xa._length);a.x1=g.constrain(a.x1,0,a.xa._length);a.y0=g.constrain(a.y0,0,a.ya._length);a.y1=g.constrain(a.y1,0,a.ya._length);void 0!==a.xLabelVal&&(a.xLabel="xLabel"in a?a.xLabel:G.hoverLabelText(a.xa,a.xLabelVal),a.xVal=a.xa.c2d(a.xLabelVal));void 0!==a.yLabelVal&&(a.yLabel="yLabel"in a?a.yLabel:G.hoverLabelText(a.ya,a.yLabelVal),a.yVal=a.ya.c2d(a.yLabelVal));void 0!==a.zLabelVal&&void 0===a.zLabel&&(a.zLabel=String(a.zLabelVal));if(!(isNaN(a.xerr)||"log"===a.xa.type&&
0>=a.xerr)){var n=G.tickText(a.xa,a.xa.c2l(a.xerr),"hover").text;a.xLabel=void 0!==a.xerrneg?a.xLabel+(" +"+n+" / -"+G.tickText(a.xa,a.xa.c2l(a.xerrneg),"hover").text):a.xLabel+(" ± "+n);"x"===b&&(a.distance+=1)}isNaN(a.yerr)||"log"===a.ya.type&&0>=a.yerr||(n=G.tickText(a.ya,a.ya.c2l(a.yerr),"hover").text,a.yLabel=void 0!==a.yerrneg?a.yLabel+(" +"+n+" / -"+G.tickText(a.ya,a.ya.c2l(a.yerrneg),"hover").text):a.yLabel+(" ± "+n),"y"===b&&(a.distance+=1));(b=a.hoverinfo||a.trace.hoverinfo)&&"all"!==b&&
(b=Array.isArray(b)?b:b.split("+"),-1===b.indexOf("x")&&(a.xLabel=void 0),-1===b.indexOf("y")&&(a.yLabel=void 0),-1===b.indexOf("z")&&(a.zLabel=void 0),-1===b.indexOf("text")&&(a.text=void 0),-1===b.indexOf("name")&&(a.name=void 0));return a}function b(a,b){var c=b.container,e=b.fullLayout;b=b.event;var g=!!a.hLinePoint,f=!!a.vLinePoint;c.selectAll(".spikeline").remove();if(f||g){e=B.combine(e.plot_bgcolor,e.paper_bgcolor);if(g){var h=a.hLinePoint;var k=h&&h.xa;g=h&&h.ya;if("cursor"===g.spikesnap){k=
b.pointerX;var n=b.pointerY}else k=k._offset+h.x,n=g._offset+h.y;var m=1.5>d.readability(h.color,e)?B.contrast(e):h.color;h=g.spikemode;var t=g.spikethickness;m=g.spikecolor||m;var r=g._boundingBox;r=(r.left+r.right)/2<k?r.right:r.left;if(-1!==h.indexOf("toaxis")||-1!==h.indexOf("across")){if(-1!==h.indexOf("toaxis")){var l=r;var v=k}-1!==h.indexOf("across")&&(l=g._counterSpan[0],v=g._counterSpan[1]);c.insert("line",":first-child").attr({x1:l,x2:v,y1:n,y2:n,"stroke-width":t,stroke:m,"stroke-dasharray":q.dashStyle(g.spikedash,
t)}).classed("spikeline",!0).classed("crisp",!0);c.insert("line",":first-child").attr({x1:l,x2:v,y1:n,y2:n,"stroke-width":t+2,stroke:e}).classed("spikeline",!0).classed("crisp",!0)}-1!==h.indexOf("marker")&&c.insert("circle",":first-child").attr({cx:r+("right"!==g.side?t:-t),cy:n,r:t,fill:m}).classed("spikeline",!0)}if(f){k=(l=a.vLinePoint)&&l.xa;g=l&&l.ya;"cursor"===k.spikesnap?(a=b.pointerX,b=b.pointerY):(a=k._offset+l.x,b=g._offset+l.y);f=1.5>d.readability(l.color,e)?B.contrast(e):l.color;l=k.spikemode;
v=k.spikethickness;f=k.spikecolor||f;g=k._boundingBox;g=(g.top+g.bottom)/2<b?g.bottom:g.top;if(-1!==l.indexOf("toaxis")||-1!==l.indexOf("across")){if(-1!==l.indexOf("toaxis")){var p=g;var u=b}-1!==l.indexOf("across")&&(p=k._counterSpan[0],u=k._counterSpan[1]);c.insert("line",":first-child").attr({x1:a,x2:a,y1:p,y2:u,"stroke-width":v,stroke:f,"stroke-dasharray":q.dashStyle(k.spikedash,v)}).classed("spikeline",!0).classed("crisp",!0);c.insert("line",":first-child").attr({x1:a,x2:a,y1:p,y2:u,"stroke-width":v+
2,stroke:e}).classed("spikeline",!0).classed("crisp",!0)}-1!==l.indexOf("marker")&&c.insert("circle",":first-child").attr({cx:a,cy:g-("top"!==k.side?v:-v),r:v,fill:f}).classed("spikeline",!0)}}}function n(a,b,c){if(!c||c.length!==a._hoverdata.length)return!0;for(b=c.length-1;0<=b;b--){var d=c[b],e=a._hoverdata[b];if(d.curveNumber!==e.curveNumber||String(d.pointNumber)!==String(e.pointNumber)||String(d.pointNumbers)!==String(e.pointNumbers))return!0}return!1}var u=a("d3"),r=a("fast-isnumeric"),d=a("tinycolor2"),
g=a("../../lib"),c=a("../../lib/events"),v=a("../../lib/svg_text_utils"),t=a("../../lib/override_cursor"),q=a("../drawing"),B=a("../color"),D=a("../dragelement"),G=a("../../plots/cartesian/axes"),A=a("../../registry"),C=a("./helpers"),w=a("./constants"),J=w.YANGLE;a=Math.PI*J/180;var E=1/Math.sin(a),H=Math.cos(a),x=Math.sin(a),O=w.HOVERARROWSIZE,I=w.HOVERTEXTPAD;l.hover=function(a,b,c,d){a=g.getGraphDiv(a);g.throttle(a._fullLayout._uid+w.HOVERID,w.HOVERMINTIME,function(){m(a,b,c,d)})};l.loneHover=
function(a,b){a={color:a.color||B.defaultLine,x0:a.x0||a.x||0,x1:a.x1||a.x||0,y0:a.y0||a.y||0,y1:a.y1||a.y||0,xLabel:a.xLabel,yLabel:a.yLabel,zLabel:a.zLabel,text:a.text,name:a.name,idealAlign:a.idealAlign,borderColor:a.borderColor,fontFamily:a.fontFamily,fontSize:a.fontSize,fontColor:a.fontColor,trace:a.trace||{index:0,hoverinfo:""},xa:{_offset:0},ya:{_offset:0},index:0,hovertemplate:a.hovertemplate||!1,eventData:a.eventData||!1,hovertemplateLabels:a.hovertemplateLabels||!1};var c=u.select(b.container),
d=b.outerContainer?u.select(b.outerContainer):c;c={hovermode:"closest",rotateLabels:!1,bgColor:b.bgColor||B.background,container:c,outerContainer:d};b=k([a],c,b.gd);e(b,c.rotateLabels);return b.node()};l.multiHovers=function(a,b){Array.isArray(a)||(a=[a]);a=a.map(function(a){return{color:a.color||B.defaultLine,x0:a.x0||a.x||0,x1:a.x1||a.x||0,y0:a.y0||a.y||0,y1:a.y1||a.y||0,xLabel:a.xLabel,yLabel:a.yLabel,zLabel:a.zLabel,text:a.text,name:a.name,idealAlign:a.idealAlign,borderColor:a.borderColor,fontFamily:a.fontFamily,
fontSize:a.fontSize,fontColor:a.fontColor,trace:a.trace||{index:0,hoverinfo:""},xa:{_offset:0},ya:{_offset:0},index:0,hovertemplate:a.hovertemplate||!1,eventData:a.eventData||!1,hovertemplateLabels:a.hovertemplateLabels||!1}});var c=u.select(b.container),d=b.outerContainer?u.select(b.outerContainer):c;c={hovermode:"closest",rotateLabels:!1,bgColor:b.bgColor||B.background,container:c,outerContainer:d};b=k(a,c,b.gd);var g=0;b.sort(function(a,b){return a.y0-b.y0}).each(function(a){var b=a.y0-a.by/2;
a.offset=b-5<g?g-b+5:0;g=b+a.by+a.offset});e(b,c.rotateLabels);return b.node()};var Q=/<extra>([\s\S]*)<\/extra>/},{"../../lib":700,"../../lib/events":689,"../../lib/override_cursor":711,"../../lib/svg_text_utils":724,"../../plots/cartesian/axes":748,"../../registry":829,"../color":577,"../dragelement":595,"../drawing":598,"./constants":610,"./helpers":612,d3:154,"fast-isnumeric":221,tinycolor2:521}],614:[function(a,p,l){var m=a("../../lib");p.exports=function(a,h,e,f){f=f||{};e("hoverlabel.bgcolor",
f.bgcolor);e("hoverlabel.bordercolor",f.bordercolor);e("hoverlabel.namelength",f.namelength);m.coerceFont(e,"hoverlabel.font",f.font)}},{"../../lib":700}],615:[function(a,p,l){p.exports=function(a,k){a=a||{};k=k||{};k=k.keys||[];if(0<k.length){for(var h=[],e=0;e<k.length;e++)h[e]="`"+k[e]+"`";1!==k.length&&(h.slice(0,-1).join(", "),h.slice(-1))}k={valType:"string",dflt:"",editType:a.editType||"none"};!1!==a.arrayOk&&(k.arrayOk=!0);return k}},{}],616:[function(a,p,l){var m=a("d3"),k=a("../../lib");
l=a("../dragelement");var h=a("./helpers"),e=a("./layout_attributes"),f=a("./hover");p.exports={moduleType:"component",name:"fx",constants:a("./constants"),schema:{layout:e},attributes:a("./attributes"),layoutAttributes:e,supplyLayoutGlobalDefaults:a("./layout_global_defaults"),supplyDefaults:a("./defaults"),supplyLayoutDefaults:a("./layout_defaults"),calc:a("./calc"),getDistanceFunction:h.getDistanceFunction,getClosest:h.getClosest,inbox:h.inbox,quadrature:h.quadrature,appendArrayPointValue:h.appendArrayPointValue,
castHoverOption:function(a,e,f){return k.castOption(a,e,"hoverlabel."+f)},castHoverinfo:function(a,e,f){return k.castOption(a,f,"hoverinfo",function(b){return k.coerceHoverinfo({hoverinfo:b},{_module:a._module},e)})},hover:f.hover,unhover:l.unhover,loneHover:f.loneHover,multiHovers:f.multiHovers,loneUnhover:function(a){a=k.isD3Selection(a)?a:m.select(a);a.selectAll("g.hovertext").remove();a.selectAll(".spikeline").remove()},click:a("./click")}},{"../../lib":700,"../dragelement":595,"./attributes":607,
"./calc":608,"./click":609,"./constants":610,"./defaults":611,"./helpers":612,"./hover":613,"./layout_attributes":617,"./layout_defaults":618,"./layout_global_defaults":619,d3:154}],617:[function(a,p,l){l=a("./constants");a=a("../../plots/font_attributes")({editType:"none"});a.family.dflt=l.HOVERFONT;a.size.dflt=l.HOVERFONTSIZE;p.exports={clickmode:{valType:"flaglist",flags:["event","select"],dflt:"event",editType:"plot",extras:["none"]},dragmode:{valType:"enumerated",values:["zoom","pan","select",
"lasso","orbit","turntable",!1],dflt:"zoom",editType:"modebar"},hovermode:{valType:"enumerated",values:["x","y","closest",!1],editType:"modebar"},hoverdistance:{valType:"integer",min:-1,dflt:20,editType:"none"},spikedistance:{valType:"integer",min:-1,dflt:20,editType:"none"},hoverlabel:{bgcolor:{valType:"color",editType:"none"},bordercolor:{valType:"color",editType:"none"},font:a,namelength:{valType:"integer",min:-1,dflt:15,editType:"none"},editType:"none"},selectdirection:{valType:"enumerated",values:["h",
"v","d","any"],dflt:"any",editType:"none"}}},{"../../plots/font_attributes":774,"./constants":610}],618:[function(a,p,l){function m(a,f){f=f._scatterStackOpts||{};for(var b=0;b<a.length;b++){var e=a[b],h=(f[e.xaxis+e.yaxis]||{})[e.stackgroup]||{};if("h"!==e.orientation&&"h"!==h.orientation)return!1}return!0}var k=a("../../lib"),h=a("./layout_attributes");p.exports=function(a,f,b){function e(b,e){return k.coerce(a,f,h,b,e)}var l=e("clickmode");"select"===e("dragmode")&&e("selectdirection");f._has("cartesian")?
-1<l.indexOf("select")?b="closest":(f._isHoriz=m(b,f),b=f._isHoriz?"y":"x"):b="closest";e("hovermode",b)&&(e("hoverdistance"),e("spikedistance"));b=f._has("mapbox");l=f._has("geo");var r=f._basePlotModules.length;"zoom"===f.dragmode&&((b||l)&&1===r||b&&l&&2===r)&&(f.dragmode="pan")}},{"../../lib":700,"./layout_attributes":617}],619:[function(a,p,l){var m=a("../../lib"),k=a("./hoverlabel_defaults"),h=a("./layout_attributes");p.exports=function(a,f){k(a,f,function(b,e){return m.coerce(a,f,h,b,e)})}},
{"../../lib":700,"./hoverlabel_defaults":614,"./layout_attributes":617}],620:[function(a,p,l){function m(a,b,e){b=b[e+"axes"];a=Object.keys((a._splomAxes||{})[e]||{});if(Array.isArray(b))return b;if(a.length)return a}function k(a,b,e,c,f,h){e=b(a+"gap",e);var d=b("domain."+a);b(a+"side",c);a=Array(f);b=d[0];d=(d[1]-b)/(f-e);e=d*(1-e);for(c=0;c<f;c++){var g=b+d*c;a[h?f-1-c:c]=[g,g+e]}return a}function h(a,b,e,c,f){function d(a,d){-1!==b.indexOf(d)&&void 0===c[d]?(g[a]=d,c[d]=a):g[a]=""}var g=Array(e),
h;if(Array.isArray(a))for(h=0;h<e;h++)d(h,a[h]);else for(d(0,f),h=1;h<e;h++)d(h,f+(h+1));return g}var e=a("../../lib");l=a("../../lib/regex").counter;var f=a("../../plots/domain").attributes,b=a("../../plots/cartesian/constants").idRegex,n=a("../../plot_api/plot_template"),u={rows:{valType:"integer",min:1,editType:"plot"},roworder:{valType:"enumerated",values:["top to bottom","bottom to top"],dflt:"top to bottom",editType:"plot"},columns:{valType:"integer",min:1,editType:"plot"},subplots:{valType:"info_array",
freeLength:!0,dimensions:2,items:{valType:"enumerated",values:[l("xy").toString(),""],editType:"plot"},editType:"plot"},xaxes:{valType:"info_array",freeLength:!0,items:{valType:"enumerated",values:[b.x.toString(),""],editType:"plot"},editType:"plot"},yaxes:{valType:"info_array",freeLength:!0,items:{valType:"enumerated",values:[b.y.toString(),""],editType:"plot"},editType:"plot"},pattern:{valType:"enumerated",values:["independent","coupled"],dflt:"coupled",editType:"plot"},xgap:{valType:"number",min:0,
max:1,editType:"plot"},ygap:{valType:"number",min:0,max:1,editType:"plot"},domain:f({name:"grid",editType:"plot",noGridCell:!0},{}),xside:{valType:"enumerated",values:["bottom","bottom plot","top plot","top"],dflt:"bottom plot",editType:"plot"},yside:{valType:"enumerated",values:["left","left plot","right plot","right"],dflt:"left plot",editType:"plot"},editType:"plot"};p.exports={moduleType:"component",name:"grid",schema:{layout:{grid:u}},layoutAttributes:u,sizeDefaults:function(a,b){function d(a,
b){return e.coerce(c,C,u,a,b)}var c=a.grid||{},f=m(b,c,"x"),h=m(b,c,"y");if(a.grid||f||h){a=Array.isArray(c.subplots)&&Array.isArray(c.subplots[0]);var r=Array.isArray(f),l=Array.isArray(h),p=r&&f!==c.xaxes&&l&&h!==c.yaxes;if(a){var q=c.subplots.length;var A=c.subplots[0].length}else l&&(q=h.length),r&&(A=f.length);var C=n.newContainer(b,"grid");f=d("rows",q);A=d("columns",A);if(1<f*A){a||r||l||"independent"===d("pattern")&&(a=!0);C._hasSubplotGrid=a;r="top to bottom"===d("roworder");l=a?.3:.1;if(p&&
b._splomGridDflt){var w=b._splomGridDflt.xside;var J=b._splomGridDflt.yside}C._domains={x:k("x",d,a?.2:.1,w,A),y:k("y",d,l,J,f,r)}}else delete b.grid}},contentDefaults:function(a,b){var d=b.grid;if(d&&d._domains){var c=a.grid||{};a=b._subplots;var e=d._hasSubplotGrid,f=d.rows,k=d.columns,n="independent"===d.pattern,r,l=d._axisMap={};if(e){var p=c.subplots||[];var u=d.subplots=Array(f);var q=1;for(b=0;b<f;b++){var w=u[b]=Array(k),E=p[b]||[];for(r=0;r<k;r++)if(n?(c=1===q?"xy":"x"+q+"y"+q,q++):c=E[r],
w[r]="",-1!==a.cartesian.indexOf(c)){var H=c.indexOf("y");var x=c.slice(0,H);H=c.slice(H);void 0!==l[x]&&l[x]!==r||void 0!==l[H]&&l[H]!==b||(w[r]=c,l[x]=r,l[H]=b)}}}else H=m(b,c,"x"),b=m(b,c,"y"),d.xaxes=h(H,a.xaxis,k,l,"x"),d.yaxes=h(b,a.yaxis,f,l,"y");n=d._anchors={};r="top to bottom"===d.roworder;for(var O in l)if(b=O.charAt(0),c=d[b+"side"],8>c.length)n[O]="free";else if("x"===b)if("t"===c.charAt(0)===r?(b=0,p=1,q=f):(b=f-1,q=p=-1),e)for(x=l[O];b!==q;b+=p){if(c=u[b][x])if(H=c.indexOf("y"),c.slice(0,
H)===O){n[O]=c.slice(H);break}}else for(;b!==q;b+=p){if(H=d.yaxes[b],-1!==a.cartesian.indexOf(O+H)){n[O]=H;break}}else if("l"===c.charAt(0)?(b=0,p=1,q=k):(b=k-1,q=p=-1),e)for(x=l[O];b!==q;b+=p){if(c=u[x][b])if(H=c.indexOf("y"),c.slice(H)===O){n[O]=c.slice(0,H);break}}else for(;b!==q;b+=p)if(x=d.xaxes[b],-1!==a.cartesian.indexOf(x+O)){n[O]=x;break}}}}},{"../../lib":700,"../../lib/regex":716,"../../plot_api/plot_template":738,"../../plots/cartesian/constants":754,"../../plots/domain":773}],621:[function(a,
p,l){l=a("../../plots/cartesian/constants");a=a("../../plot_api/plot_template").templatedArray;p.exports=a("image",{visible:{valType:"boolean",dflt:!0,editType:"arraydraw"},source:{valType:"string",editType:"arraydraw"},layer:{valType:"enumerated",values:["below","above"],dflt:"above",editType:"arraydraw"},sizex:{valType:"number",dflt:0,editType:"arraydraw"},sizey:{valType:"number",dflt:0,editType:"arraydraw"},sizing:{valType:"enumerated",values:["fill","contain","stretch"],dflt:"contain",editType:"arraydraw"},
opacity:{valType:"number",min:0,max:1,dflt:1,editType:"arraydraw"},x:{valType:"any",dflt:0,editType:"arraydraw"},y:{valType:"any",dflt:0,editType:"arraydraw"},xanchor:{valType:"enumerated",values:["left","center","right"],dflt:"left",editType:"arraydraw"},yanchor:{valType:"enumerated",values:["top","middle","bottom"],dflt:"top",editType:"arraydraw"},xref:{valType:"enumerated",values:["paper",l.idRegex.x.toString()],dflt:"paper",editType:"arraydraw"},yref:{valType:"enumerated",values:["paper",l.idRegex.y.toString()],
dflt:"paper",editType:"arraydraw"},editType:"arraydraw"})},{"../../plot_api/plot_template":738,"../../plots/cartesian/constants":754}],622:[function(a,p,l){var m=a("fast-isnumeric"),k=a("../../lib/to_log_range");p.exports=function(a,e,f,b){e=e||{};var h="log"===f&&"linear"===e.type;f="linear"===f&&"log"===e.type;if(h||f){a=a._fullLayout.images;f=e._id.charAt(0);for(var l,r,d=0;d<a.length;d++)if(l=a[d],r="images["+d+"].",l[f+"ref"]===e._id){var g=l[f];l=l["size"+f];h?(g=k(g,e.range),l=l/Math.pow(10,
g)/2,l=2*Math.log(l+Math.sqrt(1+l*l))/Math.LN10):(g=Math.pow(10,g),l=g*(Math.pow(10,l/2)-Math.pow(10,-l/2)));m(g)?m(l)||(l=null):l=g=null;b(r+f,g);b(r+"size"+f,l)}}}},{"../../lib/to_log_range":726,"fast-isnumeric":221}],623:[function(a,p,l){function m(a,e,m){function b(b,c){return k.coerce(a,e,f,b,c)}var d=b("source");if(!b("visible",!!d))return e;b("layer");b("xanchor");b("yanchor");b("sizex");b("sizey");b("sizing");b("opacity");m={_fullLayout:m};d=["x","y"];for(var g=0;2>g;g++){var c=d[g],n=h.coerceRef(a,
e,m,c,"paper");"paper"!==n&&h.getFromId(m,n)._imgIndices.push(e._index);h.coercePosition(e,m,b,n,c,0)}return e}var k=a("../../lib"),h=a("../../plots/cartesian/axes"),e=a("../../plots/array_container_defaults"),f=a("./attributes");p.exports=function(a,f){e(a,f,{name:"images",handleItemDefaults:m})}},{"../../lib":700,"../../plots/array_container_defaults":744,"../../plots/cartesian/axes":748,"./attributes":621}],624:[function(a,p,l){var m=a("d3"),k=a("../drawing"),h=a("../../plots/cartesian/axes"),
e=a("../../constants/xmlns_namespaces");p.exports=function(a){function b(b){var c=m.select(this);if(!this.img||this.img.src!==b.source){c.attr("xmlns",e.svg);var d=new Promise(function(a){function d(){c.remove();a()}var e=new Image;this.img=e;e.setAttribute("crossOrigin","anonymous");e.onerror=d;e.onload=function(){var b=document.createElement("canvas");b.width=this.width;b.height=this.height;b.getContext("2d").drawImage(this,0,0);b=b.toDataURL("image/png");c.attr("xlink:href",b);a()};c.on("error",
d);e.src=b.source}.bind(this));a._promises.push(d)}}function f(b){var c=m.select(this),d=h.getFromId(a,b.xref),e=h.getFromId(a,b.yref),g=l._size,f=d?Math.abs(d.l2p(b.sizex)-d.l2p(0)):b.sizex*g.w,n=e?Math.abs(e.l2p(b.sizey)-e.l2p(0)):b.sizey*g.h,t=f*q.x[b.xanchor].offset,r=n*q.y[b.yanchor].offset,v=q.x[b.xanchor].sizing+q.y[b.yanchor].sizing;t=(d?d.r2p(b.x)+d._offset:b.x*g.w+g.l)+t;g=(e?e.r2p(b.y)+e._offset:g.h-b.y*g.h+g.t)+r;switch(b.sizing){case "fill":v+=" slice";break;case "stretch":v="none"}c.attr({x:t,
y:g,width:f,height:n,preserveAspectRatio:v,opacity:b.opacity});b=(d?d._id:"")+(e?e._id:"");k.setClipUrl(c,b?"clip"+l._uid+b:null,a)}var l=a._fullLayout,r=[],d={},g=[],c;for(c=0;c<l.images.length;c++){var v=l.images[c];if(v.visible)if("below"===v.layer&&"paper"!==v.xref&&"paper"!==v.yref){var t=v.xref+v.yref;var p=l._plots[t];p?(p.mainplot&&(t=p.mainplot.id),d[t]||(d[t]=[]),d[t].push(v)):g.push(v)}else"above"===v.layer?r.push(v):g.push(v)}var q={x:{left:{sizing:"xMin",offset:0},center:{sizing:"xMid",
offset:-.5},right:{sizing:"xMax",offset:-1}},y:{top:{sizing:"YMin",offset:0},middle:{sizing:"YMid",offset:-.5},bottom:{sizing:"YMax",offset:-1}}};c=l._imageLowerLayer.selectAll("image").data(g);t=l._imageUpperLayer.selectAll("image").data(r);c.enter().append("image");t.enter().append("image");c.exit().remove();t.exit().remove();c.each(function(a){b.bind(this)(a);f.bind(this)(a)});t.each(function(a){b.bind(this)(a);f.bind(this)(a)});r=Object.keys(l._plots);for(c=0;c<r.length;c++)t=r[c],g=l._plots[t],
g.imagelayer&&(t=g.imagelayer.selectAll("image").data(d[t]||[]),t.enter().append("image"),t.exit().remove(),t.each(function(a){b.bind(this)(a);f.bind(this)(a)}))}},{"../../constants/xmlns_namespaces":678,"../../plots/cartesian/axes":748,"../drawing":598,d3:154}],625:[function(a,p,l){p.exports={moduleType:"component",name:"images",layoutAttributes:a("./attributes"),supplyLayoutDefaults:a("./defaults"),includeBasePlot:a("../../plots/cartesian/include_components")("images"),draw:a("./draw"),convertCoords:a("./convert_coords")}},
{"../../plots/cartesian/include_components":758,"./attributes":621,"./convert_coords":622,"./defaults":623,"./draw":624}],626:[function(a,p,l){l=a("../../plots/font_attributes");a=a("../color/attributes");p.exports={bgcolor:{valType:"color",editType:"legend"},bordercolor:{valType:"color",dflt:a.defaultLine,editType:"legend"},borderwidth:{valType:"number",min:0,dflt:0,editType:"legend"},font:l({editType:"legend"}),orientation:{valType:"enumerated",values:["v","h"],dflt:"v",editType:"legend"},traceorder:{valType:"flaglist",
flags:["reversed","grouped"],extras:["normal"],editType:"legend"},tracegroupgap:{valType:"number",min:0,dflt:10,editType:"legend"},x:{valType:"number",min:-2,max:3,dflt:1.02,editType:"legend"},xanchor:{valType:"enumerated",values:["auto","left","center","right"],dflt:"left",editType:"legend"},y:{valType:"number",min:-2,max:3,dflt:1,editType:"legend"},yanchor:{valType:"enumerated",values:["auto","top","middle","bottom"],dflt:"auto",editType:"legend"},uirevision:{valType:"any",editType:"none"},valign:{valType:"enumerated",
values:["top","middle","bottom"],dflt:"middle",editType:"legend"},editType:"legend"}},{"../../plots/font_attributes":774,"../color/attributes":576}],627:[function(a,p,l){p.exports={scrollBarWidth:6,scrollBarMinHeight:20,scrollBarColor:"#808BA4",scrollBarMargin:4,textOffsetX:40}},{}],628:[function(a,p,l){var m=a("../../registry"),k=a("../../lib"),h=a("../../plot_api/plot_template"),e=a("./attributes"),f=a("../../plots/layout_attributes"),b=a("./helpers");p.exports=function(a,l,r){function d(a,b){return k.coerce(g,
w,e,a,b)}for(var g=a.legend||{},c=0,n=!1,t="normal",p,u,q,G,A=0;A<r.length;A++){var C=r[A];if(C.visible){if(C.showlegend||C._dfltShowLegend)c++,C.showlegend&&(n=!0,(m.traceIs(C,"pie")||!0===C._input.showlegend)&&c++);if(m.traceIs(C,"bar")&&"stack"===l.barmode||-1!==["tonextx","tonexty"].indexOf(C.fill))t=b.isGrouped({traceorder:t})?"grouped+reversed":"reversed";void 0!==C.legendgroup&&""!==C.legendgroup&&(t=b.isReversed({traceorder:t})?"reversed+grouped":"grouped")}}r=k.coerce(a,l,f,"showlegend",
n&&1<c);if(!1!==r||g.uirevision){var w=h.newContainer(l,"legend");d("uirevision",l.uirevision);!1!==r&&(d("bgcolor",l.paper_bgcolor),d("bordercolor"),d("borderwidth"),k.coerceFont(d,"font",l.font),d("orientation"),"h"===w.orientation&&(a=a.xaxis,m.getComponentMethod("rangeslider","isVisible")(a)?(p=0,q="left",u=1.1,G="bottom"):(p=0,q="left",u=-.1,G="top")),d("traceorder",t),b.isGrouped(l.legend)&&d("tracegroupgap"),d("x",p),d("xanchor",q),d("y",u),d("yanchor",G),d("valign"),k.noneOrAll(g,w,["x","y"]))}}},
{"../../lib":700,"../../plot_api/plot_template":738,"../../plots/layout_attributes":801,"../../registry":829,"./attributes":626,"./helpers":632}],629:[function(a,p,l){function m(a,b,d,e,g){var f=d.data()[0][0].trace;g={event:g,node:d.node(),curveNumber:f.index,expandedIndex:f._expandedIndex,data:a.data,layout:a.layout,frames:a._transitionData._frames,config:a._context,fullData:a._fullData,fullLayout:a._fullLayout};f._group&&(g.group=f._group);"pie"===f.type&&(g.label=d.datum()[0].label);!1!==c.triggerHandler(a,
"plotly_legendclick",g)&&(1===e?b._clickTimeout=setTimeout(function(){D(d,a,e)},O):2===e&&(b._clickTimeout&&clearTimeout(b._clickTimeout),a._legendMouseDownTime=0,!1!==c.triggerHandler(a,"plotly_legenddoubleclick",g)&&D(d,a,e)))}function k(a,b,c){function d(c){B.convertToTspans(c,b,function(){var c=a.data()[0][0];if(c.trace.showlegend){var d=a.select("g[class*\x3dmath-group]"),e=d.node(),g=b._fullLayout.legend.font.size*C;if(e){var f=t.bBox(e);e=f.height;f=f.width;t.setTranslate(d,0,e/4)}else{d=a.select(".legendtext");
var h=B.lineCount(d);f=d.node();e=g*h;f=f?t.bBox(f).width:0;B.positionText(d,G.textOffsetX,g*(.3+(1-h)/2))}c.lineHeight=g;c.height=Math.max(e,16)+3;c.width=f}else a.remove()})}var e=a.data()[0][0],f=b._fullLayout,k=e.trace,n=g.traceIs(k,"pie"),m=k.index,l=b._context.edits.legendText&&!n;k=n?e.label:k.name;f.meta&&(k=r.templateString(k,{meta:f.meta}));n=r.ensureSingle(a,"text","legendtext");n.attr("text-anchor","start").classed("user-select-none",!0).call(t.font,f.legend.font).text(l?h(k,c):k);B.positionText(n,
G.textOffsetX,0);if(l)n.call(B.makeEditable,{gd:b,text:k}).call(d).on("edit",function(a){this.text(h(a,c)).call(d);var f=e.trace._fullInput||{},k={};g.hasTransform(f,"groupby")?(k=g.getTransformIndices(f,"groupby"),f=r.keyedContainer(f,"transforms["+k[k.length-1]+"].styles","target","value.name"),f.set(e.trace._group,a),k=f.constructUpdate()):k.name=a;return g.call("_guiRestyle",b,k,m)});else d(n)}function h(a,b){b=Math.max(4,b);if(a&&a.trim().length>=b/2)return a;a=a||"";for(b-=a.length;0<b;b--)a+=
" ";return a}function e(a,b){var c,d=1,e=r.ensureSingle(a,"rect","legendtoggle",function(a){a.style("cursor","pointer").attr("pointer-events","all").call(q.fill,"rgba(0,0,0,0)")});e.on("mousedown",function(){c=(new Date).getTime();c-b._legendMouseDownTime<O?d+=1:(d=1,b._legendMouseDownTime=c)});e.on("mouseup",function(){if(!b._dragged&&!b._editing){var c=b._fullLayout.legend;(new Date).getTime()-b._legendMouseDownTime>O&&(d=Math.max(d-1,1));m(b,c,a,d,u.event)}})}function f(a,b,c){var d=a._fullLayout,
e=d.legend,g=e.borderwidth,f=x.isGrouped(e),h=0;e._width=0;e._height=0;if(x.isVertical(e))f&&b.each(function(a,b){t.setTranslate(this,0,b*e.tracegroupgap)}),c.each(function(a){var b=a[0];a=b.height;b=b.width;t.setTranslate(this,g,5+g+e._height+a/2);e._height+=a;e._width=Math.max(e._width,b)}),e._width+=45+2*g,e._height+=10+2*g,f&&(e._height+=(e._lgroupsLength-1)*e.tracegroupgap),h=40;else if(f){var k=0;f=0;var n=b.data(),m;for(m=0;m<n.length;m++){var l=n[m],v=l.map(function(a){return a[0].width});
v=r.aggNums(Math.max,null,v);l=l.reduce(function(a,b){return a+b[0].height},0);f=Math.max(f,v);k=Math.max(k,l)}f=f+5+40;var p=[e._width],q=[];for(m=l=0;m<n.length;m++)d._size.w<g+e._width+5+f?(p[p.length-1]=p[0],e._width=f,l++):e._width+=f+g,v=l*k,v+=0<l?e.tracegroupgap:0,q.push(v),p.push(e._width);b.each(function(a,b){t.setTranslate(this,p[b],q[b])});b.each(function(){var a=0;u.select(this).selectAll("g.traces").each(function(b){b=b[0].height;t.setTranslate(this,0,5+g+a+b/2);a+=b})});e._height=10+
2*g+(q[q.length-1]+k);b=Math.max.apply(null,p);e._width=b+f+40;e._width+=2*g}else{var y=0,A=0,B=0,C=0,D=0;c.each(function(a){B=Math.max(40+a[0].width,B);D+=40+a[0].width+5});var G=d._size.w>g+D-5;c.each(function(a){var b=a[0];a=G?40+a[0].width:B;g+C+5+a>d._size.w&&(C=0,y+=A,e._height+=A,A=0);t.setTranslate(this,g+C,5+g+b.height/2+y);e._width+=5+a;C+=5+a;A=Math.max(b.height,A)});e._height=G?A:e._height+A;e._width+=2*g;e._height+=10+2*g}e._width=Math.ceil(e._width);e._height=Math.ceil(e._height);var I=
a._context.edits.legendText||a._context.edits.legendPosition;c.each(function(a){a=a[0];var b=u.select(this).select(".legendtoggle");t.setRect(b,0,-a.height/2,(I?0:e._width)+h,a.height)})}function b(a){var b=a._fullLayout.legend,c="left";r.isRightAnchor(b)?c="right":r.isCenterAnchor(b)&&(c="center");var e="top";r.isBottomAnchor(b)?e="bottom":r.isMiddleAnchor(b)&&(e="middle");d.autoMargin(a,"legend",{x:b.x,y:b.y,l:b._width*w[c],r:b._width*J[c],b:b._height*J[e],t:b._height*w[e]})}function n(a){var b=
a._fullLayout.legend,c="left";r.isRightAnchor(b)?c="right":r.isCenterAnchor(b)&&(c="center");d.autoMargin(a,"legend",{x:b.x,y:.5,l:b._width*w[c],r:b._width*J[c],b:0,t:0})}var u=a("d3"),r=a("../../lib"),d=a("../../plots/plots"),g=a("../../registry"),c=a("../../lib/events"),v=a("../dragelement"),t=a("../drawing"),q=a("../color"),B=a("../../lib/svg_text_utils"),D=a("./handle_click"),G=a("./constants");l=a("../../constants/interactions");var A=a("../../constants/alignment"),C=A.LINE_SPACING,w=A.FROM_TL,
J=A.FROM_BR,E=a("./get_legend_data"),H=a("./style"),x=a("./helpers"),O=l.DBLCLICKDELAY;p.exports=function(a){var c=a._fullLayout,h="legend"+c._uid;if(c._infolayer&&a.calcdata){a._legendMouseDownTime||(a._legendMouseDownTime=0);var l=c.legend,p=c.showlegend&&E(a.calcdata,l),y=c.hiddenlabels||[];if(c.showlegend&&p.length){for(var A=0,B=0;B<p.length;B++)for(var C=0;C<p[B].length;C++){var D=p[B][C][0],I=D.trace;D=g.traceIs(I,"pie")?D.label:I.name;A=Math.max(A,D&&D.length||0)}var w=!1,J=r.ensureSingle(c._infolayer,
"g","legend",function(a){a.attr("pointer-events","all");w=!0}),x=r.ensureSingleById(c._topdefs,"clipPath",h,function(a){a.append("rect")}),P=r.ensureSingle(J,"rect","bg",function(a){a.attr("shape-rendering","crispEdges")});P.call(q.stroke,l.bordercolor).call(q.fill,l.bgcolor).style("stroke-width",l.borderwidth+"px");var M=r.ensureSingle(J,"g","scrollbox"),O=r.ensureSingle(J,"rect","scrollbar",function(a){a.attr({rx:20,ry:3,width:0,height:0}).call(q.fill,"#808BA4")}),z=M.selectAll("g.groups").data(p);
z.enter().append("g").attr("class","groups");z.exit().remove();var F=z.selectAll("g.traces").data(r.identity);F.enter().append("g").attr("class","traces");F.exit().remove();F.style("opacity",function(a){var b=a[0].trace;return g.traceIs(b,"pie")?-1!==y.indexOf(a[0].label)?.5:1:"legendonly"===b.visible?.5:1}).each(function(){u.select(this).call(k,a,A)}).call(H,a).each(function(){u.select(this).call(e,a)});r.syncOrAsync([d.previousPromises,function(){function d(b,c,d){l._scrollY=a._fullLayout.legend._scrollY=
b;t.setTranslate(M,0,-b);t.setRect(O,A,G.scrollBarMargin+b*d,G.scrollBarWidth,c);x.select("rect").attr({y:l.borderwidth+b})}w&&(f(a,z,F),b(a));var e=c.width,k=c.height;f(a,z,F);l._height>k?n(a):b(a);var p=c._size,q=p.l+p.w*l.x,y=p.t+p.h*(1-l.y);r.isRightAnchor(l)?q-=l._width:r.isCenterAnchor(l)&&(q-=l._width/2);r.isBottomAnchor(l)?y-=l._height:r.isMiddleAnchor(l)&&(y-=l._height/2);var A=l._width,B=p.w;A>B?(q=p.l,A=B):(q+A>e&&(q=e-A),0>q&&(q=0),A=Math.min(e-q,l._width));e=l._height;B=p.h;e>B?(y=p.t,
e=B):(y+e>k&&(y=k-e),0>y&&(y=0),e=Math.min(k-y,l._height));t.setTranslate(J,q,y);O.on(".drag",null);J.on("wheel",null);if(l._height<=e||a._context.staticPlot)P.attr({width:A-l.borderwidth,height:e-l.borderwidth,x:l.borderwidth/2,y:l.borderwidth/2}),t.setTranslate(M,0,0),x.select("rect").attr({width:A-2*l.borderwidth,height:e-2*l.borderwidth,x:l.borderwidth,y:l.borderwidth}),t.setClipUrl(M,h,a),t.setRect(O,0,0,0,0),delete l._scrollY;else{var C=Math.max(G.scrollBarMinHeight,e*e/l._height),D=e-C-2*G.scrollBarMargin,
I=l._height-e,E=D/I,L=Math.min(l._scrollY||0,I);P.attr({width:A-2*l.borderwidth+G.scrollBarWidth+G.scrollBarMargin,height:e-l.borderwidth,x:l.borderwidth/2,y:l.borderwidth/2});x.select("rect").attr({width:A-2*l.borderwidth+G.scrollBarWidth+G.scrollBarMargin,height:e-2*l.borderwidth,x:l.borderwidth,y:l.borderwidth+L});t.setClipUrl(M,h,a);d(L,C,E);J.on("wheel",function(){L=r.constrain(l._scrollY+u.event.deltaY/D*I,0,I);d(L,C,E);0!==L&&L!==I&&u.event.preventDefault()});var N,H;k=u.behavior.drag().on("dragstart",
function(){N=u.event.sourceEvent.clientY;H=L}).on("drag",function(){var a=u.event.sourceEvent;2===a.buttons||a.ctrlKey||(L=r.constrain((a.clientY-N)/E+H,0,I),d(L,C,E))});O.call(k)}if(a._context.edits.legendPosition){var Q,R,ca,T;J.classed("cursor-move",!0);v.init({element:J.node(),gd:a,prepFn:function(){var a=t.getTranslate(J);ca=a.x;T=a.y},moveFn:function(a,b){a=ca+a;b=T+b;t.setTranslate(J,a,b);Q=v.align(a,0,p.l,p.l+p.w,l.xanchor);R=v.align(b,0,p.t+p.h,p.t,l.yanchor)},doneFn:function(){void 0!==
Q&&void 0!==R&&g.call("_guiRelayout",a,{"legend.x":Q,"legend.y":R})},clickFn:function(b,d){var e=c._infolayer.selectAll("g.traces").filter(function(){var a=this.getBoundingClientRect();return d.clientX>=a.left&&d.clientX<=a.right&&d.clientY>=a.top&&d.clientY<=a.bottom});0<e.size()&&m(a,J,e,b,d)}})}}],a)}else c._infolayer.selectAll(".legend").remove(),c._topdefs.select("#"+h).remove(),d.autoMargin(a,"legend")}}},{"../../constants/alignment":672,"../../constants/interactions":676,"../../lib":700,"../../lib/events":689,
"../../lib/svg_text_utils":724,"../../plots/plots":810,"../../registry":829,"../color":577,"../dragelement":595,"../drawing":598,"./constants":627,"./get_legend_data":630,"./handle_click":631,"./helpers":632,"./style":634,d3:154}],630:[function(a,p,l){var m=a("../../registry"),k=a("./helpers");p.exports=function(a,e){function f(a,c){""!==a&&k.isGrouped(e)?-1===h.indexOf(a)?(h.push(a),l=!0,b[a]=[[c]]):b[a].push([c]):(a="~~i"+d,h.push(a),b[a]=[[c]],d++)}var b={},h=[],l=!1,r={},d=0,g;for(g=0;g<a.length;g++){var c=
a[g];var v=c[0];var t=v.trace,p=t.legendgroup;if(t.visible&&t.showlegend)if(m.traceIs(t,"pie"))for(r[p]||(r[p]={}),v=0;v<c.length;v++){var q=c[v].label;r[p][q]||(f(p,{label:q,color:c[v].color,i:c[v].i,trace:t,pts:c[v].pts}),r[p][q]=!0)}else f(p,v)}if(!h.length)return[];a=h.length;if(l&&k.isGrouped(e))for(c=Array(a),g=0;g<a;g++)r=b[h[g]],c[g]=k.isReversed(e)?r.reverse():r;else{c=[Array(a)];for(g=0;g<a;g++)r=b[h[g]][0],c[0][k.isReversed(e)?a-g-1:g]=r;a=1}e._lgroupsLength=a;return c}},{"../../registry":829,
"./helpers":632}],631:[function(a,p,l){var m=a("../../lib"),k=a("../../registry"),h=!0;p.exports=function(a,f,b){function e(a,b,c){var d=t.indexOf(a),e=v[b];e||(e=v[b]=[]);-1===t.indexOf(a)&&(t.push(a),d=t.length-1);e[d]=c;return d}function l(a,b){var c=a._fullInput;if(k.hasTransform(c,"groupby")){var d=p[c.index];d||(d=k.getTransformIndices(c,"groupby"),d=m.keyedContainer(c,"transforms["+d[d.length-1]+"].styles","target","value.visible"),p[c.index]=d);var g=d.get(a._group);void 0===g&&(g=!0);!1!==
g&&d.set(a._group,b);q[c.index]=e(c.index,"visible",!1===c.visible?!1:!0)}else e(c.index,"visible",!1===c.visible?!1:b)}if(!f._dragged&&!f._editing){var r=f._fullLayout.hiddenlabels?f._fullLayout.hiddenlabels.slice():[];a=a.data()[0][0];var d=f._fullData,g=a.trace,c=g.legendgroup,v={},t=[],p=[],q=[];1===b&&h&&f.data&&f._context.showTips&&m.notifier(m._(f,"Double-click on legend to isolate one trace"),"long");h=!1;if(k.traceIs(g,"pie")){var D=a.label;a=r.indexOf(D);1===b?-1===a?r.push(D):r.splice(a,
1):2===b&&(r=[],f.calcdata[0].forEach(function(a){D!==a.label&&r.push(a.label)}),f._fullLayout.hiddenlabels&&f._fullLayout.hiddenlabels.length===r.length&&-1===a&&(r=[]));k.call("_guiRelayout",f,"hiddenlabels",r)}else{var G=c&&c.length,A=[];if(G)for(a=0;a<d.length;a++){var C=d[a];C.visible&&C.legendgroup===c&&A.push(a)}if(1===b){switch(g.visible){case !0:var w="legendonly";break;case !1:w=!1;break;case "legendonly":w=!0}if(G)for(a=0;a<d.length;a++)!1!==d[a].visible&&d[a].legendgroup===c&&l(d[a],w);
else l(g,w)}else if(2===b){w=!0;for(a=0;a<d.length;a++)if(A=d[a]===g,!A&&(A=G&&d[a].legendgroup===c,!A&&!0===d[a].visible&&!k.traceIs(d[a],"notLegendIsolatable"))){w=!1;break}for(a=0;a<d.length;a++)if(!1!==d[a].visible&&!k.traceIs(d[a],"notLegendIsolatable"))switch(g.visible){case "legendonly":l(d[a],!0);break;case !0:b=w?!0:"legendonly",A=(A=d[a]===g)||G&&d[a].legendgroup===c,l(d[a],A?!0:b)}}for(a=0;a<p.length;a++)if(d=p[a])for(G=d.constructUpdate(),b=Object.keys(G),d=0;d<b.length;d++)g=b[d],c=v[g]=
v[g]||[],c[q[a]]=G[g];c=Object.keys(v);for(a=0;a<c.length;a++)for(g=c[a],d=0;d<t.length;d++)v[g].hasOwnProperty(d)||(v[g][d]=void 0);k.call("_guiRestyle",f,v,t)}}}},{"../../lib":700,"../../registry":829}],632:[function(a,p,l){l.isGrouped=function(a){return-1!==(a.traceorder||"").indexOf("grouped")};l.isVertical=function(a){return"h"!==a.orientation};l.isReversed=function(a){return-1!==(a.traceorder||"").indexOf("reversed")}},{}],633:[function(a,p,l){p.exports={moduleType:"component",name:"legend",
layoutAttributes:a("./attributes"),supplyLayoutDefaults:a("./defaults"),draw:a("./draw"),style:a("./style")}},{"./attributes":626,"./defaults":628,"./draw":629,"./style":634}],634:[function(a,p,l){var m=a("d3"),k=a("../../registry"),h=a("../../lib"),e=a("../drawing"),f=a("../color"),b=a("../../traces/scatter/subtypes"),n=a("../../traces/pie/style_one");p.exports=function(a,r){a.each(function(a){var b=m.select(this);b=h.ensureSingle(b,"g","layers");b.style("opacity",a[0].trace.opacity);var c=r._fullLayout.legend.valign,
d=a[0].lineHeight,e=a[0].height;"middle"!==c&&d&&e?b.attr("transform","translate(0,"+.5*{top:1,bottom:-1}[c]*(d-e+3)+")"):b.attr("transform",null);b.selectAll("g.legendfill").data([a]).enter().append("g").classed("legendfill",!0);b.selectAll("g.legendlines").data([a]).enter().append("g").classed("legendlines",!0);b=b.selectAll("g.legendsymbols").data([a]);b.enter().append("g").classed("legendsymbols",!0);b.selectAll("g.legendpoints").data([a]).enter().append("g").classed("legendpoints",!0)}).each(function(a){var b=
a[0].trace,c=[];"waterfall"===b.type&&b.visible&&(c=a[0].hasTotals?[["increasing","M-6,-6V6H0Z"],["totals","M6,6H0L-6,-6H-0Z"],["decreasing","M6,6V-6H0Z"]]:[["increasing","M-6,-6V6H6Z"],["decreasing","M6,6V-6H-6Z"]]);a=m.select(this).select("g.legendpoints").selectAll("path.legendwaterfall").data(c);a.enter().append("path").classed("legendwaterfall",!0).attr("transform","translate(20,0)").style("stroke-miterlimit",1);a.exit().remove();a.each(function(a){var c=m.select(this),d=b[a[0]].marker;c.attr("d",
a[1]).style("stroke-width",d.line.width+"px").call(f.fill,d.color);d.line.width&&c.call(f.stroke,d.line.color)})}).each(function(a){var b=a[0].trace,c=b.marker||{},d=c.line||{};a=m.select(this).select("g.legendpoints").selectAll("path.legendbar").data(k.traceIs(b,"bar")?[a]:[]);a.enter().append("path").classed("legendbar",!0).attr("d","M6,6H-6V-6H6Z").attr("transform","translate(20,0)");a.exit().remove();a.each(function(a){var b=m.select(this);a=a[0];var e=(a.mlw+1||d.width+1)-1;b.style("stroke-width",
e+"px").call(f.fill,a.mc||c.color);e&&b.call(f.stroke,a.mlc||d.color)})}).each(function(a){var b=a[0].trace;a=m.select(this).select("g.legendpoints").selectAll("path.legendbox").data(k.traceIs(b,"box-violin")&&b.visible?[a]:[]);a.enter().append("path").classed("legendbox",!0).attr("d","M6,6H-6V-6H6Z").attr("transform","translate(20,0)");a.exit().remove();a.each(function(){var a=b.line.width,d=m.select(this);d.style("stroke-width",a+"px").call(f.fill,b.fillcolor);a&&f.stroke(d,b.line.color)})}).each(function(a){var b=
a[0].trace,c=m.select(this).select("g.legendpoints").selectAll("path.legendpie").data(k.traceIs(b,"pie")&&b.visible?[a]:[]);c.enter().append("path").classed("legendpie",!0).attr("d","M6,6H-6V-6H6Z").attr("transform","translate(20,0)");c.exit().remove();c.size()&&c.call(n,a[0],b)}).each(function(a){function d(a){a.size()&&e.gradient(a,r,"legendfill-"+f.uid,"horizontalreversed",f.colorscale,"fill")}function c(a){if(a.size()){var b="legendline-"+f.uid;e.lineGroupStyle(a);e.gradient(a,r,b,"horizontalreversed",
f.colorscale,"stroke")}}var f=a[0].trace,h=f.visible&&f.fill&&"none"!==f.fill,k=b.hasLines(f),n=f.contours,l=!1,p=!1;if(n){var u=n.coloring;"lines"===u?l=!0:k="none"===u||"heatmap"===u||n.showlines;if("constraint"===n.type)h="\x3d"!==n._operation;else if("fill"===u||"heatmap"===u)p=!0}n=b.hasMarkers(f)||b.hasText(f)||!h&&!p?"M5,0":k||l?"M5,-2":"M5,-3";u=m.select(this);p=u.select(".legendfill").selectAll("path").data(h||p?[a]:[]);p.enter().append("path").classed("js-fill",!0);p.exit().remove();p.attr("d",
n+"h30v6h-30z").call(h?e.fillGroupStyle:d);a=u.select(".legendlines").selectAll("path").data(k||l?[a]:[]);a.enter().append("path").classed("js-line",!0);a.exit().remove();a.attr("d",n+(l?"l30,0.0001":"h30")).call(k?e.lineGroupStyle:c)}).each(function(a){function d(a,b,c){a=h.nestedProperty(k,a).get();b=h.isArrayOrTypedArray(a)&&b?b(a):a;if(c){if(b<c[0])return c[0];if(b>c[1])return c[1]}return b}function c(a){return a[0]}var f=a[0],k=f.trace;a=b.hasMarkers(k);var n=b.hasText(k),l=b.hasLines(k);if(a||
n||l){var p={};var u={};if(a){p.mc=d("marker.color",c);p.mx=d("marker.symbol",c);p.mo=d("marker.opacity",h.mean,[.2,1]);p.mlc=d("marker.line.color",c);p.mlw=d("marker.line.width",h.mean,[0,5]);u.marker={sizeref:1,sizemin:1,sizemode:"diameter"};var q=d("marker.size",h.mean,[2,16]);p.ms=q;u.marker.size=q}l&&(u.line={width:d("line.width",c,[0,10])});n&&(p.tx="Aa",p.tp=d("textposition",c),p.ts=10,p.tc=d("textfont.color",c),p.tf=d("textfont.family",c));p=[h.minExtend(f,p)];u=h.minExtend(k,u);u.selectedpoints=
null}f=m.select(this).select("g.legendpoints");l=f.selectAll("path.scatterpts").data(a?p:[]);l.enter().insert("path",":first-child").classed("scatterpts",!0).attr("transform","translate(20,0)");l.exit().remove();l.call(e.pointStyle,u,r);a&&(p[0].mrc=3);a=f.selectAll("g.pointtext").data(n?p:[]);a.enter().append("g").classed("pointtext",!0).append("text").attr("transform","translate(20,0)");a.exit().remove();a.selectAll("text").call(e.textPointStyle,u,r)}).each(function(a){var b=a[0].trace;a=m.select(this).select("g.legendpoints").selectAll("path.legendcandle").data("candlestick"===
b.type&&b.visible?[a,a]:[]);a.enter().append("path").classed("legendcandle",!0).attr("d",function(a,b){return b?"M-15,0H-8M-8,6V-6H8Z":"M15,0H8M8,-6V6H-8Z"}).attr("transform","translate(20,0)").style("stroke-miterlimit",1);a.exit().remove();a.each(function(a,d){a=b[d?"increasing":"decreasing"];d=a.line.width;var c=m.select(this);c.style("stroke-width",d+"px").call(f.fill,a.fillcolor);d&&f.stroke(c,a.line.color)})}).each(function(a){var b=a[0].trace;a=m.select(this).select("g.legendpoints").selectAll("path.legendohlc").data("ohlc"===
b.type&&b.visible?[a,a]:[]);a.enter().append("path").classed("legendohlc",!0).attr("d",function(a,b){return b?"M-15,0H0M-8,-6V0":"M15,0H0M8,6V0"}).attr("transform","translate(20,0)").style("stroke-miterlimit",1);a.exit().remove();a.each(function(a,d){a=b[d?"increasing":"decreasing"];d=a.line.width;var c=m.select(this);c.style("fill","none").call(e.dashLine,a.line.dash,d);d&&f.stroke(c,a.line.color)})})}},{"../../lib":700,"../../registry":829,"../../traces/pie/style_one":1037,"../../traces/scatter/subtypes":1075,
"../color":577,"../drawing":598,d3:154}],635:[function(a,p,l){function m(a,b){var c=b.currentTarget,d=c.getAttribute("data-attr");b=c.getAttribute("data-val")||!0;var e=a._fullLayout,f={},h=g.list(a,null,!0),k="on",n;if("zoom"===d){c="in"===b?.5:2;d=(1+c)/2;var m=(1-c)/2;for(n=0;n<h.length;n++)if(c=h[n],!c.fixedrange){var t=c._name;if("auto"===b)f[t+".autorange"]=!0;else if("reset"===b){if(void 0===c._rangeInitial)f[t+".autorange"]=!0;else{var l=c._rangeInitial.slice();f[t+".range[0]"]=l[0];f[t+".range[1]"]=
l[1]}void 0!==c._showSpikeInitial&&(f[t+".showspikes"]=c._showSpikeInitial,"on"!==k||c._showSpikeInitial||(k="off"))}else l=[c.r2l(c.range[0]),c.r2l(c.range[1])],l=[d*l[0]+m*l[1],d*l[1]+m*l[0]],f[t+".range[0]"]=c.l2r(l[0]),f[t+".range[1]"]=c.l2r(l[1])}e._cartesianSpikesEnabled=k}else{if("hovermode"===d&&("x"===b||"y"===b))b=e._isHoriz?"y":"x",c.setAttribute("data-val",b);else if("hovermode"===d&&"closest"===b){for(n=0;n<h.length;n++)c=h[n],"on"!==k||c.showspikes||(k="off");e._cartesianSpikesEnabled=
k}f[d]=b}r.call("_guiRelayout",a,f)}function k(a,b){b=b.currentTarget;var c=b.getAttribute("data-attr");b=b.getAttribute("data-val")||!0;var d=a._fullLayout._subplots.gl3d,e={};c=c.split(".");for(var g=0;g<d.length;g++)e[d[g]+"."+c[1]]=b;e.dragmode="pan"===b?b:"zoom";r.call("_guiRelayout",a,e)}function h(a,b){b=b.currentTarget.getAttribute("data-attr");for(var c=a._fullLayout,d=c._subplots.gl3d,e={},g=0;g<d.length;g++){var f=d[g],h=f+".camera";f=c[f]._scene;"resetLastSave"===b?(e[h+".up"]=f.viewInitial.up,
e[h+".eye"]=f.viewInitial.eye,e[h+".center"]=f.viewInitial.center):"resetDefault"===b&&(e[h+".up"]=null,e[h+".eye"]=null,e[h+".center"]=null)}r.call("_guiRelayout",a,e)}function e(a,b){b=b.currentTarget;var c=b._previousVal;a=a._fullLayout;var d=a._subplots.gl3d,e=["xaxis","yaxis","zaxis"],g={},f={};if(c)f=c,b._previousVal=null;else{for(c=0;c<d.length;c++){var h=d[c],k=a[h],n=h+".hovermode";g[n]=k.hovermode;f[n]=!1;for(n=0;3>n;n++){var m=e[n],t=h+"."+m+".showspikes";f[t]=!1;g[t]=k[m].showspikes}}b._previousVal=
g}return f}function f(a,b){var c=b.currentTarget;b=c.getAttribute("data-attr");c=c.getAttribute("data-val")||!0;for(var d=a._fullLayout,e=d._subplots.geo,g=0;g<e.length;g++){var f=e[g],h=d[f];"zoom"===b?(h=h.projection.scale,r.call("_guiRelayout",a,f+".projection.scale","in"===c?2*h:.5*h)):"reset"===b&&u(a,"geo")}}function b(a){a=a._fullLayout;return a.hovermode?!1:a._has("cartesian")?a._isHoriz?"y":"x":"closest"}function n(a){var c=b(a);r.call("_guiRelayout",a,"hovermode",c)}function u(a,b){var c=
a._fullLayout;b=c._subplots[b];for(var d={},e=0;e<b.length;e++)for(var g=b[e],f=c[g]._subplot.viewInitial,h=Object.keys(f),k=0;k<h.length;k++){var n=h[k];d[g+"."+n]=f[n]}r.call("_guiRelayout",a,d)}var r=a("../../registry"),d=a("../../plots/plots"),g=a("../../plots/cartesian/axis_ids"),c=a("../../lib");a=a("../../../build/ploticon");var v=c._;p=p.exports={};p.toImage={name:"toImage",title:function(a){return"png"===((a._context.toImageButtonOptions||{}).format||"png")?v(a,"Download plot as a png"):
v(a,"Download plot")},icon:a.camera,click:function(a){var b=a._context.toImageButtonOptions,d={format:b.format||"png"};c.notifier(v(a,"Taking snapshot - this may take a few seconds"),"long");"svg"!==d.format&&c.isIE()&&(c.notifier(v(a,"IE only supports svg.  Changing format to svg."),"long"),d.format="svg");["filename","width","height","scale"].forEach(function(a){b[a]&&(d[a]=b[a])});r.call("downloadImage",a,d).then(function(b){c.notifier(v(a,"Snapshot succeeded")+" - "+b,"long")}).catch(function(){c.notifier(v(a,
"Sorry, there was a problem downloading your snapshot!"),"long")})}};p.sendDataToCloud={name:"sendDataToCloud",title:function(a){return v(a,"Edit in Chart Studio")},icon:a.disk,click:function(a){d.sendDataToCloud(a)}};p.zoom2d={name:"zoom2d",title:function(a){return v(a,"Zoom")},attr:"dragmode",val:"zoom",icon:a.zoombox,click:m};p.pan2d={name:"pan2d",title:function(a){return v(a,"Pan")},attr:"dragmode",val:"pan",icon:a.pan,click:m};p.select2d={name:"select2d",title:function(a){return v(a,"Box Select")},
attr:"dragmode",val:"select",icon:a.selectbox,click:m};p.lasso2d={name:"lasso2d",title:function(a){return v(a,"Lasso Select")},attr:"dragmode",val:"lasso",icon:a.lasso,click:m};p.zoomIn2d={name:"zoomIn2d",title:function(a){return v(a,"Zoom in")},attr:"zoom",val:"in",icon:a.zoom_plus,click:m};p.zoomOut2d={name:"zoomOut2d",title:function(a){return v(a,"Zoom out")},attr:"zoom",val:"out",icon:a.zoom_minus,click:m};p.autoScale2d={name:"autoScale2d",title:function(a){return v(a,"Autoscale")},attr:"zoom",
val:"auto",icon:a.autoscale,click:m};p.resetScale2d={name:"resetScale2d",title:function(a){return v(a,"Reset axes")},attr:"zoom",val:"reset",icon:a.home,click:m};p.hoverClosestCartesian={name:"hoverClosestCartesian",title:function(a){return v(a,"Show closest data on hover")},attr:"hovermode",val:"closest",icon:a.tooltip_basic,gravity:"ne",click:m};p.hoverCompareCartesian={name:"hoverCompareCartesian",title:function(a){return v(a,"Compare data on hover")},attr:"hovermode",val:function(a){return a._fullLayout._isHoriz?
"y":"x"},icon:a.tooltip_compare,gravity:"ne",click:m};p.zoom3d={name:"zoom3d",title:function(a){return v(a,"Zoom")},attr:"scene.dragmode",val:"zoom",icon:a.zoombox,click:k};p.pan3d={name:"pan3d",title:function(a){return v(a,"Pan")},attr:"scene.dragmode",val:"pan",icon:a.pan,click:k};p.orbitRotation={name:"orbitRotation",title:function(a){return v(a,"Orbital rotation")},attr:"scene.dragmode",val:"orbit",icon:a["3d_rotate"],click:k};p.tableRotation={name:"tableRotation",title:function(a){return v(a,
"Turntable rotation")},attr:"scene.dragmode",val:"turntable",icon:a["z-axis"],click:k};p.resetCameraDefault3d={name:"resetCameraDefault3d",title:function(a){return v(a,"Reset camera to default")},attr:"resetDefault",icon:a.home,click:h};p.resetCameraLastSave3d={name:"resetCameraLastSave3d",title:function(a){return v(a,"Reset camera to last save")},attr:"resetLastSave",icon:a.movie,click:h};p.hoverClosest3d={name:"hoverClosest3d",title:function(a){return v(a,"Toggle show closest data on hover")},attr:"hovermode",
val:null,toggle:!0,icon:a.tooltip_basic,gravity:"ne",click:function(a,b){b=e(a,b);r.call("_guiRelayout",a,b)}};p.zoomInGeo={name:"zoomInGeo",title:function(a){return v(a,"Zoom in")},attr:"zoom",val:"in",icon:a.zoom_plus,click:f};p.zoomOutGeo={name:"zoomOutGeo",title:function(a){return v(a,"Zoom out")},attr:"zoom",val:"out",icon:a.zoom_minus,click:f};p.resetGeo={name:"resetGeo",title:function(a){return v(a,"Reset")},attr:"reset",val:null,icon:a.autoscale,click:f};p.hoverClosestGeo={name:"hoverClosestGeo",
title:function(a){return v(a,"Toggle show closest data on hover")},attr:"hovermode",val:null,toggle:!0,icon:a.tooltip_basic,gravity:"ne",click:n};p.hoverClosestGl2d={name:"hoverClosestGl2d",title:function(a){return v(a,"Toggle show closest data on hover")},attr:"hovermode",val:null,toggle:!0,icon:a.tooltip_basic,gravity:"ne",click:n};p.hoverClosestPie={name:"hoverClosestPie",title:function(a){return v(a,"Toggle show closest data on hover")},attr:"hovermode",val:"closest",icon:a.tooltip_basic,gravity:"ne",
click:n};p.toggleHover={name:"toggleHover",title:function(a){return v(a,"Toggle show closest data on hover")},attr:"hovermode",val:null,toggle:!0,icon:a.tooltip_basic,gravity:"ne",click:function(a,c){c=e(a,c);c.hovermode=b(a);r.call("_guiRelayout",a,c)}};p.resetViews={name:"resetViews",title:function(a){return v(a,"Reset views")},icon:a.home,click:function(a,b){var c=b.currentTarget;c.setAttribute("data-attr","zoom");c.setAttribute("data-val","reset");m(a,b);c.setAttribute("data-attr","resetLastSave");
h(a,b);u(a,"geo");u(a,"mapbox")}};p.toggleSpikelines={name:"toggleSpikelines",title:function(a){return v(a,"Toggle Spike Lines")},icon:a.spikeline,attr:"_cartesianSpikesEnabled",val:"on",click:function(a){var b=a._fullLayout;b._cartesianSpikesEnabled="on"===b._cartesianSpikesEnabled?"off":"on";b=a._fullLayout;for(var c=g.list(a,null,!0),d={},e,f,h=0;h<c.length;h++)e=c[h],f=e._name,d[f+".showspikes"]="on"===b._cartesianSpikesEnabled?!0:e._showSpikeInitial;r.call("_guiRelayout",a,d)}};p.resetViewMapbox=
{name:"resetViewMapbox",title:function(a){return v(a,"Reset view")},attr:"reset",icon:a.home,click:function(a){u(a,"mapbox")}}},{"../../../build/ploticon":2,"../../lib":700,"../../plots/cartesian/axis_ids":751,"../../plots/plots":810,"../../registry":829}],636:[function(a,p,l){l.manage=a("./manage")},{"./manage":637}],637:[function(a,p,l){function m(a,b,c,f){function d(a){if(a.length){for(var c=[],d=0;d<a.length;d++){var e=a[d];-1===b.indexOf(e)&&c.push(r[e])}w.push(c)}}var g=a._fullLayout;a=a._fullData;
var n=g._has("cartesian"),m=g._has("gl3d"),l=g._has("geo"),p=g._has("pie"),v=g._has("gl2d"),u=g._has("ternary"),q=g._has("mapbox"),E=g._has("polar");g=k(g);var w=[],x=["toImage"];f&&x.push("sendDataToCloud");d(x);f=[];x=[];var O=[],I=[];1<(n||v||p||u)+l+m+q+E?(x=["toggleHover"],O=["resetViews"]):l?(f=["zoomInGeo","zoomOutGeo"],x=["hoverClosestGeo"],O=["resetGeo"]):m?(x=["hoverClosest3d"],O=["resetCameraDefault3d","resetCameraLastSave3d"]):q?(x=["toggleHover"],O=["resetViewMapbox"]):x=v?["hoverClosestGl2d"]:
p?["hoverClosestPie"]:["toggleHover"];n&&(x=["toggleSpikelines","hoverClosestCartesian","hoverCompareCartesian"]);!n&&!v||g||(f=["zoomIn2d","zoomOut2d","autoScale2d"],"resetViews"!==O[0]&&(O=["resetScale2d"]));m?I=["zoom3d","pan3d","orbitRotation","tableRotation"]:(n||v)&&!g||u?I=["zoom2d","pan2d"]:q||l?I=["pan2d"]:E&&(I=["zoom2d"]);h(a)&&I.push("select2d","lasso2d");d(I);d(f.concat(O));d(x);return e(w,c)}function k(a){a=f.list({_fullLayout:a},null,!0);for(var b=0;b<a.length;b++)if(!a[b].fixedrange)return!1;
return!0}function h(a){for(var d=!1,c=0;c<a.length&&!d;c++){var e=a[c];if(e._module&&e._module.selectPoints)if(n.traceIs(e,"scatter-like")){if(b.hasMarkers(e)||b.hasText(e))d=!0}else if(n.traceIs(e,"box-violin")){if("all"===e.boxpoints||"all"===e.points)d=!0}else d=!0}return d}function e(a,b){if(b.length)if(Array.isArray(b[0]))for(var c=0;c<b.length;c++)a.push(b[c]);else a.push(b);return a}var f=a("../../plots/cartesian/axis_ids"),b=a("../../traces/scatter/subtypes"),n=a("../../registry"),u=a("./modebar"),
r=a("./buttons");p.exports=function(a){var b=a._fullLayout,c=a._context,d=b._modeBar;if(c.displayModeBar||c.watermark){if(!Array.isArray(c.modeBarButtonsToRemove))throw Error("*modeBarButtonsToRemove* configuration options must be an array.");if(!Array.isArray(c.modeBarButtonsToAdd))throw Error("*modeBarButtonsToAdd* configuration options must be an array.");var e=c.modeBarButtons;if(Array.isArray(e)&&e.length)for(c=0;c<e.length;c++)for(var f=e[c],h=0;h<f.length;h++){var k=f[h];if("string"===typeof k)if(void 0!==
r[k])e[c][h]=r[k];else throw Error("*modeBarButtons* configuration options invalid button name");}else e=!c.displayModeBar&&c.watermark?[]:m(a,c.modeBarButtonsToRemove,c.modeBarButtonsToAdd,c.showSendToCloud);d?d.update(a,e):b._modeBar=u(a,e)}else d&&(d.destroy(),delete b._modeBar)}},{"../../plots/cartesian/axis_ids":751,"../../registry":829,"../../traces/scatter/subtypes":1075,"./buttons":635,"./modebar":638}],638:[function(a,p,l){function m(a){this.container=a.container;this.element=document.createElement("div");
this.update(a.graphInfo,a.buttons);this.container.appendChild(this.element)}var k=a("d3"),h=a("fast-isnumeric"),e=a("../../lib"),f=a("../../../build/ploticon"),b=new DOMParser;a=m.prototype;a.update=function(a,b){this.graphInfo=a;a=this.graphInfo._context;var f=this.graphInfo._fullLayout,d="modebar-"+f._uid;this.element.setAttribute("id",d);this._uid=d;this.element.className="modebar";"hover"===a.displayModeBar&&(this.element.className+=" modebar--hover ease-bg");"v"===f.modebar.orientation&&(this.element.className+=
" vertical",b=b.reverse());var g=f.modebar,c="hover"===a.displayModeBar?".js-plotly-plot .plotly:hover ":"";e.deleteRelatedStyleRule(d);e.addRelatedStyleRule(d,c+"#"+d+" .modebar-group","background-color: "+g.bgcolor);e.addRelatedStyleRule(d,"#"+d+" .modebar-btn .icon path","fill: "+g.color);e.addRelatedStyleRule(d,"#"+d+" .modebar-btn:hover .icon path","fill: "+g.activecolor);e.addRelatedStyleRule(d,"#"+d+" .modebar-btn.active .icon path","fill: "+g.activecolor);d=!this.hasButtons(b);g=this.hasLogo!==
a.displaylogo;c=this.locale!==a.locale;this.locale=a.locale;if(d||g||c)if(this.removeAllButtons(),this.updateButtons(b),a.watermark||a.displaylogo)b=this.getLogo(),a.watermark&&(b.className+=" watermark"),"v"===f.modebar.orientation?this.element.insertBefore(b,this.element.childNodes[0]):this.element.appendChild(b),this.hasLogo=!0;this.updateActiveButton()};a.updateButtons=function(a){var b=this;this.buttons=a;this.buttonElements=[];this.buttonsNames=[];this.buttons.forEach(function(a){var d=b.createGroup();
a.forEach(function(a){var c=a.name;if(!c)throw Error("must provide button 'name' in button config");if(-1!==b.buttonsNames.indexOf(c))throw Error("button name '"+c+"' is taken");b.buttonsNames.push(c);a=b.createButton(a);b.buttonElements.push(a);d.appendChild(a)});b.element.appendChild(d)})};a.createGroup=function(){var a=document.createElement("div");a.className="modebar-group";return a};a.createButton=function(a){var b=this,e=document.createElement("a");e.setAttribute("rel","tooltip");e.className=
"modebar-btn";var d=a.title;void 0===d?d=a.name:"function"===typeof d&&(d=d(this.graphInfo));(d||0===d)&&e.setAttribute("data-title",d);void 0!==a.attr&&e.setAttribute("data-attr",a.attr);d=a.val;void 0!==d&&("function"===typeof d&&(d=d(this.graphInfo)),e.setAttribute("data-val",d));if("function"!==typeof a.click)throw Error("must provide button 'click' function in button config");e.addEventListener("click",function(d){a.click(b.graphInfo,d);b.updateActiveButton(d.currentTarget)});e.setAttribute("data-toggle",
a.toggle||!1);a.toggle&&k.select(e).classed("active",!0);d=a.icon;"function"===typeof d?e.appendChild(d()):e.appendChild(this.createIcon(d||f.question));e.setAttribute("data-gravity",a.gravity||"n");return e};a.createIcon=function(a){var e=h(a.height)?Number(a.height):a.ascent-a.descent;if(a.path){var f=document.createElementNS("http://www.w3.org/2000/svg","svg");f.setAttribute("viewBox",[0,0,a.width,e].join(" "));f.setAttribute("class","icon");e=document.createElementNS("http://www.w3.org/2000/svg",
"path");e.setAttribute("d",a.path);a.transform?e.setAttribute("transform",a.transform):void 0!==a.ascent&&e.setAttribute("transform","matrix(1 0 0 -1 0 "+a.ascent+")");f.appendChild(e)}a.svg&&(f=b.parseFromString(a.svg,"application/xml").childNodes[0]);f.setAttribute("height","1em");f.setAttribute("width","1em");return f};a.updateActiveButton=function(a){var b=this.graphInfo._fullLayout,f=void 0!==a?a.getAttribute("data-attr"):null;this.buttonElements.forEach(function(a){var d=a.getAttribute("data-val")||
!0,c=a.getAttribute("data-attr"),h="true"===a.getAttribute("data-toggle");a=k.select(a);h?c===f&&a.classed("active",!a.classed("active")):(c=null===c?c:e.nestedProperty(b,c).get(),a.classed("active",c===d))})};a.hasButtons=function(a){var b=this.buttons;if(!b||a.length!==b.length)return!1;for(var e=0;e<a.length;++e){if(a[e].length!==b[e].length)return!1;for(var d=0;d<a[e].length;d++)if(a[e][d].name!==b[e][d].name)return!1}return!0};a.getLogo=function(){var a=this.createGroup(),b=document.createElement("a");
b.href="https://plot.ly/";b.target="_blank";b.setAttribute("data-title",e._(this.graphInfo,"Produced with Plotly"));b.className="modebar-btn plotlyjsicon modebar-btn--logo";b.appendChild(this.createIcon(f.newplotlylogo));a.appendChild(b);return a};a.removeAllButtons=function(){for(;this.element.firstChild;)this.element.removeChild(this.element.firstChild);this.hasLogo=!1};a.destroy=function(){e.removeElement(this.container.querySelector(".modebar"));e.deleteRelatedStyleRule(this._uid)};p.exports=
function(a,b){var e=a._fullLayout;a=new m({graphInfo:a,container:e._modebardiv.node(),buttons:b});e._privateplot&&k.select(a.element).append("span").classed("badge-private float--left",!0).text("PRIVATE");return a}},{"../../../build/ploticon":2,"../../lib":700,d3:154,"fast-isnumeric":221}],639:[function(a,p,l){l=a("../../plots/font_attributes");var m=a("../color/attributes");a=a("../../plot_api/plot_template").templatedArray;a=a("button",{visible:{valType:"boolean",dflt:!0,editType:"plot"},step:{valType:"enumerated",
values:"month year day hour minute second all".split(" "),dflt:"month",editType:"plot"},stepmode:{valType:"enumerated",values:["backward","todate"],dflt:"backward",editType:"plot"},count:{valType:"number",min:0,dflt:1,editType:"plot"},label:{valType:"string",editType:"plot"},editType:"plot"});p.exports={visible:{valType:"boolean",editType:"plot"},buttons:a,x:{valType:"number",min:-2,max:3,editType:"plot"},xanchor:{valType:"enumerated",values:["auto","left","center","right"],dflt:"left",editType:"plot"},
y:{valType:"number",min:-2,max:3,editType:"plot"},yanchor:{valType:"enumerated",values:["auto","top","middle","bottom"],dflt:"bottom",editType:"plot"},font:l({editType:"plot"}),bgcolor:{valType:"color",dflt:m.lightLine,editType:"plot"},activecolor:{valType:"color",editType:"plot"},bordercolor:{valType:"color",dflt:m.defaultLine,editType:"plot"},borderwidth:{valType:"number",min:0,dflt:0,editType:"plot"},editType:"plot"}},{"../../plot_api/plot_template":738,"../../plots/font_attributes":774,"../color/attributes":576}],
640:[function(a,p,l){p.exports={yPad:.02,minButtonWidth:30,rx:3,ry:3,lightAmount:25,darkAmount:10}},{}],641:[function(a,p,l){function m(a,b,e,c){function d(c,d){return h.coerce(a,b,n.buttons,c,d)}e=c.calendar;d("visible")&&(c=d("step"),"all"!==c&&(!e||"gregorian"===e||"month"!==c&&"year"!==c?d("stepmode"):b.stepmode="backward",d("count")),d("label"))}function k(a,b,e){e=e.filter(function(c){return b[c].anchor===a._id});for(var c=0,d=0;d<e.length;d++){var g=b[e[d]].domain;g&&(c=Math.max(g[1],c))}return[a.domain[0],
c+u.yPad]}var h=a("../../lib"),e=a("../color"),f=a("../../plot_api/plot_template"),b=a("../../plots/array_container_defaults"),n=a("./attributes"),u=a("./constants");p.exports=function(a,d,g,c,l){function t(a,b){return h.coerce(r,p,n,a,b)}var r=a.rangeselector||{},p=f.newContainer(d,"rangeselector");l=b(r,p,{name:"buttons",handleItemDefaults:m,calendar:l});t("visible",0<l.length)&&(c=k(d,g,c),t("x",c[0]),t("y",c[1]),h.noneOrAll(a,d,["x","y"]),t("xanchor"),t("yanchor"),h.coerceFont(t,"font",g.font),
a=t("bgcolor"),t("activecolor",e.contrast(a,u.lightAmount,u.darkAmount)),t("bordercolor"),t("borderwidth"))}},{"../../lib":700,"../../plot_api/plot_template":738,"../../plots/array_container_defaults":744,"../color":577,"./attributes":639,"./constants":640}],642:[function(a,p,l){function m(a){a=q.list(a,"x",!0);for(var b=[],c=0;c<a.length;c++){var d=a[c];d.rangeselector&&d.rangeselector.visible&&b.push(d)}return b}function k(a){return a._id}function h(a,b,c){if("all"===b.step)return!0===a.autorange;
b=Object.keys(c);return a.range[0]===c[b[0]]&&a.range[1]===c[b[1]]}function e(a,b,c){a=v.ensureSingle(a,"rect","selector-rect",function(a){a.attr("shape-rendering","crispEdges")});a.attr({rx:A.rx,ry:A.ry});a.call(g.stroke,b.bordercolor).call(g.fill,c._isActive||c._isHovered?b.activecolor:b.bgcolor).style("stroke-width",b.borderwidth+"px")}function f(a,d,e,g){v.ensureSingle(a,"text","selector-text",function(a){a.classed("user-select-none",!0).attr("text-anchor","middle")}).call(c.font,d.font).text(b(e,
g._fullLayout.meta)).call(function(a){t.convertToTspans(a,g)})}function b(a,b){return a.label?b?v.templateString(a.label,{meta:b}):a.label:"all"===a.step?"all":a.count+a.step.charAt(0)}function n(a,b,e,g,f){var h=0,k=0,n=e.borderwidth;b.each(function(){var a=u.select(this).select(".selector-text");a=Math.max(e.font.size*B*t.lineCount(a),16)+3;k=Math.max(k,a)});b.each(function(){var a=u.select(this),b=a.select(".selector-rect"),d=a.select(".selector-text"),g=d.node()&&c.bBox(d.node()).width,f=e.font.size*
B,m=t.lineCount(d);g=Math.max(g+10,A.minButtonWidth);a.attr("transform","translate("+(n+h)+","+n+")");b.attr({x:0,y:0,width:g,height:k});t.positionText(d,g/2,k/2-(m-1)*f/2+3);h+=g+5});var m=a._fullLayout._size;b=m.l+m.w*e.x;m=m.t+m.h*(1-e.y);var l="left";v.isRightAnchor(e)&&(b-=h,l="right");v.isCenterAnchor(e)&&(b-=h/2,l="center");var r="top";v.isBottomAnchor(e)&&(m-=k,r="bottom");v.isMiddleAnchor(e)&&(m-=k/2,r="middle");h=Math.ceil(h);k=Math.ceil(k);b=Math.round(b);m=Math.round(m);d.autoMargin(a,
g+"-range-selector",{x:e.x,y:e.y,l:h*D[l],r:h*G[l],b:k*G[r],t:k*D[r]});f.attr("transform","translate("+b+","+m+")")}var u=a("d3"),r=a("../../registry"),d=a("../../plots/plots"),g=a("../color"),c=a("../drawing"),v=a("../../lib"),t=a("../../lib/svg_text_utils"),q=a("../../plots/cartesian/axis_ids");l=a("../../constants/alignment");var B=l.LINE_SPACING,D=l.FROM_TL,G=l.FROM_BR,A=a("./constants"),C=a("./get_update_object");p.exports=function(a){var b=a._fullLayout._infolayer.selectAll(".rangeselector").data(m(a),
k);b.enter().append("g").classed("rangeselector",!0);b.exit().remove();b.style({cursor:"pointer","pointer-events":"all"});b.each(function(b){var c=u.select(this),d=b.rangeselector,g=c.selectAll("g.button").data(v.filterVisible(d.buttons));g.enter().append("g").classed("button",!0);g.exit().remove();g.each(function(c){var g=u.select(this),k=C(b,c);c._isActive=h(b,c,k);g.call(e,d,c);g.call(f,d,c,a);g.on("click",function(){a._dragged||r.call("_guiRelayout",a,k)});g.on("mouseover",function(){c._isHovered=
!0;g.call(e,d,c)});g.on("mouseout",function(){c._isHovered=!1;g.call(e,d,c)})});n(a,g,d,b._name,c)})}},{"../../constants/alignment":672,"../../lib":700,"../../lib/svg_text_utils":724,"../../plots/cartesian/axis_ids":751,"../../plots/plots":810,"../../registry":829,"../color":577,"../drawing":598,"./constants":640,"./get_update_object":643,d3:154}],643:[function(a,p,l){var m=a("d3");p.exports=function(a,h){var e=a._name,f={};if("all"===h.step)f[e+".autorange"]=!0;else{var b=a.range,k=new Date(a.r2l(b[1])),
l=h.step,r=h.count;switch(h.stepmode){case "backward":var d=a.l2r(+m.time[l].utc.offset(k,-r));break;case "todate":h=m.time[l].utc.offset(k,-r),d=a.l2r(+m.time[l].utc.ceil(h))}a=[d,b[1]];f[e+".range[0]"]=a[0];f[e+".range[1]"]=a[1]}return f}},{d3:154}],644:[function(a,p,l){p.exports={moduleType:"component",name:"rangeselector",schema:{subplots:{xaxis:{rangeselector:a("./attributes")}}},layoutAttributes:a("./attributes"),handleDefaults:a("./defaults"),draw:a("./draw")}},{"./attributes":639,"./defaults":641,
"./draw":642}],645:[function(a,p,l){a=a("../color/attributes");p.exports={bgcolor:{valType:"color",dflt:a.background,editType:"plot"},bordercolor:{valType:"color",dflt:a.defaultLine,editType:"plot"},borderwidth:{valType:"integer",dflt:0,min:0,editType:"plot"},autorange:{valType:"boolean",dflt:!0,editType:"calc",impliedEdits:{"range[0]":void 0,"range[1]":void 0}},range:{valType:"info_array",items:[{valType:"any",editType:"calc",impliedEdits:{"^autorange":!1}},{valType:"any",editType:"calc",impliedEdits:{"^autorange":!1}}],
editType:"calc",impliedEdits:{autorange:!1}},thickness:{valType:"number",dflt:.15,min:0,max:1,editType:"plot"},visible:{valType:"boolean",dflt:!0,editType:"calc"},editType:"calc"}},{"../color/attributes":576}],646:[function(a,p,l){var m=a("../../plots/cartesian/axis_ids").list,k=a("../../plots/cartesian/autorange").getAutoRange,h=a("./constants");p.exports=function(a){for(var e=m(a,"x",!0),b=0;b<e.length;b++){var n=e[b],l=n[h.name];l&&l.visible&&l.autorange&&(l._input.autorange=!0,l._input.range=
l.range=k(a,n))}}},{"../../plots/cartesian/autorange":747,"../../plots/cartesian/axis_ids":751,"./constants":647}],647:[function(a,p,l){p.exports={name:"rangeslider",containerClassName:"rangeslider-container",bgClassName:"rangeslider-bg",rangePlotClassName:"rangeslider-rangeplot",maskMinClassName:"rangeslider-mask-min",maskMaxClassName:"rangeslider-mask-max",slideBoxClassName:"rangeslider-slidebox",grabberMinClassName:"rangeslider-grabber-min",grabAreaMinClassName:"rangeslider-grabarea-min",handleMinClassName:"rangeslider-handle-min",
grabberMaxClassName:"rangeslider-grabber-max",grabAreaMaxClassName:"rangeslider-grabarea-max",handleMaxClassName:"rangeslider-handle-max",maskMinOppAxisClassName:"rangeslider-mask-min-opp-axis",maskMaxOppAxisClassName:"rangeslider-mask-max-opp-axis",maskColor:"rgba(0,0,0,0.4)",maskOppAxisColor:"rgba(0,0,0,0.2)",slideBoxFill:"transparent",slideBoxCursor:"ew-resize",grabAreaFill:"transparent",grabAreaCursor:"col-resize",grabAreaWidth:10,handleWidth:4,handleRadius:1,handleStrokeWidth:1,extraPad:15}},
{}],648:[function(a,p,l){var m=a("../../lib"),k=a("../../plot_api/plot_template"),h=a("../../plots/cartesian/axis_ids"),e=a("./attributes"),f=a("./oppaxis_attributes");p.exports=function(a,n,l){function b(a,b){return m.coerce(c,p,e,a,b)}function d(a,b){return m.coerce(u,q,f,a,b)}a=a[l];var g=n[l];if(a.rangeslider||n._requestRangeslider[g._id]){m.isPlainObject(a.rangeslider)||(a.rangeslider={});var c=a.rangeslider,p=k.newContainer(g,"rangeslider");if(b("visible")){b("bgcolor",n.plot_bgcolor);b("bordercolor");
b("borderwidth");b("thickness");b("autorange",!g.isValidRange(c.range));b("range");if(a=n._subplots)for(a=a.cartesian.filter(function(a){return a.substr(0,a.indexOf("y"))===h.name2id(l)}).map(function(a){return a.substr(a.indexOf("y"),a.length)}),a=m.simpleMap(a,h.id2name),g=0;g<a.length;g++){var t=a[g];var u=c[t]||{};var q=k.newContainer(p,t,"yaxis");t=n[t];var D;u.range&&t.isValidRange(u.range)&&(D="fixed");"match"!==d("rangemode",D)&&d("range",t.range.slice())}p._input=c}}}},{"../../lib":700,"../../plot_api/plot_template":738,
"../../plots/cartesian/axis_ids":751,"./attributes":645,"./oppaxis_attributes":652}],649:[function(a,p,l){function m(a,b,c,d){var e=a.select("rect."+x.slideBoxClassName).node(),f=a.select("rect."+x.grabAreaMinClassName).node(),h=a.select("rect."+x.grabAreaMaxClassName).node();a.on("mousedown",function(){function n(n){var m=+n.clientX-p;switch(r){case e:var t="ew-resize";n=u+m;m=q+m;break;case f:t="col-resize";n=u+m;m=q;break;case h:t="col-resize";n=u;m=q+m;break;default:t="ew-resize",n=v,m=v+m}if(m<
n){var l=m;m=n;n=l}d._pixelMin=n;d._pixelMax=m;w(g.select(y),t);k(a,b,c,d)}function m(){y.removeEventListener("mousemove",n);y.removeEventListener("mouseup",m);t.removeElement(y)}var l=g.event,r=l.target,p=l.clientX,v=p-a.node().getBoundingClientRect().left,u=d.d2p(c._rl[0]),q=d.d2p(c._rl[1]),y=C.coverSlip();y.addEventListener("mousemove",n);y.addEventListener("mouseup",m)})}function k(a,b,d,e){var g=d.l2r(t.constrain(e.p2d(e._pixelMin),e._rl[0],e._rl[1])),f=d.l2r(t.constrain(e.p2d(e._pixelMax),e._rl[0],
e._rl[1]));window.requestAnimationFrame(function(){c.call("_guiRelayout",b,d._name+".range",[g,f])})}function h(a,b,c,d,e,g){b=x.handleWidth/2;var f=t.constrain(d.d2p(c._rl[0]),0,d._width);c=t.constrain(d.d2p(c._rl[1]),0,d._width);a.select("rect."+x.slideBoxClassName).attr("x",f).attr("width",c-f);a.select("rect."+x.maskMinClassName).attr("width",f);a.select("rect."+x.maskMaxClassName).attr("x",c).attr("width",d._width-c);"match"!==g.rangemode&&(g=d._height-t.constrain(d.d2pOppAxis(e._rl[1]),0,d._height),
e=d._height-t.constrain(d.d2pOppAxis(e._rl[0]),0,d._height),a.select("rect."+x.maskMinOppAxisClassName).attr("x",f).attr("height",g).attr("width",c-f),a.select("rect."+x.maskMaxOppAxisClassName).attr("x",f).attr("y",e).attr("height",d._height-e).attr("width",c-f),a.select("rect."+x.slideBoxClassName).attr("y",g).attr("height",e-g));e=Math.round(t.constrain(f-b,-b,d._width+b))-.5;d=Math.round(t.constrain(c-b,-b,d._width+b))+.5;a.select("g."+x.grabberMinClassName).attr("transform","translate("+e+",0.5)");
a.select("g."+x.grabberMaxClassName).attr("transform","translate("+d+",0.5)")}function e(a,b,c,d){a=t.ensureSingle(a,"rect",x.bgClassName,function(a){a.attr({x:0,y:0,"shape-rendering":"crispEdges"})});c=0===d.borderwidth%2?d.borderwidth:d.borderwidth-1;var e=-d._offsetShift;b=q.crispRound(b,d.borderwidth);a.attr({width:d._width+c,height:d._height+c,transform:"translate("+e+","+e+")",fill:d.bgcolor,stroke:d.bordercolor,"stroke-width":b})}function f(a,b,c,d){t.ensureSingleById(b._fullLayout._topdefs,
"clipPath",d._clipId,function(a){a.append("rect").attr({x:0,y:0})}).select("rect").attr({width:d._width,height:d._height})}function b(a,b,c,d){var e=b.calcdata;a=a.selectAll("g."+x.rangePlotClassName).data(c._subplotsWith,t.identity);a.enter().append("g").attr("class",function(a){return x.rangePlotClassName+" "+a}).call(q.setClipUrl,d._clipId,b);a.order();a.exit().remove();var f;a.each(function(a,h){var k=g.select(this);h=0===h;var m=A.getFromId(b,a,"y"),t=m._name,l=d[t],r={data:[],layout:{xaxis:{type:c.type,
domain:[0,1],range:d.range.slice(),calendar:c.calendar},width:d._width,height:d._height,margin:{t:0,b:0,l:0,r:0}},_context:b._context};r.layout[t]={type:m.type,domain:[0,1],range:"match"!==l.rangemode?l.range.slice():m.range.slice(),calendar:m.calendar};v.supplyDefaults(r);m=r._fullLayout.xaxis;t=r._fullLayout[t];m.clearCalc();m.setScale();t.clearCalc();t.setScale();k={id:a,plotgroup:k,xaxis:m,yaxis:t,isRangePlot:!0};h?f=k:(k.mainplot="xy",k.mainplotinfo=f);G.rangePlot(b,k,n(e,a))})}function n(a,
b){for(var c=[],d=0;d<a.length;d++){var e=a[d],g=e[0].trace;g.xaxis+g.yaxis===b&&c.push(e)}return c}function u(a,b,c,d,e){t.ensureSingle(a,"rect",x.maskMinClassName,function(a){a.attr({x:0,y:0,"shape-rendering":"crispEdges"})}).attr("height",d._height).call(B.fill,x.maskColor);t.ensureSingle(a,"rect",x.maskMaxClassName,function(a){a.attr({y:0,"shape-rendering":"crispEdges"})}).attr("height",d._height).call(B.fill,x.maskColor);"match"!==e.rangemode&&(t.ensureSingle(a,"rect",x.maskMinOppAxisClassName,
function(a){a.attr({y:0,"shape-rendering":"crispEdges"})}).attr("width",d._width).call(B.fill,x.maskOppAxisColor),t.ensureSingle(a,"rect",x.maskMaxOppAxisClassName,function(a){a.attr({y:0,"shape-rendering":"crispEdges"})}).attr("width",d._width).style("border-top",x.maskOppBorder).call(B.fill,x.maskOppAxisColor))}function r(a,b,c,d){b._context.staticPlot||t.ensureSingle(a,"rect",x.slideBoxClassName,function(a){a.attr({y:0,cursor:x.slideBoxCursor,"shape-rendering":"crispEdges"})}).attr({height:d._height,
fill:x.slideBoxFill})}function d(a,b,c,d){c=t.ensureSingle(a,"g",x.grabberMinClassName);a=t.ensureSingle(a,"g",x.grabberMaxClassName);var e={x:0,width:x.handleWidth,rx:x.handleRadius,fill:B.background,stroke:B.defaultLine,"stroke-width":x.handleStrokeWidth,"shape-rendering":"crispEdges"},g={y:Math.round(d._height/4),height:Math.round(d._height/2)};t.ensureSingle(c,"rect",x.handleMinClassName,function(a){a.attr(e)}).attr(g);t.ensureSingle(a,"rect",x.handleMaxClassName,function(a){a.attr(e)}).attr(g);
if(!b._context.staticPlot){var f={width:x.grabAreaWidth,x:0,y:0,fill:x.grabAreaFill,cursor:x.grabAreaCursor};t.ensureSingle(c,"rect",x.grabAreaMinClassName,function(a){a.attr(f)}).attr("height",d._height);t.ensureSingle(a,"rect",x.grabAreaMaxClassName,function(a){a.attr(f)}).attr("height",d._height)}}var g=a("d3"),c=a("../../registry"),v=a("../../plots/plots"),t=a("../../lib"),q=a("../drawing"),B=a("../color"),D=a("../titles"),G=a("../../plots/cartesian"),A=a("../../plots/cartesian/axis_ids"),C=a("../dragelement"),
w=a("../../lib/setcursor"),x=a("./constants");p.exports=function(a){for(var c=a._fullLayout,k=c._rangeSliderData,n=0;n<k.length;n++){var l=k[n][x.name];l._clipId=l._id+"-"+c._uid}n=c._infolayer.selectAll("g."+x.containerClassName).data(k,function(a){return a._name});n.exit().each(function(a){c._topdefs.select("#"+a[x.name]._clipId).remove()}).remove();0!==k.length&&(n.enter().append("g").classed(x.containerClassName,!0).attr("pointer-events","all"),n.each(function(k){var n=g.select(this),l=k[x.name],
p=c[A.id2name(k.anchor)],v=l[A.id2name(k.anchor)];if(l.range){var q=t.simpleMap(l.range,k.r2l),y=t.simpleMap(k.range,k.r2l);l.range=l._input.range=t.simpleMap(y[0]<y[1]?[Math.min(q[0],y[0]),Math.max(q[1],y[1])]:[Math.max(q[0],y[0]),Math.min(q[1],y[1])],k.l2r)}k.cleanRange("rangeslider.range");q=c.margin;y=c._size;var B=k.domain,C=l._tickHeight,G=l._oppBottom;l._width=y.w*(B[1]-B[0]);C=Math.round(y.t+y.h*(1-G)+C+l._offsetShift+x.extraPad);n.attr("transform","translate("+Math.round(q.l+y.w*B[0])+","+
C+")");var I=k.r2l(l.range[0]);q=k.r2l(l.range[1]);var w=q-I;l.p2d=function(a){return a/l._width*w+I};l.d2p=function(a){return(a-I)/w*l._width};l._rl=[I,q];if("match"!==v.rangemode){var E=p.r2l(v.range[0]),H=p.r2l(v.range[1])-E;l.d2pOppAxis=function(a){return(a-E)/H*l._height}}n.call(e,a,k,l).call(f,a,k,l).call(b,a,k,l).call(u,a,k,l,v).call(r,a,k,l).call(d,a,k,l);m(n,a,k,l);h(n,a,k,l,p,v);"bottom"===k.side&&D.draw(a,k._id+"title",{propContainer:k,propName:k._name+".title",placeholder:c._dfltTitle.x,
attributes:{x:k._offset+k._length/2,y:C+l._height+l._offsetShift+10+1.5*k.title.font.size,"text-anchor":"middle"}})}))}},{"../../lib":700,"../../lib/setcursor":720,"../../plots/cartesian":759,"../../plots/cartesian/axis_ids":751,"../../plots/plots":810,"../../registry":829,"../color":577,"../dragelement":595,"../drawing":598,"../titles":665,"./constants":647,d3:154}],650:[function(a,p,l){function m(a){return(a=a&&a[e])&&a.visible}var k=a("../../plots/cartesian/axis_ids"),h=a("./constants"),e=h.name;
l.isVisible=m;l.makeData=function(a){var b=k.list({_fullLayout:a},"x",!0),f=a.margin,h=[];if(!a._has("gl2d"))for(var l=0;l<b.length;l++){var d=b[l];if(m(d)){h.push(d);var g=d[e];g._id=e+d._id;g._height=(a.height-f.b-f.t)*g.thickness;g._offsetShift=Math.floor(g.borderwidth/2)}}a._rangeSliderData=h};l.autoMarginOpts=function(a,b){for(var f=b[e],m=Infinity,l=b._counterAxes,d=0;d<l.length;d++){var g=k.getFromId(a,l[d]);m=Math.min(m,g.domain[0])}f._oppBottom=m;b="bottom"===b.side&&b._boundingBox.height||
0;f._tickHeight=b;return{x:0,y:m,l:0,r:0,t:0,b:f._height+a._fullLayout.margin.b+b,pad:h.extraPad+2*f._offsetShift}}},{"../../plots/cartesian/axis_ids":751,"./constants":647}],651:[function(a,p,l){l=a("../../lib");var m=a("./attributes"),k=a("./oppaxis_attributes"),h=a("./helpers");p.exports={moduleType:"component",name:"rangeslider",schema:{subplots:{xaxis:{rangeslider:l.extendFlat({},m,{yaxis:k})}}},layoutAttributes:a("./attributes"),handleDefaults:a("./defaults"),calcAutorange:a("./calc_autorange"),
draw:a("./draw"),isVisible:h.isVisible,makeData:h.makeData,autoMarginOpts:h.autoMarginOpts}},{"../../lib":700,"./attributes":645,"./calc_autorange":646,"./defaults":648,"./draw":649,"./helpers":650,"./oppaxis_attributes":652}],652:[function(a,p,l){p.exports={_isSubplotObj:!0,rangemode:{valType:"enumerated",values:["auto","fixed","match"],dflt:"match",editType:"calc"},range:{valType:"info_array",items:[{valType:"any",editType:"plot"},{valType:"any",editType:"plot"}],editType:"plot"},editType:"calc"}},
{}],653:[function(a,p,l){l=a("../annotations/attributes");var m=a("../../traces/scatter/attributes").line,k=a("../drawing/attributes").dash,h=a("../../lib/extend").extendFlat;a=a("../../plot_api/plot_template").templatedArray;p.exports=a("shape",{visible:{valType:"boolean",dflt:!0,editType:"calc+arraydraw"},type:{valType:"enumerated",values:["circle","rect","path","line"],editType:"calc+arraydraw"},layer:{valType:"enumerated",values:["below","above"],dflt:"above",editType:"arraydraw"},xref:h({},l.xref,
{}),xsizemode:{valType:"enumerated",values:["scaled","pixel"],dflt:"scaled",editType:"calc+arraydraw"},xanchor:{valType:"any",editType:"calc+arraydraw"},x0:{valType:"any",editType:"calc+arraydraw"},x1:{valType:"any",editType:"calc+arraydraw"},yref:h({},l.yref,{}),ysizemode:{valType:"enumerated",values:["scaled","pixel"],dflt:"scaled",editType:"calc+arraydraw"},yanchor:{valType:"any",editType:"calc+arraydraw"},y0:{valType:"any",editType:"calc+arraydraw"},y1:{valType:"any",editType:"calc+arraydraw"},
path:{valType:"string",editType:"calc+arraydraw"},opacity:{valType:"number",min:0,max:1,dflt:1,editType:"arraydraw"},line:{color:h({},m.color,{editType:"arraydraw"}),width:h({},m.width,{editType:"calc+arraydraw"}),dash:h({},k,{editType:"arraydraw"}),editType:"calc+arraydraw"},fillcolor:{valType:"color",dflt:"rgba(0,0,0,0)",editType:"arraydraw"},editType:"arraydraw"})},{"../../lib/extend":690,"../../plot_api/plot_template":738,"../../traces/scatter/attributes":1051,"../annotations/attributes":560,
"../drawing/attributes":597}],654:[function(a,p,l){function m(a,e,k,d,g,c){a/=2;return"pixel"===e?(k=g?b.extractPathCoords(g,c?f.paramIsY:f.paramIsX):[k,d],e=h.aggNums(Math.max,null,k),k=h.aggNums(Math.min,null,k),k=0>k?Math.abs(k)+a:a,e=0<e?e+a:a,{ppad:a,ppadplus:c?k:e,ppadminus:c?e:k}):{ppad:a}}function k(a,e,h,d,g){var c="category"===a.type||"multicategory"===a.type?a.r2c:a.d2c;if(void 0!==e)return[c(e),c(h)];if(d){e=Infinity;h=-Infinity;d=d.match(f.segmentRE);var k;"date"===a.type&&(c=b.decodeDate(c));
for(a=0;a<d.length;a++){var n=d[a];n=g[n.charAt(0)].drawn;void 0!==n&&(!(k=d[a].substr(1).match(f.paramRE))||k.length<n||(n=c(k[n]),n<e&&(e=n),n>h&&(h=n)))}if(h>=e)return[e,h]}}var h=a("../../lib"),e=a("../../plots/cartesian/axes"),f=a("./constants"),b=a("./helpers");p.exports=function(a){var b=h.filterVisible(a._fullLayout.shapes);if(b.length&&a._fullData.length)for(var n=0;n<b.length;n++){var d=b[n];d._extremes={};if("paper"!==d.xref){var g="pixel"===d.xsizemode?d.xanchor:d.x0;var c="pixel"===d.xsizemode?
d.xanchor:d.x1;var l=e.getFromId(a,d.xref);(g=k(l,g,c,d.path,f.paramIsX))&&(d._extremes[l._id]=e.findExtremes(l,g,m(d.line.width,d.xsizemode,d.x0,d.x1,d.path,!1)))}"paper"!==d.yref&&(g="pixel"===d.ysizemode?d.yanchor:d.y0,c="pixel"===d.ysizemode?d.yanchor:d.y1,l=e.getFromId(a,d.yref),(g=k(l,g,c,d.path,f.paramIsY))&&(d._extremes[l._id]=e.findExtremes(l,g,m(d.line.width,d.ysizemode,d.y0,d.y1,d.path,!0))))}}},{"../../lib":700,"../../plots/cartesian/axes":748,"./constants":655,"./helpers":658}],655:[function(a,
p,l){p.exports={segmentRE:/[MLHVQCTSZ][^MLHVQCTSZ]*/g,paramRE:/[^\s,]+/g,paramIsX:{M:{0:!0,drawn:0},L:{0:!0,drawn:0},H:{0:!0,drawn:0},V:{},Q:{0:!0,2:!0,drawn:2},C:{0:!0,2:!0,4:!0,drawn:4},T:{0:!0,drawn:0},S:{0:!0,2:!0,drawn:2},Z:{}},paramIsY:{M:{1:!0,drawn:1},L:{1:!0,drawn:1},H:{},V:{0:!0,drawn:0},Q:{1:!0,3:!0,drawn:3},C:{1:!0,3:!0,5:!0,drawn:5},T:{1:!0,drawn:1},S:{1:!0,3:!0,drawn:5},Z:{}},numParams:{M:2,L:2,H:1,V:1,Q:4,C:6,T:2,S:4,Z:0}}},{}],656:[function(a,p,l){function m(a,e,m){function d(b,c){return k.coerce(a,
e,f,b,c)}if(d("visible")){d("layer");d("opacity");d("fillcolor");d("line.color");d("line.width");d("line.dash");for(var g=d("type",a.path?"path":"rect"),c=d("xsizemode"),n=d("ysizemode"),t=["x","y"],l=0;2>l;l++){var r=t[l],p=r+"anchor",u="x"===r?c:n,q={_fullLayout:m},C=h.coerceRef(a,e,q,r,"","paper");if("paper"!==C){var w=h.getFromId(q,C);w._shapeIndices.push(e._index);var x=b.rangeToShapePosition(w);w=b.shapePositionToRange(w)}else w=x=k.identity;if("path"!==g){var E=r+"0";r+="1";var H=a[E],M=a[r];
a[E]=w(a[E],!0);a[r]=w(a[r],!0);"pixel"===u?(d(E,0),d(r,10)):(h.coercePosition(e,q,d,C,E,.25),h.coercePosition(e,q,d,C,r,.75));e[E]=x(e[E]);e[r]=x(e[r]);a[E]=H;a[r]=M}"pixel"===u&&(u=a[p],a[p]=w(a[p],!0),h.coercePosition(e,q,d,C,p,.25),e[p]=x(e[p]),a[p]=u)}"path"===g?d("path"):k.noneOrAll(a,e,["x0","x1","y0","y1"])}}var k=a("../../lib"),h=a("../../plots/cartesian/axes"),e=a("../../plots/array_container_defaults"),f=a("./attributes"),b=a("./helpers");p.exports=function(a,b){e(a,b,{name:"shapes",handleItemDefaults:m})}},
{"../../lib":700,"../../plots/array_container_defaults":744,"../../plots/cartesian/axes":748,"./attributes":653,"./helpers":658}],657:[function(a,p,l){function m(a,b){function c(c){var n={"data-index":b,"fill-rule":"evenodd",d:e(a,f)},m=f.line.width?f.line.color:"rgba(0,0,0,0)";n=c.append("path").attr(n).style("opacity",f.opacity).call(d.stroke,m).call(d.fill,f.fillcolor).call(g.dashLine,f.line.dash,f.line.width);k(n,a,f);a._context.edits.shapePosition&&h(a,n,f,b,c)}a._fullLayout._paperdiv.selectAll('.shapelayer [data-index\x3d"'+
b+'"]').remove();var f=a._fullLayout.shapes[b]||{};if(f._input&&!1!==f.visible)if("below"!==f.layer)c(a._fullLayout._shapeUpperLayer);else if("paper"===f.xref||"paper"===f.yref)c(a._fullLayout._shapeLowerLayer);else{var n=a._fullLayout._plots[f.xref+f.yref];n?c((n.mainplotinfo||n).shapelayer):c(a._fullLayout._shapeLowerLayer)}}function k(a,b,c){c=(c.xref+c.yref).replace(/paper/g,"");g.setClipUrl(a,c?"clip"+b._fullLayout._uid+c:null,b)}function h(a,d,f,h,m){function l(){var a=Math.max(f.line.width,
10),b=m.append("g").attr("data-index",h);b.append("path").attr("d",d.attr("d")).style({cursor:"move","stroke-width":a,"stroke-opacity":"0"});var c={"fill-opacity":"0"};a=10<a/2?a/2:10;b.append("circle").attr({"data-line-point":"start-point",cx:D?xa(f.xanchor)+f.x0:xa(f.x0),cy:G?za(f.yanchor)-f.y0:za(f.y0),r:a}).style(c).classed("cursor-grab",!0);b.append("circle").attr({"data-line-point":"end-point",cx:D?xa(f.xanchor)+f.x1:xa(f.x1),cy:G?za(f.yanchor)-f.y1:za(f.y1),r:a}).style(c).classed("cursor-grab",
!0);return b}function p(a){if(w)ma="path"===a.target.tagName?"move":"start-point"===a.target.attributes["data-line-point"].value?"resize-over-start-point":"resize-over-end-point";else{var b=aa.element.getBoundingClientRect(),c=b.right-b.left,e=b.bottom-b.top,g=a.clientX-b.left;b=a.clientY-b.top;a=!L&&10<c&&10<e&&!a.shiftKey?v.getCursor(g/c,1-b/e):"move";t(d,a);ma=a.split("-")[0]}}function y(c,g){if("path"===f.type){var h=function(a){return a},k=h;D?P("xanchor",f.xanchor=ka(S+c)):(k=function(a){return ka(xa(a)+
c)},ya&&"date"===ya.type&&(k=B.encodeDate(k)));G?P("yanchor",f.yanchor=wa(W+g)):(h=function(a){return wa(za(a)+g)},ja&&"date"===ja.type&&(h=B.encodeDate(h)));P("path",f.path=b(da,k,h))}else D?P("xanchor",f.xanchor=ka(S+c)):(P("x0",f.x0=ka(z+c)),P("x1",f.x1=ka(Y+c))),G?P("yanchor",f.yanchor=wa(W+g)):(P("y0",f.y0=wa(T+g)),P("y1",f.y1=wa(ia+g)));d.attr("d",e(a,f));C(m,f)}function A(c,g){if(L){var h=function(a){return a},k=h;D?P("xanchor",f.xanchor=ka(S+c)):(k=function(a){return ka(xa(a)+c)},ya&&"date"===
ya.type&&(k=B.encodeDate(k)));G?P("yanchor",f.yanchor=wa(W+g)):(h=function(a){return wa(za(a)+g)},ja&&"date"===ja.type&&(h=B.encodeDate(h)));P("path",f.path=b(da,k,h))}else if(w)"resize-over-start-point"===ma?(k=z+c,h=G?T-g:T+g,P("x0",f.x0=D?k:ka(k)),P("y0",f.y0=G?h:wa(h))):"resize-over-end-point"===ma&&(k=Y+c,h=G?ia-g:ia+g,P("x1",f.x1=D?k:ka(k)),P("y1",f.y1=G?h:wa(h)));else{k=~ma.indexOf("n")?fa+g:fa;h=~ma.indexOf("s")?F+g:F;var n=~ma.indexOf("w")?ha+c:ha,t=~ma.indexOf("e")?ea+c:ea;~ma.indexOf("n")&&
G&&(k=fa-g);~ma.indexOf("s")&&G&&(h=F-g);if(!G&&10<h-k||G&&10<k-h)P(ba,f[ba]=G?k:wa(k)),P(la,f[la]=G?h:wa(h));10<t-n&&(P(Z,f[Z]=D?n:ka(n)),P(K,f[K]=D?t:ka(t)))}d.attr("d",e(a,f));C(m,f)}function C(a,b){if(D||G){var c="path"!==b.type;a=a.selectAll(".visual-cue").data([0]);a.enter().append("path").attr({fill:"#fff","fill-rule":"evenodd",stroke:"#000","stroke-width":1}).classed("visual-cue",!0);var d=xa(D?b.xanchor:u.midRange(c?[b.x0,b.x1]:B.extractPathCoords(b.path,q.paramIsX)));b=za(G?b.yanchor:u.midRange(c?
[b.y0,b.y1]:B.extractPathCoords(b.path,q.paramIsY)));d=B.roundPositionForSharpStrokeRendering(d,1);b=B.roundPositionForSharpStrokeRendering(b,1);D&&G?a.attr("d","M"+(d-1-1)+","+(b-1-1)+"h-8v2h8 v8h2v-8 h8v-2h-8 v-8h-2 Z"):D?a.attr("d","M"+(d-1-1)+","+(b-9-1)+"v18 h2 v-18 Z"):a.attr("d","M"+(d-9-1)+","+(b-1-1)+"h18 v2 h-18 Z")}}var D="pixel"===f.xsizemode,G="pixel"===f.ysizemode,w="line"===f.type,L="path"===f.type,x=c(a.layout,"shapes",f),P=x.modifyItem,z,T,Y,ia,S,W,fa,F,ha,ea,ba,la,Z,K,da,ya=r.getFromId(a,
f.xref),ja=r.getFromId(a,f.yref),xa=B.getDataToPixel(a,ya),za=B.getDataToPixel(a,ja,!0),ka=B.getPixelToData(a,ya),wa=B.getPixelToData(a,ja,!0),ta=w?l():d,aa={element:ta.node(),gd:a,prepFn:function(b){D&&(S=xa(f.xanchor));G&&(W=za(f.yanchor));"path"===f.type?da=f.path:(z=D?f.x0:xa(f.x0),T=G?f.y0:za(f.y0),Y=D?f.x1:xa(f.x1),ia=G?f.y1:za(f.y1));z<Y?(ha=z,Z="x0",ea=Y,K="x1"):(ha=Y,Z="x1",ea=z,K="x0");!G&&T<ia||G&&T>ia?(fa=T,ba="y0",F=ia,la="y1"):(fa=ia,ba="y1",F=T,la="y0");p(b);C(m,f);b=f.xref;var c=f.yref,
e=r.getFromId(a,b),h=r.getFromId(a,c),k="";"paper"===b||e.autorange||(k+=b);"paper"===c||h.autorange||(k+=c);g.setClipUrl(d,k?"clip"+a._fullLayout._uid+k:null,a);aa.moveFn="move"===ma?y:A},doneFn:function(){t(d);m.selectAll(".visual-cue").remove();k(d,a,f);n.call("_guiRelayout",a,x.getUpdateObj())},clickFn:function(){m.selectAll(".visual-cue").remove()}},ma;v.init(aa);ta.node().onmousemove=p}function e(a,b){var c=b.type,d=r.getFromId(a,b.xref),e=r.getFromId(a,b.yref),g=a._fullLayout._size;if(d){var h=
B.shapePositionToRange(d);var k=function(a){return d._offset+d.r2p(h(a,!0))}}else k=function(a){return g.l+g.w*a};if(e){var n=B.shapePositionToRange(e);var m=function(a){return e._offset+e.r2p(n(a,!0))}}else m=function(a){return g.t+g.h*(1-a)};if("path"===c)return d&&"date"===d.type&&(k=B.decodeDate(k)),e&&"date"===e.type&&(m=B.decodeDate(m)),f(b,k,m);if("pixel"===b.xsizemode){k=k(b.xanchor);a=k+b.x0;var t=k+b.x1}else a=k(b.x0),t=k(b.x1);"pixel"===b.ysizemode?(m=m(b.yanchor),k=m-b.y0,b=m-b.y1):(k=
m(b.y0),b=m(b.y1));if("line"===c)return"M"+a+","+k+"L"+t+","+b;if("rect"===c)return"M"+a+","+k+"H"+t+"V"+b+"H"+a+"Z";c=(a+t)/2;b=(k+b)/2;a=Math.abs(c-a);k=Math.abs(b-k);m="A"+a+","+k;a=c+a+","+b;return"M"+a+m+" 0 1,1 "+(c+","+(b-k))+m+" 0 0,1 "+a+"Z"}function f(a,b,c){var d=a.xsizemode,e=a.ysizemode,g=a.xanchor,f=a.yanchor;return a.path.replace(q.segmentRE,function(a){var h=0,k=a.charAt(0),n=q.paramIsX[k],m=q.paramIsY[k],t=q.numParams[k],l=a.substr(1).replace(q.paramRE,function(a){n[h]?a="pixel"===
d?b(g)+Number(a):b(a):m[h]&&(a="pixel"===e?c(f)-Number(a):c(a));h++;h>t&&(a="X");return a});h>t&&(l=l.replace(/[\s,]*X.*/,""),u.log("Ignoring extra params in segment "+a));return k+l})}function b(a,b,c){return a.replace(q.segmentRE,function(a){var d=0,e=a.charAt(0),g=q.paramIsX[e],f=q.paramIsY[e],h=q.numParams[e];a=a.substr(1).replace(q.paramRE,function(a){if(d>=h)return a;g[d]?a=b(a):f[d]&&(a=c(a));d++;return a});return e+a})}var n=a("../../registry"),u=a("../../lib"),r=a("../../plots/cartesian/axes"),
d=a("../color"),g=a("../drawing"),c=a("../../plot_api/plot_template").arrayEditor,v=a("../dragelement"),t=a("../../lib/setcursor"),q=a("./constants"),B=a("./helpers");p.exports={draw:function(a){var b=a._fullLayout;b._shapeUpperLayer.selectAll("path").remove();b._shapeLowerLayer.selectAll("path").remove();for(var c in b._plots){var d=b._plots[c].shapelayer;d&&d.selectAll("path").remove()}for(c=0;c<b.shapes.length;c++)b.shapes[c].visible&&m(a,c)},drawOne:m}},{"../../lib":700,"../../lib/setcursor":720,
"../../plot_api/plot_template":738,"../../plots/cartesian/axes":748,"../../registry":829,"../color":577,"../dragelement":595,"../drawing":598,"./constants":655,"./helpers":658}],658:[function(a,p,l){var m=a("./constants"),k=a("../../lib");l.rangeToShapePosition=function(a){return"log"===a.type?a.r2d:function(a){return a}};l.shapePositionToRange=function(a){return"log"===a.type?a.d2r:function(a){return a}};l.decodeDate=function(a){return function(e){e.replace&&(e=e.replace("_"," "));return a(e)}};
l.encodeDate=function(a){return function(e){return a(e).replace(" ","_")}};l.extractPathCoords=function(a,e){var f=[];a.match(m.segmentRE).forEach(function(a){var b=e[a.charAt(0)].drawn;void 0!==b&&(a=a.substr(1).match(m.paramRE),!a||a.length<b||f.push(k.cleanNumber(a[b])))});return f};l.getDataToPixel=function(a,e,f){var b=a._fullLayout._size;if(e){var h=l.shapePositionToRange(e);a=function(a){return e._offset+e.r2p(h(a,!0))};"date"===e.type&&(a=l.decodeDate(a))}else a=f?function(a){return b.t+b.h*
(1-a)}:function(a){return b.l+b.w*a};return a};l.getPixelToData=function(a,e,f){var b=a._fullLayout._size;if(e){var h=l.rangeToShapePosition(e);a=function(a){return h(e.p2r(a-e._offset))}}else a=f?function(a){return 1-(a-b.t)/b.h}:function(a){return(a-b.l)/b.w};return a};l.roundPositionForSharpStrokeRendering=function(a,e){a=Math.round(a);return 1===Math.round(e%2)?a+.5:a}},{"../../lib":700,"./constants":655}],659:[function(a,p,l){l=a("./draw");p.exports={moduleType:"component",name:"shapes",layoutAttributes:a("./attributes"),
supplyLayoutDefaults:a("./defaults"),includeBasePlot:a("../../plots/cartesian/include_components")("shapes"),calcAutorange:a("./calc_autorange"),draw:l.draw,drawOne:l.drawOne}},{"../../plots/cartesian/include_components":758,"./attributes":653,"./calc_autorange":654,"./defaults":656,"./draw":657}],660:[function(a,p,l){l=a("../../plots/font_attributes");var m=a("../../plots/pad_attributes"),k=a("../../lib/extend").extendDeepAll,h=a("../../plot_api/edit_types").overrideAll,e=a("../../plots/animation_attributes"),
f=a("../../plot_api/plot_template").templatedArray;a=a("./constants");var b=f("step",{visible:{valType:"boolean",dflt:!0},method:{valType:"enumerated",values:["restyle","relayout","animate","update","skip"],dflt:"restyle"},args:{valType:"info_array",freeLength:!0,items:[{valType:"any"},{valType:"any"},{valType:"any"}]},label:{valType:"string"},value:{valType:"string"},execute:{valType:"boolean",dflt:!0}});p.exports=h(f("slider",{visible:{valType:"boolean",dflt:!0},active:{valType:"number",min:0,dflt:0},
steps:b,lenmode:{valType:"enumerated",values:["fraction","pixels"],dflt:"fraction"},len:{valType:"number",min:0,dflt:1},x:{valType:"number",min:-2,max:3,dflt:0},pad:k(m({editType:"arraydraw"}),{},{t:{dflt:20}}),xanchor:{valType:"enumerated",values:["auto","left","center","right"],dflt:"left"},y:{valType:"number",min:-2,max:3,dflt:0},yanchor:{valType:"enumerated",values:["auto","top","middle","bottom"],dflt:"top"},transition:{duration:{valType:"number",min:0,dflt:150},easing:{valType:"enumerated",
values:e.transition.easing.values,dflt:"cubic-in-out"}},currentvalue:{visible:{valType:"boolean",dflt:!0},xanchor:{valType:"enumerated",values:["left","center","right"],dflt:"left"},offset:{valType:"number",dflt:10},prefix:{valType:"string"},suffix:{valType:"string"},font:l({})},font:l({}),activebgcolor:{valType:"color",dflt:a.gripBgActiveColor},bgcolor:{valType:"color",dflt:a.railBgColor},bordercolor:{valType:"color",dflt:a.railBorderColor},borderwidth:{valType:"number",min:0,dflt:a.railBorderWidth},
ticklen:{valType:"number",min:0,dflt:a.tickLength},tickcolor:{valType:"color",dflt:a.tickColor},tickwidth:{valType:"number",min:0,dflt:1},minorticklen:{valType:"number",min:0,dflt:a.minorTickLength}}),"arraydraw","from-root")},{"../../lib/extend":690,"../../plot_api/edit_types":731,"../../plot_api/plot_template":738,"../../plots/animation_attributes":743,"../../plots/font_attributes":774,"../../plots/pad_attributes":809,"./constants":661}],661:[function(a,p,l){p.exports={name:"sliders",containerClassName:"slider-container",
groupClassName:"slider-group",inputAreaClass:"slider-input-area",railRectClass:"slider-rail-rect",railTouchRectClass:"slider-rail-touch-rect",gripRectClass:"slider-grip-rect",tickRectClass:"slider-tick-rect",inputProxyClass:"slider-input-proxy",labelsClass:"slider-labels",labelGroupClass:"slider-label-group",labelClass:"slider-label",currentValueClass:"slider-current-value",railHeight:5,menuIndexAttrName:"slider-active-index",autoMarginIdRoot:"slider-",minWidth:30,minHeight:30,textPadX:40,arrowOffsetX:4,
railRadius:2,railWidth:5,railBorder:4,railBorderWidth:1,railBorderColor:"#bec8d9",railBgColor:"#f8fafc",railInset:8,stepInset:10,gripRadius:10,gripWidth:20,gripHeight:20,gripBorder:20,gripBorderWidth:1,gripBorderColor:"#bec8d9",gripBgColor:"#f6f8fa",gripBgActiveColor:"#dbdde0",labelPadding:8,labelOffset:0,tickWidth:1,tickColor:"#333",tickOffset:25,tickLength:7,minorTickOffset:25,minorTickColor:"#333",minorTickLength:4,currentValuePadding:8,currentValueInset:0}},{}],662:[function(a,p,l){function m(a,
b,d){function g(c,d){return h.coerce(a,b,f,c,d)}for(var c=e(a,b,{name:"steps",handleItemDefaults:k}),n=0,m=0;m<c.length;m++)c[m].visible&&n++;if(2>n?b.visible=!1:g("visible"))b._stepCount=n,n=b._visibleSteps=h.filterVisible(c),m=g("active"),(c[m]||{}).visible||(b.active=n[0]._index),g("x"),g("y"),h.noneOrAll(a,b,["x","y"]),g("xanchor"),g("yanchor"),g("len"),g("lenmode"),g("pad.t"),g("pad.r"),g("pad.b"),g("pad.l"),h.coerceFont(g,"font",d.font),g("currentvalue.visible")&&(g("currentvalue.xanchor"),
g("currentvalue.prefix"),g("currentvalue.suffix"),g("currentvalue.offset"),h.coerceFont(g,"currentvalue.font",b.font)),g("transition.duration"),g("transition.easing"),g("bgcolor"),g("activebgcolor"),g("bordercolor"),g("borderwidth"),g("ticklen"),g("tickwidth"),g("tickcolor"),g("minorticklen")}function k(a,b){function d(c,d){return h.coerce(a,b,n,c,d)}if("skip"===a.method||Array.isArray(a.args)?d("visible"):b.visible=!1){d("method");d("args");var e=d("label","step-"+b._index);d("value",e);d("execute")}}
var h=a("../../lib"),e=a("../../plots/array_container_defaults"),f=a("./attributes"),b=a("./constants").name,n=f.steps;p.exports=function(a,f){e(a,f,{name:b,handleItemDefaults:m})}},{"../../lib":700,"../../plots/array_container_defaults":744,"./attributes":660,"./constants":661}],663:[function(a,p,l){function m(a,b){a=a[O.name];for(var c=[],d=0;d<a.length;d++){var e=a[d];e.visible&&(e._gd=b,c.push(e))}return c}function k(a){return a._index}function h(a,b){var c=x.tester.selectAll("g."+O.labelGroupClass).data(b._visibleSteps);
c.enter().append("g").classed(O.labelGroupClass,!0);var d=0,e=0;c.each(function(a){var c=A.select(this);if(a=n(c,{step:a},b).node())a=x.bBox(a),e=Math.max(e,a.height),d=Math.max(d,a.width)});c.remove();var g=b._dims={};g.inputAreaWidth=Math.max(O.railWidth,O.gripHeight);var h=a._fullLayout._size;g.lx=h.l+h.w*b.x;g.ly=h.t+h.h*(1-b.y);g.outerLength="fraction"===b.lenmode?Math.round(h.w*b.len):b.len;g.inputAreaStart=0;g.inputAreaLength=Math.round(g.outerLength-b.pad.l-b.pad.r);g.labelStride=Math.max(1,
Math.ceil((d+O.labelPadding)/((g.inputAreaLength-2*O.stepInset)/(b._stepCount-1))));g.labelHeight=e;g.currentValueMaxWidth=0;g.currentValueHeight=0;g.currentValueTotalHeight=0;g.currentValueMaxLines=1;if(b.currentvalue.visible){var k=x.tester.append("g");c.each(function(a){var c=f(k,b,a.label);a=c.node()&&x.bBox(c.node())||{width:0,height:0};c=H.lineCount(c);g.currentValueMaxWidth=Math.max(g.currentValueMaxWidth,Math.ceil(a.width));g.currentValueHeight=Math.max(g.currentValueHeight,Math.ceil(a.height));
g.currentValueMaxLines=Math.max(g.currentValueMaxLines,c)});g.currentValueTotalHeight=g.currentValueHeight+b.currentvalue.offset;k.remove()}g.height=g.currentValueTotalHeight+O.tickOffset+b.ticklen+O.labelOffset+g.labelHeight+b.pad.t+b.pad.b;c="left";E.isRightAnchor(b)&&(g.lx-=g.outerLength,c="right");E.isCenterAnchor(b)&&(g.lx-=g.outerLength/2,c="center");h="top";E.isBottomAnchor(b)&&(g.ly-=g.height,h="bottom");E.isMiddleAnchor(b)&&(g.ly-=g.height/2,h="middle");g.outerLength=Math.ceil(g.outerLength);
g.height=Math.ceil(g.height);g.lx=Math.round(g.lx);g.ly=Math.round(g.ly);h={y:b.y,b:g.height*N[h],t:g.height*Q[h]};"fraction"===b.lenmode?(h.l=0,h.xl=b.x-b.len*Q[c],h.r=0,h.xr=b.x+b.len*N[c]):(h.x=b.x,h.l=g.outerLength*Q[c],h.r=g.outerLength*N[c]);C.autoMargin(a,O.autoMarginIdRoot+b._index,h)}function e(a,d,e){(e.steps[e.active]||{}).visible||(e.active=e._visibleSteps[0]._index);d.call(f,e).call(G,e).call(u,e).call(c,e).call(D,a,e).call(b,a,e);a=e._dims;x.setTranslate(d,a.lx+e.pad.l,a.ly+e.pad.t);
d.call(t,e,!1);d.call(f,e)}function f(a,b,c){if(b.currentvalue.visible){var d=b._dims;switch(b.currentvalue.xanchor){case "right":var e=d.inputAreaLength-O.currentValueInset-d.currentValueMaxWidth;var g="left";break;case "center":e=.5*d.inputAreaLength;g="middle";break;default:e=O.currentValueInset,g="left"}a=E.ensureSingle(a,"text",O.labelClass,function(a){a.classed("user-select-none",!0).attr({"text-anchor":g,"data-notex":1})});var f=b.currentvalue.prefix?b.currentvalue.prefix:"";if("string"===
typeof c)f+=c;else{c=b.steps[b.active].label;var h=b._gd._fullLayout.meta;h&&(c=E.templateString(c,{meta:h}));f+=c}b.currentvalue.suffix&&(f+=b.currentvalue.suffix);a.call(x.font,b.currentvalue.font).text(f).call(H.convertToTspans,b._gd);f=H.lineCount(a);H.positionText(a,e,(d.currentValueMaxLines+1-f)*b.currentvalue.font.size*I);return a}}function b(a,b,c){E.ensureSingle(a,"rect",O.gripRectClass,function(d){d.call(g,b,a,c).style("pointer-events","all")}).attr({width:O.gripWidth,height:O.gripHeight,
rx:O.gripRadius,ry:O.gripRadius}).call(w.stroke,c.bordercolor).call(w.fill,c.bgcolor).style("stroke-width",c.borderwidth+"px")}function n(a,b,c){a=E.ensureSingle(a,"text",O.labelClass,function(a){a.classed("user-select-none",!0).attr({"text-anchor":"middle","data-notex":1})});b=b.step.label;var d=c._gd._fullLayout.meta;d&&(b=E.templateString(b,{meta:d}));a.call(x.font,c.font).text(b).call(H.convertToTspans,c._gd);return a}function u(a,b){a=E.ensureSingle(a,"g",O.labelsClass);var c=b._dims;a=a.selectAll("g."+
O.labelGroupClass).data(c.labelSteps);a.enter().append("g").classed(O.labelGroupClass,!0);a.exit().remove();a.each(function(a){var d=A.select(this);d.call(n,a,b);x.setTranslate(d,q(b,a.fraction),O.tickOffset+b.ticklen+b.font.size*I+O.labelOffset+c.currentValueTotalHeight)})}function r(a,b,c,e,g){e=c._visibleSteps[Math.round(e*(c._stepCount-1))]._index;e!==c.active&&d(a,b,c,e,!0,g)}function d(a,b,c,d,e,g){var h=c.active;c.active=d;M(a.layout,O.name,c).applyUpdate("active",d);d=c.steps[c.active];b.call(t,
c,g);b.call(f,c);a.emit("plotly_sliderchange",{slider:c,step:c.steps[c.active],interaction:e,previousActive:h});d&&d.method&&e&&(b._nextMethod?(b._nextMethod.step=d,b._nextMethod.doCallback=e,b._nextMethod.doTransition=g):(b._nextMethod={step:d,doCallback:e,doTransition:g},b._nextMethodRaf=window.requestAnimationFrame(function(){var c=b._nextMethod.step;c.method&&(c.execute&&C.executeAPICommand(a,c.method,c.args),b._nextMethod=null,b._nextMethodRaf=null)})))}function g(a,b,c){var d=c.node(),e=A.select(b);
a.on("mousedown",function(){var a=c.data()[0];b.emit("plotly_sliderstart",{slider:a});var g=c.select("."+O.gripRectClass);A.event.stopPropagation();A.event.preventDefault();g.call(w.fill,a.activebgcolor);var f=B(a,A.mouse(d)[0]);r(b,c,a,f,!0);a._dragging=!0;e.on("mousemove",function(){var a=c.data()[0],e=B(a,A.mouse(d)[0]);r(b,c,a,e,!1)});e.on("mouseup",function(){var a=c.data()[0];a._dragging=!1;g.call(w.fill,a.bgcolor);e.on("mouseup",null);e.on("mousemove",null);b.emit("plotly_sliderend",{slider:a,
step:a.steps[a.active]})})})}function c(a,b){a=a.selectAll("rect."+O.tickRectClass).data(b._visibleSteps);var c=b._dims;a.enter().append("rect").classed(O.tickRectClass,!0);a.exit().remove();a.attr({width:b.tickwidth+"px","shape-rendering":"crispEdges"});a.each(function(a,d){a=0===d%c.labelStride;var e=A.select(this);e.attr({height:a?b.ticklen:b.minorticklen}).call(w.fill,b.tickcolor);x.setTranslate(e,q(b,d/(b._stepCount-1))-.5*b.tickwidth,(a?O.tickOffset:O.minorTickOffset)+c.currentValueTotalHeight)})}
function v(a){var b=a._dims;b.labelSteps=[];for(var c=a._stepCount,d=0;d<c;d+=b.labelStride)b.labelSteps.push({fraction:d/(c-1),step:a._visibleSteps[d]})}function t(a,b,c){a=a.select("rect."+O.gripRectClass);for(var d=0,e=0;e<b._stepCount;e++)if(b._visibleSteps[e]._index===b.active){d=e;break}d=q(b,d/(b._stepCount-1));b._invokingCommand||(c&&0<b.transition.duration&&(a=a.transition().duration(b.transition.duration).ease(b.transition.easing)),a.attr("transform","translate("+(d-.5*O.gripWidth)+","+
b._dims.currentValueTotalHeight+")"))}function q(a,b){a=a._dims;return a.inputAreaStart+O.stepInset+(a.inputAreaLength-2*O.stepInset)*Math.min(1,Math.max(0,b))}function B(a,b){a=a._dims;return Math.min(1,Math.max(0,(b-O.stepInset-a.inputAreaStart)/(a.inputAreaLength-2*O.stepInset-2*a.inputAreaStart)))}function D(a,b,c){var d=c._dims,e=E.ensureSingle(a,"rect",O.railTouchRectClass,function(d){d.call(g,b,a,c).style("pointer-events","all")});e.attr({width:d.inputAreaLength,height:Math.max(d.inputAreaWidth,
O.tickOffset+c.ticklen+d.labelHeight)}).call(w.fill,c.bgcolor).attr("opacity",0);x.setTranslate(e,0,d.currentValueTotalHeight)}function G(a,b){var c=b._dims,d=c.inputAreaLength-2*O.railInset;a=E.ensureSingle(a,"rect",O.railRectClass);a.attr({width:d,height:O.railWidth,rx:O.railRadius,ry:O.railRadius,"shape-rendering":"crispEdges"}).call(w.stroke,b.bordercolor).call(w.fill,b.bgcolor).style("stroke-width",b.borderwidth+"px");x.setTranslate(a,O.railInset,.5*(c.inputAreaWidth-O.railWidth)+c.currentValueTotalHeight)}
var A=a("d3"),C=a("../../plots/plots"),w=a("../color"),x=a("../drawing"),E=a("../../lib"),H=a("../../lib/svg_text_utils"),M=a("../../plot_api/plot_template").arrayEditor,O=a("./constants");a=a("../../constants/alignment");var I=a.LINE_SPACING,Q=a.FROM_TL,N=a.FROM_BR;p.exports=function(a){function b(b){b._commandObserver&&(b._commandObserver.remove(),delete b._commandObserver);C.autoMargin(a,O.autoMarginIdRoot+b._index)}var c=a._fullLayout,g=m(c,a);c=c._infolayer.selectAll("g."+O.containerClassName).data(0<
g.length?[0]:[]);c.enter().append("g").classed(O.containerClassName,!0).style("cursor","ew-resize");c.exit().each(function(){A.select(this).selectAll("g."+O.groupClassName).each(b)}).remove();if(0!==g.length){c=c.selectAll("g."+O.groupClassName).data(g,k);c.enter().append("g").classed(O.groupClassName,!0);c.exit().each(b).remove();for(var f=0;f<g.length;f++)h(a,g[f]);c.each(function(b){var c=A.select(this);v(b);C.manageCommandObserver(a,b,b._visibleSteps,function(b){var e=c.data()[0];e.active!==b.index&&
(e._dragging||d(a,c,e,b.index,!1,!0))});e(a,A.select(this),b)})}}},{"../../constants/alignment":672,"../../lib":700,"../../lib/svg_text_utils":724,"../../plot_api/plot_template":738,"../../plots/plots":810,"../color":577,"../drawing":598,"./constants":661,d3:154}],664:[function(a,p,l){l=a("./constants");p.exports={moduleType:"component",name:l.name,layoutAttributes:a("./attributes"),supplyLayoutDefaults:a("./defaults"),draw:a("./draw")}},{"./attributes":660,"./constants":661,"./defaults":662,"./draw":663}],
665:[function(a,p,l){var m=a("d3"),k=a("fast-isnumeric"),h=a("../../plots/plots"),e=a("../../registry"),f=a("../../lib"),b=a("../drawing"),n=a("../color"),u=a("../../lib/svg_text_utils"),r=a("../../constants/interactions");p.exports={draw:function(a,c,l){function g(a){f.syncOrAsync([p,v],a)}function p(b){if(E){var c="";E.rotate&&(c+="rotate("+[E.rotate,x.x,x.y]+")");E.offset&&(c+="translate(0, "+E.offset+")")}else c=null;b.attr("transform",c);b.style({"font-family":N,"font-size":m.round(L,2)+"px",
fill:n.rgb(R),opacity:O*n.opacity(R),"font-weight":h.fontWeight}).attr(x).call(u.convertToTspans,a);return h.previousPromises(a)}function v(a){a=m.select(a.node().parentNode);if(w&&w.selection&&w.side&&Q){a.attr("transform",null);var c=0,d={left:"right",right:"left",top:"bottom",bottom:"top"}[w.side],e=-1!==["left","top"].indexOf(w.side)?-1:1,g=k(w.pad)?w.pad:2,h=b.bBox(a.node()),n={left:0,top:0,right:M.width,bottom:M.height};n=w.maxShift||(n[w.side]-h[w.side])*("left"===w.side||"top"===w.side?-1:
1);if(0>n)c=n;else{var t=w.offsetLeft||0,l=w.offsetTop||0;h.left-=t;h.right-=t;h.top-=l;h.bottom-=l;w.selection.each(function(){var a=b.bBox(this);f.bBoxIntersect(h,a,g)&&(c=Math.max(c,e*(a[w.side]-h[d])+g))});c=Math.min(n,c)}(0<c||0>n)&&a.attr("transform","translate("+{left:[-c,0],right:[c,0],top:[0,-c],bottom:[0,c]}[w.side]+")")}}function q(){O=0;I=!0;z.text(A).on("mouseover.opacity",function(){m.select(this).transition().duration(r.SHOW_PLACEHOLDER).style("opacity",1)}).on("mouseout.opacity",function(){m.select(this).transition().duration(r.HIDE_PLACEHOLDER).style("opacity",
0)})}var G=l.propName,A=l.placeholder,C=l.traceIndex,w=l.avoid||{},x=l.attributes,E=l.transform,H=l.containerGroup,M=a._fullLayout,O=1,I=!1;l=l.propContainer.title;var Q=(l&&l.text?l.text:"").trim();l=l&&l.font?l.font:{};var N=l.family,L=l.size,R=l.color,ca;"title.text"===G?ca="titleText":-1!==G.indexOf("axis")?ca="axisTitleText":G.indexOf(!0)&&(ca="colorbarTitleText");ca=a._context.edits[ca];""===Q?O=0:Q.replace(d," % ")===A.replace(d," % ")&&(O=.2,I=!0,ca||(Q=""));M.meta&&(Q=f.templateString(Q,
{meta:M.meta}));l=Q||ca;H||(H=f.ensureSingle(M._infolayer,"g","g-"+c));var z=H.selectAll("text").data(l?[0]:[]);z.enter().append("text");z.text(Q).attr("class",c);z.exit().remove();if(!l)return H;z.call(g);if(ca){if(Q)z.on(".opacity",null);else q();z.call(u.makeEditable,{gd:a}).on("edit",function(b){void 0!==C?e.call("_guiRestyle",a,G,b,C):e.call("_guiRelayout",a,G,b)}).on("cancel",function(){this.text(this.attr("data-unformatted")).call(g)}).on("input",function(a){this.text(a||" ").call(u.positionText,
x.x,x.y)})}z.classed("js-placeholder",I);return H}};var d=/ [XY][0-9]* /},{"../../constants/interactions":676,"../../lib":700,"../../lib/svg_text_utils":724,"../../plots/plots":810,"../../registry":829,"../color":577,"../drawing":598,d3:154,"fast-isnumeric":221}],666:[function(a,p,l){l=a("../../plots/font_attributes");var m=a("../color/attributes"),k=a("../../lib/extend").extendFlat,h=a("../../plot_api/edit_types").overrideAll,e=a("../../plots/pad_attributes");a=a("../../plot_api/plot_template").templatedArray;
var f=a("button",{visible:{valType:"boolean"},method:{valType:"enumerated",values:["restyle","relayout","animate","update","skip"],dflt:"restyle"},args:{valType:"info_array",freeLength:!0,items:[{valType:"any"},{valType:"any"},{valType:"any"}]},label:{valType:"string",dflt:""},execute:{valType:"boolean",dflt:!0}});p.exports=h(a("updatemenu",{_arrayAttrRegexps:[/^updatemenus\[(0|[1-9][0-9]+)\]\.buttons/],visible:{valType:"boolean"},type:{valType:"enumerated",values:["dropdown","buttons"],dflt:"dropdown"},
direction:{valType:"enumerated",values:["left","right","up","down"],dflt:"down"},active:{valType:"integer",min:-1,dflt:0},showactive:{valType:"boolean",dflt:!0},buttons:f,x:{valType:"number",min:-2,max:3,dflt:-.05},xanchor:{valType:"enumerated",values:["auto","left","center","right"],dflt:"right"},y:{valType:"number",min:-2,max:3,dflt:1},yanchor:{valType:"enumerated",values:["auto","top","middle","bottom"],dflt:"top"},pad:k(e({editType:"arraydraw"}),{}),font:l({}),bgcolor:{valType:"color"},bordercolor:{valType:"color",
dflt:m.borderLine},borderwidth:{valType:"number",min:0,dflt:1,editType:"arraydraw"}}),"arraydraw","from-root")},{"../../lib/extend":690,"../../plot_api/edit_types":731,"../../plot_api/plot_template":738,"../../plots/font_attributes":774,"../../plots/pad_attributes":809,"../color/attributes":576}],667:[function(a,p,l){p.exports={name:"updatemenus",containerClassName:"updatemenu-container",headerGroupClassName:"updatemenu-header-group",headerClassName:"updatemenu-header",headerArrowClassName:"updatemenu-header-arrow",
dropdownButtonGroupClassName:"updatemenu-dropdown-button-group",dropdownButtonClassName:"updatemenu-dropdown-button",buttonClassName:"updatemenu-button",itemRectClassName:"updatemenu-item-rect",itemTextClassName:"updatemenu-item-text",menuIndexAttrName:"updatemenu-active-index",autoMarginIdRoot:"updatemenu-",blankHeaderOpts:{label:"  "},minWidth:30,minHeight:30,textPadX:24,arrowPadX:16,rx:2,ry:2,textOffsetX:12,textOffsetY:3,arrowOffsetX:4,gapButtonHeader:5,gapButton:2,activeColor:"#F4FAFF",hoverColor:"#F4FAFF",
arrowSymbol:{left:"◄",right:"►",up:"▲",down:"▼"}}},{}],668:[function(a,p,l){function m(a,b,d){function g(c,d){return h.coerce(a,b,f,c,d)}var c=e(a,b,{name:"buttons",handleItemDefaults:k});g("visible",0<c.length)&&(g("active"),g("direction"),g("type"),g("showactive"),g("x"),g("y"),h.noneOrAll(a,b,["x","y"]),g("xanchor"),g("yanchor"),g("pad.t"),g("pad.r"),g("pad.b"),g("pad.l"),h.coerceFont(g,"font",d.font),g("bgcolor",d.paper_bgcolor),g("bordercolor"),g("borderwidth"))}function k(a,b){function d(d,
c){return h.coerce(a,b,n,d,c)}d("visible","skip"===a.method||Array.isArray(a.args))&&(d("method"),d("args"),d("label"),d("execute"))}var h=a("../../lib"),e=a("../../plots/array_container_defaults"),f=a("./attributes"),b=a("./constants").name,n=f.buttons;p.exports=function(a,f){e(a,f,{name:b,handleItemDefaults:m})}},{"../../lib":700,"../../plots/array_container_defaults":744,"./attributes":666,"./constants":667}],669:[function(a,p,l){function m(a){return a._index}function k(a,b){return+a.attr(M.menuIndexAttrName)===
b._index}function h(a,b,c,d,g,h,k,n){b.active=k;E(a.layout,M.name,b).applyUpdate("active",k);"buttons"===b.type?f(a,d,null,null,b):"dropdown"===b.type&&(g.attr(M.menuIndexAttrName,"-1"),e(a,d,g,h,b),n||f(a,d,g,h,b))}function e(a,b,d,e,g){var h=w.ensureSingle(b,"g",M.headerClassName,function(a){a.style("pointer-events","all")}),n=g._dims,m={y:g.pad.t,yPad:0,x:g.pad.l,xPad:0,index:0},t={width:n.headerWidth,height:n.headerHeight};h.call(u,g,g.buttons[g.active]||M.blankHeaderOpts,a).call(q,g,m,t);w.ensureSingle(b,
"text",M.headerArrowClassName,function(a){a.classed("user-select-none",!0).attr("text-anchor","end").call(C.font,g.font).text(M.arrowSymbol[g.direction])}).attr({x:n.headerWidth-M.arrowOffsetX+g.pad.l,y:n.headerHeight/2+M.textOffsetY+g.pad.t});h.on("click",function(){d.call(B,String(k(d,g)?-1:g._index));f(a,b,d,e,g)});h.on("mouseover",function(){h.call(c)});h.on("mouseout",function(){h.call(v,g)});C.setTranslate(b,n.lx,n.ly)}function f(a,d,e,f,k){e||(e=d,e.attr("pointer-events","all"));var m=-1!==
+e.attr(M.menuIndexAttrName)||"buttons"===k.type?k.buttons:[],t="dropdown"===k.type?M.dropdownButtonClassName:M.buttonClassName,l=e.selectAll("g."+t).data(w.filterVisible(m));m=l.enter().append("g").classed(t,!0);t=l.exit();"dropdown"===k.type?(m.attr("opacity","0").transition().attr("opacity","1"),t.transition().attr("opacity","0").remove()):t.remove();var r=0,p=0;m=k._dims;t=-1!==["up","down"].indexOf(k.direction);"dropdown"===k.type&&(t?p=m.headerHeight+M.gapButtonHeader:r=m.headerWidth+M.gapButtonHeader);
"dropdown"===k.type&&"up"===k.direction&&(p=-M.gapButtonHeader+M.gapButton-m.openHeight);"dropdown"===k.type&&"left"===k.direction&&(r=-M.gapButtonHeader+M.gapButton-m.openWidth);var y={x:m.lx+r+k.pad.l,y:m.ly+p+k.pad.t,yPad:M.gapButton,xPad:M.gapButton,index:0};r={l:y.x+k.borderwidth,t:y.y+k.borderwidth};l.each(function(b,n){var m=D.select(this);m.call(u,k,b,a).call(q,k,y);m.on("click",function(){D.event.defaultPrevented||(h(a,k,b,d,e,f,n),b.execute&&G.executeAPICommand(a,b.method,b.args),a.emit("plotly_buttonclicked",
{menu:k,button:b,active:k.active}))});m.on("mouseover",function(){m.call(c)});m.on("mouseout",function(){m.call(v,k);l.call(g,k)})});l.call(g,k);t?(r.w=Math.max(m.openWidth,m.headerWidth),r.h=y.y-r.t):(r.w=y.x-r.l,r.h=Math.max(m.openHeight,m.headerHeight));r.direction=k.direction;f&&(l.size()?b(a,d,e,f,k,r):n(f))}function b(a,b,c,d,e,g){b=e.direction;a=e._dims;e=e.active;var f,h;if("up"===b||"down"===b)for(b=h=0;b<e;b++)h+=a.heights[b]+M.gapButton;else for(b=f=0;b<e;b++)f+=a.widths[b]+M.gapButton;
d.enable(g,f,h);d.hbar&&d.hbar.attr("opacity","0").transition().attr("opacity","1");d.vbar&&d.vbar.attr("opacity","0").transition().attr("opacity","1")}function n(a){var b=!!a.hbar,c=!!a.vbar;b&&a.hbar.transition().attr("opacity","0").each("end",function(){b=!1;c||a.disable()});c&&a.vbar.transition().attr("opacity","0").each("end",function(){c=!1;b||a.disable()})}function u(a,b,c,e){a.call(r,b).call(d,b,c,e)}function r(a,b){w.ensureSingle(a,"rect",M.itemRectClassName,function(a){a.attr({rx:M.rx,ry:M.ry,
"shape-rendering":"crispEdges"})}).call(A.stroke,b.bordercolor).call(A.fill,b.bgcolor).style("stroke-width",b.borderwidth+"px")}function d(a,b,c,d){a=w.ensureSingle(a,"text",M.itemTextClassName,function(a){a.classed("user-select-none",!0).attr({"text-anchor":"start","data-notex":1})});c=c.label;var e=d._fullLayout.meta;e&&(c=w.templateString(c,{meta:e}));a.call(C.font,b.font).text(c).call(x.convertToTspans,d)}function g(a,b){var c=b.active;a.each(function(a,d){a=D.select(this);d===c&&b.showactive&&
a.select("rect."+M.itemRectClassName).call(A.fill,M.activeColor)})}function c(a){a.select("rect."+M.itemRectClassName).call(A.fill,M.hoverColor)}function v(a,b){a.select("rect."+M.itemRectClassName).call(A.fill,b.bgcolor)}function t(a,b){var c=b._dims={width1:0,height1:0,heights:[],widths:[],totalWidth:0,totalHeight:0,openWidth:0,openHeight:0,lx:0,ly:0},d=C.tester.selectAll("g."+M.dropdownButtonClassName).data(w.filterVisible(b.buttons));d.enter().append("g").classed(M.dropdownButtonClassName,!0);
var e=-1!==["up","down"].indexOf(b.direction);d.each(function(d,g){var f=D.select(this);f.call(u,b,d,a);f=f.select("."+M.itemTextClassName);d=f.node()&&C.bBox(f.node()).width;d=Math.max(d+M.textPadX,M.minWidth);var h=b.font.size*H;f=x.lineCount(f);f=Math.max(h*f,M.minHeight)+M.textOffsetY;f=Math.ceil(f);d=Math.ceil(d);c.widths[g]=d;c.heights[g]=f;c.height1=Math.max(c.height1,f);c.width1=Math.max(c.width1,d);e?(c.totalWidth=Math.max(c.totalWidth,d),c.openWidth=c.totalWidth,c.totalHeight+=f+M.gapButton,
c.openHeight+=f+M.gapButton):(c.totalWidth+=d+M.gapButton,c.openWidth+=d+M.gapButton,c.totalHeight=Math.max(c.totalHeight,f),c.openHeight=c.totalHeight)});e?c.totalHeight-=M.gapButton:c.totalWidth-=M.gapButton;c.headerWidth=c.width1+M.arrowPadX;c.headerHeight=c.height1;"dropdown"===b.type&&(e?(c.width1+=M.arrowPadX,c.totalHeight=c.height1):c.totalWidth=c.width1,c.totalWidth+=M.arrowPadX);d.remove();d=c.totalWidth+b.pad.l+b.pad.r;var g=c.totalHeight+b.pad.t+b.pad.b,f=a._fullLayout._size;c.lx=f.l+f.w*
b.x;c.ly=f.t+f.h*(1-b.y);f="left";w.isRightAnchor(b)&&(c.lx-=d,f="right");w.isCenterAnchor(b)&&(c.lx-=d/2,f="center");var h="top";w.isBottomAnchor(b)&&(c.ly-=g,h="bottom");w.isMiddleAnchor(b)&&(c.ly-=g/2,h="middle");c.totalWidth=Math.ceil(c.totalWidth);c.totalHeight=Math.ceil(c.totalHeight);c.lx=Math.round(c.lx);c.ly=Math.round(c.ly);G.autoMargin(a,M.autoMarginIdRoot+b._index,{x:b.x,y:b.y,l:d*({right:1,center:.5}[f]||0),r:d*({left:1,center:.5}[f]||0),b:g*({top:1,middle:.5}[h]||0),t:g*({bottom:1,middle:.5}[h]||
0)})}function q(a,b,c,d){d=d||{};var e=a.select("."+M.itemRectClassName),g=a.select("."+M.itemTextClassName),f=b.borderwidth,h=c.index,k=b._dims;C.setTranslate(a,f+c.x,f+c.y);a=-1!==["up","down"].indexOf(b.direction);f=d.height||(a?k.heights[h]:k.height1);e.attr({x:0,y:0,width:d.width||(a?k.width1:k.widths[h]),height:f});b=b.font.size*H;d=x.lineCount(g);x.positionText(g,M.textOffsetX,f/2-(d-1)*b/2+M.textOffsetY);a?c.y+=k.heights[h]+c.yPad:c.x+=k.widths[h]+c.xPad;c.index++}function B(a,b){a.attr(M.menuIndexAttrName,
b||"-1").selectAll("g."+M.dropdownButtonClassName).remove()}var D=a("d3"),G=a("../../plots/plots"),A=a("../color"),C=a("../drawing"),w=a("../../lib"),x=a("../../lib/svg_text_utils"),E=a("../../plot_api/plot_template").arrayEditor,H=a("../../constants/alignment").LINE_SPACING,M=a("./constants"),O=a("./scrollbox");p.exports=function(a){function b(b){G.autoMargin(a,M.autoMarginIdRoot+b._index)}var c=a._fullLayout,d=w.filterVisible(c[M.name]),g=c._menulayer.selectAll("g."+M.containerClassName).data(0<
d.length?[0]:[]);g.enter().append("g").classed(M.containerClassName,!0).style("cursor","pointer");g.exit().each(function(){D.select(this).selectAll("g."+M.headerGroupClassName).each(b)}).remove();if(0!==d.length){var n=g.selectAll("g."+M.headerGroupClassName).data(d,m);n.enter().append("g").classed(M.headerGroupClassName,!0);var l=w.ensureSingle(g,"g",M.dropdownButtonGroupClassName,function(a){a.style("pointer-events","all")});for(g=0;g<d.length;g++)t(a,d[g]);var r=new O(a,l,"updatemenus"+c._uid);
n.enter().size()&&(l.node().parentNode.appendChild(l.node()),l.call(B));n.exit().each(function(a){l.call(B);b(a)}).remove();n.each(function(b){var c=D.select(this),d="dropdown"===b.type?l:null;G.manageCommandObserver(a,b,b.buttons,function(e){h(a,b,b.buttons[e.index],c,d,r,e.index,!0)});"dropdown"===b.type?(e(a,c,l,r,b),k(l,b)&&f(a,c,l,r,b)):f(a,c,null,null,b)})}}},{"../../constants/alignment":672,"../../lib":700,"../../lib/svg_text_utils":724,"../../plot_api/plot_template":738,"../../plots/plots":810,
"../color":577,"../drawing":598,"./constants":667,"./scrollbox":671,d3:154}],670:[function(a,p,l){arguments[4][664][0].apply(l,arguments)},{"./attributes":666,"./constants":667,"./defaults":668,"./draw":669,dup:664}],671:[function(a,p,l){function m(a,e,f){this.gd=a;this.container=e;this.id=f;this.vbar=this.hbar=this.translateY=this.translateX=this.position=null;this.bg=this.container.selectAll("rect.scrollbox-bg").data([0]);this.bg.exit().on(".drag",null).on("wheel",null).remove();this.bg.enter().append("rect").classed("scrollbox-bg",
!0).style("pointer-events","all").attr({opacity:0,x:0,y:0,width:0,height:0})}p.exports=m;var k=a("d3"),h=a("../color"),e=a("../drawing"),f=a("../../lib");m.barWidth=2;m.barLength=20;m.barRadius=2;m.barPad=1;m.barColor="#808BA4";m.prototype.enable=function(a,f,l){var b=this.gd._fullLayout,d=b.width,g=b.height;this.position=a;a=this.position.l;var c=this.position.w,n=this.position.t,t=this.position.h,p=this.position.direction,u="down"===p,q="left"===p,G="up"===p,A=c,C=t;u||q||"right"===p||G||(this.position.direction=
"down",u=!0);if(u||G){var w=a;var x=w+A;u?(G=n,p=Math.min(G+C,g)):(p=n+C,G=Math.max(p-C,0));C=p-G}else G=n,p=G+C,q?(x=a+A,w=Math.max(x-A,0)):(w=a,x=Math.min(w+A,d)),A=x-w;this._box={l:w,t:G,w:A,h:C};u=c>A;var E=m.barLength+2*m.barPad;q=m.barWidth+2*m.barPad;var H=n+t;H+q>g&&(H=g-q);g=this.container.selectAll("rect.scrollbar-horizontal").data(u?[0]:[]);g.exit().on(".drag",null).remove();g.enter().append("rect").classed("scrollbar-horizontal",!0).call(h.fill,m.barColor);u?(this.hbar=g.attr({rx:m.barRadius,
ry:m.barRadius,x:a,y:H,width:E,height:q}),this._hbarXMin=a+E/2,this._hbarTranslateMax=A-E):(delete this.hbar,delete this._hbarXMin,delete this._hbarTranslateMax);g=t>C;A=m.barWidth+2*m.barPad;E=m.barLength+2*m.barPad;H=a+c;H+A>d&&(H=d-A);d=this.container.selectAll("rect.scrollbar-vertical").data(g?[0]:[]);d.exit().on(".drag",null).remove();d.enter().append("rect").classed("scrollbar-vertical",!0).call(h.fill,m.barColor);g?(this.vbar=d.attr({rx:m.barRadius,ry:m.barRadius,x:H,y:n,width:A,height:E}),
this._vbarYMin=n+E/2,this._vbarTranslateMax=C-E):(delete this.vbar,delete this._vbarYMin,delete this._vbarTranslateMax);d=this.id;C=w-.5;x=g?x+A+.5:x+.5;G-=.5;p=u?p+q+.5:p+.5;b=b._topdefs.selectAll("#"+d).data(u||g?[0]:[]);b.exit().remove();b.enter().append("clipPath").attr("id",d).append("rect");u||g?(this._clipRect=b.select("rect").attr({x:Math.floor(C),y:Math.floor(G),width:Math.ceil(x)-Math.floor(C),height:Math.ceil(p)-Math.floor(G)}),this.container.call(e.setClipUrl,d,this.gd),this.bg.attr({x:a,
y:n,width:c,height:t})):(this.bg.attr({width:0,height:0}),this.container.on("wheel",null).on(".drag",null).call(e.setClipUrl,null),delete this._clipRect);if(u||g)b=k.behavior.drag().on("dragstart",function(){k.event.sourceEvent.preventDefault()}).on("drag",this._onBoxDrag.bind(this)),this.container.on("wheel",null).on("wheel",this._onBoxWheel.bind(this)).on(".drag",null).call(b),b=k.behavior.drag().on("dragstart",function(){k.event.sourceEvent.preventDefault();k.event.sourceEvent.stopPropagation()}).on("drag",
this._onBarDrag.bind(this)),u&&this.hbar.on(".drag",null).call(b),g&&this.vbar.on(".drag",null).call(b);this.setTranslate(f,l)};m.prototype.disable=function(){if(this.hbar||this.vbar)this.bg.attr({width:0,height:0}),this.container.on("wheel",null).on(".drag",null).call(e.setClipUrl,null),delete this._clipRect;this.hbar&&(this.hbar.on(".drag",null),this.hbar.remove(),delete this.hbar,delete this._hbarXMin,delete this._hbarTranslateMax);this.vbar&&(this.vbar.on(".drag",null),this.vbar.remove(),delete this.vbar,
delete this._vbarYMin,delete this._vbarTranslateMax)};m.prototype._onBoxDrag=function(){var a=this.translateX,e=this.translateY;this.hbar&&(a-=k.event.dx);this.vbar&&(e-=k.event.dy);this.setTranslate(a,e)};m.prototype._onBoxWheel=function(){var a=this.translateX,e=this.translateY;this.hbar&&(a+=k.event.deltaY);this.vbar&&(e+=k.event.deltaY);this.setTranslate(a,e)};m.prototype._onBarDrag=function(){var a=this.translateX,e=this.translateY;if(this.hbar){a+=this._hbarXMin;var h=a+this._hbarTranslateMax;
a=(f.constrain(k.event.x,a,h)-a)/(h-a)*(this.position.w-this._box.w)}this.vbar&&(e+=this._vbarYMin,h=e+this._vbarTranslateMax,e=(f.constrain(k.event.y,e,h)-e)/(h-e)*(this.position.h-this._box.h));this.setTranslate(a,e)};m.prototype.setTranslate=function(a,h){var b=this.position.w-this._box.w,k=this.position.h-this._box.h;a=f.constrain(a||0,0,b);h=f.constrain(h||0,0,k);this.translateX=a;this.translateY=h;this.container.call(e.setTranslate,this._box.l-this.position.l-a,this._box.t-this.position.t-h);
this._clipRect&&this._clipRect.attr({x:Math.floor(this.position.l+a-.5),y:Math.floor(this.position.t+h-.5)});this.hbar&&this.hbar.call(e.setTranslate,a+a/b*this._hbarTranslateMax,h);this.vbar&&this.vbar.call(e.setTranslate,a,h+h/k*this._vbarTranslateMax)}},{"../../lib":700,"../color":577,"../drawing":598,d3:154}],672:[function(a,p,l){p.exports={FROM_BL:{left:0,center:.5,right:1,bottom:0,middle:.5,top:1},FROM_TL:{left:0,center:.5,right:1,bottom:1,middle:.5,top:0},FROM_BR:{left:1,center:.5,right:0,
bottom:0,middle:.5,top:1},LINE_SPACING:1.3,CAP_SHIFT:.7,MID_SHIFT:.35,OPPOSITE_SIDE:{left:"right",right:"left",top:"bottom",bottom:"top"}}},{}],673:[function(a,p,l){p.exports={COMPARISON_OPS:"\x3d !\x3d \x3c \x3e\x3d \x3e \x3c\x3d".split(" "),COMPARISON_OPS2:["\x3d","\x3c","\x3e\x3d","\x3e","\x3c\x3d"],INTERVAL_OPS:"[] () [) (] ][ )( ]( )[".split(" "),SET_OPS:["{}","}{"],CONSTRAINT_REDUCTION:{"\x3d":"\x3d","\x3c":"\x3c","\x3c\x3d":"\x3c","\x3e":"\x3e","\x3e\x3d":"\x3e","[]":"[]","()":"[]","[)":"[]",
"(]":"[]","][":"][",")(":"][","](":"][",")[":"]["}}},{}],674:[function(a,p,l){p.exports={solid:[[],0],dot:[[.5,1],200],dash:[[.5,1],50],longdash:[[.5,1],10],dashdot:[[.5,.625,.875,1],50],longdashdot:[[.5,.7,.8,1],10]}},{}],675:[function(a,p,l){p.exports={circle:"●","circle-open":"○",square:"■","square-open":"□",diamond:"◆","diamond-open":"◇",cross:"+",x:"❌"}},{}],676:[function(a,p,l){p.exports={SHOW_PLACEHOLDER:100,HIDE_PLACEHOLDER:1E3,DBLCLICKDELAY:300,DESELECTDIM:.2}},{}],677:[function(a,p,l){p.exports=
{BADNUM:void 0,FP_SAFE:Number.MAX_VALUE/1E4,ONEAVGYEAR:315576E5,ONEAVGMONTH:26298E5,ONEDAY:864E5,ONEHOUR:36E5,ONEMIN:6E4,ONESEC:1E3,EPOCHJD:2440587.5,ALMOST_EQUAL:.999999,LOG_CLIP:10,MINUS_SIGN:"−"}},{}],678:[function(a,p,l){l.xmlns="http://www.w3.org/2000/xmlns/";l.svg="http://www.w3.org/2000/svg";l.xlink="http://www.w3.org/1999/xlink";l.svgAttrs={xmlns:l.svg,"xmlns:xlink":l.xlink}},{}],679:[function(a,p,l){l.version="1.46.1";a("es6-promise").polyfill();a("../build/plotcss");a("./fonts/mathjax_config")();
p=a("./registry");p=l.register=p.register;for(var m=a("./plot_api"),k=Object.keys(m),h=0;h<k.length;h++){var e=k[h];"_"!==e.charAt(0)&&(l[e]=m[e]);p({moduleType:"apiMethod",name:e,fn:m[e]})}p(a("./traces/scatter"));p([a("./components/fx"),a("./components/legend"),a("./components/annotations"),a("./components/annotations3d"),a("./components/shapes"),a("./components/images"),a("./components/updatemenus"),a("./components/sliders"),a("./components/rangeslider"),a("./components/rangeselector"),a("./components/grid"),
a("./components/errorbars"),a("./components/colorscale")]);p([a("./locale-en"),a("./locale-en-us")]);l.Icons=a("../build/ploticon");l.Plots=a("./plots/plots");l.Fx=a("./components/fx");l.Snapshot=a("./snapshot");l.PlotSchema=a("./plot_api/plot_schema");l.Queue=a("./lib/queue");l.d3=a("d3")},{"../build/plotcss":1,"../build/ploticon":2,"./components/annotations":568,"./components/annotations3d":573,"./components/colorscale":589,"./components/errorbars":604,"./components/fx":616,"./components/grid":620,
"./components/images":625,"./components/legend":633,"./components/rangeselector":644,"./components/rangeslider":651,"./components/shapes":659,"./components/sliders":664,"./components/updatemenus":670,"./fonts/mathjax_config":680,"./lib/queue":715,"./locale-en":729,"./locale-en-us":728,"./plot_api":733,"./plot_api/plot_schema":737,"./plots/plots":810,"./registry":829,"./snapshot":834,"./traces/scatter":1063,d3:154,"es6-promise":210}],680:[function(a,p,l){p.exports=function(){"undefined"!==typeof MathJax&&
"local"!==(window.PlotlyConfig||{}).MathJaxConfig&&(MathJax.Hub.Config({messageStyle:"none",skipStartupTypeset:!0,displayAlign:"left",tex2jax:{inlineMath:[["$","$"],["\\(","\\)"]]}}),MathJax.Hub.Configured())}},{}],681:[function(a,p,l){l.isLeftAnchor=function(a){return"left"===a.xanchor||"auto"===a.xanchor&&a.x<=1/3};l.isCenterAnchor=function(a){return"center"===a.xanchor||"auto"===a.xanchor&&a.x>1/3&&a.x<2/3};l.isRightAnchor=function(a){return"right"===a.xanchor||"auto"===a.xanchor&&a.x>=2/3};l.isTopAnchor=
function(a){return"top"===a.yanchor||"auto"===a.yanchor&&a.y>=2/3};l.isMiddleAnchor=function(a){return"middle"===a.yanchor||"auto"===a.yanchor&&a.y>1/3&&a.y<2/3};l.isBottomAnchor=function(a){return"bottom"===a.yanchor||"auto"===a.yanchor&&a.y<=1/3}},{}],682:[function(a,p,l){function m(a){return Math.abs(a[1]-a[0])>u-1E-14}function k(a,d){return b(d-a,u)}function h(a,b){if(m(b))return!0;if(b[0]<b[1]){var d=b[0];b=b[1]}else d=b[1],b=b[0];d=f(d,u);b=f(b,u);d>b&&(b+=u);a=f(a,u);var c=a+u;return a>=d&&
a<=b||c>=d&&c<=b}function e(a,b,e,c,f,h,k){function d(a,b){return[a*Math.cos(b)+f,h-a*Math.sin(b)]}function g(a,b,c){return"A"+[a,a]+" "+[0,p,c]+" "+d(a,b)}f=f||0;h=h||0;var l=m([e,c]);if(l){var t=0;var r=n;e=u}else e<c?(t=e,e=c):t=c;a<b?(c=a,a=b):c=b;var p=Math.abs(e-t)<=n?0:1;l?l=null===c?"M"+d(a,t)+g(a,r,0)+g(a,e,0)+"Z":"M"+d(c,t)+g(c,r,0)+g(c,e,0)+"ZM"+d(a,t)+g(a,r,1)+g(a,e,1)+"Z":null===c?(l="M"+d(a,t)+g(a,e,0),k&&(l+="L0,0Z")):l="M"+d(c,t)+"L"+d(a,t)+g(a,e,0)+"L"+d(c,e)+g(c,t,1)+"Z";return l}
a=a("./mod");var f=a.mod,b=a.modHalf,n=Math.PI,u=2*n;p.exports={deg2rad:function(a){return a/180*n},rad2deg:function(a){return a/n*180},angleDelta:k,angleDist:function(a,b){return Math.abs(k(a,b))},isFullCircle:m,isAngleInsideSector:h,isPtInsideSector:function(a,b,e,c){if(!h(b,c))return!1;e[0]<e[1]?(b=e[0],e=e[1]):(b=e[1],e=e[0]);return a>=b&&a<=e},pathArc:function(a,b,g,c,f){return e(null,a,b,g,c,f,0)},pathSector:function(a,b,g,c,f){return e(null,a,b,g,c,f,1)},pathAnnulus:function(a,b,g,c,f,h){return e(a,
b,g,c,f,h,1)}}},{"./mod":707}],683:[function(a,p,l){function m(a){return f.isView(a)&&!(a instanceof b)}function k(a){return e(a)||m(a)}function h(a,b,e){if(k(a)){if(k(a[0])){for(var d=0;d<a.length;d++)e=b(e,a[d].length);return e}return a.length}return 0}var e=Array.isArray,f="undefined"!==typeof ArrayBuffer&&ArrayBuffer.isView?ArrayBuffer:{isView:function(){return!1}},b="undefined"===typeof DataView?function(){}:DataView;l.isTypedArray=m;l.isArrayOrTypedArray=k;l.isArray1D=function(a){return!k(a[0])};
l.ensureArray=function(a,b){e(a)||(a=[]);a.length=b;return a};l.concat=function(){var a=[],b=!0,f=0,d,g;for(d=0;d<arguments.length;d++){var c=arguments[d];if(g=c.length){if(h)a.push(c);else{var h=c;var k=g}if(e(c))var m=!1;else b=!1,f?m!==c.constructor&&(m=!1):m=c.constructor;f+=g}}if(!f)return[];if(!a.length)return h;if(b)return h.concat.apply(h,a);if(m){b=new m(f);b.set(h);for(d=0;d<a.length;d++)c=a[d],b.set(c,k),k+=c.length;return b}b=Array(f);for(f=0;f<h.length;f++)b[f]=h[f];for(d=0;d<a.length;d++){c=
a[d];for(f=0;f<c.length;f++)b[k+f]=c[f];k+=f}return b};l.maxRowLength=function(a){return h(a,Math.max,0)};l.minRowLength=function(a){return h(a,Math.min,Infinity)}},{}],684:[function(a,p,l){var m=a("fast-isnumeric"),k=a("../constants/numerical").BADNUM,h=/^['"%,$#\s']+|[, ]|['"%,$#\s']+$/g;p.exports=function(a){"string"===typeof a&&(a=a.replace(h,""));return m(a)?Number(a):k}},{"../constants/numerical":677,"fast-isnumeric":221}],685:[function(a,p,l){p.exports=function(a){a=a._fullLayout;a._glcanvas&&
a._glcanvas.size()&&a._glcanvas.each(function(a){a.regl&&a.regl.clear({color:!0,depth:!0})})}},{}],686:[function(a,p,l){p.exports=function(a){a._responsiveChartHandler&&(window.removeEventListener("resize",a._responsiveChartHandler),delete a._responsiveChartHandler)}},{}],687:[function(a,p,l){function m(a,b){var c=l.valObjectMeta[b.valType];if(b.arrayOk&&d(a))return!0;if(c.validateFunction)return c.validateFunction(a,b);var e={},g=e;c.coerceFunction(a,{set:function(a){g=a}},e,b);return g!==e}var k=
a("fast-isnumeric"),h=a("tinycolor2"),e=a("../plots/attributes"),f=a("../components/colorscale/scales"),b=a("../constants/interactions").DESELECTDIM,n=a("./nested_property"),u=a("./regex").counter,r=a("./mod").modHalf,d=a("./array").isArrayOrTypedArray;l.valObjectMeta={data_array:{coerceFunction:function(a,b,e){d(a)?b.set(a):void 0!==e&&b.set(e)}},enumerated:{coerceFunction:function(a,b,d,e){e.coerceNumber&&(a=+a);-1===e.values.indexOf(a)?b.set(d):b.set(a)},validateFunction:function(a,b){b.coerceNumber&&
(a=+a);b=b.values;for(var c=0;c<b.length;c++){var d=String(b[c]);if("/"===d.charAt(0)&&"/"===d.charAt(d.length-1)){if((new RegExp(d.substr(1,d.length-2))).test(a))return!0}else if(a===b[c])return!0}return!1}},"boolean":{coerceFunction:function(a,b,d){!0===a||!1===a?b.set(a):b.set(d)}},number:{coerceFunction:function(a,b,d,e){!k(a)||void 0!==e.min&&a<e.min||void 0!==e.max&&a>e.max?b.set(d):b.set(+a)}},integer:{coerceFunction:function(a,b,d,e){a%1||!k(a)||void 0!==e.min&&a<e.min||void 0!==e.max&&a>
e.max?b.set(d):b.set(+a)}},string:{coerceFunction:function(a,b,d,e){"string"!==typeof a?!0===e.strict||"number"!==typeof a?b.set(d):b.set(String(a)):e.noBlank&&!a?b.set(d):b.set(a)}},color:{coerceFunction:function(a,b,d){h(a).isValid()?b.set(a):b.set(d)}},colorlist:{coerceFunction:function(a,b,d){function c(a){return h(a).isValid()}Array.isArray(a)&&a.length?a.every(c)?b.set(a):b.set(d):b.set(d)}},colorscale:{coerceFunction:function(a,b,d){b.set(f.get(a,d))}},angle:{coerceFunction:function(a,b,d){"auto"===
a?b.set("auto"):k(a)?b.set(r(+a,360)):b.set(d)}},subplotid:{coerceFunction:function(a,b,d,e){e=e.regex||u(d);"string"===typeof a&&e.test(a)?b.set(a):b.set(d)},validateFunction:function(a,b){b=b.dflt;return a===b?!0:"string"!==typeof a?!1:u(b).test(a)?!0:!1}},flaglist:{coerceFunction:function(a,b,d,e){if("string"!==typeof a)b.set(d);else if(-1!==(e.extras||[]).indexOf(a))b.set(a);else{a=a.split("+");for(var c=0;c<a.length;){var f=a[c];-1===e.flags.indexOf(f)||a.indexOf(f)<c?a.splice(c,1):c++}a.length?
b.set(a.join("+")):b.set(d)}}},any:{coerceFunction:function(a,b,d){void 0===a?b.set(d):b.set(a)}},info_array:{coerceFunction:function(a,b,d,e){function c(a,b,c){var d;void 0===c&&(c=b.dflt);l.valObjectMeta[b.valType].coerceFunction(a,{set:function(a){d=a}},c,b);return d}var f=2===e.dimensions||"1-2"===e.dimensions&&Array.isArray(a)&&Array.isArray(a[0]);if(Array.isArray(a)){e=e.items;var g=[],h=Array.isArray(e),k=h&&f&&Array.isArray(e[0]);k=f&&h&&!k;var n=h&&!k?e.length:a.length,m;d=Array.isArray(d)?
d:[];if(f)for(f=0;f<n;f++){g[f]=[];var t=Array.isArray(a[f])?a[f]:[];var r=k?e.length:h?e[f].length:t.length;for(m=0;m<r;m++){var p=k?e[m]:h?e[f][m]:e;p=c(t[m],p,(d[f]||[])[m]);void 0!==p&&(g[f][m]=p)}}else for(f=0;f<n;f++)p=c(a[f],h?e[f]:e,d[f]),void 0!==p&&(g[f]=p);b.set(g)}else b.set(d)},validateFunction:function(a,b){if(!Array.isArray(a))return!1;var c=b.items,d=Array.isArray(c),e=2===b.dimensions;if(!b.freeLength&&a.length!==c.length)return!1;for(var f=0;f<a.length;f++)if(e){if(!Array.isArray(a[f])||
!b.freeLength&&a[f].length!==c[f].length)return!1;for(var g=0;g<a[f].length;g++)if(!m(a[f][g],d?c[f][g]:c))return!1}else if(!m(a[f],d?c[f]:c))return!1;return!0}}};l.coerce=function(a,b,e,f,h){e=n(e,f).get();var c=n(a,f);a=n(b,f);c=c.get();b=b._template;void 0===c&&b&&(c=n(b,f).get(),b=0);void 0===h&&(h=e.dflt);if(e.arrayOk&&d(c))return a.set(c),c;var g=l.valObjectMeta[e.valType].coerceFunction;g(c,a,h,e);var k=a.get();b&&k===h&&!m(c,e)&&(c=n(b,f).get(),g(c,a,h,e),k=a.get());return k};l.coerce2=function(a,
b,d,e,f){var c=n(a,e);a=l.coerce(a,b,d,e,f);c=c.get();return void 0!==c&&null!==c?a:!1};l.coerceFont=function(a,b,d){var c={};d=d||{};c.family=a(b+".family",d.family);c.size=a(b+".size",d.size);c.color=a(b+".color",d.color);return c};l.coerceHoverinfo=function(a,b,d){var c=b._module.attributes;c=c.hoverinfo?c:e;var f=c.hoverinfo;if(1===d._dataLength){d="all"===f.dflt?f.flags.slice():f.dflt.split("+");d.splice(d.indexOf("name"),1);var g=d.join("+")}return l.coerce(a,b,c,"hoverinfo",g)};l.coerceSelectionMarkerOpacity=
function(a,c){if(a.marker){var e=a.marker.opacity;if(void 0!==e){if(!d(e)&&!a.selected&&!a.unselected){var f=e;var g=b*e}c("selected.marker.opacity",f);c("unselected.marker.opacity",g)}}};l.validate=m},{"../components/colorscale/scales":592,"../constants/interactions":676,"../plots/attributes":745,"./array":683,"./mod":707,"./nested_property":708,"./regex":716,"fast-isnumeric":221,tinycolor2:521}],688:[function(a,p,l){function m(a){return a&&q.componentsRegistry.calendars&&"string"===typeof a&&"gregorian"!==
a}function k(a,b){return String(a+Math.pow(10,b)).substr(1)}function h(a,b,c,d,e){if(b||c||d||e)if(a+=" "+k(b,2)+":"+k(c,2),d||e)if(a+=":"+k(d,2),e){for(b=4;0===e%10;)--b,e/=10;a+="."+k(e,b)}return a}function e(a,b,c,d){a=a.replace(M,function(a){a=Math.min(+a.charAt(1)||6,6);return(b/1E3%1+2).toFixed(a).substr(2).replace(/0+$/,"")||"0"});var e=new Date(Math.floor(b+.05));if(m(d))try{a=q.getComponentMethod("calendars","worldCalFmt")(a,b,d)}catch(U){return"Invalid"}return c(a)(e)}var f=a("d3"),b=a("fast-isnumeric"),
n=a("./loggers"),u=a("./mod").mod;p=a("../constants/numerical");var r=p.BADNUM,d=p.ONEDAY,g=p.ONEHOUR,c=p.ONEMIN,v=p.ONESEC,t=p.EPOCHJD,q=a("../registry"),B=f.time.format.utc,D=/^\s*(-?\d\d\d\d|\d\d)(-(\d?\d)(-(\d?\d)([ Tt]([01]?\d|2[0-3])(:([0-5]\d)(:([0-5]\d(\.\d+)?))?(Z|z|[+\-]\d\d:?\d\d)?)?)?)?)?\s*$/m,G=/^\s*(-?\d\d\d\d|\d\d)(-(\d?\di?)(-(\d?\d)([ Tt]([01]?\d|2[0-3])(:([0-5]\d)(:([0-5]\d(\.\d+)?))?(Z|z|[+\-]\d\d:?\d\d)?)?)?)?)?\s*$/m,A=(new Date).getFullYear()-70;l.dateTick0=function(a,b){return m(a)?
b?q.getComponentMethod("calendars","CANONICAL_SUNDAY")[a]:q.getComponentMethod("calendars","CANONICAL_TICK")[a]:b?"2000-01-02":"2000-01-01"};l.dfltRange=function(a){return m(a)?q.getComponentMethod("calendars","DFLTRANGE")[a]:["2000-01-01","2001-01-01"]};l.isJSDate=function(a){return"object"===typeof a&&null!==a&&"function"===typeof a.getTime};l.dateTime2ms=function(a,b){if(l.isJSDate(a)){b=a.getTimezoneOffset()*c;var e=(a.getUTCMinutes()-a.getMinutes())*c+(a.getUTCSeconds()-a.getSeconds())*v+(a.getUTCMilliseconds()-
a.getMilliseconds());if(e){var f=3*c;b=b-f/2+u(e-b+f/2,f)}a=Number(a)-b;return a>=C&&a<=w?a:r}if("string"!==typeof a&&"number"!==typeof a)return r;a=String(a);e=m(b);var h=a.charAt(0);!e||"G"!==h&&"g"!==h||(a=a.substr(1),b="");h=e&&"chinese"===b.substr(0,7);var k=a.match(h?G:D);if(!k)return r;a=k[1];var n=k[3]||"1",p=Number(k[5]||1),y=Number(k[7]||0),B=Number(k[9]||0);k=Number(k[11]||0);if(e){if(2===a.length)return r;a=Number(a);try{var I=q.getComponentMethod("calendars","getCal")(b);if(h){var E=
"i"===n.charAt(n.length-1);n=parseInt(n,10);f=I.newDate(a,I.toMonthIndex(a,n,E),p)}else f=I.newDate(a,Number(n),p)}catch(qa){return r}return f?(f.toJD()-t)*d+y*g+B*c+k*v:r}a=2===a.length?(Number(a)+2E3-A)%100+A:Number(a);--n;b=new Date(Date.UTC(2E3,n,p,y,B));b.setUTCFullYear(a);return b.getUTCMonth()!==n||b.getUTCDate()!==p?r:b.getTime()+k*v};var C=l.MIN_MS=l.dateTime2ms("-9999");var w=l.MAX_MS=l.dateTime2ms("9999-12-31 23:59:59.9999");l.isDateTime=function(a,b){return l.dateTime2ms(a,b)!==r};var x=
90*d,E=3*g,H=5*c;l.ms2DateTime=function(a,b,e){if("number"!==typeof a||!(a>=C&&a<=w))return r;b||(b=0);var f=Math.floor(10*u(a+.05,1)),k=Math.round(a-f/10);if(m(e)){var n=Math.floor(k/d)+t;a=Math.floor(u(a,d));try{var l=q.getComponentMethod("calendars","getCal")(e).fromJD(n).formatDate("yyyy-mm-dd")}catch(Y){l=B("G%Y-%m-%d")(new Date(k))}if("-"===l.charAt(0))for(;11>l.length;)l="-0"+l.substr(1);else for(;10>l.length;)l="0"+l;e=b<x?Math.floor(a/g):0;k=b<x?Math.floor(a%g/c):0;n=b<E?Math.floor(a%c/v):
0;b=b<H?a%v*10+f:0}else a=new Date(k),l=B("%Y-%m-%d")(a),e=b<x?a.getUTCHours():0,k=b<x?a.getUTCMinutes():0,n=b<E?a.getUTCSeconds():0,b=b<H?10*a.getUTCMilliseconds()+f:0;return h(l,e,k,n,b)};l.ms2DateTimeLocal=function(a){if(!(a>=C+d&&a<=w-d))return r;var b=Math.floor(10*u(a+.05,1)),c=new Date(Math.round(a-b/10));a=f.time.format("%Y-%m-%d")(c);var e=c.getHours(),g=c.getMinutes(),k=c.getSeconds();b=10*c.getUTCMilliseconds()+b;return h(a,e,g,k,b)};l.cleanDate=function(a,b,c){if(a===r)return b;if(l.isJSDate(a)||
"number"===typeof a&&isFinite(a)){if(m(c))return n.error("JS Dates and milliseconds are incompatible with world calendars",a),b;a=l.ms2DateTimeLocal(+a);if(!a&&void 0!==b)return b}else if(!l.isDateTime(a,c))return n.error("unrecognized date",a),b;return a};var M=/%\d?f/g,O=[59,59.9,59.99,59.999,59.9999];l.formatDate=function(a,f,h,n,l,t){l=m(l)&&l;if(!f)if("y"===h)f=t.year;else if("m"===h)f=t.month;else if("d"===h)f=t.dayMonth+"\n"+t.year;else{f=h;h=u(a+.05,d);h=k(Math.floor(h/g),2)+":"+k(u(Math.floor(h/
c),60),2);if("M"!==f){b(f)||(f=0);var r=(100+Math.min(u(a/v,60),O[f])).toFixed(f).substr(1);0<f&&(r=r.replace(/0+$/,"").replace(/[\.]$/,""));h+=":"+r}return h+"\n"+e(t.dayMonthYear,a,n,l)}return e(f,a,n,l)};var I=3*d;l.incrementMonth=function(a,b,c){c=m(c)&&c;var e=u(a,d);a=Math.round(a-e);if(c)try{var f=Math.round(a/d)+t,g=q.getComponentMethod("calendars","getCal")(c),h=g.fromJD(f);b%12?g.add(h,b,"m"):g.add(h,b/12,"y");return(h.toJD()-t)*d+e}catch(Y){n.error("invalid ms "+a+" in calendar "+c)}a=
new Date(a+I);return a.setUTCMonth(a.getUTCMonth()+b)+e-I};l.findExactDates=function(a,c){for(var e=0,f=0,g=0,h=0,k,n=m(c)&&q.getComponentMethod("calendars","getCal")(c),l=0;l<a.length;l++)if(c=a[l],!b(c))h++;else if(!(c%d))if(n)try{k=n.fromJD(c/d+t),1===k.day()?1===k.month()?e++:f++:g++}catch(S){}else k=new Date(c),1===k.getUTCDate()?0===k.getUTCMonth()?e++:f++:g++;f+=e;a=a.length-h;return{exactYears:e/a,exactMonths:f/a,exactDays:(g+f)/a}}},{"../constants/numerical":677,"../registry":829,"./loggers":704,
"./mod":707,d3:154,"fast-isnumeric":221}],689:[function(a,p,l){var m=a("events").EventEmitter;p.exports={init:function(a){if(a._ev instanceof m)return a;var h=new m,e=new m;a._ev=h;a._internalEv=e;a.on=h.on.bind(h);a.once=h.once.bind(h);a.removeListener=h.removeListener.bind(h);a.removeAllListeners=h.removeAllListeners.bind(h);a._internalOn=e.on.bind(e);a._internalOnce=e.once.bind(e);a._removeInternalListener=e.removeListener.bind(e);a._removeAllInternalListeners=e.removeAllListeners.bind(e);a.emit=
function(f,b){"undefined"!==typeof jQuery&&jQuery(a).trigger(f,b);h.emit(f,b);e.emit(f,b)};return a},triggerHandler:function(a,h,e){function f(a){if(a.listener){if(k.removeListener(h,a.listener),!a.fired)return a.fired=!0,a.listener.apply(k,[e])}else return a.apply(k,[e])}var b;"undefined"!==typeof jQuery&&(b=jQuery(a).triggerHandler(h,e));var k=a._ev;if(!k)return b;a=k._events[h];if(!a)return b;a=Array.isArray(a)?a:[a];var m;for(m=0;m<a.length-1;m++)f(a[m]);a=f(a[m]);return void 0!==b?b:a},purge:function(a){delete a._ev;
delete a.on;delete a.once;delete a.removeListener;delete a.removeAllListeners;delete a.emit;delete a._ev;delete a._internalEv;delete a._internalOn;delete a._internalOnce;delete a._removeInternalListener;delete a._removeAllInternalListeners;return a}}},{events:94}],690:[function(a,p,l){function m(a,f,b,n){var e=a[0],l=a.length,d,g,c;if(2===l&&h(e)&&h(a[1])&&0===e.length){a:{var p=a[1];for(g=0;g<p.length;g++){var t=p[g];if(null!==t&&"object"===typeof t){p=!1;break a}void 0!==t&&(e[g]=t)}p=!0}if(p)return e;
e.splice(0,e.length)}for(t=1;t<l;t++)for(d in p=a[t],p){var q=e[d];g=p[d];if(n&&h(g))e[d]=g;else if(f&&g&&(k(g)||(c=h(g))))c?(c=!1,q=q&&h(q)?q:[]):q=q&&k(q)?q:{},e[d]=m([q,g],f,b,n);else if("undefined"!==typeof g||b)e[d]=g}return e}var k=a("./is_plain_object.js"),h=Array.isArray;l.extendFlat=function(){return m(arguments,!1,!1,!1)};l.extendDeep=function(){return m(arguments,!0,!1,!1)};l.extendDeepAll=function(){return m(arguments,!0,!0,!1)};l.extendDeepNoArrays=function(){return m(arguments,!0,!1,
!0)}},{"./is_plain_object.js":701}],691:[function(a,p,l){p.exports=function(a){for(var k={},h=[],e=0,f=0;f<a.length;f++){var b=a[f];1!==k[b]&&(k[b]=1,h[e++]=b)}return h}},{}],692:[function(a,p,l){function m(a){return!0===a.visible}function k(a){return!0===a[0].trace.visible}p.exports=function(a){for(var e=Array.isArray(a)&&Array.isArray(a[0])&&a[0][0]&&a[0][0].trace?k:m,f=[],b=0;b<a.length;b++){var h=a[b];e(h)&&f.push(h)}return f}},{}],693:[function(a,p,l){var m=a("country-regex"),k=a("../lib"),h=
Object.keys(m),e={"ISO-3":k.identity,"USA-states":k.identity,"country names":function(a){for(var b=0;b<h.length;b++){var e=h[b];if((new RegExp(m[e])).test(a.trim().toLowerCase()))return e}k.log("Unrecognized country name: "+a+".");return!1}};l.locationToFeature=function(a,b,h){if(!b||"string"!==typeof b)return!1;if(a=(0,e[a])(b)){for(b=0;b<h.length;b++){var f=h[b];if(f.id===a)return f}k.log(["Location with id",a,"does not have a matching topojson feature at this resolution."].join(" "))}return!1}},
{"../lib":700,"country-regex":124}],694:[function(a,p,l){var m=a("../constants/numerical").BADNUM;l.calcTraceToLineCoords=function(a){for(var h=a[0].trace.connectgaps,e=[],f=[],b=0;b<a.length;b++){var k=a[b].lonlat;k[0]!==m?f.push(k):!h&&0<f.length&&(e.push(f),f=[])}0<f.length&&e.push(f);return e};l.makeLine=function(a){return 1===a.length?{type:"LineString",coordinates:a[0]}:{type:"MultiLineString",coordinates:a}};l.makePolygon=function(a){if(1===a.length)return{type:"Polygon",coordinates:a};for(var h=
Array(a.length),e=0;e<a.length;e++)h[e]=[a[e]];return{type:"MultiPolygon",coordinates:h}};l.makeBlank=function(){return{type:"Point",coordinates:[]}}},{"../constants/numerical":677}],695:[function(a,p,l){function m(a,b,e,d,f,c,h,k){e-=a;var g=f-a;f=h-f;d-=b;h=c-b;k-=c;c=e*k-f*d;if(0===c)return null;k=(g*k-f*h)/c;g=(g*d-e*h)/c;return 0>g||1<g||0>k||1<k?null:{x:a+e*k,y:b+d*k}}function k(a,b,e,d,f){var c=d*a+f*b;if(0>c)return d*d+f*f;if(c>e)return e=d-a,b=f-b,e*e+b*b;b=d*b-f*a;return b*b/e}var h=a("./mod").mod;
l.segmentsIntersect=m;l.segmentDistance=function(a,b,e,d,f,c,h,l){if(m(a,b,e,d,f,c,h,l))return 0;var g=e-a,n=d-b,t=h-f,r=l-c,p=g*g+n*n,v=t*t+r*r;a=Math.min(k(g,n,p,f-a,c-b),k(g,n,p,h-a,l-b),k(t,r,v,a-f,b-c),k(t,r,v,e-f,d-c));return Math.sqrt(a)};var e,f,b;l.getTextLocation=function(a,k,m,d){if(a!==f||d!==b)e={},f=a,b=d;if(e[m])return e[m];var g=a.getPointAtLength(h(m-d/2,k));d=a.getPointAtLength(h(m+d/2,k));var c=Math.atan((d.y-g.y)/(d.x-g.x));a=a.getPointAtLength(h(m,k));g={x:(4*a.x+g.x+d.x)/6,y:(4*
a.y+g.y+d.y)/6,theta:c};return e[m]=g};l.clearLocationCache=function(){f=null};l.getVisibleSegment=function(a,b,e){function d(b){var d=a.getPointAtLength(b);0===b?l=d:b===n&&(r=d);b=d.x<f?f-d.x:d.x>c?d.x-c:0;d=d.y<h?h-d.y:d.y>k?d.y-k:0;return Math.sqrt(b*b+d*d)}var f=b.left,c=b.right,h=b.top,k=b.bottom;b=0;for(var n=a.getTotalLength(),m=n,l,r,p=d(b);p;){b+=p+e;if(b>m)return;p=d(b)}for(p=d(m);p;){m-=p+e;if(b>m)return;p=d(m)}return{min:b,max:m,len:m-b,total:n,isClosed:0===b&&m===n&&.1>Math.abs(l.x-
r.x)&&.1>Math.abs(l.y-r.y)}};l.findPointOnPath=function(a,b,e,d){d=d||{};var f=d.pathLength||a.getTotalLength(),c=d.tolerance||.001;d=d.iterationLimit||30;for(var h=a.getPointAtLength(0)[e]>a.getPointAtLength(f)[e]?-1:1,k=0,n=0,m,l,r;k<d&&!(m=(n+f)/2,l=a.getPointAtLength(m),r=l[e]-b,Math.abs(r)<c);)0<h*r?f=m:n=m,k++;return l}},{"./mod":707}],696:[function(a,p,l){p.exports=function(a){if("string"===typeof a){var k=document.getElementById(a);if(null===k)throw Error("No DOM element with id '"+a+"' exists on the page.");
return k}if(null===a||void 0===a)throw Error("DOM element provided is null or undefined");return a}},{}],697:[function(a,p,l){function m(a,b){a[3]*=b;return a}function k(a){if(e(a))return r;a=b(a);return a.length?a:r}function h(a){return e(a)?a:1}var e=a("fast-isnumeric"),f=a("tinycolor2"),b=a("color-normalize"),n=a("../components/colorscale");l=a("../components/color/attributes").defaultLine;var u=a("./array").isArrayOrTypedArray,r=b(l);p.exports={formatColor:function(a,e,c){var d=a.color,f=u(d),
g=u(e),l=[];var p=void 0!==a.colorscale?n.makeColorScaleFunc(n.extractScale(a,{cLetter:"c"})):k;a=f?function(a,c){return void 0===a[c]?r:b(p(a[c]))}:k;var q=g?function(a,b){return void 0===a[b]?1:h(a[b])}:h;if(f||g)for(var A=0;A<c;A++)f=a(d,A),g=q(e,A),l[A]=m(f,g);else l=m(b(d),e);return l},parseColorScale:function(a,b){void 0===b&&(b=1);return(a.reversescale?n.flipScale(a.colorscale):a.colorscale).map(function(a){var c=a[0];a=f(a[1]).toRgb();return{index:c,rgb:[a.r,a.g,a.b,b]}})}}},{"../components/color/attributes":576,
"../components/colorscale":589,"./array":683,"color-normalize":110,"fast-isnumeric":221,tinycolor2:521}],698:[function(a,p,l){function m(a){return[a]}a=a("./identity");p.exports={keyFun:function(a){return a.key},repeat:m,descend:a,wrap:m,unwrap:function(a){return a[0]}}},{"./identity":699}],699:[function(a,p,l){p.exports=function(a){return a}},{}],700:[function(a,p,l){function m(a){var b={},c;for(c in a)for(var d=a[c],e=0;e<d.length;e++)b[d[e]]=+c;return b}var k=a("d3"),h=a("fast-isnumeric");l=a("../constants/numerical");
var e=l.FP_SAFE,f=l.BADNUM,b=p.exports={};b.nestedProperty=a("./nested_property");b.keyedContainer=a("./keyed_container");b.relativeAttr=a("./relative_attr");b.isPlainObject=a("./is_plain_object");b.toLogRange=a("./to_log_range");b.relinkPrivateKeys=a("./relink_private");p=a("./array");b.isTypedArray=p.isTypedArray;b.isArrayOrTypedArray=p.isArrayOrTypedArray;b.isArray1D=p.isArray1D;b.ensureArray=p.ensureArray;b.concat=p.concat;b.maxRowLength=p.maxRowLength;b.minRowLength=p.minRowLength;p=a("./mod");
b.mod=p.mod;b.modHalf=p.modHalf;p=a("./coerce");b.valObjectMeta=p.valObjectMeta;b.coerce=p.coerce;b.coerce2=p.coerce2;b.coerceFont=p.coerceFont;b.coerceHoverinfo=p.coerceHoverinfo;b.coerceSelectionMarkerOpacity=p.coerceSelectionMarkerOpacity;b.validate=p.validate;p=a("./dates");b.dateTime2ms=p.dateTime2ms;b.isDateTime=p.isDateTime;b.ms2DateTime=p.ms2DateTime;b.ms2DateTimeLocal=p.ms2DateTimeLocal;b.cleanDate=p.cleanDate;b.isJSDate=p.isJSDate;b.formatDate=p.formatDate;b.incrementMonth=p.incrementMonth;
b.dateTick0=p.dateTick0;b.dfltRange=p.dfltRange;b.findExactDates=p.findExactDates;b.MIN_MS=p.MIN_MS;b.MAX_MS=p.MAX_MS;p=a("./search");b.findBin=p.findBin;b.sorterAsc=p.sorterAsc;b.sorterDes=p.sorterDes;b.distinctVals=p.distinctVals;b.roundUp=p.roundUp;b.sort=p.sort;b.findIndexOfMin=p.findIndexOfMin;p=a("./stats");b.aggNums=p.aggNums;b.len=p.len;b.mean=p.mean;b.midRange=p.midRange;b.variance=p.variance;b.stdev=p.stdev;b.interp=p.interp;p=a("./matrix");b.init2dArray=p.init2dArray;b.transposeRagged=
p.transposeRagged;b.dot=p.dot;b.translationMatrix=p.translationMatrix;b.rotationMatrix=p.rotationMatrix;b.rotationXYMatrix=p.rotationXYMatrix;b.apply2DTransform=p.apply2DTransform;b.apply2DTransform2=p.apply2DTransform2;p=a("./angles");b.deg2rad=p.deg2rad;b.rad2deg=p.rad2deg;b.angleDelta=p.angleDelta;b.angleDist=p.angleDist;b.isFullCircle=p.isFullCircle;b.isAngleInsideSector=p.isAngleInsideSector;b.isPtInsideSector=p.isPtInsideSector;b.pathArc=p.pathArc;b.pathSector=p.pathSector;b.pathAnnulus=p.pathAnnulus;
p=a("./anchor_utils");b.isLeftAnchor=p.isLeftAnchor;b.isCenterAnchor=p.isCenterAnchor;b.isRightAnchor=p.isRightAnchor;b.isTopAnchor=p.isTopAnchor;b.isMiddleAnchor=p.isMiddleAnchor;b.isBottomAnchor=p.isBottomAnchor;p=a("./geometry2d");b.segmentsIntersect=p.segmentsIntersect;b.segmentDistance=p.segmentDistance;b.getTextLocation=p.getTextLocation;b.clearLocationCache=p.clearLocationCache;b.getVisibleSegment=p.getVisibleSegment;b.findPointOnPath=p.findPointOnPath;p=a("./extend");b.extendFlat=p.extendFlat;
b.extendDeep=p.extendDeep;b.extendDeepAll=p.extendDeepAll;b.extendDeepNoArrays=p.extendDeepNoArrays;p=a("./loggers");b.log=p.log;b.warn=p.warn;b.error=p.error;p=a("./regex");b.counterRegex=p.counter;p=a("./throttle");b.throttle=p.throttle;b.throttleDone=p.done;b.clearThrottle=p.clear;b.getGraphDiv=a("./get_graph_div");b.clearResponsive=a("./clear_responsive");b.makeTraceGroups=a("./make_trace_groups");b._=a("./localize");b.notifier=a("./notifier");b.filterUnique=a("./filter_unique");b.filterVisible=
a("./filter_visible");b.pushUnique=a("./push_unique");b.cleanNumber=a("./clean_number");b.ensureNumber=function(a){if(!h(a))return f;a=Number(a);return a<-e||a>e?f:h(a)?Number(a):f};b.isIndex=function(a,b){return void 0!==b&&a>=b?!1:h(a)&&0<=a&&0===a%1};b.noop=a("./noop");b.identity=a("./identity");b.repeat=function(a,b){for(var c=Array(b),d=0;d<b;d++)c[d]=a;return c};b.swapAttrs=function(a,c,d,e){d||(d="x");e||(e="y");for(var f=0;f<c.length;f++){var g=c[f],h=b.nestedProperty(a,g.replace("?",d));
g=b.nestedProperty(a,g.replace("?",e));var k=h.get();h.set(g.get());g.set(k)}};b.raiseToTop=function(a){a.parentNode.appendChild(a)};b.cancelTransition=function(a){return a.transition().duration(0)};b.constrain=function(a,b,c){return b>c?Math.max(c,Math.min(b,a)):Math.max(b,Math.min(c,a))};b.bBoxIntersect=function(a,b,c){c=c||0;return a.left<=b.right+c&&b.left<=a.right+c&&a.top<=b.bottom+c&&b.top<=a.bottom+c};b.simpleMap=function(a,b,c,d){for(var e=a.length,f=Array(e),g=0;g<e;g++)f[g]=b(a[g],c,d);
return f};b.randstr=function G(a,c,d,e){d||(d=16);void 0===c&&(c=24);if(0>=c)return"0";var f=Math.log(Math.pow(2,c))/Math.log(d),g="",h;for(h=2;Infinity===f;h*=2)f=Math.log(Math.pow(2,c/h))/Math.log(d)*h;var k=f-Math.floor(f);for(h=0;h<Math.floor(f);h++){var n=Math.floor(Math.random()*d).toString(d);g=n+g}k&&(f=Math.pow(d,k),n=Math.floor(Math.random()*f).toString(d),g=n+g);f=parseInt(g,d);return a&&a[g]||Infinity!==f&&f>=Math.pow(2,c)?10<e?(b.warn("randstr failed uniqueness"),g):G(a,c,d,(e||0)+1):
g};b.OptionControl=function(a,b){a||(a={});b||(b="opt");var c={optionList:[],_newoption:function(d){d[b]=a;c[d.name]=d;c.optionList.push(d)}};c["_"+b]=a;return c};b.smooth=function(a,b){b=Math.round(b)||0;if(2>b)return a;var c=a.length,d=2*c,e=2*b-1,f=Array(e),g=Array(c),h,k,n;for(h=0;h<e;h++)f[h]=(1-Math.cos(Math.PI*(h+1)/b))/(2*b);for(h=0;h<c;h++){for(k=n=0;k<e;k++){var m=h+k+1-b;m<-c?m-=d*Math.round(m/d):m>=d&&(m-=d*Math.floor(m/d));0>m?m=-1-m:m>=c&&(m=d-1-m);n+=a[m]*f[k]}g[h]=n}return g};b.syncOrAsync=
function(a,c,d){function e(){return b.syncOrAsync(a,c,d)}for(var f;a.length;)if(f=a.splice(0,1)[0],(f=f(c))&&f.then)return f.then(e).then(void 0,b.promiseError);return d&&d(c)};b.stripTrailingSlash=function(a){return"/"===a.substr(-1)?a.substr(0,a.length-1):a};b.noneOrAll=function(a,b,c){if(a){var d=!1,e=!0,f;for(f=0;f<c.length;f++){var g=a[c[f]];void 0!==g&&null!==g?d=!0:e=!1}if(d&&!e)for(f=0;f<c.length;f++)a[c[f]]=b[c[f]]}};b.mergeArray=function(a,c,d){if(b.isArrayOrTypedArray(a))for(var e=Math.min(a.length,
c.length),f=0;f<e;f++)c[f][d]=a[f]};b.fillArray=function(a,c,d,e){e=e||b.identity;if(b.isArrayOrTypedArray(a))for(var f=0;f<c.length;f++)c[f][d]=e(a[f])};b.castOption=function(a,c,d,e){e=e||b.identity;a=b.nestedProperty(a,d).get();return b.isArrayOrTypedArray(a)?Array.isArray(c)&&b.isArrayOrTypedArray(a[c[0]])?e(a[c[0]][c[1]]):e(a[c]):a};b.extractOption=function(a,c,d,e){if(d in a)return a[d];a=b.nestedProperty(c,e).get();if(!Array.isArray(a))return a};b.tagSelected=function(a,c,d){var e=c.selectedpoints;
c=c._indexToPoints;var f;c&&(f=m(c));for(c=0;c<e.length;c++){var g=e[c];b.isIndex(g)&&(g=f?f[g]:g,g=d?d[g]:g,void 0!==g&&g<a.length&&(a[g].selected=1))}};b.selIndices2selPoints=function(a){var c=a.selectedpoints;if(a=a._indexToPoints){a=m(a);for(var d=[],e=0;e<c.length;e++){var f=c[e];b.isIndex(f)&&(f=a[f],b.isIndex(f)&&d.push(f))}return d}return c};b.getTargetArray=function(a,c){c=c.target;return"string"===typeof c&&c?(a=b.nestedProperty(a,c).get(),Array.isArray(a)?a:!1):Array.isArray(c)?c:!1};b.minExtend=
function(a,c){var d={};"object"!==typeof c&&(c={});var e=Object.keys(a),f;for(f=0;f<e.length;f++){var g=e[f];var h=a[g];"_"!==g.charAt(0)&&"function"!==typeof h&&("module"===g?d[g]=h:Array.isArray(h)?d[g]="colorscale"===g?h.slice():h.slice(0,3):d[g]=h&&"object"===typeof h?b.minExtend(a[g],c[g]):h)}e=Object.keys(c);for(f=0;f<e.length;f++)g=e[f],h=c[g],"object"===typeof h&&g in d&&"object"===typeof d[g]||(d[g]=h);return d};b.titleCase=function(a){return a.charAt(0).toUpperCase()+a.substr(1)};b.containsAny=
function(a,b){for(var c=0;c<b.length;c++)if(-1!==a.indexOf(b[c]))return!0;return!1};b.isPlotDiv=function(a){a=k.select(a);return a.node()instanceof HTMLElement&&a.size()&&a.classed("js-plotly-plot")};b.removeElement=function(a){var b=a&&a.parentNode;b&&b.removeChild(a)};b.addStyleRule=function(a,c){b.addRelatedStyleRule("global",a,c)};b.addRelatedStyleRule=function(a,c,d){a="plotly.js-style-"+a;var e=document.getElementById(a);e||(e=document.createElement("style"),e.setAttribute("id",a),e.appendChild(document.createTextNode("")),
document.head.appendChild(e));a=e.sheet;a.insertRule?a.insertRule(c+"{"+d+"}",0):a.addRule?a.addRule(c,d,0):b.warn("addStyleRule failed")};b.deleteRelatedStyleRule=function(a){(a=document.getElementById("plotly.js-style-"+a))&&b.removeElement(a)};b.isIE=function(){return"undefined"!==typeof window.navigator.msSaveBlob};b.isD3Selection=function(a){return a&&"function"===typeof a.classed};b.ensureSingle=function(a,b,c,d){var e=a.select(b+(c?"."+c:""));if(e.size())return e;a=a.append(b);c&&a.classed(c,
!0);d&&a.call(d);return a};b.ensureSingleById=function(a,b,c,d){var e=a.select(b+"#"+c);if(e.size())return e;a=a.append(b).attr("id",c);d&&a.call(d);return a};b.objectFromPath=function(a,b){a=a.split(".");for(var c,d=c={},e=0;e<a.length;e++){var f=a[e],g;(g=a[e].match(/(.*)\[([0-9]+)\]/))?(f=g[1],g=g[2],c=c[f]=[],c[g]=e===a.length-1?b:{},c=c[g]):(c[f]=e===a.length-1?b:{},c=c[f])}return d};var n=/^([^\[\.]+)\.(.+)?/,u=/^([^\.]+)\[([0-9]+)\](\.)?(.+)?/;b.expandObjectPaths=function(a){var c,d;if("object"===
typeof a&&!Array.isArray(a))for(d in a)if(a.hasOwnProperty(d))if(c=d.match(n)){var e=a[d];var f=c[1];delete a[d];a[f]=b.extendDeepNoArrays(a[f]||{},b.objectFromPath(d,b.expandObjectPaths(e))[f])}else if(c=d.match(u)){e=a[d];f=c[1];var g=parseInt(c[2]);delete a[d];a[f]=a[f]||[];"."===c[3]?(c=c[4],f=a[f][g]=a[f][g]||{},b.extendDeepNoArrays(f,b.objectFromPath(c,b.expandObjectPaths(e)))):a[f][g]=b.expandObjectPaths(e)}else a[d]=b.expandObjectPaths(a[d]);return a};b.numSeparate=function(a,b,c){c||(c=!1);
if("string"!==typeof b||0===b.length)throw Error("Separator string required for formatting!");"number"===typeof a&&(a=String(a));var d=/(\d+)(\d{3})/,e=b.charAt(0);b=b.charAt(1);a=a.split(".");var f=a[0];e=1<a.length?e+a[1]:"";if(b&&(1<a.length||4<f.length||c))for(;d.test(f);)f=f.replace(d,"$1"+b+"$2");return f+e};b.TEMPLATE_STRING_REGEX=/%{([^\s%{}:]*)(:[^}]*)?}/g;var r=/^\w*$/;b.templateString=function(a,c){var d={};return a.replace(b.TEMPLATE_STRING_REGEX,function(a,e){if(r.test(e))return c[e]||
"";d[e]=d[e]||b.nestedProperty(c,e).get;return d[e]()||""})};var d=/^:/,g=0;b.hovertemplateString=function(a,c,e){var f=arguments,h={};return a.replace(b.TEMPLATE_STRING_REGEX,function(a,n,m){var l;for(l=3;l<f.length;l++){var t=f[l];if(t.hasOwnProperty(n)){var p=t[n];break}r.test(n)||(p=h[n]||b.nestedProperty(t,n).get())&&(h[n]=p);if(void 0!==p)break}void 0===p&&(10>g&&(b.warn("Variable '"+n+"' in hovertemplate could not be found!"),p=a),10===g&&b.warn("Too many hovertemplate warnings - additional warnings will be suppressed"),
g++);m?p=(e?e.numberFormat:k.format)(m.replace(d,""))(p):c.hasOwnProperty(n+"Label")&&(p=c[n+"Label"]);return p})};b.subplotSort=function(a,b){for(var c=Math.min(a.length,b.length)+1,d=0,e=0,f=0;f<c;f++){var g=a.charCodeAt(f)||0,h=b.charCodeAt(f)||0,k=48<=g&&57>=g,n=48<=h&&57>=h;k&&(d=10*d+g-48);n&&(e=10*e+h-48);if(!k||!n){if(d!==e)return d-e;if(g!==h)return g-h}}return e-d};var c=2E9;b.seedPseudoRandom=function(){c=2E9};b.pseudoRandom=function(){var a=c;c=(69069*c+1)%4294967296;return 429496729>
Math.abs(c-a)?b.pseudoRandom():c/4294967296}},{"../constants/numerical":677,"./anchor_utils":681,"./angles":682,"./array":683,"./clean_number":684,"./clear_responsive":686,"./coerce":687,"./dates":688,"./extend":690,"./filter_unique":691,"./filter_visible":692,"./geometry2d":695,"./get_graph_div":696,"./identity":699,"./is_plain_object":701,"./keyed_container":702,"./localize":703,"./loggers":704,"./make_trace_groups":705,"./matrix":706,"./mod":707,"./nested_property":708,"./noop":709,"./notifier":710,
"./push_unique":714,"./regex":716,"./relative_attr":717,"./relink_private":718,"./search":719,"./stats":722,"./throttle":725,"./to_log_range":726,d3:154,"fast-isnumeric":221}],701:[function(a,p,l){p.exports=function(a){return window&&window.process&&window.process.versions?"[object Object]"===Object.prototype.toString.call(a):"[object Object]"===Object.prototype.toString.call(a)&&Object.getPrototypeOf(a)===Object.prototype}},{}],702:[function(a,p,l){var m=a("./nested_property"),k=/^\w*$/;p.exports=
function(a,e,f,b){f=f||"name";b=b||"value";var h,l={};if(e&&e.length){var r=m(a,e);var d=r.get()}else d=a;e=e||"";var g={};if(d)for(h=0;h<d.length;h++)g[d[h][f]]=h;var c=k.test(b),p={set:function(a,e){var h=null===e?4:0;if(!d){if(!r||4===h)return;d=[];r.set(d)}var k=g[a];if(void 0===k){if(4===h)return;h|=3;k=d.length;g[a]=k}else e!==(c?d[k][b]:m(d[k],b).get())&&(h|=2);var n=d[k]=d[k]||{};n[f]=a;c?n[b]=e:m(n,b).set(e);null!==e&&(h&=-5);l[k]|=h;return p},get:function(a){if(d&&(a=g[a],void 0!==a))return c?
d[a][b]:m(d[a],b).get()},rename:function(a,b){var c=g[a];if(void 0===c)return p;l[c]|=1;g[b]=c;delete g[a];d[c][f]=b;return p},remove:function(a){var e=g[a];if(void 0===e)return p;var k=d[e];if(2<Object.keys(k).length)return l[e]|=2,p.set(a,null);if(c){for(h=e;h<d.length;h++)l[h]|=3;for(h=e;h<d.length;h++)g[d[h][f]]--;d.splice(e,1);delete g[a]}else m(k,b).set(null),l[e]|=6;return p},constructUpdate:function(){for(var a,g,h={},k=Object.keys(l),n=0;n<k.length;n++)g=k[n],a=e+"["+g+"]",d[g]?(l[g]&1&&
(h[a+"."+f]=d[g][f]),l[g]&2&&(h[a+"."+b]=c?l[g]&4?null:d[g][b]:l[g]&4?null:m(d[g],b).get())):h[a]=null;return h}};return p}},{"./nested_property":708}],703:[function(a,p,l){var m=a("../registry");p.exports=function(a,h){for(var e=a._context.locale,f=0;2>f;f++){for(var b=a._context.locales,k=0;2>k;k++){if(b=(b[e]||{}).dictionary)if(b=b[h])return b;b=m.localeRegistry}k=e.split("-")[0];if(k===e)break;e=k}return h}},{"../registry":829}],704:[function(a,p,l){function m(a,e){if(a&&a.apply)try{a.apply(console,
e);return}catch(b){}for(var f=0;f<e.length;f++)try{a(e[f])}catch(b){console.log(e[f])}}var k=a("../plot_api/plot_config").dfltConfig;a=p.exports={};a.log=function(){if(1<k.logging){for(var a=["LOG:"],e=0;e<arguments.length;e++)a.push(arguments[e]);m(console.trace||console.log,a)}};a.warn=function(){if(0<k.logging){for(var a=["WARN:"],e=0;e<arguments.length;e++)a.push(arguments[e]);m(console.trace||console.log,a)}};a.error=function(){if(0<k.logging){for(var a=["ERROR:"],e=0;e<arguments.length;e++)a.push(arguments[e]);
m(console.error,a)}}},{"../plot_api/plot_config":736}],705:[function(a,p,l){p.exports=function(a,k,h){a=a.selectAll("g."+h.replace(/\s/g,".")).data(k,function(a){return a[0].trace.uid});a.exit().remove();a.enter().append("g").attr("class",h);a.order();return a}},{}],706:[function(a,p,l){l.init2dArray=function(a,k){for(var h=Array(a),e=0;e<a;e++)h[e]=Array(k);return h};l.transposeRagged=function(a){var k=0,h=a.length,e,f;for(e=0;e<h;e++)k=Math.max(k,a[e].length);var b=Array(k);for(e=0;e<k;e++)for(b[e]=
Array(h),f=0;f<h;f++)b[e][f]=a[f][e];return b};l.dot=function(a,k){if(!a.length||!k.length||a.length!==k.length)return null;var h=a.length,e;if(a[0].length){var f=Array(h);for(e=0;e<h;e++)f[e]=l.dot(a[e],k)}else if(k[0].length)for(k=l.transposeRagged(k),f=Array(k.length),e=0;e<k.length;e++)f[e]=l.dot(a,k[e]);else for(e=f=0;e<h;e++)f+=a[e]*k[e];return f};l.translationMatrix=function(a,k){return[[1,0,a],[0,1,k],[0,0,1]]};l.rotationMatrix=function(a){a=a*Math.PI/180;return[[Math.cos(a),-Math.sin(a),
0],[Math.sin(a),Math.cos(a),0],[0,0,1]]};l.rotationXYMatrix=function(a,k,h){return l.dot(l.dot(l.translationMatrix(k,h),l.rotationMatrix(a)),l.translationMatrix(-k,-h))};l.apply2DTransform=function(a){return function(){var k=arguments;3===k.length&&(k=k[0]);k=1===arguments.length?k[0]:[k[0],k[1]];return l.dot(a,[k[0],k[1],1]).slice(0,2)}};l.apply2DTransform2=function(a){var k=l.apply2DTransform(a);return function(a){return k(a.slice(0,2)).concat(k(a.slice(2,4)))}}},{}],707:[function(a,p,l){p.exports=
{mod:function(a,k){a%=k;return 0>a?a+k:a},modHalf:function(a,k){return Math.abs(a)>k/2?a-Math.round(a/k)*k:a}}},{}],708:[function(a,p,l){function m(a,b){return function(){var d=a,c,e;for(c=0;c<b.length-1;c++){var f=b[c];if(-1===f){f=!0;var h=[];for(e=0;e<d.length;e++)h[e]=m(d[e],b.slice(c+1))(),h[e]!==h[0]&&(f=!1);return f?h[0]:h}if("number"===typeof f&&!n(d))return;d=d[f];if("object"!==typeof d||null===d)return}if("object"===typeof d&&null!==d&&(h=d[b[c]],null!==h))return h}}function k(a,b){return void 0===
a||null===a&&!b.match(u)}function h(a,d,f){return function(c){var g=a,m="",l=[[a,m]],r=k(c,f),p;for(p=0;p<d.length-1;p++){var u=d[p];if("number"===typeof u&&!n(g))throw"array index but container is not an array";if(-1===u){r=g;m=d.slice(p+1);u=c;var q=f,C=n(u),w=!0,x=u,E=q.replace("-1",0),H=C?!1:k(u,E),M=m[0];for(l=0;l<r.length;l++)E=q.replace("-1",l),C&&(x=u[l%u.length],H=k(x,E)),H&&(w=!1),e(r,l,M,H)&&h(r[l],m,q.replace("-1",l))(x);if(r=!w)break;else return}if(!e(g,u,d[p+1],r))break;g=g[u];if("object"!==
typeof g||null===g)throw"container is not an object";q=u;b(u)?q="["+u+"]":m&&(q="."+u);m+=q;l.push([g,m])}if(r){if(p===d.length-1&&(delete g[d[p]],Array.isArray(g)&&+d[p]===g.length-1))for(;g.length&&void 0===g[g.length-1];)g.pop()}else g[d[p]]=c}}function e(a,b,e,c){if(void 0===a[b]){if(c)return!1;a[b]="number"===typeof e?[]:{}}return!0}function f(a,b,e){return{set:function(){throw"bad container";},get:function(){},astr:b,parts:e,obj:a}}var b=a("fast-isnumeric"),n=a("./array").isArrayOrTypedArray;
p.exports=function(a,d){if(b(d))d=String(d);else if("string"!==typeof d||"[-1]"===d.substr(d.length-4))throw"bad property string";for(var e=0,c=d.split("."),k,n;e<c.length;){if(k=String(c[e]).match(/^([^\[\]]*)((\[\-?[0-9]*\])+)$/)){if(k[1])c[e]=k[1];else if(0===e)c.splice(0,1);else throw"bad property string";k=k[2].substr(1,k[2].length-2).split("][");for(n=0;n<k.length;n++)e++,c.splice(e,0,Number(k[n]))}e++}return"object"!==typeof a?f(a,d,c):{set:h(a,c,d),get:m(a,c),astr:d,parts:c,obj:a}};var u=
/(^|\.)args\[/},{"./array":683,"fast-isnumeric":221}],709:[function(a,p,l){p.exports=function(){}},{}],710:[function(a,p,l){var m=a("d3"),k=a("fast-isnumeric"),h=[];p.exports=function(a,f){function b(a){a.duration(700).style("opacity",0).each("end",function(a){a=h.indexOf(a);-1!==a&&h.splice(a,1);m.select(this).remove()})}if(-1===h.indexOf(a)){h.push(a);var e=1E3;k(f)?e=f:"long"===f&&(e=3E3);a=m.select("body").selectAll(".plotly-notifier").data([0]);a.enter().append("div").classed("plotly-notifier",
!0);a.selectAll(".notifier-note").data(h).enter().append("div").classed("notifier-note",!0).style("opacity",0).each(function(a){var f=m.select(this);f.append("button").classed("notifier-close",!0).html("\x26times;").on("click",function(){f.transition().call(b)});var d=f.append("p");a=a.split(/<br\s*\/?>/g);for(var g=0;g<a.length;g++)g&&d.append("br"),d.append("span").text(a[g]);f.transition().duration(700).style("opacity",1).transition().delay(e).call(b)})}}},{d3:154,"fast-isnumeric":221}],711:[function(a,
p,l){var m=a("./setcursor");p.exports=function(a,h){var e=a.attr("data-savedcursor");if(h){if(!e){e=(a.attr("class")||"").split(" ");for(var f=0;f<e.length;f++){var b=e[f];0===b.indexOf("cursor-")&&a.attr("data-savedcursor",b.substr(7)).classed(b,!1)}a.attr("data-savedcursor")||a.attr("data-savedcursor","!!")}m(a,h)}else e&&(a.attr("data-savedcursor",null),"!!"===e?m(a):m(a,e))}},{"./setcursor":720}],712:[function(a,p,l){var m=a("./matrix").dot,k=a("../constants/numerical").BADNUM;a=p.exports={};
a.tester=function(a){function e(a,b){var c=a[0],e=a[1];return c===k||c<m||c>l||e===k||e<d||e>g||b&&p(a)?!1:!0}function b(a,b){var c=a[0];a=a[1];if(c===k||c<m||c>l||a===k||a<d||a>g)return!1;var e=h.length,f=h[0][0],n=h[0][1],t=0,r;for(r=1;r<e;r++){var p=f;var v=n;f=h[r][0];n=h[r][1];var u=Math.min(p,f);if(!(c<u||c>Math.max(p,f)||a>Math.max(v,n)))if(a<Math.min(v,n))c!==u&&t++;else{p=f===p?a:v+(c-p)*(n-v)/(f-p);if(a===p)return 1===r&&b?!1:!0;a<=p&&c!==u&&t++}}return 1===t%2}var h=a.slice(),m=h[0][0],
l=m,d=h[0][1],g=d;h.push(h[0]);for(a=1;a<h.length;a++)m=Math.min(m,h[a][0]),l=Math.max(l,h[a][0]),d=Math.min(d,h[a][1]),g=Math.max(g,h[a][1]);var c=!1;if(5===h.length)if(h[0][0]===h[1][0]){if(h[2][0]===h[3][0]&&h[0][1]===h[3][1]&&h[1][1]===h[2][1]){c=!0;var p=function(a){return a[0]===h[0][0]}}}else h[0][1]===h[1][1]&&h[2][1]===h[3][1]&&h[0][0]===h[3][0]&&h[1][0]===h[2][0]&&(c=!0,p=function(a){return a[1]===h[0][1]});var t=!0,q=h[0];for(a=1;a<h.length;a++)if(q[0]!==h[a][0]||q[1]!==h[a][1]){t=!1;break}return{xmin:m,
xmax:l,ymin:d,ymax:g,pts:h,contains:c?e:b,isRect:c,degenerate:t}};var h=a.isSegmentBent=function(a,f,b,h){var e=a[f],k=[a[b][0]-e[0],a[b][1]-e[1]],d=m(k,k),g=Math.sqrt(d);g=[-k[1]/g,k[0]/g];for(f+=1;f<b;f++){var c=[a[f][0]-e[0],a[f][1]-e[1]];var n=m(c,k);if(0>n||n>d||Math.abs(m(c,g))>h)return!0}return!1};a.filter=function(a,f){function b(b){a.push(b);b=e.length;var c=k;e.splice(m+1);for(var d=c+1;d<a.length;d++)if(d===a.length-1||h(a,c,d+1,f))e.push(a[d]),e.length<b-2&&(k=d,m=e.length-1),c=d}var e=
[a[0]],k=0,m=0;if(1<a.length){var d=a.pop();b(d)}return{addPt:b,raw:a,filtered:e}}},{"../constants/numerical":677,"./matrix":706}],713:[function(a,p,l){(function(m){var k=a("./show_no_webgl_msg"),h=a("regl");p.exports=function(a,f){var b=a._fullLayout,e=!0;b._glcanvas.each(function(k){if(!k.regl&&(!k.pick||b._has("parcoords"))){try{k.regl=h({canvas:this,attributes:{antialias:!k.pick,preserveDrawingBuffer:!0},pixelRatio:a._context.plotGlPixelRatio||m.devicePixelRatio,extensions:f||[]})}catch(r){e=
!1}e&&this.addEventListener("webglcontextlost",function(b){a&&a.emit&&a.emit("plotly_webglcontextlost",{event:b,layer:k.key})},!1)}});e||k({container:b._glcontainer.node()});return e}}).call(this,"undefined"!==typeof x?x:"undefined"!==typeof self?self:"undefined"!==typeof window?window:{})},{"./show_no_webgl_msg":721,regl:486}],714:[function(a,p,l){p.exports=function(a,k){if(k instanceof RegExp){for(var h=k.toString(),e=0;e<a.length;e++)if(a[e]instanceof RegExp&&a[e].toString()===h)return a;a.push(k)}else!k&&
0!==k||-1!==a.indexOf(k)||a.push(k);return a}},{}],715:[function(a,p,l){var m=a("../lib"),k=a("../plot_api/plot_config").dfltConfig,h={add:function(a,f,b,h,m){a.undoQueue=a.undoQueue||{index:0,queue:[],sequence:!1};var e=a.undoQueue.index;if(a.autoplay)a.undoQueue.inSequence||(a.autoplay=!1);else{if(!a.undoQueue.sequence||a.undoQueue.beginSequence){var d={undo:{calls:[],args:[]},redo:{calls:[],args:[]}};a.undoQueue.queue.splice(e,a.undoQueue.queue.length-e,d);a.undoQueue.index+=1}else d=a.undoQueue.queue[e-
1];a.undoQueue.beginSequence=!1;d&&(d.undo.calls.unshift(f),d.undo.args.unshift(b),d.redo.calls.push(h),d.redo.args.push(m));a.undoQueue.queue.length>k.queueLength&&(a.undoQueue.queue.shift(),a.undoQueue.index--)}},startSequence:function(a){a.undoQueue=a.undoQueue||{index:0,queue:[],sequence:!1};a.undoQueue.sequence=!0;a.undoQueue.beginSequence=!0},stopSequence:function(a){a.undoQueue=a.undoQueue||{index:0,queue:[],sequence:!1};a.undoQueue.sequence=!1;a.undoQueue.beginSequence=!1},undo:function(a){var e;
if(a.framework&&a.framework.isPolar)a.framework.undo();else if(!(void 0===a.undoQueue||isNaN(a.undoQueue.index)||0>=a.undoQueue.index)){a.undoQueue.index--;var b=a.undoQueue.queue[a.undoQueue.index];a.undoQueue.inSequence=!0;for(e=0;e<b.undo.calls.length;e++)h.plotDo(a,b.undo.calls[e],b.undo.args[e]);a.undoQueue.inSequence=!1;a.autoplay=!1}},redo:function(a){var e;if(a.framework&&a.framework.isPolar)a.framework.redo();else if(!(void 0===a.undoQueue||isNaN(a.undoQueue.index)||a.undoQueue.index>=a.undoQueue.queue.length)){var b=
a.undoQueue.queue[a.undoQueue.index];a.undoQueue.inSequence=!0;for(e=0;e<b.redo.calls.length;e++)h.plotDo(a,b.redo.calls[e],b.redo.args[e]);a.undoQueue.inSequence=!1;a.autoplay=!1;a.undoQueue.index++}},plotDo:function(a,f,b){a.autoplay=!0;for(var e=[],h,k=0;k<b.length;k++)h=b[k],e[k]=h===a?h:"object"===typeof h?Array.isArray(h)?m.extendDeep([],h):m.extendDeepAll({},h):h;f.apply(null,e)}};p.exports=h},{"../lib":700,"../plot_api/plot_config":736}],716:[function(a,p,l){l.counter=function(a,k,h,e){k=
(k||"")+(h?"":"$");e=!1===e?"":"^";return"xy"===a?new RegExp(e+"x([2-9]|[1-9][0-9]+)?y([2-9]|[1-9][0-9]+)?"+k):new RegExp(e+a+"([2-9]|[1-9][0-9]+)?"+k)}},{}],717:[function(a,p,l){var m=/^(.*)(\.[^\.\[\]]+|\[\d\])$/,k=/^[^\.\[\]]+$/;p.exports=function(a,e){for(;e;){var f=a.match(m);if(f)a=f[1];else if(a.match(k))a="";else throw Error("bad relativeAttr call:"+[a,e]);if("^"===e.charAt(0))e=e.slice(1);else break}return a&&"["!==e.charAt(0)?a+"."+e:a+e}},{}],718:[function(a,p,l){var m=a("./array").isArrayOrTypedArray,
k=a("./is_plain_object");p.exports=function b(a,f){for(var e in f){var l=f[e],r=a[e];if(r!==l)if("_"===e.charAt(0)||"function"===typeof l)e in a||(a[e]=l);else if(m(l)&&m(r)&&k(l[0])){if("customdata"!==e&&"ids"!==e)for(var d=Math.min(l.length,r.length),g=0;g<d;g++)r[g]!==l[g]&&k(l[g])&&k(r[g])&&b(r[g],l[g])}else k(l)&&k(r)&&(b(r,l),Object.keys(r).length||delete a[e])}}},{"./array":683,"./is_plain_object":701}],719:[function(a,p,l){function m(a,b){return a<b}function k(a,b){return a<=b}function h(a,
b){return a>b}function e(a,b){return a>=b}var f=a("fast-isnumeric"),b=a("./loggers"),n=a("./identity");l.findBin=function(a,n,d){if(f(n.start))return d?Math.ceil((a-n.start)/n.size-1E-9)-1:Math.floor((a-n.start)/n.size+1E-9);var g=0,c=n.length,l=0,t=1<c?(n[c-1]-n[0])/(c-1):1;var r=0<=t?d?m:k:d?e:h;for(a+=1E-9*t*(d?-1:1)*(0<=t?1:-1);g<c&&100>l++;)d=Math.floor((g+c)/2),r(n[d],a)?g=d+1:c=d;90<l&&b.log("Long binary search...");return g-1};l.sorterAsc=function(a,b){return a-b};l.sorterDes=function(a,b){return b-
a};l.distinctVals=function(a){a=a.slice();a.sort(l.sorterAsc);for(var b=a.length-1,d=a[b]-a[0]||1,e=d/(b||1)/1E4,c=[a[0]],f=0;f<b;f++)a[f+1]>a[f]+e&&(d=Math.min(d,a[f+1]-a[f]),c.push(a[f+1]));return{vals:c,minDiff:d}};l.roundUp=function(a,b,d){for(var e=0,c=b.length-1,f=0,h=d?0:1,k=d?1:0,n=d?Math.ceil:Math.floor;e<c&&100>f++;)d=n((e+c)/2),b[d]<=a?e=d+h:c=d-k;return b[e]};l.sort=function(a,b){for(var d=0,e=0,c=1;c<a.length;c++){var f=b(a[c],a[c-1]);0>f?d=1:0<f&&(e=1);if(d&&e)return a.sort(b)}return e?
a:a.reverse()};l.findIndexOfMin=function(a,b){b=b||n;for(var d=Infinity,e,c=0;c<a.length;c++){var f=b(a[c]);f<d&&(d=f,e=c)}return e}},{"./identity":699,"./loggers":704,"fast-isnumeric":221}],720:[function(a,p,l){p.exports=function(a,k){(a.attr("class")||"").split(" ").forEach(function(h){0===h.indexOf("cursor-")&&a.classed(h,!1)});k&&a.classed("cursor-"+k,!0)}},{}],721:[function(a,p,l){var m=a("../components/color"),k=function(){};p.exports=function(a){for(var e in a)"function"===typeof a[e]&&(a[e]=
k);a.destroy=function(){a.container.parentNode.removeChild(a.container)};e=document.createElement("div");e.className="no-webgl";e.style.cursor="pointer";e.style.fontSize="24px";e.style.color=m.defaults[0];e.style.position="absolute";e.style.left=e.style.top="0px";e.style.width=e.style.height="100%";e.style["background-color"]=m.lightLine;e.style["z-index"]=30;var f=document.createElement("p");f.textContent="WebGL is not supported by your browser - visit https://get.webgl.org for more info";f.style.position=
"relative";f.style.top="50%";f.style.left="50%";f.style.height="30%";f.style.width="50%";f.style.margin="-15% 0 0 -25%";e.appendChild(f);a.container.appendChild(e);a.container.style.background="#FFFFFF";a.container.onclick=function(){window.open("https://get.webgl.org")};return!1}},{"../components/color":577}],722:[function(a,p,l){var m=a("fast-isnumeric"),k=a("./array").isArrayOrTypedArray;l.aggNums=function(a,e,f,b){var h;if(!b||b>f.length)b=f.length;m(e)||(e=!1);if(k(f[0])){var p=Array(b);for(h=
0;h<b;h++)p[h]=l.aggNums(a,e,f[h]);f=p}for(h=0;h<b;h++)m(e)?m(f[h])&&(e=a(+e,+f[h])):e=f[h];return e};l.len=function(a){return l.aggNums(function(a){return a+1},0,a)};l.mean=function(a,e){e||(e=l.len(a));return l.aggNums(function(a,b){return a+b},0,a)/e};l.midRange=function(a){if(void 0!==a&&0!==a.length)return(l.aggNums(Math.max,null,a)+l.aggNums(Math.min,null,a))/2};l.variance=function(a,e,f){e||(e=l.len(a));m(f)||(f=l.mean(a,e));return l.aggNums(function(a,e){return a+Math.pow(e-f,2)},0,a)/e};
l.stdev=function(a,e,f){return Math.sqrt(l.variance(a,e,f))};l.interp=function(a,e){if(!m(e))throw"n should be a finite number";e=e*a.length-.5;if(0>e)return a[0];if(e>a.length-1)return a[a.length-1];var f=e%1;return f*a[Math.ceil(e)]+(1-f)*a[Math.floor(e)]}},{"./array":683,"fast-isnumeric":221}],723:[function(a,p,l){var m=a("color-normalize");p.exports=function(a){return a?m(a):[0,0,0,1]}},{"color-normalize":110}],724:[function(a,p,l){function m(a,d,e){var f,h,k,m;MathJax.Hub.Queue(function(){h=
n.extendDeepAll({},MathJax.Hub.config);k=MathJax.Hub.processSectionDelay;void 0!==MathJax.Hub.processSectionDelay&&(MathJax.Hub.processSectionDelay=0);return MathJax.Hub.Config({messageStyle:"none",tex2jax:{inlineMath:[["$","$"],["\\(","\\)"]]},displayAlign:"left"})},function(){f=MathJax.Hub.config.menuSettings.renderer;if("SVG"!==f)return MathJax.Hub.setRenderer("SVG")},function(){var e="math-output-"+n.randstr({},64);m=b.select("body").append("div").attr({id:e}).style({visibility:"hidden",position:"absolute"}).style({"font-size":d.fontSize+
"px"}).text(a.replace(g,"\\lt ").replace(c,"\\gt "));return MathJax.Hub.Typeset(m.node())},function(){var c=b.select("body").select("#MathJax_SVG_glyphs");if(m.select(".MathJax_SVG").empty()||!m.select("svg").node())n.log("There was an error in the tex syntax.",a),e();else{var d=m.select("svg").node().getBoundingClientRect();e(m.select(".MathJax_SVG"),c,d)}m.remove();if("SVG"!==f)return MathJax.Hub.setRenderer(f)},function(){void 0!==k&&(MathJax.Hub.processSectionDelay=k);return MathJax.Hub.Config(h)})}
function k(a,b){return a?(a=(a=a.match(b))&&(a[3]||a[4]))&&h(a):null}function h(a){return a.replace(Q,function(a,b){if("#"===b.charAt(0))if(b="x"===b.charAt(1)?parseInt(b.substr(2),16):parseInt(b.substr(1),10),1114111<b)b=void 0;else{var c=String.fromCodePoint;c?b=c(b):(c=String.fromCharCode,b=65535>=b?c(b):c((b>>10)+55232,b%1024+56320))}else b=I[b];return b||a})}function e(a,c){function d(){p++;var c=document.createElementNS(q.svg,"tspan");b.select(c).attr({class:"line",dy:p*r+"em"});a.appendChild(c);
u=c;var d=l;l=[{node:c}];if(1<d.length)for(c=1;c<d.length;c++)e(d[c])}function e(a){var c=a.type,d={};if("a"===c){var e="a";var g=a.target,h=a.href,k=a.popup;h&&(d={"xlink:xlink:show":"_blank"===g||"_"!==g.charAt(0)?"new":"replace",target:g,"xlink:xlink:href":h},k&&(d.onclick='window.open(this.href.baseVal,this.target.baseVal,"'+k+'");return false;'))}else e="tspan";a.style&&(d.style=a.style);e=document.createElementNS(q.svg,e);"sup"===c||"sub"===c?(f(u,B),u.appendChild(e),g=document.createElementNS(q.svg,
"tspan"),f(g,B),b.select(g).attr("dy",y[c]),d.dy=t[c],u.appendChild(e),u.appendChild(g)):u.appendChild(e);b.select(e).attr(d);u=a.node=e;l.push(a)}function f(a,b){a.appendChild(document.createTextNode(b))}function g(a){if(1===l.length)n.log("Ignoring unexpected end tag \x3c/"+a+"\x3e.",c);else{var b=l.pop();a!==b.type&&n.log("Start tag \x3c"+b.type+"\x3e doesnt match end tag \x3c"+a+"\x3e. Pretending it did match.",c);u=l[l.length-1].node}}c=c.replace(w," ");var m=!1,l=[],p=-1;if(x.test(c))d();else{var u=
a;l=[{node:a}]}for(var G=c.split(A),I=0;I<G.length;I++){var L=G[I],N=L.match(C),P=N&&N[2].toLowerCase(),Q=v[P];if("br"===P)d();else if(void 0===Q)f(u,h(L));else if(N[1])g(P);else{L=N[4];N={type:P};var z=k(L,J);z?(z=z.replace(O,"$1 fill:"),Q&&(z+=";"+Q)):Q&&(z=Q);z&&(N.style=z);"a"===P&&(m=!0,P=k(L,E))&&(Q=document.createElement("a"),Q.href=P,-1!==D.indexOf(Q.protocol)&&(N.href=encodeURI(decodeURI(P)),N.target=k(L,H)||"_blank",N.popup=k(L,M)));e(N)}}return m}function f(a,b,c){var d=c.horizontalAlign;
c=c.verticalAlign||"top";var e=a.node().getBoundingClientRect(),f=b.node().getBoundingClientRect(),g;var h="bottom"===c?function(){return e.bottom-g.height}:"middle"===c?function(){return e.top+(e.height-g.height)/2}:function(){return e.top};var k="right"===d?function(){return e.right-g.width}:"center"===d?function(){return e.left+(e.width-g.width)/2}:function(){return e.left};return function(){g=this.node().getBoundingClientRect();this.style({top:h()-f.top+"px",left:k()-f.left+"px","z-index":1E3});
return this}}var b=a("d3"),n=a("../lib"),q=a("../constants/xmlns_namespaces"),r=a("../constants/alignment").LINE_SPACING,d=/([^$]*)([$]+[^$]*[$]+)([^$]*)/;l.convertToTspans=function(a,c,f){function g(){n.empty()||(t=a.attr("class")+"-math",n.select("svg."+t).remove());a.text("").style("white-space","pre");e(a.node(),h)&&a.style("pointer-events","all");l.positionText(a);f&&f.call(a)}var h=a.text(),k=!a.attr("data-notex")&&"undefined"!==typeof MathJax&&h.match(d),n=b.select(a.node().parentNode);if(!n.empty()){var t=
a.attr("class")?a.attr("class").split(" ")[0]:"text";t+="-math";n.selectAll("svg."+t).remove();n.selectAll("g."+t+"-group").remove();a.style("display",null).attr({"data-unformatted":h,"data-math":"N"});k?(c&&c._promises||[]).push(new Promise(function(b){a.style("display","none");var c=parseInt(a.node().style.fontSize,10);m(k[2],{fontSize:c},function(d,e,k){n.selectAll("svg."+t).remove();n.selectAll("g."+t+"-group").remove();if((d=d&&d.select("svg"))&&d.node()){var m=n.append("g").classed(t+"-group",
!0).attr({"pointer-events":"none","data-unformatted":h,"data-math":"Y"});m.node().appendChild(d.node());e&&e.node()&&d.node().insertBefore(e.node().cloneNode(!0),d.node().firstChild);d.attr({"class":t,height:k.height,preserveAspectRatio:"xMinYMin meet"}).style({overflow:"visible","pointer-events":"none"});e=a.node().style.fill||"black";d.select("g").attr({fill:e,stroke:e});e=d.node().getBoundingClientRect().width;k=d.node().getBoundingClientRect().height;var l=+a.attr("x")-e*{start:0,middle:.5,end:1}[a.attr("text-anchor")||
"start"],r=-(c||a.node().getBoundingClientRect().height)/4;"y"===t[0]?(m.attr({transform:"rotate("+[-90,+a.attr("x"),+a.attr("y")]+") translate("+[-e/2,r-k/2]+")"}),d.attr({x:+a.attr("x"),y:+a.attr("y")})):"l"===t[0]?d.attr({x:a.attr("x"),y:r-k/2}):"a"===t[0]&&0!==t.indexOf("atitle")?d.attr({x:0,y:r}):d.attr({x:l,y:+a.attr("y")+r-k/2});f&&f.call(a,m);b(m)}else g(),b()})})):g();return a}};var g=/(<|&lt;|&#60;)/g,c=/(>|&gt;|&#62;)/g,v={sup:"font-size:70%",sub:"font-size:70%",b:"font-weight:bold",i:"font-style:italic",
a:"cursor:pointer",span:"",em:"font-style:italic;font-weight:bold"},t={sub:"0.3em",sup:"-0.6em"},y={sub:"-0.21em",sup:"0.42em"},B="​",D=["http:","https:","mailto:","",void 0,":"],w=/(\r\n?|\n)/g,A=/(<[^<>]*>)/,C=/<(\/?)([^ >]*)(\s+(.*))?>/i,x=/<br(\s+.*)?>/i,J=/(^|[\s"'])style\s*=\s*("([^"]*);?"|'([^']*);?')/i,E=/(^|[\s"'])href\s*=\s*("([^"]*)"|'([^']*)')/i,H=/(^|[\s"'])target\s*=\s*("([^"\s]*)"|'([^'\s]*)')/i,M=/(^|[\s"'])popup\s*=\s*("([\w=,]*)"|'([\w=,]*)')/i,O=/(^|;)\s*color:/;l.plainText=function(a,
b){b=b||{};var c=void 0!==b.len&&-1!==b.len?b.len:Infinity;b=void 0!==b.allowedTags?b.allowedTags:["br"];var d=a.split(A);a=[];for(var e="",f=0,g=0;g<d.length;g++){var h=d[g],k=h.match(C);if(k=k&&k[2].toLowerCase())-1!==b.indexOf(k)&&(a.push(h),e=k);else{k=h.length;if(f+k<c)a.push(h),f+=k;else if(f<c){b=c-f;e&&("br"!==e||3>=b||3>=k)&&a.pop();3<c?a.push(h.substr(0,b-3)+"..."):a.push(h.substr(0,b));break}e=""}}return a.join("")};var I={mu:"μ",amp:"\x26",lt:"\x3c",gt:"\x3e",nbsp:" ",times:"×",plusmn:"±",
deg:"°"},Q=/&(#\d+|#x[\da-fA-F]+|[a-z]+);/g;l.convertEntities=h;l.lineCount=function(a){return a.selectAll("tspan.line").size()||1};l.positionText=function(a,c,d){return a.each(function(){function a(a,b){void 0===b?(b=e.attr(a),null===b&&(e.attr(a,0),b=0)):e.attr(a,b);return b}var e=b.select(this),f=a("x",c),g=a("y",d);"text"===this.nodeName&&e.selectAll("tspan.line").attr({x:f,y:g})})};l.makeEditable=function(a,c){function d(){g();a.style({opacity:0});var c=m.attr("class");(c=c?"."+c.split(" ")[0]+
"-math-group":"[class*\x3d-math-group]")&&b.select(a.node().parentNode).select(c).style({opacity:0})}function e(a){a=a.node();var b=document.createRange();b.selectNodeContents(a);var c=window.getSelection();c.removeAllRanges();c.addRange(b);a.focus()}function g(){var d=b.select(h).select(".svg-container"),g=d.append("div"),k=a.node().style,m=parseFloat(k.fontSize||12),l=c.text;void 0===l&&(l=a.attr("data-unformatted"));g.classed("plugin-editable editable",!0).style({position:"absolute","font-family":k.fontFamily||
"Arial","font-size":m,color:c.fill||k.fill||"black",opacity:1,"background-color":c.background||"transparent",outline:"#ffffff33 1px solid",margin:[-m/8+1,0,0,-1].join("px ")+"px",padding:"0","box-sizing":"border-box"}).attr({contenteditable:!0}).text(l).call(f(a,d,c)).on("blur",function(){h._editing=!1;a.text(this.textContent).style({opacity:1});var c=b.select(this).attr("class");(c=c?"."+c.split(" ")[0]+"-math-group":"[class*\x3d-math-group]")&&b.select(a.node().parentNode).select(c).style({opacity:0});
c=this.textContent;b.select(this).transition().duration(0).remove();b.select(document).on("mouseup",null);n.edit.call(a,c)}).on("focus",function(){var a=this;h._editing=!0;b.select(document).on("mouseup",function(){if(b.event.target===a)return!1;document.activeElement===g.node()&&g.node().blur()})}).on("keyup",function(){27===b.event.which?(h._editing=!1,a.style({opacity:1}),b.select(this).style({opacity:0}).on("blur",function(){return!1}).transition().remove(),n.cancel.call(a,this.textContent)):
(n.input.call(a,this.textContent),b.select(this).call(f(a,d,c)))}).on("keydown",function(){13===b.event.which&&this.blur()}).call(e)}var h=c.gd,k=c.delegate,n=b.dispatch("edit","input","cancel"),m=k||a;a.style({"pointer-events":k?"none":"all"});if(1!==a.size())throw Error("boo");if(c.immediate)d();else m.on("click",d);return b.rebind(a,n,"on")}},{"../constants/alignment":672,"../constants/xmlns_namespaces":678,"../lib":700,d3:154}],725:[function(a,p,l){function m(a){a&&null!==a.timer&&(clearTimeout(a.timer),
a.timer=null)}var k={};l.throttle=function(a,e,f){function b(){f();h.ts=Date.now();h.onDone&&(h.onDone(),h.onDone=null)}var h=k[a],l=Date.now();if(!h){for(var r in k)k[r].ts<l-6E4&&delete k[r];h=k[a]={ts:0,timer:null}}m(h);l>h.ts+e?b():h.timer=setTimeout(function(){b();h.timer=null},e)};l.done=function(a){var e=k[a];return e&&e.timer?new Promise(function(a){var b=e.onDone;e.onDone=function(){b&&b();a();e.onDone=null}}):Promise.resolve()};l.clear=function(a){if(a)m(k[a]),delete k[a];else for(var e in k)l.clear(e)}},
{}],726:[function(a,p,l){var m=a("fast-isnumeric");p.exports=function(a,h){if(0<a)return Math.log(a)/Math.LN10;a=Math.log(Math.min(h[0],h[1]))/Math.LN10;m(a)||(a=Math.log(Math.max(h[0],h[1]))/Math.LN10-6);return a}},{"fast-isnumeric":221}],727:[function(a,p,l){p=p.exports={};var m=a("../plots/geo/constants").locationmodeToLayer,k=a("topojson-client").feature;p.getTopojsonName=function(a){return[a.scope.replace(/ /g,"-"),"_",a.resolution.toString(),"m"].join("")};p.getTopojsonPath=function(a,e){return a+
e+".json"};p.getTopojsonFeatures=function(a,e){return k(e,e.objects[m[a.locationmode]]).features}},{"../plots/geo/constants":776,"topojson-client":524}],728:[function(a,p,l){p.exports={moduleType:"locale",name:"en-US",dictionary:{"Click to enter Colorscale title":"Click to enter Colorscale title"},format:{date:"%m/%d/%Y"}}},{}],729:[function(a,p,l){p.exports={moduleType:"locale",name:"en",dictionary:{"Click to enter Colorscale title":"Click to enter Colourscale title"},format:{days:"Sunday Monday Tuesday Wednesday Thursday Friday Saturday".split(" "),
shortDays:"Sun Mon Tue Wed Thu Fri Sat".split(" "),months:"January February March April May June July August September October November December".split(" "),shortMonths:"Jan Feb Mar Apr May Jun Jul Aug Sep Oct Nov Dec".split(" "),periods:["AM","PM"],dateTime:"%a %b %e %X %Y",date:"%d/%m/%Y",time:"%H:%M:%S",decimal:".",thousands:",",grouping:[3],currency:["$",""],year:"%Y",month:"%b %Y",dayMonth:"%b %-d",dayMonthYear:"%b %-d, %Y"}}},{}],730:[function(a,p,l){var m=a("../registry");p.exports=function(a){for(var h=
m.layoutArrayContainers,e=m.layoutArrayRegexes,f=a.split("[")[0],b,k,l=0;l<e.length;l++)if((k=a.match(e[l]))&&0===k.index){b=k[0];break}b||(b=h[h.indexOf(f)]);if(!b)return!1;a=a.substr(b.length);return a?(k=a.match(/^\[(0|[1-9][0-9]*)\](\.(.+))?$/))?{array:b,index:Number(k[1]),property:k[3]||""}:!1:{array:b,index:"",property:""}}},{"../registry":829}],731:[function(a,p,l){function m(a){for(var b={},d=0;d<a.length;d++)b[a[d]]=!1;return b}function k(a,b,d){a=e({},a);for(var g in a){var c=a[g];f(c)&&
(a[g]=h(c,b,d,g))}"from-root"===d&&(a.editType=b);return a}function h(a,b,d,f){if(a.valType){d=e({},a);d.editType=b;if(Array.isArray(a.items))for(d.items=Array(a.items.length),f=0;f<a.items.length;f++)d.items[f]=h(a.items[f],b,"from-root");return d}return k(a,b,"_"===f.charAt(0)?"nested":"from-root")}a=a("../lib");var e=a.extendFlat,f=a.isPlainObject;a={valType:"flaglist",extras:["none"],flags:"calc clearAxisTypes plot style markerSize colorbars".split(" ")};l={valType:"flaglist",extras:["none"],
flags:"calc plot legend ticks axrange layoutstyle modebar camera arraydraw".split(" ")};var b=a.flags.slice().concat(["fullReplot"]),n=l.flags.slice().concat("layoutReplot");p.exports={traces:a,layout:l,traceFlags:function(){return m(b)},layoutFlags:function(){return m(n)},update:function(a,b){if((b=b.editType)&&"none"!==b){b=b.split("+");for(var d=0;d<b.length;d++)a[b[d]]=!0}},overrideAll:k}},{"../lib":700}],732:[function(a,p,l){function m(a,b){var c=a[b],d=b.charAt(0);c&&"paper"!==c&&(a[b]=v(c,
d))}function k(a){function b(b,c){var d=a.title&&a.title[c];a[b]&&!d&&(a.title||(a.title={}),a.title[c]=a[b],delete a[b])}if(a){if("string"===typeof a.title||"number"===typeof a.title)a.title={text:a.title};b("titlefont","font");b("titleposition","position");b("titleside","side");b("titleoffset","offset")}}function h(a){if(!d.isPlainObject(a))return!1;var b=a.name;delete a.name;delete a.showlegend;return("string"===typeof b||"number"===typeof b)&&String(b)}function e(a){var b="middle",c="center";
"string"===typeof a&&(-1!==a.indexOf("top")?b="top":-1!==a.indexOf("bottom")&&(b="bottom"),-1!==a.indexOf("left")?c="left":-1!==a.indexOf("right")&&(c="right"));return b+" "+c}function f(a,b){return b in a&&"object"===typeof a[b]&&0===Object.keys(a[b]).length}function b(a){var b=a.search(B);if(0<b)return a.substr(0,b)}var n=a("fast-isnumeric"),q=a("gl-mat4/fromQuat"),r=a("../registry"),d=a("../lib"),g=a("../plots/plots");p=a("../plots/cartesian/axis_ids");var c=a("../components/color"),v=p.cleanId,
t=p.getFromTrace,y=r.traceIs;l.clearPromiseQueue=function(a){Array.isArray(a._promises)&&0<a._promises.length&&d.log("Clearing previous rejected promises from queue.");a._promises=[]};l.cleanLayout=function(a){var b;a||(a={});a.xaxis1&&(a.xaxis||(a.xaxis=a.xaxis1),delete a.xaxis1);a.yaxis1&&(a.yaxis||(a.yaxis=a.yaxis1),delete a.yaxis1);a.scene1&&(a.scene||(a.scene=a.scene1),delete a.scene1);var e=(g.subplotsRegistry.cartesian||{}).attrRegex,h=(g.subplotsRegistry.polar||{}).attrRegex,n=(g.subplotsRegistry.ternary||
{}).attrRegex,t=(g.subplotsRegistry.gl3d||{}).attrRegex,p=Object.keys(a);for(b=0;b<p.length;b++){var r=p[b];if(e&&e.test(r)){r=a[r];r.anchor&&"free"!==r.anchor&&(r.anchor=v(r.anchor));r.overlaying&&(r.overlaying=v(r.overlaying));r.type||(r.isdate?r.type="date":r.islog?r.type="log":!1===r.isdate&&!1===r.islog&&(r.type="linear"));if("withzero"===r.autorange||"tozero"===r.autorange)r.autorange=!0,r.rangemode="tozero";delete r.islog;delete r.isdate;delete r.categories;f(r,"domain")&&delete r.domain;void 0!==
r.autotick&&(void 0===r.tickmode&&(r.tickmode=r.autotick?"auto":"linear"),delete r.autotick);k(r)}else if(h&&h.test(r))k(a[r].radialaxis);else if(n&&n.test(r))r=a[r],k(r.aaxis),k(r.baxis),k(r.caxis);else if(t&&t.test(r)){r=a[r];var u=r.cameraposition;if(Array.isArray(u)&&4===u[0].length){var y=u[1],B=u[2],D=q([],u[0]),w=[];for(u=0;3>u;++u)w[u]=y[u]+B*D[2+4*u];r.camera={eye:{x:w[0],y:w[1],z:w[2]},center:{x:y[0],y:y[1],z:y[2]},up:{x:0,y:0,z:1}};delete r.cameraposition}k(r.xaxis);k(r.yaxis);k(r.zaxis)}}e=
Array.isArray(a.annotations)?a.annotations.length:0;for(b=0;b<e;b++)h=a.annotations[b],d.isPlainObject(h)&&(h.ref&&("paper"===h.ref?(h.xref="paper",h.yref="paper"):"data"===h.ref&&(h.xref="x",h.yref="y"),delete h.ref),m(h,"xref"),m(h,"yref"));e=Array.isArray(a.shapes)?a.shapes.length:0;for(b=0;b<e;b++)h=a.shapes[b],d.isPlainObject(h)&&(m(h,"xref"),m(h,"yref"));if(b=a.legend)3<b.x?(b.x=1.02,b.xanchor="left"):-2>b.x&&(b.x=-.02,b.xanchor="right"),3<b.y?(b.y=1.02,b.yanchor="bottom"):-2>b.y&&(b.y=-.02,
b.yanchor="top");k(a);"rotate"===a.dragmode&&(a.dragmode="orbit");c.clean(a);a.template&&a.template.layout&&l.cleanLayout(a.template.layout);return a};l.cleanData=function(a){for(var b=0;b<a.length;b++){var n=a[b];"histogramy"===n.type&&"xbins"in n&&!("ybins"in n)&&(n.ybins=n.xbins,delete n.xbins);if(n.error_y&&"opacity"in n.error_y){var m=c.defaults;m=n.error_y.color||(y(n,"bar")?c.defaultLine:m[b%m.length]);n.error_y.color=c.addOpacity(c.rgb(m),c.opacity(m)*n.error_y.opacity);delete n.error_y.opacity}"bardir"in
n&&("h"!==n.bardir||!y(n,"bar")&&"histogram"!==n.type.substr(0,9)||(n.orientation="h",l.swapXYData(n)),delete n.bardir);"histogramy"===n.type&&l.swapXYData(n);if("histogramx"===n.type||"histogramy"===n.type)n.type="histogram";"scl"in n&&!("colorscale"in n)&&(n.colorscale=n.scl,delete n.scl);"reversescl"in n&&!("reversescale"in n)&&(n.reversescale=n.reversescl,delete n.reversescl);n.xaxis&&(n.xaxis=v(n.xaxis,"x"));n.yaxis&&(n.yaxis=v(n.yaxis,"y"));y(n,"gl3d")&&n.scene&&(n.scene=g.subplotsRegistry.gl3d.cleanId(n.scene));
if(!y(n,"pie")&&!y(n,"bar")&&"waterfall"!==n.type)if(Array.isArray(n.textposition))for(m=0;m<n.textposition.length;m++)n.textposition[m]=e(n.textposition[m]);else n.textposition&&(n.textposition=e(n.textposition));(m=r.getModule(n))&&m.colorbar&&(m=(m=m.colorbar.container)?n[m]:n)&&m.colorscale&&("YIGnBu"===m.colorscale&&(m.colorscale="YlGnBu"),"YIOrRd"===m.colorscale&&(m.colorscale="YlOrRd"));if("surface"===n.type&&d.isPlainObject(n.contours)){var t=["x","y","z"];for(m=0;m<t.length;m++){var p=n.contours[t[m]];
d.isPlainObject(p)&&(p.highlightColor&&(p.highlightcolor=p.highlightColor,delete p.highlightColor),p.highlightWidth&&(p.highlightwidth=p.highlightWidth,delete p.highlightWidth))}}if("candlestick"===n.type||"ohlc"===n.type){t=!1!==(n.increasing||{}).showlegend;p=!1!==(n.decreasing||{}).showlegend;m=h(n.increasing);var q=h(n.decreasing);if(!1!==m&&!1!==q){if(!t||p)if(p&&!t)m=q;else if(m.trim()){if(q.trim()){p=Math.min(m.length,q.length);for(t=0;t<p&&m.charAt(t)===q.charAt(t);t++);m=m.substr(0,t).trim()}}else m=
q;m&&(n.name=m)}else!m&&!q||n.name||(n.name=m||q)}if(Array.isArray(n.transforms))for(t=n.transforms,m=0;m<t.length;m++)if(p=t[m],d.isPlainObject(p))switch(p.type){case "filter":p.filtersrc&&(p.target=p.filtersrc,delete p.filtersrc);p.calendar&&(p.valuecalendar||(p.valuecalendar=p.calendar),delete p.calendar);break;case "groupby":if(p.styles=p.styles||p.style,p.styles&&!Array.isArray(p.styles)){q=p.styles;var u=Object.keys(q);p.styles=[];for(var B=0;B<u.length;B++)p.styles.push({target:u[B],value:q[u[B]]})}}f(n,
"line")&&delete n.line;"marker"in n&&(f(n.marker,"line")&&delete n.marker.line,f(n,"marker")&&delete n.marker);c.clean(n);n.autobinx&&(delete n.autobinx,delete n.xbins);n.autobiny&&(delete n.autobiny,delete n.ybins);k(n);n.colorbar&&k(n.colorbar);n.marker&&n.marker.colorbar&&k(n.marker.colorbar);n.line&&n.line.colorbar&&k(n.line.colorbar);n.aaxis&&k(n.aaxis);n.baxis&&k(n.baxis)}};l.swapXYData=function(a){d.swapAttrs(a,"? ?0 d? ?bins nbins? autobin? ?src error_?".split(" "));Array.isArray(a.z)&&Array.isArray(a.z[0])&&
(a.transpose?delete a.transpose:a.transpose=!0);if(a.error_x&&a.error_y){var b=a.error_y;b="copy_ystyle"in b?b.copy_ystyle:!(b.color||b.thickness||b.width);d.swapAttrs(a,["error_?.copy_ystyle"]);b&&d.swapAttrs(a,["error_?.color","error_?.thickness","error_?.width"])}if("string"===typeof a.hoverinfo){var c=a.hoverinfo.split("+");for(b=0;b<c.length;b++)"x"===c[b]?c[b]="y":"y"===c[b]&&(c[b]="x");a.hoverinfo=c.join("+")}};l.coerceTraceIndices=function(a,b){if(n(b))return[b];if(!Array.isArray(b)||!b.length)return a.data.map(function(a,
b){return b});if(Array.isArray(b)){for(var c=[],e=0;e<b.length;e++)d.isIndex(b[e],a.data.length)?c.push(b[e]):d.warn("trace index (",b[e],") is not a number or is out of bounds");return c}return b};l.manageArrayContainers=function(a,b,c){var e=a.obj,f=a.parts,g=f.length,h=f[g-1],k=n(h);k&&null===b?(a=f.slice(0,g-1).join("."),d.nestedProperty(e,a).get().splice(h,1)):(k&&void 0===a.get()&&void 0===a.get()&&(c[a.astr]=null),a.set(b))};var B=/(\.[^\[\]\.]+|\[[^\[\]\.]+\])$/;l.hasParent=function(a,c){for(c=
b(c);c;){if(c in a)return!0;c=b(c)}return!1};var D=["x","y","z"];l.clearAxisTypes=function(a,b,c){for(var e=0;e<b.length;e++)for(var f=a._fullData[e],g=0;3>g;g++){var h=t(a,f,D[g]);if(h&&"log"!==h.type){var k=h._name;h=h._id.substr(1);if("scene"===h.substr(0,5)){if(void 0!==c[h])continue;k=h+"."+k}h=k+".type";void 0===c[k]&&void 0===c[h]&&d.nestedProperty(a.layout,h).set(null)}}}},{"../components/color":577,"../lib":700,"../plots/cartesian/axis_ids":751,"../plots/plots":810,"../registry":829,"fast-isnumeric":221,
"gl-mat4/fromQuat":258}],733:[function(a,p,l){p=a("./plot_api");l.plot=p.plot;l.newPlot=p.newPlot;l.restyle=p.restyle;l.relayout=p.relayout;l.redraw=p.redraw;l.update=p.update;l._guiRestyle=p._guiRestyle;l._guiRelayout=p._guiRelayout;l._guiUpdate=p._guiUpdate;l._storeDirectGUIEdit=p._storeDirectGUIEdit;l.react=p.react;l.extendTraces=p.extendTraces;l.prependTraces=p.prependTraces;l.addTraces=p.addTraces;l.deleteTraces=p.deleteTraces;l.moveTraces=p.moveTraces;l.purge=p.purge;l.addFrames=p.addFrames;
l.deleteFrames=p.deleteFrames;l.animate=p.animate;l.setPlotConfig=p.setPlotConfig;l.toImage=a("./to_image");l.validate=a("./validate");l.downloadImage=a("../snapshot/download");a=a("./template_api");l.makeTemplate=a.makeTemplate;l.validateTemplate=a.validateTemplate},{"../snapshot/download":831,"./plot_api":735,"./template_api":740,"./to_image":741,"./validate":742}],734:[function(a,p,l){var m=a("../lib/is_plain_object"),k=a("../lib/noop"),h=a("../lib/loggers"),e=a("../lib/search").sorterAsc,f=a("../registry");
l.containerArrayMatch=a("./container_array_match");var b=l.isAddVal=function(a){return"add"===a||m(a)},n=l.isRemoveVal=function(a){return null===a||"remove"===a};l.applyContainerArrayChanges=function(a,m,d,g,c){var l=m.astr,t=f.getComponentMethod(l,"supplyLayoutDefaults"),p=f.getComponentMethod(l,"draw"),r=f.getComponentMethod(l,"drawOne");g=g.replot||g.recalc||t===k||p===k;var q=a.layout,u=a._fullLayout;if(d[""]){1<Object.keys(d).length&&h.warn("Full array edits are incompatible with other edits",
l);r=d[""][""];if(n(r))m.set(null);else if(Array.isArray(r))m.set(r);else return h.warn("Unrecognized full array edit value",l,r),!0;if(g)return!1;t(q,u);p(a);return!0}var A=Object.keys(d).map(Number).sort(e),C=m.get(),w=C||[],x=c(u,l).get(),E=[],H=-1,M=w.length,O;for(O=0;O<A.length;O++){var I=A[O];var Q=d[I];var N=Object.keys(Q);var L=Q[""];var R=b(L);if(0>I||I>w.length-(R?0:1))h.warn("index out of range",l,I);else if(void 0!==L)1<N.length&&h.warn("Insertion \x26 removal are incompatible with edits to the same index.",
l,I),n(L)?E.push(I):R?("add"===L&&(L={}),w.splice(I,0,L),x&&x.splice(I,0,{})):h.warn("Unrecognized full object edit value",l,I,L),-1===H&&(H=I);else for(L=0;L<N.length;L++)R=l+"["+I+"].",c(w[I],N[L],R).set(Q[N[L]])}for(O=E.length-1;0<=O;O--)w.splice(E[O],1),x&&x.splice(E[O],1);w.length?C||m.set(w):m.set(null);if(g)return!1;t(q,u);if(r!==k){if(-1===H)m=A;else{M=Math.max(w.length,M);m=[];for(O=0;O<A.length;O++){I=A[O];if(I>=H)break;m.push(I)}for(O=H;O<M;O++)m.push(O)}for(O=0;O<m.length;O++)r(a,m[O])}else p(a);
return!0}},{"../lib/is_plain_object":701,"../lib/loggers":704,"../lib/noop":709,"../lib/search":719,"../registry":829,"./container_array_match":730}],735:[function(a,p,l){function m(a){var b=a._fullLayout;b._redrawFromAutoMarginCount?b._redrawFromAutoMarginCount--:a.emit("plotly_afterplot")}function k(a,b){try{a._fullLayout._paper.style("background",b)}catch(Fa){S.error(Fa)}}function h(a,b){b=da.combine(b,"white");k(a,b)}function e(a,b){if(!a._context){a._context=S.extendDeep({},wa);var c=T.select("base");
a._context._baseUrl=c.size()&&c.attr("href")?window.location.href.split("#")[0]:""}var d=a._context;if(b){var e=Object.keys(b);for(c=0;c<e.length;c++){var f=e[c];"editable"!==f&&"edits"!==f&&f in d&&(d[f]="setBackground"===f&&"opaque"===b[f]?h:b[f])}b.plot3dPixelRatio&&!d.plotGlPixelRatio&&(d.plotGlPixelRatio=d.plot3dPixelRatio);f=b.editable;if(void 0!==f)for(d.editable=f,e=Object.keys(d.edits),c=0;c<e.length;c++)d.edits[e[c]]=f;if(b.edits)for(e=Object.keys(b.edits),c=0;c<e.length;c++)f=e[c],f in
d.edits&&(d.edits[f]=b.edits[f]);d._exportedPlot=b._exportedPlot}d.staticPlot&&(d.editable=!1,d.edits={},d.autosizable=!1,d.scrollZoom=!1,d.doubleClick=!1,d.showTips=!1,d.showLink=!1,d.displayModeBar=!1);"hover"!==d.displayModeBar||F||(d.displayModeBar=!0);if("transparent"===d.setBackground||"function"!==typeof d.setBackground)d.setBackground=k;d._hasZeroHeight=d._hasZeroHeight||0===a.clientHeight;d._hasZeroWidth=d._hasZeroWidth||0===a.clientWidth;c=d.scrollZoom;a=d._scrollZoom={};if(!0===c)a.cartesian=
1,a.gl3d=1,a.geo=1,a.mapbox=1;else if("string"===typeof c)for(b=c.split("+"),c=0;c<b.length;c++)a[b[c]]=1;else!1!==c&&(a.gl3d=1,a.geo=1,a.mapbox=1)}function f(a,b,c){var d=T.select(a).selectAll(".plot-container").data([0]);d.enter().insert("div",":first-child").classed("plot-container plotly",!0);d=d.selectAll(".svg-container").data([0]);d.enter().append("div").classed("svg-container",!0).style("position","relative");d.html("");b&&(a.data=b);c&&(a.layout=c);la.manager.fillLayout(a);d.style({width:a._fullLayout.width+
"px",height:a._fullLayout.height+"px"});a.framework=la.manager.framework(a);a.framework({data:a.data,layout:a.layout},d.node());a.framework.setUndoPoint();d=a.framework.svg();b=1;c=a._fullLayout.title?a._fullLayout.title.text:"";""!==c&&c||(b=0);var e=function(){this.call(za.convertToTspans,a)};d=d.select(".title-group text").call(e);if(a._context.edits.titleText){var f=S._(a,"Click to enter Plot title");c&&c!==f||(b=.2,d.attr({"data-unformatted":f}).text(f).style({opacity:b}).on("mouseover.opacity",
function(){T.select(this).transition().duration(100).style("opacity",1)}).on("mouseout.opacity",function(){T.select(this).transition().duration(1E3).style("opacity",0)}));var g=function(){this.call(za.makeEditable,{gd:a}).on("edit",function(b){a.framework({layout:{title:{text:b}}});this.text(b).call(e);this.call(g)}).on("cancel",function(){var a=this.attr("data-unformatted");this.text(a).call(e)})};d.call(g)}a._context.setBackground(a,a._fullLayout.paper_bgcolor);ba.addLinks(a);return Promise.resolve()}
function b(a,b){b+=1;var c=[],d;for(d=0;d<a.length;d++){var e=a[d];0>e?c.push(b+e):c.push(e)}return c}function n(a,b,c){var d;for(d=0;d<b.length;d++){var e=b[d];if(e!==parseInt(e,10))throw Error("all values in "+c+" must be integers");if(e>=a.data.length||e<-a.data.length)throw Error(c+" must be valid indices for gd.data.");if(-1<b.indexOf(e,d+1)||0<=e&&-1<b.indexOf(-a.data.length+e)||0>e&&-1<b.indexOf(a.data.length+e))throw Error("each index in "+c+" must be unique.");}}function q(a,b,c){if(!Array.isArray(a.data))throw Error("gd.data must be an array.");
if("undefined"===typeof b)throw Error("currentIndices is a required argument.");Array.isArray(b)||(b=[b]);n(a,b,"currentIndices");"undefined"===typeof c||Array.isArray(c)||(c=[c]);"undefined"!==typeof c&&n(a,c,"newIndices");if("undefined"!==typeof c&&b.length!==c.length)throw Error("current and new indices must be of equal length.");}function r(a,b,c){if(!Array.isArray(a.data))throw Error("gd.data must be an array.");if("undefined"===typeof b)throw Error("traces must be defined.");Array.isArray(b)||
(b=[b]);for(a=0;a<b.length;a++){var d=b[a];if("object"!==typeof d||Array.isArray(d)||null===d)throw Error("all values in traces array must be non-array objects");}"undefined"===typeof c||Array.isArray(c)||(c=[c]);if("undefined"!==typeof c&&c.length!==b.length)throw Error("if indices is specified, traces.length must equal indices.length");}function d(a,c,d,e,f){var g=S.isPlainObject(e);if(!Array.isArray(a.data))throw Error("gd.data must be an array");if(!S.isPlainObject(c))throw Error("update must be a key:value object");
if("undefined"===typeof d)throw Error("indices must be an integer or array of integers");n(a,d,"indices");for(var h in c){if(!Array.isArray(c[h])||c[h].length!==d.length)throw Error("attribute "+h+" must be an array of length equal to indices array length");if(g&&!(h in e&&Array.isArray(e[h])&&e[h].length===c[h].length))throw Error("when maxPoints is set as a key:value object it must contain a 1:1 corrispondence with the keys and number of traces in the update object");}g=d;h=S.isPlainObject(e);d=
[];Array.isArray(g)||(g=[g]);g=b(g,a.data.length-1);for(var k in c)for(var m=0;m<g.length;m++){var l=a.data[g[m]];var t=W(l,k);l=t.get();var p=c[k][m];if(!S.isArrayOrTypedArray(p))throw Error("attribute: "+k+" index: "+m+" must be an array");if(!S.isArrayOrTypedArray(l))throw Error("cannot extend missing or non-array attribute: "+k);if(l.constructor!==p.constructor)throw Error("cannot extend array with an array of a different type: "+k);var r=h?e[k][m]:e;Y(r)||(r=-1);d.push({prop:t,target:l,insert:p,
maxp:Math.floor(r)})}a={};c={};for(e=0;e<d.length;e++)k=d[e].prop,g=f(d[e].target,d[e].insert,d[e].maxp),k.set(g[0]),Array.isArray(a[k.astr])||(a[k.astr]=[]),a[k.astr].push(g[1]),Array.isArray(c[k.astr])||(c[k.astr]=[]),c[k.astr].push(d[e].target.length);return{update:a,maxPoints:c}}function g(a,b){var c=new a.constructor(a.length+b.length);c.set(a);c.set(b,a.length);return c}function c(a,b,d,e){a=S.getGraphDiv(a);aa.clearPromiseQueue(a);var f={};if("string"===typeof b)f[b]=d;else if(S.isPlainObject(b))f=
S.extendFlat({},b),void 0===e&&(e=d);else return S.warn("Restyle fail.",b,d,e),Promise.reject();Object.keys(f).length&&(a.changed=!0);b=aa.coerceTraceIndices(a,e);var g=B(a,f,b);f=g.flags;f.calc&&(a.calcdata=void 0);f.clearAxisTypes&&aa.clearAxisTypes(a,b,{});b=[];f.fullReplot?b.push(l.plot):(b.push(ba.previousPromises),ba.supplyDefaults(a),f.markerSize&&(ba.doCalcdata(a),C(b)),f.style&&b.push(ma.doTraceStyle),f.colorbars&&b.push(ma.doColorBars),b.push(m));b.push(ba.rehover);qa.add(a,c,[a,g.undoit,
g.traces],c,[a,g.redoit,g.traces]);(f=S.syncOrAsync(b,a))&&f.then||(f=Promise.resolve());return f.then(function(){a.emit("plotly_restyle",g.eventData);return a})}function v(a){return void 0===a?null:a}function t(a,b){return b?function(b,c,d){var e=W(b,c),f=e.set;e.set=function(b){y((d||"")+c,e.get(),b,a);f(b)};return e}:W}function y(a,b,c,d){if(Array.isArray(b)||Array.isArray(c)){var e=Array.isArray(b)?b:[];c=Array.isArray(c)?c:[];b=Math.max(e.length,c.length);for(var f=0;f<b;f++)y(a+"["+f+"]",e[f],
c[f],d)}else if(S.isPlainObject(b)||S.isPlainObject(c))for(e in b=S.isPlainObject(b)?b:{},c=S.isPlainObject(c)?c:{},f=S.extendFlat({},b,c),f)y(a+"."+e,b[e],c[e],d);else void 0===d[a]&&(d[a]=v(b))}function B(a,b,c){function d(){return c.map(function(){})}function e(a){a=Z.id2name(a);-1===ca.indexOf(a)&&ca.push(a)}function f(a){return"LAYOUT"+a+".autorange"}function g(a){return"LAYOUT"+a+".range"}function h(a){for(var b=a;b<p.length;b++)if(p[b]._input===r[a])return p[b]}function k(e,f,g){if(Array.isArray(e))e.forEach(function(a){k(a,
f,g)});else if(!(e in b||aa.hasParent(b,e))){if("LAYOUT"===e.substr(0,6))var n=u(a.layout,e.replace("LAYOUT",""));else{n=c[g];var m=l._tracePreGUI[h(n)._fullInput.uid];n=t(m,q)(r[n],e)}e in w||(w[e]=d());void 0===w[e][g]&&(w[e][g]=v(n.get()));void 0!==f&&n.set(f)}}function n(a){return function(b){return p[b][a]}}function m(a){return function(b,d){return!1===b?p[c[d]][a]:null}}var l=a._fullLayout,p=a._fullData,r=a.data,q=l._guiEditing,u=t(l._preGUI,q),y=S.extendDeepAll({},b),A;D(b);var B=Aa.traceFlags(),
C={},w={};for(E in b){if(aa.hasParent(b,E))throw Error("cannot set "+E+" and a parent attribute simultaneously");var I=b[E],x;if("autobinx"===E||"autobiny"===E){var E=E.charAt(E.length-1)+"bins";I=Array.isArray(I)?I.map(m(E)):!1===I?c.map(n(E)):null}C[E]=I;if("LAYOUT"===E.substr(0,6)){var G=u(a.layout,E.replace("LAYOUT",""));w[E]=[v(G.get())];G.set(Array.isArray(I)?I[0]:I);B.calc=!0}else{w[E]=d();for(A=0;A<c.length;A++){var L=r[c[A]];var H=h(c[A]);G=t(l._tracePreGUI[H._fullInput.uid],q)(L,E);var N=
G.get();var J=Array.isArray(I)?I[A%I.length]:I;if(void 0!==J){var M=G.parts[G.parts.length-1],P=(x=E.substr(0,E.length-M.length-1))?x+".":"",Q=x?W(H,x).get():H;if((x=ea.getTraceValObject(H,G.parts))&&x.impliedEdits&&null!==J)for(var O in x.impliedEdits)k(S.relativeAttr(E,O),x.impliedEdits[O],A);else if("thicknessmode"!==M&&"lenmode"!==M||N===J||"fraction"!==J&&"pixels"!==J||!Q)"type"===E&&"pie"===J!==("pie"===N)&&(P="x",Q="y","bar"!==J&&"bar"!==N||"h"!==L.orientation||(P="y",Q="x"),S.swapAttrs(L,
["?","?src"],"labels",P),S.swapAttrs(L,["d?","?0"],"label",P),S.swapAttrs(L,["?","?src"],"values",Q),"pie"===N?(W(L,"marker.color").set(W(L,"marker.colors").get()),l._pielayer.selectAll("g.trace").remove()):ha.traceIs(L,"cartesian")&&W(L,"marker.colors").set(W(L,"marker.color").get()));else{var R=l._size,z=Q.orient;z="top"===z||"bottom"===z;"thicknessmode"===M?(M=z?R.h:R.w,k(P+"thickness",Q.thickness*("fraction"===J?1/M:M),A)):(M=z?R.w:R.h,k(P+"len",Q.len*("fraction"===J?1/M:M),A))}w[E][A]=v(N);if(-1!==
["swapxy","swapxyaxes","orientation","orientationaxes"].indexOf(E)){if("orientation"===E){if(G.set(J),N=L.x&&!L.y?"h":"v",(G.get()||N)===H.orientation)continue}else"orientationaxes"===E&&(L.orientation={v:"h",h:"v"}[H.orientation]);aa.swapXYData(L);B.calc=B.clearAxisTypes=!0}else-1!==ba.dataArrayContainers.indexOf(G.parts[0])?(aa.manageArrayContainers(G,J,w),B.calc=!0):(x?x.arrayOk&&!ha.traceIs(H,"regl")&&(S.isArrayOrTypedArray(J)||S.isArrayOrTypedArray(N))?B.calc=!0:Aa.update(B,x):B.calc=!0,G.set(J))}}-1!==
["swapxyaxes","orientationaxes"].indexOf(E)&&Z.swap(a,c);"orientationaxes"===E&&(A=W(a.layout,"hovermode"),"x"===A.get()?A.set("y"):"y"===A.get()&&A.set("x"));if(-1!==["orientation","type"].indexOf(E)){var ca=[];for(A=0;A<c.length;A++)I=r[c[A]],ha.traceIs(I,"cartesian")&&(e(I.xaxis||"x"),e(I.yaxis||"y"));k(ca.map(f),!0,0);k(ca.map(g),[0,1],0)}}}if(B.calc||B.plot)B.fullReplot=!0;return{flags:B,undoit:w,redoit:C,traces:c,eventData:S.extendDeepNoArrays([],[y,c])}}function D(a){function b(b,c){a[c]=a[b];
delete a[b]}var c=S.counterRegex("axis",".title",!1,!1),d=/colorbar\.title$/,e=Object.keys(a),f;for(f=0;f<e.length;f++){var g=e[f];var h=a[g];"title"!==g&&!c.test(g)&&!d.test(g)||"string"!==typeof h&&"number"!==typeof h?-1<g.indexOf("titlefont")?b(g,g.replace("titlefont","title.font")):-1<g.indexOf("titleposition")?b(g,g.replace("titleposition","title.position")):-1<g.indexOf("titleside")?b(g,g.replace("titleside","title.side")):-1<g.indexOf("titleoffset")&&b(g,g.replace("titleoffset","title.offset")):
b(g,g.replace("title","title.text"))}}function w(a,b,c){a=S.getGraphDiv(a);aa.clearPromiseQueue(a);if(a.framework&&a.framework.isPolar)return Promise.resolve(a);var d={};if("string"===typeof b)d[b]=c;else if(S.isPlainObject(b))d=S.extendFlat({},b);else return S.warn("Relayout fail.",b,c),Promise.reject();Object.keys(d).length&&(a.changed=!0);var e=x(a,d);b=e.flags;b.calc&&(a.calcdata=void 0);c=[ba.previousPromises];b.layoutReplot?c.push(ma.layoutReplot):Object.keys(d).length&&(A(a,b,e)||ba.supplyDefaults(a),
b.legend&&c.push(ma.doLegend),b.layoutstyle&&c.push(ma.layoutStyles),b.axrange&&C(c,e.rangesAltered),b.ticks&&c.push(ma.doTicksRelayout),b.modebar&&c.push(ma.doModeBar),b.camera&&c.push(ma.doCamera),c.push(m));c.push(ba.rehover);qa.add(a,w,[a,e.undoit],w,[a,e.redoit]);(d=S.syncOrAsync(c,a))&&d.then||(d=Promise.resolve(a));return d.then(function(){a.emit("plotly_relayout",e.eventData);return a})}function A(a,b,c){var d=a._fullLayout;if(!b.axrange)return!1;for(var e in b)if("axrange"!==e&&b[e])return!1;
for(var f in c.rangesAltered)if(c=Z.id2name(f),b=a.layout[c],c=d[c],c.autorange=b.autorange,c.range=b.range.slice(),c.cleanRange(),c._matchGroup)for(var g in c._matchGroup)g!==f&&(b=d[Z.id2name(g)],b.autorange=c.autorange,b.range=c.range.slice(),b._input.range=c.range.slice());return!0}function C(a,b){a.push(function(a){(a=a._fullLayout._zoomlayer)&&ka(a)},ma.doAutoRangeAndConstraints,b?function(a){var c=[],d=!0,e;for(e in b){var f=Z.getFromId(a,e);c.push(e);if(f._matchGroup)for(var g in f._matchGroup)b[g]||
c.push(g);f.automargin&&(d=!1)}return Z.draw(a,c,{skipTitle:d})}:function(a){return Z.draw(a,"redraw")},ma.drawData,ma.finalDraw)}function x(a,b){function c(a,d){if(Array.isArray(a))a.forEach(function(a){c(a,d)});else if(!(a in b||aa.hasParent(b,a))){var f=g(e,a);a in q||(q[a]=v(f.get()));void 0!==d&&f.set(d)}}function d(a){a=Z.name2id(a.split(".")[0]);u[a]=1;return a}var e=a.layout,f=a._fullLayout,g=t(f._preGUI,f._guiEditing),h=Object.keys(b),k=Z.list(a),n=S.extendDeepAll({},b),m={},l,p;D(b);h=Object.keys(b);
for(l=0;l<h.length;l++)if(0===h[l].indexOf("allaxes")){for(p=0;p<k.length;p++){var r=k[p]._id.substr(1);r=-1!==r.indexOf("scene")?r+".":"";r=h[l].replace("allaxes",r+k[p]._name);b[r]||(b[r]=b[h[l]])}delete b[h[l]]}h=Aa.layoutFlags();k={};var q={},u={},y,A;for(A in b){if(aa.hasParent(b,A))throw Error("cannot set "+A+" and a parent attribute simultaneously");l=g(e,A);p=b[A];for(r=l.parts.length-1;0<r&&"string"!==typeof l.parts[r];)r--;var B=l.parts[r],C=l.parts[r-1]+"."+B,w=l.parts.slice(0,r).join("."),
I=W(a.layout,w).get(),x=W(f,w).get(),E=l.get();if(void 0!==p){k[A]=p;q[A]="reverse"===B?p:v(E);if((r=ea.getLayoutValObject(f,l.parts))&&r.impliedEdits&&null!==p)for(var G in r.impliedEdits)c(S.relativeAttr(A,G),r.impliedEdits[G]);-1!==["width","height"].indexOf(A)?p?(c("autosize",null),C="height"===A?"width":"height",c(C,f[C])):f[A]=a._initialAutoSize[A]:"autosize"===A?(c("width",p?null:f.width),c("height",p?null:f.height)):C.match(Ca)?(d(C),W(f,w+"._inputRange").set(null)):C.match(Ga)?(d(C),W(f,
w+"._inputRange").set(null),C=W(f,w).get(),C._inputDomain&&(C._input.domain=C._inputDomain.slice())):C.match(Ja)&&W(f,w+"._inputDomain").set(null);if("type"===B){var L=I;C="linear"===x.type&&"log"===p;var H="log"===x.type&&"linear"===p;C||H?(L&&L.range?x.autorange?C&&(L.range=L.range[1]>L.range[0]?[1,2]:[2,1]):(H=L.range[0],L=L.range[1],C?(0>=H&&0>=L&&c(w+".autorange",!0),0>=H?H=L/1E6:0>=L&&(L=H/1E6),c(w+".range[0]",Math.log(H)/Math.LN10),c(w+".range[1]",Math.log(L)/Math.LN10)):(c(w+".range[0]",Math.pow(10,
H)),c(w+".range[1]",Math.pow(10,L)))):c(w+".autorange",!0),Array.isArray(f._subplots.polar)&&f._subplots.polar.length&&f[l.parts[0]]&&"radialaxis"===l.parts[1]&&delete f[l.parts[0]]._subplot.viewInitial["radialaxis.range"],ha.getComponentMethod("annotations","convertCoords")(a,x,p,c),ha.getComponentMethod("images","convertCoords")(a,x,p,c)):(c(w+".autorange",!0),c(w+".range",null));W(f,w+"._inputRange").set(null)}else B.match(va)&&(C=W(f,A).get(),(L=(p||{}).type)&&"-"!==L||(L="linear"),ha.getComponentMethod("annotations",
"convertCoords")(a,C,L,c),ha.getComponentMethod("images","convertCoords")(a,C,L,c));if(C=ta.containerArrayMatch(A)){var N=C.array;l=C.index;B=C.property;r=r||{editType:"calc"};""!==l&&""===B&&(ta.isAddVal(p)?q[A]=null:ta.isRemoveVal(p)?q[A]=(W(e,N).get()||[])[l]:S.warn("unrecognized full object value",b));Aa.update(h,r);m[N]||(m[N]={});(r=m[N][l])||(r=m[N][l]={});r[B]=p;delete b[A]}else"reverse"===B?(I.range?I.range.reverse():(c(w+".autorange",!0),I.range=[1,0]),x.autorange?h.calc=!0:h.plot=!0):(f._has("scatter-like")&&
f._has("regl")&&"dragmode"===A&&("lasso"===p||"select"===p)&&"lasso"!==E&&"select"!==E?h.plot=!0:f._has("gl2d")?h.plot=!0:r?Aa.update(h,r):h.calc=!0,l.set(p))}}for(N in m)ta.applyContainerArrayChanges(a,g(e,N),m[N],h,g)||(h.plot=!0);f=f._axisConstraintGroups||[];for(y in u)for(l=0;l<f.length;l++)if(m=f[l],m[y]){h.calc=!0;for(var M in m)u[M]||(Z.getFromId(a,M)._constraintShrinkable=!0)}if(J(a)||b.height||b.width)h.plot=!0;if(h.plot||h.calc)h.layoutReplot=!0;return{flags:h,rangesAltered:u,undoit:q,
redoit:k,eventData:n}}function J(a){var b=a._fullLayout,c=b.width,d=b.height;a.layout.autosize&&ba.plotAutoSize(a,a.layout,b);return b.width!==c||b.height!==d}function E(a,b,c,d){a=S.getGraphDiv(a);aa.clearPromiseQueue(a);if(a.framework&&a.framework.isPolar)return Promise.resolve(a);S.isPlainObject(b)||(b={});S.isPlainObject(c)||(c={});Object.keys(b).length&&(a.changed=!0);Object.keys(c).length&&(a.changed=!0);d=aa.coerceTraceIndices(a,d);var e=B(a,S.extendFlat({},b),d);b=e.flags;var f=x(a,S.extendFlat({},
c)),g=f.flags;if(b.calc||g.calc)a.calcdata=void 0;b.clearAxisTypes&&aa.clearAxisTypes(a,d,c);c=[];if(b.fullReplot&&g.layoutReplot){var h=a.data,k=a.layout;a.data=void 0;a.layout=void 0;c.push(function(){return l.plot(a,h,k)})}else b.fullReplot?c.push(l.plot):g.layoutReplot?c.push(ma.layoutReplot):(c.push(ba.previousPromises),A(a,g,f)||ba.supplyDefaults(a),b.style&&c.push(ma.doTraceStyle),b.colorbars&&c.push(ma.doColorBars),g.legend&&c.push(ma.doLegend),g.layoutstyle&&c.push(ma.layoutStyles),g.axrange&&
C(c,f.rangesAltered),g.ticks&&c.push(ma.doTicksRelayout),g.modebar&&c.push(ma.doModeBar),g.camera&&c.push(ma.doCamera),c.push(m));c.push(ba.rehover);qa.add(a,E,[a,e.undoit,f.undoit,e.traces],E,[a,e.redoit,f.redoit,e.traces]);(c=S.syncOrAsync(c,a))&&c.then||(c=Promise.resolve(a));return c.then(function(){a.emit("plotly_update",{data:e.eventData,layout:f.eventData});return a})}function H(a){return function(b){b._fullLayout._guiEditing=!0;var c=a.apply(null,arguments);b._fullLayout._guiEditing=!1;return c}}
function M(a,b){for(var c=0;c<b.length;c++){var d=b[c],e=a.match(d.pattern);if(e)return{head:e[1],attr:d.attr}}}function O(a,b){var c=W(b,a).get();if(void 0!==c)return c;a=a.split(".");for(a.pop();1<a.length;)if(a.pop(),c=W(b,a.join(".")+".uirevision").get(),void 0!==c)return c;return b.uirevision}function I(a,b){var c=S.isPlainObject(a),d=Array.isArray(a);return c||d?(c&&S.isPlainObject(b)||d&&Array.isArray(b))&&JSON.stringify(a)===JSON.stringify(b):a===b}function Q(a,b,c,d){var e=d._preGUI,f,g,
h,k=[],n={};for(f in e){if(g=M(f,oa)){if(g=g.attr||g.head+".uirevision",(g=(h=W(d,g).get())&&O(g,b))&&g===h){h=e[f];null===h&&(h=void 0);g=W(b,f);var m=g.get();if(I(m,h)){void 0===m&&"autorange"===f.substr(f.length-9)&&k.push(f.substr(0,f.length-10));g.set(v(W(d,f).get()));continue}}}else S.warn("unrecognized GUI edit: "+f);delete e[f];"range["===f.substr(f.length-8,6)&&(n[f.substr(0,f.length-9)]=1)}for(e=0;e<k.length;e++)h=k[e],n[h]&&(h=W(b,h).get())&&delete h.autorange;k=d._tracePreGUI;for(var l in k)for(f in n=
k[l],e=null,n){if(!e){a:{for(e=0;e<c.length;e++)if(c[e]._fullInput.uid===l)break a;e=-1}if(0>e){delete k[l];break}var t=c[e]._fullInput;a:{e=t.index;for(h=0;h<a.length;h++)if(a[h].uid===l){e=h;break a}e=!a[e]||a[e].uid?-1:e}if(0>e){delete k[l];break}e=a[e]}if(g=M(f,Ea)){if(g.attr?g=(h=W(d,g.attr).get())&&O(g.attr,b):(h=t.uirevision,g=e.uirevision,void 0===g&&(g=b.uirevision)),g&&g===h&&(h=n[f],null===h&&(h=void 0),g=W(e,f),m=g.get(),I(m,h))){g.set(v(W(t,f).get()));continue}}else S.warn("unrecognized GUI edit: "+
f+" in trace uid "+l);delete n[f]}}function N(a,b,c,d,e,f){var g=b.length===c.length;if(!e&&!g)return{fullReplot:!0,calc:!0};var h=Aa.traceFlags();h.arrays={};h.nChanges=0;h.nChangesAnim=0;d={getValObject:function(a){return ea.getTraceValObject(k,a)},flags:h,immutable:d,transition:e,newDataRevision:f,gd:a};f={};for(a=0;a<b.length;a++)if(c[a]){var k=c[a]._fullInput;ba.hasMakesDataTransform(k)&&(k=c[a]);f[k.uid]||(f[k.uid]=1,R(b[a]._fullInput,k,[],d))}if(h.calc||h.plot)h.fullReplot=!0;e&&h.nChanges&&
h.nChangesAnim&&(h.anim=h.nChanges===h.nChangesAnim&&g?"all":"some");return h}function L(a,b,c,d,e){var f=Aa.layoutFlags();f.arrays={};f.rangesAltered={};f.nChanges=0;f.nChangesAnim=0;R(b,c,[],{getValObject:function(a){return ea.getLayoutValObject(c,a)},flags:f,immutable:d,transition:e,gd:a});if(f.plot||f.calc)f.layoutReplot=!0;e&&f.nChanges&&f.nChangesAnim&&(f.anim=f.nChanges===f.nChangesAnim?"all":"some");return f}function R(a,b,c,d){function e(){var a=f.editType;if(m&&-1!==a.indexOf("arraydraw"))S.pushUnique(k.arrays[m],
l);else{Aa.update(k,f);"none"!==a&&k.nChanges++;d.transition&&f.anim&&k.nChangesAnim++;if(Ca.test(v)||Ga.test(v))k.rangesAltered[c[0]]=1;Ja.test(v)&&W(b,"_inputDomain").set(null);"datarevision"===g&&(k.newDataRevision=1)}}var f,g,h=d.getValObject,k=d.flags,n=d.immutable,m=d.inArray,l=d.arrayIndex;for(g in a){if(k.calc&&!d.transition)return;var t=a[g],p=b[g],r=c.concat(g);var v=r.join(".");if("_"!==g.charAt(0)&&"function"!==typeof t&&t!==p){if(("tick0"===g||"dtick"===g)&&"geo"!==c[0]){var q=b.tickmode;
if("auto"===q||"array"===q||!q)continue}if(!("range"===g&&b.autorange||("zmin"===g||"zmax"===g)&&"contourcarpet"===b.type||!(f=h(r))||f._compareAsJSON&&JSON.stringify(t)===JSON.stringify(p))){q=f.valType;var u="data_array"===f.valType||f.arrayOk,y=Array.isArray(t),A=Array.isArray(p);if(y&&A){var B="_input_"+g,C=a[B];B=b[B];if(Array.isArray(C)&&C===B)continue}if(void 0===p)u&&y?k.calc=!0:e();else if(f._isLinkedToArray){u=[];y=!1;m||(k.arrays[g]=u);A=Math.min(t.length,p.length);C=Math.max(t.length,
p.length);if(A!==C)if("arraydraw"===f.editType)y=!0;else{e();continue}for(q=0;q<A;q++)R(t[q],p[q],r.concat(q),S.extendFlat({inArray:g,arrayIndex:q},d));if(y)for(q=A;q<C;q++)u.push(q)}else!q&&S.isPlainObject(t)?R(t,p,r,d):u?y&&A?(n&&(k.calc=!0),(n||d.newDataRevision)&&e()):y!==A?k.calc=!0:e():y&&A?(t.length!==p.length||String(t)!==String(p))&&e():e()}}}for(g in b)if(!(g in a||"_"===g.charAt(0)||"function"===typeof b[g]))if(f=h(c.concat(g)),("data_array"===f.valType||f.arrayOk)&&Array.isArray(b[g])){k.calc=
!0;break}else e()}function z(a,b){for(var c in a)if("_"!==c.charAt(0)){var d=a[c],e=b[c];if(d!==e)if(S.isPlainObject(d)&&S.isPlainObject(e)){if(z(d,e))return!0}else if(Array.isArray(d)&&Array.isArray(e)){if(d.length!==e.length)return!0;for(var f=0;f<d.length;f++)if(d[f]!==e[f])if(S.isPlainObject(d[f])&&S.isPlainObject(e[f])){if(z(d[f],e[f]))return!0}else return!0}else return!0}}function U(a){var b=T.select(a),c=a._fullLayout;c._container=b.selectAll(".plot-container").data([0]);c._container.enter().insert("div",
":first-child").classed("plot-container",!0).classed("plotly",!0);c._paperdiv=c._container.selectAll(".svg-container").data([0]);c._paperdiv.enter().append("div").classed("svg-container",!0).style("position","relative");c._glcontainer=c._paperdiv.selectAll(".gl-container").data([{}]);c._glcontainer.enter().append("div").classed("gl-container",!0);c._paperdiv.selectAll(".main-svg").remove();c._paperdiv.select(".modebar-container").remove();c._paper=c._paperdiv.insert("svg",":first-child").classed("main-svg",
!0);c._toppaper=c._paperdiv.append("svg").classed("main-svg",!0);c._modebardiv=c._paperdiv.append("div");c._hoverpaper=c._paperdiv.append("svg").classed("main-svg",!0);if(!c._uid){var d={};T.selectAll("defs").each(function(){this.id&&(d[this.id.split("-")[1]]=1)});c._uid=S.randstr(d)}c._paperdiv.selectAll(".main-svg").attr(xa.svgAttrs);c._defs=c._paper.append("defs").attr("id","defs-"+c._uid);c._clips=c._defs.append("g").classed("clips",!0);c._topdefs=c._toppaper.append("defs").attr("id","topdefs-"+
c._uid);c._topclips=c._topdefs.append("g").classed("clips",!0);c._bgLayer=c._paper.append("g").classed("bglayer",!0);c._draggers=c._paper.append("g").classed("draglayer",!0);b=c._paper.append("g").classed("layer-below",!0);c._imageLowerLayer=b.append("g").classed("imagelayer",!0);c._shapeLowerLayer=b.append("g").classed("shapelayer",!0);c._cartesianlayer=c._paper.append("g").classed("cartesianlayer",!0);c._polarlayer=c._paper.append("g").classed("polarlayer",!0);c._ternarylayer=c._paper.append("g").classed("ternarylayer",
!0);c._geolayer=c._paper.append("g").classed("geolayer",!0);c._pielayer=c._paper.append("g").classed("pielayer",!0);c._sunburstlayer=c._paper.append("g").classed("sunburstlayer",!0);c._glimages=c._paper.append("g").classed("glimages",!0);b=c._toppaper.append("g").classed("layer-above",!0);c._imageUpperLayer=b.append("g").classed("imagelayer",!0);c._shapeUpperLayer=b.append("g").classed("shapelayer",!0);c._infolayer=c._toppaper.append("g").classed("infolayer",!0);c._menulayer=c._toppaper.append("g").classed("menulayer",
!0);c._zoomlayer=c._toppaper.append("g").classed("zoomlayer",!0);c._hoverlayer=c._hoverpaper.append("g").classed("hoverlayer",!0);c._modebardiv.classed("modebar-container",!0).style("position","absolute").style("top","0px").style("right","0px");a.emit("plotly_framework")}var T=a("d3"),Y=a("fast-isnumeric"),F=a("has-hover"),S=a("../lib"),W=S.nestedProperty,fa=a("../lib/events"),qa=a("../lib/queue"),ha=a("../registry"),ea=a("./plot_schema"),ba=a("../plots/plots"),la=a("../plots/polar/legacy"),Z=a("../plots/cartesian/axes"),
K=a("../components/drawing"),da=a("../components/color"),ya=a("../components/colorbar/connect"),ja=a("../plots/cartesian/graph_interact").initInteractions,xa=a("../constants/xmlns_namespaces"),za=a("../lib/svg_text_utils"),ka=a("../plots/cartesian/select").clearSelect,wa=a("./plot_config").dfltConfig,ta=a("./manage_arrays"),aa=a("./helpers"),ma=a("./subroutines"),Aa=a("./edit_types"),va=a("../plots/cartesian/constants").AX_NAME_PATTERN,sa=0;l.plot=function(a,b,c,d){function g(){for(var b=q._basePlotModules,
c=0;c<b.length;c++)b[c].drawFramework&&b[c].drawFramework(a);!q._glcanvas&&q._has("gl")&&(q._glcanvas=q._glcontainer.selectAll(".gl-canvas").data([{key:"contextLayer",context:!0,pick:!1},{key:"focusLayer",context:!1,pick:!1},{key:"pickLayer",context:!1,pick:!0}],function(a){return a.key}),q._glcanvas.enter().append("canvas").attr("class",function(a){return"gl-canvas gl-canvas-"+a.key.replace("Layer","")}).style({position:"absolute",top:0,left:0,overflow:"visible","pointer-events":"none"}));if(q._glcanvas&&
(q._glcanvas.attr("width",q.width).attr("height",q.height),(b=q._glcanvas.data()[0].regl)&&(Math.floor(q.width)!==b._gl.drawingBufferWidth||Math.floor(q.height)!==b._gl.drawingBufferHeight)))if(A)S.error("WebGL context buffer and canvas dimensions do not match due to browser/WebGL bug.");else return S.log("WebGL context buffer and canvas dimensions do not match due to browser/WebGL bug. Clearing graph and plotting again."),ba.cleanPlot([],{},a._fullData,q),ba.supplyDefaults(a),q=a._fullLayout,ba.doCalcdata(a),
A++,g();"h"===q.modebar.orientation?q._modebardiv.style("height",null).style("width","100%"):q._modebardiv.style("width",null).style("height",q.height+"px");return ba.previousPromises(a)}function h(){var b=a.calcdata,c;ba.clearAutoMarginIds(a);ma.drawMarginPushers(a);Z.allowAutoMargin(a);for(c=0;c<b.length;c++){var d=b[c];var e=d[0].trace;var f=e._module.colorbar;!0===e.visible&&f?ya(a,d,f):ba.autoMargin(a,"cb"+e.uid)}ba.doAutoMargin(a);return ba.previousPromises(a)}function k(){if(u)return S.syncOrAsync([ha.getComponentMethod("shapes",
"calcAutorange"),ha.getComponentMethod("annotations","calcAutorange"),n],a);n()}function n(){a._transitioning||(ma.doAutoRangeAndConstraints(a),v&&Z.saveRangeInitial(a),ha.getComponentMethod("rangeslider","calcAutorange")(a))}function t(){return Z.draw(a,v?"":"redraw")}a=S.getGraphDiv(a);fa.init(a);if(S.isPlainObject(b)){var p=b;b=p.data;c=p.layout;d=p.config;var r=p.frames}if(!1===fa.triggerHandler(a,"plotly_beforeplot",[b,c,d]))return Promise.reject();b||c||S.isPlotDiv(a)||S.warn("Calling Plotly.plot as if redrawing but this container doesn't yet have a plot.",
a);e(a,d);c||(c={});T.select(a).classed("js-plotly-plot",!0);K.makeTester();Array.isArray(a._promises)||(a._promises=[]);var v=0===(a.data||[]).length&&Array.isArray(b);Array.isArray(b)&&(aa.cleanData(b),v?a.data=b:a.data.push.apply(a.data,b),a.empty=!1);if(!a.layout||v)a.layout=aa.cleanLayout(c);if(a._dragging&&!a._transitioning)return a._replotPending=!0,Promise.reject();a._replotPending=!1;ba.supplyDefaults(a);var q=a._fullLayout;d=q._has("cartesian");if(!q._has("polar")&&b&&b[0]&&b[0].r)return S.log("Legacy polar charts are deprecated!"),
f(a,b,c);q._replotting=!0;v&&U(a);a.framework!==U&&(a.framework=U,U(a));K.initGradients(a);v&&Z.saveShowSpikeInitial(a);var u=!a.calcdata||a.calcdata.length!==(a._fullData||[]).length;u&&ba.doCalcdata(a);for(b=0;b<a.calcdata.length;b++)a.calcdata[b][0].trace=a._fullData[b];a._context.responsive?a._responsiveChartHandler||(a._responsiveChartHandler=function(){ba.resize(a)},window.addEventListener("resize",a._responsiveChartHandler)):S.clearResponsive(a);var y=JSON.stringify(q._size),A=0;b=[ba.previousPromises,
function(){if(r)return l.addFrames(a,r)},g,h,function(){if(JSON.stringify(q._size)!==y)return S.syncOrAsync([h,ma.layoutStyles],a)}];d&&b.push(k);b.push(ma.layoutStyles);d&&b.push(t);b.push(ma.drawData,ma.finalDraw,ja,ba.addLinks,ba.rehover,ba.doAutoMargin,ba.previousPromises);(b=S.syncOrAsync(b,a))&&b.then||(b=Promise.resolve());return b.then(function(){m(a);return a})};l.setPlotConfig=function(a){return S.extendFlat(wa,a)};l.redraw=function(a){a=S.getGraphDiv(a);if(!S.isPlotDiv(a))throw Error("This element is not a Plotly plot: "+
a);aa.cleanData(a.data);aa.cleanLayout(a.layout);a.calcdata=void 0;return l.plot(a).then(function(){a.emit("plotly_redraw");return a})};l.newPlot=function(a,b,c,d){a=S.getGraphDiv(a);ba.cleanPlot([],{},a._fullData||[],a._fullLayout||{});ba.purge(a);return l.plot(a,b,c,d)};l.extendTraces=function Ba(a,b,c,e){a=S.getGraphDiv(a);var f=d(a,b,c,e,function(a,b,c){if(S.isTypedArray(a))if(0>c){var d=new a.constructor(0);a=g(a,b);if(0>c)var e=a;else e=d,d=a}else if(e=new a.constructor(c),d=new a.constructor(a.length+
b.length-c),c===b.length)e.set(b),d.set(a);else if(c<b.length)c=b.length-c,e.set(b.subarray(c)),d.set(a),d.set(b.subarray(0,c),a.length);else{c-=b.length;var f=a.length-c;e.set(a.subarray(f));e.set(b,c);d.set(a.subarray(0,f))}else e=a.concat(b),d=0<=c&&c<e.length?e.splice(0,e.length-c):[];return[e,d]}),h=l.redraw(a);qa.add(a,l.prependTraces,[a,f.update,c,f.maxPoints],Ba,arguments);return h};l.prependTraces=function Ia(a,b,c,e){a=S.getGraphDiv(a);var f=d(a,b,c,e,function(a,b,c){if(S.isTypedArray(a))if(0>=
c){var d=new a.constructor(0);a=g(b,a);if(0>c)var e=a;else e=d,d=a}else e=new a.constructor(c),d=new a.constructor(a.length+b.length-c),c===b.length?(e.set(b),d.set(a)):c<b.length?(c=b.length-c,e.set(b.subarray(0,c)),d.set(b.subarray(c)),d.set(a,c)):(c-=b.length,e.set(b),e.set(a.subarray(0,c),b.length),d.set(a.subarray(c)));else e=b.concat(a),d=0<=c&&c<e.length?e.splice(c,e.length):[];return[e,d]}),h=l.redraw(a);qa.add(a,l.extendTraces,[a,f.update,c,f.maxPoints],Ia,arguments);return h};l.addTraces=
function Ia(a,b,c){a=S.getGraphDiv(a);var d=[],e=l.deleteTraces,f=[a,d],g=[a,b],h;r(a,b,c);Array.isArray(b)||(b=[b]);b=b.map(function(a){return S.extendFlat({},a)});aa.cleanData(b);for(h=0;h<b.length;h++)a.data.push(b[h]);for(h=0;h<b.length;h++)d.push(-b.length+h);if("undefined"===typeof c)return b=l.redraw(a),qa.add(a,e,f,Ia,g),b;Array.isArray(c)||(c=[c]);try{q(a,d,c)}catch(Ta){throw a.data.splice(a.data.length-b.length,b.length),Ta;}qa.startSequence(a);qa.add(a,e,f,Ia,g);b=l.moveTraces(a,d,c);qa.stopSequence(a);
return b};l.deleteTraces=function Ia(a,c){a=S.getGraphDiv(a);var d=[],e=l.addTraces,f=[a,d,c],g=[a,c],h;if("undefined"===typeof c)throw Error("indices must be an integer or array of integers.");Array.isArray(c)||(c=[c]);n(a,c,"indices");c=b(c,a.data.length-1);c.sort(S.sorterDes);for(h=0;h<c.length;h+=1){var k=a.data.splice(c[h],1)[0];d.push(k)}c=l.redraw(a);qa.add(a,e,f,Ia,g);return c};l.moveTraces=function Ua(a,c,d){a=S.getGraphDiv(a);var e=[],f=[],g=[a,d,c],h=[a,c,d],k;q(a,c,d);c=Array.isArray(c)?
c:[c];if("undefined"===typeof d)for(d=[],k=0;k<c.length;k++)d.push(-c.length+k);d=Array.isArray(d)?d:[d];c=b(c,a.data.length-1);d=b(d,a.data.length-1);for(k=0;k<a.data.length;k++)-1===c.indexOf(k)&&e.push(a.data[k]);for(k=0;k<c.length;k++)f.push({newIndex:d[k],trace:a.data[c[k]]});f.sort(function(a,b){return a.newIndex-b.newIndex});for(k=0;k<f.length;k+=1)e.splice(f[k].newIndex,0,f[k].trace);a.data=e;c=l.redraw(a);qa.add(a,Ua,g,Ua,h);return c};l.restyle=c;l._storeDirectGUIEdit=function(a,b,c){for(var d in c){var e=
W(a,d);y(d,e.get(),c[d],b)}};l.relayout=w;var Ca=/^[xyz]axis[0-9]*\.range(\[[0|1]\])?$/,Ga=/^[xyz]axis[0-9]*\.autorange$/,Ja=/^[xyz]axis[0-9]*\.domain(\[[0|1]\])?$/;l.update=E;l._guiRestyle=H(c);l._guiRelayout=H(w);l._guiUpdate=H(E);var oa=[{pattern:/^hiddenlabels/,attr:"legend.uirevision"},{pattern:/^((x|y)axis\d*)\.((auto)?range|title\.text)/},{pattern:/axis\d*\.showspikes$/,attr:"modebar.uirevision"},{pattern:/(hover|drag)mode$/,attr:"modebar.uirevision"},{pattern:/^(scene\d*)\.camera/},{pattern:/^(geo\d*)\.(projection|center)/},
{pattern:/^(ternary\d*\.[abc]axis)\.(min|title\.text)$/},{pattern:/^(polar\d*\.radialaxis)\.((auto)?range|angle|title\.text)/},{pattern:/^(polar\d*\.angularaxis)\.rotation/},{pattern:/^(mapbox\d*)\.(center|zoom|bearing|pitch)/},{pattern:/^legend\.(x|y)$/,attr:"editrevision"},{pattern:/^(shapes|annotations)/,attr:"editrevision"},{pattern:/^title\.text$/,attr:"editrevision"}],Ea=[{pattern:/^selectedpoints$/,attr:"selectionrevision"},{pattern:/(^|value\.)visible$/,attr:"legend.uirevision"},{pattern:/^dimensions\[\d+\]\.constraintrange/},
{pattern:/^node\.(x|y)/},{pattern:/^level$/},{pattern:/(^|value\.)name$/},{pattern:/colorbar\.title\.text$/},{pattern:/colorbar\.(x|y)$/,attr:"editrevision"}];l.react=function(a,b,c,d){function f(){return l.addFrames(a,t)}var g;a=S.getGraphDiv(a);var h=a._fullData,k=a._fullLayout;if(S.isPlotDiv(a)&&h&&k){if(S.isPlainObject(b)){var n=b;b=n.data;c=n.layout;d=n.config;var t=n.frames}n=!1;d&&(n=S.extendDeep({},a._context),a._context=void 0,e(a,d),n=z(n,a._context));a.data=b||[];aa.cleanData(a.data);a.layout=
c||{};aa.cleanLayout(a.layout);Q(a.data,a.layout,h,k);ba.supplyDefaults(a,{skipUpdateCalc:!0});var p=a._fullData;d=a._fullLayout;var r=void 0===d.datarevision,v=d.transition,q=L(a,k,d,r,v),u=N(a,h,p,r,v,q.newDataRevision);J(a)&&(q.layoutReplot=!0);u.calc||q.calc?a.calcdata=void 0:ba.supplyDefaultsUpdateCalc(a.calcdata,p);h=[];t&&(a._transitionData={},ba.createTransitionData(a),h.push(f));if(d.transition&&!n&&(u.anim||q.anim))ba.doCalcdata(a),ma.doAutoRangeAndConstraints(a),h.push(function(){return ba.transitionFromReact(a,
u,q,k)});else if(u.fullReplot||q.layoutReplot||n)a._fullLayout._skipDefaults=!0,h.push(l.plot);else{for(g in q.arrays)if(n=q.arrays[g],n.length)if(d=ha.getComponentMethod(g,"drawOne"),d!==S.noop)for(p=0;p<n.length;p++)d(a,n[p]);else{n=ha.getComponentMethod(g,"draw");if(n===S.noop)throw Error("cannot draw components: "+g);n(a)}h.push(ba.previousPromises);u.style&&h.push(ma.doTraceStyle);u.colorbars&&h.push(ma.doColorBars);q.legend&&h.push(ma.doLegend);q.layoutstyle&&h.push(ma.layoutStyles);q.axrange&&
C(h);q.ticks&&h.push(ma.doTicksRelayout);q.modebar&&h.push(ma.doModeBar);q.camera&&h.push(ma.doCamera);h.push(m)}h.push(ba.rehover);(g=S.syncOrAsync(h,a))&&g.then||(g=Promise.resolve(a))}else g=l.newPlot(a,b,c,d);return g.then(function(){a.emit("plotly_react",{data:b,layout:c});return a})};l.animate=function(a,b,c){function d(a,b){var c=0;return function(){if(a&&++c===b)return a()}}a=S.getGraphDiv(a);if(!S.isPlotDiv(a))throw Error("This element is not a Plotly plot: "+a+". It's likely that you've failed to create a plot before animating it. For more details, see https://plot.ly/javascript/animations/");
var e=a._transitionData;e._frameQueue||(e._frameQueue=[]);c=ba.supplyAnimationDefaults(c);var f=c.transition,g=c.frame;void 0===e._frameWaitingCnt&&(e._frameWaitingCnt=0);return new Promise(function(h,k){function n(){if(0!==e._frameQueue.length){for(;e._frameQueue.length;){var b=e._frameQueue.pop();if(b.onInterrupt)b.onInterrupt()}a.emit("plotly_animationinterrupted",[])}}function m(b){if(0!==b.length){for(var n=0;n<b.length;n++){var m="byname"===b[n].type?ba.computeFrame(a,b[n].name):b[n].data;var l=
n;l=Array.isArray(g)?l>=g.length?g[0]:g[l]:g;var p=n;p=Array.isArray(f)?p>=f.length?f[0]:f[p]:f;p.duration=Math.min(p.duration,l.duration);m={frame:m,name:b[n].name,frameOpts:l,transitionOpts:p};n===b.length-1&&(m.onComplete=d(h,2),m.onInterrupt=k);e._frameQueue.push(m)}"immediate"===c.mode&&(e._lastFrameAt=-Infinity);e._animationRaf||t()}}function l(){if(e._currentFrame&&e._currentFrame.onComplete)e._currentFrame.onComplete();var b=e._currentFrame=e._frameQueue.shift();if(b){var c=b.name?b.name.toString():
null;a._fullLayout._currentFrame=c;e._lastFrameAt=Date.now();e._timeToNext=b.frameOpts.duration;ba.transition(a,b.frame.data,b.frame.layout,aa.coerceTraceIndices(a,b.frame.traces),b.frameOpts,b.transitionOpts).then(function(){if(b.onComplete)b.onComplete()});a.emit("plotly_animatingframe",{name:c,frame:b.frame,animation:{frame:b.frameOpts,transition:b.transitionOpts}})}else a.emit("plotly_animated"),window.cancelAnimationFrame(e._animationRaf),e._animationRaf=null}function t(){a.emit("plotly_animating");
e._lastFrameAt=-Infinity;e._timeToNext=0;e._runningTransitions=0;e._currentFrame=null;var b=function(){e._animationRaf=window.requestAnimationFrame(b);Date.now()-e._lastFrameAt>e._timeToNext&&l()};b()}function p(a){Array.isArray(f)?a.transitionOpts=r>=f.length?f[r]:f[0]:a.transitionOpts=f;r++;return a}var r=0,v,q=[],u=void 0===b||null===b;var y=Array.isArray(b);if(!u&&!y&&S.isPlainObject(b))q.push({type:"object",data:p(S.extendFlat({},b))});else if(u||-1!==["string","number"].indexOf(typeof b))for(y=
0;y<e._frames.length;y++)(v=e._frames[y])&&(u||String(v.group)===String(b))&&q.push({type:"byname",name:String(v.name),data:p({name:v.name})});else if(y)for(y=0;y<b.length;y++)v=b[y],-1!==["number","string"].indexOf(typeof v)?(v=String(v),q.push({type:"byname",name:v,data:p({name:v})})):S.isPlainObject(v)&&q.push({type:"object",data:p(S.extendFlat({},v))});for(y=0;y<q.length;y++)if(v=q[y],"byname"===v.type&&!e._frameHash[v.data.name]){S.warn('animate failure: frame not found: "'+v.data.name+'"');
k();return}-1!==["next","immediate"].indexOf(c.mode)&&n();"reverse"===c.direction&&q.reverse();var A=a._fullLayout._currentFrame;if(A&&c.fromcurrent){u=-1;for(y=0;y<q.length;y++)if(v=q[y],"byname"===v.type&&v.name===A){u=y;break}if(0<u&&u<q.length-1){A=[];for(y=0;y<q.length;y++)v=q[y],("byname"!==q[y].type||y>u)&&A.push(v);q=A}}0<q.length?m(q):(a.emit("plotly_animated"),h())})};l.addFrames=function(a,b,c){a=S.getGraphDiv(a);if(null===b||void 0===b)return Promise.resolve();if(!S.isPlotDiv(a))throw Error("This element is not a Plotly plot: "+
a+". It's likely that you've failed to create a plot before adding frames. For more details, see https://plot.ly/javascript/animations/");var d,e=a._transitionData._frames,f=a._transitionData._frameHash;if(!Array.isArray(b))throw Error("addFrames failure: frameList must be an Array of frame definitions"+b);var g=e.length+2*b.length;var h=[],k={};for(d=b.length-1;0<=d;d--)if(S.isPlainObject(b[d])){var n=b[d].name;var m=(f[n]||k[n]||{}).name,l=b[d].name,t=f[m]||k[m];m&&l&&"number"===typeof l&&t&&5>
sa&&(sa++,S.warn('addFrames: overwriting frame "'+(f[m]||k[m]).name+'" with a frame whose name of type "number" also equates to "'+m+'". This is valid but may potentially lead to unexpected behavior since all plotly.js frame names are stored internally as strings.'),5===sa&&S.warn("addFrames: This API call has yielded too many of these warnings. For the rest of this call, further warnings about numeric frame names will be suppressed."));k[n]={name:n};h.push({frame:ba.supplyFrameDefaults(b[d]),index:c&&
void 0!==c[d]&&null!==c[d]?c[d]:g+d})}h.sort(function(a,b){return a.index>b.index?-1:a.index<b.index?1:0});b=[];c=[];k=e.length;for(d=h.length-1;0<=d;d--){g=h[d].frame;"number"===typeof g.name&&S.warn("Warning: addFrames accepts frames with numeric names, but the numbers areimplicitly cast to strings");if(!g.name)for(;f[g.name="frame "+a._transitionData._counter++];);if(f[g.name]){for(n=0;n<e.length&&(e[n]||{}).name!==g.name;n++);b.push({type:"replace",index:n,value:g});c.unshift({type:"replace",
index:n,value:e[n]})}else n=Math.max(0,Math.min(h[d].index,k)),b.push({type:"insert",index:n,value:g}),c.unshift({type:"delete",index:n}),k++}e=d=ba.modifyFrames;f=[a,c];h=[a,b];qa&&qa.add(a,d,f,e,h);return ba.modifyFrames(a,b)};l.deleteFrames=function(a,b){a=S.getGraphDiv(a);if(!S.isPlotDiv(a))throw Error("This element is not a Plotly plot: "+a);var c,d=a._transitionData._frames,e=[],f=[];if(!b)for(b=[],c=0;c<d.length;c++)b.push(c);b=b.slice(0);b.sort();for(c=b.length-1;0<=c;c--){var g=b[c];e.push({type:"delete",
index:g});f.unshift({type:"insert",index:g,value:d[g]})}c=b=ba.modifyFrames;f=[a,f];g=[a,e];qa&&qa.add(a,b,f,c,g);return ba.modifyFrames(a,e)};l.purge=function(a){a=S.getGraphDiv(a);var b=a._fullLayout||{};ba.cleanPlot([],{},a._fullData||[],b);ba.purge(a);fa.purge(a);b._container&&b._container.remove();delete a._context;return a}},{"../components/color":577,"../components/colorbar/connect":579,"../components/drawing":598,"../constants/xmlns_namespaces":678,"../lib":700,"../lib/events":689,"../lib/queue":715,
"../lib/svg_text_utils":724,"../plots/cartesian/axes":748,"../plots/cartesian/constants":754,"../plots/cartesian/graph_interact":757,"../plots/cartesian/select":765,"../plots/plots":810,"../plots/polar/legacy":818,"../registry":829,"./edit_types":731,"./helpers":732,"./manage_arrays":734,"./plot_config":736,"./plot_schema":737,"./subroutines":739,d3:154,"fast-isnumeric":221,"has-hover":402}],736:[function(a,p,l){function m(a,h){for(var e in a){var f=a[e];f.valType?h[e]=f.dflt:(h[e]||(h[e]={}),m(f,
h[e]))}}a={staticPlot:{valType:"boolean",dflt:!1},plotlyServerURL:{valType:"string",dflt:"https://plot.ly"},editable:{valType:"boolean",dflt:!1},edits:{annotationPosition:{valType:"boolean",dflt:!1},annotationTail:{valType:"boolean",dflt:!1},annotationText:{valType:"boolean",dflt:!1},axisTitleText:{valType:"boolean",dflt:!1},colorbarPosition:{valType:"boolean",dflt:!1},colorbarTitleText:{valType:"boolean",dflt:!1},legendPosition:{valType:"boolean",dflt:!1},legendText:{valType:"boolean",dflt:!1},shapePosition:{valType:"boolean",
dflt:!1},titleText:{valType:"boolean",dflt:!1}},autosizable:{valType:"boolean",dflt:!1},responsive:{valType:"boolean",dflt:!1},fillFrame:{valType:"boolean",dflt:!1},frameMargins:{valType:"number",dflt:0,min:0,max:.5},scrollZoom:{valType:"flaglist",flags:["cartesian","gl3d","geo","mapbox"],extras:[!0,!1],dflt:"gl3d+geo+mapbox"},doubleClick:{valType:"enumerated",values:[!1,"reset","autosize","reset+autosize"],dflt:"reset+autosize"},showAxisDragHandles:{valType:"boolean",dflt:!0},showAxisRangeEntryBoxes:{valType:"boolean",
dflt:!0},showTips:{valType:"boolean",dflt:!0},showLink:{valType:"boolean",dflt:!1},linkText:{valType:"string",dflt:"Edit chart",noBlank:!0},sendData:{valType:"boolean",dflt:!0},showSources:{valType:"any",dflt:!1},displayModeBar:{valType:"enumerated",values:["hover",!0,!1],dflt:"hover"},showSendToCloud:{valType:"boolean",dflt:!1},modeBarButtonsToRemove:{valType:"any",dflt:[]},modeBarButtonsToAdd:{valType:"any",dflt:[]},modeBarButtons:{valType:"any",dflt:!1},toImageButtonOptions:{valType:"any",dflt:{}},
displaylogo:{valType:"boolean",dflt:!0},watermark:{valType:"boolean",dflt:!1},plotGlPixelRatio:{valType:"number",dflt:2,min:1,max:4},setBackground:{valType:"any",dflt:"transparent"},topojsonURL:{valType:"string",noBlank:!0,dflt:"https://cdn.plot.ly/"},mapboxAccessToken:{valType:"string",dflt:null},logging:{valType:"boolean",dflt:1},queueLength:{valType:"integer",min:0,dflt:0},globalTransforms:{valType:"any",dflt:[]},locale:{valType:"string",dflt:"en-US"},locales:{valType:"any",dflt:{}}};l={};m(a,
l);p.exports={configAttributes:a,dfltConfig:l}},{}],737:[function(a,p,l){function m(a,b){var c,d,e=a._basePlotModules;if(e){for(c=0;c<e.length;c++){var f=e[c];if(f.attrRegex&&f.attrRegex.test(b)){if(f.layoutAttrOverrides)return f.layoutAttrOverrides;if(!g&&f.layoutAttributes)var g=f.layoutAttributes}if((f=f.baseLayoutAttrOverrides)&&b in f)return f[b]}if(g)return g}if(e=a._modules)for(c=0;c<e.length;c++)if((a=e[c].layoutAttributes)&&b in a)return a[b];for(d in v.componentsRegistry)if(f=v.componentsRegistry[d],
!f.schema&&b===f.name)return f.layoutAttributes;return b in B?B[b]:"radialaxis"===b||"angularaxis"===b?x[b]:x.layout[b]||!1}function k(a,b,c){if(!a)return!1;if(a._isLinkedToArray)if(h(b[c]))c++;else if(c<b.length)return!1;for(;c<b.length;c++){var d=a[b[c]];if(M(d))a=d;else break;if(c===b.length-1)break;if(a._isLinkedToArray){if(c++,!h(b[c]))return!1}else if("info_array"===a.valType){c++;d=b[c];if(!h(d))return!1;var e=a.items;if(Array.isArray(e)){if(d>=e.length)return!1;if(2===a.dimensions){c++;if(b.length===
c)break;a=b[c];if(!h(a))return!1;a=e[d][a]}else a=e[d]}else a=e}}return a}function h(a){return a===Math.round(a)&&0<=a}function e(a){if("area"===a){var b={attributes:C};var c={}}else b=v.modules[a]._module,c=b.basePlotModule;var d={type:null},e=H({},y),f=H({},b.attributes);l.crawl(f,function(a,b,c,d,g){t.nestedProperty(e,g).set(void 0);void 0===a&&t.nestedProperty(f,g).set(void 0)});H(d,e);H(d,f);c.attributes&&H(d,c.attributes);d.type=a;a={meta:b.meta||{},attributes:q(d)};b.layoutAttributes&&(c={},
H(c,b.layoutAttributes),a.layoutAttributes=q(c));return a}function f(){var a={},b;H(a,B);for(b in v.subplotsRegistry){var d=v.subplotsRegistry[b];if(d.layoutAttributes)if(Array.isArray(d.attr))for(var e=0;e<d.attr.length;e++)c(a,d,d.attr[e]);else c(a,d,"subplot"===d.attr?d.name:d.attr)}E(a,{radialaxis:x.radialaxis,angularaxis:x.angularaxis});E(a,x.layout);for(b in v.componentsRegistry)if(d=v.componentsRegistry[b],(e=d.schema)&&(e.subplots||e.layout)){if((d=e.subplots)&&d.xaxis&&!d.yaxis)for(var f in d.xaxis)delete a.yaxis[f]}else d.layoutAttributes&&
(e=d.layoutAttributes,d=t.nestedProperty(a,d.name),d.set(H(d.get()||{},e)));return{layoutAttributes:q(a)}}function b(a){var b=H({},v.transformsRegistry[a].attributes);Object.keys(v.componentsRegistry).forEach(function(c){var d=v.componentsRegistry[c];d.schema&&d.schema.transforms&&d.schema.transforms[a]&&Object.keys(d.schema.transforms[a]).forEach(function(c){var e=d.schema.transforms[a][c];c=t.nestedProperty(b,c);c.set(H(c.get()||{},e))})});return{attributes:q(b)}}function n(){var a={frames:t.extendDeepAll({},
D)};q(a);return a.frames}function q(a){r(a);d(a);g(a);return a}function r(a){l.crawl(a,function(a,b,c){l.isValObject(a)?"data_array"===a.valType?(a.role="data",c[b+"src"]={valType:"string",editType:"none"}):!0===a.arrayOk&&(c[b+"src"]={valType:"string",editType:"none"}):M(a)&&(a.role="object")})}function d(a){l.crawl(a,function(a,b,c){if(a){var d=a._isLinkedToArray;d&&(delete a._isLinkedToArray,c[b]={items:{}},c[b].items[d]=a,c[b].role="object")}})}function g(a){function b(a){for(var c in a)if(M(a[c]))b(a[c]);
else if(Array.isArray(a[c]))for(var d=0;d<a[c].length;d++)b(a[c][d]);else a[c]instanceof RegExp&&(a[c]=a[c].toString())}b(a)}function c(a,b,c){a=t.nestedProperty(a,c);b=H({},b.layoutAttributes);b._isSubplotObj=!0;a.set(b)}var v=a("../registry"),t=a("../lib"),y=a("../plots/attributes"),B=a("../plots/layout_attributes"),D=a("../plots/frame_attributes"),w=a("../plots/animation_attributes"),A=a("./plot_config").configAttributes,C=a("../plots/polar/legacy/area_attributes"),x=a("../plots/polar/legacy/axis_attributes"),
J=a("./edit_types"),E=t.extendFlat,H=t.extendDeepAll,M=t.isPlainObject,O=["_isSubplotObj","_isLinkedToArray","_arrayAttrRegexps","_deprecated"];l.IS_SUBPLOT_OBJ="_isSubplotObj";l.IS_LINKED_TO_ARRAY="_isLinkedToArray";l.DEPRECATED="_deprecated";l.UNDERSCORE_ATTRS=O;l.get=function(){var a={};v.allTypes.concat("area").forEach(function(b){a[b]=e(b)});var c={};Object.keys(v.transformsRegistry).forEach(function(a){c[a]=b(a)});return{defs:{valObjects:t.valObjectMeta,metaKeys:O.concat(["description","role",
"editType","impliedEdits"]),editType:{traces:J.traces,layout:J.layout},impliedEdits:{}},traces:a,layout:f(),transforms:c,frames:n(),animation:q(w),config:q(A)}};l.crawl=function(a,b,c,d){var e=c||0;d=d||"";Object.keys(a).forEach(function(c){var f=a[c];if(-1===O.indexOf(c)){var g=(d?d+".":"")+c;b(f,c,a,e,g);l.isValObject(f)||M(f)&&"impliedEdits"!==c&&l.crawl(f,b,e+1,g)}})};l.isValObject=function(a){return a&&void 0!==a.valType};l.findArrayAttributes=function(a){function b(a,b,d,h){e=e.slice(0,h).concat([b]);
f=f.slice(0,h).concat([a&&a._isLinkedToArray]);!a||"data_array"!==a.valType&&!0!==a.arrayOk||"colorbar"===e[h-1]&&("ticktext"===b||"tickvals"===b)||c(g,0,"")}function c(a,b,g){a=a[e[b]];g+=e[b];if(b===e.length-1)t.isArrayOrTypedArray(a)&&d.push(h+g);else if(f[b]){if(Array.isArray(a))for(var k=0;k<a.length;k++)t.isPlainObject(a[k])&&c(a[k],b+1,g+"["+k+"].")}else t.isPlainObject(a)&&c(a,b+1,g+".")}var d=[],e=[],f=[];var g=a;var h="";l.crawl(y,b);a._module&&a._module.attributes&&l.crawl(a._module.attributes,
b);if(a=a.transforms)for(var k=0;k<a.length;k++){var n=a[k],m=n._module;m&&(h="transforms["+k+"].",g=n,l.crawl(m.attributes,b))}return d};l.getTraceValObject=function(a,b){var c=b[0],d=1;if("transforms"===c){if(1===b.length)return y.transforms;c=a.transforms;if(!Array.isArray(c)||!c.length)return!1;d=b[1];if(!h(d)||d>=c.length)return!1;a=(a=(v.transformsRegistry[c[d].type]||{}).attributes)&&a[b[2]];d=3}else if("area"===a.type)a=C[c];else{var e=a._module;e||(e=(v.modules[a.type||y.type.dflt]||{})._module);
if(!e)return!1;a=(a=e.attributes)&&a[c];a||(e=e.basePlotModule)&&e.attributes&&(a=e.attributes[c]);a||(a=y[c])}return k(a,b,d)};l.getLayoutValObject=function(a,b){a=m(a,b[0]);return k(a,b,1)}},{"../lib":700,"../plots/animation_attributes":743,"../plots/attributes":745,"../plots/frame_attributes":775,"../plots/layout_attributes":801,"../plots/polar/legacy/area_attributes":816,"../plots/polar/legacy/axis_attributes":817,"../registry":829,"./edit_types":731,"./plot_config":736}],738:[function(a,p,l){function m(a){"s"!==
a.charAt(a.length-1)&&k.warn("bad argument to arrayDefaultKey: "+a);return a.substr(0,a.length-1)+"defaults"}var k=a("../lib"),h=a("../plots/attributes"),e={name:{valType:"string",editType:"none"},templateitemname:{valType:"string",editType:"calc"}};l.templatedArray=function(a,b){b._isLinkedToArray=a;b.name=e.name;b.templateitemname=e.templateitemname;return b};l.traceTemplater=function(a){var b={},e;for(e in a){var f=a[e];Array.isArray(f)&&f.length&&(b[e]=0)}return{newTrace:function(n){e=k.coerce(n,
{},h,"type");n={type:e,_template:null};if(e in b){f=a[e];var d=b[e]%f.length;b[e]++;n._template=f[d]}return n}}};l.newContainer=function(a,b,e){var f=a._template;e=f&&(f[b]||e&&f[e]);k.isPlainObject(e)||(e=null);return a[b]={_template:e}};l.arrayTemplater=function(a,b,e){var f=(a=a._template)&&a[m(b)],h=a&&a[b];Array.isArray(h)&&h.length||(h=[]);var d={};return{newItem:function(a){var b={name:a.name,_input:a},g=b.templateitemname=a.templateitemname;if(!g||"string"!==typeof g)return b._template=f,
b;for(var k=0;k<h.length;k++){var n=h[k];if(n.name===g)return d[g]=1,b._template=n,b}b[e]=a[e]||!1;b._template=!1;return b},defaultItems:function(){for(var a=[],b=0;b<h.length;b++){var e=h[b],f=e.name;if(f&&"string"===typeof f&&!d[f]){var k={_template:e,name:f,_input:{_templateitemname:f}};k.templateitemname=e.templateitemname;a.push(k);d[f]=1}}return a}}};l.arrayDefaultKey=m;l.arrayEditor=function(a,b,e){function f(){l={};n&&(l[m]={},l[m].templateitemname=n)}function h(a,b){n?k.nestedProperty(l[m],
a).set(b):l[m+"."+a]=b}function d(){var a=l;f();return a}var g=(k.nestedProperty(a,b).get()||[]).length,c=e._index,n=c>=g&&(e._input||{})._templateitemname;n&&(c=g);var m=b+"["+c+"]",l;f();return{modifyBase:function(a,b){l[a]=b},modifyItem:h,getUpdateObj:d,applyUpdate:function(b,c){b&&h(b,c);b=d();for(var e in b)k.nestedProperty(a,e).set(b[e])}}}},{"../lib":700,"../plots/attributes":745}],739:[function(a,p,l){function m(a,b,c){for(var d=0;d<c.length;d++){var e=c[d][0],f=c[d][1];if(!(e[0]>=a[1]||e[1]<=
a[0])&&f[0]<b[1]&&f[1]>b[0])return!0}return!1}function k(a){function b(a,b,c){var d=a._lw/2;return"x"===a._id.charAt(0)?b?"top"===c?b._offset-u-d:b._offset+b._length+u+d:r.t+r.h*(1-(a.position||0))+d%1:b?"right"===c?b._offset+b._length+u+d:b._offset-u-d:r.l+r.w*(a.position||0)+d%1}function c(a){return"M"+la+","+a+"H"+Z}function d(a){return"M"+ea._offset+","+a+"h"+ea._length}function e(a){return"M"+a+","+da+"V"+K}function k(a){return"M"+a+","+ba._offset+"v"+ba._length}function n(a,b,c){if(!a.showline||
C!==a._mainSubplot)return"";if(!a._anchorAxis)return c(a._mainLinePosition);c=b(a._mainLinePosition);a.mirror&&(c+=b(a._mainMirrorPosition));return c}var p=a._fullLayout,r=p._size,u=r.p,y=D.list(a,"",!0),A,C;p._paperdiv.style({width:a._context.responsive&&p.autosize&&!a._context._hasZeroWidth&&!a.layout.width?"100%":p.width+"px",height:a._context.responsive&&p.autosize&&!a._context._hasZeroHeight&&!a.layout.height?"100%":p.height+"px"}).selectAll(".main-svg").call(t.setSize,p.width,p.height);a._context.setBackground(a,
p.paper_bgcolor);l.drawMainTitle(a);B.manage(a);if(!p._has("cartesian"))return a._promises.length&&Promise.all(a._promises);for(A=0;A<y.length;A++){var x=y[A];var G=x._anchorAxis;x._linepositions={};x._lw=t.crispRound(a,x.linewidth,1);x._mainLinePosition=b(x,G,x.side);x._mainMirrorPosition=x.mirror&&G?b(x,G,w.OPPOSITE_SIDE[x.side]):null}A=[];G=[];var J=[],P=1===v.opacity(p.paper_bgcolor)&&1===v.opacity(p.plot_bgcolor)&&p.paper_bgcolor===p.plot_bgcolor;for(C in p._plots)if(x=p._plots[C],x.mainplot)x.bg&&
x.bg.remove(),x.bg=void 0;else{var z=x.xaxis.domain,F=x.yaxis.domain,ha=x.plotgroup;m(z,F,J)?(z=ha.node(),x=x.bg=g.ensureSingle(ha,"rect","bg"),z.insertBefore(x.node(),z.childNodes[0]),G.push(C)):(ha.select("rect.bg").remove(),J.push([z,F]),P||(A.push(C),G.push(C)))}x=p._bgLayer.selectAll(".bg").data(A);x.enter().append("rect").classed("bg",!0);x.exit().remove();x.each(function(a){p._plots[a].bg=q.select(this)});for(A=0;A<G.length;A++){x=p._plots[G[A]];var ea=x.xaxis;var ba=x.yaxis;x.bg&&x.bg.call(t.setRect,
ea._offset-u,ba._offset-u,ea._length+2*u,ba._length+2*u).call(v.fill,p.plot_bgcolor).style("stroke-width",0)}if(!p._hasOnlyLargeSploms)for(C in p._plots)x=p._plots[C],ea=x.xaxis,ba=x.yaxis,G=x.clipId="clip"+p._uid+C+"plot",A=g.ensureSingleById(p._clips,"clipPath",G,function(a){a.classed("plotclip",!0).append("rect")}),x.clipRect=A.select("rect").attr({width:ea._length,height:ba._length}),t.setTranslate(x.plot,ea._offset,ba._offset),x._hasClipOnAxisFalse?A=null:(A=G,G=null),t.setClipUrl(x.plot,A,a),
x.layerClipId=G;for(C in p._plots){x=p._plots[C];ea=x.xaxis;ba=x.yaxis;P="M0,0";if(h(ea,C)){G=f(ea,"left",ba,y);var la=ea._offset-(G?u+G:0);G=f(ea,"right",ba,y);var Z=ea._offset+ea._length+(G?u+G:0);A=b(ea,ba,"bottom");J=b(ea,ba,"top");G=!ea._anchorAxis||C!==ea._mainSubplot;!G||"allticks"!==ea.mirror&&"all"!==ea.mirror||(ea._linepositions[C]=[A,J]);P=n(ea,c,d);G&&ea.showline&&("all"===ea.mirror||"allticks"===ea.mirror)&&(P+=c(A)+c(J));x.xlines.style("stroke-width",ea._lw+"px").call(v.stroke,ea.showline?
ea.linecolor:"rgba(0,0,0,0)")}x.xlines.attr("d",P);P="M0,0";if(h(ba,C)){G=f(ba,"bottom",ea,y);var K=ba._offset+ba._length+(G?u:0);G=f(ba,"top",ea,y);var da=ba._offset-(G?u:0);A=b(ba,ea,"left");J=b(ba,ea,"right");G=!ba._anchorAxis||C!==ba._mainSubplot;!G||"allticks"!==ba.mirror&&"all"!==ba.mirror||(ba._linepositions[C]=[A,J]);P=n(ba,e,k);G&&ba.showline&&("all"===ba.mirror||"allticks"===ba.mirror)&&(P+=e(A)+e(J));x.ylines.style("stroke-width",ba._lw+"px").call(v.stroke,ba.showline?ba.linecolor:"rgba(0,0,0,0)")}x.ylines.attr("d",
P)}D.makeClipPaths(a);return a._promises.length&&Promise.all(a._promises)}function h(a,b){return(a.ticks||a.showline)&&(b===a._mainSubplot||"all"===a.mirror||"allticks"===a.mirror)}function e(a,b,c){if(!c.showline||!c._lw)return!1;if("all"===c.mirror||"allticks"===c.mirror)return!0;var d=c._anchorAxis;if(!d)return!1;var e=w.FROM_BL[b];return c.side===b?d.domain[e]===a.domain[e]:c.mirror&&d.domain[1-e]===a.domain[1-e]}function f(a,b,c,d){if(e(a,b,c))return c._lw;for(var f=0;f<d.length;f++){var g=d[f];
if(g._mainAxis===c._mainAxis&&e(a,b,g))return g._lw}return 0}function b(a,b){var c=a.title,d=a._size,e=0;"start"===b?e=c.pad.l:"end"===b&&(e=-c.pad.r);switch(c.xref){case "paper":return d.l+d.w*c.x+e;default:return a.width*c.x+e}}function n(a,b){var c=a.title,d=a._size,e=0;"0em"!==b&&b?b===w.CAP_SHIFT+"em"&&(e=c.pad.t):e=-c.pad.b;if("auto"===c.y)return d.t/2;switch(c.yref){case "paper":return d.t+d.h-d.h*c.y+e;default:return a.height-a.height*c.y+e}}var q=a("d3"),r=a("../registry"),d=a("../plots/plots"),
g=a("../lib"),c=a("../lib/clear_gl_canvases"),v=a("../components/color"),t=a("../components/drawing"),y=a("../components/titles"),B=a("../components/modebar"),D=a("../plots/cartesian/axes"),w=a("../constants/alignment");p=a("../plots/cartesian/constraints");var A=p.enforce,C=p.clean,x=a("../plots/cartesian/autorange").doAutoRange;l.layoutStyles=function(a){return g.syncOrAsync([d.doAutoMargin,k],a)};l.drawMainTitle=function(a){var c=a._fullLayout;var d=c.title;var e="middle";g.isRightAnchor(d)?e=
"end":g.isLeftAnchor(d)&&(e="start");d=e;e=c.title;var f="0em";g.isTopAnchor(e)?f=w.CAP_SHIFT+"em":g.isMiddleAnchor(e)&&(f=w.MID_SHIFT+"em");e=f;y.draw(a,"gtitle",{propContainer:c,propName:"title.text",placeholder:c._dfltTitle.plot,attributes:{x:b(c,d),y:n(c,e),"text-anchor":d,dy:e}})};l.doTraceStyle=function(a){var b=a.calcdata,e=[],f;for(f=0;f<b.length;f++){var g=b[f],h=g[0]||{},k=h.trace||{},n=k._module||{},m=n.arraysToCalcdata;m&&m(g,k);(g=n.editStyle)&&e.push({fn:g,cd0:h})}if(e.length){for(f=
0;f<e.length;f++)b=e[f],b.fn(a,b.cd0);c(a);l.redrawReglTraces(a)}d.style(a);r.getComponentMethod("legend","draw")(a);return d.previousPromises(a)};l.doColorBars=function(a){for(var b=0;b<a.calcdata.length;b++){var c=a.calcdata[b][0];if((c.t||{}).cb){var e=c.trace;c=c.t.cb;r.traceIs(e,"contour")&&c.line({width:!1!==e.contours.showlines?e.line.width:0,dash:e.line.dash,color:"line"===e.contours.coloring?c._opts.line.color:e.line.color});var f=e._module.colorbar.container;c.options((f?e[f]:e).colorbar)()}}return d.previousPromises(a)};
l.layoutReplot=function(a){var b=a.layout;a.layout=void 0;return r.call("plot",a,"",b)};l.doLegend=function(a){r.getComponentMethod("legend","draw")(a);return d.previousPromises(a)};l.doTicksRelayout=function(a){D.draw(a,"redraw");a._fullLayout._hasOnlyLargeSploms&&(r.subplotsRegistry.splom.updateGrid(a),c(a),l.redrawReglTraces(a));l.drawMainTitle(a);return d.previousPromises(a)};l.doModeBar=function(a){var b=a._fullLayout;B.manage(a);for(var c=0;c<b._basePlotModules.length;c++){var e=b._basePlotModules[c].updateFx;
e&&e(a)}return d.previousPromises(a)};l.doCamera=function(a){a=a._fullLayout;for(var b=a._subplots.gl3d,c=0;c<b.length;c++){var d=a[b[c]];d._scene.setCamera(d.camera)}};l.drawData=function(a){var b=a._fullLayout,e=a.calcdata,f;for(f=0;f<e.length;f++){var g=e[f][0].trace;!0===g.visible&&g._module.colorbar||b._infolayer.select(".cb"+g.uid).remove()}c(a);e=b._basePlotModules;for(f=0;f<e.length;f++)e[f].plot(a);l.redrawReglTraces(a);d.style(a);r.getComponentMethod("shapes","draw")(a);r.getComponentMethod("annotations",
"draw")(a);b._replotting=!1;return d.previousPromises(a)};l.redrawReglTraces=function(a){var b=a._fullLayout;if(b._has("regl")){var c=a._fullData;a=[];var d=[],e;b._hasOnlyLargeSploms&&b._splomGrid.draw();for(e=0;e<c.length;e++){var f=c[e];!0===f.visible&&("splom"===f.type?b._splomScenes[f.uid].draw():"scattergl"===f.type?g.pushUnique(a,f.xaxis+f.yaxis):"scatterpolargl"===f.type&&g.pushUnique(d,f.subplot))}for(e=0;e<a.length;e++)c=b._plots[a[e]],c._scene&&c._scene.draw();for(e=0;e<d.length;e++)c=
b[d[e]]._subplot,c._scene&&c._scene.draw()}};l.doAutoRangeAndConstraints=function(a){var b=a._fullLayout,c=D.list(a,"",!0);b=b._axisMatchGroups||[];for(var d,e=0;e<c.length;e++)d=c[e],C(a,d),x(a,d);A(a);c=0;a:for(;c<b.length;c++){e=b[c];var f=null,g;for(g in e){d=D.getFromId(a,g);if(!1===d.autorange)continue a;f?f[0]<f[1]?(f[0]=Math.min(f[0],d.range[0]),f[1]=Math.max(f[1],d.range[1])):(f[0]=Math.max(f[0],d.range[0]),f[1]=Math.min(f[1],d.range[1])):f=d.range}for(g in e)d=D.getFromId(a,g),d.range=f.slice(),
d._input.range=f.slice(),d.setScale()}};l.finalDraw=function(a){r.getComponentMethod("shapes","draw")(a);r.getComponentMethod("images","draw")(a);r.getComponentMethod("annotations","draw")(a);r.getComponentMethod("rangeslider","draw")(a);r.getComponentMethod("rangeselector","draw")(a)};l.drawMarginPushers=function(a){r.getComponentMethod("legend","draw")(a);r.getComponentMethod("rangeselector","draw")(a);r.getComponentMethod("sliders","draw")(a);r.getComponentMethod("updatemenus","draw")(a)}},{"../components/color":577,
"../components/drawing":598,"../components/modebar":636,"../components/titles":665,"../constants/alignment":672,"../lib":700,"../lib/clear_gl_canvases":685,"../plots/cartesian/autorange":747,"../plots/cartesian/axes":748,"../plots/cartesian/constraints":755,"../plots/plots":810,"../registry":829,d3:154}],740:[function(a,p,l){function m(a,b){function c(b,c,d){if(r(c)&&r(b))m(b,c);else if(Array.isArray(c)&&Array.isArray(b)){b=v.arrayTemplater({_template:a},d);for(f=0;f<c.length;f++){d=c[f];var e=b.newItem(d)._template;
e&&m(e,d)}b=b.defaultItems();for(f=0;f<b.length;f++)c.push(b[f]._template);for(f=0;f<c.length;f++)delete c[f].templateitemname}}a=q.extendDeep({},a);var d=Object.keys(a).sort(),e,f;for(e=0;e<d.length;e++){var g=d[e],h=a[g];g in b?c(h,b[g],g):b[g]=h;if(k(g)===g)for(var n in b){var l=k(n);n===l||l!==g||n in a||c(h,b[n],g)}}}function k(a){return a.replace(/[0-9]+$/,"")}function h(a,c,d,e,f){var g=f&&d(f),n;for(n in a){var m=a[n],l=b(a,n,e),p=b(a,n,f),t=d(p);if(!t){var u=k(n);u!==n&&(p=b(a,u,f),t=d(p))}if(!(g&&
g===t||!t||t._noTemplating||"data_array"===t.valType||t.arrayOk&&Array.isArray(m)))if(!t.valType&&r(m))h(m,c,d,l,p);else if(t._isLinkedToArray&&Array.isArray(m)){var y=!1;t=0;u={};for(var A=0;A<m.length;A++){var B=m[A];if(r(B)){var D=B.name;D?u[D]||(h(B,c,d,b(m,t,l),b(m,t,p)),t++,u[D]=1):y||(y=v.arrayDefaultKey(n),y=b(a,y,e),D=b(m,t,l),h(B,c,d,D,b(m,t,p)),B=q.nestedProperty(c,D),q.nestedProperty(c,y).set(B.get()),B.set(null),y=!0)}}}else q.nestedProperty(c,l).set(m)}}function e(a,b){return d.getLayoutValObject(a,
q.nestedProperty({},b).parts)}function f(a,b){return d.getTraceValObject(a,q.nestedProperty({},b).parts)}function b(a,b,c){return c?Array.isArray(a)?c+"["+b+"]":c+"."+b:b}function n(a){switch(a.code){case "data":var b="The template has no key data.";break;case "layout":b="The template has no key layout.";break;case "missing":b=a.path?"There are no templates for item "+a.path+" with name "+a.templateitemname:"There are no templates for trace "+a.index+", of type "+a.traceType+".";break;case "unused":b=
a.path?"The template item at "+a.path+" was not used in constructing the plot.":a.dataCount?"Some of the templates of type "+a.traceType+" were not used. The template has "+a.templateCount+" traces, the data only has "+a.dataCount+" of this type.":"The template has "+a.templateCount+" traces of type "+a.traceType+" but there are none in the data.";break;case "reused":b="Some of the templates of type "+a.traceType+" were used more than once. The template has "+a.templateCount+" traces, the data has "+
a.dataCount+" of this type."}a.msg=b;return a}var q=a("../lib"),r=q.isPlainObject,d=a("./plot_schema"),g=a("../plots/plots"),c=a("../plots/attributes"),v=a("./plot_template"),t=a("./plot_config").dfltConfig;l.makeTemplate=function(a){a=q.isPlainObject(a)?a:q.getGraphDiv(a);a=q.extendDeep({_context:t},{data:a.data,layout:a.layout});g.supplyDefaults(a);var b=a.data||[],d=a.layout||{};d._basePlotModules=a._fullLayout._basePlotModules;d._modules=a._fullLayout._modules;var k={data:{},layout:{}};b.forEach(function(a){var b=
{};h(a,b,f.bind(null,a));a=q.coerce(a,{},c,"type");var d=k.data[a];d||(d=k.data[a]=[]);d.push(b)});h(d,k.layout,e.bind(null,d));delete k.layout.template;a=d.template;if(r(a)){b=a.layout;var n;r(b)&&m(b,k.layout);var l=a.data;if(r(l)){for(n in k.data)if(b=l[n],Array.isArray(b)){var p=k.data[n];var v=p.length;d=b.length;for(a=0;a<v;a++)m(b[a%d],p[a]);for(a=v;a<d;a++)p.push(q.extendDeep({},b[a]))}for(n in l)n in k.data||(k.data[n]=q.extendDeep([],l[n]))}}return k};l.validateTemplate=function(a,c){function d(a,
c){for(var e in a)if("_"!==e.charAt(0)&&r(a[e])){var f=k(e),g=[],h;for(h=0;h<c.length;h++)g.push(b(a,e,c[h])),f!==e&&g.push(b(a,f,c[h]));for(h=0;h<g.length;h++)v[g[h]]=1;d(a[e],g)}}function e(a,c){for(var d in a)if(-1===d.indexOf("defaults")&&r(a[d])){var f=b(a,d,c);v[f]?e(a[d],f):p.push({code:"unused",path:f})}}function f(a,c){for(var d in a)if("_"!==d.charAt(0)){var e=a[d],g=b(a,d,c);if(r(e))Array.isArray(a)&&!1===e._template&&e.templateitemname&&p.push({code:"missing",path:g,templateitemname:e.templateitemname}),
f(e,g);else{var h;if(h=Array.isArray(e))a:{h=e;for(var k=0;k<h.length;k++)if(r(h[k])){h=!0;break a}h=void 0}h&&f(e,g)}}}var h=q.extendDeep({},{_context:t,data:a.data,layout:a.layout}),m=h.layout||{};r(c)||(c=m.template||{});var l=c.layout;a=c.data;var p=[];h.layout=m;h.layout.template=c;g.supplyDefaults(h);c=h._fullLayout;h=h._fullData;var v={};r(l)?(d(c,["layout"]),e(l,"layout")):p.push({code:"layout"});if(r(a)){l={};for(m=0;m<h.length;m++){var u=h[m];var y=u.type;l[y]=(l[y]||0)+1;u._fullInput._template||
p.push({code:"missing",index:u._fullInput.index,traceType:y})}for(y in a)m=a[y].length,u=l[y]||0,m>u?p.push({code:"unused",traceType:y,templateCount:m,dataCount:u}):u>m&&p.push({code:"reused",traceType:y,templateCount:m,dataCount:u})}else p.push({code:"data"});f({data:h,layout:c},"");if(p.length)return p.map(n)}},{"../lib":700,"../plots/attributes":745,"../plots/plots":810,"./plot_config":736,"./plot_schema":737,"./plot_template":738}],741:[function(a,p,l){var m=a("./plot_api"),k=a("../lib"),h=a("../snapshot/helpers"),
e=a("../snapshot/tosvg"),f=a("../snapshot/svgtoimg"),b={format:{valType:"enumerated",values:["png","jpeg","webp","svg"],dflt:"png"},width:{valType:"number",min:1},height:{valType:"number",min:1},scale:{valType:"number",min:0,dflt:1},setBackground:{valType:"any",dflt:!1},imageDataOnly:{valType:"boolean",dflt:!1}},n=/^data:image\/\w+;base64,/;p.exports=function(a,l){function d(a){return!(a in l)||k.validate(l[a],b[a])}function g(a,c){return k.coerce(l,q,b,a,c)}function c(){return new Promise(function(a){setTimeout(a,
h.getDelay(E._fullLayout))})}function p(){return new Promise(function(a,b){var c=e(E,u,C),d=E._fullLayout.width,g=E._fullLayout.height;m.purge(E);document.body.removeChild(E);if("svg"===u)return J?a(c):a("data:image/svg+xml,"+encodeURIComponent(c));var h=document.createElement("canvas");h.id=k.randstr();f({format:u,width:d,height:g,scale:C,canvas:h,svg:c,promise:!0}).then(a).catch(b)})}l=l||{};if(k.isPlainObject(a)){var t=a.data||[];var r=a.layout||{};a=a.config||{}}else a=k.getGraphDiv(a),t=k.extendDeep([],
a.data),r=k.extendDeep({},a.layout),a=a._context;if(!d("width")||!d("height"))throw Error("Height and width should be pixel values.");if(!d("format"))throw Error("Image format is not jpeg, png, svg or webp.");var q={},u=g("format"),w=g("width"),A=g("height"),C=g("scale"),x=g("setBackground"),J=g("imageDataOnly"),E=document.createElement("div");E.style.position="absolute";E.style.left="-5000px";document.body.appendChild(E);var H=k.extendFlat({},r);w&&(H.width=w);A&&(H.height=A);var M=k.extendFlat({},
a,{_exportedPlot:!0,staticPlot:!0,setBackground:x}),O=h.getRedrawFunc(E);return new Promise(function(a,b){m.plot(E,t,H,M).then(O).then(c).then(p).then(function(b){b=J?b.replace(n,""):b;a(b)}).catch(function(a){b(a)})})}},{"../lib":700,"../snapshot/helpers":833,"../snapshot/svgtoimg":835,"../snapshot/tosvg":837,"./plot_api":735}],742:[function(a,p,l){function m(a,b,c,k,n,l){l=l||[];for(var p=Object.keys(a),t=0;t<p.length;t++){var v=p[t];if("transforms"!==v){var q=l.slice();q.push(v);var u=a[v],y=b[v];
var A=c;if(v in A)var B=A[v];else B=e(v),B=A[B.keyMinusId];var D="info_array"===(B||{}).valType,w="colorscale"===(B||{}).valType;A=(B||{}).items;var x=c;var G=v,z=e(G),U=z.keyMinusId;z=z.id;x=U in x&&x[U]._isSubplotObj&&z?!0:G in x;if(x)if(r(u)&&r(y))m(u,y,B,k,n,q);else if(D&&d(u))if(u.length>y.length&&k.push(h("unused",n,q.concat(y.length))),v=y.length,(D=Array.isArray(A))&&(v=Math.min(v,A.length)),2===B.dimensions)for(w=0;w<v;w++)if(d(u[w]))for(u[w].length>y[w].length&&k.push(h("unused",n,q.concat(w,
y[w].length))),z=y[w].length,B=0;B<(D?Math.min(z,A[w].length):z);B++)x=D?A[w][B]:A,G=u[w][B],U=y[w][B],f.validate(G,x)?U!==G&&U!==+G&&k.push(h("dynamic",n,q.concat(w,B),G,U)):k.push(h("value",n,q.concat(w,B),G));else k.push(h("array",n,q.concat(w),u[w]));else for(w=0;w<v;w++)x=D?A[w]:A,G=u[w],U=y[w],f.validate(G,x)?U!==G&&U!==+G&&k.push(h("dynamic",n,q.concat(w),G,U)):k.push(h("value",n,q.concat(w),G));else if(B.items&&!D&&d(u)){A=A[Object.keys(A)[0]];v=[];for(B=0;B<y.length;B++)w=y[B]._index||B,
D=q.slice(),D.push(w),r(u[w])&&r(y[B])&&(v.push(w),w=u[w],x=y[B],r(w)&&!1!==w.visible&&!1===x.visible?k.push(h("invisible",n,D)):m(w,x,A,k,n,D));for(B=0;B<u.length;B++)D=q.slice(),D.push(B),r(u[B])?-1===v.indexOf(B)&&k.push(h("unused",n,D)):k.push(h("object",n,D,u[B]))}else!r(u)&&r(y)?k.push(h("object",n,q,u)):g(u)||!g(y)||D||w?v in b?f.validate(u,B)?"enumerated"===B.valType&&(B.coerceNumber&&u!==+y||u!==y)&&k.push(h("dynamic",n,q,u,y)):k.push(h("value",n,q,u)):k.push(h("unused",n,q,u)):k.push(h("array",
n,q,u));else k.push(h("schema",n,q))}}return k}function k(a){return d(a)?"In data trace "+a[1]+", ":"In "+a+", "}function h(a,b,e,g,h){e=e||"";if(d(b)){var k=b[0];var n=b[1]}else k=b,n=null;var m=e;if(d(m)){for(var l="",p=0;p<m.length;p++){var t=m[p];l="number"===typeof t?l.substr(0,l.length-1)+"["+t+"]":l+t;p<m.length-1&&(l+=".")}m=l}else m=String(m);b=c[a](b,m,g,h);f.log(b);return{code:a,container:k,trace:n,path:e,astr:m,msg:b}}function e(a){a=a.match(v);return{keyMinusId:a&&a[1],id:a&&a[2]}}var f=
a("../lib"),b=a("../plots/plots"),n=a("./plot_schema"),q=a("./plot_config").dfltConfig,r=f.isPlainObject,d=Array.isArray,g=f.isArrayOrTypedArray;p.exports=function(a,c){var e=n.get(),g=[],k={_context:f.extendFlat({},q)};if(d(a)){k.data=f.extendDeep([],a);var l=a}else k.data=[],l=[],g.push(h("array","data"));if(r(c)){k.layout=f.extendDeep({},c);var p=c}else k.layout={},p={},1<arguments.length&&g.push(h("object","layout"));b.supplyDefaults(k);for(var t=k._fullData,v=l.length,u=0;u<v;u++){var y=l[u],
w=["data",u];if(r(y)){var x=t[u],I=x.type,Q=e.traces[I].attributes;Q.type={valType:"enumerated",values:[I]};!1===x.visible&&!1!==y.visible&&g.push(h("invisible",w));m(y,x,Q,g,w);y=y.transforms;x=x.transforms;if(y)for(d(y)||g.push(h("array",w,["transforms"])),w.push("transforms"),I=0;I<y.length;I++){Q=["transforms",I];var N=y[I].type;r(y[I])?(N=e.transforms[N]?e.transforms[N].attributes:{},N.type={valType:"enumerated",values:Object.keys(e.transforms)},m(y[I],x[I],N,g,w,Q)):g.push(h("object",w,Q))}}else g.push(h("object",
w))}k=k._fullLayout;l=e.layout.layoutAttributes;for(v=0;v<t.length;v++)u=t[v],w=e.traces[u.type],(y=w.layoutAttributes)&&(u.subplot?f.extendFlat(l[w.attributes.subplot.dflt],y):f.extendFlat(l,y));m(p,k,l,g,"layout");return 0===g.length?void 0:g};var c={object:function(a,b){return("layout"===a&&""===b?"The layout argument":"data"===a[0]&&""===b?"Trace "+a[1]+" in the data argument":k(a)+"key "+b)+" must be linked to an object container"},array:function(a,b){return("data"===a?"The data argument":k(a)+
"key "+b)+" must be linked to an array container"},schema:function(a,b){return k(a)+"key "+b+" is not part of the schema"},unused:function(a,b,c){c=r(c)?"container":"key";return k(a)+c+" "+b+" did not get coerced"},dynamic:function(a,b,c,d){return[k(a)+"key",b,"(set to '"+c+"')","got reset to","'"+d+"'","during defaults."].join(" ")},invisible:function(a,b){return(b?k(a)+"item "+b:"Trace "+a[1])+" got defaulted to be not visible"},value:function(a,b,c){return[k(a)+"key "+b,"is set to an invalid value ("+
c+")"].join(" ")}},v=f.counterRegex("([a-z]+)")},{"../lib":700,"../plots/plots":810,"./plot_config":736,"./plot_schema":737}],743:[function(a,p,l){p.exports={mode:{valType:"enumerated",dflt:"afterall",values:["immediate","next","afterall"]},direction:{valType:"enumerated",values:["forward","reverse"],dflt:"forward"},fromcurrent:{valType:"boolean",dflt:!1},frame:{duration:{valType:"number",min:0,dflt:500},redraw:{valType:"boolean",dflt:!0}},transition:{duration:{valType:"number",min:0,dflt:500,editType:"none"},
easing:{valType:"enumerated",dflt:"cubic-in-out",values:"linear quad cubic sin exp circle elastic back bounce linear-in quad-in cubic-in sin-in exp-in circle-in elastic-in back-in bounce-in linear-out quad-out cubic-out sin-out exp-out circle-out elastic-out back-out bounce-out linear-in-out quad-in-out cubic-in-out sin-in-out exp-in-out circle-in-out elastic-in-out back-in-out bounce-in-out".split(" "),editType:"none"},ordering:{valType:"enumerated",values:["layout first","traces first"],dflt:"layout first",
editType:"none"}}}},{}],744:[function(a,p,l){var m=a("../lib"),k=a("../plot_api/plot_template");p.exports=function(a,e,f){var b=f.name,h=f.inclusionAttr||"visible",l=e[b],p=m.isArrayOrTypedArray(a[b])?a[b]:[];a=e[b]=[];var d=k.arrayTemplater(e,b,h);for(b=0;b<p.length;b++){var g=p[b];if(m.isPlainObject(g))var c=d.newItem(g);else c=d.newItem({}),c[h]=!1;c._index=b;!1!==c[h]&&f.handleItemDefaults(g,c,e,f);a.push(c)}h=d.defaultItems();for(b=0;b<h.length;b++)c=h[b],c._index=a.length,f.handleItemDefaults({},
c,e,f,{}),a.push(c);if(m.isArrayOrTypedArray(l))for(e=Math.min(l.length,a.length),b=0;b<e;b++)m.relinkPrivateKeys(a[b],l[b]);return a}},{"../lib":700,"../plot_api/plot_template":738}],745:[function(a,p,l){a=a("../components/fx/attributes");p.exports={type:{valType:"enumerated",values:[],dflt:"scatter",editType:"calc+clearAxisTypes",_noTemplating:!0},visible:{valType:"enumerated",values:[!0,!1,"legendonly"],dflt:!0,editType:"calc"},showlegend:{valType:"boolean",dflt:!0,editType:"style"},legendgroup:{valType:"string",
dflt:"",editType:"style"},opacity:{valType:"number",min:0,max:1,dflt:1,editType:"style"},name:{valType:"string",editType:"style"},uid:{valType:"string",editType:"plot",anim:!0},ids:{valType:"data_array",editType:"calc",anim:!0},customdata:{valType:"data_array",editType:"calc"},selectedpoints:{valType:"any",editType:"calc"},hoverinfo:{valType:"flaglist",flags:["x","y","z","text","name"],extras:["all","none","skip"],arrayOk:!0,dflt:"all",editType:"none"},hoverlabel:a.hoverlabel,stream:{token:{valType:"string",
noBlank:!0,strict:!0,editType:"calc"},maxpoints:{valType:"number",min:0,max:1E4,dflt:500,editType:"calc"},editType:"calc"},transforms:{_isLinkedToArray:"transform",editType:"calc"},uirevision:{valType:"any",editType:"none"}}},{"../components/fx/attributes":607}],746:[function(a,p,l){p.exports={xaxis:{valType:"subplotid",dflt:"x",editType:"calc+clearAxisTypes"},yaxis:{valType:"subplotid",dflt:"y",editType:"calc+clearAxisTypes"}}},{}],747:[function(a,p,l){function m(a,b){function c(a,b){return Math.max(a,
g(b))}var d,e,f=[],g=k(b);f=h(a,b);var n=f.min,m=f.max;if(0===n.length||0===m.length)return r.simpleMap(b.range,b.r2l);f=n[0].val;var l=m[0].val;for(d=1;d<n.length&&f===l;d++)f=Math.min(f,n[d].val);for(d=1;d<m.length&&f===l;d++)l=Math.max(l,m[d].val);a=!1;b.range&&(a=r.simpleMap(b.range,b.r2l),a=a[1]<a[0]);"reversed"===b.autorange&&(a=!0,b.autorange=!0);var p=b.rangemode,v="tozero"===p,q="nonnegative"===p;p=b._length;var u=p/10,w=0;for(d=0;d<n.length;d++){var x=n[d];for(e=0;e<m.length;e++){var Q=
m[e];var N=Q.val-x.val;if(0<N){var L=p-g(x)-g(Q);if(L>u){if(N/L>w){var R=x;var z=Q;w=N/L}}else N/p>w&&(R={val:x.val,pad:0},z={val:Q.val,pad:0},w=N/p)}}}f===l?(R=f-1,z=f+1,v?0===f?f=[0,1]:(n=(0<f?m:n).reduce(c,0),n=f/(1-Math.min(.5,n/p)),f=0<f?[0,n]:[n,0]):f=q?[Math.max(0,R),Math.max(1,z)]:[R,z]):(v?(0<=R.val&&(R={val:0,pad:0}),0>=z.val&&(z={val:0,pad:0})):q&&(0>R.val-w*g(R)&&(R={val:0,pad:0}),0>=z.val&&(z={val:1,pad:0})),w=(z.val-R.val)/(p-g(R)-g(z)),f=[R.val-w*g(R),z.val+w*g(z)]);a&&f.reverse();
return r.simpleMap(f,b.l2r||Number)}function k(a){var b=a._length/20;"domain"===a.constrain&&a._inputDomain&&(b*=(a._inputDomain[1]-a._inputDomain[0])/(a.domain[1]-a.domain[0]));return function(a){return a.pad+(a.extrapad?b:0)}}function h(a,d){function c(a,c){for(m=0;m<c.length;m++){var d=a[c[m]],g=(d._extremes||{})[f];if(!0===d.visible&&g){for(l=0;l<g.min.length;l++)p=g.min[l],e(h,p.val,p.pad,{extrapad:p.extrapad},b);for(l=0;l<g.max.length;l++)p=g.max[l],e(k,p.val,p.pad,{extrapad:p.extrapad},n)}}}
var f=d._id,g=a._fullLayout,h=[],k=[],m,l,p;c(a._fullData,d._traceIndices);c(g.annotations||[],d._annIndices||[]);c(g.shapes||[],d._shapeIndices||[]);return{min:h,max:k}}function e(a,b,d,e,f){var c=e.tozero;e=e.extrapad;for(var g=!0,h=0;h<a.length&&g;h++){var k=a[h];if(f(k.val,b)&&k.pad>=d&&(k.extrapad||!e)){g=!1;break}else f(b,k.val)&&k.pad<=d&&(e||!k.extrapad)&&(a.splice(h,1),h--)}g&&(f=c&&0===b,a.push({val:b,pad:f?0:d,extrapad:f?!1:e}))}function f(a){return q(a)&&Math.abs(a)<d}function b(a,b){return a<=
b}function n(a,b){return a>=b}var q=a("fast-isnumeric"),r=a("../../lib"),d=a("../../constants/numerical").FP_SAFE,g=a("../../registry");p.exports={getAutoRange:m,makePadFn:k,doAutoRange:function(a,b){b.setScale();if(b.autorange){b.range=m(a,b);b._r=b.range.slice();b._rl=r.simpleMap(b._r,b.r2l);var c=b._input,d={};d[b._attr+".range"]=b.range;d[b._attr+".autorange"]=b.autorange;g.call("_storeDirectGUIEdit",a.layout,a._fullLayout._preGUI,d);c.range=b.range.slice();c.autorange=b.autorange}(c=b._anchorAxis)&&
c.rangeslider&&((d=c.rangeslider[b._name])&&"auto"===d.rangemode&&(d.range=m(a,b)),c._input.rangeslider[b._name]=r.extendFlat({},d))},findExtremes:function(a,g,h){function c(a){if(Array.isArray(a))return u=!0,function(b){return Math.max(Number(a[b]||0),0)};var b=Math.max(Number(a||0),0);return function(){return b}}function k(c){x=g[c];q(x)&&(Q=L(c),N=R(c),T=x-U(c),Y=x+z(c),v&&T<Y/10&&(T=Y/10),O=a.c2l(T),I=a.c2l(Y),t&&(O=Math.min(0,O),I=Math.max(0,I)),f(O)&&e(m,O,N,S,b),f(I)&&e(l,I,Q,S,n))}h||(h={});
a._m||a.setScale();var m=[],l=[],p=g.length,r=h.padded||!1,t=h.tozero&&("linear"===a.type||"-"===a.type),v="log"===a.type,u=!1,w,x,O,I,Q,N,L=c((0<a._m?h.ppadplus:h.ppadminus)||h.ppad||0),R=c((0<a._m?h.ppadminus:h.ppadplus)||h.ppad||0),z=c(h.vpadplus||h.vpad),U=c(h.vpadminus||h.vpad);if(!u){var T=Infinity;var Y=-Infinity;if(v)for(w=0;w<p;w++){var F=g[w];F<T&&0<F&&(T=F);F>Y&&F<d&&(Y=F)}else for(w=0;w<p;w++)F=g[w],F<T&&F>-d&&(T=F),F>Y&&F<d&&(Y=F);g=[T,Y];p=2}var S={tozero:t,extrapad:r};r=Math.min(6,
p);for(w=0;w<r;w++)k(w);for(w=p-1;w>=r;w--)k(w);return{min:m,max:l,opts:h}},concatExtremes:h}},{"../../constants/numerical":677,"../../lib":700,"../../registry":829,"fast-isnumeric":221}],748:[function(a,p,l){function m(a){return+a}function k(a){return String(a)}function h(a,b,c,d,e){function f(b){return 2>(1+100*(b-a)/c.dtick)%100}for(var g=0,h=0,k=0,n=0,m=0;m<b.length;m++)0===b[m]%1?k++:I(b[m])||n++,f(b[m])&&g++,f(b[m]+c.dtick/2)&&h++;b=b.length-n;k===b&&"date"!==c.type?1>c.dtick?a=d-.5*c.dtick:
(a-=.5,a+c.dtick<d&&(a+=c.dtick)):h<.1*b&&(g>.3*b||f(d)||f(e))&&(e=c.dtick/2,a+=a+e<d?e:-e);return a}function e(a,b,c){return b*L.roundUp(a/b,c)}function f(a){var b=a.dtick;a._tickexponent=0;I(b)||"string"===typeof b||(b=1);if("category"===a.type||"multicategory"===a.type)a._tickround=null;if("date"===a.type){var c=a.r2l(a.tick0),d=a.l2r(c).replace(/(^-|i)/g,""),e=d.length;"M"===String(b).charAt(0)?10<e||"01-01"!==d.substr(5)?a._tickround="d":a._tickround=0===+b.substr(1)%12?"y":"m":b>=fa&&10>=e||
b>=15*fa?a._tickround="d":b>=ha&&16>=e||b>=qa?a._tickround="M":b>=ea&&19>=e||b>=ha?a._tickround="S":(b=a.l2r(c+b).replace(/^-/,"").length,a._tickround=Math.max(e,b)-20,0>a._tickround&&(a._tickround=4))}else I(b)||"L"===b.charAt(0)?(e=a.range.map(a.r2d||Number),I(b)||(b=Number(b.substr(1))),a._tickround=2-Math.floor(Math.log(b)/Math.LN10+.01),b=Math.floor(Math.log(Math.max(Math.abs(e[0]),Math.abs(e[1])))/Math.LN10+.01),3<Math.abs(b)&&(!t(a.exponentformat)||14<b||-15>b?a._tickexponent=b:a._tickexponent=
3*Math.round((b-1)/3))):a._tickround=null}function b(a,b,c){a=a.tickfont||{};return{x:b,dx:0,dy:0,text:c||"",fontSize:a.size,font:a.family,fontColor:a.color}}function n(a,b,c,d){var e=a._tickround,f=c&&a.hoverformat||da.getTickFormat(a);d&&(e=I(e)?4:{y:"m",m:"d",d:"M",M:"S",S:4}[e]);f=L.formatDate(b.x,f,e,a._dateFormat,a.calendar,a._extraFormat);var g=f.indexOf("\n");if(-1!==g){var h=f.substr(g+1);f=f.substr(0,g)}d&&("00:00:00"===f||"00:00"===f?(f=h,h=""):8===f.length&&(f=f.replace(/:00$/,"")));h&&
(c?f="d"===e?f+(", "+h):h+(f?", "+f:""):a._inCalcTicks&&h===a._prevDateHead||(f+="\x3cbr\x3e"+h,a._prevDateHead=h));b.text=f}function q(a,b,c,d,e){var f=a.dtick;c=b.x;var g=a.tickformat,h="string"===typeof f&&f.charAt(0);"never"===e&&(e="");d&&"L"!==h&&(f="L3",h="L");if(g||"L"===h)b.text=y(Math.pow(10,c),a,e,d);else if(I(f)||"D"===h&&.1>L.mod(c+.01,1))d=Math.round(c),e=Math.abs(d),g=a.exponentformat,"power"===g||t(g)&&(14<d||-15>d)?(b.text=0===d?1:1===d?"10":"10\x3csup\x3e"+(1<d?"":ba)+e+"\x3c/sup\x3e",
b.fontSize*=1.25):("e"===g||"E"===g)&&2<e?b.text="1"+g+(0<d?"+":ba)+e:(b.text=y(Math.pow(10,c),a,"","fakehover"),"D1"===f&&"y"===a._id.charAt(0)&&(b.dy-=b.fontSize/6));else if("D"===h)b.text=String(Math.round(Math.pow(10,L.mod(c,1)))),b.fontSize*=.75;else throw"unrecognized dtick "+String(f);"D1"===a.dtick&&(f=String(b.text).charAt(0),"0"===f||"1"===f)&&("y"===a._id.charAt(0)?b.dx-=b.fontSize/4:(b.dy+=b.fontSize/2,b.dx+=(a.range[1]>a.range[0]?1:-1)*b.fontSize*(0>c?.5:.25)))}function r(a,b){a=a._categories[Math.round(b.x)];
void 0===a&&(a="");b.text=String(a)}function d(a,b,c){var d=a._categories[Math.round(b.x)]||[];a=void 0===d[1]?"":String(d[1]);d=void 0===d[0]?"":String(d[0]);c?b.text=d+" - "+a:(b.text=a,b.text2=d)}function g(a,b,c,d,e){"never"===e?e="":"all"===a.showexponent&&1E-6>Math.abs(b.x/a.dtick)&&(e="hide");b.text=y(b.x,a,e,d)}function c(a,b,c,d,e){"radians"!==a.thetaunit||c?b.text=y(b.x,a,e,d):(c=b.x/180,0===c?b.text="0":(c=v(c),100<=c[1]?b.text=y(L.deg2rad(b.x),a,e,d):(a=0>b.x,b.text=1===c[1]?1===c[0]?
"π":c[0]+"π":["\x3csup\x3e",c[0],"\x3c/sup\x3e⁄\x3csub\x3e",c[1],"\x3c/sub\x3eπ"].join(""),a&&(b.text=ba+b.text))))}function v(a){function b(a,c){return 1E-6>=Math.abs(c-0)?a:b(c,a%c)}var c=function(a){for(var b=1;!(1E-6>=Math.abs(Math.round(a*b)/b-a));)b*=10;return b}(a);a*=c;var d=Math.abs(b(a,c));return[Math.round(a/d),Math.round(c/d)]}function t(a){return"SI"===a||"B"===a}function y(a,b,c,d){var e=0>a,g=b._tickround;c=c||b.exponentformat||"B";var h=b._tickexponent,k=da.getTickFormat(b),n=b.separatethousands;
d&&(h={exponentformat:c,dtick:"none"===b.showexponent?b.dtick:I(a)?Math.abs(a)||1:1,range:"none"===b.showexponent?b.range.map(b.r2d):[0,a||1]},f(h),g=(Number(h._tickround)||0)+4,h=h._tickexponent,b.hoverformat&&(k=b.hoverformat));if(k)return b._numFormat(k)(a).replace(/-/g,ba);d=Math.pow(10,-g)/2;"none"===c&&(h=0);a=Math.abs(a);if(a<d)a="0",e=!1;else{a+=d;h&&(a*=Math.pow(10,-h),g+=h);if(0===g)a=String(Math.floor(a));else if(0>g)for(a=String(Math.round(a)),a=a.substr(0,a.length+g);0>g;g++)a+="0";else a=
String(a),(d=a.indexOf(".")+1)&&(a=a.substr(0,d+g).replace(/\.?0+$/,""));a=L.numSeparate(a,b._separators,n)}h&&"hide"!==c&&(t(c)&&(14<h||-15>h)&&(c="power"),b=0>h?ba+-h:"power"!==c?"+"+h:String(h),"e"===c||"E"===c?a+=c+b:"power"===c?a+="×10\x3csup\x3e"+b+"\x3c/sup\x3e":"B"===c&&9===h?a+="B":t(c)&&(a+=va[h/3+5]));return e?ba+a:a}function B(a,b){var c=[],d=function(a,b){b=a.xbnd[b];null!==b&&c.push(L.extendFlat({},a,{x:b}))};if(b.length){for(a=0;a<b.length;a++)d(b[a],0);d(b[a-1],1)}return c}function w(a,
c){for(var d=[],e={},f=0;f<c.length;f++){var g=c[f];e[g.text2]?e[g.text2].push(g.x):e[g.text2]=[g.x]}for(var h in e)d.push(b(a,L.interp(e[h],.5),h));return d}function x(a,b){var c=[],d=function(a,b){b=a.xbnd[b];null!==b&&c.push(L.extendFlat({},a,{x:b}))};if(a.showdividers&&b.length){for(a=0;a<b.length;a++){var e=b[a];e.text2!==f&&d(e,0);var f=e.text2}d(b[a-1],1)}return c}function A(a,b){var c=a._id.charAt(0),d=L.deg2rad(a._tickAngles[b]||0),e=Math.sin(d),f=Math.cos(d),g=0,h=0;a._selections[b].each(function(){var a=
H(this),b=T.bBox(a.node());a=b.width;b=b.height;g=Math.max(g,f*a,e*b);h=Math.max(h,e*a,f*b)});return{x:h,y:g}[c]}function C(a){return[a.text,a.x,a.axInfo,a.font,a.fontSize,a.fontColor].join("_")}function P(a,b){var c=a._fullLayout._size,d=b._id.charAt(0),e=b.side,f;"free"!==b.anchor?f=ja.getFromId(a,b.anchor):"x"===d?f={_offset:c.t+(1-(b.position||0))*c.h,_length:0}:"y"===d&&(f={_offset:c.l+(b.position||0)*c.w,_length:0});if("top"===e||"left"===e)return f._offset;if("bottom"===e||"right"===e)return f._offset+
f._length}function J(a,b){b=a.l2p(b);return 1<b&&b<a._length-1}function E(a,b,c,d){function e(a){function c(a){return"number"===typeof a&&Math.abs(a-n)<d}if(!a.showline||!a.linewidth)return!1;var d=Math.max((a.linewidth+b.zerolinewidth)/2,1);if(c(a._mainLinePosition)||c(a._mainMirrorPosition))return!0;a=a._linepositions||{};for(var e in a)if(c(a[e][0])||c(a[e][1]))return!0}var f=c._mainAxis;if(f){var g=a._fullLayout,h=b._id.charAt(0),k=da.counterLetter(b._id),n=b._offset+(Math.abs(d[0])<Math.abs(d[1])===
("x"===h)?0:b._length);d=g._plots[c._mainSubplot];if(!(d.mainplotinfo||d).overlays.length)return e(c,n);a=da.list(a,k);for(c=0;c<a.length;c++)if(k=a[c],k._mainAxis===f&&e(k,n))return!0}}function H(a){a=O.select(a);var b=a.select(".text-math-group");return b.empty()?a.select("text"):b}function M(a,b){for(var c=0;c<b.length;c++)-1===a.indexOf(b[c])&&a.push(b[c])}var O=a("d3"),I=a("fast-isnumeric"),Q=a("../../plots/plots"),N=a("../../registry"),L=a("../../lib"),R=a("../../lib/svg_text_utils"),z=a("../../components/titles"),
U=a("../../components/color"),T=a("../../components/drawing"),Y=a("./layout_attributes"),F=a("./clean_ticks");l=a("../../constants/numerical");var S=l.ONEAVGYEAR,W=l.ONEAVGMONTH,fa=l.ONEDAY,qa=l.ONEHOUR,ha=l.ONEMIN,ea=l.ONESEC,ba=l.MINUS_SIGN,la=l.BADNUM,Z=a("../../constants/alignment").MID_SHIFT,K=a("../../constants/alignment").LINE_SPACING,da=p.exports={};da.setConvert=a("./set_convert");var ya=a("./axis_autotype"),ja=a("./axis_ids");da.id2name=ja.id2name;da.name2id=ja.name2id;da.cleanId=ja.cleanId;
da.list=ja.list;da.listIds=ja.listIds;da.getFromId=ja.getFromId;da.getFromTrace=ja.getFromTrace;a=a("./autorange");da.getAutoRange=a.getAutoRange;da.findExtremes=a.findExtremes;da.coerceRef=function(a,b,c,d,e,f){var g=d.charAt(d.length-1);c=c._fullLayout._subplots[g+"axis"];d+="ref";g={};e||(e=c[0]||f);f||(f=e);g[d]={valType:"enumerated",values:c.concat(f?[f]:[]),dflt:e};return L.coerce(a,b,g,d)};da.coercePosition=function(a,b,c,d,e,f){"paper"===d||"pixel"===d?(b=L.ensureNumber,c=c(e,f)):(b=da.getFromId(b,
d),f=b.fraction2r(f),c=c(e,f),b=b.cleanPos);a[e]=b(c)};da.cleanPosition=function(a,b,c){return("paper"===c||"pixel"===c?L.ensureNumber:da.getFromId(b,c).cleanPos)(a)};da.redrawComponents=function(a,b){function c(c,e,f,g){c=N.getComponentMethod(c,e);e={};for(var h=0;h<b.length;h++)for(var k=d[da.id2name(b[h])][f],n=0;n<k.length;n++){var m=k[n];if(!e[m]&&(c(a,m),e[m]=1,g))return}}b=b?b:da.listIds(a);var d=a._fullLayout;c("annotations","drawOne","_annIndices");c("shapes","drawOne","_shapeIndices");c("images",
"draw","_imgIndices",!0)};var xa=da.getDataConversions=function(a,b,c,d){c="x"===c||"y"===c||"z"===c?c:d;if(Array.isArray(c)){if(a={type:ya(d),_categories:[]},da.setConvert(a),"category"===a.type)for(b=0;b<d.length;b++)a.d2c(d[b])}else a=da.getFromTrace(a,b,c);return a?{d2c:a.d2c,c2d:a.c2d}:"ids"===c?{d2c:k,c2d:k}:{d2c:m,c2d:m}};da.getDataToCoordFunc=function(a,b,c,d){return xa(a,b,c,d).d2c};da.counterLetter=function(a){a=a.charAt(0);if("x"===a)return"y";if("y"===a)return"x"};da.minDtick=function(a,
b,c,d){if(-1!==["log","category","multicategory"].indexOf(a.type)||!d)a._minDtick=0;else if(void 0===a._minDtick)a._minDtick=b,a._forceTick0=c;else if(a._minDtick)if(2E-6>(a._minDtick/b+1E-6)%1&&2E-6>((c-a._forceTick0)/b%1+1.000001)%1)a._minDtick=b,a._forceTick0=c;else if(2E-6<(b/a._minDtick+1E-6)%1||2E-6<((c-a._forceTick0)/a._minDtick%1+1.000001)%1)a._minDtick=0};da.saveRangeInitial=function(a,b){a=da.list(a,"",!0);for(var c=!1,d=0;d<a.length;d++){var e=a[d],f=void 0===e._rangeInitial,g=f||!(e.range[0]===
e._rangeInitial[0]&&e.range[1]===e._rangeInitial[1]);if(f&&!1===e.autorange||b&&g)e._rangeInitial=e.range.slice(),c=!0}return c};da.saveShowSpikeInitial=function(a,b){for(var c=da.list(a,"",!0),d=!1,e="on",f=0;f<c.length;f++){var g=c[f],h=void 0===g._showSpikeInitial,k=h||g.showspikes!==g._showspikes;if(h||b&&k)g._showSpikeInitial=g.showspikes,d=!0;"on"!==e||g.showspikes||(e="off")}a._fullLayout._cartesianSpikesEnabled=e;return d};da.autoBin=function(a,b,c,d,e,f){var g=L.aggNums(Math.min,null,a),
k=L.aggNums(Math.max,null,a);if("category"===b.type||"multicategory"===b.type)return{start:g-.5,end:k+.5,size:Math.max(1,Math.round(f)||1),_dataSpan:k-g};e||(e=b.calendar);var n="log"===b.type?{type:"linear",range:[g,k]}:{type:b.type,range:L.simpleMap([g,k],b.c2r,0,e),calendar:e};da.setConvert(n);(f=f&&F.dtick(f,n.type))?(n.dtick=f,n.tick0=F.tick0(void 0,n.type,e)):(c?d=(k-g)/c:(c=L.distinctVals(a),f=Math.pow(10,Math.floor(Math.log(c.minDiff)/Math.LN10)),c=f*L.roundUp(c.minDiff/f,[.9,1.9,4.9,9.9],
!0),d=Math.max(c,2*L.stdev(a)/Math.pow(a.length,d?.25:.4)),I(d)||(d=1)),da.autoTicks(n,d));d=n.dtick;c=da.tickIncrement(da.tickFirst(n),d,"reverse",e);if("number"===typeof d)c=h(c,a,n,g,k),n=1+Math.floor((k-c)/d),a=c+n*d;else{if("M"===n.dtick.charAt(0))a:{n=c;a=L.findExactDates(a,e);if(.8<a.exactDays&&(c=Number(d.substr(1)),n=.8<a.exactYears&&0===c%12?da.tickIncrement(n,"M6","reverse")+1.5*fa:.8<a.exactMonths?da.tickIncrement(n,"M1","reverse")+15.5*fa:n-fa/2,a=da.tickIncrement(n,d),a<=g)){c=a;break a}c=
n}a=c;for(n=0;a<=k;)a=da.tickIncrement(a,d,!1,e),n++}return{start:b.c2r(c,0,e),end:b.c2r(a,0,e),size:d,_dataSpan:k-g}};da.prepTicks=function(a){var b=L.simpleMap(a.range,a.r2l);if("auto"===a.tickmode||!a.dtick){var c=a.nticks;c||("category"===a.type||"multicategory"===a.type?(c=a.tickfont?1.2*(a.tickfont.size||12):15,c=a._length/c):(c="y"===a._id.charAt(0)?40:80,c=L.constrain(a._length/c,4,9)+1),"radialaxis"===a._name&&(c*=2));"array"===a.tickmode&&(c*=100);da.autoTicks(a,Math.abs(b[1]-b[0])/c);0<
a._minDtick&&a.dtick<2*a._minDtick&&(a.dtick=a._minDtick,a.tick0=a.l2r(a._forceTick0))}a.tick0||(a.tick0="date"===a.type?"2000-01-01":0);"date"===a.type&&.1>a.dtick&&(a.dtick=.1);f(a)};da.calcTicks=function(a){da.prepTicks(a);var c=L.simpleMap(a.range,a.r2l);if("array"===a.tickmode){var d=a.tickvals;c=a.ticktext;var e=Array(d.length),f=L.simpleMap(a.range,a.r2l),g=1.0001*f[0]-1E-4*f[1],h=1.0001*f[1]-1E-4*f[0];f=Math.min(g,h);g=Math.max(g,h);h=0;Array.isArray(c)||(c=[]);var k="category"===a.type?a.d2l_noadd:
a.d2l;"log"===a.type&&"L"!==String(a.dtick).charAt(0)&&(a.dtick="L"+Math.pow(10,Math.floor(Math.min(a.range[0],a.range[1]))-1));for(var n=0;n<d.length;n++){var m=k(d[n]);m>f&&m<g&&(e[h]=void 0===c[n]?da.tickText(a,m):b(a,m,String(c[n])),h++)}h<d.length&&e.splice(h,d.length-h);return e}a._tmin=da.tickFirst(a);e=1.0001*c[1]-1E-4*c[0];f=c[1]<c[0];if(a._tmin<1.0001*c[0]-1E-4*c[1]!==f)return[];d=[];if("category"===a.type||"multicategory"===a.type)e=f?Math.max(-.5,e):Math.min(a._categories.length-.5,e);
g=null;h=Math.max(1E3,a._length||0);for(k=a._tmin;(f?k>=e:k<=e)&&!(d.length>h||k===g);k=da.tickIncrement(k,a.dtick,f,a.calendar))g=k,d.push(k);"angularaxis"===a._id&&360===Math.abs(c[1]-c[0])&&d.pop();a._tmax=d[d.length-1];a._prevDateHead="";a._inCalcTicks=!0;c=Array(d.length);for(e=0;e<d.length;e++)c[e]=da.tickText(a,d[e]);a._inCalcTicks=!1;return c};var za=[2,5,10],ka=[1,2,3,6,12],wa=[1,2,5,10,15,30],ta=[1,2,3,7,14],aa=[-.046,0,.301,.477,.602,.699,.778,.845,.903,.954,1],ma=[-.301,0,.301,.699,1],
Aa=[15,30,45,90,180];da.autoTicks=function(a,b){function c(a){return Math.pow(a,Math.floor(Math.log(b)/Math.LN10))}if("date"===a.type){a.tick0=L.dateTick0(a.calendar);var d=2*b;d>S?(b/=S,d=c(10),a.dtick="M"+12*e(b,d,za)):d>W?(b/=W,a.dtick="M"+e(b,1,ka)):d>fa?(a.dtick=e(b,fa,ta),a.tick0=L.dateTick0(a.calendar,!0)):d>qa?a.dtick=e(b,qa,ka):d>ha?a.dtick=e(b,ha,wa):d>ea?a.dtick=e(b,ea,wa):(d=c(10),a.dtick=e(b,d,za))}else"log"===a.type?(a.tick0=0,d=L.simpleMap(a.range,a.r2l),.7<b?a.dtick=Math.ceil(b):1>
Math.abs(d[1]-d[0])?(b=Math.abs(Math.pow(10,d[1])-Math.pow(10,d[0]))/(1.5*Math.abs((d[1]-d[0])/b)),d=c(10),a.dtick="L"+e(b,d,za)):a.dtick=.3<b?"D2":"D1"):"category"===a.type||"multicategory"===a.type?(a.tick0=0,a.dtick=Math.ceil(Math.max(b,1))):"angularaxis"===a._id?(a.tick0=0,a.dtick=e(b,1,Aa)):(a.tick0=0,d=c(10),a.dtick=e(b,d,za));0===a.dtick&&(a.dtick=1);if(!I(a.dtick)&&"string"!==typeof a.dtick)throw d=a.dtick,a.dtick=1,"ax.dtick error: "+String(d);};da.tickIncrement=function(a,b,c,d){var e=c?
-1:1;if(I(b))return a+e*b;var f=b.charAt(0),g=e*Number(b.substr(1));if("M"===f)return L.incrementMonth(a,g,d);if("L"===f)return Math.log(Math.pow(10,a)+g)/Math.LN10;if("D"===f)return b="D2"===b?ma:aa,a+=.01*e,c=L.roundUp(L.mod(a,1),b,c),Math.floor(a)+Math.log(O.round(Math.pow(10,c),1))/Math.LN10;throw"unrecognized dtick "+String(b);};da.tickFirst=function(a){var b=a.r2l||Number,c=L.simpleMap(a.range,b),d=c[1]<c[0],e=d?Math.floor:Math.ceil;c=1.0001*c[0]-1E-4*c[1];var f=a.dtick,g=b(a.tick0);if(I(f)){d=
e((c-g)/f)*f+g;if("category"===a.type||"multicategory"===a.type)d=L.constrain(d,0,a._categories.length-1);return d}b=f.charAt(0);var h=Number(f.substr(1));if("M"===b){e=0;for(var k,n;10>e;){k=da.tickIncrement(g,f,d,a.calendar);if(0>=(k-c)*(g-c))return d?Math.min(g,k):Math.max(g,k);k=(c-(g+k)/2)/(k-g);n=b+(Math.abs(Math.round(k))||1)*h;g=da.tickIncrement(g,n,0>k?!d:d,a.calendar);e++}L.error("tickFirst did not converge",a);return g}if("L"===b)return Math.log(e((Math.pow(10,c)-g)/h)*h+g)/Math.LN10;if("D"===
b)return a="D2"===f?ma:aa,a=L.roundUp(L.mod(c,1),a,d),Math.floor(c)+Math.log(O.round(Math.pow(10,a),1))/Math.LN10;throw"unrecognized dtick "+String(f);};da.tickText=function(a,e,f){function h(b){if(void 0===b)return!0;if(f)return"none"===b;var c={first:a._tmin,last:a._tmax}[b];return"all"!==b&&e!==c}var k=b(a,e),m="array"===a.tickmode,l=f||m,p=a.type,t="category"===p?a.d2l_noadd:a.d2l;if(m&&Array.isArray(a.ticktext)){m=L.simpleMap(a.range,a.r2l);var v=Math.abs(m[1]-m[0])/1E4;for(m=0;m<a.ticktext.length&&
!(Math.abs(e-t(a.tickvals[m]))<v);m++);if(m<a.ticktext.length)return k.text=String(a.ticktext[m]),k}t=f?"never":"none"!==a.exponentformat&&h(a.showexponent)?"hide":"";"date"===p?n(a,k,f,l):"log"===p?q(a,k,f,l,t):"category"===p?r(a,k):"multicategory"===p?d(a,k,f):"angularaxis"===a._id?c(a,k,f,l,t):g(a,k,f,l,t);a.tickprefix&&!h(a.showtickprefix)&&(k.text=a.tickprefix+k.text);a.ticksuffix&&!h(a.showticksuffix)&&(k.text+=a.ticksuffix);if("boundaries"===a.tickson||a.showdividers)l=function(b){var c=a.l2p(b);
return 0<=c&&c<=a._length?b:null},k.xbnd=[l(k.x-.5),l(k.x+a.dtick-.5)];return k};da.hoverLabelText=function(a,b,c){if(c!==la&&c!==b)return da.hoverLabelText(a,b)+" - "+da.hoverLabelText(a,c);c="log"===a.type&&0>=b;a=da.tickText(a,a.c2l(c?-b:b),"hover").text;return c?0===b?"0":ba+a:a};var va="f p n μ m  k M G T".split(" ");da.getTickFormat=function(a){function b(a){return"string"!==typeof a?a:Number(a.replace("M",""))*W}function c(a,b){var c=["L","D"];if(typeof a===typeof b){if("number"===typeof a)return a-
b;var d=c.indexOf(a.charAt(0));c=c.indexOf(b.charAt(0));return d===c?Number(a.replace(/(L|D)/g,""))-Number(b.replace(/(L|D)/g,"")):d-c}return"number"===typeof a?1:-1}function d(a,b,c){c=c||function(a){return a};var d=b[0];b=b[1];return(!d&&"number"!==typeof d||c(d)<=c(a))&&(!b&&"number"!==typeof b||c(b)>=c(a))}function e(a,b){var d=null===b[0],e=null===b[1],f=0<=c(a,b[0]);a=0>=c(a,b[1]);return(d||f)&&(e||a)}var f;if(a.tickformatstops&&0<a.tickformatstops.length)switch(a.type){case "date":case "linear":for(f=
0;f<a.tickformatstops.length;f++){var g=a.tickformatstops[f];if(g.enabled&&d(a.dtick,g.dtickrange,b)){var h=g;break}}break;case "log":for(f=0;f<a.tickformatstops.length;f++)if(g=a.tickformatstops[f],g.enabled&&e(a.dtick,g.dtickrange)){h=g;break}}return h?h.value:a.tickformat};da.getSubplots=function(a,b){a=a._fullLayout._subplots;a=a.cartesian.concat(a.gl2d||[]);b=b?da.findSubplotsWithAxis(a,b):a;b.sort(function(a,b){a=a.substr(1).split("y");b=b.substr(1).split("y");return a[0]===b[0]?+a[1]-+b[1]:
+a[0]-+b[0]});return b};da.findSubplotsWithAxis=function(a,b){b=new RegExp("x"===b._id.charAt(0)?"^"+b._id+"y":b._id+"$");for(var c=[],d=0;d<a.length;d++){var e=a[d];b.test(e)&&c.push(e)}return c};da.makeClipPaths=function(a){var b=a._fullLayout;if(!b._hasOnlyLargeSploms){var c={_offset:0,_length:b.width,_id:""},d={_offset:0,_length:b.height,_id:""},e=da.list(a,"x",!0);a=da.list(a,"y",!0);var f=[],g,h;for(g=0;g<e.length;g++)for(f.push({x:e[g],y:d}),h=0;h<a.length;h++)0===g&&f.push({x:c,y:a[h]}),f.push({x:e[g],
y:a[h]});c=b._clips.selectAll(".axesclip").data(f,function(a){return a.x._id+a.y._id});c.enter().append("clipPath").classed("axesclip",!0).attr("id",function(a){return"clip"+b._uid+a.x._id+a.y._id}).append("rect");c.exit().remove();c.each(function(a){O.select(this).select("rect").attr({x:a.x._offset||0,y:a.y._offset||0,width:a.x._length||1,height:a.y._length||1})})}};da.draw=function(a,b,c){var d=a._fullLayout;"redraw"===b&&d._paper.selectAll("g.subplot").each(function(a){a=d._plots[a[0]];var b=a.xaxis,
c=a.yaxis;a.xaxislayer.selectAll("."+b._id+"tick").remove();a.yaxislayer.selectAll("."+c._id+"tick").remove();a.xaxislayer.selectAll("."+b._id+"tick2").remove();a.yaxislayer.selectAll("."+c._id+"tick2").remove();a.xaxislayer.selectAll("."+b._id+"divider").remove();a.yaxislayer.selectAll("."+c._id+"divider").remove();a.gridlayer&&a.gridlayer.selectAll("path").remove();a.zerolinelayer&&a.zerolinelayer.selectAll("path").remove();d._infolayer.select(".g-"+b._id+"title").remove();d._infolayer.select(".g-"+
c._id+"title").remove()});b=b&&"redraw"!==b?b:da.listIds(a);return L.syncOrAsync(b.map(function(b){return function(){if(b){var d=da.getFromId(a,b),e=da.drawOne(a,d,c);d._r=d.range.slice();d._rl=L.simpleMap(d._r,d.r2l);return e}}}))};da.drawOne=function(a,b,c){function d(a,b){a[0]=Math.min(a[0],b[0]);a[1]=Math.max(a[1],b[1])}c=c||{};var e;b.setScale();var f=a._fullLayout,g=b._id,h=g.charAt(0),k=da.counterLetter(g),n=b._mainLinePosition,m=b._mainMirrorPosition,l=f._plots[b._mainSubplot][h+"axislayer"],
p=b._subplotsWith,t=b._vals=da.calcTicks(b),r=[b.mirror,n,m].join("_");for(e=0;e<t.length;e++)t[e].axInfo=r;if(b.visible){b._selections={};b._tickAngles={};var v=da.makeTransFn(b);"boundaries"===b.tickson?(r=B(b,t),e=da.clipEnds(b,r),r="inside"===b.ticks?e:r):(e=da.clipEnds(b,t),r="inside"===b.ticks?e:t);var q=b._gridVals=e,u=x(b,t);if(!f._hasOnlyLargeSploms){var y={};for(e=0;e<p.length;e++){var D=p[e];var G=f._plots[D];D=G[k+"axis"];var E=D._mainAxis._id;y[E]||(y[E]=1,E="x"===h?"M0,"+D._offset+"v"+
D._length:"M"+D._offset+",0h"+D._length,da.drawGrid(a,b,{vals:q,counterAxis:D,layer:G.gridlayer.select("."+g),path:E,transFn:v}),da.drawZeroLine(a,b,{counterAxis:D,layer:G.zerolinelayer,path:E,transFn:v}))}}q=da.getTickSigns(b);y=[];if(b.ticks){e=da.makeTickPath(b,n,q[2]);if(b._anchorAxis&&b.mirror&&!0!==b.mirror){var I=da.makeTickPath(b,m,q[3]);var H=e+I}else I="",H=e;if(b.showdividers&&"outside"===b.ticks&&"boundaries"===b.tickson){var J={};for(e=0;e<u.length;e++)J[u[e].x]=1;m=function(a){return J[a.x]?
I:H}}else m=H;da.drawTicks(a,b,{vals:r,layer:l,path:m,transFn:v});y=Object.keys(b._linepositions||{})}for(e=0;e<y.length;e++)D=y[e],G=f._plots[D],m=b._linepositions[D]||[],m=da.makeTickPath(b,m[0],q[0])+da.makeTickPath(b,m[1],q[1]),da.drawTicks(a,b,{vals:r,layer:G[h+"axislayer"],path:m,transFn:v});r=[];r.push(function(){return da.drawLabels(a,b,{vals:t,layer:l,transFn:v,labelFns:da.makeLabelFns(b,n)})});if("multicategory"===b.type){var M=0,O={x:2,y:10}[h],R=q[2]*("inside"===b.ticks?-1:1);r.push(function(){M+=
A(b,g+"tick")+O;M+=b._tickAngles[g+"tick"]?b.tickfont.size*K:0;return da.drawLabels(a,b,{vals:w(b,t),layer:l,cls:g+"tick2",repositionOnUpdate:!0,secondary:!0,transFn:v,labelFns:da.makeLabelFns(b,n+M*R)})});r.push(function(){M+=A(b,g+"tick2");b._labelLength=M;var c=da.makeTickPath(b,n,R,M),d=b._id+"divider",e=l.selectAll("path."+d).data(u,C);e.exit().remove();e.enter().insert("path",":first-child").classed(d,1).classed("crisp",1).call(U.stroke,b.dividercolor).style("stroke-width",T.crispRound(a,b.dividerwidth,
1)+"px");e.attr("transform",v).attr("d",c)})}var ca=N.getComponentMethod("rangeslider","isVisible")(b);r.push(function(){if(b.showticklabels){var c=a.getBoundingClientRect(),e=l.node().getBoundingClientRect();b._boundingBox={width:e.width,height:e.height,left:e.left-c.left,right:e.right-c.left,top:e.top-c.top,bottom:e.bottom-c.top}}else c=f._size,"x"===h?(c="free"===b.anchor?c.t+c.h*(1-b.position):c.t+c.h*(1-b._anchorAxis.domain[{bottom:0,top:1}[b.side]]),b._boundingBox={top:c,bottom:c,left:b._offset,
right:b._offset+b._length,width:b._length,height:0}):(c="free"===b.anchor?c.l+c.w*b.position:c.l+c.w*b._anchorAxis.domain[{left:0,right:1}[b.side]],b._boundingBox={left:c,right:c,bottom:b._offset+b._length,top:b._offset,height:b._length,width:0});if(p){c=b._counterSpan=[Infinity,-Infinity];for(e=0;e<p.length;e++){var g=f._plots[p[e]]["x"===h?"yaxis":"xaxis"];d(c,[g._offset,g._offset+g._length])}"free"===b.anchor&&d(c,"x"===h?[b._boundingBox.bottom,b._boundingBox.top]:[b._boundingBox.right,b._boundingBox.left])}},
function(){var c=b.side.charAt(0),d;ca&&(d=N.getComponentMethod("rangeslider","autoMarginOpts")(a,b));Q.autoMargin(a,b._id+".rangeslider",d);if(b.automargin&&(!ca||"b"!==c)){var e={x:0,y:0,r:0,l:0,t:0,b:0};d=b._boundingBox;var g=P(a,b);switch(h+c){case "xb":var n=0;var m=d.top-g;e[c]=d.height;break;case "xt":n=1;m=g-d.bottom;e[c]=d.height;break;case "yl":n=0;m=g-d.right;e[c]=d.width;break;case "yr":n=1,m=d.left-g,e[c]=d.width}e[k]="free"===b.anchor?b.position:b._anchorAxis.domain[n];0<e[c]&&(e[c]+=
m);b.title.text!==f._dfltTitle[h]&&(e[c]+=b.title.font.size);"x"===h&&0<d.width?(c=d.right-(b._offset+b._length),0<c&&(e.x=1,e.r=c),d=b._offset-d.left,0<d&&(e.x=0,e.l=d)):"y"===h&&0<d.height&&(c=d.bottom-(b._offset+b._length),0<c&&(e.y=0,e.b=c),d=b._offset-d.top,0<d&&(e.y=1,e.t=d))}Q.autoMargin(a,b._id+".automargin",e)});c.skipTitle||ca&&b._boundingBox&&"bottom"===b.side||r.push(function(){var c=a._fullLayout,d=b._id,e=d.charAt(0),f=b.title.font.size;var g="multicategory"===b.type?b._labelLength:
10+1.5*f+(b.linewidth?b.linewidth-1:0);var h=P(a,b);if("x"===e){var k=b._offset+b._length/2;var n="top"===b.side?-g-f*(b.showticklabels?1:0):g+f*(b.showticklabels?1.5:.5);n+=h}else{n=b._offset+b._length/2;k="right"===b.side?g+f*(b.showticklabels?1:.5):-g-f*(b.showticklabels?.5:0);k+=h;var m={rotate:"-90",offset:0}}if("multicategory"!==b.type){f=b._selections[b._id+"tick"];var l={selection:f,side:b.side};f&&f.node()&&f.node().parentNode&&(f=T.getTranslate(f.node().parentNode),l.offsetLeft=f.x,l.offsetTop=
f.y)}return z.draw(a,d+"title",{propContainer:b,propName:b._name+".title.text",placeholder:c._dfltTitle[e],avoid:l,transform:m,attributes:{x:k,y:n,"text-anchor":"middle"}})});return L.syncOrAsync(r)}};da.getTickSigns=function(a){var b=a._id.charAt(0),c=a.side==={x:"top",y:"right"}[b]?1:-1;c=[-1,1,c,-c];"inside"!==a.ticks===("x"===b)&&(c=c.map(function(a){return-a}));return c};da.makeTransFn=function(a){var b=a._id.charAt(0),c=a._offset;return"x"===b?function(b){return"translate("+(c+a.l2p(b.x))+",0)"}:
function(b){return"translate(0,"+(c+a.l2p(b.x))+")"}};da.makeTickPath=function(a,b,c,d){d=void 0!==d?d:a.ticklen;var e=a._id.charAt(0);a=(a.linewidth||1)/2;return"x"===e?"M0,"+(b+a*c)+"v"+d*c:"M"+(b+a*c)+",0h"+d*c};da.makeLabelFns=function(a,b,c){var d=a._id.charAt(0),e="boundaries"!==a.tickson&&"outside"===a.ticks,f=0,g=0;e&&(f+=a.ticklen);c&&"outside"===a.ticks&&(g=L.deg2rad(c),f=a.ticklen*Math.cos(g)+1,g=a.ticklen*Math.sin(g));a.showticklabels&&(e||a.showline)&&(f+=.2*a.tickfont.size);f+=(a.linewidth||
1)/2;e={labelStandoff:f,labelShift:g};if("x"===d){var h="bottom"===a.side?1:-1;var k=g*h;var n=b+f*h;var m="bottom"===a.side?1:-.2;e.xFn=function(a){return a.dx+k};e.yFn=function(a){return a.dy+n+a.fontSize*m};e.anchorFn=function(a,b){return I(b)&&0!==b&&180!==b?0>b*h?"end":"start":"middle"};e.heightFn=function(b,c,d){return-60>c||60<c?-.5*d:"top"===a.side?-d:0}}else"y"===d&&(h="right"===a.side?1:-1,k=f,n=-g*h,m=90===Math.abs(a.tickangle)?.5:0,e.xFn=function(a){return a.dx+b+(k+a.fontSize*m)*h},e.yFn=
function(a){return a.dy+n+a.fontSize*Z},e.anchorFn=function(b,c){return I(c)&&90===Math.abs(c)?"middle":"right"===a.side?"start":"end"},e.heightFn=function(b,c,d){c*="left"===a.side?1:-1;return-30>c?-d:30>c?-.5*d:0});return e};da.drawTicks=function(a,b,c){c=c||{};var d=b._id+"tick",e=c.layer.selectAll("path."+d).data(b.ticks?c.vals:[],C);e.exit().remove();e.enter().append("path").classed(d,1).classed("ticks",1).classed("crisp",!1!==c.crisp).call(U.stroke,b.tickcolor).style("stroke-width",T.crispRound(a,
b.tickwidth,1)+"px").attr("d",c.path);e.attr("transform",c.transFn)};da.drawGrid=function(a,b,c){c=c||{};var d=b._id+"grid",e=c.vals,f=c.counterAxis;if(!1===b.showgrid)e=[];else if(f&&da.shouldShowZeroLine(a,b,f)){f="array"===b.tickmode;for(var g=0;g<e.length;g++){var h=e[g].x;if(f?!h:Math.abs(h)<b.dtick/100)if(e=e.slice(0,g).concat(e.slice(g+1)),f)g--;else break}}e=c.layer.selectAll("path."+d).data(e,C);e.exit().remove();e.enter().append("path").classed(d,1).classed("crisp",!1!==c.crisp);b._gw=T.crispRound(a,
b.gridwidth,1);e.attr("transform",c.transFn).attr("d",c.path).call(U.stroke,b.gridcolor||"#ddd").style("stroke-width",b._gw+"px");"function"===typeof c.path&&e.attr("d",c.path)};da.drawZeroLine=function(a,b,c){c=c||c;var d=b._id+"zl",e=da.shouldShowZeroLine(a,b,c.counterAxis);e=c.layer.selectAll("path."+d).data(e?[{x:0,id:b._id}]:[]);e.exit().remove();e.enter().append("path").classed(d,1).classed("zl",1).classed("crisp",!1!==c.crisp).each(function(){c.layer.selectAll("path").sort(function(a,b){return ja.idSort(a.id,
b.id)})});e.attr("transform",c.transFn).attr("d",c.path).call(U.stroke,b.zerolinecolor||U.defaultLine).style("stroke-width",T.crispRound(a,b.zerolinewidth,b._gw||1)+"px")};da.drawLabels=function(a,b,c){function d(a,b){a.each(function(a){var d=O.select(this),e=d.select(".text-math-group"),f=k.anchorFn(a,b),g=c.transFn.call(d.node(),a)+(I(b)&&0!==+b?" rotate("+b+","+k.xFn(a)+","+(k.yFn(a)-a.fontSize/2)+")":""),h=R.lineCount(d),n=K*a.fontSize;(a=k.heightFn(a,I(b)?+b:0,(h-1)*n))&&(g+=" translate(0, "+
a+")");e.empty()?d.select("text").attr({transform:g,"text-anchor":f}):(d=T.bBox(e.node()).width*{end:-.5,start:.5}[f],e.attr("transform",g+(d?"translate("+d+",0)":"")))})}c=c||{};var e=b._id,f=e.charAt(0),g=c.cls||e+"tick",h=c.vals,k=c.labelFns,n=c.secondary?0:b.tickangle;e=(b._tickAngles||{})[g];var m=c.layer.selectAll("g."+g).data(b.showticklabels?h:[],C),l=[];m.enter().append("g").classed(g,1).append("text").attr("text-anchor","middle").each(function(b){var c=O.select(this),e=a._promises.length;
c.call(R.positionText,k.xFn(b),k.yFn(b)).call(T.font,b.font,b.fontSize,b.fontColor).text(b.text).call(R.convertToTspans,a);a._promises[e]?l.push(a._promises.pop().then(function(){d(c,n)})):d(c,n)});m.exit().remove();c.repositionOnUpdate&&m.each(function(a){O.select(this).select("text").call(R.positionText,k.xFn(a),k.yFn(a))});d(m,e||n);b._selections&&(b._selections[g]=m);(e=L.syncOrAsync([function(){return l.length&&Promise.all(l)},function(){d(m,n);var a=null;if(h.length&&"x"===f&&!I(n)&&("log"!==
b.type||"D"!==String(b.dtick).charAt(0))){var e=a=0,k=[];m.each(function(a){e=Math.max(e,a.fontSize);a=b.l2p(a.x);var c=H(this);c=T.bBox(c.node());k.push({top:0,bottom:10,height:10,left:a-c.width/2,right:a+c.width/2+2,width:c.width+2})});if("boundaries"!==b.tickson&&!b.showdividers||c.secondary){var l=h.length;var p=Math.abs((h[l-1].x-h[0].x)*b._m)/(l-1)<2.5*e||"multicategory"===b.type;for(l=0;l<k.length-1;l++)if(L.bBoxIntersect(k[l],k[l+1])){a=p?90:30;break}}else for(p=2,b.ticks&&(p+=b.tickwidth/
2),l=0;l<k.length;l++){var r=h[l].xbnd,t=k[l];if(null!==r[0]&&t.left-b.l2p(r[0])<p||null!==r[1]&&b.l2p(r[1])-t.right<p){a=90;break}}a&&d(m,a)}b._tickAngles&&(b._tickAngles[g]=null===a?I(n)?n:0:a)}]))&&e.then&&a._promises.push(e);return e};da.shouldShowZeroLine=function(a,b,c){var d=L.simpleMap(b.range,b.r2l),e;if(e=0>=d[0]*d[1]&&b.zeroline&&("linear"===b.type||"-"===b.type)&&b._gridVals.length){if(!(c=J(b,0)||!E(a,b,c,d)))a:{a=a._fullData;c=b._mainSubplot;b=b._id.charAt(0);for(d=0;d<a.length;d++)if(e=
a[d],!0===e.visible&&e.xaxis+e.yaxis===c){if((N.traceIs(e,"bar")||"waterfall"===e.type)&&e.orientation==={x:"h",y:"v"}[b]){c=!0;break a}if(e.fill&&e.fill.charAt(e.fill.length-1)===b){c=!0;break a}}c=!1}e=c}return e};da.clipEnds=function(a,b){return b.filter(function(b){return J(a,b.x)})};da.allowAutoMargin=function(a){for(var b=da.list(a,"",!0),c=0;c<b.length;c++){var d=b[c];d.automargin&&Q.allowAutoMargin(a,d._id+".automargin");N.getComponentMethod("rangeslider","isVisible")(d)&&Q.allowAutoMargin(a,
d._id+".rangeslider")}};da.swap=function(a,b){var c=[],d,e;for(d=0;d<b.length;d++){var f=[],g=a._fullData[b[d]].xaxis,h=a._fullData[b[d]].yaxis;if(g&&h){for(e=0;e<c.length;e++)-1===c[e].x.indexOf(g)&&-1===c[e].y.indexOf(h)||f.push(e);if(f.length){var k=c[f[0]];if(1<f.length)for(e=1;e<f.length;e++){var n=c[f[e]];M(k.x,n.x);M(k.y,n.y)}M(k.x,[g]);M(k.y,[h])}else c.push({x:[g],y:[h]})}}for(b=0;b<c.length;b++){var m;e=a;f=c[b].x;g=c[b].y;k=[];n=[];h=e.layout;for(d=0;d<f.length;d++)k.push(da.getFromId(e,
f[d]));for(d=0;d<g.length;d++)n.push(da.getFromId(e,g[d]));var l=Object.keys(Y),p="anchor domain overlaying position side tickangle editType".split(" "),r=["linear","log"];for(d=0;d<l.length;d++){var t=l[d],v=k[0][t],q=n[0][t],u=!0,y=!1,A=!1;if("_"!==t.charAt(0)&&"function"!==typeof v&&-1===p.indexOf(t)){for(m=1;m<k.length&&u;m++){var B=k[m][t];"type"===t&&-1!==r.indexOf(v)&&-1!==r.indexOf(B)&&v!==B?y=!0:B!==v&&(u=!1)}for(m=1;m<n.length&&u;m++)v=n[m][t],"type"===t&&-1!==r.indexOf(q)&&-1!==r.indexOf(v)&&
q!==v?A=!0:n[m][t]!==q&&(u=!1);if(u){y&&(h[k[0]._name].type="linear");A&&(h[n[0]._name].type="linear");m=h;q=k;u=n;B=e._fullLayout._dfltTitle;y=L.nestedProperty;A=y(m[q[0]._name],t).get();v=y(m[u[0]._name],t).get();"title"===t&&(A&&A.text===B.x&&(A.text=B.y),v&&v.text===B.y&&(v.text=B.x));for(B=0;B<q.length;B++)y(m,q[B]._name+"."+t).set(v);for(B=0;B<u.length;B++)y(m,u[B]._name+"."+t).set(A)}}}for(d=0;d<e._fullLayout.annotations.length;d++)k=e._fullLayout.annotations[d],-1!==f.indexOf(k.xref)&&-1!==
g.indexOf(k.yref)&&L.swapAttrs(h.annotations[d],["?"])}}},{"../../components/color":577,"../../components/drawing":598,"../../components/titles":665,"../../constants/alignment":672,"../../constants/numerical":677,"../../lib":700,"../../lib/svg_text_utils":724,"../../plots/plots":810,"../../registry":829,"./autorange":747,"./axis_autotype":749,"./axis_ids":751,"./clean_ticks":753,"./layout_attributes":760,"./set_convert":766,d3:154,"fast-isnumeric":221}],749:[function(a,p,l){var m=a("fast-isnumeric"),
k=a("../../lib"),h=a("../../constants/numerical").BADNUM;p.exports=function(a,f,b){b=b||{};if(b=!b.noMultiCategory)b=k.isArrayOrTypedArray(a[0])&&k.isArrayOrTypedArray(a[1]);if(b)return"multicategory";b=Math.max(1,(a.length-1)/1E3);for(var e=0,l=0,p={},d=0;d<a.length;d+=b){var g=a[Math.round(d)],c=String(g);p[c]||(p[c]=1,k.isDateTime(g,f)&&(e+=1),m(g)&&(l+=1))}if(e>2*l)return"date";f=Math.max(1,(a.length-1)/1E3);e=b=0;l={};for(p=0;p<a.length;p+=f)d=a[Math.round(p)],g=String(d),l[g]||(l[g]=1,"boolean"===
typeof d?e++:k.cleanNumber(d)!==h?b++:"string"===typeof d&&e++);if(e>2*b)return"category";a:{if(a)for(f=0;f<a.length;f++)if(m(a[f])){a=!0;break a}a=!1}return a?"linear":"-"}},{"../../constants/numerical":677,"../../lib":700,"fast-isnumeric":221}],750:[function(a,p,l){var m=a("../../registry"),k=a("../../lib"),h=a("./layout_attributes"),e=a("./tick_value_defaults"),f=a("./tick_mark_defaults"),b=a("./tick_label_defaults"),n=a("./category_order_defaults"),q=a("./line_grid_defaults"),r=a("./set_convert");
p.exports=function(a,g,c,l,p){var d=l.letter,t=l.font||{},v=l.splomStash||{},u=c("visible",!l.cheateronly),A=g.type;"date"===A&&m.getComponentMethod("calendars","handleDefaults")(a,g,"calendar",l.calendar);r(g,p);!c("autorange",!g.isValidRange(a.range))||"linear"!==A&&"-"!==A||c("rangemode");c("range");g.cleanRange();n(a,g,c,l);"category"===A||l.noHover||c("hoverformat");if(!u)return g;u=c("color");var C=u!==h.color.dflt?u:t.color;c("title.text",v.label||p._dfltTitle[d]);k.coerceFont(c,"title.font",
{family:t.family,size:Math.round(1.2*t.size),color:C});e(a,g,c,A);b(a,g,c,A,l);f(a,g,c,l);q(a,g,c,{dfltColor:u,bgColor:l.bgColor,showGrid:l.showGrid,attributes:h});(g.showline||g.ticks)&&c("mirror");l.automargin&&c("automargin");a="multicategory"===g.type;if(!l.noTickson&&("category"===g.type||a)&&(g.ticks||g.showgrid)){var w;a&&(w="boundaries");c("tickson",w)}a&&c("showdividers")&&(c("dividercolor"),c("dividerwidth"));return g}},{"../../lib":700,"../../registry":829,"./category_order_defaults":752,
"./layout_attributes":760,"./line_grid_defaults":762,"./set_convert":766,"./tick_label_defaults":767,"./tick_mark_defaults":768,"./tick_value_defaults":769}],751:[function(a,p,l){var m=a("../../registry"),k=a("./constants");l.id2name=function(a){if("string"===typeof a&&a.match(k.AX_ID_PATTERN)){var e=a.substr(1);"1"===e&&(e="");return a.charAt(0)+"axis"+e}};l.name2id=function(a){if(a.match(k.AX_NAME_PATTERN)){var e=a.substr(5);"1"===e&&(e="");return a.charAt(0)+e}};l.cleanId=function(a,e){if(a.match(k.AX_ID_PATTERN)&&
(!e||a.charAt(0)===e))return e=a.substr(1).replace(/^0+/,""),"1"===e&&(e=""),a.charAt(0)+e};l.list=function(a,e,f){var b=a._fullLayout;if(!b)return[];var h=l.listIds(a,e);a=Array(h.length);var k;for(k=0;k<h.length;k++){var m=h[k];a[k]=b[m.charAt(0)+"axis"+m.substr(1)]}if(!f)for(f=b._subplots.gl3d||[],k=0;k<f.length;k++)h=b[f[k]],e?a.push(h[e+"axis"]):a.push(h.xaxis,h.yaxis,h.zaxis);return a};l.listIds=function(a,e){a=a._fullLayout;if(!a)return[];a=a._subplots;return e?a[e+"axis"]:a.xaxis.concat(a.yaxis)};
l.getFromId=function(a,e,f){a=a._fullLayout;"x"===f?e=e.replace(/y[0-9]*/,""):"y"===f&&(e=e.replace(/x[0-9]*/,""));return a[l.id2name(e)]};l.getFromTrace=function(a,e,f){var b=a._fullLayout,h=null;m.traceIs(e,"gl3d")?(a=e.scene,"scene"===a.substr(0,5)&&(h=b[a][f+"axis"])):h=l.getFromId(a,e[f+"axis"]||f);return h};l.idSort=function(a,e){var f=a.charAt(0),b=e.charAt(0);return f!==b?f>b?1:-1:+(a.substr(1)||1)-+(e.substr(1)||1)};l.getAxisGroup=function(a,e){a=a._axisMatchGroups;for(var f=0;f<a.length;f++)if(a[f][e])return"g"+
f;return e}},{"../../registry":829,"./constants":754}],752:[function(a,p,l){p.exports=function(a,k,h,e){if("category"===k.type){a=a.categoryarray;a=Array.isArray(a)&&0<a.length;var f;a&&(f="array");f=h("categoryorder",f);var b;"array"===f&&(b=h("categoryarray"));a||"array"!==f||(f=k.categoryorder="trace");if("trace"===f)k._initialCategories=[];else if("array"===f)k._initialCategories=b.slice();else{h=e.dataAttr||k._id.charAt(0);b={};var n;if(e.axData)a=e.axData;else for(a=[],n=0;n<e.data.length;n++){var m=
e.data[n];m[h+"axis"]===k._id&&a.push(m)}for(n=0;n<a.length;n++)for(m=a[n][h],e=0;e<m.length;e++){var l=m[e];null!==l&&void 0!==l&&(b[l]=1)}b=Object.keys(b).sort();"category ascending"===f?k._initialCategories=b:"category descending"===f&&(k._initialCategories=b.reverse())}}}},{}],753:[function(a,p,l){var m=a("fast-isnumeric"),k=a("../../lib"),h=a("../../constants/numerical").ONEDAY;l.dtick=function(a,f){var b="log"===f,e="date"===f,k="category"===f;f=e?h:1;if(!a)return f;if(m(a))return a=Number(a),
0>=a?f:k?Math.max(1,Math.round(a)):e?Math.max(.1,a):a;if("string"!==typeof a||!e&&!b)return f;k=a.charAt(0);var l=a.substr(1);l=m(l)?Number(l):0;return 0>=l||!(e&&"M"===k&&l===Math.round(l)||b&&"L"===k||b&&"D"===k&&(1===l||2===l))?f:a};l.tick0=function(a,f,b,h){if("date"===f)return k.cleanDate(a,k.dateTick0(b));if("D1"!==h&&"D2"!==h)return m(a)?Number(a):0}},{"../../constants/numerical":677,"../../lib":700,"fast-isnumeric":221}],754:[function(a,p,l){a=a("../../lib/regex").counter;p.exports={idRegex:{x:a("x"),
y:a("y")},attrRegex:a("[xy]axis"),xAxisMatch:a("xaxis"),yAxisMatch:a("yaxis"),AX_ID_PATTERN:/^[xyz][0-9]*$/,AX_NAME_PATTERN:/^[xyz]axis[0-9]*$/,SUBPLOT_PATTERN:/^x([0-9]*)y([0-9]*)$/,MINDRAG:8,MINSELECT:12,MINZOOM:20,DRAGGERSIZE:20,BENDPX:1.5,REDRAWDELAY:50,SELECTDELAY:100,SELECTID:"-select",DFLTRANGEX:[-1,6],DFLTRANGEY:[-1,4],traceLayerClasses:"heatmaplayer contourcarpetlayer contourlayer waterfalllayer barlayer carpetlayer violinlayer boxlayer ohlclayer scattercarpetlayer scatterlayer".split(" "),
layerValue2layerClass:{"above traces":"above","below traces":"below"}}},{"../../lib/regex":716}],755:[function(a,p,l){function m(a,b,d,e,h){var c="range"!==h,g=e[f(b)].type,k;h=[];for(k=0;k<d.length;k++){var n=d[k];if(n!==b){var m=e[f(n)];m.type===g&&(m.fixedrange?c&&m.anchor&&e[f(m.anchor)].fixedrange&&h.push(n):h.push(n))}}for(k=0;k<a.length;k++)if(a[k][b]){a=a[k];b=[];for(k=0;k<h.length;k++)n=h[k],a[n]||b.push(n);return{linkableAxes:b,thisGroup:a}}return{linkableAxes:h,thisGroup:null}}function k(a,
b,d,e,f){var c;if(null===b){b={};b[d]=1;var g=a.length;a.push(b)}else g=a.indexOf(b);var h=Object.keys(b);for(c=0;c<a.length;c++)if(d=a[c],c!==g&&d[e]){var k=d[e];for(c=0;c<h.length;c++)e=h[c],d[e]=k*f*b[e];a.splice(g,1);return}if(1!==f)for(c=0;c<h.length;c++)b[h[c]]*=f;b[e]=1}function h(a,b){var c=a._inputDomain,e=c[0]+(c[1]-c[0])*d[a.constraintoward];a.domain=a._input.domain=[e+(c[0]-e)/b,e+(c[1]-e)/b];a.setScale()}var e=a("../../lib"),f=a("./axis_ids").id2name,b=a("./scale_zoom"),n=a("./autorange").makePadFn,
q=a("./autorange").concatExtremes,r=a("../../constants/numerical").ALMOST_EQUAL,d=a("../../constants/alignment").FROM_BL;l.handleConstraintDefaults=function(a,b,d,f,h){var c=h._axisConstraintGroups,g=h._axisMatchGroups,n=b._id,l=n.charAt(0);l=((h._splomAxes||{})[l]||{})[n]||{};n=b._id;var p=n.charAt(0),t=d("constrain");e.coerce(a,b,{constraintoward:{valType:"enumerated",values:"x"===p?["left","center","right"]:["bottom","middle","top"],dflt:"x"===p?"center":"middle"}},"constraintoward");if((a.matches||
l.matches)&&!b.fixedrange){var r=m(g,n,f,h);var v=e.coerce(a,b,{matches:{valType:"enumerated",values:r.linkableAxes||[],dflt:l.matches}},"matches")}if(!v&&a.scaleanchor&&(!b.fixedrange||"domain"===t)){var q=m(c,n,f,h,t);var u=e.coerce(a,b,{scaleanchor:{valType:"enumerated",values:q.linkableAxes||[]}},"scaleanchor")}v?(delete b.constrain,k(g,r.thisGroup,n,v,1)):-1!==f.indexOf(a.matches)&&e.warn("ignored "+b._name+'.matches: "'+a.matches+'" to avoid either an infinite loop or because the target axis has fixed range.');
u?(a=d("scaleratio"),a||(a=b.scaleratio=1),k(c,q.thisGroup,n,u,a)):-1!==f.indexOf(a.scaleanchor)&&e.warn("ignored "+b._name+'.scaleanchor: "'+a.scaleanchor+'" to avoid either an infinite loop and possibly inconsistent scaleratios, or because the target axis has fixed range or this axis declares a *matches* constraint.')};l.enforce=function(a){var c=a._fullLayout,d=c._axisConstraintGroups||[],e,g,k,m;for(e=0;e<d.length;e++){var l=d[e],p=Object.keys(l),u=Infinity,w=0,x=Infinity,E={},H={},M=!1;for(g=
0;g<p.length;g++){var O=p[g];H[O]=k=c[f(O)];k._inputDomain?k.domain=k._inputDomain.slice():k._inputDomain=k.domain.slice();k._inputRange||(k._inputRange=k.range.slice());k.setScale();E[O]=m=Math.abs(k._m)/l[O];u=Math.min(u,m);"domain"!==k.constrain&&k._constraintShrinkable||(x=Math.min(x,m));delete k._constraintShrinkable;w=Math.max(w,m);"domain"===k.constrain&&(M=!0)}if(!(u>r*w)||M)for(g=0;g<p.length;g++)if(O=p[g],m=E[O],k=H[O],O=k.constrain,m!==x||"domain"===O)if(m/=x,"range"===O)b(k,m);else if(O=
k._inputDomain,l=(k.domain[1]-k.domain[0])/(O[1]-O[0]),u=(k.r2l(k.range[1])-k.r2l(k.range[0]))/(k.r2l(k._inputRange[1])-k.r2l(k._inputRange[0])),m/=l,1>m*u)k.domain=k._input.domain=O.slice(),b(k,m);else{1>u&&(k.range=k._input.range=k._inputRange.slice(),m*=u);if(k.autorange){O=k.r2l(k.range[0]);l=k.r2l(k.range[1]);var I=(O+l)/2;w=u=I;M=Math.abs(l-I);var Q=I-M*m*1.0001;I+=M*m*1.0001;var N=n(k);h(k,m);var L=Math.abs(k._m),R=q(a,k),z=R.min;R=R.max;var U;for(U=0;U<z.length;U++){var T=z[U].val-N(z[U])/
L;T>Q&&T<u&&(u=T)}for(U=0;U<R.length;U++)T=R[U].val+N(R[U])/L,T<I&&T>w&&(w=T);m/=(w-u)/(2*M);u=k.l2r(u);w=k.l2r(w);k.range=k._input.range=O<l?[u,w]:[w,u]}h(k,m)}}};l.clean=function(a,b){if(b._inputDomain){var c=!1,d=b._id;a=a._fullLayout._axisConstraintGroups;for(var e=0;e<a.length;e++)if(a[e][d]){c=!0;break}c&&"domain"===b.constrain||(b._input.domain=b.domain=b._inputDomain,delete b._inputDomain)}}},{"../../constants/alignment":672,"../../constants/numerical":677,"../../lib":700,"./autorange":747,
"./axis_ids":751,"./scale_zoom":764}],756:[function(a,p,l){function m(a,b,c,d){b=E.ensureSingle(a.draglayer,b,c,function(b){b.classed("drag",!0).style({fill:"transparent","stroke-width":0}).attr("data-subplot",a.id)});b.call(N,d);return b.node()}function k(a,b,c,d,e,f,g){a=m(a,"rect",b,c);A.select(a).call(O.setRect,d,e,f,g);return a}function h(a,b){for(var c=0;c<a.length;c++)if(!a[c].fixedrange)return b;return""}function e(a,b){var c=a.range[b];b=Math.abs(c-a.range[1-b]);if("date"===a.type)return c;
if("log"===a.type)return a=Math.ceil(Math.max(0,-Math.log(b)/Math.LN10))+3,A.format("."+a+"g")(Math.pow(10,c));a=Math.floor(Math.log(Math.abs(c))/Math.LN10)-Math.floor(Math.log(b)/Math.LN10)+4;return A.format("."+String(a)+"g")(c)}function f(a,b,c,d,e){for(var g=0;g<a.length;g++){var h=a[g];if(!h.fixedrange){var k=h._rl[0],n=h._rl[1]-k;h.range=[h.l2r(k+n*b),h.l2r(k+n*c)];d[h._name+".range[0]"]=h.range[0];d[h._name+".range[1]"]=h.range[1]}}e&&e.length&&(a=(b+(1-c))/2,f(e,a,1-a,d,[],[]))}function b(a,
b){for(var c=0;c<a.length;c++){var d=a[c];d.fixedrange||(d.range=[d.l2r(d._rl[0]-b/d._m),d.l2r(d._rl[1]-b/d._m)])}}function n(a,b,c){return a?"nsew"===a?c?"":"pan"===b?"move":"crosshair":a.toLowerCase()+"-resize":"pointer"}function q(a,b,c,d,e){return a.append("path").attr("class","zoombox").style({fill:.2<b?"rgba(0,0,0,0)":"rgba(255,255,255,0)","stroke-width":0}).attr("transform","translate("+c+", "+d+")").attr("d",e+"Z")}function r(a,b,c){return a.append("path").attr("class","zoombox-corners").style({fill:M.background,
stroke:M.defaultLine,"stroke-width":1,opacity:0}).attr("transform","translate("+b+", "+c+")").attr("d","M0,0Z")}function d(a,b,c,d,e,f){a.attr("d",d+"M"+c.l+","+c.t+"v"+c.h+"h"+c.w+"v-"+c.h+"h-"+c.w+"Z");g(a,b,e,f)}function g(a,b,c,d){c||(a.transition().style("fill",.2<d?"rgba(0,0,0,0.4)":"rgba(255,255,255,0.3)").duration(200),b.transition().style("opacity",1).duration(200))}function c(a){A.select(a).selectAll(".zoombox,.js-zoombox-backdrop,.js-zoombox-menu,.zoombox-corners").remove()}function v(a){ba&&
a.data&&a._context.showTips&&(E.notifier(E._(a,"Double-click to zoom back out"),"long"),ba=!1)}function t(a){return"lasso"===a||"select"===a}function y(a){var b=Math.floor(Math.min(a.b-a.t,a.r-a.l,ea)/2);return"M"+(a.l-3.5)+","+(a.t-.5+b)+"h3v"+-b+"h"+b+"v-3h-"+(b+3)+"ZM"+(a.r+3.5)+","+(a.t-.5+b)+"h-3v"+-b+"h"+-b+"v-3h"+(b+3)+"ZM"+(a.r+3.5)+","+(a.b+.5-b)+"h-3v"+b+"h"+-b+"v3h"+(b+3)+"ZM"+(a.l-3.5)+","+(a.b+.5-b)+"h3v"+b+"h"+b+"v3h-"+(b+3)+"Z"}function B(a,b,c,d){for(var e=!1,f={},g={},h,k,n,m,l=0;l<
b.length;l++){var p=b[l];for(h in c)if(p[h]){for(n in p)("x"===n.charAt(0)?c:d)[n]||(f[n]=h);for(k in d)p[k]&&(e=!0)}for(k in d)if(p[k])for(m in p)("x"===m.charAt(0)?c:d)[m]||(g[m]=k)}e&&(E.extendFlat(f,g),g={});b={};c=[];for(n in f)d=Y(a,n),c.push(d),b[d._id]=d;n={};d=[];for(m in g)h=Y(a,m),d.push(h),n[h._id]=h;return{xaHash:b,yaHash:n,xaxes:c,yaxes:d,xLinks:f,yLinks:g,isSubplotConstrained:e}}function w(a,b){if(P){var c=void 0!==a.onwheel?"wheel":"mousewheel";a._onwheel&&a.removeEventListener(c,
a._onwheel);a._onwheel=b;a.addEventListener(c,b,{passive:!1})}else void 0!==a.onwheel?a.onwheel=b:void 0!==a.onmousewheel&&(a.onmousewheel=b)}function x(a){var b=[],c;for(c in a)b.push(a[c]);return b}var A=a("d3"),C=a("tinycolor2"),P=a("has-passive-events"),J=a("../../registry"),E=a("../../lib"),H=a("../../lib/svg_text_utils"),M=a("../../components/color"),O=a("../../components/drawing"),I=a("../../components/fx"),Q=a("./axes"),N=a("../../lib/setcursor"),L=a("../../components/dragelement"),R=a("../../constants/alignment").FROM_TL,
z=a("../../lib/clear_gl_canvases"),U=a("../../plot_api/subroutines").redrawReglTraces,T=a("../plots"),Y=a("./axis_ids").getFromId,F=a("./select").prepSelect,S=a("./select").clearSelect,W=a("./select").selectOnClick,fa=a("./scale_zoom"),qa=a("./constants"),ha=qa.MINDRAG,ea=qa.MINZOOM,ba=!0;p.exports={makeDragBox:function(a,g,m,l,p,u,D,G){function N(){Pa=g.xaxis;Ba=g.yaxis;Ta=Pa._length;Wa=Ba._length;Cb=Pa._offset;eb=Ba._offset;Ia={};Ia[Pa._id]=Pa;Ka={};Ka[Ba._id]=Ba;if(D&&G)for(var b=g.overlays,c=
0;c<b.length;c++){var d=b[c].xaxis;Ia[d._id]=d;d=b[c].yaxis;Ka[d._id]=d}Ua=x(Ia);Ya=x(Ka);mb=h(Ua,G);cb=h(Ya,D);Hb=!cb&&!mb;$a=B(a,a._fullLayout._axisConstraintGroups,Ia,Ka);rb=B(a,a._fullLayout._axisMatchGroups,Ia,Ka);pb=G||$a.isSubplotConstrained||rb.isSubplotConstrained;Ra=D||$a.isSubplotConstrained||rb.isSubplotConstrained;b=a._fullLayout;Jb=b._has("scattergl");nb=b._has("splom");kc=b._has("svg")}function P(b,d){var f=a._fullLayout.clickmode;c(a);2!==b||X||la();if(za)-1<f.indexOf("select")&&W(d,
a,Ua,Ya,g.id,Oa),-1<f.indexOf("event")&&I.click(a,d,g.id);else if(1===b&&X){var h=D?Ba:Pa;b="s"===D||"w"===G?0:1;var k=h._name+".range["+b+"]";b=e(h,b);d="left";f="middle";if(!h.fixedrange&&(D?(f="n"===D?"top":"bottom","right"===h.side&&(d="right")):"e"===G&&(d="right"),a._context.showAxisRangeEntryBoxes))A.select(Kb).call(H.makeEditable,{gd:a,immediate:!0,background:a._fullLayout.paper_bgcolor,text:String(b),fill:h.tickfont?h.tickfont.color:"#444",horizontalAlign:d,verticalAlign:f}).on("edit",function(b){b=
h.d2r(b);void 0!==b&&J.call("_guiRelayout",a,k,b)})}}function M(b,c){function e(){Mb="";Xa.r=Xa.l;Xa.t=Xa.b;Nb.attr("d","M0,0Z")}if(a._transitioningWithDuration)return!1;b=Math.max(0,Math.min(Ta,b+Va));c=Math.max(0,Math.min(Wa,c+Ha));var f=Math.abs(b-Va),g=Math.abs(c-Ha);Xa.l=Math.min(Va,b);Xa.r=Math.max(Va,b);Xa.t=Math.min(Ha,c);Xa.b=Math.max(Ha,c);$a.isSubplotConstrained?f>ea||g>ea?(Mb="xy",f/Ta>g/Wa?(g=f*Wa/Ta,Ha>c?Xa.t=Ha-g:Xa.b=Ha+g):(f=g*Ta/Wa,Va>b?Xa.l=Va-f:Xa.r=Va+f),Nb.attr("d",y(Xa))):e():
rb.isSubplotConstrained?f>ea||g>ea?(Mb="xy",b=Math.min(Xa.l/Ta,(Wa-Xa.b)/Wa),c=Math.max(Xa.r/Ta,(Wa-Xa.t)/Wa),Xa.l=b*Ta,Xa.r=c*Ta,Xa.b=(1-b)*Wa,Xa.t=(1-c)*Wa,Nb.attr("d",y(Xa))):e():!cb||g<Math.min(Math.max(.6*f,ha),ea)?f<ha||!mb?e():(Xa.t=0,Xa.b=Wa,Mb="x",Nb.attr("d","M"+(Xa.l-.5)+","+(Ha-ea-.5)+"h-3v"+(2*ea+1)+"h3ZM"+(Xa.r+.5)+","+(Ha-ea-.5)+"h3v"+(2*ea+1)+"h-3Z")):!mb||f<Math.min(.6*g,ea)?(Xa.l=0,Xa.r=Ta,Mb="y",Nb.attr("d","M"+(Va-ea-.5)+","+(Xa.t-.5)+"v-3h"+(2*ea+1)+"v3ZM"+(Va-ea-.5)+","+(Xa.b+
.5)+"v3h"+(2*ea+1)+"v-3Z")):(Mb="xy",Nb.attr("d",y(Xa)));Xa.w=Xa.r-Xa.l;Xa.h=Xa.b-Xa.t;Mb&&(Qc=!0);a._dragged=Qc;d(vb,Nb,Xa,oc,Sb,sc);Sb=!0}function ca(){kb={};if(Math.min(Xa.h,Xa.w)<2*ha)return c(a);if("xy"===Mb||"x"===Mb)f(Ua,Xa.l/Ta,Xa.r/Ta,kb,$a.xaxes),Z("x",kb);if("xy"===Mb||"y"===Mb)f(Ya,(Wa-Xa.b)/Wa,(Wa-Xa.t)/Wa,kb,$a.yaxes),Z("y",kb);c(a);K();v(a)}function ia(b){function c(a,b,c){if(!a.fixedrange){var d=E.simpleMap(a.range,a.r2l),e=d[0]+(d[1]-d[0])*b;a.range=d.map(function(b){return a.l2r(e+
(b-e)*c)})}}if(a._context._scrollZoom.cartesian||a._fullLayout._enablescrollzoom)if(Oa.plotinfo.selection=!1,S(ua),a._transitioningWithDuration)b.preventDefault(),b.stopPropagation();else{N();clearTimeout(fd);var d=-b.deltaY;isFinite(d)||(d=b.wheelDelta/10);if(isFinite(d)){d=Math.exp(-Math.min(Math.max(d,-20),20)/200);var e=Eb.draglayer.select(".nsewdrag").node().getBoundingClientRect(),f=(b.clientX-e.left)/e.width;e=(e.bottom-b.clientY)/e.height;var g;if(pb){G||(f=.5);for(g=0;g<Ua.length;g++)c(Ua[g],
f,d);Z("x");Tb[2]*=d;Tb[0]+=Tb[2]*f*(1/d-1)}if(Ra){D||(e=.5);for(g=0;g<Ya.length;g++)c(Ya[g],e,d);Z("y");Tb[3]*=d;Tb[1]+=Tb[3]*(1-e)*(1/d-1)}pa(Tb);ba();fd=setTimeout(function(){Tb=[0,0,Ta,Wa];K()},Rd);b.preventDefault()}else E.log("Did not find wheel motion attributes: ",b)}}function da(c,d){function e(a,b,c){for(var d=1-b,e,f,g=0;g<a.length;g++){var h=a[g];if(!h.fixedrange){e=h;f=c/h._length;f=h._rl[d]+(h._rl[b]-h._rl[d])/(1-(0<=f?Math.min(f,.9):1/(1/Math.max(f,-.3)+3.222)));var k=h.l2r(f);!1!==
k&&void 0!==k&&(h.range[b]=k)}}return e._length*(e._rl[b]-f)/(e._rl[b]-e._rl[d])}if(!a._transitioningWithDuration){a._fullLayout._replotting=!0;if("ew"===mb||"ns"===cb)mb&&(b(Ua,c),Z("x")),cb&&(b(Ya,d),Z("y")),pa([mb?-c:0,cb?-d:0,Ta,Wa]);else{if($a.isSubplotConstrained&&mb&&cb){var f="w"===mb===("n"===cb)?1:-1;d=(c/Ta+f*d/Wa)/2;c=d*Ta;d=f*d*Wa}"w"===mb?c=e(Ua,0,c):"e"===mb?c=e(Ua,1,-c):mb||(c=0);"n"===cb?d=e(Ya,1,d):"s"===cb?d=e(Ya,0,-d):cb||(d=0);f="w"===mb?c:0;var g="n"===cb?d:0;if($a.isSubplotConstrained){var h;
if(!mb&&1===cb.length){for(h=0;h<Ua.length;h++)Ua[h].range=Ua[h]._r.slice(),fa(Ua[h],1-d/Wa);c=d*Ta/Wa;f=c/2}if(!cb&&1===mb.length){for(h=0;h<Ya.length;h++)Ya[h].range=Ya[h]._r.slice(),fa(Ya[h],1-c/Ta);d=c*Wa/Ta;g=d/2}}Z("x");Z("y");pa([f,g,Ta-c,Wa-d])}ba()}}function Z(a,b){var c=rb.isSubplotConstrained?{x:Ya,y:Ua}[a]:rb[a+"axes"];a=rb.isSubplotConstrained?{x:Ua,y:Ya}[a]:[];for(var d=0;d<c.length;d++){var e=c[d],f=e._id;f=rb.xLinks[f]||rb.yLinks[f];if(f=a[0]||Ia[f]||Ka[f])f=f.range,b?(b[e._name+".range[0]"]=
f[0],b[e._name+".range[1]"]=f[1]):e.range=f}}function ba(){function b(a){for(d=0;d<a.length;d++)a[d].fixedrange||c.push(a[d]._id)}var c=[],d;pb&&(b(Ua),b($a.xaxes),b(rb.xaxes));Ra&&(b(Ya),b($a.yaxes),b(rb.yaxes));kb={};for(d=0;d<c.length;d++){var e=Y(a,c[d]);Q.drawOne(a,e,{skipTitle:!0});kb[e._name+".range[0]"]=e.range[0];kb[e._name+".range[1]"]=e.range[1]}Q.redrawComponents(a,c)}function la(){if(!a._transitioningWithDuration){var b=a._context.doubleClick,c=[];mb&&(c=c.concat(Ua));cb&&(c=c.concat(Ya));
rb.xaxes&&(c=c.concat(rb.xaxes));rb.yaxes&&(c=c.concat(rb.yaxes));var d={},e;if("reset+autosize"===b)for(b="autosize",e=0;e<c.length;e++){var f=c[e];if(f._rangeInitial&&(f.range[0]!==f._rangeInitial[0]||f.range[1]!==f._rangeInitial[1])||!f._rangeInitial&&!f.autorange){b="reset";break}}if("autosize"===b)for(e=0;e<c.length;e++)f=c[e],f.fixedrange||(d[f._name+".autorange"]=!0);else if("reset"===b){if(mb||$a.isSubplotConstrained)c=c.concat($a.xaxes);cb&&!$a.isSubplotConstrained&&(c=c.concat($a.yaxes));
$a.isSubplotConstrained&&(mb?cb||(c=c.concat(Ya)):c=c.concat(Ua));for(e=0;e<c.length;e++)f=c[e],f.fixedrange||(f._rangeInitial?(b=f._rangeInitial,d[f._name+".range[0]"]=b[0],d[f._name+".range[1]"]=b[1]):d[f._name+".autorange"]=!0)}a.emit("plotly_doubleclick",null);J.call("_guiRelayout",a,d)}}function K(){pa([0,0,Ta,Wa]);E.syncOrAsync([T.previousPromises,function(){a._fullLayout._replotting=!1;J.call("_guiRelayout",a,kb)}],a)}function pa(b){var c=a._fullLayout,d=c._plots;c=c._subplots.cartesian;var e;
nb&&J.subplotsRegistry.splom.drag(a);if(Jb)for(e=0;e<c.length;e++){var f=d[c[e]];var g=f.xaxis;var h=f.yaxis;if(f._scene){var k=E.simpleMap(g.range,g.r2l);h=E.simpleMap(h.range,h.r2l);f._scene.update({range:[k[0],h[0],k[1],h[1]]})}}if(nb||Jb)z(a),U(a);if(kc){k=b[2]/Pa._length;var n=b[3]/Ba._length;for(e=0;e<c.length;e++){f=d[c[e]];g=f.xaxis;h=f.yaxis;var m=Ra&&!h.fixedrange&&Ka[h._id];if(pb&&!g.fixedrange&&Ia[g._id]){var l=k;var p=G?b[0]:xa(g,l)}else rb.xaHash[g._id]?(l=k,p=b[0]*g._length/Pa._length):
rb.yaHash[g._id]?(l=n,p="ns"===cb?-b[1]*g._length/Ba._length:xa(g,l,{n:"top",s:"bottom"}[cb])):(l=ja(g,k,n),p=ya(g,l));if(m){m=n;var r=D?b[1]:xa(h,m)}else rb.yaHash[h._id]?(m=n,r=b[1]*h._length/Ba._length):rb.xaHash[h._id]?(m=k,r="ew"===mb?-b[0]*h._length/Pa._length:xa(h,m,{e:"right",w:"left"}[mb])):(m=ja(h,k,n),r=ya(h,m));if(l||m){l||(l=1);m||(m=1);g=g._offset-p/l;h=h._offset-r/m;f.clipRect.call(O.setTranslate,p,r).call(O.setScale,l,m);f.plot.call(O.setTranslate,g,h).call(O.setScale,1/l,1/m);if(l!==
f.xScaleFactor||m!==f.yScaleFactor)O.setPointGroupScale(f.zoomScalePts,l,m),O.setTextPointsScale(f.zoomScaleTxt,l,m);O.hideOutsideRangePoints(f.clipOnAxisFalseTraces,f);f.xScaleFactor=l;f.yScaleFactor=m}}}}function ja(a,b,c){return a.fixedrange?0:pb&&$a.xaHash[a._id]?b:Ra&&($a.isSubplotConstrained?$a.xaHash:$a.yaHash)[a._id]?c:0}function ya(a,b){return b?(a.range=a._r.slice(),fa(a,b),xa(a,b)):0}function xa(a,b,c){return a._length*(1-b)*R[c||a.constraintoward||"middle"]}var ua=a._fullLayout._zoomlayer,
za="nsew"===D+G,X=1===(D+G).length,Pa,Ba,Ia,Ka,Ua,Ya,Cb,eb,Ta,Wa,$a,rb,mb,cb,Hb,pb,Ra,Jb,nb,kc,kb;N();var Db=n(cb+mb,a._fullLayout.dragmode,za),Kb=k(g,D+G+"drag",Db,m,l,p,u);if(Hb&&!za)return Kb.onmousedown=null,Kb.style.pointerEvents="none",Kb;var Oa={element:Kb,gd:a,plotinfo:g,prepFn:function(b,c,d){var e=Oa.dragmode,f=a._fullLayout.dragmode;f!==e&&(Oa.dragmode=f);N();Hb||(za?b.shiftKey?"pan"===f?f="zoom":t(f)||(f="pan"):b.ctrlKey&&(f="pan"):f="pan");Oa.minDrag="lasso"===f?1:void 0;t(f)?(Oa.xaxes=
Ua,Oa.yaxes=Ya,F(b,c,d,Oa,f)):(Oa.clickFn=P,t(e)&&(Oa.plotinfo.selection=!1,S(ua)),Hb||("zoom"===f?(Oa.moveFn=M,Oa.doneFn=ca,Oa.minDrag=1,b=Kb.getBoundingClientRect(),Va=c-b.left,Ha=d-b.top,Xa={l:Va,r:Va,w:0,t:Ha,b:Ha,h:0},sc=a._hmpixcount?a._hmlumcount/a._hmpixcount:C(a._fullLayout.plot_bgcolor).getLuminance(),oc="M0,0H"+Ta+"V"+Wa+"H0V0",Sb=!1,Mb="xy",Qc=!1,vb=q(ua,sc,Cb,eb,oc),Nb=r(ua,Cb,eb)):"pan"===f&&(Oa.moveFn=da,Oa.doneFn=K)))}};L.init(Oa);var Va,Ha,Xa,sc,oc,Sb,Mb,vb,Nb,Qc,Tb=[0,0,Ta,Wa],fd=
null,Rd=qa.REDRAWDELAY,Eb=g.mainplot?a._fullLayout._plots[g.mainplot]:g;1!==D.length*G.length&&w(Kb,ia);return Kb},makeDragger:m,makeRectDragger:k,makeZoombox:q,makeCorners:r,updateZoombox:d,xyCorners:y,transitionZoombox:g,removeZoombox:c,showDoubleClickNotifier:v,attachWheelEventHandler:w}},{"../../components/color":577,"../../components/dragelement":595,"../../components/drawing":598,"../../components/fx":616,"../../constants/alignment":672,"../../lib":700,"../../lib/clear_gl_canvases":685,"../../lib/setcursor":720,
"../../lib/svg_text_utils":724,"../../plot_api/subroutines":739,"../../registry":829,"../plots":810,"./axes":748,"./axis_ids":751,"./constants":754,"./scale_zoom":764,"./select":765,d3:154,"has-passive-events":403,tinycolor2:521}],757:[function(a,p,l){var m=a("d3"),k=a("../../components/fx"),h=a("../../components/dragelement"),e=a("../../lib/setcursor"),f=a("./dragbox").makeDragBox,b=a("./constants").DRAGGERSIZE;l.initInteractions=function(a){var e=a._fullLayout;if(a._context.staticPlot)m.select(a).selectAll(".drag").remove();
else if(e._has("cartesian")||e._has("splom")){Object.keys(e._plots||{}).sort(function(a,b){return(e._plots[a].mainplot&&!0)===(e._plots[b].mainplot&&!0)?(a=a.split("y"),b=b.split("y"),a[0]===b[0]?Number(a[1]||1)-Number(b[1]||1):Number(a[0]||1)-Number(b[0]||1)):e._plots[a].mainplot?1:-1}).forEach(function(d){var g=e._plots[d],c=g.xaxis,n=g.yaxis;if(!g.mainplot){var m=f(a,g,c._offset,n._offset,c._length,n._length,"ns","ew");m.onmousemove=function(b){a._fullLayout._rehover=function(){a._fullLayout._hoversubplot===
d&&k.hover(a,b,d)};k.hover(a,b,d);a._fullLayout._lasthover=m;a._fullLayout._hoversubplot=d};m.onmouseout=function(b){a._dragging||(a._fullLayout._hoversubplot=null,h.unhover(a,b))};a._context.showAxisDragHandles&&(f(a,g,c._offset-b,n._offset-b,b,b,"n","w"),f(a,g,c._offset+c._length,n._offset-b,b,b,"n","e"),f(a,g,c._offset-b,n._offset+n._length,b,b,"s","w"),f(a,g,c._offset+c._length,n._offset+n._length,b,b,"s","e"))}if(a._context.showAxisDragHandles){if(d===c._mainSubplot){var l=c._mainLinePosition;
"top"===c.side&&(l-=b);f(a,g,c._offset+.1*c._length,l,.8*c._length,b,"","ew");f(a,g,c._offset,l,.1*c._length,b,"","w");f(a,g,c._offset+.9*c._length,l,.1*c._length,b,"","e")}d===n._mainSubplot&&(c=n._mainLinePosition,"right"!==n.side&&(c-=b),f(a,g,c,n._offset+.1*n._length,b,.8*n._length,"ns",""),f(a,g,c,n._offset+.9*n._length,b,.1*n._length,"s",""),f(a,g,c,n._offset,b,.1*n._length,"n",""))}});var n=e._hoverlayer.node();n.onmousemove=function(b){b.target=a._fullLayout._lasthover;k.hover(a,b,e._hoversubplot)};
n.onclick=function(b){b.target=a._fullLayout._lasthover;k.click(a,b)};n.onmousedown=function(b){a._fullLayout._lasthover.onmousedown(b)};l.updateFx(a)}};l.updateFx=function(a){a=a._fullLayout;e(a._draggers,"pan"===a.dragmode?"move":"crosshair")}},{"../../components/dragelement":595,"../../components/fx":616,"../../lib/setcursor":720,"./constants":754,"./dragbox":756,d3:154}],758:[function(a,p,l){var m=a("../../registry"),k=a("../../lib");p.exports=function(a){return function(e,f){e=e[a];if(Array.isArray(e)){var b=
m.subplotsRegistry.cartesian,h=b.idRegex,l=f._subplots,p=l.xaxis,d=l.yaxis;l=l.cartesian;for(var g=f._has("cartesian")||f._has("gl2d"),c=0;c<e.length;c++){var v=e[c];if(k.isPlainObject(v)){var t=v.xref;v=v.yref;var q=h.x.test(t),B=h.y.test(v);if(q||B){g||k.pushUnique(f._basePlotModules,b);var w=!1;q&&-1===p.indexOf(t)&&(p.push(t),w=!0);B&&-1===d.indexOf(v)&&(d.push(v),w=!0);w&&q&&B&&l.push(t+v)}}}}}}},{"../../lib":700,"../../registry":829}],759:[function(a,p,l){function m(a,b,c){return r.ensureSingle(a,
b,c,function(a){a.datum(c)})}function k(a,b,d,e,f){for(var h=t.traceLayerClasses,k=a._fullLayout,m=k._modules,l,p,r=[],v=[],u=0;u<m.length;u++){l=m[u];p=l.name;var y=q.modules[p].categories;if(y.svg){var A=l.layerName||p+"layer";l=l.plot;d=c(d,l);p=d[0];d=d[1];p.length&&r.push({i:h.indexOf(A),className:A,plotMethod:l,cdModule:p});y.zoomScale&&v.push("."+A)}}r.sort(function(a,b){return a.i-b.i});h=b.plot.selectAll("g.mlayer").data(r,function(a){return a.className});h.enter().append("g").attr("class",
function(a){return a.className}).classed("mlayer",!0);h.exit().remove();h.order();h.each(function(c){var d=n.select(this),h=c.className;c.plotMethod(a,b,c.cdModule,d,e,f);"scatterlayer"!==h&&"barlayer"!==h&&"waterfalllayer"!==h&&g.setClipUrl(d,b.layerClipId,a)});k._has("scattergl")&&(l=q.getModule("scattergl"),p=c(d,l)[0],l.plot(a,b,p));a._context.staticPlot||(b._hasClipOnAxisFalse&&(b.clipOnAxisFalseTraces=b.plot.selectAll(".scatterlayer, .barlayer, .waterfalllayer").selectAll(".trace")),v.length&&
(k=b.plot.selectAll(v.join(",")).selectAll(".trace"),b.zoomScalePts=k.selectAll("path.point"),b.zoomScaleTxt=k.selectAll(".textpoint")))}function h(a){a=a._fullLayout;var b=a._subplots.cartesian,c=b.length,d,e=[],f=[];for(d=0;d<c;d++){var g=b[d];var h=a._plots[g];var k=h.xaxis;var n=h.yaxis;k=k._mainAxis._id+n._mainAxis._id;n=a._plots[k];h.overlays=[];k!==g&&n?(h.mainplot=k,h.mainplotinfo=n,f.push(g)):(h.mainplot=void 0,h.mainPlotinfo=void 0,e.push(g))}for(d=0;d<f.length;d++)g=f[d],h=a._plots[g],
h.mainplotinfo.overlays.push(h);b=e.concat(f);e=Array(c);for(d=0;d<c;d++){g=b[d];h=a._plots[g];k=h.xaxis;n=h.yaxis;k=[g,k.layer,n.layer,k.overlaying||"",n.overlaying||""];for(g=0;g<h.overlays.length;g++)k.push(h.overlays[g].id);e[d]=k}return e}function e(a,b){var c=b.plotgroup,d=b.id,e=t.layerValue2layerClass[b.xaxis.layer],f=t.layerValue2layerClass[b.yaxis.layer];a=a._fullLayout._hasOnlyLargeSploms;if(b.mainplot){c=b.mainplotinfo;var g=c.plotgroup,h=d+"-x",k=d+"-y";b.gridlayer=c.gridlayer;b.zerolinelayer=
c.zerolinelayer;B(c.overlinesBelow,"path",h);B(c.overlinesBelow,"path",k);B(c.overaxesBelow,"g",h);B(c.overaxesBelow,"g",k);b.plot=B(c.overplot,"g",d);B(c.overlinesAbove,"path",h);B(c.overlinesAbove,"path",k);B(c.overaxesAbove,"g",h);B(c.overaxesAbove,"g",k);b.xlines=g.select(".overlines-"+e).select("."+h);b.ylines=g.select(".overlines-"+f).select("."+k);b.xaxislayer=g.select(".overaxes-"+e).select("."+h);b.yaxislayer=g.select(".overaxes-"+f).select("."+k)}else a?(b.xlines=B(c,"path","xlines-above"),
b.ylines=B(c,"path","ylines-above"),b.xaxislayer=B(c,"g","xaxislayer-above"),b.yaxislayer=B(c,"g","yaxislayer-above")):(d=B(c,"g","layer-subplot"),b.shapelayer=B(d,"g","shapelayer"),b.imagelayer=B(d,"g","imagelayer"),b.gridlayer=B(c,"g","gridlayer"),b.zerolinelayer=B(c,"g","zerolinelayer"),B(c,"path","xlines-below"),B(c,"path","ylines-below"),b.overlinesBelow=B(c,"g","overlines-below"),B(c,"g","xaxislayer-below"),B(c,"g","yaxislayer-below"),b.overaxesBelow=B(c,"g","overaxes-below"),b.plot=B(c,"g",
"plot"),b.overplot=B(c,"g","overplot"),b.xlines=B(c,"path","xlines-above"),b.ylines=B(c,"path","ylines-above"),b.overlinesAbove=B(c,"g","overlines-above"),B(c,"g","xaxislayer-above"),B(c,"g","yaxislayer-above"),b.overaxesAbove=B(c,"g","overaxes-above"),b.xlines=c.select(".xlines-"+e),b.ylines=c.select(".ylines-"+f),b.xaxislayer=c.select(".xaxislayer-"+e),b.yaxislayer=c.select(".yaxislayer-"+f));a||(m(b.gridlayer,"g",b.xaxis._id),m(b.gridlayer,"g",b.yaxis._id),b.gridlayer.selectAll("g").map(function(a){return a[0]}).sort(v.idSort));
b.xlines.style("fill","none").classed("crisp",!0);b.ylines.style("fill","none").classed("crisp",!0)}function f(a,c){if(a){var d={};a.each(function(a){a=a[0];n.select(this).remove();b(a,c);d[a]=!0});for(var e in c._plots){a=c._plots[e].overlays||[];for(var f=0;f<a.length;f++){var g=a[f];d[g.id]&&g.plot.selectAll(".trace").remove()}}}}function b(a,b){b._draggers.selectAll("g."+a).remove();b._defs.select("#clip"+b._uid+a+"plot").remove()}var n=a("d3"),q=a("../../registry"),r=a("../../lib"),d=a("../plots"),
g=a("../../components/drawing"),c=a("../get_data").getModuleCalcData,v=a("./axis_ids"),t=a("./constants"),y=a("../../constants/xmlns_namespaces"),B=r.ensureSingle;l.name="cartesian";l.attr=["xaxis","yaxis"];l.idRoot=["x","y"];l.idRegex=t.idRegex;l.attrRegex=t.attrRegex;l.attributes=a("./attributes");l.layoutAttributes=a("./layout_attributes");l.supplyLayoutDefaults=a("./layout_defaults");l.transitionAxes=a("./transition_axes");l.finalizeSubplots=function(a,b){var c=b._subplots;b=c.xaxis;var d=c.yaxis,
e=c.cartesian;c=e.concat(c.gl2d||[]);var f={},g={},h;for(h=0;h<c.length;h++){var k=c[h].split("y");f[k[0]]=1;g["y"+k[1]]=1}for(h=0;h<b.length;h++)if(k=b[h],!f[k]){var n=(a[v.id2name(k)]||{}).anchor;t.idRegex.y.test(n)||(n="y");e.push(k+n);c.push(k+n);g[n]||(g[n]=1,r.pushUnique(d,n))}for(h=0;h<d.length;h++)n=d[h],g[n]||(k=(a[v.id2name(n)]||{}).anchor,t.idRegex.x.test(k)||(k="x"),e.push(k+n),c.push(k+n),f[k]||(f[k]=1,r.pushUnique(b,k)));if(!c.length){n=k="";for(var m in a)if(t.attrRegex.test(m))if("x"===
m.charAt(0)){if(!k||+m.substr(5)<+k.substr(5))k=m}else if(!n||+m.substr(5)<+n.substr(5))n=m;k=k?v.name2id(k):"x";n=n?v.name2id(n):"y";b.push(k);d.push(n);e.push(k+n)}};l.plot=function(a,b,c,d){var e=a._fullLayout,f=e._subplots.cartesian,g=a.calcdata,h;if(null!==b){if(!Array.isArray(b))for(b=[],h=0;h<g.length;h++)b.push(h);for(h=0;h<f.length;h++){for(var n=f[h],m=e._plots[n],l=[],p,r=0;r<g.length;r++){var t=g[r],v=t[0].trace;if(v.xaxis+v.yaxis===n){if(-1!==b.indexOf(v.index)||v.carpet)p&&p[0].trace.xaxis+
p[0].trace.yaxis===n&&-1!==["tonextx","tonexty","tonext"].indexOf(v.fill)&&-1===l.indexOf(p)&&l.push(p),l.push(t);p=t}}k(a,m,l,c,d)}}};l.clean=function(a,c,d,e){var g=e._plots||{};a=c._plots||{};d=e._subplots||{};var h;if(e._hasOnlyLargeSploms&&!c._hasOnlyLargeSploms)for(h in g){var k=g[h];k.plotgroup&&k.plotgroup.remove()}k=e._has&&e._has("gl");var n=c._has&&c._has("gl");if(k&&!n)for(h in g)k=g[h],k._scene&&k._scene.destroy();if(d.xaxis&&d.yaxis)for(g=v.listIds({_fullLayout:e}),h=0;h<g.length;h++)k=
g[h],c[v.id2name(k)]||e._infolayer.selectAll(".g-"+k+"title").remove();h=e._has&&e._has("cartesian");c=c._has&&c._has("cartesian");if(h&&!c)f(e._cartesianlayer.selectAll(".subplot"),e),e._defs.selectAll(".axesclip").remove(),delete e._axisConstraintGroups;else if(d.cartesian)for(h=0;h<d.cartesian.length;h++)c=d.cartesian[h],a[c]||(e._cartesianlayer.selectAll("."+c+",."+c+"-x,."+c+"-y").remove(),b(c,e))};l.drawFramework=function(a){var b=a._fullLayout,c=h(a);c=b._cartesianlayer.selectAll(".subplot").data(c,
String);c.enter().append("g").attr("class",function(a){return"subplot "+a[0]});c.order();c.exit().call(f,b);c.each(function(c){c=c[0];var d=b._plots[c];d.plotgroup=n.select(this);e(a,d);d.draglayer=B(b._draggers,"g",c)})};l.rangePlot=function(a,b,c){e(a,b);k(a,b,c);d.style(a)};l.toSVG=function(a){var b=a._fullLayout._glimages,c=n.select(a).selectAll(".svg-container");c.filter(function(a,b){return b===c.size()-1}).selectAll(".gl-canvas-context, .gl-canvas-focus").each(function(){var a=this.toDataURL("image/png");
b.append("svg:image").attr({xmlns:y.svg,"xlink:href":a,preserveAspectRatio:"none",x:0,y:0,width:this.width,height:this.height})})};l.updateFx=a("./graph_interact").updateFx},{"../../components/drawing":598,"../../constants/xmlns_namespaces":678,"../../lib":700,"../../registry":829,"../get_data":784,"../plots":810,"./attributes":746,"./axis_ids":751,"./constants":754,"./graph_interact":757,"./layout_attributes":760,"./layout_defaults":761,"./transition_axes":770,d3:154}],760:[function(a,p,l){l=a("../font_attributes");
var m=a("../../components/color/attributes"),k=a("../../components/drawing/attributes").dash,h=a("../../lib/extend").extendFlat,e=a("../../plot_api/plot_template").templatedArray;a=a("./constants");p.exports={visible:{valType:"boolean",editType:"plot"},color:{valType:"color",dflt:m.defaultLine,editType:"ticks"},title:{text:{valType:"string",editType:"ticks"},font:l({editType:"ticks"}),editType:"ticks"},type:{valType:"enumerated",values:"- linear log date category multicategory".split(" "),dflt:"-",
editType:"calc",_noTemplating:!0},autorange:{valType:"enumerated",values:[!0,!1,"reversed"],dflt:!0,editType:"axrange",impliedEdits:{"range[0]":void 0,"range[1]":void 0}},rangemode:{valType:"enumerated",values:["normal","tozero","nonnegative"],dflt:"normal",editType:"plot"},range:{valType:"info_array",items:[{valType:"any",editType:"axrange",impliedEdits:{"^autorange":!1},anim:!0},{valType:"any",editType:"axrange",impliedEdits:{"^autorange":!1},anim:!0}],editType:"axrange",impliedEdits:{autorange:!1},
anim:!0},fixedrange:{valType:"boolean",dflt:!1,editType:"calc"},scaleanchor:{valType:"enumerated",values:[a.idRegex.x.toString(),a.idRegex.y.toString()],editType:"plot"},scaleratio:{valType:"number",min:0,dflt:1,editType:"plot"},constrain:{valType:"enumerated",values:["range","domain"],dflt:"range",editType:"plot"},constraintoward:{valType:"enumerated",values:"left center right top middle bottom".split(" "),editType:"plot"},matches:{valType:"enumerated",values:[a.idRegex.x.toString(),a.idRegex.y.toString()],
editType:"calc"},tickmode:{valType:"enumerated",values:["auto","linear","array"],editType:"ticks",impliedEdits:{tick0:void 0,dtick:void 0}},nticks:{valType:"integer",min:0,dflt:0,editType:"ticks"},tick0:{valType:"any",editType:"ticks",impliedEdits:{tickmode:"linear"}},dtick:{valType:"any",editType:"ticks",impliedEdits:{tickmode:"linear"}},tickvals:{valType:"data_array",editType:"ticks"},ticktext:{valType:"data_array",editType:"ticks"},ticks:{valType:"enumerated",values:["outside","inside",""],editType:"ticks"},
tickson:{valType:"enumerated",values:["labels","boundaries"],dflt:"labels",editType:"ticks"},mirror:{valType:"enumerated",values:[!0,"ticks",!1,"all","allticks"],dflt:!1,editType:"ticks+layoutstyle"},ticklen:{valType:"number",min:0,dflt:5,editType:"ticks"},tickwidth:{valType:"number",min:0,dflt:1,editType:"ticks"},tickcolor:{valType:"color",dflt:m.defaultLine,editType:"ticks"},showticklabels:{valType:"boolean",dflt:!0,editType:"ticks"},automargin:{valType:"boolean",dflt:!1,editType:"ticks"},showspikes:{valType:"boolean",
dflt:!1,editType:"modebar"},spikecolor:{valType:"color",dflt:null,editType:"none"},spikethickness:{valType:"number",dflt:3,editType:"none"},spikedash:h({},k,{dflt:"dash",editType:"none"}),spikemode:{valType:"flaglist",flags:["toaxis","across","marker"],dflt:"toaxis",editType:"none"},spikesnap:{valType:"enumerated",values:["data","cursor"],dflt:"data",editType:"none"},tickfont:l({editType:"ticks"}),tickangle:{valType:"angle",dflt:"auto",editType:"ticks"},tickprefix:{valType:"string",dflt:"",editType:"ticks"},
showtickprefix:{valType:"enumerated",values:["all","first","last","none"],dflt:"all",editType:"ticks"},ticksuffix:{valType:"string",dflt:"",editType:"ticks"},showticksuffix:{valType:"enumerated",values:["all","first","last","none"],dflt:"all",editType:"ticks"},showexponent:{valType:"enumerated",values:["all","first","last","none"],dflt:"all",editType:"ticks"},exponentformat:{valType:"enumerated",values:"none e E power SI B".split(" "),dflt:"B",editType:"ticks"},separatethousands:{valType:"boolean",
dflt:!1,editType:"ticks"},tickformat:{valType:"string",dflt:"",editType:"ticks"},tickformatstops:e("tickformatstop",{enabled:{valType:"boolean",dflt:!0,editType:"ticks"},dtickrange:{valType:"info_array",items:[{valType:"any",editType:"ticks"},{valType:"any",editType:"ticks"}],editType:"ticks"},value:{valType:"string",dflt:"",editType:"ticks"},editType:"ticks"}),hoverformat:{valType:"string",dflt:"",editType:"none"},showline:{valType:"boolean",dflt:!1,editType:"ticks+layoutstyle"},linecolor:{valType:"color",
dflt:m.defaultLine,editType:"layoutstyle"},linewidth:{valType:"number",min:0,dflt:1,editType:"ticks+layoutstyle"},showgrid:{valType:"boolean",editType:"ticks"},gridcolor:{valType:"color",dflt:m.lightLine,editType:"ticks"},gridwidth:{valType:"number",min:0,dflt:1,editType:"ticks"},zeroline:{valType:"boolean",editType:"ticks"},zerolinecolor:{valType:"color",dflt:m.defaultLine,editType:"ticks"},zerolinewidth:{valType:"number",dflt:1,editType:"ticks"},showdividers:{valType:"boolean",dflt:!0,editType:"ticks"},
dividercolor:{valType:"color",dflt:m.defaultLine,editType:"ticks"},dividerwidth:{valType:"number",dflt:1,editType:"ticks"},anchor:{valType:"enumerated",values:["free",a.idRegex.x.toString(),a.idRegex.y.toString()],editType:"plot"},side:{valType:"enumerated",values:["top","bottom","left","right"],editType:"plot"},overlaying:{valType:"enumerated",values:["free",a.idRegex.x.toString(),a.idRegex.y.toString()],editType:"plot"},layer:{valType:"enumerated",values:["above traces","below traces"],dflt:"above traces",
editType:"plot"},domain:{valType:"info_array",items:[{valType:"number",min:0,max:1,editType:"plot"},{valType:"number",min:0,max:1,editType:"plot"}],dflt:[0,1],editType:"plot"},position:{valType:"number",min:0,max:1,dflt:0,editType:"plot"},categoryorder:{valType:"enumerated",values:["trace","category ascending","category descending","array"],dflt:"trace",editType:"calc"},categoryarray:{valType:"data_array",editType:"calc"},uirevision:{valType:"any",editType:"none"},editType:"calc",_deprecated:{autotick:{valType:"boolean",
editType:"ticks"},title:{valType:"string",editType:"ticks"},titlefont:l({editType:"ticks"})}}},{"../../components/color/attributes":576,"../../components/drawing/attributes":597,"../../lib/extend":690,"../../plot_api/plot_template":738,"../font_attributes":774,"./constants":754}],761:[function(a,p,l){function m(a,b,c){Array.isArray(a[b])?a[b].push(c):a[b]=[c]}var k=a("../../lib"),h=a("../../components/color"),e=a("../../plot_api/plot_template"),f=a("../layout_attributes"),b=a("./layout_attributes"),
n=a("./type_defaults"),q=a("./axis_defaults"),r=a("./constraints").handleConstraintDefaults,d=a("./position_defaults");l=a("./axis_ids");var g=l.id2name,c=l.name2id;a=a("../../registry");var v=a.traceIs,t=a.getComponentMethod;p.exports=function(a,l,p){function u(a,c){return k.coerce(T,Y,b,a,c)}function y(a,c){return k.coerce2(T,Y,b,a,c)}function B(b,d){b="x"===b?R:z;for(var e=[],f=0;f<b.length;f++){var g=b[f];g===d||(a[g]||{}).overlaying||e.push(c(g))}return e}var w={},D={},x={},H={},M={},O,I;for(O=
0;O<p.length;O++){var Q=p[O];if(v(Q,"cartesian")||v(Q,"gl2d")){if(Q.xaxis){var N=g(Q.xaxis);m(w,N,Q)}else if(Q.xaxes)for(I=0;I<Q.xaxes.length;I++)m(w,g(Q.xaxes[I]),Q);if(Q.yaxis){var L=g(Q.yaxis);m(w,L,Q)}else if(Q.yaxes)for(I=0;I<Q.yaxes.length;I++)m(w,g(Q.yaxes[I]),Q);(!v(Q,"carpet")||"carpet"===Q.type&&!Q._cheater)&&N&&(x[N]=1);"carpet"===Q.type&&Q._cheater&&N&&(D[N]=1);v(Q,"2dMap")&&(H[N]=1,H[L]=1);v(Q,"oriented")&&(M["h"===Q.orientation?L:N]=1)}}I=l._subplots;O=I.xaxis;p=I.yaxis;var R=k.simpleMap(O,
g),z=k.simpleMap(p,g);I=R.concat(z);Q=h.background;O.length&&p.length&&(Q=k.coerce(a,l,f,"plot_bgcolor"));Q=h.combine(Q,l.paper_bgcolor);L={x:p,y:O};p=L.x.concat(L.y);for(O=0;O<I.length;O++){var U=I[O];N=U.charAt(0);k.isPlainObject(a[U])||(a[U]={});var T=a[U];var Y=e.newContainer(l,U,N+"axis");var F=w[U]||[];Y._traceIndices=F.map(function(a){return a._expandedIndex});Y._annIndices=[];Y._shapeIndices=[];Y._imgIndices=[];Y._subplotsWith=[];Y._counterAxes=[];Y._name=Y._attr=U;var S=Y._id=c(U),W=B(N,
U);U={letter:N,font:l.font,outerTicks:H[U],showGrid:!M[U],data:F,bgColor:Q,calendar:l.calendar,automargin:!0,cheateronly:"x"===N&&D[U]&&!x[U],splomStash:((l._splomAxes||{})[N]||{})[S]};u("uirevision",l.uirevision);n(T,Y,u,U);q(T,Y,u,U,l);U=y("spikecolor");F=y("spikethickness");S=y("spikedash");var fa=y("spikemode"),qa=y("spikesnap");u("showspikes",!!U||!!F||!!S||!!fa||!!qa)||(delete Y.spikecolor,delete Y.spikethickness,delete Y.spikedash,delete Y.spikemode,delete Y.spikesnap);d(T,Y,u,{letter:N,counterAxes:L[N],
overlayableAxes:W,grid:l.grid});Y._input=T}w=t("rangeslider","handleDefaults");D=t("rangeselector","handleDefaults");for(O=0;O<R.length;O++)U=R[O],T=a[U],Y=l[U],w(a,l,U),"date"===Y.type&&D(T,Y,l,z,Y.calendar),u("fixedrange");for(O=0;O<z.length;O++)U=z[O],T=a[U],Y=l[U],w=l[g(Y.anchor)],w=t("rangeslider","isVisible")(w),u("fixedrange",w);w=l._axisConstraintGroups=[];D=l._axisMatchGroups=[];for(O=0;O<I.length;O++)U=I[O],N=U.charAt(0),T=a[U],Y=l[U],r(T,Y,u,p,l);for(O=0;O<D.length;O++){x=D[O];M=H=null;
for(var ha in x)Y=l[g(ha)],Y.matches||(H=Y.range,M=Y.autorange);if(null===H||null===M)for(ha in x){Y=l[g(ha)];H=Y.range;M=Y.autorange;break}for(ha in x)Y=l[g(ha)],Y.matches&&(Y.range=H.slice(),Y.autorange=M),Y._matchGroup=x;if(w.length)for(ha in x)for(I=0;I<w.length;I++){x=w[I];for(var ea in x)ha===ea&&(k.warn("Axis "+ea+" is set with both a *scaleanchor* and *matches* constraint; ignoring the scale constraint."),delete x[ea],2>Object.keys(x).length&&w.splice(I,1))}}}},{"../../components/color":577,
"../../lib":700,"../../plot_api/plot_template":738,"../../registry":829,"../layout_attributes":801,"./axis_defaults":750,"./axis_ids":751,"./constraints":755,"./layout_attributes":760,"./position_defaults":763,"./type_defaults":771}],762:[function(a,p,l){var m=a("tinycolor2").mix,k=a("../../components/color/attributes").lightFraction,h=a("../../lib");p.exports=function(a,f,b,n){function e(b,d){return h.coerce2(a,f,n.attributes,b,d)}n=n||{};var l=n.dfltColor,d=e("linecolor",l),g=e("linewidth");b("showline",
n.showLine||!!d||!!g)||(delete f.linecolor,delete f.linewidth);d=m(l,n.bgColor,n.blend||k).toRgbString();d=e("gridcolor",d);g=e("gridwidth");b("showgrid",n.showGrid||!!d||!!g)||(delete f.gridcolor,delete f.gridwidth);n.noZeroLine||(l=e("zerolinecolor",l),d=e("zerolinewidth"),b("zeroline",n.showGrid||!!l||!!d)||(delete f.zerolinecolor,delete f.zerolinewidth))}},{"../../components/color/attributes":576,"../../lib":700,tinycolor2:521}],763:[function(a,p,l){var m=a("fast-isnumeric"),k=a("../../lib");
p.exports=function(a,e,f,b){var h=b.counterAxes||[],l=b.overlayableAxes||[],p=b.letter;b=b.grid;if(b){var d=b._domains[p][b._axisMap[e._id]];var g=b._anchors[e._id];if(d){var c=b[p+"side"].split(" ")[0];var v=b.domain[p]["right"===c||"top"===c?1:0]}}d=d||[0,1];g=g||(m(a.position)?"free":h[0]||"free");c=c||("x"===p?"bottom":"left");v=v||0;"free"===k.coerce(a,e,{anchor:{valType:"enumerated",values:["free"].concat(h),dflt:g}},"anchor")&&f("position",v);k.coerce(a,e,{side:{valType:"enumerated",values:"x"===
p?["bottom","top"]:["left","right"],dflt:c}},"side");h=!1;l.length&&(h=k.coerce(a,e,{overlaying:{valType:"enumerated",values:[!1].concat(l),dflt:!1}},"overlaying"));h||(l=f("domain",d),l[0]>l[1]-1/4096&&(e.domain=d),k.noneOrAll(a.domain,e.domain,d));f("layer");return e}},{"../../lib":700,"fast-isnumeric":221}],764:[function(a,p,l){var m=a("../../constants/alignment").FROM_BL;p.exports=function(a,h,e){void 0===e&&(e=m[a.constraintoward||"center"]);var f=[a.r2l(a.range[0]),a.r2l(a.range[1])];e=f[0]+
(f[1]-f[0])*e;a.range=a._input.range=[a.l2r(e+(f[0]-e)*h),a.l2r(e+(f[1]-e)*h)]}},{"../../constants/alignment":672}],765:[function(a,p,l){function m(a){return a._id}function k(a,c,e,h,k,m,l){var p=c._hoverdata,t=-1<c._fullLayout.clickmode.indexOf("event"),u=[],y;if(p&&Array.isArray(p)&&!0!==p[0].hoverOnBox){b(a,c,m);e=q(c,e,h,k);p=p[0];h=-1;k=[];var A;for(A=0;A<e.length;A++){var B=e[A];if(p.fullData._expandedIndex===B.cd[0].trace._expandedIndex){if(!0===p.hoverOnBox)break;void 0!==p.pointNumber?h=
p.pointNumber:void 0!==p.binNumber&&(h=p.binNumber,k=p.pointNumbers);break}}B={pointNumber:h,pointNumbers:k,searchInfo:B};if(0<B.pointNumbers.length)a:{h=[];for(p=0;p<e.length;p++)k=e[p],k.cd[0].trace.selectedpoints&&0<k.cd[0].trace.selectedpoints.length&&h.push(k);if(1===h.length&&(p=h[0]===B.searchInfo)&&(h=B.searchInfo.cd[0].trace,h.selectedpoints.length===B.pointNumbers.length)){for(p=0;p<B.pointNumbers.length;p++)if(0>h.selectedpoints.indexOf(B.pointNumbers[p])){p=!1;break a}p=!0;break a}p=!1}else{a:{for(h=
p=0;h<e.length;h++)if(k=e[h],k=k.cd[0].trace,k.selectedpoints){if(1<k.selectedpoints.length){p=!1;break a}p+=k.selectedpoints.length;if(1<p){p=!1;break a}}p=1===p}p=p&&(y=d(B))}if(p){l&&l.remove();for(y=0;y<e.length;y++)l=e[y],l._module.selectPoints(l,!1);g(c,e);n(m);t&&c.emit("plotly_deselect",null)}else{a=a.shiftKey&&(void 0!==y?y:d(B));a={pointNumber:B.pointNumber,searchInfo:B.searchInfo,subtract:a};y=m.selectionDefs.concat([a]);B=f(y);for(y=0;y<e.length;y++)if(p=e[y]._module.selectPoints(e[y],
B),p=v(p,e[y]),u.length)for(h=0;h<p.length;h++)u.push(p[h]);else u=p;u={points:u};g(c,e,u);a&&m&&m.selectionDefs.push(a);l&&r(m.mergedPolygons,l);t&&c.emit("plotly_selected",u)}}}function h(a){return"pointNumber"in a&&"searchInfo"in a}function e(a){return{xmin:0,xmax:0,ymin:0,ymax:0,pts:[],contains:function(b,c,d,e){return e.cd[0].trace._expandedIndex===a.searchInfo.cd[0].trace._expandedIndex&&d===a.pointNumber},isRect:!1,degenerate:!1,subtract:a.subtract}}function f(a){for(var b=[],c=h(a[0])?0:a[0][0][0],
d=c,f=h(a[0])?0:a[0][0][1],g=f,k=0;k<a.length;k++)if(h(a[k]))b.push(e(a[k]));else{var n=A.tester(a[k]);n.subtract=a[k].subtract;b.push(n);c=Math.min(c,n.xmin);d=Math.max(d,n.xmax);f=Math.min(f,n.ymin);g=Math.max(g,n.ymax)}return{xmin:c,xmax:d,ymin:f,ymax:g,pts:[],contains:function(a,c,d,e){for(var f=!1,g=0;g<b.length;g++)b[g].contains(a,c,d,e)&&(f=!1===b[g].subtract);return f},isRect:!1,degenerate:!1}}function b(a,b,c){b=b._fullLayout;var d=b._zoomlayer,e=c.plotinfo,f=b._lastSelectedSubplot&&b._lastSelectedSubplot===
e.id;a=a.shiftKey||a.altKey;f&&a&&e.selection&&e.selection.selectionDefs&&!c.selectionDefs?(c.selectionDefs=e.selection.selectionDefs,c.mergedPolygons=e.selection.mergedPolygons):a&&e.selection||n(c);f||(t(d),b._lastSelectedSubplot=e.id)}function n(a){var b=a.plotinfo;b.selection={};b.selection.selectionDefs=a.selectionDefs=[];b.selection.mergedPolygons=a.mergedPolygons=[]}function q(a,b,c,d){function e(a,b,c,d){return{_module:a,cd:b,xaxis:c,yaxis:d}}var f=[],g=b.map(m),h=c.map(m),k;for(k=0;k<a.calcdata.length;k++){var n=
a.calcdata[k];var l=n[0].trace;!0===l.visible&&l._module&&l._module.selectPoints&&(!d||l.subplot!==d&&l.geo!==d?"splom"===l.type&&l._xaxes[g[0]]&&l._yaxes[h[0]]?(n=e(l._module,n,b[0],c[0]),n.scene=a._fullLayout._splomScenes[l.uid],f.push(n)):-1!==g.indexOf(l.xaxis)&&-1!==h.indexOf(l.yaxis)&&f.push(e(l._module,n,J(a,l.xaxis),J(a,l.yaxis))):f.push(e(l._module,n,b[0],c[0])))}return f}function r(a,b){var c=[],d;for(d=0;d<a.length;d++){var e=a[d];c.push(e.join("L")+"L"+e[0])}a=0<a.length?"M"+c.join("M")+
"Z":"M0,0Z";b.attr("d",a)}function d(a){var b=a.searchInfo.cd[0].trace,c=a.pointNumber;a=a.pointNumbers;c=0<a.length?a[0]:c;return b.selectedpoints?-1<b.selectedpoints.indexOf(c):!1}function g(a,b,c){var d;for(d=0;d<b.length;d++){var e=b[d].cd[0].trace._fullInput;var f=a._fullLayout._tracePreGUI[e.uid];void 0===f.selectedpoints&&(f.selectedpoints=e._input.selectedpoints||null)}if(c){c=c.points||[];for(d=0;d<b.length;d++){var g=b[d].cd[0].trace;g._input.selectedpoints=g._fullInput.selectedpoints=[];
g._fullInput!==g&&(g.selectedpoints=[])}for(d=0;d<c.length;d++){e=c[d];f=e.data;var h=e.fullData;e.pointIndices?([].push.apply(f.selectedpoints,e.pointIndices),g._fullInput!==g&&[].push.apply(h.selectedpoints,e.pointIndices)):(f.selectedpoints.push(e.pointIndex),g._fullInput!==g&&h.selectedpoints.push(e.pointIndex))}}else for(d=0;d<b.length;d++)g=b[d].cd[0].trace,delete g.selectedpoints,delete g._input.selectedpoints,g._fullInput!==g&&delete g._fullInput.selectedpoints;e=!1;for(d=0;d<b.length;d++)f=
b[d],c=f.cd,g=c[0].trace,B.traceIs(g,"regl")&&(e=!0),g=f._module,(g=g.styleOnSelect||g.style)&&g(a,c);e&&(E(a),H(a))}function c(a,b,c){if(c)return a=y.difference({regions:a,inverted:!1},{regions:[b],inverted:!1}),a.regions;a=y.union({regions:a,inverted:!1},{regions:[b],inverted:!1});return a.regions}function v(a,b){if(Array.isArray(a)){var c=b.cd;b=b.cd[0].trace;for(var d=0;d<a.length;d++)a[d]=P(a[d],b,c)}return a}function t(a){a.selectAll(".select-outline").remove()}var y=a("polybooljs"),B=a("../../registry"),
w=a("../../components/color"),x=a("../../components/fx"),A=a("../../lib/polygon"),C=a("../../lib/throttle"),P=a("../../components/fx/helpers").makeEventData,J=a("./axis_ids").getFromId,E=a("../../lib/clear_gl_canvases"),H=a("../../plot_api/subroutines").redrawReglTraces,M=a("./constants"),O=M.MINSELECT,I=A.filter,Q=A.tester;p.exports={prepSelect:function(a,d,e,h,m){function l(a){var b="y"===a._id.charAt(0)?1:0;return function(c){return a.p2d(c[b])}}function p(a,b){return a-b}var t=h.gd,u=t._fullLayout,
y=u._zoomlayer,A=h.element.getBoundingClientRect(),B=h.plotinfo,D=B.xaxis._offset,E=B.yaxis._offset,G=d-A.left,L=e-A.top,H=G,J=L;d="M"+G+","+L;var N=h.xaxes[0]._length,P=h.yaxes[0]._length,z=h.xaxes.concat(h.yaxes),R=a.altKey,ca,F,U,K,aa,ma,Aa;b(a,t,h);"lasso"===m&&(ca=I([[G,L]],M.BENDPX));var va=y.selectAll("path.select-outline-"+B.id).data([1,2]);va.enter().append("path").attr("class",function(a){return"select-outline select-outline-"+a+" select-outline-"+B.id}).attr("transform","translate("+D+
", "+E+")").attr("d",d+"Z");var sa=y.append("path").attr("class","zoombox-corners").style({fill:w.background,stroke:w.defaultLine,"stroke-width":1}).attr("transform","translate("+D+", "+E+")").attr("d","M0,0Z"),Ca=u._uid+M.SELECTID,Ga=[],Ja=q(t,h.xaxes,h.yaxes,h.subplot);var oa=B.fillRangeItems?B.fillRangeItems:"select"===m?function(a,b){a=a.range={};for(aa=0;aa<z.length;aa++){var c=z[aa],d=c._id.charAt(0);a[c._id]=[c.p2d(b[d+"min"]),c.p2d(b[d+"max"])].sort(p)}}:function(a,b,c){a=a.lassoPoints={};
for(aa=0;aa<z.length;aa++)b=z[aa],a[b._id]=c.filtered.map(l(b))};h.moveFn=function(a,b){H=Math.max(0,Math.min(N,a+G));J=Math.max(0,Math.min(P,b+L));a=Math.abs(H-G);b=Math.abs(J-L);if("select"===m){var d=u.selectdirection;d="any"===u.selectdirection?b<Math.min(.6*a,O)?"h":a<Math.min(.6*b,O)?"v":"d":u.selectdirection;"h"===d?(K=[[G,0],[G,P],[H,P],[H,0]],K.xmin=Math.min(G,H),K.xmax=Math.max(G,H),K.ymin=Math.min(0,P),K.ymax=Math.max(0,P),sa.attr("d","M"+K.xmin+","+(L-O)+"h-4v"+2*O+"h4ZM"+(K.xmax-1)+","+
(L-O)+"h4v"+2*O+"h-4Z")):"v"===d?(K=[[0,L],[0,J],[N,J],[N,L]],K.xmin=Math.min(0,N),K.xmax=Math.max(0,N),K.ymin=Math.min(L,J),K.ymax=Math.max(L,J),sa.attr("d","M"+(G-O)+","+K.ymin+"v-4h"+2*O+"v4ZM"+(G-O)+","+(K.ymax-1)+"v4h"+2*O+"v-4Z")):"d"===d&&(K=[[G,L],[G,J],[H,J],[H,L]],K.xmin=Math.min(G,H),K.xmax=Math.max(G,H),K.ymin=Math.min(L,J),K.ymax=Math.max(L,J),sa.attr("d","M0,0Z"))}else"lasso"===m&&(ca.addPt([H,J]),K=ca.filtered);h.selectionDefs&&h.selectionDefs.length?(U=c(h.mergedPolygons,K,R),K.subtract=
R,F=f(h.selectionDefs.concat([K]))):(U=[K],F=Q(K));r(U,va);C.throttle(Ca,M.SELECTDELAY,function(){Ga=[];var a=[];for(aa=0;aa<Ja.length;aa++){ma=Ja[aa];var b=ma._module.selectPoints(ma,F);a.push(b);b=v(b,ma);if(Ga.length)for(var c=0;c<b.length;c++)Ga.push(b[c]);else Ga=b}Aa={points:Ga};g(t,Ja,Aa);oa(Aa,K,ca);h.gd.emit("plotly_selecting",Aa)})};h.clickFn=function(a,b){var c=u.clickmode;sa.remove();C.done(Ca).then(function(){C.clear(Ca);if(2===a){va.remove();for(aa=0;aa<Ja.length;aa++)ma=Ja[aa],ma._module.selectPoints(ma,
!1);g(t,Ja);n(h);t.emit("plotly_deselect",null)}else-1<c.indexOf("select")&&k(b,t,h.xaxes,h.yaxes,h.subplot,h,va),"event"===c&&t.emit("plotly_selected",void 0);x.click(t,b)})};h.doneFn=function(){sa.remove();C.done(Ca).then(function(){C.clear(Ca);h.gd.emit("plotly_selected",Aa);K&&h.selectionDefs&&(K.subtract=R,h.selectionDefs.push(K),h.mergedPolygons.length=0,[].push.apply(h.mergedPolygons,U))})}},clearSelect:t,selectOnClick:k}},{"../../components/color":577,"../../components/fx":616,"../../components/fx/helpers":612,
"../../lib/clear_gl_canvases":685,"../../lib/polygon":712,"../../lib/throttle":725,"../../plot_api/subroutines":739,"../../registry":829,"./axis_ids":751,"./constants":754,polybooljs:465}],766:[function(a,p,l){function m(a){return Math.pow(10,a)}var k=a("d3"),h=a("fast-isnumeric"),e=a("../../lib"),f=e.cleanNumber,b=e.ms2DateTime,n=e.dateTime2ms,q=e.ensureNumber,r=e.isArrayOrTypedArray;l=a("../../constants/numerical");var d=l.FP_SAFE,g=l.BADNUM,c=l.LOG_CLIP,v=a("./constants"),t=a("./axis_ids");p.exports=
function(a,l){function p(b,d){return 0<b?Math.log(b)/Math.LN10:0>=b&&d&&a.range&&2===a.range.length?(b=a.range[0],d=a.range[1],.5*(b+d-2*c*Math.abs(b-d))):g}function u(b,c,d){c=n(b,d||a.calendar);if(c===g)if(h(b))b=+b,c=Math.floor(10*e.mod(b+.05,1)),c=n(new Date(Math.round(b-c/10)))+c/10;else return g;return c}function y(c,d,e){return b(c,d,e||a.calendar)}function B(b){return a._categories[Math.round(b)]}function w(b){if(null!==b&&void 0!==b){void 0===a._categoriesMap&&(a._categoriesMap={});if(void 0!==
a._categoriesMap[b])return a._categoriesMap[b];a._categories.push(b);var c=a._categories.length-1;return a._categoriesMap[b]=c}return g}function x(b){if(a._categoriesMap)return a._categoriesMap[b]}function E(a){var b=x(a);if(void 0!==b)return b;if(h(a))return+a}function H(b){return h(b)?k.round(a._b+a._m*b,2):g}function M(b){return(b-a._b)/a._m}l=l||{};var O=a._id||"x",I=O.charAt(0);a.c2l="log"===a.type?p:q;a.l2c="log"===a.type?m:q;a.l2p=H;a.p2l=M;a.c2p="log"===a.type?function(a,b){return H(p(a,b))}:
H;a.p2c="log"===a.type?function(a){return m(M(a))}:M;-1!==["linear","-"].indexOf(a.type)?(a.d2r=a.r2d=a.d2c=a.r2c=a.d2l=a.r2l=f,a.c2d=a.c2r=a.l2d=a.l2r=q,a.d2p=a.r2p=function(b){return a.l2p(f(b))},a.p2d=a.p2r=M,a.cleanPos=q):"log"===a.type?(a.d2r=a.d2l=function(a,b){return p(f(a),b)},a.r2d=a.r2c=function(a){return m(f(a))},a.d2c=a.r2l=f,a.c2d=a.l2r=q,a.c2r=p,a.l2d=m,a.d2p=function(b,c){return a.l2p(a.d2r(b,c))},a.p2d=function(a){return m(M(a))},a.r2p=function(b){return a.l2p(f(b))},a.p2r=M,a.cleanPos=
q):"date"===a.type?(a.d2r=a.r2d=e.identity,a.d2c=a.r2c=a.d2l=a.r2l=u,a.c2d=a.c2r=a.l2d=a.l2r=y,a.d2p=a.r2p=function(b,c,d){return a.l2p(u(b,0,d))},a.p2d=a.p2r=function(a,b,c){return y(M(a),b,c)},a.cleanPos=function(b){return e.cleanDate(b,g,a.calendar)}):"category"===a.type?(a.d2c=a.d2l=w,a.r2d=a.c2d=a.l2d=B,a.d2r=a.d2l_noadd=E,a.r2c=function(b){b=E(b);return void 0!==b?b:a.fraction2r(.5)},a.l2r=a.c2r=q,a.r2l=E,a.d2p=function(b){return a.l2p(a.r2c(b))},a.p2d=function(a){return B(M(a))},a.r2p=a.d2p,
a.p2r=M,a.cleanPos=function(a){return"string"===typeof a&&""!==a?a:q(a)}):"multicategory"===a.type&&(a.r2d=a.c2d=a.l2d=B,a.d2r=a.d2l_noadd=E,a.r2c=function(b){b=E(b);return void 0!==b?b:a.fraction2r(.5)},a.r2c_just_indices=x,a.l2r=a.c2r=q,a.r2l=E,a.d2p=function(b){return a.l2p(a.r2c(b))},a.p2d=function(a){return B(M(a))},a.r2p=a.d2p,a.p2r=M,a.cleanPos=function(a){return Array.isArray(a)||"string"===typeof a&&""!==a?a:q(a)},a.setupMultiCategory=function(b){var c=a._traceIndices,d,f=l._axisMatchGroups;
if(f&&f.length&&0===a._categories.length)for(d=0;d<f.length;d++){var g=f[d];if(g[O])for(var h in g)h!==O&&(g=l[t.id2name(h)],c=c.concat(g._traceIndices))}var k=[[0,{}],[0,{}]];f=[];for(d=0;d<c.length;d++)if(g=b[c[d]],I in g){h=g[I];var n=g._length||e.minRowLength(h);if(r(h[0])&&r(h[1]))for(g=0;g<n;g++){var m=h[0][g],p=h[1][g];null!==m&&void 0!==m&&null!==p&&void 0!==p&&(f.push([m,p]),m in k[0][1]||(k[0][1][m]=k[0][0]++),p in k[1][1]||(k[1][1][p]=k[1][0]++))}}f.sort(function(a,b){var c=k[0][1];if(c=
c[a[0]]-c[b[0]])return c;c=k[1][1];return c[a[1]]-c[b[1]]});for(d=0;d<f.length;d++)w(f[d])});a.fraction2r=function(b){var c=a.r2l(a.range[0]),d=a.r2l(a.range[1]);return a.l2r(c+b*(d-c))};a.r2fraction=function(b){var c=a.r2l(a.range[0]),d=a.r2l(a.range[1]);return(a.r2l(b)-c)/(d-c)};a.cleanRange=function(b,c){c||(c={});b||(b="range");var f=e.nestedProperty(a,b).get();var k="date"===a.type?e.dfltRange(a.calendar):"y"===I?v.DFLTRANGEY:c.dfltRange||v.DFLTRANGEX;k=k.slice();if(f&&2===f.length)for("date"===
a.type&&(f[0]=e.cleanDate(f[0],g,a.calendar),f[1]=e.cleanDate(f[1],g,a.calendar)),c=0;2>c;c++)if("date"===a.type){if(!e.isDateTime(f[c],a.calendar)){a[b]=k;break}if(a.r2l(f[0])===a.r2l(f[1])){b=e.constrain(a.r2l(f[0]),e.MIN_MS+1E3,e.MAX_MS-1E3);f[0]=a.l2r(b-1E3);f[1]=a.l2r(b+1E3);break}}else{if(!h(f[c]))if(h(f[1-c]))f[c]=f[1-c]*(c?10:.1);else{a[b]=k;break}f[c]<-d?f[c]=-d:f[c]>d&&(f[c]=d);if(f[0]===f[1]){var n=Math.max(1,Math.abs(1E-6*f[0]));f[0]-=n;f[1]+=n}}else e.nestedProperty(a,b).set(k)};a.setScale=
function(b){var c=l._size;if(a.overlaying){var d=t.getFromId({_fullLayout:l},a.overlaying);a.domain=d.domain}d=b&&a._r?"_r":"range";var e=a.calendar;a.cleanRange(d);b=a.r2l(a[d][0],e);d=a.r2l(a[d][1],e);"y"===I?(a._offset=c.t+(1-a.domain[1])*c.h,a._length=c.h*(a.domain[1]-a.domain[0]),a._m=a._length/(b-d),a._b=-a._m*d):(a._offset=c.l+a.domain[0]*c.w,a._length=c.w*(a.domain[1]-a.domain[0]),a._m=a._length/(d-b),a._b=-a._m*b);if(!isFinite(a._m)||!isFinite(a._b)||0>a._length)throw l._replotting=!1,Error("Something went wrong with axis scaling");
};a.makeCalcdata=function(b,c){var d,f=a.type,g="date"===f&&b[c+"calendar"];if(c in b){c=b[c];b=b._length||e.minRowLength(c);if(e.isTypedArray(c)&&("linear"===f||"log"===f)){if(b===c.length)return c;if(c.subarray)return c.subarray(0,b)}if("multicategory"===f){g=Array(b);for(f=0;f<b;f++)g[f]=x([(c[0]||[])[f],(c[1]||[])[f]]);return g}var h=Array(b);for(d=0;d<b;d++)h[d]=a.d2c(c[d],0,g)}else for(g=(c+"0"in b)?a.d2c(b[c+"0"],0,g):0,f=b["d"+c]?Number(b["d"+c]):1,c=b[{x:"y",y:"x"}[c]],b=b._length||c.length,
h=Array(b),d=0;d<b;d++)h[d]=g+d*f;return h};a.isValidRange=function(b){return Array.isArray(b)&&2===b.length&&h(a.r2l(b[0]))&&h(a.r2l(b[1]))};a.isPtWithinRange=function(b,c){b=a.c2l(b[I],null,c);c=a.r2l(a.range[0]);var d=a.r2l(a.range[1]);return c<d?c<=b&&b<=d:d<=b&&b<=c};a.clearCalc=function(){var b=function(){a._categories=[];a._categoriesMap={}},c=l._axisMatchGroups;if(c&&c.length){for(var d=!1,e=0;e<c.length;e++){var f=c[e];if(f[O]){d=!0;e=c=null;for(var g in f)if(f=l[t.id2name(g)],f._categories){c=
f._categories;e=f._categoriesMap;break}c&&e?(a._categories=c,a._categoriesMap=e):b();break}}d||b()}else b();if(a._initialCategories)for(b=0;b<a._initialCategories.length;b++)w(a._initialCategories[b])};var Q=l._d3locale;"date"===a.type&&(a._dateFormat=Q?Q.timeFormat.utc:k.time.format.utc,a._extraFormat=l._extraFormat);a._separators=l.separators;a._numFormat=Q?Q.numberFormat:k.format;delete a._minDtick;delete a._forceTick0}},{"../../constants/numerical":677,"../../lib":700,"./axis_ids":751,"./constants":754,
d3:154,"fast-isnumeric":221}],767:[function(a,p,l){function m(a){var b=["showexponent","showtickprefix","showticksuffix"].filter(function(b){return void 0!==a[b]});if(b.every(function(e){return a[e]===a[b[0]]})||1===b.length)return a[b[0]]}function k(a,f){h.coerce(a,f,e.tickformatstops,"enabled",void 0)&&(h.coerce(a,f,e.tickformatstops,"dtickrange",void 0),h.coerce(a,f,e.tickformatstops,"value",void 0))}var h=a("../../lib"),e=a("./layout_attributes"),f=a("../array_container_defaults");p.exports=function(a,
n,l,p,d){var b=m(a);l("tickprefix")&&l("showtickprefix",b);l("ticksuffix",d.tickSuffixDflt)&&l("showticksuffix",b);if(l("showticklabels")){d=d.font||{};var c=n.color;h.coerceFont(l,"tickfont",{family:d.family,size:d.size,color:c&&c!==e.color.dflt?c:d.color});l("tickangle");"category"!==p&&(d=l("tickformat"),c=a.tickformatstops,Array.isArray(c)&&c.length&&f(a,n,{name:"tickformatstops",inclusionAttr:"enabled",handleItemDefaults:k}),d||"date"===p||(l("showexponent",b),l("exponentformat"),l("separatethousands")))}}},
{"../../lib":700,"../array_container_defaults":744,"./layout_attributes":760}],768:[function(a,p,l){var m=a("../../lib"),k=a("./layout_attributes");p.exports=function(a,e,f,b){var h=m.coerce2(a,e,k,"ticklen"),l=m.coerce2(a,e,k,"tickwidth");a=m.coerce2(a,e,k,"tickcolor",e.color);f("ticks",b.outerTicks||h||l||a?"outside":"")||(delete e.ticklen,delete e.tickwidth,delete e.tickcolor)}},{"../../lib":700,"./layout_attributes":760}],769:[function(a,p,l){var m=a("./clean_ticks");p.exports=function(a,h,e,
f){if("array"!==a.tickmode||"log"!==f&&"date"!==f){var b=Array.isArray(a.tickvals)?"array":a.dtick?"linear":"auto";b=e("tickmode",b)}else b=h.tickmode="auto";"auto"===b?e("nticks"):"linear"===b?(e=h.dtick=m.dtick(a.dtick,f),h.tick0=m.tick0(a.tick0,f,h.calendar,e)):"multicategory"!==f&&(void 0===e("tickvals")?h.tickmode="auto":e("ticktext"))}},{"./clean_ticks":753}],770:[function(a,p,l){var m=a("d3"),k=a("../../registry"),h=a("../../components/drawing"),e=a("./axes");p.exports=function(a,b,n,l){function f(a){var b=
a.xaxis,c=a.yaxis;p._defs.select("#"+a.clipId+"\x3e rect").call(h.setTranslate,0,0).call(h.setScale,1,1);a.plot.call(h.setTranslate,b._offset,c._offset).call(h.setScale,1,1);b=a.plot.selectAll(".scatterlayer .trace");b.selectAll(".point").call(h.setPointGroupScale,1,1);b.selectAll(".textpoint").call(h.setTextPointsScale,1,1);b.call(h.hideOutsideRangePoints,a)}function d(){for(var c={},d=0;d<b.length;d++){var e=b[d];e.xr1&&(c[e.plotinfo.xaxis._name+".range"]=e.xr1.slice());e.yr1&&(c[e.plotinfo.yaxis._name+
".range"]=e.yr1.slice())}t&&t();return k.call("relayout",a,c).then(function(){for(var a=0;a<b.length;a++)f(b[a].plotinfo)})}function g(){for(var c={},d=0;d<b.length;d++){var e=b[d];e.xr0&&(c[e.plotinfo.xaxis._name+".range"]=e.xr0.slice());e.yr0&&(c[e.plotinfo.yaxis._name+".range"]=e.yr0.slice())}return k.call("relayout",a,c).then(function(){for(var a=0;a<b.length;a++)f(b[a].plotinfo)})}function c(){q=Date.now();for(var f=u(Math.min(1,(q-w)/n.duration)),g=0;g<b.length;g++){var k=b[g],m=f,l=k.plotinfo,
p=l.xaxis,t=l.yaxis,r=k.xr0,v=k.xr1,y=p._length,B=k.yr0,D=k.yr1,G=t._length;k=!!v;var z=!!D,F=[];if(k){var T=r[1]-r[0],Y=v[1]-v[0];F[0]=(r[0]*(1-m)+m*v[0]-r[0])/(r[1]-r[0])*y;F[2]=y*(1-m+m*Y/T);p.range[0]=r[0]*(1-m)+m*v[0];p.range[1]=r[1]*(1-m)+m*v[1]}else F[0]=0,F[2]=y;z?(r=B[1]-B[0],v=D[1]-D[0],F[1]=(B[1]*(1-m)+m*D[1]-B[1])/(B[0]-B[1])*G,F[3]=G*(1-m+m*v/r),t.range[0]=B[0]*(1-m)+m*D[0],t.range[1]=B[1]*(1-m)+m*D[1]):(F[1]=0,F[3]=G);e.drawOne(a,p,{skipTitle:!0});e.drawOne(a,t,{skipTitle:!0});e.redrawComponents(a,
[p._id,t._id]);m=k?y/F[2]:1;B=z?G/F[3]:1;p=p._offset-(k?F[0]/F[2]*y:0);t=t._offset-(z?F[1]/F[3]*G:0);l.clipRect.call(h.setTranslate,k?F[0]:0,z?F[1]:0).call(h.setScale,1/m,1/B);l.plot.call(h.setTranslate,p,t).call(h.setScale,m,B);h.setPointGroupScale(l.zoomScalePts,1/m,1/B);h.setTextPointsScale(l.zoomScaleTxt,1/m,1/B)}q-w>n.duration?(d(),x=window.cancelAnimationFrame(c)):x=window.requestAnimationFrame(c)}var p=a._fullLayout;if(0===b.length)e.redrawComponents(a);else{var t;l&&(t=l());var q,u=m.ease(n.easing);
a._transitionData._interruptCallbacks.push(function(){window.cancelAnimationFrame(x);x=null;return g()});var w=Date.now();var x=window.requestAnimationFrame(c);return Promise.resolve()}}},{"../../components/drawing":598,"../../registry":829,"./axes":748,d3:154}],771:[function(a,p,l){function m(a,f){var b={v:"x",h:"y"}[a.orientation||"v"],e=k(a,"box-violin"),h=k(a._fullInput||{},"candlestick");return e&&!h&&f===b&&void 0===a[b]&&void 0===a[b+"0"]}var k=a("../../registry").traceIs,h=a("./axis_autotype");
p.exports=function(a,f,b,n){if("-"===b("type",(n.splomStash||{}).type)){n=n.data;if("-"===f.type){b=f._id;var e=b.charAt(0);-1!==b.indexOf("scene")&&(b=e);b:{for(var l=b,d=0;d<n.length;d++){var g=n[d];if("splom"===g.type&&0<g._length&&(g["_"+e+"axes"]||{})[l]||(g[e+"axis"]||e)===l&&(m(g,e)||(g[e]||[]).length||g[e+"0"]))break b}g=void 0}if(g)if("histogram"===g.type&&e==={v:"y",h:"x"}[g.orientation||"v"])f.type="linear";else{var c=e+"calendar";l=g[c];d={noMultiCategory:!k(g,"cartesian")||k(g,"noMultiCategory")};
if(m(g,e)){var p={v:"x",h:"y"}[g.orientation||"v"],t=[];for(g=0;g<n.length;g++){var q=n[g];k(q,"box-violin")&&(q[e+"axis"]||e)===b&&(void 0!==q[p]?t.push(q[p][0]):void 0!==q.name?t.push(q.name):t.push("text"),q[c]!==l&&(l=void 0))}f.type=h(t,l,d)}else if("splom"===g.type)for(n=g.dimensions,e=g._diag,g=0;g<n.length;g++){if(c=n[g],c.visible&&(e[g][0]===b||e[g][1]===b)){f.type=h(c.values,l,d);break}}else f.type=h(g[e]||[g[e+"0"]],l,d)}}"-"===f.type?f.type="linear":a.type=f.type}}},{"../../registry":829,
"./axis_autotype":749}],772:[function(a,p,l){function m(a,e,f){var d=!1;if("data"===e.type)a=a._fullData[null!==e.traces?e.traces[0]:0];else if("layout"===e.type)a=a._fullLayout;else return!1;a=b.nestedProperty(a,e.prop).get();f=f[e.type]=f[e.type]||{};f.hasOwnProperty(e.prop)&&f[e.prop]!==a&&(d=!0);f[e.prop]=a;return{changed:d,value:a}}function k(a,f){var h=[];a=f[0];var d={};if("string"===typeof a)d[a]=f[1];else if(b.isPlainObject(a))d=a;else return h;e(d,function(a,b,d){h.push({type:"layout",prop:a,
value:d})},"",0);return h}function h(a,f){var h=[];var d=f[0];var g=f[1];var c=f[2];f={};if("string"===typeof d)f[d]=g;else if(b.isPlainObject(d))f=d,void 0===c&&(c=g);else return h;void 0===c&&(c=null);e(f,function(b,d,e){if(Array.isArray(e)){var f=Math.min(e.length,a.data.length);c&&(f=Math.min(f,c.length));d=[];for(var g=0;g<f;g++)d[g]=c?c[g]:g}else d=c?c.slice(0):null;if(null===d)Array.isArray(e)&&(e=e[0]);else if(Array.isArray(d)){if(!Array.isArray(e))for(f=e,e=[],g=0;g<d.length;g++)e[g]=f;e.length=
Math.min(d.length,e.length)}h.push({type:"data",prop:b,traces:d,value:e})},"",0);return h}function e(a,f,h,d){Object.keys(a).forEach(function(g){var c=a[g];if("_"!==g[0]){var k=h+(0<d?".":"")+g;b.isPlainObject(c)?e(c,f,k,d+1):f(k,g,c)}})}var f=a("../registry"),b=a("../lib");l.manageCommandObserver=function(a,e,f,d){var g={},c=!0;e&&e._commandObserver&&(g=e._commandObserver);g.cache||(g.cache={});g.lookupTable={};var h=l.hasSimpleAPICommandBindings(a,f,g.lookupTable);if(e&&e._commandObserver){if(h)return g;
if(e._commandObserver.remove)return e._commandObserver.remove(),e._commandObserver=null,g}if(h){m(a,h,g.cache);g.check=function(){if(c){var b=m(a,h,g.cache);b.changed&&d&&void 0!==g.lookupTable[b.value]&&(g.disable(),Promise.resolve(d({value:b.value,type:h.type,prop:h.prop,traces:h.traces,index:g.lookupTable[b.value]})).then(g.enable,g.enable));return b.changed}};var k="plotly_relayout plotly_redraw plotly_restyle plotly_update plotly_animatingframe plotly_afterplot".split(" ");for(f=0;f<k.length;f++)a._internalOn(k[f],
g.check);g.remove=function(){for(var b=0;b<k.length;b++)a._removeInternalListener(k[b],g.check)}}else b.log("Unable to automatically bind plot updates to API command"),g.lookupTable={},g.remove=function(){};g.disable=function(){c=!1};g.enable=function(){c=!0};e&&(e._commandObserver=g);return g};l.hasSimpleAPICommandBindings=function(a,b,e){var d,f=b.length;for(d=0;d<f;d++){var c=b[d];var h=c.method;c=c.args;Array.isArray(c)||(c=[]);if(!h)return!1;c=l.computeAPICommandBindings(a,h,c);if(1!==c.length)return!1;
if(n){h=c[0];if(h.type!==n.type||h.prop!==n.prop)return!1;if(Array.isArray(n.traces))if(Array.isArray(h.traces)){h.traces.sort();for(var k=0;k<n.traces.length;k++)if(n.traces[k]!==h.traces[k])return!1}else return!1;else if(h.prop!==n.prop)return!1}else{var n=c[0];Array.isArray(n.traces)&&n.traces.sort()}h=c[0];h=h.value;if(Array.isArray(h))if(1===h.length)h=h[0];else return!1;e&&(e[h]=d)}return n};l.executeAPICommand=function(a,e,h){if("skip"===e)return Promise.resolve();var d=f.apiMethodRegistry[e];
a=[a];Array.isArray(h)||(h=[]);for(var g=0;g<h.length;g++)a.push(h[g]);return d.apply(null,a).catch(function(a){b.warn("API call to Plotly."+e+" rejected.",a);return Promise.reject(a)})};l.computeAPICommandBindings=function(a,b,e){Array.isArray(e)||(e=[]);switch(b){case "restyle":a=h(a,e);break;case "relayout":a=k(a,e);break;case "update":a=h(a,[e[0],e[2]]).concat(k(a,[e[1]]));break;case "animate":a=e;a=Array.isArray(a[0])&&1===a[0].length&&-1!==["string","number"].indexOf(typeof a[0][0])?[{type:"layout",
prop:"_currentFrame",value:a[0][0].toString()}]:[];break;default:a=[]}return a}},{"../lib":700,"../registry":829}],773:[function(a,p,l){var m=a("../lib/extend").extendFlat;l.attributes=function(a,h){a=a||{};h={valType:"info_array",editType:a.editType,items:[{valType:"number",min:0,max:1,editType:a.editType},{valType:"number",min:0,max:1,editType:a.editType}],dflt:[0,1]};h={x:m({},h,{}),y:m({},h,{}),editType:a.editType};a.noGridCell||(h.row={valType:"integer",min:0,dflt:0,editType:a.editType},h.column=
{valType:"integer",min:0,dflt:0,editType:a.editType});return h};l.defaults=function(a,h,e,f){var b=f&&f.x||[0,1];f=f&&f.y||[0,1];if(h=h.grid){var k=e("domain.column");void 0!==k&&(k<h.columns?b=h._domains.x[k]:delete a.domain.column);k=e("domain.row");void 0!==k&&(k<h.rows?f=h._domains.y[k]:delete a.domain.row)}e("domain.x",b);e("domain.y",f)}},{"../lib/extend":690}],774:[function(a,p,l){p.exports=function(a){var k=a.editType,h=a.colorEditType;void 0===h&&(h=k);k={family:{valType:"string",noBlank:!0,
strict:!0,editType:k},size:{valType:"number",min:1,editType:k},color:{valType:"color",editType:h},editType:k};a.arrayOk&&(k.family.arrayOk=!0,k.size.arrayOk=!0,k.color.arrayOk=!0);return k}},{}],775:[function(a,p,l){p.exports={_isLinkedToArray:"frames_entry",group:{valType:"string"},name:{valType:"string"},traces:{valType:"any"},baseframe:{valType:"string"},data:{valType:"any"},layout:{valType:"any"}}},{}],776:[function(a,p,l){l.projNames={equirectangular:"equirectangular",mercator:"mercator",orthographic:"orthographic",
"natural earth":"naturalEarth",kavrayskiy7:"kavrayskiy7",miller:"miller",robinson:"robinson",eckert4:"eckert4","azimuthal equal area":"azimuthalEqualArea","azimuthal equidistant":"azimuthalEquidistant","conic equal area":"conicEqualArea","conic conformal":"conicConformal","conic equidistant":"conicEquidistant",gnomonic:"gnomonic",stereographic:"stereographic",mollweide:"mollweide",hammer:"hammer","transverse mercator":"transverseMercator","albers usa":"albersUsa","winkel tripel":"winkel3",aitoff:"aitoff",
sinusoidal:"sinusoidal"};l.axesNames=["lonaxis","lataxis"];l.lonaxisSpan={orthographic:180,"azimuthal equal area":360,"azimuthal equidistant":360,"conic conformal":180,gnomonic:160,stereographic:180,"transverse mercator":180,"*":360};l.lataxisSpan={"conic conformal":150,stereographic:179.5,"*":180};l.scopeDefaults={world:{lonaxisRange:[-180,180],lataxisRange:[-90,90],projType:"equirectangular",projRotate:[0,0,0]},usa:{lonaxisRange:[-180,-50],lataxisRange:[15,80],projType:"albers usa"},europe:{lonaxisRange:[-30,
60],lataxisRange:[30,85],projType:"conic conformal",projRotate:[15,0,0],projParallels:[0,60]},asia:{lonaxisRange:[22,160],lataxisRange:[-15,55],projType:"mercator",projRotate:[0,0,0]},africa:{lonaxisRange:[-30,60],lataxisRange:[-40,40],projType:"mercator",projRotate:[0,0,0]},"north america":{lonaxisRange:[-180,-45],lataxisRange:[5,85],projType:"conic conformal",projRotate:[-100,0,0],projParallels:[29.5,45.5]},"south america":{lonaxisRange:[-100,-30],lataxisRange:[-60,15],projType:"mercator",projRotate:[0,
0,0]}};l.clipPad=.001;l.precision=.1;l.landColor="#F0DC82";l.waterColor="#3399FF";l.locationmodeToLayer={"ISO-3":"countries","USA-states":"subunits","country names":"countries"};l.sphereSVG={type:"Sphere"};l.fillLayers={ocean:1,land:1,lakes:1};l.lineLayers={subunits:1,countries:1,coastlines:1,rivers:1,frame:1};l.layers="bg ocean land lakes subunits countries coastlines rivers lataxis lonaxis frame backplot frontplot".split(" ");l.layersForChoropleth="bg ocean land subunits countries coastlines lataxis lonaxis frame backplot rivers lakes frontplot".split(" ");
l.layerNameToAdjective={ocean:"ocean",land:"land",lakes:"lake",subunits:"subunit",countries:"country",coastlines:"coastline",rivers:"river",frame:"frame"}},{}],777:[function(a,p,l){function m(a){this.id=a.id;this.graphDiv=a.graphDiv;this.container=a.container;this.topojsonURL=a.topojsonURL;this.isStatic=a.staticPlot;this.midPt=this.bounds=this.fitScale=this.viewInitial=this.projection=this.topojson=this.topojsonName=null;this.hasChoropleth=!1;this.traceHash={};this.layers={};this.basePaths={};this.dataPaths=
{};this.dataPoints={};this.bgRect=this.clipRect=this.clipDef=null;this.makeFramework()}function k(a){var b=a.projection.type,c=e.geo[B.projNames[b]](),d=a._isClipped?B.lonaxisSpan[b]/2:null;a=["center","rotate","parallels","clipExtent"];b=function(a){return a?c:[]};for(var f=0;f<a.length;f++){var g=a[f];"function"!==typeof c[g]&&(c[g]=b)}c.isLonLatOverEdges=function(a){if(null===c(a))return!0;if(d){var b=c.rotate();return e.geo.distance(a,[-b[0],-b[1]])>d*Math.PI/180}return!1};c.getPath=function(){return e.geo.path().projection(c)};
c.getBounds=function(a){return c.getPath().bounds(a)};c.fitExtent=function(a,b){var d=a[1][0]-a[0][0],e=a[1][1]-a[0][1],f=c.clipExtent&&c.clipExtent();c.scale(150).translate([0,0]);f&&c.clipExtent(null);var g=c.getBounds(b);b=Math.min(d/(g[1][0]-g[0][0]),e/(g[1][1]-g[0][1]));d=+a[0][0]+(d-b*(g[1][0]+g[0][0]))/2;a=+a[0][1]+(e-b*(g[1][1]+g[0][1]))/2;f&&c.clipExtent(f);return c.scale(150*b).translate([d,a])};c.precision(B.precision);d&&c.clipAngle(d-B.clipPad);return c}function h(a,b){var c=b[a].dtick,
d=B.scopeDefaults[b.scope];b=d.lonaxisRange;d=d.lataxisRange;a="lonaxis"===a?[c]:[0,c];return e.geo.graticule().extent([[b[0],d[0]],[b[1],d[1]]]).step(a)}var e=a("d3"),f=a("../../registry"),b=a("../../lib"),n=a("../../components/color"),q=a("../../components/drawing"),r=a("../../components/fx"),d=a("../plots"),g=a("../cartesian/axes"),c=a("../../components/dragelement"),v=a("../cartesian/select").prepSelect,t=a("../cartesian/select").selectOnClick,y=a("./zoom"),B=a("./constants"),w=a("../../lib/topojson_utils"),
x=a("topojson-client").feature;a("./projections")(e);a=m.prototype;p.exports=function(a){return new m(a)};a.plot=function(a,b,c){var d=this,e=w.getTopojsonName(b[this.id]);null===d.topojson||e!==d.topojsonName?(d.topojsonName=e,void 0===PlotlyGeoAssets.topojson[d.topojsonName]?c.push(d.fetchTopojson().then(function(c){PlotlyGeoAssets.topojson[d.topojsonName]=c;d.topojson=c;d.update(a,b)})):(d.topojson=PlotlyGeoAssets.topojson[d.topojsonName],d.update(a,b))):d.update(a,b)};a.fetchTopojson=function(){var a=
w.getTopojsonPath(this.topojsonURL,this.topojsonName);return new Promise(function(b,c){e.json(a,function(d,e){if(d)return 404===d.status?c(Error(["plotly.js could not find topojson file at",a,". Make sure the *topojsonURL* plot config option is set properly."].join(" "))):c(Error(["unexpected error while fetching topojson file at",a].join(" ")));b(e)})})};a.update=function(a,b){var c=b[this.id];if(!this.updateProjection(b,c)){this.hasChoropleth=!1;for(var e=0;e<a.length;e++)if("choropleth"===a[e][0].trace.type){this.hasChoropleth=
!0;break}this.viewInitial||this.saveViewInitial(c);this.updateBaseLayers(b,c);this.updateDims(b,c);this.updateFx(b,c);d.generalUpdatePerTraceModule(this.graphDiv,this,a,c);a=this.layers.frontplot.select(".scatterlayer");this.dataPoints.point=a.selectAll(".point");this.dataPoints.text=a.selectAll("text");this.dataPaths.line=a.selectAll(".js-line");a=this.layers.backplot.select(".choroplethlayer");this.dataPaths.choropleth=a.selectAll("path");this.render()}};a.updateProjection=function(a,c){var d=a._size,
e=c.domain,g=c.projection,h=g.rotation||{},n=c.center||{};a=this.projection=k(c);a.center([n.lon-h.lon,n.lat-h.lat]).rotate([-h.lon,-h.lat,h.roll]).parallels(g.parallels);d=[[d.l+d.w*e.x[0],d.t+d.h*(1-e.y[1])],[d.l+d.w*e.x[1],d.t+d.h*(1-e.y[0])]];h=c.lonaxis.range;var m=c.lataxis.range,l=B.clipPad;e=h[0]+l;h=h[1]-l;var p=m[0]+l;m=m[1]-l;0<e&&0>h&&(h+=360);l=(h-e)/4;e={type:"Polygon",coordinates:[[[e,p],[e,m],[e+l,m],[e+2*l,m],[e+3*l,m],[h,m],[h,p],[h-l,p],[h-2*l,p],[h-3*l,p],[e,p]]]};a.fitExtent(d,
e);d=this.bounds=a.getBounds(e);e=this.fitScale=a.scale();h=a.translate();if(!(isFinite(d[0][0])&&isFinite(d[0][1])&&isFinite(d[1][0])&&isFinite(d[1][1]))||isNaN(h[0])||isNaN(h[0])){a=this.graphDiv;c=["projection.rotation","center","lonaxis.range","lataxis.range"];g={};for(n=0;n<c.length;n++)g[this.id+"."+c[n]]=null;this.viewInitial=null;b.warn("Invalid geo settings, relayout'ing to default view.");a._promises.push(f.call("relayout",a,g));return"Invalid geo settings, relayout'ing to default view."}p=
this.midPt=[(d[0][0]+d[1][0])/2,(d[0][1]+d[1][1])/2];a.scale(g.scale*e).translate([h[0]+(p[0]-h[0]),h[1]+(p[1]-h[1])]).clipExtent(d);c._isAlbersUsa&&(c=a([n.lon,n.lat]),g=a.translate(),a.translate([g[0]-(c[0]-g[0]),g[1]-(c[1]-g[1])]))};a.updateBaseLayers=function(a,b){function c(a){return"lonaxis"===a||"lataxis"===a}var d=this,f=d.topojson,g=d.layers,k=d.basePaths;a=(this.hasChoropleth?B.layersForChoropleth:B.layers).filter(function(a){return B.lineLayers[a]||B.fillLayers[a]?b["show"+a]:c(a)?b[a].showgrid:
!0});a=d.framework.selectAll(".layer").data(a,String);a.exit().each(function(a){delete g[a];delete k[a];e.select(this).remove()});a.enter().append("g").attr("class",function(a){return"layer "+a}).each(function(a){var b=g[a]=e.select(this);"bg"===a?d.bgRect=b.append("rect").style("pointer-events","all"):c(a)?k[a]=b.append("path").style("fill","none"):"backplot"===a?b.append("g").classed("choroplethlayer",!0):"frontplot"===a?b.append("g").classed("scatterlayer",!0):B.lineLayers[a]?k[a]=b.append("path").style("fill",
"none").style("stroke-miterlimit",2):B.fillLayers[a]&&(k[a]=b.append("path").style("stroke","none"))});a.order();a.each(function(a){var d=k[a],e=B.layerNameToAdjective[a];"frame"===a?d.datum(B.sphereSVG):B.lineLayers[a]||B.fillLayers[a]?d.datum(x(f,f.objects[a])):c(a)&&d.datum(h(a,b)).call(n.stroke,b[a].gridcolor).call(q.dashLine,"",b[a].gridwidth);B.lineLayers[a]?d.call(n.stroke,b[e+"color"]).call(q.dashLine,"",b[e+"width"]):B.fillLayers[a]&&d.call(n.fill,b[e+"color"])})};a.updateDims=function(a,
b){var c=this.bounds,d=(b.framewidth||0)/2;a=c[0][0]-d;var e=c[0][1]-d,f=c[1][0]-a+d;c=c[1][1]-e+d;q.setRect(this.clipRect,a,e,f,c);this.bgRect.call(q.setRect,a,e,f,c).call(n.fill,b.bgcolor);this.xaxis._offset=a;this.xaxis._length=f;this.yaxis._offset=e;this.yaxis._length=c};a.updateFx=function(a,b){function d(){var a=h.viewInitial,b={},c;for(c in a)b[h.id+"."+c]=a[c];f.call("_guiRelayout",k,b);k.emit("plotly_doubleclick",null)}function g(a){return h.projection.invert([a[0]+h.xaxis._offset,a[1]+h.yaxis._offset])}
var h=this,k=h.graphDiv,n=h.bgRect,m=a.dragmode,l=a.clickmode;if(!h.isStatic){var p;"select"===m?p=function(a,b){(a.range={})[h.id]=[g([b.xmin,b.ymin]),g([b.xmax,b.ymax])]}:"lasso"===m&&(p=function(a,b,c){(a.lassoPoints={})[h.id]=c.filtered.map(g)});var q={element:h.bgRect.node(),gd:k,plotinfo:{id:h.id,xaxis:h.xaxis,yaxis:h.yaxis,fillRangeItems:p},xaxes:[h.xaxis],yaxes:[h.yaxis],subplot:h.id,clickFn:function(b){2===b&&a._zoomlayer.selectAll(".select-outline").remove()}};if("pan"===m){if(n.node().onmousedown=
null,n.call(y(h,b)),n.on("dblclick.zoom",d),!k._context._scrollZoom.geo)n.on("wheel.zoom",null)}else if("select"===m||"lasso"===m)n.on(".zoom",null),q.prepFn=function(a,b,c){v(a,b,c,q,m)},c.init(q);n.on("mousemove",function(){var a=h.projection.invert(e.mouse(this));if(!a||isNaN(a[0])||isNaN(a[1]))return c.unhover(k,e.event);h.xaxis.p2c=function(){return a[0]};h.yaxis.p2c=function(){return a[1]};r.hover(k,e.event,h.id)});n.on("mouseout",function(){k._dragging||c.unhover(k,e.event)});n.on("click",
function(){"select"!==m&&"lasso"!==m&&(-1<l.indexOf("select")&&t(e.event,k,[h.xaxis],[h.yaxis],h.id,q),-1<l.indexOf("event")&&r.click(k,e.event))})}};a.makeFramework=function(){var a=this,b=a.graphDiv,c=b._fullLayout,d="clip"+c._uid+a.id;a.clipDef=c._clips.append("clipPath").attr("id",d);a.clipRect=a.clipDef.append("rect");a.framework=e.select(a.container).append("g").attr("class","geo "+a.id).call(q.setClipUrl,d,b);a.project=function(b){return(b=a.projection(b))?[b[0]-a.xaxis._offset,b[1]-a.yaxis._offset]:
[null,null]};a.xaxis={_id:"x",c2p:function(b){return a.project(b)[0]}};a.yaxis={_id:"y",c2p:function(b){return a.project(b)[1]}};a.mockAxis={type:"linear",showexponent:"all",exponentformat:"B"};g.setConvert(a.mockAxis,c)};a.saveViewInitial=function(a){var b=a.center||{},c=a.projection,d=c.rotation||{};this.viewInitial=a._isScoped?{"center.lon":b.lon,"center.lat":b.lat,"projection.scale":c.scale}:a._isClipped?{"projection.scale":c.scale,"projection.rotation.lon":d.lon,"projection.rotation.lat":d.lat}:
{"center.lon":b.lon,"center.lat":b.lat,"projection.scale":c.scale,"projection.rotation.lon":d.lon}};a.render=function(){function a(a){return(a=c(a.lonlat))?"translate("+a[0]+","+a[1]+")":null}function b(a){return c.isLonLatOverEdges(a.lonlat)?"none":null}var c=this.projection,d=c.getPath(),e;for(e in this.basePaths)this.basePaths[e].attr("d",d);for(e in this.dataPaths)this.dataPaths[e].attr("d",function(a){return d(a.geojson)});for(e in this.dataPoints)this.dataPoints[e].attr("display",b).attr("transform",
a)}},{"../../components/color":577,"../../components/dragelement":595,"../../components/drawing":598,"../../components/fx":616,"../../lib":700,"../../lib/topojson_utils":727,"../../registry":829,"../cartesian/axes":748,"../cartesian/select":765,"../plots":810,"./constants":776,"./projections":782,"./zoom":783,d3:154,"topojson-client":524}],778:[function(a,p,l){var m=a("./geo"),k=a("../../plots/get_data").getSubplotCalcData;p=a("../../lib").counterRegex;l.name="geo";l.attr="geo";l.idRoot="geo";l.idRegex=
l.attrRegex=p("geo");l.attributes=a("./layout/attributes");l.layoutAttributes=a("./layout/layout_attributes");l.supplyLayoutDefaults=a("./layout/defaults");l.plot=function(a){var e=a._fullLayout,f=a.calcdata,b=e._subplots.geo;void 0===window.PlotlyGeoAssets&&(window.PlotlyGeoAssets={topojson:{}});for(var h=0;h<b.length;h++){var l=b[h],p=k(f,"geo",l),d=e[l]._subplot;d||(d=m({id:l,graphDiv:a,container:e._geolayer.node(),topojsonURL:a._context.topojsonURL,staticPlot:a._context.staticPlot}),e[l]._subplot=
d);d.plot(p,e,a._promises)}};l.clean=function(a,e,f,b){a=b._subplots.geo||[];for(f=0;f<a.length;f++){var h=a[f],k=b[h]._subplot;!e[h]&&k&&(k.framework.remove(),k.clipDef.remove())}};l.updateFx=function(a){a=a._fullLayout;for(var e=a._subplots.geo,f=0;f<e.length;f++){var b=a[e[f]];b._subplot.updateFx(a,b)}}},{"../../lib":700,"../../plots/get_data":784,"./geo":777,"./layout/attributes":779,"./layout/defaults":780,"./layout/layout_attributes":781}],779:[function(a,p,l){p.exports={geo:{valType:"subplotid",
dflt:"geo",editType:"calc"}}},{}],780:[function(a,p,l){function m(a,e,k){a=k("resolution");var b=k("scope"),d=h.scopeDefaults[b],g=k("projection.type",d.projType),c=e._isAlbersUsa="albers usa"===g;c&&(b=e.scope="usa");var n=e._isScoped="world"!==b,m=e._isConic=-1!==g.indexOf("conic");e._isClipped=!!h.lonaxisSpan[g];for(var l=0;l<f.length;l++){var p=f[l];var q=[30,10][l];if(n)var u=d[p+"Range"];else{u=h[p+"Span"];u=(u[g]||u["*"])/2;var A=k("projection.rotation."+p.substr(0,3),d.projRotate[l]);u=[A-
u,A+u]}u=k(p+".range",u);k(p+".tick0",u[0]);k(p+".dtick",q);if(q=k(p+".showgrid"))k(p+".gridcolor"),k(p+".gridwidth")}g=e.lonaxis.range;e=e.lataxis.range;l=g[0];g=g[1];0<l&&0>g&&(g+=360);g=(l+g)/2;if(!c){l=n?d.projRotate:[g,0,0];var w=k("projection.rotation.lon",l[0]);k("projection.rotation.lat",l[1]);k("projection.rotation.roll",l[2]);if(q=k("showcoastlines",!n))k("coastlinecolor"),k("coastlinewidth");(q=k("showocean"))&&k("oceancolor")}c?(w=-96.6,c=38.7):(w=n?g:w,c=(e[0]+e[1])/2);k("center.lon",
w);k("center.lat",c);m&&k("projection.parallels",d.projParallels||[0,60]);k("projection.scale");(q=k("showland"))&&k("landcolor");(q=k("showlakes"))&&k("lakecolor");if(q=k("showrivers"))k("rivercolor"),k("riverwidth");if(q=k("showcountries",n&&"usa"!==b))k("countrycolor"),k("countrywidth");if("usa"===b||"north america"===b&&50===a)k("showsubunits",!0),k("subunitcolor"),k("subunitwidth");!n&&(q=k("showframe",!0))&&(k("framecolor"),k("framewidth"));k("bgcolor")}var k=a("../../subplot_defaults"),h=a("../constants"),
e=a("./layout_attributes"),f=h.axesNames;p.exports=function(a,f,h){k(a,f,h,{type:"geo",attributes:e,handleDefaults:m,partition:"y"})}},{"../../subplot_defaults":824,"../constants":776,"./layout_attributes":781}],781:[function(a,p,l){l=a("../../../components/color/attributes");var m=a("../../domain").attributes,k=a("../constants");a=a("../../../plot_api/edit_types").overrideAll;var h={range:{valType:"info_array",items:[{valType:"number"},{valType:"number"}]},showgrid:{valType:"boolean",dflt:!1},tick0:{valType:"number"},
dtick:{valType:"number"},gridcolor:{valType:"color",dflt:l.lightLine},gridwidth:{valType:"number",min:0,dflt:1}};(p.exports=a({domain:m({name:"geo"},{}),resolution:{valType:"enumerated",values:[110,50],dflt:110,coerceNumber:!0},scope:{valType:"enumerated",values:Object.keys(k.scopeDefaults),dflt:"world"},projection:{type:{valType:"enumerated",values:Object.keys(k.projNames)},rotation:{lon:{valType:"number"},lat:{valType:"number"},roll:{valType:"number"}},parallels:{valType:"info_array",items:[{valType:"number"},
{valType:"number"}]},scale:{valType:"number",min:0,dflt:1}},center:{lon:{valType:"number"},lat:{valType:"number"}},showcoastlines:{valType:"boolean"},coastlinecolor:{valType:"color",dflt:l.defaultLine},coastlinewidth:{valType:"number",min:0,dflt:1},showland:{valType:"boolean",dflt:!1},landcolor:{valType:"color",dflt:k.landColor},showocean:{valType:"boolean",dflt:!1},oceancolor:{valType:"color",dflt:k.waterColor},showlakes:{valType:"boolean",dflt:!1},lakecolor:{valType:"color",dflt:k.waterColor},showrivers:{valType:"boolean",
dflt:!1},rivercolor:{valType:"color",dflt:k.waterColor},riverwidth:{valType:"number",min:0,dflt:1},showcountries:{valType:"boolean"},countrycolor:{valType:"color",dflt:l.defaultLine},countrywidth:{valType:"number",min:0,dflt:1},showsubunits:{valType:"boolean"},subunitcolor:{valType:"color",dflt:l.defaultLine},subunitwidth:{valType:"number",min:0,dflt:1},showframe:{valType:"boolean"},framecolor:{valType:"color",dflt:l.defaultLine},framewidth:{valType:"number",min:0,dflt:1},bgcolor:{valType:"color",
dflt:l.background},lonaxis:h,lataxis:h},"plot","from-root")).uirevision={valType:"any",editType:"none"}},{"../../../components/color/attributes":576,"../../../plot_api/edit_types":731,"../../domain":773,"../constants":776}],782:[function(a,p,l){p.exports=function(a){function k(a,b){return{type:"Feature",id:a.id,properties:a.properties,geometry:h(a.geometry,b)}}function h(b,c){if(!b)return null;if("GeometryCollection"===b.type)return{type:"GeometryCollection",geometries:object.geometries.map(function(a){return h(a,
c)})};if(!H.hasOwnProperty(b.type))return null;var d=H[b.type];a.geo.stream(b,c(d));return d.result()}function e(){}function f(a){return 1<a?O:-1>a?-O:Math.asin(a)}function b(a){return 1<a?0:-1>a?M:Math.acos(a)}function n(a,b){var c=(2+O)*Math.sin(b);b/=2;for(var d=0,e=Infinity;10>d&&1E-6<Math.abs(e);d++)e=Math.cos(b),b-=e=(b+Math.sin(b)*(e+2)-c)/(2*e*(1+e));return[2/Math.sqrt(M*(4+M))*a*(1+Math.cos(b)),2*Math.sqrt(M/(4+M))*Math.sin(b)]}function m(a,b){function c(c,d){c=z(c/b,d);c[0]*=a;return c}
2>arguments.length&&(b=a);if(1===b)return z;if(Infinity===b)return l;c.invert=function(c,d){c=z.invert(c/a,d);c[0]*=b;return c};return c}function l(a,b){return[a*Math.cos(b)/Math.cos(b/=2),2*Math.sin(b)]}function d(a,b){return[3*a/(2*M)*Math.sqrt(M*M/3-b*b),b]}function g(a,b){return[a,1.25*Math.log(Math.tan(M/4+.4*b))]}function c(a){return function(b){var c=a*Math.sin(b),d=30,e;do b-=e=(b+Math.sin(b)-c)/(1+Math.cos(b));while(1E-6<Math.abs(e)&&0<--d);return b/2}}function p(a,b){var c=b*b,d=c*c;return[a*
(.8707-.131979*c+d*(-.013791+d*(.003971*c-.001529*d))),b*(1.007226+c*(.015085+d*(-.044475+.028874*c-.005916*d)))]}function t(a,b){var c=Math.min(18,36*Math.abs(b)/M),d=Math.floor(c);c-=d;var e=(k=F[d])[0],f=k[1],g=(k=F[++d])[0],h=k[1];d=(k=F[Math.min(19,++d)])[0];k=k[1];var k;return[a*(g+c*(d-e)/2+c*c*(d-2*g+e)/2),(0<b?O:-O)*(h+c*(k-f)/2+c*c*(k-2*h+f)/2)]}function q(a,b){return[a*Math.cos(b),b]}function B(a,c){var d=Math.cos(c);var e=(e=b(d*Math.cos(a/=2)))?e/Math.sin(e):1;return[2*d*Math.sin(a)*
e,Math.sin(c)*e]}function w(a,b){var c=B(a,b);return[(c[0]+a/O)/2,(c[1]+b)/2]}a.geo.project=function(a,b){b=b.stream;if(!b)throw Error("not yet supported");return(a&&x.hasOwnProperty(a.type)?x[a.type]:h)(a,b)};var x={Feature:k,FeatureCollection:function(a,b){return{type:"FeatureCollection",features:a.features.map(function(a){return k(a,b)})}}},A=[],C=[],P={point:function(a,b){A.push([a,b])},result:function(){var a=A.length?2>A.length?{type:"Point",coordinates:A[0]}:{type:"MultiPoint",coordinates:A}:
null;A=[];return a}},J={lineStart:e,point:function(a,b){A.push([a,b])},lineEnd:function(){A.length&&(C.push(A),A=[])},result:function(){var a=C.length?2>C.length?{type:"LineString",coordinates:C[0]}:{type:"MultiLineString",coordinates:C}:null;C=[];return a}},E={polygonStart:e,lineStart:e,point:function(a,b){A.push([a,b])},lineEnd:function(){var a=A.length;if(a){do A.push(A[0].slice());while(4>++a);C.push(A);A=[]}},polygonEnd:e,result:function(){if(!C.length)return null;var a=[],b=[];C.forEach(function(c){if(4>
(e=c.length))var d=!1;else{d=0;for(var e,f=c[e-1][1]*c[0][0]-c[e-1][0]*c[0][1];++d<e;)f+=c[d-1][1]*c[d][0]-c[d-1][0]*c[d][1];d=0>=f}d?a.push([c]):b.push(c)});b.forEach(function(b){var c=b[0];a.some(function(a){for(var d=a[0],e=c[0],f=c[1],g=!1,h=0,k=d.length,n=k-1;h<k;n=h++){var m=d[h],l=m[0];m=m[1];var p=d[n];n=p[0];p=p[1];m>f^p>f&&e<(n-l)*(f-m)/(p-m)+l&&(g=!g)}if(g)return a.push(b),!0})||a.push([b])});C=[];return a.length?1<a.length?{type:"MultiPolygon",coordinates:a}:{type:"Polygon",coordinates:a[0]}:
null}},H={Point:P,MultiPoint:P,LineString:J,MultiLineString:J,Polygon:E,MultiPolygon:E,Sphere:E},M=Math.PI,O=M/2,I=M/180,Q=180/M,N=a.geo.projection,L=a.geo.projectionMutator;a.geo.interrupt=function(b){function c(a,c){for(var d=0>c?-1:1,e=g[+(0>c)],f=0,h=e.length-1;f<h&&a>e[f][2][0];++f);a=b(a-e[f][1][0],c);a[0]+=b(e[f][1][0],d*c>d*e[f][0][1]?e[f][0][1]:c)[0];return a}function d(){h=g.map(function(a){return a.map(function(a){var c=b(a[0][0],a[0][1])[0],d=b(a[2][0],a[2][1])[0],e=b(a[1][0],a[0][1])[1];
a=b(a[1][0],a[1][1])[1];if(e>a){var f=e;e=a;a=f}return[[c,e],[d,a]]})})}function e(){for(var b=[],c=0,d=g[0].length;c<d;++c){var e=g[0][c],h=180*e[0][0]/M,k=180*e[0][1]/M,n=180*e[1][1]/M,m=180*e[2][0]/M;e=180*e[2][1]/M;b.push(f([[h+1E-6,k+1E-6],[h+1E-6,n-1E-6],[m-1E-6,n-1E-6],[m-1E-6,e+1E-6]],30))}for(c=g[1].length-1;0<=c;--c)e=g[1][c],h=180*e[0][0]/M,k=180*e[0][1]/M,n=180*e[1][1]/M,m=180*e[2][0]/M,e=180*e[2][1]/M,b.push(f([[m-1E-6,e-1E-6],[m-1E-6,n+1E-6],[h+1E-6,n+1E-6],[h+1E-6,k-1E-6]],30));return{type:"Polygon",
coordinates:[a.merge(b)]}}function f(a,b){for(var c=-1,d=a.length,e=a[0],f,g,h,k=[];++c<d;){f=a[c];g=(f[0]-e[0])/b;h=(f[1]-e[1])/b;for(var n=0;n<b;++n)k.push([e[0]+n*g,e[1]+n*h]);e=f}k.push(f);return k}var g=[[[[-M,0],[0,O],[M,0]]],[[[-M,0],[0,-O],[M,0]]]],h;b.invert&&(c.invert=function(a,d){for(var e=h[+(0>d)],f=g[+(0>d)],k=0,n=e.length;k<n;++k){var m=e[k];if(m[0][0]<=a&&a<m[1][0]&&m[0][1]<=d&&d<m[1][1])return e=b.invert(a-b(f[k][1][0],0)[0],d),e[0]+=f[k][1][0],f=c(e[0],e[1]),a=[a,d],1E-6>Math.abs(f[0]-
a[0])&&1E-6>Math.abs(f[1]-a[1])?e:null}});var k=a.geo.projection(c),n=k.stream;k.stream=function(b){var c=k.rotate(),d=n(b),f=(k.rotate([0,0]),n(b));k.rotate(c);d.sphere=function(){a.geo.stream(e(),f)};return d};k.lobes=function(a){if(!arguments.length)return g.map(function(a){return a.map(function(a){return[[180*a[0][0]/M,180*a[0][1]/M],[180*a[1][0]/M,180*a[1][1]/M],[180*a[2][0]/M,180*a[2][1]/M]]})});g=a.map(function(a){return a.map(function(a){return[[a[0][0]*M/180,a[0][1]*M/180],[a[1][0]*M/180,
a[1][1]*M/180],[a[2][0]*M/180,a[2][1]*M/180]]})});d();return k};return k};n.invert=function(a,b){b=.5*b*Math.sqrt((4+M)/M);var c=f(b),d=Math.cos(c);return[a/(2/Math.sqrt(M*(4+M))*(1+d)),f((c+b*(d+2))/(2+O))]};(a.geo.eckert4=function(){return N(n)}).raw=n;var z=a.geo.azimuthalEqualArea.raw;l.invert=function(a,b){b=2*f(b/2);return[a*Math.cos(b/2)/Math.cos(b),b]};(a.geo.hammer=function(){var a=2,b=L(m),c=b(a);c.coefficient=function(c){return arguments.length?b(a=+c):a};return c}).raw=m;d.invert=function(a,
b){return[2/3*M*a/Math.sqrt(M*M/3-b*b),b]};(a.geo.kavrayskiy7=function(){return N(d)}).raw=d;g.invert=function(a,b){return[a,2.5*Math.atan(Math.exp(.8*b))-.625*M]};(a.geo.miller=function(){return N(g)}).raw=g;c(M);var ca=function(a,b,d){function e(c,d){return[a*c*Math.cos(d=g(d)),b*Math.sin(d)]}var g=c(d);e.invert=function(c,e){e=f(e/b);return[c/(a*Math.cos(e)),f((2*e+Math.sin(2*e))/d)]};return e}(Math.SQRT2/O,Math.SQRT2,M);(a.geo.mollweide=function(){return N(ca)}).raw=ca;p.invert=function(a,b){var c=
b,d=25;do{var e=c*c;var f=e*e;c-=f=(c*(1.007226+e*(.015085+f*(-.044475+.028874*e-.005916*f)))-b)/(1.007226+e*(.045255+f*(-.311325+.259866*e-.005916*11*f)))}while(1E-6<Math.abs(f)&&0<--d);return[a/(.8707+(e=c*c)*(-.131979+e*(-.013791+e*e*e*(.003971-.001529*e)))),c]};(a.geo.naturalEarth=function(){return N(p)}).raw=p;var F=[[.9986,-.062],[1,0],[.9986,.062],[.9954,.124],[.99,.186],[.9822,.248],[.973,.31],[.96,.372],[.9427,.434],[.9216,.4958],[.8962,.5571],[.8679,.6176],[.835,.6769],[.7986,.7346],[.7597,
.7903],[.7186,.8435],[.6732,.8936],[.6213,.9394],[.5722,.9761],[.5322,1]];F.forEach(function(a){a[1]*=1.0144});t.invert=function(a,b){var c=b/O,d=90*c,e=Math.min(18,Math.abs(d/5)),f=Math.max(0,Math.floor(e));do{var g=F[f][1],h=F[f+1][1],k=F[Math.min(19,f+2)][1],n=k-g,m=2*(Math.abs(c)-h)/n;g=(k-2*h+g)/n;m*=1-g*m*(1-2*g*m);if(0<=m||1===f){d=(0<=b?5:-5)*(m+e);c=50;do e=Math.min(18,Math.abs(d)/5),f=Math.floor(e),m=e-f,g=F[f][1],h=F[f+1][1],k=F[Math.min(19,f+2)][1],d-=(e=(0<=b?O:-O)*(h+m*(k-g)/2+m*m*(k-
2*h+g)/2)-b)*Q;while(1E-12<Math.abs(e)&&0<--c);break}}while(0<=--f);b=F[f][0];e=F[f+1][0];f=F[Math.min(19,f+2)][0];return[a/(e+m*(f-b)/2+m*m*(f-2*e+b)/2),d*I]};(a.geo.robinson=function(){return N(t)}).raw=t;q.invert=function(a,b){return[a/Math.cos(b),b]};(a.geo.sinusoidal=function(){return N(q)}).raw=q;B.invert=function(a,c){if(!(a*a+4*c*c>M*M+1E-6)){var d=a,e=c,f=25;do{var g=Math.sin(d),h=Math.sin(d/2),k=Math.cos(d/2),n=Math.sin(e),m=Math.cos(e),l=Math.sin(2*e),p=n*n,t=m*m,r=h*h,q=1-t*k*k,v=q?b(m*
k)*Math.sqrt(u=1/q):u=0,u;q=2*v*m*h-a;var y=v*n-c,A=u*(t*r+v*m*k*p),B=u*(.5*g*l-2*v*n*h);g=.25*u*(l*h-v*n*t*g);m=u*(p*k+v*r*m);k=B*g-m*A;if(!k)break;B=(y*B-q*m)/k;q=(q*g-y*A)/k;d-=B;e-=q}while((1E-6<Math.abs(B)||1E-6<Math.abs(q))&&0<--f);return[d,e]}};(a.geo.aitoff=function(){return N(B)}).raw=B;w.invert=function(a,c){var d=a,e=c,f=25;do{var g=Math.cos(e),h=Math.sin(e),k=Math.sin(2*e),n=h*h,m=g*g,l=Math.sin(d),p=Math.cos(d/2),t=Math.sin(d/2),r=t*t,q=1-m*p*p,v=q?b(g*p)*Math.sqrt(u=1/q):u=0,u;q=.5*
(2*v*g*t+d/O)-a;var y=.5*(v*h+e)-c,A=.5*u*(m*r+v*g*p*n)+.5/O,B=u*(l*k/4-v*h*t);h=.125*u*(k*t-v*h*m*l);n=.5*u*(n*p+v*r*g)+.5;g=B*h-n*A;B=(y*B-q*n)/g;q=(q*h-y*A)/g;d-=B;e-=q}while((1E-6<Math.abs(B)||1E-6<Math.abs(q))&&0<--f);return[d,e]};(a.geo.winkel3=function(){return N(w)}).raw=w}},{}],783:[function(a,p,l){function m(a,b){return c.behavior.zoom().translate(b.translate()).scale(b.scale())}function k(a,b,c){function d(a,b){m[e+"."+a]=v.nestedProperty(h,a).get();t.call("_storeDirectGUIEdit",g,k._preGUI,
m);var c=v.nestedProperty(n,a);c.get()!==b&&(c.set(b),v.nestedProperty(h,a).set(b),l[e+"."+a]=b)}var e=a.id,f=a.graphDiv,g=f.layout,h=g[e],k=f._fullLayout,n=k[e],m={},l={};c(d);d("projection.scale",b.scale()/a.fitScale);f.emit("plotly_relayout",l)}function h(a,b){function d(c){var d=b.invert(a.midPt);c("center.lon",d[0]);c("center.lat",d[1])}var e=m(a,b);e.on("zoomstart",function(){c.select(this).style(w)}).on("zoom",function(){b.scale(c.event.scale).translate(c.event.translate);a.render()}).on("zoomend",
function(){c.select(this).style(x);k(a,b,d)});return e}function e(a,b){function d(c){var d=b.rotate(),e=b.invert(a.midPt);c("projection.rotation.lon",-d[0]);c("center.lon",e[0]);c("center.lat",e[1])}var e=m(a,b),f,g,h,n,l,p,t,r,q;e.on("zoomstart",function(){c.select(this).style(w);f=c.mouse(this);g=b.rotate();h=b.translate();n=g;l=b.invert(f)}).on("zoom",function(){p=c.mouse(this);var d=f;var k=b.invert(d);k?(k=b(k),d=2<Math.abs(k[0]-d[0])||2<Math.abs(k[1]-d[1])):d=!0;d?(e.scale(b.scale()),e.translate(b.translate())):
(b.scale(c.event.scale),b.translate([h[0],c.event.translate[1]]),l?b.invert(p)&&(r=b.invert(p),t=[n[0]+(r[0]-l[0]),g[1],g[2]],b.rotate(t),n=t):(f=p,l=b.invert(f)),q=!0,a.render())}).on("zoomend",function(){c.select(this).style(x);q&&k(a,b,d)});return e}function f(a,e){function f(a){t++||a({type:"zoomstart"})}function h(a){var b=e.rotate();a("projection.rotation.lon",-b[0]);a("projection.rotation.lat",-b[1])}e.rotate();e.scale();var l=m(a,e),p=g(l,"zoomstart","zoom","zoomend"),t=0,v=l.on,u;l.on("zoomstart",
function(){c.select(this).style(w);var a=c.mouse(this),g=e.rotate(),h=g,k=e.translate(),m=n(g);u=b(e,a);v.call(l,"zoom",function(){var f=c.mouse(this);e.scale(c.event.scale);if(!u)a=f,u=b(e,a);else if(b(e,f)){e.rotate(g).translate(k);var n=b(e,f);var l=u;if(l&&n){f=[l[1]*n[2]-l[2]*n[1],l[2]*n[0]-l[0]*n[2],l[0]*n[1]-l[1]*n[0]];var t=Math.sqrt(d(f,f));n=.5*Math.acos(Math.max(-1,Math.min(1,d(l,n))));l=Math.sin(n)/t;var v=t&&[Math.cos(n),f[2]*l,-f[1]*l,f[0]*l]}else v=void 0;f=m[0];t=m[1];n=m[2];l=m[3];
var y=v[0],A=v[1],w=v[2];v=v[3];f=[f*y-t*A-n*w-l*v,f*A+t*y+n*v-l*w,f*w-t*v+n*y+l*A,f*v+t*w-n*A+l*y];n=[Math.atan2(2*(f[0]*f[1]+f[2]*f[3]),1-2*(f[1]*f[1]+f[2]*f[2]))*B,Math.asin(Math.max(-1,Math.min(1,2*(f[0]*f[2]-f[3]*f[1]))))*B,Math.atan2(2*(f[0]*f[3]+f[1]*f[2]),1-2*(f[2]*f[2]+f[3]*f[3]))*B];t=u;f=h;y=r(t,2,n[0]);y=r(y,1,n[1]);y=r(y,0,n[2]-f[2]);l=t[0];v=t[1];t=t[2];n=y[0];A=y[1];y=y[2];w=Math.atan2(v,l)*B;v=Math.sqrt(l*l+v*v);Math.abs(A)>v?(l=(0<A?90:-90)-w,v=0):(l=Math.asin(A/v)*B-w,v=Math.sqrt(v*
v-A*A));A=180-l-2*w;w=(Math.atan2(y,n)-Math.atan2(t,v))*B;t=(Math.atan2(y,n)-Math.atan2(t,-v))*B;n=q(f[0],f[1],l,w);y=q(f[0],f[1],A,t);f=n<=y?[l,w,f[2]]:[A,t,f[2]];isFinite(f[0])&&isFinite(f[1])&&isFinite(f[2])||(f=h);e.rotate(f);h=f}p.of(this,arguments)({type:"zoom"})});f(p.of(this,arguments))}).on("zoomend",function(){c.select(this).style(x);v.call(l,"zoom",null);var b=p.of(this,arguments);--t||b({type:"zoomend"});k(a,e,h)}).on("zoom.redraw",function(){a.render()});return c.rebind(l,p,"on")}function b(a,
b){if(a=(b=a.invert(b))&&isFinite(b[0])&&isFinite(b[1])){a=b[0]*y;b=b[1]*y;var c=Math.cos(b);a=[c*Math.cos(a),c*Math.sin(a),Math.sin(b)]}return a}function n(a){var b=.5*a[0]*y,c=.5*a[1]*y,d=.5*a[2]*y;a=Math.sin(b);b=Math.cos(b);var e=Math.sin(c);c=Math.cos(c);var f=Math.sin(d);d=Math.cos(d);return[b*c*d+a*e*f,a*c*d-b*e*f,b*e*d+a*c*f,b*c*f-a*e*d]}function q(a,b,c,d){a=((c-a)%360+540)%360-180;b=((d-b)%360+540)%360-180;return Math.sqrt(a*a+b*b)}function r(a,b,c){var d=c*y;c=a.slice();var e=0===b?1:0;
b=2===b?1:2;var f=Math.cos(d);d=Math.sin(d);c[e]=a[e]*f-a[b]*d;c[b]=a[b]*f+a[e]*d;return c}function d(a,b){for(var c=0,d=0,e=a.length;d<e;++d)c+=a[d]*b[d];return c}function g(a){for(var b=0,d=arguments.length,e=[];++b<d;)e.push(arguments[b]);var f=c.dispatch.apply(null,e);f.of=function(b,d){return function(e){try{var g=e.sourceEvent=c.event;e.target=a;c.event=e;f[e.type].apply(b,d)}finally{c.event=g}}};return f}var c=a("d3"),v=a("../../lib"),t=a("../../registry"),y=Math.PI/180,B=180/Math.PI,w={cursor:"pointer"},
x={cursor:"auto"};p.exports=function(a,b){return(b._isScoped?h:b._isClipped?f:e)(a,a.projection)}},{"../../lib":700,"../../registry":829,d3:154}],784:[function(a,p,l){var m=a("../registry"),k=a("./cartesian/constants").SUBPLOT_PATTERN;l.getSubplotCalcData=function(a,e,f){e=m.subplotsRegistry[e];if(!e)return[];e=e.attr;for(var b=[],h=0;h<a.length;h++){var k=a[h];k[0].trace[e]===f&&b.push(k)}return b};l.getModuleCalcData=function(a,e){var f=[],b=[];e="string"===typeof e?m.getModule(e).plot:"function"===
typeof e?e:e.plot;if(!e)return[f,a];for(var h=0;h<a.length;h++){var k=a[h],l=k[0].trace;!0===l.visible&&(l._module.plot===e?f.push(k):b.push(k))}return[f,b]};l.getSubplotData=function(a,e,f){if(!m.subplotsRegistry[e])return[];var b=m.subplotsRegistry[e].attr,h=[];if("gl2d"===e){var l=f.match(k);var p="x"+l[1];var d="y"+l[2]}for(var g=0;g<a.length;g++)l=a[g],"gl2d"===e&&m.traceIs(l,"gl2d")?l[b[0]]===p&&l[b[1]]===d&&h.push(l):l[b]===f&&h.push(l);return h}},{"../registry":829,"./cartesian/constants":754}],
785:[function(a,p,l){function m(a,b){this.element=a;this.plot=b;this.wheelListener=this.mouseListener=null;this.lastInputTime=Date.now();this.lastPos=[0,0];this.boxInited=this.boxEnabled=!1;this.boxStart=[0,0];this.boxEnd=[0,0];this.dragStart=[0,0]}var k=a("mouse-change"),h=a("mouse-wheel"),e=a("mouse-event-offset"),f=a("../cartesian/constants"),b=a("has-passive-events");p.exports=function(a){function n(){for(var b=a.graphDiv._fullLayout._axisConstraintGroups,c=a.xaxis._id,d=a.yaxis._id,e=0;e<b.length;e++)if(-1!==
b[e][c]){if(-1!==b[e][d])return!0;break}return!1}function l(b,d,e){function h(b,d,e){var f=Math.min(d,e);d=Math.max(d,e);f!==d?(k[b]=f,k[b+2]=d,c.dataBox=k,a.setRanges(k)):(a.selectBox.selectBox=[0,0,1,1],a.glplot.setDirty())}var k=a.calcDataBox(),m=g.viewBox,l=c.lastPos[0],p=c.lastPos[1],t=f.MINDRAG*g.pixelRatio,r=f.MINZOOM*g.pixelRatio;d*=g.pixelRatio;e*=g.pixelRatio;e=m[3]-m[1]-e;switch(a.fullLayout.dragmode){case "zoom":b?(p=d/(m[2]-m[0])*(k[2]-k[0])+k[0],m=e/(m[3]-m[1])*(k[3]-k[1])+k[1],c.boxInited||
(c.boxStart[0]=p,c.boxStart[1]=m,c.dragStart[0]=d,c.dragStart[1]=e),c.boxEnd[0]=p,c.boxEnd[1]=m,c.boxInited=!0,c.boxEnabled||c.boxStart[0]===c.boxEnd[0]&&c.boxStart[1]===c.boxEnd[1]||(c.boxEnabled=!0),m=Math.abs(c.dragStart[0]-d)<r,r=Math.abs(c.dragStart[1]-e)<r,!n()||m&&r?(m&&(c.boxEnd[0]=c.boxStart[0]),r&&(c.boxEnd[1]=c.boxStart[1])):(r=c.boxEnd[0]-c.boxStart[0],m=c.boxEnd[1]-c.boxStart[1],p=(k[3]-k[1])/(k[2]-k[0]),Math.abs(r*p)>Math.abs(m)?(c.boxEnd[1]=c.boxStart[1]+Math.abs(r)*p*(0<=m?1:-1),c.boxEnd[1]<
k[1]?(c.boxEnd[1]=k[1],c.boxEnd[0]=c.boxStart[0]+(k[1]-c.boxStart[1])/Math.abs(p)):c.boxEnd[1]>k[3]&&(c.boxEnd[1]=k[3],c.boxEnd[0]=c.boxStart[0]+(k[3]-c.boxStart[1])/Math.abs(p))):(c.boxEnd[0]=c.boxStart[0]+Math.abs(m)/p*(0<=r?1:-1),c.boxEnd[0]<k[0]?(c.boxEnd[0]=k[0],c.boxEnd[1]=c.boxStart[1]+(k[0]-c.boxStart[0])*Math.abs(p)):c.boxEnd[0]>k[2]&&(c.boxEnd[0]=k[2],c.boxEnd[1]=c.boxStart[1]+(k[2]-c.boxStart[0])*Math.abs(p))))):c.boxEnabled?(r=c.boxStart[0]!==c.boxEnd[0],m=c.boxStart[1]!==c.boxEnd[1],
r||m?(r&&(h(0,c.boxStart[0],c.boxEnd[0]),a.xaxis.autorange=!1),m&&(h(1,c.boxStart[1],c.boxEnd[1]),a.yaxis.autorange=!1),a.relayoutCallback()):a.glplot.setDirty(),c.boxEnabled=!1,c.boxInited=!1):c.boxInited&&(c.boxInited=!1);break;case "pan":c.boxEnabled=!1,c.boxInited=!1,b?(c.panning||(c.dragStart[0]=d,c.dragStart[1]=e),Math.abs(c.dragStart[0]-d)<t&&(d=c.dragStart[0]),Math.abs(c.dragStart[1]-e)<t&&(e=c.dragStart[1]),r=(l-d)*(k[2]-k[0])/(g.viewBox[2]-g.viewBox[0]),m=(p-e)*(k[3]-k[1])/(g.viewBox[3]-
g.viewBox[1]),k[0]+=r,k[2]+=r,k[1]+=m,k[3]+=m,a.setRanges(k),c.panning=!0,c.lastInputTime=Date.now(),a.xaxis.autorange=!1,a.yaxis.autorange=!1,a.cameraChanged(),a.handleAnnotations()):c.panning&&(c.panning=!1,a.relayoutCallback())}c.lastPos[0]=d;c.lastPos[1]=e}var d=a.mouseContainer,g=a.glplot,c=new m(d,g);c.mouseListener=k(d,l);d.addEventListener("touchstart",function(a){var b=e(a.changedTouches[0],d);l(0,b[0],b[1]);l(1,b[0],b[1]);a.preventDefault()},b?{passive:!1}:!1);d.addEventListener("touchmove",
function(a){a.preventDefault();var b=e(a.changedTouches[0],d);l(1,b[0],b[1]);a.preventDefault()},b?{passive:!1}:!1);d.addEventListener("touchend",function(a){l(0,c.lastPos[0],c.lastPos[1]);a.preventDefault()},b?{passive:!1}:!1);c.wheelListener=h(d,function(b,d){if(!a.scrollZoom)return!1;b=a.calcDataBox();var e=g.viewBox;d=Math.exp(5*d/(e[3]-e[1]));var f=c.lastPos[0]/(e[2]-e[0])*(b[2]-b[0])+b[0];e=c.lastPos[1]/(e[3]-e[1])*(b[3]-b[1])+b[1];b[0]=(b[0]-f)*d+f;b[2]=(b[2]-f)*d+f;b[1]=(b[1]-e)*d+e;b[3]=
(b[3]-e)*d+e;a.setRanges(b);c.lastInputTime=Date.now();a.xaxis.autorange=!1;a.yaxis.autorange=!1;a.cameraChanged();a.handleAnnotations();a.relayoutCallback();return!0},!0);return c}},{"../cartesian/constants":754,"has-passive-events":403,"mouse-change":427,"mouse-event-offset":428,"mouse-wheel":430}],786:[function(a,p,l){function m(a){this.scene=a;this.gl=a.gl;this.pixelRatio=a.pixelRatio;this.screenBox=[0,0,1,1];this.viewBox=[0,0,1,1];this.dataBox=[-1,-1,1,1];this.borderLineEnable=[!1,!1,!1,!1];
this.borderLineWidth=[1,1,1,1];this.borderLineColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1],[0,0,0,1]];this.ticks=[[],[]];this.tickEnable=[!0,!0,!1,!1];this.tickPad=[15,15,15,15];this.tickAngle=[0,0,0,0];this.tickColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1],[0,0,0,1]];this.tickMarkLength=[0,0,0,0];this.tickMarkWidth=[0,0,0,0];this.tickMarkColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1],[0,0,0,1]];this.labels=["x","y"];this.labelEnable=[!0,!0,!1,!1];this.labelAngle=[0,Math.PI/2,0,3*Math.PI/2];this.labelPad=[15,15,15,15];this.labelSize=
[12,12];this.labelFont=["sans-serif","sans-serif"];this.labelColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1],[0,0,0,1]];this.title="";this.titleEnable=!0;this.titleCenter=[0,0,0,0];this.titleAngle=0;this.titleColor=[0,0,0,1];this.titleFont="sans-serif";this.titleSize=18;this.gridLineEnable=[!0,!0];this.gridLineColor=[[0,0,0,.5],[0,0,0,.5]];this.gridLineWidth=[1,1];this.zeroLineEnable=[!0,!0];this.zeroLineWidth=[1,1];this.zeroLineColor=[[0,0,0,1],[0,0,0,1]];this.borderColor=[0,0,0,0];this.backgroundColor=[0,
0,0,0];this.static=this.scene.staticPlot}var k=a("../cartesian/axes"),h=a("../../lib/str2rgbarray");a=m.prototype;var e=["xaxis","yaxis"];a.merge=function(a){this.titleEnable=!1;this.backgroundColor=h(a.plot_bgcolor);var b,f;for(f=0;2>f;++f){var k=e[f];var m=k.charAt(0);var d=a[this.scene[k]._name];m=d.title.text===this.scene.fullLayout._dfltTitle[m]?"":d.title.text;for(b=0;2>=b;b+=2)this.labelEnable[f+b]=!1,this.labels[f+b]=m,this.labelColor[f+b]=h(d.title.font.color),this.labelFont[f+b]=d.title.font.family,
this.labelSize[f+b]=d.title.font.size,this.labelPad[f+b]=this.getLabelPad(k,d),this.tickEnable[f+b]=!1,this.tickColor[f+b]=h((d.tickfont||{}).color),this.tickAngle[f+b]="auto"===d.tickangle?0:Math.PI*-d.tickangle/180,this.tickPad[f+b]=this.getTickPad(d),this.tickMarkLength[f+b]=0,this.tickMarkWidth[f+b]=d.tickwidth||0,this.tickMarkColor[f+b]=h(d.tickcolor),this.borderLineEnable[f+b]=!1,this.borderLineColor[f+b]=h(d.linecolor),this.borderLineWidth[f+b]=d.linewidth||0;b=this.hasSharedAxis(d);m=this.hasAxisInDfltPos(k,
d)&&!b;k=this.hasAxisInAltrPos(k,d)&&!b;var g=d.mirror||!1;var c=b?-1!==String(g).indexOf("all"):!!g;b=b?"allticks"===g:-1!==String(g).indexOf("ticks");m?this.labelEnable[f]=!0:k&&(this.labelEnable[f+2]=!0);m?this.tickEnable[f]=d.showticklabels:k&&(this.tickEnable[f+2]=d.showticklabels);if(m||c)this.borderLineEnable[f]=d.showline;if(k||c)this.borderLineEnable[f+2]=d.showline;if(m||b)this.tickMarkLength[f]=this.getTickMarkLength(d);if(k||b)this.tickMarkLength[f+2]=this.getTickMarkLength(d);this.gridLineEnable[f]=
d.showgrid;this.gridLineColor[f]=h(d.gridcolor);this.gridLineWidth[f]=d.gridwidth;this.zeroLineEnable[f]=d.zeroline;this.zeroLineColor[f]=h(d.zerolinecolor);this.zeroLineWidth[f]=d.zerolinewidth}};a.hasSharedAxis=function(a){var b=this.scene;return 0!==k.findSubplotsWithAxis(b.fullLayout._subplots.gl2d,a).indexOf(b.id)};a.hasAxisInDfltPos=function(a,b){b=b.side;if("xaxis"===a)return"bottom"===b;if("yaxis"===a)return"left"===b};a.hasAxisInAltrPos=function(a,b){b=b.side;if("xaxis"===a)return"top"===
b;if("yaxis"===a)return"right"===b};a.getLabelPad=function(a,b){var e=b.title.font.size,f=b.showticklabels;if("xaxis"===a)return"top"===b.side?-10+e*(1.5+(f?1:0)):-10+e*(1.5+(f?.5:0));if("yaxis"===a)return"right"===b.side?10+e*(1.5+(f?1:.5)):10+e*(1.5+(f?.5:0))};a.getTickPad=function(a){return"outside"===a.ticks?10+a.ticklen:15};a.getTickMarkLength=function(a){if(!a.ticks)return 0;var b=a.ticklen;return"inside"===a.ticks?-b:b};p.exports=function(a){return new m(a)}},{"../../lib/str2rgbarray":723,
"../cartesian/axes":748}],787:[function(a,p,l){p=a("../../plot_api/edit_types").overrideAll;var m=a("./scene2d"),k=a("../layout_attributes"),h=a("../../constants/xmlns_namespaces"),e=a("../cartesian/constants"),f=a("../cartesian"),b=a("../../components/fx/layout_attributes"),n=a("../get_data").getSubplotData;l.name="gl2d";l.attr=["xaxis","yaxis"];l.idRoot=["x","y"];l.idRegex=e.idRegex;l.attrRegex=e.attrRegex;l.attributes=a("../cartesian/attributes");l.supplyLayoutDefaults=function(a,b,d){b._has("cartesian")||
f.supplyLayoutDefaults(a,b,d)};l.layoutAttrOverrides=p(f.layoutAttributes,"plot","from-root");l.baseLayoutAttrOverrides=p({plot_bgcolor:k.plot_bgcolor,hoverlabel:b.hoverlabel},"plot","nested");l.plot=function(a){for(var b=a._fullLayout,d=a._fullData,e=b._subplots.gl2d,c=0;c<e.length;c++){var f=e[c],h=b._plots[f],k=n(d,"gl2d",f),l=h._scene2d;void 0===l&&(l=new m({id:f,graphDiv:a,container:a.querySelector(".gl-container"),staticPlot:a._context.staticPlot,plotGlPixelRatio:a._context.plotGlPixelRatio},
b),h._scene2d=l);l.plot(k,a.calcdata,b,a.layout)}};l.clean=function(a,b,d,e){for(var c=e._subplots.gl2d||[],g=0;g<c.length;g++){var h=c[g],k=e._plots[h];k._scene2d&&0===n(a,"gl2d",h).length&&(k._scene2d.destroy(),delete e._plots[h])}f.clean.apply(this,arguments)};l.drawFramework=function(a){a._context.staticPlot||f.drawFramework(a)};l.toSVG=function(a){a=a._fullLayout;for(var b=a._subplots.gl2d,d=0;d<b.length;d++){var e=a._plots[b[d]]._scene2d,c=e.toImage("png");a._glimages.append("svg:image").attr({xmlns:h.svg,
"xlink:href":c,x:0,y:0,width:"100%",height:"100%",preserveAspectRatio:"none"});e.destroy()}};l.updateFx=function(a){a=a._fullLayout;for(var b=a._subplots.gl2d,d=0;d<b.length;d++)a._plots[b[d]]._scene2d.updateFx(a.dragmode)}},{"../../components/fx/layout_attributes":617,"../../constants/xmlns_namespaces":678,"../../plot_api/edit_types":731,"../cartesian":759,"../cartesian/attributes":746,"../cartesian/constants":754,"../get_data":784,"../layout_attributes":801,"./scene2d":788}],788:[function(a,p,l){function m(a,
c){this.container=a.container;this.graphDiv=a.graphDiv;this.pixelRatio=a.plotGlPixelRatio||window.devicePixelRatio;this.id=a.id;this.staticPlot=!!a.staticPlot;this.scrollZoom=this.graphDiv._context._scrollZoom.cartesian;this.fullData=null;this.updateRefs(c);this.makeFramework();this.stopped||(this.glplotOptions=r(this),this.glplotOptions.merge(c),this.glplot=f(this.glplotOptions),this.camera=d(this),this.traces={},this.spikes=b(this.glplot),this.selectBox=n(this.glplot,{innerFill:!1,outerFill:!0}),
this.lastButtonState=0,this.pickResult=null,this.isMouseOver=!0,this.stopped=!1,this.redraw=this.draw.bind(this),this.redraw())}var k=a("../../registry"),h=a("../../plots/cartesian/axes"),e=a("../../components/fx"),f=a("gl-plot2d"),b=a("gl-spikes2d"),n=a("gl-select-box"),q=a("webgl-context"),r=a("./convert"),d=a("./camera"),g=a("../../lib/show_no_webgl_msg");l=a("../cartesian/constraints");var c=l.enforce,v=l.clean,t=a("../cartesian/autorange").doAutoRange,y=["xaxis","yaxis"],w,x,G=a("../cartesian/constants").SUBPLOT_PATTERN;
p.exports=m;a=m.prototype;a.makeFramework=function(){if(this.staticPlot){if(!x&&(w=document.createElement("canvas"),x=q({canvas:w,preserveDrawingBuffer:!1,premultipliedAlpha:!0,antialias:!0}),!x))throw Error("Error creating static canvas/context for image server");this.canvas=w;this.gl=x}else{var a=this.container.querySelector(".gl-canvas-focus"),b=q({canvas:a,preserveDrawingBuffer:!0,premultipliedAlpha:!0});if(!b){g(this);this.stopped=!0;return}this.canvas=a;this.gl=b}a=this.canvas;a.style.width=
"100%";a.style.height="100%";a.style.position="absolute";a.style.top="0px";a.style.left="0px";a.style["pointer-events"]="none";this.updateSize(a);a.className+=" user-select-none";a=this.svgContainer=document.createElementNS("http://www.w3.org/2000/svg","svg");a.style.position="absolute";a.style.top=a.style.left="0px";a.style.width=a.style.height="100%";a.style["z-index"]=20;a.style["pointer-events"]="none";b=this.mouseContainer=document.createElement("div");b.style.position="absolute";b.style["pointer-events"]=
"auto";this.pickCanvas=this.container.querySelector(".gl-canvas-pick");var c=this.container;c.appendChild(a);c.appendChild(b);var d=this;b.addEventListener("mouseout",function(){d.isMouseOver=!1;d.unhover()});b.addEventListener("mouseover",function(){d.isMouseOver=!0})};a.toImage=function(a){a||(a="png");this.stopped=!0;this.staticPlot&&this.container.appendChild(w);this.updateSize(this.canvas);var b=this.glplot.gl,c=b.drawingBufferWidth,d=b.drawingBufferHeight;b.clearColor(1,1,1,0);b.clear(b.COLOR_BUFFER_BIT|
b.DEPTH_BUFFER_BIT);this.glplot.setDirty();this.glplot.draw();b.bindFramebuffer(b.FRAMEBUFFER,null);var e=new Uint8Array(c*d*4);b.readPixels(0,0,c,d,b.RGBA,b.UNSIGNED_BYTE,e);b=0;for(var f=d-1;b<f;++b,--f)for(var g=0;g<c;++g)for(var h=0;4>h;++h){var k=e[4*(c*b+g)+h];e[4*(c*b+g)+h]=e[4*(c*f+g)+h];e[4*(c*f+g)+h]=k}b=document.createElement("canvas");b.width=c;b.height=d;f=b.getContext("2d");c=f.createImageData(c,d);c.data.set(e);f.putImageData(c,0,0);switch(a){case "jpeg":a=b.toDataURL("image/jpeg");
break;case "webp":a=b.toDataURL("image/webp");break;default:a=b.toDataURL("image/png")}this.staticPlot&&this.container.removeChild(w);return a};a.updateSize=function(a){a||(a=this.canvas);var b=this.pixelRatio,c=this.fullLayout,d=Math.ceil(b*c.width)|0;b=Math.ceil(b*c.height)|0;if(a.width!==d||a.height!==b)a.width=d,a.height=b;return a};a.computeTickMarks=function(){this.xaxis.setScale();this.yaxis.setScale();for(var a=[h.calcTicks(this.xaxis),h.calcTicks(this.yaxis)],b=0;2>b;++b)for(var c=0;c<a[b].length;++c)a[b][c].text+=
"";return a};a.updateRefs=function(a){this.fullLayout=a;a=this.id.match(G);var b="yaxis"+a[2];this.xaxis=this.fullLayout["xaxis"+a[1]];this.yaxis=this.fullLayout[b]};a.relayoutCallback=function(){var a=this.graphDiv,b=this.xaxis,c=this.yaxis,d=a.layout,e={},f=e[b._name+".range"]=b.range.slice(),g=e[c._name+".range"]=c.range.slice();e[b._name+".autorange"]=b.autorange;e[c._name+".autorange"]=c.autorange;k.call("_storeDirectGUIEdit",a.layout,a._fullLayout._preGUI,e);var h=d[b._name];h.range=f;h.autorange=
b.autorange;b=d[c._name];b.range=g;b.autorange=c.autorange;e.lastInputTime=this.camera.lastInputTime;a.emit("plotly_relayout",e)};a.cameraChanged=function(){var a=this.camera;this.glplot.setDataBox(this.calcDataBox());var b=this.computeTickMarks(),c=this.glplotOptions.ticks;a:{for(var d=0;2>d;++d){var e=b[d],f=c[d];if(e.length!==f.length){c=!0;break a}for(var g=0;g<e.length;++g)if(e[g].x!==f[g].x){c=!0;break a}}c=!1}c&&(this.glplotOptions.ticks=b,this.glplotOptions.dataBox=a.dataBox,this.glplot.update(this.glplotOptions),
this.handleAnnotations())};a.handleAnnotations=function(){for(var a=this.graphDiv,b=this.fullLayout.annotations,c=0;c<b.length;c++){var d=b[c];d.xref===this.xaxis._id&&d.yref===this.yaxis._id&&k.getComponentMethod("annotations","drawOne")(a,c)}};a.destroy=function(){if(this.glplot){var a=this.traces;a&&Object.keys(a).map(function(b){a[b].dispose();delete a[b]});this.glplot.dispose();this.container.removeChild(this.svgContainer);this.container.removeChild(this.mouseContainer);this.glplot=this.fullData=
null;this.stopped=!0;this.camera.mouseListener.enabled=!1;this.mouseContainer.removeEventListener("wheel",this.camera.wheelListener);this.camera=null}};a.plot=function(a,b,d){var e=this.glplot;this.updateRefs(d);this.xaxis.clearCalc();this.yaxis.clearCalc();this.updateTraces(a,b);this.updateFx(d.dragmode);var f=d.width,g=d.height;this.updateSize(this.canvas);a=this.glplotOptions;a.merge(d);a.screenBox=[0,0,f,g];b={_fullLayout:{_axisConstraintGroups:this.graphDiv._fullLayout._axisConstraintGroups,
xaxis:this.xaxis,yaxis:this.yaxis}};v(b,this.xaxis);v(b,this.yaxis);var h=d._size,k=this.xaxis.domain,n=this.yaxis.domain;a.viewBox=[h.l+k[0]*h.w,h.b+n[0]*h.h,f-h.r-(1-k[1])*h.w,g-h.t-(1-n[1])*h.h];this.mouseContainer.style.width=h.w*(k[1]-k[0])+"px";this.mouseContainer.style.height=h.h*(n[1]-n[0])+"px";this.mouseContainer.height=h.h*(n[1]-n[0]);this.mouseContainer.style.left=h.l+k[0]*h.w+"px";this.mouseContainer.style.top=h.t+(1-n[1])*h.h+"px";for(g=0;2>g;++g)f=this[y[g]],f._length=a.viewBox[g+2]-
a.viewBox[g],t(this.graphDiv,f),f.setScale();c(b);a.ticks=this.computeTickMarks();a.dataBox=this.calcDataBox();a.merge(d);e.update(a);this.glplot.draw()};a.calcDataBox=function(){var a=this.xaxis,b=this.yaxis,c=a.range,d=b.range;a=a.r2l;b=b.r2l;return[a(c[0]),b(d[0]),a(c[1]),b(d[1])]};a.setRanges=function(a){var b=this.xaxis,c=this.yaxis,d=b.l2r,e=c.l2r;b.range=[d(a[0]),d(a[2])];c.range=[e(a[1]),e(a[3])]};a.updateTraces=function(a,b){var c=Object.keys(this.traces),d;this.fullData=a;var e=0;a:for(;e<
c.length;e++){var f=c[e],g=this.traces[f];for(d=0;d<a.length;d++){var h=a[d];if(h.uid===f&&h.type===g.type)continue a}g.dispose();delete this.traces[f]}for(e=0;e<a.length;e++)h=a[e],c=b[e],(d=this.traces[h.uid])?d.update(h,c):(d=h._module.plot(this,h,c),this.traces[h.uid]=d);this.glplot.objects.sort(function(a,b){return a._trace.index-b._trace.index})};a.updateFx=function(a){"lasso"===a||"select"===a?(this.pickCanvas.style["pointer-events"]="none",this.mouseContainer.style["pointer-events"]="none"):
(this.pickCanvas.style["pointer-events"]="auto",this.mouseContainer.style["pointer-events"]="auto");this.mouseContainer.style.cursor="pan"===a?"move":"zoom"===a?"crosshair":null};a.emitPointAction=function(a,b){for(var c=a.trace.uid,d=a.pointIndex,f,g=0;g<this.fullData.length;g++)this.fullData[g].uid===c&&(f=this.fullData[g]);a={x:a.traceCoord[0],y:a.traceCoord[1],curveNumber:f.index,pointNumber:d,data:f._input,fullData:this.fullData,xaxis:this.xaxis,yaxis:this.yaxis};e.appendArrayPointValue(a,f,
d);this.graphDiv.emit(b,{points:[a]})};a.draw=function(){if(!this.stopped){requestAnimationFrame(this.redraw);var a=this.glplot,b=this.camera,c=b.mouseListener,d=1===this.lastButtonState&&0===c.buttons,f=this.fullLayout;this.lastButtonState=c.buttons;this.cameraChanged();var g=c.x*a.pixelRatio;c=this.canvas.height-a.pixelRatio*c.y;if(b.boxEnabled&&"zoom"===f.dragmode){this.selectBox.enabled=!0;f=this.selectBox.selectBox=[Math.min(b.boxStart[0],b.boxEnd[0]),Math.min(b.boxStart[1],b.boxEnd[1]),Math.max(b.boxStart[0],
b.boxEnd[0]),Math.max(b.boxStart[1],b.boxEnd[1])];for(d=0;2>d;d++)b.boxStart[d]===b.boxEnd[d]&&(f[d]=a.dataBox[d],f[d+2]=a.dataBox[d+2]);a.setDirty()}else if(!b.panning&&this.isMouseOver){this.selectBox.enabled=!1;var h=f._size;(b=(h=a.pick(g/a.pixelRatio+h.l+this.xaxis.domain[0]*h.w,c/a.pixelRatio-(h.t+(1-this.yaxis.domain[1])*h.h)))&&h.object._trace.handlePick(h))&&d&&this.emitPointAction(b,"plotly_click");h&&"skip"!==h.object._trace.hoverinfo&&f.hovermode&&b&&(!this.lastPickResult||this.lastPickResult.traceUid!==
b.trace.uid||this.lastPickResult.dataCoord[0]!==b.dataCoord[0]||this.lastPickResult.dataCoord[1]!==b.dataCoord[1])&&(this.lastPickResult={traceUid:b.trace?b.trace.uid:null,dataCoord:b.dataCoord.slice()},this.spikes.update({center:h.dataCoord}),b.screenCoord=[((a.viewBox[2]-a.viewBox[0])*(h.dataCoord[0]-a.dataBox[0])/(a.dataBox[2]-a.dataBox[0])+a.viewBox[0])/a.pixelRatio,(this.canvas.height-(a.viewBox[3]-a.viewBox[1])*(h.dataCoord[1]-a.dataBox[1])/(a.dataBox[3]-a.dataBox[1])-a.viewBox[1])/a.pixelRatio],
this.emitPointAction(b,"plotly_hover"),d=this.fullData[b.trace.index]||{},g=b.pointIndex,(f=e.castHoverinfo(d,f,g))&&"all"!==f&&(f=f.split("+"),-1===f.indexOf("x")&&(b.traceCoord[0]=void 0),-1===f.indexOf("y")&&(b.traceCoord[1]=void 0),-1===f.indexOf("z")&&(b.traceCoord[2]=void 0),-1===f.indexOf("text")&&(b.textLabel=void 0),-1===f.indexOf("name")&&(b.name=void 0)),e.loneHover({x:b.screenCoord[0],y:b.screenCoord[1],xLabel:this.hoverFormatter("xaxis",b.traceCoord[0]),yLabel:this.hoverFormatter("yaxis",
b.traceCoord[1]),zLabel:b.traceCoord[2],text:b.textLabel,name:b.name,color:e.castHoverOption(d,g,"bgcolor")||b.color,borderColor:e.castHoverOption(d,g,"bordercolor"),fontFamily:e.castHoverOption(d,g,"font.family"),fontSize:e.castHoverOption(d,g,"font.size"),fontColor:e.castHoverOption(d,g,"font.color")},{container:this.svgContainer,gd:this.graphDiv}))}h||this.unhover();a.draw()}};a.unhover=function(){this.lastPickResult&&(this.spikes.update({}),this.lastPickResult=null,this.graphDiv.emit("plotly_unhover"),
e.loneUnhover(this.svgContainer))};a.hoverFormatter=function(a,b){if(void 0!==b)return a=this[a],h.tickText(a,a.c2l(b),"hover").text}},{"../../components/fx":616,"../../lib/show_no_webgl_msg":721,"../../plots/cartesian/axes":748,"../../registry":829,"../cartesian/autorange":747,"../cartesian/constants":754,"../cartesian/constraints":755,"./camera":785,"./convert":786,"gl-plot2d":283,"gl-select-box":295,"gl-spikes2d":304,"webgl-context":540}],789:[function(a,p,l){p=a("../../plot_api/edit_types").overrideAll;
var m=a("../../components/fx/layout_attributes"),k=a("./scene"),h=a("../get_data").getSubplotData,e=a("../../lib"),f=a("../../constants/xmlns_namespaces");l.name="gl3d";l.attr="scene";l.idRoot="scene";l.idRegex=l.attrRegex=e.counterRegex("scene");l.attributes=a("./layout/attributes");l.layoutAttributes=a("./layout/layout_attributes");l.baseLayoutAttrOverrides=p({hoverlabel:m.hoverlabel},"plot","nested");l.supplyLayoutDefaults=a("./layout/defaults");l.plot=function(a){for(var b=a._fullLayout,e=a._fullData,
f=b._subplots.gl3d,d=0;d<f.length;d++){var g=f[d],c=h(e,"gl3d",g),m=b[g],l=m.camera,p=m._scene;p||(p=new k({id:g,graphDiv:a,container:a.querySelector(".gl-container"),staticPlot:a._context.staticPlot,plotGlPixelRatio:a._context.plotGlPixelRatio,camera:l},b),m._scene=p);p.viewInitial||(p.viewInitial={up:{x:l.up.x,y:l.up.y,z:l.up.z},eye:{x:l.eye.x,y:l.eye.y,z:l.eye.z},center:{x:l.center.x,y:l.center.y,z:l.center.z}});p.plot(c,b,a.layout)}};l.clean=function(a,e,f,h){a=h._subplots.gl3d||[];for(f=0;f<
a.length;f++){var b=a[f];!e[b]&&h[b]._scene&&(h[b]._scene.destroy(),h._infolayer&&h._infolayer.selectAll(".annotation-"+b).remove())}};l.toSVG=function(a){a=a._fullLayout;for(var b=a._subplots.gl3d,e=a._size,h=0;h<b.length;h++){var d=a[b[h]],g=d.domain;d=d._scene;var c=d.toImage("png");a._glimages.append("svg:image").attr({xmlns:f.svg,"xlink:href":c,x:e.l+e.w*g.x[0],y:e.t+e.h*(1-g.y[1]),width:e.w*(g.x[1]-g.x[0]),height:e.h*(g.y[1]-g.y[0]),preserveAspectRatio:"none"});d.destroy()}};l.cleanId=function(a){if(a.match(/^scene[0-9]*$/))return a=
a.substr(5),"1"===a&&(a=""),"scene"+a};l.updateFx=function(a){a=a._fullLayout;for(var b=a._subplots.gl3d,e=0;e<b.length;e++)a[b[e]]._scene.updateFx(a.dragmode,a.hovermode)}},{"../../components/fx/layout_attributes":617,"../../constants/xmlns_namespaces":678,"../../lib":700,"../../plot_api/edit_types":731,"../get_data":784,"./layout/attributes":790,"./layout/defaults":794,"./layout/layout_attributes":795,"./scene":799}],790:[function(a,p,l){p.exports={scene:{valType:"subplotid",dflt:"scene",editType:"calc+clearAxisTypes"}}},
{}],791:[function(a,p,l){l=a("../../../components/color");var m=a("../../cartesian/layout_attributes"),k=a("../../../lib/extend").extendFlat;a=a("../../../plot_api/edit_types").overrideAll;p.exports=a({visible:m.visible,showspikes:{valType:"boolean",dflt:!0},spikesides:{valType:"boolean",dflt:!0},spikethickness:{valType:"number",min:0,dflt:2},spikecolor:{valType:"color",dflt:l.defaultLine},showbackground:{valType:"boolean",dflt:!1},backgroundcolor:{valType:"color",dflt:"rgba(204, 204, 204, 0.5)"},
showaxeslabels:{valType:"boolean",dflt:!0},color:m.color,categoryorder:m.categoryorder,categoryarray:m.categoryarray,title:m.title,type:k({},m.type,{values:["-","linear","log","date","category"]}),autorange:m.autorange,rangemode:m.rangemode,range:k({},m.range,{items:[{valType:"any",editType:"plot",impliedEdits:{"^autorange":!1}},{valType:"any",editType:"plot",impliedEdits:{"^autorange":!1}}],anim:!1}),tickmode:m.tickmode,nticks:m.nticks,tick0:m.tick0,dtick:m.dtick,tickvals:m.tickvals,ticktext:m.ticktext,
ticks:m.ticks,mirror:m.mirror,ticklen:m.ticklen,tickwidth:m.tickwidth,tickcolor:m.tickcolor,showticklabels:m.showticklabels,tickfont:m.tickfont,tickangle:m.tickangle,tickprefix:m.tickprefix,showtickprefix:m.showtickprefix,ticksuffix:m.ticksuffix,showticksuffix:m.showticksuffix,showexponent:m.showexponent,exponentformat:m.exponentformat,separatethousands:m.separatethousands,tickformat:m.tickformat,tickformatstops:m.tickformatstops,hoverformat:m.hoverformat,showline:m.showline,linecolor:m.linecolor,
linewidth:m.linewidth,showgrid:m.showgrid,gridcolor:k({},m.gridcolor,{dflt:"rgb(204, 204, 204)"}),gridwidth:m.gridwidth,zeroline:m.zeroline,zerolinecolor:m.zerolinecolor,zerolinewidth:m.zerolinewidth,_deprecated:{title:m._deprecated.title,titlefont:m._deprecated.titlefont}},"plot","from-root")},{"../../../components/color":577,"../../../lib/extend":690,"../../../plot_api/edit_types":731,"../../cartesian/layout_attributes":760}],792:[function(a,p,l){var m=a("tinycolor2").mix,k=a("../../../lib"),h=
a("../../../plot_api/plot_template"),e=a("./axis_attributes"),f=a("../../cartesian/type_defaults"),b=a("../../cartesian/axis_defaults"),n=["xaxis","yaxis","zaxis"],q=13600/187;p.exports=function(a,d,g){function c(a,b){return k.coerce(l,p,e,a,b)}for(var l,p,r=0;r<n.length;r++){var u=n[r];l=a[u]||{};p=h.newContainer(d,u);p._id=u[0]+g.scene;p._name=u;f(l,p,c,g);b(l,p,c,{font:g.font,letter:u[0],data:g.data,showGrid:!0,noTickson:!0,bgColor:g.bgColor,calendar:g.calendar},g.fullLayout);c("gridcolor",m(p.color,
g.bgColor,q).toRgbString());c("title.text",u[0]);p.setScale=k.noop;c("showspikes")&&(c("spikesides"),c("spikethickness"),c("spikecolor",p.color));c("showaxeslabels");c("showbackground")&&c("backgroundcolor")}}},{"../../../lib":700,"../../../plot_api/plot_template":738,"../../cartesian/axis_defaults":750,"../../cartesian/type_defaults":771,"./axis_attributes":791,tinycolor2:521}],793:[function(a,p,l){function m(){this.bounds=[[-10,-10,-10],[10,10,10]];this.ticks=[[],[],[]];this.tickEnable=[!0,!0,!0];
this.tickFont=["sans-serif","sans-serif","sans-serif"];this.tickSize=[12,12,12];this.tickAngle=[0,0,0];this.tickColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1]];this.tickPad=[18,18,18];this.labels=["x","y","z"];this.labelEnable=[!0,!0,!0];this.labelFont=["Open Sans","Open Sans","Open Sans"];this.labelSize=[20,20,20];this.labelColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1]];this.labelPad=[30,30,30];this.lineEnable=[!0,!0,!0];this.lineMirror=[!1,!1,!1];this.lineWidth=[1,1,1];this.lineColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1]];
this.lineTickEnable=[!0,!0,!0];this.lineTickMirror=[!1,!1,!1];this.lineTickLength=[10,10,10];this.lineTickWidth=[1,1,1];this.lineTickColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1]];this.gridEnable=[!0,!0,!0];this.gridWidth=[1,1,1];this.gridColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1]];this.zeroEnable=[!0,!0,!0];this.zeroLineColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1]];this.zeroLineWidth=[2,2,2];this.backgroundEnable=[!0,!0,!0];this.backgroundColor=[[.8,.8,.8,.5],[.8,.8,.8,.5],[.8,.8,.8,.5]];this._defaultTickPad=this.tickPad.slice();
this._defaultLabelPad=this.labelPad.slice();this._defaultLineTickLength=this.lineTickLength.slice()}var k=a("../../../lib/str2rgbarray"),h=a("../../../lib"),e=["xaxis","yaxis","zaxis"];m.prototype.merge=function(a,b){for(var f=0;3>f;++f){var m=b[e[f]];m.visible?(this.labels[f]=a.meta?h.templateString(m.title.text,{meta:a.meta}):m.title.text,"font"in m.title&&(m.title.font.color&&(this.labelColor[f]=k(m.title.font.color)),m.title.font.family&&(this.labelFont[f]=m.title.font.family),m.title.font.size&&
(this.labelSize[f]=m.title.font.size)),"showline"in m&&(this.lineEnable[f]=m.showline),"linecolor"in m&&(this.lineColor[f]=k(m.linecolor)),"linewidth"in m&&(this.lineWidth[f]=m.linewidth),"showgrid"in m&&(this.gridEnable[f]=m.showgrid),"gridcolor"in m&&(this.gridColor[f]=k(m.gridcolor)),"gridwidth"in m&&(this.gridWidth[f]=m.gridwidth),"log"===m.type?this.zeroEnable[f]=!1:"zeroline"in m&&(this.zeroEnable[f]=m.zeroline),"zerolinecolor"in m&&(this.zeroLineColor[f]=k(m.zerolinecolor)),"zerolinewidth"in
m&&(this.zeroLineWidth[f]=m.zerolinewidth),this.lineTickEnable[f]="ticks"in m&&m.ticks?!0:!1,"ticklen"in m&&(this.lineTickLength[f]=this._defaultLineTickLength[f]=m.ticklen),"tickcolor"in m&&(this.lineTickColor[f]=k(m.tickcolor)),"tickwidth"in m&&(this.lineTickWidth[f]=m.tickwidth),"tickangle"in m&&(this.tickAngle[f]="auto"===m.tickangle?-3600:Math.PI*-m.tickangle/180),"showticklabels"in m&&(this.tickEnable[f]=m.showticklabels),"tickfont"in m&&(m.tickfont.color&&(this.tickColor[f]=k(m.tickfont.color)),
m.tickfont.family&&(this.tickFont[f]=m.tickfont.family),m.tickfont.size&&(this.tickSize[f]=m.tickfont.size)),"mirror"in m?-1!==["ticks","all","allticks"].indexOf(m.mirror)?(this.lineTickMirror[f]=!0,this.lineMirror[f]=!0):!0===m.mirror?(this.lineTickMirror[f]=!1,this.lineMirror[f]=!0):(this.lineTickMirror[f]=!1,this.lineMirror[f]=!1):this.lineMirror[f]=!1,"showbackground"in m&&!1!==m.showbackground?(this.backgroundEnable[f]=!0,this.backgroundColor[f]=k(m.backgroundcolor)):this.backgroundEnable[f]=
!1):(this.tickEnable[f]=!1,this.labelEnable[f]=!1,this.lineEnable[f]=!1,this.lineTickEnable[f]=!1,this.gridEnable[f]=!1,this.zeroEnable[f]=!1,this.backgroundEnable[f]=!1)}};p.exports=function(a,b){var e=new m;e.merge(a,b);return e}},{"../../../lib":700,"../../../lib/str2rgbarray":723}],794:[function(a,p,l){function m(a,d,f,c){var g=f("bgcolor");g=h.combine(g,c.paper_bgcolor);for(var k=["up","center","eye"],n=0;n<k.length;n++)f("camera."+k[n]+".x"),f("camera."+k[n]+".y"),f("camera."+k[n]+".z");f("camera.projection.type");
k=!!f("aspectratio.x")&&!!f("aspectratio.y")&&!!f("aspectratio.z");n=f("aspectmode",k?"manual":"auto");k||(a.aspectratio=d.aspectratio={x:1,y:1,z:1},"manual"===n&&(d.aspectmode="auto"),a.aspectmode=d.aspectmode);k=q(c.fullData,"gl3d",c.id);b(a,d,{font:c.font,scene:c.id,data:k,bgColor:g,calendar:c.calendar,fullLayout:c.fullLayout});e.getComponentMethod("annotations3d","handleDefaults")(a,d,c);d=c.getDfltFromLayout("dragmode");!1===d||d||(d="orbit",a.camera&&a.camera.up?(g=a.camera.up.x,k=a.camera.up.y,
a=a.camera.up.z,0!==a&&(g&&k&&a?.999<a/Math.sqrt(g*g+k*k+a*a)&&(d="turntable"):d="turntable")):d="turntable");f("dragmode",d);f("hovermode",c.getDfltFromLayout("hovermode"))}var k=a("../../../lib"),h=a("../../../components/color"),e=a("../../../registry"),f=a("../../subplot_defaults"),b=a("./axis_defaults"),n=a("./layout_attributes"),q=a("../../get_data").getSubplotData;p.exports=function(a,b,e){var c=1<b._basePlotModules.length;f(a,b,e,{type:"gl3d",attributes:n,handleDefaults:m,fullLayout:b,font:b.font,
fullData:e,getDfltFromLayout:function(b){if(!c&&k.validate(a[b],n[b]))return a[b]},paper_bgcolor:b.paper_bgcolor,calendar:b.calendar})}},{"../../../components/color":577,"../../../lib":700,"../../../registry":829,"../../get_data":784,"../../subplot_defaults":824,"./axis_defaults":792,"./layout_attributes":795}],795:[function(a,p,l){function m(a,f,b){return{x:{valType:"number",dflt:a,editType:"camera"},y:{valType:"number",dflt:f,editType:"camera"},z:{valType:"number",dflt:b,editType:"camera"},editType:"camera"}}
l=a("./axis_attributes");var k=a("../../domain").attributes,h=a("../../../lib/extend").extendFlat;a=a("../../../lib").counterRegex;p.exports={_arrayAttrRegexps:[a("scene",".annotations",!0)],bgcolor:{valType:"color",dflt:"rgba(0,0,0,0)",editType:"plot"},camera:{up:h(m(0,0,1),{}),center:h(m(0,0,0),{}),eye:h(m(1.25,1.25,1.25),{}),projection:{type:{valType:"enumerated",values:["perspective","orthographic"],dflt:"perspective",editType:"calc"},editType:"calc"},editType:"camera"},domain:k({name:"scene",
editType:"plot"}),aspectmode:{valType:"enumerated",values:["auto","cube","data","manual"],dflt:"auto",editType:"plot",impliedEdits:{"aspectratio.x":void 0,"aspectratio.y":void 0,"aspectratio.z":void 0}},aspectratio:{x:{valType:"number",min:0,editType:"plot",impliedEdits:{"^aspectmode":"manual"}},y:{valType:"number",min:0,editType:"plot",impliedEdits:{"^aspectmode":"manual"}},z:{valType:"number",min:0,editType:"plot",impliedEdits:{"^aspectmode":"manual"}},editType:"plot",impliedEdits:{aspectmode:"manual"}},
xaxis:l,yaxis:l,zaxis:l,dragmode:{valType:"enumerated",values:["orbit","turntable","zoom","pan",!1],editType:"plot"},hovermode:{valType:"enumerated",values:["closest",!1],dflt:"closest",editType:"modebar"},uirevision:{valType:"any",editType:"none"},editType:"plot",_deprecated:{cameraposition:{valType:"info_array",editType:"camera"}}}},{"../../../lib":700,"../../../lib/extend":690,"../../domain":773,"./axis_attributes":791}],796:[function(a,p,l){function m(){this.enabled=[!0,!0,!0];this.colors=[[0,
0,0,1],[0,0,0,1],[0,0,0,1]];this.drawSides=[!0,!0,!0];this.lineWidth=[1,1,1]}var k=a("../../../lib/str2rgbarray"),h=["xaxis","yaxis","zaxis"];m.prototype.merge=function(a){for(var e=0;3>e;++e){var b=a[h[e]];b.visible?(this.enabled[e]=b.showspikes,this.colors[e]=k(b.spikecolor),this.drawSides[e]=b.spikesides,this.lineWidth[e]=b.spikethickness):(this.enabled[e]=!1,this.drawSides[e]=!1)}};p.exports=function(a){var e=new m;e.merge(a);return e}},{"../../../lib/str2rgbarray":723}],797:[function(a,p,l){p.exports=
function(a){for(var e=a.axesOptions,b=a.glplot.axesPixels,n=a.fullSceneLayout,l=[[],[],[]],p=0;3>p;++p){var d=n[h[p]];d._length=(b[p].hi-b[p].lo)*b[p].pixelsPerDataUnit/a.dataScale[p];if(Infinity===Math.abs(d._length)||isNaN(d._length))l[p]=[];else{d._input_range=d.range.slice();d.range[0]=b[p].lo/a.dataScale[p];d.range[1]=b[p].hi/a.dataScale[p];d._m=1/(a.dataScale[p]*b[p].pixelsPerDataUnit);d.range[0]===d.range[1]&&(--d.range[0],d.range[1]+=1);var g=d.tickmode;if("auto"===d.tickmode){d.tickmode=
"linear";var c=d.nticks||k.constrain(d._length/40,4,9);m.autoTicks(d,Math.abs(d.range[1]-d.range[0])/c)}c=m.calcTicks(d);for(var q=0;q<c.length;++q)c[q].x*=a.dataScale[p],"date"===d.type&&(c[q].text=c[q].text.replace(/<br>/g," "));l[p]=c;d.tickmode=g}}e.ticks=l;for(p=0;3>p;++p)for(q=0;2>q;++q)e.bounds[q][p]=a.glplot.bounds[q][p];e=Array(3);for(b=0;3>b;++b){n=l[b];p=Array(n.length);for(d=0;d<n.length;++d)p[d]=n[d].x;e[b]=p}a.contourLevels=e};var m=a("../../cartesian/axes"),k=a("../../../lib"),h=["xaxis",
"yaxis","zaxis"]},{"../../../lib":700,"../../cartesian/axes":748}],798:[function(a,p,l){function m(a,h){var e=[0,0,0,0],f,b;for(f=0;4>f;++f)for(b=0;4>b;++b)e[b]+=a[4*f+b]*h[f];return e}p.exports=function(a,h){return m(a.projection,m(a.view,m(a.model,[h[0],h[1],h[2],1])))}},{}],799:[function(a,p,l){function m(a){function b(b,c){b=a.fullSceneLayout[b];return t.tickText(b,b.d2l(c),"hover").text}var c=a.svgContainer;var d=a.container.getBoundingClientRect();var e=d.width,f=d.height;c.setAttributeNS(null,
"viewBox","0 0 "+e+" "+f);c.setAttributeNS(null,"width",e);c.setAttributeNS(null,"height",f);P(a);a.glplot.axes.update(a.axesOptions);for(var g=Object.keys(a.traces),h=null,k=a.glplot.selection,n=0;n<g.length;++n)d=a.traces[g[n]],"skip"!==d.data.hoverinfo&&d.handlePick(k)&&(h=d),d.setContourLevels&&d.setContourLevels();if(null!==h){var m=G(a.glplot.cameraParams,k.dataCoordinate);d=h.data;g=k.index;n={xLabel:b("xaxis",k.traceCoordinate[0]),yLabel:b("yaxis",k.traceCoordinate[1]),zLabel:b("zaxis",k.traceCoordinate[2])};
var l=y.castHoverinfo(d,a.fullLayout,g),p=(l||"").split("+");l=l&&"all"===l;d.hovertemplate||l||(-1===p.indexOf("x")&&(n.xLabel=void 0),-1===p.indexOf("y")&&(n.yLabel=void 0),-1===p.indexOf("z")&&(n.zLabel=void 0),-1===p.indexOf("text")&&(k.textLabel=void 0),-1===p.indexOf("name")&&(h.name=void 0));var r=[];"cone"===d.type||"streamtube"===d.type?(n.uLabel=b("xaxis",k.traceCoordinate[3]),(l||-1!==p.indexOf("u"))&&r.push("u: "+n.uLabel),n.vLabel=b("yaxis",k.traceCoordinate[4]),(l||-1!==p.indexOf("v"))&&
r.push("v: "+n.vLabel),n.wLabel=b("zaxis",k.traceCoordinate[5]),(l||-1!==p.indexOf("w"))&&r.push("w: "+n.wLabel),n.normLabel=k.traceCoordinate[6].toPrecision(3),(l||-1!==p.indexOf("norm"))&&r.push("norm: "+n.normLabel),"streamtube"===d.type&&(n.divergenceLabel=k.traceCoordinate[7].toPrecision(3),(l||-1!==p.indexOf("divergence"))&&r.push("divergence: "+n.divergenceLabel)),k.textLabel&&r.push(k.textLabel),p=r.join("\x3cbr\x3e")):"isosurface"===d.type?(n.valueLabel=t.tickText(a.mockAxis,a.mockAxis.d2l(k.traceCoordinate[3]),
"hover").text,r.push("value: "+n.valueLabel),k.textLabel&&r.push(k.textLabel),p=r.join("\x3cbr\x3e")):p=k.textLabel;l={x:k.traceCoordinate[0],y:k.traceCoordinate[1],z:k.traceCoordinate[2],data:d._input,fullData:d,curveNumber:d.index,pointNumber:g};y.appendArrayPointValue(l,d,g);d._module.eventData&&(l=d._module.eventData(l,k,d,{},g));r={points:[l]};a.fullSceneLayout.hovermode&&y.loneHover({trace:d,x:(.5+.5*m[0]/m[3])*e,y:(.5-.5*m[1]/m[3])*f,xLabel:n.xLabel,yLabel:n.yLabel,zLabel:n.zLabel,text:p,name:h.name,
color:y.castHoverOption(d,g,"bgcolor")||h.color,borderColor:y.castHoverOption(d,g,"bordercolor"),fontFamily:y.castHoverOption(d,g,"font.family"),fontSize:y.castHoverOption(d,g,"font.size"),fontColor:y.castHoverOption(d,g,"font.color"),hovertemplate:v.castOption(d,g,"hovertemplate"),hovertemplateLabels:v.extendFlat({},l,n),eventData:[l]},{container:c,gd:a.graphDiv});k.buttons&&5>k.distance?a.graphDiv.emit("plotly_click",r):a.graphDiv.emit("plotly_hover",r);m=r}else y.loneUnhover(c),a.graphDiv.emit("plotly_unhover",
m);a.drawAnnotations(a)}function k(a,b,c,e,f){b={canvas:e,gl:f,container:a.container,axes:a.axesOptions,spikes:a.spikeOptions,pickRadius:10,snapToData:!0,autoScale:!0,autoBounds:!1,cameraObject:b,pixelRatio:c};if(a.staticMode){if(!E&&(J=document.createElement("canvas"),E=d({canvas:J,preserveDrawingBuffer:!0,premultipliedAlpha:!0,antialias:!0}),!E))throw Error("error creating static canvas/context for image server");b.pixelRatio=a.pixelRatio;b.gl=E;b.canvas=J}try{a.glplot=r(b)}catch(L){return!1}return!0}
function h(a,b,c,d){a.initializeGLCamera();if(!k(a,a.camera,b,c,d))return x(a);var e=a.graphDiv,f=function(a){if(!1!==a.fullSceneLayout.dragmode){var b={};b[a.id+".camera"]=n(a.camera);a.saveCamera(e.layout);a.graphDiv.emit("plotly_relayout",b)}};a.glplot.canvas.addEventListener("mouseup",function(){f(a)});a.glplot.canvas.addEventListener("wheel",function(){e._context._scrollZoom.gl3d&&f(a)},g?{passive:!1}:!1);a.staticMode||a.glplot.canvas.addEventListener("webglcontextlost",function(b){e&&e.emit&&
e.emit("plotly_webglcontextlost",{event:b,layer:a.id})},!1);a.glplot.camera=a.camera;a.glplot.oncontextloss=function(){a.recoverContext()};a.glplot.onrender=m.bind(null,a);a.traces={};a.make4thDimension();return!0}function e(a,b){var d=document.createElement("div"),e=a.container;this.graphDiv=a.graphDiv;var f=document.createElementNS("http://www.w3.org/2000/svg","svg");f.style.position="absolute";f.style.top=f.style.left="0px";f.style.width=f.style.height="100%";f.style["z-index"]=20;f.style["pointer-events"]=
"none";d.appendChild(f);this.svgContainer=f;d.id=a.id;d.style.position="absolute";d.style.top=d.style.left="0px";d.style.width=d.style.height="100%";e.appendChild(d);this.fullLayout=b;this.id=a.id||"scene";this.fullSceneLayout=b[this.id];this.plotArgs=[[],{},{}];this.axesOptions=A(b,b[this.id]);this.spikeOptions=C(b[this.id]);this.container=d;this.staticMode=!!a.staticPlot;this.pixelRatio=this.pixelRatio||a.plotGlPixelRatio||2;this.dataScale=[1,1,1];this.contourLevels=[[],[],[]];this.convertAnnotations=
c.getComponentMethod("annotations3d","convert");this.drawAnnotations=c.getComponentMethod("annotations3d","draw");h(this,this.pixelRatio)}function f(a,b,c){a=a.fullSceneLayout;for(var d=0;3>d;d++){var e=H[d],f=e.charAt(0);e=a[e];var g=b[f],h=b[f+"calendar"];f=b["_"+f+"length"];if(v.isArrayOrTypedArray(g))for(var k,n=0;n<(f||g.length);n++)if(v.isArrayOrTypedArray(g[n]))for(var m=0;m<g[n].length;++m)k=e.d2l(g[n][m],0,h),!isNaN(k)&&isFinite(k)&&(c[0][d]=Math.min(c[0][d],k),c[1][d]=Math.max(c[1][d],k));
else k=e.d2l(g[n],0,h),!isNaN(k)&&isFinite(k)&&(c[0][d]=Math.min(c[0][d],k),c[1][d]=Math.max(c[1][d],k));else c[0][d]=Math.min(c[0][d],0),c[1][d]=Math.max(c[1][d],f-1)}}function b(a,b){a=a.fullSceneLayout;for(var c=a.annotations||[],d=0;3>d;d++){var e=H[d],f=e.charAt(0);e=a[e];for(var g=0;g<c.length;g++){var h=c[g];h.visible&&(h=e.r2l(h[f]),!isNaN(h)&&isFinite(h)&&(b[0][d]=Math.min(b[0][d],h),b[1][d]=Math.max(b[1][d],h)))}}}function n(a){return{up:{x:a.up[0],y:a.up[1],z:a.up[2]},center:{x:a.center[0],
y:a.center[1],z:a.center[2]},eye:{x:a.eye[0],y:a.eye[1],z:a.eye[2]},projection:{type:!0===a._ortho?"orthographic":"perspective"}}}var q=a("gl-plot3d").createCamera,r=a("gl-plot3d").createScene,d=a("webgl-context"),g=a("has-passive-events"),c=a("../../registry"),v=a("../../lib"),t=a("../../plots/cartesian/axes"),y=a("../../components/fx"),w=a("../../lib/str2rgbarray"),x=a("../../lib/show_no_webgl_msg"),G=a("./project"),A=a("./layout/convert"),C=a("./layout/spikes"),P=a("./layout/tick_marks"),J,E;a=
e.prototype;a.initializeGLCamera=function(){var a=this.fullSceneLayout.camera;this.camera=q(this.container,{center:[a.center.x,a.center.y,a.center.z],eye:[a.eye.x,a.eye.y,a.eye.z],up:[a.up.x,a.up.y,a.up.z],_ortho:"orthographic"===a.projection.type,zoomMin:.01,zoomMax:100,mode:"orbit"})};a.recoverContext=function(){function a(){c.isContextLost()?requestAnimationFrame(a):h(b,e,f,d,c)?b.plot.apply(b,b.plotArgs):v.error("Catastrophic and unrecoverable WebGL error. Context lost.")}var b=this,c=this.glplot.gl,
d=this.glplot.canvas,e=this.glplot.camera,f=this.glplot.pixelRatio;this.glplot.dispose();requestAnimationFrame(a)};var H=["xaxis","yaxis","zaxis"];a.plot=function(a,c,d){this.plotArgs=[a,c,d];if(!this.glplot.contextLost){var e,g,h=c[this.id];d=d[this.id];this.glplot.clearColor=h.bgcolor?w(h.bgcolor):[0,0,0,0];this.glplot.snapToData=!0;this.fullLayout=c;this.glplotLayout=this.fullSceneLayout=h;this.axesOptions.merge(c,h);this.spikeOptions.merge(h);this.setCamera(h.camera);this.updateFx(h.dragmode,
h.hovermode);this.camera.enableWheel=this.graphDiv._context._scrollZoom.gl3d;this.glplot.update({});this.setConvert(n);a?Array.isArray(a)||(a=[a]):a=[];var k=[[Infinity,Infinity,Infinity],[-Infinity,-Infinity,-Infinity]];for(e=0;e<a.length;++e){var n=a[e];!0===n.visible&&f(this,n,k)}b(this,k);var m=[1,1,1];for(g=0;3>g;++g)m[g]=k[1][g]===k[0][g]?1:1/(k[1][g]-k[0][g]);this.dataScale=m;this.convertAnnotations(this);for(e=0;e<a.length;++e)n=a[e],!0===n.visible&&((k=this.traces[n.uid])?k.data.type===n.type?
k.update(n):(k.dispose(),k=n._module.plot(this,n),this.traces[n.uid]=k):(k=n._module.plot(this,n),this.traces[n.uid]=k),k.name=n.name);n=Object.keys(this.traces);e=0;a:for(;e<n.length;++e){for(g=0;g<a.length;++g)if(a[g].uid===n[e]&&!0===a[g].visible)continue a;k=this.traces[n[e]];k.dispose();delete this.traces[n[e]]}this.glplot.objects.sort(function(a,b){return a._trace.data.index-b._trace.data.index});k=[[0,0,0],[0,0,0]];a={};for(e=0;3>e;++e){n=h[H[e]];g=n.type;g in a?(a[g].acc*=m[e],a[g].count+=
1):a[g]={acc:m[e],count:1};if(n.autorange){k[0][e]=Infinity;k[1][e]=-Infinity;var l=this.glplot.objects,p=this.fullSceneLayout.annotations||[],t=n._name.charAt(0);for(g=0;g<l.length;g++){var r=l[g],q=r.bounds,v=r._trace.data._pad||0;k[0][e]="ErrorBars"===r.constructor.name&&n._lowerLogErrorBound?Math.min(k[0][e],n._lowerLogErrorBound):Math.min(k[0][e],q[0][e]/m[e]-v);k[1][e]=Math.max(k[1][e],q[1][e]/m[e]+v)}for(g=0;g<p.length;g++)l=p[g],l.visible&&(l=n.r2l(l[t]),k[0][e]=Math.min(k[0][e],l),k[1][e]=
Math.max(k[1][e],l));"rangemode"in n&&"tozero"===n.rangemode&&(k[0][e]=Math.min(k[0][e],0),k[1][e]=Math.max(k[1][e],0));k[0][e]>k[1][e]?(k[0][e]=-1,k[1][e]=1):(g=k[1][e]-k[0][e],k[0][e]-=g/32,k[1][e]+=g/32);"reversed"===n.autorange&&(n=k[0][e],k[0][e]=k[1][e],k[1][e]=n)}else g=n.range,k[0][e]=n.r2l(g[0]),k[1][e]=n.r2l(g[1]);k[0][e]===k[1][e]&&(--k[0][e],k[1][e]+=1);this.glplot.bounds[0][e]=k[0][e]*m[e];this.glplot.bounds[1][e]=k[1][e]*m[e]}k=[1,1,1];for(e=0;3>e;++e)n=h[H[e]],g=n.type,n=a[g],k[e]=
Math.pow(n.acc,1/n.count)/m[e];if("auto"===h.aspectmode)e=4>=Math.max.apply(null,k)/Math.min.apply(null,k)?k:[1,1,1];else if("cube"===h.aspectmode)e=[1,1,1];else if("data"===h.aspectmode)e=k;else if("manual"===h.aspectmode)e=h.aspectratio,e=[e.x,e.y,e.z];else throw Error("scene.js aspectRatio was not one of the enumerated types");h.aspectratio.x=d.aspectratio.x=e[0];h.aspectratio.y=d.aspectratio.y=e[1];h.aspectratio.z=d.aspectratio.z=e[2];this.glplot.aspect=e;h=h.domain||null;c=c._size||null;h&&c&&
(d=this.container.style,d.position="absolute",d.left=c.l+h.x[0]*c.w+"px",d.top=c.t+(1-h.y[1])*c.h+"px",d.width=c.w*(h.x[1]-h.x[0])+"px",d.height=c.h*(h.y[1]-h.y[0])+"px");this.glplot.redraw()}};a.destroy=function(){this.glplot&&(this.camera.mouseListener.enabled=!1,this.container.removeEventListener("wheel",this.camera.wheelListener),this.camera=this.glplot.camera=null,this.glplot.dispose(),this.container.parentNode.removeChild(this.container),this.glplot=null)};a.getCamera=function(){this.glplot.camera.view.recalcMatrix(this.camera.view.lastT());
return n(this.glplot.camera)};a.setCamera=function(a){this.glplot.camera.lookAt.apply(this,[[a.eye.x,a.eye.y,a.eye.z],[a.center.x,a.center.y,a.center.z],[a.up.x,a.up.y,a.up.z]]);a="orthographic"===a.projection.type;if(a!==this.glplot.camera._ortho){this.glplot.redraw();var b=this.glplot.pixelRatio,c=this.glplot.clearColor;this.glplot.gl.clearColor(c[0],c[1],c[2],c[3]);this.glplot.gl.clear(this.glplot.gl.DEPTH_BUFFER_BIT|this.glplot.gl.COLOR_BUFFER_BIT);this.glplot.dispose();h(this,b);this.glplot.camera._ortho=
a}};a.saveCamera=function(a){var b=this.fullLayout,d=this.getCamera(),e=v.nestedProperty(a,this.id+".camera"),f=e.get(),g=!1;if(void 0===f)g=!0;else{for(var h=0;3>h;h++)for(var k=0;3>k;k++){var n=["up","center","eye"],m=["x","y","z"];if(!f[n[h]]||d[n[h]][m[k]]!==f[n[h]][m[k]]){g=!0;break}}if(!f.projection||d.projection&&d.projection.type!==f.projection.type)g=!0}g&&(h={},h[this.id+".camera"]=f,c.call("_storeDirectGUIEdit",a,b._preGUI,h),e.set(d),v.nestedProperty(b,this.id+".camera").set(d));return g};
a.updateFx=function(a,b){var d=this.camera;if(d)if("orbit"===a)d.mode="orbit",d.keyBindingMode="rotate";else if("turntable"===a){d.up=[0,0,1];d.mode="turntable";d.keyBindingMode="rotate";var e=this.graphDiv;a=e._fullLayout;d=this.fullSceneLayout.camera;var f=d.up.x,g=d.up.y,h=d.up.z;.999>h/Math.sqrt(f*f+g*g+h*h)&&(f=this.id+".camera.up",g={x:0,y:0,z:1},h={},h[f]=g,e=e.layout,c.call("_storeDirectGUIEdit",e,a._preGUI,h),d.up=g,v.nestedProperty(e,f).set(g))}else d.keyBindingMode=a;this.fullSceneLayout.hovermode=
b};a.toImage=function(a){a||(a="png");this.staticMode&&this.container.appendChild(J);this.glplot.redraw();var b=this.glplot.gl,c=b.drawingBufferWidth,d=b.drawingBufferHeight;b.bindFramebuffer(b.FRAMEBUFFER,null);var e=new Uint8Array(c*d*4);b.readPixels(0,0,c,d,b.RGBA,b.UNSIGNED_BYTE,e);b=0;for(var f=d-1;b<f;++b,--f)for(var g=0;g<c;++g)for(var h=0;4>h;++h){var k=e[4*(c*b+g)+h];e[4*(c*b+g)+h]=e[4*(c*f+g)+h];e[4*(c*f+g)+h]=k}b=document.createElement("canvas");b.width=c;b.height=d;f=b.getContext("2d");
c=f.createImageData(c,d);c.data.set(e);f.putImageData(c,0,0);switch(a){case "jpeg":a=b.toDataURL("image/jpeg");break;case "webp":a=b.toDataURL("image/webp");break;default:a=b.toDataURL("image/png")}this.staticMode&&this.container.removeChild(J);return a};a.setConvert=function(){for(var a=0;3>a;a++){var b=this.fullSceneLayout[H[a]];t.setConvert(b,this.fullLayout);b.setScale=v.noop}};a.make4thDimension=function(){var a=this.graphDiv._fullLayout;this.mockAxis={type:"linear",showexponent:"all",exponentformat:"B"};
t.setConvert(this.mockAxis,a)};p.exports=e},{"../../components/fx":616,"../../lib":700,"../../lib/show_no_webgl_msg":721,"../../lib/str2rgbarray":723,"../../plots/cartesian/axes":748,"../../registry":829,"./layout/convert":793,"./layout/spikes":796,"./layout/tick_marks":797,"./project":798,"gl-plot3d":286,"has-passive-events":403,"webgl-context":540}],800:[function(a,p,l){p.exports=function(a,k,h,e){e=e||a.length;for(var f=Array(e),b=0;b<e;b++)f[b]=[a[b],k[b],h[b]];return f}},{}],801:[function(a,
p,l){l=a("./font_attributes");var m=a("./animation_attributes"),k=a("../components/color/attributes"),h=a("../components/colorscale/layout_attributes"),e=a("./pad_attributes");a=a("../lib/extend").extendFlat;var f=l({editType:"calc"});f.family.dflt='"Open Sans", verdana, arial, sans-serif';f.size.dflt=12;f.color.dflt=k.defaultLine;p.exports={font:f,title:{text:{valType:"string",editType:"layoutstyle"},font:l({editType:"layoutstyle"}),xref:{valType:"enumerated",dflt:"container",values:["container",
"paper"],editType:"layoutstyle"},yref:{valType:"enumerated",dflt:"container",values:["container","paper"],editType:"layoutstyle"},x:{valType:"number",min:0,max:1,dflt:.5,editType:"layoutstyle"},y:{valType:"number",min:0,max:1,dflt:"auto",editType:"layoutstyle"},xanchor:{valType:"enumerated",dflt:"auto",values:["auto","left","center","right"],editType:"layoutstyle"},yanchor:{valType:"enumerated",dflt:"auto",values:["auto","top","middle","bottom"],editType:"layoutstyle"},pad:a(e({editType:"layoutstyle"}),
{}),editType:"layoutstyle"},autosize:{valType:"boolean",dflt:!1,editType:"none"},width:{valType:"number",min:10,dflt:700,editType:"plot"},height:{valType:"number",min:10,dflt:450,editType:"plot"},margin:{l:{valType:"number",min:0,dflt:80,editType:"plot"},r:{valType:"number",min:0,dflt:80,editType:"plot"},t:{valType:"number",min:0,dflt:100,editType:"plot"},b:{valType:"number",min:0,dflt:80,editType:"plot"},pad:{valType:"number",min:0,dflt:0,editType:"plot"},autoexpand:{valType:"boolean",dflt:!0,editType:"plot"},
editType:"plot"},paper_bgcolor:{valType:"color",dflt:k.background,editType:"plot"},plot_bgcolor:{valType:"color",dflt:k.background,editType:"layoutstyle"},separators:{valType:"string",editType:"plot"},hidesources:{valType:"boolean",dflt:!1,editType:"plot"},showlegend:{valType:"boolean",editType:"legend"},colorway:{valType:"colorlist",dflt:k.defaults,editType:"calc"},colorscale:h,datarevision:{valType:"any",editType:"calc"},uirevision:{valType:"any",editType:"none"},editrevision:{valType:"any",editType:"none"},
selectionrevision:{valType:"any",editType:"none"},template:{valType:"any",editType:"calc"},modebar:{orientation:{valType:"enumerated",values:["v","h"],dflt:"h",editType:"modebar"},bgcolor:{valType:"color",editType:"modebar"},color:{valType:"color",editType:"modebar"},activecolor:{valType:"color",editType:"modebar"},uirevision:{valType:"any",editType:"none"},editType:"modebar"},meta:{valType:"data_array",editType:"plot"},transition:a({},m.transition,{editType:"none"}),_deprecated:{title:{valType:"string",
editType:"layoutstyle"},titlefont:l({editType:"layoutstyle"})}}},{"../components/color/attributes":576,"../components/colorscale/layout_attributes":590,"../lib/extend":690,"./animation_attributes":743,"./font_attributes":774,"./pad_attributes":809}],802:[function(a,p,l){p.exports={requiredVersion:"0.45.0",styleUrlPrefix:"mapbox://styles/mapbox/",styleUrlSuffix:"v9",controlContainerClassName:"mapboxgl-control-container",wrongVersionErrorMsg:"Your custom plotly.js bundle is not using the correct mapbox-gl version\nPlease install mapbox-gl@0.45.0.",
noAccessTokenErrorMsg:"Missing Mapbox access token.\nMapbox trace type require a Mapbox access token to be registered.\nFor example:\n  Plotly.plot(gd, data, layout, { mapboxAccessToken: 'my-access-token' });\nMore info here: https://www.mapbox.com/help/define-access-token/",mapOnErrorMsg:"Mapbox error.",styleRules:{map:"overflow:hidden;position:relative;","missing-css":"display:none"}}},{}],803:[function(a,p,l){var m=a("../../lib");p.exports=function(a,h){var e=a.split(" ");a=e[0];e=e[1];var f=m.isArrayOrTypedArray(h)?
m.mean(h):h;h=.5+f/100;f=1.5+f/100;var b=["",""],k=[0,0];switch(a){case "top":b[0]="top";k[1]=-f;break;case "bottom":b[0]="bottom",k[1]=f}switch(e){case "left":b[1]="right";k[0]=-h;break;case "right":b[1]="left",k[0]=h}return{anchor:b[0]&&b[1]?b.join("-"):b[0]?b[0]:b[1]?b[1]:"center",offset:k}}},{"../../lib":700}],804:[function(a,p,l){var m=a("mapbox-gl"),k=a("../../lib"),h=a("../../plots/get_data").getSubplotCalcData,e=a("../../constants/xmlns_namespaces"),f=a("./mapbox"),b=a("./constants"),n;for(n in b.styleRules)k.addStyleRule(".mapboxgl-"+
n,b.styleRules[n]);l.name="mapbox";l.attr="subplot";l.idRoot="mapbox";l.idRegex=l.attrRegex=k.counterRegex("mapbox");l.attributes={subplot:{valType:"subplotid",dflt:"mapbox",editType:"calc"}};l.layoutAttributes=a("./layout_attributes");l.supplyLayoutDefaults=a("./layout_defaults");l.plot=function(a){var e=a._fullLayout,d=a.calcdata,g=e._subplots.mapbox;if(m.version!==b.requiredVersion)throw Error(b.wrongVersionErrorMsg);a:{var c=a._fullLayout;if(""===a._context.mapboxAccessToken)c="";else{for(var n=
0;n<g.length;n++){var l=c[g[n]];if(l.accesstoken){c=l.accesstoken;break a}}throw Error(b.noAccessTokenErrorMsg);}}m.accessToken=c;for(c=0;c<g.length;c++){n=g[c];l=h(d,"mapbox",n);var p=e[n],q=p._subplot;q||(q=f({gd:a,container:e._glcontainer.node(),id:n,fullLayout:e,staticPlot:a._context.staticPlot}),e[n]._subplot=q);q.viewInitial||(q.viewInitial={center:k.extendFlat({},p.center),zoom:p.zoom,bearing:p.bearing,pitch:p.pitch});q.plot(l,e,a._promises)}};l.clean=function(a,b,d,e){a=e._subplots.mapbox||
[];for(d=0;d<a.length;d++){var c=a[d];!b[c]&&e[c]._subplot&&e[c]._subplot.destroy()}};l.toSVG=function(a){a=a._fullLayout;for(var b=a._subplots.mapbox,d=a._size,f=0;f<b.length;f++){var c=a[b[f]],h=c.domain;c=c._subplot;var k=c.toImage("png");a._glimages.append("svg:image").attr({xmlns:e.svg,"xlink:href":k,x:d.l+d.w*h.x[0],y:d.t+d.h*(1-h.y[1]),width:d.w*(h.x[1]-h.x[0]),height:d.h*(h.y[1]-h.y[0]),preserveAspectRatio:"none"});c.destroy()}};l.updateFx=function(a){a=a._fullLayout;for(var b=a._subplots.mapbox,
d=0;d<b.length;d++)a[b[d]]._subplot.updateFx(a)}},{"../../constants/xmlns_namespaces":678,"../../lib":700,"../../plots/get_data":784,"./constants":802,"./layout_attributes":806,"./layout_defaults":807,"./mapbox":808,"mapbox-gl":418}],805:[function(a,p,l){function m(a,e){this.mapbox=a;this.map=a.map;this.uid=a.uid+"-layer"+e;this.idSource=this.uid+"-source";this.idLayer=this.uid+"-layer";this.below=this.layerType=this.source=this.sourceType=null;this.visible=!1}function k(a){var b=a.source;return a.visible&&
(e.isPlainObject(b)||"string"===typeof b&&0<b.length)}function h(a){var b={},h={};switch(a.type){case "circle":e.extendFlat(h,{"circle-radius":a.circle.radius,"circle-color":a.color,"circle-opacity":a.opacity});break;case "line":e.extendFlat(h,{"line-width":a.line.width,"line-color":a.color,"line-opacity":a.opacity,"line-dasharray":a.line.dash});break;case "fill":e.extendFlat(h,{"fill-color":a.color,"fill-outline-color":a.fill.outlinecolor,"fill-opacity":a.opacity});break;case "symbol":var k=a.symbol,
d=f(k.textposition,k.iconsize);e.extendFlat(b,{"icon-image":k.icon+"-15","icon-size":k.iconsize/10,"text-field":k.text,"text-size":k.textfont.size,"text-anchor":d.anchor,"text-offset":d.offset,"symbol-placement":k.placement});e.extendFlat(h,{"icon-color":a.color,"text-color":k.textfont.color,"text-opacity":a.opacity})}return{layout:b,paint:h}}var e=a("../../lib"),f=a("./convert_text_opts");a=m.prototype;a.update=function(a){this.visible?this.needsNewSource(a)?(this.removeLayer(),this.updateSource(a),
this.updateLayer(a)):this.needsNewLayer(a)?this.updateLayer(a):this.updateStyle(a):(this.updateSource(a),this.updateLayer(a));this.visible=k(a)};a.needsNewSource=function(a){return this.sourceType!==a.sourcetype||this.source!==a.source||this.layerType!==a.type};a.needsNewLayer=function(a){return this.layerType!==a.type||this.below!==a.below};a.updateSource=function(a){var b=this.map;b.getSource(this.idSource)&&b.removeSource(this.idSource);this.sourceType=a.sourcetype;this.source=a.source;if(k(a)){var e=
a.sourcetype;a=a.source;var f={type:e},d;"geojson"===e?d="data":"vector"===e&&(d="string"===typeof a?"url":"tiles");f[d]=a;b.addSource(this.idSource,f)}};a.updateLayer=function(a){var b=this.map,e=h(a);this.removeLayer();this.layerType=a.type;k(a)&&b.addLayer({id:this.idLayer,source:this.idSource,"source-layer":a.sourcelayer||"",type:a.type,minzoom:a.minzoom,maxzoom:a.maxzoom,layout:e.layout,paint:e.paint},a.below)};a.updateStyle=function(a){k(a)&&(a=h(a),this.mapbox.setOptions(this.idLayer,"setLayoutProperty",
a.layout),this.mapbox.setOptions(this.idLayer,"setPaintProperty",a.paint))};a.removeLayer=function(){var a=this.map;a.getLayer(this.idLayer)&&a.removeLayer(this.idLayer)};a.dispose=function(){var a=this.map;a.removeLayer(this.idLayer);a.removeSource(this.idSource)};p.exports=function(a,e,f){a=new m(a,e);a.update(f);return a}},{"../../lib":700,"./convert_text_opts":803}],806:[function(a,p,l){l=a("../../lib");var m=a("../../components/color").defaultLine,k=a("../domain").attributes,h=a("../font_attributes"),
e=a("../../traces/scatter/attributes").textposition,f=a("../../plot_api/edit_types").overrideAll;a=a("../../plot_api/plot_template").templatedArray;h=h({});h.family.dflt="Open Sans Regular, Arial Unicode MS Regular";(p.exports=f({_arrayAttrRegexps:[l.counterRegex("mapbox",".layers",!0)],domain:k({name:"mapbox"}),accesstoken:{valType:"string",noBlank:!0,strict:!0},style:{valType:"any",values:"basic streets outdoors light dark satellite satellite-streets".split(" "),dflt:"basic"},center:{lon:{valType:"number",
dflt:0},lat:{valType:"number",dflt:0}},zoom:{valType:"number",dflt:1},bearing:{valType:"number",dflt:0},pitch:{valType:"number",dflt:0},layers:a("layer",{visible:{valType:"boolean",dflt:!0},sourcetype:{valType:"enumerated",values:["geojson","vector"],dflt:"geojson"},source:{valType:"any"},sourcelayer:{valType:"string",dflt:""},type:{valType:"enumerated",values:["circle","line","fill","symbol"],dflt:"circle"},below:{valType:"string",dflt:""},color:{valType:"color",dflt:m},opacity:{valType:"number",
min:0,max:1,dflt:1},minzoom:{valType:"number",min:0,max:24,dflt:0},maxzoom:{valType:"number",min:0,max:24,dflt:24},circle:{radius:{valType:"number",dflt:15}},line:{width:{valType:"number",dflt:2},dash:{valType:"data_array"}},fill:{outlinecolor:{valType:"color",dflt:m}},symbol:{icon:{valType:"string",dflt:"marker"},iconsize:{valType:"number",dflt:10},text:{valType:"string",dflt:""},placement:{valType:"enumerated",values:["point","line","line-center"],dflt:"point"},textfont:h,textposition:l.extendFlat({},
e,{arrayOk:!1})}})},"plot","from-root")).uirevision={valType:"any",editType:"none"}},{"../../components/color":577,"../../lib":700,"../../plot_api/edit_types":731,"../../plot_api/plot_template":738,"../../traces/scatter/attributes":1051,"../domain":773,"../font_attributes":774}],807:[function(a,p,l){function m(a,b,e,d){e("accesstoken",d.accessToken);e("style");e("center.lon");e("center.lat");e("zoom");e("bearing");e("pitch");f(a,b,{name:"layers",handleItemDefaults:k});b._input=a}function k(a,e){function f(d,
c){return h.coerce(a,e,b.layers,d,c)}if(f("visible")){var d=f("sourcetype");f("source");"vector"===d&&f("sourcelayer");d=f("type");f("below");f("color");f("opacity");f("minzoom");f("maxzoom");"circle"===d&&f("circle.radius");"line"===d&&(f("line.width"),f("line.dash"));"fill"===d&&f("fill.outlinecolor");"symbol"===d&&(f("symbol.icon"),f("symbol.iconsize"),f("symbol.text"),h.coerceFont(f,"symbol.textfont"),f("symbol.textposition"),f("symbol.placement"))}}var h=a("../../lib"),e=a("../subplot_defaults"),
f=a("../array_container_defaults"),b=a("./layout_attributes");p.exports=function(a,f,h){e(a,f,h,{type:"mapbox",attributes:b,handleDefaults:m,partition:"y",accessToken:f._mapboxAccessToken})}},{"../../lib":700,"../array_container_defaults":744,"../subplot_defaults":824,"./layout_attributes":806}],808:[function(a,p,l){function m(a){this.id=a.id;this.gd=a.gd;this.container=a.container;this.isStatic=a.staticPlot;a=a.fullLayout;this.uid=a._uid+"-"+this.id;this.yaxis=this.xaxis=this.div=null;this.createFramework(a);
this.styleObj=this.accessToken=this.map=null;this.traceHash={};this.layerList=[]}function k(a){var d=c.style.values,e=c.style.dflt,f={};b.isPlainObject(a)?(f.id=a.id,f.style=a):"string"===typeof a?(f.id=a,f.style=-1!==d.indexOf(a)?g.styleUrlPrefix+a+"-"+g.styleUrlSuffix:a):(f.id=e,f.style=g.styleUrlPrefix+e+"-"+g.styleUrlSuffix);f.transition={duration:0,delay:0};return f}function h(a){return[a.lon,a.lat]}var e=a("mapbox-gl"),f=a("../../components/fx"),b=a("../../lib"),n=a("../../registry"),q=a("../../components/dragelement"),
r=a("../cartesian/select").prepSelect,d=a("../cartesian/select").selectOnClick,g=a("./constants"),c=a("./layout_attributes"),v=a("./layers");a=m.prototype;p.exports=function(a){return new m(a)};a.plot=function(a,b,c){var d=this,e=b[d.id];d.map&&e.accesstoken!==d.accessToken&&(d.map.remove(),d.map=null,d.styleObj=null,d.traceHash=[],d.layerList={});e=d.map?new Promise(function(c,e){d.updateMap(a,b,c,e)}):new Promise(function(c,e){d.createMap(a,b,c,e)});c.push(e)};a.createMap=function(a,b,c,m){function l(){f.loneUnhover(b._toppaper)}
var p=this,t=p.gd,r=b[p.id],q=p.styleObj=k(r.style);p.accessToken=r.accesstoken;var v=p.map=new e.Map({container:p.div,style:q.style,center:h(r.center),zoom:r.zoom,bearing:r.bearing,pitch:r.pitch,interactive:!p.isStatic,preserveDrawingBuffer:p.isStatic,doubleClickZoom:!1,boxZoom:!1});r=p.div.getElementsByClassName(g.controlContainerClassName)[0];p.div.removeChild(r);v._canvas.style.left="0px";v._canvas.style.top="0px";p.rejectOnError(m);v.once("load",function(){p.updateData(a);p.updateLayout(b);p.resolveOnRender(c)});
if(!p.isStatic){var u=!1;v.on("moveend",function(a){if(p.map){if(a.originalEvent||u){a=t._fullLayout[p.id];n.call("_storeDirectGUIEdit",t.layout,t._fullLayout._preGUI,p.getViewEdits(a));var b=p.getView();a._input.center=a.center=b.center;a._input.zoom=a.zoom=b.zoom;a._input.bearing=a.bearing=b.bearing;a._input.pitch=a.pitch=b.pitch;t.emit("plotly_relayout",p.getViewEdits(b))}u=!1}});v.on("wheel",function(){u=!0});v.on("mousemove",function(a){var b=p.div.getBoundingClientRect();a.clientX=a.point.x+
b.left;a.clientY=a.point.y+b.top;a.target.getBoundingClientRect=function(){return b};p.xaxis.p2c=function(){return a.lngLat.lng};p.yaxis.p2c=function(){return a.lngLat.lat};f.hover(t,a,p.id)});v.on("dragstart",l);v.on("zoomstart",l);v.on("dblclick",function(){var a=t._fullLayout[p.id];n.call("_storeDirectGUIEdit",t.layout,t._fullLayout._preGUI,p.getViewEdits(a));var b=p.viewInitial;v.setCenter(h(b.center));v.setZoom(b.zoom);v.setBearing(b.bearing);v.setPitch(b.pitch);b=p.getView();a._input.center=
a.center=b.center;a._input.zoom=a.zoom=b.zoom;a._input.bearing=a.bearing=b.bearing;a._input.pitch=a.pitch=b.pitch;t.emit("plotly_doubleclick",null);t.emit("plotly_relayout",p.getViewEdits(b))});p.clearSelect=function(){t._fullLayout._zoomlayer.selectAll(".select-outline").remove()};p.onClickInPanFn=function(a){return function(b){var c=t._fullLayout.clickmode;-1<c.indexOf("select")&&d(b.originalEvent,t,[p.xaxis],[p.yaxis],p.id,a);-1<c.indexOf("event")&&f.click(t,b.originalEvent)}}}};a.updateMap=function(a,
b,c,d){var e=this,f=e.map,g=b[this.id];e.rejectOnError(d);d=k(g.style);e.styleObj.id!==d.id?(e.styleObj=d,f.setStyle(d.style),f.once("styledata",function(){e.traceHash={};e.updateData(a);e.updateLayout(b);e.resolveOnRender(c)})):(e.updateData(a),e.updateLayout(b),e.resolveOnRender(c));this.gd._context._scrollZoom.mapbox?f.scrollZoom.enable():f.scrollZoom.disable()};a.updateData=function(a){var b=this.traceHash,c,d;for(d=0;d<a.length;d++){var e=a[d];var f=e[0].trace;(c=b[f.uid])?c.update(e):f._module&&
(b[f.uid]=f._module.plot(this,e))}e=Object.keys(b);d=0;a:for(;d<e.length;d++){var g=e[d];for(c=0;c<a.length;c++)if(f=a[c][0].trace,g===f.uid)continue a;c=b[g];c.dispose();delete b[g]}};a.updateLayout=function(a){var b=this.map,c=a[this.id];b.setCenter(h(c.center));b.setZoom(c.zoom);b.setBearing(c.bearing);b.setPitch(c.pitch);this.updateLayers(a);this.updateFramework(a);this.updateFx(a);this.map.resize()};a.resolveOnRender=function(a){var b=this.map;b.on("render",function D(){b.loaded()&&(b.off("render",
D),setTimeout(a,0))})};a.rejectOnError=function(a){function b(){a(Error(g.mapOnErrorMsg))}var c=this.map;c.once("error",b);c.once("style.error",b);c.once("source.error",b);c.once("tile.error",b);c.once("layer.error",b)};a.createFramework=function(a){var b=this,c=b.div=document.createElement("div");c.id=b.uid;c.style.position="absolute";b.container.appendChild(c);b.xaxis={_id:"x",c2p:function(a){return b.project(a).x}};b.yaxis={_id:"y",c2p:function(a){return b.project(a).y}};b.updateFramework(a)};
a.updateFx=function(a){function c(a){a=d.map.unproject(a);return[a.lng,a.lat]}var d=this,e=d.map,f=d.gd;if(!d.isStatic){var g=a.dragmode;d.dragOptions=b.extendDeep(d.dragOptions||{},{element:d.div,gd:f,plotinfo:{id:d.id,xaxis:d.xaxis,yaxis:d.yaxis,fillRangeItems:"select"===g?function(a,b){(a.range={})[d.id]=[c([b.xmin,b.ymin]),c([b.xmax,b.ymax])]}:function(a,b,e){(a.lassoPoints={})[d.id]=e.filtered.map(c)}},xaxes:[d.xaxis],yaxes:[d.yaxis],subplot:d.id});e.off("click",d.onClickInPanHandler);"select"===
g||"lasso"===g?(e.dragPan.disable(),e.on("zoomstart",d.clearSelect),d.dragOptions.prepFn=function(a,b,c){r(a,b,c,d.dragOptions,g)},q.init(d.dragOptions)):(e.dragPan.enable(),e.off("zoomstart",d.clearSelect),d.div.onmousedown=null,d.onClickInPanHandler=d.onClickInPanFn(d.dragOptions),e.on("click",d.onClickInPanHandler))}};a.updateFramework=function(a){var b=a[this.id].domain;a=a._size;var c=this.div.style;c.width=a.w*(b.x[1]-b.x[0])+"px";c.height=a.h*(b.y[1]-b.y[0])+"px";c.left=a.l+b.x[0]*a.w+"px";
c.top=a.t+(1-b.y[1])*a.h+"px";this.xaxis._offset=a.l+b.x[0]*a.w;this.xaxis._length=a.w*(b.x[1]-b.x[0]);this.yaxis._offset=a.t+(1-b.y[1])*a.h;this.yaxis._length=a.h*(b.y[1]-b.y[0])};a.updateLayers=function(a){a=a[this.id].layers;var b=this.layerList,c;if(a.length!==b.length){for(c=0;c<b.length;c++)b[c].dispose();b=this.layerList=[];for(c=0;c<a.length;c++)b.push(v(this,c,a[c]))}else for(c=0;c<a.length;c++)b[c].update(a[c])};a.destroy=function(){this.map&&(this.map.remove(),this.map=null,this.container.removeChild(this.div))};
a.toImage=function(){this.map.stop();return this.map.getCanvas().toDataURL()};a.setOptions=function(a,b,c){for(var d in c)this.map[b](a,d,c[d])};a.project=function(a){return this.map.project(new e.LngLat(a[0],a[1]))};a.getView=function(){var a=this.map,b=a.getCenter();return{center:{lon:b.lng,lat:b.lat},zoom:a.getZoom(),bearing:a.getBearing(),pitch:a.getPitch()}};a.getViewEdits=function(a){for(var b=this.id,c=["center","zoom","bearing","pitch"],d={},e=0;e<c.length;e++){var f=c[e];d[b+"."+f]=a[f]}return d}},
{"../../components/dragelement":595,"../../components/fx":616,"../../lib":700,"../../registry":829,"../cartesian/select":765,"./constants":802,"./layers":805,"./layout_attributes":806,"mapbox-gl":418}],809:[function(a,p,l){p.exports=function(a){a=a.editType;return{t:{valType:"number",dflt:0,editType:a},r:{valType:"number",dflt:0,editType:a},b:{valType:"number",dflt:0,editType:a},l:{valType:"number",dflt:0,editType:a},editType:a}}},{}],810:[function(a,p,l){function m(a,b){b.text("");b=b.append("a").attr({"xlink:xlink:href":"#",
"class":"link--impt link--embedview","font-weight":"bold"}).text(a._context.linkText+" "+String.fromCharCode(187));if(a._context.sendData)b.on("click",function(){E.sendDataToCloud(a)});else{var c=window.location.pathname.split("/"),d=window.location.search;b.attr({"xlink:xlink:show":"new","xlink:xlink:href":"/"+c[2].split(".")[0]+"/"+c[1]+d})}}function k(a,b){function c(a,b){n[b]=a;m[a]=1}function d(a,b){if(a&&"string"===typeof a&&!m[a])return c(a,b),!0}var e=b.length,f=[],g;for(g=0;g<a.length;g++){var h=
a[g]._fullInput;h!==k&&f.push(h);var k=h}a=f.length;var n=Array(e),m={};for(g=0;g<e;g++)k=b[g].uid,"number"===typeof k&&(k=String(k)),d(k,g)||g<a&&d(f[g].uid,g)||c(y.randstr(m),g);return n}function h(a,b){function d(a){for(var c=!0,d=0;d<b.length;d++){var e=b[d];g[e]||(a[e]?g[e]=a[e]:c=!1)}c&&(f=!0)}var e=a._context.locale;e||"en-US"===e;for(var f=!1,g={},h=0;2>h;h++){for(var k=a._context.locales,n=0;2>n;n++){if(k=(k[e]||{}).format)if(d(k),f)break;k=c.localeRegistry}n=e.split("-")[0];if(f||n===e)break;
e=n}f||d(c.localeRegistry.en.format);return g}function e(a){a=a.transforms;if(Array.isArray(a)&&a.length)for(var b=0;b<a.length;b++){var c=a[b];if((c=c._module||H[c.type])&&c.makesData)return!0}return!1}function f(a,b,c,d){for(var e=a.transforms,f=[a],g=0;g<e.length;g++){var h=e[g],k=H[h.type];k&&k.transform&&(f=k.transform(f,{transform:h,fullTrace:a,fullData:b,layout:c,fullLayout:d,transformIndex:g}))}return f}function b(a){var b=a.margin;a._size||(b=a._size={l:Math.round(b.l),r:Math.round(b.r),
t:Math.round(b.t),b:Math.round(b.b),p:Math.round(b.pad)},b.w=Math.round(a.width)-b.l-b.r,b.h=Math.round(a.height)-b.t-b.b);a._pushmargin||(a._pushmargin={});a._pushmarginIds||(a._pushmarginIds={})}function n(a,b,d){function e(a){if(a)for(;a.length;)a.shift()}function f(b){if(a._transitionData)return e(a._transitionData._interruptCallbacks),Promise.resolve().then(function(){if(d.redraw)return c.call("redraw",a)}).then(function(){a._transitioning=!1;a._transitioningWithDuration=!1;a.emit("plotly_transitioned",
[])}).then(b)}var g=!1,h=y.syncOrAsync([E.previousPromises,function(){if(a._transitionData){a._transitioning=!1;var b=a._transitionData._interruptCallbacks,c=Promise.resolve();if(b)for(;b.length;)c=c.then(b.shift());return c}},d.prepareFn,E.rehover,function(){a.emit("plotly_transitioning",[]);return new Promise(function(e){function h(){k++;return function(){n++;g||n!==k||f(e)}}a._transitioning=!0;0<b.duration&&(a._transitioningWithDuration=!0);a._transitionData._interruptCallbacks.push(function(){g=
!0});d.redraw&&a._transitionData._interruptCallbacks.push(function(){return c.call("redraw",a)});a._transitionData._interruptCallbacks.push(function(){a.emit("plotly_transitioninterrupted",[])});var k=0,n=0;d.runFn(h);setTimeout(h())})}],a);h&&h.then||(h=Promise.resolve());return h.then(function(){return a})}function q(a,b){for(var c=0;c<a.length;c++){var d=a[c];d.clearCalc();"multicategory"===d.type&&d.setupMultiCategory(b)}}function r(a){var b=a._fullLayout,c=b._visibleModules,d={},e,f;for(e=0;e<
c.length;e++){var g=c[e],h=g.crossTraceCalc;h&&(g=g.basePlotModule.name,d[g]?y.pushUnique(d[g],h):d[g]=[h])}for(f in d)if(h=d[f],g=b._subplots[f],Array.isArray(g))for(c=0;c<g.length;c++){var k=g[c],n="cartesian"===f?b._plots[k]:b[k];for(e=0;e<h.length;e++)h[e](a,n,k)}else for(e=0;e<h.length;e++)h[e](a)}var d=a("d3"),g=a("fast-isnumeric"),c=a("../registry"),v=a("../plot_api/plot_schema"),t=a("../plot_api/plot_template"),y=a("../lib"),w=a("../components/color"),x=a("../constants/numerical").BADNUM,
G=a("../plots/cartesian/axis_ids"),A=a("./animation_attributes"),C=a("./frame_attributes"),P=y.relinkPrivateKeys,J=y._,E=p.exports={};y.extendFlat(E,c);E.attributes=a("./attributes");E.attributes.type.values=E.allTypes;E.fontAttrs=a("./font_attributes");E.layoutAttributes=a("./layout_attributes");E.fontWeight="normal";var H=E.transformsRegistry;a=a("./command");E.executeAPICommand=a.executeAPICommand;E.computeAPICommandBindings=a.computeAPICommandBindings;E.manageCommandObserver=a.manageCommandObserver;
E.hasSimpleAPICommandBindings=a.hasSimpleAPICommandBindings;E.redrawText=function(a){a=y.getGraphDiv(a);if(!(a.data&&a.data[0]&&a.data[0].r))return new Promise(function(b){setTimeout(function(){c.getComponentMethod("annotations","draw")(a);c.getComponentMethod("legend","draw")(a);(a.calcdata||[]).forEach(function(a){a[0]&&a[0].t&&a[0].t.cb&&a[0].t.cb()});b(E.previousPromises(a))},300)})};E.resize=function(a){a=y.getGraphDiv(a);return new Promise(function(b,d){function e(a){a=window.getComputedStyle(a).display;
return!a||"none"===a}a&&!e(a)||d(Error("Resize must be passed a displayed plot div element."));a._redrawTimer&&clearTimeout(a._redrawTimer);a._redrawTimer=setTimeout(function(){if(!a.layout||a.layout.width&&a.layout.height||e(a))b(a);else{delete a.layout.width;delete a.layout.height;var d=a.changed;a.autoplay=!0;c.call("relayout",a,{autosize:!0}).then(function(){a.changed=d;b(a)})}},100)})};E.previousPromises=function(a){if((a._promises||[]).length)return Promise.all(a._promises).then(function(){a._promises=
[]})};E.addLinks=function(a){if(a._context.showLink||a._context.showSources){var b=a._fullLayout,c=y.ensureSingle(b._paper,"text","js-plot-link-container",function(a){a.style({"font-family":'"Open Sans", Arial, sans-serif',"font-size":"12px",fill:w.defaultLine,"pointer-events":"all"}).each(function(){var a=d.select(this);a.append("tspan").classed("js-link-to-tool",!0);a.append("tspan").classed("js-link-spacer",!0);a.append("tspan").classed("js-sourcelinks",!0)})}),e=c.node(),f={y:b._paper.attr("height")-
9};document.body.contains(e)&&e.getComputedTextLength()>=b.width-20?(f["text-anchor"]="start",f.x=5):(f["text-anchor"]="end",f.x=b._paper.attr("width")-7);c.attr(f);b=c.select(".js-link-to-tool");e=c.select(".js-link-spacer");c=c.select(".js-sourcelinks");a._context.showSources&&a._context.showSources(a);a._context.showLink&&m(a,b);e.text(b.text()&&c.text()?" - ":"")}};E.sendDataToCloud=function(a){a.emit("plotly_beforeexport");var b=(window.PLOTLYENV||{}).BASE_URL||a._context.plotlyServerURL,c=d.select(a).append("div").attr("id",
"hiddenform").style("display","none");b=c.append("form").attr({action:b+"/external",method:"post",target:"_blank"});b.append("input").attr({type:"text",name:"data"}).node().value=E.graphJson(a,!1,"keepdata");b.node().submit();c.remove();a.emit("plotly_afterexport");return!1};var M="days shortDays months shortMonths periods dateTime date time decimal thousands grouping currency".split(" "),z=["year","month","dayMonth","dayMonthYear"];E.supplyDefaults=function(a,e){e=e&&e.skipUpdateCalc;var f=a._fullLayout||
{};if(f._skipDefaults)delete f._skipDefaults;else{var g=a._fullLayout={},n=a.layout||{},m=a._fullData||[],l=a._fullData=[],p=a.data||[],t=a.calcdata||[],r=a._context||{};a._transitionData||E.createTransitionData(a);g._dfltTitle={plot:J(a,"Click to enter Plot title"),x:J(a,"Click to enter X axis title"),y:J(a,"Click to enter Y axis title"),colorbar:J(a,"Click to enter Colorscale title"),annotation:J(a,"new text")};g._traceWord=J(a,"trace");var q=h(a,M);g._mapboxAccessToken=r.mapboxAccessToken;if(f._initialAutoSizeIsDone){var v=
f.width,u=f.height;E.supplyLayoutGlobalDefaults(n,g,q);n.width||(g.width=v);n.height||(g.height=u);E.sanitizeMargins(g)}else E.supplyLayoutGlobalDefaults(n,g,q),v=!n.width||!n.height,u=g.autosize,r=r.autosizable,v&&(u||r)?E.plotAutoSize(a,n,g):v&&E.sanitizeMargins(g),!u&&v&&(n.width=g.width,n.height=g.height);v=g.separators;q.decimal=v.charAt(0);q.thousands=v.charAt(1);q=d.locale(q);g._d3locale=q;g._extraFormat=h(a,z);g._initialAutoSizeIsDone=!0;g._dataLength=p.length;g._modules=[];g._visibleModules=
[];g._basePlotModules=[];q=c.collectableSubplotTypes;v={};var w;if(!q)for(w in q=[],r=c.subplotsRegistry,r){var A=r[w].attr;if(A&&(q.push(w),Array.isArray(A)))for(u=0;u<A.length;u++)y.pushUnique(q,A[u])}for(w=0;w<q.length;w++)v[q[w]]=[];v=g._subplots=v;q=g._splomAxes={x:{},y:{}};u=g._splomSubplots={};g._splomGridDflt={};g._scatterStackOpts={};g._firstScatter={};g._alignmentOpts={};g._requestRangeslider={};g._traceUids=k(m,p);g._globalTransforms=(a._context||{}).globalTransforms;E.supplyDataDefaults(p,
l,n,g);w=Object.keys(q.x);q=Object.keys(q.y);if(1<w.length&&1<q.length){c.getComponentMethod("grid","sizeDefaults")(n,g);for(p=0;p<w.length;p++)y.pushUnique(v.xaxis,w[p]);for(p=0;p<q.length;p++)y.pushUnique(v.yaxis,q[p]);for(var B in u)y.pushUnique(v.cartesian,B)}g._has=E._hasPlotType.bind(g);if(m.length===l.length)for(p=0;p<l.length;p++)P(l[p],m[p]);E.supplyLayoutModuleDefaults(n,g,l,a._transitionData);a=g._visibleModules;B=[];for(p=0;p<a.length;p++)(n=a[p].crossTraceDefaults)&&y.pushUnique(B,n);
for(p=0;p<B.length;p++)B[p](l,g);c.getComponentMethod("colorscale","crossTraceDefaults")(l,g);g._hasOnlyLargeSploms=1===g._basePlotModules.length&&"splom"===g._basePlotModules[0].name&&15<w.length&&15<q.length&&0===g.shapes.length&&0===g.images.length;g._hasCartesian=g._has("cartesian");g._hasGeo=g._has("geo");g._hasGL3D=g._has("gl3d");g._hasGL2D=g._has("gl2d");g._hasTernary=g._has("ternary");g._hasPie=g._has("pie");E.linkSubplots(l,g,m,f);E.cleanPlot(l,g,m,f);P(g,f);g._preGUI||(g._preGUI={});g._tracePreGUI||
(g._tracePreGUI={});f=g._tracePreGUI;m={};for(var x in f)m[x]="old";for(p=0;p<l.length;p++)x=l[p]._fullInput.uid,m[x]||(f[x]={}),m[x]="new";for(x in m)"old"===m[x]&&delete f[x];b(g);c.getComponentMethod("rangeslider","makeData")(g);e||t.length!==l.length||E.supplyDefaultsUpdateCalc(t,l)}};E.supplyDefaultsUpdateCalc=function(a,b){for(var c=0;c<b.length;c++){var d=b[c],e=(a[c]||[])[0];if(e&&e.trace){var f=e.trace;if(f._hasCalcTransform){var g=f._arrayAttrs,h;for(h=0;h<g.length;h++){var k=g[h];var n=
y.nestedProperty(f,k).get().slice();y.nestedProperty(d,k).set(n)}}e.trace=d}}};E.createTransitionData=function(a){a._transitionData||(a._transitionData={});a._transitionData._frames||(a._transitionData._frames=[]);a._transitionData._frameHash||(a._transitionData._frameHash={});a._transitionData._counter||(a._transitionData._counter=0);a._transitionData._interruptCallbacks||(a._transitionData._interruptCallbacks=[])};E._hasPlotType=function(a){var b,d=this._basePlotModules||[];for(b=0;b<d.length;b++)if(d[b].name===
a)return!0;d=this._modules||[];for(b=0;b<d.length;b++){var e=d[b].name;if(e===a||(e=c.modules[e])&&e.categories[a])return!0}return!1};E.cleanPlot=function(a,b,c,d){var e,f=d._basePlotModules||[];for(e=0;e<f.length;e++){var g=f[e];g.clean&&g.clean(a,b,c,d)}e=d._has&&d._has("gl");b=b._has&&b._has("gl");e&&!b&&void 0!==d._glcontainer&&(d._glcontainer.selectAll(".gl-canvas").remove(),d._glcontainer.selectAll(".no-webgl").remove(),d._glcanvas=null);f=!!d._infolayer;e=0;a:for(;e<c.length;e++){g=c[e].uid;
for(b=0;b<a.length;b++)if(g===a[b].uid)continue a;f&&d._infolayer.select(".cb"+g).remove()}d._zoomlayer&&d._zoomlayer.selectAll(".select-outline").remove()};E.linkSubplots=function(a,b,c,d){var e=d._plots||{},f=b._plots={};c=b._subplots;d={_fullData:a,_fullLayout:b};var g=c.cartesian.concat(c.gl2d||[]);for(c=0;c<g.length;c++){var h=g[c];var k=e[h],n=G.getFromId(d,h,"x"),m=G.getFromId(d,h,"y");k?k=f[h]=k:(k=f[h]={},k.id=h);n._counterAxes.push(m._id);m._counterAxes.push(n._id);n._subplotsWith.push(h);
m._subplotsWith.push(h);k.xaxis=n;k.yaxis=m;k._hasClipOnAxisFalse=!1;for(h=0;h<a.length;h++)if(n=a[h],n.xaxis===k.xaxis._id&&n.yaxis===k.yaxis._id&&!1===n.cliponaxis){k._hasClipOnAxisFalse=!0;break}}a=G.list(d,null,!0);for(c=0;c<a.length;c++)e=a[c],f=null,e.overlaying&&(f=G.getFromId(d,e.overlaying))&&f.overlaying&&(e.overlaying=!1,f=null),e._mainAxis=f||e,f&&(e.domain=f.domain.slice()),e._anchorAxis="free"===e.anchor?null:G.getFromId(d,e.anchor);for(c=0;c<a.length;c++){e=a[c];e._counterAxes.sort(G.idSort);
e._subplotsWith.sort(y.subplotSort);d=e;m=b;f={_fullLayout:m};g="x"===e._id.charAt(0);var l=e._mainAxis._anchorAxis;n=h=k="";l&&(n=l._mainAxis._id,k=g?e._id+n:n+e._id);if(!k||!m._plots[k])for(k="",m=e._counterAxes,l=0;l<m.length;l++){var p=m[l],t=g?e._id+p:p+e._id;h||(h=t);p=G.getFromId(f,p);if(n&&p.overlaying===n){k=t;break}}d._mainSubplot=k||h}};E.clearExpandedTraceDefaultColors=function(a){function b(a,b,c,f){d[f]=b;d.length=f+1;"color"===a.valType&&void 0===a.dflt&&e.push(d.join("."))}var c;var d=
[];var e=a._module._colorAttrs;e||(a._module._colorAttrs=e=[],v.crawl(a._module.attributes,b));for(c=0;c<e.length;c++)y.nestedProperty(a,"_input."+e[c]).get()||y.nestedProperty(a,e[c]).set(null)};E.supplyDataDefaults=function(a,b,d,e){function g(a){b.push(a);var c=a._module;c&&(y.pushUnique(h,c),!0===a.visible&&y.pushUnique(k,c),y.pushUnique(n,a._module.basePlotModule),m++,!1!==a._input.visible&&l++)}var h=e._modules,k=e._visibleModules,n=e._basePlotModules,m=0,l=0,p;e._transformModules=[];var r=
{},q=[],v=t.traceTemplater((d.template||{}).data||{});for(p=0;p<a.length;p++){var u=a[p];var w=v.newTrace(u);w.uid=e._traceUids[p];E.supplyTraceDefaults(u,w,l,e,p);w.index=p;w._input=u;w._expandedIndex=m;if(w.transforms&&w.transforms.length)for(var A=!1!==u.visible&&!1===w.visible,B=f(w,b,d,e),x=0;x<B.length;x++){var D=B[x],C={_template:w._template,type:w.type,uid:w.uid+x};A&&!1===D.visible&&delete D.visible;E.supplyTraceDefaults(D,C,m,e,p);P(C,D);C.index=p;C._input=u;C._fullInput=w;C._expandedIndex=
m;C._expandedInput=D;g(C)}else w._fullInput=w,w._expandedInput=w,g(w);c.traceIs(w,"carpetAxis")&&(r[w.carpet]=w);c.traceIs(w,"carpetDependent")&&q.push(p)}for(p=0;p<q.length;p++)w=b[q[p]],w.visible&&(a=r[w.carpet],(w._carpet=a)&&a.visible?(w.xaxis=a.xaxis,w.yaxis=a.yaxis):w.visible=!1)};E.supplyAnimationDefaults=function(a){a=a||{};var b,c={};y.coerce(a||{},c,A,"mode",void 0);y.coerce(a||{},c,A,"direction",void 0);y.coerce(a||{},c,A,"fromcurrent",void 0);if(Array.isArray(a.frame))for(c.frame=[],b=
0;b<a.frame.length;b++)c.frame[b]=E.supplyAnimationFrameDefaults(a.frame[b]||{});else c.frame=E.supplyAnimationFrameDefaults(a.frame||{});if(Array.isArray(a.transition))for(c.transition=[],b=0;b<a.transition.length;b++)c.transition[b]=E.supplyAnimationTransitionDefaults(a.transition[b]||{});else c.transition=E.supplyAnimationTransitionDefaults(a.transition||{});return c};E.supplyAnimationFrameDefaults=function(a){var b={};y.coerce(a||{},b,A.frame,"duration",void 0);y.coerce(a||{},b,A.frame,"redraw",
void 0);return b};E.supplyAnimationTransitionDefaults=function(a){var b={};y.coerce(a||{},b,A.transition,"duration",void 0);y.coerce(a||{},b,A.transition,"easing",void 0);return b};E.supplyFrameDefaults=function(a){function b(b,d){return y.coerce(a,c,C,b,d)}var c={};b("group");b("name");b("traces");b("baseframe");b("data");b("layout");return c};E.supplyTraceDefaults=function(a,b,d,e,f){function g(c,d){return y.coerce(a,b,E.attributes,c,d)}function h(a,b,c){m&&a in m.attributes&&void 0===m.attributes[a]||
(c&&"function"===typeof c?c():g(a,b))}var k=e.colorway||w.defaults,n=k[d%k.length];d=g("visible");g("type");g("name",e._traceWord+" "+f);g("uirevision",e.uirevision);var m=E.getModule(b);if(b._module=m){k=m.basePlotModule;var l=k.attr,p=k.attributes;if(l&&p){var t=e._subplots,r="";if("gl2d"!==k.name||d){if(Array.isArray(l))for(f=0;f<l.length;f++){var q=l[f],v=y.coerce(a,b,p,q);t[q]&&y.pushUnique(t[q],v);r+=v}else r=y.coerce(a,b,p,l);t[k.name]&&y.pushUnique(t[k.name],r)}}}d&&(g("customdata"),g("ids"),
c.traceIs(b,"showLegend")?(b._dfltShowLegend=!0,g("showlegend"),g("legendgroup")):b._dfltShowLegend=!1,h("hoverlabel","",function(){c.getComponentMethod("fx","supplyDefaults")(a,b,n,e)}),m&&(m.supplyDefaults(a,b,n,e),b.hovertemplate||y.coerceHoverinfo(a,b,e)),c.traceIs(b,"noOpacity")||g("opacity"),c.traceIs(b,"notLegendIsolatable")&&(b.visible=!!b.visible),m&&m.selectPoints&&g("selectedpoints"),E.supplyTransformDefaults(a,b,e));return b};E.hasMakesDataTransform=e;E.supplyTransformDefaults=function(a,
b,c){if(b._length||e(a)){var d=c._globalTransforms||[],f=c._transformModules||[];if(Array.isArray(a.transforms)||0!==d.length){d=d.concat(a.transforms||[]);for(var g=b.transforms=[],h=0;h<d.length;h++){var k=d[h],n=k.type,m=H[n],l=!(k._module&&k._module===m),p=m&&"function"===typeof m.transform;m||y.warn("Unrecognized transform type "+n+".");m&&m.supplyDefaults&&(l||p)?(k=m.supplyDefaults(k,b,c,a),k.type=n,k._module=m,y.pushUnique(f,m)):k=y.extendFlat({},k);g.push(k)}}}};E.supplyLayoutGlobalDefaults=
function(a,b,d){function e(c,d){return y.coerce(a,b,E.layoutAttributes,c,d)}var f=a.template;y.isPlainObject(f)&&(b.template=f,b._template=f.layout,b._dataTemplate=f.data);f=y.coerceFont(e,"font");e("title.text",b._dfltTitle.plot);y.coerceFont(e,"title.font",{family:f.family,size:Math.round(1.4*f.size),color:f.color});e("title.xref");e("title.yref");e("title.x");e("title.y");e("title.xanchor");e("title.yanchor");e("title.pad.t");e("title.pad.r");e("title.pad.b");e("title.pad.l");e("autosize",!(a.width&&
a.height));e("width");e("height");e("margin.l");e("margin.r");e("margin.t");e("margin.b");e("margin.pad");e("margin.autoexpand");a.width&&a.height&&E.sanitizeMargins(b);c.getComponentMethod("grid","sizeDefaults")(a,b);e("paper_bgcolor");e("separators",d.decimal+d.thousands);e("hidesources");e("colorway");e("datarevision");d=e("uirevision");e("editrevision",d);e("selectionrevision",d);e("modebar.orientation");e("modebar.bgcolor",w.addOpacity(b.paper_bgcolor,.5));f=w.contrast(w.rgb(b.modebar.bgcolor));
e("modebar.color",w.addOpacity(f,.3));e("modebar.activecolor",w.addOpacity(f,.7));e("modebar.uirevision",d);e("meta");y.isPlainObject(a.transition)&&(e("transition.duration"),e("transition.easing"),e("transition.ordering"));c.getComponentMethod("calendars","handleDefaults")(a,b,"calendar");c.getComponentMethod("fx","supplyLayoutGlobalDefaults")(a,b,e)};E.plotAutoSize=function(a,b,c){var d=a._context||{},e=d.frameMargins,f;(f=y.isPlotDiv(a))&&a.emit("plotly_autosize");d.fillFrame?(d=window.innerWidth,
f=window.innerHeight,document.body.style.overflow="hidden"):(f=f?window.getComputedStyle(a):{},d=parseFloat(f.width)||parseFloat(f.maxWidth)||c.width,f=parseFloat(f.height)||parseFloat(f.maxHeight)||c.height,g(e)&&0<e&&(e=1-2*e,d=Math.round(e*d),f=Math.round(e*f)));e=E.layoutAttributes.width.min;var h=E.layoutAttributes.height.min;d<e&&(d=e);f<h&&(f=h);e=!b.width&&1<Math.abs(c.width-d);if((b=!b.height&&1<Math.abs(c.height-f))||e)e&&(c.width=d),b&&(c.height=f);a._initialAutoSize||(a._initialAutoSize=
{width:d,height:f});E.sanitizeMargins(c)};E.supplyLayoutModuleDefaults=function(a,b,d,e){var f=c.componentsRegistry,g=b._basePlotModules,h;var k=c.subplotsRegistry.cartesian;for(h in f){var n=f[h];n.includeBasePlot&&n.includeBasePlot(a,b)}g.length||g.push(k);b._has("cartesian")&&(c.getComponentMethod("grid","contentDefaults")(a,b),k.finalizeSubplots(a,b));for(var m in b._subplots)b._subplots[m].sort(y.subplotSort);for(k=0;k<g.length;k++)n=g[k],n.supplyLayoutDefaults&&n.supplyLayoutDefaults(a,b,d);
g=b._modules;for(k=0;k<g.length;k++)n=g[k],n.supplyLayoutDefaults&&n.supplyLayoutDefaults(a,b,d);g=b._transformModules;for(k=0;k<g.length;k++)n=g[k],n.supplyLayoutDefaults&&n.supplyLayoutDefaults(a,b,d,e);for(h in f)n=f[h],n.supplyLayoutDefaults&&n.supplyLayoutDefaults(a,b,d)};E.purge=function(a){var b=a._fullLayout||{};void 0!==b._glcontainer&&(b._glcontainer.selectAll(".gl-canvas").remove(),b._glcontainer.remove(),b._glcanvas=null);void 0!==b._geocontainer&&b._geocontainer.remove();b._modeBar&&
b._modeBar.destroy();a._transitionData&&(a._transitionData._interruptCallbacks&&(a._transitionData._interruptCallbacks.length=0),a._transitionData._animationRaf&&window.cancelAnimationFrame(a._transitionData._animationRaf));y.clearThrottle();y.clearResponsive(a);delete a.data;delete a.layout;delete a._fullData;delete a._fullLayout;delete a.calcdata;delete a.framework;delete a.empty;delete a.fid;delete a.undoqueue;delete a.undonum;delete a.autoplay;delete a.changed;delete a._promises;delete a._redrawTimer;
delete a._hmlumcount;delete a._hmpixcount;delete a._transitionData;delete a._transitioning;delete a._initialAutoSize;delete a._transitioningWithDuration;delete a._dragging;delete a._dragged;delete a._hoverdata;delete a._snapshotInProgress;delete a._editing;delete a._replotPending;delete a._mouseDownTime;delete a._legendMouseDownTime;a.removeAllListeners&&a.removeAllListeners()};E.style=function(a){var b=a._fullLayout._visibleModules,c=[],d;for(d=0;d<b.length;d++){var e=b[d];e.style&&y.pushUnique(c,
e.style)}for(d=0;d<c.length;d++)c[d](a)};E.sanitizeMargins=function(a){if(a&&a.margin){var b=a.width,c=a.height;a=a.margin;var d=c-(a.t+a.b);0>b-(a.l+a.r)&&(b=(b-1)/(a.l+a.r),a.l=Math.floor(b*a.l),a.r=Math.floor(b*a.r));0>d&&(b=(c-1)/(a.t+a.b),a.t=Math.floor(b*a.t),a.b=Math.floor(b*a.b))}};E.clearAutoMarginIds=function(a){a._fullLayout._pushmarginIds={}};E.allowAutoMargin=function(a,b){a._fullLayout._pushmarginIds[b]=1};E.autoMargin=function(a,b,c){var d=a._fullLayout,e=d._pushmargin,f=d._pushmarginIds;
if(!1!==d.margin.autoexpand){if(c){var g=c.pad;void 0===g&&(g=d.margin,g=Math.min(12,g.l,g.r,g.t,g.b));c.l+c.r>.5*d.width&&(c.l=c.r=0);c.b+c.t>.5*d.height&&(c.b=c.t=0);e[b]={l:{val:void 0!==c.xl?c.xl:c.x,size:c.l+g},r:{val:void 0!==c.xr?c.xr:c.x,size:c.r+g},b:{val:void 0!==c.yb?c.yb:c.y,size:c.b+g},t:{val:void 0!==c.yt?c.yt:c.y,size:c.t+g}};f[b]=1}else delete e[b],delete f[b];d._replotting||E.doAutoMargin(a)}};E.doAutoMargin=function(a){var d=a._fullLayout;d._size||(d._size={});b(d);var e=d._size,
f=JSON.stringify(e),h=d.margin,k=h.l,n=h.r,m=h.t,l=h.b,p=d.width,t=d.height,r=d._pushmargin,q=d._pushmarginIds;if(!1!==d.margin.autoexpand){for(var v in r)q[v]||delete r[v];r.base={l:{val:0,size:k},r:{val:1,size:n},t:{val:1,size:m},b:{val:0,size:l}};for(var u in r){v=r[u].l||{};var y=r[u].b||{};q=v.val;v=v.size;var w=y.val;y=y.size;for(var A in r){if(g(v)&&r[A].r){var B=r[A].r.val,x=r[A].r.size;if(B>q){var D=(v*B+(x-p)*q)/(B-q);B=(x*(1-q)+(v-p)*(1-B))/(B-q);0<=D&&0<=B&&0<p-(D+B)&&D+B>k+n&&(k=D,n=
B)}}g(y)&&r[A].t&&(B=r[A].t.val,x=r[A].t.size,B>w&&(D=(y*B+(x-t)*w)/(B-w),B=(x*(1-w)+(y-t)*(1-B))/(B-w),0<=D&&0<=B&&0<t-(B+D)&&D+B>l+m&&(l=D,m=B)))}}}e.l=Math.round(k);e.r=Math.round(n);e.t=Math.round(m);e.b=Math.round(l);e.p=Math.round(h.pad);e.w=Math.round(p)-e.l-e.r;e.h=Math.round(t)-e.t-e.b;if(!d._replotting&&"{}"!==f&&f!==JSON.stringify(d._size))return"_redrawFromAutoMarginCount"in d?d._redrawFromAutoMarginCount++:d._redrawFromAutoMarginCount=1,c.call("plot",a)};E.graphJson=function(a,b,c,d,
e){function f(a){if("function"===typeof a)return null;if(y.isPlainObject(a)){var b={},d;for(d in a)if("function"!==typeof a[d]&&-1===["_","["].indexOf(d.charAt(0))){if("keepdata"===c){if("src"===d.substr(d.length-3))continue}else if("keepstream"===c){var e=a[d+"src"];if("string"===typeof e&&0<e.indexOf(":")&&!y.isPlainObject(a.stream))continue}else if("keepall"!==c&&(e=a[d+"src"],"string"===typeof e&&0<e.indexOf(":")))continue;b[d]=f(a[d])}return b}return Array.isArray(a)?a.map(f):y.isTypedArray(a)?
y.simpleMap(a,y.identity):y.isJSDate(a)?y.ms2DateTimeLocal(+a):a}(e&&b&&!a._fullData||e&&!b&&!a._fullLayout)&&E.supplyDefaults(a);var g=e?a._fullLayout:a.layout,h=(a._transitionData||{})._frames;e={data:((e?a._fullData:a.data)||[]).map(function(a){a=f(a);b&&delete a.fit;return a})};b||(e.layout=f(g));a.framework&&a.framework.isPolar&&(e=a.framework.getConfig());h&&(e.frames=f(h));return"object"===d?e:JSON.stringify(e)};E.modifyFrames=function(a,b){var c=a._transitionData._frames,d=a._transitionData._frameHash;
for(a=0;a<b.length;a++){var e=b[a];switch(e.type){case "replace":var f=e.value;var g=(c[e.index]||{}).name,h=f.name;c[e.index]=d[h]=f;h!==g&&(delete d[g],d[h]=f);break;case "insert":f=e.value;d[f.name]=f;c.splice(e.index,0,f);break;case "delete":f=c[e.index],delete d[f.name],c.splice(e.index,1)}}return Promise.resolve()};E.computeFrame=function(a,b){var c=a._transitionData._frameHash,d;if(!b)throw Error("computeFrame must be given a string frame name");b=c[b.toString()];if(!b)return!1;a=[b];for(d=
[b.name];b.baseframe&&(b=c[b.baseframe.toString()])&&-1===d.indexOf(b.name);)a.push(b),d.push(b.name);for(var e={};b=a.pop();)if(b.layout&&(e.layout=E.extendLayout(e.layout,b.layout)),b.data){e.data||(e.data=[]);d=b.traces;if(!d)for(d=[],c=0;c<b.data.length;c++)d[c]=c;e.traces||(e.traces=[]);for(c=0;c<b.data.length;c++){var f=d[c];if(void 0!==f&&null!==f){var g=e.traces.indexOf(f);-1===g&&(g=e.data.length,e.traces[g]=f);e.data[g]=E.extendTrace(e.data[g],b.data[c])}}}return e};E.recomputeFrameHash=
function(a){var b=a._transitionData._frameHash={};a=a._transitionData._frames;for(var c=0;c<a.length;c++){var d=a[c];d&&d.name&&(b[d.name]=d)}};E.extendObjectWithContainers=function(a,b,c){b=y.extendDeepNoArrays({},b||{});var d=y.expandObjectPaths(b);var e={};if(c&&c.length)for(b=0;b<c.length;b++){var f=y.nestedProperty(d,c[b]);var g=f.get();void 0===g?y.nestedProperty(e,c[b]).set(null):(f.set(null),y.nestedProperty(e,c[b]).set(g))}a=y.extendDeepNoArrays(a||{},d);if(c&&c.length)for(b=0;b<c.length;b++)if(f=
y.nestedProperty(e,c[b]),d=f.get()){g=y.nestedProperty(a,c[b]);var h=g.get();Array.isArray(h)||(h=[],g.set(h));for(f=0;f<d.length;f++){var k=d[f];h[f]=null===k?null:E.extendObjectWithContainers(h[f],k)}g.set(h)}return a};E.dataArrayContainers=["transforms","dimensions"];E.layoutArrayContainers=c.layoutArrayContainers;E.extendTrace=function(a,b){return E.extendObjectWithContainers(a,b,E.dataArrayContainers)};E.extendLayout=function(a,b){return E.extendObjectWithContainers(a,b,E.layoutArrayContainers)};
E.transition=function(a,b,c,d,e,f){e={redraw:e.redraw};var g=[],h=[];e.prepareFn=function(){var e=Array.isArray(b)?b.length:0;e=d.slice(0,e);for(var f=0;f<e.length;f++){var k=e[f],n=a._fullData[k]._module;n&&(n.animatable&&g.push(k),a.data[e[f]]=E.extendTrace(a.data[e[f]],b[f]))}e=y.expandObjectPaths(y.extendDeepNoArrays({},c));f=/^[xy]axis[0-9]*$/;for(var m in e)f.test(m)&&delete e[m].range;E.extendLayout(a.layout,e);delete a.calcdata;E.supplyDefaults(a);E.doCalcdata(a);if(m=y.expandObjectPaths(c)){e=
a._fullLayout._plots;for(var l in e){f=e[l];k=f.xaxis;n=f.yaxis;var p=k.range.slice(),t=n.range.slice(),r;Array.isArray(m[k._name+".range"])?r=m[k._name+".range"].slice():Array.isArray((m[k._name]||{}).range)&&(r=m[k._name].range.slice());var q;Array.isArray(m[n._name+".range"])?q=m[n._name+".range"].slice():Array.isArray((m[n._name]||{}).range)&&(q=m[n._name].range.slice());var v;p&&r&&(p[0]!==r[0]||p[1]!==r[1])&&(v={xr0:p,xr1:r});var u;t&&q&&(t[0]!==q[0]||t[1]!==q[1])&&(u={yr0:t,yr1:q});(v||u)&&
h.push(y.extendFlat({plotinfo:f},v,u))}}return Promise.resolve()};e.runFn=function(b){var d=a._fullLayout._basePlotModules;var e=h.length;var k;if(c)for(k=0;k<d.length;k++)d[k].transitionAxes&&d[k].transitionAxes(a,h,f,b);e?(e=y.extendFlat({},f),e.duration=0,g=null):e=f;for(k=0;k<d.length;k++)d[k].plot(a,g,e,b)};return n(a,f,e)};E.transitionFromReact=function(a,b,c,d){var e=a._fullLayout,f=e.transition,g={},h=[];g.prepareFn=function(){var a=e._plots;g.redraw=!1;"some"===b.anim&&(g.redraw=!0);"some"===
c.anim&&(g.redraw=!0);for(var f in a){var k=a[f],n=k.xaxis,m=k.yaxis,l=d[n._name].range.slice(),p=d[m._name].range.slice(),t=n.range.slice(),r=m.range.slice();n.setScale();m.setScale();if(l[0]!==t[0]||l[1]!==t[1])var q={xr0:l,xr1:t};if(p[0]!==r[0]||p[1]!==r[1])var v={yr0:p,yr1:r};(q||v)&&h.push(y.extendFlat({plotinfo:k},q,v))}return Promise.resolve()};g.runFn=function(c){function d(){for(var b=0;b<k.length;b++)k[b].transitionAxes&&k[b].transitionAxes(a,h,n,c)}function e(){for(var b=0;b<k.length;b++)k[b].plot(a,
l,m,c)}for(var g=a._fullData,k=a._fullLayout._basePlotModules,n,m,l,p=[],t=0;t<g.length;t++)p.push(t);h.length&&b.anim?"traces first"===f.ordering?(n=y.extendFlat({},f,{duration:0}),l=p,m=f,e(),setTimeout(d,f.duration)):(n=f,l=null,m=y.extendFlat({},f,{duration:0}),d(),e()):h.length?(n=f,d()):b.anim&&(l=p,m=f,e())};return n(a,f,g)};E.doCalcdata=function(a,b){function d(b,c){p=f[b];h=p._module;if(!!h.isContainer===c){c=[];if(!0===p.visible){delete p._indexToPoints;var d=p.transforms||[];for(n=d.length-
1;0<=n;n--)if(d[n].enabled){p._indexToPoints=d[n]._indexToPoints;break}h&&h.calc&&(c=h.calc(a,p))}Array.isArray(c)&&c[0]||(c=[{x:x,y:x}]);c[0].t||(c[0].t={});c[0].trace=p;m[b]=c}}var e=G.list(a),f=a._fullData,g=a._fullLayout,h,k,n,m=Array(f.length),l=(a.calcdata||[]).slice(0);a.calcdata=m;g._numBoxes=0;g._numViolins=0;g._violinScaleGroupStats={};a._hmpixcount=0;a._hmlumcount=0;g._piecolormap={};g._sunburstcolormap={};for(k=0;k<f.length;k++)Array.isArray(b)&&-1===b.indexOf(k)&&(m[k]=l[k]);for(k=0;k<
f.length;k++){var p=f[k];p._arrayAttrs=v.findArrayAttributes(p);p._extremes={}}b=g._subplots.polar||[];for(k=0;k<b.length;k++)e.push(g[b[k]].radialaxis,g[b[k]].angularaxis);q(e,f);g=!1;for(k=0;k<f.length;k++)if(p=f[k],!0===p.visible&&p.transforms)for((h=p._module)&&h.calc&&(b=h.calc(a,p),b[0]&&b[0].t&&b[0].t._scene&&delete b[0].t._scene.dirty),n=0;n<p.transforms.length;n++)b=p.transforms[n],(h=H[b.type])&&h.calcTransform&&(g=p._hasCalcTransform=!0,h.calcTransform(a,p,b));g&&q(e,f);for(k=0;k<f.length;k++)d(k,
!0);for(k=0;k<f.length;k++)d(k,!1);r(a);c.getComponentMethod("fx","calc")(a);c.getComponentMethod("errorbars","calc")(a)};E.rehover=function(a){a._fullLayout._rehover&&a._fullLayout._rehover()};E.generalUpdatePerTraceModule=function(a,b,c,d){var e=b.traceHash,f={},g;for(g=0;g<c.length;g++){var h=c[g],k=h[0].trace;k.visible&&(f[k.type]=f[k.type]||[],f[k.type].push(h))}for(var n in e)f[n]||(c=e[n][0],c[0].trace.visible=!1,f[n]=[c]);for(var m in f)e=f[m],e[0][0].trace._module.plot(a,b,y.filterVisible(e),
d);b.traceHash=f}},{"../components/color":577,"../constants/numerical":677,"../lib":700,"../plot_api/plot_schema":737,"../plot_api/plot_template":738,"../plots/cartesian/axis_ids":751,"../registry":829,"./animation_attributes":743,"./attributes":745,"./command":772,"./font_attributes":774,"./frame_attributes":775,"./layout_attributes":801,d3:154,"fast-isnumeric":221}],811:[function(a,p,l){p.exports={attr:"subplot",name:"polar",axisNames:["angularaxis","radialaxis"],axisName2dataArray:{angularaxis:"theta",
radialaxis:"r"},layerNames:"draglayer plotbg backplot angular-grid radial-grid frontplot angular-line radial-line angular-axis radial-axis".split(" "),radialDragBoxSize:50,angularDragBoxSize:30,cornerLen:25,cornerHalfWidth:2,MINDRAG:8,MINZOOM:20,OFFEDGE:20}},{}],812:[function(a,p,l){function m(a,b,d,f){var c=f[0];f=f[1];var g=e(Math.sin(b)-Math.sin(a));a=e(Math.cos(b)-Math.cos(a));d=Math.tan(d);var h=e(1/d),k=g/a;b=f-k*c;h?g&&a?(g=b/(d-k),c=d*g):a?(g=f*h,c=f):(g=c,c*=d):g&&a?(g=0,c=b):a?(g=0,c=f):
g=c=NaN;return[g,c]}function k(a,d,e,f){function c(b,c,d){return m(b,c,d,[a*Math.cos(b),a*Math.sin(b)])}var h=f.length,k=[];var n=q(f,function(a){return r(a,[d,e])?g(a,d):Infinity});var l=c(f[n],f[b.mod(n-1,h)],d);k.push(l);for(l=0;l<h;n++,l++){var p=f[b.mod(n,h)];if(!r(p,[d,e]))break;k.push([a*Math.cos(p),a*Math.sin(p)])}n=q(f,function(a){return r(a,[d,e])?g(a,e):Infinity});f=c(f[n],f[b.mod(n+1,h)],e);k.push(f);k.push([0,0]);k.push(k[0].slice());return k}function h(a,d,e,f){if(b.isFullCircle([d,
e])){d=f.length;e=Array(d+1);var c;for(c=0;c<d;c++){var g=f[c];e[c]=[a*Math.cos(g),a*Math.sin(g)]}e[c]=e[0].slice();a=e}else a=k(a,d,e,f);return a}function e(a){return 1E-10<Math.abs(a)?a:0}function f(a,b,d){b=b||0;d=d||0;for(var c=a.length,e=Array(c),f=0;f<c;f++){var g=a[f];e[f]=[b+g[0],d-g[1]]}return e}var b=a("../../lib"),n=a("../../lib/polygon").tester,q=b.findIndexOfMin,r=b.isAngleInsideSector,d=b.angleDelta,g=b.angleDist;p.exports={isPtInsidePolygon:function(a,b,d,e,f){if(!r(b,e))return!1;if(d[0]<
d[1]){var c=d[0];d=d[1]}else c=d[1],d=d[0];c=n(h(c,e[0],e[1],f));e=n(h(d,e[0],e[1],f));a=[a*Math.cos(b),a*Math.sin(b)];return e.contains(a)&&!c.contains(a)},findPolygonOffset:function(a,b,d,e){var c=Infinity,f=Infinity;a=h(a,b,d,e);for(b=0;b<a.length;b++)d=a[b],c=Math.min(c,d[0]),f=Math.min(f,-d[1]);return[c,f]},findEnclosingVertexAngles:function(a,e){var c=q(e,function(b){b=d(b,a);return 0<b?b:Infinity}),f=b.mod(c+1,e.length);return[e[c],e[f]]},findIntersectionXY:m,findXYatLength:function(a,b,d,
e){var c=-b*d,f=b*b+1,g=2*(b*c-d);d=Math.sqrt(g*g-4*f*(c*c+d*d-a*a));a=(-g+d)/(2*f);f=(-g-d)/(2*f);return[[a,b*a+c+e],[f,b*f+c+e]]},clampTiny:e,pathPolygon:function(a,b,d,e,g,k){a=h(a,b,d,e);return"M"+f(a,g,k).join("L")},pathPolygonAnnulus:function(a,b,d,e,g,k,n){if(a<b){var c=a;a=b}else c=b;c=f(h(c,d,e,g),k,n);return"M"+f(h(a,d,e,g),k,n).reverse().join("L")+"M"+c.join("L")}}},{"../../lib":700,"../../lib/polygon":712}],813:[function(a,p,l){var m=a("../get_data").getSubplotCalcData,k=a("../../lib").counterRegex,
h=a("./polar"),e=a("./constants");l=e.attr;var f=e.name;k=k(f);e={};e[l]={valType:"subplotid",dflt:f,editType:"calc"};p.exports={attr:l,name:f,idRoot:f,idRegex:k,attrRegex:k,attributes:e,layoutAttributes:a("./layout_attributes"),supplyLayoutDefaults:a("./layout_defaults"),plot:function(a){for(var b=a._fullLayout,e=a.calcdata,k=b._subplots[f],d=0;d<k.length;d++){var g=k[d],c=m(e,f,g),l=b[g]._subplot;l||(l=h(a,g),b[g]._subplot=l);l.plot(c,b,a._promises)}},clean:function(a,e,h,k){a=k._subplots[f]||[];
h=k._has&&k._has("gl");var b=e._has&&e._has("gl");h=h&&!b;for(b=0;b<a.length;b++){var g=a[b],c=k[g]._subplot;if(!e[g]&&c){c.framework.remove();c.layers["radial-axis-title"].remove();for(var n in c.clipPaths)c.clipPaths[n].remove()}h&&c._scene&&(c._scene.destroy(),c._scene=null)}},toSVG:a("../cartesian").toSVG}},{"../../lib":700,"../cartesian":759,"../get_data":784,"./constants":811,"./layout_attributes":814,"./layout_defaults":815,"./polar":822}],814:[function(a,p,l){l=a("../../components/color/attributes");
var m=a("../cartesian/layout_attributes"),k=a("../domain").attributes,h=a("../../lib").extendFlat,e=a("../../plot_api/edit_types").overrideAll;a=e({color:m.color,showline:h({},m.showline,{dflt:!0}),linecolor:m.linecolor,linewidth:m.linewidth,showgrid:h({},m.showgrid,{dflt:!0}),gridcolor:m.gridcolor,gridwidth:m.gridwidth},"plot","from-root");var f=e({tickmode:m.tickmode,nticks:m.nticks,tick0:m.tick0,dtick:m.dtick,tickvals:m.tickvals,ticktext:m.ticktext,ticks:m.ticks,ticklen:m.ticklen,tickwidth:m.tickwidth,
tickcolor:m.tickcolor,showticklabels:m.showticklabels,showtickprefix:m.showtickprefix,tickprefix:m.tickprefix,showticksuffix:m.showticksuffix,ticksuffix:m.ticksuffix,showexponent:m.showexponent,exponentformat:m.exponentformat,separatethousands:m.separatethousands,tickfont:m.tickfont,tickangle:m.tickangle,tickformat:m.tickformat,tickformatstops:m.tickformatstops,layer:m.layer},"plot","from-root");e={visible:h({},m.visible,{dflt:!0}),type:h({},m.type,{values:["-","linear","log","date","category"]}),
autorange:h({},m.autorange,{editType:"plot"}),rangemode:{valType:"enumerated",values:["tozero","nonnegative","normal"],dflt:"tozero",editType:"calc"},range:h({},m.range,{items:[{valType:"any",editType:"plot",impliedEdits:{"^autorange":!1}},{valType:"any",editType:"plot",impliedEdits:{"^autorange":!1}}],editType:"plot"}),categoryorder:m.categoryorder,categoryarray:m.categoryarray,angle:{valType:"angle",editType:"plot"},side:{valType:"enumerated",values:["clockwise","counterclockwise"],dflt:"clockwise",
editType:"plot"},title:e(m.title,"plot","from-root"),hoverformat:m.hoverformat,uirevision:{valType:"any",editType:"none"},editType:"calc",_deprecated:{title:m._deprecated.title,titlefont:m._deprecated.titlefont}};e.title.text.dflt="";h(e,a,f);m={visible:h({},m.visible,{dflt:!0}),type:{valType:"enumerated",values:["-","linear","category"],dflt:"-",editType:"calc",_noTemplating:!0},categoryorder:m.categoryorder,categoryarray:m.categoryarray,thetaunit:{valType:"enumerated",values:["radians","degrees"],
dflt:"degrees",editType:"calc"},period:{valType:"number",editType:"calc",min:0},direction:{valType:"enumerated",values:["counterclockwise","clockwise"],dflt:"counterclockwise",editType:"calc"},rotation:{valType:"angle",editType:"calc"},hoverformat:m.hoverformat,uirevision:{valType:"any",editType:"none"},editType:"calc"};h(m,a,f);p.exports={domain:k({name:"polar",editType:"plot"}),sector:{valType:"info_array",items:[{valType:"number",editType:"plot"},{valType:"number",editType:"plot"}],dflt:[0,360],
editType:"plot"},hole:{valType:"number",min:0,max:1,dflt:0,editType:"plot"},bgcolor:{valType:"color",editType:"plot",dflt:l.background},radialaxis:e,angularaxis:m,gridshape:{valType:"enumerated",values:["circular","linear"],dflt:"circular",editType:"plot"},uirevision:{valType:"any",editType:"none"},editType:"calc"}},{"../../components/color/attributes":576,"../../lib":700,"../../plot_api/edit_types":731,"../cartesian/layout_attributes":760,"../domain":773}],815:[function(a,p,l){function m(a,b,m,l){function p(a,
b){return m(B+"."+a,b)}var v=m("bgcolor");l.bgColor=e.combine(v,l.paper_bgcolor);v=m("sector");m("hole");for(var u=n(l.fullData,w.name,l.id),A=l.layoutOut,B,D=0;D<x.length;D++){B=x[D];h.isPlainObject(a[B])||(a[B]={});var C=a[B],G=f.newContainer(b,B);G._id=G._name=B;G._attr=l.id+"."+B;G._traceIndices=u.map(function(a){return a._expandedIndex});var L=w.axisName2dataArray[B],P=k(C,G,p,u,L);g(C,G,p,{axData:u,dataAttr:L});L=p("visible");y(G,b,A);p("uirevision",b.uirevision);if(L){var z=p("color");var F=
z===C.color?z:l.font.color}G._m=1;switch(B){case "radialaxis":var T=p("autorange",!G.isValidRange(C.range));C.autorange=T;!T||"linear"!==P&&"-"!==P||p("rangemode");"reversed"===T&&(G._m=-1);p("range");G.cleanRange("range",{dfltRange:[0,1]});L&&(p("side"),p("angle",v[0]),p("title.text"),h.coerceFont(p,"title.font",{family:l.font.family,size:Math.round(1.2*l.font.size),color:F}));break;case "angularaxis":if("date"===P){h.log("Polar plots do not support date angular axes yet.");for(P=0;P<u.length;P++)u[P].visible=
!1;P=C.type=G.type="linear"}"linear"===P?p("thetaunit"):p("period");T=p("direction");p("rotation",{counterclockwise:0,clockwise:90}[T])}L&&(q(C,G,p,G.type),d(C,G,p,G.type,{tickSuffixDflt:"degrees"===G.thetaunit?"°":void 0}),r(C,G,p,{outerTicks:!0}),p("showticklabels")&&(h.coerceFont(p,"tickfont",{family:l.font.family,size:l.font.size,color:F}),p("tickangle"),p("tickformat")),c(C,G,p,{dfltColor:z,bgColor:l.bgColor,blend:60,showLine:!0,showGrid:!0,noZeroLine:!0,attributes:t[B]}),p("layer"));"category"!==
P&&p("hoverformat");G._input=C}"category"===b.angularaxis.type&&m("gridshape")}function k(a,b,c,d,e){if("-"===c("type")){for(c=0;c<d.length;c++)if(d[c].visible){var f=d[c];break}f&&f[e]&&(b.type=v(f[e],"gregorian"));"-"===b.type?b.type="linear":a.type=b.type}return b.type}var h=a("../../lib"),e=a("../../components/color"),f=a("../../plot_api/plot_template"),b=a("../subplot_defaults"),n=a("../get_data").getSubplotData,q=a("../cartesian/tick_value_defaults"),r=a("../cartesian/tick_mark_defaults"),d=
a("../cartesian/tick_label_defaults"),g=a("../cartesian/category_order_defaults"),c=a("../cartesian/line_grid_defaults"),v=a("../cartesian/axis_autotype"),t=a("./layout_attributes"),y=a("./set_convert"),w=a("./constants"),x=w.axisNames;p.exports=function(a,c,d){b(a,c,d,{type:w.name,attributes:t,handleDefaults:m,font:c.font,paper_bgcolor:c.paper_bgcolor,fullData:d,layoutOut:c})}},{"../../components/color":577,"../../lib":700,"../../plot_api/plot_template":738,"../cartesian/axis_autotype":749,"../cartesian/category_order_defaults":752,
"../cartesian/line_grid_defaults":762,"../cartesian/tick_label_defaults":767,"../cartesian/tick_mark_defaults":768,"../cartesian/tick_value_defaults":769,"../get_data":784,"../subplot_defaults":824,"./constants":811,"./layout_attributes":814,"./set_convert":823}],816:[function(a,p,l){l=a("../../../traces/scatter/attributes");var m=l.marker;a=a("../../../lib/extend").extendFlat;p.exports={r:a({},l.r,{}),t:a({},l.t,{}),marker:{color:a({},m.color,{}),size:a({},m.size,{}),symbol:a({},m.symbol,{}),opacity:a({},
m.opacity,{}),editType:"calc"}}},{"../../../lib/extend":690,"../../../traces/scatter/attributes":1051}],817:[function(a,p,l){function m(a,e){return k({},e,{showline:{valType:"boolean"},showticklabels:{valType:"boolean"},tickorientation:{valType:"enumerated",values:["horizontal","vertical"]},ticklen:{valType:"number",min:0},tickcolor:{valType:"color"},ticksuffix:{valType:"string"},endpadding:{valType:"number",description:"Legacy polar charts are deprecated! Please switch to *polar* subplots."},visible:{valType:"boolean"}})}
l=a("../../cartesian/layout_attributes");var k=a("../../../lib/extend").extendFlat;a=a("../../../plot_api/edit_types").overrideAll;l=k({},l.domain,{});p.exports=a({radialaxis:m("radial",{range:{valType:"info_array",items:[{valType:"number"},{valType:"number"}]},domain:l,orientation:{valType:"number"}}),angularaxis:m("angular",{range:{valType:"info_array",items:[{valType:"number",dflt:0},{valType:"number",dflt:360}]},domain:l}),layout:{direction:{valType:"enumerated",values:["clockwise","counterclockwise"]},
orientation:{valType:"angle"}}},"plot","nested")},{"../../../lib/extend":690,"../../../plot_api/edit_types":731,"../../cartesian/layout_attributes":760}],818:[function(a,p,l){(p.exports=a("./micropolar")).manager=a("./micropolar_manager")},{"./micropolar":819,"./micropolar_manager":820}],819:[function(a,p,l){var m=a("d3"),k=a("../../../lib").extendDeepAll,h=a("../../../constants/alignment").MID_SHIFT,e=p.exports={version:"0.2.2"};e.Axis=function(){function a(a){d=a||d;a=b.data;var f=b.layout;if("string"==
typeof d||d.nodeName)d=m.select(d);d.datum(a).each(function(a,b){a=a.slice();l={data:e.util.cloneJson(a),layout:e.util.cloneJson(f)};var d=0;a.forEach(function(a,b){a.color||(a.color=f.defaultColorRange[d],d=(d+1)%f.defaultColorRange.length);a.strokeColor||(a.strokeColor="LinePlot"===a.geometry?a.color:m.rgb(a.color).darker().toString());l.data[b].color=a.color;l.data[b].strokeColor=a.strokeColor;l.data[b].strokeDash=a.strokeDash;l.data[b].strokeSize=a.strokeSize});a=a.filter(function(a,b){a=a.visible;
return"undefined"===typeof a||!0===a});var g=!1;b=a.map(function(a,b){g=g||"undefined"!==typeof a.groupId;return a});if(g){var n=[];a=m.nest().key(function(a,b){return"undefined"!=typeof a.groupId?a.groupId:"unstacked"}).entries(b).map(function(a,b){if("unstacked"!==a.key){var c=a.values[0].r.map(function(a,b){return 0});a.values.forEach(function(a,b,d){a.yStack=[c];n.push(c);c=e.util.sumArrays(a.r,c)})}return a.values});a=m.merge(a)}a.forEach(function(a,b){a.t=Array.isArray(a.t[0])?a.t:[a.t];a.r=
Array.isArray(a.r[0])?a.r:[a.r]});var t=Math.min(f.width-f.margin.left-f.margin.right,f.height-f.margin.top-f.margin.bottom)/2;t=Math.max(10,t);var r=[f.margin.left+t,f.margin.top+t];b=g?[0,m.max(e.util.sumArrays(e.util.arrayLast(a).r[0],e.util.arrayLast(n)))]:m.extent(e.util.flattenArray(a.map(function(a,b){return a.r})));f.radialAxis.domain!=e.DATAEXTENT&&(b[0]=0);c=m.scale.linear().domain(f.radialAxis.domain!=e.DATAEXTENT&&f.radialAxis.domain?f.radialAxis.domain:b).range([0,t]);l.layout.radialAxis.domain=
c.domain();var v=e.util.flattenArray(a.map(function(a,b){return a.t})),u="string"===typeof v[0];if(u){v=e.util.deduplicate(v);var y=v.slice();v=m.range(v.length);a=a.map(function(a,b){a.t=[v];g&&(a.yStack=a.yStack);return a})}var w=a.filter(function(a,b){return"LinePlot"===a.geometry||"DotPlot"===a.geometry}).length===a.length;b=null===f.needsEndSpacing?u||!w:f.needsEndSpacing;var x=f.angularAxis.domain&&f.angularAxis.domain!=e.DATAEXTENT&&!u&&0<=f.angularAxis.domain[0]?f.angularAxis.domain:m.extent(v),
B=Math.abs(v[1]-v[0]);w&&!u&&(B=0);x=x.slice();b&&u&&(x[1]+=B);w=f.angularAxis.ticksCount||4;8<w&&(w=w/(w/8)+w%8);f.angularAxis.ticksStep&&(w=(x[1]-x[0])/w);w=f.angularAxis.ticksStep||(x[1]-x[0])/(w*(f.minorTicks+1));y&&(w=Math.max(Math.round(w),1));x[2]||(x[2]=w);w=m.range.apply(this,x);w=w.map(function(a,b){return parseFloat(a.toPrecision(12))});q=m.scale.linear().domain(x.slice(0,2)).range("clockwise"===f.direction?[0,360]:[360,0]);l.layout.angularAxis.domain=q.domain();l.layout.angularAxis.endPadding=
b?B:0;p=m.select(this).select("svg.chart-root");if("undefined"===typeof p||p.empty())b=(new DOMParser).parseFromString("\x3csvg xmlns\x3d'http://www.w3.org/2000/svg' class\x3d'chart-root'\x3e' + '\x3cg class\x3d'outer-group'\x3e' + '\x3cg class\x3d'chart-group'\x3e' + '\x3ccircle class\x3d'background-circle'\x3e\x3c/circle\x3e' + '\x3cg class\x3d'geometry-group'\x3e\x3c/g\x3e' + '\x3cg class\x3d'radial axis-group'\x3e' + '\x3ccircle class\x3d'outside-circle'\x3e\x3c/circle\x3e' + '\x3c/g\x3e' + '\x3cg class\x3d'angular axis-group'\x3e\x3c/g\x3e' + '\x3cg class\x3d'guides-group'\x3e\x3cline\x3e\x3c/line\x3e\x3ccircle r\x3d'0'\x3e\x3c/circle\x3e\x3c/g\x3e' + '\x3c/g\x3e' + '\x3cg class\x3d'legend-group'\x3e\x3c/g\x3e' + '\x3cg class\x3d'tooltips-group'\x3e\x3c/g\x3e' + '\x3cg class\x3d'title-group'\x3e\x3ctext\x3e\x3c/text\x3e\x3c/g\x3e' + '\x3c/g\x3e' + '\x3c/svg\x3e",
"application/xml"),b=this.appendChild(this.ownerDocument.importNode(b.documentElement,!0)),p=m.select(b);p.select(".guides-group").style({"pointer-events":"none"});p.select(".angular.axis-group").style({"pointer-events":"none"});p.select(".radial.axis-group").style({"pointer-events":"none"});b=p.select(".chart-group");x={fill:"none",stroke:f.tickColor};var D={"font-size":f.font.size,"font-family":f.font.family,fill:f.font.color,"text-shadow":["-1px 0px","1px -1px","-1px 1px","1px 1px"].map(function(a,
b){return" "+a+" 0 "+f.font.outlineColor}).join(",")};if(f.showLegend){B=p.select(".legend-group").attr({transform:"translate("+[t,f.margin.top]+")"}).style({display:"block"});var G=a.map(function(a,b){b=e.util.cloneJson(a);b.symbol="DotPlot"===a.geometry?a.dotType||"circle":"LinePlot"!=a.geometry?"square":"line";b.visibleInLegend="undefined"===typeof a.visibleInLegend||a.visibleInLegend;b.color="LinePlot"===a.geometry?a.strokeColor:a.color;return b});e.Legend().config({data:a.map(function(a,b){return a.name||
"Element"+b}),legendConfig:k({},e.Legend.defaultConfig().legendConfig,{container:B,elements:G,reverseOrder:f.legend.reverseOrder})})();G=B.node().getBBox();t=Math.min(f.width-G.width-f.margin.left-f.margin.right,f.height-f.margin.top-f.margin.bottom)/2;t=Math.max(10,t);r=[f.margin.left+t,f.margin.top+t];c.range([0,t]);l.layout.radialAxis.domain=c.domain();B.attr("transform","translate("+[r[0]+t,r[1]-t]+")")}else B=p.select(".legend-group").style({display:"none"});p.attr({width:f.width,height:f.height}).style({opacity:f.opacity});
b.attr("transform","translate("+r+")").style({cursor:"crosshair"});var z=[(f.width-(f.margin.left+f.margin.right+2*t+(G?G.width:0)))/2,(f.height-(f.margin.top+f.margin.bottom+2*t))/2];z[0]=Math.max(0,z[0]);z[1]=Math.max(0,z[1]);p.select(".outer-group").attr("transform","translate("+z+")");if(f.title&&f.title.text){G=p.select("g.title-group text").style(D).text(f.title.text);var F=G.node().getBBox();G.attr({x:r[0]-F.width/2,y:r[1]-t-20})}G=p.select(".radial.axis-group");f.radialAxis.gridLinesVisible&&
(F=G.selectAll("circle.grid-circle").data(c.ticks(5)),F.enter().append("circle").attr({"class":"grid-circle"}).style(x),F.attr("r",c),F.exit().remove());G.select("circle.outside-circle").attr({r:t}).style(x);var T=p.select("circle.background-circle").attr({r:t}).style({fill:f.backgroundColor,stroke:f.stroke});f.radialAxis.visible&&(F=m.svg.axis().scale(c).ticks(5).tickSize(5),G.call(F).attr({transform:"rotate("+f.radialAxis.orientation+")"}),G.selectAll(".domain").style(x),G.selectAll("g\x3etext").text(function(a,
b){return this.textContent+f.radialAxis.ticksSuffix}).style(D).style({"text-anchor":"start"}).attr({x:0,y:0,dx:0,dy:0,transform:function(a,b){return"horizontal"===f.radialAxis.tickOrientation?"rotate("+-f.radialAxis.orientation+") translate("+[0,D["font-size"]]+")":"translate("+[0,D["font-size"]]+")"}}),G.selectAll("g\x3eline").style({stroke:"black"}));G=p.select(".angular.axis-group").selectAll("g.angular-tick").data(w);w=G.enter().append("g").classed("angular-tick",!0);G.attr({transform:function(a,
b){return"rotate("+(q(a)%360+f.orientation)+")"}}).style({display:f.angularAxis.visible?"block":"none"});G.exit().remove();w.append("line").classed("grid-line",!0).classed("major",function(a,b){return 0==b%(f.minorTicks+1)}).classed("minor",function(a,b){return 0!=b%(f.minorTicks+1)}).style(x);w.selectAll(".minor").style({stroke:f.minorTickColor});G.select("line.grid-line").attr({x1:f.tickLength?t-f.tickLength:0,x2:t}).style({display:f.angularAxis.gridLinesVisible?"block":"none"});w.append("text").classed("axis-text",
!0).style(D);G=G.select("text.axis-text").attr({x:t+f.labelOffset,dy:h+"em",transform:function(a,b){a=q(a)%360+f.orientation;b=t+f.labelOffset;var c=f.angularAxis.tickOrientation;return"horizontal"==c?"rotate("+-a+" "+b+" 0)":"radial"==c?270>a&&90<a?"rotate(180 "+b+" 0)":null:"rotate("+(180>=a&&0<a?-90:90)+" "+b+" 0)"}}).style({"text-anchor":"middle",display:f.angularAxis.labelsVisible?"block":"none"}).text(function(a,b){return 0!=b%(f.minorTicks+1)?"":y?y[a]+f.angularAxis.ticksSuffix:a+f.angularAxis.ticksSuffix}).style(D);
f.angularAxis.rewriteTicks&&G.text(function(a,b){return 0!=b%(f.minorTicks+1)?"":f.angularAxis.rewriteTicks(this.textContent,b)});G=m.max(b.selectAll(".angular-tick text")[0].map(function(a,b){return a.getCTM().e+a.getBBox().width}));B.attr({transform:"translate("+[t+G,f.margin.top]+")"});G=0<p.select("g.geometry-group").selectAll("g").size();var K=p.select("g.geometry-group").selectAll("g.geometry").data(a);K.enter().append("g").attr({"class":function(a,b){return"geometry geometry"+b}});K.exit().remove();
if(a[0]||G){var ia=[];a.forEach(function(a,b){var d={};d.radialScale=c;d.angularScale=q;d.container=K.filter(function(a,c){return c==b});d.geometry=a.geometry;d.orientation=f.orientation;d.direction=f.direction;d.index=b;ia.push({data:a,geometryConfig:d})});var S=[];m.nest().key(function(a,b){return"undefined"!=typeof a.data.groupId||"unstacked"}).entries(ia).forEach(function(a,b){"unstacked"===a.key?S=S.concat(a.values.map(function(a,b){return[a]})):S.push(a.values)});S.forEach(function(a,b){var c=
Array.isArray(a)?a[0].geometryConfig.geometry:a.geometryConfig.geometry;a=a.map(function(a,b){return k(e[c].defaultConfig(),a)});e[c]().config(a)()})}var W=p.select(".guides-group");a=p.select(".tooltips-group");var fa=e.tooltipPanel().config({container:a,fontSize:8})(),qa=e.tooltipPanel().config({container:a,fontSize:8})(),ha=e.tooltipPanel().config({container:a,hasTick:!0})(),ea,ba;if(!u){var la=W.select("line").attr({x1:0,y1:0,y2:0}).style({stroke:"grey","pointer-events":"none"});b.on("mousemove.angular-guide",
function(a,b){a=e.util.getMousePos(T).angle;la.attr({x2:-t,transform:"rotate("+a+")"}).style({opacity:.5});ea=q.invert((a+180+360-f.orientation)%360);a=e.util.convertToCartesian(t+12,a+180);fa.text(e.util.round(ea)).move([a[0]+r[0],a[1]+r[1]])}).on("mouseout.angular-guide",function(a,b){W.select("line").style({opacity:0})})}var Z=W.select("circle").style({stroke:"grey",fill:"none"});b.on("mousemove.radial-guide",function(a,b){a=e.util.getMousePos(T).radius;Z.attr({r:a}).style({opacity:.5});ba=c.invert(e.util.getMousePos(T).radius);
a=e.util.convertToCartesian(a,f.radialAxis.orientation);qa.text(e.util.round(ba)).move([a[0]+r[0],a[1]+r[1]])}).on("mouseout.radial-guide",function(a,b){Z.style({opacity:0});ha.hide();fa.hide();qa.hide()});p.selectAll(".geometry-group .mark").on("mouseover.tooltip",function(a,b){var c=m.select(this);b=this.style.fill;c.attr({"data-opacity":this.style.opacity||1});if(b&&"none"!==b){c.attr({"data-fill":b});b=m.hsl(b).darker().toString();c.style({fill:b,opacity:1});c=e.util.round(a[0]);var d=e.util.round(a[1]);
u&&(c=y[a[0]]);a="t: "+c+", r: "+d;c=this.getBoundingClientRect();d=p.node().getBoundingClientRect();c=[c.left+c.width/2-z[0]-d.left,c.top+c.height/2-z[1]-d.top];ha.config({color:b}).text(a);ha.move(c)}else b=this.style.stroke||"black",c.attr({"data-stroke":b}),b=m.hsl(b).darker().toString(),c.style({stroke:b,opacity:1})}).on("mousemove.tooltip",function(a,b){if(0!=m.event.which)return!1;m.select(this).attr("data-fill")&&ha.show()}).on("mouseout.tooltip",function(a,b){ha.hide();a=m.select(this);(b=
a.attr("data-fill"))?a.style({fill:b,opacity:a.attr("data-opacity")}):a.style({stroke:a.attr("data-stroke"),opacity:a.attr("data-opacity")})})});return t}var b={data:[],layout:{}},n={},l={},p,d,g=m.dispatch("hover"),c,q,t={render:function(b){a(b);return this},config:function(a){if(!arguments.length)return b;var c=e.util.cloneJson(a);c.data.forEach(function(a,c){b.data[c]||(b.data[c]={});k(b.data[c],e.Axis.defaultConfig().data[0]);k(b.data[c],a)});k(b.layout,e.Axis.defaultConfig().layout);k(b.layout,
c.layout);return this},getLiveConfig:function(){return l},getinputConfig:function(){return n},radialScale:function(a){return c},angularScale:function(a){return q},svg:function(){return p}};m.rebind(t,g,"on");return t};e.Axis.defaultConfig=function(a,b){return{data:[{t:[1,2,3,4],r:[10,11,12,13],name:"Line1",geometry:"LinePlot",color:null,strokeDash:"solid",strokeColor:null,strokeSize:"1",visibleInLegend:!0,opacity:1}],layout:{defaultColorRange:m.scale.category10().range(),title:null,height:450,width:500,
margin:{top:40,right:40,bottom:40,left:40},font:{size:12,color:"gray",outlineColor:"white",family:"Tahoma, sans-serif"},direction:"clockwise",orientation:0,labelOffset:10,radialAxis:{domain:null,orientation:-45,ticksSuffix:"",visible:!0,gridLinesVisible:!0,tickOrientation:"horizontal",rewriteTicks:null},angularAxis:{domain:[0,360],ticksSuffix:"",visible:!0,gridLinesVisible:!0,labelsVisible:!0,tickOrientation:"horizontal",rewriteTicks:null,ticksCount:null,ticksStep:null},minorTicks:0,tickLength:null,
tickColor:"silver",minorTickColor:"#eee",backgroundColor:"none",needsEndSpacing:null,showLegend:!0,legend:{reverseOrder:!1},opacity:1}}};e.util={};e.DATAEXTENT="dataExtent";e.AREA="AreaChart";e.LINE="LinePlot";e.DOT="DotPlot";e.BAR="BarChart";e.util._override=function(a,b){for(var e in a)e in b&&(b[e]=a[e])};e.util._extend=function(a,b){for(var e in a)b[e]=a[e]};e.util._rndSnd=function(){return 2*Math.random()-1+(2*Math.random()-1)+(2*Math.random()-1)};e.util.dataFromEquation2=function(a,b){b=b||
6;return m.range(0,360+b,b).map(function(b,e){e=a(b*Math.PI/180);return[b,e]})};e.util.dataFromEquation=function(a,b,e){b=b||6;var f=[],h=[];m.range(0,360+b,b).forEach(function(b,e){e=a(b*Math.PI/180);f.push(b);h.push(e)});b={t:f,r:h};e&&(b.name=e);return b};e.util.ensureArray=function(a,b){if("undefined"===typeof a)return null;var e=[].concat(a);return m.range(b).map(function(a,b){return e[b]||e[0]})};e.util.fillArrays=function(a,b,h){b.forEach(function(b,f){a[b]=e.util.ensureArray(a[b],h)});return a};
e.util.cloneJson=function(a){return JSON.parse(JSON.stringify(a))};e.util.validateKeys=function(a,b){"string"===typeof b&&(b=b.split("."));var e=b.shift();return a[e]&&(!b.length||objHasKeys(a[e],b))};e.util.sumArrays=function(a,b){return m.zip(a,b).map(function(a,b){return m.sum(a)})};e.util.arrayLast=function(a){return a[a.length-1]};e.util.arrayEqual=function(a,b){for(var e=Math.max(a.length,b.length,1);0<=e--&&a[e]===b[e];);return-2===e};e.util.flattenArray=function(a){for(var b=[];!e.util.arrayEqual(b,
a);)b=a,a=[].concat.apply([],a);return a};e.util.deduplicate=function(a){return a.filter(function(a,e,f){return f.indexOf(a)==e})};e.util.convertToCartesian=function(a,b){b=b*Math.PI/180;return[a*Math.cos(b),a*Math.sin(b)]};e.util.round=function(a,b){b=Math.pow(10,b||2);return Math.round(a*b)/b};e.util.getMousePos=function(a){a=m.mouse(a.node());var b=a[0],e=a[1],f={};f.x=b;f.y=e;f.pos=a;f.angle=180*(Math.atan2(e,b)+Math.PI)/Math.PI;f.radius=Math.sqrt(b*b+e*e);return f};e.util.duplicatesCount=function(a){for(var b=
{},e,f={},h=0,d=a.length;h<d;h++)e=a[h],e in b?(b[e]++,f[e]=b[e]):b[e]=1;return f};e.util.duplicates=function(a){return Object.keys(e.util.duplicatesCount(a))};e.util.translator=function(a,b,e,h){h&&(h=e.slice(),e=b,b=h);var f=b.reduce(function(a,b){if("undefined"!=typeof a)return a[b]},a);"undefined"!==typeof f&&(b.reduce(function(a,e,c){if("undefined"!=typeof a)return c===b.length-1&&delete a[e],a[e]},a),e.reduce(function(a,b,c){"undefined"===typeof a[b]&&(a[b]={});c===e.length-1&&(a[b]=f);return a[b]},
a))};e.PolyChart=function(){function a(){var a=b[0].geometryConfig,d=a.container;"string"==typeof d&&(d=m.select(d));d.datum(b).each(function(b,c){var d=!!b[0].data.yStack,e=b.map(function(a,b){return d?m.zip(a.data.t[0],a.data.r[0],a.data.yStack[0]):m.zip(a.data.t[0],a.data.r[0])}),f=a.angularScale,g=a.radialScale.domain()[0],h={bar:function(c,d,e){e=b[e].data;d=a.radialScale(c[1])-a.radialScale(0);c=a.radialScale(c[2]||0);e=e.barWidth;m.select(this).attr({"class":"mark bar",d:"M"+[[d+c,-e/2],[d+
c,e/2],[c,e/2],[c,-e/2]].join("L")+"Z",transform:function(b,c){return"rotate("+(a.orientation+f(b[0]))+")"}})},dot:function(c,d,e){var f=c[2]?[c[0],c[1]+c[2]]:c;c=m.svg.symbol().size(b[e].data.dotSize).type(b[e].data.dotType)(c,d);m.select(this).attr({"class":"mark dot",d:c,transform:function(b,c){b=a.radialScale(f[1]);c=(a.angularScale(f[0])+a.orientation)*Math.PI/180;return"translate("+[b*Math.cos(c),b*Math.sin(c)]+")"}})}},k=m.svg.line.radial().interpolate(b[0].data.lineInterpolation).radius(function(b){return a.radialScale(b[1])}).angle(function(b){return a.angularScale(b[0])*
Math.PI/180});h.line=function(c,d,f){var g=c[2]?e[f].map(function(a,b){return[a[0],a[1]+a[2]]}):e[f];m.select(this).each(h.dot).style({opacity:function(a,c){return+b[f].data.dotVisible},fill:r.stroke(c,d,f)}).attr({"class":"mark dot"});if(!(0<d)){var n=m.select(this.parentNode).selectAll("path.line").data([0]);n.enter().insert("path");n.attr({"class":"line",d:k(g),transform:function(b,c){return"rotate("+(a.orientation+90)+")"},"pointer-events":"none"}).style({fill:function(a,b){return r.fill(c,d,
f)},"fill-opacity":0,stroke:function(a,b){return r.stroke(c,d,f)},"stroke-width":function(a,b){return r["stroke-width"](c,d,f)},"stroke-dasharray":function(a,b){return r["stroke-dasharray"](c,d,f)},opacity:function(a,b){return r.opacity(c,d,f)},display:function(a,b){return r.display(c,d,f)}})}};c=a.angularScale.range();var n=Math.abs(c[1]-c[0])/e[0].length*Math.PI/180,p=m.svg.arc().startAngle(function(a){return-n/2}).endAngle(function(a){return n/2}).innerRadius(function(b){return a.radialScale(g+
(b[2]||0))}).outerRadius(function(b){return a.radialScale(g+(b[2]||0))+a.radialScale(b[1])});h.arc=function(b,c,d){m.select(this).attr({"class":"mark arc",d:p,transform:function(b,c){return"rotate("+(a.orientation+f(b[0])+90)+")"}})};var r={fill:function(a,c,d){return b[d].data.color},stroke:function(a,c,d){return b[d].data.strokeColor},"stroke-width":function(a,c,d){return b[d].data.strokeSize+"px"},"stroke-dasharray":function(a,c,d){return l[b[d].data.strokeDash]},opacity:function(a,c,d){return b[d].data.opacity},
display:function(a,c,d){return"undefined"===typeof b[d].data.visible||b[d].data.visible?"block":"none"}};c=m.select(this).selectAll("g.layer").data(e);c.enter().append("g").attr({"class":"layer"});var q=c.selectAll("path.mark").data(function(a,b){return a});q.enter().append("path").attr({"class":"mark"});q.style(r).each(h[a.geometryType]);q.exit().remove();c.exit().remove()})}var b=[e.PolyChart.defaultConfig()],h=m.dispatch("hover"),l={solid:"none",dash:[5,2],dot:[2,5]};a.config=function(a){if(!arguments.length)return b;
a.forEach(function(a,f){b[f]||(b[f]={});k(b[f],e.PolyChart.defaultConfig());k(b[f],a)});return this};a.getColorScale=function(){};m.rebind(a,h,"on");return a};e.PolyChart.defaultConfig=function(){return{data:{name:"geom1",t:[[1,2,3,4]],r:[[1,2,3,4]],dotType:"circle",dotSize:64,dotVisible:!1,barWidth:20,color:"#ffa500",strokeSize:1,strokeColor:"silver",strokeDash:"solid",opacity:1,index:0,visible:!0,visibleInLegend:!0},geometryConfig:{geometry:"LinePlot",geometryType:"arc",direction:"clockwise",orientation:0,
container:"body",radialScale:null,angularScale:null,colorScale:m.scale.category20()}}};e.BarChart=function(){return e.PolyChart()};e.BarChart.defaultConfig=function(){return{geometryConfig:{geometryType:"bar"}}};e.AreaChart=function(){return e.PolyChart()};e.AreaChart.defaultConfig=function(){return{geometryConfig:{geometryType:"arc"}}};e.DotPlot=function(){return e.PolyChart()};e.DotPlot.defaultConfig=function(){return{geometryConfig:{geometryType:"dot",dotType:"circle"}}};e.LinePlot=function(){return e.PolyChart()};
e.LinePlot.defaultConfig=function(){return{geometryConfig:{geometryType:"line"}}};e.Legend=function(){function a(){var e=b.legendConfig,f=b.data.map(function(a,b){return[].concat(a).map(function(a,c){var d=k({},e.elements[b]);d.name=a;d.color=[].concat(e.elements[b].color)[c];return d})}),d=m.merge(f);d=d.filter(function(a,b){return e.elements[b]&&(e.elements[b].visibleInLegend||"undefined"===typeof e.elements[b].visibleInLegend)});e.reverseOrder&&(d=d.reverse());var g=e.container;if("string"==typeof g||
g.nodeName)g=m.select(g);var c=d.map(function(a,b){return a.color}),h=e.fontSize,n=(f=null==e.isContinuous?"number"===typeof d[0]:e.isContinuous)?e.height:h*d.length;g=g.classed("legend-group",!0).selectAll("svg").data([0]);var l=g.enter().append("svg").attr({width:300,height:n+h,xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink",version:"1.1"});l.append("g").classed("legend-axis",!0);l.append("g").classed("legend-marks",!0);l=m.range(d.length);var p=m.scale[f?"linear":
"ordinal"]().domain(l).range(c),q=m.scale[f?"linear":"ordinal"]().domain(l)[f?"range":"rangePoints"]([0,n]);f?(n=g.select(".legend-marks").append("defs").append("linearGradient").attr({id:"grad1",x1:"0%",y1:"0%",x2:"0%",y2:"100%"}).selectAll("stop").data(c),n.enter().append("stop"),n.attr({offset:function(a,b){return b/(c.length-1)*100+"%"}}).style({"stop-color":function(a,b){return a}}),g.append("rect").classed("legend-mark",!0).attr({height:e.height,width:e.colorBandWidth,fill:"url(#grad1)"})):
(n=g.select(".legend-marks").selectAll("path.legend-mark").data(d),n.enter().append("path").classed("legend-mark",!0),n.attr({transform:function(a,b){return"translate("+[h/2,q(b)+h/2]+")"},d:function(a,b){a=a.symbol;b=3*h;a="line"===a?"M"+[[-h/2,-h/12],[h/2,-h/12],[h/2,h/12],[-h/2,h/12]]+"Z":-1!=m.svg.symbolTypes.indexOf(a)?m.svg.symbol().type(a).size(b)():m.svg.symbol().type("square").size(b)();return a},fill:function(a,b){return p(b)}}),n.exit().remove());n=m.svg.axis().scale(q).orient("right");
g=g.select("g.legend-axis").attr({transform:"translate("+[f?e.colorBandWidth:h,h/2]+")"}).call(n);g.selectAll(".domain").style({fill:"none",stroke:"none"});g.selectAll("line").style({fill:"none",stroke:f?e.textColor:"none"});g.selectAll("text").style({fill:e.textColor,"font-size":e.fontSize}).text(function(a,b){return d[b].name});return a}var b=e.Legend.defaultConfig(),h=m.dispatch("hover");a.config=function(a){if(!arguments.length)return b;k(b,a);return this};m.rebind(a,h,"on");return a};e.Legend.defaultConfig=
function(a,b){return{data:["a","b","c"],legendConfig:{elements:[{symbol:"line",color:"red"},{symbol:"square",color:"yellow"},{symbol:"diamond",color:"limegreen"}],height:150,colorBandWidth:30,fontSize:12,container:"body",isContinuous:null,textColor:"grey",reverseOrder:!1}}};e.tooltipPanel=function(){var a,b,h,l={container:null,hasTick:!1,fontSize:12,color:"white",padding:5},p="tooltip-"+e.tooltipPanel.uid++,d=function(){a=l.container.selectAll("g."+p).data([0]);var e=a.enter().append("g").classed(p,
!0).style({"pointer-events":"none",display:"none"});h=e.append("path").style({fill:"white","fill-opacity":.9}).attr({d:"M0 0"});b=e.append("text").attr({dx:l.padding+10,dy:.3*+l.fontSize});return d};d.text=function(e){var c=m.hsl(l.color).l,f=.5<=c?"#aaa":"white";e=e||"";b.style({fill:.5<=c?"black":"white","font-size":l.fontSize+"px"}).text(e);c=l.padding;e=b.node().getBBox();f={fill:l.color,stroke:f,"stroke-width":"2px"};var g=e.width+2*c+10;e=e.height+2*c;h.attr({d:"M"+[[10,-e/2],[10,-e/4],[l.hasTick?
0:10,0],[10,e/4],[10,e/2],[g,e/2],[g,-e/2]].join("L")+"Z"}).style(f);a.attr({transform:"translate("+[10,-e/2+2*c]+")"});a.style({display:"block"});return d};d.move=function(b){if(a)return a.attr({transform:"translate("+[b[0],b[1]]+")"}).style({display:"block"}),d};d.hide=function(){if(a)return a.style({display:"none"}),d};d.show=function(){if(a)return a.style({display:"block"}),d};d.config=function(a){k(l,a);return d};return d};e.tooltipPanel.uid=1;e.adapter={};e.adapter.plotly=function(){return{convert:function(a,
b){var f={};if(a.data&&(f.data=a.data.map(function(a,d){a=k({},a);[[a,["marker","color"],["color"]],[a,["marker","opacity"],["opacity"]],[a,["marker","line","color"],["strokeColor"]],[a,["marker","line","dash"],["strokeDash"]],[a,["marker","line","width"],["strokeSize"]],[a,["marker","symbol"],["dotType"]],[a,["marker","size"],["dotSize"]],[a,["marker","barWidth"],["barWidth"]],[a,["line","interpolation"],["lineInterpolation"]],[a,["showlegend"],["visibleInLegend"]]].forEach(function(a,c){e.util.translator.apply(null,
a.concat(b))});b||delete a.marker;b&&delete a.groupId;b?("LinePlot"===a.geometry?(a.type="scatter",!0===a.dotVisible?(delete a.dotVisible,a.mode="lines+markers"):a.mode="lines"):"DotPlot"===a.geometry?(a.type="scatter",a.mode="markers"):"AreaChart"===a.geometry?a.type="area":"BarChart"===a.geometry&&(a.type="bar"),delete a.geometry):("scatter"===a.type?"lines"===a.mode?a.geometry="LinePlot":"markers"===a.mode?a.geometry="DotPlot":"lines+markers"===a.mode&&(a.geometry="LinePlot",a.dotVisible=!0):"area"===
a.type?a.geometry="AreaChart":"bar"===a.type&&(a.geometry="BarChart"),delete a.mode,delete a.type);return a}),!b&&a.layout&&"stack"===a.layout.barmode)){var h=e.util.duplicates(f.data.map(function(a,b){return a.geometry}));f.data.forEach(function(a,b){a=h.indexOf(a.geometry);-1!=a&&(f.data[b].groupId=a)})}if(a.layout){a=k({},a.layout);[[a,["plot_bgcolor"],["backgroundColor"]],[a,["showlegend"],["showLegend"]],[a,["radialaxis"],["radialAxis"]],[a,["angularaxis"],["angularAxis"]],[a.angularaxis,["showline"],
["gridLinesVisible"]],[a.angularaxis,["showticklabels"],["labelsVisible"]],[a.angularaxis,["nticks"],["ticksCount"]],[a.angularaxis,["tickorientation"],["tickOrientation"]],[a.angularaxis,["ticksuffix"],["ticksSuffix"]],[a.angularaxis,["range"],["domain"]],[a.angularaxis,["endpadding"],["endPadding"]],[a.radialaxis,["showline"],["gridLinesVisible"]],[a.radialaxis,["tickorientation"],["tickOrientation"]],[a.radialaxis,["ticksuffix"],["ticksSuffix"]],[a.radialaxis,["range"],["domain"]],[a.angularAxis,
["showline"],["gridLinesVisible"]],[a.angularAxis,["showticklabels"],["labelsVisible"]],[a.angularAxis,["nticks"],["ticksCount"]],[a.angularAxis,["tickorientation"],["tickOrientation"]],[a.angularAxis,["ticksuffix"],["ticksSuffix"]],[a.angularAxis,["range"],["domain"]],[a.angularAxis,["endpadding"],["endPadding"]],[a.radialAxis,["showline"],["gridLinesVisible"]],[a.radialAxis,["tickorientation"],["tickOrientation"]],[a.radialAxis,["ticksuffix"],["ticksSuffix"]],[a.radialAxis,["range"],["domain"]],
[a.font,["outlinecolor"],["outlineColor"]],[a.legend,["traceorder"],["reverseOrder"]],[a,["labeloffset"],["labelOffset"]],[a,["defaultcolorrange"],["defaultColorRange"]]].forEach(function(a,d){e.util.translator.apply(null,a.concat(b))});b?("undefined"!==typeof a.tickLength&&(a.angularaxis.ticklen=a.tickLength,delete a.tickLength),a.tickColor&&(a.angularaxis.tickcolor=a.tickColor,delete a.tickColor)):(a.angularAxis&&"undefined"!==typeof a.angularAxis.ticklen&&(a.tickLength=a.angularAxis.ticklen),a.angularAxis&&
"undefined"!==typeof a.angularAxis.tickcolor&&(a.tickColor=a.angularAxis.tickcolor));a.legend&&"boolean"!=typeof a.legend.reverseOrder&&(a.legend.reverseOrder="normal"!=a.legend.reverseOrder);a.legend&&"boolean"==typeof a.legend.traceorder&&(a.legend.traceorder=a.legend.traceorder?"reversed":"normal",delete a.legend.reverseOrder);if(a.margin&&"undefined"!=typeof a.margin.t){var l=["t","r","b","l","pad"],d=["top","right","bottom","left","pad"],g={};m.entries(a.margin).forEach(function(a,b){g[d[l.indexOf(a.key)]]=
a.value});a.margin=g}b&&(delete a.needsEndSpacing,delete a.minorTickColor,delete a.minorTicks,delete a.angularaxis.ticksCount,delete a.angularaxis.ticksCount,delete a.angularaxis.ticksStep,delete a.angularaxis.rewriteTicks,delete a.angularaxis.nticks,delete a.radialaxis.ticksCount,delete a.radialaxis.ticksCount,delete a.radialaxis.ticksStep,delete a.radialaxis.rewriteTicks,delete a.radialaxis.nticks);f.layout=a}return f}}}},{"../../../constants/alignment":672,"../../../lib":700,d3:154}],820:[function(a,
p,l){var m=a("d3");l=a("../../../lib");var k=a("../../../components/color"),h=a("./micropolar"),e=a("./undo_manager"),f=l.extendDeepAll,b=p.exports={};b.framework=function(a){function k(d,e){e&&(l=e);m.select(m.select(l).node().parentNode).selectAll(".svg-container\x3e*:not(.chart-root)").remove();n=n?f(n,d):d;g||(g=h.Axis());c=h.adapter.plotly().convert(n);g.config(c).render(l);a.data=n.data;a.layout=n.layout;b.fillLayout(a);return n}var n,d,g,c,l,p=new e;k.isPolar=!0;k.svg=function(){return g.svg()};
k.getConfig=function(){return n};k.getLiveConfig=function(){return h.adapter.plotly().convert(g.getLiveConfig(),!0)};k.getLiveScales=function(){return{t:g.angularScale(),r:g.radialScale()}};k.setUndoPoint=function(){var a=this,b=h.util.cloneJson(n);(function(b,c){p.add({undo:function(){c&&a(c)},redo:function(){a(b)}})})(b,d);d=h.util.cloneJson(b)};k.undo=function(){p.undo()};k.redo=function(){p.redo()};return k};b.fillLayout=function(a){var b=m.select(a).selectAll(".plot-container"),e=b.selectAll(".svg-container"),
d=a.framework&&a.framework.svg&&a.framework.svg();a._fullLayout=f({width:800,height:600,paper_bgcolor:k.background,_container:b,_paperdiv:e,_paper:d},a.layout)}},{"../../../components/color":577,"../../../lib":700,"./micropolar":819,"./undo_manager":821,d3:154}],821:[function(a,p,l){p.exports=function(){function a(a,f){if(!a)return this;e=!0;a[f]();e=!1;return this}var k=[],h=-1,e=!1,f;return{add:function(a){if(e)return this;k.splice(h+1,k.length-h);k.push(a);h=k.length-1;return this},setCallback:function(a){f=
a},undo:function(){var b=k[h];if(!b)return this;a(b,"undo");--h;f&&f(b.undo);return this},redo:function(){var b=k[h+1];if(!b)return this;a(b,"redo");h+=1;f&&f(b.redo);return this},clear:function(){k=[];h=-1},hasUndo:function(){return-1!==h},hasRedo:function(){return h<k.length-1},getCommands:function(){return k},getPreviousCommand:function(){return k[h-1]},getIndex:function(){return h}}}},{}],822:[function(a,p,l){function m(a,b){this.id=b;this.gd=a;this.radialAxisAngle=this.vangles=this._hasClipOnAxisFalse=
null;this.traceHash={};this.layers={};this.clipPaths={};this.clipIds={};this.viewInitial={};a=a._fullLayout;this.clipIds.forTraces="clip"+a._uid+b+"-for-traces";this.clipPaths.forTraces=a._clips.append("clipPath").attr("id",this.clipIds.forTraces);this.clipPaths.forTraces.append("path");this.framework=a._polarlayer.append("g").attr("class",b);this.angularTickLayout=this.radialTickLayout=null}function k(a){var b=a.ticks+String(a.ticklen)+String(a.showticklabels);"side"in a&&(b+=a.side);return b}function h(a,
b){var c=d.findIndexOfMin(b,function(b){return d.angleDist(a,b)});return b[c]}function e(a,b,c){b?(a.attr("display",null),a.attr(c)):a&&a.attr("display","none");return a}function f(a,b){return"translate("+a+","+b+")"}function b(a){return"rotate("+a+")"}var n=a("d3"),q=a("tinycolor2"),r=a("../../registry"),d=a("../../lib"),g=a("../../components/color"),c=a("../../components/drawing"),v=a("../plots"),t=a("../../plots/cartesian/axes"),y=a("../cartesian/set_convert"),w=a("./set_convert"),x=a("../cartesian/autorange").doAutoRange,
G=a("../cartesian/dragbox"),A=a("../../components/dragelement"),C=a("../../components/fx"),P=a("../../components/titles"),J=a("../cartesian/select").prepSelect,E=a("../cartesian/select").selectOnClick,H=a("../cartesian/select").clearSelect,z=a("../../lib/setcursor"),O=a("../../lib/clear_gl_canvases"),I=a("../../plot_api/subroutines").redrawReglTraces,Q=a("../../constants/alignment").MID_SHIFT,N=a("./constants"),L=a("./helpers"),F=d._,ca=d.mod,K=d.deg2rad,T=d.rad2deg;a=m.prototype;p.exports=function(a,
b){return new m(a,b)};a.plot=function(a,b){var c=b[this.id];this._hasClipOnAxisFalse=!1;for(var d=0;d<a.length;d++)if(!1===a[d][0].trace.cliponaxis){this._hasClipOnAxisFalse=!0;break}this.updateLayers(b,c);this.updateLayout(b,c);v.generalUpdatePerTraceModule(this.gd,this,a,c);this.updateFx(b,c)};a.updateLayers=function(a,b){var c=this.layers;a=b.radialaxis;b=b.angularaxis;var d=N.layerNames,e=d.indexOf("frontplot");d=d.slice(0,e);b="below traces"===b.layer;a="below traces"===a.layer;b&&d.push("angular-line");
a&&d.push("radial-line");b&&d.push("angular-axis");a&&d.push("radial-axis");d.push("frontplot");b||d.push("angular-line");a||d.push("radial-line");b||d.push("angular-axis");a||d.push("radial-axis");a=this.framework.selectAll(".polarsublayer").data(d,String);a.enter().append("g").attr("class",function(a){return"polarsublayer "+a}).each(function(a){var b=c[a]=n.select(this);switch(a){case "frontplot":b.append("g").classed("barlayer",!0);b.append("g").classed("scatterlayer",!0);break;case "backplot":b.append("g").classed("maplayer",
!0);break;case "plotbg":c.bg=b.append("path");break;case "radial-grid":b.style("fill","none");break;case "angular-grid":b.style("fill","none");break;case "radial-line":b.append("line").style("fill","none");break;case "angular-line":b.append("path").style("fill","none")}});a.order()};a.updateLayout=function(a,b){var d=this.layers,e=a._size,h=b.radialaxis,k=b.angularaxis,n=b.domain.x,m=b.domain.y;this.xOffset=e.l+e.w*n[0];this.yOffset=e.t+e.h*(1-m[1]);var l=this.xLength=e.w*(n[1]-n[0]),p=this.yLength=
e.h*(m[1]-m[0]),t=b.sector;this.sectorInRad=t.map(K);var r=t[0];t=t[1]-r;r=ca(r,360);t=r+t;var q=Math.cos(K(r)),v=Math.sin(K(r)),u=Math.cos(K(t)),y=Math.sin(K(t));var w=90>=r&&90<=t||90<r&&450<=t?1:0>=v&&0>=y?0:Math.max(v,y);var A=180>=r&&180<=t||180<r&&540<=t?-1:0<=q&&0<=u?0:Math.min(q,u);r=this.sectorBBox=[A,270>=r&&270<=t||270<r&&630<=t?-1:0<=v&&0<=y?0:Math.min(v,y),360<=t?1:0>=q&&0>=u?0:Math.max(q,u),w];t=r[2]-r[0];v=Math.abs((r[3]-r[1])/t);p/l>v?(q=l,v*=l,l=(p-v)/e.h/2,n=[n[0],n[1]],m=[m[0]+
l,m[1]-l]):(q=p/v,v=p,l=(l-q)/e.w/2,n=[n[0]+l,n[1]-l],m=[m[0],m[1]]);this.xLength2=q;this.yLength2=v;this.xDomain2=n;this.yDomain2=m;l=this.xOffset2=e.l+e.w*n[0];p=this.yOffset2=e.t+e.h*(1-m[1]);q=this.radius=q/t;v=this.innerRadius=b.hole*q;t=this.cx=l-q*r[0];r=this.cy=p+q*r[3];u=this.cxx=t-l;y=this.cyy=r-p;this.radialAxis=this.mockAxis(a,b,h,{_id:"x",side:{counterclockwise:"top",clockwise:"bottom"}[h.side],domain:[v/e.w,q/e.w]});this.angularAxis=this.mockAxis(a,b,k,{side:"right",domain:[0,Math.PI],
autorange:!1});this.doAutoRange(a,b);this.updateAngularAxis(a,b);this.updateRadialAxis(a,b);this.updateRadialAxisTitle(a,b);this.xaxis=this.mockCartesianAxis(a,b,{_id:"x",domain:n});this.yaxis=this.mockCartesianAxis(a,b,{_id:"y",domain:m});a=this.pathSubplot();this.clipPaths.forTraces.select("path").attr("d",a).attr("transform",f(u,y));d.frontplot.attr("transform",f(l,p)).call(c.setClipUrl,this._hasClipOnAxisFalse?null:this.clipIds.forTraces,this.gd);d.bg.attr("d",a).attr("transform",f(t,r)).call(g.fill,
b.bgcolor)};a.mockAxis=function(a,b,c,e){c=d.extendFlat({anchor:"free",position:0},c,e);w(c,b,a);return c};a.mockCartesianAxis=function(a,b,c){var e=this,f=c._id,g=d.extendFlat({type:"linear"},c);y(g,a);var h={x:[0,2],y:[1,3]};g.setRange=function(){var a=e.sectorBBox,c=h[f],d=e.radialAxis._rl;d=(d[1]-d[0])/(1-b.hole);g.range=[a[c[0]]*d,a[c[1]]*d]};g.isPtWithinRange="x"===f?function(a){return e.isPtInside(a)}:function(){return!0};g.setRange();g.setScale();return g};a.doAutoRange=function(a,b){var c=
this.gd;a=this.radialAxis;b=b.radialaxis;a.setScale();x(c,a);c=a.range;b.range=c.slice();b._input.range=c.slice();a._rl=[a.r2l(c[0],null,"gregorian"),a.r2l(c[1],null,"gregorian")]};a.updateRadialAxis=function(a,c){var n=this,m=n.gd;a=n.layers;var l=n.radius,p=n.innerRadius,r=n.cx,q=n.cy,v=c.radialaxis,u=ca(c.sector[0],360),y=n.radialAxis;c=p<l;n.fillViewInitialKey("radialaxis.angle",v.angle);n.fillViewInitialKey("radialaxis.range",y.range.slice());y.setGeometry();"auto"===y.tickangle&&90<u&&270>=
u&&(y.tickangle=180);u=function(a){return"translate("+(y.l2p(a.x)+p)+",0)"};var w=function(a){return n.pathArc(y.r2p(a.x)+p)},A=k(v);n.radialTickLayout!==A&&(a["radial-axis"].selectAll(".xtick").remove(),n.radialTickLayout=A);if(c){y.setScale();A=t.calcTicks(y);var x=t.clipEnds(y,A),B=t.getTickSigns(y)[2];t.drawTicks(m,y,{vals:A,layer:a["radial-axis"],path:t.makeTickPath(y,0,B),transFn:u,crisp:!1});t.drawGrid(m,y,{vals:x,layer:a["radial-grid"],path:w,transFn:d.noop,crisp:!1});t.drawLabels(m,y,{vals:A,
layer:a["radial-axis"],transFn:u,labelFns:t.makeLabelFns(y,0)})}m=n.radialAxisAngle=n.vangles?T(h(K(v.angle),n.vangles)):v.angle;r=f(r,q);q=r+b(-m);e(a["radial-axis"],c&&(v.showticklabels||v.ticks),{transform:q});e(a["radial-grid"],c&&v.showgrid,{transform:r});e(a["radial-line"].select("line"),c&&v.showline,{x1:p,y1:0,x2:l,y2:0,transform:q}).attr("stroke-width",v.linewidth).call(g.stroke,v.linecolor)};a.updateRadialAxisTitle=function(a,b,d){a=this.gd;var e=this.radius,f=this.cx,g=this.cy;b=b.radialaxis;
var h=this.id+"title";d=void 0!==d?d:this.radialAxisAngle;var k=K(d),n=Math.cos(k);k=Math.sin(k);var m=0;if(b.title){m=c.bBox(this.layers["radial-axis"].node()).height;var l=b.title.font.size;m="counterclockwise"===b.side?-m-.4*l:m+.8*l}this.layers["radial-axis-title"]=P.draw(a,h,{propContainer:b,propName:this.id+".radialaxis.title",placeholder:F(a,"Click to enter radial axis title"),attributes:{x:f+e/2*n+m*k,y:g-e/2*k+m*n,"text-anchor":"middle"},transform:{rotate:-d}})};a.updateAngularAxis=function(a,
c){var h=this;a=h.gd;var n=h.layers,m=h.radius,l=h.innerRadius,p=h.cx,r=h.cy,q=c.angularaxis,v=h.angularAxis;h.fillViewInitialKey("angularaxis.rotation",q.rotation);v.setGeometry();v.setScale();var u=function(a){return v.t2g(a.x)};"linear"===v.type&&"radians"===v.thetaunit&&(v.tick0=T(v.tick0),v.dtick=T(v.dtick));var y=function(a){return f(p+m*Math.cos(a),r-m*Math.sin(a))},w=function(a){return y(u(a))},A=function(a){a=u(a);return y(a)+b(-T(a))},x=function(a){var b=u(a);a=Math.cos(b);b=Math.sin(b);
return"M"+[p+l*a,r-l*b]+"L"+[p+m*a,r-m*b]},B=t.makeLabelFns(v,0).labelStandoff,D={xFn:function(a){a=u(a);return Math.cos(a)*B},yFn:function(a){var b=u(a);return-Math.sin(b)*(B+a.fontSize*(0<Math.sin(b)?.2:1))+Math.abs(Math.cos(b))*a.fontSize*Q},anchorFn:function(a){a=u(a);a=Math.cos(a);return.1>Math.abs(a)?"middle":0<a?"start":"end"},heightFn:function(a,b,c){a=u(a);return-.5*(1+Math.sin(a))*c}},C=k(q);h.angularTickLayout!==C&&(n["angular-axis"].selectAll("."+v._id+"tick").remove(),h.angularTickLayout=
C);C=t.calcTicks(v);"linear"===c.gridshape?(c=C.map(u),0>d.angleDelta(c[0],c[1])&&(c=c.slice().reverse())):c=null;h.vangles=c;"category"===v.type&&(C=C.filter(function(a){return d.isAngleInsideSector(u(a),h.sectorInRad)}));v.visible&&(c="inside"===v.ticks?-1:1,t.drawTicks(a,v,{vals:C,layer:n["angular-axis"],path:"M"+(v.linewidth||1)/2*c+",0h"+c*v.ticklen,transFn:A,crisp:!1}),t.drawGrid(a,v,{vals:C,layer:n["angular-grid"],path:x,transFn:d.noop,crisp:!1}),t.drawLabels(a,v,{vals:C,layer:n["angular-axis"],
repositionOnUpdate:!0,transFn:w,labelFns:D}));e(n["angular-line"].select("path"),q.showline,{d:h.pathSubplot(),transform:f(p,r)}).attr("stroke-width",q.linewidth).call(g.stroke,q.linecolor)};a.updateFx=function(a,b){this.gd._context.staticPlot||(this.updateAngularDrag(a),this.updateRadialDrag(a,b,0),this.updateRadialDrag(a,b,1),this.updateMainDrag(a))};a.updateMainDrag=function(a){function b(a,b){return Math.sqrt(a*a+b*b)}function c(a,b){return[a*Math.cos(b),a*Math.sin(-b)]}function d(a,b){if(0===
a)return v.pathSector(2*K);var d=U/a,e=b-d;b+=d;d=Math.max(0,Math.min(a,B));a=d-K;d+=K;return"M"+c(a,e)+"A"+[a,a]+" 0,0,0 "+c(a,b)+"L"+c(d,b)+"A"+[d,d]+" 0,0,1 "+c(d,e)+"Z"}function e(a,b,d){if(0===a)return v.pathSector(2*K);b=c(a,b);d=c(a,d);a=R((b[0]+d[0])/2);d=R((b[1]+d[1])/2);if(a&&d){b=d/a;var e=-1/b;a=ca(K,b,a,d);b=ca(U,e,a[0][0],a[0][1]);a=ca(U,e,a[1][0],a[1][1])}else{if(d){e=U;var f=K}else e=K,f=U;b=[[a-e,d-f],[a+e,d-f]];a=[[a-e,d+f],[a+e,d+f]]}return"M"+b.join("L")+"L"+a.reverse().join("L")+
"Z"}function g(a,b){b=Math.max(Math.min(b,B),D);a<x?a=0:B-a<x?a=B:b<x?b=0:B-b<x&&(b=B);if(Math.abs(b-a)>w)return a<b?(Ba=a,Ia=b):(Ba=b,Ia=a),!0;Ia=Ba=null;return!1}function h(a,b){a=a||Ka;b=b||"M0,0Z";Cb.attr("d",a);eb.attr("d",b);G.transitionZoombox(Cb,eb,Ua,Ya);Ua=!0}function k(a,c){a=X+a;var e=Pa+c;c=b(X-z,Pa-M);a=Math.min(b(a-z,e-M),B);e=Math.atan2(M-Pa,X-z);if(g(c,a)){var f=Ka+v.pathSector(Ia);Ba&&(f+=v.pathSector(Ba));var k=d(Ba,e)+d(Ia,e)}h(f,k)}function m(a,c,d,e){a=L.findIntersectionXY(d,
e,d,[a-z,M-c]);return b(a[0],a[1])}function l(a,b){a=X+a;var c=Pa+b,d=Math.atan2(M-c,a-z);b=T(Math.atan2(M-Pa,X-z),Q);var f=T(d,Q);d=m(X,Pa,b[0],b[1]);a=Math.min(m(a,c,f[0],f[1]),B);if(g(d,a)){var k=Ka+v.pathSector(Ia);Ba&&(k+=v.pathSector(Ba));var n=[e(Ba,b[0],b[1]),e(Ia,b[0],b[1])].join(" ")}h(k,n)}function p(){G.removeZoombox(u);if(null!==Ba&&null!==Ia){G.showDoubleClickNotifier(u);var a=F._rl,b=(a[1]-a[0])/(1-D/B)/B;r.call("_guiRelayout",u,v.id+".radialaxis.range",[a[0]+(Ba-D)*b,a[0]+(Ia-D)*b])}}
function t(a,b){var c=u._fullLayout.clickmode;G.removeZoombox(u);if(2===a){var d={},e;for(e in v.viewInitial)d[v.id+"."+e]=v.viewInitial[e];u.emit("plotly_doubleclick",null);r.call("_guiRelayout",u,d)}-1<c.indexOf("select")&&1===a&&E(b,u,[v.xaxis],[v.yaxis],v.id,Fa);-1<c.indexOf("event")&&C.click(u,b,v.id)}var v=this,u=v.gd,y=a._zoomlayer,w=N.MINZOOM,x=N.OFFEDGE,B=v.radius,D=v.innerRadius,I=v.cx,P=v.cy,z=v.cxx,M=v.cyy,O=v.sectorInRad,Q=v.vangles,F=v.radialAxis,R=L.clampTiny,ca=L.findXYatLength,T=
L.findEnclosingVertexAngles,K=N.cornerHalfWidth,U=N.cornerLen/2,Y=G.makeDragger(v.layers,"path","maindrag","crosshair");n.select(Y).attr("d",v.pathSubplot()).attr("transform",f(I,P));var Fa={element:Y,gd:u,subplot:v.id,plotinfo:{id:v.id,xaxis:v.xaxis,yaxis:v.yaxis},xaxes:[v.xaxis],yaxes:[v.yaxis]},X,Pa,Ba,Ia,Ka,Ua,Ya,Cb,eb;Fa.prepFn=function(a,b,c){var d=u._fullLayout.dragmode,e=Y.getBoundingClientRect();X=b-e.left;Pa=c-e.top;Q&&(e=L.findPolygonOffset(B,O[0],O[1],Q),X+=z+e[0],Pa+=M+e[1]);switch(d){case "zoom":Fa.moveFn=
Q?l:k;Fa.clickFn=t;Fa.doneFn=p;Ia=Ba=null;Ka=v.pathSubplot();Ua=!1;Ya=q(u._fullLayout[v.id].bgcolor).getLuminance();Cb=G.makeZoombox(y,Ya,I,P,Ka);Cb.attr("fill-rule","evenodd");eb=G.makeCorners(y,I,P);H(y);break;case "select":case "lasso":J(a,b,c,Fa,d)}};Y.onmousemove=function(a){C.hover(u,a,v.id);u._fullLayout._lasthover=Y;u._fullLayout._hoversubplot=v.id};Y.onmouseout=function(a){u._dragging||A.unhover(u,a)};A.init(Fa)};a.updateRadialDrag=function(a,c,g){function k(a,b){ca?ca(a,b):(a=[a,-b],a=Math.abs(d.dot(a,
[Math.cos(E),Math.sin(E)])/Math.sqrt(d.dot(a,a))),isNaN(a)||(ca=.5>a?l:p))}function m(){null!==S?r.call("_guiRelayout",q,t.id+".radialaxis.angle",S):null!==U&&r.call("_guiRelayout",q,t.id+".radialaxis.range["+g+"]",U)}function l(a,c){0!==g&&(S=Math.atan2(x-(F+c),Q+a-w),t.vangles&&(S=h(S,t.vangles)),S=T(S),a=f(w,x)+b(-S),v["radial-axis"].attr("transform",a),v["radial-line"].select("line").attr("transform",a),a=t.gd._fullLayout,t.updateRadialAxisTitle(a,a[t.id],S))}function p(a,b){a=d.dot([a,-b],[Math.cos(E),
Math.sin(E)]);U=z-M*a;if(0<M!==(g?U>L:U<P))U=null;else{b=q._fullLayout;a=b[t.id];B.range[g]=U;B._rl[g]=U;t.updateRadialAxis(b,a);t.xaxis.setRange();t.xaxis.setScale();t.yaxis.setRange();t.yaxis.setScale();b=!1;for(var c in t.traceHash){var e=t.traceHash[c],f=d.filterVisible(e);e[0][0].trace._module.plot(q,t,f,a);r.traceIs(c,"gl")&&f.length&&(b=!0)}b&&(O(q),I(q))}}var t=this,q=t.gd,v=t.layers,u=t.radius,y=t.innerRadius,w=t.cx,x=t.cy,B=t.radialAxis,D=N.radialDragBoxSize,C=D/2;if(B.visible){var E=K(t.radialAxisAngle),
J=B._rl,L=J[0],P=J[1],z=J[g],M=.75*(J[1]-J[0])/(1-c.hole)/u;if(g){var Q=w+(u+C)*Math.cos(E);var F=x-(u+C)*Math.sin(E);c="radialdrag"}else Q=w+(y-C)*Math.cos(E),F=x-(y-C)*Math.sin(E),c="radialdrag-inner";D=G.makeRectDragger(v,c,"crosshair",-C,-C,D,D);var R={element:D,gd:q};e(n.select(D),B.visible&&y<u,{transform:f(Q,F)});var ca,S,U;R.prepFn=function(){U=S=ca=null;R.moveFn=k;R.doneFn=m;H(a._zoomlayer)};R.clampFn=function(a,b){Math.sqrt(a*a+b*b)<N.MINDRAG&&(b=a=0);return[a,b]};A.init(R)}};a.updateAngularDrag=
function(a){function e(a,e){var g=h.gd._fullLayout,l=g[h.id],w=T(Math.atan2(u+y-(J+e),E+a-v-y)-Q);P=L+w;m.frontplot.attr("transform",f(h.xOffset2,h.yOffset2)+b([-w,v,u]));h.vangles?(M=h.radialAxisAngle+w,a=f(t,q)+b(-w),e=f(t,q)+b(-M),m.bg.attr("transform",a),m["radial-grid"].attr("transform",a),m["radial-axis"].attr("transform",e),m["radial-line"].select("line").attr("transform",e),h.updateRadialAxisTitle(g,l,M)):h.clipPaths.forTraces.select("path").attr("transform",f(v,u)+b(w));D.each(function(){var a=
n.select(this),d=c.getTranslate(a);a.attr("transform",f(d.x,d.y)+b([w]))});C.each(function(){var a=n.select(this),d=a.select("text"),e=c.getTranslate(a);a.attr("transform",b([w,d.attr("x"),d.attr("y")])+f(e.x,e.y))});p.rotation=d.modHalf(P,360);h.updateAngularAxis(g,l);h._hasClipOnAxisFalse&&!d.isFullCircle(h.sectorInRad)&&B.call(c.hideOutsideRangePoints,h);g=!1;for(var A in h.traceHash)r.traceIs(A,"gl")&&(a=h.traceHash[A],e=d.filterVisible(a),a[0][0].trace._module.plot(k,h,e,l),e.length&&(g=!0));
g&&(O(k),I(k))}function g(){C.select("text").attr("transform",null);var a={};a[h.id+".angularaxis.rotation"]=P;h.vangles&&(a[h.id+".radialaxis.angle"]=M);r.call("_guiRelayout",k,a)}var h=this,k=h.gd,m=h.layers,l=h.radius,p=h.angularAxis,t=h.cx,q=h.cy,v=h.cxx,u=h.cyy,y=N.angularDragBoxSize,w=G.makeDragger(m,"path","angulardrag","move"),x={element:w,gd:k};n.select(w).attr("d",h.pathAnnulus(l,l+y)).attr("transform",f(t,q)).call(z,"move");var B=m.frontplot.select(".scatterlayer").selectAll(".trace"),
D=B.selectAll(".point"),C=B.selectAll(".textpoint"),E,J,L,P,M,Q;x.prepFn=function(b,c,d){L=a[h.id].angularaxis.rotation;b=w.getBoundingClientRect();E=c-b.left;J=d-b.top;Q=Math.atan2(u+y-J,E-v-y);x.moveFn=e;x.doneFn=g;H(a._zoomlayer)};h.vangles&&!d.isFullCircle(h.sectorInRad)&&(x.prepFn=d.noop,z(n.select(w),null));A.init(x)};a.isPtInside=function(a){var b=this.sectorInRad,c=this.vangles,e=this.angularAxis.c2g(a.theta),f=this.radialAxis;a=f.c2l(a.r);return(c?L.isPtInsidePolygon:d.isPtInsideSector)(a,
e,f._rl,b,c)};a.pathArc=function(a){var b=this.sectorInRad,c=this.vangles;return(c?L.pathPolygon:d.pathArc)(a,b[0],b[1],c)};a.pathSector=function(a){var b=this.sectorInRad,c=this.vangles;return(c?L.pathPolygon:d.pathSector)(a,b[0],b[1],c)};a.pathAnnulus=function(a,b){var c=this.sectorInRad,e=this.vangles;return(e?L.pathPolygonAnnulus:d.pathAnnulus)(a,b,c[0],c[1],e)};a.pathSubplot=function(){var a=this.innerRadius,b=this.radius;return a?this.pathAnnulus(a,b):this.pathSector(b)};a.fillViewInitialKey=
function(a,b){a in this.viewInitial||(this.viewInitial[a]=b)}},{"../../components/color":577,"../../components/dragelement":595,"../../components/drawing":598,"../../components/fx":616,"../../components/titles":665,"../../constants/alignment":672,"../../lib":700,"../../lib/clear_gl_canvases":685,"../../lib/setcursor":720,"../../plot_api/subroutines":739,"../../plots/cartesian/axes":748,"../../registry":829,"../cartesian/autorange":747,"../cartesian/dragbox":756,"../cartesian/select":765,"../cartesian/set_convert":766,
"../plots":810,"./constants":811,"./helpers":812,"./set_convert":823,d3:154,tinycolor2:521}],823:[function(a,p,l){function m(a,b){var e=b._subplot;a.setGeometry=function(){var b=a._rl[0],f=a._rl[1],c=e.innerRadius,h=(e.radius-c)/(f-b),k=c/h,n=b>f?function(a){return 0>=a}:function(a){return 0<=a};a.c2g=function(c){c=a.c2l(c)-b;return(n(c)?c:0)+k};a.g2c=function(c){return a.l2c(c+b-k)};a.g2p=function(a){return a*h};a.c2p=function(b){return a.g2p(a.c2g(b))}}}function k(a,e){var k=a.type;if("linear"===
k){var d=a.d2c,g=a.c2d;a.d2c=function(a,b){a=d(a);return"degrees"===b?f(a):a};a.c2d=function(a,d){a="degrees"===d?b(a):a;return g(a)}}a.makeCalcdata=function(b,d){var c=b[d],e=b._length,f;if(c){if(h.isTypedArray(c)&&"linear"===k){if(e===c.length)return c;if(c.subarray)return c.subarray(0,e)}d=Array(e);for(f=0;f<e;f++)d[f]=a.d2c(c[f],b.thetaunit)}else for(f=d+"0",d="d"+d,c=(f in b)?a.d2c(b[f],b.thetaunit):0,b=b[d]?a.d2c(b[d],b.thetaunit):(a.period||2*Math.PI)/e,d=Array(e),f=0;f<e;f++)d[f]=c+f*b;return d};
a.setGeometry=function(){var c=e.sector,d=c.map(f),g={clockwise:-1,counterclockwise:1}[a.direction],n=f(a.rotation),m=function(a){return(a-n)/g},l;switch(k){case "linear":var p=l=h.identity;var r=f;var q=b;a.range=h.isFullCircle(d)?[c[0],c[0]+360]:d.map(m).map(b);break;case "category":c=a._categories.length;var u=a.period?Math.max(a.period,c):c;p=r=function(a){return 2*a*Math.PI/u};l=q=function(a){return a*u/Math.PI/2};a.range=[0,u]}a.c2g=function(a){return g*p(a)+n};a.g2c=function(a){return l(m(a))};
a.t2g=function(a){return g*r(a)+n};a.g2t=function(a){return q(m(a))}}}var h=a("../../lib"),e=a("../cartesian/set_convert"),f=h.deg2rad,b=h.rad2deg;p.exports=function(a,b,f){e(a,f);switch(a._id){case "x":case "radialaxis":m(a,b);break;case "angularaxis":k(a,b)}}},{"../../lib":700,"../cartesian/set_convert":766}],824:[function(a,p,l){var m=a("../lib"),k=a("../plot_api/plot_template"),h=a("./domain").defaults;p.exports=function(a,f,b,n){function e(a,b){return m.coerce(t,q,l,a,b)}var l=n.attributes;b=
n.handleDefaults;for(var d=n.partition||"x",g=f._subplots[n.type],c=g.length,p=c&&g[0].replace(/\d+$/,""),t,q,w=0;w<c;w++){var x=g[w];t=a[x]?a[x]:a[x]={};q=k.newContainer(f,x,p);e("uirevision",f.uirevision);var G={};G[d]=[w/c,(w+1)/c];h(q,f,e,G);n.id=x;b(t,q,e,n)}}},{"../lib":700,"../plot_api/plot_template":738,"./domain":773}],825:[function(a,p,l){var m=a("./ternary"),k=a("../../plots/get_data").getSubplotCalcData;p=a("../../lib").counterRegex;l.name="ternary";var h=l.attr="subplot";l.idRoot="ternary";
l.idRegex=l.attrRegex=p("ternary");(l.attributes={})[h]={valType:"subplotid",dflt:"ternary",editType:"calc"};l.layoutAttributes=a("./layout_attributes");l.supplyLayoutDefaults=a("./layout_defaults");l.plot=function(a){for(var e=a._fullLayout,b=a.calcdata,h=e._subplots.ternary,l=0;l<h.length;l++){var p=h[l],d=k(b,"ternary",p),g=e[p]._subplot;g||(g=new m({id:p,graphDiv:a,container:e._ternarylayer.node()},e),e[p]._subplot=g);g.plot(d,e,a._promises)}};l.clean=function(a,f,b,h){a=h._subplots.ternary||
[];for(b=0;b<a.length;b++){var e=a[b],k=h[e]._subplot;!f[e]&&k&&(k.plotContainer.remove(),k.clipDef.remove(),k.clipDefRelative.remove(),k.layers["a-title"].remove(),k.layers["b-title"].remove(),k.layers["c-title"].remove())}}},{"../../lib":700,"../../plots/get_data":784,"./layout_attributes":826,"./layout_defaults":827,"./ternary":828}],826:[function(a,p,l){l=a("../../components/color/attributes");var m=a("../domain").attributes,k=a("../cartesian/layout_attributes"),h=a("../../plot_api/edit_types").overrideAll;
a=a("../../lib/extend").extendFlat;a={title:k.title,color:k.color,tickmode:k.tickmode,nticks:a({},k.nticks,{dflt:6,min:1}),tick0:k.tick0,dtick:k.dtick,tickvals:k.tickvals,ticktext:k.ticktext,ticks:k.ticks,ticklen:k.ticklen,tickwidth:k.tickwidth,tickcolor:k.tickcolor,showticklabels:k.showticklabels,showtickprefix:k.showtickprefix,tickprefix:k.tickprefix,showticksuffix:k.showticksuffix,ticksuffix:k.ticksuffix,showexponent:k.showexponent,exponentformat:k.exponentformat,separatethousands:k.separatethousands,
tickfont:k.tickfont,tickangle:k.tickangle,tickformat:k.tickformat,tickformatstops:k.tickformatstops,hoverformat:k.hoverformat,showline:a({},k.showline,{dflt:!0}),linecolor:k.linecolor,linewidth:k.linewidth,showgrid:a({},k.showgrid,{dflt:!0}),gridcolor:k.gridcolor,gridwidth:k.gridwidth,layer:k.layer,min:{valType:"number",dflt:0,min:0},_deprecated:{title:k._deprecated.title,titlefont:k._deprecated.titlefont}};p=p.exports=h({domain:m({name:"ternary"}),bgcolor:{valType:"color",dflt:l.background},sum:{valType:"number",
dflt:1,min:0},aaxis:a,baxis:a,caxis:a},"plot","from-root");p.uirevision={valType:"any",editType:"none"};p.aaxis.uirevision=p.baxis.uirevision=p.caxis.uirevision={valType:"any",editType:"none"}},{"../../components/color/attributes":576,"../../lib/extend":690,"../../plot_api/edit_types":731,"../cartesian/layout_attributes":760,"../domain":773}],827:[function(a,p,l){function m(a,b,d,f){var g=d("bgcolor");d=d("sum");f.bgColor=h.combine(g,f.paper_bgcolor);for(var n,m,l=0;l<c.length;l++)g=c[l],n=a[g]||
{},m=e.newContainer(b,g),m._name=g,k(n,m,f,b);f=b.aaxis;g=b.baxis;b=b.caxis;f.min+g.min+b.min>=d&&(f.min=0,g.min=0,b.min=0,a.aaxis&&delete a.aaxis.min,a.baxis&&delete a.baxis.min,a.caxis&&delete a.caxis.min)}function k(a,b,c,e){function h(c,d){return f.coerce(a,b,k,c,d)}var k=g[b._name];h("uirevision",e.uirevision);b.type="linear";e=h("color");var m=e!==k.color.dflt?e:c.font.color,l=b._name.charAt(0).toUpperCase(),p="Component "+l,t=h("title.text",p);b._hovertitle=t===p?t:l;f.coerceFont(h,"title.font",
{family:c.font.family,size:Math.round(1.2*c.font.size),color:m});h("min");r(a,b,h,"linear");n(a,b,h,"linear",{});q(a,b,h,{outerTicks:!0});h("showticklabels")&&(f.coerceFont(h,"tickfont",{family:c.font.family,size:c.font.size,color:m}),h("tickangle"),h("tickformat"));d(a,b,h,{dfltColor:e,bgColor:c.bgColor,blend:60,showLine:!0,showGrid:!0,noZeroLine:!0,attributes:k});h("hoverformat");h("layer")}var h=a("../../components/color"),e=a("../../plot_api/plot_template"),f=a("../../lib"),b=a("../subplot_defaults"),
n=a("../cartesian/tick_label_defaults"),q=a("../cartesian/tick_mark_defaults"),r=a("../cartesian/tick_value_defaults"),d=a("../cartesian/line_grid_defaults"),g=a("./layout_attributes"),c=["aaxis","baxis","caxis"];p.exports=function(a,c,d){b(a,c,d,{type:"ternary",attributes:g,handleDefaults:m,font:c.font,paper_bgcolor:c.paper_bgcolor})}},{"../../components/color":577,"../../lib":700,"../../plot_api/plot_template":738,"../cartesian/line_grid_defaults":762,"../cartesian/tick_label_defaults":767,"../cartesian/tick_mark_defaults":768,
"../cartesian/tick_value_defaults":769,"../subplot_defaults":824,"./layout_attributes":826}],828:[function(a,p,l){function m(a,b){this.id=a.id;this.graphDiv=a.graphDiv;this.init(b);this.makeFramework(b);this.cTickLayout=this.bTickLayout=this.aTickLayout=null}function k(a){h.select(a).selectAll(".zoombox,.js-zoombox-backdrop,.js-zoombox-menu,.zoombox-corners").remove()}var h=a("d3"),e=a("tinycolor2"),f=a("../../registry"),b=a("../../lib"),n=b._,q=a("../../components/color"),r=a("../../components/drawing"),
d=a("../cartesian/set_convert"),g=a("../../lib/extend").extendFlat,c=a("../plots"),v=a("../cartesian/axes"),t=a("../../components/dragelement"),y=a("../../components/fx"),w=a("../../components/titles"),x=a("../cartesian/select").prepSelect,G=a("../cartesian/select").selectOnClick,A=a("../cartesian/select").clearSelect,C=a("../cartesian/constants");p.exports=m;a=m.prototype;a.init=function(a){this.container=a._ternarylayer;this.defs=a._defs;this.layoutId=a._uid;this.traceHash={};this.layers={}};a.plot=
function(a,b){var d=b[this.id];b=b._size;this._hasClipOnAxisFalse=!1;for(var e=0;e<a.length;e++)if(!1===a[e][0].trace.cliponaxis){this._hasClipOnAxisFalse=!0;break}this.updateLayers(d);this.adjustLayout(d,b);c.generalUpdatePerTraceModule(this.graphDiv,this,a,d);this.layers.plotbg.select("path").call(q.fill,d.bgcolor)};a.makeFramework=function(a){var c=this.graphDiv,d=a[this.id],e=this.clipId="clip"+this.layoutId+this.id,f=this.clipIdRelative="clip-relative"+this.layoutId+this.id;this.clipDef=b.ensureSingleById(a._clips,
"clipPath",e,function(a){a.append("path").attr("d","M0,0Z")});this.clipDefRelative=b.ensureSingleById(a._clips,"clipPath",f,function(a){a.append("path").attr("d","M0,0Z")});this.plotContainer=b.ensureSingle(this.container,"g",this.id);this.updateLayers(d);r.setClipUrl(this.layers.backplot,e,c);r.setClipUrl(this.layers.grids,e,c)};a.updateLayers=function(a){var b=this.layers,c=["draglayer","plotbg","backplot","grids"];"below traces"===a.aaxis.layer&&c.push("aaxis","aline");"below traces"===a.baxis.layer&&
c.push("baxis","bline");"below traces"===a.caxis.layer&&c.push("caxis","cline");c.push("frontplot");"above traces"===a.aaxis.layer&&c.push("aaxis","aline");"above traces"===a.baxis.layer&&c.push("baxis","bline");"above traces"===a.caxis.layer&&c.push("caxis","cline");a=this.plotContainer.selectAll("g.toplevel").data(c,String);var d=["agrid","bgrid","cgrid"];a.enter().append("g").attr("class",function(a){return"toplevel "+a}).each(function(a){var c=h.select(this);b[a]=c;"frontplot"===a?c.append("g").classed("scatterlayer",
!0):"backplot"===a?c.append("g").classed("maplayer",!0):"plotbg"===a?c.append("path").attr("d","M0,0Z"):"aline"===a||"bline"===a||"cline"===a?c.append("path"):"grids"===a&&d.forEach(function(a){b[a]=c.append("g").classed("grid "+a,!0)})});a.order()};var P=Math.sqrt(4/3);a.adjustLayout=function(a,b){var c=this,e=a.domain,f=(e.x[0]+e.x[1])/2,h=(e.y[0]+e.y[1])/2,k=e.x[1]-e.x[0],n=e.y[1]-e.y[0],m=k*b.w,l=n*b.h,p=a.sum,t=a.aaxis.min,v=a.baxis.min,u=a.caxis.min;if(m>P*l){var y=l;e=y*P}else e=m,y=e/P;m=
k*e/m;n=n*y/l;k=b.l+b.w*f-e/2;b=b.t+b.h*(1-h)-y/2;c.x0=k;c.y0=b;c.w=e;c.h=y;c.sum=p;c.xaxis={type:"linear",range:[t+2*u-p,p-t-2*v],domain:[f-m/2,f+m/2],_id:"x"};d(c.xaxis,c.graphDiv._fullLayout);c.xaxis.setScale();c.xaxis.isPtWithinRange=function(a){return a.a>=c.aaxis.range[0]&&a.a<=c.aaxis.range[1]&&a.b>=c.baxis.range[1]&&a.b<=c.baxis.range[0]&&a.c>=c.caxis.range[1]&&a.c<=c.caxis.range[0]};c.yaxis={type:"linear",range:[t,p-v-u],domain:[h-n/2,h+n/2],_id:"y"};d(c.yaxis,c.graphDiv._fullLayout);c.yaxis.setScale();
c.yaxis.isPtWithinRange=function(){return!0};m=c.yaxis.domain[0];f=c.aaxis=g({},a.aaxis,{range:[t,p-v-u],side:"left",tickangle:(+a.aaxis.tickangle||0)-30,domain:[m,m+n*P],anchor:"free",position:0,_id:"y",_length:e});d(f,c.graphDiv._fullLayout);f.setScale();h=c.baxis=g({},a.baxis,{range:[p-t-u,v],side:"bottom",domain:c.xaxis.domain,anchor:"free",position:0,_id:"x",_length:e});d(h,c.graphDiv._fullLayout);h.setScale();a=c.caxis=g({},a.caxis,{range:[p-t-v,u],side:"right",tickangle:(+a.caxis.tickangle||
0)+30,domain:[m,m+n*P],anchor:"free",position:0,_id:"y",_length:e});d(a,c.graphDiv._fullLayout);a.setScale();p="M"+k+","+(b+y)+"h"+e+"l-"+e/2+",-"+y+"Z";c.clipDef.select("path").attr("d",p);c.layers.plotbg.select("path").attr("d",p);p="M0,"+y+"h"+e+"l-"+e/2+",-"+y+"Z";c.clipDefRelative.select("path").attr("d",p);p="translate("+k+","+b+")";c.plotContainer.selectAll(".scatterlayer,.maplayer").attr("transform",p);c.clipDefRelative.select("path").attr("transform",null);p="translate("+(k-h._offset)+","+
(b+y)+")";c.layers.baxis.attr("transform",p);c.layers.bgrid.attr("transform",p);p="translate("+(k+e/2)+","+b+")rotate(30)translate(0,"+-f._offset+")";c.layers.aaxis.attr("transform",p);c.layers.agrid.attr("transform",p);p="translate("+(k+e/2)+","+b+")rotate(-30)translate(0,"+-a._offset+")";c.layers.caxis.attr("transform",p);c.layers.cgrid.attr("transform",p);c.drawAxes(!0);c.layers.aline.select("path").attr("d",f.showline?"M"+k+","+(b+y)+"l"+e/2+",-"+y:"M0,0").call(q.stroke,f.linecolor||"#000").style("stroke-width",
(f.linewidth||0)+"px");c.layers.bline.select("path").attr("d",h.showline?"M"+k+","+(b+y)+"h"+e:"M0,0").call(q.stroke,h.linecolor||"#000").style("stroke-width",(h.linewidth||0)+"px");c.layers.cline.select("path").attr("d",a.showline?"M"+(k+e/2)+","+b+"l"+e/2+","+y:"M0,0").call(q.stroke,a.linecolor||"#000").style("stroke-width",(a.linewidth||0)+"px");c.graphDiv._context.staticPlot||c.initInteractions();r.setClipUrl(c.layers.frontplot,c._hasClipOnAxisFalse?null:c.clipId,c.graphDiv)};a.drawAxes=function(a){var b=
this.graphDiv,c=this.id.substr(7)+"title",d=this.layers,e=this.aaxis,f=this.baxis,g=this.caxis;this.drawAx(e);this.drawAx(f);this.drawAx(g);if(a){a=Math.max(e.showticklabels?e.tickfont.size/2:0,(g.showticklabels?.75*g.tickfont.size:0)+("outside"===g.ticks?.87*g.ticklen:0));var h=(f.showticklabels?f.tickfont.size:0)+("outside"===f.ticks?f.ticklen:0)+3;d["a-title"]=w.draw(b,"a"+c,{propContainer:e,propName:this.id+".aaxis.title",placeholder:n(b,"Click to enter Component A title"),attributes:{x:this.x0+
this.w/2,y:this.y0-e.title.font.size/3-a,"text-anchor":"middle"}});d["b-title"]=w.draw(b,"b"+c,{propContainer:f,propName:this.id+".baxis.title",placeholder:n(b,"Click to enter Component B title"),attributes:{x:this.x0-h,y:this.y0+this.h+.83*f.title.font.size+h,"text-anchor":"middle"}});d["c-title"]=w.draw(b,"c"+c,{propContainer:g,propName:this.id+".caxis.title",placeholder:n(b,"Click to enter Component C title"),attributes:{x:this.x0+this.w+h,y:this.y0+this.h+.83*g.title.font.size+h,"text-anchor":"middle"}})}};
a.drawAx=function(a){var c=this.graphDiv,d=a._name,e=d.charAt(0),f=a._id;d=this.layers[d];var g=e+"tickLayout",h=a.ticks+String(a.ticklen)+String(a.showticklabels);this[g]!==h&&(d.selectAll("."+f+"tick").remove(),this[g]=h);a.setScale();f=v.calcTicks(a);g=v.clipEnds(a,f);h=v.makeTransFn(a);var k=v.getTickSigns(a)[2],n=b.deg2rad(30),m=k*(a.linewidth||1)/2;k*=a.ticklen;var l=this.w,p=this.h;l={a:"M0,0l"+p+",-"+l/2,b:"M0,0l-"+l/2+",-"+p,c:"M0,0l-"+p+","+l/2}[e];v.drawTicks(c,a,{vals:"inside"===a.ticks?
g:f,layer:d,path:"b"===e?"M0,"+m+"l"+Math.sin(n)*k+","+Math.cos(n)*k:"M"+m+",0l"+Math.cos(n)*k+","+-Math.sin(n)*k,transFn:h,crisp:!1});v.drawGrid(c,a,{vals:g,layer:this.layers[e+"grid"],path:l,transFn:h,crisp:!1});v.drawLabels(c,a,{vals:f,layer:d,transFn:h,labelFns:v.makeLabelFns(a,0,30)})};p=C.MINZOOM/2+.87;var J="m-0.87,.5h"+p+"v3h-"+(p+5.2)+"l"+(p/2+2.6)+",-"+(.87*p+4.5)+"l2.6,1.5l-"+p/2+","+.87*p+"Z",E="m0.87,.5h-"+p+"v3h"+(p+5.2)+"l-"+(p/2+2.6)+",-"+(.87*p+4.5)+"l-2.6,1.5l"+p/2+","+.87*p+"Z",
H="m0,1l"+p/2+","+.87*p+"l2.6,-1.5l-"+(p/2+2.6)+",-"+(.87*p+4.5)+"l-"+(p/2+2.6)+","+(.87*p+4.5)+"l2.6,1.5l"+p/2+",-"+.87*p+"Z",z=!0;a.initInteractions=function(){function a(a){var b={};b[l.id+".aaxis.min"]=a.a;b[l.id+".baxis.min"]=a.b;b[l.id+".caxis.min"]=a.c;return b}function c(b,c){var d=v._fullLayout.clickmode;k(v);2===b&&(v.emit("plotly_doubleclick",null),f.call("_guiRelayout",v,a({a:0,b:0,c:0})));-1<d.indexOf("select")&&1===b&&G(c,v,[l.xaxis],[l.yaxis],l.id,w);-1<d.indexOf("event")&&y.click(v,
c,l.id)}function d(a,b){var c=B+a,d=D+b;b=Math.max(0,Math.min(1,1-D/l.h,1-d/l.h));a=Math.max(0,Math.min(1,1-(B+(l.h-D)/Math.sqrt(3))/l.w,1-(c+(l.h-d)/Math.sqrt(3))/l.w));c=Math.max(0,Math.min(1,(B-(l.h-D)/Math.sqrt(3))/l.w,(c-(l.h-d)/Math.sqrt(3))/l.w));d=(b/2+c)*l.w;var e=(1-b/2-a)*l.w,f=(d+e)/2,g=e-d,h=(1-b)*l.h,k=h-g/P;g<C.MINZOOM?(ha=M,Z.attr("d",ba),pa.attr("d","M0,0Z")):(ha={a:M.a+b*F,b:M.b+a*F,c:M.c+c*F},Z.attr("d",ba+"M"+d+","+h+"H"+e+"L"+f+","+k+"L"+d+","+h+"Z"),pa.attr("d","M"+B+","+D+"m0.5,0.5h5v-2h-5v-5h-2v5h-5v2h5v5h2ZM"+
d+","+h+J+"M"+e+","+h+E+"M"+f+","+k+H));la||(Z.transition().style("fill",.2<K?"rgba(0,0,0,0.4)":"rgba(255,255,255,0.3)").duration(200),pa.transition().style("opacity",1).duration(200),la=!0)}function g(){k(v);ha!==M&&(f.call("_guiRelayout",v,a(ha)),z&&v.data&&v._context.showTips&&(b.notifier(n(v,"Double-click to zoom back out"),"long"),z=!1))}function h(a,b){var c=a/l.xaxis._m,d=b/l.yaxis._m;ha={a:M.a-d,b:M.b+(c+d)/2,c:M.c-(c-d)/2};c=[ha.a,ha.b,ha.c].sort();d=c.indexOf(ha.a);var e=c.indexOf(ha.b),
f=c.indexOf(ha.c);0>c[0]&&(0>c[1]+c[0]/2?(c[2]+=c[0]+c[1],c[0]=c[1]=0):(c[2]+=c[0]/2,c[1]+=c[0]/2,c[0]=0),ha={a:c[d],b:c[e],c:c[f]},b=(M.a-ha.a)*l.yaxis._m,a=(M.c-ha.c-M.b+ha.b)*l.xaxis._m);c="translate("+(l.x0+a)+","+(l.y0+b)+")";l.plotContainer.selectAll(".scatterlayer,.maplayer").attr("transform",c);a="translate("+-a+","+-b+")";l.clipDefRelative.select("path").attr("transform",a);l.aaxis.range=[ha.a,l.sum-ha.b-ha.c];l.baxis.range=[l.sum-ha.a-ha.c,ha.b];l.caxis.range=[l.sum-ha.a-ha.b,ha.c];l.drawAxes(!1);
l._hasClipOnAxisFalse&&l.plotContainer.select(".scatterlayer").selectAll(".trace").call(r.hideOutsideRangePoints,l)}function m(){f.call("_guiRelayout",v,a(ha))}var l=this,p=l.layers.plotbg.select("path").node(),v=l.graphDiv,u=v._fullLayout._zoomlayer,w={element:p,gd:v,plotinfo:{id:l.id,xaxis:l.xaxis,yaxis:l.yaxis},subplot:l.id,prepFn:function(a,b,f){w.xaxes=[l.xaxis];w.yaxes=[l.yaxis];var k=v._fullLayout.dragmode;w.minDrag="lasso"===k?1:void 0;"zoom"===k?(w.moveFn=d,w.clickFn=c,w.doneFn=g,a=p.getBoundingClientRect(),
B=b-a.left,D=f-a.top,ha=M={a:l.aaxis.range[0],b:l.baxis.range[1],c:l.caxis.range[1]},F=l.aaxis.range[1]-M.a,K=e(l.graphDiv._fullLayout[l.id].bgcolor).getLuminance(),ba="M0,"+l.h+"L"+l.w/2+", 0L"+l.w+","+l.h+"Z",la=!1,Z=u.append("path").attr("class","zoombox").attr("transform","translate("+l.x0+", "+l.y0+")").style({fill:.2<K?"rgba(0,0,0,0)":"rgba(255,255,255,0)","stroke-width":0}).attr("d",ba),pa=u.append("path").attr("class","zoombox-corners").attr("transform","translate("+l.x0+", "+l.y0+")").style({fill:q.background,
stroke:q.defaultLine,"stroke-width":1,opacity:0}).attr("d","M0,0Z"),A(u)):"pan"===k?(w.moveFn=h,w.clickFn=c,w.doneFn=m,ha=M={a:l.aaxis.range[0],b:l.baxis.range[1],c:l.caxis.range[1]},A(u)):"select"!==k&&"lasso"!==k||x(a,b,f,w,k)}},B,D,M,F,ha,K,ba,la,Z,pa;p.onmousemove=function(a){y.hover(v,a,l.id);v._fullLayout._lasthover=p;v._fullLayout._hoversubplot=l.id};p.onmouseout=function(a){v._dragging||t.unhover(v,a)};t.init(w)}},{"../../components/color":577,"../../components/dragelement":595,"../../components/drawing":598,
"../../components/fx":616,"../../components/titles":665,"../../lib":700,"../../lib/extend":690,"../../registry":829,"../cartesian/axes":748,"../cartesian/constants":754,"../cartesian/select":765,"../cartesian/set_convert":766,"../plots":810,d3:154,tinycolor2:521}],829:[function(a,p,l){function m(a){if(a.layoutAttributes&&(a=a.layoutAttributes._arrayAttrRegexps))for(var b=0;b<a.length;b++)q(l.layoutArrayRegexes,a[b])}function k(a,b){(a=l.componentsRegistry[a].schema)&&a.traces&&(a=a.traces[b])&&v(l.modules[b]._module.attributes,
a)}function h(a,b){(a=l.componentsRegistry[a].schema)&&a.transforms&&(a=a.transforms[b])&&v(l.transformsRegistry[b].attributes,a)}function e(a,b){if((a=l.componentsRegistry[a].schema)&&a.subplots){var c=l.subplotsRegistry[b];b=c.layoutAttributes;c="subplot"===c.attr?c.name:c.attr;Array.isArray(c)&&(c=c[0]);a=a.subplots[c];b&&a&&v(b,a)}}function f(a){"object"===typeof a&&(a=a.type);return a}var b=a("./lib/loggers"),n=a("./lib/noop"),q=a("./lib/push_unique"),r=a("./lib/is_plain_object");p=a("./lib/extend");
var d=a("./plots/attributes"),g=a("./plots/layout_attributes"),c=p.extendFlat,v=p.extendDeepAll;l.modules={};l.allCategories={};l.allTypes=[];l.subplotsRegistry={};l.transformsRegistry={};l.componentsRegistry={};l.layoutArrayContainers=[];l.layoutArrayRegexes=[];l.traceLayoutAttributes={};l.localeRegistry={};l.apiMethodRegistry={};l.collectableSubplotTypes=null;l.register=function(a){l.collectableSubplotTypes=null;if(a)a&&!Array.isArray(a)&&(a=[a]);else throw Error("No argument passed to Plotly.register.");
for(var d=0;d<a.length;d++){var f=a[d];if(!f)throw Error("Invalid module was attempted to be registered!");switch(f.moduleType){case "trace":var n=void 0,p=f.name,t=f.categories,u=f.meta;if(l.modules[p])b.log("Type "+p+" already registered");else{if(!l.subplotsRegistry[f.basePlotModule.name]){var w=void 0,x=f.basePlotModule,E=x.name;if(l.subplotsRegistry[E])b.log("Plot type "+E+" already registered.");else for(w in m(x),l.subplotsRegistry[E]=x,l.componentsRegistry)e(w,x.name)}w={};for(x=0;x<t.length;x++)w[t[x]]=
!0,l.allCategories[t[x]]=!0;l.modules[p]={_module:f,categories:w};u&&Object.keys(u).length&&(l.modules[p].meta=u);l.allTypes.push(p);for(n in l.componentsRegistry)k(n,p);f.layoutAttributes&&c(l.traceLayoutAttributes,f.layoutAttributes)}break;case "transform":n=void 0;if("string"!==typeof f.name)throw Error("Transform module *name* must be a string.");p="Transform module "+f.name;t="function"===typeof f.transform;u="function"===typeof f.calcTransform;if(!t&&!u)throw Error(p+" is missing a *transform* or *calcTransform* method.");
t&&u&&b.log([p+" has both a *transform* and *calcTransform* methods.","Please note that all *transform* methods are executed before all *calcTransform* methods."].join(" "));r(f.attributes)||b.log(p+" registered without an *attributes* object.");"function"!==typeof f.supplyDefaults&&b.log(p+" registered without a *supplyDefaults* method.");l.transformsRegistry[f.name]=f;for(n in l.componentsRegistry)h(n,f.name);break;case "component":t=p=n=void 0;if("string"!==typeof f.name)throw Error("Component module *name* must be a string.");
u=f.name;l.componentsRegistry[u]=f;f.layoutAttributes&&(f.layoutAttributes._isLinkedToArray&&q(l.layoutArrayContainers,u),m(f));for(t in l.modules)k(u,t);for(p in l.subplotsRegistry)e(u,p);for(n in l.transformsRegistry)h(u,n);f.schema&&f.schema.layout&&v(g,f.schema.layout);break;case "locale":t=f;p=t.name;n=p.split("-")[0];f=t.dictionary;t=t.format;u=f&&Object.keys(f).length;w=t&&Object.keys(t).length;x=l.localeRegistry;(E=x[p])||(x[p]=E={});n!==p&&((p=x[n])||(x[n]=p={}),u&&p.dictionary===E.dictionary&&
(p.dictionary=f),w&&p.format===E.format&&(p.format=t));u&&(E.dictionary=f);w&&(E.format=t);break;case "apiMethod":l.apiMethodRegistry[f.name]=f.fn;break;default:throw Error("Invalid module was attempted to be registered!");}}};l.getModule=function(a){return(a=l.modules[f(a)])?a._module:!1};l.traceIs=function(a,c){a=f(a);if("various"===a)return!1;var e=l.modules[a];e||(a&&"area"!==a&&b.log("Unrecognized trace type "+a+"."),e=l.modules[d.type.dflt]);return!!e.categories[c]};l.getTransformIndices=function(a,
b){var c=[];a=a.transforms||[];for(var d=0;d<a.length;d++)a[d].type===b&&c.push(d);return c};l.hasTransform=function(a,b){a=a.transforms||[];for(var c=0;c<a.length;c++)if(a[c].type===b)return!0;return!1};l.getComponentMethod=function(a,b){return(a=l.componentsRegistry[a])?a[b]||n:n};l.call=function(){var a=arguments[0],b=[].slice.call(arguments,1);return l.apiMethodRegistry[a].apply(null,b)}},{"./lib/extend":690,"./lib/is_plain_object":701,"./lib/loggers":704,"./lib/noop":709,"./lib/push_unique":714,
"./plots/attributes":745,"./plots/layout_attributes":801}],830:[function(a,p,l){function m(a){switch(a){case "themes__thumb":a={autosize:!0,width:150,height:150,title:{text:""},showlegend:!1,margin:{l:5,r:5,t:5,b:5,pad:0},annotations:[]};break;case "thumbnail":a={title:{text:""},hidesources:!0,showlegend:!1,borderwidth:0,bordercolor:"",margin:{l:1,r:1,t:1,b:1,pad:0},annotations:[]};break;default:a={}}return a}a=a("../lib");var k=a.extendFlat,h=a.extendDeep;p.exports=function(a,f){a.framework&&a.framework.isPolar&&
(a=a.framework.getConfig());var b,e=a.layout,l=h([],a.data);e=h({},e,m(f.tileClass));a=a._context||{};f.width&&(e.width=f.width);f.height&&(e.height=f.height);if("thumbnail"===f.tileClass||"themes__thumb"===f.tileClass){e.annotations=[];var p=Object.keys(e);for(b=0;b<p.length;b++)-1<["xaxis","yaxis","zaxis"].indexOf(p[b].slice(0,5))&&(e[p[b]].title={text:""});for(b=0;b<l.length;b++)p=l[b],p.showscale=!1,p.marker&&(p.marker.showscale=!1),"pie"===p.type&&(p.textposition="none")}if(Array.isArray(f.annotations))for(b=
0;b<f.annotations.length;b++)e.annotations.push(f.annotations[b]);p=Object.keys(e).filter(function(a){return a.match(/^scene\d*$/)});if(p.length){var d={};"thumbnail"===f.tileClass&&(d={title:{text:""},showaxeslabels:!1,showticklabels:!1,linetickenable:!1});for(b=0;b<p.length;b++){var g=e[p[b]];g.xaxis||(g.xaxis={});g.yaxis||(g.yaxis={});g.zaxis||(g.zaxis={});k(g.xaxis,d);k(g.yaxis,d);k(g.zaxis,d);g._scene=null}}b=document.createElement("div");f.tileClass&&(b.className=f.tileClass);l={gd:b,td:b,layout:e,
data:l,config:{staticPlot:void 0===f.staticPlot?!0:f.staticPlot,plotGlPixelRatio:void 0===f.plotGlPixelRatio?2:f.plotGlPixelRatio,displaylogo:f.displaylogo||!1,showLink:f.showLink||!1,showTips:f.showTips||!1,mapboxAccessToken:a.mapboxAccessToken}};"transparent"!==f.setBackground&&(l.config.setBackground=f.setBackground||"opaque");l.gd.defaultLayout=m(f.tileClass);return l}},{"../lib":700}],831:[function(a,p,l){var m=a("../plot_api/to_image"),k=a("../lib"),h=a("./filesaver");p.exports=function(a,f){var b;
k.isPlainObject(a)||(b=k.getGraphDiv(a));f=f||{};f.format=f.format||"png";return new Promise(function(e,l){b&&b._snapshotInProgress&&l(Error("Snapshotting already in progress."));k.isIE()&&"svg"!==f.format&&l(Error("Sorry IE does not support downloading from canvas. Try {format:'svg'} instead."));b&&(b._snapshotInProgress=!0);var n=m(a,f),d=f.filename||a.fn||"newplot";d+="."+f.format;n.then(function(a){b&&(b._snapshotInProgress=!1);return h(a,d)}).then(function(a){e(a)}).catch(function(a){b&&(b._snapshotInProgress=
!1);l(a)})})}},{"../lib":700,"../plot_api/to_image":741,"./filesaver":832}],832:[function(a,p,l){p.exports=function(a,k){var h=document.createElement("a"),e="download"in h,f=/Version\/[\d\.]+.*Safari/.test(navigator.userAgent);return new Promise(function(b,n){"undefined"!==typeof navigator&&/MSIE [1-9]\./.test(navigator.userAgent)&&n(Error("IE \x3c 10 unsupported"));f&&(document.location.href="data:application/octet-stream"+a.slice(a.search(/[,;]/)),b(k));k||(k="download");e&&(h.href=a,h.download=
k,document.body.appendChild(h),h.click(),document.body.removeChild(h),b(k));if("undefined"!==typeof navigator&&navigator.msSaveBlob){var m=a.split(/^data:image\/svg\+xml,/)[1];m=decodeURIComponent(m);navigator.msSaveBlob(new Blob([m]),k);b(k)}n(Error("download error"))})}},{}],833:[function(a,p,l){l.getDelay=function(a){return a._has?a._has("gl3d")||a._has("gl2d")||a._has("mapbox")?500:0:0};l.getRedrawFunc=function(a){var k=a._fullLayout||{};if(k._has&&k._has("polar")||!a.data||!a.data[0]||!a.data[0].r)return function(){(a.calcdata||
[]).forEach(function(a){a[0]&&a[0].t&&a[0].t.cb&&a[0].t.cb()})}}},{}],834:[function(a,p,l){l=a("./helpers");a={getDelay:l.getDelay,getRedrawFunc:l.getRedrawFunc,clone:a("./cloneplot"),toSVG:a("./tosvg"),svgToImg:a("./svgtoimg"),toImage:a("./toimage"),downloadImage:a("./download")};p.exports=a},{"./cloneplot":830,"./download":831,"./helpers":833,"./svgtoimg":835,"./toimage":836,"./tosvg":837}],835:[function(a,p,l){var m=a("../lib"),k=a("events").EventEmitter;p.exports=function(a){var e=a.emitter||
new k,f=new Promise(function(b,h){var k=window.Image,n=a.svg,d=a.format||"png";if(m.isIE()&&"svg"!==d)return k=Error("Sorry IE does not support downloading from canvas. Try {format:'svg'} instead."),h(k),a.promise?f:e.emit("error",k);var g=a.canvas,c=a.scale||1,l=c*(a.width||300),p=c*(a.height||150),q=g.getContext("2d"),w=new k,x="data:image/svg+xml,"+encodeURIComponent(n);g.width=l;g.height=p;w.onload=function(){"svg"!==d&&q.drawImage(w,0,0,l,p);switch(d){case "jpeg":var c=g.toDataURL("image/jpeg");
break;case "png":c=g.toDataURL("image/png");break;case "webp":c=g.toDataURL("image/webp");break;case "svg":c=x;break;default:if(h(Error("Image format is not jpeg, png, svg or webp.")),!a.promise)return e.emit("error","Image format is not jpeg, png, svg or webp.")}b(c);a.promise||e.emit("success",c)};w.onerror=function(b){h(b);if(!a.promise)return e.emit("error",b)};w.src=x});return a.promise?f:e}},{"../lib":700,events:94}],836:[function(a,p,l){var m=a("events").EventEmitter,k=a("../registry"),h=a("../lib"),
e=a("./helpers"),f=a("./cloneplot"),b=a("./tosvg"),n=a("./svgtoimg");p.exports=function(a,l){var d=new m;a=f(a,{format:"png"});var g=a.gd;g.style.position="absolute";g.style.left="-5000px";document.body.appendChild(g);var c=e.getRedrawFunc(g);k.call("plot",g,a.data,a.layout,a.config).then(c).then(function(){var a=e.getDelay(g._fullLayout);setTimeout(function(){var a=b(g),c=document.createElement("canvas");c.id=h.randstr();d=n({format:l.format,width:g._fullLayout.width,height:g._fullLayout.height,
canvas:c,emitter:d,svg:a});d.clean=function(){g&&document.body.removeChild(g)}},a)}).catch(function(a){d.emit("error",a)});return d}},{"../lib":700,"../registry":829,"./cloneplot":830,"./helpers":833,"./svgtoimg":835,"./tosvg":837,events:94}],837:[function(a,p,l){function m(a){var b=k.select("body").append("div").style({display:"none"}).html("");a=a.replace(/(&[^;]*;)/gi,function(a){return"\x26lt;"===a?"\x26#60;":"\x26rt;"===a?"\x26#62;":-1!==a.indexOf("\x3c")||-1!==a.indexOf("\x3e")?"":b.html(a).text()});
b.remove();return a}var k=a("d3"),h=a("../lib"),e=a("../components/drawing"),f=a("../components/color"),b=a("../constants/xmlns_namespaces"),n=/"/g,q=/("TOBESTRIPPED)|(TOBESTRIPPED")/g;p.exports=function(a,d,g){var c=a._fullLayout,l=c._paper,p=c._toppaper,r=c.width,u=c.height,w;l.insert("rect",":first-child").call(e.setRect,0,0,r,u).call(f.fill,c.paper_bgcolor);var x=c._basePlotModules||[];for(w=0;w<x.length;w++){var A=x[w];A.toSVG&&A.toSVG(a)}if(p)for(w=p.node().childNodes,a=Array.prototype.slice.call(w),
w=0;w<a.length;w++)p=a[w],p.childNodes.length&&l.node().appendChild(p);c._draggers&&c._draggers.remove();l.node().style.background="";l.selectAll("text").attr({"data-unformatted":null,"data-math":null}).each(function(){var a=k.select(this);if("hidden"===this.style.visibility||"none"===this.style.display)a.remove();else{a.style({visibility:null,display:null});var b=this.style.fontFamily;b&&-1!==b.indexOf('"')&&a.style("font-family",b.replace(n,"TOBESTRIPPED"))}});l.selectAll(".point, .scatterpts, .legendfill\x3epath, .legendlines\x3epath, .cbfill").each(function(){var a=
k.select(this),b=this.style.fill;b&&-1!==b.indexOf("url(")&&a.style("fill",b.replace(n,"TOBESTRIPPED"));(b=this.style.stroke)&&-1!==b.indexOf("url(")&&a.style("stroke",b.replace(n,"TOBESTRIPPED"))});"pdf"!==d&&"eps"!==d||l.selectAll("#MathJax_SVG_glyphs path").attr("stroke-width",0);l.node().setAttributeNS(b.xmlns,"xmlns",b.svg);l.node().setAttributeNS(b.xmlns,"xmlns:xlink",b.xlink);"svg"===d&&g&&(l.attr("width",g*r),l.attr("height",g*u),l.attr("viewBox","0 0 "+r+" "+u));d=(new window.XMLSerializer).serializeToString(l.node());
d=m(d);d=d.replace(/&(?!\w+;|#[0-9]+;| #x[0-9A-F]+;)/g,"\x26amp;");d=d.replace(q,"'");h.isIE()&&(d=d.replace(/"/gi,"'"),d=d.replace(/(\('#)([^']*)('\))/gi,'("#$2")'),d=d.replace(/(\\')/gi,'"'));return d}},{"../components/color":577,"../components/drawing":598,"../constants/xmlns_namespaces":678,"../lib":700,d3:154}],838:[function(a,p,l){var m=a("../../lib").mergeArray;p.exports=function(a,h){for(var e=0;e<a.length;e++)a[e].i=e;m(h.text,a,"tx");m(h.hovertext,a,"htx");if(h=h.marker)if(m(h.opacity,a,
"mo"),m(h.color,a,"mc"),h=h.line)m(h.color,a,"mlc"),m(h.width,a,"mlw")}},{"../../lib":700}],839:[function(a,p,l){l=a("../scatter/attributes");var m=a("../../components/fx/hovertemplate_attributes"),k=a("../../components/colorscale/attributes"),h=a("../../components/colorbar/attributes"),e=a("../../plots/font_attributes"),f=a("./constants.js");a=a("../../lib/extend").extendFlat;e=e({editType:"calc",arrayOk:!0,colorEditType:"style"});var b=a({},l.marker.line.width,{dflt:0});b=a({width:b,editType:"calc"},
k("marker.line"));k=a({line:b,editType:"calc"},k("marker"),{colorbar:h,opacity:{valType:"number",arrayOk:!0,dflt:1,min:0,max:1,editType:"style"}});p.exports={x:l.x,x0:l.x0,dx:l.dx,y:l.y,y0:l.y0,dy:l.dy,text:l.text,hovertext:l.hovertext,hovertemplate:m({},{keys:f.eventDataKeys}),textposition:{valType:"enumerated",values:["inside","outside","auto","none"],dflt:"none",arrayOk:!0,editType:"calc"},textfont:a({},e,{}),insidetextfont:a({},e,{}),outsidetextfont:a({},e,{}),constraintext:{valType:"enumerated",
values:["inside","outside","both","none"],dflt:"both",editType:"calc"},cliponaxis:a({},l.cliponaxis,{}),orientation:{valType:"enumerated",values:["v","h"],editType:"calc+clearAxisTypes"},base:{valType:"any",dflt:null,arrayOk:!0,editType:"calc"},offset:{valType:"number",dflt:null,arrayOk:!0,editType:"calc"},width:{valType:"number",dflt:null,min:0,arrayOk:!0,editType:"calc"},marker:k,offsetgroup:{valType:"string",dflt:"",editType:"calc"},alignmentgroup:{valType:"string",dflt:"",editType:"calc"},selected:{marker:{opacity:l.selected.marker.opacity,
color:l.selected.marker.color,editType:"style"},textfont:l.selected.textfont,editType:"style"},unselected:{marker:{opacity:l.unselected.marker.opacity,color:l.unselected.marker.color,editType:"style"},textfont:l.unselected.textfont,editType:"style"},r:l.r,t:l.t,_deprecated:{bardir:{valType:"enumerated",editType:"calc",values:["v","h"]}}}},{"../../components/colorbar/attributes":578,"../../components/colorscale/attributes":584,"../../components/fx/hovertemplate_attributes":615,"../../lib/extend":690,
"../../plots/font_attributes":774,"../scatter/attributes":1051,"./constants.js":841}],840:[function(a,p,l){var m=a("../../plots/cartesian/axes"),k=a("../../components/colorscale/helpers").hasColorscale,h=a("../../components/colorscale/calc"),e=a("./arrays_to_calcdata"),f=a("../scatter/calc_selection");p.exports=function(a,n){var b=m.getFromId(a,n.xaxis||"x"),l=m.getFromId(a,n.yaxis||"y");if("h"===n.orientation){var d=b.makeCalcdata(n,"x");b=l.makeCalcdata(n,"y")}else d=l.makeCalcdata(n,"y"),b=b.makeCalcdata(n,
"x");l=Math.min(b.length,d.length);for(var g=Array(l),c=0;c<l;c++)g[c]={p:b[c],s:d[c]},n.ids&&(g[c].id=String(n.ids[c]));k(n,"marker")&&h(a,n,{vals:n.marker.color,containerStr:"marker",cLetter:"c"});k(n,"marker.line")&&h(a,n,{vals:n.marker.line.color,containerStr:"marker.line",cLetter:"c"});e(g,n);f(g,n);return g}},{"../../components/colorscale/calc":585,"../../components/colorscale/helpers":588,"../../plots/cartesian/axes":748,"../scatter/calc_selection":1053,"./arrays_to_calcdata":838}],841:[function(a,
p,l){p.exports={eventDataKeys:[]}},{}],842:[function(a,p,l){function m(a,c,m,l){if(l.length){var p=a._fullLayout.barmode,v;k(a,c,m,l);switch(p){case "overlay":h(a,c,m,l);break;case "group":p=[];var u=[];for(v=0;v<l.length;v++){var y=l[v];var A=y[0].trace;void 0===A.offset?u.push(y):p.push(y)}if(u.length){v=a._fullLayout.barnorm;u=new G(u,{sepNegVal:!1,overlapNoMerge:!v});var B=a._fullLayout;y=B.bargroupgap||0;A=u.minDiff;var D=u.traces,C=D.length,J=u.positions.length!==u.distinctPositions.length,
P=A*(1-B.bargap),z=x(B,c._id)+D[0][0].trace.orientation;B=B._alignmentOpts[z]||{};for(z=0;z<C;z++){var F=D[z],K=F[0].trace,ia=Object.keys((B[K.alignmentgroup]||{}).offsetGroups||{}).length;var S=ia?P/ia:J?P/C:P;var W=S*(1-y);K=ia?((2*K._offsetIndex+1-ia)*S-W)/2:J?((2*z+1-C)*S-W)/2:-W/2;F=F[0].t;F.barwidth=W;F.poffset=K;F.bargroupwidth=P;F.bardelta=A}u.binWidth=D[0][0].t.barwidth/100;f(u);b(a,c,u);n(a,c,u,J);y=u.traces;for(A=0;A<y.length;A++)if(D=y[A],void 0===D[0].trace.base)for(C=new G([D],{sepNegVal:!0,
overlapNoMerge:!0}),J=0;J<D.length;J++)if(P=D[J],P.p!==t&&(B=C.put(P.p,P.b+P.s)))P.b=B;v?(r(a,m,u),d(a,m,u)):q(a,m,u)}p.length&&h(a,c,m,p);break;case "stack":case "relative":p=[];u=[];for(v=0;v<l.length;v++)y=l[v],A=y[0].trace,void 0===A.base?u.push(y):p.push(y);if(u.length){v=u;u=a._fullLayout;y=u.barmode;u=u.barnorm;y=new G(v,{sepNegVal:"relative"===y,overlapNoMerge:!(u||"stack"===y||"relative"===y)});e(a,c,y);A=a._fullLayout.barnorm;D=m._id.charAt(0);C=y.traces;for(J=0;J<C.length;J++){P=C[J];B=
P[0].trace;z=[];for(W=0;W<P.length;W++)F=P[W],F.s!==t&&(K=y.put(F.p,F.b+F.s),ia=K+F.b+F.s,F.b=K,F[D]=ia,A||(z.push(ia),F.hasB&&z.push(K)));A||(B._extremes[m._id]=w.findExtremes(m,z,{tozero:!0,padded:!0}))}for(A=0;A<v.length;A++)for(D=v[A],C=0;C<D.length;C++)J=D[C],J.s!==t&&J.b+J.s===y.get(J.p,J.s)&&(J._outmost=!0);u&&d(a,m,y)}p.length&&h(a,c,m,p)}g(l,c)}}function k(a,b,d,e){for(a=0;a<e.length;a++){b=e[a];var f=b[0].trace;var g=f.base,h="h"===f.orientation?f.xcalendar:f.ycalendar,k="category"===d.type||
"multicategory"===d.type?function(){return null}:d.d2c;if(v(g)){for(f=0;f<Math.min(g.length,b.length);f++){var n=k(g[f],0,h);c(n)?(b[f].b=+n,b[f].hasB=1):b[f].b=0}for(;f<b.length;f++)b[f].b=0}else for(n=k(g,0,h),n=(g=c(n))?n:0,f=0;f<b.length;f++)b[f].b=n,g&&(b[f].hasB=1)}}function h(a,b,c,f){for(var g=a._fullLayout.barnorm,h=0;h<f.length;h++){var k=new G([f[h]],{sepNegVal:!1,overlapNoMerge:!g});e(a,b,k);g?(r(a,c,k),d(a,c,k)):q(a,c,k)}}function e(a,c,d){var e=a._fullLayout,g=d.minDiff,h=d.traces,k=
g*(1-e.bargap);e=k*(1-(e.bargroupgap||0));for(var m=-e/2,l=0;l<h.length;l++){var p=h[l][0].t;p.barwidth=e;p.poffset=m;p.bargroupwidth=k;p.bardelta=g}d.binWidth=h[0][0].t.barwidth/100;f(d);b(a,c,d);n(a,c,d)}function f(a){a=a.traces;var b,d;for(b=0;b<a.length;b++){var e=a[b],f=e[0],g=f.trace;f=f.t;var h=g._offset||g.offset,k=f.poffset;if(v(h)){var n=Array.prototype.slice.call(h,0,e.length);for(d=0;d<n.length;d++)c(n[d])||(n[d]=k);for(d=n.length;d<e.length;d++)n.push(k);f.poffset=n}else void 0!==h&&
(f.poffset=h);d=g._width||g.width;g=f.barwidth;if(v(d)){var m=Array.prototype.slice.call(d,0,e.length);for(d=0;d<m.length;d++)c(m[d])||(m[d]=g);for(d=m.length;d<e.length;d++)m.push(g);f.barwidth=m;if(void 0===h){n=[];for(d=0;d<e.length;d++)n.push(k+(g-m[d])/2);f.poffset=n}}else void 0!==d&&(f.barwidth=d,void 0===h&&(f.poffset=k+(g-d)/2))}}function b(a,b,c){a=c.traces;b=b._id.charAt(0);for(c=0;c<a.length;c++){var d=a[c],e=d[0].t,f=e.poffset,g=Array.isArray(f);e=e.barwidth;for(var h=Array.isArray(e),
k=0;k<d.length;k++){var n=d[k],m=n.w=h?e[k]:e;n[b]=n.p+(g?f[k]:f)+m/2}}}function n(a,b,c,d){a=c.traces;var e=c.minDiff/2;w.minDtick(b,c.minDiff,c.distinctPositions[0],d);for(c=0;c<a.length;c++){d=a[c];var f=d[0],g=f.trace,h=[],k;for(k=0;k<d.length;k++){var n=d[k];var m=n.p-e;n=n.p+e;h.push(m,n)}if(g.width||g.offset){m=f.t;f=m.poffset;var l=m.barwidth,p=Array.isArray(f),t=Array.isArray(l);for(k=0;k<d.length;k++){n=d[k];var r=t?l[k]:l;m=n.p+(p?f[k]:f);n=m+r;h.push(m,n)}}g._extremes[b._id]=w.findExtremes(b,
h,{padded:!1})}}function q(a,b,c){a=c.traces;c=b._id.charAt(0);for(var d=0;d<a.length;d++){for(var e=a[d],f=e[0].trace,g=[],h=!0,k=0;k<e.length;k++){var n=e[k],m=n.b,l=m+n.s;n[c]=l;g.push(l);n.hasB&&g.push(m);n.hasB&&0<n.b&&0<n.s||(h=!1)}f._extremes[b._id]=w.findExtremes(b,g,{tozero:!h,padded:!0})}}function r(a,b,c){a=c.traces;for(b=0;b<a.length;b++)for(var d=a[b],e=0;e<d.length;e++){var f=d[e];f.s!==t&&c.put(f.p,f.b+f.s)}}function d(a,b,d){function e(a){return c(b.c2l(a))&&(a<n-k||a>m+k||!c(n))}
var f=a._fullLayout;a=d.traces;var g=b._id.charAt(0),h="fraction"===f.barnorm?1:100,k=h/1E9,n=b.l2c(b.c2l(0)),m="stack"===f.barmode?h:n;for(f=0;f<a.length;f++){for(var l=a[f],p=l[0].trace,r=[],q=!0,v=!1,u=0;u<l.length;u++){var y=l[u];if(y.s!==t){var x=Math.abs(h/d.get(y.p,y.s));y.b*=x;y.s*=x;x=y.b;var A=x+y.s;y[g]=A;r.push(A);v=v||e(A);y.hasB&&(r.push(x),v=v||e(x));y.hasB&&0<y.b&&0<y.s||(q=!1)}}p._extremes[b._id]=w.findExtremes(b,r,{tozero:!q,padded:v})}}function g(a,b){b=b._id.charAt(0);var d={},
e,f,g=Infinity,h=-Infinity;for(e=0;e<a.length;e++){var k=a[e];for(f=0;f<k.length;f++){var n=k[f].p;c(n)&&(g=Math.min(g,n),h=Math.max(h,n))}}var m=1E4/(h-g);h=d.round=function(a){return String(Math.round(m*(a-g)))};for(e=0;e<a.length;e++){k=a[e];k[0].t.extents=d;n=k[0].t.poffset;var l=Array.isArray(n);for(f=0;f<k.length;f++){var p=k[f],t=p[b]-p.w/2;if(c(t)){var r=p[b]+p.w/2,q=h(p.p);d[q]=d[q]?[Math.min(t,d[q][0]),Math.max(r,d[q][1])]:[t,r]}p.p0=p.p+(l?n[f]:n);p.p1=p.p0+p.w;p.s0=p.b;p.s1=p.s0+p.s}}}
var c=a("fast-isnumeric"),v=a("../../lib").isArrayOrTypedArray,t=a("../../constants/numerical").BADNUM,y=a("../../registry"),w=a("../../plots/cartesian/axes"),x=a("../../plots/cartesian/axis_ids").getAxisGroup,G=a("./sieve.js");p.exports={crossTraceCalc:function(a,b){var c=b.xaxis;b=b.yaxis;for(var d=a._fullData,e=a.calcdata,f=[],g=[],h=0;h<d.length;h++){var k=d[h];!0===k.visible&&y.traceIs(k,"bar")&&k.xaxis===c._id&&k.yaxis===b._id&&("h"===k.orientation?f.push(e[h]):g.push(e[h]))}m(a,c,b,g);m(a,
b,c,f)},setGroupPositions:m}},{"../../constants/numerical":677,"../../lib":700,"../../plots/cartesian/axes":748,"../../plots/cartesian/axis_ids":751,"../../registry":829,"./sieve.js":851,"fast-isnumeric":221}],843:[function(a,p,l){function m(a,b,d,e){a=b.orientation;a=q(d,b[{v:"x",h:"y"}[a]+"axis"])+a;var c=d._alignmentOpts||{};d=e("alignmentgroup");var f=c[a];f||(f=c[a]={});(a=f[d])?a.traces.push(b):a=f[d]={traces:[b],alignmentIndex:Object.keys(f).length,offsetGroups:{}};e=e("offsetgroup");a=a.offsetGroups;
d=a[e];e&&(d||(d=a[e]={offsetIndex:Object.keys(a).length}),b._offsetIndex=d.offsetIndex)}function k(a,b,e,f,k){var c=f("textposition"),g=Array.isArray(c)||"auto"===c;b=g||"outside"===c;if(g||"inside"===c||b)e=d(f,"textfont",e.font),c=h.extendFlat({},e),a.textfont&&a.textfont.color||delete c.color,d(f,"insidetextfont",c),b&&d(f,"outsidetextfont",e),f("constraintext"),k&&(f("selected.textfont.color"),f("unselected.textfont.color")),f("cliponaxis")}var h=a("../../lib"),e=a("../../components/color"),
f=a("../../registry"),b=a("../scatter/xy_defaults"),n=a("./style_defaults"),q=a("../../plots/cartesian/axis_ids").getAxisGroup,r=a("./attributes"),d=h.coerceFont;p.exports={supplyDefaults:function(a,c,d,m){function g(b,d){return h.coerce(a,c,r,b,d)}b(a,c,m,g)?(g("orientation",c.x&&!c.y?"h":"v"),g("base"),g("offset"),g("width"),g("text"),g("hovertext"),g("hovertemplate"),k(a,c,m,g,!0),n(a,c,g,d,m),d=(c.marker.line||{}).color,m=f.getComponentMethod("errorbars","supplyDefaults"),m(a,c,d||e.defaultLine,
{axis:"y"}),m(a,c,d||e.defaultLine,{axis:"x",inherit:"y"}),h.coerceSelectionMarkerOpacity(c,g)):c.visible=!1},crossTraceDefaults:function(a,b){function c(a){return h.coerce(e._input,e,r,a)}if("group"===b.barmode)for(var d=0;d<a.length;d++){var e=a[d];if("bar"===e.type){var f=e._input;m(f,e,b,c)}}},handleGroupingDefaults:m,handleText:k}},{"../../components/color":577,"../../lib":700,"../../plots/cartesian/axis_ids":751,"../../registry":829,"../scatter/xy_defaults":1077,"./attributes":839,"./style_defaults":853}],
844:[function(a,p,l){var m=a("fast-isnumeric"),k=a("tinycolor2");l.coerceString=function(a,e,f){if("string"===typeof e){if(e||!a.noBlank)return e}else if("number"===typeof e&&!a.strict)return String(e);return void 0!==f?f:a.dflt};l.coerceNumber=function(a,e,f){if(m(e)){e=+e;var b=a.min,h=a.max;if(!(void 0!==b&&e<b||void 0!==h&&e>h))return e}return void 0!==f?f:a.dflt};l.coerceColor=function(a,e,f){return k(e).isValid()?e:void 0!==f?f:a.dflt};l.coerceEnumerated=function(a,e,f){a.coerceNumber&&(e=+e);
return-1!==a.values.indexOf(e)?e:void 0!==f?f:a.dflt};l.getValue=function(a,e){var f;Array.isArray(a)?e<a.length&&(f=a[e]):f=a;return f}},{"fast-isnumeric":221,tinycolor2:521}],845:[function(a,p,l){function m(a,e,f,d){function g(a){return a[O]-a.w/2}function c(a){return a[O]+a.w/2}function k(a,b){return h.inbox(a-H,b-H,u+Math.min(1,Math.abs(b-a)/L)-1)}function n(a){return k(x(a),E(a))}function m(a){return h.inbox(a.b-z,a[I]-z,u+(a[I]-z)/(a[I]-a.b)-1)}var l=a.cd,p=l[0].trace,r=l[0].t,q="closest"===
d,u=a.maxHoverDistance,w=a.maxSpikeDistance,x=q?g:function(a){return Math.min(g(a),a.p-r.bardelta/2)},E=q?c:function(a){return Math.max(c(a),a.p+r.bardelta/2)};if("h"===p.orientation){var H=f;var z=e;var O="y";var I="x";var Q=m;var N=n}else H=e,z=f,O="x",I="y",N=m,Q=n;e=a[O+"a"];f=a[I+"a"];var L=Math.abs(e.r2c(e.range[1])-e.r2c(e.range[0]));d=h.getDistanceFunction(d,Q,N,function(a){return(Q(a)+N(a))/2});h.getClosest(l,d,a);if(!1!==a.index)return q||(x=function(a){return Math.min(g(a),a.p-r.bargroupwidth/
2)},E=function(a){return Math.max(c(a),a.p+r.bargroupwidth/2)}),l=l[a.index],d=p.base?l.b+l.s:l.s,a[I+"0"]=a[I+"1"]=f.c2p(l[I],!0),a[I+"LabelVal"]=d,f=r.extents[r.extents.round(l.p)],a[O+"0"]=e.c2p(q?x(l):f[0],!0),a[O+"1"]=e.c2p(q?E(l):f[1],!0),a[O+"LabelVal"]=l.p,a.spikeDistance=(m(l)+function(a){return k(g(a),c(a))}(l))/2+w-u,a[O+"Spike"]=e.c2p(l.p,!0),b(l,p,a),a.hovertemplate=p.hovertemplate,a}function k(a,b){var e=b.mcc||a.marker.color,d=b.mlcc||a.marker.line.color;a=b.mlw||a.marker.line.width;
if(f.opacity(e))return e;if(f.opacity(d)&&a)return d}var h=a("../../components/fx"),e=a("../../registry"),f=a("../../components/color"),b=a("../scatter/fill_hover_text");p.exports={hoverPoints:function(a,b,f,d){if(a=m(a,b,f,d))return f=a.cd,b=f[0].trace,f=f[a.index],a.color=k(b,f),e.getComponentMethod("errorbars","hoverInfo")(f,b,a),[a]},hoverOnBars:m,getTraceColor:k}},{"../../components/color":577,"../../components/fx":616,"../../registry":829,"../scatter/fill_hover_text":1059}],846:[function(a,
p,l){l={};l.attributes=a("./attributes");l.layoutAttributes=a("./layout_attributes");l.supplyDefaults=a("./defaults").supplyDefaults;l.crossTraceDefaults=a("./defaults").crossTraceDefaults;l.supplyLayoutDefaults=a("./layout_defaults");l.calc=a("./calc");l.crossTraceCalc=a("./cross_trace_calc").crossTraceCalc;l.colorbar=a("../scatter/marker_colorbar");l.arraysToCalcdata=a("./arrays_to_calcdata");l.plot=a("./plot");l.style=a("./style").style;l.styleOnSelect=a("./style").styleOnSelect;l.hoverPoints=
a("./hover").hoverPoints;l.selectPoints=a("./select");l.moduleType="trace";l.name="bar";l.basePlotModule=a("../../plots/cartesian");l.categories="cartesian svg bar oriented errorBarsOK showLegend zoomScale".split(" ");l.meta={};p.exports=l},{"../../plots/cartesian":759,"../scatter/marker_colorbar":1069,"./arrays_to_calcdata":838,"./attributes":839,"./calc":840,"./cross_trace_calc":842,"./defaults":843,"./hover":845,"./layout_attributes":847,"./layout_defaults":848,"./plot":849,"./select":850,"./style":852}],
847:[function(a,p,l){p.exports={barmode:{valType:"enumerated",values:["stack","group","overlay","relative"],dflt:"group",editType:"calc"},barnorm:{valType:"enumerated",values:["","fraction","percent"],dflt:"",editType:"calc"},bargap:{valType:"number",min:0,max:1,editType:"calc"},bargroupgap:{valType:"number",min:0,max:1,dflt:0,editType:"calc"}}},{}],848:[function(a,p,l){var m=a("../../registry"),k=a("../../plots/cartesian/axes"),h=a("../../lib"),e=a("./layout_attributes");p.exports=function(a,b,n){for(var f=
!1,l=!1,d=!1,g={},c=h.coerce(a,b,e,"barmode",void 0),p=0;p<n.length;p++){var t=n[p];if(m.traceIs(t,"bar")&&t.visible){f=!0;if("group"===c){var q=t.xaxis+t.yaxis;g[q]&&(d=!0);g[q]=!0}t.visible&&"histogram"===t.type&&"category"!==k.getFromId({_fullLayout:b},t["v"===t.orientation?"xaxis":"yaxis"]).type&&(l=!0)}}f?("overlay"!==c&&h.coerce(a,b,e,"barnorm",void 0),h.coerce(a,b,e,"bargap",l&&!d?0:.2),h.coerce(a,b,e,"bargroupgap",void 0)):delete b.barmode}},{"../../lib":700,"../../plots/cartesian/axes":748,
"../../registry":829,"./layout_attributes":847}],849:[function(a,p,l){function m(a,e,g,n,m,l,p,t){function q(b,e,f){return r.ensureSingle(b,"text").text(e).attr({"class":"bartext bartext-"+A,transform:"","text-anchor":"middle","data-notex":1}).call(c.font,f).call(d.convertToTspans,a)}var v=a._fullLayout,u=g[0].trace,y=u.orientation,w=f(u,n);var A=b(u,n);var B=v[("waterfall"===u.type?"waterfall":"bar")+"mode"],D=g[n];B=!("stack"===B||"relative"===B)||D._outmost;if(!w||"none"===A||D.isBlank&&("auto"===
A||"inside"===A))e.select("text").remove();else{v=v.font;g=x.getBarColor(g[n],u);g=x.getInsideTextFont(u,n,v,g);n=x.getOutsideTextFont(u,n,v);v=Math.abs(l-m)-6;var C=Math.abs(t-p)-6;"outside"===A&&(B||D.hasB||(A="inside"));if("auto"===A)if(B){A="inside";var G=q(e,w,g);var E=c.bBox(G.node());D=E.width;B=E.height;0<D&&0<B&&(D<=v&&B<=C||D<=C&&B<=v||("h"===y?v>=C/B*D:C>=v/D*B))?A="inside":(A="outside",G.remove(),G=null)}else A="inside";if(!G&&(G=q(e,w,"outside"===A?n:g),E=c.bBox(G.node()),D=E.width,B=
E.height,0>=D||0>=B)){G.remove();return}"outside"===A?(e="both"===u.constraintext||"outside"===u.constraintext,m=h(m,l,p,t,E,y,e)):(e="both"===u.constraintext||"inside"===u.constraintext,m=k(m,l,p,t,E,y,e));G.attr("transform",m)}}function k(a,b,c,d,f,g,h){var k=f.width,n=f.height,m=(f.left+f.right)/2;f=(f.top+f.bottom)/2;var l=Math.abs(b-a),p=Math.abs(d-c);if(6<l&&6<p){var t=3;l-=2*t;p-=2*t}else t=0;if(k<=l&&n<=p){var r=!1;h=1}else k<=p&&n<=l?(r=!0,h=1):k<n===l<p?(r=!1,h=h?Math.min(l/k,p/n):1):(r=
!0,h=h?Math.min(p/k,l/n):1);r&&(r=90);r?(l=h*n,k*=h):(l=h*k,k=h*n);"h"===g?(a=b<a?b+t+l/2:b-t-l/2,c=(c+d)/2):d>c?(a=(a+b)/2,c=d-t-k/2):(a=(a+b)/2,c=d+t+k/2);return e(m,f,a,c,h,r)}function h(a,b,c,d,f,g,h){var k="h"===g?Math.abs(d-c):Math.abs(b-a),n;6<k&&(n=3);var m=1;h&&(m="h"===g?Math.min(1,k/f.height):Math.min(1,k/f.width));h=(f.left+f.right)/2;k=(f.top+f.bottom)/2;var l=m*f.width;f=m*f.height;"h"===g?(a=b<a?b-n-l/2:b+n+l/2,c=(c+d)/2):d>c?(a=(a+b)/2,c=d+n+f/2):(a=(a+b)/2,c=d-n-f/2);return e(h,k,
a,c,m,!1)}function e(a,b,c,d,e,f){if(1>e)var g="scale("+e+") ";else e=1,g="";return"translate("+(c-e*a)+" "+(d-e*b)+")"+g+(f?"rotate("+f+" "+a+" "+b+") ":"")}function f(a,b){a=w.getValue(a.text,b);return w.coerceString(t,a)}function b(a,b){a=w.getValue(a.textposition,b);return w.coerceEnumerated(y,a)}var n=a("d3"),q=a("fast-isnumeric"),r=a("../../lib"),d=a("../../lib/svg_text_utils"),g=a("../../components/color"),c=a("../../components/drawing"),v=a("../../registry");l=a("./attributes");var t=l.text,
y=l.textposition,w=a("./helpers"),x=a("./style");p.exports=function(a,b,d,e){var f=b.xaxis,h=b.yaxis,k=a._fullLayout;d=r.makeTraceGroups(e,d,"trace bars").each(function(d){var e=n.select(this),l=d[0],p=l.trace,t,v=0;"waterfall"===p.type&&p.connector.visible&&"between"===p.connector.mode&&(v=p.connector.line.width/2);var u="h"===p.orientation;b.isRangePlot||(l.node3=e);var y=r.ensureSingle(e,"g","points").selectAll("g.point").data(r.identity);y.enter().append("g").classed("point",!0);y.exit().remove();
y.each(function(e,l){function y(a){return 0===L&&0===z?n.round(Math.round(a)-J,2):a}function w(a,b){return 2<=Math.abs(a-b)?y(a):a>b?Math.ceil(a):Math.floor(a)}var x=n.select(this);if(u){var A=h.c2p(e.p0,!0);var B=h.c2p(e.p1,!0);var D=f.c2p(e.s0,!0);var C=f.c2p(e.s1,!0);e.ct=[C,(A+B)/2]}else D=f.c2p(e.p0,!0),C=f.c2p(e.p1,!0),A=h.c2p(e.s0,!0),B=h.c2p(e.s1,!0),e.ct=[(D+C)/2,B];var G=e.isBlank=!q(D)||!q(C)||!q(A)||!q(B)||D===C||A===B;v&&(u?(t=C<D?-1:1,D-=t*v,C+=t*v):(t=B<A?-1:1,A-=t*v,B+=t*v));if("waterfall"===
p.type){var E=p[e.dir].marker;var H=E.line.width;E=E.color;var I="waterfall"}else H=(e.mlw+1||p.marker.line.width+1||(e.trace?e.trace.marker.line.width:0)+1)-1,E=e.mc||p.marker.color,I="bar";var J=n.round(H/2%1,2),L=k[I+"gap"],z=k[I+"groupgap"];a._context.staticPlot||(H=1>g.opacity(E)||.01<H?y:w,D=H(D,C),C=H(C,D),A=H(A,B),B=H(B,A));r.ensureSingle(x,"path").style("vector-effect","non-scaling-stroke").attr("d",G?"M0,0Z":"M"+D+","+A+"V"+B+"H"+C+"V"+A+"Z").call(c.setClipUrl,b.layerClipId,a);m(a,x,d,l,
D,C,A,B);b.layerClipId&&c.hideOutsideRangePoint(e,x.select("text"),f,h,p.xcalendar,p.ycalendar)});c.setClipUrl(e,!1===l.trace.cliponaxis?null:b.layerClipId,a)});v.getComponentMethod("errorbars","plot")(a,d,b)}},{"../../components/color":577,"../../components/drawing":598,"../../lib":700,"../../lib/svg_text_utils":724,"../../registry":829,"./attributes":839,"./helpers":844,"./style":852,d3:154,"fast-isnumeric":221}],850:[function(a,p,l){p.exports=function(a,k){var h=a.cd,e=a.xaxis,f=a.yaxis,b=[],n;
if(!1===k)for(n=0;n<h.length;n++)h[n].selected=0;else for(n=0;n<h.length;n++){var m=h[n];k.contains(m.ct,!1,n,a)?(b.push({pointNumber:n,x:e.c2d(m.x),y:f.c2d(m.y)}),m.selected=1):m.selected=0}return b}},{}],851:[function(a,p,l){function m(a,f){this.traces=a;this.sepNegVal=f.sepNegVal;this.overlapNoMerge=f.overlapNoMerge;f=Infinity;for(var b=[],e=0;e<a.length;e++){for(var m=a[e],l=0;l<m.length;l++){var d=m[l];d.p!==h&&b.push(d.p)}m[0]&&m[0].width1&&(f=Math.min(m[0].width1,f))}this.positions=b;a=k.distinctVals(b);
this.distinctPositions=a.vals;this.binWidth=this.minDiff=1===a.vals.length&&Infinity!==f?f:Math.min(a.minDiff,f);this.bins={}}p.exports=m;var k=a("../../lib"),h=a("../../constants/numerical").BADNUM;m.prototype.put=function(a,f){a=this.getLabel(a,f);var b=this.bins[a]||0;this.bins[a]=b+f;return b};m.prototype.get=function(a,f){a=this.getLabel(a,f);return this.bins[a]||0};m.prototype.getLabel=function(a,f){return(0>f&&this.sepNegVal?"v":"^")+(this.overlapNoMerge?a:Math.round(a/this.binWidth))}},{"../../constants/numerical":677,
"../../lib":700}],852:[function(a,p,l){function m(a,b,c){a.selectAll("text").each(function(a){var e=q.select(this);a=h(e,a,b,c);d.font(e,a)})}function k(a,b,c){a.each(function(a){var e=q.select(this);if(a.selected){a=g.extendFlat({},h(e,a,b,c));var f=b.selected.textfont&&b.selected.textfont.color;f&&(a.color=f);d.font(e,a)}else d.selectedTextStyle(e,b)})}function h(a,b,c,d){d=d._fullLayout.font;var g=c.textfont;a.classed("bartext-inside")?(a=n(b,c),g=e(c,b.i,d,a)):a.classed("bartext-outside")&&(g=
f(c,b.i,d));return g}function e(a,c,d,e){d=b(v,a.textfont,c,d);if(void 0===a._input.textfont||void 0===a._input.textfont.color||Array.isArray(a.textfont.color)&&void 0===a.textfont.color[c])d={color:r.contrast(e),family:d.family,size:d.size};return b(t,a.insidetextfont,c,d)}function f(a,c,d){d=b(v,a.textfont,c,d);return b(y,a.outsidetextfont,c,d)}function b(a,b,c,d){b=b||{};var e=w.getValue(b.family,c),f=w.getValue(b.size,c);b=w.getValue(b.color,c);return{family:w.coerceString(a.family,e,d.family),
size:w.coerceNumber(a.size,f,d.size),color:w.coerceColor(a.color,b,d.color)}}function n(a,b){return"waterfall"===b.type?b[a.dir].marker.color:a.mc||b.marker.color}var q=a("d3"),r=a("../../components/color"),d=a("../../components/drawing"),g=a("../../lib"),c=a("../../registry");l=a("./attributes");var v=l.textfont,t=l.insidetextfont,y=l.outsidetextfont,w=a("./helpers");p.exports={style:function(a,b){b=b?b[0].node3:q.select(a).selectAll("g.barlayer").selectAll("g.trace");var e=b.size(),f=a._fullLayout;
b.style("opacity",function(a){return a[0].trace.opacity}).each(function(a){("stack"===f.barmode&&1<e||0===f.bargap&&0===f.bargroupgap&&!a[0].trace.marker.line.width)&&q.select(this).attr("shape-rendering","crispEdges")});b.selectAll("g.points").each(function(b){var c=q.select(this);b=b[0].trace;d.pointStyle(c.selectAll("path"),b,a);m(c,b,a)});c.getComponentMethod("errorbars","style")(b)},styleTextPoints:m,styleOnSelect:function(a,b){var c=b[0].node3;b=b[0].trace;b.selectedpoints?(d.selectedPointStyle(c.selectAll("path"),
b),k(c.selectAll("text"),b,a)):(d.pointStyle(c.selectAll("path"),b,a),m(c,b,a))},getInsideTextFont:e,getOutsideTextFont:f,getBarColor:n}},{"../../components/color":577,"../../components/drawing":598,"../../lib":700,"../../registry":829,"./attributes":839,"./helpers":844,d3:154}],853:[function(a,p,l){var m=a("../../components/color"),k=a("../../components/colorscale/helpers").hasColorscale,h=a("../../components/colorscale/defaults");p.exports=function(a,f,b,n,l){b("marker.color",n);k(a,"marker")&&
h(a,f,l,b,{prefix:"marker.",cLetter:"c"});b("marker.line.color",m.defaultLine);k(a,"marker.line")&&h(a,f,l,b,{prefix:"marker.line.",cLetter:"c"});b("marker.line.width");b("marker.opacity");b("selected.marker.color");b("unselected.marker.color")}},{"../../components/color":577,"../../components/colorscale/defaults":587,"../../components/colorscale/helpers":588}],854:[function(a,p,l){l=a("../../components/fx/hovertemplate_attributes");var m=a("../../lib/extend").extendFlat,k=a("../scatterpolar/attributes");
a=a("../bar/attributes");p.exports={r:k.r,theta:k.theta,r0:k.r0,dr:k.dr,theta0:k.theta0,dtheta:k.dtheta,thetaunit:k.thetaunit,base:m({},a.base,{}),offset:m({},a.offset,{}),width:m({},a.width,{}),text:m({},a.text,{}),hovertext:m({},a.hovertext,{}),marker:a.marker,hoverinfo:k.hoverinfo,hovertemplate:l(),selected:a.selected,unselected:a.unselected}},{"../../components/fx/hovertemplate_attributes":615,"../../lib/extend":690,"../bar/attributes":839,"../scatterpolar/attributes":1113}],855:[function(a,p,
l){var m=a("../../components/colorscale/helpers").hasColorscale,k=a("../../components/colorscale/calc"),h=a("../bar/arrays_to_calcdata"),e=a("../bar/cross_trace_calc").setGroupPositions,f=a("../scatter/calc_selection"),b=a("../../registry").traceIs,n=a("../../lib").extendFlat;p.exports={calc:function(a,b){function d(a){var c=b[a];void 0!==c&&(b["_"+a]=Array.isArray(c)?n.makeCalcdata(b,a):n.d2c(c,b.thetaunit))}var e=a._fullLayout,c=b.subplot,n=e[c].angularaxis;e=e[c].radialaxis.makeCalcdata(b,"r");
c=n.makeCalcdata(b,"theta");for(var l=b._length,p=Array(l),r=0;r<l;r++)p[r]={p:c[r],s:e[r]};"linear"===n.type&&(d("width"),d("offset"));m(b,"marker")&&k(a,b,{vals:b.marker.color,containerStr:"marker",cLetter:"c"});m(b,"marker.line")&&k(a,b,{vals:b.marker.line.color,containerStr:"marker.line",cLetter:"c"});h(p,b);f(p,b);return p},crossTraceCalc:function(a,f,d){var g=a.calcdata;a=[];for(var c=0;c<g.length;c++){var h=g[c],k=h[0].trace;!0===k.visible&&b(k,"bar")&&k.subplot===d&&a.push(h)}d=n({},f.radialaxis,
{_id:"x"});e({_fullLayout:f},f.angularaxis,d,a)}}},{"../../components/colorscale/calc":585,"../../components/colorscale/helpers":588,"../../lib":700,"../../registry":829,"../bar/arrays_to_calcdata":838,"../bar/cross_trace_calc":842,"../scatter/calc_selection":1053}],856:[function(a,p,l){var m=a("../../lib"),k=a("../scatterpolar/defaults").handleRThetaDefaults,h=a("../bar/style_defaults"),e=a("./attributes");p.exports=function(a,b,n,l){function f(d,f){return m.coerce(a,b,e,d,f)}k(a,b,l,f)?(f("thetaunit"),
f("base"),f("offset"),f("width"),f("text"),f("hovertext"),f("hovertemplate"),h(a,b,f,n,l),m.coerceSelectionMarkerOpacity(b,f)):b.visible=!1}},{"../../lib":700,"../bar/style_defaults":853,"../scatterpolar/defaults":1115,"./attributes":854}],857:[function(a,p,l){var m=a("../../components/fx"),k=a("../../lib"),h=a("../bar/hover").getTraceColor,e=a("../scatter/fill_hover_text"),f=a("../scatterpolar/hover").makeHoverPointText,b=a("../../plots/polar/helpers").isPtInsidePolygon;p.exports=function(a,l,p){var d=
a.cd,g=d[0].trace,c=a.subplot,n=c.radialAxis,t=c.vangles,r=t?b:k.isPtInsideSector,q=a.maxHoverDistance,u=c.angularAxis._period||2*Math.PI,w=Math.abs(n.g2p(Math.sqrt(l*l+p*p))),x=Math.atan2(p,l);n.range[0]>n.range[1]&&(x+=Math.PI);m.getClosest(d,function(a){return r(w,x,[a.rp0,a.rp1],[a.thetag0,a.thetag1],t)?q+Math.min(1,Math.abs(a.thetag1-a.thetag0)/u)-1+(a.rp1-w)/(a.rp1-a.rp0)-1:Infinity},a);if(!1!==a.index)return l=d[a.index],a.x0=a.x1=l.ct[0],a.y0=a.y1=l.ct[1],p=k.extendFlat({},l,{r:l.s,theta:l.p}),
e(l,g,a),f(p,g,c,a),a.hovertemplate=g.hovertemplate,a.color=h(g,l),a.xLabelVal=a.yLabelVal=void 0,0>l.s&&(a.idealAlign="left"),[a]}},{"../../components/fx":616,"../../lib":700,"../../plots/polar/helpers":812,"../bar/hover":845,"../scatter/fill_hover_text":1059,"../scatterpolar/hover":1116}],858:[function(a,p,l){p.exports={moduleType:"trace",name:"barpolar",basePlotModule:a("../../plots/polar"),categories:["polar","bar","showLegend"],attributes:a("./attributes"),layoutAttributes:a("./layout_attributes"),
supplyDefaults:a("./defaults"),supplyLayoutDefaults:a("./layout_defaults"),calc:a("./calc").calc,crossTraceCalc:a("./calc").crossTraceCalc,plot:a("./plot"),colorbar:a("../scatter/marker_colorbar"),style:a("../bar/style").style,hoverPoints:a("./hover"),selectPoints:a("../bar/select"),meta:{}}},{"../../plots/polar":813,"../bar/select":850,"../bar/style":852,"../scatter/marker_colorbar":1069,"./attributes":854,"./calc":855,"./defaults":856,"./hover":857,"./layout_attributes":859,"./layout_defaults":860,
"./plot":861}],859:[function(a,p,l){p.exports={barmode:{valType:"enumerated",values:["stack","overlay"],dflt:"stack",editType:"calc"},bargap:{valType:"number",dflt:.1,min:0,max:1,editType:"calc"}}},{}],860:[function(a,p,l){var m=a("../../lib"),k=a("./layout_attributes");p.exports=function(a,e,f){for(var b={},h,l=0;l<f.length;l++)h=f[l],"barpolar"===h.type&&!0===h.visible&&(h=h.subplot,b[h]||(m.coerce(a[h]||{},e[h],k,"barmode",void 0),m.coerce(a[h]||{},e[h],k,"bargap",void 0),b[h]=1))}},{"../../lib":700,
"./layout_attributes":859}],861:[function(a,p,l){function m(a){var f=a.cxx,h=a.cyy;return a.vangles?function(d,g,c,k){if(0<e.angleDelta(c,k)){var n=c;c=k}else n=k;k=b.findEnclosingVertexAngles(n,a.vangles)[0];var m=b.findEnclosingVertexAngles(c,a.vangles)[1];return b.pathPolygonAnnulus(d,g,n,c,[k,(n+c)/2,m],f,h)}:function(a,b,c,k){return e.pathAnnulus(a,b,c,k,f,h)}}var k=a("d3"),h=a("fast-isnumeric"),e=a("../../lib"),f=a("../../components/drawing"),b=a("../../plots/polar/helpers");p.exports=function(a,
b,l){var d=b.xaxis,g=b.yaxis,c=b.radialAxis,n=b.angularAxis,p=m(b),r=b.layers.frontplot.select("g.barlayer");e.makeTraceGroups(r,l,"trace bars").each(function(m){m=m[0].node3=k.select(this);var l=e.ensureSingle(m,"g","points").selectAll("g.point").data(e.identity);l.enter().append("g").style("vector-effect","non-scaling-stroke").style("stroke-miterlimit",2).classed("point",!0);l.exit().remove();l.each(function(a){var b=k.select(this),f=a.rp0=c.c2p(a.s0),m=a.rp1=c.c2p(a.s1),l=a.thetag0=n.c2g(a.p0),
t=a.thetag1=n.c2g(a.p1);if(h(f)&&h(m)&&h(l)&&h(t)&&f!==m&&l!==t){var r=c.c2g(a.s1),q=(l+t)/2;a.ct=[d.c2p(r*Math.cos(q)),g.c2p(r*Math.sin(q))];a=p(f,m,l,t)}else a="M0,0Z";e.ensureSingle(b,"path").attr("d",a)});f.setClipUrl(m,b._hasClipOnAxisFalse?b.clipIds.forTraces:null,a)})}},{"../../components/drawing":598,"../../lib":700,"../../plots/polar/helpers":812,d3:154,"fast-isnumeric":221}],862:[function(a,p,l){l=a("../scatter/attributes");var m=a("../bar/attributes"),k=a("../../components/color/attributes"),
h=a("../../components/fx/hovertemplate_attributes");a=a("../../lib/extend").extendFlat;var e=l.marker,f=e.line;p.exports={y:{valType:"data_array",editType:"calc+clearAxisTypes"},x:{valType:"data_array",editType:"calc+clearAxisTypes"},x0:{valType:"any",editType:"calc+clearAxisTypes"},y0:{valType:"any",editType:"calc+clearAxisTypes"},name:{valType:"string",editType:"calc+clearAxisTypes"},text:a({},l.text,{}),hovertext:a({},l.hovertext,{}),hovertemplate:h({}),whiskerwidth:{valType:"number",min:0,max:1,
dflt:.5,editType:"calc"},notched:{valType:"boolean",editType:"calc"},notchwidth:{valType:"number",min:0,max:.5,dflt:.25,editType:"calc"},boxpoints:{valType:"enumerated",values:["all","outliers","suspectedoutliers",!1],dflt:"outliers",editType:"calc"},boxmean:{valType:"enumerated",values:[!0,"sd",!1],dflt:!1,editType:"calc"},jitter:{valType:"number",min:0,max:1,editType:"calc"},pointpos:{valType:"number",min:-2,max:2,editType:"calc"},orientation:{valType:"enumerated",values:["v","h"],editType:"calc+clearAxisTypes"},
width:{valType:"number",min:0,dflt:0,editType:"calc"},marker:{outliercolor:{valType:"color",dflt:"rgba(0, 0, 0, 0)",editType:"style"},symbol:a({},e.symbol,{arrayOk:!1,editType:"plot"}),opacity:a({},e.opacity,{arrayOk:!1,dflt:1,editType:"style"}),size:a({},e.size,{arrayOk:!1,editType:"calc"}),color:a({},e.color,{arrayOk:!1,editType:"style"}),line:{color:a({},f.color,{arrayOk:!1,dflt:k.defaultLine,editType:"style"}),width:a({},f.width,{arrayOk:!1,dflt:0,editType:"style"}),outliercolor:{valType:"color",
editType:"style"},outlierwidth:{valType:"number",min:0,dflt:1,editType:"style"},editType:"style"},editType:"plot"},line:{color:{valType:"color",editType:"style"},width:{valType:"number",min:0,dflt:2,editType:"style"},editType:"plot"},fillcolor:l.fillcolor,offsetgroup:m.offsetgroup,alignmentgroup:m.alignmentgroup,selected:{marker:l.selected.marker,editType:"style"},unselected:{marker:l.unselected.marker,editType:"style"},hoveron:{valType:"flaglist",flags:["boxes","points"],dflt:"boxes+points",editType:"style"}}},
{"../../components/color/attributes":576,"../../components/fx/hovertemplate_attributes":615,"../../lib/extend":690,"../bar/attributes":839,"../scatter/attributes":1051}],863:[function(a,p,l){function m(a,b,d,e,f){if(b in a)return d.makeCalcdata(a,b);f=b+"0"in a?a[b+"0"]:"name"in a&&("category"===d.type||q(a.name)&&-1!==["linear","log"].indexOf(d.type)||r.isDateTime(a.name)&&"date"===d.type)?a.name:f;var c="multicategory"===d.type?d.r2c_just_indices(f):d.d2c(f,0,a[b+"calendar"]);return e.map(function(){return c})}
function k(a,b){for(var c=a.length,d=Array(c+1),e=0;e<c;e++)d[e]=a[e]-b;d[c]=a[c-1]+b;return d}function h(a){for(var b=Array(a),c=0;c<a;c++)b[c]=[];return b}function e(a,b,d){var c={text:"tx",hovertext:"htx"},e;for(e in c)Array.isArray(b[e])&&(a[c[e]]=b[e][d])}function f(a,b){if(r.isArrayOrTypedArray(b.selectedpoints))for(var c=0;c<a.length;c++){for(var d=a[c].pts||[],e={},f=0;f<d.length;f++)e[d[f].i]=f;r.tagSelected(d,b,e)}}function b(a,b){return a.v-b.v}function n(a){return a.v}var q=a("fast-isnumeric"),
r=a("../../lib"),d=r._,g=a("../../plots/cartesian/axes");p.exports=function(a,l){var c=a._fullLayout,p=g.getFromId(a,l.xaxis||"x"),v=g.getFromId(a,l.yaxis||"y"),u=[],w="violin"===l.type?"_numViolins":"_numBoxes",x;if("h"===l.orientation){var C=p;var z="x";var J=v;p="y"}else C=v,z="y",J=p,p="x";v=C.makeCalcdata(l,z);var E=m(l,p,J,v,c[w]),H=r.distinctVals(E);J=H.vals;H=H.minDiff/2;var M=k(J,H),O=J.length,I=h(O);for(x=0;x<l._length;x++){var Q=v[x];if(q(Q)){var N=r.findBin(E[x],M);0<=N&&N<O&&(Q={v:Q,
i:x},e(Q,l,x),I[N].push(Q))}}E="all"===(l.boxpoints||l.points)?r.identity:function(a){return a.v<L.lf||a.v>L.uf};for(x=0;x<O;x++)if(0<I[x].length){M=I[x].sort(b);N=M.map(n);Q=N.length;var L={};L.pos=J[x];L.pts=M;L.min=N[0];L.max=N[Q-1];L.mean=r.mean(N,Q);L.sd=r.stdev(N,Q,L.mean);L.q1=r.interp(N,.25);L.med=r.interp(N,.5);L.q3=r.interp(N,.75);L.lf=Math.min(L.q1,N[Math.min(r.findBin(2.5*L.q1-1.5*L.q3,N,!0)+1,Q-1)]);L.uf=Math.max(L.q3,N[Math.max(r.findBin(2.5*L.q3-1.5*L.q1,N),0)]);L.lo=4*L.q1-3*L.q3;
L.uo=4*L.q3-3*L.q1;N=1.57*(L.q3-L.q1)/Math.sqrt(Q);L.ln=L.med-N;L.un=L.med+N;L.pts2=M.filter(E);u.push(L)}f(u,l);v=g.findExtremes(C,v,{padded:!0});l._extremes[C._id]=v;return 0<u.length?(u[0].t={num:c[w],dPos:H,posLetter:p,valLetter:z,labels:{med:d(a,"median:"),min:d(a,"min:"),q1:d(a,"q1:"),q3:d(a,"q3:"),max:d(a,"max:"),mean:"sd"===l.boxmean?d(a,"mean ± σ:"):d(a,"mean:"),lf:d(a,"lower fence:"),uf:d(a,"upper fence:")}},c[w]++,u):[{t:{empty:!0}}]}},{"../../lib":700,"../../plots/cartesian/axes":748,
"fast-isnumeric":221}],864:[function(a,p,l){function m(a,f,m,l){var b=f.calcdata;f=f._fullLayout;var g=l._id,c=g.charAt(0),n,p,r=[],q=0;for(n=0;n<m.length;n++){var u=b[m[n]];for(p=0;p<u.length;p++)r.push(u[p].pos),q+=(u[p].pts2||[]).length}if(r.length){n=h.distinctVals(r);r=n.minDiff/2;k.minDtick(l,n.minDiff,n.vals[0],!0);var w=f["violin"===a?"_numViolins":"_numBoxes"],x="group"===f[a+"mode"]&&1<w,C=1-f[a+"gap"];a=1-f[a+"groupgap"];for(n=0;n<m.length;n++){u=b[m[n]];var z=u[0].trace,J=u[0].t,E=z.width,
H=z.side,M,O;if(E){p=M=O=E/2;var I=0}else p=r,x?(I=e(f,l._id)+z.orientation,O=(I=Object.keys(((f._alignmentOpts[I]||{})[z.alignmentgroup]||{}).offsetGroups||{}).length)||w,I=I?z._offsetIndex:J.num,M=p*C*a/O,I=2*p*(-.5+(I+.5)/O)*C,O=p*C/O):(M=p*C*a,I=0,O=p);J.dPos=p;J.bPos=I;J.bdPos=M;J.wHover=O;J=I+M;if("positive"===H)H=p*(E?1:.5),p=I;else if("negative"===H){H=I;p*=E?1:.5;var Q=J}else H=p,I=Q=J;E=!1;if((z.boxpoints||z.points)&&0<q){M=z.pointpos;O=z.jitter;var N=z.marker.size/2,L=0;if(0<=M+O)if(L=
J*(M+O),L>H){E=!0;var F=N;var K=L}else L>I&&(F=N,K=H);L<=H&&(K=H);H=0;if(0>=M-O)if(H=-J*(M-O),H>p){E=!0;var U=N;var T=H}else H>Q&&(U=N,T=p);H<=p&&(T=p)}else K=H,T=p;J=Array(u.length);for(p=0;p<u.length;p++)J[p]=u[p].pos;z._extremes[g]=k.findExtremes(l,J,{padded:E,vpadminus:T,vpadplus:K,ppadminus:{x:U,y:F}[c],ppadplus:{x:F,y:U}[c]})}}}var k=a("../../plots/cartesian/axes"),h=a("../../lib"),e=a("../../plots/cartesian/axis_ids").getAxisGroup,f=["v","h"];p.exports={crossTraceCalc:function(a,e){var b=a.calcdata,
h=e.xaxis;e=e.yaxis;for(var d=0;d<f.length;d++){for(var g=f[d],c="h"===g?e:h,k=[],n=0;n<b.length;n++){var l=b[n],p=l[0].t;l=l[0].trace;!0!==l.visible||"box"!==l.type&&"candlestick"!==l.type||p.empty||(l.orientation||"v")!==g||l.xaxis!==h._id||l.yaxis!==e._id||k.push(n)}m("box",a,k,c)}},setPositionOffset:m}},{"../../lib":700,"../../plots/cartesian/axes":748,"../../plots/cartesian/axis_ids":751}],865:[function(a,p,l){function m(a,b,d,f){var c=d("y"),g=d("x"),k=g&&g.length;if(c&&c.length){var n="v";
k?c=Math.min(h.minRowLength(g),h.minRowLength(c)):(d("x0"),c=h.minRowLength(c))}else if(k)n="h",d("y0"),c=h.minRowLength(g);else{b.visible=!1;return}b._length=c;e.getComponentMethod("calendars","handleTraceDefaults")(a,b,["x","y"],f);d("orientation",n)}function k(a,b,d,e){e=e.prefix;a=h.coerce2(a,b,n,"marker.outliercolor");var c=d("marker.line.outliercolor");(e=d(e+"points",a||c?"suspectedoutliers":void 0))?(d("jitter","all"===e?.3:0),d("pointpos","all"===e?-1.5:0),d("marker.symbol"),d("marker.opacity"),
d("marker.size"),d("marker.color",b.line.color),d("marker.line.color"),d("marker.line.width"),"suspectedoutliers"===e&&(d("marker.line.outliercolor",b.marker.color),d("marker.line.outlierwidth")),d("selected.marker.color"),d("unselected.marker.color"),d("selected.marker.size"),d("unselected.marker.size"),d("text"),d("hovertext")):delete b.marker;e=d("hoveron");"all"!==e&&-1===e.indexOf("points")||d("hovertemplate");h.coerceSelectionMarkerOpacity(b,d)}var h=a("../../lib"),e=a("../../registry"),f=a("../../components/color"),
b=a("../bar/defaults").handleGroupingDefaults,n=a("./attributes");p.exports={supplyDefaults:function(a,b,d,e){function c(c,d){return h.coerce(a,b,n,c,d)}m(a,b,c,e);!1!==b.visible&&(c("line.color",(a.marker||{}).color||d),c("line.width"),c("fillcolor",f.addOpacity(b.line.color,.5)),c("whiskerwidth"),c("boxmean"),c("width"),c("notched",void 0!==a.notchwidth)&&c("notchwidth"),k(a,b,c,{prefix:"box"}))},crossTraceDefaults:function(a,e){function d(a){return h.coerce(c._input,c,n,a)}for(var f,c,k=0;k<a.length;k++){c=
a[k];var m=c.type;if("box"===m||"violin"===m)f=c._input,"group"===e[m+"mode"]&&b(f,c,e,d)}},handleSampleDefaults:m,handlePointsDefaults:k}},{"../../components/color":577,"../../lib":700,"../../registry":829,"../bar/defaults":843,"./attributes":862}],866:[function(a,p,l){p.exports=function(a,k){k.hoverOnBox&&(a.hoverOnBox=k.hoverOnBox);"xVal"in k&&(a.x=k.xVal);"yVal"in k&&(a.y=k.yVal);k.xa&&(a.xaxis=k.xa);k.ya&&(a.yaxis=k.ya);return a}},{}],867:[function(a,p,l){function m(a,k,d,g){function c(a){return(M(a)+
O(a))/2}var n=a.cd,m=a.xa,l=a.ya,p=n[0].trace,r=n[0].t,q="violin"===p.type,u=[],w,x=r.bdPos,z=r.wHover;q&&"both"!==p.side?("positive"===p.side&&(w=function(a){a=a.pos+r.bPos-H;return f.inbox(a,a+z,I)}),"negative"===p.side&&(w=function(a){a=a.pos+r.bPos-H;return f.inbox(a-z,a,I)})):w=function(a){a=a.pos+r.bPos-H;return f.inbox(a-z,a+z,I)};q=q?function(a){return f.inbox(a.span[0]-E,a.span[1]-E,I)}:function(a){return f.inbox(a.min-E,a.max-E,I)};if("h"===p.orientation){var E=k;var H=d;var M=q;var O=w;
w="y";d=l;k="x"}else E=d,H=k,M=w,O=q,w="x",d=m,k="y",m=l;l=Math.min(1,x/Math.abs(d.r2c(d.range[1])-d.r2c(d.range[0])));var I=a.maxHoverDistance-l;l=a.maxSpikeDistance-l;g=f.getDistanceFunction(g,M,O,c);f.getClosest(n,g,a);if(!1===a.index)return[];n=n[a.index];g=p.line.color;q=(p.marker||{}).color;b.opacity(g)&&p.line.width?a.color=g:b.opacity(q)&&p.boxpoints?a.color=q:a.color=p.fillcolor;a[w+"0"]=d.c2p(n.pos+r.bPos-x,!0);a[w+"1"]=d.c2p(n.pos+r.bPos+x,!0);a[w+"LabelVal"]=n.pos;x=w+"Spike";a.spikeDistance=
c(n)*l/I;a[x]=d.c2p(n.pos,!0);g={};d=["med","min","q1","q3","max"];(p.boxmean||(p.meanline||{}).visible)&&d.push("mean");(p.boxpoints||p.points)&&d.push("lf","uf");for(w=0;w<d.length;w++)if(l=d[w],l in n&&!(n[l]in g)){g[n[l]]=!0;q=n[l];var Q=m.c2p(q,!0),N=e.extendFlat({},a);N[k+"0"]=N[k+"1"]=Q;N[k+"LabelVal"]=q;N[k+"Label"]=(r.labels?r.labels[l]+" ":"")+h.hoverLabelText(m,q);N.hoverOnBox=!0;"mean"===l&&"sd"in n&&"sd"===p.boxmean&&(N[k+"err"]=n.sd);a.name="";a.spikeDistance=void 0;a[x]=void 0;N.hovertemplate=
!1;u.push(N)}return u}function k(a,b,d){for(var g=a.cd,c=a.xa,h=a.ya,k=g[0].trace,m=c.c2p(b),l=h.c2p(d),p=f.quadrature(function(a){var b=Math.max(3,a.mrc||0);return Math.max(Math.abs(c.c2p(a.x)-m)-b,1-3/b)},function(a){var b=Math.max(3,a.mrc||0);return Math.max(Math.abs(h.c2p(a.y)-l)-b,1-3/b)}),r=!1,q=0;q<g.length;q++){b=g[q];for(var u=0;u<(b.pts||[]).length;u++)d=b.pts[u],d=p(d),d<=a.distance&&(a.distance=d,r=[q,u])}if(!r)return!1;b=g[r[0]];d=b.pts[r[1]];g=c.c2p(d.x,!0);p=h.c2p(d.y,!0);r=d.mrc||
1;a=e.extendFlat({},a,{index:d.i,color:(k.marker||{}).color,name:k.name,x0:g-r,x1:g+r,y0:p-r,y1:p+r,spikeDistance:a.distance,hovertemplate:k.hovertemplate});"h"===k.orientation?(g=h,a.xLabelVal=d.x,a.yLabelVal=b.pos):(g=c,a.xLabelVal=b.pos,a.yLabelVal=d.y);p=g._id.charAt(0);a[p+"Spike"]=g.c2p(b.pos,!0);n(d,k,a);return a}var h=a("../../plots/cartesian/axes"),e=a("../../lib"),f=a("../../components/fx"),b=a("../../components/color"),n=a("../scatter/fill_hover_text");p.exports={hoverPoints:function(a,
b,d,e){var c=a.cd[0].trace.hoveron,f=[],g;-1!==c.indexOf("boxes")&&(f=f.concat(m(a,b,d,e)));-1!==c.indexOf("points")&&(g=k(a,b,d));if("closest"===e)return g?[g]:f;g&&f.push(g);return f},hoverOnBoxes:m,hoverOnPoints:k}},{"../../components/color":577,"../../components/fx":616,"../../lib":700,"../../plots/cartesian/axes":748,"../scatter/fill_hover_text":1059}],868:[function(a,p,l){l={};l.attributes=a("./attributes");l.layoutAttributes=a("./layout_attributes");l.supplyDefaults=a("./defaults").supplyDefaults;
l.crossTraceDefaults=a("./defaults").crossTraceDefaults;l.supplyLayoutDefaults=a("./layout_defaults").supplyLayoutDefaults;l.calc=a("./calc");l.crossTraceCalc=a("./cross_trace_calc").crossTraceCalc;l.plot=a("./plot").plot;l.style=a("./style").style;l.styleOnSelect=a("./style").styleOnSelect;l.hoverPoints=a("./hover").hoverPoints;l.eventData=a("./event_data");l.selectPoints=a("./select");l.moduleType="trace";l.name="box";l.basePlotModule=a("../../plots/cartesian");l.categories="cartesian svg symbols oriented box-violin showLegend boxLayout zoomScale".split(" ");
l.meta={};p.exports=l},{"../../plots/cartesian":759,"./attributes":862,"./calc":863,"./cross_trace_calc":864,"./defaults":865,"./event_data":866,"./hover":867,"./layout_attributes":869,"./layout_defaults":870,"./plot":871,"./select":872,"./style":873}],869:[function(a,p,l){p.exports={boxmode:{valType:"enumerated",values:["group","overlay"],dflt:"overlay",editType:"calc"},boxgap:{valType:"number",min:0,max:1,dflt:.3,editType:"calc"},boxgroupgap:{valType:"number",min:0,max:1,dflt:.3,editType:"calc"}}},
{}],870:[function(a,p,l){function m(a,b,e,h,m){a=m+"Layout";b=!1;for(var d=0;d<e.length;d++)if(k.traceIs(e[d],a)){b=!0;break}b&&(h(m+"mode"),h(m+"gap"),h(m+"groupgap"))}var k=a("../../registry"),h=a("../../lib"),e=a("./layout_attributes");p.exports={supplyLayoutDefaults:function(a,b,k){m(a,b,k,function(f,k){return h.coerce(a,b,e,f,k)},"box")},_supply:m}},{"../../lib":700,"../../registry":829,"./layout_attributes":869}],871:[function(a,p,l){function m(a,b,h,d){var g=b.pos,c=b.val,k=d.bPos,n=d.wdPos||
0,m=d.bPosPxOffset||0,l=h.whiskerwidth||0,p=h.notched||!1,r=p?1-2*h.notchwidth:1;if(Array.isArray(d.bdPos)){var q=d.bdPos[0];var u=d.bdPos[1]}else u=q=d.bdPos;a=a.selectAll("path.box").data("violin"!==h.type||h.box.visible?f.identity:[]);a.enter().append("path").style("vector-effect","non-scaling-stroke").attr("class","box");a.exit().remove();a.each(function(a){if(a.empty)return"M0,0Z";var b=a.pos,d=g.c2p(b+k,!0)+m,t=g.c2p(b+k-q,!0)+m,v=g.c2p(b+k+u,!0)+m,w=g.c2p(b+k-n,!0)+m,y=g.c2p(b+k+n,!0)+m,x=
g.c2p(b+k-q*r,!0)+m;b=g.c2p(b+k+u*r,!0)+m;var A=c.c2p(a.q1,!0),B=c.c2p(a.q3,!0),D=f.constrain(c.c2p(a.med,!0),Math.min(A,B)+1,Math.max(A,B)-1),C=void 0===a.lf||!1===h.boxpoints,G=c.c2p(C?a.min:a.lf,!0);C=c.c2p(C?a.max:a.uf,!0);var z=c.c2p(a.ln,!0);a=c.c2p(a.un,!0);"h"===h.orientation?e.select(this).attr("d","M"+D+","+x+"V"+b+"M"+A+","+t+"V"+v+(p?"H"+z+"L"+D+","+b+"L"+a+","+v:"")+"H"+B+"V"+t+(p?"H"+a+"L"+D+","+x+"L"+z+","+t:"")+"ZM"+A+","+d+"H"+G+"M"+B+","+d+"H"+C+(0===l?"":"M"+G+","+w+"V"+y+"M"+C+
","+w+"V"+y)):e.select(this).attr("d","M"+x+","+D+"H"+b+"M"+t+","+A+"H"+v+(p?"V"+z+"L"+b+","+D+"L"+v+","+a:"")+"V"+B+"H"+t+(p?"V"+a+"L"+x+","+D+"L"+t+","+z:"")+"ZM"+d+","+A+"V"+G+"M"+d+","+B+"V"+C+(0===l?"":"M"+w+","+G+"H"+y+"M"+w+","+C+"H"+y))})}function k(a,e,h,d){var g=e.x;e=e.y;var c=d.bdPos,k=d.bPos,n=h.boxpoints||h.points;f.seedPseudoRandom();var m=function(a){a.forEach(function(a){a.t=d;a.trace=h});return a};a=a.selectAll("g.points").data(n?m:[]);a.enter().append("g").attr("class","points");
a.exit().remove();a=a.selectAll("path").data(function(a){var b=a.pts2;var d=Math.max((a.max-a.min)/10,a.q3-a.q1);var e=1E-9*d,g=.01*d,m=[],l=0;if(h.jitter){if(0===d)for(l=1,m=Array(b.length),d=0;d<b.length;d++)m[d]=1;else for(d=0;d<b.length;d++){var p=Math.max(0,d-5);var t=b[p].v,q=Math.min(b.length-1,d+5),r=b[q].v;"all"!==n&&(b[d].v<a.lf?r=Math.min(r,a.lf):t=Math.max(t,a.uf));p=Math.sqrt(g*(q-p)/(r-t+e))||0;p=f.constrain(Math.abs(p),0,1);m.push(p);l=Math.max(p,l)}p=2*h.jitter/(l||1)}for(d=0;d<b.length;d++)e=
b[d],g=e.v,l=h.jitter?p*m[d]*(f.pseudoRandom()-.5):0,l=a.pos+k+c*(h.pointpos+l),"h"===h.orientation?(e.y=l,e.x=g):(e.x=l,e.y=g),"suspectedoutliers"===n&&g<a.uo&&g>a.lo&&(e.so=!0);return b});a.enter().append("path").classed("point",!0);a.exit().remove();a.call(b.translatePoints,g,e)}function h(a,b,h,d){var g=b.pos,c=b.val,k=d.bPos,n=d.bPosPxOffset||0,m=h.boxmean||(h.meanline||{}).visible;if(Array.isArray(d.bdPos)){var l=d.bdPos[0];var p=d.bdPos[1]}else p=l=d.bdPos;a=a.selectAll("path.mean").data("box"===
h.type&&h.boxmean||"violin"===h.type&&h.box.visible&&h.meanline.visible?f.identity:[]);a.enter().append("path").attr("class","mean").style({fill:"none","vector-effect":"non-scaling-stroke"});a.exit().remove();a.each(function(a){var b=g.c2p(a.pos+k,!0)+n,d=g.c2p(a.pos+k-l,!0)+n,f=g.c2p(a.pos+k+p,!0)+n,t=c.c2p(a.mean,!0),q=c.c2p(a.mean-a.sd,!0);a=c.c2p(a.mean+a.sd,!0);"h"===h.orientation?e.select(this).attr("d","M"+t+","+d+"V"+f+("sd"===m?"m0,0L"+q+","+b+"L"+t+","+d+"L"+a+","+b+"Z":"")):e.select(this).attr("d",
"M"+d+","+t+"H"+f+("sd"===m?"m0,0L"+b+","+q+"L"+d+","+t+"L"+b+","+a+"Z":""))})}var e=a("d3"),f=a("../../lib"),b=a("../../components/drawing");p.exports={plot:function(a,b,l,d){var g=b.xaxis,c=b.yaxis;f.makeTraceGroups(d,l,"trace boxes").each(function(a){var d=e.select(this),f=a[0];a=f.t;var n=f.trace;b.isRangePlot||(f.node3=d);a.wdPos=a.bdPos*n.whiskerwidth;if(!0!==n.visible||a.empty)d.remove();else{if("h"===n.orientation){f=c;var l=g}else f=g,l=c;m(d,{pos:f,val:l},n,a);k(d,{x:g,y:c},n,a);h(d,{pos:f,
val:l},n,a)}})},plotBoxAndWhiskers:m,plotPoints:k,plotBoxMean:h}},{"../../components/drawing":598,"../../lib":700,d3:154}],872:[function(a,p,l){p.exports=function(a,k){var h=a.cd,e=a.xaxis,f=a.yaxis,b=[],n,m;if(!1===k)for(n=0;n<h.length;n++)for(m=0;m<(h[n].pts||[]).length;m++)h[n].pts[m].selected=0;else for(n=0;n<h.length;n++)for(m=0;m<(h[n].pts||[]).length;m++){var l=h[n].pts[m],d=e.c2p(l.x),g=f.c2p(l.y);k.contains([d,g],null,l.i,a)?(b.push({pointNumber:l.i,x:e.c2d(l.x),y:f.c2d(l.y)}),l.selected=
1):l.selected=0}return b}},{}],873:[function(a,p,l){var m=a("d3"),k=a("../../components/color"),h=a("../../components/drawing");p.exports={style:function(a,f){f=f?f[0].node3:m.select(a).selectAll("g.trace.boxes");f.style("opacity",function(a){return a[0].trace.opacity});f.each(function(b){function e(a,b,d,e){a.style("stroke-width",b+"px").call(k.stroke,d).call(k.fill,e)}var f=m.select(this),l=b[0].trace;b=l.line.width;var d=f.selectAll("path.box");"candlestick"===l.type?d.each(function(a){if(!a.empty){var b=
m.select(this),d=l[a.dir];e(b,d.line.width,d.line.color,d.fillcolor);b.style("opacity",l.selectedpoints&&!a.selected?.3:1)}}):(e(d,b,l.line.color,l.fillcolor),f.selectAll("path.mean").style({"stroke-width":b,"stroke-dasharray":2*b+"px,"+b+"px"}).call(k.stroke,l.line.color),f=f.selectAll("path.point"),h.pointStyle(f,l,a))})},styleOnSelect:function(a,f){var b=f[0].trace;f=f[0].node3.selectAll("path.point");b.selectedpoints?h.selectedPointStyle(f,b):h.pointStyle(f,b,a)}}},{"../../components/color":577,
"../../components/drawing":598,d3:154}],874:[function(a,p,l){function m(a){return{line:{color:k({},h.line.color,{dflt:a}),width:h.line.width,editType:"style"},fillcolor:h.fillcolor,editType:"style"}}var k=a("../../lib").extendFlat;l=a("../ohlc/attributes");var h=a("../box/attributes");p.exports={x:l.x,open:l.open,high:l.high,low:l.low,close:l.close,line:{width:k({},h.line.width,{}),editType:"style"},increasing:m(l.increasing.line.color.dflt),decreasing:m(l.decreasing.line.color.dflt),text:l.text,
hovertext:l.hovertext,whiskerwidth:k({},h.whiskerwidth,{dflt:0}),hoverlabel:l.hoverlabel}},{"../../lib":700,"../box/attributes":862,"../ohlc/attributes":999}],875:[function(a,p,l){function m(a,b,e,h){return{min:e,q1:Math.min(a,h),med:h,q3:Math.max(a,h),max:b}}var k=a("../../lib"),h=a("../../plots/cartesian/axes"),e=a("../ohlc/calc").calcCommon;p.exports=function(a,b){var f=a._fullLayout,l=h.getFromId(a,b.xaxis),p=h.getFromId(a,b.yaxis);l=l.makeCalcdata(b,"x");a=e(a,b,l,p,m);return a.length?(k.extendFlat(a[0].t,
{num:f._numBoxes,dPos:k.distinctVals(l).minDiff/2,posLetter:"x",valLetter:"y"}),f._numBoxes++,a):[{t:{empty:!0}}]}},{"../../lib":700,"../../plots/cartesian/axes":748,"../ohlc/calc":1E3}],876:[function(a,p,l){function m(a,e,f,k){a=f(k+".line.color");f(k+".line.width",e.line.width);f(k+".fillcolor",h.addOpacity(a,.5))}var k=a("../../lib"),h=a("../../components/color"),e=a("../ohlc/ohlc_defaults"),f=a("./attributes");p.exports=function(a,h,l,p){function b(b,c){return k.coerce(a,h,f,b,c)}e(a,h,b,p)?(b("line.width"),
m(a,h,b,"increasing"),m(a,h,b,"decreasing"),b("text"),b("hovertext"),b("whiskerwidth"),p._requestRangeslider[h.xaxis]=!0):h.visible=!1}},{"../../components/color":577,"../../lib":700,"../ohlc/ohlc_defaults":1004,"./attributes":874}],877:[function(a,p,l){p.exports={moduleType:"trace",name:"candlestick",basePlotModule:a("../../plots/cartesian"),categories:["cartesian","svg","showLegend","candlestick","boxLayout"],meta:{},attributes:a("./attributes"),layoutAttributes:a("../box/layout_attributes"),supplyLayoutDefaults:a("../box/layout_defaults").supplyLayoutDefaults,
crossTraceCalc:a("../box/cross_trace_calc").crossTraceCalc,supplyDefaults:a("./defaults"),calc:a("./calc"),plot:a("../box/plot").plot,layerName:"boxlayer",style:a("../box/style").style,hoverPoints:a("../ohlc/hover").hoverPoints,selectPoints:a("../ohlc/select")}},{"../../plots/cartesian":759,"../box/cross_trace_calc":864,"../box/layout_attributes":869,"../box/layout_defaults":870,"../box/plot":871,"../box/style":873,"../ohlc/hover":1002,"../ohlc/select":1006,"./attributes":874,"./calc":875,"./defaults":876}],
878:[function(a,p,l){function m(a,f,b,n){["aaxis","baxis"].forEach(function(e){var m=e.charAt(0),d=a[e]||{},g=h.newContainer(f,e);k(d,g,{tickfont:"x",id:m+"axis",letter:m,font:f.font,name:e,data:a[m],calendar:f.calendar,dfltColor:n,bgColor:b.paper_bgcolor,fullLayout:b});g._categories=g._categories||[];a[e]||"-"===d.type||(a[e]={type:d.type})})}var k=a("./axis_defaults"),h=a("../../plot_api/plot_template");p.exports=function(a,f,b,h,k){h("a")||(h("da"),h("a0"));h("b")||(h("db"),h("b0"));m(a,f,b,k)}},
{"../../plot_api/plot_template":738,"./axis_defaults":883}],879:[function(a,p,l){function m(a,e){if(!k(a)||10<=e)return null;for(var f=Infinity,b=-Infinity,h=a.length,l=0;l<h;l++){var p=a[l];if(k(p)){if(p=m(p,e+1))f=Math.min(p[0],f),b=Math.max(p[1],b)}else f=Math.min(p,f),b=Math.max(p,b)}return[f,b]}var k=a("../../lib").isArrayOrTypedArray;p.exports=function(a){return m(a,0)}},{"../../lib":700}],880:[function(a,p,l){var m=a("../../plots/font_attributes");l=a("./axis_attributes");a=a("../../components/color/attributes");
m=m({editType:"calc"});m.family.dflt='"Open Sans", verdana, arial, sans-serif';m.size.dflt=12;m.color.dflt=a.defaultLine;p.exports={carpet:{valType:"string",editType:"calc"},x:{valType:"data_array",editType:"calc+clearAxisTypes"},y:{valType:"data_array",editType:"calc+clearAxisTypes"},a:{valType:"data_array",editType:"calc"},a0:{valType:"number",dflt:0,editType:"calc"},da:{valType:"number",dflt:1,editType:"calc"},b:{valType:"data_array",editType:"calc"},b0:{valType:"number",dflt:0,editType:"calc"},
db:{valType:"number",dflt:1,editType:"calc"},cheaterslope:{valType:"number",dflt:1,editType:"calc"},aaxis:l,baxis:l,font:m,color:{valType:"color",dflt:a.defaultLine,editType:"plot"},transforms:void 0}},{"../../components/color/attributes":576,"../../plots/font_attributes":774,"./axis_attributes":882}],881:[function(a,p,l){var m=a("../../lib").isArrayOrTypedArray;p.exports=function(a,h,e,f){var b=m(e)?"a":"b",k=("a"===b?a.aaxis:a.baxis).smoothing,l="a"===b?a.a2i:a.b2j,p="a"===b?e:f;f="a"===b?f:e;e=
"a"===b?h.a.length:h.b.length;var d="a"===b?h.b.length:h.a.length,g=Math.floor("a"===b?a.b2j(f):a.a2i(f));h="a"===b?function(b){return a.evalxy([],b,g)}:function(b){return a.evalxy([],g,b)};if(k){var c=Math.max(0,Math.min(d-2,g));var q=g-c;var t="a"===b?function(b,d){return a.dxydi([],b,c,d,q)}:function(b,d){return a.dxydj([],c,b,q,d)}}b=l(p[0]);l=l(p[1]);p=b<l?1:-1;var w=1E-8*(l-b);var x=0<p?Math.ceil:Math.floor;f=0<p?Math.min:Math.max;d=0<p?Math.max:Math.min;var D=(0<p?Math.floor:Math.ceil)(b+w);
x=x(l-w);w=h(b);for(var G=[[w]];D*p<x*p;D+=p){var A=[];var C=d(b,D);var z=f(l,D+p);var J=z-C;var E=Math.max(0,Math.min(e-2,Math.floor(.5*(C+z))));var H=h(z);k&&(C=t(E,C-E),E=t(E,z-E),A.push([w[0]+C[0]/3*J,w[1]+C[1]/3*J]),A.push([H[0]-E[0]/3*J,H[1]-E[1]/3*J]));A.push(H);G.push(A);w=H}return G}},{"../../lib":700}],882:[function(a,p,l){l=a("../../plots/font_attributes");var m=a("../../components/color/attributes"),k=a("../../plots/cartesian/layout_attributes");a=a("../../plot_api/edit_types").overrideAll;
p.exports={color:{valType:"color",editType:"calc"},smoothing:{valType:"number",dflt:1,min:0,max:1.3,editType:"calc"},title:{text:{valType:"string",dflt:"",editType:"calc"},font:l({editType:"calc"}),offset:{valType:"number",dflt:10,editType:"calc"},editType:"calc"},type:{valType:"enumerated",values:["-","linear","date","category"],dflt:"-",editType:"calc"},autorange:{valType:"enumerated",values:[!0,!1,"reversed"],dflt:!0,editType:"calc"},rangemode:{valType:"enumerated",values:["normal","tozero","nonnegative"],
dflt:"normal",editType:"calc"},range:{valType:"info_array",editType:"calc",items:[{valType:"any",editType:"calc"},{valType:"any",editType:"calc"}]},fixedrange:{valType:"boolean",dflt:!1,editType:"calc"},cheatertype:{valType:"enumerated",values:["index","value"],dflt:"value",editType:"calc"},tickmode:{valType:"enumerated",values:["linear","array"],dflt:"array",editType:"calc"},nticks:{valType:"integer",min:0,dflt:0,editType:"calc"},tickvals:{valType:"data_array",editType:"calc"},ticktext:{valType:"data_array",
editType:"calc"},showticklabels:{valType:"enumerated",values:["start","end","both","none"],dflt:"start",editType:"calc"},tickfont:l({editType:"calc"}),tickangle:{valType:"angle",dflt:"auto",editType:"calc"},tickprefix:{valType:"string",dflt:"",editType:"calc"},showtickprefix:{valType:"enumerated",values:["all","first","last","none"],dflt:"all",editType:"calc"},ticksuffix:{valType:"string",dflt:"",editType:"calc"},showticksuffix:{valType:"enumerated",values:["all","first","last","none"],dflt:"all",
editType:"calc"},showexponent:{valType:"enumerated",values:["all","first","last","none"],dflt:"all",editType:"calc"},exponentformat:{valType:"enumerated",values:"none e E power SI B".split(" "),dflt:"B",editType:"calc"},separatethousands:{valType:"boolean",dflt:!1,editType:"calc"},tickformat:{valType:"string",dflt:"",editType:"calc"},tickformatstops:a(k.tickformatstops,"calc","from-root"),categoryorder:{valType:"enumerated",values:["trace","category ascending","category descending","array"],dflt:"trace",
editType:"calc"},categoryarray:{valType:"data_array",editType:"calc"},labelpadding:{valType:"integer",dflt:10,editType:"calc"},labelprefix:{valType:"string",editType:"calc"},labelsuffix:{valType:"string",dflt:"",editType:"calc"},showline:{valType:"boolean",dflt:!1,editType:"calc"},linecolor:{valType:"color",dflt:m.defaultLine,editType:"calc"},linewidth:{valType:"number",min:0,dflt:1,editType:"calc"},gridcolor:{valType:"color",editType:"calc"},gridwidth:{valType:"number",min:0,dflt:1,editType:"calc"},
showgrid:{valType:"boolean",dflt:!0,editType:"calc"},minorgridcount:{valType:"integer",min:0,dflt:0,editType:"calc"},minorgridwidth:{valType:"number",min:0,dflt:1,editType:"calc"},minorgridcolor:{valType:"color",dflt:m.lightLine,editType:"calc"},startline:{valType:"boolean",editType:"calc"},startlinecolor:{valType:"color",editType:"calc"},startlinewidth:{valType:"number",dflt:1,editType:"calc"},endline:{valType:"boolean",editType:"calc"},endlinewidth:{valType:"number",dflt:1,editType:"calc"},endlinecolor:{valType:"color",
editType:"calc"},tick0:{valType:"number",min:0,dflt:0,editType:"calc"},dtick:{valType:"number",min:0,dflt:1,editType:"calc"},arraytick0:{valType:"integer",min:0,dflt:0,editType:"calc"},arraydtick:{valType:"integer",min:1,dflt:1,editType:"calc"},_deprecated:{title:{valType:"string",editType:"calc"},titlefont:l({editType:"calc"}),titleoffset:{valType:"number",dflt:10,editType:"calc"}},editType:"calc"}},{"../../components/color/attributes":576,"../../plot_api/edit_types":731,"../../plots/cartesian/layout_attributes":760,
"../../plots/font_attributes":774}],883:[function(a,p,l){function m(a,b){if("-"===a.type){var c=a._id.charAt(0);a.type=d(b,a[c+"calendar"])}}var k=a("./attributes"),h=a("../../components/color").addOpacity,e=a("../../registry"),f=a("../../lib"),b=a("../../plots/cartesian/tick_value_defaults"),n=a("../../plots/cartesian/tick_label_defaults"),q=a("../../plots/cartesian/category_order_defaults"),r=a("../../plots/cartesian/set_convert"),d=a("../../plots/cartesian/axis_autotype");p.exports=function(a,
c,d){function g(b,d){return f.coerce(a,c,u,b,d)}function l(b,d){return f.coerce2(a,c,u,b,d)}var p=d.letter,v=d.font||{},u=k[p+"axis"];d.name&&(c._name=d.name,c._id=d.name);var w=g("type");"-"===w&&(d.data&&m(c,d.data),"-"===c.type?c.type="linear":w=a.type=c.type);g("smoothing");g("cheatertype");g("showticklabels");g("labelprefix",p+" \x3d ");g("labelsuffix");g("showtickprefix");g("showticksuffix");g("separatethousands");g("tickformat");g("exponentformat");g("showexponent");g("categoryorder");g("tickmode");
g("tickvals");g("ticktext");g("tick0");g("dtick");"array"===c.tickmode&&(g("arraytick0"),g("arraydtick"));g("labelpadding");c._hovertitle=p;"date"===w&&e.getComponentMethod("calendars","handleDefaults")(a,c,"calendar",d.calendar);r(c,d.fullLayout);c.c2p=f.identity;var x=g("color",d.dfltColor),z=x===a.color?x:v.color;g("title.text")&&(f.coerceFont(g,"title.font",{family:v.family,size:Math.round(1.2*v.size),color:z}),g("title.offset"));g("tickangle");g("autorange",!c.isValidRange(a.range))&&g("rangemode");
g("range");c.cleanRange();g("fixedrange");b(a,c,g,w);n(a,c,g,w,d);q(a,c,g,{data:d.data,dataAttr:p});d=l("gridcolor",h(x,.3));p=l("gridwidth");v=g("showgrid");v||(delete c.gridcolor,delete c.gridwidth);w=l("startlinecolor",x);z=l("startlinewidth",p);g("startline",c.showgrid||!!w||!!z)||(delete c.startlinecolor,delete c.startlinewidth);x=l("endlinecolor",x);w=l("endlinewidth",p);g("endline",c.showgrid||!!x||!!w)||(delete c.endlinecolor,delete c.endlinewidth);v?(g("minorgridcount"),g("minorgridwidth",
p),g("minorgridcolor",h(d,.06)),c.minorgridcount||(delete c.minorgridwidth,delete c.minorgridcolor)):(delete c.gridcolor,delete c.gridWidth);"none"===c.showticklabels&&(delete c.tickfont,delete c.tickangle,delete c.showexponent,delete c.exponentformat,delete c.tickformat,delete c.showticksuffix,delete c.showtickprefix);c.showticksuffix||delete c.ticksuffix;c.showtickprefix||delete c.tickprefix;g("tickmode");return c}},{"../../components/color":577,"../../lib":700,"../../plots/cartesian/axis_autotype":749,
"../../plots/cartesian/category_order_defaults":752,"../../plots/cartesian/set_convert":766,"../../plots/cartesian/tick_label_defaults":767,"../../plots/cartesian/tick_value_defaults":769,"../../registry":829,"./attributes":880}],884:[function(a,p,l){var m=a("../../plots/cartesian/axes"),k=a("../../lib").isArray1D,h=a("./cheater_basis"),e=a("./array_minmax"),f=a("./calc_gridlines"),b=a("./calc_labels"),n=a("./calc_clippath"),q=a("../heatmap/clean_2d_array"),r=a("./smooth_fill_2d_array"),d=a("../heatmap/convert_column_xyz"),
g=a("./set_convert");p.exports=function(a,l){var c=m.getFromId(a,l.xaxis);a=m.getFromId(a,l.yaxis);var p=l.aaxis,v=l.baxis,u=l.x,w=l.y,x=[];u&&k(u)&&x.push("x");w&&k(w)&&x.push("y");x.length&&d(l,p,v,"a","b",x);x=l._a=l._a||l.a;var C=l._b=l._b||l.b;u=l._x||l.x;w=l._y||l.y;var z={};l._cheater&&(u=h("index"===p.cheatertype?x.length:x,"index"===v.cheatertype?C.length:C,l.cheaterslope));l._x=u=q(u);l._y=w=q(w);r(u,x,C);r(w,x,C);g(l);l.setScale();var J=e(u),E=e(w),H=.5*(J[1]-J[0]);J=.5*(J[1]+J[0]);var M=
.5*(E[1]-E[0]);E=.5*(E[1]+E[0]);J=[J-1.3*H,J+1.3*H];E=[E-1.3*M,E+1.3*M];l._extremes[c._id]=m.findExtremes(c,J,{padded:!0});l._extremes[a._id]=m.findExtremes(a,E,{padded:!0});f(l,"a","b");f(l,"b","a");b(l,p);b(l,v);z.clipsegments=n(l._xctrl,l._yctrl,p,v);z.x=u;z.y=w;z.a=x;z.b=C;return[z]}},{"../../lib":700,"../../plots/cartesian/axes":748,"../heatmap/clean_2d_array":950,"../heatmap/convert_column_xyz":952,"./array_minmax":879,"./calc_clippath":885,"./calc_gridlines":886,"./calc_labels":887,"./cheater_basis":889,
"./set_convert":902,"./smooth_fill_2d_array":903}],885:[function(a,p,l){p.exports=function(a,k,h,e){var f,b=[];h=!!h.smoothing;var n=!!e.smoothing,m=a[0].length-1,l=a.length-1;e=0;var d=[];for(f=[];e<=m;e++)d[e]=a[0][e],f[e]=k[0][e];b.push({x:d,y:f,bicubic:h});e=0;d=[];for(f=[];e<=l;e++)d[e]=a[e][m],f[e]=k[e][m];b.push({x:d,y:f,bicubic:n});e=m;d=[];for(f=[];0<=e;e--)d[m-e]=a[l][e],f[m-e]=k[l][e];b.push({x:d,y:f,bicubic:h});e=l;d=[];for(f=[];0<=e;e--)d[l-e]=a[e][0],f[l-e]=k[e][0];b.push({x:d,y:f,bicubic:n});
return b}},{}],886:[function(a,p,l){var m=a("../../plots/cartesian/axes"),k=a("../../lib/extend").extendFlat;p.exports=function(a,e,f){function b(b){var c,g=[],h=[],k={};if("b"===e){var n=a.b2j(b);var m=Math.floor(Math.max(0,Math.min(z-2,n)));var p=n-m;k.length=z;k.crossLength=C;k.xy=function(b){return a.evalxy([],b,n)};k.dxy=function(b,c){return a.dxydi([],b,m,c,p)};for(c=0;c<C;c++){var q=Math.min(C-2,c);var t=c-q;var r=a.evalxy([],c,n);if(w.smoothing&&0<c){var v=a.dxydi([],c-1,m,0,p);g.push(u[0]+
v[0]/3);h.push(u[1]+v[1]/3);var u=a.dxydi([],c-1,m,1,p);g.push(r[0]-u[0]/3);h.push(r[1]-u[1]/3)}g.push(r[0]);h.push(r[1]);u=r}}else for(c=a.a2i(b),q=Math.floor(Math.max(0,Math.min(C-2,c))),t=c-q,k.length=C,k.crossLength=z,k.xy=function(b){return a.evalxy([],c,b)},k.dxy=function(b,c){return a.dxydj([],q,b,t,c)},n=0;n<z;n++)m=Math.min(z-2,n),p=n-m,r=a.evalxy([],c,n),w.smoothing&&0<n&&(v=a.dxydj([],q,n-1,t,0),g.push(u[0]+v[0]/3),h.push(u[1]+v[1]/3),u=a.dxydj([],q,n-1,t,1),g.push(r[0]-u[0]/3),h.push(r[1]-
u[1]/3)),g.push(r[0]),h.push(r[1]),u=r;k.axisLetter=e;k.axis=d;k.crossAxis=w;k.value=b;k.constvar=f;k.index=l;k.x=g;k.y=h;k.smoothing=w.smoothing;return k}function h(b){var c,g=[],h=[],k={};k.length=p.length;k.crossLength=t.length;if("b"===e){var n=Math.max(0,Math.min(z-2,b));var m=Math.min(1,Math.max(0,b-n));k.xy=function(c){return a.evalxy([],c,b)};k.dxy=function(b,c){return a.dxydi([],b,n,c,m)};for(c=0;c<G;c++)g[c]=x[b*J][c],h[c]=D[b*J][c]}else{var l=Math.max(0,Math.min(C-2,b));var q=Math.min(1,
Math.max(0,b-l));k.xy=function(c){return a.evalxy([],b,c)};k.dxy=function(b,c){return a.dxydj([],l,b,q,c)};for(c=0;c<A;c++)g[c]=x[c][b*J],h[c]=D[c][b*J]}k.axisLetter=e;k.axis=d;k.crossAxis=w;k.value=p[b];k.constvar=f;k.index=b;k.x=g;k.y=h;k.smoothing=w.smoothing;return k}var l,p=a["_"+e],d=a[e+"axis"];var g=d._gridlines=[];var c=d._minorgridlines=[],q=d._boundarylines=[],t=a["_"+f],w=a[f+"axis"];"array"===d.tickmode&&(d.tickvals=p.slice());var x=a._xctrl,D=a._yctrl,G=x[0].length,A=x.length,C=a._a.length,
z=a._b.length;m.prepTicks(d);"array"===d.tickmode&&delete d.tickvals;var J=d.smoothing?3:1;if("array"===d.tickmode){var E=5E-15;E=[Math.floor((p.length-1-d.arraytick0)/d.arraydtick*(1+E)),Math.ceil(-d.arraytick0/d.arraydtick/(1+E))].sort(function(a,b){return a-b});var H=E[0]-1;E=E[1]+1;for(l=H;l<E;l++){var M=d.arraytick0+d.arraydtick*l;0>M||M>p.length-1||g.push(k(h(M),{color:d.gridcolor,width:d.gridwidth}))}for(l=H;l<E;l++){H=d.arraytick0+d.arraydtick*l;var O=Math.min(H+d.arraydtick,p.length-1);if(!(0>
H||H>p.length-1||0>O||O>p.length-1)){var I=p[H];var Q=p[O];for(g=0;g<d.minorgridcount;g++)M=O-H,0>=M||(M=I+(Q-I)*(g+1)/(d.minorgridcount+1)*(d.arraydtick/M),M<p[0]||M>p[p.length-1]||c.push(k(b(M),{color:d.minorgridcolor,width:d.minorgridwidth})))}}d.startline&&q.push(k(h(0),{color:d.startlinecolor,width:d.startlinewidth}));d.endline&&q.push(k(h(p.length-1),{color:d.endlinecolor,width:d.endlinewidth}))}else{E=5E-15;E=[Math.floor((p[p.length-1]-d.tick0)/d.dtick*(1+E)),Math.ceil((p[0]-d.tick0)/d.dtick/
(1+E))].sort(function(a,b){return a-b});H=E[0];E=E[1];for(l=H;l<=E;l++)O=d.tick0+d.dtick*l,g.push(k(b(O),{color:d.gridcolor,width:d.gridwidth}));for(l=H-1;l<E+1;l++)for(O=d.tick0+d.dtick*l,g=0;g<d.minorgridcount;g++)M=O+d.dtick*(g+1)/(d.minorgridcount+1),M<p[0]||M>p[p.length-1]||c.push(k(b(M),{color:d.minorgridcolor,width:d.minorgridwidth}));d.startline&&q.push(k(b(p[0]),{color:d.startlinecolor,width:d.startlinewidth}));d.endline&&q.push(k(b(p[p.length-1]),{color:d.endlinecolor,width:d.endlinewidth}))}}},
{"../../lib/extend":690,"../../plots/cartesian/axes":748}],887:[function(a,p,l){var m=a("../../plots/cartesian/axes"),k=a("../../lib/extend").extendFlat;p.exports=function(a,e){var f=e._labels=[],b=e._gridlines;for(a=0;a<b.length;a++){var h=b[a];if(-1!==["start","both"].indexOf(e.showticklabels)){var l=m.tickText(e,h.value);k(l,{prefix:void 0,suffix:void 0,endAnchor:!0,xy:h.xy(0),dxy:h.dxy(0,0),axis:h.axis,length:h.crossAxis.length,font:h.axis.tickfont,isFirst:0===a,isLast:a===b.length-1});f.push(l)}-1!==
["end","both"].indexOf(e.showticklabels)&&(l=m.tickText(e,h.value),k(l,{endAnchor:!1,xy:h.xy(h.crossLength-1),dxy:h.dxy(h.crossLength-2,1),axis:h.axis,length:h.crossAxis.length,font:h.axis.tickfont,isFirst:0===a,isLast:a===b.length-1}),f.push(l))}}},{"../../lib/extend":690,"../../plots/cartesian/axes":748}],888:[function(a,p,l){p.exports=function(a,k,h,e){var f=a[0]-k[0],b=a[1]-k[1],n=h[0]-k[0],m=h[1]-k[1];h=Math.pow(f*f+b*b,.25);a=Math.pow(n*n+m*m,.25);f=(a*a*f-h*h*n)*e;e*=a*a*b-h*h*m;b=a*(h+a)*
3;h=h*(h+a)*3;return[[k[0]+(b&&f/b),k[1]+(b&&e/b)],[k[0]-(h&&f/h),k[1]-(h&&e/h)]]}},{}],889:[function(a,p,l){var m=a("../../lib").isArrayOrTypedArray;p.exports=function(a,h,e){var f,b,k=[],l=m(a)?a.length:a,p=m(h)?h.length:h,d=m(a)?a:null,g=m(h)?h:null;d&&(f=(d.length-1)/(d[d.length-1]-d[0])/(l-1));g&&(b=(g.length-1)/(g[g.length-1]-g[0])/(p-1));var c=Infinity,q=-Infinity;for(a=0;a<p;a++){k[a]=[];var t=g?(g[a]-g[0])*b:a/(p-1);for(h=0;h<l;h++){var w=d?(d[h]-d[0])*f:h/(l-1);w-=t*e;c=Math.min(w,c);q=
Math.max(w,q);k[a][h]=w}}e=1/(q-c);f=-c*e;for(a=0;a<p;a++)for(h=0;h<l;h++)k[a][h]=e*k[a][h]+f;return k}},{"../../lib":700}],890:[function(a,p,l){function m(a,f,b){return[(2*(-.5*b[0]+1.5*f[0])+a[0])/3,(2*(-.5*b[1]+1.5*f[1])+a[1])/3]}var k=a("./catmull_rom"),h=a("../../lib").ensureArray;p.exports=function(a,f,b,n,l,p){var d,e,c,q,t=b[0].length,r=b.length,u=l?3*t-2:t,w=p?3*r-2:r;a=h(a,w);f=h(f,w);for(c=0;c<w;c++)a[c]=h(a[c],u),f[c]=h(f[c],u);for(q=e=0;e<r;e++,q+=p?3:1){var x=a[q];var A=f[q];var C=b[e];
var z=n[e];for(c=d=0;d<t;d++,c+=l?3:1)x[c]=C[d],A[c]=z[d]}if(l)for(q=e=0;e<r;e++,q+=p?3:1){d=1;for(c=3;d<t-1;d++,c+=3)x=k([b[e][d-1],n[e][d-1]],[b[e][d],n[e][d]],[b[e][d+1],n[e][d+1]],l),a[q][c-1]=x[0][0],f[q][c-1]=x[0][1],a[q][c+1]=x[1][0],f[q][c+1]=x[1][1];d=m([a[q][0],f[q][0]],[a[q][2],f[q][2]],[a[q][3],f[q][3]]);a[q][1]=d[0];f[q][1]=d[1];d=m([a[q][u-1],f[q][u-1]],[a[q][u-3],f[q][u-3]],[a[q][u-4],f[q][u-4]]);a[q][u-2]=d[0];f[q][u-2]=d[1]}if(p)for(c=0;c<u;c++){for(q=3;q<w-3;q+=3)x=k([a[q-3][c],
f[q-3][c]],[a[q][c],f[q][c]],[a[q+3][c],f[q+3][c]],p),a[q-1][c]=x[0][0],f[q-1][c]=x[0][1],a[q+1][c]=x[1][0],f[q+1][c]=x[1][1];d=m([a[0][c],f[0][c]],[a[2][c],f[2][c]],[a[3][c],f[3][c]]);a[1][c]=d[0];f[1][c]=d[1];d=m([a[w-1][c],f[w-1][c]],[a[w-3][c],f[w-3][c]],[a[w-4][c],f[w-4][c]]);a[w-2][c]=d[0];f[w-2][c]=d[1]}if(l&&p)for(q=1;q<w;q+=0===(q+1)%3?2:1){for(c=3;c<u-3;c+=3)x=k([a[q][c-3],f[q][c-3]],[a[q][c],f[q][c]],[a[q][c+3],f[q][c+3]],l),a[q][c-1]=.5*(a[q][c-1]+x[0][0]),f[q][c-1]=.5*(f[q][c-1]+x[0][1]),
a[q][c+1]=.5*(a[q][c+1]+x[1][0]),f[q][c+1]=.5*(f[q][c+1]+x[1][1]);d=m([a[q][0],f[q][0]],[a[q][2],f[q][2]],[a[q][3],f[q][3]]);a[q][1]=.5*(a[q][1]+d[0]);f[q][1]=.5*(f[q][1]+d[1]);d=m([a[q][u-1],f[q][u-1]],[a[q][u-3],f[q][u-3]],[a[q][u-4],f[q][u-4]]);a[q][u-2]=.5*(a[q][u-2]+d[0]);f[q][u-2]=.5*(f[q][u-2]+d[1])}return[a,f]}},{"../../lib":700,"./catmull_rom":888}],891:[function(a,p,l){p.exports={RELATIVE_CULL_TOLERANCE:1E-6}},{}],892:[function(a,p,l){p.exports=function(a,k,h){return k&&h?function(e,f,b,
h,k){e||(e=[]);var n;f*=3;b*=3;var d=h*h;var g=1-h,c=g*g;g=g*h*2;h=-3*c;c=3*(c-g);g=3*(g-d);var m=3*d,l=k*k,p=l*k,q=1-k,u=q*q,w=u*q;for(n=0;n<a.length;n++){var x=a[n];d=h*x[b][f]+c*x[b][f+1]+g*x[b][f+2]+m*x[b][f+3];var C=h*x[b+1][f]+c*x[b+1][f+1]+g*x[b+1][f+2]+m*x[b+1][f+3];var z=h*x[b+2][f]+c*x[b+2][f+1]+g*x[b+2][f+2]+m*x[b+2][f+3];x=h*x[b+3][f]+c*x[b+3][f+1]+g*x[b+3][f+2]+m*x[b+3][f+3];e[n]=w*d+3*(u*k*C+q*l*z)+p*x}return e}:k?function(e,f,b,h,k){e||(e=[]);var n;f*=3;var d=h*h;var g=1-h,c=g*g;g=
g*h*2;h=-3*c;c=3*(c-g);g=3*(g-d);var m=3*d,l=1-k;for(n=0;n<a.length;n++){var p=a[n];d=h*p[b][f]+c*p[b][f+1]+g*p[b][f+2]+m*p[b][f+3];p=h*p[b+1][f]+c*p[b+1][f+1]+g*p[b+1][f+2]+m*p[b+1][f+3];e[n]=l*d+k*p}return e}:h?function(e,f,b,h,k){e||(e=[]);var n;b*=3;var d=k*k,g=d*k,c=1-k,m=c*c,l=m*c;for(n=0;n<a.length;n++){var p=a[n];h=p[b][f+1]-p[b][f];var q=p[b+1][f+1]-p[b+1][f];var u=p[b+2][f+1]-p[b+2][f];p=p[b+3][f+1]-p[b+3][f];e[n]=l*h+3*(m*k*q+c*d*u)+g*p}return e}:function(e,f,b,h,k){e||(e=[]);var n,d=1-
k;for(n=0;n<a.length;n++){var g=a[n];h=g[b][f+1]-g[b][f];g=g[b+1][f+1]-g[b+1][f];e[n]=d*h+k*g}return e}}},{}],893:[function(a,p,l){p.exports=function(a,k,h){return k&&h?function(e,f,b,h,k){e||(e=[]);var n;f*=3;b*=3;var d=h*h,g=d*h,c=1-h,m=c*c,l=m*c;var p=k*k;var q=1-k,u=q*q;q=q*k*2;k=-3*u;u=3*(u-q);q=3*(q-p);var w=3*p;for(n=0;n<a.length;n++){var x=a[n];p=k*x[b][f]+u*x[b+1][f]+q*x[b+2][f]+w*x[b+3][f];var C=k*x[b][f+1]+u*x[b+1][f+1]+q*x[b+2][f+1]+w*x[b+3][f+1];var z=k*x[b][f+2]+u*x[b+1][f+2]+q*x[b+
2][f+2]+w*x[b+3][f+2];x=k*x[b][f+3]+u*x[b+1][f+3]+q*x[b+2][f+3]+w*x[b+3][f+3];e[n]=l*p+3*(m*h*C+c*d*z)+g*x}return e}:k?function(e,f,b,h,k){e||(e=[]);var n;f*=3;var d=k*k,g=d*k,c=1-k,m=c*c,l=m*c;for(n=0;n<a.length;n++){var p=a[n];h=p[b+1][f]-p[b][f];var q=p[b+1][f+1]-p[b][f+1];var u=p[b+1][f+2]-p[b][f+2];p=p[b+1][f+3]-p[b][f+3];e[n]=l*h+3*(m*k*q+c*d*u)+g*p}return e}:h?function(e,f,b,h,k){e||(e=[]);var n;b*=3;var d=1-h;var g=k*k;var c=1-k,m=c*c;c=c*k*2;k=-3*m;m=3*(m-c);c=3*(c-g);var l=3*g;for(n=0;n<
a.length;n++){var p=a[n];g=k*p[b][f]+m*p[b+1][f]+c*p[b+2][f]+l*p[b+3][f];p=k*p[b][f+1]+m*p[b+1][f+1]+c*p[b+2][f+1]+l*p[b+3][f+1];e[n]=d*g+h*p}return e}:function(e,f,b,h,k){e||(e=[]);var n,d=1-h;for(n=0;n<a.length;n++){var g=a[n];k=g[b+1][f]-g[b][f];g=g[b+1][f+1]-g[b][f+1];e[n]=d*k+h*g}return e}}},{}],894:[function(a,p,l){p.exports=function(a,k,h,e,f){var b=k-2,n=h-2;return e&&f?function(e,f,d){e||(e=[]);var g,c=Math.max(0,Math.min(Math.floor(f),b)),h=Math.max(0,Math.min(Math.floor(d),n));f=Math.max(0,
Math.min(1,f-c));var k=Math.max(0,Math.min(1,d-h));c*=3;h*=3;var m=f*f,l=m*f,p=1-f,q=p*p,r=q*p,u=k*k,w=u*k,x=1-k,E=x*x,H=E*x;for(g=0;g<a.length;g++){var z=a[g];d=r*z[h][c]+3*(q*f*z[h][c+1]+p*m*z[h][c+2])+l*z[h][c+3];var O=r*z[h+1][c]+3*(q*f*z[h+1][c+1]+p*m*z[h+1][c+2])+l*z[h+1][c+3];var I=r*z[h+2][c]+3*(q*f*z[h+2][c+1]+p*m*z[h+2][c+2])+l*z[h+2][c+3];z=r*z[h+3][c]+3*(q*f*z[h+3][c+1]+p*m*z[h+3][c+2])+l*z[h+3][c+3];e[g]=H*d+3*(E*k*O+x*u*I)+w*z}return e}:e?function(e,f,d){e||(e=[]);var g=Math.max(0,Math.min(Math.floor(f),
b)),c=Math.max(0,Math.min(Math.floor(d),n));f=Math.max(0,Math.min(1,f-g));d=Math.max(0,Math.min(1,d-c));var h;g*=3;var k=f*f,m=k*f,l=1-f,p=l*l,q=p*l,r=1-d;for(h=0;h<a.length;h++){var u=a[h];var w=r*u[c][g]+d*u[c+1][g];var x=r*u[c][g+1]+d*u[c+1][g+1];var E=r*u[c][g+2]+d*u[c+1][g+1];u=r*u[c][g+3]+d*u[c+1][g+1];e[h]=q*w+3*(p*f*x+l*k*E)+m*u}return e}:f?function(e,f,d){e||(e=[]);var g=Math.max(0,Math.min(Math.floor(f),b)),c=Math.max(0,Math.min(Math.floor(d),n));f=Math.max(0,Math.min(1,f-g));d=Math.max(0,
Math.min(1,d-c));var h;c*=3;var k=d*d,m=k*d,l=1-d,p=l*l,q=p*l,r=1-f;for(h=0;h<a.length;h++){var u=a[h];var w=r*u[c][g]+f*u[c][g+1];var x=r*u[c+1][g]+f*u[c+1][g+1];var E=r*u[c+2][g]+f*u[c+2][g+1];u=r*u[c+3][g]+f*u[c+3][g+1];e[h]=q*w+3*(p*d*x+l*k*E)+m*u}return e}:function(e,f,d){e||(e=[]);var g=Math.max(0,Math.min(Math.floor(f),b)),c=Math.max(0,Math.min(Math.floor(d),n));f=Math.max(0,Math.min(1,f-g));d=Math.max(0,Math.min(1,d-c));var h,k=1-d,m=1-f;for(h=0;h<a.length;h++){var l=a[h];var p=m*l[c][g]+
f*l[c][g+1];l=m*l[c+1][g]+f*l[c+1][g+1];e[h]=k*p+d*l}return e}}},{}],895:[function(a,p,l){var m=a("../../lib"),k=a("./xy_defaults"),h=a("./ab_defaults"),e=a("./attributes"),f=a("../../components/color/attributes");p.exports=function(a,n,l,p){function b(b,c){return m.coerce(a,n,e,b,c)}n._clipPathId="clip"+n.uid+"carpet";l=b("color",f.defaultLine);m.coerceFont(b,"font");b("carpet");h(a,n,p,b,l);n.a&&n.b?(3>n.a.length&&(n.aaxis.smoothing=0),3>n.b.length&&(n.baxis.smoothing=0),k(a,n,b)||(n.visible=!1),
n._cheater&&b("cheaterslope")):n.visible=!1}},{"../../components/color/attributes":576,"../../lib":700,"./ab_defaults":878,"./attributes":880,"./xy_defaults":904}],896:[function(a,p,l){l={};l.attributes=a("./attributes");l.supplyDefaults=a("./defaults");l.plot=a("./plot");l.calc=a("./calc");l.animatable=!0;l.isContainer=!0;l.moduleType="trace";l.name="carpet";l.basePlotModule=a("../../plots/cartesian");l.categories="cartesian svg carpet carpetAxis notLegendIsolatable noMultiCategory".split(" ");l.meta=
{};p.exports=l},{"../../plots/cartesian":759,"./attributes":880,"./calc":884,"./defaults":895,"./plot":901}],897:[function(a,p,l){p.exports=function(a,k){for(var h=a._fullData.length,e,f=0;f<h;f++){var b=a._fullData[f];if(b.index!==k.index&&"carpet"===b.type&&(e||(e=b),b.carpet===k.carpet))return b}return e}},{}],898:[function(a,p,l){p.exports=function(a,k,h){if(0===a.length)return"";var e,f=[],b=h?3:1;for(e=0;e<a.length;e+=b)f.push(a[e]+","+k[e]),h&&e<a.length-b&&(f.push("C"),f.push([a[e+1]+","+
k[e+1],a[e+2]+","+k[e+2]+" "].join(" ")));return f.join(h?"":"L")}},{}],899:[function(a,p,l){var m=a("../../lib").isArrayOrTypedArray;p.exports=function(a,h,e){var f;m(a)?a.length>h.length&&(a=a.slice(0,h.length)):a=[];for(f=0;f<h.length;f++)a[f]=e(h[f]);return a}},{"../../lib":700}],900:[function(a,p,l){p.exports=function(a,k,h,e,f,b){var n=f[0]*a.dpdx(k),m=f[1]*a.dpdy(h),l=1,d=1;b&&(d=Math.max(0,(f[0]*b[0]+f[1]*b[1])/Math.sqrt(f[0]*f[0]+f[1]*f[1])/Math.sqrt(b[0]*b[0]+b[1]*b[1])));f=180*Math.atan2(m,
n)/Math.PI;-90>f?(f+=180,l=-l):90<f&&(f-=180,l=-l);return{angle:f,flip:l,p:a.c2p(e,k,h),offsetMultplier:d}}},{}],901:[function(a,p,l){function m(a,c,d,f,g,h){f="const-"+g+"-lines";d=d.selectAll("."+f).data(h);d.enter().append("path").classed(f,!0).style("vector-effect","non-scaling-stroke");d.each(function(d){var f=d.y,g=b([],d.x,a.c2p);f=b([],f,c.c2p);g="M"+n(g,f,d.smoothing);e.select(this).attr("d",g).style("stroke-width",d.width).style("stroke",d.color).style("fill","none")});d.exit().remove()}
function k(a,b,c,d,g,h,k,n){g=h.selectAll("text."+n).data(k);g.enter().append("text").classed(n,!0);var m=0,l={};g.each(function(g,h){if("auto"===g.axis.tickangle)var k=q(d,b,c,g.xy,g.dxy);else k=(g.axis.tickangle+180)*Math.PI/180,k=q(d,b,c,g.xy,[Math.cos(k),Math.sin(k)]);h||(l={angle:k.angle,flip:k.flip});h=(g.endAnchor?-1:1)*k.flip;var n=e.select(this).attr({"text-anchor":0<h?"start":"end","data-notex":1}).call(f.font,g.font).text(g.text).call(r.convertToTspans,a),p=f.bBox(this);n.attr("transform",
"translate("+k.p[0]+","+k.p[1]+") rotate("+k.angle+")translate("+g.axis.labelpadding*h+","+.3*p.height+")");m=Math.max(m,p.width+g.axis.labelpadding)});g.exit().remove();l.maxExtent=m;return l}function h(a,b,d,h,k,n,m,l,p,u,w){h=[];m.title.text&&h.push(m.title.text);b=b.selectAll("text."+w).data(h);var t=u.maxExtent;b.enter().append("text").classed(w,!0);b.each(function(){var b=q(d,l,p,k,n);-1===["start","both"].indexOf(m.showticklabels)&&(t=0);var h=m.title.font.size;t+=h+m.title.offset;var v=(u.angle+
(0>u.flip?180:0)-b.angle+450)%360;v=90<v&&270>v;var w=e.select(this);w.text(m.title.text).call(r.convertToTspans,a);v&&(t=(-r.lineCount(w)+c)*g*h-t);w.attr("transform","translate("+b.p[0]+","+b.p[1]+") rotate("+b.angle+") translate(0,"+t+")").classed("user-select-none",!0).attr("text-anchor","middle").call(f.font,m.title.font)});b.exit().remove()}var e=a("d3"),f=a("../../components/drawing"),b=a("./map_1d_array"),n=a("./makepath"),q=a("./orient_text"),r=a("../../lib/svg_text_utils"),d=a("../../lib");
a=a("../../constants/alignment");p.exports=function(a,c,f,g){var l=c.xaxis,p=c.yaxis,t=a._fullLayout._clips;d.makeTraceGroups(g,f,"trace").each(function(c){var f=e.select(this),g=c[0];c=g.trace;var r=c.aaxis,v=c.baxis,u=d.ensureSingle(f,"g","minorlayer"),w=d.ensureSingle(f,"g","majorlayer"),y=d.ensureSingle(f,"g","boundarylayer"),x=d.ensureSingle(f,"g","labellayer");f.style("opacity",c.opacity);m(l,p,w,r,"a",r._gridlines,!0);m(l,p,w,v,"b",v._gridlines,!0);m(l,p,u,r,"a",r._minorgridlines,!0);m(l,p,
u,v,"b",v._minorgridlines,!0);m(l,p,y,r,"a-boundary",r._boundarylines);m(l,p,y,v,"b-boundary",v._boundarylines);f=k(a,l,p,c,g,x,r._labels,"a-label");v=k(a,l,p,c,g,x,v._labels,"b-label");r=.5*(c.a[0]+c.a[c.a.length-1]);u=c.b[0];w=c.ab2xy(r,u,!0);y=c.dxyda_rough(r,u);void 0===f.angle&&d.extendFlat(f,q(c,l,p,w,c.dxydb_rough(r,u)));h(a,x,c,g,w,y,c.aaxis,l,p,f,"a-title");r=c.a[0];u=.5*(c.b[0]+c.b[c.b.length-1]);w=c.ab2xy(r,u,!0);y=c.dxydb_rough(r,u);void 0===v.angle&&d.extendFlat(v,q(c,l,p,w,c.dxyda_rough(r,
u)));h(a,x,c,g,w,y,c.baxis,l,p,v,"b-title");x=t.select("#"+c._clipPathId);x.size()||(x=t.append("clipPath").classed("carpetclip",!0));f=d.ensureSingle(x,"path","carpetboundary");w=g.clipsegments;y=[];for(u=0;u<w.length;u++)g=w[u],v=b([],g.x,l.c2p),r=b([],g.y,p.c2p),y.push(n(v,r,g.bicubic));g="M"+y.join("L")+"Z";x.attr("id",c._clipPathId);f.attr("d",g)})};var g=a.LINE_SPACING,c=(1-a.MID_SHIFT)/g+1},{"../../components/drawing":598,"../../constants/alignment":672,"../../lib":700,"../../lib/svg_text_utils":724,
"./makepath":898,"./map_1d_array":899,"./orient_text":900,d3:154}],902:[function(a,p,l){var m=a("./constants"),k=a("../../lib/search").findBin,h=a("./compute_control_points"),e=a("./create_spline_evaluator"),f=a("./create_i_derivative_evaluator"),b=a("./create_j_derivative_evaluator");p.exports=function(a){var n=a._a,l=a._b,d=n.length,g=l.length,c=a.aaxis,p=a.baxis,q=n[0],w=n[d-1],x=l[0],D=l[g-1],G=n[n.length-1]-n[0],A=l[l.length-1]-l[0],C=G*m.RELATIVE_CULL_TOLERANCE,z=A*m.RELATIVE_CULL_TOLERANCE;
q-=C;w+=C;x-=z;D+=z;a.isVisible=function(a,b){return a>q&&a<w&&b>x&&b<D};a.isOccluded=function(a,b){return a<q||a>w||b<x||b>D};a.setScale=function(){var k=h(a._xctrl,a._yctrl,a._x,a._y,c.smoothing,p.smoothing);a._xctrl=k[0];a._yctrl=k[1];a.evalxy=e([a._xctrl,a._yctrl],d,g,c.smoothing,p.smoothing);a.dxydi=f([a._xctrl,a._yctrl],c.smoothing,p.smoothing);a.dxydj=b([a._xctrl,a._yctrl],c.smoothing,p.smoothing)};a.i2a=function(a){var b=Math.max(0,Math.floor(a[0]),d-2);a=a[0]-b;return(1-a)*n[b]+a*n[b+1]};
a.j2b=function(a){var b=Math.max(0,Math.floor(a[1]),d-2);a=a[1]-b;return(1-a)*l[b]+a*l[b+1]};a.ij2ab=function(b){return[a.i2a(b[0]),a.j2b(b[1])]};a.a2i=function(a){var b=Math.max(0,Math.min(k(a,n),d-2)),c=n[b];return Math.max(0,Math.min(d-1,b+(a-c)/(n[b+1]-c)))};a.b2j=function(a){var b=Math.max(0,Math.min(k(a,l),g-2)),c=l[b];return Math.max(0,Math.min(g-1,b+(a-c)/(l[b+1]-c)))};a.ab2ij=function(b){return[a.a2i(b[0]),a.b2j(b[1])]};a.i2c=function(b,c){return a.evalxy([],b,c)};a.ab2xy=function(b,c,e){if(!e&&
(b<n[0]||b>n[d-1]|c<l[0]||c>l[g-1]))return[!1,!1];var f=a.a2i(b),h=a.b2j(c),k=a.evalxy([],f,h);if(e){var m=e=0,p=[],q;b<n[0]?(f=q=0,e=(b-n[0])/(n[1]-n[0])):b>n[d-1]?(q=d-2,f=1,e=(b-n[d-1])/(n[d-1]-n[d-2])):(q=Math.max(0,Math.min(d-2,Math.floor(f))),f-=q);c<l[0]?(h=b=0,m=(c-l[0])/(l[1]-l[0])):c>l[g-1]?(b=g-2,h=1,m=(c-l[g-1])/(l[g-1]-l[g-2])):(b=Math.max(0,Math.min(g-2,Math.floor(h))),h-=b);e&&(a.dxydi(p,q,b,f,h),k[0]+=p[0]*e,k[1]+=p[1]*e);m&&(a.dxydj(p,q,b,f,h),k[0]+=p[0]*m,k[1]+=p[1]*m)}return k};
a.c2p=function(a,b,c){return[b.c2p(a[0]),c.c2p(a[1])]};a.p2x=function(a,b,c){return[b.p2c(a[0]),c.p2c(a[1])]};a.dadi=function(a){a=Math.max(0,Math.min(n.length-2,a));return n[a+1]-n[a]};a.dbdj=function(a){a=Math.max(0,Math.min(l.length-2,a));return l[a+1]-l[a]};a.dxyda=function(b,c,d,e){c=a.dxydi(null,b,c,d,e);b=a.dadi(b,d);return[c[0]/b,c[1]/b]};a.dxydb=function(b,c,d,e){b=a.dxydj(null,b,c,d,e);c=a.dbdj(c,e);return[b[0]/c,b[1]/c]};a.dxyda_rough=function(b,c,d){d=G*(d||.1);var e=a.ab2xy(b+d,c,!0);
b=a.ab2xy(b-d,c,!0);return[.5*(e[0]-b[0])/d,.5*(e[1]-b[1])/d]};a.dxydb_rough=function(b,c,d){d=A*(d||.1);var e=a.ab2xy(b,c+d,!0);b=a.ab2xy(b,c-d,!0);return[.5*(e[0]-b[0])/d,.5*(e[1]-b[1])/d]};a.dpdx=function(a){return a._m};a.dpdy=function(a){return a._m}}},{"../../lib/search":719,"./compute_control_points":890,"./constants":891,"./create_i_derivative_evaluator":892,"./create_j_derivative_evaluator":893,"./create_spline_evaluator":894}],903:[function(a,p,l){var m=a("../../lib");p.exports=function(a,
h,e){var f,b,k=[],l=[],p=a[0].length,d=a.length,g=0;for(f=0;f<p;f++)for(b=0;b<d;b++){if(void 0===a[b][f]){k.push(f);l.push(b);var c=a[b];var q=f,t=void 0,w=0,x=0;0<f&&void 0!==(t=a[b][f-1])&&(x++,w+=t);f<p-1&&void 0!==(t=a[b][f+1])&&(x++,w+=t);0<b&&void 0!==(t=a[b-1][f])&&(x++,w+=t);b<d-1&&void 0!==(t=a[b+1][f])&&(x++,w+=t);c[q]=w/Math.max(1,x)}g=Math.max(g,Math.abs(a[b][f]))}if(!k.length)return a;t=0;w=k.length;do{for(c=q=0;c<w;c++){f=k[c];b=l[c];var D=x=0;if(0===f){var G=Math.min(p-1,2);var A=h[G];
var C=h[1];G=a[b][G];var z=a[b][1];D+=z+(z-G)*(h[0]-C)/(C-A);x++}else f===p-1&&(G=Math.max(0,p-3),A=h[G],C=h[p-2],G=a[b][G],z=a[b][p-2],D+=z+(z-G)*(h[p-1]-C)/(C-A),x++);(0===f||f===p-1)&&0<b&&b<d-1&&(A=e[b+1]-e[b],C=e[b]-e[b-1],D+=(C*a[b+1][f]+A*a[b-1][f])/(C+A),x++);0===b?(G=Math.min(d-1,2),A=e[G],C=e[1],G=a[G][f],z=a[1][f],D+=z+(z-G)*(e[0]-C)/(C-A),x++):b===d-1&&(G=Math.max(0,d-3),A=e[G],C=e[d-2],G=a[G][f],z=a[d-2][f],D+=z+(z-G)*(e[d-1]-C)/(C-A),x++);(0===b||b===d-1)&&0<f&&f<p-1&&(A=h[f+1]-h[f],
C=h[f]-h[f-1],D+=(C*a[b][f+1]+A*a[b][f-1])/(C+A),x++);if(x)D/=x;else{D=h[f+1]-h[f];A=h[f]-h[f-1];C=e[b+1]-e[b];G=e[b]-e[b-1];z=D*A*(D+A);var J=C*G*(C+G);D=(z*(G*a[b+1][f]+C*a[b-1][f])+J*(A*a[b][f+1]+D*a[b][f-1]))/(J*(A+D)+z*(G+C))}D-=a[b][f];A=D/g;q+=A*A;x=x?0:.85;a[b][f]+=D*(1+x)}q=Math.sqrt(q)}while(100>t++&&1E-5<q);m.log("Smoother converged to",q,"after",t,"iterations");return a}},{"../../lib":700}],904:[function(a,p,l){var m=a("../../lib").isArray1D;p.exports=function(a,h,e){var f=(a=e("x"))&&
a.length,b=(e=e("y"))&&e.length;if(!f&&!b)return!1;h._cheater=!a;f&&!m(a)||b&&!m(e)?h._length=null:(a=f?a.length:Infinity,b&&(a=Math.min(a,e.length)),h.a&&h.a.length&&(a=Math.min(a,h.a.length)),h.b&&h.b.length&&(a=Math.min(a,h.b.length)),h._length=a);return!0}},{"../../lib":700}],905:[function(a,p,l){l=a("../../components/fx/hovertemplate_attributes");var m=a("../scattergeo/attributes"),k=a("../../components/colorscale/attributes"),h=a("../../components/colorbar/attributes"),e=a("../../plots/attributes");
a=a("../../lib/extend").extendFlat;var f=m.marker.line;p.exports=a({locations:{valType:"data_array",editType:"calc"},locationmode:m.locationmode,z:{valType:"data_array",editType:"calc"},text:a({},m.text,{}),hovertext:a({},m.hovertext,{}),marker:{line:{color:f.color,width:a({},f.width,{dflt:1}),editType:"calc"},opacity:{valType:"number",arrayOk:!0,min:0,max:1,dflt:1,editType:"style"},editType:"calc"},selected:{marker:{opacity:m.selected.marker.opacity,editType:"plot"},editType:"plot"},unselected:{marker:{opacity:m.unselected.marker.opacity,
editType:"plot"},editType:"plot"},hoverinfo:a({},e.hoverinfo,{editType:"calc",flags:["location","z","text","name"]}),hovertemplate:l()},k("",{cLetter:"z",editTypeOverride:"calc"}),{colorbar:h})},{"../../components/colorbar/attributes":578,"../../components/colorscale/attributes":584,"../../components/fx/hovertemplate_attributes":615,"../../lib/extend":690,"../../plots/attributes":745,"../scattergeo/attributes":1091}],906:[function(a,p,l){var m=a("fast-isnumeric"),k=a("../../constants/numerical").BADNUM,
h=a("../../components/colorscale/calc"),e=a("../scatter/arrays_to_calcdata"),f=a("../scatter/calc_selection");p.exports=function(a,n){for(var b=n._length,l=Array(b),d=0;d<b;d++){var g=l[d]={},c=n.locations[d],p=n.z[d];g.loc="string"===typeof c?c:null;g.z=m(p)?p:k}e(l,n);h(a,n,{vals:n.z,containerStr:"",cLetter:"z"});f(l,n);return l}},{"../../components/colorscale/calc":585,"../../constants/numerical":677,"../scatter/arrays_to_calcdata":1050,"../scatter/calc_selection":1053,"fast-isnumeric":221}],907:[function(a,
p,l){var m=a("../../lib"),k=a("../../components/colorscale/defaults"),h=a("./attributes");p.exports=function(a,f,b,n){function e(b,e){return m.coerce(a,f,h,b,e)}b=e("locations");var l=e("z");b&&b.length&&m.isArrayOrTypedArray(l)&&l.length?(f._length=Math.min(b.length,l.length),e("locationmode"),e("text"),e("hovertext"),e("hovertemplate"),e("marker.line.color"),e("marker.line.width"),e("marker.opacity"),k(a,f,n,e,{prefix:"",cLetter:"z"}),m.coerceSelectionMarkerOpacity(f,e)):f.visible=!1}},{"../../components/colorscale/defaults":587,
"../../lib":700,"./attributes":905}],908:[function(a,p,l){p.exports=function(a,k){a.location=k.location;a.z=k.z;return a}},{}],909:[function(a,p,l){var m=a("../../plots/cartesian/axes"),k=a("./attributes"),h=a("../scatter/fill_hover_text");p.exports=function(a,f,b){var e=a.cd,l=e[0].trace,p=a.subplot,d,g;for(d=0;d<e.length;d++){var c=e[d];var q=!1;if(c._polygons){for(g=0;g<c._polygons.length;g++)c._polygons[g].contains([f,b])&&(q=!q),c._polygons[g].contains([f+360,b])&&(q=!q);if(q)break}}if(q&&c)return a.x0=
a.x1=a.xa.c2p(c.ct),a.y0=a.y1=a.ya.c2p(c.ct),a.index=c.index,a.location=c.loc,a.z=c.z,a.hovertemplate=c.hovertemplate,f=c,p=p.mockAxis,l.hovertemplate||(b=f.hi||l.hoverinfo,d="all"===b?k.hoverinfo.flags:b.split("+"),b=-1!==d.indexOf("name"),e=-1!==d.indexOf("location"),c=-1!==d.indexOf("z"),d=-1!==d.indexOf("text"),g=[],!b&&e?a.nameOverride=f.loc:(b&&(a.nameOverride=l.name),e&&g.push(f.loc)),c&&g.push(m.tickText(p,p.c2l(f.z),"hover").text),d&&h(f,l,g),a.extraText=g.join("\x3cbr\x3e")),[a]}},{"../../plots/cartesian/axes":748,
"../scatter/fill_hover_text":1059,"./attributes":905}],910:[function(a,p,l){l={};l.attributes=a("./attributes");l.supplyDefaults=a("./defaults");l.colorbar=a("../heatmap/colorbar");l.calc=a("./calc");l.plot=a("./plot");l.style=a("./style").style;l.styleOnSelect=a("./style").styleOnSelect;l.hoverPoints=a("./hover");l.eventData=a("./event_data");l.selectPoints=a("./select");l.moduleType="trace";l.name="choropleth";l.basePlotModule=a("../../plots/geo");l.categories=["geo","noOpacity"];l.meta={};p.exports=
l},{"../../plots/geo":778,"../heatmap/colorbar":951,"./attributes":905,"./calc":906,"./defaults":907,"./event_data":908,"./hover":909,"./plot":911,"./select":912,"./style":913}],911:[function(a,p,l){function m(a,d){var e=a[0].trace,c=a.length;d=b(e,d);for(var f=0;f<c;f++){var h=a[f],m=n(e.locationmode,h.loc,d);m?(h.geojson=m,h.ct=m.properties.ct,h.index=f,h._polygons=k(m)):h.geojson=null}}function k(a){function b(a){for(var b=0;b<a.length-1;b++)if(0<a[b][0]&&0>a[b+1][0])return b;return null}var e=
a.geometry,c=e.coordinates;a=a.id;var h=[],k,n;a="RUS"===a||"FJI"===a?function(a){if(null===b(a))var c=a;else for(c=Array(a.length),n=0;n<a.length;n++)c[n]=[0>a[n][0]?a[n][0]+360:a[n][0],a[n][1]];h.push(f.tester(c))}:"ATA"===a?function(a){var c=b(a);if(null===c)return h.push(f.tester(a));var d=Array(a.length+1),e=0;for(n=0;n<a.length;n++)n>c?d[e++]=[a[n][0]+360,a[n][1]]:n===c?(d[e++]=a[n],d[e++]=[a[n][0],-90]):d[e++]=a[n];a=f.tester(d);a.pts.pop();h.push(a)}:function(a){h.push(f.tester(a))};switch(e.type){case "MultiPolygon":for(e=
0;e<c.length;e++)for(k=0;k<c[e].length;k++)a(c[e][k]);break;case "Polygon":for(e=0;e<c.length;e++)a(c[e])}return h}var h=a("d3"),e=a("../../lib"),f=a("../../lib/polygon"),b=a("../../lib/topojson_utils").getTopojsonFeatures,n=a("../../lib/geo_location_utils").locationToFeature,q=a("./style").style;p.exports=function(a,b,f){for(var c=0;c<f.length;c++)m(f[c],b.topojson);b=b.layers.backplot.select(".choroplethlayer");e.makeTraceGroups(b,f,"trace choropleth").each(function(b){var c=(b[0].node3=h.select(this)).selectAll("path.choroplethlocation").data(e.identity);
c.enter().append("path").classed("choroplethlocation",!0);c.exit().remove();q(a,b)})}},{"../../lib":700,"../../lib/geo_location_utils":693,"../../lib/polygon":712,"../../lib/topojson_utils":727,"./style":913,d3:154}],912:[function(a,p,l){p.exports=function(a,k){var h=a.cd,e=a.xaxis,f=a.yaxis,b=[],n,m;if(!1===k)for(n=0;n<h.length;n++)h[n].selected=0;else for(n=0;n<h.length;n++){var l=h[n];if(m=l.ct){var d=e.c2p(m);var g=f.c2p(m);k.contains([d,g],null,n,a)?(b.push({pointNumber:n,lon:m[0],lat:m[1]}),
l.selected=1):l.selected=0}}return b}},{}],913:[function(a,p,l){function m(a,n){var b=n[0].trace;n=n[0].node3.selectAll(".choroplethlocation");var m=b.marker||{},d=m.line||{},g=f.makeColorScaleFunc(f.extractScale(b,{cLetter:"z"}));n.each(function(a){k.select(this).attr("fill",g(a.z)).call(h.stroke,a.mlc||d.color).call(e.dashLine,"",a.mlw||d.width||0).style("opacity",m.opacity)});e.selectedPointStyle(n,b,a)}var k=a("d3"),h=a("../../components/color"),e=a("../../components/drawing"),f=a("../../components/colorscale");
p.exports={style:function(a,e){e&&m(a,e)},styleOnSelect:function(a,f){var b=f[0].node3,h=f[0].trace;h.selectedpoints?e.selectedPointStyle(b.selectAll(".choroplethlocation"),h,a):m(a,f)}}},{"../../components/color":577,"../../components/colorscale":589,"../../components/drawing":598,d3:154}],914:[function(a,p,l){l=a("../../components/colorscale/attributes");var m=a("../../components/colorbar/attributes"),k=a("../../components/fx/hovertemplate_attributes"),h=a("../mesh3d/attributes"),e=a("../../plots/attributes");
a=a("../../lib/extend").extendFlat;var f={x:{valType:"data_array",editType:"calc+clearAxisTypes"},y:{valType:"data_array",editType:"calc+clearAxisTypes"},z:{valType:"data_array",editType:"calc+clearAxisTypes"},u:{valType:"data_array",editType:"calc"},v:{valType:"data_array",editType:"calc"},w:{valType:"data_array",editType:"calc"},sizemode:{valType:"enumerated",values:["scaled","absolute"],editType:"calc",dflt:"scaled"},sizeref:{valType:"number",editType:"calc",min:0},anchor:{valType:"enumerated",
editType:"calc",values:["tip","tail","cm","center"],dflt:"cm"},text:{valType:"string",dflt:"",arrayOk:!0,editType:"calc"},hovertext:{valType:"string",dflt:"",arrayOk:!0,editType:"calc"},hovertemplate:k({editType:"calc"},{keys:["norm"]})};a(f,l("",{colorAttr:"u/v/w norm",showScaleDflt:!0,editTypeOverride:"calc"}),{colorbar:m});["opacity","lightposition","lighting"].forEach(function(a){f[a]=h[a]});f.hoverinfo=a({},e.hoverinfo,{editType:"calc",flags:"x y z u v w norm text name".split(" "),dflt:"x+y+z+norm+text+name"});
f.transforms=void 0;p.exports=f},{"../../components/colorbar/attributes":578,"../../components/colorscale/attributes":584,"../../components/fx/hovertemplate_attributes":615,"../../lib/extend":690,"../../plots/attributes":745,"../mesh3d/attributes":994}],915:[function(a,p,l){var m=a("../../components/colorscale/calc");p.exports=function(a,h){for(var e=h.u,f=h.v,b=h.w,k=Math.min(h.x.length,h.y.length,h.z.length,e.length,f.length,b.length),l=-Infinity,p=Infinity,d=0;d<k;d++){var g=e[d],c=f[d],q=b[d];
g=Math.sqrt(g*g+c*c+q*q);l=Math.max(l,g);p=Math.min(p,g)}h._len=k;h._normMax=l;m(a,h,{vals:[p,l],containerStr:"",cLetter:"c"})}},{"../../components/colorscale/calc":585}],916:[function(a,p,l){function m(a,b){this.scene=a;this.uid=b;this.data=this.mesh=null}function k(a,c){function e(a,b){var c=g[b],d=k[q[b]];return f(a,function(a){return c.d2l(a)*d})}var g=a.fullSceneLayout,k=a.dataScale;a={};a.vectors=n(e(c.u,"xaxis"),e(c.v,"yaxis"),e(c.w,"zaxis"),c._len);a.positions=n(e(c.x,"xaxis"),e(c.y,"yaxis"),
e(c.z,"zaxis"),c._len);a.colormap=b(c);a.vertexIntensityBounds=[c.cmin/c._normMax,c.cmax/c._normMax];a.coneOffset=r[c.anchor];a.coneSize="scaled"===c.sizemode?c.sizeref||.5:c.sizeref&&c._normMax?c.sizeref/c._normMax:.5;a=h(a);var m=c.lightposition;a.lightPosition=[m.x,m.y,m.z];a.ambient=c.lighting.ambient;a.diffuse=c.lighting.diffuse;a.specular=c.lighting.specular;a.roughness=c.lighting.roughness;a.fresnel=c.lighting.fresnel;a.opacity=c.opacity;c._pad=d[c.anchor]*a.vectorScale*a.coneScale*c._normMax;
return a}var h=a("gl-cone3d"),e=a("gl-cone3d").createConeMesh,f=a("../../lib").simpleMap,b=a("../../lib/gl_format_color").parseColorScale,n=a("../../plots/gl3d/zip3");a=m.prototype;a.handlePick=function(a){if(a.object===this.mesh){var b=a.index=a.data.index,d=this.data.u[b],e=this.data.v[b],f=this.data.w[b];a.traceCoordinate=[this.data.x[b],this.data.y[b],this.data.z[b],d,e,f,Math.sqrt(d*d+e*e+f*f)];d=this.data.hovertext||this.data.text;Array.isArray(d)&&void 0!==d[b]?a.textLabel=d[b]:d&&(a.textLabel=
d);return!0}};var q={xaxis:0,yaxis:1,zaxis:2},r={tip:1,tail:0,cm:.25,center:.5},d={tip:1,tail:1,cm:.75,center:.5};a.update=function(a){this.data=a;a=k(this.scene,a);this.mesh.update(a)};a.dispose=function(){this.scene.glplot.remove(this.mesh);this.mesh.dispose()};p.exports=function(a,b){var c=a.glplot.gl,d=k(a,b);c=e(c,d);d=new m(a,b.uid);d.mesh=c;d.data=b;c._trace=d;a.glplot.add(c);return d}},{"../../lib":700,"../../lib/gl_format_color":697,"../../plots/gl3d/zip3":800,"gl-cone3d":238}],917:[function(a,
p,l){var m=a("../../lib"),k=a("../../components/colorscale/defaults"),h=a("./attributes");p.exports=function(a,f,b,n){function e(b,c){return m.coerce(a,f,h,b,c)}b=e("u");var l=e("v"),d=e("w"),g=e("x"),c=e("y"),p=e("z");b&&b.length&&l&&l.length&&d&&d.length&&g&&g.length&&c&&c.length&&p&&p.length?(e("sizeref"),e("sizemode"),e("anchor"),e("lighting.ambient"),e("lighting.diffuse"),e("lighting.specular"),e("lighting.roughness"),e("lighting.fresnel"),e("lightposition.x"),e("lightposition.y"),e("lightposition.z"),
k(a,f,n,e,{prefix:"",cLetter:"c"}),e("text"),e("hovertext"),e("hovertemplate"),f._length=null):f.visible=!1}},{"../../components/colorscale/defaults":587,"../../lib":700,"./attributes":914}],918:[function(a,p,l){p.exports={moduleType:"trace",name:"cone",basePlotModule:a("../../plots/gl3d"),categories:["gl3d"],attributes:a("./attributes"),supplyDefaults:a("./defaults"),colorbar:{min:"cmin",max:"cmax"},calc:a("./calc"),plot:a("./convert"),eventData:function(a,k){a.norm=k.traceCoordinate[6];return a},
meta:{}}},{"../../plots/gl3d":789,"./attributes":914,"./calc":915,"./convert":916,"./defaults":917}],919:[function(a,p,l){l=a("../heatmap/attributes");var m=a("../scatter/attributes"),k=a("../../components/colorscale/attributes"),h=a("../../components/colorbar/attributes"),e=a("../../components/drawing/attributes").dash,f=a("../../plots/font_attributes"),b=a("../../lib/extend").extendFlat,n=a("../../constants/filter_ops");a=n.COMPARISON_OPS2;n=n.INTERVAL_OPS;m=m.line;p.exports=b({z:l.z,x:l.x,x0:l.x0,
dx:l.dx,y:l.y,y0:l.y0,dy:l.dy,text:l.text,hovertext:l.hovertext,transpose:l.transpose,xtype:l.xtype,ytype:l.ytype,zhoverformat:l.zhoverformat,hovertemplate:l.hovertemplate,connectgaps:l.connectgaps,fillcolor:{valType:"color",editType:"calc"},autocontour:{valType:"boolean",dflt:!0,editType:"calc",impliedEdits:{"contours.start":void 0,"contours.end":void 0,"contours.size":void 0}},ncontours:{valType:"integer",dflt:15,min:1,editType:"calc"},contours:{type:{valType:"enumerated",values:["levels","constraint"],
dflt:"levels",editType:"calc"},start:{valType:"number",dflt:null,editType:"plot",impliedEdits:{"^autocontour":!1}},end:{valType:"number",dflt:null,editType:"plot",impliedEdits:{"^autocontour":!1}},size:{valType:"number",dflt:null,min:0,editType:"plot",impliedEdits:{"^autocontour":!1}},coloring:{valType:"enumerated",values:["fill","heatmap","lines","none"],dflt:"fill",editType:"calc"},showlines:{valType:"boolean",dflt:!0,editType:"plot"},showlabels:{valType:"boolean",dflt:!1,editType:"plot"},labelfont:f({editType:"plot",
colorEditType:"style"}),labelformat:{valType:"string",dflt:"",editType:"plot"},operation:{valType:"enumerated",values:[].concat(a).concat(n),dflt:"\x3d",editType:"calc"},value:{valType:"any",dflt:0,editType:"calc"},editType:"calc",impliedEdits:{autocontour:!1}},line:{color:b({},m.color,{editType:"style+colorbars"}),width:b({},m.width,{editType:"style+colorbars"}),dash:e,smoothing:b({},m.smoothing,{}),editType:"plot"}},k("",{cLetter:"z",autoColorDflt:!1,editTypeOverride:"calc"}),{colorbar:h})},{"../../components/colorbar/attributes":578,
"../../components/colorscale/attributes":584,"../../components/drawing/attributes":597,"../../constants/filter_ops":673,"../../lib/extend":690,"../../plots/font_attributes":774,"../heatmap/attributes":948,"../scatter/attributes":1051}],920:[function(a,p,l){var m=a("../heatmap/calc"),k=a("./set_contours");p.exports=function(a,e){a=m(a,e);k(e);return a}},{"../heatmap/calc":949,"./set_contours":938}],921:[function(a,p,l){p.exports=function(a,k,h,e){var f;a=a[0];var b=a.x.length;var n=a.y.length,m=a.z,
l=e.contours;e=-Infinity;h=Infinity;for(f=0;f<n;f++)h=Math.min(h,m[f][0]),h=Math.min(h,m[f][b-1]),e=Math.max(e,m[f][0]),e=Math.max(e,m[f][b-1]);for(f=1;f<b-1;f++)h=Math.min(h,m[0][f]),h=Math.min(h,m[n-1][f]),e=Math.max(e,m[0][f]),e=Math.max(e,m[n-1][f]);a.prefixBoundary=!1;switch(k){case "\x3e":l.value>e&&(a.prefixBoundary=!0);break;case "\x3c":l.value<h&&(a.prefixBoundary=!0);break;case "[]":k=Math.min.apply(null,l.value);b=Math.max.apply(null,l.value);if(b<h||k>e)a.prefixBoundary=!0;break;case "][":k=
Math.min.apply(null,l.value),b=Math.max.apply(null,l.value),k<h&&b>e&&(a.prefixBoundary=!0)}}},{}],922:[function(a,p,l){var m=a("../../components/colorbar/draw"),k=a("./make_color_map"),h=a("./end_plus");p.exports=function(a,f){var b=f[0].trace,e="cb"+b.uid;a._fullLayout._infolayer.selectAll("."+e).remove();if(b.showscale){a=f[0].t.cb=m(a,e);f=b.contours;e=b.line;var l=f.size||1,p=f.coloring,d=k(b,{isColorbar:!0});a.fillgradient("heatmap"===p?b.colorscale:"").zrange("heatmap"===p?[b.zmin,b.zmax]:
"").fillcolor("fill"===p?d:"").line({color:"lines"===p?d:e.color,width:!1!==f.showlines?e.width:0,dash:e.dash}).levels({start:f.start,end:h(f),size:l}).options(b.colorbar)()}}},{"../../components/colorbar/draw":582,"./end_plus":930,"./make_color_map":935}],923:[function(a,p,l){p.exports={BOTTOMSTART:[1,9,13,104,713],TOPSTART:[4,6,7,104,713],LEFTSTART:[8,12,14,208,1114],RIGHTSTART:[2,3,11,208,1114],NEWDELTA:[null,[-1,0],[0,-1],[-1,0],[1,0],null,[0,-1],[-1,0],[0,1],[0,1],null,[0,1],[1,0],[1,0],[0,-1]],
CHOOSESADDLE:{104:[4,1],208:[2,8],713:[7,13],1114:[11,14]},SADDLEREMAINDER:{1:4,2:8,4:1,7:13,8:2,11:14,13:7,14:11},LABELDISTANCE:2,LABELINCREASE:10,LABELMIN:3,LABELMAX:10,LABELOPTIMIZER:{EDGECOST:1,ANGLECOST:1,NEIGHBORCOST:5,SAMELEVELFACTOR:10,SAMELEVELDISTANCE:5,MAXCOST:100,INITIALSEARCHPOINTS:10,ITERATIONS:5}}},{}],924:[function(a,p,l){var m=a("fast-isnumeric"),k=a("./label_defaults");l=a("../../components/color");var h=l.addOpacity,e=l.opacity;a=a("../../constants/filter_ops");var f=a.CONSTRAINT_REDUCTION,
b=a.COMPARISON_OPS2;p.exports=function(a,l,p,d,g,c){var n=l.contours,q=p("contours.operation");n._operation=f[q];if(-1===b.indexOf(n.operation))if(p("contours.value",[0,1]),Array.isArray(n.value))if(2<n.value.length)n.value=n.value.slice(2);else if(0===n.length)n.value=[0,1];else if(2>n.length){var r=parseFloat(n.value[0]);n.value=[r,r+1]}else n.value=[parseFloat(n.value[0]),parseFloat(n.value[1])];else m(n.value)&&(r=parseFloat(n.value),n.value=[r,r+1]);else p("contours.value",0),m(n.value)||(Array.isArray(n.value)?
n.value=parseFloat(n.value[0]):n.value=0);if("\x3d"===q)n=n.showlines=!0;else{n=p("contours.showlines");var u=p("fillcolor",h((a.line||{}).color||g,.5))}if(n){a=u&&e(u)?h(l.fillcolor,1):g;var w=p("line.color",a);p("line.width",2);p("line.dash")}p("line.smoothing");k(p,d,w,c)}},{"../../components/color":577,"../../constants/filter_ops":673,"./label_defaults":934,"fast-isnumeric":221}],925:[function(a,p,l){function m(a,h){function b(a){return f(a)?+a:null}var k=Array.isArray(h),d;-1!==e.COMPARISON_OPS2.indexOf(a)?
d=k?b(h[0]):b(h):-1!==e.INTERVAL_OPS.indexOf(a)?d=k?[b(h[0]),b(h[1])]:[b(h),b(h)]:-1!==e.SET_OPS.indexOf(a)&&(d=k?h.map(b):[b(h)]);return d}function k(a){return function(b){b=m(a,b);var e=Math.min(b[0],b[1]);b=Math.max(b[0],b[1]);return{start:e,end:b,size:b-e}}}function h(a){return function(b){b=m(a,b);return{start:b,end:Infinity,size:Infinity}}}var e=a("../../constants/filter_ops"),f=a("fast-isnumeric");p.exports={"[]":k("[]"),"][":k("]["),"\x3e":h("\x3e"),"\x3c":h("\x3c"),"\x3d":h("\x3d")}},{"../../constants/filter_ops":673,
"fast-isnumeric":221}],926:[function(a,p,l){p.exports=function(a,k,h,e){a=e("contours.start");e=e("contours.end");e=!1===a||!1===e;a=h("contours.size");(e?!(k.autocontour=!0):!h("autocontour",!1))&&a||h("ncontours")}},{}],927:[function(a,p,l){function m(a){return k.extendFlat({},a,{edgepaths:k.extendDeep([],a.edgepaths),paths:k.extendDeep([],a.paths)})}var k=a("../../lib");p.exports=function(a,e){var f=function(a){return a.reverse()},b=function(a){return a};switch(e){case "\x3d":case "\x3c":return a;
case "\x3e":1!==a.length&&k.warn("Contour data invalid for the specified inequality operation.");var h=a[0];for(e=0;e<h.edgepaths.length;e++)h.edgepaths[e]=f(h.edgepaths[e]);for(e=0;e<h.paths.length;e++)h.paths[e]=f(h.paths[e]);return a;case "][":e=f,f=b,b=e;case "[]":2!==a.length&&k.warn("Contour data invalid for the specified inequality range operation.");h=m(a[0]);a=m(a[1]);for(e=0;e<h.edgepaths.length;e++)h.edgepaths[e]=f(h.edgepaths[e]);for(e=0;e<h.paths.length;e++)h.paths[e]=f(h.paths[e]);for(;a.edgepaths.length;)h.edgepaths.push(b(a.edgepaths.shift()));
for(;a.paths.length;)h.paths.push(b(a.paths.shift()));return[h]}}},{"../../lib":700}],928:[function(a,p,l){var m=a("../../lib"),k=a("../heatmap/xyz_defaults"),h=a("./constraint_defaults"),e=a("./contours_defaults"),f=a("./style_defaults"),b=a("./attributes");p.exports=function(a,l,p,d){function g(c,d){return m.coerce(a,l,b,c,d)}function c(c){return m.coerce2(a,l,b,c)}if(k(a,l,g,d)){g("text");g("hovertext");g("hovertemplate");var n="constraint"===g("contours.type");g("connectgaps",m.isArray1D(l.z));
n?h(a,l,g,d,p):(e(a,l,g,c),f(a,l,g,d))}else l.visible=!1}},{"../../lib":700,"../heatmap/xyz_defaults":962,"./attributes":919,"./constraint_defaults":924,"./contours_defaults":926,"./style_defaults":940}],929:[function(a,p,l){var m=a("../../lib"),k=a("./constraint_mapping"),h=a("./end_plus");p.exports=function(a,f,b){var e="constraint"===a.type?k[a._operation](a.value):a,l=e.size,p=[],d=h(e),g=b.trace._carpetTrace;f=g?{xaxis:g.aaxis,yaxis:g.baxis,x:b.a,y:b.b}:{xaxis:f.xaxis,yaxis:f.yaxis,x:b.x,y:b.y};
for(e=e.start;e<d;e+=l)if(p.push(m.extendFlat({level:e,crossings:{},starts:[],edgepaths:[],paths:[],z:b.z,smoothing:b.trace.line.smoothing},f)),1E3<p.length){m.warn("Too many contours, clipping at 1000",a);break}return p}},{"../../lib":700,"./constraint_mapping":925,"./end_plus":930}],930:[function(a,p,l){p.exports=function(a){return a.end+a.size/1E6}},{}],931:[function(a,p,l){function m(a,e,f,h){return Math.abs(a[0]-e[0])<f&&Math.abs(a[1]-e[1])<h}function k(a,k,l,p,d){var b=k.join(","),c=b,n=a.crossings[c],
q=n,r=0;var u=0;20<q&&l?208===q||1114===q?r=0===k[0]?1:-1:u=0===k[1]?1:-1:-1!==f.BOTTOMSTART.indexOf(q)?u=1:-1!==f.LEFTSTART.indexOf(q)?r=1:-1!==f.TOPSTART.indexOf(q)?u=-1:r=-1;u=[r,u];q=[h(a,k,[-u[0],-u[1]])];var w=u.join(","),x=a.z.length,A=a.z[0].length;for(r=0;1E4>r;r++){20<n?(n=f.CHOOSESADDLE[n][0>(u[0]||u[1])?0:1],a.crossings[c]=f.SADDLEREMAINDER[n]):delete a.crossings[c];u=f.NEWDELTA[n];if(!u){e.log("Found bad marching index:",n,k,a.level);break}q.push(h(a,k,u));k[0]+=u[0];k[1]+=u[1];m(q[q.length-
1],q[q.length-2],p,d)&&q.pop();c=k.join(",");n=u[0]&&(0>k[0]||k[0]>A-2)||u[1]&&(0>k[1]||k[1]>x-2);if(c===b&&u.join(",")===w||l&&n)break;n=a.crossings[c]}1E4===r&&e.log("Infinite loop in contour?");k=m(q[0],q[q.length-1],p,d);u=0;w=.2*a.smoothing;c=[];n=0;for(r=1;r<q.length;r++){A=q[r];var C=q[r-1];x=A[2]-C[2];A=A[3]-C[3];x=Math.sqrt(x*x+A*A);u+=x;c.push(x)}x=u/c.length*w;for(r=q.length-2;r>=n;r--)if(A=c[r],A<x){w=0;for(u=r-1;u>=n;u--)if(A+c[u]<x)A+=c[u];else break;if(k&&r===q.length-2)for(w=0;w<u;w++)if(A+
c[w]<x)A+=c[w];else break;A=r-u+w+1;C=Math.floor((r+u+w+2)/2);A=k||r!==q.length-2?k||-1!==u?A%2?q[C%q.length]:[(q[C%q.length][0]+q[(C+1)%q.length][0])/2,(q[C%q.length][1]+q[(C+1)%q.length][1])/2]:q[0]:q[q.length-1];q.splice(u+1,r-u+1,A);r=u+1;w&&(n=w);k&&(r===q.length-2?q[w]=q[q.length-1]:0===r&&(q[q.length-1]=q[0]))}q.splice(0,n);for(r=0;r<q.length;r++)q[r].length=2;if(!(2>q.length))if(k)q.pop(),a.paths.push(q);else{l||e.log("Unclosed interior contour?",a.level,b,q.join("L"));c=!1;for(l=0;l<a.edgepaths.length;l++)if(r=
a.edgepaths[l],!c&&m(r[0],q[q.length-1],p,d)){q.pop();c=!0;n=!1;for(b=0;b<a.edgepaths.length;b++)if(k=a.edgepaths[b],m(k[k.length-1],q[0],p,d)){n=!0;q.shift();a.edgepaths.splice(l,1);b===l?a.paths.push(q.concat(k)):(b>l&&b--,a.edgepaths[b]=k.concat(q,r));break}n||(a.edgepaths[l]=q.concat(r))}for(l=0;l<a.edgepaths.length&&!c;l++)r=a.edgepaths[l],m(r[r.length-1],q[0],p,d)&&(q.shift(),a.edgepaths[l]=r.concat(q),c=!0);c||a.edgepaths.push(q)}}function h(a,e,f){var b=e[0]+Math.max(f[0],0);e=e[1]+Math.max(f[1],
0);var d=a.z[e][b],g=a.xaxis,c=a.yaxis;if(f[1])return f=(a.level-d)/(a.z[e][b+1]-d),[g.c2p((1-f)*a.x[b]+f*a.x[b+1],!0),c.c2p(a.y[e],!0),b+f,e];f=(a.level-d)/(a.z[e+1][b]-d);return[g.c2p(a.x[b],!0),c.c2p((1-f)*a.y[e]+f*a.y[e+1],!0),b,e+f]}var e=a("../../lib"),f=a("./constants");p.exports=function(a,f,h){var b,d;f=f||.01;h=h||.01;for(d=0;d<a.length;d++){var g=a[d];for(b=0;b<g.starts.length;b++){var c=g.starts[b];k(g,c,"edge",f,h)}for(b=0;Object.keys(g.crossings).length&&1E4>b;)b++,c=Object.keys(g.crossings)[0].split(",").map(Number),
k(g,c,void 0,f,h);1E4===b&&e.log("Infinite loop in contour?")}}},{"../../lib":700,"./constants":923}],932:[function(a,p,l){var m=a("../../components/color"),k=a("../heatmap/hover");p.exports=function(a,e,f,b,n){(a=k(a,e,f,b,n,!0))&&a.forEach(function(a){var b=a.trace;"constraint"===b.contours.type&&(b.fillcolor&&m.opacity(b.fillcolor)?a.color=m.addOpacity(b.fillcolor,1):b.contours.showlines&&m.opacity(b.line.color)&&(a.color=m.addOpacity(b.line.color,1)))});return a}},{"../../components/color":577,
"../heatmap/hover":955}],933:[function(a,p,l){l={};l.attributes=a("./attributes");l.supplyDefaults=a("./defaults");l.calc=a("./calc");l.plot=a("./plot").plot;l.style=a("./style");l.colorbar=a("./colorbar");l.hoverPoints=a("./hover");l.moduleType="trace";l.name="contour";l.basePlotModule=a("../../plots/cartesian");l.categories=["cartesian","svg","2dMap","contour","showLegend"];l.meta={};p.exports=l},{"../../plots/cartesian":759,"./attributes":919,"./calc":920,"./colorbar":922,"./defaults":928,"./hover":932,
"./plot":937,"./style":939}],934:[function(a,p,l){var m=a("../../lib");p.exports=function(a,h,e,f){f||(f={});a("contours.showlabels")&&(h=h.font,m.coerceFont(a,"contours.labelfont",{family:h.family,size:h.size,color:e}),a("contours.labelformat"));!1!==f.hasHover&&a("zhoverformat")}},{"../../lib":700}],935:[function(a,p,l){var m=a("d3"),k=a("../../components/colorscale"),h=a("./end_plus");p.exports=function(a){var e=a.contours,b=e.start,n=h(e),l=e.size||1,p=Math.floor((n-b)/l)+1,d="lines"===e.coloring?
0:1;isFinite(l)||(p=l=1);var g=a.reversescale?k.flipScale(a.colorscale):a.colorscale,c=g.length;n=Array(c);var q=Array(c),t;if("heatmap"===e.coloring){a.zauto&&!1===a.autocontour&&(a.zmin=b-l/2,a.zmax=a.zmin+p*l);for(t=0;t<c;t++){var w=g[t];n[t]=w[0]*(a.zmax-a.zmin)+a.zmin;q[t]=w[1]}b=m.extent([a.zmin,a.zmax,e.start,e.start+l*(p-1)]);e=b[a.zmin<a.zmax?0:1];b=b[a.zmin<a.zmax?1:0];e!==a.zmin&&(n.splice(0,0,e),q.splice(0,0,Range[0]));b!==a.zmax&&(n.push(b),q.push(q[q.length-1]))}else for(t=0;t<c;t++)w=
g[t],n[t]=(w[0]*(p+d-1)-d/2)*l+b,q[t]=w[1];return k.makeColorScaleFunc({domain:n,range:q},{noNumericCheck:!0})}},{"../../components/colorscale":589,"./end_plus":930,d3:154}],936:[function(a,p,l){var m=a("./constants");p.exports=function(a){var h=a[0].z,e=h.length,f=h[0].length,b=2===e||2===f,k,l,p;for(l=0;l<e-1;l++){var d=[];0===l&&(d=d.concat(m.BOTTOMSTART));l===e-2&&(d=d.concat(m.TOPSTART));for(k=0;k<f-1;k++){var g=d.slice();0===k&&(g=g.concat(m.LEFTSTART));k===f-2&&(g=g.concat(m.RIGHTSTART));var c=
k+","+l;var q=[[h[l][k],h[l][k+1]],[h[l+1][k],h[l+1][k+1]]];for(p=0;p<a.length;p++){var t=a[p];var w=t.level;var x=(q[0][0]>w?0:1)+(q[0][1]>w?0:2)+(q[1][1]>w?0:4)+(q[1][0]>w?0:8);w=5===x||10===x?w>(q[0][0]+q[0][1]+q[1][0]+q[1][1])/4?5===x?713:1114:5===x?104:208:15===x?0:x;w&&(t.crossings[c]=w,-1!==g.indexOf(w)&&(t.starts.push([k,l]),b&&-1!==g.indexOf(w,g.indexOf(w)+1)&&t.starts.push([k,l])))}}}}},{"./constants":923}],937:[function(a,p,l){function m(a,c,d,e){a=b.ensureSingle(a,"g","contourfill").selectAll("path").data("fill"===
e.coloring||"constraint"===e.type&&"\x3d"!==e._operation?c:[]);a.enter().append("path");a.exit().remove();a.each(function(a){(a=h(a,d))?f.select(this).attr("d",a).style("stroke","none"):f.select(this).remove()})}function k(a,b){var c=a.prefixBoundary;void 0===c&&(c=Math.min(a.z[0][0],a.z[0][1]),c=!a.edgepaths.length&&c>a.level);return c?"M"+b.join("L")+"Z":""}function h(a,c){for(var d=k(a,c),e=0,f=a.edgepaths.map(function(a,b){return b}),g=!0,h,m,l,p;f.length;){m=n.smoothopen(a.edgepaths[e],a.smoothing);
d+=g?m:m.replace(/^M/,"L");f.splice(f.indexOf(e),1);g=a.edgepaths[e][a.edgepaths[e].length-1];l=-1;for(m=0;4>m;m++){if(!g){b.log("Missing end?",e,a);break}.01>Math.abs(g[1]-c[0][1])&&!(.01>Math.abs(g[0]-c[2][0]))?h=c[1]:.01>Math.abs(g[0]-c[0][0])?h=c[0]:.01>Math.abs(g[1]-c[2][1])?h=c[3]:.01>Math.abs(g[0]-c[2][0])&&(h=c[2]);for(p=0;p<a.edgepaths.length;p++){var q=a.edgepaths[p][0];.01>Math.abs(g[0]-h[0])?.01>Math.abs(g[0]-q[0])&&0<=(q[1]-g[1])*(h[1]-q[1])&&(h=q,l=p):.01>Math.abs(g[1]-h[1])?.01>Math.abs(g[1]-
q[1])&&0<=(q[0]-g[0])*(h[0]-q[0])&&(h=q,l=p):b.log("endpt to newendpt is not vert. or horz.",g,h,q)}g=h;if(0<=l)break;d+="L"+h}if(l===a.edgepaths.length){b.log("unclosed perimeter path");break}e=l;if(g=-1===f.indexOf(e))e=f[0],d+="Z"}for(e=0;e<a.paths.length;e++)d+=n.smoothclosed(a.paths[e],a.smoothing);return d}function e(a,c,d,e,g,h){var k=b.ensureSingle(a,"g","contourlines"),m=!1!==g.showlines,p=g.showlabels,q=m&&p,t=l.createLines(k,m||p,c);k=l.createLineClip(k,q,d,e.trace.uid);a=a.selectAll("g.contourlabels").data(p?
[0]:[]);a.exit().remove();a.enter().append("g").classed("contourlabels",!0);if(p){var r=[],v=[];b.clearLocationCache();var u=l.labelFormatter(g,e.t.cb,d._fullLayout),w=n.tester.append("text").attr("data-notex",1).call(n.font,g.labelfont),x=c[0].xaxis,y=c[0].yaxis;e=x._length;g=y._length;x=x.range;y=y.range;var A=Math.max(h[0][0],0),B=Math.min(h[2][0],e),C=Math.max(h[0][1],0);h=Math.min(h[2][1],g);var G={};x[0]<x[1]?(G.left=A,G.right=B):(G.left=B,G.right=A);y[0]<y[1]?(G.top=C,G.bottom=h):(G.top=h,
G.bottom=C);G.middle=(G.top+G.bottom)/2;G.center=(G.left+G.right)/2;r.push([[G.left,G.top],[G.right,G.top],[G.right,G.bottom],[G.left,G.bottom]]);var E=D.LABELDISTANCE*Math.sqrt(e*e+g*g)/Math.max(1,c.length/D.LABELINCREASE);t.each(function(a){var c=l.calcTextOpts(a.level,u,w,d);f.select(this).selectAll("path").each(function(){var a=b.getVisibleSegment(this,G,c.height/2);if(a&&!(a.len<(c.width+c.height)*D.LABELMIN))for(var d=Math.min(Math.ceil(a.len/E),D.LABELMAX),e=0;e<d;e++){var f=l.findBestTextLocation(this,
a,c,v,G);if(!f)break;l.addLabelData(f,c,v,r)}})});w.remove();l.drawLabels(a,v,d,k,q?r:null)}p&&!m&&t.remove()}var f=a("d3"),b=a("../../lib"),n=a("../../components/drawing"),q=a("../../lib/svg_text_utils"),r=a("../../plots/cartesian/axes"),d=a("../../plots/cartesian/set_convert"),g=a("../heatmap/plot"),c=a("./make_crossings"),v=a("./find_all_paths"),t=a("./empty_pathinfo"),w=a("./convert_to_constraints"),x=a("./close_boundaries"),D=a("./constants"),G=D.LABELOPTIMIZER;l.plot=function(a,d,k,l){var p=
d.xaxis,q=d.yaxis;b.makeTraceGroups(l,k,"contour").each(function(k){var l=f.select(this),r=k[0],u=r.trace,y=r.x,A=r.y,B=u.contours,D=t(B,d,r),C=b.ensureSingle(l,"g","heatmapcoloring"),G=[];"heatmap"===B.coloring&&(u.zauto&&!1===u.autocontour&&(u._input.zmin=u.zmin=B.start-B.size/2,u._input.zmax=u.zmax=u.zmin+D.length*B.size),G=[k]);g(a,d,G,C);c(D);v(D);k=p.c2p(y[0],!0);y=p.c2p(y[y.length-1],!0);C=q.c2p(A[0],!0);A=q.c2p(A[A.length-1],!0);A=[[k,A],[y,A],[y,C],[k,C]];y=D;"constraint"===B.type&&(y=w(D,
B._operation),x(y,B._operation,A,u));u=b.ensureSingle(l,"g","contourbg").selectAll("path").data("fill"===B.coloring?[0]:[]);u.enter().append("path");u.exit().remove();u.attr("d","M"+A.join("L")+"Z").style("stroke","none");m(l,y,A,B);e(l,D,a,r,B,A);B="clip"+r.trace.uid;D=a._fullLayout._clips.selectAll("#"+B).data(r.trace.connectgaps?[]:[0]);D.enter().append("clipPath").classed("contourclip",!0).attr("id",B);D.exit().remove();if(!1===r.trace.connectgaps){u=d.xaxis;y=d.yaxis;k=r.x;C=r.y;G=r.trace._emptypoints;
var E=[],H=r.z.length,z=r.z[0].length,J,M=[];for(J=0;J<z;J++)M.push(1);for(J=0;J<H;J++)E.push(M.slice());for(J=0;J<G.length;J++)H=G[J],E[H[0]][H[1]]=0;r.zmask=E;r={level:.9,crossings:{},starts:[],edgepaths:[],paths:[],xaxis:u,yaxis:y,x:k,y:C,z:E,smoothing:0};c([r]);v([r]);r=h(r,A);b.ensureSingle(D,"path","").attr("d",r)}else B=null;n.setClipUrl(l,B,a)})};l.createLines=function(a,b,c){var d=c[0].smoothing;a=a.selectAll("g.contourlevel").data(b?c:[]);a.exit().remove();a.enter().append("g").classed("contourlevel",
!0);b&&(b=a.selectAll("path.openline").data(function(a){return a.pedgepaths||a.edgepaths}),b.exit().remove(),b.enter().append("path").classed("openline",!0),b.attr("d",function(a){return n.smoothopen(a,d)}).style("stroke-miterlimit",1).style("vector-effect","non-scaling-stroke"),b=a.selectAll("path.closedline").data(function(a){return a.ppaths||a.paths}),b.exit().remove(),b.enter().append("path").classed("closedline",!0),b.attr("d",function(a){return n.smoothclosed(a,d)}).style("stroke-miterlimit",
1).style("vector-effect","non-scaling-stroke"));return a};l.createLineClip=function(a,b,c,d){d=b?"clipline"+d:null;b=c._fullLayout._clips.selectAll("#"+d).data(b?[0]:[]);b.exit().remove();b.enter().append("clipPath").classed("contourlineclip",!0).attr("id",d);n.setClipUrl(a,d,c);return b};l.labelFormatter=function(a,b,c){if(a.labelformat)return c._d3locale.numberFormat(a.labelformat);if(b)var e=b.axis;else e={type:"linear",_id:"ycontour",showexponent:"all",exponentformat:"B"},"constraint"===a.type?
(a=a.value,Array.isArray(a)?e.range=[a[0],a[a.length-1]]:e.range=[a,a]):(e.range=[a.start,a.end],e.nticks=(a.end-a.start)/a.size),e.range[0]===e.range[1]&&(e.range[1]+=e.range[0]||1),e.nticks||(e.nticks=1E3),d(e,c),r.prepTicks(e),e._tmin=null,e._tmax=null;return function(a){return r.tickText(e,a).text}};l.calcTextOpts=function(a,b,c,d){b=b(a);c.text(b).call(q.convertToTspans,d);c=n.bBox(c.node(),!0);return{text:b,width:c.width,height:c.height,level:a,dy:(c.top+c.bottom)/2}};l.findBestTextLocation=
function(a,c,d,e,f){var g=d.width;if(c.isClosed){var h=c.len/G.INITIALSEARCHPOINTS;var k=c.min+h/2;var n=c.max}else h=(c.len-g)/(G.INITIALSEARCHPOINTS+1),k=c.min+h+g/2,n=c.max-(h+g)/2;for(var m=Infinity,l=0;l<G.ITERATIONS;l++){for(;k<n;k+=h){var p=b.getTextLocation(a,c.total,k,g);a:{var q=d;var t=e,r=q.width/2,v=q.height/2,u=p.x,w=p.y,x=p.theta,y=Math.cos(x)*r,A=Math.sin(x)*r;r=(u>f.center?f.right-u:u-f.left)/(y+Math.abs(Math.sin(x)*v));v=(w>f.middle?f.bottom-w:w-f.top)/(Math.abs(A)+Math.cos(x)*v);
if(1>r||1>v)q=Infinity;else{v=G.EDGECOST*(1/(r-1)+1/(v-1));v+=G.ANGLECOST*x*x;x=u-y;r=w-A;u+=y;w+=A;for(y=0;y<t.length;y++){A=t[y];var B=Math.cos(A.theta)*A.width/2,D=Math.sin(A.theta)*A.width/2;B=2*b.segmentDistance(x,r,u,w,A.x-B,A.y-D,A.x+B,A.y+D)/(q.height+A.height);D=(A=A.level===q.level)?G.SAMELEVELDISTANCE:1;if(B<=D){q=Infinity;break a}v+=G.NEIGHBORCOST*(A?G.SAMELEVELFACTOR:1)/(B-D)}q=v}}if(q<m){m=q;var C=p;var E=k}}if(m>2*G.MAXCOST)break;l&&(h/=2);k=E-h/2;n=k+1.5*h}if(m<=G.MAXCOST)return C};
l.addLabelData=function(a,b,c,d){var e=b.width/2,f=b.height/2,g=a.x,h=a.y;a=a.theta;var k=Math.sin(a),n=Math.cos(a),m=e*n,l=f*k;e*=k;f=-f*n;f=[[g-m-l,h-e-f],[g+m-l,h+e-f],[g+m+l,h+e+f],[g-m+l,h-e+f]];c.push({text:b.text,x:g,y:h,dy:b.dy,theta:a,level:b.level,width:b.width,height:b.height});d.push(f)};l.drawLabels=function(a,c,d,e,g){a=a.selectAll("text").data(c,function(a){return a.text+","+a.x+","+a.y+","+a.theta});a.exit().remove();a.enter().append("text").attr({"data-notex":1,"text-anchor":"middle"}).each(function(a){var b=
a.x+Math.sin(a.theta)*a.dy,c=a.y-Math.cos(a.theta)*a.dy;f.select(this).text(a.text).attr({x:b,y:c,transform:"rotate("+180*a.theta/Math.PI+" "+b+" "+c+")"}).call(q.convertToTspans,d)});if(g){a="";for(c=0;c<g.length;c++)a+="M"+g[c].join("L")+"Z";b.ensureSingle(e,"path","").attr("d",a)}}},{"../../components/drawing":598,"../../lib":700,"../../lib/svg_text_utils":724,"../../plots/cartesian/axes":748,"../../plots/cartesian/set_convert":766,"../heatmap/plot":959,"./close_boundaries":921,"./constants":923,
"./convert_to_constraints":927,"./empty_pathinfo":929,"./find_all_paths":931,"./make_crossings":936,d3:154}],938:[function(a,p,l){function m(a,f,b){var e={type:"linear",range:[a,f]};k.autoTicks(e,(f-a)/(b||15));return e}var k=a("../../plots/cartesian/axes"),h=a("../../lib");p.exports=function(a){var e=a.contours;if(a.autocontour){var b=a.zmin,n=a.zmax;if(void 0===b||void 0===n)b=h.aggNums(Math.min,null,a._z),n=h.aggNums(Math.max,null,a._z);var l=m(b,n,a.ncontours);e.size=l.dtick;e.start=k.tickFirst(l);
l.range.reverse();e.end=k.tickFirst(l);e.start===b&&(e.start+=e.size);e.end===n&&(e.end-=e.size);e.start>e.end&&(e.start=e.end=(e.start+e.end)/2);a._input.contours||(a._input.contours={});h.extendFlat(a._input.contours,{start:e.start,end:e.end,size:e.size});a._input.autocontour=!0}else"constraint"!==e.type&&(n=e.start,l=e.end,b=a._input.contours,n>l&&(e.start=b.start=l,l=e.end=b.end=n,n=e.start),0<e.size||(a=n===l?1:m(n,l,a.ncontours).dtick,b.size=e.size=a))}},{"../../lib":700,"../../plots/cartesian/axes":748}],
939:[function(a,p,l){var m=a("d3"),k=a("../../components/drawing"),h=a("../heatmap/style"),e=a("./make_color_map");p.exports=function(a){var b=m.select(a).selectAll("g.contour");b.style("opacity",function(a){return a[0].trace.opacity});b.each(function(a){var b=m.select(this);a=a[0].trace;var f=a.contours,d=a.line,g=f.size||1,c=f.start,h="constraint"===f.type,n=!h&&"lines"===f.coloring,l=!h&&"fill"===f.coloring,p=n||l?e(a):null;b.selectAll("g.contourlevel").each(function(a){m.select(this).selectAll("path").call(k.lineGroupStyle,
d.width,n?p(a.level):d.color,d.dash)});var q=f.labelfont;b.selectAll("g.contourlabels text").each(function(a){k.font(m.select(this),{family:q.family,size:q.size,color:q.color||(n?p(a.level):d.color)})});if(h)b.selectAll("g.contourfill path").style("fill",a.fillcolor);else if(l){var w;b.selectAll("g.contourfill path").style("fill",function(a){void 0===w&&(w=a.level);return p(a.level+.5*g)});void 0===w&&(w=c);b.selectAll("g.contourbg path").style("fill",p(w-.5*g))}});h(a)}},{"../../components/drawing":598,
"../heatmap/style":960,"./make_color_map":935,d3:154}],940:[function(a,p,l){var m=a("../../components/colorscale/defaults"),k=a("./label_defaults");p.exports=function(a,e,f,b,n){var h=f("contours.coloring"),l,d="";"fill"===h&&(l=f("contours.showlines"));!1!==l&&("lines"!==h&&(d=f("line.color","#000")),f("line.width",.5),f("line.dash"));"none"!==h&&(!0!==a.showlegend&&(e.showlegend=!1),e._dfltShowLegend=!1,m(a,e,b,f,{prefix:"",cLetter:"z"}));f("line.smoothing");k(f,b,d,n)}},{"../../components/colorscale/defaults":587,
"./label_defaults":934}],941:[function(a,p,l){l=a("../heatmap/attributes");var m=a("../contour/attributes"),k=m.contours,h=a("../scatter/attributes"),e=a("../../components/colorscale/attributes"),f=a("../../components/colorbar/attributes");a=a("../../lib/extend").extendFlat;h=h.line;p.exports=a({carpet:{valType:"string",editType:"calc"},z:l.z,a:l.x,a0:l.x0,da:l.dx,b:l.y,b0:l.y0,db:l.dy,text:l.text,hovertext:l.hovertext,transpose:l.transpose,atype:l.xtype,btype:l.ytype,fillcolor:m.fillcolor,autocontour:m.autocontour,
ncontours:m.ncontours,contours:{type:k.type,start:k.start,end:k.end,size:k.size,coloring:{valType:"enumerated",values:["fill","lines","none"],dflt:"fill",editType:"calc"},showlines:k.showlines,showlabels:k.showlabels,labelfont:k.labelfont,labelformat:k.labelformat,operation:k.operation,value:k.value,editType:"calc",impliedEdits:{autocontour:!1}},line:{color:a({},h.color,{}),width:h.width,dash:h.dash,smoothing:a({},h.smoothing,{}),editType:"plot"},transforms:void 0},e("",{cLetter:"z",autoColorDflt:!1}),
{colorbar:f})},{"../../components/colorbar/attributes":578,"../../components/colorscale/attributes":584,"../../lib/extend":690,"../contour/attributes":919,"../heatmap/attributes":948,"../scatter/attributes":1051}],942:[function(a,p,l){var m=a("../../components/colorscale/calc"),k=a("../../lib"),h=a("../heatmap/convert_column_xyz"),e=a("../heatmap/clean_2d_array"),f=a("../heatmap/interp2d"),b=a("../heatmap/find_empties"),n=a("../heatmap/make_bound_array"),q=a("./defaults"),r=a("../carpet/lookup_carpetid"),
d=a("../contour/set_contours");p.exports=function(a,c){var g=c._carpetTrace=r(a,c);if(g&&g.visible&&"legendonly"!==g.visible){if(!c.a||!c.b){g=a.data[g.index];var l=a.data[c.index];l.a||(l.a=g.a);l.b||(l.b=g.b);q(l,c,c._defaultColor,a._fullLayout)}g=c._carpetTrace;l=g.aaxis;var p=g.baxis;l._minDtick=0;p._minDtick=0;k.isArray1D(c.z)&&h(c,l,p,"a","b",["z"]);var u=c._a=c._a||c.a;var w=c._b=c._b||c.b;u=u?l.makeCalcdata(c,"_a"):[];w=w?p.makeCalcdata(c,"_b"):[];var x=c.a0||0;var A=c.da||1;var C=c.b0||0;
var z=c.db||1;g=c._z=e(c._z||c.z,c.transpose);c._emptypoints=b(g);f(g,c._emptypoints);var J=k.maxRowLength(g);l=n(c,"scaled"===c.xtype?"":u,x,A,J,l);p=n(c,"scaled"===c.ytype?"":w,C,z,g.length,p);l={a:l,b:p,z:g};"levels"===c.contours.type&&"none"!==c.contours.coloring&&m(a,c,{vals:g,containerStr:"",cLetter:"z"});a=[l];d(c);return a}}},{"../../components/colorscale/calc":585,"../../lib":700,"../carpet/lookup_carpetid":897,"../contour/set_contours":938,"../heatmap/clean_2d_array":950,"../heatmap/convert_column_xyz":952,
"../heatmap/find_empties":954,"../heatmap/interp2d":957,"../heatmap/make_bound_array":958,"./defaults":943}],943:[function(a,p,l){var m=a("../../lib"),k=a("../heatmap/xyz_defaults"),h=a("./attributes"),e=a("../contour/constraint_defaults"),f=a("../contour/contours_defaults"),b=a("../contour/style_defaults");p.exports=function(a,l,p,d){function g(b,c){return m.coerce(a,l,h,b,c)}function c(b){return m.coerce2(a,l,h,b)}g("carpet");a.a&&a.b?k(a,l,g,d,"a","b")?(g("text"),"constraint"===g("contours.type")?
e(a,l,g,d,p,{hasHover:!1}):(f(a,l,g,c),b(a,l,g,d,{hasHover:!1}))):l.visible=!1:(l._defaultColor=p,l._length=null)}},{"../../lib":700,"../contour/constraint_defaults":924,"../contour/contours_defaults":926,"../contour/style_defaults":940,"../heatmap/xyz_defaults":962,"./attributes":941}],944:[function(a,p,l){l={};l.attributes=a("./attributes");l.supplyDefaults=a("./defaults");l.colorbar=a("../contour/colorbar");l.calc=a("./calc");l.plot=a("./plot");l.style=a("../contour/style");l.moduleType="trace";
l.name="contourcarpet";l.basePlotModule=a("../../plots/cartesian");l.categories="cartesian svg carpet contour symbols showLegend hasLines carpetDependent".split(" ");l.meta={};p.exports=l},{"../../plots/cartesian":759,"../contour/colorbar":922,"../contour/style":939,"./attributes":941,"./calc":942,"./defaults":943,"./plot":947}],945:[function(a,p,l){var m=a("../../components/drawing"),k=a("../carpet/axis_aligned_line"),h=a("../../lib");p.exports=function(a,f,b,n,l,p,d,g){function c(a){return Math.abs(a[0]-
b[2][0])<C}function e(a,e){var f="";if(Math.abs(a[1]-b[0][1])<z&&!c(a)||Math.abs(a[1]-b[2][1])<z&&!(Math.abs(a[0]-b[0][0])<C)){var h=l.aaxis;var n=k(l,p,[a[0],e[0]],.5*(a[1]+e[1]))}else h=l.baxis,n=k(l,p,.5*(a[0]+e[0]),[a[1],e[1]]);for(a=1;a<n.length;a++)for(f+=h.smoothing?"C":"L",e=0;e<n[a].length;e++){var m=n[a][e];f+=[d.c2p(m[0]),g.c2p(m[1])]+" "}return f}var q="",r=f.edgepaths.map(function(a,b){return b}),u=!0,w,x,A,C=1E-4*Math.abs(b[0][0]-b[2][0]),z=1E-4*Math.abs(b[0][1]-b[2][1]);a=0;for(w=null;r.length;){var J=
f.edgepaths[a][0];w&&(q+=e(w,J));w=m.smoothopen(f.edgepaths[a].map(n),f.smoothing);q+=u?w:w.replace(/^M/,"L");r.splice(r.indexOf(a),1);w=f.edgepaths[a][f.edgepaths[a].length-1];J=-1;for(u=0;4>u;u++){if(!w){h.log("Missing end?",a,f);break}Math.abs(w[1]-b[0][1])<z&&!c(w)?x=b[1]:Math.abs(w[0]-b[0][0])<C?x=b[0]:Math.abs(w[1]-b[2][1])<z?x=b[3]:c(w)&&(x=b[2]);for(A=0;A<f.edgepaths.length;A++){var E=f.edgepaths[A][0];Math.abs(w[0]-x[0])<C?Math.abs(w[0]-E[0])<C&&0<=(E[1]-w[1])*(x[1]-E[1])&&(x=E,J=A):Math.abs(w[1]-
x[1])<z?Math.abs(w[1]-E[1])<z&&0<=(E[0]-w[0])*(x[0]-E[0])&&(x=E,J=A):h.log("endpt to newendpt is not vert. or horz.",w,x,E)}if(0<=J)break;q+=e(w,x);w=x}if(J===f.edgepaths.length){h.log("unclosed perimeter path");break}a=J;if(u=-1===r.indexOf(a))a=r[0],q+=e(w,x)+"Z",w=null}for(a=0;a<f.paths.length;a++)q+=m.smoothclosed(f.paths[a].map(n),f.smoothing);return q}},{"../../components/drawing":598,"../../lib":700,"../carpet/axis_aligned_line":881}],946:[function(a,p,l){p.exports=function(a,k){var h,e,f;
for(h=0;h<a.length;h++){var b=a[h];var n=b.pedgepaths=[];var m=b.ppaths=[];for(e=0;e<b.edgepaths.length;e++){var l=b.edgepaths[e];var d=[];for(f=0;f<l.length;f++)d[f]=k(l[f]);n.push(d)}for(e=0;e<b.paths.length;e++){l=b.paths[e];n=[];for(f=0;f<l.length;f++)n[f]=k(l[f]);m.push(n)}}}},{}],947:[function(a,p,l){function m(a,b,d,e,f,h,n){var m=c.ensureSingle(a,"g","contourlines"),l=!1!==f.showlines,p=f.showlabels,t=l&&p,r=w.createLines(m,l||p,b);m=w.createLineClip(m,t,d,e.trace.uid);a=a.selectAll("g.contourlabels").data(p?
[0]:[]);a.exit().remove();a.enter().append("g").classed("contourlabels",!0);if(p){var v=h.xaxis._length;h=h.yaxis._length;var u=[[[0,0],[v,0],[v,h],[0,h]]],y=[];c.clearLocationCache();var A=w.labelFormatter(f,e.t.cb,d._fullLayout),B=g.tester.append("text").attr("data-notex",1).call(g.font,f.labelfont),D={left:0,right:v,center:v/2,top:0,bottom:h,middle:h/2},C=x.LABELDISTANCE*Math.sqrt(v*v+h*h)/Math.max(1,b.length/x.LABELINCREASE);r.each(function(a){var b=w.calcTextOpts(a.level,A,B,d);q.select(this).selectAll("path").each(function(d){var e=
c.getVisibleSegment(this,D,b.height/2);if(e&&(k(this,d,a,e,n,b.height),!(e.len<(b.width+b.height)*x.LABELMIN))){d=Math.min(Math.ceil(e.len/C),x.LABELMAX);for(var f=0;f<d;f++){var g=w.findBestTextLocation(this,e,b,y,D);if(!g)break;w.addLabelData(g,b,y,u)}}})});B.remove();w.drawLabels(a,y,d,m,t?u:null)}p&&!l&&r.remove()}function k(a,b,c,d,g,k){function n(a,b){var c=0;if(.1>Math.abs(a[0]-p)||.1>Math.abs(a[0]-q)){var d=e(g.dxydb_rough(a[0],a[1],.1));c=Math.max(c,k*f(b,d)/2)}if(.1>Math.abs(a[1]-t)||.1>
Math.abs(a[1]-r))d=e(g.dxyda_rough(a[0],a[1],.1)),c=Math.max(c,k*f(b,d)/2);return c}for(var m,l=0;l<c.pedgepaths.length;l++)b===c.pedgepaths[l]&&(m=c.edgepaths[l]);if(m){var p=g.a[0],q=g.a[g.a.length-1],t=g.b[0],r=g.b[g.b.length-1];b=h(a,0,1);a=h(a,d.total,d.total-1);b=n(m[0],b);m=d.total-n(m[m.length-1],a);d.min<b&&(d.min=b);d.max>m&&(d.max=m);d.len=d.max-d.min}}function h(a,b,c){b=a.getPointAtLength(b);c=a.getPointAtLength(c);a=c.x-b.x;b=c.y-b.y;c=Math.sqrt(a*a+b*b);return[a/c,b/c]}function e(a){var b=
Math.sqrt(a[0]*a[0]+a[1]*a[1]);return[a[0]/b,a[1]/b]}function f(a,b){a=Math.abs(a[0]*b[0]+a[1]*b[1]);return Math.sqrt(1-a*a)/a}function b(a,b,e,f,g,h){var k,n=c.ensureSingle(a,"g","contourbg").selectAll("path").data("fill"!==h||g?[]:[0]);n.enter().append("path");n.exit().remove();var m=[];for(k=0;k<b.length;k++)a=b[k],g=r([],a.x,e.c2p),h=r([],a.y,f.c2p),m.push(d(g,h,a.bicubic));n.attr("d","M"+m.join("L")+"Z").style("stroke","none")}function n(a,b,d,e,f,g,h,k,n,m,l){b=c.ensureSingle(b,"g","contourfill").selectAll("path").data("fill"===
m?f:[]);b.enter().append("path");b.exit().remove();b.each(function(b){var c=G(a,b,g,h,k,n,d,e);b.prefixBoundary&&(c=l+c);c?q.select(this).attr("d",c).style("stroke","none"):q.select(this).remove()})}var q=a("d3"),r=a("../carpet/map_1d_array"),d=a("../carpet/makepath"),g=a("../../components/drawing"),c=a("../../lib"),v=a("../contour/make_crossings"),t=a("../contour/find_all_paths"),w=a("../contour/plot"),x=a("../contour/constants"),D=a("../contour/convert_to_constraints"),G=a("./join_all_paths"),A=
a("../contour/empty_pathinfo"),C=a("./map_pathinfo"),z=a("../carpet/lookup_carpetid"),J=a("../contour/close_boundaries");p.exports=function(a,e,f,h){var k=e.xaxis,l=e.yaxis;c.makeTraceGroups(h,f,"contour").each(function(c){function f(a){a=u.ab2xy(a[0],a[1],!0);return[k.c2p(a[0]),l.c2p(a[1])]}var h=q.select(this);c=c[0];var p=c.trace,u=p._carpetTrace=z(a,p),w=a.calcdata[u.index][0];if(u.visible&&"legendonly"!==u.visible){var x=c.a,y=c.b,B=p.contours,G=A(B,e,c),E="constraint"===B.type,H=B._operation,
I=E?"\x3d"===H?"lines":"fill":B.coloring,M=[[x[0],y[y.length-1]],[x[x.length-1],y[y.length-1]],[x[x.length-1],y[0]],[x[0],y[0]]];v(G);t(G,1E-8*(x[x.length-1]-x[0]),1E-8*(y[y.length-1]-y[0]));x=G;"constraint"===B.type&&(x=D(G,H),J(x,H,M,p));C(G,f);var P,N=[];for(P=w.clipsegments.length-1;0<=P;P--){H=w.clipsegments[P];y=r([],H.x,k.c2p);var O=r([],H.y,l.c2p);y.reverse();O.reverse();N.push(d(y,O,H.bicubic))}H="M"+N.join("L")+"Z";b(h,w.clipsegments,k,l,E,I);n(p,h,k,l,x,M,f,u,w,I,H);m(h,G,a,c,B,e,u);g.setClipUrl(h,
u._clipPathId,a)}})}},{"../../components/drawing":598,"../../lib":700,"../carpet/lookup_carpetid":897,"../carpet/makepath":898,"../carpet/map_1d_array":899,"../contour/close_boundaries":921,"../contour/constants":923,"../contour/convert_to_constraints":927,"../contour/empty_pathinfo":929,"../contour/find_all_paths":931,"../contour/make_crossings":936,"../contour/plot":937,"./join_all_paths":945,"./map_pathinfo":946,d3:154}],948:[function(a,p,l){l=a("../scatter/attributes");var m=a("../../components/fx/hovertemplate_attributes"),
k=a("../../components/colorscale/attributes"),h=a("../../components/colorbar/attributes");a=a("../../lib/extend").extendFlat;p.exports=a({z:{valType:"data_array",editType:"calc"},x:a({},l.x,{impliedEdits:{xtype:"array"}}),x0:a({},l.x0,{impliedEdits:{xtype:"scaled"}}),dx:a({},l.dx,{impliedEdits:{xtype:"scaled"}}),y:a({},l.y,{impliedEdits:{ytype:"array"}}),y0:a({},l.y0,{impliedEdits:{ytype:"scaled"}}),dy:a({},l.dy,{impliedEdits:{ytype:"scaled"}}),text:{valType:"data_array",editType:"calc"},hovertext:{valType:"data_array",
editType:"calc"},transpose:{valType:"boolean",dflt:!1,editType:"calc"},xtype:{valType:"enumerated",values:["array","scaled"],editType:"calc+clearAxisTypes"},ytype:{valType:"enumerated",values:["array","scaled"],editType:"calc+clearAxisTypes"},zsmooth:{valType:"enumerated",values:["fast","best",!1],dflt:!1,editType:"calc"},connectgaps:{valType:"boolean",dflt:!1,editType:"calc"},xgap:{valType:"number",dflt:0,min:0,editType:"plot"},ygap:{valType:"number",dflt:0,min:0,editType:"plot"},zhoverformat:{valType:"string",
dflt:"",editType:"none"},hovertemplate:m()},{transforms:void 0},k("",{cLetter:"z",autoColorDflt:!1}),{colorbar:h})},{"../../components/colorbar/attributes":578,"../../components/colorscale/attributes":584,"../../components/fx/hovertemplate_attributes":615,"../../lib/extend":690,"../scatter/attributes":1051}],949:[function(a,p,l){var m=a("../../registry"),k=a("../../lib"),h=a("../../plots/cartesian/axes"),e=a("../histogram2d/calc"),f=a("../../components/colorscale/calc"),b=a("./convert_column_xyz"),
n=a("./clean_2d_array"),q=a("./interp2d"),r=a("./find_empties"),d=a("./make_bound_array");p.exports=function(a,c){function g(a){A=c._input.zsmooth=c.zsmooth=!1;k.warn('cannot use zsmooth: "fast": '+a)}var l=h.getFromId(a,c.xaxis||"x"),p=h.getFromId(a,c.yaxis||"y"),u=m.traceIs(c,"contour"),w=m.traceIs(c,"histogram"),x=m.traceIs(c,"gl2d"),A=u?"best":c.zsmooth,C;l._minDtick=0;p._minDtick=0;if(w){var z=e(a,c);var J=z.x;var E=z.x0;var H=z.dx;var M=z.y;var O=z.y0;var I=z.dy;var F=z.z}else if(F=c.z,k.isArray1D(F)?
(b(c,l,p,"x","y",["z"]),J=c._x,M=c._y,F=c._z):(J=c.x?l.makeCalcdata(c,"x"):[],M=c.y?p.makeCalcdata(c,"y"):[]),E=c.x0,H=c.dx,O=c.y0,I=c.dy,F=n(F,c.transpose),u||c.connectgaps)c._emptypoints=r(F),q(F,c._emptypoints);if("fast"===A)if("log"===l.type||"log"===p.type)g("log axis found");else if(!w){if(J.length){var N=(J[J.length-1]-J[0])/(J.length-1),L=Math.abs(N/100);for(C=0;C<J.length-1;C++)if(Math.abs(J[C+1]-J[C]-N)>L){g("x scale is not linear");break}}if(M.length&&"fast"===A)for(N=(M[M.length-1]-M[0])/
(M.length-1),L=Math.abs(N/100),C=0;C<M.length-1;C++)if(Math.abs(M[C+1]-M[C]-N)>L){g("y scale is not linear");break}}C=k.maxRowLength(F);J="scaled"===c.xtype?"":J;N=d(c,J,E,H,C,l);M="scaled"===c.ytype?"":M;L=d(c,M,O,I,F.length,p);x||(c._extremes[l._id]=h.findExtremes(l,N),c._extremes[p._id]=h.findExtremes(p,L));x={x:N,y:L,z:F,text:c._text||c.text,hovertext:c._hovertext||c.hovertext};J&&J.length===N.length-1&&(x.xCenter=J);M&&M.length===L.length-1&&(x.yCenter=M);w&&(x.xRanges=z.xRanges,x.yRanges=z.yRanges,
x.pts=z.pts);u&&"constraint"===c.contours.type||f(a,c,{vals:F,containerStr:"",cLetter:"z"});u&&c.contours&&"heatmap"===c.contours.coloring&&(a={type:"contour"===c.type?"heatmap":"histogram2d",xcalendar:c.xcalendar,ycalendar:c.ycalendar},x.xfill=d(a,J,E,H,C,l),x.yfill=d(a,M,O,I,F.length,p));return[x]}},{"../../components/colorscale/calc":585,"../../lib":700,"../../plots/cartesian/axes":748,"../../registry":829,"../histogram2d/calc":980,"./clean_2d_array":950,"./convert_column_xyz":952,"./find_empties":954,
"./interp2d":957,"./make_bound_array":958}],950:[function(a,p,l){var m=a("fast-isnumeric");p.exports=function(a,h){function e(a){if(m(a))return+a}var f,b;if(h){for(f=h=0;f<a.length;f++)h=Math.max(h,a[f].length);if(0===h)return!1;var k=function(a){return a.length};var l=function(a,b,d){return a[d][b]}}else h=a.length,k=function(a,b){return a[b].length},l=function(a,b,d){return a[b][d]};var p=Array(h);for(f=0;f<h;f++){var d=k(a,f);p[f]=Array(d);for(b=0;b<d;b++)p[f][b]=e(l(a,f,b))}return p}},{"fast-isnumeric":221}],
951:[function(a,p,l){p.exports={min:"zmin",max:"zmax"}},{}],952:[function(a,p,l){var m=a("../../lib"),k=a("../../constants/numerical").BADNUM;p.exports=function(a,e,f,b,n,l){var h=a._length;e=e.makeCalcdata(a,b);f=f.makeCalcdata(a,n);var d=a.text,g=void 0!==d&&m.isArray1D(d),c=a.hovertext,p=void 0!==c&&m.isArray1D(c),q,u,w=m.distinctVals(e),x=w.vals,G=m.distinctVals(f),A=G.vals,C=[],z,J;for(q=0;q<l.length;q++)C[q]=m.init2dArray(A.length,x.length);g&&(z=m.init2dArray(A.length,x.length));p&&(J=m.init2dArray(A.length,
x.length));for(q=0;q<h;q++)if(e[q]!==k&&f[q]!==k){var E=m.findBin(e[q]+w.minDiff/2,x),H=m.findBin(f[q]+G.minDiff/2,A);for(u=0;u<l.length;u++)C[u][H][E]=a[l[u]][q];g&&(z[H][E]=d[q]);p&&(J[H][E]=c[q])}a["_"+b]=x;a["_"+n]=A;for(u=0;u<l.length;u++)a["_"+l[u]]=C[u];g&&(a._text=z);p&&(a._hovertext=J)}},{"../../constants/numerical":677,"../../lib":700}],953:[function(a,p,l){var m=a("../../lib"),k=a("./xyz_defaults"),h=a("./style_defaults"),e=a("../../components/colorscale/defaults"),f=a("./attributes");
p.exports=function(a,n,l,p){function b(b,c){return m.coerce(a,n,f,b,c)}k(a,n,b,p)?(b("text"),b("hovertext"),b("hovertemplate"),h(a,n,b,p),b("connectgaps",m.isArray1D(n.z)&&!1!==n.zsmooth),e(a,n,p,b,{prefix:"",cLetter:"z"})):n.visible=!1}},{"../../components/colorscale/defaults":587,"../../lib":700,"./attributes":948,"./style_defaults":961,"./xyz_defaults":962}],954:[function(a,p,l){var m=a("../../lib").maxRowLength;p.exports=function(a){var h=[],e={},f=[],b=a[0],k=[],l=[0,0,0],p=m(a),d,g,c;for(d=
0;d<a.length;d++){var q=k;k=b;b=a[d+1]||[];for(g=0;g<p;g++)void 0===k[g]&&((c=(void 0!==k[g-1]?1:0)+(void 0!==k[g+1]?1:0)+(void 0!==q[g]?1:0)+(void 0!==b[g]?1:0))?(0===d&&c++,0===g&&c++,d===a.length-1&&c++,g===k.length-1&&c++,4>c&&(e[[d,g]]=[d,g,c]),h.push([d,g,c])):f.push([d,g]))}for(;f.length;){b={};k=!1;for(a=f.length-1;0<=a;a--){var t=f[a];d=t[0];g=t[1];if(c=((e[[d-1,g]]||l)[2]+(e[[d+1,g]]||l)[2]+(e[[d,g-1]]||l)[2]+(e[[d,g+1]]||l)[2])/20)b[t]=[d,g,c],f.splice(a,1),k=!0}if(!k)throw"findEmpties iterated with no new neighbors";
for(t in b)e[t]=b[t],h.push(b[t])}return h.sort(function(a,b){return b[2]-a[2]})}},{"../../lib":700}],955:[function(a,p,l){var m=a("../../components/fx"),k=a("../../lib"),h=a("../../plots/cartesian/axes");p.exports=function(a,f,b,n,l,p){n=a.cd[0];var d=n.trace;l=a.xa;var e=a.ya,c=n.x,q=n.y,t=n.z,r=n.xCenter,u=n.yCenter,w=n.zmask,x=[d.zmin,d.zmax],A=d.zhoverformat,C=c,z=q;if(!1!==a.index){try{var J=Math.round(a.index[1]);var E=Math.round(a.index[0])}catch(M){k.error("Error hovering on heatmap, pointNumber must be [row,col], found:",
a.index);return}if(0>J||J>=t[0].length||0>E||E>t.length)return}else{if(0<m.inbox(f-c[0],f-c[c.length-1],0)||0<m.inbox(b-q[0],b-q[q.length-1],0))return;if(p){C=[2*c[0]-c[1]];for(J=1;J<c.length;J++)C.push((c[J]+c[J-1])/2);C.push([2*c[c.length-1]-c[c.length-2]]);z=[2*q[0]-q[1]];for(J=1;J<q.length;J++)z.push((q[J]+q[J-1])/2);z.push([2*q[q.length-1]-q[q.length-2]])}J=Math.max(0,Math.min(C.length-2,k.findBin(f,C)));E=Math.max(0,Math.min(z.length-2,k.findBin(b,z)))}f=l.c2p(c[J]);b=l.c2p(c[J+1]);C=e.c2p(q[E]);
z=e.c2p(q[E+1]);p?(b=f,p=c[J],z=C,q=q[E]):(p=r?r[J]:(c[J]+c[J+1])/2,q=u?u[E]:(q[E]+q[E+1])/2,d.zsmooth&&(f=b=l.c2p(p),C=z=e.c2p(q)));d=t[E][J];w&&!w[E][J]&&(d=void 0);var H;Array.isArray(n.hovertext)&&Array.isArray(n.hovertext[E])?H=n.hovertext[E][J]:Array.isArray(n.text)&&Array.isArray(n.text[E])&&(H=n.text[E][J]);n=h.tickText({type:"linear",range:x,hoverformat:A,_separators:l._separators,_numFormat:l._numFormat},d,"hover");return[k.extendFlat(a,{index:[E,J],distance:a.maxHoverDistance,spikeDistance:a.maxSpikeDistance,
x0:f,x1:b,y0:C,y1:z,xLabelVal:p,yLabelVal:q,zLabelVal:d,zLabel:n.text,text:H})]}},{"../../components/fx":616,"../../lib":700,"../../plots/cartesian/axes":748}],956:[function(a,p,l){l={};l.attributes=a("./attributes");l.supplyDefaults=a("./defaults");l.calc=a("./calc");l.plot=a("./plot");l.colorbar=a("./colorbar");l.style=a("./style");l.hoverPoints=a("./hover");l.moduleType="trace";l.name="heatmap";l.basePlotModule=a("../../plots/cartesian");l.categories=["cartesian","svg","2dMap"];l.meta={};p.exports=
l},{"../../plots/cartesian":759,"./attributes":948,"./calc":949,"./colorbar":951,"./defaults":953,"./hover":955,"./plot":959,"./style":960}],957:[function(a,p,l){function m(a,f,b){var e=0,k,m,d,g,c,l;for(k=0;k<f.length;k++){var p=f[k];var q=p[0];p=p[1];var w=a[q][p];for(m=g=c=0;4>m;m++){var x=h[m];if(d=a[q+x[0]])if(x=d[p+x[1]],void 0!==x){if(0===c)var G=l=x;else G=Math.min(G,x),l=Math.max(l,x);g++;c+=x}}if(0===g)throw"iterateInterp2d order is wrong: no defined neighbors";a[q][p]=c/g;void 0===w?4>
g&&(e=1):(a[q][p]=(1+b)*a[q][p]-b*w,l>G&&(e=Math.max(e,Math.abs(a[q][p]-w)/(l-G))))}return e}var k=a("../../lib"),h=[[-1,0],[1,0],[0,-1],[0,1]];p.exports=function(a,f){var b=1,e;m(a,f);for(e=0;e<f.length&&!(4>f[e][2]);e++);f=f.slice(e);for(e=0;100>e&&.01<b;e++)b=m(a,f,.5-.25*Math.min(1,.5*b));.01<b&&k.log("interp2d didn't converge quickly",b);return a}},{"../../lib":700}],958:[function(a,p,l){var m=a("../../registry"),k=a("../../lib").isArrayOrTypedArray;p.exports=function(a,e,f,b,n,l){var h=[],d=
m.traceIs(a,"contour"),g=m.traceIs(a,"histogram"),c=m.traceIs(a,"gl2d");if(k(e)&&1<e.length&&!g&&"category"!==l.type)if(b=e.length,b<=n){if(d||c)h=e.slice(0,n);else if(1===n)h=[e[0]-.5,e[0]+.5];else{h=[1.5*e[0]-.5*e[1]];for(d=1;d<b;d++)h.push(.5*(e[d-1]+e[d]));h.push(1.5*e[b-1]-.5*e[b-2])}if(b<n)for(c=h[h.length-1],e=c-h[h.length-2],d=b;d<n;d++)c+=e,h.push(c)}else return d?e.slice(0,n):e.slice(0,n+1);else for(a=a[l._id.charAt(0)+"calendar"],e=k(e)&&1===e.length?e[0]:void 0===f?0:g||"category"===l.type||
"multicategory"===l.type?l.r2c(f,0,a):l.d2c(f,0,a),b=b||1,d=d||c?0:-.5;d<n;d++)h.push(e+b*d);return h}},{"../../lib":700,"../../registry":829}],959:[function(a,p,l){function m(a,b){var c=b.length-2,d=n.constrain(n.findBin(a,b),0,c),e=b[d];a=n.constrain(d+(a-e)/(b[d+1]-e)-.5,0,c);b=Math.round(a);d=Math.abs(a-b);return a&&a!==c&&d?{bin0:b,frac:d,bin1:Math.round(b+d/(a-b))}:{bin0:b,bin1:b,frac:0}}function k(a,b){var c=b.length-1;c=n.constrain(n.findBin(a,b),0,c);var d=b[c];a=(a-d)/(b[c+1]-d)||0;return 0>=
a?{bin0:c,bin1:c,frac:0}:.5>a?{bin0:c,bin1:c+1,frac:a}:{bin0:c+1,bin1:c,frac:1-a}}function h(a,b,c){a[b]=c[0];a[b+1]=c[1];a[b+2]=c[2];a[b+3]=Math.round(255*c[3])}var e=a("d3"),f=a("tinycolor2"),b=a("../../registry"),n=a("../../lib"),q=a("../../components/colorscale"),r=a("../../constants/xmlns_namespaces");p.exports=function(a,g,c,l){var d=g.xaxis,p=g.yaxis;n.makeTraceGroups(l,c,"hm").each(function(c){function g(a,b){return void 0!==a?(a=qa(a),a[0]=Math.round(a[0]),a[1]=Math.round(a[1]),a[2]=Math.round(a[2]),
ea+=b,ba+=a[0]*b,la+=a[1]*b,Z+=a[2]*b,a):[0,0,0,0]}function l(a,b,c,d){var e=a[c.bin0];if(void 0===e)return g(void 0,1);a=a[c.bin1];var f=b[c.bin0];b=b[c.bin1];return g(e+c.frac*(a-e||0)+d.frac*((f-e||0)+c.frac*(void 0===a?void 0===b?0:void 0===f?2*(b-e):2*(2*b-f-e)/3:void 0===b?void 0===f?0:2*(2*e-a-f)/3:void 0===f?2*(2*b-a-e)/3:b+e-a-f)))}var t=e.select(this),v=c[0],u=v.trace,w=v.z,x=v.x,y=v.y,B=v.xCenter,z=v.yCenter,I=b.traceIs(u,"contour"),F=I?"best":u.zsmooth,N=w.length,L=n.maxRowLength(w),R=
!1,K=!1,U;for(U=0;void 0===T&&U<x.length-1;){var T=d.c2p(x[U]);U++}for(U=x.length-1;void 0===Y&&0<U;){var Y=d.c2p(x[U]);U--}Y<T&&(U=Y,Y=T,T=U,R=!0);for(U=0;void 0===ia&&U<y.length-1;){var ia=p.c2p(y[U]);U++}for(U=y.length-1;void 0===S&&0<U;){var S=p.c2p(y[U]);U--}S<ia&&(U=ia,ia=S,S=U,K=!0);I&&(B=x,z=y,x=v.xfill,y=v.yfill);"fast"!==F&&(U="best"===F?0:.5,T=Math.max(-U*d._length,T),Y=Math.min((1+U)*d._length,Y),ia=Math.max(-U*p._length,ia),S=Math.min((1+U)*p._length,S));var W=Math.round(Y-T),fa=Math.round(S-
ia);if(0>=W||0>=fa)t.selectAll("image").data([]).exit().remove();else{"fast"===F?(S=L,U=N):(S=W,U=fa);Y=document.createElement("canvas");Y.width=S;Y.height=U;S=Y.getContext("2d");var qa=q.makeColorScaleFunc(q.extractScale(u,{cLetter:"z"}),{noNumericCheck:!0,returnArray:!0});"fast"===F?(v=R?function(a){return L-1-a}:n.identity,I=K?function(a){return N-1-a}:n.identity):(v=function(a){return n.constrain(Math.round(d.c2p(x[a])-T),0,W)},I=function(a){return n.constrain(Math.round(p.c2p(y[a])-ia),0,fa)});
U=I(0);var ha=[U,U];R=R?0:1;K=K?0:1;var ea=0,ba=0,la=0,Z=0;if(F){u=0;try{var pa=new Uint8Array(W*fa*4)}catch(xa){pa=Array(W*fa*4)}if("best"===F){F=B||x;R=z||y;K=Array(F.length);v=Array(R.length);I=Array(W);B=B?k:m;ha=z?k:m;for(U=0;U<F.length;U++)K[U]=Math.round(d.c2p(F[U])-T);for(U=0;U<R.length;U++)v[U]=Math.round(p.c2p(R[U])-ia);for(U=0;U<W;U++)I[U]=B(U,K);for(z=0;z<fa;z++)for(F=ha(z,v),R=w[F.bin0],K=w[F.bin1],U=0;U<W;U++,u+=4)B=l(R,K,I[U],F),h(pa,u,B)}else for(z=0;z<N;z++)for(F=w[z],ha=I(z),U=0;U<
W;U++)B=g(F[U],1),u=4*(ha*W+v(U)),h(pa,u,B);w=S.createImageData(W,fa);try{w.data.set(pa)}catch(xa){for(U=w.data,B=U.length,z=0;z<B;z++)U[z]=pa[z]}S.putImageData(w,0,0)}else{pa=u.xgap;u=u.ygap;var da=Math.floor(pa/2),ya=Math.floor(u/2);for(z=0;z<N;z++)if(F=w[z],ha.reverse(),ha[K]=I(z+1),ha[0]!==ha[1]&&void 0!==ha[0]&&void 0!==ha[1]){U=v(0);var ja=[U,U];for(U=0;U<L;U++)ja.reverse(),ja[R]=v(U+1),ja[0]!==ja[1]&&void 0!==ja[0]&&void 0!==ja[1]&&(B=F[U],B=g(B,(ja[1]-ja[0])*(ha[1]-ha[0])),S.fillStyle="rgba("+
B.join(",")+")",S.fillRect(ja[0]+da,ha[0]+ya,ja[1]-ja[0]-pa,ha[1]-ha[0]-u))}}ba=Math.round(ba/ea);la=Math.round(la/ea);Z=Math.round(Z/ea);w=f("rgb("+ba+","+la+","+Z+")");a._hmpixcount=(a._hmpixcount||0)+ea;a._hmlumcount=(a._hmlumcount||0)+ea*w.getLuminance();c=t.selectAll("image").data(c);c.enter().append("svg:image").attr({xmlns:r.svg,preserveAspectRatio:"none"});c.attr({height:fa,width:W,x:T,y:ia,"xlink:href":Y.toDataURL("image/png")})}})}},{"../../components/colorscale":589,"../../constants/xmlns_namespaces":678,
"../../lib":700,"../../registry":829,d3:154,tinycolor2:521}],960:[function(a,p,l){var m=a("d3");p.exports=function(a){m.select(a).selectAll(".hm image").style("opacity",function(a){return a.trace.opacity})}},{d3:154}],961:[function(a,p,l){p.exports=function(a,k,h){!1===h("zsmooth")&&(h("xgap"),h("ygap"));h("zhoverformat")}},{}],962:[function(a,p,l){function m(a,b){var e=b(a);"scaled"===(e?b(a+"type","array"):"scaled")&&(b(a+"0"),b("d"+a));return e}var k=a("fast-isnumeric"),h=a("../../lib"),e=a("../../registry");
p.exports=function(a,b,n,l,p,d){var f=n("z");p=p||"x";d=d||"y";if(void 0===f||!f.length)return 0;if(h.isArray1D(a.z)){var c=n(p);n=n(d);c=h.minRowLength(c);n=h.minRowLength(n);if(0===c||0===n)return 0;b._length=Math.min(c,n,f.length)}else{m(p,n);m(d,n);c=!0;for(var q=!1,t=!1,r,u=0;u<f.length;u++){r=f[u];if(!h.isArrayOrTypedArray(r)){c=!1;break}0<r.length&&(q=!0);for(var w=0;w<r.length;w++)if(k(r[w])){t=!0;break}}if(!(c&&q&&t))return 0;n("transpose");b._length=null}e.getComponentMethod("calendars",
"handleTraceDefaults")(a,b,[p,d],l);return!0}},{"../../lib":700,"../../registry":829,"fast-isnumeric":221}],963:[function(a,p,l){l=a("../heatmap/attributes");var m=a("../../components/colorscale/attributes"),k=a("../../components/colorbar/attributes"),h=a("../../lib/extend").extendFlat;a=a("../../plot_api/edit_types").overrideAll;for(var e="z x x0 dx y y0 dy text transpose xtype ytype".split(" "),f={},b=0;b<e.length;b++){var n=e[b];f[n]=l[n]}h(f,m("",{cLetter:"z",autoColorDflt:!1}),{colorbar:k});
p.exports=a(f,"calc","nested")},{"../../components/colorbar/attributes":578,"../../components/colorscale/attributes":584,"../../lib/extend":690,"../../plot_api/edit_types":731,"../heatmap/attributes":948}],964:[function(a,p,l){function m(a,b){this.scene=a;this.uid=b;this.type="heatmapgl";this.name="";this.hoverinfo="all";this.xData=[];this.yData=[];this.zData=[];this.textLabels=[];this.idToIndex=[];this.bounds=[0,0,0,0];this.options={z:[],x:[],y:[],shape:[0,0],colorLevels:[0],colorValues:[0,0,0,1]};
this.heatmap=k(a.glplot,this.options);this.heatmap._trace=this}var k=a("gl-heatmap2d"),h=a("../../plots/cartesian/axes"),e=a("../../lib/str2rgbarray");a=m.prototype;a.handlePick=function(a){var b=this.options,e=b.shape,f=a.pointId,h=f%e[0];e=Math.floor(f/e[0]);return{trace:this,dataCoord:a.dataCoord,traceCoord:[b.x[h],b.y[e],b.z[f]],textLabel:this.textLabels[f],name:this.name,pointIndex:[e,h],hoverinfo:this.hoverinfo}};a.update=function(a,b){b=b[0];this.index=a.index;this.name=a.name;this.hoverinfo=
a.hoverinfo;var f=b.z;this.options.z=[].concat.apply([],f);this.options.shape=[f[0].length,f.length];this.options.x=b.x;this.options.y=b.y;f=a.colorscale;for(var k=a.zmin,m=a.zmax,d=f.length,g=Array(d),c=Array(4*d),l=0;l<d;l++){var p=f[l],q=e(p[1]);g[l]=k+p[0]*(m-k);for(p=0;4>p;p++)c[4*l+p]=q[p]}this.options.colorLevels=g;this.options.colorValues=c;this.textLabels=[].concat.apply([],a.text);this.heatmap.update(this.options);f=this.scene.xaxis;k=this.scene.yaxis;a._extremes[f._id]=h.findExtremes(f,
b.x);a._extremes[k._id]=h.findExtremes(k,b.y)};a.dispose=function(){this.heatmap.dispose()};p.exports=function(a,b,e){a=new m(a,b.uid);a.update(b,e);return a}},{"../../lib/str2rgbarray":723,"../../plots/cartesian/axes":748,"gl-heatmap2d":247}],965:[function(a,p,l){l={};l.attributes=a("./attributes");l.supplyDefaults=a("../heatmap/defaults");l.colorbar=a("../heatmap/colorbar");l.calc=a("../heatmap/calc");l.plot=a("./convert");l.moduleType="trace";l.name="heatmapgl";l.basePlotModule=a("../../plots/gl2d");
l.categories=["gl","gl2d","2dMap"];l.meta={};p.exports=l},{"../../plots/gl2d":787,"../heatmap/calc":949,"../heatmap/colorbar":951,"../heatmap/defaults":953,"./attributes":963,"./convert":964}],966:[function(a,p,l){l=a("../bar/attributes");var m=a("../../components/fx/hovertemplate_attributes"),k=a("./bin_attributes"),h=a("./constants");a=a("../../lib/extend").extendFlat;p.exports={x:{valType:"data_array",editType:"calc+clearAxisTypes"},y:{valType:"data_array",editType:"calc+clearAxisTypes"},text:a({},
l.text,{}),hovertext:a({},l.hovertext,{}),orientation:l.orientation,histfunc:{valType:"enumerated",values:["count","sum","avg","min","max"],dflt:"count",editType:"calc"},histnorm:{valType:"enumerated",values:["","percent","probability","density","probability density"],dflt:"",editType:"calc"},cumulative:{enabled:{valType:"boolean",dflt:!1,editType:"calc"},direction:{valType:"enumerated",values:["increasing","decreasing"],dflt:"increasing",editType:"calc"},currentbin:{valType:"enumerated",values:["include",
"exclude","half"],dflt:"include",editType:"calc"},editType:"calc"},nbinsx:{valType:"integer",min:0,dflt:0,editType:"calc"},xbins:k("x",!0),nbinsy:{valType:"integer",min:0,dflt:0,editType:"calc"},ybins:k("y",!0),autobinx:{valType:"boolean",dflt:null,editType:"calc"},autobiny:{valType:"boolean",dflt:null,editType:"calc"},hovertemplate:m({},{keys:h.eventDataKeys}),marker:l.marker,offsetgroup:l.offsetgroup,alignmentgroup:l.alignmentgroup,selected:l.selected,unselected:l.unselected,_deprecated:{bardir:l._deprecated.bardir}}},
{"../../components/fx/hovertemplate_attributes":615,"../../lib/extend":690,"../bar/attributes":839,"./bin_attributes":968,"./constants":972}],967:[function(a,p,l){p.exports=function(a,k){for(var h=a.length,e=0,f=0;f<h;f++)k[f]?(a[f]/=k[f],e+=a[f]):a[f]=null;return e}},{}],968:[function(a,p,l){p.exports=function(a,k){return{start:{valType:"any",editType:"calc"},end:{valType:"any",editType:"calc"},size:{valType:"any",editType:"calc"},editType:"calc"}}},{}],969:[function(a,p,l){var m=a("fast-isnumeric");
p.exports={count:function(a,h,e){e[a]++;return 1},sum:function(a,h,e,f){h=f[h];return m(h)?(h=Number(h),e[a]+=h,h):0},avg:function(a,h,e,f,b){h=f[h];m(h)&&(h=Number(h),e[a]+=h,b[a]++);return 0},min:function(a,h,e,f){h=f[h];if(m(h)){h=Number(h);if(!m(e[a]))return e[a]=h;if(e[a]>h)return f=h-e[a],e[a]=h,f}return 0},max:function(a,h,e,f){h=f[h];if(m(h)){h=Number(h);if(!m(e[a]))return e[a]=h;if(e[a]<h)return f=h-e[a],e[a]=h,f}return 0}}},{"fast-isnumeric":221}],970:[function(a,p,l){function m(a,c,d,f){if(0>=
a*c)return Infinity;for(var g="date"===d.type,n=k(Math.abs(c-a),g),m=0;10>m;m++){var l=k(80*n,g);if(n===l)break;var p=l;var q=a,t=c,r=d,v=f;g&&p>b?(q=h(q,r,v),t=h(t,r,v),p=p===e?0:1,p=q[p]!==t[p]):p=.1<Math.floor(t/p)-Math.floor(q/p);if(p)n=l;else break}return n}function k(a,c){return c&&a>r?a>b?a>1.1*e?e:a>1.1*f?f:b:a>n?n:a>q?q:r:Math.pow(10,Math.floor(Math.log(a)/Math.LN10))}function h(a,b,d){a=b.c2d(a,e,d).split("-");""===a[0]&&(a.unshift(),a[0]="-"+a[0]);return a}l=a("../../constants/numerical");
var e=l.ONEAVGYEAR,f=l.ONEAVGMONTH,b=l.ONEDAY,n=l.ONEHOUR,q=l.ONEMIN,r=l.ONESEC,d=a("../../plots/cartesian/axes").tickIncrement;p.exports=function(a,c,f,h,k){var g=-1.1*c,n=-.1*c,l=a-n;c=f[0];f=f[1];l=Math.min(m(c+n,c+l,h,k),m(f+n,f+l,h,k));g=Math.min(m(c+g,c+n,h,k),m(f+g,f+n,h,k));if(l>g&&g<Math.abs(f-c)/4E3){var p=l;var q=!1}else p=Math.min(l,g),q=!0;if("date"===h.type&&p>b){var t=p===e?1:6,r=p===e?"M12":"M1";return function(b,c){var f=h.c2d(b,e,k),g=f.indexOf("-",t);0<g&&(f=f.substr(0,g));f=h.d2c(f,
0,k);f<b&&(g=d(f,r,!1,k),(f+g)/2<b+a&&(f=g));return c&&q?d(f,r,!0,k):f}}return function(b,c){var d=p*Math.round(b/p);d+p/10<b&&d+.9*p<b+a&&(d+=p);c&&q&&(d-=p);return d}}},{"../../constants/numerical":677,"../../plots/cartesian/axes":748}],971:[function(a,p,l){function m(a,d,g,h,n){function c(a,b,c){b[a+"Found"]?(b[a]=t(b[a]),null===b[a]&&(b[a]=c[a])):(w[a]=b[a]=c[a],f.nestedProperty(r[0],m+"."+a).set(c[a]))}var m=h+"bins",l=a._fullLayout,p="overlay"===l.barmode,q,t="date"===g.type?function(a){return a||
0===a?f.cleanDate(a,null,g.calendar):null}:function(a){return e(a)?Number(a):null};l=l._histogramBinOpts[d._groupName];if(d._autoBinFinished)delete d._autoBinFinished;else{var r=l.traces;var v=l.sizeFound,u=[];var w=r[0]._autoBin={};var x=!0;for(q=0;q<r.length;q++){var y=r[q];if(y.visible){var B=y._pos0=g.makeCalcdata(y,h);u=f.concat(u,B);delete y._autoBinFinished;!0===d.visible&&(x?x=!1:(delete y._autoBin,y._autoBinFinished=1))}}q=r[0][h+"calendar"];u=b.autoBin(u,g,l.nbins,!1,q,v&&l.size);if(p&&
0===u._dataSpan&&"category"!==g.type&&"multicategory"!==g.type){if(n)return[u,B,!0];u=k(a,d,g,h,m)}B=y.cumulative;B.enabled&&"include"!==B.currentbin&&("decreasing"===B.direction?u.start=g.c2r(b.tickIncrement(g.r2c(u.start,0,q),u.size,!0,q)):u.end=g.c2r(b.tickIncrement(g.r2c(u.end,0,q),u.size,!1,q)));l.size=u.size;v||(w.size=u.size,f.nestedProperty(r[0],m+".size").set(u.size));c("start",l,u);c("end",l,u)}B=d._pos0;delete d._pos0;n=d._input[m]||{};a=f.extendFlat({},l);v=l.start;y=g.r2l(n.start);p=
void 0!==y;(l.startFound||p)&&y!==g.r2l(v)&&(y=p?y:f.aggNums(Math.min,null,B),v={type:"category"===g.type||"multicategory"===g.type?"linear":g.type,r2l:g.r2l,dtick:l.size,tick0:v,calendar:q,range:[y,b.tickIncrement(y,l.size,!1,q)].map(g.l2r)},v=b.tickFirst(v),v>g.r2l(y)&&(v=b.tickIncrement(v,l.size,!0,q)),a.start=g.l2r(v),p||f.nestedProperty(d,m+".start").set(a.start));q=l.end;p=g.r2l(n.end);n=void 0!==p;(l.endFound||n)&&p!==g.r2l(q)&&(l=n?p:f.aggNums(Math.max,null,B),a.end=g.l2r(l),n||f.nestedProperty(d,
m+".start").set(a.end));h="autobin"+h;!1===d._input[h]&&(d._input[m]=f.extendFlat({},d[m]||{}),delete d._input[h],delete d[h]);return[a,B]}function k(a,b,d,e,g){for(var c=b.xaxis,h=b.yaxis,k=b.orientation,n=[],l=a._fullData,p=0;p<l.length;p++){var q=l[p];"histogram"===q.type&&!0===q.visible&&q.orientation===k&&q.xaxis===c&&q.yaxis===h&&n.push(q)}p=!1;c=Infinity;h=[b];for(k=0;k<n.length;k++)if(l=n[k],l===b)p=!0;else if(p){q=m(a,l,d,e,!0);var t=q[0],r=q[2];l._autoBinFinished=1;l._pos0=q[1];r?h.push(l):
c=Math.min(c,t.size)}else c=Math.min(c,l[g].size);a=Array(h.length);for(k=0;k<h.length;k++)for(n=h[k]._pos0,l=0;l<n.length;l++)if(void 0!==n[l]){a[k]=n[l];break}isFinite(c)||(c=f.distinctVals(a).minDiff);for(k=0;k<h.length;k++)l=h[k],n=l[e+"calendar"],l._input[g]=l[g]={start:d.c2r(a[k]-c/2,0,n),end:d.c2r(a[k]+c/2,0,n),size:c};return b[g]}function h(a,b,d){function c(b){g=a[b];a[b]/=2}function e(b){f=a[b];a[b]=g+f/2;g+=f}var f,g;if("half"===d)if("increasing"===b)for(c(0),b=1;b<a.length;b++)e(b);else for(c(a.length-
1),b=a.length-2;0<=b;b--)e(b);else if("increasing"===b){for(b=1;b<a.length;b++)a[b]+=a[b-1];"exclude"===d&&(a.unshift(0),a.pop())}else{for(b=a.length-2;0<=b;b--)a[b]+=a[b+1];"exclude"===d&&(a.push(0),a.shift())}}var e=a("fast-isnumeric"),f=a("../../lib"),b=a("../../plots/cartesian/axes"),n=a("../bar/arrays_to_calcdata"),q=a("./bin_functions"),r=a("./norm_functions"),d=a("./average"),g=a("./bin_label_vals");p.exports=function(a,k){if(!0===k.visible){var c=[],l=[],p=b.getFromId(a,"h"===k.orientation?
k.yaxis||"y":k.xaxis||"x"),v="h"===k.orientation?"y":"x",u={x:"y",y:"x"}[v],w=k[v+"calendar"],x=k.cumulative;v=m(a,k,p,v);a=v[0];v=v[1];var z="string"===typeof a.size,J=[],E=z?J:a,H=[],M=[],O=[],I=0,F=k.histnorm,N=k.histfunc,L=-1!==F.indexOf("density"),R;x.enabled&&L&&(F=F.replace(/ ?density$/,""),L=!1);var K="max"===N||"min"===N?null:0;var U=q.count;F=r[F];var T=!1;if(f.isArrayOrTypedArray(k[u])&&"count"!==N){var Y=k[u];T="avg"===N;U=q[N]}u=p.r2c(a.start,0,w);for(R=p.r2c(a.end,0,w)+(u-b.tickIncrement(u,
a.size,!1,w))/1E6;u<R&&1E6>c.length;){N=b.tickIncrement(u,a.size,!1,w);c.push((u+N)/2);l.push(K);O.push([]);J.push(u);L&&H.push(1/(N-u));T&&M.push(0);if(N<=u)break;u=N}J.push(u);z||"date"!==p.type||(E={start:p.r2c(E.start,0,w),end:p.r2c(E.end,0,w),size:E.size});N=l.length;z=!0;var ia=R=Infinity;L={};for(u=0;u<v.length;u++){var S=v[u];K=f.findBin(S,E);0<=K&&K<N&&(I+=U(K,u,l,Y,M),z&&O[K].length&&S!==v[O[K][0]]&&(z=!1),O[K].push(u),L[u]=K,R=Math.min(R,S-J[K]),ia=Math.min(ia,J[K+1]-S))}var W;z||(W=g(R,
ia,J,p,w));T&&(I=d(l,M));F&&F(l,I,H);x.enabled&&h(l,x.direction,x.currentbin);E=Math.min(c.length,l.length);p=[];H=0;Y=E-1;for(u=0;u<E;u++)if(l[u]){H=u;break}for(u=E-1;u>=H;u--)if(l[u]){Y=u;break}for(u=H;u<=Y;u++)e(c[u])&&e(l[u])&&(E={p:c[u],s:l[u],b:0},x.enabled||(E.pts=O[u],z?E.ph0=E.ph1=O[u].length?v[O[u][0]]:c[u]:(E.ph0=W(J[u]),E.ph1=W(J[u+1],!0))),p.push(E));1===p.length&&(p[0].width1=b.tickIncrement(p[0].p,a.size,!1,w)-p[0].p);n(p,k);f.isArrayOrTypedArray(k.selectedpoints)&&f.tagSelected(p,
k,L);return p}}},{"../../lib":700,"../../plots/cartesian/axes":748,"../bar/arrays_to_calcdata":838,"./average":967,"./bin_functions":969,"./bin_label_vals":970,"./norm_functions":978,"fast-isnumeric":221}],972:[function(a,p,l){p.exports={eventDataKeys:["binNumber"]}},{}],973:[function(a,p,l){var m=a("../../lib"),k=m.nestedProperty,h=a("../bar/defaults").handleGroupingDefaults,e=a("../../plots/cartesian/axis_ids").getAxisGroup,f=a("./attributes"),b={x:[{aStr:"xbins.start",name:"start"},{aStr:"xbins.end",
name:"end"},{aStr:"xbins.size",name:"size"},{aStr:"nbinsx",name:"nbins"}],y:[{aStr:"ybins.start",name:"start"},{aStr:"ybins.end",name:"end"},{aStr:"ybins.size",name:"size"},{aStr:"nbinsy",name:"nbins"}]};p.exports=function(a,l){function n(a){return m.coerce(q._input,q,f,a)}var d=l._histogramBinOpts={},g="overlay"===l.barmode,c,p;for(c=0;c<a.length;c++){var q=a[c];if("histogram"===q.type){delete q._autoBinFinished;var u="v"===q.orientation?"x":"y";var w=q._groupName=g?q.uid:e(l,q.xaxis)+e(l,q.yaxis)+
u;(p=d[w])?p.traces.push(q):p=d[w]={traces:[q],direction:u};h(q._input,q,l,n)}}for(w in d)for(p=d[w],u=p.direction,l=b[u],a=0;a<l.length;a++)if(c=l[a],g=c.name,"nbins"!==g||!p.sizeFound){u=c.aStr;for(c=0;c<p.traces.length;c++){q=p.traces[c];var x=q._input;if(void 0!==k(x,u).get()){p[g]=n(u);p[g+"Found"]=!0;break}(x=q._autoBin)&&x[g]&&k(q,u).set(x[g])}if("start"===g||"end"===g)for(;c<p.traces.length;c++)q=p.traces[c],n(u,(q._autoBin||{})[g]);"nbins"!==g||p.sizeFound||p.nbinsFound||(q=p.traces[0],p[g]=
n(u))}}},{"../../lib":700,"../../plots/cartesian/axis_ids":751,"../bar/defaults":843,"./attributes":966}],974:[function(a,p,l){var m=a("../../registry"),k=a("../../lib"),h=a("../../components/color"),e=a("../bar/style_defaults"),f=a("./attributes");p.exports=function(a,n,l,p){function b(b,c){return k.coerce(a,n,f,b,c)}var g=b("x"),c=b("y");b("cumulative.enabled")&&(b("cumulative.direction"),b("cumulative.currentbin"));b("text");b("hovertext");b("hovertemplate");var q=b("orientation",c&&!g?"h":"v"),
r="v"===q?"x":"y";q="v"===q?"y":"x";(g=g&&c?Math.min(k.minRowLength(g)&&k.minRowLength(c)):k.minRowLength(n[r]||[]))?(n._length=g,m.getComponentMethod("calendars","handleTraceDefaults")(a,n,["x","y"],p),n[q]&&b("histfunc"),b("histnorm"),b("autobin"+r),e(a,n,b,l,p),k.coerceSelectionMarkerOpacity(n,b),l=(n.marker.line||{}).color,p=m.getComponentMethod("errorbars","supplyDefaults"),p(a,n,l||h.defaultLine,{axis:"y"}),p(a,n,l||h.defaultLine,{axis:"x",inherit:"y"})):n.visible=!1}},{"../../components/color":577,
"../../lib":700,"../../registry":829,"../bar/style_defaults":853,"./attributes":966}],975:[function(a,p,l){p.exports=function(a,k,h,e,f){a.x="xVal"in k?k.xVal:k.x;a.y="yVal"in k?k.yVal:k.y;"zLabelVal"in k&&(a.z=k.zLabelVal);k.xa&&(a.xaxis=k.xa);k.ya&&(a.yaxis=k.ya);if(!(h.cumulative||{}).enabled){k=Array.isArray(f)?e[0].pts[f[0]][f[1]]:e[f].pts;a.pointNumbers=k;a.binNumber=a.pointNumber;delete a.pointNumber;delete a.pointIndex;if(h._indexToPoints)for(e=[],f=0;f<k.length;f++)e=e.concat(h._indexToPoints[k[f]]);
else e=k;a.pointIndices=e}return a}},{}],976:[function(a,p,l){var m=a("../bar/hover").hoverPoints,k=a("../../plots/cartesian/axes").hoverLabelText;p.exports=function(a,e,f,b){if(e=m(a,e,f,b)){a=e[0];f=a.cd[a.index];b=a.cd[0].trace;if(!b.cumulative.enabled){var h="h"===b.orientation?"y":"x";a[h+"Label"]=k(a[h+"a"],f.ph0,f.ph1)}b.hovermplate&&(a.hovertemplate=b.hovertemplate);return e}}},{"../../plots/cartesian/axes":748,"../bar/hover":845}],977:[function(a,p,l){l={};l.attributes=a("./attributes");
l.layoutAttributes=a("../bar/layout_attributes");l.supplyDefaults=a("./defaults");l.crossTraceDefaults=a("./cross_trace_defaults");l.supplyLayoutDefaults=a("../bar/layout_defaults");l.calc=a("./calc");l.crossTraceCalc=a("../bar/cross_trace_calc").crossTraceCalc;l.plot=a("../bar/plot");l.layerName="barlayer";l.style=a("../bar/style").style;l.styleOnSelect=a("../bar/style").styleOnSelect;l.colorbar=a("../scatter/marker_colorbar");l.hoverPoints=a("./hover");l.selectPoints=a("../bar/select");l.eventData=
a("./event_data");l.moduleType="trace";l.name="histogram";l.basePlotModule=a("../../plots/cartesian");l.categories="cartesian svg bar histogram oriented errorBarsOK showLegend".split(" ");l.meta={};p.exports=l},{"../../plots/cartesian":759,"../bar/cross_trace_calc":842,"../bar/layout_attributes":847,"../bar/layout_defaults":848,"../bar/plot":849,"../bar/select":850,"../bar/style":852,"../scatter/marker_colorbar":1069,"./attributes":966,"./calc":971,"./cross_trace_defaults":973,"./defaults":974,"./event_data":975,
"./hover":976}],978:[function(a,p,l){p.exports={percent:function(a,k){var h=a.length;k=100/k;for(var e=0;e<h;e++)a[e]*=k},probability:function(a,k){for(var h=a.length,e=0;e<h;e++)a[e]/=k},density:function(a,k,h,e){k=a.length;e=e||1;for(var f=0;f<k;f++)a[f]=a[f]*h[f]*e},"probability density":function(a,k,h,e){var f=a.length;e&&(k/=e);for(e=0;e<f;e++)a[e]*=h[e]/k}}},{}],979:[function(a,p,l){l=a("../histogram/attributes");var m=a("../histogram/bin_attributes"),k=a("../heatmap/attributes"),h=a("../../components/fx/hovertemplate_attributes"),
e=a("../../components/colorscale/attributes"),f=a("../../components/colorbar/attributes");a=a("../../lib/extend").extendFlat;p.exports=a({x:l.x,y:l.y,z:{valType:"data_array",editType:"calc"},marker:{color:{valType:"data_array",editType:"calc"},editType:"calc"},histnorm:l.histnorm,histfunc:l.histfunc,nbinsx:l.nbinsx,xbins:m("x"),nbinsy:l.nbinsy,ybins:m("y"),autobinx:l.autobinx,autobiny:l.autobiny,xgap:k.xgap,ygap:k.ygap,zsmooth:k.zsmooth,zhoverformat:k.zhoverformat,hovertemplate:h({},{keys:"z"})},
e("",{cLetter:"z",autoColorDflt:!1}),{colorbar:f})},{"../../components/colorbar/attributes":578,"../../components/colorscale/attributes":584,"../../components/fx/hovertemplate_attributes":615,"../../lib/extend":690,"../heatmap/attributes":948,"../histogram/attributes":966,"../histogram/bin_attributes":968}],980:[function(a,p,l){function m(a,c,d,e,h,k,n){var g=c+"bins",m=a[g];m||(m=a[g]={});var l=a._input[g]||{},p=a._autoBin={};l.size||delete m.size;void 0===l.start&&delete m.start;void 0===l.end&&
delete m.end;l=!m.size;var q=void 0===m.start,r=void 0===m.end;if(l||q||r)d=b.autoBin(d,e,a["nbins"+c],"2d",n,m.size),"histogram2dcontour"===a.type&&(q&&(d.start=k(b.tickIncrement(h(d.start),d.size,!0,n))),r&&(d.end=k(b.tickIncrement(h(d.end),d.size,!1,n)))),l&&(m.size=p.size=d.size),q&&(m.start=p.start=d.start),r&&(m.end=p.end=d.end);c="autobin"+c;!1===a._input[c]&&(a._input[g]=f.extendFlat({},m),delete a._input[c],delete a[c])}function k(a,b,d,e){var c=Array(a);if(e)for(d=0;d<a;d++)c[d]=1/(b[d+
1]-b[d]);else for(b=1/d,d=0;d<a;d++)c[d]=b;return c}function h(a,b){return{start:a(b.start),end:a(b.end),size:b.size}}function e(a,b,e,f,h,k){var c=a.length-1,g=Array(c);if(b)for(e=0;e<c;e++)g[e]=[b[e],b[e]];else for(b=d(e,f,a,h,k),e=0;e<c;e++)g[e]=[b(a[e]),b(a[e+1],!0)];return g}var f=a("../../lib"),b=a("../../plots/cartesian/axes"),n=a("../histogram/bin_functions"),q=a("../histogram/norm_functions"),r=a("../histogram/average"),d=a("../histogram/bin_label_vals");p.exports=function(a,c){var d=b.getFromId(a,
c.xaxis||"x"),g=c.x?d.makeCalcdata(c,"x"):[],l=b.getFromId(a,c.yaxis||"y");a=c.y?l.makeCalcdata(c,"y"):[];var p=c.xcalendar,u=c.ycalendar,w=function(a){return d.r2c(a,0,p)},x=function(a){return l.r2c(a,0,u)},C=function(a){return d.c2r(a,0,p)},z=function(a){return l.c2r(a,0,u)},J,E=c._length;g.length>E&&g.splice(E,g.length-E);a.length>E&&a.splice(E,a.length-E);m(c,"x",g,d,w,C,p);m(c,"y",a,l,x,z,u);var H=[],M=[],O=[],I="string"===typeof c.xbins.size,F="string"===typeof c.ybins.size,N=[],L=[],R=I?N:
c.xbins,K=F?L:c.ybins,U=0,T=[],Y=[],ia=c.histnorm;var S=c.histfunc;var W=-1!==ia.indexOf("density"),fa="max"===S||"min"===S?null:0,qa=n.count;ia=q[ia];var ha=!1,ea=[],ba=[],la="z"in c?c.z:"marker"in c&&Array.isArray(c.marker.color)?c.marker.color:"";la&&"count"!==S&&(ha="avg"===S,qa=n[S]);var Z=c.xbins;S=w(Z.start);for(var pa=w(Z.end)+(S-b.tickIncrement(S,Z.size,!1,p))/1E6;S<pa;S=b.tickIncrement(S,Z.size,!1,p))M.push(fa),N.push(S),ha&&O.push(0);N.push(S);fa=M.length;Z=w(c.xbins.start);var da=(S-Z)/
fa;C=C(Z+da/2);Z=c.ybins;S=x(Z.start);for(pa=x(Z.end)+(S-b.tickIncrement(S,Z.size,!1,u))/1E6;S<pa;S=b.tickIncrement(S,Z.size,!1,u)){H.push(M.slice());L.push(S);var ya=Array(fa);for(J=0;J<fa;J++)ya[J]=[];Y.push(ya);ha&&T.push(O.slice())}L.push(S);O=H.length;Z=x(c.ybins.start);c=(S-Z)/O;z=z(Z+c/2);W&&(ea=k(M.length,R,da,I),ba=k(H.length,K,c,F));I||"date"!==d.type||(R=h(w,R));F||"date"!==l.type||(K=h(x,K));I=M=!0;F=Array(fa);W=Array(O);ya=J=pa=Z=Infinity;for(S=0;S<E;S++){var ja=g[S],xa=a[S];w=f.findBin(ja,
R);x=f.findBin(xa,K);0<=w&&w<fa&&0<=x&&x<O&&(U+=qa(w,S,H[x],la,T[x]),Y[x][w].push(S),M&&(void 0===F[w]?F[w]=ja:F[w]!==ja&&(M=!1)),I&&(void 0===W[w]?W[w]=xa:W[w]!==xa&&(I=!1)),Z=Math.min(Z,ja-N[w]),pa=Math.min(pa,N[w+1]-ja),J=Math.min(J,xa-L[x]),ya=Math.min(ya,L[x+1]-xa))}if(ha)for(x=0;x<O;x++)U+=r(H[x],T[x]);if(ia)for(x=0;x<O;x++)ia(H[x],U,ea,ba[x]);return{x:g,xRanges:e(N,M&&F,Z,pa,d,p),x0:C,dx:da,y:a,yRanges:e(L,I&&W,J,ya,l,u),y0:z,dy:c,z:H,pts:Y}}},{"../../lib":700,"../../plots/cartesian/axes":748,
"../histogram/average":967,"../histogram/bin_functions":969,"../histogram/bin_label_vals":970,"../histogram/norm_functions":978}],981:[function(a,p,l){function m(a,b,d,g){d=d[e.id2name(a[b+"axis"])].type;var c=b+"bins",n=a[c],m=a[b+"calendar"];n||(n=a[c]={});a="date"===d?function(a,b){return a||0===a?f.cleanDate(a,h,m):b}:function(a,b){return k(a)?Number(a):b};n.start=a(n.start,g.start);n.end=a(n.end,g.end);g=g.size;b=n.size;if(k(b))n.size=0<b?Number(b):g;else if("string"!==typeof b)n.size=g;else if(a=
b.charAt(0),b=b.substr(1),b=k(b)?Number(b):0,0>=b||"date"!==d||"M"!==a||b!==Math.round(b))n.size=g}var k=a("fast-isnumeric"),h=a("../../constants/numerical").BADNUM,e=a("../../plots/cartesian/axis_ids"),f=a("../../lib"),b=a("./attributes"),n=["x","y"];p.exports=function(a,e){function d(a){return f.coerce(c._input,c,b,a)}var g;for(g=0;g<a.length;g++){var c=a[g];var h=c.type;if("histogram2d"===h||"histogram2dcontour"===h)for(h=0;h<n.length;h++){var k=n[h];var l=k+"bins",p=(c._autoBin||{})[k]||{};d(l+
".start",p.start);d(l+".end",p.end);d(l+".size",p.size);m(c,k,e,p);(c[l]||{}).size||d("nbins"+k)}}}},{"../../constants/numerical":677,"../../lib":700,"../../plots/cartesian/axis_ids":751,"./attributes":979,"fast-isnumeric":221}],982:[function(a,p,l){var m=a("../../lib"),k=a("./sample_defaults"),h=a("../heatmap/style_defaults"),e=a("../../components/colorscale/defaults"),f=a("./attributes");p.exports=function(a,n,l,p){function b(b,c){return m.coerce(a,n,f,b,c)}k(a,n,b,p);!1!==n.visible&&(h(a,n,b,p),
e(a,n,p,b,{prefix:"",cLetter:"z"}),b("hovertemplate"))}},{"../../components/colorscale/defaults":587,"../../lib":700,"../heatmap/style_defaults":961,"./attributes":979,"./sample_defaults":985}],983:[function(a,p,l){var m=a("../heatmap/hover"),k=a("../../plots/cartesian/axes").hoverLabelText;p.exports=function(a,e,f,b,n,l){if(e=m(a,e,f,b,n,l))return a=e[0],b=a.index,n=a.cd[0],f=n.xRanges[b[1]],b=n.yRanges[b[0]],a.xLabel=k(a.xa,f[0],f[1]),a.yLabel=k(a.ya,b[0],b[1]),e}},{"../../plots/cartesian/axes":748,
"../heatmap/hover":955}],984:[function(a,p,l){l={};l.attributes=a("./attributes");l.supplyDefaults=a("./defaults");l.crossTraceDefaults=a("./cross_trace_defaults");l.calc=a("../heatmap/calc");l.plot=a("../heatmap/plot");l.layerName="heatmaplayer";l.colorbar=a("../heatmap/colorbar");l.style=a("../heatmap/style");l.hoverPoints=a("./hover");l.eventData=a("../histogram/event_data");l.moduleType="trace";l.name="histogram2d";l.basePlotModule=a("../../plots/cartesian");l.categories=["cartesian","svg","2dMap",
"histogram"];l.meta={};p.exports=l},{"../../plots/cartesian":759,"../heatmap/calc":949,"../heatmap/colorbar":951,"../heatmap/plot":959,"../heatmap/style":960,"../histogram/event_data":975,"./attributes":979,"./cross_trace_defaults":981,"./defaults":982,"./hover":983}],985:[function(a,p,l){var m=a("../../registry"),k=a("../../lib");p.exports=function(a,e,f,b){var h=f("x"),l=f("y");h=k.minRowLength(h);l=k.minRowLength(l);h&&l?(e._length=Math.min(h,l),m.getComponentMethod("calendars","handleTraceDefaults")(a,
e,["x","y"],b),(f("z")||f("marker.color"))&&f("histfunc"),f("histnorm"),f("autobinx"),f("autobiny")):e.visible=!1}},{"../../lib":700,"../../registry":829}],986:[function(a,p,l){l=a("../histogram2d/attributes");var m=a("../contour/attributes"),k=a("../../components/colorscale/attributes"),h=a("../../components/colorbar/attributes");a=a("../../lib/extend").extendFlat;p.exports=a({x:l.x,y:l.y,z:l.z,marker:l.marker,histnorm:l.histnorm,histfunc:l.histfunc,nbinsx:l.nbinsx,xbins:l.xbins,nbinsy:l.nbinsy,
ybins:l.ybins,autobinx:l.autobinx,autobiny:l.autobiny,autocontour:m.autocontour,ncontours:m.ncontours,contours:m.contours,line:m.line,zhoverformat:l.zhoverformat,hovertemplate:l.hovertemplate},k("",{cLetter:"z",editTypeOverride:"calc"}),{colorbar:h})},{"../../components/colorbar/attributes":578,"../../components/colorscale/attributes":584,"../../lib/extend":690,"../contour/attributes":919,"../histogram2d/attributes":979}],987:[function(a,p,l){var m=a("../../lib"),k=a("../histogram2d/sample_defaults"),
h=a("../contour/contours_defaults"),e=a("../contour/style_defaults"),f=a("./attributes");p.exports=function(a,n,l,p){function b(b,c){return m.coerce(a,n,f,b,c)}k(a,n,b,p);!1!==n.visible&&(h(a,n,b,function(b){return m.coerce2(a,n,f,b)}),e(a,n,b,p),b("hovertemplate"))}},{"../../lib":700,"../contour/contours_defaults":926,"../contour/style_defaults":940,"../histogram2d/sample_defaults":985,"./attributes":986}],988:[function(a,p,l){l={};l.attributes=a("./attributes");l.supplyDefaults=a("./defaults");
l.crossTraceDefaults=a("../histogram2d/cross_trace_defaults");l.calc=a("../contour/calc");l.plot=a("../contour/plot").plot;l.layerName="contourlayer";l.style=a("../contour/style");l.colorbar=a("../contour/colorbar");l.hoverPoints=a("../contour/hover");l.moduleType="trace";l.name="histogram2dcontour";l.basePlotModule=a("../../plots/cartesian");l.categories="cartesian svg 2dMap contour histogram showLegend".split(" ");l.meta={};p.exports=l},{"../../plots/cartesian":759,"../contour/calc":920,"../contour/colorbar":922,
"../contour/hover":932,"../contour/plot":937,"../contour/style":939,"../histogram2d/cross_trace_defaults":981,"./attributes":986,"./defaults":987}],989:[function(a,p,l){function m(a){return{show:{valType:"boolean",dflt:!1},locations:{valType:"data_array",dflt:[]},fill:{valType:"number",min:0,max:1,dflt:1}}}function k(a){return{show:{valType:"boolean",dflt:!0},fill:{valType:"number",min:0,max:1,dflt:1}}}l=a("../../components/colorscale/attributes");var h=a("../../components/colorbar/attributes"),e=
a("../../components/fx/hovertemplate_attributes"),f=a("../mesh3d/attributes"),b=a("../../plots/attributes"),n=a("../../lib/extend").extendFlat;a=a("../../plot_api/edit_types").overrideAll;p=p.exports=a(n({x:{valType:"data_array"},y:{valType:"data_array"},z:{valType:"data_array"},value:{valType:"data_array"},isomin:{valType:"number"},isomax:{valType:"number"},surface:{show:{valType:"boolean",dflt:!0},count:{valType:"integer",dflt:2,min:1},fill:{valType:"number",min:0,max:1,dflt:1},pattern:{valType:"flaglist",
flags:["A","B","C","D","E"],extras:["all","odd","even"],dflt:"all"}},spaceframe:{show:{valType:"boolean",dflt:!1},fill:{valType:"number",min:0,max:1,dflt:.15}},slices:{x:m("x"),y:m("y"),z:m("z")},caps:{x:k("x"),y:k("y"),z:k("z")},text:{valType:"string",dflt:"",arrayOk:!0},hovertext:{valType:"string",dflt:"",arrayOk:!0},hovertemplate:e()},l("",{colorAttr:"`value`",showScaleDflt:!0,editTypeOverride:"calc"}),{colorbar:h,opacity:f.opacity,lightposition:f.lightposition,lighting:f.lighting,flatshading:f.flatshading,
contour:f.contour,hoverinfo:n({},b.hoverinfo)}),"calc","nested");p.flatshading.dflt=!0;p.lighting.facenormalsepsilon.dflt=0;p.x.editType=p.y.editType=p.z.editType=p.value.editType="calc+clearAxisTypes";p.transforms=void 0},{"../../components/colorbar/attributes":578,"../../components/colorscale/attributes":584,"../../components/fx/hovertemplate_attributes":615,"../../lib/extend":690,"../../plot_api/edit_types":731,"../../plots/attributes":745,"../mesh3d/attributes":994}],990:[function(a,p,l){var m=
a("../../components/colorscale/calc");p.exports=function(a,h){h._len=Math.min(h.x.length,h.y.length,h.z.length,h.value.length);for(var e=Infinity,f=-Infinity,b=h.value.length,k=0;k<b;k++){var l=h.value[k];e=Math.min(e,l);f=Math.max(f,l)}h._minValues=e;h._maxValues=f;h._vMin=void 0===h.isomin||null===h.isomin?e:h.isomin;h._vMax=void 0===h.isomax||null===h.isomin?f:h.isomax;m(a,h,{vals:[h._vMin,h._vMax],containerStr:"",cLetter:"c"})}},{"../../components/colorscale/calc":585}],991:[function(a,p,l){function m(a,
b,e){this.scene=a;this.uid=e;this.mesh=b;this.name="";this.data=null;this.showContour=!1}function k(a,b){for(var d=b.length-1;0<d;d--){var c=Math.min(b[d],b[d-1]),e=Math.max(b[d],b[d-1]);if(e>c&&c<a&&a<=e)return{id:d,distRatio:(e-a)/(e-c)}}return{id:0,distRatio:0}}function h(a){function b(a,b,c){return c+xa*b+xa*ja*a}function e(){aa=[];ma=[];Aa=[];va=[];la=ba=0}function c(a,b,c,d){aa.push(a);ma.push(b);Aa.push(c);va.push(d);ba++;return ba-1}function f(a,b,c){for(var d=[],e=0;e<a.length;e++)d[e]=a[e]*
(1-c)+c*b[e];return d}function h(a,b){return"all"===a||null===a?!0:-1<a.indexOf(b)}function n(b,d,e){la=ba;var g=[d];var h=[e];if(1<=sa)g=[d],h=[e];else if(0<sa){var k=e;g=d[0];h=d[1];d=d[2];for(var n=[],m=0;m<g.length;m++)n[m]=(g[m]+h[m]+d[m])/3;var l=Math.sqrt(1-sa);m=f(n,g,l);e=f(n,h,l);var p=f(n,d,l);n=k[0];l=k[1];k=k[2];d=[[g,h,e],[e,m,g],[h,d,p],[p,e,h],[d,g,m],[m,p,d]];h=[[n,l,-1],[-1,-1,n],[l,k,-1],[-1,-1,l],[k,n,-1],[-1,-1,k]];g=d}for(k=0;k<g.length;k++){d=g[k];e=h[k];m=[];for(n=0;3>n;n++){var q=
d[n][0],t=d[n][1];p=d[n][2];l=d[n][3];if(-1<e[n])var r=e[n];else a:{r=va.length;for(var v=la;v<r;v++)if(q===aa[v]&&t===ma[v]&&p===Aa[v]){r=v;break a}r=-1}-1<r?m[n]=r:(r=m,v=n,l=null===b?l:b,r[v]=c(q,t,p,l))}d=m[1];e=m[2];a._i.push(m[0]);a._j.push(d);a._k.push(e);ea++}}function m(a,b,c){var d=function(d,e,f){n(a,[b[d],b[e],b[f]],[c[d],c[e],c[f]])};d(0,1,2);d(2,3,0)}function l(a,b,c){var d=function(d,e,f){n(a,[b[d],b[e],b[f]],[c[d],c[e],c[f]])};d(0,1,2);d(3,0,1);d(2,3,0);d(1,2,3)}function p(a,b,c,d){var e=
a[3];e<c&&(e=c);e>d&&(e=d);c=(a[3]-e)/(a[3]-b[3]+1E-9);d=[];for(e=0;4>e;e++)d[e]=(1-c)*a[e]+c*b[e];return d}function r(a,b,c){return a>=b&&a<=c}function u(a){var b=.001*(ta-wa);return a>=wa-b&&a<=ta+b}function w(b){for(var c=[],d=0;4>d;d++){var e=b[d];c.push([a.x[e],a.y[e],a.z[e],a.value[e]])}return c}function x(a,b,c,d,e,f){f||(f=1);c=[-1,-1,-1];var g=!1,h=[r(b[0][3],d,e),r(b[1][3],d,e),r(b[2][3],d,e)];if(!h[0]&&!h[1]&&!h[2])return!1;var k=function(a,b,c){return u(b[0][3])&&u(b[1][3])&&u(b[2][3])?
(n(a,b,c),!0):3>f?x(a,b,c,wa,ta,++f):!1};if(h[0]&&h[1]&&h[2])return k(a,b,c)||g;var m=!1;[[0,1,2],[2,0,1],[1,2,0]].forEach(function(f){if(h[f[0]]&&h[f[1]]&&!h[f[2]]){var n=b[f[0]],l=b[f[1]],q=b[f[2]],t=p(q,n,d,e);q=p(q,l,d,e);g=k(a,[q,t,n],[-1,-1,c[f[0]]])||g;g=k(a,[n,l,q],[c[f[0]],c[f[1]],-1])||g;m=!0}});if(m)return g;[[0,1,2],[1,2,0],[2,0,1]].forEach(function(f){if(h[f[0]]&&!h[f[1]]&&!h[f[2]]){var n=b[f[0]],l=b[f[2]],q=p(b[f[1]],n,d,e);l=p(l,n,d,e);g=k(a,[l,q,n],[-1,-1,c[f[0]]])||g;m=!0}});return g}
function E(a,b,c,d){var e=!1,f=w(b),g=[r(f[0][3],c,d),r(f[1][3],c,d),r(f[2][3],c,d),r(f[3][3],c,d)];if(!(g[0]||g[1]||g[2]||g[3]))return e;if(g[0]&&g[1]&&g[2]&&g[3])return ha&&(e=l(a,f,b)||e),e;var h=!1;[[0,1,2,3],[3,0,1,2],[2,3,0,1],[1,2,3,0]].forEach(function(k){if(g[k[0]]&&g[k[1]]&&g[k[2]]&&!g[k[3]]){var m=f[k[0]],l=f[k[1]],q=f[k[2]],t=f[k[3]];ha?e=n(a,[m,l,q],[b[k[0]],b[k[1]],b[k[2]]])||e:(k=p(t,m,c,d),l=p(t,l,c,d),q=p(t,q,c,d),e=n(null,[k,l,q],[-1,-1,-1])||e);h=!0}});if(h)return e;[[0,1,2,3],
[1,2,3,0],[2,3,0,1],[3,0,1,2],[0,2,3,1],[1,3,2,0]].forEach(function(k){if(g[k[0]]&&g[k[1]]&&!g[k[2]]&&!g[k[3]]){var l=f[k[0]],q=f[k[1]],t=f[k[2]],r=f[k[3]],v=p(t,l,c,d);t=p(t,q,c,d);var u=p(r,q,c,d);r=p(r,l,c,d);ha?(e=n(a,[l,r,v],[b[k[0]],-1,-1])||e,e=n(a,[q,t,u],[b[k[1]],-1,-1])||e):e=m(null,[v,t,u,r],[-1,-1,-1,-1])||e;h=!0}});if(h)return e;[[0,1,2,3],[1,2,3,0],[2,3,0,1],[3,0,1,2]].forEach(function(k){if(g[k[0]]&&!g[k[1]]&&!g[k[2]]&&!g[k[3]]){var m=f[k[0]],l=f[k[2]],q=f[k[3]],t=p(f[k[1]],m,c,d);
l=p(l,m,c,d);q=p(q,m,c,d);ha?(e=n(a,[m,t,l],[b[k[0]],-1,-1])||e,e=n(a,[m,l,q],[b[k[0]],-1,-1])||e,e=n(a,[m,q,t],[b[k[0]],-1,-1])||e):e=n(null,[t,l,q],[-1,-1,-1])||e;h=!0}});return e}function z(a,b,c,d,e,f,g,k,n,m,l){var p=!1;qa&&(h(a,"A")&&(p=E(null,[b,c,d,f],m,l)||p),h(a,"B")&&(p=E(null,[c,d,e,n],m,l)||p),h(a,"C")&&(p=E(null,[c,f,g,n],m,l)||p),h(a,"D")&&(p=E(null,[d,f,k,n],m,l)||p),h(a,"E")&&(p=E(null,[c,d,f,n],m,l)||p));ha&&(p=E(a,[c,d,f,n],m,l)||p);return p}function M(a,b,c,d,e,f,g,h){return[!0===
h[0]?!0:x(a,w([b,c,d]),[b,c,d],f,g),!0===h[1]?!0:x(a,w([d,e,b]),[d,e,b],f,g)]}function O(a,b,c,d,e,f,g,h,k){return h?M(a,b,c,e,d,f,g,k):M(a,c,e,d,b,f,g,k)}function I(a,c,d,e,g,h,k){var n=!1,m=function(){n=x(a,[q,t,r],[-1,-1,-1],g,h)||n;n=x(a,[r,v,q],[-1,-1,-1],g,h)||n},l=k[0],p=k[1];k=k[2];if(l){var q=f(w([b(c,d-0,e-0)])[0],w([b(c-1,d-0,e-0)])[0],l);var t=f(w([b(c,d-0,e-1)])[0],w([b(c-1,d-0,e-1)])[0],l);var r=f(w([b(c,d-1,e-1)])[0],w([b(c-1,d-1,e-1)])[0],l);var v=f(w([b(c,d-1,e-0)])[0],w([b(c-1,d-
1,e-0)])[0],l);m()}p&&(q=f(w([b(c-0,d,e-0)])[0],w([b(c-0,d-1,e-0)])[0],p),t=f(w([b(c-0,d,e-1)])[0],w([b(c-0,d-1,e-1)])[0],p),r=f(w([b(c-1,d,e-1)])[0],w([b(c-1,d-1,e-1)])[0],p),v=f(w([b(c-1,d,e-0)])[0],w([b(c-1,d-1,e-0)])[0],p),m());k&&(q=f(w([b(c-0,d-0,e)])[0],w([b(c-0,d-0,e-1)])[0],k),t=f(w([b(c-0,d-1,e)])[0],w([b(c-0,d-1,e-1)])[0],k),r=f(w([b(c-1,d-1,e)])[0],w([b(c-1,d-1,e-1)])[0],k),v=f(w([b(c-1,d-0,e)])[0],w([b(c-1,d-0,e-1)])[0],k),m());return n}function F(a,c,d,e,f){for(var g=[],h=0,k=0;k<c.length;k++)for(var n=
c[k],m=1;m<xa;m++)for(var l=1;l<ja;l++)g.push(O(a,b(n,l-1,m-1),b(n,l-1,m),b(n,l,m-1),b(n,l,m),d,e,(n+l+m)%2,f&&f[h]?f[h]:[])),h++;return g}function N(a,c,d,e,f){for(var g=[],h=0,k=0;k<c.length;k++)for(var n=c[k],m=1;m<ya;m++)for(var l=1;l<xa;l++)g.push(O(a,b(m-1,n,l-1),b(m,n,l-1),b(m-1,n,l),b(m,n,l),d,e,(m+n+l)%2,f&&f[h]?f[h]:[])),h++;return g}function L(a,c,d,e,f){for(var g=[],h=0,k=0;k<c.length;k++)for(var n=c[k],m=1;m<ja;m++)for(var l=1;l<ya;l++)g.push(O(a,b(l-1,m-1,n),b(l-1,m,n),b(l,m-1,n),b(l,
m,n),d,e,(l+m+n)%2,f&&f[h]?f[h]:[])),h++;return g}function R(a,c,d){for(var e=1;e<xa;e++)for(var f=1;f<ja;f++)for(var g=1;g<ya;g++){var h=a,k=b(g-1,f-1,e-1),n=b(g-1,f-1,e),m=b(g-1,f,e-1),l=b(g-1,f,e),p=b(g,f-1,e-1),q=b(g,f-1,e),t=b(g,f,e-1),r=b(g,f,e),v=c,u=d,w=h;(g+f+e)%2?(qa&&"even"===h&&(w=null),z(w,k,n,m,l,p,q,t,r,v,u)):(qa&&"odd"===h&&(w=null),z(w,r,t,q,p,l,m,n,k,v,u))}}function K(a,b,c){ha=!0;R(a,b,c);ha=!1}function U(a,b,c){qa=!0;R(a,b,c);qa=!1}function T(a,b){for(var c=[];a<b;a++)c.push(a);
return c}function Y(){for(var d=0;d<ya;d++)for(var e=0;e<ja;e++)for(var f=0;f<xa;f++){var g=b(d,e,f);c(a.x[g],a.y[g],a.z[g],a.value[g])}}a._i=[];a._j=[];a._k=[];var ia=a.surface.show,S=a.spaceframe.show,W=a.surface.fill,fa=a.spaceframe.fill,qa=!1,ha=!1,ea=0,ba,la,Z=q.distinctVals(a.x.slice(0,a._len)).vals,pa=q.distinctVals(a.y.slice(0,a._len)).vals,da=q.distinctVals(a.z.slice(0,a._len)).vals,ya=Z.length,ja=pa.length,xa=da.length,za=a._minValues,ka=a._maxValues,wa=a._vMin,ta=a._vMax,aa,ma,Aa,va,sa;
(function(){e();Y();S&&fa&&(sa=fa,K(null,wa,ta));if(ia&&W){sa=W;for(var b=a.surface.pattern,c=a.surface.count,d=0;d<c;d++){var f=1===c?.5:d/(c-1);f=(1-f)*wa+f*ta;f=Math.abs(f-za)>Math.abs(f-ka)?[za,f]:[f,ka];U(b,f[0],f[1])}}var g=[[Math.min(wa,ka),Math.max(wa,ka)],[Math.min(za,ta),Math.max(za,ta)]];["x","y","z"].forEach(function(b){for(var c=[],d=0;d<g.length;d++){var e=0,f=g[d][0],h=g[d][1],n=a.slices[b];if(n.show&&n.fill){sa=n.fill;var m=[],l=[],p=[];if(n.locations.length)for(var q=0;q<n.locations.length;q++){var t=
k(n.locations[q],"x"===b?Z:"y"===b?pa:da);0===t.distRatio?m.push(t.id):0<t.id&&(l.push(t.id),"x"===b?p.push([t.distRatio,0,0]):"y"===b?p.push([0,t.distRatio,0]):p.push([0,0,t.distRatio]))}else m="x"===b?T(1,ya-1):"y"===b?T(1,ja-1):T(1,xa-1);if(0<l.length){if("x"===b){n=e;q=f;t=h;for(var r=c[e],v=[],u=0,w=0;w<l.length;w++)for(var x=l[w],y=1;y<xa;y++)for(var A=1;A<ja;A++)v.push(I(null,x,A,y,q,t,p[w],r&&r[u]?r[u]:[])),u++;c[n]=v}else if("y"===b){n=e;q=f;t=h;r=c[e];v=[];for(w=u=0;w<l.length;w++)for(x=
l[w],y=1;y<ya;y++)for(A=1;A<xa;A++)v.push(I(null,y,x,A,q,t,p[w],r&&r[u]?r[u]:[])),u++;c[n]=v}else{n=e;q=f;t=h;r=c[e];v=[];for(w=u=0;w<l.length;w++)for(x=l[w],y=1;y<ja;y++)for(A=1;A<ya;A++)v.push(I(null,A,y,x,q,t,p[w],r&&r[u]?r[u]:[])),u++;c[n]=v}e++}0<m.length&&(c[e]="x"===b?F(null,m,f,h,c[e]):"y"===b?N(null,m,f,h,c[e]):L(null,m,f,h,c[e]),e++)}m=a.caps[b];m.show&&m.fill&&(sa=m.fill,c[e]="x"===b?F(null,[0,ya-1],f,h,c[e]):"y"===b?N(null,[0,ja-1],f,h,c[e]):L(null,[0,xa-1],f,h,c[e]))}});0===ea&&e();a._x=
aa;a._y=ma;a._z=Aa;a._intensity=va;a._Xs=Z;a._Ys=pa;a._Zs=da})();return a}var e=a("gl-mesh3d"),f=a("../../lib/gl_format_color").parseColorScale,b=a("../../lib/str2rgbarray"),n=a("../../plots/gl3d/zip3"),q=a("../../lib");a=m.prototype;a.handlePick=function(a){if(a.object===this.mesh){var b=a.data.index,e=this.data._y[b],c=this.data._z[b],f=this.data._Ys.length,h=this.data._Zs.length;b=k(this.data._x[b],this.data._Xs).id;e=k(e,this.data._Ys).id;c=k(c,this.data._Zs).id;f=a.index=c+h*e+h*f*b;a.traceCoordinate=
[this.data._x[f],this.data._y[f],this.data._z[f],this.data.value[f]];h=this.data.hovertext||this.data.text;Array.isArray(h)&&void 0!==h[f]?a.textLabel=h[f]:h&&(a.textLabel=h);return!0}};a.update=function(a){function d(a,b,c,d){return b.map(function(b){return a.d2l(b,0,d)*c})}var e=this.scene,c=e.fullSceneLayout;this.data=h(a);e=n(d(c.xaxis,a._x,e.dataScale[0],a.xcalendar),d(c.yaxis,a._y,e.dataScale[1],a.ycalendar),d(c.zaxis,a._z,e.dataScale[2],a.zcalendar));c=n(a._i,a._j,a._k);e={positions:e,cells:c,
lightPosition:[a.lightposition.x,a.lightposition.y,a.lightposition.z],ambient:a.lighting.ambient,diffuse:a.lighting.diffuse,specular:a.lighting.specular,roughness:a.lighting.roughness,fresnel:a.lighting.fresnel,vertexNormalsEpsilon:a.lighting.vertexnormalsepsilon,faceNormalsEpsilon:a.lighting.facenormalsepsilon,opacity:a.opacity,contourEnable:a.contour.show,contourColor:b(a.contour.color).slice(0,3),contourWidth:a.contour.width,useFacetNormals:a.flatshading};e.vertexIntensity=a._intensity;e.vertexIntensityBounds=
[a.cmin,a.cmax];e.colormap=f(a);this.mesh.update(e)};a.dispose=function(){this.scene.glplot.remove(this.mesh);this.mesh.dispose()};p.exports=function(a,b){var d=e({gl:a.glplot.gl}),c=new m(a,d,b.uid);d._trace=c;c.update(b);a.glplot.add(d);return c}},{"../../lib":700,"../../lib/gl_format_color":697,"../../lib/str2rgbarray":723,"../../plots/gl3d/zip3":800,"gl-mesh3d":276}],992:[function(a,p,l){var m=a("../../registry"),k=a("../../lib"),h=a("../../components/colorscale/defaults"),e=a("./attributes");
p.exports=function(a,b,n,l){function f(c,d){return k.coerce(a,b,e,c,d)}n=f("isomin");var d=f("isomax");void 0!==d&&null!==d&&void 0!==n&&null!==n&&n>d&&(b.isomin=null,b.isomax=null);n=f("x");d=f("y");var g=f("z"),c=f("value");n&&n.length&&d&&d.length&&g&&g.length&&c&&c.length?(m.getComponentMethod("calendars","handleTraceDefaults")(a,b,["x","y","z"],l),["x","y","z"].forEach(function(a){var b="caps."+a;f(b+".show")&&f(b+".fill");a="slices."+a;f(a+".show")&&(f(a+".fill"),f(a+".locations"))}),f("spaceframe.show")&&
f("spaceframe.fill"),f("surface.show")&&(f("surface.count"),f("surface.fill"),f("surface.pattern")),f("contour.show")&&(f("contour.color"),f("contour.width")),"text hovertext hovertemplate lighting.ambient lighting.diffuse lighting.specular lighting.roughness lighting.fresnel lighting.vertexnormalsepsilon lighting.facenormalsepsilon lightposition.x lightposition.y lightposition.z flatshading opacity".split(" ").forEach(function(a){f(a)}),h(a,b,l,f,{prefix:"",cLetter:"c"}),b._length=null):b.visible=
!1}},{"../../components/colorscale/defaults":587,"../../lib":700,"../../registry":829,"./attributes":989}],993:[function(a,p,l){l={};l.attributes=a("./attributes");l.supplyDefaults=a("./defaults");l.calc=a("./calc");l.colorbar={min:"cmin",max:"cmax"};l.plot=a("./convert");l.moduleType="trace";l.name="isosurface";l.basePlotModule=a("../../plots/gl3d");l.categories=["gl3d"];l.meta={};p.exports=l},{"../../plots/gl3d":789,"./attributes":989,"./calc":990,"./convert":991,"./defaults":992}],994:[function(a,
p,l){l=a("../../components/colorscale/attributes");var m=a("../../components/colorbar/attributes"),k=a("../../components/fx/hovertemplate_attributes"),h=a("../surface/attributes"),e=a("../../plots/attributes");a=a("../../lib/extend").extendFlat;p.exports=a({x:{valType:"data_array",editType:"calc+clearAxisTypes"},y:{valType:"data_array",editType:"calc+clearAxisTypes"},z:{valType:"data_array",editType:"calc+clearAxisTypes"},i:{valType:"data_array",editType:"calc"},j:{valType:"data_array",editType:"calc"},
k:{valType:"data_array",editType:"calc"},text:{valType:"string",dflt:"",arrayOk:!0,editType:"calc"},hovertext:{valType:"string",dflt:"",arrayOk:!0,editType:"calc"},hovertemplate:k({editType:"calc"}),delaunayaxis:{valType:"enumerated",values:["x","y","z"],dflt:"z",editType:"calc"},alphahull:{valType:"number",dflt:-1,editType:"calc"},intensity:{valType:"data_array",editType:"calc"},color:{valType:"color",editType:"calc"},vertexcolor:{valType:"data_array",editType:"calc"},facecolor:{valType:"data_array",
editType:"calc"},transforms:void 0},l("",{colorAttr:"`intensity`",showScaleDflt:!0,editTypeOverride:"calc"}),{colorbar:m,opacity:h.opacity,flatshading:{valType:"boolean",dflt:!1,editType:"calc"},contour:{show:a({},h.contours.x.show,{}),color:h.contours.x.color,width:h.contours.x.width,editType:"calc"},lightposition:{x:a({},h.lightposition.x,{dflt:1E5}),y:a({},h.lightposition.y,{dflt:1E5}),z:a({},h.lightposition.z,{dflt:0}),editType:"calc"},lighting:a({vertexnormalsepsilon:{valType:"number",min:0,
max:1,dflt:1E-12,editType:"calc"},facenormalsepsilon:{valType:"number",min:0,max:1,dflt:1E-6,editType:"calc"},editType:"calc"},h.lighting),hoverinfo:a({},e.hoverinfo,{editType:"calc"})})},{"../../components/colorbar/attributes":578,"../../components/colorscale/attributes":584,"../../components/fx/hovertemplate_attributes":615,"../../lib/extend":690,"../../plots/attributes":745,"../surface/attributes":1148}],995:[function(a,p,l){var m=a("../../components/colorscale/calc");p.exports=function(a,h){h.intensity&&
m(a,h,{vals:h.intensity,containerStr:"",cLetter:"c"})}},{"../../components/colorscale/calc":585}],996:[function(a,p,l){function m(a,b,c){this.scene=a;this.uid=c;this.mesh=b;this.name="";this.color="#fff";this.data=null;this.showContour=!1}function k(a){for(var b=[],c=a.length,d=0;d<c;d++)b[d]=g(a[d]);return b}function h(a,b,c,d){for(var e=[],f=b.length,g=0;g<f;g++)e[g]=a.d2l(b[g],0,d)*c;return e}function e(a){for(var b=[],c=a.length,d=0;d<c;d++)b[d]=Math.round(a[d]);return b}function f(a,b){for(var c=
a.length,d=0;d<c;d++)if(-.5>=a[d]||a[d]>=b-.5)return!1;return!0}var b=a("gl-mesh3d"),n=a("delaunay-triangulate"),q=a("alpha-shape"),r=a("convex-hull"),d=a("../../lib/gl_format_color").parseColorScale,g=a("../../lib/str2rgbarray"),c=a("../../plots/gl3d/zip3");a=m.prototype;a.handlePick=function(a){if(a.object===this.mesh){var b=a.index=a.data.index;a.traceCoordinate=[this.data.x[b],this.data.y[b],this.data.z[b]];var c=this.data.hovertext||this.data.text;Array.isArray(c)&&void 0!==c[b]?a.textLabel=
c[b]:c&&(a.textLabel=c);return!0}};a.update=function(a){var b=this.scene,m=b.fullSceneLayout;this.data=a;var l=a.x.length;b=c(h(m.xaxis,a.x,b.dataScale[0],a.xcalendar),h(m.yaxis,a.y,b.dataScale[1],a.ycalendar),h(m.zaxis,a.z,b.dataScale[2],a.zcalendar));if(a.i&&a.j&&a.k){if(a.i.length!==a.j.length||a.j.length!==a.k.length||!f(a.i,l)||!f(a.j,l)||!f(a.k,l))return;l=c(e(a.i),e(a.j),e(a.k))}else if(0===a.alphahull)l=r(b);else if(0<a.alphahull)l=q(a.alphahull,b);else{l=["x","y","z"].indexOf(a.delaunayaxis);
m=[];for(var p=b.length,v=0;v<p;v++)m[v]=[b[v][(l+1)%3],b[v][(l+2)%3]];l=n(m)}b={positions:b,cells:l,lightPosition:[a.lightposition.x,a.lightposition.y,a.lightposition.z],ambient:a.lighting.ambient,diffuse:a.lighting.diffuse,specular:a.lighting.specular,roughness:a.lighting.roughness,fresnel:a.lighting.fresnel,vertexNormalsEpsilon:a.lighting.vertexnormalsepsilon,faceNormalsEpsilon:a.lighting.facenormalsepsilon,opacity:a.opacity,contourEnable:a.contour.show,contourColor:g(a.contour.color).slice(0,
3),contourWidth:a.contour.width,useFacetNormals:a.flatshading};a.intensity?(this.color="#fff",b.vertexIntensity=a.intensity,b.vertexIntensityBounds=[a.cmin,a.cmax],b.colormap=d(a)):a.vertexcolor?(this.color=a.vertexcolor[0],b.vertexColors=k(a.vertexcolor)):a.facecolor?(this.color=a.facecolor[0],b.cellColors=k(a.facecolor)):(this.color=a.color,b.meshColor=g(a.color));this.mesh.update(b)};a.dispose=function(){this.scene.glplot.remove(this.mesh);this.mesh.dispose()};p.exports=function(a,c){var d=b({gl:a.glplot.gl}),
e=new m(a,d,c.uid);d._trace=e;e.update(c);a.glplot.add(d);return e}},{"../../lib/gl_format_color":697,"../../lib/str2rgbarray":723,"../../plots/gl3d/zip3":800,"alpha-shape":54,"convex-hull":120,"delaunay-triangulate":156,"gl-mesh3d":276}],997:[function(a,p,l){var m=a("../../registry"),k=a("../../lib"),h=a("../../components/colorscale/defaults"),e=a("./attributes");p.exports=function(a,b,n,l){function f(d,c){return k.coerce(a,b,e,d,c)}function d(a){var b=a.map(function(a){return(a=f(a))&&k.isArrayOrTypedArray(a)?
a:null});return b.every(function(a){return a&&a.length===b[0].length})&&b}d(["x","y","z"])?(d(["i","j","k"]),(!b.i||b.j&&b.k)&&(!b.j||b.k&&b.i)&&(!b.k||b.i&&b.j)?(m.getComponentMethod("calendars","handleTraceDefaults")(a,b,["x","y","z"],l),"lighting.ambient lighting.diffuse lighting.specular lighting.roughness lighting.fresnel lighting.vertexnormalsepsilon lighting.facenormalsepsilon lightposition.x lightposition.y lightposition.z contour.show contour.color contour.width colorscale reversescale flatshading alphahull delaunayaxis opacity".split(" ").forEach(function(a){f(a)}),
"intensity"in a?(f("intensity"),h(a,b,l,f,{prefix:"",cLetter:"c"})):(b.showscale=!1,"facecolor"in a?f("facecolor"):"vertexcolor"in a?f("vertexcolor"):f("color",n)),f("text"),f("hovertext"),f("hovertemplate"),b._length=null):b.visible=!1):b.visible=!1}},{"../../components/colorscale/defaults":587,"../../lib":700,"../../registry":829,"./attributes":994}],998:[function(a,p,l){l={};l.attributes=a("./attributes");l.supplyDefaults=a("./defaults");l.calc=a("./calc");l.colorbar={min:"cmin",max:"cmax"};l.plot=
a("./convert");l.moduleType="trace";l.name="mesh3d";l.basePlotModule=a("../../plots/gl3d");l.categories=["gl3d"];l.meta={};p.exports=l},{"../../plots/gl3d":789,"./attributes":994,"./calc":995,"./convert":996,"./defaults":997}],999:[function(a,p,l){function m(a){return{line:{color:k({},e.color,{dflt:a}),width:e.width,dash:h,editType:"style"},editType:"style"}}var k=a("../../lib").extendFlat;l=a("../scatter/attributes");var h=a("../../components/drawing/attributes").dash;a=a("../../components/fx/attributes");
var e=l.line;p.exports={x:{valType:"data_array",editType:"calc+clearAxisTypes"},open:{valType:"data_array",editType:"calc"},high:{valType:"data_array",editType:"calc"},low:{valType:"data_array",editType:"calc"},close:{valType:"data_array",editType:"calc"},line:{width:k({},e.width,{}),dash:k({},h,{}),editType:"style"},increasing:m("#3D9970"),decreasing:m("#FF4136"),text:{valType:"string",dflt:"",arrayOk:!0,editType:"calc"},hovertext:{valType:"string",dflt:"",arrayOk:!0,editType:"calc"},tickwidth:{valType:"number",
min:0,max:.5,dflt:.3,editType:"calc"},hoverlabel:k({},a.hoverlabel,{split:{valType:"boolean",dflt:!1,editType:"style"}})}},{"../../components/drawing/attributes":597,"../../components/fx/attributes":607,"../../lib":700,"../scatter/attributes":1051}],1E3:[function(a,p,l){function m(a,b,e,d){return{o:a,h:b,l:e,c:d}}function k(a,k,m,d,g){for(var c=d.makeCalcdata(k,"open"),n=d.makeCalcdata(k,"high"),l=d.makeCalcdata(k,"low"),p=d.makeCalcdata(k,"close"),q=Array.isArray(k.text),r=Array.isArray(k.hovertext),
u=!0,w=null,x=[],z=0;z<m.length;z++){var J=m[z],E=c[z],H=n[z],M=l[z],O=p[z];J!==b&&E!==b&&H!==b&&M!==b&&O!==b?(O===E?null!==w&&O!==w&&(u=O>w):u=O>E,w=O,H=g(E,H,M,O),H.pos=J,H.yc=(E+O)/2,H.i=z,H.dir=u?"increasing":"decreasing",q&&(H.tx=k.text[z]),r&&(H.htx=k.hovertext[z]),x.push(H)):x.push({pos:J,empty:!0})}k._extremes[d._id]=f.findExtremes(d,h.concat(l,n),{padded:!0});x.length&&(x[0].t={labels:{open:e(a,"open:")+" ",high:e(a,"high:")+" ",low:e(a,"low:")+" ",close:e(a,"close:")+" "}});return x}var h=
a("../../lib"),e=h._,f=a("../../plots/cartesian/axes"),b=a("../../constants/numerical").BADNUM;p.exports={calc:function(a,b){var e=f.getFromId(a,b.xaxis),d=f.getFromId(a,b.yaxis);var g=b._minDiff;if(!g){var c=a._fullData,n=[];g=Infinity;var l;for(l=0;l<c.length;l++){var p=c[l];if("ohlc"===p.type&&!0===p.visible&&p.xaxis===e._id){n.push(p);var q=e.makeCalcdata(p,"x");p._xcalc=q;(p=h.distinctVals(q).minDiff)&&isFinite(p)&&(g=Math.min(g,p))}}Infinity===g&&(g=1);for(l=0;l<n.length;l++)n[l]._minDiff=g}g*=
b.tickwidth;c=b._minDiff;b._minDiff=null;n=b._xcalc;b._xcalc=null;a=k(a,b,n,d,m);b._extremes[e._id]=f.findExtremes(e,n,{vpad:c/2});return a.length?(h.extendFlat(a[0].t,{wHover:c/2,tickLen:g}),a):[{t:{empty:!0}}]},calcCommon:k}},{"../../constants/numerical":677,"../../lib":700,"../../plots/cartesian/axes":748}],1001:[function(a,p,l){function m(a,b,e,h){e(h+".line.color");e(h+".line.width",b.line.width);e(h+".line.dash",b.line.dash)}var k=a("../../lib"),h=a("./ohlc_defaults"),e=a("./attributes");p.exports=
function(a,b,n,l){function f(d,f){return k.coerce(a,b,e,d,f)}h(a,b,f,l)?(f("line.width"),f("line.dash"),m(a,b,f,"increasing"),m(a,b,f,"decreasing"),f("text"),f("hovertext"),f("tickwidth"),l._requestRangeslider[b.xaxis]=!0):b.visible=!1}},{"../../lib":700,"./attributes":999,"./ohlc_defaults":1004}],1002:[function(a,p,l){function m(a,e,c,f){function d(a){a=a.pos+u-e;return b.inbox(a-w,a+w,x)}function g(a){var d=a[r];a=a[v];return d===a||b.inbox(d-c,a-c,x)}function h(a){return(d(a)+g(a))/2}var k=a.cd,
m=a.xa,l=k[0].trace,p=k[0].t,q=l.type,r="ohlc"===q?"l":"min",v="ohlc"===q?"h":"max",u=p.bPos||0;q=p.bdPos||p.tickLen;var w=p.wHover;p=Math.min(1,q/Math.abs(m.r2c(m.range[1])-m.r2c(m.range[0])));var x=a.maxHoverDistance-p;p=a.maxSpikeDistance-p;f=b.getDistanceFunction(f,d,g,h);b.getClosest(k,f,a);if(!1===a.index)return null;k=k[a.index];if(k.empty)return null;l=l[k.dir];f=l.line.color;n.opacity(f)&&l.line.width?a.color=f:a.color=l.fillcolor;a.x0=m.c2p(k.pos+u-q,!0);a.x1=m.c2p(k.pos+u+q,!0);a.xLabelVal=
k.pos;a.spikeDistance=h(k)*p/x;a.xSpike=m.c2p(k.pos,!0);return a}function k(a,b,c,h){var d=a.cd,g=a.ya,k=d[0].trace,n=d[0].t,l=[];a=m(a,b,c,h);if(!a)return[];d=d[a.index].hi||k.hoverinfo;b=d.split("+");if("all"!==d&&-1===b.indexOf("y"))return[];d=["high","open","close","low"];b={};for(c=0;c<d.length;c++){h=d[c];var p=k[h][a.index],q=g.c2p(p,!0);if(p in b){var r=b[p];r.yLabel+="\x3cbr\x3e"+n.labels[h]+e.hoverLabelText(g,p)}else r=f.extendFlat({},a),r.y0=r.y1=q,r.yLabelVal=p,r.yLabel=n.labels[h]+e.hoverLabelText(g,
p),r.name="",l.push(r),b[p]=r}return l}function h(a,b,c,f){function d(a){return n.labels[a]+e.hoverLabelText(h,k[a][l])}var g=a.cd,h=a.ya,k=g[0].trace,n=g[0].t;a=m(a,b,c,f);if(!a)return[];g=g[a.index];var l=a.index=g.i;b=g.dir;f=g.hi||k.hoverinfo;c=f.split("+");var p="all"===f;f=p||-1!==c.indexOf("y");c=p||-1!==c.indexOf("text");b=f?[d("open"),d("high"),d("low"),d("close")+"  "+r[b]]:[];c&&q(g,k,b);a.extraText=b.join("\x3cbr\x3e");a.y0=a.y1=h.c2p(g.yc,!0);return[a]}var e=a("../../plots/cartesian/axes"),
f=a("../../lib"),b=a("../../components/fx"),n=a("../../components/color"),q=a("../scatter/fill_hover_text"),r={increasing:"▲",decreasing:"▼"};p.exports={hoverPoints:function(a,b,c,e){return a.cd[0].trace.hoverlabel.split?k(a,b,c,e):h(a,b,c,e)},hoverSplit:k,hoverOnPoints:h}},{"../../components/color":577,"../../components/fx":616,"../../lib":700,"../../plots/cartesian/axes":748,"../scatter/fill_hover_text":1059}],1003:[function(a,p,l){p.exports={moduleType:"trace",name:"ohlc",basePlotModule:a("../../plots/cartesian"),
categories:["cartesian","svg","showLegend"],meta:{},attributes:a("./attributes"),supplyDefaults:a("./defaults"),calc:a("./calc").calc,plot:a("./plot"),style:a("./style"),hoverPoints:a("./hover").hoverPoints,selectPoints:a("./select")}},{"../../plots/cartesian":759,"./attributes":999,"./calc":1E3,"./defaults":1001,"./hover":1002,"./plot":1005,"./select":1006,"./style":1007}],1004:[function(a,p,l){var m=a("../../registry"),k=a("../../lib");p.exports=function(a,e,f,b){var h=f("x"),l=f("open"),p=f("high"),
d=f("low"),g=f("close");f("hoverlabel.split");m.getComponentMethod("calendars","handleTraceDefaults")(a,e,["x"],b);if(l&&p&&d&&g)return a=Math.min(l.length,p.length,d.length,g.length),h&&(a=Math.min(a,k.minRowLength(h))),e._length=a}},{"../../lib":700,"../../registry":829}],1005:[function(a,p,l){var m=a("d3"),k=a("../../lib");p.exports=function(a,e,f,b){var h=e.xaxis,l=e.yaxis;k.makeTraceGroups(b,f,"trace ohlc").each(function(a){var b=m.select(this);a=a[0];var f=a.t,c=a.trace;e.isRangePlot||(a.node3=
b);if(!0!==c.visible||f.empty)b.remove();else{var n=f.tickLen;b=b.selectAll("path").data(k.identity);b.enter().append("path");b.exit().remove();b.attr("d",function(a){if(a.empty)return"M0,0Z";var b=h.c2p(a.pos,!0),c=h.c2p(a.pos-n,!0),d=h.c2p(a.pos+n,!0),e=l.c2p(a.o,!0),f=l.c2p(a.h,!0),g=l.c2p(a.l,!0);a=l.c2p(a.c,!0);return"M"+c+","+e+"H"+b+"M"+b+","+f+"V"+g+"M"+d+","+a+"H"+b})}})}},{"../../lib":700,d3:154}],1006:[function(a,p,l){p.exports=function(a,k){var h=a.cd,e=a.xaxis,f=a.yaxis,b=[],n,m=h[0].t.bPos||
0;if(!1===k)for(n=0;n<h.length;n++)h[n].selected=0;else for(n=0;n<h.length;n++){var l=h[n];k.contains([e.c2p(l.pos+m),f.c2p(l.yc)],null,l.i,a)?(b.push({pointNumber:l.i,x:e.c2d(l.pos),y:f.c2d(l.yc)}),l.selected=1):l.selected=0}return b}},{}],1007:[function(a,p,l){var m=a("d3"),k=a("../../components/drawing"),h=a("../../components/color");p.exports=function(a,f){a=f?f[0].node3:m.select(a).selectAll("g.ohlclayer").selectAll("g.trace");a.style("opacity",function(a){return a[0].trace.opacity});a.each(function(a){var b=
a[0].trace;m.select(this).selectAll("path").each(function(a){if(!a.empty){var e=b[a.dir].line;m.select(this).style("fill","none").call(h.stroke,e.color).call(k.dashLine,e.dash,e.width).style("opacity",b.selectedpoints&&!a.selected?.3:1)}})})}},{"../../components/color":577,"../../components/drawing":598,d3:154}],1008:[function(a,p,l){l=a("../../lib/extend").extendFlat;var m=a("../../plots/attributes"),k=a("../../plots/font_attributes"),h=a("../../components/colorscale/attributes"),e=a("../../components/fx/hovertemplate_attributes"),
f=a("../../plots/domain").attributes,b=a("../scatter/attributes").line;a=a("../../components/colorbar/attributes");a=l({editType:"calc"},h("line",{editType:"calc"}),{showscale:b.showscale,colorbar:a,shape:{valType:"enumerated",values:["linear","hspline"],dflt:"linear",editType:"plot"},hovertemplate:e({editType:"plot",arrayOk:!1},{keys:["count","probability"]})});p.exports={domain:f({name:"parcats",trace:!0,editType:"calc"}),hoverinfo:l({},m.hoverinfo,{flags:["count","probability"],editType:"plot",
arrayOk:!1}),hoveron:{valType:"enumerated",values:["category","color","dimension"],dflt:"category",editType:"plot"},hovertemplate:e({editType:"plot",arrayOk:!1},{keys:"count probability category categorycount colorcount bandcolorcount".split(" ")}),arrangement:{valType:"enumerated",values:["perpendicular","freeform","fixed"],dflt:"perpendicular",editType:"plot"},bundlecolors:{valType:"boolean",dflt:!0,editType:"plot"},sortpaths:{valType:"enumerated",values:["forward","backward"],dflt:"forward",editType:"plot"},
labelfont:k({editType:"calc"}),tickfont:k({editType:"calc"}),dimensions:{_isLinkedToArray:"dimension",label:{valType:"string",editType:"calc"},categoryorder:{valType:"enumerated",values:["trace","category ascending","category descending","array"],dflt:"trace",editType:"calc"},categoryarray:{valType:"data_array",editType:"calc"},ticktext:{valType:"data_array",editType:"calc"},values:{valType:"data_array",dflt:[],editType:"calc"},displayindex:{valType:"integer",editType:"calc"},editType:"calc",visible:{valType:"boolean",
dflt:!0,editType:"calc"}},line:a,counts:{valType:"number",min:0,dflt:1,arrayOk:!0,editType:"calc"},customdata:void 0,hoverlabel:void 0,ids:void 0,legendgroup:void 0,opacity:void 0,selectedpoints:void 0,showlegend:void 0}},{"../../components/colorbar/attributes":578,"../../components/colorscale/attributes":584,"../../components/fx/hovertemplate_attributes":615,"../../lib/extend":690,"../../plots/attributes":745,"../../plots/domain":773,"../../plots/font_attributes":774,"../scatter/attributes":1051}],
1009:[function(a,p,l){var m=a("../../plots/get_data").getModuleCalcData,k=a("./plot");l.name="parcats";l.plot=function(a,e,f,b){e=m(a.calcdata,"parcats");e.length&&k(a,e[0],f,b)};l.clean=function(a,e,f,b){a=b._has&&b._has("parcats");e=e._has&&e._has("parcats");a&&!e&&b._paperdiv.selectAll(".parcats").remove()}},{"../../plots/get_data":784,"./plot":1014}],1010:[function(a,p,l){function m(a,b,c){var d=a.map(function(a){return a.categories.length}).reduce(function(a,b){return Math.max(a,b)});return{dimensions:a,
paths:b,trace:void 0,maxCats:d,count:c}}function k(a,b,c){a.valueInds.push(b);a.count+=c}function h(a,b,c){a.valueInds.push(b);a.count+=c}function e(a,b){b=void 0===b||null===b?[]:b.map(function(a){return a});var c={},d={},e=[];b.forEach(function(a,b){c[a]=0;d[a]=b});for(var f=0;f<a.length;f++){var g=a[f];if(void 0===c[g]){c[g]=1;var h=b.push(g)-1;d[g]=h}else c[g]++,h=d[g];e.push(h)}a=b.map(function(a){return c[a]});return{uniqueValues:b,uniqueCounts:a,inds:e}}function f(a){var c=a.map(function(a){return a.displayindex});
if(b(c))for(c=0;c<a.length;c++)a[c]._displayindex=a[c].displayindex;else for(c=0;c<a.length;c++)a[c]._displayindex=c}function b(a){for(var b=Array(a.length),c=0;c<a.length;c++){if(0>a[c]||a[c]>=a.length||void 0!==b[a[c]])return!1;b[a[c]]=!0}return!0}var n=a("../../lib/gup").wrap,q=a("../../components/colorscale/helpers").hasColorscale,r=a("../../components/colorscale/calc"),d=a("../../lib/filter_unique.js"),g=a("../../components/drawing"),c=a("../../lib");p.exports=function(a,b){function l(a){a=c.isArrayOrTypedArray(u.color)?
u.color[a%u.color.length]:u.color;return{color:w(a),rawColor:a}}var p=c.filterVisible(b.dimensions);if(0===p.length)return[];var t=p.map(function(a){if("trace"===a.categoryorder)var b=null;else"array"===a.categoryorder?b=a.categoryarray:(b=d(a.values).sort(),"category descending"===a.categoryorder&&(b=b.reverse()));return e(a.values,b)});var v=c.isArrayOrTypedArray(b.counts)?b.counts:[b.counts];f(p);p.forEach(function(a,b){b=t[b];a._categoryarray=b.uniqueValues;a._ticktext=null===a.ticktext||void 0===
a.ticktext?[]:a.ticktext.slice();for(var c=a._ticktext.length;c<b.uniqueValues.length;c++)a._ticktext.push(b.uniqueValues[c])});var u=b.line;if(u){q(b,"line")&&r(a,b,{vals:b.line.color,containerStr:"line",cLetter:"c"});var w=g.tryColorscale(u)}else w=c.identity;var x=p[0].values.length,z={},E=t.map(function(a){return a.inds});var H=0;var M,O;for(M=0;M<x;M++){var I=[];for(O=0;O<E.length;O++)I.push(E[O][M]);a=v[M%v.length];H+=a;O=l(M);var F=I+"-"+O.rawColor;void 0===z[F]&&(z[F]={categoryInds:I,color:O.color,
rawColor:O.rawColor,valueInds:[],count:0});h(z[F],M,a)}p=p.map(function(a,b){return{dimensionInd:b,containerInd:a._index,displayInd:a._displayindex,dimensionLabel:a.label,count:H,categories:[],dragX:null}});for(M=0;M<x;M++)for(a=v[M%v.length],O=0;O<p.length;O++)E=p[O].containerInd,I=t[O].inds[M],F=p[O].categories,void 0===F[I]&&(F[I]={dimensionInd:O,categoryInd:I,categoryValue:b.dimensions[E]._categoryarray[I],displayInd:I,categoryLabel:b.dimensions[E]._ticktext[I],valueInds:[],count:0,dragY:null}),
k(F[I],M,a);return n(m(p,z,H))}},{"../../components/colorscale/calc":585,"../../components/colorscale/helpers":588,"../../components/drawing":598,"../../lib":700,"../../lib/filter_unique.js":691,"../../lib/gup":698}],1011:[function(a,p,l){function m(a,b,c,k,n){n("line.shape");n("line.hovertemplate");var d=n("line.color",k.colorway[0]);if(e(a,"line")&&h.isArrayOrTypedArray(d)){if(d.length)return n("line.colorscale"),f(a,b,k,n,{prefix:"line.",cLetter:"c"}),d.length;b.line.color=c}return Infinity}function k(a,
b){function c(c,d){return h.coerce(a,b,q.dimensions,c,d)}var d=c("values"),e=c("visible");d&&d.length||(e=b.visible=!1);if(e){c("label");c("displayindex",b._index);d=a.categoryarray;d=Array.isArray(d)&&0<d.length;var f;d&&(f="array");f=c("categoryorder",f);"array"===f?(c("categoryarray"),c("ticktext")):(delete a.categoryarray,delete a.ticktext);d||"array"!==f||(b.categoryorder="trace")}}var h=a("../../lib"),e=a("../../components/colorscale/helpers").hasColorscale,f=a("../../components/colorscale/defaults"),
b=a("../../plots/domain").defaults,n=a("../../plots/array_container_defaults"),q=a("./attributes"),r=a("../parcoords/merge_length");p.exports=function(a,e,c,f){function d(b,c){return h.coerce(a,e,q,b,c)}var g=n(a,e,{name:"dimensions",handleItemDefaults:k});c=m(a,e,c,f,d);b(e,f,d);Array.isArray(g)&&g.length||(e.visible=!1);r(e,g,"values",c);d("hoveron");d("hovertemplate");d("arrangement");d("bundlecolors");d("sortpaths");d("counts");h.coerceFont(d,"labelfont",{family:f.font.family,size:Math.round(f.font.size),
color:f.font.color});h.coerceFont(d,"tickfont",{family:f.font.family,size:Math.round(f.font.size/1.2),color:f.font.color})}},{"../../components/colorscale/defaults":587,"../../components/colorscale/helpers":588,"../../lib":700,"../../plots/array_container_defaults":744,"../../plots/domain":773,"../parcoords/merge_length":1023,"./attributes":1008}],1012:[function(a,p,l){l={};l.attributes=a("./attributes");l.supplyDefaults=a("./defaults");l.calc=a("./calc");l.plot=a("./plot");l.colorbar={container:"line",
min:"cmin",max:"cmax"};l.moduleType="trace";l.name="parcats";l.basePlotModule=a("./base_plot");l.categories=["noOpacity"];l.meta={};p.exports=l},{"./attributes":1008,"./base_plot":1009,"./calc":1010,"./defaults":1011,"./plot":1014}],1013:[function(a,p,l){function m(a,d,n,m){a=a.map(N.bind(0,d,n));m=m.selectAll("g.parcatslayer").data([null]);m.enter().append("g").attr("class","parcatslayer").style("pointer-events","all");m=m.selectAll("g.trace.parcats").data(a,k);a=m.enter().append("g").attr("class",
"trace parcats");m.attr("transform",function(a){return"translate("+a.x+", "+a.y+")"});a.append("g").attr("class","paths");n=m.select("g.paths").selectAll("path.path").data(function(a){return a.paths},k);n.attr("fill",function(a){return a.model.color});var l=n.enter().append("path").attr("class","path").attr("stroke-opacity",0).attr("fill",function(a){return a.model.color}).attr("fill-opacity",0);r(l);n.attr("d",function(a){return a.svgD});l.empty()||n.sort(e);n.exit().remove();n.on("mouseover",f).on("mouseout",
b).on("click",q);a.append("g").attr("class","dimensions");a=m.select("g.dimensions").selectAll("g.dimension").data(function(a){return a.dimensions},k);a.enter().append("g").attr("class","dimension");a.attr("transform",function(a){return"translate("+a.x+", 0)"});a.exit().remove();n=a.selectAll("g.category").data(function(a){return a.categories},k);l=n.enter().append("g").attr("class","category");n.attr("transform",function(a){return"translate(0, "+a.y+")"});l.append("rect").attr("class","catrect").attr("pointer-events",
"none");n.select("rect.catrect").attr("fill","none").attr("width",function(a){return a.width}).attr("height",function(a){return a.height});g(l);var p=n.selectAll("rect.bandrect").data(function(a){return a.bands},k);p.each(function(){S.raiseToTop(this)});p.attr("fill",function(a){return a.color});var t=p.enter().append("rect").attr("class","bandrect").attr("stroke-opacity",0).attr("fill",function(a){return a.color}).attr("fill-opacity",0);p.attr("fill",function(a){return a.color}).attr("width",function(a){return a.width}).attr("height",
function(a){return a.height}).attr("y",function(a){return a.y}).attr("cursor",function(a){return"fixed"===a.parcatsViewModel.arrangement?"default":"perpendicular"===a.parcatsViewModel.arrangement?"ns-resize":"move"});c(t);p.exit().remove();l.append("text").attr("class","catlabel").attr("pointer-events","none");p=d._fullLayout.paper_bgcolor;n.select("text.catlabel").attr("text-anchor",function(a){return h(a)?"start":"end"}).attr("alignment-baseline","middle").style("text-shadow",p+" -1px  1px 2px, "+
p+" 1px  1px 2px, "+p+"  1px -1px 2px, "+p+" -1px -1px 2px").style("fill","rgb(0, 0, 0)").attr("x",function(a){return h(a)?a.width+5:-5}).attr("y",function(a){return a.height/2}).text(function(a){return a.model.categoryLabel}).each(function(a){W.font(T.select(this),a.parcatsViewModel.categorylabelfont);qa.convertToTspans(T.select(this),d)});l.append("text").attr("class","dimlabel");n.select("text.dimlabel").attr("text-anchor","middle").attr("alignment-baseline","baseline").attr("cursor",function(a){return"fixed"===
a.parcatsViewModel.arrangement?"default":"ew-resize"}).attr("x",function(a){return a.width/2}).attr("y",-5).text(function(a,b){return 0===b?a.parcatsViewModel.model.dimensions[a.model.dimensionInd].dimensionLabel:null}).each(function(a){W.font(T.select(this),a.parcatsViewModel.labelfont)});n.selectAll("rect.bandrect").on("mouseover",z).on("mouseout",J);n.exit().remove();a.call(T.behavior.drag().origin(function(a){return{x:a.x,y:0}}).on("dragstart",E).on("drag",H).on("dragend",M));m.each(function(a){a.traceSelection=
T.select(this);a.pathSelection=T.select(this).selectAll("g.paths").selectAll("path.path");a.dimensionSelection=T.select(this).selectAll("g.dimensions").selectAll("g.dimension")});m.exit().remove()}function k(a){return a.key}function h(a){return a.model.dimensionInd===a.parcatsViewModel.dimensions[a.parcatsViewModel.dimensions.length-1].model.dimensionInd}function e(a,b){return a.model.rawColor>b.model.rawColor?1:a.model.rawColor<b.model.rawColor?-1:0}function f(a){if(!a.parcatsViewModel.dragDimension&&
-1===a.parcatsViewModel.hoverinfoItems.indexOf("skip")){S.raiseToTop(this);d(T.select(this));var b=n(a);a.parcatsViewModel.graphDiv.emit("plotly_hover",{points:b,event:T.event});if(-1===a.parcatsViewModel.hoverinfoItems.indexOf("none")){var c=T.mouse(this)[0];b=a.parcatsViewModel.graphDiv;var e=a.parcatsViewModel.trace,f=b._fullLayout,g=f._paperdiv.node().getBoundingClientRect(),h=a.parcatsViewModel.graphDiv.getBoundingClientRect(),k;for(k=0;k<a.leftXs.length-1;k++)if(a.leftXs[k]+a.dimWidths[k]-2<=
c&&c<=a.leftXs[k+1]+2){var m=a.parcatsViewModel.dimensions[k];m=(m.x+m.width+a.parcatsViewModel.dimensions[k+1].x)/2;var l=(a.topYs[k]+a.topYs[k+1]+a.height)/2;break}m=a.parcatsViewModel.x+m;l=a.parcatsViewModel.y+l;k=fa.mostReadable(a.model.color,["black","white"]);c=a.model.count;var p=c/a.parcatsViewModel.model.count,q={countLabel:c,probabilityLabel:p.toFixed(3)},r=[];-1!==a.parcatsViewModel.hoverinfoItems.indexOf("count")&&r.push(["Count:",q.countLabel].join(" "));-1!==a.parcatsViewModel.hoverinfoItems.indexOf("probability")&&
r.push(["P:",q.probabilityLabel].join(" "));r=r.join("\x3cbr\x3e");var t=T.mouse(b)[0];ia.loneHover({trace:e,x:m-g.left+h.left,y:l-g.top+h.top,text:r,color:a.model.color,borderColor:"black",fontFamily:'Monaco, "Courier New", monospace',fontSize:10,fontColor:k,idealAlign:t<m?"right":"left",hovertemplate:(e.line||{}).hovertemplate,hovertemplateLabels:q,eventData:[{data:e._input,fullData:e,count:c,probability:p}]},{container:f._hoverlayer.node(),outerContainer:f._paper.node(),gd:b})}}}function b(a){if(!a.parcatsViewModel.dragDimension&&
(r(T.select(this)),ia.loneUnhover(a.parcatsViewModel.graphDiv._fullLayout._hoverlayer.node()),a.parcatsViewModel.pathSelection.sort(e),-1===a.parcatsViewModel.hoverinfoItems.indexOf("skip"))){var b=n(a);a.parcatsViewModel.graphDiv.emit("plotly_unhover",{points:b,event:T.event})}}function n(a){for(var b=[],c=F(a.parcatsViewModel),d=0;d<a.model.valueInds.length;d++)b.push({curveNumber:c,pointNumber:a.model.valueInds[d]});return b}function q(a){if(-1===a.parcatsViewModel.hoverinfoItems.indexOf("skip")){var b=
n(a);a.parcatsViewModel.graphDiv.emit("plotly_click",{points:b,event:T.event})}}function r(a){a.attr("fill",function(a){return a.model.color}).attr("fill-opacity",.6).attr("stroke","lightgray").attr("stroke-width",.2).attr("stroke-opacity",1)}function d(a){a.attr("fill-opacity",.8).attr("stroke",function(a){return fa.mostReadable(a.model.color,["black","white"])}).attr("stroke-width",.3)}function g(a){a.select("rect.catrect").attr("stroke","black").attr("stroke-width",1).attr("stroke-opacity",1)}
function c(a){a.attr("stroke","black").attr("stroke-width",.2).attr("stroke-opacity",1).attr("fill-opacity",1)}function v(a){var b=a.categoryViewModel.model.dimensionInd,c=a.categoryViewModel.model.categoryInd;return a.parcatsViewModel.pathSelection.filter(function(d){return d.model.categoryInds[b]===c&&d.model.color===a.color})}function t(a){T.select(a.parentNode).selectAll("rect.bandrect").each(function(a){a=v(a);d(a);a.each(function(){S.raiseToTop(this)})});T.select(a.parentNode).select("rect.catrect").attr("stroke",
"black").attr("stroke-width",2.5)}function w(a){var b=T.select(a).datum(),c=v(b);d(c);c.each(function(){S.raiseToTop(this)});T.select(a.parentNode).selectAll("rect.bandrect").filter(function(a){return a.color===b.color}).each(function(){S.raiseToTop(this);T.select(this).attr("stroke","black").attr("stroke-width",1.5)})}function x(a,b,c){var d=T.select(a).datum().parcatsViewModel.graphDiv,e=[];T.select(a.parentNode).selectAll("rect.bandrect").each(function(a){v(a).each(function(a){Array.prototype.push.apply(e,
n(a))})});d.emit(b,{points:e,event:c})}function D(a,b,c){a=T.select(a).datum();var d=a.parcatsViewModel.graphDiv,e=[];v(a).each(function(a){Array.prototype.push.apply(e,n(a))});d.emit(b,{points:e,event:c})}function G(a,b){b=T.select(b.parentNode).select("rect.catrect");var c=b.node().getBoundingClientRect(),d=b.datum(),e=d.parcatsViewModel,f=e.model.dimensions[d.model.dimensionInd];b=e.trace;var g=c.top+c.height/2;1<e.dimensions.length&&f.displayInd===e.dimensions.length-1?(c=c.left,e="left"):(c=
c.left+c.width,e="right");f=d.model.count;var h=d.model.categoryLabel,k=f/d.parcatsViewModel.model.count,n={countLabel:f,categoryLabel:h,probabilityLabel:k.toFixed(3)},m=[];-1!==d.parcatsViewModel.hoverinfoItems.indexOf("count")&&m.push(["Count:",n.countLabel].join(" "));-1!==d.parcatsViewModel.hoverinfoItems.indexOf("probability")&&m.push(["P("+n.categoryLabel+"):",n.probabilityLabel].join(" "));d=m.join("\x3cbr\x3e");return{trace:b,x:c-a.left,y:g-a.top,text:d,color:"lightgray",borderColor:"black",
fontFamily:'Monaco, "Courier New", monospace',fontSize:12,fontColor:"black",idealAlign:e,hovertemplate:b.hovertemplate,hovertemplateLabels:n,eventData:[{data:b._input,fullData:b,count:f,category:h,probability:k}]}}function A(a,b){var c=[];T.select(b.parentNode.parentNode).selectAll("g.category").select("rect.catrect").each(function(){c.push(G(a,this))});return c}function C(a,b){var c=b.getBoundingClientRect(),d=T.select(b).datum(),e=d.categoryViewModel,f=e.parcatsViewModel,g=f.model.dimensions[e.model.dimensionInd];
b=f.trace;var h=c.y+c.height/2;1<f.dimensions.length&&g.displayInd===f.dimensions.length-1?(c=c.left,g="left"):(c=c.left+c.width,g="right");var k=e.model.categoryLabel,n=d.parcatsViewModel.model.count,m=0;d.categoryViewModel.bands.forEach(function(a){a.color===d.color&&(m+=a.count)});var l=e.model.count,p=0;f.pathSelection.each(function(a){a.model.color===d.color&&(p+=a.model.count)});f=m/n;var q=m/p,r=m/l,t={countLabel:n,categoryLabel:k,probabilityLabel:f.toFixed(3)},v=[];-1!==e.parcatsViewModel.hoverinfoItems.indexOf("count")&&
v.push(["Count:",t.countLabel].join(" "));-1!==e.parcatsViewModel.hoverinfoItems.indexOf("probability")&&(v.push("P(color ∩ "+k+"): "+t.probabilityLabel),v.push("P("+k+" | color): "+q.toFixed(3)),v.push("P(color | "+k+"): "+r.toFixed(3)));e=v.join("\x3cbr\x3e");q=fa.mostReadable(d.color,["black","white"]);return{trace:b,x:c-a.left,y:h-a.top,text:e,color:d.color,borderColor:"black",fontFamily:'Monaco, "Courier New", monospace',fontColor:q,fontSize:10,idealAlign:g,hovertemplate:b.hovertemplate,hovertemplateLabels:t,
eventData:[{data:b._input,fullData:b,category:k,count:n,probability:f,categorycount:l,colorcount:p,bandcolorcount:m}]}}function z(a){if(!(a.parcatsViewModel.dragDimension||-1!==a.parcatsViewModel.hoverinfoItems.indexOf("skip")||-1>T.mouse(this)[1])){var b=a.parcatsViewModel.graphDiv,c=b._fullLayout,d=c._paperdiv.node().getBoundingClientRect(),e=a.parcatsViewModel.hoveron;"color"===e?(w(this),D(this,"plotly_hover",T.event)):(t(this),x(this,"plotly_hover",T.event));if(-1===a.parcatsViewModel.hoverinfoItems.indexOf("none")){var f;
"category"===e?f=G(d,this):"color"===e?f=C(d,this):"dimension"===e&&(f=A(d,this));f&&ia.multiHovers(f,{container:c._hoverlayer.node(),outerContainer:c._paper.node(),gd:b})}}}function J(a){var b=a.parcatsViewModel;b.dragDimension||(r(b.pathSelection),g(b.dimensionSelection.selectAll("g.category")),c(b.dimensionSelection.selectAll("g.category").selectAll("rect.bandrect")),ia.loneUnhover(b.graphDiv._fullLayout._hoverlayer.node()),b.pathSelection.sort(e),-1===b.hoverinfoItems.indexOf("skip")&&("color"===
a.parcatsViewModel.hoveron?D(this,"plotly_unhover",T.event):x(this,"plotly_unhover",T.event)))}function E(a){"fixed"!==a.parcatsViewModel.arrangement&&(a.dragDimensionDisplayInd=a.model.displayInd,a.initialDragDimensionDisplayInds=a.parcatsViewModel.model.dimensions.map(function(a){return a.displayInd}),a.dragHasMoved=!1,a.dragCategoryDisplayInd=null,T.select(this).selectAll("g.category").select("rect.catrect").each(function(b){var c=T.mouse(this)[0],d=T.mouse(this)[1];-2<=c&&c<=b.width+2&&-2<=d&&
d<=b.height+2&&(a.dragCategoryDisplayInd=b.model.displayInd,a.initialDragCategoryDisplayInds=a.model.categories.map(function(a){return a.displayInd}),b.model.dragY=b.y,S.raiseToTop(this.parentNode),T.select(this.parentNode).selectAll("rect.bandrect").each(function(b){b.y<d&&d<=b.y+b.height&&(a.potentialClickBand=this)}))}),a.parcatsViewModel.dragDimension=a,ia.loneUnhover(a.parcatsViewModel.graphDiv._fullLayout._hoverlayer.node()))}function H(a){if("fixed"!==a.parcatsViewModel.arrangement&&(a.dragHasMoved=
!0,null!==a.dragDimensionDisplayInd)){var b=a.dragDimensionDisplayInd,c=b-1,d=b+1,e=a.parcatsViewModel.dimensions[b];if(null!==a.dragCategoryDisplayInd){var f=e.categories[a.dragCategoryDisplayInd];f.model.dragY+=T.event.dy;var g=f.model.dragY,h=f.model.displayInd,k=e.categories,n=k[h-1];k=k[h+1];void 0!==n&&g<n.y+n.height/2&&(f.model.displayInd=n.model.displayInd,n.model.displayInd=h);void 0!==k&&g+f.height>k.y+k.height/2&&(f.model.displayInd=k.model.displayInd,k.model.displayInd=h);a.dragCategoryDisplayInd=
f.model.displayInd}if(null===a.dragCategoryDisplayInd||"freeform"===a.parcatsViewModel.arrangement)e.model.dragX=T.event.x,c=a.parcatsViewModel.dimensions[c],d=a.parcatsViewModel.dimensions[d],void 0!==c&&e.model.dragX<c.x+c.width&&(e.model.displayInd=c.model.displayInd,c.model.displayInd=b),void 0!==d&&e.model.dragX+e.width>d.x&&(e.model.displayInd=d.model.displayInd,d.model.displayInd=a.dragDimensionDisplayInd),a.dragDimensionDisplayInd=e.model.displayInd;ca(a.parcatsViewModel);K(a.parcatsViewModel);
Q(a.parcatsViewModel);I(a.parcatsViewModel)}}function M(a){if("fixed"!==a.parcatsViewModel.arrangement&&null!==a.dragDimensionDisplayInd){T.select(this).selectAll("text").attr("font-weight","normal");var b={},c=F(a.parcatsViewModel),d=a.parcatsViewModel.model.dimensions.map(function(a){return a.displayInd}),e=a.initialDragDimensionDisplayInds.some(function(a,b){return a!==d[b]});e&&d.forEach(function(c,d){b["dimensions["+a.parcatsViewModel.model.dimensions[d].containerInd+"].displayindex"]=c});var f=
!1;if(null!==a.dragCategoryDisplayInd){var g=a.model.categories.map(function(a){return a.displayInd});if(f=a.initialDragCategoryDisplayInds.some(function(a,b){return a!==g[b]})){var h=a.model.categories.slice().sort(function(a,b){return a.displayInd-b.displayInd}),k=h.map(function(a){return a.categoryValue});h=h.map(function(a){return a.categoryLabel});b["dimensions["+a.model.containerInd+"].categoryarray"]=[k];b["dimensions["+a.model.containerInd+"].ticktext"]=[h];b["dimensions["+a.model.containerInd+
"].categoryorder"]="array"}}-1===a.parcatsViewModel.hoverinfoItems.indexOf("skip")&&!a.dragHasMoved&&a.potentialClickBand&&("color"===a.parcatsViewModel.hoveron?D(a.potentialClickBand,"plotly_click",T.event.sourceEvent):x(a.potentialClickBand,"plotly_click",T.event.sourceEvent));a.model.dragX=null;null!==a.dragCategoryDisplayInd&&(a.parcatsViewModel.dimensions[a.dragDimensionDisplayInd].categories[a.dragCategoryDisplayInd].model.dragY=null,a.dragCategoryDisplayInd=null);a.dragDimensionDisplayInd=
null;a.parcatsViewModel.dragDimension=null;a.dragHasMoved=null;a.potentialClickBand=null;ca(a.parcatsViewModel);K(a.parcatsViewModel);T.transition().duration(300).ease("cubic-in-out").each(function(){Q(a.parcatsViewModel,!0);I(a.parcatsViewModel,!0)}).each("end",function(){(e||f)&&Y.restyle(a.parcatsViewModel.graphDiv,b,[c])})}}function F(a){for(var b,c=a.graphDiv._fullData,d=0;d<c.length;d++)if(a.key===c[d].uid){b=d;break}return b}function I(a,b){void 0===b&&(b=!1);a.pathSelection.data(function(a){return a.paths},
k);(function(a){return b?a.transition():a})(a.pathSelection).attr("d",function(a){return a.svgD})}function Q(a,b){function d(a){return b?a.transition():a}void 0===b&&(b=!1);a.dimensionSelection.data(function(a){return a.dimensions},k);var e=a.dimensionSelection.selectAll("g.category").data(function(a){return a.categories},k);d(a.dimensionSelection).attr("transform",function(a){return"translate("+a.x+", 0)"});d(e).attr("transform",function(a){return"translate(0, "+a.y+")"});e.select(".dimlabel").text(function(a,
b){return 0===b?a.parcatsViewModel.model.dimensions[a.model.dimensionInd].dimensionLabel:null});e.select(".catlabel").attr("text-anchor",function(a){return h(a)?"start":"end"}).attr("x",function(a){return h(a)?a.width+5:-5}).each(function(a){if(h(a)){a=a.width+5;var b="start"}else a=-5,b="end";T.select(this).selectAll("tspan").attr("x",a).attr("text-anchor",b)});a=e.selectAll("rect.bandrect").data(function(a){return a.bands},k);e=a.enter().append("rect").attr("class","bandrect").attr("cursor","move").attr("stroke-opacity",
0).attr("fill",function(a){return a.color}).attr("fill-opacity",0);a.attr("fill",function(a){return a.color}).attr("width",function(a){return a.width}).attr("height",function(a){return a.height}).attr("y",function(a){return a.y});c(e);a.each(function(){S.raiseToTop(this)});a.exit().remove()}function N(a,b,c){c=c[0];var d=b.margin||{l:80,r:80,t:100,b:80},e=c.trace,f=e.domain,g=b.width,h=Math.floor(g*(f.x[1]-f.x[0])),k=Math.floor(b.height*(f.y[1]-f.y[0]));g=f.x[0]*g+d.l;b=b.height-f.y[1]*b.height+d.t;
f=e.line.shape;var n="all"===e.hoverinfo?["count","probability"]:(e.hoverinfo||"").split("+");a={trace:e,key:e.uid,model:c,x:g,y:b,width:h,height:k,hoveron:e.hoveron,hoverinfoItems:n,arrangement:e.arrangement,bundlecolors:e.bundlecolors,sortpaths:e.sortpaths,labelfont:e.labelfont,categorylabelfont:e.tickfont,pathShape:f,dragDimension:null,margin:d,paths:[],dimensions:[],graphDiv:a,traceSelection:null,pathSelection:null,dimensionSelection:null};c.dimensions&&(ca(a),K(a));return a}function L(a,b,c,
d,e){var f=[],g=[],h;for(h=0;h<c.length-1;h++){var k=T.interpolateNumber(c[h]+a[h],a[h+1]);f.push(k(e));g.push(k(1-e))}e="M "+a[0]+","+b[0];e+="l"+c[0]+",0 ";for(h=1;h<c.length;h++)e+="C"+f[h-1]+","+b[h-1]+" "+g[h-1]+","+b[h]+" "+a[h]+","+b[h],e+="l"+c[h]+",0 ";e=e+("l0,"+d+" ")+("l -"+c[c.length-1]+",0 ");for(h=c.length-2;0<=h;h--)e+="C"+g[h]+","+(b[h+1]+d)+" "+f[h]+","+(b[h]+d)+" "+(a[h]+c[h])+","+(b[h]+d),e+="l-"+c[h]+",0 ";return e+"Z"}function K(a){function b(a){var b=a.categoryInds.map(function(a,
b){return f[b][a]});return h.map(function(a){return b[a]})}var c=a.dimensions,d=a.model,e=c.map(function(a){return a.categories.map(function(a){return a.y})}),f=a.model.dimensions.map(function(a){return a.categories.map(function(a){return a.displayInd})}),g=a.model.dimensions.map(function(a){return a.displayInd}),h=a.dimensions.map(function(a){return a.model.dimensionInd}),k=c.map(function(a){return a.x}),n=c.map(function(a){return a.width}),m=[];for(l in d.paths)d.paths.hasOwnProperty(l)&&m.push(d.paths[l]);
m.sort(function(c,d){var e=b(c),f=b(d);"backward"===a.sortpaths&&(e.reverse(),f.reverse());e.push(c.valueInds[0]);f.push(d.valueInds[0]);a.bundlecolors&&(e.unshift(c.rawColor),f.unshift(d.rawColor));return e<f?-1:e>f?1:0});d=Array(m.length);var l=c[0].model.count;c=c[0].categories.map(function(a){return a.height}).reduce(function(a,b){return a+b});for(var p=0;p<m.length;p++){var q=m[p];var r=0<l?q.count/l*c:0;for(var t=Array(e.length),v=0;v<q.categoryInds.length;v++){var u=f[v][q.categoryInds[v]],
w=g[v];t[w]=e[w][u];e[w][u]+=r;u=a.dimensions[w].categories[u];w=u.bands.length;var x=u.bands[w-1];void 0===x||q.rawColor!==x.rawColor?(w=void 0===x?0:x.y+x.height,u.bands.push({key:w,color:q.color,rawColor:q.rawColor,height:r,width:u.width,count:q.count,y:w,categoryViewModel:u,parcatsViewModel:a})):(u=u.bands[w-1],u.height+=r,u.count+=q.count)}v="hspline"===a.pathShape?L(k,t,n,r,.5):L(k,t,n,r,0);d[p]={key:q.valueInds[0],model:q,height:r,leftXs:k,topYs:t,dimWidths:n,svgD:v,parcatsViewModel:a}}a.paths=
d}function ca(a){var b=a.model.dimensions.map(function(a){return{displayInd:a.displayInd,dimensionInd:a.dimensionInd}});b.sort(function(a,b){return a.displayInd-b.displayInd});var c=[],d;for(d in b)c.push(U(a,a.model.dimensions[b[d].dimensionInd]));a.dimensions=c}function U(a,b){var c=a.model.dimensions.length;c=40+(1<c?(a.width-80-16)/(c-1):0)*b.displayInd;var d=[],e=a.model.maxCats,f=b.categories.length,g=b.count,h=a.height-8*(e-1),k=8*(e-f)/2,n=b.categories.map(function(a){return{displayInd:a.displayInd,
categoryInd:a.categoryInd}});n.sort(function(a,b){return a.displayInd-b.displayInd});for(e=0;e<f;e++){var m=n[e].categoryInd;var l=b.categories[m];m=0<g?l.count/g*h:0;l={key:l.valueInds[0],model:l,width:16,height:m,y:null!==l.dragY?l.dragY:k,bands:[],parcatsViewModel:a};k=k+m+8;d.push(l)}return{key:b.dimensionInd,x:null!==b.dragX?b.dragX:c,y:0,width:16,model:b,categories:d,parcatsViewModel:a,dragCategoryDisplayInd:null,dragDimensionDisplayInd:null,initialDragDimensionDisplayInds:null,initialDragCategoryDisplayInds:null,
dragHasMoved:null,potentialClickBand:null}}var T=a("d3"),Y=a("../../plot_api/plot_api"),ia=a("../../components/fx"),S=a("../../lib"),W=a("../../components/drawing"),fa=a("tinycolor2"),qa=a("../../lib/svg_text_utils");p.exports=function(a,b,c,d){m(c,a,d,b)}},{"../../components/drawing":598,"../../components/fx":616,"../../lib":700,"../../lib/svg_text_utils":724,"../../plot_api/plot_api":735,d3:154,tinycolor2:521}],1014:[function(a,p,l){var m=a("./parcats");p.exports=function(a,h,e,f){var b=a._fullLayout,
k=b._size;m(a,b._paper,h,{width:k.w,height:k.h,margin:{t:k.t,r:k.r,b:k.b,l:k.l}},e,f)}},{"./parcats":1013}],1015:[function(a,p,l){l=a("../../components/colorscale/attributes");var m=a("../../components/colorbar/attributes"),k=a("../../plots/cartesian/layout_attributes"),h=a("../../plots/font_attributes"),e=a("../../plots/domain").attributes,f=a("../../lib/extend").extendFlat;a=a("../../plot_api/plot_template").templatedArray;p.exports={domain:e({name:"parcoords",trace:!0,editType:"calc"}),hoverlabel:void 0,
labelfont:h({editType:"calc"}),tickfont:h({editType:"calc"}),rangefont:h({editType:"calc"}),dimensions:a("dimension",{label:{valType:"string",editType:"calc"},tickvals:f({},k.tickvals,{editType:"calc"}),ticktext:f({},k.ticktext,{editType:"calc"}),tickformat:{valType:"string",dflt:"3s",editType:"calc"},visible:{valType:"boolean",dflt:!0,editType:"calc"},range:{valType:"info_array",items:[{valType:"number",editType:"calc"},{valType:"number",editType:"calc"}],editType:"calc"},constraintrange:{valType:"info_array",
freeLength:!0,dimensions:"1-2",items:[{valType:"number",editType:"calc"},{valType:"number",editType:"calc"}],editType:"calc"},multiselect:{valType:"boolean",dflt:!0,editType:"calc"},values:{valType:"data_array",editType:"calc"},editType:"calc"}),line:f(l("line",{colorscaleDflt:"Viridis",autoColorDflt:!1,editTypeOverride:"calc"}),{colorbar:m,editType:"calc"})}},{"../../components/colorbar/attributes":578,"../../components/colorscale/attributes":584,"../../lib/extend":690,"../../plot_api/plot_template":738,
"../../plots/cartesian/layout_attributes":760,"../../plots/domain":773,"../../plots/font_attributes":774}],1016:[function(a,p,l){function m(a,b,c){if(h(b,c))return b;for(var d=c=a[0],e=1;e<a.length;e++){var f=a[e];if(b<c*(1-F)+f*F)return c*(1-M)+d*M;if(b<f||e===a.length-1)return f*(1-M)+c*M;d=c;c=f}}function k(a,b,c){if(h(b,c))return b;for(var d=c=a[a.length-1],e=a.length-2;0<=e;e--){var f=a[e];if(b>c*(1-F)+f*F)return c*(1-M)+d*M;if(b>f||e===a.length-1)return f*(1-M)+c*M;d=c;c=f}}function h(a,b){for(var c=
0;c<b.length;c++)if(a>=b[c][0]&&a<=b[c][1])return!0;return!1}function e(a){a.attr("x",-C.bar.captureWidth/2).attr("width",C.bar.captureWidth)}function f(a){a.attr("visibility","visible").style("visibility","visible").attr("fill","yellow").attr("opacity",0)}function b(a){if(!a.brush.filterSpecified)return"0,"+a.height;for(var b=n(a.brush.filter.getConsolidated(),a.height),c=[0],d,e,f=b.length?b[0][0]:null,g=0;g<b.length;g++)d=b[g],e=d[1]-d[0],c.push(f),c.push(e),e=g+1,e<b.length&&(f=b[e][0]-d[1]);
c.push(a.height);return c}function n(a,b){return a.map(function(a){return a.map(function(a){return a*b}).sort(H)})}function q(){z.select(document.body).style("cursor",null)}function r(a){a.attr("stroke-dasharray",b)}function d(a,b){a=z.select(a).selectAll(".highlight, .highlight-shadow");b=b?a.transition().duration(C.bar.snapDuration).each("end",b):a;r(b)}function g(a,b){var c=a.brush,d={};if(c.filterSpecified){var e=a.height;c=c.filter.getConsolidated();var f=n(c,e),g=NaN,h=NaN,k=NaN;for(e=0;e<=
f.length;e++){var m=f[e];if(m&&m[0]<=b&&b<=m[1]){g=e;break}else if(h=e?e-1:NaN,m&&m[0]>b){k=e;break}}e=g;isNaN(e)&&(e=isNaN(h)||isNaN(k)?isNaN(h)?k:h:b-f[h][1]<f[k][0]-b?h:k);isNaN(e)||(f=f[e],h=C.bar.handleHeight,h=b>f[1]+h||b<f[0]-h?void 0:b>=.9*f[1]+.1*f[0]?"n":b<=.9*f[0]+.1*f[1]?"s":"ns",h&&(d.interval=c[e],d.intervalPix=f,d.region=h))}if(a.ordinal&&!d.region)for(c=a.unitTickvals,a=a.unitToPaddedPx.invert(b),e=0;e<c.length;e++)if(b=[.25*c[Math.max(e-1,0)]+.75*c[e],.25*c[Math.min(e+1,c.length-
1)]+.75*c[e]],a>=b[0]&&a<=b[1]){d.clickableOrdinalRange=b;break}return d}function c(a){a.on("mousemove",function(a){z.event.preventDefault();if(!a.parent.inBrushDrag){var b=a.height-z.mouse(this)[1]-2*C.verticalPadding;a=g(a,b);b="crosshair";a.clickableOrdinalRange?b="pointer":a.region&&(b=a.region+"-resize");z.select(document.body).style("cursor",b)}}).on("mouseleave",function(a){a.parent.inBrushDrag||q()}).call(z.behavior.drag().on("dragstart",function(a){z.event.sourceEvent.stopPropagation();var b=
a.height-z.mouse(this)[1]-2*C.verticalPadding,c=a.unitToPaddedPx.invert(b),d=a.brush,e=g(a,b),f=e.interval,h=d.svgBrush;h.wasDragged=!1;h.grabbingBar="ns"===e.region;if(h.grabbingBar){var k=f.map(a.unitToPaddedPx);h.grabPoint=b-k[0]-C.verticalPadding;h.barLength=k[1]-k[0]}h.clickableOrdinalRange=e.clickableOrdinalRange;h.stayingIntervals=a.multiselect&&d.filterSpecified?d.filter.getConsolidated():[];f&&(h.stayingIntervals=h.stayingIntervals.filter(function(a){return a[0]!==f[0]&&a[1]!==f[1]}));h.startExtent=
e.region?f["s"===e.region?1:0]:c;a.parent.inBrushDrag=!0;h.brushStartCallback()}).on("drag",function(a){z.event.sourceEvent.stopPropagation();var b=a.height-z.mouse(this)[1]-2*C.verticalPadding,c=a.brush.svgBrush;c.wasDragged=!0;c.newExtent=c.grabbingBar?[b-c.grabPoint,b+c.barLength-c.grabPoint].map(a.unitToPaddedPx.invert):[c.startExtent,a.unitToPaddedPx.invert(b)].sort(H);b=Math.max(0,-c.newExtent[0]);var e=Math.max(0,c.newExtent[1]-1);c.newExtent[0]+=b;c.newExtent[1]-=e;c.grabbingBar&&(c.newExtent[1]+=
b,c.newExtent[0]-=e);a.brush.filterSpecified=!0;c.extent=c.stayingIntervals.concat([c.newExtent]);c.brushCallback(a);d(this.parentNode)}).on("dragend",function(a){z.event.sourceEvent.stopPropagation();var b=a.brush,c=b.filter,e=b.svgBrush,f=e.grabbingBar;e.grabbingBar=!1;e.grabLocation=void 0;a.parent.inBrushDrag=!1;q();if(e.wasDragged)if(f=function(){c.set(c.getConsolidated())},a.ordinal){var g=a.unitTickvals;g[g.length-1]<g[0]&&g.reverse();e.newExtent=[m(g,e.newExtent[0],e.stayingIntervals),k(g,
e.newExtent[1],e.stayingIntervals)];g=e.newExtent[1]>e.newExtent[0];e.extent=e.stayingIntervals.concat(g?[e.newExtent]:[]);e.extent.length||x(b);e.brushCallback(a);g?d(this.parentNode,f):(f(),d(this.parentNode))}else f();else e.wasDragged=void 0,e.clickableOrdinalRange?b.filterSpecified&&a.multiselect?e.extent.push(e.clickableOrdinalRange):(e.extent=[e.clickableOrdinalRange],b.filterSpecified=!0):f?(e.extent=e.stayingIntervals,0===e.extent.length&&x(b)):x(b),e.brushCallback(a),d(this.parentNode);
e.brushEndCallback(b.filterSpecified?c.getConsolidated():[])}))}function v(a,b){return a[0]-b[0]}function t(a){var b=a.selectAll(".background").data(E);b.enter().append("rect").classed("background",!0).call(e).call(f).style("pointer-events","auto").attr("transform","translate(0 "+C.verticalPadding+")");b.call(c).attr("height",function(a){return a.height-C.verticalPadding});b=a.selectAll(".highlight-shadow").data(E);b.enter().append("line").classed("highlight-shadow",!0).attr("x",-C.bar.width/2).attr("stroke-width",
C.bar.width+C.bar.strokeWidth).attr("stroke",C.bar.strokeColor).attr("opacity",C.bar.strokeOpacity).attr("stroke-linecap","butt");b.attr("y1",function(a){return a.height}).call(r);a=a.selectAll(".highlight").data(E);a.enter().append("line").classed("highlight",!0).attr("x",-C.bar.width/2).attr("stroke-width",C.bar.width-C.bar.strokeWidth).attr("stroke",C.bar.fillColor).attr("opacity",C.bar.fillOpacity).attr("stroke-linecap","butt");a.attr("y1",function(a){return a.height}).call(r)}function w(a){return a.svgBrush.extent.map(function(a){return a.slice()})}
function x(a){a.filterSpecified=!1;a.svgBrush.extent=[[0,1]]}function D(a){return function(b){b=b.brush;var c=w(b).slice();b.filter.set(c);a()}}function G(a){a=a.slice();for(var b=[],c,d=a.shift();d;){for(c=d.slice();(d=a.shift())&&d[0]<=c[1];)c[1]=Math.max(c[1],d[1]);b.push(c)}return b}function A(){var a=[],b,c;return{set:function(d){a=d.map(function(a){return a.slice().sort(H)}).sort(v);b=G(a);c=a.reduce(function(a,b){return[Math.min(a[0],b[0]),Math.max(a[1],b[1])]},[Infinity,-Infinity])},get:function(){return a.slice()},
getConsolidated:function(){return b},getBounds:function(){return c}}}var C=a("./constants"),z=a("d3"),J=a("../../lib/gup").keyFun,E=a("../../lib/gup").repeat,H=a("../../lib").sorterAsc,M=C.bar.snapRatio,F=C.bar.snapClose;p.exports={makeBrush:function(a,b,c,d,e,f){a=A();a.set(c);return{filter:a,filterSpecified:b,svgBrush:{extent:[],brushStartCallback:d,brushCallback:D(e),brushEndCallback:f}}},ensureAxisBrush:function(a){a=a.selectAll("."+C.cn.axisBrush).data(E,J);a.enter().append("g").classed(C.cn.axisBrush,
!0);t(a)},cleanRanges:function(a,b){Array.isArray(a[0])?(a=a.map(function(a){return a.sort(H)}),a=b.multiselect?G(a.sort(v)):[a[0]]):a=[a.sort(H)];if(b.tickvals){var c=b.tickvals.slice().sort(H);a=a.map(function(a){a=[m(c,a[0],[]),k(c,a[1],[])];if(a[1]>a[0])return a}).filter(function(a){return a});if(!a.length)return}return 1<a.length?a:a[0]}}},{"../../lib":700,"../../lib/gup":698,"./constants":1019,d3:154}],1017:[function(a,p,l){var m=a("d3"),k=a("../../plots/get_data").getModuleCalcData,h=a("./plot"),
e=a("../../constants/xmlns_namespaces");l.name="parcoords";l.plot=function(a){var b=k(a.calcdata,"parcoords")[0];b.length&&h(a,b)};l.clean=function(a,b,e,h){a=h._has&&h._has("parcoords");b=b._has&&b._has("parcoords");a&&!b&&(h._paperdiv.selectAll(".parcoords").remove(),h._glimages.selectAll("*").remove())};l.toSVG=function(a){var b=a._fullLayout._glimages,f=m.select(a).selectAll(".svg-container");f.filter(function(a,b){return b===f.size()-1}).selectAll(".gl-canvas-context, .gl-canvas-focus").each(function(){var a=
this.toDataURL("image/png");b.append("svg:image").attr({xmlns:e.svg,"xlink:href":a,preserveAspectRatio:"none",x:0,y:0,width:this.width,height:this.height})});window.setTimeout(function(){m.selectAll("#filterBarPattern").attr("id","filterBarPattern")},60)}},{"../../constants/xmlns_namespaces":678,"../../plots/get_data":784,"./plot":1025,d3:154}],1018:[function(a,p,l){function m(a){return e.isTypedArray(a)?Array.prototype.slice.call(a):a}var k=a("../../components/colorscale/helpers").hasColorscale,
h=a("../../components/colorscale/calc"),e=a("../../lib"),f=a("../../lib/gup").wrap;p.exports=function(a,e){for(var b=0;b<e.dimensions.length;b++)e.dimensions[b].values=m(e.dimensions[b].values);e.line.color=m(e.line.color);b=!!e.line.colorscale&&Array.isArray(e.line.color);if(b)var n=e.line.color;else{n=e._length;for(var d=Array(n),g=0;g<n;g++)d[g]=.5;n=d}b=b?e.line.colorscale:[[0,e.line.color],[1,e.line.color]];k(e,"line")&&h(a,e,{vals:n,containerStr:"line",cLetter:"c"});return f({lineColor:n,cscale:b})}},
{"../../components/colorscale/calc":585,"../../components/colorscale/helpers":588,"../../lib":700,"../../lib/gup":698}],1019:[function(a,p,l){p.exports={maxDimensionCount:60,overdrag:45,verticalPadding:2,tickDistance:50,canvasPixelRatio:1,blockLineCount:5E3,layers:["contextLineLayer","focusLineLayer","pickLineLayer"],axisTitleOffset:28,axisExtentOffset:10,bar:{width:4,captureWidth:10,fillColor:"magenta",fillOpacity:1,snapDuration:150,snapRatio:.25,snapClose:.01,strokeColor:"white",strokeOpacity:1,
strokeWidth:1,handleHeight:8,handleOpacity:1,handleOverlap:0},cn:{axisExtentText:"axis-extent-text",parcoordsLineLayers:"parcoords-line-layers",parcoordsLineLayer:"parcoords-lines",parcoords:"parcoords",parcoordsControlView:"parcoords-control-view",yAxis:"y-axis",axisOverlays:"axis-overlays",axis:"axis",axisHeading:"axis-heading",axisTitle:"axis-title",axisExtent:"axis-extent",axisExtentTop:"axis-extent-top",axisExtentTopText:"axis-extent-top-text",axisExtentBottom:"axis-extent-bottom",axisExtentBottomText:"axis-extent-bottom-text",
axisBrush:"axis-brush"},id:{filterBarPattern:"filter-bar-pattern"}}},{}],1020:[function(a,p,l){function m(a,b,d,g,k){var c=k("line.color",d);if(e(a,"line")&&h.isArrayOrTypedArray(c)){if(c.length)return k("line.colorscale"),f(a,b,g,k,{prefix:"line.",cLetter:"c"}),c.length;b.line.color=d}return Infinity}function k(a,b){function c(c,d){return h.coerce(a,b,q.dimensions,c,d)}var d=c("values"),e=c("visible");d&&d.length||(e=b.visible=!1);e&&(c("label"),c("tickvals"),c("ticktext"),c("tickformat"),c("range"),
c("multiselect"),d=c("constraintrange"))&&(b.constraintrange=r.cleanRanges(d,b))}var h=a("../../lib"),e=a("../../components/colorscale/helpers").hasColorscale,f=a("../../components/colorscale/defaults"),b=a("../../plots/domain").defaults,n=a("../../plots/array_container_defaults"),q=a("./attributes"),r=a("./axisbrush"),d=a("./constants").maxDimensionCount,g=a("./merge_length");p.exports=function(a,e,f,l){function c(b,c){return h.coerce(a,e,q,b,c)}var p=a.dimensions;Array.isArray(p)&&p.length>d&&(h.log("parcoords traces support up to "+
d+" dimensions at the moment"),p.splice(d));p=n(a,e,{name:"dimensions",handleItemDefaults:k});f=m(a,e,f,l,c);b(e,l,c);Array.isArray(p)&&p.length||(e.visible=!1);g(e,p,"values",f);l={family:l.font.family,size:Math.round(l.font.size/1.2),color:l.font.color};h.coerceFont(c,"labelfont",l);h.coerceFont(c,"tickfont",l);h.coerceFont(c,"rangefont",l)}},{"../../components/colorscale/defaults":587,"../../components/colorscale/helpers":588,"../../lib":700,"../../plots/array_container_defaults":744,"../../plots/domain":773,
"./attributes":1015,"./axisbrush":1016,"./constants":1019,"./merge_length":1023}],1021:[function(a,p,l){l={};l.attributes=a("./attributes");l.supplyDefaults=a("./defaults");l.calc=a("./calc");l.plot=a("./plot");l.colorbar={container:"line",min:"cmin",max:"cmax"};l.moduleType="trace";l.name="parcoords";l.basePlotModule=a("./base_plot");l.categories=["gl","regl","noOpacity"];l.meta={};p.exports=l},{"./attributes":1015,"./base_plot":1017,"./calc":1018,"./defaults":1020,"./plot":1025}],1022:[function(a,
p,l){function m(a,b,c,d,e){var f=a._gl;f.enable(f.SCISSOR_TEST);f.scissor(b,c,d,e);a.clear({color:[0,0,0,0],depth:1})}function k(a,b,c,d,e,f){function g(k){var n=Math.min(d,e-k*d);f.offset=2*k*d;f.count=2*n;0===k&&(window.cancelAnimationFrame(c.currentRafs[h]),delete c.currentRafs[h],m(a,f.scissorX,f.scissorY,f.scissorWidth,f.viewBoxSize[1]));c.clearOnly||(b(f),k*d+n<e&&(c.currentRafs[h]=window.requestAnimationFrame(function(){g(k+1)})),c.drawCompleted=!1)}var h=f.key;c.drawCompleted||(a.read({x:0,
y:0,width:1,height:1,data:t}),c.drawCompleted=!0);g(0)}function h(a,b,c){for(var d=[],e=0;256>e;e++){var f=a(e/255);d.push((b?v:f).concat(c))}return d}function e(a,b,c){for(var d=b.length,e=[],f=0;f<a;f++)for(var g=0;64>g;g++)e.push(g<d?b[g].paddedUnitValues[f]:63===g?Math.max(1E-6,Math.min(.999999,c[f])):60<=g?(f>>>8*(62-g))%256/255:.5);return e}function f(a,b,c){var d,e,f,g=[];for(e=0;e<a;e++)for(f=0;2>f;f++)for(d=0;4>d;d++)g.push(b[64*e+4*c+d]),63===4*c+d&&0===f%2&&(g[g.length-1]*=-1);return g}
function b(a,b,c){for(var d=0;16>d;d++)a["p"+d.toString(16)](f(b,c,d))}function n(a){for(var b={},c=0;16>c;c++)b["p"+c.toString(16)]=a.buffer({usage:"dynamic",type:"float",data:new Uint8Array(0)});return b}l=a("glslify");var q=l(["precision highp float;\n#define GLSLIFY 1\n\nattribute vec4 p0, p1, p2, p3,\n               p4, p5, p6, p7,\n               p8, p9, pa, pb,\n               pc, pd, pe;\n\nattribute vec4 pf;\n\nuniform mat4 dim1A, dim2A, dim1B, dim2B, dim1C, dim2C, dim1D, dim2D,\n             loA, hiA, loB, hiB, loC, hiC, loD, hiD;\n\nuniform vec2 resolution,\n             viewBoxPosition,\n             viewBoxSize;\n\nuniform sampler2D palette;\nuniform sampler2D mask;\nuniform float maskHeight;\n\nuniform vec2 colorClamp;\n\nvarying vec4 fragColor;\n\nvec4 unit_1 \x3d vec4(1, 1, 1, 1);\n\nfloat val(mat4 p, mat4 v) {\n    return dot(matrixCompMult(p, v) * unit_1, unit_1);\n}\n\nfloat axisY(\n        float x,\n        mat4 d[4],\n        mat4 dim1A, mat4 dim2A, mat4 dim1B, mat4 dim2B, mat4 dim1C, mat4 dim2C, mat4 dim1D, mat4 dim2D\n    ) {\n\n    float y1 \x3d val(d[0], dim1A) + val(d[1], dim1B) + val(d[2], dim1C) + val(d[3], dim1D);\n    float y2 \x3d val(d[0], dim2A) + val(d[1], dim2B) + val(d[2], dim2C) + val(d[3], dim2D);\n    return y1 * (1.0 - x) + y2 * x;\n}\n\nconst int bitsPerByte \x3d 8;\n\nint mod2(int a) {\n    return a - 2 * (a / 2);\n}\n\nint mod8(int a) {\n    return a - 8 * (a / 8);\n}\n\nvec4 zero \x3d vec4(0, 0, 0, 0);\nvec4 unit_0 \x3d vec4(1, 1, 1, 1);\nvec2 xyProjection \x3d vec2(1, 1);\n\nmat4 mclamp(mat4 m, mat4 lo, mat4 hi) {\n    return mat4(clamp(m[0], lo[0], hi[0]),\n                clamp(m[1], lo[1], hi[1]),\n                clamp(m[2], lo[2], hi[2]),\n                clamp(m[3], lo[3], hi[3]));\n}\n\nbool mshow(mat4 p, mat4 lo, mat4 hi) {\n    return mclamp(p, lo, hi) \x3d\x3d p;\n}\n\nbool withinBoundingBox(\n        mat4 d[4],\n        mat4 loA, mat4 hiA, mat4 loB, mat4 hiB, mat4 loC, mat4 hiC, mat4 loD, mat4 hiD\n    ) {\n\n    return mshow(d[0], loA, hiA) \x26\x26\n           mshow(d[1], loB, hiB) \x26\x26\n           mshow(d[2], loC, hiC) \x26\x26\n           mshow(d[3], loD, hiD);\n}\n\nbool withinRasterMask(mat4 d[4], sampler2D mask, float height) {\n    bool result \x3d true;\n    int bitInByteStepper;\n    float valY, valueY, scaleX;\n    int hit, bitmask, valX;\n    for(int i \x3d 0; i \x3c 4; i++) {\n        for(int j \x3d 0; j \x3c 4; j++) {\n            for(int k \x3d 0; k \x3c 4; k++) {\n                bitInByteStepper \x3d mod8(j * 4 + k);\n                valX \x3d i * 2 + j / 2;\n                valY \x3d d[i][j][k];\n                valueY \x3d valY * (height - 1.0) + 0.5;\n                scaleX \x3d (float(valX) + 0.5) / 8.0;\n                hit \x3d int(texture2D(mask, vec2(scaleX, (valueY + 0.5) / height))[3] * 255.0) / int(pow(2.0, float(bitInByteStepper)));\n                result \x3d result \x26\x26 mod2(hit) \x3d\x3d 1;\n            }\n        }\n    }\n    return result;\n}\n\nvec4 position(\n        float depth,\n        vec2 resolution, vec2 viewBoxPosition, vec2 viewBoxSize,\n        mat4 dims[4],\n        float signum,\n        mat4 dim1A, mat4 dim2A, mat4 dim1B, mat4 dim2B, mat4 dim1C, mat4 dim2C, mat4 dim1D, mat4 dim2D,\n        mat4 loA, mat4 hiA, mat4 loB, mat4 hiB, mat4 loC, mat4 hiC, mat4 loD, mat4 hiD,\n        sampler2D mask, float maskHeight\n    ) {\n\n    float x \x3d 0.5 * signum + 0.5;\n    float y \x3d axisY(x, dims, dim1A, dim2A, dim1B, dim2B, dim1C, dim2C, dim1D, dim2D);\n\n    float show \x3d float(\n                            withinBoundingBox(dims, loA, hiA, loB, hiB, loC, hiC, loD, hiD)\n                         \x26\x26 withinRasterMask(dims, mask, maskHeight)\n                      );\n\n    vec2 viewBoxXY \x3d viewBoxPosition + viewBoxSize * vec2(x, y);\n    float depthOrHide \x3d depth + 2.0 * (1.0 - show);\n\n    return vec4(\n        xyProjection * (2.0 * viewBoxXY / resolution - 1.0),\n        depthOrHide,\n        1.0\n    );\n}\n\nvoid main() {\n\n    float prominence \x3d abs(pf[3]);\n\n    mat4 p[4];\n    p[0] \x3d mat4(p0, p1, p2, p3);\n    p[1] \x3d mat4(p4, p5, p6, p7);\n    p[2] \x3d mat4(p8, p9, pa, pb);\n    p[3] \x3d mat4(pc, pd, pe, abs(pf));\n\n    gl_Position \x3d position(\n        1.0 - prominence,\n        resolution, viewBoxPosition, viewBoxSize,\n        p,\n        sign(pf[3]),\n        dim1A, dim2A, dim1B, dim2B, dim1C, dim2C, dim1D, dim2D,\n        loA, hiA, loB, hiB, loC, hiC, loD, hiD,\n        mask, maskHeight\n    );\n\n    float clampedColorIndex \x3d clamp((prominence - colorClamp[0]) / (colorClamp[1] - colorClamp[0]), 0.0, 1.0);\n    fragColor \x3d texture2D(palette, vec2((clampedColorIndex * 255.0 + 0.5) / 256.0, 0.5));\n}\n"]),
r=l(["precision highp float;\n#define GLSLIFY 1\n\nattribute vec4 p0, p1, p2, p3,\n               p4, p5, p6, p7,\n               p8, p9, pa, pb,\n               pc, pd, pe;\n\nattribute vec4 pf;\n\nuniform mat4 dim1A, dim2A, dim1B, dim2B, dim1C, dim2C, dim1D, dim2D;\n\nuniform vec2 resolution,\n             viewBoxPosition,\n             viewBoxSize;\n\nuniform sampler2D palette;\n\nuniform vec2 colorClamp;\n\nvarying vec4 fragColor;\n\nvec2 xyProjection \x3d vec2(1, 1);\n\nvec4 unit \x3d vec4(1, 1, 1, 1);\n\nfloat val(mat4 p, mat4 v) {\n    return dot(matrixCompMult(p, v) * unit, unit);\n}\n\nfloat axisY(\n        float x,\n        mat4 d[4],\n        mat4 dim1A, mat4 dim2A, mat4 dim1B, mat4 dim2B, mat4 dim1C, mat4 dim2C, mat4 dim1D, mat4 dim2D\n    ) {\n\n    float y1 \x3d val(d[0], dim1A) + val(d[1], dim1B) + val(d[2], dim1C) + val(d[3], dim1D);\n    float y2 \x3d val(d[0], dim2A) + val(d[1], dim2B) + val(d[2], dim2C) + val(d[3], dim2D);\n    return y1 * (1.0 - x) + y2 * x;\n}\n\nvec4 position(\n        float depth,\n        vec2 resolution, vec2 viewBoxPosition, vec2 viewBoxSize,\n        mat4 dims[4],\n        float signum,\n        mat4 dim1A, mat4 dim2A, mat4 dim1B, mat4 dim2B, mat4 dim1C, mat4 dim2C, mat4 dim1D, mat4 dim2D\n    ) {\n\n    float x \x3d 0.5 * signum + 0.5;\n    float y \x3d axisY(x, dims, dim1A, dim2A, dim1B, dim2B, dim1C, dim2C, dim1D, dim2D);\n\n    vec2 viewBoxXY \x3d viewBoxPosition + viewBoxSize * vec2(x, y);\n\n    return vec4(\n        xyProjection * (2.0 * viewBoxXY / resolution - 1.0),\n        depth,\n        1.0\n    );\n}\n\nvoid main() {\n\n    float prominence \x3d abs(pf[3]);\n\n    mat4 p[4];\n    p[0] \x3d mat4(p0, p1, p2, p3);\n    p[1] \x3d mat4(p4, p5, p6, p7);\n    p[2] \x3d mat4(p8, p9, pa, pb);\n    p[3] \x3d mat4(pc, pd, pe, abs(pf));\n\n    gl_Position \x3d position(\n        1.0 - prominence,\n        resolution, viewBoxPosition, viewBoxSize,\n        p,\n        sign(pf[3]),\n        dim1A, dim2A, dim1B, dim2B, dim1C, dim2C, dim1D, dim2D\n    );\n\n    float clampedColorIndex \x3d clamp((prominence - colorClamp[0]) / (colorClamp[1] - colorClamp[0]), 0.0, 1.0);\n    fragColor \x3d texture2D(palette, vec2((clampedColorIndex * 255.0 + 0.5) / 256.0, 0.5));\n}\n"]),
d=l(["precision highp float;\n#define GLSLIFY 1\n\nattribute vec4 p0, p1, p2, p3,\n               p4, p5, p6, p7,\n               p8, p9, pa, pb,\n               pc, pd, pe;\n\nattribute vec4 pf;\n\nuniform mat4 dim1A, dim2A, dim1B, dim2B, dim1C, dim2C, dim1D, dim2D,\n             loA, hiA, loB, hiB, loC, hiC, loD, hiD;\n\nuniform vec2 resolution,\n             viewBoxPosition,\n             viewBoxSize;\n\nuniform sampler2D mask;\nuniform float maskHeight;\n\nuniform vec2 colorClamp;\n\nvarying vec4 fragColor;\n\nvec4 unit_1 \x3d vec4(1, 1, 1, 1);\n\nfloat val(mat4 p, mat4 v) {\n    return dot(matrixCompMult(p, v) * unit_1, unit_1);\n}\n\nfloat axisY(\n        float x,\n        mat4 d[4],\n        mat4 dim1A, mat4 dim2A, mat4 dim1B, mat4 dim2B, mat4 dim1C, mat4 dim2C, mat4 dim1D, mat4 dim2D\n    ) {\n\n    float y1 \x3d val(d[0], dim1A) + val(d[1], dim1B) + val(d[2], dim1C) + val(d[3], dim1D);\n    float y2 \x3d val(d[0], dim2A) + val(d[1], dim2B) + val(d[2], dim2C) + val(d[3], dim2D);\n    return y1 * (1.0 - x) + y2 * x;\n}\n\nconst int bitsPerByte \x3d 8;\n\nint mod2(int a) {\n    return a - 2 * (a / 2);\n}\n\nint mod8(int a) {\n    return a - 8 * (a / 8);\n}\n\nvec4 zero \x3d vec4(0, 0, 0, 0);\nvec4 unit_0 \x3d vec4(1, 1, 1, 1);\nvec2 xyProjection \x3d vec2(1, 1);\n\nmat4 mclamp(mat4 m, mat4 lo, mat4 hi) {\n    return mat4(clamp(m[0], lo[0], hi[0]),\n                clamp(m[1], lo[1], hi[1]),\n                clamp(m[2], lo[2], hi[2]),\n                clamp(m[3], lo[3], hi[3]));\n}\n\nbool mshow(mat4 p, mat4 lo, mat4 hi) {\n    return mclamp(p, lo, hi) \x3d\x3d p;\n}\n\nbool withinBoundingBox(\n        mat4 d[4],\n        mat4 loA, mat4 hiA, mat4 loB, mat4 hiB, mat4 loC, mat4 hiC, mat4 loD, mat4 hiD\n    ) {\n\n    return mshow(d[0], loA, hiA) \x26\x26\n           mshow(d[1], loB, hiB) \x26\x26\n           mshow(d[2], loC, hiC) \x26\x26\n           mshow(d[3], loD, hiD);\n}\n\nbool withinRasterMask(mat4 d[4], sampler2D mask, float height) {\n    bool result \x3d true;\n    int bitInByteStepper;\n    float valY, valueY, scaleX;\n    int hit, bitmask, valX;\n    for(int i \x3d 0; i \x3c 4; i++) {\n        for(int j \x3d 0; j \x3c 4; j++) {\n            for(int k \x3d 0; k \x3c 4; k++) {\n                bitInByteStepper \x3d mod8(j * 4 + k);\n                valX \x3d i * 2 + j / 2;\n                valY \x3d d[i][j][k];\n                valueY \x3d valY * (height - 1.0) + 0.5;\n                scaleX \x3d (float(valX) + 0.5) / 8.0;\n                hit \x3d int(texture2D(mask, vec2(scaleX, (valueY + 0.5) / height))[3] * 255.0) / int(pow(2.0, float(bitInByteStepper)));\n                result \x3d result \x26\x26 mod2(hit) \x3d\x3d 1;\n            }\n        }\n    }\n    return result;\n}\n\nvec4 position(\n        float depth,\n        vec2 resolution, vec2 viewBoxPosition, vec2 viewBoxSize,\n        mat4 dims[4],\n        float signum,\n        mat4 dim1A, mat4 dim2A, mat4 dim1B, mat4 dim2B, mat4 dim1C, mat4 dim2C, mat4 dim1D, mat4 dim2D,\n        mat4 loA, mat4 hiA, mat4 loB, mat4 hiB, mat4 loC, mat4 hiC, mat4 loD, mat4 hiD,\n        sampler2D mask, float maskHeight\n    ) {\n\n    float x \x3d 0.5 * signum + 0.5;\n    float y \x3d axisY(x, dims, dim1A, dim2A, dim1B, dim2B, dim1C, dim2C, dim1D, dim2D);\n\n    float show \x3d float(\n                            withinBoundingBox(dims, loA, hiA, loB, hiB, loC, hiC, loD, hiD)\n                         \x26\x26 withinRasterMask(dims, mask, maskHeight)\n                      );\n\n    vec2 viewBoxXY \x3d viewBoxPosition + viewBoxSize * vec2(x, y);\n    float depthOrHide \x3d depth + 2.0 * (1.0 - show);\n\n    return vec4(\n        xyProjection * (2.0 * viewBoxXY / resolution - 1.0),\n        depthOrHide,\n        1.0\n    );\n}\n\nvoid main() {\n\n    float prominence \x3d abs(pf[3]);\n\n    mat4 p[4];\n    p[0] \x3d mat4(p0, p1, p2, p3);\n    p[1] \x3d mat4(p4, p5, p6, p7);\n    p[2] \x3d mat4(p8, p9, pa, pb);\n    p[3] \x3d mat4(pc, pd, pe, abs(pf));\n\n    gl_Position \x3d position(\n        1.0 - prominence,\n        resolution, viewBoxPosition, viewBoxSize,\n        p,\n        sign(pf[3]),\n        dim1A, dim2A, dim1B, dim2B, dim1C, dim2C, dim1D, dim2D,\n        loA, hiA, loB, hiB, loC, hiC, loD, hiD,\n        mask, maskHeight\n    );\n\n    fragColor \x3d vec4(pf.rgb, 1.0);\n}\n"]),
g=l(["precision lowp float;\n#define GLSLIFY 1\n\nvarying vec4 fragColor;\n\nvoid main() {\n    gl_FragColor \x3d fragColor;\n}\n"]),c=a("../../lib"),v=[119,119,119],t=new Uint8Array(4),w=new Uint8Array(4),x={shape:[256,1],format:"rgba",type:"uint8",mag:"nearest",min:"nearest"};p.exports=function(a,f){function l(a){D=a.model;z=a.viewModel;G=z.dimensions.slice();F=G[0]?G[0].values.length:0;var d=D.lines,f=u?d.color.map(function(a,b){return b/d.color.length}):d.color;a=Math.max(1/255,Math.pow(1/f.length,
1/3));f=e(F,G,f);b(L,F,f);ca=y.texture(c.extendFlat({data:h(D.unitToColor,v,Math.round(255*(v?a:1)))},x))}function p(a,b,d,e,f,g,h,k,n,m,l){var p,q,r,t=[a,b],v=[0,1].map(function(){return[0,1,2,3].map(function(){return new Float32Array(16)})});for(p=0;2>p;p++){var u=t[p];for(q=0;4>q;q++)for(r=0;16>r;r++)v[p][q][r]=r+16*q===u?1:0}p=D.lines.canvasOverdrag;q=D.domain;r=D.canvasWidth;u=D.canvasHeight;return c.extendFlat({key:h,resolution:[r,u],viewBoxPosition:[d+p,e],viewBoxSize:[f,g],i:a,ii:b,dim1A:v[0][0],
dim1B:v[0][1],dim1C:v[0][2],dim1D:v[0][3],dim2A:v[1][0],dim2B:v[1][1],dim2C:v[1][2],dim2D:v[1][3],colorClamp:T,scissorX:(k===n?0:d+p)+(D.pad.l-p)+D.layoutWidth*q.x[0],scissorWidth:(k===m?r-d+p:f+.5)+(k===n?d+p:0),scissorY:e+D.pad.b+D.layoutHeight*q.y[0],scissorHeight:g,viewportX:D.pad.l-p+D.layoutWidth*q.x[0],viewportY:D.pad.b+D.layoutHeight*q.y[0],viewportWidth:r,viewportHeight:u},l)}function t(){function a(a,b){return[Math.max(0,Math.floor(2047*b[0])),Math.min(2047,Math.ceil(2047*b[1]))]}var b,
c,d,e=[0,1].map(function(){return[0,1,2,3].map(function(){return new Float32Array(16)})});for(b=0;2>b;b++)for(c=0;4>c;c++)for(d=0;16>d;d++){var f=d+16*c;f=f<G.length?G[f].brush.filter.getBounds()[b]:b;e[b][c][d]=f+1E-7*(2*b-1)}b=Array.apply(null,Array(16384)).map(function(){return 255});for(c=0;c<G.length;c++){f=c%8;d=(c-f)/8;f=Math.pow(2,f);var g=G[c],h=g.brush.filter.get();if(!(2>h.length))for(var k=a(g,h[0])[1],n=1;n<h.length;n++){for(var m=a(g,h[n]),l=k+1;l<m[0];l++)b[8*l+d]&=~f;k=Math.max(k,
m[1])}}b={shape:[8,2048],format:"alpha",type:"uint8",mag:"nearest",min:"nearest",data:b};K?K(b):K=y.texture(b);return{maskTexture:K,maskHeight:2048,loA:e[0][0],loB:e[0][1],loC:e[0][2],loD:e[0][3],hiA:e[1][0],hiB:e[1][1],hiC:e[1][2],hiD:e[1][3]}}var v=f.context,u=f.pick,y=f.regl,B={currentRafs:{},drawCompleted:!0,clearOnly:!1},D,z,G,F,L=n(y),K,ca=y.texture(x);l(f);var U=y({profile:!1,blend:{enable:v,func:{srcRGB:"src alpha",dstRGB:"one minus src alpha",srcAlpha:1,dstAlpha:1},equation:{rgb:"add",alpha:"add"},
color:[0,0,0,0]},depth:{enable:!v,mask:!0,func:"less",range:[0,1]},cull:{enable:!0,face:"back"},scissor:{enable:!0,box:{x:y.prop("scissorX"),y:y.prop("scissorY"),width:y.prop("scissorWidth"),height:y.prop("scissorHeight")}},viewport:{x:y.prop("viewportX"),y:y.prop("viewportY"),width:y.prop("viewportWidth"),height:y.prop("viewportHeight")},dither:!1,vert:u?d:v?r:q,frag:g,primitive:"lines",lineWidth:1,attributes:L,uniforms:{resolution:y.prop("resolution"),viewBoxPosition:y.prop("viewBoxPosition"),viewBoxSize:y.prop("viewBoxSize"),
dim1A:y.prop("dim1A"),dim2A:y.prop("dim2A"),dim1B:y.prop("dim1B"),dim2B:y.prop("dim2B"),dim1C:y.prop("dim1C"),dim2C:y.prop("dim2C"),dim1D:y.prop("dim1D"),dim2D:y.prop("dim2D"),loA:y.prop("loA"),hiA:y.prop("hiA"),loB:y.prop("loB"),hiB:y.prop("hiB"),loC:y.prop("loC"),hiC:y.prop("hiC"),loD:y.prop("loD"),hiD:y.prop("hiD"),palette:ca,mask:y.prop("maskTexture"),maskHeight:y.prop("maskHeight"),colorClamp:y.prop("colorClamp")},offset:y.prop("offset"),count:y.prop("count")}),T=[0,1],Y=[];return{setColorDomain:function(a){T[0]=
a[0];T[1]=a[1]},render:function(a,b,c){var d=a.length,e,f=Infinity,g=-Infinity;for(e=0;e<d;e++){if(a[e].dim2.canvasX>g){g=a[e].dim2.canvasX;var h=e}if(a[e].dim1.canvasX<f){f=a[e].dim1.canvasX;var n=e}}0===d&&m(y,0,0,D.canvasWidth,D.canvasHeight);f=v?{}:t();for(e=0;e<d;e++){var l=a[e];g=l.dim1;var q=g.crossfilterDimensionIndex,r=l.canvasX,u=l.canvasY,w=l.dim2.crossfilterDimensionIndex,x=l.panelSizeX;l=l.panelSizeY;var A=r+x;if(b||!Y[q]||Y[q][0]!==r||Y[q][1]!==A)Y[q]=[r,A],g=p(q,w,r,u,x,l,g.crossfilterDimensionIndex,
e,n,h,f),B.clearOnly=c,k(y,U,B,b?D.lines.blockLineCount:F,F,g)}},readPixel:function(a,b){y.read({x:a,y:b,width:1,height:1,data:w});return w},readPixels:function(a,b,c,d){var e=new Uint8Array(4*c*d);y.read({x:a,y:b,width:c,height:d,data:e});return e},destroy:function(){a.style["pointer-events"]="none";ca.destroy();K&&K.destroy();for(var b in L)L[b].destroy()},update:l}}},{"../../lib":700,glslify:401}],1023:[function(a,p,l){p.exports=function(a,k,h,e){e||(e=Infinity);var f;for(f=0;f<k.length;f++){var b=
k[f];b.visible&&(e=Math.min(e,b[h].length))}Infinity===e&&(e=0);a._length=e;for(f=0;f<k.length;f++)b=k[f],b.visible&&(b._length=e);return e}},{}],1024:[function(a,p,l){function m(a){return!("visible"in a)||a.visible}function k(a){var b=a.range?a.range[0]:w.aggNums(Math.min,null,a.values,a._length);a=a.range?a.range[1]:w.aggNums(Math.max,null,a.values,a._length);if(isNaN(b)||!isFinite(b))b=0;if(isNaN(a)||!isFinite(a))a=0;b===a&&(0===b?(--b,a+=1):(b*=.9,a*=1.1));return[b,a]}function h(a,b){return b?
function(c,d){d=b[d];return null===d||void 0===d?a(c):d}:a}function e(a,b,c,d,e){var f=k(c);return d?t.scale.ordinal().domain(d.map(h(t.format(c.tickformat),e))).range(d.map(function(c){return a-b+(c-f[0])/(f[1]-f[0])*(2*b-a)})):t.scale.linear().domain(f).range([a-b,b])}function f(a,b){return t.scale.linear().range([b,a-b])}function b(a,b){return t.scale.linear().domain(k(a)).range([b,1-b])}function n(a){if(a.tickvals){var b=k(a);return t.scale.ordinal().domain(a.tickvals).range(a.tickvals.map(function(a){return(a-
b[0])/(b[1]-b[0])}))}}function q(a){var b=a.map(function(a){return a[0]}),c=a.map(function(a){return t.rgb(a[1])}),d=function(a){return function(b){return b[a]}},e=["r","g","b"].map(function(a){return t.scale.linear().clamp(!0).domain(b).range(c.map(d(a)))});return function(a){return e.map(function(b){return b(a)})}}function r(a){return a.dimensions.some(function(a){return a.brush.filterSpecified})}function d(a,b,c){b=C(b);var d=b.trace,e=b.lineColor,f=d.line;b=f.reversescale?D.flipScale(b.cscale):
b.cscale;var g=d.domain,h=d.dimensions,n=a.width,l=d.labelfont,p=d.tickfont,r=d.rangefont;d=w.extendDeepNoArrays({},f,{color:e.map(t.scale.linear().domain(k({values:e,range:[f.cmin,f.cmax],_length:d._length}))),blockLineCount:F.blockLineCount,canvasOverdrag:F.overdrag*F.canvasPixelRatio});e=a.margin||{l:80,r:80,t:100,b:80};f=Math.floor(n*(g.x[1]-g.x[0]));var v=Math.floor(a.height*(g.y[1]-g.y[0]));return{key:c,colCount:h.filter(m).length,dimensions:h,tickDistance:F.tickDistance,unitToColor:q(b),lines:d,
labelFont:l,tickFont:p,rangeFont:r,layoutWidth:n,layoutHeight:a.height,domain:g,translateX:g.x[0]*n,translateY:a.height-g.y[1]*a.height,pad:e,canvasWidth:f*F.canvasPixelRatio+2*d.canvasOverdrag,canvasHeight:v*F.canvasPixelRatio,width:f,height:v,canvasPixelRatio:F.canvasPixelRatio}}function g(a,c,d){var g=d.width,h=d.height,k=d.dimensions,l=d.canvasPixelRatio,p=function(a){return g*a/Math.max(1,d.colCount-1)},q=F.verticalPadding/h,v=f(h,F.verticalPadding),u={key:d.key,xScale:p,model:d,inBrushDrag:!1},
x={};u.dimensions=k.filter(m).map(function(f,g){function k(a,b){return{val:a,text:G[b]}}function m(a,b){return a.val-b.val}var y=b(f,q),A=x[f.label];x[f.label]=(A||0)+1;A=f.label+(A?"__"+A:"");var B=f.constraintrange,D=B&&B.length;D&&!Array.isArray(B[0])&&(B=[B]);B=D?B.map(function(a){return a.map(y)}):[[0,1]];var C=f.values;C.length>f._length&&(C=C.slice(0,f._length));var z=f.tickvals;if(Array.isArray(z)&&z.length){var G=f.ticktext;Array.isArray(G)&&G.length?G.length>z.length?G=G.slice(0,z.length):
z.length>G.length&&(z=z.slice(0,G.length)):G=z.map(t.format(f.tickformat));for(var E=1;E<z.length;E++)if(z[E]<z[E-1]){E=z.map(k).sort(m);for(var H=0;H<z.length;H++)z[H]=E[H].val,G[H]=E[H].text;break}}else z=void 0;return{key:A,label:f.label,tickFormat:f.tickformat,tickvals:z,ticktext:G,ordinal:!!z,multiselect:f.multiselect,xIndex:g,crossfilterDimensionIndex:g,visibleIndex:f._index,height:h,values:C,paddedUnitValues:C.map(y),unitTickvals:z&&z.map(y),xScale:p,x:p(g),canvasX:p(g)*l,unitToPaddedPx:v,
domainScale:e(h,F.verticalPadding,f,z,G),ordinalScale:n(f),parent:u,model:d,brush:J.makeBrush(a,D,B,function(){a.linePickActive(!1)},function(){u.focusLayer&&u.focusLayer.render(u.panels,!0);var b=r(u);!a.contextShown()&&b?(u.contextLayer&&u.contextLayer.render(u.panels,!0),a.contextShown(!0)):a.contextShown()&&!b&&(u.contextLayer&&u.contextLayer.render(u.panels,!0,!0),a.contextShown(!1))},function(b){u.focusLayer.render(u.panels,!0);u.pickLayer&&u.pickLayer.render(u.panels,!0);a.linePickActive(!0);
if(c&&c.filterChanged){var d=y.invert;b=b.map(function(a){return a.map(d).sort(w.sorterAsc)}).sort(function(a,b){return a[0]-b[0]});c.filterChanged(u.key,f._index,b)}})}});return u}function c(a){a.classed(F.cn.axisExtentText,!0).attr("text-anchor","middle").style("cursor","default").style("user-select","none")}function v(){var a=!0,b=!1;return{linePickActive:function(b){return arguments.length?a=!!b:a},contextShown:function(a){return arguments.length?b=!!a:b}}}var t=a("d3"),w=a("../../lib"),x=a("../../components/drawing"),
D=a("../../components/colorscale");l=a("../../lib/gup");var z=l.keyFun,A=l.repeat,C=l.unwrap,F=a("./constants"),J=a("./axisbrush"),E=a("./lines");p.exports=function(a,b,e,f,h,k){function n(a,b){var c=b.panels||(b.panels=[]);a=a.data();for(var d=a.length-1,e=0;e<d;e++){var f=c[e]||(c[e]={}),g=a[e],h=a[e+1];f.dim1=g;f.dim2=h;f.canvasX=g.canvasX;f.panelSizeX=h.canvasX-g.canvasX;f.panelSizeY=b.model.canvasHeight;f.y=0;f.canvasY=0}}function m(a,b){if(a.ordinal)return"";var c=a.domainScale.domain();return t.format(a.tickFormat)(c[b?
c.length-1:0])}var l=v(),p=f.filter(function(a){return C(a).trace.visible}).map(d.bind(0,h)).map(g.bind(0,l,k));e.each(function(a,b){return w.extendFlat(a,p[b])});a=e.selectAll(".gl-canvas").each(function(a){a.viewModel=p[0];a.model=a.viewModel?a.viewModel.model:null});var q=null;a.filter(function(a){return a.pick}).style("pointer-events","auto").on("mousemove",function(a){if(l.linePickActive()&&a.lineLayer&&k&&k.hover){var b=t.event,c=this.width,d=this.height,e=t.mouse(this),f=e[0];e=e[1];0>f||0>
e||f>=c||e>=d||(d=a.lineLayer.readPixel(f,d-1-e),d=(c=0!==d[3])?d[2]+256*(d[1]+256*d[0]):null,a={x:f,y:e,clientX:b.clientX,clientY:b.clientY,dataIndex:a.model.key,curveNumber:d},d!==q&&(c?k.hover(a):k.unhover&&k.unhover(a),q=d))}});a.style("opacity",function(a){return a.pick?.01:1});b.style("background","rgba(255, 255, 255, 0)");b=b.selectAll("."+F.cn.parcoords).data(p,z);b.exit().remove();b.enter().append("g").classed(F.cn.parcoords,!0).style("shape-rendering","crispEdges").style("pointer-events",
"none");b.attr("transform",function(a){return"translate("+a.model.translateX+","+a.model.translateY+")"});b=b.selectAll("."+F.cn.parcoordsControlView).data(A,z);b.enter().append("g").classed(F.cn.parcoordsControlView,!0);b.attr("transform",function(a){return"translate("+a.model.pad.l+","+a.model.pad.t+")"});var u=b.selectAll("."+F.cn.yAxis).data(function(a){return a.dimensions},z);u.enter().append("g").classed(F.cn.yAxis,!0);b.each(function(a){n(u,a)});a.each(function(a){if(a.viewModel){!a.lineLayer||
k?a.lineLayer=E(this,a):a.lineLayer.update(a);if(a.key||0===a.key)a.viewModel[a.key]=a.lineLayer;a.lineLayer.render(a.viewModel.panels,!a.context||k)}});u.attr("transform",function(a){return"translate("+a.xScale(a.xIndex)+", 0)"});u.call(t.behavior.drag().origin(function(a){return a}).on("drag",function(a){var b=a.parent;l.linePickActive(!1);a.x=Math.max(-F.overdrag,Math.min(a.model.width+F.overdrag,t.event.x));a.canvasX=a.x*a.model.canvasPixelRatio;u.sort(function(a,b){return a.x-b.x}).each(function(b,
c){b.xIndex=c;b.x=a===b?b.x:b.xScale(b.xIndex);b.canvasX=b.x*b.model.canvasPixelRatio});n(u,b);u.filter(function(b){return 0!==Math.abs(a.xIndex-b.xIndex)}).attr("transform",function(a){return"translate("+a.xScale(a.xIndex)+", 0)"});t.select(this).attr("transform","translate("+a.x+", 0)");u.each(function(c,d,e){e===a.parent.key&&(b.dimensions[d]=c)});b.contextLayer&&b.contextLayer.render(b.panels,!1,!r(b));b.focusLayer.render&&b.focusLayer.render(b.panels)}).on("dragend",function(a){var b=a.parent;
a.x=a.xScale(a.xIndex);a.canvasX=a.x*a.model.canvasPixelRatio;n(u,b);t.select(this).attr("transform",function(a){return"translate("+a.x+", 0)"});b.contextLayer&&b.contextLayer.render(b.panels,!1,!r(b));b.focusLayer&&b.focusLayer.render(b.panels);b.pickLayer&&b.pickLayer.render(b.panels,!0);l.linePickActive(!0);k&&k.axesMoved&&k.axesMoved(b.key,b.dimensions.map(function(a){return a.crossfilterDimensionIndex}))}));u.exit().remove();b=u.selectAll("."+F.cn.axisOverlays).data(A,z);b.enter().append("g").classed(F.cn.axisOverlays,
!0);b.selectAll("."+F.cn.axis).remove();var y=b.selectAll("."+F.cn.axis).data(A,z);y.enter().append("g").classed(F.cn.axis,!0);y.each(function(a){var b=a.model.height/a.model.tickDistance,c=a.domainScale,d=c.domain();t.select(this).call(t.svg.axis().orient("left").tickSize(4).outerTickSize(2).ticks(b,a.tickFormat).tickValues(a.ordinal?d:null).tickFormat(a.ordinal?function(a){return a}:null).scale(c));x.font(y.selectAll("text"),a.model.tickFont)});y.selectAll(".domain, .tick\x3eline").attr("fill",
"none").attr("stroke","black").attr("stroke-opacity",.25).attr("stroke-width","1px");y.selectAll("text").style("text-shadow","1px 1px 1px #fff, -1px -1px 1px #fff, 1px -1px 1px #fff, -1px 1px 1px #fff").style("cursor","default").style("user-select","none");a=b.selectAll("."+F.cn.axisHeading).data(A,z);a.enter().append("g").classed(F.cn.axisHeading,!0);a=a.selectAll("."+F.cn.axisTitle).data(A,z);a.enter().append("text").classed(F.cn.axisTitle,!0).attr("text-anchor","middle").style("cursor","ew-resize").style("user-select",
"none").style("pointer-events","auto");a.attr("transform","translate(0,"+-F.axisTitleOffset+")").text(function(a){return a.label}).each(function(a){x.font(t.select(this),a.model.labelFont)});a=b.selectAll("."+F.cn.axisExtent).data(A,z);a.enter().append("g").classed(F.cn.axisExtent,!0);e=a.selectAll("."+F.cn.axisExtentTop).data(A,z);e.enter().append("g").classed(F.cn.axisExtentTop,!0);e.attr("transform","translate(0,"+-F.axisExtentOffset+")");e=e.selectAll("."+F.cn.axisExtentTopText).data(A,z);e.enter().append("text").classed(F.cn.axisExtentTopText,
!0).call(c);e.text(function(a){return m(a,!0)}).each(function(a){x.font(t.select(this),a.model.rangeFont)});a=a.selectAll("."+F.cn.axisExtentBottom).data(A,z);a.enter().append("g").classed(F.cn.axisExtentBottom,!0);a.attr("transform",function(a){return"translate(0,"+(a.model.height+F.axisExtentOffset)+")"});a=a.selectAll("."+F.cn.axisExtentBottomText).data(A,z);a.enter().append("text").classed(F.cn.axisExtentBottomText,!0).attr("dy","0.75em").call(c);a.text(function(a){return m(a)}).each(function(a){x.font(t.select(this),
a.model.rangeFont)});J.ensureAxisBrush(b)}},{"../../components/colorscale":589,"../../components/drawing":598,"../../lib":700,"../../lib/gup":698,"./axisbrush":1016,"./constants":1019,"./lines":1022,d3:154}],1025:[function(a,p,l){var m=a("./parcoords"),k=a("../../lib/prepare_regl");p.exports=function(a,e){var f=a._fullLayout,b=f._toppaper,h=f._paperdiv,l=f._glcontainer;if(k(a)){var p={},d={},g={},c={},q=f._size;e.forEach(function(b,e){b=b[0].trace;g[e]=b.index;b=c[e]=b._fullInput.index;p[e]=a.data[b].dimensions;
d[e]=a.data[b].dimensions.slice()});m(h,b,l,e,{width:q.w,height:q.h,margin:{t:q.t,r:q.r,b:q.b,l:q.l}},{filterChanged:function(b,e,h){var k=d[b][e];h=h.map(function(a){return a.slice()});var n="dimensions["+e+"].constraintrange",m=f._tracePreGUI[a._fullData[g[b]]._fullInput.uid];void 0===m[n]&&(m[n]=k.constraintrange||null);e=a._fullData[g[b]].dimensions[e];h.length?(1===h.length&&(h=h[0]),k.constraintrange=h,e.constraintrange=h.slice(),h=[h]):(delete k.constraintrange,delete e.constraintrange,h=null);
k={};k[n]=h;a.emit("plotly_restyle",[k,[c[b]]])},hover:function(b){a.emit("plotly_hover",b)},unhover:function(b){a.emit("plotly_unhover",b)},axesMoved:function(b,e){function f(a){return!("visible"in a)||a.visible}function g(a,b,c){c=b.indexOf(c);a=a.indexOf(c);-1===a&&(a+=b.length);return a}var h=function(a){return function(b,c){b=g(e,a,b);c=g(e,a,c);return b-c}}(d[b].filter(f));p[b].sort(h);d[b].filter(function(a){return!f(a)}).sort(function(a){return d[b].indexOf(a)}).forEach(function(a){p[b].splice(p[b].indexOf(a),
1);p[b].splice(d[b].indexOf(a),0,a)});a.emit("plotly_restyle",[{dimensions:[p[b]]},[c[b]]])}})}}},{"../../lib/prepare_regl":713,"./parcoords":1024}],1026:[function(a,p,l){l=a("../../components/color/attributes");var m=a("../../plots/font_attributes"),k=a("../../plots/attributes"),h=a("../../components/fx/hovertemplate_attributes"),e=a("../../plots/domain").attributes;a=a("../../lib/extend").extendFlat;m=m({editType:"calc",arrayOk:!0,colorEditType:"plot"});p.exports={labels:{valType:"data_array",editType:"calc"},
label0:{valType:"number",dflt:0,editType:"calc"},dlabel:{valType:"number",dflt:1,editType:"calc"},values:{valType:"data_array",editType:"calc"},marker:{colors:{valType:"data_array",editType:"calc"},line:{color:{valType:"color",dflt:l.defaultLine,arrayOk:!0,editType:"style"},width:{valType:"number",min:0,dflt:0,arrayOk:!0,editType:"style"},editType:"calc"},editType:"calc"},text:{valType:"data_array",editType:"calc"},hovertext:{valType:"string",dflt:"",arrayOk:!0,editType:"style"},scalegroup:{valType:"string",
dflt:"",editType:"calc"},textinfo:{valType:"flaglist",flags:["label","text","value","percent"],extras:["none"],editType:"calc"},hoverinfo:a({},k.hoverinfo,{flags:["label","text","value","percent","name"]}),hovertemplate:h({},{keys:["label","color","value","percent","text"]}),textposition:{valType:"enumerated",values:["inside","outside","auto","none"],dflt:"auto",arrayOk:!0,editType:"calc"},textfont:a({},m,{}),insidetextfont:a({},m,{}),outsidetextfont:a({},m,{}),title:{text:{valType:"string",dflt:"",
editType:"calc"},font:a({},m,{}),position:{valType:"enumerated",values:"top left;top center;top right;middle center;bottom left;bottom center;bottom right".split(";"),editType:"calc"},editType:"calc"},domain:e({name:"pie",trace:!0,editType:"calc"}),hole:{valType:"number",min:0,max:1,dflt:0,editType:"calc"},sort:{valType:"boolean",dflt:!0,editType:"calc"},direction:{valType:"enumerated",values:["clockwise","counterclockwise"],dflt:"counterclockwise",editType:"calc"},rotation:{valType:"number",min:-360,
max:360,dflt:0,editType:"calc"},pull:{valType:"number",min:0,max:1,dflt:0,arrayOk:!0,editType:"calc"},_deprecated:{title:{valType:"string",dflt:"",editType:"calc"},titlefont:a({},m,{}),titleposition:{valType:"enumerated",values:"top left;top center;top right;middle center;bottom left;bottom center;bottom right".split(";"),editType:"calc"}}}},{"../../components/color/attributes":576,"../../components/fx/hovertemplate_attributes":615,"../../lib/extend":690,"../../plots/attributes":745,"../../plots/domain":773,
"../../plots/font_attributes":774}],1027:[function(a,p,l){var m=a("../../registry"),k=a("../../plots/get_data").getModuleCalcData;l.name="pie";l.plot=function(a){var e=m.getModule("pie"),f=k(a.calcdata,e)[0];e.plot(a,f)};l.clean=function(a,e,f,b){a=b._has&&b._has("pie");e=e._has&&e._has("pie");a&&!e&&b._pielayer.selectAll("g.trace").remove()}},{"../../plots/get_data":784,"../../registry":829}],1028:[function(a,p,l){function m(a){return function(d,e){if(!d)return!1;d=f(d);if(!d.isValid())return!1;
d=b.addOpacity(d,d.getAlpha());a[e]||(a[e]=d);return d}}function k(a,b){var d,c=JSON.stringify(a),e=b[c];if(!e){e=a.slice();for(d=0;d<a.length;d++)e.push(f(a[d]).lighten(20).toHexString());for(d=0;d<a.length;d++)e.push(f(a[d]).darken(20).toHexString());b[c]=e}return e}var h=a("fast-isnumeric"),e=a("../../lib").isArrayOrTypedArray,f=a("tinycolor2"),b=a("../../components/color"),n=a("./helpers"),q={};p.exports={calc:function(a,b){var d=b.values,c=e(d)&&d.length,f=b.labels,k=b.marker.colors||[],l=[],
p=a._fullLayout,q={};a=0;var r=p.hiddenlabels||[],u;if(b.dlabel)for(f=Array(d.length),u=0;u<d.length;u++)f[u]=String(b.label0+u*b.dlabel);var w=m(p._piecolormap),x=(c?d:f).length;for(u=0;u<x;u++){if(c){var z=d[u];if(!h(z))continue;z=+z;if(0>z)continue}else z=1;var E=f[u];if(void 0===E||""===E)E=u;E=String(E);var H=q[E];void 0===H?(q[E]=l.length,(H=-1!==r.indexOf(E))||(a+=z),l.push({v:z,label:E,color:w(k[u],E),i:u,pts:[u],hidden:H})):(H=l[H],H.v+=z,H.pts.push(u),H.hidden||(a+=z),!1===H.color&&k[u]&&
(H.color=w(k[u],E)))}b.sort&&l.sort(function(a,b){return b.v-a.v});l[0]&&(l[0].vTotal=a);if(b.textinfo&&"none"!==b.textinfo)for(d=-1!==b.textinfo.indexOf("label"),c=-1!==b.textinfo.indexOf("text"),f=-1!==b.textinfo.indexOf("value"),k=-1!==b.textinfo.indexOf("percent"),p=p.separators,u=0;u<l.length;u++)H=l[u],q=d?[H.label]:[],c&&(r=n.getFirstFilled(b.text,H.pts))&&q.push(r),f&&q.push(n.formatPieValue(H.v,p)),k&&q.push(n.formatPiePercent(H.v/a,p)),H.text=q.join("\x3cbr\x3e");return l},crossTraceCalc:function(a){var b=
a._fullLayout;a=a.calcdata;var e=b.piecolorway,c=b._piecolormap;b.extendpiecolors&&(e=k(e,q));for(var f=b=0;f<a.length;f++){var h=a[f];if("pie"===h[0].trace.type)for(var n=0;n<h.length;n++){var m=h[n];!1===m.color&&(c[m.label]?m.color=c[m.label]:(c[m.label]=m.color=e[b%e.length],b++))}}},makePullColorFn:m,generateExtendedColors:k}},{"../../components/color":577,"../../lib":700,"./helpers":1031,"fast-isnumeric":221,tinycolor2:521}],1029:[function(a,p,l){var m=a("../../lib"),k=a("./attributes"),h=a("../../plots/domain").defaults;
p.exports=function(a,f,b,n){function e(b,c){return m.coerce(a,f,k,b,c)}b=m.coerceFont;var l=e("values"),d=m.isArrayOrTypedArray(l),g=e("labels");if(Array.isArray(g)){var c=g.length;d&&(c=Math.min(c,l.length))}else d&&(c=l.length,e("label0"),e("dlabel"));c?(f._length=c,e("marker.line.width")&&e("marker.line.color"),e("marker.colors"),e("scalegroup"),c=e("text"),c=e("textinfo",Array.isArray(c)?"text+percent":"percent"),e("hovertext"),e("hovertemplate"),c&&"none"!==c&&(l=e("textposition"),c=(d=Array.isArray(l)||
"auto"===l)||"inside"===l,l=d||"outside"===l,c||l)&&(d=b(e,"textfont",n.font),c&&(c=m.extendFlat({},d),a.textfont&&a.textfont.color||delete c.color,b(e,"insidetextfont",c)),l&&b(e,"outsidetextfont",d)),h(f,n,e),c=e("hole"),e("title.text")&&(l=e("title.position",c?"middle center":"top center"),c||"middle center"!==l||(f.title.position="top center"),b(e,"title.font",n.font)),e("sort"),e("direction"),e("rotation"),e("pull")):f.visible=!1}},{"../../lib":700,"../../plots/domain":773,"./attributes":1026}],
1030:[function(a,p,l){var m=a("../../components/fx/helpers").appendArrayMultiPointValues;p.exports=function(a,h){var e={curveNumber:h.index,pointNumbers:a.pts,data:h._input,fullData:h,label:a.label,color:a.color,value:a.v,percent:a.percent,text:a.text,v:a.v};1===a.pts.length&&(e.pointNumber=e.i=a.pts[0]);m(e,h,a.pts);return e}},{"../../components/fx/helpers":612}],1031:[function(a,p,l){var m=a("../../lib");l.formatPiePercent=function(a,h){a=(100*a).toPrecision(3);-1!==a.lastIndexOf(".")&&(a=a.replace(/[.]?0+$/,
""));return m.numSeparate(a,h)+"%"};l.formatPieValue=function(a,h){a=a.toPrecision(10);-1!==a.lastIndexOf(".")&&(a=a.replace(/[.]?0+$/,""));return m.numSeparate(a,h)};l.getFirstFilled=function(a,h){if(Array.isArray(a))for(var e=0;e<h.length;e++){var f=a[h[e]];if(f||0===f)return f}};l.castOption=function(a,h){if(Array.isArray(a))return l.getFirstFilled(a,h);if(a)return a}},{"../../lib":700}],1032:[function(a,p,l){l={};l.attributes=a("./attributes");l.supplyDefaults=a("./defaults");l.supplyLayoutDefaults=
a("./layout_defaults");l.layoutAttributes=a("./layout_attributes");var m=a("./calc");l.calc=m.calc;l.crossTraceCalc=m.crossTraceCalc;l.plot=a("./plot").plot;l.style=a("./style");l.styleOne=a("./style_one");l.moduleType="trace";l.name="pie";l.basePlotModule=a("./base_plot");l.categories=["pie","showLegend"];l.meta={};p.exports=l},{"./attributes":1026,"./base_plot":1027,"./calc":1028,"./defaults":1029,"./layout_attributes":1033,"./layout_defaults":1034,"./plot":1035,"./style":1036,"./style_one":1037}],
1033:[function(a,p,l){p.exports={hiddenlabels:{valType:"data_array",editType:"calc"},piecolorway:{valType:"colorlist",editType:"calc"},extendpiecolors:{valType:"boolean",dflt:!0,editType:"calc"}}},{}],1034:[function(a,p,l){var m=a("../../lib"),k=a("./layout_attributes");p.exports=function(a,e){m.coerce(a,e,k,"hiddenlabels",void 0);m.coerce(a,e,k,"piecolorway",e.colorway);m.coerce(a,e,k,"extendpiecolors",void 0)}},{"../../lib":700,"./layout_attributes":1033}],1035:[function(a,p,l){function m(a,b){a.each(function(a){var c=
t.select(this);if(a.labelExtraX||a.labelExtraY){var d=c.select("g.slicetext text");d.attr("transform","translate("+a.labelExtraX+","+a.labelExtraY+")"+d.attr("transform"));d=a.cxFinal+a.pxmid[0];var e="M"+d+","+(a.cyFinal+a.pxmid[1]),f=(a.yLabelMax-a.yLabelMin)*(0>a.pxmid[0]?-1:1)/4;if(a.labelExtraX){var g=a.labelExtraX*a.pxmid[1]/a.pxmid[0],h=a.yLabelMid+a.labelExtraY-(a.cyFinal+a.pxmid[1]);e=Math.abs(g)>Math.abs(h)?e+("l"+h*a.pxmid[0]/a.pxmid[1]+","+h+"H"+(d+a.labelExtraX+f)):e+("l"+a.labelExtraX+
","+g+"v"+(h-g)+"h"+f)}else e+="V"+(a.yLabelMid+a.labelExtraY)+"h"+f;z.ensureSingle(c,"path","textline").call(x.stroke,b.outsidetextfont.color).attr({"stroke-width":Math.min(2,b.outsidetextfont.size/8),d:e,fill:"none"})}else c.select("path.textline").remove()})}function k(a,b,c){var d=c[0],e=d.trace,f=d.cx,g=d.cy;"_hasHoverLabel"in e||(e._hasHoverLabel=!1);"_hasHoverEvent"in e||(e._hasHoverEvent=!1);a.on("mouseover",function(a){var c=b._fullLayout,h=b._fullData[e.index];if(!b._dragging&&!1!==c.hovermode){var k=
h.hoverinfo;Array.isArray(k)&&(k=w.castHoverinfo({hoverinfo:[C.castOption(k,a.pts)],_module:e._module},c,0));"all"===k&&(k="label+text+value+percent+name");if(h.hovertemplate||"none"!==k&&"skip"!==k&&k){var n=a.rInscribed,m=f+a.pxmid[0]*(1-n),l=g+a.pxmid[1]*(1-n),p=c.separators,q=[];k&&-1!==k.indexOf("label")&&q.push(a.label);a.text=C.castOption(h.hovertext||h.text,a.pts);if(k&&-1!==k.indexOf("text")){var r=a.text;r&&q.push(r)}a.value=a.v;a.valueLabel=C.formatPieValue(a.v,p);k&&-1!==k.indexOf("value")&&
q.push(a.valueLabel);a.percent=a.v/d.vTotal;a.percentLabel=C.formatPiePercent(a.percent,p);k&&-1!==k.indexOf("percent")&&q.push(a.percentLabel);p=e.hoverlabel;r=p.font;w.loneHover({x0:m-n*d.r,x1:m+n*d.r,y:l,text:q.join("\x3cbr\x3e"),name:h.hovertemplate||-1!==k.indexOf("name")?h.name:void 0,idealAlign:0>a.pxmid[0]?"left":"right",color:C.castOption(p.bgcolor,a.pts)||a.color,borderColor:C.castOption(p.bordercolor,a.pts),fontFamily:C.castOption(r.family,a.pts),fontSize:C.castOption(r.size,a.pts),fontColor:C.castOption(r.color,
a.pts),trace:h,hovertemplate:C.castOption(h.hovertemplate,a.pts),hovertemplateLabels:a,eventData:[F(a,h)]},{container:c._hoverlayer.node(),outerContainer:c._paper.node(),gd:b});e._hasHoverLabel=!0}e._hasHoverEvent=!0;b.emit("plotly_hover",{points:[F(a,h)],event:t.event})}});a.on("mouseout",function(a){var c=b._fullLayout,d=b._fullData[e.index],f=t.select(this).datum();e._hasHoverEvent&&(a.originalEvent=t.event,b.emit("plotly_unhover",{points:[F(f,d)],event:t.event}),e._hasHoverEvent=!1);e._hasHoverLabel&&
(w.loneUnhover(c._hoverlayer.node()),e._hasHoverLabel=!1)});a.on("click",function(a){var c=b._fullLayout;b._dragging||!1===c.hovermode||(b._hoverdata=[F(a,b._fullData[e.index])],w.click(b,t.event))})}function h(a,b,c){var d=C.castOption(a.outsidetextfont.color,b.pts)||C.castOption(a.textfont.color,b.pts)||c.color,e=C.castOption(a.outsidetextfont.family,b.pts)||C.castOption(a.textfont.family,b.pts)||c.family;a=C.castOption(a.outsidetextfont.size,b.pts)||C.castOption(a.textfont.size,b.pts)||c.size;
return{color:d,family:e,size:a}}function e(a,b,c){var d=C.castOption(a.insidetextfont.color,b.pts);!d&&a._input.textfont&&(d=C.castOption(a._input.textfont.color,b.pts));var e=C.castOption(a.insidetextfont.family,b.pts)||C.castOption(a.textfont.family,b.pts)||c.family;a=C.castOption(a.insidetextfont.size,b.pts)||C.castOption(a.textfont.size,b.pts)||c.size;return{color:d||x.contrast(b.color),family:e,size:a}}function f(a,b){for(var c=b._fullLayout,d,e,f=0;f<a.length;f++)if(d=a[f][0],e=d.trace,e.title.text){var g=
c.meta?z.templateString(e.title.text,{meta:c.meta}):e.title.text;e=D.tester.append("text").attr("data-notex",1).text(g).call(D.font,e.title.font).call(A.convertToTspans,b);g=D.bBox(e.node(),!0);d.titleBox={width:g.width,height:g.height};e.remove()}}function b(a,b,c){var d=a.width/a.height,e=b.halfangle,f=b.ring,g=b.rInscribed;c=c.r||b.rpx1;g={scale:g*c*2/Math.sqrt(a.width*a.width+a.height*a.height),rCenter:1-g,rotate:0};if(1<=g.scale)return g;var h=d+1/(2*Math.tan(e));h=c*Math.min(1/(Math.sqrt(h*
h+.5)+h),f/(Math.sqrt(d*d+f/2)+d));h={scale:2*h/a.height,rCenter:Math.cos(h/c)-h*d/c,rotate:(180/Math.PI*b.midangle+720)%180-90};var k=1/d;e=k+1/(2*Math.tan(e));f=c*Math.min(1/(Math.sqrt(e*e+.5)+e),f/(Math.sqrt(k*k+f/2)+k));a={scale:2*f/a.width,rCenter:Math.cos(f/c)-f/d/c,rotate:(180/Math.PI*b.midangle+810)%180-90};a=a.scale>h.scale?a:h;return 1>g.scale&&a.scale>g.scale?a:g}function n(a,b){var c=b.pxmid[0];b=b.pxmid[1];var d=a.width/2;a=a.height/2;0>c&&(d*=-1);0>b&&(a*=-1);return{scale:1,rCenter:1,
rotate:0,x:d+Math.abs(a)*(0<d?1:-1)/2,y:a/(1+c*c/(b*b)),outside:!0}}function q(a,b){var c=a.trace,e=a.cx,f=a.cy,g=0;var h=0+c.title.font.size;var k=d(c);-1!==c.title.position.indexOf("top")?(f-=(1+k)*a.r,h-=a.titleBox.height):-1!==c.title.position.indexOf("bottom")&&(f+=(1+k)*a.r);if(-1!==c.title.position.indexOf("left")){var n=b.w*(c.domain.x[1]-c.domain.x[0])/2+a.r;e-=(1+k)*a.r;g+=a.titleBox.width/2}else-1!==c.title.position.indexOf("center")?n=b.w*(c.domain.x[1]-c.domain.x[0]):-1!==c.title.position.indexOf("right")&&
(n=b.w*(c.domain.x[1]-c.domain.x[0])/2+a.r,e+=(1+k)*a.r,g-=a.titleBox.width/2);n/=a.titleBox.width;a=r(a,b)/a.titleBox.height;return{x:e,y:f,scale:Math.min(n,a),tx:g,ty:h}}function r(a,b){var c=a.trace;return Math.min(a.titleBox.height,b.h*(c.domain.y[1]-c.domain.y[0])/2)}function d(a){var b=a.pull,c;if(Array.isArray(b))for(c=b=0;c<a.pull.length;c++)a.pull[c]>b&&(b=a.pull[c]);return b}function g(a,b){function c(a,b){return a.pxmid[1]-b.pxmid[1]}function d(a,b){return b.pxmid[1]-a.pxmid[1]}function e(a,
c){c||(c={});var d=c.labelExtraY+(g?c.yLabelMax:c.yLabelMin);c=g?a.yLabelMin:a.yLabelMax;var e=g?a.yLabelMax:a.yLabelMin,f=a.cyFinal+n(a.px0[1],a.px1[1]),h=d-c;0<h*m&&(a.labelExtraY=h);if(Array.isArray(b.pull))for(d=0;d<t.length;d++){var k=t[d];k===a||(C.castOption(b.pull,a.pts)||0)>=(C.castOption(b.pull,k.pts)||0)||(0<(a.pxmid[1]-k.pxmid[1])*m?(h=k.cyFinal+n(k.px0[1],k.px1[1]),h=h-c-a.labelExtraY,0<h*m&&(a.labelExtraY+=h)):0<(e+a.labelExtraY-f)*m&&(h=3*p*Math.abs(d-t.indexOf(a)),k=k.cxFinal+l(k.px0[0],
k.px1[0]),h=k+h-(a.cxFinal+a.pxmid[0])-a.labelExtraX,0<h*p&&(a.labelExtraX+=h)))}}var f,g,h;for(g=0;2>g;g++){var k=g?c:d;var n=g?Math.max:Math.min;var m=g?1:-1;for(f=0;2>f;f++){var l=f?Math.max:Math.min;var p=f?1:-1;var q=a[g][f];q.sort(k);var r=a[1-g][f];var t=r.concat(q);var v=[];for(h=0;h<q.length;h++)void 0!==q[h].yLabelMid&&v.push(q[h]);q=!1;for(h=0;g&&h<r.length;h++)if(void 0!==r[h].yLabelMid){q=r[h];break}for(h=0;h<v.length;h++)r=h&&v[h-1],q&&!h&&(r=q),e(v[h],r)}}}function c(a,b){var c=[],
e;for(e=0;e<a.length;e++){var f=a[e][0];var g=f.trace;var h=b.w*(g.domain.x[1]-g.domain.x[0]);var k=b.h*(g.domain.y[1]-g.domain.y[0]);g.title.text&&"middle center"!==g.title.position&&(k-=r(f,b));var n=d(g);f.r=Math.min(h,k)/(2+2*n);f.cx=b.l+b.w*(g.domain.x[1]+g.domain.x[0])/2;f.cy=b.t+b.h*(1-g.domain.y[0])-k/2;g.title.text&&-1!==g.title.position.indexOf("bottom")&&(f.cy-=r(f,b));g.scalegroup&&-1===c.indexOf(g.scalegroup)&&c.push(g.scalegroup)}for(b=0;b<c.length;b++){k=Infinity;h=c[b];for(e=0;e<a.length;e++)f=
a[e][0],f.trace.scalegroup===h&&(k=Math.min(k,f.r*f.r/f.vTotal));for(e=0;e<a.length;e++)f=a[e][0],f.trace.scalegroup===h&&(f.r=Math.sqrt(k*f.vTotal))}}function v(a){function b(a){return[c.r*Math.sin(a),-c.r*Math.cos(a)]}var c=a[0],d=c.trace,e=d.rotation*Math.PI/180,f=2*Math.PI/c.vTotal,g="px0",h="px1",k;if("counterclockwise"===d.direction){for(k=0;k<a.length&&a[k].hidden;k++);if(k===a.length)return;e+=f*a[k].v;f*=-1;g="px1";h="px0"}var n=b(e);for(k=0;k<a.length;k++){var m=a[k];if(!m.hidden){m[g]=
n;e+=f*m.v/2;m.pxmid=b(e);m.midangle=e;e+=f*m.v/2;n=b(e);m[h]=n;m.largeArc=m.v>c.vTotal/2?1:0;m.halfangle=Math.PI*Math.min(m.v/c.vTotal,.5);m.ring=1-d.hole;var l=m;m=m.v!==c.vTotal||c.trace.hole?Math.min(1/(1+1/Math.sin(m.halfangle)),m.ring/2):1;l.rInscribed=m}}}var t=a("d3"),w=a("../../components/fx"),x=a("../../components/color"),D=a("../../components/drawing"),z=a("../../lib"),A=a("../../lib/svg_text_utils"),C=a("./helpers"),F=a("./event_data");p.exports={plot:function(a,d){var l=a._fullLayout;
f(d,a);c(d,l._size);var p=z.makeTraceGroups(l._pielayer,d,"trace").each(function(c){var d=t.select(this),f=c[0],p=f.trace;v(c);d.attr("stroke-linejoin","round");d.each(function(){var d=t.select(this).selectAll("g.slice").data(c);d.enter().append("g").classed("slice",!0);d.exit().remove();var r=[[[],[]],[[],[]]],v=!1;d.each(function(d){function g(a,b,c,e){return"a"+e*f.r+","+e*f.r+" 0 "+d.largeArc+(c?" 1 ":" 0 ")+e*(b[0]-a[0])+","+e*(b[1]-a[1])}if(d.hidden)t.select(this).selectAll("path,g").remove();
else{d.pointNumber=d.i;d.curveNumber=p.index;r[0>d.pxmid[1]?0:1][0>d.pxmid[0]?0:1].push(d);var m=f.cx,l=f.cy,q=t.select(this),u=q.selectAll("path.surface").data([d]);u.enter().append("path").classed("surface",!0).style({"pointer-events":"all"});q.call(k,a,c);if(p.pull){var w=+C.castOption(p.pull,d.pts)||0;0<w&&(m+=w*d.pxmid[0],l+=w*d.pxmid[1])}d.cxFinal=m;d.cyFinal=l;w=p.hole;if(d.v===f.vTotal){var x="M"+(m+d.px0[0])+","+(l+d.px0[1])+g(d.px0,d.pxmid,!0,1)+g(d.pxmid,d.px0,!0,1)+"Z";w?u.attr("d","M"+
(m+w*d.px0[0])+","+(l+w*d.px0[1])+g(d.px0,d.pxmid,!1,w)+g(d.pxmid,d.px0,!1,w)+"Z"+x):u.attr("d",x)}else if(x=g(d.px0,d.px1,!0,1),w){var y=1-w;u.attr("d","M"+(m+w*d.px1[0])+","+(l+w*d.px1[1])+g(d.px1,d.px0,!1,w)+"l"+y*d.px0[0]+","+y*d.px0[1]+x+"Z")}else u.attr("d","M"+m+","+l+"l"+d.px0[0]+","+d.px0[1]+x+"Z");var B=C.castOption(p.textposition,d.pts);q=q.selectAll("g.slicetext").data(d.text&&"none"!==B?[0]:[]);q.enter().append("g").classed("slicetext",!0);q.exit().remove();q.each(function(){var c=z.ensureSingle(t.select(this),
"text","",function(a){a.attr("data-notex",1)});c.text(d.text).attr({"class":"slicetext",transform:"","text-anchor":"middle"}).call(D.font,"outside"===B?h(p,d,a._fullLayout.font):e(p,d,a._fullLayout.font)).call(A.convertToTspans,a);var g=D.bBox(c.node());if("outside"===B)var k=n(g,d);else if(k=b(g,d,f),"auto"===B&&1>k.scale){c.call(D.font,p.outsidetextfont);if(p.outsidetextfont.family!==p.insidetextfont.family||p.outsidetextfont.size!==p.insidetextfont.size)g=D.bBox(c.node());k=n(g,d)}var q=m+d.pxmid[0]*
k.rCenter+(k.x||0),r=l+d.pxmid[1]*k.rCenter+(k.y||0);k.outside&&(d.yLabelMin=r-g.height/2,d.yLabelMid=r,d.yLabelMax=r+g.height/2,d.labelExtraX=0,d.labelExtraY=0,v=!0);c.attr("transform","translate("+q+","+r+")"+(1>k.scale?"scale("+k.scale+")":"")+(k.rotate?"rotate("+k.rotate+")":"")+"translate("+-(g.left+g.right)/2+","+-(g.top+g.bottom)/2+")")})}});var u=t.select(this).selectAll("g.titletext").data(p.title.text?[0]:[]);u.enter().append("g").classed("titletext",!0);u.exit().remove();u.each(function(){var b=
z.ensureSingle(t.select(this),"text","",function(a){a.attr("data-notex",1)}),c=l.meta?z.templateString(p.title.text,{meta:l.meta}):p.title.text;b.text(c).attr({"class":"titletext",transform:"","text-anchor":"middle"}).call(D.font,p.title.font).call(A.convertToTspans,a);c="middle center"===p.title.position?{x:f.cx,y:f.cy,scale:f.trace.hole*f.r*2/Math.sqrt(f.titleBox.width*f.titleBox.width+f.titleBox.height*f.titleBox.height),tx:0,ty:-f.titleBox.height/2+f.trace.title.font.size}:q(f,l._size);b.attr("transform",
"translate("+c.x+","+c.y+")"+(1>c.scale?"scale("+c.scale+")":"")+"translate("+c.tx+","+c.ty+")")});v&&g(r,p);m(d,p)})});setTimeout(function(){p.selectAll("tspan").each(function(){var a=t.select(this);a.attr("dy")&&a.attr("dy",a.attr("dy"))})},0)},transformInsideText:b}},{"../../components/color":577,"../../components/drawing":598,"../../components/fx":616,"../../lib":700,"../../lib/svg_text_utils":724,"./event_data":1030,"./helpers":1031,d3:154}],1036:[function(a,p,l){var m=a("d3"),k=a("./style_one");
p.exports=function(a){a._fullLayout._pielayer.selectAll(".trace").each(function(a){var e=a[0].trace;a=m.select(this);a.style({opacity:e.opacity});a.selectAll("path.surface").each(function(a){m.select(this).call(k,a,e)})})}},{"./style_one":1037,d3:154}],1037:[function(a,p,l){var m=a("../../components/color"),k=a("./helpers").castOption;p.exports=function(a,e,f){var b=f.marker.line;f=k(b.color,e.pts)||m.defaultLine;b=k(b.width,e.pts)||0;a.style({"stroke-width":b}).call(m.fill,e.color).call(m.stroke,
f)}},{"../../components/color":577,"./helpers":1031}],1038:[function(a,p,l){a=a("../scatter/attributes");p.exports={x:a.x,y:a.y,xy:{valType:"data_array",editType:"calc"},indices:{valType:"data_array",editType:"calc"},xbounds:{valType:"data_array",editType:"calc"},ybounds:{valType:"data_array",editType:"calc"},text:a.text,marker:{color:{valType:"color",arrayOk:!1,editType:"calc"},opacity:{valType:"number",min:0,max:1,dflt:1,arrayOk:!1,editType:"calc"},blend:{valType:"boolean",dflt:null,editType:"calc"},
sizemin:{valType:"number",min:.1,max:2,dflt:.5,editType:"calc"},sizemax:{valType:"number",min:.1,dflt:20,editType:"calc"},border:{color:{valType:"color",arrayOk:!1,editType:"calc"},arearatio:{valType:"number",min:0,max:1,dflt:0,editType:"calc"},editType:"calc"},editType:"calc"},transforms:void 0}},{"../scatter/attributes":1051}],1039:[function(a,p,l){function m(a,e){this.scene=a;this.uid=e;this.type="pointcloud";this.pickXData=[];this.pickYData=[];this.xData=[];this.yData=[];this.textLabels=[];this.color=
"rgb(0, 0, 0)";this.name="";this.hoverinfo="all";this.idToIndex=new Int32Array(0);this.bounds=[0,0,0,0];this.pointcloudOptions={positions:new Float32Array(0),idToIndex:this.idToIndex,sizemin:.5,sizemax:12,color:[0,0,0,1],areaRatio:1,borderColor:[0,0,0,1]};this.pointcloud=k(a.glplot,this.pointcloudOptions);this.pointcloud._trace=this}var k=a("gl-pointcloud2d"),h=a("../../lib/str2rgbarray"),e=a("../../plots/cartesian/autorange").findExtremes,f=a("../scatter/get_trace_color");a=m.prototype;a.handlePick=
function(a){var b=this.idToIndex[a.pointId];return{trace:this,dataCoord:a.dataCoord,traceCoord:this.pickXYData?[this.pickXYData[2*b],this.pickXYData[2*b+1]]:[this.pickXData[b],this.pickYData[b]],textLabel:Array.isArray(this.textLabels)?this.textLabels[b]:this.textLabels,color:this.color,name:this.name,pointIndex:b,hoverinfo:this.hoverinfo}};a.update=function(a){this.index=a.index;this.textLabels=a.text;this.name=a.name;this.hoverinfo=a.hoverinfo;this.bounds=[Infinity,Infinity,-Infinity,-Infinity];
this.updateFast(a);this.color=f(a,{})};a.updateFast=function(a){var b=this.xData=this.pickXData=a.x,f=this.yData=this.pickYData=a.y,k=this.pickXYData=a.xy,d=a.xbounds&&a.ybounds,g=a.indices,c=this.bounds,m;if(k){var l=k;k=k.length>>>1;if(d)c[0]=a.xbounds[0],c[2]=a.xbounds[1],c[1]=a.ybounds[0],c[3]=a.ybounds[1];else for(m=0;m<k;m++){d=l[2*m];var p=l[2*m+1];d<c[0]&&(c[0]=d);d>c[2]&&(c[2]=d);p<c[1]&&(c[1]=p);p>c[3]&&(c[3]=p)}if(!g)for(g=new Int32Array(k),m=0;m<k;m++)g[m]=m}else for(k=b.length,l=new Float32Array(2*
k),g=new Int32Array(k),m=0;m<k;m++)d=b[m],p=f[m],g[m]=m,l[2*m]=d,l[2*m+1]=p,d<c[0]&&(c[0]=d),d>c[2]&&(c[2]=d),p<c[1]&&(c[1]=p),p>c[3]&&(c[3]=p);this.idToIndex=g;this.pointcloudOptions.idToIndex=g;this.pointcloudOptions.positions=l;k=h(a.marker.color);l=h(a.marker.border.color);g=a.opacity*a.marker.opacity;k[3]*=g;this.pointcloudOptions.color=k;k=a.marker.blend;null===k&&(k=100>b.length||100>f.length);this.pointcloudOptions.blend=k;l[3]*=g;this.pointcloudOptions.borderColor=l;l=Math.max(a.marker.sizemax,
a.marker.sizemin);this.pointcloudOptions.sizeMin=a.marker.sizemin;this.pointcloudOptions.sizeMax=l;this.pointcloudOptions.areaRatio=a.marker.border.arearatio;this.pointcloud.update(this.pointcloudOptions);b=this.scene.xaxis;f=this.scene.yaxis;l=l/2||.5;a._extremes[b._id]=e(b,[c[0],c[2]],{ppad:l});a._extremes[f._id]=e(f,[c[1],c[3]],{ppad:l})};a.dispose=function(){this.pointcloud.dispose()};p.exports=function(a,e){a=new m(a,e.uid);a.update(e);return a}},{"../../lib/str2rgbarray":723,"../../plots/cartesian/autorange":747,
"../scatter/get_trace_color":1061,"gl-pointcloud2d":288}],1040:[function(a,p,l){var m=a("../../lib"),k=a("./attributes");p.exports=function(a,e,f){function b(b,f){return m.coerce(a,e,k,b,f)}b("x");b("y");b("xbounds");b("ybounds");a.xy&&a.xy instanceof Float32Array&&(e.xy=a.xy);a.indices&&a.indices instanceof Int32Array&&(e.indices=a.indices);b("text");b("marker.color",f);b("marker.opacity");b("marker.blend");b("marker.sizemin");b("marker.sizemax");b("marker.border.color",f);b("marker.border.arearatio");
e._length=null}},{"../../lib":700,"./attributes":1038}],1041:[function(a,p,l){l={};l.attributes=a("./attributes");l.supplyDefaults=a("./defaults");l.calc=a("../scatter3d/calc");l.plot=a("./convert");l.moduleType="trace";l.name="pointcloud";l.basePlotModule=a("../../plots/gl2d");l.categories=["gl","gl2d","showLegend"];l.meta={};p.exports=l},{"../../plots/gl2d":787,"../scatter3d/calc":1079,"./attributes":1038,"./convert":1039,"./defaults":1040}],1042:[function(a,p,l){l=a("../../plots/font_attributes");
var m=a("../../plots/attributes"),k=a("../../components/color/attributes"),h=a("../../components/fx/attributes"),e=a("../../plots/domain").attributes,f=a("../../components/fx/hovertemplate_attributes"),b=a("../../components/colorscale/attributes"),n=a("../../plot_api/plot_template").templatedArray,q=a("../../lib/extend").extendFlat;a=a("../../plot_api/edit_types").overrideAll;(p.exports=a({hoverinfo:q({},m.hoverinfo,{flags:[],arrayOk:!1}),hoverlabel:h.hoverlabel,domain:e({name:"sankey",trace:!0}),
orientation:{valType:"enumerated",values:["v","h"],dflt:"h"},valueformat:{valType:"string",dflt:".3s"},valuesuffix:{valType:"string",dflt:""},arrangement:{valType:"enumerated",values:["snap","perpendicular","freeform","fixed"],dflt:"snap"},textfont:l({}),node:{label:{valType:"data_array",dflt:[]},groups:{valType:"info_array",impliedEdits:{x:[],y:[]},dimensions:2,freeLength:!0,dflt:[],items:{valType:"number",editType:"calc"}},x:{valType:"data_array",dflt:[]},y:{valType:"data_array",dflt:[]},color:{valType:"color",
arrayOk:!0},line:{color:{valType:"color",dflt:k.defaultLine,arrayOk:!0},width:{valType:"number",min:0,dflt:.5,arrayOk:!0}},pad:{valType:"number",arrayOk:!1,min:0,dflt:20},thickness:{valType:"number",arrayOk:!1,min:1,dflt:20},hoverinfo:{valType:"enumerated",values:["all","none","skip"],dflt:"all"},hoverlabel:h.hoverlabel,hovertemplate:f({},{keys:["value","label"]})},link:{label:{valType:"data_array",dflt:[]},color:{valType:"color",arrayOk:!0},line:{color:{valType:"color",dflt:k.defaultLine,arrayOk:!0},
width:{valType:"number",min:0,dflt:0,arrayOk:!0}},source:{valType:"data_array",dflt:[]},target:{valType:"data_array",dflt:[]},value:{valType:"data_array",dflt:[]},hoverinfo:{valType:"enumerated",values:["all","none","skip"],dflt:"all"},hoverlabel:h.hoverlabel,hovertemplate:f({},{keys:["value","label"]}),colorscales:n("concentrationscales",{editType:"calc",label:{valType:"string",editType:"calc",dflt:""},cmax:{valType:"number",editType:"calc",dflt:1},cmin:{valType:"number",editType:"calc",dflt:0},
colorscale:q(b().colorscale,{dflt:[[0,"white"],[1,"black"]]})})}},"calc","nested")).transforms=void 0},{"../../components/color/attributes":576,"../../components/colorscale/attributes":584,"../../components/fx/attributes":607,"../../components/fx/hovertemplate_attributes":615,"../../lib/extend":690,"../../plot_api/edit_types":731,"../../plot_api/plot_template":738,"../../plots/attributes":745,"../../plots/domain":773,"../../plots/font_attributes":774}],1043:[function(a,p,l){p=a("../../plot_api/edit_types").overrideAll;
var m=a("../../plots/get_data").getModuleCalcData,k=a("./plot");a=a("../../components/fx/layout_attributes");l.name="sankey";l.baseLayoutAttrOverrides=p({hoverlabel:a.hoverlabel},"plot","nested");l.plot=function(a){var e=m(a.calcdata,"sankey")[0];k(a,e)};l.clean=function(a,e,f,b){a=b._has&&b._has("sankey");e=e._has&&e._has("sankey");a&&!e&&b._paperdiv.selectAll(".sankey").remove()}},{"../../components/fx/layout_attributes":617,"../../plot_api/edit_types":731,"../../plots/get_data":784,"./plot":1048}],
1044:[function(a,p,l){function m(a,b,d){for(var e=h.init2dArray(a,0),c=0;c<Math.min(b.length,d.length);c++)if(h.isIndex(b[c],a)&&h.isIndex(d[c],a)){if(b[c]===d[c])return!0;e[b[c]].push(d[c])}return k(e).components.some(function(a){return 1<a.length})}var k=a("strongly-connected-components"),h=a("../../lib"),e=a("../../lib/gup").wrap,f=h.isArrayOrTypedArray,b=h.isIndex,n=a("../../components/colorscale");p.exports=function(a,k){var d=k.node,g=k.link;a=[];var c=f(g.color),l={},p={},q=g.colorscales.length,
r;for(r=0;r<q;r++){var u=g.colorscales[r],w=n.extractScale(u,{cLetter:"c"});w=n.makeColorScaleFunc(w);p[u.label]=w}for(r=q=0;r<g.value.length;r++)g.source[r]>q&&(q=g.source[r]),g.target[r]>q&&(q=g.target[r]);q+=1;k=k.node.groups;u={};for(r=0;r<k.length;r++){var x=k[r];for(w=0;w<x.length;w++){var C=x[w],z=q+r;u.hasOwnProperty(C)?h.warn("Node "+C+" is already part of a group."):u[C]=z}}w=[];x=[];for(r=0;r<g.value.length;r++){C=g.value[r];z=g.source[r];var F=g.target[r];if(0<C&&b(z,q)&&b(F,q)&&(!u.hasOwnProperty(z)||
!u.hasOwnProperty(F)||u[z]!==u[F])){u.hasOwnProperty(F)&&(F=u[F]);u.hasOwnProperty(z)&&(z=u[z]);z=+z;F=+F;l[z]=l[F]=!0;var E="";g.label&&g.label[r]&&(E=g.label[r]);var H=null;E&&p.hasOwnProperty(E)&&(H=p[E]);a.push({pointNumber:r,label:E,color:c?g.color[r]:g.color,concentrationscale:H,source:z,target:F,value:+C});w.push(z);x.push(F)}}g=q+k.length;p=f(d.color);c=[];for(r=0;r<g;r++)l[r]&&c.push({group:r>q-1,childrenNodes:[],pointNumber:r,label:d.label[r],color:p?d.color[r]:d.color});d=!1;m(g,w,x)&&
(d=!0);return e({circular:d,_nodes:c,_links:a,_groups:k,_groupLookup:u})}},{"../../components/colorscale":589,"../../lib":700,"../../lib/gup":698,"strongly-connected-components":514}],1045:[function(a,p,l){p.exports={nodeTextOffsetHorizontal:4,nodeTextOffsetVertical:3,nodePadAcross:10,sankeyIterations:50,forceIterations:5,forceTicksPerFrame:10,duration:500,ease:"linear",cn:{sankey:"sankey",sankeyLinks:"sankey-links",sankeyLink:"sankey-link",sankeyNodeSet:"sankey-node-set",sankeyNode:"sankey-node",
nodeRect:"node-rect",nodeCapture:"node-capture",nodeCentered:"node-entered",nodeLabelGuide:"node-label-guide",nodeLabel:"node-label",nodeLabelTextPath:"node-label-text-path"}}},{}],1046:[function(a,p,l){function m(a,b){function c(c,d){return k.coerce(a,b,h.link.colorscales,c,d)}c("label");c("cmin");c("cmax");c("colorscale")}var k=a("../../lib"),h=a("./attributes"),e=a("../../components/color"),f=a("tinycolor2"),b=a("../../plots/domain").defaults,n=a("../../components/fx/hoverlabel_defaults"),q=a("../../plot_api/plot_template"),
r=a("../../plots/array_container_defaults");p.exports=function(a,g,c,l){function d(b,c){return k.coerce(a,g,h,b,c)}function p(a,b){return k.coerce(u,w,h.node,a,b)}function v(a,b){return k.coerce(C,z,h.link,a,b)}c=k.extendDeep(l.hoverlabel,a.hoverlabel);var u=a.node,w=q.newContainer(g,"node");p("label");p("groups");p("x");p("y");p("pad");p("thickness");p("line.color");p("line.width");p("hoverinfo",a.hoverinfo);n(u,w,p,c);p("hovertemplate");var x=l.colorway;p("color",w.label.map(function(a,b){return e.addOpacity(x[b%
x.length],.8)}));var C=a.link||{},z=q.newContainer(g,"link");v("label");v("source");v("target");v("value");v("line.color");v("line.width");v("hoverinfo",a.hoverinfo);n(C,z,v,c);v("hovertemplate");c=.333>f(l.paper_bgcolor).getLuminance()?"rgba(255, 255, 255, 0.6)":"rgba(0, 0, 0, 0.2)";v("color",k.repeat(c,z.value.length));r(C,z,{name:"colorscales",handleItemDefaults:m});b(g,l,d);d("orientation");d("valueformat");d("valuesuffix");var F;w.x.length&&w.y.length&&(F="freeform");d("arrangement",F);k.coerceFont(d,
"textfont",k.extendFlat({},l.font));g._length=null}},{"../../components/color":577,"../../components/fx/hoverlabel_defaults":614,"../../lib":700,"../../plot_api/plot_template":738,"../../plots/array_container_defaults":744,"../../plots/domain":773,"./attributes":1042,tinycolor2:521}],1047:[function(a,p,l){l={};l.attributes=a("./attributes");l.supplyDefaults=a("./defaults");l.calc=a("./calc");l.plot=a("./plot");l.moduleType="trace";l.name="sankey";l.basePlotModule=a("./base_plot");l.categories=["noOpacity"];
l.meta={};p.exports=l},{"./attributes":1042,"./base_plot":1043,"./calc":1044,"./defaults":1046,"./plot":1048}],1048:[function(a,p,l){function m(a){return""!==a}function k(a,b){return a.filter(function(a){return a.key===b.traceId})}function h(a,b){c.select(a).select("path").style("fill-opacity",b);c.select(a).select("rect").style("fill-opacity",b)}function e(a){c.select(a).select("text.name").style("fill","black")}function f(a){return function(b){return-1!==a.node.sourceLinks.indexOf(b.link)||-1!==
a.node.targetLinks.indexOf(b.link)}}function b(a){return function(b){return-1!==b.node.sourceLinks.indexOf(a.link)||-1!==b.node.targetLinks.indexOf(a.link)}}function n(a,b,c){b&&c&&k(c,b).selectAll("."+D.sankeyLink).filter(f(b)).call(r.bind(0,b,c,!1))}function q(a,b,c){b&&c&&k(c,b).selectAll("."+D.sankeyLink).filter(f(b)).call(d.bind(0,b,c,!1))}function r(a,c,d,e){var f=e.datum().link.label;e.style("fill-opacity",function(a){if(!a.link.concentrationscale)return.4});f&&k(c,a).selectAll("."+D.sankeyLink).filter(function(a){return a.link.label===
f}).style("fill-opacity",function(a){if(!a.link.concentrationscale)return.4});d&&k(c,a).selectAll("."+D.sankeyNode).filter(b(a)).call(n)}function d(a,c,d,e){var f=e.datum().link.label;e.style("fill-opacity",function(a){return a.tinyColorAlpha});f&&k(c,a).selectAll("."+D.sankeyLink).filter(function(a){return a.link.label===f}).style("fill-opacity",function(a){return a.tinyColorAlpha});d&&k(c,a).selectAll(D.sankeyNode).filter(b(a)).call(q)}function g(a,b){a=x.nestedProperty(a.hoverlabel||{},b).get();
return Array.isArray(a)?!1:a}var c=a("d3"),v=a("./render"),t=a("../../components/fx"),w=a("../../components/color"),x=a("../../lib"),D=a("./constants").cn,z=x._;p.exports=function(a,b){var f=a._fullLayout,k=f._paper,l=f._size,p=z(a,"source:")+" ",u=z(a,"target:")+" ",x=z(a,"concentration:")+" ",y=z(a,"incoming flow count:")+" ",A=z(a,"outgoing flow count:")+" ";v(a,k,b,{width:l.w,height:l.h,margin:{t:l.t,r:l.r,b:l.b,l:l.l}},{linkEvents:{hover:function(b,d,e){!1!==a._fullLayout.hovermode&&(c.select(b).call(r.bind(0,
d,e,!0)),"skip"!==d.link.trace.link.hoverinfo&&(d.link.fullData=d.link.trace,a.emit("plotly_hover",{event:c.event,points:[d.link]})))},follow:function(b,d){if(!1!==a._fullLayout.hovermode){var k=d.link.trace.link;if("none"!==k.hoverinfo&&"skip"!==k.hoverinfo){var n=a._fullLayout._paperdiv.node().getBoundingClientRect();if(d.link.circular)b=(d.link.circularPathData.leftInnerExtent+d.link.circularPathData.rightInnerExtent)/2+d.parent.translateX,n=d.link.circularPathData.verticalFullExtent+d.parent.translateY;
else{var l=b.getBoundingClientRect();b=l.left+l.width/2-n.left;n=l.top+l.height/2-n.top}l={valueLabel:c.format(d.valueFormat)(d.link.value)+d.valueSuffix};d.link.fullData=d.link.trace;k=t.loneHover({x:b,y:n,name:l.valueLabel,text:[d.link.label||"",p+d.link.source.label,u+d.link.target.label,d.link.concentrationscale?x+c.format("%0.2f")(d.link.flow.labelConcentration):""].filter(m).join("\x3cbr\x3e"),color:g(k,"bgcolor")||w.addOpacity(d.tinyColorHue,1),borderColor:g(k,"bordercolor"),fontFamily:g(k,
"font.family"),fontSize:g(k,"font.size"),fontColor:g(k,"font.color"),idealAlign:c.event.x<b?"right":"left",hovertemplate:k.hovertemplate,hovertemplateLabels:l,eventData:[d.link]},{container:f._hoverlayer.node(),outerContainer:f._paper.node(),gd:a});d.link.concentrationscale||h(k,.65);e(k)}}},unhover:function(b,e,g){!1!==a._fullLayout.hovermode&&(c.select(b).call(d.bind(0,e,g,!0)),"skip"!==e.link.trace.link.hoverinfo&&(e.link.fullData=e.link.trace,a.emit("plotly_unhover",{event:c.event,points:[e.link]})),
t.loneUnhover(f._hoverlayer.node()))},select:function(b,d){b=d.link;b.originalEvent=c.event;a._hoverdata=[b];t.click(a,{target:!0})}},nodeEvents:{hover:function(b,d,e){!1!==a._fullLayout.hovermode&&(c.select(b).call(n,d,e),"skip"!==d.node.trace.node.hoverinfo&&(d.node.fullData=d.node.trace,a.emit("plotly_hover",{event:c.event,points:[d.node]})))},follow:function(b,d){if(!1!==a._fullLayout.hovermode){var k=d.node.trace.node;if("none"!==k.hoverinfo&&"skip"!==k.hoverinfo){b=c.select(b).select("."+D.nodeRect);
var n=a._fullLayout._paperdiv.node().getBoundingClientRect(),l=b.node().getBoundingClientRect();b=l.left-2-n.left;var p=l.right+2-n.left;n=l.top+l.height/4-n.top;l={valueLabel:c.format(d.valueFormat)(d.node.value)+d.valueSuffix};d.node.fullData=d.node.trace;d=t.loneHover({x0:b,x1:p,y:n,name:c.format(d.valueFormat)(d.node.value)+d.valueSuffix,text:[d.node.label,y+d.node.targetLinks.length,A+d.node.sourceLinks.length].filter(m).join("\x3cbr\x3e"),color:g(k,"bgcolor")||d.tinyColorHue,borderColor:g(k,
"bordercolor"),fontFamily:g(k,"font.family"),fontSize:g(k,"font.size"),fontColor:g(k,"font.color"),idealAlign:"left",hovertemplate:k.hovertemplate,hovertemplateLabels:l,eventData:[d.node]},{container:f._hoverlayer.node(),outerContainer:f._paper.node(),gd:a});h(d,.85);e(d)}}},unhover:function(b,d,e){!1!==a._fullLayout.hovermode&&(c.select(b).call(q,d,e),"skip"!==d.node.trace.node.hoverinfo&&(d.node.fullData=d.node.trace,a.emit("plotly_unhover",{event:c.event,points:[d.node]})),t.loneUnhover(f._hoverlayer.node()))},
select:function(b,d,e){var f=d.node;f.originalEvent=c.event;a._hoverdata=[f];c.select(b).call(q,d,e);t.click(a,{target:!0})}}})}},{"../../components/color":577,"../../components/fx":616,"../../lib":700,"./constants":1045,"./render":1049,d3:154}],1049:[function(a,p,l){function m(a,b,c){function d(a){a.forEach(function(a){var b=0;var c=a.length,d;a.sort(function(a,b){return a.y0-b.y0});for(d=0;d<c;++d){var e=a[d];e.y0>=b||(b-=e.y0,1E-6<b&&(e.y0+=b,e.y1+=b));b=e.y1+k}})}function e(a){var b=a.map(function(a,
b){return{x0:a.x0,index:b}}).sort(function(a,b){return a.x0-b.x0}),c=[],d=-1,e=-Infinity;for(u=0;u<b.length;u++){var f=a[b[u].index];if(f.x0>e+n){d+=1;var g=f.x0}e=f.x0;c[d]||(c[d]=[]);c[d].push(f);var h=g-f.x0;f.x0+=h;f.x1+=h}return c}var f=ia(b);b=f.trace;var g=b.domain,h="h"===b.orientation,k=b.node.pad,n=b.node.thickness,m=a.width*(g.x[1]-g.x[0]),l=a.height*(g.y[1]-g.y[0]),p=f._nodes,q=f._links,r=f.circular;var t=r?R.sankeyCircular().circularLinkGap(0):L.sankey();t.iterations(M.sankeyIterations).size(h?
[m,l]:[l,m]).nodeWidth(n).nodePadding(k).nodeId(function(a){return a.pointNumber}).nodes(p).links(q);var v=t();t.nodePadding()<k&&U.warn("node.pad was reduced to ",t.nodePadding()," to fit within the figure.");var u,w,x;for(A in f._groupLookup){p=parseInt(f._groupLookup[A]);for(u=0;u<v.nodes.length;u++)if(v.nodes[u].pointNumber===p){var y=v.nodes[u];break}y&&(p={pointNumber:parseInt(A),x0:y.x0,x1:y.x1,y0:y.y0,y1:y.y1,partOfGroup:!0,sourceLinks:[],targetLinks:[]},v.nodes.unshift(p),y.childrenNodes.unshift(p))}(function(){for(u=
0;u<v.nodes.length;u++){var a=v.nodes[u],b={};for(w=0;w<a.targetLinks.length;w++){var c=a.targetLinks[w];var d=c.source.pointNumber+":"+c.target.pointNumber;b.hasOwnProperty(d)||(b[d]=[]);b[d].push(c)}var e=Object.keys(b);for(w=0;w<e.length;w++){d=e[w];d=b[d];var f=0,g={};for(x=0;x<d.length;x++)c=d[x],g[c.label]||(g[c.label]=0),g[c.label]+=c.value,f+=c.value;for(x=0;x<d.length;x++)c=d[x],c.flow={value:f,labelConcentration:g[c.label]/f,concentration:c.value/f,links:d}}for(w=b=0;w<a.sourceLinks.length;w++)b+=
a.sourceLinks[w].value;for(w=0;w<a.sourceLinks.length;w++)c=a.sourceLinks[w],c.concentrationOut=c.value/b;for(w=b=0;w<a.targetLinks.length;w++)b+=a.targetLinks[w].value;for(w=0;w<a.targetLinks.length;w++)c=a.targetLinks[w],c.concenrationIn=c.value/b}})();if(b.node.x.length&&b.node.y.length){for(u=0;u<Math.min(b.node.x.length,b.node.y.length,v.nodes.length);u++)if(b.node.x[u]&&b.node.y[u]){var A=[b.node.x[u]*m,b.node.y[u]*l];v.nodes[u].x0=A[0]-n/2;v.nodes[u].x1=A[0]+n/2;y=v.nodes[u].y1-v.nodes[u].y0;
v.nodes[u].y0=A[1]-y/2;v.nodes[u].y1=A[1]+y/2}"snap"===b.arrangement&&(p=v.nodes,A=e(p),d(A));t.update(v)}return{circular:r,key:c,trace:b,guid:U.randstr(),horizontal:h,width:m,height:l,nodePad:b.node.pad,nodeLineColor:b.node.line.color,nodeLineWidth:b.node.line.width,linkLineColor:b.link.line.color,linkLineWidth:b.link.line.width,valueFormat:b.valueformat,valueSuffix:b.valuesuffix,textFont:b.textfont,translateX:g.x[0]*a.width+a.margin.l,translateY:a.height-g.y[1]*a.height+a.margin.t,dragParallel:h?
l:m,dragPerpendicular:h?m:l,arrangement:b.arrangement,sankey:t,graph:v,forceLayouts:{},interactionState:{dragInProgress:!1,hovered:!1}}}function k(a,b,c){var d=I(b.color);b.concentrationscale&&(d=I(b.concentrationscale(b.flow.labelConcentration)));var e=b.source.label+"|"+b.target.label;b.trace=a.trace;b.curveNumber=a.trace.index;return{circular:a.circular,key:e+"__"+c,traceId:a.key,pointNumber:b.pointNumber,link:b,tinyColorHue:K.tinyRGB(d),tinyColorAlpha:d.getAlpha(),linkPath:h,linkLineColor:a.linkLineColor,
linkLineWidth:a.linkLineWidth,valueFormat:a.valueFormat,valueSuffix:a.valueSuffix,sankey:a.sankey,parent:a,interactionState:a.interactionState,flow:b.flow}}function h(){return function(a){if(a.link.circular){var b=a.link,c=b.width/2,d=b.circularPathData;return"top"===b.circularLinkType?"M "+d.targetX+" "+(d.targetY+c)+" L"+d.rightInnerExtent+" "+(d.targetY+c)+"A"+(d.rightLargeArcRadius+c)+" "+(d.rightSmallArcRadius+c)+" 0 0 1 "+(d.rightFullExtent-c)+" "+(d.targetY-d.rightSmallArcRadius)+"L"+(d.rightFullExtent-
c)+" "+d.verticalRightInnerExtent+"A"+(d.rightLargeArcRadius+c)+" "+(d.rightLargeArcRadius+c)+" 0 0 1 "+d.rightInnerExtent+" "+(d.verticalFullExtent-c)+"L"+d.leftInnerExtent+" "+(d.verticalFullExtent-c)+"A"+(d.leftLargeArcRadius+c)+" "+(d.leftLargeArcRadius+c)+" 0 0 1 "+(d.leftFullExtent+c)+" "+d.verticalLeftInnerExtent+"L"+(d.leftFullExtent+c)+" "+(d.sourceY-d.leftSmallArcRadius)+"A"+(d.leftLargeArcRadius+c)+" "+(d.leftSmallArcRadius+c)+" 0 0 1 "+d.leftInnerExtent+" "+(d.sourceY+c)+"L"+d.sourceX+
" "+(d.sourceY+c)+"L"+d.sourceX+" "+(d.sourceY-c)+"L"+d.leftInnerExtent+" "+(d.sourceY-c)+"A"+(d.leftLargeArcRadius-c)+" "+(d.leftSmallArcRadius-c)+" 0 0 0 "+(d.leftFullExtent-c)+" "+(d.sourceY-d.leftSmallArcRadius)+"L"+(d.leftFullExtent-c)+" "+d.verticalLeftInnerExtent+"A"+(d.leftLargeArcRadius-c)+" "+(d.leftLargeArcRadius-c)+" 0 0 0 "+d.leftInnerExtent+" "+(d.verticalFullExtent+c)+"L"+d.rightInnerExtent+" "+(d.verticalFullExtent+c)+"A"+(d.rightLargeArcRadius-c)+" "+(d.rightLargeArcRadius-c)+" 0 0 0 "+
(d.rightFullExtent+c)+" "+d.verticalRightInnerExtent+"L"+(d.rightFullExtent+c)+" "+(d.targetY-d.rightSmallArcRadius)+"A"+(d.rightLargeArcRadius-c)+" "+(d.rightSmallArcRadius-c)+" 0 0 0 "+d.rightInnerExtent+" "+(d.targetY-c)+"L"+d.targetX+" "+(d.targetY-c)+"Z":"M "+d.targetX+" "+(d.targetY-c)+" L"+d.rightInnerExtent+" "+(d.targetY-c)+"A"+(d.rightLargeArcRadius+c)+" "+(d.rightSmallArcRadius+c)+" 0 0 0 "+(d.rightFullExtent-c)+" "+(d.targetY+d.rightSmallArcRadius)+"L"+(d.rightFullExtent-c)+" "+d.verticalRightInnerExtent+
"A"+(d.rightLargeArcRadius+c)+" "+(d.rightLargeArcRadius+c)+" 0 0 0 "+d.rightInnerExtent+" "+(d.verticalFullExtent+c)+"L"+d.leftInnerExtent+" "+(d.verticalFullExtent+c)+"A"+(d.leftLargeArcRadius+c)+" "+(d.leftLargeArcRadius+c)+" 0 0 0 "+(d.leftFullExtent+c)+" "+d.verticalLeftInnerExtent+"L"+(d.leftFullExtent+c)+" "+(d.sourceY+d.leftSmallArcRadius)+"A"+(d.leftLargeArcRadius+c)+" "+(d.leftSmallArcRadius+c)+" 0 0 0 "+d.leftInnerExtent+" "+(d.sourceY-c)+"L"+d.sourceX+" "+(d.sourceY-c)+"L"+d.sourceX+" "+
(d.sourceY+c)+"L"+d.leftInnerExtent+" "+(d.sourceY+c)+"A"+(d.leftLargeArcRadius-c)+" "+(d.leftSmallArcRadius-c)+" 0 0 1 "+(d.leftFullExtent-c)+" "+(d.sourceY+d.leftSmallArcRadius)+"L"+(d.leftFullExtent-c)+" "+d.verticalLeftInnerExtent+"A"+(d.leftLargeArcRadius-c)+" "+(d.leftLargeArcRadius-c)+" 0 0 1 "+d.leftInnerExtent+" "+(d.verticalFullExtent-c)+"L"+d.rightInnerExtent+" "+(d.verticalFullExtent-c)+"A"+(d.rightLargeArcRadius-c)+" "+(d.rightLargeArcRadius-c)+" 0 0 1 "+(d.rightFullExtent+c)+" "+d.verticalRightInnerExtent+
"L"+(d.rightFullExtent+c)+" "+(d.targetY+d.rightSmallArcRadius)+"A"+(d.rightLargeArcRadius-c)+" "+(d.rightSmallArcRadius-c)+" 0 0 1 "+d.rightInnerExtent+" "+(d.targetY+c)+"L"+d.targetX+" "+(d.targetY+c)+"Z"}b=a.link.source.x1;c=a.link.target.x0;var e=S(b,c);d=e(.5);e=e(.5);var f=a.link.y0-a.link.width/2,g=a.link.y0+a.link.width/2,h=a.link.y1-a.link.width/2;a=a.link.y1+a.link.width/2;return"M"+b+","+f+"C"+d+","+f+" "+e+","+h+" "+c+","+h+"L"+c+","+a+"C"+e+","+a+" "+d+","+g+" "+b+","+g+"Z"}}function e(a,
b){var c=I(b.color),d=M.nodePadAcross,e=a.nodePad/2;b.dx=b.x1-b.x0;b.dy=b.y1-b.y0;var f=b.dx,g=Math.max(.5,b.dy),h="node_"+b.pointNumber;b.group&&(h=U.randstr());b.trace=a.trace;b.curveNumber=a.trace.index;return{index:b.pointNumber,key:h,partOfGroup:b.partOfGroup||!1,group:b.group,traceId:a.key,trace:a.trace,node:b,nodePad:a.nodePad,nodeLineColor:a.nodeLineColor,nodeLineWidth:a.nodeLineWidth,textFont:a.textFont,size:a.horizontal?a.height:a.width,visibleWidth:Math.ceil(f),visibleHeight:g,zoneX:-d,
zoneY:-e,zoneWidth:f+2*d,zoneHeight:g+2*e,labelY:a.horizontal?b.dy/2+1:b.dx/2+1,left:1===b.originalLayer,sizeAcross:a.width,forceLayouts:a.forceLayouts,horizontal:a.horizontal,darkBackground:128>=c.getBrightness(),tinyColorHue:K.tinyRGB(c),tinyColorAlpha:c.getAlpha(),valueFormat:a.valueFormat,valueSuffix:a.valueSuffix,sankey:a.sankey,graph:a.graph,arrangement:a.arrangement,uniqueNodeLabelPathId:[a.guid,a.key,h].join("_"),interactionState:a.interactionState,figure:a}}function f(a){a.attr("transform",
function(a){return"translate("+a.node.x0.toFixed(3)+", "+a.node.y0.toFixed(3)+")"})}function b(a){a.call(f)}function n(a){a.attr("width",function(a){return a.node.x1-a.node.x0}).attr("height",function(a){return a.visibleHeight})}function q(a){return"translate("+a.translateX+","+a.translateY+")"+(a.horizontal?"matrix(1 0 0 1 0 0)":"matrix(0 1 1 0 0 0)")}function r(a){return"translate("+(a.horizontal?0:a.labelY)+" "+(a.horizontal?a.labelY:0)+")"}function d(a){return O.svg.line()([[a.horizontal?a.left?
-a.sizeAcross:a.visibleWidth+M.nodeTextOffsetHorizontal:M.nodeTextOffsetHorizontal,0],[a.horizontal?a.left?-M.nodeTextOffsetHorizontal:a.sizeAcross:a.visibleHeight-M.nodeTextOffsetHorizontal,0]])}function g(a){return a.horizontal?"matrix(1 0 0 1 0 0)":"matrix(0 1 1 0 0 0)"}function c(a){return a.horizontal?"scale(1 1)":"scale(-1 1)"}function v(a){return a.darkBackground&&!a.horizontal?"rgb(255,255,255)":"rgb(0,0,0)"}function t(a){return a.horizontal&&a.left?"100%":"0%"}function w(a,b,c){a.on(".basic",
null).on("mouseover.basic",function(a){a.interactionState.dragInProgress||a.partOfGroup||(c.hover(this,a,b),a.interactionState.hovered=[this,a])}).on("mousemove.basic",function(a){a.interactionState.dragInProgress||a.partOfGroup||(c.follow(this,a),a.interactionState.hovered=[this,a])}).on("mouseout.basic",function(a){a.interactionState.dragInProgress||a.partOfGroup||(c.unhover(this,a,b),a.interactionState.hovered=!1)}).on("click.basic",function(a){a.interactionState.hovered&&(c.unhover(this,a,b),
a.interactionState.hovered=!1);a.interactionState.dragInProgress||a.partOfGroup||c.select(this,a,b)})}function x(a,c,d,e){var f=O.behavior.drag().origin(function(a){return{x:a.node.x0+a.visibleWidth/2,y:a.node.y0+a.visibleHeight/2}}).on("dragstart",function(b){if("fixed"!==b.arrangement&&(U.ensureSingle(e._fullLayout._infolayer,"g","dragcover",function(a){e._fullLayout._dragCover=a}),U.raiseToTop(this),b.interactionState.dragInProgress=b.node,J(b.node),b.interactionState.hovered&&(d.nodeEvents.unhover.apply(0,
b.interactionState.hovered),b.interactionState.hovered=!1),"snap"===b.arrangement)){var f=b.traceId+"|"+b.key;b.forceLayouts[f]?b.forceLayouts[f].alpha(1):D(a,f,b,e);z(a,c,b,f,e)}}).on("drag",function(d){if("fixed"!==d.arrangement){var e=O.event.x,f=O.event.y;"snap"===d.arrangement?(d.node.x0=e-d.visibleWidth/2,d.node.x1=e+d.visibleWidth/2):("freeform"===d.arrangement&&(d.node.x0=e-d.visibleWidth/2,d.node.x1=e+d.visibleWidth/2),f=Math.max(0,Math.min(d.size-d.visibleHeight/2,f)));d.node.y0=f-d.visibleHeight/
2;d.node.y1=f+d.visibleHeight/2;J(d.node);"snap"!==d.arrangement&&(d.sankey.update(d.graph),a.filter(E(d)).call(b),c.attr("d",h()))}}).on("dragend",function(a){if("fixed"!==a.arrangement){a.interactionState.dragInProgress=!1;for(var b=0;b<a.node.childrenNodes.length;b++)a.node.childrenNodes[b].x=a.node.x,a.node.childrenNodes[b].y=a.node.y;"snap"!==a.arrangement&&C(a,e)}});a.on(".drag",null).call(f)}function D(a,b,c,d){H(c.graph.nodes);var e=c.graph.nodes.filter(function(a){return a.originalX===c.node.originalX}).filter(function(a){return!a.partOfGroup});
c.forceLayouts[b]=ca.forceSimulation(e).alphaDecay(0).force("collide",ca.forceCollide().radius(function(a){return a.dy/2+c.nodePad/2}).strength(1).iterations(M.forceIterations)).force("constrain",A(a,b,e,c,d)).stop()}function z(a,c,d,e,f){window.requestAnimationFrame(function Z(){var g;for(g=0;g<M.forceTicksPerFrame;g++)d.forceLayouts[e].tick();g=d.graph.nodes;for(var k=0;k<g.length;k++)g[k].y0=g[k].y-g[k].dy/2,g[k].y1=g[k].y0+g[k].dy,g[k].x0=g[k].x-g[k].dx/2,g[k].x1=g[k].x0+g[k].dx;d.sankey.update(d.graph);
a.filter(E(d)).call(b);c.attr("d",h());0<d.forceLayouts[e].alpha()?window.requestAnimationFrame(Z):(g=d.node.originalX,d.node.x0=g-d.visibleWidth/2,d.node.x1=g+d.visibleWidth/2,C(d,f))})}function A(a,b,c,d){return function(){for(var a=0,e=0;e<c.length;e++){var f=c[e];f===d.interactionState.dragInProgress?(f.x=f.lastDraggedX,f.y=f.lastDraggedY):(f.vx=(f.originalX-f.x)/M.forceTicksPerFrame,f.y=Math.min(d.size-f.dy/2,Math.max(f.dy/2,f.y)));a=Math.max(a,Math.abs(f.vx),Math.abs(f.vy))}!d.interactionState.dragInProgress&&
.1>a&&0<d.forceLayouts[b].alpha()&&d.forceLayouts[b].alpha(0)}}function C(a,b){for(var c=[],d=[],e=0;e<a.graph.nodes.length;e++){var f=(a.graph.nodes[e].y0+a.graph.nodes[e].y1)/2;c.push((a.graph.nodes[e].x0+a.graph.nodes[e].x1)/2/a.figure.width);d.push(f/a.figure.height)}W.call("_guiRestyle",b,{"node.x":[c],"node.y":[d]},a.trace.index).then(function(){b._fullLayout._dragCover&&b._fullLayout._dragCover.remove()})}function F(a){var b=[],c;for(c=0;c<a.length;c++)a[c].originalX=(a[c].x0+a[c].x1)/2,a[c].originalY=
(a[c].y0+a[c].y1)/2,-1===b.indexOf(a[c].originalX)&&b.push(a[c].originalX);b.sort(function(a,b){return a-b});for(c=0;c<a.length;c++)a[c].originalLayerIndex=b.indexOf(a[c].originalX),a[c].originalLayer=a[c].originalLayerIndex/(b.length-1)}function J(a){a.lastDraggedX=a.x0+a.dx/2;a.lastDraggedY=a.y0+a.dy/2}function E(a){return function(b){return b.node.originalX===a.node.originalX}}function H(a){for(var b=0;b<a.length;b++)a[b].y=(a[b].y0+a[b].y1)/2,a[b].x=(a[b].x0+a[b].x1)/2}var M=a("./constants"),
O=a("d3"),I=a("tinycolor2"),K=a("../../components/color"),N=a("../../components/drawing"),L=a("@plotly/d3-sankey"),R=a("d3-sankey-circular"),ca=a("d3-force"),U=a("../../lib");l=a("../../lib/gup");var T=l.keyFun,Y=l.repeat,ia=l.unwrap,S=a("d3-interpolate").interpolateNumber,W=a("../../registry");p.exports=function(a,b,l,p,u){var y=!1;U.ensureSingle(a._fullLayout._infolayer,"g","first-render",function(){y=!0});var A=a._fullLayout._dragCover;l=l.filter(function(a){return ia(a).trace.visible}).map(m.bind(null,
p));b=b.selectAll("."+M.cn.sankey).data(l,T);b.exit().remove();b.enter().append("g").classed(M.cn.sankey,!0).style("box-sizing","content-box").style("position","absolute").style("left",0).style("shape-rendering","geometricPrecision").style("pointer-events","auto").attr("transform",q);b.transition().ease(M.ease).duration(M.duration).attr("transform",q);l=b.selectAll("."+M.cn.sankeyLinks).data(Y,T);l.enter().append("g").classed(M.cn.sankeyLinks,!0).style("fill","none");p=l.selectAll("."+M.cn.sankeyLink).data(function(a){return a.graph.links.filter(function(a){return a.value}).map(k.bind(null,
a))},T);p.enter().append("path").classed(M.cn.sankeyLink,!0).call(w,b,u.linkEvents);p.style("stroke",function(a){return 1<a.link.width||0<a.linkLineWidth?K.tinyRGB(I(a.linkLineColor)):a.tinyColorHue}).style("stroke-opacity",function(a){return 1<a.link.width||0<a.linkLineWidth?K.opacity(a.linkLineColor):a.tinyColorAlpha}).style("fill",function(a){return a.tinyColorHue}).style("fill-opacity",function(a){return a.tinyColorAlpha}).style("stroke-width",function(a){return 1<a.link.width||0<a.linkLineWidth?
a.linkLineWidth:1}).attr("d",h());p.style("opacity",function(){return a._context.staticPlot||y||A?1:0}).transition().ease(M.ease).duration(M.duration).style("opacity",1);p.exit().transition().ease(M.ease).duration(M.duration).style("opacity",0).remove();l=b.selectAll("."+M.cn.sankeyNodeSet).data(Y,T);l.enter().append("g").classed(M.cn.sankeyNodeSet,!0);l.style("cursor",function(a){switch(a.arrangement){case "fixed":return"default";case "perpendicular":return"ns-resize";default:return"move"}});l=l.selectAll("."+
M.cn.sankeyNode).data(function(a){var b=a.graph.nodes;F(b);return b.map(e.bind(null,a))},T);l.enter().append("g").classed(M.cn.sankeyNode,!0).call(f).style("opacity",function(b){return!a._context.staticPlot&&!y||b.partOfGroup?0:1});l.call(w,b,u.nodeEvents).call(x,p,u,a);l.transition().ease(M.ease).duration(M.duration).call(f).style("opacity",function(a){return a.partOfGroup?0:1});l.exit().transition().ease(M.ease).duration(M.duration).style("opacity",0).remove();u=l.selectAll("."+M.cn.nodeRect).data(Y);
u.enter().append("rect").classed(M.cn.nodeRect,!0).call(n);u.style("stroke-width",function(a){return a.nodeLineWidth}).style("stroke",function(a){return K.tinyRGB(I(a.nodeLineColor))}).style("stroke-opacity",function(a){return K.opacity(a.nodeLineColor)}).style("fill",function(a){return a.tinyColorHue}).style("fill-opacity",function(a){return a.tinyColorAlpha});u.transition().ease(M.ease).duration(M.duration).call(n);u=l.selectAll("."+M.cn.nodeCapture).data(Y);u.enter().append("rect").classed(M.cn.nodeCapture,
!0).style("fill-opacity",0);u.attr("x",function(a){return a.zoneX}).attr("y",function(a){return a.zoneY}).attr("width",function(a){return a.zoneWidth}).attr("height",function(a){return a.zoneHeight});u=l.selectAll("."+M.cn.nodeCentered).data(Y);u.enter().append("g").classed(M.cn.nodeCentered,!0).attr("transform",r);u.transition().ease(M.ease).duration(M.duration).attr("transform",r);b=u.selectAll("."+M.cn.nodeLabelGuide).data(Y);b.enter().append("path").classed(M.cn.nodeLabelGuide,!0).attr("id",function(a){return a.uniqueNodeLabelPathId}).attr("d",
d).attr("transform",g);b.transition().ease(M.ease).duration(M.duration).attr("d",d).attr("transform",g);var D=u.selectAll("."+M.cn.nodeLabel).data(Y);D.enter().append("text").classed(M.cn.nodeLabel,!0).attr("transform",c).style("user-select","none").style("cursor","default").style("fill","black");D.style("text-shadow",function(a){return a.horizontal?"-1px 1px 1px #fff, 1px 1px 1px #fff, 1px -1px 1px #fff, -1px -1px 1px #fff":"none"}).each(function(a){N.font(D,a.textFont)});D.transition().ease(M.ease).duration(M.duration).attr("transform",
c);u=D.selectAll("."+M.cn.nodeLabelTextPath).data(Y);u.enter().append("textPath").classed(M.cn.nodeLabelTextPath,!0).attr("alignment-baseline","middle").attr("xlink:href",function(a){return"#"+a.uniqueNodeLabelPathId}).attr("startOffset",t).style("fill",v);u.text(function(a){return a.horizontal||5<a.node.dy?a.node.label:""}).attr("text-anchor",function(a){return a.horizontal&&a.left?"end":"start"});u.transition().ease(M.ease).duration(M.duration).attr("startOffset",t).style("fill",v)}},{"../../components/color":577,
"../../components/drawing":598,"../../lib":700,"../../lib/gup":698,"../../registry":829,"./constants":1045,"@plotly/d3-sankey":48,d3:154,"d3-force":146,"d3-interpolate":148,"d3-sankey-circular":151,tinycolor2:521}],1050:[function(a,p,l){var m=a("../../lib");p.exports=function(a,h){for(var e=0;e<a.length;e++)a[e].i=e;m.mergeArray(h.text,a,"tx");m.mergeArray(h.hovertext,a,"htx");m.mergeArray(h.customdata,a,"data");m.mergeArray(h.textposition,a,"tp");h.textfont&&(m.mergeArray(h.textfont.size,a,"ts"),
m.mergeArray(h.textfont.color,a,"tc"),m.mergeArray(h.textfont.family,a,"tf"));if(h=h.marker){m.mergeArray(h.size,a,"ms");m.mergeArray(h.opacity,a,"mo");m.mergeArray(h.symbol,a,"mx");m.mergeArray(h.color,a,"mc");if(e=h.line)m.mergeArray(e.color,a,"mlc"),m.mergeArray(e.width,a,"mlw");(h=h.gradient)&&"none"!==h.type&&(m.mergeArray(h.type,a,"mgt"),m.mergeArray(h.color,a,"mgc"))}}},{"../../lib":700}],1051:[function(a,p,l){l=a("../../components/fx/hovertemplate_attributes");var m=a("../../components/colorscale/attributes"),
k=a("../../components/colorbar/attributes"),h=a("../../plots/font_attributes"),e=a("../../components/drawing/attributes").dash,f=a("../../components/drawing"),b=a("./constants");a=a("../../lib/extend").extendFlat;p.exports={x:{valType:"data_array",editType:"calc+clearAxisTypes",anim:!0},x0:{valType:"any",dflt:0,editType:"calc+clearAxisTypes",anim:!0},dx:{valType:"number",dflt:1,editType:"calc",anim:!0},y:{valType:"data_array",editType:"calc+clearAxisTypes",anim:!0},y0:{valType:"any",dflt:0,editType:"calc+clearAxisTypes",
anim:!0},dy:{valType:"number",dflt:1,editType:"calc",anim:!0},stackgroup:{valType:"string",dflt:"",editType:"calc"},orientation:{valType:"enumerated",values:["v","h"],editType:"calc"},groupnorm:{valType:"enumerated",values:["","fraction","percent"],dflt:"",editType:"calc"},stackgaps:{valType:"enumerated",values:["infer zero","interpolate"],dflt:"infer zero",editType:"calc"},text:{valType:"string",dflt:"",arrayOk:!0,editType:"calc"},hovertext:{valType:"string",dflt:"",arrayOk:!0,editType:"style"},
mode:{valType:"flaglist",flags:["lines","markers","text"],extras:["none"],editType:"calc"},hoveron:{valType:"flaglist",flags:["points","fills"],editType:"style"},hovertemplate:l({},{keys:b.eventDataKeys}),line:{color:{valType:"color",editType:"style",anim:!0},width:{valType:"number",min:0,dflt:2,editType:"style",anim:!0},shape:{valType:"enumerated",values:"linear spline hv vh hvh vhv".split(" "),dflt:"linear",editType:"plot"},smoothing:{valType:"number",min:0,max:1.3,dflt:1,editType:"plot"},dash:a({},
e,{editType:"style"}),simplify:{valType:"boolean",dflt:!0,editType:"plot"},editType:"plot"},connectgaps:{valType:"boolean",dflt:!1,editType:"calc"},cliponaxis:{valType:"boolean",dflt:!0,editType:"plot"},fill:{valType:"enumerated",values:"none tozeroy tozerox tonexty tonextx toself tonext".split(" "),editType:"calc"},fillcolor:{valType:"color",editType:"style",anim:!0},marker:a({symbol:{valType:"enumerated",values:f.symbolList,dflt:"circle",arrayOk:!0,editType:"style"},opacity:{valType:"number",min:0,
max:1,arrayOk:!0,editType:"style",anim:!0},size:{valType:"number",min:0,dflt:6,arrayOk:!0,editType:"calc",anim:!0},maxdisplayed:{valType:"number",min:0,dflt:0,editType:"plot"},sizeref:{valType:"number",dflt:1,editType:"calc"},sizemin:{valType:"number",min:0,dflt:0,editType:"calc"},sizemode:{valType:"enumerated",values:["diameter","area"],dflt:"diameter",editType:"calc"},colorbar:k,line:a({width:{valType:"number",min:0,arrayOk:!0,editType:"style",anim:!0},editType:"calc"},m("marker.line",{anim:!0})),
gradient:{type:{valType:"enumerated",values:["radial","horizontal","vertical","none"],arrayOk:!0,dflt:"none",editType:"calc"},color:{valType:"color",arrayOk:!0,editType:"calc"},editType:"calc"},editType:"calc"},m("marker",{anim:!0})),selected:{marker:{opacity:{valType:"number",min:0,max:1,editType:"style"},color:{valType:"color",editType:"style"},size:{valType:"number",min:0,editType:"style"},editType:"style"},textfont:{color:{valType:"color",editType:"style"},editType:"style"},editType:"style"},
unselected:{marker:{opacity:{valType:"number",min:0,max:1,editType:"style"},color:{valType:"color",editType:"style"},size:{valType:"number",min:0,editType:"style"},editType:"style"},textfont:{color:{valType:"color",editType:"style"},editType:"style"},editType:"style"},textposition:{valType:"enumerated",values:"top left;top center;top right;middle left;middle center;middle right;bottom left;bottom center;bottom right".split(";"),dflt:"middle center",arrayOk:!0,editType:"calc"},textfont:h({editType:"calc",
colorEditType:"style",arrayOk:!0}),r:{valType:"data_array",editType:"calc"},t:{valType:"data_array",editType:"calc"}}},{"../../components/colorbar/attributes":578,"../../components/colorscale/attributes":584,"../../components/drawing":598,"../../components/drawing/attributes":597,"../../components/fx/hovertemplate_attributes":615,"../../lib/extend":690,"../../plots/font_attributes":774,"./constants":1055}],1052:[function(a,p,l){function m(a,b,c,g,h,k,n){var m=b._length,l=a._fullLayout;a=c._id;var p=
g._id,r=l._firstScatter[e(b)]===b.uid;l=(f(b,l,c,g)||{}).orientation;var t=b.fill;c._minDtick=0;g._minDtick=0;var v={padded:!0},u={padded:!0};n&&(v.ppad=u.ppad=n);(n=2>m||h[0]!==h[m-1]||k[0]!==k[m-1])&&("tozerox"===t||"tonextx"===t&&(r||"h"===l))?v.tozero=!0:(b.error_y||{}).visible||"tonexty"!==t&&"tozeroy"!==t&&(d.hasMarkers(b)||d.hasText(b))||(v.padded=!1,v.ppad=0);if(n&&("tozeroy"===t||"tonexty"===t&&(r||"v"===l)))u.tozero=!0;else if("tonextx"===t||"tozerox"===t)u.padded=!1;a&&(b._extremes[a]=
q.findExtremes(c,h,v));p&&(b._extremes[p]=q.findExtremes(g,k,u))}function k(a,b){if(d.hasMarkers(a)){var c=a.marker,e=1.6*(a.marker.sizeref||1);var f="area"===a.marker.sizemode?function(a){return Math.max(Math.sqrt((a||0)/e),3)}:function(a){return Math.max((a||0)/e,3)};if(n.isArrayOrTypedArray(c.size)){c={type:"linear"};q.setConvert(c);a=c.makeCalcdata(a.marker,"size");c=Array(b);for(var g=0;g<b;g++)c[g]=f(a[g]);return c}return f(c.size)}}function h(a,b){var c=e(b);a=a._firstScatter;a[c]||(a[c]=b.uid)}
function e(a){var b=a.stackgroup;return a.xaxis+a.yaxis+a.type+(b?"-"+b:"")}function f(a,b,c,d){if(a=a.stackgroup)if(b=b._scatterStackOpts[c._id+d._id][a],c="v"===b.orientation?d:c,"linear"===c.type||"log"===c.type)return b}var b=a("fast-isnumeric"),n=a("../../lib"),q=a("../../plots/cartesian/axes"),r=a("../../constants/numerical").BADNUM,d=a("./subtypes"),g=a("./colorscale_calc"),c=a("./arrays_to_calcdata"),v=a("./calc_selection");p.exports={calc:function(a,d){var e=a._fullLayout,l=q.getFromId(a,
d.xaxis||"x"),p=q.getFromId(a,d.yaxis||"y"),t=l.makeCalcdata(d,"x"),u=p.makeCalcdata(d,"y"),w=d._length,x=Array(w),y=d.ids,z=f(d,e,l,p),F=!1,O;h(e,d);e="x";var I="y";if(z){n.pushUnique(z.traceIndices,d._expandedIndex);if(O="v"===z.orientation){I="s";var K="x"}else e="s",K="y";var N="interpolate"===z.stackgaps}else{var L=k(d,w);m(a,d,l,p,t,u,L)}for(l=0;l<w;l++){p=x[l]={};L=b(t[l]);var R=b(u[l]);L&&R?(p[e]=t[l],p[I]=u[l]):z&&(O?L:R)?(p[K]=O?t[l]:u[l],p.gap=!0,N?(p.s=r,F=!0):p.s=0):p[e]=p[I]=r;y&&(p.id=
String(y[l]))}c(x,d);g(a,d);v(x,d);if(z){for(l=0;l<x.length;)x[l][K]===r?x.splice(l,1):l++;n.sort(x,function(a,b){return a[K]-b[K]||a.i-b.i});if(F){for(l=0;l<x.length-1&&x[l].gap;)l++;t=x[l].s;t||(t=x[l].s=0);for(a=0;a<l;a++)x[a].s=t;for(d=x.length-1;d>l&&x[d].gap;)d--;t=x[d].s;for(a=x.length-1;a>d;a--)x[a].s=t;for(;l<d;)if(l++,x[l].gap){for(a=l+1;x[a].gap;)a++;t=x[l-1][K];u=x[l-1].s;for(w=(x[a].s-u)/(x[a][K]-t);l<a;)x[l].s=u+(x[l][K]-t)*w,l++}}}return x},calcMarkerSize:k,calcAxisExpansion:m,setFirstScatter:h,
getStackOpts:f}},{"../../constants/numerical":677,"../../lib":700,"../../plots/cartesian/axes":748,"./arrays_to_calcdata":1050,"./calc_selection":1053,"./colorscale_calc":1054,"./subtypes":1075,"fast-isnumeric":221}],1053:[function(a,p,l){var m=a("../../lib");p.exports=function(a,h){m.isArrayOrTypedArray(h.selectedpoints)&&m.tagSelected(a,h)}},{"../../lib":700}],1054:[function(a,p,l){var m=a("../../components/colorscale/helpers").hasColorscale,k=a("../../components/colorscale/calc"),h=a("./subtypes");
p.exports=function(a,f){h.hasLines(f)&&m(f,"line")&&k(a,f,{vals:f.line.color,containerStr:"line",cLetter:"c"});h.hasMarkers(f)&&(m(f,"marker")&&k(a,f,{vals:f.marker.color,containerStr:"marker",cLetter:"c"}),m(f,"marker.line")&&k(a,f,{vals:f.marker.line.color,containerStr:"marker.line",cLetter:"c"}))}},{"../../components/colorscale/calc":585,"../../components/colorscale/helpers":588,"./subtypes":1075}],1055:[function(a,p,l){p.exports={PTS_LINESONLY:20,minTolerance:.2,toleranceGrowth:10,maxScreensAway:20,
eventDataKeys:[]}},{}],1056:[function(a,p,l){function m(a,e,f,b,k,m,l){k[b]=!0;b={i:null,gap:!0,s:0};b[l]=f;a.splice(e,0,b);e&&f===a[e-1][l]?(f=a[e-1],b.s=f.s,b.i=f.i,b.gap=f.gap):m&&(m=a[e-1],f=(k=a[e+1])?m?m.s+(k.s-m.s)*(f-m[l])/(k[l]-m[l]):k.s:m.s,b.s=f);e||(a[0].t=a[1].t,a[0].trace=a[1].trace,delete a[1].t,delete a[1].trace)}var k=a("./calc");p.exports=function(a,e){var f=e.xaxis;e=e.yaxis;var b=a._fullLayout._scatterStackOpts[f._id+e._id];if(b){var h=a.calcdata,l,p,d,g,c,q;for(q in b){var t=
b[q];var w=t.traceIndices;if(w.length){var x="interpolate"===t.stackgaps;var D=t.groupnorm;if("v"===t.orientation){var z="x";var A="y"}else z="y",A="x";var C=Array(w.length);for(l=0;l<C.length;l++)C[l]=!1;var F=h[w[0]];var J=Array(F.length);for(l=0;l<F.length;l++)J[l]=F[l][z];for(l=1;l<w.length;l++){var E=h[w[l]];for(p=d=0;p<E.length;p++){for(c=E[p][z];c>J[d]&&d<J.length;d++)m(E,p,J[d],l,C,x,z),p++;if(c!==J[d]){for(g=0;g<l;g++)m(h[w[g]],d,c,g,C,x,z);J.splice(d,0,c)}d++}for(;d<J.length;d++)m(E,p,J[d],
l,C,x,z),p++}d=J.length;for(p=0;p<F.length;p++){g=F[p][A]=F[p].s;for(l=1;l<w.length;l++)E=h[w[l]],E[0].trace._rawLength=E[0].trace._length,E[0].trace._length=d,g+=E[p].s,E[p][A]=g;if(D)for(E=("fraction"===D?g:g/100)||1,l=0;l<w.length;l++)g=h[w[l]][p],g[A]/=E,g.sNorm=g.s/E}for(l=0;l<w.length;l++){E=h[w[l]];F=E[0].trace;D=k.calcMarkerSize(F,F._rawLength);A=Array.isArray(D);if(D&&C[l]||A)for(g=D,D=Array(d),p=0;p<d;p++)D[p]=E[p].gap?0:A?g[E[p].i]:g;A=Array(d);g=Array(d);for(p=0;p<d;p++)A[p]=E[p].x,g[p]=
E[p].y;k.calcAxisExpansion(a,F,f,e,A,g,D);E[0].t.orientation=t.orientation}}}}}},{"./calc":1052}],1057:[function(a,p,l){p.exports=function(a){for(var k=0;k<a.length;k++){var h=a[k];if("scatter"===h.type){var e=h.fill;if("none"!==e&&"toself"!==e&&(h.opacity=void 0,"tonexty"===e||"tonextx"===e))for(e=k-1;0<=e;e--){var f=a[e];if("scatter"===f.type&&f.xaxis===h.xaxis&&f.yaxis===h.yaxis){f.opacity=void 0;break}}}}}},{}],1058:[function(a,p,l){var m=a("../../lib"),k=a("../../registry"),h=a("./attributes"),
e=a("./constants"),f=a("./subtypes"),b=a("./xy_defaults"),n=a("./stack_defaults"),q=a("./marker_defaults"),r=a("./line_defaults"),d=a("./line_shape_defaults"),g=a("./text_defaults"),c=a("./fillcolor_defaults");p.exports=function(a,l,p,u){function t(b,c){return m.coerce(a,l,h,b,c)}var v=b(a,l,u,t);v||(l.visible=!1);if(l.visible){var w=n(a,l,u,t);v=!w&&v<e.PTS_LINESONLY?"lines+markers":"lines";t("text");t("hovertext");t("mode",v);f.hasLines(l)&&(r(a,l,p,u,t),d(a,l,t),t("connectgaps"),t("line.simplify"));
f.hasMarkers(l)&&q(a,l,p,u,t,{gradient:!0});f.hasText(l)&&g(a,l,u,t);u=[];if(f.hasMarkers(l)||f.hasText(l))t("cliponaxis"),t("marker.maxdisplayed"),u.push("points");t("fill",w?w.fillDflt:"none");"none"!==l.fill&&(c(a,l,p,t),f.hasLines(l)||d(a,l,t));w=(l.line||{}).color;v=(l.marker||{}).color;"tonext"!==l.fill&&"toself"!==l.fill||u.push("fills");t("hoveron",u.join("+")||"points");"fills"!==l.hoveron&&t("hovertemplate");u=k.getComponentMethod("errorbars","supplyDefaults");u(a,l,w||v||p,{axis:"y"});
u(a,l,w||v||p,{axis:"x",inherit:"y"});m.coerceSelectionMarkerOpacity(l,t)}}},{"../../lib":700,"../../registry":829,"./attributes":1051,"./constants":1055,"./fillcolor_defaults":1060,"./line_defaults":1064,"./line_shape_defaults":1066,"./marker_defaults":1070,"./stack_defaults":1073,"./subtypes":1075,"./text_defaults":1076,"./xy_defaults":1077}],1059:[function(a,p,l){var m=a("../../lib");p.exports=function(a,h,e){var f=Array.isArray(e)?function(a){e.push(a)}:function(a){e.text=a},b=m.extractOption(a,
h,"htx","hovertext");if(b||0===b)return f(b);if((a=m.extractOption(a,h,"tx","text"))||0===a)return f(a)}},{"../../lib":700}],1060:[function(a,p,l){var m=a("../../components/color"),k=a("../../lib").isArrayOrTypedArray;p.exports=function(a,e,f,b){a=!1;if(e.marker){var h=e.marker.color,l=(e.marker.line||{}).color;h&&!k(h)?a=h:l&&!k(l)&&(a=l)}b("fillcolor",m.addOpacity((e.line||{}).color||a||f,.5))}},{"../../components/color":577,"../../lib":700}],1061:[function(a,p,l){var m=a("../../components/color"),
k=a("./subtypes");p.exports=function(a,e){if("lines"===a.mode)return(e=a.line.color)&&m.opacity(e)?e:a.fillcolor;if("none"===a.mode)return a.fill?a.fillcolor:"";var f=e.mcc||(a.marker||{}).color,b=e.mlcc||((a.marker||{}).line||{}).color;return(e=f&&m.opacity(f)?f:b&&m.opacity(b)&&(e.mlw||((a.marker||{}).line||{}).width)?b:"")?.3>m.opacity(e)?m.addOpacity(e,.3):e:(e=(a.line||{}).color)&&m.opacity(e)&&k.hasLines(a)&&a.line.width?e:a.fillcolor}},{"../../components/color":577,"./subtypes":1075}],1062:[function(a,
p,l){var m=a("../../lib"),k=a("../../components/fx"),h=a("../../registry"),e=a("./get_trace_color"),f=a("../../components/color"),b=a("./fill_hover_text");p.exports=function(a,l,p,d){var g=a.cd,c=g[0].trace,n=a.xa,q=a.ya,r=n.c2p(l),u=q.c2p(p),w=[r,u];p=c.hoveron||"";var x=-1!==c.mode.indexOf("markers")?3:.5;if(-1!==p.indexOf("points")&&(l=function(a){var b=Math.max(x,a.mrc||0),c=n.c2p(a.x)-r;a=q.c2p(a.y)-u;return Math.max(Math.sqrt(c*c+a*a)-b,1-x/b)},d=k.getDistanceFunction(d,function(a){var b=Math.max(3,
a.mrc||0),c=1-1/b;a=Math.abs(n.c2p(a.x)-r);return a<b?c*a/b:a-b+c},function(a){var b=Math.max(3,a.mrc||0),c=1-1/b;a=Math.abs(q.c2p(a.y)-u);return a<b?c*a/b:a-b+c},l),k.getClosest(g,d,a),!1!==a.index)){d=g[a.index];p=n.c2p(d.x,!0);w=q.c2p(d.y,!0);var A=d.mrc||1;a.index=d.i;var C=g[0].t.orientation,z=C&&(d.sNorm||d.s);g="h"===C?z:d.x;C="v"===C?z:d.y;m.extendFlat(a,{color:e(c,d),x0:p-A,x1:p+A,xLabelVal:g,y0:w-A,y1:w+A,yLabelVal:C,spikeDistance:l(d),hovertemplate:c.hovertemplate});b(d,c,a);h.getComponentMethod("errorbars",
"hoverInfo")(d,c,a);return[a]}if(-1!==p.indexOf("fills")&&c._polygons){A=c._polygons;d=[];C=!1;l=Infinity;g=-Infinity;z=Infinity;var F=-Infinity;for(p=0;p<A.length;p++){var E=A[p];E.contains(w)&&(C=!C,d.push(E),z=Math.min(z,E.ymin),F=Math.max(F,E.ymax))}if(C){z=Math.max(z,0);F=Math.min(F,q._length);w=(z+F)/2;for(p=0;p<d.length;p++)for(C=d[p].pts,A=1;A<C.length;A++){E=C[A-1][1];var H=C[A][1];E>w!==H>=w&&(z=C[A-1][0],F=C[A][0],H-E&&(z+=(F-z)*(w-E)/(H-E),l=Math.min(l,z),g=Math.max(g,z)))}l=Math.max(l,
0);g=Math.min(g,n._length);d=f.defaultLine;f.opacity(c.fillcolor)?d=c.fillcolor:f.opacity((c.line||{}).color)&&(d=c.line.color);m.extendFlat(a,{distance:a.maxHoverDistance,x0:l,x1:g,y0:w,y1:w,color:d,hovertemplate:!1});delete a.index;c.text&&!Array.isArray(c.text)?a.text=String(c.text):a.text=c.name;return[a]}}}},{"../../components/color":577,"../../components/fx":616,"../../lib":700,"../../registry":829,"./fill_hover_text":1059,"./get_trace_color":1061}],1063:[function(a,p,l){l={};var m=a("./subtypes");
l.hasLines=m.hasLines;l.hasMarkers=m.hasMarkers;l.hasText=m.hasText;l.isBubble=m.isBubble;l.attributes=a("./attributes");l.supplyDefaults=a("./defaults");l.crossTraceDefaults=a("./cross_trace_defaults");l.calc=a("./calc").calc;l.crossTraceCalc=a("./cross_trace_calc");l.arraysToCalcdata=a("./arrays_to_calcdata");l.plot=a("./plot");l.colorbar=a("./marker_colorbar");l.style=a("./style").style;l.styleOnSelect=a("./style").styleOnSelect;l.hoverPoints=a("./hover");l.selectPoints=a("./select");l.animatable=
!0;l.moduleType="trace";l.name="scatter";l.basePlotModule=a("../../plots/cartesian");l.categories="cartesian svg symbols errorBarsOK showLegend scatter-like zoomScale".split(" ");l.meta={};p.exports=l},{"../../plots/cartesian":759,"./arrays_to_calcdata":1050,"./attributes":1051,"./calc":1052,"./cross_trace_calc":1056,"./cross_trace_defaults":1057,"./defaults":1058,"./hover":1062,"./marker_colorbar":1069,"./plot":1071,"./select":1072,"./style":1074,"./subtypes":1075}],1064:[function(a,p,l){var m=a("../../lib").isArrayOrTypedArray,
k=a("../../components/colorscale/helpers").hasColorscale,h=a("../../components/colorscale/defaults");p.exports=function(a,f,b,n,l,p){var d=(a.marker||{}).color;l("line.color",b);k(a,"line")?h(a,f,n,l,{prefix:"line.",cLetter:"c"}):(a=(m(d)?!1:d)||b,l("line.color",a));l("line.width");(p||{}).noDash||l("line.dash")}},{"../../components/colorscale/defaults":587,"../../components/colorscale/helpers":588,"../../lib":700}],1065:[function(a,p,l){l=a("../../constants/numerical");var m=l.BADNUM;l=l.LOG_CLIP;
var k=l+.5,h=l-.5,e=a("../../lib"),f=e.segmentsIntersect,b=e.constrain,n=a("./constants");p.exports=function(a,l){function d(b){b=a[b];if(!b)return!1;var c=F.c2p(b.x),d=E.c2p(b.y);if(c===m){H&&(c=F.c2p(b.x,!0));if(c===m)return!1;M&&d===m&&(c*=Math.abs(F._m*I*(0<F._m?k:h)/(E._m*O*(0<E._m?k:h))));c*=1E3}if(d===m){M&&(d=E.c2p(b.y,!0));if(d===m)return!1;d*=1E3}return[c,d]}function g(a,b,c,d){c-=a;d-=b;a=.5-a;var e=.5-b;b=c*c+d*d;var f=c*a+d*e;if(0<f&&f<b&&(c=a*d-e*c,c*c<b))return!0}function c(a,b){var c=
a[0]/O;a=a[1]/I;var d=Math.max(0,-c,c-1,-a,a-1);d&&void 0!==qa&&g(c,a,qa,ha)&&(d=0);d&&b&&g(c,a,b[0]/O,b[1]/I)&&(d=0);return(1+n.toleranceGrowth*d)*N}function p(a,b){var c=a[0]-b[0];a=a[1]-b[1];return Math.sqrt(c*c+a*a)}function q(a,b){for(var c=[],d=0,e=0;4>e;e++){var g=da[e];(g=f(a[0],a[1],b[0],b[1],g[0],g[1],g[2],g[3]))&&(!d||1<Math.abs(g.x-c[0][0])||1<Math.abs(g.y-c[0][1]))&&(g=[g.x,g.y],d&&p(g,a)<p(c[0],a)?c.unshift(g):c.push(g),d++)}return c}function r(a){if(a[0]<ba||a[0]>la||a[1]<Z||a[1]>pa)return[b(a[0],
ba,la),b(a[1],Z,pa)]}function u(a,b){if(a[0]===b[0]&&(a[0]===ba||a[0]===la)||a[1]===b[1]&&(a[1]===Z||a[1]===pa))return!0}function w(a,b){var c=[];a=r(a);b=r(b);if(a&&b&&u(a,b))return c;a&&c.push(a);b&&c.push(b);return c}function x(a,b,c){return function(d,f){var g=r(d),h=r(f),k=[];if(g&&h&&u(g,h))return k;g&&k.push(g);h&&k.push(h);if(d=2*e.constrain((d[a]+f[a])/2,b,c)-((g||d)[a]+(h||f)[a]))g=g&&h?0<d===g[a]>h[a]?g:h:g||h,g[a]+=d;return k}}function A(a){var b=a[0],c=a[1],d=b===ia[S-1][0],e=c===ia[S-
1][1];if(!d||!e)if(1<S){var f=b===ia[S-2][0],g=c===ia[S-2][1];d&&(b===ba||b===la)&&f?g?S--:ia[S-1]=a:e&&(c===Z||c===pa)&&g?f?S--:ia[S-1]=a:ia[S++]=a}else ia[S++]=a}function C(a){ia[S-1][0]!==a[0]&&ia[S-1][1]!==a[1]&&A([xa,za]);A(a);ta=null;xa=za=0}function z(a){qa=a[0]/O;ha=a[1]/I;ya=a[0]<ba?ba:a[0]>la?la:0;ja=a[1]<Z?Z:a[1]>pa?pa:0;if(ya||ja){if(S)if(ta){var b=wa(ta,a);1<b.length&&(C(b[0]),ia[S++]=b[1])}else ka=wa(ia[S-1],a)[0],ia[S++]=ka;else ia[S++]=[ya||a[0],ja||a[1]];b=ia[S-1];if(ya&&ja&&(b[0]!==
ya||b[1]!==ja)){if(ta)if(xa!==ya&&za!==ja)if(xa&&za){b=a[0]-ta[0];var c=(a[1]-ta[1])/b;b=0<(ta[1]*a[0]-a[1]*ta[0])/b?[0<c?ba:la,pa]:[0<c?la:ba,Z];A(b)}else A([xa||ya,za||ja]);else xa&&za&&A([xa,za]);A([ya,ja])}else xa-ya&&za-ja&&A([ya||xa,ja||za]);ta=a;xa=ya;za=ja}else ta&&C(wa(ta,a)[0]),ia[S++]=a}var F=l.xaxis,E=l.yaxis,H="log"===F.type,M="log"===E.type,O=F._length,I=E._length,K=l.connectGaps,N=l.baseTolerance,L=l.shape,R="linear"===L,ca=l.fill&&"none"!==l.fill,U=[],T=n.minTolerance,Y=a.length,ia=
Array(Y),S=0,W,fa,qa,ha;var ea=n.maxScreensAway;var ba=-O*ea,la=O*(1+ea),Z=-I*ea,pa=I*(1+ea),da=[[ba,Z,la,Z],[la,Z,la,pa],[la,pa,ba,pa],[ba,pa,ba,Z]],ya,ja,xa,za,ka,wa;"linear"===L||"spline"===L?wa=q:"hv"===L||"vh"===L?wa=w:"hvh"===L?wa=x(0,ba,la):"vhv"===L&&(wa=x(1,Z,pa));for(L=0;L<Y;L++)if(ea=d(L)){S=0;var ta=null;z(ea);for(L++;L<Y;L++){var aa=d(L);if(!aa)if(K)continue;else break;if(R&&l.simplify){var ma=d(L+1);var Aa=p(aa,ea);if(ca&&(0===S||S===Y-1)||!(Aa<c(aa,ma)*T)){var va=[(aa[0]-ea[0])/Aa,
(aa[1]-ea[1])/Aa];var sa=ea;var Ca=Aa;var Ga=W=fa=0;var Ja=!1;Aa=aa;for(L++;L<a.length;L++){var oa=ma;ma=d(L+1);if(!oa)if(K)continue;else break;var Ea=[oa[0]-ea[0],oa[1]-ea[1]];var na=Ea[0]*va[1]-Ea[1]*va[0];W=Math.min(W,na);fa=Math.max(fa,na);if(fa-W>c(oa,ma))break;Aa=oa;Ea=Ea[0]*va[0]+Ea[1]*va[1];Ea>Ca?(Ca=Ea,aa=oa,Ja=!1):Ea<Ga&&(Ga=Ea,sa=oa,Ja=!0)}Ja?(z(aa),Aa!==sa&&z(sa)):(sa!==ea&&z(sa),Aa!==aa&&z(aa));z(Aa);if(L>=a.length||!oa)break;z(oa);ea=oa}}else z(aa)}ta&&A([xa||ta[0],za||ta[1]]);U.push(ia.slice(0,
S))}return U}},{"../../constants/numerical":677,"../../lib":700,"./constants":1055}],1066:[function(a,p,l){p.exports=function(a,k,h){"spline"===h("line.shape")&&h("line.smoothing")}},{}],1067:[function(a,p,l){var m={tonextx:1,tonexty:1,tonext:1};p.exports=function(a,h,e){var f,b={};var k=!1;var l=-1,p=0,d=-1;for(h=0;h<e.length;h++)a=e[h][0].trace,(f=a.stackgroup||"")?f in b?f=b[f]:(f=b[f]=p,p++):a.fill in m&&0<=d?f=d:(f=d=p,p++),f<l&&(k=!0),a._groupIndex=l=f;e=e.slice();k&&e.sort(function(a,b){a=
a[0].trace;b=b[0].trace;return a._groupIndex-b._groupIndex||a.index-b.index});b={};for(h=0;h<e.length;h++)a=e[h][0].trace,f=a.stackgroup||"",!0===a.visible?(a._nexttrace=null,a.fill in m&&(k=b[f],a._prevtrace=k||null,k&&(k._nexttrace=a)),a._ownfill=a.fill&&("tozero"===a.fill.substr(0,6)||"toself"===a.fill||"to"===a.fill.substr(0,2)&&!a._prevtrace),b[f]=a):a._prevtrace=a._nexttrace=a._ownfill=null;return e}},{}],1068:[function(a,p,l){var m=a("fast-isnumeric");p.exports=function(a){a=a.marker;var h=
a.sizeref||1,e=a.sizemin||0,f="area"===a.sizemode?function(a){return Math.sqrt(a/h)}:function(a){return a/h};return function(a){a=f(a/2);return m(a)&&0<a?Math.max(a,e):0}}},{"fast-isnumeric":221}],1069:[function(a,p,l){p.exports={container:"marker",min:"cmin",max:"cmax"}},{}],1070:[function(a,p,l){var m=a("../../components/color"),k=a("../../components/colorscale/helpers").hasColorscale,h=a("../../components/colorscale/defaults"),e=a("./subtypes");p.exports=function(a,b,n,l,p,d){var f=e.isBubble(a),
c=(a.line||{}).color;d=d||{};c&&(n=c);p("marker.symbol");p("marker.opacity",f?.7:1);p("marker.size");p("marker.color",n);k(a,"marker")&&h(a,b,l,p,{prefix:"marker.",cLetter:"c"});d.noSelect||(p("selected.marker.color"),p("unselected.marker.color"),p("selected.marker.size"),p("unselected.marker.size"));d.noLine||(n=c&&!Array.isArray(c)&&b.marker.color!==c?c:f?m.background:m.defaultLine,p("marker.line.color",n),k(a,"marker.line")&&h(a,b,l,p,{prefix:"marker.line.",cLetter:"c"}),p("marker.line.width",
f?1:0));f&&(p("marker.sizeref"),p("marker.sizemin"),p("marker.sizemode"));d.gradient&&"none"!==p("marker.gradient.type")&&p("marker.gradient.color")}},{"../../components/color":577,"../../components/colorscale/defaults":587,"../../components/colorscale/helpers":588,"./subtypes":1075}],1071:[function(a,p,l){function m(a,b,c){b.each(function(b){var d=n(e.select(this),"g","fills");r.setClipUrl(d,c.layerClipId,a);var f=b[0].trace;b=[];f._ownfill&&b.push("_ownFill");f._nexttrace&&b.push("_nextFill");d=
d.selectAll("g").data(b,q);d.enter().append("g");d.exit().each(function(a){f[a]=null}).remove();d.order().each(function(a){f[a]=n(e.select(this),"path","js-fill")})})}function k(a,c,k,l,m,p,u){function t(a){return C?a.transition():a}function w(a){t(a).attr("d","M0,0Z")}function x(a){return a.filter(function(a){return!a.gap&&a.vis})}function y(a){return a.filter(function(a){return a.vis})}function A(a){return a.filter(function(a){return!a.gap})}function B(a){return a.id}function D(){return!1}h(a,c,
k,l,m);var C=!!u&&0<u.duration,z=k.xaxis,G=k.yaxis,F=l[0].trace,K=F.line,U=e.select(p),T=n(U,"g","errorbars");p=n(U,"g","lines");c=n(U,"g","points");m=n(U,"g","text");f.getComponentMethod("errorbars","plot")(a,T,k,u);if(!0===F.visible){t(U).style("opacity",F.opacity);var Y=F.fill.charAt(F.fill.length-1);"x"!==Y&&"y"!==Y&&(Y="");k.isRangePlot||(l[0].node3=U);u="";U=[];if(T=F._prevtrace){u=T._prevRevpath||"";var ia=T._nextFill;U=T._polygons}var S,W,fa="",qa="",ha=[];var ea=b.noop;T=F._ownFill;if(d.hasLines(F)||
"none"!==F.fill){ia&&ia.datum(l);if(-1!==["hv","vh","hvh","vhv"].indexOf(K.shape)){var ba=r.steps(K.shape);var la=r.steps(K.shape.split("").reverse().join(""))}else ba="spline"===K.shape?la=function(a){var b=a[a.length-1];return 1<a.length&&a[0][0]===b[0]&&a[0][1]===b[1]?r.smoothclosed(a.slice(1),K.smoothing):r.smoothopen(a,K.smoothing)}:la=function(a){return"M"+a.join("L")};var Z=function(a){return la(a.reverse())};ha=g(l,{xaxis:z,yaxis:G,connectGaps:F.connectgaps,baseTolerance:Math.max(K.width||
1,3)/4,shape:K.shape,simplify:K.simplify,fill:F.fill});var pa=F._polygons=Array(ha.length);for(ea=0;ea<ha.length;ea++)F._polygons[ea]=v(ha[ea]);if(ha.length){var da=ha[0][0];var ya=ha[ha.length-1];ya=ya[ya.length-1]}ea=function(a){return function(b){S=ba(b);W=Z(b);fa?Y?(fa+="L"+S.substr(1),qa=W+("L"+qa.substr(1))):(fa+="Z"+S,qa=W+"Z"+qa):(fa=S,qa=W);d.hasLines(F)&&1<b.length&&(b=e.select(this),b.datum(l),a?t(b.style("opacity",0).attr("d",S).call(r.lineGroupStyle)).style("opacity",1):(b=t(b),b.attr("d",
S),r.singleLineStyle(l,b)))}}}p=p.selectAll(".js-line").data(ha);t(p.exit()).style("opacity",0).remove();p.each(ea(!1));p.enter().append("path").classed("js-line",!0).style("vector-effect","non-scaling-stroke").call(r.lineGroupStyle).each(ea(!0));r.setClipUrl(p,k.layerClipId,a);ha.length?(T?(T.datum(l),da&&ya&&(Y?("y"===Y?da[1]=ya[1]=G.c2p(0,!0):"x"===Y&&(da[0]=ya[0]=z.c2p(0,!0)),t(T).attr("d","M"+ya+"L"+da+"L"+fa.substr(1)).call(r.singleFillStyle)):t(T).attr("d",fa+"Z").call(r.singleFillStyle))):
ia&&("tonext"===F.fill.substr(0,6)&&fa&&u?("tonext"===F.fill?t(ia).attr("d",fa+"Z"+u+"Z").call(r.singleFillStyle):t(ia).attr("d",fa+"L"+u.substr(1)+"Z").call(r.singleFillStyle),F._polygons=F._polygons.concat(U)):(w(ia),F._polygons=null)),F._prevRevpath=qa,F._prevPolygons=pa):(T?w(T):ia&&w(ia),F._polygons=F._prevRevpath=F._prevPolygons=null);c.datum(l);m.datum(l);(function(b,c,f){var g,h=f[0].trace;f=d.hasMarkers(h);var n=d.hasText(h);var l=h.ids?B:void 0;var m=D,p=D;if(f||n){var v=q,u=h.stackgroup,
w=u&&"infer zero"===a._fullLayout._scatterStackOpts[z._id+G._id][u].stackgaps;h.marker.maxdisplayed||h._needsCull?v=w?y:x:u&&!w&&(v=A);f&&(m=v);n&&(p=v)}b=b.selectAll("path.point");b=b.data(m,l);m=b.enter().append("path").classed("point",!0);C&&m.call(r.pointStyle,h,a).call(r.translatePoints,z,G).style("opacity",0).transition().style("opacity",1);b.order();var E;f&&(E=r.makePointStyleFns(h));b.each(function(b){var c=e.select(this),d=t(c);(g=r.translatePoint(b,d,z,G))?(r.singlePointStyle(b,d,h,E,a),
k.layerClipId&&r.hideOutsideRangePoint(b,d,z,G,h.xcalendar,h.ycalendar),h.customdata&&c.classed("plotly-customdata",null!==b.data&&void 0!==b.data)):d.remove()});C?b.exit().transition().style("opacity",0).remove():b.exit().remove();b=c.selectAll("g");b=b.data(p,l);b.enter().append("g").classed("textpoint",!0).append("text");b.order();b.each(function(a){var b=e.select(this),c=t(b.select("text"));(g=r.translatePoint(a,c,z,G))?k.layerClipId&&r.hideOutsideRangePoint(a,b,z,G,h.xcalendar,h.ycalendar):b.remove()});
b.selectAll("text").call(r.textPointStyle,h,a).each(function(a){var b=z.c2p(a.x),c=G.c2p(a.y);e.select(this).selectAll("tspan.line").each(function(){t(e.select(this)).attr({x:b,y:c})})});b.exit().remove()})(c,m,l);ia=!1===F.cliponaxis?null:k.layerClipId;r.setClipUrl(c,ia,a);r.setClipUrl(m,ia,a)}}function h(a,c,f,g,h){a=f.xaxis;f=f.yaxis;var k=e.extent(b.simpleMap(a.range,a.r2c)),n=e.extent(b.simpleMap(f.range,f.r2c));f=g[0].trace;if(d.hasMarkers(f)&&(f=f.marker.maxdisplayed,0!==f)){a=g.filter(function(a){return a.x>=
k[0]&&a.x<=k[1]&&a.y>=n[0]&&a.y<=n[1]});var l=Math.ceil(a.length/f),m=0;h.forEach(function(a,b){a=a[0].trace;d.hasMarkers(a)&&0<a.marker.maxdisplayed&&b<c&&m++});var p=Math.round(m*l/3+Math.floor(m/3)*l/7.1);g.forEach(function(a){delete a.vis});a.forEach(function(a,b){0===Math.round((b+p)%l)&&(a.vis=!0)})}}var e=a("d3"),f=a("../../registry"),b=a("../../lib"),n=b.ensureSingle,q=b.identity,r=a("../../components/drawing"),d=a("./subtypes"),g=a("./line_points"),c=a("./link_traces"),v=a("../../lib/polygon").tester;
p.exports=function(a,b,d,f,g,h){var n,l=!g,p=!!g&&0<g.duration,q=c(a,b,d);d=f.selectAll("g.trace").data(q,function(a){return a[0].trace.uid});d.enter().append("g").attr("class",function(a){return"trace scatter trace"+a[0].trace.uid}).style("stroke-miterlimit",2);d.order();m(a,d,b);p?(h&&(n=h()),e.transition().duration(g.duration).ease(g.easing).each("end",function(){n&&n()}).each("interrupt",function(){n&&n()}).each(function(){f.selectAll("g.trace").each(function(c,d){k(a,d,b,c,q,this,g)})})):d.each(function(c,
d){k(a,d,b,c,q,this,g)});l&&d.exit().remove();f.selectAll("path:not([d])").remove()}},{"../../components/drawing":598,"../../lib":700,"../../lib/polygon":712,"../../registry":829,"./line_points":1065,"./link_traces":1067,"./subtypes":1075,d3:154}],1072:[function(a,p,l){var m=a("./subtypes");p.exports=function(a,h){var e=a.cd,f=a.xaxis,b=a.yaxis,k=[],l=e[0].trace;if(!m.hasMarkers(l)&&!m.hasText(l))return[];if(!1===h)for(l=0;l<e.length;l++)e[l].selected=0;else for(l=0;l<e.length;l++){var p=e[l];var d=
f.c2p(p.x);var g=b.c2p(p.y);null!==p.i&&h.contains([d,g],!1,l,a)?(k.push({pointNumber:p.i,x:f.c2d(p.x),y:b.c2d(p.y)}),p.selected=1):p.selected=0}return k}},{"./subtypes":1075}],1073:[function(a,p,l){var m=["orientation","groupnorm","stackgaps"];p.exports=function(a,h,e,f){e=e._scatterStackOpts;var b=f("stackgroup");if(b){var k=h.xaxis+h.yaxis,l=e[k];l||(l=e[k]={});e=l[b];k=!1;e?e.traces.push(h):(e=l[b]={traceIndices:[],traces:[h]},k=!0);h={orientation:h.x&&!h.y?"h":"v"};for(b=0;b<m.length;b++){l=
m[b];var p=l+"Found";if(!e[p]){var d=void 0!==a[l],g="orientation"===l;if(d||k)if(e[l]=f(l,h[l]),g&&(e.fillDflt="h"===e[l]?"tonextx":"tonexty"),d&&(e[p]=!0,!k&&(delete e.traces[0][l],g)))for(l=0;l<e.traces.length-1;l++)p=e.traces[l],p._input.fill!==p.fill&&(p.fill=e.fillDflt)}}return e}}},{}],1074:[function(a,p,l){function m(a,f,h){e.pointStyle(a.selectAll("path.point"),f,h)}function k(a,f,h){e.textPointStyle(a.selectAll("text"),f,h)}var h=a("d3"),e=a("../../components/drawing"),f=a("../../registry");
p.exports={style:function(a,l){l=l?l[0].node3:h.select(a).selectAll("g.trace.scatter");l.style("opacity",function(a){return a[0].trace.opacity});l.selectAll("g.points").each(function(b){var e=h.select(this);m(e,b.trace||b[0].trace,a)});l.selectAll("g.text").each(function(b){var e=h.select(this);k(e,b.trace||b[0].trace,a)});l.selectAll("g.trace path.js-line").call(e.lineGroupStyle);l.selectAll("g.trace path.js-fill").call(e.fillGroupStyle);f.getComponentMethod("errorbars","style")(l)},stylePoints:m,
styleText:k,styleOnSelect:function(a,f){var b=f[0].node3;f=f[0].trace;f.selectedpoints?(e.selectedPointStyle(b.selectAll("path.point"),f),e.selectedTextStyle(b.selectAll("text"),f)):(m(b,f,a),k(b,f,a))}}},{"../../components/drawing":598,"../../registry":829,d3:154}],1075:[function(a,p,l){var m=a("../../lib");p.exports={hasLines:function(a){return a.visible&&a.mode&&-1!==a.mode.indexOf("lines")},hasMarkers:function(a){return a.visible&&(a.mode&&-1!==a.mode.indexOf("markers")||"splom"===a.type)},hasText:function(a){return a.visible&&
a.mode&&-1!==a.mode.indexOf("text")},isBubble:function(a){return m.isPlainObject(a.marker)&&m.isArrayOrTypedArray(a.marker.size)}}},{"../../lib":700}],1076:[function(a,p,l){var m=a("../../lib");p.exports=function(a,h,e,f,b){b=b||{};f("textposition");m.coerceFont(f,"textfont",e.font);b.noSelect||(f("selected.textfont.color"),f("unselected.textfont.color"))}},{"../../lib":700}],1077:[function(a,p,l){var m=a("../../lib"),k=a("../../registry");p.exports=function(a,e,f,b){var h=b("x"),l=b("y");k.getComponentMethod("calendars",
"handleTraceDefaults")(a,e,["x","y"],f);if(h)a=m.minRowLength(h),l?l=Math.min(a,m.minRowLength(l)):(l=a,b("y0"),b("dy"));else{if(!l)return 0;l=m.minRowLength(l);b("x0");b("dx")}return e._length=l}},{"../../lib":700,"../../registry":829}],1078:[function(a,p,l){function m(a){return{show:{valType:"boolean",dflt:!1},opacity:{valType:"number",min:0,max:1,dflt:1},scale:{valType:"number",min:0,max:10,dflt:2/3}}}l=a("../scatter/attributes");var k=a("../../components/colorscale/attributes"),h=a("../../components/fx/hovertemplate_attributes"),
e=a("../../plots/attributes"),f=a("../../constants/gl3d_dashes"),b=a("../../constants/gl3d_markers"),n=a("../../lib/extend").extendFlat;a=a("../../plot_api/edit_types").overrideAll;var q=l.marker,r=q.line;f=n({width:l.line.width,dash:{valType:"enumerated",values:Object.keys(f),dflt:"solid"}},k("line"));p=p.exports=a({x:l.x,y:l.y,z:{valType:"data_array"},text:n({},l.text,{}),hovertext:n({},l.hovertext,{}),hovertemplate:h(),mode:n({},l.mode,{dflt:"lines+markers"}),surfaceaxis:{valType:"enumerated",
values:[-1,0,1,2],dflt:-1},surfacecolor:{valType:"color"},projection:{x:m("x"),y:m("y"),z:m("z")},connectgaps:l.connectgaps,line:f,marker:n({symbol:{valType:"enumerated",values:Object.keys(b),dflt:"circle",arrayOk:!0},size:n({},q.size,{dflt:8}),sizeref:q.sizeref,sizemin:q.sizemin,sizemode:q.sizemode,opacity:n({},q.opacity,{arrayOk:!1}),colorbar:q.colorbar,line:n({width:n({},r.width,{arrayOk:!1})},k("marker.line"))},k("marker")),textposition:n({},l.textposition,{dflt:"top center"}),textfont:{color:l.textfont.color,
size:l.textfont.size,family:n({},l.textfont.family,{arrayOk:!1})},hoverinfo:n({},e.hoverinfo)},"calc","nested");p.x.editType=p.y.editType=p.z.editType="calc+clearAxisTypes"},{"../../components/colorscale/attributes":584,"../../components/fx/hovertemplate_attributes":615,"../../constants/gl3d_dashes":674,"../../constants/gl3d_markers":675,"../../lib/extend":690,"../../plot_api/edit_types":731,"../../plots/attributes":745,"../scatter/attributes":1051}],1079:[function(a,p,l){var m=a("../scatter/arrays_to_calcdata"),
k=a("../scatter/colorscale_calc");p.exports=function(a,e){var f=[{x:!1,y:!1,trace:e,t:{}}];m(f,e);k(a,e);return f}},{"../scatter/arrays_to_calcdata":1050,"../scatter/colorscale_calc":1054}],1080:[function(a,p,l){function m(a,e,f,b){if(!e||!e.visible)return null;e=k.getComponentMethod("errorbars","makeComputeError")(e);for(var h=Array(a.length),l=0;l<a.length;l++){var m=e(+a[l],l);if("log"===b.type){var d=b.c2l(a[l]),g=a[l]-m[0];m=a[l]+m[1];h[l]=[(b.c2l(g,!0)-d)*f,(b.c2l(m,!0)-d)*f];0<g&&(d=b.c2l(g),
b._lowerLogErrorBound||(b._lowerLogErrorBound=d),b._lowerErrorBound=Math.min(b._lowerLogErrorBound,d))}else h[l]=[-m[0]*f,m[1]*f]}return h}var k=a("../../registry");p.exports=function(a,e,f){a=[m(a.x,a.error_x,e[0],f.xaxis),m(a.y,a.error_y,e[1],f.yaxis),m(a.z,a.error_z,e[2],f.zaxis)];a:{for(e=0;e<a.length;e++)if(a[e]){e=a[e].length;break a}e=0}if(0===e)return null;f=Array(e);for(var b=0;b<e;b++){for(var h=[[0,0,0],[0,0,0]],k=0;3>k;k++)if(a[k])for(var l=0;2>l;l++)h[l][k]=a[k][b][l];f[b]=h}return f}},
{"../../registry":829}],1081:[function(a,p,l){function m(a,b){this.scene=a;this.uid=b;this.color=this.delaunayMesh=this.textMarkers=this.errorBars=this.scatterPlot=this.linePlot=null;this.mode="";this.dataPoints=[];this.axesBounds=[[-Infinity,-Infinity,-Infinity],[Infinity,Infinity,Infinity]];this.data=this.textLabels=null}function k(a){return null===a||void 0===a?0:-1<a.indexOf("left")?-1:-1<a.indexOf("right")?1:0}function h(a){return null===a||void 0===a?0:-1<a.indexOf("top")?-1:-1<a.indexOf("bottom")?
1:0}function e(a,b){return b(4*a)}function f(a){return z[a]}function b(a,b,c,d,e){if(v.isArrayOrTypedArray(a)){var f=[];for(var g=0;g<b;g++)f[g]=void 0===a[g]?d:c(a[g],e)}else f=c(a,v.identity);return f}function n(a){if(Array.isArray(a)){var b=a[0];Array.isArray(b)&&(a=b);return"rgb("+a.slice(0,3).map(function(a){return Math.round(255*a)})+")"}return null}var q=a("gl-line3d"),r=a("gl-scatter3d"),d=a("gl-error3d"),g=a("gl-mesh3d"),c=a("delaunay-triangulate"),v=a("../../lib"),t=a("../../lib/str2rgbarray"),
w=a("../../lib/gl_format_color").formatColor,x=a("../scatter/make_bubble_size_func"),D=a("../../constants/gl3d_dashes"),z=a("../../constants/gl3d_markers"),A=a("./calc_errors");a=m.prototype;a.handlePick=function(a){if(a.object&&(a.object===this.linePlot||a.object===this.delaunayMesh||a.object===this.textMarkers||a.object===this.scatterPlot)){var b=a.index=a.data.index;a.object.highlight&&a.object.highlight(null);this.scatterPlot&&(a.object=this.scatterPlot,this.scatterPlot.highlight(a.data));a.textLabel=
"";if(this.textLabels)if(Array.isArray(this.textLabels)){if(this.textLabels[b]||0===this.textLabels[b])a.textLabel=this.textLabels[b]}else a.textLabel=this.textLabels;a.traceCoordinate=[this.data.x[b],this.data.y[b],this.data.z[b]];return!0}};a.update=function(a){var l=this.scene.glplot.gl;var m=D.solid;this.data=a;var p=this.scene,u=[],y=p.fullSceneLayout;p=p.dataScale;var B=y.xaxis,C=y.yaxis,z=y.zaxis,G=a.marker,F=a.line,K=a.x||[],ca=a.y||[],U=a.z||[],T=K.length,Y=a.xcalendar,ia=a.ycalendar,S=a.zcalendar,
W;for(W=0;W<T;W++){var fa=B.d2l(K[W],0,Y)*p[0];var qa=C.d2l(ca[W],0,ia)*p[1];var ha=z.d2l(U[W],0,S)*p[2];u[W]=[fa,qa,ha]}if(Array.isArray(a.text))var ea=a.text;else if(void 0!==a.text)for(ea=Array(T),W=0;W<T;W++)ea[W]=a.text;u={position:u,mode:a.mode,text:ea};"line"in a&&(u.lineColor=w(F,1,T),u.lineWidth=F.width,u.lineDashes=F.dash);"marker"in a&&(W=x(a),u.scatterColor=w(G,1,T),u.scatterSize=b(G.size,T,e,20,W),u.scatterMarker=b(G.symbol,T,f,"●"),u.scatterLineWidth=G.line.width,u.scatterLineColor=
w(G.line,1,T),u.scatterAngle=0);if("textposition"in a){W=a.textposition;G=[0,0];if(Array.isArray(W))for(F=0;F<W.length;F++)G[F]=[0,0],W[F]&&(G[F][0]=k(W[F]),G[F][1]=h(W[F]));else G[0]=k(W),G[1]=h(W);u.textOffset=G;u.textColor=w(a.textfont,1,T);u.textSize=b(a.textfont.size,T,v.identity,12);u.textFont=a.textfont.family;u.textAngle=0}T=["x","y","z"];u.project=[!1,!1,!1];u.projectScale=[1,1,1];u.projectOpacity=[1,1,1];for(W=0;3>W;++W)if(G=a.projection[T[W]],u.project[W]=G.show)u.projectOpacity[W]=G.opacity,
u.projectScale[W]=G.scale;u.errorBounds=A(a,p,y);y=[a.error_x,a.error_y,a.error_z];p=[0,0,0];T=[[0,0,0],[0,0,0],[0,0,0]];W=[1,1,1];for(G=0;3>G;G++)(F=y[G])&&!1!==F.copy_zstyle&&!1!==y[2].visible&&(F=y[2]),F&&F.visible&&(p[G]=F.width/2,T[G]=t(F.color),W[G]=F.thickness);u.errorColor=T;u.errorLineWidth=W;u.errorCapSize=p;u.delaunayAxis=a.surfaceaxis;u.delaunayColor=t(a.surfacecolor);"mode"in u&&(this.mode=u.mode);"lineDashes"in u&&u.lineDashes in D&&(m=D[u.lineDashes]);this.color=n(u.scatterColor)||
n(u.lineColor);this.dataPoints=u.position;m={gl:this.scene.glplot.gl,position:u.position,color:u.lineColor,lineWidth:u.lineWidth||1,dashes:m[0],dashScale:m[1],opacity:a.opacity,connectGaps:a.connectgaps};-1!==this.mode.indexOf("lines")?this.linePlot?this.linePlot.update(m):(this.linePlot=q(m),this.linePlot._trace=this,this.scene.glplot.add(this.linePlot)):this.linePlot&&(this.scene.glplot.remove(this.linePlot),this.linePlot.dispose(),this.linePlot=null);m=a.opacity;a.marker&&a.marker.opacity&&(m*=
a.marker.opacity);m={gl:this.scene.glplot.gl,position:u.position,color:u.scatterColor,size:u.scatterSize,glyph:u.scatterMarker,opacity:m,orthographic:!0,lineWidth:u.scatterLineWidth,lineColor:u.scatterLineColor,project:u.project,projectScale:u.projectScale,projectOpacity:u.projectOpacity};-1!==this.mode.indexOf("markers")?this.scatterPlot?this.scatterPlot.update(m):(this.scatterPlot=r(m),this.scatterPlot._trace=this,this.scatterPlot.highlightScale=1,this.scene.glplot.add(this.scatterPlot)):this.scatterPlot&&
(this.scene.glplot.remove(this.scatterPlot),this.scatterPlot.dispose(),this.scatterPlot=null);m={gl:this.scene.glplot.gl,position:u.position,glyph:u.text,color:u.textColor,size:u.textSize,angle:u.textAngle,alignment:u.textOffset,font:u.textFont,orthographic:!0,lineWidth:0,project:!1,opacity:a.opacity};this.textLabels=a.hovertext||a.text;-1!==this.mode.indexOf("text")?this.textMarkers?this.textMarkers.update(m):(this.textMarkers=r(m),this.textMarkers._trace=this,this.textMarkers.highlightScale=1,this.scene.glplot.add(this.textMarkers)):
this.textMarkers&&(this.scene.glplot.remove(this.textMarkers),this.textMarkers.dispose(),this.textMarkers=null);m={gl:this.scene.glplot.gl,position:u.position,color:u.errorColor,error:u.errorBounds,lineWidth:u.errorLineWidth,capSize:u.errorCapSize,opacity:a.opacity};this.errorBars?u.errorBounds?this.errorBars.update(m):(this.scene.glplot.remove(this.errorBars),this.errorBars.dispose(),this.errorBars=null):u.errorBounds&&(this.errorBars=d(m),this.errorBars._trace=this,this.scene.glplot.add(this.errorBars));
if(0<=u.delaunayAxis){m=u.position;y=u.delaunayColor;p=u.delaunayAxis;T=(p+1)%3;W=(p+2)%3;G=[];p=[];for(u=0;u<m.length;++u)F=m[u],!isNaN(F[T])&&isFinite(F[T])&&!isNaN(F[W])&&isFinite(F[W])&&(G.push([F[T],F[W]]),p.push(u));T=c(G);for(u=0;u<T.length;++u)for(W=T[u],G=0;G<W.length;++G)W[G]=p[W[G]];m={positions:m,cells:T,meshColor:y};m.opacity=a.opacity;this.delaunayMesh?this.delaunayMesh.update(m):(m.gl=l,this.delaunayMesh=g(m),this.delaunayMesh._trace=this,this.scene.glplot.add(this.delaunayMesh))}else this.delaunayMesh&&
(this.scene.glplot.remove(this.delaunayMesh),this.delaunayMesh.dispose(),this.delaunayMesh=null)};a.dispose=function(){this.linePlot&&(this.scene.glplot.remove(this.linePlot),this.linePlot.dispose());this.scatterPlot&&(this.scene.glplot.remove(this.scatterPlot),this.scatterPlot.dispose());this.errorBars&&(this.scene.glplot.remove(this.errorBars),this.errorBars.dispose());this.textMarkers&&(this.scene.glplot.remove(this.textMarkers),this.textMarkers.dispose());this.delaunayMesh&&(this.scene.glplot.remove(this.delaunayMesh),
this.delaunayMesh.dispose())};p.exports=function(a,b){a=new m(a,b.uid);a.update(b);return a}},{"../../constants/gl3d_dashes":674,"../../constants/gl3d_markers":675,"../../lib":700,"../../lib/gl_format_color":697,"../../lib/str2rgbarray":723,"../scatter/make_bubble_size_func":1068,"./calc_errors":1080,"delaunay-triangulate":156,"gl-error3d":243,"gl-line3d":251,"gl-mesh3d":276,"gl-scatter3d":293}],1082:[function(a,p,l){function m(a,b,e,c){var d=0,f=e("x"),g=e("y");e=e("z");k.getComponentMethod("calendars",
"handleTraceDefaults")(a,b,["x","y","z"],c);f&&g&&e&&(d=Math.min(f.length,g.length,e.length),b._length=b._xlength=b._ylength=b._zlength=d);return d}var k=a("../../registry"),h=a("../../lib"),e=a("../scatter/subtypes"),f=a("../scatter/marker_defaults"),b=a("../scatter/line_defaults"),n=a("../scatter/text_defaults"),q=a("./attributes");p.exports=function(a,d,g,c){function l(b,c){return h.coerce(a,d,q,b,c)}if(m(a,d,l,c)){l("text");l("hovertext");l("hovertemplate");l("mode");e.hasLines(d)&&(l("connectgaps"),
b(a,d,g,c,l));e.hasMarkers(d)&&f(a,d,g,c,l,{noSelect:!0});e.hasText(d)&&n(a,d,c,l,{noSelect:!0});c=(d.line||{}).color;var p=(d.marker||{}).color;0<=l("surfaceaxis")&&l("surfacecolor",c||p);for(var r=["x","y","z"],u=0;3>u;++u){var w="projection."+r[u];l(w+".show")&&(l(w+".opacity"),l(w+".scale"))}r=k.getComponentMethod("errorbars","supplyDefaults");r(a,d,c||p||g,{axis:"z"});r(a,d,c||p||g,{axis:"y",inherit:"z"});r(a,d,c||p||g,{axis:"x",inherit:"z"})}else d.visible=!1}},{"../../lib":700,"../../registry":829,
"../scatter/line_defaults":1064,"../scatter/marker_defaults":1070,"../scatter/subtypes":1075,"../scatter/text_defaults":1076,"./attributes":1078}],1083:[function(a,p,l){l={};l.plot=a("./convert");l.attributes=a("./attributes");l.markerSymbols=a("../../constants/gl3d_markers");l.supplyDefaults=a("./defaults");l.colorbar=[{container:"marker",min:"cmin",max:"cmax"},{container:"line",min:"cmin",max:"cmax"}];l.calc=a("./calc");l.moduleType="trace";l.name="scatter3d";l.basePlotModule=a("../../plots/gl3d");
l.categories=["gl3d","symbols","showLegend"];l.meta={};p.exports=l},{"../../constants/gl3d_markers":675,"../../plots/gl3d":789,"./attributes":1078,"./calc":1079,"./convert":1081,"./defaults":1082}],1084:[function(a,p,l){l=a("../scatter/attributes");var m=a("../../plots/attributes"),k=a("../../components/fx/hovertemplate_attributes"),h=a("../../components/colorscale/attributes"),e=a("../../components/colorbar/attributes");a=a("../../lib/extend").extendFlat;var f=l.marker,b=l.line,n=f.line;p.exports=
{carpet:{valType:"string",editType:"calc"},a:{valType:"data_array",editType:"calc"},b:{valType:"data_array",editType:"calc"},mode:a({},l.mode,{dflt:"markers"}),text:a({},l.text,{}),hovertext:a({},l.hovertext,{}),line:{color:b.color,width:b.width,dash:b.dash,shape:a({},b.shape,{values:["linear","spline"]}),smoothing:b.smoothing,editType:"calc"},connectgaps:l.connectgaps,fill:a({},l.fill,{values:["none","toself","tonext"],dflt:"none"}),fillcolor:l.fillcolor,marker:a({symbol:f.symbol,opacity:f.opacity,
maxdisplayed:f.maxdisplayed,size:f.size,sizeref:f.sizeref,sizemin:f.sizemin,sizemode:f.sizemode,line:a({width:n.width,editType:"calc"},h("marker.line")),gradient:f.gradient,editType:"calc"},h("marker"),{colorbar:e}),textfont:l.textfont,textposition:l.textposition,selected:l.selected,unselected:l.unselected,hoverinfo:a({},m.hoverinfo,{flags:["a","b","text","name"]}),hoveron:l.hoveron,hovertemplate:k()}},{"../../components/colorbar/attributes":578,"../../components/colorscale/attributes":584,"../../components/fx/hovertemplate_attributes":615,
"../../lib/extend":690,"../../plots/attributes":745,"../scatter/attributes":1051}],1085:[function(a,p,l){var m=a("fast-isnumeric"),k=a("../scatter/colorscale_calc"),h=a("../scatter/arrays_to_calcdata"),e=a("../scatter/calc_selection"),f=a("../scatter/calc").calcMarkerSize,b=a("../carpet/lookup_carpetid");p.exports=function(a,l){var n=l._carpetTrace=b(a,l);if(n&&n.visible&&"legendonly"!==n.visible){var d;l.xaxis=n.xaxis;l.yaxis=n.yaxis;var g=l._length,c=Array(g),p=!1;for(d=0;d<g;d++){var q=l.a[d];
var u=l.b[d];if(m(q)&&m(u)){var w=n.ab2xy(+q,+u,!0),x=n.isVisible(+q,+u);x||(p=!0);c[d]={x:w[0],y:w[1],a:q,b:u,vis:x}}else c[d]={x:!1,y:!1}}l._needsCull=p;c[0].carpet=n;c[0].trace=l;f(l,g);k(a,l);h(c,l);e(c,l);return c}}},{"../carpet/lookup_carpetid":897,"../scatter/arrays_to_calcdata":1050,"../scatter/calc":1052,"../scatter/calc_selection":1053,"../scatter/colorscale_calc":1054,"fast-isnumeric":221}],1086:[function(a,p,l){var m=a("../../lib"),k=a("../scatter/constants"),h=a("../scatter/subtypes"),
e=a("../scatter/marker_defaults"),f=a("../scatter/line_defaults"),b=a("../scatter/line_shape_defaults"),n=a("../scatter/text_defaults"),q=a("../scatter/fillcolor_defaults"),r=a("./attributes");p.exports=function(a,g,c,l){function d(b,c){return m.coerce(a,g,r,b,c)}d("carpet");g.xaxis="x";g.yaxis="y";var p=d("a"),v=d("b");if(p=Math.min(p.length,v.length)){g._length=p;d("text");d("hovertext");d("mode",p<k.PTS_LINESONLY?"lines+markers":"lines");h.hasLines(g)&&(f(a,g,c,l,d),b(a,g,d),d("connectgaps"));
h.hasMarkers(g)&&e(a,g,c,l,d,{gradient:!0});h.hasText(g)&&n(a,g,l,d);l=[];if(h.hasMarkers(g)||h.hasText(g))d("marker.maxdisplayed"),l.push("points");d("fill");"none"!==g.fill&&(q(a,g,c,d),h.hasLines(g)||b(a,g,d));"tonext"!==g.fill&&"toself"!==g.fill||l.push("fills");"fills"!==d("hoveron",l.join("+")||"points")&&d("hovertemplate");m.coerceSelectionMarkerOpacity(g,d)}else g.visible=!1}},{"../../lib":700,"../scatter/constants":1055,"../scatter/fillcolor_defaults":1060,"../scatter/line_defaults":1064,
"../scatter/line_shape_defaults":1066,"../scatter/marker_defaults":1070,"../scatter/subtypes":1075,"../scatter/text_defaults":1076,"./attributes":1084}],1087:[function(a,p,l){p.exports=function(a,k,h,e,f){k=e[f];a.a=k.a;a.b=k.b;a.y=k.y;return a}},{}],1088:[function(a,p,l){var m=a("../scatter/hover"),k=a("../scatter/fill_hover_text");p.exports=function(a,e,f,b){function h(a,b){var d=a.labelprefix&&0<a.labelprefix.length?a.labelprefix.replace(/ = $/,""):a._hovertitle;c.push(d+": "+b.toFixed(3)+a.labelsuffix)}
if((e=m(a,e,f,b))&&!1!==e[0].index){f=e[0];if(void 0===f.index)return b=a.xa._length,a=b*(1-f.y0/a.ya._length)/2,b-=a,f.x0=Math.max(Math.min(f.x0,b),a),f.x1=Math.max(Math.min(f.x1,b),a),e;a=f.cd[f.index];f.a=a.a;f.b=a.b;f.xLabelVal=void 0;f.yLabelVal=void 0;b=f.trace;var l=b._carpet,p=l.ab2ij([a.a,a.b]),d=Math.floor(p[0]),g=Math.floor(p[1]);p=l.evalxy([],d,g,p[0]-d,p[1]-g);f.yLabel=p[1].toFixed(3);delete f.text;var c=[];b.hovertemplate||(p=(a.hi||b.hoverinfo).split("+"),-1!==p.indexOf("all")&&(p=
["a","b","text"]),-1!==p.indexOf("a")&&h(l.aaxis,a.a),-1!==p.indexOf("b")&&h(l.baxis,a.b),c.push("y: "+f.yLabel),-1!==p.indexOf("text")&&k(a,b,c),f.extraText=c.join("\x3cbr\x3e"));return e}}},{"../scatter/fill_hover_text":1059,"../scatter/hover":1062}],1089:[function(a,p,l){l={};l.attributes=a("./attributes");l.supplyDefaults=a("./defaults");l.colorbar=a("../scatter/marker_colorbar");l.calc=a("./calc");l.plot=a("./plot");l.style=a("../scatter/style").style;l.styleOnSelect=a("../scatter/style").styleOnSelect;
l.hoverPoints=a("./hover");l.selectPoints=a("../scatter/select");l.eventData=a("./event_data");l.moduleType="trace";l.name="scattercarpet";l.basePlotModule=a("../../plots/cartesian");l.categories="svg carpet symbols showLegend carpetDependent zoomScale".split(" ");l.meta={};p.exports=l},{"../../plots/cartesian":759,"../scatter/marker_colorbar":1069,"../scatter/select":1072,"../scatter/style":1074,"./attributes":1084,"./calc":1085,"./defaults":1086,"./event_data":1087,"./hover":1088,"./plot":1090}],
1090:[function(a,p,l){var m=a("../scatter/plot"),k=a("../../plots/cartesian/axes"),h=a("../../components/drawing");p.exports=function(a,f,b,l){var e=b[0][0].carpet;f={xaxis:k.getFromId(a,e.xaxis||"x"),yaxis:k.getFromId(a,e.yaxis||"y"),plot:f.plot};m(a,f,b,l);for(f=0;f<b.length;f++)e=b[f][0].trace,e=l.selectAll("g.trace"+e.uid+" .js-line"),h.setClipUrl(e,b[f][0].carpet._clipPathId,a)}},{"../../components/drawing":598,"../../plots/cartesian/axes":748,"../scatter/plot":1071}],1091:[function(a,p,l){l=
a("../../components/fx/hovertemplate_attributes");var m=a("../scatter/attributes"),k=a("../../plots/attributes"),h=a("../../components/colorscale/attributes"),e=a("../../components/drawing/attributes").dash,f=a("../../lib/extend").extendFlat;a=a("../../plot_api/edit_types").overrideAll;var b=m.marker,n=m.line,q=b.line;p.exports=a({lon:{valType:"data_array"},lat:{valType:"data_array"},locations:{valType:"data_array"},locationmode:{valType:"enumerated",values:["ISO-3","USA-states","country names"],
dflt:"ISO-3"},mode:f({},m.mode,{dflt:"markers"}),text:f({},m.text,{}),hovertext:f({},m.hovertext,{}),textfont:m.textfont,textposition:m.textposition,line:{color:n.color,width:n.width,dash:e},connectgaps:m.connectgaps,marker:f({symbol:b.symbol,opacity:b.opacity,size:b.size,sizeref:b.sizeref,sizemin:b.sizemin,sizemode:b.sizemode,colorbar:b.colorbar,line:f({width:q.width},h("marker.line")),gradient:b.gradient},h("marker")),fill:{valType:"enumerated",values:["none","toself"],dflt:"none"},fillcolor:m.fillcolor,
selected:m.selected,unselected:m.unselected,hoverinfo:f({},k.hoverinfo,{flags:["lon","lat","location","text","name"]}),hovertemplate:l()},"calc","nested")},{"../../components/colorscale/attributes":584,"../../components/drawing/attributes":597,"../../components/fx/hovertemplate_attributes":615,"../../lib/extend":690,"../../plot_api/edit_types":731,"../../plots/attributes":745,"../scatter/attributes":1051}],1092:[function(a,p,l){var m=a("fast-isnumeric"),k=a("../../constants/numerical").BADNUM,h=a("../scatter/colorscale_calc"),
e=a("../scatter/arrays_to_calcdata"),f=a("../scatter/calc_selection"),b=a("../../lib")._;p.exports=function(a,l){for(var n=Array.isArray(l.locations),d=n?l.locations.length:l._length,g=Array(d),c=0;c<d;c++){var p=g[c]={};if(n){var q=l.locations[c];p.loc="string"===typeof q?q:null}else{q=l.lon[c];var u=l.lat[c];m(q)&&m(u)?p.lonlat=[+q,+u]:p.lonlat=[k,k]}}e(g,l);h(a,l);f(g,l);d&&(g[0].t={labels:{lat:b(a,"lat:")+" ",lon:b(a,"lon:")+" "}});return g}},{"../../constants/numerical":677,"../../lib":700,"../scatter/arrays_to_calcdata":1050,
"../scatter/calc_selection":1053,"../scatter/colorscale_calc":1054,"fast-isnumeric":221}],1093:[function(a,p,l){function m(a,b,e){if(a=e("locations"))return e("locationmode"),e=a.length;a=e("lon")||[];e=e("lat")||[];e=Math.min(a.length,e.length);return b._length=e}var k=a("../../lib"),h=a("../scatter/subtypes"),e=a("../scatter/marker_defaults"),f=a("../scatter/line_defaults"),b=a("../scatter/text_defaults"),n=a("../scatter/fillcolor_defaults"),q=a("./attributes");p.exports=function(a,d,g,c){function l(b,
c){return k.coerce(a,d,q,b,c)}m(a,d,l)?(l("text"),l("hovertext"),l("hovertemplate"),l("mode"),h.hasLines(d)&&(f(a,d,g,c,l),l("connectgaps")),h.hasMarkers(d)&&e(a,d,g,c,l,{gradient:!0}),h.hasText(d)&&b(a,d,c,l),l("fill"),"none"!==d.fill&&n(a,d,g,l),k.coerceSelectionMarkerOpacity(d,l)):d.visible=!1}},{"../../lib":700,"../scatter/fillcolor_defaults":1060,"../scatter/line_defaults":1064,"../scatter/marker_defaults":1070,"../scatter/subtypes":1075,"../scatter/text_defaults":1076,"./attributes":1091}],
1094:[function(a,p,l){p.exports=function(a,k){a.lon=k.lon;a.lat=k.lat;a.location=k.loc?k.loc:null;return a}},{}],1095:[function(a,p,l){function m(a,e,d,f){function c(a){return h.tickText(d,d.c2l(a),"hover").text+"°"}if(!a.hovertemplate){var g=e.hi||a.hoverinfo,k="all"===g?n.hoverinfo.flags:g.split("+");g=-1!==k.indexOf("location")&&Array.isArray(a.locations);var l=-1!==k.indexOf("lon"),m=-1!==k.indexOf("lat");k=-1!==k.indexOf("text");var p=[];g?p.push(e.loc):l&&m?p.push("("+c(e.lonlat[0])+", "+c(e.lonlat[1])+
")"):l?p.push(f.lon+c(e.lonlat[0])):m&&p.push(f.lat+c(e.lonlat[1]));k&&b(e,a,p);return p.join("\x3cbr\x3e")}}var k=a("../../components/fx"),h=a("../../plots/cartesian/axes"),e=a("../../constants/numerical").BADNUM,f=a("../scatter/get_trace_color"),b=a("../scatter/fill_hover_text"),n=a("./attributes");p.exports=function(a,b,d){var g=a.cd,c=g[0].trace,h=a.xa,l=a.ya,n=a.subplot,p=n.projection.isLonLatOverEdges,q=n.project;k.getClosest(g,function(a){var c=a.lonlat;if(c[0]===e||p(c))return Infinity;var f=
q(c),g=q([b,d]);c=Math.abs(f[0]-g[0]);f=Math.abs(f[1]-g[1]);a=Math.max(3,a.mrc||0);return Math.max(Math.sqrt(c*c+f*f)-a,1-3/a)},a);if(!1!==a.index){var r=g[a.index],u=r.lonlat;h=[h.c2p(u),l.c2p(u)];l=r.mrc||1;a.x0=h[0]-l;a.x1=h[0]+l;a.y0=h[1]-l;a.y1=h[1]+l;a.loc=r.loc;a.lon=u[0];a.lat=u[1];a.color=f(c,r);a.extraText=m(c,r,n.mockAxis,g[0].t.labels);a.hovertemplate=c.hovertemplate;return[a]}}},{"../../components/fx":616,"../../constants/numerical":677,"../../plots/cartesian/axes":748,"../scatter/fill_hover_text":1059,
"../scatter/get_trace_color":1061,"./attributes":1091}],1096:[function(a,p,l){l={};l.attributes=a("./attributes");l.supplyDefaults=a("./defaults");l.colorbar=a("../scatter/marker_colorbar");l.calc=a("./calc");l.plot=a("./plot");l.style=a("./style");l.styleOnSelect=a("../scatter/style").styleOnSelect;l.hoverPoints=a("./hover");l.eventData=a("./event_data");l.selectPoints=a("./select");l.moduleType="trace";l.name="scattergeo";l.basePlotModule=a("../../plots/geo");l.categories=["geo","symbols","showLegend",
"scatter-like"];l.meta={};p.exports=l},{"../../plots/geo":778,"../scatter/marker_colorbar":1069,"../scatter/style":1074,"./attributes":1091,"./calc":1092,"./defaults":1093,"./event_data":1094,"./hover":1095,"./plot":1097,"./select":1098,"./style":1099}],1097:[function(a,p,l){function m(a,g){var c=a[0].trace;if(Array.isArray(c.locations)){g=f(c,g);c=c.locationmode;for(var d=0;d<a.length;d++){var h=a[d],k=b(c,h.loc,g);h.lonlat=k?k.properties.ct:[e,e]}}}var k=a("d3"),h=a("../../lib"),e=a("../../constants/numerical").BADNUM,
f=a("../../lib/topojson_utils").getTopojsonFeatures,b=a("../../lib/geo_location_utils").locationToFeature,n=a("../../lib/geojson_utils"),q=a("../scatter/subtypes"),r=a("./style");p.exports=function(a,b,c){for(var d=0;d<c.length;d++)m(c[d],b.topojson);b=b.layers.frontplot.select(".scatterlayer");c=h.makeTraceGroups(b,c,"trace scattergeo");c.selectAll("*").remove();c.each(function(b){var c=b[0].node3=k.select(this),d=b[0].trace;if(q.hasLines(d)||"none"!==d.fill){var f=n.calcTraceToLineCoords(b);f="none"!==
d.fill?n.makePolygon(f):n.makeLine(f);c.selectAll("path.js-line").data([{geojson:f,trace:d}]).enter().append("path").classed("js-line",!0).style("stroke-miterlimit",2)}q.hasMarkers(d)&&c.selectAll("path.point").data(h.identity).enter().append("path").classed("point",!0).each(function(a){a.lonlat[0]===e&&k.select(this).remove()});q.hasText(d)&&c.selectAll("g").data(h.identity).enter().append("g").append("text").each(function(a){a.lonlat[0]===e&&k.select(this).remove()});r(a,b)})}},{"../../constants/numerical":677,
"../../lib":700,"../../lib/geo_location_utils":693,"../../lib/geojson_utils":694,"../../lib/topojson_utils":727,"../scatter/subtypes":1075,"./style":1099,d3:154}],1098:[function(a,p,l){var m=a("../scatter/subtypes"),k=a("../../constants/numerical").BADNUM;p.exports=function(a,e){var f=a.cd,b=a.xaxis,h=a.yaxis,l=[],p=f[0].trace,d;if(!m.hasMarkers(p)&&!m.hasText(p))return[];if(!1===e)for(d=0;d<f.length;d++)f[d].selected=0;else for(d=0;d<f.length;d++){p=f[d];var g=p.lonlat;if(g[0]!==k){var c=b.c2p(g);
var q=h.c2p(g);e.contains([c,q],null,d,a)?(l.push({pointNumber:d,lon:g[0],lat:g[1]}),p.selected=1):p.selected=0}}return l}},{"../../constants/numerical":677,"../scatter/subtypes":1075}],1099:[function(a,p,l){function m(a,l){var m=l[0].trace,d=l[0].node3;d.style("opacity",l[0].trace.opacity);f(d,m,a);b(d,m,a);d.selectAll("path.js-line").style("fill","none").each(function(a){var b=k.select(this);a=a.trace;var d=a.line||{};b.call(e.stroke,d.color).call(h.dashLine,d.dash||"",d.width||0);"none"!==a.fill&&
b.call(e.fill,a.fillcolor)})}var k=a("d3"),h=a("../../components/drawing"),e=a("../../components/color");a=a("../scatter/style");var f=a.stylePoints,b=a.styleText;p.exports=function(a,b){b&&m(a,b)}},{"../../components/color":577,"../../components/drawing":598,"../scatter/style":1074,d3:154}],1100:[function(a,p,l){var m=a("../../plots/attributes");l=a("../scatter/attributes");var k=a("../../components/colorscale/attributes"),h=a("../../lib/extend").extendFlat,e=a("../../plot_api/edit_types").overrideAll;
a=a("./constants").DASHES;var f=l.line,b=l.marker,n=b.line;p=p.exports=e({x:l.x,x0:l.x0,dx:l.dx,y:l.y,y0:l.y0,dy:l.dy,text:l.text,hovertext:l.hovertext,textposition:l.textposition,textfont:l.textfont,mode:{valType:"flaglist",flags:["lines","markers","text"],extras:["none"]},line:{color:f.color,width:f.width,shape:{valType:"enumerated",values:["linear","hv","vh","hvh","vhv"],dflt:"linear",editType:"plot"},dash:{valType:"enumerated",values:Object.keys(a),dflt:"solid"}},marker:h({},k("marker"),{symbol:b.symbol,
size:b.size,sizeref:b.sizeref,sizemin:b.sizemin,sizemode:b.sizemode,opacity:b.opacity,colorbar:b.colorbar,line:h({},k("marker.line"),{width:n.width})}),connectgaps:l.connectgaps,fill:h({},l.fill,{dflt:"none"}),fillcolor:l.fillcolor,selected:{marker:l.selected.marker,textfont:l.selected.textfont},unselected:{marker:l.unselected.marker,textfont:l.unselected.textfont},opacity:m.opacity},"calc","nested");p.x.editType=p.y.editType=p.x0.editType=p.y0.editType="calc+clearAxisTypes";p.hovertemplate=l.hovertemplate},
{"../../components/colorscale/attributes":584,"../../lib/extend":690,"../../plot_api/edit_types":731,"../../plots/attributes":745,"../scatter/attributes":1051,"./constants":1101}],1101:[function(a,p,l){p.exports={TOO_MANY_POINTS:1E5,SYMBOL_SDF_SIZE:200,SYMBOL_SIZE:20,SYMBOL_STROKE:1,DOT_RE:/-dot/,OPEN_RE:/-open/,DASHES:{solid:[1],dot:[1,1],dash:[4,1],longdash:[8,1],dashdot:[4,1,1,1],longdashdot:[8,1,1,1]}}},{}],1102:[function(a,p,l){function m(a){var b=a._length,c=a.textfont,d=a.textposition,e=Array.isArray(d)?
d:[d],f=c.color;d=c.size;c=c.family;var g={};g.text=a.text;g.opacity=a.opacity;g.font={};g.align=[];g.baseline=[];for(a=0;a<e.length;a++){var h=e[a].split(/\s+/);switch(h[1]){case "left":g.align.push("right");break;case "right":g.align.push("left");break;default:g.align.push(h[1])}switch(h[0]){case "top":g.baseline.push("bottom");break;case "bottom":g.baseline.push("top");break;default:g.baseline.push(h[0])}}if(Array.isArray(f))for(g.color=Array(b),a=0;a<b;a++)g.color[a]=f[a];else g.color=f;if(Array.isArray(d)||
Array.isArray(c))for(g.font=Array(b),a=0;a<b;a++)e=g.font[a]={},e.size=Array.isArray(d)?n(d[a])?d[a]:0:d,e.family=Array.isArray(c)?c[a]:c;else g.font={size:d,family:c};return g}function k(a){var c=a._length,d=a.marker,e={},f=Array.isArray(d.symbol);var h=g.isArrayOrTypedArray(d.color);var k=g.isArrayOrTypedArray(d.line.color),l=g.isArrayOrTypedArray(d.opacity),m=g.isArrayOrTypedArray(d.size),n=g.isArrayOrTypedArray(d.line.width),p;f||(p=D.OPEN_RE.test(d.symbol));if(f||h||k||l){e.colors=Array(c);e.borderColors=
Array(c);k=t(d,d.opacity,c);l=t(d.line,d.opacity,c);if(!Array.isArray(l[0])){var q=l;l=Array(c);for(h=0;h<c;h++)l[h]=q}if(!Array.isArray(k[0]))for(q=k,k=Array(c),h=0;h<c;h++)k[h]=q;e.colors=k;e.borderColors=l;for(h=0;h<c;h++)f&&(p=D.OPEN_RE.test(d.symbol[h])),p&&(l[h]=k[h].slice(),k[h]=k[h].slice(),k[h][3]=0);e.opacity=a.opacity}else p?(e.color=r(d.color,"uint8"),e.color[3]=0,e.borderColor=r(d.color,"uint8")):(e.color=r(d.color,"uint8"),e.borderColor=r(d.line.color,"uint8")),e.opacity=a.opacity*d.opacity;
if(f)for(e.markers=Array(c),h=0;h<c;h++)e.markers[h]=b(d.symbol[h]);else e.marker=b(d.symbol);p=x(a);if(m||n){a=e.sizes=Array(c);f=e.borderSizes=Array(c);k=0;if(m){for(h=0;h<c;h++)a[h]=p(d.size[h]),k+=a[h];var v=k/c}else for(m=p(d.size),h=0;h<c;h++)a[h]=m;if(n)for(h=0;h<c;h++)f[h]=d.line.width[h]/2;else for(m=d.line.width/2,h=0;h<c;h++)f[h]=m;e.sizeAvg=v}else e.size=p(d&&d.size||10),e.borderSizes=p(d.line.width);return e}function h(a,b){a=a.marker;var c={};if(!b)return c;b.marker&&b.marker.symbol?
c=k(g.extendFlat({},a,b.marker)):b.marker&&(b.marker.size&&(c.size=b.marker.size/2),b.marker.color&&(c.colors=b.marker.color),void 0!==b.marker.opacity&&(c.opacity=b.marker.opacity));return c}function e(a,b){var c={};if(!b)return c;b.textfont&&(a={opacity:1,text:a.text,textposition:a.textposition,textfont:g.extendFlat({},a.textfont)},b.textfont&&g.extendFlat(a.textfont,b.textfont),c=m(a));return c}function f(a,b){var c={capSize:2*b.width,lineWidth:b.thickness,color:b.color};b.copy_ystyle&&(c=a.error_y);
return c}function b(a){if("circle"===a)return null;var b=c.symbolNumber(a);var d=c.symbolFuncs[b%100];var e=!!c.symbolNoDot[b%100];b=!!c.symbolNoFill[b%100];var f=D.DOT_RE.test(a);if(E[a])return E[a];d=f&&!e?d(1.1*F)+H:d(F);d=q(d,{w:C,h:C,viewBox:[-F,-F,F,F],stroke:b?J:-J});return(E[a]=d)||null}var n=a("fast-isnumeric"),q=a("svg-path-sdf"),r=a("color-normalize"),d=a("../../registry"),g=a("../../lib"),c=a("../../components/drawing"),v=a("../../plots/cartesian/axis_ids"),t=a("../../lib/gl_format_color").formatColor,
w=a("../scatter/subtypes"),x=a("../scatter/make_bubble_size_func"),D=a("./constants"),z=a("../../constants/interactions").DESELECTDIM,A={start:1,left:1,end:-1,right:-1,middle:0,center:0,bottom:1,top:-1},C=D.SYMBOL_SDF_SIZE,F=D.SYMBOL_SIZE,J=D.SYMBOL_STROKE,E={},H=c.symbolFuncs[0](.05*F);p.exports={style:function(a,b){var c={marker:void 0,markerSel:void 0,markerUnsel:void 0,line:void 0,fill:void 0,errorX:void 0,errorY:void 0,text:void 0,textSel:void 0,textUnsel:void 0};if(!0!==b.visible)return c;w.hasText(b)&&
(c.text=m(b),c.textSel=e(b,b.selected),c.textUnsel=e(b,b.unselected));if(w.hasMarkers(b)&&(c.marker=k(b),c.markerSel=h(b,b.selected),c.markerUnsel=h(b,b.unselected),!b.unselected&&Array.isArray(b.marker.opacity))){var d=b.marker.opacity;c.markerUnsel.opacity=Array(d.length);for(a=0;a<d.length;a++)c.markerUnsel.opacity[a]=z*d[a]}if(w.hasLines(b)){c.line={overlay:!0,thickness:b.line.width,color:b.line.color,opacity:b.opacity};d=(D.DASHES[b.line.dash]||[1]).slice();for(a=0;a<d.length;++a)d[a]*=b.line.width;
c.line.dashes=d}b.error_x&&b.error_x.visible&&(c.errorX=f(b,b.error_x));b.error_y&&b.error_y.visible&&(c.errorY=f(b,b.error_y));b.fill&&"none"!==b.fill&&(c.fill={closed:!0,fill:b.fillcolor,thickness:0});return c},markerStyle:k,markerSelection:h,linePositions:function(a,b,c){var d=c.length,e=d/2;if(w.hasLines(b)&&e)if("hv"===b.line.shape){var f=[];for(a=0;a<e-1;a++)isNaN(c[2*a])||isNaN(c[2*a+1])?f.push(NaN,NaN,NaN,NaN):(f.push(c[2*a],c[2*a+1]),isNaN(c[2*a+2])||isNaN(c[2*a+3])?f.push(NaN,NaN):f.push(c[2*
a+2],c[2*a+1]));f.push(c[d-2],c[d-1])}else if("hvh"===b.line.shape){f=[];for(a=0;a<e-1;a++)if(isNaN(c[2*a])||isNaN(c[2*a+1])||isNaN(c[2*a+2])||isNaN(c[2*a+3]))isNaN(c[2*a])||isNaN(c[2*a+1])?f.push(NaN,NaN):f.push(c[2*a],c[2*a+1]),f.push(NaN,NaN);else{var g=(c[2*a]+c[2*a+2])/2;f.push(c[2*a],c[2*a+1],g,c[2*a+1],g,c[2*a+3])}f.push(c[d-2],c[d-1])}else if("vhv"===b.line.shape){f=[];for(a=0;a<e-1;a++)isNaN(c[2*a])||isNaN(c[2*a+1])||isNaN(c[2*a+2])||isNaN(c[2*a+3])?(isNaN(c[2*a])||isNaN(c[2*a+1])?f.push(NaN,
NaN):f.push(c[2*a],c[2*a+1]),f.push(NaN,NaN)):(g=(c[2*a+1]+c[2*a+3])/2,f.push(c[2*a],c[2*a+1],c[2*a],g,c[2*a+2],g));f.push(c[d-2],c[d-1])}else if("vh"===b.line.shape){f=[];for(a=0;a<e-1;a++)isNaN(c[2*a])||isNaN(c[2*a+1])?f.push(NaN,NaN,NaN,NaN):(f.push(c[2*a],c[2*a+1]),isNaN(c[2*a+2])||isNaN(c[2*a+3])?f.push(NaN,NaN):f.push(c[2*a],c[2*a+3]));f.push(c[d-2],c[d-1])}else f=c;d=!1;for(a=0;a<f.length;a++)if(isNaN(f[a])){d=!0;break}c=d||f.length>D.TOO_MANY_POINTS?"rect":w.hasMarkers(b)?"rect":"round";if(d&&
b.connectgaps)for(b=f[0],d=f[1],a=0;a<f.length;a+=2)isNaN(f[a])||isNaN(f[a+1])?(f[a]=b,f[a+1]=d):(b=f[a],d=f[a+1]);return{join:c,positions:f}},errorBarPositions:function(a,b,c,e,f){function g(a,d){var e=d._id.charAt(0),f=b["error_"+e];if(f&&f.visible&&("linear"===d.type||"log"===d.type)){f=h(f);for(var g={x:0,y:1}[e],k={x:[0,1,2,3],y:[2,3,0,1]}[e],p=new Float64Array(4*l),q=Infinity,r=-Infinity,t=0,v=0;t<l;t++,v+=4){var u=a[t];if(n(u)){var w=c[2*t+g],x=f(u,t),y=x[0];x=x[1];if(n(y)&&n(x)){var A=u+x;
p[v+k[0]]=w-d.c2l(u-y);p[v+k[1]]=d.c2l(A)-w;p[v+k[2]]=0;p[v+k[3]]=0;q=Math.min(q,u-y);r=Math.max(r,u+x)}}}m[e]={positions:c,errors:p,_bnds:[q,r]}}}var h=d.getComponentMethod("errorbars","makeComputeError"),k=v.getFromId(a,b.xaxis);a=v.getFromId(a,b.yaxis);var l=c.length/2,m={};g(e,k);g(f,a);return m},textPosition:function(a,b,c,d){a=b._length;var e={};if(w.hasMarkers(b)){b=c.font;var f=c.align,g=c.baseline;e.offset=Array(a);for(c=0;c<a;c++){var h=d.sizes?d.sizes[c]:d.size,k=Array.isArray(b)?b[c].size:
b.size,l=Array.isArray(f)?1<f.length?f[c]:f[0]:f,m=Array.isArray(g)?1<g.length?g[c]:g[0]:g;m=A[m];h=h?h/.8+1:0;e.offset[c]=[A[l]*h/k,(-m*h-.5*m)/k]}}return e}}},{"../../components/drawing":598,"../../constants/interactions":676,"../../lib":700,"../../lib/gl_format_color":697,"../../plots/cartesian/axis_ids":751,"../../registry":829,"../scatter/make_bubble_size_func":1068,"../scatter/subtypes":1075,"./constants":1101,"color-normalize":110,"fast-isnumeric":221,"svg-path-sdf":519}],1103:[function(a,
p,l){var m=a("../../lib"),k=a("../../registry"),h=a("./attributes"),e=a("../scatter/constants"),f=a("../scatter/subtypes"),b=a("../scatter/xy_defaults"),n=a("../scatter/marker_defaults"),q=a("../scatter/line_defaults"),r=a("../scatter/fillcolor_defaults"),d=a("../scatter/text_defaults");p.exports=function(a,c,l,p){function g(b,d){return m.coerce(a,c,h,b,d)}var t=a.marker?/-open/.test(a.marker.symbol):!1,v=f.isBubble(a),u=b(a,c,p,g);u?(u=u<e.PTS_LINESONLY?"lines+markers":"lines",g("text"),g("hovertext"),
g("hovertemplate"),g("mode",u),f.hasLines(c)&&(g("connectgaps"),q(a,c,l,p,g),g("line.shape")),f.hasMarkers(c)&&(n(a,c,l,p,g),g("marker.line.width",t||v?1:0)),f.hasText(c)&&d(a,c,p,g),p=(c.line||{}).color,t=(c.marker||{}).color,g("fill"),"none"!==c.fill&&r(a,c,l,g),v=k.getComponentMethod("errorbars","supplyDefaults"),v(a,c,p||t||l,{axis:"y"}),v(a,c,p||t||l,{axis:"x",inherit:"y"}),m.coerceSelectionMarkerOpacity(c,g)):c.visible=!1}},{"../../lib":700,"../../registry":829,"../scatter/constants":1055,"../scatter/fillcolor_defaults":1060,
"../scatter/line_defaults":1064,"../scatter/marker_defaults":1070,"../scatter/subtypes":1075,"../scatter/text_defaults":1076,"../scatter/xy_defaults":1077,"./attributes":1100}],1104:[function(a,p,l){function m(a,b,c){a=a._extremes[b._id];b=x(b,c._bnds,{padded:!0});a.min=a.min.concat(b.min);a.max=a.max.concat(b.max)}function k(a,b){var c=b._scene,d={count:0,dirty:!0,lineOptions:[],fillOptions:[],markerOptions:[],markerSelectedOptions:[],markerUnselectedOptions:[],errorXOptions:[],errorYOptions:[],
textOptions:[],textSelectedOptions:[],textUnselectedOptions:[]},e={selectBatch:null,unselectBatch:null,fill2d:!1,scatter2d:!1,error2d:!1,line2d:!1,glText:!1,select2d:null};b._scene||(c=b._scene={},c.init=function(){v.extendFlat(c,e,d)},c.init(),c.update=function(a){var b=v.repeat(a,c.count);c.fill2d&&c.fill2d.update(b);c.scatter2d&&c.scatter2d.update(b);c.line2d&&c.line2d.update(b);c.error2d&&c.error2d.update(b.concat(b));c.select2d&&c.select2d.update(b);if(c.glText)for(b=0;b<c.count;b++)c.glText[b].update(a)},
c.draw=function(){for(var a=c.count,b=c.fill2d,d=c.error2d,e=c.line2d,f=c.scatter2d,g=c.glText,h=c.select2d,k=c.selectBatch,l=c.unselectBatch,m=0;m<a;m++)b&&c.fillOrder[m]&&b.draw(c.fillOrder[m]),e&&c.lineOptions[m]&&e.draw(m),d&&(c.errorXOptions[m]&&d.draw(m),c.errorYOptions[m]&&d.draw(m+a)),!f||!c.markerOptions[m]||k&&k[m]||f.draw(m),g[m]&&c.textOptions[m]&&g[m].render();f&&h&&k&&(h.draw(k),f.draw(l));c.dirty=!1},c.destroy=function(){c.fill2d&&c.fill2d.destroy&&c.fill2d.destroy();c.scatter2d&&c.scatter2d.destroy&&
c.scatter2d.destroy();c.error2d&&c.error2d.destroy&&c.error2d.destroy();c.line2d&&c.line2d.destroy&&c.line2d.destroy();c.select2d&&c.select2d.destroy&&c.select2d.destroy();c.glText&&c.glText.forEach(function(a){a.destroy&&a.destroy()});c.lineOptions=null;c.fillOptions=null;c.markerOptions=null;c.markerSelectedOptions=null;c.markerUnselectedOptions=null;c.errorXOptions=null;c.errorYOptions=null;c.textOptions=null;c.textSelectedOptions=null;c.textUnselectedOptions=null;c.selectBatch=null;c.unselectBatch=
null;b._scene=null});c.dirty||v.extendFlat(c,d);return c}function h(a,b,c){var d=a._size;return[d.l+b.domain[0]*d.w,d.b+c.domain[0]*d.h,a.width-d.r-(1-b.domain[1])*d.w,a.height-d.t-(1-c.domain[1])*d.h]}function e(a,b,d,e){var f=a.xa,g=a.ya,h=a.distance,k=a.dxy,l=a.index;b={pointNumber:l,x:b[l],y:d[l]};b.tx=Array.isArray(e.text)?e.text[l]:e.text;b.htx=Array.isArray(e.hovertext)?e.hovertext[l]:e.hovertext;b.data=Array.isArray(e.customdata)?e.customdata[l]:e.customdata;b.tp=Array.isArray(e.textposition)?
e.textposition[l]:e.textposition;if(d=e.textfont)b.ts=Array.isArray(d.size)?d.size[l]:d.size,b.tc=Array.isArray(d.color)?d.color[l]:d.color,b.tf=Array.isArray(d.family)?d.family[l]:d.family;if(d=e.marker)b.ms=v.isArrayOrTypedArray(d.size)?d.size[l]:d.size,b.mo=v.isArrayOrTypedArray(d.opacity)?d.opacity[l]:d.opacity,b.mx=Array.isArray(d.symbol)?d.symbol[l]:d.symbol,b.mc=v.isArrayOrTypedArray(d.color)?d.color[l]:d.color;var m=d&&d.line;m&&(b.mlc=Array.isArray(m.color)?m.color[l]:m.color,b.mlw=v.isArrayOrTypedArray(m.width)?
m.width[l]:m.width);(d=d&&d.gradient)&&"none"!==d.type&&(b.mgt=Array.isArray(d.type)?d.type[l]:d.type,b.mgc=Array.isArray(d.color)?d.color[l]:d.color);f=f.c2p(b.x,!0);g=g.c2p(b.y,!0);d=b.mrc||1;if(m=e.hoverlabel)b.hbg=Array.isArray(m.bgcolor)?m.bgcolor[l]:m.bgcolor,b.hbc=Array.isArray(m.bordercolor)?m.bordercolor[l]:m.bordercolor,b.hts=Array.isArray(m.font.size)?m.font.size[l]:m.font.size,b.htc=Array.isArray(m.font.color)?m.font.color[l]:m.font.color,b.htf=Array.isArray(m.font.family)?m.font.family[l]:
m.font.family,b.hnl=Array.isArray(m.namelength)?m.namelength[l]:m.namelength;if(m=e.hoverinfo)b.hi=Array.isArray(m)?m[l]:m;if(m=e.hovertemplate)b.ht=Array.isArray(m)?m[l]:m;l={};l[a.index]=b;v.extendFlat(a,{color:H(e,b),x0:f-d,x1:f+d,xLabelVal:b.x,y0:g-d,y1:g+d,yLabelVal:b.y,cd:l,distance:h,spikeDistance:k,hovertemplate:b.ht});b.htx?a.text=b.htx:b.tx?a.text=b.tx:e.text&&(a.text=e.text);M(b,e,a);c.getComponentMethod("errorbars","hoverInfo")(b,e,a);return a}function f(a){a=a[0];var b=a.trace,c=a.t;
a=c._scene;c=c.index;var d=a.selectBatch[c],e=a.unselectBatch[c],f=a.textOptions[c],g=a.textSelectedOptions[c]||{},h=a.textUnselectedOptions[c]||{},k=v.extendFlat({},f);if(d&&e){g=g.color;h=h.color;f=f.color;var l=Array.isArray(f);k.color=Array(b._length);for(b=0;b<d.length;b++){var m=d[b];k.color[m]=g||(l?f[m]:f)}for(b=0;b<e.length;b++)m=e[b],d=l?f[m]:f,k.color[m]=h?h:g?d:D.addOpacity(d,N)}a.glText[c].update(k)}var b=a("regl-scatter2d"),n=a("regl-line2d"),q=a("regl-error2d"),r=a("point-cluster"),
d=a("array-range"),g=a("gl-text"),c=a("../../registry"),v=a("../../lib"),t=a("../../lib/prepare_regl"),w=a("../../plots/cartesian/axis_ids"),x=a("../../plots/cartesian/autorange").findExtremes,D=a("../../components/color"),z=a("../scatter/subtypes");l=a("../scatter/calc");var A=l.calcMarkerSize,C=l.calcAxisExpansion,F=l.setFirstScatter,J=a("../scatter/colorscale_calc"),E=a("../scatter/link_traces"),H=a("../scatter/get_trace_color"),M=a("../scatter/fill_hover_text"),K=a("./convert"),I=a("../../constants/numerical").BADNUM,
Q=a("./constants").TOO_MANY_POINTS,N=a("../../constants/interactions").DESELECTDIM;p.exports={moduleType:"trace",name:"scattergl",basePlotModule:a("../../plots/cartesian"),categories:"gl regl cartesian symbols errorBarsOK showLegend scatter-like".split(" "),attributes:a("./attributes"),supplyDefaults:a("./defaults"),crossTraceDefaults:a("../scatter/cross_trace_defaults"),colorbar:a("../scatter/marker_colorbar"),calc:function(a,b){var c=a._fullLayout,d=w.getFromId(a,b.xaxis),e=w.getFromId(a,b.yaxis),
f=c._plots[b.xaxis+b.yaxis],g=b._length,h=g>=Q,l=2*g,n={},p,q=d.makeCalcdata(b,"x"),t=e.makeCalcdata(b,"y"),u=Array(l);for(p=0;p<g;p++){var x=q[p];var y=t[p];u[2*p]=x===I?NaN:x;u[2*p+1]=y===I?NaN:y}if("log"===d.type)for(p=0;p<l;p+=2)u[p]=d.c2l(u[p]);if("log"===e.type)for(p=1;p<l;p+=2)u[p]=e.c2l(u[p]);if(h&&"log"!==d.type&&"log"!==e.type)n.tree=r(u);else for(l=n.ids=Array(g),p=0;p<g;p++)l[p]=p;J(a,b);p=K.style(a,b);p.marker&&(p.marker.positions=u);p.line&&1<u.length&&v.extendFlat(p.line,K.linePositions(a,
b,u));if(p.errorX||p.errorY)l=K.errorBarPositions(a,b,u,q,t),p.errorX&&v.extendFlat(p.errorX,l.x),p.errorY&&v.extendFlat(p.errorY,l.y);p.text&&(v.extendFlat(p.text,{positions:u},K.textPosition(a,b,p.text,p.marker)),v.extendFlat(p.textSel,{positions:u},K.textPosition(a,b,p.text,p.markerSel)),v.extendFlat(p.textUnsel,{positions:u},K.textPosition(a,b,p.text,p.markerUnsel)));f=k(a,f);F(c,b);var D;h?p.marker&&(D=2*(p.marker.sizeAvg||Math.max(p.marker.size,3))):D=A(b,g);C(a,b,d,e,q,t,D);p.errorX&&m(b,d,
p.errorX);p.errorY&&m(b,e,p.errorY);p.fill&&!f.fill2d&&(f.fill2d=!0);p.marker&&!f.scatter2d&&(f.scatter2d=!0);p.line&&!f.line2d&&(f.line2d=!0);!p.errorX&&!p.errorY||f.error2d||(f.error2d=!0);p.text&&!f.glText&&(f.glText=!0);p.marker&&(p.marker.snap=n.tree||Q);f.lineOptions.push(p.line);f.errorXOptions.push(p.errorX);f.errorYOptions.push(p.errorY);f.fillOptions.push(p.fill);f.markerOptions.push(p.marker);f.markerSelectedOptions.push(p.markerSel);f.markerUnselectedOptions.push(p.markerUnsel);f.textOptions.push(p.text);
f.textSelectedOptions.push(p.textSel);f.textUnselectedOptions.push(p.textUnsel);n._scene=f;n.index=f.count;n.x=q;n.y=t;n.positions=u;f.count++;return[{x:!1,y:!1,t:n,trace:b}]},plot:function(a,c,d){if(d.length){var e=a._fullLayout,k=c._scene,l=c.xaxis,m=c.yaxis;if(k)if(t(a,["ANGLE_instanced_arrays","OES_element_index_uint"])){var p=e._glcanvas.data()[0].regl;E(a,c,d);if(k.dirty){!0===k.error2d&&(k.error2d=q(p));!0===k.line2d&&(k.line2d=n(p));!0===k.scatter2d&&(k.scatter2d=b(p));!0===k.fill2d&&(k.fill2d=
n(p));if(!0===k.glText)for(k.glText=Array(k.count),a=0;a<k.count;a++)k.glText[a]=new g(p);if(k.glText){if(k.count>k.glText.length)for(c=k.count-k.glText.length,a=0;a<c;a++)k.glText.push(new g(p));else k.count<k.glText.length&&k.glText.splice(k.count,k.glText.length-k.count).forEach(function(a){a.destroy()});for(a=0;a<k.count;a++)k.glText[a].update(k.textOptions[a])}k.line2d&&(k.line2d.update(k.lineOptions),k.lineOptions=k.lineOptions.map(function(a){if(a&&a.positions){for(var b=a.positions,c=0;c<
b.length&&(isNaN(b[c])||isNaN(b[c+1]));)c+=2;for(var d=b.length-2;d>c&&(isNaN(b[d])||isNaN(b[d+1]));)d-=2;a.positions=b.slice(c,d+2)}return a}),k.line2d.update(k.lineOptions));k.error2d&&(a=(k.errorXOptions||[]).concat(k.errorYOptions||[]),k.error2d.update(a));k.scatter2d&&k.scatter2d.update(k.markerOptions);k.fillOrder=v.repeat(null,k.count);k.fill2d&&(k.fillOptions=k.fillOptions.map(function(a,b){var c=d[b];if(a&&c&&c[0]&&c[0].trace){var e=c[0];c=e.trace;var f=e.t,g=k.lineOptions[b],h;e=[];c._ownfill&&
e.push(b);c._nexttrace&&e.push(b+1);e.length&&(k.fillOrder[b]=e);e=[];f=g&&g.positions||f.positions;if("tozeroy"===c.fill){for(g=0;g<f.length&&isNaN(f[g+1]);)g+=2;for(h=f.length-2;h>g&&isNaN(f[h+1]);)h-=2;0!==f[g+1]&&(e=[f[g],0]);e=e.concat(f.slice(g,h+2));0!==f[h+1]&&(e=e.concat([f[h],0]))}else if("tozerox"===c.fill){for(g=0;g<f.length&&isNaN(f[g]);)g+=2;for(h=f.length-2;h>g&&isNaN(f[h]);)h-=2;0!==f[g]&&(e=[0,f[g+1]]);e=e.concat(f.slice(g,h+2));0!==f[h]&&(e=e.concat([0,f[h+1]]))}else if("toself"===
c.fill||"tonext"===c.fill){e=[];for(g=h=0;g<f.length;g+=2)if(isNaN(f[g])||isNaN(f[g+1]))e=e.concat(f.slice(h,g)),e.push(f[h],f[h+1]),h=g+2;e=e.concat(f.slice(h));h&&e.push(f[h],f[h+1])}else if(g=c._nexttrace)if(h=k.lineOptions[b+1])if(h=h.positions,"tonexty"===c.fill){e=f.slice();for(b=Math.floor(h.length/2);b--;){f=h[2*b];var l=h[2*b+1];isNaN(f)||isNaN(l)||e.push(f,l)}a.fill=g.fillcolor}if(c._prevtrace&&"tonext"===c._prevtrace.fill){b=k.lineOptions[b-1].positions;f=e.length/2;h=[f];for(g=0;g<b.length;g+=
2)(isNaN(b[g])||isNaN(b[g+1]))&&h.push(g/2+f+1);e=e.concat(b);a.hole=h}a.fillmode=c.fill;a.opacity=c.opacity;a.positions=e;return a}}),k.fill2d.update(k.fillOptions))}k.selectBatch=null;k.unselectBatch=null;a=e.dragmode;p="lasso"===a||"select"===a;c=-1<e.clickmode.indexOf("select");for(a=0;a<d.length;a++){var r=d[a][0];var u=r.trace;var w=r.t,x=w.index;r=u._length;var y=w.x,A=w.y;if(u.selectedpoints||p||c){p||(p=!0);k.selectBatch||(k.selectBatch=[],k.unselectBatch=[]);if(u.selectedpoints){var D=k.selectBatch[x]=
v.selIndices2selPoints(u),B={};for(u=0;u<D.length;u++)B[D[u]]=1;D=[];for(u=0;u<r;u++)B[u]||D.push(u);k.unselectBatch[x]=D}x=w.xpx=Array(r);w=w.ypx=Array(r);for(u=0;u<r;u++)x[u]=l.c2p(y[u]),w[u]=m.c2p(A[u])}else w.xpx=w.ypx=null}p?(k.select2d||(k.select2d=b(e._glcanvas.data()[1].regl)),k.scatter2d&&k.selectBatch&&k.selectBatch.length&&k.scatter2d.update(k.markerUnselectedOptions.map(function(a,b){return k.selectBatch[b]?a:null})),k.select2d&&(k.select2d.update(k.markerOptions),k.select2d.update(k.markerSelectedOptions)),
k.glText&&d.forEach(function(a){z.hasText(((a||[])[0]||{}).trace||{})&&f(a)})):k.scatter2d&&k.scatter2d.update(k.markerOptions);var C={viewport:h(e,l,m),range:[(l._rl||l.range)[0],(m._rl||m.range)[0],(l._rl||l.range)[1],(m._rl||m.range)[1]]};e=v.repeat(C,k.count);k.fill2d&&k.fill2d.update(e);k.line2d&&k.line2d.update(e);k.error2d&&k.error2d.update(e.concat(e));k.scatter2d&&k.scatter2d.update(e);k.select2d&&k.select2d.update(e);k.glText&&k.glText.forEach(function(a){a.update(C)})}else k.init()}},hoverPoints:function(a,
b,c,d){var f=a.cd,g=f[0].t;f=f[0].trace;var h=a.xa,k=a.ya,l=g.x,m=g.y;b=h.c2p(b);c=k.c2p(c);var n=a.distance;if(g.tree){var p=h.p2c(b-n),q=h.p2c(b+n),r=k.p2c(c-n),t=k.p2c(c+n);g="x"===d?g.tree.range(Math.min(p,q),Math.min(k._rl[0],k._rl[1]),Math.max(p,q),Math.max(k._rl[0],k._rl[1])):g.tree.range(Math.min(p,q),Math.min(r,t),Math.max(p,q),Math.max(r,t))}else if(g.ids)g=g.ids;else return[a];if("x"===d)for(d=0;d<g.length;d++){if(q=l[g[d]],q=Math.abs(h.c2p(q)-b),q<n){n=q;p=k.c2p(m[g[d]])-c;var u=Math.sqrt(q*
q+p*p);var v=g[d]}}else for(d=0;d<g.length;d++)q=l[g[d]],p=m[g[d]],q=h.c2p(q)-b,p=k.c2p(p)-c,p=Math.sqrt(q*q+p*p),p<n&&(n=u=p,v=g[d]);a.index=v;a.distance=n;a.dxy=u;if(void 0===v)return[a];e(a,l,m,f);return[a]},selectPoints:function(a,b){var c=a.cd,e=[],g=c[0].trace,h=c[0].t,k=g._length,l=h.x,m=h.y,n=h._scene;if(!n)return e;var p=z.hasText(g),q=z.hasMarkers(g);if(!0!==g.visible||!q&&!p)return e;g=null;var r;if(!1===b||b.degenerate)var t=d(k);else for(g=[],t=[],r=0;r<k;r++)b.contains([h.xpx[r],h.ypx[r]],
!1,r,a)?(g.push(r),e.push({pointNumber:r,x:l[r],y:m[r]})):t.push(r);n.selectBatch||(n.selectBatch=[],n.unselectBatch=[]);if(!n.selectBatch[h.index]){for(r=0;r<n.count;r++)n.selectBatch[r]=[],n.unselectBatch[r]=[];q&&n.scatter2d.update(n.markerUnselectedOptions)}n.selectBatch[h.index]=g;n.unselectBatch[h.index]=t;p&&f(c);return e},sceneUpdate:k,calcHover:e,meta:{}}},{"../../components/color":577,"../../constants/interactions":676,"../../constants/numerical":677,"../../lib":700,"../../lib/prepare_regl":713,
"../../plots/cartesian":759,"../../plots/cartesian/autorange":747,"../../plots/cartesian/axis_ids":751,"../../registry":829,"../scatter/calc":1052,"../scatter/colorscale_calc":1054,"../scatter/cross_trace_defaults":1057,"../scatter/fill_hover_text":1059,"../scatter/get_trace_color":1061,"../scatter/link_traces":1067,"../scatter/marker_colorbar":1069,"../scatter/subtypes":1075,"./attributes":1100,"./constants":1101,"./convert":1102,"./defaults":1103,"array-range":57,"gl-text":313,"point-cluster":461,
"regl-error2d":482,"regl-line2d":483,"regl-scatter2d":484}],1105:[function(a,p,l){l=a("../../components/fx/hovertemplate_attributes");var m=a("../scattergeo/attributes"),k=a("../scatter/attributes"),h=a("../../plots/mapbox/layout_attributes"),e=a("../../plots/attributes"),f=a("../../components/colorbar/attributes"),b=a("../../lib/extend").extendFlat;a=a("../../plot_api/edit_types").overrideAll;var n=m.line,q=m.marker;p.exports=a({lon:m.lon,lat:m.lat,mode:b({},k.mode,{dflt:"markers"}),text:b({},k.text,
{}),hovertext:b({},k.hovertext,{}),line:{color:n.color,width:n.width},connectgaps:k.connectgaps,marker:{symbol:{valType:"string",dflt:"circle",arrayOk:!0},opacity:q.opacity,size:q.size,sizeref:q.sizeref,sizemin:q.sizemin,sizemode:q.sizemode,color:q.color,colorscale:q.colorscale,cauto:q.cauto,cmax:q.cmax,cmin:q.cmin,cmid:q.cmid,autocolorscale:q.autocolorscale,reversescale:q.reversescale,showscale:q.showscale,colorbar:f},fill:m.fill,fillcolor:k.fillcolor,textfont:h.layers.symbol.textfont,textposition:h.layers.symbol.textposition,
selected:{marker:k.selected.marker},unselected:{marker:k.unselected.marker},hoverinfo:b({},e.hoverinfo,{flags:["lon","lat","text","name"]}),hovertemplate:l()},"calc","nested")},{"../../components/colorbar/attributes":578,"../../components/fx/hovertemplate_attributes":615,"../../lib/extend":690,"../../plot_api/edit_types":731,"../../plots/attributes":745,"../../plots/mapbox/layout_attributes":806,"../scatter/attributes":1051,"../scattergeo/attributes":1091}],1106:[function(a,p,l){function m(){return{geojson:q.makeBlank(),
layout:{visibility:"none"},paint:{}}}function k(a){var c=a[0].trace,e=c.marker,h=c.selectedpoints,k=b.isArrayOrTypedArray(e.color),l=b.isArrayOrTypedArray(e.size),m=b.isArrayOrTypedArray(e.opacity),p,q;k&&(q=r.hasColorscale(c,"marker")?r.makeColorScaleFunc(r.extractScale(e,{cLetter:"c"})):b.identity);var t;l&&(t=g(c));var v;m&&(v=function(a){a=f(a)?+b.constrain(a,0,1):0;return c.opacity*a});var u=[];for(p=0;p<a.length;p++){var w=a[p],x=w.lonlat;if(x[0]!==n){var z={};q&&(z.mcc=w.mcc=q(w.mc));t&&(z.mrc=
w.mrc=t(w.ms));v&&(z.mo=v(w.mo));h&&(z.selected=w.selected||0);u.push({type:"Feature",geometry:{type:"Point",coordinates:x},properties:z})}}if(h){var F=d.makeSelectedPointStyleFns(c);for(p=0;p<u.length;p++)a=u[p].properties,F.selectedOpacityFn&&(a.mo=c.opacity*F.selectedOpacityFn(a)),F.selectedColorFn&&(a.mcc=F.selectedColorFn(a)),F.selectedSizeFn&&(a.mrc=F.selectedSizeFn(a))}return{geojson:{type:"FeatureCollection",features:u},mcc:k||F&&F.selectedColorFn?{type:"identity",property:"mcc"}:e.color,
mrc:l||F&&F.selectedSizeFn?{type:"identity",property:"mrc"}:e.size/2,mo:m||F&&F.selectedOpacityFn?{type:"identity",property:"mo"}:c.opacity*e.opacity}}function h(a){return b.isArrayOrTypedArray(a)?function(a){return a}:a?function(){return a}:e}function e(){return""}var f=a("fast-isnumeric"),b=a("../../lib"),n=a("../../constants/numerical").BADNUM,q=a("../../lib/geojson_utils"),r=a("../../components/colorscale"),d=a("../../components/drawing"),g=a("../scatter/make_bubble_size_func"),c=a("../scatter/subtypes"),
v=a("../../plots/mapbox/convert_text_opts");p.exports=function(a){var d=a[0].trace,f=!0===d.visible,g="none"!==d.fill,l=c.hasLines(d),p=c.hasMarkers(d),r=c.hasText(d),t=p&&"circle"===d.marker.symbol,u=p&&"circle"!==d.marker.symbol,w=m(),x=m(),z=m();p=m();var F={fill:w,line:x,circle:z,symbol:p};if(!f)return F;if(g||l)var I=q.calcTraceToLineCoords(a);g&&(w.geojson=q.makePolygon(I),w.layout.visibility="visible",b.extendFlat(w.paint,{"fill-color":d.fillcolor}));l&&(x.geojson=q.makeLine(I),x.layout.visibility=
"visible",b.extendFlat(x.paint,{"line-width":d.line.width,"line-color":d.line.color,"line-opacity":d.opacity}));t&&(f=k(a),z.geojson=f.geojson,z.layout.visibility="visible",b.extendFlat(z.paint,{"circle-color":f.mcc,"circle-radius":f.mrc,"circle-opacity":f.mo}));if(u||r){g=a[0].trace;f=(g.marker||{}).symbol;l=g.text;f="circle"!==f?h(f):e;g=c.hasText(g)?h(l):e;l=[];for(t=0;t<a.length;t++)z=a[t],z.lonlat[0]===n||l.push({type:"Feature",geometry:{type:"Point",coordinates:z.lonlat},properties:{symbol:f(z.mx),
text:g(z.tx)}});p.geojson={type:"FeatureCollection",features:l};b.extendFlat(p.layout,{visibility:"visible","icon-image":"{symbol}-15","text-field":"{text}"});u&&(b.extendFlat(p.layout,{"icon-size":d.marker.size/10}),b.extendFlat(p.paint,{"icon-opacity":d.opacity*d.marker.opacity,"icon-color":d.marker.color}));r&&(a=v(d.textposition,(d.marker||{}).size),b.extendFlat(p.layout,{"text-size":d.textfont.size,"text-anchor":a.anchor,"text-offset":a.offset}),b.extendFlat(p.paint,{"text-color":d.textfont.color,
"text-opacity":d.opacity}))}return F}},{"../../components/colorscale":589,"../../components/drawing":598,"../../constants/numerical":677,"../../lib":700,"../../lib/geojson_utils":694,"../../plots/mapbox/convert_text_opts":803,"../scatter/make_bubble_size_func":1068,"../scatter/subtypes":1075,"fast-isnumeric":221}],1107:[function(a,p,l){function m(a,b,e){a=e("lon")||[];e=e("lat")||[];e=Math.min(a.length,e.length);return b._length=e}var k=a("../../lib"),h=a("../scatter/subtypes"),e=a("../scatter/marker_defaults"),
f=a("../scatter/line_defaults"),b=a("../scatter/text_defaults"),n=a("../scatter/fillcolor_defaults"),q=a("./attributes");p.exports=function(a,d,g,c){function l(b,c){return k.coerce(a,d,q,b,c)}if(m(a,d,l)){l("text");l("hovertext");l("hovertemplate");l("mode");h.hasLines(d)&&(f(a,d,g,c,l,{noDash:!0}),l("connectgaps"));if(h.hasMarkers(d)){e(a,d,g,c,l,{noLine:!0});var p=d.marker;"circle"!==p.symbol&&(k.isArrayOrTypedArray(p.size)&&(p.size=p.size[0]),k.isArrayOrTypedArray(p.color)&&(p.color=p.color[0]))}h.hasText(d)&&
b(a,d,c,l,{noSelect:!0});l("fill");"none"!==d.fill&&n(a,d,g,l);k.coerceSelectionMarkerOpacity(d,l)}else d.visible=!1}},{"../../lib":700,"../scatter/fillcolor_defaults":1060,"../scatter/line_defaults":1064,"../scatter/marker_defaults":1070,"../scatter/subtypes":1075,"../scatter/text_defaults":1076,"./attributes":1105}],1108:[function(a,p,l){p.exports=function(a,k){a.lon=k.lon;a.lat=k.lat;return a}},{}],1109:[function(a,p,l){function m(a,b,e){if(!a.hovertemplate){var d=(b.hi||a.hoverinfo).split("+"),
g=-1!==d.indexOf("all"),c=-1!==d.indexOf("lon"),h=-1!==d.indexOf("lat"),k=b.lonlat,l=[];g||c&&h?l.push("("+(k[0]+"°")+", "+(k[1]+"°")+")"):c?l.push(e.lon+(k[0]+"°")):h&&l.push(e.lat+(k[1]+"°"));(g||-1!==d.indexOf("text"))&&f(b,a,l);return l.join("\x3cbr\x3e")}}var k=a("../../components/fx"),h=a("../../lib"),e=a("../scatter/get_trace_color"),f=a("../scatter/fill_hover_text"),b=a("../../constants/numerical").BADNUM;p.exports=function(a,f,l){var d=a.cd,g=d[0].trace,c=a.xa,n=a.ya,p=a.subplot,q=360*(0<=
f?Math.floor((f+180)/360):Math.ceil((f-180)/360)),r=f-q;k.getClosest(d,function(a){var d=a.lonlat;if(d[0]===b)return Infinity;var e=h.modHalf(d[0],360);d=d[1];var f=p.project([e,d]);d=f.x-c.c2p([r,d]);e=f.y-n.c2p([e,l]);a=Math.max(3,a.mrc||0);return Math.max(Math.sqrt(d*d+e*e)-a,1-3/a)},a);if(!1!==a.index){f=d[a.index];var u=f.lonlat;u=[h.modHalf(u[0],360)+q,u[1]];q=c.c2p(u);u=n.c2p(u);var w=f.mrc||1;a.x0=q-w;a.x1=q+w;a.y0=u-w;a.y1=u+w;a.color=e(g,f);a.extraText=m(g,f,d[0].t.labels);a.hovertemplate=
g.hovertemplate;return[a]}}},{"../../components/fx":616,"../../constants/numerical":677,"../../lib":700,"../scatter/fill_hover_text":1059,"../scatter/get_trace_color":1061}],1110:[function(a,p,l){l={};l.attributes=a("./attributes");l.supplyDefaults=a("./defaults");l.colorbar=a("../scatter/marker_colorbar");l.calc=a("../scattergeo/calc");l.plot=a("./plot");l.hoverPoints=a("./hover");l.eventData=a("./event_data");l.selectPoints=a("./select");l.style=function(a,k){k&&k[0].trace._glTrace.update(k)};l.moduleType=
"trace";l.name="scattermapbox";l.basePlotModule=a("../../plots/mapbox");l.categories=["mapbox","gl","symbols","showLegend","scatterlike"];l.meta={};p.exports=l},{"../../plots/mapbox":804,"../scatter/marker_colorbar":1069,"../scattergeo/calc":1092,"./attributes":1105,"./defaults":1107,"./event_data":1108,"./hover":1109,"./plot":1111,"./select":1112}],1111:[function(a,p,l){function m(a,e){this.subplot=a;this.uid=e;this.sourceIds={fill:e+"-source-fill",line:e+"-source-line",circle:e+"-source-circle",
symbol:e+"-source-symbol"};this.layerIds={fill:e+"-layer-fill",line:e+"-layer-line",circle:e+"-layer-circle",symbol:e+"-layer-symbol"};this.order=["fill","line","circle","symbol"]}var k=a("./convert");a=m.prototype;a.addSource=function(a,e){this.subplot.map.addSource(this.sourceIds[a],{type:"geojson",data:e.geojson})};a.setSourceData=function(a,e){this.subplot.map.getSource(this.sourceIds[a]).setData(e.geojson)};a.addLayer=function(a,e){this.subplot.map.addLayer({type:a,id:this.layerIds[a],source:this.sourceIds[a],
layout:e.layout,paint:e.paint})};a.update=function(a){for(var e=this.subplot,f=k(a),b=0;b<this.order.length;b++){var h=this.order[b],l=f[h];e.setOptions(this.layerIds[h],"setLayoutProperty",l.layout);"visible"===l.layout.visibility&&(this.setSourceData(h,l),e.setOptions(this.layerIds[h],"setPaintProperty",l.paint))}a[0].trace._glTrace=this};a.dispose=function(){for(var a=this.subplot.map,e=0;e<this.order.length;e++){var f=this.order[e];a.removeLayer(this.layerIds[f]);a.removeSource(this.sourceIds[f])}};
p.exports=function(a,e){a=new m(a,e[0].trace.uid);for(var f=k(e),b=0;b<a.order.length;b++){var h=a.order[b],l=f[h];a.addSource(h,l);a.addLayer(h,l)}return e[0].trace._glTrace=a}},{"./convert":1106}],1112:[function(a,p,l){var m=a("../../lib"),k=a("../scatter/subtypes"),h=a("../../constants/numerical").BADNUM;p.exports=function(a,f){var b=a.cd,e=a.xaxis,l=a.yaxis,p=[],d;if(!k.hasMarkers(b[0].trace))return[];if(!1===f)for(d=0;d<b.length;d++)b[d].selected=0;else for(d=0;d<b.length;d++){var g=b[d],c=g.lonlat;
if(c[0]!==h){var q=[m.modHalf(c[0],360),c[1]];q=[e.c2p(q),l.c2p(q)];f.contains(q,null,d,a)?(p.push({pointNumber:d,lon:c[0],lat:c[1]}),g.selected=1):g.selected=0}}return p}},{"../../constants/numerical":677,"../../lib":700,"../scatter/subtypes":1075}],1113:[function(a,p,l){l=a("../../components/fx/hovertemplate_attributes");var m=a("../../lib/extend").extendFlat,k=a("../scatter/attributes");a=a("../../plots/attributes");var h=k.line;p.exports={mode:k.mode,r:{valType:"data_array",editType:"calc+clearAxisTypes"},
theta:{valType:"data_array",editType:"calc+clearAxisTypes"},r0:{valType:"any",dflt:0,editType:"calc+clearAxisTypes"},dr:{valType:"number",dflt:1,editType:"calc"},theta0:{valType:"any",dflt:0,editType:"calc+clearAxisTypes"},dtheta:{valType:"number",editType:"calc"},thetaunit:{valType:"enumerated",values:["radians","degrees","gradians"],dflt:"degrees",editType:"calc+clearAxisTypes"},text:k.text,hovertext:k.hovertext,line:{color:h.color,width:h.width,dash:h.dash,shape:m({},h.shape,{values:["linear",
"spline"]}),smoothing:h.smoothing,editType:"calc"},connectgaps:k.connectgaps,marker:k.marker,cliponaxis:m({},k.cliponaxis,{dflt:!1}),textposition:k.textposition,textfont:k.textfont,fill:m({},k.fill,{values:["none","toself","tonext"],dflt:"none"}),fillcolor:k.fillcolor,hoverinfo:m({},a.hoverinfo,{flags:["r","theta","text","name"]}),hoveron:k.hoveron,hovertemplate:l(),selected:k.selected,unselected:k.unselected}},{"../../components/fx/hovertemplate_attributes":615,"../../lib/extend":690,"../../plots/attributes":745,
"../scatter/attributes":1051}],1114:[function(a,p,l){var m=a("fast-isnumeric"),k=a("../../constants/numerical").BADNUM,h=a("../../plots/cartesian/axes"),e=a("../scatter/colorscale_calc"),f=a("../scatter/arrays_to_calcdata"),b=a("../scatter/calc_selection"),n=a("../scatter/calc").calcMarkerSize;p.exports=function(a,l){var d=a._fullLayout,g=l.subplot,c=d[g].radialaxis;g=d[g].angularaxis;d=c.makeCalcdata(l,"r");var p=g.makeCalcdata(l,"theta"),q=l._length;g=Array(q);for(var r=0;r<q;r++){var u=d[r],w=
p[r],x=g[r]={};m(u)&&m(w)?(x.r=u,x.theta=w):x.r=k}p=n(l,q);l._extremes.x=h.findExtremes(c,d,{ppad:p});e(a,l);f(g,l);b(g,l);return g}},{"../../constants/numerical":677,"../../plots/cartesian/axes":748,"../scatter/arrays_to_calcdata":1050,"../scatter/calc":1052,"../scatter/calc_selection":1053,"../scatter/colorscale_calc":1054,"fast-isnumeric":221}],1115:[function(a,p,l){function m(a,b,d,e){a=e("r");d=e("theta");if(a)d?a=Math.min(a.length,d.length):(a=a.length,e("theta0"),e("dtheta"));else{if(!d)return 0;
a=b.theta.length;e("r0");e("dr")}return b._length=a}var k=a("../../lib"),h=a("../scatter/subtypes"),e=a("../scatter/marker_defaults"),f=a("../scatter/line_defaults"),b=a("../scatter/line_shape_defaults"),n=a("../scatter/text_defaults"),q=a("../scatter/fillcolor_defaults"),r=a("../scatter/constants").PTS_LINESONLY,d=a("./attributes");p.exports={handleRThetaDefaults:m,supplyDefaults:function(a,c,l,p){function g(b,e){return k.coerce(a,c,d,b,e)}var t=m(a,c,p,g);if(t){g("thetaunit");g("mode",t<r?"lines+markers":
"lines");g("text");g("hovertext");"fills"!==c.hoveron&&g("hovertemplate");h.hasLines(c)&&(f(a,c,l,p,g),b(a,c,g),g("connectgaps"));h.hasMarkers(c)&&e(a,c,l,p,g,{gradient:!0});h.hasText(c)&&n(a,c,p,g);p=[];if(h.hasMarkers(c)||h.hasText(c))g("cliponaxis"),g("marker.maxdisplayed"),p.push("points");g("fill");"none"!==c.fill&&(q(a,c,l,g),h.hasLines(c)||b(a,c,g));"tonext"!==c.fill&&"toself"!==c.fill||p.push("fills");g("hoveron",p.join("+")||"points");k.coerceSelectionMarkerOpacity(c,g)}else c.visible=!1}}},
{"../../lib":700,"../scatter/constants":1055,"../scatter/fillcolor_defaults":1060,"../scatter/line_defaults":1064,"../scatter/line_shape_defaults":1066,"../scatter/marker_defaults":1070,"../scatter/subtypes":1075,"../scatter/text_defaults":1076,"./attributes":1113}],1116:[function(a,p,l){function m(a,b,k,l){function f(a,b){c.push(a._hovertitle+": "+h.tickText(a,b,"hover").text)}var d=k.radialAxis;k=k.angularAxis;d._hovertitle="r";k._hovertitle="θ";var g=a.hi||b.hoverinfo,c=[];b.hovertemplate||(b=
g.split("+"),-1!==b.indexOf("all")&&(b=["r","theta","text"]),-1!==b.indexOf("r")&&f(d,d.c2l(a.r)),-1!==b.indexOf("theta")&&(a=a.theta,f(k,"degrees"===k.thetaunit?e.rad2deg(a):a)),-1!==b.indexOf("text")&&l.text&&(c.push(l.text),delete l.text),l.extraText=c.join("\x3cbr\x3e"))}var k=a("../scatter/hover"),h=a("../../plots/cartesian/axes"),e=a("../../lib");p.exports={hoverPoints:function(a,b,e,h){if((b=k(a,b,e,h))&&!1!==b[0].index){e=b[0];if(void 0===e.index)return b;a=a.subplot;h=e.cd[e.index];var f=
e.trace;if(a.isPtInside(h))return e.xLabelVal=void 0,e.yLabelVal=void 0,m(h,f,a,e),e.hovertemplate=f.hovertemplate,b}},makeHoverPointText:m}},{"../../lib":700,"../../plots/cartesian/axes":748,"../scatter/hover":1062}],1117:[function(a,p,l){p.exports={moduleType:"trace",name:"scatterpolar",basePlotModule:a("../../plots/polar"),categories:["polar","symbols","showLegend","scatter-like"],attributes:a("./attributes"),supplyDefaults:a("./defaults").supplyDefaults,colorbar:a("../scatter/marker_colorbar"),
calc:a("./calc"),plot:a("./plot"),style:a("../scatter/style").style,hoverPoints:a("./hover").hoverPoints,selectPoints:a("../scatter/select"),meta:{}}},{"../../plots/polar":813,"../scatter/marker_colorbar":1069,"../scatter/select":1072,"../scatter/style":1074,"./attributes":1113,"./calc":1114,"./defaults":1115,"./hover":1116,"./plot":1118}],1118:[function(a,p,l){var m=a("../scatter/plot"),k=a("../../constants/numerical").BADNUM;p.exports=function(a,e,f){var b=e.layers.frontplot.select("g.scatterlayer"),
h={xaxis:e.xaxis,yaxis:e.yaxis,plot:e.framework,layerClipId:e._hasClipOnAxisFalse?e.clipIds.forTraces:null},l=e.radialAxis;e=e.angularAxis;for(var p=0;p<f.length;p++)for(var d=f[p],g=0;g<d.length;g++){var c=d[g],q=c.r;if(q===k)c.x=c.y=k;else{q=l.c2g(q);var t=e.c2g(c.theta);c.x=q*Math.cos(t);c.y=q*Math.sin(t)}}m(a,h,f,b)}},{"../../constants/numerical":677,"../scatter/plot":1071}],1119:[function(a,p,l){l=a("../scatterpolar/attributes");a=a("../scattergl/attributes");p.exports={mode:l.mode,r:l.r,theta:l.theta,
r0:l.r0,dr:l.dr,theta0:l.theta0,dtheta:l.dtheta,thetaunit:l.thetaunit,text:l.text,hovertext:l.hovertext,hovertemplate:l.hovertemplate,line:a.line,connectgaps:a.connectgaps,marker:a.marker,fill:a.fill,fillcolor:a.fillcolor,textposition:a.textposition,textfont:a.textfont,hoverinfo:l.hoverinfo,selected:l.selected,unselected:l.unselected}},{"../scattergl/attributes":1100,"../scatterpolar/attributes":1113}],1120:[function(a,p,l){var m=a("../../lib"),k=a("../scatter/subtypes"),h=a("../scatterpolar/defaults").handleRThetaDefaults,
e=a("../scatter/marker_defaults"),f=a("../scatter/line_defaults"),b=a("../scatter/text_defaults"),n=a("../scatter/fillcolor_defaults"),q=a("../scatter/constants").PTS_LINESONLY,r=a("./attributes");p.exports=function(a,g,c,l){function d(b,c){return m.coerce(a,g,r,b,c)}var p=h(a,g,l,d);p?(d("thetaunit"),d("mode",p<q?"lines+markers":"lines"),d("text"),d("hovertext"),"fills"!==g.hoveron&&d("hovertemplate"),k.hasLines(g)&&(f(a,g,c,l,d),d("connectgaps")),k.hasMarkers(g)&&e(a,g,c,l,d),k.hasText(g)&&b(a,
g,l,d),d("fill"),"none"!==g.fill&&n(a,g,c,d),m.coerceSelectionMarkerOpacity(g,d)):g.visible=!1}},{"../../lib":700,"../scatter/constants":1055,"../scatter/fillcolor_defaults":1060,"../scatter/line_defaults":1064,"../scatter/marker_defaults":1070,"../scatter/subtypes":1075,"../scatter/text_defaults":1076,"../scatterpolar/defaults":1115,"./attributes":1119}],1121:[function(a,p,l){var m=a("point-cluster"),k=a("fast-isnumeric"),h=a("../scattergl"),e=a("../scatter/colorscale_calc"),f=a("../scatter/calc").calcMarkerSize,
b=a("../scattergl/convert"),n=a("../../lib"),q=a("../../plots/cartesian/axes"),r=a("../scatterpolar/hover").makeHoverPointText,d=a("../scattergl/constants").TOO_MANY_POINTS;p.exports={moduleType:"trace",name:"scatterpolargl",basePlotModule:a("../../plots/polar"),categories:"gl regl polar symbols showLegend scatter-like".split(" "),attributes:a("./attributes"),supplyDefaults:a("./defaults"),colorbar:a("../scatter/marker_colorbar"),calc:function(a,c){var g=a._fullLayout,h=c.subplot,k=g[h].radialaxis;
h=g[h].angularaxis;g=k.makeCalcdata(c,"r");var l=h.makeCalcdata(c,"theta");h=c._length;var m={};h<g.length&&(g=g.slice(0,h));h<l.length&&(l=l.slice(0,h));m.r=g;m.theta=l;e(a,c);a=m.opts=b.style(a,c);var n;h<d?n=f(c,h):a.marker&&(n=2*(a.marker.sizeAvg||Math.max(a.marker.size,3)));c._extremes.x=q.findExtremes(k,g,{ppad:n});return[{x:!1,y:!1,t:m,trace:c}]},plot:function(a,c,e){if(e.length){var f=c.radialAxis,g=c.angularAxis,l=h.sceneUpdate(a,c);e.forEach(function(e){if(e&&e[0]&&e[0].trace){var h=e[0];
e=h.trace;h=h.t;var p=e._length,q=h.r,r=h.theta,t=h.opts,u,v=q.slice(),w=r.slice();for(u=0;u<q.length;u++)c.isPtInside({r:q[u],theta:r[u]})||(v[u]=NaN,w[u]=NaN);var x=Array(2*p),y=Array(p),D=Array(p);for(u=0;u<p;u++){var z=v[u];if(k(z)){var B=f.c2g(z);var F=g.c2g(w[u],e.thetaunit);z=B*Math.cos(F);B*=Math.sin(F)}else z=B=NaN;y[u]=x[2*u]=z;D[u]=x[2*u+1]=B}h.tree=m(x);t.marker&&p>=d&&(t.marker.cluster=h.tree);t.marker&&(t.markerSel.positions=t.markerUnsel.positions=t.marker.positions=x);t.line&&1<x.length&&
n.extendFlat(t.line,b.linePositions(a,e,x));t.text&&(n.extendFlat(t.text,{positions:x},b.textPosition(a,e,t.text,t.marker)),n.extendFlat(t.textSel,{positions:x},b.textPosition(a,e,t.text,t.markerSel)),n.extendFlat(t.textUnsel,{positions:x},b.textPosition(a,e,t.text,t.markerUnsel)));t.fill&&!l.fill2d&&(l.fill2d=!0);t.marker&&!l.scatter2d&&(l.scatter2d=!0);t.line&&!l.line2d&&(l.line2d=!0);t.text&&!l.glText&&(l.glText=!0);l.lineOptions.push(t.line);l.fillOptions.push(t.fill);l.markerOptions.push(t.marker);
l.markerSelectedOptions.push(t.markerSel);l.markerUnselectedOptions.push(t.markerUnsel);l.textOptions.push(t.text);l.textSelectedOptions.push(t.textSel);l.textUnselectedOptions.push(t.textUnsel);h.x=y;h.y=D;h.rawx=y;h.rawy=D;h.r=q;h.theta=r;h.positions=x;h._scene=l;h.index=l.count;l.count++}});return h.plot(a,c,e)}},hoverPoints:function(a,b,d,e){var c=a.cd[0].t,f=c.r;c=c.theta;if((b=h.hoverPoints(a,b,d,e))&&!1!==b[0].index){d=b[0];if(void 0===d.index)return b;a=a.subplot;e=d.cd[d.index];var g=d.trace;
e.r=f[d.index];e.theta=c[d.index];if(a.isPtInside(e))return d.xLabelVal=void 0,d.yLabelVal=void 0,r(e,g,a,d),b}},selectPoints:h.selectPoints,meta:{}}},{"../../lib":700,"../../plots/cartesian/axes":748,"../../plots/polar":813,"../scatter/calc":1052,"../scatter/colorscale_calc":1054,"../scatter/marker_colorbar":1069,"../scattergl":1104,"../scattergl/constants":1101,"../scattergl/convert":1102,"../scatterpolar/hover":1116,"./attributes":1119,"./defaults":1120,"fast-isnumeric":221,"point-cluster":461}],
1122:[function(a,p,l){l=a("../../components/fx/hovertemplate_attributes");var m=a("../scatter/attributes"),k=a("../../plots/attributes"),h=a("../../components/colorscale/attributes"),e=a("../../components/colorbar/attributes"),f=a("../../components/drawing/attributes").dash;a=a("../../lib/extend").extendFlat;var b=m.marker,n=m.line,q=b.line;p.exports={a:{valType:"data_array",editType:"calc"},b:{valType:"data_array",editType:"calc"},c:{valType:"data_array",editType:"calc"},sum:{valType:"number",dflt:0,
min:0,editType:"calc"},mode:a({},m.mode,{dflt:"markers"}),text:a({},m.text,{}),hovertext:a({},m.hovertext,{}),line:{color:n.color,width:n.width,dash:f,shape:a({},n.shape,{values:["linear","spline"]}),smoothing:n.smoothing,editType:"calc"},connectgaps:m.connectgaps,cliponaxis:m.cliponaxis,fill:a({},m.fill,{values:["none","toself","tonext"],dflt:"none"}),fillcolor:m.fillcolor,marker:a({symbol:b.symbol,opacity:b.opacity,maxdisplayed:b.maxdisplayed,size:b.size,sizeref:b.sizeref,sizemin:b.sizemin,sizemode:b.sizemode,
line:a({width:q.width,editType:"calc"},h("marker.line")),gradient:b.gradient,editType:"calc"},h("marker"),{colorbar:e}),textfont:m.textfont,textposition:m.textposition,selected:m.selected,unselected:m.unselected,hoverinfo:a({},k.hoverinfo,{flags:["a","b","c","text","name"]}),hoveron:m.hoveron,hovertemplate:l()}},{"../../components/colorbar/attributes":578,"../../components/colorscale/attributes":584,"../../components/drawing/attributes":597,"../../components/fx/hovertemplate_attributes":615,"../../lib/extend":690,
"../../plots/attributes":745,"../scatter/attributes":1051}],1123:[function(a,p,l){var m=a("fast-isnumeric"),k=a("../scatter/colorscale_calc"),h=a("../scatter/arrays_to_calcdata"),e=a("../scatter/calc_selection"),f=a("../scatter/calc").calcMarkerSize,b=["a","b","c"],n={a:["b","c"],b:["a","c"],c:["a","b"]};p.exports=function(a,l){var d=a._fullLayout[l.subplot].sum,g=l.sum||d,c={a:l.a,b:l.b,c:l.c},p,q;for(p=0;p<b.length;p++){var r=b[p];if(!c[r]){var u=c[n[r][0]];var w=c[n[r][1]];var x=Array(u.length);
for(q=0;q<u.length;q++)x[q]=g-u[q]-w[q];c[r]=x}}g=l._length;q=Array(g);for(p=0;p<g;p++)if(r=c.a[p],x=c.b[p],u=c.c[p],m(r)&&m(x)&&m(u)){r=+r;x=+x;u=+u;w=d/(r+x+u);1!==w&&(r*=w,x*=w,u*=w);var A=r;w=u-x;q[p]={x:w,y:A,a:r,b:x,c:u}}else q[p]={x:!1,y:!1};f(l,g);k(a,l);h(q,l);e(q,l);return q}},{"../scatter/arrays_to_calcdata":1050,"../scatter/calc":1052,"../scatter/calc_selection":1053,"../scatter/colorscale_calc":1054,"fast-isnumeric":221}],1124:[function(a,p,l){var m=a("../../lib"),k=a("../scatter/constants"),
h=a("../scatter/subtypes"),e=a("../scatter/marker_defaults"),f=a("../scatter/line_defaults"),b=a("../scatter/line_shape_defaults"),n=a("../scatter/text_defaults"),q=a("../scatter/fillcolor_defaults"),r=a("./attributes");p.exports=function(a,g,c,l){function d(b,c){return m.coerce(a,g,r,b,c)}var p=d("a"),u=d("b"),v=d("c");if(p){var w=p.length;u?(w=Math.min(w,u.length),v&&(w=Math.min(w,v.length))):w=v?Math.min(w,v.length):0}else u&&v&&(w=Math.min(u.length,v.length));if(w){g._length=w;d("sum");d("text");
d("hovertext");"fills"!==g.hoveron&&d("hovertemplate");d("mode",w<k.PTS_LINESONLY?"lines+markers":"lines");h.hasLines(g)&&(f(a,g,c,l,d),b(a,g,d),d("connectgaps"));h.hasMarkers(g)&&e(a,g,c,l,d,{gradient:!0});h.hasText(g)&&n(a,g,l,d);l=[];if(h.hasMarkers(g)||h.hasText(g))d("cliponaxis"),d("marker.maxdisplayed"),l.push("points");d("fill");"none"!==g.fill&&(q(a,g,c,d),h.hasLines(g)||b(a,g,d));"tonext"!==g.fill&&"toself"!==g.fill||l.push("fills");d("hoveron",l.join("+")||"points");m.coerceSelectionMarkerOpacity(g,
d)}else g.visible=!1}},{"../../lib":700,"../scatter/constants":1055,"../scatter/fillcolor_defaults":1060,"../scatter/line_defaults":1064,"../scatter/line_shape_defaults":1066,"../scatter/marker_defaults":1070,"../scatter/subtypes":1075,"../scatter/text_defaults":1076,"./attributes":1122}],1125:[function(a,p,l){p.exports=function(a,k,h,e,f){k.xa&&(a.xaxis=k.xa);k.ya&&(a.yaxis=k.ya);e[f]?(k=e[f],a.a=k.a,a.b=k.b,a.c=k.c):(a.a=k.a,a.b=k.b,a.c=k.c);return a}},{}],1126:[function(a,p,l){var m=a("../scatter/hover"),
k=a("../../plots/cartesian/axes");p.exports=function(a,e,f,b){function h(a,b){d.push(a._hovertitle+": "+k.tickText(a,b,"hover").text)}if((e=m(a,e,f,b))&&!1!==e[0].index){f=e[0];if(void 0===f.index)return b=a.xa._length,a=b*(1-f.y0/a.ya._length)/2,b-=a,f.x0=Math.max(Math.min(f.x0,b),a),f.x1=Math.max(Math.min(f.x1,b),a),e;a=f.cd[f.index];f.a=a.a;f.b=a.b;f.c=a.c;f.xLabelVal=void 0;f.yLabelVal=void 0;b=f.trace;var l=f.subplot,p=a.hi||b.hoverinfo,d=[];b.hovertemplate||(p=p.split("+"),-1!==p.indexOf("all")&&
(p=["a","b","c"]),-1!==p.indexOf("a")&&h(l.aaxis,a.a),-1!==p.indexOf("b")&&h(l.baxis,a.b),-1!==p.indexOf("c")&&h(l.caxis,a.c));f.extraText=d.join("\x3cbr\x3e");f.hovertemplate=b.hovertemplate;return e}}},{"../../plots/cartesian/axes":748,"../scatter/hover":1062}],1127:[function(a,p,l){l={};l.attributes=a("./attributes");l.supplyDefaults=a("./defaults");l.colorbar=a("../scatter/marker_colorbar");l.calc=a("./calc");l.plot=a("./plot");l.style=a("../scatter/style").style;l.styleOnSelect=a("../scatter/style").styleOnSelect;
l.hoverPoints=a("./hover");l.selectPoints=a("../scatter/select");l.eventData=a("./event_data");l.moduleType="trace";l.name="scatterternary";l.basePlotModule=a("../../plots/ternary");l.categories=["ternary","symbols","showLegend","scatter-like"];l.meta={};p.exports=l},{"../../plots/ternary":825,"../scatter/marker_colorbar":1069,"../scatter/select":1072,"../scatter/style":1074,"./attributes":1122,"./calc":1123,"./defaults":1124,"./event_data":1125,"./hover":1126,"./plot":1128}],1128:[function(a,p,l){var m=
a("../scatter/plot");p.exports=function(a,h,e){var f=h.plotContainer;f.select(".scatterlayer").selectAll("*").remove();f={xaxis:h.xaxis,yaxis:h.yaxis,plot:f,layerClipId:h._hasClipOnAxisFalse?h.clipIdRelative:null};h=h.layers.frontplot.select("g.scatterlayer");m(a,f,e,h)}},{"../scatter/plot":1071}],1129:[function(a,p,l){function m(a){return{valType:"info_array",freeLength:!0,editType:"calc",items:{valType:"subplotid",regex:f[a],editType:"plot"}}}var k=a("../scatter/attributes"),h=a("../../components/colorscale/attributes");
l=a("../../components/fx/hovertemplate_attributes");var e=a("../scattergl/attributes"),f=a("../../plots/cartesian/constants").idRegex,b=a("../../plot_api/plot_template").templatedArray;a=a("../../lib/extend").extendFlat;k=k.marker;var n=k.line;n=a(h("marker.line",{editTypeOverride:"calc"}),{width:a({},n.width,{editType:"calc"}),editType:"calc"});h=a(h("marker"),{symbol:k.symbol,size:a({},k.size,{editType:"markerSize"}),sizeref:k.sizeref,sizemin:k.sizemin,sizemode:k.sizemode,opacity:k.opacity,colorbar:k.colorbar,
line:n,editType:"calc"});h.color.editType=h.cmin.editType=h.cmax.editType="style";p.exports={dimensions:b("dimension",{visible:{valType:"boolean",dflt:!0,editType:"calc"},label:{valType:"string",editType:"calc"},values:{valType:"data_array",editType:"calc+clearAxisTypes"},axis:{type:{valType:"enumerated",values:["linear","log","date","category"],editType:"calc+clearAxisTypes"},matches:{valType:"boolean",dflt:!1,editType:"calc"},editType:"calc+clearAxisTypes"},editType:"calc+clearAxisTypes"}),text:a({},
e.text,{}),hovertext:a({},e.hovertext,{}),hovertemplate:l(),marker:h,xaxes:m("x"),yaxes:m("y"),diagonal:{visible:{valType:"boolean",dflt:!0,editType:"calc"},editType:"calc"},showupperhalf:{valType:"boolean",dflt:!0,editType:"calc"},showlowerhalf:{valType:"boolean",dflt:!0,editType:"calc"},selected:{marker:e.selected.marker,editType:"calc"},unselected:{marker:e.unselected.marker,editType:"calc"},opacity:e.opacity}},{"../../components/colorscale/attributes":584,"../../components/fx/hovertemplate_attributes":615,
"../../lib/extend":690,"../../plot_api/plot_template":738,"../../plots/cartesian/constants":754,"../scatter/attributes":1051,"../scattergl/attributes":1100}],1130:[function(a,p,l){function m(a){var b=a._fullLayout,c=b._glcanvas.data()[0].regl,d=b._splomGrid;d||(d=b._splomGrid=h(c));d.update(k(a))}function k(a){function b(a,b,c,d,g,h){var k=b[a+"color"];a=b[a+"width"];b=String(k+a);b in f?f[b].data.push(NaN,NaN,c,d,g,h):f[b]={data:[c,d,g,h],join:"rect",thickness:a,color:k,viewport:e,range:e,overlay:!1}}
var c=a._fullLayout,d=c._size,e=[0,0,c.width,c.height],f={},h;for(h in c._splomSubplots){var k=c._plots[h],l=k.xaxis;k=k.yaxis;var m=l._vals,n=k._vals,p=d.b+k.domain[0]*d.h,q=-k._m,u=-q*k.r2l(k.range[0],k.calendar);if(l.showgrid)for(h=0;h<m.length;h++){var w=l._offset+l.l2p(m[h].x);b("grid",l,w,p,w,p+k._length)}if(k.showgrid)for(h=0;h<n.length;h++)m=p+u+q*n[h].x,b("grid",k,l._offset,m,l._offset+l._length,m);r(a,l,k)&&(w=l._offset+l.l2p(0),b("zeroline",l,w,p,w,p+k._length));r(a,k,l)&&(m=p+u+0,b("zeroline",
k,l._offset,m,l._offset+l._length,m))}a=[];for(h in f)a.push(f[h]);return a}var h=a("regl-line2d"),e=a("../../registry"),f=a("../../lib/prepare_regl"),b=a("../../plots/get_data").getModuleCalcData,n=a("../../plots/cartesian"),q=a("../../plots/cartesian/axis_ids").getFromId,r=a("../../plots/cartesian/axes").shouldShowZeroLine;p.exports={name:"splom",attr:n.attr,attrRegex:n.attrRegex,layoutAttributes:n.layoutAttributes,supplyLayoutDefaults:n.supplyLayoutDefaults,drawFramework:n.drawFramework,plot:function(a){var d=
a._fullLayout,c=e.getModule("splom"),h=b(a.calcdata,c)[0];f(a,["ANGLE_instanced_arrays","OES_element_index_uint"])&&(d._hasOnlyLargeSploms&&m(a),c.plot(a,{},h))},drag:function(a){var b=a.calcdata,c=a._fullLayout;c._hasOnlyLargeSploms&&m(a);for(var d=0;d<b.length;d++){var e=b[d][0].trace,f=c._splomScenes[e.uid];if("splom"===e.type&&f&&f.matrix){for(var h=a,k=e._visibleDims,l=f.viewOpts.ranges=Array(f.matrixOptions.data.length),n=0;n<k.length;n++){var p=k[n],r=l[n]=Array(4),u=q(h,e._diag[p][0]);u&&
(r[0]=u.r2l(u.range[0]),r[2]=u.r2l(u.range[1]));if(p=q(h,e._diag[p][1]))r[1]=p.r2l(p.range[0]),r[3]=p.r2l(p.range[1])}f.selectBatch?f.matrix.update({ranges:l},{ranges:l}):f.matrix.update({ranges:l})}}},updateGrid:m,clean:function(a,b,c,e){var d={},f;if(e._splomScenes){for(f=0;f<a.length;f++){var g=a[f];"splom"===g.type&&(d[g.uid]=1)}for(f=0;f<c.length;f++)if(g=c[f],!d[g.uid]){var h=e._splomScenes[g.uid];h&&h.destroy&&h.destroy();e._splomScenes[g.uid]=null;delete e._splomScenes[g.uid]}}0===Object.keys(e._splomScenes||
{}).length&&delete e._splomScenes;e._splomGrid&&!b._hasOnlyLargeSploms&&e._hasOnlyLargeSploms&&(e._splomGrid.destroy(),e._splomGrid=null,delete e._splomGrid);n.clean(a,b,c,e)},updateFx:function(a){n.updateFx(a);var b=a._fullLayout,c=b.dragmode;if("zoom"===c||"pan"===c)for(a=a.calcdata,c=0;c<a.length;c++){var d=a[c][0].trace;"splom"===d.type&&(d=b._splomScenes[d.uid],null===d.selectBatch&&d.matrix.update(d.matrixOptions,null))}},toSVG:n.toSVG}},{"../../lib/prepare_regl":713,"../../plots/cartesian":759,
"../../plots/cartesian/axes":748,"../../plots/cartesian/axis_ids":751,"../../plots/get_data":784,"../../registry":829,"regl-line2d":483}],1131:[function(a,p,l){function m(a,b){function c(c,d){return h.coerce(a,b,f.dimensions,c,d)}c("label");var d=c("values");d&&d.length?c("visible"):b.visible=!1;c("axis.type");c("axis.matches")}function k(a,b,c,e){function d(a,d,e,f){if(a){var g=a.charAt(0),h=c._splomAxes[g];b["_"+g+"axes"][a]=1;f.push(a);a in h||(a=h[a]={},e&&(a.label=e.label||"",e.visible&&e.axis&&
(e.axis.type&&(a.type=e.axis.type),e.axis.matches&&(a.matches=d))))}}var f=b.dimensions,g=f.length;a=b.showupperhalf;var h=b.showlowerhalf,k=b.diagonal.visible,l,m=Array(g),n=Array(g);for(l=0;l<g;l++){var p=l?l+1:"";m[l]="x"+p;n[l]="y"+p}m=e("xaxes",m);p=e("yaxes",n);var q=b._diag=Array(g);b._xaxes={};b._yaxes={};e=[];n=[];var r=!k&&!h,u=!k&&!a;for(l=0;l<g;l++){var v=f[l],w=0===l,x=l===g-1,z=w&&r||x&&u?void 0:m[l];w=w&&u||x&&r?void 0:p[l];d(z,w,v,e);d(w,z,v,n);q[l]=[z,w]}for(l=0;l<e.length;l++)for(f=
0;f<n.length;f++)g=e[l]+n[f],l>f&&a?c._splomSubplots[g]=1:l<f&&h?c._splomSubplots[g]=1:l!==f||!k&&h&&a||(c._splomSubplots[g]=1);if(!h||!k&&a&&h)c._splomGridDflt.xside="bottom",c._splomGridDflt.yside="left"}var h=a("../../lib"),e=a("../../plots/array_container_defaults"),f=a("./attributes"),b=a("../scatter/subtypes"),n=a("../scatter/marker_defaults"),q=a("../parcoords/merge_length"),r=/-open/;p.exports=function(a,g,c,l){function d(b,c){return h.coerce(a,g,f,b,c)}var p=e(a,g,{name:"dimensions",handleItemDefaults:m}),
u=d("diagonal.visible"),v=d("showupperhalf"),w=d("showlowerhalf");q(g,p,"values")&&(u||v||w)?(d("text"),d("hovertext"),d("hovertemplate"),n(a,g,c,l,d),c=r.test(g.marker.symbol),p=b.isBubble(g),d("marker.line.width",c||p?1:0),k(a,g,l,d),h.coerceSelectionMarkerOpacity(g,d)):g.visible=!1}},{"../../lib":700,"../../plots/array_container_defaults":744,"../parcoords/merge_length":1023,"../scatter/marker_defaults":1070,"../scatter/subtypes":1075,"./attributes":1129}],1132:[function(a,p,l){function m(a,c){var d=
a._fullLayout;a=c.uid;var e=d._splomScenes;e||(e=d._splomScenes={});d={dirty:!0};var f={selectBatch:null,unselectBatch:null,matrix:!1,select:null},g=e[c.uid];g||(g=e[a]=b.extendFlat({},d,f),g.draw=function(){g.matrix&&g.matrix.draw&&(g.selectBatch?g.matrix.draw(g.unselectBatch,g.selectBatch):g.matrix.draw());g.dirty=!1},g.destroy=function(){g.matrix&&g.matrix.destroy&&g.matrix.destroy();g.matrixOptions=null;g.selectBatch=null;g=g.unselectBatch=null});g.dirty||b.extendFlat(g,d);return g}function k(a,
b){b=b._id;for(var c={x:0,y:1}[b.charAt(0)],d=a._visibleDims,e=0;e<d.length;e++)if(a._diag[d[e]][c]===b)return e;return!1}var h=a("regl-splom"),e=a("array-range");l=a("../../registry");var f=a("../../components/grid"),b=a("../../lib"),n=a("../../plots/cartesian/axis_ids"),q=a("../scatter/subtypes"),r=a("../scatter/calc").calcMarkerSize,d=a("../scatter/calc").calcAxisExpansion,g=a("../scatter/colorscale_calc"),c=a("../scattergl/convert").markerSelection,v=a("../scattergl/convert").markerStyle,t=a("../scattergl").calcHover,
w=a("../../constants/numerical").BADNUM,x=a("../scattergl/constants").TOO_MANY_POINTS;p.exports={moduleType:"trace",name:"splom",basePlotModule:a("./base_plot"),categories:"gl regl cartesian symbols showLegend scatter-like".split(" "),attributes:a("./attributes"),supplyDefaults:a("./defaults"),colorbar:a("../scatter/marker_colorbar"),calc:function(a,e){function f(a,c){c=a.makeCalcdata({v:c.values,vcalendar:e.calendar},"v");for(var d=0;d<c.length;d++)c[d]=c[d]===w?NaN:c[d];p.push(c);q.push("log"===
a.type?b.simpleMap(c,a.c2l):c)}var h=e.dimensions,k=e._length,l={},p=l.cdata=[],q=l.data=[],t=e._visibleDims=[],u;for(u=0;u<h.length;u++){var y=h[u];if(y.visible){var z=n.getFromId(a,e._diag[u][0]);var D=n.getFromId(a,e._diag[u][1]);z&&D&&z.type!==D.type?b.log("Skipping splom dimension "+u+" with conflicting axis types"):(z?(f(z,y),D&&"category"===D.type&&(D._categories=z._categories.slice())):f(D,y),t.push(u))}}g(a,e);b.extendFlat(l,v(e));var B=p.length*k>x?2*(l.sizeAvg||Math.max(l.size,3)):r(e,
k);for(k=0;k<t.length;k++)u=t[k],y=h[u],z=n.getFromId(a,e._diag[u][0])||{},D=n.getFromId(a,e._diag[u][1])||{},d(a,e,z,D,p[k],p[k],B);a=m(a,e);a.matrix||(a.matrix=!0);a.matrixOptions=l;a.selectedOptions=c(e,e.selected);a.unselectedOptions=c(e,e.unselected);return[{x:!1,y:!1,t:{},trace:e}]},plot:function(a,c,d){if(d.length)for(c=0;c<d.length;c++){var e,f,g=a,k=d[c][0],l=g._fullLayout,m=l._size,p=k.trace;var q=k.t;k=l._splomScenes[p.uid];var r=k.matrixOptions,t=r.cdata,u=l._glcanvas.data()[0].regl,v=
l.dragmode;if(0!==t.length){r.lower=p.showupperhalf;r.upper=p.showlowerhalf;r.diagonal=p.diagonal.visible;var w=p._visibleDims,x=t.length,y=k.viewOpts={};y.ranges=Array(x);y.domains=Array(x);for(e=0;e<w.length;e++){var A=w[e];var z=y.ranges[e]=Array(4),D=y.domains[e]=Array(4);if(f=n.getFromId(g,p._diag[A][0]))z[0]=f._rl[0],z[2]=f._rl[1],D[0]=f.domain[0],D[2]=f.domain[1];if(A=n.getFromId(g,p._diag[A][1]))z[1]=A._rl[0],z[3]=A._rl[1],D[1]=A.domain[0],D[3]=A.domain[1]}y.viewport=[m.l,m.b,m.w+m.l,m.h+
m.b];!0===k.matrix&&(k.matrix=h(u));A=-1<l.clickmode.indexOf("select");A="lasso"===v||"select"===v||!!p.selectedpoints||A;k.selectBatch=null;k.unselectBatch=null;if(A){l=p._length;k.selectBatch||(k.selectBatch=[],k.unselectBatch=[]);if(p.selectedpoints){f=k.selectBatch=p.selectedpoints;e={};for(A=0;A<f.length;A++)e[f[A]]=!0;f=[];for(A=0;A<l;A++)e[A]||f.push(A);k.unselectBatch=f}m=q.xpx=Array(x);x=q.ypx=Array(x);for(e=0;e<w.length;e++){A=w[e];if(f=n.getFromId(g,p._diag[A][0]))for(m[e]=Array(l),q=0;q<
l;q++)m[e][q]=f.c2p(t[e][q]);if(A=n.getFromId(g,p._diag[A][1]))for(x[e]=Array(l),q=0;q<l;q++)x[e][q]=A.c2p(t[e][q])}k.selectBatch?(k.matrix.update(r,r),k.matrix.update(k.unselectedOptions,k.selectedOptions),k.matrix.update(y,y)):k.matrix.update(y,null)}else g=b.extendFlat({},r,y),k.matrix.update(g,null),q.xpx=q.ypx=null}}},hoverPoints:function(a,b,c){var d=a.cd[0].trace,e=a.scene.matrixOptions.cdata,f=a.xa,g=a.ya;b=f.c2p(b);c=g.c2p(c);var h=a.distance,l=k(d,f),m=k(d,g);if(!1===l||!1===m)return[a];
l=e[l];e=e[m];var n;for(m=0;m<l.length;m++){var p=e[m],q=f.c2p(l[m])-b;p=g.c2p(p)-c;q=Math.sqrt(q*q+p*p);if(q<h){h=n=q;var r=m}}a.index=r;a.distance=h;a.dxy=n;if(void 0===r)return[a];t(a,l,e,d);return[a]},selectPoints:function(a,b){var c=a.cd,d=c[0].trace,f=c[0].t;c=a.scene;var g=c.matrixOptions.cdata,h=a.xaxis,l=a.yaxis,m=[];if(!c)return m;var n=!q.hasMarkers(d)&&!q.hasText(d);if(!0!==d.visible||n)return m;h=k(d,h);n=k(d,l);if(!1===h||!1===n)return m;d=f.xpx[h];l=f.ypx[n];h=g[h];g=g[n];n=null;if(!1===
b||b.degenerate)var p=e(f.count);else for(n=[],p=[],f=0;f<h.length;f++)b.contains([d[f],l[f]],null,f,a)?(n.push(f),m.push({pointNumber:f,x:h[f],y:g[f]})):p.push(f);c.selectBatch||(c.selectBatch=[],c.unselectBatch=[]);if(!c.selectBatch){for(f=0;f<c.count;f++)c.selectBatch=[],c.unselectBatch=[];c.matrix.update(c.unselectedOptions,c.selectedOptions)}c.selectBatch=n;c.unselectBatch=p;return m},editStyle:function(a,c){var d=c.trace;if(c=a._fullLayout._splomScenes[d.uid])g(a,d),b.extendFlat(c.matrixOptions,
v(d)),a=b.extendFlat({},c.matrixOptions,c.viewOpts),c.matrix.update(a,null)},meta:{}};l.register(f)},{"../../components/grid":620,"../../constants/numerical":677,"../../lib":700,"../../plots/cartesian/axis_ids":751,"../../registry":829,"../scatter/calc":1052,"../scatter/colorscale_calc":1054,"../scatter/marker_colorbar":1069,"../scatter/subtypes":1075,"../scattergl":1104,"../scattergl/constants":1101,"../scattergl/convert":1102,"./attributes":1129,"./base_plot":1130,"./defaults":1131,"array-range":57,
"regl-splom":485}],1133:[function(a,p,l){l=a("../../components/colorscale/attributes");var m=a("../../components/colorbar/attributes"),k=a("../../components/fx/hovertemplate_attributes"),h=a("../mesh3d/attributes"),e=a("../../plots/attributes");a=a("../../lib/extend").extendFlat;var f={x:{valType:"data_array",editType:"calc+clearAxisTypes"},y:{valType:"data_array",editType:"calc+clearAxisTypes"},z:{valType:"data_array",editType:"calc+clearAxisTypes"},u:{valType:"data_array",editType:"calc"},v:{valType:"data_array",
editType:"calc"},w:{valType:"data_array",editType:"calc"},starts:{x:{valType:"data_array",editType:"calc"},y:{valType:"data_array",editType:"calc"},z:{valType:"data_array",editType:"calc"},editType:"calc"},maxdisplayed:{valType:"integer",min:0,dflt:1E3,editType:"calc"},sizeref:{valType:"number",editType:"calc",min:0,dflt:1},text:{valType:"string",dflt:"",editType:"calc"},hovertext:{valType:"string",dflt:"",editType:"calc"},hovertemplate:k({editType:"calc"},{keys:"tubex tubey tubez tubeu tubev tubew norm divergence".split(" ")})};
a(f,l("",{colorAttr:"u/v/w norm",showScaleDflt:!0,editTypeOverride:"calc"}),{colorbar:m});["opacity","lightposition","lighting"].forEach(function(a){f[a]=h[a]});f.hoverinfo=a({},e.hoverinfo,{editType:"calc",flags:"x y z u v w norm divergence text name".split(" "),dflt:"x+y+z+norm+text+name"});f.transforms=void 0;p.exports=f},{"../../components/colorbar/attributes":578,"../../components/colorscale/attributes":584,"../../components/fx/hovertemplate_attributes":615,"../../lib/extend":690,"../../plots/attributes":745,
"../mesh3d/attributes":994}],1134:[function(a,p,l){var m=a("../../components/colorscale/calc");p.exports=function(a,h){var e,f=h.u,b=h.v,k=h.w,l=h.x,p=h.y,d=h.z,g=Math.min(l.length,p.length,d.length,f.length,b.length,k.length),c=0;if(h.starts){var q=h.starts.x||[];var t=h.starts.y||[];var w=h.starts.z||[];c=Math.min(q.length,t.length,w.length)}var x=0,z=Infinity;for(e=0;e<g;e++){var G=f[e],A=b[e],C=k[e];G=Math.sqrt(G*G+A*A+C*C);x=Math.max(x,G);z=Math.min(z,G)}m(a,h,{vals:[z,x],containerStr:"",cLetter:"c"});
a=-Infinity;f=Infinity;b=-Infinity;k=Infinity;z=-Infinity;G=Infinity;for(e=0;e<g;e++)A=l[e],a=Math.max(a,A),f=Math.min(f,A),A=p[e],b=Math.max(b,A),k=Math.min(k,A),A=d[e],z=Math.max(z,A),G=Math.min(G,A);for(e=0;e<c;e++)l=q[e],a=Math.max(a,l),f=Math.min(f,l),l=t[e],b=Math.max(b,l),k=Math.min(k,l),l=w[e],z=Math.max(z,l),G=Math.min(G,l);h._len=g;h._slen=c;h._normMax=x;h._xbnds=[f,a];h._ybnds=[k,b];h._zbnds=[G,z]}},{"../../components/colorscale/calc":585}],1135:[function(a,p,l){function m(a,b){this.scene=
a;this.uid=b;this.data=this.mesh=null}function k(a){var b=a.length;return 2<b?a.slice(1,b-1):2===b?[(a[0]+a[1])/2]:a}function h(a){var b=a.length;return 1===b?[.5,.5]:[a[1]-a[0],a[b-1]-a[b-2]]}function e(a,b){function c(a,b){var c=e[b],f=g[d[b]];return n.simpleMap(a,function(a){return c.d2l(a)*f})}var e=a.fullSceneLayout,g=a.dataScale,l=b._len;a={};a.vectors=r(c(b.u,"xaxis"),c(b.v,"yaxis"),c(b.w,"zaxis"),l);var m=n.distinctVals(b.x.slice(0,l)).vals,p=n.distinctVals(b.y.slice(0,l)).vals,u=n.distinctVals(b.z.slice(0,
l)).vals;if(m.length*p.length*u.length>l)return{positions:[],cells:[]};l=c(m,"xaxis");p=c(p,"yaxis");u=c(u,"zaxis");a.meshgrid=[l,p,u];if(b.starts)m=b._slen,a.startingPositions=r(c(b.starts.x.slice(0,m),"xaxis"),c(b.starts.y.slice(0,m),"yaxis"),c(b.starts.z.slice(0,m),"zaxis"));else{m=p[0];for(var w=k(l),x=k(u),z=Array(w.length*x.length),E=0,F=0;F<w.length;F++)for(var K=0;K<x.length;K++)z[E++]=[w[F],m,x[K]];a.startingPositions=z}a.colormap=q(b);a.tubeSize=b.sizeref;a.maxLength=b.maxdisplayed;m=c(b._xbnds,
"xaxis");w=c(b._ybnds,"yaxis");x=c(b._zbnds,"zaxis");l=h(l);p=h(p);u=h(u);a=f(a,[[m[0]-l[0],w[0]-p[0],x[0]-u[0]],[m[1]+l[1],w[1]+p[1],x[1]+u[1]]]);a.vertexIntensityBounds=[b.cmin/b._normMax,b.cmax/b._normMax];l=b.lightposition;a.lightPosition=[l.x,l.y,l.z];a.ambient=b.lighting.ambient;a.diffuse=b.lighting.diffuse;a.specular=b.lighting.specular;a.roughness=b.lighting.roughness;a.fresnel=b.lighting.fresnel;a.opacity=b.opacity;b._pad=a.tubeScale*b.sizeref*2;return a}var f=a("gl-streamtube3d"),b=f.createTubeMesh,
n=a("../../lib"),q=a("../../lib/gl_format_color").parseColorScale,r=a("../../plots/gl3d/zip3"),d={xaxis:0,yaxis:1,zaxis:2};a=m.prototype;a.handlePick=function(a){function b(a,b){var c=f[d[b]];return e[b].l2c(a)/c}var e=this.scene.fullSceneLayout,f=this.scene.dataScale;if(a.object===this.mesh){var g=a.data.position,h=a.data.velocity;a.traceCoordinate=[b(g[0],"xaxis"),b(g[1],"yaxis"),b(g[2],"zaxis"),b(h[0],"xaxis"),b(h[1],"yaxis"),b(h[2],"zaxis"),a.data.intensity*this.data._normMax,a.data.divergence];
a.textLabel=this.data.hovertext||this.data.text;return!0}};a.update=function(a){this.data=a;a=e(this.scene,a);this.mesh.update(a)};a.dispose=function(){this.scene.glplot.remove(this.mesh);this.mesh.dispose()};p.exports=function(a,c){var d=a.glplot.gl,f=e(a,c);d=b(d,f);f=new m(a,c.uid);f.mesh=d;f.data=c;d._trace=f;a.glplot.add(d);return f}},{"../../lib":700,"../../lib/gl_format_color":697,"../../plots/gl3d/zip3":800,"gl-streamtube3d":309}],1136:[function(a,p,l){var m=a("../../lib"),k=a("../../components/colorscale/defaults"),
h=a("./attributes");p.exports=function(a,f,b,l){function e(b,c){return m.coerce(a,f,h,b,c)}b=e("u");var n=e("v"),d=e("w"),g=e("x"),c=e("y"),p=e("z");b&&b.length&&n&&n.length&&d&&d.length&&g&&g.length&&c&&c.length&&p&&p.length?(e("starts.x"),e("starts.y"),e("starts.z"),e("maxdisplayed"),e("sizeref"),e("lighting.ambient"),e("lighting.diffuse"),e("lighting.specular"),e("lighting.roughness"),e("lighting.fresnel"),e("lightposition.x"),e("lightposition.y"),e("lightposition.z"),k(a,f,l,e,{prefix:"",cLetter:"c"}),
e("text"),e("hovertext"),e("hovertemplate"),f._length=null):f.visible=!1}},{"../../components/colorscale/defaults":587,"../../lib":700,"./attributes":1133}],1137:[function(a,p,l){p.exports={moduleType:"trace",name:"streamtube",basePlotModule:a("../../plots/gl3d"),categories:["gl3d"],attributes:a("./attributes"),supplyDefaults:a("./defaults"),colorbar:{min:"cmin",max:"cmax"},calc:a("./calc"),plot:a("./convert"),eventData:function(a,k){a.tubex=a.x;a.tubey=a.y;a.tubez=a.z;a.tubeu=k.traceCoordinate[3];
a.tubev=k.traceCoordinate[4];a.tubew=k.traceCoordinate[5];a.norm=k.traceCoordinate[6];a.divergence=k.traceCoordinate[7];delete a.x;delete a.y;delete a.z;return a},meta:{}}},{"../../plots/gl3d":789,"./attributes":1133,"./calc":1134,"./convert":1135,"./defaults":1136}],1138:[function(a,p,l){l=a("../../plots/attributes");var m=a("../../components/fx/hovertemplate_attributes"),k=a("../../plots/domain").attributes,h=a("../pie/attributes");a=a("../../lib/extend").extendFlat;p.exports={labels:{valType:"data_array",
editType:"calc"},parents:{valType:"data_array",editType:"calc"},values:{valType:"data_array",editType:"calc"},branchvalues:{valType:"enumerated",values:["remainder","total"],dflt:"remainder",editType:"calc"},level:{valType:"any",editType:"plot"},maxdepth:{valType:"integer",editType:"plot",dflt:-1},marker:{colors:{valType:"data_array",editType:"calc"},line:{color:a({},h.marker.line.color,{dflt:null}),width:a({},h.marker.line.width,{dflt:1}),editType:"calc"},editType:"calc"},leaf:{opacity:{valType:"number",
editType:"style",min:0,max:1,dflt:.7},editType:"plot"},text:h.text,textinfo:a({},h.textinfo,{editType:"plot",flags:["label","text","value"]}),textfont:h.textfont,hovertext:h.hovertext,hoverinfo:a({},l.hoverinfo,{flags:["label","text","value","name"]}),hovertemplate:m(),insidetextfont:h.insidetextfont,outsidetextfont:h.outsidetextfont,domain:k({name:"sunburst",trace:!0,editType:"calc"})}},{"../../components/fx/hovertemplate_attributes":615,"../../lib/extend":690,"../../plots/attributes":745,"../../plots/domain":773,
"../pie/attributes":1026}],1139:[function(a,p,l){var m=a("../../registry"),k=a("../../plots/get_data").getModuleCalcData,h=l.name="sunburst";l.plot=function(a,f,b,l){f=m.getModule(h);var e=k(a.calcdata,f)[0];f.plot(a,e,b,l)};l.clean=function(a,f,b,k){a=k._has&&k._has(h);f=f._has&&f._has(h);a&&!f&&k._sunburstlayer.selectAll("g.trace").remove()}},{"../../plots/get_data":784,"../../registry":829}],1140:[function(a,p,l){var m=a("d3-hierarchy"),k=a("fast-isnumeric"),h=a("../../lib"),e=a("../pie/calc").makePullColorFn,
f=a("../pie/calc").generateExtendedColors,b=h.isArrayOrTypedArray,n={};l.calc=function(a,f){a=a._fullLayout;var d=f.ids,g=b(d),c=f.labels,l=f.parents,n=f.values,p=b(n),q=[],r={},u={},w=function(a,b){r[a]?r[a].push(b):r[a]=[b];u[b]=1},x=function(a){return!p||k(n[a])&&0<=n[a]};if(g){g=Math.min(d.length,l.length);var z=function(a){return d[a]&&x(a)};var F=function(a){return String(d[a])}}else g=Math.min(c.length,l.length),z=function(a){return c[a]&&x(a)},F=function(a){return String(c[a])};p&&(g=Math.min(g,
n.length));for(var E=0;E<g;E++)if(z(E)){var H=F(E),K=l[E]?String(l[E]):"",O={i:E,id:H,pid:K,label:c[E]?String(c[E]):""};p&&(O.v=+n[E]);q.push(O);w(K,H)}if(!r[""]){l=[];for(var I in r)u[I]||l.push(I);if(1===l.length)I=l[0],q.unshift({id:I,pid:"",label:I});else return h.warn("Multiple implied roots, cannot build sunburst hierarchy.")}else if(1<r[""].length){I=h.randstr();for(l=0;l<q.length;l++)""===q[l].pid&&(q[l].pid=I);q.unshift({hasMultipleRoots:!0,id:I,pid:""})}try{var Q=m.stratify().id(function(a){return a.id}).parentId(function(a){return a.pid})(q)}catch(ca){return h.warn("Failed to build sunburst hierarchy. Error: "+
ca.message)}Q=m.hierarchy(Q);var N=!1;if(p)switch(f.branchvalues){case "remainder":Q.sum(function(a){return a.data.v});break;case "total":Q.each(function(a){var b=a.data.data.v;if(a.children){var c=a.children.reduce(function(a,b){return a+b.data.data.v},0);if(b<c)return N=!0,h.warn(["Total value for node",a.data.data.id,"is smaller than the sum of its children."].join(" "))}a.value=b})}else Q.count();if(!N){Q.sort(function(a,b){return b.value-a.value});var L=f.marker.colors||[],R=e(a._sunburstcolormap);
Q.each(function(a){a=a.data.data;a.color=R(L[a.i],a.id)});q[0].hierarchy=Q;return q}};l.crossTraceCalc=function(a){function b(a){var b=a.data.data,d=b.id;!1===b.color&&(c[d]?b.color=c[d]:a.parent?a.parent.parent?b.color=a.parent.data.data.color:(c[d]=b.color=e[h%e.length],h++):b.color="rgba(0,0,0,0)")}var d=a._fullLayout;a=a.calcdata;var e=d.sunburstcolorway,c=d._sunburstcolormap;d.extendsunburstcolors&&(e=f(e,n));var h=0;for(d=0;d<a.length;d++){var k=a[d][0];"sunburst"===k.trace.type&&k.hierarchy&&
k.hierarchy.each(b)}}},{"../../lib":700,"../pie/calc":1028,"d3-hierarchy":147,"fast-isnumeric":221}],1141:[function(a,p,l){p.exports={CLICK_TRANSITION_TIME:750,CLICK_TRANSITION_EASING:"linear"}},{}],1142:[function(a,p,l){var m=a("../../lib"),k=a("./attributes"),h=a("../../plots/domain").defaults,e=m.coerceFont;p.exports=function(a,b,l,p){function f(d,c){return m.coerce(a,b,k,d,c)}l=f("labels");var d=f("parents");l&&l.length&&d&&d.length?((l=f("values"))&&l.length&&f("branchvalues"),f("level"),f("maxdepth"),
f("marker.line.width")&&f("marker.line.color",p.paper_bgcolor),f("marker.colors"),f("leaf.opacity"),l=f("text"),f("textinfo",Array.isArray(l)?"text+label":"label"),f("hovertext"),f("hovertemplate"),l=e(f,"textfont",p.font),d=m.extendFlat({},l),a.textfont&&a.textfont.color||delete d.color,e(f,"insidetextfont",d),e(f,"outsidetextfont",l),h(b,p,f),b._length=null):b.visible=!1}},{"../../lib":700,"../../plots/domain":773,"./attributes":1138}],1143:[function(a,p,l){p.exports={moduleType:"trace",name:"sunburst",
basePlotModule:a("./base_plot"),categories:[],animatable:!0,attributes:a("./attributes"),layoutAttributes:a("./layout_attributes"),supplyDefaults:a("./defaults"),supplyLayoutDefaults:a("./layout_defaults"),calc:a("./calc").calc,crossTraceCalc:a("./calc").crossTraceCalc,plot:a("./plot"),style:a("./style").style,meta:{}}},{"./attributes":1138,"./base_plot":1139,"./calc":1140,"./defaults":1142,"./layout_attributes":1144,"./layout_defaults":1145,"./plot":1146,"./style":1147}],1144:[function(a,p,l){p.exports=
{sunburstcolorway:{valType:"colorlist",editType:"calc"},extendsunburstcolors:{valType:"boolean",dflt:!0,editType:"calc"}}},{}],1145:[function(a,p,l){var m=a("../../lib"),k=a("./layout_attributes");p.exports=function(a,e){m.coerce(a,e,k,"sunburstcolorway",e.colorway);m.coerce(a,e,k,"extendsunburstcolors",void 0)}},{"../../lib":700,"./layout_attributes":1144}],1146:[function(a,p,l){function m(a,e,l,m){function p(a){var b=f(a),d=M[b],e=M[f(D)];if(e){var g=a.x1>e.x1?2*Math.PI:0;a=a.rpx1<e.rpx1?{rpx0:0,
rpx1:0}:{x0:g,x1:g}}else{var h,k=f(a.parent);x.each(function(a){if(f(a)===k)return h=a});a=h.children;var l;a.forEach(function(a,c){if(f(a)===b)return l=c});a=a.length;e=c.interpolate(h.x0,h.x1);a={rpx0:H,rpx1:H,x0:e(l/a),x1:e((l+1)/a)}}return c.interpolate(d,a)}function q(a){var b=M[f(a)],d={x0:a.x0,x1:a.x1,rpx0:a.rpx0,rpx1:a.rpx1};b||(J?a.parent?wa?(a=a.x1>wa?2*Math.PI:0,b={x0:a,x1:a}):(b={rpx0:H,rpx1:H},G.extendFlat(b,u(a))):b={rpx0:0,rpx1:0}:b={x0:0,x1:0});return c.interpolate(b,d)}function t(a){var b=
M[f(a)],d=a.transform;b||(b={rpx1:a.rpx1,transform:{scale:0,rotate:d.rotate,rCenter:d.rCenter,x:d.x,y:d.y}},J?a.parent?wa?b.x0=b.x1=a.x1>wa?2*Math.PI:0:G.extendFlat(b,u(a)):b.x0=b.x1=0:b.x0=b.x1=0);var e=c.interpolate(b.rpx1,a.rpx1),g=c.interpolate(b.x0,a.x0),h=c.interpolate(b.x1,a.x1),k=c.interpolate(b.transform.scale,d.scale),l=c.interpolate(b.transform.rotate,d.rotate),m=0===d.rCenter?3:0===b.transform.rCenter?1/3:1,n=c.interpolate(b.transform.rCenter,d.rCenter);return function(a){var b=e(a),c=
g(a),f=h(a),p=n(Math.pow(a,m));b=Q(b,(c+f)/2);c=d.x;f=d.y;return{rpx1:e(a),translateX:I+b[0]*p+(c||0),translateY:L+b[1]*p+(f||0),transform:{scale:k(a),rotate:l(a),rCenter:p}}}}function u(a){var b=a.parent,d=M[f(b)],e={};d?(b=b.children,a=b.indexOf(a),b=b.length,d=c.interpolate(d.x0,d.x1),e.x0=d(a/b),e.x1=d(a/b)):e.x0=e.x1=0;return e}var v=a._fullLayout,w=m&&0<m.duration,x=c.select(l).selectAll("g.slice"),y=e[0],A=y.trace,D=h(y.hierarchy,A.level);l=0<=A.maxdepth?A.maxdepth:Infinity;m=v._size;var B=
A.domain,F=m.h*(B.y[1]-B.y[0]),H=.5*Math.min(m.w*(B.x[1]-B.x[0]),F),I=y.cx=m.l+m.w*(B.x[1]+B.x[0])/2,L=y.cy=m.t+m.h*(1-B.y[0])-F/2;if(!D)return x.remove();var J=null,M={};w&&x.each(function(a){M[f(a)]={rpx0:a.rpx0,rpx1:a.rpx1,x0:a.x0,x1:a.x1,transform:a.transform};J||a.parent||(J=a)});m=k(D).descendants();B=D.height+1;var N=0,P=l;y.hasMultipleRoots&&""===D.data.data.pid&&(m=m.slice(1),--B,N=1,P+=1);m=m.filter(function(a){return a.y1<=P});var O=Math.min(B,l),Q=function(a,b){return[a*Math.cos(b),-a*
Math.sin(b)]},ka=function(a){return G.pathAnnulus(a.rpx0,a.rpx1,a.x0,a.x1,I,L)};x=x.data(m,function(a){return f(a)});x.enter().append("g").classed("slice",!0);w?x.exit().transition().each(function(){var a=c.select(this);a.select("path.surface").transition().attrTween("d",function(a){var b=p(a);return function(a){return ka(b(a))}});a.select("g.slicetext").attr("opacity",0)}).remove():x.exit().remove();x.order();var wa=null;if(w&&J){var ta=f(J);x.each(function(a){null===wa&&f(a)===ta&&(wa=a.x1)})}l=
x;w&&(l=l.transition().each("end",function(){var d=c.select(this);b(d,a,{isTransitioning:!1})}));l.each(function(f){var h=c.select(this),k=G.ensureSingle(h,"path","surface",function(a){a.style("pointer-events","all")});f.rpx0=(f.y0-N)/O*H;f.rpx1=(f.y1-N)/O*H;f.xmid=(f.x0+f.x1)/2;f.pxmid=Q(f.rpx1,f.xmid);f.midangle=-(f.xmid-Math.PI/2);f.halfangle=.5*Math.min(G.angleDelta(f.x0,f.x1)||Math.PI,Math.PI);f.ring=1-f.rpx0/f.rpx1;var l=0===f.rpx0&&f.xmid===Math.PI?1:Math.max(0,Math.min(1/(1+1/Math.sin(f.halfangle)),
f.ring/2));f.rInscribed=l;w?k.transition().attrTween("d",function(a){var b=q(a);return function(a){return ka(b(a))}}):k.attr("d",ka);h.call(n,a,e).call(b,a,{isTransitioning:a._transitioning});k.call(K,f,A);h=G.ensureSingle(h,"g","slicetext");h=G.ensureSingle(h,"text","",function(a){a.attr("data-notex",1)});h.text(r(f,A,v)).classed("slicetext",!0).attr("text-anchor","middle").call(z.font,""===f.data.data.pid?d(A,f,v.font):g(A,f,v.font)).call(C.convertToTspans,a);var m=z.bBox(h.node());f.transform=
E(m,f,y);f.translateX=I+f.pxmid[0]*f.transform.rCenter+(f.transform.x||0);f.translateY=L+f.pxmid[1]*f.transform.rCenter+(f.transform.y||0);var p=function(a,b){return"translate("+a.translateX+","+a.translateY+")"+(1>a.transform.scale?"scale("+a.transform.scale+")":"")+(a.transform.rotate?"rotate("+a.transform.rotate+")":"")+"translate("+-(b.left+b.right)/2+","+-(b.top+b.bottom)/2+")"};w?h.transition().attrTween("transform",function(a){var b=t(a);return function(a){return p(b(a),m)}}):h.attr("transform",
p(f,m))})}function k(a){return v.partition().size([2*Math.PI,a.height+1])(a)}function h(a,b){var c;b&&a.eachAfter(function(a){if(f(a)===b)return c=a.copy()});return c||a}function e(a,b){var c;a.eachAfter(function(a){for(var d=a.children||[],e=0;e<d.length;e++)if(f(d[e])===b)return c=a.copy()});return c||a}function f(a){return a.data.data.id}function b(a,b,c){b=a.datum();F(a,(c||{}).isTransitioning||!b.children||""===b.data.data.pid?null:"pointer")}function n(a,b,d){var g=d[0],k=g.trace;"_hasHoverLabel"in
k||(k._hasHoverLabel=!1);"_hasHoverEvent"in k||(k._hasHoverEvent=!1);a.on("mouseover",function(a){var d=b._fullLayout;if(!b._dragging&&!1!==d.hovermode){var e=b._fullData[k.index],f=a.data.data,h=f.i,l=function(a){return G.castOption(e,h,a)},m=l("hovertemplate"),n=w.castHoverinfo(e,d,h),p=d.separators;if(m||n&&"none"!==n&&"skip"!==n){var r=a.rInscribed,t=g.cx+a.pxmid[0]*(1-r),u=g.cy+a.pxmid[1]*(1-r),v={},x=[],y=[];n&&(x="all"===n?e._module.attributes.hoverinfo.flags:n.split("+"));v.label=f.label;
-1!==x.indexOf("label")&&v.label&&y.push(v.label);f.hasOwnProperty("v")&&(v.value=f.v,v.valueLabel=H(v.value,p),-1!==x.indexOf("value")&&y.push(v.valueLabel));v.text=l("hovertext")||l("text");-1!==x.indexOf("text")&&v.text&&y.push(v.text);w.loneHover({x0:t-r*a.rpx1,x1:t+r*a.rpx1,y:u,idealAlign:0>a.pxmid[0]?"left":"right",trace:e,text:y.join("\x3cbr\x3e"),name:m||-1!==x.indexOf("name")?e.name:void 0,color:l("hoverlabel.bgcolor")||f.color,borderColor:l("hoverlabel.bordercolor"),fontFamily:l("hoverlabel.font.family"),
fontSize:l("hoverlabel.font.size"),fontColor:l("hoverlabel.font.color"),hovertemplate:m,hovertemplateLabels:v,eventData:[q(a,e)]},{container:d._hoverlayer.node(),outerContainer:d._paper.node(),gd:b});k._hasHoverLabel=!0}k._hasHoverEvent=!0;b.emit("plotly_hover",{points:[q(a,e)],event:c.event})}});a.on("mouseout",function(a){var d=b._fullLayout,e=b._fullData[k.index],f=c.select(this).datum();k._hasHoverEvent&&(a.originalEvent=c.event,b.emit("plotly_unhover",{points:[q(f,e)],event:c.event}),k._hasHoverEvent=
!1);k._hasHoverLabel&&(w.loneUnhover(d._hoverlayer.node()),k._hasHoverLabel=!1)});a.on("click",function(a){var d=b._fullLayout,l=b._fullData[k.index];if(!1===A.triggerHandler(b,"plotly_sunburstclick",{points:[q(a,l)],event:c.event})||!a.children||""===a.data.data.pid)d.hovermode&&(b._hoverdata=[q(a,l)],w.click(b,c.event));else if(!b._dragging&&!b._transitioning){t.call("_storeDirectGUIEdit",l,d._tracePreGUI[l.uid],{level:l.level});l=g.hierarchy;var m=f(a);a=a.parent?h(l,m):e(l,m);a={data:[{level:f(a)}],
traces:[k.index]};l={frame:{redraw:!1,duration:O.CLICK_TRANSITION_TIME},transition:{duration:O.CLICK_TRANSITION_TIME,easing:O.CLICK_TRANSITION_EASING},mode:"immediate",fromcurrent:!0};w.loneUnhover(d._hoverlayer.node());t.call("animate",b,a,l)}})}function q(a,b){a=a.data.data;var c={curveNumber:b.index,pointNumber:a.i,data:b._input,fullData:b};J(c,b,a.i);return c}function r(a,b,c){var d=b.textinfo;if(!d||"none"===d)return"";a=a.data.data;c=c.separators;var e=d.split("+");d=[];-1!==e.indexOf("label")&&
a.label&&d.push(a.label);a.hasOwnProperty("v")&&-1!==e.indexOf("value")&&d.push(H(a.v,c));-1!==e.indexOf("text")&&(b=G.castOption(b,a.i,"text"))&&d.push(b);return d.join("\x3cbr\x3e")}function d(a,b,c){var d=b.data.data.i;b=G.castOption(a,d,"outsidetextfont.color")||G.castOption(a,d,"textfont.color")||c.color;var e=G.castOption(a,d,"outsidetextfont.family")||G.castOption(a,d,"textfont.family")||c.family;a=G.castOption(a,d,"outsidetextfont.size")||G.castOption(a,d,"textfont.size")||c.size;return{color:b,
family:e,size:a}}function g(a,b,c){b=b.data.data;var d=b.i,e=G.castOption(a,d,"insidetextfont.color");!e&&a._input.textfont&&(e=G.castOption(a._input,d,"textfont.color"));var f=G.castOption(a,d,"insidetextfont.family")||G.castOption(a,d,"textfont.family")||c.family;a=G.castOption(a,d,"insidetextfont.size")||G.castOption(a,d,"textfont.size")||c.size;return{color:e||x.contrast(b.color),family:f,size:a}}var c=a("d3"),v=a("d3-hierarchy"),t=a("../../registry"),w=a("../../components/fx"),x=a("../../components/color"),
z=a("../../components/drawing"),G=a("../../lib"),A=a("../../lib/events"),C=a("../../lib/svg_text_utils"),F=a("../../lib/setcursor"),J=a("../../components/fx/helpers").appendArrayPointValue,E=a("../pie/plot").transformInsideText,H=a("../pie/helpers").formatPieValue,K=a("./style").styleOne,O=a("./constants");p.exports=function(a,b,d,e){var f=a._fullLayout._sunburstlayer,g,h=!d,k=d&&0<d.duration;b=f.selectAll("g.trace.sunburst").data(b,function(a){return a[0].trace.uid});b.enter().append("g").classed("trace",
!0).classed("sunburst",!0).attr("stroke-linejoin","round");b.order();k?(e&&(g=e()),c.transition().duration(d.duration).ease(d.easing).each("end",function(){g&&g()}).each("interrupt",function(){g&&g()}).each(function(){f.selectAll("g.trace").each(function(b){m(a,b,this,d)})})):b.each(function(b){m(a,b,this,d)});h&&b.exit().remove()}},{"../../components/color":577,"../../components/drawing":598,"../../components/fx":616,"../../components/fx/helpers":612,"../../lib":700,"../../lib/events":689,"../../lib/setcursor":720,
"../../lib/svg_text_utils":724,"../../registry":829,"../pie/helpers":1031,"../pie/plot":1035,"./constants":1141,"./style":1147,d3:154,"d3-hierarchy":147}],1147:[function(a,p,l){function m(a,b,k){var f=b.data.data;b=!b.children;var l=f.i,d=e.castOption(k,l,"marker.line.color")||h.defaultLine;l=e.castOption(k,l,"marker.line.width")||0;a.style("stroke-width",l).call(h.fill,f.color).call(h.stroke,d).style("opacity",b?k.leaf.opacity:null)}var k=a("d3"),h=a("../../components/color"),e=a("../../lib");p.exports=
{style:function(a){a._fullLayout._sunburstlayer.selectAll(".trace").each(function(a){var b=k.select(this),e=a[0].trace;b.style("opacity",e.opacity);b.selectAll("path.surface").each(function(a){k.select(this).call(m,a,e)})})},styleOne:m}},{"../../components/color":577,"../../lib":700,d3:154}],1148:[function(a,p,l){function m(a){return{valType:"boolean",dflt:!1}}function k(a){return{show:{valType:"boolean",dflt:!1},project:{x:m("x"),y:m("y"),z:m("z")},color:{valType:"color",dflt:h.defaultLine},usecolormap:{valType:"boolean",
dflt:!1},width:{valType:"number",min:1,max:16,dflt:2},highlight:{valType:"boolean",dflt:!0},highlightcolor:{valType:"color",dflt:h.defaultLine},highlightwidth:{valType:"number",min:1,max:16,dflt:2}}}var h=a("../../components/color");l=a("../../components/colorscale/attributes");var e=a("../../components/colorbar/attributes"),f=a("../../components/fx/hovertemplate_attributes"),b=a("../../plots/attributes"),n=a("../../lib/extend").extendFlat;a=a("../../plot_api/edit_types").overrideAll;p=p.exports=
a(n({z:{valType:"data_array"},x:{valType:"data_array"},y:{valType:"data_array"},text:{valType:"string",dflt:"",arrayOk:!0},hovertext:{valType:"string",dflt:"",arrayOk:!0},hovertemplate:f(),connectgaps:{valType:"boolean",dflt:!1,editType:"calc"},surfacecolor:{valType:"data_array"}},l("",{colorAttr:"z or surfacecolor",showScaleDflt:!0,autoColorDflt:!1,editTypeOverride:"calc"}),{colorbar:e,contours:{x:k("x"),y:k("y"),z:k("z")},hidesurface:{valType:"boolean",dflt:!1},lightposition:{x:{valType:"number",
min:-1E5,max:1E5,dflt:10},y:{valType:"number",min:-1E5,max:1E5,dflt:1E4},z:{valType:"number",min:-1E5,max:1E5,dflt:0}},lighting:{ambient:{valType:"number",min:0,max:1,dflt:.8},diffuse:{valType:"number",min:0,max:1,dflt:.8},specular:{valType:"number",min:0,max:2,dflt:.05},roughness:{valType:"number",min:0,max:1,dflt:.5},fresnel:{valType:"number",min:0,max:5,dflt:.2}},opacity:{valType:"number",min:0,max:1,dflt:1},_deprecated:{zauto:n({},l.zauto,{}),zmin:n({},l.zmin,{}),zmax:n({},l.zmax,{})},hoverinfo:n({},
b.hoverinfo)}),"calc","nested");p.x.editType=p.y.editType=p.z.editType="calc+clearAxisTypes";p.transforms=void 0},{"../../components/color":577,"../../components/colorbar/attributes":578,"../../components/colorscale/attributes":584,"../../components/fx/hovertemplate_attributes":615,"../../lib/extend":690,"../../plot_api/edit_types":731,"../../plots/attributes":745}],1149:[function(a,p,l){var m=a("../../components/colorscale/calc");p.exports=function(a,h){h.surfacecolor?m(a,h,{vals:h.surfacecolor,
containerStr:"",cLetter:"c"}):m(a,h,{vals:h.z,containerStr:"",cLetter:"c"})}},{"../../components/colorscale/calc":585}],1150:[function(a,p,l){function m(a,b,c){this.scene=a;this.uid=c;this.surface=b;this.data=null;this.showContour=[!1,!1,!1];this.minValues=[Infinity,Infinity,Infinity];this.maxValues=[-Infinity,-Infinity,-Infinity];this.dataScaleY=this.dataScaleX=1;this.refineData=!0;this._interpolatedZ=!1}function k(a){var b=a[0].rgb;a=a[a.length-1].rgb;return b[0]===a[0]&&b[1]===a[1]&&b[2]===a[2]&&
b[3]===a[3]}function h(a,b){if(a<b)return 0;for(var c=0;0===Math.floor(a%b);)a/=b,c++;return c}function e(a){for(var b=[],c=0;c<t.length;c++)b.push(h(a,t[c]));return b}var f=a("gl-surface3d"),b=a("ndarray"),n=a("ndarray-homography"),q=a("ndarray-fill"),r=a("../../lib").isArrayOrTypedArray,d=a("../../lib/gl_format_color").parseColorScale,g=a("../../lib/str2rgbarray"),c=a("../heatmap/interp2d"),v=a("../heatmap/find_empties");a=m.prototype;a.getXat=function(a,b,c,d){a=r(this.data.x)?r(this.data.x[0])?
this.data.x[b][a]:this.data.x[a]:a;return void 0===c?a:d.d2l(a,0,c)};a.getYat=function(a,b,c,d){a=r(this.data.y)?r(this.data.y[0])?this.data.y[b][a]:this.data.y[b]:b;return void 0===c?a:d.d2l(a,0,c)};a.getZat=function(a,b,c,d){var e=this.data.z[b][a];null===e&&this.data.connectgaps&&this.data._interpolatedZ&&(e=this.data._interpolatedZ[b][a]);return void 0===c?e:d.d2l(e,0,c)};a.handlePick=function(a){if(a.object===this.surface){var b=Math.max(Math.min(Math.round((a.data.index[0]-1)/this.dataScaleX-
1),this.data.z[0].length-1),0),c=Math.max(Math.min(Math.round((a.data.index[1]-1)/this.dataScaleY-1),this.data._ylength-1),0);a.index=[b,c];a.traceCoordinate=[this.getXat(b,c),this.getYat(b,c),this.getZat(b,c)];a.dataCoordinate=[this.getXat(b,c,this.data.xcalendar,this.scene.fullSceneLayout.xaxis),this.getYat(b,c,this.data.ycalendar,this.scene.fullSceneLayout.yaxis),this.getZat(b,c,this.data.zcalendar,this.scene.fullSceneLayout.zaxis)];for(var d=0;3>d;d++){var e=a.dataCoordinate[d];null!==e&&void 0!==
e&&(a.dataCoordinate[d]*=this.scene.dataScale[d])}d=this.data.hovertext||this.data.text;Array.isArray(d)&&d[c]&&void 0!==d[c][b]?a.textLabel=d[c][b]:a.textLabel=d?d:"";a.data.dataCoordinate=a.dataCoordinate.slice();this.surface.highlight(a.data);this.scene.glplot.spikes.position=a.dataCoordinate;return!0}};var t=[2,3,5,7,11,13,17,19,23,29,31,37,41,43,47,53,59,61,67,71,73,79,83,89,97,101,103,107,109,113,127,131,137,139,149,151,157,163,167,173,179,181,191,193,197,199,211,223,227,229,233,239,241,251,
257,263,269,271,277,281,283,293,307,311,313,317,331,337,347,349,353,359,367,373,379,383,389,397,401,409,419,421,431,433,439,443,449,457,461,463,467,479,487,491,499,503,509,521,523,541,547,557,563,569,571,577,587,593,599,601,607,613,617,619,631,641,643,647,653,659,661,673,677,683,691,701,709,719,727,733,739,743,751,757,761,769,773,787,797,809,811,821,823,827,829,839,853,857,859,863,877,881,883,887,907,911,919,929,937,941,947,953,967,971,977,983,991,997,1009,1013,1019,1021,1031,1033,1039,1049,1051,
1061,1063,1069,1087,1091,1093,1097,1103,1109,1117,1123,1129,1151,1153,1163,1171,1181,1187,1193,1201,1213,1217,1223,1229,1231,1237,1249,1259,1277,1279,1283,1289,1291,1297,1301,1303,1307,1319,1321,1327,1361,1367,1373,1381,1399,1409,1423,1427,1429,1433,1439,1447,1451,1453,1459,1471,1481,1483,1487,1489,1493,1499,1511,1523,1531,1543,1549,1553,1559,1567,1571,1579,1583,1597,1601,1607,1609,1613,1619,1621,1627,1637,1657,1663,1667,1669,1693,1697,1699,1709,1721,1723,1733,1741,1747,1753,1759,1777,1783,1787,1789,
1801,1811,1823,1831,1847,1861,1867,1871,1873,1877,1879,1889,1901,1907,1913,1931,1933,1949,1951,1973,1979,1987,1993,1997,1999,2003,2011,2017,2027,2029,2039,2053,2063,2069,2081,2083,2087,2089,2099,2111,2113,2129,2131,2137,2141,2143,2153,2161,2179,2203,2207,2213,2221,2237,2239,2243,2251,2267,2269,2273,2281,2287,2293,2297,2309,2311,2333,2339,2341,2347,2351,2357,2371,2377,2381,2383,2389,2393,2399,2411,2417,2423,2437,2441,2447,2459,2467,2473,2477,2503,2521,2531,2539,2543,2549,2551,2557,2579,2591,2593,2609,
2617,2621,2633,2647,2657,2659,2663,2671,2677,2683,2687,2689,2693,2699,2707,2711,2713,2719,2729,2731,2741,2749,2753,2767,2777,2789,2791,2797,2801,2803,2819,2833,2837,2843,2851,2857,2861,2879,2887,2897,2903,2909,2917,2927,2939,2953,2957,2963,2969,2971,2999];a.calcXnums=function(a){var b,c=[];for(b=1;b<a;b++){var d=this.getXat(b-1,0),e=this.getXat(b,0);c[b-1]=e!==d&&void 0!==d&&null!==d&&void 0!==e&&null!==e?Math.abs(e-d):0}d=0;for(b=1;b<a;b++)d+=c[b-1];for(b=1;b<a;b++)c[b-1]=0===c[b-1]?1:Math.round(d/
c[b-1]);return c};a.calcYnums=function(a){var b,c=[];for(b=1;b<a;b++){var d=this.getYat(0,b-1),e=this.getYat(0,b);c[b-1]=e!==d&&void 0!==d&&null!==d&&void 0!==e&&null!==e?Math.abs(e-d):0}d=0;for(b=1;b<a;b++)d+=c[b-1];for(b=1;b<a;b++)c[b-1]=0===c[b-1]?1:Math.round(d/c[b-1]);return c};l=[1,2,4,6,12,24,36,48,60,120,180,240,360,720,840,1260];var w=l[9],x=l[13];a.estimateScale=function(a,b){b=0===b?this.calcXnums(a):this.calcYnums(a);if(0===b.length)b=void 0;else{for(var c=1,d=0;d<b.length;d++){var f=
b[d];if(1>c||1>f)c=void 0;else{c=e(c);f=e(f);for(var g=1,h=0;h<t.length;h++)g*=Math.pow(t[h],Math.max(c[h],f[h]));c=g}}b=c}for(d=1+b;d<w;)d*=2;for(;d>x;){d--;c=b=d;d=e(c);for(f=0;f<t.length;f++)if(0<d[f]){c=t[f];break}d=b/c;d++;d<w&&(d=x)}a=Math.round(d/a);return 1<a?a:1};a.refineCoords=function(a){var c=this.dataScaleX,d=this.dataScaleY,e=Math.floor(a[0].shape[0]*c+1)|0,f=Math.floor(a[0].shape[1]*d+1)|0,g=1+a[0].shape[0]+1,h=1+a[0].shape[1]+1;g=b(new Float32Array(g*h),[g,h]);for(h=0;h<a.length;++h){this.surface.padField(g,
a[h]);var k=b(new Float32Array(e*f),[e,f]);n(k,g,[c,0,0,0,d,0,0,0,1]);a[h]=k}};a.setContourLevels=function(){for(var a=[[],[],[]],b=!1,c=0;3>c;++c)this.showContour[c]&&(b=!0,a[c]=this.scene.contourLevels[c]);b&&this.surface.update({levels:a})};a.update=function(a){var e=this.scene,f=e.fullSceneLayout,h=this.surface,l=a.opacity,m=d(a,l),n=e.dataScale,p=a.z[0].length,r=a._ylength;e=e.contourLevels;this.data=a;var t,u,w,y=[];for(t=0;3>t;t++)for(y[t]=[],u=0;u<p;u++)y[t][u]=[];for(u=0;u<p;u++)for(w=0;w<
r;w++)y[0][u][w]=this.getXat(u,w,a.xcalendar,f.xaxis),y[1][u][w]=this.getYat(u,w,a.ycalendar,f.yaxis),y[2][u][w]=this.getZat(u,w,a.zcalendar,f.zaxis);if(a.connectgaps)for(a._emptypoints=v(y[2]),c(y[2],a._emptypoints),a._interpolatedZ=[],u=0;u<p;u++)for(a._interpolatedZ[u]=[],w=0;w<r;w++)a._interpolatedZ[u][w]=y[2][u][w];for(t=0;3>t;t++)for(u=0;u<p;u++)for(w=0;w<r;w++)f=y[t][u][w],null===f||void 0===f?y[t][u][w]=NaN:f=y[t][u][w]*=n[t];for(t=0;3>t;t++)for(u=0;u<p;u++)for(w=0;w<r;w++)f=y[t][u][w],null!==
f&&void 0!==f&&(this.minValues[t]>f&&(this.minValues[t]=f),this.maxValues[t]<f&&(this.maxValues[t]=f));for(t=0;3>t;t++)a._objectOffset[t]=.5*(this.minValues[t]+this.maxValues[t]);for(t=0;3>t;t++)for(u=0;u<p;u++)for(w=0;w<r;w++)f=y[t][u][w],null!==f&&void 0!==f&&(y[t][u][w]-=a._objectOffset[t]);f=[b(new Float32Array(p*r),[p,r]),b(new Float32Array(p*r),[p,r]),b(new Float32Array(p*r),[p,r])];q(f[0],function(a,b){return y[0][a][b]});q(f[1],function(a,b){return y[1][a][b]});q(f[2],function(a,b){return y[2][a][b]});
y=[];u={colormap:m,levels:[[],[],[]],showContour:[!0,!0,!0],showSurface:!a.hidesurface,contourProject:[[!1,!1,!1],[!1,!1,!1],[!1,!1,!1]],contourWidth:[1,1,1],contourColor:[[1,1,1,1],[1,1,1,1],[1,1,1,1]],contourTint:[1,1,1],dynamicColor:[[1,1,1,1],[1,1,1,1],[1,1,1,1]],dynamicWidth:[1,1,1],dynamicTint:[1,1,1],opacity:a.opacity};u.intensityBounds=[a.cmin,a.cmax];a.surfacecolor?(t=b(new Float32Array(p*r),[p,r]),q(t,function(b,c){return a.surfacecolor[c][b]}),f.push(t)):(u.intensityBounds[0]*=n[2],u.intensityBounds[1]*=
n[2]);if(x<f[0].shape[0]||x<f[0].shape[1])this.refineData=!1;!0===this.refineData&&(this.dataScaleX=this.estimateScale(f[0].shape[0],0),this.dataScaleY=this.estimateScale(f[0].shape[1],1),1===this.dataScaleX&&1===this.dataScaleY||this.refineCoords(f));a.surfacecolor&&(u.intensity=f.pop());n=[!0,!0,!0];p=["x","y","z"];for(t=0;3>t;++t)r=a.contours[p[t]],n[t]=r.highlight,u.showContour[t]=r.show||r.highlight,u.showContour[t]&&(u.contourProject[t]=[r.project.x,r.project.y,r.project.z],r.show?(this.showContour[t]=
!0,u.levels[t]=e[t],h.highlightColor[t]=u.contourColor[t]=g(r.color),h.highlightTint[t]=r.usecolormap?u.contourTint[t]=0:u.contourTint[t]=1,u.contourWidth[t]=r.width):this.showContour[t]=!1,r.highlight&&(u.dynamicColor[t]=g(r.highlightcolor),u.dynamicWidth[t]=r.highlightwidth));k(m)&&(u.vertexColor=!0);u.objectOffset=[a._objectOffset[0],a._objectOffset[1],a._objectOffset[2]];u.coords=f;h.update(u);h.visible=a.visible;h.enableDynamic=n;h.enableHighlight=n;h.snapToData=!0;"lighting"in a&&(h.ambientLight=
a.lighting.ambient,h.diffuseLight=a.lighting.diffuse,h.specularLight=a.lighting.specular,h.roughness=a.lighting.roughness,h.fresnel=a.lighting.fresnel);"lightposition"in a&&(h.lightPosition=[a.lightposition.x,a.lightposition.y,a.lightposition.z]);l&&1>l&&(h.supportsTransparency=!0)};a.dispose=function(){this.scene.glplot.remove(this.surface);this.surface.dispose()};p.exports=function(a,b){var c=f({gl:a.glplot.gl}),d=new m(a,c,b.uid);c._trace=d;d.update(b);a.glplot.add(c);return d}},{"../../lib":700,
"../../lib/gl_format_color":697,"../../lib/str2rgbarray":723,"../heatmap/find_empties":954,"../heatmap/interp2d":957,"gl-surface3d":312,ndarray:442,"ndarray-fill":432,"ndarray-homography":434}],1151:[function(a,p,l){function m(a,e,f){e in a&&!(f in a)&&(a[f]=a[e])}var k=a("../../registry"),h=a("../../lib"),e=a("../../components/colorscale/defaults"),f=a("./attributes");p.exports=function(a,l,p,q){function b(b,c){return h.coerce(a,l,f,b,c)}p=b("x");var g=b("y");var c=b("z");if(!c||!c.length||p&&1>
p.length||g&&1>g.length)l.visible=!1;else{l._xlength=Array.isArray(p)&&h.isArrayOrTypedArray(p[0])?c.length:c[0].length;l._ylength=c.length;l._objectOffset=[0,0,0];k.getComponentMethod("calendars","handleTraceDefaults")(a,l,["x","y","z"],q);b("text");b("hovertext");b("hovertemplate");"lighting.ambient lighting.diffuse lighting.specular lighting.roughness lighting.fresnel lightposition.x lightposition.y lightposition.z hidesurface connectgaps opacity".split(" ").forEach(function(a){b(a)});c=b("surfacecolor");
var n=["x","y","z"];for(p=0;3>p;++p){var r="contours."+n[p],u=b(r+".show"),w=b(r+".highlight");if(u||w)for(g=0;3>g;++g)b(r+".project."+n[g]);u&&(b(r+".color"),b(r+".width"),b(r+".usecolormap"));w&&(b(r+".highlightcolor"),b(r+".highlightwidth"))}c||(m(a,"zmin","cmin"),m(a,"zmax","cmax"),m(a,"zauto","cauto"));e(a,l,q,b,{prefix:"",cLetter:"c"});l._length=null}}},{"../../components/colorscale/defaults":587,"../../lib":700,"../../registry":829,"./attributes":1148}],1152:[function(a,p,l){l={};l.attributes=
a("./attributes");l.supplyDefaults=a("./defaults");l.colorbar={min:"cmin",max:"cmax"};l.calc=a("./calc");l.plot=a("./convert");l.moduleType="trace";l.name="surface";l.basePlotModule=a("../../plots/gl3d");l.categories=["gl3d","2dMap","noOpacity"];l.meta={};p.exports=l},{"../../plots/gl3d":789,"./attributes":1148,"./calc":1149,"./convert":1150,"./defaults":1151}],1153:[function(a,p,l){l=a("../../components/annotations/attributes");var m=a("../../lib/extend").extendFlat,k=a("../../plot_api/edit_types").overrideAll,
h=a("../../plots/font_attributes");a=a("../../plots/domain").attributes;(p.exports=k({domain:a({name:"table",trace:!0}),columnwidth:{valType:"number",arrayOk:!0,dflt:null},columnorder:{valType:"data_array"},header:{values:{valType:"data_array",dflt:[]},format:{valType:"data_array",dflt:[]},prefix:{valType:"string",arrayOk:!0,dflt:null},suffix:{valType:"string",arrayOk:!0,dflt:null},height:{valType:"number",dflt:28},align:m({},l.align,{arrayOk:!0}),line:{width:{valType:"number",arrayOk:!0,dflt:1},
color:{valType:"color",arrayOk:!0,dflt:"grey"}},fill:{color:{valType:"color",arrayOk:!0,dflt:"white"}},font:m({},h({arrayOk:!0}))},cells:{values:{valType:"data_array",dflt:[]},format:{valType:"data_array",dflt:[]},prefix:{valType:"string",arrayOk:!0,dflt:null},suffix:{valType:"string",arrayOk:!0,dflt:null},height:{valType:"number",dflt:20},align:m({},l.align,{arrayOk:!0}),line:{width:{valType:"number",arrayOk:!0,dflt:1},color:{valType:"color",arrayOk:!0,dflt:"grey"}},fill:{color:{valType:"color",
arrayOk:!0,dflt:"white"}},font:m({},h({arrayOk:!0}))}},"calc","from-root")).transforms=void 0},{"../../components/annotations/attributes":560,"../../lib/extend":690,"../../plot_api/edit_types":731,"../../plots/domain":773,"../../plots/font_attributes":774}],1154:[function(a,p,l){var m=a("../../plots/get_data").getModuleCalcData,k=a("./plot");l.name="table";l.plot=function(a){var e=m(a.calcdata,"table")[0];e.length&&k(a,e)};l.clean=function(a,e,f,b){a=b._has&&b._has("table");e=e._has&&e._has("table");
a&&!e&&b._paperdiv.selectAll(".table").remove()}},{"../../plots/get_data":784,"./plot":1161}],1155:[function(a,p,l){var m=a("../../lib/gup").wrap;p.exports=function(){return m({})}},{"../../lib/gup":698}],1156:[function(a,p,l){p.exports={cellPad:8,columnExtentOffset:10,columnTitleOffset:28,emptyHeaderHeight:16,latexCheck:/^\$.*\$$/,goldenRatio:1.618,lineBreaker:"\x3cbr\x3e",maxDimensionCount:60,overdrag:45,releaseTransitionDuration:120,releaseTransitionEase:"cubic-out",scrollbarCaptureWidth:18,scrollbarHideDelay:1E3,
scrollbarHideDuration:1E3,scrollbarOffset:5,scrollbarWidth:8,transitionDuration:100,transitionEase:"cubic-out",uplift:5,wrapSpacer:" ",wrapSplitCharacter:" ",cn:{table:"table",tableControlView:"table-control-view",scrollBackground:"scroll-background",yColumn:"y-column",columnBlock:"column-block",scrollAreaClip:"scroll-area-clip",scrollAreaClipRect:"scroll-area-clip-rect",columnBoundary:"column-boundary",columnBoundaryClippath:"column-boundary-clippath",columnBoundaryRect:"column-boundary-rect",columnCells:"column-cells",
columnCell:"column-cell",cellRect:"cell-rect",cellText:"cell-text",cellTextHolder:"cell-text-holder",scrollbarKit:"scrollbar-kit",scrollbar:"scrollbar",scrollbarSlider:"scrollbar-slider",scrollbarGlyph:"scrollbar-glyph",scrollbarCaptureZone:"scrollbar-capture-zone"}}},{}],1157:[function(a,p,l){function m(a){if(Array.isArray(a)){for(var b=0,c=0;c<a.length;c++)b=Math.max(b,m(a[c]));return b}return a}function k(a,b){return a+b}function h(a){a=a.slice();var b=Infinity,c=0,d;for(d=0;d<a.length;d++)Array.isArray(a[d])||
(a[d]=[a[d]]),b=Math.min(b,a[d].length),c=Math.max(c,a[d].length);if(b!==c)for(d=0;d<a.length;d++)(b=c-a[d].length)&&(a[d]=a[d].concat(e(b)));return a}function e(a){for(var b=Array(a),c=0;c<a;c++)b[c]="";return b}function f(a){return a.calcdata.columns.reduce(function(b,c){return c.xIndex<a.xIndex?b+c.columnWidth:b},0)}function b(a,b){return Object.keys(a).map(function(c){return d({},a[c],{auxiliaryBlocks:b})})}function n(a,b){for(var c={},d,e=0,f=0,g=q(),h=0,k=0,l=0;l<a.length;l++)if(d=a[l],g.rows.push({rowIndex:l,
rowHeight:d}),f+=d,f>=b||l===a.length-1)c[e]=g,g.key=k++,g.firstRowIndex=h,g.lastRowIndex=l,g=q(),e+=f,h=l+1,f=0;return c}function q(){return{firstRowIndex:null,lastRowIndex:null,rows:[]}}var r=a("./constants"),d=a("../../lib/extend").extendFlat,g=a("fast-isnumeric");p.exports=function(a,l){var c=h(l.cells.values),p=function(a){return a.slice(l.header.values.length,a.length)},q=h(l.header.values);q.length&&!q[0].length&&(q[0]=[""],q=h(q));var u=q.concat(p(c).map(function(){return e((q[0]||[""]).length)})),
v=l.domain,w=Math.floor(a._fullLayout._size.w*(v.x[1]-v.x[0])),x=Math.floor(a._fullLayout._size.h*(v.y[1]-v.y[0])),z=l.header.values.length?u[0].map(function(){return l.header.height}):[r.emptyHeaderHeight],F=c.length?c[0].map(function(){return l.cells.height}):[],E=z.reduce(k,0);F=n(F,x-E+r.uplift);z=n(z,E);z=b(z,[]);F=b(F,z);var H={},K=l._fullInput.columnorder.concat(p(c.map(function(a,b){return b}))),O=u.map(function(a,b){a=Array.isArray(l.columnwidth)?l.columnwidth[Math.min(b,l.columnwidth.length-
1)]:l.columnwidth;return g(a)?Number(a):1}),I=O.reduce(k,0);O=O.map(function(a){return a/I*w});p=Math.max(m(l.header.line.width),m(l.cells.line.width));var Q={key:l.uid+a._context.staticPlot,translateX:v.x[0]*a._fullLayout._size.w,translateY:a._fullLayout._size.h*(1-v.y[1]),size:a._fullLayout._size,width:w,maxLineWidth:p,height:x,columnOrder:K,groupHeight:x,rowBlocks:F,headerRowBlocks:z,scrollY:0,cells:d({},l.cells,{values:c}),headerCells:d({},l.header,{values:u}),gdColumns:u.map(function(a){return a[0]}),
gdColumnsOriginalOrder:u.map(function(a){return a[0]}),prevPages:[0,0],scrollbarState:{scrollbarScrollInProgress:!1},columns:u.map(function(a,b){H[a]=(H[a]||0)+1;return{key:a+"__"+H[a],label:a,specIndex:b,xIndex:K[b],xScale:f,x:void 0,calcdata:void 0,columnWidth:O[b]}})};Q.columns.forEach(function(a){a.calcdata=Q;a.x=f(a)});return Q}},{"../../lib/extend":690,"./constants":1156,"fast-isnumeric":221}],1158:[function(a,p,l){function m(a){var e=(a=a.rowBlocks[a.page])?a.rows[0].rowIndex:0;return[e,a?
e+a.rows.length:0]}var k=a("../../lib/extend").extendFlat;l.splitToPanels=function(a){var e=[0,0],f=k({},a,{key:"header",type:"header",page:0,prevPages:e,currentRepaint:[null,null],dragHandle:!0,values:a.calcdata.headerCells.values[a.specIndex],rowBlocks:a.calcdata.headerRowBlocks,calcdata:k({},a.calcdata,{cells:a.calcdata.headerCells})}),b=k({},a,{key:"cells1",type:"cells",page:0,prevPages:e,currentRepaint:[null,null],dragHandle:!1,values:a.calcdata.cells.values[a.specIndex],rowBlocks:a.calcdata.rowBlocks});
a=k({},a,{key:"cells2",type:"cells",page:1,prevPages:e,currentRepaint:[null,null],dragHandle:!1,values:a.calcdata.cells.values[a.specIndex],rowBlocks:a.calcdata.rowBlocks});return[b,a,f]};l.splitToCells=function(a){var e=m(a);return(a.values||[]).slice(e[0],e[1]).map(function(f,b){var h="string"===typeof f&&f.match(/[<$&> ]/)?"_keybuster_"+Math.random():"";return{keyWithinBlock:b+h,key:e[0]+b,column:a,calcdata:a.calcdata,page:a.page,rowBlocks:a.rowBlocks,value:f}})}},{"../../lib/extend":690}],1159:[function(a,
p,l){function m(a,b){var e=a.header.values.length;a=(a.columnorder||[]).slice(0,e);var f=a.slice().sort(function(a,b){return a-b});a=a.map(function(a){return f.indexOf(a)});for(var h=a.length;h<e;h++)a.push(h);b("columnorder",a)}var k=a("../../lib"),h=a("./attributes"),e=a("../../plots/domain").defaults;p.exports=function(a,b,l,p){function f(d,e){return k.coerce(a,b,h,d,e)}e(b,p,f);f("columnwidth");f("header.values");f("header.format");f("header.align");f("header.prefix");f("header.suffix");f("header.height");
f("header.line.width");f("header.line.color");f("header.fill.color");k.coerceFont(f,"header.font",k.extendFlat({},p.font));m(b,f);f("cells.values");f("cells.format");f("cells.align");f("cells.prefix");f("cells.suffix");f("cells.height");f("cells.line.width");f("cells.line.color");f("cells.fill.color");k.coerceFont(f,"cells.font",k.extendFlat({},p.font));b._length=null}},{"../../lib":700,"../../plots/domain":773,"./attributes":1153}],1160:[function(a,p,l){l={};l.attributes=a("./attributes");l.supplyDefaults=
a("./defaults");l.calc=a("./calc");l.plot=a("./plot");l.moduleType="trace";l.name="table";l.basePlotModule=a("./base_plot");l.categories=["noOpacity"];l.meta={};p.exports=l},{"./attributes":1153,"./base_plot":1154,"./calc":1155,"./defaults":1159,"./plot":1161}],1161:[function(a,p,l){function m(a){return Math.ceil(a.calcdata.maxLineWidth/2)}function k(a,b){return"clip"+a._fullLayout._uid+"_columnBoundaryClippath_"+b.calcdata.key+"_"+b.specIndex}function h(a){return[].concat.apply([],a.map(function(a){return a})).map(function(a){return a.__data__})}
function e(a,b,c){var d=a.selectAll("."+L.cn.scrollbarKit).data(ca.repeat,ca.keyFun);d.enter().append("g").classed(L.cn.scrollbarKit,!0).style("shape-rendering","geometricPrecision");d.each(function(a){var b=a.scrollbarState;var c=a.rowBlocks;c=Q(c,c.length-1)+(c.length?N(c[c.length-1],Infinity):1);b.totalHeight=c;b.scrollableAreaHeight=a.groupHeight-A(a);b.currentlyVisibleHeight=Math.min(b.totalHeight,b.scrollableAreaHeight);b.ratio=b.currentlyVisibleHeight/b.totalHeight;b.barLength=Math.max(b.ratio*
b.currentlyVisibleHeight,L.goldenRatio*L.scrollbarWidth);b.barWiggleRoom=b.currentlyVisibleHeight-b.barLength;b.wiggleRoom=Math.max(0,b.totalHeight-b.scrollableAreaHeight);b.topY=0===b.barWiggleRoom?0:a.scrollY/b.wiggleRoom*b.barWiggleRoom;b.bottomY=b.topY+b.barLength;b.dragMultiplier=b.wiggleRoom/b.barWiggleRoom}).attr("transform",function(a){return"translate("+(a.width+L.scrollbarWidth/2+L.scrollbarOffset)+" "+A(a)+")"});d=d.selectAll("."+L.cn.scrollbar).data(ca.repeat,ca.keyFun);d.enter().append("g").classed(L.cn.scrollbar,
!0);var e=d.selectAll("."+L.cn.scrollbarSlider).data(ca.repeat,ca.keyFun);e.enter().append("g").classed(L.cn.scrollbarSlider,!0);e.attr("transform",function(a){return"translate(0 "+(a.scrollbarState.topY||0)+")"});e=e.selectAll("."+L.cn.scrollbarGlyph).data(ca.repeat,ca.keyFun);e.enter().append("line").classed(L.cn.scrollbarGlyph,!0).attr("stroke","black").attr("stroke-width",L.scrollbarWidth).attr("stroke-linecap","round").attr("y1",L.scrollbarWidth/2);e.attr("y2",function(a){return a.scrollbarState.barLength-
L.scrollbarWidth/2}).attr("stroke-opacity",function(a){return a.columnDragInProgress||!a.scrollbarState.barWiggleRoom||c?0:.4});e.transition().delay(0).duration(0);e.transition().delay(L.scrollbarHideDelay).duration(L.scrollbarHideDuration).attr("stroke-opacity",0);d=d.selectAll("."+L.cn.scrollbarCaptureZone).data(ca.repeat,ca.keyFun);d.enter().append("line").classed(L.cn.scrollbarCaptureZone,!0).attr("stroke","white").attr("stroke-opacity",.01).attr("stroke-width",L.scrollbarCaptureWidth).attr("stroke-linecap",
"butt").attr("y1",0).on("mousedown",function(c){var d=R.event.y,e=this.getBoundingClientRect(),f=c.scrollbarState;d-=e.top;e=R.scale.linear().domain([0,f.scrollableAreaHeight]).range([0,f.totalHeight]).clamp(!0);f.topY<=d&&d<=f.bottomY||J(b,a,null,e(d-f.barLength/2))(c)}).call(R.behavior.drag().origin(function(a){R.event.stopPropagation();a.scrollbarState.scrollbarScrollInProgress=!0;return a}).on("drag",J(b,a)).on("dragend",function(){}));d.attr("y2",function(a){return a.scrollbarState.scrollableAreaHeight});
b._context.staticPlot&&(e.remove(),d.remove())}function f(a,e,f,h){f=f.selectAll("."+L.cn.columnCells).data(ca.repeat,ca.keyFun);f.enter().append("g").classed(L.cn.columnCells,!0);f.exit().remove();f=b(f);d(f);var k=n(f);c(k);k=r(f);k=q(k);g(k);v(k,e,h,a);I(f)}function b(a){a=a.selectAll("."+L.cn.columnCell).data(W.splitToCells,function(a){return a.keyWithinBlock});a.enter().append("g").classed(L.cn.columnCell,!0);a.exit().remove();return a}function n(a){a=a.selectAll("."+L.cn.cellRect).data(ca.repeat,
function(a){return a.keyWithinBlock});a.enter().append("rect").classed(L.cn.cellRect,!0);return a}function q(a){a=a.selectAll("."+L.cn.cellText).data(ca.repeat,function(a){return a.keyWithinBlock});a.enter().append("text").classed(L.cn.cellText,!0).style("cursor",function(){return"auto"}).on("mousedown",function(){R.event.stopPropagation()});return a}function r(a){a=a.selectAll("."+L.cn.cellTextHolder).data(ca.repeat,function(a){return a.keyWithinBlock});a.enter().append("g").classed(L.cn.cellTextHolder,
!0).style("shape-rendering","geometricPrecision");return a}function d(a){a.each(function(a,b){var c=a.calcdata.cells.font,d=a.column.specIndex;c={size:w(c.size,d,b),color:w(c.color,d,b),family:w(c.family,d,b)};a.rowNumber=a.key;a.align=w(a.calcdata.cells.align,d,b);a.cellBorderWidth=w(a.calcdata.cells.line.width,d,b);a.font=c})}function g(a){a.each(function(a){U.font(R.select(this),a.font)})}function c(a){a.attr("width",function(a){return a.column.columnWidth}).attr("stroke-width",function(a){return a.cellBorderWidth}).each(function(a){var b=
R.select(this);fa.stroke(b,w(a.calcdata.cells.line.color,a.column.specIndex,a.rowNumber));fa.fill(b,w(a.calcdata.cells.fill.color,a.column.specIndex,a.rowNumber))})}function v(a,b,c,d){a.text(function(a){var b=a.column.specIndex,c=a.rowNumber,d=a.value,e="string"===typeof d,f=e&&d.match(/<br>/i),g=!e||f;a.mayHaveMarkup=e&&d.match(/[<&>]/);d="string"===typeof d&&d.match(L.latexCheck);e=(a.latex=d)?"":w(a.calcdata.cells.prefix,b,c)||"";var h=d?"":w(a.calcdata.cells.suffix,b,c)||"";b=d?null:w(a.calcdata.cells.format,
b,c)||null;b=e+(b?R.format(b)(a.value):a.value)+h;var k;a.wrappingNeeded=!a.wrapped&&!g&&!d&&(k=-1!==b.indexOf(L.wrapSplitCharacter));a.cellHeightMayIncrease=f||d||a.mayHaveMarkup||(void 0===k?-1!==b.indexOf(L.wrapSplitCharacter):k);a.needsConvertToTspans=a.mayHaveMarkup||a.wrappingNeeded||a.latex;a.wrappingNeeded?(f=(" "===L.wrapSplitCharacter?b.replace(/<a href=/ig,"\x3ca_href\x3d"):b).split(L.wrapSplitCharacter),f=" "===L.wrapSplitCharacter?f.map(function(a){return a.replace(/<a_href=/ig,"\x3ca href\x3d")}):
f,a.fragments=f.map(function(a){return{text:a,width:null}}),a.fragments.push({fragment:L.wrapSpacer,width:null}),a=f.join(L.lineBreaker)+L.lineBreaker+L.wrapSpacer):(delete a.fragments,a=b);return a}).attr("dy",function(a){return a.needsConvertToTspans?0:"0.75em"}).each(function(a){var e=R.select(this),f=a.wrappingNeeded?H:K;a.needsConvertToTspans?T.convertToTspans(e,d,f(c,this,b,d,a)):R.select(this.parentNode).attr("transform",function(a){return"translate("+O(a)+" "+L.cellPad+")"}).attr("text-anchor",
function(a){return{left:"start",center:"middle",right:"end"}[a.align]})})}function t(a,b,c){var d=b.gdColumnsOriginalOrder;b.gdColumns.sort(function(a,b){return c[d.indexOf(a)]-c[d.indexOf(b)]});b.columnorder=c;a.emit("plotly_restyle")}function w(a,b,c){return Array.isArray(a)?(a=a[Math.min(b,a.length-1)],Array.isArray(a)?a[Math.min(c,a.length-1)]:a):a}function x(a,b,c){a.transition().ease(L.releaseTransitionEase).duration(L.releaseTransitionDuration).attr("transform","translate("+b.x+" "+c+")")}
function z(a){return"cells"===a.type}function G(a){return"header"===a.type}function A(a){return(a.rowBlocks.length?a.rowBlocks[0].auxiliaryBlocks:[]).reduce(function(a,b){return a+N(b,Infinity)},0)}function C(a,b,c){for(var d=[],e=0,f=0;f<a.length;f++){for(var g=a[f],h=g.rows,k=0,l=0;l<h.length;l++)k+=h[l].rowHeight;g.allRowsHeight=k;g=b;h=g+c;g<e+k&&h>e&&d.push(f);e+=k}return d}function F(a,b,c){var d=h(b)[0];if(void 0!==d){var f=d.rowBlocks,g=d.calcdata,k=Q(f,f.length),l=d.calcdata.groupHeight-
A(d),m=g.scrollY=Math.max(0,Math.min(k-l,g.scrollY)),n=C(f,m,l);1===n.length&&(n[0]===f.length-1?n.unshift(n[0]-1):n.push(n[0]+1));n[0]%2&&n.reverse();b.each(function(a,b){a.page=n[b];a.scrollY=m});b.attr("transform",function(a){return"translate(0 "+(Q(a.rowBlocks,a.page)-a.scrollY)+")"});a&&(E(a,c,b,n,d.prevPages,d,0),E(a,c,b,n,d.prevPages,d,1),e(c,a))}}function J(a,b,c,d){return function(e){var f=e.calcdata?e.calcdata:e;e=b.filter(function(a){return f.key===a.key});var g=c||f.scrollbarState.dragMultiplier,
h=f.scrollY;f.scrollY=void 0===d?f.scrollY+g*R.event.dy:d;g=e.selectAll("."+L.cn.yColumn).selectAll("."+L.cn.columnBlock).filter(z);F(a,g,e);return f.scrollY===h}}function E(a,b,c,d,e,g,h){d[h]!==e[h]&&(clearTimeout(g.currentRepaint[h]),g.currentRepaint[h]=setTimeout(function(){var g=c.filter(function(a,b){return b===h&&d[b]!==e[b]});f(a,b,g,c);e[h]=d[h]}))}function H(a,b,c,d){return function(){var e=R.select(b.parentNode);e.each(function(a){var b=a.fragments;e.selectAll("tspan.line").each(function(a,
c){b[c].width=this.getComputedTextLength()});var c=b[b.length-1].width,d=b.slice(0,-1),f=[],g=0,h=a.column.columnWidth-2*L.cellPad;for(a.value="";d.length;){var k=d.shift();var l=k.width+c;g+l>h&&(a.value+=f.join(L.wrapSpacer)+L.lineBreaker,f=[],g=0);f.push(k.text);g+=l}g&&(a.value+=f.join(L.wrapSpacer));a.wrapped=!0});e.selectAll("tspan.line").remove();v(e.select("."+L.cn.cellText),c,a,d);R.select(b.parentNode.parentNode).call(I)}}function K(a,b,c,d,f){return function(){if(!f.settledY){var g=R.select(b.parentNode),
h=f.rowBlocks[f.page],k=f.key-h.firstRowIndex,l=h.rows[k].rowHeight,m=f.cellHeightMayIncrease?b.parentNode.getBoundingClientRect().height+2*L.cellPad:l;l=Math.max(m,l);l-h.rows[k].rowHeight&&(h.rows[k].rowHeight=l,a.selectAll("."+L.cn.columnCell).call(I),F(null,a.filter(z),0),e(c,d,!0));g.attr("transform",function(){var a=this.parentNode.getBoundingClientRect(),b=R.select(this.parentNode).select("."+L.cn.cellRect).node().getBoundingClientRect(),c=this.transform.baseVal.consolidate();a=b.top-a.top+
(c?c.matrix.f:L.cellPad);return"translate("+O(f,R.select(this.parentNode).select("."+L.cn.cellTextHolder).node().getBoundingClientRect().width)+" "+a+")"});f.settledY=!0}}}function O(a,b){switch(a.align){case "left":return L.cellPad;case "right":return a.column.columnWidth-(b||0)-L.cellPad;case "center":return(a.column.columnWidth-(b||0))/2;default:return L.cellPad}}function I(a){a.attr("transform",function(a){var b=a.rowBlocks[0].auxiliaryBlocks.reduce(function(a,b){return a+N(b,Infinity)},0);return"translate(0 "+
(N(a.rowBlocks[a.page],a.key)+b)+")"}).selectAll("."+L.cn.cellRect).attr("height",function(a){var b=a.rowBlocks[a.page];return b.rows[a.key-b.firstRowIndex].rowHeight})}function Q(a,b){var c=0;for(--b;0<=b;b--){var d=a[b];var e=d.allRowsHeight;if(void 0!==e)d=e;else{for(var f=e=0;f<d.rows.length;f++)e+=d.rows[f].rowHeight;d=d.allRowsHeight=e}c+=d}return c}function N(a,b){for(var c=0,d=0;d<a.rows.length&&a.rows[d].rowIndex<b;d++)c+=a.rows[d].rowHeight;return c}var L=a("./constants"),R=a("d3"),ca=a("../../lib/gup"),
U=a("../../components/drawing"),T=a("../../lib/svg_text_utils"),Y=a("../../lib").raiseToTop,ia=a("../../lib").cancelTransition,S=a("./data_preparation_helper"),W=a("./data_split_helpers"),fa=a("../../components/color");p.exports=function(a,b){var c=!a._context.staticPlot;b=a._fullLayout._paper.selectAll("."+L.cn.table).data(b.map(function(b){b=ca.unwrap(b).trace;return S(a,b)}),ca.keyFun);b.exit().remove();b.enter().append("g").classed(L.cn.table,!0).attr("overflow","visible").style("box-sizing",
"content-box").style("position","absolute").style("left",0).style("overflow","visible").style("shape-rendering","crispEdges").style("pointer-events","all");b.attr("width",function(a){return a.width+a.size.l+a.size.r}).attr("height",function(a){return a.height+a.size.t+a.size.b}).attr("transform",function(a){return"translate("+a.translateX+","+a.translateY+")"});var d=b.selectAll("."+L.cn.tableControlView).data(ca.repeat,ca.keyFun);b=d.enter().append("g").classed(L.cn.tableControlView,!0).style("box-sizing",
"content-box");c&&b.on("mousemove",function(b){d.filter(function(a){return b===a}).call(e,a)}).on("mousewheel",function(b){b.scrollbarState.wheeling||(b.scrollbarState.wheeling=!0,J(a,d,null,b.scrollY+R.event.deltaY)(b)||(R.event.stopPropagation(),R.event.preventDefault()),b.scrollbarState.wheeling=!1)}).call(e,a,!0);d.attr("transform",function(a){return"translate("+a.size.l+" "+a.size.t+")"});b=d.selectAll("."+L.cn.scrollBackground).data(ca.repeat,ca.keyFun);b.enter().append("rect").classed(L.cn.scrollBackground,
!0).attr("fill","none");b.attr("width",function(a){return a.width}).attr("height",function(a){return a.height});d.each(function(b){U.setClipUrl(R.select(this),"clip"+a._fullLayout._uid+"_scrollAreaBottomClip_"+b.key,a)});var g=d.selectAll("."+L.cn.yColumn).data(function(a){return a.columns},ca.keyFun);g.enter().append("g").classed(L.cn.yColumn,!0);g.exit().remove();g.attr("transform",function(a){return"translate("+a.x+" 0)"});c&&g.call(R.behavior.drag().origin(function(b){var c=R.select(this);x(c,
b,-L.uplift);Y(this);b.calcdata.columnDragInProgress=!0;e(d.filter(function(a){return b.calcdata.key===a.key}),a);return b}).on("drag",function(a){var b=R.select(this);a.x=Math.max(-L.overdrag,Math.min(a.calcdata.width+L.overdrag-a.columnWidth,R.event.x));h(g).filter(function(b){return b.calcdata.key===a.calcdata.key}).sort(function(b,c){return(a===b?R.event.x:b.x)+b.columnWidth/2-((a===c?R.event.x:c.x)+c.columnWidth/2)}).forEach(function(b,c){b.xIndex=c;b.x=a===b?b.x:b.xScale(b)});g.filter(function(b){return a!==
b}).transition().ease(L.transitionEase).duration(L.transitionDuration).attr("transform",function(a){return"translate("+a.x+" 0)"});b.call(ia).attr("transform","translate("+a.x+" -"+L.uplift+" )")}).on("dragend",function(b){var c=R.select(this),d=b.calcdata;b.x=b.xScale(b);b.calcdata.columnDragInProgress=!1;x(c,b,0);t(a,d,d.columns.map(function(a){return a.xIndex}))}));g.each(function(b){U.setClipUrl(R.select(this),k(a,b),a)});var l=g.selectAll("."+L.cn.columnBlock).data(W.splitToPanels,ca.keyFun);
l.enter().append("g").classed(L.cn.columnBlock,!0).attr("id",function(a){return a.key});l.style("cursor",function(a){return a.dragHandle?"ew-resize":a.calcdata.scrollbarState.barWiggleRoom?"ns-resize":"default"});var n=l.filter(G);b=l.filter(z);c&&b.call(R.behavior.drag().origin(function(a){R.event.stopPropagation();return a}).on("drag",J(a,d,-1)).on("dragend",function(){}));f(a,d,n,l);f(a,d,b,l);c=d.selectAll("."+L.cn.scrollAreaClip).data(ca.repeat,ca.keyFun);c.enter().append("clipPath").classed(L.cn.scrollAreaClip,
!0).attr("id",function(b){return"clip"+a._fullLayout._uid+"_scrollAreaBottomClip_"+b.key});c=c.selectAll("."+L.cn.scrollAreaClipRect).data(ca.repeat,ca.keyFun);c.enter().append("rect").classed(L.cn.scrollAreaClipRect,!0).attr("x",-L.overdrag).attr("y",-L.uplift).attr("fill","none");c.attr("width",function(a){return a.width+2*L.overdrag}).attr("height",function(a){return a.height+L.uplift});g.selectAll("."+L.cn.columnBoundary).data(ca.repeat,ca.keyFun).enter().append("g").classed(L.cn.columnBoundary,
!0);c=g.selectAll("."+L.cn.columnBoundaryClippath).data(ca.repeat,ca.keyFun);c.enter().append("clipPath").classed(L.cn.columnBoundaryClippath,!0);c.attr("id",function(b){return k(a,b)});c=c.selectAll("."+L.cn.columnBoundaryRect).data(ca.repeat,ca.keyFun);c.enter().append("rect").classed(L.cn.columnBoundaryRect,!0).attr("fill","none");c.attr("width",function(a){return a.columnWidth+2*m(a)}).attr("height",function(a){return a.calcdata.height+2*m(a)+L.uplift}).attr("x",function(a){return-m(a)}).attr("y",
function(a){return-m(a)});F(null,b,d)}},{"../../components/color":577,"../../components/drawing":598,"../../lib":700,"../../lib/gup":698,"../../lib/svg_text_utils":724,"./constants":1156,"./data_preparation_helper":1157,"./data_split_helpers":1158,d3:154}],1162:[function(a,p,l){l=a("../box/attributes");a=a("../../lib/extend").extendFlat;p.exports={y:l.y,x:l.x,x0:l.x0,y0:l.y0,name:a({},l.name,{}),orientation:a({},l.orientation,{}),bandwidth:{valType:"number",min:0,editType:"calc"},scalegroup:{valType:"string",
dflt:"",editType:"calc"},scalemode:{valType:"enumerated",values:["width","count"],dflt:"width",editType:"calc"},spanmode:{valType:"enumerated",values:["soft","hard","manual"],dflt:"soft",editType:"calc"},span:{valType:"info_array",items:[{valType:"any",editType:"calc"},{valType:"any",editType:"calc"}],editType:"calc"},line:{color:{valType:"color",editType:"style"},width:{valType:"number",min:0,dflt:2,editType:"style"},editType:"plot"},fillcolor:l.fillcolor,points:a({},l.boxpoints,{}),jitter:a({},
l.jitter,{}),pointpos:a({},l.pointpos,{}),width:a({},l.width,{}),marker:l.marker,text:l.text,hovertext:l.hovertext,hovertemplate:l.hovertemplate,box:{visible:{valType:"boolean",dflt:!1,editType:"plot"},width:{valType:"number",min:0,max:1,dflt:.25,editType:"plot"},fillcolor:{valType:"color",editType:"style"},line:{color:{valType:"color",editType:"style"},width:{valType:"number",min:0,editType:"style"},editType:"style"},editType:"plot"},meanline:{visible:{valType:"boolean",dflt:!1,editType:"plot"},
color:{valType:"color",editType:"style"},width:{valType:"number",min:0,editType:"style"},editType:"plot"},side:{valType:"enumerated",values:["both","positive","negative"],dflt:"both",editType:"calc"},offsetgroup:l.offsetgroup,alignmentgroup:l.alignmentgroup,selected:l.selected,unselected:l.unselected,hoveron:{valType:"flaglist",flags:["violins","points","kde"],dflt:"violins+points+kde",extras:["all"],editType:"style"}}},{"../../lib/extend":690,"../box/attributes":862}],1163:[function(a,p,l){function m(a,
e,f,d){function g(c){var d=k[c];d="multicategory"===f.type?f.r2c(d):f.d2c(d,0,a[e.valLetter+"calendar"]);return d===b?m[c]:d}var c=a.spanmode,k=a.span||[],l=[e.min,e.max],m=[e.min-2*d,e.max+2*d];d="soft"===c?m:"hard"===c?l:[g(0),g(1)];c={type:"linear",range:d};h.setConvert(c);c.cleanRange();return d}var k=a("../../lib"),h=a("../../plots/cartesian/axes"),e=a("../box/calc"),f=a("./helpers"),b=a("../../constants/numerical").BADNUM;p.exports=function(a,b){var l=e(a,b);if(l[0].t.empty)return l;for(var d=
a._fullLayout,g=h.getFromId(a,b["h"===b.orientation?"xaxis":"yaxis"]),c=Infinity,n=-Infinity,p=0,q=0,u=0;u<l.length;u++){var w=l[u],x=w.pts.map(f.extractVal),A=w;var z=w;var F=z.max-z.min;if(F)if(b.bandwidth)z=Math.max(b.bandwidth,F/1E4);else{var J=x.length,E=k.stdev(x,J-1,z.mean);z=Math.max(1.059*Math.min(E,(z.q3-z.q1)/1.349)*Math.pow(J,-.2),F/100)}else z=b.bandwidth?b.bandwidth:0;F=A.bandwidth=z;A=w.span=m(b,w,g,F);if(w.min===w.max&&0===F)A=w.span=[w.min,w.max],w.density=[{v:1,t:A[0]}],w.bandwidth=
F,p=Math.max(p,1);else{z=A[1]-A[0];J=Math.ceil(z/(F/3));z/=J;if(!isFinite(z)||!isFinite(J))return k.error("Something went wrong with computing the violin span"),l[0].t.empty=!0,l;F=f.makeKDE(w,b,x);w.density=Array(J);J=0;for(E=A[0];E<A[1]+z/2;J++,E+=z){var H=F(E);w.density[J]={v:H,t:E};p=Math.max(p,H)}}q=Math.max(q,x.length);c=Math.min(c,A[0]);n=Math.max(n,A[1])}c=h.findExtremes(g,[c,n],{padded:!0});b._extremes[g._id]=c;b.width?l[0].t.maxKDE=p:(d=d._violinScaleGroupStats,b=b.scalegroup,(g=d[b])?(g.maxKDE=
Math.max(g.maxKDE,p),g.maxCount=Math.max(g.maxCount,q)):d[b]={maxKDE:p,maxCount:q});l[0].t.labels.kde=k._(a,"kde:");return l}},{"../../constants/numerical":677,"../../lib":700,"../../plots/cartesian/axes":748,"../box/calc":863,"./helpers":1166}],1164:[function(a,p,l){var m=a("../box/cross_trace_calc").setPositionOffset,k=["v","h"];p.exports=function(a,e){var f=a.calcdata,b=e.xaxis;e=e.yaxis;for(var h=0;h<k.length;h++){for(var l=k[h],p="h"===l?e:b,d=[],g=0;g<f.length;g++){var c=f[g],q=c[0].t;c=c[0].trace;
!0!==c.visible||"violin"!==c.type||q.empty||c.orientation!==l||c.xaxis!==b._id||c.yaxis!==e._id||d.push(g)}m("violin",a,d,p)}}},{"../box/cross_trace_calc":864}],1165:[function(a,p,l){var m=a("../../lib"),k=a("../../components/color"),h=a("../box/defaults"),e=a("./attributes");p.exports=function(a,b,l,p){function f(c,d){return m.coerce(a,b,e,c,d)}function d(c,d){return m.coerce2(a,b,e,c,d)}h.handleSampleDefaults(a,b,f,p);if(!1!==b.visible){f("bandwidth");f("side");f("width")||(f("scalegroup",b.name),
f("scalemode"));p=f("span");var g;Array.isArray(p)&&(g="manual");f("spanmode",g);g=f("line.color",(a.marker||{}).color||l);l=f("line.width");var c=f("fillcolor",k.addOpacity(b.line.color,.5));h.handlePointsDefaults(a,b,f,{prefix:""});p=d("box.width");c=d("box.fillcolor",c);var n=d("box.line.color",g),q=d("box.line.width",l);f("box.visible",!!(p||c||n||q))||(b.box={visible:!1});g=d("meanline.color",g);l=d("meanline.width",l);f("meanline.visible",!(!g&&!l))||(b.meanline={visible:!1})}}},{"../../components/color":577,
"../../lib":700,"../box/defaults":865,"./attributes":1162}],1166:[function(a,p,l){var m=a("../../lib");l.makeKDE=function(a,h,e){var f=e.length,b=a.bandwidth,k=1/(f*b);return function(a){for(var h=0,d=0;d<f;d++){var g=(a-e[d])/b;h+=1/Math.sqrt(2*Math.PI)*Math.exp(-.5*g*g)}return k*h}};l.getPositionOnKdePath=function(a,h,e){if("h"===h.orientation){var f="y";var b="x"}else f="x",b="y";e=m.findPointOnPath(a.path,e,b,{pathLength:a.pathLength});a=a.posCenterPx;f=e[f];return[f,"both"===h.side?2*a-f:a]};
l.getKdeValue=function(a,h,e){var f=a.pts.map(l.extractVal);return l.makeKDE(a,h,f)(e)/a.posDensityScale};l.extractVal=function(a){return a.v}},{"../../lib":700}],1167:[function(a,p,l){var m=a("../../lib"),k=a("../../plots/cartesian/axes"),h=a("../box/hover"),e=a("./helpers");p.exports=function(a,b,l,p,q){var d=a.cd,f=d[0].trace,c=f.hoveron,n=-1!==c.indexOf("violins"),r=-1!==c.indexOf("kde"),u=[],w;if(n||r){var x=h.hoverOnBoxes(a,b,l,p);n&&(u=u.concat(x));if(r&&0<x.length){var z=a.xa,A=a.ya;if("h"===
f.orientation){var C=b;n="y";var F=A;r="x"}else C=l,n="x",F=z,r="y",z=A;var J=d[a.index];if(C>=J.span[0]&&C<=J.span[1]){var E=m.extendFlat({},a);A=z.c2p(C,!0);var H=e.getKdeValue(J,f,C);J=e.getPositionOnKdePath(J,f,A);var K=F._offset;F=F._length;E[n+"0"]=J[0];E[n+"1"]=J[1];E[r+"0"]=E[r+"1"]=A;E[r+"Label"]=r+": "+k.hoverLabelText(z,C)+", "+d[0].t.labels.kde+" "+H.toFixed(3);E.spikeDistance=x[0].spikeDistance;d=n+"Spike";E[d]=x[0][d];x[0].spikeDistance=void 0;x[0][d]=void 0;E.hovertemplate=!1;u.push(E);
E={stroke:a.color};E[n+"1"]=m.constrain(K+J[0],K,K+F);E[n+"2"]=m.constrain(K+J[1],K,K+F);E[r+"1"]=E[r+"2"]=z._offset+A}}}-1!==c.indexOf("points")&&(w=h.hoverOnPoints(a,b,l));a=q.selectAll(".violinline-"+f.uid).data(E?[0]:[]);a.enter().append("line").classed("violinline-"+f.uid,!0).attr("stroke-width",1.5);a.exit().remove();a.attr(E);if("closest"===p)return w?[w]:u;w&&u.push(w);return u}},{"../../lib":700,"../../plots/cartesian/axes":748,"../box/hover":867,"./helpers":1166}],1168:[function(a,p,l){p.exports=
{attributes:a("./attributes"),layoutAttributes:a("./layout_attributes"),supplyDefaults:a("./defaults"),crossTraceDefaults:a("../box/defaults").crossTraceDefaults,supplyLayoutDefaults:a("./layout_defaults"),calc:a("./calc"),crossTraceCalc:a("./cross_trace_calc"),plot:a("./plot"),style:a("./style"),styleOnSelect:a("../scatter/style").styleOnSelect,hoverPoints:a("./hover"),selectPoints:a("../box/select"),moduleType:"trace",name:"violin",basePlotModule:a("../../plots/cartesian"),categories:"cartesian svg symbols oriented box-violin showLegend violinLayout zoomScale".split(" "),
meta:{}}},{"../../plots/cartesian":759,"../box/defaults":865,"../box/select":872,"../scatter/style":1074,"./attributes":1162,"./calc":1163,"./cross_trace_calc":1164,"./defaults":1165,"./hover":1167,"./layout_attributes":1169,"./layout_defaults":1170,"./plot":1171,"./style":1172}],1169:[function(a,p,l){l=a("../box/layout_attributes");a=a("../../lib").extendFlat;p.exports={violinmode:a({},l.boxmode,{}),violingap:a({},l.boxgap,{}),violingroupgap:a({},l.boxgroupgap,{})}},{"../../lib":700,"../box/layout_attributes":869}],
1170:[function(a,p,l){var m=a("../../lib"),k=a("./layout_attributes"),h=a("../box/layout_defaults");p.exports=function(a,f,b){h._supply(a,f,b,function(b,e){return m.coerce(a,f,k,b,e)},"violin")}},{"../../lib":700,"../box/layout_defaults":870,"./layout_attributes":1169}],1171:[function(a,p,l){var m=a("d3"),k=a("../../lib"),h=a("../../components/drawing"),e=a("../box/plot"),f=a("../scatter/line_points"),b=a("./helpers");p.exports=function(a,l,p,d){function g(a){a=f(a,{xaxis:n,yaxis:q,connectGaps:!0,
baseTolerance:.75,shape:"spline",simplify:!0});return h.smoothopen(a[0],1)}var c=a._fullLayout,n=l.xaxis,q=l.yaxis;k.makeTraceGroups(d,p,"trace violins").each(function(a){var d=m.select(this);a=a[0];var f=a.t,h=a.trace;l.isRangePlot||(a.node3=d);if(!0!==h.visible||f.empty)d.remove();else{var p=f.bPos,r=f.bdPos,t=l[f.valLetter+"axis"],u=l[f.posLetter+"axis"],v="both"===h.side,w=v||"positive"===h.side,x=v||"negative"===h.side;a=d.selectAll("path.violin").data(k.identity);a.enter().append("path").style("vector-effect",
"non-scaling-stroke").attr("class","violin");a.exit().remove();a.each(function(a){var b=m.select(this),d=a.density,e=d.length,k=a.pos+p,l=u.c2p(k);if(h.width)var n=f.maxKDE/r;else n=c._violinScaleGroupStats[h.scalegroup],n="count"===h.scalemode?n.maxKDE/r*(n.maxCount/a.pts.length):n.maxKDE/r;var q;if(w){var y=Array(e);for(q=0;q<e;q++){var z=y[q]={};z[f.posLetter]=k+d[q].v/n;z[f.valLetter]=d[q].t}var A=g(y)}if(x){y=Array(e);var B=0;for(q=e-1;B<e;B++,q--)z=y[B]={},z[f.posLetter]=k-d[q].v/n,z[f.valLetter]=
d[q].t;B=g(y)}v?A=A+"L"+B.substr(1)+"Z":(k=[l,t.c2p(d[0].t)],d=[l,t.c2p(d[e-1].t)],"h"===h.orientation&&(k.reverse(),d.reverse()),A=w?"M"+k+"L"+A.substr(1)+"L"+d:"M"+d+"L"+B.substr(1)+"L"+k);b.attr("d",A);a.posCenterPx=l;a.posDensityScale=n*r;a.path=b.node();a.pathLength=a.path.getTotalLength()/(v?2:1)});var y=h.box;a=y.width;y=(y.line||{}).width;v?(a*=r,y=0):w?(a=[0,r*a/2],y=-y):a=[r*a/2,0];e.plotBoxAndWhiskers(d,{pos:u,val:t},h,{bPos:p,bdPos:a,bPosPxOffset:y});e.plotBoxMean(d,{pos:u,val:t},h,{bPos:p,
bdPos:a,bPosPxOffset:y});if(!h.box.visible&&h.meanline.visible)var z=k.identity;z=d.selectAll("path.meanline").data(z||[]);z.enter().append("path").attr("class","meanline").style("fill","none").style("vector-effect","non-scaling-stroke");z.exit().remove();z.each(function(a){var c=t.c2p(a.mean,!0);a=b.getPositionOnKdePath(a,h,c);m.select(this).attr("d","h"===h.orientation?"M"+c+","+a[0]+"V"+a[1]:"M"+a[0]+","+c+"H"+a[1])});e.plotPoints(d,{x:n,y:q},h,f)}})}},{"../../components/drawing":598,"../../lib":700,
"../box/plot":871,"../scatter/line_points":1065,"./helpers":1166,d3:154}],1172:[function(a,p,l){var m=a("d3"),k=a("../../components/color"),h=a("../scatter/style").stylePoints;p.exports=function(a,f){f=f?f[0].node3:m.select(a).selectAll("g.trace.violins");f.style("opacity",function(a){return a[0].trace.opacity});f.each(function(b){b=b[0].trace;var e=m.select(this),f=b.box||{},l=f.line||{},d=b.meanline||{},g=d.width;e.selectAll("path.violin").style("stroke-width",b.line.width+"px").call(k.stroke,b.line.color).call(k.fill,
b.fillcolor);e.selectAll("path.box").style("stroke-width",l.width+"px").call(k.stroke,l.color).call(k.fill,f.fillcolor);f={"stroke-width":g+"px","stroke-dasharray":2*g+"px,"+g+"px"};e.selectAll("path.mean").style(f).call(k.stroke,d.color);e.selectAll("path.meanline").style(f).call(k.stroke,d.color);h(e,b,a)})}},{"../../components/color":577,"../scatter/style":1074,d3:154}],1173:[function(a,p,l){function m(a){return{marker:{color:h({},k.marker.color,{arrayOk:!1,editType:"style"}),line:{color:h({},
k.marker.line.color,{arrayOk:!1,editType:"style"}),width:h({},k.marker.line.width,{arrayOk:!1,editType:"style"}),editType:"style"},editType:"style"},editType:"style"}}var k=a("../bar/attributes");l=a("../scatter/attributes").line;var h=a("../../lib/extend").extendFlat;p.exports={measure:{valType:"data_array",dflt:[],editType:"calc"},base:{valType:"number",dflt:null,arrayOk:!1,editType:"calc"},x:k.x,x0:k.x0,dx:k.dx,y:k.y,y0:k.y0,dy:k.dy,hovertext:k.hovertext,hovertemplate:k.hovertemplate,text:k.text,
textposition:k.textposition,textfont:k.textfont,insidetextfont:k.insidetextfont,outsidetextfont:k.outsidetextfont,constraintext:k.constraintext,cliponaxis:k.cliponaxis,orientation:k.orientation,offset:k.offset,width:k.width,increasing:m("increasing"),decreasing:m("decreasing"),totals:m("intermediate sums and total"),connector:{line:{color:l.color,width:l.width,dash:l.dash,editType:"plot"},mode:{valType:"enumerated",values:["spanning","between"],dflt:"between",editType:"plot"},visible:{valType:"boolean",
dflt:!0,editType:"plot"},editType:"plot"},offsetgroup:k.offsetgroup,alignmentgroup:k.offsetgroup}},{"../../lib/extend":690,"../bar/attributes":839,"../scatter/attributes":1051}],1174:[function(a,p,l){function m(a){return"a"===a||"absolute"===a}function k(a){return"t"===a||"total"===a}var h=a("../../plots/cartesian/axes"),e=a("../../lib").mergeArray,f=a("../scatter/calc_selection"),b=a("../../constants/numerical").BADNUM;p.exports=function(a,l){var n=h.getFromId(a,l.xaxis||"x"),d=h.getFromId(a,l.yaxis||
"y");"h"===l.orientation?(a=n.makeCalcdata(l,"x"),n=d.makeCalcdata(l,"y")):(a=d.makeCalcdata(l,"y"),n=n.makeCalcdata(l,"x"));d=Math.min(n.length,a.length);for(var g=Array(d),c=0,p,q=!1,u=0;u<d;u++){p=a[u]||0;var w=!1;(a[u]!==b||k(l.measure[u])||m(l.measure[u]))&&u+1<d&&(a[u+1]!==b||k(l.measure[u+1])||m(l.measure[u+1]))&&(w=!0);w=g[u]={i:u,p:n[u],s:p,rawS:p,cNext:w};m(l.measure[u])?(c=w.s,w.isSum=!0,w.dir="totals",w.s=c):k(l.measure[u])?(w.isSum=!0,w.dir="totals",w.s=c):(w.isSum=!1,w.dir=0>w.rawS?
"decreasing":"increasing",p=w.s,w.s=c+p,c+=p);"totals"===w.dir&&(q=!0);l.ids&&(w.id=String(l.ids[u]))}g[0].hasTotals=q;e(l.text,g,"tx");e(l.hovertext,g,"htx");f(g,l);return g}},{"../../constants/numerical":677,"../../lib":700,"../../plots/cartesian/axes":748,"../scatter/calc_selection":1053}],1175:[function(a,p,l){var m=a("../bar/cross_trace_calc").setGroupPositions;p.exports=function(a,h){var e=a._fullLayout,f=a._fullData,b=a.calcdata;a=h.xaxis;var k=h.yaxis;h=[];var l=[],p=[],d;for(d=0;d<f.length;d++){var g=
f[d];if(!0===g.visible&&g.xaxis===a._id&&g.yaxis===k._id&&"waterfall"===g.type){var c=b[d];"h"===g.orientation?p.push(c):l.push(c);h.push(c)}}e={_fullLayout:{_axisMatchGroups:e._axisMatchGroups,_alignmentOpts:e._alignmentOpts,barmode:e.waterfallmode,bargap:e.waterfallgap,bargroupgap:e.waterfallgroupgap}};m(e,a,k,l);m(e,k,a,p);for(d=0;d<h.length;d++)for(c=h[d],e=0;e<c.length;e++)f=c[e],!1===f.isSum&&(f.s0+=0===e?0:c[e-1].s)}},{"../bar/cross_trace_calc":842}],1176:[function(a,p,l){function m(a,b,d){a(b+
".marker.color",d);a(b+".marker.line.color",n.defaultLine);a(b+".marker.line.width")}var k=a("../../lib"),h=a("../bar/defaults").handleGroupingDefaults,e=a("../bar/defaults").handleText,f=a("../scatter/xy_defaults"),b=a("./attributes"),n=a("../../components/color");p.exports={supplyDefaults:function(a,h,d,g){function c(c,d){return k.coerce(a,h,b,c,d)}f(a,h,g,c)?(c("measure"),c("orientation",h.x&&!h.y?"h":"v"),c("base"),c("offset"),c("width"),c("text"),c("hovertext"),c("hovertemplate"),e(a,h,g,c,!1),
m(c,"increasing","#3D9970"),m(c,"decreasing","#FF4136"),m(c,"totals","#4499FF"),c("connector.visible")&&(c("connector.mode"),c("connector.line.width")&&(c("connector.line.color"),c("connector.line.dash")))):h.visible=!1},crossTraceDefaults:function(a,e){function d(a){return k.coerce(c._input,c,b,a)}if("group"===e.waterfallmode)for(var f=0;f<a.length;f++){var c=a[f];var l=c._input;h(l,c,e,d)}},handleGroupingDefaults:h}},{"../../components/color":577,"../../lib":700,"../bar/defaults":843,"../scatter/xy_defaults":1077,
"./attributes":1173}],1177:[function(a,p,l){var m=a("../../plots/cartesian/axes").hoverLabelText,k=a("../../components/color").opacity,h=a("../bar/hover").hoverOnBars;p.exports=function(a,f,b,l){if(f=h(a,f,b,l)){var e=f.cd;b=e[0].trace;a=(l="h"===b.orientation)?a.xa:a.ya;e=e[f.index];l=l?"x":"y";var n=e.isSum?e.b+e.s:e.rawS;if(e.isSum)f[l+"LabelVal"]=m(a,n);else{if(0<n)f.extraText=m(a,n)+" ▲";else if(0>n)f.extraText="("+m(a,-n)+") ▼";else return;f.extraText+="\x3cbr\x3eInitial: "+m(a,e.b+e.s-n)}l=
b[e.dir].marker;b=l.color;a=l.line.color;l=l.line.width;b=k(b)?b:k(a)&&l?a:void 0;f.color=b;return[f]}}},{"../../components/color":577,"../../plots/cartesian/axes":748,"../bar/hover":845}],1178:[function(a,p,l){l={};l.attributes=a("./attributes");l.layoutAttributes=a("./layout_attributes");l.supplyDefaults=a("./defaults").supplyDefaults;l.crossTraceDefaults=a("./defaults").crossTraceDefaults;l.supplyLayoutDefaults=a("./layout_defaults");l.calc=a("./calc");l.crossTraceCalc=a("./cross_trace_calc");
l.plot=a("./plot");l.style=a("./style").style;l.hoverPoints=a("./hover");l.selectPoints=a("../bar/select");l.moduleType="trace";l.name="waterfall";l.basePlotModule=a("../../plots/cartesian");l.categories=["cartesian","svg","oriented","showLegend","zoomScale"];l.meta={};p.exports=l},{"../../plots/cartesian":759,"../bar/select":850,"./attributes":1173,"./calc":1174,"./cross_trace_calc":1175,"./defaults":1176,"./hover":1177,"./layout_attributes":1179,"./layout_defaults":1180,"./plot":1181,"./style":1182}],
1179:[function(a,p,l){p.exports={waterfallmode:{valType:"enumerated",values:["group","overlay"],dflt:"group",editType:"calc"},waterfallgap:{valType:"number",min:0,max:1,editType:"calc"},waterfallgroupgap:{valType:"number",min:0,max:1,dflt:0,editType:"calc"}}},{}],1180:[function(a,p,l){var m=a("../../lib"),k=a("./layout_attributes");p.exports=function(a,e,f){for(var b=!1,h=0;h<f.length;h++){var l=f[h];if(l.visible&&"waterfall"===l.type){b=!0;break}}b&&(m.coerce(a,e,k,"waterfallmode",void 0),m.coerce(a,
e,k,"waterfallgap",.2),m.coerce(a,e,k,"waterfallgroupgap",void 0))}},{"../../lib":700,"./layout_attributes":1179}],1181:[function(a,p,l){function m(a,f,l,m){var b=f.xaxis,g=f.yaxis;h.makeTraceGroups(m,l,"trace bars").each(function(c){var d=k.select(this);c=c[0];var l=c.trace,m=h.ensureSingle(d,"g","lines");if(l.connector&&l.connector.visible){var n="h"===l.orientation,p=l.connector.mode;f.isRangePlot||(c.node3=d);d=m.selectAll("g.line").data(h.identity);d.enter().append("g").classed("line",!0);d.exit().remove();
var q=d.size();d.each(function(c,d){if(d===q-1||c.cNext){var m=k.select(this),r="",t=0;d+1<q&&Array.isArray(l.offset)&&(t-=l.offset[d+1]-l.offset[d]);if(n){var u=b.c2p(c.s1,!0);var v=g.c2p(c.p1,!0);var w=b.c2p(c.s0,!0);var x=g.c2p(c.p0,!0);var y=b.c2p(c.s1,!0);var z=g.c2p(c.p1,!0);if(d+1<q){var A=b.c2p(c.s0+1-t,!0);var B=g.c2p(c.p0+1-t,!0)}}else u=b.c2p(c.p1,!0),v=g.c2p(c.s1,!0),w=b.c2p(c.p0,!0),x=g.c2p(c.s0,!0),y=b.c2p(c.p1,!0),z=g.c2p(c.s1,!0),d+1<q&&(A=b.c2p(c.p0+1-t,!0),B=g.c2p(c.s0+1-t,!0));
"spanning"===p&&!c.isSum&&0<d&&(r=n?r+("M"+w+","+v+"V"+x):r+("M"+u+","+x+"H"+w));"between"!==p&&(c.isSum||d<q-1)&&(r=n?r+("M"+y+","+x+"V"+z):r+("M"+w+","+z+"H"+y));void 0!==A&&void 0!==B&&(r=n?r+("M"+y+","+z+"V"+B):r+("M"+y+","+z+"H"+A));h.ensureSingle(m,"path").attr("d",r).call(e.setClipUrl,f.layerClipId,a)}})}else m.remove()})}var k=a("d3"),h=a("../../lib"),e=a("../../components/drawing"),f=a("../bar/plot");p.exports=function(a,e,h,k){f(a,e,h,k);m(a,e,h,k)}},{"../../components/drawing":598,"../../lib":700,
"../bar/plot":849,d3:154}],1182:[function(a,p,l){var m=a("d3"),k=a("../../components/drawing"),h=a("../../components/color"),e=a("../bar/style").styleTextPoints;p.exports={style:function(a,b){b=b?b[0].node3:m.select(a).selectAll("g.waterfalllayer").selectAll("g.trace");b.style("opacity",function(a){return a[0].trace.opacity});b.each(function(b){var f=m.select(this),l=b[0].trace;f.selectAll(".point \x3e path").each(function(a){var b=l[a.dir].marker;m.select(this).call(h.fill,b.color).call(h.stroke,
b.line.color).call(k.dashLine,b.line.dash,b.line.width).style("opacity",l.selectedpoints&&!a.selected?.3:1)});e(f,l,a);f.selectAll(".lines").each(function(){var a=m.select(this),b=l.connector.line;k.lineGroupStyle(a.selectAll("path"),b.width,b.color,b.dash)})})}}},{"../../components/color":577,"../../components/drawing":598,"../bar/style":852,d3:154}],1183:[function(a,p,l){function m(a,c,d,e){if(e.enabled){var f=e.target,g=n.nestedProperty(c,f),h=g.get();a=b.getDataConversions(a,c,f,h);a=k(e,a);for(var l=
Array(d.length),m=0;m<d.length;m++)l[m]=a(h,d[m]);g.set(l);"count"===e.func&&n.pushUnique(c._arrayAttrs,f)}}function k(a,b){var c=b.d2c,g=b.c2d;switch(a.func){case "count":return h;case "first":return e;case "last":return f;case "sum":return function(a,b){for(var e=0,f=0;f<b.length;f++){var h=c(a[b[f]]);h!==d&&(e+=h)}return g(e)};case "avg":return function(a,b){for(var e=0,f=0,h=0;h<b.length;h++){var k=c(a[b[h]]);k!==d&&(e+=k,f++)}return f?g(e/f):d};case "min":return function(a,b){for(var e=Infinity,
f=0;f<b.length;f++){var h=c(a[b[f]]);h!==d&&(e=Math.min(e,h))}return Infinity===e?d:g(e)};case "max":return function(a,b){for(var e=-Infinity,f=0;f<b.length;f++){var h=c(a[b[f]]);h!==d&&(e=Math.max(e,h))}return-Infinity===e?d:g(e)};case "range":return function(a,b){for(var e=Infinity,f=-Infinity,h=0;h<b.length;h++){var k=c(a[b[h]]);k!==d&&(e=Math.min(e,k),f=Math.max(f,k))}return-Infinity===f||Infinity===e?d:g(f-e)};case "change":return function(a,b){var e=c(a[b[0]]);a=c(a[b[b.length-1]]);return e===
d||a===d?d:g(a-e)};case "median":return function(a,b){for(var e=[],f=0;f<b.length;f++){var h=c(a[b[f]]);h!==d&&e.push(h)}if(!e.length)return d;e.sort();a=(e.length-1)/2;return g((e[Math.floor(a)]+e[Math.ceil(a)])/2)};case "mode":return function(a,b){for(var e={},f=0,h=d,k=0;k<b.length;k++){var l=c(a[b[k]]);if(l!==d){var m=e[l]=(e[l]||0)+1;m>f&&(f=m,h=l)}}return f?g(h):d};case "rms":return function(a,b){for(var e=0,f=0,h=0;h<b.length;h++){var k=c(a[b[h]]);k!==d&&(e+=k*k,f++)}return f?g(Math.sqrt(e/
f)):d};case "stddev":return function(b,e){var f=0,g=0,h=1,k=d,l;for(l=0;l<e.length&&k===d;l++)k=c(b[e[l]]);if(k===d)return d;for(;l<e.length;l++){var m=c(b[e[l]]);m!==d&&(m-=k,f+=m,g+=m*m,h++)}return(b="sample"===a.funcmode?h-1:h)?Math.sqrt((g-f*f/h)/b):0}}}function h(a,b){return b.length}function e(a,b){return a[b[0]]}function f(a,b){return a[b[b.length-1]]}var b=a("../plots/cartesian/axes"),n=a("../lib"),q=a("../plot_api/plot_schema"),r=a("./helpers").pointsAccessorFunction,d=a("../constants/numerical").BADNUM;
l.moduleType="transform";l.name="aggregate";var g=l.attributes={enabled:{valType:"boolean",dflt:!0,editType:"calc"},groups:{valType:"string",strict:!0,noBlank:!0,arrayOk:!0,dflt:"x",editType:"calc"},aggregations:{_isLinkedToArray:"aggregation",target:{valType:"string",editType:"calc"},func:{valType:"enumerated",values:"count sum avg median mode rms stddev min max first last change range".split(" "),dflt:"first",editType:"calc"},funcmode:{valType:"enumerated",values:["sample","population"],dflt:"sample",
editType:"calc"},enabled:{valType:"boolean",dflt:!0,editType:"calc"},editType:"calc"},editType:"calc"},c=g.aggregations;l.supplyDefaults=function(a,b){function d(a,b){return n.coerce(l[f],m,c,a,b)}var e={},f;if(!n.coerce(a,e,g,"enabled",void 0))return e;b=q.findArrayAttributes(b);var h={};for(f=0;f<b.length;f++)h[b[f]]=1;var k=n.coerce(a,e,g,"groups",void 0);if(!Array.isArray(k)){if(!h[k])return e.enabled=!1,e;h[k]=0}var l=a.aggregations||[];a=e.aggregations=Array(l.length);for(f=0;f<l.length;f++){var m=
{_index:f};k=d("target");var p=d("func");d("enabled")&&k&&(h[k]||"count"===p&&void 0===h[k])?("stddev"===p&&d("funcmode"),h[k]=0,a[f]=m):a[f]={enabled:!1,_index:f}}for(f=0;f<b.length;f++)h[b[f]]&&a.push({target:b[f],func:c.func.dflt,enabled:!0,_index:-1});return e};l.calcTransform=function(a,b,c){if(c.enabled){var d=c.groups,e=n.getTargetArray(b,{target:d});if(e){var f,g={},h={},k=[],l=r(b.transforms,c),p=e.length;b._length&&(p=Math.min(p,b._length));for(f=0;f<p;f++){var q=e[f];var t=g[q];void 0===
t?(g[q]=k.length,t=[f],k.push(t),h[g[q]]=l(f)):(k[t].push(f),h[g[q]]=(h[g[q]]||[]).concat(l(f)))}c._indexToPoints=h;c=c.aggregations;for(f=0;f<c.length;f++)m(a,b,k,c[f]);"string"===typeof d&&m(a,b,k,{target:d,func:"first",enabled:!0});b._length=k.length}}}},{"../constants/numerical":677,"../lib":700,"../plot_api/plot_schema":737,"../plots/cartesian/axes":748,"./helpers":1186}],1184:[function(a,p,l){function m(a,d,e){var c=a.operation,f=a.value,g=Array.isArray(f),h=function(b){return d(b,0,a.valuecalendar)},
k=function(a){return d(a,0,e)},l;-1!==b.indexOf(c)?l=g?h(f[0]):h(f):-1!==n.indexOf(c)?l=g?[h(f[0]),h(f[1])]:[h(f),h(f)]:-1!==q.indexOf(c)&&(l=g?f.map(h):[h(f)]);switch(c){case "\x3d":return function(a){return k(a)===l};case "!\x3d":return function(a){return k(a)!==l};case "\x3c":return function(a){return k(a)<l};case "\x3c\x3d":return function(a){return k(a)<=l};case "\x3e":return function(a){return k(a)>l};case "\x3e\x3d":return function(a){return k(a)>=l};case "[]":return function(a){a=k(a);return a>=
l[0]&&a<=l[1]};case "()":return function(a){a=k(a);return a>l[0]&&a<l[1]};case "[)":return function(a){a=k(a);return a>=l[0]&&a<l[1]};case "(]":return function(a){a=k(a);return a>l[0]&&a<=l[1]};case "][":return function(a){a=k(a);return a<=l[0]||a>=l[1]};case ")(":return function(a){a=k(a);return a<l[0]||a>l[1]};case "](":return function(a){a=k(a);return a<=l[0]||a>l[1]};case ")[":return function(a){a=k(a);return a<l[0]||a>=l[1]};case "{}":return function(a){return-1!==l.indexOf(k(a))};case "}{":return function(a){return-1===
l.indexOf(k(a))}}}var k=a("../lib"),h=a("../registry"),e=a("../plots/cartesian/axes"),f=a("./helpers").pointsAccessorFunction;a=a("../constants/filter_ops");var b=a.COMPARISON_OPS,n=a.INTERVAL_OPS,q=a.SET_OPS;l.moduleType="transform";l.name="filter";l.attributes={enabled:{valType:"boolean",dflt:!0,editType:"calc"},target:{valType:"string",strict:!0,noBlank:!0,arrayOk:!0,dflt:"x",editType:"calc"},operation:{valType:"enumerated",values:[].concat(b).concat(n).concat(q),dflt:"\x3d",editType:"calc"},value:{valType:"any",
dflt:0,editType:"calc"},preservegaps:{valType:"boolean",dflt:!1,editType:"calc"},editType:"calc"};l.supplyDefaults=function(a){function b(b,c){return k.coerce(a,e,l.attributes,b,c)}var e={};if(b("enabled")){b("preservegaps");b("operation");b("value");b("target");var c=h.getComponentMethod("calendars","handleDefaults");c(a,e,"valuecalendar",null);c(a,e,"targetcalendar",null)}return e};l.calcTransform=function(a,b,g){function c(a,c){for(var d=0;d<p.length;d++){var e=k.nestedProperty(b,p[d]);a(e,c)}}
if(g.enabled){var d=k.getTargetArray(b,g);if(d){var h=g.target,l=d.length;b._length&&(l=Math.min(l,b._length));var n=g.targetcalendar,p=b._arrayAttrs,q=g.preservegaps;if("string"===typeof h){var r=k.nestedProperty(b,h+"calendar").get();r&&(n=r)}a=e.getDataToCoordFunc(a,b,h,d);n=m(g,a,n);var u={};a={};h=0;if(q){var w=function(a){u[a.astr]=k.extendDeep([],a.get());a.set(Array(l))};r=function(a,b){var c=u[a.astr][b];a.get()[b]=c}}else w=function(a){u[a.astr]=k.extendDeep([],a.get());a.set([])},r=function(a,
b){b=u[a.astr][b];a.get().push(b)};c(w);w=f(b.transforms,g);for(var x=0;x<l;x++)n(d[x])?(c(r,x),a[h++]=w(x)):q&&h++;g._indexToPoints=a;b._length=h}}}},{"../constants/filter_ops":673,"../lib":700,"../plots/cartesian/axes":748,"../registry":829,"./helpers":1186}],1185:[function(a,p,l){var m=a("../lib"),k=a("../plot_api/plot_schema"),h=a("../plots/plots"),e=a("./helpers").pointsAccessorFunction;l.moduleType="transform";l.name="groupby";l.attributes={enabled:{valType:"boolean",dflt:!0,editType:"calc"},
groups:{valType:"data_array",dflt:[],editType:"calc"},nameformat:{valType:"string",editType:"calc"},styles:{_isLinkedToArray:"style",target:{valType:"string",editType:"calc"},value:{valType:"any",dflt:{},editType:"calc",_compareAsJSON:!0},editType:"calc"},editType:"calc"};l.supplyDefaults=function(a,b,e){b={};if(!m.coerce(a,b,l.attributes,"enabled",void 0))return b;m.coerce(a,b,l.attributes,"groups",void 0);m.coerce(a,b,l.attributes,"nameformat",1<e._dataLength?"%{group} (%{trace})":"%{group}");e=
a.styles;var f=b.styles=[];if(e)for(a=0;a<e.length;a++){var h=f[a]={};m.coerce(e[a],f[a],l.attributes.styles,"target");var d=m.coerce(e[a],f[a],l.attributes.styles,"value");m.isPlainObject(d)?h.value=m.extendDeep({},d):d&&delete h.value}return b};l.transform=function(a,b){var f,l=[];for(f=0;f<a.length;f++){var p=void 0,d;var g=a[f];var c=b.transform;var q=b.transformIndex;var t=g.transforms[q].groups,w=e(g.transforms,c);if(Array.isArray(t)&&0!==t.length){var x=m.filterUnique(t),z=Array(x.length),
F=t.length,A=k.findArrayAttributes(g),C=c.styles||[],K={};for(d=0;d<C.length;d++)K[C[d].target]=C[d].value;c.styles&&(p=m.keyedContainer(c,"styles","target","value.name"));C={};var J={};for(d=0;d<x.length;d++){var E=x[d];C[E]=d;J[E]=0;var H=z[d]=m.extendDeepNoArrays({},g);H._group=E;H.transforms[q]._indexToPoints={};var M=null;p&&(M=p.get(E));H.name=M||""===M?M:m.templateString(c.nameformat,{trace:g.name,group:E});M=H.transforms;H.transforms=[];for(E=0;E<M.length;E++)H.transforms[E]=m.extendDeepNoArrays({},
M[E]);for(E=0;E<A.length;E++)m.nestedProperty(H,A[E]).set([])}for(d=0;d<A.length;d++){c=A[d];E=0;for(p=[];E<x.length;E++)p[E]=m.nestedProperty(z[E],c).get();c=m.nestedProperty(g,c).get();for(E=0;E<F;E++)p[C[t[E]]].push(c[E])}for(E=0;E<F;E++)H=z[C[t[E]]],H.transforms[q]._indexToPoints[J[t[E]]]=w(E),J[t[E]]++;for(d=0;d<x.length;d++)E=x[d],H=z[d],h.clearExpandedTraceDefaultColors(H),m.extendDeepNoArrays(H,K[E]||{});g=z}else g=[g];for(q=0;q<g.length;q++)l.push(g[q])}return l}},{"../lib":700,"../plot_api/plot_schema":737,
"../plots/plots":810,"./helpers":1186}],1186:[function(a,p,l){l.pointsAccessorFunction=function(a,k){for(var h,e,f=0;f<a.length;f++){h=a[f];if(h===k)break;h._indexToPoints&&!1!==h.enabled&&(e=h._indexToPoints)}return e?function(a){return e[a]}:function(a){return[a]}}},{}],1187:[function(a,p,l){function m(a,b){switch(a.order){case "ascending":return function(a,e){return b(a.v)-b(e.v)};case "descending":return function(a,e){return b(e.v)-b(a.v)}}}var k=a("../lib"),h=a("../plots/cartesian/axes"),e=a("./helpers").pointsAccessorFunction;
l.moduleType="transform";l.name="sort";l.attributes={enabled:{valType:"boolean",dflt:!0,editType:"calc"},target:{valType:"string",strict:!0,noBlank:!0,arrayOk:!0,dflt:"x",editType:"calc"},order:{valType:"enumerated",values:["ascending","descending"],dflt:"ascending",editType:"calc"},editType:"calc"};l.supplyDefaults=function(a){var b={};k.coerce(a,b,l.attributes,"enabled",void 0)&&(k.coerce(a,b,l.attributes,"target",void 0),k.coerce(a,b,l.attributes,"order",void 0));return b};l.calcTransform=function(a,
b,l){if(l.enabled){var f=k.getTargetArray(b,l);if(f){var n=l.target,d=f.length;b._length&&(d=Math.min(d,b._length));var g=b._arrayAttrs;n=h.getDataToCoordFunc(a,b,n,f);var c=d,p=Array(c);a=Array(c);var q;for(q=0;q<c;q++)p[q]={v:f[q],i:q};p.sort(m(l,n));for(q=0;q<c;q++)a[q]=p[q].i;f=e(b.transforms,l);n={};for(c=0;c<g.length;c++){q=k.nestedProperty(b,g[c]);var w=q.get(),x=Array(d);for(p=0;p<d;p++)x[p]=w[a[p]];q.set(x)}for(p=0;p<d;p++)n[p]=f(a[p]);l._indexToPoints=n;b._length=d}}}},{"../lib":700,"../plots/cartesian/axes":748,
"./helpers":1186}]},{},[22])(22)})};
shadow$provide[490]=function(x,z,q,F,w,K){function a(a){return a&&a.__esModule?a:{default:a}}Object.defineProperty(w,"__esModule",{value:!0});w.default=void 0;x=a(q(488));q=a(q(489));q=(0,x.default)(q.default);w.default=q};
var rW=new B(null,"marker","marker",865118313),sW=new B("dpham.cv.panels.skills","skills-data","dpham.cv.panels.skills/skills-data",-1189979902),tW=new B(null,"desc","desc",2093485764),uW=new B(null,"programming-skills","programming-skills",-1920460914),vW=new B(null,"radialaxis","radialaxis",-1005484905),wW=new B(null,"label","label",1718410804),xW=new B(null,"polar","polar",-1917024704),yW=new B(null,"textColor","textColor",-680658062),zW=new B("dpham.cv.panels.skills","skills-tab","dpham.cv.panels.skills/skills-tab",
1511830892),AW=new B(null,"hoverinfo","hoverinfo",30772936),BW=new B("dpham.cv.panels.skills","set-skills-tab","dpham.cv.panels.skills/set-skills-tab",-1487106868),CW=new B(null,"elevation","elevation",-1609348796),DW=new B(null,"language","language",-1591107564),EW=new B(null,"displayModeBar","displayModeBar",-1187531817),FW=new B(null,"subject","subject",-1411880451),GW=new B(null,"config","config",994861415),HW=new B(null,"autosize","autosize",-724145344),IW=new B(null,"layout","layout",-2120940921),
JW=new B(null,"lg","lg",-80787836),KW=new B(null,"data-analysis","data-analysis",-2055327371),LW=new B(null,"onHover","onHover",1763640399),MW=new B(null,"useResizeHandler","useResizeHandler",-1748859262),NW=new B(null,"toself","toself",-1022747099),OW=new B(null,"personality","personality",1044414103),PW=new B(null,"onChange","onChange",-312891301),QW=new B(null,"text","text",-1790561697),RW=new B(null,"skills-tab","skills-tab",-1255537216),SW=new B(null,"hard-skills","hard-skills",-88224380),TW=
new B(null,"languages","languages",1471910331),UW=new B(null,"visible","visible",-1024216805),VW=new B(null,"b","b",1482224470),WW=new B(null,"indicatorColor","indicatorColor",-1868144605),XW=new B(null,"scrollButtons","scrollButtons",-954109284),YW=new B(null,"range","range",1639692286),ZW=new B(null,"programming","programming",657501860),$W=new B(null,"theta","theta",-427510258);var aX=Rd,bX=xa(),cX=sd(),dX=td.mc.Pb;td.Lb.length+dX>td.gf&&(dX>td.gf/2&&qd(td),td.Lb.length>td.gf/2&&rd(td));var eX=fd(td.ad);eX.bh=void 0;eX.$d=cX;eX.Dd=0;eX.id=fd(td.Ie);eX.xe="Module Load: skills";eX.type="Module Load";td.Lb.push(eX);td.mc.set(String(eX.id),eX);td.gg++;var fX=xa();eX.startTime=eX.De=fX;td.af+=fX-bX;td.Rc.start&&td.Rc.start(eX.id,eX.toString());aX.Lg=eX.id;aX.Zc=aX.lb.skills;var gX=eI(490);var hX=SL.palette.primary.main,iX=function(a,b){var c=null!=b&&(b.G&64||l===b.ea)?E.B(ln,b):b,d=z.B(c,Ds);return function(b,c,d){return function(){function b(b,c){P(c,0,null);c=P(c,1,null);return El(b,yl.B(new V(null,1,5,W,[Pv],null),a),null!=c?c:d)}function c(b){return Dl(b,a,d)}var e=null;e=function(a,d){switch(arguments.length){case 1:return c.call(this,a);case 2:return b.call(this,a,d)}throw Error("Invalid arity: "+arguments.length);};e.j=c;e.B=b;return e}()}(b,c,d)}(new V(null,1,5,W,[RW],null),
O([DW]));IL.B(BW,function(a){return function(b,c){return a.B?a.B(b,c):a.call(null,b,c)}}(iX));var jX=new V(null,1,5,W,[Pv],null),kX=function(a,b,c,d){return function(a){return d.j?d.j(a):d.call(null,a)}}(zW,VD,jX,iX);kL.T?kL.T(zW,VD,jX,kX):kL.call(null,zW,VD,jX,kX);function lX(){return new V(null,2,5,W,[function(){var a=new V(null,2,5,W,[Iy,CH],null);return fL.j?fL.j(a):fL.call(null,a)}(),function(){var a=new V(null,1,5,W,[zW],null);return fL.j?fL.j(a):fL.call(null,a)}()],null)}
function mX(a){var b=P(a,0,null);a=P(a,1,null);return z.D(b,a,z.B(b,TW))}kL.D?kL.D(sW,lX,mX):kL.call(null,sW,lX,mX);
function nX(){return function(a){return function(){return new V(null,4,5,W,[Z,OL.Grid,new n(null,3,[Hv,!0,RA,12,JW,6],null),new V(null,4,5,W,[Z,OL.Card,new V(null,3,5,W,[Z,OL.CardHeader,new n(null,2,[IB,"Skills Summary",Vt,"A picture is worth a thousand words. Hover the dots\nfor more details."],null)],null),new V(null,3,5,W,[Z,OL.CardContent,p(u(a))?function(){var b=ak(u(a)),c=zl(function(){return function(a){return parseInt(qp.j(a))}}(b,a),b),d=zl(FW,b),e=zl(tW,b),f=zl(Vk.B(ik,fx),b),g=Yi.B(f,I(f));
return new V(null,3,5,W,[Z,gX.default,new n(null,6,[Jp,new V(null,1,5,W,[new n(null,7,[cF,Yi.B(c,I(c)),$W,Yi.B(d,I(d)),QW,Yi.B(e,I(e)),ur,"scatterpolar",AW,"text",aD,NW,rW,new n(null,1,[wu,hX],null)],null)],null),IW,new n(null,3,[HW,!0,wq,new n(null,4,[SE,80,bF,30,VW,30,cF,80],null),xW,new n(null,1,[vW,new n(null,2,[UW,!0,YW,new V(null,2,5,W,[0,100],null)],null)],null)],null),GW,new n(null,1,[EW,!1],null),wr,new n(null,2,[er,"100%",qF,"100%"],null),MW,!0,LW,function(a,b,c,d,e,f){return function(a){a=
I(a.points).pointIndex;return p(a)?(a=new V(null,2,5,W,[BW,Mi(f,a)],null),tL.j?tL.j(a):tL.call(null,a)):null}}(b,c,d,e,f,g,a)],null)],null)}():null],null)],null)],null)}}(function(){var a=new V(null,2,5,W,[Iy,SW],null);return fL.j?fL.j(a):fL.call(null,a)}())}
function oX(a,b){return new V(null,4,5,W,[Z,OL.Grid,new n(null,3,[Hv,!0,RA,12,Uy,12],null),new V(null,4,5,W,[Z,OL.Card,new n(null,1,[CW,0],null),new V(null,3,5,W,[Z,OL.CardHeader,new n(null,2,[IB,a,Vt,lK(new V(null,2,5,W,[kM,b],null))],null)],null)],null)],null)}
function pX(){return function(a){return function(){if(p(u(a))){var b=function(){return function(a){return function f(b){return new kk(null,function(){return function(){for(;;){var a=G(b);if(a){if(rj(a)){var c=Th(a),e=N(c),q=ok(e);a:for(var t=0;;)if(t<e){var v=Sg.B(c,t),y=null!=v&&(v.G&64||l===v.ea)?E.B(ln,v):v;v=z.B(y,fx);y=z.B(y,bq);v=gj(new V(null,3,5,W,[oX,v,y],null),new n(null,1,[nH,v],null));q.add(v);t+=1}else{c=!0;break a}return c?qk(q.wa(),f(Uh(a))):qk(q.wa(),null)}q=I(a);c=null!=q&&(q.G&64||
l===q.ea)?E.B(ln,q):q;q=z.B(c,fx);c=z.B(c,bq);return Si(gj(new V(null,3,5,W,[oX,q,c],null),new n(null,1,[nH,q],null)),f(ri(a)))}return null}}}(a),null,null)}}(a)(z.B(u(a),qu))}();return new V(null,3,5,W,[Z,OL.Grid,new V(null,4,5,W,[Z,OL.Card,new V(null,3,5,W,[Z,OL.CardHeader,new n(null,2,[IB,lK(new V(null,2,5,W,[kM,IB.j(u(a))],null)),Vt,lK(new V(null,2,5,W,[kM,Vt.j(u(a))],null))],null)],null),new V(null,3,5,W,[Z,OL.CardContent,new V(null,4,5,W,[Z,OL.Grid,new n(null,1,[tD,!0],null),b],null)],null)],
null)],null)}return null}}(function(){var a=new V(null,1,5,W,[sW],null);return fL.j?fL.j(a):fL.call(null,a)}())}function qX(){var a=new V(null,3,5,W,[SH,SW,new n(null,1,[Kv,"hard_skills.csv"],null)],null);tL.j?tL.j(a):tL.call(null,a);a=new V(null,3,5,W,[SH,CH,new n(null,1,[Kv,"skills.json"],null)],null);tL.j?tL.j(a):tL.call(null,a);a=new V(null,3,5,W,[SH,uW,new n(null,1,[Kv,"programming_skills.json"],null)],null);tL.j?tL.j(a):tL.call(null,a)}
function rX(){return function(a){return function(){return new V(null,7,5,W,[Z,OL.Tabs,new n(null,6,[uv,r.j(oi.j(function(){var b=u(a);return p(b)?b:TW}())),PW,function(){return function(a){a=new V(null,2,5,W,[BW,ik.j(a)],null);return tL.j?tL.j(a):tL.call(null,a)}}(a),WW,Wz,yW,Wz,nG,"scrollable",XW,"on"],null),new V(null,3,5,W,[Z,OL.Tab,new n(null,3,[wW,"Language",uv,"languages",qE,function(){return function(){var a=new V(null,2,5,W,[BW,TW],null);return tL.j?tL.j(a):tL.call(null,a)}}(a)],null)],null),
new V(null,3,5,W,[Z,OL.Tab,new n(null,3,[wW,"Personality",uv,"personality",qE,function(){return function(){var a=new V(null,2,5,W,[BW,OW],null);return tL.j?tL.j(a):tL.call(null,a)}}(a)],null)],null),new V(null,3,5,W,[Z,OL.Tab,new n(null,3,[wW,"Data analysis",uv,"data-analysis",qE,function(){return function(){var a=new V(null,2,5,W,[BW,KW],null);return tL.j?tL.j(a):tL.call(null,a)}}(a)],null)],null),new V(null,3,5,W,[Z,OL.Tab,new n(null,3,[wW,"Programming",uv,"programming",qE,function(){return function(){var a=
new V(null,2,5,W,[BW,ZW],null);return tL.j?tL.j(a):tL.call(null,a)}}(a)],null)],null)],null)}}(function(){var a=new V(null,1,5,W,[zW],null);return fL.j?fL.j(a):fL.call(null,a)}())}
function sX(){qX();var a=function(){var a=new V(null,1,5,W,[zW],null);return fL.j?fL.j(a):fL.call(null,a)}(),b=function(){var a=new V(null,1,5,W,[sW],null);return fL.j?fL.j(a):fL.call(null,a)}();return function(a,b){return function(a){a=null!=a&&(a.G&64||l===a.ea)?E.B(ln,a):a;a=z.B(a,yF);return new V(null,4,5,W,[rB,new n(null,1,[hG,PL(O([wb(a,"content")]))],null),new V(null,2,5,W,[Vq,new n(null,1,[hG,PL(O([wb(a,"appBarSpacer")]))],null)],null),new V(null,5,5,W,[Z,OL.Grid,new n(null,4,[tD,!0,ys,PG,
ZE,zB,pE,40],null),new V(null,1,5,W,[nX],null),new V(null,4,5,W,[Z,OL.Grid,new n(null,3,[Hv,!0,RA,12,JW,6],null),new V(null,3,5,W,[Z,OL.Paper,p(u(b))?new V(null,3,5,W,[Oz,new V(null,1,5,W,[rX],null),new V(null,1,5,W,[pX],null)],null):null],null)],null)],null)],null)}}(a,b)}function OM(){return new V(null,2,5,W,[Z,RL(new V(null,1,5,W,[TL],null),sX)],null)};Rd.setLoaded(void 0);